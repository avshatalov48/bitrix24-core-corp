BX.CrmProductSectionManager=function(){this._id="";this._settings={};this._dialogs={}};BX.CrmProductSectionManager.prototype={initialize:function(e,t){this._id=e;this._settings=t?t:{}},getSetting:function(e,t){return typeof this._settings[e]!="undefined"?this._settings[e]:t},getMessage:function(e){return typeof BX.CrmProductSectionManager.messages[e]!="undefined"?BX.CrmProductSectionManager.messages[e]:""},addSection:function(){this._dialogs["ADD"]={};var e=this._dialogs["ADD"]["POPUP"]=new BX.PopupWindow(this._id+"SectionAdd",null,{autoHide:false,draggable:true,offsetLeft:0,offsetTop:0,bindOptions:{forceBindPosition:false},closeByEsc:true,closeIcon:{top:"10px",right:"15px"},titleBar:this.getMessage("addDialogTitle"),events:{onPopupShow:function(){},onPopupClose:BX.delegate(function(){this._dialogs["ADD"]["POPUP"].destroy()},this),onPopupDestroy:BX.delegate(function(){delete this._dialogs["ADD"]},this)},content:this._prepareSectionAddDialogContent(),buttons:this._prepareSectionAddDialogButtons()});e.show();var t=this._dialogs["ADD"]["ELEMENTS"]["NAME"];BX.focus(t);t.select()},_prepareSectionAddDialogContent:function(){var e=BX.create("TABLE");var t=e.insertRow(-1);var i=t.insertCell(-1);i.innerHTML=this.getMessage("nameFieldTitle")+":";var n=t.insertCell(-1);if(!this._dialogs["ADD"]){this._dialogs["ADD"]={}}this._dialogs["ADD"]["ELEMENTS"]={};n.appendChild(this._dialogs["ADD"]["ELEMENTS"]["NAME"]=BX.create("INPUT",{props:{type:"text",value:this.getMessage("defaultName")},style:{width:"300px"}}));return e},_prepareSectionAddDialogButtons:function(){var e=[];e.push(new BX.PopupWindowButton({text:this.getMessage("addBtnText"),className:"popup-window-button-accept",events:{click:BX.delegate(this._hanleSectionAddDialogSave,this)}}));e.push(new BX.PopupWindowButtonLink({text:this.getMessage("cancelBtnText"),className:"popup-window-button-link-cancel",events:{click:function(){this.popupWindow.close()}}}));return e},_hanleSectionAddDialogSave:function(){var e=BX(this.getSetting("formID"));var t=BX(this.getSetting("actionField"));var i=BX(this.getSetting("nameField"));var n=this._dialogs["ADD"]["ELEMENTS"]["NAME"];if(e&&t&&i&&n){var o=n.value;if(!BX.type.isNotEmptyString(o)){alert(this.getMessage("emptyNameError"));return}if(n.value.length>0){t.value="ADD";i.value=n.value;BX.showWait();e.submit()}}},renameSection:function(e,t){this._dialogs["RENAME"]={};this._dialogs["RENAME"]["DATA"]={};this._dialogs["RENAME"]["DATA"]["ID"]=e;this._dialogs["RENAME"]["DATA"]["NAME"]=t;var i=this._dialogs["RENAME"]["POPUP"]=new BX.PopupWindow(this._id+"SectionRename",null,{autoHide:false,draggable:true,offsetLeft:0,offsetTop:0,bindOptions:{forceBindPosition:false},closeByEsc:true,closeIcon:{top:"10px",right:"15px"},titleBar:this.getMessage("renameDialogTitle"),events:{onPopupShow:function(){},onPopupClose:BX.delegate(function(){this._dialogs["RENAME"]["POPUP"].destroy()},this),onPopupDestroy:BX.delegate(function(){delete this._dialogs["RENAME"]},this)},content:this._prepareSectionRenameDialogContent(),buttons:this._prepareSectionRenameDialogButtons()});i.show();var n=this._dialogs["RENAME"]["ELEMENTS"]["NAME"];BX.focus(n);n.select()},_prepareSectionRenameDialogContent:function(){var e=BX.create("TABLE");var t=e.insertRow(-1);var i=t.insertCell(-1);i.innerHTML=this.getMessage("nameFieldTitle")+":";var n=t.insertCell(-1);if(!this._dialogs["RENAME"]){this._dialogs["RENAME"]={}}this._dialogs["RENAME"]["ELEMENTS"]={};n.appendChild(this._dialogs["RENAME"]["ELEMENTS"]["NAME"]=BX.create("INPUT",{props:{type:"text",value:this._dialogs["RENAME"]["DATA"]["NAME"]},style:{width:"300px"}}));return e},_prepareSectionRenameDialogButtons:function(){var e=[];e.push(new BX.PopupWindowButton({text:this.getMessage("renameBtnText"),className:"popup-window-button-accept",events:{click:BX.delegate(this._hanleSectionRenameDialogSave,this)}}));e.push(new BX.PopupWindowButtonLink({text:this.getMessage("cancelBtnText"),className:"popup-window-button-link-cancel",events:{click:function(){this.popupWindow.close()}}}));return e},_hanleSectionRenameDialogSave:function(){BX.showWait();var e=BX(this.getSetting("formID"));var t=BX(this.getSetting("actionField"));var i=BX(this.getSetting("nameField"));var n=BX(this.getSetting("IDField"));var o=this._dialogs["RENAME"]["ELEMENTS"]["NAME"];var s=this._dialogs["RENAME"]["DATA"]["ID"];if(e&&t&&i&&o&&n&&s>0){if(o.value.length>0){t.value="RENAME";i.value=o.value;n.value=s;e.submit()}}}};BX.CrmProductSectionManager.getDefault=function(){return this._default};BX.CrmProductSectionManager.items={};BX.CrmProductSectionManager._default=null;BX.CrmProductSectionManager.create=function(e,t){var i=new BX.CrmProductSectionManager;i.initialize(e,t);this.items[e]=i;if(!this._default){this._default=i}return i};if(typeof BX.CrmProductSectionManager.messages=="undefined"){BX.CrmProductSectionManager.messages={}}
//# sourceMappingURL=script.map.js