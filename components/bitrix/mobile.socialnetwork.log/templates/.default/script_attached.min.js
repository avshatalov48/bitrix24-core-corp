function __MSLOnFeedScroll(){var e=BX.GetWindowScrollPos();if(e.scrollTop>=maxScroll){BX.unbind(window,"scroll",__MSLOnFeedScroll);BMAjaxWrapper.Wrap({type:"html",method:"GET",url:url_next,data:"",processData:false,callback:function(e){BX("lenta_wrapper").insertBefore(BX.create("DIV",{html:e}),BX("next_post_more"));BX.bind(window,"scroll",__MSLOnFeedScroll);var t=BX.processHTML(e,true);var o=t.SCRIPT;BX.ajax.processScripts(o,true);var n=BX.GetWindowSize();maxScroll=n.scrollHeight-n.innerHeight-190;setTimeout(function(){__MSLCheckNodesHeight()},1e3)},callback_failure:function(){}})}}function __MSLOpenLogEntry(e,t,o,n){if(n!="undefined"&&n!=null&&n&&n.target!=null&&n.target!="undefined"){if(n.target.tagName!="undefined"&&n.target.tagName.toLowerCase()=="a")return false;var a=BX.findParent(n.target,{tag:"A"},{tag:"div",className:"post-item-post-block"});if(a)return false}o=!!o;t+=o?"&BOTTOM=Y":"";if(arLogTs["entry_"+e]!="undefined"&&arLogTs["entry_"+e]!=null)var s="&LAST_LOG_TS="+arLogTs["entry_"+e];else var s="";if(arLikeRandomID["entry_"+e]!="undefined"&&arLikeRandomID["entry_"+e]!=null)var r="&LIKE_RANDOM_ID="+arLikeRandomID["entry_"+e];else var r="";app.openNewPage(t+s+r)}function __MSLDetailMoveBottom(){if(window.platform=="android"){window.scrollTo(0,document.documentElement.scrollHeight)}else{if(BX("post-card-wrap"))BX("post-card-wrap").scrollTop=BX("post-card-wrap").scrollHeight}}function __MSLLogEntryRead(e,t,o){o=!!o;if(arLogTs["entry_"+e]!="undefined"&&arLogTs["entry_"+e]!=null){arLogTs["entry_"+e]=t;if(BX("informer_comments_"+e)&&BX("informer_comments_new_"+e)&&!o){var n=BX("informer_comments_all_"+e).innerHTML.length>0?parseInt(BX("informer_comments_all_"+e).innerHTML):0;var a=n+parseInt(BX("informer_comments_new_"+e).innerHTML);BX.remove(BX("informer_comments_new_"+e));BX.remove(BX("informer_comments_all_"+e));BX("informer_comments_"+e).innerHTML=a}}if(BX("lenta_item_"+e))BX.removeClass(BX("lenta_item_"+e),"lenta-item-new")}function __MSLLogEntryCommentAdd(e){if(BX("informer_comments_"+e)&&!BX("informer_comments_new_"+e)){var t=BX("informer_comments_"+e).innerHTML.length>0?parseInt(BX("informer_comments_"+e).innerHTML):0;var o=t+1;BX("informer_comments_"+e).innerHTML=o}}function __MSLLogEntryRatingLike(e,t){var o=BX("bx-ilike-button-"+e);if(o){var n=BX.findChild(o,{className:"post-item-inform-right-text"},true,false);if(n){var a=n.innerHTML.length>0?parseInt(n.innerHTML):0;if(t=="plus"){var s=a+1;BX.removeClass(o,"post-item-inform-likes");BX.addClass(o,"post-item-inform-likes-active");if(BXRL!="undefined"&&BXRL[e]!="undefined")BXRL[e].lastVote="plus"}else{var s=a-1;BX.removeClass(o,"post-item-inform-likes-active");BX.addClass(o,"post-item-inform-likes");if(BXRL!="undefined"&&BXRL[e]!="undefined")BXRL[e].lastVote="cancel"}n.innerHTML=s}}}function __MSLLogEntryFollow(e){var t=BX("log_entry_follow_"+e,true);if(t){var o=t.getAttribute("data-follow")=="Y"?"Y":"N";var n=o=="Y"?"N":"Y";BX.removeClass(t,o=="Y"?"post-item-follow-active":"post-item-follow");BX.addClass(t,o=="Y"?"post-item-follow":"post-item-follow-active");t.setAttribute("data-follow",n)}}function __MSLCheckNodesHeight(){if(arBlockToCheck!="undefined"&&arBlockToCheck!=null){var e=false;for(var t=0;t<arBlockToCheck.length;t++){if(BX(arBlockToCheck[t].more_block_id)&&BX(arBlockToCheck[t].text_block_id)){e=BX(arBlockToCheck[t].text_block_id).offsetHeight;if(BX(arBlockToCheck[t].title_block_id))e+=BX(arBlockToCheck[t].title_block_id).offsetHeight;if(e>180){BX(arBlockToCheck[t].more_block_id).style.display="block";if(BX(arBlockToCheck[t].more_corner_id))BX(arBlockToCheck[t].more_corner_id).style.display="block";if(BX(arBlockToCheck[t].lenta_item_id))BX.removeClass(BX(arBlockToCheck[t].lenta_item_id),"post-without-informers")}else{if(BX(arBlockToCheck[t].more_overlay_id))BX(arBlockToCheck[t].more_overlay_id).style.display="none";if(BX.hasClass(BX(arBlockToCheck[t].lenta_item_id),"post-without-informers")&&BX(arBlockToCheck[t].post_inform_wrap_id,true))BX(arBlockToCheck[t].post_inform_wrap_id,true).style.display="none"}}}}}function __MSLExpandText(e){var t=BX("post_block_check_cont_"+e);if(t){if(BX.hasClass(t,"post-item-post-block")){BX.addClass(t,"post-item-post-block-full");BX.removeClass(t,"post-item-post-block")}else if(BX.hasClass(t,"lenta-info-block-wrapp")){BX.addClass(t,"lenta-info-block-wrapp-full");BX.removeClass(t,"lenta-info-block-wrapp")}if(BX("post_more_block_"+e))BX("post_more_block_"+e).style.display="none";if(BX("post_more_corner_"+e))BX("post_more_corner_"+e).style.display="none";if(BX("post_block_check_more_"+e))BX("post_block_check_more_"+e).style.display="none"}}function __MSLShowPosts(e){var t=null;var o=null;var n=null;for(var a=0;a<e.length;a++){n=Math.floor(Math.random()*1e5)+1;if(arComments[a]["EVENT_FORMATTED"]&&arComments[a]["EVENT_FORMATTED"]["MESSAGE"]&&arComments[a]["EVENT_FORMATTED"]["MESSAGE"].length>0)comment_message=arComments[a]["EVENT_FORMATTED"]["MESSAGE"];else comment_message=arComments[a]["EVENT"]["MESSAGE"];if(comment_message.length>0){if(arComments[a]["AVATAR_SRC"]&&arComments[a]["AVATAR_SRC"]!="undefined")var s=BX.create("div",{props:{className:"avatar"},style:{backgroundImage:"url('"+arComments[a]["AVATAR_SRC"]+"')",backgroundRepeat:"no-repeat",backgroundSize:"29px 29px"}});else var s=BX.create("div",{props:{className:"avatar"}});if(arComments[a]["EVENT_FORMATTED"]!="undefined"&&arComments[a]["EVENT_FORMATTED"]["DATETIME"]!="undefined")comment_datetime=arComments[a]["EVENT_FORMATTED"]["DATETIME"];else comment_datetime=arComments[a]["LOG_TIME_FORMAT"];class_name_unread="";t=null;if(arComments[a]["EVENT"]["RATING_TYPE_ID"].length>0&&arComments[a]["EVENT"]["RATING_ENTITY_ID"]>0){you_like_class=arComments[a]["EVENT"]["RATING_USER_VOTE_VALUE"]>0?"post-item-inform-likes-active":"post-item-inform-likes";t=BX.create("div",{props:{className:"post-item-inform-wrap"},children:[BX.create("div",{props:{id:"bx-ilike-button-"+arComments[a]["EVENT"]["RATING_TYPE_ID"]+"-"+arComments[a]["EVENT"]["RATING_ENTITY_ID"]+"-"+n,className:"post-item-informers "+you_like_class},children:[BX.create("div",{props:{className:"post-item-inform-left"}}),BX.create("div",{props:{className:"post-item-inform-right"},children:[BX.create("span",{props:{className:"post-item-inform-right-text"},html:arComments[a]["EVENT"]["RATING_TOTAL_POSITIVE_VOTES"]})]})]})]})}commentNode=BX.create("div",{props:{className:"post-comment-block"},children:[s,BX.create("div",{props:{className:"post-comment-cont"},children:[BX.create("a",{props:{className:"post-comment-author"},attrs:{href:arComments[a]["CREATED_BY"]["URL"]},html:arComments[a]["CREATED_BY"]["FORMATTED"]}),BX.create("div",{props:{className:"post-comment-text"},html:comment_message}),BX.create("div",{props:{className:"post-comment-time"},html:comment_datetime}),t]})]});BX("post-comment-hidden").appendChild(commentNode);if(t){if(!window.RatingLike&&top.RatingLike)RatingLike=top.RatingLike;RatingLike.Set(arComments[a]["EVENT"]["RATING_TYPE_ID"]+"-"+arComments[a]["EVENT"]["RATING_ENTITY_ID"]+"-"+n,arComments[a]["EVENT"]["RATING_TYPE_ID"],arComments[a]["EVENT"]["RATING_ENTITY_ID"],!arComments[a]["EVENT_FORMATTED"]["ALLOW_VOTE"]["RESULT"]?"N":"Y")}}}BX("post-comment-hidden").style.display="block";BX("post-comment-more").style.display="none"}function __MSLShowComments(e){var t=null;var o=null;var n=null;var a=null;var s=null;var r=null;for(var l=0;l<e.length;l++){n=Math.floor(Math.random()*1e5)+1;if(e[l]["EVENT_FORMATTED"]&&e[l]["EVENT_FORMATTED"]["MESSAGE"]&&e[l]["EVENT_FORMATTED"]["MESSAGE"].length>0)comment_message=e[l]["EVENT_FORMATTED"]["MESSAGE"];else comment_message=e[l]["EVENT"]["MESSAGE"];if(comment_message.length>0){if(e[l]["AVATAR_SRC"]&&e[l]["AVATAR_SRC"]!="undefined")var i=BX.create("div",{props:{className:"avatar"},style:{backgroundImage:"url('"+e[l]["AVATAR_SRC"]+"')",backgroundRepeat:"no-repeat",backgroundSize:"29px 29px"}});else var i=BX.create("div",{props:{className:"avatar"}});if(e[l]["EVENT_FORMATTED"]!="undefined"&&e[l]["EVENT_FORMATTED"]["DATETIME"]!="undefined")comment_datetime=e[l]["EVENT_FORMATTED"]["DATETIME"];else comment_datetime=e[l]["LOG_TIME_FORMAT"];class_name_unread="";t=null;if(e[l]["EVENT"]["RATING_TYPE_ID"].length>0&&e[l]["EVENT"]["RATING_ENTITY_ID"]>0){a=e[l]["EVENT"]["RATING_USER_VOTE_VALUE"]>0?"post-comment-state-active":"post-comment-state";s=e[l]["EVENT"]["RATING_USER_VOTE_VALUE"]>0?BX.message("RVCTextN"):BX.message("RVCTextY");r=parseInt(e[l]["EVENT"]["RATING_TOTAL_POSITIVE_VOTES"])<=0?{display:"none"}:{};t=BX.create("div",{props:{className:"post-comment-likes"},children:[BX.create("div",{props:{id:"bx-ilike-button-"+e[l]["EVENT"]["RATING_TYPE_ID"]+"-"+e[l]["EVENT"]["RATING_ENTITY_ID"]+"-"+n,className:"post-comment-likes-text "+a},html:s}),BX.create("div",{props:{id:"bx-ilike-count-"+e[l]["EVENT"]["RATING_TYPE_ID"]+"-"+e[l]["EVENT"]["RATING_ENTITY_ID"]+"-"+n,className:"post-comment-likes-counter"},style:r,html:e[l]["EVENT"]["RATING_TOTAL_POSITIVE_VOTES"]})]})}o=BX.create("div",{props:{className:"post-comment-block"},children:[i,BX.create("div",{props:{className:"post-comment-cont"},children:[BX.create("a",{props:{className:"post-comment-author"},attrs:{href:e[l]["CREATED_BY"]["URL"]},html:e[l]["CREATED_BY"]["FORMATTED"]}),BX.create("div",{props:{className:"post-comment-text"},html:comment_message}),BX.create("div",{props:{className:"post-comment-time"},html:comment_datetime}),t]})]});BX("post-comment-hidden").appendChild(o);if(t){if(!window.RatingLikeComments&&top.RatingLikeComments)RatingLikeComments=top.RatingLikeComments;RatingLikeComments.Set(e[l]["EVENT"]["RATING_TYPE_ID"]+"-"+e[l]["EVENT"]["RATING_ENTITY_ID"]+"-"+n,e[l]["EVENT"]["RATING_TYPE_ID"],e[l]["EVENT"]["RATING_ENTITY_ID"],!e[l]["EVENT_FORMATTED"]["ALLOW_VOTE"]["RESULT"]?"N":"Y")}}}BX("post-comment-hidden").style.display="block";BX("post-comment-more").style.display="none"}function __MSLShowNewComment(e){if(e["AVATAR_SRC"]&&e["AVATAR_SRC"]!="undefined")var t=BX.create("div",{props:{className:"avatar"},style:{backgroundImage:"url('"+e["AVATAR_SRC"]+"')",backgroundRepeat:"no-repeat",backgroundSize:"29px 29px"}});else var t=BX.create("div",{props:{className:"avatar"}});var o=BX.create("div",{props:{className:"post-comment-block"},children:[t,BX.create("div",{props:{className:"post-comment-cont"},children:[BX.create("a",{props:{className:"post-comment-author"},attrs:{href:e["CREATED_BY"]["URL"]},html:e["CREATED_BY"]["FORMATTED"]}),BX.create("div",{props:{className:"post-comment-text"},html:e["MESSAGE_FORMAT"]}),BX.create("div",{props:{className:"post-comment-time"},html:e["LOG_TIME_FORMAT"]})]})]});BX("post-comment-last-after").parentNode.insertBefore(o,BX("post-comment-last-after"));BX("comment_send_form_comment").value="";var n=BX.message("MSLLogId");if(BX("informer_comments_"+n)&&!BX("informer_comments_new_"+n)){var a=BX("informer_comments_"+n).innerHTML.length>0?parseInt(BX("informer_comments_"+n).innerHTML):0;var s=a+1;BX("informer_comments_"+n).innerHTML=s}BXMobileApp.onCustomEvent("onLogEntryCommentAdd",{log_id:BX.message("MSLLogId")},true)}function __MSLDisableSubmitButton(e){var t=BX("comment_send_button");var o=BX("comment_send_button_waiter");if(t){t.disabled=e;if(e){BX.addClass(t,"send-message-button-disabled");if(o){var n=BX.pos(t);var a=BX.pos(o);o.style.top=n.top+parseInt(n.height/2)-10+"px";o.style.left=n.left+parseInt(n.width/2)-10+"px";o.style.zIndex=1e4;o.style.display="block"}}else{if(o)o.style.display="none";BX.removeClass(t,"send-message-button-disabled")}}}function __MSLGetHiddenDestinations(e,t,o){var n={sessid:BX.message("MSLSessid"),site:BX.message("MSLSiteId"),lang:BX.message("MSLLangId"),dlim:BX.message("MSLDestinationLimit"),log_id:parseInt(e),nt:BX.message("MSLNameTemplate"),sl:BX.message("MSLShowLogin"),p_user:BX.message("MSLPathToUser"),action:"get_more_destination",author_id:parseInt(t)};BMAjaxWrapper.Wrap({type:"json",method:"POST",url:"/bitrix/components/bitrix/mobile.socialnetwork.log/ajax.php",data:n,callback:function(e){if(e["arDestinations"]!="undefined"){var t=e["arDestinations"];if(typeof t=="object"){if(BX(o)){var n=o.parentNode;n.removeChild(o);for(var a=0;a<t.length;a++){if(typeof t[a]["TITLE"]!="undefined"&&t[a]["TITLE"].length>0){n.appendChild(BX.create("SPAN",{html:",&nbsp;"}));if(typeof t[a]["URL"]!="undefined"&&t[a]["URL"].length>0)n.appendChild(BX.create("A",{props:{className:"post-item-destination"+(t[a]["STYLE"]!="undefined"&&t[a]["STYLE"].length>0?" post-item-dest-"+t[a]["STYLE"]:""),href:t[a]["URL"]},html:t[a]["TITLE"]}));else n.appendChild(BX.create("SPAN",{props:{className:"post-item-destination"+(t[a]["STYLE"]!="undefined"&&t[a]["STYLE"].length>0?"post-item-dest-"+t[a]["STYLE"]:"")},html:t[a]["TITLE"]}))}}__MSLCheckNodesHeight()}}}},callback_failure:function(){}})}function __MSLGetNewPosts(){}function __MSLOnErrorClick(){if(BX("blog-post-new-error")){BX("blog-post-new-error").style.display="none";BX.unbind(BX("blog-post-new-error"),"click",__MSLOnErrorClick)}}function __MSLPullDownInit(e){e=!!e;if(e){if(!isPullDownEnabled){app.pullDown({enable:true,pulltext:BX.message("MSLPullDownText1"),downtext:BX.message("MSLPullDownText2"),loadtext:BX.message("MSLPullDownText3"),callback:function(){bReload=true;setTimeout(function(){app.pullDownLoadingStop();bReload=false},3e4);if(!BMAjaxWrapper.offline)app.BasicAuth({success:function(){if(bReload){document.location.reload()}},failture:function(){app.pullDownLoadingStop()}});else app.pullDownLoadingStop()}})}isPullDownEnabled=true}else{app.pullDown({enable:false});isPullDownEnabled=false}}function __MSLScrollInit(e,t){e=!!e;t=!!t;if(e){BX.unbind(window,"scroll",__MSLOnFeedScroll);BX.bind(window,"scroll",__MSLOnFeedScroll)}else{BX.unbind(window,"scroll",__MSLOnFeedScroll)}if(t&&BX("next_post_more"))BX("next_post_more").style.display=e?"block":"none"}function __MSLShowNotifier(e){BX("lenta_notifier_cnt",true).innerHTML=e||"";e=parseInt(e);cnt_cent=e%100;var t=e%10;var o="";if(cnt_cent>=10&&cnt_cent<15)o=3;else if(t==0)o=3;else if(t==1)o=1;else if(t==2||t==3||t==4)o=2;else o=3;BX("lenta_notifier_cnt_title",true).innerHTML=BX.message("MSLLogCounter"+o);BX.addClass(BX("lenta_notifier",true),"lenta-notifier-shown")}function __MSLHideNotifier(){BX.removeClass(BX("lenta_notifier",true),"lenta-notifier-shown")}function __MSLSetFollow(e){var t=BX("log_entry_follow_"+e,true);if(t){var o=t.getAttribute("data-follow")=="Y"?"Y":"N";var n=o=="Y"?"N":"Y";BX.removeClass(t,o=="Y"?"post-item-follow-active":"post-item-follow");BX.addClass(t,o=="Y"?"post-item-follow":"post-item-follow-active");t.setAttribute("data-follow",n)}var a={sessid:BX.bitrix_sessid(),site:BX.message("MSLSiteId"),lang:BX.message("MSLLangId"),log_id:parseInt(e),follow:n,action:"change_follow"};BMAjaxWrapper.Wrap({type:"json",method:"POST",url:"/bitrix/components/bitrix/mobile.socialnetwork.log/ajax.php",data:a,callback:function(n){if(n["SUCCESS"]!="Y"&&t){BX.removeClass(t,o=="Y"?"post-item-follow":"post-item-follow-active");BX.addClass(t,o=="Y"?"post-item-follow-active":"post-item-follow");t.setAttribute("data-follow",o)}if(parseInt(BX.message("MSLLogId"))>0)BXMobileApp.onCustomEvent("onLogEntryFollow",{log_id:e},true)},callback_failure:function(){if(t){BX.removeClass(t,o=="Y"?"post-item-follow":"post-item-follow-active");BX.addClass(t,o=="Y"?"post-item-follow-active":"post-item-follow");t.setAttribute("data-follow",o)}}});return false}
//# sourceMappingURL=script_attached.map.js