{"version":3,"file":"script.js","sources":["script.es6.js"],"sourcesContent":["import {ajax as Ajax, Loc, Text, Tag, Dom, Type} from 'main.core';\nimport { PopupManager } from 'main.popup';\nimport { MessageBox, MessageBoxButtons } from 'ui.dialogs.messagebox';\nimport 'ui.switcher';\nimport {PhoneVerify} from 'bitrix24.phoneverify';\n\nconst PHONE_VERIFY_FORM_ENTITY = 'crm_webform';\n\nclass WebFormList\n{\n\t#groupAction: ?string = null;\n\n\tconstructor()\n\t{\n\n\t}\n\n\tinit(params)\n\t{\n\t\tthis.reloadGridTimeoutId = 0;\n\t\tthis.gridId = params.gridId;\n\t\tthis.gridNode = document.getElementById(this.gridId);\n\n\t\tconst hideDescBtnNode = BX('CRM_LIST_DESC_BTN_HIDE');\n\t\tif (hideDescBtnNode)\n\t\t{\n\t\t\tBX.bind(hideDescBtnNode, 'click', function () {\n\t\t\t\tBX.addClass(BX('CRM_LIST_DESC_CONT'), 'crm-webform-list-info-hide');\n\t\t\t\tBX.userOptions.delay = 0;\n\t\t\t\tBX.userOptions.save('crm', 'webform_list_view', 'hide-desc', 'Y');\n\t\t\t});\n\t\t}\n\n\t\tconst notifyBtnNode = BX('CRM_LIST_WEBFORM_NOTIFY_BTN_HIDE');\n\t\tif (notifyBtnNode)\n\t\t{\n\t\t\tBX.bind(notifyBtnNode, 'click', function () {\n\t\t\t\tBX.addClass(BX('CRM_LIST_DESC_CONT'), 'crm-webform-list-info-hide');\n\t\t\t\tBX.userOptions.delay = 0;\n\t\t\t\tBX.userOptions.save('crm', 'notify_webform', 'ru_fz_152', 'Y');\n\t\t\t});\n\t\t}\n\n\t\tthis.#renderGridRows();\n\t\tBX.addCustomEvent('Grid::updated', () => {\n\t\t\tthis.#renderGridRows();\n\t\t});\n\n\t\treturn this;\n\t}\n\n\t#renderGridRows()\n\t{\n\t\tthis.#renderEntities();\n\t\tthis.#renderQrButtons();\n\t\tthis.#renderActiveSwitchers();\n\t}\n\n\t#renderQrButtons()\n\t{\n\t\tconst container = this.#getGridContainer();\n\t\tif (!container)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst switcherAttr = 'data-crm-form-qr';\n\t\tlet switchers = container.querySelectorAll('[' + switcherAttr + ']');\n\t\tswitchers = Array.prototype.slice.call(switchers);\n\t\tswitchers.forEach(node => {\n\t\t\tif (node.querySelector('.crm-webform-qr-btn'))\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst data = JSON.parse(node.getAttribute(switcherAttr));\n\t\t\tif (data.needVerify)\n\t\t\t{\n\t\t\t\tconst onClickVerify = () => {\n\t\t\t\t\tthis.#verifyPhone(\n\t\t\t\t\t\tPHONE_VERIFY_FORM_ENTITY,\n\t\t\t\t\t\tdata.id,\n\t\t\t\t\t\t() => {\n\t\t\t\t\t\t\t(new BX.Crm.Form.Qr({link: data.path})).show();\n\t\t\t\t\t\t},\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tnode.appendChild(Tag.render`\n\t\t\t\t\t<button\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\tclass=\"crm-webform-qr-btn ui-btn ui-btn-xs ui-btn-light-border ui-btn-round ui-btn-no-caps ui-btn-icon-share\"\n\t\t\t\t\t\tonclick=\"${onClickVerify}\"\n\t\t\t\t\t>\n\t\t\t\t\t\t${Loc.getMessage('CRM_WEBFORM_QR_OPEN')}\n\t\t\t\t\t</button>\n\t\t\t\t`);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t(new BX.Crm.Form.Qr({link: data.path})).renderTo(node);\n\t\t\t}\n\t\t});\n\t}\n\n\t#renderEntities()\n\t{\n\t\tconst container = this.#getGridContainer();\n\t\tif (!container)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst attr = 'data-crm-form-entities';\n\t\tlet buttons = container.querySelectorAll('[' + attr + ']');\n\t\tbuttons = Array.prototype.slice.call(buttons);\n\t\tbuttons.forEach(node => {\n\t\t\tconst data = JSON.parse(node.getAttribute(attr));\n\t\t\tconst handler = (event: Event) => {\n\t\t\t\tevent.stopPropagation();\n\t\t\t\tevent.preventDefault();\n\t\t\t\tconst id = 'crm-form-grid-entities-' + data.id;\n\t\t\t\tlet popup = PopupManager.getPopupById(id);\n\t\t\t\tif (popup)\n\t\t\t\t{\n\t\t\t\t\tconst hide = popup.getId() === id;\n\t\t\t\t\tpopup.destroy();\n\t\t\t\t\tpopup = null;\n\t\t\t\t\tif (hide)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconst contentNode = Tag.render`<div class=\"crm-webform-list-entities\"></div>`;\n\t\t\t\tdata.counters.forEach(counter => {\n\t\t\t\t\tconst counterHandler = event => {\n\t\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\tBX.SidePanel.Instance.open(counter.LINK);\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t};\n\t\t\t\t\tconst caption = Text.encode(counter.ENTITY_CAPTION);\n\t\t\t\t\tconst value = Text.encode(counter.VALUE);\n\t\t\t\t\tconst counterNode = !counter.LINK\n\t\t\t\t\t\t? Tag.render`\n\t\t\t\t\t\t\t<span \n\t\t\t\t\t\t\t\tclass=\"crm-webform-active-popup-item-date\" \n\t\t\t\t\t\t\t\ttitle=\"${caption}\"\n\t\t\t\t\t\t\t>${caption}</span>\n\t\t\t\t\t\t`\n\t\t\t\t\t\t: Tag.render`\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\thref=\"${Text.encode(counter.LINK)}\"\n\t\t\t\t\t\t\t\tonclick=\"${counterHandler}\"\n\t\t\t\t\t\t\t\tclass=\"crm-webform-active-popup-item-date\"\n\t\t\t\t\t\t\t\ttitle=\"${caption}\"\n\t\t\t\t\t\t\t>${caption}</a>\n\t\t\t\t\t\t`\n\t\t\t\t\t;\n\n\t\t\t\t\tcontentNode.appendChild(Tag.render`\n\t\t\t\t\t\t<div class=\"crm-webform-list-active-popup-row\">\n\t\t\t\t\t\t\t${counterNode}\n\t\t\t\t\t\t\t<span class=\"crm-webform-list-entity-counter\">${value}</span>\n\t\t\t\t\t\t</div>\t\t\t\t\t\t\n\t\t\t\t\t`);\n\t\t\t\t});\n\n\t\t\t\tlet popupWidth = 160;\n\n\t\t\t\tpopup = PopupManager.create({\n\t\t\t\t\tid,\n\t\t\t\t\tclassName: 'crm-webform-list-entities-popup',\n\t\t\t\t\tcloseByEsc: true,\n\t\t\t\t\tautoHide: true,\n\t\t\t\t\tbindElement: event.target,\n\t\t\t\t\tcontent: contentNode,\n\t\t\t\t\tangle: {\n\t\t\t\t\t\toffset: (popupWidth / 2) - 16\n\t\t\t\t\t},\n\t\t\t\t\toffsetLeft: -(popupWidth / 2) + (event.target.offsetWidth / 2) + 40,\n\t\t\t\t\tanimation: 'fading-slide',\n\t\t\t\t\twidth: popupWidth,\n\t\t\t\t\tpadding: 0,\n\t\t\t\t});\n\t\t\t\tpopup.show();\n\t\t\t};\n\n\t\t\tnode.addEventListener('click', handler);\n\t\t});\n\t}\n\n\t#renderActiveSwitchers()\n\t{\n\t\tconst container = this.#getGridContainer();\n\t\tif (!container)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst switcherAttr = 'data-crm-form-switcher';\n\t\tlet switchers = container.querySelectorAll('[' + switcherAttr + ']');\n\t\tswitchers = Array.prototype.slice.call(switchers);\n\t\tswitchers.forEach(node => {\n\t\t\tnode.innerHTML = '';\n\t\t\tconst data = JSON.parse(node.getAttribute(switcherAttr));\n\n\t\t\tconst nodeText = Tag.render`\n\t\t\t\t<div\n\t\t\t\t\tclass=\"${data.active ? '' : 'crm-webform-list-text-gray'}\"\n\t\t\t\t>${Text.encode(data.dateActiveShort)}</div>\n\t\t\t`;\n\t\t\tconst switcher = new BX.UI.Switcher({\n\t\t\t\tid: 'crm-form-list-item-' + data.id,\n\t\t\t\tchecked: data.active,\n\t\t\t\tcolor: 'green',\n\t\t\t\thandlers: {\n\t\t\t\t\ttoggled: () => {\n\t\t\t\t\t\tthis.activate(data.id, switcher.isChecked(), false, nodeText);\n\t\t\t\t\t\tswitcher.isChecked()\n\t\t\t\t\t\t\t? Dom.removeClass(nodeText, 'crm-webform-list-text-gray')\n\t\t\t\t\t\t\t: Dom.addClass(nodeText, 'crm-webform-list-text-gray')\n\t\t\t\t\t\t;\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t});\n\t\t\tswitcher.renderTo(node);\n\n\t\t\tconst handler = (event: Event) => {\n\t\t\t\tconst id = 'crm-form-grid-active-' + data.id;\n\t\t\t\tlet popup = PopupManager.getPopupById(id);\n\t\t\t\tif (popup)\n\t\t\t\t{\n\t\t\t\t\tconst hide = popup.getId() === id;\n\t\t\t\t\tpopup.destroy();\n\t\t\t\t\tpopup = null;\n\t\t\t\t\tif (hide)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tlet popupWidth = 250;\n\n\t\t\t\tpopup = PopupManager.create({\n\t\t\t\t\tid,\n\t\t\t\t\tclassName: 'crm-webform-list-active-popup',\n\t\t\t\t\tcloseByEsc: true,\n\t\t\t\t\tautoHide: true,\n\t\t\t\t\tangle: {\n\t\t\t\t\t\toffset: (popupWidth / 2) - 16\n\t\t\t\t\t},\n\t\t\t\t\toffsetLeft: -(popupWidth / 2) + (event.target.offsetWidth / 2) + 40,\n\t\t\t\t\tanimation: 'fading-slide',\n\t\t\t\t\tbindElement: event.target,\n\t\t\t\t\twidth: popupWidth,\n\t\t\t\t\tpadding: 0,\n\t\t\t\t\tcontent: Tag.render`\n\t\t\t\t\t\t<div class=\"crm-webform-list-active-popup-row\">\n\t\t\t\t\t\t\t<div class=\"crm-webform-list-active-popup-item\">\n\t\t\t\t\t\t\t\t<div class=\"crm-webform-active-popup-item-caption\">${Text.encode(data.activatedBy.text)}</div>\n\t\t\t\t\t\t\t\t<div class=\"crm-webform-active-popup-item-date\"\n\t\t\t\t\t\t\t\t\ttitle=\"${Text.encode(data.dateActiveFull)}\"\n\t\t\t\t\t\t\t\t>${Text.encode(data.dateActiveFull)}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<a \n\t\t\t\t\t\t\t\thref=\"${Text.encode(data.activatedBy.path)}\"\n\t\t\t\t\t\t\t\tonclick=\"BX.SidePanel.Instance.open('${Text.encode(data.activatedBy.path)}')\"\n\t\t\t\t\t\t\t\ttitle=\"${Text.encode(data.activatedBy.name)}\"\n\t\t\t\t\t\t\t\tclass=\"ui-icon ui-icon-common-user crm-webform-active-popup-item-avatar ${Text.encode(data.activatedBy.iconClass)}\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<i style=\"background-image: url(${encodeURI(Text.encode(data.activatedBy.iconPath))});\"></i>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t`,\n\t\t\t\t});\n\t\t\t\tpopup.show();\n\t\t\t};\n\n\t\t\tnode.appendChild(Tag.render`\n\t\t\t\t<div class=\"crm-webform-list-active-desc\">\n\t\t\t\t\t${nodeText}\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<a \n\t\t\t\t\t\t\tclass=\"crm-webform-list-active-more\"\n\t\t\t\t\t\t\tonclick=\"${handler}\"\n\t\t\t\t\t\t>${Loc.getMessage('CRM_WEBFORM_LIST_BTN_DETAILS')}</a>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`);\n\t\t});\n\t}\n\n\tsetGroupAction(code: string)\n\t{\n\t\tthis.#groupAction = code;\n\t}\n\n\trunGroupAction()\n\t{\n\t\tswitch (this.#groupAction)\n\t\t{\n\t\t\tcase 'activate':\n\t\t\t\tthis.activateList(true);\n\t\t\t\treturn;\n\t\t\tcase 'deactivate':\n\t\t\t\tthis.activateList(false);\n\t\t\t\treturn;\n\t\t\tcase 'delete':\n\t\t\t\tthis.removeList();\n\t\t\t\treturn;\n\t\t}\n\n\t\tif (this.#groupAction)\n\t\t{\n\t\t\tthrow new Error(`Wrong group action \"${this.#groupAction}\"`);\n\t\t}\n\t}\n\n\tshowConfirm(code = 'delete')\n\t{\n\t\tcode = code.toUpperCase();\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tMessageBox.show({\n\t\t\t\tmessage: Loc.getMessage('CRM_WEBFORM_LIST_' + code + '_CONFIRM'),\n\t\t\t\tmodal: true,\n\t\t\t\ttitle: Loc.getMessage('CRM_WEBFORM_LIST_' + code + '_CONFIRM_TITLE'),\n\t\t\t\tbuttons: MessageBoxButtons.OK_CANCEL,\n\t\t\t\tonOk: messageBox => {\n\t\t\t\t\tmessageBox.close();\n\t\t\t\t\tresolve();\n\t\t\t\t},\n\t\t\t\tonCancel: messageBox => {\n\t\t\t\t\tmessageBox.close();\n\t\t\t\t\treject();\n\t\t\t\t},\n\t\t\t});\n\t\t});\n\t}\n\n\t#getGrid()\n\t{\n\t\treturn BX.Main.gridManager.getInstanceById(this.gridId);\n\t}\n\n\t#getGridContainer()\n\t{\n\t\tconst grid = this.#getGrid();\n\t\tif (grid)\n\t\t{\n\t\t\treturn grid.getContainer();\n\t\t}\n\t}\n\n\treloadGrid()\n\t{\n\t\tconst grid = this.#getGrid();\n\t\tif (grid)\n\t\t{\n\t\t\treturn grid.reload();\n\t\t}\n\t}\n\n\tshowGridLoader()\n\t{\n\t\tconst grid = this.#getGrid();\n\t\tif (grid)\n\t\t{\n\t\t\tgrid.getLoader().show();\n\t\t}\n\t}\n\n\thideGridLoader()\n\t{\n\t\tconst grid = this.#getGrid();\n\t\tif (grid)\n\t\t{\n\t\t\tgrid.getLoader().hide();\n\t\t}\n\t}\n\n\tshowNotification(message)\n\t{\n\t\tBX.UI.Notification.Center.notify({\n\t\t\tcontent: message\n\t\t});\n\t}\n\n\tremove(id)\n\t{\n\t\tthis.showConfirm('delete').then(() => {\n\t\t\tthis.showGridLoader();\n\t\t\tAjax.runAction('crm.form.delete', {\n\t\t\t\tjson: {id},\n\t\t\t}).then(response => {\n\t\t\t\tif (response.data)\n\t\t\t\t{\n\t\t\t\t\tthis.reloadGrid();\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.hideGridLoader();\n\t\t\t\t\tthis.showNotification(Loc.getMessage('CRM_WEBFORM_LIST_DELETE_ERROR'));\n\t\t\t\t}\n\t\t\t}).catch(() => {\n\t\t\t\tthis.hideGridLoader();\n\t\t\t\tthis.showNotification(Loc.getMessage('CRM_WEBFORM_LIST_DELETE_ERROR'));\n\t\t\t});\n\t\t});\n\t}\n\n\tremoveList()\n\t{\n\t\tthis.showConfirm('delete').then(() => {\n\t\t\tconst grid = this.#getGrid();\n\t\t\tif (grid)\n\t\t\t{\n\t\t\t\tthis.#getGrid().removeSelected();\n\t\t\t}\n\t\t});\n\t}\n\n\tresetCounters(id)\n\t{\n\t\tthis.showGridLoader();\n\t\treturn Ajax.runAction('crm.form.resetCounters', {\n\t\t\tjson: {id},\n\t\t})\n\t\t\t.then(() => this.reloadGrid())\n\t\t\t.catch(() =>  {\n\t\t\t\tthis.checkOnWriteAccessError(result);\n\t\t\t\tthis.hideGridLoader();\n\t\t\t})\n\t\t;\n\t}\n\n\tcopy(id)\n\t{\n\t\tthis.showGridLoader();\n\t\treturn Ajax.runAction('crm.form.copy', {\n\t\t\tjson: {id},\n\t\t})\n\t\t\t.then(() => this.reloadGrid())\n\t\t\t.catch(() =>  {\n\t\t\t\tthis.checkOnWriteAccessError(result);\n\t\t\t\tthis.hideGridLoader();\n\t\t\t});\n\t}\n\n\tshowSiteCode(id, options = {}, needVerify: boolean = false)\n\t{\n\t\tif (needVerify)\n\t\t{\n\t\t\tthis.#verifyPhone(\n\t\t\t\tPHONE_VERIFY_FORM_ENTITY,\n\t\t\t\tid,\n\t\t\t\t() => {\n\t\t\t\t\tBX.Crm.Form.Embed.openSlider(id, options);\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tBX.Crm.Form.Embed.openSlider(id, options);\n\t\t}\n\t}\n\n\t#verifyPhone(entityType: string, entityId: string, runOnVerified: function)\n\t{\n\t\tconst\n\t\t\tsliderTitle = Loc.getMessage('CRM_WEBFORM_PHONE_VERIFY_CUSTOM_SLIDER_TITLE'),\n\t\t\ttitle = Loc.getMessage('CRM_WEBFORM_PHONE_VERIFY_CUSTOM_TITLE'),\n\t\t\tdescription = Loc.getMessage('CRM_WEBFORM_PHONE_VERIFY_CUSTOM_DESCRIPTION_V1');\n\n\t\tif (typeof PhoneVerify !== 'undefined')\n\t\t{\n\t\t\tPhoneVerify.getInstance()\n\t\t\t\t.setEntityType(entityType)\n\t\t\t\t.setEntityId(entityId)\n\t\t\t\t.startVerify({sliderTitle: sliderTitle, title: title, description: description})\n\t\t\t\t.then((verified) => {\n\t\t\t\t\tif (verified)\n\t\t\t\t\t{\n\t\t\t\t\t\trunOnVerified();\n\t\t\t\t\t\tthis.reloadGrid();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\trunOnVerified();\n\t\t}\n\t}\n\n\tactivateList(mode: boolean = true)\n\t{\n\t\t\tthis.showGridLoader();\n\t\t\tconst grid = this.#getGrid();\n\t\t\tif (!grid)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst list = grid.getRows().getSelectedIds();\n\t\t\tAjax.runAction('crm.form.activateList', {\n\t\t\t\tjson: {\n\t\t\t\t\tlist,\n\t\t\t\t\tmode,\n\t\t\t\t},\n\t\t\t})\n\t\t\t\t.then(() => this.reloadGrid())\n\t\t\t\t.catch(() =>  {\n\t\t\t\t\tthis.checkOnWriteAccessError(result);\n\t\t\t\t\tthis.hideGridLoader();\n\t\t\t\t})\n\t\t\t;\n\t}\n\n\tactivate(id, mode, reloadGrid: boolean = true, nodeText: Element = null)\n\t{\n\t\tconst switcher = BX.UI.Switcher.getById('crm-form-list-item-' + id);\n\t\tif (switcher)\n\t\t{\n\t\t\tswitcher.setLoading(true);\n\t\t\tswitcher.check(mode, false);\n\t\t}\n\n\t\treturn Ajax.runAction('crm.form.activate', {\n\t\t\tjson: {\n\t\t\t\tid: parseInt(id),\n\t\t\t\tmode,\n\t\t\t},\n\t\t}).then(() => {\n\t\t\tif (switcher)\n\t\t\t{\n\t\t\t\tnodeText.textContent = switcher.isChecked()\n\t\t\t\t\t? BX.date.format(BX.date.convertBitrixFormat(BX.message(\"FORMAT_DATE\")))\n\t\t\t\t\t: Loc.getMessage('CRM_WEBFORM_LIST_NOT_ACTIVE')\n\t\t\t\t;\n\t\t\t\tswitcher.setLoading(false)\n\t\t\t}\n\n\t\t\tif (reloadGrid)\n\t\t\t{\n\t\t\t\tthis.reloadGrid();\n\t\t\t}\n\t\t}).catch((result) => {\n\t\t\tthis.checkOnWriteAccessError(result);\n\n\t\t\tif (switcher)\n\t\t\t{\n\t\t\t\tswitcher.setLoading(false);\n\t\t\t\tswitcher.check(!switcher.isChecked(), false);\n\t\t\t}\n\t\t});\n\t}\n\n\tcheckOnWriteAccessError(result)\n\t{\n\t\tconst errors = result.errors;\n\t\terrors.forEach(error =>\n\t\t{\n\t\t\tif (parseInt(error.code) === 2)\n\t\t\t{\n\t\t\t\tthis.showNotification(Loc.getMessage('CRM_WEBFORM_LIST_ITEM_WRITE_ACCESS_DENIED'));\n\t\t\t}\n\n\t\t\tif (error.code === 'ERROR_CODE_PHONE_NOT_VERIFIED')\n\t\t\t{\n\t\t\t\tthis.showNotification(Loc.getMessage('CRM_WEBFORM_LIST_ITEM_PHONE_NOT_VERIFIED'));\n\t\t\t}\n\t\t});\n\t}\n}\nBX.Crm.WebFormList = new WebFormList();\n"],"names":["PHONE_VERIFY_FORM_ENTITY","WebFormList","params","reloadGridTimeoutId","gridId","gridNode","document","getElementById","hideDescBtnNode","BX","bind","addClass","userOptions","delay","save","notifyBtnNode","addCustomEvent","code","activateList","removeList","Error","toUpperCase","Promise","resolve","reject","MessageBox","show","message","Loc","getMessage","modal","title","buttons","MessageBoxButtons","OK_CANCEL","onOk","messageBox","close","onCancel","grid","reload","getLoader","hide","UI","Notification","Center","notify","content","id","showConfirm","then","showGridLoader","Ajax","runAction","json","response","data","reloadGrid","hideGridLoader","showNotification","removeSelected","checkOnWriteAccessError","result","options","needVerify","Crm","Form","Embed","openSlider","mode","list","getRows","getSelectedIds","nodeText","switcher","Switcher","getById","setLoading","check","parseInt","textContent","isChecked","date","format","convertBitrixFormat","errors","forEach","error","container","switcherAttr","switchers","querySelectorAll","Array","prototype","slice","call","node","querySelector","JSON","parse","getAttribute","onClickVerify","Qr","link","path","appendChild","Tag","render","renderTo","attr","handler","event","stopPropagation","preventDefault","popup","PopupManager","getPopupById","getId","destroy","contentNode","counters","counter","counterHandler","SidePanel","Instance","open","LINK","caption","Text","encode","ENTITY_CAPTION","value","VALUE","counterNode","popupWidth","create","className","closeByEsc","autoHide","bindElement","target","angle","offset","offsetLeft","offsetWidth","animation","width","padding","addEventListener","innerHTML","active","dateActiveShort","checked","color","handlers","toggled","activate","Dom","removeClass","activatedBy","text","dateActiveFull","name","iconClass","encodeURI","iconPath","Main","gridManager","getInstanceById","getContainer","entityType","entityId","runOnVerified","sliderTitle","description","PhoneVerify","getInstance","setEntityType","setEntityId","startVerify","verified"],"mappings":"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"}