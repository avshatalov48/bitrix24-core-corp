(function(t,e,i,n){"use strict";function r(t,e,i){if(!e.has(t)){throw new TypeError("attempted to get private field on non-instance")}return i}var a=e.Reflection.namespace("BX.Bizproc");var o=new WeakSet;var c=new WeakSet;var s=new WeakSet;var u=function(){function t(i){babelHelpers.classCallCheck(this,t);s.add(this);c.add(this);o.add(this);if(e.Type.isPlainObject(i)){this.gridId=i.gridId;this.createScriptButton=i.createScriptButton;this.exportScriptButton=i.exportScriptButton;this.documentType=i.documentType}}babelHelpers.createClass(t,[{key:"init",value:function t(){var i=this;if(this.createScriptButton){e.Event.bind(this.createScriptButton,"click",function(){n.Script.Manager.Instance.createScript(i.documentType).then(function(){return i.reloadGrid()})})}if(this.exportScriptButton){e.Event.bind(this.exportScriptButton,"click",function(t){if(!e.Dom.hasClass(i.exportScriptButton,"ui-btn-disabled")){BX.SidePanel.Instance.open(i.exportScriptButton.getAttribute("data-url"))}});if(!this.hasRows()){r(this,c,p).call(this)}}BX.addCustomEvent("Grid::updated",function(){if(!i.hasRows()){r(i,c,p).call(i)}else{r(i,s,l).call(i)}})}},{key:"deleteScript",value:function t(r){var a=this;var o=new i.MessageBox({message:e.Loc.getMessage("BIZPROC_SCRIPT_LIST_CONFIRM_DELETE"),okCaption:e.Loc.getMessage("BIZPROC_SCRIPT_LIST_BTN_DELETE"),onOk:function t(){n.Script.Manager.Instance.deleteScript(r).then(function(t){if(t.data&&t.data.error){i.MessageBox.alert(t.data.error)}else{a.reloadGrid()}});return true},buttons:i.MessageBoxButtons.OK_CANCEL,popupOptions:{events:{onAfterShow:function t(e){var i=e.getTarget().getButton("ok");if(i){i.getContainer().focus()}}}}});o.show()}},{key:"activateScript",value:function t(e){var i=this;n.Script.Manager.Instance.activateScript(e).then(function(){return i.reloadGrid()})}},{key:"deactivateScript",value:function t(e){var i=this;n.Script.Manager.Instance.deactivateScript(e).then(function(){return i.reloadGrid()})}},{key:"editScript",value:function t(e){var i=this;n.Script.Manager.Instance.editScript(e).then(function(){return i.reloadGrid()})}},{key:"reloadGrid",value:function t(){var e=r(this,o,d).call(this);if(e){e.reload()}}},{key:"hasRows",value:function t(){var e=r(this,o,d).call(this);if(e){return e.getRows().getCountDisplayed()>0}return false}}]);return t}();var d=function t(){if(this.gridId){return BX.Main.gridManager&&BX.Main.gridManager.getInstanceById(this.gridId)}return null};var p=function t(){if(this.exportScriptButton){e.Dom.addClass(this.exportScriptButton,"ui-btn-disabled")}};var l=function t(){if(this.exportScriptButton){e.Dom.removeClass(this.exportScriptButton,"ui-btn-disabled")}};a.ScriptListComponent=u})(this.window=this.window||{},BX,BX.UI.Dialogs,BX.Bizproc);
//# sourceMappingURL=script.map.js