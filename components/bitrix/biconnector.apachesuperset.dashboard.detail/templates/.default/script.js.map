{"version":3,"file":"script.js","sources":["src/detail-instance.js","src/skeleton.js","src/detail.js"],"sourcesContent":["import { ajax as Ajax, Dom, Event, Loc, Text, Type } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport type { MenuItemOptions } from 'main.popup';\nimport { Menu } from 'main.popup';\nimport { Loader } from 'main.loader';\nimport type { DetailConfig } from './type/detail-config';\nimport type { DashboardEmbeddedParameters } from './type/dashboard-embedded-parameters';\nimport { DashboardManager } from 'biconnector.apache-superset-dashboard-manager';\nimport { ApacheSupersetEmbeddedLoader } from 'biconnector.apache-superset-embedded-loader';\nimport { ApacheSupersetAnalytics } from 'biconnector.apache-superset-analytics';\nimport { ApacheSupersetFeedbackForm } from 'biconnector.apache-superset-feedback-form';\nimport 'sidepanel';\n\nexport class DetailInstance\n{\n\t#dashboardManager: DashboardManager;\n\t#dashboardNode: HTMLElement;\n\t#frameNode: HTMLElement;\n\t#editBtn: HTMLElement;\n\n\t#embeddedParams: DashboardEmbeddedParameters;\n\t#embeddedLoader: ApacheSupersetEmbeddedLoader;\n\t#embeddedDebugMode: boolean;\n\t#canExport: boolean;\n\t#canEdit: boolean;\n\n\t#moreMenu: Menu;\n\n\tconstructor(config: DetailConfig)\n\t{\n\t\tthis.#dashboardNode = document.getElementById(config.appNodeId);\n\t\tif (!Type.isDomNode(this.#dashboardNode))\n\t\t{\n\t\t\tconst errorMsg = `Cannot init superset dashboard. Node with ID ${config.appNodeId} does not exists`;\n\t\t\tthrow new Error(errorMsg);\n\t\t}\n\t\tthis.#dashboardManager = new DashboardManager();\n\t\tthis.#canExport = config.canExport === 'Y';\n\t\tthis.#canEdit = config.canEdit === 'Y';\n\t\tthis.#embeddedParams = config.dashboardEmbeddedParams;\n\t\tthis.#embeddedDebugMode = config.embeddedDebugMode;\n\n\t\tthis.#frameNode = this.#dashboardNode.querySelector('.dashboard-iframe');\n\t\tthis.#subscribeEvents();\n\t\tthis.#initHeaderButtons();\n\t\tif (!this.#embeddedParams.paramsCompatible)\n\t\t{\n\t\t\tBX.BIConnector.ApacheSuperset.Dashboard.Detail.createSkeleton({\n\t\t\t\tcontainer: this.#frameNode,\n\t\t\t\tisSupersetAvailable: true,\n\t\t\t\tparamsCompatible: false,\n\t\t\t});\n\n\t\t\tApacheSupersetAnalytics.sendAnalytics('view', 'report_view', {\n\t\t\t\tc_element: config.analyticSource,\n\t\t\t\tstatus: 'error',\n\t\t\t\ttype: this.#embeddedParams.type.toLowerCase(),\n\t\t\t\tp1: ApacheSupersetAnalytics.buildAppIdForAnalyticRequest(this.#embeddedParams.appId),\n\t\t\t\tp2: this.#embeddedParams.id,\n\t\t\t});\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (!BX.BIConnector.LimitLockPopup)\n\t\t{\n\t\t\tthis.#initFrame(this.#embeddedParams);\n\t\t}\n\n\t\tApacheSupersetAnalytics.sendAnalytics('view', 'report_view', {\n\t\t\tc_element: config.analyticSource,\n\t\t\tstatus: 'success',\n\t\t\ttype: this.#embeddedParams.type.toLowerCase(),\n\t\t\tp1: ApacheSupersetAnalytics.buildAppIdForAnalyticRequest(this.#embeddedParams.appId),\n\t\t\tp2: this.#embeddedParams.id,\n\t\t});\n\t}\n\n\t#subscribeEvents()\n\t{\n\t\tEventEmitter.subscribe('BiConnector:DashboardSelector.onSelect', (event) => {\n\t\t\tDom.clean(this.#frameNode);\n\t\t\tBX.BIConnector.ApacheSuperset.Dashboard.Detail.createSkeleton({\n\t\t\t\tcontainer: this.#frameNode,\n\t\t\t\tisSupersetAvailable: true,\n\t\t\t});\n\t\t});\n\n\t\tEventEmitter.subscribe('BiConnector:DashboardSelector.onSelectDataLoaded', (event) => {\n\t\t\tDom.clean(this.#frameNode);\n\t\t\tthis.#embeddedParams = event.data.credentials;\n\t\t\tthis.#canEdit = this.#embeddedParams.canEdit;\n\t\t\tthis.#canExport = this.#embeddedParams.canExport;\n\n\t\t\tlet historyUrl = this.#embeddedParams.embeddedUrl;\n\t\t\tif (this.#embeddedParams.paramsCompatible)\n\t\t\t{\n\t\t\t\tthis.#initFrame(this.#embeddedParams);\n\n\t\t\t\tApacheSupersetAnalytics.sendAnalytics('view', 'report_view', {\n\t\t\t\t\tc_element: 'selector',\n\t\t\t\t\tstatus: 'success',\n\t\t\t\t\ttype: this.#embeddedParams.type.toLowerCase(),\n\t\t\t\t\tp1: ApacheSupersetAnalytics.buildAppIdForAnalyticRequest(this.#embeddedParams.appId),\n\t\t\t\t\tp2: this.#embeddedParams.id,\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\thistoryUrl = this.#embeddedParams.dashboardUrl;\n\t\t\t\tBX.BIConnector.ApacheSuperset.Dashboard.Detail.createSkeleton({\n\t\t\t\t\tcontainer: this.#frameNode,\n\t\t\t\t\tisSupersetAvailable: true,\n\t\t\t\t\tparamsCompatible: false,\n\t\t\t\t});\n\n\t\t\t\tApacheSupersetAnalytics.sendAnalytics('view', 'report_view', {\n\t\t\t\t\tc_element: 'selector',\n\t\t\t\t\tstatus: 'error',\n\t\t\t\t\ttype: this.#embeddedParams.type.toLowerCase(),\n\t\t\t\t\tp1: ApacheSupersetAnalytics.buildAppIdForAnalyticRequest(this.#embeddedParams.appId),\n\t\t\t\t\tp2: this.#embeddedParams.id,\n\t\t\t\t});\n\t\t\t}\n\n\t\t\ttop.window.history.pushState(null, '', historyUrl);\n\t\t\tthis.#initHeaderButtons();\n\t\t});\n\n\t\tEventEmitter.subscribe('BiConnector:LimitPopup.Warning.onClose', (event) => {\n\t\t\tthis.#initFrame(this.#embeddedParams);\n\t\t\tthis.#initHeaderButtons();\n\t\t});\n\n\t\tEventEmitter.subscribe('BX.BIConnector.Settings:onAfterSave', () => {\n\t\t\tthis.#reloadGridAfterSliderClose();\n\t\t});\n\t}\n\n\t#initFrame(embeddedParams: DashboardEmbeddedParameters)\n\t{\n\t\tconst dashboardParams = {\n\t\t\tid: embeddedParams.uuid, // given by the Superset embedding UI\n\t\t\tsupersetDomain: embeddedParams.supersetDomain,\n\t\t\tmountPoint: this.#frameNode, // any html element that can contain an iframe\n\t\t\tfetchGuestToken: embeddedParams.guestToken,\n\t\t\tdebug: this.#embeddedDebugMode,\n\t\t\tdashboardUiConfig: { // dashboard UI config: hideTitle, hideTab, ...etc.\n\t\t\t\thideTitle: true,\n\t\t\t\thideTab: true,\n\t\t\t\thideChartControls: true,\n\t\t\t\tfilters: {\n\t\t\t\t\texpanded: true,\n\t\t\t\t\tvisible: true,\n\t\t\t\t\tnativeFilters: embeddedParams.nativeFilters,\n\t\t\t\t},\n\t\t\t\turlParams: embeddedParams.urlParams ?? {},\n\t\t\t},\n\t\t};\n\n\t\tthis.#embeddedLoader = new ApacheSupersetEmbeddedLoader(dashboardParams);\n\t\tthis.#embeddedLoader.embedDashboard();\n\t}\n\n\t#initHeaderButtons()\n\t{\n\t\tthis.#initMoreMenu();\n\t\tthis.#initDownloadButton();\n\n\t\tthis.#editBtn = this.#dashboardNode.querySelector('.dashboard-header-buttons-edit');\n\t\tEvent.unbindAll(this.#editBtn);\n\n\t\tif (this.#canEdit)\n\t\t{\n\t\t\tthis.#enableEditButton();\n\t\t\tEvent.bind(this.#editBtn, 'click', this.#onEditButtonClick.bind(this));\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.#disableEditButton();\n\t\t\tEvent.unbindAll(this.#editBtn);\n\t\t}\n\n\t\tif (BX.BIConnector.LimitLockPopup)\n\t\t{\n\t\t\tthis.#disableEditButton();\n\t\t\tEvent.unbindAll(this.#editBtn);\n\t\t}\n\t}\n\n\t#onEditButtonClick()\n\t{\n\t\tthis.#muteEditButton();\n\n\t\tconst dashboardInfo = {\n\t\t\tid: this.#embeddedParams.id,\n\t\t\teditLink: this.#embeddedParams.editUrl,\n\t\t\ttype: this.#embeddedParams.type,\n\t\t};\n\n\t\tthis.#dashboardManager.processEditDashboard(\n\t\t\tdashboardInfo,\n\t\t\t() => {\n\t\t\t\tthis.#unmuteEditButton();\n\t\t\t},\n\t\t\t(popupType) => {\n\t\t\t\tApacheSupersetAnalytics.sendAnalytics('edit', 'report_edit', {\n\t\t\t\t\tc_sub_section: popupType,\n\t\t\t\t\tc_element: 'detail_button',\n\t\t\t\t\ttype: this.#embeddedParams.type.toLowerCase(),\n\t\t\t\t\tp1: ApacheSupersetAnalytics.buildAppIdForAnalyticRequest(this.#embeddedParams.appId),\n\t\t\t\t\tp2: this.#embeddedParams.id,\n\t\t\t\t\tstatus: 'success',\n\t\t\t\t});\n\t\t\t},\n\t\t\t(popupType) => {\n\t\t\t\tApacheSupersetAnalytics.sendAnalytics('edit', 'report_edit', {\n\t\t\t\t\tc_sub_section: popupType,\n\t\t\t\t\tc_element: 'detail_button',\n\t\t\t\t\ttype: this.#embeddedParams.type.toLowerCase(),\n\t\t\t\t\tp1: ApacheSupersetAnalytics.buildAppIdForAnalyticRequest(this.#embeddedParams.appId),\n\t\t\t\t\tp2: this.#embeddedParams.id,\n\t\t\t\t\tstatus: 'error',\n\t\t\t\t});\n\t\t\t},\n\t\t);\n\n\t\tthis.#reloadGridAfterSliderClose();\n\t}\n\n\t#reloadGridAfterSliderClose()\n\t{\n\t\tconst slider = BX.SidePanel.Instance.getSliderByWindow(window);\n\t\tif (slider)\n\t\t{\n\t\t\tEventEmitter.subscribeOnce(slider, 'SidePanel.Slider:onClose', () => {\n\t\t\t\tif (!top.BX.Main || !top.BX.Main.gridManager)\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\ttop.BX.Main.gridManager.data.forEach((grid) => {\n\t\t\t\t\tif (grid.instance.getId() === 'biconnector_superset_dashboard_grid')\n\t\t\t\t\t{\n\t\t\t\t\t\tgrid.instance.reload();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}\n\n\t#muteEditButton()\n\t{\n\t\tthis.#disableEditButton();\n\t\tDom.addClass(this.#editBtn, 'ui-btn-wait');\n\t}\n\n\t#unmuteEditButton()\n\t{\n\t\tthis.#enableEditButton();\n\t\tDom.removeClass(this.#editBtn, 'ui-btn-wait');\n\t}\n\n\t#disableEditButton()\n\t{\n\t\tthis.#editBtn.setAttribute('disabled', 'true');\n\t}\n\n\t#enableEditButton()\n\t{\n\t\tthis.#editBtn.removeAttribute('disabled');\n\t}\n\n\t#initDownloadButton(): void\n\t{\n\t\tconst downloadButton = this.#dashboardNode.querySelector('.dashboard-header-buttons-download');\n\t\tEvent.unbindAll(downloadButton);\n\t\tconst downloadMenu = new Menu({\n\t\t\tcloseByEsc: false,\n\t\t\tcloseIcon: false,\n\t\t\tcacheable: true,\n\t\t\tangle: {\n\t\t\t\tposition: 'top',\n\t\t\t},\n\t\t\toffsetLeft: 55,\n\t\t\tbindElement: downloadButton,\n\t\t\tautoHide: true,\n\t\t\titems: [\n\t\t\t\t{\n\t\t\t\t\tid: 'download-screenshot',\n\t\t\t\t\ttext: Loc.getMessage('SUPERSET_DASHBOARD_DETAIL_DOWNLOAD_IMAGE'),\n\t\t\t\t\ttitle: Loc.getMessage('SUPERSET_DASHBOARD_DETAIL_DOWNLOAD_IMAGE'),\n\t\t\t\t\tonclick: (event, menuItem) => {\n\t\t\t\t\t\tmenuItem.disable();\n\t\t\t\t\t\tconst loader = new Loader({\n\t\t\t\t\t\t\ttarget: menuItem.layout.item,\n\t\t\t\t\t\t\tsize: 30,\n\t\t\t\t\t\t});\n\t\t\t\t\t\tloader.show();\n\t\t\t\t\t\tthis.#embeddedLoader.getScreenshot()\n\t\t\t\t\t\t\t.then((imageData: string) => {\n\t\t\t\t\t\t\t\tconst dashboardTitle = Text.decode(this.#embeddedParams.title);\n\t\t\t\t\t\t\t\tthis.#downloadFile(\n\t\t\t\t\t\t\t\t\timageData.replace('data:image/jpeg;base64,', ''),\n\t\t\t\t\t\t\t\t\t`${dashboardTitle}.jpeg`,\n\t\t\t\t\t\t\t\t\t'image/jpeg',\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tmenuItem.enable();\n\t\t\t\t\t\t\t\tloader.hide();\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.catch(() => {\n\t\t\t\t\t\t\t\tmenuItem.enable();\n\t\t\t\t\t\t\t\tloader.hide();\n\t\t\t\t\t\t\t\tBX.UI.Notification.Center.notify({\n\t\t\t\t\t\t\t\t\tcontent: Loc.getMessage('SUPERSET_DASHBOARD_DETAIL_DOWNLOAD_ERROR'),\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t;\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: 'download-pdf',\n\t\t\t\t\ttext: Loc.getMessage('SUPERSET_DASHBOARD_DETAIL_DOWNLOAD_PDF'),\n\t\t\t\t\ttitle: Loc.getMessage('SUPERSET_DASHBOARD_DETAIL_DOWNLOAD_PDF'),\n\t\t\t\t\tonclick: (event, menuItem) => {\n\t\t\t\t\t\tmenuItem.disable();\n\t\t\t\t\t\tconst loader = new Loader({\n\t\t\t\t\t\t\ttarget: menuItem.layout.item,\n\t\t\t\t\t\t\tsize: 30,\n\t\t\t\t\t\t});\n\t\t\t\t\t\tloader.show();\n\t\t\t\t\t\tthis.#embeddedLoader.getPdf()\n\t\t\t\t\t\t\t.then((imageData: string) => {\n\t\t\t\t\t\t\t\tconst dashboardTitle = Text.decode(this.#embeddedParams.title);\n\t\t\t\t\t\t\t\tthis.#downloadFile(\n\t\t\t\t\t\t\t\t\timageData,\n\t\t\t\t\t\t\t\t\t`${dashboardTitle}.pdf`,\n\t\t\t\t\t\t\t\t\t'application/pdf',\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tmenuItem.enable();\n\t\t\t\t\t\t\t\tloader.hide();\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.catch(() => {\n\t\t\t\t\t\t\t\tmenuItem.enable();\n\t\t\t\t\t\t\t\tloader.hide();\n\t\t\t\t\t\t\t\tBX.UI.Notification.Center.notify({\n\t\t\t\t\t\t\t\t\tcontent: Loc.getMessage('SUPERSET_DASHBOARD_DETAIL_DOWNLOAD_ERROR'),\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t;\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t],\n\t\t\tevents: {\n\t\t\t\tonAfterShow: () => {\n\t\t\t\t\tDom.style(downloadMenu.popupWindow.angle.element, 'left', '17px');\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\n\t\tEvent.bind(downloadButton, 'click', () => downloadMenu.show());\n\t}\n\n\t#initMoreMenu()\n\t{\n\t\tconst moreButton = this.#dashboardNode.querySelector('.dashboard-header-buttons-more');\n\t\tif (this.#moreMenu)\n\t\t{\n\t\t\tEvent.unbindAll(moreButton);\n\t\t}\n\n\t\tthis.#moreMenu = new Menu({\n\t\t\tcloseByEsc: false,\n\t\t\tcloseIcon: false,\n\t\t\tcacheable: true,\n\t\t\tangle: {\n\t\t\t\tposition: 'top',\n\t\t\t\toffset: 43,\n\t\t\t},\n\t\t\titems: this.#getMoreMenuItems(),\n\t\t\ttoFrontOnShow: true,\n\t\t\tautoHide: true,\n\t\t\tbindElement: moreButton,\n\t\t\tclassName: 'more-popup',\n\t\t\tevents: {\n\t\t\t\tonBeforeClose: () => {\n\t\t\t\t\tthis.#moreMenu.getMenuItems().forEach((menuItem) => {\n\t\t\t\t\t\tmenuItem.closeSubMenu();\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tonAfterShow: () => {\n\t\t\t\t\tconst popupContainer = this.#getMoreMenu().getPopupWindow().getPopupContainer();\n\t\t\t\t\tconst overHeight = popupContainer.getBoundingClientRect().top + popupContainer.offsetHeight;\n\n\t\t\t\t\tif (overHeight > window.innerHeight)\n\t\t\t\t\t{\n\t\t\t\t\t\twindow.scrollTo({\n\t\t\t\t\t\t\ttop: window.scrollY + (-window.innerHeight + overHeight),\n\t\t\t\t\t\t\tbehavior: 'smooth',\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\n\t\tEvent.bind(moreButton, 'click', () => this.#moreMenu.show());\n\t}\n\n\t// eslint-disable-next-line max-lines-per-function\n\t#getMoreMenuItems(): MenuItemOptions[]\n\t{\n\t\tconst result = [\n\t\t\t{\n\t\t\t\tid: 'order_dashboard',\n\t\t\t\ttext: Loc.getMessage('SUPERSET_DASHBOARD_DETAIL_MORE_MENU_ORDER_DASHBOARD'),\n\t\t\t\ttitle: Loc.getMessage('SUPERSET_DASHBOARD_DETAIL_MORE_MENU_ORDER_DASHBOARD'),\n\t\t\t\tonclick: () => {\n\t\t\t\t\tApacheSupersetFeedbackForm.requestIntegrationFormOpen();\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'feedback',\n\t\t\t\ttext: Loc.getMessage('SUPERSET_DASHBOARD_DETAIL_MORE_MENU_FEEDBACK'),\n\t\t\t\ttitle: Loc.getMessage('SUPERSET_DASHBOARD_DETAIL_MORE_MENU_FEEDBACK'),\n\t\t\t\tonclick: () => {\n\t\t\t\t\tApacheSupersetFeedbackForm.feedbackFormOpen();\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\tif (this.#canExport)\n\t\t{\n\t\t\tresult.push({\n\t\t\t\tid: 'export',\n\t\t\t\ttext: Loc.getMessage('SUPERSET_DASHBOARD_DETAIL_MORE_MENU_EXPORT'),\n\t\t\t\ttitle: Loc.getMessage('SUPERSET_DASHBOARD_DETAIL_MORE_MENU_EXPORT'),\n\t\t\t\tonclick: () => {\n\t\t\t\t\tthis.#moreMenu.getMenuItem('export').disable();\n\t\t\t\t\tthis.#dashboardManager.exportDashboard(this.#embeddedParams.id, 'detail_button')\n\t\t\t\t\t\t.finally(() => {\n\t\t\t\t\t\t\tthis.#moreMenu.getMenuItem('export').enable();\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch(() => {})\n\t\t\t\t\t;\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t#downloadFile(base64Data: string, fileName: string, fileType: string): void\n\t{\n\t\tconst byteCharacters = atob(base64Data);\n\t\tconst byteNumbers = Array.from({ length: byteCharacters.length });\n\t\tfor (let i = 0; i < byteCharacters.length; i++)\n\t\t{\n\t\t\tbyteNumbers[i] = byteCharacters.codePointAt(i);\n\t\t}\n\n\t\tconst byteArray = new Uint8Array(byteNumbers);\n\t\tconst blob = new Blob([byteArray], { type: fileType });\n\t\tconst link = document.createElement('a');\n\t\tlink.href = window.URL.createObjectURL(blob);\n\t\tlink.download = fileName;\n\t\tDom.append(link, document.body);\n\t\tlink.click();\n\t\tDom.remove(link);\n\t}\n\n\t#getMoreMenu(): Menu\n\t{\n\t\treturn this.#moreMenu;\n\t}\n}\n","import { Dom, Tag, Event, Type, Loc } from 'main.core';\nimport { Lottie } from 'ui.lottie';\nimport SkeletonAnimation from './skeleton/biconnector-dashboard-skeleton.json';\nimport type { SkeletonConfig } from './type/skeleton-config';\nimport { DashboardManager } from 'biconnector.apache-superset-dashboard-manager';\nimport { BaseEvent, EventEmitter } from 'main.core.events';\n\nexport class Skeleton\n{\n\t#dashboardManager: DashboardManager;\n\tconstructor(options: SkeletonConfig)\n\t{\n\t\tthis.container = options.container ?? null;\n\t\tthis.dashboardId = options.dashboardId;\n\t\tthis.status = options.status;\n\t\tthis.isSupersetAvailable = options.isSupersetAvailable;\n\t\tthis.#dashboardManager = new DashboardManager();\n\t\tthis.paramsCompatible = options.paramsCompatible ?? true;\n\n\t\tthis.subscribeOnEvents();\n\n\t\tif (Type.isDomNode(this.container))\n\t\t{\n\t\t\tDom.append(this.getAnimationContainer(), this.container);\n\t\t}\n\n\t\tif (this.paramsCompatible === false)\n\t\t{\n\t\t\tthis.#changeContent(this.#getParamsCompatibilityErrorContent());\n\t\t}\n\t}\n\n\tsubscribeOnEvents(): void\n\t{\n\t\tBX.PULL && BX.PULL.extendWatch('superset_dashboard', true);\n\t\tEventEmitter.subscribe('onPullEvent-biconnector', (event: BaseEvent) => {\n\t\t\tconst [eventName, eventData] = event.data;\n\t\t\tif (eventName !== 'onSupersetStatusUpdated' || !eventData)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst status = eventData?.status;\n\t\t\tif (!status)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tswitch (status)\n\t\t\t{\n\t\t\t\tcase 'READY':\n\t\t\t\t\twindow.location.reload();\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'LOAD':\n\t\t\t\t\tthis.showLoadingContent();\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'ERROR':\n\t\t\t\t\tthis.showErrorContent();\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t});\n\n\t\tEventEmitter.subscribe('BIConnector.Superset.DashboardManager:onDashboardBatchStatusUpdate', (event) => {\n\t\t\tconst data = event.getData();\n\t\t\tif (!data.dashboardList)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst dashboardList = data.dashboardList;\n\n\t\t\tif (BX.SidePanel?.Instance)\n\t\t\t{\n\t\t\t\tBX.SidePanel.Instance.postMessage(window, 'BIConnector.Superset.DashboardDetail:onDashboardBatchStatusUpdate', { dashboardList });\n\t\t\t}\n\n\t\t\tfor (const dashboard of dashboardList)\n\t\t\t{\n\t\t\t\tif (Number(dashboard.id) === this.dashboardId)\n\t\t\t\t{\n\t\t\t\t\tthis.onDashboardStatusUpdated(dashboard.status);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tonDashboardStatusUpdated(status: string): void\n\t{\n\t\tswitch (status) {\n\t\t\tcase DashboardManager.DASHBOARD_STATUS_DRAFT:\n\t\t\tcase DashboardManager.DASHBOARD_STATUS_READY: {\n\t\t\t\twindow.location.reload();\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase DashboardManager.DASHBOARD_STATUS_LOAD: {\n\t\t\t\tthis.showLoadingContent();\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase DashboardManager.DASHBOARD_STATUS_FAILED: {\n\t\t\t\tthis.showFailedContent();\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tshowLoadingContent(): void\n\t{\n\t\tthis.#changeContent(this.getLoadingContent());\n\t}\n\n\tshowFailedContent(): void\n\t{\n\t\tthis.#changeContent(this.getFailedContent());\n\t}\n\n\tshowErrorContent(): void\n\t{\n\t\tthis.#changeContent(this.getUnavailableSupersetHint());\n\t}\n\n\t#changeContent(innerContent: HTMLElement): void\n\t{\n\t\tif (!this.container)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst hint = this.container.querySelector('#biconnector-dashboard__hint');\n\t\tlet content = hint.querySelector('#dashboard__hint__content');\n\t\tif (content)\n\t\t{\n\t\t\tcontent.remove();\n\t\t}\n\n\t\tcontent = Tag.render`\n\t\t\t<div id=\"dashboard__hint__content\">\n\t\t\t\t\t${innerContent}\n\t\t\t</div>\n\t\t`;\n\n\t\tDom.append(content, hint);\n\t}\n\n\tgetAnimationContainer(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"biconnector-dashboard__animation\">\n\t\t\t\t${this.getLoadingHint()}\n\t\t\t\t${this.getAnimationBox()}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetAnimationBox(): HTMLElement\n\t{\n\t\tconst animationBox = Tag.render`\n\t\t\t<div class=\"biconnector-dashboard__animation_box\"></div>\n\t\t`;\n\n\t\tconst animation = Lottie.loadAnimation({\n\t\t\tcontainer: animationBox,\n\t\t\trenderer: 'svg',\n\t\t\tloop: true,\n\t\t\tautoplay: false,\n\t\t\tanimationData: SkeletonAnimation,\n\t\t});\n\n\t\tanimation.play();\n\n\t\treturn animationBox;\n\t}\n\n\tgetContentByStatus(status: string): HTMLElement\n\t{\n\t\tif (status === DashboardManager.DASHBOARD_STATUS_LOAD)\n\t\t{\n\t\t\treturn this.getLoadingContent();\n\t\t}\n\n\t\tif (status === DashboardManager.DASHBOARD_STATUS_FAILED)\n\t\t{\n\t\t\treturn this.getFailedContent();\n\t\t}\n\n\t\treturn '';\n\t}\n\n\tgetLoadingContent(): HTMLElement\n\t{\n\t\tconst hintLink = Tag.render`\n\t\t\t<a href=\"#\" class=\"biconnector-dashboard__hint_link\">\n\t\t\t\t${Loc.getMessage('SUPERSET_DASHBOARD_DETAIL_HINT_LINK')}\n\t\t\t</a>\n\t\t`;\n\n\t\tEvent.bind(hintLink, 'click', () => {\n\t\t\ttop.BX.Helper.show('redirect=detail&code=18897300');\n\t\t});\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"biconnector-dashboard__hint_title\">\n\t\t\t\t${Loc.getMessage('SUPERSET_DASHBOARD_DETAIL_HINT_TITLE_MSGVER_1')}\n\t\t\t</div>\n\t\t\t<div class=\"biconnector-dashboard__hint_desc\">\n\t\t\t\t${Loc.getMessage('SUPERSET_DASHBOARD_DETAIL_HINT_DESC_MSGVER_1')}\n\t\t\t</div>\n\t\t\t${hintLink}\n\t\t`;\n\t}\n\n\tgetFailedContent(): HTMLElement\n\t{\n\t\tconst reloadBtn = Tag.render`\n\t\t\t<button class=\"ui-btn ui-btn-sm biconnector-dashboard__error_btn ui-btn-primary\">\n\t\t\t\t${Loc.getMessage('SUPERSET_DASHBOARD_DETAIL_ERROR_RELOAD_BTN')}\n\t\t\t</button>\n\t\t`;\n\n\t\treloadBtn.onclick = () => {\n\t\t\tDom.addClass(reloadBtn, 'ui-btn-wait');\n\t\t\treloadBtn.setAttribute('disabled', 'true');\n\t\t\tthis.#dashboardManager.restartDashboardImport(this.dashboardId).then(\n\t\t\t\t(response) => {\n\t\t\t\t\tconst dashboardIds = response?.data?.restartedDashboardIds;\n\t\t\t\t\tif (!dashboardIds)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tfor (const restartedDashboardId of dashboardIds)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (Number(restartedDashboardId) === this.dashboardId)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.showLoadingContent();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t);\n\t\t};\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"biconnector-dashboard__error__logo-wrapper\">\n\t\t\t\t${this.getErrorLogo()}\n\t\t\t</div>\n\t\t\t<div class=\"biconnector-dashboard__hint_desc biconnector-dashboard__error_desc\">\n\t\t\t\t${Loc.getMessage('SUPERSET_DASHBOARD_DETAIL_ERROR_DESC')}\n\t\t\t</div>\n\t\t\t${reloadBtn}\n\t\t`;\n\t}\n\n\tgetLoadingHint(): HTMLElement\n\t{\n\t\tlet content: HTMLElement;\n\t\tif (this.isSupersetAvailable)\n\t\t{\n\t\t\tcontent = this.getContentByStatus(this.status);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tcontent = this.getUnavailableSupersetHint();\n\t\t}\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"biconnector-dashboard__hint\" id=\"biconnector-dashboard__hint\">\n\t\t\t\t<div id=\"dashboard__hint__content\">\n\t\t\t\t\t${content}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetUnavailableSupersetHint(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"biconnector-dashboard__error__logo-wrapper\">\n\t\t\t\t${this.getErrorLogo()}\n\t\t\t</div>\n\t\t\t<div class=\"biconnector-dashboard__hint_title\">\n\t\t\t\t${Loc.getMessage('SUPERSET_DASHBOARD_DETAIL_HINT_TITLE_UNAVAILABLE')}\n\t\t\t</div>\n\t\t\t<div class=\"biconnector-dashboard__hint_desc\">\n\t\t\t\t${Loc.getMessage('SUPERSET_DASHBOARD_DETAIL_HINT_DESC_UNAVAILABLE')}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetErrorLogo(): HTMLElement {\n\t\treturn Tag.render`\n\t\t\t<div class=\"biconnector-dashboard__error__logo\"></div>\n\t\t`;\n\t}\n\n\t#getParamsCompatibilityErrorContent(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"biconnector-dashboard__error__logo-wrapper\">\n\t\t\t\t${this.getErrorLogo()}\n\t\t\t</div>\n\t\t\t<div class=\"biconnector-dashboard__hint_desc\">\n\t\t\t\t${Loc.getMessage('SUPERSET_DASHBOARD_DETAIL_PARAMS_INCOMPATIBLE')}\n\t\t\t</div>\n\t\t`;\n\t}\n}\n","import { DetailInstance } from './detail-instance';\nimport type { DetailConfig } from './type/detail-config';\nimport type { SkeletonConfig } from './type/skeleton-config';\nimport { Skeleton } from './skeleton';\n\nexport class Detail\n{\n\tstatic create(config: DetailConfig): DetailInstance\n\t{\n\t\tnew DetailInstance(config);\n\t}\n\n\tstatic createSkeleton(config: SkeletonConfig): Skeleton\n\t{\n\t\tnew Skeleton(config);\n\t}\n}\n"],"names":["DetailInstance","config","document","getElementById","appNodeId","Type","isDomNode","errorMsg","Error","DashboardManager","canExport","canEdit","dashboardEmbeddedParams","embeddedDebugMode","querySelector","paramsCompatible","BX","BIConnector","ApacheSuperset","Dashboard","Detail","createSkeleton","container","isSupersetAvailable","ApacheSupersetAnalytics","sendAnalytics","c_element","analyticSource","status","type","toLowerCase","p1","buildAppIdForAnalyticRequest","appId","p2","id","LimitLockPopup","EventEmitter","subscribe","event","Dom","clean","data","credentials","historyUrl","embeddedUrl","dashboardUrl","top","window","history","pushState","embeddedParams","dashboardParams","uuid","supersetDomain","mountPoint","fetchGuestToken","guestToken","debug","dashboardUiConfig","hideTitle","hideTab","hideChartControls","filters","expanded","visible","nativeFilters","urlParams","ApacheSupersetEmbeddedLoader","embedDashboard","Event","unbindAll","bind","dashboardInfo","editLink","editUrl","processEditDashboard","popupType","c_sub_section","slider","SidePanel","Instance","getSliderByWindow","subscribeOnce","Main","gridManager","forEach","grid","instance","getId","reload","addClass","removeClass","setAttribute","removeAttribute","downloadButton","downloadMenu","Menu","closeByEsc","closeIcon","cacheable","angle","position","offsetLeft","bindElement","autoHide","items","text","Loc","getMessage","title","onclick","menuItem","disable","loader","Loader","target","layout","item","size","show","getScreenshot","then","imageData","dashboardTitle","Text","decode","replace","enable","hide","UI","Notification","Center","notify","content","getPdf","events","onAfterShow","style","popupWindow","element","moreButton","offset","toFrontOnShow","className","onBeforeClose","getMenuItems","closeSubMenu","popupContainer","getPopupWindow","getPopupContainer","overHeight","getBoundingClientRect","offsetHeight","innerHeight","scrollTo","scrollY","behavior","result","ApacheSupersetFeedbackForm","requestIntegrationFormOpen","feedbackFormOpen","push","getMenuItem","exportDashboard","base64Data","fileName","fileType","byteCharacters","atob","byteNumbers","Array","from","length","i","codePointAt","byteArray","Uint8Array","blob","Blob","link","createElement","href","URL","createObjectURL","download","append","body","click","remove","Skeleton","options","_classPrivateMethodInitSpec","_classPrivateFieldInitSpec","dashboardId","subscribeOnEvents","getAnimationContainer","_classPrivateMethodGet","PULL","extendWatch","eventName","eventData","location","showLoadingContent","showErrorContent","getData","dashboardList","postMessage","dashboard","Number","onDashboardStatusUpdated","DASHBOARD_STATUS_DRAFT","DASHBOARD_STATUS_READY","DASHBOARD_STATUS_LOAD","DASHBOARD_STATUS_FAILED","showFailedContent","getLoadingContent","getFailedContent","getUnavailableSupersetHint","Tag","render","getLoadingHint","getAnimationBox","animationBox","animation","Lottie","loadAnimation","renderer","loop","autoplay","animationData","SkeletonAnimation","play","hintLink","Helper","reloadBtn","restartDashboardImport","response","dashboardIds","restartedDashboardIds","restartedDashboardId","getErrorLogo","getContentByStatus","innerContent","hint"],"mappings":"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"}