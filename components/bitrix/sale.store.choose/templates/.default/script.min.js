BX.namespace("BX.Sale.Store.Choose");BX.Sale.Store.Choose={ajaxUrl:"",deliveryStores:{},index:"",mapType:"",inputId:"",setChangeStore:function(e,t){var a=this.deliveryStores[e],o=BX("store_table"+this.index),s=BX.findChildren(o,{tag:"tr"},true);for(var i in s)if(s[i].style.display!="none")BX.hide(s[i]);var n=BX("row"+this.index+"_"+e);if(!!n)BX.show(n);var l=BX("store_name"+this.index);if(l)BX.html(l,BX.util.htmlspecialchars(a["TITLE"]));if(this.mapType!="none"){if(parseFloat(a["GPS_N"])>0&&parseFloat(a["GPS_S"])>0){if(window.GLOBAL_arMapObjects[t]){if(this.mapType=="yandex")window.GLOBAL_arMapObjects[t].panTo([parseFloat(a["GPS_N"]),parseFloat(a["GPS_S"])],{flying:1});else if(this.mapType=="google")window.GLOBAL_arMapObjects[t].panTo(new google.maps.LatLng(parseFloat(a["GPS_N"]),parseFloat(a["GPS_S"])))}}}BX(this.inputId).value=e},showFullInfo:function(e){var t=BX.findNextSibling(e,{tag:"div"});BX.toggle(t)},setChangeMapType:function(e){if(e=="google"){this.showDialog(BX.message("SALE_SSC_GOOGLE_MAP_INFO"),BX.message("SALE_SSC_GOOGLE_MAP_INFO_TITLE"),function(){this.sendChangeMapTypeAjax(e)})}else{this.sendChangeMapTypeAjax(e)}},showDialog:function(e,t,a){var o=this,s=new BX.PopupWindow("adm-sale-order-alert-dialog",null,{autoHide:false,draggable:true,offsetLeft:0,offsetTop:0,bindOptions:{forceBindPosition:false},closeByEsc:true,closeIcon:true,titleBar:t||BX.message("SALE_ORDEREDIT_MESSAGE"),contentColor:"white",content:BX.create("span",{html:e,style:{backgroundColor:"white"}})});s.setButtons([new BX.PopupWindowButton({text:BX.message("SALE_SSC_DIALOG_CLOSE"),className:"popup-window-button-link-cancel",events:{click:BX.delegate(function(){s.close();s.destroy();if(a&&typeof a=="function")a.call(o)},s)}})]);s.show()},sendChangeMapTypeAjax:function(e){BX.ajax({timeout:60,method:"POST",dataType:"json",url:this.ajaxUrl,data:{sessid:BX.bitrix_sessid(),action:"set_map_type",map_type:e},onsuccess:function(e){if(e){if(!e.ERROR)window.location.reload();else alert(e.ERROR)}else{alert(BX.message("SALE_SSC_MAP_TYPE_CHANGE_ERROR"))}},onfailure:function(e){BX.debug("Ajax onfailure. Status: "+e)}})}};
//# sourceMappingURL=script.map.js