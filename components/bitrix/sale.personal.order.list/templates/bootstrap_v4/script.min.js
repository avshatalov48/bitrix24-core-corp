BX.namespace("BX.Sale.PersonalOrderComponent");(function(){BX.Sale.PersonalOrderComponent.PersonalOrderList={init:function(e){var t=document.getElementsByClassName("sale-order-list-inner-row");e.paymentList=e.paymentList||{};e.url=e.url||"";e.templateName=e.templateName||"";e.returnUrl=e.returnUrl||"";Array.prototype.forEach.call(t,function(t){var a=t.getElementsByClassName("sale-order-list-shipment-id");if(a[0]){Array.prototype.forEach.call(a,function(e){var t=e.parentNode.getElementsByClassName("sale-order-list-shipment-id-icon")[0];if(t){BX.clipboard.bindCopyClick(t,{text:e.innerHTML})}})}BX.bindDelegate(t,"click",{class:"ajax_reload"},BX.proxy(function(a){var r=t.getElementsByClassName("sale-order-list-inner-row-body")[0];var s=t.getElementsByClassName("sale-order-list-inner-row-template")[0];var l=s.getElementsByClassName("sale-order-list-cancel-payment")[0];BX.ajax({method:"POST",dataType:"html",url:a.target.href,data:{sessid:BX.bitrix_sessid(),RETURN_URL:e.returnUrl},onsuccess:BX.proxy(function(e){var t=document.createElement("div");t.innerHTML=e;s.insertBefore(t,l);r.style.display="none";s.style.display="block";BX.bind(l,"click",function(){r.style.display="block";s.style.display="none";t.remove()},this)},this),onfailure:BX.proxy(function(){return this},this)},this);a.preventDefault()},this));var r=false;BX.bindDelegate(t,"click",{class:"sale-order-list-change-payment"},BX.proxy(function(a){if(r)return;r=true;a.preventDefault();var s=t.getElementsByClassName("sale-order-list-inner-row-body")[0];var l=t.getElementsByClassName("sale-order-list-inner-row-template")[0];var n=l.getElementsByClassName("sale-order-list-cancel-payment")[0];BX.ajax({method:"POST",dataType:"html",url:e.url,data:{sessid:BX.bitrix_sessid(),orderData:e.paymentList[a.target.id],templateName:e.templateName},onsuccess:BX.proxy(function(e){var t=BX.create("div",{props:{className:"row"},children:[e]});l.insertBefore(t,n);a.target.style.display="none";s.parentNode.removeChild(s);l.style.display="block";BX.bind(n,"click",function(){window.location.reload()},this)},this),onfailure:BX.proxy(function(){r=false;return this},this)},this)},this))})}}})();
//# sourceMappingURL=script.map.js