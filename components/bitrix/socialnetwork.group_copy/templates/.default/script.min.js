this.BX=this.BX||{};(function(e,t,i){"use strict";function s(){var e=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div id="','" class="','">\n\t\t\t\t<span class="','">',"</span>\n\t\t\t</div>\n\t\t"]);s=function t(){return e};return e}var n=function(){function e(t){babelHelpers.classCallCheck(this,e);t=babelHelpers.objectSpread({},{id:i.Text.getRandom(),message:"Error!"},t);this.id=t.id;this.message=t.message;this.classes=new Map([["container","ui-alert ui-alert-danger"],["message","ui-alert-message"]])}babelHelpers.createClass(e,[{key:"render",value:function e(){this.id=i.Text.encode(this.id);this.message=i.Text.encode(this.message);return i.Tag.render(s(),this.id,this.classes.get("container"),this.classes.get("message"),this.message)}}]);return e}();var a=function(e){babelHelpers.inherits(t,e);function t(e){var s;babelHelpers.classCallCheck(this,t);s=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e));e=babelHelpers.objectSpread({},{fieldTitle:"title",fieldName:"name",validators:[],onCustomChange:null,parentNode:null,value:"",focus:false,visible:true},e);s.fieldTitle=e.fieldTitle;s.fieldName=e.fieldName;s.validators=e.validators;s.onCustomChange=e.onCustomChange;s.parentNode=e.parentNode;s.titleControl=null;s.titleId=i.Text.encode(s.fieldName)+"-"+"title";s.innerControl=null;s.innerControlId=s.fieldName+"-"+i.Text.getRandom();s.value=e.value?e.value:"";s.focus=e.focus;s.visible=e.visible;s.container=null;s.ids=new Map([["container","social-group-copy-field-"+s.fieldName]]);s.errorContainer=new Set;s.classes=new Map([["container","social-group-copy-fields-item"],["leftColumn","social-group-copy-fields-item-column-left"],["rightColumn","social-group-copy-fields-item-column-right"],["fieldTitle","social-group-copy-fields-item-name"],["errorMark","ui-ctl-danger"],["hide","hide"]]);if(i.Type.isDomNode(s.parentNode)){s.observerParent=new MutationObserver(s.onAppendToParent.bind(babelHelpers.assertThisInitialized(s)));s.observerParent.observe(s.parentNode,{childList:true})}return s}babelHelpers.createClass(t,[{key:"setClass",value:function e(t,i){this.classes.set(t,i)}},{key:"addClass",value:function e(t,i){if(this.classes.has(t)){this.classes.set(t,this.classes.get(t)+" "+i)}}},{key:"getType",value:function e(){return this.constructor.name()}},{key:"getControl",value:function e(){return this.innerControl}},{key:"onAppendToParent",value:function e(t){this.titleControl=document.getElementById(this.titleId);this.innerControl=document.getElementById(this.innerControlId);this.container=document.getElementById(this.ids.get("container"));if(i.Type.isFunction(this.onCustomChange)){i.Event.bind(this.innerControl,"change",this.onCustomChange)}if(this.focus){this.innerControl.focus()}}},{key:"validate",value:function e(){var t=this;this.errorContainer.clear();if(!this.visible){return true}var s=this.parentNode?this.parentNode:this.innerControl.parentNode;this.validators.forEach(function(e){var a=new e;var r="social-group-"+t.fieldName+"-"+e.getType();var l=document.getElementById(r);if(i.Type.isDomNode(l)){l.remove()}if(a.validate(t.value)){i.Dom.removeClass(s,t.classes.get("errorMark"))}else{i.Dom.addClass(s,t.classes.get("errorMark"));var o=new n({id:r,message:a.getErrorMessage()});s.before(o.render());t.errorContainer.add(o)}});return this.errorContainer.size===0}},{key:"getErrorContainer",value:function e(){return this.errorContainer}},{key:"setValue",value:function e(t){this.value=t}},{key:"getValue",value:function e(){if(!this.visible){return""}return this.value}},{key:"getName",value:function e(){return this.fieldName}},{key:"changeTitle",value:function e(t){this.fieldTitle=t;this.titleControl.innerHTML=i.Text.encode(this.fieldTitle)}},{key:"toggleVisible",value:function e(t){this.visible=t;if(t){i.Dom.removeClass(this.container,this.classes.get("hide"))}else{i.Dom.addClass(this.container,this.classes.get("hide"))}}}]);return t}(i.Event.EventEmitter);function r(){var e=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="','">\n\t\t\t\t<input id="','" type="text" value="','" \n\t\t\t\t\tname="','" class="','" \n\t\t\t\t\tonchange="','" placeholder="','">\n\t\t\t</div>\n\t\t']);r=function t(){return e};return e}function l(){var e=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="','">\n\t\t\t\t<div class="','">\n\t\t\t\t\t<div class="','">','</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="','">\n\t\t\t\t\t',"\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t"]);l=function t(){return e};return e}var o=function(e){babelHelpers.inherits(t,e);function t(e){var i;babelHelpers.classCallCheck(this,t);i=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e));e=babelHelpers.objectSpread({},{placeHolder:""},e);i.placeHolder=e.placeHolder;i.classes.set("control","ui-ctl ui-ctl-textbox ui-ctl-w100");i.classes.set("innerControl","ui-ctl-element");return i}babelHelpers.createClass(t,[{key:"render",value:function e(){return i.Tag.render(l(),this.classes.get("container"),this.classes.get("leftColumn"),this.classes.get("fieldTitle"),this.fieldTitle,this.classes.get("rightColumn"),this.renderRightColumn())}},{key:"renderRightColumn",value:function e(){var t=this.onChange.bind(this);this.fieldTitle=i.Text.encode(this.fieldTitle);this.fieldName=i.Text.encode(this.fieldName);this.value=i.Text.encode(this.value);this.placeHolder=i.Text.encode(this.placeHolder);return i.Tag.render(r(),this.classes.get("control"),this.innerControlId,this.value,this.fieldName,this.classes.get("innerControl"),t,this.placeHolder)}},{key:"changePlaceHolder",value:function e(t){this.innerControl.placeholder=i.Text.encode(t)}},{key:"onChange",value:function e(){this.setValue(this.innerControl.value);this.validate()}}]);return t}(a);var c=function(){function e(){babelHelpers.classCallCheck(this,e);this.errorMessage=i.Loc.getMessage("SGCG_REQUIRE_ERROR")}babelHelpers.createClass(e,[{key:"validate",value:function e(t){return this.constructor.isValid(t)}},{key:"getErrorMessage",value:function e(){return this.errorMessage}}],[{key:"getType",value:function e(){return"require"}},{key:"isValid",value:function e(t){if(i.Type.isArray(t)){return t.length>0}else{return t!==undefined&&String(t).trim().length>0}}}]);return e}();function d(){var e=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="','">\n\t\t\t\t<textarea id="','" type="text" name="','" onchange="','" \n\t\t\t\tclass="','" placeholder="','">',"</textarea>\n\t\t\t</div>\n\t\t"]);d=function t(){return e};return e}function u(){var e=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="','">\n\t\t\t\t<div class="','">\n\t\t\t\t\t<div class="','">','</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="','">\n\t\t\t\t\t',"\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t"]);u=function t(){return e};return e}var h=function(e){babelHelpers.inherits(t,e);function t(e){var i;babelHelpers.classCallCheck(this,t);i=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e));e=babelHelpers.objectSpread({},{placeHolder:""},e);i.placeHolder=e.placeHolder;i.classes.set("control","ui-ctl ui-ctl-textarea");i.classes.set("innerControl","ui-ctl-element");return i}babelHelpers.createClass(t,[{key:"render",value:function e(){return i.Tag.render(u(),this.classes.get("container"),this.classes.get("leftColumn"),this.classes.get("fieldTitle"),this.fieldTitle,this.classes.get("rightColumn"),this.renderRightColumn())}},{key:"renderRightColumn",value:function e(){var t=this.onChange.bind(this);this.fieldTitle=i.Text.encode(this.fieldTitle);this.fieldName=i.Text.encode(this.fieldName);this.value=i.Text.encode(this.value);return i.Tag.render(d(),this.classes.get("control"),this.innerControlId,this.fieldName,t,this.classes.get("innerControl"),this.placeHolder,this.value)}},{key:"onChange",value:function e(){this.setValue(this.innerControl.value);this.validate()}}]);return t}(a);function p(){var e=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<form class="','" novalidate>\n\t\t\t\t<div id="','" class="','"></div>\n\t\t\t\t<div class="','">\n\t\t\t\t\t<div class="','">\n\t\t\t\t\t\t','\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="','">\n\t\t\t\t\t\t','\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="','">\n\t\t\t\t\t','\n\t\t\t\t</div>\n\t\t\t\t<div class="','">\n\t\t\t\t\t',"\n\t\t\t\t</div>\n\t\t\t</form>\n\t\t"]);p=function t(){return e};return e}var g=function(){function e(t){babelHelpers.classCallCheck(this,e);t=babelHelpers.objectSpread({},{requestSender:null,groupData:{},copyButtonId:"",cancelButtonId:""},t);this.requestSender=t.requestSender;this.groupData=t.groupData;this.isProject=this.groupData.PROJECT==="Y";this.copyButtonId=t.copyButtonId;this.cancelButtonId=t.cancelButtonId;this.fields=[];this.blocks=[];this.errorContainer=new Map;this.errorDomContainer=null;this.ids=new Map([["errorDomContainer","social-group-copy-error"]]);this.classes=new Map([["form","social-group-copy-form"],["base","social-group-copy-base"],["nameContainer","social-group-copy-name"],["name","social-group-copy-name-title"],["descriptionContainer","social-group-copy-description"],["descriptionArea","social-group-copy-description-area"],["description","social-group-copy-description"],["descriptionSeparator","social-group-copy-separator-line"],["errorDomContainer","social-group-copy-error"],["fields","social-group-copy-fields"],["blocks","social-group-copy-blocks"]]);this.checkboxEventName="BX.Socialnetwork.CheckboxField"}babelHelpers.createClass(e,[{key:"renderTo",value:function e(t){if(!i.Type.isDomNode(t)){throw new Error("Form: HTMLElement for form not found")}t.appendChild(this.render());this.errorDomContainer=document.getElementById(this.ids.get("errorDomContainer"));this.emitFormAppend(t);this.bindButtons()}},{key:"onCopy",value:function e(){var i=this;if(this.validate()){var s=new t.UI.Button({buttonContainer:this.copyButton});if(s.isWaiting()){return}s.setWaiting(true);this.requestSender.copyGroup(this.getRequestData()).then(function(e){i.handleResponse(e)}).catch(function(e){s.setWaiting(false);i.handleResponse(e)})}}},{key:"onClose",value:function e(){this.constructor.closeSlider()}},{key:"bindButtons",value:function e(){this.copyButton=document.getElementById(this.copyButtonId);this.cancelButton=document.getElementById(this.cancelButtonId);if(!i.Type.isDomNode(this.copyButton)||!i.Type.isDomNode(this.cancelButton)){throw new Error("Form: buttons are not found")}i.Event.bind(this.copyButton,"click",this.onCopy.bind(this));i.Event.bind(this.cancelButton,"click",this.onClose.bind(this))}},{key:"emitFormAppend",value:function e(t){this.fields.forEach(function(e){e.onAppendToParent(t)});this.blocks.forEach(function(e){e.onAppendToParent(t)})}},{key:"addField",value:function e(t){this.fields.push(t)}},{key:"getFields",value:function e(){return this.fields}},{key:"addBlock",value:function e(t){this.blocks.push(t)}},{key:"render",value:function e(){var t=new o({fieldName:"name",validators:[c],placeHolder:this.isProject?i.Loc.getMessage("SGCG_PROJECT_NAME_FIELD"):i.Loc.getMessage("SGCG_GROUP_NAME_FIELD"),focus:true});t.setClass("control",this.classes.get("name"));i.Event.EventEmitter.subscribe(this.checkboxEventName+":project:onChange",function(e){t.changePlaceHolder(e.data.checked?i.Loc.getMessage("SGCG_PROJECT_NAME_FIELD"):i.Loc.getMessage("SGCG_GROUP_NAME_FIELD"))});var s=new h({fieldName:"description",value:this.groupData.DESCRIPTION,placeHolder:this.isProject?i.Loc.getMessage("SGCG_PROJECT_DESCRIPTION_FIELD"):i.Loc.getMessage("SGCG_GROUP_DESCRIPTION_FIELD")});s.setClass("control",this.classes.get("descriptionArea"));s.setClass("innerControl",this.classes.get("description"));var n=this.fields.map(function(e){return e.render()});var a=this.blocks.map(function(e){return e.render()});this.addField(t);this.addField(s);return i.Tag.render(p(),this.classes.get("form"),this.ids.get("errorDomContainer"),this.classes.get("errorDomContainer"),this.classes.get("base"),this.classes.get("nameContainer"),t.renderRightColumn(),this.classes.get("descriptionContainer"),s.renderRightColumn(),this.classes.get("fields"),n,this.classes.get("blocks"),a)}},{key:"validate",value:function e(){var t=this;this.fields.forEach(function(e){if(e.validate()){t.errorContainer.delete(e)}else{t.errorContainer.set(e,e.getErrorContainer())}});return this.errorContainer.size===0}},{key:"getRequestData",value:function e(){var t={id:this.groupData["ID"]};this.fields.forEach(function(e){t[e.getName()]=e.getValue()});var i={};this.blocks.forEach(function(e){i=babelHelpers.objectSpread({},i,e.getValues())});return Object.assign(t,i)}},{key:"handleResponse",value:function e(t){if(t.errors.length){this.displayResponseError(new n({message:t.errors.shift().message}))}else{var i=t.data;if(i.length){top.window.location.href=i}else{this.displayResponseError(new n({message:"Unknown error"}))}}}},{key:"displayResponseError",value:function e(t){while(this.errorDomContainer.hasChildNodes()){this.errorDomContainer.removeChild(this.errorDomContainer.firstChild)}this.errorDomContainer.appendChild(t.render())}}],[{key:"closeSlider",value:function e(){window.top.BX.onCustomEvent("BX.Bitrix24.PageSlider:close",[false])}}]);return e}();var f=function(){function e(t){babelHelpers.classCallCheck(this,e);t=babelHelpers.objectSpread({},{signedParameters:""},t);this.signedParameters=t.signedParameters;this.isProject=false}babelHelpers.createClass(e,[{key:"selectGroup",value:function e(t){var s=this;return new Promise(function(e,n){i.ajax.runComponentAction("bitrix:socialnetwork.group_copy","getGroupData",{mode:"class",signedParameters:s.signedParameters,data:{groupId:parseInt(t)}}).then(e,n)})}},{key:"copyGroup",value:function e(t){var s=this;return new Promise(function(e,n){i.ajax.runComponentAction("bitrix:socialnetwork.group_copy","copyGroup",{mode:"class",signedParameters:s.signedParameters,data:t,analyticsLabel:{project:s.isProject?"Y":"N"}}).then(e,n)})}},{key:"setProjectMarker",value:function e(t){this.isProject=Boolean(t)}}]);return e}();function b(){var e=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="','">\n\t\t\t\t<div id="','" class="','">\n\t\t\t\t\t',"\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t"]);b=function t(){return e};return e}function v(){var e=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div id="','" class="','">\n\t\t\t\t<div class="','">\n\t\t\t\t\t<div id="','" class="','">','</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="','">\n\t\t\t\t\t',"\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t"]);v=function t(){return e};return e}var C=function(e){babelHelpers.inherits(t,e);function t(e){var i;babelHelpers.classCallCheck(this,t);i=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e));e=babelHelpers.objectSpread({},{fieldContainerId:""},e);i.fieldContainerId=e.fieldContainerId;i.classes.set("control","ui-ctl ui-ctl-textbox ui-ctl-wa");i.classes.set("innerControl","social-group-copy-ui-ctl-element");i.classes.set("customContainer","social-group-copy-custom-container");return i}babelHelpers.createClass(t,[{key:"render",value:function e(){this.fieldTitle=i.Text.encode(this.fieldTitle);return i.Tag.render(v(),i.Text.encode(this.ids.get("container")),this.classes.get("container"),this.classes.get("leftColumn"),this.titleId,this.classes.get("fieldTitle"),this.fieldTitle,this.classes.get("rightColumn"),this.renderRightColumn())}},{key:"renderRightColumn",value:function e(){var t=document.getElementById(this.fieldContainerId);i.Dom.removeClass(t,this.classes.get("customContainer"));return i.Tag.render(b(),this.classes.get("control"),this.innerControlId,this.classes.get("innerControl"),t)}}]);return t}(a);var m=function(e){babelHelpers.inherits(t,e);function t(e){var i;babelHelpers.classCallCheck(this,t);i=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e));i.classes.set("innerControl","social-group-copy-link-upload social-group-copy-link-upload-set");i.classes.set("uploadSet","social-group-copy-link-upload-set");i.init();return i}babelHelpers.createClass(t,[{key:"init",value:function e(){var t=BX.UploaderManager.getById(this.fieldName);if(t){BX.addCustomEvent(t,"onQueueIsChanged",this.onQueueIsChanged.bind(this))}}},{key:"onAppendToParent",value:function e(){babelHelpers.get(babelHelpers.getPrototypeOf(t.prototype),"onAppendToParent",this).call(this);var s=this.getCurrentValue();babelHelpers.get(babelHelpers.getPrototypeOf(t.prototype),"setValue",this).call(this,s);if(!s){i.Dom.removeClass(this.innerControl,this.classes.get("uploadSet"))}}},{key:"onQueueIsChanged",value:function e(s,n,a,r){BX.addCustomEvent(r,"onUploadDone",this.onUploadDone.bind(this));switch(n){case"add":i.Dom.addClass(this.innerControl,this.classes.get("uploadSet"));break;case"delete":i.Dom.removeClass(this.innerControl,this.classes.get("uploadSet"));babelHelpers.get(babelHelpers.getPrototypeOf(t.prototype),"setValue",this).call(this,"");break}}},{key:"onUploadDone",value:function e(i,s,n,a){babelHelpers.get(babelHelpers.getPrototypeOf(t.prototype),"setValue",this).call(this,this.getCurrentValue())}},{key:"getCurrentValue",value:function e(){var t=document.getElementsByName(this.fieldName);return t.length>0?t[0].value:""}}]);return t}(C);var T=function(){function e(){babelHelpers.classCallCheck(this,e);this.errorMessage=i.Loc.getMessage("SGCG_FORMAT_ERROR")}babelHelpers.createClass(e,[{key:"validate",value:function e(t){return this.constructor.isValid(t)}},{key:"getErrorMessage",value:function e(){return this.errorMessage}}],[{key:"getType",value:function e(){return"date"}},{key:"isValid",value:function e(t){return true}}]);return e}();function y(){var e=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="','">\n\t\t\t\t<div class="','"></div>\n\t\t\t\t<input id="','" type="text" autocomplete="off" value="','" name="\n\t\t\t\t\t','" class="','" onchange="','">\n\t\t\t</div>\n\t\t']);y=function t(){return e};return e}function k(){var e=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div id="','" class="','">\n\t\t\t\t<div class="','">\n\t\t\t\t\t<div id="','" class="','">','</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="','">\n\t\t\t\t\t',"\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t"]);k=function t(){return e};return e}var I=function(e){babelHelpers.inherits(t,e);function t(e){var i;babelHelpers.classCallCheck(this,t);i=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e));i.ids.set("container","social-group-copy-date-field-"+i.fieldName);i.classes.set("control","ui-ctl ui-ctl-after-icon ui-ctl-datetime");i.classes.set("icon","ui-ctl-after ui-ctl-icon-calendar");i.classes.set("innerControl","ui-ctl-element");i.validators.push(T);return i}babelHelpers.createClass(t,[{key:"onAppendToParent",value:function e(){babelHelpers.get(babelHelpers.getPrototypeOf(t.prototype),"onAppendToParent",this).call(this);i.Event.bind(this.innerControl,"click",this.showCalendar.bind(this))}},{key:"setParentNode",value:function e(t){if(i.Type.isDomNode(t)){this.parentNode=t}}},{key:"render",value:function e(){this.fieldTitle=i.Text.encode(this.fieldTitle);return i.Tag.render(k(),i.Text.encode(this.ids.get("container")),this.classes.get("container"),this.classes.get("leftColumn"),this.titleId,this.classes.get("fieldTitle"),this.fieldTitle,this.classes.get("rightColumn"),this.renderRightColumn())}},{key:"renderRightColumn",value:function e(){this.fieldName=i.Text.encode(this.fieldName);this.value=i.Text.encode(this.value);var t=this.onChange.bind(this);return i.Tag.render(y(),this.classes.get("control"),this.classes.get("icon"),this.innerControlId,this.value,this.fieldName,this.classes.get("innerControl"),t)}},{key:"showCalendar",value:function e(){BX.calendar({node:this.innerControl,field:this.innerControl,bTime:false,bSetFocus:false,bHideTime:false})}},{key:"onChange",value:function e(){this.setValue(this.innerControl.value);this.validate()}}]);return t}(a);function E(){var e=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div>\n\t\t\t\t<div id="','" class="','">\n\t\t\t\t\t','\n\t\t\t\t\t<div class="','"></div>\n\t\t\t\t\t',"\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t"]);E=function t(){return e};return e}var P=function(e){babelHelpers.inherits(t,e);function t(e){var i;babelHelpers.classCallCheck(this,t);i=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e));i.startPoint=null;i.endPoint=null;i.ids.set("container","social-group-copy-date-range-field-"+i.fieldName);i.ids.set("baseContainer","social-group-copy-date-range-base-"+i.fieldName);i.classes.set("baseContainer","social-group-copy-field-container "+"social-group-copy-field-container-datetime social-group-copy-field-datetime");i.classes.set("delimiter","social-group-copy-field-block social-group-copy-field-block-between");return i}babelHelpers.createClass(t,[{key:"onAppendToParent",value:function e(){babelHelpers.get(babelHelpers.getPrototypeOf(t.prototype),"onAppendToParent",this).call(this);this.baseContainer=document.getElementById(this.ids.get("baseContainer"));this.startPoint.setParentNode(this.baseContainer);this.startPoint.onAppendToParent();this.endPoint.onAppendToParent();this.toggleVisible(this.visible)}},{key:"renderRightColumn",value:function e(){this.startPoint=new I({fieldName:"range_start_point",validators:[c]});this.endPoint=new I({fieldName:"range_end_point"});return i.Tag.render(E(),this.ids.get("baseContainer"),this.classes.get("baseContainer"),this.startPoint.renderRightColumn(),this.classes.get("delimiter"),this.endPoint.renderRightColumn())}},{key:"validate",value:function e(){this.errorContainer.clear();if(!this.visible){return true}return this.startPoint&&this.startPoint.validate()}},{key:"getValue",value:function e(){return{start_point:this.startPoint.getValue(),end_point:this.endPoint.getValue()}}}]);return t}(C);var _=function(e){babelHelpers.inherits(t,e);function t(e){var i;babelHelpers.classCallCheck(this,t);i=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e));e=babelHelpers.objectSpread({},{selectorId:"",multiple:true},e);i.selectorId=e.selectorId;i.multiple=e.multiple;i.value=i.multiple?{}:"";i.init();return i}babelHelpers.createClass(t,[{key:"init",value:function e(){BX.addCustomEvent("BX.Main.User.SelectorController:select",this.onSelect.bind(this));BX.addCustomEvent("BX.Main.User.SelectorController:unSelect",this.onUnSelect.bind(this))}},{key:"onSelect",value:function e(t){if(this.selectorId!==t.selectorId){return}if(i.Type.isUndefined(t.item)||i.Type.isUndefined(t.item.entityId)){return}this.setValue(t.item.entityId)}},{key:"onUnSelect",value:function e(t){if(this.selectorId!==t.selectorId){return}if(i.Type.isUndefined(t.item)||i.Type.isUndefined(t.item.entityId)){return}this.deleteValue(t.item.entityId);this.validate()}},{key:"setValue",value:function e(t){if(this.multiple){this.value[t]=t}else{this.value=t}}},{key:"deleteValue",value:function e(t){if(this.multiple){delete this.value[t]}else{this.value=""}}}]);return t}(C);function O(){var e=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="','">\n\t\t\t\t<div class="','"></div>\n\t\t\t\t<select id="','" name="','" class="','" onchange="','">\n\t\t\t\t\t',"\n\t\t\t\t</select>\n\t\t\t</div>\n\t\t"]);O=function t(){return e};return e}function H(){var e=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="','">\n\t\t\t\t<div class="','">\n\t\t\t\t\t<div id="','" class="','">','</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="','">\n\t\t\t\t\t',"\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t"]);H=function t(){return e};return e}var S=function(e){babelHelpers.inherits(t,e);function t(e){var i;babelHelpers.classCallCheck(this,t);i=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e));e=babelHelpers.objectSpread({},{list:{}},e);i.list=e.list;i.onChangeCallback=i.onChange.bind(babelHelpers.assertThisInitialized(i));i.classes.set("control","ui-ctl ui-ctl-after-icon ui-ctl-dropdown");i.classes.set("controlAngle","ui-ctl-after ui-ctl-icon-angle");i.classes.set("innerControl","ui-ctl-element");return i}babelHelpers.createClass(t,[{key:"render",value:function e(){this.fieldTitle=i.Text.encode(this.fieldTitle);this.fieldName=i.Text.encode(this.fieldName);this.value=i.Text.encode(this.value);return i.Tag.render(H(),this.classes.get("container"),this.classes.get("leftColumn"),this.titleId,this.classes.get("fieldTitle"),this.fieldTitle,this.classes.get("rightColumn"),this.renderRightColumn())}},{key:"renderRightColumn",value:function e(){var t=this.getOptions();return i.Tag.render(O(),this.classes.get("control"),this.classes.get("controlAngle"),this.innerControlId,this.fieldName,this.classes.get("innerControl"),this.onChangeCallback,t.join(""))}},{key:"getOptions",value:function e(){var t=this;return Object.entries(this.list).map(function(e){var s=babelHelpers.slicedToArray(e,2),n=s[0],a=s[1];return"<option ".concat(n===t.value?"selected":"",' value="').concat(i.Text.encode(n),'">').concat(i.Text.encode(a),"</option>")})}},{key:"changeOptions",value:function e(t){this.list=t;var i=this.getOptions();this.innerControl.innerHTML=i.join("")}},{key:"onChange",value:function e(){this.validate()}},{key:"validate",value:function e(){babelHelpers.get(babelHelpers.getPrototypeOf(t.prototype),"setValue",this).call(this,this.innerControl.value);return babelHelpers.get(babelHelpers.getPrototypeOf(t.prototype),"validate",this).call(this)}}]);return t}(a);function L(){var e=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div id="','" class="','">\n\t\t\t\t','\n\t\t\t\t<div id="','" class="','"></div>\n\t\t\t</div>\n\t\t']);L=function t(){return e};return e}var N=function(){function e(t){babelHelpers.classCallCheck(this,e);t=babelHelpers.objectSpread({},{switcher:null},t);this.switcher=t.switcher;this.options=[];this.block=null;this.list=null;this.ids=new Map([["blockId","social-group-copy-options-block"],["listId","social-group-copy-options-list-block"]]);this.classes=new Map([["block","social-group-copy-options-block"],["switcher","social-group-copy-options-title-block"],["optionsList","social-group-copy-options-list hide fade-out"]])}babelHelpers.createClass(e,[{key:"onAppendToParent",value:function e(){var t=this;this.block=document.getElementById(this.ids.get("blockId"));this.list=document.getElementById(this.ids.get("listId"));this.options.forEach(function(e){return e.onAppendToParent(t.list)});this.switcher.onAppendToParent(this.list)}},{key:"addOption",value:function e(t){this.options.push(t);this.switcher.addOption(t)}},{key:"render",value:function e(){return i.Tag.render(L(),this.ids.get("blockId"),this.classes.get("block"),this.switcher.render(),this.ids.get("listId"),this.classes.get("optionsList"))}},{key:"getValues",value:function e(){var t={};this.options.forEach(function(e){t=babelHelpers.objectSpread({},t,e.getValues())});return t}}]);return e}();function G(){var e=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div id="','" class="','">\n\t\t\t\t<div class="','">','</div>\n\t\t\t\t<div class="','">\n\t\t\t\t\t',"\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t"]);G=function t(){return e};return e}var R=function(){function e(t){babelHelpers.classCallCheck(this,e);t=babelHelpers.objectSpread({},{title:"Title"},t);this.title=t.title;this.container=null;this.options=[];this.ids=new Map([["switcherId","social-group-copy-switcher"]]);this.classes=new Map([["switcher","social-group-copy-switcher"],["switcherMore","social-group-copy-switcher-more"],["switcherPromo","social-group-copy-switcher-promo"],["opened","opened"],["hide","hide"],["easingIn","fade-in"],["easingOut","fade-out"]])}babelHelpers.createClass(e,[{key:"addOption",value:function e(t){this.options.push(t)}},{key:"onAppendToParent",value:function e(t){this.optionsContainer=t;this.container=document.getElementById(this.ids.get("switcherId"));i.Event.bind(this.container,"click",this.onClick.bind(this))}},{key:"isOpened",value:function e(){return i.Dom.hasClass(this.container,this.classes.get("opened"))}},{key:"render",value:function e(){this.title=i.Text.encode(this.title);var t=this.options.map(function(e){return e.renderPromo()});return i.Tag.render(G(),this.ids.get("switcherId"),this.classes.get("switcher"),this.classes.get("switcherMore"),this.title,this.classes.get("switcherPromo"),t)}},{key:"onClick",value:function e(t){var i=t.target;var s=i.getAttribute("id");if(!s){i=t.currentTarget;s=i.getAttribute("id")}if(s===this.ids.get("switcherId")){this.switchOptions()}}},{key:"switchOptions",value:function e(){this.constructor.switchOptions(this)}}],[{key:"switchOptions",value:function e(t){if(i.Dom.hasClass(t.optionsContainer,t.classes.get("easingOut"))){i.Dom.removeClass(t.optionsContainer,t.classes.get("hide"));i.Dom.removeClass(t.optionsContainer,t.classes.get("easingOut"));i.Dom.addClass(t.container,t.classes.get("opened"));i.Dom.addClass(t.optionsContainer,t.classes.get("easingIn"))}else{i.Dom.removeClass(t.container,t.classes.get("opened"));i.Dom.removeClass(t.optionsContainer,t.classes.get("easingIn"));i.Dom.addClass(t.optionsContainer,t.classes.get("easingOut"))}}}]);return e}();function w(){var e=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<label class="','">\n\t\t\t\t<input id="','" '," ",' \n\t\t\t\t\ttype="checkbox" name="','" \n\t\t\t\t\tonchange="','" class="','">\n\t\t\t\t<div id="','" class="','">',"</div>\n\t\t\t</label>\n\t\t"]);w=function t(){return e};return e}var x=function(e){babelHelpers.inherits(t,e);function t(e){var i;babelHelpers.classCallCheck(this,t);i=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e));e=babelHelpers.objectSpread({},{checked:true,disabled:false},e);i.checked=e.checked;i.disabled=e.disabled;i.classes.set("control","ui-ctl ui-ctl-checkbox ui-ctl-wa ui-ctl-xs social-group-copy-checkbox");i.classes.set("innerControl","ui-ctl-element");i.classes.set("title","ui-ctl-label-text");i.eventNamespace="BX.Socialnetwork.CheckboxField:";if(typeof i.setEventNamespace==="function"){i.eventNamespace="";i.setEventNamespace("BX.Socialnetwork.CheckboxField")}return i}babelHelpers.createClass(t,[{key:"setChecked",value:function e(t){this.innerControl.checked=t}},{key:"render",value:function e(){var t=this.onChange.bind(this);this.fieldTitle=i.Text.encode(this.fieldTitle);this.fieldName=i.Text.encode(this.fieldName);return i.Tag.render(w(),this.classes.get("control"),this.innerControlId,this.disabled?"disabled":"",this.checked?"checked":"",this.fieldName,t,this.classes.get("innerControl"),this.titleId,this.classes.get("title"),this.fieldTitle)}},{key:"onChange",value:function e(){this.validate();this.emit(this.eventNamespace+this.fieldName+":onChange",{checked:this.innerControl.checked})}},{key:"isDisabled",value:function e(){return Boolean(this.innerControl.disabled)}},{key:"changeDisabled",value:function e(t){if(t){this.innerControl.checked=false;this.setValue("")}this.innerControl.disabled=t}},{key:"validate",value:function e(){this.setValue(this.innerControl.checked?"Y":"");return babelHelpers.get(babelHelpers.getPrototypeOf(t.prototype),"validate",this).call(this)}},{key:"getValue",value:function e(){return this.innerControl.checked?"Y":""}}]);return t}(a);function M(){var e=babelHelpers.taggedTemplateLiteral([""]);M=function t(){return e};return e}function B(){var e=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div id="','" class="','">\n\t\t\t\t\t<div class="','">\n\t\t\t\t\t\t<div id="','" class="','">','</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="','">\n\t\t\t\t\t\t',"\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t"]);B=function t(){return e};return e}var D=function(){function e(t){babelHelpers.classCallCheck(this,e);t=babelHelpers.objectSpread({},{fieldTitle:"title",data:{},switcher:null,value:""},t);this.fieldTitle=i.Text.encode(t.fieldTitle);this.data=t.data;this.value=t.value?t.value:"";this.switcher=t.switcher;this.titleControl=null;this.titleId="child-option-title-id";this.optionsContainer=null;this.blockId="base";this.block=null;this.fields=new Set;this.classes=new Map([["optionItem","social-group-copy-options-item social-group-copy-form-field-list-block"],["leftColumn","social-group-copy-options-item-column-left"],["fieldTitle","social-group-copy-options-item-name"],["rightColumn","social-group-copy-options-item-column-right"],["promoText","social-group-copy-switcher-promo-text"],["itemHighlight","item-highlight"]])}babelHelpers.createClass(e,[{key:"onAppendToParent",value:function e(t){this.optionsContainer=t;if(i.Type.isPlainObject(this.data)){this.append(this.data)}this.fields.forEach(function(e){return e.onAppendToParent()});this.block=document.getElementById(this.blockId);this.titleControl=document.getElementById(this.titleId)}},{key:"append",value:function e(t){this.optionsContainer.appendChild(i.Tag.render(B(),this.blockId,this.classes.get("optionItem"),this.classes.get("leftColumn"),this.titleId,this.classes.get("fieldTitle"),this.fieldTitle,this.classes.get("rightColumn"),this.getChildRender(t)))}},{key:"getChildRender",value:function e(t){return i.Tag.render(M())}},{key:"getValues",value:function e(){var t={};this.fields.forEach(function(e){t[e.getName()]=e.getValue()});return t}},{key:"onClick",value:function e(t){var s=this;this.switcher.switchOptions();if(this.switcher.isOpened()){setTimeout(function(){i.Dom.addClass(s.block,s.classes.get("itemHighlight"));var e=i.Dom.getPosition(s.block);window.scrollBy({top:e.top,left:e.left,behavior:"smooth"});setTimeout(function(){i.Dom.removeClass(s.block,s.classes.get("itemHighlight"))},3e3)},1e3)}}},{key:"changeTitle",value:function e(t){this.fieldTitle=t;this.titleControl.innerHTML=i.Text.encode(this.fieldTitle)}}]);return e}();function F(){var e=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="','">\n\t\t\t\t\t',"\n\t\t\t\t\t","\n\t\t\t\t</div>\n\t\t\t"]);F=function t(){return e};return e}function j(){var e=babelHelpers.taggedTemplateLiteral(["",""]);j=function t(){return e};return e}function A(){var e=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="','">\n\t\t\t\t',"\n\t\t\t</div>\n\t\t"]);A=function t(){return e};return e}function V(){var e=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<span id="','" class="','">',"</span>\n\t\t"]);V=function t(){return e};return e}var U=function(e){babelHelpers.inherits(t,e);function t(e){var i;babelHelpers.classCallCheck(this,t);i=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e));i.promoId="features";i.blockId="features-block";i.classes.set("featuresList","social-group-copy-features-list");i.classes.set("featureItem","social-group-copy-feature-item social-group-copy-feature-item-tree");return i}babelHelpers.createClass(t,[{key:"onAppendToParent",value:function e(s){babelHelpers.get(babelHelpers.getPrototypeOf(t.prototype),"onAppendToParent",this).call(this,s);i.Event.bind(document.getElementById(this.promoId),"click",this.onClick.bind(this))}},{key:"renderPromo",value:function e(){return i.Tag.render(V(),this.promoId,this.classes.get("promoText"),this.fieldTitle)}},{key:"getChildRender",value:function e(t){return i.Tag.render(A(),this.classes.get("featuresList"),this.getFeaturesRender(t))}},{key:"selfClean",value:function e(){if(i.Type.isDomNode(this.block)){i.Dom.remove(this.block)}}},{key:"getFeaturesRender",value:function e(t){var s=this;return Object.values(t).map(function(e){var t=Object.prototype.hasOwnProperty;var n=Object.values(e["Children"]).map(function(i){var n=new x({fieldTitle:i["Title"],fieldName:"features["+e["Name"]+"]["+i["Name"]+"]",validators:[],parentNode:s.optionsContainer,checked:t.call(i,"Checked")?i["Checked"]:true});s.fields.add(n);return n});var a=n.map(function(e){return i.Tag.render(j(),e.render())});var r=new x({fieldTitle:e["Title"],fieldName:"features["+e["Name"]+"][active]",validators:[],parentNode:s.optionsContainer,checked:t.call(e,"Checked")?e["Checked"]:true,onCustomChange:function(e){this.forEach(function(t){t.setChecked(e.currentTarget.checked)})}.bind(n)});s.fields.add(r);return i.Tag.render(F(),s.classes.get("featureItem"),r.render(),a)})}}]);return t}(D);function Y(){var e=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<span id="','" class="','">\n\t\t\t\t',"\n\t\t\t</span>\n\t\t"]);Y=function t(){return e};return e}var J=function(e){babelHelpers.inherits(t,e);function t(e){var i;babelHelpers.classCallCheck(this,t);i=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e));i.promoId="rights";i.blockId="rights-block";i.titleId="rights-option-title-id";i.selectField=null;return i}babelHelpers.createClass(t,[{key:"onAppendToParent",value:function e(s){babelHelpers.get(babelHelpers.getPrototypeOf(t.prototype),"onAppendToParent",this).call(this,s);i.Event.bind(document.getElementById(this.promoId),"click",this.onClick.bind(this))}},{key:"renderPromo",value:function e(){return i.Tag.render(Y(),this.promoId,this.classes.get("promoText"),i.Loc.getMessage("SGCG_OPTIONS_PERMS_TITLE"))}},{key:"getChildRender",value:function e(t){this.selectField=new S({fieldTitle:this.fieldTitle,fieldName:"initiate_perms",value:this.value,list:t});this.fields.add(this.selectField);return this.selectField.renderRightColumn()}},{key:"changeSelectOptions",value:function e(t){this.selectField.changeOptions(t)}}]);return t}(D);var X=function(e){babelHelpers.inherits(t,e);function t(e){var i;babelHelpers.classCallCheck(this,t);i=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e));e=babelHelpers.objectSpread({},{selectorId:""},e);i.selectorId=e.selectorId;i.selector=null;i.value={};i.init();return i}babelHelpers.createClass(t,[{key:"init",value:function e(){var t=this;this.selector=BX.UI.TileSelector.getById(this.selectorId);if(this.selector){BX.addCustomEvent(this.selector,this.selector.events.search,this.onSearch.bind(this));BX.addCustomEvent(this.selector,this.selector.events.input,this.onInput.bind(this));BX.addCustomEvent(this.selector,this.selector.events.buttonSelect,this.buttonSelect.bind(this));BX.addCustomEvent(this.selector,this.selector.events.tileRemove,this.removeTile.bind(this));BX.addCustomEvent(this.selector,this.selector.events.tileClick,this.clickTile.bind(this));this.selector.getTiles().map(function(e){t.setValue(e.id,e)})}}},{key:"setValue",value:function e(t,i){this.value[t]=i}},{key:"deleteValue",value:function e(t){delete this.value[t]}},{key:"onSearch",value:function e(t){if(t){this.selector.addTile(t,[],t);var i=this.selector.getTile(t);this.setValue(i.id,i)}}},{key:"onInput",value:function e(t){}},{key:"buttonSelect",value:function e(){}},{key:"removeTile",value:function e(t){this.deleteValue(t.id)}},{key:"clickTile",value:function e(t){}}]);return t}(C);var q=function(e){babelHelpers.inherits(t,e);function t(){babelHelpers.classCallCheck(this,t);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}babelHelpers.createClass(t,[{key:"getValue",value:function e(){return Object.keys(this.value).join(",")}}]);return t}(X);function W(){var e=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<span id="','" class="','">',"</span>\n\t\t"]);W=function t(){return e};return e}var z=function(e){babelHelpers.inherits(t,e);function t(e){var i;babelHelpers.classCallCheck(this,t);i=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e));e=babelHelpers.objectSpread({},{tagsFieldContainerId:""},e);i.promoId="tags";i.blockId="tags-block";i.tagsFieldContainerId=e.tagsFieldContainerId;return i}babelHelpers.createClass(t,[{key:"onAppendToParent",value:function e(s){babelHelpers.get(babelHelpers.getPrototypeOf(t.prototype),"onAppendToParent",this).call(this,s);i.Event.bind(document.getElementById(this.promoId),"click",this.onClick.bind(this))}},{key:"renderPromo",value:function e(){return i.Tag.render(W(),this.promoId,this.classes.get("promoText"),this.fieldTitle)}},{key:"getChildRender",value:function e(t){var i=new q({selectorId:"tags-list",fieldTitle:this.fieldTitle,fieldName:"keywords",fieldContainerId:this.tagsFieldContainerId});this.fields.add(i);return i.renderRightColumn()}}]);return t}(D);function Q(){var e=babelHelpers.taggedTemplateLiteral(["",""]);Q=function t(){return e};return e}function K(){var e=babelHelpers.taggedTemplateLiteral(["",""]);K=function t(){return e};return e}function Z(){var e=babelHelpers.taggedTemplateLiteral(["",""]);Z=function t(){return e};return e}function $(){var e=babelHelpers.taggedTemplateLiteral(["",""]);$=function t(){return e};return e}function ee(){var e=babelHelpers.taggedTemplateLiteral(["",""]);ee=function t(){return e};return e}function te(){var e=babelHelpers.taggedTemplateLiteral(["",""]);te=function t(){return e};return e}function ie(){var e=babelHelpers.taggedTemplateLiteral(["",""]);ie=function t(){return e};return e}function se(){var e=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="','">\n\t\t\t\t',"\n\t\t\t</div>\n\t\t"]);se=function t(){return e};return e}function ne(){var e=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<span id="','" class="','">\n\t\t\t\t',"\n\t\t\t</span>\n\t\t"]);ne=function t(){return e};return e}var ae=function(e){babelHelpers.inherits(t,e);function t(e){var i;babelHelpers.classCallCheck(this,t);i=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e));e=babelHelpers.objectSpread({},{isProject:false,isExtranetGroup:false,isExtranetInstalled:false,isIntranetInstalled:false,isLandingInstalled:false},e);i.isProject=e.isProject;i.isExtranetGroup=e.isExtranetGroup;i.isExtranetInstalled=e.isExtranetInstalled;i.isIntranetInstalled=e.isIntranetInstalled;i.isLandingInstalled=e.isLandingInstalled;i.promoId="types";i.blockId="types-block";i.titleId="types-option-title-id";i.classes.set("typesList","social-group-copy-types-list");i.classes.set("typeItem","social-group-copy-feature-item");i.checkboxEventName="BX.Socialnetwork.CheckboxField";return i}babelHelpers.createClass(t,[{key:"onAppendToParent",value:function e(s){babelHelpers.get(babelHelpers.getPrototypeOf(t.prototype),"onAppendToParent",this).call(this,s);i.Event.bind(document.getElementById(this.promoId),"click",this.onClick.bind(this))}},{key:"renderPromo",value:function e(){return i.Tag.render(ne(),this.promoId,this.classes.get("promoText"),i.Loc.getMessage("SGCG_OPTIONS_TYPE_TITLE"))}},{key:"getChildRender",value:function e(t){return i.Tag.render(se(),this.classes.get("typesList"),this.getTypesRender(t))}},{key:"getTypesRender",value:function e(t){var s=[];var n=this.createVisibleField(t);s.push(i.Tag.render(ie(),n.render()));var a=this.createOpenedField(t);s.push(i.Tag.render(te(),a.render()));var r=this.createCloseField(t);s.push(i.Tag.render(ee(),r.render()));if(this.isExtranetInstalled){var l=this.createExtranetField(t);s.push(i.Tag.render($(),l.render()))}if(this.isIntranetInstalled){var o=this.createProjectField(t);s.push(i.Tag.render(Z(),o.render()))}if(this.isLandingInstalled){var c=this.createLandingField(t);s.push(i.Tag.render(K(),c.render()))}return i.Tag.render(Q(),s)}},{key:"createVisibleField",value:function e(t){var s=new x({fieldTitle:this.isProject?i.Loc.getMessage("SGCG_OPTIONS_PROJECT_TYPE_VISIBLE"):i.Loc.getMessage("SGCG_OPTIONS_GROUP_TYPE_VISIBLE"),fieldName:"visible",validators:[],checked:t["VISIBLE"]==="Y"&&!this.isExtranetGroup,disabled:this.isExtranetGroup});this.fields.add(s);this.subscribeToField(this.checkboxEventName+":project:onChange",function(e){s.changeTitle(e.data.checked?i.Loc.getMessage("SGCG_OPTIONS_PROJECT_TYPE_VISIBLE"):i.Loc.getMessage("SGCG_OPTIONS_GROUP_TYPE_VISIBLE"))});this.subscribeToField(this.checkboxEventName+":extranet_group:onChange",function(e){s.changeDisabled(e.data.checked)});return s}},{key:"createOpenedField",value:function e(t){var s=new x({fieldTitle:this.isProject?i.Loc.getMessage("SGCG_OPTIONS_PROJECT_TYPE_OPEN"):i.Loc.getMessage("SGCG_OPTIONS_GROUP_TYPE_OPEN"),fieldName:"opened",validators:[],checked:t["OPENED"]==="Y"&&!this.isExtranetGroup,disabled:t["VISIBLE"]!=="Y"||this.isExtranetGroup});this.fields.add(s);this.subscribeToField(this.checkboxEventName+":project:onChange",function(e){s.changeTitle(e.data.checked?i.Loc.getMessage("SGCG_OPTIONS_PROJECT_TYPE_OPEN"):i.Loc.getMessage("SGCG_OPTIONS_GROUP_TYPE_OPEN"))});this.subscribeToField(this.checkboxEventName+":visible:onChange",function(e){s.changeDisabled(!e.data.checked)});this.subscribeToField(this.checkboxEventName+":extranet_group:onChange",function(e){s.changeDisabled(e.data.checked)});return s}},{key:"createCloseField",value:function e(t){var s=new x({fieldTitle:this.isProject?i.Loc.getMessage("SGCG_OPTIONS_PROJECT_TYPE_CLOSED"):i.Loc.getMessage("SGCG_OPTIONS_GROUP_TYPE_CLOSED"),fieldName:"closed",validators:[],checked:t["CLOSED"]==="Y",disabled:this.isExtranetGroup});this.fields.add(s);this.subscribeToField(this.checkboxEventName+":project:onChange",function(e){s.changeTitle(e.data.checked?i.Loc.getMessage("SGCG_OPTIONS_PROJECT_TYPE_CLOSED"):i.Loc.getMessage("SGCG_OPTIONS_GROUP_TYPE_CLOSED"))});this.subscribeToField(this.checkboxEventName+":extranet_group:onChange",function(e){s.changeDisabled(e.data.checked)});return s}},{key:"createExtranetField",value:function e(t){var s=new x({fieldTitle:this.isProject?i.Loc.getMessage("SGCG_OPTIONS_PROJECT_TYPE_EXTRANET"):i.Loc.getMessage("SGCG_OPTIONS_GROUP_TYPE_EXTRANET"),fieldName:"extranet_group",validators:[],checked:this.isExtranetGroup});this.fields.add(s);this.subscribeToField(this.checkboxEventName+":project:onChange",function(e){s.changeTitle(e.data.checked?i.Loc.getMessage("SGCG_OPTIONS_PROJECT_TYPE_EXTRANET"):i.Loc.getMessage("SGCG_OPTIONS_GROUP_TYPE_EXTRANET"))});return s}},{key:"createProjectField",value:function e(t){var s=new x({fieldTitle:i.Loc.getMessage("SGCG_OPTIONS_TYPE_PROJECT"),fieldName:"project",validators:[],checked:t["PROJECT"]==="Y"});this.fields.add(s);return s}},{key:"createLandingField",value:function e(t){var s=new x({fieldTitle:i.Loc.getMessage("SGCG_OPTIONS_TYPE_LANDING"),fieldName:"landing",validators:[],checked:t["LANDING"]==="Y"});this.fields.add(s);return s}},{key:"subscribeToField",value:function e(t,s){i.Event.EventEmitter.subscribe(t,s)}}]);return t}(D);var re=function(){function e(t){babelHelpers.classCallCheck(this,e);t=babelHelpers.objectSpread({},{signedParameters:"",formContainerId:"",isProject:"N",isExtranet:"N",isExtranetGroup:"N",isExtranetInstalled:"N",isIntranetInstalled:"N",groupData:{},imageFieldContainerId:"",ownerFieldContainerId:"",helpersFieldContainerId:"",isLandingInstalled:"",tagsFieldContainerId:"",copyButtonId:"",cancelButtonId:""},t);this.signedParameters=t.signedParameters;this.formContainerId=t.formContainerId;this.isProject=t.isProject==="Y";this.isExtranet=t.isExtranet==="Y";this.isExtranetGroup=t.isExtranetGroup==="Y";this.isExtranetInstalled=t.isExtranetInstalled==="Y";this.isIntranetInstalled=t.isIntranetInstalled==="Y";this.isLandingInstalled=t.isLandingInstalled==="Y";this.groupData=t.groupData;this.subjects=this.groupData["SUBJECTS"];this.features=this.groupData["FEATURES"];this.initiatePerms=this.groupData["LIST_INITIATE_PERMS"];this.imageFieldContainerId=t.imageFieldContainerId;this.ownerFieldContainerId=t.ownerFieldContainerId;this.helpersFieldContainerId=t.helpersFieldContainerId;this.tagsFieldContainerId=t.tagsFieldContainerId;this.requestSender=new f({signedParameters:this.signedParameters});this.requestSender.setProjectMarker(this.isProject);this.form=new g({requestSender:this.requestSender,groupData:t.groupData,copyButtonId:t.copyButtonId,cancelButtonId:t.cancelButtonId});this.buildForm()}babelHelpers.createClass(e,[{key:"buildForm",value:function e(){this.checkboxEventName="BX.Socialnetwork.CheckboxField";this.form.addField(new m({fieldTitle:i.Loc.getMessage("SGCG_UPLOAD_IMAGE_TITLE"),fieldName:"image_id",fieldContainerId:this.imageFieldContainerId}));this.form.addField(this.createDate());if(!this.isProject){this.form.addField(this.createRangeDate())}this.form.addField(this.createOwner());this.form.addField(new _({selectorId:"group-copy-helpers",fieldTitle:this.isProject?i.Loc.getMessage("SGCG_PROJECT_HELPERS_TITLE"):i.Loc.getMessage("SGCG_GROUP_HELPERS_TITLE"),fieldName:"moderators",fieldContainerId:this.helpersFieldContainerId}));if(i.Type.isPlainObject(this.subjects)){this.form.addField(this.createSubject())}var t=new R({title:i.Loc.getMessage("SGCG_OPTIONS_TITLE")});var s=new N({switcher:t});var n=new U({fieldTitle:i.Loc.getMessage("SGCG_OPTIONS_FEATURES_TITLE"),data:this.features,switcher:t});s.addOption(n);s.addOption(this.createRights(t));s.addOption(this.createTags(t));s.addOption(this.createTypes(t));this.form.addBlock(s);this.form.renderTo(document.getElementById(this.formContainerId))}},{key:"subscribeToField",value:function e(t,s){i.Event.EventEmitter.subscribe(t,s)}},{key:"createTypes",value:function e(t){var s=new ae({fieldTitle:this.isProject?i.Loc.getMessage("SGCG_OPTIONS_PROJECT_TYPE_LABEL"):i.Loc.getMessage("SGCG_OPTIONS_GROUP_TYPE_LABEL"),data:this.groupData,switcher:t,isProject:this.isProject,isExtranetGroup:this.isExtranetGroup,isExtranetInstalled:this.isExtranetInstalled,isIntranetInstalled:this.isIntranetInstalled,isLandingInstalled:this.isLandingInstalled});this.subscribeToField(this.checkboxEventName+":project:onChange",function(e){s.changeTitle(e.data.checked?i.Loc.getMessage("SGCG_OPTIONS_PROJECT_TYPE_LABEL"):i.Loc.getMessage("SGCG_OPTIONS_GROUP_TYPE_LABEL"))});return s}},{key:"createTags",value:function e(t){return new z({fieldTitle:i.Loc.getMessage("SGCG_OPTIONS_KEYWORDS_TITLE"),tagsFieldContainerId:this.tagsFieldContainerId,switcher:t})}},{key:"createRights",value:function e(t){var s=this;var n=new J({fieldTitle:this.isProject?i.Loc.getMessage("SGCG_OPTIONS_PROJECT_PERMS_LABEL"):i.Loc.getMessage("SGCG_OPTIONS_GROUP_PERMS_LABEL"),value:this.groupData["INITIATE_PERMS"],data:this.isProject?this.initiatePerms.project:this.initiatePerms.group,switcher:t});this.subscribeToField(this.checkboxEventName+":project:onChange",function(e){n.changeSelectOptions(e.data.checked?s.initiatePerms.project:s.initiatePerms.group);n.changeTitle(e.data.checked?i.Loc.getMessage("SGCG_OPTIONS_PROJECT_PERMS_LABEL"):i.Loc.getMessage("SGCG_OPTIONS_GROUP_PERMS_LABEL"))});return n}},{key:"createSubject",value:function e(){var t=new S({fieldTitle:this.isProject?i.Loc.getMessage("SGCG_PROJECT_SUBJECT"):i.Loc.getMessage("SGCG_GROUP_SUBJECT"),fieldName:"subject_id",value:this.groupData["SUBJECT_ID"],list:this.subjects});this.subscribeToField(this.checkboxEventName+":project:onChange",function(e){t.changeTitle(e.data.checked?i.Loc.getMessage("SGCG_PROJECT_SUBJECT"):i.Loc.getMessage("SGCG_GROUP_SUBJECT"))});return t}},{key:"createOwner",value:function e(){var t=new _({selectorId:"group-copy-owner",multiple:false,fieldTitle:this.isProject?i.Loc.getMessage("SGCG_PROJECT_OWNER_TITLE"):i.Loc.getMessage("SGCG_GROUP_OWNER_TITLE"),fieldName:"owner_id",validators:[c],fieldContainerId:this.ownerFieldContainerId});this.subscribeToField(this.checkboxEventName+":project:onChange",function(e){t.changeTitle(e.data.checked?i.Loc.getMessage("SGCG_PROJECT_OWNER_TITLE"):i.Loc.getMessage("SGCG_GROUP_OWNER_TITLE"))});return t}},{key:"createDate",value:function e(){var t=this;var s=new I({fieldTitle:this.isProject?i.Loc.getMessage("SGCG_PROJECT_START_POINT_TITLE"):i.Loc.getMessage("SGCG_GROUP_START_POINT_TITLE"),fieldName:"start_point",validators:[c]});this.subscribeToField(this.checkboxEventName+":project:onChange",function(e){if(t.isProject){s.changeTitle(e.data.checked?i.Loc.getMessage("SGCG_PROJECT_START_POINT_TITLE"):i.Loc.getMessage("SGCG_GROUP_START_POINT_TITLE"))}else{s.toggleVisible(!e.data.checked);s.changeTitle(e.data.checked?i.Loc.getMessage("SGCG_PROJECT_RANGE_TITLE"):i.Loc.getMessage("SGCG_GROUP_START_POINT_TITLE"))}});return s}},{key:"createRangeDate",value:function e(){var t=this;var s=new P({fieldTitle:i.Loc.getMessage("SGCG_PROJECT_RANGE_TITLE"),fieldName:"project_term",visible:false});this.subscribeToField(this.checkboxEventName+":project:onChange",function(e){if(!t.isProject){s.toggleVisible(e.data.checked)}});return s}}]);return e}();e.CopyingManager=re})(this.BX.Socialnetwork=this.BX.Socialnetwork||{},BX,BX);
//# sourceMappingURL=script.map.js