(function(){if(!!BX.BXSURG){return}BX.BXSURG={iframe:false,errorBlock:null};BX.BXSURG.init=function(e){if(typeof e!="undefined"){if(typeof e.iframe!="undefined"){this.iframe=!!e.iframe}if(BX.type.isNotEmptyString(e.errorBlockName)&&BX(e.errorBlockName)){this.errorBlock=BX(e.errorBlockName)}}BX.bind(BX("sonet_group_user_request_button_submit"),"click",BX.delegate((function(e){BX.BXSURG.submitForm();e.preventDefault()}),this));BX.bind(BX("sonet_group_user_request_button_cancel"),"click",(function(e){BX.SidePanel.Instance.close();e.preventDefault()}))};BX.BXSURG.submitForm=function(){if(!BX("sonet_group_user_request_form")){return}BX.SocialnetworkUICommon.hideError(this.errorBlock);BX.SocialnetworkUICommon.showButtonWait(BX("sonet_group_user_request_button_submit"));BX.ajax({url:BX("sonet_group_user_request_form").getAttribute("action"),method:"POST",dataType:"json",data:{ajax_request:"Y",MESSAGE:BX("sonet_group_user_request_message").value,save:"Y",sessid:BX.bitrix_sessid()},onsuccess:BX.delegate((function(e){BX.SocialnetworkUICommon.hideButtonWait(BX("sonet_group_user_request_button_submit"));if(typeof e.MESSAGE!="undefined"&&e.MESSAGE=="SUCCESS"&&typeof e.URL!="undefined"){if(window!==top.window){window.top.BX.SidePanel.Instance.close();window.top.BX.SidePanel.Instance.postMessageAll(window,"sonetGroupEvent",{code:"afterJoinRequestSend",data:{groupId:parseInt(e.GROUP_ID)}})}else{BX.SocialnetworkUICommon.reload()}}else if(typeof e.MESSAGE!="undefined"&&e.MESSAGE=="ERROR"&&typeof e.ERROR_MESSAGE!="undefined"&&e.ERROR_MESSAGE.length>0){BX.SocialnetworkUICommon.showError(e.ERROR_MESSAGE,this.errorBlock)}}),this),onfailure:BX.delegate((function(e){BX.SocialnetworkUICommon.hideButtonWait(BX("sonet_group_user_request_button_submit"));BX.SocialnetworkUICommon.showError(BX.message("SONET_C39_T_ERROR"),this.errorBlock)}),this)})}})();
//# sourceMappingURL=script.map.js