{"version":3,"file":"script.js","sources":["src/fields-group/base.js","src/types/section-type.js","src/fields-group/element.js","src/field/seo-input.js","src/types/seo-detail-mode.js","src/fields-group/section.js","src/field/cache-checkbox.js","src/fields-group/managent.js","src/seo-detail.js"],"sourcesContent":["import {Tag, Text} from 'main.core';\nimport type {SectionOptions} from \"../types/section-options\";\nimport {SeoDetail} from \"../seo-detail\";\nimport {MessageCard} from 'ui.messagecard';\nimport {EventEmitter} from \"main.core.events\";\n\n\nexport class Base\n{\n\tconstructor(options: SectionOptions = {}, form: SeoDetail)\n\t{\n\t\tthis.form = form;\n\t\tthis.fields = options.FIELDS;\n\t\tthis.title = options.TITLE;\n\t\tthis.id = options.ID;\n\t\tthis.type = null;\n\t}\n\n\tlayout(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class='ui-slider-section'>\n\t\t\t\t<div class='ui-slider-heading-4'>${Text.encode(this.title)}</div>\n\t\t\t\t${this.getInfoWrapper()}\n\t\t\t\t${this.getWrapper()}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetWrapper(): HTMLElement\n\t{\n\t\treturn Tag.render`<div class='ui-form ui-form-section'></div>`;\n\t}\n\n\tgetInfoWrapper(): ?HTMLElement\n\t{\n\t\treturn null;\n\t}\n\n\tgetForm(): SeoDetail\n\t{\n\t\treturn this.form;\n\t}\n\n\tgetType(): string\n\t{\n\t\treturn this.type;\n\t}\n\n\tgetInheritedLabel(): string\n\t{\n\t\treturn '';\n\t}\n}","export type SectionTypes = SectionType.ELEMENT | SectionType.SECTION | SectionType.MANAGEMENT;\n\nexport class SectionType\n{\n\tstatic ELEMENT = 'E';\n\tstatic SECTION = 'S';\n\tstatic MANAGEMENT = 'M';\n}\n","import {Dom, Loc, Text, Tag, Event} from 'main.core';\nimport {Base} from \"./base\";\nimport {SeoInput} from \"../field/seo-input\";\nimport {SectionType} from \"../types/section-type\";\nimport type {SectionOptions} from \"../types/section-options\";\nimport {SeoDetail} from \"../seo-detail\";\nimport {MessageCard} from \"ui.messagecard\";\nimport {EventEmitter} from \"main.core.events\";\n\nexport class Element extends Base\n{\n\tinputFields: Array<SeoInput>;\n\n\tconstructor(options: SectionOptions = {}, form: SeoDetail)\n\t{\n\t\tsuper(options, form);\n\n\t\tthis.inputFields = [];\n\n\t\tObject.keys(options.FIELDS).forEach((fieldCode) => {\n\t\t\tconst fieldScheme = options.FIELDS[fieldCode];\n\t\t\tthis.inputFields.push(new SeoInput(fieldScheme, this));\n\t\t});\n\n\t\tif (options.MESSAGE)\n\t\t{\n\t\t\tthis.message = new MessageCard({\n\t\t\t\tid: options.MESSAGE.ID,\n\t\t\t\theader: Text.encode(options.MESSAGE.HEADER),\n\t\t\t\tdescription: this.getInfoMessageDescription(options.MESSAGE.DESCRIPTION),\n\t\t\t\tangle: false,\n\t\t\t\thidden: options.MESSAGE.HIDDEN === 'Y',\n\t\t\t});\n\n\t\t\tEventEmitter.subscribe(this.message, 'onClose', () => {\n\t\t\t\tthis.form.hideInfoMessage(this.message.id);\n\t\t\t});\n\t\t}\n\n\t\tthis.type = SectionType.ELEMENT;\n\t}\n\n\tgetWrapper(): HTMLElement\n\t{\n\t\tconst wrapper = super.getWrapper();\n\n\t\tthis.inputFields.forEach((field) => {\n\t\t\tDom.append(field.layout(), wrapper);\n\t\t})\n\n\t\treturn wrapper;\n\t}\n\n\tgetInfoWrapper(): ?HTMLElement\n\t{\n\t\treturn this.message ? this.message.getLayout() : null;\n\t}\n\n\tgetInfoMessageDescription(description: string): HTMLElement\n\t{\n\t\tconst moreLink = Tag.render`<a href=\"#\" class=\"ui-form-link\">${Loc.getMessage('CSD_ELEMENT_INFO_MESSAGE_HELP_LINK_TITLE')}</a>`;\n\n\t\tEvent.bind(moreLink, 'click', SeoDetail.openSeoHelpPage);\n\t\tconst descriptionHtml = Tag.render`\n\t\t\t<div>${Text.encode(description).replace('#HELP_LINK#', '<help-link></help-link>')}</div>\n\t\t`;\n\n\t\tDom.replace(descriptionHtml.querySelector('help-link'), moreLink);\n\n\t\treturn descriptionHtml;\n\t}\n\n\ttoggleInputMenu(field: SeoInput): void\n\t{\n\t\tthis.getForm().toggleInputMenu(this, field);\n\t}\n\n\tgetInheritedLabel(): string\n\t{\n\t\tif (!this.form.isElementMode())\n\t\t{\n\t\t\treturn Loc.getMessage('CSD_INHERIT_SECTION_ELEMENT_OVERWRITE_CHECKBOX_INPUT_TITLE');\n\t\t}\n\n\t\treturn Loc.getMessage('CSD_INHERIT_ELEMENT_OVERWRITE_CHECKBOX_INPUT_TITLE');\n\t}\n}","import {Event, Tag, Text, Type, Loc, Dom, Runtime} from 'main.core';\nimport type {FieldScheme} from \"../types/field-scheme\";\nimport {Element} from \"../fields-group/element\";\nimport type {ValueScheme} from \"../types/value-scheme\";\n\nexport class SeoInput\n{\n\tinput: HTMLElement;\n\thintValue: string;\n\thintWrapper: HTMLElement;\n\tinputWrapper: HTMLElement;\n\ttransliterateWrapper: HTMLElement;\n\n\tconstructor(setting: FieldScheme = {}, section: Element)\n\t{\n\t\tthis.id = Text.encode(setting.ID);\n\t\tthis.title = Text.encode(setting.TITLE);\n\t\tthis.section = section;\n\t\tthis.handleInput = Runtime.debounce(this.onInput, 500, this);\n\t}\n\n\tlayout(): HTMLElement\n\t{\n\t\tthis.input = Tag.render`\n\t\t\t<input class='ui-ctl-element' name=\"${this.id}\" value=\"${Text.encode(this.#getTemplate())}\">\n\t\t`;\n\n\t\tif (!this.#isReadOnly())\n\t\t{\n\t\t\tEvent.bind(this.input, 'keydown', (event: Event) => {\n\t\t\t\tthis.section.getForm().hideInputMenu();\n\t\t\t});\n\t\t\tEvent.bind(this.input, 'input', this.handleInput);\n\t\t\tEvent.bind(this.input, 'click', this.toggleTemplatesMenu.bind(this));\n\t\t}\n\n\t\tif (!this.hintWrapper)\n\t\t{\n\t\t\tthis.hintWrapper = Tag.render`<div class='ui-ctl-label-text catalog-seo-detail-input-hint'>${this.#getHint()}</div>`;\n\t\t}\n\n\t\tlet menuButton = null;\n\t\tif (!this.#isReadOnly())\n\t\t{\n\t\t\tmenuButton = Tag.render`<div class=\"ui-ctl-after ui-ctl-icon-angle\" data-id=\"\"></div>`;\n\t\t}\n\n\t\tthis.inputWrapper = Tag.render`\n\t\t\t<div class=\"ui-ctl ui-ctl-textbox ui-ctl-after-icon ui-ctl-w100\">\n\t\t\t\t${menuButton}\n\t\t\t\t${this.input}\n\t\t\t</div>\n\t\t`;\n\n\t\tlet inheritCheckbox = null;\n\t\tlet checkboxWrapper = null;\n\t\tif (this.#isExistedInheritedCheckbox())\n\t\t{\n\t\t\tinheritCheckbox = Tag.render`<input type=\"checkbox\" class=\"ui-ctl-element\">`;\n\t\t\tEvent.bind(inheritCheckbox, 'change', this.#toggleInherited.bind(this));\n\n\t\t\tcheckboxWrapper = Tag.render`\n\t\t\t\t<label class=\"ui-ctl ui-ctl-checkbox ui-ctl-w100\">\n\t\t\t\t\t${inheritCheckbox}\n\t\t\t\t\t<div class=\"ui-ctl-label-text\">${this.section.getInheritedLabel()}</div>\n\t\t\t\t</label>\n\t\t\t`;\n\t\t}\n\n\t\tif (inheritCheckbox && !this.#isInherited())\n\t\t{\n\t\t\tinheritCheckbox.checked = true;\n\t\t}\n\t\telse if (!this.section.getForm().isCatalogMode() || this.#isReadOnly())\n\t\t{\n\t\t\tDom.addClass(this.inputWrapper, 'ui-ctl-disabled');\n\t\t\tthis.input.disabled = true;\n\t\t}\n\n\t\tlet lowercaseCheckboxWrapper = null;\n\t\tlet transliterateCheckboxWrapper = null;\n\t\tthis.transliterateWrapper = null;\n\t\tif (this.#isExistedAttributes())\n\t\t{\n\t\t\tconst lowercaseCheckbox = Tag.render`<input type=\"checkbox\" class=\"ui-ctl-element\">`;\n\t\t\tEvent.bind(lowercaseCheckbox, 'change', this.#toggleLowercase.bind(this));\n\t\t\tlowercaseCheckboxWrapper = Tag.render`\n\t\t\t\t<label class=\"ui-ctl ui-ctl-checkbox ui-ctl-w100\">\n\t\t\t\t\t${lowercaseCheckbox}\n\t\t\t\t\t<div class=\"ui-ctl-label-text\">${Loc.getMessage('CSD_LOWERCASE_CHECKBOX_INPUT_TITLE')}</div>\n\t\t\t\t</label>\n\t\t\t`;\n\t\t\tif (this.#isLowerCase())\n\t\t\t{\n\t\t\t\tlowercaseCheckbox.checked = true;\n\t\t\t}\n\n\t\t\tconst transliterateCheckbox = Tag.render`<input type=\"checkbox\" class=\"ui-ctl-element\">`;\n\t\t\tEvent.bind(transliterateCheckbox, 'change', this.#toggleTransliterate.bind(this));\n\t\t\ttransliterateCheckboxWrapper = Tag.render`\n\t\t\t\t<label class=\"ui-ctl ui-ctl-checkbox ui-ctl-w100\">\n\t\t\t\t\t${transliterateCheckbox}\n\t\t\t\t\t<div class=\"ui-ctl-label-text\">${Loc.getMessage('CSD_TRANSLITERATE_CHECKBOX_INPUT_TITLE')}</div>\n\t\t\t\t</label>\n\t\t\t`;\n\t\t\tif (this.#isTransliterated())\n\t\t\t{\n\t\t\t\ttransliterateCheckbox.checked = true;\n\t\t\t}\n\n\t\t\tconst whitespaceInput = Tag.render`\n\t\t\t\t<input \n\t\t\t\t\tclass=\"ui-ctl-element ui-text-center\" \n\t\t\t\t\tsize=\"1\" maxlength=\"1\" \n\t\t\t\t\tvalue=\"${this.#getWhitespace()}\"\n\t\t\t\t>\n\t\t\t`;\n\t\t\tEvent.bind(whitespaceInput, 'input', this.#inputWhitespaceChar.bind(this));\n\n\t\t\tthis.transliterateWrapper = Tag.render`\n\t\t\t\t<div class=\"ui-ctl ui-ctl-checkbox ui-ctl-w100\">\n\t\t\t\t\t${whitespaceInput}\n\t\t\t\t\t<div class=\"ui-ctl-label-text\">${Loc.getMessage('CSD_WHITESPACE_CHARACTER_INPUT_TITLE')}</div>\n\t\t\t\t</div>\n\t\t\t`;\n\n\t\t\tif (!this.#isTransliterated())\n\t\t\t{\n\t\t\t\tDom.addClass(this.transliterateWrapper, 'ui-form-row-hidden');\n\t\t\t}\n\t\t}\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"ui-form-row\">\n\t\t\t\t<div class='ui-form-label'>\n\t\t\t\t\t<div class=\"ui-ctl-label-text\">${this.title}</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"ui-form-content\">\n\t\t\t\t\t${this.inputWrapper}\n\t\t\t\t\t${checkboxWrapper}\t\t\t\t\t\n\t\t\t\t\t${lowercaseCheckboxWrapper}\n\t\t\t\t\t${transliterateCheckboxWrapper}\n\t\t\t\t\t${this.transliterateWrapper}\n\t\t\t\t\t${this.hintWrapper}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\t#getTemplate(): string\n\t{\n\t\tconst value = this.section.getForm().getValue(this.id);\n\n\t\treturn Type.isStringFilled(value?.template) ? value.template : '';\n\t}\n\n\t#getHint(): string\n\t{\n\t\tconst value = this.section.getForm().getValue(this.id);\n\n\t\treturn Type.isStringFilled(value?.hint) ? value.hint : '';\n\t}\n\n\t#isInherited(): boolean\n\t{\n\t\tconst value = this.section.getForm().getValue(this.id);\n\n\t\treturn value?.inherited !== 'N';\n\t}\n\n\t#isTransliterated(): boolean\n\t{\n\t\tconst value = this.section.getForm().getValue(this.id);\n\n\t\treturn value?.transliterate === 'Y';\n\t}\n\n\t#isLowerCase(): boolean\n\t{\n\t\tconst value = this.section.getForm().getValue(this.id);\n\n\t\treturn value?.lowercase === 'Y';\n\t}\n\n\t#getWhitespace(): boolean\n\t{\n\t\tconst value = this.section.getForm().getValue(this.id);\n\n\t\treturn Type.isStringFilled(value?.whitespaceCharacter) ? value.whitespaceCharacter : '';\n\t}\n\n\t#toggleLowercase(event: Event): boolean\n\t{\n\t\tconst value = this.section.getForm().getValue(this.id);\n\t\tvalue.lowercase = event.target.checked ? 'Y' : 'N';\n\n\t\tif (Type.isStringFilled(value.template))\n\t\t{\n\t\t\tthis.refreshHint(value);\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t#toggleTransliterate(event: Event): SeoInput\n\t{\n\t\tconst checkboxValue = event.target.checked;\n\t\tif (checkboxValue)\n\t\t{\n\t\t\tDom.removeClass(this.transliterateWrapper, 'ui-form-row-hidden');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.addClass(this.transliterateWrapper, 'ui-form-row-hidden');\n\t\t}\n\n\t\tconst value = this.section.getForm().getValue(this.id);\n\t\tvalue.transliterate = checkboxValue ? 'Y' : 'N';\n\n\t\tif (Type.isStringFilled(value.template))\n\t\t{\n\t\t\tthis.refreshHint(value);\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t#inputWhitespaceChar(event: Event): boolean\n\t{\n\t\tconst value = this.section.getForm().getValue(this.id);\n\t\tvalue.whitespaceCharacter = event.target.value.slice(0, 1);\n\t\tif (Type.isStringFilled(value.template) && this.#isTransliterated())\n\t\t{\n\t\t\tthis.refreshHint(value);\n\t\t}\n\n\t\treturn value?.transliterate === 'Y';\n\t}\n\n\t#isExistedAttributes(): boolean\n\t{\n\t\tconst value = this.section.getForm().getValue(this.id);\n\n\t\treturn !this.#isReadOnly() && value?.isExistedAttributes;\n\t}\n\n\t#isExistedInheritedCheckbox(): boolean\n\t{\n\t\treturn !this.#isReadOnly() && !this.section.getForm().isCatalogMode();\n\t}\n\n\t#setTemplate(template: string): SeoInput\n\t{\n\t\tif (this.#isReadOnly())\n\t\t{\n\t\t\treturn this;\n\t\t}\n\n\t\tconst value = this.section.getForm().getValue(this.id);\n\t\tvalue.template = template;\n\t\tif (Type.isStringFilled(template))\n\t\t{\n\t\t\tthis.refreshHint(value);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tvalue.hint = '';\n\t\t\tthis.hintWrapper.innerHTML = '';\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t#toggleInherited(event: Event): SeoInput\n\t{\n\t\tif (this.#isReadOnly() || this.section.getForm().isCatalogMode())\n\t\t{\n\t\t\treturn this;\n\t\t}\n\n\t\tconst isChecked = event.target.checked;\n\t\tconst value = this.section.getForm().getValue(this.id);\n\n\t\tvalue.inherited = isChecked ? 'N' : 'Y';\n\t\tthis.input.disabled = !isChecked;\n\t\tif (isChecked)\n\t\t{\n\t\t\tDom.removeClass(this.inputWrapper, 'ui-ctl-disabled');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.addClass(this.inputWrapper, 'ui-ctl-disabled');\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t#isReadOnly(): boolean\n\t{\n\t\treturn this.section.getForm().isReadOnly();\n\t}\n\n\tonInput(event: Event): void\n\t{\n\t\tthis.#setTemplate(event.target.value);\n\t}\n\n\trefreshHint(template: ValueScheme): SeoInput\n\t{\n\t\tif (this.#isReadOnly())\n\t\t{\n\t\t\treturn this;\n\t\t}\n\n\t\tthis.section\n\t\t\t.getForm()\n\t\t\t.getHint(this.id, template)\n\t\t\t.then((result) => {\n\t\t\t\tconst value = this.section.getForm().getValue(this.id);\n\t\t\t\tvalue.hint = result.data;\n\t\t\t\tthis.hintWrapper.innerHTML = result.data;\n\t\t\t})\n\t\t;\n\n\t\treturn this;\n\t}\n\n\ttoggleTemplatesMenu(): void\n\t{\n\t\tthis.section.toggleInputMenu(this);\n\t}\n\n\tgetInput(): HTMLElement\n\t{\n\t\treturn this.input;\n\t}\n\n\taddTemplateValue(template: string): void\n\t{\n\t\tthis.getInput().value += template;\n\t\tthis.#setTemplate(this.getInput().value);\n\t}\n}","export class SeoDetailMode {\n\tstatic CATALOG = 'MODE_CATALOG';\n\tstatic SECTION = 'MODE_SECTION';\n\tstatic ELEMENT = 'MODE_ELEMENT';\n}","import {Loc, Text} from 'main.core';\nimport {Element} from \"./element\";\nimport {SectionType} from \"../types/section-type\";\nimport {SeoDetail} from \"../seo-detail\";\nimport type {SectionOptions} from \"../types/section-options\";\n\nexport class Section extends Element\n{\n\tconstructor(options: SectionOptions = {}, form: SeoDetail)\n\t{\n\t\tsuper(options, form);\n\n\t\tthis.type = SectionType.SECTION;\n\t}\n\n\tgetInheritedLabel(): string\n\t{\n\t\treturn Loc.getMessage('CSD_INHERIT_SECTION_OVERWRITE_CHECKBOX_INPUT_TITLE');\n\t}\n}","import {Event, Tag, Text, Type, Loc, Dom, Runtime} from 'main.core';\nimport {Base} from \"../fields-group/base\";\nimport {FieldScheme} from \"../types/field-scheme\";\n\nexport class CacheCheckbox\n{\n\tconstructor(settings: FieldScheme, section: Base)\n\t{\n\t\tthis.id = Text.encode(settings.ID);\n\t\tthis.title = Text.encode(settings.TITLE);\n\t\tthis.section = section;\n\t}\n\n\tlayout(): HTMLElement\n\t{\n\t\tconst checkbox = Tag.render`<input type=\"checkbox\" class=\"ui-ctl-element\">`;\n\t\tcheckbox.checked = this.#isChecked();\n\n\t\tEvent.bind(checkbox, 'change', this.#setValue.bind(this));\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"ui-form-row\">\n\t\t\t\t<div class='ui-form-label'>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"ui-form-content\">\n\t\t\t\t\t<label class=\"ui-ctl ui-ctl-checkbox ui-ctl-w100\">\n\t\t\t\t\t\t${checkbox}\n\t\t\t\t\t\t<div class=\"ui-ctl-label-text\">${this.title}</div>\n\t\t\t\t\t</label>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\t#isChecked(): boolean\n\t{\n\t\tconst value = this.section.getForm().getValue(this.id);\n\n\t\treturn value.clearCache === 'Y';\n\t}\n\n\t#setValue(event: Event): CacheCheckbox\n\t{\n\t\tconst value = this.section.getForm().getValue(this.id);\n\t\tvalue.clearCache = event.target.checked ? 'Y' : 'N';\n\n\t\treturn this;\n\t}\n}","import {Dom} from \"main.core\";\nimport {Base} from \"./base\";\nimport {CacheCheckbox} from \"../field/cache-checkbox\";\n\nexport class Management extends Base\n{\n\tgetWrapper(): HTMLElement\n\t{\n\t\tconst wrapper = super.getWrapper();\n\t\tconst field = new CacheCheckbox(this.fields['SEO_CLEAR_VALUES'], this);\n\n\t\tDom.append(field.layout(), wrapper);\n\n\t\treturn wrapper;\n\t}\n}","import type {SectionOptions} from \"./types/section-options\";\nimport type {FormOptions} from \"./types/form-options\";\nimport {ajax, Dom, Loc, Tag, Text} from 'main.core';\nimport {Base} from \"./fields-group/base\";\nimport {ValueScheme} from \"./types/value-scheme\";\nimport {SeoInput} from \"./field/seo-input\";\nimport {Menu} from \"main.popup\";\nimport {SeoDetailMode} from \"./types/seo-detail-mode\";\nimport {SectionType} from \"./types/section-type\";\nimport {Section} from \"./fields-group/section\";\nimport {Element} from \"./fields-group/element\";\nimport {Management} from \"./fields-group/managent\";\nimport \"ui.notification\";\n\nexport class SeoDetail\n{\n\tstatic instance: SeoDetail = null;\n\tstatic HElP_ARTICLE_CODE = 17013874;\n\n\t#isLocked: boolean = false;\n\tsections: Array<Base>;\n\tvalues: Array<ValueScheme>;\n\tdefaultValues: Array<ValueScheme>;\n\ttemplatePopup: Menu = null;\n\ttemplatePopupField: SeoInput = null;\n\n\tconstructor(settings: FormOptions)\n\t{\n\t\tthis.container = BX(settings.containerId);\n\t\tthis.form = this.container.querySelector('#' + settings.formId);\n\t\tthis.values = settings.values || {};\n\t\tthis.defaultValues = settings.values || {};\n\t\tthis.componentName = settings.componentName || '';\n\t\tthis.signedParameters = settings.signedParameters || '';\n\t\tthis.menuItems = settings.menuItems || [];\n\t\tthis.sections = [];\n\t\tthis.templatePopupField = null;\n\t\tthis.readOnly = settings.readOnly || false;\n\t\tthis.mode = settings.mode || '';\n\t\tthis.createSections(settings.schemeFields);\n\t}\n\n\tstatic create(settings): SeoDetail\n\t{\n\t\tSeoDetail.instance = new SeoDetail(settings);\n\n\t\treturn SeoDetail.instance\n\t}\n\n\tstatic onClickSave(): void\n\t{\n\t\tSeoDetail.instance.save();\n\t}\n\n\tstatic onSelectTemplate(template: string)\n\t{\n\t\tSeoDetail.instance.addInputTemplate(template);\n\t}\n\n\tstatic openSeoHelpPage(event: Event)\n\t{\n\t\tif(top.BX.Helper)\n\t\t{\n\t\t\ttop.BX.Helper.show(\"redirect=detail&code=\" + SeoDetail.HElP_ARTICLE_CODE);\n\t\t}\n\t}\n\n\tcreateSections(scheme: Array<SectionOptions>): SeoDetail\n\t{\n\t\tObject.keys(scheme).forEach((fieldCode) => {\n\t\t\tconst sectionOptions = scheme[fieldCode];\n\n\t\t\tlet section = null;\n\t\t\tif (sectionOptions.TYPE === SectionType.SECTION)\n\t\t\t{\n\t\t\t\tsection = new Section(sectionOptions, this)\n\t\t\t}\n\t\t\telse if (sectionOptions.TYPE === SectionType.ELEMENT)\n\t\t\t{\n\t\t\t\tsection = new Element(sectionOptions, this)\n\t\t\t}\n\t\t\telse if (sectionOptions.TYPE === SectionType.MANAGEMENT && !this.isReadOnly())\n\t\t\t{\n\t\t\t\tsection = new Management(sectionOptions, this)\n\t\t\t}\n\n\t\t\tif (section)\n\t\t\t{\n\t\t\t\tthis.sections.push(section);\n\t\t\t}\n\n\t\t});\n\n\t\treturn this;\n\t}\n\n\tlayout(): void\n\t{\n\t\tthis.sections.forEach((section) => {\n\t\t\tDom.append(section.layout(), this.form);\n\t\t});\n\t}\n\n\tgetValue(id: string): ValueScheme\n\t{\n\t\tthis.values[id] = this.values[id] || {}\n\n\t\treturn this.values[id];\n\t}\n\n\tgetHint(templateId: string, template: string): Promise\n\t{\n\t\treturn ajax.runComponentAction(\n\t\t\tthis.componentName,\n\t\t\t'getHint',\n\t\t\t{\n\t\t\t\tmode: 'class',\n\t\t\t\tsignedParameters: this.signedParameters,\n\t\t\t\tdata: {\n\t\t\t\t\ttemplateId,\n\t\t\t\t\ttemplate,\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t}\n\n\tgetSaveButton(): HTMLElement\n\t{\n\t\treturn this.container.querySelector('#ui-button-panel-save');\n\t}\n\n\tsave()\n\t{\n\t\tif (this.#isLocked)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.#isLocked = true;\n\t\tDom.addClass(this.getSaveButton(), 'ui-btn-wait')\n\t\tajax.runComponentAction(\n\t\t\tthis.componentName,\n\t\t\t'save',\n\t\t\t{\n\t\t\t\tmode: 'class',\n\t\t\t\tsignedParameters: this.signedParameters,\n\t\t\t\tdata: {\n\t\t\t\t\tvalues:this.values\n\t\t\t\t}\n\t\t\t}\n\t\t)\n\t\t\t.then(() => {\n\t\t\t\tthis.#isLocked = false;\n\n\t\t\t\tconst notificationOptions = {\n\t\t\t\t\tcloseButton: true,\n\t\t\t\t\tautoHideDelay: 3000,\n\t\t\t\t\tcontent: Tag.render`<div>${Loc.getMessage('CSD_SAVE_MESSAGE_NOTIFICATION')}</div>`,\n\t\t\t\t};\n\n\t\t\t\tconst notify = top.BX.UI.Notification.Center.notify(notificationOptions);\n\t\t\t\tnotify.show();\n\n\t\t\t\tthis.onFormCancel();\n\t\t\t})\n\t\t\t.catch(this.onError.bind(this))\n\t\t;\n\t}\n\n\thideInfoMessage(messageId: string)\n\t{\n\t\tajax.runComponentAction(\n\t\t\tthis.componentName,\n\t\t\t'hideInfoMessage',\n\t\t\t{\n\t\t\t\tmode: 'class',\n\t\t\t\tsignedParameters: this.signedParameters,\n\t\t\t\tdata: {\n\t\t\t\t\tmessageId\n\t\t\t\t}\n\t\t\t}\n\t\t)\n\t}\n\n\tonError(): void\n\t{\n\t\tDom.removeClass(this.getSaveButton(), \"ui-btn-wait\");\n\t\tthis.#isLocked = false;\n\t}\n\n\tisReadOnly(): boolean\n\t{\n\t\treturn this.readOnly;\n\t}\n\n\tgetFormFieldName(name): string\n\t{\n\t\treturn 'fields['+name+']';\n\t}\n\n\ttoggleInputMenu(section: Section, field: SeoInput): void\n\t{\n\t\tif (\n\t\t\tthis.templatePopupField\n\t\t\t&& this.templatePopup\n\t\t\t&& field.id !== this.templatePopupField\n\t\t)\n\t\t{\n\t\t\tthis.templatePopup.close();\n\t\t\tthis.templatePopup.destroy();\n\t\t\tthis.templatePopup = null;\n\t\t}\n\n\t\tif (!this.templatePopup)\n\t\t{\n\t\t\tthis.templatePopupField = field;\n\t\t\tconst items = this.getMenuItems(section.getType());\n\t\t\tthis.templatePopup = new Menu({\n\t\t\t\tbindElement: field.getInput(),\n\t\t\t\titems\n\t\t\t});\n\t\t}\n\n\t\tthis.templatePopup.toggle();\n\t}\n\n\thideInputMenu(): void\n\t{\n\t\tif (this.templatePopup)\n\t\t{\n\t\t\tthis.templatePopup.close();\n\t\t}\n\t}\n\n\taddInputTemplate(template: string): void\n\t{\n\t\tif (this.templatePopupField)\n\t\t{\n\t\t\tthis.templatePopupField.addTemplateValue(template);\n\t\t}\n\t\tif (this.templatePopup)\n\t\t{\n\t\t\tthis.templatePopup.close();\n\t\t}\n\t}\n\n\tgetMenuItems(type: string): []\n\t{\n\t\treturn Object.assign(this.menuItems[type]) ?? [];\n\t}\n\n\tonFormCancel(): void\n\t{\n\t\tBX.SidePanel.Instance.close();\n\t}\n\n\tisCatalogMode(): boolean\n\t{\n\t\treturn this.mode === SeoDetailMode.CATALOG;\n\t}\n\n\tisElementMode(): boolean\n\t{\n\t\treturn this.mode === SeoDetailMode.ELEMENT;\n\t}\n\n\tisSectionMode(): boolean\n\t{\n\t\treturn this.mode === SeoDetailMode.SECTION;\n\t}\n}"],"names":["Base","options","form","fields","FIELDS","title","TITLE","id","ID","type","Tag","render","Text","encode","getInfoWrapper","getWrapper","SectionType","Element","inputFields","Object","keys","forEach","fieldCode","fieldScheme","push","SeoInput","MESSAGE","message","MessageCard","header","HEADER","description","getInfoMessageDescription","DESCRIPTION","angle","hidden","HIDDEN","EventEmitter","subscribe","hideInfoMessage","ELEMENT","wrapper","field","Dom","append","layout","getLayout","moreLink","Loc","getMessage","Event","bind","SeoDetail","openSeoHelpPage","descriptionHtml","replace","querySelector","getForm","toggleInputMenu","isElementMode","setting","section","handleInput","Runtime","debounce","onInput","input","event","hideInputMenu","toggleTemplatesMenu","hintWrapper","menuButton","inputWrapper","inheritCheckbox","checkboxWrapper","getInheritedLabel","checked","isCatalogMode","addClass","disabled","lowercaseCheckboxWrapper","transliterateCheckboxWrapper","transliterateWrapper","lowercaseCheckbox","transliterateCheckbox","whitespaceInput","target","value","template","getHint","then","result","getValue","hint","data","innerHTML","getInput","Type","isStringFilled","inherited","transliterate","lowercase","whitespaceCharacter","refreshHint","checkboxValue","removeClass","slice","isExistedAttributes","isChecked","isReadOnly","SeoDetailMode","Section","SECTION","CacheCheckbox","settings","checkbox","_classPrivateMethodGet","clearCache","Management","container","BX","containerId","formId","values","defaultValues","componentName","signedParameters","menuItems","sections","templatePopupField","readOnly","mode","createSections","schemeFields","scheme","sectionOptions","TYPE","MANAGEMENT","templateId","ajax","runComponentAction","getSaveButton","notificationOptions","closeButton","autoHideDelay","content","notify","top","UI","Notification","Center","show","onFormCancel","onError","messageId","name","templatePopup","close","destroy","items","getMenuItems","getType","Menu","bindElement","toggle","addTemplateValue","assign","SidePanel","Instance","CATALOG","instance","save","addInputTemplate","Helper","HElP_ARTICLE_CODE"],"mappings":";;;;;KAOaA,IAAb;CAEC,kBACA;CAAA,QADYC,OACZ,uEADsC,EACtC;CAAA,QAD0CC,IAC1C;CAAA;CACC,SAAKA,IAAL,GAAYA,IAAZ;CACA,SAAKC,MAAL,GAAcF,OAAO,CAACG,MAAtB;CACA,SAAKC,KAAL,GAAaJ,OAAO,CAACK,KAArB;CACA,SAAKC,EAAL,GAAUN,OAAO,CAACO,EAAlB;CACA,SAAKC,IAAL,GAAY,IAAZ;CACA;;CATF;CAAA;CAAA,6BAYC;CACC,aAAOC,aAAG,CAACC,MAAX,8NAEqCC,cAAI,CAACC,MAAL,CAAY,KAAKR,KAAjB,CAFrC,EAGI,KAAKS,cAAL,EAHJ,EAII,KAAKC,UAAL,EAJJ;CAOA;CApBF;CAAA;CAAA,iCAuBC;CACC,aAAOL,aAAG,CAACC,MAAX;CACA;CAzBF;CAAA;CAAA,qCA4BC;CACC,aAAO,IAAP;CACA;CA9BF;CAAA;CAAA,8BAiCC;CACC,aAAO,KAAKT,IAAZ;CACA;CAnCF;CAAA;CAAA,8BAsCC;CACC,aAAO,KAAKO,IAAZ;CACA;CAxCF;CAAA;CAAA,wCA2CC;CACC,aAAO,EAAP;CACA;CA7CF;CAAA;CAAA;;KCLaO,WAAb;CAAA;CAAA;6BAAaA,wBAEK;6BAFLA,wBAGK;6BAHLA,2BAIQ;;;KCGRC,OAAb;CAAA;;CAIC,qBACA;CAAA;;CAAA,QADYhB,OACZ,uEADsC,EACtC;CAAA,QAD0CC,IAC1C;CAAA;CACC,yGAAMD,OAAN,EAAeC,IAAf;CAEA,UAAKgB,WAAL,GAAmB,EAAnB;CAEAC,IAAAA,MAAM,CAACC,IAAP,CAAYnB,OAAO,CAACG,MAApB,EAA4BiB,OAA5B,CAAoC,UAACC,SAAD,EAAe;CAClD,UAAMC,WAAW,GAAGtB,OAAO,CAACG,MAAR,CAAekB,SAAf,CAApB;;CACA,YAAKJ,WAAL,CAAiBM,IAAjB,CAAsB,IAAIC,QAAJ,CAAaF,WAAb,4CAAtB;CACA,KAHD;;CAKA,QAAItB,OAAO,CAACyB,OAAZ,EACA;CACC,YAAKC,OAAL,GAAe,IAAIC,0BAAJ,CAAgB;CAC9BrB,QAAAA,EAAE,EAAEN,OAAO,CAACyB,OAAR,CAAgBlB,EADU;CAE9BqB,QAAAA,MAAM,EAAEjB,cAAI,CAACC,MAAL,CAAYZ,OAAO,CAACyB,OAAR,CAAgBI,MAA5B,CAFsB;CAG9BC,QAAAA,WAAW,EAAE,MAAKC,yBAAL,CAA+B/B,OAAO,CAACyB,OAAR,CAAgBO,WAA/C,CAHiB;CAI9BC,QAAAA,KAAK,EAAE,KAJuB;CAK9BC,QAAAA,MAAM,EAAElC,OAAO,CAACyB,OAAR,CAAgBU,MAAhB,KAA2B;CALL,OAAhB,CAAf;CAQAC,MAAAA,6BAAY,CAACC,SAAb,CAAuB,MAAKX,OAA5B,EAAqC,SAArC,EAAgD,YAAM;CACrD,cAAKzB,IAAL,CAAUqC,eAAV,CAA0B,MAAKZ,OAAL,CAAapB,EAAvC;CACA,OAFD;CAGA;;CAED,UAAKE,IAAL,GAAYO,WAAW,CAACwB,OAAxB;CAzBD;CA0BC;;CA/BF;CAAA;CAAA,iCAkCC;CACC,UAAMC,OAAO,kGAAb;CAEA,WAAKvB,WAAL,CAAiBG,OAAjB,CAAyB,UAACqB,KAAD,EAAW;CACnCC,QAAAA,aAAG,CAACC,MAAJ,CAAWF,KAAK,CAACG,MAAN,EAAX,EAA2BJ,OAA3B;CACA,OAFD;CAIA,aAAOA,OAAP;CACA;CA1CF;CAAA;CAAA,qCA6CC;CACC,aAAO,KAAKd,OAAL,GAAe,KAAKA,OAAL,CAAamB,SAAb,EAAf,GAA0C,IAAjD;CACA;CA/CF;CAAA;CAAA,8CAiD2Bf,WAjD3B,EAkDC;CACC,UAAMgB,QAAQ,GAAGrC,aAAG,CAACC,MAAP,mIAAiDqC,aAAG,CAACC,UAAJ,CAAe,0CAAf,CAAjD,CAAd;CAEAC,MAAAA,eAAK,CAACC,IAAN,CAAWJ,QAAX,EAAqB,OAArB,EAA8BK,SAAS,CAACC,eAAxC;CACA,UAAMC,eAAe,GAAG5C,aAAG,CAACC,MAAP,qHACbC,cAAI,CAACC,MAAL,CAAYkB,WAAZ,EAAyBwB,OAAzB,CAAiC,aAAjC,EAAgD,yBAAhD,CADa,CAArB;CAIAZ,MAAAA,aAAG,CAACY,OAAJ,CAAYD,eAAe,CAACE,aAAhB,CAA8B,WAA9B,CAAZ,EAAwDT,QAAxD;CAEA,aAAOO,eAAP;CACA;CA7DF;CAAA;CAAA,oCA+DiBZ,KA/DjB,EAgEC;CACC,WAAKe,OAAL,GAAeC,eAAf,CAA+B,IAA/B,EAAqChB,KAArC;CACA;CAlEF;CAAA;CAAA,wCAqEC;CACC,UAAI,CAAC,KAAKxC,IAAL,CAAUyD,aAAV,EAAL,EACA;CACC,eAAOX,aAAG,CAACC,UAAJ,CAAe,4DAAf,CAAP;CACA;;CAED,aAAOD,aAAG,CAACC,UAAJ,CAAe,oDAAf,CAAP;CACA;CA5EF;CAAA;CAAA,EAA6BjD,IAA7B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACJA,KAAayB,QAAb;CAQC,sBACA;CAAA,QADYmC,OACZ,uEADmC,EACnC;CAAA,QADuCC,OACvC;CAAA;;CAAA;;CAAA;;CAAA;;CAAA;;CAAA;;CAAA;;CAAA;;CAAA;;CAAA;;CAAA;;CAAA;;CAAA;;CAAA;;CAAA;;CACC,SAAKtD,EAAL,GAAUK,cAAI,CAACC,MAAL,CAAY+C,OAAO,CAACpD,EAApB,CAAV;CACA,SAAKH,KAAL,GAAaO,cAAI,CAACC,MAAL,CAAY+C,OAAO,CAACtD,KAApB,CAAb;CACA,SAAKuD,OAAL,GAAeA,OAAf;CACA,SAAKC,WAAL,GAAmBC,iBAAO,CAACC,QAAR,CAAiB,KAAKC,OAAtB,EAA+B,GAA/B,EAAoC,IAApC,CAAnB;CACA;;CAdF;CAAA;CAAA,6BAiBC;CAAA;;CACC,WAAKC,KAAL,GAAaxD,aAAG,CAACC,MAAjB,+JACuC,KAAKJ,EAD5C,EAC0DK,cAAI,CAACC,MAAL,wBAAY,IAAZ,oCAAY,IAAZ,EAD1D;;CAIA,UAAI,wBAAC,IAAD,kCAAC,IAAD,CAAJ,EACA;CACCqC,QAAAA,eAAK,CAACC,IAAN,CAAW,KAAKe,KAAhB,EAAuB,SAAvB,EAAkC,UAACC,KAAD,EAAkB;CACnD,UAAA,KAAI,CAACN,OAAL,CAAaJ,OAAb,GAAuBW,aAAvB;CACA,SAFD;CAGAlB,QAAAA,eAAK,CAACC,IAAN,CAAW,KAAKe,KAAhB,EAAuB,OAAvB,EAAgC,KAAKJ,WAArC;CACAZ,QAAAA,eAAK,CAACC,IAAN,CAAW,KAAKe,KAAhB,EAAuB,OAAvB,EAAgC,KAAKG,mBAAL,CAAyBlB,IAAzB,CAA8B,IAA9B,CAAhC;CACA;;CAED,UAAI,CAAC,KAAKmB,WAAV,EACA;CACC,aAAKA,WAAL,GAAmB5D,aAAG,CAACC,MAAvB,sLAA6F,IAA7F,4BAA6F,IAA7F;CACA;;CAED,UAAI4D,UAAU,GAAG,IAAjB;;CACA,UAAI,wBAAC,IAAD,kCAAC,IAAD,CAAJ,EACA;CACCA,QAAAA,UAAU,GAAG7D,aAAG,CAACC,MAAP,oJAAV;CACA;;CAED,WAAK6D,YAAL,GAAoB9D,aAAG,CAACC,MAAxB,+MAEI4D,UAFJ,EAGI,KAAKL,KAHT;CAOA,UAAIO,eAAe,GAAG,IAAtB;CACA,UAAIC,eAAe,GAAG,IAAtB;;CACA,iCAAI,IAAJ,kEAAI,IAAJ,GACA;CACCD,QAAAA,eAAe,GAAG/D,aAAG,CAACC,MAAP,qIAAf;CACAuC,QAAAA,eAAK,CAACC,IAAN,CAAWsB,eAAX,EAA4B,QAA5B,EAAsC,kEAAsBtB,IAAtB,CAA2B,IAA3B,CAAtC;CAEAuB,QAAAA,eAAe,GAAGhE,aAAG,CAACC,MAAP,mPAEX8D,eAFW,EAGoB,KAAKZ,OAAL,CAAac,iBAAb,EAHpB,CAAf;CAMA;;CAED,UAAIF,eAAe,IAAI,wBAAC,IAAD,oCAAC,IAAD,CAAvB,EACA;CACCA,QAAAA,eAAe,CAACG,OAAhB,GAA0B,IAA1B;CACA,OAHD,MAIK,IAAI,CAAC,KAAKf,OAAL,CAAaJ,OAAb,GAAuBoB,aAAvB,EAAD,2BAA2C,IAA3C,kCAA2C,IAA3C,CAAJ,EACL;CACClC,QAAAA,aAAG,CAACmC,QAAJ,CAAa,KAAKN,YAAlB,EAAgC,iBAAhC;CACA,aAAKN,KAAL,CAAWa,QAAX,GAAsB,IAAtB;CACA;;CAED,UAAIC,wBAAwB,GAAG,IAA/B;CACA,UAAIC,4BAA4B,GAAG,IAAnC;CACA,WAAKC,oBAAL,GAA4B,IAA5B;;CACA,iCAAI,IAAJ,oDAAI,IAAJ,GACA;CACC,YAAMC,iBAAiB,GAAGzE,aAAG,CAACC,MAAP,qIAAvB;CACAuC,QAAAA,eAAK,CAACC,IAAN,CAAWgC,iBAAX,EAA8B,QAA9B,EAAwC,kEAAsBhC,IAAtB,CAA2B,IAA3B,CAAxC;CACA6B,QAAAA,wBAAwB,GAAGtE,aAAG,CAACC,MAAP,mPAEpBwE,iBAFoB,EAGWnC,aAAG,CAACC,UAAJ,CAAe,oCAAf,CAHX,CAAxB;;CAMA,mCAAI,IAAJ,oCAAI,IAAJ,GACA;CACCkC,UAAAA,iBAAiB,CAACP,OAAlB,GAA4B,IAA5B;CACA;;CAED,YAAMQ,qBAAqB,GAAG1E,aAAG,CAACC,MAAP,qIAA3B;CACAuC,QAAAA,eAAK,CAACC,IAAN,CAAWiC,qBAAX,EAAkC,QAAlC,EAA4C,0EAA0BjC,IAA1B,CAA+B,IAA/B,CAA5C;CACA8B,QAAAA,4BAA4B,GAAGvE,aAAG,CAACC,MAAP,qPAExByE,qBAFwB,EAGOpC,aAAG,CAACC,UAAJ,CAAe,wCAAf,CAHP,CAA5B;;CAMA,mCAAI,IAAJ,8CAAI,IAAJ,GACA;CACCmC,UAAAA,qBAAqB,CAACR,OAAtB,GAAgC,IAAhC;CACA;;CAED,YAAMS,eAAe,GAAG3E,aAAG,CAACC,MAAP,sQAIV,IAJU,wCAIV,IAJU,EAArB;CAOAuC,QAAAA,eAAK,CAACC,IAAN,CAAWkC,eAAX,EAA4B,OAA5B,EAAqC,0EAA0BlC,IAA1B,CAA+B,IAA/B,CAArC;CAEA,aAAK+B,oBAAL,GAA4BxE,aAAG,CAACC,MAAhC,iPAEI0E,eAFJ,EAGmCrC,aAAG,CAACC,UAAJ,CAAe,sCAAf,CAHnC;;CAOA,YAAI,wBAAC,IAAD,8CAAC,IAAD,CAAJ,EACA;CACCN,UAAAA,aAAG,CAACmC,QAAJ,CAAa,KAAKI,oBAAlB,EAAwC,oBAAxC;CACA;CACD;;CAED,aAAOxE,aAAG,CAACC,MAAX,4ZAGoC,KAAKN,KAHzC,EAMK,KAAKmE,YANV,EAOKE,eAPL,EAQKM,wBARL,EASKC,4BATL,EAUK,KAAKC,oBAVV,EAWK,KAAKZ,WAXV;CAeA;CA9IF;CAAA;CAAA,4BAySSH,KAzST,EA0SC;CACC,2EAAkBA,KAAK,CAACmB,MAAN,CAAaC,KAA/B;CACA;CA5SF;CAAA;CAAA,gCA8SaC,QA9Sb,EA+SC;CAAA;;CACC,iCAAI,IAAJ,kCAAI,IAAJ,GACA;CACC,eAAO,IAAP;CACA;;CAED,WAAK3B,OAAL,CACEJ,OADF,GAEEgC,OAFF,CAEU,KAAKlF,EAFf,EAEmBiF,QAFnB,EAGEE,IAHF,CAGO,UAACC,MAAD,EAAY;CACjB,YAAMJ,KAAK,GAAG,MAAI,CAAC1B,OAAL,CAAaJ,OAAb,GAAuBmC,QAAvB,CAAgC,MAAI,CAACrF,EAArC,CAAd;;CACAgF,QAAAA,KAAK,CAACM,IAAN,GAAaF,MAAM,CAACG,IAApB;CACA,QAAA,MAAI,CAACxB,WAAL,CAAiByB,SAAjB,GAA6BJ,MAAM,CAACG,IAApC;CACA,OAPF;CAUA,aAAO,IAAP;CACA;CAhUF;CAAA;CAAA,0CAmUC;CACC,WAAKjC,OAAL,CAAaH,eAAb,CAA6B,IAA7B;CACA;CArUF;CAAA;CAAA,+BAwUC;CACC,aAAO,KAAKQ,KAAZ;CACA;CA1UF;CAAA;CAAA,qCA4UkBsB,QA5UlB,EA6UC;CACC,WAAKQ,QAAL,GAAgBT,KAAhB,IAAyBC,QAAzB;;CACA,2EAAkB,KAAKQ,QAAL,GAAgBT,KAAlC;CACA;CAhVF;CAAA;CAAA;;0BAiJC;CACC,MAAMA,KAAK,GAAG,KAAK1B,OAAL,CAAaJ,OAAb,GAAuBmC,QAAvB,CAAgC,KAAKrF,EAArC,CAAd;CAEA,SAAO0F,cAAI,CAACC,cAAL,CAAoBX,KAApB,aAAoBA,KAApB,uBAAoBA,KAAK,CAAEC,QAA3B,IAAuCD,KAAK,CAACC,QAA7C,GAAwD,EAA/D;CACA;;sBAGD;CACC,MAAMD,KAAK,GAAG,KAAK1B,OAAL,CAAaJ,OAAb,GAAuBmC,QAAvB,CAAgC,KAAKrF,EAArC,CAAd;CAEA,SAAO0F,cAAI,CAACC,cAAL,CAAoBX,KAApB,aAAoBA,KAApB,uBAAoBA,KAAK,CAAEM,IAA3B,IAAmCN,KAAK,CAACM,IAAzC,GAAgD,EAAvD;CACA;;0BAGD;CACC,MAAMN,KAAK,GAAG,KAAK1B,OAAL,CAAaJ,OAAb,GAAuBmC,QAAvB,CAAgC,KAAKrF,EAArC,CAAd;CAEA,SAAO,CAAAgF,KAAK,SAAL,IAAAA,KAAK,WAAL,YAAAA,KAAK,CAAEY,SAAP,MAAqB,GAA5B;CACA;;+BAGD;CACC,MAAMZ,KAAK,GAAG,KAAK1B,OAAL,CAAaJ,OAAb,GAAuBmC,QAAvB,CAAgC,KAAKrF,EAArC,CAAd;CAEA,SAAO,CAAAgF,KAAK,SAAL,IAAAA,KAAK,WAAL,YAAAA,KAAK,CAAEa,aAAP,MAAyB,GAAhC;CACA;;0BAGD;CACC,MAAMb,KAAK,GAAG,KAAK1B,OAAL,CAAaJ,OAAb,GAAuBmC,QAAvB,CAAgC,KAAKrF,EAArC,CAAd;CAEA,SAAO,CAAAgF,KAAK,SAAL,IAAAA,KAAK,WAAL,YAAAA,KAAK,CAAEc,SAAP,MAAqB,GAA5B;CACA;;4BAGD;CACC,MAAMd,KAAK,GAAG,KAAK1B,OAAL,CAAaJ,OAAb,GAAuBmC,QAAvB,CAAgC,KAAKrF,EAArC,CAAd;CAEA,SAAO0F,cAAI,CAACC,cAAL,CAAoBX,KAApB,aAAoBA,KAApB,uBAAoBA,KAAK,CAAEe,mBAA3B,IAAkDf,KAAK,CAACe,mBAAxD,GAA8E,EAArF;CACA;;4BAEgBnC,OACjB;CACC,MAAMoB,KAAK,GAAG,KAAK1B,OAAL,CAAaJ,OAAb,GAAuBmC,QAAvB,CAAgC,KAAKrF,EAArC,CAAd;CACAgF,EAAAA,KAAK,CAACc,SAAN,GAAkBlC,KAAK,CAACmB,MAAN,CAAaV,OAAb,GAAuB,GAAvB,GAA6B,GAA/C;;CAEA,MAAIqB,cAAI,CAACC,cAAL,CAAoBX,KAAK,CAACC,QAA1B,CAAJ,EACA;CACC,SAAKe,WAAL,CAAiBhB,KAAjB;CACA;;CAED,SAAO,IAAP;CACA;;gCAEoBpB,OACrB;CACC,MAAMqC,aAAa,GAAGrC,KAAK,CAACmB,MAAN,CAAaV,OAAnC;;CACA,MAAI4B,aAAJ,EACA;CACC7D,IAAAA,aAAG,CAAC8D,WAAJ,CAAgB,KAAKvB,oBAArB,EAA2C,oBAA3C;CACA,GAHD,MAKA;CACCvC,IAAAA,aAAG,CAACmC,QAAJ,CAAa,KAAKI,oBAAlB,EAAwC,oBAAxC;CACA;;CAED,MAAMK,KAAK,GAAG,KAAK1B,OAAL,CAAaJ,OAAb,GAAuBmC,QAAvB,CAAgC,KAAKrF,EAArC,CAAd;CACAgF,EAAAA,KAAK,CAACa,aAAN,GAAsBI,aAAa,GAAG,GAAH,GAAS,GAA5C;;CAEA,MAAIP,cAAI,CAACC,cAAL,CAAoBX,KAAK,CAACC,QAA1B,CAAJ,EACA;CACC,SAAKe,WAAL,CAAiBhB,KAAjB;CACA;;CAED,SAAO,IAAP;CACA;;gCAEoBpB,OACrB;CACC,MAAMoB,KAAK,GAAG,KAAK1B,OAAL,CAAaJ,OAAb,GAAuBmC,QAAvB,CAAgC,KAAKrF,EAArC,CAAd;CACAgF,EAAAA,KAAK,CAACe,mBAAN,GAA4BnC,KAAK,CAACmB,MAAN,CAAaC,KAAb,CAAmBmB,KAAnB,CAAyB,CAAzB,EAA4B,CAA5B,CAA5B;;CACA,MAAIT,cAAI,CAACC,cAAL,CAAoBX,KAAK,CAACC,QAA1B,4BAAuC,IAAvC,8CAAuC,IAAvC,CAAJ,EACA;CACC,SAAKe,WAAL,CAAiBhB,KAAjB;CACA;;CAED,SAAO,CAAAA,KAAK,SAAL,IAAAA,KAAK,WAAL,YAAAA,KAAK,CAAEa,aAAP,MAAyB,GAAhC;CACA;;kCAGD;CACC,MAAMb,KAAK,GAAG,KAAK1B,OAAL,CAAaJ,OAAb,GAAuBmC,QAAvB,CAAgC,KAAKrF,EAArC,CAAd;CAEA,SAAO,wBAAC,IAAD,kCAAC,IAAD,MAAuBgF,KAAvB,aAAuBA,KAAvB,uBAAuBA,KAAK,CAAEoB,mBAA9B,CAAP;CACA;;yCAGD;CACC,SAAO,wBAAC,IAAD,kCAAC,IAAD,KAAuB,CAAC,KAAK9C,OAAL,CAAaJ,OAAb,GAAuBoB,aAAvB,EAA/B;CACA;;wBAEYW,UACb;CACC,6BAAI,IAAJ,kCAAI,IAAJ,GACA;CACC,WAAO,IAAP;CACA;;CAED,MAAMD,KAAK,GAAG,KAAK1B,OAAL,CAAaJ,OAAb,GAAuBmC,QAAvB,CAAgC,KAAKrF,EAArC,CAAd;CACAgF,EAAAA,KAAK,CAACC,QAAN,GAAiBA,QAAjB;;CACA,MAAIS,cAAI,CAACC,cAAL,CAAoBV,QAApB,CAAJ,EACA;CACC,SAAKe,WAAL,CAAiBhB,KAAjB;CACA,GAHD,MAKA;CACCA,IAAAA,KAAK,CAACM,IAAN,GAAa,EAAb;CACA,SAAKvB,WAAL,CAAiByB,SAAjB,GAA6B,EAA7B;CACA;;CAED,SAAO,IAAP;CACA;;4BAEgB5B,OACjB;CACC,MAAI,sEAAsB,KAAKN,OAAL,CAAaJ,OAAb,GAAuBoB,aAAvB,EAA1B,EACA;CACC,WAAO,IAAP;CACA;;CAED,MAAM+B,SAAS,GAAGzC,KAAK,CAACmB,MAAN,CAAaV,OAA/B;CACA,MAAMW,KAAK,GAAG,KAAK1B,OAAL,CAAaJ,OAAb,GAAuBmC,QAAvB,CAAgC,KAAKrF,EAArC,CAAd;CAEAgF,EAAAA,KAAK,CAACY,SAAN,GAAkBS,SAAS,GAAG,GAAH,GAAS,GAApC;CACA,OAAK1C,KAAL,CAAWa,QAAX,GAAsB,CAAC6B,SAAvB;;CACA,MAAIA,SAAJ,EACA;CACCjE,IAAAA,aAAG,CAAC8D,WAAJ,CAAgB,KAAKjC,YAArB,EAAmC,iBAAnC;CACA,GAHD,MAKA;CACC7B,IAAAA,aAAG,CAACmC,QAAJ,CAAa,KAAKN,YAAlB,EAAgC,iBAAhC;CACA;;CAED,SAAO,IAAP;CACA;;yBAGD;CACC,SAAO,KAAKX,OAAL,CAAaJ,OAAb,GAAuBoD,UAAvB,EAAP;CACA;;KC5SWC,aAAb;CAAA;CAAA;6BAAaA,0BACK;6BADLA,0BAEK;6BAFLA,0BAGK;;KCGLC,OAAb;CAAA;;CAEC,qBACA;CAAA;;CAAA,QADY9G,OACZ,uEADsC,EACtC;CAAA,QAD0CC,IAC1C;CAAA;CACC,yGAAMD,OAAN,EAAeC,IAAf;CAEA,UAAKO,IAAL,GAAYO,WAAW,CAACgG,OAAxB;CAHD;CAIC;;CAPF;CAAA;CAAA,wCAUC;CACC,aAAOhE,aAAG,CAACC,UAAJ,CAAe,oDAAf,CAAP;CACA;CAZF;CAAA;CAAA,EAA6BhC,OAA7B;;;;;;;;;;;;;;ACFA,KAAagG,aAAb;CAEC,yBAAYC,QAAZ,EAAmCrD,OAAnC,EACA;CAAA;;CAAA;;CAAA;;CACC,SAAKtD,EAAL,GAAUK,cAAI,CAACC,MAAL,CAAYqG,QAAQ,CAAC1G,EAArB,CAAV;CACA,SAAKH,KAAL,GAAaO,cAAI,CAACC,MAAL,CAAYqG,QAAQ,CAAC5G,KAArB,CAAb;CACA,SAAKuD,OAAL,GAAeA,OAAf;CACA;;CAPF;CAAA;CAAA,6BAUC;CACC,UAAMsD,QAAQ,GAAGzG,aAAG,CAACC,MAAP,uIAAd;CACAwG,MAAAA,QAAQ,CAACvC,OAAT,4BAAmB,IAAnB,gCAAmB,IAAnB;CAEA1B,MAAAA,eAAK,CAACC,IAAN,CAAWgE,QAAX,EAAqB,QAArB,EAA+BC,sDAAejE,IAAf,CAAoB,IAApB,CAA/B;CAEA,aAAOzC,aAAG,CAACC,MAAX,4ZAMMwG,QANN,EAOqC,KAAK9G,KAP1C;CAYA;CA5BF;CAAA;CAAA;;wBA+BC;CACC,MAAMkF,KAAK,GAAG,KAAK1B,OAAL,CAAaJ,OAAb,GAAuBmC,QAAvB,CAAgC,KAAKrF,EAArC,CAAd;CAEA,SAAOgF,KAAK,CAAC8B,UAAN,KAAqB,GAA5B;CACA;;qBAESlD,OACV;CACC,MAAMoB,KAAK,GAAG,KAAK1B,OAAL,CAAaJ,OAAb,GAAuBmC,QAAvB,CAAgC,KAAKrF,EAArC,CAAd;CACAgF,EAAAA,KAAK,CAAC8B,UAAN,GAAmBlD,KAAK,CAACmB,MAAN,CAAaV,OAAb,GAAuB,GAAvB,GAA6B,GAAhD;CAEA,SAAO,IAAP;CACA;;KC3CW0C,UAAb;CAAA;;CAAA;CAAA;CAAA;CAAA;;CAAA;CAAA;CAAA,iCAGC;CACC,UAAM7E,OAAO,qGAAb;CACA,UAAMC,KAAK,GAAG,IAAIuE,aAAJ,CAAkB,KAAK9G,MAAL,CAAY,kBAAZ,CAAlB,EAAmD,IAAnD,CAAd;CAEAwC,MAAAA,aAAG,CAACC,MAAJ,CAAWF,KAAK,CAACG,MAAN,EAAX,EAA2BJ,OAA3B;CAEA,aAAOA,OAAP;CACA;CAVF;CAAA;CAAA,EAAgCzC,IAAhC;;;;;;;;;;ACUA,KAAaoD,SAAb;CAYC,qBAAY8D,QAAZ,EACA;CAAA;;CAAA;CAAA;CAAA,aARqB;CAQrB;;CAAA,uDAJsB,IAItB;CAAA,4DAH+B,IAG/B;CACC,SAAKK,SAAL,GAAiBC,EAAE,CAACN,QAAQ,CAACO,WAAV,CAAnB;CACA,SAAKvH,IAAL,GAAY,KAAKqH,SAAL,CAAe/D,aAAf,CAA6B,MAAM0D,QAAQ,CAACQ,MAA5C,CAAZ;CACA,SAAKC,MAAL,GAAcT,QAAQ,CAACS,MAAT,IAAmB,EAAjC;CACA,SAAKC,aAAL,GAAqBV,QAAQ,CAACS,MAAT,IAAmB,EAAxC;CACA,SAAKE,aAAL,GAAqBX,QAAQ,CAACW,aAAT,IAA0B,EAA/C;CACA,SAAKC,gBAAL,GAAwBZ,QAAQ,CAACY,gBAAT,IAA6B,EAArD;CACA,SAAKC,SAAL,GAAiBb,QAAQ,CAACa,SAAT,IAAsB,EAAvC;CACA,SAAKC,QAAL,GAAgB,EAAhB;CACA,SAAKC,kBAAL,GAA0B,IAA1B;CACA,SAAKC,QAAL,GAAgBhB,QAAQ,CAACgB,QAAT,IAAqB,KAArC;CACA,SAAKC,IAAL,GAAYjB,QAAQ,CAACiB,IAAT,IAAiB,EAA7B;CACA,SAAKC,cAAL,CAAoBlB,QAAQ,CAACmB,YAA7B;CACA;;CA1BF;CAAA;CAAA,mCAqDgBC,MArDhB,EAsDC;CAAA;;CACCnH,MAAAA,MAAM,CAACC,IAAP,CAAYkH,MAAZ,EAAoBjH,OAApB,CAA4B,UAACC,SAAD,EAAe;CAC1C,YAAMiH,cAAc,GAAGD,MAAM,CAAChH,SAAD,CAA7B;CAEA,YAAIuC,OAAO,GAAG,IAAd;;CACA,YAAI0E,cAAc,CAACC,IAAf,KAAwBxH,WAAW,CAACgG,OAAxC,EACA;CACCnD,UAAAA,OAAO,GAAG,IAAIkD,OAAJ,CAAYwB,cAAZ,EAA4B,KAA5B,CAAV;CACA,SAHD,MAIK,IAAIA,cAAc,CAACC,IAAf,KAAwBxH,WAAW,CAACwB,OAAxC,EACL;CACCqB,UAAAA,OAAO,GAAG,IAAI5C,OAAJ,CAAYsH,cAAZ,EAA4B,KAA5B,CAAV;CACA,SAHI,MAIA,IAAIA,cAAc,CAACC,IAAf,KAAwBxH,WAAW,CAACyH,UAApC,IAAkD,CAAC,KAAI,CAAC5B,UAAL,EAAvD,EACL;CACChD,UAAAA,OAAO,GAAG,IAAIyD,UAAJ,CAAeiB,cAAf,EAA+B,KAA/B,CAAV;CACA;;CAED,YAAI1E,OAAJ,EACA;CACC,UAAA,KAAI,CAACmE,QAAL,CAAcxG,IAAd,CAAmBqC,OAAnB;CACA;CAED,OAtBD;CAwBA,aAAO,IAAP;CACA;CAhFF;CAAA;CAAA,6BAmFC;CAAA;;CACC,WAAKmE,QAAL,CAAc3G,OAAd,CAAsB,UAACwC,OAAD,EAAa;CAClClB,QAAAA,aAAG,CAACC,MAAJ,CAAWiB,OAAO,CAAChB,MAAR,EAAX,EAA6B,MAAI,CAAC3C,IAAlC;CACA,OAFD;CAGA;CAvFF;CAAA;CAAA,6BAyFUK,EAzFV,EA0FC;CACC,WAAKoH,MAAL,CAAYpH,EAAZ,IAAkB,KAAKoH,MAAL,CAAYpH,EAAZ,KAAmB,EAArC;CAEA,aAAO,KAAKoH,MAAL,CAAYpH,EAAZ,CAAP;CACA;CA9FF;CAAA;CAAA,4BAgGSmI,UAhGT,EAgG6BlD,QAhG7B,EAiGC;CACC,aAAOmD,cAAI,CAACC,kBAAL,CACN,KAAKf,aADC,EAEN,SAFM,EAGN;CACCM,QAAAA,IAAI,EAAE,OADP;CAECL,QAAAA,gBAAgB,EAAE,KAAKA,gBAFxB;CAGChC,QAAAA,IAAI,EAAE;CACL4C,UAAAA,UAAU,EAAVA,UADK;CAELlD,UAAAA,QAAQ,EAARA;CAFK;CAHP,OAHM,CAAP;CAYA;CA9GF;CAAA;CAAA,oCAiHC;CACC,aAAO,KAAK+B,SAAL,CAAe/D,aAAf,CAA6B,uBAA7B,CAAP;CACA;CAnHF;CAAA;CAAA,2BAsHC;CAAA;;CACC,4CAAI,IAAJ,cACA;CACC;CACA;;CAED,yDAAiB,IAAjB;CACAb,MAAAA,aAAG,CAACmC,QAAJ,CAAa,KAAK+D,aAAL,EAAb,EAAmC,aAAnC;CACAF,MAAAA,cAAI,CAACC,kBAAL,CACC,KAAKf,aADN,EAEC,MAFD,EAGC;CACCM,QAAAA,IAAI,EAAE,OADP;CAECL,QAAAA,gBAAgB,EAAE,KAAKA,gBAFxB;CAGChC,QAAAA,IAAI,EAAE;CACL6B,UAAAA,MAAM,EAAC,KAAKA;CADP;CAHP,OAHD,EAWEjC,IAXF,CAWO,YAAM;CACX,0CAAA,MAAI,aAAa,KAAb,CAAJ;CAEA,YAAMoD,mBAAmB,GAAG;CAC3BC,UAAAA,WAAW,EAAE,IADc;CAE3BC,UAAAA,aAAa,EAAE,IAFY;CAG3BC,UAAAA,OAAO,EAAEvI,aAAG,CAACC,MAAN,qGAAoBqC,aAAG,CAACC,UAAJ,CAAe,+BAAf,CAApB;CAHoB,SAA5B;CAMA,YAAMiG,MAAM,GAAGC,GAAG,CAAC3B,EAAJ,CAAO4B,EAAP,CAAUC,YAAV,CAAuBC,MAAvB,CAA8BJ,MAA9B,CAAqCJ,mBAArC,CAAf;CACAI,QAAAA,MAAM,CAACK,IAAP;;CAEA,QAAA,MAAI,CAACC,YAAL;CACA,OAxBF,WAyBQ,KAAKC,OAAL,CAAatG,IAAb,CAAkB,IAAlB,CAzBR;CA2BA;CAzJF;CAAA;CAAA,oCA2JiBuG,SA3JjB,EA4JC;CACCf,MAAAA,cAAI,CAACC,kBAAL,CACC,KAAKf,aADN,EAEC,iBAFD,EAGC;CACCM,QAAAA,IAAI,EAAE,OADP;CAECL,QAAAA,gBAAgB,EAAE,KAAKA,gBAFxB;CAGChC,QAAAA,IAAI,EAAE;CACL4D,UAAAA,SAAS,EAATA;CADK;CAHP,OAHD;CAWA;CAxKF;CAAA;CAAA,8BA2KC;CACC/G,MAAAA,aAAG,CAAC8D,WAAJ,CAAgB,KAAKoC,aAAL,EAAhB,EAAsC,aAAtC;CACA,yDAAiB,KAAjB;CACA;CA9KF;CAAA;CAAA,iCAiLC;CACC,aAAO,KAAKX,QAAZ;CACA;CAnLF;CAAA;CAAA,qCAqLkByB,IArLlB,EAsLC;CACC,aAAO,YAAUA,IAAV,GAAe,GAAtB;CACA;CAxLF;CAAA;CAAA,oCA0LiB9F,OA1LjB,EA0LmCnB,KA1LnC,EA2LC;CACC,UACC,KAAKuF,kBAAL,IACG,KAAK2B,aADR,IAEGlH,KAAK,CAACnC,EAAN,KAAa,KAAK0H,kBAHtB,EAKA;CACC,aAAK2B,aAAL,CAAmBC,KAAnB;CACA,aAAKD,aAAL,CAAmBE,OAAnB;CACA,aAAKF,aAAL,GAAqB,IAArB;CACA;;CAED,UAAI,CAAC,KAAKA,aAAV,EACA;CACC,aAAK3B,kBAAL,GAA0BvF,KAA1B;CACA,YAAMqH,KAAK,GAAG,KAAKC,YAAL,CAAkBnG,OAAO,CAACoG,OAAR,EAAlB,CAAd;CACA,aAAKL,aAAL,GAAqB,IAAIM,eAAJ,CAAS;CAC7BC,UAAAA,WAAW,EAAEzH,KAAK,CAACsD,QAAN,EADgB;CAE7B+D,UAAAA,KAAK,EAALA;CAF6B,SAAT,CAArB;CAIA;;CAED,WAAKH,aAAL,CAAmBQ,MAAnB;CACA;CAlNF;CAAA;CAAA,oCAqNC;CACC,UAAI,KAAKR,aAAT,EACA;CACC,aAAKA,aAAL,CAAmBC,KAAnB;CACA;CACD;CA1NF;CAAA;CAAA,qCA4NkBrE,QA5NlB,EA6NC;CACC,UAAI,KAAKyC,kBAAT,EACA;CACC,aAAKA,kBAAL,CAAwBoC,gBAAxB,CAAyC7E,QAAzC;CACA;;CACD,UAAI,KAAKoE,aAAT,EACA;CACC,aAAKA,aAAL,CAAmBC,KAAnB;CACA;CACD;CAtOF;CAAA;CAAA,iCAwOcpJ,IAxOd,EAyOC;CAAA;;CACC,+BAAOU,MAAM,CAACmJ,MAAP,CAAc,KAAKvC,SAAL,CAAetH,IAAf,CAAd,CAAP,2DAA8C,EAA9C;CACA;CA3OF;CAAA;CAAA,mCA8OC;CACC+G,MAAAA,EAAE,CAAC+C,SAAH,CAAaC,QAAb,CAAsBX,KAAtB;CACA;CAhPF;CAAA;CAAA,oCAmPC;CACC,aAAO,KAAK1B,IAAL,KAAcrB,aAAa,CAAC2D,OAAnC;CACA;CArPF;CAAA;CAAA,oCAwPC;CACC,aAAO,KAAKtC,IAAL,KAAcrB,aAAa,CAACtE,OAAnC;CACA;CA1PF;CAAA;CAAA,oCA6PC;CACC,aAAO,KAAK2F,IAAL,KAAcrB,aAAa,CAACE,OAAnC;CACA;CA/PF;CAAA;CAAA,2BA4BeE,QA5Bf,EA6BC;CACC9D,MAAAA,SAAS,CAACsH,QAAV,GAAqB,IAAItH,SAAJ,CAAc8D,QAAd,CAArB;CAEA,aAAO9D,SAAS,CAACsH,QAAjB;CACA;CAjCF;CAAA;CAAA,kCAoCC;CACCtH,MAAAA,SAAS,CAACsH,QAAV,CAAmBC,IAAnB;CACA;CAtCF;CAAA;CAAA,qCAwCyBnF,QAxCzB,EAyCC;CACCpC,MAAAA,SAAS,CAACsH,QAAV,CAAmBE,gBAAnB,CAAoCpF,QAApC;CACA;CA3CF;CAAA;CAAA,oCA6CwBrB,KA7CxB,EA8CC;CACC,UAAGgF,GAAG,CAAC3B,EAAJ,CAAOqD,MAAV,EACA;CACC1B,QAAAA,GAAG,CAAC3B,EAAJ,CAAOqD,MAAP,CAActB,IAAd,CAAmB,0BAA0BnG,SAAS,CAAC0H,iBAAvD;CACA;CACD;CAnDF;CAAA;CAAA;6BAAa1H,uBAEiB;6BAFjBA,gCAGe;;;;;;;;"}