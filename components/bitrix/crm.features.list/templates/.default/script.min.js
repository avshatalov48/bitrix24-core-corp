BX.ready((()=>{const e=document.querySelectorAll('.crm-features-list [data-role="feature-switcher"]');[...e].forEach((e=>{e.innerHTML="";const r=new BX.UI.Switcher({id:`crm-feature-list-item-${e.dataset.id}`,checked:e.dataset.checked==="Y",handlers:{toggled:()=>{r.setLoading(true);BX.ajax.runComponentAction("bitrix:crm.features.list",r.isChecked()?"enableFeature":"disableFeature",{mode:"class",data:{featureId:e.dataset.id}}).then((e=>{r.setLoading(false);if(e.errors&&e.errors.length>0){BX.UI.Notification.Center.notify({content:e.errors[0]?.message});console.error(e)}}),(e=>{r.setLoading(false);if(e.errors&&e.errors.length>0){BX.UI.Notification.Center.notify({content:e.errors[0]?.message});console.error(e)}}))}}});r.renderTo(e)}));const r=document.querySelector('.crm-features-list-item [data-role="tour-switcher"]');if(r){const e=new BX.UI.Switcher({id:"crm-feature-tours-switcher",checked:r.dataset.checked==="Y",handlers:{toggled:()=>{e.setLoading(true);BX.ajax.runComponentAction("bitrix:crm.features.list",e.isChecked()?"enableTours":"disableTours",{mode:"class"}).then((r=>{e.setLoading(false);if(r.errors&&r.errors.length>0){BX.UI.Notification.Center.notify({content:r.errors[0]?.message});console.error(r)}}),(r=>{e.setLoading(false);if(r.errors&&r.errors.length>0){BX.UI.Notification.Center.notify({content:r.errors[0]?.message});console.error(r)}}))}}});e.renderTo(r)}const t=document.querySelectorAll('.crm-features-list [data-role="tour-reset"]');[...t].forEach((e=>{BX.bind(e,"click",(r=>{const t=e.dataset.tourId;if(BX.Dom.hasClass(e,"ui-btn-clock")){return}BX.Dom.addClass(e,"ui-btn-clock");BX.ajax.runComponentAction("bitrix:crm.features.list","resetTour",{mode:"class",data:{tourId:t}}).then((r=>{BX.Dom.removeClass(e,"ui-btn-clock");if(r.errors&&r.errors.length>0){BX.UI.Notification.Center.notify({content:r.errors[0]?.message});console.error(r)}else{BX.Dom.addClass(e,"ui-btn-icon-success");setTimeout((()=>{BX.Dom.removeClass(e,"ui-btn-icon-success")}),3e3)}}),(r=>{BX.Dom.removeClass(e,"ui-btn-clock");if(r.errors&&r.errors.length>0){BX.UI.Notification.Center.notify({content:r.errors[0]?.message});console.error(r)}}))}))}));const o=document.querySelectorAll(".crm-features-list-item-copy[data-url]");[...o].forEach((e=>{BX.Event.bind(e,"click",(r=>{const t=e.dataset.url;BX.clipboard.copy(t);BX.UI.Notification.Center.notify({content:BX.message("crmLinkCopiedToClipboard")})}))}))}));
//# sourceMappingURL=script.map.js