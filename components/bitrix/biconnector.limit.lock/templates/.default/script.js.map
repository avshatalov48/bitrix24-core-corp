{"version":3,"file":"script.js","sources":["script.es6.js"],"sourcesContent":["import { Tag, Reflection } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { Popup } from 'main.popup';\nimport { Button } from 'ui.buttons';\nimport { BannerDispatcher } from 'ui.banner-dispatcher';\n\ntype LimitPopupParams = {\n\ttitle: number,\n\tcontent: string,\n\tlicenseButtonText: string,\n\tlaterButtonText: string,\n\tlicenseUrl: string,\n\tfullLock: 'Y' | 'N',\n};\n\nclass LimitLockPopup\n{\n\t#title: string = '';\n\t#content: string = '';\n\t#licenseButtonText: string = '';\n\t#laterButtonText: string = '';\n\t#licenseUrl: string = '';\n\t#popupClassName: string = 'biconnector-limit-lock';\n\t#fullLock: boolean = false;\n\n\tconstructor(params: LimitPopupParams)\n\t{\n\t\tthis.#init(params);\n\t\tthis.#show();\n\t}\n\n\t#init(params: LimitPopupParams)\n\t{\n\t\tthis.#title = params.title || '';\n\t\tthis.#content = params.content || '';\n\t\tthis.#licenseButtonText = params.licenseButtonText || '';\n\t\tthis.#laterButtonText = params.laterButtonText || '';\n\t\tthis.#licenseUrl = params.licenseUrl;\n\t\tthis.#fullLock = params.fullLock === 'Y';\n\t}\n\n\t#show()\n\t{\n\t\tBannerDispatcher.high.toQueue((onDone) => {\n\t\t\tconst popupButtons = [];\n\n\t\t\tif (this.#licenseButtonText)\n\t\t\t{\n\t\t\t\tpopupButtons.push(new Button({\n\t\t\t\t\ttext: this.#licenseButtonText,\n\t\t\t\t\tcolor: Button.Color.SUCCESS,\n\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\ttop.location.href = this.#licenseUrl;\n\t\t\t\t\t},\n\t\t\t\t}));\n\t\t\t}\n\n\t\t\tpopupButtons.push(new Button({\n\t\t\t\ttext: this.#laterButtonText,\n\t\t\t\tcolor: Button.Color.LINK,\n\t\t\t\tonclick: () => {\n\t\t\t\t\tpopup.close();\n\t\t\t\t},\n\t\t\t}));\n\n\t\t\tconst popupContent = Tag.render`\n\t\t\t<div class=\"biconnector-limit-popup-wrap\">\n\t\t\t\t<div class=\"biconnector-limit-popup\">\n\t\t\t\t\t<div class=\"biconnector-limit-pic\">\n\t\t\t\t\t\t<div class=\"biconnector-limit-pic-round\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"biconnector-limit-text\">${this.#content}</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\t\tconst popup = new Popup({\n\t\t\t\ttitleBar: this.#title,\n\t\t\t\tcontent: popupContent,\n\t\t\t\toverlay: true,\n\t\t\t\tclassName: this.#popupClassName,\n\t\t\t\tcloseIcon: true,\n\t\t\t\tlightShadow: true,\n\t\t\t\toffsetLeft: 100,\n\t\t\t\tbuttons: popupButtons,\n\t\t\t});\n\n\t\t\tif (this.#fullLock)\n\t\t\t{\n\t\t\t\tpopup.subscribe('onClose', () => {\n\t\t\t\t\tif (BX.SidePanel.Instance.isOpen())\n\t\t\t\t\t{\n\t\t\t\t\t\tBX.SidePanel.Instance.close();\n\t\t\t\t\t}\n\t\t\t\t\tEventEmitter.emit('BiConnector:LimitPopup.Lock.onClose');\n\t\t\t\t\tonDone();\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tpopup.subscribe('onClose', () => {\n\t\t\t\t\tEventEmitter.emit('BiConnector:LimitPopup.Warning.onClose');\n\t\t\t\t\tonDone();\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tpopup.show();\n\t\t});\n\t}\n}\n\nReflection.namespace('BX.BIConnector').LimitLockPopup = LimitLockPopup;\n"],"names":["LimitLockPopup","params","title","content","licenseButtonText","laterButtonText","licenseUrl","fullLock","BannerDispatcher","high","toQueue","onDone","popupButtons","push","Button","text","color","Color","SUCCESS","onclick","top","location","href","LINK","popup","close","popupContent","Tag","render","Popup","titleBar","overlay","className","closeIcon","lightShadow","offsetLeft","buttons","subscribe","BX","SidePanel","Instance","isOpen","EventEmitter","emit","show","Reflection","namespace"],"mappings":";;;;;;;;;AAAA,CAIwD;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA,IAWlDA,cAAc,GAUnB,wBAAYC,OAAwB,EACpC;GAAA;GAAA;GAAA;GAAA;KAAA;KAAA,OATiB;;GAAE;KAAA;KAAA,OACA;;GAAE;KAAA;KAAA,OACQ;;GAAE;KAAA;KAAA,OACJ;;GAAE;KAAA;KAAA,OACP;;GAAE;KAAA;KAAA,OACE;;GAAwB;KAAA;KAAA,OAC7B;;GAIpB,2BAAI,sBAAJ,IAAI,EAAOA,OAAM;GACjB,2BAAI,sBAAJ,IAAI;CACL,CAAC;CAAA,gBAEKA,MAAwB,EAC9B;GACC,sCAAI,UAAUA,MAAM,CAACC,KAAK,IAAI,EAAE;GAChC,sCAAI,YAAYD,MAAM,CAACE,OAAO,IAAI,EAAE;GACpC,sCAAI,sBAAsBF,MAAM,CAACG,iBAAiB,IAAI,EAAE;GACxD,sCAAI,oBAAoBH,MAAM,CAACI,eAAe,IAAI,EAAE;GACpD,sCAAI,eAAeJ,MAAM,CAACK,UAAU;GACpC,sCAAI,aAAaL,MAAM,CAACM,QAAQ,KAAK,GAAG;CACzC;CAAC,kBAGD;GAAA;GACCC,oCAAgB,CAACC,IAAI,CAACC,OAAO,CAAC,UAACC,MAAM,EAAK;KACzC,IAAMC,YAAY,GAAG,EAAE;KAEvB,sCAAI,KAAI,uBACR;OACCA,YAAY,CAACC,IAAI,CAAC,IAAIC,iBAAM,CAAC;SAC5BC,IAAI,oCAAE,KAAI,qBAAmB;SAC7BC,KAAK,EAAEF,iBAAM,CAACG,KAAK,CAACC,OAAO;SAC3BC,OAAO,EAAE,mBAAM;WACdC,GAAG,CAACC,QAAQ,CAACC,IAAI,qCAAG,KAAI,cAAY;;QAErC,CAAC,CAAC;;KAGJV,YAAY,CAACC,IAAI,CAAC,IAAIC,iBAAM,CAAC;OAC5BC,IAAI,oCAAE,KAAI,mBAAiB;OAC3BC,KAAK,EAAEF,iBAAM,CAACG,KAAK,CAACM,IAAI;OACxBJ,OAAO,EAAE,mBAAM;SACdK,KAAK,CAACC,KAAK,EAAE;;MAEd,CAAC,CAAC;KAEH,IAAMC,YAAY,GAAGC,aAAG,CAACC,MAAM,2bAMS,KAAI,YAG5C;KAEA,IAAMJ,KAAK,GAAG,IAAIK,gBAAK,CAAC;OACvBC,QAAQ,oCAAE,KAAI,SAAO;OACrB3B,OAAO,EAAEuB,YAAY;OACrBK,OAAO,EAAE,IAAI;OACbC,SAAS,oCAAE,KAAI,kBAAgB;OAC/BC,SAAS,EAAE,IAAI;OACfC,WAAW,EAAE,IAAI;OACjBC,UAAU,EAAE,GAAG;OACfC,OAAO,EAAExB;MACT,CAAC;KAEF,sCAAI,KAAI,cACR;OACCY,KAAK,CAACa,SAAS,CAAC,SAAS,EAAE,YAAM;SAChC,IAAIC,EAAE,CAACC,SAAS,CAACC,QAAQ,CAACC,MAAM,EAAE,EAClC;WACCH,EAAE,CAACC,SAAS,CAACC,QAAQ,CAACf,KAAK,EAAE;;SAE9BiB,6BAAY,CAACC,IAAI,CAAC,qCAAqC,CAAC;SACxDhC,MAAM,EAAE;QACR,CAAC;MACF,MAED;OACCa,KAAK,CAACa,SAAS,CAAC,SAAS,EAAE,YAAM;SAChCK,6BAAY,CAACC,IAAI,CAAC,wCAAwC,CAAC;SAC3DhC,MAAM,EAAE;QACR,CAAC;;KAGHa,KAAK,CAACoB,IAAI,EAAE;IACZ,CAAC;CACH;AAGDC,qBAAU,CAACC,SAAS,CAAC,gBAAgB,CAAC,CAAC9C,cAAc,GAAGA,cAAc;;;;"}