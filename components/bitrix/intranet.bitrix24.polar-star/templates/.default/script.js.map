{"version":3,"file":"script.js","sources":["src/release-slider.js","src/release-ear.js","src/polar-star.js"],"sourcesContent":["import { Cache, Type, Tag, Event } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\n\nexport default class ReleaseSlider extends EventEmitter\n{\n\t#id:string = 'intranet:polar-star';\n\t#windowMessageHandler: Function = null;\n\n\tconstructor(options)\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Intranet.Bitrix24.ReleaseSlider');\n\n\t\toptions = Type.isPlainObject(options) ? options : {};\n\t\tthis.subscribeFromOptions(options.events);\n\n\t\tthis.url = Type.isStringFilled(options.url) ? options.url : 'about:blank';\n\t\tthis.sliderOptions = Type.isPlainObject(options.sliderOptions) ? options.sliderOptions : {};\n\n\t\tthis.#windowMessageHandler = this.#handleWindowMessage.bind(this);\n\t\tthis.html = new Cache.MemoryCache();\n\t}\n\n\tshow(): void\n\t{\n\t\tif (this.isOpen())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst defaultOptions = {\n\t\t\twidth: 1100,\n\t\t\tcustomLeftBoundary: 0,\n\t\t};\n\t\tconst options = Object.assign({}, defaultOptions, this.sliderOptions);\n\t\tconst userEvents = Type.isPlainObject(options.events) ? options.events : {};\n\n\t\toptions.events = {\n\t\t\tonCloseComplete: () => {\n\t\t\t\tEvent.unbind(window, 'message', this.#windowMessageHandler);\n\t\t\t\tthis.emit('onCloseComplete');\n\t\t\t},\n\t\t\tonOpenComplete: () => {\n\t\t\t\tEvent.bind(window, 'message', this.#windowMessageHandler);\n\t\t\t}\n\t\t};\n\n\t\toptions.contentCallback = (slider) => {\n\t\t\tfor (const eventName in userEvents)\n\t\t\t{\n\t\t\t\tif (Type.isFunction(userEvents[eventName]))\n\t\t\t\t{\n\t\t\t\t\tEventEmitter.subscribe(\n\t\t\t\t\t\tslider,\n\t\t\t\t\t\tBX.SidePanel.Slider.getEventFullName(eventName),\n\t\t\t\t\t\tuserEvents[eventName]\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tif (this.getFrame().src !== this.url)\n\t\t\t\t{\n\t\t\t\t\tthis.getFrame().src = this.url;\n\t\t\t\t}\n\n\t\t\t\tEvent.bind(this.getFrame(), 'load', this.#handleFrameLoad.bind(this));\n\n\t\t\t\tresolve(this.#getContent());\n\t\t\t});\n\t\t};\n\n\t\tBX.SidePanel.Instance.open(this.getId(), options);\n\t}\n\n\thide(): void\n\t{\n\t\tconst slider = this.getSlider();\n\t\tif (slider)\n\t\t{\n\t\t\tslider.close();\n\t\t}\n\t}\n\n\tisOpen(): boolean\n\t{\n\t\treturn this.getSlider() && this.getSlider().isOpen();\n\t}\n\n\tgetId(): string\n\t{\n\t\treturn this.#id;\n\t}\n\n\tgetSlider(): Object\n\t{\n\t\treturn BX.SidePanel.Instance.getSlider(this.getId());\n\t}\n\n\tgetFrame(): HTMLIFrameElement\n\t{\n\t\treturn this.html.remember('frame', () => {\n\t\t\treturn Tag.render`<iframe src=\"about:blank\" class=\"intranet-polar-star-iframe\"></iframe>`;\n\t\t});\n\t}\n\n\t#getContent(): HTMLElement\n\t{\n\t\treturn this.html.remember('content', () => {\n\t\t\treturn Tag.render`<div class=\"intranet-polar-star-container\">${this.getFrame()}</div>`;\n\t\t});\n\t}\n\n\t#handleFrameLoad()\n\t{\n\t\tthis.emit('onLoad');\n\t}\n\n\t#handleWindowMessage(event)\n\t{\n\t\tconst frameOrigin = new URL(this.url);\n\t\tif (event.origin !== frameOrigin.origin)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.emit('onMessage', { message: event.data, event });\n\t}\n}","import { Tag, Type, Dom } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\n\nexport default class ReleaseEar extends EventEmitter\n{\n\tcontainer: HTMLElement = null;\n\n\tconstructor(options)\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Intranet.Bitrix24.ReleaseEar');\n\n\t\toptions = Type.isPlainObject(options) ? options : {};\n\t\tthis.zone = Type.isStringFilled(options.zone) ? options.zone : 'en';\n\t\tthis.subscribeFromOptions(options.events);\n\t}\n\n\tshow(animate = false)\n\t{\n\t\tif (animate)\n\t\t{\n\t\t\tDom.removeClass(this.getContainer(), '--hidden');\n\t\t\trequestAnimationFrame(() => {\n\t\t\t\trequestAnimationFrame(() => {\n\t\t\t\t\tDom.removeClass(this.getContainer(), '--hidden');\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.removeClass(this.getContainer(), '--hidden');\n\t\t}\n\t}\n\n\thide()\n\t{\n\t\tDom.addClass(this.getContainer(), '--hidden');\n\t}\n\n\tgetContainer(): HTMLElement\n\t{\n\t\tif (this.container === null)\n\t\t{\n\t\t\tthis.container = Tag.render`\n\t\t\t\t<div class=\"intranet-polar-star-ear\" onclick=\"${this.handleClick.bind(this)}\">\n\t\t\t\t\t<div class=\"intranet-polar-star-button\"><i></i></div>\n\t\t\t\t\t<div class=\"intranet-polar-star-logo --${this.zone}\"></div>\n\t\t\t\t</div>\n\t\t\t`;\n\n\t\t\tDom.append(this.container, document.body);\n\t\t}\n\n\t\treturn this.container;\n\t}\n\n\thandleClick()\n\t{\n\t\tthis.emit('onClick');\n\t}\n\n}","import ReleaseSlider from './release-slider';\nimport ReleaseEar from './release-ear';\nimport { Type, ajax as Ajax } from 'main.core';\nimport type { BaseEvent } from 'main.core.events';\n\nexport default class PolarStar\n{\n\t#deactivated = false;\n\n\tconstructor(options)\n\t{\n\t\toptions = Type.isPlainObject(options) ? options : {};\n\n\t\tif (!Type.isStringFilled(options.url))\n\t\t{\n\t\t\tthrow new Error('PolarStar: the \"url\" parameter is required.');\n\t\t}\n\n\t\tthis.slider = new ReleaseSlider({\n\t\t\turl: options.url,\n\t\t\tsliderOptions: options.sliderOptions,\n\t\t\tevents: {\n\t\t\t\tonCloseComplete: this.#handleSliderClose.bind(this),\n\t\t\t\tonMessage: this.#handleFrameMessage.bind(this),\n\t\t\t},\n\t\t});\n\n\t\tthis.ear = new ReleaseEar({\n\t\t\tzone: options.zone,\n\t\t\tevents: {\n\t\t\t\tonClick: this.#handleEarClick.bind(this),\n\t\t\t},\n\t\t});\n\t}\n\n\tshow(mode = 'ear'): void\n\t{\n\t\tif (mode === 'slider')\n\t\t{\n\t\t\tthis.getSlider().show();\n\t\t\tthis.#runAction('show', { context: 'auto' });\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.getEar().show();\n\t\t}\n\t}\n\n\tgetSlider(): ReleaseSlider\n\t{\n\t\treturn this.slider;\n\t}\n\n\tgetEar(): ReleaseEar\n\t{\n\t\treturn this.ear;\n\t}\n\n\t#runAction(action, labels = {}, data = {}): Promise\n\t{\n\t\treturn Ajax.runComponentAction('bitrix:intranet.bitrix24.polar-star', action, {\n\t\t\tmode: 'class',\n\t\t\tdata,\n\t\t\tanalyticsLabel: Object.assign({\n\t\t\t\tmodule: 'intranet',\n\t\t\t\tservice: 'polar-star',\n\t\t\t\taction: action,\n\t\t\t}, labels),\n\t\t})\n\t}\n\n\t#handleSliderClose(): void\n\t{\n\t\tthis.getEar().show(true);\n\t\tthis.#runAction('close');\n\t}\n\n\t#handleEarClick(): void\n\t{\n\t\tthis.getEar().hide();\n\t\tthis.getSlider().show();\n\t\tthis.#runAction('show', { context: 'ear-click' });\n\t}\n\n\t#handleFrameMessage(event: BaseEvent): void\n\t{\n\t\tconst { message } = event.getData();\n\t\tif (!Type.isPlainObject(message))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (message.command === 'endOfScroll' && this.#deactivated === false)\n\t\t{\n\t\t\tthis.#deactivated = true;\n\t\t\tthis.#runAction('deactivate').catch(() => {\n\t\t\t\tthis.#deactivated = false;\n\t\t\t});\n\t\t}\n\n\t\tif (message.command === 'openHelper')\n\t\t{\n\t\t\tif (BX.Helper)\n\t\t\t{\n\t\t\t\tBX.Helper.show(message.options);\n\t\t\t}\n\t\t}\n\t}\n}"],"names":["ReleaseSlider","EventEmitter","constructor","options","setEventNamespace","Type","isPlainObject","subscribeFromOptions","events","url","isStringFilled","sliderOptions","bind","html","Cache","MemoryCache","show","isOpen","defaultOptions","width","customLeftBoundary","Object","assign","userEvents","onCloseComplete","Event","unbind","window","emit","onOpenComplete","contentCallback","slider","eventName","isFunction","subscribe","BX","SidePanel","Slider","getEventFullName","Promise","resolve","reject","getFrame","src","Instance","open","getId","hide","getSlider","close","remember","Tag","render","event","frameOrigin","URL","origin","message","data","ReleaseEar","container","zone","animate","Dom","removeClass","getContainer","requestAnimationFrame","addClass","handleClick","append","document","body","PolarStar","Error","onMessage","ear","onClick","mode","context","getEar","action","labels","Ajax","runComponentAction","analyticsLabel","module","service","getData","command","catch","Helper"],"mappings":"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"}