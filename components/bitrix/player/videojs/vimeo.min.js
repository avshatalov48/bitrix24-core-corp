(function(e,t){if(typeof define==="function"&&define.amd){define(["video.js"],function(i){return e.Vimeo=t(i)})}else if(typeof module==="object"&&module.exports){module.exports=e.Vimeo=t(require("video.js"))}else{e.Vimeo=t(e.videojs)}})(this,function(e){"use strict";var t={UNSTARTED:-1,ENDED:0,PLAYING:1,PAUSED:2,BUFFERING:3};var i=e.getComponent("Tech");var n=e.extend(i,{constructor:function(e,t){i.call(this,e,t);if(e.poster!=""){this.setPoster(e.poster)}this.setSrc(this.options_.source.src,true);setTimeout(function(){this.el_.parentNode.className+=" vjs-vimeo"}.bind(this))},dispose:function(){this.el_.parentNode.className=this.el_.parentNode.className.replace(" vjs-vimeo","")},createEl:function(){this.vimeo={};this.vimeoInfo={};this.baseUrl="https://player.vimeo.com/video/";this.baseApiUrl="http://www.vimeo.com/api/v2/video/";this.videoId=n.parseUrl(this.options_.source.src).videoId;this.iframe=document.createElement("iframe");this.iframe.setAttribute("id",this.options_.techId);this.iframe.setAttribute("title","Vimeo Video Player");this.iframe.setAttribute("class","vimeoplayer");this.iframe.setAttribute("src",this.baseUrl+this.videoId+"?api=1&player_id="+this.options_.techId);this.iframe.setAttribute("frameborder","0");this.iframe.setAttribute("scrolling","no");this.iframe.setAttribute("marginWidth","0");this.iframe.setAttribute("marginHeight","0");this.iframe.setAttribute("webkitAllowFullScreen","0");this.iframe.setAttribute("mozallowfullscreen","0");this.iframe.setAttribute("allowFullScreen","0");var e=document.createElement("div");e.setAttribute("style","margin:0 auto;padding-bottom:56.25%;width:100%;height:0;position:relative;overflow:hidden;");e.setAttribute("class","vimeoFrame");e.appendChild(this.iframe);if(!o&&!this.options_.ytControls){var t=document.createElement("div");t.setAttribute("class","vjs-iframe-blocker");t.setAttribute("style","position:absolute;top:0;left:0;width:100%;height:100%");t.onclick=function(){this.onPause()}.bind(this);e.appendChild(t)}if(n.isApiReady){this.initPlayer()}else{n.apiReadyQueue.push(this)}if(this.options_.poster==""){$.getJSON(this.baseApiUrl+this.videoId+".json?callback=?",{format:"json"},function(e){return function(t){e.setPoster(t[0].thumbnail_large)}}(this))}return e},initPlayer:function(){var e=this;var i=n.parseUrl(this.options_.source.src).videoId;if(this.vimeo&&this.vimeo.api){this.vimeo.api("unload");delete this.vimeo}e.vimeo=$f(e.iframe);e.vimeoInfo={state:t.UNSTARTED,volume:1,muted:false,muteVolume:1,time:0,duration:0,buffered:0,url:e.baseUrl+e.videoId,error:null};this.vimeo.addEvent("ready",function(t){e.onReady();e.vimeo.addEvent("loadProgress",function(t,i){e.onLoadProgress(t)});e.vimeo.addEvent("playProgress",function(t,i){e.onPlayProgress(t)});e.vimeo.addEvent("play",function(t){e.onPlay()});e.vimeo.addEvent("pause",function(t){e.onPause()});e.vimeo.addEvent("finish",function(t){e.onFinish()});e.vimeo.addEvent("seek",function(t,i){e.onSeek(t)})})},onReady:function(){this.isReady_=true;this.triggerReady();this.trigger("loadedmetadata");if(this.startMuted){this.setMuted(true);this.startMuted=false}},onLoadProgress:function(e){var t=!this.vimeoInfo.duration;this.vimeoInfo.duration=e.duration;this.vimeoInfo.buffered=e.percent;this.trigger("progress");if(t)this.trigger("durationchange")},onPlayProgress:function(e){this.vimeoInfo.time=e.seconds;this.trigger("timeupdate")},onPlay:function(){this.vimeoInfo.state=t.PLAYING;this.trigger("play")},onPause:function(){this.vimeoInfo.state=t.PAUSED;this.trigger("pause")},onFinish:function(){this.vimeoInfo.state=t.ENDED;this.trigger("ended")},onSeek:function(e){this.trigger("seeking");this.vimeoInfo.time=e.seconds;this.trigger("timeupdate");this.trigger("seeked")},onError:function(e){this.error=e;this.trigger("error")},error:function(){switch(this.errorNumber){case 2:return{code:"Unable to find the video"};case 5:return{code:"Error while trying to play the video"};case 100:return{code:"Unable to find the video"};case 101:case 150:return{code:"Playback on other Websites has been disabled by the video owner."}}return{code:"Vimeo unknown error ("+this.errorNumber+")"}},src:function(){return this.source},poster:function(){return this.poster_},setPoster:function(e){this.poster_=e},setSrc:function(e){if(!e||!e.src){return}this.source=e;this.url=n.parseUrl(e.src);if(!this.options_.poster){if(this.url.videoId){$.getJSON(this.baseApiUrl+this.videoId+".json?callback=?",{format:"json"},function(e){return function(t){e.poster_=t[0].thumbnail_small}}(this));this.checkHighResPoster()}}if(this.options_.autoplay&&!o){if(this.isReady_){this.play()}else{this.playOnReady=true}}},supportsFullScreen:function(){return true},load:function(){},play:function(){this.vimeo.api("play")},pause:function(){this.vimeo.api("pause")},paused:function(){return this.vimeoInfo.state!==t.PLAYING&&this.vimeoInfo.state!==t.BUFFERING},currentTime:function(){return this.vimeoInfo.time||0},setCurrentTime:function(e){this.vimeo.api("seekTo",e);this.player_.trigger("timeupdate")},duration:function(){return this.vimeoInfo.duration||0},buffered:function(){return e.createTimeRange(0,this.vimeoInfo.buffered*this.vimeoInfo.duration||0)},volume:function(){return this.vimeoInfo.muted?this.vimeoInfo.muteVolume:this.vimeoInfo.volume},setVolume:function(e){this.vimeo.api("setvolume",e);this.vimeoInfo.volume=e;this.player_.trigger("volumechange")},currentSrc:function(){return this.el_.src},muted:function(){return this.vimeoInfo.muted||false},setMuted:function(e){if(e){this.vimeoInfo.muteVolume=this.vimeoInfo.volume;this.setVolume(0)}else{this.setVolume(this.vimeoInfo.muteVolume)}this.vimeoInfo.muted=e;this.player_.trigger("volumechange")},checkHighResPoster:function(){var e="";try{$.getJSON(this.baseApiUrl+this.videoId+".json?callback=?",{format:"json"},function(e){return function(t){e=t[0].thumbnail_large}}(e));var t=new Image;t.onload=function(){if("naturalHeight"in this){if(this.naturalHeight<=90||this.naturalWidth<=120){this.onerror();return}}else if(this.height<=90||this.width<=120){this.onerror();return}this.poster_=e;this.trigger("posterchange")}.bind(this);t.onerror=function(){};t.src=e}catch(i){}}});n.isSupported=function(){return true};n.canPlaySource=function(e){return e.type==="video/vimeo"};var o=/(iPad|iPhone|iPod|Android)/g.test(navigator.userAgent);n.parseUrl=function(e){var t={videoId:null};var i=/^.*(vimeo\.com\/)((channels\/[A-z]+\/)|(groups\/[A-z]+\/videos\/))?([0-9]+)/;var n=e.match(i);if(n){t.videoId=n[5]}return t};function r(){var e=".vjs-vimeo .vjs-iframe-blocker { display: none; }"+".vjs-vimeo.vjs-user-inactive .vjs-iframe-blocker { display: block; }"+".vjs-vimeo .vjs-poster { background-size: cover; }"+".vimeoplayer { width:100%; height:180%; position:absolute; left:0; top:-40%; }";var t=document.head||document.getElementsByTagName("head")[0];var i=document.createElement("style");i.type="text/css";if(i.styleSheet){i.styleSheet.cssText=e}else{i.appendChild(document.createTextNode(e))}t.appendChild(i)}n.apiReadyQueue=[];var s=function(){n.isApiReady=true;r();for(var e=0;e<n.apiReadyQueue.length;++e){n.apiReadyQueue[e].initPlayer()}};s();e.registerTech("Vimeo",n);var a=function(){function e(t){return new e.fn.init(t)}var t={},i=false,n=false,o=Array.prototype.slice,r="*";e.fn=e.prototype={element:null,init:function(e){if(typeof e==="string"){e=document.getElementById(e)}this.element=e;return this},api:function(e,t){if(!this.element||!e){return false}var i=this,n=i.element,o=n.id!==""?n.id:null,r=!h(t)?t:null,a=h(t)?t:null;if(a){u(e,a,o)}s(e,r,n);return i},addEvent:function(e,t){if(!this.element){return false}var i=this,o=i.element,r=o.id!==""?o.id:null;u(e,t,r);if(e!="ready"){s("addEventListener",e,o)}else if(e=="ready"&&n){t.call(null,r)}return i},removeEvent:function(e){if(!this.element){return false}var t=this,i=t.element,n=i.id!==""?i.id:null,o=f(e,n);if(e!="ready"&&o){s("removeEventListener",e,i)}}};function s(e,t,i){if(!i.contentWindow.postMessage){return false}var n=JSON.stringify({method:e,value:t});i.contentWindow.postMessage(n,r)}function a(e){var t,i;try{t=JSON.parse(e.data);i=t.event||t.method}catch(o){}if(i=="ready"&&!n){n=true}if(!/^https?:\/\/player.vimeo.com/.test(e.origin)){return false}if(r==="*"){r=e.origin}var s=t.value,a=t.data,u=u===""?null:t.player_id,f=l(i,u),h=[];if(!f){return false}if(s!==undefined){h.push(s)}if(a){h.push(a)}if(u){h.push(u)}return h.length>0?f.apply(null,h):f.call()}function u(e,i,n){if(n){if(!t[n]){t[n]={}}t[n][e]=i}else{t[e]=i}}function l(e,i){if(i&&t[i]){return t[i][e]}else if(t[e]){return t[e]}}function f(e,i){if(i&&t[i]){if(!t[i][e]){return false}t[i][e]=null}else{if(!t[e]){return false}t[e]=null}return true}function h(e){return!!(e&&e.constructor&&e.call&&e.apply)}function d(e){return toString.call(e)==="[object Array]"}e.fn.init.prototype=e.fn;if(window.addEventListener){window.addEventListener("message",a,false)}else{window.attachEvent("onmessage",a)}return window.Froogaloop=window.$f=e}()});
//# sourceMappingURL=vimeo.map.js