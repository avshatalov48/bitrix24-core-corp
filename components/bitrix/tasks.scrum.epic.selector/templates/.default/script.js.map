{"version":3,"file":"script.js","sources":["src/view.js","src/edit.js","src/index.js"],"sourcesContent":["import {Loc, Text, Tag, Dom, Type, Event, ajax} from 'main.core';\nimport {BaseEvent, EventEmitter} from 'main.core.events';\n\nimport {Dialog} from 'ui.entity-selector';\n\ntype Params = {\n\tgroupId: number,\n\ttaskId: number,\n\tepic: ?Epic,\n\tcanEdit: boolean\n}\n\ntype Epic = {\n\tid: number,\n\tgroupId: number,\n\tname: string,\n\tdescription: string,\n\tcreatedBy: number,\n\tmodifiedBy: number,\n\tcolor: string\n}\n\ntype ErrorResponse = {\n\tdata: string,\n\terrors: Array,\n\tstatus: string\n}\n\nexport class ViewSelector\n{\n\tconstructor(params: Params)\n\t{\n\t\tthis.groupId = params.groupId;\n\t\tthis.taskId = params.taskId;\n\t\tthis.epic = params.epic;\n\t\tthis.canEdit = params.canEdit;\n\n\t\tthis.dialog = null;\n\n\t\tthis.node = null;\n\t\tthis.nameNode = null;\n\t\tthis.selectorNode = null;\n\n\t\tEventEmitter.subscribe('onChangeProjectLink', this.onChangeTaskProject.bind(this));\n\t}\n\n\trenderTo(container: HTMLElement)\n\t{\n\t\tDom.append(this.render(), container);\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tthis.node = Tag.render`\n\t\t\t<div>\n\t\t\t\t${this.renderName()}\n\t\t\t\t${this.renderSelector()}\n\t\t\t</div>\n\t\t`;\n\n\t\treturn this.node;\n\t}\n\n\tonChangeTaskProject(baseEvent: BaseEvent): void\n\t{\n\t\tconst [groupId, taskId] = baseEvent.getCompatData();\n\n\t\tthis.groupId = parseInt(groupId, 10);\n\t\tthis.taskId = parseInt(taskId, 10);\n\t\tthis.epic = null;\n\n\t\tthis.dialog = null;\n\n\t\tthis.updateSelector(null);\n\t}\n\n\trenderName(): ?HTMLElement\n\t{\n\t\tif (Type.isNull(this.epic))\n\t\t{\n\t\t\treturn '';\n\t\t}\n\n\t\tconst colorBorder = this.convertHexToRGBA(this.epic.color, 0.7);\n\t\tconst colorBackground = this.convertHexToRGBA(this.epic.color, 0.3);\n\n\t\tthis.nameNode = Tag.render`\n\t\t\t<div\n\t\t\t\tclass=\"tasks-scrum__epic-selector--epic\"\n\t\t\t\tstyle=\"background: ${colorBackground}; border-color: ${colorBorder};\"\n\t\t\t>\n\t\t\t\t${Text.encode(this.epic.name)}\n\t\t\t</div>\n\t\t`;\n\n\t\treturn this.nameNode;\n\t}\n\n\trenderSelector(): HTMLElement\n\t{\n\t\tthis.selectorNode = Tag.render`\n\t\t\t<div>\n\t\t\t\t<div class=\"ui-btn-link tasks-scrum__epic-selector--link\">\n\t\t\t\t\t${this.getButtonText()}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\tconst buttonNode = this.selectorNode.firstElementChild;\n\n\t\tEvent.bind(buttonNode, 'click', this.onClick.bind(this, buttonNode));\n\n\t\treturn this.selectorNode;\n\t}\n\n\tonClick(buttonNode: HTMLElement)\n\t{\n\t\tif (this.dialog)\n\t\t{\n\t\t\tif (this.dialog.isOpen())\n\t\t\t{\n\t\t\t\tthis.dialog.hide();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.dialog.show();\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\tconst preselectedItems = [];\n\t\tif (!Type.isNull(this.epic))\n\t\t{\n\t\t\tpreselectedItems.push(['epic-selector' , this.epic.id]);\n\t\t}\n\n\t\tthis.dialog = new Dialog({\n\t\t\tid: Text.getRandom(),\n\t\t\ttargetNode: this.selectorNode,\n\t\t\twidth: 350,\n\t\t\theight: 300,\n\t\t\tmultiple: false,\n\t\t\tdropdownMode: true,\n\t\t\tenableSearch: true,\n\t\t\tcompactView: true,\n\t\t\thideOnDeselect: true,\n\t\t\tcontext: 'epic-selector-' + this.groupId,\n\t\t\tpreselectedItems: preselectedItems,\n\t\t\tentities: [\n\t\t\t\t{\n\t\t\t\t\tid: 'epic-selector',\n\t\t\t\t\toptions: {\n\t\t\t\t\t\tgroupId: this.groupId\n\t\t\t\t\t},\n\t\t\t\t\tdynamicLoad: true,\n\t\t\t\t\tdynamicSearch: true\n\t\t\t\t}\n\t\t\t],\n\t\t\tsearchOptions: {\n\t\t\t\tallowCreateItem: true,\n\t\t\t\tfooterOptions: {\n\t\t\t\t\tlabel: Loc.getMessage('TSE_SELECTOR_SEARCHER_EPIC_ADD')\n\t\t\t\t}\n\t\t\t},\n\t\t\tevents: {\n\t\t\t\t'Search:onItemCreateAsync': (event) => {\n\t\t\t\t\treturn new Promise((resolve) => {\n\t\t\t\t\t\tconst { searchQuery } = event.getData();\n\t\t\t\t\t\tthis.createEpic(searchQuery.getQuery())\n\t\t\t\t\t\t\t.then((epic: Epic) => {\n\t\t\t\t\t\t\t\tconst epicDialogItem = this.getEpicDialogItem(epic);\n\t\t\t\t\t\t\t\tepicDialogItem.selected = true;\n\t\t\t\t\t\t\t\tepicDialogItem.sort = 1;\n\t\t\t\t\t\t\t\tthis.dialog.addItem(epicDialogItem);\n\t\t\t\t\t\t\t\tthis.dialog.hide();\n\t\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t\ttagSelectorOptions: {\n\t\t\t\ttextBoxWidth: 300\n\t\t\t}\n\t\t});\n\n\t\tthis.dialog.subscribe('onHide', () => {\n\t\t\tconst selectedItems = this.dialog.getSelectedItems();\n\t\t\tconst epicId = selectedItems.length ? selectedItems[0].getId() : 0;\n\t\t\tthis.changeTaskEpic(epicId).then((epic: ?Epic) => this.updateSelector(epic));\n\t\t});\n\n\t\tthis.dialog.show();\n\t}\n\n\tupdateSelector(epic: ?Epic)\n\t{\n\t\tthis.epic = epic;\n\n\t\tthis.selectorNode.firstElementChild.textContent = this.getButtonText();\n\n\t\tif (Type.isNull(epic))\n\t\t{\n\t\t\tDom.remove(this.nameNode);\n\n\t\t\tthis.nameNode = null;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (Type.isNull(this.nameNode))\n\t\t\t{\n\t\t\t\tDom.insertBefore(this.renderName(), this.selectorNode);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tDom.replace(this.nameNode, this.renderName());\n\t\t\t}\n\t\t}\n\t}\n\n\tgetEpicDialogItem(epic: Epic): Object\n\t{\n\t\treturn {\n\t\t\tid: epic.id,\n\t\t\tentityId: 'epic-selector',\n\t\t\ttitle: epic.name,\n\t\t\ttabs: 'recents',\n\t\t\tavatarOptions: {\n\t\t\t\tbgColor: epic.color,\n\t\t\t\tbgImage: 'none'\n\t\t\t}\n\t\t};\n\t}\n\n\tchangeTaskEpic(epicId: number): Promise\n\t{\n\t\treturn ajax.runComponentAction(\n\t\t\t'bitrix:tasks.scrum.epic.selector',\n\t\t\t'changeTaskEpic',\n\t\t\t{\n\t\t\t\tmode: 'class',\n\t\t\t\tdata: {\n\t\t\t\t\ttaskId: this.taskId,\n\t\t\t\t\tepicId: epicId\n\t\t\t\t}\n\t\t\t}\n\t\t)\n\t\t\t.then((response) => {\n\t\t\t\treturn response.data;\n\t\t\t})\n\t\t\t.catch((response) => this.showErrorAlert(response))\n\t\t;\n\t}\n\n\tcreateEpic(epicName: string): Promise\n\t{\n\t\treturn ajax.runAction(\n\t\t\t'bitrix:tasks.scrum.epic.createEpic',\n\t\t\t{\n\t\t\t\tdata: {\n\t\t\t\t\tgroupId: this.groupId,\n\t\t\t\t\tname: epicName\n\t\t\t\t}\n\t\t\t}\n\t\t)\n\t\t\t.then((response) => {\n\t\t\t\treturn response.data;\n\t\t\t})\n\t\t\t.catch((response) => this.showErrorAlert(response))\n\t\t;\n\t}\n\n\tgetButtonText(): string\n\t{\n\t\tif (Type.isNull(this.epic))\n\t\t{\n\t\t\treturn Loc.getMessage('TSE_SELECTOR_ADD');\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn Loc.getMessage('TSE_SELECTOR_EDIT');\n\t\t}\n\t}\n\n\tconvertHexToRGBA(hexCode, opacity): string\n\t{\n\t\tlet hex = hexCode.replace('#', '');\n\n\t\tif (hex.length === 3)\n\t\t{\n\t\t\thex = `${hex[0]}${hex[0]}${hex[1]}${hex[1]}${hex[2]}${hex[2]}`;\n\t\t}\n\n\t\tconst r = parseInt(hex.substring(0, 2), 16);\n\t\tconst g = parseInt(hex.substring(2, 4), 16);\n\t\tconst b = parseInt(hex.substring(4, 6), 16);\n\n\t\treturn `rgba(${r},${g},${b},${opacity})`;\n\t}\n\n\tshowErrorAlert(response: ErrorResponse, alertTitle?: string)\n\t{\n\t\tif (Type.isUndefined(response.errors))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (response.errors.length)\n\t\t{\n\t\t\tconst firstError = response.errors.shift();\n\t\t\tif (firstError)\n\t\t\t{\n\t\t\t\tconst errorCode = (firstError.code ? firstError.code : '');\n\n\t\t\t\tconst message = firstError.message + ' ' + errorCode;\n\t\t\t\tconst title = (alertTitle ? alertTitle : Loc.getMessage('TSE_SELECTOR_ERROR_POPUP_TITLE'));\n\n\t\t\t\ttop.BX.UI.Dialogs.MessageBox.alert(message, title);\n\t\t\t}\n\t\t}\n\t}\n}","import {Loc, Text, Tag, Dom, Type, ajax} from 'main.core';\nimport {BaseEvent, EventEmitter} from 'main.core.events';\n\nimport {TagSelector} from 'ui.entity-selector';\n\ntype Params = {\n\tgroupId: number,\n\ttaskId: number,\n\tepic: ?Epic,\n\tinputName: string\n}\n\ntype Epic = {\n\tid: number,\n\tgroupId: number,\n\tname: string,\n\tdescription: string,\n\tcreatedBy: number,\n\tmodifiedBy: number,\n\tcolor: string\n}\n\ntype ErrorResponse = {\n\tdata: string,\n\terrors: Array,\n\tstatus: string\n}\n\nexport class EditSelector\n{\n\tconstructor(params: Params)\n\t{\n\t\tthis.groupId = params.groupId;\n\t\tthis.taskId = params.taskId;\n\t\tthis.savedEpic = params.epic;\n\t\tthis.inputName = params.inputName;\n\n\t\tthis.selector = null;\n\n\t\tthis.node = null;\n\t\tthis.inputNode = null;\n\n\t\tEventEmitter.subscribe('BX.Tasks.MemberSelector:projectSelected', this.onProjectSelected.bind(this));\n\t\tEventEmitter.subscribe('BX.Tasks.Component.Task:projectPreselected', this.onProjectPreselected.bind(this));\n\t}\n\n\trenderTo(container: HTMLElement)\n\t{\n\t\tthis.node = container;\n\n\t\tDom.addClass(this.node, 'tasks-scrum-epic-edit-selector');\n\n\t\tif (this.inputName)\n\t\t{\n\t\t\tDom.append(this.renderInput(), this.node);\n\t\t}\n\n\t\tthis.buildSelector().renderTo(this.node);\n\t}\n\n\trenderInput(): HTMLElement\n\t{\n\t\tconst value = this.savedEpic ? parseInt(this.savedEpic.id, 10) : 0;\n\n\t\tthis.inputNode = Tag.render`\n\t\t\t<input type=\"hidden\" name=\"${Text.encode(this.inputName)}\" value=\"${value}\">\n\t\t`;\n\n\t\treturn this.inputNode;\n\t}\n\n\tbuildSelector(): TagSelector\n\t{\n\t\tconst preselectedItems = [];\n\t\tif (this.savedEpic)\n\t\t{\n\t\t\tpreselectedItems.push(['epic-selector' , this.savedEpic.id]);\n\n\t\t\tthis.updateInputValue(this.savedEpic.id);\n\t\t}\n\n\t\tthis.selector = new TagSelector({\n\t\t\tmultiple: false,\n\t\t\ttextBoxWidth: 200,\n\t\t\tdialogOptions: {\n\t\t\t\twidth: 350,\n\t\t\t\theight: 240,\n\t\t\t\tdropdownMode: true,\n\t\t\t\tcompactView: true,\n\t\t\t\tmultiple: false,\n\t\t\t\thideOnDeselect: true,\n\t\t\t\tcontext: 'epic-selector-' + this.groupId,\n\t\t\t\tpreselectedItems: preselectedItems,\n\t\t\t\tentities: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'epic-selector',\n\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\tgroupId: this.groupId\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdynamicLoad: true,\n\t\t\t\t\t\tdynamicSearch: true\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\tsearchOptions: {\n\t\t\t\t\tallowCreateItem: true,\n\t\t\t\t\tfooterOptions: {\n\t\t\t\t\t\tlabel: Loc.getMessage('TSE_SELECTOR_SEARCHER_EPIC_ADD')\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\titems: [],\n\t\t\t\tevents: {\n\t\t\t\t\t'Search:onItemCreateAsync': (event) => {\n\t\t\t\t\t\treturn new Promise((resolve) => {\n\t\t\t\t\t\t\tconst { searchQuery } = event.getData();\n\t\t\t\t\t\t\tconst dialog = event.getTarget();\n\t\t\t\t\t\t\tthis.createEpic(searchQuery.getQuery())\n\t\t\t\t\t\t\t\t.then((epic: Epic) => {\n\t\t\t\t\t\t\t\t\tconst epicDialogItem = this.getEpicDialogItem(epic);\n\t\t\t\t\t\t\t\t\tepicDialogItem.selected = true;\n\t\t\t\t\t\t\t\t\tepicDialogItem.sort = 1;\n\t\t\t\t\t\t\t\t\tdialog.addItem(epicDialogItem);\n\t\t\t\t\t\t\t\t\tthis.updateInputValue(epicDialogItem.id);\n\t\t\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t;\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\t'Item:onSelect': (event) => {\n\t\t\t\t\t\tconst selectedItem = event.getData().item;\n\t\t\t\t\t\tthis.updateInputValue(selectedItem.getId());\n\t\t\t\t\t},\n\t\t\t\t\t'Item:onDeselect': (event) => {\n\t\t\t\t\t\tconst dialog = event.getTarget();\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tif (dialog.getSelectedItems().length === 0)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.updateInputValue(0);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}, 50);\n\t\t\t\t\t},\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tthis.selector\n\t\t\t.subscribe('onMetaEnter', (baseEvent: BaseEvent) => {\n\t\t\t\tconst tagSelector: TagSelector = baseEvent.getTarget();\n\t\t\t\tif (tagSelector.getDialog().isOpen())\n\t\t\t\t{\n\t\t\t\t\tconst { event: keyboardEvent } = baseEvent.getData();\n\n\t\t\t\t\tkeyboardEvent.stopPropagation();\n\t\t\t\t}\n\t\t\t})\n\t\t;\n\n\t\treturn this.selector;\n\t}\n\n\tonProjectSelected(baseEvent: BaseEvent)\n\t{\n\t\tconst data = baseEvent.getData();\n\n\t\tthis.groupId = parseInt(data.ID, 10);\n\n\t\tthis.updateInputValue(0);\n\n\t\tthis.savedEpic = null;\n\n\t\tDom.clean(this.node);\n\n\t\tthis.renderTo(this.node);\n\t}\n\n\tonProjectPreselected(baseEvent: BaseEvent)\n\t{\n\t\tconst data = baseEvent.getData();\n\n\t\tthis.groupId = parseInt(data.groupId, 10);\n\n\t\tDom.clean(this.node);\n\n\t\tthis.renderTo(this.node);\n\t}\n\n\tupdateInputValue(epicId: number)\n\t{\n\t\tthis.inputNode.value = parseInt(epicId, 10);\n\t}\n\n\tgetEpicDialogItem(epic: Epic): Object\n\t{\n\t\treturn {\n\t\t\tid: epic.id,\n\t\t\tentityId: 'epic-selector',\n\t\t\ttitle: epic.name,\n\t\t\ttabs: 'recents',\n\t\t\tavatarOptions: {\n\t\t\t\tbgColor: epic.color,\n\t\t\t\tbgImage: 'none'\n\t\t\t}\n\t\t};\n\t}\n\n\tcreateEpic(epicName: string): Promise\n\t{\n\t\treturn ajax.runAction(\n\t\t\t'bitrix:tasks.scrum.epic.createEpic',\n\t\t\t{\n\t\t\t\tdata: {\n\t\t\t\t\tgroupId: this.groupId,\n\t\t\t\t\tname: epicName\n\t\t\t\t}\n\t\t\t}\n\t\t)\n\t\t\t.then((response) => {\n\t\t\t\treturn response.data;\n\t\t\t})\n\t\t\t.catch((response) => this.showErrorAlert(response))\n\t\t;\n\t}\n\n\tshowErrorAlert(response: ErrorResponse, alertTitle?: string)\n\t{\n\t\tif (Type.isUndefined(response.errors))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (response.errors.length)\n\t\t{\n\t\t\tconst firstError = response.errors.shift();\n\t\t\tif (firstError)\n\t\t\t{\n\t\t\t\tconst errorCode = (firstError.code ? firstError.code : '');\n\n\t\t\t\tconst message = firstError.message + ' ' + errorCode;\n\t\t\t\tconst title = (alertTitle ? alertTitle : Loc.getMessage('TSE_SELECTOR_ERROR_POPUP_TITLE'));\n\n\t\t\t\ttop.BX.UI.Dialogs.MessageBox.alert(message, title);\n\t\t\t}\n\t\t}\n\t}\n}","import {Type} from 'main.core';\n\nimport {ViewSelector} from './view';\nimport {EditSelector} from './edit';\n\nimport '../css/base.css';\n\ntype Params = {\n\tgroupId: number,\n\ttaskId: number,\n\tepic: ?Epic,\n\tcanEdit: 'Y' | 'N',\n\tmode: 'edit' | 'view',\n\tinputName: string\n}\n\ntype Epic = {\n\tid: number,\n\tgroupId: number,\n\tname: string,\n\tdescription: string,\n\tcreatedBy: number,\n\tmodifiedBy: number,\n\tcolor: string\n}\n\nexport class EpicSelector\n{\n\tconstructor(params: Params)\n\t{\n\t\tthis.groupId = parseInt(params.groupId, 10);\n\t\tthis.taskId = parseInt(params.taskId, 10);\n\t\tthis.epic = Type.isPlainObject(params.epic) ? params.epic : null;\n\t\tthis.canEdit = params.canEdit === 'Y';\n\t\tthis.mode = params.mode === 'edit' ? 'edit' : 'view';\n\t\tthis.inputName = params.inputName;\n\t}\n\n\trenderTo(container: HTMLElement)\n\t{\n\t\tif (this.mode === 'view')\n\t\t{\n\t\t\t(new ViewSelector({\n\t\t\t\tgroupId: this.groupId,\n\t\t\t\ttaskId: this.taskId,\n\t\t\t\tepic: this.epic,\n\t\t\t\tcanEdit: this.canEdit\n\t\t\t}))\n\t\t\t\t.renderTo(container)\n\t\t\t;\n\t\t}\n\t\telse\n\t\t{\n\t\t\t(new EditSelector({\n\t\t\t\tgroupId: this.groupId,\n\t\t\t\ttaskId: this.taskId,\n\t\t\t\tepic: this.epic,\n\t\t\t\tinputName: this.inputName\n\t\t\t}))\n\t\t\t\t.renderTo(container)\n\t\t\t;\n\t\t}\n\t}\n}"],"names":["ViewSelector","params","groupId","taskId","epic","canEdit","dialog","node","nameNode","selectorNode","EventEmitter","subscribe","onChangeTaskProject","bind","container","Dom","append","render","Tag","renderName","renderSelector","baseEvent","getCompatData","parseInt","updateSelector","Type","isNull","colorBorder","convertHexToRGBA","color","colorBackground","Text","encode","name","getButtonText","buttonNode","firstElementChild","Event","onClick","isOpen","hide","show","preselectedItems","push","id","Dialog","getRandom","targetNode","width","height","multiple","dropdownMode","enableSearch","compactView","hideOnDeselect","context","entities","options","dynamicLoad","dynamicSearch","searchOptions","allowCreateItem","footerOptions","label","Loc","getMessage","events","event","Promise","resolve","getData","searchQuery","createEpic","getQuery","then","epicDialogItem","getEpicDialogItem","selected","sort","addItem","tagSelectorOptions","textBoxWidth","selectedItems","getSelectedItems","epicId","length","getId","changeTaskEpic","textContent","remove","insertBefore","replace","entityId","title","tabs","avatarOptions","bgColor","bgImage","ajax","runComponentAction","mode","data","response","showErrorAlert","epicName","runAction","hexCode","opacity","hex","r","substring","g","b","alertTitle","isUndefined","errors","firstError","shift","errorCode","code","message","top","BX","UI","Dialogs","MessageBox","alert","EditSelector","savedEpic","inputName","selector","inputNode","onProjectSelected","onProjectPreselected","addClass","renderInput","buildSelector","renderTo","value","updateInputValue","TagSelector","dialogOptions","items","getTarget","selectedItem","item","setTimeout","tagSelector","getDialog","keyboardEvent","stopPropagation","ID","clean","EpicSelector","isPlainObject"],"mappings":"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"}