BX.namespace("BX.Mobile.Tasks");BX.Mobile.Tasks.filter=function(t,e){this.parentConstruct(BX.Mobile.Tasks.filter,t);BX.merge(this,{sys:{classCode:"filter"},vars:{prevFilterId:false},opts:{chosenFilter:false}});this.handleInitStack(e,BX.Mobile.Tasks.filter,t)};BX.extend(BX.Mobile.Tasks.filter,BX.Mobile.Tasks.page);BX.merge(BX.Mobile.Tasks.filter.prototype,{init:function(){var t=this;if(typeof BXMobileApp!="undefined"&&typeof app!="undefined"){BX.bindDelegate(this.scope(),"click",{attribute:{"data-bx-id":this.classCode()+"-variant"}},function(){t.selectFilter(BX.data(this,"filter"))});this.addFastClick(this.scope())}var e=this.controlR("filters");if(typeof this.opts.customFilters!="undefined"&&BX.type.isArray(this.opts.customFilters)&&this.opts.customFilters.length>0){for(var i=0;i<this.opts.customFilters.length;i++){var s=this.createNodesByTemplate("custom-preset",this.opts.customFilters[i],true);if(BX.type.isElementNode(s[0]))BX.append(s[0],e)}}},selectFilter:function(t){var e={};if(t==parseInt(t))e["F_FILTER_SWITCH_PRESET"]=parseInt(t);else e["F_STATE"]=[t];this.highlightFilter(t);BXMobileApp.onCustomEvent("onTasksFilterChange",{module_id:"tasks",emitter:"tasks filter",filter:e,user_id:this.option("userId")},true);app.closeController()},highlightFilter:function(t){var e=this.control("variant",false,{all:true});for(var i=0;i<e.length;i++){var s=BX.data(e[i],"filter");if(this.vars.prevFilterId!==false&&s==this.vars.prevFilterId){BX.removeClass(e[i],"selected")}if(s==t){BX.addClass(e[i],"selected")}}this.vars.prevFilterId=t},pageOpenHandler:function(t){try{if(BX.type.isNotEmptyString(t.currentFilter))this.highlightFilter(t.currentFilter);else if(this.opts.chosenFilter!==false)this.highlightFilter(this.opts.chosenFilter)}catch(e){}}});
//# sourceMappingURL=logic.map.js