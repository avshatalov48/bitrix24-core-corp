Menu={currentItem:null,ajaxUrl:null,pushParams:null,init:function(t){this.currentItem=t.currentItem;this.ajaxUrl=t.ajaxUrl;this.pushParams=t.pushParams;var e=document.getElementById("menu-items"),a=this;e.addEventListener("click",function(t){a.onItemClick(t)},false)},onItemClick:function(t){var e=t.target;if(e&&e.nodeType&&e.nodeType==1&&BX.hasClass(e,"menu-item")){if(this.currentItem!=null)this.unselectItem(this.currentItem);this.selectItem(e);var a=e.getAttribute("data-url");var i=e.getAttribute("data-pageid");if(BX.type.isNotEmptyString(a)&&BX.type.isNotEmptyString(i))app.loadPage(a,i);else if(BX.type.isNotEmptyString(a))app.loadPage(a);this.currentItem=e}},getPushParamsHead:function(t){var e="";if(t){var a=(t+"").split("_");if(a[0])e=a[0]}return e},onOpenPush:function(t){if(!this.pushParams||!t.params)return;var e=this.getPushParamsHead(t.params);if(!e)return;if(this.pushParams[e]){url=this.pushParams[e]["data-url"];url+=(url.indexOf("?")>=0?"&":"?")+"on_open_push=Y";if(BX.type.isNotEmptyString(url)&&BX.type.isNotEmptyString(this.pushParams[e]["data-pageid"]))app.loadPageStart({url:url,page_id:this.pushParams[e]["data-pageid"]});else if(BX.type.isNotEmptyString(url))app.loadPageStart({url:url})}},selectItem:function(t){if(!BX.hasClass(t,"menu-item-selected"))BX.addClass(t,"menu-item-selected")},unselectItem:function(t){BX.removeClass(t,"menu-item-selected")},getToken:function(){var t=this,e="APPLE";if(platform!="ios")e="GOOGLE";var a={callback:function(a){var i={action:"save_device_token",device_name:device.name,uuid:device.uuid,device_token:a,device_type:e,sessid:BX.bitrix_sessid()};BX.ajax({timeout:30,method:"POST",dataType:"json",url:t.ajaxUrl,data:i,onsuccess:function(t){},onfailure:function(){}})}};return app.exec("getToken",a)}};
//# sourceMappingURL=script.map.js