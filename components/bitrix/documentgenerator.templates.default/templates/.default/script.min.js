(function(){BX.namespace("BX.DocumentGenerator");BX.DocumentGenerator.TemplatesDefault={progress:false,errorMessageNode:"docgen-default-templates-error-message"};BX.DocumentGenerator.TemplatesDefault.init=function(e){this.gridId=e.gridId||""};BX.DocumentGenerator.TemplatesDefault.showError=function(e){if(!e){return}BX(BX.DocumentGenerator.TemplatesDefault.errorMessageNode).innerText=e;BX.show(BX(BX.DocumentGenerator.TemplatesDefault.errorMessageNode))};BX.DocumentGenerator.TemplatesDefault.install=function(e,t,a){if(!e){BX.DocumentGenerator.TemplatesDefault.showError("Empty code")}if(BX.DocumentGenerator.TemplatesDefault.progress){BX.UI.Notification.Center.notify({content:BX.message("DOCGEN_TEMPLATES_DEFAULT_TEMPLATE_INSTALL_PROGRESS")});return}BX.DocumentGenerator.TemplatesDefault.progress=true;BX.Main.gridManager.getById(BX.DocumentGenerator.TemplatesDefault.gridId).instance.getLoader().show();BX.ajax.runAction("documentgenerator.api.template.installDefault",{data:{code:e}}).then(function(n){BX.DocumentGenerator.TemplatesDefault.progress=false;BX.UI.Notification.Center.notify({content:BX.message("DOCGEN_TEMPLATES_DEFAULT_TEMPLATE_REINSTALL_COMPLETE").replace("#NAME#",t)});if(BX.type.isDomNode(a)){a.innerText=BX.message("DOCGEN_TEMPLATES_DEFAULT_TEMPLATE_REINSTALL");a.onclick=function(){BX.DocumentGenerator.TemplatesDefault.reinstall(e,t,a)}}BX.Main.gridManager.getById(BX.DocumentGenerator.TemplatesDefault.gridId).instance.getLoader().hide();var r=BX.SidePanel.Instance.getTopSlider();if(r){BX.SidePanel.Instance.postMessage(r,"documentgenerator-add-template",{templateId:n.data.template.id})}},function(e){BX.DocumentGenerator.TemplatesDefault.progress=false;BX.UI.Notification.Center.notify({content:BX.message("DOCGEN_TEMPLATES_DEFAULT_TEMPLATE_REINSTALL_ERROR").replace("#NAME#",t)});BX.Main.gridManager.getById(BX.DocumentGenerator.TemplatesDefault.gridId).instance.getLoader().hide();BX.DocumentGenerator.TemplatesDefault.showError(e.errors.pop().message)})};BX.DocumentGenerator.TemplatesDefault.reinstall=function(e,t,a){if(BX.DocumentGenerator.TemplatesDefault.progress){BX.UI.Notification.Center.notify({content:BX.message("DOCGEN_TEMPLATES_DEFAULT_TEMPLATE_INSTALL_PROGRESS")});return}if(confirm(BX.message("DOCGEN_TEMPLATES_DEFAULT_TEMPLATE_REINSTALL_CONFIRM"))){BX.DocumentGenerator.TemplatesDefault.install(e,t,a)}}})(window);