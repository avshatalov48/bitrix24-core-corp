{"version":3,"file":"script.js","sources":["src/component.js"],"sourcesContent":["import {Dom, Type, ajax as Ajax, Event} from \"main.core\";\nimport {BaseEvent} from \"main.core.events\";\nimport {ComponentOptions} from \"./types\";\n\nexport default class Component\n{\n\toptions: ComponentOptions;\n\n\tconstructor(options: ComponentOptions)\n\t{\n\t\tthis.options = options;\n\n\t\tthis.bindEvents();\n\t}\n\n\tbindEvents()\n\t{\n\t\tconst buttonClass = this.options.buttonClass;\n\t\tdocument.querySelectorAll(`.${buttonClass}`).forEach(button => {\n\t\t\tEvent.bind(button, 'click', this.handleClickOnTemplate.bind(this));\n\t\t});\n\t}\n\n\thandleClickOnTemplate(event: BaseEvent)\n\t{\n\t\tconst templateId = event.currentTarget.dataset.templateId;\n\t\tDom.clean(this.options.container);\n\n\t\ttop.window.postMessage({\n\t\t\ttype: 'selectedTemplate',\n\t\t}, '*');\n\n\t\tconst loader = new BX.Loader({\n\t\t\ttarget: this.options.container,\n\t\t});\n\t\tloader.show();\n\n\t\tAjax.runAction('disk.api.integration.messengerCall.createResumeByTemplate', {\n\t\t\tdata: {\n\t\t\t\tcallId: this.options.call.id,\n\t\t\t\ttemplateId: templateId,\n\t\t\t}\n\t\t}).then((response) => {\n\t\t\tif (response.data.document.urlToEdit)\n\t\t\t{\n\t\t\t\tdocument.location = response.data.document.urlToEdit;\n\t\t\t}\n\t\t});\n\t}\n}"],"names":["Component","options","bindEvents","buttonClass","document","querySelectorAll","forEach","button","Event","bind","handleClickOnTemplate","event","templateId","currentTarget","dataset","Dom","clean","container","top","window","postMessage","type","loader","BX","Loader","target","show","Ajax","runAction","data","callId","call","id","then","response","urlToEdit","location"],"mappings":";;;;;KAIqBA;CAIpB,qBAAYC,OAAZ,EACA;CAAA;CACC,SAAKA,OAAL,GAAeA,OAAf;CAEA,SAAKC,UAAL;CACA;;;;kCAGD;CAAA;;CACC,UAAMC,WAAW,GAAG,KAAKF,OAAL,CAAaE,WAAjC;CACAC,MAAAA,QAAQ,CAACC,gBAAT,YAA8BF,WAA9B,GAA6CG,OAA7C,CAAqD,UAAAC,MAAM,EAAI;CAC9DC,QAAAA,eAAK,CAACC,IAAN,CAAWF,MAAX,EAAmB,OAAnB,EAA4B,KAAI,CAACG,qBAAL,CAA2BD,IAA3B,CAAgC,KAAhC,CAA5B;CACA,OAFD;CAGA;;;2CAEqBE,OACtB;CACC,UAAMC,UAAU,GAAGD,KAAK,CAACE,aAAN,CAAoBC,OAApB,CAA4BF,UAA/C;CACAG,MAAAA,aAAG,CAACC,KAAJ,CAAU,KAAKf,OAAL,CAAagB,SAAvB;CAEAC,MAAAA,GAAG,CAACC,MAAJ,CAAWC,WAAX,CAAuB;CACtBC,QAAAA,IAAI,EAAE;CADgB,OAAvB,EAEG,GAFH;CAIA,UAAMC,MAAM,GAAG,IAAIC,EAAE,CAACC,MAAP,CAAc;CAC5BC,QAAAA,MAAM,EAAE,KAAKxB,OAAL,CAAagB;CADO,OAAd,CAAf;CAGAK,MAAAA,MAAM,CAACI,IAAP;CAEAC,MAAAA,cAAI,CAACC,SAAL,CAAe,2DAAf,EAA4E;CAC3EC,QAAAA,IAAI,EAAE;CACLC,UAAAA,MAAM,EAAE,KAAK7B,OAAL,CAAa8B,IAAb,CAAkBC,EADrB;CAELpB,UAAAA,UAAU,EAAEA;CAFP;CADqE,OAA5E,EAKGqB,IALH,CAKQ,UAACC,QAAD,EAAc;CACrB,YAAIA,QAAQ,CAACL,IAAT,CAAczB,QAAd,CAAuB+B,SAA3B,EACA;CACC/B,UAAAA,QAAQ,CAACgC,QAAT,GAAoBF,QAAQ,CAACL,IAAT,CAAczB,QAAd,CAAuB+B,SAA3C;CACA;CACD,OAVD;CAWA;;;;;;;;;;;"}