(function(e,t,a,i,s){"use strict";function n(e,t){r(e,t);t.add(e)}function l(e,t,a){r(e,t);t.set(e,a)}function r(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function o(e,t,a){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return a}var c=t.Reflection.namespace("BX.Crm.Copilot.CallAssessmentList");var u=new WeakMap;var d=new WeakMap;var v=new WeakMap;var h=new WeakMap;var b=new WeakSet;var f=function(){function e(t){var a=t.id,i=t.targetNodeId,s=t.checked,r=t.readOnly;babelHelpers.classCallCheck(this,e);n(this,b);l(this,u,{writable:true,value:void 0});l(this,d,{writable:true,value:void 0});l(this,v,{writable:true,value:void 0});l(this,h,{writable:true,value:void 0});babelHelpers.classPrivateFieldSet(this,u,a);babelHelpers.classPrivateFieldSet(this,d,document.getElementById(i));babelHelpers.classPrivateFieldSet(this,v,s);babelHelpers.classPrivateFieldSet(this,h,r)}babelHelpers.createClass(e,[{key:"init",value:function e(){var a=this;void t.Runtime.loadExtension("ui.switcher").then((function(e){var t=e.Switcher;var i=new t({checked:babelHelpers.classPrivateFieldGet(a,v),disabled:babelHelpers.classPrivateFieldGet(a,h),handlers:{checked:function e(t){t.stopPropagation();o(a,b,p).call(a,false)},unchecked:function e(t){t.stopPropagation();o(a,b,p).call(a,true)}}});i.renderTo(babelHelpers.classPrivateFieldGet(a,d))}))}}]);return e}();function p(e){var a=this;t.Runtime.throttle((function(){t.ajax.runAction("crm.copilot.callassessment.active",{data:{id:babelHelpers.classPrivateFieldGet(a,u),isEnabled:e?"Y":"N"}})["catch"]((function(e){s.UI.Notification.Center.notify({content:t.Text.encode(e.errors[0].message),autoHideDelay:6e3});throw e}))}),100)()}c.ActiveField=f;function E(e,t){C(e,t);t.add(e)}function w(e,t,a){C(e,t);t.set(e,a)}function C(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function T(e,t,a){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return a}var m=t.Reflection.namespace("BX.Crm.Copilot.CallAssessmentList");var M=new WeakMap;var _=new WeakMap;var g=new WeakSet;var S=new WeakSet;var I=new WeakSet;var P=new WeakSet;var F=function(){function e(t){babelHelpers.classCallCheck(this,e);E(this,P);E(this,I);E(this,S);E(this,g);w(this,M,{writable:true,value:null});w(this,_,{writable:true,value:null});babelHelpers.classPrivateFieldSet(this,M,BX.Main.gridManager.getInstanceById(t))}babelHelpers.createClass(e,[{key:"init",value:function e(){T(this,g,H).call(this)}}]);return e}();function H(){a.EventEmitter.subscribe("BX.Crm.Copilot.CallAssessment:onClickDelete",T(this,S,L).bind(this))}function L(e){var a=this;var n=t.Text.toInteger(e.data.id);if(!n){T(this,I,k).call(this,t.Loc.getMessage("CRM_COPILOT_CALL_ASSESSMENT_LIST_NOT_FOUND"));return}i.MessageBox.show({title:t.Loc.getMessage("CRM_TYPE_ITEM_DELETE_CONFIRMATION_TITLE"),message:t.Loc.getMessage("CRM_TYPE_ITEM_DELETE_CONFIRMATION_MESSAGE"),modal:true,buttons:i.MessageBoxButtons.YES_CANCEL,onYes:function e(i){t.ajax.runAction("crm.controller.copilot.callassessment.delete",{data:{id:n}}).then((function(e){s.UI.Notification.Center.notify({content:t.Loc.getMessage("CRM_TYPE_ITEM_DELETE_NOTIFICATION")});T(a,P,A).call(a)}))["catch"]((function(e){var i,s;var n=e.errors;T(a,I,k).call(a,(i=(s=n[0])===null||s===void 0?void 0:s.message)!==null&&i!==void 0?i:t.Loc.getMessage("CRM_COPILOT_CALL_ASSESSMENT_LIST_ITEM_DELETE_ERROR"))}));i.close()}})}function k(e){s.UI.Notification.Center.notify({content:t.Text.encode(e),autoHideDelay:6e3})}function A(){var e=this;if(!babelHelpers.classPrivateFieldGet(this,M)){return}if(babelHelpers.classPrivateFieldGet(this,_)>0){clearTimeout(babelHelpers.classPrivateFieldGet(this,_));babelHelpers.classPrivateFieldSet(this,_,0)}babelHelpers.classPrivateFieldSet(this,_,setTimeout((function(){babelHelpers.classPrivateFieldGet(e,M).reload()}),1e3))}m.Grid=F;e.ActiveField=f;e.Grid=F})(this.window=this.window||{},BX,BX.Event,BX.UI.Dialogs,BX);
//# sourceMappingURL=script.map.js