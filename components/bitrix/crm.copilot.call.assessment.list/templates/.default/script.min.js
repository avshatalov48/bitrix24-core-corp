(function(e,t,a,i,s,l,n){"use strict";function r(e,t,a){o(e,t);t.set(e,a)}function o(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}var c=l.Reflection.namespace("BX.Crm.Copilot.CallAssessmentList");var v=new WeakMap;var d=function(){function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;babelHelpers.classCallCheck(this,e);r(this,v,{writable:true,value:void 0});babelHelpers.classPrivateFieldSet(this,v,t)}babelHelpers.createClass(e,[{key:"execute",value:function e(){var a,i;if(babelHelpers.classPrivateFieldGet(this,v)){if(!t.SidePanel.Instance){console.error("SidePanel.Instance not found");return}t.SidePanel.Instance.open("/crm/copilot-call-assessment/details/0/",{cacheable:false,width:700,allowChangeHistory:false});return}(a=top.BX.UI)===null||a===void 0?void 0:(i=a.InfoHelper)===null||i===void 0?void 0:i.show("limit_v2_crm_copilot_call_assessment_off")}}]);return e}();c.ActionButton=d;function u(e,t){b(e,t);t.add(e)}function h(e,t,a){b(e,t);t.set(e,a)}function b(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function p(e,t,a){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return a}var f=l.Reflection.namespace("BX.Crm.Copilot.CallAssessmentList");var w=new WeakMap;var m=new WeakMap;var C=new WeakMap;var E=new WeakMap;var S=new WeakSet;var H=function(){function e(t){var a=t.id,i=t.targetNodeId,s=t.checked,l=t.readOnly;babelHelpers.classCallCheck(this,e);u(this,S);h(this,w,{writable:true,value:void 0});h(this,m,{writable:true,value:void 0});h(this,C,{writable:true,value:void 0});h(this,E,{writable:true,value:void 0});babelHelpers.classPrivateFieldSet(this,w,a);babelHelpers.classPrivateFieldSet(this,m,document.getElementById(i));babelHelpers.classPrivateFieldSet(this,C,s);babelHelpers.classPrivateFieldSet(this,E,l)}babelHelpers.createClass(e,[{key:"init",value:function e(){var t=this;void l.Runtime.loadExtension("ui.switcher").then((function(e){var a=e.Switcher;var i=new a({checked:babelHelpers.classPrivateFieldGet(t,C),disabled:babelHelpers.classPrivateFieldGet(t,E),handlers:{checked:function e(a){a.stopPropagation();p(t,S,T).call(t,false)},unchecked:function e(a){a.stopPropagation();p(t,S,T).call(t,true)}}});l.Dom.clean(babelHelpers.classPrivateFieldGet(t,m));i.renderTo(babelHelpers.classPrivateFieldGet(t,m))}))}}]);return e}();function T(e){var t=this;l.Runtime.throttle((function(){l.ajax.runAction("crm.copilot.callassessment.active",{data:{id:babelHelpers.classPrivateFieldGet(t,w),isEnabled:e?"Y":"N"}})["catch"]((function(e){s.UI.Notification.Center.notify({content:l.Text.encode(e.errors[0].message),autoHideDelay:6e3});throw e}))}),100)()}f.ActiveField=H;function g(e,t){_(e,t);t.add(e)}function P(e,t,a){_(e,t);t.set(e,a)}function _(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function F(e,t,a){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return a}var M=l.Reflection.namespace("BX.Crm.Copilot.CallAssessmentList");var I=new WeakMap;var k=new WeakMap;var L=new WeakSet;var B=new WeakSet;var R=new WeakSet;var G=new WeakSet;var A=function(){function e(t){babelHelpers.classCallCheck(this,e);g(this,G);g(this,R);g(this,B);g(this,L);P(this,I,{writable:true,value:null});P(this,k,{writable:true,value:null});babelHelpers.classPrivateFieldSet(this,I,BX.Main.gridManager.getInstanceById(t))}babelHelpers.createClass(e,[{key:"init",value:function e(){F(this,L,W).call(this)}}]);return e}();function W(){a.EventEmitter.subscribe("BX.Crm.Copilot.CallAssessment:onClickDelete",F(this,B,O).bind(this))}function O(e){var t=this;var a=l.Text.toInteger(e.data.id);if(!a){F(this,R,y).call(this,l.Loc.getMessage("CRM_COPILOT_CALL_ASSESSMENT_LIST_NOT_FOUND_MSGVER_1"));return}i.MessageBox.show({title:l.Loc.getMessage("CRM_TYPE_ITEM_DELETE_CONFIRMATION_TITLE"),message:l.Loc.getMessage("CRM_TYPE_ITEM_DELETE_CONFIRMATION_MESSAGE"),modal:true,buttons:i.MessageBoxButtons.YES_CANCEL,onYes:function e(i){l.ajax.runAction("crm.controller.copilot.callassessment.delete",{data:{id:a}}).then((function(e){s.UI.Notification.Center.notify({content:l.Loc.getMessage("CRM_TYPE_ITEM_DELETE_NOTIFICATION")});F(t,G,N).call(t)}))["catch"]((function(e){var a,i;var s=e.errors;F(t,R,y).call(t,(a=(i=s[0])===null||i===void 0?void 0:i.message)!==null&&a!==void 0?a:l.Loc.getMessage("CRM_COPILOT_CALL_ASSESSMENT_LIST_ITEM_DELETE_ERROR"))}));i.close()}})}function y(e){s.UI.Notification.Center.notify({content:l.Text.encode(e),autoHideDelay:6e3})}function N(){var e=this;if(!babelHelpers.classPrivateFieldGet(this,I)){return}if(babelHelpers.classPrivateFieldGet(this,k)>0){clearTimeout(babelHelpers.classPrivateFieldGet(this,k));babelHelpers.classPrivateFieldSet(this,k,0)}babelHelpers.classPrivateFieldSet(this,k,setTimeout((function(){babelHelpers.classPrivateFieldGet(e,I).reload()}),1e3))}M.Grid=A;var X,D;function U(e,t){j(e,t);t.add(e)}function x(e,t,a){j(e,t);t.set(e,a)}function j(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function Y(e,t,a){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return a}var z=l.Reflection.namespace("BX.Crm.Copilot.CallAssessmentList");var V="default";var q="lowBorder";var J="highBorder";var K=new WeakMap;var Q=new WeakMap;var Z=new WeakMap;var $=new WeakMap;var ee=new WeakMap;var te=new WeakSet;var ae=new WeakSet;var ie=new WeakSet;var se=new WeakSet;var le=new WeakSet;var ne=function(){function e(t){var a=t.id,i=t.targetNodeId,s=t.borders,l=t.value;babelHelpers.classCallCheck(this,e);U(this,le);U(this,se);U(this,ie);U(this,ae);U(this,te);x(this,K,{writable:true,value:void 0});x(this,Q,{writable:true,value:void 0});x(this,Z,{writable:true,value:void 0});x(this,$,{writable:true,value:void 0});x(this,ee,{writable:true,value:void 0});babelHelpers.classPrivateFieldSet(this,K,a);babelHelpers.classPrivateFieldSet(this,Q,document.getElementById(i));babelHelpers.classPrivateFieldSet(this,Z,s!==null&&s!==void 0?s:null);babelHelpers.classPrivateFieldSet(this,$,l)}babelHelpers.createClass(e,[{key:"init",value:function e(){if(babelHelpers.classPrivateFieldGet(this,$)===null){return}babelHelpers.classPrivateFieldSet(this,ee,l.Tag.render(X||(X=babelHelpers.taggedTemplateLiteral(["<div></div>"]))));var t=l.Tag.render(D||(D=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="crm-copilot-call-assessment-list-assessment-avg">\n\t\t\t\t','\n\t\t\t\t<div class="crm-copilot-call-assessment-list-assessment-avg-value">\n\t\t\t\t\t','\n\t\t\t\t\t<span class="crm-copilot-call-assessment-list-assessment-avg-percent">%</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t'])),babelHelpers.classPrivateFieldGet(this,ee),babelHelpers.classPrivateFieldGet(this,$));l.Dom.append(t,babelHelpers.classPrivateFieldGet(this,Q));var a=new n.ProgressRound({width:28,lineSize:8,colorBar:Y(this,ae,oe).call(this),colorTrack:"#EBF1F6",rotation:false,value:babelHelpers.classPrivateFieldGet(this,$),color:n.ProgressRound.Color.SUCCESS});a.renderTo(babelHelpers.classPrivateFieldGet(this,ee));Y(this,te,re).call(this,t)}}]);return e}();function re(e){l.Event.bind(e,"mouseenter",Y(this,se,ve).bind(this));l.Event.bind(e,"mouseleave",Y(this,le,de).bind(this))}function oe(){var e=Y(this,ie,ce).call(this,J);if(e&&babelHelpers.classPrivateFieldGet(this,$)>=(e===null||e===void 0?void 0:e.value)){return e.color}var t=Y(this,ie,ce).call(this,q);if(t&&babelHelpers.classPrivateFieldGet(this,$)<=(t===null||t===void 0?void 0:t.value)){return t.color}var a=Y(this,ie,ce).call(this,V);if(a){return a.color}throw new RangeError("unknown track color")}function ce(e){var t;return(t=babelHelpers.classPrivateFieldGet(this,Z).find((function(t){return t.id===e})))!==null&&t!==void 0?t:null}function ve(e){var t=Y(this,ie,ce).call(this,q);var a=Y(this,ie,ce).call(this,J);l.Runtime.debounce((function(){BX.UI.Hint.show(e.target,l.Loc.getMessage("CRM_COPILOT_CALL_ASSESSMENT_LIST_COLUMN_ASSESSMENT_AVG_TOOLTIP",{"#LOW_BORDER#":t.value,"#HIGH_BORDER#":a.value}),true)}),50,this)()}function de(e){BX.UI.Hint.hide(e.target)}z.RoundChartField=ne;e.ActiveField=H;e.ActionButton=d;e.Grid=A;e.RoundChartField=ne})(this.window=this.window||{},BX,BX.Event,BX.UI.Dialogs,BX,BX,BX.UI);
//# sourceMappingURL=script.map.js