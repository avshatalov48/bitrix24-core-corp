this.BX=this.BX||{};this.BX.Socialnetwork=this.BX.Socialnetwork||{};(function(e,t,i,a,r,s,n,l,o,c,u,d,p,h){"use strict";function b(e,t){f(e,t);t.add(e)}function v(e,t,i){f(e,t);t.set(e,i)}function f(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function g(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var m=new WeakMap;var w=new WeakMap;var H=new WeakSet;var y=new WeakSet;var S=function(e){babelHelpers.inherits(t,e);function t(e,i){var a;babelHelpers.classCallCheck(this,t);a=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));b(babelHelpers.assertThisInitialized(a),y);b(babelHelpers.assertThisInitialized(a),H);v(babelHelpers.assertThisInitialized(a),m,{writable:true,value:void 0});v(babelHelpers.assertThisInitialized(a),w,{writable:true,value:void 0});a.setEventNamespace("BX.Socialnetwork.Spaces.Menu.PullRequests");babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(a),m,parseInt(e,10));babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(a),w,parseInt(i,10));return a}babelHelpers.createClass(t,[{key:"getModuleId",value:function e(){return"socialnetwork"}},{key:"getMap",value:function e(){return{workgroup_user_add:g(this,H,_).bind(this),workgroup_user_delete:g(this,H,_).bind(this),workgroup_user_update:g(this,H,_).bind(this),workgroup_update:g(this,H,_).bind(this),user_spaces_counter:g(this,y,T).bind(this)}}}]);return t}(d.EventEmitter);function _(e){if(parseInt(e.params.GROUP_ID,10)===babelHelpers.classPrivateFieldGet(this,m)){this.emit("update")}}function T(e){var t=this;if(e.userId&&parseInt(e.userId,10)===babelHelpers.classPrivateFieldGet(this,w)){e.space=e.spaces.find((function(e){return e.id===babelHelpers.classPrivateFieldGet(t,m)}));if(!e.space){e.space={id:babelHelpers.classPrivateFieldGet(this,m),metrics:{countersTasksTotal:0,countersCalendarTotal:0,countersLiveFeedTotal:0}}}this.emit("updateCounters",e)}}var P;function k(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */k=function t(){return e};var e={},t=Object.prototype,i=t.hasOwnProperty,a=Object.defineProperty||function(e,t,i){e[t]=i.value},r="function"==typeof Symbol?Symbol:{},s=r.iterator||"@@iterator",n=r.asyncIterator||"@@asyncIterator",l=r.toStringTag||"@@toStringTag";function o(e,t,i){return Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{o({},"")}catch(e){o=function e(t,i,a){return t[i]=a}}function c(e,t,i,r){var s=t&&t.prototype instanceof p?t:p,n=Object.create(s.prototype),l=new P(r||[]);return a(n,"_invoke",{value:y(e,i,l)}),n}function u(e,t,i){try{return{type:"normal",arg:e.call(t,i)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var d={};function p(){}function h(){}function b(){}var v={};o(v,s,(function(){return this}));var f=Object.getPrototypeOf,g=f&&f(f(E([])));g&&g!==t&&i.call(g,s)&&(v=g);var m=b.prototype=p.prototype=Object.create(v);function w(e){["next","throw","return"].forEach((function(t){o(e,t,(function(e){return this._invoke(t,e)}))}))}function H(e,t){function r(a,s,n,l){var o=u(e[a],e,s);if("throw"!==o.type){var c=o.arg,d=c.value;return d&&"object"==babelHelpers["typeof"](d)&&i.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,n,l)}),(function(e){r("throw",e,n,l)})):t.resolve(d).then((function(e){c.value=e,n(c)}),(function(e){return r("throw",e,n,l)}))}l(o.arg)}var s;a(this,"_invoke",{value:function e(i,a){function n(){return new t((function(e,t){r(i,a,e,t)}))}return s=s?s.then(n,n):n()}})}function y(e,t,i){var a="suspendedStart";return function(r,s){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===r)throw s;return F()}for(i.method=r,i.arg=s;;){var n=i.delegate;if(n){var l=S(n,i);if(l){if(l===d)continue;return l}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===a)throw a="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a="executing";var o=u(e,t,i);if("normal"===o.type){if(a=i.done?"completed":"suspendedYield",o.arg===d)continue;return{value:o.arg,done:i.done}}"throw"===o.type&&(a="completed",i.method="throw",i.arg=o.arg)}}}function S(e,t){var i=t.method,a=e.iterator[i];if(undefined===a)return t.delegate=null,"throw"===i&&e.iterator["return"]&&(t.method="return",t.arg=undefined,S(e,t),"throw"===t.method)||"return"!==i&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+i+"' method")),d;var r=u(a,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,d;var s=r.arg;return s?s.done?(t[e.resultName]=s.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=undefined),t.delegate=null,d):s:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function E(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,r=function t(){for(;++a<e.length;)if(i.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=undefined,t.done=!0,t};return r.next=r}}return{next:F}}function F(){return{value:undefined,done:!0}}return h.prototype=b,a(m,"constructor",{value:b,configurable:!0}),a(b,"constructor",{value:h,configurable:!0}),h.displayName=o(b,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,o(e,l,"GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},w(H.prototype),o(H.prototype,n,(function(){return this})),e.AsyncIterator=H,e.async=function(t,i,a,r,s){void 0===s&&(s=Promise);var n=new H(c(t,i,a,r),s);return e.isGeneratorFunction(i)?n:n.next().then((function(e){return e.done?e.value:n.next()}))},w(m),o(m,l,"Generator"),o(m,s,(function(){return this})),o(m,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),i=[];for(var a in t)i.push(a);return i.reverse(),function e(){for(;i.length;){var a=i.pop();if(a in t)return e.value=a,e.done=!1,e}return e.done=!0,e}},e.values=E,P.prototype={constructor:P,reset:function e(t){if(this.prev=0,this.next=0,this.sent=this._sent=undefined,this.done=!1,this.delegate=null,this.method="next",this.arg=undefined,this.tryEntries.forEach(T),!t)for(var a in this)"t"===a.charAt(0)&&i.call(this,a)&&!isNaN(+a.slice(1))&&(this[a]=undefined)},stop:function e(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function e(t){if(this.done)throw t;var a=this;function r(e,i){return l.type="throw",l.arg=t,a.next=e,i&&(a.method="next",a.arg=undefined),!!i}for(var s=this.tryEntries.length-1;s>=0;--s){var n=this.tryEntries[s],l=n.completion;if("root"===n.tryLoc)return r("end");if(n.tryLoc<=this.prev){var o=i.call(n,"catchLoc"),c=i.call(n,"finallyLoc");if(o&&c){if(this.prev<n.catchLoc)return r(n.catchLoc,!0);if(this.prev<n.finallyLoc)return r(n.finallyLoc)}else if(o){if(this.prev<n.catchLoc)return r(n.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<n.finallyLoc)return r(n.finallyLoc)}}}},abrupt:function e(t,a){for(var r=this.tryEntries.length-1;r>=0;--r){var s=this.tryEntries[r];if(s.tryLoc<=this.prev&&i.call(s,"finallyLoc")&&this.prev<s.finallyLoc){var n=s;break}}n&&("break"===t||"continue"===t)&&n.tryLoc<=a&&a<=n.finallyLoc&&(n=null);var l=n?n.completion:{};return l.type=t,l.arg=a,n?(this.method="next",this.next=n.finallyLoc,d):this.complete(l)},complete:function e(t,i){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&i&&(this.next=i),d},finish:function e(t){for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i];if(a.finallyLoc===t)return this.complete(a.completion,a.afterLoc),T(a),d}},catch:function e(t){for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i];if(a.tryLoc===t){var r=a.completion;if("throw"===r.type){var s=r.arg;T(a)}return s}}throw new Error("illegal catch attempt")},delegateYield:function e(t,i,a){return this.delegate={iterator:E(t),resultName:i,nextLoc:a},"next"===this.method&&(this.arg=undefined),d}},e}function E(e,t,i){F(e,t);t.set(e,i)}function F(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}var I=new WeakMap;var C=function(e){babelHelpers.inherits(t,e);function t(e,i){var a;babelHelpers.classCallCheck(this,t);a=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e,i));E(babelHelpers.assertThisInitialized(a),I,{writable:true,value:void 0});babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(a),I,{createChatButton:null,cancelButton:null});a.handleDialogDestroy=a.handleDialogDestroy.bind(babelHelpers.assertThisInitialized(a));a.handleSelectedItemsUpdated=a.handleSelectedItemsUpdated.bind(babelHelpers.assertThisInitialized(a));a.bindEvents();return a}babelHelpers.createClass(t,[{key:"getContent",value:function e(){this.options.containerClass="sn-ui-selector-footer-create-chat";return u.Tag.render(P||(P=babelHelpers.taggedTemplateLiteral(["\n\t\t\t<div>\n\t\t\t\t","\n\t\t\t\t","\n\t\t\t</div>\n\t\t"])),this.renderCreateChatButton(),this.renderCancelButton())}},{key:"renderCreateChatButton",value:function e(){babelHelpers.classPrivateFieldGet(this,I).createChatButton=new n.Button({text:u.Loc.getMessage("SOCNET_ENTITY_SELECTOR_CREATE"),round:true,color:n.ButtonColor.PRIMARY,size:n.ButtonSize.SMALL,events:{click:this.createChatButtonClickHandler.bind(this)}});babelHelpers.classPrivateFieldGet(this,I).createChatButton.setDisabled(true);return babelHelpers.classPrivateFieldGet(this,I).createChatButton.getContainer()}},{key:"createChatButtonClickHandler",value:function e(){var t=this;var i=this.getDialog().getSelectedItems().map((function(e){return e.getId()}));babelHelpers.classPrivateFieldGet(this,I).createChatButton.setWaiting(true);this.createChatAction(i).then(function(){var e=babelHelpers.asyncToGenerator(k().mark((function e(i){var a,r,s;return k().wrap((function e(n){while(1)switch(n.prev=n.next){case 0:a="chat"+i.data;n.next=3;return u.Runtime.loadExtension("im.public.iframe");case 3:r=n.sent;s=r.Messenger;s.openChat(a);babelHelpers.classPrivateFieldGet(t,I).createChatButton.setWaiting(false);t.getDialog().deselectAll();t.getDialog().hide();case 9:case"end":return n.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},{key:"createChatAction",value:function e(t){return BX.ajax.runAction("socialnetwork.api.chat.create",{data:{userIds:t}})}},{key:"renderCancelButton",value:function e(){babelHelpers.classPrivateFieldGet(this,I).cancelButton=new n.Button({text:u.Loc.getMessage("SOCNET_ENTITY_SELECTOR_CANCEL"),round:true,color:n.ButtonColor.LIGHT_BORDER,size:n.ButtonSize.SMALL,events:{click:this.cancelButtonClickHandler.bind(this)}});return babelHelpers.classPrivateFieldGet(this,I).cancelButton.getContainer()}},{key:"cancelButtonClickHandler",value:function e(){this.getDialog().hide()}},{key:"bindEvents",value:function e(){this.getDialog().subscribe("onDestroy",this.handleDialogDestroy);this.getDialog().subscribe("Item:onSelect",this.handleSelectedItemsUpdated);this.getDialog().subscribe("Item:onDeselect",this.handleSelectedItemsUpdated)}},{key:"unbindEvents",value:function e(){this.getDialog().unsubscribe("onDestroy",this.handleDialogDestroy);this.getDialog().unsubscribe("Item:onSelect",this.handleSelectedItemsUpdated);this.getDialog().unsubscribe("Item:onDeselect",this.handleSelectedItemsUpdated)}},{key:"handleSelectedItemsUpdated",value:function e(){if(!babelHelpers.classPrivateFieldGet(this,I).createChatButton){return}babelHelpers.classPrivateFieldGet(this,I).createChatButton.setDisabled(this.getDialog().getSelectedItems().length===0)}},{key:"handleDialogDestroy",value:function e(){this.unbindEvents()}}]);return t}(s.DefaultFooter);var G;function L(e,t){W(e,t);t.add(e)}function M(e,t,i){W(e,t);t.set(e,i)}function W(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function N(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var x=new WeakMap;var z=new WeakMap;var D=new WeakMap;var A=new WeakMap;var O=new WeakMap;var B=new WeakMap;var R=new WeakMap;var j=new WeakSet;var U=new WeakSet;var X=new WeakSet;var V=function(e){babelHelpers.inherits(t,e);function t(e){var i,a,r,s,n;var l;babelHelpers.classCallCheck(this,t);l=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e));L(babelHelpers.assertThisInitialized(l),X);L(babelHelpers.assertThisInitialized(l),U);L(babelHelpers.assertThisInitialized(l),j);M(babelHelpers.assertThisInitialized(l),x,{writable:true,value:void 0});M(babelHelpers.assertThisInitialized(l),z,{writable:true,value:void 0});M(babelHelpers.assertThisInitialized(l),D,{writable:true,value:void 0});M(babelHelpers.assertThisInitialized(l),A,{writable:true,value:void 0});M(babelHelpers.assertThisInitialized(l),O,{writable:true,value:void 0});M(babelHelpers.assertThisInitialized(l),B,{writable:true,value:void 0});M(babelHelpers.assertThisInitialized(l),R,{writable:true,value:void 0});l.setEventNamespace("SocialNetwork.Spaces.UserSelector");babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(l),x,e.bindElement);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(l),z,e.title);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(l),D,(i=e.preselectedItems)!==null&&i!==void 0?i:[]);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(l),A,(a=e.onClose)!==null&&a!==void 0?a:function(){});babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(l),O,(r=e.onLoad)!==null&&r!==void 0?r:function(){});babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(l),B,(s=e.groupId)!==null&&s!==void 0?s:0);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(l),R,(n=e.createChat)!==null&&n!==void 0?n:false);return l}babelHelpers.createClass(t,[{key:"getDialog",value:function e(){if(!this.dialog){var t=babelHelpers.classPrivateFieldGet(this,z);var i=function(e){babelHelpers.inherits(i,e);function i(){babelHelpers.classCallCheck(this,i);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(i).apply(this,arguments))}babelHelpers.createClass(i,[{key:"render",value:function e(){return u.Tag.render(G||(G=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t\t\t<div class="sn-spaces__entity-dialog-header">',"</div>\n\t\t\t\t\t"])),t)}}]);return i}(s.BaseHeader);this.dialog=new s.Dialog({targetNode:babelHelpers.classPrivateFieldGet(this,x),width:400,dropdownMode:true,header:i,enableSearch:true,context:"socialnetwork.spaces",preselectedItems:babelHelpers.classPrivateFieldGet(this,D),entities:[{id:"user",substituteEntityId:babelHelpers.classPrivateFieldGet(this,R)?"project-user":null,options:{footerInviteIntranetOnly:true,showInvitationFooter:!babelHelpers.classPrivateFieldGet(this,R),projectId:babelHelpers.classPrivateFieldGet(this,B)}}],searchTabOptions:babelHelpers.classPrivateFieldGet(this,R)&&{stubOptions:{title:u.Loc.getMessage("SN_SPACES_USER_SELECTOR_SEARCH_TAB_EMPTY_TITLE"),subtitle:u.Loc.getMessage("SN_SPACES_USER_SELECTOR_SEARCH_TAB_EMPTY_TEXT")}},events:{onHide:babelHelpers.classPrivateFieldGet(this,A),onLoad:babelHelpers.classPrivateFieldGet(this,O),"SearchTab:onLoad":babelHelpers.classPrivateFieldGet(this,O)}});if(babelHelpers.classPrivateFieldGet(this,R)){this.dialog.setFooter(C)}N(this,j,q).call(this)}return this.dialog}},{key:"reload",value:function e(){this.dialog.loadState="UNSENT";this.dialog.load()}}]);return t}(d.EventEmitter);function q(){var e=this;d.EventEmitter.subscribe("SidePanel.Slider:onOpenStart",(function(t){var i=t.target;if(N(e,X,J).call(e)){u.Dom.style(N(e,X,J).call(e),"zIndex",i.getZindex())}}));d.EventEmitter.subscribe("SidePanel.Slider:onBeforeCloseComplete",(function(t){var i=t.target;if(N(e,U,Y).call(e,i)&&N(e,X,J).call(e)){u.Dom.style(N(e,X,J).call(e),"zIndex","")}}))}function Y(e){var t;return((t=e.options.data)===null||t===void 0?void 0:t.entitySelectorId)===this.dialog.getId()}function J(){return document.getElementById("bx-im-bar")}function Z(e,t){Q(e,t);t.add(e)}function K(e,t,i){Q(e,t);t.set(e,i)}function Q(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function $(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var ee=new WeakMap;var te=new WeakMap;var ie=new WeakMap;var ae=new WeakSet;var re=function(){function e(t){babelHelpers.classCallCheck(this,e);Z(this,ae);K(this,ee,{writable:true,value:void 0});K(this,te,{writable:true,value:void 0});K(this,ie,{writable:true,value:void 0});babelHelpers.classPrivateFieldSet(this,ee,t.entityType);babelHelpers.classPrivateFieldSet(this,te,t.entityId);babelHelpers.classPrivateFieldSet(this,ie,t.groupMembersList)}babelHelpers.createClass(e,[{key:"startVideoCall",value:function e(){var t=this;u.ajax.runAction("intranet.controlbutton.getVideoCallChat",{data:{entityType:babelHelpers.classPrivateFieldGet(this,ee)==="group"?"workgroup":"user",entityId:babelHelpers.classPrivateFieldGet(this,te)},analyticsLabel:{entity:babelHelpers.classPrivateFieldGet(this,ee)}}).then((function(e){if(e.data){r.Messenger.startVideoCall("chat".concat(e.data),true)}t.chatLockCounter=0}),(function(e){if(e.errors[0].code==="lock_error"&&t.chatLockCounter<4){t.chatLockCounter++;t.startVideoCall()}}))}},{key:"openChat",value:function e(){var t=this;u.ajax.runAction("intranet.controlbutton.getChat",{data:{entityType:babelHelpers.classPrivateFieldGet(this,ee)==="group"?"workgroup":"user",entityId:babelHelpers.classPrivateFieldGet(this,te)},analyticsLabel:{entity:babelHelpers.classPrivateFieldGet(this,ee)}}).then((function(e){if(e.data){r.Messenger.openChat("chat".concat(parseInt(e.data,10)))}t.chatLockCounter=0}),(function(e){if(e.errors[0].code==="lock_error"&&t.chatLockCounter<4){t.chatLockCounter++;t.openChat()}}))}},{key:"createChat",value:function e(t){this.getDialog(t).show()}},{key:"getDialog",value:function e(t){if(!this.userSelector){this.userSelector=new V({bindElement:t,createChat:true,title:u.Loc.getMessage("SN_SPACES_CREATE_CHAT"),onLoad:$(this,ae,se).bind(this),groupId:babelHelpers.classPrivateFieldGet(this,te)})}return this.userSelector.getDialog()}},{key:"update",value:function e(t){var i=this;t.then((function(e){var t;babelHelpers.classPrivateFieldSet(i,ie,e.groupMembersList);(t=i.userSelector)===null||t===void 0?void 0:t.reload()}))}}]);return e}();function se(){var e=babelHelpers.classPrivateFieldGet(this,ie).filter((function(e){return e.isMember})).map((function(e){return parseInt(e.id)}));this.getDialog().getItems().forEach((function(t){var i=!e.includes(t.getId());t.setHidden(i);if(i&&t.isSelected()){t.deselect()}}))}function ne(e,t){oe(e,t);t.add(e)}function le(e,t,i){oe(e,t);t.set(e,i)}function oe(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function ce(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var ue=new WeakMap;var de=new WeakMap;var pe=new WeakMap;var he=new WeakSet;var be=new WeakSet;var ve=new WeakSet;var fe=new WeakSet;var ge=new WeakSet;var me=new WeakSet;var we=function(e){babelHelpers.inherits(t,e);function t(e){var i;babelHelpers.classCallCheck(this,t);i=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e));ne(babelHelpers.assertThisInitialized(i),me);ne(babelHelpers.assertThisInitialized(i),ge);ne(babelHelpers.assertThisInitialized(i),fe);ne(babelHelpers.assertThisInitialized(i),ve);ne(babelHelpers.assertThisInitialized(i),be);ne(babelHelpers.assertThisInitialized(i),he);le(babelHelpers.assertThisInitialized(i),ue,{writable:true,value:void 0});le(babelHelpers.assertThisInitialized(i),de,{writable:true,value:void 0});le(babelHelpers.assertThisInitialized(i),pe,{writable:true,value:void 0});i.setEventNamespace("SocialNetwork.Spaces.Invite");babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),ue,e.node);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),de,ce(babelHelpers.assertThisInitialized(i),fe,_e).call(babelHelpers.assertThisInitialized(i),e.groupMembersList));babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),pe,ce(babelHelpers.assertThisInitialized(i),ge,Te).call(babelHelpers.assertThisInitialized(i),e.groupMembersList));return i}babelHelpers.createClass(t,[{key:"show",value:function e(){this.getDialog().show()}},{key:"close",value:function e(){this.getDialog().hide()}},{key:"isShown",value:function e(){this.getDialogPopup().isShown()}},{key:"getDialogPopup",value:function e(){return this.getDialog().getPopup()}},{key:"getDialog",value:function e(){if(!this.dialog){var t=new V({bindElement:babelHelpers.classPrivateFieldGet(this,ue),title:u.Loc.getMessage("SN_SPACES_MENU_SPACE_INVITE_MEMBERS"),preselectedItems:ce(this,me,Pe).call(this),onClose:ce(this,he,He).bind(this),onLoad:ce(this,ve,Se).bind(this)});this.dialog=t.getDialog();this.dialog.getPopup().setAngle({position:"top",offset:babelHelpers.classPrivateFieldGet(this,ue).offsetWidth+parseInt(getComputedStyle(babelHelpers.classPrivateFieldGet(this,ue)).marginLeft)})}return this.dialog}},{key:"update",value:function e(t){var i=this;t.then((function(e){babelHelpers.classPrivateFieldSet(i,de,ce(i,fe,_e).call(i,e.groupMembersList));babelHelpers.classPrivateFieldSet(i,pe,ce(i,ge,Te).call(i,e.groupMembersList));ce(i,ve,Se).call(i)}))}}]);return t}(d.EventEmitter);function He(){var e=babelHelpers.toConsumableArray(this.dialog.getSelectedItems()).map((function(e){return e.id}));if(!ce(this,be,ye).call(this,e,babelHelpers.classPrivateFieldGet(this,de))){babelHelpers.classPrivateFieldSet(this,de,e);this.emit("usersSelected",babelHelpers.classPrivateFieldGet(this,de))}this.emit("onClose")}function ye(e,t){return babelHelpers.toConsumableArray(e).sort().toString()===babelHelpers.toConsumableArray(t).sort().toString()}function Se(){var e,t=this;(e=this.dialog)===null||e===void 0?void 0:e.getItems().forEach((function(e){var i=!babelHelpers.classPrivateFieldGet(t,de).includes(e.getId());var a=babelHelpers.classPrivateFieldGet(t,pe).includes(e.getId());e.setHidden(a);if((a||i)&&e.isSelected()){e.deselect()}}))}function _e(e){return e.filter((function(e){return e.invited})).map((function(e){return parseInt(e.id)}))}function Te(e){return e.filter((function(e){return!e.invited})).map((function(e){return parseInt(e.id)}))}function Pe(){return babelHelpers.classPrivateFieldGet(this,de).map((function(e){return["user",parseInt(e)]}))}var ke;var Ee=function(e){babelHelpers.inherits(t,e);function t(){var e;babelHelpers.classCallCheck(this,t);e=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));e.setEventNamespace("BX.Socialnetwork.Spaces.Settings.ChatAction");return e}babelHelpers.createClass(t,[{key:"render",value:function e(){var t=this;var i="spaces-settings-video-call";var a="spaces-settings-open-chat";var r="spaces-settings-create-chat";var s=u.Tag.render(ke||(ke=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="sn-spaces__popup-communication">\n\t\t\t\t<div\n\t\t\t\t\tdata-id="','"\n\t\t\t\t\tclass="sn-spaces__popup-communication-item"\n\t\t\t\t>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass="ui-icon-set --video-1"\n\t\t\t\t\t\tstyle="--ui-icon-set__icon-size: 26px;"\n\t\t\t\t\t></div>\n\t\t\t\t\t<div class="sn-spaces__popup-communication-item_text">\n\t\t\t\t\t\t','\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tdata-id="','"\n\t\t\t\t\tclass="sn-spaces__popup-communication-item"\n\t\t\t\t>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass="ui-icon-set --chat-1"\n\t\t\t\t\t\tstyle="--ui-icon-set__icon-size: 26px;"\n\t\t\t\t\t></div>\n\t\t\t\t\t<div class="sn-spaces__popup-communication-item_text">\n\t\t\t\t\t\t','\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tdata-id="','"\n\t\t\t\t\tclass="sn-spaces__popup-communication-item"\n\t\t\t\t>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass="ui-icon-set --add-chat"\n\t\t\t\t\t\tstyle="--ui-icon-set__icon-size: 26px;"\n\t\t\t\t\t></div>\n\t\t\t\t\t<div class="sn-spaces__popup-communication-item_text">\n\t\t\t\t\t\t',"\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t"])),i,u.Loc.getMessage("SN_SPACES_MENU_CHAT_VIDEO_CALL_HD"),a,u.Loc.getMessage("SN_SPACES_MENU_CHAT_OPEN"),r,u.Loc.getMessage("SN_SPACES_MENU_CHAT_CREATE"));u.Event.bind(s.querySelector("[data-id='".concat(i,"']")),"click",(function(){return t.emit("videoCall")}));u.Event.bind(s.querySelector("[data-id='".concat(a,"']")),"click",(function(){return t.emit("openChat")}));u.Event.bind(s.querySelector("[data-id='".concat(r,"']")),"click",(function(){return t.emit("createChat")}));return s}}]);return t}(d.EventEmitter);var Fe;function Ie(e,t){Ge(e,t);t.add(e)}function Ce(e,t,i){Ge(e,t);t.set(e,i)}function Ge(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function Le(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var Me=new WeakMap;var We=new WeakMap;var Ne=new WeakMap;var xe=new WeakSet;var ze=new WeakSet;var De=new WeakSet;var Ae=new WeakSet;var Oe=new WeakSet;var Be=function(e){babelHelpers.inherits(t,e);function t(e){var i;babelHelpers.classCallCheck(this,t);i=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));Ie(babelHelpers.assertThisInitialized(i),Oe);Ie(babelHelpers.assertThisInitialized(i),Ae);Ie(babelHelpers.assertThisInitialized(i),De);Ie(babelHelpers.assertThisInitialized(i),ze);Ie(babelHelpers.assertThisInitialized(i),xe);Ce(babelHelpers.assertThisInitialized(i),Me,{writable:true,value:void 0});Ce(babelHelpers.assertThisInitialized(i),We,{writable:true,value:void 0});Ce(babelHelpers.assertThisInitialized(i),Ne,{writable:true,value:void 0});i.setEventNamespace("BX.Socialnetwork.Spaces.Settings.Follow");babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),Me,e.follow);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),We,false);Le(babelHelpers.assertThisInitialized(i),Oe,Ve).call(babelHelpers.assertThisInitialized(i));return i}babelHelpers.createClass(t,[{key:"render",value:function e(){var t="spaces-settings-follow";var i=babelHelpers.classPrivateFieldGet(this,Me)?"--sound-on":"--sound-off";babelHelpers.classPrivateFieldSet(this,Ne,u.Tag.render(Fe||(Fe=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div\n\t\t\t\tdata-id="','"\n\t\t\t\tclass="sn-spaces__popup-item --mini"\n\t\t\t>\n\t\t\t\t<div class="sn-spaces__popup-icon-round">\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass="ui-icon-set ','"\n\t\t\t\t\t\tstyle="--ui-icon-set__icon-size: 22px;"\n\t\t\t\t\t></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="sn-spaces__popup-icon-round-name">\n\t\t\t\t\t',"\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t"])),t,i,Le(this,Ae,Xe).call(this,babelHelpers.classPrivateFieldGet(this,Me))));u.Event.bind(babelHelpers.classPrivateFieldGet(this,Ne),"click",Le(this,xe,Re).bind(this));return babelHelpers.classPrivateFieldGet(this,Ne)}},{key:"unDisable",value:function e(){babelHelpers.classPrivateFieldSet(this,We,false)}}]);return t}(d.EventEmitter);function Re(){if(babelHelpers.classPrivateFieldGet(this,We)){return}babelHelpers.classPrivateFieldSet(this,We,true);babelHelpers.classPrivateFieldSet(this,Me,!babelHelpers.classPrivateFieldGet(this,Me));this.emit("update",babelHelpers.classPrivateFieldGet(this,Me));Le(this,ze,je).call(this,babelHelpers.classPrivateFieldGet(this,Me));Le(this,De,Ue).call(this,babelHelpers.classPrivateFieldGet(this,Me))}function je(e){var t=babelHelpers.classPrivateFieldGet(this,Ne).querySelector(".ui-icon-set");if(e){u.Dom.removeClass(t,"--sound-off");u.Dom.addClass(t,"--sound-on")}else{u.Dom.removeClass(t,"--sound-on");u.Dom.addClass(t,"--sound-off")}}function Ue(e){var t=babelHelpers.classPrivateFieldGet(this,Ne).querySelector(".sn-spaces__popup-icon-round-name");t.textContent=Le(this,Ae,Xe).call(this,e)}function Xe(e){return e?u.Loc.getMessage("SN_SPACES_MENU_FOLLOW_N"):u.Loc.getMessage("SN_SPACES_MENU_FOLLOW_Y")}function Ve(){d.EventEmitter.subscribe("followChanged",function(e){babelHelpers.classPrivateFieldSet(this,Me,e.data.isFollowed);Le(this,De,Ue).call(this,babelHelpers.classPrivateFieldGet(this,Me));Le(this,ze,je).call(this,babelHelpers.classPrivateFieldGet(this,Me))}.bind(this))}var qe,Ye,Je,Ze,Ke,Qe,$e,et,tt,it,at;function rt(e,t){nt(e,t);t.add(e)}function st(e,t,i){nt(e,t);t.set(e,i)}function nt(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function lt(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var ot=new WeakMap;var ct=new WeakMap;var ut=new WeakMap;var dt=new WeakMap;var pt=new WeakMap;var ht=new WeakMap;var bt=new WeakMap;var vt=new WeakSet;var ft=new WeakSet;var gt=new WeakSet;var mt=new WeakSet;var wt=new WeakSet;var Ht=new WeakSet;var yt=new WeakSet;var St=new WeakSet;var _t=new WeakSet;var Tt=new WeakSet;var Pt=new WeakSet;var kt=new WeakSet;var Et=new WeakSet;var Ft=new WeakSet;var It=new WeakSet;var Ct=new WeakSet;var Gt=new WeakSet;var Lt=new WeakSet;var Mt=function(e){babelHelpers.inherits(t,e);function t(e){var i;babelHelpers.classCallCheck(this,t);i=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));rt(babelHelpers.assertThisInitialized(i),Lt);rt(babelHelpers.assertThisInitialized(i),Gt);rt(babelHelpers.assertThisInitialized(i),Ct);rt(babelHelpers.assertThisInitialized(i),It);rt(babelHelpers.assertThisInitialized(i),Ft);rt(babelHelpers.assertThisInitialized(i),Et);rt(babelHelpers.assertThisInitialized(i),kt);rt(babelHelpers.assertThisInitialized(i),Pt);rt(babelHelpers.assertThisInitialized(i),Tt);rt(babelHelpers.assertThisInitialized(i),_t);rt(babelHelpers.assertThisInitialized(i),St);rt(babelHelpers.assertThisInitialized(i),yt);rt(babelHelpers.assertThisInitialized(i),Ht);rt(babelHelpers.assertThisInitialized(i),wt);rt(babelHelpers.assertThisInitialized(i),mt);rt(babelHelpers.assertThisInitialized(i),gt);rt(babelHelpers.assertThisInitialized(i),ft);rt(babelHelpers.assertThisInitialized(i),vt);st(babelHelpers.assertThisInitialized(i),ot,{writable:true,value:void 0});st(babelHelpers.assertThisInitialized(i),ct,{writable:true,value:void 0});st(babelHelpers.assertThisInitialized(i),ut,{writable:true,value:void 0});st(babelHelpers.assertThisInitialized(i),dt,{writable:true,value:void 0});st(babelHelpers.assertThisInitialized(i),pt,{writable:true,value:void 0});st(babelHelpers.assertThisInitialized(i),ht,{writable:true,value:void 0});st(babelHelpers.assertThisInitialized(i),bt,{writable:true,value:void 0});i.setEventNamespace("BX.Socialnetwork.Spaces.Settings.Info");babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),bt,{});babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),ot,e.groupId);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),ct,e.title);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),ut,e.logo);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),dt,e.privacyCode);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),ht,e.actions);return i}babelHelpers.createClass(t,[{key:"update",value:function e(t){var i=t.name,a=t.privacyCode,r=t.avatar;if(i){lt(this,wt,Dt).call(this,i)}if(a){lt(this,Gt,Zt).call(this,a)}if(r){lt(this,Lt,Kt).call(this,r)}}},{key:"render",value:function e(){var t=this;babelHelpers.classPrivateFieldGet(this,bt).wrapNode=u.Tag.render(qe||(qe=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="sn-spaces__popup-item --main">\n\t\t\t\t<div class="sn-spaces__popup-settings_logo">\n\t\t\t\t\t','\n\t\t\t\t</div>\n\t\t\t\t<div class="sn-spaces__popup-settings_info">\n\t\t\t\t\t',"\n\t\t\t\t\t","\n\t\t\t\t\t","\n\t\t\t\t</div>\n\t\t\t\t","\n\t\t\t</div>\n\t\t"])),lt(this,vt,Wt).call(this),lt(this,Ht,At).call(this),lt(this,St,Bt).call(this),lt(this,Tt,jt).call(this),lt(this,ft,Nt).call(this));u.Event.bind(babelHelpers.classPrivateFieldGet(this,bt).wrapNode,"click",(function(e){if(e.target===babelHelpers.classPrivateFieldGet(t,bt).wrapNode||e.target===babelHelpers.classPrivateFieldGet(t,bt).moreButtonNode){t.emit("more")}}));return babelHelpers.classPrivateFieldGet(this,bt).wrapNode}}]);return t}(d.EventEmitter);function Wt(){var e,t;var i=new l.Logo(babelHelpers.classPrivateFieldGet(this,ut));var a=u.Tag.render(Ye||(Ye=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="sn-spaces__space-logo ','">\n\t\t\t\t',"\n\t\t\t</div>\n\t\t"])),(e=i.getClass())!==null&&e!==void 0?e:"",i.render());(t=babelHelpers.classPrivateFieldGet(this,bt).avatar)===null||t===void 0?void 0:t.replaceWith(a);babelHelpers.classPrivateFieldGet(this,bt).avatar=a;return babelHelpers.classPrivateFieldGet(this,bt).avatar}function Nt(){babelHelpers.classPrivateFieldGet(this,bt).moreButtonNode=u.Tag.render(Je||(Je=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div \n\t\t\t\tdata-id="spaces-settings-space-info-btn"\n\t\t\t\tclass="ui-icon-set --chevron-right"\n\t\t\t\ttitle="','"\n\t\t\t></div>\n\t\t'])),u.Loc.getMessage("SN_SPACES_MENU_INFO_MORE_BTN"));return babelHelpers.classPrivateFieldGet(this,bt).moreButtonNode}function xt(){u.Dom.addClass(babelHelpers.classPrivateFieldGet(this,bt).titleNode,"--hidden");u.Dom.removeClass(babelHelpers.classPrivateFieldGet(this,bt).editTitleNode,"--hidden");var e=babelHelpers.classPrivateFieldGet(this,bt).editTitleInput;e.focus();e.setSelectionRange(e.value.length,e.value.length)}function zt(){u.Dom.addClass(babelHelpers.classPrivateFieldGet(this,bt).editTitleNode,"--hidden");u.Dom.removeClass(babelHelpers.classPrivateFieldGet(this,bt).titleNode,"--hidden")}function Dt(e){babelHelpers.classPrivateFieldSet(this,ct,e);babelHelpers.classPrivateFieldGet(this,bt).editTitleInput.value=babelHelpers.classPrivateFieldGet(this,ct);babelHelpers.classPrivateFieldGet(this,bt).titleTextNode.textContent=u.Text.encode(babelHelpers.classPrivateFieldGet(this,ct))}function At(){babelHelpers.classPrivateFieldGet(this,bt).titleNode=u.Tag.render(Ze||(Ze=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="sn-spaces__popup-settings_title">\n\t\t\t\t',"\n\t\t\t\t","\n\t\t\t</div>\n\t\t"])),lt(this,yt,Ot).call(this),babelHelpers.classPrivateFieldGet(this,ht).canEdit?lt(this,Ft,qt).call(this):"");return babelHelpers.classPrivateFieldGet(this,bt).titleNode}function Ot(){babelHelpers.classPrivateFieldGet(this,bt).titleTextNode=u.Tag.render(Ke||(Ke=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div\n\t\t\t\tdata-id="spaces-settings-space-info-name"\n\t\t\t\tclass="sn-spaces__popup-settings_name"\n\t\t\t>\n\t\t\t\t',"\n\t\t\t</div>\n\t\t"])),u.Text.encode(babelHelpers.classPrivateFieldGet(this,ct)));return babelHelpers.classPrivateFieldGet(this,bt).titleTextNode}function Bt(){var e=this;var t="ui-ctl ui-ctl-textbox ui-ctl--w100 ui-ctl--transp "+"ui-ctl-no-border ui-ctl-xs ui-ctl-no-padding";babelHelpers.classPrivateFieldGet(this,bt).editTitleNode=u.Tag.render(Qe||(Qe=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div\n\t\t\t\tdata-id="spaces-settings-space-info-edit"\n\t\t\t\tclass="sn-spaces__popup-settings_title --hidden"\n\t\t\t>\n\t\t\t\t<div class="','">\n\t\t\t\t\t',"\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t"])),t,lt(this,_t,Rt).call(this));var i=babelHelpers.classPrivateFieldGet(this,bt).editTitleInput;u.Event.bind(i,"keydown",(function(e){if(e.key==="Escape"||e.key==="Enter"){i.blur();e.stopImmediatePropagation()}}));u.Event.bind(i,"blur",(function(){if(babelHelpers.classPrivateFieldGet(e,ct)!==i.value){lt(e,wt,Dt).call(e,i.value);h.Controller.changeTitle(babelHelpers.classPrivateFieldGet(e,ot),babelHelpers.classPrivateFieldGet(e,ct));e.emit("changeTitle",babelHelpers.classPrivateFieldGet(e,ct))}lt(e,mt,zt).call(e)}));return babelHelpers.classPrivateFieldGet(this,bt).editTitleNode}function Rt(){babelHelpers.classPrivateFieldGet(this,bt).editTitleInput=u.Tag.render($e||($e=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<input\n\t\t\t\ttype="text"\n\t\t\t\tclass="ui-ctl-element sn-spaces__popup-settings_name-input"\n\t\t\t\tvalue="','"\n\t\t\t>\n\t\t'])),u.Text.encode(babelHelpers.classPrivateFieldGet(this,ct)));return babelHelpers.classPrivateFieldGet(this,bt).editTitleInput}function jt(){babelHelpers.classPrivateFieldSet(this,pt,lt(this,Pt,Ut).call(this));var e=u.Tag.render(et||(et=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div\n\t\t\t\tdata-id="spaces-settings-space-info-privacy"\n\t\t\t\tclass="sn-spaces__popup-settings_select-private"\n\t\t\t>\n\t\t\t\t',"\n\t\t\t\t","\n\t\t\t</div>\n\t\t"])),lt(this,Et,Vt).call(this),babelHelpers.classPrivateFieldGet(this,ht).canEdit?lt(this,It,Yt).call(this):"");if(babelHelpers.classPrivateFieldGet(this,ht).canEdit){u.Event.bind(e,"click",lt(this,kt,Xt).bind(this))}return e}function Ut(){var e=this;var t=new o.GroupPrivacy({privacyCode:babelHelpers.classPrivateFieldGet(this,dt)});t.subscribe("onShow",(function(){return e.emit("setAutoHide",false)}));t.subscribe("onAfterClose",(function(){return e.emit("setAutoHide",true)}));t.subscribe("changePrivacy",lt(this,Ct,Jt).bind(this));return t}function Xt(e){babelHelpers.classPrivateFieldGet(this,pt).show(e.target)}function Vt(){babelHelpers.classPrivateFieldGet(this,bt).privacyTextNode=u.Tag.render(tt||(tt=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="sn-spaces__popup-settings_select-private-text">\n\t\t\t\t',"\n\t\t\t</div>\n\t\t"])),babelHelpers.classPrivateFieldGet(this,pt).getLabel());return babelHelpers.classPrivateFieldGet(this,bt).privacyTextNode}function qt(){var e=u.Tag.render(it||(it=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div\n\t\t\t\tdata-id="spaces-settings-space-info-title-edit" \n\t\t\t\tclass="ui-icon-set --pencil-40"\n\t\t\t\tstyle="--ui-icon-set__icon-size: 18px;"\n\t\t\t></div>\n\t\t'])));u.Event.bind(e,"click",lt(this,gt,xt).bind(this));return e}function Yt(){return u.Tag.render(at||(at=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div\n\t\t\t\tclass="ui-icon-set --chevron-down"\n\t\t\t\tstyle="--ui-icon-set__icon-size: 14px;"\n\t\t\t></div>\n\t\t'])))}function Jt(e){var t=e.getData();lt(this,Gt,Zt).call(this,t);h.Controller.changePrivacy(babelHelpers.classPrivateFieldGet(this,ot),t);this.emit("changePrivacy",t)}function Zt(e){babelHelpers.classPrivateFieldSet(this,dt,e);babelHelpers.classPrivateFieldGet(this,pt).setPrivacy(babelHelpers.classPrivateFieldGet(this,dt));babelHelpers.classPrivateFieldGet(this,bt).privacyTextNode.textContent=babelHelpers.classPrivateFieldGet(this,pt).getLabel()}function Kt(e){babelHelpers.classPrivateFieldSet(this,ut,{id:e,type:"image"});lt(this,vt,Wt).call(this)}var Qt,$t,ei,ti,ii,ai,ri,si,ni,li,oi;function ci(e,t){di(e,t);t.add(e)}function ui(e,t,i){di(e,t);t.set(e,i)}function di(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function pi(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var hi=new WeakMap;var bi=new WeakMap;var vi=new WeakMap;var fi=new WeakMap;var gi=new WeakSet;var mi=new WeakSet;var wi=new WeakSet;var Hi=new WeakSet;var yi=new WeakSet;var Si=new WeakSet;var _i=new WeakSet;var Ti=new WeakSet;var Pi=new WeakSet;var ki=new WeakSet;var Ei=new WeakSet;var Fi=new WeakSet;var Ii=function(e){babelHelpers.inherits(t,e);function t(e){var i;babelHelpers.classCallCheck(this,t);i=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));ci(babelHelpers.assertThisInitialized(i),Fi);ci(babelHelpers.assertThisInitialized(i),Ei);ci(babelHelpers.assertThisInitialized(i),ki);ci(babelHelpers.assertThisInitialized(i),Pi);ci(babelHelpers.assertThisInitialized(i),Ti);ci(babelHelpers.assertThisInitialized(i),_i);ci(babelHelpers.assertThisInitialized(i),Si);ci(babelHelpers.assertThisInitialized(i),yi);ci(babelHelpers.assertThisInitialized(i),Hi);ci(babelHelpers.assertThisInitialized(i),wi);ci(babelHelpers.assertThisInitialized(i),mi);ci(babelHelpers.assertThisInitialized(i),gi);ui(babelHelpers.assertThisInitialized(i),hi,{writable:true,value:void 0});ui(babelHelpers.assertThisInitialized(i),bi,{writable:true,value:void 0});ui(babelHelpers.assertThisInitialized(i),vi,{writable:true,value:void 0});ui(babelHelpers.assertThisInitialized(i),fi,{writable:true,value:void 0});i.setEventNamespace("BX.Socialnetwork.Spaces.Settings.Members");babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),hi,e.amount);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),bi,e.list);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),vi,e.counters);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),fi,e.actions);return i}babelHelpers.createClass(t,[{key:"render",value:function e(){var t=this;var i="spaces-settings-create-members-btn";var a=u.Tag.render(Qt||(Qt=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="sn-spaces__popup-item_expandable">\n\t\t\t\t<div class="sn-spaces__popup-item --expandable">\n\t\t\t\t\t<div class="sn-spaces__popup-item_icon-block">\n\t\t\t\t\t\t<div class="sn-spaces__popup-item_icon">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclass="ui-icon-set --persons-3"\n\t\t\t\t\t\t\t\tstyle="--ui-icon-set__icon-size: 27px;"\n\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="sn-spaces__popup-item_main-info">\n\t\t\t\t\t\t<div class="sn-spaces__popup-item_members">\n\t\t\t\t\t\t\t<div class="sn-spaces__popup-item_members-info">\n\t\t\t\t\t\t\t\t',": ","\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t","\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t","\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t","\n\t\t\t</div>\n\t\t"])),u.Loc.getMessage("SN_SPACES_MENU_MEMBERS_LABEL"),parseInt(babelHelpers.classPrivateFieldGet(this,hi),10),pi(this,Pi,Di).call(this)?pi(this,gi,Ci).call(this,i):"",pi(this,mi,Gi).call(this),pi(this,Pi,Di).call(this)&&pi(this,ki,Ai).call(this)?pi(this,wi,Li).call(this):"");var r=a.querySelector("[data-id='".concat(i,"']"));u.Event.bind(a.querySelector(".--expandable"),"click",(function(e){if(!r||!e.target.isEqualNode(r)){t.emit("showUsers","all")}}));return a}}]);return t}(d.EventEmitter);function Ci(e){var t=this;var i=u.Tag.render($t||($t=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div \n\t\t\t\tdata-id="','" \n\t\t\t\tclass="ui-popupcomponentmaker__btn --border sn----spaces__popup-settings_btn"\n\t\t\t>\n\t\t\t\t',"\n\t\t\t</div>\n\t\t"])),e,u.Loc.getMessage("SN_SPACES_MENU_MEMBERS_INVITE_BTN"));u.Event.bind(i,"click",(function(){return t.emit("invite")}));return i}function Gi(){var e=this;var t=pi(this,Ti,zi).call(this);var i=3;var a=t.moderators.slice(0,i);var r=t.users.slice(0,i);var s=babelHelpers.classPrivateFieldGet(this,hi)-(1+a.length+r.length);return u.Tag.render(ei||(ei=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="sn-spaces__popup-item_lists">\n\t\t\t\t<div class="sn-spaces__popup-item_list">\n\t\t\t\t\t','\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tclass="sn-spaces__popup-item_list"\n\t\t\t\t\tstyle="','"\n\t\t\t\t>\n\t\t\t\t\t','\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tclass="sn-spaces__popup-item_list"\n\t\t\t\t\tstyle="','"\n\t\t\t\t>\n\t\t\t\t\t','\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tclass="sn-spaces__popup-item_list-quantity"\n\t\t\t\t\tstyle="','"\n\t\t\t\t>+',"</div>\n\t\t\t</div>\n\t\t"])),pi(this,Hi,Mi).call(this,t.owner),a.length>0?"":"display: none;",a.map((function(t){return pi(e,yi,Wi).call(e,t)})),r.length>0?"":"display: none;",r.map((function(t){return pi(e,Si,Ni).call(e,t)})),s>0?"":"display: none;",s)}function Li(){var e=this;var t=parseInt(babelHelpers.classPrivateFieldGet(this,vi).workgroup_requests_out,10);var i=parseInt(babelHelpers.classPrivateFieldGet(this,vi).workgroup_requests_in,10);var a="spaces-settings-members-counter-out";var r="spaces-settings-members-counter-in";var s=function i(){if(!pi(e,Ei,Oi).call(e)){return""}return u.Tag.render(ti||(ti=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div data-id="','" class="sn-spaces__popup-item --primary">\n\t\t\t\t\t<div class="sn-spaces__popup-item_counter">','</div>\n\t\t\t\t\t<span class="">','</span>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass="ui-icon-set --chevron-right"\n\t\t\t\t\t\tstyle="--ui-icon-set__icon-size: 14px;"\n\t\t\t\t\t></div>\n\t\t\t\t</div>\n\t\t\t'])),a,t,u.Loc.getMessage("SN_SPACES_MENU_MEMBERS_GREEN_LABEL"))};var n=function t(){if(!pi(e,Fi,Bi).call(e)){return""}return u.Tag.render(ii||(ii=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div data-id="','" class="sn-spaces__popup-item --warning">\n\t\t\t\t\t<div class="sn-spaces__popup-item_counter">','</div>\n\t\t\t\t\t<span class="">','</span>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass="ui-icon-set --chevron-right"\n\t\t\t\t\t\tstyle="--ui-icon-set__icon-size: 14px;"\n\t\t\t\t\t></div>\n\t\t\t\t</div>\n\t\t\t'])),r,i,u.Loc.getMessage("SN_SPACES_MENU_MEMBERS_RED_LABEL"))};var l=u.Tag.render(ai||(ai=babelHelpers.taggedTemplateLiteral(["\n\t\t\t<div>\n\t\t\t\t","\n\t\t\t\t","\n\t\t\t</div>\n\t\t"])),s(),n());u.Event.bind(l.querySelector("[data-id='".concat(a,"']")),"click",(function(){return e.emit("showUsers","out")}));u.Event.bind(l.querySelector("[data-id='".concat(r,"']")),"click",(function(){return e.emit("showUsers","in")}));return l}function Mi(e){var t="/bitrix/components/bitrix/socialnetwork.spaces.menu/"+"templates/.default/images/sn-spaces__popup-icon_super-admin.svg";var i=e.photo?"":"ui-icon ui-icon-common-user ui-icon-xs";return u.Tag.render(ri||(ri=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="sn-spaces__popup-item_list-item --super-admin ','">\n\t\t\t\t','\n\t\t\t\t<img src="','" class="sn-spaces__popup-icon_svg" alt="crown">\n\t\t\t</div>\n\t\t'])),i,pi(this,_i,xi).call(this,e.photo),t)}function Wi(e){var t="/bitrix/components/bitrix/socialnetwork.spaces.menu/"+"templates/.default/images/sn-spaces__popup-icon_admin.svg";var i=e.photo?"":"ui-icon ui-icon-common-user ui-icon-xs";return u.Tag.render(si||(si=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="sn-spaces__popup-item_list-item --admin ','">\n\t\t\t\t','\n\t\t\t\t<img src="','" class="sn-spaces__popup-icon_svg" alt="crown">\n\t\t\t</div>\n\t\t'])),i,pi(this,_i,xi).call(this,e.photo),t)}function Ni(e){var t=e.photo?"":"ui-icon ui-icon-common-user ui-icon-xs";return u.Tag.render(ni||(ni=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="sn-spaces__popup-item_list-item ','">\n\t\t\t\t',"\n\t\t\t</div>\n\t\t"])),t,pi(this,_i,xi).call(this,e.photo))}function xi(e){if(e){return u.Tag.render(li||(li=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<i\n\t\t\t\t\tclass="sn-spaces__popup-item_list-item-img"\n\t\t\t\t\tstyle="background-image: url(\'',"');\"\n\t\t\t\t></i>\n\t\t\t"])),encodeURI(e))}return u.Tag.render(oi||(oi=babelHelpers.taggedTemplateLiteral(["<i></i>"])))}function zi(){var e={owner:null,moderators:[],users:[]};babelHelpers.classPrivateFieldGet(this,bi).forEach((function(t){if(t.isOwner){e.owner=t}else if(t.isModerator){e.moderators.push(t)}else{e.users.push(t)}}));return e}function Di(){return babelHelpers.classPrivateFieldGet(this,fi).canEdit||babelHelpers.classPrivateFieldGet(this,fi).canInvite}function Ai(){var e=parseInt(babelHelpers.classPrivateFieldGet(this,vi).workgroup_requests_out,10);var t=parseInt(babelHelpers.classPrivateFieldGet(this,vi).workgroup_requests_in,10);return e>0||t>0}function Oi(){return parseInt(babelHelpers.classPrivateFieldGet(this,vi).workgroup_requests_out,10)>0}function Bi(){return parseInt(babelHelpers.classPrivateFieldGet(this,vi).workgroup_requests_in,10)>0}var Ri;function ji(e,t){Xi(e,t);t.add(e)}function Ui(e,t,i){Xi(e,t);t.set(e,i)}function Xi(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function Vi(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var qi=new WeakMap;var Yi=new WeakMap;var Ji=new WeakMap;var Zi=new WeakSet;var Ki=new WeakSet;var Qi=new WeakSet;var $i=new WeakSet;var ea=new WeakSet;var ta=function(e){babelHelpers.inherits(t,e);function t(e){var i;babelHelpers.classCallCheck(this,t);i=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));ji(babelHelpers.assertThisInitialized(i),ea);ji(babelHelpers.assertThisInitialized(i),$i);ji(babelHelpers.assertThisInitialized(i),Qi);ji(babelHelpers.assertThisInitialized(i),Ki);ji(babelHelpers.assertThisInitialized(i),Zi);Ui(babelHelpers.assertThisInitialized(i),qi,{writable:true,value:void 0});Ui(babelHelpers.assertThisInitialized(i),Yi,{writable:true,value:void 0});Ui(babelHelpers.assertThisInitialized(i),Ji,{writable:true,value:void 0});i.setEventNamespace("BX.Socialnetwork.Spaces.Settings.Pin");babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),qi,e.pin);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),Yi,false);Vi(babelHelpers.assertThisInitialized(i),ea,na).call(babelHelpers.assertThisInitialized(i));return i}babelHelpers.createClass(t,[{key:"render",value:function e(){var t="spaces-settings-pin";var i=babelHelpers.classPrivateFieldGet(this,qi)?"--pin-2":"--pin-1";babelHelpers.classPrivateFieldSet(this,Ji,u.Tag.render(Ri||(Ri=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div\n\t\t\t\tdata-id="','"\n\t\t\t\tclass="sn-spaces__popup-item --mini"\n\t\t\t>\n\t\t\t\t<div class="sn-spaces__popup-icon-round">\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass="ui-icon-set ','"\n\t\t\t\t\t\tstyle="--ui-icon-set__icon-size: 22px;"\n\t\t\t\t\t></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="sn-spaces__popup-icon-round-name">\n\t\t\t\t\t',"\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t"])),t,i,Vi(this,$i,sa).call(this,babelHelpers.classPrivateFieldGet(this,qi))));u.Event.bind(babelHelpers.classPrivateFieldGet(this,Ji),"click",Vi(this,Zi,ia).bind(this));return babelHelpers.classPrivateFieldGet(this,Ji)}},{key:"unDisable",value:function e(){babelHelpers.classPrivateFieldSet(this,Yi,false)}}]);return t}(d.EventEmitter);function ia(){if(babelHelpers.classPrivateFieldGet(this,Yi)){return}babelHelpers.classPrivateFieldSet(this,Yi,true);babelHelpers.classPrivateFieldSet(this,qi,!babelHelpers.classPrivateFieldGet(this,qi));this.emit("update",babelHelpers.classPrivateFieldGet(this,qi));Vi(this,Ki,aa).call(this,babelHelpers.classPrivateFieldGet(this,qi));Vi(this,Qi,ra).call(this,babelHelpers.classPrivateFieldGet(this,qi))}function aa(e){var t=babelHelpers.classPrivateFieldGet(this,Ji).querySelector(".ui-icon-set");if(e){u.Dom.removeClass(t,"--pin-1");u.Dom.addClass(t,"--pin-2")}else{u.Dom.removeClass(t,"--pin-2");u.Dom.addClass(t,"--pin-1")}}function ra(e){var t=babelHelpers.classPrivateFieldGet(this,Ji).querySelector(".sn-spaces__popup-icon-round-name");t.textContent=Vi(this,$i,sa).call(this,e)}function sa(e){return e?u.Loc.getMessage("SN_SPACES_MENU_PIN_N"):u.Loc.getMessage("SN_SPACES_MENU_PIN_Y")}function na(){d.EventEmitter.subscribe("pinChanged",function(e){babelHelpers.classPrivateFieldSet(this,qi,e.data.isPinned);Vi(this,Qi,ra).call(this,babelHelpers.classPrivateFieldGet(this,qi));Vi(this,Ki,aa).call(this,babelHelpers.classPrivateFieldGet(this,qi))}.bind(this))}var la;function oa(e,t,i){ca(e,t);t.set(e,i)}function ca(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}var ua=new WeakMap;var da=function(e){babelHelpers.inherits(t,e);function t(e){var i;babelHelpers.classCallCheck(this,t);i=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));oa(babelHelpers.assertThisInitialized(i),ua,{writable:true,value:void 0});i.setEventNamespace("BX.Socialnetwork.Spaces.Settings.Roles");babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),ua,e.canEdit===true);return i}babelHelpers.createClass(t,[{key:"render",value:function e(){var t=this;var i="spaces-settings-roles";var a=babelHelpers.classPrivateFieldGet(this,ua)?"":"--disabled";var r=u.Tag.render(la||(la=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div\n\t\t\t\tdata-id="','"\n\t\t\t\tclass="sn-spaces__popup-item --mini ','"\n\t\t\t>\n\t\t\t\t<div class="sn-spaces__popup-icon-round">\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass="ui-icon-set --crown-1"\n\t\t\t\t\t\tstyle="--ui-icon-set__icon-size: 22px;"\n\t\t\t\t\t></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="sn-spaces__popup-icon-round-name">\n\t\t\t\t\t',"\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t"])),i,a,u.Loc.getMessage("SN_SPACES_MENU_ROLES"));u.Event.bind(r,"click",(function(){if(babelHelpers.classPrivateFieldGet(t,ua)){t.emit("click")}}));return r}}]);return t}(d.EventEmitter);function pa(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */pa=function t(){return e};var e={},t=Object.prototype,i=t.hasOwnProperty,a=Object.defineProperty||function(e,t,i){e[t]=i.value},r="function"==typeof Symbol?Symbol:{},s=r.iterator||"@@iterator",n=r.asyncIterator||"@@asyncIterator",l=r.toStringTag||"@@toStringTag";function o(e,t,i){return Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{o({},"")}catch(e){o=function e(t,i,a){return t[i]=a}}function c(e,t,i,r){var s=t&&t.prototype instanceof p?t:p,n=Object.create(s.prototype),l=new P(r||[]);return a(n,"_invoke",{value:y(e,i,l)}),n}function u(e,t,i){try{return{type:"normal",arg:e.call(t,i)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var d={};function p(){}function h(){}function b(){}var v={};o(v,s,(function(){return this}));var f=Object.getPrototypeOf,g=f&&f(f(k([])));g&&g!==t&&i.call(g,s)&&(v=g);var m=b.prototype=p.prototype=Object.create(v);function w(e){["next","throw","return"].forEach((function(t){o(e,t,(function(e){return this._invoke(t,e)}))}))}function H(e,t){function r(a,s,n,l){var o=u(e[a],e,s);if("throw"!==o.type){var c=o.arg,d=c.value;return d&&"object"==babelHelpers["typeof"](d)&&i.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,n,l)}),(function(e){r("throw",e,n,l)})):t.resolve(d).then((function(e){c.value=e,n(c)}),(function(e){return r("throw",e,n,l)}))}l(o.arg)}var s;a(this,"_invoke",{value:function e(i,a){function n(){return new t((function(e,t){r(i,a,e,t)}))}return s=s?s.then(n,n):n()}})}function y(e,t,i){var a="suspendedStart";return function(r,s){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===r)throw s;return E()}for(i.method=r,i.arg=s;;){var n=i.delegate;if(n){var l=S(n,i);if(l){if(l===d)continue;return l}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===a)throw a="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a="executing";var o=u(e,t,i);if("normal"===o.type){if(a=i.done?"completed":"suspendedYield",o.arg===d)continue;return{value:o.arg,done:i.done}}"throw"===o.type&&(a="completed",i.method="throw",i.arg=o.arg)}}}function S(e,t){var i=t.method,a=e.iterator[i];if(undefined===a)return t.delegate=null,"throw"===i&&e.iterator["return"]&&(t.method="return",t.arg=undefined,S(e,t),"throw"===t.method)||"return"!==i&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+i+"' method")),d;var r=u(a,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,d;var s=r.arg;return s?s.done?(t[e.resultName]=s.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=undefined),t.delegate=null,d):s:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function k(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,r=function t(){for(;++a<e.length;)if(i.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=undefined,t.done=!0,t};return r.next=r}}return{next:E}}function E(){return{value:undefined,done:!0}}return h.prototype=b,a(m,"constructor",{value:b,configurable:!0}),a(b,"constructor",{value:h,configurable:!0}),h.displayName=o(b,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,o(e,l,"GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},w(H.prototype),o(H.prototype,n,(function(){return this})),e.AsyncIterator=H,e.async=function(t,i,a,r,s){void 0===s&&(s=Promise);var n=new H(c(t,i,a,r),s);return e.isGeneratorFunction(i)?n:n.next().then((function(e){return e.done?e.value:n.next()}))},w(m),o(m,l,"Generator"),o(m,s,(function(){return this})),o(m,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),i=[];for(var a in t)i.push(a);return i.reverse(),function e(){for(;i.length;){var a=i.pop();if(a in t)return e.value=a,e.done=!1,e}return e.done=!0,e}},e.values=k,P.prototype={constructor:P,reset:function e(t){if(this.prev=0,this.next=0,this.sent=this._sent=undefined,this.done=!1,this.delegate=null,this.method="next",this.arg=undefined,this.tryEntries.forEach(T),!t)for(var a in this)"t"===a.charAt(0)&&i.call(this,a)&&!isNaN(+a.slice(1))&&(this[a]=undefined)},stop:function e(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function e(t){if(this.done)throw t;var a=this;function r(e,i){return l.type="throw",l.arg=t,a.next=e,i&&(a.method="next",a.arg=undefined),!!i}for(var s=this.tryEntries.length-1;s>=0;--s){var n=this.tryEntries[s],l=n.completion;if("root"===n.tryLoc)return r("end");if(n.tryLoc<=this.prev){var o=i.call(n,"catchLoc"),c=i.call(n,"finallyLoc");if(o&&c){if(this.prev<n.catchLoc)return r(n.catchLoc,!0);if(this.prev<n.finallyLoc)return r(n.finallyLoc)}else if(o){if(this.prev<n.catchLoc)return r(n.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<n.finallyLoc)return r(n.finallyLoc)}}}},abrupt:function e(t,a){for(var r=this.tryEntries.length-1;r>=0;--r){var s=this.tryEntries[r];if(s.tryLoc<=this.prev&&i.call(s,"finallyLoc")&&this.prev<s.finallyLoc){var n=s;break}}n&&("break"===t||"continue"===t)&&n.tryLoc<=a&&a<=n.finallyLoc&&(n=null);var l=n?n.completion:{};return l.type=t,l.arg=a,n?(this.method="next",this.next=n.finallyLoc,d):this.complete(l)},complete:function e(t,i){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&i&&(this.next=i),d},finish:function e(t){for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i];if(a.finallyLoc===t)return this.complete(a.completion,a.afterLoc),T(a),d}},catch:function e(t){for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i];if(a.tryLoc===t){var r=a.completion;if("throw"===r.type){var s=r.arg;T(a)}return s}}throw new Error("illegal catch attempt")},delegateYield:function e(t,i,a){return this.delegate={iterator:k(t),resultName:i,nextLoc:a},"next"===this.method&&(this.arg=undefined),d}},e}function ha(e,t){va(e,t);t.add(e)}function ba(e,t,i){va(e,t);t.set(e,i)}function va(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function fa(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var ga=new WeakMap;var ma=new WeakMap;var wa=new WeakMap;var Ha=new WeakMap;var ya=new WeakMap;var Sa=new WeakMap;var _a=new WeakSet;var Ta=new WeakSet;var Pa=new WeakSet;var ka=new WeakSet;var Ea=new WeakSet;var Fa=new WeakSet;var Ia=new WeakSet;var Ca=new WeakSet;var Ga=new WeakSet;var La=new WeakSet;var Ma=new WeakSet;var Wa=new WeakSet;var Na=new WeakSet;var xa=new WeakSet;var za=new WeakSet;var Da=new WeakSet;var Aa=function(){function e(t){babelHelpers.classCallCheck(this,e);ha(this,Da);ha(this,za);ha(this,xa);ha(this,Na);ha(this,Wa);ha(this,Ma);ha(this,La);ha(this,Ga);ha(this,Ca);ha(this,Ia);ha(this,Fa);ha(this,Ea);ha(this,ka);ha(this,Pa);ha(this,Ta);ha(this,_a);ba(this,ga,{writable:true,value:new u.Cache.MemoryCache});ba(this,ma,{writable:true,value:void 0});ba(this,wa,{writable:true,value:void 0});ba(this,Ha,{writable:true,value:void 0});ba(this,ya,{writable:true,value:void 0});ba(this,Sa,{writable:true,value:{members:null}});fa(this,Ta,Ba).call(this,t);babelHelpers.classPrivateFieldSet(this,ma,fa(this,ka,ja).call(this))}babelHelpers.createClass(e,[{key:"show",value:function e(){babelHelpers.classPrivateFieldGet(this,ma).show();fa(this,_a,Oa).call(this)}},{key:"update",value:function e(t){var i=this;t.then((function(e){babelHelpers.classPrivateFieldSet(i,Ha,e);babelHelpers.classPrivateFieldGet(i,wa).update(e)}));fa(this,Ia,Va).call(this,t)}}]);return e}();function Oa(){var e=babelHelpers.classPrivateFieldGet(this,ma).getPopup();var t=e.getPopupContainer();var i=t.getBoundingClientRect();if(Math.abs(i.right-e.bindElement.getBoundingClientRect().right)>=2){return}var a=i.left;var r=i.right+20-i.width;var s=e.angle.element;u.Dom.style(t,"left","".concat(r,"px"));u.Dom.style(s,"left","".concat(parseInt(u.Dom.style(s,"left"),10)-(r-a),"px"))}function Ba(e){babelHelpers.classPrivateFieldGet(this,ga).set("params",e)}function Ra(e){return babelHelpers.classPrivateFieldGet(this,ga).get("params")[e]}function ja(){var e=this;var t=h.Controller.getGroupData(fa(this,Pa,Ra).call(this,"groupId"),["AVATAR","ACTIONS","NUMBER_OF_MEMBERS","LIST_OF_MEMBERS","GROUP_MEMBERS_LIST","PRIVACY_TYPE","PIN","USER_DATA","COUNTERS","DESCRIPTION","EFFICIENCY","SUBJECT_DATA","DATE_CREATE"]);t.then((function(t){babelHelpers.classPrivateFieldSet(e,Ha,t)}));return new c.PopupComponentsMaker({id:"spaces-settings-menu",target:fa(this,Pa,Ra).call(this,"bindElement"),content:[{html:[{html:fa(this,Ea,Ua).call(this,t),backgroundColor:"#fafafa"}]},{html:[{html:fa(this,Fa,Xa).call(this),withoutBackground:true}]},{html:[{html:fa(this,Ia,Va).call(this,t),withoutBackground:true}]},{html:[{html:fa(this,Ca,qa).call(this,t),backgroundColor:"#fafafa"},{html:fa(this,Ga,Ya).call(this,t),backgroundColor:"#fafafa"},{html:fa(this,La,Ja).call(this,t),backgroundColor:"#fafafa"}]}]})}function Ua(e){var t=this;return new Promise((function(i){e.then((function(e){babelHelpers.classPrivateFieldSet(t,wa,new Mt({groupId:e.id,title:e.name,logo:fa(t,Pa,Ra).call(t,"logo"),privacyCode:e.privacyCode,actions:e.actions}));babelHelpers.classPrivateFieldGet(t,wa).subscribe("setAutoHide",(function(e){babelHelpers.classPrivateFieldGet(t,ma).getPopup().setAutoHide(e.getData())}));babelHelpers.classPrivateFieldGet(t,wa).subscribe("more",fa(t,Na,Qa).bind(t));i(babelHelpers.classPrivateFieldGet(t,wa).render())}))}))}function Xa(){var e=this;var t=new Ee;t.subscribe("videoCall",(function(){babelHelpers.classPrivateFieldGet(e,ma).close();fa(e,Pa,Ra).call(e,"chat").startVideoCall()}));t.subscribe("openChat",(function(){babelHelpers.classPrivateFieldGet(e,ma).close();fa(e,Pa,Ra).call(e,"chat").openChat()}));t.subscribe("createChat",(function(){babelHelpers.classPrivateFieldGet(e,ma).close();fa(e,Pa,Ra).call(e,"chat").createChat(fa(e,Pa,Ra).call(e,"bindElement"))}));return t.render()}function Va(e){var t=this;return new Promise((function(i){e.then((function(e){var a=new Ii({amount:e.numberOfMembers,list:e.listOfMembers,counters:e.counters,actions:e.actions});a.subscribe("showUsers",(function(e){babelHelpers.classPrivateFieldGet(t,ma).close();h.Controller.openGroupUsers(e.getData())}));a.subscribe("invite",(function(){babelHelpers.classPrivateFieldGet(t,ma).close();h.Controller.openGroupInvite()}));var r=a.render();if(babelHelpers.classPrivateFieldGet(t,Sa).members){babelHelpers.classPrivateFieldGet(t,Sa).members.replaceWith(r)}babelHelpers.classPrivateFieldGet(t,Sa).members=r;i(babelHelpers.classPrivateFieldGet(t,Sa).members)}))}))}function qa(e){var t=this;return new Promise((function(i){e.then((function(e){var a=new Be({follow:e.isSubscribed});a.subscribe("update",(function(e){fa(t,Ma,Za).call(t,babelHelpers.classPrivateFieldGet(t,Ha).id,e.getData(),a)}));i(a.render())}))}))}function Ya(e){var t=this;return new Promise((function(i){e.then((function(e){var a=new ta({pin:e.isPin});a.subscribe("update",(function(e){fa(t,Wa,Ka).call(t,babelHelpers.classPrivateFieldGet(t,Ha).id,e.getData(),a)}));i(a.render())}))}))}function Ja(e){var t=this;return new Promise((function(i){e.then((function(e){var a=new da({canEdit:e.actions.canEditFeatures});a.subscribe("click",(function(){babelHelpers.classPrivateFieldGet(t,ma).close();h.Controller.openGroupFeatures()}));i({node:a.render(),options:{disabled:!e.actions.canEditFeatures}})}))}))}function Za(e,t,i){var a=this;h.Controller.setSubscription(e,t).then((function(){i===null||i===void 0?void 0:i.unDisable()}))["catch"]((function(e){i===null||i===void 0?void 0:i.unDisable();fa(a,Da,rr).call(a,"changeSubscribe",e)}))}function Ka(e,t,i){var a=this;h.Controller.changePin(e,t).then((function(){i===null||i===void 0?void 0:i.unDisable()}))["catch"]((function(e){i===null||i===void 0?void 0:i.unDisable();fa(a,Da,rr).call(a,"changePin",e)}))}function Qa(){return $a.apply(this,arguments)}function $a(){$a=babelHelpers.asyncToGenerator(pa().mark((function e(){return pa().wrap((function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return fa(this,xa,er).call(this);case 2:t.sent.openInSlider();babelHelpers.classPrivateFieldGet(this,ma).close();case 4:case"end":return t.stop()}}),e,this)})));return $a.apply(this,arguments)}function er(){return tr.apply(this,arguments)}function tr(){tr=babelHelpers.asyncToGenerator(pa().mark((function e(){var t;return pa().wrap((function e(i){while(1)switch(i.prev=i.next){case 0:if(!((t=babelHelpers.classPrivateFieldGet(this,ya))!==null&&t!==void 0)){i.next=4;break}i.next=11;break;case 4:i.t0=babelHelpers;i.t1=this;i.t2=ya;i.next=9;return fa(this,za,ir).call(this);case 9:i.t3=i.sent;i.t0.classPrivateFieldSet.call(i.t0,i.t1,i.t2,i.t3);case 11:return i.abrupt("return",babelHelpers.classPrivateFieldGet(this,ya));case 12:case"end":return i.stop()}}),e,this)})));return tr.apply(this,arguments)}function ir(){return ar.apply(this,arguments)}function ar(){ar=babelHelpers.asyncToGenerator(pa().mark((function e(){var t,i;return pa().wrap((function e(a){while(1)switch(a.prev=a.next){case 0:a.next=2;return top.BX.Runtime.loadExtension("socialnetwork.group-settings");case 2:t=a.sent;i=t.GroupSettings;return a.abrupt("return",new i({groupData:babelHelpers.classPrivateFieldGet(this,Ha),logo:fa(this,Pa,Ra).call(this,"logo")}));case 5:case"end":return a.stop()}}),e,this)})));return ar.apply(this,arguments)}function rr(e,t){console.error("GroupSettings: ".concat(e," error"),t)}function sr(e,t){lr(e,t);t.add(e)}function nr(e,t,i){lr(e,t);t.set(e,i)}function lr(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function or(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var cr=new WeakMap;var ur=new WeakMap;var dr=new WeakSet;var pr=new WeakSet;var hr=function(){function e(t){babelHelpers.classCallCheck(this,e);sr(this,pr);sr(this,dr);nr(this,cr,{writable:true,value:new u.Cache.MemoryCache});nr(this,ur,{writable:true,value:void 0});or(this,dr,br).call(this,t)}babelHelpers.createClass(e,[{key:"show",value:function e(){}}]);return e}();function br(e){babelHelpers.classPrivateFieldGet(this,cr).set("params",e)}function vr(e,t){gr(e,t);t.add(e)}function fr(e,t,i){gr(e,t);t.set(e,i)}function gr(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function mr(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var wr=new WeakMap;var Hr=new WeakMap;var yr=new WeakSet;var Sr=new WeakSet;var _r=function(){function e(t){babelHelpers.classCallCheck(this,e);vr(this,Sr);vr(this,yr);fr(this,wr,{writable:true,value:new u.Cache.MemoryCache});fr(this,Hr,{writable:true,value:void 0});mr(this,yr,Tr).call(this,t)}babelHelpers.createClass(e,[{key:"show",value:function e(){if(!babelHelpers.classPrivateFieldGet(this,Hr)){if(mr(this,Sr,Pr).call(this,"type")==="user"){babelHelpers.classPrivateFieldSet(this,Hr,new hr({bindElement:mr(this,Sr,Pr).call(this,"bindElement"),userId:mr(this,Sr,Pr).call(this,"entityId")}))}else{babelHelpers.classPrivateFieldSet(this,Hr,new Aa({bindElement:mr(this,Sr,Pr).call(this,"bindElement"),groupId:mr(this,Sr,Pr).call(this,"entityId"),logo:mr(this,Sr,Pr).call(this,"logo"),chat:mr(this,Sr,Pr).call(this,"chat")}))}}babelHelpers.classPrivateFieldGet(this,Hr).show()}},{key:"update",value:function e(t){var i;(i=babelHelpers.classPrivateFieldGet(this,Hr))===null||i===void 0?void 0:i.update(t)}}]);return e}();function Tr(e){babelHelpers.classPrivateFieldGet(this,wr).set("params",e)}function Pr(e){return babelHelpers.classPrivateFieldGet(this,wr).get("params")[e]}function kr(e,t){Fr(e,t);t.add(e)}function Er(e,t,i){Fr(e,t);t.set(e,i)}function Fr(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function Ir(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var Cr=new WeakMap;var Gr=new WeakSet;var Lr=function(e){babelHelpers.inherits(t,e);function t(e){var i;babelHelpers.classCallCheck(this,t);i=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));kr(babelHelpers.assertThisInitialized(i),Gr);Er(babelHelpers.assertThisInitialized(i),Cr,{writable:true,value:void 0});i.setEventNamespace("BX.Socialnetwork.Spaces.VideoCall");babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),Cr,Ir(babelHelpers.assertThisInitialized(i),Gr,Mr).call(babelHelpers.assertThisInitialized(i),e.bindElement));return i}babelHelpers.createClass(t,[{key:"show",value:function e(){babelHelpers.classPrivateFieldGet(this,Cr).toggle()}}]);return t}(d.EventEmitter);function Mr(e){var t=this;var i=new p.Menu({id:"spaces-video-call-menu",bindElement:e,closeByEsc:true,angle:{position:"top",offset:31}});i.addMenuItem({dataset:{id:"spaces-menu-video-call-hd"},text:u.Loc.getMessage("SN_SPACES_MENU_VIDEO_CALL_HD"),className:"sn-spaces-menu-video-call-hd-icon",onclick:function e(){t.emit("hd");i.close()}});i.addMenuItem({delimiter:true});i.addMenuItem({dataset:{id:"spaces-menu-video-call-chat"},text:u.Loc.getMessage("SN_SPACES_MENU_VIDEO_CALL_CHAT"),className:"sn-spaces-menu-video-call-chat-icon",onclick:function e(){t.emit("chat");i.close()}});i.addMenuItem({dataset:{id:"spaces-menu-create-chat"},text:u.Loc.getMessage("SN_SPACES_MENU_CREATE_CHAT"),className:"sn-spaces-menu-create-chat-icon",onclick:function e(){t.emit("createChat");i.close()}});return i}var Wr,Nr,xr,zr,Dr,Ar,Or,Br,Rr;function jr(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */jr=function t(){return e};var e={},t=Object.prototype,i=t.hasOwnProperty,a=Object.defineProperty||function(e,t,i){e[t]=i.value},r="function"==typeof Symbol?Symbol:{},s=r.iterator||"@@iterator",n=r.asyncIterator||"@@asyncIterator",l=r.toStringTag||"@@toStringTag";function o(e,t,i){return Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{o({},"")}catch(e){o=function e(t,i,a){return t[i]=a}}function c(e,t,i,r){var s=t&&t.prototype instanceof p?t:p,n=Object.create(s.prototype),l=new P(r||[]);return a(n,"_invoke",{value:y(e,i,l)}),n}function u(e,t,i){try{return{type:"normal",arg:e.call(t,i)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var d={};function p(){}function h(){}function b(){}var v={};o(v,s,(function(){return this}));var f=Object.getPrototypeOf,g=f&&f(f(k([])));g&&g!==t&&i.call(g,s)&&(v=g);var m=b.prototype=p.prototype=Object.create(v);function w(e){["next","throw","return"].forEach((function(t){o(e,t,(function(e){return this._invoke(t,e)}))}))}function H(e,t){function r(a,s,n,l){var o=u(e[a],e,s);if("throw"!==o.type){var c=o.arg,d=c.value;return d&&"object"==babelHelpers["typeof"](d)&&i.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,n,l)}),(function(e){r("throw",e,n,l)})):t.resolve(d).then((function(e){c.value=e,n(c)}),(function(e){return r("throw",e,n,l)}))}l(o.arg)}var s;a(this,"_invoke",{value:function e(i,a){function n(){return new t((function(e,t){r(i,a,e,t)}))}return s=s?s.then(n,n):n()}})}function y(e,t,i){var a="suspendedStart";return function(r,s){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===r)throw s;return E()}for(i.method=r,i.arg=s;;){var n=i.delegate;if(n){var l=S(n,i);if(l){if(l===d)continue;return l}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===a)throw a="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a="executing";var o=u(e,t,i);if("normal"===o.type){if(a=i.done?"completed":"suspendedYield",o.arg===d)continue;return{value:o.arg,done:i.done}}"throw"===o.type&&(a="completed",i.method="throw",i.arg=o.arg)}}}function S(e,t){var i=t.method,a=e.iterator[i];if(undefined===a)return t.delegate=null,"throw"===i&&e.iterator["return"]&&(t.method="return",t.arg=undefined,S(e,t),"throw"===t.method)||"return"!==i&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+i+"' method")),d;var r=u(a,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,d;var s=r.arg;return s?s.done?(t[e.resultName]=s.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=undefined),t.delegate=null,d):s:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function k(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,r=function t(){for(;++a<e.length;)if(i.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=undefined,t.done=!0,t};return r.next=r}}return{next:E}}function E(){return{value:undefined,done:!0}}return h.prototype=b,a(m,"constructor",{value:b,configurable:!0}),a(b,"constructor",{value:h,configurable:!0}),h.displayName=o(b,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,o(e,l,"GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},w(H.prototype),o(H.prototype,n,(function(){return this})),e.AsyncIterator=H,e.async=function(t,i,a,r,s){void 0===s&&(s=Promise);var n=new H(c(t,i,a,r),s);return e.isGeneratorFunction(i)?n:n.next().then((function(e){return e.done?e.value:n.next()}))},w(m),o(m,l,"Generator"),o(m,s,(function(){return this})),o(m,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),i=[];for(var a in t)i.push(a);return i.reverse(),function e(){for(;i.length;){var a=i.pop();if(a in t)return e.value=a,e.done=!1,e}return e.done=!0,e}},e.values=k,P.prototype={constructor:P,reset:function e(t){if(this.prev=0,this.next=0,this.sent=this._sent=undefined,this.done=!1,this.delegate=null,this.method="next",this.arg=undefined,this.tryEntries.forEach(T),!t)for(var a in this)"t"===a.charAt(0)&&i.call(this,a)&&!isNaN(+a.slice(1))&&(this[a]=undefined)},stop:function e(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function e(t){if(this.done)throw t;var a=this;function r(e,i){return l.type="throw",l.arg=t,a.next=e,i&&(a.method="next",a.arg=undefined),!!i}for(var s=this.tryEntries.length-1;s>=0;--s){var n=this.tryEntries[s],l=n.completion;if("root"===n.tryLoc)return r("end");if(n.tryLoc<=this.prev){var o=i.call(n,"catchLoc"),c=i.call(n,"finallyLoc");if(o&&c){if(this.prev<n.catchLoc)return r(n.catchLoc,!0);if(this.prev<n.finallyLoc)return r(n.finallyLoc)}else if(o){if(this.prev<n.catchLoc)return r(n.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<n.finallyLoc)return r(n.finallyLoc)}}}},abrupt:function e(t,a){for(var r=this.tryEntries.length-1;r>=0;--r){var s=this.tryEntries[r];if(s.tryLoc<=this.prev&&i.call(s,"finallyLoc")&&this.prev<s.finallyLoc){var n=s;break}}n&&("break"===t||"continue"===t)&&n.tryLoc<=a&&a<=n.finallyLoc&&(n=null);var l=n?n.completion:{};return l.type=t,l.arg=a,n?(this.method="next",this.next=n.finallyLoc,d):this.complete(l)},complete:function e(t,i){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&i&&(this.next=i),d},finish:function e(t){for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i];if(a.finallyLoc===t)return this.complete(a.completion,a.afterLoc),T(a),d}},catch:function e(t){for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i];if(a.tryLoc===t){var r=a.completion;if("throw"===r.type){var s=r.arg;T(a)}return s}}throw new Error("illegal catch attempt")},delegateYield:function e(t,i,a){return this.delegate={iterator:k(t),resultName:i,nextLoc:a},"next"===this.method&&(this.arg=undefined),d}},e}function Ur(e,t){Vr(e,t);t.add(e)}function Xr(e,t,i){Vr(e,t);t.set(e,i)}function Vr(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function qr(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var Yr=new WeakMap;var Jr=new WeakMap;var Zr=new WeakMap;var Kr=new WeakMap;var Qr=new WeakMap;var $r=new WeakMap;var es=new WeakMap;var ts=new WeakMap;var is=new WeakMap;var as=new WeakMap;var rs=new WeakMap;var ss=new WeakSet;var ns=new WeakSet;var ls=new WeakSet;var os=new WeakSet;var cs=new WeakSet;var us=new WeakSet;var ds=new WeakSet;var ps=new WeakSet;var hs=new WeakSet;var bs=new WeakSet;var vs=new WeakSet;var fs=new WeakSet;var gs=new WeakSet;var ms=new WeakSet;var ws=new WeakSet;var Hs=new WeakSet;var ys=new WeakSet;var Ss=new WeakSet;var _s=new WeakSet;var Ts=new WeakSet;var Ps=new WeakSet;var ks=new WeakSet;var Es=new WeakSet;var Fs=new WeakSet;var Is=new WeakSet;var Cs=new WeakSet;var Gs=new WeakSet;var Ls=new WeakSet;var Ms=new WeakSet;var Ws=function(){function e(t){babelHelpers.classCallCheck(this,e);Ur(this,Ms);Ur(this,Ls);Ur(this,Gs);Ur(this,Cs);Ur(this,Is);Ur(this,Fs);Ur(this,Es);Ur(this,ks);Ur(this,Ps);Ur(this,Ts);Ur(this,_s);Ur(this,Ss);Ur(this,ys);Ur(this,Hs);Ur(this,ws);Ur(this,ms);Ur(this,gs);Ur(this,fs);Ur(this,vs);Ur(this,bs);Ur(this,hs);Ur(this,ps);Ur(this,ds);Ur(this,us);Ur(this,cs);Ur(this,os);Ur(this,ls);Ur(this,ns);Ur(this,ss);Xr(this,Yr,{writable:true,value:new u.Cache.MemoryCache});Xr(this,Jr,{writable:true,value:void 0});Xr(this,Zr,{writable:true,value:void 0});Xr(this,Kr,{writable:true,value:void 0});Xr(this,Qr,{writable:true,value:void 0});Xr(this,$r,{writable:true,value:void 0});Xr(this,es,{writable:true,value:void 0});Xr(this,ts,{writable:true,value:void 0});Xr(this,is,{writable:true,value:void 0});Xr(this,as,{writable:true,value:false});Xr(this,rs,{writable:true,value:[]});babelHelpers.classPrivateFieldSet(this,$r,{});t.entityId=u.Type.isUndefined(t.entityId)?0:parseInt(t.entityId,10);qr(this,cs,As).call(this,t);qr(this,us,Os).call(this,t);qr(this,ss,Ns).call(this)}babelHelpers.createClass(e,[{key:"renderLogoTo",value:function e(t){if(!u.Type.isDomNode(t)){throw new Error("BX.Socialnetwork.Spaces.Menu: HTMLElement for space not found")}babelHelpers.classPrivateFieldGet(this,$r).avatar=t;qr(this,ps,Rs).call(this)}},{key:"renderUserLogoTo",value:function e(t){if(!u.Type.isDomNode(t)){throw new Error("BX.Socialnetwork.Spaces.Menu: HTMLElement for space not found")}u.Dom.addClass(t,["sonet-common-workgroup-avatar","--common-space"]);u.Dom.append(u.Tag.render(Wr||(Wr=babelHelpers.taggedTemplateLiteral(["<i></i>"]))),t)}},{key:"renderToolbarTo",value:function e(t){u.Dom.append(qr(this,hs,js).call(this),t);if(qr(this,ds,Bs).call(this,"canInvite")){u.Dom.append(qr(this,gs,qs).call(this),t)}u.Dom.append(qr(this,ms,Ys).call(this),t)}},{key:"renderScrumToolbarTo",value:function e(t){u.Dom.append(qr(this,bs,Us).call(this),t);u.Dom.append(qr(this,vs,Xs).call(this),t);if(qr(this,ds,Bs).call(this,"canInvite")){u.Dom.append(qr(this,gs,qs).call(this),t)}u.Dom.append(qr(this,ms,Ys).call(this),t)}},{key:"renderUserToolbarTo",value:function e(t){u.Dom.append(qr(this,fs,Vs).call(this),t);u.Dom.append(qr(this,ws,Js).call(this),t)}}]);return e}();function Ns(){var e=new S(qr(this,ds,Bs).call(this,"entityId"),qr(this,ds,Bs).call(this,"currentUserId"));e.subscribe("update",qr(this,ns,xs).bind(this));e.subscribe("updateCounters",qr(this,ls,zs).bind(this));t.PULL.subscribe(e)}function xs(){var e,t=this;var i=h.Controller.getGroupData(qr(this,ds,Bs).call(this,"entityId"),["AVATAR","ACTIONS","NUMBER_OF_MEMBERS","LIST_OF_MEMBERS","GROUP_MEMBERS_LIST","PRIVACY_TYPE","PIN","USER_DATA","COUNTERS","DESCRIPTION","EFFICIENCY","SUBJECT_DATA","DATE_CREATE"]);(e=babelHelpers.classPrivateFieldGet(this,ts))===null||e===void 0?void 0:e.update(i);qr(this,Ps,tn).call(this).update(i);babelHelpers.classPrivateFieldGet(this,is).update(i);i.then((function(e){var i=e.avatar;if(i){qr(t,os,Ds).call(t,i)}}))}function zs(e){var t=e.getData();if(u.Type.isUndefined(t.space)){return}var i=t.userId;var a=parseInt(t.space.id,10);var r=t.space.metrics.countersTasksTotal;var s=t.space.metrics.countersCalendarTotal;var n=t.space.metrics.countersLiveFeedTotal;var l=a===0?BX.Main.interfaceButtonsManager.getById("spaces_user_menu_".concat(i)):BX.Main.interfaceButtonsManager.getById("spaces_group_menu_".concat(a));if(l){var o="spaces_top_menu_".concat(i,"_").concat(a);var c="".concat(o,"_tasks");var d="".concat(o,"_calendar");var p="".concat(o,"_discussions");l.updateCounter(c,r);l.updateCounter(d,s);l.updateCounter(p,n)}}function Ds(e){babelHelpers.classPrivateFieldSet(this,es,{id:e,type:"image"});qr(this,ps,Rs).call(this)}function As(e){babelHelpers.classPrivateFieldGet(this,Yr).set("params",e);if(e.groupMembersList){babelHelpers.classPrivateFieldSet(this,rs,e.groupMembersList.filter((function(e){return e.invited})).map((function(e){return parseInt(e.id,10)})))}babelHelpers.classPrivateFieldSet(this,es,e.logo)}function Os(e){babelHelpers.classPrivateFieldSet(this,is,new re({entityType:qr(this,ds,Bs).call(this,"type"),entityId:qr(this,ds,Bs).call(this,"entityId"),groupMembersList:qr(this,ds,Bs).call(this,"groupMembersList")}))}function Bs(e){return babelHelpers.classPrivateFieldGet(this,Yr).get("params")[e]}function Rs(){var e;var t=new l.Logo(babelHelpers.classPrivateFieldGet(this,es));var i=u.Tag.render(Nr||(Nr=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="sn-spaces__space-logo ','">\n\t\t\t\t',"\n\t\t\t</div>\n\t\t"])),(e=t.getClass())!==null&&e!==void 0?e:"",t.render());babelHelpers.classPrivateFieldGet(this,$r).avatar.replaceWith(i);babelHelpers.classPrivateFieldGet(this,$r).avatar=i;return babelHelpers.classPrivateFieldGet(this,$r).avatar}function js(){var e=u.Tag.render(xr||(xr=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div\n\t\t\t\tref="node"\n\t\t\t\tdata-id="spaces-video-call-menu"\n\t\t\t\tclass="sn-spaces__menu-toolbar_btn"\n\t\t\t>\n\t\t\t\t<div class="ui-icon-set --video-1"></div>\n\t\t\t\t<div\n\t\t\t\t\tref="chevronDown"\n\t\t\t\t\tclass="ui-icon-set --chevron-down"\n\t\t\t\t\tstyle="--ui-icon-set__icon-size: 14px;"\n\t\t\t\t></div>\n\t\t\t</div>\n\t\t']))),t=e.node,i=e.chevronDown;u.Event.bind(t,"click",qr(this,Hs,Zs).bind(this,i));return t}function Us(){var e=u.Tag.render(zr||(zr=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div data-id="spaces-scrum-video-call-menu" class="sn-spaces__menu-toolbar_btn">\n\t\t\t\t<div class="ui-icon-set --video-1"></div>\n\t\t\t\t<div class="ui-icon-set --chevron-down" style="--ui-icon-set__icon-size: 14px;"></div>\n\t\t\t</div>\n\t\t'])));u.Event.bind(e,"click",qr(this,ys,Ks).bind(this));return e}function Xs(){var e=u.Tag.render(Dr||(Dr=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div data-id="spaces-scrum-elements-menu" class="sn-spaces__menu-toolbar_btn">\n\t\t\t\t<div class="ui-icon-set --elements"></div>\n\t\t\t</div>\n\t\t'])));u.Event.bind(e,"click",qr(this,Ss,Qs).bind(this));return e}function Vs(){var e=u.Tag.render(Ar||(Ar=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div data-id="spaces-video-call-menu" class="sn-spaces__menu-toolbar_btn">\n\t\t\t\t<div class="ui-icon-set --video-1"></div>\n\t\t\t\t<div class="ui-icon-set --chevron-down" style="--ui-icon-set__icon-size: 14px;"></div>\n\t\t\t</div>\n\t\t'])));u.Event.bind(e,"click",qr(this,_s,$s).bind(this));return e}function qs(){var e=this;if(!babelHelpers.classPrivateFieldGet(this,$r).inviteNode){babelHelpers.classPrivateFieldGet(this,$r).inviteNode=u.Tag.render(Or||(Or=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div data-id="spaces-invite-menu" class="sn-spaces__menu-toolbar_btn">\n\t\t\t\t\t<div class="ui-icon-set --person-plus"></div>\n\t\t\t\t</div>\n\t\t\t'])));u.Event.bind(babelHelpers.classPrivateFieldGet(this,$r).inviteNode,"click",qr(this,Ts,en).bind(this));if(qr(this,ds,Bs).call(this,"isNew")){setTimeout((function(){return qr(e,Fs,sn).call(e,babelHelpers.classPrivateFieldGet(e,$r).inviteNode)}),500)}}return babelHelpers.classPrivateFieldGet(this,$r).inviteNode}function Ys(){var e=u.Tag.render(Br||(Br=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div data-id="spaces-settings-menu" class="sn-spaces__menu-toolbar_btn">\n\t\t\t\t<div class="ui-icon-set --more"></div>\n\t\t\t</div>\n\t\t'])));u.Event.bind(e,"click",qr(this,Ls,un).bind(this));return e}function Js(){var e=u.Tag.render(Rr||(Rr=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div data-id="spaces-settings-menu" class="sn-spaces__menu-toolbar_btn">\n\t\t\t\t<div class="ui-icon-set --more"></div>\n\t\t\t</div>\n\t\t'])));u.Event.bind(e,"click",qr(this,Ms,dn).bind(this));return e}function Zs(e){var t=this;if(!babelHelpers.classPrivateFieldGet(this,Jr)){babelHelpers.classPrivateFieldSet(this,Jr,new Lr({bindElement:e}));babelHelpers.classPrivateFieldGet(this,Jr).subscribe("hd",(function(){babelHelpers.classPrivateFieldGet(t,is).startVideoCall()}));babelHelpers.classPrivateFieldGet(this,Jr).subscribe("chat",(function(){babelHelpers.classPrivateFieldGet(t,is).openChat()}));babelHelpers.classPrivateFieldGet(this,Jr).subscribe("createChat",(function(){babelHelpers.classPrivateFieldGet(t,is).createChat(e)}))}babelHelpers.classPrivateFieldGet(this,Jr).show()}function Ks(e){if(!babelHelpers.classPrivateFieldGet(this,Zr)){babelHelpers.classPrivateFieldSet(this,Zr,new i.Meetings({groupId:qr(this,ds,Bs).call(this,"entityId")}))}babelHelpers.classPrivateFieldGet(this,Zr).showMenu(e.target)}function Qs(e){if(!babelHelpers.classPrivateFieldGet(this,Kr)){babelHelpers.classPrivateFieldSet(this,Kr,new a.Methodology({groupId:qr(this,ds,Bs).call(this,"entityId"),teamSpeedPath:qr(this,ds,Bs).call(this,"pathToScrumTeamSpeed"),burnDownPath:qr(this,ds,Bs).call(this,"pathToScrumBurnDown"),pathToTask:qr(this,ds,Bs).call(this,"pathToGroupTasksTask")}))}babelHelpers.classPrivateFieldGet(this,Kr).showMenu(e.target)}function $s(e){}function en(){var e=qr(this,Ps,tn).call(this);if(e.isShown()){e.close()}else{e.show()}}function tn(){if(!babelHelpers.classPrivateFieldGet(this,Qr)){babelHelpers.classPrivateFieldSet(this,Qr,new we({node:babelHelpers.classPrivateFieldGet(this,$r).inviteNode,groupMembersList:qr(this,ds,Bs).call(this,"groupMembersList")}));babelHelpers.classPrivateFieldGet(this,Qr).subscribe("onClose",qr(this,Es,rn).bind(this));babelHelpers.classPrivateFieldGet(this,Qr).subscribe("usersSelected",qr(this,ks,an).bind(this))}return babelHelpers.classPrivateFieldGet(this,Qr)}function an(e){var t=e.data;qr(this,Cs,on).call(this,t)}function rn(){if(qr(this,ds,Bs).call(this,"isNew")&&!babelHelpers.classPrivateFieldGet(this,as)){var e=document.querySelector("[data-id=spaces-discussions-add-main-btn]");if(!e){return}qr(this,Fs,sn).call(this,e,{title:u.Loc.getMessage("SN_SPACES_DISCUSSION_AHA_MOMENT_TITLE"),text:u.Loc.getMessage("SN_SPACES_DISCUSSION_AHA_MOMENT_TEXT")});babelHelpers.classPrivateFieldSet(this,as,true)}}function sn(e){var t=this;var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;u.Runtime.loadExtension(["spotlight","ui.tour"]).then((function(){var a=new BX.SpotLight({targetElement:e,targetVertex:"middle-center"});u.Dom.addClass(e,"--active");a.bindEvents({onTargetEnter:function t(){u.Dom.removeClass(e,"--active");a.close()}});a.setColor("#2fc6f6");a.show();if(i){qr(t,Is,nn).call(t,e,{title:i.title,text:i.text,spotlight:a})}}))}function nn(e,t){return ln.apply(this,arguments)}function ln(){ln=babelHelpers.asyncToGenerator(jr().mark((function e(t,i){var a,r,s,n;return jr().wrap((function e(l){while(1)switch(l.prev=l.next){case 0:l.next=2;return u.Runtime.loadExtension("ui.tour");case 2:a=l.sent;r=a.Guide;s=new r({simpleMode:true,onEvents:true,steps:[{target:t,title:i.title,text:i.text,position:"bottom",condition:{top:true,bottom:false,color:"primary"}}]});s.showNextStep();n=s.getPopup();n.setWidth(380);n.getContentContainer().style.paddingRight=getComputedStyle(n.closeIcon)["width"];n.setAngle({offset:t.offsetWidth/2-5});n.subscribe("onClose",(function(){return i.spotlight.close()}));n.subscribe("onDestroy",(function(){return i.spotlight.close()}));n.setAutoHide(true);case 13:case"end":return l.stop()}}),e)})));return ln.apply(this,arguments)}function on(e){var t=this;var i=e.filter((function(e){return!babelHelpers.classPrivateFieldGet(t,rs).includes(e)}));var a=babelHelpers.classPrivateFieldGet(this,rs).filter((function(t){return!e.includes(t)}));babelHelpers.classPrivateFieldSet(this,rs,e);h.Controller.inviteUsers(qr(this,ds,Bs).call(this,"entityId"),e).then((function(){BX.UI.Notification.Center.notify({content:qr(t,Gs,cn).call(t,i,a)})}),(function(e){return console.log(e)}))}function cn(e,t){var i=e.length>0;var a=t.length>0;if(i&&!a){return u.Loc.getMessage("SN_SPACES_INVITATIONS_SENT")}if(!i&&a){return u.Loc.getMessage("SN_SPACES_INVITATIONS_REMOVED")}if(i&&a){return u.Loc.getMessage("SN_SPACES_INVITATIONS_CHANGED")}return u.Loc.getMessage("SN_SPACES_INVITATIONS_SENT")}function un(e){if(!babelHelpers.classPrivateFieldGet(this,ts)){babelHelpers.classPrivateFieldSet(this,ts,new _r({bindElement:e.target,type:qr(this,ds,Bs).call(this,"type"),entityId:qr(this,ds,Bs).call(this,"entityId"),logo:babelHelpers.classPrivateFieldGet(this,es),chat:babelHelpers.classPrivateFieldGet(this,is)}))}babelHelpers.classPrivateFieldGet(this,ts).show()}function dn(e){}e.Menu=Ws})(this.BX.Socialnetwork.Spaces=this.BX.Socialnetwork.Spaces||{},BX,BX.Tasks.Scrum,BX.Tasks.Scrum,BX.Messenger.v2.Lib,BX.UI.EntitySelector,BX.UI,BX.Socialnetwork,BX.Socialnetwork,BX.UI,BX,BX.Event,BX.Main,BX.Socialnetwork);
//# sourceMappingURL=script.map.js