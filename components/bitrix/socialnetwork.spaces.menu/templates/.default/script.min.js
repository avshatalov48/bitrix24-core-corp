this.BX=this.BX||{};this.BX.Socialnetwork=this.BX.Socialnetwork||{};(function(e,t,i,a,s,n,r,l,o,c,u,p){"use strict";function d(e,t){b(e,t);t.add(e)}function h(e,t,i){b(e,t);t.set(e,i)}function b(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function v(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var f=new WeakMap;var g=new WeakSet;var m=function(e){babelHelpers.inherits(t,e);function t(e){var i;babelHelpers.classCallCheck(this,t);i=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));d(babelHelpers.assertThisInitialized(i),g);h(babelHelpers.assertThisInitialized(i),f,{writable:true,value:void 0});i.setEventNamespace("BX.Socialnetwork.Spaces.Menu.PullRequests");babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),f,parseInt(e,10));return i}babelHelpers.createClass(t,[{key:"getModuleId",value:function e(){return"socialnetwork"}},{key:"getMap",value:function e(){return{workgroup_user_add:v(this,g,w).bind(this),workgroup_user_delete:v(this,g,w).bind(this),workgroup_user_update:v(this,g,w).bind(this)}}}]);return t}(u.EventEmitter);function w(e){if(parseInt(e.params.GROUP_ID,10)===babelHelpers.classPrivateFieldGet(this,f)){this.emit("update")}}var H=function(){function e(){babelHelpers.classCallCheck(this,e)}babelHelpers.createClass(e,null,[{key:"getGroupData",value:function e(t){return BX.ajax.runAction("socialnetwork.api.workgroup.get",{data:{params:{select:["ACTIONS","NUMBER_OF_MEMBERS","LIST_OF_MEMBERS","GROUP_MEMBERS_LIST","PRIVACY_TYPE","PIN","USER_DATA","COUNTERS"],groupId:t}}}).then((function(e){var t,i,a;return{name:e.data.NAME,isPin:e.data.IS_PIN,privacyCode:e.data.PRIVACY_CODE,isSubscribed:(t=e.data.USER_DATA)===null||t===void 0?void 0:t.IS_SUBSCRIBED,numberOfMembers:e.data.NUMBER_OF_MEMBERS,listOfMembers:e.data.LIST_OF_MEMBERS,groupMembersList:e.data.GROUP_MEMBERS_LIST,actions:{canEdit:(i=e.data.ACTIONS)===null||i===void 0?void 0:i.EDIT,canInvite:(a=e.data.ACTIONS)===null||a===void 0?void 0:a.INVITE},counters:e.data.COUNTERS}}))["catch"]((function(e){return console.log(e)}))}},{key:"inviteUsers",value:function e(t,i){return BX.ajax.runAction("socialnetwork.api.workgroup.updateInvitedUsers",{data:{spaceId:t,users:[0].concat(babelHelpers.toConsumableArray(i))}})}}]);return e}();var _;function S(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */S=function t(){return e};var e={},t=Object.prototype,i=t.hasOwnProperty,a=Object.defineProperty||function(e,t,i){e[t]=i.value},s="function"==typeof Symbol?Symbol:{},n=s.iterator||"@@iterator",r=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function o(e,t,i){return Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{o({},"")}catch(e){o=function e(t,i,a){return t[i]=a}}function c(e,t,i,s){var n=t&&t.prototype instanceof d?t:d,r=Object.create(n.prototype),l=new k(s||[]);return a(r,"_invoke",{value:_(e,i,l)}),r}function u(e,t,i){try{return{type:"normal",arg:e.call(t,i)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var p={};function d(){}function h(){}function b(){}var v={};o(v,n,(function(){return this}));var f=Object.getPrototypeOf,g=f&&f(f(T([])));g&&g!==t&&i.call(g,n)&&(v=g);var m=b.prototype=d.prototype=Object.create(v);function w(e){["next","throw","return"].forEach((function(t){o(e,t,(function(e){return this._invoke(t,e)}))}))}function H(e,t){function s(a,n,r,l){var o=u(e[a],e,n);if("throw"!==o.type){var c=o.arg,p=c.value;return p&&"object"==babelHelpers["typeof"](p)&&i.call(p,"__await")?t.resolve(p.__await).then((function(e){s("next",e,r,l)}),(function(e){s("throw",e,r,l)})):t.resolve(p).then((function(e){c.value=e,r(c)}),(function(e){return s("throw",e,r,l)}))}l(o.arg)}var n;a(this,"_invoke",{value:function e(i,a){function r(){return new t((function(e,t){s(i,a,e,t)}))}return n=n?n.then(r,r):r()}})}function _(e,t,i){var a="suspendedStart";return function(s,n){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===s)throw n;return C()}for(i.method=s,i.arg=n;;){var r=i.delegate;if(r){var l=y(r,i);if(l){if(l===p)continue;return l}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===a)throw a="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a="executing";var o=u(e,t,i);if("normal"===o.type){if(a=i.done?"completed":"suspendedYield",o.arg===p)continue;return{value:o.arg,done:i.done}}"throw"===o.type&&(a="completed",i.method="throw",i.arg=o.arg)}}}function y(e,t){var i=t.method,a=e.iterator[i];if(undefined===a)return t.delegate=null,"throw"===i&&e.iterator["return"]&&(t.method="return",t.arg=undefined,y(e,t),"throw"===t.method)||"return"!==i&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+i+"' method")),p;var s=u(a,e.iterator,t.arg);if("throw"===s.type)return t.method="throw",t.arg=s.arg,t.delegate=null,p;var n=s.arg;return n?n.done?(t[e.resultName]=n.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=undefined),t.delegate=null,p):n:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function T(e){if(e){var t=e[n];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,s=function t(){for(;++a<e.length;)if(i.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=undefined,t.done=!0,t};return s.next=s}}return{next:C}}function C(){return{value:undefined,done:!0}}return h.prototype=b,a(m,"constructor",{value:b,configurable:!0}),a(b,"constructor",{value:h,configurable:!0}),h.displayName=o(b,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,o(e,l,"GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},w(H.prototype),o(H.prototype,r,(function(){return this})),e.AsyncIterator=H,e.async=function(t,i,a,s,n){void 0===n&&(n=Promise);var r=new H(c(t,i,a,s),n);return e.isGeneratorFunction(i)?r:r.next().then((function(e){return e.done?e.value:r.next()}))},w(m),o(m,l,"Generator"),o(m,n,(function(){return this})),o(m,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),i=[];for(var a in t)i.push(a);return i.reverse(),function e(){for(;i.length;){var a=i.pop();if(a in t)return e.value=a,e.done=!1,e}return e.done=!0,e}},e.values=T,k.prototype={constructor:k,reset:function e(t){if(this.prev=0,this.next=0,this.sent=this._sent=undefined,this.done=!1,this.delegate=null,this.method="next",this.arg=undefined,this.tryEntries.forEach(E),!t)for(var a in this)"t"===a.charAt(0)&&i.call(this,a)&&!isNaN(+a.slice(1))&&(this[a]=undefined)},stop:function e(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function e(t){if(this.done)throw t;var a=this;function s(e,i){return l.type="throw",l.arg=t,a.next=e,i&&(a.method="next",a.arg=undefined),!!i}for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n],l=r.completion;if("root"===r.tryLoc)return s("end");if(r.tryLoc<=this.prev){var o=i.call(r,"catchLoc"),c=i.call(r,"finallyLoc");if(o&&c){if(this.prev<r.catchLoc)return s(r.catchLoc,!0);if(this.prev<r.finallyLoc)return s(r.finallyLoc)}else if(o){if(this.prev<r.catchLoc)return s(r.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return s(r.finallyLoc)}}}},abrupt:function e(t,a){for(var s=this.tryEntries.length-1;s>=0;--s){var n=this.tryEntries[s];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var r=n;break}}r&&("break"===t||"continue"===t)&&r.tryLoc<=a&&a<=r.finallyLoc&&(r=null);var l=r?r.completion:{};return l.type=t,l.arg=a,r?(this.method="next",this.next=r.finallyLoc,p):this.complete(l)},complete:function e(t,i){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&i&&(this.next=i),p},finish:function e(t){for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i];if(a.finallyLoc===t)return this.complete(a.completion,a.afterLoc),E(a),p}},catch:function e(t){for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i];if(a.tryLoc===t){var s=a.completion;if("throw"===s.type){var n=s.arg;E(a)}return n}}throw new Error("illegal catch attempt")},delegateYield:function e(t,i,a){return this.delegate={iterator:T(t),resultName:i,nextLoc:a},"next"===this.method&&(this.arg=undefined),p}},e}function y(e,t,i){P(e,t);t.set(e,i)}function P(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}var E=new WeakMap;var k=function(e){babelHelpers.inherits(t,e);function t(e,i){var a;babelHelpers.classCallCheck(this,t);a=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e,i));y(babelHelpers.assertThisInitialized(a),E,{writable:true,value:void 0});babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(a),E,{createChatButton:null,cancelButton:null});a.handleDialogDestroy=a.handleDialogDestroy.bind(babelHelpers.assertThisInitialized(a));a.handleSelectedItemsUpdated=a.handleSelectedItemsUpdated.bind(babelHelpers.assertThisInitialized(a));a.bindEvents();return a}babelHelpers.createClass(t,[{key:"getContent",value:function e(){this.options.containerClass="sn-ui-selector-footer-create-chat";return c.Tag.render(_||(_=babelHelpers.taggedTemplateLiteral(["\n\t\t\t<div>\n\t\t\t\t","\n\t\t\t\t","\n\t\t\t</div>\n\t\t"])),this.renderCreateChatButton(),this.renderCancelButton())}},{key:"renderCreateChatButton",value:function e(){babelHelpers.classPrivateFieldGet(this,E).createChatButton=new l.Button({text:c.Loc.getMessage("SOCNET_ENTITY_SELECTOR_CREATE"),round:true,color:l.ButtonColor.PRIMARY,size:l.ButtonSize.SMALL,events:{click:this.createChatButtonClickHandler.bind(this)}});babelHelpers.classPrivateFieldGet(this,E).createChatButton.setDisabled(true);return babelHelpers.classPrivateFieldGet(this,E).createChatButton.getContainer()}},{key:"createChatButtonClickHandler",value:function e(){var t=this;var i=this.getDialog().getSelectedItems().map((function(e){return e.getId()}));babelHelpers.classPrivateFieldGet(this,E).createChatButton.setWaiting(true);this.createChatAction(i).then(function(){var e=babelHelpers.asyncToGenerator(S().mark((function e(i){var a,s,n;return S().wrap((function e(r){while(1)switch(r.prev=r.next){case 0:a="chat"+i.data;r.next=3;return c.Runtime.loadExtension("im.public.iframe");case 3:s=r.sent;n=s.Messenger;n.openChat(a);babelHelpers.classPrivateFieldGet(t,E).createChatButton.setWaiting(false);t.getDialog().deselectAll();t.getDialog().hide();case 9:case"end":return r.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},{key:"createChatAction",value:function e(t){return BX.ajax.runAction("socialnetwork.api.chat.create",{data:{userIds:t}})}},{key:"renderCancelButton",value:function e(){babelHelpers.classPrivateFieldGet(this,E).cancelButton=new l.Button({text:c.Loc.getMessage("SOCNET_ENTITY_SELECTOR_CANCEL"),round:true,color:l.ButtonColor.LIGHT_BORDER,size:l.ButtonSize.SMALL,events:{click:this.cancelButtonClickHandler.bind(this)}});return babelHelpers.classPrivateFieldGet(this,E).cancelButton.getContainer()}},{key:"cancelButtonClickHandler",value:function e(){this.getDialog().hide()}},{key:"bindEvents",value:function e(){this.getDialog().subscribe("onDestroy",this.handleDialogDestroy);this.getDialog().subscribe("Item:onSelect",this.handleSelectedItemsUpdated);this.getDialog().subscribe("Item:onDeselect",this.handleSelectedItemsUpdated)}},{key:"unbindEvents",value:function e(){this.getDialog().unsubscribe("onDestroy",this.handleDialogDestroy);this.getDialog().unsubscribe("Item:onSelect",this.handleSelectedItemsUpdated);this.getDialog().unsubscribe("Item:onDeselect",this.handleSelectedItemsUpdated)}},{key:"handleSelectedItemsUpdated",value:function e(){if(!babelHelpers.classPrivateFieldGet(this,E).createChatButton){return}babelHelpers.classPrivateFieldGet(this,E).createChatButton.setDisabled(this.getDialog().getSelectedItems().length===0)}},{key:"handleDialogDestroy",value:function e(){this.unbindEvents()}}]);return t}(r.DefaultFooter);var T;function C(e,t){F(e,t);t.add(e)}function I(e,t,i){F(e,t);t.set(e,i)}function F(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function G(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var M=new WeakMap;var L=new WeakMap;var N=new WeakMap;var W=new WeakMap;var z=new WeakMap;var x=new WeakMap;var D=new WeakMap;var A=new WeakSet;var O=new WeakSet;var B=new WeakSet;var R=function(e){babelHelpers.inherits(t,e);function t(e){var i,a,s,n,r;var l;babelHelpers.classCallCheck(this,t);l=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e));C(babelHelpers.assertThisInitialized(l),B);C(babelHelpers.assertThisInitialized(l),O);C(babelHelpers.assertThisInitialized(l),A);I(babelHelpers.assertThisInitialized(l),M,{writable:true,value:void 0});I(babelHelpers.assertThisInitialized(l),L,{writable:true,value:void 0});I(babelHelpers.assertThisInitialized(l),N,{writable:true,value:void 0});I(babelHelpers.assertThisInitialized(l),W,{writable:true,value:void 0});I(babelHelpers.assertThisInitialized(l),z,{writable:true,value:void 0});I(babelHelpers.assertThisInitialized(l),x,{writable:true,value:void 0});I(babelHelpers.assertThisInitialized(l),D,{writable:true,value:void 0});l.setEventNamespace("SocialNetwork.Spaces.UserSelector");babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(l),M,e.bindElement);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(l),L,e.title);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(l),N,(i=e.preselectedItems)!==null&&i!==void 0?i:[]);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(l),W,(a=e.onClose)!==null&&a!==void 0?a:function(){});babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(l),z,(s=e.onLoad)!==null&&s!==void 0?s:function(){});babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(l),x,(n=e.groupId)!==null&&n!==void 0?n:0);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(l),D,(r=e.createChat)!==null&&r!==void 0?r:false);return l}babelHelpers.createClass(t,[{key:"getDialog",value:function e(){if(!this.dialog){var t=babelHelpers.classPrivateFieldGet(this,L);var i=function(e){babelHelpers.inherits(i,e);function i(){babelHelpers.classCallCheck(this,i);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(i).apply(this,arguments))}babelHelpers.createClass(i,[{key:"render",value:function e(){return c.Tag.render(T||(T=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t\t\t<div class="sn-spaces__entity-dialog-header">',"</div>\n\t\t\t\t\t"])),t)}}]);return i}(r.BaseHeader);this.dialog=new r.Dialog({targetNode:babelHelpers.classPrivateFieldGet(this,M),width:400,dropdownMode:true,header:i,enableSearch:true,context:"socialnetwork.spaces",preselectedItems:babelHelpers.classPrivateFieldGet(this,N),entities:[{id:"user",substituteEntityId:babelHelpers.classPrivateFieldGet(this,D)?"project-user":null,options:{footerInviteIntranetOnly:true,showInvitationFooter:!babelHelpers.classPrivateFieldGet(this,D),projectId:babelHelpers.classPrivateFieldGet(this,x)}}],searchTabOptions:babelHelpers.classPrivateFieldGet(this,D)&&{stubOptions:{title:c.Loc.getMessage("SN_SPACES_USER_SELECTOR_SEARCH_TAB_EMPTY_TITLE"),subtitle:c.Loc.getMessage("SN_SPACES_USER_SELECTOR_SEARCH_TAB_EMPTY_TEXT")}},events:{onHide:babelHelpers.classPrivateFieldGet(this,W),onLoad:babelHelpers.classPrivateFieldGet(this,z),"SearchTab:onLoad":babelHelpers.classPrivateFieldGet(this,z)}});if(babelHelpers.classPrivateFieldGet(this,D)){this.dialog.setFooter(k)}G(this,A,U).call(this)}return this.dialog}},{key:"reload",value:function e(){this.dialog.loadState="UNSENT";this.dialog.load()}}]);return t}(u.EventEmitter);function U(){var e=this;u.EventEmitter.subscribe("SidePanel.Slider:onOpenStart",(function(t){var i=t.target;if(G(e,B,X).call(e)){c.Dom.style(G(e,B,X).call(e),"zIndex",i.getZindex())}}));u.EventEmitter.subscribe("SidePanel.Slider:onBeforeCloseComplete",(function(t){var i=t.target;if(G(e,O,j).call(e,i)&&G(e,B,X).call(e)){c.Dom.style(G(e,B,X).call(e),"zIndex","")}}))}function j(e){var t;return((t=e.options.data)===null||t===void 0?void 0:t.entitySelectorId)===this.dialog.getId()}function X(){return document.getElementById("bx-im-bar")}function q(e,t){Y(e,t);t.add(e)}function V(e,t,i){Y(e,t);t.set(e,i)}function Y(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function Q(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var Z=new WeakMap;var J=new WeakMap;var K=new WeakMap;var $=new WeakSet;var ee=function(){function e(t){babelHelpers.classCallCheck(this,e);q(this,$);V(this,Z,{writable:true,value:void 0});V(this,J,{writable:true,value:void 0});V(this,K,{writable:true,value:void 0});babelHelpers.classPrivateFieldSet(this,Z,t.entityType);babelHelpers.classPrivateFieldSet(this,J,t.entityId);babelHelpers.classPrivateFieldSet(this,K,t.groupMembersList)}babelHelpers.createClass(e,[{key:"startVideoCall",value:function e(){var t=this;c.ajax.runAction("intranet.controlbutton.getVideoCallChat",{data:{entityType:babelHelpers.classPrivateFieldGet(this,Z)==="group"?"workgroup":"user",entityId:babelHelpers.classPrivateFieldGet(this,J)},analyticsLabel:{entity:babelHelpers.classPrivateFieldGet(this,Z)}}).then((function(e){if(e.data){n.Messenger.startVideoCall("chat".concat(e.data),true)}t.chatLockCounter=0}),(function(e){if(e.errors[0].code==="lock_error"&&t.chatLockCounter<4){t.chatLockCounter++;t.startVideoCall()}}))}},{key:"openChat",value:function e(){var t=this;c.ajax.runAction("intranet.controlbutton.getChat",{data:{entityType:babelHelpers.classPrivateFieldGet(this,Z)==="group"?"workgroup":"user",entityId:babelHelpers.classPrivateFieldGet(this,J)},analyticsLabel:{entity:babelHelpers.classPrivateFieldGet(this,Z)}}).then((function(e){if(e.data){n.Messenger.openChat("chat".concat(parseInt(e.data,10)))}t.chatLockCounter=0}),(function(e){if(e.errors[0].code==="lock_error"&&t.chatLockCounter<4){t.chatLockCounter++;t.openChat()}}))}},{key:"createChat",value:function e(t){this.getDialog(t).show()}},{key:"getDialog",value:function e(t){if(!this.userSelector){this.userSelector=new R({bindElement:t,createChat:true,title:c.Loc.getMessage("SN_SPACES_CREATE_CHAT"),onLoad:Q(this,$,te).bind(this),groupId:babelHelpers.classPrivateFieldGet(this,J)})}return this.userSelector.getDialog()}},{key:"update",value:function e(t){var i=this;t.then((function(e){var t;babelHelpers.classPrivateFieldSet(i,K,e.groupMembersList);(t=i.userSelector)===null||t===void 0?void 0:t.reload()}))}}]);return e}();function te(){var e=babelHelpers.classPrivateFieldGet(this,K).filter((function(e){return e.isMember})).map((function(e){return parseInt(e.id)}));this.getDialog().getItems().forEach((function(t){var i=!e.includes(t.getId());t.setHidden(i);if(i&&t.isSelected()){t.deselect()}}))}function ie(e,t){se(e,t);t.add(e)}function ae(e,t,i){se(e,t);t.set(e,i)}function se(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function ne(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var re=new WeakMap;var le=new WeakMap;var oe=new WeakMap;var ce=new WeakSet;var ue=new WeakSet;var pe=new WeakSet;var de=new WeakSet;var he=new WeakSet;var be=new WeakSet;var ve=function(e){babelHelpers.inherits(t,e);function t(e){var i;babelHelpers.classCallCheck(this,t);i=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e));ie(babelHelpers.assertThisInitialized(i),be);ie(babelHelpers.assertThisInitialized(i),he);ie(babelHelpers.assertThisInitialized(i),de);ie(babelHelpers.assertThisInitialized(i),pe);ie(babelHelpers.assertThisInitialized(i),ue);ie(babelHelpers.assertThisInitialized(i),ce);ae(babelHelpers.assertThisInitialized(i),re,{writable:true,value:void 0});ae(babelHelpers.assertThisInitialized(i),le,{writable:true,value:void 0});ae(babelHelpers.assertThisInitialized(i),oe,{writable:true,value:void 0});i.setEventNamespace("SocialNetwork.Spaces.Invite");babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),re,e.node);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),le,ne(babelHelpers.assertThisInitialized(i),de,we).call(babelHelpers.assertThisInitialized(i),e.groupMembersList));babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),oe,ne(babelHelpers.assertThisInitialized(i),he,He).call(babelHelpers.assertThisInitialized(i),e.groupMembersList));return i}babelHelpers.createClass(t,[{key:"show",value:function e(){this.getDialog().show()}},{key:"close",value:function e(){this.getDialog().hide()}},{key:"isShown",value:function e(){this.getDialogPopup().isShown()}},{key:"getDialogPopup",value:function e(){return this.getDialog().getPopup()}},{key:"getDialog",value:function e(){if(!this.dialog){var t=new R({bindElement:babelHelpers.classPrivateFieldGet(this,re),title:c.Loc.getMessage("SN_SPACES_MENU_SPACE_INVITE_MEMBERS"),preselectedItems:ne(this,be,_e).call(this),onClose:ne(this,ce,fe).bind(this),onLoad:ne(this,pe,me).bind(this)});this.dialog=t.getDialog();this.dialog.getPopup().setAngle({position:"top",offset:babelHelpers.classPrivateFieldGet(this,re).offsetWidth+parseInt(getComputedStyle(babelHelpers.classPrivateFieldGet(this,re)).marginLeft)})}return this.dialog}},{key:"update",value:function e(t){var i=this;t.then((function(e){babelHelpers.classPrivateFieldSet(i,le,ne(i,de,we).call(i,e.groupMembersList));babelHelpers.classPrivateFieldSet(i,oe,ne(i,he,He).call(i,e.groupMembersList));ne(i,pe,me).call(i)}))}}]);return t}(u.EventEmitter);function fe(){var e=babelHelpers.toConsumableArray(this.dialog.getSelectedItems()).map((function(e){return e.id}));if(!ne(this,ue,ge).call(this,e,babelHelpers.classPrivateFieldGet(this,le))){babelHelpers.classPrivateFieldSet(this,le,e);this.emit("usersSelected",babelHelpers.classPrivateFieldGet(this,le))}this.emit("onClose")}function ge(e,t){return babelHelpers.toConsumableArray(e).sort().toString()===babelHelpers.toConsumableArray(t).sort().toString()}function me(){var e,t=this;(e=this.dialog)===null||e===void 0?void 0:e.getItems().forEach((function(e){var i=!babelHelpers.classPrivateFieldGet(t,le).includes(e.getId());var a=babelHelpers.classPrivateFieldGet(t,oe).includes(e.getId());e.setHidden(a);if((a||i)&&e.isSelected()){e.deselect()}}))}function we(e){return e.filter((function(e){return e.invited})).map((function(e){return parseInt(e.id)}))}function He(e){return e.filter((function(e){return!e.invited})).map((function(e){return parseInt(e.id)}))}function _e(){return babelHelpers.classPrivateFieldGet(this,le).map((function(e){return["user",parseInt(e)]}))}var Se;function ye(e,t){Ee(e,t);t.add(e)}function Pe(e,t,i){Ee(e,t);t.set(e,i)}function Ee(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function ke(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var Te=new WeakMap;var Ce=new WeakSet;var Ie=new WeakSet;var Fe=function(){function e(t){babelHelpers.classCallCheck(this,e);ye(this,Ie);ye(this,Ce);Pe(this,Te,{writable:true,value:void 0});babelHelpers.classPrivateFieldSet(this,Te,t)}babelHelpers.createClass(e,[{key:"render",value:function e(){var t=ke(this,Ie,Me).call(this);var i=ke(this,Ce,Ge).call(this);return c.Tag.render(Se||(Se=babelHelpers.taggedTemplateLiteral(['<i class="','" style="','"></i>'])),t,i)}},{key:"getClass",value:function e(){var t="";if(babelHelpers.classPrivateFieldGet(this,Te).type==="icon"){if(babelHelpers.classPrivateFieldGet(this,Te).id.length>0){t="sonet-common-workgroup-avatar --".concat(babelHelpers.classPrivateFieldGet(this,Te).id)}else{t="ui-icon-common-user-group ui-icon"}}return t}}]);return e}();function Ge(){var e="";if(babelHelpers.classPrivateFieldGet(this,Te).type==="image"){e="background-image: url(".concat(babelHelpers.classPrivateFieldGet(this,Te).id,"); background-size: cover")}return e}function Me(){return babelHelpers.classPrivateFieldGet(this,Te).type==="image"?"sn-spaces__list-item_img":""}function Le(e,t,i){Ne(e,t);t.set(e,i)}function Ne(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}var We=new WeakMap;var ze=new WeakMap;var xe=new WeakMap;var De=new WeakMap;var Ae=function(){function e(t){babelHelpers.classCallCheck(this,e);Le(this,We,{writable:true,value:void 0});Le(this,ze,{writable:true,value:void 0});Le(this,xe,{writable:true,value:void 0});Le(this,De,{writable:true,value:void 0});babelHelpers.classPrivateFieldSet(this,De,BX.SidePanel.Instance);babelHelpers.classPrivateFieldSet(this,We,t.pathToFeatures);babelHelpers.classPrivateFieldSet(this,ze,t.pathToUsers);babelHelpers.classPrivateFieldSet(this,xe,t.pathToInvite)}babelHelpers.createClass(e,[{key:"openGroupFeatures",value:function e(){babelHelpers.classPrivateFieldGet(this,De).open(babelHelpers.classPrivateFieldGet(this,We),{width:800,loader:"group-features-loader"})}},{key:"openGroupUsers",value:function e(t){var i={all:"members",in:"requests_in",out:"requests_out"};var a=new c.Uri(babelHelpers.classPrivateFieldGet(this,ze));a.setQueryParams({mode:i[t]});babelHelpers.classPrivateFieldGet(this,De).open(a.toString(),{width:1200,cacheable:false,loader:"group-users-loader"})}},{key:"openGroupInvite",value:function e(){babelHelpers.classPrivateFieldGet(this,De).open(babelHelpers.classPrivateFieldGet(this,xe),{width:950,loader:"group-invite-loader"})}}]);return e}();var Oe;var Be=function(e){babelHelpers.inherits(t,e);function t(){var e;babelHelpers.classCallCheck(this,t);e=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));e.setEventNamespace("BX.Socialnetwork.Spaces.Settings.ChatAction");return e}babelHelpers.createClass(t,[{key:"render",value:function e(){var t=this;var i="spaces-settings-video-call";var a="spaces-settings-open-chat";var s="spaces-settings-create-chat";var n=c.Tag.render(Oe||(Oe=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="sn-spaces__popup-communication">\n\t\t\t\t<div\n\t\t\t\t\tdata-id="','"\n\t\t\t\t\tclass="sn-spaces__popup-communication-item"\n\t\t\t\t>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass="ui-icon-set --video-1"\n\t\t\t\t\t\tstyle="--ui-icon-set__icon-size: 26px;"\n\t\t\t\t\t></div>\n\t\t\t\t\t<div class="sn-spaces__popup-communication-item_text">\n\t\t\t\t\t\t','\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tdata-id="','"\n\t\t\t\t\tclass="sn-spaces__popup-communication-item"\n\t\t\t\t>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass="ui-icon-set --chat-1"\n\t\t\t\t\t\tstyle="--ui-icon-set__icon-size: 26px;"\n\t\t\t\t\t></div>\n\t\t\t\t\t<div class="sn-spaces__popup-communication-item_text">\n\t\t\t\t\t\t','\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tdata-id="','"\n\t\t\t\t\tclass="sn-spaces__popup-communication-item"\n\t\t\t\t>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass="ui-icon-set --add-chat"\n\t\t\t\t\t\tstyle="--ui-icon-set__icon-size: 26px;"\n\t\t\t\t\t></div>\n\t\t\t\t\t<div class="sn-spaces__popup-communication-item_text">\n\t\t\t\t\t\t',"\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t"])),i,c.Loc.getMessage("SN_SPACES_MENU_CHAT_VIDEO_CALL_HD"),a,c.Loc.getMessage("SN_SPACES_MENU_CHAT_OPEN"),s,c.Loc.getMessage("SN_SPACES_MENU_CHAT_CREATE"));c.Event.bind(n.querySelector("[data-id='".concat(i,"']")),"click",(function(){return t.emit("videoCall")}));c.Event.bind(n.querySelector("[data-id='".concat(a,"']")),"click",(function(){return t.emit("openChat")}));c.Event.bind(n.querySelector("[data-id='".concat(s,"']")),"click",(function(){return t.emit("createChat")}));return n}}]);return t}(u.EventEmitter);var Re;function Ue(e,t){Xe(e,t);t.add(e)}function je(e,t,i){Xe(e,t);t.set(e,i)}function Xe(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function qe(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var Ve=new WeakMap;var Ye=new WeakMap;var Qe=new WeakMap;var Ze=new WeakSet;var Je=new WeakSet;var Ke=new WeakSet;var $e=new WeakSet;var et=new WeakSet;var tt=function(e){babelHelpers.inherits(t,e);function t(e){var i;babelHelpers.classCallCheck(this,t);i=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));Ue(babelHelpers.assertThisInitialized(i),et);Ue(babelHelpers.assertThisInitialized(i),$e);Ue(babelHelpers.assertThisInitialized(i),Ke);Ue(babelHelpers.assertThisInitialized(i),Je);Ue(babelHelpers.assertThisInitialized(i),Ze);je(babelHelpers.assertThisInitialized(i),Ve,{writable:true,value:void 0});je(babelHelpers.assertThisInitialized(i),Ye,{writable:true,value:void 0});je(babelHelpers.assertThisInitialized(i),Qe,{writable:true,value:void 0});i.setEventNamespace("BX.Socialnetwork.Spaces.Settings.Follow");babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),Ve,e.follow);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),Ye,false);qe(babelHelpers.assertThisInitialized(i),et,rt).call(babelHelpers.assertThisInitialized(i));return i}babelHelpers.createClass(t,[{key:"render",value:function e(){var t="spaces-settings-follow";var i=babelHelpers.classPrivateFieldGet(this,Ve)?"--sound-on":"--sound-off";babelHelpers.classPrivateFieldSet(this,Qe,c.Tag.render(Re||(Re=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div\n\t\t\t\tdata-id="','"\n\t\t\t\tclass="sn-spaces__popup-item --mini"\n\t\t\t>\n\t\t\t\t<div class="sn-spaces__popup-icon-round">\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass="ui-icon-set ','"\n\t\t\t\t\t\tstyle="--ui-icon-set__icon-size: 22px;"\n\t\t\t\t\t></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="sn-spaces__popup-icon-round-name">\n\t\t\t\t\t',"\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t"])),t,i,qe(this,$e,nt).call(this,babelHelpers.classPrivateFieldGet(this,Ve))));c.Event.bind(babelHelpers.classPrivateFieldGet(this,Qe),"click",qe(this,Ze,it).bind(this));return babelHelpers.classPrivateFieldGet(this,Qe)}},{key:"unDisable",value:function e(){babelHelpers.classPrivateFieldSet(this,Ye,false)}}]);return t}(u.EventEmitter);function it(){if(babelHelpers.classPrivateFieldGet(this,Ye)){return}babelHelpers.classPrivateFieldSet(this,Ye,true);babelHelpers.classPrivateFieldSet(this,Ve,!babelHelpers.classPrivateFieldGet(this,Ve));this.emit("update",babelHelpers.classPrivateFieldGet(this,Ve));qe(this,Je,at).call(this,babelHelpers.classPrivateFieldGet(this,Ve));qe(this,Ke,st).call(this,babelHelpers.classPrivateFieldGet(this,Ve))}function at(e){var t=babelHelpers.classPrivateFieldGet(this,Qe).querySelector(".ui-icon-set");if(e){c.Dom.removeClass(t,"--sound-off");c.Dom.addClass(t,"--sound-on")}else{c.Dom.removeClass(t,"--sound-on");c.Dom.addClass(t,"--sound-off")}}function st(e){var t=babelHelpers.classPrivateFieldGet(this,Qe).querySelector(".sn-spaces__popup-icon-round-name");t.textContent=qe(this,$e,nt).call(this,e)}function nt(e){return e?c.Loc.getMessage("SN_SPACES_MENU_FOLLOW_N"):c.Loc.getMessage("SN_SPACES_MENU_FOLLOW_Y")}function rt(){u.EventEmitter.subscribe("followChanged",function(e){babelHelpers.classPrivateFieldSet(this,Ve,e.data.isFollowed);qe(this,Ke,st).call(this,babelHelpers.classPrivateFieldGet(this,Ve));qe(this,Je,at).call(this,babelHelpers.classPrivateFieldGet(this,Ve))}.bind(this))}var lt;function ot(e,t){ut(e,t);t.add(e)}function ct(e,t,i){ut(e,t);t.set(e,i)}function ut(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function pt(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var dt=new WeakMap;var ht=new WeakMap;var bt=new WeakMap;var vt=new WeakSet;var ft=new WeakSet;var gt=new WeakSet;var mt=function(e){babelHelpers.inherits(t,e);function t(e){var i;babelHelpers.classCallCheck(this,t);i=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));ot(babelHelpers.assertThisInitialized(i),gt);ot(babelHelpers.assertThisInitialized(i),ft);ot(babelHelpers.assertThisInitialized(i),vt);ct(babelHelpers.assertThisInitialized(i),dt,{writable:true,value:void 0});ct(babelHelpers.assertThisInitialized(i),ht,{writable:true,value:void 0});ct(babelHelpers.assertThisInitialized(i),bt,{writable:true,value:void 0});i.setEventNamespace("BX.Socialnetwork.Spaces.Settings.Group.Privacy");babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),bt,e.privacyCode);pt(babelHelpers.assertThisInitialized(i),vt,wt).call(babelHelpers.assertThisInitialized(i),e.bindElement);return i}babelHelpers.createClass(t,[{key:"show",value:function e(){if(babelHelpers.classPrivateFieldGet(this,dt).isShown()){babelHelpers.classPrivateFieldGet(this,dt).close()}else{babelHelpers.classPrivateFieldGet(this,dt).show()}}}]);return t}(u.EventEmitter);function wt(e){var t=this;babelHelpers.classPrivateFieldSet(this,dt,new p.Popup({id:"sn-post-form",bindElement:e,content:pt(this,ft,Ht).call(this,babelHelpers.classPrivateFieldGet(this,bt)),autoHide:true,angle:false,width:343,closeIcon:false,closeByEsc:true,overlay:true,padding:12,animation:"fading-slide"}));babelHelpers.classPrivateFieldGet(this,dt).subscribe("onShow",(function(){return t.emit("onShow")}));babelHelpers.classPrivateFieldGet(this,dt).subscribe("onAfterClose",(function(){return t.emit("onAfterClose")}))}function Ht(e){var t=this;var i=e==="open"?"--active":"";var a=e==="closed"?"--active":"";var s=e==="secret"?"--active":"";var n="spaces-group-privacy-open";var r="spaces-group-privacy-closed";var l="spaces-group-privacy-secret";babelHelpers.classPrivateFieldSet(this,ht,c.Tag.render(lt||(lt=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="sn-spaces__popup-menu">\n\t\t\t\t<div data-id="','" class="sn-spaces__popup-menu_item ','">\n\t\t\t\t\t<div class="sn-spaces__popup-menu_item-icon --open-spaces"></div>\n\t\t\t\t\t<div class="sn-spaces__popup-menu_item-info">\n\t\t\t\t\t\t<div class="sn-spaces__popup-menu_item-name">\n\t\t\t\t\t\t\t','\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="sn-spaces__popup-menu_item-description">\n\t\t\t\t\t\t\t','\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div data-id="','" class="sn-spaces__popup-menu_item ','">\n\t\t\t\t\t<div class="sn-spaces__popup-menu_item-icon --closed-spaces"></div>\n\t\t\t\t\t<div class="sn-spaces__popup-menu_item-info">\n\t\t\t\t\t\t<div class="sn-spaces__popup-menu_item-name">\n\t\t\t\t\t\t\t','\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="sn-spaces__popup-menu_item-description">\n\t\t\t\t\t\t\t','\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div data-id="','" class="sn-spaces__popup-menu_item ','">\n\t\t\t\t\t<div class="sn-spaces__popup-menu_item-icon --secret-spaces"></div>\n\t\t\t\t\t<div class="sn-spaces__popup-menu_item-info">\n\t\t\t\t\t\t<div class="sn-spaces__popup-menu_item-name">\n\t\t\t\t\t\t\t','\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="sn-spaces__popup-menu_item-description">\n\t\t\t\t\t\t\t','\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="sn-spaces__popup-menu_hint">\n\t\t\t\t\t',"\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t"])),n,i,c.Loc.getMessage("SN_SPACES_MENU_INFO_VS_OPEN"),c.Loc.getMessage("SN_SPACES_MENU_INFO_VS_OPEN_DESC"),r,a,c.Loc.getMessage("SN_SPACES_MENU_INFO_VS_CLOSED"),c.Loc.getMessage("SN_SPACES_MENU_INFO_VS_CLOSED_DESC"),l,s,c.Loc.getMessage("SN_SPACES_MENU_INFO_VS_SECRET"),c.Loc.getMessage("SN_SPACES_MENU_INFO_VS_SECRET_DESC"),c.Loc.getMessage("SN_SPACES_MENU_INFO_VS_PROMPT")));c.Event.bind(babelHelpers.classPrivateFieldGet(this,ht).querySelector("[data-id='".concat(n,"']")),"click",(function(){return pt(t,gt,_t).call(t,"open")}));c.Event.bind(babelHelpers.classPrivateFieldGet(this,ht).querySelector("[data-id='".concat(r,"']")),"click",(function(){return pt(t,gt,_t).call(t,"closed")}));c.Event.bind(babelHelpers.classPrivateFieldGet(this,ht).querySelector("[data-id='".concat(l,"']")),"click",(function(){return pt(t,gt,_t).call(t,"secret")}));return babelHelpers.classPrivateFieldGet(this,ht)}function _t(e){babelHelpers.classPrivateFieldSet(this,bt,e);c.Dom.removeClass(babelHelpers.classPrivateFieldGet(this,ht).querySelector(".--active"),"--active");var t=babelHelpers.classPrivateFieldGet(this,ht).querySelector("[data-id='spaces-group-privacy-".concat(e,"']"));c.Dom.addClass(t,"--active");this.emit("changePrivacy",babelHelpers.classPrivateFieldGet(this,bt));babelHelpers.classPrivateFieldGet(this,dt).close()}var St,yt,Pt,Et,kt,Tt;function Ct(e,t){Ft(e,t);t.add(e)}function It(e,t,i){Ft(e,t);t.set(e,i)}function Ft(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function Gt(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var Mt=new WeakMap;var Lt=new WeakMap;var Nt=new WeakMap;var Wt=new WeakMap;var zt=new WeakMap;var xt=new WeakMap;var Dt=new WeakMap;var At=new WeakMap;var Ot=new WeakSet;var Bt=new WeakSet;var Rt=new WeakSet;var Ut=new WeakSet;var jt=new WeakSet;var Xt=new WeakSet;var qt=new WeakSet;var Vt=new WeakSet;var Yt=new WeakSet;var Qt=new WeakSet;var Zt=new WeakSet;var Jt=function(e){babelHelpers.inherits(t,e);function t(e){var i;babelHelpers.classCallCheck(this,t);i=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));Ct(babelHelpers.assertThisInitialized(i),Zt);Ct(babelHelpers.assertThisInitialized(i),Qt);Ct(babelHelpers.assertThisInitialized(i),Yt);Ct(babelHelpers.assertThisInitialized(i),Vt);Ct(babelHelpers.assertThisInitialized(i),qt);Ct(babelHelpers.assertThisInitialized(i),Xt);Ct(babelHelpers.assertThisInitialized(i),jt);Ct(babelHelpers.assertThisInitialized(i),Ut);Ct(babelHelpers.assertThisInitialized(i),Rt);Ct(babelHelpers.assertThisInitialized(i),Bt);Ct(babelHelpers.assertThisInitialized(i),Ot);It(babelHelpers.assertThisInitialized(i),Mt,{writable:true,value:void 0});It(babelHelpers.assertThisInitialized(i),Lt,{writable:true,value:void 0});It(babelHelpers.assertThisInitialized(i),Nt,{writable:true,value:void 0});It(babelHelpers.assertThisInitialized(i),Wt,{writable:true,value:void 0});It(babelHelpers.assertThisInitialized(i),zt,{writable:true,value:void 0});It(babelHelpers.assertThisInitialized(i),xt,{writable:true,value:void 0});It(babelHelpers.assertThisInitialized(i),Dt,{writable:true,value:void 0});It(babelHelpers.assertThisInitialized(i),At,{writable:true,value:void 0});i.setEventNamespace("BX.Socialnetwork.Spaces.Settings.Info");babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),Mt,e.title);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),Lt,e.logo);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),Nt,e.privacyCode);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),zt,e.actions);return i}babelHelpers.createClass(t,[{key:"render",value:function e(){var t=this;var i="spaces-settings-space-info-btn";babelHelpers.classPrivateFieldSet(this,xt,c.Tag.render(St||(St=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="sn-spaces__popup-item --main">\n\t\t\t\t<div class="sn-spaces__popup-settings_logo">\n\t\t\t\t\t<div class="sn-spaces__list-item_icon ','">\n\t\t\t\t\t\t','\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="sn-spaces__popup-settings_info">\n\t\t\t\t\t',"\n\t\t\t\t\t","\n\t\t\t\t\t",'\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tstyle="display: none;"\n\t\t\t\t\tdata-id="','"\n\t\t\t\t\tclass="ui-popupcomponentmaker__btn --large --border sn-spaces__popup-settings_btn"\n\t\t\t\t>',"</div>\n\t\t\t</div>\n\t\t"])),babelHelpers.classPrivateFieldGet(this,Lt).getClass(),babelHelpers.classPrivateFieldGet(this,Lt).render(),Gt(this,jt,ii).call(this),Gt(this,Xt,ai).call(this),Gt(this,qt,si).call(this),i,c.Loc.getMessage("SN_SPACES_MENU_INFO_MORE_BTN")));c.Event.bind(babelHelpers.classPrivateFieldGet(this,xt).querySelector("[data-id='".concat(i,"']")),"click",(function(){return t.emit("more")}));return babelHelpers.classPrivateFieldGet(this,xt)}}]);return t}(u.EventEmitter);function Kt(e){var t=this;if(!babelHelpers.classPrivateFieldGet(this,Wt)){babelHelpers.classPrivateFieldSet(this,Wt,new mt({bindElement:e.target,privacyCode:babelHelpers.classPrivateFieldGet(this,Nt)}));babelHelpers.classPrivateFieldGet(this,Wt).subscribe("onShow",(function(){return t.emit("setAutoHide",false)}));babelHelpers.classPrivateFieldGet(this,Wt).subscribe("onAfterClose",(function(){return t.emit("setAutoHide",true)}));babelHelpers.classPrivateFieldGet(this,Wt).subscribe("changePrivacy",Gt(this,Zt,oi).bind(this))}babelHelpers.classPrivateFieldGet(this,Wt).show()}function $t(){c.Dom.addClass(babelHelpers.classPrivateFieldGet(this,Dt),"--hidden");c.Dom.removeClass(babelHelpers.classPrivateFieldGet(this,At),"--hidden");var e=babelHelpers.classPrivateFieldGet(this,At).querySelector("input");e.focus();e.setSelectionRange(e.value.length,e.value.length)}function ei(){c.Dom.addClass(babelHelpers.classPrivateFieldGet(this,At),"--hidden");c.Dom.removeClass(babelHelpers.classPrivateFieldGet(this,Dt),"--hidden")}function ti(e){babelHelpers.classPrivateFieldSet(this,Mt,e);var t=babelHelpers.classPrivateFieldGet(this,Dt).querySelector(".sn-spaces__popup-settings_name");t.textContent=c.Text.encode(babelHelpers.classPrivateFieldGet(this,Mt))}function ii(){babelHelpers.classPrivateFieldSet(this,Dt,c.Tag.render(yt||(yt=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="sn-spaces__popup-settings_title">\n\t\t\t\t<div\n\t\t\t\t\tdata-id="spaces-settings-space-info-name"\n\t\t\t\t\tclass="sn-spaces__popup-settings_name"\n\t\t\t\t>\n\t\t\t\t\t',"\n\t\t\t\t</div>\n\t\t\t\t","\n\t\t\t</div>\n\t\t"])),c.Text.encode(babelHelpers.classPrivateFieldGet(this,Mt)),babelHelpers.classPrivateFieldGet(this,zt).canEdit?Gt(this,Vt,ni).call(this):""));return babelHelpers.classPrivateFieldGet(this,Dt)}function ai(){var e=this;var t="ui-ctl ui-ctl-textbox ui-ctl--w100 ui-ctl--transp "+"ui-ctl-no-border ui-ctl-xs ui-ctl-no-padding";babelHelpers.classPrivateFieldSet(this,At,c.Tag.render(Pt||(Pt=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div\n\t\t\t\tdata-id="spaces-settings-space-info-edit"\n\t\t\t\tclass="sn-spaces__popup-settings_title --hidden"\n\t\t\t>\n\t\t\t\t<div class="','">\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype="text"\n\t\t\t\t\t\tclass="ui-ctl-element sn-spaces__popup-settings_name-input"\n\t\t\t\t\t\tvalue="','"\n\t\t\t\t\t>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t'])),t,c.Text.encode(babelHelpers.classPrivateFieldGet(this,Mt))));var i=babelHelpers.classPrivateFieldGet(this,At).querySelector("input");c.Event.bind(i,"keydown",(function(e){if(e.key==="Escape"||e.key==="Enter"){i.blur();e.stopImmediatePropagation()}}));c.Event.bind(i,"blur",(function(){if(babelHelpers.classPrivateFieldGet(e,Mt)!==i.value){Gt(e,Ut,ti).call(e,i.value);e.emit("changeTitle",babelHelpers.classPrivateFieldGet(e,Mt))}Gt(e,Rt,ei).call(e)}));return babelHelpers.classPrivateFieldGet(this,At)}function si(){var e=c.Tag.render(Et||(Et=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div\n\t\t\t\tdata-id="spaces-settings-space-info-privacy"\n\t\t\t\tclass="sn-spaces__popup-settings_select-private"\n\t\t\t>\n\t\t\t\t<div class="sn-spaces__popup-settings_select-private-text">\n\t\t\t\t\t',"\n\t\t\t\t</div>\n\t\t\t\t","\n\t\t\t</div>\n\t\t"])),Gt(this,Qt,li).call(this,babelHelpers.classPrivateFieldGet(this,Nt)),babelHelpers.classPrivateFieldGet(this,zt).canEdit?Gt(this,Yt,ri).call(this):"");if(babelHelpers.classPrivateFieldGet(this,zt).canEdit){c.Event.bind(e,"click",Gt(this,Ot,Kt).bind(this))}return e}function ni(){var e=c.Tag.render(kt||(kt=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div\n\t\t\t\tdata-id="spaces-settings-space-info-title-edit" \n\t\t\t\tclass="ui-icon-set --pencil-40"\n\t\t\t\tstyle="--ui-icon-set__icon-size: 18px;"\n\t\t\t></div>\n\t\t'])));c.Event.bind(e,"click",Gt(this,Bt,$t).bind(this));return e}function ri(){return c.Tag.render(Tt||(Tt=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div\n\t\t\t\tclass="ui-icon-set --chevron-down"\n\t\t\t\tstyle="--ui-icon-set__icon-size: 14px;"\n\t\t\t></div>\n\t\t'])))}function li(e){return c.Loc.getMessage("SN_SPACES_MENU_INFO_VS_".concat(e.toUpperCase()))}function oi(e){var t=e.getData();babelHelpers.classPrivateFieldGet(this,xt).querySelector(".sn-spaces__popup-settings_select-private-text").textContent=Gt(this,Qt,li).call(this,t);this.emit("changePrivacy",t)}var ci,ui,pi,di,hi,bi,vi,fi,gi,mi,wi;function Hi(e,t){Si(e,t);t.add(e)}function _i(e,t,i){Si(e,t);t.set(e,i)}function Si(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function yi(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var Pi=new WeakMap;var Ei=new WeakMap;var ki=new WeakMap;var Ti=new WeakMap;var Ci=new WeakSet;var Ii=new WeakSet;var Fi=new WeakSet;var Gi=new WeakSet;var Mi=new WeakSet;var Li=new WeakSet;var Ni=new WeakSet;var Wi=new WeakSet;var zi=new WeakSet;var xi=new WeakSet;var Di=new WeakSet;var Ai=new WeakSet;var Oi=function(e){babelHelpers.inherits(t,e);function t(e){var i;babelHelpers.classCallCheck(this,t);i=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));Hi(babelHelpers.assertThisInitialized(i),Ai);Hi(babelHelpers.assertThisInitialized(i),Di);Hi(babelHelpers.assertThisInitialized(i),xi);Hi(babelHelpers.assertThisInitialized(i),zi);Hi(babelHelpers.assertThisInitialized(i),Wi);Hi(babelHelpers.assertThisInitialized(i),Ni);Hi(babelHelpers.assertThisInitialized(i),Li);Hi(babelHelpers.assertThisInitialized(i),Mi);Hi(babelHelpers.assertThisInitialized(i),Gi);Hi(babelHelpers.assertThisInitialized(i),Fi);Hi(babelHelpers.assertThisInitialized(i),Ii);Hi(babelHelpers.assertThisInitialized(i),Ci);_i(babelHelpers.assertThisInitialized(i),Pi,{writable:true,value:void 0});_i(babelHelpers.assertThisInitialized(i),Ei,{writable:true,value:void 0});_i(babelHelpers.assertThisInitialized(i),ki,{writable:true,value:void 0});_i(babelHelpers.assertThisInitialized(i),Ti,{writable:true,value:void 0});i.setEventNamespace("BX.Socialnetwork.Spaces.Settings.Members");babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),Pi,e.amount);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),Ei,e.list);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),ki,e.counters);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),Ti,e.actions);return i}babelHelpers.createClass(t,[{key:"render",value:function e(){var t=this;var i="spaces-settings-create-members-btn";var a=c.Tag.render(ci||(ci=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="sn-spaces__popup-item_expandable">\n\t\t\t\t<div class="sn-spaces__popup-item --expandable">\n\t\t\t\t\t<div class="sn-spaces__popup-item_icon-block">\n\t\t\t\t\t\t<div class="sn-spaces__popup-item_icon">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclass="ui-icon-set --persons-3"\n\t\t\t\t\t\t\t\tstyle="--ui-icon-set__icon-size: 27px;"\n\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="sn-spaces__popup-item_main-info">\n\t\t\t\t\t\t<div class="sn-spaces__popup-item_members">\n\t\t\t\t\t\t\t<div class="sn-spaces__popup-item_members-info">\n\t\t\t\t\t\t\t\t',": ","\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t","\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t","\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t","\n\t\t\t</div>\n\t\t"])),c.Loc.getMessage("SN_SPACES_MENU_MEMBERS_LABEL"),parseInt(babelHelpers.classPrivateFieldGet(this,Pi),10),yi(this,zi,Qi).call(this)?yi(this,Ci,Bi).call(this,i):"",yi(this,Ii,Ri).call(this),yi(this,zi,Qi).call(this)&&yi(this,xi,Zi).call(this)?yi(this,Fi,Ui).call(this):"");var s=a.querySelector("[data-id='".concat(i,"']"));c.Event.bind(a.querySelector(".--expandable"),"click",(function(e){if(!s||!e.target.isEqualNode(s)){t.emit("showUsers","all")}}));return a}}]);return t}(u.EventEmitter);function Bi(e){var t=this;var i=c.Tag.render(ui||(ui=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div \n\t\t\t\tdata-id="','" \n\t\t\t\tclass="ui-popupcomponentmaker__btn --border sn----spaces__popup-settings_btn"\n\t\t\t>\n\t\t\t\t',"\n\t\t\t</div>\n\t\t"])),e,c.Loc.getMessage("SN_SPACES_MENU_MEMBERS_INVITE_BTN"));c.Event.bind(i,"click",(function(){return t.emit("invite")}));return i}function Ri(){var e=this;var t=yi(this,Wi,Yi).call(this);var i=3;var a=t.moderators.slice(0,i);var s=t.users.slice(0,i);var n=babelHelpers.classPrivateFieldGet(this,Pi)-(1+a.length+s.length);return c.Tag.render(pi||(pi=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="sn-spaces__popup-item_lists">\n\t\t\t\t<div class="sn-spaces__popup-item_list">\n\t\t\t\t\t','\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tclass="sn-spaces__popup-item_list"\n\t\t\t\t\tstyle="','"\n\t\t\t\t>\n\t\t\t\t\t','\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tclass="sn-spaces__popup-item_list"\n\t\t\t\t\tstyle="','"\n\t\t\t\t>\n\t\t\t\t\t','\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tclass="sn-spaces__popup-item_list-quantity"\n\t\t\t\t\tstyle="','"\n\t\t\t\t>+',"</div>\n\t\t\t</div>\n\t\t"])),yi(this,Gi,ji).call(this,t.owner),a.length>0?"":"display: none;",a.map((function(t){return yi(e,Mi,Xi).call(e,t)})),s.length>0?"":"display: none;",s.map((function(t){return yi(e,Li,qi).call(e,t)})),n>0?"":"display: none;",n)}function Ui(){var e=this;var t=parseInt(babelHelpers.classPrivateFieldGet(this,ki).workgroup_requests_out,10);var i=parseInt(babelHelpers.classPrivateFieldGet(this,ki).workgroup_requests_in,10);var a="spaces-settings-members-counter-out";var s="spaces-settings-members-counter-in";var n=function i(){if(!yi(e,Di,Ji).call(e)){return""}return c.Tag.render(di||(di=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div data-id="','" class="sn-spaces__popup-item --primary">\n\t\t\t\t\t<div class="sn-spaces__popup-item_counter">','</div>\n\t\t\t\t\t<span class="">','</span>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass="ui-icon-set --chevron-right"\n\t\t\t\t\t\tstyle="--ui-icon-set__icon-size: 14px;"\n\t\t\t\t\t></div>\n\t\t\t\t</div>\n\t\t\t'])),a,t,c.Loc.getMessage("SN_SPACES_MENU_MEMBERS_GREEN_LABEL"))};var r=function t(){if(!yi(e,Ai,Ki).call(e)){return""}return c.Tag.render(hi||(hi=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div data-id="','" class="sn-spaces__popup-item --warning">\n\t\t\t\t\t<div class="sn-spaces__popup-item_counter">','</div>\n\t\t\t\t\t<span class="">','</span>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass="ui-icon-set --chevron-right"\n\t\t\t\t\t\tstyle="--ui-icon-set__icon-size: 14px;"\n\t\t\t\t\t></div>\n\t\t\t\t</div>\n\t\t\t'])),s,i,c.Loc.getMessage("SN_SPACES_MENU_MEMBERS_RED_LABEL"))};var l=c.Tag.render(bi||(bi=babelHelpers.taggedTemplateLiteral(["\n\t\t\t<div>\n\t\t\t\t","\n\t\t\t\t","\n\t\t\t</div>\n\t\t"])),n(),r());c.Event.bind(l.querySelector("[data-id='".concat(a,"']")),"click",(function(){return e.emit("showUsers","out")}));c.Event.bind(l.querySelector("[data-id='".concat(s,"']")),"click",(function(){return e.emit("showUsers","in")}));return l}function ji(e){var t="/bitrix/components/bitrix/socialnetwork.spaces.menu/"+"templates/.default/images/sn-spaces__popup-icon_super-admin.svg";var i=e.photo?"":"ui-icon ui-icon-common-user ui-icon-xs";return c.Tag.render(vi||(vi=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="sn-spaces__popup-item_list-item --super-admin ','">\n\t\t\t\t','\n\t\t\t\t<img src="','" class="sn-spaces__popup-icon_svg" alt="crown">\n\t\t\t</div>\n\t\t'])),i,yi(this,Ni,Vi).call(this,e.photo),t)}function Xi(e){var t="/bitrix/components/bitrix/socialnetwork.spaces.menu/"+"templates/.default/images/sn-spaces__popup-icon_admin.svg";var i=e.photo?"":"ui-icon ui-icon-common-user ui-icon-xs";return c.Tag.render(fi||(fi=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="sn-spaces__popup-item_list-item --admin ','">\n\t\t\t\t','\n\t\t\t\t<img src="','" class="sn-spaces__popup-icon_svg" alt="crown">\n\t\t\t</div>\n\t\t'])),i,yi(this,Ni,Vi).call(this,e.photo),t)}function qi(e){var t=e.photo?"":"ui-icon ui-icon-common-user ui-icon-xs";return c.Tag.render(gi||(gi=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="sn-spaces__popup-item_list-item ','">\n\t\t\t\t',"\n\t\t\t</div>\n\t\t"])),t,yi(this,Ni,Vi).call(this,e.photo))}function Vi(e){if(e){return c.Tag.render(mi||(mi=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<i\n\t\t\t\t\tclass="sn-spaces__popup-item_list-item-img"\n\t\t\t\t\tstyle="background-image: url(\'',"');\"\n\t\t\t\t></i>\n\t\t\t"])),encodeURI(e))}return c.Tag.render(wi||(wi=babelHelpers.taggedTemplateLiteral(["<i></i>"])))}function Yi(){var e={owner:null,moderators:[],users:[]};babelHelpers.classPrivateFieldGet(this,Ei).forEach((function(t){if(t.isOwner){e.owner=t}else if(t.isModerator){e.moderators.push(t)}else{e.users.push(t)}}));return e}function Qi(){return babelHelpers.classPrivateFieldGet(this,Ti).canEdit||babelHelpers.classPrivateFieldGet(this,Ti).canInvite}function Zi(){var e=parseInt(babelHelpers.classPrivateFieldGet(this,ki).workgroup_requests_out,10);var t=parseInt(babelHelpers.classPrivateFieldGet(this,ki).workgroup_requests_in,10);return e>0||t>0}function Ji(){return parseInt(babelHelpers.classPrivateFieldGet(this,ki).workgroup_requests_out,10)>0}function Ki(){return parseInt(babelHelpers.classPrivateFieldGet(this,ki).workgroup_requests_in,10)>0}var $i;function ea(e,t){ia(e,t);t.add(e)}function ta(e,t,i){ia(e,t);t.set(e,i)}function ia(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function aa(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var sa=new WeakMap;var na=new WeakMap;var ra=new WeakMap;var la=new WeakSet;var oa=new WeakSet;var ca=new WeakSet;var ua=new WeakSet;var pa=new WeakSet;var da=function(e){babelHelpers.inherits(t,e);function t(e){var i;babelHelpers.classCallCheck(this,t);i=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));ea(babelHelpers.assertThisInitialized(i),pa);ea(babelHelpers.assertThisInitialized(i),ua);ea(babelHelpers.assertThisInitialized(i),ca);ea(babelHelpers.assertThisInitialized(i),oa);ea(babelHelpers.assertThisInitialized(i),la);ta(babelHelpers.assertThisInitialized(i),sa,{writable:true,value:void 0});ta(babelHelpers.assertThisInitialized(i),na,{writable:true,value:void 0});ta(babelHelpers.assertThisInitialized(i),ra,{writable:true,value:void 0});i.setEventNamespace("BX.Socialnetwork.Spaces.Settings.Pin");babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),sa,e.pin);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),na,false);aa(babelHelpers.assertThisInitialized(i),pa,ga).call(babelHelpers.assertThisInitialized(i));return i}babelHelpers.createClass(t,[{key:"render",value:function e(){var t="spaces-settings-pin";var i=babelHelpers.classPrivateFieldGet(this,sa)?"--pin-2":"--pin-1";babelHelpers.classPrivateFieldSet(this,ra,c.Tag.render($i||($i=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div\n\t\t\t\tdata-id="','"\n\t\t\t\tclass="sn-spaces__popup-item --mini"\n\t\t\t>\n\t\t\t\t<div class="sn-spaces__popup-icon-round">\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass="ui-icon-set ','"\n\t\t\t\t\t\tstyle="--ui-icon-set__icon-size: 22px;"\n\t\t\t\t\t></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="sn-spaces__popup-icon-round-name">\n\t\t\t\t\t',"\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t"])),t,i,aa(this,ua,fa).call(this,babelHelpers.classPrivateFieldGet(this,sa))));c.Event.bind(babelHelpers.classPrivateFieldGet(this,ra),"click",aa(this,la,ha).bind(this));return babelHelpers.classPrivateFieldGet(this,ra)}},{key:"unDisable",value:function e(){babelHelpers.classPrivateFieldSet(this,na,false)}}]);return t}(u.EventEmitter);function ha(){if(babelHelpers.classPrivateFieldGet(this,na)){return}babelHelpers.classPrivateFieldSet(this,na,true);babelHelpers.classPrivateFieldSet(this,sa,!babelHelpers.classPrivateFieldGet(this,sa));this.emit("update",babelHelpers.classPrivateFieldGet(this,sa));aa(this,oa,ba).call(this,babelHelpers.classPrivateFieldGet(this,sa));aa(this,ca,va).call(this,babelHelpers.classPrivateFieldGet(this,sa))}function ba(e){var t=babelHelpers.classPrivateFieldGet(this,ra).querySelector(".ui-icon-set");if(e){c.Dom.removeClass(t,"--pin-1");c.Dom.addClass(t,"--pin-2")}else{c.Dom.removeClass(t,"--pin-2");c.Dom.addClass(t,"--pin-1")}}function va(e){var t=babelHelpers.classPrivateFieldGet(this,ra).querySelector(".sn-spaces__popup-icon-round-name");t.textContent=aa(this,ua,fa).call(this,e)}function fa(e){return e?c.Loc.getMessage("SN_SPACES_MENU_PIN_N"):c.Loc.getMessage("SN_SPACES_MENU_PIN_Y")}function ga(){u.EventEmitter.subscribe("pinChanged",function(e){babelHelpers.classPrivateFieldSet(this,sa,e.data.isPinned);aa(this,ca,va).call(this,babelHelpers.classPrivateFieldGet(this,sa));aa(this,oa,ba).call(this,babelHelpers.classPrivateFieldGet(this,sa))}.bind(this))}var ma;var wa=function(e){babelHelpers.inherits(t,e);function t(){var e;babelHelpers.classCallCheck(this,t);e=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));e.setEventNamespace("BX.Socialnetwork.Spaces.Settings.Roles");return e}babelHelpers.createClass(t,[{key:"render",value:function e(){var t=this;var i="spaces-settings-roles";var a=c.Tag.render(ma||(ma=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div\n\t\t\t\tdata-id="','"\n\t\t\t\tclass="sn-spaces__popup-item --mini Roles&Rights"\n\t\t\t>\n\t\t\t\t<div class="sn-spaces__popup-icon-round">\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass="ui-icon-set --crown-1"\n\t\t\t\t\t\tstyle="--ui-icon-set__icon-size: 22px;"\n\t\t\t\t\t></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="sn-spaces__popup-icon-round-name">\n\t\t\t\t\t',"\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t"])),i,c.Loc.getMessage("SN_SPACES_MENU_ROLES"));c.Event.bind(a,"click",(function(){return t.emit("click")}));return a}}]);return t}(u.EventEmitter);function Ha(e,t){Sa(e,t);t.add(e)}function _a(e,t,i){Sa(e,t);t.set(e,i)}function Sa(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function ya(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var Pa=new WeakMap;var Ea=new WeakMap;var ka=new WeakMap;var Ta=new WeakSet;var Ca=new WeakSet;var Ia=new WeakSet;var Fa=new WeakSet;var Ga=new WeakSet;var Ma=new WeakSet;var La=new WeakSet;var Na=new WeakSet;var Wa=new WeakSet;var za=new WeakSet;var xa=new WeakSet;var Da=new WeakSet;var Aa=new WeakSet;var Oa=new WeakSet;var Ba=function(){function e(t){babelHelpers.classCallCheck(this,e);Ha(this,Oa);Ha(this,Aa);Ha(this,Da);Ha(this,xa);Ha(this,za);Ha(this,Wa);Ha(this,Na);Ha(this,La);Ha(this,Ma);Ha(this,Ga);Ha(this,Fa);Ha(this,Ia);Ha(this,Ca);Ha(this,Ta);_a(this,Pa,{writable:true,value:new c.Cache.MemoryCache});_a(this,Ea,{writable:true,value:void 0});_a(this,ka,{writable:true,value:{members:null}});ya(this,Ta,Ra).call(this,t);babelHelpers.classPrivateFieldSet(this,Ea,ya(this,Ia,ja).call(this))}babelHelpers.createClass(e,[{key:"show",value:function e(){if(babelHelpers.classPrivateFieldGet(this,Ea).isShown()){babelHelpers.classPrivateFieldGet(this,Ea).close()}else{babelHelpers.classPrivateFieldGet(this,Ea).show()}}},{key:"update",value:function e(t){ya(this,Ma,Va).call(this,t)}}]);return e}();function Ra(e){babelHelpers.classPrivateFieldGet(this,Pa).set("params",e)}function Ua(e){return babelHelpers.classPrivateFieldGet(this,Pa).get("params")[e]}function ja(){var e=H.getGroupData(ya(this,Ca,Ua).call(this,"groupId"));return new o.PopupComponentsMaker({id:"spaces-settings-menu",target:ya(this,Ca,Ua).call(this,"bindElement"),content:[{html:[{html:ya(this,Fa,Xa).call(this,e),backgroundColor:"#fafafa"}]},{html:[{html:ya(this,Ga,qa).call(this),withoutBackground:true}]},{html:[{html:ya(this,Ma,Va).call(this,e),withoutBackground:true}]},{html:[{html:ya(this,La,Ya).call(this,e),backgroundColor:"#fafafa"},{html:ya(this,Na,Qa).call(this,e),backgroundColor:"#fafafa"},{html:ya(this,Wa,Za).call(this),backgroundColor:"#fafafa"}]}]})}function Xa(e){var t=this;return new Promise((function(i){e.then((function(e){var a=new Jt({title:e.name,logo:new Fe(ya(t,Ca,Ua).call(t,"logo")),privacyCode:e.privacyCode,actions:e.actions});a.subscribe("changePrivacy",ya(t,Da,$a).bind(t));a.subscribe("changeTitle",ya(t,Aa,es).bind(t));a.subscribe("setAutoHide",(function(e){babelHelpers.classPrivateFieldGet(t,Ea).getPopup().setAutoHide(e.getData())}));a.subscribe("more",(function(){console.log("more")}));i(a.render())}))}))}function qa(){var e=this;var t=new Be;t.subscribe("videoCall",(function(){babelHelpers.classPrivateFieldGet(e,Ea).close();ya(e,Ca,Ua).call(e,"chat").startVideoCall()}));t.subscribe("openChat",(function(){babelHelpers.classPrivateFieldGet(e,Ea).close();ya(e,Ca,Ua).call(e,"chat").openChat()}));t.subscribe("createChat",(function(){babelHelpers.classPrivateFieldGet(e,Ea).close();ya(e,Ca,Ua).call(e,"chat").createChat(ya(e,Ca,Ua).call(e,"bindElement"))}));return t.render()}function Va(e){var t=this;return new Promise((function(i){e.then((function(e){var a=new Oi({amount:e.numberOfMembers,list:e.listOfMembers,counters:e.counters,actions:e.actions});a.subscribe("showUsers",(function(e){babelHelpers.classPrivateFieldGet(t,Ea).close();ya(t,Ca,Ua).call(t,"router").openGroupUsers(e.getData())}));a.subscribe("invite",(function(){babelHelpers.classPrivateFieldGet(t,Ea).close();ya(t,Ca,Ua).call(t,"router").openGroupInvite()}));var s=a.render();if(babelHelpers.classPrivateFieldGet(t,ka).members){babelHelpers.classPrivateFieldGet(t,ka).members.replaceWith(s)}babelHelpers.classPrivateFieldGet(t,ka).members=s;i(babelHelpers.classPrivateFieldGet(t,ka).members)}))}))}function Ya(e){var t=this;return new Promise((function(i){e.then((function(e){var a=new tt({follow:e.isSubscribed});a.subscribe("update",(function(e){ya(t,za,Ja).call(t,ya(t,Ca,Ua).call(t,"groupId"),e.getData()===true?"Y":"N",a)}));i(a.render())}))}))}function Qa(e){var t=this;return new Promise((function(i){e.then((function(e){var a=new da({pin:e.isPin});a.subscribe("update",(function(e){ya(t,xa,Ka).call(t,ya(t,Ca,Ua).call(t,"groupId"),e.getData()===true?"pin":"unpin",a)}));i(a.render())}))}))}function Za(){var e=this;var t=new wa;t.subscribe("click",(function(){babelHelpers.classPrivateFieldGet(e,Ea).close();ya(e,Ca,Ua).call(e,"router").openGroupFeatures()}));return t.render()}function Ja(e,t,i){var a=this;c.ajax.runAction("socialnetwork.api.workgroup.setSubscription",{data:{params:{groupId:e,value:t}}}).then((function(e){i.unDisable()}))["catch"]((function(e){i.unDisable();ya(a,Oa,ts).call(a,"changeSubscribe",e)}))}function Ka(e,t,i){var a=this;c.ajax.runAction("socialnetwork.api.workgroup.changePin",{data:{groupIdList:[e],action:t}}).then((function(e){i.unDisable()}))["catch"]((function(e){i.unDisable();ya(a,Oa,ts).call(a,"changePin",e)}))}function $a(e){var t=this;var i=e.getData();var a={};if(i==="open"){a.VISIBLE="Y";a.OPENED="Y";a.EXTERNAL="N"}if(i==="closed"){a.VISIBLE="Y";a.OPENED="N";a.EXTERNAL="N"}if(i==="secret"){a.VISIBLE="N";a.OPENED="N";a.EXTERNAL="N"}c.ajax.runAction("socialnetwork.api.workgroup.update",{data:{groupId:ya(this,Ca,Ua).call(this,"groupId"),fields:a}}).then((function(e){}))["catch"]((function(e){ya(t,Oa,ts).call(t,"changePrivacy",e)}))}function es(e){var t=this;c.ajax.runAction("socialnetwork.api.workgroup.update",{data:{groupId:ya(this,Ca,Ua).call(this,"groupId"),fields:{NAME:e.getData()}}}).then((function(e){}))["catch"]((function(e){ya(t,Oa,ts).call(t,"changeTitle",e)}))}function ts(e,t){console.error("GroupSettings: ".concat(e," error"),t)}function is(e,t){ss(e,t);t.add(e)}function as(e,t,i){ss(e,t);t.set(e,i)}function ss(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function ns(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var rs=new WeakMap;var ls=new WeakMap;var os=new WeakSet;var cs=new WeakSet;var us=function(){function e(t){babelHelpers.classCallCheck(this,e);is(this,cs);is(this,os);as(this,rs,{writable:true,value:new c.Cache.MemoryCache});as(this,ls,{writable:true,value:void 0});ns(this,os,ps).call(this,t)}babelHelpers.createClass(e,[{key:"show",value:function e(){}}]);return e}();function ps(e){babelHelpers.classPrivateFieldGet(this,rs).set("params",e)}function ds(e,t){bs(e,t);t.add(e)}function hs(e,t,i){bs(e,t);t.set(e,i)}function bs(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function vs(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var fs=new WeakMap;var gs=new WeakMap;var ms=new WeakSet;var ws=new WeakSet;var Hs=function(){function e(t){babelHelpers.classCallCheck(this,e);ds(this,ws);ds(this,ms);hs(this,fs,{writable:true,value:new c.Cache.MemoryCache});hs(this,gs,{writable:true,value:void 0});vs(this,ms,_s).call(this,t)}babelHelpers.createClass(e,[{key:"show",value:function e(){if(!babelHelpers.classPrivateFieldGet(this,gs)){if(vs(this,ws,Ss).call(this,"type")==="user"){babelHelpers.classPrivateFieldSet(this,gs,new us({bindElement:vs(this,ws,Ss).call(this,"bindElement"),userId:vs(this,ws,Ss).call(this,"entityId")}))}else{babelHelpers.classPrivateFieldSet(this,gs,new Ba({bindElement:vs(this,ws,Ss).call(this,"bindElement"),groupId:vs(this,ws,Ss).call(this,"entityId"),logo:vs(this,ws,Ss).call(this,"logo"),chat:vs(this,ws,Ss).call(this,"chat"),router:vs(this,ws,Ss).call(this,"router")}))}}babelHelpers.classPrivateFieldGet(this,gs).show()}},{key:"update",value:function e(t){var i;(i=babelHelpers.classPrivateFieldGet(this,gs))===null||i===void 0?void 0:i.update(t)}}]);return e}();function _s(e){babelHelpers.classPrivateFieldGet(this,fs).set("params",e)}function Ss(e){return babelHelpers.classPrivateFieldGet(this,fs).get("params")[e]}function ys(e,t){Es(e,t);t.add(e)}function Ps(e,t,i){Es(e,t);t.set(e,i)}function Es(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function ks(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var Ts=new WeakMap;var Cs=new WeakSet;var Is=function(e){babelHelpers.inherits(t,e);function t(e){var i;babelHelpers.classCallCheck(this,t);i=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));ys(babelHelpers.assertThisInitialized(i),Cs);Ps(babelHelpers.assertThisInitialized(i),Ts,{writable:true,value:void 0});i.setEventNamespace("BX.Socialnetwork.Spaces.VideoCall");babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),Ts,ks(babelHelpers.assertThisInitialized(i),Cs,Fs).call(babelHelpers.assertThisInitialized(i),e.bindElement));return i}babelHelpers.createClass(t,[{key:"show",value:function e(){babelHelpers.classPrivateFieldGet(this,Ts).toggle()}}]);return t}(u.EventEmitter);function Fs(e){var t=this;var i=new p.Menu({id:"spaces-video-call-menu",bindElement:e,closeByEsc:true,angle:{position:"top",offset:31}});i.addMenuItem({dataset:{id:"spaces-menu-video-call-hd"},text:c.Loc.getMessage("SN_SPACES_MENU_VIDEO_CALL_HD"),className:"sn-spaces-menu-video-call-hd-icon",onclick:function e(){t.emit("hd");i.close()}});i.addMenuItem({delimiter:true});i.addMenuItem({dataset:{id:"spaces-menu-video-call-chat"},text:c.Loc.getMessage("SN_SPACES_MENU_VIDEO_CALL_CHAT"),className:"sn-spaces-menu-video-call-chat-icon",onclick:function e(){t.emit("chat");i.close()}});i.addMenuItem({dataset:{id:"spaces-menu-create-chat"},text:c.Loc.getMessage("SN_SPACES_MENU_CREATE_CHAT"),className:"sn-spaces-menu-create-chat-icon",onclick:function e(){t.emit("createChat");i.close()}});return i}var Gs,Ms,Ls,Ns,Ws,zs,xs,Ds;function As(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */As=function t(){return e};var e={},t=Object.prototype,i=t.hasOwnProperty,a=Object.defineProperty||function(e,t,i){e[t]=i.value},s="function"==typeof Symbol?Symbol:{},n=s.iterator||"@@iterator",r=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function o(e,t,i){return Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{o({},"")}catch(e){o=function e(t,i,a){return t[i]=a}}function c(e,t,i,s){var n=t&&t.prototype instanceof d?t:d,r=Object.create(n.prototype),l=new E(s||[]);return a(r,"_invoke",{value:_(e,i,l)}),r}function u(e,t,i){try{return{type:"normal",arg:e.call(t,i)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var p={};function d(){}function h(){}function b(){}var v={};o(v,n,(function(){return this}));var f=Object.getPrototypeOf,g=f&&f(f(k([])));g&&g!==t&&i.call(g,n)&&(v=g);var m=b.prototype=d.prototype=Object.create(v);function w(e){["next","throw","return"].forEach((function(t){o(e,t,(function(e){return this._invoke(t,e)}))}))}function H(e,t){function s(a,n,r,l){var o=u(e[a],e,n);if("throw"!==o.type){var c=o.arg,p=c.value;return p&&"object"==babelHelpers["typeof"](p)&&i.call(p,"__await")?t.resolve(p.__await).then((function(e){s("next",e,r,l)}),(function(e){s("throw",e,r,l)})):t.resolve(p).then((function(e){c.value=e,r(c)}),(function(e){return s("throw",e,r,l)}))}l(o.arg)}var n;a(this,"_invoke",{value:function e(i,a){function r(){return new t((function(e,t){s(i,a,e,t)}))}return n=n?n.then(r,r):r()}})}function _(e,t,i){var a="suspendedStart";return function(s,n){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===s)throw n;return T()}for(i.method=s,i.arg=n;;){var r=i.delegate;if(r){var l=S(r,i);if(l){if(l===p)continue;return l}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===a)throw a="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a="executing";var o=u(e,t,i);if("normal"===o.type){if(a=i.done?"completed":"suspendedYield",o.arg===p)continue;return{value:o.arg,done:i.done}}"throw"===o.type&&(a="completed",i.method="throw",i.arg=o.arg)}}}function S(e,t){var i=t.method,a=e.iterator[i];if(undefined===a)return t.delegate=null,"throw"===i&&e.iterator["return"]&&(t.method="return",t.arg=undefined,S(e,t),"throw"===t.method)||"return"!==i&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+i+"' method")),p;var s=u(a,e.iterator,t.arg);if("throw"===s.type)return t.method="throw",t.arg=s.arg,t.delegate=null,p;var n=s.arg;return n?n.done?(t[e.resultName]=n.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=undefined),t.delegate=null,p):n:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function y(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(y,this),this.reset(!0)}function k(e){if(e){var t=e[n];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,s=function t(){for(;++a<e.length;)if(i.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=undefined,t.done=!0,t};return s.next=s}}return{next:T}}function T(){return{value:undefined,done:!0}}return h.prototype=b,a(m,"constructor",{value:b,configurable:!0}),a(b,"constructor",{value:h,configurable:!0}),h.displayName=o(b,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,o(e,l,"GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},w(H.prototype),o(H.prototype,r,(function(){return this})),e.AsyncIterator=H,e.async=function(t,i,a,s,n){void 0===n&&(n=Promise);var r=new H(c(t,i,a,s),n);return e.isGeneratorFunction(i)?r:r.next().then((function(e){return e.done?e.value:r.next()}))},w(m),o(m,l,"Generator"),o(m,n,(function(){return this})),o(m,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),i=[];for(var a in t)i.push(a);return i.reverse(),function e(){for(;i.length;){var a=i.pop();if(a in t)return e.value=a,e.done=!1,e}return e.done=!0,e}},e.values=k,E.prototype={constructor:E,reset:function e(t){if(this.prev=0,this.next=0,this.sent=this._sent=undefined,this.done=!1,this.delegate=null,this.method="next",this.arg=undefined,this.tryEntries.forEach(P),!t)for(var a in this)"t"===a.charAt(0)&&i.call(this,a)&&!isNaN(+a.slice(1))&&(this[a]=undefined)},stop:function e(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function e(t){if(this.done)throw t;var a=this;function s(e,i){return l.type="throw",l.arg=t,a.next=e,i&&(a.method="next",a.arg=undefined),!!i}for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n],l=r.completion;if("root"===r.tryLoc)return s("end");if(r.tryLoc<=this.prev){var o=i.call(r,"catchLoc"),c=i.call(r,"finallyLoc");if(o&&c){if(this.prev<r.catchLoc)return s(r.catchLoc,!0);if(this.prev<r.finallyLoc)return s(r.finallyLoc)}else if(o){if(this.prev<r.catchLoc)return s(r.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return s(r.finallyLoc)}}}},abrupt:function e(t,a){for(var s=this.tryEntries.length-1;s>=0;--s){var n=this.tryEntries[s];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var r=n;break}}r&&("break"===t||"continue"===t)&&r.tryLoc<=a&&a<=r.finallyLoc&&(r=null);var l=r?r.completion:{};return l.type=t,l.arg=a,r?(this.method="next",this.next=r.finallyLoc,p):this.complete(l)},complete:function e(t,i){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&i&&(this.next=i),p},finish:function e(t){for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i];if(a.finallyLoc===t)return this.complete(a.completion,a.afterLoc),P(a),p}},catch:function e(t){for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i];if(a.tryLoc===t){var s=a.completion;if("throw"===s.type){var n=s.arg;P(a)}return n}}throw new Error("illegal catch attempt")},delegateYield:function e(t,i,a){return this.delegate={iterator:k(t),resultName:i,nextLoc:a},"next"===this.method&&(this.arg=undefined),p}},e}function Os(e,t){Rs(e,t);t.add(e)}function Bs(e,t,i){Rs(e,t);t.set(e,i)}function Rs(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function Us(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var js=new WeakMap;var Xs=new WeakMap;var qs=new WeakMap;var Vs=new WeakMap;var Ys=new WeakMap;var Qs=new WeakMap;var Zs=new WeakMap;var Js=new WeakMap;var Ks=new WeakMap;var $s=new WeakMap;var en=new WeakMap;var tn=new WeakSet;var an=new WeakSet;var sn=new WeakSet;var nn=new WeakSet;var rn=new WeakSet;var ln=new WeakSet;var on=new WeakSet;var cn=new WeakSet;var un=new WeakSet;var pn=new WeakSet;var dn=new WeakSet;var hn=new WeakSet;var bn=new WeakSet;var vn=new WeakSet;var fn=new WeakSet;var gn=new WeakSet;var mn=new WeakSet;var wn=new WeakSet;var Hn=new WeakSet;var _n=new WeakSet;var Sn=new WeakSet;var yn=new WeakSet;var Pn=new WeakSet;var En=new WeakSet;var kn=new WeakSet;var Tn=new WeakSet;var Cn=function(){function e(t){babelHelpers.classCallCheck(this,e);Os(this,Tn);Os(this,kn);Os(this,En);Os(this,Pn);Os(this,yn);Os(this,Sn);Os(this,_n);Os(this,Hn);Os(this,wn);Os(this,mn);Os(this,gn);Os(this,fn);Os(this,vn);Os(this,bn);Os(this,hn);Os(this,dn);Os(this,pn);Os(this,un);Os(this,cn);Os(this,on);Os(this,ln);Os(this,rn);Os(this,nn);Os(this,sn);Os(this,an);Os(this,tn);Bs(this,js,{writable:true,value:new c.Cache.MemoryCache});Bs(this,Xs,{writable:true,value:void 0});Bs(this,qs,{writable:true,value:void 0});Bs(this,Vs,{writable:true,value:void 0});Bs(this,Ys,{writable:true,value:void 0});Bs(this,Qs,{writable:true,value:void 0});Bs(this,Zs,{writable:true,value:void 0});Bs(this,Js,{writable:true,value:void 0});Bs(this,Ks,{writable:true,value:void 0});Bs(this,$s,{writable:true,value:false});Bs(this,en,{writable:true,value:[]});Us(this,sn,Gn).call(this,t);Us(this,nn,Mn).call(this,t);Us(this,tn,In).call(this)}babelHelpers.createClass(e,[{key:"renderLogoTo",value:function e(t){if(!c.Type.isDomNode(t)){throw new Error("BX.Socialnetwork.Spaces.Menu: HTMLElement for space not found")}var i=new Fe(Us(this,rn,Ln).call(this,"logo"));var a=i.getClass();if(a){c.Dom.addClass(t,a)}c.Dom.append(i.render(),t)}},{key:"renderUserLogoTo",value:function e(t){if(!c.Type.isDomNode(t)){throw new Error("BX.Socialnetwork.Spaces.Menu: HTMLElement for space not found")}c.Dom.addClass(t,["sonet-common-workgroup-avatar","--common-space"]);c.Dom.append(c.Tag.render(Gs||(Gs=babelHelpers.taggedTemplateLiteral(["<i></i>"]))),t)}},{key:"renderToolbarTo",value:function e(t){c.Dom.append(Us(this,ln,Nn).call(this),t);if(Us(this,rn,Ln).call(this,"canInvite")){c.Dom.append(Us(this,pn,Dn).call(this),t)}c.Dom.append(Us(this,dn,An).call(this),t)}},{key:"renderScrumToolbarTo",value:function e(t){c.Dom.append(Us(this,on,Wn).call(this),t);c.Dom.append(Us(this,cn,zn).call(this),t);if(Us(this,rn,Ln).call(this,"canInvite")){c.Dom.append(Us(this,pn,Dn).call(this),t)}c.Dom.append(Us(this,dn,An).call(this),t)}},{key:"renderUserToolbarTo",value:function e(t){c.Dom.append(Us(this,un,xn).call(this),t);c.Dom.append(Us(this,hn,On).call(this),t)}}]);return e}();function In(){var e=new m(Us(this,rn,Ln).call(this,"entityId"));e.subscribe("update",Us(this,an,Fn).bind(this));t.PULL.subscribe(e)}function Fn(){var e;var t=H.getGroupData(Us(this,rn,Ln).call(this,"entityId"));(e=babelHelpers.classPrivateFieldGet(this,Zs))===null||e===void 0?void 0:e.update(t);Us(this,wn,qn).call(this).update(t);babelHelpers.classPrivateFieldGet(this,Js).update(t)}function Gn(e){babelHelpers.classPrivateFieldGet(this,js).set("params",e);if(e.groupMembersList){babelHelpers.classPrivateFieldSet(this,en,e.groupMembersList.filter((function(e){return e.invited})).map((function(e){return parseInt(e.id,10)})))}}function Mn(e){babelHelpers.classPrivateFieldSet(this,Js,new ee({entityType:Us(this,rn,Ln).call(this,"type"),entityId:Us(this,rn,Ln).call(this,"entityId"),groupMembersList:Us(this,rn,Ln).call(this,"groupMembersList")}));babelHelpers.classPrivateFieldSet(this,Ks,new Ae({pathToFeatures:e.pathToFeatures,pathToUsers:e.pathToUsers,pathToInvite:e.pathToInvite}))}function Ln(e){return babelHelpers.classPrivateFieldGet(this,js).get("params")[e]}function Nn(){var e=c.Tag.render(Ms||(Ms=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div\n\t\t\t\tref="node"\n\t\t\t\tdata-id="spaces-video-call-menu"\n\t\t\t\tclass="sn-spaces__menu-toolbar_btn"\n\t\t\t>\n\t\t\t\t<div class="ui-icon-set --video-1"></div>\n\t\t\t\t<div\n\t\t\t\t\tref="chevronDown"\n\t\t\t\t\tclass="ui-icon-set --chevron-down"\n\t\t\t\t\tstyle="--ui-icon-set__icon-size: 14px;"\n\t\t\t\t></div>\n\t\t\t</div>\n\t\t']))),t=e.node,i=e.chevronDown;c.Event.bind(t,"click",Us(this,bn,Bn).bind(this,i));return t}function Wn(){var e=c.Tag.render(Ls||(Ls=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div data-id="spaces-scrum-video-call-menu" class="sn-spaces__menu-toolbar_btn">\n\t\t\t\t<div class="ui-icon-set --video-1"></div>\n\t\t\t\t<div class="ui-icon-set --chevron-down" style="--ui-icon-set__icon-size: 14px;"></div>\n\t\t\t</div>\n\t\t'])));c.Event.bind(e,"click",Us(this,vn,Rn).bind(this));return e}function zn(){var e=c.Tag.render(Ns||(Ns=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div data-id="spaces-scrum-elements-menu" class="sn-spaces__menu-toolbar_btn">\n\t\t\t\t<div class="ui-icon-set --elements"></div>\n\t\t\t</div>\n\t\t'])));c.Event.bind(e,"click",Us(this,fn,Un).bind(this));return e}function xn(){var e=c.Tag.render(Ws||(Ws=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div data-id="spaces-video-call-menu" class="sn-spaces__menu-toolbar_btn">\n\t\t\t\t<div class="ui-icon-set --video-1"></div>\n\t\t\t\t<div class="ui-icon-set --chevron-down" style="--ui-icon-set__icon-size: 14px;"></div>\n\t\t\t</div>\n\t\t'])));c.Event.bind(e,"click",Us(this,gn,jn).bind(this));return e}function Dn(){var e=this;if(!babelHelpers.classPrivateFieldGet(this,Qs)){babelHelpers.classPrivateFieldSet(this,Qs,c.Tag.render(zs||(zs=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div data-id="spaces-invite-menu" class="sn-spaces__menu-toolbar_btn">\n\t\t\t\t\t<div class="ui-icon-set --person-plus"></div>\n\t\t\t\t</div>\n\t\t\t']))));c.Event.bind(babelHelpers.classPrivateFieldGet(this,Qs),"click",Us(this,mn,Xn).bind(this));if(Us(this,rn,Ln).call(this,"isNew")){setTimeout((function(){return Us(e,Sn,Qn).call(e,babelHelpers.classPrivateFieldGet(e,Qs))}),500)}}return babelHelpers.classPrivateFieldGet(this,Qs)}function An(){var e=c.Tag.render(xs||(xs=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div data-id="spaces-settings-menu" class="sn-spaces__menu-toolbar_btn">\n\t\t\t\t<div class="ui-icon-set --more"></div>\n\t\t\t</div>\n\t\t'])));c.Event.bind(e,"click",Us(this,kn,er).bind(this));return e}function On(){var e=c.Tag.render(Ds||(Ds=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div data-id="spaces-settings-menu" class="sn-spaces__menu-toolbar_btn">\n\t\t\t\t<div class="ui-icon-set --more"></div>\n\t\t\t</div>\n\t\t'])));c.Event.bind(e,"click",Us(this,Tn,tr).bind(this));return e}function Bn(e){var t=this;if(!babelHelpers.classPrivateFieldGet(this,Xs)){babelHelpers.classPrivateFieldSet(this,Xs,new Is({bindElement:e}));babelHelpers.classPrivateFieldGet(this,Xs).subscribe("hd",(function(){babelHelpers.classPrivateFieldGet(t,Js).startVideoCall()}));babelHelpers.classPrivateFieldGet(this,Xs).subscribe("chat",(function(){babelHelpers.classPrivateFieldGet(t,Js).openChat()}));babelHelpers.classPrivateFieldGet(this,Xs).subscribe("createChat",(function(){babelHelpers.classPrivateFieldGet(t,Js).createChat(e)}))}babelHelpers.classPrivateFieldGet(this,Xs).show()}function Rn(e){if(!babelHelpers.classPrivateFieldGet(this,qs)){babelHelpers.classPrivateFieldSet(this,qs,new i.Meetings({groupId:Us(this,rn,Ln).call(this,"entityId")}))}babelHelpers.classPrivateFieldGet(this,qs).showMenu(e.target)}function Un(e){if(!babelHelpers.classPrivateFieldGet(this,Vs)){babelHelpers.classPrivateFieldSet(this,Vs,new a.Methodology({groupId:Us(this,rn,Ln).call(this,"entityId"),teamSpeedPath:Us(this,rn,Ln).call(this,"pathToScrumTeamSpeed"),burnDownPath:Us(this,rn,Ln).call(this,"pathToScrumBurnDown"),pathToTask:Us(this,rn,Ln).call(this,"pathToGroupTasksTask")}))}babelHelpers.classPrivateFieldGet(this,Vs).showMenu(e.target)}function jn(e){}function Xn(){var e=Us(this,wn,qn).call(this);if(e.isShown()){e.close()}else{e.show()}}function qn(){if(!babelHelpers.classPrivateFieldGet(this,Ys)){babelHelpers.classPrivateFieldSet(this,Ys,new ve({node:babelHelpers.classPrivateFieldGet(this,Qs),groupMembersList:Us(this,rn,Ln).call(this,"groupMembersList")}));babelHelpers.classPrivateFieldGet(this,Ys).subscribe("onClose",Us(this,_n,Yn).bind(this));babelHelpers.classPrivateFieldGet(this,Ys).subscribe("usersSelected",Us(this,Hn,Vn).bind(this))}return babelHelpers.classPrivateFieldGet(this,Ys)}function Vn(e){var t=e.data;Us(this,Pn,Kn).call(this,t)}function Yn(){if(Us(this,rn,Ln).call(this,"isNew")&&!babelHelpers.classPrivateFieldGet(this,$s)){var e=document.querySelector("[data-id=spaces-discussions-add-main-btn]");if(!e){return}Us(this,Sn,Qn).call(this,e,{title:c.Loc.getMessage("SN_SPACES_DISCUSSION_AHA_MOMENT_TITLE"),text:c.Loc.getMessage("SN_SPACES_DISCUSSION_AHA_MOMENT_TEXT")});babelHelpers.classPrivateFieldSet(this,$s,true)}}function Qn(e){var t=this;var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;c.Runtime.loadExtension("spotlight").then((function(){var a=new BX.SpotLight({targetElement:e,targetVertex:"middle-center"});c.Dom.addClass(e,"--active");a.bindEvents({onTargetEnter:function t(){c.Dom.removeClass(e,"--active");a.close()}});a.setColor("#2fc6f6");a.show();if(i){Us(t,yn,Zn).call(t,e,{title:i.title,text:i.text,spotlight:a})}}))}function Zn(e,t){return Jn.apply(this,arguments)}function Jn(){Jn=babelHelpers.asyncToGenerator(As().mark((function e(t,i){var a,s,n,r;return As().wrap((function e(l){while(1)switch(l.prev=l.next){case 0:l.next=2;return c.Runtime.loadExtension("ui.tour");case 2:a=l.sent;s=a.Guide;n=new s({simpleMode:true,onEvents:true,steps:[{target:t,title:i.title,text:i.text,position:"bottom",condition:{top:true,bottom:false,color:"primary"}}]});n.showNextStep();r=n.getPopup();r.setWidth(380);r.getContentContainer().style.paddingRight=getComputedStyle(r.closeIcon)["width"];r.setAngle({offset:t.offsetWidth/2-5});r.subscribe("onClose",(function(){return i.spotlight.close()}));r.setAutoHide(true);case 12:case"end":return l.stop()}}),e)})));return Jn.apply(this,arguments)}function Kn(e){var t=this;var i=e.filter((function(e){return!babelHelpers.classPrivateFieldGet(t,en).includes(e)}));var a=babelHelpers.classPrivateFieldGet(this,en).filter((function(t){return!e.includes(t)}));babelHelpers.classPrivateFieldSet(this,en,e);H.inviteUsers(Us(this,rn,Ln).call(this,"entityId"),e).then((function(){BX.UI.Notification.Center.notify({content:Us(t,En,$n).call(t,i,a)})}),(function(e){return console.log(e)}))}function $n(e,t){var i=e.length>0;var a=t.length>0;if(i&&!a){return c.Loc.getMessage("SN_SPACES_INVITATIONS_SENT")}if(!i&&a){return c.Loc.getMessage("SN_SPACES_INVITATIONS_REMOVED")}if(i&&a){return c.Loc.getMessage("SN_SPACES_INVITATIONS_CHANGED")}return c.Loc.getMessage("SN_SPACES_INVITATIONS_SENT")}function er(e){if(!babelHelpers.classPrivateFieldGet(this,Zs)){babelHelpers.classPrivateFieldSet(this,Zs,new Hs({bindElement:e.target,type:Us(this,rn,Ln).call(this,"type"),entityId:Us(this,rn,Ln).call(this,"entityId"),logo:Us(this,rn,Ln).call(this,"logo"),chat:babelHelpers.classPrivateFieldGet(this,Js),router:babelHelpers.classPrivateFieldGet(this,Ks)}))}babelHelpers.classPrivateFieldGet(this,Zs).show()}function tr(e){}e.Menu=Cn})(this.BX.Socialnetwork.Spaces=this.BX.Socialnetwork.Spaces||{},BX,BX.Tasks.Scrum,BX.Tasks.Scrum,BX.UI.Tour,BX.Messenger.v2.Lib,BX.UI.EntitySelector,BX.UI,BX.UI,BX,BX.Event,BX.Main);
//# sourceMappingURL=script.map.js