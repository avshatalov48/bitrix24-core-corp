{"version":3,"file":"script.js","sources":["script.es6.js"],"sourcesContent":["import { Dom, Event, Reflection, Type, Tag } from 'main.core';\nimport { TemplatesScheme } from 'bizproc.automation';\nimport { Menu } from 'main.popup';\n\nconst namespace = Reflection.namespace('BX.Bizproc.Component');\n\nclass Scheme\n{\n\tscheme: TemplatesScheme;\n\tsignedParameters: string;\n\tsteps;\n\n\tselectedType = null;\n\tselectedCategory = null;\n\tselectedStatus = null;\n\n\texecuteButton: HTMLDivElement;\n\n\terrorsContainer: HTMLDivElement;\n\tstepContentTypeContainer: HTMLDivElement;\n\tstepContentCategoryContainer: HTMLDivElement;\n\tstepContentStatusContainer: HTMLDivElement;\n\n\tconstructor(options)\n\t{\n\t\tif (Type.isPlainObject(options))\n\t\t{\n\t\t\tthis.scheme = new TemplatesScheme(options.scheme);\n\t\t\tthis.signedParameters = options.signedParameters;\n\t\t\tthis.steps = options.steps;\n\t\t\tthis.action = options.action;\n\n\t\t\tthis.executeButton = options.executeButton;\n\n\t\t\tthis.errorsContainer = options.errorsContainer;\n\t\t\tthis.stepContentTypeContainer = options.stepsContentContainers[0];\n\t\t\tthis.stepContentCategoryContainer = options.stepsContentContainers[1];\n\t\t\tthis.stepContentStatusContainer = options.stepsContentContainers[2];\n\t\t}\n\t}\n\n\tinit()\n\t{\n\t\tthis.renderStepContents();\n\t\tEvent.bind(this.executeButton, 'click', this.onExecuteButtonClick.bind(this));\n\t}\n\n\trenderStepContents()\n\t{\n\t\tconst steps = [\n\t\t\t[this.selectedType, this.stepContentTypeContainer, this.onTypeSelectorClick.bind(this)],\n\t\t\t[this.selectedCategory, this.stepContentCategoryContainer, this.onCategorySelectorClick.bind(this)],\n\t\t\t[this.selectedStatus, this.stepContentStatusContainer, this.onStatusSelectorClick.bind(this)],\n\t\t];\n\n\t\tlet completedSteps = 0;\n\t\tsteps.forEach(([selected, container, onclick]) => {\n\t\t\tconst text =\n\t\t\t\tType.isNil(selected)\n\t\t\t\t\t? BX.message('BIZPROC_AUTOMATION_SCHEME_DROPDOWN_PLACEHOLDER')\n\t\t\t\t\t: selected.Name\n\t\t\t;\n\t\t\tthis.renderDropdownStepContent(container, text, onclick);\n\t\t\tif (selected)\n\t\t\t{\n\t\t\t\tcompletedSteps += 1;\n\t\t\t}\n\t\t});\n\n\t\tif (!Type.isNil(this.selectedType) && this.scheme.getTypeCategories(this.selectedType).length <= 0)\n\t\t{\n\t\t\tthis.renderTextStepContent(this.stepContentCategoryContainer, BX.message('BIZPROC_AUTOMATION_SCHEME_CATEGORIES_NOT_EXISTS'));\n\t\t\tcompletedSteps += 1;\n\t\t}\n\t\tthis.stepTo(completedSteps);\n\t}\n\n\trenderDropdownStepContent(target, text, onclick)\n\t{\n\t\tDom.clean(target);\n\t\tconst dropdownNode = Dom.create('div', {\n\t\t\tattrs: {class: 'ui-ctl ui-ctl-after-icon ui-ctl-dropdown'},\n\t\t\tevents: {\n\t\t\t\tclick: onclick\n\t\t\t},\n\t\t\tchildren: [\n\t\t\t\tTag.render`<div class=\"ui-ctl-after ui-ctl-icon-angle\"></div>`,\n\t\t\t\tTag.render`<div class=\"ui-ctl-element\">${text}</div>`,\n\t\t\t],\n\t\t});\n\n\t\ttarget.appendChild(\n\t\t\tDom.create('div', {\n\t\t\t\tattrs: {class: 'bizproc-automation-scheme__content --padding-15'},\n\t\t\t\tchildren: [dropdownNode],\n\t\t\t})\n\t\t);\n\t}\n\n\trenderTextStepContent(target, text)\n\t{\n\t\tDom.clean(target);\n\t\ttarget.appendChild(\n\t\t\tTag.render`\n\t\t\t\t<div class=\"bizproc-automation-scheme__content\">\n\t\t\t\t\t<div class=\"ui-alert ui-alert-success\">\n\t\t\t\t\t\t<span class=\"ui-alert-message\">${text}</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`\n\t\t);\n\t}\n\n\tonExecuteButtonClick(event)\n\t{\n\t\tevent.preventDefault();\n\t\tif (!this.selectedType || !this.selectedStatus)\n\t\t{\n\t\t\tthis.showError({message: BX.message(`BIZPROC_AUTOMATION_SCHEME_DESTINATION_SCOPE_ERROR_ACTION_${this.action}`)});\n\t\t\tDom.removeClass(this.executeButton, 'ui-btn-wait');\n\t\t\treturn;\n\t\t}\n\n\t\tBX.ajax.runComponentAction('bitrix:bizproc.automation.scheme', 'copyMove', {\n\t\t\tmode: 'class',\n\t\t\tsignedParameters: this.signedParameters,\n\t\t\tdata: {\n\t\t\t\tdstScope: {\n\t\t\t\t\tDocumentType: this.selectedType,\n\t\t\t\t\tCategory: this.selectedCategory,\n\t\t\t\t\tStatus: this.selectedStatus,\n\t\t\t\t},\n\t\t\t}\n\t\t}).then(response => {\n\t\t\tif (this.isSlider())\n\t\t\t{\n\t\t\t\tconst sliderData = BX.SidePanel.Instance.getTopSlider().getData();\n\t\t\t\tObject.entries(response.data).forEach(([key, data]) => sliderData.set(key, data));\n\t\t\t\tsliderData.set('targetScope', {\n\t\t\t\t\tdocumentType: this.selectedType,\n\t\t\t\t\tcategory: this.selectedCategory,\n\t\t\t\t\tstatus: this.selectedStatus,\n\t\t\t\t});\n\t\t\t\tBX.SidePanel.Instance.close();\n\t\t\t}\n\t\t\tDom.removeClass(this.executeButton, 'ui-btn-wait');\n\t\t}).catch(response => {\n\t\t\tresponse.errors.forEach(error => this.showError(error));\n\t\t\tDom.removeClass(this.executeButton, 'ui-btn-wait');\n\t\t});\n\t}\n\n\tisSlider(): boolean\n\t{\n\t\treturn location.href.toString().indexOf('SIDE_SLIDER') > 0;\n\t}\n\n\tstepTo(index: number)\n\t{\n\t\tthis.steps.forEach(function(elem, i)\n\t\t{\n\t\t\tif (i < index)\n\t\t\t{\n\t\t\t\tDom.addClass(elem, '--success');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tDom.removeClass(elem, '--success');\n\t\t\t}\n\t\t}.bind(this));\n\t}\n\n\tonTypeSelectorClick(event)\n\t{\n\t\tevent.preventDefault();\n\t\tconst self = this;\n\n\t\tthis.adjustDropdown(\n\t\t\tevent.target,\n\t\t\tthis.scheme.getDocumentTypes().map(type => {\n\t\t\t\treturn {\n\t\t\t\t\tid: type.Type,\n\t\t\t\t\ttext: type.Name,\n\t\t\t\t\tonclick(event)\n\t\t\t\t\t{\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\tthis.close();\n\t\t\t\t\t\tself.selectedType = type;\n\t\t\t\t\t\tself.selectedCategory = null;\n\t\t\t\t\t\tself.selectedStatus = null;\n\t\t\t\t\t\tself.renderStepContents();\n\t\t\t\t\t},\n\t\t\t\t};\n\t\t\t})\n\t\t);\n\t}\n\n\tonCategorySelectorClick(event)\n\t{\n\t\tevent.preventDefault();\n\t\tconst self = this;\n\t\tconst categories = !Type.isNil(this.selectedType) ? this.scheme.getTypeCategories(this.selectedType) : [];\n\n\t\tif (categories.length > 0)\n\t\t{\n\t\t\tthis.adjustDropdown(\n\t\t\t\tevent.target,\n\t\t\t\tcategories.map(category => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tid: category.Id,\n\t\t\t\t\t\ttext: category.Name,\n\t\t\t\t\t\tonclick(event)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\tthis.close();\n\t\t\t\t\t\t\tself.selectedCategory = category;\n\t\t\t\t\t\t\tself.selectedStatus = null;\n\t\t\t\t\t\t\tself.renderStepContents();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\t}\n\n\tonStatusSelectorClick(event)\n\t{\n\t\tevent.preventDefault();\n\t\tconst self = this;\n\t\tlet statuses =  [];\n\t\tif (!Type.isNil(this.selectedType))\n\t\t{\n\t\t\tstatuses = this.scheme.getTypeStatuses(this.selectedType, this.selectedCategory);\n\t\t}\n\n\t\tif (statuses.length > 0)\n\t\t{\n\t\t\tthis.adjustDropdown(\n\t\t\t\tevent.target,\n\t\t\t\tstatuses.map(status => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tid: status.Id,\n\t\t\t\t\t\ttext: status.Name,\n\t\t\t\t\t\tonclick(event)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\tthis.close();\n\t\t\t\t\t\t\tself.selectedStatus = status;\n\t\t\t\t\t\t\tself.renderStepContents();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\t}\n\n\tadjustDropdown(target, items)\n\t{\n\t\tconst popupMenu = new Menu({\n\t\t\tautoHide: true,\n\t\t\tbindElement: target,\n\t\t\twidth: target.offsetWidth,\n\t\t\tcloseByEsc: true,\n\t\t\titems: items,\n\t\t});\n\n\t\tpopupMenu.show();\n\t}\n\n\tshowError(error)\n\t{\n\t\tconst errorNode = Dom.create('div', {\n\t\t\tprops: {className: 'ui-alert ui-alert-danger'},\n\t\t\tchildren: [\n\t\t\t\tTag.render`<span class=\"ui-alert-message\">${error.message}</span>`\n\t\t\t]\n\t\t});\n\n\t\tthis.errorsContainer.append(errorNode);\n\t}\n}\n\nnamespace.Scheme = Scheme;\n"],"names":["namespace","Reflection","Scheme","options","Type","isPlainObject","scheme","TemplatesScheme","signedParameters","steps","action","executeButton","errorsContainer","stepContentTypeContainer","stepsContentContainers","stepContentCategoryContainer","stepContentStatusContainer","renderStepContents","Event","bind","onExecuteButtonClick","selectedType","onTypeSelectorClick","selectedCategory","onCategorySelectorClick","selectedStatus","onStatusSelectorClick","completedSteps","forEach","selected","container","onclick","text","isNil","BX","message","Name","renderDropdownStepContent","getTypeCategories","length","renderTextStepContent","stepTo","target","Dom","clean","dropdownNode","create","attrs","class","events","click","children","Tag","render","appendChild","event","preventDefault","showError","removeClass","ajax","runComponentAction","mode","data","dstScope","DocumentType","Category","Status","then","response","isSlider","sliderData","SidePanel","Instance","getTopSlider","getData","Object","entries","key","set","documentType","category","status","close","catch","errors","error","location","href","toString","indexOf","index","elem","i","addClass","self","adjustDropdown","getDocumentTypes","map","type","id","categories","Id","statuses","getTypeStatuses","items","popupMenu","Menu","autoHide","bindElement","width","offsetWidth","closeByEsc","show","errorNode","props","className","append"],"mappings":"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"}