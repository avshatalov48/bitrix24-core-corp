this.BX=this.BX||{};(function(e,s,t){"use strict";let i=e=>e,a,l,r,n,o;var d=babelHelpers.classPrivateFieldLooseKey("instance");var b=babelHelpers.classPrivateFieldLooseKey("popup");var p=babelHelpers.classPrivateFieldLooseKey("isBitrix24");var c=babelHelpers.classPrivateFieldLooseKey("isAdmin");var v=babelHelpers.classPrivateFieldLooseKey("isRequisite");var g=babelHelpers.classPrivateFieldLooseKey("getWidgetPopup");var h=babelHelpers.classPrivateFieldLooseKey("load");class P{constructor(e){Object.defineProperty(this,h,{value:B});Object.defineProperty(this,g,{value:u});Object.defineProperty(this,b,{writable:true,value:void 0});Object.defineProperty(this,p,{writable:true,value:false});Object.defineProperty(this,c,{writable:true,value:false});Object.defineProperty(this,v,{writable:true,value:false});babelHelpers.classPrivateFieldLooseBase(this,p)[p]=e["isBitrix24"];babelHelpers.classPrivateFieldLooseBase(this,c)[c]=e["isAdmin"];babelHelpers.classPrivateFieldLooseBase(this,v)[v]=e["isRequisite"]}showOnce(e){const s=babelHelpers.classPrivateFieldLooseBase(this,g)[g]().getPopup();s.setBindElement(e);s.show();const t=s.getPopupContainer();if(t.getBoundingClientRect().left<30){t.style.left="30px"}(typeof BX.Intranet.SettingsWidget!=="undefined"?Promise.resolve():babelHelpers.classPrivateFieldLooseBase(this,h)[h]()).then((()=>{if(typeof BX.Intranet.SettingsWidget!=="undefined"){BX.Intranet.SettingsWidget.bindAndShow(e)}}))}static init(e){if(!babelHelpers.classPrivateFieldLooseBase(this,d)[d]){babelHelpers.classPrivateFieldLooseBase(this,d)[d]=new this(e)}return babelHelpers.classPrivateFieldLooseBase(this,d)[d]}}function u(){if(babelHelpers.classPrivateFieldLooseBase(this,b)[b]){return babelHelpers.classPrivateFieldLooseBase(this,b)[b]}const e=new s.PopupComponentsMaker({width:374});const d=e.getPopup().getPopupContainer();t.Dom.clean(d);t.Dom.addClass(d,"intranet-settings-widget__container");if(babelHelpers.classPrivateFieldLooseBase(this,p)[p]&&!babelHelpers.classPrivateFieldLooseBase(this,c)[c]){t.Dom.append(t.Tag.render(a||(a=i`<div class="intranet-settings-widget__skeleton-not-admin"></div>`)),d)}else if(babelHelpers.classPrivateFieldLooseBase(this,p)[p]&&babelHelpers.classPrivateFieldLooseBase(this,v)[v]){t.Dom.append(t.Tag.render(l||(l=i`<div class="intranet-settings-widget__skeleton"></div>`)),d)}else if(babelHelpers.classPrivateFieldLooseBase(this,p)[p]&&!babelHelpers.classPrivateFieldLooseBase(this,v)[v]){t.Dom.append(t.Tag.render(r||(r=i`<div class="intranet-settings-widget__skeleton-no-requisite"></div>`)),d)}else if(!babelHelpers.classPrivateFieldLooseBase(this,p)[p]&&babelHelpers.classPrivateFieldLooseBase(this,v)[v]){t.Dom.append(t.Tag.render(n||(n=i`<div class="intranet-settings-widget__skeleton-no-holding"></div>`)),d)}else{t.Dom.append(t.Tag.render(o||(o=i`<div class="intranet-settings-widget__skeleton-no-requisite-holding"></div>`)),d)}babelHelpers.classPrivateFieldLooseBase(this,b)[b]=e;return e}function B(){return new Promise((e=>{t.ajax.runComponentAction("bitrix:intranet.settings.widget","getWidgetComponent",{mode:"class"}).then((e=>new Promise((s=>{const i=e.data.assets?e.data.assets.css:[];const a=e.data.assets?e.data.assets.js:[];BX.load(i,(()=>{BX.loadScript(a,(()=>{t.Runtime.html(null,e.data.html).then(s)}))}))})))).then((()=>{if(typeof BX.Intranet.SettingsWidget!=="undefined"){setTimeout((()=>{BX.Intranet.SettingsWidget.bindWidget(babelHelpers.classPrivateFieldLooseBase(this,g)[g]());e()}),0)}}))}))}Object.defineProperty(P,d,{writable:true,value:void 0});e.SettingsWidgetLoader=P})(this.BX.Intranet=this.BX.Intranet||{},BX.UI,BX);
//# sourceMappingURL=script.map.js