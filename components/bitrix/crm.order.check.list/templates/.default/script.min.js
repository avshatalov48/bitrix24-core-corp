BX.namespace("BX.Crm");if(typeof BX.Crm.OrderPaymentCheckList==="undefined"){BX.Crm.OrderPaymentCheckList=function(){this._id="";this._settings=""};BX.Crm.OrderPaymentCheckList.prototype={initialize:function(t,e){this._id=BX.type.isNotEmptyString(t)?t:BX.util.getRandomString(4);this._settings=e?e:{};this.unbindEvents();this.bindEvents()},bindEvents:function(){BX.bind(document.querySelector(".order-payment-check-add"),"click",BX.delegate((function(t){this.onShowCheck(t,this._settings.ADD_CHECK_URL)}),this))},unbindEvents:function(){BX.unbind(document.querySelector(".order-payment-check-add"),"click",BX.delegate((function(t){this.onShowCheck(t,this._settings.ADD_CHECK_URL)}),this))},onShowCheck:function(t,e){BX.addCustomEvent("SidePanel.Slider:onMessage",BX.delegate(this.onPaymentCheckUpdate,this));BX.Crm.Page.openSlider(e,{width:500})},onPaymentCheckUpdate:function(t){if(t.getEventId()==="CrmOrderPaymentCheck::Update"){this.unbindEvents();BX.Main.gridManager.reload(this._id)}}};BX.Crm.OrderPaymentCheckList.create=function(t,e){var n=new BX.Crm.OrderPaymentCheckList;n.initialize(t,e);return n};BX.Crm.OrderPaymentCheckList.refreshCheck=function(t,e){this._ajaxAction(t,e,"REFRESH_CHECK")};BX.Crm.OrderPaymentCheckList.reprintCheck=function(t,e){this._ajaxAction(t,e,"REPRINT_CHECK")};BX.Crm.OrderPaymentCheckList._ajaxAction=function(t,e,n){var i=e?e:{};var r=BX.type.isNotEmptyString(i.AJAX_URL)?i.AJAX_URL:"";var a=BX.type.isNotEmptyString(i.GRID_ID)?i.GRID_ID:"";if(!BX.type.isNotEmptyString(r)){return}var s={ACTION:n,ID:t};BX.ajax({url:r,method:"POST",dataType:"json",data:s,onsuccess:BX.delegate((function(t){if(BX.type.isNotEmptyString(t.ERROR)){alert(t.ERROR)}else{BX.Main.gridManager.reload(a)}}),this),onfailure:function(t){}})}}
//# sourceMappingURL=script.map.js