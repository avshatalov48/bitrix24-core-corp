(function(e,t,n,i){"use strict";var s=t.Reflection.namespace("BX.Bizproc.Component");var r=function(){function e(n){babelHelpers.classCallCheck(this,e);if(t.Type.isPlainObject(n)){this.gridId=n.gridId;this.createDebuggerSessionButton=n.createDebuggerSessionButton;this.errorsContainerDiv=n.errorsContainerDiv;this.documentSigned=n.documentSigned;this.signedParameters=n.signedParameters}}babelHelpers.createClass(e,[{key:"init",value:function e(){var n=this;if(this.createDebuggerSessionButton){t.Event.bind(this.createDebuggerSessionButton,"click",(function(e){return n.createSession()}))}}},{key:"createSession",value:function e(){i.Manager.Instance.openDebuggerStartPage(this.documentSigned,{analyticsStartType:"session_list"}).then()}},{key:"showSession",value:function e(t){i.Manager.Instance.openSessionLog(t).then()}},{key:"renameSession",value:function e(t){var n;var i=this.getGrid();(n=i.getRows().getById(t))===null||n===void 0?void 0:n.select();i.getActionsPanel().getPanel().querySelector("#grid_edit_button > .edit").click();i.enableActionsPanel();i.getPinPanel().pinPanel(true)}},{key:"deleteChosenSessions",value:function e(){var t=this.getGrid();if(t){this.deleteSessions(t.getRows().getSelectedIds())}}},{key:"deleteSessions",value:function e(n){var i=this;t.ajax.runComponentAction("bitrix:bizproc.debugger.session.list","deleteSessions",{mode:"class",signedParameters:this.signedParameters,data:{sessionIds:n}}).then((function(e){i.reloadGrid()}))["catch"]((function(e){i.showErrors(e.errors)}))}},{key:"showErrors",value:function e(t){var i=this;this.errorsContainerDiv.style.margin="10px";t.forEach((function(e){var t=new n.Alert({text:e.message,color:n.AlertColor.DANGER,closeBtn:true,animated:true});t.renderTo(i.errorsContainerDiv)}))}},{key:"reloadGrid",value:function e(){var t=this.getGrid();if(t){t.reload()}}},{key:"getGrid",value:function e(){if(this.gridId){return BX.Main.gridManager&&BX.Main.gridManager.getInstanceById(this.gridId)}return null}}]);return e}();s.DebuggerSessionList=r})(this.window=this.window||{},BX,BX.UI,BX.Bizproc.Debugger);
//# sourceMappingURL=script.map.js