(function(){BX.namespace("BX.Crm.Exclusion");if(BX.Crm.Exclusion.Grid){return}function e(){}e.prototype.init=function(e){this.gridId=e.gridId;this.mess=e.mess;this.componentName=e.componentName;this.signedParameters=e.signedParameters;this.initSliderHandlers()};e.prototype.openHref=function(e,n){n.preventDefault();n.stopPropagation();BX.SidePanel.Instance.open(e,{cacheable:false})};e.prototype.initSliderHandlers=function(){var e=BX("CRM_EXCLUSION_BUTTON_ADD");BX.bind(e,"click",this.openHref.bind(this,e.getAttribute("href")));top.BX.addCustomEvent(top,"BX.Crm.Exclusion.Import::loaded",this.reloadGrid.bind(this))};e.prototype.reloadGrid=function(){if(!BX.Main||!BX.Main.gridManager){return}var e=BX.Main.gridManager.getById(this.gridId);if(!e){return}e.instance.reload()};e.prototype.removeFromExclusions=function(e){var n=this;this.changeGridLoaderShowing(true);BX.ajax.runComponentAction(this.componentName,"removeExclusion",{mode:"class",signedParameters:this.signedParameters,data:{exclusionId:e}}).then(function(){n.reloadGrid()})};e.prototype.changeGridLoaderShowing=function(e){var n=BX.Main.gridManager.getById(this.gridId);if(!n||!n.instance){return}e?n.instance.tableFade():n.instance.tableUnfade()};BX.Crm.Exclusion.Grid=new e})(window);