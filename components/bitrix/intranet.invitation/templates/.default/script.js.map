{"version":3,"file":"script.js","sources":["src/submit.js","src/self-register.js","src/phone.js","src/row.js","src/selector.js","src/active-directory.js","src/analytics.js","src/form.js"],"sourcesContent":["import { Type, Validation, Loc, Dom, Event, Tag } from 'main.core';\nimport {EventEmitter} from \"main.core.events\";\nimport {Popup} from 'main.popup';\nimport { CreateButton, CancelButton } from 'ui.buttons';\n\nexport class Submit extends EventEmitter\n{\n\tconstructor(parent)\n\t{\n\t\tsuper();\n\t\tthis.waitingResponse = false;\n\t\tthis.parent = parent;\n\t\tthis.setEventNamespace(\"BX.Intranet.Invitation.Submit\");\n\t\tthis.parent.subscribe(\"onButtonClick\", (event) => {});\n\t}\n\n\tparseEmailAndPhone(form)\n\t{\n\t\tif (!Type.isDomNode(form))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tlet errorInputData = [];\n\t\tlet items = [];\n\t\tconst phoneExp = /^[\\d+][\\d\\(\\)\\ -]{4,22}\\d$/;\n\t\tconst rows = Array.prototype.slice.call(form.querySelectorAll(\".js-form-row\"));\n\n\t\t(rows || []).forEach((row) => {\n\t\t\tconst emailInput = row.querySelector(\"input[name='EMAIL[]']\");\n\t\t\tconst phoneInput = row.querySelector(\"input[name='PHONE[]']\");\n\t\t\tconst nameInput = row.querySelector(\"input[name='NAME[]']\");\n\t\t\tconst lastNameInput = row.querySelector(\"input[name='LAST_NAME[]']\");\n\t\t\tconst emailValue = emailInput.value.trim();\n\n\t\t\tif (this.parent.isInvitationBySmsAvailable && Type.isDomNode(phoneInput))\n\t\t\t{\n\t\t\t\tconst phoneValue = phoneInput.value.trim();\n\t\t\t\tif (phoneValue)\n\t\t\t\t{\n\t\t\t\t\tif (!phoneExp.test(String(phoneValue).toLowerCase()))\n\t\t\t\t\t{\n\t\t\t\t\t\terrorInputData.push(phoneValue);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tconst phoneCountryInput = row.querySelector(\"input[name='PHONE_COUNTRY[]']\");\n\t\t\t\t\t\titems.push({\n\t\t\t\t\t\t\t\"PHONE\": phoneValue,\n\t\t\t\t\t\t\t\"PHONE_COUNTRY\": phoneCountryInput.value.trim(),\n\t\t\t\t\t\t\t\"NAME\": nameInput.value,\n\t\t\t\t\t\t\t\"LAST_NAME\": lastNameInput.value\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (emailValue)\n\t\t\t{\n\t\t\t\tif (Validation.isEmail(emailValue))\n\t\t\t\t{\n\t\t\t\t\titems.push({\n\t\t\t\t\t\t\"EMAIL\": emailValue,\n\t\t\t\t\t\t\"NAME\": nameInput.value,\n\t\t\t\t\t\t\"LAST_NAME\": lastNameInput.value\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\terrorInputData.push(emailValue);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn [items, errorInputData];\n\t}\n\n\tgetGroupAndDepartmentData(requestData)\n\t{\n\t\tconst selector = this.parent.selector;\n\t\tconst selectorItems = selector.getItems();\n\n\t\tif (selectorItems[\"departments\"].length > 0)\n\t\t{\n\t\t\trequestData[\"UF_DEPARTMENT\"] = selectorItems[\"departments\"];\n\t\t}\n\n\t\tif (selectorItems[\"projects\"].length > 0)\n\t\t{\n\t\t\trequestData[\"SONET_GROUPS_CODE\"] = selectorItems[\"projects\"];\n\t\t}\n\t}\n\n\tsubmitInvite()\n\t{\n\t\tconst inviteForm = this.parent.contentBlocks[\"invite\"].querySelector(\"form\");\n\t\tlet [items, errorInputData] = [...this.parseEmailAndPhone(inviteForm)];\n\n\t\tif (errorInputData.length > 0)\n\t\t{\n\t\t\tconst event = new Event.BaseEvent({data: {error: Loc.getMessage(\"INTRANET_INVITE_DIALOG_EMAIL_OR_PHONE_VALIDATE_ERROR\") + \": \" + errorInputData.join(', ')}});\n\t\t\tthis.emit(\"onInputError\", event);\n\t\t\treturn;\n\t\t}\n\n\t\tif (items.length <= 0)\n\t\t{\n\t\t\tconst event = new Event.BaseEvent({data: {error: Loc.getMessage(\"INTRANET_INVITE_DIALOG_EMAIL_OR_PHONE_EMPTY_ERROR\")}});\n\t\t\tthis.emit(\"onInputError\", event);\n\t\t\treturn;\n\t\t}\n\n\t\tconst requestData = {\n\t\t\t\"ITEMS\": items\n\t\t};\n\n\t\tconst analyticsLabel = {\n\t\t\t\"INVITATION_TYPE\": \"invite\",\n\t\t\t\"INVITATION_COUNT\": items.length\n\t\t};\n\n\t\tthis.sendAction(\"invite\", requestData, analyticsLabel);\n\t}\n\n\tsubmitInviteWithGroupDp()\n\t{\n\t\tconst inviteWithGroupDpForm = this.parent.contentBlocks[\"invite-with-group-dp\"].querySelector(\"form\");\n\t\tlet [items, errorInputData] = [...this.parseEmailAndPhone(inviteWithGroupDpForm)];\n\n\t\tif (errorInputData.length > 0)\n\t\t{\n\t\t\tthis.parent.showErrorMessage(Loc.getMessage(\"INTRANET_INVITE_DIALOG_EMAIL_OR_PHONE_VALIDATE_ERROR\") + \": \" + errorInputData.join(', '));\n\t\t\treturn;\n\t\t}\n\n\t\tif (items.length <= 0)\n\t\t{\n\t\t\tconst event = new Event.BaseEvent({data: {\n\t\t\t\terror: Loc.getMessage(\"INTRANET_INVITE_DIALOG_EMAIL_OR_PHONE_EMPTY_ERROR\")}\n\t\t\t});\n\t\t\tthis.emit(\"onInputError\", event);\n\t\t\treturn;\n\t\t}\n\n\t\tlet requestData = {\n\t\t\t\"ITEMS\": items\n\t\t};\n\t\tthis.getGroupAndDepartmentData(requestData);\n\n\t\tconst analyticsLabel = {\n\t\t\t\"INVITATION_TYPE\": \"withGroupOrDepartment\",\n\t\t\t\"INVITATION_COUNT\": items.length\n\t\t};\n\n\t\tthis.sendAction(\"inviteWithGroupDp\", requestData, analyticsLabel);\n\t}\n\n\tsubmitSelf()\n\t{\n\t\tconst selfForm = this.parent.contentBlocks[\"self\"].querySelector(\"form\");\n\t\tlet obRequestData = {\n\t\t\t\"allow_register\": selfForm[\"allow_register\"].value,\n\t\t\t\"allow_register_confirm\": selfForm[\"allow_register_confirm\"].checked ? \"Y\" : \"N\",\n\t\t\t\"allow_register_secret\": selfForm[\"allow_register_secret\"].value,\n\t\t\t\"allow_register_whitelist\": selfForm[\"allow_register_whitelist\"].value,\n\t\t};\n\n\t\tthis.sendAction(\"self\", obRequestData);\n\t}\n\n\tsubmitExtranet()\n\t{\n\t\tconst extranetForm = this.parent.contentBlocks[\"extranet\"].querySelector(\"form\");\n\t\tlet [items, errorInputData] = [...this.parseEmailAndPhone(extranetForm)];\n\n\t\tif (errorInputData.length > 0)\n\t\t{\n\t\t\tthis.parent.showErrorMessage(Loc.getMessage(\"INTRANET_INVITE_DIALOG_EMAIL_OR_PHONE_VALIDATE_ERROR\") + \": \" + errorInputData.join(', '));\n\t\t\treturn;\n\t\t}\n\n\t\tif (items.length <= 0)\n\t\t{\n\t\t\tconst event = new Event.BaseEvent({data: {\n\t\t\t\terror: Loc.getMessage(\"INTRANET_INVITE_DIALOG_EMAIL_OR_PHONE_EMPTY_ERROR\")}\n\t\t\t});\n\t\t\tthis.emit(\"onInputError\", event);\n\t\t\treturn;\n\t\t}\n\n\t\tlet requestData = {\n\t\t\t\"ITEMS\": items\n\t\t};\n\t\tthis.getGroupAndDepartmentData(requestData);\n\n\t\tconst analyticsLabel = {\n\t\t\t\"INVITATION_TYPE\": \"extranet\",\n\t\t\t\"INVITATION_COUNT\": items.length\n\t\t};\n\n\t\tthis.sendAction(\"extranet\", requestData, analyticsLabel);\n\t}\n\n\tsubmitIntegrator()\n\t{\n\t\tthis.getIntegratorConfirmPopup().show();\n\t}\n\n\tgetIntegratorConfirmPopup(): Popup\n\t{\n\t\tconst integratorForm = this.parent.contentBlocks.integrator.querySelector('form');\n\t\tconst obRequestData = {\n\t\t\tintegrator_email: integratorForm.integrator_email.value,\n\t\t};\n\t\tconst analyticsLabel = {\n\t\t\tINVITATION_TYPE: 'integrator',\n\t\t};\n\n\t\tconst message = Tag.render`\n\t\t\t<div class=\"invite-integrator-confirm-message\">\n\t\t\t\t${Loc.getMessage('INTRANET_INVITE_DIALOG_CONFIRM_INTEGRATOR_DESCRIPTION')}\n\t\t\t</div>\n\t\t`;\n\t\tconst moreLink = message.querySelector('span');\n\t\tEvent.bind(moreLink, 'click', () => {\n\t\t\ttop.BX.Helper.show('redirect=detail&code=20682986');\n\t\t});\n\n\t\tconst popup = new Popup({\n\t\t\tid: 'integrator-confirm-invitation-popup',\n\t\t\tmaxWidth: 500,\n\t\t\tcloseIcon: false,\n\t\t\toverlay: true,\n\t\t\tcontentPadding: 10,\n\t\t\ttitleBar: Loc.getMessage('INTRANET_INVITE_DIALOG_CONFIRM_INTEGRATOR_TITLE'),\n\t\t\tcontent: message,\n\t\t\toffsetLeft : 100,\n\t\t\tbuttons: [\n\t\t\t\tnew CreateButton({\n\t\t\t\t\ttext: Loc.getMessage('INTRANET_INVITE_DIALOG_CONFIRM_INTEGRATOR_BUTTON_YES'),\n\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\tpopup.close();\n\t\t\t\t\t\tthis.sendAction('inviteIntegrator', obRequestData, analyticsLabel);\n\t\t\t\t\t},\n\t\t\t\t}),\n\t\t\t\tnew CancelButton({\n\t\t\t\t\ttext: Loc.getMessage('INTRANET_INVITE_DIALOG_CONFIRM_INTEGRATOR_BUTTON_NO'),\n\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\tpopup.close();\n\t\t\t\t\t},\n\t\t\t\t}),\n\t\t\t],\n\t\t\tevents: {\n\t\t\t\tonClose: () => {\n\t\t\t\t\tpopup.destroy();\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\n\t\treturn popup;\n\t}\n\n\tsubmitMassInvite()\n\t{\n\t\tconst massInviteForm = this.parent.contentBlocks[\"mass-invite\"].querySelector(\"form\");\n\n\t\tconst obRequestData = {\n\t\t\t\"ITEMS\": massInviteForm[\"mass_invite_emails\"].value\n\t\t};\n\n\t\tconst analyticsLabel = {\n\t\t\t\"INVITATION_TYPE\": \"mass\"\n\t\t};\n\t\tthis.sendAction(\"massInvite\", obRequestData, analyticsLabel);\n\t}\n\n\tsubmitAdd()\n\t{\n\t\tconst addForm = this.parent.contentBlocks[\"add\"].querySelector(\"form\");\n\n\t\tlet requestData = {\n\t\t\t\"ADD_EMAIL\": addForm[\"ADD_EMAIL\"].value,\n\t\t\t\"ADD_NAME\": addForm[\"ADD_NAME\"].value,\n\t\t\t\"ADD_LAST_NAME\": addForm[\"ADD_LAST_NAME\"].value,\n\t\t\t\"ADD_POSITION\": addForm[\"ADD_POSITION\"].value,\n\t\t\t\"ADD_SEND_PASSWORD\": (\n\t\t\t\taddForm[\"ADD_SEND_PASSWORD\"]\n\t\t\t\t&& !!addForm[\"ADD_SEND_PASSWORD\"].checked\n\t\t\t\t\t? addForm[\"ADD_SEND_PASSWORD\"].value\n\t\t\t\t\t: \"N\"\n\t\t\t),\n\t\t};\n\t\tthis.getGroupAndDepartmentData(requestData);\n\n\t\tconst analyticsLabel = {\n\t\t\t\"INVITATION_TYPE\": \"add\"\n\t\t};\n\t\tthis.sendAction(\"add\", requestData, analyticsLabel);\n\t}\n\n\tsendAction(action, requestData, analyticsLabel)\n\t{\n\t\tthis.disableSubmitButton(true);\n\t\trequestData[\"userOptions\"] = this.parent.userOptions;\n\t\trequestData[\"analyticsData\"] = this.parent.analyticsLabel;\n\n\t\tBX.ajax.runComponentAction(this.parent.componentName, action, {\n\t\t\tsignedParameters: this.parent.signedParameters,\n\t\t\tmode: \"ajax\",\n\t\t\tdata: requestData,\n\t\t\tanalyticsLabel: analyticsLabel,\n\t\t}).then((response) => {\n\n\t\t\tthis.disableSubmitButton(false);\n\n\t\t\tif (response.data)\n\t\t\t{\n\t\t\t\tif (action === \"self\")\n\t\t\t\t{\n\t\t\t\t\tthis.parent.showSuccessMessage(response.data);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.parent.changeContent(\"success\");\n\t\t\t\t\tthis.sendSuccessEvent(response.data);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tEventEmitter.subscribe(\n\t\t\t\tEventEmitter.GLOBAL_TARGET,\n\t\t\t\t'SidePanel.Slider:onClose',\n\t\t\t\t() => {\n\t\t\t\t\tBX.SidePanel.Instance.postMessageTop(window, 'BX.Bitrix24.EmailConfirmation:showPopup');\n\t\t\t\t},\n\t\t\t);\n\t\t}, (response) => {\n\n\t\t\tthis.disableSubmitButton(false);\n\n\t\t\tif (response.data == \"user_limit\")\n\t\t\t{\n\t\t\t\tB24.licenseInfoPopup.show(\n\t\t\t\t\t\"featureID\",\n\t\t\t\t\tBX.message(\"BX24_INVITE_DIALOG_USERS_LIMIT_TITLE\"),\n\t\t\t\t\tBX.message(\"BX24_INVITE_DIALOG_USERS_LIMIT_TEXT\")\n\t\t\t\t);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.parent.showErrorMessage(response.errors[0].message);\n\t\t\t}\n\t\t});\n\t}\n\n\tdisableSubmitButton(isDisable)\n\t{\n\t\tconst button = this.parent.button;\n\n\t\tif (!Type.isDomNode(button) || !Type.isBoolean(isDisable))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (isDisable)\n\t\t{\n\t\t\tthis.waitingResponse = true;\n\t\t\tDom.addClass(button, [\"ui-btn-wait\", \"invite-cursor-auto\"]);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.waitingResponse = false;\n\t\t\tDom.removeClass(button, [\"ui-btn-wait\", \"invite-cursor-auto\"]);\n\t\t}\n\t}\n\n\tsendSuccessEvent(users)\n\t{\n\t\tBX.SidePanel.Instance.postMessageAll(window, \"BX.Intranet.Invitation:onAdd\", { users: users });\n\t}\n}\n","import {Event, Type, Dom, Text, Loc} from \"main.core\";\nimport {Switcher} from 'ui.switcher';\n\nexport class SelfRegister\n{\n\tconstructor(parent)\n\t{\n\t\tthis.parent = parent;\n\n\t\tif (Type.isDomNode(this.parent.contentBlocks[\"self\"]))\n\t\t{\n\t\t\tthis.selfBlock = this.parent.contentBlocks[\"self\"];\n\t\t\tthis.bindActions();\n\n\t\t\tconst switcherNode = this.selfBlock.querySelector('.invite-dialog-fast-reg-control-switcher');\n\t\t\tthis.switcher = new Switcher({\n\t\t\t\tinputName: 'allow_register',\n\t\t\t\tid: 'allow_register',\n\t\t\t\tchecked: parent.isSelfRegisterEnabled,\n\t\t\t\tnode: switcherNode,\n\t\t\t\thandlers: {\n\t\t\t\t\ttoggled: this.toggleSettings.bind(this),\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t}\n\n\tbindActions()\n\t{\n\t\tconst regenerateButton = this.selfBlock.querySelector(\"[data-role='selfRegenerateSecretButton']\");\n\t\tif (Type.isDomNode(regenerateButton))\n\t\t{\n\t\t\tEvent.bind(regenerateButton, 'click',() => {\n\t\t\t\tthis.parent.activateButton();\n\t\t\t\tthis.regenerateSecret(this.parent.regenerateUrlBase);\n\t\t\t});\n\t\t}\n\n\t\tconst copyRegisterUrlButton = this.selfBlock.querySelector(\"[data-role='copyRegisterUrlButton']\");\n\t\tif (Type.isDomNode(copyRegisterUrlButton))\n\t\t{\n\t\t\tEvent.bind(copyRegisterUrlButton, 'click', () => {\n\t\t\t\tthis.copyRegisterUrl();\n\t\t\t});\n\t\t}\n\n\t\tconst allowRegisterConfirm = this.selfBlock.querySelector(\"[data-role='allowRegisterConfirm']\");\n\t\tif (Type.isDomNode(allowRegisterConfirm))\n\t\t{\n\t\t\tEvent.bind(allowRegisterConfirm, 'change', () => {\n\t\t\t\tthis.parent.activateButton();\n\t\t\t\tthis.toggleWhiteList(allowRegisterConfirm);\n\t\t\t});\n\t\t}\n\n\t\tconst selfWhiteList = this.selfBlock.querySelector(\"[data-role='selfWhiteList']\");\n\t\tif (Type.isDomNode(selfWhiteList))\n\t\t{\n\t\t\tEvent.bind(selfWhiteList, 'input', () => {\n\t\t\t\tthis.parent.activateButton();\n\t\t\t});\n\t\t}\n\t}\n\n\tregenerateSecret(registerUrl)\n\t{\n\t\tconst value = Text.getRandom(8);\n\n\t\tconst allowRegisterSecretNode = this.selfBlock.querySelector(\"[data-role='allowRegisterSecret']\");\n\t\tif (Type.isDomNode(allowRegisterSecretNode))\n\t\t{\n\t\t\tallowRegisterSecretNode.value = value || '';\n\t\t}\n\n\t\tconst allowRegisterUrlNode = this.selfBlock.querySelector(\"[data-role='allowRegisterUrl']\");\n\t\tif (Type.isDomNode(allowRegisterUrlNode) && registerUrl)\n\t\t{\n\t\t\tallowRegisterUrlNode.value = registerUrl + (value || 'yes');\n\t\t}\n\t}\n\n\tcopyRegisterUrl()\n\t{\n\t\tconst allowRegisterUrlNode = this.selfBlock.querySelector(\"[data-role='allowRegisterUrl']\");\n\t\tif (Type.isDomNode(allowRegisterUrlNode))\n\t\t{\n\t\t\tBX.clipboard.copy(allowRegisterUrlNode.value);\n\t\t\tthis.showHintPopup(Loc.getMessage(\"BX24_INVITE_DIALOG_COPY_URL\"), allowRegisterUrlNode);\n\n\t\t\tBX.ajax.runAction('intranet.controller.invite.copyregisterurl', {\n\t\t\t\tdata: {}\n\t\t\t}).then(function (response) {}, function (response) {});\n\n\t\t\tthis.parent.analytics.send();\n\t\t}\n\t}\n\n\tshowHintPopup(message, bindNode)\n\t{\n\t\tif (!Type.isDomNode(bindNode) || !message)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tnew BX.PopupWindow('inviteHint' + Text.getRandom(8), bindNode, {\n\t\t\tcontent: message,\n\t\t\tzIndex: 15000,\n\t\t\tangle: true,\n\t\t\toffsetTop: 0,\n\t\t\toffsetLeft: 50,\n\t\t\tcloseIcon: false,\n\t\t\tautoHide: true,\n\t\t\tdarkMode: true,\n\t\t\toverlay: false,\n\t\t\tmaxWidth: 400,\n\t\t\tevents: {\n\t\t\t\tonAfterPopupShow: function () {\n\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\tthis.close();\n\t\t\t\t\t}.bind(this), 4000);\n\t\t\t\t}\n\t\t\t}\n\t\t}).show();\n\t}\n\n\ttoggleSettings()\n\t{\n\t\tthis.parent.activateButton();\n\t\tconst controlBlock = this.selfBlock.querySelector(\".js-invite-dialog-fast-reg-control-container\");\n\t\tif (Type.isDomNode(controlBlock))\n\t\t{\n\t\t\tif (!Dom.hasClass(controlBlock, 'disallow-registration'))\n\t\t\t{\n\t\t\t\tconst switcher = controlBlock.querySelector(\"[data-role='self-switcher']\");\n\t\t\t\tthis.showHintPopup(Loc.getMessage(\"INTRANET_INVITE_DIALOG_SELF_OFF_HINT\"), switcher);\n\t\t\t}\n\t\t\tDom.toggleClass(controlBlock, 'disallow-registration');\n\t\t}\n\n\t\tconst settingsBlock = this.selfBlock.querySelector(\"[data-role='selfSettingsBlock']\");\n\t\tif (Type.isDomNode(settingsBlock))\n\t\t{\n\t\t\tDom.style(settingsBlock, 'display', this.switcher.checked ? 'block' : 'none');\n\t\t}\n\t}\n\n\ttoggleWhiteList(inputElement)\n\t{\n\t\tconst selfWhiteList = this.selfBlock.querySelector(\"[data-role='selfWhiteList']\");\n\t\tif (Type.isDomNode(selfWhiteList))\n\t\t{\n\t\t\tDom.style(selfWhiteList, 'display', inputElement.checked ? 'block' : 'none');\n\t\t}\n\t}\n}","import {Dom, Type, Tag, Event} from \"main.core\";\n\nexport class Phone\n{\n\tconstructor(parent)\n\t{\n\t\tthis.parent = parent;\n\n\t\tthis.count = 0;\n\t\tthis.index = 0;\n\t\tthis.maxCount = 5;\n\t\tthis.inputStack = [];\n\t}\n\n\trenderPhoneRow(inputNode)\n\t{\n\t\tif(this.count >= this.maxCount)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (!Type.isDomNode(inputNode))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst num = inputNode.getAttribute(\"data-num\");\n\n\t\tif (inputNode.parentNode.querySelector(\"#phone_number_\" + num))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst element = Tag.render`\n\t\t\t<span style=\"z-index: 3;\" class=\"ui-ctl-before\" data-role=\"phone-block\">\n\t\t\t\t<input type=\"hidden\" name=\"PHONE_COUNTRY[]\" id=\"phone_country_${num}\" value=\"\">\n\t\t\t\t<input type=\"hidden\" name=\"PHONE[]\" id=\"phone_number_${num}\" value=\"\">\n\t\t\t\t<div class=\"invite-dialog-phone-flag-block\" data-role=\"flag\">\n\t\t\t\t\t<span data-role=\"phone_flag_${num}\" style=\"pointer-events: none;\"></span>\n\t\t\t\t</div>\n\t\t\t\t<input class=\"invite-dialog-phone-input\" type=\"hidden\" id=\"phone_input_${num}\" value=\"\">&nbsp;\n\t\t\t</span>\n\t\t`;\n\n\t\tinputNode.style.paddingLeft = \"57px\";\n\t\tDom.append(element, inputNode.parentNode);\n\n\t\tconst flagNode = inputNode.parentNode.querySelector(\"[data-role='flag']\");\n\t\tif (Type.isDomNode(flagNode))\n\t\t{\n\t\t\tEvent.bind(inputNode.parentNode.querySelector(\"[data-role='flag']\"), 'click', () => {\n\t\t\t\tthis.showCountrySelector(num);\n\t\t\t});\n\t\t}\n\n\t\tlet changeCallback = function(i, inputNode)\n\t\t{\n\t\t\treturn function(e)\n\t\t\t{\n\t\t\t\tif (Type.isDomNode(inputNode.parentNode))\n\t\t\t\t{\n\t\t\t\t\tinputNode.parentNode.querySelector('#phone_number_' + i).value = e.value;\n\t\t\t\t\tinputNode.parentNode.querySelector('#phone_country_' + i).value = e.country;\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tthis.inputStack[num] = new BX.PhoneNumber.Input({\n\t\t\tnode: inputNode,\n\t\t\tflagNode: inputNode.parentNode.querySelector(\"[data-role='phone_flag_\"+ num +\"']\"),\n\t\t\tflagSize: 16,\n\t\t\tonChange: changeCallback(num, inputNode)\n\t\t});\n\n\t\t//for ctrl+v paste\n\t\tconst id = setInterval(() => {\n\t\t\tif (\n\t\t\t\t!inputNode.parentNode?.querySelector('#phone_number_' + num).value\n\t\t\t\t|| !inputNode.parentNode?.querySelector('#phone_country_' + num).value\n\t\t\t)\n\t\t\t{\n\t\t\t\tchangeCallback(num, inputNode)({\n\t\t\t\t\tvalue: this.inputStack[num].getValue(),\n\t\t\t\t\tcountry: this.inputStack[num].formatter ? this.inputStack[num].getCountry() : null,\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tclearInterval(id);\n\t\t\t}\n\t\t}, 1000);\n\t}\n\n\tshowCountrySelector(i)\n\t{\n\t\tthis.inputStack[i]._onFlagClick();\n\t}\n}","import {Event, Type, Dom, Tag, Loc} from \"main.core\";\nimport {Phone} from \"./phone\";\n\nexport class Row\n{\n\tconstructor(parent, params)\n\t{\n\t\tthis.parent = parent;\n\t\tthis.contentBlock = params.contentBlock;\n\t\tthis.inputNum = 0;\n\n\t\tif (Type.isDomNode(this.contentBlock))\n\t\t{\n\t\t\tthis.rowsContainer = this.contentBlock.querySelector(\"[data-role='rows-container']\");\n\t\t\tthis.bindActions();\n\t\t}\n\n\t\tif (this.parent.isInvitationBySmsAvailable)\n\t\t{\n\t\t\tthis.phoneObj = new Phone(this);\n\t\t}\n\t}\n\n\tbindActions()\n\t{\n\t\tconst moreButton = this.contentBlock.querySelector(\"[data-role='invite-more']\");\n\t\tif (Type.isDomNode(moreButton))\n\t\t{\n\t\t\tEvent.unbindAll(moreButton);\n\t\t\tEvent.bind(moreButton, 'click', () => {\n\t\t\t\tthis.renderInputRow();\n\t\t\t});\n\t\t}\n\n\t\tconst massInviteButton = this.contentBlock.querySelector(\"[data-role='invite-mass']\");\n\t\tif (Type.isDomNode(massInviteButton))\n\t\t{\n\t\t\tEvent.unbindAll(massInviteButton);\n\t\t\tEvent.bind(massInviteButton, 'click', () => {\n\t\t\t\tconst massMenuNode = document.querySelector(\"[data-role='menu-mass-invite']\");\n\t\t\t\tif (Type.isDomNode(massMenuNode))\n\t\t\t\t{\n\t\t\t\t\tBX.fireEvent(massMenuNode, 'click');\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tcheckPhoneInput(element)\n\t{\n\t\tconst phoneExp = /^[\\d+][\\d\\(\\)\\ -]{2,14}\\d$/;\n\n\t\tif (element.value && phoneExp.test(String(element.value).toLowerCase()))\n\t\t{\n\t\t\tthis.phoneObj.renderPhoneRow(element);\n\t\t}\n\t\telse if (element.value.length === 0)\n\t\t{\n\t\t\tthis.renderDefaultRow(element)?.focus();\n\t\t}\n\t}\n\n\tbindPhoneChecker(element)\n\t{\n\t\tif (this.parent.isInvitationBySmsAvailable && Type.isDomNode(element))\n\t\t{\n\t\t\tconst inputNodes = Array.prototype.slice.call(element.querySelectorAll(\".js-email-phone-input\"));\n\t\t\tif (inputNodes)\n\t\t\t{\n\t\t\t\tinputNodes.forEach(element => {\n\t\t\t\t\tEvent.bind(element, 'input', () => {\n\t\t\t\t\t\tthis.checkPhoneInput(element);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\trenderDefaultRow(node)\n\t{\n\t\tconst phoneFlagBlock = node.parentNode.querySelector('[data-role=\"phone-block\"]');\n\n\t\tif (Type.isDomNode(phoneFlagBlock))\n\t\t{\n\t\t\tDom.remove(phoneFlagBlock);\n\t\t}\n\n\t\tconst phoneBlock = node.parentNode.querySelector('input.ui-ctl-element');\n\n\t\tif (Type.isDomNode(phoneBlock))\n\t\t{\n\t\t\tconst newInput = Tag.render`\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tname=\"${phoneBlock.name}\"\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tmaxlength=\"50\"\n\t\t\t\t\t\t\t\tdata-num=\"${node.getAttribute('data-num')}\"\n\t\t\t\t\t\t\t\tclass=\"ui-ctl-element js-email-phone-input\"\n\t\t\t\t\t\t\t\tplaceholder=\"${phoneBlock.placeholder}\"\n\t\t\t\t\t\t\t/>`;\n\n\t\t\tDom.replace(phoneBlock, newInput);\n\t\t\tthis.bindCloseIcons(newInput.parentNode);\n\t\t\tthis.bindPhoneChecker(newInput.parentNode);\n\t\t\tDom.remove(phoneBlock);\n\n\t\t\treturn newInput;\n\t\t}\n\n\t\treturn phoneBlock;\n\t}\n\n\tbindCloseIcons(container)\n\t{\n\t\tconst inputNodes = Array.prototype.slice.call(container.querySelectorAll(\"input\"));\n\n\t\t(inputNodes || []).forEach((node) => {\n\t\t\tlet closeIcon = node.nextElementSibling;\n\n\t\t\tEvent.bind(node, 'input', () => {\n\t\t\t\tDom.style(closeIcon, 'display', node.value !== \"\" ? \"block\" : \"none\");\n\t\t\t});\n\n\t\t\tEvent.bind(closeIcon, 'click', (event) => {\n\t\t\t\tevent.preventDefault();\n\n\t\t\t\tif (Type.isDomNode(node.parentNode))\n\t\t\t\t{\n\t\t\t\t\tthis.renderDefaultRow(node);\n\t\t\t\t}\n\n\t\t\t\tDom.style(closeIcon, 'display', \"none\");\n\t\t\t});\n\t\t});\n\t}\n\n\trenderInviteInputs(numRows = 3)\n\t{\n\t\tDom.clean(this.rowsContainer);\n\t\tfor (let i = 0; i < numRows; i++)\n\t\t{\n\t\t\tthis.renderInputRow(i === 0);\n\t\t}\n\t}\n\n\trenderInputRow(showTitles = false)\n\t{\n\t\tlet emailTitle, nameTitle, lastNameTitle;\n\n\t\tif (showTitles)\n\t\t{\n\t\t\temailTitle = `\n\t\t\t\t<div class=\"ui-ctl-label-text\">\n\t\t\t\t\t${Loc.getMessage(\"INTRANET_INVITE_DIALOG_EMAIL_OR_PHONE_INPUT\")}\n\t\t\t\t</div>`;\n\n\t\t\tnameTitle = `\n\t\t\t\t<div class=\"ui-ctl-label-text\">\n\t\t\t\t\t${Loc.getMessage(\"BX24_INVITE_DIALOG_ADD_NAME_TITLE\")}\n\t\t\t\t</div>`;\n\n\t\t\tlastNameTitle = `\n\t\t\t\t<div class=\"ui-ctl-label-text\">\n\t\t\t\t\t${Loc.getMessage(\"BX24_INVITE_DIALOG_ADD_LAST_NAME_TITLE\")}\n\t\t\t\t</div>`;\n\n\t\t}\n\n\t\tconst element = Tag.render`\n\t\t\t<div class=\"invite-form-row js-form-row\">\n\t\t\t\t<div class=\"invite-form-col\">\n\t\t\t\t\t${showTitles ? emailTitle: ''}\n\t\t\t\t\t<div class=\"ui-ctl ui-ctl-w100 ui-ctl-textbox ui-ctl-block ui-ctl-after-icon\">\n\t\t\t\t\t\t<input \n\t\t\t\t\t\t\tname=\"EMAIL[]\" \n\t\t\t\t\t\t\ttype=\"text\" \n\t\t\t\t\t\t\tmaxlength=\"50\"\n\t\t\t\t\t\t\tdata-num=\"${this.inputNum++}\" \n\t\t\t\t\t\t\tclass=\"ui-ctl-element js-email-phone-input\" \n\t\t\t\t\t\t\tplaceholder=\"${Loc.getMessage('INTRANET_INVITE_DIALOG_EMAIL_OR_PHONE_INPUT')}\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<button type=\"button\" class=\"ui-ctl-after ui-ctl-icon-clear\" style=\"display: none\"></button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"invite-form-col\">\n\t\t\t\t\t${showTitles ? nameTitle: ''}\n\t\t\t\t\t<div class=\"ui-ctl ui-ctl-w100 ui-ctl-textbox ui-ctl-block ui-ctl-after-icon\">\n\t\t\t\t\t\t<input name=\"NAME[]\" type=\"text\" class=\"ui-ctl-element js-email-name-input\" placeholder=\"${Loc.getMessage('BX24_INVITE_DIALOG_ADD_NAME_TITLE')}\">\n\t\t\t\t\t\t<button type=\"button\" class=\"ui-ctl-after ui-ctl-icon-clear\" style=\"display: none\"></button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"invite-form-col\">\n\t\t\t\t\t${showTitles ? lastNameTitle: ''}\n\t\t\t\t\t<div class=\"ui-ctl ui-ctl-w100 ui-ctl-textbox ui-ctl-block ui-ctl-after-icon\">\n\t\t\t\t\t\t<input name=\"LAST_NAME[]\" type=\"text\" class=\"ui-ctl-element js-email-last-name-input\" placeholder=\"${Loc.getMessage('BX24_INVITE_DIALOG_ADD_LAST_NAME_TITLE')}\">\n\t\t\t\t\t\t<button type=\"button\" class=\"ui-ctl-after ui-ctl-icon-clear\" style=\"display: none\"></button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\tDom.append(element, this.rowsContainer);\n\t\tthis.bindCloseIcons(element);\n\t\tthis.bindPhoneChecker(element);\n\t}\n\n\trenderRegisterInputs()\n\t{\n\t\tDom.clean(this.rowsContainer);\n\t\tconst element = Tag.render`\n\t\t\t<div>\n\t\t\t\t<div class=\"invite-form-row\">\n\t\t\t\t\t<div class=\"invite-form-col\">\n\t\t\t\t\t\t<div class=\"ui-ctl-label-text\">${Loc.getMessage(\"BX24_INVITE_DIALOG_ADD_NAME_TITLE\")}</div>\n\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-w100 ui-ctl-textbox ui-ctl-block ui-ctl-after-icon\">\n\t\t\t\t\t\t\t<input type=\"text\" name=\"ADD_NAME\" id=\"ADD_NAME\" class=\"ui-ctl-element\">\n\t\t\t\t\t\t\t<button type=\"button\" class=\"ui-ctl-after ui-ctl-icon-clear\" style=\"display: none\"></button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"invite-form-row\">\n\t\t\t\t\t<div class=\"invite-form-col\">\n\t\t\t\t\t\t<div class=\"ui-ctl-label-text\">${Loc.getMessage(\"BX24_INVITE_DIALOG_ADD_LAST_NAME_TITLE\")}</div>\n\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-w100 ui-ctl-textbox ui-ctl-block ui-ctl-after-icon\">\n\t\t\t\t\t\t\t<input type=\"text\" name=\"ADD_LAST_NAME\" id=\"ADD_LAST_NAME\" class=\"ui-ctl-element\">\n\t\t\t\t\t\t\t<button type=\"button\" class=\"ui-ctl-after ui-ctl-icon-clear\" style=\"display: none\"></button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"invite-form-row\">\n\t\t\t\t\t<div class=\"invite-form-col\">\n\t\t\t\t\t\t<div class=\"ui-ctl-label-text\">${Loc.getMessage(\"BX24_INVITE_DIALOG_ADD_EMAIL_TITLE\")}</div>\n\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-w100 ui-ctl-textbox ui-ctl-block ui-ctl-after-icon\">\n\t\t\t\t\t\t\t<input type=\"text\" name=\"ADD_EMAIL\" id=\"ADD_EMAIL\" class=\"ui-ctl-element\" maxlength=\"50\">\n\t\t\t\t\t\t\t<button type=\"button\" class=\"ui-ctl-after ui-ctl-icon-clear\" style=\"display: none\"></button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"invite-form-row\">\n\t\t\t\t\t<div class=\"invite-form-col\">\n\t\t\t\t\t\t<div class=\"ui-ctl-label-text\">${Loc.getMessage(\"BX24_INVITE_DIALOG_ADD_POSITION_TITLE\")}</div>\n\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-w100 ui-ctl-textbox ui-ctl-block ui-ctl-after-icon\">\n\t\t\t\t\t\t\t<input type=\"text\" name=\"ADD_POSITION\" id=\"ADD_POSITION\" class=\"ui-ctl-element\">\n\t\t\t\t\t\t\t<button type=\"button\" class=\"ui-ctl-after ui-ctl-icon-clear\" style=\"display: none\"></button>\n\t\t\t\t\t\t</div>\t\t\t\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\tDom.append(element, this.rowsContainer);\n\t\tthis.bindCloseIcons(element);\n\t}\n\n\trenderIntegratorInput()\n\t{\n\t\tDom.clean(this.rowsContainer);\n\t\tconst element = Tag.render`\n\t\t\t<div class=\"invite-form-row\">\n\t\t\t\t<div class=\"invite-form-col\">\n\t\t\t\t\t<div class=\"ui-ctl-label-text\">${Loc.getMessage(\"INTRANET_INVITE_DIALOG_INTEGRATOR_EMAIL\")}</div>\n\t\t\t\t\t<div class=\"ui-ctl ui-ctl-w100 ui-ctl-textbox ui-ctl-block ui-ctl-after-icon\">\n\t\t\t\t\t\t<input \n\t\t\t\t\t\t\ttype=\"text\" \n\t\t\t\t\t\t\tclass=\"ui-ctl-element\" \n\t\t\t\t\t\t\tvalue=\"\" \n\t\t\t\t\t\t\tmaxlength=\"50\"\n\t\t\t\t\t\t\tname=\"integrator_email\" \n\t\t\t\t\t\t\tid=\"integrator_email\" \n\t\t\t\t\t\t\tplaceholder=\"${Loc.getMessage(\"INTRANET_INVITE_DIALOG_INTEGRATOR_EMAIL\")}\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<button type=\"button\" class=\"ui-ctl-after ui-ctl-icon-clear\" style=\"display: none\"></button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\tDom.append(element, this.rowsContainer);\n\t\tthis.bindCloseIcons(element);\n\t}\n}\n","import {Type, Dom} from \"main.core\";\nimport {TagSelector} from 'ui.entity-selector';\n\nexport class Selector\n{\n\tconstructor(parent, params)\n\t{\n\t\tthis.parent = parent;\n\t\tthis.contentBlock = params.contentBlock;\n\t\tthis.options = params.options;\n\t\tthis.entities = [];\n\n\t\tthis.prepareOptions();\n\t}\n\n\tprepareOptions()\n\t{\n\t\tfor (let type in this.options)\n\t\t{\n\t\t\tif (!this.options.hasOwnProperty(type))\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (type === \"department\" && !!this.options[type])\n\t\t\t{\n\t\t\t\tthis.entities.push({\n\t\t\t\t\tid: \"department\",\n\t\t\t\t\toptions: {\n\t\t\t\t\t\tselectMode: \"departmentsOnly\",\n\t\t\t\t\t\tallowOnlyUserDepartments: !(!!this.options[\"isAdmin\"] && this.options[\"isAdmin\"] === true),\n\t\t\t\t\t\tallowSelectRootDepartment: true,\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (type === \"project\" && !!this.options[type])\n\t\t\t{\n\t\t\t\tconst options = {\n\t\t\t\t\tfillRecentTab: true,\n\t\t\t\t};\n\t\t\t\tif (\n\t\t\t\t\tObject.prototype.hasOwnProperty.call(this.options, 'projectLimitExceeded')\n\t\t\t\t\t&& Object.prototype.hasOwnProperty.call(this.options, 'projectLimitFeatureId')\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\toptions.lockProjectLink = this.options.projectLimitExceeded;\n\t\t\t\t\toptions.lockProjectLinkFeatureId = this.options.projectLimitFeatureId;\n\t\t\t\t}\n\n\t\t\t\tconst optionValue = {\n\t\t\t\t\tid: 'project',\n\t\t\t\t\toptions,\n\t\t\t\t};\n\n\t\t\t\tif (this.options[type] === \"extranet\")\n\t\t\t\t{\n\t\t\t\t\toptionValue[\"options\"][\"extranet\"] = true;\n\t\t\t\t}\n\t\t\t\tthis.entities.push(optionValue);\n\t\t\t}\n\t\t}\n\t}\n\n\trender()\n\t{\n\t\tconst preselectedItems = [];\n\n\t\tif (\n\t\t\tthis.options.hasOwnProperty('projectId')\n\t\t\t&& this.options.projectId > 0\n\t\t)\n\t\t{\n\t\t\tpreselectedItems.push(['project', this.options.projectId])\n\t\t}\n\n\t\tif (\n\t\t\tthis.options.hasOwnProperty('departmentsId')\n\t\t\t&& Array.isArray(this.options.departmentsId)\n\t\t)\n\t\t{\n\t\t\tthis.options.departmentsId.forEach((departmentId) => {\n\t\t\t\tpreselectedItems.push(['department', departmentId])\n\t\t\t});\n\t\t}\n\n\t\tthis.tagSelector = new TagSelector({\n\t\t\tdialogOptions: {\n\t\t\t\tpreselectedItems: preselectedItems,\n\t\t\t\tentities: this.entities,\n\t\t\t\tcontext: 'INTRANET_INVITATION'\n\t\t\t}\n\t\t});\n\n\t\tif (Type.isDomNode(this.contentBlock))\n\t\t{\n\t\t\tDom.clean(this.contentBlock);\n\t\t\tthis.tagSelector.renderTo(this.contentBlock);\n\t\t}\n\t}\n\n\tgetItems()\n\t{\n\t\tlet departments = [];\n\t\tlet projects = [];\n\t\tconst tagSelectorItems = this.tagSelector.getDialog().getSelectedItems();\n\n\t\ttagSelectorItems.forEach(item => {\n\t\t\tconst id = parseInt(item.getId());\n\t\t\tconst type = item.getEntityId();\n\n\t\t\tif (type === \"department\")\n\t\t\t{\n\t\t\t\tdepartments.push(id);\n\t\t\t}\n\t\t\telse if (type === \"project\")\n\t\t\t{\n\t\t\t\tprojects.push(id);\n\t\t\t}\n\t\t});\n\n\t\treturn {\n\t\t\tdepartments: departments,\n\t\t\tprojects: projects\n\t\t};\n\t}\n}","export class ActiveDirectory\n{\n\tconstructor(parent)\n\t{\n\t\tthis.parent = parent;\n\t}\n\n\tshowForm()\n\t{\n\t\tBX.UI.Feedback.Form.open(\n\t\t\t{\n\t\t\t\tid: 'intranet-active-directory',\n\t\t\t\tdefaultForm: {id: 309, sec: 'fbc0n3'}\n\t\t\t}\n\t\t);\n\t}\n}","import { Event, Type } from 'main.core';\nimport { sendData } from 'ui.analytics';\n\nexport class Analytics\n{\n\tstatic TOOLS = 'Invitation';\n\tstatic TOOLS_HEADER = 'headerPopup';\n\tstatic EVENT_OPEN_SLIDER_INVITATION = 'drawer_open';\n\tstatic CATEGORY_INVITATION = 'invitation';\n\tstatic EVENT_COPY = 'copy_invitation_link';\n\tstatic ADMIN_ALLOW_MODE_Y = 'askAdminToAllow_Y';\n\tstatic ADMIN_ALLOW_MODE_N = 'askAdminToAllow_N';\n\tstatic IS_ADMIN_Y = 'isAdmin_Y';\n\tstatic IS_ADMIN_N = 'isAdmin_N';\n\n\tstatic EVENT_TAB_VIEW = 'tab_view';\n\tstatic TAB_EMAIL = 'tab_by_email';\n\tstatic TAB_MASS = 'tab_mass';\n\tstatic TAB_DEPARTMENT = 'tab_department';\n\tstatic TAB_INTEGRATOR = 'tab_integrator';\n\tstatic TAB_LINK = 'by_link';\n\tstatic TAB_REGISTRATION = 'registration';\n\tstatic TAB_EXTRANET = 'extranet';\n\tstatic TAB_AD = 'AD';\n\n\t#cSection: Object;\n\t#isAdmin: boolean;\n\n\tconstructor(cSection: Object, isAdmin: boolean)\n\t{\n\t\tthis.#cSection = cSection;\n\t\tthis.#isAdmin = isAdmin;\n\t}\n\n\t#getAdminAllowMode(): string\n\t{\n\t\treturn document.querySelector('#allow_register_confirm').checked\n\t\t\t? Analytics.ADMIN_ALLOW_MODE_Y\n\t\t\t: Analytics.ADMIN_ALLOW_MODE_N;\n\t}\n\n\t#getIsAdmin(): string\n\t{\n\t\treturn this.#isAdmin ? Analytics.IS_ADMIN_Y : Analytics.IS_ADMIN_N;\n\t}\n\n\t#getCSection(): string\n\t{\n\t\treturn this.#cSection.source;\n\t}\n\n\tsend(): void\n\t{\n\t\tsendData({\n\t\t\ttool: Analytics.TOOLS,\n\t\t\tcategory: Analytics.CATEGORY_INVITATION,\n\t\t\tevent: Analytics.EVENT_COPY,\n\t\t\tc_section: this.#getCSection(),\n\t\t\tp1: this.#getIsAdmin(),\n\t\t\tp2: this.#getAdminAllowMode(),\n\t\t});\n\t}\n\n\tsendTabData(section, subSection): void\n\t{\n\t\tif (!section)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tsendData({\n\t\t\ttool: Analytics.TOOLS,\n\t\t\tcategory: Analytics.CATEGORY_INVITATION,\n\t\t\tevent: Analytics.EVENT_TAB_VIEW,\n\t\t\tc_section: section,\n\t\t\tc_sub_section: subSection\n\t\t});\n\t}\n\n\tsendOpenSliderData(section): void\n\t{\n\t\tsendData({\n\t\t\ttool: Analytics.TOOLS,\n\t\t\tcategory: Analytics.CATEGORY_INVITATION,\n\t\t\tevent: Analytics.EVENT_OPEN_SLIDER_INVITATION,\n\t\t\tc_section: section,\n\t\t});\n\t}\n}\n","import {Type, Dom, Event, Loc} from 'main.core';\nimport {Submit} from './submit';\nimport {SelfRegister} from './self-register';\nimport {Row} from \"./row\";\nimport {Selector} from \"./selector\";\nimport {EventEmitter} from \"main.core.events\";\nimport {ActiveDirectory} from \"./active-directory\";\nimport { Analytics } from './analytics';\n\nexport default class Form extends EventEmitter\n{\n\tconstructor(formParams)\n\t{\n\t\tsuper();\n\t\tconst params = Type.isPlainObject(formParams) ? formParams : {};\n\n\t\tthis.signedParameters = params.signedParameters;\n\t\tthis.componentName = params.componentName;\n\n\t\tthis.menuContainer = params.menuContainerNode;\n\t\tthis.contentContainer = params.contentContainerNode;\n\t\tthis.contentBlocks = {};\n\t\tthis.userOptions = params.userOptions;\n\n\t\tthis.isExtranetInstalled = params.isExtranetInstalled === \"Y\";\n\t\tthis.isCloud = params.isCloud === \"Y\";\n\t\tthis.isAdmin = params.isAdmin === \"Y\";\n\t\tthis.isInvitationBySmsAvailable = params.isInvitationBySmsAvailable === \"Y\";\n\t\tthis.isCreatorEmailConfirmed = params.isCreatorEmailConfirmed === \"Y\";\n\t\tthis.regenerateUrlBase = params.regenerateUrlBase;\n\t\tthis.firstInvitationBlock = params.firstInvitationBlock;\n\t\tthis.isSelfRegisterEnabled = params.isSelfRegisterEnabled;\n\t\tthis.analyticsLabel = params.analyticsLabel;\n\t\tthis.projectLimitExceeded = Type.isBoolean(params.projectLimitExceeded) ? params.projectLimitExceeded : true;\n\t\tthis.projectLimitFeatureId = Type.isString(params.projectLimitFeatureId) ? params.projectLimitFeatureId : '';\n\n\t\tif (Type.isDomNode(this.contentContainer))\n\t\t{\n\t\t\tconst blocks = Array.prototype.slice.call(\n\t\t\t\tthis.contentContainer.querySelectorAll(\".js-intranet-invitation-block\")\n\t\t\t);\n\t\t\t(blocks || []).forEach((block) => {\n\t\t\t\tlet blockType = block.getAttribute(\"data-role\");\n\t\t\t\tblockType = blockType.replace(\"-block\", \"\");\n\t\t\t\tthis.contentBlocks[blockType] = block;\n\t\t\t});\n\n\t\t\tthis.errorMessageBlock = this.contentContainer.querySelector(\"[data-role='error-message']\");\n\t\t\tthis.successMessageBlock = this.contentContainer.querySelector(\"[data-role='success-message']\");\n\n\t\t\tBX.UI.Hint.init(this.contentContainer);\n\t\t}\n\n\t\tthis.button = document.querySelector(\"#intranet-invitation-btn\");\n\n\t\tif (Type.isDomNode(this.menuContainer))\n\t\t{\n\t\t\tthis.menuItems = Array.prototype.slice.call(this.menuContainer.querySelectorAll(\"a\"));\n\n\t\t\t(this.menuItems || []).forEach((item) => {\n\t\t\t\tEvent.bind(item, 'click', () => {\n\t\t\t\t\tthis.changeContent(item.getAttribute('data-action'));\n\t\t\t\t});\n\n\t\t\t\tif (item.getAttribute('data-action') === this.firstInvitationBlock)\n\t\t\t\t{\n\t\t\t\t\tBX.fireEvent(item, 'click');\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tthis.submit = new Submit(this);\n\t\tthis.submit.subscribe('onInputError', (event) => {\n\t\t\tthis.showErrorMessage(event.data.error);\n\t\t});\n\n\t\tthis.analytics = new Analytics(this.analyticsLabel, this.isAdmin);\n\t\tthis.analytics.sendOpenSliderData(this.analyticsLabel.source);\n\n\t\tif (this.isCloud)\n\t\t{\n\t\t\tthis.selfRegister = new SelfRegister(this);\n\t\t}\n\n\t\tthis.arrowBox = document.querySelector('.invite-wrap-decal-arrow');\n\t\tif (Type.isDomNode(this.arrowBox))\n\t\t{\n\t\t\tthis.arrowRect = this.arrowBox.getBoundingClientRect();\n\t\t\tthis.arrowHeight = this.arrowRect.height;\n\t\t\tthis.setSetupArrow();\n\t\t}\n\t}\n\n\trenderSelector(params)\n\t{\n\t\tthis.selector = new Selector(this, params);\n\t\tthis.selector.render();\n\t}\n\n\tgetSubSection()\n\t{\n\t\tconst regex = /analyticsLabel\\[source]=(\\w*)&/gm;\n\t\tlet match = regex.exec(decodeURI(window.location));\n\t\tif (match?.length > 1)\n\t\t{\n\t\t\treturn match[1];\n\t\t}\n\t\treturn null;\n\t}\n\n\tchangeContent(action)\n\t{\n\t\tthis.hideErrorMessage();\n\t\tthis.hideSuccessMessage();\n\t\tlet section = this.getSubSection();\n\t\tlet subSection = \"\";\n\n\t\tif (action.length > 0)\n\t\t{\n\t\t\tif (action === 'active-directory')\n\t\t\t{\n\t\t\t\tif (!this.activeDirectory)\n\t\t\t\t{\n\t\t\t\t\tthis.activeDirectory = new ActiveDirectory(this);\n\t\t\t\t}\n\n\t\t\t\tthis.activeDirectory.showForm();\n\t\t\t\tthis.analytics.sendTabData(section, Analytics.TAB_AD);\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst projectId = (\n\t\t\t\tthis.userOptions.hasOwnProperty('groupId')\n\t\t\t\t\t? parseInt(this.userOptions.groupId, 10)\n\t\t\t\t\t: 0\n\t\t\t);\n\n\t\t\tconst departmentsId = (\n\t\t\t\t(this.userOptions.hasOwnProperty('departmentsId') && Array.isArray(this.userOptions.departmentsId))\n\t\t\t\t\t? this.userOptions.departmentsId.map((id) => parseInt(id, 10))\n\t\t\t\t\t: []\n\t\t\t);\n\t\t\tfor (let type in this.contentBlocks)\n\t\t\t{\n\t\t\t\tlet block = this.contentBlocks[type];\n\n\t\t\t\tif (type === action)\n\t\t\t\t{\n\t\t\t\t\tDom.removeClass(block, 'invite-block-hidden');\n\t\t\t\t\tDom.addClass(block, 'invite-block-shown');\n\n\t\t\t\t\tconst params = {\n\t\t\t\t\t\tcontentBlock: this.contentBlocks[action]\n\t\t\t\t\t};\n\t\t\t\t\tconst row = new Row(this, params);\n\n\t\t\t\t\tif (action === 'invite')\n\t\t\t\t\t{\n\t\t\t\t\t\tsubSection = Analytics.TAB_EMAIL;\n\t\t\t\t\t\trow.renderInviteInputs(5);\n\t\t\t\t\t}\n\t\t\t\t\telse if (action === 'invite-with-group-dp')\n\t\t\t\t\t{\n\t\t\t\t\t\tsubSection = Analytics.TAB_DEPARTMENT;\n\t\t\t\t\t\trow.renderInviteInputs(3);\n\n\t\t\t\t\t\tconst selectorParams = {\n\t\t\t\t\t\t\tcontentBlock: this.contentBlocks[action]\n\t\t\t\t\t\t\t\t.querySelector(\"[data-role='entity-selector-container']\"),\n\t\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\t\tdepartment: true,\n\t\t\t\t\t\t\t\tproject: true,\n\t\t\t\t\t\t\t\tprojectId: projectId,\n\t\t\t\t\t\t\t\tdepartmentsId: departmentsId,\n\t\t\t\t\t\t\t\tisAdmin: this.isAdmin,\n\t\t\t\t\t\t\t\tprojectLimitExceeded: this.projectLimitExceeded,\n\t\t\t\t\t\t\t\tprojectLimitFeatureId: this.projectLimitFeatureId,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t\tthis.renderSelector(selectorParams);\n\t\t\t\t\t}\n\t\t\t\t\telse if (action === 'extranet')\n\t\t\t\t\t{\n\t\t\t\t\t\tsubSection = Analytics.TAB_EXTRANET;\n\t\t\t\t\t\trow.renderInviteInputs(3);\n\n\t\t\t\t\t\tconst selectorParams = {\n\t\t\t\t\t\t\tcontentBlock: this.contentBlocks[action]\n\t\t\t\t\t\t\t\t.querySelector(\"[data-role='entity-selector-container']\"),\n\t\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\t\tdepartment: false,\n\t\t\t\t\t\t\t\tproject: \"extranet\",\n\t\t\t\t\t\t\t\tprojectId: projectId,\n\t\t\t\t\t\t\t\tisAdmin: this.isAdmin,\n\t\t\t\t\t\t\t\tprojectLimitExceeded: this.projectLimitExceeded,\n\t\t\t\t\t\t\t\tprojectLimitFeatureId: this.projectLimitFeatureId,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t\tthis.renderSelector(selectorParams);\n\t\t\t\t\t}\n\t\t\t\t\telse if (action === \"add\")\n\t\t\t\t\t{\n\t\t\t\t\t\tsubSection = Analytics.TAB_REGISTRATION;\n\t\t\t\t\t\trow.renderRegisterInputs();\n\n\t\t\t\t\t\tconst selectorParams = {\n\t\t\t\t\t\t\tcontentBlock: this.contentBlocks[action]\n\t\t\t\t\t\t\t\t.querySelector(\"[data-role='entity-selector-container']\"),\n\t\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\t\tdepartment: true,\n\t\t\t\t\t\t\t\tproject: true,\n\t\t\t\t\t\t\t\tprojectId: projectId,\n\t\t\t\t\t\t\t\tisAdmin: this.isAdmin,\n\t\t\t\t\t\t\t\tprojectLimitExceeded: this.projectLimitExceeded,\n\t\t\t\t\t\t\t\tprojectLimitFeatureId: this.projectLimitFeatureId,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t\tthis.renderSelector(selectorParams);\n\t\t\t\t\t}\n\t\t\t\t\telse if (action === \"integrator\")\n\t\t\t\t\t{\n\t\t\t\t\t\tsubSection = Analytics.TAB_INTEGRATOR;\n\t\t\t\t\t\trow.renderIntegratorInput();\n\t\t\t\t\t}\n\t\t\t\t\telse if (action === \"self\")\n\t\t\t\t\t{\n\t\t\t\t\t\tsubSection = Analytics.TAB_LINK;\n\t\t\t\t\t}\n\t\t\t\t\telse if (action === \"mass-invite\")\n\t\t\t\t\t{\n\t\t\t\t\t\tsubSection = Analytics.TAB_MASS;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tDom.removeClass(block, 'invite-block-shown');\n\t\t\t\t\tDom.addClass(block, 'invite-block-hidden');\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (this.analytics && section && subSection)\n\t\t\t{\n\t\t\t\tthis.analytics.sendTabData(section, subSection);\n\t\t\t}\n\t\t\tthis.changeButton(action);\n\t\t}\n\t}\n\n\tchangeButton(action)\n\t{\n\t\tEvent.unbindAll(this.button, 'click');\n\n\t\tif (!this.isCreatorEmailConfirmed)\n\t\t{\n\t\t\tEvent.bind(this.button, 'click', () => {\n\t\t\t\tthis.showErrorMessage(Loc.getMessage('INTRANET_INVITE_DIALOG_CONFIRM_CREATOR_EMAIL_ERROR'));\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\tthis.activateButton();\n\n\t\tif (action === \"invite\")\n\t\t{\n\t\t\tthis.button.innerText = Loc.getMessage('BX24_INVITE_DIALOG_ACTION_INVITE');\n\n\t\t\tEvent.bind(this.button, 'click',() => {\n\t\t\t\tif (!this.submit.waitingResponse) {\n\t\t\t\t\tthis.submit.submitInvite();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\telse if (action === \"mass-invite\")\n\t\t{\n\t\t\tthis.button.innerText = Loc.getMessage('BX24_INVITE_DIALOG_ACTION_INVITE');\n\n\t\t\tEvent.bind(this.button, 'click',() => {\n\t\t\t\tif (!this.submit.waitingResponse) {\n\t\t\t\t\tthis.submit.submitMassInvite();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\telse if (action === \"invite-with-group-dp\")\n\t\t{\n\t\t\tthis.button.innerText = Loc.getMessage('BX24_INVITE_DIALOG_ACTION_INVITE');\n\n\t\t\tEvent.bind(this.button, 'click', () => {\n\t\t\t\tif (!this.submit.waitingResponse) {\n\t\t\t\t\tthis.submit.submitInviteWithGroupDp();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\telse if (action === \"add\")\n\t\t{\n\t\t\tthis.button.innerText = Loc.getMessage('BX24_INVITE_DIALOG_ACTION_ADD');\n\n\t\t\tEvent.bind(this.button, 'click', () => {\n\t\t\t\tif (!this.submit.waitingResponse) {\n\t\t\t\t\tthis.submit.submitAdd();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\telse if (action === \"self\")\n\t\t{\n\t\t\tthis.button.innerText = Loc.getMessage('BX24_INVITE_DIALOG_ACTION_SAVE');\n\t\t\tthis.disableButton();\n\n\t\t\tEvent.bind(this.button, 'click', () => {\n\t\t\t\tif (this.isButtonActive())\n\t\t\t\t{\n\t\t\t\t\tthis.submit.submitSelf();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\telse if (action === \"integrator\")\n\t\t{\n\t\t\tthis.button.innerText = Loc.getMessage('BX24_INVITE_DIALOG_ACTION_INVITE');\n\n\t\t\tEvent.bind(this.button, 'click', () => {\n\t\t\t\tif (!this.submit.waitingResponse) {\n\t\t\t\t\tthis.submit.submitIntegrator();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\telse if (action === \"extranet\")\n\t\t{\n\t\t\tthis.button.innerText = Loc.getMessage('BX24_INVITE_DIALOG_ACTION_INVITE');\n\n\t\t\tEvent.bind(this.button, 'click', () => {\n\t\t\t\tif (!this.submit.waitingResponse) {\n\t\t\t\t\tthis.submit.submitExtranet();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\telse if (action === \"success\")\n\t\t{\n\t\t\tthis.button.innerText = Loc.getMessage('BX24_INVITE_DIALOG_ACTION_INVITE_MORE');\n\n\t\t\tEvent.bind(this.button, 'click', () => {\n\t\t\t\tBX.fireEvent(this.menuItems[0], 'click');\n\t\t\t});\n\t\t}\n\t}\n\n\tdisableButton()\n\t{\n\t\tDom.addClass(this.button, \"ui-btn-disabled\");\n\t}\n\n\tactivateButton()\n\t{\n\t\tDom.removeClass(this.button, \"ui-btn-disabled\");\n\t}\n\n\tisButtonActive()\n\t{\n\t\treturn !Dom.hasClass(this.button, \"ui-btn-disabled\");\n\t}\n\n\tshowSuccessMessage(successText)\n\t{\n\t\tthis.hideErrorMessage();\n\n\t\tif (Type.isDomNode(this.successMessageBlock))\n\t\t{\n\t\t\tthis.successMessageBlock.style.display = \"block\";\n\t\t\tconst alert = this.successMessageBlock.querySelector(\".ui-alert-message\");\n\t\t\tif (Type.isDomNode(alert))\n\t\t\t{\n\t\t\t\talert.innerHTML = BX.util.htmlspecialchars(successText);\n\t\t\t}\n\t\t}\n\t}\n\n\thideSuccessMessage()\n\t{\n\t\tif (Type.isDomNode(this.successMessageBlock))\n\t\t{\n\t\t\tthis.successMessageBlock.style.display = \"none\";\n\t\t}\n\t}\n\n\tshowErrorMessage(errorText)\n\t{\n\t\tthis.hideSuccessMessage();\n\n\t\tif (Type.isDomNode(this.errorMessageBlock) && errorText)\n\t\t{\n\t\t\tthis.errorMessageBlock.style.display = \"block\";\n\t\t\tconst alert = this.errorMessageBlock.querySelector(\".ui-alert-message\");\n\t\t\tif (Type.isDomNode(alert))\n\t\t\t{\n\t\t\t\talert.innerHTML = BX.util.htmlspecialchars(errorText);\n\t\t\t}\n\t\t}\n\t}\n\n\thideErrorMessage()\n\t{\n\t\tif (Type.isDomNode(this.errorMessageBlock))\n\t\t{\n\t\t\tthis.errorMessageBlock.style.display = \"none\";\n\t\t}\n\t}\n\n\tgetSetupArrow()\n\t{\n\t\tthis.body = document.querySelector('.invite-body');\n\t\tthis.panelConfirmBtn = document.getElementById('intranet-invitation-btn');\n\t\tthis.sliderContent = document.querySelector('.ui-page-slider-workarea');\n\t\tthis.sliderHeader = document.querySelector('.ui-side-panel-wrap-title-wrap');\n\t\tthis.buttonPanel = document.querySelector('.ui-button-panel');\n\t\tthis.inviteButton = document.querySelector('.invite-form-buttons');\n\n\t\tthis.sliderHeaderHeight = this.sliderHeader.getBoundingClientRect().height;\n\t\tthis.buttonPanelRect = this.buttonPanel.getBoundingClientRect();\n\t\tthis.panelRect = this.panelConfirmBtn.getBoundingClientRect();\n\t\tthis.btnWidth = Math.ceil(this.panelRect.width);\n\t\tthis.arrowWidth = Math.ceil(this.arrowRect.width);\n\t\tthis.sliderContentRect = this.sliderContent.getBoundingClientRect();\n\n\t\tthis.bodyHeight = this.body.getBoundingClientRect().height - this.buttonPanelRect.height + this.sliderHeaderHeight;\n\t\tthis.contentHeight = this.arrowHeight + this.sliderContentRect.height + this.buttonPanelRect.height + this.sliderHeaderHeight - 65;\n\t}\n\n\tupdateArrow()\n\t{\n\t\tthis.bodyHeight = this.body.getBoundingClientRect().height - this.buttonPanelRect.height + this.sliderHeaderHeight;\n\t\tthis.contentHeight = this.arrowHeight + this.sliderContentRect.height + this.buttonPanelRect.height + this.sliderHeaderHeight - 65;\n\t\tthis.contentHeight > this.bodyHeight ? this.body.classList.add('js-intranet-invitation-arrow-hide') : this.body.classList.remove('js-intranet-invitation-arrow-hide');\n\t}\n\n\tsetSetupArrow()\n\t{\n\t\tthis.getSetupArrow();\n\t\tconst btnPadding = 40;\n\t\tthis.arrowBox.style.left = (this.panelRect.left + (this.btnWidth / 2) - (this.arrowWidth / 2) - btnPadding) + 'px';\n\t\tthis.contentHeight > this.bodyHeight ? this.body.classList.add('js-intranet-invitation-arrow-hide') : this.body.classList.remove('js-intranet-invitation-arrow-hide');\n\n\t\twindow.addEventListener('resize', function() {\n\t\t\tif (window.innerWidth <= 1100)\n\t\t\t{\n\t\t\t\tthis.arrowBox.style.left = (this.panelRect.left + (this.btnWidth / 2) - (this.arrowWidth / 2) - btnPadding) + 'px';\n\t\t\t}\n\t\t\tthis.getSetupArrow();\n\t\t\tthis.updateArrow();\n\t\t}.bind(this))\n\n\t\tthis.inviteButton.addEventListener('click', function() {\n\t\t\tthis.getSetupArrow();\n\t\t\tthis.updateArrow();\n\t\t}.bind(this))\n\t}\n}\n"],"names":["Submit","parent","waitingResponse","setEventNamespace","subscribe","event","form","Type","isDomNode","errorInputData","items","phoneExp","rows","Array","prototype","slice","call","querySelectorAll","forEach","row","emailInput","querySelector","phoneInput","nameInput","lastNameInput","emailValue","value","trim","isInvitationBySmsAvailable","phoneValue","test","String","toLowerCase","push","phoneCountryInput","Validation","isEmail","requestData","selector","selectorItems","getItems","length","inviteForm","contentBlocks","parseEmailAndPhone","Event","BaseEvent","data","error","Loc","getMessage","join","emit","analyticsLabel","sendAction","inviteWithGroupDpForm","showErrorMessage","getGroupAndDepartmentData","selfForm","obRequestData","checked","extranetForm","getIntegratorConfirmPopup","show","integratorForm","integrator","integrator_email","INVITATION_TYPE","message","Tag","render","moreLink","bind","top","BX","Helper","popup","Popup","id","maxWidth","closeIcon","overlay","contentPadding","titleBar","content","offsetLeft","buttons","CreateButton","text","onclick","close","CancelButton","events","onClose","destroy","massInviteForm","addForm","action","disableSubmitButton","userOptions","ajax","runComponentAction","componentName","signedParameters","mode","then","response","showSuccessMessage","changeContent","sendSuccessEvent","EventEmitter","GLOBAL_TARGET","SidePanel","Instance","postMessageTop","window","B24","licenseInfoPopup","errors","isDisable","button","isBoolean","Dom","addClass","removeClass","users","postMessageAll","SelfRegister","selfBlock","bindActions","switcherNode","switcher","Switcher","inputName","isSelfRegisterEnabled","node","handlers","toggled","toggleSettings","regenerateButton","activateButton","regenerateSecret","regenerateUrlBase","copyRegisterUrlButton","copyRegisterUrl","allowRegisterConfirm","toggleWhiteList","selfWhiteList","registerUrl","Text","getRandom","allowRegisterSecretNode","allowRegisterUrlNode","clipboard","copy","showHintPopup","runAction","analytics","send","bindNode","PopupWindow","zIndex","angle","offsetTop","autoHide","darkMode","onAfterPopupShow","setTimeout","controlBlock","hasClass","toggleClass","settingsBlock","style","inputElement","Phone","count","index","maxCount","inputStack","inputNode","num","getAttribute","parentNode","element","paddingLeft","append","flagNode","showCountrySelector","changeCallback","i","e","country","PhoneNumber","Input","flagSize","onChange","setInterval","getValue","formatter","getCountry","clearInterval","_onFlagClick","Row","params","contentBlock","inputNum","rowsContainer","phoneObj","moreButton","unbindAll","renderInputRow","massInviteButton","massMenuNode","document","fireEvent","renderPhoneRow","renderDefaultRow","focus","inputNodes","checkPhoneInput","phoneFlagBlock","remove","phoneBlock","newInput","name","placeholder","replace","bindCloseIcons","bindPhoneChecker","container","nextElementSibling","preventDefault","numRows","clean","showTitles","emailTitle","nameTitle","lastNameTitle","Selector","options","entities","prepareOptions","type","hasOwnProperty","selectMode","allowOnlyUserDepartments","allowSelectRootDepartment","fillRecentTab","Object","lockProjectLink","projectLimitExceeded","lockProjectLinkFeatureId","projectLimitFeatureId","optionValue","preselectedItems","projectId","isArray","departmentsId","departmentId","tagSelector","TagSelector","dialogOptions","context","renderTo","departments","projects","tagSelectorItems","getDialog","getSelectedItems","item","parseInt","getId","getEntityId","ActiveDirectory","UI","Feedback","Form","open","defaultForm","sec","Analytics","cSection","isAdmin","sendData","tool","TOOLS","category","CATEGORY_INVITATION","EVENT_COPY","c_section","p1","p2","section","subSection","EVENT_TAB_VIEW","c_sub_section","EVENT_OPEN_SLIDER_INVITATION","ADMIN_ALLOW_MODE_Y","ADMIN_ALLOW_MODE_N","IS_ADMIN_Y","IS_ADMIN_N","source","formParams","isPlainObject","menuContainer","menuContainerNode","contentContainer","contentContainerNode","isExtranetInstalled","isCloud","isCreatorEmailConfirmed","firstInvitationBlock","isString","blocks","block","blockType","errorMessageBlock","successMessageBlock","Hint","init","menuItems","submit","sendOpenSliderData","selfRegister","arrowBox","arrowRect","getBoundingClientRect","arrowHeight","height","setSetupArrow","regex","match","exec","decodeURI","location","hideErrorMessage","hideSuccessMessage","getSubSection","activeDirectory","showForm","sendTabData","TAB_AD","groupId","map","TAB_EMAIL","renderInviteInputs","TAB_DEPARTMENT","selectorParams","department","project","renderSelector","TAB_EXTRANET","TAB_REGISTRATION","renderRegisterInputs","TAB_INTEGRATOR","renderIntegratorInput","TAB_LINK","TAB_MASS","changeButton","innerText","submitInvite","submitMassInvite","submitInviteWithGroupDp","submitAdd","disableButton","isButtonActive","submitSelf","submitIntegrator","submitExtranet","successText","display","alert","innerHTML","util","htmlspecialchars","errorText","body","panelConfirmBtn","getElementById","sliderContent","sliderHeader","buttonPanel","inviteButton","sliderHeaderHeight","buttonPanelRect","panelRect","btnWidth","Math","ceil","width","arrowWidth","sliderContentRect","bodyHeight","contentHeight","classList","add","getSetupArrow","btnPadding","left","addEventListener","innerWidth","updateArrow"],"mappings":"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"}