if(typeof BX.CrmDealCategoryPanel==="undefined"){BX.CrmDealCategoryPanel=function(){this._id="";this._settings={};this._container=null;this._nodes=null;this._button=null;this._menuId="";this._menu=null};BX.CrmDealCategoryPanel.prototype={initialize:function(t,e){this._id=t;this._settings=e?e:{};var n=this.getSetting("containerId","");this._container=BX.type.isNotEmptyString(n)?BX(n):null;if(!BX.type.isElementNode(this._container)){throw"BX.CrmDealCategoryPanel: Container is not found."}this._nodes=this._container.getElementsByClassName("crm-deal-panel-tab-item");this._button=this._container.getElementsByClassName("crm-deal-panel-tab-item-show-more")[0];BX.bind(this._button,"click",this.onButtonClick.bind(this));BX.bind(window,"resize",this.adjust.bind(this));this._menuId=this._id;this.adjust()},getId:function(){return this._id},getSetting:function(t,e){return this._settings.hasOwnProperty(t)?this._settings[t]:e},adjust:function(){this.closeMenu();var t=false;var e=null;for(var n=this._nodes.length-1;n>=0;n--){var i=this._nodes[n];if(i.offsetTop===0){e=i;break}else if(!t){t=true}}if(!t){this._button.style.display="none"}else{this._button.style.display="block";if(e){this._button.style.left=e.offsetLeft+e.offsetWidth+20+"px"}}},onButtonClick:function(t){this.openMenu()},openMenu:function(){this.closeMenu();var t=[];for(var e=0,n=this._nodes.length;e<n;e++){var i=this._nodes[e];if(i.offsetTop>0){t.push({text:i.innerHTML,className:i.className,href:i.getAttribute("href")})}}this._menu=BX.PopupMenu.create(this._menuId,this._button,t,{offsetTop:-20,offsetLeft:13,angle:true,autoHide:true,closeByEsc:true});this._menu.popupWindow.show()},closeMenu:function(){if(this._menu){BX.PopupMenu.destroy(this._menuId);this._menu=null}}};BX.CrmDealCategoryPanel.create=function(t,e){var n=new BX.CrmDealCategoryPanel;n.initialize(t,e);return n}}
//# sourceMappingURL=script.map.js