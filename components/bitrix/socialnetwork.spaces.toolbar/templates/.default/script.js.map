{"version":3,"file":"script.js","sources":["src/filter.js","src/tasks/tasks-counters.js","src/tasks/tasks-robots.js","src/tasks/tasks-router.js","src/tasks/menu-items/kanban-order.js","src/tasks/menu-items/read-all.js","src/tasks/tasks-settings-menu.js","src/tasks/tasks-view.js","src/tasks/menu-items/complete-sprint.js","src/tasks/menu-items/kanban-sort.js","src/tasks/scrum/scrum-active-settings.js","src/tasks/menu-items/burn-down.js","src/tasks/scrum/scrum-complete-settings.js","src/tasks/menu-items/priority.js","src/tasks/scrum/scrum-plan-settings.js","src/tasks/scrum/scrum-settings.js","src/tasks/group/group-calendar-settings.js","src/tasks/tasks-excel-manager.js","src/tasks/menu-items/export.js","src/tasks/menu-items/group-subtasks.js","src/tasks/menu-items/import-csv.js","src/tasks/tasks-sort-manager.js","src/tasks/menu-items/sort.js","src/tasks/menu-items/sync.js","src/tasks/group/group-gantt-settings.js","src/tasks/menu-items/configure-view.js","src/tasks/group/group-kanban-settings.js","src/tasks/menu-items/export-excel.js","src/tasks/group/group-list-settings.js","src/tasks/group/group-settings.js","src/tasks/tasks-scrum.js","src/tasks/user/user-calendar-settings.js","src/tasks/user/user-gantt-settings.js","src/tasks/user/user-kanban-settings.js","src/tasks/user/user-list-settings.js","src/tasks/user/user-settings.js","src/tasks/tasks-view-list.js","src/tasks/tasks-toolbar.js","src/files/files-add-settings.js","src/files/files-router.js","src/files/files-settings.js","src/files/files-disk.js","src/files/files-toolbar.js","../../../../../../../calendar/install/js/calendar/entry/src/entrymanager.js","src/calendar/calendar.js","src/calendar/calendar-add-button-menu.js","src/calendar/calendar-settings.js","src/calendar/calendar-toolbar.js","src/discussions/discussions-add-button-menu.js","src/discussions/discussions-settings.js","src/discussions/discussions-composition.js","src/discussions/discussions-toolbar.js","src/users/users-router.js","src/users/users-toolbar.js"],"sourcesContent":["import { Dom, Type } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\n\ntype Params = {\n\tfilterId: string,\n\tfilterContainer: HTMLElement,\n}\n\nexport class Filter extends EventEmitter\n{\n\t#filter: BX.Main.Filter;\n\t#filterContainer: HTMLElement;\n\t#fields: Object;\n\n\tconstructor(params: Params)\n\t{\n\t\tsuper(params);\n\n\t\tthis.setEventNamespace('BX.Socialnetwork.Spaces.Filter');\n\n\t\tthis.#filter = BX.Main.filterManager.getById(params.filterId);\n\t\tthis.#filterContainer = params.filterContainer;\n\n\t\tthis.#fields = this.#filter.getFilterFieldsValues();\n\n\t\tEventEmitter.subscribe('BX.Main.Filter:apply', this.#filterApply.bind(this));\n\t\tEventEmitter.subscribe('BX.Main.Filter:show', this.#filterShow.bind(this));\n\t\tEventEmitter.subscribe('BX.Main.Filter:blur', this.#filterHide.bind(this));\n\t}\n\n\tapplyFilter()\n\t{\n\t\tthis.#filter.applyFilter(false, true);\n\t}\n\n\ttoggleField(fieldName: string, value: string)\n\t{\n\t\tif (!this.#isFilteredByFieldValue(fieldName, value))\n\t\t{\n\t\t\tthis.#filter.getApi().extendFilter({ [fieldName]: value });\n\n\t\t\treturn;\n\t\t}\n\n\t\tthis.#filter.getFilterFields().forEach((field) => {\n\t\t\tif (field.getAttribute('data-name') === fieldName)\n\t\t\t{\n\t\t\t\tthis.#filter.getFields().deleteField(field);\n\t\t\t}\n\t\t});\n\n\t\tthis.#filter.getSearch().apply();\n\t}\n\n\t#filterApply()\n\t{\n\t\tthis.#fields = this.#filter.getFilterFieldsValues();\n\t}\n\n\t#filterShow()\n\t{\n\t\tDom.addClass(this.#filterContainer, '--active');\n\t}\n\n\t#filterHide()\n\t{\n\t\tDom.removeClass(this.#filterContainer, '--active');\n\t}\n\n\t#isFilteredByField(field): boolean\n\t{\n\t\tif (!Object.keys(this.#fields).includes(field))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tif (Type.isArray(this.#fields[field]))\n\t\t{\n\t\t\treturn this.#fields[field].length > 0;\n\t\t}\n\n\t\treturn this.#fields[field] !== '';\n\t}\n\n\t#isFilteredByFieldValue(field, value): boolean\n\t{\n\t\treturn this.#isFilteredByField(field) && this.#fields[field].toString() === value.toString();\n\t}\n}\n","import { ajax, AjaxError, AjaxResponse, Dom, Event, Tag, Type } from 'main.core';\nimport { PULL as Pull } from 'pull.client';\nimport { Filter } from '../filter';\n\ntype Params = {\n\tfilter: Filter,\n\tisUserSpace: boolean,\n\tisScrumSpace: boolean,\n\tuserId?: number,\n\tgroupId?: number,\n\tfilterRole: string,\n\tcounters: Counters,\n}\n\nexport type Counters = {\n\texpired: Counter,\n\tnew_comments: Counter,\n}\n\ntype Counter = {\n\tcode: number,\n\tcounter: number,\n\tfilterField: string,\n}\n\nimport '../css/counters.css';\n\nexport class TasksCounters\n{\n\t#filter: Filter;\n\t#filterRole: string;\n\t#userId: number;\n\t#groupId: number;\n\t#counters: Counters;\n\t#isUserSpace: boolean;\n\t#isScrumSpace: boolean;\n\n\t#layout: Object<string, HTMLElement>;\n\n\tconstructor(params: Params)\n\t{\n\t\tthis.#userId = Type.isUndefined(params.userId) ? 0 : parseInt(params.userId, 10);\n\t\tthis.#groupId = Type.isUndefined(params.groupId) ? 0 : parseInt(params.groupId, 10);\n\t\tthis.#filter = params.filter;\n\t\tthis.#filterRole = params.filterRole;\n\t\tthis.#counters = params.counters;\n\t\tthis.#isUserSpace = params.isUserSpace;\n\t\tthis.#isScrumSpace = params.isScrumSpace;\n\n\t\tthis.#layout = {\n\t\t\tnode: null,\n\t\t\tlistContainerNode: null,\n\t\t\tlistNode: null,\n\t\t};\n\n\t\tthis.#initPull();\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tthis.#layout.node = Tag.render`\n\t\t\t<div class=\"sn-spaces__toolbar-space_counters\">\n\t\t\t\t${this.#renderExpired()}\n\t\t\t\t${this.#renderNewComments()}\n\t\t\t</div>\n\t\t`;\n\n\t\treturn this.#layout.node;\n\t}\n\n\treadAll()\n\t{\n\t\tif (this.#isUserSpace || this.#filterRole !== 'view_all')\n\t\t{\n\t\t\tthis.#readAllUser();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.#readAllGroup();\n\t\t}\n\t}\n\n\t#initPull()\n\t{\n\t\tPull.subscribe({\n\t\t\tmoduleId: 'tasks',\n\t\t\tcallback: this.#processPullEvent.bind(this),\n\t\t});\n\t}\n\n\t#processPullEvent(data)\n\t{\n\t\tconst { command, params } = data;\n\n\t\tconst eventHandlers = {\n\t\t\tuser_counter: this.#processUserCounter.bind(this),\n\t\t\tproject_counter: this.#processProjectCounter.bind(this),\n\t\t};\n\n\t\tconst has = Object.prototype.hasOwnProperty;\n\t\tif (has.call(eventHandlers, command))\n\t\t{\n\t\t\tconst method = eventHandlers[command];\n\t\t\tif (method)\n\t\t\t{\n\t\t\t\tmethod.apply(this, [params]);\n\t\t\t}\n\t\t}\n\t}\n\n\t#processUserCounter()\n\t{\n\t\tif (!this.#isUserSpace)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.#updateCounters();\n\t}\n\n\t#processProjectCounter()\n\t{\n\t\tif (this.#isUserSpace)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.#updateCounters();\n\t}\n\n\t#renderExpired(): HTMLElement\n\t{\n\t\tif (this.#isScrumSpace)\n\t\t{\n\t\t\treturn '';\n\t\t}\n\n\t\tconst uiClasses = 'ui-btn ui-btn-light ui-btn-sm ui-btn-round ui-btn-themes';\n\n\t\tconst activeClass = this.#getActiveClass(this.#counters.expired.counter);\n\n\t\tthis.#layout.expired = Tag.render`\n\t\t\t<button\n\t\t\t\tdata-id=\"sn-spaces-toolbar-counters-expired\"\n\t\t\t\tclass=\"sn-spaces__toolbar-space_btn-with-counter ${uiClasses} ${activeClass}\"\n\t\t\t>\n\t\t\t\t<div class=\"ui-icon-set --stopwatch\"></div>\n\t\t\t\t<div class=\"sn-spaces__toolbar-space_btn-counter\">\n\t\t\t\t\t${parseInt(this.#counters.expired.counter, 10)}\n\t\t\t\t</div>\n\t\t\t</button>\n\t\t`;\n\n\t\tEvent.bind(this.#layout.expired, 'click', this.#click.bind(this, this.#counters.expired));\n\n\t\treturn this.#layout.expired;\n\t}\n\n\t#renderNewComments(): HTMLElement\n\t{\n\t\tconst uiClasses = 'ui-btn ui-btn-light ui-btn-sm ui-btn-round ui-btn-themes';\n\n\t\tconst activeClass = this.#getActiveClass(this.#counters.new_comments.counter);\n\n\t\tthis.#layout.newComments = Tag.render`\n\t\t\t<button\n\t\t\t\tdata-id=\"sn-spaces-toolbar-counters-new-comments\"\n\t\t\t\tclass=\"sn-spaces__toolbar-space_btn-with-counter --green ${uiClasses} ${activeClass}\"\n\t\t\t>\n\t\t\t\t<div class=\"ui-icon-set --chats-1\"></div>\n\t\t\t\t<div class=\"sn-spaces__toolbar-space_btn-counter\">\n\t\t\t\t\t${parseInt(this.#counters.new_comments.counter, 10)}\n\t\t\t\t</div>\n\t\t\t</button>\n\t\t`;\n\n\t\tEvent.bind(this.#layout.newComments, 'click', this.#click.bind(this, this.#counters.new_comments));\n\n\t\treturn this.#layout.newComments;\n\t}\n\n\t#click(counter: Counter)\n\t{\n\t\tthis.#filter.toggleField(counter.filterField, counter.code);\n\t}\n\n\t#update(counters: Counters)\n\t{\n\t\tthis.#counters = counters;\n\n\t\tif (!this.#isScrumSpace)\n\t\t{\n\t\t\tthis.#updateCounter(this.#layout.expired, this.#counters.expired.counter);\n\t\t}\n\t\tthis.#updateCounter(this.#layout.newComments, this.#counters.new_comments.counter);\n\t}\n\n\t#updateCounter(node: HTMLElement, value: number)\n\t{\n\t\tconst newCommentsActiveClass = this.#getActiveClass(value);\n\t\tif (newCommentsActiveClass)\n\t\t{\n\t\t\tDom.addClass(node, newCommentsActiveClass);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.removeClass(node, '--active');\n\t\t}\n\n\t\tconst counterNode = node.querySelector('.sn-spaces__toolbar-space_btn-counter');\n\t\tcounterNode.textContent = parseInt(value, 10);\n\t}\n\n\t#updateCounters()\n\t{\n\t\tajax.runComponentAction(\n\t\t\t'bitrix:socialnetwork.spaces.toolbar',\n\t\t\t'getTasksCounters',\n\t\t\t{\n\t\t\t\tmode: 'class',\n\t\t\t\tdata: {\n\t\t\t\t\tgroupId: this.#groupId,\n\t\t\t\t},\n\t\t\t},\n\t\t)\n\t\t\t.then((response: AjaxResponse) => {\n\t\t\t\tthis.#update(response.data);\n\t\t\t})\n\t\t\t.catch((error: AjaxError) => {\n\t\t\t\tthis.#consoleError('changePrivacy', error);\n\t\t\t})\n\t\t;\n\t}\n\n\t#readAllGroup()\n\t{\n\t\tif (!this.#hasCounters())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tajax.runAction(\n\t\t\t'tasks.viewedGroup.project.markAsRead',\n\t\t\t{\n\t\t\t\tdata: {\n\t\t\t\t\tfields: {\n\t\t\t\t\t\tgroupId: this.#groupId,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t)\n\t\t\t.then((response: AjaxResponse) => {\n\t\t\t\tthis.#updateCounters();\n\t\t\t\tthis.#filter.applyFilter();\n\t\t\t})\n\t\t\t.catch((error: AjaxError) => {\n\t\t\t\tthis.#consoleError('readAllScrum', error);\n\t\t\t})\n\t\t;\n\t}\n\n\t#readAllUser()\n\t{\n\t\tif (!this.#hasCounters())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tajax.runAction(\n\t\t\t'tasks.viewedGroup.user.markAsRead',\n\t\t\t{\n\t\t\t\tdata: {\n\t\t\t\t\tfields: {\n\t\t\t\t\t\tgroupId: this.#groupId,\n\t\t\t\t\t\tuserId: this.#userId,\n\t\t\t\t\t\trole: this.#filterRole,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t)\n\t\t\t.then((response: AjaxResponse) => {\n\t\t\t\tthis.#updateCounters();\n\t\t\t\tthis.#filter.applyFilter();\n\t\t\t})\n\t\t\t.catch((error: AjaxError) => {\n\t\t\t\tthis.#consoleError('readAllScrum', error);\n\t\t\t})\n\t\t;\n\t}\n\n\t#hasCounters(): boolean\n\t{\n\t\tconst expiredCounter = parseInt(this.#counters.expired.counter, 10);\n\t\tconst newCommentsCounter = parseInt(this.#counters.new_comments.counter, 10);\n\n\t\treturn expiredCounter > 0 || newCommentsCounter > 0;\n\t}\n\n\t#getActiveClass(value: number): string\n\t{\n\t\treturn value > 0 ? '--active' : '';\n\t}\n\n\t#consoleError(action: string, error: AjaxError)\n\t{\n\t\t// eslint-disable-next-line no-console\n\t\tconsole.error(`TasksCounters: ${action} error`, error);\n\t}\n}\n","import { Event, Loc, Tag } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\n\nimport '../css/robots.css';\n\ntype Params = {\n\tgroupId: number,\n\tisTaskLimitsExceeded: boolean,\n\tcanUseAutomation: boolean,\n\tsourceAnalytics: string,\n}\n\nexport class TasksRobots extends EventEmitter\n{\n\t#groupId: number;\n\t#isTaskLimitsExceeded: boolean;\n\t#canUseAutomation: boolean;\n\t#sourceAnalytics: string;\n\n\t#sidePanelManager: BX.SidePanel.Manager;\n\n\tconstructor(params: Params)\n\t{\n\t\tsuper(params);\n\n\t\tthis.#groupId = params.groupId;\n\t\tthis.#isTaskLimitsExceeded = params.isTaskLimitsExceeded;\n\t\tthis.#canUseAutomation = params.canUseAutomation;\n\t\tthis.#sourceAnalytics = params.sourceAnalytics;\n\n\t\tthis.#sidePanelManager = BX.SidePanel.Instance;\n\n\t\tthis.setEventNamespace('BX.Socialnetwork.Spaces.TasksRobots');\n\t}\n\n\trenderBtn(): HTMLElement\n\t{\n\t\tlet className = 'tasks-scrum-robot-btn ui-btn ui-btn-light ui-btn-sm ui-btn-round ui-btn-themes ui-btn-no-caps ui-btn-themes ';\n\n\t\tif (this.#isShowLimitSidePanel())\n\t\t{\n\t\t\tclassName += ' ui-btn-icon-lock';\n\t\t}\n\n\t\tconst node = Tag.render`\n\t\t\t<button class=\"${className}\">\n\t\t\t\t${Loc.getMessage('SN_SPACES_TASKS_ROBOTS_BUTTON')}\n\t\t\t</button>\n\t\t`;\n\n\t\tEvent.bind(node, 'click', this.#onClick.bind(this));\n\n\t\treturn node;\n\t}\n\n\t#onClick()\n\t{\n\t\tif (this.#isShowLimitSidePanel())\n\t\t{\n\t\t\tBX.UI.InfoHelper.show('limit_tasks_robots', {\n\t\t\t\tisLimit: true,\n\t\t\t\tlimitAnalyticsLabels: {\n\t\t\t\t\tmodule: 'tasks',\n\t\t\t\t\tsource: this.#sourceAnalytics,\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tconst url = `/bitrix/components/bitrix/tasks.automation/slider.php?site_id=${\n\t\t\t\tLoc.getMessage('SITE_ID')}&project_id=${this.#groupId}`;\n\n\t\t\tthis.#sidePanelManager.open(url, {\n\t\t\t\tcustomLeftBoundary: 0,\n\t\t\t\tcacheable: false,\n\t\t\t\tloader: 'bizproc:automation-loader',\n\t\t\t});\n\t\t}\n\t}\n\n\t#isShowLimitSidePanel(): boolean\n\t{\n\t\treturn (this.#isTaskLimitsExceeded && !this.#canUseAutomation);\n\t}\n}\n","import { Uri } from 'main.core';\n\ntype Params = {\n\tpathToGroupTasks?: string,\n\tpathToGroupTasksTask?: string,\n}\n\nexport class TasksRouter\n{\n\t#sidePanelManager: BX.SidePanel.Manager;\n\n\t#pathToGroupTasks: string;\n\t#pathToGroupTasksTask: string;\n\n\tconstructor(params: Params)\n\t{\n\t\tthis.#pathToGroupTasks = params.pathToGroupTasks;\n\t\tthis.#pathToGroupTasksTask = params.pathToGroupTasksTask;\n\n\t\tthis.#sidePanelManager = BX.SidePanel.Instance;\n\t}\n\n\tredirectTo(url)\n\t{\n\t\tlocation.href = url;\n\t}\n\n\tredirectToScrumTasks(urlParam: string, urlValue: string)\n\t{\n\t\tconst viewUri = new Uri(this.#pathToGroupTasks);\n\t\tviewUri.setQueryParam(urlParam, urlValue);\n\n\t\tlocation.href = viewUri.toString();\n\t}\n\n\tredirectToScrumView(view: string)\n\t{\n\t\tconst viewUri = new Uri(this.#pathToGroupTasks);\n\n\t\tviewUri.setQueryParam('tab', view);\n\n\t\tlocation.href = viewUri.toString();\n\t}\n\n\tshowTask(taskId: number)\n\t{\n\t\tthis.#sidePanelManager.open(\n\t\t\tthis.#pathToGroupTasksTask\n\t\t\t\t.replace('#action#', 'view')\n\t\t\t\t.replace('#task_id#', taskId),\n\t\t);\n\t}\n\n\tshowSidePanel(url)\n\t{\n\t\tthis.#sidePanelManager.open(url);\n\t}\n\n\tshowByExtension(fullName: string, shortName: string, params: Object): Promise\n\t{\n\t\treturn top.BX.Runtime.loadExtension(fullName)\n\t\t\t.then((exports) => {\n\t\t\t\tconst className = shortName.replaceAll('-', '');\n\n\t\t\t\tif (exports && exports[className])\n\t\t\t\t{\n\t\t\t\t\tconst extension = new exports[className](params);\n\n\t\t\t\t\textension.show();\n\n\t\t\t\t\treturn extension;\n\t\t\t\t}\n\n\t\t\t\treturn null;\n\t\t\t})\n\t\t;\n\t}\n}\n","export class KanbanOrder\n{\n\tstatic SORT_ASC = 'asc';\n\tstatic SORT_DESC = 'desc';\n\tstatic SORT_ACTUAL = 'actual';\n}\n","import { Loc } from 'main.core';\nimport { TasksSettingsMenu } from '../tasks-settings-menu';\nimport { MenuItem } from 'main.popup';\n\nexport const ReadAllItem: MenuItem = (view: TasksSettingsMenu, emptySpace: false) => new MenuItem({\n\tdataset: {\n\t\tid: `spaces-tasks-${view.getViewId()}-settings-read-all`,\n\t},\n\ttext: Loc.getMessage('SN_SPACES_TASKS_SETTINGS_READ_ALL'),\n\tclassName: emptySpace ? 'menu-popup-item-none' : '',\n\tonclick: () => {\n\t\tview.emit('realAll');\n\t},\n});\n","import { EventEmitter } from 'main.core.events';\nimport { Menu, MenuItem } from 'main.popup';\nimport { ReadAllItem } from './menu-items/read-all';\n\ntype Params = {\n\tbindElement: HTMLElement,\n}\n\nexport class TasksSettingsMenu extends EventEmitter\n{\n\t#menu: Menu;\n\t#bindElement: HTMLElement;\n\n\tconstructor(params: Params)\n\t{\n\t\tsuper();\n\n\t\tthis.setEventNamespace(this.#getEventNamespace());\n\n\t\tthis.#bindElement = params.bindElement;\n\t}\n\n\tshow(): void\n\t{\n\t\tthis.#getMenu().show();\n\t}\n\n\tclose(): void\n\t{\n\t\tthis.#menu?.close();\n\t}\n\n\t#getMenu(): Menu\n\t{\n\t\tif (!this.#menu)\n\t\t{\n\t\t\tthis.#menu = this.#createMenu(this.#bindElement);\n\t\t}\n\n\t\treturn this.#menu;\n\t}\n\n\t#createMenu(bindElement: HTMLElement): Menu\n\t{\n\t\tconst menu = new Menu({\n\t\t\tid: `spaces-tasks-${this.getViewId()}-settings`,\n\t\t\tbindElement,\n\t\t\tcloseByEsc: true,\n\t\t});\n\n\t\tfor (const menuItem of this.getMenuItems())\n\t\t{\n\t\t\tmenu.addMenuItem(menuItem);\n\t\t}\n\n\t\treturn menu;\n\t}\n\n\t#getEventNamespace(): string\n\t{\n\t\tconst camelCase = this.getViewId().toLowerCase().replace(/(-[a-z])/g, (group) => group\n\t\t\t.toUpperCase()\n\t\t\t.replace('-', ''));\n\n\t\tconst pascalCase = camelCase.charAt(0).toUpperCase() + camelCase.slice(1);\n\n\t\treturn `BX.Socialnetwork.Spaces.${pascalCase}Settings`;\n\t}\n\n\tgetMenuItems(): MenuItem[]\n\t{\n\t\treturn [\n\t\t\tReadAllItem(this),\n\t\t];\n\t}\n\n\tgetViewId(): string\n\t{\n\t\treturn 'base';\n\t}\n}\n","type Params = {\n\tisUserSpace: boolean,\n\tisScrumSpace: boolean,\n\tviewMode: string,\n}\n\nexport class TasksView\n{\n\t#isUserSpace: boolean;\n\t#isScrumSpace: boolean;\n\t#viewMode: string;\n\n\tconstructor(params: Params)\n\t{\n\t\tthis.#isUserSpace = params.isUserSpace;\n\t\tthis.#isScrumSpace = params.isScrumSpace;\n\n\t\tthis.#setViewMode(params.viewMode);\n\t}\n\n\tgetCurrentViewMode(): string\n\t{\n\t\treturn this.#viewMode;\n\t}\n\n\t#setViewMode(viewMode: string)\n\t{\n\t\tconst availableModes = this.#getAvailableModes().get(this.#getCurrentSpace());\n\n\t\tthis.#viewMode = availableModes.has(viewMode) ? viewMode : this.#getDefaultMode();\n\t}\n\n\t#getAvailableModes(): Map\n\t{\n\t\treturn new Map([\n\t\t\t['user', new Set(['list', 'plan', 'timeline', 'calendar', 'gantt'])],\n\t\t\t['group', new Set(['list', 'kanban', 'plan', 'timeline', 'calendar', 'gantt'])],\n\t\t\t['scrum', new Set(['plan', 'active', 'complete'])],\n\t\t]);\n\t}\n\n\t#getDefaultMode(): string\n\t{\n\t\tconst defaultModes = new Map([\n\t\t\t['user', 'list'],\n\t\t\t['group', 'list'],\n\t\t\t['scrum', 'plan'],\n\t\t]);\n\n\t\treturn defaultModes.get(this.#getCurrentSpace());\n\t}\n\n\t#getCurrentSpace(): string\n\t{\n\t\tif (this.#isUserSpace)\n\t\t{\n\t\t\treturn 'user';\n\t\t}\n\n\t\tif (this.#isScrumSpace)\n\t\t{\n\t\t\treturn 'scrum';\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn 'group';\n\t\t}\n\t}\n}\n","import { Loc } from 'main.core';\nimport { MenuItem } from 'main.popup';\nimport { ScrumActiveSettings } from '../scrum/scrum-active-settings';\n\nexport const CompleteSprintItem: MenuItem = (view: ScrumActiveSettings) => new MenuItem({\n\tdataset: {\n\t\tid: `spaces-tasks-${view.getViewId()}-settings-complete-sprint`,\n\t},\n\ttext: Loc.getMessage('SN_SPACES_TASKS_SCRUM_SETTINGS_COMPLETE_SPRINT'),\n\tdisabled: !view.canCompleteSprint(),\n\tonclick: () => {\n\t\tview.close();\n\t\tview.emit('completeSprint');\n\t},\n});\n","import { Loc } from 'main.core';\nimport { MenuItem } from 'main.popup';\nimport { Label, LabelColor } from 'ui.label';\nimport { TasksSettingsMenu } from '../tasks-settings-menu';\nimport { KanbanSort } from 'tasks.kanban-sort';\nimport { KanbanOrder } from './kanban-order';\n\nclass KanbanSortItems\n{\n\t#view: TasksSettingsMenu;\n\t#order: KanbanOrder;\n\n\tconstructor(view: TasksSettingsMenu, order: KanbanOrder)\n\t{\n\t\tthis.#view = view;\n\t\tthis.#order = order;\n\t}\n\n\tgetItems(): MenuItem[]\n\t{\n\t\tconst hiddenItems = [\n\t\t\tthis.#getOrderTitleItem(),\n\t\t\tthis.#getOrderDescItem(),\n\t\t\tthis.#getOrderAscItem(),\n\t\t];\n\n\t\tconst items = [\n\t\t\tthis.#getTitleItem(),\n\t\t\tthis.#getActivitySortItem(),\n\t\t\tthis.#getMySortItem(hiddenItems),\n\t\t];\n\n\t\tif (this.#order !== KanbanOrder.SORT_ACTUAL)\n\t\t{\n\t\t\titems.push(...hiddenItems);\n\t\t}\n\n\t\treturn items;\n\t}\n\n\t#getTitleItem(): MenuItem\n\t{\n\t\treturn new MenuItem({\n\t\t\tdataset: { id: `spaces-tasks-${this.#view.getViewId()}-settings-sort-title-item` },\n\t\t\thtml: `<b>${Loc.getMessage('SN_SPACES_TASKS_SORT_TITLE_ITEM')}</b>`,\n\t\t\tclassName: 'menu-popup-item menu-popup-no-icon',\n\t\t});\n\t}\n\n\t#getActivitySortItem(): MenuItem\n\t{\n\t\tconst menuItem = new MenuItem({\n\t\t\tdataset: { id: `spaces-tasks-${this.#view.getViewId()}-settings-activity-sort-item` },\n\t\t\thtml: `\n\t\t\t\t${Loc.getMessage('SN_SPACES_TASKS_SORT_ACTIVITY_DATE')}\n\t\t\t\t<span style=\"margin-left: 5px\">${this.#getRecommendedLabel()}</span>\n\t\t\t`,\n\t\t\tclassName: `menu-popup-item-sort-field ${this.#getSelectedClass([KanbanOrder.SORT_ACTUAL])}`,\n\t\t\tonclick: KanbanSort.getInstance().disableCustomSort,\n\t\t});\n\n\t\tmenuItem.params = {\n\t\t\torder: KanbanOrder.SORT_ACTUAL,\n\t\t};\n\n\t\treturn menuItem;\n\t}\n\n\t#getRecommendedLabel(): string\n\t{\n\t\treturn new Label(\n\t\t\t{\n\t\t\t\ttext: Loc.getMessage('SN_SPACES_TASKS_SORT_RECOMMENDED_LABEL').toUpperCase(),\n\t\t\t\tcolor: LabelColor.LIGHT_BLUE,\n\t\t\t\tfill: true,\n\t\t\t\tsize: 'ui-label-xs',\n\t\t\t},\n\t\t).render().outerHTML;\n\t}\n\n\t#getMySortItem(hiddenItems: MenuItem[]): MenuItem\n\t{\n\t\tconst menuItem = new MenuItem({\n\t\t\tdataset: { id: `spaces-tasks-${this.#view.getViewId()}-settings-my-sort-item` },\n\t\t\ttext: Loc.getMessage('SN_SPACES_TASKS_SORT_SORTING'),\n\t\t\tclassName: `menu-popup-item-sort-field ${this.#getSelectedClass([KanbanOrder.SORT_ASC, KanbanOrder.SORT_DESC])}`,\n\t\t\tonclick: KanbanSort.getInstance().enableCustomSort,\n\t\t});\n\n\t\tmenuItem.params = hiddenItems;\n\n\t\treturn menuItem;\n\t}\n\n\t#getOrderTitleItem(): MenuItem\n\t{\n\t\tconst menuItem = new MenuItem({\n\t\t\tdataset: { id: `spaces-tasks-${this.#view.getViewId()}-settings-sort-order-title-item` },\n\t\t\thtml: `<b>${Loc.getMessage('SN_SPACES_TASKS_SORT_ORDER_TITLE')}</b>`,\n\t\t\tclassName: 'menu-popup-item menu-popup-no-icon',\n\t\t});\n\n\t\tmenuItem.params = {\n\t\t\ttype: 'sub',\n\t\t};\n\n\t\treturn menuItem;\n\t}\n\n\t#getOrderDescItem(): MenuItem\n\t{\n\t\treturn this.#getOrderItem(KanbanOrder.SORT_DESC);\n\t}\n\n\t#getOrderAscItem(): MenuItem\n\t{\n\t\treturn this.#getOrderItem(KanbanOrder.SORT_ASC);\n\t}\n\n\t#getOrderItem(order: string): MenuItem\n\t{\n\t\tconst menuItem = new MenuItem({\n\t\t\tdataset: { id: `spaces-tasks-${this.#view.getViewId()}-settings-order-${order}-item` },\n\t\t\ttext: Loc.getMessage(`SN_SPACES_TASKS_SORT_${order.toUpperCase()}`),\n\t\t\tclassName: `menu-popup-item-sort-field ${this.#getSelectedClass([order])}`,\n\t\t\tonclick: KanbanSort.getInstance().selectCustomOrder,\n\t\t});\n\n\t\tmenuItem.params = {\n\t\t\ttype: 'sub',\n\t\t\torder,\n\t\t};\n\n\t\treturn menuItem;\n\t}\n\n\t#getSelectedClass(order: string[]): string\n\t{\n\t\tconst classSelected = 'menu-popup-item-accept';\n\t\tconst classDeselected = 'menu-popup-item-none';\n\n\t\treturn order.includes(this.#order) ? classSelected : classDeselected;\n\t}\n}\n\nexport { KanbanOrder, KanbanSortItems };\n","import { MenuItem } from 'main.popup';\nimport { CompleteSprintItem } from '../menu-items/complete-sprint';\nimport { KanbanOrder, KanbanSortItems } from '../menu-items/kanban-sort';\nimport { TasksSettingsMenu } from '../tasks-settings-menu';\n\ntype Params = {\n\tbindElement: HTMLElement,\n\torder: KanbanOrder,\n\tcanCompleteSprint: boolean,\n\tactiveSprintExists: boolean,\n}\n\nexport class ScrumActiveSettings extends TasksSettingsMenu\n{\n\t#order: KanbanOrder;\n\t#canCompleteSprint: boolean;\n\t#activeSprintExists: boolean;\n\n\tconstructor(params: Params)\n\t{\n\t\tsuper(params);\n\n\t\tthis.#order = params.order;\n\t\tthis.#canCompleteSprint = params.canCompleteSprint;\n\t\tthis.#activeSprintExists = params.activeSprintExists;\n\t}\n\n\tgetViewId(): string\n\t{\n\t\treturn 'scrum-active';\n\t}\n\n\tcanCompleteSprint(): boolean\n\t{\n\t\treturn this.#canCompleteSprint && this.#activeSprintExists;\n\t}\n\n\tgetMenuItems(): MenuItem[]\n\t{\n\t\treturn [\n\t\t\tCompleteSprintItem(this),\n\t\t\t...(new KanbanSortItems(this, this.#order)).getItems(),\n\t\t];\n\t}\n}\n","import { Loc } from 'main.core';\nimport { MenuItem } from 'main.popup';\nimport { ScrumCompleteSettings } from '../scrum/scrum-complete-settings';\n\nexport const BurnDownItem: MenuItem = (view: ScrumCompleteSettings) => new MenuItem({\n\tdataset: {\n\t\tid: `spaces-tasks-${view.getViewId()}-settings-burn-down`,\n\t},\n\ttext: Loc.getMessage('SN_SPACES_TASKS_SCRUM_SETTINGS_BURN_DOWN'),\n\tonclick: () => {\n\t\tview.close();\n\t\tview.emit('showBurnDown');\n\t},\n});\n","import { MenuItem } from 'main.popup';\nimport { BurnDownItem } from '../menu-items/burn-down';\nimport { TasksSettingsMenu } from '../tasks-settings-menu';\n\nexport class ScrumCompleteSettings extends TasksSettingsMenu\n{\n\tgetViewId(): string\n\t{\n\t\treturn 'scrum-complete';\n\t}\n\n\tgetMenuItems(): MenuItem[]\n\t{\n\t\treturn [\n\t\t\tBurnDownItem(this),\n\t\t];\n\t}\n}\n","import { Loc } from 'main.core';\nimport { MenuItem } from 'main.popup';\nimport { TasksSettingsMenu } from '../tasks-settings-menu';\n\nconst PriorityItem: MenuItem = (view: TasksSettingsMenu, priority: string, isActive: boolean) => {\n\tconst menuItem = new MenuItem({\n\t\tdataset: { id: `spaces-tasks-${view.getViewId()}-settings-priority-${priority}` },\n\t\tclassName: isActive ? 'menu-popup-item-accept' : 'menu-popup-item-none',\n\t\ttext: Loc.getMessage(`SN_SPACES_TASKS_SCRUM_SETTINGS_${priority.toUpperCase()}`),\n\t\tonclick: () => BX.Tasks.Scrum.Entry.setDisplayPriority(document.querySelector(`[data-id=${menuItem.dataset.id}`), priority),\n\t});\n\n\treturn menuItem;\n};\n\nexport const PriorityItems: MenuItem[] = (view: TasksSettingsMenu, priority: string) => [\n\tPriorityItem(view, 'backlog', priority === 'backlog'),\n\tPriorityItem(view, 'sprint', priority === 'sprint'),\n];\n","import { MenuItem } from 'main.popup';\nimport { ReadAllItem } from '../menu-items/read-all';\nimport { PriorityItems } from '../menu-items/priority';\nimport { TasksSettingsMenu } from '../tasks-settings-menu';\n\ntype Params = {\n\tbindElement: HTMLElement,\n\tdisplayPriority: string,\n}\n\nexport class ScrumPlanSettings extends TasksSettingsMenu\n{\n\t#displayPriority: string;\n\n\tconstructor(params: Params)\n\t{\n\t\tsuper(params);\n\n\t\tthis.#displayPriority = params.displayPriority;\n\t}\n\n\tgetViewId(): string\n\t{\n\t\treturn 'scrum-plan';\n\t}\n\n\tgetMenuItems(): MenuItem[]\n\t{\n\t\treturn [\n\t\t\tReadAllItem(this, true),\n\t\t\t{\n\t\t\t\tdelimiter: true,\n\t\t\t},\n\t\t\t...PriorityItems(this, this.#displayPriority),\n\t\t];\n\t}\n}\n","import { EventEmitter } from 'main.core.events';\nimport { KanbanOrder } from '../menu-items/kanban-order';\nimport { TasksSettingsMenu } from '../tasks-settings-menu';\nimport { TasksView } from '../tasks-view';\nimport { ScrumActiveSettings } from './scrum-active-settings';\nimport { ScrumCompleteSettings } from './scrum-complete-settings';\nimport { ScrumPlanSettings } from './scrum-plan-settings';\n\ntype Params = {\n\tbindElement: HTMLElement,\n\tdisplayPriority: string,\n\ttasksView: TasksView,\n\torder: KanbanOrder,\n\tcanCompleteSprint: boolean,\n\tactiveSprintExists: boolean,\n}\n\nexport class ScrumSettings extends EventEmitter\n{\n\t#settings: TasksSettingsMenu;\n\n\t#tasksView: TasksView;\n\n\tconstructor(params: Params)\n\t{\n\t\tsuper();\n\n\t\tthis.setEventNamespace('BX.Socialnetwork.Spaces.TasksScrumSettings');\n\n\t\tthis.#tasksView = params.tasksView;\n\n\t\tthis.#createSettings(params);\n\t}\n\n\tshow(): void\n\t{\n\t\tthis.#settings.show();\n\t}\n\n\t#createSettings(params: Params): void\n\t{\n\t\tswitch (this.#tasksView.getCurrentViewMode())\n\t\t{\n\t\t\tcase 'plan':\n\t\t\t\tthis.#settings = new ScrumPlanSettings(params);\n\t\t\t\tthis.#settings.subscribe('realAll', () => this.emit('realAll'));\n\t\t\t\tbreak;\n\t\t\tcase 'active':\n\t\t\t\tthis.#settings = new ScrumActiveSettings(params);\n\t\t\t\tthis.#settings.subscribe('completeSprint', () => this.emit('completeSprint'));\n\t\t\t\tbreak;\n\t\t\tcase 'complete':\n\t\t\t\tthis.#settings = new ScrumCompleteSettings(params);\n\t\t\t\tthis.#settings.subscribe('showBurnDown', () => this.emit('showBurnDown'));\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t}\n}\n","import { TasksSettingsMenu } from '../tasks-settings-menu';\n\nexport class GroupCalendarSettings extends TasksSettingsMenu\n{\n\tgetViewId(): string\n\t{\n\t\treturn 'group-calendar';\n\t}\n}\n","type Params = {\n\tpathToTasks: string,\n}\n\nexport class TasksExcelManager\n{\n\t#pathToTasks: number;\n\n\tconstructor(params: Params)\n\t{\n\t\tthis.#pathToTasks = params?.pathToTasks;\n\t}\n\n\t/**\n\t * @param options {{isAll: boolean}}\n\t */\n\tgetExportHref(options = {}): string\n\t{\n\t\tlet href = `${this.#pathToTasks}?F_STATE=sV80&EXPORT_AS=EXCEL&ncc=1`;\n\t\tif (options.isAll)\n\t\t{\n\t\t\thref += '&COLUMNS=ALL';\n\t\t}\n\n\t\treturn href;\n\t}\n\n\tgetImportHref(): string\n\t{\n\t\treturn `${this.#pathToTasks}import/`;\n\t}\n}\n","import { Loc } from 'main.core';\nimport { TasksExcelManager } from '../tasks-excel-manager';\nimport { TasksSettingsMenu } from '../tasks-settings-menu';\nimport { MenuItem } from 'main.popup';\n\nexport const ExportItem: MenuItem = (view: TasksSettingsMenu, excelManager: TasksExcelManager) => {\n\treturn {\n\t\tdataset: { id: `spaces-tasks-${view.getViewId()}-settings-export-list` },\n\t\ttext: Loc.getMessage('SN_SPACES_TASKS_EXPORT_LIST'),\n\t\tclassName: 'menu-popup-item-none',\n\t\titems: [\n\t\t\t{\n\t\t\t\tdataset: { id: `spaces-tasks-${view.getViewId()}-settings-to-excel` },\n\t\t\t\ttext: Loc.getMessage('SN_SPACES_TASKS_EXPORT_TO_EXCEL'),\n\t\t\t\tclassName: 'sn-spaces-tasks-icon-excel',\n\t\t\t\thref: excelManager.getExportHref(),\n\t\t\t},\n\t\t],\n\t};\n};\n","import { Loc, Dom } from 'main.core';\nimport { TasksSettingsMenu } from '../tasks-settings-menu';\nimport { MenuItem } from 'main.popup';\nimport { EventEmitter } from 'main.core.events';\n\ntype Params = {\n\tshouldSubtasksBeGrouped: boolean,\n\tuserId: number,\n}\n\nexport const GroupSubtasksItem: MenuItem = (view: TasksSettingsMenu, params: Params) => {\n\tlet shouldSubtasksBeGrouped = params.shouldSubtasksBeGrouped;\n\n\treturn new MenuItem({\n\t\tdataset: { id: `spaces-tasks-${view.getViewId()}-settings-group-subtasks` },\n\t\ttext: Loc.getMessage('SN_SPACES_TASKS_GROUP_SUBTASKS'),\n\t\tclassName: (shouldSubtasksBeGrouped ? 'menu-popup-item-accept' : 'menu-popup-item-none'),\n\t\tonclick: (event, item) => {\n\t\t\tBX.ajax.runComponentAction('bitrix:tasks.interface.filter', 'toggleGroupByTasks', {\n\t\t\t\tmode: 'class',\n\t\t\t\tdata: {\n\t\t\t\t\tuserId: params.userId,\n\t\t\t\t},\n\t\t\t}).then((response) => {\n\t\t\t\tif (response.status !== 'success')\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tDom.toggleClass(item.layout.item, ['menu-popup-item-accept', 'menu-popup-item-none']);\n\n\t\t\t\tif (BX.Main.gridManager)\n\t\t\t\t{\n\t\t\t\t\tshouldSubtasksBeGrouped = !shouldSubtasksBeGrouped;\n\t\t\t\t\tconst gridInstance = BX.Main.gridManager.data[0].instance;\n\t\t\t\t\tgridInstance.reloadTable();\n\t\t\t\t\tEventEmitter.emit('BX.Tasks.Filter.group', [gridInstance, 'groupBySubTasks', shouldSubtasksBeGrouped]);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\twindow.location.reload();\n\t\t\t\t}\n\t\t\t}, (error) => {\n\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\tconsole.log(error);\n\t\t\t});\n\t\t},\n\t});\n};\n","import { Loc } from 'main.core';\nimport { TasksSettingsMenu } from '../tasks-settings-menu';\nimport { MenuItem } from 'main.popup';\nimport { TasksExcelManager } from '../tasks-excel-manager';\n\nexport const ImportCsvItem: MenuItem = (view: TasksSettingsMenu, excelManager: TasksExcelManager) => {\n\treturn {\n\t\tdataset: { id: `spaces-tasks-${view.getViewId()}-settings-import` },\n\t\ttext: Loc.getMessage('SN_SPACES_TASKS_IMPORT_LIST'),\n\t\tclassName: 'menu-popup-item-none',\n\t\titems: [\n\t\t\t{\n\t\t\t\tdataset: { id: `spaces-tasks-${view.getViewId()}-settings-import-csv` },\n\t\t\t\ttext: Loc.getMessage('SN_SPACES_TASKS_IMPORT_LIST_CSV'),\n\t\t\t\tclassName: 'sn-spaces-tasks-icon-excel',\n\t\t\t\thref: excelManager.getImportHref(),\n\t\t\t\tonclick: () => view.close(),\n\t\t\t},\n\t\t],\n\t};\n};\n","type Params = {\n\tgridId: string,\n}\n\ntype TaskSort = {\n\tfield: string,\n\tdirection: string,\n}\n\nexport class TasksSortManager\n{\n\t#gridId: string;\n\n\tconstructor(params: Params)\n\t{\n\t\tthis.#gridId = params.gridId;\n\t}\n\n\tsetSort(taskSort: TaskSort)\n\t{\n\t\tconst field = taskSort.field;\n\t\tconst dir = taskSort.direction || 'asc';\n\n\t\tif (BX.Main.gridManager === undefined)\n\t\t{\n\t\t\tBX.ajax.post(\n\t\t\t\tBX.util.add_url_param('/bitrix/components/bitrix/main.ui.grid/settings.ajax.php', {\n\t\t\t\t\tGRID_ID: this.#gridId,\n\t\t\t\t\taction: 'setSort',\n\t\t\t\t}),\n\t\t\t\t{\n\t\t\t\t\tby: field,\n\t\t\t\t\torder: dir,\n\t\t\t\t},\n\t\t\t\t(res) => {\n\t\t\t\t\ttry\n\t\t\t\t\t{\n\t\t\t\t\t\tres = JSON.parse(res);\n\n\t\t\t\t\t\tif (!res.error)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\twindow.location.reload();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tcatch (err)\n\t\t\t\t\t{\n\t\t\t\t\t\tconsole.log(err);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tconst grid = BX.Main.gridManager.getById(this.#gridId).instance;\n\t\t\tgrid.sortByColumn({ sort_by: field, sort_order: dir });\n\n\t\t\tif (field === 'SORTING')\n\t\t\t{\n\t\t\t\tgrid.getRows().enableDragAndDrop();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tgrid.getRows().disableDragAndDrop();\n\t\t\t}\n\t\t}\n\t}\n}\n","import { Loc, Dom } from 'main.core';\nimport { BaseEvent } from 'main.core.events';\nimport { MenuItem } from 'main.popup';\nimport { Label, LabelColor } from 'ui.label';\nimport { TasksSettingsMenu } from '../tasks-settings-menu';\nimport { TasksSortManager } from '../tasks-sort-manager';\n\ntype TaskSort = {\n\tfield: string,\n\tdirection: string,\n}\n\ntype Params = {\n\tsortFields: string[],\n\ttaskSort: TaskSort,\n\tsortManager: TasksSortManager,\n}\n\nconst classSelected = 'menu-popup-item-accept';\nconst classSortField = 'menu-popup-item-sort-field';\nconst classSortDir = 'menu-popup-item-sort-dir';\n\nclass SortItem\n{\n\t#params: Params;\n\t#view: TasksSettingsMenu;\n\t#menuItems: MenuItem[];\n\n\tconstructor(view: TasksSettingsMenu, params: Params)\n\t{\n\t\tthis.#view = view;\n\t\tthis.#params = params;\n\t}\n\n\tgetItem(): MenuItem\n\t{\n\t\treturn {\n\t\t\tdataset: { id: `spaces-tasks-${this.#view.getViewId()}-settings-sort` },\n\t\t\ttext: Loc.getMessage('SN_SPACES_TASKS_SORT'),\n\t\t\tclassName: 'menu-popup-item-none menu-popup-sort',\n\t\t\tevents: {\n\t\t\t\tonSubMenuShow: (event: BaseEvent) => {\n\t\t\t\t\tthis.#menuItems = event.target.getSubMenu().getMenuItems();\n\t\t\t\t\tthis.#updateStyles(this.#menuItems);\n\t\t\t\t},\n\t\t\t},\n\t\t\titems: this.#getMenuItems(),\n\t\t};\n\t}\n\n\t#getMenuItems(): MenuItem[]\n\t{\n\t\treturn [\n\t\t\t...this.#params.sortFields.flatMap(this.#getFieldItem.bind(this)),\n\t\t\tnew MenuItem({\n\t\t\t\tid: 'delimiterDir',\n\t\t\t\tdelimiter: true,\n\t\t\t}),\n\t\t\tthis.#getDirectionItem('asc'),\n\t\t\tthis.#getDirectionItem('desc'),\n\t\t];\n\t}\n\n\t#getFieldItem(field: string): MenuItem\n\t{\n\t\tconst isActivityField = field === 'ACTIVITY_DATE';\n\n\t\tconst menuItem = new MenuItem({\n\t\t\tdataset: { id: `spaces-tasks-${this.#view.getViewId()}-settings-sort-${field}` },\n\t\t\thtml: `\n\t\t\t\t${Loc.getMessage(`SN_SPACES_TASKS_SORT_${field}`)}\n\t\t\t\t${isActivityField ? `<span style=\"margin-left: 5px\">${this.#getRecommendedLabel()}</span>` : ''}\n\t\t\t`,\n\t\t\tvalue: field,\n\t\t\tclassName: `${classSortField} menu-popup-item-none`,\n\t\t\tonclick: (event, item) => {\n\t\t\t\tthis.#onMenuItemClick('field', item);\n\t\t\t},\n\t\t});\n\n\t\tif (isActivityField)\n\t\t{\n\t\t\treturn [new MenuItem({ delimiter: true }), menuItem, new MenuItem({ delimiter: true })];\n\t\t}\n\n\t\treturn menuItem;\n\t}\n\n\t#getDirectionItem(direction: string): MenuItem\n\t{\n\t\treturn new MenuItem({\n\t\t\tdataset: { id: `spaces-tasks-${this.#view.getViewId()}-settings-sort-${direction}` },\n\t\t\ttext: Loc.getMessage(`SN_SPACES_TASKS_SORT_BY_${direction.toUpperCase()}`),\n\t\t\tclassName: `${classSortDir} menu-popup-item-none`,\n\t\t\tvalue: direction,\n\t\t\tonclick: (event, item) => {\n\t\t\t\tthis.#onMenuItemClick('dir', item);\n\t\t\t},\n\t\t});\n\t}\n\n\t#getRecommendedLabel(): string\n\t{\n\t\treturn new Label(\n\t\t\t{\n\t\t\t\ttext: Loc.getMessage('SN_SPACES_TASKS_SORT_RECOMMENDED_LABEL').toUpperCase(),\n\t\t\t\tcolor: LabelColor.LIGHT_BLUE,\n\t\t\t\tfill: true,\n\t\t\t\tsize: 'ui-label-xs',\n\t\t\t},\n\t\t).render().outerHTML;\n\t}\n\n\t#onMenuItemClick(selectedItemType, selectedItem)\n\t{\n\t\tif (selectedItemType === 'field')\n\t\t{\n\t\t\tthis.#params.taskSort.field = selectedItem.value;\n\t\t}\n\t\telse if (selectedItemType === 'dir')\n\t\t{\n\t\t\tthis.#params.taskSort.direction = selectedItem.value;\n\t\t}\n\n\t\tthis.#params.sortManager.setSort(this.#params.taskSort);\n\n\t\tthis.#updateStyles(this.#menuItems);\n\t}\n\n\t#updateStyles(menuItems: MenuItem[])\n\t{\n\t\tmenuItems.forEach((item: MenuItem) => {\n\t\t\tthis.#updateStyle(item, this.#params.taskSort);\n\t\t});\n\t}\n\n\t#updateStyle(item: MenuItem, taskSort: TaskSort)\n\t{\n\t\tconst itemNode = item.getContainer();\n\n\t\tconst isFieldItem = Dom.hasClass(itemNode, classSortField);\n\t\tconst isDirectionItem = Dom.hasClass(itemNode, classSortDir) || item.getId() === 'delimiterDir';\n\n\t\tconst isFieldSelected = isFieldItem && taskSort.field === item.value;\n\t\tconst isDirectionSelected = isDirectionItem && taskSort.direction === item.value;\n\t\tif (isFieldSelected || isDirectionSelected)\n\t\t{\n\t\t\tDom.addClass(itemNode, classSelected);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.removeClass(itemNode, classSelected);\n\t\t}\n\n\t\tif (taskSort.field === 'SORTING' && isDirectionItem)\n\t\t{\n\t\t\tDom.style(itemNode, 'display', 'none');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.style(itemNode, 'display', '');\n\t\t}\n\t}\n}\n\nexport { SortItem };\n","import { Loc } from 'main.core';\nimport { TasksSettingsMenu } from '../tasks-settings-menu';\nimport { MenuItem } from 'main.popup';\n\nexport const SyncItem: MenuItem = (view: TasksSettingsMenu, syncScript: string) => {\n\treturn {\n\t\tdataset: {\n\t\t\tid: `spaces-tasks-${view.getViewId()}-settings-sync`,\n\t\t},\n\t\ttext: Loc.getMessage('SN_SPACES_TASKS_SYNC_LIST'),\n\t\tclassName: 'menu-popup-item-none',\n\t\titems: [\n\t\t\t{\n\t\t\t\ttext: Loc.getMessage('SN_SPACES_TASKS_SYNC_WITH_OUTLOOK'),\n\t\t\t\tclassName: 'sn-spaces-tasks-icon-outlook',\n\t\t\t\t// eslint-disable-next-line no-eval\n\t\t\t\tonclick: () => eval(syncScript),\n\t\t\t},\n\t\t],\n\t};\n};\n","import { ExportItem } from '../menu-items/export';\nimport { GroupSubtasksItem } from '../menu-items/group-subtasks';\nimport { ImportCsvItem } from '../menu-items/import-csv';\nimport { ReadAllItem } from '../menu-items/read-all';\nimport { SortItem } from '../menu-items/sort';\nimport { SyncItem } from '../menu-items/sync';\nimport { TasksExcelManager } from '../tasks-excel-manager';\nimport { TasksSettingsMenu } from '../tasks-settings-menu';\nimport { TasksSortManager } from '../tasks-sort-manager';\n\ntype Params = {\n\tbindElement: HTMLElement,\n\tpathToTasks: string,\n\tshouldSubtasksBeGrouped: boolean,\n\tuserId: number,\n\tgridId: string,\n\tsortFields: string[],\n\ttaskSort: { field: string, direction: string },\n\tsyncScript: string,\n\tpermissions: any,\n}\n\nexport class GroupGanttSettings extends TasksSettingsMenu\n{\n\t#excelManager: TasksExcelManager;\n\t#sortManager: TasksSortManager;\n\t#params: Params;\n\n\tconstructor(params: Params)\n\t{\n\t\tsuper(params);\n\n\t\tthis.#params = params;\n\n\t\tthis.#excelManager = new TasksExcelManager({\n\t\t\tpathToTasks: params.pathToTasks,\n\t\t});\n\n\t\tthis.#sortManager = new TasksSortManager({\n\t\t\tgridId: params.gridId,\n\t\t});\n\t}\n\n\tgetViewId(): string\n\t{\n\t\treturn 'group-gantt';\n\t}\n\n\tgetMenuItems(): MenuItem[]\n\t{\n\t\tconst menuItems = [\n\t\t\tReadAllItem(this, true),\n\t\t\tGroupSubtasksItem(this, this.#params),\n\t\t\t{\n\t\t\t\tdelimiter: true,\n\t\t\t},\n\t\t\tnew SortItem(this, {\n\t\t\t\tsortFields: this.#params.sortFields,\n\t\t\t\ttaskSort: this.#params.taskSort,\n\t\t\t\tsortManager: this.#sortManager,\n\t\t\t}).getItem(),\n\t\t\t{\n\t\t\t\tdelimiter: true,\n\t\t\t},\n\t\t];\n\n\t\tif (this.#params.permissions.import)\n\t\t{\n\t\t\tmenuItems.push(ImportCsvItem(this, this.#excelManager));\n\t\t}\n\n\t\tif (this.#params.permissions.export)\n\t\t{\n\t\t\tmenuItems.push(ExportItem(this, this.#excelManager));\n\t\t}\n\n\t\tif (this.#params.permissions.import && this.#params.permissions.export)\n\t\t{\n\t\t\tmenuItems.push(SyncItem(this, this.#params.syncScript));\n\t\t}\n\n\t\treturn menuItems;\n\t}\n}\n","import { Loc, Runtime } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { TasksSettingsMenu } from '../tasks-settings-menu';\nimport { MenuItem } from 'main.popup';\n\nexport const ConfigureViewItem: MenuItem = (view: TasksSettingsMenu) => new MenuItem({\n\tdataset: { id: `spaces-tasks-${view.getViewId()}-settings-configure-view` },\n\ttext: Loc.getMessage('SN_SPACES_TASKS_CONFIGURE_VIEW'),\n\tonclick: () => {\n\t\tRuntime.loadExtension('ui.dialogs.checkbox-list').then(() => {\n\t\t\tview.close();\n\t\t\tEventEmitter.emit('tasks-kanban-settings-fields-view');\n\t\t});\n\t},\n});\n","import { MenuItem } from 'main.popup';\nimport { ConfigureViewItem } from '../menu-items/configure-view';\nimport { KanbanOrder, KanbanSortItems } from '../menu-items/kanban-sort';\nimport { ReadAllItem } from '../menu-items/read-all';\nimport { TasksSettingsMenu } from '../tasks-settings-menu';\n\ntype Params = {\n\tbindElement: HTMLElement,\n\torder: KanbanOrder,\n}\n\nexport class GroupKanbanSettings extends TasksSettingsMenu\n{\n\t#order: KanbanOrder;\n\n\tconstructor(params: Params)\n\t{\n\t\tsuper(params);\n\n\t\tthis.#order = params.order;\n\t}\n\n\tgetViewId(): string\n\t{\n\t\treturn 'group-kanban';\n\t}\n\n\tgetMenuItems(): MenuItem[]\n\t{\n\t\treturn [\n\t\t\tReadAllItem(this),\n\t\t\t...(new KanbanSortItems(this, this.#order)).getItems(),\n\t\t\tConfigureViewItem(this),\n\t\t];\n\t}\n}\n","import { Loc } from 'main.core';\nimport { TasksExcelManager } from '../tasks-excel-manager';\nimport { TasksSettingsMenu } from '../tasks-settings-menu';\nimport { MenuItem } from 'main.popup';\n\nexport const ExportExcelItem: MenuItem = (view: TasksSettingsMenu, excelManager: TasksExcelManager) => {\n\treturn {\n\t\tdataset: { id: `spaces-tasks-${view.getViewId()}-settings-export-excel` },\n\t\ttext: Loc.getMessage('SN_SPACES_TASKS_EXPORT_LIST_TO_EXCEL'),\n\t\tclassName: 'menu-popup-item-none',\n\t\titems: [\n\t\t\t{\n\t\t\t\tdataset: { id: `spaces-tasks-${view.getViewId()}-settings-export-excel-grid-fields` },\n\t\t\t\ttext: Loc.getMessage('SN_SPACES_TASKS_EXPORT_GRID_FIELDS'),\n\t\t\t\tclassName: 'sn-spaces-tasks-icon-excel',\n\t\t\t\thref: excelManager.getExportHref(),\n\t\t\t},\n\t\t\t{\n\t\t\t\tdataset: { id: `spaces-tasks-${view.getViewId()}-settings-export-excel-all-fields` },\n\t\t\t\ttext: Loc.getMessage('SN_SPACES_TASKS_EXPORT_ALL_FIELDS'),\n\t\t\t\tclassName: 'sn-spaces-tasks-icon-excel',\n\t\t\t\thref: excelManager.getExportHref({ isAll: true }),\n\t\t\t},\n\t\t],\n\t};\n};\n","import { ExportItem } from '../menu-items/export';\nimport { ExportExcelItem } from '../menu-items/export-excel';\nimport { GroupSubtasksItem } from '../menu-items/group-subtasks';\nimport { ImportCsvItem } from '../menu-items/import-csv';\nimport { ReadAllItem } from '../menu-items/read-all';\nimport { SortItem } from '../menu-items/sort';\nimport { SyncItem } from '../menu-items/sync';\nimport { TasksExcelManager } from '../tasks-excel-manager';\nimport { TasksSettingsMenu } from '../tasks-settings-menu';\nimport { TasksSortManager } from '../tasks-sort-manager';\n\ntype Params = {\n\tbindElement: HTMLElement,\n\tpathToTasks: string,\n\tshouldSubtasksBeGrouped: boolean,\n\tuserId: number,\n\tgridId: string,\n\tsortFields: string[],\n\ttaskSort: { field: string, direction: string },\n\tsyncScript: string,\n\tpermissions: any,\n}\n\nexport class GroupListSettings extends TasksSettingsMenu\n{\n\t#excelManager: TasksExcelManager;\n\t#sortManager: TasksSortManager;\n\t#params: Params;\n\n\tconstructor(params: Params)\n\t{\n\t\tsuper(params);\n\n\t\tthis.#params = params;\n\n\t\tthis.#excelManager = new TasksExcelManager({\n\t\t\tpathToTasks: params.pathToTasks,\n\t\t});\n\n\t\tthis.#sortManager = new TasksSortManager({\n\t\t\tgridId: params.gridId,\n\t\t});\n\t}\n\n\tgetViewId(): string\n\t{\n\t\treturn 'group-list';\n\t}\n\n\tgetMenuItems(): MenuItem[]\n\t{\n\t\tconst menuItems = [\n\t\t\tReadAllItem(this, true),\n\t\t\tGroupSubtasksItem(this, this.#params),\n\t\t\t{\n\t\t\t\tdelimiter: true,\n\t\t\t},\n\t\t\tnew SortItem(this, {\n\t\t\t\tsortFields: this.#params.sortFields,\n\t\t\t\ttaskSort: this.#params.taskSort,\n\t\t\t\tsortManager: this.#sortManager,\n\t\t\t}).getItem(),\n\t\t\t{\n\t\t\t\tdelimiter: true,\n\t\t\t},\n\t\t];\n\n\t\tif (this.#params.permissions.import)\n\t\t{\n\t\t\tmenuItems.push(ImportCsvItem(this, this.#excelManager));\n\t\t}\n\n\t\tif (this.#params.permissions.export)\n\t\t{\n\t\t\tmenuItems.push(ExportExcelItem(this, this.#excelManager));\n\t\t}\n\n\t\tif (this.#params.permissions.import && this.#params.permissions.export)\n\t\t{\n\t\t\tmenuItems.push(SyncItem(this, this.#params.syncScript));\n\t\t}\n\n\t\treturn menuItems;\n\t}\n}\n","import { EventEmitter } from 'main.core.events';\nimport { TasksSettingsMenu } from '../tasks-settings-menu';\nimport { TasksView } from '../tasks-view';\nimport { GroupCalendarSettings } from './group-calendar-settings';\nimport { GroupGanttSettings } from './group-gantt-settings';\nimport { GroupKanbanSettings } from './group-kanban-settings';\nimport { GroupListSettings } from './group-list-settings';\n\ntype Params = {\n\tbindElement: HTMLElement,\n\ttasksView: TasksView,\n\tpathToTasks: string,\n\torder: string,\n\tshouldSubtasksBeGrouped: boolean,\n\tuserId: number,\n\tgridId: string,\n\tsortFields: string[],\n\ttaskSort: { field: string, direction: string },\n\tsyncScript: string,\n\tpermissions: any,\n}\n\nexport class GroupSettings extends EventEmitter\n{\n\t#tasksView: TasksView;\n\t#settings: TasksSettingsMenu;\n\n\tconstructor(params: Params)\n\t{\n\t\tsuper();\n\n\t\tthis.setEventNamespace('BX.Socialnetwork.Spaces.TasksGroupSettings');\n\n\t\tthis.#tasksView = params.tasksView;\n\n\t\tthis.#createSettings(params);\n\t}\n\n\tshow(): void\n\t{\n\t\tthis.#settings.show();\n\t}\n\n\t#createSettings(params: Params): Menu\n\t{\n\t\tswitch (this.#tasksView.getCurrentViewMode())\n\t\t{\n\t\t\tcase 'list':\n\t\t\t\tthis.#settings = new GroupListSettings(params);\n\t\t\t\tbreak;\n\t\t\tcase 'kanban':\n\t\t\tcase 'plan':\n\t\t\tcase 'timeline':\n\t\t\t\tthis.#settings = new GroupKanbanSettings(params);\n\t\t\t\tbreak;\n\t\t\tcase 'calendar':\n\t\t\t\tthis.#settings = new GroupCalendarSettings(params);\n\t\t\t\tbreak;\n\t\t\tcase 'gantt':\n\t\t\t\tthis.#settings = new GroupGanttSettings(params);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\treturn;\n\t\t}\n\n\t\tthis.#settings.subscribe('realAll', () => this.emit('realAll'));\n\t}\n}\n","import { Event, Tag, Text } from 'main.core';\nimport { BaseEvent } from 'main.core.events';\nimport { Dialog } from 'ui.entity-selector';\nimport { TasksRouter } from './tasks-router';\n\ntype Params = {\n\tgroupId: number,\n\tpathToScrumBurnDown: string,\n\trouter: TasksRouter,\n\tcurrentCompletedSprint: CurrentCompletedSprint,\n}\n\nexport type CurrentCompletedSprint = {\n\tid: number,\n\tselectorLabel: string,\n}\n\nexport class TasksScrum\n{\n\t#groupId: number;\n\t#pathToScrumBurnDown: string;\n\t#router: TasksRouter;\n\n\t#currentCompletedSprint: CurrentCompletedSprint;\n\n\t#layout: {\n\t\tselector: HTMLElement;\n\t\tselectorLabel: HTMLElement;\n\t};\n\n\tconstructor(params: Params)\n\t{\n\t\tthis.#groupId = params.groupId;\n\t\tthis.#pathToScrumBurnDown = params.pathToScrumBurnDown;\n\t\tthis.#router = params.router;\n\t\tthis.#currentCompletedSprint = params.currentCompletedSprint;\n\n\t\tthis.#layout = {};\n\t}\n\n\trenderSprintSelector(): HTMLElement\n\t{\n\t\tconst { selector, selectorLabel } = Tag.render`\n\t\t\t<div\n\t\t\t\tref=\"selector\"\n\t\t\t\n\t\t\t\tclass=\"ui-btn ui-btn-light ui-btn-sm ui-btn-round ui-btn-no-caps ui-btn-themes sn-spaces__toolbar-space_btn-options\"\n\t\t\t>\n\t\t\t\t<span class=\"sn-spaces__toolbar-space_btn-text\" ref=\"selectorLabel\">\n\t\t\t\t\t${Text.encode(this.#currentCompletedSprint.selectorLabel)}\n\t\t\t\t</span>\n\t\t\t\t<div class=\"ui-icon-set --chevron-down\" style=\"--ui-icon-set__icon-size: 19px;\"></div>\n\t\t\t</div>\n\t\t`;\n\n\t\tthis.#layout.selector = selector;\n\t\tthis.#layout.selectorLabel = selectorLabel;\n\n\t\tEvent.bind(selector, 'click', this.#showSprintSelector.bind(this, selector));\n\n\t\treturn selector;\n\t}\n\n\tshowCompletionForm()\n\t{\n\t\tconst extensionName = 'Sprint-Completion-Form';\n\t\t// eslint-disable-next-line promise/catch-or-return\n\t\tthis.#router.showByExtension(\n\t\t\t`tasks.scrum.${extensionName.toLowerCase()}`,\n\t\t\textensionName,\n\t\t\t{ groupId: this.#groupId },\n\t\t)\n\t\t\t.then((extension) => {\n\t\t\t\tif (extension)\n\t\t\t\t{\n\t\t\t\t\textension.subscribe('afterComplete', () => {\n\t\t\t\t\t\tthis.#router.redirectToScrumView('plan');\n\t\t\t\t\t});\n\t\t\t\t\textension.subscribe('taskClick', (baseEvent: BaseEvent) => {\n\t\t\t\t\t\tthis.#router.showTask(baseEvent.getData());\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t})\n\t\t;\n\t}\n\n\tshowBurnDown()\n\t{\n\t\tthis.#router.showSidePanel(\n\t\t\tthis.#pathToScrumBurnDown.replace('#sprint_id#', this.#currentCompletedSprint.id),\n\t\t);\n\t}\n\n\t#showSprintSelector(selectorNode: HTMLElement)\n\t{\n\t\tconst dialog = new Dialog({\n\t\t\ttargetNode: selectorNode,\n\t\t\twidth: 400,\n\t\t\theight: 300,\n\t\t\tmultiple: false,\n\t\t\tdropdownMode: true,\n\t\t\tenableSearch: true,\n\t\t\tcompactView: true,\n\t\t\tshowAvatars: false,\n\t\t\tcacheable: false,\n\t\t\tpreselectedItems: [['sprint-selector', this.#currentCompletedSprint.id]],\n\t\t\tentities: [\n\t\t\t\t{\n\t\t\t\t\tid: 'sprint-selector',\n\t\t\t\t\toptions: {\n\t\t\t\t\t\tgroupId: this.#groupId,\n\t\t\t\t\t\tonlyCompleted: true,\n\t\t\t\t\t},\n\t\t\t\t\tdynamicLoad: true,\n\t\t\t\t\tdynamicSearch: true,\n\t\t\t\t},\n\t\t\t],\n\t\t\tevents: {\n\t\t\t\t'Item:onSelect': (event) => {\n\t\t\t\t\tvar selectedItem = event.getData().item;\n\n\t\t\t\t\tthis.#currentCompletedSprint.id = selectedItem.id;\n\n\t\t\t\t\t// todo change to EventEmitter\n\t\t\t\t\t// eslint-disable-next-line @bitrix24/bitrix24-rules/no-bx\n\t\t\t\t\tBX.onCustomEvent(selectorNode, 'onTasksGroupSelectorChange', [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tid: this.#groupId,\n\t\t\t\t\t\t\tsprintId: selectedItem.id,\n\t\t\t\t\t\t\tname: selectedItem.customData.get('name'),\n\t\t\t\t\t\t},\n\t\t\t\t\t]);\n\n\t\t\t\t\tthis.#layout.selectorLabel.textContent = selectedItem.customData.get('label');\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\n\t\tdialog.show();\n\t}\n}\n","import { TasksSettingsMenu } from '../tasks-settings-menu';\n\nexport class UserCalendarSettings extends TasksSettingsMenu\n{\n\tgetViewId(): string\n\t{\n\t\treturn 'user-calendar';\n\t}\n}\n","import { ExportItem } from '../menu-items/export';\nimport { GroupSubtasksItem } from '../menu-items/group-subtasks';\nimport { ImportCsvItem } from '../menu-items/import-csv';\nimport { ReadAllItem } from '../menu-items/read-all';\nimport { SortItem } from '../menu-items/sort';\nimport { SyncItem } from '../menu-items/sync';\nimport { TasksExcelManager } from '../tasks-excel-manager';\nimport { TasksSettingsMenu } from '../tasks-settings-menu';\nimport { TasksSortManager } from '../tasks-sort-manager';\n\ntype Params = {\n\tbindElement: HTMLElement,\n\tpathToTasks: string,\n\tshouldSubtasksBeGrouped: boolean,\n\tuserId: number,\n\tgridId: string,\n\tsortFields: string[],\n\ttaskSort: { field: string, direction: string },\n\tsyncScript: string,\n\tpermissions: any,\n}\n\nexport class UserGanttSettings extends TasksSettingsMenu\n{\n\t#excelManager: TasksExcelManager;\n\t#sortManager: TasksSortManager;\n\t#params: Params;\n\n\tconstructor(params: Params)\n\t{\n\t\tsuper(params);\n\n\t\tthis.#params = params;\n\n\t\tthis.#excelManager = new TasksExcelManager({\n\t\t\tpathToTasks: params.pathToTasks,\n\t\t});\n\n\t\tthis.#sortManager = new TasksSortManager({\n\t\t\tgridId: params.gridId,\n\t\t});\n\t}\n\n\tgetViewId(): string\n\t{\n\t\treturn 'user-gantt';\n\t}\n\n\tgetMenuItems(): MenuItem[]\n\t{\n\t\tconst menuItems = [\n\t\t\tReadAllItem(this, true),\n\t\t\tGroupSubtasksItem(this, this.#params),\n\t\t\t{\n\t\t\t\tdelimiter: true,\n\t\t\t},\n\t\t\tnew SortItem(this, {\n\t\t\t\tsortFields: this.#params.sortFields,\n\t\t\t\ttaskSort: this.#params.taskSort,\n\t\t\t\tsortManager: this.#sortManager,\n\t\t\t}).getItem(),\n\t\t\t{\n\t\t\t\tdelimiter: true,\n\t\t\t},\n\t\t];\n\n\t\tif (this.#params.permissions.import)\n\t\t{\n\t\t\tmenuItems.push(ImportCsvItem(this, this.#excelManager));\n\t\t}\n\n\t\tif (this.#params.permissions.export)\n\t\t{\n\t\t\tmenuItems.push(ExportItem(this, this.#excelManager));\n\t\t}\n\n\t\tif (this.#params.permissions.import && this.#params.permissions.export)\n\t\t{\n\t\t\tmenuItems.push(SyncItem(this, this.#params.syncScript));\n\t\t}\n\n\t\treturn menuItems;\n\t}\n}\n","import { MenuItem } from 'main.popup';\nimport { ConfigureViewItem } from '../menu-items/configure-view';\nimport { KanbanOrder, KanbanSortItems } from '../menu-items/kanban-sort';\nimport { ReadAllItem } from '../menu-items/read-all';\nimport { TasksSettingsMenu } from '../tasks-settings-menu';\n\ntype Params = {\n\tbindElement: HTMLElement,\n\torder: KanbanOrder,\n}\n\nexport class UserKanbanSettings extends TasksSettingsMenu\n{\n\t#order: KanbanOrder;\n\n\tconstructor(params: Params)\n\t{\n\t\tsuper(params);\n\n\t\tthis.#order = params.order;\n\t}\n\n\tgetViewId(): string\n\t{\n\t\treturn 'user-kanban';\n\t}\n\n\tgetMenuItems(): MenuItem[]\n\t{\n\t\treturn [\n\t\t\tReadAllItem(this),\n\t\t\t...(new KanbanSortItems(this, this.#order)).getItems(),\n\t\t\tConfigureViewItem(this),\n\t\t];\n\t}\n}\n","import { ExportExcelItem } from '../menu-items/export-excel';\nimport { GroupSubtasksItem } from '../menu-items/group-subtasks';\nimport { ImportCsvItem } from '../menu-items/import-csv';\nimport { ReadAllItem } from '../menu-items/read-all';\nimport { SortItem } from '../menu-items/sort';\nimport { SyncItem } from '../menu-items/sync';\nimport { TasksExcelManager } from '../tasks-excel-manager';\nimport { TasksSettingsMenu } from '../tasks-settings-menu';\nimport { TasksSortManager } from '../tasks-sort-manager';\n\ntype Params = {\n\tbindElement: HTMLElement,\n\tpathToTasks: string,\n\tshouldSubtasksBeGrouped: boolean,\n\tuserId: number,\n\tgridId: string,\n\tsortFields: string[],\n\ttaskSort: { field: string, direction: string },\n\tsyncScript: string,\n\tpermissions: any,\n}\n\nexport class UserListSettings extends TasksSettingsMenu\n{\n\t#excelManager: TasksExcelManager;\n\t#sortManager: TasksSortManager;\n\t#params: Params;\n\n\tconstructor(params: Params)\n\t{\n\t\tsuper(params);\n\n\t\tthis.#params = params;\n\n\t\tthis.#excelManager = new TasksExcelManager({\n\t\t\tpathToTasks: params.pathToTasks,\n\t\t});\n\n\t\tthis.#sortManager = new TasksSortManager({\n\t\t\tgridId: params.gridId,\n\t\t});\n\t}\n\n\tgetViewId(): string\n\t{\n\t\treturn 'user-list';\n\t}\n\n\tgetMenuItems(): MenuItem[]\n\t{\n\t\tconst menuItems = [\n\t\t\tReadAllItem(this, true),\n\t\t\tGroupSubtasksItem(this, this.#params),\n\t\t\t{\n\t\t\t\tdelimiter: true,\n\t\t\t},\n\t\t\tnew SortItem(this, {\n\t\t\t\tsortFields: this.#params.sortFields,\n\t\t\t\ttaskSort: this.#params.taskSort,\n\t\t\t\tsortManager: this.#sortManager,\n\t\t\t}).getItem(),\n\t\t\t{\n\t\t\t\tdelimiter: true,\n\t\t\t},\n\t\t];\n\n\t\tif (this.#params.permissions.import)\n\t\t{\n\t\t\tmenuItems.push(ImportCsvItem(this, this.#excelManager));\n\t\t}\n\n\t\tif (this.#params.permissions.export)\n\t\t{\n\t\t\tmenuItems.push(ExportExcelItem(this, this.#excelManager));\n\t\t}\n\n\t\tif (this.#params.permissions.import && this.#params.permissions.export)\n\t\t{\n\t\t\tmenuItems.push(SyncItem(this, this.#params.syncScript));\n\t\t}\n\n\t\treturn menuItems;\n\t}\n}\n","import { EventEmitter } from 'main.core.events';\nimport { TasksSettingsMenu } from '../tasks-settings-menu';\nimport { TasksView } from '../tasks-view';\nimport { UserCalendarSettings } from './user-calendar-settings';\nimport { UserGanttSettings } from './user-gantt-settings';\nimport { UserKanbanSettings } from './user-kanban-settings';\nimport { UserListSettings } from './user-list-settings';\n\ntype Params = {\n\tbindElement: HTMLElement,\n\ttasksView: TasksView,\n\tpathToTasks: string,\n\torder: string,\n\tshouldSubtasksBeGrouped: boolean,\n\tuserId: number,\n\tgridId: string,\n\tsortFields: string[],\n\ttaskSort: { field: string, direction: string },\n\tsyncScript: string,\n\tpermissions: any,\n}\n\nexport class UserSettings extends EventEmitter\n{\n\t#tasksView: TasksView;\n\t#settings: TasksSettingsMenu;\n\n\tconstructor(params: Params)\n\t{\n\t\tsuper();\n\n\t\tthis.setEventNamespace('BX.Socialnetwork.Spaces.TasksUserSettings');\n\n\t\tthis.#tasksView = params.tasksView;\n\n\t\tthis.#createSettings(params);\n\t}\n\n\tshow(): void\n\t{\n\t\tthis.#settings.show();\n\t}\n\n\t#createSettings(params: Params): Menu\n\t{\n\t\tswitch (this.#tasksView.getCurrentViewMode())\n\t\t{\n\t\t\tcase 'list':\n\t\t\t\tthis.#settings = new UserListSettings(params);\n\t\t\t\tbreak;\n\t\t\tcase 'plan':\n\t\t\tcase 'timeline':\n\t\t\t\tthis.#settings = new UserKanbanSettings(params);\n\t\t\t\tbreak;\n\t\t\tcase 'calendar':\n\t\t\t\tthis.#settings = new UserCalendarSettings(params);\n\t\t\t\tbreak;\n\t\t\tcase 'gantt':\n\t\t\t\tthis.#settings = new UserGanttSettings(params);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\treturn;\n\t\t}\n\n\t\tthis.#settings.subscribe('realAll', () => this.emit('realAll'));\n\t}\n}\n","import { EventEmitter } from 'main.core.events';\nimport { Menu } from 'main.popup';\n\ntype Params = {\n\tbindElement: HTMLElement,\n\tviewList: Array<ViewItem>,\n}\n\nexport type ViewItem = {\n\tid: number,\n\tkey: string,\n\ttitle: string,\n\turlParam: string,\n\turlValue: string,\n}\n\nexport class TasksViewList extends EventEmitter\n{\n\t#menu: Menu;\n\n\tconstructor(params: Params)\n\t{\n\t\tsuper();\n\n\t\tthis.setEventNamespace('BX.Socialnetwork.Spaces.TasksViewList');\n\n\t\tthis.#menu = this.#createMenu(params.bindElement, params.viewList);\n\t}\n\n\tshow(): void\n\t{\n\t\tthis.#menu.toggle();\n\t}\n\n\t#createMenu(bindElement: HTMLElement, viewList: Array<ViewItem>): Menu\n\t{\n\t\tconst menu = new Menu({\n\t\t\tid: 'spaces-tasks-view-list',\n\t\t\tbindElement,\n\t\t\tcloseByEsc: true,\n\t\t});\n\n\t\tviewList.forEach((viewItem: ViewItem) => {\n\t\t\tmenu.addMenuItem({\n\t\t\t\tdataset: { id: `spaces-tasks-${viewItem.key}` },\n\t\t\t\ttext: viewItem.title,\n\t\t\t\tclassName: `sn-spaces-tasks-${viewItem.key}-icon`,\n\t\t\t\tonclick: () => {\n\t\t\t\t\tthis.emit('click', {\n\t\t\t\t\t\turlParam: viewItem.urlParam,\n\t\t\t\t\t\turlValue: viewItem.urlValue,\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t});\n\t\t});\n\n\t\treturn menu;\n\t}\n}\n","import { Cache, Dom, Event, Loc, Tag, Type } from 'main.core';\nimport { BaseEvent } from 'main.core.events';\nimport { ShortView } from 'ui.short-view';\nimport { Counters, TasksCounters } from './tasks-counters';\nimport { Filter } from '../filter';\nimport { TasksRobots } from './tasks-robots';\nimport { TasksRouter } from './tasks-router';\nimport { ScrumSettings } from './scrum/scrum-settings';\nimport { GroupSettings } from './group/group-settings';\nimport { CurrentCompletedSprint, TasksScrum } from './tasks-scrum';\nimport { TasksView } from './tasks-view';\nimport { UserSettings } from './user/user-settings';\nimport { TasksViewList } from './tasks-view-list';\nimport { CreationMenu } from 'tasks.creation-menu';\n\nimport type { ViewItem } from './tasks-view-list';\n\nimport '../css/tasks.css';\n\ntype Params = {\n\tisUserSpace: boolean,\n\tisScrumSpace: boolean,\n\tuserId?: number,\n\tgroupId?: number,\n\tfilterId: string,\n\tfilterContainer: HTMLElement,\n\tfilterRole: string,\n\tcounters: Counters,\n\tviewList: Array<ViewItem>,\n\tpathToGroupTasks?: string,\n\tpathToGroupTasksTask?: string,\n\tpathToAddTask: string,\n\tpathToTemplateList: string,\n\tpathToTasks: string,\n\tdisplayPriority?: string,\n\tisShortView?: 'Y' | 'N',\n\tviewMode: string,\n\torder: string,\n\tshouldSubtasksBeGrouped: boolean,\n\tgridId: string,\n\tsortFields: string[],\n\ttaskSort: { field: string, direction: string },\n\tsyncScript: string,\n\tpermissions: any,\n\tactiveSprintId?: number,\n\ttaskLimitExceeded?: 'Y' | 'N',\n\tcanUseAutomation?: 'Y' | 'N',\n\tcanEditSprint?: 'Y' | 'N',\n\tcurrentCompletedSprint?: CurrentCompletedSprint,\n}\n\nexport class TasksToolbar\n{\n\t#cache = new Cache.MemoryCache();\n\n\t#filter: Filter;\n\t#router: TasksRouter;\n\t#counters: ?TasksCounters;\n\t#tasksView: TasksView;\n\t#tasksScrum: ?TasksScrum;\n\t#tasksViewList: TasksViewList;\n\t#settings: UserSettings | GroupSettings | ScrumSettings;\n\n\tconstructor(params: Params)\n\t{\n\t\tthis.#setParams(params);\n\n\t\tthis.#filter = new Filter({\n\t\t\tfilterId: this.#getParam('filterId'),\n\t\t\tfilterContainer: this.#getParam('filterContainer'),\n\t\t});\n\n\t\tthis.#router = new TasksRouter({\n\t\t\tpathToGroupTasks: this.#getParam('pathToGroupTasks'),\n\t\t\tpathToGroupTasksTask: this.#getParam('pathToGroupTasksTask'),\n\t\t});\n\n\t\tthis.#tasksView = new TasksView({\n\t\t\tisUserSpace: this.#getParam('isUserSpace'),\n\t\t\tisScrumSpace: this.#getParam('isScrumSpace'),\n\t\t\tviewMode: this.#getParam('viewMode'),\n\t\t});\n\n\t\tif (this.#getParam('isScrumSpace'))\n\t\t{\n\t\t\tthis.#tasksScrum = new TasksScrum({\n\t\t\t\tgroupId: this.#getParam('groupId'),\n\t\t\t\tpathToScrumBurnDown: this.#getParam('pathToScrumBurnDown'),\n\t\t\t\trouter: this.#router,\n\t\t\t\tcurrentCompletedSprint: this.#getParam('currentCompletedSprint'),\n\t\t\t});\n\t\t}\n\t}\n\n\trenderAddBtnTo(container: HTMLElement)\n\t{\n\t\tif (!Type.isDomNode(container))\n\t\t{\n\t\t\tthrow new Error('BX.Socialnetwork.Spaces.TasksToolbar: HTMLElement for add btn not found');\n\t\t}\n\n\t\tDom.append(this.#renderAddBtn(), container);\n\t}\n\n\trenderScrumAddBtnTo(container: HTMLElement)\n\t{\n\t\tif (!Type.isDomNode(container))\n\t\t{\n\t\t\tthrow new Error('BX.Socialnetwork.Spaces.TasksToolbar: HTMLElement for add btn not found');\n\t\t}\n\n\t\tDom.append(this.#renderScrumAddBtn(), container);\n\t}\n\n\trenderCountersTo(container: HTMLElement)\n\t{\n\t\tif (!Type.isDomNode(container))\n\t\t{\n\t\t\tthrow new Error('BX.Socialnetwork.Spaces.TasksToolbar: HTMLElement for add btn not found');\n\t\t}\n\n\t\tconst ignoreList = new Set([]);\n\t\tif (this.#getParam('isScrumSpace'))\n\t\t{\n\t\t\tignoreList.add('active');\n\t\t\tignoreList.add('complete');\n\t\t}\n\n\t\tif (ignoreList.has(this.#tasksView.getCurrentViewMode()))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.#counters = new TasksCounters({\n\t\t\tfilter: this.#filter,\n\t\t\tfilterRole: this.#getParam('filterRole'),\n\t\t\tuserId: this.#getParam('userId'),\n\t\t\tgroupId: this.#getParam('groupId'),\n\t\t\tcounters: this.#getParam('counters'),\n\t\t\tisUserSpace: this.#getParam('isUserSpace'),\n\t\t\tisScrumSpace: this.#getParam('isScrumSpace'),\n\t\t\ttasksView: this.#tasksView,\n\t\t});\n\n\t\tDom.append(this.#counters.render(), container);\n\t}\n\n\trenderViewBtnTo(container: HTMLElement)\n\t{\n\t\tif (!Type.isDomNode(container))\n\t\t{\n\t\t\tthrow new Error('BX.Socialnetwork.Spaces.TasksToolbar: HTMLElement for view btn not found');\n\t\t}\n\n\t\tDom.append(this.#renderViewBtn(), container);\n\t}\n\n\trenderScrumShortView(container: HTMLElement)\n\t{\n\t\tif (!Type.isDomNode(container))\n\t\t{\n\t\t\tthrow new Error('BX.Socialnetwork.Spaces.TasksToolbar: HTMLElement for short view btn not found');\n\t\t}\n\n\t\tconst shortView = new ShortView({\n\t\t\tisShortView: this.#getParam('isShortView'),\n\t\t});\n\n\t\tshortView.renderTo(container);\n\t\tshortView.subscribe('change', (baseEvent: BaseEvent) => {\n\t\t\tBX.Tasks.Scrum.Entry.changeShortView(baseEvent.getData());\n\t\t});\n\t}\n\n\trenderScrumSprintSelector(container: HTMLElement)\n\t{\n\t\tif (!Type.isDomNode(container))\n\t\t{\n\t\t\tthrow new Error('BX.Socialnetwork.Spaces.TasksToolbar: HTMLElement for sprint selector not found');\n\t\t}\n\n\t\tDom.append(this.#tasksScrum.renderSprintSelector(), container);\n\t}\n\n\trenderScrumRobots(container: HTMLElement)\n\t{\n\t\tif (!Type.isDomNode(container))\n\t\t{\n\t\t\tthrow new Error('BX.Socialnetwork.Spaces.TasksToolbar: HTMLElement for robots btn not found');\n\t\t}\n\n\t\tif (this.#getParam('activeSprintId') > 0 && this.#getParam('canEditSprint') === 'Y')\n\t\t{\n\t\t\tconst tasksRobots = new TasksRobots({\n\t\t\t\tgroupId: this.#getParam('groupId'),\n\t\t\t\tisTaskLimitsExceeded: this.#getParam('isTaskLimitsExceeded'),\n\t\t\t\tcanUseAutomation: this.#getParam('canUseAutomation'),\n\t\t\t\tsourceAnalytics: 'scrumActiveSprint',\n\t\t\t});\n\n\t\t\tDom.append(tasksRobots.renderBtn(), container);\n\t\t}\n\t}\n\n\trenderSettingsBtnTo(container: HTMLElement)\n\t{\n\t\tif (!Type.isDomNode(container))\n\t\t{\n\t\t\tthrow new Error('BX.Socialnetwork.Spaces.TasksToolbar: HTMLElement for settings btn not found');\n\t\t}\n\n\t\tconst ignoreList = new Set([]);\n\n\t\tif (ignoreList.has(this.#tasksView.getCurrentViewMode()))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tDom.append(this.#renderSettingsBtn(), container);\n\t}\n\n\t#setParams(params: Params)\n\t{\n\t\tthis.#cache.set('params', params);\n\t}\n\n\t#getParam(param: string): any\n\t{\n\t\treturn this.#cache.get('params')[param];\n\t}\n\n\t#renderAddBtn(): HTMLElement\n\t{\n\t\tconst node = Tag.render`\n\t\t\t<div class=\"ui-btn-split ui-btn-success ui-btn-round ui-btn-no-caps\">\n\t\t\t\t<a\n\t\t\t\t\tdata-id=\"spaces-tasks-add-main-btn\"\n\t\t\t\t\tclass=\"ui-btn-main\"\n\t\t\t\t\thref=\"${this.#getParam('pathToAddTask')}\"\n\t\t\t\t>\n\t\t\t\t\t${Loc.getMessage('SN_SPACES_TASKS_ADD_TASK')}\n\t\t\t\t</a>\n\t\t\t\t<button class=\"ui-btn-menu\" data-id=\"spaces-tasks-add-menu-btn\"></button>\n\t\t\t</div>\n\t\t`;\n\n\t\tEvent.bind(node.querySelector('.ui-btn-menu'), 'click', this.#addMenuClick.bind(this));\n\n\t\treturn node;\n\t}\n\n\t#renderScrumAddBtn(): HTMLElement\n\t{\n\t\tconst node = Tag.render`\n\t\t\t<div class=\"ui-btn-split ui-btn-round ui-btn-no-caps ui-btn-light-border ui-btn-themes\">\n\t\t\t\t<a\n\t\t\t\t\tdata-id=\"spaces-tasks-add-main-btn\"\n\t\t\t\t\tclass=\"ui-btn-main\"\n\t\t\t\t\thref=\"${this.#getParam('pathToAddTask')}\"\n\t\t\t\t>\n\t\t\t\t\t${Loc.getMessage('SN_SPACES_TASKS_ADD_TASK')}\n\t\t\t\t</a>\n\t\t\t\t<button class=\"ui-btn-menu\" data-id=\"spaces-tasks-add-menu-btn\"></button>\n\t\t\t</div>\n\t\t`;\n\n\t\tEvent.bind(node.querySelector('.ui-btn-menu'), 'click', this.#addMenuClick.bind(this));\n\n\t\treturn node;\n\t}\n\n\t#renderViewBtn(): HTMLElement\n\t{\n\t\tconst uiClasses = 'ui-btn ui-btn-light ui-btn-sm ui-btn-round ui-btn-no-caps ui-btn-themes';\n\n\t\tconst node = Tag.render`\n\t\t\t<button\n\t\t\t\tdata-id=\"sn-spaces-tasks-view-mode-btn\"\n\t\t\t\tclass=\"${uiClasses} sn-spaces__toolbar-space_btn-options\"\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tclass=\"ui-icon-set --customer-cards\"\n\t\t\t\t\tstyle=\"--ui-icon-set__icon-size: 25px;\"\n\t\t\t\t></div>\n\t\t\t\t<div class=\"sn-spaces__toolbar-space_btn-text\">\n\t\t\t\t\t${Loc.getMessage('SN_SPACES_TASKS_VIEW_BTN')}\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tclass=\"ui-icon-set --chevron-down\"\n\t\t\t\t\tstyle=\"--ui-icon-set__icon-size: 19px;\"\n\t\t\t\t></div>\n\t\t\t</button>\n\t\t`;\n\n\t\tEvent.bind(node, 'click', this.#viewClick.bind(this));\n\n\t\treturn node;\n\t}\n\n\t#renderSettingsBtn(): HTMLElement\n\t{\n\t\tconst uiClasses = 'ui-btn ui-btn-light ui-btn-sm ui-btn-round ui-btn-themes';\n\n\t\tconst node = Tag.render`\n\t\t\t<button\n\t\t\t\tdata-id=\"spaces-tasks-settings-btn\"\n\t\t\t\tclass=\"${uiClasses} sn-spaces__toolbar-space_btn-more\"\n\t\t\t>\n\t\t\t\t<div class=\"ui-icon-set --more\"></div>\n\t\t\t</button>\n\t\t`;\n\n\t\tEvent.bind(node, 'click', this.#settingsClick.bind(this));\n\n\t\treturn node;\n\t}\n\n\t#addMenuClick(event)\n\t{\n\t\tCreationMenu.toggle({\n\t\t\tbindElement: event.srcElement,\n\t\t\tcreateTaskLink: this.#getParam('pathToAddTask'),\n\t\t\ttemplatesListLink: this.#getParam('pathToTemplateList'),\n\t\t});\n\t}\n\n\t#viewClick(event)\n\t{\n\t\tif (!this.#tasksViewList)\n\t\t{\n\t\t\tthis.#tasksViewList = new TasksViewList({\n\t\t\t\tbindElement: event.target,\n\t\t\t\tviewList: this.#getParam('viewList'),\n\t\t\t});\n\n\t\t\tthis.#tasksViewList.subscribe(\n\t\t\t\t'click',\n\t\t\t\t(baseEvent: BaseEvent<{ urlParam: string, urlValue: string }>) => {\n\t\t\t\t\tconst { urlParam, urlValue } = baseEvent.getData();\n\t\t\t\t\tthis.#router.redirectToScrumTasks(urlParam, urlValue);\n\t\t\t\t},\n\t\t\t);\n\t\t}\n\n\t\tthis.#tasksViewList.show();\n\t}\n\n\t#settingsClick(event)\n\t{\n\t\tif (!this.#settings)\n\t\t{\n\t\t\tif (this.#getParam('isUserSpace'))\n\t\t\t{\n\t\t\t\tthis.#settings = new UserSettings({\n\t\t\t\t\tbindElement: event.target,\n\t\t\t\t\ttasksView: this.#tasksView,\n\t\t\t\t\tpathToTasks: this.#getParam('pathToTasks'),\n\t\t\t\t\torder: this.#getParam('order'),\n\t\t\t\t\tshouldSubtasksBeGrouped: this.#getParam('shouldSubtasksBeGrouped'),\n\t\t\t\t\tuserId: this.#getParam('userId'),\n\t\t\t\t\tgridId: this.#getParam('gridId'),\n\t\t\t\t\tsortFields: this.#getParam('sortFields'),\n\t\t\t\t\ttaskSort: this.#getParam('taskSort'),\n\t\t\t\t\tsyncScript: this.#getParam('syncScript'),\n\t\t\t\t\tpermissions: this.#getParam('permissions'),\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t// eslint-disable-next-line no-lonely-if\n\t\t\t\tif (this.#getParam('isScrumSpace'))\n\t\t\t\t{\n\t\t\t\t\tthis.#settings = new ScrumSettings({\n\t\t\t\t\t\tbindElement: event.target,\n\t\t\t\t\t\tdisplayPriority: this.#getParam('displayPriority'),\n\t\t\t\t\t\ttasksView: this.#tasksView,\n\t\t\t\t\t\trouter: this.#router,\n\t\t\t\t\t\torder: this.#getParam('order'),\n\t\t\t\t\t\tactiveSprintExists: this.#getParam('activeSprintId') > 0,\n\t\t\t\t\t\tcanCompleteSprint: this.#getParam('canEditSprint') === 'Y',\n\t\t\t\t\t});\n\t\t\t\t\tthis.#settings.subscribe('completeSprint', () => this.#tasksScrum.showCompletionForm());\n\t\t\t\t\tthis.#settings.subscribe('showBurnDown', () => this.#tasksScrum.showBurnDown());\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.#settings = new GroupSettings({\n\t\t\t\t\t\tbindElement: event.target,\n\t\t\t\t\t\ttasksView: this.#tasksView,\n\t\t\t\t\t\tpathToTasks: this.#getParam('pathToTasks'),\n\t\t\t\t\t\torder: this.#getParam('order'),\n\t\t\t\t\t\tshouldSubtasksBeGrouped: this.#getParam('shouldSubtasksBeGrouped'),\n\t\t\t\t\t\tuserId: this.#getParam('userId'),\n\t\t\t\t\t\tgridId: this.#getParam('gridId'),\n\t\t\t\t\t\tsortFields: this.#getParam('sortFields'),\n\t\t\t\t\t\ttaskSort: this.#getParam('taskSort'),\n\t\t\t\t\t\tsyncScript: this.#getParam('syncScript'),\n\t\t\t\t\t\tpermissions: this.#getParam('permissions'),\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.#settings.subscribe('realAll', () => {\n\t\t\t\tif (this.#counters)\n\t\t\t\t{\n\t\t\t\t\tthis.#counters.readAll();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tthis.#settings.show();\n\t}\n}\n","import { Loc } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { Menu } from 'main.popup';\n\ntype Params = {\n\tbindElement: HTMLElement,\n\tdocumentHandlers: Array<DocumentHandler>\n}\n\nexport type DocumentHandler = {\n\tcode: string,\n\tname: string,\n}\n\nexport class FilesAddSettings extends EventEmitter\n{\n\t#menu: Menu;\n\t#documentHandlers: Array<DocumentHandler>;\n\n\tconstructor(params: Params)\n\t{\n\t\tsuper();\n\n\t\tthis.setEventNamespace('BX.Socialnetwork.Spaces.FilesAddSettings');\n\n\t\tthis.#documentHandlers = params.documentHandlers;\n\n\t\tthis.#menu = this.#createMenu(params.bindElement);\n\t}\n\n\tshow(): void\n\t{\n\t\tthis.#menu.toggle();\n\t}\n\n\t#createMenu(bindElement: HTMLElement): Menu\n\t{\n\t\tconst fileUploadItemId = 'spaces-files-add-file-item';\n\n\t\tconst menu = new Menu({\n\t\t\tid: 'spaces-files-add-settings',\n\t\t\tbindElement,\n\t\t\tcloseByEsc: true,\n\t\t\tevents: {\n\t\t\t\tonShow: (event) => {\n\t\t\t\t\tthis.emit('show', {\n\t\t\t\t\t\tfileUploadContainer: menu.getMenuItem(fileUploadItemId).getContainer(),\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tonClose: () => {\n\t\t\t\t\tthis.emit('close', {\n\t\t\t\t\t\tfileUploadContainer: menu.getMenuItem(fileUploadItemId).getContainer(),\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\n\t\tmenu.addMenuItem({\n\t\t\tdataset: { id: 'spaces-files-add-settings-file' },\n\t\t\tid: fileUploadItemId,\n\t\t\ttext: Loc.getMessage('SN_SPACES_FILES_ADD_SETTINGS_FILE'),\n\t\t});\n\n\t\tmenu.addMenuItem({\n\t\t\tdataset: { id: 'spaces-files-add-settings-folder' },\n\t\t\ttext: Loc.getMessage('SN_SPACES_FILES_ADD_SETTINGS_FOLDER'),\n\t\t\tonclick: () => {\n\t\t\t\tthis.emit('addFolder');\n\t\t\t},\n\t\t});\n\n\t\tthis.#documentHandlers.forEach((handler: DocumentHandler) => {\n\t\t\tmenu.addMenuItem({\n\t\t\t\tdataset: { id: `spaces-files-add-settings-type-${handler.code}` },\n\t\t\t\ttext: handler.name,\n\t\t\t\titems: [\n\t\t\t\t\t{\n\t\t\t\t\t\ttext: Loc.getMessage('SN_SPACES_FILES_ADD_SETTINGS_DOC'),\n\t\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\t\tmenu.close();\n\t\t\t\t\t\t\tthis.emit('addDoc', { handlerCode: handler.code });\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttext: Loc.getMessage('SN_SPACES_FILES_ADD_SETTINGS_TABLE'),\n\t\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\t\tmenu.close();\n\t\t\t\t\t\t\tthis.emit('addTable', { handlerCode: handler.code });\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttext: Loc.getMessage('SN_SPACES_FILES_ADD_SETTINGS_PRESENTATION'),\n\t\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\t\tmenu.close();\n\t\t\t\t\t\t\tthis.emit('addPresentation', { handlerCode: handler.code });\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t});\n\t\t});\n\n\t\treturn menu;\n\t}\n}\n","type Params = {\n\tpathToTrash: string,\n\tpathToUserFilesVolume: string,\n}\n\nexport class FilesRouter\n{\n\t#pathToTrash: string;\n\t#pathToVolume: string;\n\n\tconstructor(params: Params)\n\t{\n\t\tthis.#pathToTrash = params.pathToTrash;\n\t\tthis.#pathToVolume = params.pathToUserFilesVolume;\n\t}\n\n\tredirectToTrash()\n\t{\n\t\tlocation.href = this.#pathToTrash;\n\t}\n\n\tredirectToVolume()\n\t{\n\t\tlocation.href = this.#pathToVolume;\n\t}\n}","import { Cache, Loc } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { Menu } from 'main.popup';\n\ntype Params = {\n\tbindElement: HTMLElement,\n\tpermissions: { [key: string]: boolean },\n\tfeatureRestrictionMap: { [key: string]: string },\n\tisTrashMode: boolean,\n}\n\nexport class FilesSettings extends EventEmitter\n{\n\t#cache = new Cache.MemoryCache();\n\t#menu: Menu;\n\n\tconstructor(params: Params)\n\t{\n\t\tsuper();\n\n\t\tthis.setEventNamespace('BX.Socialnetwork.Spaces.FilesSettings');\n\n\t\tthis.#setParams(params);\n\n\t\tthis.#menu = this.#createMenu(params.bindElement);\n\t}\n\n\tshow(): void\n\t{\n\t\tthis.#menu.toggle();\n\t}\n\n\t#setParams(params: Params)\n\t{\n\t\tthis.#cache.set('params', params);\n\t}\n\n\t#getParam(param: string): any\n\t{\n\t\treturn this.#cache.get('params')[param];\n\t}\n\n\t#createMenu(bindElement: HTMLElement): Menu\n\t{\n\t\tconst menu = new Menu({\n\t\t\tid: 'spaces-files-settings',\n\t\t\tbindElement,\n\t\t\tcloseByEsc: true,\n\t\t});\n\n\t\tconst permissions = this.#getParam('permissions');\n\n\t\tif (permissions.canChangeRights === true)\n\t\t{\n\t\t\tmenu.addMenuItem({\n\t\t\t\tdataset: { id: 'spaces-files-settings-rights' },\n\t\t\t\ttext: Loc.getMessage('SN_SPACES_FILES_SETTINGS_RIGHTS'),\n\t\t\t\tonclick: () => {\n\t\t\t\t\tthis.emit('rights');\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\tif (permissions.canChangeBizproc === true)\n\t\t{\n\t\t\tmenu.addMenuItem({\n\t\t\t\tdataset: { id: 'spaces-files-settings-bizproc' },\n\t\t\t\ttext: Loc.getMessage('SN_SPACES_FILES_BIZPROC'),\n\t\t\t\tonclick: () => {\n\t\t\t\t\tthis.emit('bizproc');\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\tif (permissions.canChangeBizprocSettings === true)\n\t\t{\n\t\t\tmenu.addMenuItem({\n\t\t\t\tdataset: { id: 'spaces-files-settings-config-bizproc' },\n\t\t\t\ttext: Loc.getMessage('SN_SPACES_FILES_SETTINGS_BIZPROC'),\n\t\t\t\tonclick: () => {\n\t\t\t\t\tthis.emit('bizprocSettings');\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\tmenu.addMenuItem({\n\t\t\tdataset: { id: 'spaces-files-settings-network' },\n\t\t\ttext: Loc.getMessage('SN_SPACES_FILES_SETTINGS_NETWORK'),\n\t\t\tonclick: () => {\n\t\t\t\tthis.emit('network');\n\t\t\t},\n\t\t});\n\n\t\tmenu.addMenuItem({\n\t\t\tdataset: { id: 'spaces-files-settings-doc' },\n\t\t\ttext: Loc.getMessage('SN_SPACES_FILES_SETTINGS_DOC'),\n\t\t\tonclick: () => {\n\t\t\t\tthis.emit('docSettings');\n\t\t\t},\n\t\t});\n\n\t\tif (permissions.canCleanFiles === true)\n\t\t{\n\t\t\tmenu.addMenuItem({\n\t\t\t\tdataset: { id: 'spaces-files-settings-clean' },\n\t\t\t\ttext: Loc.getMessage('SN_SPACES_FILES_SETTINGS_CLEAN'),\n\t\t\t\tonclick: () => {\n\t\t\t\t\tthis.emit('clean');\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\tif (!this.#getParam('isTrashMode'))\n\t\t{\n\t\t\tmenu.addMenuItem({\n\t\t\t\tdataset: { id: 'spaces-files-settings-trash' },\n\t\t\t\ttext: Loc.getMessage('SN_SPACES_FILES_SETTINGS_TRASH'),\n\t\t\t\tonclick: () => {\n\t\t\t\t\tthis.emit('trash');\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\treturn menu;\n\t}\n}\n","import { Cache } from 'main.core';\n\ntype Params = {\n\tdiskComponentId: string,\n\tnetworkDriveLink: string,\n\tpathToFilesBizprocWorkflowAdmin?: string,\n\tlistAvailableFeatures: { [key: string]: boolean },\n\tfeatureRestrictionMap: { [key: string]: string },\n}\n\nexport class FilesDisk\n{\n\t#cache = new Cache.MemoryCache();\n\n\tconstructor(params: Params)\n\t{\n\t\tthis.#setParams(params);\n\t}\n\n\tcreateFolder()\n\t{\n\t\tthis.#getDiskFolderList().createFolder();\n\t}\n\n\tappendUploadInput(container: HTMLElement)\n\t{\n\t\t// eslint-disable-next-line @bitrix24/bitrix24-rules/no-bx\n\t\tBX.onCustomEvent(window, 'onDiskUploadPopupShow', [container]);\n\t}\n\n\thideUploadInput(container: HTMLElement)\n\t{\n\t\t// eslint-disable-next-line @bitrix24/bitrix24-rules/no-bx\n\t\tBX.onCustomEvent(window, 'onDiskUploadPopupClose', [container]);\n\t}\n\n\trunCreatingDocFile(code: string)\n\t{\n\t\tthis.#getDiskFolderList().runCreatingFile('docx', code);\n\t}\n\n\trunCreatingTableFile(code: string)\n\t{\n\t\tthis.#getDiskFolderList().runCreatingFile('xlsx', code);\n\t}\n\n\trunCreatingPresentationFile(code: string)\n\t{\n\t\tthis.#getDiskFolderList().runCreatingFile('pptx', code);\n\t}\n\n\tshowRights()\n\t{\n\t\tconst listAvailableFeatures: { [key: string]: boolean } = this.#getParam('listAvailableFeatures');\n\t\tconst featureRestrictionMap: { [key: string]: string } = this.#getParam('featureRestrictionMap');\n\n\t\tif (listAvailableFeatures.disk_folder_sharing === true)\n\t\t{\n\t\t\tthis.#getDiskFolderList().showRightsOnStorage();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tBX.UI.InfoHelper.show(featureRestrictionMap.disk_folder_sharing);\n\t\t}\n\t}\n\n\tshowBizproc()\n\t{\n\t\tthis.#getDiskFolderList().openSlider(this.#getParam('pathToFilesBizprocWorkflowAdmin'));\n\t}\n\n\tshowBizprocSettings()\n\t{\n\t\tthis.#getDiskFolderList().showSettingsOnBizproc();\n\t}\n\n\tshowNetworkDriveConnect()\n\t{\n\t\tthis.#getDiskFolderList().showNetworkDriveConnect({\n\t\t\tlink: this.#getParam('networkDriveLink'),\n\t\t});\n\t}\n\n\topenWindowForSelectDocumentService()\n\t{\n\t\tthis.#getDiskFolderList().openWindowForSelectDocumentService({});\n\t}\n\n\tcleanTrash()\n\t{\n\t\tthis.#getDiskFolderList().openConfirmEmptyTrash();\n\t}\n\n\t#setParams(params: Params)\n\t{\n\t\tthis.#cache.set('params', params);\n\t}\n\n\t#getParam(param: string): any\n\t{\n\t\treturn this.#cache.get('params')[param];\n\t}\n\n\t#getDiskFolderList(): BX.Disk.FolderListClass\n\t{\n\t\treturn BX.Disk[`FolderListClass_${this.#getParam('diskComponentId')}`];\n\t}\n}","import { Dom, Event, Tag, Type, Loc, Cache } from 'main.core';\nimport { BaseEvent } from 'main.core.events';\nimport { Filter } from '../filter';\nimport { DocumentHandler, FilesAddSettings } from './files-add-settings';\nimport { FilesRouter } from './files-router';\nimport { FilesSettings } from './files-settings';\nimport { FilesDisk } from './files-disk';\n\ntype Params = {\n\tdiskComponentId: string,\n\tnetworkDriveLink: string,\n\tpathToUserFilesVolume?: string,\n\tpathToFilesBizprocWorkflowAdmin?: string,\n\tpathToTrash: string,\n\tdocumentHandlers: Array<DocumentHandler>,\n\tpermissions: { [key: string]: boolean },\n\tlistAvailableFeatures: { [key: string]: boolean },\n\tfeatureRestrictionMap: { [key: string]: string },\n\tisTrashMode?: boolean,\n\tfilterId: string,\n\tfilterContainer: HTMLElement,\n}\n\nexport class FilesToolbar\n{\n\t#cache = new Cache.MemoryCache();\n\n\t#router: FilesRouter;\n\t#disk: FilesDisk;\n\t#addSettings: FilesAddSettings;\n\t#settings: FilesSettings;\n\t#filter: Filter;\n\n\tconstructor(params: Params)\n\t{\n\t\tthis.#setParams(params);\n\n\t\tthis.#router = new FilesRouter({\n\t\t\tpathToTrash: this.#getParam('pathToTrash'),\n\t\t\tpathToUserFilesVolume: this.#getParam('pathToUserFilesVolume'),\n\t\t});\n\n\t\tthis.#disk = new FilesDisk({\n\t\t\tdiskComponentId: params.diskComponentId,\n\t\t\tnetworkDriveLink: this.#getParam('networkDriveLink'),\n\t\t\tpathToFilesBizprocWorkflowAdmin: this.#getParam('pathToFilesBizprocWorkflowAdmin'),\n\t\t\tlistAvailableFeatures: this.#getParam('listAvailableFeatures'),\n\t\t\tfeatureRestrictionMap: this.#getParam('featureRestrictionMap'),\n\t\t});\n\n\t\tthis.#filter = new Filter({\n\t\t\tfilterId: params.filterId,\n\t\t\tfilterContainer: params.filterContainer,\n\t\t});\n\t}\n\n\trenderAddBtnTo(container: HTMLElement)\n\t{\n\t\tif (!Type.isDomNode(container))\n\t\t{\n\t\t\tthrow new Error('BX.Socialnetwork.Spaces.FilesToolbar: HTMLElement for add btn not found');\n\t\t}\n\n\t\tDom.append(this.#renderAddBtn(), container);\n\t}\n\n\trenderCleanBtnTo(container: HTMLElement)\n\t{\n\t\tif (!Type.isDomNode(container))\n\t\t{\n\t\t\tthrow new Error('BX.Socialnetwork.Spaces.FilesToolbar: HTMLElement for add btn not found');\n\t\t}\n\n\t\tDom.append(this.#renderCleanBtn(), container);\n\t}\n\n\trenderSettingsBtnTo(container: HTMLElement)\n\t{\n\t\tif (!Type.isDomNode(container))\n\t\t{\n\t\t\tthrow new Error('BX.Socialnetwork.Spaces.FilesToolbar: HTMLElement for settings btn not found');\n\t\t}\n\n\t\tDom.append(this.#renderSettingsBtn(), container);\n\t}\n\n\t#setParams(params: Params)\n\t{\n\t\tthis.#cache.set('params', params);\n\t}\n\n\t#getParam(param: string): any\n\t{\n\t\treturn this.#cache.get('params')[param];\n\t}\n\n\t#renderAddBtn(): HTMLElement\n\t{\n\t\tconst node = Tag.render`\n\t\t\t<div class=\"ui-btn-split ui-btn-success ui-btn-round ui-btn-no-caps\">\n\t\t\t\t<div data-id=\"spaces-files-add-main-btn\" class=\"ui-btn-main\">\n\t\t\t\t\t${Loc.getMessage('SN_SPACES_FILES_ADD_FILE')}\n\t\t\t\t</div>\n\t\t\t\t<div data-id=\"spaces-files-add-menu-btn\" class=\"ui-btn-menu\"></div>\n\t\t\t</div>\n\t\t`;\n\n\t\tEvent.bind(node.querySelector('.ui-btn-menu'), 'click', this.#addMenuClick.bind(this));\n\n\t\tEvent.bind(node.querySelector('.ui-btn-main'), 'mouseenter', (event) => {\n\t\t\tthis.#disk.appendUploadInput(event.target);\n\t\t});\n\t\tEvent.bind(node.querySelector('.ui-btn-main'), 'mouseleave', (event) => {\n\t\t\tthis.#disk.hideUploadInput(event.target);\n\t\t});\n\n\t\treturn node;\n\t}\n\n\t#renderCleanBtn(): HTMLElement\n\t{\n\t\tconst node = Tag.render`\n\t\t\t<div class=\"ui-btn ui-btn-success ui-btn-round ui-btn-no-caps\">\n\t\t\t\t${Loc.getMessage('SN_SPACES_FILES_CLEAN_BTN')}\n\t\t\t</div>\n\t\t`;\n\n\t\tEvent.bind(node, 'click', this.#cleanClick.bind(this));\n\n\t\treturn node;\n\t}\n\n\t#renderSettingsBtn(): HTMLElement\n\t{\n\t\tconst node = Tag.render`\n\t\t\t<button\n\t\t\t\tdata-id=\"spaces-files-settings-btn\"\n\t\t\t\tclass=\"ui-btn ui-btn-light ui-btn-sm ui-btn-round ui-btn-themes sn-spaces__toolbar-space_btn-more\"\n\t\t\t>\n\t\t\t\t<div class=\"ui-icon-set --more\"></div>\n\t\t\t</button>\n\t\t`;\n\n\t\tEvent.bind(node, 'click', this.#settingsClick.bind(this));\n\n\t\treturn node;\n\t}\n\n\t#addMenuClick(event)\n\t{\n\t\tif (!this.#addSettings)\n\t\t{\n\t\t\tthis.#addSettings = new FilesAddSettings({\n\t\t\t\tbindElement: event.target,\n\t\t\t\tdocumentHandlers: this.#getParam('documentHandlers'),\n\t\t\t});\n\t\t\tthis.#addSettings.subscribe('show', (baseEvent: BaseEvent) => {\n\t\t\t\tconst { fileUploadContainer } = baseEvent.getData();\n\t\t\t\tthis.#disk.appendUploadInput(fileUploadContainer);\n\t\t\t});\n\t\t\tthis.#addSettings.subscribe('close', (baseEvent: BaseEvent) => {\n\t\t\t\tconst { fileUploadContainer } = baseEvent.getData();\n\t\t\t\tthis.#disk.hideUploadInput(fileUploadContainer);\n\t\t\t});\n\t\t\tthis.#addSettings.subscribe('addFolder', () => {\n\t\t\t\tthis.#disk.createFolder();\n\t\t\t});\n\t\t\tthis.#addSettings.subscribe('addDoc', (baseEvent: BaseEvent) => {\n\t\t\t\tconst { handlerCode } = baseEvent.getData();\n\t\t\t\tthis.#disk.runCreatingDocFile(handlerCode);\n\t\t\t});\n\t\t\tthis.#addSettings.subscribe('addTable', (baseEvent: BaseEvent) => {\n\t\t\t\tconst { handlerCode } = baseEvent.getData();\n\t\t\t\tthis.#disk.runCreatingTableFile(handlerCode);\n\t\t\t});\n\t\t\tthis.#addSettings.subscribe('addPresentation', (baseEvent: BaseEvent) => {\n\t\t\t\tconst { handlerCode } = baseEvent.getData();\n\t\t\t\tthis.#disk.runCreatingPresentationFile(handlerCode);\n\t\t\t});\n\t\t}\n\n\t\tthis.#addSettings.show();\n\t}\n\n\t#cleanClick()\n\t{\n\t\tthis.#disk.cleanTrash();\n\t}\n\n\t#settingsClick(event)\n\t{\n\t\tif (!this.#settings)\n\t\t{\n\t\t\tthis.#settings = new FilesSettings({\n\t\t\t\tbindElement: event.target,\n\t\t\t\tpermissions: this.#getParam('permissions'),\n\t\t\t\tfeatureRestrictionMap: this.#getParam('featureRestrictionMap'),\n\t\t\t\tisTrashMode: this.#getParam('isTrashMode'),\n\t\t\t});\n\t\t\tthis.#settings.subscribe('rights', () => {\n\t\t\t\tthis.#disk.showRights();\n\t\t\t});\n\t\t\tthis.#settings.subscribe('bizproc', () => {\n\t\t\t\tthis.#disk.showBizproc();\n\t\t\t});\n\t\t\tthis.#settings.subscribe('bizprocSettings', () => {\n\t\t\t\tthis.#disk.showBizprocSettings();\n\t\t\t});\n\t\t\tthis.#settings.subscribe('network', () => {\n\t\t\t\tthis.#disk.showNetworkDriveConnect();\n\t\t\t});\n\t\t\tthis.#settings.subscribe('clean', () => {\n\t\t\t\tthis.#router.redirectToVolume();\n\t\t\t});\n\t\t\tthis.#settings.subscribe('docSettings', () => {\n\t\t\t\tthis.#disk.openWindowForSelectDocumentService();\n\t\t\t});\n\t\t\tthis.#settings.subscribe('trash', () => {\n\t\t\t\tthis.#router.redirectToTrash();\n\t\t\t});\n\t\t}\n\n\t\tthis.#settings.show();\n\t}\n}\n","import { Entry } from 'calendar.entry';\nimport { SectionManager } from 'calendar.sectionmanager';\nimport { Util } from 'calendar.util';\nimport {Dom, Event, Loc, Tag, Type} from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { CompactEventForm } from 'calendar.compacteventform';\nimport 'ui.notification';\nimport { RoomsManager } from 'calendar.roomsmanager';\nimport {MessageBox} from \"ui.dialogs.messagebox\";\n\nexport class EntryManager {\n\tstatic newEntryName = '';\n\tstatic userIndex = {};\n\tstatic delayedActionList = [];\n\tstatic DELETE_DELAY_TIMEOUT = 4000;\n\tstatic slidersMap = new WeakMap();\n\n\tstatic getNewEntry(options)\n\t{\n\t\tconst newEntryData = {};\n\t\tconst dateTime = EntryManager.getNewEntryTime(new Date());\n\t\tconst userSettings = Util.getUserSettings();\n\t\tconst userId = Util.getCurrentUserId();\n\n\t\tnewEntryData.ID = null;\n\t\tnewEntryData.NAME = EntryManager.getNewEntryName();\n\t\tnewEntryData.dateFrom = dateTime.from;\n\t\tnewEntryData.dateTo = dateTime.to;\n\t\tif(options.type === 'location')\n\t\t{\n\t\t\tnewEntryData.SECT_ID = RoomsManager.getNewEntrySectionId(options.type, parseInt(options.ownerId));\n\t\t}\n\t\telse\n\t\t{\n\t\t\tnewEntryData.SECT_ID = SectionManager.getNewEntrySectionId(options.type, parseInt(options.ownerId));\n\t\t}\n\t\tnewEntryData.REMIND = EntryManager.getNewEntryReminders();\n\n\t\tnewEntryData.attendeesEntityList = [{entityId: 'user', id: userId}];\n\t\tnewEntryData.ATTENDEE_LIST = [{id: Util.getCurrentUserId(), status: \"H\"}];\n\n\t\tif (options.type === 'user' && userId !== options.ownerId)\n\t\t{\n\t\t\tnewEntryData.attendeesEntityList.push({entityId: 'user', id: options.ownerId});\n\t\t\tnewEntryData.ATTENDEE_LIST = [\n\t\t\t\t{id: options.ownerId, status: \"H\"},\n\t\t\t\t{id: Util.getCurrentUserId(), status: \"Y\"}\n\t\t\t];\n\t\t}\n\t\telse if (options.type === 'group')\n\t\t{\n\t\t\tnewEntryData.attendeesEntityList.push({entityId: 'project', id: options.ownerId});\n\t\t}\n\n\t\tnewEntryData.TZ_FROM = userSettings.timezoneName || userSettings.timezoneDefaultName || '';\n\t\tnewEntryData.TZ_TO = userSettings.timezoneName || userSettings.timezoneDefaultName || '';\n\n\t\treturn new Entry({data: newEntryData});\n\t}\n\n\tstatic getNewEntryTime(date, duration)\n\t{\n\t\tdate = Util.getUsableDateTime(date);\n\n\t\tconst calendarContext = Util.getCalendarContext();\n\t\tif (calendarContext)\n\t\t{\n\t\t\tconst displayedViewRange = calendarContext.getDisplayedViewRange();\n\t\t\tif (Type.isDate(displayedViewRange?.start))\n\t\t\t{\n\t\t\t\tconst dateTime = date.getTime();\n\t\t\t\tif (\n\t\t\t\t\tdateTime < displayedViewRange.start.getTime()\n\t\t\t\t\t|| dateTime > displayedViewRange.end.getTime()\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tconst startDate = new Date(displayedViewRange.start.getTime());\n\t\t\t\t\tconst workTime = calendarContext.util.getWorkTime();\n\t\t\t\t\tstartDate.setHours(workTime.start, 0, 0,0);\n\t\t\t\t\tdate = Util.getUsableDateTime(startDate);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\tfrom : date,\n\t\t\tto : new Date(date.getTime() + (duration || 3600) * 1000)\n\t\t}\n\t}\n\n\tstatic getNewEntryName(): string\n\t{\n\t\treturn (EntryManager.newEntryName || '');\n\t}\n\n\tstatic setNewEntryName(newEntryName)\n\t{\n\t\tEntryManager.newEntryName = newEntryName;\n\t}\n\n\tstatic showEditEntryNotification(entryId)\n\t{\n\t\tUtil.showNotification(\n\t\t\tLoc.getMessage('CALENDAR_SAVE_EVENT_NOTIFICATION'),\n\t\t\t[{\n\t\t\t\ttitle: Loc.getMessage('CALENDAR_EVENT_DO_VIEW'),\n\t\t\t\tevents: {\n\t\t\t\t\tclick: function(event, balloon, action) {\n\n\t\t\t\t\t\tEntryManager.openViewSlider(entryId);\n\t\t\t\t\t\tballoon.close();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}]\n\t\t)\n\t}\n\n\tstatic showNewEntryNotification(entryId)\n\t{\n\t\tUtil.showNotification(\n\t\t\tLoc.getMessage('CALENDAR_NEW_EVENT_NOTIFICATION'),\n\t\t\t[{\n\t\t\t\ttitle: Loc.getMessage('CALENDAR_EVENT_DO_VIEW'),\n\t\t\t\tevents: {\n\t\t\t\t\tclick: (event, balloon, action) => {\n\n\t\t\t\t\t\tEntryManager.openViewSlider(entryId);\n\t\t\t\t\t\tballoon.close();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}]\n\t\t)\n\t}\n\n\tstatic showDeleteEntryNotification(entry)\n\t{\n\t\tif (entry && entry instanceof Entry)\n\t\t{\n\t\t\tBX.UI.Notification.Center.notify({\n\t\t\t\tid: 'calendar' + entry.getUniqueId(),\n\t\t\t\tcontent: Loc.getMessage('CALENDAR_DELETE_EVENT_NOTIFICATION'),\n\t\t\t\tactions: [{\n\t\t\t\t\ttitle: Loc.getMessage('CALENDAR_EVENT_DO_CANCEL'),\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tclick: (event, balloon, action) => {\n\t\t\t\t\t\t\tentry.cancelDelete();\n\t\t\t\t\t\t\tballoon.close();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}]\n\t\t\t});\n\t\t}\n\t}\n\n\tstatic showReleaseLocationNotification()\n\t{\n\t\tBX.UI.Notification.Center.notify({\n\t\t\tcontent: Loc.getMessage('CALENDAR_RELEASE_LOCATION_NOTIFICATION'),\n\t\t});\n\t}\n\n\tstatic closeDeleteNotificationBalloon(entry)\n\t{\n\t\tif (entry && entry instanceof Entry)\n\t\t{\n\t\t\tconst balloon = BX.UI.Notification.Center.getBalloonById('calendar' + entry.getUniqueId());\n\t\t\tif (balloon)\n\t\t\t{\n\t\t\t\tballoon.close();\n\t\t\t}\n\t\t}\n\t}\n\n\tstatic openEditSlider(options = {})\n\t{\n\t\tconst bx = Util.getBX();\n\n\t\tif (bx.Calendar && bx.Calendar.SliderLoader)\n\t\t{\n\t\t\tnew bx.Calendar.SliderLoader(\n\t\t\t\toptions.entry ? 'EDIT' + options.entry.id : 'NEW',\n\t\t\t\t{\n\t\t\t\t\tcalendarContext: options.calendarContext,\n\t\t\t\t\tentry: options.entry || null,\n\t\t\t\t\ttype: options.type,\n\t\t\t\t\tisLocationCalendar: options.isLocationCalendar || false,\n\t\t\t\t\troomsManager: options.roomsManager || null,\n\t\t\t\t\tlocationAccess: options.locationAccess || false,\n\t\t\t\t\tdayOfWeekMonthFormat: options.dayOfWeekMonthFormat || false,\n\t\t\t\t\tlocationCapacity: options.locationCapacity || 0,\n\t\t\t\t\townerId: options.ownerId,\n\t\t\t\t\tuserId: options.userId,\n\t\t\t\t\tformDataValue: options.formDataValue || null,\n\t\t\t\t\tjumpToControl: options.jumpToControl,\n\t\t\t\t}\n\t\t\t).show();\n\t\t}\n\t}\n\n\tstatic openViewSlider(eventId = null, options = {})\n\t{\n\t\tif (!Type.isNull(eventId))\n\t\t{\n\t\t\tconst bx = Util.getBX();\n\t\t\tif (bx.Calendar && bx.Calendar.SliderLoader)\n\t\t\t{\n\t\t\t\tnew bx.Calendar.SliderLoader(eventId, {\n\t\t\t\t\tentryDateFrom: options.from,\n\t\t\t\t\ttimezoneOffset: options.timezoneOffset,\n\t\t\t\t\tdayOfWeekMonthFormat: options.dayOfWeekMonthFormat || false,\n\t\t\t\t\tcalendarContext: options.calendarContext || null,\n\t\t\t\t\tlink: options.link,\n\t\t\t\t}).show();\n\t\t\t}\n\t\t}\n\t}\n\n\tstatic deleteEntry(entry, calendarContext = null)\n\t{\n\t\tif (entry instanceof Entry)\n\t\t{\n\t\t\tconst slider = Util.getBX().SidePanel.Instance.getTopSlider();\n\t\t\tconst beforeDeleteHandler = () => {\n\t\t\t\tif (slider && slider.options.type === 'calendar:slider')\n\t\t\t\t{\n\t\t\t\t\tUtil.getBX().SidePanel.Instance.close();\n\t\t\t\t}\n\t\t\t};\n\t\t\tEventEmitter.subscribe('BX.Calendar.Entry:beforeDelete', beforeDeleteHandler);\n\n\t\t\tconst deleteHandler = () => {\n\t\t\t\tconst calendar = Util.getCalendarContext();\n\n\t\t\t\tif (calendar)\n\t\t\t\t{\n\t\t\t\t\tcalendar.reload();\n\t\t\t\t}\n\t\t\t\telse if (calendarContext)\n\t\t\t\t{\n\t\t\t\t\tcalendarContext.reload();\n\t\t\t\t}\n\t\t\t\tEventEmitter.unsubscribe('BX.Calendar.Entry:delete', deleteHandler);\n\t\t\t\tEventEmitter.unsubscribe('BX.Calendar.Entry:beforeDelete', beforeDeleteHandler);\n\t\t\t};\n\n\t\t\tEventEmitter.subscribe('BX.Calendar.Entry:delete', deleteHandler);\n\n\t\t\tentry.delete();\n\t\t}\n\t}\n\n\tstatic setMeetingStatus(entry, status, params = {})\n\t{\n\t\treturn new Promise(resolve => {\n\t\t\tif (!Type.isPlainObject(params))\n\t\t\t{\n\t\t\t\tparams = {};\n\t\t\t}\n\t\t\tparams.recursionMode = params.recursionMode || false;\n\n\t\t\tif (status === 'N' && !params.confirmed)\n\t\t\t{\n\t\t\t\tif (entry.isRecursive())\n\t\t\t\t{\n\t\t\t\t\tthis.showConfirmStatusDialog(entry, resolve);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tBX.ajax.runAction('calendar.api.calendarajax.setMeetingStatus', {\n\t\t\t\tdata: {\n\t\t\t\t\tentryId: entry.id,\n\t\t\t\t\tentryParentId: entry.parentId,\n\t\t\t\t\tstatus: status,\n\t\t\t\t\trecursionMode: params.recursionMode,\n\t\t\t\t\tcurrentDateFrom: Util.formatDate(entry.from)\n\t\t\t\t}\n\t\t\t}).then(\n\t\t\t\t(response) => {\n\t\t\t\t\tBX.Event.EventEmitter.emit(\n\t\t\t\t\t\t'BX.Calendar.Entry:onChangeMeetingStatus',\n\t\t\t\t\t\tnew Event.BaseEvent({\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\tentry: entry,\n\t\t\t\t\t\t\t\tstatus: status,\n\t\t\t\t\t\t\t\trecursionMode: params.recursionMode,\n\t\t\t\t\t\t\t\tcurrentDateFrom: entry.from,\n\t\t\t\t\t\t\t\tcounters: response.data.counters\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\n\t\t\t\t\tif (entry instanceof Entry)\n\t\t\t\t\t{\n\t\t\t\t\t\tentry.setCurrentStatus(status);\n\t\t\t\t\t}\n\n\t\t\t\t\tresolve({\n\t\t\t\t\t\tentry: entry,\n\t\t\t\t\t\tstatus: status,\n\t\t\t\t\t\trecursionMode: params.recursionMode,\n\t\t\t\t\t\tcurrentDateFrom: entry.from\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t);\n\t\t});\n\t}\n\n\tstatic showConfirmStatusDialog(entry, resolvePromiseCallback = null)\n\t{\n\t\tif (!this.confirmDeclineDialog)\n\t\t{\n\t\t\tthis.confirmDeclineDialog = this.createConfirmStatusDialog();\n\t\t}\n\n\t\tthis.confirmDeclineDialog.show();\n\t\tthis.confirmDeclineDialog.unsubscribeAll('onDecline');\n\t\tthis.confirmDeclineDialog.subscribe('onDecline', function(event)\n\t\t{\n\t\t\tif (event && Type.isFunction(event.getData))\n\t\t\t{\n\t\t\t\tEntryManager.setMeetingStatus(\n\t\t\t\t\tentry,\n\t\t\t\t\t'N',\n\t\t\t\t\t{recursionMode: event.getData().recursionMode, confirmed: true}\n\t\t\t\t).then(() => {\n\t\t\t\t\tif (Type.isFunction(resolvePromiseCallback))\n\t\t\t\t\t{\n\t\t\t\t\t\tresolvePromiseCallback();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\tstatic showConfirmEditDialog(options)\n\t{\n\t\tif (!this.confirmEditDialog)\n\t\t{\n\t\t\tthis.confirmEditDialog = this.createConfirmEditDialog();\n\t\t}\n\t\tthis.confirmEditDialog.show();\n\n\t\tif (Type.isFunction(options.callback))\n\t\t{\n\t\t\tthis.confirmEditDialog.unsubscribeAll('onEdit');\n\t\t\tthis.confirmEditDialog.subscribe('onEdit', (event) => {\n\t\t\t\tif (event && Type.isFunction(event.getData))\n\t\t\t\t{\n\t\t\t\t\toptions.callback(event.getData());\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tstatic showReInviteUsersDialog(options)\n\t{\n\t\tif (!this.reinviteUsersDialog)\n\t\t{\n\t\t\tthis.reinviteUsersDialog = this.createReinviteUserDialog();\n\t\t}\n\t\tthis.reinviteUsersDialog.show();\n\n\t\tif (Type.isFunction(options.callback))\n\t\t{\n\t\t\tthis.reinviteUsersDialog.unsubscribeAll('onSelect');\n\t\t\tthis.reinviteUsersDialog.subscribe('onSelect', function(event)\n\t\t\t{\n\t\t\t\tif (event && Type.isFunction(event.getData))\n\t\t\t\t{\n\t\t\t\t\toptions.callback(event.getData());\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tstatic showConfirmedEmailDialog(options = {})\n\t{\n\t\tif (!this.confirmedEmailDialog)\n\t\t{\n\t\t\tthis.confirmedEmailDialog = this.createConfirmedEmailDialog();\n\t\t}\n\t\tthis.confirmedEmailDialog.show();\n\n\t\tif (Type.isFunction(options.callback))\n\t\t{\n\t\t\tthis.confirmedEmailDialog.unsubscribeAll('onSelect');\n\t\t\tthis.confirmedEmailDialog.subscribe('onSelect', function(event)\n\t\t\t{\n\t\t\t\tif (event && Type.isFunction(event.getData))\n\t\t\t\t{\n\t\t\t\t\toptions.callback(event.getData());\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tstatic getLocationRepeatBusyErrorPopup(options = {})\n\t{\n\t\treturn new MessageBox({\n\t\t\ttitle: Loc.getMessage('EC_LOCATION_REPEAT_BUSY_POPUP_TITLE'),\n\t\t\tmessage: Tag.render`\n\t\t\t\t<div class=\"calendar-list-slider-messagebox-text-with-title\">\n\t\t\t\t\t${options.message}\n\t\t\t\t</div>\n\t\t\t`,\n\t\t\tminHeight: 100,\n\t\t\tminWidth: 300,\n\t\t\tmaxWidth: 690,\n\t\t\tbuttons: BX.UI.Dialogs.MessageBoxButtons.YES_CANCEL,\n\t\t\tonYes: options.onYesCallback,\n\t\t\tonCancel: options.onCancelCallback,\n\t\t\tyesCaption: Loc.getMessage('EC_LOCATION_REPEAT_BUSY_POPUP_SAVE_WITHOUT_ROOM'),\n\t\t\tcancelCaption: Loc.getMessage('EC_LOCATION_REPEAT_BUSY_POPUP_RETURN_TO_EDIT'),\n\t\t\tmediumButtonSize: false,\n\t\t\tpopupOptions: {\n\t\t\t\tevents: {\n\t\t\t\t\tonPopupClose: options.onPopupCloseCallback,\n\t\t\t\t},\n\t\t\t\tcloseByEsc: true,\n\t\t\t\tpadding: 0,\n\t\t\t\tcontentPadding: 0,\n\t\t\t\tanimation: 'fading-slide',\n\t\t\t},\n\t\t});\n\t}\n\n\tstatic showEmailLimitationDialog(options = {})\n\t{\n\t\tif (!this.limitationEmailDialog)\n\t\t{\n\t\t\tthis.limitationEmailDialog = this.createEmailLimitationDialog();\n\t\t}\n\t\tthis.limitationEmailDialog.subscribe('onClose', ()=>{\n\t\t\tif (Type.isFunction(options.callback))\n\t\t\t{\n\t\t\t\toptions.callback();\n\t\t\t}\n\t\t});\n\t\tthis.limitationEmailDialog.show();\n\t}\n\n\tstatic getCompactViewForm(create = true)\n\t{\n\t\tif (!EntryManager.compactEntryForm && create)\n\t\t{\n\t\t\tEntryManager.compactEntryForm = new CompactEventForm();\n\t\t}\n\n\t\treturn EntryManager.compactEntryForm;\n\t}\n\n\tstatic openCompactViewForm(options = {})\n\t{\n\t\tconst compactForm = EntryManager.getCompactViewForm();\n\t\tif (!compactForm.isShown())\n\t\t{\n\t\t\tcompactForm.unsubscribeAll('onClose');\n\t\t\tif (Type.isFunction(options.closeCallback))\n\t\t\t{\n\t\t\t\tcompactForm.subscribe('onClose', options.closeCallback);\n\t\t\t}\n\t\t\tcompactForm.showInViewMode(options);\n\t\t}\n\t}\n\n\tstatic openCompactEditForm(options = {})\n\t{\n\t\tconst compactForm = EntryManager.getCompactViewForm();\n\t\tif (!compactForm.isShown())\n\t\t{\n\t\t\tcompactForm.unsubscribeAll('onClose');\n\t\t\tif (Type.isFunction(options.closeCallback))\n\t\t\t{\n\t\t\t\tcompactForm.subscribe('onClose', options.closeCallback);\n\t\t\t}\n\t\t\tcompactForm.showInEditMode(options);\n\t\t}\n\t}\n\n\tstatic getEntryInstance(entry, userIndex, options = {})\n\t{\n\t\tlet entryInstance = null;\n\t\tif (entry instanceof Entry)\n\t\t{\n\t\t\tentryInstance = entry;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (Type.isObject(entry) && Type.isObject(entry.data))\n\t\t\t{\n\t\t\t\tentryInstance = new Entry({data: entry.data, userIndex: userIndex});\n\t\t\t}\n\t\t\telse if (Type.isObject(entry))\n\t\t\t{\n\t\t\t\tentryInstance = new Entry({data: entry, userIndex: userIndex});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tentryInstance = EntryManager.getNewEntry(options);\n\t\t\t}\n\t\t}\n\n\t\treturn entryInstance;\n\t}\n\n\tstatic getUserIndex(options = {})\n\t{\n\t\treturn EntryManager.userIndex\n\t}\n\n\tstatic setUserIndex(userIndex)\n\t{\n\t\tEntryManager.userIndex = userIndex;\n\t}\n\n\thandlePullChanges(params)\n\t{\n\t\tif (!BX.Calendar.Util.checkRequestId(params.requestUid))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst compactForm = EntryManager.getCompactViewForm();\n\t\tif (\n\t\t\tcompactForm\n\t\t\t&& compactForm.isShown()\n\t\t)\n\t\t{\n\t\t\tcompactForm.handlePull(params);\n\t\t}\n\n\t\tBX.SidePanel.Instance.getOpenSliders().forEach(slider =>\n\t\t{\n\t\t\tconst data = EntryManager.slidersMap.get(slider);\n\t\t\tif (\n\t\t\t\tdata\n\t\t\t\t&& data.entry\n\t\t\t\t&& data.entry.parentId === parseInt(params?.fields?.PARENT_ID)\n\t\t\t)\n\t\t\t{\n\t\t\t\tif (\n\t\t\t\t\tparams.command === 'delete_event'\n\t\t\t\t\t&& data.entry.getType() === params?.fields?.CAL_TYPE\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tslider.close();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tif (params.command === 'set_meeting_status')\n\t\t{\n\t\t\ttop.BX.Event.EventEmitter.emit('BX.Calendar:doReloadCounters');\n\t\t}\n\t\telse if (params.command === 'delete_event' || params.command === 'edit_event')\n\t\t{\n\t\t\tif (\n\t\t\t\t!params.fields\n\t\t\t\t||\n\t\t\t\t(params?.fields?.IS_MEETING && params?.fields?.MEETING_STATUS === 'Q')\n\t\t\t)\n\t\t\t{\n\t\t\t\ttop.BX.Event.EventEmitter.emit('BX.Calendar:doReloadCounters');\n\t\t\t}\n\n\t\t\tif (params?.fields?.CAL_TYPE === 'location' && top.BX.Calendar?.Controls?.Location)\n\t\t\t{\n\t\t\t\ttop.BX.Calendar.Controls.Location.handlePull(params);\n\t\t\t}\n\t\t}\n\n\t\tconst calendarContext = Util.getCalendarContext();\n\t\tconst entrySectionId = parseInt(params?.fields?.SECTION_ID);\n\t\tlet sectionDisplayed = Type.isArray(params.sections)\n\t\t\t&& params.sections.find(section => {\n\t\t\t\treturn section.id === entrySectionId && section.isShown();\n\t\t\t});\n\n\t\tlet loadedEntry = params?.fields\n\t\t\t? EntryManager.getEntryInstance(\n\t\t\t\tcalendarContext.getView().getEntryById(EntryManager.getEntryUniqueId(params.fields)),\n\t\t\t)\n\t\t\t: null;\n\n\t\tif ((sectionDisplayed || loadedEntry) && calendarContext)\n\t\t{\n\t\t\tcalendarContext.reloadDebounce();\n\t\t}\n\t}\n\n\tstatic registerDeleteTimeout(params)\n\t{\n\t\tEntryManager.delayedActionList.push(params);\n\t}\n\n\tstatic unregisterDeleteTimeout({action, data})\n\t{\n\t\tEntryManager.delayedActionList = EntryManager.delayedActionList.filter((item) => {\n\t\t\treturn item.action !== action\n\t\t\t\t|| item.data.entryId !== data.entryId\n\t\t\t\t|| item.data.recursionMode !== data.recursionMode\n\t\t\t\t|| item.data.excludeDate !== data.excludeDate;\n\t\t});\n\t}\n\n\tstatic doDelayedActions()\n\t{\n\t\tlet requestList = [];\n\t\treturn new Promise(resolve => {\n\t\t\tif(!EntryManager.delayedActionList.length)\n\t\t\t{\n\t\t\t\tresolve();\n\t\t\t}\n\n\t\t\tEntryManager.delayedActionList.forEach(({action, data, params}) => {\n\n\t\t\t\tconst requestUid = parseInt(data.requestUid);\n\t\t\t\trequestList.push(data.requestUid);\n\n\t\t\t\tif (params.entry)\n\t\t\t\t{\n\t\t\t\t\tEntryManager.closeDeleteNotificationBalloon(params.entry);\n\t\t\t\t}\n\n\t\t\t\tBX.ajax.runAction(\n\t\t\t\t\t`calendar.api.calendarajax.${action}`,\n\t\t\t\t\t{data: data}\n\t\t\t\t).then(\n\t\t\t\t\t() => {\n\t\t\t\t\t\tType.isFunction(params.callback)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tparams.callback();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\trequestList = requestList.filter(uid => {return uid !== requestUid});\n\t\t\t\t\t\tif (!requestList.length)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t() => {\n\t\t\t\t\t\trequestList = requestList.filter(uid => {return uid !== requestUid});\n\t\t\t\t\t\tif (!requestList.length)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t);\n\n\t\t\t\tEntryManager.unregisterDeleteTimeout({action, data, params});\n\t\t\t});\n\t\t});\n\t}\n\n\tstatic getEntryUniqueId(entryData, entry)\n\t{\n\t\tlet sid = entryData.PARENT_ID || entryData.ID;\n\t\tif (entryData.RRULE)\n\t\t{\n\t\t\tsid += '|' + (entry ? Util.formatDate(entry.from) : Util.formatDate(BX.parseDate(entryData.DATE_FROM)));\n\t\t}\n\n\t\tif (entryData['~TYPE'] === 'tasks')\n\t\t{\n\t\t\tsid += '|' + 'task';\n\t\t}\n\t\treturn sid;\n\t}\n\n\tstatic registerEntrySlider(entry, control)\n\t{\n\t\tconst slider = Util.getBX().SidePanel.Instance.getTopSlider();\n\t\tif (slider)\n\t\t{\n\t\t\tEntryManager.slidersMap.set(slider, {entry, control});\n\t\t}\n\t}\n\n\tstatic getNewEntryReminders(type = 'withTime')\n\t{\n\t\tconst userSettings = Util.getUserSettings();\n\t\tif (Type.isObjectLike(userSettings.defaultReminders)\n\t\t\t&& Type.isArray(userSettings.defaultReminders[type])\n\t\t\t&& userSettings.defaultReminders[type].length)\n\t\t{\n\t\t\treturn userSettings.defaultReminders[type];\n\t\t}\n\n\t\treturn type === 'withTime'\n\t\t\t? [{type: 'min', count: 15}]\n\t\t\t: [{type: 'daybefore', before: 0, time: 480}];\n\t}\n\n\tstatic setNewEntryReminders(type = 'withTime', reminders)\n\t{\n\t\tconst userSettings = Util.getUserSettings();\n\t\tif (Type.isObjectLike(userSettings.defaultReminders))\n\t\t{\n\t\t\tuserSettings.defaultReminders[type] = reminders;\n\t\t}\n\t\tUtil.setUserSettings(userSettings);\n\t}\n\n\t//this is because extensions cant be loaded in iframe with import\n\tstatic createConfirmEditDialog()\n\t{\n\t\tconst bx = Util.getBX();\n\t\treturn new bx.Calendar.Controls.ConfirmEditDialog();\n\t}\n\n\tstatic createConfirmStatusDialog()\n\t{\n\t\tconst bx = Util.getBX();\n\t\treturn new bx.Calendar.Controls.ConfirmStatusDialog();\n\t}\n\n\tstatic createReinviteUserDialog()\n\t{\n\t\tconst bx = Util.getBX();\n\t\treturn new bx.Calendar.Controls.ReinviteUserDialog();\n\t}\n\n\tstatic createConfirmedEmailDialog()\n\t{\n\t\tconst bx = Util.getBX();\n\t\treturn new bx.Calendar.Controls.ConfirmedEmailDialog();\n\t}\n\n\tstatic createEmailLimitationDialog()\n\t{\n\t\tconst bx = Util.getBX();\n\t\treturn new bx.Calendar.Controls.EmailLimitationDialog();\n\t}\n}","import { Type } from 'main.core';\nimport { EntryManager } from '../../../../../../../../../calendar/install/js/calendar/entry/src/entry';\n\ntype Params = {\n\ttype: string;\n\tlocationAccess: boolean;\n\tuserId: number;\n\townerId: number;\n}\n\nexport class Calendar\n{\n\t#type: string;\n\t#locationAccess: boolean;\n\t#userId: number;\n\t#ownerId: number;\n\t#calendarInstance = null;\n\n\tconstructor(params: Params)\n\t{\n\t\tif (!this.#isTypeAllowed(params.type))\n\t\t{\n\t\t\tthrow new Error('BX.Socialnetwork.Spaces.Calendar: calendar type is not allowed');\n\t\t}\n\n\t\tthis.#type = params.type;\n\t\tthis.#userId = params.userId;\n\t\tthis.#ownerId = params.ownerId;\n\t\tthis.#locationAccess = params.locationAccess;\n\t}\n\n\t#isTypeAllowed(type: string): boolean\n\t{\n\t\tconst allowedType = ['user', 'group'];\n\n\t\treturn allowedType.includes(type);\n\t}\n\n\t#setCalendarInstance(): void\n\t{\n\t\tif (Type.isUndefined(window.BXEventCalendar))\n\t\t{\n\t\t\tthrow new TypeError('BX.Socialnetwork.Spaces.CalendarSettings: BXEventCalendar is not allowed');\n\t\t}\n\n\t\tconst calendarId = Object.keys(window.BXEventCalendar.instances)[0];\n\t\tthis.#calendarInstance = window.BXEventCalendar.instances[calendarId];\n\t}\n\n\tgetCalendarInstance(): BXEventCalendar.instances\n\t{\n\t\tif (!this.#calendarInstance)\n\t\t{\n\t\t\tthis.#setCalendarInstance();\n\t\t}\n\n\t\treturn this.#calendarInstance;\n\t}\n\n\taddEvent(): void\n\t{\n\t\tEntryManager.openEditSlider({\n\t\t\ttype: this.#type,\n\t\t\tisLocationCalendar: false,\n\t\t\tlocationAccess: this.#locationAccess,\n\t\t\townerId: this.#ownerId,\n\t\t\tuserId: this.#userId,\n\t\t});\n\t}\n\n\taddTask(): void\n\t{\n\t\tBX.SidePanel.Instance.open(this.#getUrlForAddTask(this.#type), { loader: 'task-new-loader' });\n\t}\n\n\t#getUrlForAddTask(type: string): string\n\t{\n\t\tlet url = '';\n\t\tswitch (type)\n\t\t{\n\t\t\tcase 'group':\n\t\t\t\turl = `/workgroups/group/${this.#ownerId}`;\n\t\t\t\tbreak;\n\t\t\tcase 'user':\n\t\t\t\turl = `/company/personal/user/${this.#ownerId}`;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthrow new Error('BX.Socialnetwork.Spaces.Calendar: url for add task is empty');\n\t\t}\n\n\t\treturn (`${url}/tasks/task/edit/0/`);\n\t}\n}\n","import { Loc } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { Menu } from 'main.popup';\nimport { Calendar } from './calendar';\n\ntype Params = {\n\tbindElement: ?HTMLElement,\n\tcalendar: Calendar,\n\tshowMenu: ?boolean,\n}\n\nexport class CalendarAddButtonMenu extends EventEmitter\n{\n\t#menu: Menu;\n\t#calendar: Calendar;\n\n\tconstructor(params: Params)\n\t{\n\t\tsuper();\n\n\t\tthis.setEventNamespace('BX.Socialnetwork.Spaces.CalendarAddButtonMenu');\n\n\t\tif (params.showMenu ?? true)\n\t\t{\n\t\t\tthis.#menu = this.#createMenu(params.bindElement);\n\t\t}\n\n\t\tthis.#calendar = params.calendar;\n\t}\n\n\tshow(): void\n\t{\n\t\tthis.#menu.show();\n\t}\n\n\t#createMenu(bindElement: HTMLElement): Menu\n\t{\n\t\tconst menu = new Menu({\n\t\t\tid: 'spaces-calendar-add-button-menu',\n\t\t\tbindElement,\n\t\t\tcloseByEsc: true,\n\n\t\t});\n\n\t\tmenu.addMenuItem({\n\t\t\ttext: Loc.getMessage('SN_SPACES_CALENDAR_CREATE_EVENT'),\n\t\t\tdataset: { id: 'spaces-calendar-add-button-menu-create-event' },\n\t\t\tonclick: () => {\n\t\t\t\tmenu.close();\n\t\t\t\tthis.#calendar.addEvent();\n\t\t\t},\n\t\t});\n\n\t\tmenu.addMenuItem({\n\t\t\ttext: Loc.getMessage('SN_SPACES_CALENDAR_CREATE_TASK'),\n\t\t\tdataset: { id: 'spaces-calendar-add-button-menu-create-task' },\n\t\t\tonclick: () => {\n\t\t\t\tmenu.close();\n\t\t\t\tthis.#calendar.addTask();\n\t\t\t},\n\t\t});\n\n\t\treturn menu;\n\t}\n}\n","import { Loc, Type } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { Menu } from 'main.popup';\nimport { Calendar } from './calendar';\n\ntype Params = {\n\tbindElement: HTMLElement,\n\tcalendar: Calendar,\n}\n\nexport class CalendarSettings extends EventEmitter\n{\n\t#menu: Menu;\n\n\tconstructor(params: Params)\n\t{\n\t\tsuper();\n\n\t\tthis.setEventNamespace('BX.Socialnetwork.Spaces.CalendarSettings');\n\n\t\tif (Type.isNil(params.calendar))\n\t\t{\n\t\t\tthrow new TypeError('BX.Socialnetwork.Spaces.CalendarSettings: calendar is not available');\n\t\t}\n\n\t\tthis.#menu = this.#createMenu(params.bindElement, params.calendar);\n\t}\n\n\tshow(): void\n\t{\n\t\tthis.#menu.show();\n\t}\n\n\t#createMenu(bindElement: HTMLElement, calendar: Calendar): Menu\n\t{\n\t\tconst menu = new Menu({\n\t\t\tid: 'spaces-calendar-settings',\n\t\t\tbindElement,\n\t\t\tcloseByEsc: true,\n\t\t});\n\n\t\tif (\n\t\t\tcalendar.getCalendarInstance().util.userIsOwner()\n\t\t\t|| calendar.getCalendarInstance().util.config.TYPE_ACCESS\n\t\t)\n\t\t{\n\t\t\tmenu.addMenuItem({\n\t\t\t\ttext: Loc.getMessage('SN_SPACES_CALENDAR_SETTINGS_SETTINGS'),\n\t\t\t\tonclick: () => {\n\t\t\t\t\tmenu.close();\n\t\t\t\t\tthis.#openSettings(calendar);\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\tmenu.addMenuItem({\n\t\t\ttext: Loc.getMessage('SN_SPACES_CALENDAR_SETTINGS_CALENDARS'),\n\t\t\tonclick: () => {\n\t\t\t\tmenu.close();\n\t\t\t\tthis.#openCalendars(calendar);\n\t\t\t},\n\t\t});\n\n\t\treturn menu;\n\t}\n\n\t#openCalendars(calendar: Calendar): void\n\t{\n\t\t// eslint-disable-next-line promise/catch-or-return\n\t\tthis.#getSectionInterface()\n\t\t\t.then((SectionInterface) => {\n\t\t\t\tif (!this.sectionInterface)\n\t\t\t\t{\n\t\t\t\t\tconst calendarInstance = calendar.getCalendarInstance();\n\n\t\t\t\t\tthis.sectionInterface = new SectionInterface(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcalendarContext: calendarInstance,\n\t\t\t\t\t\t\treadonly: calendarInstance.util.readOnlyMode(),\n\t\t\t\t\t\t\tsectionManager: calendarInstance.sectionManager,\n\t\t\t\t\t\t},\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tthis.sectionInterface.show();\n\t\t\t});\n\t}\n\n\t#openSettings(calendar: Calendar): void\n\t{\n\t\t// eslint-disable-next-line promise/catch-or-return\n\t\tthis.#getSettingsInterface()\n\t\t\t.then((SettingsInterface) => {\n\t\t\t\tif (!this.settingsInterface)\n\t\t\t\t{\n\t\t\t\t\tconst calendarInstance = calendar.getCalendarInstance();\n\n\t\t\t\t\tif (Type.isNull(calendarInstance))\n\t\t\t\t\t{\n\t\t\t\t\t\tthrow new TypeError('BX.Socialnetwork.Spaces.CalendarSettings: calendar instance is not available');\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.settingsInterface = new SettingsInterface(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcalendarContext: calendarInstance,\n\t\t\t\t\t\t\tshowPersonalSettings: calendarInstance.util.userIsOwner(),\n\t\t\t\t\t\t\tshowGeneralSettings: Boolean(calendarInstance.util.config.perm\n\t\t\t\t\t\t\t\t&& calendarInstance.util.config.perm.access),\n\t\t\t\t\t\t\tsettings: calendarInstance.util.config.settings,\n\t\t\t\t\t\t},\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tthis.settingsInterface.show();\n\t\t\t});\n\t}\n\n\t#getSectionInterface(): Promise\n\t{\n\t\treturn new Promise((resolve) => {\n\t\t\tconst bx = BX.Calendar.Util.getBX();\n\t\t\tif (bx.Calendar.SectionInterface)\n\t\t\t{\n\t\t\t\tresolve(bx.Calendar.SectionInterface);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tconst extensionName = 'calendar.sectioninterface';\n\t\t\t\t// eslint-disable-next-line promise/catch-or-return\n\t\t\t\tbx.Runtime.loadExtension(extensionName)\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\tif (bx.Calendar.SectionInterface)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tresolve(bx.Calendar.SectionInterface);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconsole.error(`Extension ${extensionName} not found`);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\t#getSettingsInterface(): Promise\n\t{\n\t\treturn new Promise((resolve) => {\n\t\t\tconst bx = BX.Calendar.Util.getBX();\n\t\t\tif (bx.Calendar.SettingsInterface)\n\t\t\t{\n\t\t\t\tresolve(bx.Calendar.SettingsInterface);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tconst extensionName = 'calendar.settingsinterface';\n\t\t\t\t// eslint-disable-next-line promise/catch-or-return\n\t\t\t\tbx.Runtime.loadExtension(extensionName)\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\tif (bx.Calendar.SettingsInterface)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tresolve(bx.Calendar.SettingsInterface);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconsole.error(`Extension ${extensionName} not found`);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n}\n","import { Dom, Event, Tag, Type, Loc } from 'main.core';\nimport { Filter } from '../filter';\nimport { CalendarAddButtonMenu } from './calendar-add-button-menu';\nimport { CalendarSettings } from './calendar-settings';\nimport { Calendar } from './calendar';\n\ntype Params = {\n\ttype: string;\n\tlocationAccess: ?string;\n\tuserId: number;\n\townerId: number;\n\tfilterId: string,\n\tfilterContainer: HTMLElement,\n}\n\nexport class CalendarToolbar\n{\n\t#calendar: Calendar;\n\t#addButtonMenu: CalendarAddButtonMenu;\n\t#settings: CalendarSettings;\n\t#filter: Filter;\n\n\tconstructor(params: Params)\n\t{\n\t\tthis.#calendar = new Calendar({\n\t\t\ttype: params.type,\n\t\t\t// eslint-disable-next-line no-constant-binary-expression\n\t\t\tlocationAccess: params.locationAccess === '1' ?? false,\n\t\t\tuserId: params.userId,\n\t\t\townerId: params.ownerId,\n\t\t});\n\n\t\tthis.#filter = new Filter({\n\t\t\tfilterId: params.filterId,\n\t\t\tfilterContainer: params.filterContainer,\n\t\t});\n\t}\n\n\trenderAddBtnTo(container: HTMLElement)\n\t{\n\t\tif (!Type.isDomNode(container))\n\t\t{\n\t\t\tthrow new Error('BX.Socialnetwork.Spaces.CalendarToolbar: HTMLElement for add btn not found');\n\t\t}\n\n\t\tDom.append(this.#renderAddBtn(), container);\n\t}\n\n\trenderSettingsBtnTo(container: HTMLElement)\n\t{\n\t\tif (!Type.isDomNode(container))\n\t\t{\n\t\t\tthrow new Error('BX.Socialnetwork.Spaces.CalendarToolbar: HTMLElement for settings btn not found');\n\t\t}\n\n\t\tDom.append(this.#renderSettingsBtn(), container);\n\t}\n\n\t#renderAddBtn(): HTMLElement\n\t{\n\t\tconst { node, mainBtn, menuBtn } = Tag.render`\n\t\t\t<div class=\"ui-btn-split ui-btn-success ui-btn-round ui-btn-no-caps\" ref=\"node\">\n\t\t\t\t<button class=\"ui-btn-main\" data-id=\"spaces-calendar-add-main-btn\" ref=\"mainBtn\">\n\t\t\t\t\t${Loc.getMessage('SN_SPACES_CALENDAR_CREATE_MEETING')}\n\t\t\t\t</button>\n\t\t\t\t<button \n\t\t\t\t\tclass=\"ui-btn-menu\" \n\t\t\t\t\tid=\"spaces-calendar-toolbar-menu\" \n\t\t\t\t\tdata-id=\"spaces-calendar-add-menu-btn\"\n\t\t\t\t\tref=\"menuBtn\"\n\t\t\t\t>\t\t\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t`;\n\n\t\tEvent.bind(mainBtn, 'click', this.#addMainClick.bind(this));\n\t\tEvent.bind(menuBtn, 'click', this.#addMenuClick.bind(this));\n\n\t\treturn node;\n\t}\n\n\t#renderSettingsBtn(): HTMLElement\n\t{\n\t\tconst node = Tag.render`\n\t\t\t<button \n\t\t\t\tclass=\"ui-btn ui-btn-light ui-btn-sm ui-btn-round ui-btn-themes\" \n\t\t\t\tdata-id=\"spaces-calendar-settings-btn\"\n\t\t\t>\n\t\t\t\t<div class=\"ui-icon-set --more\" style=\"--ui-icon-set__icon-color: white;\"></div>\n\t\t\t</button>\n\t\t`;\n\n\t\tEvent.bind(node, 'click', this.#settingsClick.bind(this));\n\n\t\treturn node;\n\t}\n\n\t#createAddSettings(): void\n\t{\n\t\tthis.#addButtonMenu = new CalendarAddButtonMenu({\n\t\t\tbindElement: document.getElementById('spaces-calendar-toolbar-menu'),\n\t\t\tcalendar: this.#calendar,\n\t\t});\n\t}\n\n\t#addMainClick(): void\n\t{\n\t\tthis.#calendar.addEvent();\n\t}\n\n\t#addMenuClick(): void\n\t{\n\t\tif (!this.#addButtonMenu)\n\t\t{\n\t\t\tthis.#createAddSettings();\n\t\t}\n\n\t\tthis.#addButtonMenu.show();\n\t}\n\n\t#settingsClick(event): void\n\t{\n\t\tif (!this.#settings)\n\t\t{\n\t\t\tthis.#settings = new CalendarSettings({\n\t\t\t\tbindElement: event.target,\n\t\t\t\tcalendar: this.#calendar,\n\t\t\t});\n\t\t}\n\n\t\tthis.#settings.show();\n\t}\n}\n","import { Loc, Type } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { Menu } from 'main.popup';\nimport { Calendar } from '../calendar/calendar';\n\ntype Params = {\n\tbindElement: HTMLElement,\n\tcalendar: Calendar,\n}\n\nexport class DiscussionsAddButtonMenu extends EventEmitter\n{\n\t#menu: Menu;\n\n\tconstructor(params: Params)\n\t{\n\t\tsuper();\n\n\t\tthis.setEventNamespace('BX.Socialnetwork.Spaces.DiscussionsAddButtonMenu');\n\n\t\tif (Type.isNil(params.calendar))\n\t\t{\n\t\t\tthrow new TypeError('BX.Socialnetwork.Spaces.DiscussionsAddButtonMenu: calendar is not allowed');\n\t\t}\n\n\t\tthis.#menu = this.#createMenu(params.bindElement, params.calendar);\n\t}\n\n\tshow(): void\n\t{\n\t\tthis.#menu.show();\n\t}\n\n\t#createMenu(bindElement: HTMLElement, calendar: Calendar): Menu\n\t{\n\t\tconst fileUploadItemId = 'spaces-discussions-add-button-menu-file-item';\n\n\t\tconst menu = new Menu({\n\t\t\tid: 'spaces-discussions-add-button-menu',\n\t\t\tbindElement,\n\t\t\tcloseByEsc: true,\n\t\t\tevents: {\n\t\t\t\tonShow: (event) => {\n\t\t\t\t\tthis.emit('showMenu', {\n\t\t\t\t\t\tfileUploadContainer: menu.getMenuItem(fileUploadItemId).getContainer(),\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tonClose: () => {\n\t\t\t\t\tthis.emit('closeMenu', {\n\t\t\t\t\t\tfileUploadContainer: menu.getMenuItem(fileUploadItemId).getContainer(),\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\n\t\tmenu.addMenuItem({\n\t\t\ttext: Loc.getMessage('SN_SPACES_DISCUSSIONS_CREATE_TASK'),\n\t\t\tdataset: { id: 'spaces-discussions-add-button-menu-create-task' },\n\t\t\tonclick: () => {\n\t\t\t\tmenu.close();\n\t\t\t\tcalendar.addTask();\n\t\t\t},\n\t\t});\n\n\t\tmenu.addMenuItem({\n\t\t\ttext: Loc.getMessage('SN_SPACES_DISCUSSIONS_ORGANIZE_EVENT'),\n\t\t\tdataset: { id: 'spaces-discussions-add-button-menu-organize_event' },\n\t\t\tonclick: () => {\n\t\t\t\tmenu.close();\n\t\t\t\tcalendar.addEvent();\n\t\t\t},\n\t\t});\n\n\t\tmenu.addMenuItem({\n\t\t\ttext: Loc.getMessage('SN_SPACES_DISCUSSIONS_UPLOAD_FILE'),\n\t\t\tdataset: { id: 'spaces-discussions-add-button-menu-file' },\n\t\t\tid: fileUploadItemId,\n\t\t});\n\n\t\treturn menu;\n\t}\n}\n","import { ajax, Dom, Loc } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { Menu } from 'main.popup';\n\ntype Params = {\n\tbindElement: HTMLElement,\n\tisSmartTrackingMode: string,\n\tmainFilterId: string,\n}\n\nexport class DiscussionsSettings extends EventEmitter\n{\n\t#menu: Menu;\n\t#isSmartTrackingMode: string;\n\t#mainFilterId: string;\n\n\tstatic SWITCHER = 'smart_tracking';\n\tstatic SELECTED = 'menu-popup-item-accept';\n\tstatic DESELECTED = 'menu-popup-item-none';\n\n\tconstructor(params: Params)\n\t{\n\t\tsuper();\n\n\t\tthis.setEventNamespace('BX.Socialnetwork.Spaces.DiscussionsSettings');\n\n\t\tthis.#mainFilterId = params.mainFilterId;\n\t\tthis.#isSmartTrackingMode = String(params.isSmartTrackingMode) === 'Y';\n\t\tthis.#menu = this.#createMenu(params.bindElement);\n\t}\n\n\tshow(): void\n\t{\n\t\tthis.#menu.show();\n\t}\n\n\t#switch(): void\n\t{\n\t\tthis.#switchMode()\n\t\t\t.then((result) => {\n\t\t\t\tthis.#switchStyle(result.data.mode);\n\t\t\t\tthis.#refresh();\n\t\t\t});\n\t}\n\n\t#createMenu(bindElement: HTMLElement): Menu\n\t{\n\t\tconst menu = new Menu({\n\t\t\tid: 'spaces-discussions-settings',\n\t\t\tbindElement,\n\t\t\tcloseByEsc: true,\n\t\t});\n\n\t\tmenu.addMenuItem({\n\t\t\tid: DiscussionsSettings.SWITCHER,\n\t\t\ttext: Loc.getMessage('SN_SPACES_DISCUSSIONS_SETTINGS_SMART_TRACKING'),\n\t\t\tclassName: this.#isSmartTrackingMode ? DiscussionsSettings.DESELECTED : DiscussionsSettings.SELECTED,\n\t\t\tonclick: this.#switch.bind(this),\n\t\t});\n\n\t\tmenu.getMenuItem();\n\n\t\treturn menu;\n\t}\n\n\t#getStyleFromMode(mode: string): string\n\t{\n\t\tif (mode === 'Y')\n\t\t{\n\t\t\treturn DiscussionsSettings.DESELECTED;\n\t\t}\n\n\t\treturn DiscussionsSettings.SELECTED;\n\t}\n\n\t#switchMode(): Promise\n\t{\n\t\treturn ajax.runAction(\n\t\t\t'socialnetwork.api.livefeed.spaces.switcher.track',\n\t\t\t{\n\t\t\t\tdata: {\n\t\t\t\t\tswitcher: {\n\t\t\t\t\t\ttype: DiscussionsSettings.SWITCHER,\n\t\t\t\t\t\tspaceId: 0,\n\t\t\t\t\t},\n\t\t\t\t\tspace: 0,\n\t\t\t\t},\n\t\t\t},\n\t\t);\n\t}\n\n\t#switchStyle(mode: string): string\n\t{\n\t\tconst item = this.#menu.getMenuItem(DiscussionsSettings.SWITCHER);\n\t\tDom.removeClass(item.layout.item, DiscussionsSettings.SELECTED);\n\t\tDom.removeClass(item.layout.item, DiscussionsSettings.DESELECTED);\n\t\tDom.addClass(item.layout.item, this.#getStyleFromMode(mode));\n\t}\n\n\t#refresh()\n\t{\n\t\tconst filter = BX.Main.filterManager.getById(this.#mainFilterId);\n\n\t\tif (filter instanceof BX.Main.Filter)\n\t\t{\n\t\t\tfilter.getApi().apply();\n\t\t}\n\t}\n}","import { ajax, Loc, Tag, Text } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { Menu } from 'main.popup';\nimport { PopupComponentsMaker } from 'ui.popupcomponentsmaker';\nimport { Switcher } from 'ui.switcher';\n\ntype Params = {\n\tuserId: number,\n\tspaceId: number,\n\tbindElement: HTMLElement,\n\tspaceName: string,\n\tcompositionFilters: any,\n\tmainFilterId: string,\n\tappliedFields: string[],\n}\n\nexport class DiscussionsComposition extends EventEmitter\n{\n\t#params: Params;\n\t#menu: Menu;\n\t#fields: string[];\n\t#appliedFields: string[];\n\t#switchers: Object;\n\t#spaceName: string;\n\t#spaceId: number;\n\t#userId: number;\n\n\tconstructor(params: Params)\n\t{\n\t\tsuper();\n\n\t\tthis.setEventNamespace('BX.Socialnetwork.Spaces.DiscussionsComposition');\n\n\t\tthis.#params = params;\n\t\tthis.#init();\n\t}\n\n\t#init()\n\t{\n\t\tthis.#spaceId = this.#params.spaceId;\n\t\tthis.#userId = this.#params.userId;\n\t\tthis.#spaceName = this.#params.spaceName;\n\t\tthis.#fields = this.#params.compositionFilters;\n\t\tthis.#appliedFields = JSON.parse(this.#params.appliedFields);\n\t\tthis.#switchers = {};\n\t\tthis.#menu = this.#createMenu(this.#params.bindElement);\n\t}\n\n\tshow()\n\t{\n\t\tthis.#menu.show();\n\t}\n\n\t#createMenu(bindElement: HTMLElement): PopupComponentsMaker\n\t{\n\t\treturn new PopupComponentsMaker({\n\t\t\tid: 'spaces-discussions-composition',\n\t\t\ttarget: bindElement,\n\t\t\tpadding: 0,\n\t\t\tcontentPadding: 0,\n\t\t\toffsetTop: 5,\n\t\t\twidth: 300,\n\t\t\tuseAngle: false,\n\t\t\tcontent: [\n\t\t\t\t{\n\t\t\t\t\thtml: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\thtml: this.#renderMenuContent(),\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t],\n\t\t});\n\t}\n\n\t#renderMenuContent()\n\t{\n\t\treturn Tag.render`\n\t\t\t<div>\n\t\t\t\t${this.#renderHeader()}\n\t\t\t\t${this.#renderFilters()}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\t#renderHeader(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"sn-spaces-discussions-composition-header\" data-id=\"spaces-discussions-composition-header\">\n\t\t\t\t<div>\n\t\t\t\t\t<div class=\"sn-spaces-discussions-composition-header-title\">\n\t\t\t\t\t\t${Loc.getMessage('SN_SPACES_DISCUSSION_COMPOSITION_TITLE')}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"sn-spaces-discussions-composition-header-space-name\">\n\t\t\t\t\t\t${Text.encode(this.#spaceName)}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"sn-spaces-discussions-composition-header-icon\"></div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\t#renderFilters(): HTMLElement\n\t{\n\t\tconst filtersContainer = Tag.render`\n\t\t\t<div data-id=\"spaces-discussions-composition-filters\" class=\"sn-spaces-discussions-composition-filters\"></div>\n\t\t`;\n\n\t\tthis.#fields.forEach((field: string) => {\n\t\t\tconst messageId = `SN_SPACES_DISCUSSIONS_COMPOSITION_FILTER_${field.toUpperCase()}`;\n\n\t\t\tconst { container, switchButton } = Tag.render`\n\t\t\t\t<div\n\t\t\t\t\tid=\"spaces-discussions-composition-filter-${field}\" \n\t\t\t\t\tref=\"container\"\n\t\t\t\t\tclass=\"sn-spaces-discussions-composition-filters-item\"\n\t\t\t\t>\n\t\t\t\t\t<div ref=\"switchButton\" class=\"sn-spaces-discussions-composition-item-switcher\"></div>\n\t\t\t\t\t<div class=\"sn-spaces__popup-settings_name\">\n\t\t\t\t\t\t${Loc.getMessage(messageId)}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\n\t\t\tthis.#switchers[field] = new Switcher({\n\t\t\t\tnode: switchButton,\n\t\t\t\tchecked: this.#appliedFields.includes(field),\n\t\t\t\tcolor: 'green',\n\t\t\t\tsize: 'small',\n\t\t\t\thandlers: {\n\t\t\t\t\ttoggled: () => {\n\t\t\t\t\t\tif (this.#switchers[field].isChecked())\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.#appliedFields.push(field);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.#appliedFields.splice(this.#appliedFields.indexOf(field), 1);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.#applyComposition();\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t});\n\n\t\t\tfiltersContainer.append(container);\n\t\t});\n\n\t\treturn filtersContainer;\n\t}\n\n\t#applyComposition()\n\t{\n\t\tthis.#setCompositionSettings().then(() => {\n\t\t\tthis.#refresh();\n\t\t});\n\t}\n\n\t#setCompositionSettings(): Promise\n\t{\n\t\treturn ajax.runAction('socialnetwork.api.livefeed.spaces.composition.setSettings', {\n\t\t\tdata: {\n\t\t\t\tcomposition: this.#spaceId,\n\t\t\t\tsettings: this.#appliedFields,\n\t\t\t},\n\t\t});\n\t}\n\n\t#refresh(): void\n\t{\n\t\tconst params = {\n\t\t\tcomposition: this.#appliedFields,\n\t\t\tcontext: 'spaces',\n\t\t\tuseBXMainFilter: 'Y',\n\t\t\tspaceId: this.#spaceId,\n\t\t\tspaceUserId: this.#userId,\n\t\t};\n\t\tBX.Livefeed.PageInstance.refresh(params, null);\n\t}\n}","import { Dom, Event, Tag, Type, Loc, Cache, Reflection } from 'main.core';\nimport { Filter } from '../filter';\nimport { DiscussionsAddButtonMenu } from './discussions-add-button-menu';\nimport { DiscussionsSettings } from './discussions-settings';\nimport { Calendar } from '../calendar/calendar';\nimport { PostForm } from 'socialnetwork.post-form';\nimport { DiscussionsComposition } from './discussions-composition';\nimport { BaseEvent } from 'main.core.events';\n\nconst NotificationCenter = Reflection.namespace('BX.UI.Notification.Center');\n\nimport '../css/discussions.css';\n\ntype Params = {\n\ttype: 'user' | 'group',\n\tlocationAccess: ?boolean,\n\tuserId: number,\n\townerId: number,\n\tspaceId: number,\n\tspaceName: string,\n\tcompositionFilters: Array<string>,\n\threfChangeSmartTrackingMode: string,\n\tisSmartTrackingMode: string,\n\tmainFilterId: string,\n\tpathToUserPage: string,\n\tpathToGroupPage: string,\n\tpathToFilesPage: string,\n\tfilterContainer: HTMLElement,\n}\n\nexport class DiscussionsToolbar\n{\n\t#cache = new Cache.MemoryCache();\n\n\t#postForm: PostForm;\n\t#addButtonMenu: DiscussionsAddButtonMenu;\n\t#composition: DiscussionsComposition;\n\t#settings: DiscussionsSettings;\n\t#filter: Filter;\n\n\tconstructor(params: Params)\n\t{\n\t\tthis.#setParams(params);\n\n\t\tthis.#filter = new Filter({\n\t\t\tfilterId: this.#getParam('filterId'),\n\t\t\tfilterContainer: this.#getParam('filterContainer'),\n\t\t});\n\t}\n\n\t#setParams(params: Params)\n\t{\n\t\tthis.#cache.set('params', params);\n\t}\n\n\t#getParam(param: string): any\n\t{\n\t\treturn this.#cache.get('params')[param];\n\t}\n\n\trenderAddBtnTo(container: HTMLElement): void\n\t{\n\t\tif (!Type.isDomNode(container))\n\t\t{\n\t\t\tthrow new Error('BX.Socialnetwork.Spaces.DiscussionsToolbar: HTMLElement for add btn not found');\n\t\t}\n\n\t\tDom.append(this.#renderAddBtn(), container);\n\t}\n\n\trenderCompositionBtnTo(container: HTMLElement): void\n\t{\n\t\tif (!Type.isDomNode(container))\n\t\t{\n\t\t\tthrow new Error('BX.Socialnetwork.Spaces.DiscussionsToolbar: HTMLElement for add composition btn not found');\n\t\t}\n\n\t\tDom.append(this.#renderCompositionBtn(), container);\n\t}\n\n\trenderSettingsBtnTo(container: HTMLElement): void\n\t{\n\t\tif (!Type.isDomNode(container))\n\t\t{\n\t\t\tthrow new Error('BX.Socialnetwork.Spaces.DiscussionsToolbar: HTMLElement for settings btn not found');\n\t\t}\n\n\t\tDom.append(this.#renderSettingsBtn(), container);\n\t}\n\n\t#renderAddBtn(): HTMLElement\n\t{\n\t\tconst { node, mainBtn, menuBtn } = Tag.render`\n\t\t\t<div class=\"ui-btn-split ui-btn-success ui-btn-round ui-btn-no-caps\" ref=\"node\">\n\t\t\t\t<button class=\"ui-btn-main\" data-id=\"spaces-discussions-add-main-btn\" ref=\"mainBtn\">\n\t\t\t\t\t${Loc.getMessage('SN_SPACES_DISCUSSIONS_START_DISCUSSIONS')}\n\t\t\t\t</button>\n\t\t\t\t<button \n\t\t\t\t\tclass=\"ui-btn-menu\"  \n\t\t\t\t\tid=\"spaces-discussions-toolbar-menu\" \n\t\t\t\t\tdata-id=\"spaces-discussions-add-menu-btn\"\n\t\t\t\t\tref=\"menuBtn\"\n\t\t\t\t>\t\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t`;\n\n\t\tEvent.bind(mainBtn, 'click', this.#addMainClick.bind(this));\n\t\tEvent.bind(menuBtn, 'click', this.#addMenuClick.bind(this));\n\n\t\treturn node;\n\t}\n\n\t#renderCompositionBtn(): HTMLElement\n\t{\n\t\tconst node = Tag.render`\n\t\t\t<button \n\t\t\t\tclass=\"ui-btn ui-btn-light ui-btn-sm ui-btn-round ui-btn-no-caps ui-btn-themes sn-spaces__toolbar-space_btn-options\"\n\t\t\t>\n\t\t\t\t<div class=\"ui-icon-set --customer-cards\" style=\"--ui-icon-set__icon-size: 25px;\"></div>\n\t\t\t\t<div class=\"sn-spaces__toolbar-space_btn-text\">\n\t\t\t\t\t${Loc.getMessage('SN_SPACES_DISCUSSIONS_COMPOSITION')}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"ui-icon-set --chevron-down\" style=\"--ui-icon-set__icon-size: 19px;\"></div>\n\t\t\t</button>\n\t\t`;\n\n\t\tthis.#composition = new DiscussionsComposition({\n\t\t\tuserId: this.#getParam('userId'),\n\t\t\tspaceId: this.#getParam('spaceId'),\n\t\t\tbindElement: node,\n\t\t\tspaceName: this.#getParam('spaceName'),\n\t\t\tcompositionFilters: this.#getParam('compositionFilters'),\n\t\t\tmainFilterId: this.#getParam('mainFilterId'),\n\t\t\tappliedFields: this.#getParam('appliedFields'),\n\t\t});\n\n\t\tEvent.bind(node, 'click', () => this.#composition.show());\n\n\t\treturn node;\n\t}\n\n\t#renderSettingsBtn(): HTMLElement\n\t{\n\t\tconst node = Tag.render`\n\t\t\t<button \n\t\t\t\tclass=\"ui-btn ui-btn-light ui-btn-sm ui-btn-round ui-btn-themes sn-spaces__toolbar-space_btn-more\" \n\t\t\t\tdata-id=\"spaces-discussions-settings-btn\"\n\t\t\t>\n\t\t\t\t<div class=\"ui-icon-set --more\"></div>\n\t\t\t</button>\n\t\t`;\n\n\t\tEvent.bind(node, 'click', this.#settingsClick.bind(this));\n\n\t\treturn node;\n\t}\n\n\t#addMainClick(): void\n\t{\n\t\tif (!this.#postForm)\n\t\t{\n\t\t\tthis.#postForm = new PostForm({\n\t\t\t\tgroupId: this.#getParam('type') === 'user' ? 0 : this.#getParam('ownerId'),\n\t\t\t\tpathToDefaultRedirect: this.#getParam('pathToUserPage'),\n\t\t\t\tpathToGroupRedirect: this.#getParam('pathToGroupPage'),\n\t\t\t});\n\t\t}\n\n\t\tthis.#postForm.show();\n\t}\n\n\t#createAddButtonMenu(): void\n\t{\n\t\tconst calendar = new Calendar({\n\t\t\ttype: this.#getParam('type'),\n\t\t\t// eslint-disable-next-line no-constant-binary-expression\n\t\t\tlocationAccess: this.#getParam('locationAccess') === '1' ?? false,\n\t\t\tuserId: this.#getParam('userId'),\n\t\t\townerId: this.#getParam('ownerId'),\n\t\t});\n\n\t\tthis.#addButtonMenu = new DiscussionsAddButtonMenu({\n\t\t\tbindElement: document.getElementById('spaces-discussions-toolbar-menu'),\n\t\t\tcalendar,\n\t\t});\n\n\t\t// eslint-disable-next-line @bitrix24/bitrix24-rules/no-bx\n\t\tBX.addCustomEvent(window, 'onPopupFileUploadClose', () => {\n\t\t\tthis.#showSuccessUploadNotify();\n\t\t});\n\n\t\tthis.#addButtonMenu.subscribe('showMenu', (baseEvent: BaseEvent) => {\n\t\t\tconst { fileUploadContainer } = baseEvent.getData();\n\t\t\tthis.#appendUploadInput(fileUploadContainer);\n\t\t});\n\t\tthis.#addButtonMenu.subscribe('closeMenu', (baseEvent: BaseEvent) => {\n\t\t\tconst { fileUploadContainer } = baseEvent.getData();\n\t\t\tthis.#hideUploadInput(fileUploadContainer);\n\t\t});\n\t}\n\n\t#appendUploadInput(container: HTMLElement)\n\t{\n\t\t// eslint-disable-next-line @bitrix24/bitrix24-rules/no-bx\n\t\tBX.onCustomEvent(window, 'onDiskUploadPopupShow', [container]);\n\t}\n\n\t#hideUploadInput(container: HTMLElement)\n\t{\n\t\t// eslint-disable-next-line @bitrix24/bitrix24-rules/no-bx\n\t\tBX.onCustomEvent(window, 'onDiskUploadPopupClose', [container]);\n\t}\n\n\t#showSuccessUploadNotify()\n\t{\n\t\tNotificationCenter.notify({\n\t\t\tcontent: Loc.getMessage('SN_SPACES_DISCUSSIONS_UPLOAD_FILE_NOTIFY_MESSAGE')\n\t\t\t\t.replace('#path#', this.#getParam('pathToFilesPage'))\n\t\t\t,\n\t\t});\n\t}\n\n\t#addMenuClick(): void\n\t{\n\t\tif (!this.#addButtonMenu)\n\t\t{\n\t\t\tthis.#createAddButtonMenu();\n\t\t}\n\n\t\tthis.#addButtonMenu.show();\n\t}\n\n\t#settingsClick(event): void\n\t{\n\t\tif (!this.#settings)\n\t\t{\n\t\t\tthis.#settings = new DiscussionsSettings({\n\t\t\t\tbindElement: event.target,\n\t\t\t\tisSmartTrackingMode: this.#getParam('isSmartTrackingMode'),\n\t\t\t\tmainFilterId: this.#getParam('mainFilterId'),\n\t\t\t});\n\t\t}\n\n\t\tthis.#settings.show();\n\t}\n}\n","type Params = {\n\tpathToInvite: string,\n}\n\nexport class UsersRouter\n{\n\t#sidePanelManager: BX.SidePanel.Manager;\n\n\t#pathToInvite: string;\n\n\tconstructor(params: Params)\n\t{\n\t\tthis.#sidePanelManager = BX.SidePanel.Instance;\n\n\t\tthis.#pathToInvite = params.pathToInvite;\n\t}\n\n\topenInvite()\n\t{\n\t\tthis.#sidePanelManager.open(this.#pathToInvite, {\n\t\t\twidth: 950,\n\t\t\tloader: 'group-invite-loader',\n\t\t});\n\t}\n}","import { Dom, Event, Tag, Type, Loc, Cache } from 'main.core';\nimport { UsersRouter } from './users-router';\n\ntype Params = {\n\tpathToInvite: string,\n}\n\nexport class UsersToolbar\n{\n\t#cache = new Cache.MemoryCache();\n\n\t#router: UsersRouter;\n\n\tconstructor(params: Params)\n\t{\n\t\tthis.#setParams(params);\n\n\t\tthis.#initServices(params);\n\t}\n\n\trenderInviteBtnTo(container: HTMLElement)\n\t{\n\t\tif (!Type.isDomNode(container))\n\t\t{\n\t\t\tthrow new Error('BX.Socialnetwork.Spaces.UsersToolbar: HTMLElement for add btn not found');\n\t\t}\n\n\t\tDom.append(this.#renderInviteBtn(), container);\n\t}\n\n\t#setParams(params: Params)\n\t{\n\t\tthis.#cache.set('params', params);\n\t}\n\n\t#getParam(param: string): any\n\t{\n\t\treturn this.#cache.get('params')[param];\n\t}\n\n\t#initServices(params: Params)\n\t{\n\t\tthis.#router = new UsersRouter({\n\t\t\tpathToInvite: params.pathToInvite,\n\t\t});\n\t}\n\n\t#renderInviteBtn(): HTMLElement\n\t{\n\t\tconst node = Tag.render`\n\t\t\t<div\n\t\t\t\tdata-id=\"spaces-users-invite-btn\"\n\t\t\t\tclass=\"ui-btn ui-btn-success ui-btn-round ui-btn-no-caps\"\n\t\t\t>\n\t\t\t\t${Loc.getMessage('SN_SPACES_USERS_INVITE_BTN')}\n\t\t\t</div>\n\t\t`;\n\n\t\tEvent.bind(node, 'click', this.#inviteClick.bind(this));\n\n\t\treturn node;\n\t}\n\n\t#inviteClick()\n\t{\n\t\tthis.#router.openInvite();\n\t}\n}\n"],"names":["Filter","EventEmitter","constructor","params","setEventNamespace","BX","Main","filterManager","getById","filterId","filterContainer","getFilterFieldsValues","subscribe","bind","applyFilter","toggleField","fieldName","value","getApi","extendFilter","getFilterFields","forEach","field","getAttribute","getFields","deleteField","getSearch","apply","Dom","addClass","removeClass","Object","keys","includes","Type","isArray","length","toString","TasksCounters","isUndefined","userId","parseInt","groupId","filter","filterRole","counters","isUserSpace","isScrumSpace","node","listContainerNode","listNode","render","Tag","readAll","Pull","moduleId","callback","data","command","eventHandlers","user_counter","project_counter","has","prototype","hasOwnProperty","call","method","uiClasses","activeClass","expired","counter","Event","new_comments","newComments","filterField","code","newCommentsActiveClass","counterNode","querySelector","textContent","ajax","runComponentAction","mode","then","response","catch","error","runAction","fields","role","expiredCounter","newCommentsCounter","action","console","TasksRobots","isTaskLimitsExceeded","canUseAutomation","sourceAnalytics","SidePanel","Instance","renderBtn","className","Loc","getMessage","UI","InfoHelper","show","isLimit","limitAnalyticsLabels","module","source","url","open","customLeftBoundary","cacheable","loader","TasksRouter","pathToGroupTasks","pathToGroupTasksTask","redirectTo","location","href","redirectToScrumTasks","urlParam","urlValue","viewUri","Uri","setQueryParam","redirectToScrumView","view","showTask","taskId","replace","showSidePanel","showByExtension","fullName","shortName","top","Runtime","loadExtension","exports","replaceAll","extension","KanbanOrder","SORT_ASC","SORT_DESC","SORT_ACTUAL","ReadAllItem","emptySpace","MenuItem","dataset","id","getViewId","text","onclick","emit","TasksSettingsMenu","bindElement","close","getMenuItems","menu","Menu","closeByEsc","menuItem","addMenuItem","camelCase","toLowerCase","group","toUpperCase","pascalCase","charAt","slice","TasksView","viewMode","getCurrentViewMode","availableModes","get","Map","Set","defaultModes","CompleteSprintItem","disabled","canCompleteSprint","KanbanSortItems","order","getItems","hiddenItems","items","push","html","KanbanSort","getInstance","disableCustomSort","Label","color","LabelColor","LIGHT_BLUE","fill","size","outerHTML","enableCustomSort","type","selectCustomOrder","classSelected","classDeselected","ScrumActiveSettings","activeSprintExists","BurnDownItem","ScrumCompleteSettings","PriorityItem","priority","isActive","Tasks","Scrum","Entry","setDisplayPriority","document","PriorityItems","ScrumPlanSettings","displayPriority","delimiter","ScrumSettings","tasksView","GroupCalendarSettings","TasksExcelManager","pathToTasks","getExportHref","options","isAll","getImportHref","ExportItem","excelManager","GroupSubtasksItem","shouldSubtasksBeGrouped","event","item","status","toggleClass","layout","gridManager","gridInstance","instance","reloadTable","window","reload","log","ImportCsvItem","TasksSortManager","gridId","setSort","taskSort","dir","direction","undefined","post","util","add_url_param","GRID_ID","by","res","JSON","parse","err","grid","sortByColumn","sort_by","sort_order","getRows","enableDragAndDrop","disableDragAndDrop","classSortField","classSortDir","SortItem","getItem","events","onSubMenuShow","target","getSubMenu","sortFields","flatMap","isActivityField","selectedItemType","selectedItem","sortManager","menuItems","itemNode","getContainer","isFieldItem","hasClass","isDirectionItem","getId","isFieldSelected","isDirectionSelected","style","SyncItem","syncScript","eval","GroupGanttSettings","permissions","import","export","ConfigureViewItem","GroupKanbanSettings","ExportExcelItem","GroupListSettings","GroupSettings","TasksScrum","pathToScrumBurnDown","router","currentCompletedSprint","renderSprintSelector","selector","selectorLabel","Text","encode","showCompletionForm","extensionName","baseEvent","getData","showBurnDown","selectorNode","dialog","Dialog","targetNode","width","height","multiple","dropdownMode","enableSearch","compactView","showAvatars","preselectedItems","entities","onlyCompleted","dynamicLoad","dynamicSearch","onCustomEvent","sprintId","name","customData","UserCalendarSettings","UserGanttSettings","UserKanbanSettings","UserListSettings","UserSettings","TasksViewList","viewList","toggle","viewItem","key","title","TasksToolbar","Cache","MemoryCache","renderAddBtnTo","container","isDomNode","Error","append","renderScrumAddBtnTo","renderCountersTo","ignoreList","add","renderViewBtnTo","renderScrumShortView","shortView","ShortView","isShortView","renderTo","changeShortView","renderScrumSprintSelector","renderScrumRobots","tasksRobots","renderSettingsBtnTo","set","param","CreationMenu","srcElement","createTaskLink","templatesListLink","FilesAddSettings","documentHandlers","fileUploadItemId","onShow","fileUploadContainer","getMenuItem","onClose","handler","handlerCode","FilesRouter","pathToTrash","pathToUserFilesVolume","redirectToTrash","redirectToVolume","FilesSettings","canChangeRights","canChangeBizproc","canChangeBizprocSettings","canCleanFiles","FilesDisk","createFolder","appendUploadInput","hideUploadInput","runCreatingDocFile","runCreatingFile","runCreatingTableFile","runCreatingPresentationFile","showRights","listAvailableFeatures","featureRestrictionMap","disk_folder_sharing","showRightsOnStorage","showBizproc","openSlider","showBizprocSettings","showSettingsOnBizproc","showNetworkDriveConnect","link","openWindowForSelectDocumentService","cleanTrash","openConfirmEmptyTrash","Disk","FilesToolbar","diskComponentId","networkDriveLink","pathToFilesBizprocWorkflowAdmin","renderCleanBtnTo","isTrashMode","EntryManager","getNewEntry","newEntryData","dateTime","getNewEntryTime","Date","userSettings","Util","getUserSettings","getCurrentUserId","ID","NAME","getNewEntryName","dateFrom","from","dateTo","to","SECT_ID","RoomsManager","getNewEntrySectionId","ownerId","SectionManager","REMIND","getNewEntryReminders","attendeesEntityList","entityId","ATTENDEE_LIST","TZ_FROM","timezoneName","timezoneDefaultName","TZ_TO","date","duration","getUsableDateTime","calendarContext","getCalendarContext","displayedViewRange","getDisplayedViewRange","isDate","start","getTime","end","startDate","workTime","getWorkTime","setHours","newEntryName","setNewEntryName","showEditEntryNotification","entryId","showNotification","click","balloon","openViewSlider","showNewEntryNotification","showDeleteEntryNotification","entry","Notification","Center","notify","getUniqueId","content","actions","cancelDelete","showReleaseLocationNotification","closeDeleteNotificationBalloon","getBalloonById","openEditSlider","bx","getBX","Calendar","SliderLoader","isLocationCalendar","roomsManager","locationAccess","dayOfWeekMonthFormat","locationCapacity","formDataValue","jumpToControl","eventId","isNull","entryDateFrom","timezoneOffset","deleteEntry","slider","getTopSlider","beforeDeleteHandler","deleteHandler","calendar","unsubscribe","delete","setMeetingStatus","Promise","resolve","isPlainObject","recursionMode","confirmed","isRecursive","showConfirmStatusDialog","entryParentId","parentId","currentDateFrom","formatDate","BaseEvent","setCurrentStatus","resolvePromiseCallback","confirmDeclineDialog","createConfirmStatusDialog","unsubscribeAll","isFunction","showConfirmEditDialog","confirmEditDialog","createConfirmEditDialog","showReInviteUsersDialog","reinviteUsersDialog","createReinviteUserDialog","showConfirmedEmailDialog","confirmedEmailDialog","createConfirmedEmailDialog","getLocationRepeatBusyErrorPopup","MessageBox","message","minHeight","minWidth","maxWidth","buttons","Dialogs","MessageBoxButtons","YES_CANCEL","onYes","onYesCallback","onCancel","onCancelCallback","yesCaption","cancelCaption","mediumButtonSize","popupOptions","onPopupClose","onPopupCloseCallback","padding","contentPadding","animation","showEmailLimitationDialog","limitationEmailDialog","createEmailLimitationDialog","getCompactViewForm","create","compactEntryForm","CompactEventForm","openCompactViewForm","compactForm","isShown","closeCallback","showInViewMode","openCompactEditForm","showInEditMode","getEntryInstance","userIndex","entryInstance","isObject","getUserIndex","setUserIndex","handlePullChanges","checkRequestId","requestUid","handlePull","getOpenSliders","slidersMap","PARENT_ID","getType","CAL_TYPE","IS_MEETING","MEETING_STATUS","Controls","Location","entrySectionId","SECTION_ID","sectionDisplayed","sections","find","section","loadedEntry","getView","getEntryById","getEntryUniqueId","reloadDebounce","registerDeleteTimeout","delayedActionList","unregisterDeleteTimeout","excludeDate","doDelayedActions","requestList","uid","entryData","sid","RRULE","parseDate","DATE_FROM","registerEntrySlider","control","isObjectLike","defaultReminders","count","before","time","setNewEntryReminders","reminders","setUserSettings","ConfirmEditDialog","ConfirmStatusDialog","ReinviteUserDialog","ConfirmedEmailDialog","EmailLimitationDialog","DELETE_DELAY_TIMEOUT","WeakMap","getCalendarInstance","addEvent","addTask","allowedType","BXEventCalendar","TypeError","calendarId","instances","CalendarAddButtonMenu","showMenu","CalendarSettings","isNil","userIsOwner","config","TYPE_ACCESS","SectionInterface","sectionInterface","calendarInstance","readonly","readOnlyMode","sectionManager","SettingsInterface","settingsInterface","showPersonalSettings","showGeneralSettings","Boolean","perm","access","settings","CalendarToolbar","mainBtn","menuBtn","getElementById","DiscussionsAddButtonMenu","DiscussionsSettings","mainFilterId","String","isSmartTrackingMode","result","SWITCHER","DESELECTED","SELECTED","switcher","spaceId","space","DiscussionsComposition","spaceName","compositionFilters","appliedFields","PopupComponentsMaker","offsetTop","useAngle","filtersContainer","messageId","switchButton","Switcher","checked","handlers","toggled","isChecked","splice","indexOf","composition","context","useBXMainFilter","spaceUserId","Livefeed","PageInstance","refresh","NotificationCenter","Reflection","namespace","DiscussionsToolbar","renderCompositionBtnTo","PostForm","pathToDefaultRedirect","pathToGroupRedirect","addCustomEvent","UsersRouter","pathToInvite","openInvite","UsersToolbar","renderInviteBtnTo"],"mappings":"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"}