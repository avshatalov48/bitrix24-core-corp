function strip_tags(t){return t.replace(/<\/?[^>]+>/gi,"")}function CModuleWizardForm(t,e,r){var i=document.forms[t];if(!i)i=document.getElementById(t);this.nextStep=i.elements[r];this.nextStepStage=i.elements[r+"Stage"];this.iframe=document.getElementById(e);this.form=i;this.form.target=e;var n=this;if(this.iframe.attachEvent)this.iframe.attachEvent("onload",function(){n.AjaxHandler()});else this.iframe.onload=function(){n.AjaxHandler()};this.percent=null;this.progressBar=null;this.result=null;this.description=null}CModuleWizardForm.prototype.AjaxHandler=function(){if(this.iframe.contentWindow&&this.iframe.contentWindow.location.href.indexOf("http")!==0)return;var t;if(this.iframe.contentDocument)t=this.iframe.contentDocument;else t=this.iframe.contentWindow.document;var e=t.body.innerHTML;if(e.length===0||t.getElementById("bitrix_install_template")||e.indexOf("[Error]")!==-1){this.ShowError("Connection error. Empty response.");return}var r=new RegExp("\\[response\\]","i");var i=new RegExp("\\[/response\\]","i");var n=e.match(r);if(n===null){this.ShowError(e);return}var o=n.index+n[0].length;var s=e.search(i);if(s===-1){this.ShowError(e);return}e=e.substr(o,s-o);window.eval(e)};CModuleWizardForm.prototype.ShowError=function(t){var e=document.getElementById("error_container");var r=document.getElementById("error_text");if(!e||!r)return;e.style.display="block";r.innerHTML=t;var i=document.getElementById("error_retry_button");var n=document.getElementById("error_skip_button");var o=this;var s=this.nextStep.value;var a=this.nextStepStage.value;i.onclick=function(){o.HideError();o.Post(s,a)};if(s==="main"){n.onclick=function(){o.HideError();o.Post(s,a)}}else{n.onclick=function(){o.HideError();o.Post(s,"skip")}}};CModuleWizardForm.prototype.HideError=function(){var t=document.getElementById("error_container");var e=document.getElementById("error_text");if(!t||!e)return;while(e.firstChild)e.removeChild(e.firstChild);t.style.display="none"};CModuleWizardForm.prototype.Post=function(t,e){if(t)this.nextStep.value=t;this.nextStepStage.value=e;if(t==="finish"){this.FinishStatus()}else{this.form.submit()}};CModuleWizardForm.prototype.StopAjax=function(){this.iframe.onload=null;this.form.target="_self"};CModuleWizardForm.prototype.SetStatus=function(t){if(!this.percent)this.percent=document.getElementById("progressBar_percent");this.percent.innerHTML=t;if(!this.progressBar)this.progressBar=document.getElementById("progressBar");this.progressBar.style.width=t+"%"};CModuleWizardForm.prototype.FinishStatus=function(){if(!this.result)this.result=document.getElementById("result");if(!!this.result.classList&&!this.result.classList.contains("complete")){this.result.classList.add("complete")}document.getElementById("button_submit_wrap").style.display="block";this.AutoSubmitTimer()};CModuleWizardForm.prototype.AutoSubmitTimer=function(){if(!this.description)this.description=document.getElementById("progress_description");var t=BX.message("SALE_BSM_WIZARD_MODULEINSTALLSTEP_INSTALL_WAIT3");var e=10;var r=setInterval(function(t,i){if(e===0){clearInterval(r);i.form.submit()}i.description.innerHTML=t.replace("#COUNT_TIME#",e);e--},1e3,t,this)};
//# sourceMappingURL=script.map.js