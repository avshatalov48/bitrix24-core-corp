(function(){BX.namespace("BX.Sender.Call");if(BX.Sender.Call.TextEditor){return}var e=BX.Sender.Helper;function t(){}t.prototype.init=function(t){this.context=BX(t.containerId);this.speechRates=t.speechRates;this.speechRateInterval=t.speechRateInterval;this.mess=t.mess;this.input=e.getNode("input",this.context);this.counter=e.getNode("counter",this.context);this.num=e.getNode("num",this.context);this.sms=e.getNode("sms",this.context);this.speed=document.getElementsByName(t.speedInputName);this.speed=this.speed.length>0?this.speed.item(0):null;BX.bind(this.input,"bxchange",this.onChange.bind(this));BX.bind(this.input,"input",this.onChange.bind(this));if(this.speed){BX.bind(this.speed,"bxchange",this.onChange.bind(this))}this.refresh()};t.prototype.onChange=function(){this.refresh()};t.prototype.refresh=function(){var e=this.input.value;var t=this.getRatioPerChar();var n=e.length===0?0:Math.floor(e.length*t)+1;this.counter.textContent=BX.date.format("sdiff",Date.now()/1e3-n)};t.prototype.getRatioPerChar=function(){var e=this.speechRateInterval;var t=this.speechRates;var n=this.speed?this.speed.value:null;var i=t[n];if(!i){i=t["medium"]}return e/i};BX.Sender.Call.TextEditor=new t})(window);