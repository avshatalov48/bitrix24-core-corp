this.BX=this.BX||{};this.BX.Crm=this.BX.Crm||{};this.BX.Crm.AutomatedSolution=this.BX.Crm.AutomatedSolution||{};(function(t,e,i,n,r,o,a,s,l,u,d,c){"use strict";function m(t){var e=t.getters.isNew?new o.Builder.Automation.AutomatedSolution.CreateEvent:new o.Builder.Automation.AutomatedSolution.EditEvent;return e.setId(t.state.automatedSolution.id).setTypeIds(t.state.automatedSolution.typeIds)}function v(t,e){r.sendData(e.setStatus(o.Dictionary.STATUS_ATTEMPT).buildData());return t.then((function(t){r.sendData(e.setStatus(o.Dictionary.STATUS_SUCCESS).buildData());return t}))["catch"]((function(t){r.sendData(e.setStatus(o.Dictionary.STATUS_ERROR).buildData());throw t}))}var f={props:{title:{type:String,required:true},description:{type:String,required:true}},data:function t(){return{isShown:true}},template:'\n\t\t<div v-if="isShown" class="crm-type-ui-card crm-type-ui-card-message">\n\t\t\t<div class="crm-type-ui-card-header">\n\t\t\t\t<div class="crm-type-ui-card-message-icon crm-type-ui-card-message-icon--custom-fields"></div>\n\t\t\t\t<div class="crm-type-ui-card-message-title">{{ title }}</div>\n\t\t\t</div>\n\t\t\t<div class="crm-type-ui-card-body">\n\t\t\t\t<div class="crm-type-ui-card-message-description">{{ description }}</div>\n\t\t\t</div>\n\t\t\t<div \n\t\t\t\tclass="crm-type-ui-card-message-close-button" \n\t\t\t\t:title="$Bitrix.Loc.getMessage(\'CRM_AUTOMATED_SOLUTION_DETAILS_CARD_CLOSE_TITLE\')"\n\t\t\t\t@click="isShown = false"\n\t\t\t></div>\n\t\t</div>\n\t'};var T={components:{Card:f},computed:{title:{get:function t(){return this.$store.state.automatedSolution.title},set:function t(e){this.$store.dispatch("setTitle",e)}}},template:'\n\t\t<div data-tab="common">\n\t\t\t<div class="ui-title-3">{{ $Bitrix.Loc.getMessage(\'CRM_AUTOMATED_SOLUTION_DETAILS_TAB_TITLE_COMMON\') }}</div>\n\t\t\t<Card\n\t\t\t\t:title="$Bitrix.Loc.getMessage(\'CRM_AUTOMATED_SOLUTION_DETAILS_CARD_COMMON_TITLE\')"\n\t\t\t\t:description="$Bitrix.Loc.getMessage(\'CRM_AUTOMATED_SOLUTION_DETAILS_CARD_COMMON_DESCRIPTION\')"\n\t\t\t/>\n\t\t\t<div class="ui-form-row crm-automated-solution-details-form-label-xs">\n\t\t\t\t<div class="ui-form-label">\n\t\t\t\t\t<div class="ui-ctl-label-text">{{ $Bitrix.Loc.getMessage(\'CRM_AUTOMATED_SOLUTION_DETAILS_FIELD_LABEL_TITLE\') }}</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="ui-form-content">\n\t\t\t\t\t<div class="ui-ctl ui-ctl-textbox ui-ctl-w100">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tv-model="title"\n\t\t\t\t\t\t\ttype="text"\n\t\t\t\t\t\t\tclass="ui-ctl-element"\n\t\t\t\t\t\t\t:placeholder="$Bitrix.Loc.getMessage(\'CRM_AUTOMATED_SOLUTION_DETAILS_FIELD_PLACEHOLDER_TITLE\')"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t'};var p={components:{Card:f},boundTypesTagSelector:null,externalTypesTagSelector:null,crmTypesTagSelector:null,computed:{isShowPermissionsResetAlert:function t(){if(!this.$store.state.isPermissionsLayoutV2Enabled){return false}var e=babelHelpers.toConsumableArray(this.$store.state.automatedSolution.typeIds);var i=babelHelpers.toConsumableArray(this.$store.state.automatedSolutionOrigTypeIds);return e.some((function(t){return!i.includes(t)}))||i.some((function(t){return!e.includes(t)}))}},mounted:function t(){var e=this;this.boundTypesTagSelector=new l.TagSelector({multiple:true,showAddButton:false,showCreateButton:true,items:this.$store.state.automatedSolution.typeIds.map((function(t){return{id:t,entityId:"dynamic_type",title:e.$store.state.dynamicTypesTitles[t]}})),events:{onCreateButtonClick:this.handleCreateTypeClick,onTagRemove:this.removeTypeIdByTagRemoveEvent}});this.boundTypesTagSelector.renderTo(this.$refs.boundTypesTagSelectorContainer);this.crmTypesTagSelector=this.initFilteredTagSelector(true,false,!this.$store.state.permissions.canMoveSmartProcessFromCrm);this.crmTypesTagSelector.renderTo(this.$refs.crmTypesTagSelectorContainer);this.externalTypesTagSelector=this.initFilteredTagSelector(false,true,!this.$store.state.permissions.canMoveSmartProcessFromAnotherAutomatedSolution);this.externalTypesTagSelector.renderTo(this.$refs.externalTypesTagSelectorContainer)},methods:{initFilteredTagSelector:function t(e,i,n){var r=new l.TagSelector({multiple:true,addButtonCaption:this.$Bitrix.Loc.getMessage("CRM_AUTOMATED_SOLUTION_DETAILS_TAG_SELECTOR_ADD_BUTTON_CAPTION"),addButtonCaptionMore:this.$Bitrix.Loc.getMessage("CRM_AUTOMATED_SOLUTION_DETAILS_TAG_SELECTOR_ADD_BUTTON_CAPTION"),dialogOptions:{height:200,enableSearch:true,context:"crm.automated_solutions.details",dropdownMode:true,showAvatars:false,entities:[{id:"dynamic_type",dynamicLoad:true,dynamicSearch:true,options:{showAutomatedSolutionBadge:true,isOnlyExternalTypes:i,isOnlyCrmTypes:e}}]},events:{onTagAdd:this.addTypeIdByTagAddEvent,onTagRemove:this.removeTypeIdIfNotContainsInBoundTypes}});if(n){r.setLocked(true)}return r},addTypeIdByTagAddEvent:function t(e){var i=e.getData(),n=i.tag;this.$store.dispatch("addTypeId",n.getId())},removeTypeIdByTagRemoveEvent:function t(e){var i=e.getData(),n=i.tag;this.$store.dispatch("removeTypeId",n.getId())},removeTypeIdIfNotContainsInBoundTypes:function t(e){var i=e.getData(),n=i.tag;var r=this.boundTypesTagSelector.getTags();var o=r.some((function(t){return t.getId()===n.getId()}));if(!o){this.removeTypeIdByTagRemoveEvent(e)}},handleCreateTypeClick:function t(){var e=this;if(this.$store.getters.isSaved){this.openTypeCreationSlider();return}s.MessageBox.confirm(this.$Bitrix.Loc.getMessage("CRM_AUTOMATED_SOLUTION_DETAILS_NEED_SAVE_POPUP_MESSAGE"),(function(t){return e.save().then((function(){return e.openTypeCreationSlider()}))["finally"]((function(){return t.close()}))}),this.$Bitrix.Loc.getMessage("CRM_AUTOMATED_SOLUTION_DETAILS_NEED_SAVE_POPUP_YES_CAPTION"))},openTypeCreationSlider:function t(){var e=this;void a.Router.Instance.openTypeDetail(0,null,{automatedSolutionId:this.$store.state.automatedSolution.id,activeTabId:"common",isExternal:"Y"}).then((function(){e.$Bitrix.Application.get().reloadWithNewUri(e.$store.state.automatedSolution.id,{activeTabId:"types"})}))},save:function t(){var e=m(this.$store).setElement(o.Dictionary.ELEMENT_SAVE_IS_REQUIRED_TO_PROCEED_POPUP);return v(this.$store.dispatch("save"),e)}},template:'\n\t\t<div>\n\t\t\t<div class="ui-title-3">{{ $Bitrix.Loc.getMessage(\'CRM_AUTOMATED_SOLUTION_DETAILS_TAB_TITLE_TYPES\') }}</div>\n\t\t\t<Card\n\t\t\t\t:title="$Bitrix.Loc.getMessage(\'CRM_AUTOMATED_SOLUTION_DETAILS_CARD_TYPES_TITLE\')"\n\t\t\t\t:description="$Bitrix.Loc.getMessage(\'CRM_AUTOMATED_SOLUTION_DETAILS_CARD_TYPES_DESCRIPTION\')"\n\t\t\t/>\n\t\t\t<div class="ui-form-row">\n\t\t\t\t<div class="ui-form-label">\n\t\t\t\t\t<div class="ui-ctl-label-text">\n\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage(\'CRM_AUTOMATED_SOLUTION_DETAILS_FIELD_LABEL_CREATE_TYPE\') }}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="ui-form-content">\n\t\t\t\t\t<div ref="boundTypesTagSelectorContainer"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="ui-form-row">\n\t\t\t\t<div class="ui-form-label">\n\t\t\t\t\t<div class="ui-ctl-label-text">\n\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage(\'CRM_AUTOMATED_SOLUTION_DETAILS_FIELD_LABEL_CRM_TYPES\') }}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="ui-form-content">\n\t\t\t\t\t<div ref="crmTypesTagSelectorContainer"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="ui-form-row">\n\t\t\t\t<div class="ui-form-label">\n\t\t\t\t\t<div class="ui-ctl-label-text">\n\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage(\'CRM_AUTOMATED_SOLUTION_DETAILS_FIELD_LABEL_EXTERNAL_TYPES\') }}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="ui-form-content">\n\t\t\t\t\t<div ref="externalTypesTagSelectorContainer"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div v-if="isShowPermissionsResetAlert" class="ui-alert ui-alert-warning">\n\t\t\t\t<span class="ui-alert-message">\n\t\t\t\t\t{{ $Bitrix.Loc.getMessage(\'CRM_AUTOMATED_SOLUTION_DETAILS_PERMISSIONS_WILL_BE_RESET_ALERT\') }}\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t</div>\n\t'};function y(t,e){var i=typeof Symbol!=="undefined"&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=S(t))||e&&t&&typeof t.length==="number"){if(i)t=i;var n=0;var r=function t(){};return{s:r,n:function e(){if(n>=t.length)return{done:true};return{done:false,value:t[n++]}},e:function t(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o=true,a=false,s;return{s:function e(){i=i.call(t)},n:function t(){var e=i.next();o=e.done;return e},e:function t(e){a=true;s=e},f:function t(){try{if(!o&&i["return"]!=null)i["return"]()}finally{if(a)throw s}}}}function S(t,e){if(!t)return;if(typeof t==="string")return h(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);if(i==="Object"&&t.constructor)i=t.constructor.name;if(i==="Map"||i==="Set")return Array.from(t);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return h(t,e)}function h(t,e){if(e==null||e>t.length)e=t.length;for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var E={components:{CommonTab:T,TypesTab:p},props:{initialActiveTabId:String},data:function t(){return{tabs:{common:this.initialActiveTabId==="common",types:this.initialActiveTabId==="types"},isCancelEventAlreadyRegistered:false}},computed:{allTabIds:function t(){return Object.keys(this.tabs)},saveButton:function t(){return document.getElementById("ui-button-panel-save")},cancelButton:function t(){return document.getElementById("ui-button-panel-cancel")},deleteButton:function t(){return document.getElementById("ui-button-panel-remove")},allButtons:function t(){var e=[this.saveButton,this.cancelButton];if(this.deleteButton){e.push(this.deleteButton)}return e},slider:function t(){return BX.SidePanel.Instance.getSliderByWindow(window)},errors:function t(){return this.$store.state.errors},hasErrors:function t(){return c.Type.isArrayFilled(this.errors)},analyticsBuilder:function t(){return m(this.$store)}},mounted:function t(){n.EventEmitter.subscribe("BX.Crm.AutomatedSolution.Details:showTab",this.showTabFromEvent);n.EventEmitter.subscribe("BX.Crm.AutomatedSolution.Details:save",this.save);n.EventEmitter.subscribe("BX.Crm.AutomatedSolution.Details:delete",this["delete"]);n.EventEmitter.subscribe("BX.Crm.AutomatedSolution.Details:close",this.onCloseByCancelButton);n.EventEmitter.subscribe("SidePanel.Slider:onCloseByEsc",this.onCloseByEsc);n.EventEmitter.subscribe("SidePanel.Slider:onClose",this.onClose)},beforeUnmount:function t(){n.EventEmitter.unsubscribe("BX.Crm.AutomatedSolution.Details:showTab",this.showTabFromEvent);n.EventEmitter.unsubscribe("BX.Crm.AutomatedSolution.Details:save",this.save);n.EventEmitter.unsubscribe("BX.Crm.AutomatedSolution.Details:delete",this["delete"]);n.EventEmitter.unsubscribe("BX.Crm.AutomatedSolution.Details:close",this.onCloseByCancelButton);n.EventEmitter.unsubscribe("SidePanel.Slider:onCloseByEsc",this.onCloseByEsc);n.EventEmitter.unsubscribe("SidePanel.Slider:onClose",this.onClose)},methods:{showTabFromEvent:function t(e){var i=e.getData(),n=i.tabId;this.showTab(n)},showTab:function t(e){if(!this.allTabIds.includes(e)){throw new Error("invalid tab id")}var i=y(this.allTabIds),n;try{for(i.s();!(n=i.n()).done;){var r=n.value;this.tabs[r]=false}}catch(t){i.e(t)}finally{i.f()}this.tabs[e]=true},save:function t(){var e=this;var i=this.analyticsBuilder.setElement(o.Dictionary.ELEMENT_CREATE_BUTTON);v(this.$store.dispatch("save"),i).then((function(){e.isCancelEventAlreadyRegistered=true;e.$Bitrix.Application.get().closeSliderOrRedirect()}))["catch"]((function(){}))["finally"]((function(){return e.unlockButtons()}))},delete:function t(){var e=this;var i=(new o.Builder.Automation.AutomatedSolution.DeleteEvent).setId(this.$store.state.automatedSolution.id).setElement(o.Dictionary.ELEMENT_DELETE_BUTTON);this.isCancelEventAlreadyRegistered=true;v(this.$store.dispatch("delete"),i).then((function(){e.$Bitrix.Application.get().closeSliderOrRedirect()}))["catch"]((function(){e.isCancelEventAlreadyRegistered=false}))["finally"]((function(){return e.unlockButtons()}))},onCloseByCancelButton:function t(){if(this.isCancelEventAlreadyRegistered){return}this.isCancelEventAlreadyRegistered=true;r.sendData(this.analyticsBuilder.setElement(o.Dictionary.ELEMENT_CANCEL_BUTTON).setStatus(o.Dictionary.STATUS_CANCEL).buildData())},onCloseByEsc:function t(e){if(this.isCancelEventAlreadyRegistered){return}var i=e.getData(),n=babelHelpers.slicedToArray(i,1),a=n[0];if(a.getSlider()!==this.slider){return}this.isCancelEventAlreadyRegistered=true;r.sendData(this.analyticsBuilder.setElement(o.Dictionary.ELEMENT_ESC_BUTTON).setStatus(o.Dictionary.STATUS_CANCEL).buildData())},onClose:function t(e){if(this.isCancelEventAlreadyRegistered){return}var i=e.getData(),n=babelHelpers.slicedToArray(i,1),a=n[0];if(a.getSlider()!==this.slider){return}this.isCancelEventAlreadyRegistered=true;r.sendData(this.analyticsBuilder.setElement(null).setStatus(o.Dictionary.STATUS_CANCEL).buildData())},unlockButtons:function t(){this.allButtons.forEach((function(t){c.Dom.removeClass(t,"ui-btn-wait")}))},hideError:function t(e){this.$store.dispatch("removeError",e)}},template:'\n\t\t<div class="crm-automated-solution-details">\n\t\t\t<form class="ui-form">\n\t\t\t\t<div v-if="hasErrors" class="ui-alert ui-alert-danger">\n\t\t\t\t\t<template\n\t\t\t\t\t\tv-for="error in errors"\n\t\t\t\t\t\t:key="error.message"\n\t\t\t\t\t>\n\t\t\t\t\t\t<span class="ui-alert-message">{{error.message}}</span>\n\t\t\t\t\t\t<span class="ui-alert-close-btn" @click="hideError(error)"></span>\n\t\t\t\t\t</template>\n\t\t\t\t</div>\n\t\t\t\t<CommonTab v-show="tabs.common"/>\n\t\t\t\t<TypesTab v-show="tabs.types"/>\n\t\t\t</form>\n\t\t</div>\n\t'};function b(t){if(c.Type.isNil(t)){return null}return c.Text.toInteger(t)}function A(t){if(!c.Type.isPlainObject(t)){return{}}var e={};for(var i=0,n=Object.entries(t);i<n.length;i++){var r=babelHelpers.slicedToArray(n[i],2),o=r[0],a=r[1];if(c.Text.toInteger(o)>0&&c.Type.isStringFilled(a)){e[o]=a}}return e}function g(t){if(c.Type.isNil(t)){return null}return String(t)}function I(t){if(!c.Type.isArrayFilled(t)){return[]}return t.map((function(t){return C(t)})).filter((function(t){return t>0}))}function C(t){return c.Text.toInteger(t)}function _(t){if(!c.Type.isArrayFilled(t)){return[]}return t.filter((function(t){return B(t)}))}function B(t){return c.Type.isStringFilled(t.message)&&(c.Type.isNil(t.code)||c.Type.isStringFilled(t.code)||c.Type.isInteger(t.code))&&(c.Type.isNil(t.customData)||c.Type.isPlainObject(t.customData))}function O(t,e){var i=typeof Symbol!=="undefined"&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=D(t))||e&&t&&typeof t.length==="number"){if(i)t=i;var n=0;var r=function t(){};return{s:r,n:function e(){if(n>=t.length)return{done:true};return{done:false,value:t[n++]}},e:function t(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o=true,a=false,s;return{s:function e(){i=i.call(t)},n:function t(){var e=i.next();o=e.done;return e},e:function t(e){a=true;s=e},f:function t(){try{if(!o&&i["return"]!=null)i["return"]()}finally{if(a)throw s}}}}function D(t,e){if(!t)return;if(typeof t==="string")return L(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);if(i==="Object"&&t.constructor)i=t.constructor.name;if(i==="Map"||i==="Set")return Array.from(t);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return L(t,e)}function L(t,e){if(e==null||e>t.length)e=t.length;for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var M={setState:function t(e,i){e.commit("setState",i)},setErrors:function t(e,i){e.commit("setErrors",i)},removeError:function t(e,i){e.commit("removeError",i)},setTitle:function t(e,i){e.commit("setTitle",i)},addTypeId:function t(e,i){e.commit("addTypeId",i)},removeTypeId:function t(e,i){e.commit("removeTypeId",i)},save:function t(e){var i=null;var n=c.Runtime.clone(e.state.automatedSolution);if(n.typeIds.length<=0){n.typeIds=false}if(e.getters.isNew){i=w("crm.automatedsolution.add",{data:{fields:n}})}else{i=w("crm.automatedsolution.update",{data:{id:e.state.automatedSolution.id,fields:n}})}return i.then((function(t){var i=t.data;e.dispatch("setState",{automatedSolution:i.automatedSolution});P(i.automatedSolution)}))["catch"]((function(t){console.warn("could not save automated solution",{response:t,state:c.Runtime.clone(e.state)});var i=t.errors;var n=false;var r=O(i),o;try{for(r.s();!(o=r.n()).done;){var a;var s=o.value;if(c.Type.isStringFilled((a=s.customData)===null||a===void 0?void 0:a.sliderCode)){d.FeaturePromotersRegistry.getPromoter({code:s.customData.sliderCode}).show();n=true}}}catch(t){r.e(t)}finally{r.f()}if(!n){e.dispatch("setErrors",i)}throw i}))},delete:function t(e){return w("crm.automatedsolution.delete",{data:{id:e.state.automatedSolution.id}}).then((function(){e.dispatch("setState",{});P({id:e.state.automatedSolution.id})}))["catch"]((function(t){console.warn("could not delete automated solution",{response:t,state:c.Runtime.clone(e.state)});e.dispatch("setErrors",t.errors);throw t.errors}))}};function w(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++){e[i]=arguments[i]}return new Promise((function(t,i){c.ajax.runAction.apply(c.ajax,e).then(t)["catch"](i)}))}function P(t){var e=t.id,i=t.title,n=t.intranetCustomSectionId;var r={id:b(e),title:g(i),intranetCustomSectionId:b(n)};u.ToolbarComponent.Instance.emitAutomatedSolutionUpdatedEvent(r)}var R={setState:function t(e,i){var n,r,o,a,s,l,u,d;e.automatedSolution.id=b((n=i.automatedSolution)===null||n===void 0?void 0:n.id);e.automatedSolution.title=g((r=i.automatedSolution)===null||r===void 0?void 0:r.title);var m=I((o=i.automatedSolution)===null||o===void 0?void 0:o.typeIds);e.automatedSolution.typeIds=babelHelpers.toConsumableArray(m);e.automatedSolutionOrigTypeIds=babelHelpers.toConsumableArray(m);e.permissions.canMoveSmartProcessFromCrm=c.Text.toBoolean((a=(s=i.permissions)===null||s===void 0?void 0:s.canMoveSmartProcessFromCrm)!==null&&a!==void 0?a:false);e.permissions.canMoveSmartProcessFromAnotherAutomatedSolution=c.Text.toBoolean((l=(u=i.permissions)===null||u===void 0?void 0:u.canMoveSmartProcessFromAnotherAutomatedSolution)!==null&&l!==void 0?l:false);e.dynamicTypesTitles=A(i.dynamicTypesTitles);e.errors=_(i.errors);e.isModified=false;e.isPermissionsLayoutV2Enabled=c.Text.toBoolean((d=i.isPermissionsLayoutV2Enabled)!==null&&d!==void 0?d:false)},setErrors:function t(e,i){e.errors=_(i)},removeError:function t(e,i){if(!B(i)){return}e.errors=e.errors.filter((function(t){return t!==i}))},setTitle:function t(e,i){var n=g(i);if(n!==e.automatedSolution.title){e.isModified=true}e.automatedSolution.title=n},addTypeId:function t(e,i){var n=C(i);if(n<=0){return}if(e.automatedSolution.typeIds.includes(n)){return}e.automatedSolution.typeIds.push(n);e.isModified=true},removeTypeId:function t(e,i){var n=C(i);if(n<=0){return}var r=e.automatedSolution.typeIds.filter((function(t){return t!==n}));if(r.length!==e.automatedSolution.typeIds.length){e.isModified=true}e.automatedSolution.typeIds=r}};var U={strict:true,state:function t(){return{automatedSolutionOrigTypeIds:[],automatedSolution:{id:null,title:null,typeIds:[]},permissions:{canMoveSmartProcessFromCrm:false,canMoveSmartProcessFromAnotherAutomatedSolution:false},dynamicTypesTitles:{},errors:[],isModified:false,isPermissionsLayoutV2Enabled:false}},getters:{isNew:function t(e){return e.automatedSolution.id<=0},isSaved:function t(e,i){return!e.isModified&&!i.isNew}},actions:M,mutations:R};function N(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function x(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?N(Object(i),!0).forEach((function(e){babelHelpers.defineProperty(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):N(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function $(t,e,i){F(t,e);e.set(t,i)}function F(t,e){if(e.has(t)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}var X=new WeakMap;var j=new WeakMap;var H=new WeakMap;var k=new WeakMap;var G=function(){function t(e){var i=e.containerId,n=e.activeTabId,r=e.state;babelHelpers.classCallCheck(this,t);$(this,X,{writable:true,value:void 0});$(this,j,{writable:true,value:void 0});$(this,H,{writable:true,value:void 0});$(this,k,{writable:true,value:null});babelHelpers.classPrivateFieldSet(this,X,document.getElementById(i));if(!c.Type.isDomNode(babelHelpers.classPrivateFieldGet(this,X))){throw new Error("container not found")}babelHelpers.classPrivateFieldSet(this,j,String(n));if(c.Type.isPlainObject(r)){babelHelpers.classPrivateFieldSet(this,H,r)}}babelHelpers.createClass(t,[{key:"start",value:function t(){var n=this;babelHelpers.classPrivateFieldSet(this,k,e.BitrixVue.createApp(x(x({},E),{},{beforeCreate:function t(){this.$bitrix.Application.set(n)}}),{initialActiveTabId:babelHelpers.classPrivateFieldGet(this,j)}));var r=i.createStore(U);if(babelHelpers.classPrivateFieldGet(this,H)){r.dispatch("setState",babelHelpers.classPrivateFieldGet(this,H))}babelHelpers.classPrivateFieldGet(this,k).use(r);babelHelpers.classPrivateFieldGet(this,k).mount(babelHelpers.classPrivateFieldGet(this,X))}},{key:"stop",value:function t(){babelHelpers.classPrivateFieldGet(this,k).unmount();babelHelpers.classPrivateFieldSet(this,k,null)}},{key:"reloadWithNewUri",value:function t(e){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};setTimeout((function(){var t=a.Router.Instance.getAutomatedSolutionDetailUrl(e);t.setQueryParams(x(x({},i),{},{IFRAME:"Y",IFRAME_TYPE:"SIDE_SLIDER"}));window.location.href=t.toString()}))}},{key:"closeSliderOrRedirect",value:function t(){setTimeout((function(){a.Router.Instance.closeSliderOrRedirect(a.Router.Instance.getAutomatedSolutionListUrl(),window)}))}}]);return t}();t.App=G})(this.BX.Crm.AutomatedSolution.Details=this.BX.Crm.AutomatedSolution.Details||{},BX.Vue3,BX.Vue3.Vuex,BX.Event,BX.UI.Analytics,BX.Crm.Integration.Analytics,BX.Crm,BX.UI.Dialogs,BX.UI.EntitySelector,BX.Crm,BX.UI,BX);
//# sourceMappingURL=script.map.js