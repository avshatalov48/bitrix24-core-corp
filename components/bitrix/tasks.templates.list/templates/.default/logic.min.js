if(typeof BX.FilterEntitySelector==="undefined"){BX.FilterEntitySelector=function(){this._id="";this._settings={};this._fieldId="";this._control=null;this._selector=null;this._inputKeyPressHandler=BX.delegate(this.keypress,this)};BX.FilterEntitySelector.prototype={initialize:function(t,e){this._id=t;this._settings=e?e:{};this._fieldId=this.getSetting("fieldId","");BX.addCustomEvent(window,"BX.Main.Filter:customEntityFocus",BX.delegate(this.onCustomEntitySelectorOpen,this));BX.addCustomEvent(window,"BX.Main.Filter:customEntityBlur",BX.delegate(this.onCustomEntitySelectorClose,this))},getId:function(){return this._id},getSetting:function(t,e){return this._settings.hasOwnProperty(t)?this._settings[t]:e},keypress:function(t){},open:function(t,e){this._selector=new BX.Tasks.Integration.Socialnetwork.NetworkSelector({scope:t,id:this.getId()+"-selector",mode:this.getSetting("mode"),query:false,useSearch:true,useAdd:false,parent:this,popupOffsetTop:5,popupOffsetLeft:40});this._selector.bindEvent("item-selected",BX.delegate((function(t){this._control.setData(BX.util.htmlspecialcharsback(t.nameFormatted),t.id);if(!this.getSetting("multi")){this._selector.close()}}),this));this._selector.open()},close:function(){if(this._selector){this._selector.close()}},onCustomEntitySelectorOpen:function(t){this._control=t;if(this._fieldId!==t.getId()){this._selector=null;this.close()}else{this._selector=t;this.open(t.field)}},onCustomEntitySelectorClose:function(t){if(this._fieldId!==t.getId()){this.close()}}};BX.FilterEntitySelector.closeAll=function(){for(var t in this.items){if(this.items.hasOwnProperty(t)){this.items[t].close()}}};BX.FilterEntitySelector.items={};BX.FilterEntitySelector.create=function(t,e){var i=new BX.FilterEntitySelector(t,e);i.initialize(t,e);this.items[i.getId()]=i;return i}}"use strict";BX.namespace("Tasks.Component");function DeleteTemplate(t){var e=BX.Tasks.Component.TasksTemplatesList.getInstance();e.deleteTemplate(t)}(function(){if(typeof BX.Tasks.Component.TasksTemplatesList!="undefined"){return}BX.Tasks.Component.TasksTemplatesList=BX.Tasks.Component.extend({sys:{code:"templates"},methodsStatic:{instance:{},getInstance:function(){return BX.Tasks.Component.TasksTemplatesList.instance},addInstance:function(t){BX.Tasks.Component.TasksTemplatesList.instance=t}},methods:{construct:function(){this.callConstruct(BX.Tasks.Component);BX.Tasks.Component.TasksTemplatesList.addInstance(this);this.option("grid",BX.Main.gridManager.getById(this.option("gridId")))},bindEvents:function(){},sliderInit:function(){var t=this.option("patternsUrl");var e=this;BX.SidePanel.Instance.bindAnchors({rules:[{condition:[t.create,t.view],loader:"default-loader",options:{cacheable:false,events:{onClose:function(){}}}}]})},deleteTemplate:function(t){var e=this;BX.ajax.runComponentAction("bitrix:tasks.task.template","delete",{mode:"class",data:{templateId:t}}).then(function(t){if(!t.status||t.status!=="success"){return}e.reloadGrid()}.bind(this),function(t){}.bind(this))},reloadGrid:function(){var t=this.getGrid();if(!t){return false}if(BX.Bitrix24&&BX.Bitrix24.Slider&&BX.Bitrix24.Slider.getLastOpenPage()){BX.Bitrix24.Slider.destroy(BX.Bitrix24.Slider.getLastOpenPage().getUrl())}t.reloadTable("POST",{apply_filter:"Y",clear_nav:"Y"})},getGrid:function(){var t;if(BX&&BX.Main&&BX.Main.gridManager){t=BX.Main.gridManager.getById(this.option("gridId"))}return t?t.instance:null},deleteSelected:function(){var t=this;var e=this.getGrid();if(!e){return false}var i=e.getRows().getSelectedIds();var s=e.getActionsPanel().getForAllCheckbox().checked;if(!BX.type.isArray(i)&&!s){return false}BX.Tasks.confirm(BX.message("TASKS_TEMPLATE_LIST_GROUP_ACTION_REMOVE_CONFIRM")).then((function(){t.deleteItems(i,s)}))},deleteItems:function(t,e){BX.ajax.runComponentAction("bitrix:tasks.templates.list","batchDelete",{mode:"class",data:{ids:t,isAllSelected:e}}).then(function(t){if(!t.status||t.status!=="success"||!t.data.success){var e=new top.BX.UI.Dialogs.MessageBox({title:BX.message("TASKS_TEMPLATES_LIST_TITLE_ERROR"),message:t.data.message,noCaption:BX.message("TASKS_TEMPLATES_LIST_CLOSE"),maxWidth:437,maxHeight:160,buttons:top.BX.UI.Dialogs.MessageBoxButtons.NO,onNo:function(){e.close()}.bind(this)});e.show();if(t.data.needReload){this.reloadGrid()}return}this.reloadGrid()}.bind(this),function(t){}.bind(this))},toggleFilter:function(t){var e=t.tag;if(typeof e==="undefined"){return}BX.SidePanel.Instance.closeAll();var i=top.BX.Main.filterManager.getById(this.option("gridId"));if(!i){console.log("BX.Main.filterManager not initialised");return}var s=i.getApi();s.setFields({TAGS:e,TAGS_label:e});s.apply()}}})}).call(this);
//# sourceMappingURL=logic.map.js