{"version":3,"file":"default.js","sources":["src/default.js"],"sourcesContent":["BX.Default.Field.Address = function (params)\n{\n\tthis.init(params);\n};\n\nBX.Default.Field.Address.prototype = {\n\tinit: function (params)\n\t{\n\t\tthis.controlId = (params['controlId'] || '');\n\t\tthis.value = (params['value'] || '');\n\t\tthis.isMultiple = (params['isMultiple'] === 'true');\n\t\tthis.nodeJs = (params['nodeJs'] || '');\n\t\tthis.fieldNameJs = (params['fieldNameJs'] || '');\n\n\t\tlet control = new BX.Fileman.UserField.Address(BX(this.controlId),\n\t\t\t{\n\t\t\t\tvalue: this.value,\n\t\t\t\tmultiple: this.isMultiple\n\t\t\t}\n\t\t);\n\n\t\tcontrol.nodeJs = this.nodeJs;\n\t\tcontrol.fieldNameJs = this.fieldNameJs;\n\n\t\tBX.addCustomEvent(control, 'UserFieldAddress::Change', function (value)\n\t\t{\n\t\t\tlet node = BX(control.nodeJs);\n\t\t\tlet html = '';\n\t\t\tif (value.length === 0)\n\t\t\t{\n\t\t\t\tvalue = [{text: ''}];\n\t\t\t}\n\n\t\t\tfor (let i = 0; i < value.length; i++)\n\t\t\t{\n\t\t\t\tlet inputValue = value[i].text;\n\n\t\t\t\tif (!!value[i].coords)\n\t\t\t\t{\n\t\t\t\t\tinputValue += '|' + value[i].coords.join(';');\n\t\t\t\t}\n\n\t\t\t\tinputValue = BX.util.htmlspecialchars(inputValue);\n\t\t\t\thtml += `<input type=\"hidden\" name=\"${control.fieldNameJs}\" value=\"${inputValue}\" >`;\n\t\t\t}\n\n\t\t\tnode.innerHTML = html;\n\n\t\t\tBX.onCustomEvent(window, 'onCrmEntityEditorUserFieldExternalChanged', [control.fieldNameJs]);\n\t\t});\n\t},\n};\n"],"names":["BX","Default","Field","Address","params","init","prototype","controlId","value","isMultiple","nodeJs","fieldNameJs","control","Fileman","UserField","multiple","addCustomEvent","node","html","length","text","i","inputValue","coords","join","util","htmlspecialchars","innerHTML","onCustomEvent","window"],"mappings":";;;;;;CAAAA,EAAE,CAACC,OAAH,CAAWC,KAAX,CAAiBC,OAAjB,GAA2B,UAAUC,MAAV,EAC3B;CACC,OAAKC,IAAL,CAAUD,MAAV;CACA,CAHD;;CAKAJ,EAAE,CAACC,OAAH,CAAWC,KAAX,CAAiBC,OAAjB,CAAyBG,SAAzB,GAAqC;CACpCD,EAAAA,IAAI,EAAE,cAAUD,MAAV,EACN;CACC,SAAKG,SAAL,GAAkBH,MAAM,CAAC,WAAD,CAAN,IAAuB,EAAzC;CACA,SAAKI,KAAL,GAAcJ,MAAM,CAAC,OAAD,CAAN,IAAmB,EAAjC;CACA,SAAKK,UAAL,GAAmBL,MAAM,CAAC,YAAD,CAAN,KAAyB,MAA5C;CACA,SAAKM,MAAL,GAAeN,MAAM,CAAC,QAAD,CAAN,IAAoB,EAAnC;CACA,SAAKO,WAAL,GAAoBP,MAAM,CAAC,aAAD,CAAN,IAAyB,EAA7C;CAEA,QAAIQ,OAAO,GAAG,IAAIZ,EAAE,CAACa,OAAH,CAAWC,SAAX,CAAqBX,OAAzB,CAAiCH,EAAE,CAAC,KAAKO,SAAN,CAAnC,EACb;CACCC,MAAAA,KAAK,EAAE,KAAKA,KADb;CAECO,MAAAA,QAAQ,EAAE,KAAKN;CAFhB,KADa,CAAd;CAOAG,IAAAA,OAAO,CAACF,MAAR,GAAiB,KAAKA,MAAtB;CACAE,IAAAA,OAAO,CAACD,WAAR,GAAsB,KAAKA,WAA3B;CAEAX,IAAAA,EAAE,CAACgB,cAAH,CAAkBJ,OAAlB,EAA2B,0BAA3B,EAAuD,UAAUJ,KAAV,EACvD;CACC,UAAIS,IAAI,GAAGjB,EAAE,CAACY,OAAO,CAACF,MAAT,CAAb;CACA,UAAIQ,IAAI,GAAG,EAAX;;CACA,UAAIV,KAAK,CAACW,MAAN,KAAiB,CAArB,EACA;CACCX,QAAAA,KAAK,GAAG,CAAC;CAACY,UAAAA,IAAI,EAAE;CAAP,SAAD,CAAR;CACA;;CAED,WAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGb,KAAK,CAACW,MAA1B,EAAkCE,CAAC,EAAnC,EACA;CACC,YAAIC,UAAU,GAAGd,KAAK,CAACa,CAAD,CAAL,CAASD,IAA1B;;CAEA,YAAI,CAAC,CAACZ,KAAK,CAACa,CAAD,CAAL,CAASE,MAAf,EACA;CACCD,UAAAA,UAAU,IAAI,MAAMd,KAAK,CAACa,CAAD,CAAL,CAASE,MAAT,CAAgBC,IAAhB,CAAqB,GAArB,CAApB;CACA;;CAEDF,QAAAA,UAAU,GAAGtB,EAAE,CAACyB,IAAH,CAAQC,gBAAR,CAAyBJ,UAAzB,CAAb;CACAJ,QAAAA,IAAI,4CAAkCN,OAAO,CAACD,WAA1C,wBAAiEW,UAAjE,SAAJ;CACA;;CAEDL,MAAAA,IAAI,CAACU,SAAL,GAAiBT,IAAjB;CAEAlB,MAAAA,EAAE,CAAC4B,aAAH,CAAiBC,MAAjB,EAAyB,2CAAzB,EAAsE,CAACjB,OAAO,CAACD,WAAT,CAAtE;CACA,KAzBD;CA0BA;CA7CmC,CAArC;;;;"}