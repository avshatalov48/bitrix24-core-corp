{"version":3,"file":"script.js","sources":["script.es6.js"],"sourcesContent":["import {Event, Loc, Reflection} from 'main.core';\nimport {EntityCard} from 'catalog.entity-card';\nimport {type BaseEvent, EventEmitter} from 'main.core.events';\n\nclass ProductCard extends EntityCard\n{\n\tconstructor(id, settings = {})\n\t{\n\t\tsuper(id, settings);\n\t}\n\n\tgetEntityType()\n\t{\n\t\treturn 'Product';\n\t}\n\n\tonSectionLayout(event: BaseEvent)\n\t{\n\t\tconst [, eventData] = event.getCompatData();\n\n\t\tif (eventData.id === 'catalog_parameters')\n\t\t{\n\t\t\teventData.visible = this.isSimpleProduct && this.isCardSettingEnabled('CATALOG_PARAMETERS');\n\t\t}\n\t}\n\n\tonGridUpdatedHandler(event: BaseEvent)\n\t{\n\t\tsuper.onGridUpdatedHandler(event);\n\n\t\tconst [grid] = event.getCompatData();\n\t\tif ((grid && grid.getId() === this.getVariationGridId()) && (grid.getRows().getCountDisplayed() <= 0))\n\t\t{\n\t\t\tdocument.location.reload();\n\t\t}\n\t}\n\n\tonEditorAjaxSubmit(event: BaseEvent)\n\t{\n\t\tsuper.onEditorAjaxSubmit(event);\n\n\t\tconst [, response] = event.getCompatData();\n\n\t\tif (response.data)\n\t\t{\n\t\t\tif (response.data.NOTIFY_ABOUT_NEW_VARIATION)\n\t\t\t{\n\t\t\t\tthis.showNotification(Loc.getMessage('CPD_NEW_VARIATION_ADDED'));\n\t\t\t}\n\t\t}\n\t}\n}\n\nReflection.namespace('BX.Catalog').ProductCard = ProductCard;"],"names":["ProductCard","id","settings","event","getCompatData","eventData","visible","isSimpleProduct","isCardSettingEnabled","grid","getId","getVariationGridId","getRows","getCountDisplayed","document","location","reload","response","data","NOTIFY_ABOUT_NEW_VARIATION","showNotification","Loc","getMessage","EntityCard","Reflection","namespace"],"mappings":";;;KAIMA;;;CAEL,uBAAYC,EAAZ,EACA;CAAA,QADgBC,QAChB,uEAD2B,EAC3B;CAAA;CAAA,4GACOD,EADP,EACWC,QADX;CAEC;;;;qCAGD;CACC,aAAO,SAAP;CACA;;;qCAEeC,OAChB;CAAA,iCACuBA,KAAK,CAACC,aAAN,EADvB;CAAA;CAAA,UACUC,SADV;;CAGC,UAAIA,SAAS,CAACJ,EAAV,KAAiB,oBAArB,EACA;CACCI,QAAAA,SAAS,CAACC,OAAV,GAAoB,KAAKC,eAAL,IAAwB,KAAKC,oBAAL,CAA0B,oBAA1B,CAA5C;CACA;CACD;;;0CAEoBL,OACrB;CACC,oHAA2BA,KAA3B;;CADD,kCAGgBA,KAAK,CAACC,aAAN,EAHhB;CAAA;CAAA,UAGQK,IAHR;;CAIC,UAAKA,IAAI,IAAIA,IAAI,CAACC,KAAL,OAAiB,KAAKC,kBAAL,EAA1B,IAAyDF,IAAI,CAACG,OAAL,GAAeC,iBAAf,MAAsC,CAAnG,EACA;CACCC,QAAAA,QAAQ,CAACC,QAAT,CAAkBC,MAAlB;CACA;CACD;;;wCAEkBb,OACnB;CACC,kHAAyBA,KAAzB;;CADD,kCAGsBA,KAAK,CAACC,aAAN,EAHtB;CAAA;CAAA,UAGUa,QAHV;;CAKC,UAAIA,QAAQ,CAACC,IAAb,EACA;CACC,YAAID,QAAQ,CAACC,IAAT,CAAcC,0BAAlB,EACA;CACC,eAAKC,gBAAL,CAAsBC,aAAG,CAACC,UAAJ,CAAe,yBAAf,CAAtB;CACA;CACD;CACD;;;GA9CwBC;;AAiD1BC,qBAAU,CAACC,SAAX,CAAqB,YAArB,EAAmCzB,WAAnC,GAAiDA,WAAjD;;;;"}