{"version":3,"file":"script.js","sources":["script.es6.js"],"sourcesContent":["import {Reflection, Loc} from 'main.core';\n\nclass PropertyListGrid\n{\n\t#gridId: String;\n\t#sliderSettings: Object;\n\n\tstatic Instance: PropertyListGrid = null;\n\n\tconstructor(options)\n\t{\n\t\tthis.#gridId = options.id;\n\n\t\tthis.#sliderSettings = {\n\t\t\twidth: 900,\n\t\t\tcacheable: false,\n\t\t\tallowChangeHistory: false,\n\t\t\tevents: {\n\t\t\t\tonClose: () => {\n\t\t\t\t\tthis.#getGrid().reload();\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\t}\n\n\t#getGrid()\n\t{\n\t\tif (this.#gridId)\n\t\t{\n\t\t\tconst grid = BX.Main.gridManager.getInstanceById(this.#gridId);\n\t\t\tif (grid)\n\t\t\t{\n\t\t\t\treturn grid;\n\t\t\t}\n\t\t}\n\n\t\tthrow new Error(`Not found grid for property list with id ${this.#gridId}`);\n\t}\n\n\topenDetailSlider(id)\n\t{\n\t\ttop.BX.SidePanel.Instance.open(`details/${parseInt(id)}/`, this.#sliderSettings);\n\t}\n\n\topenCreateSlider()\n\t{\n\t\ttop.BX.SidePanel.Instance.open('details/0/', this.#sliderSettings);\n\t}\n\n\tstatic openCreateSliderStatic()\n\t{\n\t\tPropertyListGrid.Instance.openCreateSlider();\n\t}\n\n\tdelete(id)\n\t{\n\t\tBX.UI.Dialogs.MessageBox.confirm(\n\t\t\tLoc.getMessage('IBLOCK_PROPERTY_LIST_TEMPLATE_CONFIRM_DELETE'),\n\t\t\t() => {\n\t\t\t\t// emulate run group action `delete`\n\t\t\t\tconst grid = this.#getGrid();\n\t\t\t\tconst data = {\n\t\t\t\t\t'ID': [\n\t\t\t\t\t\tid,\n\t\t\t\t\t],\n\t\t\t\t};\n\t\t\t\tdata[grid.getActionKey()] = 'delete';\n\t\t\t\tgrid.reloadTable('POST', data);\n\n\t\t\t\treturn true;\n\t\t\t},\n\t\t);\n\t}\n}\n\nReflection.namespace('BX.Iblock').PropertyListGrid = PropertyListGrid;\n"],"names":["PropertyListGrid","options","id","width","cacheable","allowChangeHistory","events","onClose","reload","top","BX","SidePanel","Instance","open","parseInt","UI","Dialogs","MessageBox","confirm","Loc","getMessage","grid","data","getActionKey","reloadTable","openCreateSlider","Main","gridManager","getInstanceById","Error","Reflection","namespace"],"mappings":";;;;;;;;;;;;;;;;;KAEMA;CAOL,4BAAYC,OAAZ,EACA;CAAA;;CAAA;;CAAA;;CAAA;CAAA;CAAA;CAAA;;CAAA;CAAA;CAAA;CAAA;;CACC,qDAAeA,OAAO,CAACC,EAAvB;CAEA,6DAAuB;CACtBC,MAAAA,KAAK,EAAE,GADe;CAEtBC,MAAAA,SAAS,EAAE,KAFW;CAGtBC,MAAAA,kBAAkB,EAAE,KAHE;CAItBC,MAAAA,MAAM,EAAE;CACPC,QAAAA,OAAO,EAAE,mBAAM;CACd,iCAAA,KAAI,sBAAJ,MAAA,KAAI,EAAYC,MAAhB;CACA;CAHM;CAJc,KAAvB;CAUA;;;;sCAgBgBN,IACjB;CACCO,MAAAA,GAAG,CAACC,EAAJ,CAAOC,SAAP,CAAiBC,QAAjB,CAA0BC,IAA1B,mBAA0CC,QAAQ,CAACZ,EAAD,CAAlD,0CAA2D,IAA3D;CACA;;;wCAGD;CACCO,MAAAA,GAAG,CAACC,EAAJ,CAAOC,SAAP,CAAiBC,QAAjB,CAA0BC,IAA1B,CAA+B,YAA/B,oCAA6C,IAA7C;CACA;;;6BAOMX,IACP;CAAA;;CACCQ,MAAAA,EAAE,CAACK,EAAH,CAAMC,OAAN,CAAcC,UAAd,CAAyBC,OAAzB,CACCC,aAAG,CAACC,UAAJ,CAAe,8CAAf,CADD,EAEC,YAAM;CACL;CACA,YAAMC,IAAI,0BAAG,MAAH,4BAAG,MAAH,CAAV;;CACA,YAAMC,IAAI,GAAG;CACZ,gBAAM,CACLpB,EADK;CADM,SAAb;CAKAoB,QAAAA,IAAI,CAACD,IAAI,CAACE,YAAL,EAAD,CAAJ,GAA4B,QAA5B;CACAF,QAAAA,IAAI,CAACG,WAAL,CAAiB,MAAjB,EAAyBF,IAAzB;CAEA,eAAO,IAAP;CACA,OAdF;CAgBA;;;8CAtBD;CACCtB,MAAAA,gBAAgB,CAACY,QAAjB,CAA0Ba,gBAA1B;CACA;;;;;sBA1BD;CACC,wCAAI,IAAJ,YACA;CACC,QAAMJ,IAAI,GAAGX,EAAE,CAACgB,IAAH,CAAQC,WAAR,CAAoBC,eAApB,mCAAoC,IAApC,WAAb;;CACA,QAAIP,IAAJ,EACA;CACC,aAAOA,IAAP;CACA;CACD;;CAED,QAAM,IAAIQ,KAAJ,sFAAsD,IAAtD,YAAN;CACA;;6BAnCI7B,8BAK+B;AAoErC8B,qBAAU,CAACC,SAAX,CAAqB,WAArB,EAAkC/B,gBAAlC,GAAqDA,gBAArD;;;;"}