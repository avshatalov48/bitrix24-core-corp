(function(){"use strict";BX.namespace("BX.Salescenter.UserConsent");BX.Salescenter.UserConsent={init:function(n){this.formNode=BX(n.formId);this.buttonNode=BX(n.buttonId);this.activeButtonNode=BX(n.activeButtonId);this.agreementBlockNode=BX(n.agreementBlockId);this.bindEvents()},bindEvents:function(){BX.bind(this.buttonNode,"click",BX.proxy(this.saveUserConsent,this));BX.addCustomEvent("button-click",BX.proxy(this.turnOffWaitProp,this));BX.bind(this.activeButtonNode,"change",BX.proxy(this.toggleAgreementBlock,this))},getAllFormData:function(){var n=BX.ajax.prepareForm(this.formNode),i;for(i in n.data){if(n.data.hasOwnProperty(i)&&i==""){delete n.data[i]}}return!!n&&n.data?n.data:{}},saveUserConsent:function(n){n.preventDefault();var i=this.getAllFormData();BX.ajax.runComponentAction("bitrix:salescenter.userconsent","saveUserConsent",{mode:"class",data:{formData:i}}).then(function(n){top.BX.SidePanel.Instance.close()})},turnOffWaitProp:function(n){if(n.TYPE==="save"){n.WAIT=false}},toggleAgreementBlock:function(){BX.animationHandler.fadeSlideToggleByClass(this.agreementBlockNode)}}})();window.BX.animationHandler={animations:[],animate:function(n){n=n||{};var i=n.node||null;var e=new BX.Promise;n.transition=n.transition||BX.easing.transitions.linear;if(!BX.type.isElementNode(i)){e.reject();return e}var t=n.duration||300;var a=null;for(var o in BX.animationHandler.animations){if(BX.animationHandler.animations[o].node==i){a=BX.animationHandler.animations[o];break}}if(a===null){var s=new BX.easing({duration:t,start:n.start,finish:n.finish,transition:n.transition,step:n.step,complete:function(){for(var t in BX.animationHandler.animations){if(BX.animationHandler.animations[t].node==i){BX.animationHandler.animations[t].easing=null;BX.animationHandler.animations[t].node=null;BX.animationHandler.animations.splice(t,1);break}}i=null;a=null;n.complete.call(this);if(e){e.fulfill()}}});a={node:i,easing:s};a.easing.animate();BX.animationHandler.animations.push(a)}else{a.easing.stop(true);n.duplicate.call(this);if(e){e.reject()}}return e},animateShowHide:function(n){n=n||{};var i=n.node||null;n.transition=n.transition||BX.easing.transitions.linear;if(!BX.type.isElementNode(i)){var e=new BX.Promise;e.reject();return e}var t=BX.hasClass(i,"invisible");var a=typeof n.way=="undefined"||n.way===null?t:!!n.way;if(t!=a){var e=new BX.Promise;e.resolve();return e}var o=n.toShow||{};var s=n.toHide||{};return BX.animationHandler.animate({node:i,duration:n.duration,start:!a?o:s,finish:a?o:s,transition:n.transition,complete:function(){BX[!a?"addClass":"removeClass"](i,"invisible");i.style.cssText="";if(BX.type.isFunction(n.complete)){n.complete.call(this)}},duplicate:function(){BX[a?"addClass":"removeClass"](i,"invisible");i.style.cssText="";if(BX.type.isFunction(n.duplicate)){n.duplicate.call(this)}},step:function(n){if(typeof n.opacity!="undefined"){i.style.opacity=n.opacity/100}if(typeof n.height!="undefined"){i.style.height=n.height+"px"}if(typeof n.width!="undefined"){i.style.width=n.width+"px"}}})},fadeSlideToggleByClass:function(n,i,e,t){return BX.animationHandler.animateShowHide({node:n,duration:e,toShow:{opacity:100,height:BX.animationHandler.getInvisibleSize(n).height},toHide:{opacity:0,height:0},complete:t,way:i})},getInvisibleSize:function(n){var i=BX.hasClass(n,"invisible");if(i){BX.removeClass(n,"invisible")}var e=BX.pos(n);if(i){BX.addClass(n,"invisible")}return e}};
//# sourceMappingURL=script.map.js