(function(){BX.namespace("BX.Intranet.UserOtpConnected");BX.Intranet.UserOtpConnected={init:function(e){this.signedParameters=e.signedParameters;this.componentName=e.componentName;this.otpDays=e.otpDays;var t=document.querySelector("[data-role='intranet-otp-change-phone']");if(BX.type.isDomNode(t)){BX.bind(t,"click",function(){if(BX.getClass("BX.Intranet.UserProfile.Security")){BX.Intranet.UserProfile.Security.showOtpComponent()}})}var n=document.querySelector("[data-role='intranet-recovery-codes']");if(BX.type.isDomNode(n)){BX.bind(n,"click",function(){if(BX.getClass("BX.Intranet.UserProfile.Security")){BX.Intranet.UserProfile.Security.showRecoveryCodesComponent()}})}var r=document.querySelector("[data-role='intranet-otp-defer']");if(BX.type.isDomNode(r)){BX.bind(r,"click",function(){this.showOtpDaysPopup(r,"defer")}.bind(this))}var o=document.querySelector("[data-role='intranet-otp-deactivate']");if(BX.type.isDomNode(o)){BX.bind(o,"click",function(){this.showOtpDaysPopup(o,"deactivate")}.bind(this))}},deactivateUserOtp:function(e){BX.ajax.runComponentAction(this.componentName,"deactivateOtp",{signedParameters:this.signedParameters,mode:"ajax",data:{numDays:e}}).then(function(e){if(BX.getClass("BX.Intranet.UserProfile.Security")){BX.Intranet.UserProfile.Security.showOtpConnectedComponent()}}.bind(this),function(e){if(BX.getClass("BX.Intranet.UserProfile.Security")){BX.Intranet.UserProfile.Security.showErrorPopup(response["errors"][0].message)}}.bind(this))},activateUserOtp:function(){BX.ajax.runComponentAction(this.componentName,"activateOtp",{signedParameters:this.signedParameters,mode:"ajax",data:{}}).then(function(e){if(BX.getClass("BX.Intranet.UserProfile.Security")){BX.Intranet.UserProfile.Security.showOtpConnectedComponent()}}.bind(this),function(e){if(BX.getClass("BX.Intranet.UserProfile.Security")){BX.Intranet.UserProfile.Security.showErrorPopup(response["errors"][0].message)}}.bind(this))},deferUserOtp:function(e){BX.ajax.runComponentAction(this.componentName,"deferOtp",{signedParameters:this.signedParameters,mode:"ajax",data:{numDays:e}}).then(function(e){if(BX.getClass("BX.Intranet.UserProfile.Security")){BX.Intranet.UserProfile.Security.showOtpConnectedComponent()}}.bind(this),function(e){if(BX.getClass("BX.Intranet.UserProfile.Security")){BX.Intranet.UserProfile.Security.showErrorPopup(response["errors"][0].message)}}.bind(this))},showOtpDaysPopup:function(e,t){t=t=="defer"?"defer":"deactivate";var n=this;var r=[];for(var o in this.otpDays){r.push({text:this.otpDays[o],numDays:o,onclick:function(e,r){this.popupWindow.close();if(t=="deactivate")n.deactivateUserOtp(r.numDays);else n.deferUserOtp(r.numDays)}})}BX.PopupMenu.show("securityOtpDaysPopup",e,r,{offsetTop:10,offsetLeft:0,events:{onPopupClose:function(){BX.PopupMenu.destroy("securityOtpDaysPopup")}}})}}})();
//# sourceMappingURL=script.map.js