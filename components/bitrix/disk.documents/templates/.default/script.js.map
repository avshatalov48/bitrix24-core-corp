{"version":3,"file":"script.js","sources":["src/utils.js","src/backend.js","src/fields/sharing.js","src/fields/externallink.js","src/grid/common-grid.js","src/options.js","src/toolbar.js","src/gridmenu/item.js","src/gridmenu/itemopen.js","src/gridmenu/itemsharesection.js","src/gridmenu/iteminternallink.js","src/gridmenu/itemexternallink.js","src/gridmenu/itemrename.js","src/gridmenu/item-sharing.js","src/gridmenu/index.js","src/grid/list.js","src/grid/tile.js","src/index.js"],"sourcesContent":["import 'main.polyfill.intersectionobserver';\n\nlet intersectionObserver;\nfunction observeIntersection(entity, callback)\n{\n\tif (!intersectionObserver)\n\t{\n\t\tintersectionObserver = new IntersectionObserver(function(entries) {\n\t\t\tentries.forEach((entry) => {\n\t\t\t\tif (entry.isIntersecting)\n\t\t\t\t{\n\t\t\t\t\tintersectionObserver.unobserve(entry.target);\n\t\t\t\t\tconst observedCallback = entry.target.observedCallback;\n\t\t\t\t\tdelete entry.target.observedCallback;\n\t\t\t\t\tsetTimeout(observedCallback);\n\t\t\t\t}\n\t\t\t});\n\t\t}, {\n\t\t\tthreshold: 0\n\t\t});\n\t}\n\tentity.observedCallback = callback;\n\n\tintersectionObserver.observe(entity);\n}\n\n\nexport {\n\tobserveIntersection\n}","import {ajax, Runtime} from 'main.core';\n\nclass BackendInner {\n\tstatic idsForShared = { }\n\tstatic idsForExternalLinks = { }\n\tstatic sendForInfo = Runtime.debounce(\n\t\tfunction()\n\t\t{\n\t\t\tconst requestData = {\n\t\t\t\t'shared': BackendInner.idsForShared,\n\t\t\t\t'externalLink': BackendInner.idsForExternalLinks\n\t\t\t}\n\t\t\tBackendInner.idsForShared = {};\n\t\t\tBackendInner.idsForExternalLinks = {};\n\n\t\t\tconst request = {};\n\t\t\tfor (let action in requestData)\n\t\t\t{\n\t\t\t\tif (requestData.hasOwnProperty(action))\n\t\t\t\t{\n\t\t\t\t\tfor (let id in requestData[action])\n\t\t\t\t\t{\n\t\t\t\t\t\tif (requestData[action].hasOwnProperty(id))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\trequest[id] = (request[id] || []);\n\t\t\t\t\t\t\trequest[id].push(action);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tajax\n\t\t\t\t.runComponentAction(\n\t\t\t\t\tBackend.component,\n\t\t\t\t\t'getInfo',\n\t\t\t\t\t{\n\t\t\t\t\t\tmode: 'ajax',\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\ttrackedObjectIds: request\n\t\t\t\t\t\t},\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t\t\t.then(({data}) => {\n\t\t\t\t\tfor (let action in requestData)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (requestData.hasOwnProperty(action))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfor (let id in requestData[action])\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif (requestData[action].hasOwnProperty(id))\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\trequestData[action][id][0]({data: data[id][action]});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch(({errors}) => {\n\t\t\t\t\tfor (let action in requestData)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (requestData.hasOwnProperty(action))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfor (let id in requestData[action])\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif (requestData[action].hasOwnProperty(id))\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\trequestData[action][id][1]({errors});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t}, 500\n\t)\n}\n\nexport default class Backend\n{\n\tstatic component: string = 'bitrix:disk.documents';\n\n\tstatic getShared(id)\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tBackendInner.idsForShared[id] = [resolve, reject];\n\t\t\tBackendInner.sendForInfo();\n\t\t});\n\t}\n\n\tstatic getExternalLink(id)\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tBackendInner.idsForExternalLinks[id] = [resolve, reject];\n\t\t\tBackendInner.sendForInfo();\n\t\t});\n\t}\n\n\tstatic getMenuActions(id)\n\t{\n\t\treturn ajax\n\t\t\t.runComponentAction(\n\t\t\t\tBackend.component,\n\t\t\t\t'getMenuActions',\n\t\t\t\t{\n\t\t\t\t\tmode: 'ajax',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\ttrackedObjectId: id\n\t\t\t\t\t},\n\t\t\t\t\tanalyticsLabel: Backend.component + '.gridMenuActions',\n\t\t\t\t}\n\t\t\t);\n\t}\n\n\tstatic getMenuOpenAction(id)\n\t{\n\t\treturn ajax\n\t\t\t.runComponentAction(\n\t\t\t\tBackend.component,\n\t\t\t\t'getMenuOpenAction',\n\t\t\t\t{\n\t\t\t\t\tmode: 'ajax',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\ttrackedObjectId: id\n\t\t\t\t\t},\n\t\t\t\t\tanalyticsLabel: Backend.component + '.gridMenuOpenAction',\n\t\t\t\t}\n\t\t\t);\n\t}\n\n\tstatic renameAction(id, newName)\n\t{\n\t\treturn ajax\n\t\t\t.runAction('disk.api.trackedObject.rename', {\n\t\t\t\tdata: {\n\t\t\t\t\tobjectId: id,\n\t\t\t\t\tnewName: newName\n\t\t\t\t}\n\t\t\t});\n\t}\n}","import {Loader} from 'main.loader';\nimport {Users} from 'disk.users';\nimport {observeIntersection} from \"../utils\";\nimport Backend from '../backend';\n\nexport class Sharing\n{\n\tid: Number;\n\tloader: ?Loader;\n\tnode: Element;\n\n\tconstructor(id, node)\n\t{\n\t\tthis.id = id;\n\t\tthis.node = node;\n\t\tthis.init();\n\t\tthis.observe();\n\t}\n\n\tinit()\n\t{\n\t\tthis.actionName = 'getShared';\n\t}\n\n\tobserve() {\n\t\tobserveIntersection(this.node, () => {\n\t\t\tthis.showLoading();\n\t\t\tBackend\n\t\t\t\t[this.actionName](this.id)\n\t\t\t\t.then(({data}) => {\n\t\t\t\t\tthis.hideLoading();\n\t\t\t\t\tthis.renderData(data);\n\t\t\t\t}, ({errors}) => {\n\t\t\t\t\tthis.hideLoading();\n\t\t\t\t\tconst errorMessages = [];\n\t\t\t\t\terrors.forEach((error) => {\n\t\t\t\t\t\terrorMessages.push(error.message);\n\t\t\t\t\t});\n\t\t\t\t\tthis.node.innerHTML = 'Error! ' + errorMessages.join('<br>');\n\t\t\t\t});\n\t\t});\n\t}\n\n\tshowLoading()\n\t{\n\t\tthis.loader = (this.loader || new Loader({target: this.node, mode: 'inline', size: 20}));\n\t\tthis.loader.show();\n\t\tthis.node.dataset.bxLoading = 'Y';\n\t}\n\n\thideLoading()\n\t{\n\t\tdelete this.node.dataset.bxLoading;\n\t\tthis.loader.hide();\n\t}\n\n\trenderData(data)\n\t{\n\t\tthis.node.innerHTML = '';\n\n\t\tconst res = new Users(data, null, {\n\t\t\tplaceInGrid: true\n\t\t});\n\t\tthis.node.appendChild(res.getContainer());\n\t}\n}","import {Sharing} from './sharing';\nimport {ExternalLinkForTrackedObject} from 'disk.external-link';\n\nexport class ExternalLink extends Sharing\n{\n\tinit()\n\t{\n\t\tthis.actionName = 'getExternalLink';\n\t}\n\n\tshowLoading()\n\t{\n\t}\n\n\thideLoading()\n\t{\n\t}\n\n\trenderData(data)\n\t{\n\t\tthis.node.innerHTML = '';\n\t\tconst res = new ExternalLinkForTrackedObject(this.id, data);\n\t\tthis.node.appendChild(res.getContainer());\n\t}\n}\n","\nexport default class CommonGrid\n{\n\t/**\n\t * @type {BX.TileGrid.Grid|BX.Main.grid}\n\t */\n\tgridInstance: any = null;\n\n\tconstructor(options)\n\t{\n\t\tthis.gridInstance = options.gridInstance;\n\t}\n\n\tgetId(): string\n\t{\n\t\treturn this.gridInstance.getId();\n\t}\n\n\tisGrid(): boolean\n\t{\n\t\treturn !this.isTile();\n\t}\n\n\tisTile(): boolean\n\t{\n\t\treturn BX.TileGrid.Grid && (this.gridInstance instanceof BX.TileGrid.Grid);\n\t}\n\n\tgetContainer(): HTMLElement\n\t{\n\t\treturn this.gridInstance.getContainer();\n\t}\n\n\tfade(): void\n\t{\n\t\tif (this.isGrid())\n\t\t{\n\t\t\tthis.gridInstance.tableFade();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.gridInstance.setFadeContainer();\n\t\t\tthis.gridInstance.getLoader();\n\t\t\tthis.gridInstance.showLoader();\n\t\t}\n\t}\n\n\tunFade(): void\n\t{\n\t\tif (this.isGrid())\n\t\t{\n\t\t\tthis.gridInstance.tableUnfade();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.gridInstance.getLoader().hide();\n\t\t\tthis.gridInstance.unSetFadeContainer();\n\t\t}\n\t}\n\n\tgetActionKey(): string\n\t{\n\t\treturn ('action_button_' + this.gridInstance.getId());\n\t}\n\n\tgetSelectedIds(): Array<string>\n\t{\n\t\tif (this.isGrid())\n\t\t{\n\t\t\treturn this.gridInstance.getRows().getSelectedIds();\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn this.gridInstance.getSelectedItems().map(function (item) {\n\t\t\t\treturn item.getId();\n\t\t\t});\n\t\t}\n\t}\n\n\tgetIds(): Array<string>\n\t{\n\t\tif (this.isGrid())\n\t\t{\n\t\t\treturn this.gridInstance.getRows().getBodyChild().map(function (row) {\n\t\t\t\treturn row.getId();\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn this.gridInstance.items.map(function (item) {\n\t\t\t\treturn item.id;\n\t\t\t});\n\t\t}\n\t}\n\n\tcountItems(): number\n\t{\n\t\tif (this.isGrid())\n\t\t{\n\t\t\treturn this.gridInstance.getRows().getBodyChild().length;\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn this.gridInstance.countItems();\n\t\t}\n\t}\n\n\treload(url, data)\n\t{\n\t\tdata = data || {};\n\n\t\tif (this.isGrid())\n\t\t{\n\t\t\tvar promise = new BX.Promise();\n\t\t\tthis.gridInstance.reloadTable(\n\t\t\t\t\"POST\",\n\t\t\t\tdata,\n\t\t\t\tfunction () {\n\t\t\t\t\tpromise.fulfill();\n\t\t\t\t},\n\t\t\t\turl\n\t\t\t);\n\n\t\t\treturn promise;\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn this.gridInstance.reload(url, data);\n\t\t}\n\t}\n\n\tgetActionsMenu(itemId): BX.Main.Menu\n\t{\n\t\tif (this.isGrid())\n\t\t{\n\t\t\treturn this.gridInstance.getRows().getById(itemId).getActionsMenu();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tvar item = this.gridInstance.getItem(itemId);\n\t\t\tif (item)\n\t\t\t{\n\t\t\t\treturn item.getActionsMenu();\n\t\t\t}\n\t\t}\n\t}\n\n\tgetItemById(id)\n\t{\n\t\tif (this.isGrid())\n\t\t{\n\t\t\treturn this.gridInstance.getRows().getById(id);\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn this.gridInstance.getItem(id);\n\t\t}\n\t}\n\n\tscrollTo(id): void\n\t{\n\t\tvar contentNode;\n\t\tif (this.isGrid())\n\t\t{\n\t\t\tvar row = this.gridInstance.getRows().getById(id);\n\t\t\tif (row && row.node)\n\t\t\t{\n\t\t\t\tcontentNode = row.node;\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tvar item = this.gridInstance.getItem(id);\n\t\t\tif (row && row.node)\n\t\t\t{\n\t\t\t\tcontentNode = row.getContainer();\n\t\t\t}\n\t\t}\n\n\t\tif (contentNode)\n\t\t{\n\t\t\t(new BX.easing({\n\t\t\t\tduration: 500,\n\t\t\t\tstart: {scroll: window.pageYOffset || document.documentElement.scrollTop},\n\t\t\t\tfinish: {scroll: BX.pos(contentNode).top},\n\t\t\t\ttransition: BX.easing.makeEaseOut(BX.easing.transitions.quart),\n\t\t\t\tstep: function (state) {\n\t\t\t\t\twindow.scrollTo(0, state.scroll);\n\t\t\t\t}\n\t\t\t})).animate();\n\t\t}\n\t}\n\n\tgetActionById(id, menuItemId)\n\t{\n\t\tvar item = this.getItemById(id);\n\t\tif (item)\n\t\t{\n\t\t\tvar actions = item.getActions();\n\t\t\tfor (var i = 0; i < actions.length; i++)\n\t\t\t{\n\t\t\t\tif (actions[i].id && actions[i].id === menuItemId)\n\t\t\t\t{\n\t\t\t\t\treturn actions[i];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tremoveItemById(itemId): void\n\t{\n\t\tBX.fireEvent(document, 'click');\n\n\t\tif (this.isGrid())\n\t\t{\n\t\t\tthis.gridInstance.removeRow(itemId);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tvar item = this.gridInstance.getItem(itemId);\n\t\t\tif (item)\n\t\t\t{\n\t\t\t\t//todo here we have to remove item from server\n\t\t\t\tthis.gridInstance.removeItem(item);\n\t\t\t}\n\t\t}\n\t}\n\n\tselectItemById(itemId): void\n\t{\n\t\tvar item;\n\t\tif (this.isGrid())\n\t\t{\n\t\t\titem = this.gridInstance.getRows().getById(itemId);\n\t\t\tif (item)\n\t\t\t{\n\t\t\t\titem.select();\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\titem = this.gridInstance.getItem(itemId);\n\t\t\tif (item)\n\t\t\t{\n\t\t\t\tthis.gridInstance.selectItem(item);\n\t\t\t}\n\t\t}\n\t}\n\n\tremoveSelected(): void\n\t{\n\t\tif (this.isGrid())\n\t\t{\n\t\t\tthis.gridInstance.removeSelected();\n\t\t}\n\t\telse\n\t\t{\n\t\t\t//todo here we have to remove items from server\n\t\t}\n\t}\n\n\tsortByColumn(column): void\n\t{\n\t\tthis.gridInstance.sortByColumn(column);\n\t}\n}","export class Options\n{\n\tstatic gridId: String = 'diskDocumentsGrid'; // $arParams['GRID_ID']\n\tstatic filterId: String = 'diskDocumentsFilter'; // $arParams['GRID_ID']\n\tstatic editableExt = ['doc', 'docx', 'xls', 'xlsx', 'ppt', 'pptx', 'xodt'];\n\n\tstatic getGridId()\n\t{\n\t\treturn Options.gridId;\n\t}\n\n\tstatic setGridId(gridId: ?String)\n\t{\n\t\tOptions.gridId = gridId;\n\t}\n\n\tstatic getFilterId()\n\t{\n\t\treturn Options.filterId;\n\t}\n\n\tstatic getEditableExt()\n\t{\n\t\treturn Options.editableExt;\n\t}\n\n\tstatic setEditableExt(extensions: ?Array)\n\t{\n\t\tOptions.editableExt = extensions;\n\t}\n\n\tstatic setViewList()\n\t{\n\t\tBX.userOptions.save('disk', 'documents', 'viewMode', 'list');\n\t\tBX.userOptions.save('disk', 'documents', 'viewSize', '');\n\t\twindow.location.reload();\n\t}\n\n\tstatic setViewSmallTile()\n\t{\n\t\tBX.userOptions.save('disk', 'documents', 'viewMode', 'tile');\n\t\tBX.userOptions.save('disk', 'documents', 'viewSize', 'm');\n\t\twindow.location.reload();\n\t}\n\n\tstatic setViewBigTile()\n\t{\n\t\tBX.userOptions.save('disk', 'documents', 'viewMode', 'tile');\n\t\tBX.userOptions.save('disk', 'documents', 'viewSize', 'xl');\n\t\twindow.location.reload();\n\t}\n}","import {BaseEvent, EventEmitter} from \"main.core.events\";\nimport CommonGrid from \"./grid/common-grid\";\nimport {Options as GridOptions} from \"./options\";\nimport {Reflection} from \"main.core\";\n\nexport default class Toolbar\n{\n\tconstructor()\n\t{\n\n\t}\n\n\tstatic reloadGridAndFocus(rowId: ?number)\n\t{\n\t\tlet gridInstance;\n\t\tconst gridId = GridOptions.getGridId();\n\t\tif (Reflection.getClass('BX.Main.gridManager') && BX.Main.gridManager.getInstanceById(gridId))\n\t\t{\n\t\t\tgridInstance = BX.Main.gridManager.getInstanceById(gridId);\n\t\t}\n\t\telse if (Reflection.getClass('BX.Main.tileGridManager') && BX.Main.tileGridManager.getInstanceById(gridId))\n\t\t{\n\t\t\tgridInstance = BX.Main.tileGridManager.getInstanceById(gridId);\n\t\t}\n\n\t\tconst commonGrid = new CommonGrid({\n\t\t\tgridInstance: gridInstance,\n\t\t});\n\n\t\tif (gridInstance)\n\t\t{\n\t\t\tcommonGrid.reload();\n\t\t}\n\t}\n\n\tstatic runCreating(documentType, service): void\n\t{\n\t\tif (BX.message('disk_restriction'))\n\t\t{\n\t\t\t//this.blockFeatures();\n\t\t\treturn;\n\t\t}\n\n\t\tif (service === 'l' && BX.Disk.Document.Local.Instance.isEnabled())\n\t\t{\n\t\t\tBX.Disk.Document.Local.Instance.createFile({\n\t\t\t\ttype: documentType,\n\t\t\t}).then((response) => {\n\t\t\t\tthis.reloadGridAndFocus(response.object.id);\n\t\t\t});\n\n\t\t\treturn;\n\t\t}\n\n\t\tconst createProcess = new BX.Disk.Document.CreateProcess({\n\t\t\ttypeFile: documentType,\n\t\t\tserviceCode: service,\n\t\t\tonAfterSave: (response) => {\n\t\t\t\tif (response.status === 'success')\n\t\t\t\t{\n\t\t\t\t\tthis.reloadGridAndFocus(response.object.id);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tcreateProcess.start();\n\t}\n\n\tstatic createDocx(service)\n\t{\n\t\tthis.runCreating('docx', service);\n\t}\n\n\tstatic createXlsx(service)\n\t{\n\t\tthis.runCreating('xlsx', service);\n\t}\n\n\tstatic createPptx(service)\n\t{\n\t\tthis.runCreating('pptx', service);\n\t}\n\n\tstatic createByDefault(service)\n\t{\n\t\tconsole.log('createByDefault: ', service);\n\t\tconsole.log('try to upload just for the test');\n\t}\n}","import {BaseEvent, EventEmitter} from 'main.core.events';\nimport {Menu, MenuItem} from 'main.popup';\nimport {Loader} from 'main.loader';\n\nexport default class Item extends EventEmitter\n{\n\ttrackedObjectId: Number;\n\tobjectId: ?Number;\n\tdata: Object = {};\n\tpopupMenuItem: ?MenuItem;\n\n\tconstructor(trackedObjectId, itemData)\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('Disk:Documents:');\n\t\tthis.trackedObjectId = trackedObjectId;\n\t\tthis.data = Object.assign({}, itemData);\n\t\tthis.data['className'] = (this.data['className'] || '') + ' disk-folder-list-context-menu-item';\n\t\tif (!this.data['text'])\n\t\t{\n\t\t\tthis.data['text'] = this.data['id'];\n\t\t}\n\t\tthis.objectId = this.data['objectId'];\n\t\tdelete this.data['objectId'];\n\t}\n\n\tgetData(key:?string)\n\t{\n\t\tif (key)\n\t\t{\n\t\t\treturn this.data[key];\n\t\t}\n\t\treturn this.data;\n\t}\n\n\tshowError(errors)\n\t{\n\t\tconsole.log('errors: ', errors);\n\t}\n\n\taddPopupMenuItem(popupMenu: Menu)\n\t{\n\t\tthis.popupMenuItem = popupMenu.addMenuItem(this.data);\n\t}\n\n\tshowLoad()\n\t{\n\t\tif (this.popupMenuItem)\n\t\t{\n\t\t\tthis.loader = (this.loader || new Loader({target: this.popupMenuItem.getContainer(), size: 32}));\n\t\t\tthis.loader.show();\n\t\t}\n\t}\n\n\thideLoad()\n\t{\n\t\tif (this.loader)\n\t\t{\n\t\t\tthis.loader.hide();\n\t\t}\n\t}\n\tstatic detect(itemData)\n\t{\n\t\treturn true;\n\t}\n}\n","import {Type} from 'main.core';\nimport Item from './item';\nimport Backend from '../backend';\n\nexport default class ItemOpen extends Item\n{\n\tconstructor(objectId, itemData)\n\t{\n\t\tsuper(objectId, itemData);\n\t\tthis.data['dataset'] = (this.data['dataset'] || {});\n\t\tthis.data['dataset']['preventCloseContextMenu'] = true;\n\t\tthis.data['onclick'] = function() {\n\t\t\tif (this.data['href'])\n\t\t\t{\n\t\t\t\treturn this.open();\n\t\t\t}\n\t\t\tthis.showLoad();\n\t\t\tBackend\n\t\t\t\t.getMenuOpenAction(this.objectId)\n\t\t\t\t.then(({data}) => {\n\t\t\t\t\tthis.hideLoad();\n\t\t\t\t\tthis.data['href'] = data;\n\t\t\t\t\tthis.open();\n\t\t\t\t})\n\t\t\t\t.catch(({errors}) => {\n\t\t\t\t\tthis.hideLoad();\n\t\t\t\t\tthis.showError(errors);\n\t\t\t\t})\n\t\t}.bind(this);\n\t}\n\n\topen()\n\t{\n\t\tif (Type.isStringFilled(this.data['href']))\n\t\t{\n\t\t\tBX.SidePanel.Instance.open(this.data['href']);\n\t\t\tthis.emit('close');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.showError([{text: 'Empty href'}])\n\t\t}\n\t}\n\n\tstatic detect(itemData)\n\t{\n\t\treturn itemData['id'] === 'open';\n\t}\n}\n\n","import {Type} from 'main.core';\nimport Item from './item';\nimport 'clipboard';\n\nexport default class ItemShareSection extends Item\n{\n\tconstructor(objectId, itemData)\n\t{\n\t\tsuper(objectId, itemData);\n\t\tthis.data['dataset'] = (this.data['dataset'] || {});\n\t\tthis.data['dataset']['preventCloseContextMenu'] = true;\n\t}\n\n\tstatic detect(itemData)\n\t{\n\t\treturn itemData['id'] === 'share-section';\n\t}\n}\n\n","import {MenuItem} from 'main.popup';\nimport Item from './item';\nimport 'clipboard';\n\nexport default class ItemInternalLink extends Item\n{\n\tconstructor(trackedObjectId, itemData)\n\t{\n\t\tsuper(trackedObjectId, itemData);\n\t\tthis.data['className'] += ' disk-documents-grid-actions-copy-internal-link';\n\t\tthis.data['html'] = [\n\t\t\tthis.data.text,\n\t\t\t'<span class=\"disk-documents-grid-actions-copy-internal-link-icon\">' +\n\t\t\t\t'<span class=\"disk-documents-grid-actions-copy-internal-link-icon-inner\">' +\n\t\t\t\t'</span>' +\n\t\t\t'</span>'\n\t\t].join('');\n\t\tdelete this.data['text'];\n\n\t\tthis.data['dataset'] = (this.data['dataset'] || {});\n\t\tthis.data['dataset']['preventCloseContextMenu'] = true;\n\t\tthis.data['onclick'] = function(event, menuItem: MenuItem) {\n\t\t\tconst target = menuItem.getLayout().item;\n\t\t\ttarget.classList.add('menu-popup-item-accept', 'disk-folder-list-context-menu-item-accept-animate');\n\t\t\ttarget.style.minWidth = (target.offsetWidth) + 'px';\n\t\t\tconst textNode = target.querySelector('.menu-popup-item-text');\n\t\t\tif (textNode)\n\t\t\t{\n\t\t\t\ttextNode.textContent = this.data['dataset']['textCopied'];\n\t\t\t}\n\t\t\tBX.clipboard.copy(this.data['dataset']['internalLink']);\n\t\t}.bind(this);\n\t}\n\n\tstatic detect(itemData)\n\t{\n\t\treturn itemData['id'] === 'internalLink';\n\t}\n}\n\n","import {Type} from 'main.core';\nimport Item from './item';\nimport {ExternalLinkForTrackedObject} from 'disk.external-link';\nexport default class ItemExternalLink extends Item\n{\n\tconstructor(objectId, itemData)\n\t{\n\t\tsuper(objectId, itemData);\n\n\t\tthis.data['onclick'] = function() {\n\t\t\tthis.emit('close');\n\n\t\t\tExternalLinkForTrackedObject.showPopup(this.trackedObjectId);\n\n\t\t}.bind(this);\n\t}\n\n\tstatic detect(itemData)\n\t{\n\t\treturn itemData['id'] === 'externalLink';\n\t}\n}\n\n","import {Text} from 'main.core';\nimport {Options as GridOptions} from '../options';\nimport Item from './item';\nimport Backend from \"../backend\";\n\nexport default class ItemRename extends Item\n{\n\tbuffExtension:string = '';\n\n\tconstructor(trackedObjectId, itemData)\n\t{\n\t\tsuper(trackedObjectId, itemData);\n\n\t\tif (!this.data['onclick'])\n\t\t{\n\t\t\tthis.data['onclick'] = this.rename.bind(this);\n\t\t}\n\t}\n\n\tcutExtension(name: string): string\n\t{\n\t\tthis.buffExtension = '';\n\t\tif (name.lastIndexOf('.') > 0)\n\t\t{\n\t\t\tthis.buffExtension = name.substr(name.lastIndexOf('.'));\n\t\t\treturn name.substr(0, name.lastIndexOf('.'));\n\t\t}\n\t\treturn name;\n\t}\n\n\trestoreExtension(name: string): string\n\t{\n\t\tname += this.buffExtension;\n\t\tthis.buffExtension = '';\n\t\treturn name;\n\t}\n\n\trename()\n\t{\n\t\tconst grid = BX.Main.gridManager\n\t\t\t.getInstanceById(GridOptions.getGridId());\n\n\t\tconst row = grid\n\t\t\t.getRows()\n\t\t\t.getById(this.trackedObjectId);\n\t\trow.edit();\n\n\t\tconst editorContainer = BX.Grid.Utils.getByClass(\n\t\t\trow.getNode(), 'main-grid-editor-container', true);\n\t\tconst input = editorContainer.querySelector('input');\n\n\t\tif (input)\n\t\t{\n\t\t\tinput.value = this.cutExtension(input.value);\n\t\t\tconst onBlur = function(event) {\n\t\t\t\tonBeforeSend(event);\n\t\t\t}.bind(this);\n\n\t\t\tconst onBeforeSend = (event) => {\n\t\t\t\tevent.stopPropagation();\n\t\t\t\tevent.preventDefault();\n\t\t\t\tconst fullName = this.restoreExtension(input.value);\n\t\t\t\tBackend\n\t\t\t\t\t.renameAction(this.trackedObjectId, fullName)\n\t\t\t\t\t.then(({data: {object: {name}}}) => {\n\t\t\t\t\t\tif (fullName !== name)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\trow.getNode().querySelector('#disk_obj_' + this.trackedObjectId).innerHTML = Text.encode(name);\n\t\t\t\t\t\t\trow.editData['NAME'] = name;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\tinput.removeEventListener('blur', onBlur);\n\t\t\t\trow.getNode().querySelector('#disk_obj_' + this.trackedObjectId).innerHTML = Text.encode(fullName);\n\t\t\t\trow.editData['NAME'] = fullName;\n\n\t\t\t\trow.editCancel();\n\t\t\t};\n\n\t\t\tinput.addEventListener('keydown', function(event) {\n\t\t\t\tif(event.key === 'Enter')\n\t\t\t\t{\n\t\t\t\t\tonBeforeSend(event);\n\t\t\t\t}\n\t\t\t\telse if(event.key === 'Escape')\n\t\t\t\t{\n\t\t\t\t\tinput.removeEventListener('blur', onBlur);\n\t\t\t\t\trow.editCancel();\n\t\t\t\t}\n\t\t\t}.bind(this));\n\t\t\tinput.addEventListener('blur', onBlur);\n\t\t\tBX.focus(input);\n\t\t}\n\t}\n\n\tstatic detect(itemData)\n\t{\n\t\treturn itemData['id'] === 'rename';\n\t}\n}\n\n","import Item from './item';\nimport {LegacyPopup, SharingControlType} from \"disk.sharing-legacy-popup\";\n\nexport default class ItemSharing extends Item\n{\n\tconstructor(trackedObjectId, itemData)\n\t{\n\t\tsuper(trackedObjectId, itemData);\n\n\t\tconst object = {\n\t\t\tid: itemData['dataset']['objectId'],\n\t\t\tname: itemData['dataset']['objectName'],\n\t\t}\n\n\t\tthis.data['onclick'] = () => {\n\t\t\tthis.emit('close');\n\n\t\t\tswitch (this.data['dataset']['type'])\n\t\t\t{\n\t\t\t\tcase SharingControlType.WITH_CHANGE_RIGHTS:\n\t\t\t\t\t(new LegacyPopup()).showSharingDetailWithChangeRights({\n\t\t\t\t\t\tobject: object\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tcase SharingControlType.WITH_SHARING:\n\t\t\t\t\t(new LegacyPopup()).showSharingDetailWithChangeRights({\n\t\t\t\t\t\tobject: object\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tcase SharingControlType.WITHOUT_EDIT:\n\t\t\t\t\t(new LegacyPopup()).showSharingDetailWithoutEdit({\n\t\t\t\t\t\tobject: object\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tstatic detect(itemData)\n\t{\n\t\treturn itemData['id'] === 'sharing';\n\t}\n}\n\n","import Item from './item';\nimport ItemOpen from './itemopen';\nimport ItemShareSection from './itemsharesection';\nimport ItemInternalLink from './iteminternallink';\nimport ItemExternalLink from './itemexternallink';\nimport ItemRename from './itemrename';\nimport ItemSharing from \"./item-sharing\";\n\nconst itemMappings = [\n\tItemOpen,\n\tItemShareSection,\n\tItemSharing,\n\tItemInternalLink,\n\tItemExternalLink,\n\tItemRename,\n];\n\nexport default function getMenuItem(trackedObjectId, itemData)\n{\n\tlet itemClassName = Item;\n\titemMappings.forEach((itemClass) => {\n\t\tif (itemClass.detect(itemData))\n\t\t{\n\t\t\titemClassName = itemClass;\n\t\t}\n\t});\n\n\treturn new itemClassName(trackedObjectId, itemData);\n}","import {Dom, pos} from 'main.core';\nimport {Options as GridOptions} from '../options';\nimport {BaseEvent, EventEmitter} from \"main.core.events\";\nimport Backend from \"../backend\";\nimport getMenuItem from \"../gridmenu/index\";\n\nexport default class List\n{\n\tconstructor()\n\t{\n\t\tthis.addReloadGrid();\n\t\tthis.addMenuActionLoader();\n\n\t\tthis.bindEvents();\n\t}\n\n\tbindEvents(): void\n\t{\n\t\tEventEmitter.subscribe('Disk.OnlyOffice:onSaved', this.handleDocumentSaved.bind(this));\n\t}\n\n\thandleDocumentSaved(event: BaseEvent): void\n\t{\n\t\tconst [object, documentSession] = event.getCompatData();\n\t\tconst grid = BX.Main.gridManager.getInstanceById(GridOptions.getGridId());\n\t\tconst objectNode = grid.getBody().querySelector(`span[data-object-id=\"${object.id}\"]`)\n\t\tif (!objectNode)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst row = objectNode.closest('.main-grid-row');\n\t\tif (!row || !row.dataset.id)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst rowId = row.dataset.id;\n\t\tgrid.updateRow(rowId, null, null, () => {\n\t\t\tconst rowNode = grid.getRows().getById(rowId).getNode();\n\t\t\tif (!rowNode)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tDom.addClass(rowNode, 'main-grid-row-checked');\n\t\t\tsetInterval(() => {\n\t\t\t\tDom.removeClass(rowNode, 'main-grid-row-checked');\n\t\t\t}, 8000);\n\t\t});\n\t}\n\n\taddReloadGrid()\n\t{\n\t\tBX.addCustomEvent('onPopupFileUploadClose', () => {\n\t\t\tBX.Main.gridManager\n\t\t\t\t.getInstanceById(GridOptions.getGridId())\n\t\t\t\t.reload();\n\t\t});\n\t}\n\n\taddMenuActionLoader()\n\t{\n\t\tEventEmitter.subscribe(\n\t\t\t'onPopupFirstShow',\n\t\t\tfunction({compatData: [popup]}: BaseEvent) {\n\t\t\t\tif (popup.uniquePopupId.indexOf('menu-popup-main-grid-actions-menu-') !== 0)\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst objectId = popup.uniquePopupId.replace(/^menu-popup-main-grid-actions-menu-/, '');\n\n\t\t\t\tpopup.getContentContainer().classList.add('disk-documents-animate');\n\t\t\t\tpopup.getContentContainer().style.height = 80 + 'px';\n\n\t\t\t\tBackend\n\t\t\t\t\t.getMenuActions(objectId)\n\t\t\t\t\t.then(function({data}) {\n\t\t\t\t\t\tconst row =  BX.Main.gridManager\n\t\t\t\t\t\t\t.getInstanceById(GridOptions.getGridId())\n\t\t\t\t\t\t\t.getRows()\n\t\t\t\t\t\t\t.getById(objectId);\n\t\t\t\t\t\tconst menu = row.getActionsMenu();\n\n\t\t\t\t\t\trow.actions = [];\n\t\t\t\t\t\tconst prepareActionMenu = (item, index, ar) => {\n\t\t\t\t\t\t\tif (item['items'])\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\titem['items'].forEach(prepareActionMenu)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tconst menuItem = getMenuItem(objectId, item);\n\t\t\t\t\t\t\tmenuItem.subscribe('close', () => {\n\t\t\t\t\t\t\t\trow.closeActionsMenu();\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tif (ar === data)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tmenuItem.addPopupMenuItem(menu);\n\t\t\t\t\t\t\t\trow.actions.push(menuItem.getData());\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tar[index] = menuItem.getData();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t\tpopup.getContentContainer().style.height = (data.length * 36) + 16 + 'px';\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tpopup.getContentContainer().addEventListener('transitionend', () => {\n\t\t\t\t\t\t\tpopup.getContentContainer().classList.remove('disk-documents-animate');\n\t\t\t\t\t\t\tpopup.getContentContainer().style.height = '';\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tdata.forEach(prepareActionMenu);\n\t\t\t\t\t\tif (menu)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tmenu.removeMenuItem('loader');\n\t\t\t\t\t\t}\n\t\t\t\t\t}.bind(this))\n\t\t\t\t\t.catch(function({errors})\n\t\t\t\t\t{\n\t\t\t\t\t\t//Hide Loader and show errors\n\t\t\t\t\t\tconsole.log(errors);\n\t\t\t\t\t}.bind(this));\n\t\t\t}.bind(this)\n\t\t);\n\t}\n}\n","import {Tag, Loc} from 'main.core';\nimport {Options as GridOptions} from '../options';\nimport {BaseEvent, EventEmitter} from \"main.core.events\";\nimport Backend from \"../backend\";\nimport getMenuItem from \"../gridmenu/index\";\n\nexport default class Tile\n{\n\tconstructor()\n\t{\n\t\tthis.addReloadGrid();\n\t\tthis.addMenuActionLoader();\n\t\tthis.addFilterSequence();\n\t}\n\n\taddFilterSequence()\n\t{\n\t\tEventEmitter.subscribe(\n\t\t\t'BX.Main.Filter:apply',\n\t\t\tfunction({compatData: [filterId, data, filter, promise, params]}: BaseEvent)\n\t\t\t{\n\t\t\t\tif (filterId === GridOptions.getFilterId())\n\t\t\t\t{\n\t\t\t\t\tpromise.then(function () {\n\t\t\t\t\t\tBX.Main.tileGridManager\n\t\t\t\t\t\t\t.getInstanceById(GridOptions.getGridId())\n\t\t\t\t\t\t\t.reload();\n\t\t\t\t\t}.bind(this));\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t}\n\n\taddReloadGrid()\n\t{\n\t\tBX.addCustomEvent('onPopupFileUploadClose', () => {\n\t\t\tBX.Main.tileGridManager\n\t\t\t\t.getInstanceById(GridOptions.getGridId())\n\t\t\t\t.reload();\n\t\t});\n\t}\n\n\taddMenuActionLoader()\n\t{\n\t\tEventEmitter.subscribe(\n\t\t\t'Disk:Documents:TileGrid:MenuAction:FirstShow',\n\t\t\tfunction({compatData: [row, objectId, menuPopup]}: BaseEvent) {\n\t\t\t\tBackend\n\t\t\t\t\t.getMenuActions(objectId)\n\t\t\t\t\t.then(function({data}) {\n\t\t\t\t\t\tconst menu = menuPopup;\n\t\t\t\t\t\trow.actions = [];\n\t\t\t\t\t\tconst prepareActionMenu = (item, index, ar) => {\n\t\t\t\t\t\t\tif (item['items'])\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\titem['items'].forEach(prepareActionMenu)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (item['id'] === 'rename')\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\titem['onclick'] = row.onRename.bind(row);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tconst menuItem = getMenuItem(objectId, item);\n\t\t\t\t\t\t\tmenuItem.subscribe('close', () => {\n\t\t\t\t\t\t\t\tmenu.close();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tif (ar === data)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tmenuItem.addPopupMenuItem(menu);\n\t\t\t\t\t\t\t\trow.actions.push(menuItem.getData());\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tar[index] = menuItem.getData();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdata.forEach(prepareActionMenu);\n\n\t\t\t\t\t\tif (menu)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tmenu.removeMenuItem('loader');\n\t\t\t\t\t\t}\n\t\t\t\t\t}.bind(this))\n\t\t\t\t\t.catch(function({errors})\n\t\t\t\t\t{\n\t\t\t\t\t\t//Hide Loader and show errors\n\t\t\t\t\t\tconsole.log(errors);\n\t\t\t\t\t}.bind(this));\n\t\t\t}.bind(this)\n\t\t);\n\t}\n\n\tstatic generateEmptyBlock()\n\t{\n\t\treturn Tag.render`\n\t\t<div class=\"disk-folder-list-no-data-inner\">\n\t\t\t<div class=\"disk-folder-list-no-data-inner-message\">\n\t\t\t\t${Loc.getMessage('DISK_DOCUMENTS_GRID_TILE_EMPTY_BLOCK_TITLE')}\n\t\t\t</div>\n\t\t\t<div class=\"disk-folder-list-no-data-inner-variable\">\n\t\t\t\t<div class=\"disk-folder-list-no-data-inner-create-file\" onmouseover=\"BX.onCustomEvent(window, 'onDiskUploadPopupShow', [this]);\">\n\t\t\t\t\t${Loc.getMessage('DISK_DOCUMENTS_GRID_TILE_EMPTY_BLOCK_UPLOAD')}</div>\n\t\t\t</div>\n\t\t</div>`;\n\t}\n}","import {Sharing} from './fields/sharing';\nimport {ExternalLink} from './fields/externallink';\nimport Toolbar from './toolbar';\nimport GridList from './grid/list';\nimport GridTile from './grid/tile';\nimport {Options as GridOptions, Options} from './options';\nimport {Ears} from 'ui.ears';\nimport {EventEmitter} from 'main.core.events';\nimport Backend from './backend';\n\nfunction showShared(objectId, node) {\n\tnew Sharing(objectId, node);\n}\n\nfunction showExternalLink(objectId, node) {\n\tnew ExternalLink(objectId, node);\n}\n\nconst TileGridEmptyBlockGenerator = GridTile.generateEmptyBlock;\nexport {\n\tshowExternalLink,\n\tshowShared,\n\tToolbar,\n\tOptions,\n\tTileGridEmptyBlockGenerator,\n\tBackend\n}\n\n//Template things\nBX.ready(() => {\n\tif (BX.Main.gridManager && BX.Main.gridManager\n\t\t.getInstanceById(GridOptions.getGridId()))\n\t{\n\t\tnew GridList;\n\t}\n\telse if (BX.Main.tileGridManager && BX.Main.tileGridManager\n\t\t.getInstanceById(GridOptions.getGridId()))\n\t{\n\t\tnew GridTile;\n\t}\n\telse\n\t{\n\t\tEventEmitter.subscribeOnce(EventEmitter.GLOBAL_TARGET, 'Grid::ready', ({compatData: [instance]}) => {\n\t\t\tif (instance && instance.getId() === GridOptions.getGridId())\n\t\t\t{\n\t\t\t\tnew GridList;\n\t\t\t}\n\t\t});\n\t\tEventEmitter.subscribeOnce(EventEmitter.GLOBAL_TARGET, 'BX.TileGrid.Grid:initialized', ({compatData: [instance]}) => {\n\t\t\tif (instance && instance.getId() === GridOptions.getGridId())\n\t\t\t{\n\t\t\t\tnew GridTile;\n\t\t\t}\n\t\t});\n\t}\n\n\tif (document.querySelector('#disk-documents-control-panel'))\n\t{\n\t\tconst ears = new Ears({\n\t\t\tcontainer: document.querySelector('#disk-documents-control-panel'),\n\t\t\tnoScrollbar: false,\n\t\t\tclassName: 'disk-documents-ears'\n\t\t});\n\t\tears.init();\n\t}\n\n\tconst func = (id, uploader) => {\n\t\tuploader.limits[\"uploadFileExt\"] = Options.getEditableExt().join(',');\n\t\tuploader.limits[\"uploadFile\"] = '.' + Options.getEditableExt().join(',.');\n\t\tif (uploader.fileInput)\n\t\t{\n\t\t\tuploader.fileInput.accept = uploader.limits[\"uploadFile\"];\n\t\t}\n\t}\n\tif (BX.UploaderManager && BX.UploaderManager.getById('DiskDocuments'))\n\t{\n\t\tfunc('DiskDocuments', BX.UploaderManager.getById('DiskDocuments'));\n\t}\n\telse\n\t{\n\t\tconst listener = ({compatData: [id, uploader]}) => {\n\t\t\tsetTimeout(() => {\n\t\t\t\tfunc(id, uploader)\n\t\t\t}, 200);\n\t\t\tEventEmitter.unsubscribe(EventEmitter.GLOBAL_TARGET, 'onUploaderIsInited', listener);\n\t\t};\n\t\tEventEmitter.subscribe(EventEmitter.GLOBAL_TARGET, 'onUploaderIsInited', listener);\n\t}\n});"],"names":["intersectionObserver","observeIntersection","entity","callback","IntersectionObserver","entries","forEach","entry","isIntersecting","unobserve","target","observedCallback","setTimeout","threshold","observe","BackendInner","Runtime","debounce","requestData","idsForShared","idsForExternalLinks","request","action","hasOwnProperty","id","push","ajax","runComponentAction","Backend","component","mode","data","trackedObjectIds","then","catch","errors","Promise","resolve","reject","sendForInfo","trackedObjectId","analyticsLabel","newName","runAction","objectId","Sharing","node","init","actionName","showLoading","hideLoading","renderData","errorMessages","error","message","innerHTML","join","loader","Loader","size","show","dataset","bxLoading","hide","res","Users","placeInGrid","appendChild","getContainer","ExternalLink","ExternalLinkForTrackedObject","CommonGrid","options","gridInstance","getId","isTile","BX","TileGrid","Grid","isGrid","tableFade","setFadeContainer","getLoader","showLoader","tableUnfade","unSetFadeContainer","getRows","getSelectedIds","getSelectedItems","map","item","getBodyChild","row","items","length","countItems","url","promise","reloadTable","fulfill","reload","itemId","getById","getActionsMenu","getItem","contentNode","easing","duration","start","scroll","window","pageYOffset","document","documentElement","scrollTop","finish","pos","top","transition","makeEaseOut","transitions","quart","step","state","scrollTo","animate","menuItemId","getItemById","actions","getActions","i","fireEvent","removeRow","removeItem","select","selectItem","removeSelected","column","sortByColumn","Options","gridId","filterId","editableExt","extensions","userOptions","save","location","Toolbar","rowId","GridOptions","getGridId","Reflection","getClass","Main","gridManager","getInstanceById","tileGridManager","commonGrid","documentType","service","Disk","Document","Local","Instance","isEnabled","createFile","type","response","reloadGridAndFocus","object","createProcess","CreateProcess","typeFile","serviceCode","onAfterSave","status","runCreating","console","log","Item","itemData","setEventNamespace","Object","assign","key","popupMenu","popupMenuItem","addMenuItem","EventEmitter","ItemOpen","open","showLoad","getMenuOpenAction","hideLoad","showError","bind","Type","isStringFilled","SidePanel","emit","text","ItemShareSection","ItemInternalLink","event","menuItem","getLayout","classList","add","style","minWidth","offsetWidth","textNode","querySelector","textContent","clipboard","copy","ItemExternalLink","showPopup","ItemRename","rename","name","buffExtension","lastIndexOf","substr","grid","edit","editorContainer","Utils","getByClass","getNode","input","value","cutExtension","onBlur","onBeforeSend","stopPropagation","preventDefault","fullName","restoreExtension","renameAction","Text","encode","editData","removeEventListener","editCancel","addEventListener","focus","ItemSharing","SharingControlType","WITH_CHANGE_RIGHTS","LegacyPopup","showSharingDetailWithChangeRights","WITH_SHARING","WITHOUT_EDIT","showSharingDetailWithoutEdit","itemMappings","getMenuItem","itemClassName","itemClass","detect","List","addReloadGrid","addMenuActionLoader","bindEvents","subscribe","handleDocumentSaved","getCompatData","documentSession","objectNode","getBody","closest","updateRow","rowNode","Dom","addClass","setInterval","removeClass","addCustomEvent","compatData","popup","uniquePopupId","indexOf","replace","getContentContainer","height","getMenuActions","menu","prepareActionMenu","index","ar","closeActionsMenu","addPopupMenuItem","getData","remove","removeMenuItem","Tile","addFilterSequence","filter","params","getFilterId","menuPopup","onRename","close","Tag","render","Loc","getMessage","showShared","showExternalLink","TileGridEmptyBlockGenerator","GridTile","generateEmptyBlock","ready","GridList","subscribeOnce","GLOBAL_TARGET","instance","ears","Ears","container","noScrollbar","className","func","uploader","limits","getEditableExt","fileInput","accept","UploaderManager","listener","unsubscribe"],"mappings":"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"}