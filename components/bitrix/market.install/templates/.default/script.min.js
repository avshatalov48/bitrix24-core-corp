"use strict";BX.namespace("BX.Market.Install");BX.Market.Install={init:function(i){i=typeof i==="object"?i:{};this.code=i.CODE||false;this.version=i.VERSION||false;this.checkHash=i.CHECK_HASH||false;this.installHash=i.INSTALL_HASH||false;this.from=i.FROM||"";this.iframe=i.IFRAME||false;this.redirectPriority=i.REDIRECT_PRIORITY||false;this.autoClose=true;this.formNode=BX("marketAppInstallForm");this.buttonInstallNode=BX.findChildByClassName(this.formNode,"market-btn-start-install");this.buttonCloseNode=BX.findChildByClassName(this.formNode,"market-btn-close-install");BX.bind(this.formNode,"submit",this.onSubmitForm.bind(this));BX.bind(this.buttonCloseNode,"click",this.onClickClose.bind(this))},onClickClose:function(i){i.preventDefault();if(!!this.iframe){BX.SidePanel.Instance.close()}},showError:function(i){BX("market_install_error").innerHTML=i;BX.show(BX("market_install_error"));BX.scrollToNode(BX("market_install_error"))},onSubmitForm:function(i){i.preventDefault();if(BX("mp_tos_license")&&!BX("mp_tos_license").checked){this.showError(BX.message("MARKET_INSTALL_TOS_ERROR"));return}if(BX("mp_detail_license")&&!BX("mp_detail_license").checked||BX("mp_detail_confidentiality")&&!BX("mp_detail_confidentiality").checked){this.showError(BX.message("MARKET_INSTALL_LICENSE_ERROR"));return}if(BX.hasClass(this.buttonInstallNode,"ui-btn-wait")){return}BX.addClass(this.buttonInstallNode,"ui-btn-wait");var t={code:this.code};if(!!this.version){t.version=this.version}if(!!this.checkHash){t.check_hash=this.checkHash;t.install_hash=this.installHash}if(!!this.from){t.from=this.from}BX.ajax.runAction("market.Application.install",{data:t,analyticsLabel:{from:this.from}}).then(BX.Market.Action.installFinish.bind(this))},initHelper:function(i){if(!window.BX.UI.InfoHelper.isInited()){window.BX.UI.InfoHelper.init({frameUrlTemplate:i.frameUrlTemplate});window.BX.UI.InfoHelper.frameNode=BX(i.iframeId)}BX.bind(window,"message",BX.proxy((function(i){if(!!i.origin&&i.origin.indexOf("bitrix")===-1){return}if(!i.data||typeof i.data!=="object"){return}if(i.data.action==="reloadParent"){var t=BX.SidePanel.Instance.getTopSlider();if(!!t){t.reload()}else{window.location.reload()}}})))}};
//# sourceMappingURL=script.map.js