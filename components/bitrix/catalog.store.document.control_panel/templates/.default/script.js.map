{"version":3,"file":"script.js","sources":["script.es6.js"],"sourcesContent":["import {Reflection, Type, Event, Dom, ajax} from 'main.core';\nimport {Slider} from 'catalog.store-use'\n\nconst namespace = Reflection.namespace('BX.Catalog.Store.Document');\n\nclass ControlPanel\n{\n\topenSlider(url, options = {})\n\t{\n\t\tlet currentSlider = BX.SidePanel.Instance.getTopSlider();\n\n\t\toptions = Type.isPlainObject(options) ? options:{};\n\n\t\tlet params = {\n\t\t\tevents: options.hasOwnProperty(\"events\") ? options.events : {},\n\t\t\tdata: options.hasOwnProperty(\"data\") ? options.data : {},\n\t\t};\n\n\t\tparams.events.onClose = function(event)\n\t\t{\n\t\t\tlet slider = event.getSlider();\n\t\t\tif (!slider)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (slider.getData().get('isInventoryManagementEnabled'))\n\t\t\t{\n\t\t\t\tif (currentSlider)\n\t\t\t\t{\n\t\t\t\t\tcurrentSlider.data.set('preventMasterSlider', true);\n\t\t\t\t}\n\t\t\t\tdocument.location.reload();\n\t\t\t}\n\t\t}\n\n\t\treturn new Slider().open(url, params)\n\t}\n\n\tstoreMasterOpenSlider(url, options = {})\n\t{\n\t\tthis.openSlider(url, options);\n\t}\n\n\treloadGrid()\n\t{\n\t\tdocument.location.reload()\n\t}\n}\n\nif (window === window.top && BX.SidePanel.Instance)\n{\n\tBX.SidePanel.Instance.bindAnchors({rules: [\n\t\t\t{\n\t\t\t\tcondition: [\n\t\t\t\t\t'/crm/configs/catalog/',\n\t\t\t\t],\n\t\t\t\toptions: {\n\t\t\t\t\twidth: 1000,\n\t\t\t\t\tallowChangeHistory: false,\n\t\t\t\t\tcacheable: false,\n\t\t\t\t}\n\t\t\t},\n\t\t]});\n}\n\nnamespace.ControlPanel = ControlPanel"],"names":["namespace","Reflection","ControlPanel","url","options","currentSlider","BX","SidePanel","Instance","getTopSlider","Type","isPlainObject","params","events","hasOwnProperty","data","onClose","event","slider","getSlider","getData","get","set","document","location","reload","Slider","open","openSlider","window","top","bindAnchors","rules","condition","width","allowChangeHistory","cacheable"],"mappings":";;;CAGA,IAAMA,SAAS,GAAGC,oBAAU,CAACD,SAAX,CAAqB,2BAArB,CAAlB;;KAEME;;;;;;;gCAEMC,KACX;CAAA,UADgBC,OAChB,uEAD0B,EAC1B;CACC,UAAIC,aAAa,GAAGC,EAAE,CAACC,SAAH,CAAaC,QAAb,CAAsBC,YAAtB,EAApB;CAEAL,MAAAA,OAAO,GAAGM,cAAI,CAACC,aAAL,CAAmBP,OAAnB,IAA8BA,OAA9B,GAAsC,EAAhD;CAEA,UAAIQ,MAAM,GAAG;CACZC,QAAAA,MAAM,EAAET,OAAO,CAACU,cAAR,CAAuB,QAAvB,IAAmCV,OAAO,CAACS,MAA3C,GAAoD,EADhD;CAEZE,QAAAA,IAAI,EAAEX,OAAO,CAACU,cAAR,CAAuB,MAAvB,IAAiCV,OAAO,CAACW,IAAzC,GAAgD;CAF1C,OAAb;;CAKAH,MAAAA,MAAM,CAACC,MAAP,CAAcG,OAAd,GAAwB,UAASC,KAAT,EACxB;CACC,YAAIC,MAAM,GAAGD,KAAK,CAACE,SAAN,EAAb;;CACA,YAAI,CAACD,MAAL,EACA;CACC;CACA;;CAED,YAAIA,MAAM,CAACE,OAAP,GAAiBC,GAAjB,CAAqB,8BAArB,CAAJ,EACA;CACC,cAAIhB,aAAJ,EACA;CACCA,YAAAA,aAAa,CAACU,IAAd,CAAmBO,GAAnB,CAAuB,qBAAvB,EAA8C,IAA9C;CACA;;CACDC,UAAAA,QAAQ,CAACC,QAAT,CAAkBC,MAAlB;CACA;CACD,OAhBD;;CAkBA,aAAO,IAAIC,uBAAJ,GAAaC,IAAb,CAAkBxB,GAAlB,EAAuBS,MAAvB,CAAP;CACA;;;2CAEqBT,KACtB;CAAA,UAD2BC,OAC3B,uEADqC,EACrC;CACC,WAAKwB,UAAL,CAAgBzB,GAAhB,EAAqBC,OAArB;CACA;;;kCAGD;CACCmB,MAAAA,QAAQ,CAACC,QAAT,CAAkBC,MAAlB;CACA;;;;;CAGF,IAAII,MAAM,KAAKA,MAAM,CAACC,GAAlB,IAAyBxB,EAAE,CAACC,SAAH,CAAaC,QAA1C,EACA;CACCF,EAAAA,EAAE,CAACC,SAAH,CAAaC,QAAb,CAAsBuB,WAAtB,CAAkC;CAACC,IAAAA,KAAK,EAAE,CACxC;CACCC,MAAAA,SAAS,EAAE,CACV,uBADU,CADZ;CAIC7B,MAAAA,OAAO,EAAE;CACR8B,QAAAA,KAAK,EAAE,IADC;CAERC,QAAAA,kBAAkB,EAAE,KAFZ;CAGRC,QAAAA,SAAS,EAAE;CAHH;CAJV,KADwC;CAAR,GAAlC;CAYA;;CAEDpC,SAAS,CAACE,YAAV,GAAyBA,YAAzB;;;;"}