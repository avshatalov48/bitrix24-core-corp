{"version":3,"file":"script.js","sources":["script.es6.js"],"sourcesContent":["import { ajax as Ajax, Reflection, Text, Tag, Loc } from 'main.core';\nimport { Button } from 'ui.buttons';\n\nconst namespace = Reflection.namespace('BX.BIConnector');\n\ntype Props = {\n\tenableButtonSectionId: string,\n\n\tcanEnable: boolean,\n\tenableDate: string,\n};\n\nclass SupersetEnabler\n{\n\t#enableButtonSection: HTMLElement;\n\n\t#enableButton: HTMLElement;\n\n\tconstructor(props: Props)\n\t{\n\t\tthis.#enableButtonSection = document.getElementById(props.enableButtonSectionId);\n\t\tif (!this.#enableButtonSection)\n\t\t{\n\t\t\tthrow new Error('Enable button section not found');\n\t\t}\n\n\t\tthis.#renderEnableSection(props.canEnable, props.enableDate);\n\t}\n\n\t#renderEnableSection(canEnable: boolean, enableDate?: string): void\n\t{\n\t\tthis.#enableButton = this.#createEnableButton(!canEnable);\n\n\t\tconst buttonWrapper = Tag.render`<div></div>`;\n\t\tthis.#enableButton.renderTo(buttonWrapper);\n\n\t\tlet descriptionBlock = null;\n\t\tif (!canEnable)\n\t\t{\n\t\t\tconst description = Loc.getMessage('BICONNECTOR_SUPERSET_DASHBOARD_CONTROLLER_CREATE_SUPERSET_BUTTON_ENABLE_DATE', {\n\t\t\t\t'#ENABLE_TIME#': enableDate,\n\t\t\t});\n\n\t\t\tdescriptionBlock = Tag.render`<div class=\"biconnector-create-superset-button-block-desc\">${description}</div>`;\n\t\t}\n\n\t\tconst content = Tag.render`\n\t\t\t<div class=\"biconnector-create-superset-button-block\">\n\t\t\t\t${buttonWrapper}\n\t\t\t\t${descriptionBlock}\n\t\t\t</div>\n\t\t`;\n\n\t\tthis.#enableButtonSection.append(content);\n\t}\n\n\t#createEnableButton(disabled: boolean): HTMLElement\n\t{\n\t\treturn new Button({\n\t\t\ttext: Loc.getMessage('BICONNECTOR_SUPERSET_DASHBOARD_CONTROLLER_CREATE_SUPERSET_BUTTON_MSGVER_1'),\n\t\t\tround: true,\n\t\t\tcolor: Button.Color.PRIMARY,\n\t\t\tonclick: () => {\n\t\t\t\tthis.#enableSuperset();\n\t\t\t},\n\t\t\tdisabled: disabled,\n\t\t\tclassName: disabled ? 'biconnector-create-superset-disabled-button biconnector-create-superset-button' : 'biconnector-create-superset-button',\n\t\t});\n\t}\n\n\t#enableSuperset(): void\n\t{\n\t\tthis.#enableButton.setWaiting(true);\n\n\t\tAjax.runAction('biconnector.superset.enable')\n\t\t\t.then(() => {\n\t\t\t\twindow.location.reload();\n\t\t\t})\n\t\t\t.catch((response) => {\n\t\t\t\tBX.UI.Notification.Center.notify({\n\t\t\t\t\tcontent: Text.encode(response.errors[0].message),\n\t\t\t\t});\n\n\t\t\t\tthis.#enableButton.setWaiting(false);\n\t\t\t});\n\t}\n}\n\nnamespace.SupersetEnabler = SupersetEnabler;\n"],"names":["namespace","Reflection","SupersetEnabler","props","document","getElementById","enableButtonSectionId","Error","canEnable","enableDate","buttonWrapper","Tag","render","renderTo","descriptionBlock","description","Loc","getMessage","content","append","disabled","Button","text","round","color","Color","PRIMARY","onclick","className","setWaiting","Ajax","runAction","then","window","location","reload","response","BX","UI","Notification","Center","notify","Text","encode","errors","message"],"mappings":";;;;;;;;;AAAA,CAGA,IAAMA,SAAS,GAAGC,oBAAU,CAACD,SAAS,CAAC,gBAAgB,CAAC;CAAC;CAAA;CAAA;CAAA;CAAA;CAAA,IASnDE,eAAe,GAMpB,yBAAYC,KAAY,EACxB;GAAA;GAAA;GAAA;GAAA;GAAA;KAAA;KAAA;;GAAA;KAAA;KAAA;;GACC,sCAAI,wBAAwBC,QAAQ,CAACC,cAAc,CAACF,KAAK,CAACG,qBAAqB,CAAC;GAChF,IAAI,mCAAC,IAAI,uBAAqB,EAC9B;KACC,MAAM,IAAIC,KAAK,CAAC,iCAAiC,CAAC;;GAGnD,2BAAI,oDAAJ,IAAI,EAAsBJ,KAAK,CAACK,SAAS,EAAEL,KAAK,CAACM,UAAU;CAC5D,CAAC;CAAA,+BAEoBD,SAAkB,EAAEC,UAAmB,EAC5D;GACC,sCAAI,wCAAiB,IAAI,kDAAJ,IAAI,EAAqB,CAACD,SAAS;GAExD,IAAME,aAAa,GAAGC,aAAG,CAACC,MAAM,4FAAa;GAC7C,sCAAI,iBAAeC,QAAQ,CAACH,aAAa,CAAC;GAE1C,IAAII,gBAAgB,GAAG,IAAI;GAC3B,IAAI,CAACN,SAAS,EACd;KACC,IAAMO,WAAW,GAAGC,aAAG,CAACC,UAAU,CAAC,8EAA8E,EAAE;OAClH,eAAe,EAAER;MACjB,CAAC;KAEFK,gBAAgB,GAAGH,aAAG,CAACC,MAAM,2JAA8DG,WAAW,CAAQ;;GAG/G,IAAMG,OAAO,GAAGP,aAAG,CAACC,MAAM,oMAEtBF,aAAa,EACbI,gBAAgB,CAEnB;GAED,sCAAI,wBAAsBK,MAAM,CAACD,OAAO,CAAC;CAC1C;CAAC,8BAEmBE,QAAiB,EACrC;GAAA;GACC,OAAO,IAAIC,iBAAM,CAAC;KACjBC,IAAI,EAAEN,aAAG,CAACC,UAAU,CAAC,2EAA2E,CAAC;KACjGM,KAAK,EAAE,IAAI;KACXC,KAAK,EAAEH,iBAAM,CAACI,KAAK,CAACC,OAAO;KAC3BC,OAAO,EAAE,mBAAM;OACd,4BAAI,0CAAJ,KAAI;MACJ;KACDP,QAAQ,EAAEA,QAAQ;KAClBQ,SAAS,EAAER,QAAQ,GAAG,gFAAgF,GAAG;IACzG,CAAC;CACH;CAAC,4BAGD;GAAA;GACC,sCAAI,iBAAeS,UAAU,CAAC,IAAI,CAAC;GAEnCC,cAAI,CAACC,SAAS,CAAC,6BAA6B,CAAC,CAC3CC,IAAI,CAAC,YAAM;KACXC,MAAM,CAACC,QAAQ,CAACC,MAAM,EAAE;IACxB,CAAC,SACI,CAAC,UAACC,QAAQ,EAAK;KACpBC,EAAE,CAACC,EAAE,CAACC,YAAY,CAACC,MAAM,CAACC,MAAM,CAAC;OAChCvB,OAAO,EAAEwB,cAAI,CAACC,MAAM,CAACP,QAAQ,CAACQ,MAAM,CAAC,CAAC,CAAC,CAACC,OAAO;MAC/C,CAAC;KAEF,wCAAI,iBAAehB,UAAU,CAAC,KAAK,CAAC;IACpC,CAAC;CACJ;CAGD7B,SAAS,CAACE,eAAe,GAAGA,eAAe;;;;"}