BX.namespace("BX.Lists");BX.Lists.ListsEditClass=function(){var t=function(t){this.randomString=t.randomString;this.iblockTypeId=t.iblockTypeId;this.iblockId=t.iblockId;this.socnetGroupId=t.socnetGroupId;this.jsClass="ListsEditClass_"+t.randomString;this.listsUrl=t.listsUrl||"";this.listAction=t.listAction;this.listTemplateEditUrl=t.listTemplateEditUrl;this.listElementUrl=t.listElementUrl;this.init()};t.prototype.init=function(){this.ajaxUrl="/bitrix/components/bitrix/lists.list.edit/ajax.php";this.actionButton=BX("lists-title-action");this.actionPopupItems=[];this.actionPopupObject=null;this.actionPopupId="lists-title-action";BX.bind(this.actionButton,"click",BX.delegate(this.showListAction,this))};t.prototype.showListAction=function(){if(!this.actionPopupItems.length){for(var t=0;t<this.listAction.length;t++){this.actionPopupItems.push({text:this.listAction[t].text,onclick:this.listAction[t].action})}}if(!BX.PopupMenu.getMenuById(this.actionPopupId)){var i=this.actionButton.getBoundingClientRect();this.actionPopupObject=BX.PopupMenu.create(this.actionPopupId,this.actionButton,this.actionPopupItems,{closeByEsc:true,angle:true,offsetLeft:i.width/2,events:{onPopupShow:BX.proxy(function(){BX.addClass(this.actionButton,"webform-button-active")},this),onPopupClose:BX.proxy(function(){BX.removeClass(this.actionButton,"webform-button-active")},this)}})}if(this.actionPopupObject)this.actionPopupObject.popupWindow.show()};t.prototype.copyIblock=function(){var t=new BX.PopupWindow({titleBar:BX.message("CT_BLLE_COPY_POPUP_TITLE"),closeIcon:true,autoHide:true,closeByEsc:true,content:BX.message("CT_BLLE_COPY_POPUP_CONTENT"),buttons:[new BX.UI.Button({text:BX.message("CT_BLLE_COPY_POPUP_ACCEPT_BUTTON"),size:BX.UI.Button.Size.MEDIUM,color:BX.UI.Button.Color.SUCCESS,onclick:function(i,o){i.setWaiting();BX.ajax.runAction("lists.controller.iblock.copy",{data:{iblock_type_id:this.iblockTypeId,iblock_id:this.iblockId,socnet_group_id:this.socnetGroupId,list_element_url:this.listElementUrl}}).then(function(i){this.listTemplateEditUrl=this.listTemplateEditUrl.replace("#list_id#",i.data).replace("#group_id#",this.socnetGroupId);BX.UI.Notification.Center.notify({content:BX.message("CT_BLLE_COPY_POPUP_COPIED_SUCCESS").replace("#URL#",BX.util.htmlspecialchars(this.listTemplateEditUrl)),position:"top-right",closeButton:false});t.close()}.bind(this),function(t){i.setWaiting(false);BX.UI.Notification.Center.notify({content:t.errors.pop().message,position:"top-right",closeButton:false})})}.bind(this)}),new BX.UI.Button({text:BX.message("CT_BLLE_COPY_POPUP_CANCEL_BUTTON"),size:BX.UI.Button.Size.MEDIUM,color:BX.UI.Button.Color.LINK,onclick:function(i,o){t.close()}})]});t.show()};t.prototype.deleteIblock=function(t,i){var o=BX(t);var e=BX("action");if(o&&e){BX.Lists.modalWindow({modalId:"bx-lists-migrate-list",title:BX.message("CT_BLLE_DELETE_POPUP_TITLE"),draggable:true,contentClassName:"",contentStyle:{width:"400px",padding:"20px 20px 20px 20px"},events:{onPopupClose:function(){this.destroy()}},content:i,buttons:[BX.create("span",{text:BX.message("CT_BLLE_DELETE_POPUP_ACCEPT_BUTTON"),props:{className:"webform-small-button webform-small-button-accept"},events:{click:BX.delegate(function(){e.value="delete";o.submit()},this)}}),BX.create("span",{text:BX.message("CT_BLLE_DELETE_POPUP_CANCEL_BUTTON"),props:{className:"popup-window-button popup-window-button-link popup-window-button-link-cancel"},events:{click:BX.delegate(function(){BX.PopupWindowManager.getCurrentPopup().close()},this)}})]})}};t.prototype.migrateList=function(t,i){var o=BX(t);var e=BX("action");if(o&&e){BX.Lists.modalWindow({modalId:"bx-lists-migrate-list",title:BX.message("CT_BLLE_MIGRATE_POPUP_TITLE"),draggable:true,contentClassName:"",contentStyle:{width:"400px",padding:"20px 20px 20px 20px"},events:{onPopupClose:function(){this.destroy()}},content:i,buttons:[BX.create("span",{text:BX.message("CT_BLLE_MIGRATE_POPUP_ACCEPT_BUTTON"),props:{className:"webform-small-button webform-small-button-accept"},events:{click:BX.delegate(function(){e.value="migrate";o.submit()},this)}}),BX.create("span",{text:BX.message("CT_BLLE_MIGRATE_POPUP_CANCEL_BUTTON"),props:{className:"popup-window-button popup-window-button-link popup-window-button-link-cancel"},events:{click:BX.delegate(function(){BX.PopupWindowManager.getCurrentPopup().close()},this)}})]})}};return t}();
//# sourceMappingURL=script.map.js