{"version":3,"file":"script.js","sources":["src/analytics.js","src/contents/content.js","src/contents/invitation.js","src/contents/structure.js","src/contents/employees.js","src/contents/extranet.js","src/contents/user-online.js","src/popup.js","src/widget.js"],"sourcesContent":["import { sendData } from 'ui.analytics';\n\nexport class Analytics\n{\n\tstatic TOOLS = 'headerPopup';\n\tstatic TOOLS_LEGACY = 'Invitation';\n\tstatic CATEGORY_INVITATION = 'invitation';\n\tstatic CATEGORY_INVITATION_LEGACY = 'invitation';\n\tstatic EVENT_NAME_LEGACY = 'drawer_open';\n\tstatic SECTION_POPUP = 'headerPopup';\n\tstatic EVENT_SHOW = 'show';\n\tstatic EVENT_OPEN_SLIDER_INVITATION = 'drawer_open';\n\tstatic EVENT_OPEN_STRUCTURE = 'vis_structure_open';\n\tstatic EVENT_OPEN_USER_LIST = 'company_open';\n\tstatic EVENT_OPEN_SLIDER_EXTRANET_INVITATION = 'extranetinvitation_open';\n\tstatic isAdmin: boolean = false;\n\n\tstatic send(event: string): void\n\t{\n\t\tsendData({\n\t\t\ttool: Analytics.TOOLS,\n\t\t\tcategory: Analytics.CATEGORY_INVITATION,\n\t\t\tevent: event,\n\t\t\tp1: Analytics.isAdmin ? 'isAdmin_Y' : 'isAdmin_N',\n\t\t});\n\t}\n\n\tsendLegacy(section: string)\n\t{\n\t\tsendData({\n\t\t\ttool: Analytics.TOOLS_LEGACY,\n\t\t\tcategory: Analytics.CATEGORY_INVITATION_LEGACY,\n\t\t\tevent: Analytics.EVENT_NAME_LEGACY,\n\t\t\tc_section: section,\n\t\t\tp1: Analytics.isAdmin ? 'isAdmin_Y' : 'isAdmin_N',\n\t\t});\n\t}\n}\n","import { BaseEvent, EventEmitter } from 'main.core.events';\nimport { ajax, Cache, Text } from 'main.core';\nimport { ConfigContent } from '../types/content';\nimport { Popup } from 'main.popup';\nimport { Analytics } from '../analytics';\n\nexport class Content extends EventEmitter\n{\n\tcache = new Cache.MemoryCache();\n\n\tconstructor(options: Object)\n\t{\n\t\tsuper();\n\t\tthis.setOptions(options);\n\t\tthis.analytics = new Analytics();\n\t}\n\n\tsetOptions(options: Object): void\n\t{\n\t\tthis.cache.set('options', { ...options });\n\t}\n\n\tgetOptions(): Object\n\t{\n\t\treturn this.cache.get('options', {});\n\t}\n\n\tgetLayout(): HTMLElement\n\t{\n\t\tthrow new Error('Must be implemented in a child class');\n\t}\n\n\tshowInfoHelper(articleCode: string): void\n\t{\n\t\tBX.UI.InfoHelper.show(articleCode);\n\t\tthis.sendAnalytics(articleCode);\n\t}\n\n\tsendAnalytics(code: string): void\n\t{\n\t\tajax.runAction('intranet.invitationwidget.analyticsLabel', {\n\t\t\tdata: {},\n\t\t\tanalyticsLabel: {\n\t\t\t\thelperCode: code,\n\t\t\t\theaderPopup: 'Y'\n\t\t\t}\n\t\t});\n\t}\n\n\tgetHintPopup(text: string, element: HTMLElement, type: string): Popup\n\t{\n\t\treturn this.cache.remember(type, () => {\n\t\t\treturn new Popup(`bx-hint-${Text.getRandom()}`, element, {\n\t\t\t\tcontent: text,\n\t\t\t\tclassName: 'bx-invitation-warning',\n\t\t\t\tzIndex: 15000,\n\t\t\t\tangle: true,\n\t\t\t\toffsetTop: 0,\n\t\t\t\toffsetLeft: 40,\n\t\t\t\tcloseIcon: false,\n\t\t\t\tautoHide: true,\n\t\t\t\tdarkMode: true,\n\t\t\t\toverlay: false,\n\t\t\t\tmaxWidth: 300,\n\t\t\t\tevents: {\n\t\t\t\t\tonShow: (event) => {\n\t\t\t\t\t\tEventEmitter.emit(EventEmitter.GLOBAL_TARGET, 'BX.Intranet.InvitationWidget.HintPopup:show', new BaseEvent({\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\tpopup: event.target,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}));\n\t\t\t\t\t\tconst timeout = setTimeout(() => {\n\t\t\t\t\t\t\tevent.target.close();\n\t\t\t\t\t\t}, 4000)\n\t\t\t\t\t\tEventEmitter.subscribeOnce(EventEmitter.GLOBAL_TARGET, 'BX.Intranet.InvitationWidget.HintPopup:close', () => {\n\t\t\t\t\t\t\tclearTimeout(timeout);\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\tonClose: () => {\n\t\t\t\t\t\tEventEmitter.emit(EventEmitter.GLOBAL_TARGET, 'BX.Intranet.InvitationWidget.HintPopup:close');\n\t\t\t\t\t},\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\tshowHintPopup(text: string, element: HTMLElement, type: string): void\n\t{\n\t\tthis.getHintPopup(text, element, type).toggle();\n\t}\n\n\tshowInvitationPlace(text: string, element: HTMLElement, type: string): void\n\t{\n\t\tif (this.getOptions().isAdmin)\n\t\t{\n\t\t\tthis.showInvitationSlider(type);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (this.getOptions().isInvitationAvailable)\n\t\t\t{\n\t\t\t\tthis.showInvitationSlider(type);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.showHintPopup(text, element, 'hint-' + type);\n\t\t\t}\n\t\t}\n\t}\n\n\tshowInvitationSlider(type: string): void\n\t{\n\t\tlet link = this.getOptions().invitationLink;\n\n\t\tif (type === 'extranet')\n\t\t{\n\t\t\tlink = `${link}&firstInvitationBlock=extranet`;\n\t\t\tAnalytics.send(Analytics.EVENT_OPEN_SLIDER_EXTRANET_INVITATION);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tAnalytics.send(Analytics.EVENT_OPEN_SLIDER_INVITATION);\n\t\t}\n\n\t\tthis.analytics.sendLegacy(Analytics.SECTION_POPUP);\n\t\tBX.SidePanel.Instance.open(\n\t\t\tlink,\n\t\t\t{ cacheable: false, allowChangeHistory: false, width: 1100 }\n\t\t);\n\t}\n\n\tgetConfig(): ConfigContent\n\t{\n\t\treturn {\n\t\t\thtml: this.getLayout(),\n\t\t}\n\t}\n}\n","import { Content } from \"./content\";\nimport { Tag, Loc } from \"main.core\";\nimport type { InvitationContentOptions } from \"../types/options\";\nimport type { ConfigContent } from \"../types/content\";\n\nexport class InvitationContent extends Content\n{\n\tconstructor(options: InvitationContentOptions) {\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Intranet.InvitationWidget.InvitationContent');\n\t\tthis.setOptions(options);\n\t}\n\n\tgetConfig(): ConfigContent\n\t{\n\t\treturn {\n\t\t\thtml: this.getLayout(),\n\t\t\tbackgroundColor: '#14bfd5',\n\t\t};\n\t}\n\n\tgetLayout(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('layout', () => {\n\t\t\tconst showInvitationSlider = (e) => {\n\t\t\t\te.stopPropagation();\n\t\t\t\tthis.showInvitationPlace(\n\t\t\t\t\tLoc.getMessage('INTRANET_INVITATION_WIDGET_DISABLED_TEXT'),\n\t\t\t\t\te.target,\n\t\t\t\t\t'default-invitation'\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tconst showInvitationHelper = () => {\n\t\t\t\tthis.showInfoHelper('limit_why_team_invites');\n\t\t\t}\n\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"intranet-invitation-widget-invite\">\n\t\t\t\t\t<div class=\"intranet-invitation-widget-invite-main\">\n\t\t\t\t\t\t<div class=\"intranet-invitation-widget-inner\">\n\t\t\t\t\t\t\t<div class=\"intranet-invitation-widget-content\">\n\t\t\t\t\t\t\t\t<div class=\"intranet-invitation-widget-item-icon intranet-invitation-widget-item-icon--invite\"></div>\n\t\t\t\t\t\t\t\t<div class=\"intranet-invitation-widget-item-content\">\n\t\t\t\t\t\t\t\t\t<div class=\"intranet-invitation-widget-item-name\">\n\t\t\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t\t\t${Loc.getMessage('INTRANET_INVITATION_WIDGET_INVITE_EMPLOYEE')}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"intranet-invitation-widget-item-link\">\n\t\t\t\t\t\t\t\t\t\t<span onclick=\"${showInvitationHelper}\" class=\"intranet-invitation-widget-item-link-text\">\n\t\t\t\t\t\t\t\t\t\t\t${Loc.getMessage('INTRANET_INVITATION_WIDGET_DESC')}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<a onclick=\"${showInvitationSlider}\" class=\"intranet-invitation-widget-item-btn intranet-invitation-widget-item-btn--invite\"> \n\t\t\t\t\t\t\t\t${Loc.getMessage('INTRANET_INVITATION_WIDGET_INVITE')}\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n}\n","import { Content } from './content';\nimport { Tag, Loc } from 'main.core';\nimport { Analytics } from '../analytics';\nimport type { StructureContentOptions } from '../types/options';\nimport type { ConfigContent } from '../types/content';\n\nexport class StructureContent extends Content\n{\n\tconstructor(options: StructureContentOptions) {\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Intranet.InvitationWidget.StructureContent');\n\t}\n\n\tgetConfig(): ConfigContent\n\t{\n\t\treturn {\n\t\t\thtml: this.getLayout(),\n\t\t\tflex: 3,\n\t\t};\n\t}\n\n\tgetLayout(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('layout', () => {\n\t\t\tconst onclick = () => {\n\t\t\t\tAnalytics.send(Analytics.EVENT_OPEN_STRUCTURE);\n\t\t\t};\n\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"intranet-invitation-widget-item intranet-invitation-widget-item--company intranet-invitation-widget-item--active\">\n\t\t\t\t\t<div class=\"intranet-invitation-widget-item-logo\"></div>\n\t\t\t\t\t<div class=\"intranet-invitation-widget-item-content\">\n\t\t\t\t\t\t<div class=\"intranet-invitation-widget-item-name\">\n\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t${Loc.getMessage('INTRANET_INVITATION_WIDGET_STRUCTURE')}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<a onclick=\"${onclick}\" href=\"${this.getOptions().link}\" class=\"intranet-invitation-widget-item-btn\"> \n\t\t\t\t\t\t\t${Loc.getMessage('INTRANET_INVITATION_WIDGET_EDIT')}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n}\n","import { Counter } from 'ui.cnt';\nimport { Content } from \"./content\";\nimport { Analytics } from '../analytics';\nimport { Tag, Loc, ajax, Text, Type } from 'main.core';\nimport type { EmployeesContentOptions } from \"../types/options\";\nimport type { ConfigContent } from \"../types/content\";\nimport { Menu } from \"main.popup\";\nimport { EventEmitter, BaseEvent } from 'main.core.events';\n\nexport class EmployeesContent extends Content\n{\n\t#rightType: string;\n\n\tconstructor(options: EmployeesContentOptions) {\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Intranet.InvitationWidget.EmployeesContent');\n\t}\n\n\tgetConfig(): ConfigContent\n\t{\n\t\treturn {\n\t\t\thtml: this.getOptions().awaitData.then((response) => {\n\t\t\t\tthis.setOptions({\n\t\t\t\t\t...response.data.users,\n\t\t\t\t\t...this.getOptions(),\n\t\t\t\t});\n\t\t\t\tthis.#showCounter();\n\n\t\t\t\treturn this.getLayout();\n\t\t\t}),\n\t\t\tflex: 5,\n\t\t\tsizeLoader: 55,\n\t\t};\n\t}\n\n\tgetLayout(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('layout', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"intranet-invitation-widget-item intranet-invitation-widget-item--emp ${this.getOptions().isLimit ? 'intranet-invitation-widget-item--emp-alert' : null}\">\n\t\t\t\t\t<div class=\"intranet-invitation-widget-inner\">\n\t\t\t\t\t\t<div class=\"intranet-invitation-widget-content\">\n\t\t\t\t\t\t\t<div class=\"intranet-invitation-widget-item-content\">\n\t\t\t\t\t\t\t\t<div onclick=\"${this.showUserList()}\" class=\"intranet-invitation-widget-item-progress ${this.getOptions().isLimit ? 'intranet-invitation-widget-item-progress--crit' : 'intranet-invitation-widget-item-progress--full'}\"/>\n\t\t\t\t\t\t\t\t<div class=\"intranet-invitation-widget-employees\">\n\t\t\t\t\t\t\t\t\t<div onclick=\"${this.showUserList()}\" class=\"intranet-invitation-widget-item-name\">\n\t\t\t\t\t\t\t\t\t\t<span style=\"margin-right: 2px;\">\n\t\t\t\t\t\t\t\t\t\t\t${Loc.getMessage('INTRANET_INVITATION_WIDGET_EMPLOYEES')}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div onclick=\"${this.showUserList()}\" class=\"intranet-invitation-widget-item-num\">\n\t\t\t\t\t\t\t\t\t\t${this.getOptions().currentUserCountMessage}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t${this.getDetail()}\n\t\t\t\t\t\t\t${this.getOptions().isAdmin ? this.getSelectorRights() : null}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\t#showCounter(): void\n\t{\n\t\tif (this.getOptions().invitationCounter > 0)\n\t\t{\n\t\t\tthis.#getCounter().renderTo(this.#getCounterWrapper());\n\t\t}\n\n\t\tBX.addCustomEvent('onPullEvent-main', this.#onReceiveCounterValue.bind(this));\n\t}\n\n\t#onReceiveCounterValue(command, params): void\n\t{\n\t\tif (command === 'user_counter' && params[BX.message('SITE_ID')])\n\t\t{\n\t\t\tconst counters = BX.clone(params[BX.message('SITE_ID')]);\n\t\t\tconst value = counters[this.getOptions().counterId];\n\n\t\t\tif (!Type.isNumber(value))\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.#getCounter().update(value);\n\t\t\tthis.getOptions().invitationCounter = value;\n\n\t\t\tif (value > 0)\n\t\t\t{\n\t\t\t\tthis.#getCounter().renderTo(this.#getCounterWrapper());\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.#getCounter().destroy();\n\t\t\t\tthis.cache.delete('counter');\n\t\t\t}\n\t\t}\n\t}\n\n\t#getCounter(): Counter\n\t{\n\t\treturn this.cache.remember('counter', () => {\n\t\t\treturn new Counter({\n\t\t\t\tvalue: Number(this.getOptions().invitationCounter),\n\t\t\t\tcolor: Counter.Color.DANGER,\n\t\t\t});\n\t\t});\n\t}\n\n\t#getCounterWrapper(): HTMLElement\n\t{\n\t\treturn this.cache.remember('counter-wrapper', () => {\n\t\t\treturn this.getLayout().querySelector('.intranet-invitation-widget-item-name');\n\t\t});\n\t}\n\n\tgetDetail(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('detail', () => {\n\t\t\tlet content = '';\n\n\t\t\tif (Number(this.getOptions().maxUserCount) === 0)\n\t\t\t{\n\t\t\t\tcontent = Loc.getMessage('INTRANET_INVITATION_WIDGET_EMPLOYEES_NO_LIMIT');\n\t\t\t}\n\t\t\telse if (this.getOptions().isLimit)\n\t\t\t{\n\t\t\t\tcontent = Loc.getMessage('INTRANET_INVITATION_WIDGET_EMPLOYEES_LIMIT');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tcontent = this.getOptions().leftCountMessage;\n\t\t\t}\n\n\t\t\treturn Tag.render`\n\t\t\t\t<div onclick=\"${this.showUserList()}\" class=\"intranet-invitation-widget-item-detail\">\n\t\t\t\t\t<span class=\"intranet-invitation-widget-item-link-text\">\n\t\t\t\t\t\t${content}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tshowUserList(): Function\n\t{\n\t\treturn this.cache.remember('showUserList', () => {\n\t\t\treturn () => {\n\t\t\t\tAnalytics.send(Analytics.EVENT_OPEN_USER_LIST);\n\t\t\t\tdocument.location.href = '/company/';\n\t\t\t};\n\t\t});\n\t}\n\n\tgetSelectorRights(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('selector-rights', () => {\n\t\t\tconst showMenu = (e) => {\n\t\t\t\te.stopPropagation();\n\t\t\t\tthis.getRightsMenu(e.target).toggle();\n\t\t\t}\n\n\t\t\tconst button = Tag.render`\n\t\t\t\t<div onclick=\"${showMenu}\" class=\"intranet-invitation-widget-item-menu\"></div>\n\t\t\t`;\n\n\t\t\tthis.subscribe('right-selected', (event) => {\n\t\t\t\tconst menu = this.getRightsMenu(button);\n\t\t\t\tmenu.close();\n\t\t\t\tmenu.destroy();\n\t\t\t\tif (event.data.type)\n\t\t\t\t{\n\t\t\t\t\tthis.cache.delete('menu-rights');\n\t\t\t\t\tthis.#rightType = event.data.type;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn button;\n\t\t});\n\t}\n\n\tgetRightsMenu(element: HTMLElement): Menu\n\t{\n\t\treturn this.cache.remember('menu-rights', () => {\n\t\t\treturn new Menu(`menu-rights-${Text.getRandom()}`, element, this.getMenuRightsItems(), {\n\t\t\t\tautoHide: true,\n\t\t\t\toffsetLeft: 10,\n\t\t\t\toffsetTop: 0,\n\t\t\t\tangle: true,\n\t\t\t\tclassName: 'license-right-popup-men',\n\t\t\t\tevents: {\n\t\t\t\t\tonPopupShow: (popup) => {\n\t\t\t\t\t\tEventEmitter.emit(\n\t\t\t\t\t\t\tEventEmitter.GLOBAL_TARGET,\n\t\t\t\t\t\t\tthis.getEventNamespace() + ':showRightMenu',\n\t\t\t\t\t\t\tnew BaseEvent({\n\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\tpopup: popup,\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t);\n\t\t\t\t\t},\n\t\t\t\t\tonPopupClose: (popup) => {\n\t\t\t\t\t\tEventEmitter.emit(\n\t\t\t\t\t\t\tEventEmitter.GLOBAL_TARGET,\n\t\t\t\t\t\t\tthis.getEventNamespace() + ':closeRightMenu',\n\t\t\t\t\t\t\tnew BaseEvent({\n\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\tpopup: popup,\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t);\n\t\t\t\t\t},\n\t\t\t\t\tonPopupFirstShow: (popup) => {\n\t\t\t\t\t\tEventEmitter.subscribe(EventEmitter.GLOBAL_TARGET, 'SidePanel.Slider:onOpenStart', () => {\n\t\t\t\t\t\t\tpopup.close();\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\tgetMenuRightsItems(): Array\n\t{\n\t\tif (!this.#rightType)\n\t\t{\n\t\t\tthis.#rightType = this.getOptions().rightType;\n\t\t}\n\n\t\treturn [\n\t\t\t{\n\t\t\t\ttext: Loc.getMessage('INTRANET_INVITATION_WIDGET_SETTING_ALL_INVITE'),\n\t\t\t\tclassName: this.#rightType === 'all' ? 'menu-popup-item-accept' : '',\n\t\t\t\tonclick: () => {\n\t\t\t\t\tthis.saveInvitationRightSetting('all').then(() => {\n\t\t\t\t\t\tthis.emit('right-selected', new BaseEvent({\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\ttype: 'all'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}));\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\ttext: Loc.getMessage('INTRANET_INVITATION_WIDGET_SETTING_ADMIN_INVITE'),\n\t\t\t\tclassName: this.#rightType === 'admin' ? 'menu-popup-item-accept' : '',\n\t\t\t\tonclick: () => {\n\t\t\t\t\tthis.saveInvitationRightSetting('admin').then(() => {\n\t\t\t\t\t\tthis.emit('right-selected', new BaseEvent({\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\ttype: 'admin'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}));\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t];\n\t}\n\n\tsaveInvitationRightSetting(type): Promise\n\t{\n\t\treturn ajax.runAction(\"intranet.invitationwidget.saveInvitationRight\", {\n\t\t\tdata: {\n\t\t\t\ttype: type\n\t\t\t}\n\t\t});\n\t}\n\n}\n","import { Content } from \"./content\";\nimport { Tag, Loc } from \"main.core\";\nimport type { ConfigContent } from \"../types/content\";\nimport type { ExtranetContentOptions } from \"../types/options\";\n\nexport class ExtranetContent extends Content\n{\n\tarticleCode: string = \"6770709\";\n\n\tconstructor(options: ExtranetContentOptions) {\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Intranet.InvitationWidget.ExtranetContent');\n\t}\n\n\tgetConfig(): ConfigContent\n\t{\n\t\treturn {\n\t\t\thtml: this.getOptions().awaitData.then((response) => {\n\t\t\t\tthis.setOptions({\n\t\t\t\t\t...response.data.users,\n\t\t\t\t\t...this.getOptions(),\n\t\t\t\t});\n\t\t\t\treturn this.getLayout();\n\t\t\t}),\n\t\t\tminHeight: '55px',\n\t\t\tsizeLoader: 37,\n\t\t\tmarginBottom: 24,\n\t\t\tsecondary: true,\n\t\t};\n\t}\n\n\tgetLayout(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('layout', () => {\n\t\t\tconst showInvitationSlider = (e) => {\n\t\t\t\te.stopPropagation();\n\t\t\t\tthis.showInvitationPlace(\n\t\t\t\t\tLoc.getMessage('INTRANET_INVITATION_WIDGET_DISABLED_TEXT'),\n\t\t\t\t\te.target,\n\t\t\t\t\t'extranet'\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tconst showExtranetHelper = () => {\n\t\t\t\tBX.Helper.show(`redirect=detail&code=${this.articleCode}`);\n\t\t\t\tthis.sendAnalytics(this.articleCode);\n\t\t\t}\n\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"${this.getWrapperClass()}\">\n\t\t\t\t\t<div class=\"intranet-invitation-widget-content\">\n\t\t\t\t\t\t<div class=\"intranet-invitation-widget-item-icon intranet-invitation-widget-item-icon--ext\"></div>\n\t\t\t\t\t\t<div class=\"intranet-invitation-widget-item-content\">\n\t\t\t\t\t\t\t<div class=\"intranet-invitation-widget-item-name\">\n\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t${Loc.getMessage('INTRANET_INVITATION_WIDGET_EXTRANET')}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"intranet-invitation-widget-item-link\">\n\t\t\t\t\t\t\t\t<span onclick=\"${showExtranetHelper}\" class=\"intranet-invitation-widget-item-link-text\">\n\t\t\t\t\t\t\t\t\t${Loc.getMessage('INTRANET_INVITATION_WIDGET_EXTRANET_DESC')}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t${this.getCountUserMessage()}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<button onclick=\"${showInvitationSlider}\" class=\"intranet-invitation-widget-item-btn\">\n\t\t\t\t\t\t${Loc.getMessage('INTRANET_INVITATION_WIDGET_INVITE')}\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetWrapperClass(): string\n\t{\n\t\treturn this.cache.remember('wrapper-class', () => {\n\t\t\tconst baseClass = 'intranet-invitation-widget-item intranet-invitation-widget-item--wide';\n\n\t\t\tif (this.getOptions().currentExtranetUserCount > 0)\n\t\t\t{\n\t\t\t\treturn baseClass + ' intranet-invitation-widget-item--active';\n\t\t\t}\n\n\t\t\treturn baseClass;\n\t\t});\n\t}\n\n\tgetCountUserMessage(): ?HTMLDivElement\n\t{\n\t\treturn this.cache.remember('count-user-message', () => {\n\t\t\tif (this.getOptions().currentExtranetUserCount > 0)\n\t\t\t{\n\t\t\t\treturn Tag.render`\n\t\t\t\t\t<div class=\"intranet-invitation-widget-item-ext-users\">\n\t\t\t\t\t\t${this.getOptions().currentExtranetUserCountMessage}\n\t\t\t\t\t</div>\n\t\t\t\t`;\n\t\t\t}\n\n\t\t\treturn null;\n\t\t});\n\t}\n}\n","import { Content } from \"./content\";\nimport { Tag, ajax, Runtime, Dom } from \"main.core\";\nimport { Loader } from \"main.loader\";\n\nexport class UserOnlineContent extends Content\n{\n\tgetLoader(): Loader\n\t{\n\t\treturn this.cache.remember('loader', () => {\n\t\t\treturn new Loader({\n\t\t\t\tsize: 45,\n\t\t\t});\n\t\t})\n\t}\n\n\tgetComponentContent(): HTMLElement {\n\t\treturn this.cache.remember('component-content', () => {\n\t\t\tconst contentContainer = Tag.render`\n\t\t\t\t<div data-role=\"invitation-widget-ustat-online\" class=\"invitation-widget-ustat-online\"/>\n\t\t\t`;\n\t\t\tDom.style(contentContainer, 'min-height', '70px');\n\n\t\t\tthis.getLoader().show(contentContainer);\n\n\t\t\tajax.runAction(\"intranet.invitationwidget.getUserOnlineComponent\").then((response) => {\n\t\t\t\tthis.getLoader().hide();\n\t\t\t\tconst assets = response.data.assets;\n\t\t\t\tBX.load([...assets['css'], ...assets['js']], () => {\n\t\t\t\t\tRuntime.html(null, [...assets['string']].join('\\n'), {useAdjacentHTML: true})\n\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\tRuntime.html(contentContainer, response.data.html).then(() => {\n\t\t\t\t\t\t\t\tthis.getLoader().destroy();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t})\n\t\t\t\t\t;\n\t\t\t\t});\n\t\t\t});\n\n\t\t\treturn contentContainer;\n\t\t});\n\t}\n\n\tgetLayout(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('layout', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"intranet-invitation-widget-item intranet-invitation-widget-item--wide intranet-invitation-widget-item--no-padding\">\n\t\t\t\t\t${this.getComponentContent()}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n}\n","import { EventEmitter } from 'main.core.events';\nimport { Cache, ajax, Event } from 'main.core';\nimport { PopupComponentsMaker } from 'ui.popupcomponentsmaker';\nimport type { ConfigContent } from './types/content';\nimport type { InvitationPopupOptions } from \"./types/options\";\nimport { InvitationContent } from \"./contents/invitation\";\nimport { StructureContent } from \"./contents/structure\";\nimport { EmployeesContent } from \"./contents/employees\";\nimport { ExtranetContent } from \"./contents/extranet\";\nimport { UserOnlineContent } from \"./contents/user-online\";\n\nexport class InvitationPopup extends EventEmitter\n{\n\t#cache = new Cache.MemoryCache();\n\n\tconstructor(options: InvitationPopupOptions)\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Intranet.InvitationWidget.Popup');\n\t\tthis.setOptions(options)\n\t\tthis.#setEventHandler();\n\t}\n\n\tsetOptions(options: InvitationPopupOptions): void\n\t{\n\t\tthis.#cache.set('options', options);\n\t}\n\n\tgetOptions(): InvitationPopupOptions\n\t{\n\t\treturn this.#cache.get('options', {});\n\t}\n\n\tshow(): void\n\t{\n\t\tthis.getPopup().show();\n\t}\n\n\tclose(): void\n\t{\n\t\tthis.getPopup().close();\n\t}\n\n\t#getAwaitData(): Promise\n\t{\n\t\treturn this.#cache.remember('await-data', () => {\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tajax.runAction(\"intranet.invitationwidget.getData\", {\n\t\t\t\t\tdata: {},\n\t\t\t\t\tanalyticsLabel: {\n\t\t\t\t\t\theaderPopup: \"Y\"\n\t\t\t\t\t}\n\t\t\t\t}).then(resolve).catch(reject);\n\t\t\t});\n\t\t});\n\t}\n\n\tgetPopup(): PopupComponentsMaker\n\t{\n\t\treturn this.#cache.remember('popup', () => {\n\t\t\treturn new PopupComponentsMaker({\n\t\t\t\tid: 'invitation-popup',\n\t\t\t\ttarget: this.getOptions().target,\n\t\t\t\twidth: 350,\n\t\t\t\tcontent: this.#getContent(),\n\t\t\t});\n\t\t});\n\t}\n\n\t//This is the method for popup content configuration\n\t#getContent(): Array<ConfigContent>\n\t{\n\t\treturn this.#cache.remember('content', () => {\n\t\t\treturn [\n\t\t\t\tthis.#getInvitationContent().getConfig(),\n\t\t\t\t{\n\t\t\t\t\thtml: [\n\t\t\t\t\t\tthis.#getStructureContent().getConfig(),\n\t\t\t\t\t\tthis.#getEmployeesContent().getConfig(),\n\t\t\t\t\t],\n\t\t\t\t\tmarginBottom: 24,\n\t\t\t\t},\n\t\t\t\tthis.getOptions().isExtranetAvailable ? this.#getExtranetContent().getConfig() : null,\n\t\t\t\tthis.#getUserOnlineContent().getConfig(),\n\t\t\t];\n\t\t});\n\t}\n\n\t//region Get Content\n\t#getInvitationContent(): InvitationContent\n\t{\n\t\treturn this.#cache.remember('invitation-content', () => {\n\t\t\treturn new InvitationContent({\n\t\t\t\tisAdmin: this.getOptions().isAdmin,\n\t\t\t\tinvitationLink: this.getOptions().params.invitationLink,\n\t\t\t\tisInvitationAvailable: this.getOptions().isInvitationAvailable,\n\t\t\t});\n\t\t});\n\t}\n\n\t#getStructureContent(): StructureContent\n\t{\n\t\treturn this.#cache.remember('structure-content', () => {\n\t\t\treturn new StructureContent({\n\t\t\t\tlink: this.getOptions().params.structureLink,\n\t\t\t});\n\t\t});\n\t}\n\n\t#getEmployeesContent(): EmployeesContent\n\t{\n\t\treturn this.#cache.remember('employees-content', () => {\n\t\t\treturn new EmployeesContent({\n\t\t\t\tisAdmin: this.getOptions().isAdmin,\n\t\t\t\tawaitData: this.#getAwaitData(),\n\t\t\t\tinvitationCounter: this.getOptions().params.invitationCounter,\n\t\t\t\tcounterId: this.getOptions().params.counterId,\n\t\t\t});\n\t\t});\n\t}\n\n\t#getExtranetContent(): ExtranetContent\n\t{\n\t\treturn this.#cache.remember('extranet-content', () => {\n\t\t\treturn new ExtranetContent({\n\t\t\t\tisAdmin: this.getOptions().isAdmin,\n\t\t\t\tawaitData: this.#getAwaitData(),\n\t\t\t\tinvitationLink: this.getOptions().params.invitationLink,\n\t\t\t\tisInvitationAvailable: this.getOptions().isInvitationAvailable,\n\t\t\t});\n\t\t});\n\t}\n\n\t#getUserOnlineContent(): UserOnlineContent\n\t{\n\t\treturn this.#cache.remember('user-online-content', () => {\n\t\t\treturn new UserOnlineContent;\n\t\t});\n\t}\n\t//endregion\n\n\t#getPopupContainer(): HTMLElement\n\t{\n\t\treturn this.#cache.remember('popup-container', () => {\n\t\t\treturn this.getPopup().getPopup().getPopupContainer();\n\t\t});\n\t}\n\n\t#setEventHandler()\n\t{\n\t\tconst autoHideHandler = (event) => {\n\t\t\tif (event.data.popup)\n\t\t\t{\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tEvent.bind(this.#getPopupContainer(), 'click', () => {\n\t\t\t\t\t\tevent.data.popup.close();\n\t\t\t\t\t});\n\t\t\t\t}, 100);\n\t\t\t}\n\t\t}\n\n\t\tconst close = () => {\n\t\t\tthis.close();\n\t\t}\n\n\t\tEventEmitter.subscribe(EventEmitter.GLOBAL_TARGET, 'BX.Intranet.InvitationWidget.EmployeesContent:showRightMenu', autoHideHandler);\n\t\tEventEmitter.subscribe(EventEmitter.GLOBAL_TARGET, 'BX.Intranet.InvitationWidget.HintPopup:show', autoHideHandler);\n\t\tEventEmitter.subscribe(EventEmitter.GLOBAL_TARGET, 'BX.Intranet.UstatOnline:showPopup', autoHideHandler);\n\t\tEventEmitter.subscribe(EventEmitter.GLOBAL_TARGET, 'SidePanel.Slider:onOpenStart', close);\n\t}\n}","import { EventEmitter } from 'main.core.events';\nimport { Cache, Event, Type } from 'main.core';\nimport { Counter } from 'ui.cnt';\nimport { Analytics } from './analytics';\nimport type { InvitationWidgetOptions } from './types/options';\nimport { InvitationPopup } from \"./popup\";\n\nexport class InvitationWidget extends EventEmitter\n{\n\t#cache = new Cache.MemoryCache();\n\n\tconstructor(options: InvitationWidgetOptions) {\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Intranet.InvitationWidget');\n\t\tthis.setOptions(options);\n\t\tAnalytics.isAdmin = this.getOptions().isCurrentUserAdmin;\n\t\tEvent.bind(this.getOptions().button, 'click', () => {\n\t\t\tAnalytics.send(Analytics.EVENT_SHOW);\n\t\t\tthis.#getPopup().show();\n\t\t});\n\t\tEventEmitter.subscribe(EventEmitter.GLOBAL_TARGET, 'BX.Bitrix24.NotifyPanel:showInvitationWidget', () => {\n\t\t\tthis.#getPopup().show();\n\t\t});\n\t\tthis.#showCounter();\n\t}\n\n\tsetOptions(options: InvitationWidgetOptions): void\n\t{\n\t\tthis.#cache.set('options', options);\n\t}\n\n\tgetOptions(): InvitationWidgetOptions\n\t{\n\t\treturn this.#cache.get('options', {});\n\t}\n\n\t#showCounter(): void\n\t{\n\t\tif (this.getOptions().invitationCounter > 0)\n\t\t{\n\t\t\tthis.#getCounter().renderTo(this.#getCounterWrapper());\n\t\t}\n\n\t\tBX.addCustomEvent('onPullEvent-main', this.#onReceiveCounterValue.bind(this));\n\t}\n\n\t#onReceiveCounterValue(command, params): void\n\t{\n\t\tif (command === 'user_counter' && params[BX.message('SITE_ID')])\n\t\t{\n\t\t\tconst counters = BX.clone(params[BX.message('SITE_ID')]);\n\t\t\tconst value = counters[this.getOptions().counterId];\n\n\t\t\tif (!Type.isNumber(value))\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.#getCounter().update(value);\n\t\t\tthis.getOptions().invitationCounter = value;\n\n\t\t\tif (value > 0)\n\t\t\t{\n\t\t\t\tthis.#getCounter().renderTo(this.#getCounterWrapper());\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.#getCounter().destroy();\n\t\t\t\tthis.#cache.delete('counter');\n\t\t\t}\n\t\t}\n\t}\n\n\t#getCounterWrapper(): HTMLElement\n\t{\n\t\treturn this.#cache.remember('counter-wrapper', () => {\n\t\t\treturn this.getOptions().button.querySelector('.invitation-widget-counter');\n\t\t});\n\t}\n\n\t#getCounter(): Counter\n\t{\n\t\treturn this.#cache.remember('counter', () => {\n\t\t\treturn new Counter({\n\t\t\t\tvalue: Number(this.getOptions().invitationCounter),\n\t\t\t\tcolor: Counter.Color.DANGER,\n\t\t\t});\n\t\t});\n\t}\n\n\t#getPopup(): InvitationPopup\n\t{\n\t\treturn this.#cache.remember('popup', () => {\n\t\t\treturn new InvitationPopup({\n\t\t\t\tisAdmin: this.getOptions().isCurrentUserAdmin,\n\t\t\t\ttarget: this.getOptions().button,\n\t\t\t\tisExtranetAvailable: this.getOptions().isExtranetAvailable,\n\t\t\t\tisInvitationAvailable: this.getOptions().isInvitationAvailable,\n\t\t\t\tparams: {\n\t\t\t\t\tstructureLink: this.getOptions().structureLink,\n\t\t\t\t\tinvitationLink: this.getOptions().invitationLink,\n\t\t\t\t\tinvitationCounter: this.getOptions().invitationCounter,\n\t\t\t\t\tcounterId: this.getOptions().counterId,\n\t\t\t\t},\n\t\t\t});\n\t\t});\n\t}\n}"],"names":["Analytics","section","sendData","tool","TOOLS_LEGACY","category","CATEGORY_INVITATION_LEGACY","event","EVENT_NAME_LEGACY","c_section","p1","isAdmin","TOOLS","CATEGORY_INVITATION","Content","options","Cache","MemoryCache","setOptions","analytics","cache","set","get","Error","articleCode","BX","UI","InfoHelper","show","sendAnalytics","code","ajax","runAction","data","analyticsLabel","helperCode","headerPopup","text","element","type","remember","Popup","Text","getRandom","content","className","zIndex","angle","offsetTop","offsetLeft","closeIcon","autoHide","darkMode","overlay","maxWidth","events","onShow","EventEmitter","emit","GLOBAL_TARGET","BaseEvent","popup","target","timeout","setTimeout","close","subscribeOnce","clearTimeout","onClose","getHintPopup","toggle","getOptions","showInvitationSlider","isInvitationAvailable","showHintPopup","link","invitationLink","send","EVENT_OPEN_SLIDER_EXTRANET_INVITATION","EVENT_OPEN_SLIDER_INVITATION","sendLegacy","SECTION_POPUP","SidePanel","Instance","open","cacheable","allowChangeHistory","width","html","getLayout","InvitationContent","setEventNamespace","backgroundColor","e","stopPropagation","showInvitationPlace","Loc","getMessage","showInvitationHelper","showInfoHelper","Tag","render","StructureContent","flex","onclick","EVENT_OPEN_STRUCTURE","EmployeesContent","awaitData","then","response","users","sizeLoader","isLimit","showUserList","currentUserCountMessage","getDetail","getSelectorRights","Number","maxUserCount","leftCountMessage","EVENT_OPEN_USER_LIST","document","location","href","showMenu","getRightsMenu","button","subscribe","menu","destroy","Menu","getMenuRightsItems","onPopupShow","getEventNamespace","onPopupClose","onPopupFirstShow","rightType","saveInvitationRightSetting","invitationCounter","renderTo","addCustomEvent","bind","command","params","message","counters","clone","value","counterId","Type","isNumber","update","Counter","color","Color","DANGER","querySelector","ExtranetContent","minHeight","marginBottom","secondary","showExtranetHelper","Helper","getWrapperClass","getCountUserMessage","baseClass","currentExtranetUserCount","currentExtranetUserCountMessage","UserOnlineContent","Loader","size","contentContainer","Dom","style","getLoader","hide","assets","load","Runtime","join","useAdjacentHTML","getComponentContent","InvitationPopup","_classPrivateMethodInitSpec","_classPrivateFieldInitSpec","_classPrivateMethodGet","getPopup","PopupComponentsMaker","id","Promise","resolve","reject","getConfig","isExtranetAvailable","structureLink","getPopupContainer","autoHideHandler","Event","InvitationWidget","isCurrentUserAdmin","EVENT_SHOW"],"mappings":"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"}