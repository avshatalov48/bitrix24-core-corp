BX.namespace("BX.Lists");BX.Lists.CatalogProcessesClass=function(){var s=function(s){this.ajaxUrl="/bitrix/components/bitrix/lists.catalog.processes/ajax.php";this.randomString=s.randomString};s.prototype.installProcesses=function(s){BX.addClass(s,"ui-btn-clock");s.setAttribute("onclick","");var t=BX.findChildrenByClassName(BX("bx-lists-lcp-total-div"),"bx-lists-lcp-table-tr-mousedown");var e=[];for(var a in t)e.push(t[a].getAttribute("data-file"));var i=null;if(BX("bx-lists-lcp-site-id"))i=BX("bx-lists-lcp-site-id").value;BX.Lists.ajax({method:"POST",dataType:"json",url:BX.Lists.addToLinkParam(this.ajaxUrl,"action","installProcesses"),data:{siteId:i,processes:e},onsuccess:BX.delegate(function(e){if(e.status=="success"){for(var a in t){t[a].setAttribute("id","not allocated");t[a].setAttribute("data-pick-out","not allocated");t[a].setAttribute("class","bx-lists-lcp-table-tr-mouseout");var i=BX.findChildrenByClassName(t[a],"bx-lists-lcp-table-td-name");for(var l=0;l<i.length;l++){i[l].innerHTML=i[l].innerHTML+BX.message("LISTS_LCP_TEMPLATE_PROCESS_INSTALLED")}}BX.Lists.showModalWithStatusAction({status:"success",message:e.message})}else{e.errors=e.errors||[{}];BX.Lists.showModalWithStatusAction({status:"error",message:e.errors.pop().message})}BX.removeClass(s,"ui-btn-clock");s.setAttribute("onclick",'BX.Lists["CatalogProcessesClass_'+this.randomString+'"].installProcesses(this);')},this)})};s.prototype.mousedown=function(s){var t=s.getAttribute("data-pick-out");if(t=="allocate"){if(s.className=="bx-lists-lcp-table-tr-mousedown"){s.className="bx-lists-lcp-table-tr-mouseout"}else{s.className="bx-lists-lcp-table-tr-mousedown"}}};s.prototype.mouseover=function(s){var t=s.getAttribute("data-pick-out");if(t=="allocate"){if(s.className!="bx-lists-lcp-table-tr-mousedown"){s.className="bx-lists-lcp-table-tr-mouseover"}}};s.prototype.mouseout=function(s){var t=s.getAttribute("data-pick-out");if(t=="allocate"){if(s.className!="bx-lists-lcp-table-tr-mousedown"){s.className="bx-lists-lcp-table-tr-mouseout"}}};return s}();