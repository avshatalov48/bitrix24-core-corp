this.BX=this.BX||{};this.BX.Socialnetwork=this.BX.Socialnetwork||{};(function(e,t,a){"use strict";function s(e,t){r(e,t);t.add(e)}function l(e,t,a){r(e,t);t.set(e,a)}function r(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function i(e,t,a){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return a}var n=new WeakMap;var c=new WeakSet;var o=new WeakSet;var b=function(e){babelHelpers.inherits(t,e);function t(e){var a;babelHelpers.classCallCheck(this,t);a=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));s(babelHelpers.assertThisInitialized(a),o);s(babelHelpers.assertThisInitialized(a),c);l(babelHelpers.assertThisInitialized(a),n,{writable:true,value:void 0});a.setEventNamespace("BX.Socialnetwork.Spaces.Disk");babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(a),n,e.window);babelHelpers.classPrivateFieldGet(babelHelpers.assertThisInitialized(a),n).BX.Event.EventEmitter.subscribe("Disk.TileItem.Item:onItemDblClick",i(babelHelpers.assertThisInitialized(a),c,d).bind(babelHelpers.assertThisInitialized(a)));babelHelpers.classPrivateFieldGet(babelHelpers.assertThisInitialized(a),n).BX.Event.EventEmitter.subscribe("Disk.TileItem.Item:onItemEnter",i(babelHelpers.assertThisInitialized(a),c,d).bind(babelHelpers.assertThisInitialized(a)));babelHelpers.classPrivateFieldGet(babelHelpers.assertThisInitialized(a),n).BX.Event.EventEmitter.subscribe("Disk.Breadcrumbs:onClickBreadcrumb",i(babelHelpers.assertThisInitialized(a),o,p).bind(babelHelpers.assertThisInitialized(a)));return a}return t}(t.EventEmitter);function d(e){var t=e.getCompatData(),a=babelHelpers.slicedToArray(t,1),s=a[0];if(s.isFolder){this.emit("changePage",s.item.titleLink.href)}}function p(e){var t=e.getCompatData(),a=babelHelpers.slicedToArray(t,1),s=a[0];this.emit("changePage",s.href)}var h,u;function v(e,t){H(e,t);t.add(e)}function H(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function f(e,t,a){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return a}var w=new WeakSet;var m=function(){function e(){babelHelpers.classCallCheck(this,e);v(this,w)}babelHelpers.createClass(e,[{key:"render",value:function e(){return a.Tag.render(h||(h=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="sn-spaces__content-loader-default-container">\n\t\t\t\t',"\n\t\t\t</div>\n\t\t"])),f(this,w,g).call(this))}}]);return e}();function g(){return a.Tag.render(u||(u=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<svg class="sn-spaces__content-loader-circular" viewBox="25 25 50 50">\n\t\t\t\t<circle\n\t\t\t\t\tclass="sn-spaces__content-loader-path"\n\t\t\t\t\tcx="50"\n\t\t\t\t\tcy="50"\n\t\t\t\t\tr="20"\n\t\t\t\t\tfill="none"\n\t\t\t\t\tstroke-miterlimit="10"\n\t\t\t\t/>\n\t\t\t</svg>\n\t\t'])))}var k;var P=function(e){babelHelpers.inherits(t,e);function t(){babelHelpers.classCallCheck(this,t);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}babelHelpers.createClass(t,[{key:"render",value:function e(){return a.Tag.render(k||(k=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div\n\t\t\t\tclass="sn-spaces__content-loader-container sn-spaces__content-loader-calendar-base"\n\t\t\t></div>\n\t\t'])))}}]);return t}(m);var y;var T=function(e){babelHelpers.inherits(t,e);function t(){babelHelpers.classCallCheck(this,t);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}babelHelpers.createClass(t,[{key:"render",value:function e(){return a.Tag.render(y||(y=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div\n\t\t\t\tclass="sn-spaces__content-loader-container sn-spaces__content-loader-calendar-schedule"\n\t\t\t></div>\n\t\t'])))}}]);return t}(m);var F;var C=function(e){babelHelpers.inherits(t,e);function t(){babelHelpers.classCallCheck(this,t);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}babelHelpers.createClass(t,[{key:"render",value:function e(){return a.Tag.render(F||(F=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div\n\t\t\t\tclass="sn-spaces__content-loader-container sn-spaces__content-loader-discussions"\n\t\t\t></div>\n\t\t'])))}}]);return t}(m);var S;var G=function(e){babelHelpers.inherits(t,e);function t(){babelHelpers.classCallCheck(this,t);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}babelHelpers.createClass(t,[{key:"render",value:function e(){return a.Tag.render(S||(S=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div\n\t\t\t\tclass="sn-spaces__content-loader-container sn-spaces__content-loader-files-list"\n\t\t\t></div>\n\t\t'])))}}]);return t}(m);var I;var _=function(e){babelHelpers.inherits(t,e);function t(){babelHelpers.classCallCheck(this,t);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}babelHelpers.createClass(t,[{key:"render",value:function e(){return a.Tag.render(I||(I=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div\n\t\t\t\tclass="sn-spaces__content-loader-container sn-spaces__content-loader-files-tile"\n\t\t\t></div>\n\t\t'])))}}]);return t}(m);var W;var z=function(e){babelHelpers.inherits(t,e);function t(){babelHelpers.classCallCheck(this,t);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}babelHelpers.createClass(t,[{key:"render",value:function e(){return a.Tag.render(W||(W=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div\n\t\t\t\tclass="sn-spaces__content-loader-container sn-spaces__content-loader-files-big-tile"\n\t\t\t></div>\n\t\t'])))}}]);return t}(m);var E;var M=function(e){babelHelpers.inherits(t,e);function t(){babelHelpers.classCallCheck(this,t);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}babelHelpers.createClass(t,[{key:"render",value:function e(){return a.Tag.render(E||(E=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div\n\t\t\t\tclass="sn-spaces__content-loader-container sn-spaces__content-loader-tasks-calendar"\n\t\t\t></div>\n\t\t'])))}}]);return t}(m);var D;var L=function(e){babelHelpers.inherits(t,e);function t(){babelHelpers.classCallCheck(this,t);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}babelHelpers.createClass(t,[{key:"render",value:function e(){return a.Tag.render(D||(D=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div\n\t\t\t\tclass="sn-spaces__content-loader-container sn-spaces__content-loader-tasks-gantt"\n\t\t\t></div>\n\t\t'])))}}]);return t}(m);var O;var B=function(e){babelHelpers.inherits(t,e);function t(){babelHelpers.classCallCheck(this,t);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}babelHelpers.createClass(t,[{key:"render",value:function e(){return a.Tag.render(O||(O=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div\n\t\t\t\tclass="sn-spaces__content-loader-container sn-spaces__content-loader-tasks-kanban"\n\t\t\t></div>\n\t\t'])))}}]);return t}(m);var R;var X=function(e){babelHelpers.inherits(t,e);function t(){babelHelpers.classCallCheck(this,t);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}babelHelpers.createClass(t,[{key:"render",value:function e(){return a.Tag.render(R||(R=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div\n\t\t\t\tclass="sn-spaces__content-loader-container sn-spaces__content-loader-tasks-list"\n\t\t\t></div>\n\t\t'])))}}]);return t}(m);var A;function N(e,t,a){x(e,t);t.set(e,a)}function x(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}var j=new WeakMap;var U=function(e){babelHelpers.inherits(t,e);function t(e){var a;babelHelpers.classCallCheck(this,t);a=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e));N(babelHelpers.assertThisInitialized(a),j,{writable:true,value:void 0});babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(a),j,e);return a}babelHelpers.createClass(t,[{key:"render",value:function e(){return a.Tag.render(A||(A=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div\n\t\t\t\tclass="sn-spaces__content-loader-container sn-spaces__content-loader-','"\n\t\t\t></div>\n\t\t'])),babelHelpers.classPrivateFieldGet(this,j))}}]);return t}(m);var V;var Q=function(e){babelHelpers.inherits(t,e);function t(){babelHelpers.classCallCheck(this,t);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}babelHelpers.createClass(t,[{key:"render",value:function e(){return a.Tag.render(V||(V=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div\n\t\t\t\tclass="sn-spaces__content-loader-container sn-spaces__content-loader-tasks-timeline"\n\t\t\t></div>\n\t\t'])))}}]);return t}(m);function q(e,t){J(e,t);t.add(e)}function Y(e,t,a){J(e,t);t.set(e,a)}function J(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function K(e,t,a){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return a}var Z=new WeakMap;var $=new WeakMap;var ee=new WeakMap;var te=new WeakMap;var ae=new WeakSet;var se=function(){function e(t){babelHelpers.classCallCheck(this,e);q(this,ae);Y(this,Z,{writable:true,value:void 0});Y(this,$,{writable:true,value:null});Y(this,ee,{writable:true,value:void 0});Y(this,te,{writable:true,value:void 0});babelHelpers.classPrivateFieldSet(this,Z,t.pageUrl);this.setLoader(t.pageView)}babelHelpers.createClass(e,[{key:"show",value:function e(t){if(babelHelpers.classPrivateFieldGet(this,$)!==null){return}babelHelpers.classPrivateFieldSet(this,ee,t);a.Dom.addClass(t,"--visible");babelHelpers.classPrivateFieldSet(this,$,babelHelpers.classPrivateFieldGet(this,te).render());a.Dom.prepend(babelHelpers.classPrivateFieldGet(this,$),t)}},{key:"hide",value:function e(){a.Dom.removeClass(babelHelpers.classPrivateFieldGet(this,ee),"--visible");a.Dom.remove(babelHelpers.classPrivateFieldGet(this,$));babelHelpers.classPrivateFieldSet(this,$,null)}},{key:"isShown",value:function e(){return babelHelpers.classPrivateFieldGet(this,$)!==null}},{key:"setLoader",value:function e(t){babelHelpers.classPrivateFieldSet(this,te,K(this,ae,le).call(this,t))}}]);return e}();function le(e){switch(e){case"discussions":return new C;case"tasks-list":return new X;case"tasks-timeline":return new Q;case"tasks-plan":case"tasks-kanban":return new B;case"tasks-calendar":return new M;case"tasks-gantt":return new L;case"tasks-scrum-plan-sprint":case"tasks-scrum-plan-backlog":return new U(e);case"tasks-scrum-active":case"tasks-scrum-complete":return new B;case"calendar-base":return new P;case"calendar-schedule":return new T;case"files-list":return new G;case"files-tile-m":return new _;case"files-tile-xl":return new z;default:return new m}}var re;function ie(e,t){ce(e,t);t.add(e)}function ne(e,t,a){ce(e,t);t.set(e,a)}function ce(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function oe(e,t,a){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return a}var be=new WeakMap;var de=new WeakMap;var pe=new WeakMap;var he=new WeakMap;var ue=new WeakMap;var ve=new WeakMap;var He=new WeakMap;var fe=new WeakMap;var we=new WeakMap;var me=new WeakMap;var ge=new WeakSet;var ke=new WeakSet;var Pe=new WeakSet;var ye=new WeakSet;var Te=new WeakSet;var Fe=new WeakSet;var Ce=function(e){babelHelpers.inherits(t,e);function t(e){var s;babelHelpers.classCallCheck(this,t);s=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));ie(babelHelpers.assertThisInitialized(s),Fe);ie(babelHelpers.assertThisInitialized(s),Te);ie(babelHelpers.assertThisInitialized(s),ye);ie(babelHelpers.assertThisInitialized(s),Pe);ie(babelHelpers.assertThisInitialized(s),ke);ie(babelHelpers.assertThisInitialized(s),ge);ne(babelHelpers.assertThisInitialized(s),be,{writable:true,value:void 0});ne(babelHelpers.assertThisInitialized(s),de,{writable:true,value:void 0});ne(babelHelpers.assertThisInitialized(s),pe,{writable:true,value:void 0});ne(babelHelpers.assertThisInitialized(s),he,{writable:true,value:void 0});ne(babelHelpers.assertThisInitialized(s),ue,{writable:true,value:void 0});ne(babelHelpers.assertThisInitialized(s),ve,{writable:true,value:void 0});ne(babelHelpers.assertThisInitialized(s),He,{writable:true,value:void 0});ne(babelHelpers.assertThisInitialized(s),fe,{writable:true,value:void 0});ne(babelHelpers.assertThisInitialized(s),we,{writable:true,value:void 0});ne(babelHelpers.assertThisInitialized(s),me,{writable:true,value:void 0});s.setEventNamespace("BX.Socialnetwork.Spaces.Frame");babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(s),be,e.pageId);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(s),de,e.pageView);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(s),pe,e.id);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(s),ue,e.className);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(s),ve,new se({pageView:babelHelpers.classPrivateFieldGet(babelHelpers.assertThisInitialized(s),de),pageUrl:e.src}));babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(s),He,BX.SidePanel.Instance);oe(babelHelpers.assertThisInitialized(s),ke,Ge).call(babelHelpers.assertThisInitialized(s),e.src);s.updateSrcDebounced=a.Runtime.debounce(s.updateSrc.bind(babelHelpers.assertThisInitialized(s)),1e3);return s}babelHelpers.createClass(t,[{key:"renderTo",value:function e(t){babelHelpers.classPrivateFieldSet(this,fe,t);babelHelpers.classPrivateFieldGet(this,ve).show(babelHelpers.classPrivateFieldGet(this,fe));a.Dom.append(oe(this,ge,Se).call(this),t)}},{key:"reload",value:function e(t,s){babelHelpers.classPrivateFieldGet(this,ve).setLoader(t);a.Dom.addClass(babelHelpers.classPrivateFieldGet(this,we),"--hidden");babelHelpers.classPrivateFieldGet(this,ve).show(babelHelpers.classPrivateFieldGet(this,fe));if(s){oe(this,ke,Ge).call(this,s)}if(babelHelpers.classPrivateFieldGet(this,ve).isShown()){this.updateSrcDebounced()}else{this.updateSrc()}}},{key:"updateSrc",value:function e(){babelHelpers.classPrivateFieldGet(this,we).src=babelHelpers.classPrivateFieldGet(this,he)}},{key:"getFrameNode",value:function e(){return babelHelpers.classPrivateFieldGet(this,we)}},{key:"getWindow",value:function e(){return babelHelpers.classPrivateFieldGet(this,me)}}]);return t}(t.EventEmitter);function Se(){babelHelpers.classPrivateFieldSet(this,we,a.Tag.render(re||(re=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<iframe\n\t\t\t\tid="','"\n\t\t\t\tclass="','"\n\t\t\t\tsrc="','"\n\t\t\t\tonload="','"\n\t\t\t>\n\t\t\t</iframe>\n\t\t'])),babelHelpers.classPrivateFieldGet(this,pe),"".concat(babelHelpers.classPrivateFieldGet(this,ue)," --hidden"),babelHelpers.classPrivateFieldGet(this,he),oe(this,Pe,Ie).bind(this)));return babelHelpers.classPrivateFieldGet(this,we)}function Ge(e){var t=new a.Uri(e);t.setQueryParams({IFRAME:"Y"});babelHelpers.classPrivateFieldSet(this,he,t.toString())}function Ie(e){var t=this;babelHelpers.classPrivateFieldSet(this,me,e.target.contentWindow);a.Event.bind(babelHelpers.classPrivateFieldGet(this,me),"unload",(function(){t.emit("unload",{src:babelHelpers.classPrivateFieldGet(t,he),window:babelHelpers.classPrivateFieldGet(t,me)})}));var s=new URL(babelHelpers.classPrivateFieldGet(this,he),location);s.searchParams["delete"]("empty-state");babelHelpers.classPrivateFieldSet(this,he,s.toString());oe(this,ye,_e).call(this);oe(this,Fe,ze).call(this,babelHelpers.classPrivateFieldGet(this,me).document.body);oe(this,Te,We).call(this);babelHelpers.classPrivateFieldGet(this,ve).hide();a.Dom.removeClass(babelHelpers.classPrivateFieldGet(this,we),"--hidden");this.emit("load",{src:babelHelpers.classPrivateFieldGet(this,he),window:babelHelpers.classPrivateFieldGet(this,me)})}function _e(){babelHelpers.classPrivateFieldGet(this,He).registerAnchorListener(babelHelpers.classPrivateFieldGet(this,me).document)}function We(){var e=this;if(a.Type.isUndefined(MutationObserver)){return}var t=new MutationObserver((function(t){t.forEach((function(t){for(var a=0;a<t.addedNodes.length;++a){oe(e,Fe,ze).call(e,t.addedNodes.item(a))}}))}));t.observe(babelHelpers.classPrivateFieldGet(this,me).document.body,{childList:true,subtree:true})}function ze(e){if(!e){return}var t=[];if(e.tagName==="A"){t=[e]}else if(a.Type.isElementNode(e)){t=babelHelpers.toConsumableArray(e.querySelectorAll("a"))}t.filter((function(e){return!e.target})).forEach((function(e){return e.target="_top"}))}var Ee;function Me(e,t){Le(e,t);t.add(e)}function De(e,t,a){Le(e,t);t.set(e,a)}function Le(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function Oe(e,t,a){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return a}var Be=new WeakMap;var Re=new WeakMap;var Xe=new WeakMap;var Ae=new WeakMap;var Ne=new WeakMap;var xe=new WeakMap;var je=new WeakMap;var Ue=new WeakSet;var Ve=new WeakSet;var Qe=new WeakSet;var qe=new WeakSet;var Ye=new WeakSet;var Je=new WeakSet;var Ke=function(){function e(t){babelHelpers.classCallCheck(this,e);Me(this,Je);Me(this,Ye);Me(this,qe);Me(this,Qe);Me(this,Ve);Me(this,Ue);De(this,Be,{writable:true,value:void 0});De(this,Re,{writable:true,value:void 0});De(this,Xe,{writable:true,value:void 0});De(this,Ae,{writable:true,value:void 0});De(this,Ne,{writable:true,value:void 0});De(this,xe,{writable:true,value:void 0});De(this,je,{writable:true,value:void 0});babelHelpers.classPrivateFieldSet(this,Be,t.popupId);babelHelpers.classPrivateFieldSet(this,Re,t.workpiece);babelHelpers.classPrivateFieldSet(this,Xe,t.containerWithoutOverlay);Oe(this,Ue,Ze).call(this);a.Event.bind(window,"resize",Oe(this,Qe,et).bind(this))}babelHelpers.createClass(e,[{key:"show",value:function e(){a.Dom.append(babelHelpers.classPrivateFieldGet(this,Ae),document.body)}},{key:"remove",value:function e(){a.Dom.remove(babelHelpers.classPrivateFieldGet(this,Ae))}}]);return e}();function Ze(){var e=Oe(this,Ye,at).call(this);babelHelpers.classPrivateFieldSet(this,Ne,Oe(this,Ve,$e).call(this,e.left.width,e.left.height));babelHelpers.classPrivateFieldSet(this,xe,Oe(this,Ve,$e).call(this,e.top.width,e.top.height,e.top.left));babelHelpers.classPrivateFieldSet(this,je,Oe(this,Ve,$e).call(this,e.right.width,e.right.height,e.right.left));babelHelpers.classPrivateFieldSet(this,Ae,a.Tag.render(Ee||(Ee=babelHelpers.taggedTemplateLiteral(["\n\t\t\t<div>\n\t\t\t\t","\n\t\t\t\t","\n\t\t\t\t","\n\t\t\t</div>\n\t\t"])),babelHelpers.classPrivateFieldGet(this,Ne),babelHelpers.classPrivateFieldGet(this,xe),babelHelpers.classPrivateFieldGet(this,je)))}function $e(e,t){var a=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var s=babelHelpers.classPrivateFieldGet(this,Re).cloneNode(true);Oe(this,Je,st).call(this,s,e,t,a);return s}function et(){var e=Oe(this,Ye,at).call(this);Oe(this,Je,st).call(this,babelHelpers.classPrivateFieldGet(this,Ne),e.left.width,e.left.height);Oe(this,Je,st).call(this,babelHelpers.classPrivateFieldGet(this,xe),e.top.width,e.top.height,e.top.left);Oe(this,Je,st).call(this,babelHelpers.classPrivateFieldGet(this,je),e.right.width,e.right.height,e.right.left)}function tt(){var e=document.documentElement.scrollWidth;var t=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight);return[e,t]}function at(){var e=Oe(this,qe,tt).call(this),t=babelHelpers.slicedToArray(e,2),s=t[0],l=t[1];var r=a.Dom.getPosition(babelHelpers.classPrivateFieldGet(this,Xe));return{left:{width:r.left,height:l,left:0},top:{width:r.width,height:r.top,left:r.left},right:{width:s-r.right,height:l,left:r.right}}}function st(e,t,s){var l=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0;a.Dom.style(e,"width","".concat(t,"px"));a.Dom.style(e,"height","".concat(s,"px"));if(l){a.Dom.style(e,"left","".concat(l,"px"))}}function lt(e,t){it(e,t);t.add(e)}function rt(e,t,a){it(e,t);t.set(e,a)}function it(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function nt(e,t,a){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return a}var ct=new WeakMap;var ot=new WeakMap;var bt=new WeakMap;var dt=new WeakMap;var pt=new WeakMap;var ht=new WeakSet;var ut=new WeakSet;var vt=new WeakSet;var Ht=new WeakSet;var ft=new WeakSet;var wt=new WeakSet;var mt=new WeakSet;var gt=new WeakSet;var kt=function(){function e(t){babelHelpers.classCallCheck(this,e);lt(this,gt);lt(this,mt);lt(this,wt);lt(this,ft);lt(this,Ht);lt(this,vt);lt(this,ut);lt(this,ht);rt(this,ct,{writable:true,value:new a.Cache.MemoryCache});rt(this,ot,{writable:true,value:void 0});rt(this,bt,{writable:true,value:void 0});rt(this,dt,{writable:true,value:new Map});rt(this,pt,{writable:true,value:new Set});this.setParams(t);nt(this,vt,Tt).call(this)}babelHelpers.createClass(e,[{key:"setParams",value:function e(t){babelHelpers.classPrivateFieldGet(this,ct).set("params",t)}},{key:"renderContentTo",value:function e(t){if(!a.Type.isDomNode(t)){throw new Error("BX.Socialnetwork.Spaces.Space: HTMLElement for space not found")}babelHelpers.classPrivateFieldGet(this,ot).renderTo(t)}},{key:"reloadPageContent",value:function e(t){var s=this;var l=new a.Uri(t);var r=nt(this,mt,Gt).call(this,l);var i="";var n="";var c="";if(r==="tasks"){var o;c=l.getQueryParam("F_STATE");i=(o=l.getQueryParam("tab"))!==null&&o!==void 0?o:""}var b=false;if(r==="files"){var d,p;if(l.getPath().includes("trashcan")){b=true}i=(d=l.getQueryParam("viewMode"))!==null&&d!==void 0?d:"";n=(p=l.getQueryParam("viewSize"))!==null&&p!==void 0?p:""}a.ajax.runComponentAction("bitrix:socialnetwork.spaces","getPageView",{mode:"class",data:{pageType:r,userId:nt(this,ft,Ct).call(this,"userId"),groupId:nt(this,ft,Ct).call(this,"groupId"),params:{isTrashMode:b,viewMode:i,viewSize:n},F_STATE:c}}).then((function(e){babelHelpers.classPrivateFieldGet(s,ot).reload(e.data,t)}))["catch"]((function(e){nt(s,gt,It).call(s,"getPageView",e)}))}},{key:"showOverlay",value:function e(t,a){nt(this,ht,Pt).call(this,t);var s=babelHelpers.classPrivateFieldGet(this,dt).has(t)?babelHelpers.classPrivateFieldGet(this,dt).get(t):new Ke({popupId:t,workpiece:a,containerWithoutOverlay:babelHelpers.classPrivateFieldGet(this,ot).getFrameNode()});babelHelpers.classPrivateFieldGet(this,dt).set(t,s);s.show()}},{key:"hideOverlay",value:function e(t){if(babelHelpers.classPrivateFieldGet(this,dt).has(t)){babelHelpers.classPrivateFieldGet(this,dt).get(t).remove()}nt(this,ut,yt).call(this,t)}},{key:"hideOverlays",value:function e(){babelHelpers.classPrivateFieldGet(this,dt).forEach((function(e){return e.remove()}))}}]);return e}();function Pt(e){babelHelpers.classPrivateFieldGet(this,pt).add(e);a.Dom.addClass(babelHelpers.classPrivateFieldGet(this,ot).getWindow().document.querySelector(".sn-spaces__wrapper"),"--scroll-disabled")}function yt(e){babelHelpers.classPrivateFieldGet(this,pt)["delete"](e);if(babelHelpers.classPrivateFieldGet(this,pt).size===0){a.Dom.removeClass(babelHelpers.classPrivateFieldGet(this,ot).getWindow().document.querySelector(".sn-spaces__wrapper"),"--scroll-disabled")}}function Tt(){var e=this;babelHelpers.classPrivateFieldSet(this,ot,new Ce({pageId:nt(this,ft,Ct).call(this,"pageId"),pageView:nt(this,ft,Ct).call(this,"pageView"),id:"sn-spaces-iframe",src:nt(this,ft,Ct).call(this,"contentUrl"),className:"sn-spaces-iframe"}));babelHelpers.classPrivateFieldGet(this,ot).subscribe("load",(function(t){var s=t.getData();var l=new a.Uri(s.src);l.removeQueryParam(["IFRAME"]);nt(e,wt,St).call(e,l.toString());if(nt(e,ft,Ct).call(e,"pageId")==="files"){babelHelpers.classPrivateFieldSet(e,bt,new b({window:s.window}));babelHelpers.classPrivateFieldGet(e,bt).subscribe("changePage",(function(t){nt(e,wt,St).call(e,t.getData())}))}}));babelHelpers.classPrivateFieldGet(this,ot).subscribe("unload",(function(){e.hideOverlays()}));new MutationObserver((function(){var t=BX.Intranet.Bitrix24.ThemePicker.Singleton.getAppliedThemeId();var s=document.head.querySelectorAll('link[data-theme-id="'.concat(t,'"'));Promise.all(babelHelpers.toConsumableArray(s).map((function(e){return new Promise((function(t){a.Event.bind(e,"load",t)}))}))).then((function(){return nt(e,Ht,Ft).call(e)}))})).observe(document.head,{childList:true,subtree:false})}function Ft(){var e=BX.Intranet.Bitrix24.ThemePicker.Singleton.getAppliedThemeId();var t=e.match(/(.*):/)[1];var s=babelHelpers.classPrivateFieldGet(this,ot).getFrameNode().contentDocument;if(!s.body){return}s.body.className=s.body.className.replace(/bitrix24-\S*-theme/,"");a.Dom.addClass(s.body,"bitrix24-".concat(t,"-theme"))}function Ct(e){return babelHelpers.classPrivateFieldGet(this,ct).get("params")[e]}function St(e){window.history.replaceState({},"",e)}function Gt(e){if(e.getPath().includes("general")){return"discussions"}if(e.getPath().includes("tasks")){return"tasks"}if(e.getPath().includes("calendar")){return"calendar"}if(e.getPath().includes("disk")){return"files"}return"discussions"}function It(e,t){console.error("Spaces: ".concat(e," error"),t)}e.Space=kt})(this.BX.Socialnetwork.Spaces=this.BX.Socialnetwork.Spaces||{},BX.Event,BX);
//# sourceMappingURL=script.map.js