{"version":3,"file":"script.js","sources":["script.es6.js"],"sourcesContent":["import {Reflection, Dom, Tag, Loc, Type} from \"main.core\";\n\nclass CalendarEvent\n{\n\tconstructor(options = {})\n\t{\n\t\tthis.eventId = options.eventId;\n\t\tthis.hasDecision = options.hasDecision;\n\t\tthis.isPositiveDecision = options.isPositiveDecision;\n\t\tthis.hash = options.hash;\n\t\tthis.downnoloadLink = options.downloadLink;\n\t\tthis.decisionButtonsBlock = document.querySelector('.calendar-pub-event-btn-container');\n\t\tthis.titleBlock = document.querySelector('.calendar-pub-event-title-main');\n\t\tthis.eventWrapper = document.querySelector('.calendar-pub-event-wrap');\n\t\tthis.listBoxWrapper = document.querySelector('.calendar-pub-event-user-list-box');\n\t\tthis.decisionBlockWrapper = decisionBlock;\n\t\tthis.buttonsContainer = buttonsContainer;\n\n\t\tthis.init();\n\t}\n\n\tinit()\n\t{\n\t\tthis.initWrappersForButtons();\n\t\tthis.initHandler();\n\t}\n\n\tinitWrappersForButtons()\n\t{\n\t\tthis.primaryButtonWrapper = this.buttonsContainer.children[0];\n\t\tthis.secondButtonWrapper = this.buttonsContainer.children[1];\n\t}\n\n\tinitHandler()\n\t{\n\t\tif (this.hasDecision)\n\t\t{\n\t\t\tthis.initChangeDecisionButton();\n\t\t\tDom.append(this.changeDecisionButton, this.primaryButtonWrapper)\n\t\t\tif (this.isPositiveDecision)\n\t\t\t{\n\t\t\t\tthis.initDownloadButton();\n\t\t\t\tDom.append(this.downloadButton, this.secondButtonWrapper);\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.initAcceptButton();\n\t\t\tthis.initDeclineButton();\n\t\t\tDom.append(this.acceptDecisionButton, this.primaryButtonWrapper);\n\t\t\tDom.append(this.declineDecisionButton, this.secondButtonWrapper);\n\t\t}\n\n\t\tthis.initListBoxHandlers();\n\t}\n\n\tinitChangeDecisionButton()\n\t{\n\t\tthis.changeDecisionButton = this.getChangeDecisionButton();\n\t\tthis.changeDecisionButton.addEventListener('click', () => {this.changeStateWithoutDecision()})\n\t}\n\n\tinitAcceptButton()\n\t{\n\t\tthis.acceptDecisionButton = this.getAcceptDecisionButton();\n\t\tthis.acceptDecisionButton.addEventListener('click', () => {this.changeStateWithDecision(true)});\n\t}\n\n\tinitDeclineButton()\n\t{\n\t\tthis.declineDecisionButton = this.getDeclineDecisionButton();\n\t\tthis.declineDecisionButton.addEventListener('click', () => {this.changeStateWithDecision(false)});\n\t}\n\n\tchangeStateWithDecision(decision)\n\t{\n\t\tthis.hasDecision = true;\n\n\t\tDom.remove(this.acceptDecisionButton);\n\t\tthis.acceptDecisionButton = undefined;\n\t\tDom.remove(this.declineDecisionButton);\n\t\tthis.declineDecisionButton = undefined;\n\n\t\tthis.showChangeDecisionButton();\n\n\t\tif (decision)\n\t\t{\n\t\t\tthis.showAcceptDecisionBlock();\n\t\t\tthis.showDownloadButton();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.showDeclineDecisionBlock();\n\t\t}\n\n\t\tthis.isPositiveDecision = decision;\n\n\t\tBX.ajax.runComponentAction('bitrix:calendar.pub.event', 'handleDecision', {\n\t\t\tmode: 'class',\n\t\t\tdata: {\n\t\t\t\t'decision': decision ? 'Y' : 'N',\n\t\t\t\t'eventId': this.eventId,\n\t\t\t\t'hash': this.hash,\n\t\t\t}\n\t\t}).then((response) => {\n\t\t\tif (response.data.attendeesList.length > 0)\n\t\t\t{\n\t\t\t\tthis.rebuildUserList(response.data.attendeesList);\n\t\t\t}\n\t\t});\n\t}\n\n\tshowChangeDecisionButton()\n\t{\n\t\tif (!this.changeDecisionButton)\n\t\t{\n\t\t\tthis.initChangeDecisionButton();\n\t\t}\n\n\t\tDom.append(this.changeDecisionButton, this.primaryButtonWrapper);\n\t}\n\n\tgetChangeDecisionButton()\n\t{\n\t\treturn Tag.render `\n\t\t\t<button id=\"changeDecisionButton\" class=\"ui-btn ui-btn-round ui-btn-lg ui-btn-success calendar-pub-event-btn calendar-pub-event-btn-change-decision\">\n\t\t\t\t${Loc.getMessage('EC_CALENDAR_CHANGE_DECISION_TITLE')}\n\t\t\t</button>\n\t\t`;\n\t}\n\n\tshowAcceptDecisionBlock()\n\t{\n\t\tconst decisionBlock = this.decisionBlockWrapper.children[1];\n\t\tdecisionBlock.innerText = Loc.getMessage('EC_CALENDAR_PUB_EVENT_DECISION_YES');\n\t\tDom.removeClass(this.eventWrapper, 'calendar-pub-event--decline ');\n\t\tDom.addClass(this.eventWrapper, 'calendar-pub-event--accept');\n\t}\n\n\tshowDeclineDecisionBlock()\n\t{\n\t\tconst decisionBlock = this.decisionBlockWrapper.children[1];\n\t\tdecisionBlock.innerText = Loc.getMessage('EC_CALENDAR_PUB_EVENT_DECISION_NO');\n\t\tDom.removeClass(this.eventWrapper, 'calendar-pub-event--accept');\n\t\tDom.addClass(this.eventWrapper, 'calendar-pub-event--decline ');\n\t}\n\n\tchangeStateWithoutDecision()\n\t{\n\t\tDom.remove(this.changeDecisionButton);\n\t\tthis.changeDecisionButton = undefined;\n\t\tif (this.downloadButton)\n\t\t{\n\t\t\tDom.remove(this.downloadButton);\n\t\t\tthis.downloadButton = undefined;\n\t\t}\n\t\tthis.showAcceptDecisionButton();\n\t\tthis.showDeclineDecisionButton();\n\t}\n\n\tshowAcceptDecisionButton()\n\t{\n\t\tif (!this.acceptDecisionButton)\n\t\t{\n\t\t\tthis.initAcceptButton();\n\t\t}\n\n\t\tDom.append(this.acceptDecisionButton, this.primaryButtonWrapper);\n\t}\n\n\tgetAcceptDecisionButton()\n\t{\n\t\treturn Tag.render`\n\t\t\t<button id=\"acceptDecisionButton\" class=\"ui-btn ui-btn-round ui-btn-lg ui-btn-success calendar-pub-event-btn\">\n\t\t\t\t${Loc.getMessage('EC_CALENDAR_DECISION_TITLE_YES')}\n\t\t\t</button>\n\t\t`;\n\t}\n\n\tshowDeclineDecisionButton()\n\t{\n\t\tif (!this.declineDecisionButton)\n\t\t{\n\t\t\tthis.initDeclineButton();\n\t\t}\n\n\t\tDom.append(this.declineDecisionButton, this.secondButtonWrapper);\n\t}\n\n\tgetDeclineDecisionButton()\n\t{\n\t\treturn Tag.render`\n\t\t\t<button id=\"declineDecisionButton\" class=\"ui-btn ui-btn-link ui-btn-lg calendar-pub-event-btn\" data-decision=\"N\">\n\t\t\t${Loc.getMessage('EC_CALENDAR_DECISION_TITLE_NO')}\n\t\t</button>\n\t\t`;\n\t}\n\n\tinitListBoxHandlers()\n\t{\n\t\tthis.initAttendeesListBoxHandlers();\n\t\tthis.initAttachmentsListBoxHandlers();\n\t}\n\n\tinitAttendeesListBoxHandlers()\n\t{\n\t\tconst attendeesListButton = document.querySelector('.calendar-pub-event-user-list-btn');\n\t\tconst contentBox = document.querySelector('.calendar-pub-event-user-list-content');\n\n\t\tif (Type.isDomNode(attendeesListButton))\n\t\t{\n\t\t\tattendeesListButton.addEventListener('click', () =>\n\t\t\t{\n\t\t\t\tconst contentHeight = contentBox.scrollHeight;\n\t\t\t\tcontentBox.style.height = contentHeight + 'px';\n\t\t\t\tcontentBox.style.maxHeight = contentHeight + 'px';\n\t\t\t\tattendeesListButton.style.display = 'none';\n\t\t\t})\n\t\t}\n\t}\n\n\tinitAttachmentsListBoxHandlers()\n\t{\n\t\tconst attachmentBtn = document.querySelector('.calendar-pub-event-user-attachment-btn');\n\t\tconst attachmentContentBox = document.querySelector('.calendar-pub-event-user-attachment-content');\n\t\tif (Type.isDomNode(attachmentBtn))\n\t\t{\n\t\t\tattachmentBtn.addEventListener('click', () =>\n\t\t\t{\n\t\t\t\tconst contentHeight = attachmentContentBox.scrollHeight;\n\t\t\t\tattachmentContentBox.style.height = contentHeight + 'px';\n\t\t\t\tattachmentContentBox.style.maxHeight = contentHeight + 'px';\n\t\t\t\tattachmentBtn.style.display = 'none';\n\t\t\t})\n\t\t}\n\t}\n\n\tinitDownloadButton()\n\t{\n\t\tthis.downloadButton = this.getDownloadButton();\n\t}\n\n\tshowDownloadButton()\n\t{\n\t\tthis.initDownloadButton();\n\t\tDom.append(this.downloadButton, this.secondButtonWrapper);\n\t}\n\n\tgetDownloadButton()\n\t{\n\t\treturn Tag.render`\n\t\t\t<a id=\"downloadButton\" href=\"${BX.util.htmlspecialchars(this.downnoloadLink)}\" class=\"ui-btn ui-btn-link ui-btn-lg calendar-pub-event-btn\" >\n\t\t\t${Loc.getMessage('EC_CALENDAR_ICAL_INVITATION_DOWNLOAD_INVITATION')}\n\t\t</a>\n\t\t`;\n\t}\n\n\tgetDecisionBlock()\n\t{\n\t\tif (this.hasDecision)\n\t\t{\n\t\t\treturn document.querySelector('.calendar-pub-event-desc');\n\t\t}\n\n\t\treturn null;\n\t}\n\n\trebuildUserList(attendeesList)\n\t{\n\t\tif (Type.isArray(attendeesList))\n\t\t{\n\t\t\tconst userListContainer = Tag.render`\n\t\t\t\t<div class=\"calendar-pub-event-user-list-content\">\n\t\t\t\t\t${attendeesList.map((attendee) => Tag.render`\n\t\t\t\t\t\t<div class=\"calendar-pub-event-user-list-item ${this.getAdditionalClassForAttendeesList(attendee['status'])}\">\n\t\t\t\t\t\t\t${attendee['name']}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t`)}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t\tconst oldAttendeesContainer = document.querySelector('.calendar-pub-event-user-list-content');\n\t\t\tconst oldAttendeesListButton = document.querySelector('.calendar-pub-event-user-list-btn');\n\t\t\tif (Type.isDomNode(oldAttendeesContainer))\n\t\t\t{\n\t\t\t\tconst wrapper = oldAttendeesContainer.parentElement;\n\t\t\t\tDom.remove(oldAttendeesContainer);\n\t\t\t\tif (Type.isDomNode(oldAttendeesListButton))\n\t\t\t\t{\n\t\t\t\t\tDom.remove(oldAttendeesListButton);\n\t\t\t\t}\n\n\t\t\t\tDom.append(userListContainer, wrapper);\n\n\t\t\t\tif (attendeesList.length > 3)\n\t\t\t\t{\n\t\t\t\t\tconst attendeesListButton = Tag.render`\n\t\t\t\t\t\t<div data-button=\"users\" class=\"calendar-pub-event-user-list-btn\">\n\t\t\t\t\t\t\t${Loc.getMessage('EC_CALENDAR_PUB_EVENT_ALL_ATTENDEES_TITLE')}\n\t\t\t\t\t\t\t<span>(${attendeesList.length})</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t`;\n\t\t\t\t\tDom.append(attendeesListButton, wrapper);\n\t\t\t\t\tthis.initAttendeesListBoxHandlers();\n\t\t\t\t}\n\n\t\t\t}\n\t\t}\n\t}\n\n\tgetAdditionalClassForAttendeesList(status)\n\t{\n\t\tswitch (status)\n\t\t{\n\t\t\tcase 'ACCEPTED':\n\t\t\t\treturn 'calendar-pub-event-user--accept';\n\t\t\tcase 'DECLINED':\n\t\t\t\treturn 'calendar-pub-event-user--cancel';\n\t\t\tdefault:\n\t\t\t\treturn 'calendar-pub-event-user--waiting';\n\t\t}\n\t}\n}\n\nReflection.namespace('BX.Calendar.Pub').CalendarEvent = CalendarEvent;\n"],"names":["CalendarEvent","options","eventId","hasDecision","isPositiveDecision","hash","downnoloadLink","downloadLink","decisionButtonsBlock","document","querySelector","titleBlock","eventWrapper","listBoxWrapper","decisionBlockWrapper","decisionBlock","buttonsContainer","init","initWrappersForButtons","initHandler","primaryButtonWrapper","children","secondButtonWrapper","initChangeDecisionButton","Dom","append","changeDecisionButton","initDownloadButton","downloadButton","initAcceptButton","initDeclineButton","acceptDecisionButton","declineDecisionButton","initListBoxHandlers","getChangeDecisionButton","addEventListener","changeStateWithoutDecision","getAcceptDecisionButton","changeStateWithDecision","getDeclineDecisionButton","decision","remove","undefined","showChangeDecisionButton","showAcceptDecisionBlock","showDownloadButton","showDeclineDecisionBlock","BX","ajax","runComponentAction","mode","data","then","response","attendeesList","length","rebuildUserList","Tag","render","Loc","getMessage","innerText","removeClass","addClass","showAcceptDecisionButton","showDeclineDecisionButton","initAttendeesListBoxHandlers","initAttachmentsListBoxHandlers","attendeesListButton","contentBox","Type","isDomNode","contentHeight","scrollHeight","style","height","maxHeight","display","attachmentBtn","attachmentContentBox","getDownloadButton","util","htmlspecialchars","isArray","userListContainer","map","attendee","getAdditionalClassForAttendeesList","oldAttendeesContainer","oldAttendeesListButton","wrapper","parentElement","status","Reflection","namespace"],"mappings":"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"}