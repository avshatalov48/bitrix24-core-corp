(function(){"use strict";BX.namespace("BX.Salescenter.CrmFormPanel");BX.Salescenter.CrmFormPanel={grid:null,signedParameters:null,init:function(e){this.gridParams=e.gridParams;this.signedParameters=e.signedParameters;this.grid=new BX.TileGrid.Grid(this.gridParams);this.grid.draw()},closeContextMenus:function(){this.grid.items.map(function(e){if(e.contextMenu){e.contextMenu.close()}})}};BX.Salescenter.CrmFormPanel.TileGrid=function(e){BX.TileGrid.Item.apply(this,arguments);this.title=e.title;this.titleColor=e.titleColor;this.image=e.image;this.itemSelected=e.itemSelected;this.itemSelectedColor=e.itemSelectedColor;this.itemSelectedImage=e.itemSelectedImage;this.outerImage=e.outerImage||false;this.layout={wrapper:null,image:null,title:null};this.data=e.data||{};this.contextMenu=null};BX.Salescenter.CrmFormPanel.TileGrid.prototype={__proto__:BX.TileGrid.Item.prototype,constructor:BX.TileGrid.Item,getContent:function(){if(!this.layout.wrapper){this.layout.wrapper=BX.create("div",{props:{className:"salescenter-crmform-panel-item"},children:[BX.create("div",{props:{className:"salescenter-crmform-panel-item-content"},children:[this.getImage(),this.getTitle(),this.getStatus()]})],events:{click:function(){this.onClick()}.bind(this)}})}if(this.itemSelected){this.setSelected()}return this.layout.wrapper},getImage:function(){if(!this.layout.image){var e=BX.create("div",{props:{className:"salescenter-crmform-panel-item-image"},style:{backgroundImage:this.image?"url('"+this.image+"')":null}});this.layout.image=e}return this.layout.image},getStatus:function(){if(!this.itemSelected)return;this.layout.itemSelected=BX.create("div",{props:{className:"salescenter-crmform-panel-item-status-selected"}});return this.layout.itemSelected},setSelected:function(){BX.addClass(this.layout.wrapper,"salescenter-crmform-panel-item-selected");if(this.itemSelectedImage){this.layout.image.style.backgroundImage="url("+this.itemSelectedImage+")"}if(this.itemSelectedColor){this.layout.wrapper.style.backgroundColor=this.itemSelectedColor}},getTitle:function(){if(!this.layout.title){this.layout.title=BX.create("div",{props:{className:"salescenter-crmform-panel-item-title"},text:this.title});if(this.itemSelected){this.layout.title.style.color="#fff"}}return this.layout.title},onClick:function(){if(this.data.menu){if(!this.contextMenu){var e=this.data.menu.map(function(e){if(e.link){e.onclick=function(e,t){t.getMenuWindow().close();window.open(t.link,"_blank")}}return e});this.contextMenu=new BX.PopupMenuWindow({bindElement:this.layout.wrapper,items:e,offsetTop:3})}this.contextMenu.show()}}}})();
//# sourceMappingURL=script.map.js