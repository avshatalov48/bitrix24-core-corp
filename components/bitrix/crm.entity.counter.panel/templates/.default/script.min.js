this.BX=this.BX||{};(function(e,t,i,a){"use strict";function s(e,t){l(e,t);t.add(e)}function r(e,t,i){l(e,t);t.set(e,i)}function l(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function n(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var b=new WeakMap;var c=new WeakMap;var d=new WeakMap;var p=new WeakMap;var v=new WeakMap;var u=new WeakMap;var o=new WeakMap;var h=new WeakMap;var E=new WeakMap;var f=new WeakMap;var H=new WeakMap;var P=new WeakSet;var I=new WeakSet;var F=new WeakSet;var T=new WeakSet;var y=new WeakSet;var C=new WeakSet;var _=new WeakSet;var w=function(){function e(t){babelHelpers.classCallCheck(this,e);s(this,_);s(this,C);s(this,y);s(this,T);s(this,F);s(this,I);s(this,P);r(this,b,{writable:true,value:void 0});r(this,c,{writable:true,value:void 0});r(this,d,{writable:true,value:void 0});r(this,p,{writable:true,value:void 0});r(this,v,{writable:true,value:void 0});r(this,u,{writable:true,value:void 0});r(this,o,{writable:true,value:false});r(this,h,{writable:true,value:void 0});r(this,E,{writable:true,value:void 0});r(this,f,{writable:true,value:void 0});r(this,H,{writable:true,value:void 0});if(!i.Type.isPlainObject(t)){throw'BX.Crm.EntityCounterManager: The "options" argument must be object.'}babelHelpers.classPrivateFieldSet(this,b,i.Type.isString(t.id)?t.id:"");if(babelHelpers.classPrivateFieldGet(this,b)===""){throw'BX.Crm.EntityCounterManager: The "id" argument must be specified.'}babelHelpers.classPrivateFieldSet(this,p,i.Type.isString(t.serviceUrl)?t.serviceUrl:"");if(babelHelpers.classPrivateFieldGet(this,p)===""){throw'BX.Crm.EntityCounterManager: The "serviceUrl" argument must be specified.'}babelHelpers.classPrivateFieldSet(this,c,t.entityTypeId?i.Text.toInteger(t.entityTypeId):0);babelHelpers.classPrivateFieldSet(this,d,BX.CrmEntityType.resolveName(babelHelpers.classPrivateFieldGet(this,c)));babelHelpers.classPrivateFieldSet(this,v,i.Type.isArray(t.codes)?t.codes:[]);babelHelpers.classPrivateFieldSet(this,u,i.Type.isObject(t.extras)?t.extras:{});babelHelpers.classPrivateFieldSet(this,o,i.Type.isBoolean(t.withExcludeUsers)?t.withExcludeUsers:false);babelHelpers.classPrivateFieldSet(this,h,{});babelHelpers.classPrivateFieldSet(this,H,true);n(this,P,S).call(this);this.constructor.lastInstance=this}babelHelpers.createClass(e,[{key:"getId",value:function e(){return babelHelpers.classPrivateFieldGet(this,b)}},{key:"getCounterData",value:function e(){return babelHelpers.classPrivateFieldGet(this,h)}},{key:"setCounterData",value:function e(t){babelHelpers.classPrivateFieldSet(this,h,t)}}],[{key:"getLastInstance",value:function e(){return this.lastInstance}}]);return e}();function S(){var e=this;a.EventEmitter.subscribe("onPullEvent-main",n(this,I,g).bind(this));i.Event.ready((function(){i.Event.bind(document,"visibilitychange",(function(){babelHelpers.classPrivateFieldSet(e,H,document.visibilityState==="visible");if(babelHelpers.classPrivateFieldGet(e,H)&&n(e,_,M).call(e)){n(e,F,m).call(e,babelHelpers.classPrivateFieldGet(e,f))}}))}))}function g(e){var t=e.getData(),i=babelHelpers.slicedToArray(t,2),a=i[0],s=i[1];if(a!=="user_counter"){return}babelHelpers.classPrivateFieldSet(this,f,s);n(this,F,m).call(this,s)}function m(e){var t=false;var i=false;var s=n(this,C,G).call(this,e);for(var r in s){if(!s.hasOwnProperty(r)||babelHelpers.classPrivateFieldGet(this,v).indexOf(r)<0){continue}var l=BX.prop.getInteger(s,r,0);if(l<0){i=true;break}var b=BX.prop.getInteger(babelHelpers.classPrivateFieldGet(this,h),r,0);if(b!==l){t=true;babelHelpers.classPrivateFieldGet(this,h)[r]=l}}if(i){n(this,T,N).call(this)}if(t){a.EventEmitter.emit(this,"BX.Crm.EntityCounterManager:onRecalculate")}}function N(){if(babelHelpers.classPrivateFieldGet(this,E)){return}if(!babelHelpers.classPrivateFieldGet(this,H)){return}babelHelpers.classPrivateFieldSet(this,E,true);i.ajax.runAction("crm.counter.list",{data:{entityTypeId:babelHelpers.classPrivateFieldGet(this,c),extras:babelHelpers.classPrivateFieldGet(this,u),withExcludeUsers:babelHelpers.classPrivateFieldGet(this,o)?1:0}}).then(n(this,y,U).bind(this))}function U(e){babelHelpers.classPrivateFieldSet(this,E,false);var t=i.Type.isPlainObject(e.data)?e.data:null;if(t===null){return}this.setCounterData(t);a.EventEmitter.emit("BX.Crm.EntityCounterManager:onRecalculate",this)}function G(e){var t=i.Loc.getMessage("SITE_ID");return i.Type.isPlainObject(e[t])?e[t]:{}}function M(){if(!babelHelpers.classPrivateFieldGet(this,f)){return false}var e=n(this,C,G).call(this,babelHelpers.classPrivateFieldGet(this,f));return Object.values(e).includes(-1)}babelHelpers.defineProperty(w,"lastInstance",null);var D=function e(){babelHelpers.classCallCheck(this,e)};babelHelpers.defineProperty(D,"UNDEFINED",0);babelHelpers.defineProperty(D,"IDLE",1);babelHelpers.defineProperty(D,"PENDING",2);babelHelpers.defineProperty(D,"OVERDUE",4);babelHelpers.defineProperty(D,"CURRENT",6);babelHelpers.defineProperty(D,"ALL_DEADLINE_BASED",7);babelHelpers.defineProperty(D,"INCOMING_CHANNEL",8);babelHelpers.defineProperty(D,"ALL",15);babelHelpers.defineProperty(D,"IDLE_NAME","IDLE");babelHelpers.defineProperty(D,"PENDING_NAME","PENDING");babelHelpers.defineProperty(D,"OVERDUE_NAME","OVERDUE");babelHelpers.defineProperty(D,"CURRENT_NAME","CURRENT");babelHelpers.defineProperty(D,"INCOMING_CHANNEL_NAME","INCOMINGCHANNEL");babelHelpers.defineProperty(D,"ALL_DEADLINE_BASED_NAME","ALLDEADLINEBASED");babelHelpers.defineProperty(D,"ALL_NAME","ALL");function O(e,t){L(e,t);t.add(e)}function R(e,t,i){L(e,t);t.set(e,i)}function L(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function k(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var A=new WeakMap;var W=new WeakMap;var B=new WeakMap;var X=new WeakSet;var z=new WeakSet;var x=new WeakSet;var j=function(){function e(){babelHelpers.classCallCheck(this,e);O(this,x);O(this,z);O(this,X);R(this,A,{writable:true,value:void 0});R(this,W,{writable:true,value:void 0});R(this,B,{writable:true,value:true});var t=i.Type.isObject(BX.Main.filterManager)&&BX.Main.filterManager.hasOwnProperty("getList")?BX.Main.filterManager.getList():Object.values(BX.Main.filterManager.data);if(t.length===0){console.warn("BX.Crm.EntityCounterFilter: Unable to define filter.");babelHelpers.classPrivateFieldSet(this,B,false)}else{babelHelpers.classPrivateFieldSet(this,A,t[0]);k(this,X,Y).call(this);this.updateFields()}}babelHelpers.createClass(e,[{key:"getManager",value:function e(){return babelHelpers.classPrivateFieldGet(this,A)}},{key:"isActive",value:function e(){return babelHelpers.classPrivateFieldGet(this,B)}},{key:"getFields",value:function e(){var t=this;var i=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(i){var a=Object.entries(babelHelpers.classPrivateFieldGet(this,W)).filter((function(e){var i=babelHelpers.slicedToArray(e,2),a=i[0],s=i[1];return k(t,x,J).call(t,a)}));return Object.fromEntries(a)}return babelHelpers.classPrivateFieldGet(this,W)}},{key:"getApi",value:function e(){return babelHelpers.classPrivateFieldGet(this,A).getApi()}},{key:"updateFields",value:function e(){babelHelpers.classPrivateFieldSet(this,W,babelHelpers.classPrivateFieldGet(this,A).getFilterFieldsValues())}},{key:"isFilteredByFieldEx",value:function e(t){if(!Object.keys(babelHelpers.classPrivateFieldGet(this,W)).includes(t)||t.endsWith("_datesel")||t.endsWith("_numsel")||t.endsWith("_label")){return false}return k(this,x,J).call(this,t)}},{key:"isFiltered",value:function t(a,s,r,l){var n=this;if(a===0||s===D.UNDEFINED){return false}var b=r===BX.CrmEntityType.enumeration.order?true:this.isFilteredByFieldEx(e.COUNTER_USER_FIELD)&&i.Type.isArray(babelHelpers.classPrivateFieldGet(this,W)[e.COUNTER_USER_FIELD])&&babelHelpers.classPrivateFieldGet(this,W)[e.COUNTER_USER_FIELD].length===1&&(l?babelHelpers.classPrivateFieldGet(this,W)[e.COUNTER_USER_FIELD][0]===e.FILTER_OTHER_USERS:parseInt(babelHelpers.classPrivateFieldGet(this,W)[e.COUNTER_USER_FIELD][0],10)===a);var c=this.isFilteredByFieldEx(e.COUNTER_TYPE_FIELD)&&i.Type.isObject(babelHelpers.classPrivateFieldGet(this,W)[e.COUNTER_TYPE_FIELD]);var d=c?Object.values(babelHelpers.classPrivateFieldGet(this,W)[e.COUNTER_TYPE_FIELD]).map((function(e){return parseInt(e,10)})).sort():[];var p=d.length===1&&d[0]===s||d.length===2&&s===D.CURRENT&&d[0]===D.PENDING&&d[1]===D.OVERDUE;var v=[e.COUNTER_USER_FIELD,e.COUNTER_TYPE_FIELD].concat(babelHelpers.toConsumableArray(e.EXCLUDED_FIELDS));var u=Object.keys(babelHelpers.classPrivateFieldGet(this,W));var o=v.filter((function(e){return!u.includes(e)})).concat(u.filter((function(e){return!v.includes(e)})));var h=o.some((function(e){return n.isFilteredByFieldEx(e)}));return b&&p&&!h}}]);return e}();function Y(){a.EventEmitter.subscribe("BX.Main.Filter:apply",k(this,z,V).bind(this))}function V(){this.updateFields()}function J(e){if(i.Type.isArray(babelHelpers.classPrivateFieldGet(this,W)[e])){return babelHelpers.classPrivateFieldGet(this,W)[e].length>0}if(i.Type.isObject(babelHelpers.classPrivateFieldGet(this,W)[e])){return Object.values(babelHelpers.classPrivateFieldGet(this,W)[e]).length>0}return babelHelpers.classPrivateFieldGet(this,W)[e]!==""}babelHelpers.defineProperty(j,"COUNTER_TYPE_FIELD","ACTIVITY_COUNTER");babelHelpers.defineProperty(j,"COUNTER_USER_FIELD","ASSIGNED_BY_ID");babelHelpers.defineProperty(j,"EXCLUDED_FIELDS",["FIND"]);babelHelpers.defineProperty(j,"FILTER_OTHER_USERS","other-users");function q(e,t){Q(e,t);t.add(e)}function K(e,t,i){Q(e,t);t.set(e,i)}function Q(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function Z(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var $=i.Reflection.namespace("BX.Crm");var ee=new WeakMap;var te=new WeakMap;var ie=new WeakMap;var ae=new WeakMap;var se=new WeakMap;var re=new WeakMap;var le=new WeakMap;var ne=new WeakMap;var be=new WeakMap;var ce=new WeakMap;var de=new WeakMap;var pe=new WeakSet;var ve=new WeakSet;var ue=new WeakSet;var oe=new WeakSet;var he=new WeakSet;var Ee=new WeakSet;var fe=new WeakSet;var He=new WeakSet;var Pe=new WeakSet;var Ie=new WeakSet;var Fe=new WeakSet;var Te=function(e){babelHelpers.inherits(t,e);function t(e){var a;babelHelpers.classCallCheck(this,t);if(!i.Type.isPlainObject(e)){throw'BX.Crm.EntityCounterPanel: The "options" argument must be object.'}var s=i.Type.isPlainObject(e.data)?e.data:{};var r=i.Type.isBoolean(e.withExcludeUsers)?e.withExcludeUsers:false;a=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,{target:BX(e.id),items:t.getCounterItems(s,e),multiselect:false,title:i.Loc.getMessage("NEW_CRM_COUNTER_TITLE_MY")}));q(babelHelpers.assertThisInitialized(a),Fe);q(babelHelpers.assertThisInitialized(a),Ie);q(babelHelpers.assertThisInitialized(a),Pe);q(babelHelpers.assertThisInitialized(a),He);q(babelHelpers.assertThisInitialized(a),fe);q(babelHelpers.assertThisInitialized(a),Ee);q(babelHelpers.assertThisInitialized(a),he);q(babelHelpers.assertThisInitialized(a),oe);q(babelHelpers.assertThisInitialized(a),ue);q(babelHelpers.assertThisInitialized(a),ve);q(babelHelpers.assertThisInitialized(a),pe);K(babelHelpers.assertThisInitialized(a),ee,{writable:true,value:void 0});K(babelHelpers.assertThisInitialized(a),te,{writable:true,value:void 0});K(babelHelpers.assertThisInitialized(a),ie,{writable:true,value:void 0});K(babelHelpers.assertThisInitialized(a),ae,{writable:true,value:void 0});K(babelHelpers.assertThisInitialized(a),se,{writable:true,value:void 0});K(babelHelpers.assertThisInitialized(a),re,{writable:true,value:void 0});K(babelHelpers.assertThisInitialized(a),le,{writable:true,value:void 0});K(babelHelpers.assertThisInitialized(a),ne,{writable:true,value:void 0});K(babelHelpers.assertThisInitialized(a),be,{writable:true,value:void 0});K(babelHelpers.assertThisInitialized(a),ce,{writable:true,value:void 0});K(babelHelpers.assertThisInitialized(a),de,{writable:true,value:void 0});babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(a),ee,e.id);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(a),te,e.entityTypeId?i.Text.toInteger(e.entityTypeId):0);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(a),ie,e.userId?i.Text.toInteger(e.userId):0);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(a),ae,i.Type.isStringFilled(e.userName)?e.userName:babelHelpers.classPrivateFieldGet(babelHelpers.assertThisInitialized(a),ie));babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(a),se,i.Type.isArray(e.codes)?e.codes:[]);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(a),re,s);if(BX.CrmEntityType.isDefined(babelHelpers.classPrivateFieldGet(babelHelpers.assertThisInitialized(a),te))){babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(a),le,new w({id:babelHelpers.classPrivateFieldGet(babelHelpers.assertThisInitialized(a),ee),entityTypeId:babelHelpers.classPrivateFieldGet(babelHelpers.assertThisInitialized(a),te),serviceUrl:i.Type.isString(e.serviceUrl)?e.serviceUrl:"",codes:babelHelpers.classPrivateFieldGet(babelHelpers.assertThisInitialized(a),se),extras:i.Type.isObject(e.extras)?e.extras:{},withExcludeUsers:r}))}babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(a),ne,new j);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(a),be,e.filterLastPresetId);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(a),ce,i.Type.isArray(e.filterLastPresetData)?JSON.parse(e.filterLastPresetData[0]):{presetId:null});babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(a),de,e.isNewCountersTourSeen);Z(babelHelpers.assertThisInitialized(a),pe,ye).call(babelHelpers.assertThisInitialized(a));return a}babelHelpers.createClass(t,[{key:"init",value:function e(){babelHelpers.get(babelHelpers.getPrototypeOf(t.prototype),"init",this).call(this);Z(this,He,Ne).call(this)}},{key:"getId",value:function e(){return babelHelpers.classPrivateFieldGet(this,ee)}}],[{key:"getCounterItems",value:function e(a,s){var r=i.Type.isBoolean(s.withExcludeUsers)?s.withExcludeUsers:false;var l=t.getMenuParentItemId(i.Type.isArray(s.codes)?s.codes:[]);var n=[];if(r&&!i.Type.isUndefined(l)){var b=0;n=Object.entries(a).map((function(e){var a=babelHelpers.slicedToArray(e,2),s=a[0],r=a[1];if(s.endsWith(t.EXCLUDE_USERS_CODE_SUFFIX)){var n=parseInt(r.VALUE,10);b+=n;var c=t.detectCounterItemColor(r.TYPE_NAME,n);return{id:s,title:i.Loc.getMessage("NEW_CRM_COUNTER_TYPE_OTHER_"+r.TYPE_NAME),value:n,color:c==="THEME"?"GRAY":c,parentId:l}}}),this);n=[{id:l,title:i.Loc.getMessage("NEW_CRM_COUNTER_TYPE_OTHER_TITLE"),value:b,color:"THEME"}].concat(n)}var c=Object.entries(a).map((function(e){var a=babelHelpers.slicedToArray(e,2),s=a[0],r=a[1];if(!s.endsWith(t.EXCLUDE_USERS_CODE_SUFFIX)){var l=parseInt(r.VALUE,10);return{id:s,title:i.Loc.getMessage("NEW_CRM_COUNTER_TYPE_"+r.TYPE_NAME),value:l,color:t.detectCounterItemColor(r.TYPE_NAME,l)}}}),this);return c.concat(n).filter((function(e){return i.Type.isObject(e)}))}},{key:"getMenuParentItemId",value:function e(i){return i.find((function(e){return e.endsWith(t.EXCLUDE_ALL_USERS_CODE_SUFFIX)}))}},{key:"detectCounterItemColor",value:function e(t,i){var a=[D.IDLE_NAME,D.OVERDUE_NAME,D.CURRENT_NAME].includes(t);var s=[D.INCOMING_CHANNEL_NAME].includes(t);return i>0?a?"DANGER":s?"SUCCESS":"THEME":"THEME"}}]);return t}(t.CounterPanel);function ye(){a.EventEmitter.subscribe("BX.UI.CounterPanel.Item:activate",Z(this,ve,Ce).bind(this));a.EventEmitter.subscribe("BX.UI.CounterPanel.Item:deactivate",Z(this,ue,_e).bind(this));a.EventEmitter.subscribe("BX.Main.Filter:apply",Z(this,oe,we).bind(this));a.EventEmitter.subscribe("BX.Crm.EntityCounterManager:onRecalculate",Z(this,he,Se).bind(this))}function Ce(e){var t=e.getData();if(!Z(this,Ee,ge).call(this,t)){return BX.PreventDefault(e)}}function _e(e){Z(this,Ie,Ge).call(this,e.getData());if(Z(this,Pe,Ue).call(this)&&babelHelpers.classPrivateFieldGet(this,ne).isActive()){var t=babelHelpers.classPrivateFieldGet(this,ne).getApi();if(babelHelpers.classPrivateFieldGet(this,ce).presetId==="tmp_filter"){t.setFields(babelHelpers.classPrivateFieldGet(this,ce).fields);t.apply()}else{t.setFilter({preset_id:babelHelpers.classPrivateFieldGet(this,ce).presetId})}}}function we(){if(babelHelpers.classPrivateFieldGet(this,ne).isActive()){babelHelpers.classPrivateFieldGet(this,ne).updateFields()}Z(this,He,Ne).call(this)}function Se(){var e=false;var t=BX.SidePanel.Instance.getTopSlider()===null;var s=babelHelpers.classPrivateFieldGet(this,le).getCounterData();var r=this.getItemById(Te.getMenuParentItemId(babelHelpers.classPrivateFieldGet(this,se)));for(var l in s){if(!s.hasOwnProperty(l)||!(l.indexOf("crm")===0&&s[l]>=0)||!babelHelpers.classPrivateFieldGet(this,re).hasOwnProperty(l)||i.Text.toNumber(babelHelpers.classPrivateFieldGet(this,re)[l].VALUE)===i.Text.toNumber(s[l])){continue}babelHelpers.classPrivateFieldGet(this,re)[l].VALUE=s[l];var n=this.getItemById(l);n.updateValue(i.Text.toNumber(s[l]));n.updateColor(Te.detectCounterItemColor(babelHelpers.classPrivateFieldGet(this,re)[l].TYPE_NAME,i.Text.toNumber(s[l])));e=e||true}if(r){r.updateValue(Z(this,Fe,Me).call(this))}if(babelHelpers.classPrivateFieldGet(this,de)==="N"&&e&&t){a.EventEmitter.emit(this,"BX.Crm.EntityCounterPanel::onShowNewCountersTour",{target:".ui-counter-panel__scope",stepId:"step-new-counters",delay:1500});babelHelpers.classPrivateFieldSet(this,de,"Y")}}function ge(e){var t=e.id.endsWith(Te.EXCLUDE_USERS_CODE_SUFFIX);var a=parseInt(babelHelpers.classPrivateFieldGet(this,re)[e.id].TYPE_ID,10);if(a>0){var s={userId:t?j.FILTER_OTHER_USERS:babelHelpers.classPrivateFieldGet(this,ie).toString(),userName:t?i.Loc.getMessage("NEW_CRM_COUNTER_TYPE_OTHER"):babelHelpers.classPrivateFieldGet(this,ae),counterTypeId:Z(this,fe,me).call(this,a),cancel:false};if(babelHelpers.classPrivateFieldGet(this,ne).isActive()){var r=babelHelpers.classPrivateFieldGet(this,ne).getFields(true);if(typeof r[j.COUNTER_TYPE_FIELD]==="undefined"){babelHelpers.classPrivateFieldGet(this,ce).presetId=babelHelpers.classPrivateFieldGet(this,ne).getApi().parent.getPreset().getCurrentPresetId();if(babelHelpers.classPrivateFieldGet(this,ce).presetId==="tmp_filter"){babelHelpers.classPrivateFieldGet(this,ce).fields=r}BX.userOptions.save("crm",babelHelpers.classPrivateFieldGet(this,be),"",JSON.stringify(babelHelpers.classPrivateFieldGet(this,ce)))}BX.onCustomEvent(window,"BX.CrmEntityCounterPanel:applyFilter",[this,s]);if(s.cancel){return false}}else{return false}}return true}function me(e){if(e===D.CURRENT){return{0:D.OVERDUE.toString(),1:D.PENDING.toString()}}return e.toString()}function Ne(){var e=this;if(!babelHelpers.classPrivateFieldGet(this,ne).isActive()){return}var t=this.getItemById(Te.getMenuParentItemId(babelHelpers.classPrivateFieldGet(this,se)));var i=false;Object.entries(babelHelpers.classPrivateFieldGet(this,re)).forEach((function(t){var a=babelHelpers.slicedToArray(t,2),s=a[0],r=a[1];var l=e.getItemById(s);var n=l.id.endsWith(Te.EXCLUDE_USERS_CODE_SUFFIX);if(babelHelpers.classPrivateFieldGet(e,ne).isFiltered(babelHelpers.classPrivateFieldGet(e,ie),parseInt(r.TYPE_ID,10),babelHelpers.classPrivateFieldGet(e,te),n)){l.activate(false);if(n){i=true}}else{l.deactivate(false)}if(l.value!==l.counter.getValue()){l.updateValue(l.value)}}));if(t){i?t.activate(false):t.deactivate(false)}}function Ue(){return this.getItems().every((function(e){return!e.isActive}))}function Ge(e){var t=this;if(e.hasParentId()){var i=this.getItemById(Te.getMenuParentItemId(babelHelpers.classPrivateFieldGet(this,se)));i.deactivate(false);return}if(e.parent){e.getItems().forEach((function(e){var i=t.getItemById(e);if(i.isActive){i.deactivate(false)}}))}}function Me(){var e=0;this.getItems().forEach((function(t){if(t.hasParentId()){e+=t.value}}));return e}babelHelpers.defineProperty(Te,"EXCLUDE_USERS_CODE_SUFFIX","excl");babelHelpers.defineProperty(Te,"EXCLUDE_ALL_USERS_CODE_SUFFIX","all_excl");$.EntityCounterPanel=Te})(this.BX.Crm=this.BX.Crm||{},BX.UI,BX,BX.Event);
//# sourceMappingURL=script.map.js