{"version":3,"file":"script.js","sources":["src/menu.js"],"sourcesContent":["import {Type, Event, Runtime, ajax} from 'main.core';\n\nclass WorkgroupSliderMenu\n{\n\tconstructor()\n\t{\n\t\tthis.menuNode = null;\n\t\tthis.pageBodyStyles = {};\n\t\tthis.signedParameters = '';\n\t}\n\n\tinit(params)\n\t{\n\t\tthis.menuNode = (Type.isStringFilled(params.menuNodeId) ? document.getElementById(params.menuNodeId) : null);\n\t\tthis.pageBodyStyles = (Type.isPlainObject(params.pageBodyStyles) ? params.pageBodyStyles : {});\n\t\tthis.signedParameters = (Type.isStringFilled(params.signedParameters) ? params.signedParameters : '');\n\n\t\tif (Type.isDomNode(this.menuNode))\n\t\t{\n\t\t\tthis.menuItems = Array.prototype.slice.call(this.menuNode.querySelectorAll('a'));\n\n\t\t\t(this.menuItems || []).forEach((item) => {\n\t\t\t\tEvent.bind(item, 'click', (event) => {\n\t\t\t\t\tthis.processClick(item, event);\n\t\t\t\t\treturn event.preventDefault();\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}\n\n\tprocessClick(item)\n\t{\n\t\tconst url = item.getAttribute('data-url');\n\t\tconst action = item.getAttribute('data-action');\n\n\t\tif (Type.isStringFilled(url))\n\t\t{\n\t\t\twindow.location.href = url;\n\t\t}\n\t\telse if (Type.isStringFilled(action))\n\t\t{\n\t\t\tswitch (action)\n\t\t\t{\n\t\t\t\tcase 'card':\n\t\t\t\tcase 'edit':\n\t\t\t\tcase 'copy':\n\t\t\t\tcase 'delete':\n\t\t\t\tcase 'leave':\n\t\t\t\t\tthis.changePage(action);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'theme':\n\t\t\t\t\tBX.Intranet.Bitrix24.ThemePicker.Singleton.showDialog(false);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'join':\n\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t}\n\t\t}\n\t}\n\n\tchangePage(action)\n\t{\n\t\tlet componentName = '';\n\t\tconst componentParams = {\n\t\t\tcomponentTemplate: '',\n\t\t};\n\n\t\tswitch (action)\n\t\t{\n\t\t\tcase 'card':\n\t\t\t\tcomponentName = 'bitrix:socialnetwork.group';\n\t\t\t\tcomponentParams.componentTemplate = 'card';\n\t\t\t\tbreak;\n\t\t\tcase 'edit':\n\t\t\t\tcomponentName = 'bitrix:socialnetwork.group_create.ex';\n\t\t\t\tcomponentParams.TAB = 'edit';\n\t\t\t\tbreak;\n\t\t\tcase 'copy':\n\t\t\t\tcomponentName = 'bitrix:socialnetwork.group_copy';\n\t\t\t\tbreak;\n\t\t\tcase 'delete':\n\t\t\t\tcomponentName = 'bitrix:socialnetwork.group_delete';\n\t\t\t\tbreak;\n\t\t\tcase 'leave':\n\t\t\t\tcomponentName = 'bitrix:socialnetwork.user_leave_group';\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t}\n\n\t\tif (!Type.isStringFilled(componentName))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tajax.runComponentAction(componentName, 'getComponent', {\n\t\t\tmode: 'ajax',\n\t\t\tsignedParameters: this.signedParameters,\n\t\t\tdata: {\n\t\t\t\tparams: componentParams,\n\t\t\t}\n\t\t}).then((response) => {\n\n\t\t\tif (\n\t\t\t\t!Type.isPlainObject(response.data)\n\t\t\t\t|| !Type.isStringFilled(response.data.html)\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// change location address\n\n\t\t\tif (document.getElementById('workarea-content'))\n\t\t\t{\n\t\t\t\tRuntime.html(document.getElementById('workarea-content'), response.data.html).then(() => {\n\t\t\t\t\tObject.entries(this.pageBodyStyles).forEach(([key, style]) => {\n\t\t\t\t\t\tdocument.body.classList.remove(style);\n\t\t\t\t\t});\n\n\t\t\t\t\tif (Type.isStringFilled(this.pageBodyStyles[action]))\n\t\t\t\t\t{\n\t\t\t\t\t\tdocument.body.classList.add(this.pageBodyStyles[action]);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\tType.isPlainObject(response.data.componentResult)\n\t\t\t\t&& Type.isStringFilled(response.data.componentResult.PageTitle)\n\t\t\t\t&& document.getElementById('pagetitle')\n\t\t\t)\n\t\t\t{\n\t\t\t\tconst titleContainer = document.getElementById('pagetitle').querySelector('.ui-side-panel-wrap-title-name');\n\t\t\t\tif (titleContainer)\n\t\t\t\t{\n\t\t\t\t\tRuntime.html(titleContainer, response.data.componentResult.PageTitle);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// change Body class\n\n\n\t\t}).catch((response) => {\nconsole.log('failed');\nconsole.dir(response);\n\n\t\t\t// process error\n\t\t});\n\t}\n}\n\nexport {\n\tWorkgroupSliderMenu,\n}"],"names":["WorkgroupSliderMenu","menuNode","pageBodyStyles","signedParameters","params","Type","isStringFilled","menuNodeId","document","getElementById","isPlainObject","isDomNode","menuItems","Array","prototype","slice","call","querySelectorAll","forEach","item","Event","bind","event","processClick","preventDefault","url","getAttribute","action","window","location","href","changePage","BX","Intranet","Bitrix24","ThemePicker","Singleton","showDialog","componentName","componentParams","componentTemplate","TAB","ajax","runComponentAction","mode","data","then","response","html","Runtime","Object","entries","key","style","body","classList","remove","add","componentResult","PageTitle","titleContainer","querySelector","catch","console","log","dir"],"mappings":"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"}