function crmImportAjax(t){BX.ajax({url:t,method:"POST",dataType:"json",data:{},onsuccess:function(r){r["import"]=parseInt(r["import"]);r["duplicate"]=parseInt(r["duplicate"]);r["error"]=parseInt(r["error"]);if(r["error"]>0){BX("crm_import_error").style.display="block";BX("crm_import_errata").style.display="block";BX("crm_import_example").style.display="block";for(var e in r["error_data"]){if(!r["error_data"].hasOwnProperty(e)){continue}var i=r["error_data"][e];BX("crm_import_example").appendChild(BX.create("DIV",{attrs:{className:"error_text"},html:i["message"]}));BX("crm_import_example").appendChild(BX.create("CODE",{text:i["data"]}))}BX("crm_import_entity_error").innerHTML=parseInt(BX("crm_import_entity_error").innerHTML)+r["error"];BX("crm_import_entity_errata").href=r["errata_url"]}if(r["duplicate"]>0){BX("crm_import_entity_duplicate").innerHTML=parseInt(BX("crm_import_entity_duplicate").innerHTML)+r["duplicate"];if(BX.type.isNotEmptyString(r["duplicate_url"])){BX("crm_import_duplicate_file_url").href=r["duplicate_url"];BX("crm_import_duplicate_file_wrapper").style.display="block"}}if(r["import"]>0||r["error"]>0||r["duplicate"]>0){if(r["import"]>0){BX("crm_import_entity").innerHTML=parseInt(BX("crm_import_entity").innerHTML)+r["import"]}crmImportAjax(t)}else{BX("crm_import_entity_progress").innerHTML="";BX("crm_import_done").disabled=false;BX("crm_import_again").hidden=false}},onfailure:function(t){BX("crm_import_entity_progress").innerHTML="";BX("crm_import_done").disabled=false;BX("crm_import_again").hidden=false}});return false}if(typeof BX.CrmVCardImportConfig==="undefined"){BX.CrmVCardImportConfig=function(){this._id="";this._settings={};this._formId="";this._encodingSelector=null;this._dupControlTypeDescr=null;this._dupControlTypes=null};BX.CrmVCardImportConfig.prototype={initialize:function(t,r){this._id=BX.type.isNotEmptyString(t)?t:"crm_vcard_import_config";this._settings=r?r:{};this._formId=this.getSetting("formId");this._encodingSelector=BX(this.getSetting("encodingSelectorId"));var e=this.getSetting("dupControlPrefix");this._dupControlTypes=this.getSetting("dupControlTypes",{});for(var i in this._dupControlTypes){if(!this._dupControlTypes.hasOwnProperty(i)){continue}var o=BX(e+i.toLowerCase());if(o){BX.bind(o,"change",BX.delegate(this._onDupControlTypeChange,this))}}this._dupControlTypeDescr=BX(this.getSetting("dupControlTypeDescrId"))},getSetting:function(t,r){return this._settings.hasOwnProperty(t)?this._settings[t]:r},setStep:function(step){var tabs=["tab_1","tab_2","tab_3"];tabs.splice(step-1,1);var bxForm=eval("bxForm_"+this._formId);bxForm.SelectTab("tab_"+step,true);for(var i=0;i<tabs.length;i++){var tabId=tabs[i];bxForm.ShowDisabledTab(tabId,true);BX("tab_cont_"+tabId).className="bx-tab-container-disabled"}},_onDupControlTypeChange:function(t){if(!t){t=window.event}var r=BX.getEventTarget(t);if(r&&BX.type.isNotEmptyString(this._dupControlTypes[r.value])&&this._dupControlTypeDescr){this._dupControlTypeDescr.innerHTML=BX.util.htmlspecialchars(this._dupControlTypes[r.value])}}};BX.CrmVCardImportConfig.create=function(t,r){var e=new BX.CrmVCardImportConfig;e.initialize(t,r);return e}}
//# sourceMappingURL=script.map.js