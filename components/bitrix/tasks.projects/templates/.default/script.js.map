{"version":3,"file":"script.js","sources":["../../../../../../../main/install/components/bitrix/main.ui.grid/templates/.default/src/js/cell-action-state.js","src/actions-controller.js","src/filter/filter.js","src/members-popup.js","src/scrum-members-popup.js","src/grid.js","src/pull-controller.js","src/tourguide/first-project-creation-tour-guide.js","src/tourguide/first-scrum-creation-tour-guide.js","src/tourguide/tour-guide-controller.js","src/controller.js"],"sourcesContent":["import {Reflection} from 'main.core';\n\n/**\n * @memberOf BX.Grid\n */\nexport class CellActionState\n{\n\tstatic SHOW_BY_HOVER = 'main-grid-cell-content-action-by-hover';\n\tstatic ACTIVE = 'main-grid-cell-content-action-active';\n}\n\nconst namespace = Reflection.namespace('BX.Grid');\nnamespace.CellActionState = CellActionState;","import {Dom, Loc, Runtime} from 'main.core';\nimport {BaseEvent, EventEmitter} from 'main.core.events';\nimport {CellActionState} from '../../../../../../../../main/install/components/bitrix/main.ui.grid/templates/.default/src/js/cell-action-state';\n\nexport class ActionsController\n{\n\tstatic options;\n\n\tstatic setOptions(options)\n\t{\n\t\tActionsController.options = options;\n\t}\n\n\tstatic setActionsPanel(actionsPanel)\n\t{\n\t\tActionsController.actionsPanel = actionsPanel;\n\t}\n\n\tstatic doAction(action, groupId, data = [])\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tBX.ajax.runComponentAction('bitrix:tasks.projects', 'processAction', {\n\t\t\t\tmode: 'class',\n\t\t\t\tdata: {\n\t\t\t\t\taction,\n\t\t\t\t\tdata,\n\t\t\t\t\tids: ActionsController.getActionIds(groupId) || [],\n\t\t\t\t},\n\t\t\t\tsignedParameters: ActionsController.options.signedParameters,\n\t\t\t}).then(\n\t\t\t\t() => resolve(),\n\t\t\t\t() => reject()\n\t\t\t).catch(\n\t\t\t\t() => reject()\n\t\t\t);\n\n\t\t\tActionsController.hideActionsPanel();\n\t\t\tActionsController.unselectRows();\n\t\t});\n\t}\n\n\tstatic getActionIds(id)\n\t{\n\t\tif (id !== undefined)\n\t\t{\n\t\t\treturn [id];\n\t\t}\n\n\t\tconst selected = ActionsController.getSelectedRows();\n\t\tif (selected.length === 0)\n\t\t{\n\t\t\treturn [];\n\t\t}\n\n\t\treturn selected.map((row) => {\n\t\t\treturn row.getDataset().id;\n\t\t});\n\t}\n\n\tstatic getSelectedRows()\n\t{\n\t\treturn ActionsController.getGridInstance().getRows().getSelected();\n\t}\n\n\tstatic sendJoinRequest(button)\n\t{\n\t\tif (Dom.hasClass(button, 'ui-btn-clock'))\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tDom.addClass(button, 'ui-btn-clock');\n\n\t\tBX.ajax({\n\t\t\turl: button.getAttribute('bx-request-url'),\n\t\t\tmethod: 'POST',\n\t\t\tdataType: 'json',\n\t\t\tdata: {\n\t\t\t\tajax_request: 'Y',\n\t\t\t\tsave: 'Y',\n\t\t\t\tsessid: BX.bitrix_sessid(),\n\t\t\t},\n\t\t\tonsuccess: () => Dom.removeClass(button, 'ui-btn-clock'),\n\t\t\tonfailure: () => Dom.removeClass(button, 'ui-btn-clock'),\n\t\t});\n\n\t\tActionsController.hideActionsPanel();\n\t\tActionsController.unselectRows();\n\t}\n\n\tstatic sendAcceptRequest(userGroupRelationId, url)\n\t{\n\t\tBX.ajax({\n\t\t\turl: url,\n\t\t\tmethod: 'POST',\n\t\t\tdataType: 'json',\n\t\t\tdata: {\n\t\t\t\taction: 'accept',\n\t\t\t\tmax_count: 1,\n\t\t\t\tchecked_0: 'Y',\n\t\t\t\ttype_0: 'INVITE_GROUP',\n\t\t\t\tid_0: userGroupRelationId,\n\t\t\t\ttype: 'in',\n\t\t\t\tajax_request: 'Y',\n\t\t\t\tsessid: BX.bitrix_sessid(),\n\t\t\t},\n\t\t\tonsuccess: result => {},\n\t\t\tonfailure: result => console.log(result),\n\t\t});\n\n\t\tActionsController.hideActionsPanel();\n\t\tActionsController.unselectRows();\n\t}\n\n\tstatic sendDenyRequest(userGroupRelationId, url)\n\t{\n\t\tActionsController.sendCancelRequest(userGroupRelationId, url);\n\t}\n\n\tstatic sendCancelRequest(userGroupRelationId, url)\n\t{\n\t\tBX.ajax({\n\t\t\turl: url,\n\t\t\tmethod: 'POST',\n\t\t\tdataType: 'json',\n\t\t\tdata: {\n\t\t\t\taction: 'reject',\n\t\t\t\tmax_count: 1,\n\t\t\t\tchecked_0: 'Y',\n\t\t\t\ttype_0: 'INVITE_GROUP',\n\t\t\t\tid_0: userGroupRelationId,\n\t\t\t\ttype: 'out',\n\t\t\t\tajax_request: 'Y',\n\t\t\t\tsessid: BX.bitrix_sessid(),\n\t\t\t},\n\t\t\tonsuccess: result => {},\n\t\t\tonfailure: result => console.log(result),\n\t\t});\n\n\t\tActionsController.hideActionsPanel();\n\t\tActionsController.unselectRows();\n\t}\n\n\tstatic hideActionsPanel()\n\t{\n\t\tActionsController.options.actionsPanel.hidePanel();\n\t}\n\n\tstatic unselectRows()\n\t{\n\t\tActionsController.getGridInstance().getRows().unselectAll();\n\t}\n\n\tstatic getGridInstance()\n\t{\n\t\treturn BX.Main.gridManager.getById(ActionsController.options.gridId).instance;\n\t}\n\n\tstatic changePin(groupId, event: BaseEvent)\n\t{\n\t\tconst {button} = event.getData();\n\n\t\tif (Dom.hasClass(button, CellActionState.ACTIVE))\n\t\t{\n\t\t\tActionsController.doAction('unpin', groupId).then(() => {\n\t\t\t\tDom.removeClass(button, CellActionState.ACTIVE);\n\t\t\t\tDom.addClass(button, CellActionState.SHOW_BY_HOVER);\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tActionsController.doAction('pin', groupId).then(() => {\n\t\t\t\tDom.addClass(button, CellActionState.ACTIVE);\n\t\t\t\tDom.removeClass(button, CellActionState.SHOW_BY_HOVER);\n\t\t\t});\n\t\t}\n\t}\n\n\tstatic onTagClick(field)\n\t{\n\t\tconst {filter} = ActionsController.options;\n\t\tfilter.toggleByField(field);\n\t}\n\n\tstatic onTagAddClick(groupId, event)\n\t{\n\t\tRuntime.loadExtension('ui.entity-selector').then(exports => {\n\t\t\tconst onRowUpdate = (event: BaseEvent) => {\n\t\t\t\tconst {id} = event.getData();\n\t\t\t\tif (id === groupId)\n\t\t\t\t{\n\t\t\t\t\tconst row = ActionsController.getGridInstance().getRows().getById(id);\n\t\t\t\t\tconst button = row.getCellById('TAGS').querySelector('.main-grid-tag-add');\n\n\t\t\t\t\tdialog.setTargetNode(button);\n\t\t\t\t}\n\t\t\t};\n\t\t\tconst onRowRemove = (event: BaseEvent) => {\n\t\t\t\tconst {id} = event.getData();\n\t\t\t\tif (id === groupId)\n\t\t\t\t{\n\t\t\t\t\tdialog.hide();\n\t\t\t\t}\n\t\t\t};\n\t\t\tconst onTagsChange = (event: BaseEvent) => {\n\t\t\t\tconst dialog = event.getTarget();\n\t\t\t\tconst tags = dialog.getSelectedItems().map(item => item.getId());\n\n\t\t\t\tvoid ActionsController.doAction('update', groupId, {KEYWORDS: tags.join(',')});\n\t\t\t};\n\t\t\tconst {Dialog} = exports;\n\t\t\tconst dialog = new Dialog({\n\t\t\t\ttargetNode: event.getData().button,\n\t\t\t\tenableSearch: true,\n\t\t\t\twidth: 350,\n\t\t\t\theight: 400,\n\t\t\t\tmultiple: true,\n\t\t\t\tdropdownMode: true,\n\t\t\t\tcompactView: true,\n\t\t\t\tcontext: 'PROJECT_TAG',\n\t\t\t\tentities: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'project-tag',\n\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\tgroupId,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\tsearchOptions: {\n\t\t\t\t\tallowCreateItem: true,\n\t\t\t\t\tfooterOptions: {\n\t\t\t\t\t\tlabel: Loc.getMessage('TASKS_PROJECTS_ENTITY_SELECTOR_TAG_SEARCH_FOOTER_ADD'),\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tfooter: BX.SocialNetwork.EntitySelector.Footer,\n\t\t\t\tfooterOptions: {\n\t\t\t\t\ttagCreationLabel: true,\n\t\t\t\t},\n\t\t\t\tevents: {\n\t\t\t\t\t'onShow': () => {\n\t\t\t\t\t\tEventEmitter.subscribe('Tasks.Projects.Grid:RowUpdate', onRowUpdate);\n\t\t\t\t\t\tEventEmitter.subscribe('Tasks.Projects.Grid:RowRemove', onRowRemove);\n\t\t\t\t\t},\n\t\t\t\t\t'onHide': () => {\n\t\t\t\t\t\tEventEmitter.unsubscribe('Tasks.Projects.Grid:RowUpdate', onRowUpdate);\n\t\t\t\t\t\tEventEmitter.unsubscribe('Tasks.Projects.Grid:RowRemove', onRowRemove);\n\t\t\t\t\t},\n\t\t\t\t\t'Search:onItemCreateAsync': (event: BaseEvent) => {\n\t\t\t\t\t\treturn new Promise((resolve) => {\n\t\t\t\t\t\t\tconst {searchQuery} = event.getData();\n\t\t\t\t\t\t\tconst name = searchQuery.getQuery().toLowerCase();\n\t\t\t\t\t\t\tconst dialog: Dialog = event.getTarget();\n\n\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\tconst item = dialog.addItem({\n\t\t\t\t\t\t\t\t\tid: name,\n\t\t\t\t\t\t\t\t\tentityId: 'project-tag',\n\t\t\t\t\t\t\t\t\ttitle: name,\n\t\t\t\t\t\t\t\t\ttabs: 'all',\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tif (item)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\titem.select();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t\t}, 1000);\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\t'Item:onSelect': onTagsChange,\n\t\t\t\t\t'Item:onDeselect': onTagsChange,\n\t\t\t\t},\n\t\t\t});\n\t\t\tdialog.show();\n\t\t});\n\t}\n}","import {Type} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\n\nexport class Filter\n{\n\tconstructor(options)\n\t{\n\t\tthis.filter = BX.Main.filterManager.getById(options.filterId);\n\n\t\tthis.init();\n\t\tthis.bindEvents();\n\t}\n\n\tinit()\n\t{\n\t\tthis.updateFields();\n\t}\n\n\tbindEvents()\n\t{\n\t\tEventEmitter.subscribe('BX.Main.Filter:apply', this.onFilterApply.bind(this));\n\t\tEventEmitter.subscribe('Tasks.Toolbar:onItem', this.onCounterClick.bind(this));\n\t}\n\n\tonFilterApply()\n\t{\n\t\tthis.updateFields();\n\t}\n\n\tupdateFields()\n\t{\n\t\tthis.fields = this.filter.getFilterFieldsValues();\n\t}\n\n\tonCounterClick(event)\n\t{\n\t\tconst data = event.getData();\n\n\t\tif (data.counter && data.counter.filter)\n\t\t{\n\t\t\tthis.toggleByField({[data.counter.filterField]: data.counter.filterValue});\n\t\t}\n\t}\n\n\tisFilteredByField(field)\n\t{\n\t\tif (!Object.keys(this.fields).includes(field))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tif (Type.isArray(this.fields[field]))\n\t\t{\n\t\t\treturn this.fields[field].length > 0;\n\t\t}\n\n\t\treturn this.fields[field] !== '';\n\t}\n\n\tisFilteredByFieldValue(field, value)\n\t{\n\t\treturn this.isFilteredByField(field) && this.fields[field] === value;\n\t}\n\n\ttoggleByField(field)\n\t{\n\t\tconst name = Object.keys(field)[0];\n\t\tconst value = field[name];\n\n\t\tif (!this.isFilteredByFieldValue(name, value))\n\t\t{\n\t\t\tthis.filter.getApi().extendFilter({[name]: value});\n\t\t\treturn;\n\t\t}\n\n\t\tthis.filter.getFilterFields().forEach((field) => {\n\t\t\tif (field.getAttribute('data-name') === name)\n\t\t\t{\n\t\t\t\tthis.filter.getFields().deleteField(field);\n\t\t\t}\n\t\t});\n\n\t\tthis.filter.getSearch().apply();\n\t}\n}","import {Dom, Event, Loc, Tag, Type} from 'main.core';\nimport {Loader} from 'main.loader';\nimport {PopupWindowManager} from 'main.popup';\n\nexport class MembersPopup\n{\n\tconstructor(options)\n\t{\n\t\tthis.signedParameters = options.signedParameters;\n\t}\n\n\tshow(groupId, bindNode, type = 'all')\n\t{\n\t\tif (this.isPopupShown)\n\t\t{\n\t\t\tthis.popup.destroy();\n\t\t}\n\n\t\tthis.groupId = groupId;\n\n\t\tthis.resetPopupData();\n\t\tthis.changeType(type, false);\n\n\t\tthis.popup = PopupWindowManager.create({\n\t\t\tid: 'projects-members-popup-menu',\n\t\t\tclassName: 'tasks-projects-members-popup',\n\t\t\tbindElement: bindNode,\n\t\t\tautoHide: true,\n\t\t\tcloseByEsc: true,\n\t\t\tlightShadow: true,\n\t\t\tbindOptions: {\n\t\t\t\tposition: 'bottom',\n\t\t\t},\n\t\t\tanimationOptions: {\n\t\t\t\tshow: {\n\t\t\t\t\ttype: 'opacity-transform',\n\t\t\t\t},\n\t\t\t\tclose: {\n\t\t\t\t\ttype: 'opacity',\n\t\t\t\t},\n\t\t\t},\n\t\t\tevents: {\n\t\t\t\tonPopupDestroy: () => {\n\t\t\t\t\tthis.loader = null;\n\t\t\t\t\tthis.isPopupShown = false;\n\t\t\t\t},\n\t\t\t\tonPopupClose: () => {\n\t\t\t\t\tthis.popup.destroy();\n\t\t\t\t},\n\t\t\t\tonAfterPopupShow: (popup) => {\n\t\t\t\t\tpopup.contentContainer.appendChild(this.renderContainer());\n\n\t\t\t\t\tthis.showLoader();\n\t\t\t\t\tthis.showUsers(groupId, type);\n\n\t\t\t\t\tthis.isPopupShown = true;\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t\tthis.popupScroll(groupId, type);\n\t\tthis.popup.show();\n\t}\n\n\trenderContainer()\n\t{\n\t\treturn Tag.render`\n\t\t\t<span class=\"tasks-projects-members-popup-container\">\n\t\t\t\t<span class=\"tasks-projects-members-popup-head\">\n\t\t\t\t\t${this.popupData.all.tab}\n\t\t\t\t\t${this.popupData.heads.tab}\n\t\t\t\t\t${this.popupData.members.tab}\n\t\t\t\t</span>\n\t\t\t\t<span class=\"tasks-projects-members-popup-body\">\n\t\t\t\t\t<div class=\"tasks-projects-members-popup-content\">\n\t\t\t\t\t\t<div class=\"tasks-projects-members-popup-content-box\">\n\t\t\t\t\t\t\t${this.getCurrentPopupData().innerContainer}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</span>\n\t\t\t</span>\n\t\t`;\n\t}\n\n\tpopupScroll(groupId, type)\n\t{\n\t\tif (!BX.type.isDomNode(this.getCurrentPopupData().innerContainer))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tEvent.bind(this.getCurrentPopupData().innerContainer, 'scroll', (event) => {\n\t\t\tconst area = event.target;\n\t\t\tif (area.scrollTop > (area.scrollHeight - area.offsetHeight) / 1.5)\n\t\t\t{\n\t\t\t\tthis.showUsers(groupId, type);\n\t\t\t\tEvent.unbindAll(this.getCurrentPopupData().innerContainer);\n\t\t\t}\n\t\t});\n\t};\n\n\tshowUsers(groupId, type)\n\t{\n\t\tBX.ajax.runComponentAction('bitrix:tasks.projects', 'getPopupMembers', {\n\t\t\tmode: 'class',\n\t\t\tdata: {\n\t\t\t\tgroupId,\n\t\t\t\ttype,\n\t\t\t\tpage: this.getCurrentPopupData().currentPage,\n\t\t\t},\n\t\t\tsignedParameters: this.signedParameters,\n\t\t}).then(\n\t\t\t(response) => {\n\t\t\t\tif (this.groupId !== groupId || this.currentType !== type)\n\t\t\t\t{\n\t\t\t\t\tthis.hideLoader();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (response.data.length > 0)\n\t\t\t\t{\n\t\t\t\t\tthis.renderUsers(response.data);\n\t\t\t\t\tthis.popupScroll(groupId, this.currentType);\n\t\t\t\t}\n\t\t\t\telse if (!this.getCurrentPopupData().innerContainer.hasChildNodes())\n\t\t\t\t{\n\t\t\t\t\tthis.getCurrentPopupData().innerContainer.innerText = Loc.getMessage('TASKS_PROJECTS_MEMBERS_POPUP_EMPTY');\n\t\t\t\t}\n\t\t\t\tthis.getCurrentPopupData().currentPage++;\n\t\t\t\tthis.hideLoader();\n\t\t\t},\n\t\t\t() => this.hideLoader()\n\t\t);\n\t}\n\n\trenderUsers(users)\n\t{\n\t\tObject.values(users).forEach((user) => {\n\t\t\tif (this.getCurrentPopupData().renderedUsers.indexOf(user.ID) >= 0)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.getCurrentPopupData().renderedUsers.push(user.ID);\n\n\t\t\tthis.getCurrentPopupData().innerContainer.appendChild(\n\t\t\t\tTag.render`\n\t\t\t\t\t<a class=\"tasks-projects-members-popup-item\" href=\"${user['HREF']}\" target=\"_blank\">\n\t\t\t\t\t\t<span class=\"tasks-projects-members-popup-avatar-new\">\n\t\t\t\t\t\t\t${this.getAvatar(user)}\n\t\t\t\t\t\t\t<span class=\"tasks-projects-members-popup-avatar-status-icon\"></span>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span class=\"tasks-projects-members-popup-name\">${user['FORMATTED_NAME']}</span>\n\t\t\t\t\t</a>\n\t\t\t\t`\n\t\t\t);\n\t\t})\n\t}\n\n\tgetAvatar(user)\n\t{\n\t\tif (Type.isStringFilled(user['PHOTO']))\n\t\t{\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"ui-icon ui-icon-common-user tasks-projects-members-popup-avatar-img\">\n\t\t\t\t\t<i style=\"background-image: url('${user['PHOTO']}')\"></i>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"ui-icon ui-icon-common-user tasks-projects-members-popup-avatar-img\"><i></i></div>\n\t\t`;\n\t}\n\n\tshowLoader()\n\t{\n\t\tif (!this.loader)\n\t\t{\n\t\t\tthis.loader = new Loader({\n\t\t\t\ttarget: this.popup.getPopupContainer().querySelector('.tasks-projects-members-popup-content'),\n\t\t\t\tsize: 40,\n\t\t\t});\n\t\t}\n\t\tvoid this.loader.show();\n\t}\n\n\thideLoader()\n\t{\n\t\tif (this.loader)\n\t\t{\n\t\t\tvoid this.loader.hide();\n\t\t\tthis.loader = null;\n\t\t}\n\t}\n\n\tchangeType(newType, loadUsers = true)\n\t{\n\t\tconst oldType = this.currentType;\n\n\t\tthis.currentType = newType;\n\n\t\tObject.values(this.popupData).forEach((item) => {\n\t\t\tDom.removeClass(item.tab, 'tasks-projects-members-popup-head-item-current');\n\t\t});\n\t\tDom.addClass(this.getCurrentPopupData().tab, 'tasks-projects-members-popup-head-item-current');\n\n\t\tif (oldType)\n\t\t{\n\t\t\tDom.replace(this.popupData[oldType].innerContainer, this.getCurrentPopupData().innerContainer);\n\t\t}\n\n\t\tif (loadUsers && this.getCurrentPopupData().currentPage === 1)\n\t\t{\n\t\t\tthis.showLoader();\n\t\t\tthis.showUsers(this.groupId, newType);\n\t\t}\n\t}\n\n\tresetPopupData()\n\t{\n\t\tthis.popupData = {\n\t\t\tall: {\n\t\t\t\tcurrentPage: 1,\n\t\t\t\trenderedUsers: [],\n\t\t\t\ttab: Tag.render`\n\t\t\t\t\t<span class=\"tasks-projects-members-popup-head-item\" onclick=\"${this.changeType.bind(this, 'all')}\">\n\t\t\t\t\t\t<span class=\"tasks-projects-members-popup-head-text\">\n\t\t\t\t\t\t\t${Loc.getMessage('TASKS_PROJECTS_MEMBERS_POPUP_TITLE_ALL')}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</span>\n\t\t\t\t`,\n\t\t\t\tinnerContainer: Tag.render`<div class=\"tasks-projects-members-popup-inner\"></div>`,\n\t\t\t},\n\t\t\theads: {\n\t\t\t\tcurrentPage: 1,\n\t\t\t\trenderedUsers: [],\n\t\t\t\ttab: Tag.render`\n\t\t\t\t\t<span class=\"tasks-projects-members-popup-head-item\" onclick=\"${this.changeType.bind(this, 'heads')}\">\n\t\t\t\t\t\t<span class=\"tasks-projects-members-popup-head-text\">\n\t\t\t\t\t\t\t${Loc.getMessage('TASKS_PROJECTS_MEMBERS_POPUP_TITLE_HEADS')}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</span>\n\t\t\t\t`,\n\t\t\t\tinnerContainer: Tag.render`<div class=\"tasks-projects-members-popup-inner\"></div>`,\n\t\t\t},\n\t\t\tmembers: {\n\t\t\t\tcurrentPage: 1,\n\t\t\t\trenderedUsers: [],\n\t\t\t\ttab: Tag.render`\n\t\t\t\t\t<span class=\"tasks-projects-members-popup-head-item\" onclick=\"${this.changeType.bind(this, 'members')}\">\n\t\t\t\t\t\t<span class=\"tasks-projects-members-popup-head-text\">\n\t\t\t\t\t\t\t${Loc.getMessage('TASKS_PROJECTS_MEMBERS_POPUP_TITLE_MEMBERS')}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</span>\n\t\t\t\t`,\n\t\t\t\tinnerContainer: Tag.render`<div class=\"tasks-projects-members-popup-inner\"></div>`,\n\t\t\t},\n\t\t};\n\t}\n\n\tgetCurrentPopupData()\n\t{\n\t\treturn this.popupData[this.currentType];\n\t}\n}","import {Loc, Tag, Type} from 'main.core';\nimport {MembersPopup} from './members-popup';\n\nexport class ScrumMembersPopup extends MembersPopup\n{\n\trenderContainer()\n\t{\n\t\treturn Tag.render`\n\t\t\t<span class=\"tasks-projects-members-popup-container\">\n\t\t\t\t<span class=\"tasks-projects-members-popup-head\">\n\t\t\t\t\t${this.popupData.all.tab}\n\t\t\t\t\t${this.popupData.scrumTeam.tab}\n\t\t\t\t\t${this.popupData.members.tab}\n\t\t\t\t</span>\n\t\t\t\t<span class=\"tasks-projects-members-popup-body\">\n\t\t\t\t\t<div class=\"tasks-projects-members-popup-content\">\n\t\t\t\t\t\t<div class=\"tasks-projects-members-popup-content-box\">\n\t\t\t\t\t\t\t${this.getCurrentPopupData().innerContainer}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</span>\n\t\t\t</span>\n\t\t`;\n\t}\n\n\tresetPopupData()\n\t{\n\t\tthis.popupData = {\n\t\t\tall: {\n\t\t\t\tcurrentPage: 1,\n\t\t\t\trenderedUsers: [],\n\t\t\t\ttab: Tag.render`\n\t\t\t\t\t<span\n\t\t\t\t\t\tclass=\"tasks-projects-members-popup-head-item\"\n\t\t\t\t\t\tonclick=\"${this.changeType.bind(this, 'all')}\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<span class=\"tasks-projects-members-popup-head-text\">\n\t\t\t\t\t\t\t${Loc.getMessage('TASKS_PROJECTS_MEMBERS_POPUP_TITLE_ALL')}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</span>\n\t\t\t\t`,\n\t\t\t\tinnerContainer: Tag.render`<div class=\"tasks-projects-members-popup-inner\"></div>`,\n\t\t\t},\n\t\t\tscrumTeam: {\n\t\t\t\tcurrentPage: 1,\n\t\t\t\trenderedUsers: [],\n\t\t\t\ttab: Tag.render`\n\t\t\t\t\t<span\n\t\t\t\t\t\tclass=\"tasks-projects-members-popup-head-item\"\n\t\t\t\t\t\tonclick=\"${this.changeType.bind(this, 'scrumTeam')}\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<span class=\"tasks-projects-members-popup-head-text\">\n\t\t\t\t\t\t\t${Loc.getMessage('TASKS_PROJECTS_MEMBERS_POPUP_TITLE_SCRUM_TEAM')}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</span>\n\t\t\t\t`,\n\t\t\t\tinnerContainer: Tag.render`<div class=\"tasks-projects-members-popup-inner\"></div>`,\n\t\t\t},\n\t\t\tmembers: {\n\t\t\t\tcurrentPage: 1,\n\t\t\t\trenderedUsers: [],\n\t\t\t\ttab: Tag.render`\n\t\t\t\t\t<span\n\t\t\t\t\t\tclass=\"tasks-projects-members-popup-head-item\"\n\t\t\t\t\t\tonclick=\"${this.changeType.bind(this, 'members')}\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<span class=\"tasks-projects-members-popup-head-text\">\n\t\t\t\t\t\t\t${Loc.getMessage('TASKS_PROJECTS_MEMBERS_POPUP_TITLE_SCRUM_MEMBERS')}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</span>\n\t\t\t\t`,\n\t\t\t\tinnerContainer: Tag.render`<div class=\"tasks-projects-members-popup-inner\"></div>`,\n\t\t\t}\n\t\t};\n\t}\n\n\trenderUsers(users)\n\t{\n\t\tif (this.currentType === 'scrumTeam')\n\t\t{\n\t\t\tthis.renderLabels(users);\n\n\t\t\tObject.values(users).forEach((user) => {\n\t\t\t\tif (\n\t\t\t\t\tthis.getCurrentPopupData().renderedUsers.indexOf(user.ID) >= 0\n\t\t\t\t\t&& user.ROLE !== 'M'\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis.getCurrentPopupData().renderedUsers.push(user.ID);\n\n\t\t\t\tconst containersMap = new Map();\n\t\t\t\tcontainersMap.set('A', 'tasks-scrum-members-popup-owner-container');\n\t\t\t\tcontainersMap.set('M', 'tasks-scrum-members-popup-master-container');\n\t\t\t\tcontainersMap.set('E', 'tasks-scrum-members-popup-team-container');\n\n\t\t\t\tif (Type.isUndefined(containersMap.get(user.ROLE)))\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.getCurrentPopupData()\n\t\t\t\t\t.innerContainer\n\t\t\t\t\t.querySelector('.' + containersMap.get(user.ROLE))\n\t\t\t\t\t.appendChild(\n\t\t\t\t\t\tTag.render`\n\t\t\t\t\t\t\t<a class=\"tasks-projects-members-popup-item\" href=\"${user['HREF']}\" target=\"_blank\">\n\t\t\t\t\t\t\t\t<span class=\"tasks-projects-members-popup-avatar-new\">\n\t\t\t\t\t\t\t\t\t${this.getAvatar(user)}\n\t\t\t\t\t\t\t\t\t<span class=\"tasks-projects-members-popup-avatar-status-icon\"></span>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<span class=\"tasks-scrum-members-popup-name\">${user['FORMATTED_NAME']}</span>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t`\n\t\t\t\t\t)\n\t\t\t\t;\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tObject.values(users).forEach((user) => {\n\t\t\t\tif (this.getCurrentPopupData().renderedUsers.indexOf(user.ID) >= 0)\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis.getCurrentPopupData().renderedUsers.push(user.ID);\n\n\t\t\t\tthis.getCurrentPopupData().innerContainer.appendChild(\n\t\t\t\t\tTag.render`\n\t\t\t\t\t<a class=\"tasks-projects-members-popup-item\" href=\"${user['HREF']}\" target=\"_blank\">\n\t\t\t\t\t\t<span class=\"tasks-projects-members-popup-avatar-new\">\n\t\t\t\t\t\t\t${this.getAvatar(user)}\n\t\t\t\t\t\t\t<span class=\"tasks-projects-members-popup-avatar-status-icon\"></span>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span class=\"tasks-scrum-members-popup-name\">${user['FORMATTED_NAME']}</span>\n\t\t\t\t\t</a>\n\t\t\t\t`\n\t\t\t\t);\n\t\t\t})\n\t\t}\n\t}\n\n\trenderLabels(users)\n\t{\n\t\tconst hasOwner = users.find((user) => user.ROLE === 'A');\n\t\tconst hasMaster = users.find((user) => user.ROLE === 'M');\n\t\tconst hasTeam = users.find((user) => user.ROLE === 'E');\n\n\t\tif (hasOwner)\n\t\t{\n\t\t\tthis.getCurrentPopupData().innerContainer.appendChild(\n\t\t\t\tTag.render`\n\t\t\t\t\t<div class=\"tasks-scrum-members-popup-owner-container\">\n\t\t\t\t\t\t<span class=\"tasks-scrum-members-popup-label\">\n\t\t\t\t\t\t\t<span class=\"tasks-scrum-members-popup-label-text\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('TASKS_PROJECTS_MEMBERS_POPUP_LABEL_SCRUM_OWNER')}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t`\n\t\t\t);\n\t\t}\n\n\t\tif (hasMaster)\n\t\t{\n\t\t\tthis.getCurrentPopupData().innerContainer.appendChild(\n\t\t\t\tTag.render`\n\t\t\t\t\t<div class=\"tasks-scrum-members-popup-master-container\">\n\t\t\t\t\t\t<span class=\"tasks-scrum-members-popup-label\">\n\t\t\t\t\t\t\t<span class=\"tasks-scrum-members-popup-label-text\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('TASKS_PROJECTS_MEMBERS_POPUP_LABEL_SCRUM_MASTER')}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t`\n\t\t\t);\n\t\t}\n\n\t\tif (hasTeam)\n\t\t{\n\t\t\tthis.getCurrentPopupData().innerContainer.appendChild(\n\t\t\t\tTag.render`\n\t\t\t\t\t<div class=\"tasks-scrum-members-popup-team-container\">\n\t\t\t\t\t\t<span class=\"tasks-scrum-members-popup-label\">\n\t\t\t\t\t\t\t<span class=\"tasks-scrum-members-popup-label-text\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('TASKS_PROJECTS_MEMBERS_POPUP_LABEL_SCRUM_TEAM')}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t`\n\t\t\t);\n\t\t}\n\t}\n}","import {Dom, Type} from 'main.core';\nimport {BaseEvent, EventEmitter} from 'main.core.events';\n\nexport class Grid\n{\n\tstatic get classes()\n\t{\n\t\treturn {\n\t\t\thighlighted: 'task-projects-item-highlighted',\n\t\t\tpinned: 'tasks-projects-row-pinned',\n\t\t};\n\t}\n\n\tconstructor(options)\n\t{\n\t\tthis.pageSize = 10;\n\n\t\tthis.grid = BX.Main.gridManager.getInstanceById(options.gridId);\n\t\tthis.stub = options.gridStub;\n\n\t\tthis.sort = options.sort;\n\t\tthis.actionsPanel = options.actionsPanel;\n\n\t\tthis.items = new Map();\n\t\tthis.fillItems(options.items);\n\n\t\tthis.bindEvents();\n\t\tthis.colorPinnedRows();\n\t}\n\n\tbindEvents()\n\t{\n\t\tEventEmitter.subscribe('BX.Main.grid:sort', this.onColumnSort.bind(this));\n\t\tEventEmitter.subscribe('BX.Main.grid:paramsUpdated', this.onParamsUpdated.bind(this));\n\t}\n\n\tonColumnSort(event: BaseEvent)\n\t{\n\t\tconst data = event.getData();\n\t\tconst grid = data[1];\n\t\tconst column = data[0];\n\n\t\tif (grid === this.grid)\n\t\t{\n\t\t\tthis.sort = {};\n\t\t\tthis.sort[column.sort_by] = column.sort_order;\n\t\t}\n\t}\n\n\tonParamsUpdated()\n\t{\n\t\tconst newItems = this.getRows().map(row => row.getId()).filter(id => id !== 'template_0');\n\t\tconst flipped = newItems.reduce((obj, value) => ({...obj, [value]: null}), {});\n\n\t\tthis.clearItems();\n\t\tthis.fillItems(flipped);\n\t\tthis.colorPinnedRows();\n\t}\n\n\taddRow(id, data, params)\n\t{\n\t\tconst options = {\n\t\t\tid: id,\n\t\t\tcolumns: data.content,\n\t\t\tactions: data.actions,\n\t\t\tcellActions: data.cellActions,\n\t\t\tcounters: data.counters,\n\t\t};\n\t\tconst moveParams = params.moveParams || {};\n\n\t\tif (moveParams.rowBefore)\n\t\t{\n\t\t\toptions.insertAfter = moveParams.rowBefore;\n\t\t}\n\t\telse if (moveParams.rowAfter)\n\t\t{\n\t\t\toptions.insertBefore = moveParams.rowAfter;\n\t\t}\n\t\telse\n\t\t{\n\t\t\toptions.append = true;\n\t\t}\n\n\t\tif (this.items.size > this.getCurrentPage() * this.pageSize)\n\t\t{\n\t\t\tconst lastRowId = this.getLastRowId();\n\n\t\t\tthis.removeItem(lastRowId);\n\t\t\tDom.remove(this.getRowNodeById(lastRowId));\n\t\t\tthis.showMoreButton();\n\t\t}\n\n\t\tthis.hideStub();\n\t\tthis.getRealtime().addRow(options);\n\t\tthis.colorPinnedRows();\n\n\t\tEventEmitter.emit('Tasks.Projects.Grid:RowAdd', {id});\n\t}\n\n\tupdateRow(id, data, params)\n\t{\n\t\tconst row = this.getRowById(id);\n\t\trow.setCellsContent(data.content);\n\t\trow.setActions(data.actions);\n\t\trow.setCellActions(data.cellActions);\n\t\trow.setCounters(data.counters);\n\n\t\tthis.resetRows();\n\t\tthis.moveRow(id, (params.moveParams || {}));\n\t\tthis.highlightRow(id, (params.highlightParams || {})).then(() => this.colorPinnedRows(), () => {});\n\n\t\tthis.grid.bindOnRowEvents();\n\n\t\tEventEmitter.emit('Tasks.Projects.Grid:RowUpdate', {id});\n\t}\n\n\tremoveRow(id)\n\t{\n\t\tif (!this.isRowExist(id))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.grid.removeRow(id);\n\n\t\tEventEmitter.emit('Tasks.Projects.Grid:RowRemove', {id});\n\t}\n\n\tmoveRow(rowId, params): void\n\t{\n\t\tif (params.skip)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst rowBefore = params.rowBefore || 0;\n\t\tconst rowAfter = params.rowAfter || 0;\n\n\t\tif (rowBefore)\n\t\t{\n\t\t\tthis.grid.getRows().insertAfter(rowId, rowBefore);\n\t\t}\n\t\telse if (rowAfter)\n\t\t{\n\t\t\tthis.grid.getRows().insertBefore(rowId, rowAfter);\n\t\t}\n\t}\n\n\thighlightRow(rowId, params): Promise\n\t{\n\t\tparams = params || {};\n\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tif (!this.isRowExist(rowId))\n\t\t\t{\n\t\t\t\treject();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (params.skip)\n\t\t\t{\n\t\t\t\tresolve();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst node = this.getRowNodeById(rowId);\n\t\t\tconst isPinned = Dom.hasClass(node, Grid.classes.pinned);\n\n\t\t\tif (isPinned)\n\t\t\t{\n\t\t\t\tDom.removeClass(node, Grid.classes.pinned);\n\t\t\t}\n\n\t\t\tDom.addClass(node, Grid.classes.highlighted);\n\t\t\tsetTimeout(() => {\n\t\t\t\tDom.removeClass(node, Grid.classes.highlighted);\n\t\t\t\tif (isPinned)\n\t\t\t\t{\n\t\t\t\t\tDom.addClass(node, Grid.classes.pinned);\n\t\t\t\t}\n\t\t\t\tresolve();\n\t\t\t}, 900);\n\t\t});\n\t}\n\n\tcolorPinnedRows()\n\t{\n\t\tthis.getRows().forEach((row) => {\n\t\t\tconst node = row.getNode();\n\t\t\tthis.getIsPinned(row.getId())\n\t\t\t\t? Dom.addClass(node, Grid.classes.pinned)\n\t\t\t\t: Dom.removeClass(node, Grid.classes.pinned)\n\t\t\t;\n\t\t});\n\t}\n\n\tresetRows()\n\t{\n\t\tthis.grid.getRows().reset();\n\t}\n\n\tgetRows()\n\t{\n\t\treturn this.grid.getRows().getBodyChild();\n\t}\n\n\tgetFirstRowId()\n\t{\n\t\tconst firstRow = this.grid.getRows().getBodyFirstChild();\n\t\treturn (firstRow ? this.getRowProperty(firstRow, 'id') : 0);\n\t}\n\n\tgetLastRowId()\n\t{\n\t\tconst lastRow = this.grid.getRows().getBodyLastChild();\n\t\treturn (lastRow ? this.getRowProperty(lastRow, 'id') : 0);\n\t}\n\n\tgetLastPinnedRowId()\n\t{\n\t\tconst pinnedRows = Object.values(this.getRows()).filter(row => this.getIsPinned(row.getId()));\n\t\tconst keys = Object.keys(pinnedRows);\n\n\t\tif (keys.length > 0)\n\t\t{\n\t\t\treturn pinnedRows[keys[keys.length - 1]].getId();\n\t\t}\n\n\t\treturn 0;\n\t}\n\n\tgetIsPinned(rowId)\n\t{\n\t\treturn this.isRowExist(rowId)\n\t\t\t&& Type.isDomNode(this.getRowNodeById(rowId).querySelector('.main-grid-cell-content-action-pin.main-grid-cell-content-action-active'));\n\t}\n\n\tgetRowProperty(row, propertyName)\n\t{\n\t\treturn BX.data(row.getNode(), propertyName);\n\t}\n\n\tgetRowById(id)\n\t{\n\t\treturn this.grid.getRows().getById(id);\n\t}\n\n\tgetRowNodeById(id)\n\t{\n\t\treturn this.getRowById(id).getNode();\n\t}\n\n\tisRowExist(id)\n\t{\n\t\treturn this.getRowById(id) !== null;\n\t}\n\n\tgetCurrentPage()\n\t{\n\t\tconst currentPage = this.grid.getContainer().querySelector('.modern-page-current');\n\t\treturn (currentPage ? currentPage.innerText : 1);\n\t}\n\n\tisActivityRealtimeMode()\n\t{\n\t\treturn this.sort.ACTIVITY_DATE\n\t\t\t&& this.sort.ACTIVITY_DATE === 'desc';\n\t}\n\n\tgetItems()\n\t{\n\t\treturn Array.from(this.items.keys());\n\t}\n\n\thasItem(id)\n\t{\n\t\treturn this.items.has(parseInt(id, 10));\n\t}\n\n\taddItem(id)\n\t{\n\t\tthis.items.set(parseInt(id, 10));\n\t}\n\n\tremoveItem(id)\n\t{\n\t\tthis.items.delete(parseInt(id, 10));\n\t}\n\n\tfillItems(items)\n\t{\n\t\tObject.keys(items).forEach(id => this.addItem(id));\n\t}\n\n\tclearItems()\n\t{\n\t\tthis.items.clear();\n\t}\n\n\tgetRealtime()\n\t{\n\t\treturn this.grid.getRealtime();\n\t}\n\n\tshowStub()\n\t{\n\t\tif (this.stub)\n\t\t{\n\t\t\tthis.getRealtime().showStub({content: this.stub});\n\t\t}\n\t}\n\n\thideStub()\n\t{\n\t\tthis.grid.hideEmptyStub();\n\t}\n\n\tshowMoreButton()\n\t{\n\t\tthis.grid.getMoreButton().getNode().style.display = 'inline-block';\n\t}\n\n\thideMoreButton()\n\t{\n\t\tthis.grid.getMoreButton().getNode().style.display = 'none';\n\t}\n}","import {Type, ajax} from 'main.core';\n\nimport {Grid} from './grid';\n\nexport class PullController\n{\n\tstatic get events()\n\t{\n\t\treturn {\n\t\t\tadd: 'add',\n\t\t\tupdate: 'update',\n\t\t\tremove: 'remove',\n\t\t\tuserAdd: 'userAdd',\n\t\t\tuserUpdate: 'userUpdate',\n\t\t\tuserRemove: 'userRemove',\n\t\t\tpinChanged: 'pinChanged',\n\t\t};\n\t}\n\n\tstatic get counterEvents()\n\t{\n\t\treturn [\n\t\t\t'onAfterTaskAdd',\n\t\t\t'onAfterTaskDelete',\n\t\t\t'onAfterTaskRestore',\n\t\t\t'onAfterTaskView',\n\t\t\t'onAfterTaskMute',\n\t\t\t'onAfterCommentAdd',\n\t\t\t'onAfterCommentDelete',\n\t\t\t'onProjectPermUpdate',\n\t\t];\n\t}\n\n\tstatic get movingProjectEvents()\n\t{\n\t\treturn [\n\t\t\t'onAfterTaskAdd',\n\t\t\t'onAfterCommentAdd',\n\t\t];\n\t}\n\n\tconstructor(options)\n\t{\n\t\tthis.signedParameters = options.signedParameters;\n\t\tthis.isScrumList = options.isScrumList === 'Y';\n\t\tthis.createProjectUrl = options.createProjectUrl;\n\t\tthis.scrumLimitSidePanelId = options.scrumLimitSidePanelId;\n\n\t\tthis.grid = new Grid(options);\n\n\t\tthis.timer = null;\n\t\tthis.counterData = new Map();\n\t\tthis.userOptions = options.userOptions;\n\t}\n\n\tgetModuleId()\n\t{\n\t\treturn 'tasks';\n\t}\n\n\tgetMap()\n\t{\n\t\treturn {\n\t\t\tproject_add: this.onProjectAdd.bind(this),\n\t\t\tproject_update: this.onProjectUpdate.bind(this),\n\t\t\tproject_remove: this.onProjectRemove.bind(this),\n\t\t\tproject_user_add: this.onProjectUserAdd.bind(this),\n\t\t\tproject_user_update: this.onProjectUserUpdate.bind(this),\n\t\t\tproject_user_remove: this.onProjectUserRemove.bind(this),\n\t\t\tproject_user_option_changed: this.onProjectUserOptionChanged.bind(this),\n\t\t\tproject_counter: this.onProjectCounter.bind(this),\n\t\t\tproject_read_all: this.onProjectCommentsReadAll.bind(this),\n\t\t\tcomment_read_all: this.onProjectCommentsReadAll.bind(this),\n\t\t\tscrum_read_all: this.onProjectCommentsReadAll.bind(this)\n\t\t};\n\t}\n\n\tonProjectAdd(data)\n\t{\n\t\tconst params = {\n\t\t\tevent: PullController.events.add,\n\t\t\tmoveParams: {\n\t\t\t\trowBefore: this.grid.getLastPinnedRowId(),\n\t\t\t\trowAfter: this.grid.getFirstRowId(),\n\t\t\t},\n\t\t};\n\n\t\tthis.checkExistence(data.ID).then(\n\t\t\tresponse => this.onCheckExistenceSuccess(response, data.ID, params),\n\t\t\tresponse => console.error(response)\n\t\t);\n\n\t\tif (this.isScrumList)\n\t\t{\n\t\t\tthis.checkScrumLimit()\n\t\t\t\t.then(\n\t\t\t\t\tisLimitExceeded => this.onCheckScrumLimit(isLimitExceeded),\n\t\t\t\t\tresponse => console.error(response)\n\t\t\t\t)\n\t\t\t;\n\t\t}\n\t}\n\n\tonProjectUpdate(data)\n\t{\n\t\tconst params = {\n\t\t\tevent: PullController.events.update,\n\t\t};\n\n\t\tthis.checkExistence(data.ID).then(\n\t\t\tresponse => this.onCheckExistenceSuccess(response, data.ID, params),\n\t\t\tresponse => console.error(response)\n\t\t);\n\t}\n\n\tonProjectRemove(data)\n\t{\n\t\tthis.removeRow(data.ID);\n\n\t\tif (this.isScrumList)\n\t\t{\n\t\t\tthis.checkScrumLimit()\n\t\t\t\t.then(\n\t\t\t\t\tisLimitExceeded => this.onCheckScrumLimit(isLimitExceeded),\n\t\t\t\t\tresponse => console.error(response)\n\t\t\t\t)\n\t\t\t;\n\t\t}\n\t}\n\n\tonProjectUserAdd(data)\n\t{\n\t\tconst params = {\n\t\t\tevent: PullController.events.userAdd,\n\t\t};\n\n\t\tthis.checkExistence(data.GROUP_ID).then(\n\t\t\tresponse => this.onCheckExistenceSuccess(response, data.GROUP_ID, params),\n\t\t\tresponse => console.error(response)\n\t\t);\n\t}\n\n\tonProjectUserUpdate(data)\n\t{\n\t\tconst params = {\n\t\t\tevent: PullController.events.userUpdate,\n\t\t};\n\n\t\tthis.checkExistence(data.GROUP_ID).then(\n\t\t\tresponse => this.onCheckExistenceSuccess(response, data.GROUP_ID, params),\n\t\t\tresponse => console.error(response)\n\t\t);\n\t}\n\n\tonProjectUserRemove(data)\n\t{\n\t\tconst params = {\n\t\t\tevent: PullController.events.userRemove,\n\t\t};\n\n\t\tthis.checkExistence(data.GROUP_ID).then(\n\t\t\tresponse => this.onCheckExistenceSuccess(response, data.GROUP_ID, params),\n\t\t\tresponse => console.error(response)\n\t\t);\n\t}\n\n\tonProjectUserOptionChanged(data)\n\t{\n\t\tswitch (data.OPTION)\n\t\t{\n\t\t\tcase this.userOptions.pinned:\n\t\t\t\tthis.onProjectPinChanged(data);\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tonProjectPinChanged(data)\n\t{\n\t\tconst params = {\n\t\t\tevent: PullController.events.pinChanged,\n\t\t};\n\n\t\tthis.moveToDirectPlace(data.PROJECT_ID, null, params);\n\t}\n\n\tonProjectCounter(data)\n\t{\n\t\tconst groupId = data.GROUP_ID;\n\t\tconst event = data.EVENT;\n\n\t\tif (!PullController.counterEvents.includes(event))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this.timer)\n\t\t{\n\t\t\tthis.timer = setTimeout(() => {\n\t\t\t\tthis.freeCounterQueue();\n\t\t\t}, 1000);\n\t\t}\n\n\t\tif (PullController.movingProjectEvents.includes(event) || !this.counterData.has(groupId))\n\t\t{\n\t\t\tthis.counterData.set(groupId, event);\n\t\t}\n\t}\n\n\tfreeCounterQueue()\n\t{\n\t\tthis.counterData.forEach((event, groupId) => {\n\t\t\tconst params = {\n\t\t\t\tevent,\n\t\t\t\thighlightParams: {\n\t\t\t\t\tskip: true,\n\t\t\t\t},\n\t\t\t};\n\t\t\tif (PullController.movingProjectEvents.includes(event))\n\t\t\t{\n\t\t\t\tparams.moveParams = {\n\t\t\t\t\trowBefore: (this.grid.getIsPinned(groupId) ? 0 : this.grid.getLastPinnedRowId()),\n\t\t\t\t\trowAfter: this.grid.getFirstRowId(),\n\t\t\t\t};\n\t\t\t\tparams.highlightParams = {\n\t\t\t\t\tskip: false,\n\t\t\t\t};\n\t\t\t}\n\t\t\tthis.checkExistence(groupId).then(\n\t\t\t\tresponse => this.onCheckExistenceSuccess(response, groupId, params),\n\t\t\t\tresponse => console.error(response)\n\t\t\t);\n\t\t});\n\t\tthis.counterData.clear();\n\t\tthis.timer = null;\n\t}\n\n\tonProjectCommentsReadAll(data)\n\t{\n\t\tconst groupId = data.GROUP_ID;\n\n\t\tif (groupId)\n\t\t{\n\t\t\tif (this.grid.isRowExist(groupId))\n\t\t\t{\n\t\t\t\tthis.updateCounter([groupId]);\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.updateCounter(this.grid.getItems());\n\t\t}\n\t}\n\n\tcheckExistence(groupId)\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tBX.ajax.runComponentAction('bitrix:tasks.projects', 'checkExistence', {\n\t\t\t\tmode: 'class',\n\t\t\t\tdata: {\n\t\t\t\t\tgroupIds: [groupId],\n\t\t\t\t},\n\t\t\t\tsignedParameters: this.signedParameters,\n\t\t\t}).then(\n\t\t\t\tresponse => resolve(response),\n\t\t\t\tresponse => reject(response)\n\t\t\t);\n\t\t});\n\t}\n\n\tcheckScrumLimit(): Promise\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tajax.runAction(\n\t\t\t\t'bitrix:tasks.scrum.info.checkScrumLimit',\n\t\t\t\t{\n\t\t\t\t\tdata: {},\n\t\t\t\t\tsignedParameters: this.signedParameters,\n\t\t\t\t}\n\t\t\t)\n\t\t\t\t.then(\n\t\t\t\t\tresponse => resolve(response.data),\n\t\t\t\t\tresponse => reject(response)\n\t\t\t\t)\n\t\t\t;\n\t\t});\n\t}\n\n\tonCheckExistenceSuccess(response, groupId, params)\n\t{\n\t\tif (Type.isUndefined(response.data[groupId]))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (response.data[groupId] === false)\n\t\t{\n\t\t\tthis.removeRow(groupId);\n\t\t\treturn;\n\t\t}\n\n\t\tconst group = response.data[groupId];\n\n\t\tif (this.grid.isRowExist(groupId))\n\t\t{\n\t\t\tthis.grid.isActivityRealtimeMode()\n\t\t\t\t? this.updateRow(groupId, group, params)\n\t\t\t\t: this.moveToDirectPlace(groupId, group, params)\n\t\t\t;\n\t\t}\n\t\telse if (\n\t\t\tthis.grid.isActivityRealtimeMode()\n\t\t\t&& (PullController.movingProjectEvents.includes(params.event) || params.event === PullController.events.add)\n\t\t)\n\t\t{\n\t\t\tthis.updateItem(groupId, group, params);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.moveToDirectPlace(groupId, group, params);\n\t\t}\n\t}\n\n\tonCheckScrumLimit(isLimitExceeded: boolean)\n\t{\n\t\tthis.projectAddButton = document.getElementById('projectAddButton');\n\t\tif (!Type.isDomNode(this.projectAddButton))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (isLimitExceeded)\n\t\t{\n\t\t\tthis.projectAddButton.href = `javascript:BX.UI.InfoHelper.show('${this.scrumLimitSidePanelId\n\t\t\t\t}', {isLimit: true, limitAnalyticsLabels: {module: 'tasks', source: 'scrumList'}})`\n\t\t\t;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.projectAddButton.href = this.createProjectUrl;\n\t\t}\n\t}\n\n\tupdateItem(rowId, rowData, params)\n\t{\n\t\tif (!this.grid.hasItem(rowId))\n\t\t{\n\t\t\tthis.grid.addItem(rowId);\n\t\t\tthis.addRow(rowId, rowData, params);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.updateRow(rowId, rowData, params);\n\t\t}\n\t}\n\n\taddRow(rowId, rowData, params)\n\t{\n\t\tif (this.grid.isRowExist(rowId))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tBX.ajax.runComponentAction('bitrix:tasks.projects', 'prepareGridRows', {\n\t\t\tmode: 'class',\n\t\t\tdata: {\n\t\t\t\tgroupIds: [rowId],\n\t\t\t\tdata: (rowData ? {[rowId]: rowData} : null),\n\t\t\t},\n\t\t\tsignedParameters: this.signedParameters,\n\t\t})\n\t\t\t.then((response) => {\n\t\t\t\tif (!Type.isUndefined(response.data[rowId]))\n\t\t\t\t{\n\t\t\t\t\tthis.grid.addRow(rowId, response.data[rowId], params);\n\t\t\t\t}\n\t\t\t})\n\t\t;\n\t}\n\n\tupdateRow(rowId, rowData, params)\n\t{\n\t\tif (!this.grid.isRowExist(rowId))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tBX.ajax.runComponentAction('bitrix:tasks.projects', 'prepareGridRows', {\n\t\t\tmode: 'class',\n\t\t\tdata: {\n\t\t\t\tgroupIds: [rowId],\n\t\t\t\tdata: (rowData ? {[rowId]: rowData} : null),\n\t\t\t},\n\t\t\tsignedParameters: this.signedParameters,\n\t\t})\n\t\t\t.then((response) => {\n\t\t\t\tif (!Type.isUndefined(response.data[rowId]))\n\t\t\t\t{\n\t\t\t\t\tthis.grid.updateRow(rowId, response.data[rowId], params)\n\t\t\t\t}\n\t\t\t})\n\t\t;\n\t}\n\n\tremoveRow(rowId)\n\t{\n\t\tthis.grid.removeItem(rowId);\n\t\tthis.grid.removeRow(rowId);\n\t}\n\n\tmoveToDirectPlace(groupId, data, params)\n\t{\n\t\tparams = params || {};\n\n\t\tBX.ajax.runComponentAction('bitrix:tasks.projects', 'findProjectPlace', {\n\t\t\tmode: 'class',\n\t\t\tdata: {\n\t\t\t\tgroupId,\n\t\t\t\tcurrentPage: this.grid.getCurrentPage(),\n\t\t\t},\n\t\t\tsignedParameters: this.signedParameters,\n\t\t}).then((response) => {\n\t\t\tif (response.data === null)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst {projectBefore, projectAfter} = response.data;\n\n\t\t\tif (projectBefore === false && projectAfter === false)\n\t\t\t{\n\t\t\t\tthis.removeRow(groupId);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (\n\t\t\t\t\t(projectBefore && this.grid.isRowExist(projectBefore))\n\t\t\t\t\t|| (projectAfter && this.grid.isRowExist(projectAfter))\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tparams.moveParams = {\n\t\t\t\t\t\trowBefore: projectBefore,\n\t\t\t\t\t\trowAfter: projectAfter,\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tparams.moveParams = {\n\t\t\t\t\t\tskip: true,\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tthis.updateItem(groupId, data, params);\n\t\t\t}\n\t\t});\n\t}\n\n\tupdateCounter(rowIds)\n\t{\n\t\tBX.ajax.runComponentAction('bitrix:tasks.projects', 'prepareGridRows', {\n\t\t\tmode: 'class',\n\t\t\tdata: {\n\t\t\t\tgroupIds: rowIds,\n\t\t\t\tdata: null,\n\t\t\t},\n\t\t\tsignedParameters: this.signedParameters,\n\t\t}).then((response) => {\n\t\t\tconst projects = response.data;\n\t\t\tif (projects)\n\t\t\t{\n\t\t\t\tObject.keys(projects).forEach((projectId) => {\n\t\t\t\t\tif (this.grid.isRowExist(projectId))\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.grid.getRowById(projectId).setCounters(projects[projectId].counters);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n}","import {BaseEvent, EventEmitter} from 'main.core.events';\nimport {Grid} from '../grid';\nimport {Guide, Step} from 'ui.tour';\nimport {Loc, Uri} from 'main.core';\n\nexport class FirstProjectCreationTourGuide\n{\n\tconstructor(options)\n\t{\n\t\tthis.grid = new Grid(options);\n\t\tthis.signedParameters = options.signedParameters;\n\t\tthis.popupData = options.tours.firstProjectCreation.popupData;\n\n\t\tthis.projectAddButton = BX('projectAddButton');\n\t\tthis.guide = new Guide({\n\t\t\tsteps: [\n\t\t\t\t{\n\t\t\t\t\ttarget: this.projectAddButton,\n\t\t\t\t\ttitle: this.popupData[0].title,\n\t\t\t\t\ttext: this.popupData[0].text,\n\t\t\t\t\tarticle: this.popupData[0].article,\n\t\t\t\t},\n\t\t\t],\n\t\t\tonEvents: true\n\t\t});\n\n\t\tthis.bindEvents();\n\t}\n\n\tbindEvents()\n\t{\n\t\tEventEmitter.subscribe('UI.Tour.Guide:onFinish', this.onGuideFinish.bind(this));\n\t\tEventEmitter.subscribe('SidePanel.Slider:onMessage', this.onProjectSliderMessage.bind(this));\n\t}\n\n\tonGuideFinish(event: BaseEvent)\n\t{\n\t\tconst {guide} = event.getData();\n\n\t\tif (guide === this.guide)\n\t\t{\n\t\t\tthis.projectAddButton.href = Uri.removeParam(this.projectAddButton.href, ['PROJECT_OPTIONS']);\n\t\t}\n\t}\n\n\tonProjectSliderMessage(event: BaseEvent)\n\t{\n\t\tconst [sliderEvent] = event.getData();\n\t\tif (sliderEvent.getEventId() !== 'sonetGroupEvent')\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst sliderEventData = sliderEvent.getData();\n\t\tif (\n\t\t\tsliderEventData.code !== 'afterCreate'\n\t\t\t|| sliderEventData.data.projectOptions.tourId !== this.guide.getId()\n\t\t)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst projectId = sliderEventData.data.group.ID;\n\n\t\tif (this.grid.isRowExist(projectId))\n\t\t{\n\t\t\tthis.showFinalStep(projectId);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tEventEmitter.subscribe('Tasks.Projects.Grid:RowAdd', this.onProjectRowAdded.bind(this, projectId));\n\t\t}\n\t}\n\n\tonProjectRowAdded(projectId, event: BaseEvent)\n\t{\n\t\tconst {id} = event.getData();\n\n\t\tif (Number(id) === Number(projectId))\n\t\t{\n\t\t\tthis.showFinalStep(projectId);\n\t\t}\n\t}\n\n\tshowFinalStep(projectId)\n\t{\n\t\tconst target = this.grid.getRowNodeById(projectId).querySelector('.tasks-projects-text');\n\n\t\tthis.guide.steps.push(new Step({\n\t\t\ttarget,\n\t\t\tcursorMode: true,\n\t\t\ttargetEvent: () => {\n\t\t\t\tBX.SidePanel.Instance.open(target.href);\n\t\t\t\tsetTimeout(() => this.guide.close(), 1000);\n\t\t\t},\n\t\t}));\n\t\tthis.finish();\n\t\tthis.showNextStep();\n\t}\n\n\tstart()\n\t{\n\t\tthis.projectAddButton.href = Uri.addParam(this.projectAddButton.href, {\n\t\t\tPROJECT_OPTIONS: {\n\t\t\t\ttourId: this.guide.getId(),\n\t\t\t},\n\t\t});\n\t\tthis.showNextStep();\n\t}\n\n\tfinish()\n\t{\n\t\tBX.ajax.runAction('tasks.tourguide.firstprojectcreation.finish');\n\t}\n\n\tshowNextStep()\n\t{\n\t\tsetTimeout(() => this.guide.showNextStep(), 1000);\n\t}\n}","import {BaseEvent, EventEmitter} from 'main.core.events';\nimport {Grid} from '../grid';\nimport {Guide, Step} from 'ui.tour';\nimport {Loc, Uri} from 'main.core';\n\nexport class FirstScrumCreationTourGuide\n{\n\tconstructor(options)\n\t{\n\t\tthis.grid = new Grid(options);\n\t\tthis.signedParameters = options.signedParameters;\n\t\tthis.popupData = options.tours.firstScrumCreation.popupData;\n\n\t\tthis.projectAddButton = BX('projectAddButton');\n\t\tthis.guide = new Guide({\n\t\t\tsteps: [\n\t\t\t\t{\n\t\t\t\t\ttarget: this.projectAddButton,\n\t\t\t\t\ttitle: this.popupData[0].title,\n\t\t\t\t\ttext: this.popupData[0].text,\n\t\t\t\t\tarticle: null\n\t\t\t\t},\n\t\t\t],\n\t\t\tonEvents: true\n\t\t});\n\n\t\tthis.bindEvents();\n\t}\n\n\tbindEvents()\n\t{\n\t\tEventEmitter.subscribe('UI.Tour.Guide:onFinish', this.onGuideFinish.bind(this));\n\t\tEventEmitter.subscribe('SidePanel.Slider:onMessage', this.onProjectSliderMessage.bind(this));\n\t}\n\n\tonGuideFinish(event: BaseEvent)\n\t{\n\t\tconst {guide} = event.getData();\n\n\t\tif (guide === this.guide)\n\t\t{\n\t\t\tthis.projectAddButton.href = Uri.removeParam(this.projectAddButton.href, ['PROJECT_OPTIONS']);\n\t\t}\n\t}\n\n\tonProjectSliderMessage(event: BaseEvent)\n\t{\n\t\tconst [sliderEvent] = event.getData();\n\t\tif (sliderEvent.getEventId() !== 'sonetGroupEvent')\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst sliderEventData = sliderEvent.getData();\n\t\tif (\n\t\t\tsliderEventData.code !== 'afterCreate'\n\t\t\t|| sliderEventData.data.projectOptions.tourId !== this.guide.getId()\n\t\t)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst projectId = sliderEventData.data.group.ID;\n\n\t\tif (this.grid.isRowExist(projectId))\n\t\t{\n\t\t\tthis.showFinalStep(projectId);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tEventEmitter.subscribe('Tasks.Projects.Grid:RowAdd', this.onProjectRowAdded.bind(this, projectId));\n\t\t}\n\t}\n\n\tonProjectRowAdded(projectId, event: BaseEvent)\n\t{\n\t\tconst {id} = event.getData();\n\n\t\tif (Number(id) === Number(projectId))\n\t\t{\n\t\t\tthis.showFinalStep(projectId);\n\t\t}\n\t}\n\n\tshowFinalStep(projectId)\n\t{\n\t\tconst target = this.grid.getRowNodeById(projectId).querySelector('.tasks-projects-text');\n\n\t\tthis.guide.steps.push(new Step({\n\t\t\ttarget,\n\t\t\tcursorMode: true,\n\t\t\ttargetEvent: () => {\n\t\t\t\tBX.SidePanel.Instance.open(target.href);\n\t\t\t\tsetTimeout(() => this.guide.close(), 1000);\n\t\t\t},\n\t\t}));\n\t\tthis.finish();\n\t\tthis.showNextStep();\n\t}\n\n\tstart()\n\t{\n\t\tthis.projectAddButton.href = Uri.addParam(this.projectAddButton.href, {\n\t\t\tPROJECT_OPTIONS: {\n\t\t\t\ttourId: this.guide.getId(),\n\t\t\t},\n\t\t});\n\t\tthis.showNextStep();\n\t}\n\n\tfinish()\n\t{\n\t\tBX.ajax.runAction('tasks.tourguide.firstscrumcreation.finish');\n\t}\n\n\tshowNextStep()\n\t{\n\t\tsetTimeout(() => this.guide.showNextStep(), 1000);\n\t}\n}","import {FirstProjectCreationTourGuide} from './first-project-creation-tour-guide';\nimport {FirstScrumCreationTourGuide} from './first-scrum-creation-tour-guide';\n\nexport class TourGuideController\n{\n\tconstructor(options)\n\t{\n\t\tthis.tours = options.tours;\n\n\t\tthis.initGuides(options);\n\t}\n\n\tinitGuides(options)\n\t{\n\t\tif (this.tours.firstProjectCreation && this.tours.firstProjectCreation.show)\n\t\t{\n\t\t\tthis.firstProjectCreationTourGuide = new FirstProjectCreationTourGuide(options);\n\t\t\tthis.firstProjectCreationTourGuide.start();\n\t\t}\n\n\t\tif (this.tours.firstScrumCreation && this.tours.firstScrumCreation.show)\n\t\t{\n\t\t\tthis.firstScrumCreationTourGuide = new FirstScrumCreationTourGuide(options);\n\t\t\tthis.firstScrumCreationTourGuide.start();\n\t\t}\n\t}\n}","import {PULL as Pull} from 'pull.client';\n\nimport {ActionsController} from './actions-controller';\nimport {Filter} from './filter/filter';\nimport {MembersPopup} from './members-popup';\nimport {ScrumMembersPopup} from './scrum-members-popup';\nimport {PullController} from './pull-controller';\nimport {TourGuideController} from './tourguide/tour-guide-controller';\n\nclass Controller\n{\n\tconstructor(options)\n\t{\n\t\tthis.membersPopup = new MembersPopup(options);\n\t\tthis.scrumMembersPopup = new ScrumMembersPopup(options);\n\t\tthis.filter = new Filter(options);\n\t\tthis.tourGuideController = new TourGuideController(options);\n\n\t\toptions.filter = this.filter;\n\n\t\tActionsController.setOptions(options);\n\n\t\tthis.initPull(options);\n\t}\n\n\tinitPull(options)\n\t{\n\t\tthis.pullController = new PullController(options);\n\n\t\tthis.pullClient = Pull;\n\t\tthis.pullClient.subscribe(this.pullController);\n\t}\n\n\tgetMembersPopup(): MembersPopup\n\t{\n\t\treturn this.membersPopup;\n\t}\n\n\tgetScrumMembersPopup(): ScrumMembersPopup\n\t{\n\t\treturn this.scrumMembersPopup;\n\t}\n\n\tgetFilter(): Filter\n\t{\n\t\treturn this.filter;\n\t}\n}\n\nexport {Controller, ActionsController};"],"names":["CellActionState","namespace","Reflection","ActionsController","options","actionsPanel","action","groupId","data","Promise","resolve","reject","BX","ajax","runComponentAction","mode","ids","getActionIds","signedParameters","then","hideActionsPanel","unselectRows","id","undefined","selected","getSelectedRows","length","map","row","getDataset","getGridInstance","getRows","getSelected","button","Dom","hasClass","addClass","url","getAttribute","method","dataType","ajax_request","save","sessid","bitrix_sessid","onsuccess","removeClass","onfailure","userGroupRelationId","max_count","checked_0","type_0","id_0","type","result","console","log","sendCancelRequest","hidePanel","unselectAll","Main","gridManager","getById","gridId","instance","event","getData","ACTIVE","doAction","SHOW_BY_HOVER","field","filter","toggleByField","Runtime","loadExtension","exports","onRowUpdate","getCellById","querySelector","dialog","setTargetNode","onRowRemove","hide","onTagsChange","getTarget","tags","getSelectedItems","item","getId","KEYWORDS","join","Dialog","targetNode","enableSearch","width","height","multiple","dropdownMode","compactView","context","entities","searchOptions","allowCreateItem","footerOptions","label","Loc","getMessage","footer","SocialNetwork","EntitySelector","Footer","tagCreationLabel","events","EventEmitter","subscribe","unsubscribe","searchQuery","name","getQuery","toLowerCase","setTimeout","addItem","entityId","title","tabs","select","show","Filter","filterManager","filterId","init","bindEvents","updateFields","onFilterApply","bind","onCounterClick","fields","getFilterFieldsValues","counter","filterField","filterValue","Object","keys","includes","Type","isArray","value","isFilteredByField","isFilteredByFieldValue","getApi","extendFilter","getFilterFields","forEach","getFields","deleteField","getSearch","apply","MembersPopup","bindNode","isPopupShown","popup","destroy","resetPopupData","changeType","PopupWindowManager","create","className","bindElement","autoHide","closeByEsc","lightShadow","bindOptions","position","animationOptions","close","onPopupDestroy","loader","onPopupClose","onAfterPopupShow","contentContainer","appendChild","renderContainer","showLoader","showUsers","popupScroll","Tag","render","popupData","all","tab","heads","members","getCurrentPopupData","innerContainer","isDomNode","Event","area","target","scrollTop","scrollHeight","offsetHeight","unbindAll","page","currentPage","response","currentType","hideLoader","renderUsers","hasChildNodes","innerText","users","values","user","renderedUsers","indexOf","ID","push","getAvatar","isStringFilled","Loader","getPopupContainer","size","newType","loadUsers","oldType","replace","ScrumMembersPopup","scrumTeam","renderLabels","ROLE","containersMap","Map","set","isUndefined","get","hasOwner","find","hasMaster","hasTeam","Grid","highlighted","pinned","pageSize","grid","getInstanceById","stub","gridStub","sort","items","fillItems","colorPinnedRows","onColumnSort","onParamsUpdated","column","sort_by","sort_order","newItems","flipped","reduce","obj","clearItems","params","columns","content","actions","cellActions","counters","moveParams","rowBefore","insertAfter","rowAfter","insertBefore","append","getCurrentPage","lastRowId","getLastRowId","removeItem","remove","getRowNodeById","showMoreButton","hideStub","getRealtime","addRow","emit","getRowById","setCellsContent","setActions","setCellActions","setCounters","resetRows","moveRow","highlightRow","highlightParams","bindOnRowEvents","isRowExist","removeRow","rowId","skip","node","isPinned","classes","getNode","getIsPinned","reset","getBodyChild","firstRow","getBodyFirstChild","getRowProperty","lastRow","getBodyLastChild","pinnedRows","propertyName","getContainer","ACTIVITY_DATE","Array","from","has","parseInt","clear","showStub","hideEmptyStub","getMoreButton","style","display","PullController","add","update","userAdd","userUpdate","userRemove","pinChanged","isScrumList","createProjectUrl","scrumLimitSidePanelId","timer","counterData","userOptions","project_add","onProjectAdd","project_update","onProjectUpdate","project_remove","onProjectRemove","project_user_add","onProjectUserAdd","project_user_update","onProjectUserUpdate","project_user_remove","onProjectUserRemove","project_user_option_changed","onProjectUserOptionChanged","project_counter","onProjectCounter","project_read_all","onProjectCommentsReadAll","comment_read_all","scrum_read_all","getLastPinnedRowId","getFirstRowId","checkExistence","onCheckExistenceSuccess","error","checkScrumLimit","isLimitExceeded","onCheckScrumLimit","GROUP_ID","OPTION","onProjectPinChanged","moveToDirectPlace","PROJECT_ID","EVENT","counterEvents","freeCounterQueue","movingProjectEvents","updateCounter","getItems","groupIds","runAction","group","isActivityRealtimeMode","updateRow","updateItem","projectAddButton","document","getElementById","href","rowData","hasItem","projectBefore","projectAfter","rowIds","projects","projectId","FirstProjectCreationTourGuide","tours","firstProjectCreation","guide","Guide","steps","text","article","onEvents","onGuideFinish","onProjectSliderMessage","Uri","removeParam","sliderEvent","getEventId","sliderEventData","code","projectOptions","tourId","showFinalStep","onProjectRowAdded","Number","Step","cursorMode","targetEvent","SidePanel","Instance","open","finish","showNextStep","addParam","PROJECT_OPTIONS","FirstScrumCreationTourGuide","firstScrumCreation","TourGuideController","initGuides","firstProjectCreationTourGuide","start","firstScrumCreationTourGuide","Controller","membersPopup","scrumMembersPopup","tourGuideController","setOptions","initPull","pullController","pullClient","Pull"],"mappings":"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"}