{"version":3,"file":"script.js","sources":["src/controllers/entities/setting-controller.js","src/controllers/entities/icon-controller.js","src/controllers/controller-factory.js","src/fields/entities/date-filter-field.js","src/fields/entities/dashboard-date-filter-field.js","src/fields/entities/key-info-field.js","src/fields/entities/user-notification-field.js","src/fields/entities/dashboard-owner-field.js","src/fields/entities/delete-superset-field.js","src/fields/entities/clear-cache-field.js","src/fields/entities/dashboard-params-field.js","src/fields/field-factory.js","src/settings-panel.js"],"sourcesContent":["/* eslint-disable no-underscore-dangle */\nimport { Type } from 'main.core';\nimport { ApacheSupersetAnalytics } from 'biconnector.apache-superset-analytics';\nimport { EventEmitter, BaseEvent } from 'main.core.events';\nimport type { AnalyticInfo } from './analytic-info';\n\nconst SidePanel = BX.SidePanel;\nexport class SettingController extends BX.UI.EntityEditorController\n{\n\tanalytic: AnalyticInfo;\n\tconstructor(id, settings)\n\t{\n\t\tsuper();\n\n\t\tthis.initialize(id, settings);\n\t\tthis.analytic = settings.config?.dashboardAnalyticInfo ?? {};\n\n\t\tEventEmitter.subscribeOnce('BX.UI.EntityEditor:onInit', (event: BaseEvent) => {\n\t\t\tconst [editor] = event.getData();\n\t\t\teditor?._toolPanel.disableSaveButton();\n\t\t});\n\n\t\tEventEmitter.subscribeOnce('BX.UI.EntityEditor:onControlChange', (event: BaseEvent) => {\n\t\t\tconst [editor] = event.getData();\n\t\t\teditor?._toolPanel.enableSaveButton();\n\t\t});\n\n\t\tEventEmitter.subscribeOnce('BX.UI.EntityEditor:onCancel', (event: BaseEvent) => {\n\t\t\tconst [, eventArguments] = event.getData();\n\t\t\teventArguments.enableCloseConfirmation = false;\n\t\t});\n\n\t\tEventEmitter.subscribeOnce('BX.UI.EntityEditor:onSave', (event: BaseEvent) => {\n\t\t\tconst [, eventArguments] = event.getData();\n\t\t\teventArguments.enableCloseConfirmation = false;\n\t\t});\n\t}\n\n\tonAfterSave()\n\t{\n\t\tlet analyticOptions;\n\t\tif (Type.isStringFilled(this.analytic.type))\n\t\t{\n\t\t\tanalyticOptions = {\n\t\t\t\ttype: this.analytic.type.toLowerCase(),\n\t\t\t\tp1: ApacheSupersetAnalytics.buildAppIdForAnalyticRequest(this.analytic.appId),\n\t\t\t\tp2: this.analytic.id,\n\t\t\t\tc_element: 'grid_menu',\n\t\t\t\tstatus: 'success',\n\t\t\t};\n\t\t}\n\t\telse\n\t\t{\n\t\t\tanalyticOptions = {\n\t\t\t\tc_element: 'grid_settings',\n\t\t\t\tstatus: 'success',\n\t\t\t};\n\t\t}\n\n\t\tApacheSupersetAnalytics.sendAnalytics('edit', 'report_settings', analyticOptions);\n\t\tthis?._editor?._modeSwitch.reset();\n\n\t\tthis.#sendOnSaveEvent();\n\t\tthis.innerCancel();\n\t}\n\n\t#sendOnSaveEvent(): void\n\t{\n\t\tconst previousSlider = BX.SidePanel.Instance.getPreviousSlider(BX.SidePanel.Instance.getSliderByWindow(window));\n\t\tconst parent = previousSlider ? previousSlider.getWindow() : top;\n\t\tif (!parent.BX.Event)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tparent.BX.Event.EventEmitter.emit('BX.BIConnector.Settings:onAfterSave');\n\t}\n\n\tinnerCancel()\n\t{\n\t\tSidePanel.Instance.close();\n\t}\n}\n","/* eslint-disable no-underscore-dangle */\nimport { Tag, Dom } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport 'ui.icon-set.main';\nimport 'ui.design-tokens';\n\nexport class IconController extends BX.UI.EntityEditorController\n{\n\tconstructor(id, settings)\n\t{\n\t\tsuper();\n\n\t\tthis.initialize(id, settings);\n\t\tthis.#subscribeOnEvents();\n\t}\n\n\t#subscribeOnEvents(): void\n\t{\n\t\tEventEmitter.subscribeOnce('BX.UI.EntityEditor:onInit', (event) => {\n\t\t\tconst [editor] = event.getData();\n\n\t\t\tconst control = editor?._controls?.[0];\n\n\t\t\tif (control?._sections && control._sections.length > 0)\n\t\t\t{\n\t\t\t\tthis.#fillSectionIcons(control._sections);\n\t\t\t}\n\t\t});\n\t}\n\n\t#fillSectionIcons(sectionList: Array<BX.UI.EntityEditorSection>): void\n\t{\n\t\tfor (const section of sectionList)\n\t\t{\n\t\t\tif (section.getTitle() !== '')\n\t\t\t{\n\t\t\t\tthis.#setSectionIcon(section);\n\t\t\t}\n\t\t}\n\t}\n\n\t#setSectionIcon(section: BX.UI.EntityEditorSection): void\n\t{\n\t\tconst container = section._headerContainer;\n\t\tif (container === null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst data = section.getData();\n\n\t\tconst headerTitle = container.querySelector('.ui-entity-editor-header-title');\n\t\tif (headerTitle && data.iconClass)\n\t\t{\n\t\t\tconst icon = Tag.render`\n\t\t\t\t\t<span class=\"\n\t\t\t\t\t\tsuperset-settings-section-icon\n\t\t\t\t\t\tui-icon-set \n\t\t\t\t\t\t${data.iconClass}\n\t\t\t\t\t\"></span>\n\t\t\t`;\n\n\t\t\tDom.insertBefore(icon, headerTitle);\n\t\t}\n\t}\n}\n","import type { BaseEvent } from 'main.core.events';\nimport { EventEmitter } from 'main.core.events';\n\nimport { SettingController, IconController } from './entities/index';\n\nexport class ControllerFactory\n{\n\tconstructor(eventName: string)\n\t{\n\t\tEventEmitter.subscribe(`${eventName}:onInitialize`, (event: BaseEvent) => {\n\t\t\tconst [, eventArgs] = event.getCompatData();\n\t\t\teventArgs.methods.dashboardSettings = this.factory.bind(this);\n\t\t});\n\t}\n\n\tfactory(type: string, controlId: string, settings: Object): ?BX.UI.EntityEditorController\n\t{\n\t\tswitch (type)\n\t\t{\n\t\t\tcase 'settingComponentController':\n\t\t\t\treturn new SettingController(controlId, settings);\n\t\t\tcase 'iconController':\n\t\t\t\treturn new IconController(controlId, settings);\n\t\t\tdefault:\n\t\t\t\treturn null;\n\t\t}\n\t}\n}\n","/* eslint-disable no-underscore-dangle */\nimport { Text, Tag, Dom, Event, Type, Loc } from 'main.core';\n\nexport class DateFilterField extends BX.UI.EntityEditorList\n{\n\tstatic RANGE_VALUE = 'range';\n\n\tconstructor(id, settings)\n\t{\n\t\tsuper();\n\t\tthis.dateSelectorBlock = null;\n\t\tthis.toInput = null;\n\t\tthis.startInput = null;\n\t\tthis.includeLastDateCheckbox = null;\n\t}\n\n\tstatic create(id, settings)\n\t{\n\t\tconst self = new this(id, settings);\n\t\tself.initialize(id, settings);\n\n\t\treturn self;\n\t}\n\n\tstatic layout(options = {})\n\t{\n\t\tsuper.layout();\n\t}\n\n\tcreateTitleNode(): HTMLElement\n\t{\n\t\treturn Tag.render`<span></span>`;\n\t}\n\n\tlayout(options: {})\n\t{\n\t\tsuper.layout(options);\n\n\t\tthis.layoutRangeField(this.getValue() === DateFilterField.RANGE_VALUE);\n\t\tthis.layoutHint();\n\t}\n\n\tonItemSelect(e, item)\n\t{\n\t\tthis.layoutRangeField(item.value === DateFilterField.RANGE_VALUE);\n\n\t\tsuper.onItemSelect(e, item);\n\t}\n\n\trefreshLayout()\n\t{\n\t\tsuper.refreshLayout();\n\t\tthis.layoutRangeField(this.getModel().getField('FILTER_PERIOD') === DateFilterField.RANGE_VALUE);\n\t}\n\n\tlayoutRangeField(isRangeSelected: boolean)\n\t{\n\t\tif (this.dateSelectorBlock !== null)\n\t\t{\n\t\t\tDom.remove(this.dateSelectorBlock);\n\t\t\tthis.dateSelectorBlock = null;\n\t\t\tthis.startInput = null;\n\t\t\tthis.endInput = null;\n\t\t\tthis.includeLastDateCheckbox = null;\n\t\t}\n\n\t\tif (isRangeSelected)\n\t\t{\n\t\t\tconst dateStartValue = Text.encode(this.getModel().getField(this.getDateStartFieldName()));\n\t\t\tthis.startInput = Tag.render`<input class=\"ui-ctl-element\" type=\"text\" value=\"${dateStartValue}\" name=\"${this.getDateStartFieldName()}\">`;\n\t\t\tEvent.bind(this.startInput, 'click', () => {\n\t\t\t\tDateFilterField.showCalendar(this.startInput);\n\t\t\t});\n\t\t\tEvent.bind(this.startInput, 'change', () => {\n\t\t\t\tthis.onChange();\n\t\t\t});\n\t\t\tEvent.bind(this.startInput, 'input', () => {\n\t\t\t\tthis.onChange();\n\t\t\t});\n\n\t\t\tconst dateEndValue = Text.encode(this.getModel().getField(this.getDateEndFieldName()));\n\t\t\tthis.endInput = Tag.render`<input class=\"ui-ctl-element\" type=\"text\" value=\"${dateEndValue}\" name=\"${this.getDateEndFieldName()}\">`;\n\t\t\tEvent.bind(this.endInput, 'click', () => {\n\t\t\t\tDateFilterField.showCalendar(this.endInput);\n\t\t\t});\n\t\t\tEvent.bind(this.endInput, 'change', () => {\n\t\t\t\tthis.onChange();\n\t\t\t});\n\t\t\tEvent.bind(this.endInput, 'input', () => {\n\t\t\t\tthis.onChange();\n\t\t\t});\n\n\t\t\tthis.includeLastDateCheckbox = Tag.render`<input class=\"ui-ctl-element\" type=\"checkbox\" name=\"${this.getIncludeLastDateName()}\">`;\n\t\t\tconst includeLastDateValue = this.getModel().getField(this.getIncludeLastDateName());\n\t\t\tif (includeLastDateValue)\n\t\t\t{\n\t\t\t\tthis.includeLastDateCheckbox.checked = true;\n\t\t\t}\n\t\t\tEvent.bind(this.includeLastDateCheckbox, 'change', () => {\n\t\t\t\tthis.onChange();\n\t\t\t});\n\n\t\t\tthis.dateSelectorBlock =\n\t\t\t\tTag.render`\n\t\t\t\t\t<div class=\"ui-ctl-dropdown-range-group\">\n\t\t\t\t\t\t<div class=\"ui-ctl-container\">\n\t\t\t\t\t\t\t<div class=\"ui-ctl-top\">\n\t\t\t\t\t\t\t\t<div class=\"ui-ctl-title\">${Loc.getMessage('BICONNECTOR_SUPERSET_SETTINGS_COMMON_RANGE_FROM_TITLE')}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-before-icon ui-ctl-datetime\">\n\t\t\t\t\t\t\t\t<div class=\"ui-ctl-before ui-ctl-icon-calendar\"></div>\n\t\t\t\t\t\t\t\t${this.startInput}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"ui-ctl-container\">\n\t\t\t\t\t\t\t<div class=\"ui-ctl-dropdown-range-line\">\n\t\t\t\t\t\t\t\t<span class=\"ui-ctl-dropdown-range-line-item\"></span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"ui-ctl-container\">\n\t\t\t\t\t\t\t<div class=\"ui-ctl-top\">\n\t\t\t\t\t\t\t\t<div class=\"ui-ctl-title\">${Loc.getMessage('BICONNECTOR_SUPERSET_SETTINGS_COMMON_RANGE_TO_TITLE')}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-before-icon ui-ctl-datetime\">\n\t\t\t\t\t\t\t\t<div class=\"ui-ctl-before ui-ctl-icon-calendar\"></div>\n\t\t\t\t\t\t\t\t${this.endInput}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"ui-ctl-bottom\">\n\t\t\t\t\t\t\t\t<label class=\"ui-ctl ui-ctl-checkbox\">\n\t\t\t\t\t\t\t\t\t${this.includeLastDateCheckbox}\n\t\t\t\t\t\t\t\t\t<div class=\"ui-ctl-label-text\">${Loc.getMessage('BICONNECTOR_SUPERSET_SETTINGS_COMMON_RANGE_INCLUDE_LAST_DATE')}</div>\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t`;\n\n\t\t\tDom.append(this.dateSelectorBlock, this._innerWrapper);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.addClass(this._selectContainer, 'ui-ctl-w100');\n\t\t\tDom.removeClass(this._selectContainer, 'ui-ctl-date-range');\n\t\t}\n\t}\n\n\tlayoutHint(): void\n\t{\n\t\tconst hintContainer = Tag.render`\n\t\t\t<div class=\"biconnector-superset-settings-panel-range__hint\">\n\t\t\t\t${this.getHintText()}\n\t\t\t</div>\n\t\t`;\n\n\t\tDom.insertBefore(hintContainer, this._container);\n\t}\n\n\tgetHintText(): string\n\t{\n\t\tconst hintLink = `\n\t\t\t<a \n\t\t\t\tclass=\"biconnector-superset-settings-panel-range__hint-link\"\n\t\t\t\tonclick=\"top.BX.Helper.show('redirect=detail&code=20337242&anchor=Defaultreportingperiod')\"\n\t\t\t>\n\t\t\t\t${Loc.getMessage('BICONNECTOR_SUPERSET_SETTINGS_COMMON_RANGE_FIELD_HINT_LINK')}\n\t\t\t</a>\n\t\t`;\n\n\t\treturn Loc.getMessage('BICONNECTOR_SUPERSET_SETTINGS_COMMON_RANGE_FIELD_HINT')\n\t\t\t.replace('#HINT_LINK#', hintLink);\n\t}\n\n\tgetDateStartFieldName(): string\n\t{\n\t\treturn this._schemeElement.getData().dateStartFieldName ?? 'DATE_FILTER_START';\n\t}\n\n\tgetDateEndFieldName(): string\n\t{\n\t\treturn this._schemeElement.getData().dateEndFieldName ?? 'DATE_FILTER_END';\n\t}\n\n\tgetIncludeLastDateName(): string\n\t{\n\t\treturn this._schemeElement.getData().includeLastDateName ?? 'INCLUDE_LAST_FILTER_DATE';\n\t}\n\n\tsave()\n\t{\n\t\tsuper.save();\n\t\tthis._model.setField(this.getDateStartFieldName(), null);\n\t\tthis._model.setField(this.getDateEndFieldName(), null);\n\t\tthis._model.setField(this.getIncludeLastDateName(), null);\n\n\t\tif (Type.isDomNode(this.endInput))\n\t\t{\n\t\t\tthis._model.setField(this.getDateEndFieldName(), this.endInput.value);\n\t\t}\n\n\t\tif (Type.isDomNode(this.startInput))\n\t\t{\n\t\t\tthis._model.setField(this.getDateStartFieldName(), this.startInput.value);\n\t\t}\n\n\t\tif (Type.isDomNode(this.includeLastDateCheckbox))\n\t\t{\n\t\t\tthis.includeLastDateCheckbox.value = this.includeLastDateCheckbox.checked ? 'Y' : 'N';\n\t\t\tthis._model.setField(this.getIncludeLastDateName(), this.includeLastDateCheckbox.checked ? 'Y' : 'N');\n\t\t}\n\t}\n\n\tstatic showCalendar(input: HTMLElement)\n\t{\n\t\tBX.calendar.get().Close();\n\t\tBX.calendar({ node: input, field: input, bTime: false, bSetFocus: false });\n\t}\n}\n","import { Loc } from 'main.core';\nimport { DateFilterField } from './date-filter-field';\n\nexport class DashboardDateFilterField extends DateFilterField\n{\n\tgetHintText(): string\n\t{\n\t\treturn Loc.getMessage('BICONNECTOR_SUPERSET_SETTINGS_DASHBOARD_RANGE_FIELD_HINT');\n\t}\n}\n","/* eslint-disable no-underscore-dangle,@bitrix24/bitrix24-rules/no-pseudo-private */\nimport { Text, Tag, Dom, Event, Type, Loc, ajax } from 'main.core';\nimport { Button, ButtonSize, ButtonColor } from 'ui.buttons';\nimport { UI } from 'ui.notification';\nimport 'ui.forms';\nimport 'ui.buttons';\n\nexport class KeyInfoField extends BX.UI.EntityEditorCustom\n{\n\tkeyInput: HTMLElement;\n\teyeButton: HTMLElement;\n\trefreshButton: Button;\n\n\tstatic create(id, settings)\n\t{\n\t\tconst self = new this(id, settings);\n\t\tself.initialize(id, settings);\n\n\t\treturn self;\n\t}\n\n\tcreateTitleNode(): HTMLElement\n\t{\n\t\treturn Tag.render`<span></span>`;\n\t}\n\n\tlayout(options: {}): void\n\t{\n\t\tthis.ensureWrapperCreated({ classNames: ['ui-entity-editor-field-text'] });\n\t\tthis.adjustWrapper();\n\n\t\tconst message = Loc.getMessage(\n\t\t\t'BICONNECTOR_SUPERSET_SETTINGS_COMMON_KEY_FIELD_HINT_LINK',\n\t\t\t{\n\t\t\t\t'#HINT_LINK#': '<link></link>',\n\t\t\t},\n\t\t);\n\n\t\tconst hint = Tag.render`\n\t\t\t<div class=\"biconnector-superset-settings-panel-range__hint\">\n\t\t\t\t${message}\n\t\t\t</div>\n\t\t`;\n\n\t\tconst link = Tag.render`\n\t\t\t<a class=\"biconnector-superset-settings-panel-range__hint-link\">\n\t\t\t\t${Loc.getMessage('BICONNECTOR_SUPERSET_SETTINGS_DASHBOARD_HINT_LINK')}\n\t\t\t</a>\n\t\t`;\n\n\t\tEvent.bind(link, 'click', () => {\n\t\t\ttop.BX.Helper.show('redirect=detail&code=20337242&anchor=Encryptionkey');\n\t\t});\n\n\t\tDom.replace(hint.querySelector('link'), link);\n\n\t\tDom.insertBefore(hint, this._container);\n\n\t\tthis._innerWrapper = Tag.render`<div class='ui-entity-editor-content-block ui-ctl-custom biconnector-superset-settings-panel-key-info-container'></div>`;\n\t\tDom.append(this._innerWrapper, this._wrapper);\n\n\t\tconst value = Text.encode(this.getValue());\n\t\tthis.keyInput = Tag.render`\n\t\t\t<input type=\"password\" class=\"ui-ctl-element\" readonly value=\"${value}\">\n\t\t`;\n\n\t\tthis.eyeButton = Tag.render`\n\t\t\t<button class=\"ui-btn-link ui-btn\">\n\t\t\t\t<span class=\"ui-icon-set --crossed-eye\"></span>\n\t\t\t</button>\n\t\t`;\n\t\tEvent.bind(this.eyeButton, 'click', this.toggleKey.bind(this));\n\n\t\tconst copyButton = Tag.render`\n\t\t\t<button class=\"ui-btn-link ui-btn\">\n\t\t\t\t<span class=\"ui-icon-set --copy-plates\"></span>\n\t\t\t</button>\n\t\t`;\n\t\tEvent.bind(copyButton, 'click', this.copyText.bind(this));\n\n\t\tconst content = Tag.render`\n\t\t\t<div class=\"ui-ctl ui-ctl__combined-input ui-ctl-w100\">\n\t\t\t\t<div class=\"ui-ctl-icon__set ui-ctl-after\">\n\t\t\t\t\t${this.eyeButton}\n\t\t\t\t\t${copyButton}\n\t\t\t\t</div>\n\t\t\t\t${this.keyInput}\n\t\t\t</div>\n\t\t`;\n\n\t\tDom.append(content, this._innerWrapper);\n\n\t\tthis.refreshButton = new Button({\n\t\t\ttext: Loc.getMessage('BICONNECTOR_SUPERSET_SETTINGS_COMMON_KEY_FIELD_REFRESH_BUTTON_MSGVER_1'),\n\t\t\tcolor: ButtonColor.LIGHT_BORDER,\n\t\t\tsize: ButtonSize.MEDIUM,\n\t\t\tonclick: this.refreshKey.bind(this),\n\t\t});\n\t\tthis.refreshButton.renderTo(this._innerWrapper);\n\n\t\tthis.registerLayout(options);\n\t\tthis._hasLayout = true;\n\t}\n\n\ttoggleKey(event: Event): void\n\t{\n\t\tif (!Type.isDomNode(this.keyInput))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst eye = this.eyeButton.querySelector('span');\n\t\tif (this.keyInput.type === 'password')\n\t\t{\n\t\t\tthis.keyInput.type = 'text';\n\t\t\tDom.removeClass(eye, '--crossed-eye');\n\t\t\tDom.addClass(eye, '--opened-eye');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.keyInput.type = 'password';\n\t\t\tDom.removeClass(eye, '--opened-eye');\n\t\t\tDom.addClass(eye, '--crossed-eye');\n\t\t}\n\t}\n\n\tcopyText(event): void\n\t{\n\t\tif (!Type.isDomNode(this.keyInput))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tBX.clipboard.copy(this.getValue());\n\n\t\tUI.Notification.Center.notify({\n\t\t\tcontent: Loc.getMessage('BICONNECTOR_SUPERSET_SETTINGS_COMMON_KEY_COPIED'),\n\t\t\tautoHideDelay: 2000,\n\t\t});\n\t}\n\n\trefreshKey(): void\n\t{\n\t\tthis.refreshButton.setClocking();\n\n\t\tajax\n\t\t\t.runComponentAction(\n\t\t\t\t'bitrix:biconnector.apachesuperset.setting',\n\t\t\t\t'changeBiToken',\n\t\t\t\t{\tmode: 'class' },\n\t\t\t)\n\t\t\t.then(\n\t\t\t\t(response) => {\n\t\t\t\t\tconst generatedKey = response.data;\n\t\t\t\t\tif (Type.isStringFilled(generatedKey))\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.keyInput.value = Text.encode(generatedKey);\n\t\t\t\t\t\tUI.Notification.Center.notify({\n\t\t\t\t\t\t\tcontent: Loc.getMessage('BICONNECTOR_SUPERSET_SETTINGS_KEY_UPDATE_SUCCESS'),\n\t\t\t\t\t\t\tautoHideDelay: 2000,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tUI.Notification.Center.notify({\n\t\t\t\t\t\t\tcontent: Loc.getMessage('BICONNECTOR_SUPERSET_SETTINGS_KEY_UPDATE_FAILED'),\n\t\t\t\t\t\t\tautoHideDelay: 2000,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.refreshButton.setClocking(false);\n\t\t\t\t},\n\t\t\t);\n\t}\n}\n","import { Tag, Dom, Event, Loc, Type, Text } from 'main.core';\nimport { TagSelector } from 'ui.entity-selector';\nimport 'ui.forms';\nimport 'ui.buttons';\n\nexport class UserNotificationField extends BX.UI.EntityEditorCustom\n{\n\tkeyInput: HTMLElement;\n\teyeButton: HTMLElement;\n\trefreshButton: HTMLElement;\n\trefreshKeyLock: boolean = false;\n\t#values: Set;\n\t#currentValues: Set;\n\n\tstatic create(id, settings)\n\t{\n\t\tconst self = new this(id, settings);\n\t\tself.initialize(id, settings);\n\n\t\treturn self;\n\t}\n\n\tinitialize(id, settings)\n\t{\n\t\tsuper.initialize(id, settings);\n\t\tthis.#values = new Set();\n\t\tthis.#currentValues = new Set();\n\n\t\tthis._model\n\t\t\t.getField(this.getName(), [])\n\t\t\t.forEach((id) => {\n\t\t\t\tid = Text.toNumber(id);\n\t\t\t\tthis.#values.add(id);\n\t\t\t\tthis.#currentValues.add(id);\n\t\t\t})\n\t\t;\n\t}\n\n\tcreateTitleNode(): HTMLElement\n\t{\n\t\treturn Tag.render`<span></span>`;\n\t}\n\n\tlayout(options: {}): void\n\t{\n\t\tthis.ensureWrapperCreated({ classNames: ['ui-entity-editor-field-text'] });\n\t\tthis.adjustWrapper();\n\n\t\tconst message = Loc.getMessage(\n\t\t\t'BICONNECTOR_SUPERSET_SETTINGS_NEW_DASHBOARD_NOTIFICATION_HINT_LINK',\n\t\t\t{\n\t\t\t\t'#HINT_LINK#': '<link></link>',\n\t\t\t},\n\t\t);\n\n\t\tconst hint = Tag.render`\n\t\t\t<div class=\"biconnector-superset-settings-panel-range__hint\">\n\t\t\t\t${message}\n\t\t\t</div>\n\t\t`;\n\n\t\tconst link = Tag.render`\n\t\t\t<a class=\"biconnector-superset-settings-panel-range__hint-link\">\n\t\t\t\t${Loc.getMessage('BICONNECTOR_SUPERSET_SETTINGS_DASHBOARD_HINT_LINK')}\n\t\t\t</a>\n\t\t`;\n\n\t\tEvent.bind(link, 'click', () => {\n\t\t\ttop.BX.Helper.show('redirect=detail&code=20337242&anchor=UpdateNotification');\n\t\t});\n\n\t\tDom.replace(hint.querySelector('link'), link);\n\n\t\tDom.insertBefore(hint, this._container);\n\n\t\tthis._innerWrapper = Tag.render`<div class='ui-entity-editor-content-block ui-ctl-custom biconnector-superset-settings-panel-key-info-container'></div>`;\n\t\tDom.append(this._innerWrapper, this._wrapper);\n\n\t\tconst content = Tag.render`\t\n\t\t\t<div class=\"ui-ctl-w100\"></div>\n\t\t`;\n\n\t\tDom.append(content, this._innerWrapper);\n\n\t\tconst preselectedItems = [];\n\t\tthis.#values.forEach((id) => {\n\t\t\tpreselectedItems.push(['user', id]);\n\t\t});\n\n\t\tconst tagSelector = new TagSelector({\n\t\t\tdialogOptions: {\n\t\t\t\tcontext: 'biconnector--new-dashboard-notify',\n\t\t\t\tentities: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'user',\n\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\tselectMode: 'usersOnly',\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\tpreselectedItems,\n\t\t\t},\n\t\t\tevents: {\n\t\t\t\tonBeforeTagAdd: (event) => {\n\t\t\t\t\tconst { tag } = event.getData();\n\t\t\t\t\tthis.#values.add(tag.getId());\n\n\t\t\t\t\tthis.onChange();\n\t\t\t\t},\n\t\t\t\tonBeforeTagRemove: (event) => {\n\t\t\t\t\tconst { tag } = event.getData();\n\t\t\t\t\tthis.#values.delete(tag.getId());\n\n\t\t\t\t\tthis.onChange();\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\n\t\ttagSelector.renderTo(content);\n\n\t\tDom.addClass(tagSelector.getOuterContainer(), 'ui-ctl-element');\n\n\t\tthis.registerLayout(options);\n\t\tthis._hasLayout = true;\n\t}\n\n\tonChange(): void\n\t{\n\t\tif (this.#currentValues.size !== this.#values.size)\n\t\t{\n\t\t\tthis.markAsChanged();\n\n\t\t\treturn;\n\t\t}\n\n\t\tthis._isChanged = false;\n\n\t\tthis.#values.forEach((id: number) => {\n\t\t\tif (!this.#currentValues.has(id))\n\t\t\t{\n\t\t\t\tthis.markAsChanged();\n\t\t\t}\n\t\t});\n\t}\n\n\tsave(): void\n\t{\n\t\tconst values = [];\n\n\t\tif (Type.isDomNode(this._innerWrapper))\n\t\t{\n\t\t\tconst oldSaveBlock = this._innerWrapper.querySelector('.save-block');\n\t\t\tif (Type.isDomNode(oldSaveBlock))\n\t\t\t{\n\t\t\t\tDom.remove(oldSaveBlock);\n\t\t\t}\n\n\t\t\tconst saveBlock = Tag.render`<div class=\"save-block\"></div>`;\n\t\t\tthis.#values.forEach((id) => {\n\t\t\t\tvalues.push(id);\n\n\t\t\t\tDom.append(Tag.render`<input type=\"hidden\" name=\"${this.getName()}[]\" value=\"${id}\">`, saveBlock);\n\t\t\t});\n\t\t\tDom.append(saveBlock, this._innerWrapper);\n\t\t}\n\n\t\tthis._model.setField(this.getName(), values);\n\t}\n}\n","/* eslint-disable no-underscore-dangle,@bitrix24/bitrix24-rules/no-pseudo-private */\nimport { Tag, Dom, Event, Loc, Type } from 'main.core';\nimport { TagSelector } from 'ui.entity-selector';\nimport 'ui.forms';\nimport 'ui.buttons';\n\nexport class DashboardOwnerField extends BX.UI.EntityEditorCustom\n{\n\t#ownerId: number;\n\t#initialOwnerId: number;\n\n\tstatic create(id, settings): DashboardOwnerField\n\t{\n\t\tconst self = new this(id, settings);\n\t\tself.initialize(id, settings);\n\n\t\treturn self;\n\t}\n\n\tinitialize(id, settings)\n\t{\n\t\tsuper.initialize(id, settings);\n\t\tthis.#ownerId = this._model.getIntegerField(this.getName(), null);\n\t\tthis.#initialOwnerId = this._model.getIntegerField(this.getName(), null);\n\t}\n\n\tlayout(options: {})\n\t{\n\t\tthis.ensureWrapperCreated({ classNames: ['ui-entity-editor-field-text'] });\n\t\tthis.adjustWrapper();\n\n\t\tconst message = Loc.getMessage(\n\t\t\t'BICONNECTOR_SUPERSET_SETTINGS_OWNER_HINT_LINK',\n\t\t\t{\n\t\t\t\t'#HINT_LINK#': '<link></link>',\n\t\t\t},\n\t\t);\n\n\t\tconst hint = Tag.render`\n\t\t\t<div class=\"biconnector-superset-settings-panel-range__hint\">\n\t\t\t\t${message}\n\t\t\t</div>\n\t\t`;\n\n\t\tconst link = Tag.render`\n\t\t\t<a class=\"biconnector-superset-settings-panel-range__hint-link\">\n\t\t\t\t${Loc.getMessage('BICONNECTOR_SUPERSET_SETTINGS_DASHBOARD_HINT_LINK')}\n\t\t\t</a>\n\t\t`;\n\n\t\tEvent.bind(link, 'click', () => {\n\t\t\ttop.BX.Helper.show('redirect=detail&code=20337242&anchor=DashboardOwner');\n\t\t});\n\n\t\tDom.replace(hint.querySelector('link'), link);\n\n\t\tDom.insertBefore(hint, this._container);\n\n\t\tthis._innerWrapper = Tag.render`<div class='ui-entity-editor-content-block ui-ctl-custom'></div>`;\n\t\tDom.append(this._innerWrapper, this._wrapper);\n\n\t\tconst content = Tag.render`\t\n\t\t\t<div class=\"ui-ctl-w100\"></div>\n\t\t`;\n\n\t\tDom.append(content, this._innerWrapper);\n\n\t\tconst tagSelector = new TagSelector({\n\t\t\tmultiple: false,\n\t\t\tdialogOptions: {\n\t\t\t\tcontext: 'biconnector--dashboard-owner',\n\t\t\t\tdropdownMode: true,\n\t\t\t\tentities: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'user',\n\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\tselectMode: 'usersOnly',\n\t\t\t\t\t\t\tinviteEmployeeLink: false,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\tpreselectedItems: [\n\t\t\t\t\t['user', this._model.getField(this.getName(), null)],\n\t\t\t\t],\n\t\t\t},\n\t\t\tevents: {\n\t\t\t\tonBeforeTagAdd: (event) => {\n\t\t\t\t\tconst { tag } = event.getData();\n\t\t\t\t\tthis.#ownerId = tag.getId();\n\t\t\t\t\tthis.onChange();\n\t\t\t\t},\n\t\t\t\tonBeforeTagRemove: (event) => {\n\t\t\t\t\tthis.#ownerId = null;\n\t\t\t\t\tthis.onChange();\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\n\t\ttagSelector.renderTo(content);\n\n\t\tDom.addClass(tagSelector.getOuterContainer(), 'ui-ctl-element');\n\n\t\tthis.registerLayout(options);\n\t\tthis._hasLayout = true;\n\t}\n\n\tonChange(): void\n\t{\n\t\tif (this.#initialOwnerId !== this.#ownerId)\n\t\t{\n\t\t\tthis.markAsChanged();\n\n\t\t\treturn;\n\t\t}\n\n\t\tthis._isChanged = false;\n\t}\n\n\tsave()\n\t{\n\t\tif (Type.isDomNode(this._innerWrapper))\n\t\t{\n\t\t\tconst oldSaveBlock = this._innerWrapper.querySelector('.save-block');\n\t\t\tif (Type.isDomNode(oldSaveBlock))\n\t\t\t{\n\t\t\t\tDom.remove(oldSaveBlock);\n\t\t\t}\n\n\t\t\tconst saveBlock = Tag.render`<div class=\"save-block\"></div>`;\n\t\t\tDom.append(Tag.render`<input type=\"hidden\" name=\"${this.getName()}\" value=\"${this.#ownerId}\">`, saveBlock);\n\t\t\tDom.append(saveBlock, this._innerWrapper);\n\t\t}\n\n\t\tthis._model.setField(this.getName(), this.#ownerId);\n\t}\n}\n","/* eslint-disable no-underscore-dangle,@bitrix24/bitrix24-rules/no-pseudo-private */\nimport { Tag, Dom, Event, Loc } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { Button, ButtonSize, ButtonColor } from 'ui.buttons';\n\nexport class DeleteSupersetField extends BX.UI.EntityEditorList\n{\n\t#deleteButton: Button;\n\t#deletePopup: BX.BIConnector.ApacheSupersetCleanPopup;\n\n\tstatic create(id, settings): DashboardOwnerField\n\t{\n\t\tconst self = new this(id, settings);\n\t\tself.initialize(id, settings);\n\n\t\treturn self;\n\t}\n\n\tinitialize(id, settings)\n\t{\n\t\tsuper.initialize(id, settings);\n\t}\n\n\tcreateTitleNode(): HTMLElement\n\t{\n\t\treturn Tag.render`<span></span>`;\n\t}\n\n\tlayout(options: {}): void\n\t{\n\t\tthis.ensureWrapperCreated({ classNames: ['ui-entity-editor-field-text'] });\n\t\tthis.adjustWrapper();\n\n\t\tconst message = Loc.getMessage(\n\t\t\t'BICONNECTOR_SUPERSET_SETTINGS_DELETE_SUPERSET_FIELD_HINT',\n\t\t\t{\n\t\t\t\t'#HINT_LINK#': '<link></link>',\n\t\t\t},\n\t\t);\n\n\t\tconst hint = Tag.render`\n\t\t\t<div class=\"biconnector-superset-settings-panel-range__hint\">\n\t\t\t\t${message}\n\t\t\t</div>\n\t\t`;\n\n\t\tconst link = Tag.render`\n\t\t\t<a class=\"biconnector-superset-settings-panel-range__hint-link\">\n\t\t\t\t${Loc.getMessage('BICONNECTOR_SUPERSET_SETTINGS_DASHBOARD_HINT_LINK')}\n\t\t\t</a>\n\t\t`;\n\n\t\tEvent.bind(link, 'click', () => {\n\t\t\ttop.BX.Helper.show('redirect=detail&code=20337242&anchor=Disable');\n\t\t});\n\n\t\tDom.replace(hint.querySelector('link'), link);\n\n\t\tDom.insertBefore(hint, this._container);\n\n\t\tthis._innerWrapper = Tag.render`<div class='ui-entity-editor-content-block ui-ctl-custom'></div>`;\n\t\tDom.append(this._innerWrapper, this._wrapper);\n\t\tconst deleteButtonBlock = Tag.render`\n\t\t\t<div class=\"biconnector-superset-delete-superset-button-block\"></div>\n\t\t`;\n\n\t\tthis.#deleteButton = new Button({\n\t\t\ttext: Loc.getMessage('BICONNECTOR_SUPERSET_SETTINGS_DELETE_SUPERSET_FIELD_DELETE_BUTTON'),\n\t\t\tcolor: ButtonColor.LIGHT_BORDER,\n\t\t\tsize: ButtonSize.SMALL,\n\t\t\tonclick: this.deleteSuperset.bind(this),\n\t\t});\n\t\tthis.#deleteButton.renderTo(deleteButtonBlock);\n\n\t\t// Put the clear button into the section header\n\t\tEventEmitter.subscribe('BX.UI.EntityEditorSection:onLayout', (event) => {\n\t\t\tif (event.data[1].id === 'DELETE_SUPERSET_SECTION')\n\t\t\t{\n\t\t\t\tevent.data[1].customNodes.push(deleteButtonBlock);\n\t\t\t}\n\t\t});\n\n\t\tthis.registerLayout(options);\n\t\tthis._hasLayout = true;\n\t}\n\n\tdeleteSuperset()\n\t{\n\t\tthis.#deletePopup = new BX.BIConnector.ApacheSupersetCleanPopup({\n\t\t\tonSuccess: () => {\n\t\t\t\twindow.top.location.reload();\n\t\t\t},\n\t\t\tonAccept: () => {\n\t\t\t\tthis.#deleteButton.setClocking();\n\t\t\t},\n\t\t\tonError: () => {\n\t\t\t\tthis.#deleteButton.setClocking(false);\n\t\t\t},\n\t\t});\n\n\t\tthis.#deletePopup.show();\n\t}\n}\n","/* eslint-disable no-underscore-dangle,@bitrix24/bitrix24-rules/no-pseudo-private */\nimport { ajax as Ajax, Tag, Dom, Event, Loc } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { Button, ButtonState, ButtonSize, ButtonColor } from 'ui.buttons';\nimport { Countdown } from 'ui.countdown';\nimport { UI } from 'ui.notification';\nimport 'ui.forms';\n\nexport class ClearCacheField extends BX.UI.EntityEditorCustom\n{\n\t#clearCacheButton: Button;\n\t#canClearCache: boolean = true;\n\t#clearTimeout: number = 0;\n\n\tstatic create(id, settings): ClearCacheField\n\t{\n\t\tconst self = new this(id, settings);\n\t\tself.initialize(id, settings);\n\n\t\treturn self;\n\t}\n\n\tinitialize(id, settings)\n\t{\n\t\tsuper.initialize(id, settings);\n\n\t\tconst fieldSettings = settings.model.getData();\n\t\tthis.#canClearCache = fieldSettings.canClearCache;\n\t\tthis.#clearTimeout = parseInt(fieldSettings.clearCacheTimeout, 10);\n\t\tif (!this.#canClearCache)\n\t\t{\n\t\t\tthis.#initCacheTimer();\n\t\t}\n\t}\n\n\t#initCacheTimer()\n\t{\n\t\tconst timerContainer = Tag.render`\n\t\t\t<div class=\"biconnector-cache-container\"></div>\n\t\t`;\n\n\t\tconst timerProps = {\n\t\t\tseconds: this.#clearTimeout,\n\t\t\tnode: timerContainer,\n\t\t\tonTimerEnd: () => {\n\t\t\t\tthis.#canClearCache = true;\n\t\t\t\tthis.#clearCacheButton.setDisabled(false);\n\t\t\t},\n\t\t\tonTimerUpdate: (data) => {\n\t\t\t\tthis.#updateHintTimer(data);\n\t\t\t},\n\t\t};\n\t\tnew Countdown(timerProps);\n\t}\n\n\t#updateHintTimer(data)\n\t{\n\t\tthis.#clearTimeout = data.seconds;\n\t}\n\n\t#clearCache(): Promise\n\t{\n\t\tif (!this.#canClearCache)\n\t\t{\n\t\t\treturn new Promise((resolve) => {\n\t\t\t\tresolve();\n\t\t\t});\n\t\t}\n\n\t\tthis.#clearCacheButton.setDisabled();\n\t\tthis.#canClearCache = false;\n\n\t\treturn Ajax.runAction('biconnector.superset.clearCache')\n\t\t\t.then((response) => {\n\t\t\t\tUI.Notification.Center.notify({\n\t\t\t\t\tcontent: Loc.getMessage('BICONNECTOR_SUPERSET_SETTINGS_CLEAR_CACHE_SUCCESS'),\n\t\t\t\t\tautoHideDelay: 2000,\n\t\t\t\t});\n\t\t\t\tthis.#clearTimeout = response.data.timeoutToNextClearCache;\n\t\t\t\tthis.#initCacheTimer();\n\t\t\t})\n\t\t\t.catch(() => {\n\t\t\t\tUI.Notification.Center.notify({\n\t\t\t\t\tcontent: Loc.getMessage('BICONNECTOR_SUPERSET_SETTINGS_CLEAR_CACHE_ERROR'),\n\t\t\t\t\tautoHideDelay: 2000,\n\t\t\t\t});\n\t\t\t\tthis.#clearCacheButton.setDisabled(false);\n\t\t\t\tthis.#canClearCache = true;\n\t\t\t})\n\t\t;\n\t}\n\n\tlayout(options: {})\n\t{\n\t\tthis.ensureWrapperCreated({ classNames: ['ui-entity-editor-field-text'] });\n\t\tthis.adjustWrapper();\n\n\t\tconst message = Loc.getMessage(\n\t\t\t'BICONNECTOR_SUPERSET_SETTINGS_CLEAR_CACHE_HINT_LINK',\n\t\t\t{\n\t\t\t\t'#HINT_LINK#': '<link></link>',\n\t\t\t},\n\t\t);\n\n\t\tconst hint = Tag.render`\n\t\t\t<div class=\"biconnector-superset-settings-panel-range__hint\">\n\t\t\t\t${message}\n\t\t\t</div>\n\t\t`;\n\n\t\tconst link = Tag.render`\n\t\t\t<a class=\"biconnector-superset-settings-panel-range__hint-link\">\n\t\t\t\t${Loc.getMessage('BICONNECTOR_SUPERSET_SETTINGS_DASHBOARD_HINT_LINK')}\n\t\t\t</a>\n\t\t`;\n\n\t\tEvent.bind(link, 'click', () => {\n\t\t\ttop.BX.Helper.show('redirect=detail&code=21000502');\n\t\t});\n\n\t\tDom.replace(hint.querySelector('link'), link);\n\t\tDom.insertBefore(hint, this._container);\n\n\t\tthis._innerWrapper = Tag.render`<div class='ui-entity-editor-content-block ui-ctl-custom'></div>`;\n\t\tDom.append(this._innerWrapper, this._wrapper);\n\n\t\tthis.#initClearCacheButton();\n\n\t\tthis.registerLayout(options);\n\t\tthis._hasLayout = true;\n\t}\n\n\t#initClearCacheButton(): Button\n\t{\n\t\tconst buttonContainer = Tag.render`<div></div>`;\n\t\tthis.#clearCacheButton = new Button({\n\t\t\ttext: Loc.getMessage('BICONNECTOR_SUPERSET_SETTINGS_CLEAR_CACHE_BUTTON'),\n\t\t\tcolor: ButtonColor.LIGHT_BORDER,\n\t\t\tsize: ButtonSize.SMALL,\n\t\t\tonclick: this.#clearCache.bind(this),\n\t\t\tstate: this.#canClearCache ? null : ButtonState.DISABLED,\n\t\t});\n\t\tthis.#clearCacheButton.renderTo(buttonContainer);\n\n\t\t// Put the clear button into the section header\n\t\tEventEmitter.subscribe('BX.UI.EntityEditorSection:onLayout', (event) => {\n\t\t\tif (event.data[1].id === 'CLEAR_CACHE_SECTION')\n\t\t\t{\n\t\t\t\tevent.data[1].customNodes.push(buttonContainer);\n\t\t\t}\n\t\t});\n\n\t\tconst node = this.#clearCacheButton.button;\n\t\tconst hint = BX.UI.Hint.createInstance({\n\t\t\tpopupParameters: {\n\t\t\t\toffsetLeft: -60,\n\t\t\t\tangle: {\n\t\t\t\t\toffset: 160,\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\n\t\tEvent.bind(node, 'mouseenter', () => {\n\t\t\tthis.#clearCacheButton.button.setAttribute('data-hint-no-icon', '');\n\t\t\tif (this.#clearTimeout)\n\t\t\t{\n\t\t\t\tconst minutesLeft = Math.ceil(parseInt(this.#clearTimeout, 10) / 60);\n\t\t\t\thint.show(\n\t\t\t\t\tnode,\n\t\t\t\t\tLoc.getMessagePlural(\n\t\t\t\t\t\t'BICONNECTOR_SUPERSET_SETTINGS_CLEAR_CACHE_BUTTON_HINT_TIME_LEFT',\n\t\t\t\t\t\tminutesLeft,\n\t\t\t\t\t\t{ '#COUNT#': minutesLeft },\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t\t}\n\t\t});\n\n\t\tEvent.bind(node, 'mouseleave', () => {\n\t\t\thint.hide(node);\n\t\t});\n\t}\n}\n","/* eslint-disable no-underscore-dangle,@bitrix24/bitrix24-rules/no-pseudo-private */\nimport { Tag, Dom, Event, Loc, Type } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport 'ui.forms';\nimport 'ui.buttons';\nimport { DashboardParametersSelector } from 'biconnector.dashboard-parameters-selector';\nimport type { Parameter } from 'biconnector.dashboard-parameters-selector';\n\nexport class DashboardParamsField extends BX.UI.EntityEditorCustom\n{\n\t#scopes: Set;\n\t#params: Set;\n\t#scopeParamsMap: {[scopeCode: string]: Array<Parameter>};\n\n\tstatic create(id, settings): this\n\t{\n\t\tconst self = new this(id, settings);\n\t\tself.initialize(id, settings);\n\n\t\treturn self;\n\t}\n\n\tinitialize(id, settings)\n\t{\n\t\tsuper.initialize(id, settings);\n\t\tthis.#scopes = new Set();\n\t\tconst scopes = this._model.getField('SCOPE', []);\n\t\tscopes.forEach((scopeCode) => {\n\t\t\tthis.#scopes.add(scopeCode);\n\t\t});\n\n\t\tthis.#params = new Set();\n\t\tconst params = this._model.getField('PARAMS', []);\n\t\tparams.forEach((param) => {\n\t\t\tthis.#params.add(param);\n\t\t});\n\n\t\tthis.#scopeParamsMap = this._model.getField('SCOPE_PARAMS_MAP', {});\n\n\t\tEventEmitter.subscribe('BIConnector.DashboardParamsSelector:onChange', this.onChange.bind(this));\n\t}\n\n\tlayout(options: {})\n\t{\n\t\tthis.ensureWrapperCreated({ classNames: ['ui-entity-editor-field-text'] });\n\t\tthis.adjustWrapper();\n\t\tthis._innerWrapper = Tag.render`<div class='ui-entity-editor-content-block ui-ctl-custom'></div>`;\n\n\t\tconst message = Loc.getMessage(\n\t\t\t'BICONNECTOR_SUPERSET_SETTINGS_PARAMS_HINT_LINK',\n\t\t\t{\n\t\t\t\t'#HINT_LINK#': '<link></link>',\n\t\t\t},\n\t\t);\n\n\t\tconst hint = Tag.render`\n\t\t\t<div class=\"biconnector-superset-settings-panel-range__hint\">\n\t\t\t\t${message}\n\t\t\t</div>\n\t\t`;\n\n\t\tconst link = Tag.render`\n\t\t\t<a class=\"biconnector-superset-settings-panel-range__hint-link\">\n\t\t\t\t${Loc.getMessage('BICONNECTOR_SUPERSET_SETTINGS_DASHBOARD_HINT_LINK')}\n\t\t\t</a>\n\t\t`;\n\n\t\tEvent.bind(link, 'click', () => {\n\t\t\ttop.BX.Helper.show('redirect=detail&code=20337242&anchor=DashboardOwner');\n\t\t});\n\n\t\tDom.replace(hint.querySelector('link'), link);\n\t\tDom.insertBefore(hint, this._container);\n\n\t\tDom.append(this._innerWrapper, this._wrapper);\n\t\tconst selectorParams = {\n\t\t\tscopes: this.#scopes,\n\t\t\tparams: this.#params,\n\t\t\tscopeParamsMap: this.#scopeParamsMap,\n\t\t};\n\n\t\tconst selector = new DashboardParametersSelector(selectorParams);\n\t\tDom.append(selector.getLayout(), this._innerWrapper);\n\n\t\tthis.registerLayout(options);\n\t\tthis._hasLayout = true;\n\t}\n\n\tsave()\n\t{\n\t\tif (Type.isDomNode(this._innerWrapper))\n\t\t{\n\t\t\tconst oldSaveBlock = this._innerWrapper.querySelector('.save-block');\n\t\t\tif (Type.isDomNode(oldSaveBlock))\n\t\t\t{\n\t\t\t\tDom.remove(oldSaveBlock);\n\t\t\t}\n\n\t\t\tconst saveBlock = Tag.render`<div class=\"save-block\"></div>`;\n\t\t\tfor (const scope of this.#scopes)\n\t\t\t{\n\t\t\t\tDom.append(Tag.render`<input type=\"hidden\" name=\"${this.getName()}[SCOPE][]\" value=\"${scope}\">`, saveBlock);\n\t\t\t}\n\n\t\t\tfor (const param of this.#params)\n\t\t\t{\n\t\t\t\tDom.append(Tag.render`<input type=\"hidden\" name=\"${this.getName()}[PARAMS][]\" value=\"${param}\">`, saveBlock);\n\t\t\t}\n\t\t\tDom.append(saveBlock, this._innerWrapper);\n\t\t}\n\n\t\tthis._model.setField(this.getName(), this.#scopes);\n\t}\n\n\tonChange(params): void\n\t{\n\t\tconst { isChanged } = params.data;\n\t\tif (isChanged)\n\t\t{\n\t\t\tthis.markAsChanged();\n\n\t\t\treturn;\n\t\t}\n\n\t\tthis._isChanged = false;\n\t}\n}\n","import { EventEmitter } from 'main.core.events';\nimport type { BaseEvent } from 'main.core.events';\n\nimport {\n\tDateFilterField,\n\tDashboardDateFilterField,\n\tKeyInfoField,\n\tUserNotificationField,\n\tDashboardOwnerField,\n\tDashboardParamsField,\n\tDeleteSupersetField,\n\tClearCacheField,\n} from './entities/index';\n\nexport class FieldFactory\n{\n\tconstructor(entityEditorControlFactory: string = 'BX.UI.EntityEditorControlFactory')\n\t{\n\t\tEventEmitter.subscribe(`${entityEditorControlFactory}:onInitialize`, (event: BaseEvent) => {\n\t\t\tconst [, eventArgs] = event.getCompatData();\n\t\t\teventArgs.methods.dashboardSettings = this.factory.bind(this);\n\t\t});\n\t}\n\n\tfactory(type, controlId, settings): ?BX.UI.EntityEditorField\n\t{\n\t\tswitch (type)\n\t\t{\n\t\t\tcase 'timePeriod':\n\t\t\t\treturn DateFilterField.create(controlId, settings);\n\t\t\tcase 'dashboardTimePeriod':\n\t\t\t\treturn DashboardDateFilterField.create(controlId, settings);\n\t\t\tcase 'keyInfo':\n\t\t\t\treturn KeyInfoField.create(controlId, settings);\n\t\t\tcase 'userNotificationSelector':\n\t\t\t\treturn UserNotificationField.create(controlId, settings);\n\t\t\tcase 'ownerSelector':\n\t\t\t\treturn DashboardOwnerField.create(controlId, settings);\n\t\t\tcase 'dashboardParametersSelector':\n\t\t\t\treturn DashboardParamsField.create(controlId, settings);\n\t\t\tcase 'deleteSuperset':\n\t\t\t\treturn DeleteSupersetField.create(controlId, settings);\n\t\t\tcase 'clearCache':\n\t\t\t\treturn ClearCacheField.create(controlId, settings);\n\t\t\tdefault:\n\t\t\t\treturn null;\n\t\t}\n\t}\n}\n","import { ControllerFactory } from './controllers/controller-factory';\nimport { FieldFactory } from './fields/field-factory';\n\nexport class SettingsPanel\n{\n\tstatic registerFieldFactory(entityEditorControlFactory): void\n\t{\n\t\tnew FieldFactory(entityEditorControlFactory);\n\t}\n\n\tstatic registerControllerFactory(entityEditorControllerFactory): void\n\t{\n\t\tnew ControllerFactory(entityEditorControllerFactory);\n\t}\n}\n"],"names":["SidePanel","BX","SettingController","id","settings","initialize","analytic","config","dashboardAnalyticInfo","EventEmitter","subscribeOnce","event","getData","editor","_toolPanel","disableSaveButton","enableSaveButton","eventArguments","enableCloseConfirmation","analyticOptions","Type","isStringFilled","type","toLowerCase","p1","ApacheSupersetAnalytics","buildAppIdForAnalyticRequest","appId","p2","c_element","status","sendAnalytics","_editor","_modeSwitch","reset","innerCancel","Instance","close","UI","EntityEditorController","previousSlider","getPreviousSlider","getSliderByWindow","window","parent","getWindow","top","Event","emit","IconController","_classPrivateMethodInitSpec","_classPrivateMethodGet","control","_controls","_sections","length","sectionList","section","getTitle","container","_headerContainer","data","headerTitle","querySelector","iconClass","icon","Tag","render","Dom","insertBefore","ControllerFactory","eventName","subscribe","getCompatData","eventArgs","methods","dashboardSettings","factory","bind","controlId","DateFilterField","dateSelectorBlock","toInput","startInput","includeLastDateCheckbox","options","layoutRangeField","getValue","RANGE_VALUE","layoutHint","e","item","value","getModel","getField","isRangeSelected","remove","endInput","dateStartValue","Text","encode","getDateStartFieldName","showCalendar","onChange","dateEndValue","getDateEndFieldName","getIncludeLastDateName","includeLastDateValue","checked","Loc","getMessage","append","_innerWrapper","addClass","_selectContainer","removeClass","hintContainer","getHintText","_container","hintLink","replace","_schemeElement","dateStartFieldName","dateEndFieldName","includeLastDateName","_model","setField","isDomNode","self","input","calendar","get","Close","node","field","bTime","bSetFocus","EntityEditorList","DashboardDateFilterField","KeyInfoField","ensureWrapperCreated","classNames","adjustWrapper","message","hint","link","Helper","show","_wrapper","keyInput","eyeButton","toggleKey","copyButton","copyText","content","refreshButton","Button","text","color","ButtonColor","LIGHT_BORDER","size","ButtonSize","MEDIUM","onclick","refreshKey","renderTo","registerLayout","_hasLayout","eye","clipboard","copy","Notification","Center","notify","autoHideDelay","setClocking","ajax","runComponentAction","mode","then","response","generatedKey","EntityEditorCustom","UserNotificationField","Set","getName","forEach","toNumber","add","preselectedItems","push","tagSelector","TagSelector","dialogOptions","context","entities","selectMode","events","onBeforeTagAdd","tag","getId","onBeforeTagRemove","getOuterContainer","markAsChanged","_isChanged","has","values","oldSaveBlock","saveBlock","DashboardOwnerField","_classPrivateFieldInitSpec","getIntegerField","multiple","dropdownMode","inviteEmployeeLink","DeleteSupersetField","deleteButtonBlock","SMALL","deleteSuperset","customNodes","BIConnector","ApacheSupersetCleanPopup","onSuccess","location","reload","onAccept","onError","ClearCacheField","fieldSettings","model","canClearCache","parseInt","clearCacheTimeout","timerContainer","timerProps","seconds","onTimerEnd","setDisabled","onTimerUpdate","Countdown","Promise","resolve","Ajax","runAction","timeoutToNextClearCache","buttonContainer","state","ButtonState","DISABLED","button","Hint","createInstance","popupParameters","offsetLeft","angle","offset","setAttribute","minutesLeft","Math","ceil","getMessagePlural","hide","DashboardParamsField","scopes","scopeCode","params","param","selectorParams","scopeParamsMap","selector","DashboardParametersSelector","getLayout","scope","isChanged","FieldFactory","entityEditorControlFactory","create","SettingsPanel","entityEditorControllerFactory"],"mappings":"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"}