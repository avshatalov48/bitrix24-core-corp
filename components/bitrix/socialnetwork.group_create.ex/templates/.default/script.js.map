{"version":3,"file":"script.js","sources":["src/util.js","src/confidentialityselector.js","src/scrum.js","src/avatar.js","src/themepicker.js","src/tags.js","src/typepresetselector.js","src/fields.js","src/buttons.js","src/wizard.js","src/alert.js","src/team.js","src/features.js","src/uf.js","src/index.js"],"sourcesContent":["import {Loc, Type, Dom, Tag} from 'main.core';\n\nimport {WorkgroupForm} from './index';\n\nexport class Util\n{\n\tstatic cssClass = {\n\t\tselectorActive: '--active',\n\t\tselectorDisabled: '--disabled',\n\t};\n\n\tstatic initExpandSwitches()\n\t{\n\t\tconst expandSwitchers = document.querySelectorAll('[data-role=\"socialnetwork-group-create-ex__expandable\"]');\n\n\t\texpandSwitchers.forEach((switcher) => {\n\n\t\t\tswitcher.addEventListener('click', (e) => {\n\n\t\t\t\tconst targetId = e.currentTarget.getAttribute('for');\n\t\t\t\tconst target = document.getElementById(targetId);\n\t\t\t\tconst switcherWrapper = target.firstElementChild;\n\n\t\t\t\tif (target.offsetHeight === 0)\n\t\t\t\t{\n\t\t\t\t\ttarget.style.height = switcherWrapper.offsetHeight + 'px';\n\t\t\t\t\ttarget.classList.add('--open');\n\n\t\t\t\t\tconst scrollToTarget = () => {\n\t\t\t\t\t\tlet elementRealTop = target.getBoundingClientRect().top / 100;\n\t\t\t\t\t\tlet time = 400;\n\t\t\t\t\t\tlet currentTime = 0;\n\t\t\t\t\t\tlet scrollBySvs = () => {\n\t\t\t\t\t\t\twindow.scrollBy(0, elementRealTop);\n\t\t\t\t\t\t}\n\t\t\t\t\t\twhile (currentTime <= time)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\twindow.setTimeout(scrollBySvs, currentTime, elementRealTop);\n\t\t\t\t\t\t\tcurrentTime += time / 100;\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttarget.removeEventListener('transitionend', scrollToTarget);\n\t\t\t\t\t}\n\n\t\t\t\t\tconst adjustHeight = () => {\n\t\t\t\t\t\ttarget.style.height = 'auto';\n\t\t\t\t\t\ttarget.removeEventListener('transitionend', adjustHeight);\n\t\t\t\t\t}\n\n\t\t\t\t\ttarget.addEventListener('transitionend', adjustHeight);\n\t\t\t\t\ttarget.addEventListener('transitionend', scrollToTarget);\n\t\t\t\t}\n\n\t\t\t\tif (target.offsetHeight > 0)\n\t\t\t\t{\n\t\t\t\t\ttarget.style.height = target.offsetHeight + 'px';\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\ttarget.style.removeProperty('height');\n\t\t\t\t\t\ttarget.classList.remove('--open');\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\tstatic initDropdowns()\n\t{\n\n\t\tconst dropdownAreaList = document.querySelectorAll('[data-role=\"soc-net-dropdown\"]');\n\n\t\tdropdownAreaList.forEach((dropdownArea) => {\n\n\t\t\tdropdownArea.addEventListener('click', (e) => {\n\n\t\t\t\tconst dropdownArea = e.currentTarget;\n\t\t\t\tconst dropdownItemsData = this.getDropdownItems(dropdownArea);\n\t\t\t\tconst items = [];\n\n\t\t\t\tObject.entries(dropdownItemsData).forEach(([key, value]) => {\n\t\t\t\t\titems.push({\n\t\t\t\t\t\ttext: value,\n\t\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\t\tdropdownMenu.close();\n\n\t\t\t\t\t\t\tthis.setDropdownValue(\n\t\t\t\t\t\t\t\tdropdownArea.querySelector('.ui-ctl-element'),\n\t\t\t\t\t\t\t\tvalue,\n\t\t\t\t\t\t\t\tdropdownArea\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tthis.setInputValue(\n\t\t\t\t\t\t\t\tdropdownArea.querySelector('input'),\n\t\t\t\t\t\t\t\tkey,\n\t\t\t\t\t\t\t\tdropdownArea\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\tlet neighbourDropdownArea = null;\n\t\t\t\t\t\t\tif (dropdownArea.classList.contains('--nonproject'))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tneighbourDropdownArea = dropdownArea.parentNode.querySelector('.--project');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (dropdownArea.classList.contains('--project'))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tneighbourDropdownArea = dropdownArea.parentNode.querySelector('.--nonproject');\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (Type.isDomNode(neighbourDropdownArea))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.setDropdownValue(\n\t\t\t\t\t\t\t\t\tneighbourDropdownArea.querySelector('.ui-ctl-element'),\n\t\t\t\t\t\t\t\t\tvalue,\n\t\t\t\t\t\t\t\t\tneighbourDropdownArea\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tthis.setInputValue(\n\t\t\t\t\t\t\t\t\tneighbourDropdownArea.querySelector('input'),\n\t\t\t\t\t\t\t\t\tkey,\n\t\t\t\t\t\t\t\t\tneighbourDropdownArea\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\n\t\t\t\tconst dropdownMenu = new BX.PopupMenuWindow({\n\t\t\t\t\tautoHide: true,\n\t\t\t\t\tcacheable: false,\n\t\t\t\t\tbindElement: dropdownArea,\n\t\t\t\t\twidth: dropdownArea.offsetWidth,\n\t\t\t\t\tcloseByEsc: true,\n\t\t\t\t\tanimation: 'fading-slide',\n\t\t\t\t\titems: items,\n\t\t\t\t});\n\n\t\t\t\tdropdownMenu.params.width = dropdownArea.offsetWidth;\n\t\t\t\tdropdownMenu.show();\n\t\t\t});\n\t\t});\n\t}\n\n\tstatic setDropdownValue(node, value, containerNode)\n\t{\n\t\tconst dropdownItemsData = this.getDropdownItems(containerNode);\n\t\tObject.entries(dropdownItemsData).forEach(([, itemValue]) => {\n\t\t\tif (value === itemValue)\n\t\t\t{\n\t\t\t\tnode.innerText = value;\n\t\t\t}\n\t\t});\n\t}\n\n\tstatic setInputValue(node, value, containerNode)\n\t{\n\t\tconst dropdownItemsData = this.getDropdownItems(containerNode);\n\t\tObject.entries(dropdownItemsData).forEach(([itemKey]) => {\n\t\t\tif (value === itemKey)\n\t\t\t{\n\t\t\t\tnode.value = value;\n\t\t\t}\n\t\t});\n\t}\n\n\tstatic getDropdownItems(node)\n\t{\n\t\tlet dropdownItemsData = {};\n\n\t\ttry\n\t\t{\n\t\t\tdropdownItemsData = JSON.parse(node.getAttribute('data-items'));\n\t\t}\n\t\tcatch(e)\n\t\t{\n\t\t\treturn {};\n\t\t}\n\n\t\tif (!Type.isPlainObject(dropdownItemsData))\n\t\t{\n\t\t\treturn {};\n\t\t}\n\n\t\treturn dropdownItemsData;\n\t}\n\n\tstatic recalcFormPartProject(isChecked)\n\t{\n\t\tisChecked = !!isChecked;\n\n\t\tconst projectCheckboxNode = document.getElementById('GROUP_PROJECT');\n\t\tif (projectCheckboxNode)\n\t\t{\n\t\t\tthis.setCheckedValue(projectCheckboxNode, isChecked);\n\t\t}\n\n\t\tdocument.querySelectorAll('.socialnetwork-group-create-ex__create--switch-project, .socialnetwork-group-create-ex__create--switch-nonproject').forEach((node) => {\n\t\t\tif (isChecked)\n\t\t\t{\n\t\t\t\tnode.classList.add('--project');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tnode.classList.remove('--project');\n\t\t\t}\n\t\t});\n/*\n\t\tconst submitButtonNode = document.getElementById('sonet_group_create_popup_form_button_submit');\n\t\tif (\n\t\t\tsubmitButtonNode\n\t\t\t&& submitButtonNode.getAttribute('bx-action-type') === 'create'\n\t\t)\n\t\t{\n\t\t\tsubmitButtonNode.innerHTML = (isChecked ? Loc.getMessage('SONET_GCE_T_DO_CREATE_PROJECT') : Loc.getMessage('SONET_GCE_T_DO_CREATE'));\n\t\t}\n*/\n\t\tthis.recalcNameInput();\n\t}\n\n\tstatic recalcNameInput()\n\t{\n\t\tconst inputNode = document.getElementById('GROUP_NAME_input');\n\t\tif (!inputNode)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tlet placeholderText = Loc.getMessage('SONET_GCE_T_NAME3');\n\n\t\tconst formInstance = WorkgroupForm.getInstance();\n\t\tif (Type.isPlainObject(formInstance.projectTypes[formInstance.selectedProjectType]))\n\t\t{\n\t\t\tif (\n\t\t\t\tType.isStringFilled(formInstance.projectTypes[formInstance.selectedProjectType].SCRUM_PROJECT)\n\t\t\t\t&& formInstance.projectTypes[formInstance.selectedProjectType].SCRUM_PROJECT === 'Y'\n\t\t\t)\n\t\t\t{\n\t\t\t\tplaceholderText = Loc.getMessage('SONET_GCE_T_NAME3_SCRUM');\n\t\t\t}\n\t\t\telse if (\n\t\t\t\tType.isStringFilled(formInstance.projectTypes[formInstance.selectedProjectType].PROJECT)\n\t\t\t\t&& formInstance.projectTypes[formInstance.selectedProjectType].PROJECT === 'Y'\n\t\t\t)\n\t\t\t{\n\t\t\t\tplaceholderText = Loc.getMessage('SONET_GCE_T_NAME3_PROJECT');\n\t\t\t}\n\t\t}\n\n\t\tinputNode.placeholder = placeholderText;\n\t}\n\n\tstatic setCheckedValue(node, value)\n\t{\n\t\tif (!Type.isDomNode(node))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tvalue = !!value;\n\n\t\tif (node.type === 'checkbox')\n\t\t{\n\t\t\tnode.checked = value;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tnode.value = (value ? 'Y' : 'N');\n\t\t}\n\t}\n\n\tstatic getCheckedValue(node)\n\t{\n\t\tlet result = false;\n\n\t\tif (!Type.isDomNode(node))\n\t\t{\n\t\t\treturn result;\n\t\t}\n\n\t\tif (node.type == 'hidden')\n\t\t{\n\t\t\tresult = (node.value === 'Y');\n\t\t}\n\t\telse if (node.type == 'checkbox')\n\t\t{\n\t\t\tresult = node.checked;\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tstatic unselectAllSelectorItems(container, selectorClass)\n\t{\n\t\tif (!Type.isDomNode(container))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tcontainer.querySelectorAll(`.${selectorClass}`).forEach((selector) => {\n\t\t\tselector.classList.remove(this.cssClass.selectorActive);\n\t\t});\n\t}\n\n\tstatic selectSelectorItem(node)\n\t{\n\t\tnode.classList.add(this.cssClass.selectorActive);\n\t}\n\n\tstatic disableAllSelectorItems(container, selectorClass)\n\t{\n\t\tif (!Type.isDomNode(container))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tcontainer.querySelectorAll(`.${selectorClass}`).forEach((selector) => {\n\t\t\tselector.classList.add(this.cssClass.selectorDisabled);\n\t\t});\n\t}\n\n\tstatic enableAllSelectorItems(container, selectorClass)\n\t{\n\t\tif (!Type.isDomNode(container))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tcontainer.querySelectorAll(`.${selectorClass}`).forEach((selector) => {\n\t\t\tselector.classList.remove(this.cssClass.selectorDisabled);\n\t\t});\n\t}\n\n\tstatic enableSelectorItem(node)\n\t{\n\t\tnode.classList.remove(this.cssClass.selectorDisabled);\n\t}\n\n\tstatic recalcInputValue(params): void\n\t{\n\t\tconst selectedItems = params.selectedItems || [];\n\t\tconst multiple = Type.isBoolean(params.multiple) ? params.multiple : true;\n\t\tconst inputContainerNodeId = params.inputContainerNodeId || '';\n\n\t\tlet inputNodeName = params.inputNodeName || '';\n\n\t\tif (\n\t\t\t!Type.isArray(selectedItems)\n\t\t\t|| !Type.isStringFilled(inputNodeName)\n\t\t\t|| !Type.isStringFilled(inputContainerNodeId)\n\t\t)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst inputContainerNode = document.getElementById(inputContainerNodeId);\n\t\tif (!inputContainerNode)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (multiple)\n\t\t{\n\t\t\tinputNodeName = `${inputNodeName}[]`;\n\t\t}\n\n\t\tinputContainerNode.querySelectorAll(`input[name=\"${inputNodeName}\"]`).forEach((node) => {\n\t\t\tDom.remove(node);\n\t\t});\n\n\t\tselectedItems.forEach((item) => {\n\n\t\t\tlet prefix = null;\n\n\t\t\tswitch (item.entityId)\n\t\t\t{\n\t\t\t\tcase 'department':\n\t\t\t\t\tprefix = 'DR';\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'user':\n\t\t\t\t\tprefix = 'U';\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t}\n\n\t\t\tif (prefix)\n\t\t\t{\n\t\t\t\tinputContainerNode.appendChild(Tag.render`<input type=\"hidden\" name=\"${inputNodeName}\" value=\"${prefix}${item.id}\" \\>`);\n\t\t\t}\n\t\t});\n\t};\n\n}\n","import {Type} from 'main.core';\nimport {Util} from './util';\n\nimport {WorkgroupForm} from './index';\n\nexport class ConfidentialitySelector\n{\n\tstatic cssClass = {\n\t\tcontainer: 'socialnetwork-group-create-ex__type-confidentiality-wrapper',\n\t\tselector: 'socialnetwork-group-create-ex__group-selector',\n\t};\n\n\tconstructor()\n\t{\n\t\tlet firstItemSelected = false;\n\n\t\tConfidentialitySelector.getItems().forEach((selector) => {\n\t\t\tselector.addEventListener('click', (e) => {\n\n\t\t\t\tconst selector = e.currentTarget;\n\t\t\t\tif (selector.classList.contains(Util.cssClass.selectorDisabled))\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tUtil.unselectAllSelectorItems(ConfidentialitySelector.getContainer(), ConfidentialitySelector.cssClass.selector);\n\t\t\t\tUtil.selectSelectorItem(selector);\n\n\t\t\t\tWorkgroupForm.getInstance().recalcForm({\n\t\t\t\t\tselectedConfidentialityType: selector.getAttribute('data-bx-confidentiality-type'),\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tconst confidentialityType = selector.getAttribute('data-bx-confidentiality-type');\n\n\t\t\tif (Type.isStringFilled(WorkgroupForm.getInstance().selectedConfidentialityType))\n\t\t\t{\n\t\t\t\tif (WorkgroupForm.getInstance().selectedConfidentialityType === confidentialityType)\n\t\t\t\t{\n\t\t\t\t\tthis.selectItem(selector);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (!firstItemSelected)\n\t\t\t{\n\t\t\t\tthis.selectItem(selector);\n\t\t\t\tfirstItemSelected = true;\n\t\t\t}\n\t\t});\n\n\t\tthis.bindEvents();\n\t}\n\n\tbindEvents()\n\t{\n\t\tWorkgroupForm.getInstance().subscribe('onSwitchExtranet', ConfidentialitySelector.onSwitchExtranet);\n\t}\n\n\tstatic onSwitchExtranet(event)\n\t{\n\t\tconst data = event.getData();\n\t\tif (!Type.isBoolean(data.isChecked))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (data.isChecked)\n\t\t{\n\t\t\tConfidentialitySelector.unselectAll();\n\t\t\tConfidentialitySelector.select('secret')\n\t\t\tConfidentialitySelector.disableAll();\n\t\t\tConfidentialitySelector.enable('secret')\n\t\t}\n\t\telse\n\t\t{\n\t\t\tConfidentialitySelector.enableAll();\n\t\t}\n\t}\n\n\tselectItem(selector: Element)\n\t{\n\t\tUtil.selectSelectorItem(selector);\n\t\tWorkgroupForm.getInstance().recalcForm({\n\t\t\tselectedConfidentialityType: selector.getAttribute('data-bx-confidentiality-type'),\n\t\t});\n\t}\n\n\tstatic getContainer()\n\t{\n\t\treturn document.querySelector(`.${this.cssClass.container}`);\n\t}\n\n\tstatic getItems()\n\t{\n\t\tconst container = this.getContainer();\n\t\tif (!container)\n\t\t{\n\t\t\treturn [];\n\t\t}\n\n\t\treturn container.querySelectorAll(`.${this.cssClass.selector}`);\n\t}\n\n\tstatic unselectAll()\n\t{\n\t\tUtil.unselectAllSelectorItems(this.getContainer(), this.cssClass.selector);\n\t}\n\n\tstatic select(accessCode)\n\t{\n\t\tthis.getItems().forEach((selector) => {\n\t\t\tif (selector.getAttribute('data-bx-confidentiality-type') !== accessCode)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tUtil.selectSelectorItem(selector);\n\t\t});\n\t}\n\n\tstatic disableAll()\n\t{\n\t\tUtil.disableAllSelectorItems(this.getContainer(), this.cssClass.selector);\n\t}\n\n\tstatic enableAll()\n\t{\n\t\tUtil.enableAllSelectorItems(this.getContainer(), this.cssClass.selector);\n\t}\n\n\tstatic enable(accessCode)\n\t{\n\t\tthis.getItems().forEach((selector) => {\n\t\t\tif (selector.getAttribute('data-bx-confidentiality-type') !== accessCode)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tUtil.enableSelectorItem(selector);\n\t\t});\n\t}\n}\n","import {Dom, Type} from 'main.core';\n\nimport {ConfidentialitySelector} from './confidentialityselector';\nimport {WorkgroupForm} from './index';\nimport {Util} from './util';\n\nexport class Scrum\n{\n\tconstructor(\n\t\tparams: {\n\t\t\tisScrumProject: boolean,\n\t\t}\n\t)\n\t{\n\t\tthis.isScrumProject = params.isScrumProject;\n\t}\n\n\tmakeAdditionalCustomizationForm()\n\t{\n\t\tif (this.isScrumProject)\n\t\t{\n\t\t\tthis.createHiddenInputs();\n\t\t\tthis.showScrumBlocks();\n\t\t\tif (!Type.isStringFilled(WorkgroupForm.getInstance().selectedConfidentialityType))\n\t\t\t{\n\t\t\t\tConfidentialitySelector.unselectAll();\n\t\t\t\tConfidentialitySelector.select('open');\n\t\t\t\tWorkgroupForm.getInstance().recalcForm({\n\t\t\t\t\tselectedConfidentialityType: 'open',\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tconst landingCheckbox = document.getElementById('GROUP_LANDING');\n\t\t\tif (landingCheckbox)\n\t\t\t{\n\t\t\t\tlandingCheckbox.disabled = true;\n\t\t\t\tlandingCheckbox.checked = false;\n\t\t\t}\n\n\t\t\tthis.toggleFeatures(true);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.removeHiddenInputs();\n\t\t\tthis.hideScrumBlocks();\n\n\t\t\tconst landingCheckbox = document.getElementById('GROUP_LANDING');\n\t\t\tif (landingCheckbox)\n\t\t\t{\n\t\t\t\tlandingCheckbox.disabled = false;\n\t\t\t}\n\n\t\t\tthis.toggleFeatures(false);\n\t\t}\n\n\t\tUtil.recalcNameInput();\n\t}\n\n\thideScrumBlocks()\n\t{\n\t\tdocument.querySelectorAll('.socialnetwork-group-create-ex__create--switch-scrum, .socialnetwork-group-create-ex__create--switch-nonscrum').forEach((scrumBlock) => {\n\t\t\tscrumBlock.classList.remove('--scrum');\n\t\t});\n\n\t\tconst moderatorsBlock = document.getElementById('expandable-moderator-block');\n\t\tif (moderatorsBlock)\n\t\t{\n\t\t\tmoderatorsBlock.classList.add('socialnetwork-group-create-ex__content-expandable');\n\t\t}\n\n\t\tconst moderatorsSwitch = document.getElementById('GROUP_MODERATORS_PROJECT_switch');\n\t\tif (moderatorsSwitch)\n\t\t{\n\t\t\tmoderatorsSwitch.classList.add('ui-ctl-file-link');\n\t\t}\n\n\t\tconst ownerBlock = document.getElementById('GROUP_OWNER_block');\n\t\tif (ownerBlock)\n\t\t{\n\t\t\townerBlock.classList.remove('--space-bottom');\n\t\t}\n \t}\n\n\tshowScrumBlocks()\n\t{\n\t\tdocument.querySelectorAll('.socialnetwork-group-create-ex__create--switch-scrum, .socialnetwork-group-create-ex__create--switch-nonscrum').forEach((scrumBlock) => {\n\t\t\tscrumBlock.classList.add('--scrum');\n\t\t});\n\n\t\tconst moderatorsBlock = document.getElementById('expandable-moderator-block');\n\t\tif (moderatorsBlock)\n\t\t{\n\t\t\tmoderatorsBlock.classList.remove('socialnetwork-group-create-ex__content-expandable');\n\t\t}\n\n\t\tconst moderatorsSwitch = document.getElementById('GROUP_MODERATORS_PROJECT_switch');\n\t\tif (moderatorsSwitch)\n\t\t{\n\t\t\tmoderatorsSwitch.classList.remove('ui-ctl-file-link');\n\t\t}\n\n\t\tconst ownerBlock = document.getElementById('GROUP_OWNER_block');\n\t\tif (ownerBlock)\n\t\t{\n\t\t\townerBlock.classList.add('--space-bottom');\n\t\t}\n\t}\n\n\tcreateHiddenInputs()\n\t{\n\t\tdocument.forms['sonet_group_create_popup_form'].appendChild(\n\t\t\tDom.create('input', {\n\t\t\t\tattrs: {\n\t\t\t\t\ttype: 'hidden',\n\t\t\t\t\tname: 'SCRUM_PROJECT',\n\t\t\t\t\tvalue: 'Y',\n\t\t\t\t}\n\t\t\t})\n\t\t);\n\t}\n\n\tremoveHiddenInputs()\n\t{\n\t\tdocument.forms['sonet_group_create_popup_form'].querySelectorAll('input[name=\"SCRUM_PROJECT\"]')\n\t\t\t.forEach((input) => {\n\t\t\t\tDom.remove(input);\n\t\t\t})\n\t\t;\n\t}\n\n\ttoggleFeatures(isScrum: boolean)\n\t{\n\t\tconst featuresNode = document.querySelector('.socialnetwork-group-create-ex__project-instruments');\n\t\tif (featuresNode)\n\t\t{\n\t\t\tfeaturesNode.querySelectorAll('input[type=\"checkbox\"][name=\"tasks_active\"], input[type=\"checkbox\"][name=\"calendar_active\"]').forEach((featuresCheckboxNode) => {\n\t\t\t\tif (isScrum)\n\t\t\t\t{\n\t\t\t\t\tfeaturesCheckboxNode.disabled = true;\n\t\t\t\t\tfeaturesCheckboxNode.checked = true;\n\n\t\t\t\t\tfeaturesCheckboxNode.parentNode.insertBefore(Dom.create('input', {\n\t\t\t\t\t\tattrs: {\n\t\t\t\t\t\t\ttype: 'hidden',\n\t\t\t\t\t\t\tname: featuresCheckboxNode.name,\n\t\t\t\t\t\t\tvalue: 'Y',\n\t\t\t\t\t\t}\n\t\t\t\t\t}), featuresCheckboxNode);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tfeaturesCheckboxNode.disabled = false;\n\n\t\t\t\t\tdocument.forms['sonet_group_create_popup_form'].querySelectorAll(`input[type=\"hidden\"][name=\"${featuresCheckboxNode.name}\"]`)\n\t\t\t\t\t\t.forEach((hiddenInput) => {\n\t\t\t\t\t\t\tDom.remove(hiddenInput);\n\t\t\t\t\t\t})\n\t\t\t\t\t;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n}\n","import { Type, Loc, Dom, ajax } from 'main.core';\nimport { BaseEvent, EventEmitter } from 'main.core.events';\nimport { Popup } from 'main.popup';\nimport { Button } from 'ui.buttons';\n\nexport class Avatar\n{\n\tstatic classList = {\n\t\thidden: '--hidden',\n\t\tselected: '--selected',\n\t};\n\n\tconstructor(\n\t\tparams: {\n\t\t\tcomponentName: string,\n\t\t\tsignedParameters: string,\n\t\t\tgroupId: number,\n\t\t}\n\t)\n\t{\n\t\tthis.confirmPopup = null;\n\n\t\tif (\n\t\t\t!Type.isStringFilled(params.componentName)\n\t\t\t|| Type.isUndefined(params.signedParameters)\n\t\t)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.componentName = params.componentName;\n\t\tthis.signedParameters = params.signedParameters;\n\t\tthis.groupId = (!Type.isUndefined(params.groupId) ? parseInt(params.groupId) : 0);\n\n\t\tconst container = document.querySelector('[data-role=\"group-avatar-cont\"]');\n\t\tif (!container)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.selectorNode = container.querySelector('[data-role=\"group-avatar-selector\"]');\n\t\tthis.imageNode = container.querySelector('[data-role=\"group-avatar-image\"]');\n\t\tthis.inputNode = container.querySelector('[data-role=\"group-avatar-input\"]');\n\t\tthis.typeInputNode = container.querySelector('[data-role=\"group-avatar-type-input\"]');\n\t\tthis.removeNode = container.querySelector('[data-role=\"group-avatar-remove\"]');\n\n\t\tif (\n\t\t\t!Type.isDomNode(this.imageNode)\n\t\t\t|| !Type.isDomNode(this.inputNode)\n\t\t\t|| !Type.isDomNode(this.typeInputNode)\n\t\t\t|| !Type.isDomNode(this.removeNode)\n\t\t)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.recalc();\n\n\t\tconst avatarEditor = new BX.AvatarEditor({\n\t\t\tenableCamera: false,\n\t\t});\n\n\t\tthis.selectorNode.addEventListener('click', (e) => {\n\n\t\t\tif (\n\t\t\t\te.target.getAttribute('data-role') === 'group-avatar-remove'\n\t\t\t\t&& this.imageNode.style.backgroundImage !== ''\n\t\t\t)\n\t\t\t{\n\t\t\t\tthis.showConfirmPopup(Loc.getMessage('SONET_GCE_T_IMAGE_DELETE_CONFIRM'), this.deletePhoto.bind(this));\n\t\t\t}\n\t\t\telse if (e.target.getAttribute('data-role') === 'group-avatar-type')\n\t\t\t{\n\t\t\t\tthis.clearType();\n\t\t\t\tthis.setType(e.target.getAttribute('data-avatar-type'));\n\t\t\t}\n\t\t\telse if (e.target.getAttribute('data-role') === 'group-avatar-image')\n\t\t\t{\n\t\t\t\tavatarEditor.show('file');\n\t\t\t}\n\t\t});\n\n\t\tEventEmitter.subscribe('onApply', (event: BaseEvent) => {\n\t\t\tconst [ file ] = event.getCompatData();\n\n\t\t\tconst formData = new FormData();\n\t\t\tif (!file.name)\n\t\t\t{\n\t\t\t\tfile.name = 'tmp.png';\n\t\t\t}\n\t\t\tformData.append('newPhoto', file, file.name);\n\n\t\t\tthis.changePhoto(formData);\n\t\t});\n\t}\n\n\trecalc()\n\t{\n\t\tif (this.getFileId() <= 0)\n\t\t{\n\t\t\tthis.removeNode.classList.add(Avatar.classList.hidden);\n\t\t\tthis.imageNode.classList.remove(Avatar.classList.selected);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.removeNode.classList.remove(Avatar.classList.hidden);\n\t\t\tthis.imageNode.classList.add(Avatar.classList.selected);\n\t\t}\n\t}\n\n\tchangePhoto(formData)\n\t{\n\t\tconst loader = this.showLoader({\n\t\t\tnode: this.imageNode,\n\t\t\tloader: null,\n\t\t\tsize: 78,\n\t\t});\n\n\t\tajax.runComponentAction(this.componentName, 'loadPhoto', {\n\t\t\tsignedParameters: this.signedParameters,\n\t\t\tmode: 'ajax',\n\t\t\tdata: formData,\n\t\t}).then((response) => {\n\n\t\t\tif (\n\t\t\t\tType.isPlainObject(response.data)\n\t\t\t\t&& parseInt(response.data.fileId) > 0\n\t\t\t\t&& Type.isStringFilled(response.data.fileUri)\n\t\t\t)\n\t\t\t{\n\t\t\t\tthis.clearType();\n\t\t\t\tthis.inputNode.value = parseInt(response.data.fileId);\n\t\t\t\tthis.typeInputNode.value = '';\n\t\t\t\tthis.imageNode.style = `background-image: url('${response.data.fileUri}'); background-size: cover;`;\n\t\t\t\tthis.recalc();\n\t\t\t}\n\n\t\t\tthis.hideLoader({\n\t\t\t\tloader: loader,\n\t\t\t});\n\t\t}, (response) => {\n\t\t\tthis.hideLoader({loader: loader});\n\t\t\tthis.showErrorPopup(response[\"errors\"][0].message);\n\t\t});\n\t}\n\n\tdeletePhoto()\n\t{\n\t\tconst fileId = this.getFileId();\n\t\tif (fileId < 0)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst loader = this.showLoader({\n\t\t\tnode: this.imageNode,\n\t\t\tloader: null,\n\t\t\tsize: 78,\n\t\t});\n\n\t\tajax.runComponentAction(this.componentName, 'deletePhoto', {\n\t\t\tsignedParameters: this.signedParameters,\n\t\t\tmode: 'ajax',\n\t\t\tdata: {\n\t\t\t\tfileId: fileId,\n\t\t\t\tgroupId: this.groupId,\n\t\t\t}\n\t\t}).then((response) => {\n\n\t\t\tthis.imageNode.style = '';\n\t\t\tthis.inputNode.value = '';\n\t\t\tthis.recalc();\n\n\t\t\tthis.hideLoader({\n\t\t\t\tloader: loader,\n\t\t\t});\n\t\t}, (response) => {\n\t\t\tthis.hideLoader({\n\t\t\t\tloader: loader,\n\t\t\t});\n\t\t\tthis.showErrorPopup(response.errors[0].message);\n\t\t});\n\t}\n\n\tclearType()\n\t{\n\t\tthis.selectorNode.querySelectorAll('[data-role=\"group-avatar-type\"]').forEach((typeItemNode) => {\n\t\t\ttypeItemNode.classList.remove(Avatar.classList.selected);\n\t\t});\n\t}\n\n\tsetType(avatarType)\n\t{\n\t\tthis.inputNode.value = '';\n\t\tthis.imageNode.style = '';\n\t\tthis.typeInputNode.value = avatarType;\n\n\t\tthis.imageNode.classList.remove(Avatar.classList.selected);\n\n\t\tthis.selectorNode.querySelectorAll('[data-role=\"group-avatar-type\"]').forEach((typeItemNode) => {\n\t\t\tif (typeItemNode.getAttribute('data-avatar-type') !== avatarType)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\ttypeItemNode.classList.add(Avatar.classList.selected);\n\t\t});\n\n\n\t\tthis.recalc();\n\t}\n\n\tgetFileId()\n\t{\n\t\treturn (Type.isStringFilled(this.inputNode.value) ? parseInt(this.inputNode.value) : 0);\n\t}\n\n\tshowLoader(params)\n\t{\n\t\tlet loader = null;\n\n\t\tif (Type.isDomNode(params.node))\n\t\t{\n\t\t\tif (Type.isNull(params.loader))\n\t\t\t{\n\t\t\t\tloader = new BX.Loader({\n\t\t\t\t\ttarget: params.node,\n\t\t\t\t\tsize: params.hasOwnProperty('size') ? params.size : 40,\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tloader = params.loader;\n\t\t\t}\n\n\t\t\tloader.show();\n\t\t}\n\n\t\treturn loader;\n\t}\n\n\thideLoader(params)\n\t{\n\t\tif (!Type.isNull(params.loader))\n\t\t{\n\t\t\tparams.loader.hide();\n\t\t\tparams.loader = null;\n\t\t}\n\n\t\tif (Type.isDomNode(params.node))\n\t\t{\n\t\t\tDom.clean(params.node)\n\t\t}\n\t}\n\n\tshowErrorPopup(error)\n\t{\n\t\tif (!error)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tnew Popup('gce-image-upload-error', null, {\n\t\t\tautoHide: true,\n\t\t\tcloseByEsc: true,\n\t\t\toffsetLeft: 0,\n\t\t\toffsetTop: 0,\n\t\t\tdraggable: true,\n\t\t\tbindOnResize: false,\n\t\t\tcloseIcon: true,\n\t\t\tcontent: error,\n\t\t\tevents: {},\n\t\t\tcacheable: false,\n\t\t}).show();\n\t}\n\n\tshowConfirmPopup(text, confirmCallback)\n\t{\n\t\tthis.confirmPopup = new Popup('gce-image-delete-confirm', null, {\n\t\t\tautoHide: true,\n\t\t\tcloseByEsc: true,\n\t\t\toffsetLeft: 0,\n\t\t\toffsetTop: 0,\n\t\t\tdraggable: true,\n\t\t\tbindOnResize: false,\n\t\t\tcloseIcon: true,\n\t\t\tcontent: text,\n\t\t\tevents: {\n\t\t\t\tonPopupClose: () => {\n\t\t\t\t\tthis.confirmPopup.destroy();\n\t\t\t\t},\n\t\t\t},\n\t\t\tcacheable: false,\n\t\t\tbuttons: [\n\t\t\t\tnew Button({\n\t\t\t\t\ttext: Loc.getMessage('SONET_GCE_T_IMAGE_DELETE_CONFIRM_YES'),\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tclick: (button) => {\n\t\t\t\t\t\t\tbutton.setWaiting(true);\n\t\t\t\t\t\t\tthis.confirmPopup.close();\n\t\t\t\t\t\t\tconfirmCallback();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t\tnew Button({\n\t\t\t\t\ttext: Loc.getMessage('SONET_GCE_T_IMAGE_DELETE_CONFIRM_NO'),\n\t\t\t\t\tevents : {\n\t\t\t\t\t\tclick: () => {\n\t\t\t\t\t\t\tthis.confirmPopup.close();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t],\n\t\t});\n\t\tthis.confirmPopup.show();\n\t}\n}\n","import { Type } from 'main.core';\nimport { BaseEvent, EventEmitter } from 'main.core.events';\n\nexport class ThemePicker\n{\n\tconstructor(\n\t\tparams: {\n\t\t\tcontainer: Element,\n\t\t\ttheme: object,\n\t\t}\n\t)\n\t{\n\t\tthis.container = params.container;\n\t\tthis.theme = params.theme;\n\t\tthis.draw(this.theme);\n\n\t\tconst previewImageNode = this.getNode('image');\n\t\tif (previewImageNode)\n\t\t{\n\t\t\tpreviewImageNode.addEventListener('click', this.open);\n\t\t}\n\n\t\tconst titleNode = this.getNode('title');\n\t\tif (titleNode)\n\t\t{\n\t\t\ttitleNode.addEventListener('click', this.open);\n\t\t}\n\n\t\tconst deleteNode = this.getNode('delete');\n\t\tif (deleteNode)\n\t\t{\n\t\t\tdeleteNode.addEventListener('click', () => {\n\t\t\t\tthis.select({});\n\t\t\t});\n\t\t}\n\n\t\tEventEmitter.subscribe('Intranet.ThemePicker:onSave', (event: BaseEvent) => {\n\t\t\tconst [ data ] = event.getData();\n\t\t\tthis.select(data);\n\t\t});\n\t}\n\n\tselect(data)\n\t{\n\t\tconst theme = (Type.isPlainObject(data.theme) ? data.theme : {});\n\t\tthis.draw(theme);\n\t}\n\n\tdraw(theme)\n\t{\n\t\tconst previewImageNode = this.getNode('image');\n\t\tif (previewImageNode)\n\t\t{\n\t\t\tpreviewImageNode.style.backgroundImage = (Type.isStringFilled(theme.previewImage) ? `url('${theme.previewImage}')` : '');\n\t\t\tpreviewImageNode.style.backgroundColor = (Type.isStringFilled(theme.previewColor) ? theme.previewColor : 'transparent');\n\t\t}\n\n\t\tconst titleNode = this.getNode('title');\n\t\tif (titleNode)\n\t\t{\n\t\t\ttitleNode.innerHTML = (Type.isStringFilled(theme.title) ? theme.title : '');\n\t\t}\n\n\t\tconst inputNode = this.getNode('id');\n\t\tif (inputNode)\n\t\t{\n\t\t\tinputNode.value = (Type.isStringFilled(theme.id) ? theme.id : '');\n\t\t}\n\t}\n\n\topen(event)\n\t{\n\t\tBX.Intranet.Bitrix24.ThemePicker.Singleton.showDialog(true);\n\n\t\tevent.preventDefault();\n\t}\n\n\tgetNode(name)\n\t{\n\t\tconst result = null;\n\t\tif (!Type.isStringFilled(name))\n\t\t{\n\t\t\treturn result;\n\t\t}\n\n\t\treturn this.container.querySelector(`[bx-group-edit-theme-node=\"${name}\"]`);\n\t}\n\n\tgetContainer()\n\t{\n\t\treturn this.container;\n\t}\n}\n","import { Type, Loc } from 'main.core';\nimport { TagSelector as EntityTagSelector } from 'ui.entity-selector';\nimport { BaseEvent } from 'main.core.events';\n\nexport class Tags\n{\n\tconstructor(\n\t\tparams: {\n\t\t\tgroupId: number,\n\t\t\tcontainerNodeId: string,\n\t\t\thiddenFieldId: string,\n\t\t}\n\t)\n\t{\n\t\tconst containerNode = document.getElementById(params.containerNodeId);\n\t\tif (!containerNode)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.hiddenFieldNode = document.getElementById(params.hiddenFieldId);\n\n\t\tconst tagSelector = new EntityTagSelector({\n\t\t\taddButtonCaption: Loc.getMessage('SONET_GCE_T_TAG_ADD'),\n\t\t\taddButtonCaptionMore: Loc.getMessage('SONET_GCE_T_KEYWORDS_ADD_TAG'),\n\t\t\tdialogOptions: {\n\t\t\t\twidth: 350,\n\t\t\t\theight: 300,\n\t\t\t\toffsetLeft: 50,\n\t\t\t\tcompactView: true,\n\t\t\t\tpreload: true,\n\t\t\t\tcontext: 'PROJECT_TAG',\n\t\t\t\tsearchTabOptions: {\n\t\t\t\t\tstubOptions: {\n\t\t\t\t\t\ttitle: Loc.getMessage('SONET_GCE_T_TAG_SEARCH_FAILED'),\n\t\t\t\t\t\tsubtitle: Loc.getMessage('SONET_GCE_T_TAG_SEARCH_ADD_HINT'),\n\t\t\t\t\t\tarrow: true,\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tentities: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'project-tag',\n\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\tgroupId: params.groupId,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\tsearchOptions: {\n\t\t\t\t\tallowCreateItem: true,\n\t\t\t\t\tfooterOptions: {\n\t\t\t\t\t\tlabel: Loc.getMessage('SONET_GCE_T_TAG_SEARCH_ADD_FOOTER_LABEL'),\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tevents: {\n\t\t\t\t\t'Item:onSelect': (event) => {\n\t\t\t\t\t\tthis.recalcinputValue(event.getTarget().getSelectedItems());\n\t\t\t\t\t},\n\t\t\t\t\t'Item:onDeselect': (event) => {\n\t\t\t\t\t\tthis.recalcinputValue(event.getTarget().getSelectedItems());\n\t\t\t\t\t},\n\t\t\t\t\t'Search:onItemCreateAsync': (event: BaseEvent) => {\n\n\t\t\t\t\t\treturn new Promise((resolve) => {\n\n\t\t\t\t\t\t\tconst { searchQuery } = event.getData();\n\t\t\t\t\t\t\tconst name = searchQuery.getQuery().toLowerCase();\n\t\t\t\t\t\t\tconst dialog = event.getTarget();\n\n\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\tconst tagsList = name.split(',');\n\n\t\t\t\t\t\t\t\ttagsList.forEach((tag) => {\n\t\t\t\t\t\t\t\t\tconst item = dialog.addItem({\n\t\t\t\t\t\t\t\t\t\tid: tag,\n\t\t\t\t\t\t\t\t\t\tentityId: 'project-tag',\n\t\t\t\t\t\t\t\t\t\ttitle: tag,\n\t\t\t\t\t\t\t\t\t\ttabs: [ 'all', 'recents' ],\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\tif (item)\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\titem.select();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t\t}, 1000);\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\n\t\ttagSelector.renderTo(containerNode);\n\t}\n\n\trecalcinputValue(items)\n\t{\n\t\tif (\n\t\t\t!Type.isArray(items)\n\t\t\t|| !Type.isDomNode(this.hiddenFieldNode)\n\t\t)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst tagsList = [];\n\n\n\t\titems.forEach((item) => {\n\t\t\ttagsList.push(item.id);\n\t\t});\n\n\t\tthis.hiddenFieldNode.value = tagsList.join(',');\n\t}\n}\n","import {Type} from 'main.core';\nimport {Util} from './util';\n\nimport {WorkgroupForm} from './index';\n\nexport class TypePresetSelector\n{\n\tconstructor()\n\t{\n\t\tthis.cssClass = {\n\t\t\tcontainer: 'socialnetwork-group-create-ex__type-preset-wrapper',\n\t\t\tselector: 'socialnetwork-group-create-ex__type-preset-selector',\n\t\t};\n\n\t\tthis.container = document.querySelector(`.${this.cssClass.container}`);\n\t\tif (!this.container)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tlet firstItemSelected = false;\n\n\t\tconst selectors = this.container.querySelectorAll(`.${this.cssClass.selector}`);\n\t\tselectors.forEach((selector) => {\n\t\t\tselector.addEventListener('click', (e) => {\n\n\t\t\t\tconst selector = e.currentTarget;\n\t\t\t\tif (selector.classList.contains(Util.cssClass.selectorDisabled))\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tUtil.unselectAllSelectorItems(this.container, this.cssClass.selector);\n\t\t\t\tUtil.selectSelectorItem(selector);\n\n\t\t\t\tconst projectType = selector.getAttribute('data-bx-project-type');\n\n\t\t\t\tWorkgroupForm.getInstance().recalcForm({\n\t\t\t\t\tselectedProjectType: projectType,\n\t\t\t\t});\n\n\t\t\t\tWorkgroupForm.getInstance().wizardManager.setProjectType(projectType);\n\t\t\t});\n\n\t\t\tconst projectType = selector.getAttribute('data-bx-project-type');\n\n\t\t\tif (Type.isStringFilled(WorkgroupForm.getInstance().selectedProjectType))\n\t\t\t{\n\t\t\t\tif (WorkgroupForm.getInstance().selectedProjectType === projectType)\n\t\t\t\t{\n\t\t\t\t\tthis.selectItem(selector);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (!firstItemSelected)\n\t\t\t{\n\t\t\t\tthis.selectItem(selector);\n\t\t\t\tfirstItemSelected = true;\n\t\t\t}\n\t\t});\n\t}\n\n\tselectItem(selector: Element)\n\t{\n\t\tconst projectType = selector.getAttribute('data-bx-project-type');\n\t\tUtil.selectSelectorItem(selector);\n\t\tWorkgroupForm.getInstance().recalcForm({\n\t\t\tselectedProjectType: projectType,\n\t\t});\n\t\tWorkgroupForm.getInstance().wizardManager.setProjectType(projectType);\n\t}\n\n\n}\n","import { Type, Loc } from 'main.core';\nimport { WorkgroupForm } from './index';\n\nexport class FieldsManager\n{\n\tstatic mandatoryFieldsByStep = {\n\t\t2: [\n\t\t\t{\n\t\t\t\tid: 'GROUP_NAME_input',\n\t\t\t\ttype: 'string',\n\t\t\t\tbindNodeId: 'GROUP_NAME_input',\n\t\t\t},\n\t\t],\n\t\t4: [\n\t\t\t{\n\t\t\t\tid: 'SCRUM_MASTER_CODE_container',\n\t\t\t\ttype: 'input_hidden_container',\n\t\t\t\tbindNodeId: 'SCRUM_MASTER_selector',\n\t\t\t\tcondition: () => {\n\t\t\t\t\treturn !!WorkgroupForm.getInstance().scrumManager.isScrumProject;\n\t\t\t\t}\n\t\t\t}\n\t\t],\n\t};\n\n\tstatic check()\n\t{\n\t\tif (WorkgroupForm.getInstance().wizardManager.stepsCount === 1)\n\t\t{\n\t\t\treturn this.checkAll();\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn this.checkStep(WorkgroupForm.getInstance().wizardManager.currentStep);\n\t\t}\n\t}\n\n\tstatic checkStep(step)\n\t{\n\t\tstep = parseInt(step);\n\n\t\tconst errorDataList = [];\n\n\t\tif (Type.isArray(this.mandatoryFieldsByStep[step]))\n\t\t{\n\t\t\tthis.mandatoryFieldsByStep[step].forEach((fieldData) => {\n\n\t\t\t\tlet fieldNode = document.getElementById(fieldData.id);\n\t\t\t\tif (!Type.isDomNode(fieldNode))\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (fieldNode.tagName.toLowerCase() !== 'input')\n\t\t\t\t{\n\t\t\t\t\tif (fieldData.type === 'string')\n\t\t\t\t\t{\n\t\t\t\t\t\tfieldNode = fieldNode.querySelector('input[type=\"text\"]');\n\t\t\t\t\t\tif (!Type.isDomNode(fieldNode))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfieldData.fieldNode = fieldNode;\n\t\t\t\tconst errorText = this.checkField(fieldData);\n\t\t\t\tif (Type.isStringFilled(errorText))\n\t\t\t\t{\n\t\t\t\t\tconst bindNode = document.getElementById(fieldData.bindNodeId)\n\t\t\t\t\terrorDataList.push({\n\t\t\t\t\t\tbindNode: (Type.isDomNode(bindNode) ? bindNode : fieldNode),\n\t\t\t\t\t\tmessage: errorText,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn errorDataList;\n\t}\n\n\tstatic checkAll()\n\t{\n\t\tlet errorDataList = [];\n\t\tObject.entries(this.mandatoryFieldsByStep).forEach((stepData) => {\n\t\t\terrorDataList = errorDataList.concat(this.checkStep(parseInt(stepData[0])));\n\t\t});\n\n\t\treturn errorDataList;\n\t}\n\n\tstatic checkField(fieldData)\n\t{\n\t\tlet errorText = '';\n\n\t\tif (\n\t\t\t!Type.isPlainObject(fieldData)\n\t\t\t&& !Type.isDomNode(fieldData.fieldNode)\n\t\t)\n\t\t{\n\t\t\treturn errorText;\n\t\t}\n\n\t\tif (Type.isFunction(fieldData.condition))\n\t\t{\n\t\t\tif (!fieldData.condition())\n\t\t\t{\n\t\t\t\treturn errorText;\n\t\t\t}\n\t\t}\n\n\t\tconst fieldNode = fieldData.fieldNode;\n\t\tconst fieldType = (Type.isStringFilled(fieldData.type) ? fieldData.type : 'string');\n\t\tswitch (fieldType)\n\t\t{\n\t\t\tcase 'string':\n\t\t\t\terrorText = (fieldNode.value.trim() === '' ? Loc.getMessage('SONET_GCE_T_STRING_FIELD_ERROR') : '');\n\t\t\t\tbreak\n\t\t\tcase 'input_hidden_container':\n\t\t\t\tlet empty = true;\n\t\t\t\tfieldNode.querySelectorAll('input[type=\"hidden\"]').forEach((hiddenNode) => {\n\t\t\t\t\tif (!empty)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (Type.isStringFilled(hiddenNode.value))\n\t\t\t\t\t{\n\t\t\t\t\t\tempty = false;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\terrorText = (empty ? Loc.getMessage('SONET_GCE_T_STRING_FIELD_ERROR') : '');\n\t\t\t\tbreak\n\t\t\tdefault:\n\t\t\t\terrorText = '';\n\t\t}\n\n\t\treturn errorText;\n\t}\n\n\tstatic showError(errorData)\n\t{\n\t\tif (\n\t\t\t!Type.isPlainObject(errorData)\n\t\t\t|| !Type.isStringFilled(errorData.message)\n\t\t\t|| !Type.isDomNode(errorData.bindNode)\n\t\t)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tWorkgroupForm.getInstance().alertManager.showAlert(errorData.message, errorData.bindNode.parentNode);\n\t}\n}\n","import { Type } from 'main.core';\nimport { BaseEvent, EventEmitter } from 'main.core.events';\nimport { ButtonManager } from 'ui.buttons';\n\nimport { WorkgroupForm } from './index';\nimport { FieldsManager } from './fields';\n\nexport class Buttons\n{\n\tstatic cssClass = {\n\t\thidden: 'socialnetwork-group-create-ex__button-invisible',\n\t};\n\n\tconstructor()\n\t{\n\t\tthis.submitButton = document.getElementById('sonet_group_create_popup_form_button_submit');\n\t\tif (!this.submitButton)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.submitButtonClickHandler = this.submitButtonClickHandler.bind(this);\n\t\tthis.submitButton.addEventListener('click', this.submitButtonClickHandler);\n\n\t\tthis.backButton = document.getElementById('sonet_group_create_popup_form_button_step_2_back');\n\t\tif (this.backButton)\n\t\t{\n\t\t\tthis.backButton.addEventListener('click', (e) => {\n\n\t\t\t\tconst button = ButtonManager.createFromNode(e.currentTarget);\n\t\t\t\tif (\n\t\t\t\t\tbutton\n\t\t\t\t\t&& button.isDisabled()\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (WorkgroupForm.getInstance().wizardManager.currentStep > 1)\n\t\t\t\t{\n\t\t\t\t\tWorkgroupForm.getInstance().wizardManager.currentStep--;\n\t\t\t\t\tif (\n\t\t\t\t\t\tWorkgroupForm.getInstance().wizardManager.currentStep === 3\n\t\t\t\t\t\t&& Object.entries(WorkgroupForm.getInstance().confidentialityTypes) <= 1\n\t\t\t\t\t) // skip confidentiality step\n\t\t\t\t\t{\n\t\t\t\t\t\tWorkgroupForm.getInstance().wizardManager.currentStep--;\n\t\t\t\t\t}\n\n\t\t\t\t\tWorkgroupForm.getInstance().wizardManager.showCurrentStep();\n\t\t\t\t}\n\n\t\t\t\treturn e.preventDefault();\n\t\t\t});\n\t\t}\n\n\t\tthis.cancelButton = document.getElementById('sonet_group_create_popup_form_button_step_2_cancel');\n\n\t\tif (this.cancelButton)\n\t\t{\n\t\t\tthis.cancelButton.addEventListener('click', (e) => {\n\n\t\t\t\tconst button = ButtonManager.createFromNode(e.currentTarget);\n\t\t\t\tif (\n\t\t\t\t\tbutton\n\t\t\t\t\t&& button.isDisabled()\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst currentSlider = BX.SidePanel.Instance.getSliderByWindow(window);\n\n\t\t\t\tif (currentSlider)\n\t\t\t\t{\n\t\t\t\t\tconst event = new BaseEvent({\n\t\t\t\t\t\tcompatData: [ currentSlider.getEvent('onClose') ],\n\t\t\t\t\t\tdata: currentSlider.getEvent('onClose'),\n\t\t\t\t\t});\n\n\t\t\t\t\tEventEmitter.emit(window.top, 'SidePanel.Slider:onClose', event);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tconst url = e.currentTarget.getAttribute('bx-url');\n\t\t\t\t\tif (Type.isStringFilled(url))\n\t\t\t\t\t{\n\t\t\t\t\t\twindow.location = url;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconst event = new BaseEvent({\n\t\t\t\t\tcompatData: [ false ],\n\t\t\t\t\tdata: false,\n\t\t\t\t});\n\n\t\t\t\tEventEmitter.emit(window.top, 'BX.Bitrix24.PageSlider:close', event);\n\n\t\t\t\tEventEmitter.emit(window.top, 'onSonetIframeCancelClick');\n\n\t\t\t\treturn e.preventDefault();\n\t\t\t})\n\t\t}\n\t}\n\n\tsubmitButtonClickHandler(e)\n\t{\n\t\tconst button = ButtonManager.createFromNode(e.currentTarget);\n\t\tif (\n\t\t\tbutton\n\t\t\t&& button.isDisabled()\n\t\t)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tWorkgroupForm.getInstance().alertManager.hideAllAlerts();\n\n\t\tconst errorDataList = FieldsManager.check().filter((errorData) => {\n\t\t\treturn (\n\t\t\t\tType.isPlainObject(errorData)\n\t\t\t\t&& Type.isStringFilled(errorData.message)\n\t\t\t\t&& Type.isDomNode(errorData.bindNode)\n\t\t\t);\n\t\t});\n\n\t\tif (errorDataList.length > 0)\n\t\t{\n\t\t\terrorDataList.forEach((errorData) => {\n\t\t\t\tFieldsManager.showError(errorData);\n\t\t\t});\n\t\t}\n\t\telse if (WorkgroupForm.getInstance().wizardManager.currentStep < WorkgroupForm.getInstance().wizardManager.stepsCount)\n\t\t{\n\t\t\tWorkgroupForm.getInstance().wizardManager.currentStep++;\n\t\t\tif (\n\t\t\t\tWorkgroupForm.getInstance().wizardManager.currentStep === 3\n\t\t\t\t&& Object.entries(WorkgroupForm.getInstance().confidentialityTypes) <= 1\n\t\t\t) // skip confidentiality step\n\t\t\t{\n\t\t\t\tWorkgroupForm.getInstance().wizardManager.currentStep++;\n\t\t\t}\n\n\t\t\tWorkgroupForm.getInstance().wizardManager.showCurrentStep();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tconst submitFunction = function(event) {\n\t\t\t\tWorkgroupForm.getInstance().submitForm(event)\n\t\t\t}.bind(WorkgroupForm.getInstance());\n\n\t\t\tsubmitFunction(e);\n\t\t}\n\n\t\treturn e.preventDefault();\n\t}\n\n\tstatic showWaitSubmitButton(disable)\n\t{\n\t\tdisable = !!disable;\n\n\t\tconst buttonNode = document.getElementById('sonet_group_create_popup_form_button_submit');\n\t\tif (!buttonNode)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst button = ButtonManager.createFromNode(buttonNode);\n\n\t\tif (disable)\n\t\t{\n\t\t\tif (button)\n\t\t\t{\n\t\t\t\tbutton.setWaiting(true);\n\t\t\t}\n\t\t\tbuttonNode.removeEventListener('click', WorkgroupForm.getInstance().submitButtonClickHandler);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (button)\n\t\t\t{\n\t\t\t\tbutton.setWaiting(false);\n\t\t\t}\n\t\t\tbuttonNode.addEventListener('click', WorkgroupForm.getInstance().submitButtonClickHandler);\n\t\t}\n\t}\n\n\tstatic disableButton(buttonNode, disable)\n\t{\n\t\tif (!Type.isDomNode(buttonNode))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst button = ButtonManager.createFromNode(buttonNode);\n\t\tif (!button)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tbutton.setDisabled(disable);\n\t}\n\n\tstatic showButton(buttonNode)\n\t{\n\t\tif (!Type.isDomNode(buttonNode))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tbuttonNode.classList.remove(this.cssClass.hidden);\n\t}\n\n\tstatic hideButton(buttonNode)\n\t{\n\t\tif (!Type.isDomNode(buttonNode))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tbuttonNode.classList.add(this.cssClass.hidden);\n\t}\n}\n","import { Type } from 'main.core';\nimport { WorkgroupForm } from './index';\nimport { Buttons } from './buttons';\n\nexport class Wizard\n{\n\tstatic cssClass = {\n\t\tstep1Backgroud: 'socialnetwork-group-create-ex__background-gif',\n\t\tbreadcrumbsContainer: 'socialnetwork-group-create-ex__breadcrumbs',\n\t\tbreadcrumbsItem: 'socialnetwork-group-create-ex__breadcrumbs-item',\n\t\tbodyContainer: 'socialnetwork-group-create-ex__content',\n\t\tbodyItem: 'socialnetwork-group-create-ex__content-body',\n\t\tactiveBodyItem: '--active',\n\t\tactiveBreadcrumbsItem: '--active',\n\t};\n\n\tstatic getFirstStepNumber()\n\t{\n\t\treturn (Object.entries(WorkgroupForm.getInstance().projectTypes).length > 1 ? 1 : 2);\n\t}\n\n\tconstructor(\n\t\tparams: {\n\t\t\tcurrentStep: number,\n\t\t\tstepsCount: number,\n\t\t}\n\t)\n\t{\n\t\tthis.processedStep = 0;\n\t\tthis.currentStep = params.currentStep;\n\t\tthis.stepsCount = params.stepsCount;\n\n\t\tthis.step1BackgroudNode = document.querySelector(`.${Wizard.cssClass.step1Backgroud}`);\n\t\tthis.bodyContainer = document.querySelector(`.${Wizard.cssClass.bodyContainer}`);\n\t\tthis.breadcrumbsContainer = document.querySelector(`.${Wizard.cssClass.breadcrumbsContainer}`);\n\t}\n\n\tshowCurrentStep()\n\t{\n\t\tif (Type.isDomNode(this.bodyContainer))\n\t\t{\n\t\t\tthis.bodyContainer.querySelectorAll(`.${Wizard.cssClass.bodyItem}`).forEach((bodyItem) => {\n\t\t\t\tif (bodyItem.classList.contains(`--step-${this.currentStep}`))\n\t\t\t\t{\n\t\t\t\t\tbodyItem.classList.add(Wizard.cssClass.activeBodyItem)\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tbodyItem.classList.remove(Wizard.cssClass.activeBodyItem);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (Type.isDomNode(this.breadcrumbsContainer))\n\t\t{\n\t\t\tthis.breadcrumbsContainer.querySelectorAll(`.${Wizard.cssClass.breadcrumbsItem}`).forEach((breadcrumbsItem) => {\n\t\t\t\tif (breadcrumbsItem.classList.contains(`--step-${this.currentStep}`))\n\t\t\t\t{\n\t\t\t\t\tbreadcrumbsItem.classList.add(Wizard.cssClass.activeBreadcrumbsItem)\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tbreadcrumbsItem.classList.remove(Wizard.cssClass.activeBreadcrumbsItem);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (\n\t\t\tthis.currentStep === Wizard.getFirstStepNumber()\n\t\t\t|| this.currentStep <= this.processedStep + 1\n\t\t)\n\t\t{\n\t\t\tButtons.hideButton(WorkgroupForm.getInstance().buttonsInstance.backButton);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (Type.isDomNode(this.step1BackgroudNode))\n\t\t\t{\n\t\t\t\tthis.step1BackgroudNode.classList.add(`--stop`);\n\t\t\t}\n\t\t\tButtons.showButton(WorkgroupForm.getInstance().buttonsInstance.backButton);\n\t\t}\n\n\t}\n\n\tsetProjectType(projectType)\n\t{\n\t\tif (Type.isDomNode(this.step1BackgroudNode))\n\t\t{\n\t\t\t[ 'project', 'scrum', 'group' ].forEach(projectType => {\n\t\t\t\tthis.step1BackgroudNode.classList.remove(`--${projectType}`);\n\t\t\t})\n\t\t\tthis.step1BackgroudNode.classList.remove('--stop');\n\t\t\tthis.step1BackgroudNode.classList.add(`--${projectType}`);\n\t\t}\n\t}\n\n\trecalcAfterSubmit(params)\n\t{\n\t\tconst processedStep = (Type.isStringFilled(params.processedStep) ? params.processedStep : '');\n\t\tconst createdGroupId = parseInt(!Type.isUndefined(params.createdGroupId) ? params.createdGroupId : 0);\n\t\tconst tabInputNode = document.getElementById('TAB');\n\t\tconst tabGroupIdNode = document.getElementById('SONET_GROUP_ID');\n\n\t\tif (\n\t\t\t!tabInputNode\n\t\t\t|| !Type.isStringFilled(processedStep)\n\t\t\t|| createdGroupId <= 0\n\t\t)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\ttabGroupIdNode.value = createdGroupId;\n\n\t\tif (processedStep === 'create')\n\t\t{\n\t\t\tthis.processedStep = 1;\n\t\t\ttabInputNode.value = 'edit';\n\t\t}\n\t\telse if (processedStep === 'edit')\n\t\t{\n\t\t\tthis.processedStep = 3;\n\t\t\ttabInputNode.value = 'invite';\n\t\t\tthis.bodyContainer.querySelectorAll('.socialnetwork-group-create-ex__create--switch-notinviteonly').forEach((selector) => {\n\t\t\t\tselector.classList.add('--inviteonly');\n\t\t\t});\n\t\t}\n\n\t\tthis.showCurrentStep();\n\t}\n}\n","import { Type, Dom } from 'main.core';\nimport { Alert } from 'ui.alerts';\n\nexport class AlertManager\n{\n\tconstructor(\n\t\tparams: {\n\t\t\terrorContainerId: string,\n\t\t}\n\t)\n\t{\n\t\tif (!Type.isStringFilled(params.errorContainerId))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.globalErrorContainer = document.getElementById(params.errorContainerId);\n\n\t\tthis.nodeAlerts = new Map();\n\t}\n\n\tshowAlert(text, targetNode)\n\t{\n\t\tif (Type.isDomNode(targetNode))\n\t\t{\n\t\t\ttargetNode.classList.add('ui-ctl-danger');\n\t\t}\n\t\telse\n\t\t{\n\t\t\ttargetNode = this.globalErrorContainer;\n\t\t}\n\n\n\t\tconst textAlert = new Alert({\n\t\t\tcolor: Alert.Color.DANGER,\n\t\t\tanimate: true,\n\t\t});\n\n\t\tthis.nodeAlerts.set(targetNode, textAlert);\n\n\t\tsetTimeout(() => {\n\t\t\ttargetNode.parentNode.insertBefore(textAlert.getContainer(), targetNode.nextSibling);\n\t\t\ttextAlert.setText(text);\n\n\t\t\twindow.scrollTo({\n\t\t\t\ttop: Dom.getPosition(targetNode).top,\n\t\t\t\tbehavior: 'smooth',\n\t\t\t});\n\t\t}, 500);\n\n\t}\n\n\thideAllAlerts()\n\t{\n\t\tthis.nodeAlerts.forEach((textAlert, targetNode) => {\n\t\t\ttextAlert.hide();\n\n\t\t\tif (Type.isDomNode(targetNode))\n\t\t\t{\n\t\t\t\ttargetNode.classList.remove('ui-ctl-danger');\n\t\t\t}\n\t\t});\n\n\t\tthis.nodeAlerts.clear();\n\t}\n}\n","import {Loc, Type, Dom} from 'main.core';\nimport {BaseEvent, EventEmitter} from 'main.core.events';\nimport {TagSelector} from 'ui.entity-selector';\n\nimport {WorkgroupForm} from './index';\nimport {Util} from './util';\n\nexport class TeamManager\n{\n\tstatic instance = null;\n\n\tstatic contextList = {\n\t\towner: 'GROUP_INVITE_OWNER',\n\t\tscrumMaster: 'GROUP_INVITE_SCRUM_MASTER',\n\t\tmoderators: 'GROUP_INVITE_MODERATORS',\n\t\tusers: 'GROUP_INVITE',\n\t};\n\n\tstatic getInstance()\n\t{\n\t\treturn WorkgroupForm.instance;\n\t}\n\n\tconstructor(params)\n\t{\n\t\tthis.ownerSelector = null;\n\t\tthis.scrumMasterSelector = null;\n\t\tthis.moderatorsSelector = null;\n\t\tthis.usersSelector = null;\n\n\t\tthis.ownerOptions = params.ownerOptions || {};\n\t\tthis.scrumMasterOptions = params.scrumMasterOptions || {};\n\t\tthis.moderatorsOptions = params.moderatorsOptions || {};\n\t\tthis.usersOptions = params.usersOptions || {};\n\n\t\tthis.ownerContainerNode = document.getElementById('GROUP_OWNER_selector');\n\t\tthis.scrumMasterContainerNode = document.getElementById('SCRUM_MASTER_selector');\n\t\tthis.moderatorsContainerNode = document.getElementById('GROUP_MODERATORS_selector');\n\t\tthis.usersContainerNode = document.getElementById('GROUP_USERS_selector');\n\n\t\tthis.isCurrentUserAdmin = (Type.isBoolean(params.isCurrentUserAdmin) ? params.isCurrentUserAdmin : false);\n\t\tthis.extranetInstalled = (Type.isBoolean(params.extranetInstalled) ? params.extranetInstalled : false);\n\t\tthis.allowExtranet = (Type.isBoolean(params.allowExtranet) ? params.allowExtranet : false);\n\n\t\tthis.buildOwnerSelector();\n\t\tthis.buildScrumMasterSelector();\n\t\tthis.buildModeratorsSelector();\n\t\tthis.buildUsersSelector();\n\n\t\tthis.bindEvents();\n\t}\n\n\tbuildOwnerSelector()\n\t{\n\t\tif (!Type.isDomNode(this.ownerContainerNode))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tDom.clean(this.ownerContainerNode);\n\n\t\tconst selectorOptions = this.ownerOptions;\n\t\tthis.ownerSelector = new TagSelector({\n\n\t\t\tid: selectorOptions.selectorId || 'group_create_owner',\n\t\t\tdialogOptions: {\n\t\t\t\tid: selectorOptions.selectorId || 'group_create_owner',\n\t\t\t\tcontext: TeamManager.contextList.owner,\n\t\t\t\tpreselectedItems: selectorOptions.value,\n\t\t\t\tevents: {\n\t\t\t\t\tonLoad: this.onLoad.bind(this),\n\t\t\t\t\t'Item:onSelect': TeamManager.onOwnerSelect,\n\t\t\t\t\t'Item:onDeselect': TeamManager.onOwnerSelect,\n\t\t\t\t},\n\t\t\t\tentities: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'user',\n\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\tintranetUsersOnly: !this.allowExtranet,\n\t\t\t\t\t\t\tinviteEmployeeLink: true,\n\t\t\t\t\t\t\tinviteExtranetLink: true,\n\t\t\t\t\t\t\tcheckWorkgroupWhenInvite: false,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'department',\n\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\tselectMode: 'usersOnly',\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\t\t\tmultiple: false,\n\t\t\taddButtonCaption: Loc.getMessage('SONET_GCE_T_ADD_OWNER'),\n\t\t});\n\n\t\tthis.ownerSelector.renderTo(this.ownerContainerNode);\n\t}\n\n\tbuildScrumMasterSelector()\n\t{\n\t\tif (!Type.isDomNode(this.scrumMasterContainerNode))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tDom.clean(this.scrumMasterContainerNode);\n\n\t\tconst selectorOptions = this.scrumMasterOptions;\n\n\t\tthis.scrumMasterSelector = new TagSelector({\n\n\t\t\tid: selectorOptions.selectorId || 'group_create_scrum_master',\n\t\t\tdialogOptions: {\n\t\t\t\tid: selectorOptions.selectorId || 'group_create_scrum_master',\n\t\t\t\tcontext: TeamManager.contextList.scrumMaster,\n\t\t\t\tpreselectedItems: selectorOptions.value,\n\t\t\t\tevents: {\n\t\t\t\t\tonLoad: this.onLoad.bind(this),\n\t\t\t\t\t'Item:onSelect': TeamManager.onScrumMasterSelect,\n\t\t\t\t\t'Item:onDeselect': TeamManager.onScrumMasterSelect,\n\t\t\t\t},\n\t\t\t\tentities: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'user',\n\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\tintranetUsersOnly: !this.allowExtranet,\n\t\t\t\t\t\t\tinviteEmployeeLink: true,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'department',\n\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\tselectMode: 'usersOnly',\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\t\t\tmultiple: false,\n\t\t\taddButtonCaption: Loc.getMessage('SONET_GCE_T_CHANGE_SCRUM_MASTER'),\n\t\t\taddButtonCaptionMore: Loc.getMessage('SONET_GCE_T_CHANGE_SCRUM_MASTER_MORE'),\n\t\t});\n\n\t\tthis.scrumMasterSelector.renderTo(this.scrumMasterContainerNode);\n\t}\n\n\tbuildModeratorsSelector()\n\t{\n\t\tif (!Type.isDomNode(this.moderatorsContainerNode))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tDom.clean(this.moderatorsContainerNode);\n\n\t\tconst selectorOptions = this.moderatorsOptions;\n\n\t\tthis.moderatorsSelector = new TagSelector({\n\n\t\t\tid: selectorOptions.selectorId || 'group_create_moderators',\n\t\t\tdialogOptions: {\n\t\t\t\tid: selectorOptions.selectorId || 'group_create_moderators',\n\t\t\t\tcontext: TeamManager.contextList.moderators,\n\t\t\t\tpreselectedItems: selectorOptions.value,\n\t\t\t\tevents: {\n\t\t\t\t\tonLoad: this.onLoad.bind(this),\n\t\t\t\t\t'Item:onSelect': TeamManager.onModeratorsSelect,\n\t\t\t\t\t'Item:onDeselect': TeamManager.onModeratorsSelect,\n\t\t\t\t},\n\t\t\t\tentities: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'user',\n\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\tintranetUsersOnly: !this.allowExtranet,\n\t\t\t\t\t\t\tinviteEmployeeLink: true,\n\t\t\t\t\t\t\tcheckWorkgroupWhenInvite: false,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'department',\n\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\tselectMode: 'usersOnly',\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\t\t\tmultiple: true,\n\t\t\taddButtonCaption: Loc.getMessage('SONET_GCE_T_ADD_USER'),\n\t\t\taddButtonCaptionMore: Loc.getMessage('SONET_GCE_T_ADD_USER_MORE'),\n\t\t});\n\n\t\tthis.moderatorsSelector.renderTo(this.moderatorsContainerNode);\n\t}\n\n\tbuildUsersSelector()\n\t{\n\t\tif (!Type.isDomNode(this.usersContainerNode))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tDom.clean(this.usersContainerNode);\n\n\t\tconst selectorOptions = this.usersOptions;\n\n\t\tthis.usersSelector = new TagSelector({\n\t\t\tid: selectorOptions.selectorId || 'group_create_users',\n\t\t\tdialogOptions: {\n\t\t\t\tid: selectorOptions.selectorId || 'group_create_users',\n\t\t\t\tcontext: TeamManager.contextList.users,\n\t\t\t\tpreselectedItems: selectorOptions.value,\n\t\t\t\tevents: {\n\t\t\t\t\tonLoad: this.onLoad.bind(this),\n\t\t\t\t\t'Item:onSelect': TeamManager.onUsersSelect,\n\t\t\t\t\t'Item:onDeselect': TeamManager.onUsersSelect,\n\t\t\t\t},\n\t\t\t\tentities: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'user',\n\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\tinviteEmployeeLink: true,\n\t\t\t\t\t\t\t'!userId': (this.isCurrentUserAdmin ? [ parseInt(Loc.getMessage('USER_ID')) ] : []),\n\t\t\t\t\t\t\tintranetUsersOnly: !this.allowExtranet,\n\t\t\t\t\t\t\tcheckWorkgroupWhenInvite: false,\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'department',\n\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\tselectMode: (selectorOptions.enableSelectDepartment ? 'usersAndDepartments' : 'usersOnly'),\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\t\t\tmultiple: true,\n\t\t\taddButtonCaption: Loc.getMessage('SONET_GCE_T_ADD_USER'),\n\t\t\taddButtonCaptionMore: Loc.getMessage('SONET_GCE_T_ADD_USER_MORE'),\n\t\t});\n\n\t\tthis.usersSelector.renderTo(this.usersContainerNode);\n\t}\n\n\tbindEvents()\n\t{\n\t\tWorkgroupForm.getInstance().subscribe('onSwitchExtranet', this.onSwitchExtranet.bind(this));\n\t\tEventEmitter.emit('BX.Socialnetwork.WorkgroupFormTeamManager::onEventsBinded');\n\t}\n\n\tonSwitchExtranet(event)\n\t{\n\t\tconst data = event.getData();\n\t\tif (!Type.isBoolean(data.isChecked))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.allowExtranet = this.extranetInstalled && data.isChecked;\n\n\t\tif (\n\t\t\tthis.ownerSelector\n\t\t\t&& [ 'DONE', 'UNSENT' ].includes(this.ownerSelector.getDialog().loadState)\n\t\t)\n\t\t{\n\t\t\tthis.recalcSelectorByExtranetSwitched({\n\t\t\t\tselector: this.ownerSelector,\n\t\t\t\tisChecked: data.isChecked,\n\t\t\t\toptions: this.ownerOptions,\n\t\t\t});\n\t\t\tthis.buildOwnerSelector();\n\t\t}\n\n\t\tif (\n\t\t\tthis.scrumMasterSelector\n\t\t\t&& [ 'DONE', 'UNSENT' ].includes(this.scrumMasterSelector.getDialog().loadState)\n\t\t)\n\t\t{\n\t\t\tthis.recalcSelectorByExtranetSwitched({\n\t\t\t\tselector: this.scrumMasterSelector,\n\t\t\t\tisChecked: data.isChecked,\n\t\t\t\toptions: this.scrumMasterOptions,\n\t\t\t});\n\n\t\t\tthis.buildScrumMasterSelector();\n\t\t}\n\n\t\tif (\n\t\t\tthis.moderatorsSelector\n\t\t\t&& [ 'DONE', 'UNSENT' ].includes(this.moderatorsSelector.getDialog().loadState)\n\t\t)\n\t\t{\n\t\t\tthis.recalcSelectorByExtranetSwitched({\n\t\t\t\tselector: this.moderatorsSelector,\n\t\t\t\tisChecked: data.isChecked,\n\t\t\t\toptions: this.moderatorsOptions,\n\t\t\t});\n\n\t\t\tthis.buildModeratorsSelector();\n\t\t}\n\n\t\tif (\n\t\t\tthis.usersSelector\n\t\t\t&& [ 'DONE', 'UNSENT' ].includes(this.usersSelector.getDialog().loadState)\n\t\t)\n\t\t{\n\t\t\tthis.recalcSelectorByExtranetSwitched({\n\t\t\t\tselector: this.usersSelector,\n\t\t\t\tisChecked: data.isChecked,\n\t\t\t\toptions: this.usersOptions,\n\t\t\t});\n\n\t\t\tthis.buildUsersSelector();\n\t\t}\n\t}\n\n\trecalcSelectorByExtranetSwitched(params)\n\t{\n\t\tconst selector = params.selector;\n\t\tconst isChecked = params.isChecked;\n\n\t\tconst context = selector.getDialog().getContext();\n\t\tlet selectedItems = selector.getDialog().getSelectedItems();\n\n\t\tif (\n\t\t\tthis.extranetInstalled && !isChecked\n\t\t\t&& Type.isArray(selectedItems)\n\t\t)\n\t\t{\n\t\t\tselectedItems = selectedItems.filter((item) => {\n\t\t\t\treturn !(item.getEntityId() === 'user' && item.getEntityType() === 'extranet');\n\t\t\t});\n\n\t\t\tswitch (context)\n\t\t\t{\n\t\t\t\tcase TeamManager.contextList.owner:\n\t\t\t\t\tUtil.recalcInputValue({\n\t\t\t\t\t\tselectedItems: selectedItems,\n\t\t\t\t\t\tinputNodeName: 'OWNER_CODE',\n\t\t\t\t\t\tinputContainerNodeId: 'OWNER_CODE_container',\n\t\t\t\t\t\tmultiple: false,\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tcase TeamManager.contextList.scrumMaster:\n\t\t\t\t\tUtil.recalcInputValue({\n\t\t\t\t\t\tselectedItems: selectedItems,\n\t\t\t\t\t\tinputNodeName: 'SCRUM_MASTER_CODE',\n\t\t\t\t\t\tinputContainerNodeId: 'SCRUM_MASTER_CODE_container',\n\t\t\t\t\t\tmultiple: false,\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tcase TeamManager.contextList.moderators:\n\t\t\t\t\tUtil.recalcInputValue({\n\t\t\t\t\t\tselectedItems: selectedItems,\n\t\t\t\t\t\tinputNodeName: 'MODERATOR_CODES',\n\t\t\t\t\t\tinputContainerNodeId: 'MODERATOR_CODES_container',\n\t\t\t\t\t\tmultiple: true,\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tcase TeamManager.contextList.users:\n\t\t\t\t\tUtil.recalcInputValue({\n\t\t\t\t\t\tselectedItems: selectedItems,\n\t\t\t\t\t\tinputNodeName: 'USER_CODES',\n\t\t\t\t\t\tinputContainerNodeId: 'USER_CODES_container',\n\t\t\t\t\t\tmultiple: true,\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t}\n\t\t}\n\n\t\tparams.options.value = selectedItems.map((item) => {\n\t\t\treturn [ item.getEntityId(), item.getId() ];\n\t\t});\n\t}\n\n\tonLoad(event: BaseEvent)\n\t{\n\t\tswitch (event.getTarget().context)\n\t\t{\n\t\t\tcase TeamManager.contextList.owner:\n\t\t\t\tthis.recalcSelectorByExtranetSwitched({\n\t\t\t\t\tselector: this.ownerSelector,\n\t\t\t\t\tisChecked: this.allowExtranet,\n\t\t\t\t\toptions: this.ownerOptions,\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\tcase TeamManager.contextList.scrumMaster:\n\t\t\t\tthis.recalcSelectorByExtranetSwitched({\n\t\t\t\t\tselector: this.scrumMasterSelector,\n\t\t\t\t\tisChecked: this.allowExtranet,\n\t\t\t\t\toptions: this.scrumMasterOptions,\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\tcase TeamManager.contextList.moderators:\n\t\t\t\tthis.recalcSelectorByExtranetSwitched({\n\t\t\t\t\tselector: this.moderatorsSelector,\n\t\t\t\t\tisChecked: this.allowExtranet,\n\t\t\t\t\toptions: this.moderatorsOptions,\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\tcase TeamManager.contextList.users:\n\t\t\t\tthis.recalcSelectorByExtranetSwitched({\n\t\t\t\t\tselector: this.usersSelector,\n\t\t\t\t\tisChecked: this.allowExtranet,\n\t\t\t\t\toptions: this.usersOptions,\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t}\n\t}\n\n\tstatic onOwnerSelect(event: BaseEvent)\n\t{\n\t\tUtil.recalcInputValue({\n\t\t\tselectedItems: event.getTarget().getSelectedItems(),\n\t\t\tinputNodeName: 'OWNER_CODE',\n\t\t\tinputContainerNodeId: 'OWNER_CODE_container',\n\t\t\tmultiple: false,\n\t\t});\n\t}\n\n\tstatic onScrumMasterSelect(event: BaseEvent)\n\t{\n\t\tUtil.recalcInputValue({\n\t\t\tselectedItems: event.getTarget().getSelectedItems(),\n\t\t\tinputNodeName: 'SCRUM_MASTER_CODE',\n\t\t\tinputContainerNodeId: 'SCRUM_MASTER_CODE_container',\n\t\t\tmultiple: false,\n\t\t});\n\t}\n\n\tstatic onModeratorsSelect(event: BaseEvent)\n\t{\n\t\tUtil.recalcInputValue({\n\t\t\tselectedItems: event.getTarget().getSelectedItems(),\n\t\t\tinputNodeName: 'MODERATOR_CODES',\n\t\t\tinputContainerNodeId: 'MODERATOR_CODES_container',\n\t\t\tmultiple: true,\n\t\t});\n\t}\n\n\tstatic onUsersSelect(event: BaseEvent)\n\t{\n\t\tUtil.recalcInputValue({\n\t\t\tselectedItems: event.getTarget().getSelectedItems(),\n\t\t\tinputNodeName: 'USER_CODES',\n\t\t\tinputContainerNodeId: 'USER_CODES_container',\n\t\t\tmultiple: true,\n\t\t});\n\n\t\tconst hintNode = document.getElementById('GROUP_ADD_DEPT_HINT_block');\n\t\tif (hintNode)\n\t\t{\n\t\t\tTeamManager.showDepartmentHint({\n\t\t\t\tselectedItems: event.getTarget().getSelectedItems(),\n\t\t\t\thintNode: hintNode,\n\t\t\t});\n\t\t}\n\t}\n\n\tstatic showDepartmentHint(params)\n\t{\n\t\tconst selectedItems = params.selectedItems || {};\n\t\tconst hintNode = params.hintNode || null;\n\t\tif (!Type.isDomNode(hintNode))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (!Type.isArray(selectedItems))\n\t\t{\n\t\t\thintNode.classList.remove('visible');\n\t\t\treturn;\n\t\t}\n\n\t\tconst departmentFound = !Type.isUndefined(selectedItems.find((item) => {\n\t\t\treturn (item.entityId === 'department');\n\t\t}));\n\n\t\tif (departmentFound)\n\t\t{\n\t\t\thintNode.classList.add('visible');\n\t\t}\n\t\telse\n\t\t{\n\t\t\thintNode.classList.remove('visible');\n\t\t}\n\t}\n}\n","export class FeaturesManager\n{\n\tconstructor()\n\t{\n\t\tconst containerNode = document.getElementById('additional-block-features');\n\t\tif (!containerNode)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tcontainerNode.querySelectorAll('.socialnetwork-group-create-ex__project-instruments--icon-action.--edit').forEach((editButton) => {\n\n\t\t\teditButton.addEventListener('click', (e) => {\n\n\t\t\t\tconst editButton = e.currentTarget;\n\t\t\t\tconst featureNode = editButton.closest('.socialnetwork-group-create-ex__project-instruments--item');\n\t\t\t\tif (featureNode)\n\t\t\t\t{\n\t\t\t\t\tfeatureNode.classList.add('--custom-value');\n\n\t\t\t\t\tconst inputNode = featureNode.querySelector('[data-role=\"feature-input-text\"]');\n\t\t\t\t\tconst textNode = featureNode.querySelector('[data-role=\"feature-label\"]');\n\t\t\t\t\tif (\n\t\t\t\t\t\tinputNode\n\t\t\t\t\t\t&& textNode\n\t\t\t\t\t)\n\t\t\t\t\t{\n\t\t\t\t\t\tinputNode.value = textNode.innerText;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\te.preventDefault();\n\t\t\t});\n\n\t\t});\n\n\t\tcontainerNode.querySelectorAll('.socialnetwork-group-create-ex__project-instruments--icon-action.--revert').forEach((cancelButton) => {\n\n\t\t\tcancelButton.addEventListener('click', (e) => {\n\n\t\t\t\tconst editButton = e.currentTarget;\n\t\t\t\tconst featureNode = editButton.closest('.socialnetwork-group-create-ex__project-instruments--item');\n\t\t\t\tif (featureNode)\n\t\t\t\t{\n\t\t\t\t\tfeatureNode.classList.remove('--custom-value');\n\n\t\t\t\t\tconst inputNode = featureNode.querySelector('[data-role=\"feature-input-text\"]');\n\t\t\t\t\tif (inputNode)\n\t\t\t\t\t{\n\t\t\t\t\t\tinputNode.value = '';\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\te.preventDefault();\n\t\t\t});\n\n\t\t});\n\t}\n}\n","import { Type } from 'main.core';\nimport { FieldsManager } from './fields';\n\nexport class UFManager\n{\n\tconstructor(\n\t\tparams: {\n\t\t\tmandatoryUFList: object,\n\t\t}\n\t)\n\t{\n\t\tif (\n\t\t\tType.isPlainObject(FieldsManager.mandatoryFieldsByStep)\n\t\t\t&& Type.isArray(FieldsManager.mandatoryFieldsByStep[2])\n\t\t\t&& Type.isArray(params.mandatoryUFList)\n\t\t)\n\t\t{\n\t\t\tparams.mandatoryUFList.forEach((ufData) => {\n\t\t\t\tif (\n\t\t\t\t\t!Type.isStringFilled(ufData.id)\n\t\t\t\t\t|| !Type.isStringFilled(ufData.type)\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tFieldsManager.mandatoryFieldsByStep[2].push(ufData);\n\t\t\t});\n\t\t}\n\t}\n\n}\n","import {Type, Loc, ajax, Uri} from 'main.core';\nimport {BaseEvent, EventEmitter} from 'main.core.events';\n\nimport {Scrum} from './scrum';\nimport {Avatar} from './avatar';\nimport {ThemePicker} from './themepicker';\nimport {Tags} from './tags';\nimport {Util} from './util';\nimport {TypePresetSelector} from './typepresetselector';\nimport {ConfidentialitySelector} from './confidentialityselector';\nimport {Buttons} from './buttons';\nimport {Wizard} from './wizard';\nimport {AlertManager} from './alert';\nimport {TeamManager} from './team';\nimport {FeaturesManager} from './features';\nimport {UFManager} from './uf';\n\nclass WorkgroupForm extends EventEmitter\n{\n\tstatic instance = null;\n\n\tstatic getInstance()\n\t{\n\t\treturn WorkgroupForm.instance;\n\t}\n\n\tconstructor(\n\t\tparams: {\n\t\t\tcomponentName: string,\n\t\t\tsignedParameters: string,\n\t\t\tselectedProjectType: string,\n\t\t\tselectedConfidentialityType: string,\n\t\t\tgroupId: number,\n\t\t\tisScrumProject: boolean,\n\t\t\tconfig: object,\n\t\t\tavatarUploaderId: string,\n\t\t\tthemePickerData: object,\n\t\t\tprojectOptions: object,\n\t\t\tprojectTypes: object,\n\t\t\tconfidentialityTypes: object,\n\t\t\tstepsCount: number,\n\t\t}\n\t)\n\t{\n\t\tsuper();\n\n\t\tthis.setEventNamespace('BX.Socialnetwork.WorkgroupForm');\n\n\t\tthis.componentName = params.componentName;\n\t\tthis.signedParameters = params.signedParameters;\n\t\tthis.userSelector = '';\n\t\tthis.lastAction = 'invite';\n\t\tthis.arUserSelector = [];\n\t\tthis.animationList = {};\n\t\tthis.selectedTypeCode = false;\n\n\t\tthis.groupId = parseInt(params.groupId);\n\t\tthis.isScrumProject = params.isScrumProject;\n\t\tthis.config = params.config;\n\t\tthis.avatarUploaderId = params.avatarUploaderId;\n\t\tthis.themePickerData = params.themePickerData;\n\t\tthis.projectOptions = params.projectOptions;\n\n\t\tthis.projectTypes = params.projectTypes;\n\t\tthis.confidentialityTypes = params.confidentialityTypes;\n\t\tthis.selectedProjectType = params.selectedProjectType;\n\t\tthis.selectedConfidentialityType = params.selectedConfidentialityType;\n\n\t\tthis.scrumManager = new Scrum({\n\t\t\tisScrumProject: this.isScrumProject,\n\t\t});\n\n\t\tthis.wizardManager = new Wizard({\n\t\t\tcurrentStep: Object.entries(this.projectTypes).length > 1 ? 1 : 2,\n\t\t\tstepsCount: (params.stepsCount > 1 ? params.stepsCount : 1),\n\t\t});\n\n\t\tthis.alertManager = new AlertManager({\n\t\t\terrorContainerId: 'sonet_group_create_error_block',\n\t\t});\n\n\t\tWorkgroupForm.instance = this;\n\n\t\tthis.init(params);\n\t\tthis.buttonsInstance = new Buttons();\n\t}\n\n\tinit(params)\n\t{\n\t\tthis.scrumManager.makeAdditionalCustomizationForm();\n\n\t\tif (this.groupId <= 0)\n\t\t{\n\t\t\tthis.recalcForm();\n\t\t}\n\n\t\tnew Avatar({\n\t\t\tcomponentName: this.componentName,\n\t\t\tsignedParameters: this.signedParameters,\n\t\t\tgroupId: this.groupId,\n\t\t});\n\n\t\tif (\n\t\t\tType.isPlainObject(params.themePickerData)\n\t\t\t&& document.getElementById('GROUP_THEME_container')\n\t\t)\n\t\t{\n\t\t\tnew ThemePicker({\n\t\t\t\tcontainer: document.getElementById('GROUP_THEME_container'),\n\t\t\t\ttheme: params.themePickerData,\n\t\t\t});\n\t\t}\n\n\t\tif (document.getElementById('group-tags-bind-node'))\n\t\t{\n\t\t\tnew Tags({\n\t\t\t\tgroupId: this.groupId,\n\t\t\t\tcontainerNodeId: 'group-tags-bind-node',\n\t\t\t\thiddenFieldId: 'GROUP_KEYWORDS',\n\t\t\t});\n\t\t}\n\n\t\tnew TypePresetSelector();\n\t\tnew ConfidentialitySelector();\n\t\tnew FeaturesManager();\n\n\t\tconst groupNameNode = document.getElementById('GROUP_NAME_input');\n\t\tif (groupNameNode)\n\t\t{\n\t\t\tgroupNameNode.focus();\n\t\t}\n\n\t\tthis.bindEvents();\n\n\t\tUtil.initExpandSwitches();\n\t\tUtil.initDropdowns();\n\n\t\tif (Type.isStringFilled(params.expandableSettingsNodeId))\n\t\t{\n\t\t\tBX.UI.Hint.init(document.getElementById(params.expandableSettingsNodeId));\n\t\t}\n\n\t\tif (this.groupId <= 0 && this.selectedProjectType === 'scrum')\n\t\t{\n\t\t\tthis.saveScrumAnalyticData();\n\t\t}\n\t}\n\n\tbindEvents()\n\t{\n\t\tif (BX.SidePanel.Instance.getTopSlider())\n\t\t{\n\t\t\tEventEmitter.subscribe(BX.SidePanel.Instance.getTopSlider().getWindow(), 'SidePanel.Slider:onClose', (event) => {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tconst sliderInstance = event.getTarget();\n\t\t\t\t\tif (!sliderInstance)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tBX.SidePanel.Instance.destroy(sliderInstance.getUrl());\n\t\t\t\t}, 500);\n\t\t\t});\n\t\t}\n\n\t\tconst extranetCheckboxNode = document.getElementById('IS_EXTRANET_GROUP');\n\t\tif (\n\t\t\textranetCheckboxNode\n\t\t\t&& extranetCheckboxNode.type === 'checkbox'\n\t\t)\n\t\t{\n\t\t\textranetCheckboxNode.addEventListener('click', () => {\n\t\t\t\tthis.switchExtranet(extranetCheckboxNode.checked);\n\t\t\t});\n\t\t}\n\n\t\tconst visibleCheckboxNode = document.getElementById('GROUP_VISIBLE');\n\t\tif (\n\t\t\tvisibleCheckboxNode\n\t\t\t&& visibleCheckboxNode.type === 'checkbox'\n\t\t)\n\t\t{\n\t\t\tvisibleCheckboxNode.addEventListener('click', () => {\n\t\t\t\tthis.switchNotVisible(visibleCheckboxNode.checked);\n\t\t\t});\n\t\t}\n\n\t\tconst projectCheckboxNode = document.getElementById('GROUP_PROJECT');\n\t\tif (\n\t\t\tprojectCheckboxNode\n\t\t\t&& projectCheckboxNode.type === 'checkbox'\n\t\t)\n\t\t{\n\t\t\tprojectCheckboxNode.addEventListener('click', () => {\n\t\t\t\tUtil.recalcFormPartProject(projectCheckboxNode.checked);\n\t\t\t});\n\t\t}\n\n\t\tEventEmitter.subscribe('BX.Socialnetwork.WorkgroupFormTeamManager::onEventsBinded', this.recalcFormDependencies.bind(this));\n\t}\n\n\trecalcForm(params)\n\t{\n\t\tif (Type.isPlainObject(params))\n\t\t{\n\t\t\tif (!Type.isUndefined(params.selectedProjectType))\n\t\t\t{\n\t\t\t\tthis.selectedProjectType = (Type.isStringFilled(params.selectedProjectType) ? params.selectedProjectType : '');\n\t\t\t}\n\t\t\tif (!Type.isUndefined(params.selectedConfidentialityType))\n\t\t\t{\n\t\t\t\tthis.selectedConfidentialityType = (Type.isStringFilled(params.selectedConfidentialityType) ? params.selectedConfidentialityType : '');\n\t\t\t}\n\t\t}\n\n\t\tif (this.groupId <= 0)\n\t\t{\n\t\t\tthis.scrumManager.isScrumProject = (\n\t\t\t\tType.isPlainObject(this.projectTypes[this.selectedProjectType])\n\t\t\t\t&& Type.isStringFilled(this.projectTypes[this.selectedProjectType]['SCRUM_PROJECT'])\n\t\t\t\t&& this.projectTypes[this.selectedProjectType]['SCRUM_PROJECT'] === 'Y'\n\t\t\t);\n\n\t\t\tUtil.recalcFormPartProject(\n\t\t\t\tType.isPlainObject(this.projectTypes[this.selectedProjectType])\n\t\t\t\t&& Type.isStringFilled(this.projectTypes[this.selectedProjectType].PROJECT)\n\t\t\t\t&& this.projectTypes[this.selectedProjectType].PROJECT === 'Y'\n\t\t\t);\n\t\t}\n\n\t\tthis.scrumManager.makeAdditionalCustomizationForm();\n\n\t\tif (this.groupId <= 0)\n\t\t{\n\t\t\tconst openedCheckboxNode = document.getElementById('GROUP_OPENED');\n\t\t\tif (openedCheckboxNode)\n\t\t\t{\n\t\t\t\tUtil.setCheckedValue(openedCheckboxNode, (\n\t\t\t\t\tType.isPlainObject(this.confidentialityTypes[this.selectedConfidentialityType])\n\t\t\t\t\t&& Type.isStringFilled(this.confidentialityTypes[this.selectedConfidentialityType].OPENED)\n\t\t\t\t\t&& this.confidentialityTypes[this.selectedConfidentialityType].OPENED === 'Y'\n\t\t\t\t));\n\t\t\t}\n\n\t\t\tconst visibleCheckboxNode = document.getElementById('GROUP_VISIBLE');\n\t\t\tif (visibleCheckboxNode)\n\t\t\t{\n\t\t\t\tUtil.setCheckedValue(visibleCheckboxNode, (\n\t\t\t\t\tType.isPlainObject(this.confidentialityTypes[this.selectedConfidentialityType])\n\t\t\t\t\t&& Type.isStringFilled(this.confidentialityTypes[this.selectedConfidentialityType].VISIBLE)\n\t\t\t\t\t&& this.confidentialityTypes[this.selectedConfidentialityType].VISIBLE === 'Y'\n\t\t\t\t));\n\t\t\t}\n\t\t}\n\n\t\tthis.recalcFormDependencies();\n\t};\n\n\trecalcFormDependencies()\n\t{\n\t\tconst extranetCheckboxNode = document.getElementById('IS_EXTRANET_GROUP');\n\t\tif (extranetCheckboxNode)\n\t\t{\n\t\t\tthis.switchExtranet(Util.getCheckedValue(extranetCheckboxNode));\n\t\t}\n\n\t\tconst visibleCheckboxNode = document.getElementById('GROUP_VISIBLE');\n\t\tconst openedCheckboxNode = document.getElementById('GROUP_OPENED');\n\t\tif (\n\t\t\tvisibleCheckboxNode\n\t\t\t&& openedCheckboxNode\n\t\t\t&& (!Util.getCheckedValue(visibleCheckboxNode))\n\t\t)\n\t\t{\n\t\t\tUtil.setCheckedValue(openedCheckboxNode, false);\n\t\t}\n\t}\n\n\tswitchExtranet(isChecked)\n\t{\n\t\tthis.emit('onSwitchExtranet', new BaseEvent({\n\t\t\tdata: {\n\t\t\t\tisChecked,\n\t\t\t},\n\t\t}));\n\n\t\tconst openedBlock = document.getElementById('GROUP_OPENED');\n\t\tif (openedBlock)\n\t\t{\n\t\t\tif (!isChecked)\n\t\t\t{\n\t\t\t\tif (openedBlock.type === 'checkbox')\n\t\t\t\t{\n\t\t\t\t\topenedBlock.disabled = false;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (openedBlock.type === 'checkbox')\n\t\t\t\t{\n\t\t\t\t\topenedBlock.disabled = true;\n\t\t\t\t\topenedBlock.checked = false;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\topenedBlock.value = 'N';\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst visibleBlock = document.getElementById('GROUP_VISIBLE');\n\t\tif (visibleBlock)\n\t\t{\n\t\t\tif (!isChecked)\n\t\t\t{\n\t\t\t\tif (visibleBlock.type == 'checkbox')\n\t\t\t\t{\n\t\t\t\t\tvisibleBlock.disabled = false;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (visibleBlock.type == 'checkbox')\n\t\t\t\t{\n\t\t\t\t\tvisibleBlock.disabled = true;\n\t\t\t\t\tvisibleBlock.checked = false;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tvisibleBlock.value = 'N';\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tswitchNotVisible(isChecked)\n\t{\n\t\tconst openedNode = document.getElementById('GROUP_OPENED')\n\t\tif (\n\t\t\topenedNode\n\t\t\t&& openedNode.type == 'checkbox'\n\t\t)\n\t\t{\n\t\t\tif (isChecked)\n\t\t\t{\n\t\t\t\topenedNode.disabled = false;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\topenedNode.disabled = true;\n\t\t\t\topenedNode.checked = false;\n\t\t\t}\n\t\t}\n\t}\n\n\tsubmitForm(e)\n\t{\n\t\tlet actionUrl = document.getElementById('sonet_group_create_popup_form').action;\n\n\t\tif (actionUrl)\n\t\t{\n\t\t\tconst groupIdNode = document.getElementById('SONET_GROUP_ID');\n\t\t\tlet b24statAction = 'addSonetGroup';\n\n\t\t\tif (groupIdNode)\n\t\t\t{\n\t\t\t\tif (parseInt(groupIdNode.value) <= 0)\n\t\t\t\t{\n\t\t\t\t\tactionUrl = Uri.addParam(actionUrl, {\n\t\t\t\t\t\taction: 'createGroup',\n\t\t\t\t\t\tgroupType: this.selectedTypeCode,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tb24statAction = 'editSonetGroup';\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tactionUrl = Uri.addParam(actionUrl, {\n\t\t\t\tb24statAction: b24statAction,\n\t\t\t});\n\n\t\t\tconst formElements = document.forms['sonet_group_create_popup_form'].elements;\n\t\t\tif (\n\t\t\t\tformElements.GROUP_PROJECT\n\t\t\t\t&& (\n\t\t\t\t\tformElements.IS_EXTRANET_GROUP\n\t\t\t\t\t|| formElements.GROUP_OPENED\n\t\t\t\t)\n\t\t\t)\n\t\t\t{\n\t\t\t\tlet b24statType = (formElements.GROUP_PROJECT.checked ? 'project-' : 'group-');\n\t\t\t\tif (\n\t\t\t\t\tformElements.IS_EXTRANET_GROUP\n\t\t\t\t\t&& formElements.IS_EXTRANET_GROUP.checked\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tb24statType += 'external';\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tb24statType += (formElements.GROUP_OPENED.checked ? 'open' : 'closed');\n\t\t\t\t}\n\n\t\t\t\tactionUrl = Uri.addParam(actionUrl, {\n\t\t\t\t\tb24statType: b24statType,\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\tformElements.SCRUM_PROJECT\n\t\t\t\t&& b24statAction === 'addSonetGroup'\n\t\t\t)\n\t\t\t{\n\t\t\t\tactionUrl = Uri.addParam(actionUrl, {\n\t\t\t\t\tanalyticsLabel: {\n\t\t\t\t\t\tscrum: 'Y',\n\t\t\t\t\t\taction: 'scrum_create',\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tButtons.showWaitSubmitButton(true);\n\n\t\t\tajax.submitAjax(\n\t\t\t\tdocument.forms['sonet_group_create_popup_form'],\n\t\t\t\t{\n\t\t\t\t\turl: actionUrl,\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\tdataType: 'json',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tPROJECT_OPTIONS: this.projectOptions,\n\t\t\t\t\t},\n\t\t\t\t\tonsuccess: (response) => {\n\t\t\t\t\t\tif (Type.isStringFilled(response.ERROR))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconst warningText = (\n\t\t\t\t\t\t\t\tType.isStringFilled(response.WARNING)\n\t\t\t\t\t\t\t\t\t? `${response.WARNING}<br>`\n\t\t\t\t\t\t\t\t\t: ''\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\tthis.alertManager.showAlert(`${warningText}${response.ERROR}`);\n\n\t\t\t\t\t\t\tif (Type.isStringFilled(response.WIZARD_STEP_PROCESSED))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.wizardManager.recalcAfterSubmit({\n\t\t\t\t\t\t\t\t\tprocessedStep: response.WIZARD_STEP_PROCESSED.toLowerCase(),\n\t\t\t\t\t\t\t\t\tcreatedGroupId: parseInt(!Type.isUndefined(response.CREATED_GROUP_ID) ? response.CREATED_GROUP_ID : 0),\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (Type.isArray(response.USERS_ID))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tconst selectedUsers = [];\n\t\t\t\t\t\t\t\tlet j = 0;\n\n\t\t\t\t\t\t\t\tresponse.USERS_ID.forEach((currentValue) => {\n\t\t\t\t\t\t\t\t\tselectedUsers[`U${currentValue}`] = 'users';\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\tthis.arUserSelector.forEach((selectorId) => {\n\t\t\t\t\t\t\t\t\tconst selectorInstance = BX.UI.SelectorManager.instances[selectorId];\n\t\t\t\t\t\t\t\t\tif (Type.isUndefined(selectorInstance))\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tconst selectorNode = document.getElementById(`ui-tile-selector-${selectorId}`);\n\t\t\t\t\t\t\t\t\tselectorNode.querySelectorAll('.ui-tile-selector-item').forEach((node) => {\n\n\t\t\t\t\t\t\t\t\t\tconst userCode = node.getAttribute('data-bx-id');\n\t\t\t\t\t\t\t\t\t\tif (!Type.isStringFilled(userCode))\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tselectorInstance.getRenderInstance().deleteItem({\n\t\t\t\t\t\t\t\t\t\t\tentityType: 'USERS',\n\t\t\t\t\t\t\t\t\t\t\titemId: userCode,\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t});\n\n\n\t\t\t\t\t\t\t\t\tselectorInstance.itemsSelected = selectedUsers;\n\t\t\t\t\t\t\t\t\tselectorInstance.reinit();\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\tType.isArray(response.SUCCESSFULL_USERS_ID)\n\t\t\t\t\t\t\t\t&& response.SUCCESSFULL_USERS_ID.length > 0\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\twindow.top.BX.SidePanel.Instance.postMessageAll(window, 'sonetGroupEvent', {\n\t\t\t\t\t\t\t\t\tcode: 'afterInvite',\n\t\t\t\t\t\t\t\t\tdata: {},\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tButtons.showWaitSubmitButton(false);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (response.MESSAGE === 'SUCCESS')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconst currentSlider = BX.SidePanel.Instance.getSliderByWindow(window);\n\t\t\t\t\t\t\tif (currentSlider)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tconst event = new BaseEvent({\n\t\t\t\t\t\t\t\t\tcompatData: [ currentSlider.getEvent('onClose') ],\n\t\t\t\t\t\t\t\t\tdata: currentSlider.getEvent('onClose'),\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\tEventEmitter.emit(window.top, 'SidePanel.Slider:onClose', event);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (window === top.window) // not frame\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif (Type.isStringFilled(response.URL))\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttop.location.href = response.URL;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (Type.isStringFilled(response.ACTION))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlet eventData = null;\n\n\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t[ 'create', 'edit' ].includes(response.ACTION)\n\t\t\t\t\t\t\t\t\t&& !Type.isUndefined(response.GROUP)\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\teventData = {\n\t\t\t\t\t\t\t\t\t\tcode: (response.ACTION == 'create' ? 'afterCreate' : 'afterEdit'),\n\t\t\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\t\t\tgroup: response.GROUP,\n\t\t\t\t\t\t\t\t\t\t\tprojectOptions: this.projectOptions,\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse if (response.ACTION === 'invite')\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\teventData = {\n\t\t\t\t\t\t\t\t\t\tcode: 'afterInvite',\n\t\t\t\t\t\t\t\t\t\tdata: {},\n\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif (eventData)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\twindow.top.BX.SidePanel.Instance.postMessageAll(window, 'sonetGroupEvent', eventData);\n\t\t\t\t\t\t\t\t\tif (response.ACTION === 'create')\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tconst createdGroupsData = JSON.parse(response.SELECTOR_GROUPS);\n\t\t\t\t\t\t\t\t\t\tif (Type.isArray(createdGroupsData))\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\twindow.top.BX.SidePanel.Instance.postMessageAll(window, 'BX.Socialnetwork.Workgroup:onAdd', { projects: createdGroupsData });\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tif (currentSlider)\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tBX.SidePanel.Instance.close(false, () => {\n\t\t\t\t\t\t\t\t\t\t\tBX.SidePanel.Instance.destroy(currentSlider.getUrl());\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\tresponse.ACTION == 'create'\n\t\t\t\t\t\t\t\t\t\t&& Type.isStringFilled(response.URL)\n\t\t\t\t\t\t\t\t\t\t&& (\n\t\t\t\t\t\t\t\t\t\t\t!Type.isStringFilled(this.config.refresh)\n\t\t\t\t\t\t\t\t\t\t\t|| this.config.refresh === 'Y'\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tlet bindingFound = false;\n\n\t\t\t\t\t\t\t\t\t\tBX.SidePanel.Instance.anchorRules.find((rule) => {\n\t\t\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\t\t\tbindingFound\n\t\t\t\t\t\t\t\t\t\t\t\t|| !Type.isArray(rule.condition)\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\trule.condition.forEach((condition) => {\n\t\t\t\t\t\t\t\t\t\t\t\tif (bindingFound)\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (response.URL.match(condition))\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\tbindingFound = true;\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t});\n\n\n\t\t\t\t\t\t\t\t\t\tif (bindingFound)\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tBX.SidePanel.Instance.open(\n\t\t\t\t\t\t\t\t\t\t\t\tresponse.URL\n\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\ttop.window.location.href = response.URL;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tonfailure: (errorData) => {\n\t\t\t\t\t\tButtons.showWaitSubmitButton(false);\n\t\t\t\t\t\tthis.alertManager.showAlert(Loc.getMessage('SONET_GCE_T_AJAX_ERROR'));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\te.preventDefault();\n\t}\n\n\tsaveScrumAnalyticData()\n\t{\n\t\tconst actionUrl = document.getElementById('sonet_group_create_popup_form').action;\n\n\t\tconst source = new Uri(actionUrl).getQueryParam('source');\n\t\tconst availableSources = new Set([\n\t\t\t'guide_adv',\n\t\t\t'guide_direct',\n\t\t\t'guide_portal'\n\t\t]);\n\t\tif (availableSources.has(source))\n\t\t{\n\t\t\tajax.runAction(\n\t\t\t\t'bitrix:tasks.scrum.info.saveScrumStart',\n\t\t\t\t{\n\t\t\t\t\tdata: {},\n\t\t\t\t\tanalyticsLabel: {\n\t\t\t\t\t\tscrum: 'Y',\n\t\t\t\t\t\taction: 'scrum_start',\n\t\t\t\t\t\tsource: source\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t}\n\n\tshowHideBlock(params)\n\t{\n\t\tif (!Type.isPlainObject(params))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tconst containerNode = params.container;\n\t\tconst blockNode = params.block;\n\t\tconst show = !!params.show;\n\n\t\tif (\n\t\t\t!Type.isDomNode(containerNode)\n\t\t\t|| !Type.isDomNode(blockNode)\n\t\t)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tif (\n\t\t\t!Type.isUndefined(this.animationList[blockNode.id])\n\t\t\t&& !Type.isNull(this.animationList[blockNode.id])\n\t\t)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.animationList[blockNode.id] = null;\n\n\t\tconst maxHeight = parseInt(blockNode.offsetHeight);\n\t\tconst duration = (!Type.isUndefined(params.duration) && parseInt(params.duration) > 0 ? parseInt(params.duration) : 0);\n\n\t\tif (show)\n\t\t{\n\t\t\tcontainerNode.style.display = 'block';\n\t\t}\n\n\t\tif (duration > 0)\n\t\t{\n\t\t\tif (Type.isStringFilled(blockNode.id))\n\t\t\t{\n\t\t\t\tthis.animationList[blockNode.id] = true;\n\t\t\t}\n\n\t\t\tBX.delegate((new BX.easing({\n\t\t\t\tduration: duration,\n\t\t\t\tstart: {\n\t\t\t\t\theight: (show ? 0 : maxHeight),\n\t\t\t\t\topacity: (show ? 0 : 100),\n\t\t\t\t},\n\t\t\t\tfinish: {\n\t\t\t\t\theight: (show ? maxHeight : 0),\n\t\t\t\t\topacity: (show ? 100 : 0),\n\t\t\t\t},\n\t\t\t\ttransition: BX.easing.makeEaseOut(BX.easing.transitions.quart),\n\t\t\t\tstep: (state) => {\n\t\t\t\t\tcontainerNode.style.maxHeight = `${state.height}px`;\n\t\t\t\t\tcontainerNode.style.opacity = state.opacity / 100;\n\t\t\t\t},\n\t\t\t\tcomplete: () => {\n\t\t\t\t\tif (Type.isStringFilled(blockNode.id))\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.animationList[blockNode.id] = null;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (\n\t\t\t\t\t\t!Type.isUndefined(params.callback)\n\t\t\t\t\t\t&& Type.isFunction(params.callback.complete)\n\t\t\t\t\t)\n\t\t\t\t\t{\n\t\t\t\t\t\tcontainerNode.style.maxHeight = '';\n\t\t\t\t\t\tcontainerNode.style.opacity = '';\n\t\t\t\t\t\tparams.callback.complete();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t})).animate(), this);\n\n\t\t}\n\t\telse\n\t\t{\n\t\t\tparams.callback.complete();\n\t\t}\n\n\t\treturn true;\n\t}\n}\n\nexport {\n\tWorkgroupForm,\n\tTeamManager as WorkgroupFormTeamManager,\n\tUFManager as WorkgroupFormUFManager,\n}\n"],"names":["Util","expandSwitchers","document","querySelectorAll","forEach","switcher","addEventListener","e","targetId","currentTarget","getAttribute","target","getElementById","switcherWrapper","firstElementChild","offsetHeight","style","height","classList","add","scrollToTarget","elementRealTop","getBoundingClientRect","top","time","currentTime","scrollBySvs","window","scrollBy","setTimeout","removeEventListener","adjustHeight","removeProperty","remove","dropdownAreaList","dropdownArea","dropdownItemsData","getDropdownItems","items","Object","entries","key","value","push","text","onclick","dropdownMenu","close","setDropdownValue","querySelector","setInputValue","neighbourDropdownArea","contains","parentNode","Type","isDomNode","BX","PopupMenuWindow","autoHide","cacheable","bindElement","width","offsetWidth","closeByEsc","animation","params","show","node","containerNode","itemValue","innerText","itemKey","JSON","parse","isPlainObject","isChecked","projectCheckboxNode","setCheckedValue","recalcNameInput","inputNode","placeholderText","Loc","getMessage","formInstance","WorkgroupForm","getInstance","projectTypes","selectedProjectType","isStringFilled","SCRUM_PROJECT","PROJECT","placeholder","type","checked","result","container","selectorClass","selector","cssClass","selectorActive","selectorDisabled","selectedItems","multiple","isBoolean","inputContainerNodeId","inputNodeName","isArray","inputContainerNode","Dom","item","prefix","entityId","appendChild","Tag","render","id","ConfidentialitySelector","firstItemSelected","getItems","unselectAllSelectorItems","getContainer","selectSelectorItem","recalcForm","selectedConfidentialityType","confidentialityType","selectItem","bindEvents","subscribe","onSwitchExtranet","event","data","getData","unselectAll","select","disableAll","enable","enableAll","accessCode","disableAllSelectorItems","enableAllSelectorItems","enableSelectorItem","Scrum","isScrumProject","createHiddenInputs","showScrumBlocks","landingCheckbox","disabled","toggleFeatures","removeHiddenInputs","hideScrumBlocks","scrumBlock","moderatorsBlock","moderatorsSwitch","ownerBlock","forms","create","attrs","name","input","isScrum","featuresNode","featuresCheckboxNode","insertBefore","hiddenInput","Avatar","confirmPopup","componentName","isUndefined","signedParameters","groupId","parseInt","selectorNode","imageNode","typeInputNode","removeNode","recalc","avatarEditor","AvatarEditor","enableCamera","backgroundImage","showConfirmPopup","deletePhoto","bind","clearType","setType","EventEmitter","getCompatData","file","formData","FormData","append","changePhoto","getFileId","hidden","selected","loader","showLoader","size","ajax","runComponentAction","mode","then","response","fileId","fileUri","hideLoader","showErrorPopup","message","errors","typeItemNode","avatarType","isNull","Loader","hasOwnProperty","hide","clean","error","Popup","offsetLeft","offsetTop","draggable","bindOnResize","closeIcon","content","events","confirmCallback","onPopupClose","destroy","buttons","Button","click","button","setWaiting","ThemePicker","theme","draw","previewImageNode","getNode","open","titleNode","deleteNode","previewImage","backgroundColor","previewColor","innerHTML","title","Intranet","Bitrix24","Singleton","showDialog","preventDefault","Tags","containerNodeId","hiddenFieldNode","hiddenFieldId","tagSelector","EntityTagSelector","addButtonCaption","addButtonCaptionMore","dialogOptions","compactView","preload","context","searchTabOptions","stubOptions","subtitle","arrow","entities","options","searchOptions","allowCreateItem","footerOptions","label","recalcinputValue","getTarget","getSelectedItems","Promise","resolve","searchQuery","getQuery","toLowerCase","dialog","tagsList","split","tag","addItem","tabs","renderTo","join","TypePresetSelector","selectors","projectType","wizardManager","setProjectType","FieldsManager","stepsCount","checkAll","checkStep","currentStep","step","errorDataList","mandatoryFieldsByStep","fieldData","fieldNode","tagName","errorText","checkField","bindNode","bindNodeId","stepData","concat","isFunction","condition","fieldType","trim","empty","hiddenNode","errorData","alertManager","showAlert","scrumManager","Buttons","submitButton","submitButtonClickHandler","backButton","ButtonManager","createFromNode","isDisabled","confidentialityTypes","showCurrentStep","cancelButton","currentSlider","SidePanel","Instance","getSliderByWindow","BaseEvent","compatData","getEvent","emit","url","location","hideAllAlerts","check","filter","length","showError","submitFunction","submitForm","disable","buttonNode","setDisabled","Wizard","processedStep","step1BackgroudNode","step1Backgroud","bodyContainer","breadcrumbsContainer","bodyItem","activeBodyItem","breadcrumbsItem","activeBreadcrumbsItem","getFirstStepNumber","hideButton","buttonsInstance","showButton","createdGroupId","tabInputNode","tabGroupIdNode","AlertManager","errorContainerId","globalErrorContainer","nodeAlerts","Map","targetNode","textAlert","Alert","color","Color","DANGER","animate","set","nextSibling","setText","scrollTo","getPosition","behavior","clear","TeamManager","instance","ownerSelector","scrumMasterSelector","moderatorsSelector","usersSelector","ownerOptions","scrumMasterOptions","moderatorsOptions","usersOptions","ownerContainerNode","scrumMasterContainerNode","moderatorsContainerNode","usersContainerNode","isCurrentUserAdmin","extranetInstalled","allowExtranet","buildOwnerSelector","buildScrumMasterSelector","buildModeratorsSelector","buildUsersSelector","selectorOptions","TagSelector","selectorId","contextList","owner","preselectedItems","onLoad","onOwnerSelect","intranetUsersOnly","inviteEmployeeLink","inviteExtranetLink","checkWorkgroupWhenInvite","selectMode","scrumMaster","onScrumMasterSelect","moderators","onModeratorsSelect","users","onUsersSelect","enableSelectDepartment","includes","getDialog","loadState","recalcSelectorByExtranetSwitched","getContext","getEntityId","getEntityType","recalcInputValue","map","getId","hintNode","showDepartmentHint","departmentFound","find","FeaturesManager","editButton","featureNode","closest","textNode","UFManager","mandatoryUFList","ufData","setEventNamespace","userSelector","lastAction","arUserSelector","animationList","selectedTypeCode","config","avatarUploaderId","themePickerData","projectOptions","init","makeAdditionalCustomizationForm","groupNameNode","focus","initExpandSwitches","initDropdowns","expandableSettingsNodeId","UI","Hint","saveScrumAnalyticData","getTopSlider","getWindow","sliderInstance","getUrl","extranetCheckboxNode","switchExtranet","visibleCheckboxNode","switchNotVisible","recalcFormPartProject","recalcFormDependencies","openedCheckboxNode","OPENED","VISIBLE","getCheckedValue","openedBlock","visibleBlock","openedNode","actionUrl","action","groupIdNode","b24statAction","Uri","addParam","groupType","formElements","elements","GROUP_PROJECT","IS_EXTRANET_GROUP","GROUP_OPENED","b24statType","analyticsLabel","scrum","showWaitSubmitButton","submitAjax","method","dataType","PROJECT_OPTIONS","onsuccess","ERROR","warningText","WARNING","WIZARD_STEP_PROCESSED","recalcAfterSubmit","CREATED_GROUP_ID","USERS_ID","selectedUsers","currentValue","selectorInstance","SelectorManager","instances","userCode","getRenderInstance","deleteItem","entityType","itemId","itemsSelected","reinit","SUCCESSFULL_USERS_ID","postMessageAll","code","MESSAGE","URL","href","ACTION","eventData","GROUP","group","createdGroupsData","SELECTOR_GROUPS","projects","refresh","bindingFound","anchorRules","rule","match","onfailure","source","getQueryParam","availableSources","Set","has","runAction","blockNode","block","maxHeight","duration","display","delegate","easing","start","opacity","finish","transition","makeEaseOut","transitions","quart","state","complete","callback"],"mappings":"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"}