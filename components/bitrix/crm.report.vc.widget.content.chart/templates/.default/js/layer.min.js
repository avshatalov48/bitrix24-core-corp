(function(){"use strict";var t=BX.namespace("BX.Crm.Analytics.Report.ViewChart");var o=[];function e(t){this.init(t);o.push(this)}e.getList=function(){return o};e.clear=function(){o=[]};e.create=function(e){var i=o.filter(function(t){return t.source.data.code===e.source.data.code});if(i.length===0){return new t.Layer(e)}return i[0]};e.showTopTooltips=function(){var t=o[o.length-1];if(t){t.items.forEach(t.showTooltip.bind(t,true))}};e.prototype.init=function(t){this.source=t.source;this.items=[];this.polygons=[]};e.prototype.appendItem=function(t){this.items.push(t);t.setLayer(this)};e.prototype.getPreviousItem=function(t){for(var o=1;o<this.items.length;o++){if(this.items[o]===t){return this.items[o-1]}}return null};e.prototype.getNextItem=function(t){for(var o=0;o<this.items.length-1;o++){if(this.items[o]===t){return this.items[o+1]}}return null};e.prototype.appendPolygon=function(t){this.polygons.push(t)};e.prototype.draw=function(){this.polygons.forEach(function(t){t.draw()},this)};e.prototype.showTooltips=function(){if(o.length<=1){return}this.items.forEach(this.showTooltip.bind(this,false))};e.prototype.showTooltip=function(t,o){var e=this.getNextItem(o);if(!e){return}var i=BX.pos(o.node.parentNode);var n=o.pos.top-i.top;var s=o.pos.left-i.left;var r=0;if(t){n=(e.pos.top-i.top+n)/2-20;s=(e.pos.left-i.left+s+o.pos.width)/2;r=(o.stage.data.quantity?e.stage.data.quantity/o.stage.data.quantity:0)*100;r=r<10?Math.round(r*10)/10:parseInt(r)}else{n=n+o.pos.height/2-10;s=s+o.pos.width-10;r=(o.data.quantity?e.data.quantity/o.data.quantity:0)*100;r=r<10?Math.round(r*10)/10:parseInt(r)}o.stage.tooltip.show(n,s,r)};e.prototype.hideTooltips=function(){this.items.forEach(function(t){t.stage.tooltip.hide()},this)};t.Layer=e})();
//# sourceMappingURL=layer.map.js