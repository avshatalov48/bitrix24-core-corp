{"version":3,"file":"script.js","sources":["src/analytic.js","src/pages/tools-page.js","src/pages/employee-page.js","src/requisite/button-bar.js","src/requisite/landing-button.js","src/requisite/landing-card.js","src/requisite/landing-button-factory.js","src/requisite/card.js","src/pages/requisite-page.js","src/pages/communication-page.js","src/fields/site-title-field.js","src/fields/site-domain-field.js","src/fields/site-utils.js","src/fields/site-theme-picker-field.js","src/fields/site-logo-field.js","src/fields/site-title-preview-widget.js","src/pages/portal-page.js","src/pages/configuration-page.js","src/pages/schedule-page.js","src/pages/gdpr-page.js","src/pages/security-page.js","src/pages/external-temporary-page.js","src/page-manager.js","src/searcher.js","src/settings.js"],"sourcesContent":["import { ajax, Http } from 'main.core';\nimport { sendData } from 'ui.analytics';\nimport type { AnalyticsOptions } from 'ui.analytics';\n\nexport type AnalyticContext = {\n\tisAdmin: ?boolean,\n\tlocationName: ?string,\n\tisBitrix24: boolean,\n\tanalyticContext: ?string,\n}\n\nexport class Analytic\n{\n\t#eventList: Array = [];\n\t#tool: string = 'settings';\n\t#context: ?AnalyticContext = null;\n\n\tconstructor(context: ?AnalyticContext = null)\n\t{\n\t\tthis.#context = context;\n\t}\n\n\taddEvent(eventType: string, eventData: AnalyticsOptions): void\n\t{\n\t\tif (this.#context.isBitrix24)\n\t\t{\n\t\t\tthis.#eventList[eventType] = eventData;\n\t\t}\n\t}\n\n\tsend(): void\n\t{\n\t\tif (!this.#context.isBitrix24)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (Object.keys(this.#eventList).length > 0)\n\t\t{\n\t\t\tajax.runComponentAction(\n\t\t\t\t'bitrix:intranet.settings',\n\t\t\t\t'analytic',\n\t\t\t\t{\n\t\t\t\t\tmode: 'class',\n\t\t\t\t\tdata: {data: this.#eventList},\n\t\t\t\t},\n\t\t\t).then(()=>{});\n\t\t}\n\n\t\tthis.#eventList = [];\n\t}\n\n\taddEventOpenSettings(): void\n\t{\n\t\tconst options = {\n\t\t\tevent: AnalyticSettingsEvent.OPEN,\n\t\t\ttool: this.#tool,\n\t\t\tcategory: 'slider',\n\t\t\tp1: this.#context?.isAdmin !== false ? AnalyticSettingsUserRole.ADMIN : AnalyticSettingsUserRole.NOT_ADMIN,\n\t\t\tc_section: this.#context?.analyticContext ?? '',\n\t\t\tc_element: this.#context?.locationName,\n\t\t};\n\n\t\tsendData(options);\n\t\t//this.addEvent(AnalyticSettingsEvent.OPEN, options);\n\t}\n\n\taddEventOpenTariffSelector(fieldName: string): void\n\t{\n\t\tconst options = {\n\t\t\tevent: 'open_tariff',\n\t\t\ttool: this.#tool,\n\t\t\tcategory: fieldName,\n\t\t\tp1: this.#context?.isAdmin !== false ? AnalyticSettingsUserRole.ADMIN : AnalyticSettingsUserRole.NOT_ADMIN,\n\t\t};\n\n\t\tthis.addEvent(fieldName + '_open_tariff', options);\n\t}\n\n\taddEventOpenHint(fieldName: string): void\n\t{\n\t\tconst options = {\n\t\t\tevent: 'open_hint',\n\t\t\ttool: this.#tool,\n\t\t\tcategory: fieldName,\n\t\t\tp1: this.#context?.isAdmin !== false ? AnalyticSettingsUserRole.ADMIN : AnalyticSettingsUserRole.NOT_ADMIN,\n\t\t};\n\n\t\tthis.addEvent(fieldName + '_open_hint', options);\n\t}\n\n\taddEventStartPagePage(page: string): void\n\t{\n\t\tconst options = {\n\t\t\tevent: AnalyticSettingsEvent.START_PAGE,\n\t\t\ttool: this.#tool,\n\t\t\tcategory: page,\n\t\t\tp1: this.#context?.isAdmin !== false ? AnalyticSettingsUserRole.ADMIN : AnalyticSettingsUserRole.NOT_ADMIN,\n\t\t};\n\n\t\tsendData(options);\n\t}\n\n\taddEventChangePage(page: string): void\n\t{\n\t\tconst options = {\n\t\t\tevent: AnalyticSettingsEvent.VIEW,\n\t\t\ttool: this.#tool,\n\t\t\tcategory: page,\n\t\t\tp1: this.#context?.isAdmin !== false ? AnalyticSettingsUserRole.ADMIN : AnalyticSettingsUserRole.NOT_ADMIN,\n\t\t};\n\n\t\tsendData(options);\n\t}\n\n\taddEventToggleTools(toolName: string, state: boolean): void\n\t{\n\t\tconst event = 'onoff_tools';\n\n\t\tconst options = {\n\t\t\tevent: event,\n\t\t\ttool: this.#tool,\n\t\t\tcategory: 'tools',\n\t\t\ttype: toolName,\n\t\t\tc_element: this.#context?.locationName,\n\t\t\tp1: this.#context?.isAdmin !== false ? AnalyticSettingsUserRole.ADMIN : AnalyticSettingsUserRole.NOT_ADMIN,\n\t\t\tp2: state ? AnalyticSettingsTurnState.ON : AnalyticSettingsTurnState.OFF,\n\t\t};\n\n\t\tthis.addEvent('tools' + toolName + '_' + event, options);\n\t}\n\n\taddEventToggle2fa(state: boolean): void\n\t{\n\t\tconst event = '2fa_onoff';\n\n\t\tconst options = {\n\t\t\tevent: event,\n\t\t\ttool: this.#tool,\n\t\t\tcategory: 'security',\n\t\t\tp1: this.#context?.isAdmin !== false ? AnalyticSettingsUserRole.ADMIN : AnalyticSettingsUserRole.NOT_ADMIN,\n\t\t\tp2: state ? AnalyticSettingsTurnState.ON : AnalyticSettingsTurnState.OFF,\n\t\t};\n\n\t\tthis.addEvent('security_' + event, options);\n\t}\n\n\taddEventConfigPortal(event: string): void\n\t{\n\t\tconst options = {\n\t\t\tevent: event,\n\t\t\ttool: this.#tool,\n\t\t\tcategory: 'portal'\n\t\t};\n\n\t\tthis.addEvent('portal_' + event, options);\n\t}\n\n\taddEventConfigEmployee(event: string, state: boolean): void\n\t{\n\t\tconst options = {\n\t\t\tevent: event,\n\t\t\ttool: this.#tool,\n\t\t\tcategory: 'employee',\n\t\t\tp1: this.#context?.isAdmin !== false ? AnalyticSettingsUserRole.ADMIN : AnalyticSettingsUserRole.NOT_ADMIN,\n\t\t\tp2: state ? AnalyticSettingsTurnState.ON : AnalyticSettingsTurnState.OFF,\n\t\t};\n\n\t\tthis.addEvent('employee_' + event, options);\n\t}\n\n\taddEventConfigConfiguration(event: string, state: boolean): void\n\t{\n\t\tconst options = {\n\t\t\tevent: event,\n\t\t\ttool: this.#tool,\n\t\t\tcategory: 'configuration',\n\t\t\tp1: this.#context?.isAdmin !== false ? AnalyticSettingsUserRole.ADMIN : AnalyticSettingsUserRole.NOT_ADMIN,\n\t\t\tp2: state ? AnalyticSettingsTurnState.ON : AnalyticSettingsTurnState.OFF,\n\t\t};\n\n\t\tthis.addEvent('configuration_' + event, options);\n\t}\n\n\taddEventConfigRequisite(event: string): void\n\t{\n\t\tconst options = {\n\t\t\tevent: event,\n\t\t\ttool: this.#tool,\n\t\t\tcategory: 'requisite',\n\t\t\tc_element: this.#context?.locationName,\n\t\t\tp1: this.#context?.isAdmin !== false ? AnalyticSettingsUserRole.ADMIN : AnalyticSettingsUserRole.NOT_ADMIN,\n\t\t};\n\n\t\tsendData(options);\n\t}\n}\n\nexport class AnalyticSettingsCategory\n{\n\tstatic TOOLS = 'tools';\n\tstatic SECURITY = 'security';\n\tstatic AI = 'ai';\n\tstatic PORTAL = 'portal';\n\tstatic EMPLOYEE = 'employee';\n\tstatic COMMUNICATION = 'communication';\n\tstatic REQUISITE = 'requisite';\n\tstatic SCHEDULE = 'schedule';\n\tstatic CONFIGURATION = 'configuration';\n}\n\nexport class AnalyticSettingsEvent\n{\n\tstatic OPEN = 'open_setting';\n\tstatic START_PAGE = 'start_page';\n\tstatic VIEW = 'view';\n\tstatic TFA = '2fa_onoff';\n\tstatic CHANGE_PORTAL_NAME = 'change_portal_name';\n\tstatic CHANGE_PORTAL_LOGO = 'change_portal_logo';\n\tstatic CHANGE_PORTAL_SITE = 'change_portal_site';\n\tstatic CHANGE_PORTAL_THEME = 'change_portal_theme';\n\tstatic CHANGE_MARKET = 'change_market';\n\tstatic CHANGE_PAY_TARIFF = 'change_pay_tariff';\n\tstatic CREATE_CARD = 'create_vizitka';\n\tstatic EDIT_CARD = 'edit_vizitka';\n\tstatic COPY_LINK_CARD = 'copylink_vizitka';\n\tstatic OPEN_ADD_COMPANY = 'open_add_company';\n\tstatic CHANGE_QUICK_REG = 'change_quick_reg';\n\tstatic CHANGE_REG_ALL = 'change_reg_all';\n\tstatic CHANGE_EXTRANET_INVITE = 'change_extranet_invite';\n}\n\nexport class AnalyticSettingsUserRole\n{\n\tstatic ADMIN = 'isAdmin_Y';\n\tstatic NOT_ADMIN = 'isAdmin_N';\n}\n\nexport class AnalyticSettingsTurnState\n{\n\tstatic ON = 'turn_on';\n\tstatic OFF = 'turn_off';\n}","import { EventEmitter } from 'main.core.events';\nimport { Draggable } from 'ui.draganddrop.draggable';\nimport { Section, Row } from 'ui.section';\nimport { SwitcherNestedItem, SwitcherNested } from 'ui.switcher-nested';\nimport { Loc, Type, Event as EventBX, Dom, Tag } from 'main.core';\nimport { SettingsSection, SettingsRow, BaseSettingsPage } from 'ui.form-elements.field';\n\nexport class ToolsPage extends BaseSettingsPage\n{\n\t#inputForSaveSortTools: HTMLElement;\n\t#toolsWrapperRow: Row;\n\t#draggable: Draggable;\n\t#mainSection: Section;\n\t#settingsSection: SettingsSection;\n\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis.titlePage = Loc.getMessage('INTRANET_SETTINGS_TITLE_PAGE_TOOLS');\n\t\tthis.descriptionPage = Loc.getMessage('INTRANET_SETTINGS_DESCRIPTION_PAGE_TOOLS');\n\t}\n\n\tgetType(): string\n\t{\n\t\treturn 'tools';\n\t}\n\n\tappendSections(contentNode: HTMLElement): void\n\t{\n\t\tconst description = new Row({\n\t\t\tcontent: this.getDescription().getContainer(),\n\t\t});\n\t\tnew SettingsRow({\n\t\t\trow: description,\n\t\t\tparent: this.#getSettingsSection(),\n\t\t});\n\n\t\tif (this.hasValue('tools'))\n\t\t{\n\t\t\tthis.#renderToolsSelectors();\n\t\t}\n\n\t\tthis.#getSettingsSection().renderTo(contentNode);\n\t}\n\n\t#renderToolsSelectors(): void\n\t{\n\t\tconst tools = this.getValue('tools');\n\t\tconst startSort = [];\n\t\tconst toolSelectors = [];\n\n\t\tObject.keys(tools).forEach((item) => {\n\t\t\tstartSort.push(tools[item].menuId)\n\t\t\tconst tool = tools[item];\n\t\t\tconst subgroups = tool.subgroups;\n\t\t\tlet toolSelectorItems = [];\n\n\t\t\tif (Object.keys(subgroups).length > 0)\n\t\t\t{\n\t\t\t\ttoolSelectorItems = this.#getToolsSelectorsItems(subgroups, tool);\n\t\t\t}\n\n\t\t\tconst toolSelector = new SwitcherNested({\n\t\t\t\tid: tool.code,\n\t\t\t\ttitle: tool.name,\n\t\t\t\tlink: tool['settings-path'],\n\t\t\t\tinfoHelperCode: tool['infohelper-slider'],\n\t\t\t\tlinkTitle: tool['settings-title'] ?? Loc.getMessage('INTRANET_SETTINGS_SECTION_TOOLS_LINK_SETTINGS'),\n\t\t\t\tisChecked: tool.enabled,\n\t\t\t\tmainInputName: tool.code,\n\t\t\t\tisOpen: false,\n\t\t\t\titems: toolSelectorItems,\n\t\t\t\tisDefault: tool.default,\n\t\t\t\thelpMessage: Loc.getMessage('INTRANET_SETTINGS_FIELD_HELP_MESSAGE_DISABLED', {'#TOOL#': tool.name}),\n\t\t\t});\n\t\t\ttoolSelectors.push(toolSelector);\n\n\t\t\tconst toolSelectorSection = new SettingsSection({\n\t\t\t\tsection: toolSelector,\n\t\t\t});\n\n\t\t\tDom.style(toolSelectorSection.getSectionView().render(), 'margin-bottom', '8px');\n\t\t\tDom.attr(toolSelectorSection.getSectionView().render(), 'data-menu-id', tool.menuId);\n\t\t\tthis.#getToolsWrapperRow().append(toolSelectorSection.getSectionView().render());\n\t\t\tnew SettingsRow({\n\t\t\t\trow: this.#getToolsWrapperRow(),\n\t\t\t\tparent: this.#getSettingsSection(),\n\t\t\t\tchild: toolSelectorSection\n\t\t\t});\n\t\t});\n\t}\n\n\t#getToolsSelectorsItems(subgroups: Object, tool: Object): Array<SwitcherNestedItem>\n\t{\n\t\tconst toolSelectorItems = [];\n\n\t\tObject.keys(subgroups).forEach((item) => {\n\t\t\tconst subgroupConfig = subgroups[item];\n\n\t\t\tif (\n\t\t\t\tType.isNull(subgroupConfig.name)\n\t\t\t\t|| Type.isNull(subgroupConfig.code)\n\t\t\t\t|| Type.isNull(subgroupConfig.enabled)\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst toolSelectorItem = new SwitcherNestedItem({\n\t\t\t\ttitle: subgroupConfig.name,\n\t\t\t\tid: subgroupConfig.code,\n\t\t\t\tinputName: subgroupConfig.code,\n\t\t\t\tisChecked: subgroupConfig.enabled,\n\t\t\t\tsettingsPath: subgroupConfig['settings_path'],\n\t\t\t\tsettingsTitle: subgroupConfig['settings_title'] ?? Loc.getMessage('INTRANET_SETTINGS_SECTION_TOOLS_LINK_SETTINGS'),\n\t\t\t\tinfoHelperCode: subgroupConfig['infohelper-slider'],\n\t\t\t\tisDefault: subgroupConfig.default ?? subgroupConfig.disabled ?? false,\n\t\t\t\thelpMessage: subgroupConfig.disabled\n\t\t\t\t\t? Loc.getMessage('INTRANET_SETTINGS_FIELD_HELP_MESSAGE_DISABLED', {'#TOOL#': subgroupConfig.name})\n\t\t\t\t\t: subgroupConfig.default\n\t\t\t\t\t\t? Loc.getMessage('INTRANET_SETTINGS_FIELD_HELP_MESSAGE_MAIN_TOOL', {'#TOOL#': tool.name})\n\t\t\t\t\t\t: '',\n\t\t\t});\n\n\t\t\tif (subgroupConfig.disabled)\n\t\t\t{\n\t\t\t\tDom.style(toolSelectorItem.getSwitcher().getNode(), {opacity: '0.4'});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tEventEmitter.subscribe(\n\t\t\t\t\ttoolSelectorItem.getSwitcher(),\n\t\t\t\t\t'toggled',\n\t\t\t\t\t() => {\n\t\t\t\t\t\tthis.getAnalytic()?.addEventToggleTools(\n\t\t\t\t\t\t\tsubgroupConfig.code,\n\t\t\t\t\t\t\ttoolSelectorItem.getSwitcher().isChecked()\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif (subgroupConfig.code === 'tool_subgroup_team_work_instant_messenger')\n\t\t\t{\n\t\t\t\tEventBX.bind(\n\t\t\t\t\ttoolSelectorItem.getSwitcher().getNode(),\n\t\t\t\t\t'click',\n\t\t\t\t\t() => {\n\t\t\t\t\t\tif (!toolSelectorItem.getSwitcher().isChecked())\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.#getWarningMessage(subgroupConfig.code, toolSelectorItem.getSwitcher().getNode(), Loc.getMessage('INTRANET_SETTINGS_WARNING_TOOL_INSTANT_MESSENGER')).show();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\n\t\t\ttoolSelectorItems.push(toolSelectorItem);\n\t\t});\n\n\t\treturn toolSelectorItems;\n\t}\n\n\t#getMainSection(): Section\n\t{\n\t\tif (this.#mainSection)\n\t\t{\n\t\t\treturn this.#mainSection;\n\t\t}\n\n\t\tthis.#mainSection = new Section({\n\t\t\ttitle: Loc.getMessage('INTRANET_SETTINGS_SECTION_TITLE_TOOLS_SHOW'),\n\t\t\ttitleIconClasses: 'ui-icon-set --service',\n\t\t\tisOpen: true,\n\t\t\tcanCollapse: false,\n\t\t});\n\n\t\treturn this.#mainSection;\n\t}\n\n\t#getSettingsSection(): SettingsSection\n\t{\n\t\tif (this.#settingsSection)\n\t\t{\n\t\t\treturn this.#settingsSection;\n\t\t}\n\n\t\tthis.#settingsSection = new SettingsSection({\n\t\t\tsection: this.#getMainSection(),\n\t\t\tparent: this,\n\t\t});\n\n\t\treturn this.#settingsSection;\n\t}\n\n\tgetDescription(): BX.UI.Alert\n\t{\n\t\tconst descriptionText = `\n\t\t\t${Loc.getMessage('INTRANET_SETTINGS_SECTION_TOOLS_DESCRIPTION')}\n\t\t\t<a class=\"ui-section__link\" onclick=\"top.BX.Helper.show('redirect=detail&code=18213196')\">\n\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_CANCEL_MORE')}\n\t\t\t</a>\n\t\t`;\n\n\t\treturn new BX.UI.Alert({\n\t\t\ttext: descriptionText,\n\t\t\tinline: true,\n\t\t\tsize: BX.UI.Alert.Size.SMALL,\n\t\t\tcolor: BX.UI.Alert.Color.PRIMARY,\n\t\t\tanimated: true,\n\t\t});\n\t}\n\n\t#getInputForSaveSortTools(): HTMLElement\n\t{\n\t\tif (this.#inputForSaveSortTools)\n\t\t{\n\t\t\treturn this.#inputForSaveSortTools;\n\t\t}\n\n\t\tthis.#inputForSaveSortTools = Tag.render`\n\t\t\t<input type=\"hidden\" name=\"tools-sort\">\n\t\t`;\n\n\t\treturn this.#inputForSaveSortTools;\n\t}\n\n\t#getDraggable(): Draggable\n\t{\n\t\tif (this.#draggable)\n\t\t{\n\t\t\treturn this.#draggable;\n\t\t}\n\n\t\tthis.#draggable = new Draggable({\n\t\t\tcontainer: [this.#getToolsWrapperRow().render()],\n\t\t\tdraggable: '.--tool-selector',\n\t\t\tdragElement: '.ui-section__dragdrop-icon',\n\t\t\ttype: Draggable.CLONE,\n\t\t});\n\n\t\treturn this.#draggable;\n\t}\n\n\t#getToolsWrapperRow(): Row\n\t{\n\t\tif (this.#toolsWrapperRow)\n\t\t{\n\t\t\treturn this.#toolsWrapperRow;\n\t\t}\n\n\t\tthis.#toolsWrapperRow = new Row({});\n\n\t\treturn this.#toolsWrapperRow;\n\t}\n\n\t#getWarningMessage(toolId, bindElement, message)\n\t{\n\t\treturn BX.PopupWindowManager.create(\n\t\t\ttoolId,\n\t\t\tbindElement,\n\t\t\t{\n\t\t\t\tcontent: message,\n\t\t\t\tdarkMode: true,\n\t\t\t\tautoHide: true,\n\t\t\t\tangle: true,\n\t\t\t\toffsetLeft: 14,\n\t\t\t\tbindOptions: {\n\t\t\t\t\tposition: 'bottom',\n\t\t\t\t},\n\t\t\t\tcloseByEsc: true,\n\t\t\t}\n\t\t);\n\t}\n}\n","import { EventEmitter } from 'main.core.events';\nimport { AnalyticSettingsEvent } from '../analytic';\nimport { Checker, Selector, TextInput, InlineChecker } from 'ui.form-elements.view';\nimport { Loc } from 'main.core';\nimport 'ui.icon-set.main';\nimport 'ui.icon-set.actions';\nimport { Section, Row } from 'ui.section';\nimport 'ui.forms';\nimport type { SectionSettings } from \"crm.activity.todo-editor\";\nimport { SettingsSection, SettingsField, SettingsRow, BaseSettingsPage } from 'ui.form-elements.field';\n\nexport class EmployeePage extends BaseSettingsPage\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis.titlePage = Loc.getMessage('INTRANET_SETTINGS_TITLE_PAGE_EMPLOYEE');\n\t\tthis.descriptionPage = Loc.getMessage('INTRANET_SETTINGS_DESCRIPTION_PAGE_EMPLOYEE_BOX');\n\t}\n\n\tonSuccessDataFetched(response): void\n\t{\n\t\tsuper.onSuccessDataFetched(response);\n\n\t\tif (this.hasValue('IS_BITRIX_24') && this.getValue('IS_BITRIX_24'))\n\t\t{\n\t\t\tthis.descriptionPage = Loc.getMessage('INTRANET_SETTINGS_DESCRIPTION_PAGE_EMPLOYEE');\n\t\t\tthis.render().querySelector('.intranet-settings__page-header_desc').innerText = this.descriptionPage;\n\t\t}\n\t}\n\n\tgetType(): string\n\t{\n\t\treturn 'employee';\n\t}\n\n\tappendSections(contentNode: HTMLElement): void\n\t{\n\t\tlet profileSection = this.#buildProfileSection();\n\t\tprofileSection.renderTo(contentNode);\n\n\t\tlet inviteSection = this.#buildInviteSection();\n\t\tinviteSection.renderTo(contentNode);\n\t}\n\n\t#buildProfileSection(): SectionSettings\n\t{\n\t\tlet profileSection = new Section({\n\t\t\ttitle: Loc.getMessage('INTRANET_SETTINGS_SECTION_TITLE_PROFILE'),\n\t\t\ttitleIconClasses: 'ui-icon-set --person',\n\t\t});\n\n\t\tlet sectionSettings = new SettingsSection({\n\t\t\tsection: profileSection,\n\t\t\tparent: this\n\t\t});\n\n\t\tif (this.hasValue('NAME_FORMATS'))\n\t\t{\n\t\t\tlet hasSelectValue = false;\n\t\t\tlet currentValue = this.getValue('NAME_FORMATS').current;\n\t\t\tfor (let value of this.getValue('NAME_FORMATS').values)\n\t\t\t{\n\t\t\t\tif (value.selected === true)\n\t\t\t\t{\n\t\t\t\t\thasSelectValue = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.getValue('NAME_FORMATS').values.push({\n\t\t\t\tvalue: 'other',\n\t\t\t\tname: Loc.getMessage('INTRANET_SETTINGS_FIELD_OPTION_OTHER'),\n\t\t\t\tselected: !hasSelectValue,\n\t\t\t});\n\n\t\t\tlet nameFormatField = new Selector({\n\t\t\t\tlabel: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_NAME_FORMAT'),\n\t\t\t\tname: this.getValue('NAME_FORMATS').name + '_selector',\n\t\t\t\titems: this.getValue('NAME_FORMATS').values,\n\t\t\t\thints: this.getValue('NAME_FORMATS').hints,\n\t\t\t\tcurrent: this.getValue('NAME_FORMATS').current,\n\t\t\t});\n\n\t\t\tlet settingsField = new SettingsField({\n\t\t\t\tfieldView: nameFormatField\n\t\t\t});\n\n\t\t\tnew SettingsRow({\n\t\t\t\tchild: settingsField,\n\t\t\t\tparent: sectionSettings\n\t\t\t});\n\n\t\t\tlet customFormatNameField = new TextInput({\n\t\t\t\tinputName: this.getValue('NAME_FORMATS').name,\n\t\t\t\tlabel: '',\n\t\t\t\tvalue: currentValue,\n\t\t\t});\n\n\t\t\tsettingsField = new SettingsField({\n\t\t\t\tfieldView: customFormatNameField,\n\t\t\t});\n\n\t\t\tlet customFormatNameRow = new Row({\n\t\t\t\tisHidden: true,\n\t\t\t});\n\n\t\t\tnew SettingsRow({\n\t\t\t\trow: customFormatNameRow,\n\t\t\t\tparent: sectionSettings,\n\t\t\t\tchild: settingsField,\n\t\t\t});\n\n\t\t\tif (!hasSelectValue)\n\t\t\t{\n\t\t\t\tcustomFormatNameRow.show();\n\t\t\t}\n\n\t\t\tnameFormatField.getInputNode()\n\t\t\t\t.addEventListener('change', (event) => {\n\t\t\t\t\tif (event.target.value === 'other')\n\t\t\t\t\t{\n\t\t\t\t\t\tcustomFormatNameRow.show();\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tcustomFormatNameField.getInputNode().value = nameFormatField.getInputNode().value;\n\t\t\t\t\t\tcustomFormatNameRow.hide();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t}\n\n\t\tif (this.hasValue('PHONE_NUMBER_DEFAULT_COUNTRY'))\n\t\t{\n\t\t\tlet formatNumberField = new Selector({\n\t\t\t\tlabel: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_COUNTRY_PHONE_NUMBER'),\n\t\t\t\thintTitle: Loc.getMessage('INTRANET_SETTINGS_FIELD_HINT_TITLE_NUMBER_FORMAT'),\n\t\t\t\tname: this.getValue('PHONE_NUMBER_DEFAULT_COUNTRY').name,\n\t\t\t\titems: this.getValue('PHONE_NUMBER_DEFAULT_COUNTRY').values,\n\t\t\t\thints: this.getValue('PHONE_NUMBER_DEFAULT_COUNTRY').hints,\n\t\t\t\tcurrent: this.getValue('PHONE_NUMBER_DEFAULT_COUNTRY').current,\n\t\t\t});\n\n\t\t\tEmployeePage.addToSectionHelper(formatNumberField, sectionSettings);\n\t\t}\n\n\t\tif (this.hasValue('LOCATION_ADDRESS_FORMAT_LIST'))\n\t\t{\n\t\t\tlet addressFormatField = new Selector({\n\t\t\t\tlabel: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_ADDRESS_FORMAT'),\n\t\t\t\thintTitle: Loc.getMessage('INTRANET_SETTINGS_FIELD_HINT_TITLE_ADDRESS_FORMAT'),\n\t\t\t\tname: this.getValue('LOCATION_ADDRESS_FORMAT_LIST').name,\n\t\t\t\titems: this.getValue('LOCATION_ADDRESS_FORMAT_LIST').values,\n\t\t\t\thints: this.getValue('LOCATION_ADDRESS_FORMAT_LIST').hints,\n\t\t\t\tcurrent: this.getValue('LOCATION_ADDRESS_FORMAT_LIST').current,\n\t\t\t});\n\n\t\t\tlet addressFormatRow = new Row({\n\t\t\t\tseparator: this.hasValue('show_year_for_female') ? 'bottom' : null,\n\t\t\t\tclassName: '--block',\n\t\t\t});\n\n\t\t\tEmployeePage.addToSectionHelper(addressFormatField, sectionSettings, addressFormatRow);\n\t\t}\n\n\t\tif (this.hasValue('show_year_for_female'))\n\t\t{\n\t\t\tlet showBirthYearField = new InlineChecker({\n\t\t\t\tinputName: 'show_year_for_female',\n\t\t\t\ttitle: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_SHOW_BIRTH_YEAR'),\n\t\t\t\thintTitle: Loc.getMessage('INTRANET_SETTINGS_FIELD_HINT_TITLE_BIRTH_YEAR'),\n\t\t\t\thintOn: this.getValue('show_year_for_female').hintOn,\n\t\t\t\thintOff: this.getValue('show_year_for_female').hintOff,\n\t\t\t\tchecked: this.getValue('show_year_for_female').current === 'Y',\n\t\t\t});\n\n\t\t\tEmployeePage.addToSectionHelper(showBirthYearField, sectionSettings);\n\t\t}\n\n\t\treturn sectionSettings;\n\t}\n\n\t#buildInviteSection(): SectionSettings\n\t{\n\t\tlet inviteSection = new Section({\n\t\t\ttitle: Loc.getMessage('INTRANET_SETTINGS_SECTION_TITLE_INVITE'),\n\t\t\ttitleIconClasses: 'ui-icon-set --person-plus',\n\t\t\tisOpen: false,\n\t\t});\n\n\t\tlet sectionSettings = new SettingsSection({\n\t\t\tsection: inviteSection,\n\t\t\tparent: this\n\t\t});\n\n\t\tif (this.hasValue('allow_register'))\n\t\t{\n\t\t\tlet fastReqField = new Checker({\n\t\t\t\tinputName: 'allow_register',\n\t\t\t\ttitle: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_FAST_REG'),\n\t\t\t\thintOn: Loc.getMessage('INTRANET_SETTINGS_FIELD_HINT_FAST_REQ_ON'),\n\t\t\t\tchecked: this.getValue('allow_register') === 'Y',\n\t\t\t\thelpDesk: 'redirect=detail&code=17726876'\n\t\t\t});\n\t\t\tlet fastReqRow = new Row({\n\t\t\t\tseparator: 'bottom',\n\t\t\t});\n\n\t\t\tEventEmitter.subscribe(\n\t\t\t\tfastReqField.switcher,\n\t\t\t\t'toggled',\n\t\t\t\t() =>\n\t\t\t\t{\n\t\t\t\t\tthis.getAnalytic()?.addEventConfigEmployee(\n\t\t\t\t\t\tAnalyticSettingsEvent.CHANGE_QUICK_REG,\n\t\t\t\t\t\tfastReqField.isChecked()\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tEmployeePage.addToSectionHelper(fastReqField, sectionSettings, fastReqRow);\n\t\t}\n\n\t\tif (this.hasValue('allow_invite_users'))\n\t\t{\n\t\t\tlet inviteToUserField = new Checker({\n\t\t\t\tinputName: 'allow_invite_users',\n\t\t\t\ttitle: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_USERS_TO_INVITE'),\n\t\t\t\thintOn: Loc.getMessage('INTRANET_SETTINGS_FIELD_HINT_USERS_TO_INVITE_ON'),\n\t\t\t\tchecked: this.getValue('allow_invite_users') === 'Y',\n\t\t\t});\n\t\t\tlet inviteToUserRow = new Row({\n\t\t\t\tseparator: 'bottom',\n\t\t\t});\n\n\t\t\tEventEmitter.subscribe(\n\t\t\t\tinviteToUserField.switcher,\n\t\t\t\t'toggled',\n\t\t\t\t() =>\n\t\t\t\t{\n\t\t\t\t\tthis.getAnalytic()?.addEventConfigEmployee(\n\t\t\t\t\t\tAnalyticSettingsEvent.CHANGE_REG_ALL,\n\t\t\t\t\t\tinviteToUserField.isChecked()\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t);\n\t\t\tEmployeePage.addToSectionHelper(inviteToUserField, sectionSettings, inviteToUserRow);\n\t\t}\n\n\t\tif (this.hasValue('show_fired_employees'))\n\t\t{\n\t\t\tlet showQuitField = new Checker({\n\t\t\t\tinputName: 'show_fired_employees',\n\t\t\t\ttitle: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_SHOW_QUIT_EMPLOYEE'),\n\t\t\t\thintOn: Loc.getMessage('INTRANET_SETTINGS_FIELD_HINT_SHOW_QUIT_EMPLOYEE_ON'),\n\t\t\t\tchecked: this.getValue('show_fired_employees') === 'Y',\n\t\t\t});\n\t\t\tlet showQuitRow = new Row({\n\t\t\t\tseparator: 'bottom',\n\t\t\t});\n\t\t\tEmployeePage.addToSectionHelper(showQuitField, sectionSettings, showQuitRow);\n\t\t}\n\n\t\tif (this.hasValue('general_chat_message_join'))\n\t\t{\n\t\t\tlet newUserField = new Checker({\n\t\t\t\tinputName: 'general_chat_message_join',\n\t\t\t\ttitle: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_SHOW_MESSAGE_NEW_EMPLOYEE'),\n\t\t\t\thintOn: Loc.getMessage('INTRANET_SETTINGS_FIELD_HINT_SHOW_MESSAGE_NEW_EMPLOYEE_ON'),\n\t\t\t\tchecked: this.getValue('general_chat_message_join') === 'Y',\n\t\t\t});\n\t\t\tlet newUserRow = new Row({\n\t\t\t\tseparator: 'bottom',\n\t\t\t});\n\t\t\tEmployeePage.addToSectionHelper(newUserField, sectionSettings, newUserRow);\n\t\t}\n\n\t\tif (this.hasValue('allow_new_user_lf'))\n\t\t{\n\t\t\tlet newUserLfField = new Checker({\n\t\t\t\tinputName: 'allow_new_user_lf',\n\t\t\t\ttitle: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_SHOW_MESSAGE_NEW_EMPLOYEE_LF'),\n\t\t\t\thintOn: Loc.getMessage('INTRANET_SETTINGS_FIELD_HINT_SHOW_MESSAGE_NEW_EMPLOYEE_LF_ON'),\n\t\t\t\tchecked: this.getValue('allow_new_user_lf') === 'Y',\n\t\t\t});\n\t\t\tlet newUserLfRow = new Row({\n\t\t\t\tseparator: 'bottom',\n\t\t\t});\n\t\t\tEmployeePage.addToSectionHelper(newUserLfField, sectionSettings, newUserLfRow);\n\t\t}\n\n\t\tif (this.hasValue('feature_extranet'))\n\t\t{\n\t\t\tlet extranetField = new Checker({\n\t\t\t\tinputName: 'feature_extranet',\n\t\t\t\ttitle: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_EXTRANET'),\n\t\t\t\thintOn: Loc.getMessage('INTRANET_SETTINGS_FIELD_HINT_EXTRANET_ON'),\n\t\t\t\tchecked: this.getValue('feature_extranet') === 'Y',\n\t\t\t\thelpDesk: 'redirect=detail&code=17983050'\n\t\t\t});\n\n\t\t\tEventEmitter.subscribe(\n\t\t\t\textranetField.switcher,\n\t\t\t\t'toggled',\n\t\t\t\t() =>\n\t\t\t\t{\n\t\t\t\t\tthis.getAnalytic()?.addEventConfigEmployee(\n\t\t\t\t\t\tAnalyticSettingsEvent.CHANGE_EXTRANET_INVITE,\n\t\t\t\t\t\textranetField.isChecked()\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tEmployeePage.addToSectionHelper(extranetField, sectionSettings);\n\t\t}\n\n\t\treturn sectionSettings;\n\t}\n\n\n}\n","import { Tag, Dom } from 'main.core';\nimport { Button } from 'ui.buttons';\n\nexport class ButtonBar\n{\n\t#buttonBarElement: HTMLElement;\n\t#buttons: [Button];\n\n\tconstructor(buttons: [Button] = [])\n\t{\n\t\tthis.#buttons = buttons;\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tif (this.#buttonBarElement)\n\t\t{\n\t\t\treturn this.#buttonBarElement;\n\t\t}\n\n\t\tthis.#buttonBarElement = Tag.render`<div class=\"intranet-settings__button_bar\"></div>`;\n\n\t\tfor (const button of this.#buttons)\n\t\t{\n\t\t\tDom.append(button.getContainer(), this.#buttonBarElement);\n\t\t}\n\n\t\treturn this.#buttonBarElement;\n\t}\n\n\tgetButtons(): [Button]\n\t{\n\t\treturn this.#buttons;\n\t}\n\n\taddButton(button: Button)\n\t{\n\t\tthis.#buttons.push(button);\n\t\tDom.append(button.getContainer(), this.render());\n\t}\n}","import { Loc } from 'main.core';\nimport { Button, ButtonState } from 'ui.buttons';\nimport { ErrorCollection } from 'ui.form-elements.field';\n\nexport class LandingButton\n{\n\t#button: Button\n\n\tconstructor()\n\t{\n\t\tthis.#button = new Button({\n\t\t\tclassName: 'landing-button-trigger',\n\t\t\tround: true,\n\t\t\tnoCaps: true,\n\t\t\tsize: BX.UI.Button.Size.MEDIUM,\n\t\t\tcolor: BX.UI.Button.Color.LIGHT_BORDER,\n\t\t});\n\t}\n\n\tsetState(state: LandingButtonState): void\n\t{\n\t\tstate.apply(this.#button);\n\t}\n\n\tgetButton(): Button\n\t{\n\t\treturn this.#button;\n\t}\n}\n\nexport class LandingButtonState\n{\n\tapply(button: Button)\n\t{\n\n\t}\n}\n\nexport type LandingOptions = {\n\tis_connected: boolean,\n\tis_public: boolean,\n\tpublic_url: string,\n\tedit_url: string\n}\n\nexport class EditState extends LandingButtonState\n{\n\t#landing: LandingOptions\n\n\tconstructor(landing: LandingOptions)\n\t{\n\t\tsuper();\n\t\tthis.#landing = landing;\n\t}\n\n\tapply(button: Button): void\n\t{\n\t\tbutton.setText(Loc.getMessage('INTRANET_SETTINGS_BUTTON_EDIT'));\n\t\tbutton.setDropdown(false);\n\t\tbutton.bindEvent('click', () => {\n\t\t\tthis.openNewTab(this.#landing.edit_url);\n\t\t});\n\t}\n\n\topenNewTab(url: string)\n\t{\n\t\twindow.open(url, '_blank').focus();\n\t}\n}\n\nexport class ShowState extends LandingButtonState\n{\n\t#landing: LandingOptions\n\t#menuRenderer: function\n\n\tconstructor(landing: LandingOptions, menuRenderer: function)\n\t{\n\t\tsuper();\n\t\tthis.#landing = landing;\n\t\tthis.#menuRenderer = menuRenderer;\n\t}\n\n\tapply(button: Button): void\n\t{\n\t\tbutton.setText(Loc.getMessage('INTRANET_SETTINGS_BUTTON_REQ_SITE'));\n\t\tbutton.setDropdown(true);\n\t\tbutton.unbindEvent('click');\n\t\tbutton.setColor(BX.UI.Button.Color.PRIMARY);\n\t\tbutton.setMenu(this.#menuRenderer(this.#landing));\n\t}\n}\n\nexport class CreateState extends LandingButtonState\n{\n\t#requestBuilder: function;\n\t#menuRenderer: function\n\n\tconstructor(request: function, menuRenderer: function)\n\t{\n\t\tsuper();\n\t\tthis.#requestBuilder = request;\n\t\tthis.#menuRenderer = menuRenderer;\n\t}\n\n\tapply(button: Button): void\n\t{\n\t\tbutton.setText(Loc.getMessage('INTRANET_SETTINGS_BUTTON_CREATE'));\n\t\tbutton.setDropdown(false);\n\t\tbutton.bindEvent('click', (event) => {\n\n\t\t\tif (button.getState() === ButtonState.WAITING)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tbutton.setState(ButtonState.WAITING);\n\n\t\t\tthis.#requestBuilder().then((response) => {\n\t\t\t\tconst landing: LandingOptions = response.data;\n\t\t\t\tbutton.setState(null);\n\t\t\t\tbutton.unbindEvent('click');\n\t\t\t\tif (landing.is_public)\n\t\t\t\t{\n\t\t\t\t\t(new ShowState(landing, this.#menuRenderer)).apply(button);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tconst state = new EditState(landing);\n\t\t\t\t\tstate.apply(button);\n\t\t\t\t\tstate.openNewTab(landing.edit_url);\n\t\t\t\t}\n\n\t\t\t}, (response) => {\n\t\t\t\tbutton.setState(null);\n\t\t\t\tErrorCollection.showSystemError(response.errors[0].message)\n\t\t\t});\n\t\t});\n\t}\n\n}","import { Loc, Tag } from 'main.core';\nimport type { LandingOptions }  from './landing-button';\nimport { Button } from 'ui.buttons';\n\nexport class LandingCard\n{\n\t#landing: LandingOptions;\n\t#copyBtn: ?Button;\n\t#landingCardElement: ?HTMLElement;\n\n\tconstructor(landingOptions: LandingOptions)\n\t{\n\t\tthis.#landing = landingOptions;\n\t}\n\n\tqrRender()\n\t{\n\t\tlet qrContainer = Tag.render`<div class=\"intranet-settings__qr_image-container\"></div>`;\n\t\tnew QRCode(qrContainer, {\n\t\t\ttext: this.#landing.public_url,\n\t\t\twidth: 106,\n\t\t\theight: 106,\n\t\t});\n\n\t\treturn qrContainer;\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tif (this.#landingCardElement)\n\t\t{\n\t\t\treturn this.#landingCardElement;\n\t\t}\n\n\t\tconst onclickOpenEdit = () => {\n\t\t\twindow.open(this.#landing.edit_url, '_blank').focus();\n\t\t};\n\n\t\tthis.#landingCardElement = Tag.render`\n\t\t<div class=\"intranet-settings__req-info-container\">\n\t\t\t<div class=\"intranet-settings__req-info-inner\">\n\t\t\t\t<div class=\"intranet-settings__qr_container\">${this.qrRender()}</div>\n\t\t\t\t<div class=\"intranet-settings__qr_description-block\">\n\t\t\t\t\t<div class=\"intranet-settings__qr_help-text\">\n\t\t\t\t\t\t<h4 class=\"intranet-settings__qr_title\">${Loc.getMessage('INTRANET_SETTINGS_BUTTON_REQ_SITE')}</h4>\n\t\t\t\t\t\t<p class=\"intranet-settings__qr_text\">\n\t\t\t\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_BUTTON_REQ_HELP_TEXT', { '#SITE_URL#': this.#landing.public_url })}\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"intranet-settings__qr_button\">\n\t\t\t\t\t\t${this.getCopyButton().getContainer()}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"intranet-settings__qr_editor_box\" onclick=\"${onclickOpenEdit}\">\n\t\t\t\t<div class=\"intranet-settings__qr_editor_icon\">\n\t\t\t\t\t<div class=\"ui-icon-set --paint-1\"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"intranet-settings__qr_editor_name\">${Loc.getMessage('INTRANET_SETTINGS_BUTTON_EDIT_LANDING')}</div>\n\t\t\t\t<div class=\"ui-icon-set --expand intranet-settings__qr_editor_btn\"></div>\n\t\t\t</div>\n\t\t</div>`;\n\n\t\treturn this.#landingCardElement;\n\t}\n\n\tgetCopyButton():Button\n\t{\n\t\tif (this.#copyBtn)\n\t\t{\n\t\t\treturn this.#copyBtn;\n\t\t}\n\n\t\tthis.#copyBtn = new Button({\n\t\t\ttext: Loc.getMessage('INTRANET_SETTINGS_BUTTON_REQ_COPY_LINK'),\n\t\t\tround: true,\n\t\t\tnoCaps: true,\n\t\t\tclassName: 'landing-copy-button',\n\t\t\tsize: BX.UI.Button.Size.EXTRA_SMALL,\n\t\t\tcolor: BX.UI.Button.Color.SUCCESS,\n\t\t\tevents: {\n\t\t\t\tclick: () => {\n\t\t\t\t\tif (BX.clipboard.copy(this.#landing.public_url))\n\t\t\t\t\t{\n\t\t\t\t\t\ttop.BX.UI.Notification.Center.notify({\n\t\t\t\t\t\t\tcontent: Loc.getMessage('INTRANET_SETTINGS_BUTTON_LINK_WAS_COPIED'),\n\t\t\t\t\t\t\tautoHide: true,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\n\t\treturn this.#copyBtn;\n\t}\n}","import { ajax } from 'main.core';\nimport { Button } from 'ui.buttons';\nimport type { LandingOptions } from './landing-button';\nimport { CreateState, EditState, LandingButton, LandingButtonState, ShowState } from './landing-button';\nimport { LandingCard } from './landing-card';\n\nexport class LandingButtonFactory\n{\n\t#options: LandingOptions;\n\tlandingData: Object;\n\t#menuRenderer: function;\n\n\tconstructor(options: LandingOptions, landingData)\n\t{\n\t\tthis.#options = options;\n\t\tthis.landingData = landingData;\n\t\tthis.#menuRenderer = this.#defaultMenuRenderer;\n\t}\n\n\tsetMenuRenderer(renderer: function): void\n\t{\n\t\tthis.#menuRenderer = renderer;\n\t}\n\n\tcreate(): Button\n\t{\n\t\tconst btn = new LandingButton();\n\t\tlet state: LandingButtonState;\n\t\tif (this.#options.is_connected && !this.#options.is_public)\n\t\t{\n\t\t\tstate = new EditState(this.#options);\n\t\t}\n\t\telse if (this.#options.is_connected && this.#options.is_public)\n\t\t{\n\t\t\tstate = new ShowState(this.#options, this.#menuRenderer.bind(this));\n\t\t}\n\t\telse\n\t\t{\n\t\t\tstate = new CreateState(() => {\n\t\t\t\treturn this.#getRequestCreateLanding()\n\t\t\t}, this.#menuRenderer.bind(this));\n\t\t}\n\t\tbtn.setState(state);\n\n\t\treturn btn.getButton();\n\t}\n\n\t#defaultMenuRenderer(landingData: LandingOptions): Object\n\t{\n\t\treturn {\n\t\t\tangle: true,\n\t\t\tmaxWidth: 396,\n\t\t\tcloseByEsc: true,\n\t\t\tclassName: 'intranet-settings__qr_popup',\n\t\t\titems: [\n\t\t\t\t{\n\t\t\t\t\thtml: (new LandingCard(landingData)).render(),\n\t\t\t\t\tclassName: 'intranet-settings__qr_popup_item',\n\t\t\t\t},\n\t\t\t],\n\t\t}\n\t}\n\n\t#getRequestCreateLanding(): Promise\n\t{\n\t\treturn ajax.runComponentAction(\n\t\t\t'bitrix:intranet.settings',\n\t\t\t'getLanding',\n\t\t\t{\n\t\t\t\tmode: 'class',\n\t\t\t\tdata: {\n\t\t\t\t\tcompanyId: this.landingData.company_id,\n\t\t\t\t\trequisiteId: this.landingData.requisite_id,\n\t\t\t\t\tbankRequisiteId: this.landingData.bank_requisite_id,\n\t\t\t\t}\n\t\t\t},\n\t\t)\n\t}\n}","import { Dom, Loc, Tag, Type } from 'main.core';\nimport { BaseEvent } from 'main.core.events';\nimport { Button } from 'ui.buttons';\nimport { ButtonBar } from './button-bar';\nimport { LandingButtonFactory } from './landing-button-factory';\n\ntype CardOptions = {\n\tcompany: Object,\n\tfields: Array,\n\tphone: Array,\n\temail: Array,\n\tsite: Array,\n\tlanding: Array,\n\tlandingData: Array,\n};\n\nexport class Card\n{\n\t#options: CardOptions;\n\t#cardElement: ?HTMLElement;\n\t#requisiteFieldsElement: ?HTMLElement;\n\t#buttonBar: ?ButtonBar;\n\n\tconstructor(options: CardOptions)\n\t{\n\t\tthis.#options = options;\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tif (this.#cardElement)\n\t\t{\n\t\t\treturn this.#cardElement;\n\t\t}\n\n\t\tthis.#cardElement = Tag.render`\n\t\t<div class=\"intranet-settings__req_background\">\n\t\t\t<div class=\"intranet-settings__req-card_wrapper\">\n\t\t\t\t<div class=\"intranet-settings__header\">\n\t\t\t\t\t<div class=\"intranet-settings__title\"> <span class=\"ui-section__title-icon ui-icon-set --city\"></span> <span>${this.#options.company.TITLE}</span></div>\n\t\t\t\t\t<div class=\"intranet-settings__contact_bar\"> \n\t\t\t\t\t\t<span class=\"intranet-settings__contact_bar_item\">\n\t\t\t\t\t\t\t${\n\t\t\tthis.#buildField(\n\t\t\t\tType.isStringFilled(this.#options.phone)\n\t\t\t\t\t? this.#options.phone\n\t\t\t\t\t: Loc.getMessage('INTRANET_SETTINGS_BUTTON_REQ_EMPTY_FIELD_STUB_PHONE')\n\t\t\t)\n\t\t}\n\t\t\t\t\t\t</span> \n\t\t\t\t\t\t<span class=\"intranet-settings__contact_bar_item\">\n\t\t\t\t\t\t\t${\n\t\t\tthis.#buildField(\n\t\t\t\tType.isStringFilled(this.#options.email)\n\t\t\t\t\t? this.#options.email\n\t\t\t\t\t: Loc.getMessage('INTRANET_SETTINGS_BUTTON_REQ_EMPTY_FIELD_STUB_EMAIL')\n\t\t\t)\n\t\t}\n\t\t\t\t\t\t</span> \n\t\t\t\t\t\t<span class=\"intranet-settings__contact_bar_item\">\n\t\t\t\t\t\t\t${\n\t\t\tthis.#buildField(\n\t\t\t\tType.isStringFilled(this.#options.site)\n\t\t\t\t\t? this.#options.site\n\t\t\t\t\t: Loc.getMessage('INTRANET_SETTINGS_BUTTON_REQ_EMPTY_FIELD_STUB_SITE')\n\t\t\t)\n\t\t}\n\t\t\t\t\t\t</span> \n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t${this.requisiteFieldsRender()}\n\t\t\t\t${this.getButtonsBar().render()}\n\t\t\t</div>\n\t\t</div>\n\t\t`;\n\n\t\treturn this.#cardElement;\n\t}\n\n\t#buildField(label: string): HTMLElement\n\t{\n\t\treturn Dom.create('a', {\n\t\t\ttext: label,\n\t\t\tattrs: {\n\t\t\t\thref: this.getCompanyUrl(),\n\t\t\t}\n\t\t});\n\t}\n\n\tgetCompanyUrl(): string\n\t{\n\t\tif (this.#options.company.ID === 0)\n\t\t{\n\t\t\treturn '/crm/company/details/0/?mycompany=y&TITLE=' + this.#options.company.TITLE;\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn '/crm/company/details/' + this.#options.company.ID + '/';\n\t\t}\n\t}\n\n\trequisiteFieldsRender(): HTMLElement\n\t{\n\t\tif (this.#requisiteFieldsElement)\n\t\t{\n\t\t\treturn this.#requisiteFieldsElement;\n\t\t}\n\t\tconst fields = this.#options.fields;\n\t\tthis.#requisiteFieldsElement = Tag.render`<div class=\"intranet-settings__req-table_wrap\"></div>`;\n\t\tfor (let field of fields)\n\t\t{\n\t\t\tconst renderField = Tag.render`\n\t\t\t\t<div class=\"intranet-settings__req-table_row\">\n\t\t\t\t\t<div class=\"intranet-settings__table-cell\">${field.TITLE}</div>\n\t\t\t\t\t<div class=\"intranet-settings__table-cell\">\n\t\t\t\t\t\t${\n\t\t\t\tType.isStringFilled(field.VALUE)\n\t\t\t\t\t? this.#buildField(\n\t\t\t\t\t\tfield.VALUE\n\t\t\t\t\t)\n\t\t\t\t\t: this.#buildField(\n\t\t\t\t\t\tLoc.getMessage('INTRANET_SETTINGS_BUTTON_REQ_EMPTY_FIELD_STUB')\n\t\t\t\t\t)\n\t\t\t}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t\tDom.append(renderField, this.#requisiteFieldsElement);\n\t\t}\n\n\t\treturn this.#requisiteFieldsElement;\n\t}\n\n\tgetButtonsBar(): ButtonBar\n\t{\n\t\tif (this.#buttonBar)\n\t\t{\n\t\t\treturn this.#buttonBar;\n\t\t}\n\n\t\tthis.#buttonBar = new ButtonBar();\n\n\t\treturn this.#buttonBar;\n\t}\n\n\tsetButtonBar(buttonBar: ButtonBar)\n\t{\n\t\tthis.#buttonBar = buttonBar;\n\t}\n}","import { AnalyticSettingsEvent } from '../analytic';\nimport { ButtonBar } from '../requisite/button-bar';\nimport { Card } from '../requisite/card';\nimport { LandingButtonFactory } from '../requisite/landing-button-factory';\nimport { LandingCard } from '../requisite/landing-card';\nimport { Event, Dom, Loc, Tag, Type } from 'main.core';\nimport { Section, Row } from 'ui.section';\nimport { BaseSettingsPage } from 'ui.form-elements.field';\nimport 'ui.icon-set.crm';\n\nexport class RequisitePage extends BaseSettingsPage\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis.titlePage = Loc.getMessage('INTRANET_SETTINGS_TITLE_PAGE_REQUISITE');\n\t\tthis.descriptionPage = Loc.getMessage('INTRANET_SETTINGS_DESCRIPTION_PAGE_REQUISITE');\n\n\t\ttop.BX.addCustomEvent('onLocalStorageSet', (params) => {\n\t\t\tlet eventName = params?.key ?? null;\n\t\t\tif (eventName === 'onCrmEntityUpdate' || eventName === 'onCrmEntityCreate')\n\t\t\t{\n\t\t\t\tthis.reload();\n\t\t\t}\n\t\t});\n\t}\n\n\tgetType(): string\n\t{\n\t\treturn 'requisite';\n\t}\n\n\tappendSections(contentNode: HTMLElement): void\n\t{\n\t\tlet reqSection = new Section({\n\t\t\ttitle: Loc.getMessage('INTRANET_SETTINGS_SECTION_TITLE_REQUISITE'),\n\t\t\ttitleIconClasses: 'ui-icon-set --suitcase',\n\t\t\tisOpen: true,\n\t\t\tcanCollapse: false,\n\t\t});\n\n\t\tconst description = new BX.UI.Alert({\n\t\t\ttext: `\n\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_SECTION_REQUISITE_DESCRIPTION')}\n\t\t\t\t<a class=\"ui-section__link\" onclick=\"top.BX.Helper.show('redirect=detail&code=18213326')\">\n\t\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_CANCEL_MORE')}\n\t\t\t\t</a>\n\t\t\t`,\n\t\t\tinline: true,\n\t\t\tsize: BX.UI.Alert.Size.SMALL,\n\t\t\tcolor: BX.UI.Alert.Color.PRIMARY,\n\t\t\tanimated: true,\n\t\t});\n\n\t\tconst descriptionRow = new Row({\n\t\t\tcontent: description.getContainer(),\n\t\t});\n\n\t\treqSection.append(descriptionRow.render());\n\n\t\tif (this.hasValue('COMPANY'))\n\t\t{\n\t\t\tlet companies = this.getValue('COMPANY');\n\t\t\tconst requisites = this.getValue('REQUISITES');\n\t\t\tconst phones = this.getValue('PHONES');\n\t\t\tconst sites = this.getValue('SITES');\n\t\t\tconst emails = this.getValue('EMAILS');\n\t\t\tconst landings = this.getValue('LANDINGS');\n\t\t\tconst landingsData = this.getValue('LANDINGS_DATA');\n\n\t\t\tif (!Type.isArray(companies) || companies.length <= 0)\n\t\t\t{\n\t\t\t\tconst defaultCompanyRow = new Row({\n\t\t\t\t\tcontent: this.cardRender({\n\t\t\t\t\t\tcompany: { ID: 0, TITLE: this.getValue('BITRIX_TITLE') },\n\t\t\t\t\t\tfields: this.getValue('EMPTY_REQUISITE'),\n\t\t\t\t\t\tphone: [],\n\t\t\t\t\t\temail: [],\n\t\t\t\t\t\tsite: [],\n\t\t\t\t\t}),\n\t\t\t\t});\n\n\t\t\t\treqSection.append(defaultCompanyRow.render());\n\t\t\t}\n\n\t\t\tfor (let company of companies)\n\t\t\t{\n\t\t\t\tconst fields = !Type.isNil(requisites[company.ID])\n\t\t\t\t\t? requisites[company.ID]\n\t\t\t\t\t: this.getValue('EMPTY_REQUISITE');\n\t\t\t\tconst cardRow = new Row({\n\t\t\t\t\tcontent: this.cardRender({\n\t\t\t\t\t\tcompany: company,\n\t\t\t\t\t\tfields: fields,\n\t\t\t\t\t\tphone: !Type.isNil(phones[company.ID]) ? phones[company.ID] : [],\n\t\t\t\t\t\temail: !Type.isNil(emails[company.ID]) ? emails[company.ID] : [],\n\t\t\t\t\t\tsite: !Type.isNil(sites[company.ID]) ? sites[company.ID] : [],\n\t\t\t\t\t\tlanding: !Type.isNil(landings[company.ID]) ? landings[company.ID] : [],\n\t\t\t\t\t\tlandingData: !Type.isNil(landingsData[company.ID]) ? landingsData[company.ID] : [],\n\t\t\t\t\t}),\n\t\t\t\t});\n\n\t\t\t\treqSection.append(cardRow.render());\n\t\t\t}\n\t\t}\n\n\t\treqSection.append(this.addCompanyLinkRender());\n\n\t\treqSection.renderTo(contentNode);\n\t}\n\n\taddCompanyLinkRender(): HTMLElement\n\t{\n\t\tconst link = Tag.render`\n\t\t\t\t<a class=\"ui-section__link\" \n\t\t\t\t\thref=\"/crm/company/details/0/?mycompany=y\" target=\"_blank\">\n\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_BUTTON_REQ_ADD_COMPANY')}\n\t\t\t\t</a>\n\t\t`;\n\n\t\tEvent.bind(link, 'click', (event) => {\n\t\t\tthis.getAnalytic()?.addEventConfigRequisite(AnalyticSettingsEvent.OPEN_ADD_COMPANY);\n\t\t});\n\n\t\treturn Tag.render`<div class=\"ui-section__mt-16 ui-section__link_box\">${link}</div>`;\n\t}\n\n\tcardRender(params): HTMLElement\n\t{\n\t\tconst card = new Card(params);\n\n\t\tconst buttonBar = new ButtonBar();\n\t\tif (params.company.ID > 0)\n\t\t{\n\t\t\tconst factory = new LandingButtonFactory(params.landing, params.landingData);\n\n\t\t\tfactory.setMenuRenderer((landingData) => {\n\t\t\t\tconst landingCard = new LandingCard(landingData);\n\t\t\t\tEvent.bind(landingCard.getCopyButton().getContainer(), 'click', (event) => {\n\t\t\t\t\tthis.getAnalytic()?.addEventConfigRequisite(AnalyticSettingsEvent.COPY_LINK_CARD);\n\t\t\t\t});\n\n\t\t\t\treturn {\n\t\t\t\t\tangle: true,\n\t\t\t\t\tmaxWidth: 396,\n\t\t\t\t\tcloseByEsc: true,\n\t\t\t\t\tclassName: 'intranet-settings__qr_popup',\n\t\t\t\t\titems: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\thtml: landingCard.render(),\n\t\t\t\t\t\t\tclassName: 'intranet-settings__qr_popup_item',\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t}\n\t\t\t});\n\t\t\tconst landingBtn = factory.create();\n\n\t\t\tif (Dom.hasClass(landingBtn.getContainer(), 'landing-button-trigger'))\n\t\t\t{\n\t\t\t\tEvent.bind(landingBtn.getContainer(), 'click', (event) => {\n\t\t\t\t\tif (params.landing.is_connected && !params.landing.is_public)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.getAnalytic()?.addEventConfigRequisite(AnalyticSettingsEvent.EDIT_CARD);\n\t\t\t\t\t}\n\t\t\t\t\telse if (!params.landing.is_connected && !params.landing.is_public)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.getAnalytic()?.addEventConfigRequisite(AnalyticSettingsEvent.CREATE_CARD);\n\t\t\t\t\t}\n\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tbuttonBar.addButton(landingBtn);\n\t\t}\n\n\t\tcard.setButtonBar(buttonBar);\n\n\t\treturn card.render();\n\t}\n}\n","import {TextInputInline, Checker, Selector, UserSelector} from 'ui.form-elements.view';\nimport {Loc, Event, Tag, Type} from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport 'ui.icon-set.main';\nimport 'ui.icon-set.actions';\nimport { Section, Row } from 'ui.section';\nimport 'ui.forms';\nimport { SettingsSection, SettingsField, SettingsRow, BaseSettingsPage } from 'ui.form-elements.field';\nimport { AnalyticSettingsEvent } from '../analytic';\n\nexport class CommunicationPage extends BaseSettingsPage\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis.titlePage = Loc.getMessage('INTRANET_SETTINGS_TITLE_PAGE_COMMUNICATION');\n\t\tthis.descriptionPage = Loc.getMessage('INTRANET_SETTINGS_DESCRIPTION_PAGE_COMMUNICATION');\n\t}\n\n\tgetType(): string\n\t{\n\t\treturn 'communication';\n\t}\n\n\tappendSections(contentNode: HTMLElement)\n\t{\n\t\tlet profileSection = this.#buildNewsFeedSection();\n\t\tprofileSection.renderTo(contentNode);\n\n\t\tlet chatSection = this.#buildChatSection();\n\t\tchatSection.renderTo(contentNode);\n\n\t\tlet diskSection = this.#buildDiskSection();\n\t\tdiskSection.renderTo(contentNode);\n\t}\n\n\t#buildNewsFeedSection(): SettingsSection\n\t{\n\t\tlet newsFeedSection = new Section({\n\t\t\ttitle: Loc.getMessage('INTRANET_SETTINGS_SECTION_TITLE_NEWS_FEED'),\n\t\t\ttitleIconClasses: 'ui-icon-set --feed-bold',\n\t\t});\n\n\t\tlet settingsSection = new SettingsSection({\n\t\t\tsection: newsFeedSection,\n\t\t\tparent: this,\n\t\t});\n\n\t\tif (this.hasValue('allow_livefeed_toall'))\n\t\t{\n\t\t\tlet allowPostFeedField = new Checker({\n\t\t\t\tinputName: 'allow_livefeed_toall',\n\t\t\t\ttitle: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_POST_FEED'),\n\t\t\t\thintOn: Loc.getMessage('INTRANET_SETTINGS_FIELD_HINT_POST_FEED_ON'),\n\t\t\t\tchecked: this.getValue('allow_livefeed_toall') === 'Y',\n\t\t\t\thideSeparator: true,\n\t\t\t});\n\n\t\t\tCommunicationPage.addToSectionHelper(allowPostFeedField, settingsSection);\n\n\t\t\tlet userSelectorField = new UserSelector({\n\t\t\t\tinputName: 'livefeed_toall_rights[]',\n\t\t\t\tlabel: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_SELECT_USER_PUBLIC_MESS'),\n\t\t\t\tvalues: Object.values(this.getValue('arToAllRights')),\n\t\t\t\tenableDepartments: true,\n\t\t\t\tencodeValue: (value) => {\n\t\t\t\t\tif (!Type.isNil(value.id))\n\t\t\t\t\t{\n\t\t\t\t\t\treturn value.id === 'all-users' ? 'AU' : value.type + value.id.toString().split(':')[0];\n\t\t\t\t\t}\n\n\t\t\t\t\treturn null;\n\t\t\t\t},\n\t\t\t\tdecodeValue: (value: string) => {\n\t\t\t\t\tif (value === 'UA')\n\t\t\t\t\t{\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\ttype: 'AU',\n\t\t\t\t\t\t\tid: '',\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tconst arr = value.match(/^(U|DR|D)(\\d+)/);\n\n\t\t\t\t\tif (!Type.isArray(arr))\n\t\t\t\t\t{\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\ttype: null,\n\t\t\t\t\t\t\tid: null,\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\ttype: arr[1],\n\t\t\t\t\t\tid: arr[2],\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t});\n\t\t\tlet userSelectorRow = new Row({\n\t\t\t\tcontent: userSelectorField.render(),\n\t\t\t\tisHidden: !allowPostFeedField.isChecked(),\n\t\t\t\tclassName: 'ui-section__subrow',\n\t\t\t\tseparator: 'bottom',\n\t\t\t});\n\t\t\tCommunicationPage.addToSectionHelper(userSelectorField, settingsSection, userSelectorRow);\n\n\t\t\tEventEmitter.subscribe(\n\t\t\t\tallowPostFeedField.switcher,\n\t\t\t\t'toggled',\n\t\t\t\t() => {\n\t\t\t\t\tif (allowPostFeedField.isChecked())\n\t\t\t\t\t{\n\t\t\t\t\t\tuserSelectorRow.show();\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tuserSelectorRow.hide();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t);\n\t\t}\n\n\t\tif (this.hasValue('default_livefeed_toall'))\n\t\t{\n\t\t\tlet allowPostToAllField = new Checker({\n\t\t\t\tinputName: 'default_livefeed_toall',\n\t\t\t\ttitle: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_PUBLISH_TO_ALL_DEFAULT'),\n\t\t\t\thintOn: Loc.getMessage('INTRANET_SETTINGS_FIELD_HINT_PUBLISH_TO_ALL_DEFAULT_ON'),\n\t\t\t\tchecked: this.getValue('default_livefeed_toall') === 'Y',\n\t\t\t\t// helpDesk: '1',\n\t\t\t});\n\n\t\t\tCommunicationPage.addToSectionHelper(allowPostToAllField, settingsSection);\n\t\t}\n\n\t\tif (this.hasValue('ratingTextLikeY'))\n\t\t{\n\t\t\tconst likeBtnNameField = new TextInputInline({\n\t\t\t\tinputName: this.getValue('ratingTextLikeY')?.name,\n\t\t\t\tlabel: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_LIKE_INPUT'),\n\t\t\t\thintTitle: Loc.getMessage('INTRANET_SETTINGS_FIELD_HINT_TITLE_LIKE'),\n\t\t\t\tvalue: this.getValue('ratingTextLikeY')?.value,\n\t\t\t\tvalueColor: this.hasValue('ratingTextLikeY'),\n\t\t\t\thintDesc: Loc.getMessage('INTRANET_SETTINGS_FIELD_HINT_DESC_LIKE'),\n\t\t\t});\n\t\t\tCommunicationPage.addToSectionHelper(likeBtnNameField, settingsSection);\n\t\t}\n\n\t\treturn settingsSection;\n\t}\n\n\t#buildChatSection(): Section\n\t{\n\t\tlet chatSection = new Section({\n\t\t\ttitle: Loc.getMessage('INTRANET_SETTINGS_SECTION_TITLE_CHATS'),\n\t\t\ttitleIconClasses: 'ui-icon-set --chats-1',\n\t\t\tisOpen: false\n\t\t});\n\n\t\tlet settingsSection = new SettingsSection({\n\t\t\tsection: chatSection,\n\t\t\tparent: this,\n\t\t});\n\n\t\tif (this.hasValue('general_chat_can_post'))\n\t\t{\n\t\t\tlet canPostGeneralChatField = new Checker({\n\t\t\t\tinputName: 'allow_post_general_chat',\n\t\t\t\ttitle: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_ALLOW_POST_GEN_CHAT'),\n\t\t\t\thintOn: Loc.getMessage('INTRANET_SETTINGS_FIELD_HINT_ALLOW_POST_GEN_CHAT_ON'),\n\t\t\t\tchecked: this.getValue('allow_post_general_chat') === 'Y',\n\t\t\t\thelpDesk: 'redirect=detail&code=18213254',\n\t\t\t});\n\n\t\t\tlet settingsField = new SettingsField({\n\t\t\t\tfieldView: canPostGeneralChatField,\n\t\t\t});\n\t\t\tlet settingsRow = new SettingsRow({\n\t\t\t\tparent: settingsSection,\n\t\t\t\tchild: settingsField,\n\t\t\t});\n\n\t\t\tlet canPostGeneralChatListField = new Selector({\n\t\t\t\tlabel: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_ALLOW_POST_GEN_CHAT_LIST'),\n\t\t\t\tname: this.getValue('general_chat_can_post').name,\n\t\t\t\titems: this.getValue('general_chat_can_post').values,\n\t\t\t\tcurrent: this.getValue('general_chat_can_post').current,\n\t\t\t});\n\t\t\tsettingsField = new SettingsField({\n\t\t\t\tfieldView: canPostGeneralChatListField,\n\t\t\t});\n\n\t\t\tlet canPostGeneralChatListRow = new Row({\n\t\t\t\tisHidden: !canPostGeneralChatField.isChecked(),\n\t\t\t\tclassName: 'ui-section__subrow',\n\t\t\t});\n\t\t\tlet canPostGeneralChatListSettingsRow = new SettingsRow({\n\t\t\t\trow: canPostGeneralChatListRow,\n\t\t\t\tparent: settingsRow,\n\t\t\t\tchild: settingsField,\n\t\t\t});\n\n\t\t\tlet subRowForGeneralChatList = new Row({\n\t\t\t\tcontent: canPostGeneralChatListField.render(),\n\t\t\t});\n\t\t\tnew SettingsRow({\n\t\t\t\trow: subRowForGeneralChatList,\n\t\t\t\tparent: canPostGeneralChatListSettingsRow,\n\t\t\t\tchild: settingsField,\n\t\t\t});\n\n\t\t\tlet managerSelectorField = new UserSelector({\n\t\t\t\tinputName: 'imchat_toall_rights[]',\n\t\t\t\tlabel: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_SELECT_USER_PUBLIC_MESS'),\n\t\t\t\tenableAll: false,\n\t\t\t\tvalues: Object.values(this.getValue('generalChatManagersList') ?? []),\n\t\t\t\tencodeValue: (value) => {\n\t\t\t\t\tif (!Type.isNil(value.id))\n\t\t\t\t\t{\n\t\t\t\t\t\treturn value.id === 'all-users' ? 'AU' : 'U' + value.id;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn null;\n\t\t\t\t},\n\t\t\t\tdecodeValue: (value) => {\n\t\t\t\t\tif (value === 'UA')\n\t\t\t\t\t{\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\ttype: 'AU',\n\t\t\t\t\t\t\tid: '',\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tconst arr = value.match(/^(U)(\\d+)/);\n\n\t\t\t\t\tif (!Type.isArray(arr))\n\t\t\t\t\t{\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\ttype: null,\n\t\t\t\t\t\t\tid: null,\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\ttype: arr[1],\n\t\t\t\t\t\tid: arr[2],\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t});\n\t\t\tsettingsField = new SettingsField({\n\t\t\t\tfieldView: managerSelectorField,\n\t\t\t});\n\t\t\tlet managerSelectorRow = new Row({\n\t\t\t\tcontent: managerSelectorField.render(),\n\t\t\t\tisHidden: this.getValue('general_chat_can_post').current !== 'MANAGER',\n\t\t\t});\n\t\t\tnew SettingsRow({\n\t\t\t\trow: managerSelectorRow,\n\t\t\t\tparent: canPostGeneralChatListSettingsRow,\n\t\t\t\tchild: settingsField,\n\t\t\t});\n\n\t\t\tEventEmitter.subscribe(\n\t\t\t\tcanPostGeneralChatField.switcher,\n\t\t\t\t'toggled',\n\t\t\t\t() => {\n\t\t\t\t\tif (canPostGeneralChatField.isChecked())\n\t\t\t\t\t{\n\t\t\t\t\t\tcanPostGeneralChatListRow.show();\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tcanPostGeneralChatListRow.hide();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t);\n\n\t\t\tcanPostGeneralChatListField.getInputNode()\n\t\t\t\t.addEventListener('change', (event) => {\n\t\t\t\t\tif (event.target.value === 'MANAGER')\n\t\t\t\t\t{\n\t\t\t\t\t\tmanagerSelectorRow.show();\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tmanagerSelectorRow.hide();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t}\n\n\t\tif (this.hasValue('general_chat_message_leave'))\n\t\t{\n\t\t\tlet leaveMessageField = new Checker({\n\t\t\t\tinputName: 'general_chat_message_leave',\n\t\t\t\ttitle: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_ALLOW_LEAVE_MESSAGE'),\n\t\t\t\tchecked: this.getValue('general_chat_message_leave') === 'Y',\n\t\t\t});\n\t\t\tCommunicationPage.addToSectionHelper(leaveMessageField, settingsSection);\n\t\t}\n\n\t\tif (this.hasValue('general_chat_message_admin_rights'))\n\t\t{\n\t\t\tlet adminMessageField = new Checker({\n\t\t\t\tinputName: 'general_chat_message_admin_rights',\n\t\t\t\ttitle: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_ALLOW_ADMIN_MESSAGE'),\n\t\t\t\tchecked: this.getValue('general_chat_message_admin_rights') === 'Y',\n\t\t\t});\n\t\t\tCommunicationPage.addToSectionHelper(adminMessageField, settingsSection);\n\t\t}\n\n\t\tif (this.hasValue('url_preview_enable'))\n\t\t{\n\t\t\tlet allowUrlPreviewField = new Checker({\n\t\t\t\tinputName: 'url_preview_enable',\n\t\t\t\ttitle: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_ALLOW_URL_PREVIEW'),\n\t\t\t\thintOn: Loc.getMessage('INTRANET_SETTINGS_FIELD_HINT_URL_PREVIEW_ON'),\n\t\t\t\tchecked: this.getValue('url_preview_enable') === 'Y',\n\t\t\t});\n\t\t\tCommunicationPage.addToSectionHelper(allowUrlPreviewField, settingsSection);\n\t\t}\n\n\t\tif (this.hasValue('create_overdue_chats'))\n\t\t{\n\t\t\tlet overdueChatsField = new Checker({\n\t\t\t\tinputName: 'create_overdue_chats',\n\t\t\t\ttitle: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_CREATE_OVERDUE_CHATS'),\n\t\t\t\thintOn: Loc.getMessage('INTRANET_SETTINGS_FIELD_HINT_OVERDUE_CHATS_ON'),\n\t\t\t\tchecked: this.getValue('create_overdue_chats') === 'Y',\n\t\t\t\thelpDesk: 'redirect=detail&code=18213270',\n\t\t\t});\n\t\t\tCommunicationPage.addToSectionHelper(overdueChatsField, settingsSection);\n\t\t}\n\n\t\treturn settingsSection;\n\t}\n\n\t#buildDiskSection(): SettingsSection\n\t{\n\t\tlet diskSection = new Section({\n\t\t\ttitle: Loc.getMessage('INTRANET_SETTINGS_SECTION_TITLE_DISK'),\n\t\t\ttitleIconClasses: 'ui-icon-set --disk',\n\t\t\tisOpen: false,\n\t\t});\n\n\t\tlet settingsSection = new SettingsSection({\n\t\t\tsection: diskSection,\n\t\t\tparent: this,\n\t\t});\n\n\t\tif (this.hasValue('DISK_VIEWER_SERVICE'))\n\t\t{\n\t\t\tlet fileViewerField = new Selector({\n\t\t\t\tlabel: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_SELECT_FILE_VIEWER'),\n\t\t\t\tname: this.getValue('DISK_VIEWER_SERVICE').name,\n\t\t\t\titems: this.getValue('DISK_VIEWER_SERVICE').values,\n\t\t\t\tcurrent: this.getValue('DISK_VIEWER_SERVICE').current,\n\t\t\t});\n\t\t\tCommunicationPage.addToSectionHelper(fileViewerField, settingsSection);\n\t\t}\n\n\t\tif (this.hasValue('DISK_LIMIT_PER_FILE'))\n\t\t{\n\t\t\tconst messageNode = Tag.render`<span>${Loc.getMessage(\n\t\t\t\t'INTRANET_SETTINGS_FIELD_HELP_MESSAGE'\n\t\t\t)}</span>`;\n\t\t\tlet fileLimitField = new Selector({\n\t\t\t\tlabel: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_MAX_FILE_LIMIT'),\n\t\t\t\thintTitle: this.getValue('DISK_LIMIT_PER_FILE').hintTitle,\n\t\t\t\tname: this.getValue('DISK_LIMIT_PER_FILE').name,\n\t\t\t\titems: this.getValue('DISK_LIMIT_PER_FILE').values,\n\t\t\t\thints: this.getValue('DISK_LIMIT_PER_FILE').hints,\n\t\t\t\tcurrent: this.getValue('DISK_LIMIT_PER_FILE').current,\n\t\t\t\tisEnable: this.getValue('DISK_LIMIT_PER_FILE').is_enable,\n\t\t\t\tbannerCode: 'limit_max_entries_in_document_history',\n\t\t\t\thelpDesk: 'redirect=detail&code=18869612',\n\t\t\t\thelpMessageProvider: this.helpMessageProviderFactory(messageNode),\n\t\t\t});\n\t\t\tlet fileLimitRow = new Row({\n\t\t\t\tseparator: 'bottom',\n\t\t\t\tclassName: '--block',\n\t\t\t});\n\t\t\tif (!this.getValue('DISK_LIMIT_PER_FILE').is_enable)\n\t\t\t{\n\t\t\t\tEvent.bind(\n\t\t\t\t\tfileLimitField.getInputNode(),\n\t\t\t\t\t'click',\n\t\t\t\t\t() =>\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.getAnalytic()?.addEventOpenHint(this.getValue('DISK_LIMIT_PER_FILE').name);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t\tEvent.bind(\n\t\t\t\t\tmessageNode.querySelector('a'),\n\t\t\t\t\t'click',\n\t\t\t\t\t() => this.getAnalytic()?.addEventOpenTariffSelector(this.getValue('DISK_LIMIT_PER_FILE').name)\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tCommunicationPage.addToSectionHelper(fileLimitField, settingsSection, fileLimitRow);\n\t\t}\n\n\t\tif (this.hasValue('disk_allow_edit_object_in_uf'))\n\t\t{\n\t\t\tlet allowEditDocField = new Checker({\n\t\t\t\tinputName: 'disk_allow_edit_object_in_uf',\n\t\t\t\ttitle: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_ALLOW_EDIT_DOC'),\n\t\t\t\thintOn: Loc.getMessage('INTRANET_SETTINGS_FIELD_HINT_ALLOW_EDIT_DOC_ON'),\n\t\t\t\tchecked: this.getValue('disk_allow_edit_object_in_uf') === 'Y',\n\t\t\t});\n\t\t\tCommunicationPage.addToSectionHelper(allowEditDocField, settingsSection);\n\t\t}\n\n\t\tif (this.hasValue('disk_allow_autoconnect_shared_objects'))\n\t\t{\n\t\t\tlet connectDiskField = new Checker({\n\t\t\t\tinputName: 'disk_allow_autoconnect_shared_objects',\n\t\t\t\ttitle: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_ALLOW_AUTO_CONNECT_DISK'),\n\t\t\t\thintOn: Loc.getMessage('INTRANET_SETTINGS_FIELD_HINT_ALLOW_AUTO_CONNECT_DISK_ON'),\n\t\t\t\tchecked: this.getValue('disk_allow_autoconnect_shared_objects') === 'Y',\n\t\t\t\thelpDesk: 'redirect=detail&code=18213280',\n\t\t\t});\n\t\t\tCommunicationPage.addToSectionHelper(connectDiskField, settingsSection);\n\t\t}\n\n\t\tif (this.hasValue('disk_allow_use_external_link'))\n\t\t{\n\t\t\tconst messageNode = Tag.render`<span>${Loc.getMessage(\n\t\t\t\t'INTRANET_SETTINGS_FIELD_HELP_MESSAGE'\n\t\t\t)}</span>`;\n\t\t\tlet publicLinkField = new Checker({\n\t\t\t\tinputName: 'disk_allow_use_external_link',\n\t\t\t\ttitle: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_ALLOW_PUBLIC_LINK'),\n\t\t\t\thintOn: Loc.getMessage('INTRANET_SETTINGS_FIELD_HINT_ALLOW_PUBLIC_LINK_ON'),\n\t\t\t\tchecked: this.getValue('disk_allow_use_external_link').value === 'Y',\n\t\t\t\tisEnable: this.getValue('disk_allow_use_external_link').is_enable,\n\t\t\t\tbannerCode: 'limit_admin_share_link',\n\t\t\t\thelpDesk: 'redirect=detail&code=5390599',\n\t\t\t\thelpMessageProvider: this.helpMessageProviderFactory(messageNode),\n\t\t\t});\n\t\t\tif (!this.getValue('disk_allow_use_external_link').is_enable)\n\t\t\t{\n\t\t\t\tEventEmitter.subscribe(\n\t\t\t\t\tpublicLinkField.switcher,\n\t\t\t\t\t'toggled',\n\t\t\t\t\t() =>\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.getAnalytic()?.addEventOpenHint('disk_allow_use_external_link');\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t\tEvent.bind(\n\t\t\t\t\tmessageNode.querySelector('a'),\n\t\t\t\t\t'click',\n\t\t\t\t\t() => this.getAnalytic()?.addEventOpenTariffSelector('enable_pub_link')\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tCommunicationPage.addToSectionHelper(publicLinkField, settingsSection);\n\t\t}\n\n\t\tif (this.hasValue('disk_object_lock_enabled'))\n\t\t{\n\t\t\tconst messageNode = Tag.render`<span>${Loc.getMessage(\n\t\t\t\t'INTRANET_SETTINGS_FIELD_HELP_MESSAGE'\n\t\t\t)}</span>`;\n\t\t\tlet enableBlockDocField = new Checker({\n\t\t\t\tinputName: 'disk_object_lock_enabled',\n\t\t\t\ttitle: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_ALLOW_BLOCK_DOC'),\n\t\t\t\thintOn: Loc.getMessage('INTRANET_SETTINGS_FIELD_HINT_ALLOW_BLOCK_DOC_ON'),\n\t\t\t\tchecked: this.getValue('disk_object_lock_enabled').value === 'Y',\n\t\t\t\tisEnable: this.getValue('disk_object_lock_enabled').is_enable,\n\t\t\t\tbannerCode: 'limit_document_lock',\n\t\t\t\thelpMessageProvider: this.helpMessageProviderFactory(messageNode),\n\t\t\t\thelpDesk: 'redirect=detail&code=2301293',\n\t\t\t});\n\t\t\tif (!this.getValue('disk_object_lock_enabled').is_enable)\n\t\t\t{\n\t\t\t\tEventEmitter.subscribe(\n\t\t\t\t\tenableBlockDocField.switcher,\n\t\t\t\t\t'toggled',\n\t\t\t\t\t() =>\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.getAnalytic()?.addEventOpenHint('disk_object_lock_enabled');\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t\tEvent.bind(\n\t\t\t\t\tmessageNode.querySelector('a'),\n\t\t\t\t\t'click',\n\t\t\t\t\t() => this.getAnalytic()?.addEventOpenTariffSelector('disk_object_lock_enabled')\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tCommunicationPage.addToSectionHelper(enableBlockDocField, settingsSection);\n\t\t}\n\n\t\tif (this.hasValue('disk_allow_use_extended_fulltext'))\n\t\t{\n\t\t\tconst messageNode = Tag.render`<span>${Loc.getMessage(\n\t\t\t\t'INTRANET_SETTINGS_FIELD_HELP_MESSAGE_ENT',\n\t\t\t\t{ '#TARIFF#': 'ent250'},\n\t\t\t)}</span>`;\n\t\t\tlet enableFindField = new Checker({\n\t\t\t\tinputName: 'disk_allow_use_extended_fulltext',\n\t\t\t\ttitle: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_ALLOW_SEARCH_DOC'),\n\t\t\t\thintOn: Loc.getMessage('INTRANET_SETTINGS_FIELD_HINT_ALLOW_SEARCH_DOC_ON'),\n\t\t\t\tchecked: this.getValue('disk_allow_use_extended_fulltext').value === 'Y',\n\t\t\t\tisEnable: this.getValue('disk_allow_use_extended_fulltext').is_enable,\n\t\t\t\tbannerCode: 'limit_in_text_search',\n\t\t\t\thelpDesk: 'redirect=detail&code=18213348',\n\t\t\t\thelpMessageProvider: this.helpMessageProviderFactory(messageNode),\n\t\t\t});\n\t\t\tif (!this.getValue('disk_allow_use_extended_fulltext').is_enable)\n\t\t\t{\n\t\t\t\tEventEmitter.subscribe(\n\t\t\t\t\tenableFindField.switcher,\n\t\t\t\t\t'toggled',\n\t\t\t\t\t() =>\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.getAnalytic()?.addEventOpenHint('disk_allow_use_extended_fulltext');\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t\tEvent.bind(\n\t\t\t\t\tmessageNode.querySelector('a'),\n\t\t\t\t\t'click',\n\t\t\t\t\t() => this.getAnalytic()?.addEventOpenTariffSelector('disk_allow_use_extended_fulltext')\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tCommunicationPage.addToSectionHelper(enableFindField, settingsSection);\n\t\t}\n\n\t\treturn settingsSection;\n\t}\n}\n","import { Event, Loc, Tag } from 'main.core';\nimport { BaseSettingsElement } from \"ui.form-elements.field\";\nimport { HelpMessage } from 'ui.section';\nimport { Checker, TextInput } from 'ui.form-elements.view';\nimport { EventEmitter, BaseEvent } from \"main.core.events\";\n\nexport type SiteTitleFieldType = {\n\tparent: BaseSettingsElement,\n\tsiteTitleOptions: SiteTitleInputType,\n};\nexport type SiteTitleInputType = {\n\tname: string,\n\tcanUserEditName: boolean,\n\ttitle: string,\n\tcanUserEditTitle: boolean,\n\tlogo24: string,\n\tcanUserEditLogo24: boolean,\n\tlogo: ?Array\n};\n\nexport class SiteTitleField extends BaseSettingsElement\n{\n\toptions: SiteTitleInputType;\n\n\t#content: HTMLElement;\n\t#title: TextInput;\n\t#logo24: Checker;\n\n\t#inputMonitoringIntervalId: ?number;\n\t#inputMonitoringCountdown: number = 10;\n\t#inputMonitoringPrevState: ?string;\n\n\tconstructor(params: SiteTitleFieldType)\n\t{\n\t\tsuper(params);\n\t\tthis.setParentElement(params.parent);\n\t\tthis.setEventNamespace('BX.Intranet.Settings');\n\n\t\tconst options = params.siteTitleOptions;\n\t\tthis.options = {\n\t\t\ttitle: options.title,\n\t\t\tcanUserEditTitle: options.canUserEditTitle,\n\t\t\tlogo24: options.logo24,\n\t\t\tcanUserEditLogo24: options.canUserEditLogo24,\n\t\t};\n\n\t\tthis.#initTitle(options);\n\t\tthis.#initLogo24(options);\n\t}\n\n\t#initTitle(options: SiteTitleInputType)\n\t{\n\t\tthis.#title = new TextInput({\n\t\t\tvalue: options.title,\n\t\t\tplaceholder: options.title,\n\t\t\tlabel: Loc.getMessage('INTRANET_SETTINGS_SECTION_TITLE_SITE_TITLE_INPUT_LABEL'),\n\t\t\tid: 'siteTitle',\n\t\t\tinputName: 'title',\n\t\t\tisEnable: true,\n\t\t\t// bannerCode: '123',\n\t\t\t// helpDeskCode: '234',\n\t\t\t// helpMessageProvider: () => {}\n\t\t});\n\n\t\tthis.#title.setEventNamespace(\n\t\t\tthis.getEventNamespace()\n\t\t);\n\t}\n\n\t#initLogo24(options)\n\t{\n\t\tthis.#logo24 = new Checker({\n\t\t\tid: 'siteLogo24',\n\t\t\tinputName: 'logo24',\n\t\t\ttitle: Loc.getMessage('INTRANET_SETTINGS_SECTION_TITLE_SITE_LOGO24'),\n\t\t\tsize: 'extra-small',\n\t\t\t// hintOn: '',\n\t\t\t// hintOff: '',\n\t\t\tisEnable: options.canUserEditLogo24,\n\t\t\tchecked: options.logo24 !== '',\n\t\t\tvalue: 'Y',\n\t\t\tbannerCode: 'limit_admin_logo24',\n\t\t});\n\n\t\tthis.#logo24.setEventNamespace(\n\t\t\tthis.getEventNamespace()\n\t\t);\n\t}\n\n\tgetFieldView()\n\t{\n\t\treturn this.#title;\n\t}\n\n\tcancel(): void\n\t{\n\t}\n\n\tstartInputMonitoring(): void\n\t{\n\t\tif (this.#inputMonitoringIntervalId > 0)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tthis.#inputMonitoringIntervalId = setInterval(this.monitorInput.bind(this), 500);\n\t}\n\n\tstopInputMonitoring()\n\t{\n\t\tif (this.#inputMonitoringIntervalId > 0)\n\t\t{\n\t\t\tclearInterval(this.#inputMonitoringIntervalId);\n\t\t\tthis.#inputMonitoringIntervalId = null;\n\t\t}\n\t}\n\n\tmonitorInput()\n\t{\n\t\tconst value = this.#title.getInputNode().value;\n\t\tif (this.#inputMonitoringPrevState !== value)\n\t\t{\n\t\t\tthis.#inputMonitoringCountdown = 10;\n\t\t\tthis.#inputMonitoringPrevState = value;\n\t\t\tEventEmitter.emit(\n\t\t\t\tEventEmitter.GLOBAL_TARGET,\n\t\t\t\tthis.getEventNamespace() + ':Portal:Change',\n\t\t\t\tnew BaseEvent({data: { title:  value } } )\n\t\t\t);\n\t\t}\n\t\telse if (--this.#inputMonitoringCountdown <= 0)\n\t\t{\n\t\t\tthis.stopInputMonitoring();\n\t\t}\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tif (this.#content)\n\t\t{\n\t\t\treturn this.#content;\n\t\t}\n\n\t\tEvent.bind(this.#title.getInputNode(), 'focus', this.startInputMonitoring.bind(this));\n\t\tEvent.bind(this.#title.getInputNode(), 'keydown', this.startInputMonitoring.bind(this));\n\t\tEvent.bind(this.#title.getInputNode(), 'click', this.startInputMonitoring.bind(this));\n\t\tEvent.bind(this.#title.getInputNode(), 'blur', this.stopInputMonitoring.bind(this));\n\t\tEvent.bind(this.#title.getInputNode(), 'blur', this.stopInputMonitoring.bind(this));\n\n\t\tthis.#logo24.subscribe('change', (event: BaseEvent) => {\n\t\t\tEventEmitter.emit(\n\t\t\t\tEventEmitter.GLOBAL_TARGET,\n\t\t\t\tthis.getEventNamespace() + ':Portal:Change',\n\t\t\t\tnew BaseEvent({ data: { logo24:  event.getData() === true ? '24' : '' } })\n\t\t\t);\n\t\t});\n\n\t\treturn Tag.render`\n\t\t<div id=\"${this.#title.getId()}\" class=\"ui-section__field-selector --no-border --no-margin --align-center\">\n\t\t\t<div class=\"ui-section__field-container\">\n\t\t\t\t<div class=\"ui-section__field-label_box\">\n\t\t\t\t\t<label class=\"ui-section__field-label\" for=\"${this.#title.getName()}\">\n\t\t\t\t\t\t${this.#title.getLabel()}\n\t\t\t\t\t</label> \n\t\t\t\t</div>\n\t\t\t\t<div class=\"ui-section__field-inner\">\n\t\t\t\t\t<div class=\"ui-ctl ui-ctl-textbox ui-ctl-block\">\n\t\t\t\t\t\t${this.#title.getInputNode()}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"ui-section__hint\">\n\t\t\t\t${this.#logo24.render()}\n\t\t\t</div>\n\t\t</div>\n\t\t`;\n\t}\n}\n","import { Loc, Tag, Text, Event } from 'main.core';\nimport { BaseSettingsElement } from \"ui.form-elements.field\";\nimport { TextInput } from 'ui.form-elements.view';\nimport { SettingsField } from 'ui.form-elements.field';\n\nexport type SiteTitleFieldType = {\n\tparent: BaseSettingsElement,\n\tsiteDomainOptions: SiteDomainType,\n};\n\nexport type SiteDomainType = {\n\thostname: string,\n\tsubDomainName: string,\n\tmainDomainName: string,\n\tisRenameable: boolean,\n\toccupiedDomains: Object,\n};\n\nexport class SiteDomainField extends SettingsField\n{\n\toptions: SiteDomainType;\n\n\t#content: HTMLElement;\n\t#title: TextInput;\n\n\tconstructor(params: SiteTitleFieldType)\n\t{\n\t\tconst options = params.siteDomainOptions;\n\t\tparams.fieldView = new TextInput({\n\t\t\tvalue: options.subDomainName,\n\t\t\tplaceholder: options.subDomainName,\n\t\t\tlabel: Loc.getMessage('INTRANET_SETTINGS_SECTION_DOMAIN_NAME3'),\n\t\t\tid: 'subDomainName',\n\t\t\tinputName: 'subDomainName',\n\t\t\tisEnable: true,\n\t\t});\n\n\t\tsuper(params);\n\t\tthis.setParentElement(params.parent);\n\n\t\tthis.getFieldView().setEventNamespace(\n\t\t\tthis.getEventNamespace()\n\t\t);\n\t\tthis.getFieldView().getInputNode().setAttribute('autocomplete', 'off');\n\n\t\tlet timeout = null;\n\n\t\tEvent.bind(this.getFieldView().getInputNode(), 'input', () => {\n\t\t\tclearTimeout(timeout);\n\t\t\ttimeout = setTimeout(() => {\n\t\t\t\tthis.validateInput();\n\t\t\t}, 1000);\n\t\t});\n\n\t\tthis.options = {\n\t\t\thostname: options.hostname,\n\t\t\tsubDomainName: options.subDomainName,\n\t\t\tmainDomainName: options.mainDomainName,\n\t\t\tisRenameable: options.isRenameable,\n\t\t\toccupiedDomains: options.occupiedDomains,\n\t\t};\n\t\tthis.options.mainDomainName = ['.', this.options.mainDomainName].join('').replace('..', '.');\n\t}\n\n\tvalidateInput()\n\t{\n\t\tlet newDomain = this.getFieldView().getInputNode().value;\n\t\tnewDomain = newDomain.trim();\n\n\t\tif (newDomain.length < 3 || newDomain.length > 60)\n\t\t{\n\t\t\tthis.getFieldView().setErrors([Loc.getMessage('INTRANET_SETTINGS_DOMAIN_RENAMING_LENGTH_ERROR')]);\n\t\t}\n\t\telse if (!/^([a-zA-Z0-9]([a-zA-Z0-9\\\\-]{0,58})[a-zA-Z0-9])$/.test(newDomain))\n\t\t{\n\t\t\tthis.getFieldView().setErrors([Loc.getMessage('INTRANET_SETTINGS_DOMAIN_RENAMING_FORMAT_ERROR')]);\n\t\t}\n\t\telse if (this.options.occupiedDomains.includes(newDomain))\n\t\t{\n\t\t\tthis.getFieldView().setErrors([Loc.getMessage('INTRANET_SETTINGS_DOMAIN_RENAMING_DOMAIN_EXISTS_ERROR')]);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.getFieldView().cleanError();\n\t\t}\n\t}\n\n\tcancel(): void\n\t{\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tif (this.#content)\n\t\t{\n\t\t\treturn this.#content;\n\t\t}\n\n\t\tif (this.options.isRenameable !== true)\n\t\t{\n\t\t\tconst copyButton = Tag.render`<div class=\"settings-tools-description-link\">${Loc.getMessage('INTRANET_SETTINGS_COPY')}</div>`;\n\t\t\tBX.clipboard.bindCopyClick(copyButton, {text: () => {\n\t\t\t\t\treturn this.options.hostname;\n\t\t\t\t}})\n\t\t\t;\n\t\t\tthis.#content = Tag.render`\n\t\t\t\t<div>\n\t\t\t\t\t<div class=\"ui-section__field-label_box\">\n\t\t\t\t\t\t<div class=\"ui-section__field-label\">${Loc.getMessage('INTRANET_SETTINGS_SECTION_DOMAIN_NAME4')}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"intranet-settings__domain_box\">\n\t\t\t\t\t\t<div class=\"intranet-settings__domain_name\">${Text.encode(this.options.hostname)}</div>\n\t\t\t\t\t\t${copyButton}\n\t\t\t\t\t</div>\n\t\t\t\t</div>`;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.#content = Tag.render`<div id=\"${this.getFieldView().getId()}\" class=\"ui-section__field-selector --no-border\">\n\t\t\t\t<div class=\"ui-section__field-container\">\n\t\t\t\t\t<div class=\"ui-section__field-label_box\">\n\t\t\t\t\t\t<label class=\"ui-section__field-label\" for=\"${this.getFieldView().getName()}\">\n\t\t\t\t\t\t\t${this.getFieldView().getLabel()}\n\t\t\t\t\t\t</label> \n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"ui-section__field-inner\">\n\t\t\t\t\t\t<div class=\"intarnet-settings__domain_inline-field\">\n\t\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-textbox ui-ctl-block\">\n\t\t\t\t\t\t\t\t${this.getFieldView().getInputNode()}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"intarnet-settings__domain_name\">${Text.encode(this.options.mainDomainName)}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t${this.getFieldView().renderErrors()}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>`;\n\t\t}\n\n\t\treturn this.#content;\n\t}\n}\n","import { Event, Loc, Tag, Dom, Type, Text } from 'main.core';\nimport type { SiteThemeOptions } from './site-theme-picker-field';\nimport type { SiteTitleInputType } from './site-title-field';\n\nexport function setPortalSettings(container: HTMLElement, portalSettings: SiteTitleInputType): void\n{\n\tconst logoNode = container.querySelector('[data-role=\"logo\"]');\n\tconst titleNode =  container.querySelector('[data-role=\"title\"]');\n\tconst logo24Node = container.querySelector('[data-role=\"logo24\"]');\n\n\tif (!logoNode.hasAttribute('data-prev-display'))\n\t{\n\t\tlogoNode.dataset.prevDisplay = logoNode.style.display;\n\t\ttitleNode.dataset.prevDisplay = titleNode.style.display;\n\t\tlogo24Node.dataset.prevDisplay = logo24Node.style.display;\n\t}\n\n\tif (Type.isUndefined(portalSettings.title) !== true)\n\t{\n\t\ttitleNode.innerHTML = Text.encode(Type.isStringFilled(portalSettings.title) ?\n\t\t\tportalSettings.title : 'Bitrix')\n\t\t;\n\t}\n\n\tif (Type.isUndefined(portalSettings.logo24) !== true)\n\t{\n\t\tif (Type.isStringFilled(portalSettings.logo24))\n\t\t{\n\t\t\tdelete logo24Node.dataset.visibility;\n\t\t\tif (logoNode.style.display === 'none')\n\t\t\t{\n\t\t\t\tlogo24Node.style.removeProperty('display');\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tlogo24Node.dataset.visibility = 'hidden';\n\t\t\tlogo24Node.style.display = 'none';\n\t\t}\n\t}\n\n\tif (Type.isUndefined(portalSettings.logo) !== true)\n\t{\n\t\tif (Type.isPlainObject(portalSettings.logo))\n\t\t{\n\t\t\tlogoNode.style.backgroundImage = 'url(\"' + encodeURI(portalSettings.logo.src) + '\")';\n\t\t\tlogoNode.style.removeProperty('display');\n\t\t\ttitleNode.style.display = 'none';\n\t\t\tlogo24Node.style.display = 'none';\n\t\t}\n\t\telse\n\t\t{\n\t\t\tlogoNode.style.display = 'none';\n\t\t\ttitleNode.style.removeProperty('display');\n\n\t\t\tif (logo24Node.dataset.visibility !== 'hidden')\n\t\t\t{\n\t\t\t\tlogo24Node.style.removeProperty('display');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tlogo24Node.style.display = 'none';\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport function setPortalThemeSettings(container: HTMLElement, themeSettings: SiteThemeOptions): void\n{\n\tconst theme = Type.isPlainObject(themeSettings) ? themeSettings : {};\n\n\tconst lightning = String(theme.id).indexOf('dark:') === 0 ? 'dark' : 'light';\n\n\tDom.removeClass(container, '--light --dark');\n\tDom.addClass(container, '--' + lightning);\n\n\tif (Type.isStringFilled(theme.previewImage))\n\t{\n\t\tcontainer.style.backgroundImage = 'url(\"' + theme.previewImage + '\")';\n\t\tcontainer.style.backgroundSize = 'cover';\n\t}\n\telse\n\t{\n\t\tcontainer.style.removeProperty('backgroundImage');\n\t\tcontainer.style.removeProperty('backgroundSize');\n\t\tcontainer.style.background = 'none';\n\t}\n\n\tif (Type.isStringFilled(theme.previewColor))\n\t{\n\t\tcontainer.style.backgroundColor = theme.previewColor;\n\t}\n}\n","import { Event, Loc, Tag, Dom, Type } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { SettingsField } from \"ui.form-elements.field\";\nimport { BaseField } from 'ui.form-elements.view';\nimport { Ears } from 'ui.ears'\nimport { setPortalSettings, setPortalThemeSettings } from './site-utils';\n\n\nexport type SiteThemeOptions = {\n\tid: string, //light:custom_123,\n\tcss: ?Array,\n\tprefetchImages: ?Array,\n\tpreviewImage:  ?string,\n\twidth:  number,\n\theight:  number,\n\tpreviewColor: string, // \"#004982\",\n\tstyle: string,\n\n\tdefault: ?boolean,\n\tresizable: boolean,\n\tremovable: boolean,\n};\n\nexport type SiteThemePickerOptions = {\n\ttheme: SiteThemeOptions,\n\tthemes: SiteThemeOptions[],\n\tbaseThemes: Object,\n\tajaxHandlerPath: string,\n\tallowSetDefaultTheme: boolean,\n\tisVideo: boolean\n};\n\nclass ThemePickerElement extends BaseField\n{\n\t#themePicker: BX.Intranet.Bitrix24.ThemePicker;\n\n\tconstructor(themePickerSettings: SiteThemePickerOptions)\n\t{\n\t\tsuper({\n\t\t\tinputName: 'themeId',\n\t\t\tisEnable: themePickerSettings.allowSetDefaultTheme,\n\t\t\tbannerCode: 'limit_office_background_to_all',\n\t\t});\n\t\tthis.#initThemePicker(themePickerSettings);\n\n\t\tthis.applyTheme();\n\t}\n\n\t#initThemePicker(themePickerSettings: SiteThemePickerOptions)\n\t{\n\t\tthis.#themePicker = new BX.Intranet.Bitrix24.ThemePicker(themePickerSettings);\n\t\tthis.#themePicker.setThemes(themePickerSettings.themes);\n\t\tthis.#themePicker.setBaseThemes(themePickerSettings.baseThemes);\n\t\tthis.#themePicker.applyThemeAssets = () => {};\n\t\tthis.#themePicker.getContentContainer = () => {\n\t\t\treturn this.render().querySelector('div[data-role=\"theme-container\"]');\n\t\t};\n\n\t\tconst closure = this.#themePicker.handleRemoveBtnClick.bind(this.#themePicker);\n\t\tthis.#themePicker.handleRemoveBtnClick = (event: Event) => {\n\t\t\tconst item = this.#themePicker.getItemNode(event);\n\t\t\tif (!item)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tclosure(event);\n\t\t\tthis.applyPortalThemePreview(this.#themePicker.getTheme(this.#themePicker.getThemeId()));\n\t\t\tthis.showSaveButton();\n\t\t\t//TODO Shift all <td>\n\t\t};\n\n\t\tconst handleItemClick = this.#themePicker.handleItemClick.bind(this.#themePicker);\n\t\tthis.#themePicker.handleItemClick = (event: Event) => {\n\t\t\thandleItemClick(event);\n\t\t\tthis.applyTheme(event);\n\t\t};\n\n\t\tconst addItem = this.#themePicker.addItem.bind(this.#themePicker);\n\t\tthis.#themePicker.addItem = (theme) => {\n\t\t\taddItem(theme);\n\t\t\tthis.applyPortalThemePreview(theme);\n\t\t\tthis.showSaveButton();\n\t\t}\n\t}\n\n\tapplyTheme(event: ?Event)\n\t{\n\t\tconst themeNode = event ? this.#themePicker.getItemNode(event) : null;\n\t\tlet themeSettings = themeNode ?\n\t\t\tthis.#themePicker.getTheme(themeNode.dataset.themeId)\n\t\t\t: this.#themePicker.getAppliedTheme()\n\t\t;\n\t\tthis.applyPortalThemePreview(themeSettings);\n\n\t\tif (event)\n\t\t{\n\t\t\tEventEmitter.emit(\n\t\t\t\tEventEmitter.GLOBAL_TARGET,\n\t\t\t\t'BX.Intranet.Settings:ThemePicker:Change',\n\t\t\t\tthemeSettings\n\t\t\t);\n\n\t\t\tthis.showSaveButton();\n\t\t}\n\t}\n\n\tapplyPortalThemePreview(theme)\n\t{\n\t\tconst container = this.render().querySelector('[data-role=\"preview\"]');\n\t\tsetPortalThemeSettings(container, theme);\n\t\tthis.getInputNode().value = Type.isPlainObject(theme) ? theme['id'] : '';\n\t}\n\n\tshowSaveButton()\n\t{\n\t\tthis.getInputNode().disabled = false;\n\t\tthis.getInputNode().form.dispatchEvent(new window.Event('change'));\n\t}\n\n\tgetValue(): string\n\t{\n\t\treturn this.getInputNode().value;\n\t}\n\n\tgetInputNode(): HTMLInputElement\n\t{\n\t\treturn this.render().querySelector('input[name=\"themeId\"]');\n\t}\n\n\tapplyPortalSettings()\n\t{\n\n\t}\n\n\trenderContentField(): HTMLElement\n\t{\n\t\tdocument.querySelector('.ui-side-panel-content').style.overflow = 'hidden';\n\n\t\tconst container = Tag.render`\n\t\t<div class=\"intranet-theme-settings\">\n\t\t\t<div class=\"ui-section__row theme-dialog-preview\">\n\t\t\t\t<section data-role=\"preview\" style=\"background-color: #0a51ae;\" class=\"intranet-settings__main-widget_section --preview\">\n\t\t\t\t\t<div class=\"intranet-settings__main-widget__bang\"></div>\n\t\t\t\t\t<aside class=\"intranet-settings__main-widget__aside\">\n\t\t\t\t\t\t<div class=\"intranet-settings__main-widget__aside_item --active\"></div>\n\t\t\t\t\t\t<div class=\"intranet-settings__main-widget__aside_item\"></div>\n\t\t\t\t\t\t<div class=\"intranet-settings__main-widget__aside_item\"></div>\n\t\t\t\t\t\t<div class=\"intranet-settings__main-widget__aside_item\"></div>\n\t\t\t\t\t\t<div class=\"intranet-settings__main-widget__aside_item\"></div>\n\t\t\t\t\t</aside>\n\t\t\t\t\t<main class=\"intranet-settings__main-widget_main\">\n\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_header --with-logo\">\n\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_header_left\">\n\t\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_logo\" data-role=\"logo\"></div>\n\t\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_name\" data-role=\"title\">Bitrix</div>\n\t\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_logo24\" data-role=\"logo24\">24</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_header_right\">\n\t\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_lane_item\"></div>\n\t\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_lane_item\"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_lane_box\">\n\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_lane_item\"></div>\n\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_lane_inline --space-between\">\n\t\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_lane_item --sm\"></div>\n\t\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_lane_item --bg-30\"></div>\n\t\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_lane_item --square\"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_lane_inner\">\n\t\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_lane_item\"></div>\n\t\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_lane_item --bg-30\"></div>\n\t\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_lane_item --bg-30\"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</main>\n\t\t\t\t\t<aside class=\"intranet-settings__main-widget__aside --right-side\">\n\t\t\t\t\t\t<div class=\"intranet-settings__main-widget__aside_item --active\"></div>\n\t\t\t\t\t\t<div class=\"intranet-settings__main-widget__aside_item\"></div>\n\t\t\t\t\t\t<div class=\"intranet-settings__main-widget__aside_item\"></div>\n\t\t\t\t\t\t<div class=\"intranet-settings__main-widget__aside_item\"></div>\n\t\t\t\t\t\t<div class=\"intranet-settings__main-widget__aside_item\"></div>\n\t\t\t\t\t</aside>\n\t\t\t\t</section>\n\t\t\t</div>\n\t\t\t<div class=\"ui-section__row theme-dialog-content\" data-role=\"theme-container\"></div>\n\t\t\t<input type=\"hidden\" name=\"themeId\" value=\"\" disabled>\n\t\t</div>\n\t\t`;\n\t\tconst uploadBtn = Tag.render`\n\t\t\t<div class=\"intranet-settings__theme-btn_box\">\n\t\t\t\t<div class=\"intranet-settings__theme-btn\" onclick=\"${this.handleNewThemeButtonClick.bind(this)}\">${Loc.getMessage('INTRANET_SETTINGS_THEME_UPLOAD_BTN')}</div>\n\t\t\t</div>\n\t\t`;\n\t\tconst themeContainer = container.querySelector('div[data-role=\"theme-container\"]');\n\t\tArray.from(this.#themePicker.getThemes()).forEach((theme) => {\n\t\t\tconst itemNode = this.#themePicker.createItem(theme);\n\t\t\tif (this.#themePicker.canSetDefaultTheme() !== true)\n\t\t\t{\n\t\t\t\tEvent.unbindAll(itemNode, 'click');\n\t\t\t\tif (theme['default'] !== true)\n\t\t\t\t{\n\t\t\t\t\tDom.addClass(itemNode, '--restricted');\n\t\t\t\t\titemNode.appendChild(\n\t\t\t\t\t\tTag.render `<div class=\"intranet-settings__theme_lock_box\">${this.renderLockElement()}</div>`\n\t\t\t\t\t);\n\t\t\t\t\tEvent.bind(itemNode, 'click', this.showBanner.bind(this));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (theme['default'] === true)\n\t\t\t{\n\t\t\t\titemNode.setAttribute('data-role', 'ui-ears-active');\n\t\t\t}\n\t\t\tthemeContainer.appendChild(itemNode);\n\t\t});\n\t\t(new Ears({\n\t\t\tcontainer: themeContainer,\n\t\t\tnoScrollbar: false\n\t\t})).init();\n\n\t\tcontainer.appendChild(uploadBtn);\n\n\t\treturn container;\n\t}\n\n\thandleNewThemeButtonClick(event)\n\t{\n\t\tif (this.#themePicker.canSetDefaultTheme() !== true)\n\t\t{\n\t\t\treturn this.showBanner();\n\t\t}\n\t\tthis.#themePicker.getNewThemeDialog().show();\n\t}\n\n\thandleLockButtonClick()\n\t{\n\t\tif (BX.getClass(\"BX.UI.InfoHelper\"))\n\t\t{\n\t\t\tBX.UI.InfoHelper.show(\"limit_office_background_to_all\");\n\t\t}\n\t}\n}\n\nexport class SiteThemePickerField extends SettingsField\n{\n\t#fieldView: ThemePickerElement;\n\n\tconstructor(params)\n\t{\n\t\tparams.fieldView = new ThemePickerElement(params.themePickerSettings);\n\t\tsuper(params);\n\n\t\tif (params.portalSettings)\n\t\t{\n\t\t\tthis.setEventNamespace('BX.Intranet.Settings');\n\n\n\t\t\tsetPortalSettings(this.getFieldView().render(), params.portalSettings);\n\t\t\tEventEmitter.subscribe(\n\t\t\t\tEventEmitter.GLOBAL_TARGET,\n\t\t\t\tthis.getEventNamespace() + ':Portal:Change',\n\t\t\t\t(baseEvent: BaseEvent) => {\n\t\t\t\t\tsetPortalSettings(this.getFieldView().render(), baseEvent.getData());\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t}\n}\n","import { Event, Loc, Tag } from 'main.core';\nimport { SettingsField, BaseSettingsElement } from \"ui.form-elements.field\";\nimport { TextInput } from \"ui.form-elements.view\";\n\nimport { BaseEvent, EventEmitter } from 'main.core.events';\nimport { StackWidget } from 'ui.uploader.stack-widget';\nimport { SiteThemePickerOptions } from './site-theme-picker-field';\n\nexport type SiteLogoOptions = {\n\tid: string,\n\tsrc: string,\n\twidth: number,\n\theight: number\n};\n\nexport type SiteLogoFieldType = {\n\tparent: BaseSettingsElement,\n\tsiteLogoOptions: ?SiteLogoOptions,\n\tcanUserEditLogo: boolean\n};\n\n\nclass HiddenInput extends TextInput\n{\n\tconstructor(params)\n\t{\n\t\tsuper({\n\t\t\tinputName: 'logo',\n\t\t\tisEnable: params.isEnable,\n\t\t\tdefaultValue: 'default',\n\t\t\tbannerCode: 'limit_admin_logo',\n\t\t\thelpDeskCode: 123,\n\t\t\thelpMessageProvider: () => {}\n\t\t});\n\t\tthis.getInputNode().type = 'hidden';\n\t\tthis.getInputNode().disabled = true;\n\t}\n\n\trenderContentField(): HTMLElement\n\t{\n\t\treturn this.getInputNode();\n\t}\n}\n\nexport class SiteLogoField extends SettingsField\n{\n\t#content: HTMLElement;\n\t#uploader: StackWidget;\n\t#siteLogo: ?SiteLogoOptions;\n\n\t#hiddenContainer: HTMLElement;\n\t#hiddenRemoveInput: HTMLElement;\n\n\tconstructor(params: SiteLogoFieldType)\n\t{\n\t\tparams.fieldView = new HiddenInput({\n\t\t\tisEnable: params.canUserEditLogo,\n\t\t});\n\t\tsuper(params);\n\t\tthis.#siteLogo = params.siteLogoOptions;\n\n\t\tthis.setEventNamespace('BX.Intranet.Settings');\n\t}\n\n\tinitUploader({TileWidget, StackWidget, StackWidgetSize}): this\n\t{\n\t\tconst defaultOptions = {\n\t\t\tmaxFileCount: 1,\n\t\t\tacceptOnlyImages: true,\n\t\t\tmultiple: false,\n\t\t\tacceptedFileTypes: ['image/png'],\n\t\t\tevents: {\n\t\t\t\t'onError': function(event) {\n\t\t\t\t\tconsole.error('File Uploader onError', event.getData().error);\n\t\t\t\t},\n\t\t\t\t'File:onError': this.onFileError.bind(this),\n\t\t\t\t'File:onAdd': this.onLogoAdd.bind(this),\n\t\t\t\t'File:onRemove': this.onLogoRemove.bind(this),\n\t\t\t\t'onBeforeFilesAdd': this.getFieldView().isEnable() ? () => {\n\t\t\t\t} : (event: BaseEvent) => {\n\t\t\t\t\tthis.getFieldView().showBanner();\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tallowReplaceSingle: true,\n\t\t\thiddenFieldName: 'logo_file',\n\t\t\thiddenFieldsContainer: this.#getFileContainer(),\n\t\t\tassignAsFile: true,\n\n\t\t\t// imageMaxWidth: 444,\n\t\t\t// imageMaxHeight: 110,\n\n\t\t\t// imageMaxFileSize?: number,\n\t\t\t// imageMinFileSize?: number,\n\n\t\t\timageResizeWidth: 444,\n\t\t\timageResizeHeight: 110,\n\t\t\timageResizeMode: 'contain',\n\t\t\timageResizeMimeType: 'image/png',\n\n\t\t\timagePreviewWidth: 444,\n\t\t\timagePreviewHeight: 110,\n\t\t\timagePreviewResizeMode: 'contain',\n\n\t\t\t// serverOptions: ServerOptions,\n\t\t\t// filters?: Array<{ type: FilterType, filter: Filter | Function | string, options: { [key: string]: any } }>,\n\t\t\tfiles: this.#siteLogo ? [\n\t\t\t\t[1, {\n\t\t\t\t\tserverFileId: this.#siteLogo.id,\n\t\t\t\t\tserverId: this.#siteLogo.id,\n\t\t\t\t\ttype: 'image/png',\n\n\t\t\t\t\twidth: this.#siteLogo.width,\n\t\t\t\t\theight: this.#siteLogo.height,\n\t\t\t\t\ttreatImageAsFile: true,\n\t\t\t\t\tdownloadUrl: this.#siteLogo.src,\n\n\t\t\t\t\tserverPreviewUrl: this.#siteLogo.src,\n\t\t\t\t\tserverPreviewWidth: this.#siteLogo.width,\n\t\t\t\t\tserverPreviewHeight: this.#siteLogo.height,\n\n\t\t\t\t\tsrc: this.#siteLogo.src,\n\t\t\t\t\tpreload: true\n\t\t\t\t}]\n\t\t\t] : null,\n\t\t};\n\t\tthis.#uploader = new StackWidget(defaultOptions, {size: StackWidgetSize.LARGE });\n\t\treturn this;\n\t}\n\n\tonFileError(event): void\n\t{\n\t\tconsole.error('File Error', event.getData().error);\n\t\tEventEmitter.subscribeOnce(\n\t\t\tEventEmitter.GLOBAL_TARGET,\n\t\t\tthis.getEventNamespace() + ':onAfterShowPage',\n\t\t\tthis.removeFailedLogo.bind(this),\n\t\t);\n\n\t\tconst tabField = this.getParentElement();\n\n\t\tif (tabField)\n\t\t{\n\t\t\tEventEmitter.subscribeOnce(\n\t\t\t\ttabField.getFieldView(),\n\t\t\t\t'onActive',\n\t\t\t\tthis.removeFailedLogo.bind(this),\n\t\t\t);\n\t\t}\n\t}\n\n\tremoveFailedLogo(): void\n\t{\n\t\tconst logo = this.#uploader.getUploader().getFiles()[0];\n\n\t\tif (logo && logo.isLoadFailed())\n\t\t{\n\t\t\tthis.#uploader.getUploader().removeFiles();\n\t\t}\n\t}\n\n\tonLogoAdd(event: BaseEvent)\n\t{\n\t\tEventEmitter.emit(\n\t\t\tEventEmitter.GLOBAL_TARGET,\n\t\t\tthis.getEventNamespace() + ':Portal:Change',\n\t\t\tnew BaseEvent({ data: { logo: { src: event.getData().file.getClientPreviewUrl() } } })\n\t\t);\n\n\t\tthis.getFieldView().getInputNode().disabled = false;\n\t\tthis.getFieldView().getInputNode().value = 'add';\n\t\tthis.getFieldView().getInputNode().form.dispatchEvent(new window.Event('change'));\n\t}\n\n\tonLogoRemove(event: BaseEvent)\n\t{\n\t\tEventEmitter.emit(\n\t\t\tEventEmitter.GLOBAL_TARGET,\n\t\t\tthis.getEventNamespace() + ':Portal:Change',\n\t\t\tnew BaseEvent({ data: { logo: null } })\n\t\t);\n\t\tthis.getFieldView().getInputNode().disabled = false;\n\t\tthis.getFieldView().getInputNode().value = 'remove';\n\t\tthis.getFieldView().getInputNode().form.dispatchEvent(new window.Event('change'));\n\t}\n\n\tgetName(): string\n\t{\n\t\treturn 'logo';\n\t}\n\n\tcancel(): void\n\t{\n\t}\n\n\t#getFileContainer(): HTMLElement\n\t{\n\t\tif (!this.#hiddenContainer)\n\t\t{\n\t\t\tthis.#hiddenContainer = document.createElement('div');\n\t\t}\n\t\treturn this.#hiddenContainer;\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tif (this.#content)\n\t\t{\n\t\t\treturn this.#content;\n\t\t}\n\t\tconst uploaderContent = Tag.render`<div>Logo is there</div>`;\n\t\tthis.#content = Tag.render`<div>\n\t\t\t\t<div class=\"ui-section__field-label\">${Loc.getMessage('INTRANET_SETTINGS_SECTION_TAB_TITLE_WIDGET_LOGO_TITLE1')}</div>\n\t\t\t\t${uploaderContent}\n\t\t\t\t<div class=\"ui-section__field-label\">${Loc.getMessage('INTRANET_SETTINGS_SECTION_TAB_TITLE_WIDGET_LOGO_TITLE2')}</div>\n\t\t\t\t${this.getFieldView().getInputNode()}\n\t\t\t\t${this.#getFileContainer()}\n\t\t\t\t${this.getFieldView().renderErrors()}\n\t\t\t</div>`\n\t\t;\n\t\tthis.#uploader.renderTo(uploaderContent);\n\n\t\treturn this.#content;\n\t}\n}\n","import { Tag } from 'main.core';\nimport {EventEmitter, BaseEvent} from \"main.core.events\";\nimport { setPortalSettings, setPortalThemeSettings } from './site-utils';\n\nexport class SiteTitlePreviewWidget extends EventEmitter\n{\n\t#container: HTMLElement\n\n\tconstructor(portalSettings, portalThemeSettings)\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Intranet.Settings');\n\n\t\tsetPortalSettings(this.render(), portalSettings);\n\n\t\tEventEmitter.subscribe(\n\t\t\tEventEmitter.GLOBAL_TARGET,\n\t\t\tthis.getEventNamespace() + ':Portal:Change',\n\t\t\tthis.onChange.bind(this)\n\t\t);\n\n\t\tif (portalThemeSettings)\n\t\t{\n\t\t\tsetPortalThemeSettings(this.render(), portalThemeSettings?.theme);\n\t\t\tEventEmitter.subscribe(\n\t\t\t\tEventEmitter.GLOBAL_TARGET,\n\t\t\t\tthis.getEventNamespace() + ':ThemePicker:Change',\n\t\t\t\tthis.onSetTheme.bind(this)\n\t\t\t);\n\t\t}\n\t}\n\n\tonChange(event: BaseEvent)\n\t{\n\t\tsetPortalSettings(this.render(), event.getData());\n\t}\n\n\tonSetTheme(baseEvent: BaseEvent)\n\t{\n\t\tsetPortalThemeSettings(this.render(), baseEvent.getData())\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tif (!this.#container)\n\t\t{\n\t\t\tthis.#container = Tag.render`\n\t\t\t<section class=\"intranet-settings__main-widget_section\">\n\t\t\t\t<div class=\"intranet-settings__main-widget__bang\"></div>\n\t\t\t\t\t<div class=\"intranet-settings__main-widget_bg\"></div>\n\t\t\t\t\t<div class=\"intranet-settings__main-widget_pos-box\">\n\t\t\t\t\t\t<aside class=\"intranet-settings__main-widget__aside\">\n\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget__aside_item --active\"></div>\n\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget__aside_item\"></div>\n\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget__aside_item\"></div>\n\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget__aside_item\"></div>\n\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget__aside_item\"></div>\n\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget__aside_item\"></div>\n\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget__aside_item\"></div>\n\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget__aside_item\"></div>\n\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget__aside_item\"></div>\n\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget__aside_item\"></div>\n\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget__aside_item\"></div>\n\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget__aside_item\"></div>\n\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget__aside_item\"></div>\n\t\t\t\t\t\t</aside>\n\t\t\t\t\t\t<main class=\"intranet-settings__main-widget_main\">\n\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_header\"> \n\t\t\t\t\t\t<!-- statement class. depends of content --with-logo -->\n\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_logo\" data-role=\"logo\"></div>\n\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_name\" data-role=\"title\">Bitrix</div>\n\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_logo24\" data-role=\"logo24\">24</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_lane_box\">\n\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_lane_item\"></div>\n\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_lane_inline\">\n\t\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_lane_item --sm\"></div>\n\t\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_lane_item --bg-30\"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_lane_inner\">\n\t\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_lane_item\"></div>\n\t\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_lane_item --bg-30\"></div>\n\t\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_lane_item --bg-30\"></div>\n\t\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_lane_item --bg-30\"></div>\n\t\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_lane_item --bg-30\"></div>\n\t\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_lane_item --bg-30\"></div>\n\t\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_lane_item --bg-30\"></div>\n\t\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_lane_item --bg-30\"></div>\n\t\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_lane_item --bg-30\"></div>\n\t\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_lane_item --bg-30\"></div>\n\t\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_lane_item --bg-30\"></div>\n\t\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_lane_item --bg-30\"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</main>\n\t\t\t\t\t</div>\t\t\t\t\n\t\t\t</section>`;\n\t\t}\n\n\t\treturn this.#container;\n\t}\n}\n","import { BaseEvent, EventEmitter } from 'main.core.events';\nimport { AnalyticSettingsEvent } from '../analytic';\nimport { SiteTitleField } from '../fields/site-title-field';\nimport { SiteDomainField } from '../fields/site-domain-field';\nimport { SiteLogoField } from '../fields/site-logo-field';\nimport { SettingsSection, SettingsRow, TabsField, TabField, SettingsField, BaseSettingsPage } from 'ui.form-elements.field';\nimport { TextInput } from 'ui.form-elements.view';\nimport { SiteTitlePreviewWidget } from '../fields/site-title-preview-widget';\nimport { SiteThemePickerField } from '../fields/site-theme-picker-field';\nimport { setPortalSettings, setPortalThemeSettings } from '../fields/site-utils';\n\nimport { Tag, Loc, Runtime, Text, Dom, Type, Event } from 'main.core';\nimport 'ui.icon-set.main';\nimport 'ui.icon-set.actions';\n\nimport 'ui.icon-set.social';\nimport { Section, Row } from 'ui.section';\nimport 'ui.forms';\nimport { Alert, AlertColor, AlertSize } from 'ui.alerts';\n\nimport type { SiteDomainType } from '../fields/site-domain-field';\nimport type { SiteTitleInputType } from '../fields/site-title-field';\nimport type { SiteThemeOptions, SiteThemePickerOptions } from '../fields/site-theme-picker-field';\n\nexport class PortalPage extends BaseSettingsPage\n{\n\tconstructor() {\n\t\tsuper();\n\t\tthis.titlePage = Loc.getMessage('INTRANET_SETTINGS_TITLE_PAGE_PORTAL');\n\t\tthis.descriptionPage = Loc.getMessage('INTRANET_SETTINGS_DESCRIPTION_PAGE_PORTAL');\n\n\t\tEventEmitter.subscribe(\n\t\t\tEventEmitter.GLOBAL_TARGET,\n\t\t\tthis.getEventNamespace() + ':Portal:Change',\n\t\t\t(baseEvent: BaseEvent) => {\n\t\t\t\tif (!Type.isNil(baseEvent.data.title))\n\t\t\t\t{\n\t\t\t\t\tthis.getAnalytic()?.addEventConfigPortal(AnalyticSettingsEvent.CHANGE_PORTAL_NAME);\n\t\t\t\t}\n\t\t\t\telse if (!Type.isNil(baseEvent.data.logo))\n\t\t\t\t{\n\t\t\t\t\tthis.getAnalytic()?.addEventConfigPortal(AnalyticSettingsEvent.CHANGE_PORTAL_LOGO);\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t\t//BX.Intranet.Settings:ThemePicker:Change\n\t\tEventEmitter.subscribe(\n\t\t\tEventEmitter.GLOBAL_TARGET,\n\t\t\tthis.getEventNamespace() + ':ThemePicker:Change',\n\t\t\t(baseEvent: BaseEvent) => {\n\t\t\t\tthis.getAnalytic()?.addEventConfigPortal(AnalyticSettingsEvent.CHANGE_PORTAL_THEME);\n\t\t\t}\n\t\t);\n\t}\n\n\tgetType(): string\n\t{\n\t\treturn 'portal';\n\t}\n\n\theaderWidgetRender()\n\t{\n\t\treturn '';\n\t\t// It is used to return #headerWidgetRenderAlternative;\n\t}\n\n\t//TODO delete after autumn 2023\n\t#headerWidgetRenderAlternative()\n\t{\n\t\tif (!this.hasValue('portalSettings'))\n\t\t{\n\t\t\treturn '';\n\t\t}\n\n\t\tconst portalSettings = this.getValue('portalSettings');\n\t\tconst portalThemeSettings = this.getValue('portalThemeSettings');\n\t\tconst portalDomainSettings = this.getValue('portalDomainSettings');\n\n\t\tconst container = Tag.render`\n\t\t<div class=\"intranet-settings__header-widget_box\">\n\t\t\t<div class=\"intranet-settings__header-widget_main\">\n\t\t\t\t<div class=\"intranet-settings__header-widget_icon\" data-role=\"logo\"></div>\n\t\t\t\t<div class=\"intranet-settings__header-widget_name\" data-role=\"title\">Bitrix</div>\n\t\t\t\t<div class=\"intranet-settings__header-widget_logo24\" data-role=\"logo24\">24</div>\n\t\t\t</div>\n\t\t\t<div class=\"intranet-settings__header-widget__link_box\">\n\t\t\t\t<div class=\"intranet-settings__header-widget__link_value\">${Text.encode(portalDomainSettings.hostname)}</div>\n\t\t\t\t<div data-role=\"copy\" class=\"ui-icon-set --link-3 intranet-settings__header-widget__link_btn\"></div>\n\t\t\t</div>\n\t\t</div>`;\n\n\t\tsetPortalSettings(container, portalSettings);\n\t\tsetPortalThemeSettings(container, portalThemeSettings?.theme);\n\n\t\tconst copyButton = container.querySelector('[data-role=\"copy\"]');\n\t\tBX.clipboard.bindCopyClick(copyButton, {text: () => {\n\t\t\t\treturn portalDomainSettings.hostname;\n\t\t\t}})\n\t\t;\n\n\t\treturn container;\n\t}\n\n\tgetSections(): SettingsSection[]\n\t{\n\t\treturn [\n\t\t\tthis.buildSiteTitleSection(\n\t\t\t\tthis.getValue('portalSettings'), this.getValue('portalThemeSettings')\n\t\t\t),\n\t\t\tthis.getValue('portalDomainSettings') ?\n\t\t\t\tthis.buildDomainSection(this.getValue('portalDomainSettings')) : null,\n\t\t\tthis.buildThemeSection(this.getValue('portalThemeSettings'), this.getValue('portalSettings'))\n\t\t].filter((section) => section instanceof SettingsSection);\n\t}\n\n\tbuildSiteTitleSection(portalSettings: SiteTitleInputType, portalThemeSettings: SiteThemePickerOptions): SettingsSection\n\t{\n\t\tconst sectionView = new Section({\n\t\t\ttitle: Loc.getMessage('INTRANET_SETTINGS_SECTION_TITLE_SITE_TITLE'),\n\t\t\ttitleIconClasses: 'ui-icon-set --pencil-draw',\n\t\t\tisOpen: true,\n\t\t\t// isEnable: this.getValue('IP_ACCESS_RIGHTS_ENABLED'),\n\t\t\tbannerCode: 'ip_access_rights_lock',\n\t\t});\n\n\t\tconst sectionField = new SettingsSection({\n\t\t\tparent: this,\n\t\t\tsection: sectionView,\n\t\t});\n\t\t// 1. This is a description on blue box\n\t\tsectionView.append(\n\t\t\t(new Row({\n\t\t\t\tcontent: (new Alert({\n\t\t\t\t\ttext: Loc.getMessage('INTRANET_SETTINGS_SECTION_TITLE_SITE_TITLE_DESCRIPTION'),\n\t\t\t\t\tinline: true,\n\t\t\t\t\tsize: AlertSize.SMALL,\n\t\t\t\t\tcolor: AlertColor.PRIMARY,\n\t\t\t\t})).getContainer(),\n\t\t\t})).render())\n\t\t;\n\n\t\t//region 2. Tabs\n\t\tconst previewWidget = new SiteTitlePreviewWidget(portalSettings, portalThemeSettings);\n\n\t\tconst tabsField = new TabsField({parent: sectionField});\n\t\tconst siteNameRow = new Row({});\n\t\t// 2.1 Tab Site name\n\t\tconst siteTitleTab = new TabField({\n\t\t\tparent: tabsField,\n\t\t\ttabsOptions: {\n\t\t\t\thead: { title: Loc.getMessage('INTRANET_SETTINGS_SECTION_TITLE_SITE_TITLE') },\n\t\t\t\tbody: () => {\n\t\t\t\t\tconst siteTitleField = new SiteTitleField({\n\t\t\t\t\t\tparent: siteTitleTab,\n\t\t\t\t\t\tsiteTitleOptions: portalSettings,\n\t\t\t\t\t\thelpMessages: {\n\t\t\t\t\t\t\tsite: this.helpMessageProviderFactory(),\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\treturn siteTitleField.render();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tconst siteLogoTab = new TabField({\n\t\t\tparent: tabsField,\n\t\t\ttabsOptions: {\n\t\t\t\trestricted: this.getValue('portalSettings').canUserEditLogo === false,\n\t\t\t\tbannerCode: 'limit_admin_logo',\n\t\t\t\thead: Loc.getMessage('INTRANET_SETTINGS_SECTION_TAB_TITLE_WIDGET_LOGO'),\n\t\t\t\tbody: new Promise((resolve, reject) =>\n\t\t\t\t{\n\t\t\t\t\tRuntime\n\t\t\t\t\t\t.loadExtension('ui.uploader.stack-widget')\n\t\t\t\t\t\t.then((exports) => {\n\t\t\t\t\t\t\t\tconst siteLogoField = new SiteLogoField({\n\t\t\t\t\t\t\t\t\tparent: siteTitleTab,\n\t\t\t\t\t\t\t\t\tsiteLogoOptions: this.getValue('portalSettings').logo,\n\t\t\t\t\t\t\t\t\tcanUserEditLogo: this.getValue('portalSettings').canUserEditLogo,\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tsiteLogoField.initUploader(exports);\n\t\t\t\t\t\t\t\tresolve(siteLogoField.render());\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t);\n\t\t\t\t}),\n\n\t\t\t}\n\t\t});\n\t\ttabsField.activateTab(siteTitleTab);\n\t\t// 2.2 Widget\n\t\tsectionView.append(siteNameRow.render());\n\t\tsiteNameRow.append(\n\t\t\tTag.render`\n\t\t\t<div class=\"intranet-settings__grid_box\">\n\t\t\t\t<input type=\"hidden\" name=\"justToBeThere\" value=\"ofCourse\" />\n\t\t\t\t<div data-role=\"title-container\" class=\"intranet-settings__grid_item\"></div>\n\t\t\t\t<div class=\"intranet-settings__grid_item\">${previewWidget.render()}</div>\n\t\t\t</div>`);\n\t\tsetTimeout(() => {\n\t\t\tsiteNameRow\n\t\t\t\t.render()\n\t\t\t\t.querySelector('div[data-role=\"title-container\"]')\n\t\t\t\t.appendChild(tabsField.render())\n\t\t\t;\n\t\t}, 0);\n\t\t// 2.3 site_name\n\n\t\tnew SettingsRow({\n\t\t\trow: new Row({\n\t\t\t\tseparator: 'top',\n\t\t\t\tclassName: '--block',\n\t\t\t}),\n\t\t\tparent: sectionField,\n\t\t\tchild: new SettingsField({\n\t\t\t\tfieldView: (new TextInput({\n\t\t\t\t\tinputName: 'name',\n\t\t\t\t\tlabel: Loc.getMessage('INTRANET_SETTINGS_SECTION_TITLE_SITE_NAME'),\n\t\t\t\t\tvalue: this.getValue('portalSettings').name,\n\t\t\t\t\tplaceholder: window.document.location.hostname,\n\t\t\t\t\tinputDefaultWidth: true,\n\t\t\t\t})),\n\t\t\t}),\n\t\t});\n\n\t\t//endregion\n\t\treturn sectionField;\n\t}\n\n\tbuildDomainSection(domainSettings: SiteDomainType): SettingsSection\n\t{\n\t\tconst sectionView = new Section({\n\t\t\ttitle: Loc.getMessage('INTRANET_SETTINGS_SECTION_TITLE_SITE_DOMAIN'),\n\t\t\ttitleIconClasses: 'ui-icon-set --globe',\n\t\t\tisOpen: false,\n\t\t});\n\t\tconst sectionField = new SettingsSection({\n\t\t\tparent: this,\n\t\t\tsection: sectionView\n\t\t});\n\t\t// 1. This is a description on blue box\n\t\tsectionView.append(\n\t\t\t(new Row({\n\t\t\t\tcontent: (new Alert({\n\t\t\t\t\ttext: `\n\t\t\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_SECTION_TITLE_SITE_DOMAIN_DESCRIPTION')}\n\t\t\t\t\t\t<a class=\"ui-section__link\" onclick=\"top.BX.Helper.show('redirect=detail&code=18213298')\">\n\t\t\t\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_CANCEL_MORE')}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t`,\n\t\t\t\t\tinline: true,\n\t\t\t\t\tsize: AlertSize.SMALL,\n\t\t\t\t\tcolor: AlertColor.PRIMARY,\n\t\t\t\t})).getContainer(),\n\t\t\t})).render())\n\t\t;\n\n\t\t//region 2. Tabs\n\t\tconst tabsField = new TabsField({parent: sectionField});\n\t\t// 2.1 Tab Site name\n\t\tconst firstTab = new TabField({\n\t\t\tparent: tabsField,\n\t\t\ttabsOptions: {\n\t\t\t\thead: { title: Loc.getMessage('INTRANET_SETTINGS_SECTION_DOMAIN_NAME1') },\n\t\t\t\tbody: () => {\n\t\t\t\t\tconst siteDomainField = new SiteDomainField({\n\t\t\t\t\t\tparent: firstTab,\n\t\t\t\t\t\tsiteDomainOptions: domainSettings,\n\t\t\t\t\t\thelpMessages: {\n\t\t\t\t\t\t\tsite: this.helpMessageProviderFactory(),\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tEvent.bind(siteDomainField.getFieldView().getInputNode(), 'keydown', () => {\n\t\t\t\t\t\tthis.getAnalytic()?.addEventConfigPortal(AnalyticSettingsEvent.CHANGE_PORTAL_SITE);\n\t\t\t\t\t});\n\n\t\t\t\t\treturn siteDomainField.render();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tnew TabField({\n\t\t\tparent: tabsField,\n\t\t\ttabsOptions: {\n\t\t\t\trestricted: domainSettings.isCustomizable === false,\n\t\t\t\tbannerCode: 'limit_office_own_domain',\n\t\t\t\thead: Loc.getMessage('INTRANET_SETTINGS_SECTION_DOMAIN_NAME2'),\n\t\t\t\tbody: () => {\n\t\t\t\t\tconst copyButton = Tag.render`<div class=\"ui-icon-set --copy-plates intranet-settings__domain__list_btn\"></div>`;\n\t\t\t\t\tBX.clipboard.bindCopyClick(copyButton, {text: () => {\n\t\t\t\t\t\t\treturn Loc.getMessage('INTRANET_SETTINGS_OWN_DOMAIN_HELP_DNS').replaceAll('<br>', \"\\n\");\n\t\t\t\t\t\t}});\n\n\t\t\t\t\tconst res = Tag.render\n\t\t\t\t\t\t`<div class=\"intranet-settings__domain__list_box\">\n\t\t\t\t\t\t<ul class=\"intranet-settings__domain__list\">\n\t\t\t\t\t\t\t<li class=\"intranet-settings__domain__list_item\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_OWN_DOMAIN_HELP1')}\n\t\t\t\t\t\t\t\t<div class=\"intranet-settings__domain_box\">\n\t\t\t\t\t\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_OWN_DOMAIN_HELP_DNS')}\n\t\t\t\t\t\t\t\t\t${copyButton}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li class=\"intranet-settings__domain__list_item\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_OWN_DOMAIN_HELP2')}\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li class=\"intranet-settings__domain__list_item\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_OWN_DOMAIN_HELP3')}\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t<a target=\"_blank\" href=\"/settings/support.php\" class=\"settings-tools-description-link\">${Loc.getMessage('INTRANET_SETTINGS_WRITE_TO_SUPPORT')}</a>\n\t\t\t\t\t</div>`;\n\n\t\t\t\t\tif (domainSettings.isCustomizable !== true)\n\t\t\t\t\t{\n\t\t\t\t\t\tEvent.bind(res.querySelector('a.settings-tools-description-link'), 'click', (event) => {\n\t\t\t\t\t\t\tBX.UI.InfoHelper.show('limit_office_own_domain');\n\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t\treturn res;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tconst justRow = new Row({});\n\t\tsectionView.append(justRow.render());\n\n\t\tjustRow.append(\n\t\t\tTag.render`\n\t\t\t<div class=\"intranet-settings__grid_box --single-item\">\n\t\t\t\t<div class=\"intranet-settings__grid_item\">${tabsField.render()}</div>\n\t\t\t</div>`)\n\t\t;\n\t\ttabsField.activateTab(firstTab);\n\t\t//endregion\n\n\t\treturn sectionField;\n\t}\n\n\tbuildThemeSection(themePickerSettings: SiteThemePickerOptions, portalSettings: ?SiteTitleInputType): SettingsSection\n\t{\n\t\tconst sectionView = new Section({\n\t\t\ttitle: Loc.getMessage('INTRANET_SETTINGS_SECTION_TITLE_PORTAL_THEME'),\n\t\t\ttitleIconClasses: 'ui-icon-set --picture',\n\t\t\tisOpen: false,\n\t\t\tisEnable: this.getValue('IP_ACCESS_RIGHTS_ENABLED'),\n\t\t\tbannerCode: 'ip_access_rights_lock',\n\t\t});\n\n\t\tconst sectionField = new SettingsSection({\n\t\t\tsection: sectionView,\n\t\t\tparent: this,\n\t\t});\n\n\t\t// 1. This is a description on blue box\n\t\tnew SettingsRow({\n\t\t\trow: new Row({\n\t\t\t\tcontent: (new Alert({\n\t\t\t\t\ttext: `\n\t\t\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_SECTION_TITLE_PORTAL_THEME_DESCRIPTION')}\n\t\t\t\t\t\t<a class=\"ui-section__link\" onclick=\"top.BX.Helper.show('redirect=detail&code=18325288')\">\n\t\t\t\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_CANCEL_MORE')}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t`,\n\t\t\t\t\tinline: true,\n\t\t\t\t\tsize: AlertSize.SMALL,\n\t\t\t\t\tcolor: AlertColor.PRIMARY,\n\t\t\t\t})).getContainer(),\n\t\t\t}),\n\t\t\tparent: sectionField\n\t\t});\n\n\t\t// 2. This is a theme picker\n\t\tnew SiteThemePickerField({\n\t\t\tparent: sectionField,\n\t\t\tportalSettings,\n\t\t\tthemePickerSettings\n\t\t});\n\n\t\treturn sectionField;\n\t}\n}\n","import {EventEmitter} from 'main.core.events';\nimport {Row, Section} from 'ui.section';\nimport {Checker, InlineChecker, Selector, TextInput, TextInputInline} from 'ui.form-elements.view';\nimport {BaseSettingsPage, SettingsRow, SettingsSection} from 'ui.form-elements.field';\nimport {AnalyticSettingsEvent} from '../analytic';\nimport {Event, Loc, Tag} from 'main.core';\n\nexport class ConfigurationPage extends BaseSettingsPage\n{\n\t#header;\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis.titlePage = Loc.getMessage('INTRANET_SETTINGS_TITLE_PAGE_CONFIGURATION');\n\t}\n\n\tgetType(): string\n\t{\n\t\treturn 'configuration';\n\t}\n\n\theaderWidgetRender(): HTMLElement\n\t{\n\t\tlet timeFormat = '';\n\t\tif (this.getValue('isFormat24Hour') === 'Y')\n\t\t{\n\t\t\ttimeFormat = this.getValue('format24HourTime');\n\t\t}\n\t\telse\n\t\t{\n\t\t\ttimeFormat = this.getValue('format12HourTime');\n\t\t}\n\n\t\tthis.#header = Tag.render`\n\t\t<div class=\"intranet-settings__date-widget_box\">\n\t\t\t<span class=\"ui-icon-set --earth-language\"></span>\n\t\t\t<div class=\"intranet-settings__date-widget_content\">\n\t\t\t\t<div class=\"intranet-settings__date-widget_inner\">\n\t\t\t\t\t<span data-role=\"time\" class=\"intranet-settings__date-widget_title\">${timeFormat}</span>\n\t\t\t\t\t<span class=\"intranet-settings__date-widget_subtitle\">${this.getValue('culture')?.offsetUTC}</span>\n\t\t\t\t</div>\n\t\t\t\t<div data-role=\"date\" class=\"intranet-settings__date-widget_subtitle\">${this.getValue('culture')?.currentDate}</div>\n\t\t\t</div>\n\t\t</div>`;\n\n\t\treturn this.#header;\n\t}\n\n\tappendSections(contentNode: HTMLElement): void\n\t{\n\t\tlet dateTimeSection = this.#buildDateTimeSection();\n\t\tdateTimeSection.renderTo(contentNode);\n\n\t\tlet mailsSection = this.#buildMailsSection();\n\t\tmailsSection.renderTo(contentNode);\n\n\t\tif (this.hasValue('mapsProviderCRM') && this.getValue('mapsProviderCRM'))\n\t\t{\n\t\t\tlet mapsSection = this.#buildCRMMapsSection();\n\t\t\tmapsSection.renderTo(contentNode);\n\t\t}\n\n\t\tlet cardsProductPropertiesSection = this.#buildCardsProductPropertiesSection();\n\t\tcardsProductPropertiesSection.renderTo(contentNode);\n\n\t\tlet additionalSettingsSection = this.#buildAdditionalSettingsSection();\n\t\tadditionalSettingsSection.renderTo(contentNode);\n\t}\n\n\t#buildDateTimeSection(): SettingsSection\n\t{\n\t\tlet dateTimeSection = new Section({\n\t\t\ttitle: Loc.getMessage('INTRANET_SETTINGS_SECTION_TITLE_CONFIGURATION_DATETIME'),\n\t\t\ttitleIconClasses: 'ui-icon-set --clock-2',\n\t\t});\n\n\t\tconst settingsSection = new SettingsSection({\n\t\t\tsection: dateTimeSection,\n\t\t\tparent: this\n\t\t});\n\n\t\tif (this.hasValue('culture'))\n\t\t{\n\t\t\tlet regionField = new Selector({\n\t\t\t\tlabel: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_DATETIME_REGION_FORMAT'),\n\t\t\t\thintTitle: Loc.getMessage('INTRANET_SETTINGS_FIELD_HINT_TITLE_DATE_FORMAT'),\n\t\t\t\tname: this.getValue('culture').name,\n\t\t\t\titems: this.getValue('culture').values,\n\t\t\t\thints: this.getValue('culture').hints,\n\t\t\t\tcurrent: this.getValue('culture').current\n\t\t\t});\n\t\t\tConfigurationPage.addToSectionHelper(regionField, settingsSection, new Row( { className: '--intranet-settings__mb-20' } ));\n\n\t\t\tEvent.bind(regionField.getInputNode(), 'change', (event) => {\n\t\t\t\tlet newData = this.getValue('culture').longDates[event.target.value];\n\t\t\t\tthis.#header.querySelector('[data-role=\"date\"]').innerHTML = newData;\n\t\t\t});\n\t\t}\n\n\t\tif (this.hasValue('isFormat24Hour'))\n\t\t{\n\t\t\tlet format24Time = new InlineChecker({\n\t\t\t\tinputName: 'isFormat24Hour',\n\t\t\t\ttitle: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_TIME_FORMAT24'),\n\t\t\t\thintTitle: Loc.getMessage('INTRANET_SETTINGS_FIELD_HINT_TITLE_TIME_FORMAT24'),\n\t\t\t\thintOn: this.getValue('format24HourTime'),\n\t\t\t\thintOff: this.getValue('format12HourTime'),\n\t\t\t\tchecked: this.getValue('isFormat24Hour') === 'Y'\n\t\t\t});\n\t\t\tConfigurationPage.addToSectionHelper(format24Time, settingsSection);\n\n\t\t\tEventEmitter.subscribe(format24Time, 'change', (event) => {\n\t\t\t\tthis.#header.querySelector('[data-role=\"time\"]').innerHTML = format24Time.isChecked()\n\t\t\t\t\t? this.getValue('format24HourTime')\n\t\t\t\t\t: this.getValue('format12HourTime');\n\t\t\t});\n\t\t}\n\n\t\treturn settingsSection;\n\t}\n\n\t#buildMailsSection(): SettingsSection\n\t{\n\t\tlet mailsSection = new Section({\n\t\t\ttitle: Loc.getMessage('INTRANET_SETTINGS_SECTION_TITLE_CONFIGURATION_MAILS'),\n\t\t\ttitleIconClasses: 'ui-icon-set --mail',\n\t\t\tisOpen: false\n\t\t});\n\n\t\tconst settingsSection = new SettingsSection({\n\t\t\tsection: mailsSection,\n\t\t\tparent: this\n\t\t});\n\n\t\tif (this.hasValue('trackOutMailsRead'))\n\t\t{\n\t\t\tlet trackOutLettersRead = new Checker({\n\t\t\t\tinputName: 'trackOutMailsRead',\n\t\t\t\ttitle: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_TRACK_OUT_MAILS'),\n\t\t\t\thintOn: Loc.getMessage('INTRANET_SETTINGS_FIELD_HINT_TRACK_OUT_MAILS_ON'),\n\t\t\t\tchecked: this.getValue('trackOutMailsRead') === 'Y'\n\t\t\t});\n\t\t\tlet showQuitRow = new Row({});\n\t\t\tConfigurationPage.addToSectionHelper(trackOutLettersRead, settingsSection, showQuitRow);\n\t\t}\n\n\t\tif (this.hasValue('trackOutMailsClick'))\n\t\t{\n\t\t\tlet trackOutMailsClick = new Checker({\n\t\t\t\tinputName: 'trackOutMailsClick',\n\t\t\t\ttitle: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_TRACK_OUT_MAILS_CLICKS'),\n\t\t\t\thintOn: Loc.getMessage('INTRANET_SETTINGS_FIELD_HINT_TRACK_OUT_MAILS_CLICK_ON'),\n\t\t\t\tchecked: this.getValue('trackOutMailsClick') === 'Y',\n\t\t\t\thelpDesk: 'redirect=detail&code=18213310',\n\t\t\t});\n\t\t\tlet showQuitRow = new Row({});\n\n\t\t\tConfigurationPage.addToSectionHelper(trackOutMailsClick, settingsSection, showQuitRow);\n\t\t}\n\n\t\tif (this.hasValue('defaultEmailFrom'))\n\t\t{\n\t\t\tlet defaultEmailFrom = new TextInput({\n\t\t\t\tinputName: 'defaultEmailFrom',\n\t\t\t\tlabel: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_DEFAULT_EMAIL'),\n\t\t\t\tvalue: this.getValue('defaultEmailFrom'),\n\t\t\t\tplaceholder: Loc.getMessage('INTRANET_SETTINGS_FIELD_PLACEHOLDER_NOTIFICATION_EMAIL'),\n\t\t\t\thintTitle: Loc.getMessage('INTRANET_SETTINGS_FIELD_HINT_DEFAULT_EMAIL'),\n\t\t\t});\n\t\t\tlet showQuitRow = new Row({});\n\n\t\t\tConfigurationPage.addToSectionHelper(defaultEmailFrom, settingsSection, showQuitRow);\n\t\t}\n\n\t\treturn settingsSection;\n\t}\n\n\t#buildCRMMapsSection(): SettingsSection\n\t{\n\t\tlet mapsSection = new Section({\n\t\t\ttitle: Loc.getMessage('INTRANET_SETTINGS_SECTION_TITLE_CONFIGURATION_MAPS'),\n\t\t\ttitleIconClasses: 'ui-icon-set --crm-map',\n\t\t\tisOpen: false\n\t\t});\n\n\t\tconst settingsSection = new SettingsSection({\n\t\t\tsection: mapsSection,\n\t\t\tparent: this\n\t\t});\n\n\t\tlet cardsProvider = new Selector({\n\t\t\tlabel: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_CHOOSE_REGION_CRM_MAPS'),\n\t\t\tname: this.getValue('mapsProviderCRM').name,\n\t\t\titems: this.getValue('mapsProviderCRM').values,\n\t\t\tcurrent: this.getValue('mapsProviderCRM').current,\n\t\t});\n\t\tlet cardsProviderRow = new Row({\n\t\t\tclassName: '--block',\n\t\t});\n\t\tConfigurationPage.addToSectionHelper(cardsProvider, settingsSection, cardsProviderRow)\n\n\t\tconst description = new BX.UI.Alert({\n\t\t\ttext: Loc.getMessage('INTRANET_SETTINGS_SECTION_CRM_MAPS_DESCRIPTION', {'#GOOGLE_API_URL#': this.getValue('googleApiUrl')}),\n\t\t\tinline: true,\n\t\t\tsize: BX.UI.Alert.Size.SMALL,\n\t\t\tcolor: BX.UI.Alert.Color.PRIMARY,\n\t\t\tanimated: true,\n\t\t});\n\n\t\tconst descriptionRow = new Row({\n\t\t\tseparator: 'top',\n\t\t\tcontent: description.getContainer(),\n\t\t\tisHidden: this.getValue('mapsProviderCRM').current === 'OSM',\n\t\t});\n\t\tnew SettingsRow({\n\t\t\trow: descriptionRow,\n\t\t\tparent: settingsSection\n\t\t});\n\n\t\tconst googleKeyFrontend = new TextInputInline({\n\t\t\tinputName: 'API_KEY_FRONTEND',\n\t\t\tlabel: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_GOOGLE_KEY_PUBLIC'),\n\t\t\thintTitle: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_GOOGLE_KEY_PUBLIC_HINT'),\n\t\t\tvalue: this.getValue('API_KEY_FRONTEND').value,\n\t\t\tplaceholder: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_TEXT_KEY_PLACEHOLDER'),\n\t\t});\n\t\tconst googleKeyFrontendRow = new Row({\n\t\t\tisHidden: this.getValue('mapsProviderCRM').current === 'OSM',\n\t\t});\n\n\t\tConfigurationPage.addToSectionHelper(googleKeyFrontend, settingsSection, googleKeyFrontendRow);\n\n\t\tconst mapApiKeyBackend = new TextInputInline({\n\t\t\tinputName: 'API_KEY_BACKEND',\n\t\t\tlabel: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_GOOGLE_KEY_SERVER'),\n\t\t\thintTitle: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_GOOGLE_KEY_SERVER_HINT'),\n\t\t\tvalue: this.getValue('API_KEY_BACKEND').value,\n\t\t\tplaceholder: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_TEXT_KEY_PLACEHOLDER'),\n\t\t});\n\n\t\tconst googleKeyBackendRow = new Row({\n\t\t\tcontent: mapApiKeyBackend.render(),\n\t\t\tisHidden: this.getValue('mapsProviderCRM').current === 'OSM',\n\t\t\tseparator: 'bottom',\n\t\t\tclassName: '--block',\n\t\t});\n\t\tConfigurationPage.addToSectionHelper(mapApiKeyBackend, settingsSection, googleKeyBackendRow);\n\n\t\tlet showPhotoPlacesMaps = new Checker({\n\t\t\tinputName: 'SHOW_PHOTOS_ON_MAP',\n\t\t\ttitle: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_SHOW_PHOTO_PLACES_MAPS'),\n\t\t\thintOn: Loc.getMessage('INTRANET_SETTINGS_FIELD_HINT_SHOW_PHOTO_PLACES_MAPS_CLICK_ON'),\n\t\t\thintOff: Loc.getMessage('INTRANET_SETTINGS_FIELD_HINT_SHOW_PHOTO_PLACES_MAPS_CLICK_ON'),\n\t\t\tchecked: this.getValue('SHOW_PHOTOS_ON_MAP').value === '1'\n\t\t});\n\t\tlet showPhotoPlacesMapsRow = new Row({\n\t\t\tcontent: showPhotoPlacesMaps.render(),\n\t\t\tisHidden: this.getValue('mapsProviderCRM').current === 'OSM',\n\t\t});\n\t\tConfigurationPage.addToSectionHelper(showPhotoPlacesMaps, settingsSection, showPhotoPlacesMapsRow);\n\n\t\tlet useGeocodingService = new Checker({\n\t\t\tinputName: 'USE_GEOCODING_SERVICE',\n\t\t\ttitle: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_SHOW_GEOCODING_SERVICE'),\n\t\t\thintOn: Loc.getMessage('INTRANET_SETTINGS_FIELD_HINT_SHOW_PHOTO_PLACES_MAPS_CLICK_ON'),\n\t\t\thintOff: Loc.getMessage('INTRANET_SETTINGS_FIELD_HINT_SHOW_PHOTO_PLACES_MAPS_CLICK_ON'),\n\t\t\tchecked: this.getValue('USE_GEOCODING_SERVICE').value === '1',\n\t\t});\n\t\tlet useGeocodingServiceRow = new Row({\n\t\t\tcontent: useGeocodingService.render(),\n\t\t\tisHidden: this.getValue('mapsProviderCRM').current === 'OSM',\n\t\t});\n\n\t\tConfigurationPage.addToSectionHelper(useGeocodingService, settingsSection, useGeocodingServiceRow);\n\n\t\tcardsProvider.getInputNode()\n\t\t\t.addEventListener('change', (event) => {\n\t\t\t\tif (event.target.value === 'OSM')\n\t\t\t\t{\n\t\t\t\t\tdescriptionRow.hide();\n\t\t\t\t\tgoogleKeyFrontendRow.hide();\n\t\t\t\t\tgoogleKeyBackendRow.hide();\n\t\t\t\t\tuseGeocodingServiceRow.hide();\n\t\t\t\t\tshowPhotoPlacesMapsRow.hide();\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tdescriptionRow.show();\n\t\t\t\t\tgoogleKeyFrontendRow.show();\n\t\t\t\t\tgoogleKeyBackendRow.show();\n\t\t\t\t\tuseGeocodingServiceRow.show();\n\t\t\t\t\tshowPhotoPlacesMapsRow.show();\n\t\t\t\t}\n\t\t\t});\n\n\t\treturn settingsSection;\n\t}\n\n\t#buildCardsProductPropertiesSection(): SettingsSection\n\t{\n\t\tlet productPropertiesSection = new Section({\n\t\t\ttitle: Loc.getMessage('INTRANET_SETTINGS_SECTION_TITLE_CONFIGURATION_MAPS_PRODUCT'),\n\t\t\ttitleIconClasses: 'ui-icon-set --location-2',\n\t\t\tisOpen: false\n\t\t});\n\n\t\tconst settingsSection = new SettingsSection({\n\t\t\tsection: productPropertiesSection,\n\t\t\tparent: this\n\t\t})\n\n\t\tif (this.hasValue('cardsProviderProductProperties'))\n\t\t{\n\t\t\tlet cardsProviderProductProperties = new Selector({\n\t\t\t\tlabel: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_CHOOSE_REGION_CRM_MAPS'),\n\t\t\t\tname: this.getValue('cardsProviderProductProperties').name,\n\t\t\t\titems: this.getValue('cardsProviderProductProperties').values,\n\t\t\t\tcurrent: this.getValue('cardsProviderProductProperties').current,\n\t\t\t});\n\t\t\tlet cardsProviderProductPropertiesRow = new Row({\n\t\t\t\tseparator: 'bottom'\n\t\t\t});\n\t\t\tConfigurationPage.addToSectionHelper(cardsProviderProductProperties, settingsSection, cardsProviderProductPropertiesRow);\n\n\t\t\tconst descriptionYandex = new BX.UI.Alert({\n\t\t\t\ttext: Loc.getMessage('INTRANET_SETTINGS_SECTION_CRM_MAPS_YANDEX_DESCRIPTION', {'#YANDEX_API_URL#': this.getValue('yandexApiUrl')}),\n\t\t\t\tinline: true,\n\t\t\t\tsize: BX.UI.Alert.Size.SMALL,\n\t\t\t\tcolor: BX.UI.Alert.Color.PRIMARY,\n\t\t\t\tanimated: true,\n\t\t\t});\n\t\t\tconst descriptionYandexRow = new Row({\n\t\t\t\tcontent: descriptionYandex.getContainer(),\n\t\t\t\tisHidden: this.getValue('cardsProviderProductProperties').current !== 'yandex',\n\t\t\t});\n\t\t\tnew SettingsRow({\n\t\t\t\trow: descriptionYandexRow,\n\t\t\t\tparent: settingsSection\n\t\t\t});\n\n\t\t\tconst yandexKeyProductProperties = new TextInput({\n\t\t\t\tinputName: 'yandexKeyProductProperties',\n\t\t\t\tlabel: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_MAP_PRODUCT_PROPERTIES_YANDEX_KEY'),\n\t\t\t\tvalue: this.getValue('yandexKeyProductProperties'),\n\t\t\t\tplaceholder: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_TEXT_KEY_PLACEHOLDER'),\n\t\t\t});\n\t\t\tconst yandexKeyProductPropertiesRow = new Row({\n\t\t\t\tcontent: yandexKeyProductProperties.render(),\n\t\t\t\tisHidden: this.getValue('cardsProviderProductProperties').current !== 'yandex',\n\t\t\t});\n\n\t\t\tConfigurationPage.addToSectionHelper(yandexKeyProductProperties, settingsSection, yandexKeyProductPropertiesRow);\n\n\t\t\tconst descriptionGoogle = new BX.UI.Alert({\n\t\t\t\ttext: Loc.getMessage('INTRANET_SETTINGS_SECTION_CRM_MAPS_DESCRIPTION', {'#GOOGLE_API_URL#': this.getValue('googleApiUrl')}),\n\t\t\t\tinline: true,\n\t\t\t\tsize: BX.UI.Alert.Size.SMALL,\n\t\t\t\tcolor: BX.UI.Alert.Color.PRIMARY,\n\t\t\t\tanimated: true,\n\t\t\t});\n\n\t\t\tconst descriptionGoogleRow = new Row({\n\t\t\t\tcontent: descriptionGoogle.getContainer(),\n\t\t\t\tisHidden: this.getValue('cardsProviderProductProperties').current !== 'google',\n\t\t\t});\n\n\t\t\tnew SettingsRow({\n\t\t\t\trow: descriptionGoogleRow,\n\t\t\t\tparent: settingsSection\n\t\t\t});\n\n\t\t\tconst googleKeyProductProperties = new TextInput({\n\t\t\t\tinputName: 'googleKeyProductProperties',\n\t\t\t\tlabel: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_MAP_PRODUCT_PROPERTIES_GOOGLE_KEY'),\n\t\t\t\tvalue: this.getValue('googleKeyProductProperties'),\n\t\t\t\tplaceholder: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_TEXT_KEY_PLACEHOLDER'),\n\t\t\t});\n\t\t\tconst googleKeyProductPropertiesRow = new Row({\n\t\t\t\tcontent: googleKeyProductProperties.render(),\n\t\t\t\tisHidden: this.getValue('cardsProviderProductProperties').current !== 'google',\n\t\t\t});\n\t\t\tConfigurationPage.addToSectionHelper(googleKeyProductProperties, settingsSection, googleKeyProductPropertiesRow);\n\n\t\t\tcardsProviderProductProperties.getInputNode()\n\t\t\t\t.addEventListener('change', (event) => {\n\t\t\t\t\tif (event.target.value === 'yandex')\n\t\t\t\t\t{\n\t\t\t\t\t\tdescriptionYandexRow.show();\n\t\t\t\t\t\tyandexKeyProductPropertiesRow.show();\n\t\t\t\t\t\tdescriptionGoogleRow.hide();\n\t\t\t\t\t\tgoogleKeyProductPropertiesRow.hide();\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tdescriptionYandexRow.hide();\n\t\t\t\t\t\tyandexKeyProductPropertiesRow.hide();\n\t\t\t\t\t\tdescriptionGoogleRow.show();\n\t\t\t\t\t\tgoogleKeyProductPropertiesRow.show();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t}\n\n\t\treturn settingsSection;\n\t}\n\n\t#buildAdditionalSettingsSection(): SettingsSection\n\t{\n\t\tlet additionalSettingsSection = new Section({\n\t\t\ttitle: Loc.getMessage('INTRANET_SETTINGS_SECTION_TITLE_ADDITIONAL_SETTINGS'),\n\t\t\ttitleIconClasses: 'ui-icon-set --apps',\n\t\t\tisOpen: false\n\t\t});\n\n\t\tconst settingsSection = new SettingsSection({\n\t\t\tsection: additionalSettingsSection,\n\t\t\tparent: this\n\t\t});\n\n\t\tif (this.hasValue('allowUserInstallApplication'))\n\t\t{\n\t\t\tlet allInstallMarketApplication = new Checker({\n\t\t\t\tinputName: 'allowUserInstallApplication',\n\t\t\t\ttitle: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_ALLOW_ALL_USER_INSTALL_APPLICATION'),\n\t\t\t\thintOn: Loc.getMessage('INTRANET_SETTINGS_FIELD_HINT_ALLOW_ALL_USER_INSTALL_APPLICATION_CLICK_ON'),\n\t\t\t\tchecked: this.getValue('allowUserInstallApplication') === 'Y'\n\t\t\t});\n\t\t\tlet allInstallMarketApplicationRow = new Row({});\n\n\t\t\tEventEmitter.subscribe(\n\t\t\t\tallInstallMarketApplication.switcher,\n\t\t\t\t'toggled',\n\t\t\t\t() =>\n\t\t\t\t{\n\t\t\t\t\tthis.getAnalytic()?.addEventConfigConfiguration(\n\t\t\t\t\t\tAnalyticSettingsEvent.CHANGE_MARKET,\n\t\t\t\t\t\tallInstallMarketApplication.isChecked()\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tConfigurationPage.addToSectionHelper(allInstallMarketApplication, settingsSection, allInstallMarketApplicationRow);\n\t\t}\n\n\t\tif (this.hasValue('allCanBuyTariff'))\n\t\t{\n\t\t\tlet allCanBuyTariff = new Checker({\n\t\t\t\tinputName: 'allCanBuyTariff',\n\t\t\t\ttitle: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_ALL_CAN_BUY_TARIFF'),\n\t\t\t\thintOn: Loc.getMessage('INTRANET_SETTINGS_FIELD_HINT_ALL_CAN_BUY_TARIFF_CLICK_ON'),\n\t\t\t\tchecked: this.getValue('allCanBuyTariff').value === 'Y',\n\t\t\t\tisEnable: this.getValue('allCanBuyTariff').isEnable,\n\t\t\t\tbannerCode: 'limit_why_pay_tariff_everyone',\n\t\t\t});\n\t\t\tlet allCanBuyTariffRow = new Row({});\n\n\t\t\tEventEmitter.subscribe(\n\t\t\t\tallCanBuyTariff.switcher,\n\t\t\t\t'toggled',\n\t\t\t\t() =>\n\t\t\t\t{\n\t\t\t\t\tthis.getAnalytic()?.addEventConfigConfiguration(\n\t\t\t\t\t\tAnalyticSettingsEvent.CHANGE_PAY_TARIFF,\n\t\t\t\t\t\tallCanBuyTariff.isChecked()\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tConfigurationPage.addToSectionHelper(allCanBuyTariff, settingsSection, allCanBuyTariffRow);\n\t\t}\n\n\t\tif (this.hasValue('allowMeasureStressLevel'))\n\t\t{\n\t\t\tlet allowMeasureStressLevel = new Checker({\n\t\t\t\tinputName: 'allowMeasureStressLevel',\n\t\t\t\ttitle: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_ALLOW_MEASURE_STRESS_LEVEL'),\n\t\t\t\thintOn: Loc.getMessage('INTRANET_SETTINGS_FIELD_HINT_ALLOW_MEASURE_STRESS_LEVEL_CLICK_ON'),\n\t\t\t\tchecked: this.getValue('allowMeasureStressLevel') === 'Y',\n\t\t\t\thelpDesk: 'redirect=detail&code=17697808',\n\t\t\t});\n\t\t\tlet allowMeasureStressLevelRow = new Row({});\n\t\t\tConfigurationPage.addToSectionHelper(allowMeasureStressLevel, settingsSection, allowMeasureStressLevelRow);\n\t\t}\n\n\t\tif (this.hasValue('collectGeoData'))\n\t\t{\n\t\t\tlet collectGeoData = new Checker({\n\t\t\t\tinputName: 'collectGeoData',\n\t\t\t\ttitle: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_COLLECT_GEO_DATA'),\n\t\t\t\thintOn: Loc.getMessage('INTRANET_SETTINGS_FIELD_HINT_COLLECT_GEO_DATA_CLICK_ON'),\n\t\t\t\tchecked: this.getValue('collectGeoData') === 'Y',\n\t\t\t\thelpDesk: 'redirect=detail&code=18213320',\n\t\t\t});\n\t\t\tlet collectGeoDataRow = new Row({});\n\n\t\t\tEventEmitter.subscribe(\n\t\t\t\tcollectGeoData.switcher,\n\t\t\t\t'toggled',\n\t\t\t\t() =>\n\t\t\t\t{\n\t\t\t\t\tthis.#geoDataSwitch(collectGeoData);\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tConfigurationPage.addToSectionHelper(collectGeoData, settingsSection, collectGeoDataRow);\n\t\t}\n\n\t\tif (this.hasValue('showSettingsAllUsers'))\n\t\t{\n\t\t\tlet showSettingsAllUsers = new Checker({\n\t\t\t\tinputName: 'showSettingsAllUsers',\n\t\t\t\ttitle: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_SHOW_SETTINGS_ALL_USER'),\n\t\t\t\thintOn: Loc.getMessage('INTRANET_SETTINGS_FIELD_HINT_SHOW_SETTINGS_ALL_USER_CLICK_ON'),\n\t\t\t\tchecked: this.getValue('showSettingsAllUsers') === 'Y'\n\t\t\t});\n\t\t\tlet showSettingsAllUsersRow = new Row({\n\t\t\t\tcontent: showSettingsAllUsers.render(),\n\t\t\t\tisHidden: true\n\t\t\t});\n\t\t\tConfigurationPage.addToSectionHelper(showSettingsAllUsers, settingsSection, showSettingsAllUsersRow);\n\t\t}\n\n\t\treturn settingsSection;\n\t}\n\n\t#geoDataSwitch(element)\n\t{\n\t\tif (element.isChecked())\n\t\t{\n\t\t\tBX.UI.Dialogs.MessageBox.show({\n\t\t\t\t'modal': true,\n\t\t\t\t'minWidth': 640,\n\t\t\t\t'title': Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_COLLECT_GEO_DATA'),\n\t\t\t\t'message': Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_COLLECT_GEO_DATA_CONFIRM'),\n\t\t\t\t'buttons': BX.UI.Dialogs.MessageBoxButtons.OK_CANCEL,\n\t\t\t\t'okCaption': Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_COLLECT_GEO_DATA_OK'),\n\t\t\t\t'onCancel': function ()\n\t\t\t\t{\n\t\t\t\t\telement.switcher.check(false);\n\t\t\t\t\treturn true;\n\t\t\t\t},\n\t\t\t\t'onOk': function ()\n\t\t\t\t{\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t});\n\t\t}\n\t}\n}\n","import { Loc, Tag, Dom, Event } from 'main.core';\nimport { Section, Row } from 'ui.section';\nimport { ItemPicker, TextInput, Selector } from 'ui.form-elements.view';\nimport { SettingsSection, SettingsRow, TabField, TabsField, BaseSettingsPage } from 'ui.form-elements.field';\n\nexport class SchedulePage extends BaseSettingsPage\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis.titlePage = Loc.getMessage('INTRANET_SETTINGS_TITLE_PAGE_SCHEDULE');\n\t\tthis.descriptionPage = Loc.getMessage('INTRANET_SETTINGS_DESCRIPTION_PAGE_SCHEDULE');\n\t}\n\n\tgetType(): string\n\t{\n\t\treturn 'schedule';\n\t}\n\n\tappendSections(contentNode: HTMLElement): void\n\t{\n\t\tconst scheduleSection = this.#buildScheduleSection();\n\t\tscheduleSection.renderTo(contentNode);\n\n\t\tconst holidaysSection = this.#buildHolidaysSection();\n\t\tholidaysSection.renderTo(contentNode);\n\t}\n\n\t#buildScheduleSection(): SettingsSection\n\t{\n\t\tlet scheduleSection = new Section({\n\t\t\ttitle: Loc.getMessage('INTRANET_SETTINGS_SECTION_TITLE_SCHEDULE'),\n\t\t\ttitleIconClasses: 'ui-icon-set --calendar-1',\n\t\t});\n\n\t\tconst settingsSection = new SettingsSection({\n\t\t\tparent: this,\n\t\t\tsection: scheduleSection\n\t\t})\n\n\t\t//region tab section\n\t\tconst settingsRow = new SettingsRow({\n\t\t\tparent: settingsSection\n\t\t});\n\t\tconst tabsField = new TabsField({\n\t\t\tparent: settingsRow,\n\t\t});\n\t\tconst forCompanyTab = new TabField({\n\t\t\tparent: tabsField,\n\t\t\ttabsOptions: {\n\t\t\t\thead: Loc.getMessage('INTRANET_SETTINGS_SECTION_TAB_TITLE_COMPANY'),\n\t\t\t\tbody: () => {\n\t\t\t\t\treturn new Promise((resolve) => {\n\n\t\t\t\t\t\tlet workTimeRow = new Row({});\n\t\t\t\t\t\tlet workTimeContainerNode = Tag.render`<div class=\"intranet-settings__work-time_container\"><div>`;\n\t\t\t\t\t\tif (this.hasValue('WORK_TIME_START'))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconst workTimeStartField = new Selector({\n\t\t\t\t\t\t\t\tlabel: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_WORK_TIME_START'),\n\t\t\t\t\t\t\t\tname: this.getValue('WORK_TIME_START').name,\n\t\t\t\t\t\t\t\titems: this.getValue('WORK_TIME_START').values,\n\t\t\t\t\t\t\t\tcurrent: this.getValue('WORK_TIME_START').current,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tDom.append(workTimeStartField.render(), workTimeContainerNode);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tDom.append(Tag.render`<div class=\"ui-section__field-inline-separator\"></div>`, workTimeContainerNode);\n\t\t\t\t\t\tif (this.hasValue('WORK_TIME_END'))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconst workTimeEndField = new Selector({\n\t\t\t\t\t\t\t\tlabel: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_WORK_TIME_END'),\n\t\t\t\t\t\t\t\tname: this.getValue('WORK_TIME_END').name,\n\t\t\t\t\t\t\t\titems: this.getValue('WORK_TIME_END').values,\n\t\t\t\t\t\t\t\tcurrent: this.getValue('WORK_TIME_END').current,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tDom.append(workTimeEndField.render(), workTimeContainerNode);\n\n\t\t\t\t\t\t}\n\t\t\t\t\t\tworkTimeRow.append(workTimeContainerNode);\n\n\t\t\t\t\t\tlet containerTab = Tag.render`<div><div>`;\n\t\t\t\t\t\tDom.append(workTimeRow.render(), containerTab);\n\n\n\t\t\t\t\t\tif (this.hasValue('WEEK_DAYS'))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconst itemPickerField = new ItemPicker({\n\t\t\t\t\t\t\t\tinputName: this.getValue('WEEK_DAYS').name,\n\t\t\t\t\t\t\t\tisMulti: true,\n\t\t\t\t\t\t\t\tlabel: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_WEEKEND'),\n\t\t\t\t\t\t\t\titems: this.getValue('WEEK_DAYS').values,\n\t\t\t\t\t\t\t\tcurrent: this.getValue('WEEK_DAYS').current,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tconst itemPickerRow = new Row({\n\t\t\t\t\t\t\t\tcontent: itemPickerField.render(),\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tDom.append(itemPickerRow.render(), containerTab);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (this.hasValue('WEEK_START'))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconst weekStartField = new ItemPicker({\n\t\t\t\t\t\t\t\tinputName: this.getValue('WEEK_START').name,\n\t\t\t\t\t\t\t\tlabel: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_WEEK_START'),\n\t\t\t\t\t\t\t\titems: this.getValue('WEEK_START').values,\n\t\t\t\t\t\t\t\tcurrent: this.getValue('WEEK_START').current,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tconst weekStartRow = new Row({\n\t\t\t\t\t\t\t\tcontent: weekStartField.render(),\n\t\t\t\t\t\t\t\tclassName: '--row-frame_gray',\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tthis.fields[this.getValue('WEEK_START').name] = weekStartField;\n\t\t\t\t\t\t\tDom.append(weekStartRow.render(), containerTab);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tresolve(containerTab);\n\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tif (this.getValue('TIMEMAN').enabled)\n\t\t{\n\t\t\tnew TabField({\n\t\t\t\tparent: tabsField,\n\t\t\t\ttabsOptions: {\n\t\t\t\t\trestricted: this.getValue('TIMEMAN').restricted,\n\t\t\t\t\tbannerCode: 'limit_office_shift_scheduling',\n\t\t\t\t\thead: Loc.getMessage('INTRANET_SETTINGS_SECTION_TAB_TITLE_DEPARTMENT'),\n\t\t\t\t\tbody: this.#forDepartmentsRender(),\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\ttabsField.activateTab(forCompanyTab);\n\t\t//endregion\n\n\t\treturn settingsSection;\n\t}\n\n\t#buildHolidaysSection(): SettingsSection\n\t{\n\t\tlet holidaysSection = new Section({\n\t\t\ttitle: Loc.getMessage('INTRANET_SETTINGS_SECTION_TITLE_HOLIDAYS'),\n\t\t\ttitleIconClasses: 'ui-icon-set --flag-2',\n\t\t\tisOpen: false\n\t\t});\n\n\t\tconst settingsSection = new SettingsSection({\n\t\t\tparent: this,\n\t\t\tsection: holidaysSection\n\t\t})\n\n\t\tconst countDays = this.getValue('year_holidays')?.match(/\\d{1,2}.\\d{1,2}/gm)?.length ?? 0;\n\t\tlet countDaysNode = Tag.render`<div class=\"ui-section__field-label --mb-13\">${Loc.getMessage('INTRANET_SETTINGS_FIELD_INFO', { '#COUNT_DAYS#': countDays })}</div>`;\n\t\tconst holidaysRow = new Row({\n\t\t\tcontent: countDaysNode,\n\t\t});\n\t\tholidaysSection.append(holidaysRow.render());\n\n\t\tif (this.hasValue('year_holidays'))\n\t\t{\n\t\t\tconst holidaysField = new TextInput({\n\t\t\t\tinputName: 'year_holidays',\n\t\t\t\tlabel: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_HOLIDAYS'),\n\t\t\t\tvalue: this.getValue('year_holidays'),\n\t\t\t});\n\t\t\tSchedulePage.addToSectionHelper(holidaysField, settingsSection);\n\n\t\t\tEvent.bind(holidaysField.getInputNode(), 'keyup', () => {\n\t\t\t\tconst count = holidaysField?.getInputNode().value?.match(/\\d{1,2}.\\d{1,2}/gm)?.length ?? 0;\n\t\t\t\tcountDaysNode.innerHTML = Loc.getMessage('INTRANET_SETTINGS_FIELD_INFO', { '#COUNT_DAYS#': count });\n\t\t\t});\n\t\t}\n\n\t\treturn settingsSection;\n\t}\n\n\t#forDepartmentsRender(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"intranet-settings__tab-info_container\">\n\t\t\t\t<div class=\"intranet-settings__tab-info_text\">${Loc.getMessage('INTRANET_SETTINGS_DESCRIPTION_FOR_DEPARTMENTS')}</div>\n\t\t\t\t<a href=\"/timeman/schedules/\" class=\"ui-section__link\" target=\"_blank\">${Loc.getMessage('INTRANET_SETTINGS_DESCRIPTION_FOR_DEPARTMENTS_CONFIG')}</a>\n\t\t\t</div>\n\t\t`;\n\t}\n}\n","import { Dom, Loc, Tag } from 'main.core';\nimport 'ui.icon-set.main';\nimport { Section, Row } from 'ui.section';\nimport { TextInput } from 'ui.form-elements.view';\nimport { SettingsSection, SettingsField, SettingsRow, BaseSettingsPage } from 'ui.form-elements.field';\n\nexport class GdprPage extends BaseSettingsPage\n{\n\tconstructor() {\n\t\tsuper();\n\t\tthis.titlePage = Loc.getMessage('INTRANET_SETTINGS_TITLE_PAGE_GDPR');\n\t\tthis.descriptionPage = Loc.getMessage('INTRANET_SETTINGS_DESCRIPTION_PAGE_GDPR');\n\t}\n\n\tgetType(): string\n\t{\n\t\treturn 'gdpr';\n\t}\n\n\tappendSections(contentNode: HTMLElement)\n\t{\n\t\tlet gdprSection = this.#buildGdprSection();\n\t\tgdprSection.renderTo(contentNode);\n\t}\n\n\t#buildGdprSection(): SettingsSection\n\t{\n\t\tlet gdprSection = new Section({\n\t\t\ttitle: Loc.getMessage('INTRANET_SETTINGS_SECTION_TITLE_GDPR'),\n\t\t\ttitleIconClasses: 'ui-icon-set --document',\n\t\t\tcanCollapse: false,\n\t\t});\n\n\t\tlet sectionSettings = new SettingsSection({\n\t\t\tsection: gdprSection,\n\t\t\tparent: this\n\t\t});\n\n\t\tconst description = new BX.UI.Alert({\n\t\t\ttext: `\n\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_SECTION_GDPR_DESCRIPTION')}\n\t\t\t\t<a class=\"ui-section__link\" onclick=\"top.BX.Helper.show('redirect=detail&code=7608199')\">\n\t\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_CANCEL_MORE')}\n\t\t\t\t</a>\n\t\t\t\t</br>\n\t\t\t\t<a class=\"ui-section__link\" href=\"${this.getValue('dpaLink')}\" target=\"_blank\">\n\t\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_BUTTON_GDPR_AGREEMENT')}\n\t\t\t\t</a>\n\t\t\t`,\n\t\t\tinline: true,\n\t\t\tsize: BX.UI.Alert.Size.SMALL,\n\t\t\tcolor: BX.UI.Alert.Color.PRIMARY,\n\t\t\tanimated: true,\n\t\t});\n\n\t\tconst descriptionRow = new Row({\n\t\t\tcontent: description.getContainer(),\n\t\t});\n\n\t\tnew SettingsRow({\n\t\t\trow: descriptionRow,\n\t\t\tparent: sectionSettings\n\t\t});\n\n\t\tif (this.hasValue('companyTitle'))\n\t\t{\n\t\t\tconst titleField = new TextInput({\n\t\t\t\tinputName: 'companyTitle',\n\t\t\t\tlabel: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_COMPANY_TITLE'),\n\t\t\t\tvalue: this.getValue('companyTitle'),\n\t\t\t\tplaceholder: Loc.getMessage('INTRANET_SETTINGS_FIELD_PLACEHOLDER_COMPANY_TITLE'),\n\t\t\t});\n\n\t\t\tlet settingsField = new SettingsField({\n\t\t\t\tfieldView: titleField\n\t\t\t});\n\t\t\tnew SettingsRow({\n\t\t\t\tparent: sectionSettings,\n\t\t\t\tchild: settingsField\n\t\t\t});\n\t\t}\n\n\t\tif (this.hasValue('contactName'))\n\t\t{\n\t\t\tconst contactNameField = new TextInput({\n\t\t\t\tinputName: 'contactName',\n\t\t\t\tlabel: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_CONTACT_NAME'),\n\t\t\t\tvalue: this.getValue('contactName'),\n\t\t\t\tplaceholder: Loc.getMessage('INTRANET_SETTINGS_FIELD_PLACEHOLDER_CONTACT_NAME'),\n\t\t\t});\n\n\t\t\tlet settingsField = new SettingsField({\n\t\t\t\tfieldView: contactNameField\n\t\t\t});\n\t\t\tnew SettingsRow({\n\t\t\t\tparent: sectionSettings,\n\t\t\t\tchild: settingsField\n\t\t\t});\n\t\t}\n\n\t\tif (this.hasValue('notificationEmail'))\n\t\t{\n\t\t\tconst emailField = new TextInput({\n\t\t\t\tinputName: 'notificationEmail',\n\t\t\t\tlabel: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_NOTIFICATION_EMAIL'),\n\t\t\t\tvalue: this.getValue('notificationEmail'),\n\t\t\t\tplaceholder: Loc.getMessage('INTRANET_SETTINGS_FIELD_PLACEHOLDER_NOTIFICATION_EMAIL'),\n\t\t\t});\n\n\t\t\tlet settingsField = new SettingsField({\n\t\t\t\tfieldView: emailField,\n\t\t\t});\n\n\t\t\tnew SettingsRow({\n\t\t\t\tparent: sectionSettings,\n\t\t\t\tchild: settingsField\n\t\t\t});\n\t\t}\n\n\t\tif (this.hasValue('date'))\n\t\t{\n\t\t\tconst dateField = new TextInput({\n\t\t\t\tinputName: 'date',\n\t\t\t\tlabel: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_DATE'),\n\t\t\t\tvalue: this.getValue('date'),\n\t\t\t});\n\n\t\t\tDom.adjust(dateField.render(), {\n\t\t\t\tevents: {\n\t\t\t\t\tclick: (event) => {\n\t\t\t\t\t\tBX.calendar({\n\t\t\t\t\t\t\tnode: event.target,\n\t\t\t\t\t\t\tfield: 'date',\n\t\t\t\t\t\t\tform: '',\n\t\t\t\t\t\t\tbTime: false,\n\t\t\t\t\t\t\tbHideTime: true,\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t});\n\n\t\t\tlet settingsField = new SettingsField({\n\t\t\t\tfieldView: dateField,\n\t\t\t});\n\n\t\t\tnew SettingsRow({\n\t\t\t\tparent: sectionSettings,\n\t\t\t\tchild: settingsField\n\t\t\t});\n\t\t}\n\n\t\tnew SettingsRow({\n\t\t\trow: new Row({\n\t\t\t\tcontent: this.addApplicationsRender()\n\t\t\t}),\n\t\t\tparent: sectionSettings,\n\t\t});\n\n\t\treturn sectionSettings;\n\t}\n\n\taddApplicationsRender(): HTMLElement\n\t{\n\t\tif (this.hasValue('marketDirectory'))\n\t\t{\n\t\t\tconst marketDirectory = this.getValue('marketDirectory');\n\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"ui-text-right\">\n\t\t\t\t\t<a class=\"ui-section__link\" href=\"${marketDirectory}detail/integrations24.gdprstaff/\">\n\t\t\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_BUTTON_GDPR_APPLICATION_EMPLOYEE')}\n\t\t\t\t\t</a>\n\t\t\t\t\t<a class=\"ui-section__link\" style=\"margin-left: 12px;\" href=\"${marketDirectory}detail/integrations24.gdpr/\">\n\t\t\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_BUTTON_GDPR_APPLICATION_CRM')}\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\n\t\treturn null;\n\t}\n}","import { Loc, Tag, Event, Dom, Type} from 'main.core';\nimport 'ui.forms';\nimport 'ui.icon-set.actions';\nimport 'ui.icon-set.main';\nimport { EventEmitter } from 'main.core.events';\nimport { Section, Row } from 'ui.section';\nimport { Checker, Selector, SingleChecker, UserSelector, TextInput} from 'ui.form-elements.view';\nimport { Switcher, SwitcherSize } from 'ui.switcher';\nimport { Popup } from 'main.popup';\nimport { SettingsSection, SettingsField, SettingsRow, BaseSettingsPage } from 'ui.form-elements.field';\nimport {TagSelector} from \"ui.entity-selector\";\n\nexport class SecurityPage extends BaseSettingsPage\n{\n\t#otpChecker: ?Checker;\n\t#otpSelector: ?Selector;\n\t#otpPopup: ?Popup;\n\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis.titlePage = Loc.getMessage('INTRANET_SETTINGS_TITLE_PAGE_SECURITY');\n\t\tthis.descriptionPage = Loc.getMessage('INTRANET_SETTINGS_DESCRIPTION_PAGE_SECURITY');\n\t}\n\n\tgetType(): string\n\t{\n\t\treturn 'security';\n\t}\n\n\tappendSections(contentNode: HTMLElement): void\n\t{\n\t\tconst isBitrix24 = this.hasValue('IS_BITRIX_24') && this.getValue('IS_BITRIX_24');\n\t\tif (this.hasValue('SECURITY_OTP_ENABLED') && this.getValue('SECURITY_OTP_ENABLED'))\n\t\t{\n\t\t\tthis.#buildOTPSection().renderTo(contentNode);\n\t\t}\n\n\t\t// if (isBitrix24)\n\t\t// {\n\t\t// \tthis.#buildPasswordRecoverySection().renderTo(contentNode);\n\t\t// }\n\t\tthis.#buildDevicesHistorySection().renderTo(contentNode);\n\t\tthis.#buildEventLogSection().renderTo(contentNode);\n\t\tif (isBitrix24)\n\t\t{\n\t\t\tthis.#buildAccessIPSection().renderTo(contentNode);\n\t\t\tthis.#buildBlackListSection().renderTo(contentNode);\n\t\t}\n\t}\n\n\t#buildOTPSection(): SettingsSection\n\t{\n\t\tconst otpSection = new Section({\n\t\t\ttitle: Loc.getMessage('INTRANET_SETTINGS_SECTION_TITLE_OTP'),\n\t\t\ttitleIconClasses: 'ui-icon-set --shield',\n\t\t});\n\t\tconst section = new SettingsSection({\n\t\t\tsection: otpSection,\n\t\t\tparent: this,\n\t\t});\n\n\t\tconst descriptionRow = new Row({\n\t\t\tcontent: this.#getOTPDescription().getContainer(),\n\t\t});\n\t\tnew SettingsRow({\n\t\t\trow: descriptionRow,\n\t\t\tparent: section,\n\t\t});\n\n\t\tif (this.hasValue('SECURITY_OTP') && this.hasValue('SEND_OTP_PUSH'))\n\t\t{\n\t\t\tconst securityOtpCheckerRow = new Row({\n\t\t\t\tcontent: this.#getOTPChecker().render(),\n\t\t\t});\n\t\t\tnew SettingsRow({\n\t\t\t\trow: securityOtpCheckerRow,\n\t\t\t\tparent: section,\n\t\t\t});\n\n\t\t\tconst securityOtpPeriodSelectorRow = new Row({\n\t\t\t\tcontent: this.#getOTPPeriodSelector().render(),\n\t\t\t\tisHidden: !this.#getOTPChecker().isChecked(),\n\t\t\t});\n\t\t\tnew SettingsRow({\n\t\t\t\trow: securityOtpPeriodSelectorRow,\n\t\t\t\tparent: section,\n\t\t\t});\n\n\t\t\tconst switcherWrapper = Tag.render`\n\t\t\t\t<div class=\"settings-switcher-wrapper\">\n\t\t\t\t\t<div class=\"settings-security-message-switcher\"/>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t\tnew SingleChecker({\n\t\t\t\tswitcher: new Switcher({\n\t\t\t\t\tnode: switcherWrapper.querySelector('.settings-security-message-switcher'),\n\t\t\t\t\tinputName: 'SEND_OTP_PUSH',\n\t\t\t\t\tchecked: this.getValue('SEND_OTP_PUSH'),\n\t\t\t\t\tsize: SwitcherSize.small,\n\t\t\t\t}),\n\t\t\t});\n\t\t\tconst securityOtpMessageChatCheckerRow = new Row({\n\t\t\t\tcontent: switcherWrapper,\n\t\t\t\tisHidden: !this.#getOTPChecker().isChecked(),\n\t\t\t});\n\t\t\tswitcherWrapper.append(Tag.render`<span class=\"settings-switcher-title\">${\n\t\t\t\tLoc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_OTP_SWITCHING_MESSAGE_CHAT')\n\t\t\t}</span>`);\n\t\t\tnew SettingsRow({\n\t\t\t\trow: securityOtpMessageChatCheckerRow,\n\t\t\t\tparent: section,\n\t\t\t});\n\n\t\t\tEventEmitter.subscribe(\n\t\t\t\tthis.#getOTPChecker().switcher,\n\t\t\t\t'toggled',\n\t\t\t\t() => {\n\t\t\t\t\tif (this.getValue('SECURITY_IS_USER_OTP_ACTIVE') !== true && this.#getOTPChecker().isChecked())\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.#getOTPPopup().show();\n\t\t\t\t\t\tthis.#getOTPChecker().cancel();\n\t\t\t\t\t\tthis.#getOTPChecker().switcher.check(false);\n\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (this.hasValue('SECURITY_OTP_ENABLED') && this.getValue('SECURITY_OTP_ENABLED'))\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.getAnalytic()?.addEventToggle2fa(this.#getOTPChecker().isChecked());\n\t\t\t\t\t}\n\n\t\t\t\t\tif (this.#getOTPChecker().isChecked())\n\t\t\t\t\t{\n\t\t\t\t\t\tsecurityOtpPeriodSelectorRow.show();\n\t\t\t\t\t\tsecurityOtpMessageChatCheckerRow.show();\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tsecurityOtpPeriodSelectorRow.hide();\n\t\t\t\t\t\tsecurityOtpMessageChatCheckerRow.hide();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t);\n\t\t}\n\n\t\treturn section;\n\t}\n\n\t#getOTPChecker(): Checker\n\t{\n\t\tif (this.#otpChecker instanceof Checker)\n\t\t{\n\t\t\treturn this.#otpChecker;\n\t\t}\n\n\t\tthis.#otpChecker = new Checker({\n\t\t\tinputName: 'SECURITY_OTP',\n\t\t\tchecked: this.getValue('SECURITY_OTP'),\n\t\t\ttitle: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_SECURITY_OTP'),\n\t\t\tisEnable: true,\n\t\t\thideSeparator: true,\n\t\t\talignCenter: true,\n\t\t\tnoMarginBottom: true,\n\t\t});\n\t\tthis.#otpChecker.renderLockElement = () => {\n\t\t\treturn null;\n\t\t};\n\n\t\treturn this.#otpChecker;\n\t}\n\n\t#getOTPPopup(): Popup\n\t{\n\t\tif (this.#otpPopup instanceof Popup)\n\t\t{\n\t\t\treturn this.#otpPopup;\n\t\t}\n\n\t\tconst popupDescription = Tag.render`\n\t\t\t<div class=\"intranet-settings__security_popup_info\">\n\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_POPUP_OTP_ENABLE')}\n\t\t\t</div>\t\n\t\t`;\n\n\t\tconst popupButton = new BX.UI.Button({\n\t\t\ttext: Loc.getMessage('INTRANET_SETTINGS_POPUP_OTP_ENABLE_BUTTON'),\n\t\t\tcolor: BX.UI.Button.Color.PRIMARY,\n\t\t\tevents: {\n\t\t\t\tclick: () => {\n\t\t\t\t\tthis.#getOTPPopup().close();\n\t\t\t\t\tBX.SidePanel.Instance.open(this.getValue('SECURITY_OTP_PATH'));\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\n\t\tconst popupContent = Tag.render`\n\t\t\t<div class=\"intranet-settings__security_popup_container\">\n\t\t\t\t${popupDescription}\n\t\t\t\t<div class=\"ui-btn-container ui-btn-container-center\">\n\t\t\t\t\t${popupButton.getContainer()}\n\t\t\t\t</div>\t\t\t\n\t\t\t</div>\n\t\t`;\n\n\t\tthis.#otpPopup = new Popup({\n\t\t\tbindElement: this.#otpChecker.getInputNode(),\n\t\t\tcontent: popupContent,\n\t\t\tautoHide: true,\n\t\t\twidth: 337,\n\t\t\tangle: {\n\t\t\t\toffset: 200 - 15,\n\t\t\t},\n\t\t\toffsetLeft: this.#otpChecker.getInputNode().offsetWidth - 200 + 15,\n\t\t\tcloseByEsc: true,\n\t\t\tborderRadius: 18,\n\t\t});\n\n\t\treturn this.#otpPopup;\n\t}\n\n\t#getOTPPeriodSelector(): Selector\n\t{\n\t\tif (this.#otpSelector instanceof Selector)\n\t\t{\n\t\t\treturn this.#otpSelector;\n\t\t}\n\n\t\tthis.#otpSelector = new Selector({\n\t\t\tlabel: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_OTP_SWITCHING_PERIOD'),\n\t\t\tname: 'SECURITY_OTP_DAYS',\n\t\t\titems: this.getValue('SECURITY_OTP_DAYS').ITEMS,\n\t\t\tcurrent: this.getValue('SECURITY_OTP_DAYS').CURRENT,\n\t\t});\n\n\t\treturn this.#otpSelector;\n\t}\n\n\t#getOTPDescription(): BX.UI.Alert\n\t{\n\t\treturn new BX.UI.Alert({\n\t\t\ttext: this.#getOTPDescriptionText(),\n\t\t\tinline: true,\n\t\t\tsize: BX.UI.Alert.Size.SMALL,\n\t\t\tcolor: BX.UI.Alert.Color.PRIMARY,\n\t\t\tanimated: true,\n\t\t});\n\t}\n\n\t#getOTPDescriptionText(): string\n\t{\n\t\treturn `\n\t\t${Loc.getMessage('INTRANET_SETTINGS_SECTION_SECURITY_DESCRIPTION_FIRST')}\n\t\t</br></br>\n\t\t<span class=\"settings-section-description-focus-text --security-info\">\n\t\t\t${Loc.getMessage('INTRANET_SETTINGS_SECTION_SECURITY_DESCRIPTION_SECOND')}\n\t\t\t<a class=\"ui-section__link\" onclick=\"top.BX.Helper.show('redirect=detail&code=17728602')\">\n\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_CANCEL_MORE')}\n\t\t\t</a>\n\t\t</span>`;\n\t}\n\n\t#buildAccessIPSection(): SettingsSection\n\t{\n\t\tconst accessIpSection = new Section({\n\t\t\ttitle: Loc.getMessage('INTRANET_SETTINGS_SECTION_TITLE_ACCESS_IP'),\n\t\t\ttitleIconClasses: 'ui-icon-set --attention-i-circle',\n\t\t\tisOpen: false,\n\t\t\tisEnable: this.getValue('IP_ACCESS_RIGHTS_ENABLED'),\n\t\t\tbannerCode: 'limit_admin_ip',\n\t\t});\n\n\t\tconst section = new SettingsSection({\n\t\t\tsection: accessIpSection,\n\t\t\tparent: this,\n\t\t});\n\n\t\tconst descriptionRow = new Row({\n\t\t\tcontent: this.#getIpAccessDescription().getContainer(),\n\t\t});\n\t\tnew SettingsRow({\n\t\t\trow: descriptionRow,\n\t\t\tparent: section,\n\t\t});\n\n\t\tlet fieldsCount = 0;\n\t\tif (this.hasValue('IP_ACCESS_RIGHTS'))\n\t\t{\n\t\t\tfor (const ipUsersList of this.getValue('IP_ACCESS_RIGHTS'))\n\t\t\t{\n\t\t\t\tfieldsCount++;\n\t\t\t\tnew SettingsRow({\n\t\t\t\t\tparent: section,\n\t\t\t\t\tchild: this.#getUserSelectorRow(ipUsersList),\n\t\t\t\t});\n\t\t\t\tnew SettingsRow({\n\t\t\t\t\tparent: section,\n\t\t\t\t\tchild: this.#getAccessIpRow(ipUsersList),\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tif (fieldsCount === 0)\n\t\t{\n\t\t\tfieldsCount++;\n\t\t\tnew SettingsRow({\n\t\t\t\tparent: section,\n\t\t\t\tchild: this.#getEmptyUserSelectorRow(fieldsCount),\n\t\t\t});\n\t\t\tnew SettingsRow({\n\t\t\t\tparent: section,\n\t\t\t\tchild: this.#getEmptyAccessIpRow(fieldsCount),\n\t\t\t});\n\t\t}\n\n\t\tconst onclickAddField = () => {\n\t\t\tif (this.getValue('IP_ACCESS_RIGHTS_ENABLED'))\n\t\t\t{\n\t\t\t\tfieldsCount++;\n\n\t\t\t\tconst emptyUserSelectorRow = new Row({\n\t\t\t\t\tcontent: this.#getEmptyUserSelectorRow(fieldsCount).render(),\n\t\t\t\t});\n\t\t\t\tDom.insertBefore(emptyUserSelectorRow.render(), additionalUsersAccessIpButton.parentElement);\n\n\t\t\t\tconst emptyAccessIpRow = new Row({\n\t\t\t\t\tcontent: this.#getEmptyAccessIpRow(fieldsCount).render(),\n\t\t\t\t});\n\t\t\t\tDom.insertBefore(emptyAccessIpRow.render(), additionalUsersAccessIpButton.parentElement);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tBX.UI.InfoHelper.show('limit_admin_ip');\n\t\t\t}\n\t\t};\n\n\t\tconst additionalUsersAccessIpButton = Tag.render`\n\t\t\t<div class=\"ui-text-right ui-section__mt-16\">\n\t\t\t\t<a class=\"ui-section__link\" href=\"javascript:void(0)\" onclick=\"${onclickAddField}\">\n\t\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_ADDITIONAL_USER_ACCESS_IP')}\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t`;\n\n\t\tnew SettingsRow({\n\t\t\trow: new Row({\n\t\t\t\tcontent: additionalUsersAccessIpButton,\n\t\t\t}),\n\t\t\tparent: section,\n\t\t});\n\n\t\treturn section;\n\t}\n\n\t#getEmptyUserSelectorRow(fieldNumber): SettingsRow\n\t{\n\t\tconst userSelector = new UserSelector({\n\t\t\tinputName: `SECURITY_IP_ACCESS_${fieldNumber}_USERS[]`,\n\t\t\tlabel: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_SELECT_USER_ACCESS_IP'),\n\t\t\tenableDepartments: true,\n\t\t\tencodeValue: (value) => {\n\t\t\t\tif (!Type.isNil(value.id))\n\t\t\t\t{\n\t\t\t\t\treturn value.id === 'all-users' ? 'AU' : value.type + value.id.toString().split(':')[0];\n\t\t\t\t}\n\n\t\t\t\treturn null;\n\t\t\t},\n\t\t\tisEnable: this.getValue('IP_ACCESS_RIGHTS_ENABLED'),\n\t\t\thelpMessageProvider: this.helpMessageProviderFactory(Loc.getMessage('INTRANET_SETTINGS_FIELD_HELP_MESSAGE_PRO')),\n\t\t});\n\n\t\treturn new SettingsField({\n\t\t\tfieldView: userSelector,\n\t\t});\n\t}\n\n\t#getEmptyAccessIpRow(fieldNumber): SettingsRow\n\t{\n\t\tconst inputName = `SECURITY_IP_ACCESS_${fieldNumber}_IP`;\n\t\tconst accessIp = new TextInput({\n\t\t\tinputName,\n\t\t\tlabel: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_SELECT_ACCEPTED_IP'),\n\t\t\tisEnable: this.getValue('IP_ACCESS_RIGHTS_ENABLED'),\n\t\t\thelpMessageProvider: this.helpMessageProviderFactory(Loc.getMessage('INTRANET_SETTINGS_FIELD_HELP_MESSAGE_PRO')),\n\t\t});\n\n\t\treturn new SettingsField({\n\t\t\tfieldView: accessIp,\n\t\t});\n\t}\n\n\t#getUserSelectorRow(ipUsersList): SettingsRow\n\t{\n\t\tconst userSelector = new UserSelector({\n\t\t\tinputName: `SECURITY_IP_ACCESS_${ipUsersList.fieldNumber}_USERS[]`,\n\t\t\tlabel: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_SELECT_USER_ACCESS_IP'),\n\t\t\tvalues: Object.values(ipUsersList.users),\n\t\t\tenableDepartments: true,\n\t\t\tencodeValue: (value) => {\n\t\t\t\tif (!Type.isNil(value.id))\n\t\t\t\t{\n\t\t\t\t\treturn value.id === 'all-users' ? 'AU' : value.type + value.id.toString().split(':')[0];\n\t\t\t\t}\n\n\t\t\t\treturn null;\n\t\t\t},\n\t\t\tdecodeValue: (value: string) => {\n\t\t\t\tif (value === 'AU')\n\t\t\t\t{\n\t\t\t\t\treturn {\n\t\t\t\t\t\ttype: value,\n\t\t\t\t\t\tid: '',\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconst arr = value.match(/^(U|DR|D)(\\d+)/);\n\n\t\t\t\tif (!Type.isArray(arr))\n\t\t\t\t{\n\t\t\t\t\treturn {\n\t\t\t\t\t\ttype: null,\n\t\t\t\t\t\tid: null,\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\ttype: arr[1],\n\t\t\t\t\tid: arr[2],\n\t\t\t\t}\n\t\t\t},\n\t\t});\n\n\t\treturn new SettingsField({\n\t\t\tfieldView: userSelector,\n\t\t});\n\t}\n\n\t#getAccessIpRow(ipUsersList): SettingsRow\n\t{\n\t\tconst inputName = `SECURITY_IP_ACCESS_${ipUsersList.fieldNumber}_IP`;\n\t\tconst accessIp = new TextInput({\n\t\t\tinputName,\n\t\t\tlabel: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_SELECT_ACCEPTED_IP'),\n\t\t\tvalue: ipUsersList.ip,\n\t\t});\n\n\t\treturn new SettingsField({\n\t\t\tfieldView: accessIp,\n\t\t});\n\t}\n\n\t#getIpAccessDescription(): BX.UI.Alert\n\t{\n\t\treturn new BX.UI.Alert({\n\t\t\ttext: `\n\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_SECTION_SECURITY_DESCRIPTION_IP_ACCESS', {'#ARTICLE_CODE#': 'redirect=detail&code=17300230'})}\n\t\t\t\t<a class=\"ui-section__link\" onclick=\"top.BX.Helper.show('redirect=detail&code=17300230')\">\n\t\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_CANCEL_MORE')}\n\t\t\t\t</a>\n\t\t\t`,\n\t\t\tinline: true,\n\t\t\tsize: BX.UI.Alert.Size.SMALL,\n\t\t\tcolor: BX.UI.Alert.Color.PRIMARY,\n\t\t\tanimated: true,\n\t\t});\n\t}\n\n\t#buildPasswordRecoverySection(): SettingsSection\n\t{\n\t\treturn new Section({\n\t\t\ttitle: Loc.getMessage('INTRANET_SETTINGS_SECTION_TITLE_PASSWORD_RECOVERY'),\n\t\t\ttitleIconClasses: 'ui-icon-set',\n\t\t\tisOpen: false,\n\t\t\tcanCollapse: false,\n\t\t});\n\t}\n\n\t#buildDevicesHistorySection(): SettingsSection\n\t{\n\t\tconst devicesHistorySection = new Section({\n\t\t\ttitle: Loc.getMessage('INTRANET_SETTINGS_SECTION_TITLE_DEVICES_HISTORY'),\n\t\t\ttitleIconClasses: 'ui-icon-set --clock-with-arrow',\n\t\t\tisOpen: !this.hasValue('SECURITY_OTP_ENABLED') || !this.getValue('SECURITY_OTP_ENABLED'),\n\t\t\tisEnable: this.getValue('DEVICE_HISTORY_SETTINGS').is_enable,\n\t\t\tbannerCode: 'limit_office_login_history',\n\t\t});\n\n\t\tconst settingsSection = new SettingsSection({\n\t\t\tsection: devicesHistorySection,\n\t\t\tparent: this,\n\t\t});\n\n\t\tconst devicesHistoryDescription = new BX.UI.Alert({\n\t\t\ttext: `\n\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_SECTION_SECURITY_DESCRIPTION_DEVICE_HISTORY')}\n\t\t\t\t<a class=\"ui-section__link\" onclick=\"top.BX.Helper.show('redirect=detail&code=16623484')\">\n\t\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_CANCEL_MORE')}\n\t\t\t\t</a>\n\t\t\t`,\n\t\t\tinline: true,\n\t\t\tsize: BX.UI.Alert.Size.SMALL,\n\t\t\tcolor: BX.UI.Alert.Color.PRIMARY,\n\t\t\tanimated: true,\n\t\t})\n\n\t\tconst descriptionRow = new Row({\n\t\t\tcontent: devicesHistoryDescription.getContainer(),\n\t\t});\n\t\tnew SettingsRow({\n\t\t\trow: descriptionRow,\n\t\t\tparent: settingsSection,\n\t\t});\n\n\t\tif (this.hasValue('DEVICE_HISTORY_SETTINGS'))\n\t\t{\n\t\t\tconst messageNode = Tag.render`<span>${Loc.getMessage(\n\t\t\t\t'INTRANET_SETTINGS_FIELD_HELP_MESSAGE_ENT', { '#TARIFF#': 'ent250' }\n\t\t\t)}</span>`;\n\t\t\tconst cleanupDaysField = new Selector({\n\t\t\t\tlabel: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_DEVISE_HISTORY_CLEANUP_DAYS'),\n\t\t\t\tname: this.getValue('DEVICE_HISTORY_SETTINGS').name,\n\t\t\t\titems: this.getValue('DEVICE_HISTORY_SETTINGS').values,\n\t\t\t\tcurrent: this.getValue('DEVICE_HISTORY_SETTINGS').current,\n\t\t\t\tisEnable: this.getValue('DEVICE_HISTORY_SETTINGS').is_enable,\n\t\t\t\tbannerCode: 'limit_office_login_history',\n\t\t\t\thelpMessageProvider: this.helpMessageProviderFactory(messageNode),\n\t\t\t});\n\t\t\tif (!this.getValue('DEVICE_HISTORY_SETTINGS').is_enable)\n\t\t\t{\n\t\t\t\tEvent.bind(\n\t\t\t\t\tcleanupDaysField.getInputNode(),\n\t\t\t\t\t'click',\n\t\t\t\t\t() =>\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.getAnalytic()?.addEventOpenHint(this.getValue('DEVICE_HISTORY_SETTINGS').name);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t\tEvent.bind(\n\t\t\t\t\tmessageNode.querySelector('a'),\n\t\t\t\t\t'click',\n\t\t\t\t\t() => this.getAnalytic()?.addEventOpenTariffSelector(this.getValue('DEVICE_HISTORY_SETTINGS').name)\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tSecurityPage.addToSectionHelper(cleanupDaysField, settingsSection);\n\t\t}\n\n\t\tconst goToUserListButton = Tag.render`\n\t\t\t<div class=\"ui-text-right ui-section__mt-16\">\n\t\t\t\t<a class=\"ui-section__link\" href=\"/company/\" target=\"_blank\">\n\t\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_GO_TO_USER_LIST_LINK')}\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t`;\n\n\t\tnew SettingsRow({\n\t\t\trow: new Row({\n\t\t\t\tcontent: goToUserListButton,\n\t\t\t}),\n\t\t\tparent: settingsSection,\n\t\t});\n\n\t\treturn settingsSection;\n\t}\n\n\t#buildEventLogSection(): SettingsSection\n\t{\n\t\tconst eventLogSection = new Section({\n\t\t\ttitle: Loc.getMessage('INTRANET_SETTINGS_SECTION_TITLE_EVENT_LOG'),\n\t\t\ttitleIconClasses: 'ui-icon-set --list',\n\t\t\tisOpen: false,\n\t\t\tisEnable: this.hasValue('EVENT_LOG'),\n\t\t\tbannerCode: 'limit_office_login_log',\n\t\t});\n\n\t\tconst settingsSection = new SettingsSection({\n\t\t\tsection: eventLogSection,\n\t\t\tparent: this,\n\t\t});\n\n\t\tconst eventLogDescription = new BX.UI.Alert({\n\t\t\ttext: `\n\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_SECTION_SECURITY_DESCRIPTION_EVENT_LOG')}\n\t\t\t\t<a class=\"ui-section__link\" onclick=\"top.BX.Helper.show('redirect=detail&code=17296266')\">\n\t\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_CANCEL_MORE')}\n\t\t\t\t</a>\n\t\t\t`,\n\t\t\tinline: true,\n\t\t\tsize: BX.UI.Alert.Size.SMALL,\n\t\t\tcolor: BX.UI.Alert.Color.PRIMARY,\n\t\t\tanimated: true,\n\t\t})\n\n\t\tconst descriptionRow = new Row({\n\t\t\tcontent: eventLogDescription.getContainer(),\n\t\t});\n\t\tnew SettingsRow({\n\t\t\trow: descriptionRow,\n\t\t\tparent: settingsSection,\n\t\t});\n\n\t\tconst goToUserListButton = this.hasValue('EVENT_LOG')\n\t\t\t? Tag.render`\n\t\t\t\t<div class=\"ui-text-right ui-section__mt-16\">\n\t\t\t\t\t<a class=\"ui-section__link\" href=\"${this.getValue('EVENT_LOG')}\" target=\"_blank\">\n\t\t\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_GO_TO_EVENT_LOG_LINK')}\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t`\n\t\t\t: Tag.render`\n\t\t\t\t<div class=\"ui-text-right ui-section__mt-16\">\n\t\t\t\t\t<a class=\"ui-section__link\" href=\"javascript:void(0)\" onclick=\"BX.UI.InfoHelper.show('limit_office_login_log')\">\n\t\t\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_GO_TO_EVENT_LOG_LINK')}\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t`;\n\n\t\tnew SettingsRow({\n\t\t\trow: new Row({\n\t\t\t\tcontent: goToUserListButton,\n\t\t\t}),\n\t\t\tparent: settingsSection,\n\t\t});\n\n\t\treturn settingsSection;\n\t}\n\n\t#buildBlackListSection(): SettingsSection\n\t{\n\t\treturn new Section({\n\t\t\ttitle: Loc.getMessage('INTRANET_SETTINGS_SECTION_TITLE_BLACK_LIST'),\n\t\t\ttitleIconClasses: 'ui-icon-set --cross-50',\n\t\t\tisOpen: false,\n\t\t\tcanCollapse: false,\n\t\t\tsingleLink: {\n\t\t\t\thref: '/settings/configs/mail_blacklist.php',\n\t\t\t},\n\t\t});\n\t}\n}\n","import { BaseSettingsPage } from 'ui.form-elements.field';\nimport { Dom, Runtime, Type } from 'main.core';\nimport { EventEmitter, BaseEvent } from 'main.core.events';\n\nexport class ExternalTemporaryPage extends BaseSettingsPage\n{\n\t#type: ?string;\n\t#extensions: string[] = [];\n\n\tconstructor(type: string, extensions: string[])\n\t{\n\t\tsuper();\n\t\tthis.#type = type;\n\t\tthis.#extensions = extensions;\n\t}\n\n\tgetType(): string\n\t{\n\t\treturn this.#type;\n\t}\n\n\tonSuccessDataFetched(response)\n\t{\n\t\tRuntime\n\t\t\t.loadExtension(this.#extensions)\n\t\t\t.then((exports) => {\n\t\t\t\tlet externalPage;\n\t\t\t\tlet externalPageHasBeenFound = Object.values(exports)\n\t\t\t\t\t.some((externalPageClassOrInstance) => {\n\t\t\t\t\t\tif (Type.isObjectLike(externalPageClassOrInstance))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlet pageExemplar = null;\n\t\t\t\t\t\t\tif (externalPageClassOrInstance.prototype instanceof BaseSettingsPage)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tpageExemplar = new externalPageClassOrInstance();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (externalPageClassOrInstance instanceof BaseSettingsPage)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tpageExemplar = externalPageClassOrInstance;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (pageExemplar instanceof BaseSettingsPage)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\texternalPage = pageExemplar;\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t})\n\t\t\t\t;\n\t\t\t\tif (externalPageHasBeenFound === false)\n\t\t\t\t{\n\t\t\t\t\tconst event = new BaseEvent();\n\t\t\t\t\texternalPageHasBeenFound = EventEmitter.emit(\n\t\t\t\t\t\t\tEventEmitter.GLOBAL_TARGET,\n\t\t\t\t\t\t\t'BX.Intranet.Settings:onExternalPageLoaded:' + this.getType(),\n\t\t\t\t\t\t\tevent\n\t\t\t\t\t\t)\n\t\t\t\t\t\t.some((pageExemplar: BaseSettingsPage) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (pageExemplar instanceof BaseSettingsPage)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\texternalPage = pageExemplar;\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t})\n\t\t\t\t\t;\n\t\t\t\t}\n\n\t\t\t\tif (externalPage instanceof BaseSettingsPage)\n\t\t\t\t{\n\t\t\t\t\tthis.getParentElement().registerPage(externalPage);\n\t\t\t\t\texternalPage.setData(response.data);\n\t\t\t\t\tthis.getParentElement().removeChild(this);\n\n\t\t\t\t\tif (Dom.isShown(this.getPage()))\n\t\t\t\t\t{\n\t\t\t\t\t\texternalPage.getParentElement().show(externalPage.getType());\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.onFailDataFetched('The external page was not found.');\n\t\t\t\t}\n\n\t\t\t}, this.onFailDataFetched.bind(this))\n\t\t;\n\t}\n}\n","import {ajax} from 'main.core';\nimport type {BaseSettingsPage} from \"./pages/base-settings-page\";\n\nexport class PageManager\n{\n\t#pages: Array<BaseSettingsPage>\n\n\n\tconstructor(pages: Array<BaseSettingsPage>)\n\t{\n\t\tthis.#pages = pages;\n\t}\n\n\tfetchUnfetchedPages(): Promise\n\t{\n\t\tconst pages = [];\n\t\tthis.#pages.forEach((page: BaseSettingsPage) => {\n\t\t\tif (!page.hasData())\n\t\t\t{\n\t\t\t\tpages.push(page);\n\t\t\t}\n\t\t});\n\t\tif (pages.length <= 0)\n\t\t{\n\t\t\treturn Promise.resolve();\n\t\t}\n\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tajax.runComponentAction(\n\t\t\t\t'bitrix:intranet.settings',\n\t\t\t\t'getSome',\n\t\t\t\t{\n\t\t\t\t\tmode: 'class',\n\t\t\t\t\tdata: { types: pages.map((page: BaseSettingsPage) => page.getType()) }\n\t\t\t\t},\n\t\t\t).then((response) => {\n\t\t\t\tconst data = response.data ?? {};\n\t\t\t\tpages.forEach((page: BaseSettingsPage) => {\n\t\t\t\t\tif (data[page.getType()])\n\t\t\t\t\t{\n\t\t\t\t\t\tpage.setData(data[page.getType()]);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tresolve();\n\t\t\t}, reject)\n\t\t});\n\t}\n\n\tfetchPage(page: BaseSettingsPage): Promise\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst pageIsFound = this.#pages.some((savedPage: BaseSettingsPage) => {\n\t\t\t\tif (page.getType() === savedPage.getType())\n\t\t\t\t{\n\t\t\t\t\tajax.runComponentAction(\n\t\t\t\t\t\t'bitrix:intranet.settings',\n\t\t\t\t\t\t'get',\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tmode: 'class',\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\ttype: page.getType(),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t).then(resolve, reject);\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t});\n\t\t\tif (pageIsFound !== true)\n\t\t\t{\n\t\t\t\treturn reject({error: 'The page was not found in pageManager'});\n\t\t\t}\n\t\t});\n\t}\n\n\tcollectData()\n\t{\n\t\tconst data = {};\n\t\tthis.#pages.forEach((page: BaseSettingsPage) => {\n\t\t\tif (page.hasData())\n\t\t\t{\n\t\t\t\tdata[page.getType()] = this.constructor.getFormData(page.getFormNode());\n\t\t\t}\n\t\t});\n\n\t\treturn data;\n\t}\n\n\tstatic getFormData(formNode: HTMLElement): ?Object\n\t{\n\t\treturn BX.ajax.prepareForm(formNode).data;\n\t}\n}","import { Event, Runtime } from 'main.core';\nimport { Type } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\n\nexport class Searcher extends EventEmitter\n{\n\t#node: HTMLElement;\n\t#fastSearchValue: string = '';\n\t#fastSearchDelay: 800;\n\t#searchValue: string = '';\n\n\tconstructor(params)\n\t{\n\t\tsuper(params);\n\t\tthis.setEventNamespace('BX.Intranet.Settings:Searcher');\n\n\t\tthis.#node = params.node;\n\t\tEvent.bind(this.#node, 'input', Runtime.debounce(this.#onInput, this.#fastSearchDelay, this));\n\n\t\tif (document.activeElement === this.#node)\n\t\t{\n\t\t\tthis.#fastCheck();\n\t\t}\n\t}\n\n\t#onInput()\n\t{\n\t\tthis.#fastCheck();\n\t}\n\n\t#fastCheck()\n\t{\n\t\tconst currentValue = String(this.#node.value).trim();\n\t\tif (this.#fastSearchValue !== currentValue)\n\t\t{\n\t\t\tconst previousValue = this.#fastSearchValue;\n\n\t\t\tlet eventName;\n\t\t\tif (currentValue.length > 1)\n\t\t\t{\n\t\t\t\tthis.#fastSearchValue = currentValue;\n\t\t\t\teventName = 'fastSearch';\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.#fastSearchValue = '';\n\t\t\t\teventName = 'clearSearch';\n\t\t\t}\n\t\t\tthis.emit(eventName, {\n\t\t\t\tprevious: previousValue,\n\t\t\t\tcurrent: this.#fastSearchValue\n\t\t\t});\n\t\t\tthis.#search();\n\t\t}\n\t}\n\n\t#search()\n\t{\n\t\tif (this.#searchValue !== this.#fastSearchValue\n\t\t\t&& Type.isStringFilled(this.#fastSearchValue)\n\t\t\t&& this.#fastSearchValue.length > 1\n\t\t)\n\t\t{\n\t\t\tconst previousValue = this.#searchValue;\n\t\t\tthis.#searchValue = this.#fastSearchValue;\n\n\t\t\tthis.emit('search', {\n\t\t\t\tprevious: previousValue,\n\t\t\t\tcurrent: this.#searchValue\n\t\t\t});\n\t\t}\n\t}\n\n\tgetValue(): String\n\t{\n\t\treturn this.#node.value;\n\t}\n}\n","import { ajax, Http, Event, Runtime } from 'main.core';\nimport { Analytic } from './analytic';\nimport { ToolsPage } from './pages/tools-page';\nimport { EmployeePage } from './pages/employee-page';\nimport { RequisitePage } from './pages/requisite-page';\nimport { CommunicationPage } from './pages/communication-page';\nimport { PortalPage } from './pages/portal-page';\nimport { ConfigurationPage } from './pages/configuration-page';\nimport { SchedulePage } from './pages/schedule-page';\nimport { GdprPage } from './pages/gdpr-page';\nimport { SecurityPage } from './pages/security-page';\nimport { ExternalTemporaryPage } from './pages/external-temporary-page';\nimport { Type, Dom, Loc } from 'main.core';\nimport { BaseEvent, EventEmitter } from 'main.core.events';\nimport { MessageBox, MessageBoxButtons } from 'ui.dialogs.messagebox';\nimport { PageManager } from './page-manager';\nimport { BaseSettingsElement, ErrorCollection, BaseSettingVisitor,\n\tRecursiveFilteringVisitor, AscendingOpeningVisitor, BaseSettingsPage } from 'ui.form-elements.field';\nimport { Searcher } from './searcher';\n\nimport './css/style.css';\nimport './css/main_search_field.css';\n\nexport class Settings extends BaseSettingsElement\n{\n\t#basePage: string;\n\t#currentPage: ?BaseSettingsPage;\n\tisChanged: boolean = false;\n\t#menuNode: ?HTMLElement;\n\t#settingsNode: ?HTMLElement;\n\t#contentNode: ?HTMLElement;\n\t#searcher: Searcher;\n\t#pageManager: ?PageManager;\n\t#cancelMessageBox: ?MessageBox;\n\t#analytic: Analytic;\n\n\tconstructor(params)\n\t{\n\t\tsuper(params);\n\t\tthis.#analytic = new Analytic({\n\t\t\tisAdmin: true,\n\t\t\tlocationName: 'settings',\n\t\t\tisBitrix24: params.isBitrix24 === true,\n\t\t\tanalyticContext: Type.isStringFilled(params.analyticContext) ? params.analyticContext : null\n\t\t});\n\t\tthis.#analytic.addEventOpenSettings();\n\t\tthis.#analytic.addEventStartPagePage(params.startPage);\n\t\tthis.setEventNamespace('BX.Intranet.Settings');\n\t\tEventEmitter.subscribe(\n\t\t\tEventEmitter.GLOBAL_TARGET,\n\t\t\t'button-click',\n\t\t\t(event) => {\n\t\t\t\tconst [clickedBtn] = event.data;\n\t\t\t\tif (clickedBtn.TYPE === 'save')\n\t\t\t\t{\n\t\t\t\t\tthis.#onClickSaveBtn(event);\n\t\t\t\t}\n\t\t\t},\n\t\t);\n\n\t\tEventEmitter.subscribe(\n\t\t\tEventEmitter.GLOBAL_TARGET,\n\t\t\t'SidePanel.Slider:onClose',\n\t\t\tthis.#onSliderCloseHandler.bind(this),\n\t\t);\n\t\tthis.#menuNode = Type.isDomNode(params.menuNode) ? params.menuNode : null;\n\t\tthis.#settingsNode = Type.isDomNode(params.settingsNode) ? params.settingsNode : null;\n\t\tthis.#contentNode = Type.isDomNode(params.contentNode) ? params.contentNode : null;\n\t\tthis.#basePage = Type.isString(params.basePage) ? params.basePage : '';\n\n\t\tif (this.#menuNode)\n\t\t{\n\t\t\tthis.#menuNode.querySelectorAll('li.ui-sidepanel-menu-item a')\n\t\t\t\t.forEach(item => {\n\t\t\t\t\titem.addEventListener('click', (event) => {\n\t\t\t\t\t\tthis.show(item.dataset.type);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t}\n\n\t\tif (params.searchNode)\n\t\t{\n\t\t\tEvent.bind(params.searchNode, 'focus', this.#onClickSearchInput.bind(this, params.searchNode));\n\t\t}\n\n\t\tif (this.#settingsNode)\n\t\t{\n\t\t\tthis.#settingsNode.querySelector('.ui-button-panel input[name=\"cancel\"]')\n\t\t\t\t.addEventListener('click', this.#onClickCancelBtn);\n\t\t}\n\n\t\tparams.pages\n\t\t\t.concat(\n\t\t\t\tObject\n\t\t\t\t\t.values(params.externalPages)\n\t\t\t\t\t.map(({type, extensions}) => new ExternalTemporaryPage(type, extensions))\n\t\t\t)\n\t\t\t.forEach((page: BaseSettingsPage) => this.registerPage(page).expandPage(params.subPages[page.getType()]))\n\t\t;\n\n\t\tconst toolsMenuItem = BX.UI.DropdownMenuItem.getItemByNode(this.#menuNode.querySelector('[data-type=\"tools\"]'));\n\t\tif (toolsMenuItem.subItems && toolsMenuItem.subItems.length > 0)\n\t\t{\n\t\t\ttoolsMenuItem.hideSubmenu();\n\t\t\ttoolsMenuItem.setDefaultToggleButtonName();\n\t\t}\n\t}\n\n\tregisterPage(page: BaseSettingsPage): BaseSettingsPage\n\t{\n\t\tpage.setParentElement(this);\n\t\tpage.subscribe('change', this.#onEventChangeData.bind(this))\n\t\t\t.subscribe('fetch', this.#onEventFetchPage.bind(this))\n\t\t;\n\t\tpage.setAnalytic(this.#analytic);\n\n\t\treturn page;\n\t}\n\n\tgetPageByType(type: string): ?BaseSettingsPage\n\t{\n\t\treturn this.getChildrenElements().find((page: BaseSettingsPage) => {\n\t\t\treturn page.getType() === type;\n\t\t});\n\t}\n\n\tshow(type: string): void\n\t{\n\t\tif (!Type.isDomNode(this.#contentNode))\n\t\t{\n\t\t\tconsole.log('Not found settings container');\n\t\t\treturn;\n\t\t}\n\n\t\tconst nextPage = this.getPageByType(type);\n\t\tif (!(nextPage instanceof BaseSettingsPage))\n\t\t{\n\t\t\tconsole.log('Not found \"' + type + '\" page');\n\t\t\treturn;\n\t\t}\n\n\t\tif (nextPage === this.#currentPage)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tDom.hide(this.#currentPage?.getPage());\n\t\tif (Type.isNil(nextPage.getPage().parentNode))\n\t\t{\n\t\t\tDom.append(nextPage.getPage(), this.#contentNode);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.show(nextPage.getPage());\n\t\t}\n\t\tthis.#currentPage = nextPage;\n\t\tthis.#analytic.addEventChangePage(type);\n\t\tthis.#updatePageTypeToAddressBar();\n\t\tEventEmitter.emit(\n\t\t\tEventEmitter.GLOBAL_TARGET,\n\t\t\t'BX.Intranet.Settings:onAfterShowPage', {\n\t\t\t\tsource: this,\n\t\t\t\tpage: nextPage,\n\t\t\t},\n\t\t);\n\t}\n\n\t#getPageManager(): PageManager\n\t{\n\t\tif (!this.#pageManager)\n\t\t{\n\t\t\tthis.#pageManager = (new PageManager(this.getChildrenElements()))\n\t\t}\n\t\treturn this.#pageManager;\n\t}\n\n\t#onEventFetchPage(event: BaseEvent): Promise\n\t{\n\t\treturn this.#getPageManager().fetchPage(event.getTarget());\n\t}\n\n\t#updatePageTypeToAddressBar()\n\t{\n\t\tlet url = new URL(window.location.href);\n\t\turl.searchParams.set('page', this.#currentPage?.getType());\n\t\turl.searchParams.delete('IFRAME');\n\t\turl.searchParams.delete('IFRAME_TYPE');\n\t\ttop.window.history.replaceState(null, '', url.toString());\n\t}\n\n\t#onSliderCloseHandler(event: BaseEvent)\n\t{\n\t\tconst [panelEvent] = event.getCompatData();\n\t\tif (this.#cancelMessageBox instanceof MessageBox)\n\t\t{\n\t\t\tpanelEvent.denyAction();\n\t\t\treturn false;\n\t\t}\n\n\t\tif (this.isChanged && panelEvent.slider.getData()?.get('ignoreChanges') !== true)\n\t\t{\n\t\t\tpanelEvent.denyAction();\n\t\t\tthis.#cancelMessageBox = MessageBox.create({\n\t\t\t\tmessage: Loc.getMessage('INTRANET_SETTINGS_CONFIRM_ACTION_DESC'),\n\t\t\t\tmodal: true,\n\t\t\t\tbuttons: [\n\t\t\t\t\tnew BX.UI.Button({\n\t\t\t\t\t\ttext: Loc.getMessage('INTRANET_SETTINGS_CONFIRM_ACTION_OK'),\n\t\t\t\t\t\tcolor: BX.UI.Button.Color.SUCCESS,\n\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\tclick: () => {\n\t\t\t\t\t\t\t\tEventEmitter.emit(EventEmitter.GLOBAL_TARGET, 'BX.Intranet.Settings:onCancel', {});\n\t\t\t\t\t\t\t\tpanelEvent.slider.getData().set('ignoreChanges', true);\n\t\t\t\t\t\t\t\tthis.isChanged = false;\n\t\t\t\t\t\t\t\tBX.UI.ButtonPanel.hide();\n\t\t\t\t\t\t\t\tthis.#cancelMessageBox.close();\n\t\t\t\t\t\t\t\tthis.#cancelMessageBox = null;\n\t\t\t\t\t\t\t\tpanelEvent.slider.close();\n\t\t\t\t\t\t\t\tpanelEvent.slider.destroy();\n\n\t\t\t\t\t\t\t\tif (this.#basePage.includes('/configs/')) {\n\t\t\t\t\t\t\t\t\tthis.#reload('/index.php');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t}\n\t\t\t\t\t}),\n\t\t\t\t\tnew BX.UI.CancelButton({\n\t\t\t\t\t\ttext: Loc.getMessage('INTRANET_SETTINGS_CONFIRM_ACTION_CANCEL'),\n\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\tclick: () => {\n\t\t\t\t\t\t\t\tthis.#cancelMessageBox.close();\n\t\t\t\t\t\t\t\tthis.#cancelMessageBox = null;\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t}\n\t\t\t\t\t}),\n\t\t\t\t],\n\t\t\t});\n\t\t\treturn this.#cancelMessageBox.show();\n\t\t}\n\n\t\tif (this.#basePage.includes('/configs/') || this.reloadAfterClose)\n\t\t{\n\t\t\tthis.#reload('/index.php');\n\t\t}\n\t}\n\n\t#reload(url: ?string = null)\n\t{\n\t\tconst loader =  document.querySelector('#ui-sidepanel-wrapper-loader');\n\t\tif (loader)\n\t\t{\n\t\t\tloader.style.display = '';\n\t\t}\n\t\tif (Type.isString(url))\n\t\t{\n\t\t\ttop.window.location.href = url;\n\t\t}\n\t\telse\n\t\t{\n\t\t\ttop.window.location.href = this.#basePage;\n\t\t}\n\t}\n\n\t#onEventChangeData(event)\n\t{\n\t\tthis.isChanged = true;\n\t\tBX.UI.ButtonPanel.show();\n\t}\n\n\t#onClickSaveBtn(event)\n\t{\n\t\tlet data = this.#getPageManager().collectData();\n\t\tEventEmitter.emit(EventEmitter.GLOBAL_TARGET, 'BX.Intranet.Settings:onBeforeSave', {\n\t\t\tdata: data,\n\t\t});\n\t\tthis.#analytic.send();\n\t\tajax.runComponentAction(\n\t\t\t'bitrix:intranet.settings',\n\t\t\t'set',\n\t\t\t{\n\t\t\t\tmode: 'class',\n\t\t\t\tdata: Http.Data.convertObjectToFormData(data),\n\t\t\t},\n\t\t).then(this.#successSaveHandler.bind(this), this.#failSaveHandler.bind(this));\n\t}\n\n\t#successSaveHandler(response: Object)\n\t{\n\t\tthis.isChanged = false;\n\t\tthis.#hideWaitIcon();\n\t\tBX.UI.ButtonPanel.hide();\n\t\t// EventEmitter.emit(EventEmitter.GLOBAL_TARGET, 'BX.Intranet.Settings:onSuccessSave', {});\n\t\tthis.reloadAfterClose = true;\n\t}\n\n\t#failSaveHandler(response: Object)\n\t{\n\t\tlet errorCollection = this.#prepareErrorCollection(response.errors);\n\t\tthis.#hideWaitIcon();\n\n\t\tEventEmitter.emit('BX.UI.FormElement.Field:onFailedSave', {\n\t\t\terrors: errorCollection,\n\t\t});\n\n\t\tlet pageType = this.#selectPageForError(errorCollection);\n\t\tthis.#activeMenuItem(pageType);\n\t}\n\n\t#activeMenuItem(type: string)\n\t{\n\t\tlet itemNode = document.querySelector('li a[data-type=\"' + type + '\"]');\n\t\tif (itemNode)\n\t\t{\n\t\t\titemNode.dispatchEvent(new window.Event('click'));\n\t\t}\n\t}\n\n\t#prepareErrorCollection(rawErrors): Object\n\t{\n\t\tlet errorCollection = {};\n\t\tfor (let error of rawErrors)\n\t\t{\n\t\t\tlet type = error.customData?.page;\n\t\t\tlet field = error.customData?.field;\n\t\t\tif (Type.isNil(type) || Type.isNil(field))\n\t\t\t{\n\t\t\t\tErrorCollection.showSystemError(Loc.getMessage('INTRANET_SETTINGS_ERROR_FETCH_DATA'));\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif (Type.isNil(errorCollection[type]))\n\t\t\t{\n\t\t\t\terrorCollection[type] = {};\n\t\t\t}\n\t\t\tif (Type.isNil(errorCollection[type][field]))\n\t\t\t{\n\t\t\t\terrorCollection[type][field] = [];\n\t\t\t}\n\t\t\terrorCollection[type][field].push(error.message);\n\t\t}\n\n\t\treturn errorCollection;\n\t}\n\n\t#onClickCancelBtn(event)\n\t{\n\t\ttop.BX.SidePanel.Instance.close();\n\t}\n\n\t#hideWaitIcon()\n\t{\n\t\tlet saveBtnNode = document.querySelector('#intranet-settings-page #ui-button-panel-save');\n\t\tDom.removeClass(saveBtnNode, 'ui-btn-wait');\n\t}\n\n\t#selectPageForError(errors): string\n\t{\n\t\tfor (let pageType in errors)\n\t\t{\n\t\t\treturn pageType;\n\t\t}\n\t}\n\n\t#onClickSearchInput(node: HTMLInputElement, event: Event)\n\t{\n\t\tEvent.unbindAll(node);\n\n\t\tif (!this.#searcher)\n\t\t{\n\t\t\tthis.#searcher = new Searcher({node});\n\t\t\tthis.openFoundSections = Runtime.debounce(this.openFoundSections, 1000, this);\n\n\t\t\tthis\n\t\t\t\t.#getPageManager()\n\t\t\t\t.fetchUnfetchedPages()\n\t\t\t\t.then(() => {\n\t\t\t\t\tthis.#searcher.subscribe('fastSearch', this.#markFoundText.bind(this));\n\t\t\t\t\tthis.#searcher.subscribe('clearSearch', this.#clearFoundText.bind(this));\n\t\t\t\t\tif (this.#searcher.getValue().length > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.#markFoundText(new BaseEvent({data: {current: this.#searcher.getValue()}}))\n\t\t\t\t\t}\n\t\t\t\t}, () => {\n\t\t\t\t})\n\t\t\t\t.finally(() => {\n\t\t\t\t})\n\t\t\t;\n\n\t\t}\n\t}\n\n\t#markFoundText(event: BaseEvent)\n\t{\n\t\tconst searchText = event.getData().current.toLowerCase();\n\n\t\tconst foundPages = this.getChildrenElements().filter((page: BaseSettingsPage) => {\n\t\t\tconst menuNode = this.#menuNode\n\t\t\t\t.querySelector('li.ui-sidepanel-menu-item a[data-type=\"' + page.getType() + '\"]')\n\t\t\t\t.closest('li.ui-sidepanel-menu-item')\n\t\t\t;\n\n\t\t\tremoveMarkTag(page.getPage());\n\n\t\t\tif (page.getPage().innerText.toLowerCase().indexOf(searchText) >= 0)\n\t\t\t{\n\t\t\t\tDom.addClass(menuNode, '--found');\n\t\t\t\taddMarkTag(page.getPage(), searchText);\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tDom.removeClass(menuNode, '--found');\n\n\t\t\treturn false;\n\t\t});\n\n\t\tif (foundPages.length > 0)\n\t\t{\n\t\t\tthis.openFoundSections(foundPages);\n\t\t}\n\t}\n\n\t#clearFoundText(event: BaseEvent)\n\t{\n\t\tthis.getChildrenElements().forEach((page: BaseSettingsPage) => {\n\t\t\tconst menuNode = this.#menuNode\n\t\t\t\t.querySelector('li.ui-sidepanel-menu-item a[data-type=\"' + page.getType() + '\"]')\n\t\t\t\t.closest('li.ui-sidepanel-menu-item')\n\t\t\t;\n\t\t\tremoveMarkTag(page.getPage());\n\t\t\tDom.removeClass(menuNode, '--found');\n\t\t});\n\t}\n\n\topenFoundSections(pages)\n\t{\n\t\tpages.forEach(\n\t\t\t(baseSettingsElement) =>\n\t\t\t{\n\t\t\t\tRecursiveFilteringVisitor.startFrom(\n\t\t\t\t\tbaseSettingsElement,\n\t\t\t\t\t(element) => element.render().querySelector('mark') instanceof HTMLElement\n\t\t\t\t).forEach((element) => AscendingOpeningVisitor.startFrom(element));\n\t\t\t})\n\t\t;\n\t}\n}\n\nfunction revertMarkTag(properlyMark: HTMLElement)\n{\n\tif (properlyMark.sourceNode)\n\t{\n\t\tproperlyMark.beforeMark && properlyMark.beforeMark.parentNode ? properlyMark.beforeMark.parentNode.removeChild(properlyMark.beforeMark) : '';\n\t\tproperlyMark.afterMark && properlyMark.afterMark.parentNode ? properlyMark.afterMark.parentNode.removeChild(properlyMark.afterMark) : '';\n\n\t\tproperlyMark.parentNode.replaceChild(properlyMark.sourceNode, properlyMark);\n\n\t\tdelete properlyMark.beforeMark;\n\t\tdelete properlyMark.afterMark;\n\t\tdelete properlyMark.sourceNode;\n\t}\n}\n\nfunction removeMarkTag(node)\n{\n\tnode.querySelectorAll('mark')\n\t\t.forEach((markNode) => {\n\t\t\trevertMarkTag(markNode);\n\t\t})\n\t;\n}\n\nfunction addMarkTag(node, searchText): void\n{\n\tif (!(node instanceof HTMLElement))\n\t{\n\t\tif (node instanceof Text)\n\t\t{\n\t\t\tconst startIndex = node.data.toLowerCase().indexOf(searchText);\n\t\t\tif (startIndex >= 0)\n\t\t\t{\n\t\t\t\tconst value = node.data;\n\t\t\t\tconst nextSibling = node.nextSibling;\n\t\t\t\tconst finishIndex = startIndex + searchText.length;\n\t\t\t\tconst parentNode = node.parentNode;\n\n\t\t\t\tparentNode.removeChild(node);\n\n\t\t\t\tconst properlyMark = document.createElement('MARK');\n\t\t\t\tproperlyMark.innerText = value.substring(startIndex, finishIndex);\n\t\t\t\tproperlyMark.sourceNode = node;\n\t\t\t\tproperlyMark.beforeMark = null;\n\t\t\t\tproperlyMark.afterMark = null;\n\n\t\t\t\tif (startIndex > 0)\n\t\t\t\t{\n\t\t\t\t\tconst beforeMark = new window.Text(value.substring(0, startIndex));\n\t\t\t\t\tnextSibling ? parentNode.insertBefore(beforeMark, nextSibling) : parentNode.appendChild(beforeMark);\n\t\t\t\t\tproperlyMark.beforeMark = beforeMark;\n\t\t\t\t}\n\n\t\t\t\tnextSibling ? parentNode.insertBefore(properlyMark, nextSibling) : parentNode.appendChild(properlyMark);\n\n\t\t\t\tif (finishIndex < value.length)\n\t\t\t\t{\n\t\t\t\t\tconst afterMark =  new window.Text(value.substring(finishIndex, value.length));\n\t\t\t\t\tnextSibling ? parentNode.insertBefore(afterMark, nextSibling) : parentNode.appendChild(afterMark);\n\t\t\t\t\tproperlyMark.afterMark = afterMark;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn;\n\t}\n\n\tnode.childNodes.forEach((child)  => {\n\t\tif (\n\t\t\tchild instanceof HTMLElement && child.innerText.toLowerCase().indexOf(searchText) >= 0\n\t\t\t|| child.data && child.data.toLowerCase().indexOf(searchText) >= 0\n\t\t)\n\t\t{\n\t\t\taddMarkTag(child, searchText);\n\t\t}\n\t});\n}\n\nexport {\n\tToolsPage,\n\tEmployeePage,\n\tPortalPage,\n\tCommunicationPage,\n\tRequisitePage,\n\tConfigurationPage,\n\tSchedulePage,\n\tGdprPage,\n\tSecurityPage\n};"],"names":["Analytic","context","eventType","eventData","isBitrix24","Object","keys","length","ajax","runComponentAction","mode","data","then","options","event","AnalyticSettingsEvent","OPEN","tool","category","p1","isAdmin","AnalyticSettingsUserRole","ADMIN","NOT_ADMIN","c_section","analyticContext","c_element","locationName","sendData","fieldName","addEvent","page","START_PAGE","VIEW","toolName","state","type","p2","AnalyticSettingsTurnState","ON","OFF","AnalyticSettingsCategory","ToolsPage","_classPrivateFieldInitSpec","titlePage","Loc","getMessage","descriptionPage","contentNode","description","Row","content","getDescription","getContainer","SettingsRow","row","parent","hasValue","renderTo","descriptionText","BX","UI","Alert","text","inline","size","Size","SMALL","color","Color","PRIMARY","animated","BaseSettingsPage","tools","getValue","startSort","forEach","item","push","menuId","subgroups","toolSelectorItems","toolSelector","SwitcherNested","id","code","title","name","link","infoHelperCode","linkTitle","isChecked","enabled","mainInputName","isOpen","items","isDefault","helpMessage","toolSelectorSection","SettingsSection","section","Dom","style","getSectionView","render","attr","append","child","subgroupConfig","Type","isNull","toolSelectorItem","SwitcherNestedItem","inputName","settingsPath","settingsTitle","disabled","getSwitcher","getNode","opacity","EventEmitter","subscribe","getAnalytic","addEventToggleTools","EventBX","bind","show","Section","titleIconClasses","canCollapse","toolId","bindElement","message","PopupWindowManager","create","darkMode","autoHide","angle","offsetLeft","bindOptions","position","closeByEsc","EmployeePage","_classPrivateMethodInitSpec","response","querySelector","innerText","profileSection","inviteSection","sectionSettings","hasSelectValue","currentValue","current","values","value","selected","nameFormatField","Selector","label","hints","settingsField","SettingsField","fieldView","customFormatNameField","TextInput","customFormatNameRow","isHidden","getInputNode","addEventListener","target","hide","formatNumberField","hintTitle","addToSectionHelper","addressFormatField","addressFormatRow","separator","className","showBirthYearField","InlineChecker","hintOn","hintOff","checked","fastReqField","Checker","helpDesk","fastReqRow","switcher","addEventConfigEmployee","CHANGE_QUICK_REG","inviteToUserField","inviteToUserRow","CHANGE_REG_ALL","showQuitField","showQuitRow","newUserField","newUserRow","newUserLfField","newUserLfRow","extranetField","CHANGE_EXTRANET_INVITE","ButtonBar","buttons","Tag","button","LandingButton","Button","round","noCaps","MEDIUM","LIGHT_BORDER","apply","LandingButtonState","EditState","landing","setText","setDropdown","bindEvent","openNewTab","edit_url","url","window","open","focus","ShowState","menuRenderer","unbindEvent","setColor","setMenu","CreateState","request","getState","ButtonState","WAITING","setState","is_public","ErrorCollection","showSystemError","errors","LandingCard","landingOptions","qrContainer","QRCode","public_url","width","height","onclickOpenEdit","qrRender","getCopyButton","EXTRA_SMALL","SUCCESS","events","click","clipboard","copy","top","Notification","Center","notify","LandingButtonFactory","landingData","renderer","btn","is_connected","getButton","maxWidth","html","companyId","company_id","requisiteId","requisite_id","bankRequisiteId","bank_requisite_id","Card","company","TITLE","isStringFilled","phone","email","site","requisiteFieldsRender","getButtonsBar","ID","fields","field","renderField","VALUE","buttonBar","attrs","href","getCompanyUrl","RequisitePage","addCustomEvent","params","eventName","key","reload","reqSection","descriptionRow","companies","requisites","phones","sites","emails","landings","landingsData","isArray","defaultCompanyRow","cardRender","isNil","cardRow","addCompanyLinkRender","Event","addEventConfigRequisite","OPEN_ADD_COMPANY","card","factory","setMenuRenderer","landingCard","COPY_LINK_CARD","landingBtn","hasClass","EDIT_CARD","CREATE_CARD","addButton","setButtonBar","CommunicationPage","chatSection","diskSection","newsFeedSection","settingsSection","allowPostFeedField","hideSeparator","userSelectorField","UserSelector","enableDepartments","encodeValue","toString","split","decodeValue","arr","match","userSelectorRow","allowPostToAllField","likeBtnNameField","TextInputInline","valueColor","hintDesc","canPostGeneralChatField","settingsRow","canPostGeneralChatListField","canPostGeneralChatListRow","canPostGeneralChatListSettingsRow","subRowForGeneralChatList","managerSelectorField","enableAll","managerSelectorRow","leaveMessageField","adminMessageField","allowUrlPreviewField","overdueChatsField","fileViewerField","messageNode","fileLimitField","isEnable","is_enable","bannerCode","helpMessageProvider","helpMessageProviderFactory","fileLimitRow","addEventOpenHint","addEventOpenTariffSelector","allowEditDocField","connectDiskField","publicLinkField","enableBlockDocField","enableFindField","SiteTitleField","setParentElement","setEventNamespace","siteTitleOptions","canUserEditTitle","logo24","canUserEditLogo24","_classPrivateMethodGet","setInterval","monitorInput","clearInterval","emit","GLOBAL_TARGET","getEventNamespace","BaseEvent","stopInputMonitoring","startInputMonitoring","getData","getId","getName","getLabel","BaseSettingsElement","placeholder","SiteDomainField","siteDomainOptions","subDomainName","getFieldView","setAttribute","timeout","clearTimeout","setTimeout","validateInput","hostname","mainDomainName","isRenameable","occupiedDomains","join","replace","newDomain","trim","setErrors","test","includes","cleanError","copyButton","bindCopyClick","Text","encode","renderErrors","setPortalSettings","container","portalSettings","logoNode","titleNode","logo24Node","hasAttribute","dataset","prevDisplay","display","isUndefined","innerHTML","visibility","removeProperty","logo","isPlainObject","backgroundImage","encodeURI","src","setPortalThemeSettings","themeSettings","theme","lightning","String","indexOf","removeClass","addClass","previewImage","backgroundSize","background","previewColor","backgroundColor","ThemePickerElement","themePickerSettings","allowSetDefaultTheme","applyTheme","themeNode","getItemNode","getTheme","themeId","getAppliedTheme","applyPortalThemePreview","showSaveButton","form","dispatchEvent","document","overflow","uploadBtn","handleNewThemeButtonClick","themeContainer","Array","from","getThemes","itemNode","createItem","canSetDefaultTheme","unbindAll","appendChild","renderLockElement","showBanner","Ears","noScrollbar","init","getNewThemeDialog","getClass","InfoHelper","BaseField","Intranet","Bitrix24","ThemePicker","setThemes","themes","setBaseThemes","baseThemes","applyThemeAssets","getContentContainer","closure","handleRemoveBtnClick","getThemeId","handleItemClick","addItem","SiteThemePickerField","baseEvent","HiddenInput","defaultValue","helpDeskCode","SiteLogoField","canUserEditLogo","siteLogoOptions","TileWidget","StackWidget","StackWidgetSize","defaultOptions","maxFileCount","acceptOnlyImages","multiple","acceptedFileTypes","console","error","onFileError","onLogoAdd","onLogoRemove","preventDefault","allowReplaceSingle","hiddenFieldName","hiddenFieldsContainer","assignAsFile","imageResizeWidth","imageResizeHeight","imageResizeMode","imageResizeMimeType","imagePreviewWidth","imagePreviewHeight","imagePreviewResizeMode","files","serverFileId","serverId","treatImageAsFile","downloadUrl","serverPreviewUrl","serverPreviewWidth","serverPreviewHeight","preload","LARGE","subscribeOnce","removeFailedLogo","tabField","getParentElement","getUploader","getFiles","isLoadFailed","removeFiles","file","getClientPreviewUrl","uploaderContent","createElement","SiteTitlePreviewWidget","portalThemeSettings","onChange","onSetTheme","PortalPage","addEventConfigPortal","CHANGE_PORTAL_NAME","CHANGE_PORTAL_LOGO","CHANGE_PORTAL_THEME","buildSiteTitleSection","buildDomainSection","buildThemeSection","filter","sectionView","sectionField","AlertSize","AlertColor","previewWidget","tabsField","TabsField","siteNameRow","siteTitleTab","TabField","tabsOptions","head","body","siteTitleField","helpMessages","siteLogoTab","restricted","Promise","resolve","reject","Runtime","loadExtension","exports","siteLogoField","initUploader","activateTab","location","inputDefaultWidth","domainSettings","firstTab","siteDomainField","CHANGE_PORTAL_SITE","isCustomizable","replaceAll","res","justRow","ConfigurationPage","timeFormat","offsetUTC","currentDate","dateTimeSection","mailsSection","mapsSection","cardsProductPropertiesSection","additionalSettingsSection","regionField","newData","longDates","format24Time","trackOutLettersRead","trackOutMailsClick","defaultEmailFrom","cardsProvider","cardsProviderRow","googleKeyFrontend","googleKeyFrontendRow","mapApiKeyBackend","googleKeyBackendRow","showPhotoPlacesMaps","showPhotoPlacesMapsRow","useGeocodingService","useGeocodingServiceRow","productPropertiesSection","cardsProviderProductProperties","cardsProviderProductPropertiesRow","descriptionYandex","descriptionYandexRow","yandexKeyProductProperties","yandexKeyProductPropertiesRow","descriptionGoogle","descriptionGoogleRow","googleKeyProductProperties","googleKeyProductPropertiesRow","allInstallMarketApplication","allInstallMarketApplicationRow","addEventConfigConfiguration","CHANGE_MARKET","allCanBuyTariff","allCanBuyTariffRow","CHANGE_PAY_TARIFF","allowMeasureStressLevel","allowMeasureStressLevelRow","collectGeoData","collectGeoDataRow","showSettingsAllUsers","showSettingsAllUsersRow","element","Dialogs","MessageBox","MessageBoxButtons","OK_CANCEL","check","SchedulePage","scheduleSection","holidaysSection","forCompanyTab","workTimeRow","workTimeContainerNode","workTimeStartField","workTimeEndField","containerTab","itemPickerField","ItemPicker","isMulti","itemPickerRow","weekStartField","weekStartRow","countDays","countDaysNode","holidaysRow","holidaysField","count","GdprPage","gdprSection","marketDirectory","titleField","contactNameField","emailField","dateField","adjust","calendar","node","bTime","bHideTime","addApplicationsRender","SecurityPage","otpSection","securityOtpCheckerRow","securityOtpPeriodSelectorRow","switcherWrapper","SingleChecker","Switcher","SwitcherSize","small","securityOtpMessageChatCheckerRow","cancel","addEventToggle2fa","alignCenter","noMarginBottom","Popup","popupDescription","popupButton","close","SidePanel","Instance","popupContent","offset","offsetWidth","borderRadius","ITEMS","CURRENT","accessIpSection","fieldsCount","ipUsersList","onclickAddField","emptyUserSelectorRow","insertBefore","additionalUsersAccessIpButton","parentElement","emptyAccessIpRow","fieldNumber","userSelector","accessIp","users","ip","devicesHistorySection","devicesHistoryDescription","cleanupDaysField","goToUserListButton","eventLogSection","eventLogDescription","singleLink","ExternalTemporaryPage","extensions","externalPage","externalPageHasBeenFound","some","externalPageClassOrInstance","isObjectLike","pageExemplar","prototype","getType","registerPage","setData","removeChild","isShown","getPage","onFailDataFetched","PageManager","pages","hasData","types","map","pageIsFound","savedPage","constructor","getFormData","getFormNode","formNode","prepareForm","Searcher","debounce","activeElement","previousValue","previous","Settings","addEventOpenSettings","addEventStartPagePage","startPage","clickedBtn","TYPE","isDomNode","menuNode","settingsNode","isString","basePage","querySelectorAll","searchNode","concat","externalPages","expandPage","subPages","toolsMenuItem","DropdownMenuItem","getItemByNode","subItems","hideSubmenu","setDefaultToggleButtonName","setAnalytic","getChildrenElements","find","log","nextPage","getPageByType","parentNode","addEventChangePage","source","baseSettingsElement","RecursiveFilteringVisitor","startFrom","HTMLElement","AscendingOpeningVisitor","fetchPage","getTarget","URL","searchParams","set","history","replaceState","getCompatData","panelEvent","denyAction","isChanged","slider","get","modal","ButtonPanel","destroy","CancelButton","reloadAfterClose","loader","collectData","send","Http","Data","convertObjectToFormData","errorCollection","pageType","rawErrors","customData","saveBtnNode","openFoundSections","fetchUnfetchedPages","searchText","toLowerCase","foundPages","closest","removeMarkTag","addMarkTag","revertMarkTag","properlyMark","sourceNode","beforeMark","afterMark","replaceChild","markNode","startIndex","nextSibling","finishIndex","substring","childNodes"],"mappings":"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"}