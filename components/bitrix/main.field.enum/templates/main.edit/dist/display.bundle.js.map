{"version":3,"file":"display.bundle.js","sources":["../src/dialog.js","../src/ui.js"],"sourcesContent":["import {Dialog as EntitySelector, Item, TagSelector} from 'ui.entity-selector';\nimport {Dom, Event, Tag, Runtime} from \"main.core\";\nimport {BaseEvent} from \"main.core.events\";\nimport type {DialogOptions} from \"ui.entity-selector\";\nimport TagItem from \"/ui/install/js/ui/entity-selector/src/tag-selector/tag-item\";\n\ntype Element = {\n\tVALUE: string,\n\tNAME: string,\n\tIS_SELECTED?: boolean,\n};\n\ntype Params = {\n\ttargetNodeId: string,\n\tfieldName: string,\n\tfieldNameForEvent: string,\n\tisMultiple: string,\n\titems: [],\n\tfieldTitle: string,\n\tcontext: string,\n\tmessages: string[],\n}\n\ntype DialogItem = {\n\tid: string,\n\tentityId: string,\n\ttitle: string,\n\ttabs: string,\n}\n\nexport class Dialog\n{\n\ttargetNode: HTMLElement = null;\n\twrapper: HTMLElement = null;\n\tvaluesWrapper: HTMLElement = null;\n\tinput: HTMLElement = null;\n\tfieldName: string;\n\tfieldNameForEvent: string;\n\tcontext: string;\n\tfieldTitle: string;\n\tisMultiple: boolean;\n\tdialogSelector: EntitySelector = null;\n\ttagSelector: TagSelector = null;\n\tselectedItems: Set<DialogItem> = new Set();\n\titems: Set<DialogItem> = new Set();\n\tmessages: string[] = [];\n\n\tconstructor(params: Params): void\n\t{\n\t\tthis.targetNode = document.getElementById(params.targetNodeId);\n\n\t\tif (this.targetNode === null)\n\t\t{\n\t\t\tthrow new Error(`Target node: ${params.targetNodeId} not found`);\n\t\t}\n\n\t\tthis.fieldName = params.fieldName.toLowerCase();\n\t\tthis.fieldNameForEvent = params.fieldNameForEvent;\n\t\tthis.fieldTitle = params.fieldTitle;\n\t\tthis.context = params.context;\n\t\tthis.messages = params.messages;\n\t\tthis.isMultiple = (params.isMultiple === 'true');\n\n\t\tthis.prepareItems(params);\n\n\t\tthis.createWrappers();\n\t\tif (this.isMultiple)\n\t\t{\n\t\t\tRuntime.loadExtension('ui.entity-selector').then(exports => {\n\t\t\t\tthis.tagSelector = this.getTagSelector(exports.TagSelector);\n\t\t\t\tthis.tagSelector.renderTo(this.wrapper);\n\t\t\t\tthis.adjustLayout(false);\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tRuntime.loadExtension('ui.entity-selector').then(exports => {\n\t\t\t\tthis.dialogSelector = this.getDialogSelector(exports.Dialog);\n\t\t\t\tthis.prepareInput(this.targetNode);\n\n\t\t\t\tEvent.bind(this.targetNode, 'click', () => {\n\t\t\t\t\tthis.show();\n\t\t\t\t});\n\n\t\t\t\tif (this.selectedItems.size)\n\t\t\t\t{\n\t\t\t\t\tconst selectedItems = [...this.selectedItems];\n\t\t\t\t\tthis.input.value = selectedItems[0].title;\n\t\t\t\t}\n\t\t\t\tthis.adjustLayout(false);\n\t\t\t});\n\t\t}\n\t}\n\n\tprepareItems(params: Params)\n\t{\n\t\tlet values = params.items;\n\t\tif (!Array.isArray(values))\n\t\t{\n\t\t\tif (values === '')\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvalues = [values];\n\t\t}\n\n\t\tconst entityId = this.fieldName;\n\t\tvalues.forEach((element: Element) => {\n\t\t\tconst setItem = {\n\t\t\t\tid: element.VALUE,\n\t\t\t\tentityId: entityId,\n\t\t\t\ttitle: element.NAME,\n\t\t\t\ttabs: entityId\n\t\t\t};\n\t\t\tthis.items.add(setItem);\n\t\t\tif (element.IS_SELECTED === true)\n\t\t\t{\n\t\t\t\tthis.selectedItems.add(setItem);\n\t\t\t}\n\t\t});\n\t}\n\n\tprepareInput(node: HTMLElement): void\n\t{\n\t\tthis.input = Tag.render`\n\t\t\t<input \n\t\t\t\tname=\"${node.id}_input\" \n\t\t\t\ttype=\"text\" \n\t\t\t\tclass=\"ui-ctl-element main-ui-control main-enum-dialog-input\" \n\t\t\t\tautocomplete=\"off\"\n\t\t\t/>\n\t\t`;\n\t\tDom.append(this.input, node);\n\n\t\tconst dialogSelector = this.dialogSelector;\n\t\tconst input = this.input;\n\n\t\tEvent.bind(this.input, 'keyup', (event: Event) => {\n\t\t\tif (!input.value.length)\n\t\t\t{\n\t\t\t\tdialogSelector.search('');\n\t\t\t\tdialogSelector.clearSearch();\n\t\t\t\tdialogSelector.deselectAll();\n\t\t\t\tdialogSelector.hide();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tconst selectedItems = dialogSelector.getSelectedItems();\n\t\t\t\tif (!selectedItems.some(item => {\n\t\t\t\t\treturn (item.title.getText() === input.value);\n\t\t\t\t}))\n\t\t\t\t{\n\t\t\t\t\tdialogSelector.show();\n\t\t\t\t\tdialogSelector.clearSearch();\n\t\t\t\t\tdialogSelector.search(input.value);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tcreateWrappers(): void\n\t{\n\t\tthis.createWrapper();\n\t\tthis.createValuesWrapper();\n\t}\n\n\tcreateWrapper(): void\n\t{\n\t\tthis.wrapper = Tag.render`<div class=\"ui-ctl-w100\"></div>`;\n\t\tthis.targetNode.appendChild(this.wrapper);\n\t}\n\n\tcreateValuesWrapper(): void\n\t{\n\t\tthis.valuesWrapper = Tag.render`<div></div>`;\n\t\tthis.wrapper.appendChild(this.valuesWrapper);\n\t}\n\n\tshow(): void\n\t{\n\t\tthis.dialogSelector.show();\n\t}\n\n\tgetDialogSelector(entitySelector: EntitySelector): EntitySelector\n\t{\n\t\tconst options = this.getDialogOptions();\n\t\toptions.targetNode = this.targetNode;\n\t\toptions.events = {\n\t\t\t'Item:onSelect': this.onElementSelect.bind(this),\n\t\t\t'Item:onDeselect': this.onElementDeselect.bind(this),\n\t\t};\n\n\t\treturn new entitySelector(options);\n\t}\n\n\tgetTagSelector(tagSelector: TagSelector): TagSelector\n\t{\n\t\treturn new tagSelector({\n\t\t\taddButtonCaption: this.getMessage('addButtonCaption'),\n\t\t\taddButtonCaptionMore: this.getMessage('addButtonCaptionMore'),\n\t\t\tshowCreateButton: false,\n\t\t\tdialogOptions: this.getDialogOptions(),\n\t\t\titems: this.getDialogSelectedItems(),\n\t\t\theight: 240,\n\t\t\ttextBoxWidth: '100%',\n\t\t\tevents: {\n\t\t\t\tonTagAdd: this.onElementSelect.bind(this),\n\t\t\t\tonTagRemove: this.onElementDeselect.bind(this),\n\t\t\t}\n\t\t});\n\t}\n\n\tgetDialogOptions(): DialogOptions\n\t{\n\t\treturn {\n\t\t\tcontext: this.context,\n\t\t\titems: this.getDialogItems(),\n\t\t\tselectedItems: this.getDialogSelectedItems(),\n\t\t\theight: 240,\n\t\t\tdropdownMode: true,\n\t\t\tshowAvatars: false,\n\t\t\tcompactView: true,\n\t\t\tmultiple: this.isMultiple,\n\t\t\tenableSearch: false,\n\t\t\ttabs: [\n\t\t\t\t{\n\t\t\t\t\tid: this.fieldName,\n\t\t\t\t\ttitle: this.fieldTitle\n\t\t\t\t},\n\t\t\t],\n\t\t};\n\t}\n\n\tgetDialogItems(): Array\n\t{\n\t\treturn [...this.items];\n\t}\n\n\tgetDialogSelectedItems(): Array\n\t{\n\t\treturn [...this.selectedItems];\n\t}\n\n\tonElementSelect(event: BaseEvent): void\n\t{\n\t\tconst item = this.getItemFromEventData(event);\n\t\tif (!this.isMultiple)\n\t\t{\n\t\t\tthis.selectedItems.clear();\n\t\t\tthis.input.value = item.getTitle();\n\t\t}\n\n\t\tthis.selectedItems.add(this.createOption(item));\n\t\tthis.adjustLayout();\n\t}\n\n\tonElementDeselect(event: BaseEvent): void\n\t{\n\t\tconst item = this.getItemFromEventData(event);\n\t\tconst unselectedItem = this.createOption(item);\n\t\tif (!this.isMultiple)\n\t\t{\n\t\t\tthis.selectedItems.clear();\n\t\t\tthis.input.value = '';\n\t\t}\n\n\t\t// remove object \"unselectedItem\" from selectedItems array\n\t\tthis.selectedItems = new Set(\n\t\t\t[...this.selectedItems].filter(\n\t\t\t\t(element:DialogItem) => (JSON.stringify(element) !== JSON.stringify(unselectedItem))\n\t\t\t)\n\t\t);\n\t\tthis.adjustLayout();\n\t}\n\n\tgetItemFromEventData(event: BaseEvent): Item|TagItem\n\t{\n\t\treturn (this.isMultiple ? event.getData().tag : event.getData().item);\n\t}\n\n\tcreateOption(item: Item): DialogItem\n\t{\n\t\treturn {\n\t\t\tid: item.id,\n\t\t\tentityId: this.fieldName,\n\t\t\ttitle: item.title,\n\t\t\ttabs: this.fieldName,\n\t\t}\n\t}\n\n\tadjustLayout(isChanged: boolean = true): void\n\t{\n\t\tthis.clearValueItems();\n\t\tif (this.selectedItems.size)\n\t\t{\n\t\t\tthis.selectedItems.forEach(item => {\n\t\t\t\tthis.adjustItem(item.id)\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.adjustItem('');\n\t\t}\n\n\t\tif (isChanged)\n\t\t{\n\t\t\tBX.fireEvent(document.getElementById(this.fieldNameForEvent), 'change');\n\t\t}\n\t}\n\n\tclearValueItems(): void\n\t{\n\t\tthis.valuesWrapper.innerHTML = '';\n\t}\n\n\tadjustItem(id: string): void\n\t{\n\t\tthis.valuesWrapper.appendChild(this.createInputTag(id));\n\t}\n\n\tcreateInputTag(id: string): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<input name=\"${this.fieldName.toUpperCase()}\" type=\"hidden\" value=\"${id}\"/>\n\t\t`;\n\t}\n\n\tgetMessage(key: string): string|null\n\t{\n\t\treturn (this.messages[key] ?? null);\n\t}\n}\n","import {Event, Type, Text} from \"main.core\";\nimport {BaseEvent} from \"main.core.events\";\nimport {EventEmitter} from 'main.core.events'\n\nexport class Ui\n{\n\tfieldName: string = null;\n\tcontainer: HTMLElement = null;\n\tvalueContainerId: string = null;\n\tvalue = null;\n\titems = null;\n\tdefaultFieldName: string = null;\n\tblock: string = null;\n\tformName: string = null;\n\tparams = {};\n\n\tconstructor(params: Params): void\n\t{\n\t\tthis.fieldName = (params['fieldName'] || '');\n\t\tthis.container = document.getElementById(params['container']);\n\t\tthis.valueContainerId = (params['valueContainerId'] || '');\n\t\tthis.value = params['value'];\n\t\tthis.items = params['items'];\n\t\tthis.block = params['block'];\n\t\tthis.defaultFieldName = (params['defaultFieldName'] || this.fieldName + '_default');\n\t\tthis.formName = (params['formName'] || '');\n\t\tthis.params = (params['params'] || {});\n\t\tthis.bindElement();\n\t}\n\n\tbindElement(): void\n\t{\n\t\tthis.container.appendChild(BX.decl({\n\t\t\tblock: this.block,\n\t\t\tname: this.fieldName,\n\t\t\titems: this.items,\n\t\t\tvalue: this.value,\n\t\t\tparams: this.params,\n\t\t\tvalueDelete: false\n\t\t}));\n\n\t\tthis.onChangeHandler = this.onChange.bind(this);\n\t\tEventEmitter.subscribe('UI::Select::change', this.onChangeHandler);\n\n\t\tBX.bind(\n\t\t\tthis.container,\n\t\t\t'click',\n\t\t\tBX.defer(function(){\n\t\t\t\tthis.onChange({params: this.params, node: this.container.firstChild})\n\t\t\t}.bind(this))\n\t\t);\n\t}\n\n\tonChange(eventNode)\n\t{\n\t\tlet controlObject;\n\n\t\tif (eventNode instanceof BaseEvent)\n\t\t{\n\t\t\tconst data = eventNode.getData();\n\t\t\tcontrolObject = data[0];\n\t\t}\n\t\telse\n\t\t{\n\t\t\tcontrolObject = eventNode;\n\t\t}\n\n\t\tif (!document.getElementById(this.valueContainerId))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tlet currentValue = null;\n\n\t\tif (\n\t\t\tcontrolObject.node !== null\n\t\t\t&& controlObject.node.getAttribute('data-name') === this.fieldName\n\t\t)\n\t\t{\n\t\t\tcurrentValue = JSON.parse(controlObject.node.getAttribute('data-value'));\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tthis.changeValue(currentValue);\n\t}\n\n\tchangeValue(currentValue)\n\t{\n\t\tlet s = '';\n\n\t\tif (!Type.isArray(currentValue))\n\t\t{\n\t\t\tif (currentValue === null)\n\t\t\t{\n\t\t\t\tcurrentValue = [{VALUE: ''}];\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tcurrentValue = [currentValue];\n\t\t\t}\n\t\t}\n\n\t\tif (currentValue.length > 0)\n\t\t{\n\t\t\tfor (let i = 0; i < currentValue.length; i++)\n\t\t\t{\n\t\t\t\ts += `<input type=\"hidden\" name=\"${this.fieldName}\" value=\"${Text.encode(currentValue[i].VALUE)}\" />`;\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\ts += `<input type=\"hidden\" name=\"${this.fieldName}\" value=\"\" />`;\n\t\t}\n\t\tdocument.getElementById(this.valueContainerId).innerHTML = s;\n\t\tBX.fireEvent(document.getElementById(this.defaultFieldName), 'change');\n\t}\n}\n"],"names":["Dialog","params","Set","targetNode","document","getElementById","targetNodeId","Error","fieldName","toLowerCase","fieldNameForEvent","fieldTitle","context","messages","isMultiple","prepareItems","createWrappers","Runtime","loadExtension","then","exports","tagSelector","getTagSelector","TagSelector","renderTo","wrapper","adjustLayout","dialogSelector","getDialogSelector","prepareInput","Event","bind","show","selectedItems","size","input","value","title","values","items","Array","isArray","entityId","forEach","element","setItem","id","VALUE","NAME","tabs","add","IS_SELECTED","node","Tag","render","Dom","append","event","length","search","clearSearch","deselectAll","hide","getSelectedItems","some","item","getText","createWrapper","createValuesWrapper","appendChild","valuesWrapper","entitySelector","options","getDialogOptions","events","onElementSelect","onElementDeselect","addButtonCaption","getMessage","addButtonCaptionMore","showCreateButton","dialogOptions","getDialogSelectedItems","height","textBoxWidth","onTagAdd","onTagRemove","getDialogItems","dropdownMode","showAvatars","compactView","multiple","enableSearch","getItemFromEventData","clear","getTitle","createOption","unselectedItem","filter","JSON","stringify","getData","tag","isChanged","clearValueItems","adjustItem","BX","fireEvent","innerHTML","createInputTag","toUpperCase","key","Ui","container","valueContainerId","block","defaultFieldName","formName","bindElement","decl","name","valueDelete","onChangeHandler","onChange","EventEmitter","subscribe","defer","firstChild","eventNode","controlObject","BaseEvent","data","currentValue","getAttribute","parse","changeValue","s","Type","i","Text","encode"],"mappings":";;;;;;;;;KA8BaA,MAAb;CAiBC,kBAAYC,MAAZ,EACA;CAAA;;CAAA;CAAA,oDAhB0B,IAgB1B;CAAA,iDAfuB,IAevB;CAAA,uDAd6B,IAc7B;CAAA,+CAbqB,IAarB;CAAA,wDAPiC,IAOjC;CAAA,qDAN2B,IAM3B;CAAA,uDALiC,IAAIC,GAAJ,EAKjC;CAAA,+CAJyB,IAAIA,GAAJ,EAIzB;CAAA,kDAHqB,EAGrB;CACC,SAAKC,UAAL,GAAkBC,QAAQ,CAACC,cAAT,CAAwBJ,MAAM,CAACK,YAA/B,CAAlB;;CAEA,QAAI,KAAKH,UAAL,KAAoB,IAAxB,EACA;CACC,YAAM,IAAII,KAAJ,wBAA0BN,MAAM,CAACK,YAAjC,gBAAN;CACA;;CAED,SAAKE,SAAL,GAAiBP,MAAM,CAACO,SAAP,CAAiBC,WAAjB,EAAjB;CACA,SAAKC,iBAAL,GAAyBT,MAAM,CAACS,iBAAhC;CACA,SAAKC,UAAL,GAAkBV,MAAM,CAACU,UAAzB;CACA,SAAKC,OAAL,GAAeX,MAAM,CAACW,OAAtB;CACA,SAAKC,QAAL,GAAgBZ,MAAM,CAACY,QAAvB;CACA,SAAKC,UAAL,GAAmBb,MAAM,CAACa,UAAP,KAAsB,MAAzC;CAEA,SAAKC,YAAL,CAAkBd,MAAlB;CAEA,SAAKe,cAAL;;CACA,QAAI,KAAKF,UAAT,EACA;CACCG,MAAAA,iBAAO,CAACC,aAAR,CAAsB,oBAAtB,EAA4CC,IAA5C,CAAiD,UAAAC,OAAO,EAAI;CAC3D,QAAA,KAAI,CAACC,WAAL,GAAmB,KAAI,CAACC,cAAL,CAAoBF,OAAO,CAACG,WAA5B,CAAnB;;CACA,QAAA,KAAI,CAACF,WAAL,CAAiBG,QAAjB,CAA0B,KAAI,CAACC,OAA/B;;CACA,QAAA,KAAI,CAACC,YAAL,CAAkB,KAAlB;CACA,OAJD;CAKA,KAPD,MASA;CACCT,MAAAA,iBAAO,CAACC,aAAR,CAAsB,oBAAtB,EAA4CC,IAA5C,CAAiD,UAAAC,OAAO,EAAI;CAC3D,QAAA,KAAI,CAACO,cAAL,GAAsB,KAAI,CAACC,iBAAL,CAAuBR,OAAO,CAACpB,MAA/B,CAAtB;;CACA,QAAA,KAAI,CAAC6B,YAAL,CAAkB,KAAI,CAAC1B,UAAvB;;CAEA2B,QAAAA,eAAK,CAACC,IAAN,CAAW,KAAI,CAAC5B,UAAhB,EAA4B,OAA5B,EAAqC,YAAM;CAC1C,UAAA,KAAI,CAAC6B,IAAL;CACA,SAFD;;CAIA,YAAI,KAAI,CAACC,aAAL,CAAmBC,IAAvB,EACA;CACC,cAAMD,aAAa,kCAAO,KAAI,CAACA,aAAZ,CAAnB;CACA,UAAA,KAAI,CAACE,KAAL,CAAWC,KAAX,GAAmBH,aAAa,CAAC,CAAD,CAAb,CAAiBI,KAApC;CACA;;CACD,QAAA,KAAI,CAACX,YAAL,CAAkB,KAAlB;CACA,OAdD;CAeA;CACD;;CA9DF;CAAA;CAAA,iCAgEczB,MAhEd,EAiEC;CAAA;;CACC,UAAIqC,MAAM,GAAGrC,MAAM,CAACsC,KAApB;;CACA,UAAI,CAACC,KAAK,CAACC,OAAN,CAAcH,MAAd,CAAL,EACA;CACC,YAAIA,MAAM,KAAK,EAAf,EACA;CACC;CACA;;CACDA,QAAAA,MAAM,GAAG,CAACA,MAAD,CAAT;CACA;;CAED,UAAMI,QAAQ,GAAG,KAAKlC,SAAtB;CACA8B,MAAAA,MAAM,CAACK,OAAP,CAAe,UAACC,OAAD,EAAsB;CACpC,YAAMC,OAAO,GAAG;CACfC,UAAAA,EAAE,EAAEF,OAAO,CAACG,KADG;CAEfL,UAAAA,QAAQ,EAAEA,QAFK;CAGfL,UAAAA,KAAK,EAAEO,OAAO,CAACI,IAHA;CAIfC,UAAAA,IAAI,EAAEP;CAJS,SAAhB;;CAMA,QAAA,MAAI,CAACH,KAAL,CAAWW,GAAX,CAAeL,OAAf;;CACA,YAAID,OAAO,CAACO,WAAR,KAAwB,IAA5B,EACA;CACC,UAAA,MAAI,CAAClB,aAAL,CAAmBiB,GAAnB,CAAuBL,OAAvB;CACA;CACD,OAZD;CAaA;CA1FF;CAAA;CAAA,iCA4FcO,IA5Fd,EA6FC;CACC,WAAKjB,KAAL,GAAakB,aAAG,CAACC,MAAjB,+QAEUF,IAAI,CAACN,EAFf;CAQAS,MAAAA,aAAG,CAACC,MAAJ,CAAW,KAAKrB,KAAhB,EAAuBiB,IAAvB;CAEA,UAAMzB,cAAc,GAAG,KAAKA,cAA5B;CACA,UAAMQ,KAAK,GAAG,KAAKA,KAAnB;CAEAL,MAAAA,eAAK,CAACC,IAAN,CAAW,KAAKI,KAAhB,EAAuB,OAAvB,EAAgC,UAACsB,KAAD,EAAkB;CACjD,YAAI,CAACtB,KAAK,CAACC,KAAN,CAAYsB,MAAjB,EACA;CACC/B,UAAAA,cAAc,CAACgC,MAAf,CAAsB,EAAtB;CACAhC,UAAAA,cAAc,CAACiC,WAAf;CACAjC,UAAAA,cAAc,CAACkC,WAAf;CACAlC,UAAAA,cAAc,CAACmC,IAAf;CACA,SAND,MAQA;CACC,cAAM7B,aAAa,GAAGN,cAAc,CAACoC,gBAAf,EAAtB;;CACA,cAAI,CAAC9B,aAAa,CAAC+B,IAAd,CAAmB,UAAAC,IAAI,EAAI;CAC/B,mBAAQA,IAAI,CAAC5B,KAAL,CAAW6B,OAAX,OAAyB/B,KAAK,CAACC,KAAvC;CACA,WAFI,CAAL,EAGA;CACCT,YAAAA,cAAc,CAACK,IAAf;CACAL,YAAAA,cAAc,CAACiC,WAAf;CACAjC,YAAAA,cAAc,CAACgC,MAAf,CAAsBxB,KAAK,CAACC,KAA5B;CACA;CACD;CACD,OApBD;CAqBA;CAhIF;CAAA;CAAA,qCAmIC;CACC,WAAK+B,aAAL;CACA,WAAKC,mBAAL;CACA;CAtIF;CAAA;CAAA,oCAyIC;CACC,WAAK3C,OAAL,GAAe4B,aAAG,CAACC,MAAnB;CACA,WAAKnD,UAAL,CAAgBkE,WAAhB,CAA4B,KAAK5C,OAAjC;CACA;CA5IF;CAAA;CAAA,0CA+IC;CACC,WAAK6C,aAAL,GAAqBjB,aAAG,CAACC,MAAzB;CACA,WAAK7B,OAAL,CAAa4C,WAAb,CAAyB,KAAKC,aAA9B;CACA;CAlJF;CAAA;CAAA,2BAqJC;CACC,WAAK3C,cAAL,CAAoBK,IAApB;CACA;CAvJF;CAAA;CAAA,sCAyJmBuC,cAzJnB,EA0JC;CACC,UAAMC,OAAO,GAAG,KAAKC,gBAAL,EAAhB;CACAD,MAAAA,OAAO,CAACrE,UAAR,GAAqB,KAAKA,UAA1B;CACAqE,MAAAA,OAAO,CAACE,MAAR,GAAiB;CAChB,yBAAiB,KAAKC,eAAL,CAAqB5C,IAArB,CAA0B,IAA1B,CADD;CAEhB,2BAAmB,KAAK6C,iBAAL,CAAuB7C,IAAvB,CAA4B,IAA5B;CAFH,OAAjB;CAKA,aAAO,IAAIwC,cAAJ,CAAmBC,OAAnB,CAAP;CACA;CAnKF;CAAA;CAAA,mCAqKgBnD,WArKhB,EAsKC;CACC,aAAO,IAAIA,WAAJ,CAAgB;CACtBwD,QAAAA,gBAAgB,EAAE,KAAKC,UAAL,CAAgB,kBAAhB,CADI;CAEtBC,QAAAA,oBAAoB,EAAE,KAAKD,UAAL,CAAgB,sBAAhB,CAFA;CAGtBE,QAAAA,gBAAgB,EAAE,KAHI;CAItBC,QAAAA,aAAa,EAAE,KAAKR,gBAAL,EAJO;CAKtBlC,QAAAA,KAAK,EAAE,KAAK2C,sBAAL,EALe;CAMtBC,QAAAA,MAAM,EAAE,GANc;CAOtBC,QAAAA,YAAY,EAAE,MAPQ;CAQtBV,QAAAA,MAAM,EAAE;CACPW,UAAAA,QAAQ,EAAE,KAAKV,eAAL,CAAqB5C,IAArB,CAA0B,IAA1B,CADH;CAEPuD,UAAAA,WAAW,EAAE,KAAKV,iBAAL,CAAuB7C,IAAvB,CAA4B,IAA5B;CAFN;CARc,OAAhB,CAAP;CAaA;CApLF;CAAA;CAAA,uCAuLC;CACC,aAAO;CACNnB,QAAAA,OAAO,EAAE,KAAKA,OADR;CAEN2B,QAAAA,KAAK,EAAE,KAAKgD,cAAL,EAFD;CAGNtD,QAAAA,aAAa,EAAE,KAAKiD,sBAAL,EAHT;CAINC,QAAAA,MAAM,EAAE,GAJF;CAKNK,QAAAA,YAAY,EAAE,IALR;CAMNC,QAAAA,WAAW,EAAE,KANP;CAONC,QAAAA,WAAW,EAAE,IAPP;CAQNC,QAAAA,QAAQ,EAAE,KAAK7E,UART;CASN8E,QAAAA,YAAY,EAAE,KATR;CAUN3C,QAAAA,IAAI,EAAE,CACL;CACCH,UAAAA,EAAE,EAAE,KAAKtC,SADV;CAEC6B,UAAAA,KAAK,EAAE,KAAK1B;CAFb,SADK;CAVA,OAAP;CAiBA;CAzMF;CAAA;CAAA,qCA4MC;CACC,4CAAW,KAAK4B,KAAhB;CACA;CA9MF;CAAA;CAAA,6CAiNC;CACC,4CAAW,KAAKN,aAAhB;CACA;CAnNF;CAAA;CAAA,oCAqNiBwB,KArNjB,EAsNC;CACC,UAAMQ,IAAI,GAAG,KAAK4B,oBAAL,CAA0BpC,KAA1B,CAAb;;CACA,UAAI,CAAC,KAAK3C,UAAV,EACA;CACC,aAAKmB,aAAL,CAAmB6D,KAAnB;CACA,aAAK3D,KAAL,CAAWC,KAAX,GAAmB6B,IAAI,CAAC8B,QAAL,EAAnB;CACA;;CAED,WAAK9D,aAAL,CAAmBiB,GAAnB,CAAuB,KAAK8C,YAAL,CAAkB/B,IAAlB,CAAvB;CACA,WAAKvC,YAAL;CACA;CAhOF;CAAA;CAAA,sCAkOmB+B,KAlOnB,EAmOC;CACC,UAAMQ,IAAI,GAAG,KAAK4B,oBAAL,CAA0BpC,KAA1B,CAAb;CACA,UAAMwC,cAAc,GAAG,KAAKD,YAAL,CAAkB/B,IAAlB,CAAvB;;CACA,UAAI,CAAC,KAAKnD,UAAV,EACA;CACC,aAAKmB,aAAL,CAAmB6D,KAAnB;CACA,aAAK3D,KAAL,CAAWC,KAAX,GAAmB,EAAnB;CACA,OAPF;;;CAUC,WAAKH,aAAL,GAAqB,IAAI/B,GAAJ,CACpB,+BAAI,KAAK+B,aAAT,EAAwBiE,MAAxB,CACC,UAACtD,OAAD;CAAA,eAAyBuD,IAAI,CAACC,SAAL,CAAexD,OAAf,MAA4BuD,IAAI,CAACC,SAAL,CAAeH,cAAf,CAArD;CAAA,OADD,CADoB,CAArB;CAKA,WAAKvE,YAAL;CACA;CAnPF;CAAA;CAAA,yCAqPsB+B,KArPtB,EAsPC;CACC,aAAQ,KAAK3C,UAAL,GAAkB2C,KAAK,CAAC4C,OAAN,GAAgBC,GAAlC,GAAwC7C,KAAK,CAAC4C,OAAN,GAAgBpC,IAAhE;CACA;CAxPF;CAAA;CAAA,iCA0PcA,IA1Pd,EA2PC;CACC,aAAO;CACNnB,QAAAA,EAAE,EAAEmB,IAAI,CAACnB,EADH;CAENJ,QAAAA,QAAQ,EAAE,KAAKlC,SAFT;CAGN6B,QAAAA,KAAK,EAAE4B,IAAI,CAAC5B,KAHN;CAINY,QAAAA,IAAI,EAAE,KAAKzC;CAJL,OAAP;CAMA;CAlQF;CAAA;CAAA,mCAqQC;CAAA;;CAAA,UADa+F,SACb,uEADkC,IAClC;CACC,WAAKC,eAAL;;CACA,UAAI,KAAKvE,aAAL,CAAmBC,IAAvB,EACA;CACC,aAAKD,aAAL,CAAmBU,OAAnB,CAA2B,UAAAsB,IAAI,EAAI;CAClC,UAAA,MAAI,CAACwC,UAAL,CAAgBxC,IAAI,CAACnB,EAArB;CACA,SAFD;CAGA,OALD,MAOA;CACC,aAAK2D,UAAL,CAAgB,EAAhB;CACA;;CAED,UAAIF,SAAJ,EACA;CACCG,QAAAA,EAAE,CAACC,SAAH,CAAavG,QAAQ,CAACC,cAAT,CAAwB,KAAKK,iBAA7B,CAAb,EAA8D,QAA9D;CACA;CACD;CAtRF;CAAA;CAAA,sCAyRC;CACC,WAAK4D,aAAL,CAAmBsC,SAAnB,GAA+B,EAA/B;CACA;CA3RF;CAAA;CAAA,+BA6RY9D,EA7RZ,EA8RC;CACC,WAAKwB,aAAL,CAAmBD,WAAnB,CAA+B,KAAKwC,cAAL,CAAoB/D,EAApB,CAA/B;CACA;CAhSF;CAAA;CAAA,mCAkSgBA,EAlShB,EAmSC;CACC,aAAOO,aAAG,CAACC,MAAX,uJACgB,KAAK9C,SAAL,CAAesG,WAAf,EADhB,EACsEhE,EADtE;CAGA;CAvSF;CAAA;CAAA,+BAySYiE,GAzSZ,EA0SC;CAAA;;CACC,mCAAQ,KAAKlG,QAAL,CAAckG,GAAd,CAAR,mEAA8B,IAA9B;CACA;CA5SF;CAAA;CAAA;;KC1BaC,EAAb;CAYC,cAAY/G,MAAZ,EACA;CAAA;CAAA,mDAXoB,IAWpB;CAAA,mDAVyB,IAUzB;CAAA,0DAT2B,IAS3B;CAAA,+CARQ,IAQR;CAAA,+CAPQ,IAOR;CAAA,0DAN2B,IAM3B;CAAA,+CALgB,IAKhB;CAAA,kDAJmB,IAInB;CAAA,gDAHS,EAGT;CACC,SAAKO,SAAL,GAAkBP,MAAM,CAAC,WAAD,CAAN,IAAuB,EAAzC;CACA,SAAKgH,SAAL,GAAiB7G,QAAQ,CAACC,cAAT,CAAwBJ,MAAM,CAAC,WAAD,CAA9B,CAAjB;CACA,SAAKiH,gBAAL,GAAyBjH,MAAM,CAAC,kBAAD,CAAN,IAA8B,EAAvD;CACA,SAAKmC,KAAL,GAAanC,MAAM,CAAC,OAAD,CAAnB;CACA,SAAKsC,KAAL,GAAatC,MAAM,CAAC,OAAD,CAAnB;CACA,SAAKkH,KAAL,GAAalH,MAAM,CAAC,OAAD,CAAnB;CACA,SAAKmH,gBAAL,GAAyBnH,MAAM,CAAC,kBAAD,CAAN,IAA8B,KAAKO,SAAL,GAAiB,UAAxE;CACA,SAAK6G,QAAL,GAAiBpH,MAAM,CAAC,UAAD,CAAN,IAAsB,EAAvC;CACA,SAAKA,MAAL,GAAeA,MAAM,CAAC,QAAD,CAAN,IAAoB,EAAnC;CACA,SAAKqH,WAAL;CACA;;CAxBF;CAAA;CAAA,kCA2BC;CACC,WAAKL,SAAL,CAAe5C,WAAf,CAA2BqC,EAAE,CAACa,IAAH,CAAQ;CAClCJ,QAAAA,KAAK,EAAE,KAAKA,KADsB;CAElCK,QAAAA,IAAI,EAAE,KAAKhH,SAFuB;CAGlC+B,QAAAA,KAAK,EAAE,KAAKA,KAHsB;CAIlCH,QAAAA,KAAK,EAAE,KAAKA,KAJsB;CAKlCnC,QAAAA,MAAM,EAAE,KAAKA,MALqB;CAMlCwH,QAAAA,WAAW,EAAE;CANqB,OAAR,CAA3B;CASA,WAAKC,eAAL,GAAuB,KAAKC,QAAL,CAAc5F,IAAd,CAAmB,IAAnB,CAAvB;CACA6F,MAAAA,6BAAY,CAACC,SAAb,CAAuB,oBAAvB,EAA6C,KAAKH,eAAlD;CAEAhB,MAAAA,EAAE,CAAC3E,IAAH,CACC,KAAKkF,SADN,EAEC,OAFD,EAGCP,EAAE,CAACoB,KAAH,CAAS,YAAU;CAClB,aAAKH,QAAL,CAAc;CAAC1H,UAAAA,MAAM,EAAE,KAAKA,MAAd;CAAsBmD,UAAAA,IAAI,EAAE,KAAK6D,SAAL,CAAec;CAA3C,SAAd;CACA,OAFQ,CAEPhG,IAFO,CAEF,IAFE,CAAT,CAHD;CAOA;CA/CF;CAAA;CAAA,6BAiDUiG,SAjDV,EAkDC;CACC,UAAIC,aAAJ;;CAEA,UAAID,SAAS,YAAYE,0BAAzB,EACA;CACC,YAAMC,IAAI,GAAGH,SAAS,CAAC3B,OAAV,EAAb;CACA4B,QAAAA,aAAa,GAAGE,IAAI,CAAC,CAAD,CAApB;CACA,OAJD,MAMA;CACCF,QAAAA,aAAa,GAAGD,SAAhB;CACA;;CAED,UAAI,CAAC5H,QAAQ,CAACC,cAAT,CAAwB,KAAK6G,gBAA7B,CAAL,EACA;CACC;CACA;;CAED,UAAIkB,YAAY,GAAG,IAAnB;;CAEA,UACCH,aAAa,CAAC7E,IAAd,KAAuB,IAAvB,IACG6E,aAAa,CAAC7E,IAAd,CAAmBiF,YAAnB,CAAgC,WAAhC,MAAiD,KAAK7H,SAF1D,EAIA;CACC4H,QAAAA,YAAY,GAAGjC,IAAI,CAACmC,KAAL,CAAWL,aAAa,CAAC7E,IAAd,CAAmBiF,YAAnB,CAAgC,YAAhC,CAAX,CAAf;CACA,OAND,MAQA;CACC;CACA;;CACD,WAAKE,WAAL,CAAiBH,YAAjB;CACA;CAlFF;CAAA;CAAA,gCAoFaA,YApFb,EAqFC;CACC,UAAII,CAAC,GAAG,EAAR;;CAEA,UAAI,CAACC,cAAI,CAAChG,OAAL,CAAa2F,YAAb,CAAL,EACA;CACC,YAAIA,YAAY,KAAK,IAArB,EACA;CACCA,UAAAA,YAAY,GAAG,CAAC;CAACrF,YAAAA,KAAK,EAAE;CAAR,WAAD,CAAf;CACA,SAHD,MAKA;CACCqF,UAAAA,YAAY,GAAG,CAACA,YAAD,CAAf;CACA;CACD;;CAED,UAAIA,YAAY,CAAC1E,MAAb,GAAsB,CAA1B,EACA;CACC,aAAK,IAAIgF,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGN,YAAY,CAAC1E,MAAjC,EAAyCgF,CAAC,EAA1C,EACA;CACCF,UAAAA,CAAC,4CAAkC,KAAKhI,SAAvC,wBAA4DmI,cAAI,CAACC,MAAL,CAAYR,YAAY,CAACM,CAAD,CAAZ,CAAgB3F,KAA5B,CAA5D,UAAD;CACA;CACD,OAND,MAQA;CACCyF,QAAAA,CAAC,4CAAkC,KAAKhI,SAAvC,qBAAD;CACA;;CACDJ,MAAAA,QAAQ,CAACC,cAAT,CAAwB,KAAK6G,gBAA7B,EAA+CN,SAA/C,GAA2D4B,CAA3D;CACA9B,MAAAA,EAAE,CAACC,SAAH,CAAavG,QAAQ,CAACC,cAAT,CAAwB,KAAK+G,gBAA7B,CAAb,EAA6D,QAA7D;CACA;CAjHF;CAAA;CAAA;;;;;;;;;"}