{"version":3,"file":"script.js","sources":["src/components/loader.js","src/expiration-options.js","src/components/content.js","src/components/popup-wrapper.js","src/index.js"],"sourcesContent":["import {Loader} from \"main.loader\";\n\nexport const LoaderComponent = {\n\tprops: {\n\t\tsize: {\n\t\t\ttype: Number,\n\t\t\tdefault: 85,\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div></div>\n\t`,\n\tmounted()\n\t{\n\t\tthis.loader = new Loader({\n\t\t\ttarget: this.$el,\n\t\t\tsize: this.size,\n\t\t});\n\t\tthis.loader.show();\n\t},\n\tbeforeDestroy()\n\t{\n\t\tthis.loader.destroy();\n\t},\n};","export const ExpirationLevel = {\n\tnormal: 0,\n\tsoonExpired: 1,\n\talmostExpired: 2,\n\texpired: 4,\n\tblocked: 8\n};\n\nexport function getExpirationLevel(daysLeft)\n{\n\tif (daysLeft <= (-14))\n\t{\n\t\treturn ExpirationLevel.soonExpired\n\t\t\t| ExpirationLevel.almostExpired\n\t\t\t| ExpirationLevel.expired\n\t\t\t| ExpirationLevel.blocked;\n\t}\n\tif (daysLeft <= 0)\n\t{\n\t\treturn ExpirationLevel.soonExpired\n\t\t\t| ExpirationLevel.almostExpired\n\t\t\t| ExpirationLevel.expired;\n\t}\n\tif (daysLeft <= 14)\n\t{\n\t\treturn ExpirationLevel.soonExpired\n\t\t\t| ExpirationLevel.almostExpired;\n\t}\n\tif (daysLeft <= 30)\n\t{\n\t\treturn ExpirationLevel.soonExpired;\n\t}\n\treturn ExpirationLevel.normal;\n}","import {Loc, ajax} from 'main.core';\nimport {Vue} from 'ui.vue';\nimport 'sidepanel';\nimport {ExpirationLevel} from \"../expiration-options\";\n\nexport const ContentComponent = {\n\tprops: [\n\t\t\"license\",\n\t\t\"market\",\n\t\t\"telephony\",\n\t\t\"isAdmin\",\n\t\t\"partner\",\n\t],\n\tcomputed: {\n\t\tExpirationLevel: () => ExpirationLevel,\n\t\tgetTariffName()\n\t\t{\n\t\t\treturn this.license.isDemo ?\n\t\t\t\tLoc.getMessage('INTRANET_LICENSE_WIDGET_TITLE_DEMO') :\n\t\t\t\tLoc.getMessage('INTRANET_LICENSE_WIDGET_TITLE')\n\t\t},\n\t\tgetTariffButtonName() {\n\t\t\treturn this.license.isDemo ?\n\t\t\t\tLoc.getMessage('INTRANET_LICENSE_WIDGET_BUY') :\n\t\t\t\tLoc.getMessage('INTRANET_LICENSE_WIDGET_PROLONG')\n\t\t},\n\t\tgetTariffIconCLass()\n\t\t{\n\t\t\tconst {expirationLevel} = this.license;\n\t\t\tif (expirationLevel & expirationLevel.expired)\n\t\t\t{\n\t\t\t\treturn 'license-widget-item-icon--low';\n\t\t\t}\n\t\t\tif (expirationLevel & expirationLevel.soonExpired)\n\t\t\t{\n\t\t\t\treturn 'license-widget-item-icon--expired';\n\t\t\t}\n\n\t\t\treturn 'license-widget-item-icon--start';\n\t\t},\n\t\tgetMarketClass()\n\t\t{\n\t\t\tif (this.market.isExpired || this.market.isAlmostExpired)\n\t\t\t{\n\t\t\t\treturn 'license-widget-item--expired';\n\t\t\t}\n\t\t\telse if (this.market.isPaid || this.market.isDemo)\n\t\t\t{\n\t\t\t\treturn 'license-widget-item--active';\n\t\t\t}\n\n\t\t\treturn '';\n\t\t},\n\t\tgetMarketIconClass()\n\t\t{\n\t\t\tif (this.market.isExpired)\n\t\t\t{\n\t\t\t\treturn 'license-widget-item-icon--expired';\n\t\t\t}\n\t\t\tif (this.market.isAlmostExpired)\n\t\t\t{\n\t\t\t\treturn 'license-widget-item-icon--low';\n\t\t\t}\n\t\t\treturn 'license-widget-item-icon--mp';\n\t\t},\n\t},\n\tmethods: {\n\t\tsendAnalytics(code)\n\t\t{\n\t\t\tajax.runAction(\"intranet.license.analyticsLabel\", {\n\t\t\t\tdata: {},\n\t\t\t\tanalyticsLabel: {\n\t\t\t\t\thelperCode: code,\n\t\t\t\t\theaderPopup: \"Y\"\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tshowInfoHelper(type)\n\t\t{\n\t\t\tlet articleCode = \"\";\n\n\t\t\tif (type === \"market\")\n\t\t\t{\n\t\t\t\tarticleCode = \"limit_benefit_market\";\n\t\t\t}\n\t\t\telse if (type === \"whyPay\")\n\t\t\t{\n\t\t\t\tarticleCode = \"limit_why_pay_tariff\";\n\t\t\t}\n\t\t\telse if (type === \"licenseDesc\")\n\t\t\t{\n\t\t\t\tarticleCode = `limit_why_pay_tariff__${this.license.type}`;\n\t\t\t}\n\n\t\t\tBX.UI.InfoHelper.show(articleCode);\n\t\t\tthis.sendAnalytics(articleCode);\n\t\t},\n\t\tshowHelper()\n\t\t{\n\t\t\tconsole.error('intranet.license.widget: needs a helper iformation.');\n\t\t\tif (this.license.isDemo)\n\t\t\t{\n\t\t\t\tconst article = this.isCloud ? \"limit_support_bitrix\" : \"limit_support_bitrix_box\";\n\t\t\t\tBX.UI.InfoHelper.show(article);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tconst article = this.isCloud ? \"12925062\" : \"12983582\";\n\t\t\t\tBX.Helper.show(`redirect=detail&code=${article}`);\n\t\t\t}\n\t\t},\n\t\tshowPartner()\n\t\t{\n\t\t\tif (this.partner.isPartnerOrder)\n\t\t\t{\n\t\t\t\tconst formLang = this.partner.formLang;\n\n\t\t\t\tBX.UI.Feedback.Form.open(\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'intranet-license-partner',\n\t\t\t\t\t\tportalUri: this.partner.formPortalUri,\n\t\t\t\t\t\tforms: [\n\t\t\t\t\t\t\t{zones: ['en', 'eu', 'in', 'uk'], id: 1194, lang: formLang, sec: '6nivh3'},\n\t\t\t\t\t\t\t{zones: ['de'], id: 1195, lang: formLang, sec: 'q1rq2q'},\n\t\t\t\t\t\t\t{zones: ['la', 'co', 'mx'], id: 1196, lang: formLang, sec: 'dkdhid'},\n\t\t\t\t\t\t\t{zones: ['com.br'], id: 1197, lang: formLang, sec: 'nvobax'},\n\t\t\t\t\t\t\t{zones: ['pl'], id: 1198, lang: formLang, sec: 'h1013r'},\n\t\t\t\t\t\t\t{zones: ['it'], id: 1199, lang: formLang, sec: 'xsrbsh'},\n\t\t\t\t\t\t\t{zones: ['fr'], id: 1200, lang: formLang, sec: '3oupk4'},\n\t\t\t\t\t\t\t{zones: ['tr'], id: 1202, lang: formLang, sec: 'k3bnjz'},\n\t\t\t\t\t\t\t{zones: ['vn'], id: 1201, lang: formLang, sec: '9dxb9d'},\n\t\t\t\t\t\t\t{zones: ['ua'], id: 1204, lang: formLang, sec: '277p0u'},\n\t\t\t\t\t\t\t{zones: ['by'], id: 1205, lang: formLang, sec: '31inm5'},\n\t\t\t\t\t\t\t{zones: ['kz'], id: 1203, lang: formLang, sec: '6nkdb1'},\n\t\t\t\t\t\t\t{zones: ['ru'], id: 1192, lang: formLang, sec: 'b5mzdk'},\n\t\t\t\t\t\t],\n\t\t\t\t\t\tdefaultForm: {id: 1194, lang: 'en', sec: '6nivh3'}\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tshowPartnerForm(this.partner.connectPartnerJs);\n\t\t\t}\n\t\t},\n\t\tshowMarketDemoPopup(e)\n\t\t{\n\t\t\tBX.loadExt('marketplace').then(() => {\n\t\t\t\tif (!!this.market.landingBuyCode && this.market.landingBuyCode !== '')\n\t\t\t\t{\n\t\t\t\t\tBX.UI.InfoHelper.show(this.market.landingBuyCode);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tBX.rest.Marketplace.openDemoSubscription(() => {\n\t\t\t\t\t\twindow.location.href = '/settings/license.php?subscription_trial=Y&analyticsLabel[headerPopup]=Y'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t},\n\n\ttemplate: `\n\t\t<div class=\"license-widget\">\n\t\t\t<!-- region license -->\n\t\t\t<div\n\t\t\t\tclass=\"license-widget-item license-widget-item--main license-widget-item-margin-bottom-1x\"\n\t\t\t\t:class=\"{ 'license-widget-item--expired' : license.expirationLevel > ExpirationLevel.soonExpired }\">\n\t\t\t\t<div class=\"license-widget-inner\">\n\t\t\t\t\t<div class=\"license-widget-content\">\n\t\t\t\t\t\t<div class=\"license-widget-item-icon\" :class=\"getTariffIconCLass\" ></div>\n\t\t\t\t\t\t<div class=\"license-widget-item-content\">\n\t\t\t\t\t\t\t<div class=\"license-widget-item-name\">\n\t\t\t\t\t\t\t\t<span>{{ getTariffName }}</span>\n\t\t\t\t\t\t\t\t<!--<span data-hint=\"Hint\"></span>-->\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"license-widget-item-link\">\n\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\tv-if=\"license.isDemo\"\n\t\t\t\t\t\t\t\t\tclass=\"license-widget-item-link-text\"\n\t\t\t\t\t\t\t\t\t@click=\"showInfoHelper('whyPay')\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('INTRANET_LICENSE_WIDGET_DESCRIPTION_WHY') }}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\tv-else\n\t\t\t\t\t\t\t\t\tclass=\"license-widget-item-link-text\"\n\t\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\t\t@click=\"showInfoHelper('licenseDesc')\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('INTRANET_LICENSE_WIDGET_DESCRIPTION_TARIFF') }}\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tv-if=\"license.expirationLevel & ExpirationLevel.soonExpired\"\n\t\t\t\t\t\t\t\tclass=\"license-widget-item-info license-widget-item-info--exp\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<span class=\"license-widget-item-info-text\">{{ $Bitrix.Loc.getMessage('INTRANET_LICENSE_DAYS_LEFT_SHORT', {'#NUM_DAYS#': license.daysLeft}) }}</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div \n\t\t\t\t\t\t\t\tv-else\n\t\t\t\t\t\t\t\tclass=\"license-widget-item-info\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<span class=\"license-widget-item-info-text\">{{ $Bitrix.Loc.getMessage('INTRANET_LICENSE_TILL', {'#LICENSE_TILL#': license.expireDate}) }}</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<a :href=\"license.allPath\" target=\"_blank\" class=\"license-widget-item-btn\">\n\t\t\t\t\t\t{{ getTariffButtonName }}\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<!-- endregion -->\n\n\t\t\t<!-- region vox & demo -->\n\t\t\t<div class=\"license-widget-block license-widget-item-margin-bottom-1x\">\n\t\t\t\t<div\n\t\t\t\t\tclass=\"license-widget-item\"\n\t\t\t\t\t:class=\"{ 'license-widget-item--active' : telephony.isConnected }\"\n\t\t\t\t>\n\t\t\t\t\t<div class=\"license-widget-inner\">\n\t\t\t\t\t\t<div class=\"license-widget-content\">\n\t\t\t\t\t\t\t<div class=\"license-widget-item-icon license-widget-item-icon--tel\"></div>\n\t\t\t\t\t\t\t<div class=\"license-widget-item-content\">\n\t\t\t\t\t\t\t\t<div class=\"license-widget-item-name\">\n\t\t\t\t\t\t\t\t\t<span>{{ $Bitrix.Loc.getMessage('INTRANET_LICENSE_WIDGET_TELEPHONY') }}</span>\n\t\t\t\t\t\t\t\t\t<!--<span data-hint=\"Hint\"></span>-->\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div v-if=\"telephony.isConnected\" class=\"license-widget-item-info\">\n\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t:href=\"telephony.buyPath\"\n\t\t\t\t\t\t\t\t\t\tclass=\"license-widget-item-info-text\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('INTRANET_LICENSE_WIDGET_TELEPHONY_CONNECTED') }}\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tv-if=\"telephony.isConnected\"\n\t\t\t\t\t\t\t\t\tclass=\"license-widget-item-text\"\n\t\t\t\t\t\t\t\t\tv-html=\"telephony.balanceFormatted\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\tv-if=\"!telephony.isConnected\"\n\t\t\t\t\t\t\t\t\t:href=\"telephony.buyPath\"\n\t\t\t\t\t\t\t\t\tclass=\"license-widget-item-btn\"\n\t\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('INTRANET_LICENSE_WIDGET_CONNECT') }}\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div \n\t\t\t\t\tclass=\"license-widget-item license-widget-item--active\"\n\t\t\t\t\t:class=\"{ 'license-widget-item--active' : license.isDemo }\"\n\t\t\t\t\t>\n\t\t\t\t\t<div class=\"license-widget-inner\">\n\t\t\t\t\t\t<div class=\"license-widget-content\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclass=\"license-widget-item-icon\"\n\t\t\t\t\t\t\t\t:class=\"[\n\t\t\t\t\t\t\t\t\t(license.isDemo && (license.expirationLevel & ExpirationLevel.soonExpired))\n\t\t\t\t\t\t\t\t\t? 'license-widget-item-icon--expdemo'\n\t\t\t\t\t\t\t\t\t: 'license-widget-item-icon--demo'\n\t\t\t\t\t\t\t\t]\"\n\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t<div class=\"license-widget-item-content\">\n\t\t\t\t\t\t\t\t<div class=\"license-widget-item-name\">\n\t\t\t\t\t\t\t\t\t<span>{{ $Bitrix.Loc.getMessage('INTRANET_LICENSE_WIDGET_DEMO') }}</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"license-widget-item-link\">\n\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\tclass=\"license-widget-item-link-text\"\n\t\t\t\t\t\t\t\t\t\t:href=\"license.demoPath\"\n\t\t\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('INTRANET_LICENSE_WIDGET_OPPORTUNITIES') }}\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div \n\t\t\t\t\t\t\t\t\tv-if=\"!(license.expirationLevel & ExpirationLevel.soonExpired)\" \n\t\t\t\t\t\t\t\t\tclass=\"license-widget-item-info\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<span class=\"license-widget-item-info-text\">\n\t\t\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('INTRANET_LICENSE_DAYS_LEFT_SHORT', {'#NUM_DAYS#': license.daysLeft}) }}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tv-else\n\t\t\t\t\t\t\t\t\tclass=\"license-widget-item-info license-widget-item-info--exp\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<span class=\"license-widget-item-info-text\">\n\t\t\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('INTRANET_LICENSE_TILL', {'#LICENSE_TILL#': license.expireDate}) }}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<!-- endregion -->\n\n\t\t\t<!-- region market -->\n\t\t\t<div\n\t\t\t\tv-if=\"market.isMarketAvailable\"\n\t\t\t\tclass=\"license-widget-item license-widget-item--wide license-widget-item-margin-y-2x\"\n\t\t\t\t:class=\"getMarketClass\"\n\t\t\t>\n\t\t\t\t<div class=\"license-widget-inner\">\n\t\t\t\t\t<div class=\"license-widget-content\">\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclass=\"license-widget-item-icon\"\n\t\t\t\t\t\t\t:class=\"getMarketIconClass\"\n\t\t\t\t\t\t></div>\n\t\t\t\t\t\t<div class=\"license-widget-item-content\">\n\t\t\t\t\t\t\t<div class=\"license-widget-item-name\">\n\t\t\t\t\t\t\t\t<span>{{ $Bitrix.Loc.getMessage('INTRANET_LICENSE_WIDGET_MARKET') }}</span>\n\t\t\t\t\t\t\t\t<!--<span data-hint=\"Hint\"></span>-->\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"license-widget-item-link\">\n\t\t\t\t\t\t\t\t<span class=\"license-widget-item-link-text\" @click=\"showInfoHelper('market')\">\n\t\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('INTRANET_LICENSE_WIDGET_MARKET_DESCRIPTION') }}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tv-if=\"market.isExpired || market.isAlmostExpired\"\n\t\t\t\t\t\t\t\tkey=\"marketTill\"\n\t\t\t\t\t\t\t\tclass=\"license-widget-item-info\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<span class=\"license-widget-item-info-text\">\n\t\t\t\t\t\t\t\t\t{{ market.daysLeftMessage }}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tv-else-if=\"market.isPaid || market.isDemo\"\n\t\t\t\t\t\t\t\tkey=\"marketTill\"\n\t\t\t\t\t\t\t\tclass=\"license-widget-item-info\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<span class=\"license-widget-item-info-text\">\n\t\t\t\t\t\t\t\t\t{{ market.tillMessage }}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<a\n\t\t\t\t\t\tv-if=\"!market.isPaid && !market.isDemo && !market.isDemoUsed && this.isAdmin\"\n\t\t\t\t\t\tkey=\"marketButton\"\n\t\t\t\t\t\tclass=\"license-widget-item-btn\"\n\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t@click=\"showMarketDemoPopup($event)\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('INTRANET_LICENSE_WIDGET_TRY') }}\n\t\t\t\t\t</a>\n\n\t\t\t\t\t<a\n\t\t\t\t\t\tv-else-if=\"market.canBuy && this.isAdmin\"\n\t\t\t\t\t\tkey=\"marketButton\"\n\t\t\t\t\t\t:href=\"market.buyPath\"\n\t\t\t\t\t\tclass=\"license-widget-item-btn\"\n\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{\n\t\t\t\t\t\t\tmarket.isPaid\n\t\t\t\t\t\t\t? $Bitrix.Loc.getMessage('INTRANET_LICENSE_WIDGET_PROLONG')\n\t\t\t\t\t\t\t: $Bitrix.Loc.getMessage('INTRANET_LICENSE_WIDGET_BUY')\n\t\t\t\t\t\t}}\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<!-- endregion -->\n\n\t\t\t<!-- region lists -->\n\t\t\t<div class=\"license-widget-option-list\">\n\t\t\t\t<a\n\t\t\t\t\tclass=\"license-widget-option\"\n\t\t\t\t\t@click=\"showPartner\"\n\t\t\t\t>\n\t\t\t\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"19\" height=\"19\" fill=\"#525C69\" opacity=\".5\">\n\t\t\t\t\t\t<path fill-rule=\"evenodd\" d=\"M8.033 14.294a5.26 5.26 0 002.283.008l3.072 3.07a9.214 9.214 0 01-8.42-.013zm5.481-2.942l3.716 3.715a10.027 10.027 0 01-2.162 2.163l-3.716-3.716a4.824 4.824 0 001.256-.907c.377-.378.68-.802.906-1.255zm-8.637.015c.226.447.526.867.9 1.24.373.374.793.674 1.24.9L3.303 17.22a10.022 10.022 0 01-2.14-2.14l3.714-3.713zm-3.866-6.37l3.07 3.069a5.26 5.26 0 00.008 2.285l-3.064 3.064a9.214 9.214 0 01-.014-8.419zm16.348-.028a9.214 9.214 0 01.014 8.418l-3.07-3.07a5.26 5.26 0 00-.007-2.285zM3.316 1.154l3.716 3.715a4.826 4.826 0 00-1.256.907c-.378.378-.68.803-.906 1.256L1.154 3.316a10.032 10.032 0 012.162-2.162zm11.765.01a10.038 10.038 0 012.14 2.139l-3.715 3.714a4.826 4.826 0 00-.898-1.241 4.828 4.828 0 00-1.241-.899l3.714-3.714zm-1.666-.14l-3.062 3.063a5.26 5.26 0 00-2.288-.008L4.996 1.011a9.214 9.214 0 018.42.014z\"/>\n\t\t\t\t\t</svg>\n\t\t\t\t\t<div class=\"license-widget-option-text\">\n\t\t\t\t\t\t{{\n\t\t\t\t\t\t\tpartner.isPartnerOrder\n\t\t\t\t\t\t\t? $Bitrix.Loc.getMessage('INTRANET_LICENSE_WIDGET_PARTNER_ORDER')\n\t\t\t\t\t\t\t: $Bitrix.Loc.getMessage('INTRANET_LICENSE_WIDGET_PARTNER_CONNECT')\n\t\t\t\t\t\t}}\n\t\t\t\t\t</div>\n\t\t\t\t</a>\n\t\t\t\t<a class=\"license-widget-option\" @click=\"showHelper\">\n\t\t\t\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"19\" height=\"18\" fill=\"#525C69\" opacity=\".5\">\n\t\t\t\t\t\t<path fill-rule=\"evenodd\" d=\"M16.996 4.652a1.6 1.6 0 011.593 1.455l.007.145v7.268a1.6 1.6 0 01-1.455 1.594l-.145.006H15.11l-.001 2.096a.3.3 0 01-.477.243l-.05-.048-1.963-2.292-4.046.001a1.6 1.6 0 01-1.593-1.454l-.007-.146v-1.382l6.43.001a2.1 2.1 0 002.096-1.95l.005-.15V4.652h1.492zM12.346 0a1.6 1.6 0 011.6 1.6v7.268a1.6 1.6 0 01-1.6 1.6l-5.373-.001-2.974 2.977a.3.3 0 01-.512-.212l-.001-2.765H1.6a1.6 1.6 0 01-1.6-1.6V1.6A1.6 1.6 0 011.6 0h10.747z\"/>\n\t\t\t\t\t</svg>\n\t\t\t\t\t<div class=\"license-widget-option-text\">{{ $Bitrix.Loc.getMessage('INTRANET_LICENSE_WIDGET_SUPPORT') }}</div>\n\t\t\t\t</a>\n\t\t\t\t<a class=\"license-widget-option\" :href=\"license.ordersPath\" target=\"_blank\">\n\t\t\t\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"18\" height=\"18\" fill=\"#525C69\" opacity=\".5\">\n\t\t\t\t\t\t<path fill-rule=\"evenodd\" d=\"M12.566 6.992a5.122 5.122 0 110 10.244 5.122 5.122 0 010-10.244zM9.383 0c.409 0 .798.179 1.064.49l2.251 2.626c.218.254.338.578.338.912v.911a7.365 7.365 0 00-2.005.176v-.843L9.126 2.006H2.006v11.03h3.413c.09.705.283 1.379.562 2.005H1.402A1.402 1.402 0 010 13.64V1.402C0 .628.628 0 1.402 0h7.98zm5.353 9.991l-2.75 2.75-1.147-1.147-.811.811 1.914 1.914.044.043 3.56-3.56-.81-.81zM6.67 8.022a7.12 7.12 0 00-.85 1.583h-1.81V8.023h2.66zm2.354-3.008l-.001.884c-.36.205-.7.439-1.019.7H4.011V5.014h5.014z\"/>\n\t\t\t\t\t</svg>\n\t\t\t\t\t<div class=\"license-widget-option-text\">{{ $Bitrix.Loc.getMessage('INTRANET_LICENSE_WIDGET_ORDERS') }}</div>\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t\t<!-- endregion -->\n\t\t</div>\n\t`,\n};\n","import {ajax} from 'main.core';\nimport {LoaderComponent} from \"./loader\";\nimport {ContentComponent} from \"./content\";\nimport {getExpirationLevel, ExpirationLevel} from \"../expiration-options\";\n\n\nexport const PopupWrapperComponent = {\n\tcomponents: {LoaderComponent, ContentComponent},\n\tprops: [\n\t\t\"licenseType\",\n\t],\n\tdata()\n\t{\n\t\treturn {\n\t\t\tloaded: false,\n\t\t\tloading: true,\n\t\t\tlicense: [],\n\t\t\tmarket: [],\n\t\t\tisAdmin: \"\",\n\t\t\tisCloud: \"\",\n\t\t};\n\t},\n\tmounted()\n\t{\n\t\tajax.runAction('intranet.license.getLicenseData', {})\n\t\t\t.then(({data}) => {\n\t\t\t\tthis.license = data.license;\n\t\t\t\tconst {daysLeft} = this.license;\n\t\t\t\tthis.license.expirationLevel = getExpirationLevel(daysLeft);\n\t\t\t\tthis.market = data.market;\n\t\t\t\tthis.telephony = data.telephony;\n\t\t\t\tthis.isAdmin = data.isAdmin;\n\t\t\t\tthis.partner = data.partner;\n\t\t\t\tthis.loaded = true;\n\t\t\t\tthis.loading = false;\n\t\t\t})\n\t\t;\n\t},\n\tmethods: {},\n\ttemplate: `\n\t\t<div>\n\t\t\t<LoaderComponent v-if=\"loading\" :size=\"100\" />\n\t\t\t<ContentComponent \n\t\t\t\tv-if=\"!loading && loaded\" \n\t\t\t\t:license=\"license\"\n\t\t\t\t:market=\"market\"\n\t\t\t\t:telephony=\"telephony\"\n\t\t\t\t:isAdmin=\"isAdmin\"\n\t\t\t\t:partner=\"partner\">\n\t\t\t</ContentComponent>\n\t\t</div>\n\t`,\n};","import {Reflection, Loc} from 'main.core';\nimport { EventEmitter } from 'main.core.events'\nimport {Vue} from 'ui.vue';\nimport {BitrixVue} from 'ui.vue3';\nimport {PopupWrapperComponent} from \"./components/popup-wrapper\";\nimport {getExpirationLevel, ExpirationLevel} from \"./expiration-options\";\n\nconst namespace = Reflection.namespace('BX.Intranet');\n\nclass LicenseWidget\n{\n\t#vue;\n\n\tconstructor(params)\n\t{\n\t\tthis.isDemo = params.isDemo === \"Y\";\n\t\tthis.expirationLevel = params.expirationLevel;\n\t\tthis.node = params.wrapper;\n\n\t\tthis.renderButton();\n\n\t\tsetTimeout(() => {\n\t\t\tthis.initPopup(document.querySelector('[data-bx-id=\"liswdgt\"]'));\n\t\t}, 100);\n\t}\n\n\trenderButton()\n\t{\n\t\tthis.#vue = BitrixVue.createApp({\n\t\t\tname: 'LicenseWidget:Button',\n\t\t\tdata: () => {\n\t\t\t\treturn {\n\t\t\t\t\tisDemo: this.isDemo,\n\t\t\t\t\texpirationLevel: this.expirationLevel,\n\t\t\t\t};\n\t\t\t},\n\t\t\tcomputed: {\n\t\t\t\t\tbuttonClass: () => {\n\t\t\t\t\t\tconst classNames = [];\n\t\t\t\t\t\tif (this.expirationLevel <= ExpirationLevel.soonExpired)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tclassNames.push(this.isDemo ? 'ui-btn-icon-demo' : 'ui-btn-icon-tariff');\n\t\t\t\t\t\t\tclassNames.push((this.expirationLevel & ExpirationLevel.soonExpired)\n\t\t\t\t\t\t\t\t? 'license-btn-orange' : 'license-btn-blue-border');\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tclassNames.push('license-btn-alert-border');\n\t\t\t\t\t\t\tclassNames.push(\n\t\t\t\t\t\t\t\t(this.expirationLevel & ExpirationLevel.expired) ?\n\t\t\t\t\t\t\t\t\t'license-btn-animate license-btn-animate-forward' : 'ui-btn-icon-low-battery'\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn classNames.join(' ');\n\t\t\t\t\t},\n\t\t\t\t\tbuttonName()\n\t\t\t\t\t{\n\t\t\t\t\t\tif (this.expirationLevel > 1)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn this.isDemo ? Loc.getMessage('INTRANET_LICENSE_WIDGET_BUY')\n\t\t\t\t\t\t\t\t: Loc.getMessage('INTRANET_LICENSE_WIDGET_PROLONG');\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn this.isDemo ? Loc.getMessage('INTRANET_LICENSE_WIDGET_TITLE_DEMO') :\n\t\t\t\t\t\t\tLoc.getMessage('INTRANET_LICENSE_WIDGET_TITLE');\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\tmethods: {\n\t\t\t\ttogglePopup: (e) => {\n\t\t\t\t\tif (this.popup && this.popup.isShown())\n\t\t\t\t\t{\n\t\t\t\t\t\treturn this.closePopup();\n\t\t\t\t\t}\n\t\t\t\t\tthis.initPopup(e.target);\n\t\t\t\t},\n\t\t\t},\n\t\t\ttemplate: `\n\t\t\t\t<button\n\t\t\t\t\tdata-bx-id=\"liswdgt\"\n\t\t\t\t\tclass=\"ui-btn ui-btn-round ui-btn-themes license-btn\"\n\t\t\t\t\t:class=\"buttonClass\"\n\t\t\t\t\t@click=\"togglePopup\"\n\t\t\t\t>\n\t\t\t\t\t<span v-if=\"expirationLevel > 1\" class=\"license-btn-icon-battery\">\n\t\t\t\t\t\t<span class=\"license-btn-icon-battery-full\">\n\t\t\t\t\t\t\t<span class=\"license-btn-icon-battery-inner\">\n\t\t\t\t\t\t\t\t<span></span>\n\t\t\t\t\t\t\t\t<span></span>\n\t\t\t\t\t\t\t\t<span></span>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<svg class=\"license-btn-icon-battery-cross\" xmlns=\"http://www.w3.org/2000/svg\" width=\"22\" height=\"18\">\n\t\t\t\t\t\t\t<path fill=\"#FFF\" fill-rule=\"evenodd\" d=\"M18.567.395c.42.42.42 1.1 0 1.52l-1.04 1.038.704.001a2 2 0 012 2v1.799a1.01 1.01 0 01.116-.007H21a1 1 0 011 1v2.495a1 1 0 01-1 1h-.653l-.116-.006v1.798a2 2 0 01-2 2L5.45 15.032l-2.045 2.045a1.075 1.075 0 11-1.52-1.52L17.047.395c.42-.42 1.1-.42 1.52 0zm-2.583 4.102l-8.991 8.99 10.836.002a1 1 0 00.994-.883l.006-.117v-6.99a1 1 0 00-1-1l-1.845-.002zm-5.031-1.543L9.409 4.498h-6.23a1 1 0 00-.993.884l-.006.116-.001 6.23-1.4 1.398v-.046L.777 4.954a2 2 0 012-2h8.175z\"/>\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</span>\n\t\t\t\t\t{{ buttonName }}\n\t\t\t\t</button>\n\t\t\t`,\n\t\t});\n\t\tthis.#vue.mount(this.node);\n\t}\n\n\tinitPopup(bindElement)\n\t{\n\t\tif (!this.popup)\n\t\t{\n\t\t\tthis.popup = new B24.PopupBlur({\n\t\t\t\tautoHide: true,\n\t\t\t\tcloseByEsc: true,\n\t\t\t\tcontentPadding: 0,\n\t\t\t\tpadding: 0,\n\t\t\t\tminWidth: 350,\n\t\t\t\tminHeight: 260,\n\t\t\t\tanimation: {\n\t\t\t\t\tshowClassName: \"popup-with-radius-show\",\n\t\t\t\t\tcloseClassName: \"popup-with-radius-close\",\n\t\t\t\t\tcloseAnimationType: \"animation\"\n\t\t\t\t},\n\t\t\t\toffsetLeft: -20,\n\t\t\t\tclassName: 'popup-with-radius',\n\t\t\t\t// contentBackground: 'rgba(0,0,0,0)',\n\t\t\t\tangle: { position: 'top', offset: 120 },\n\t\t\t\tbindElement: bindElement,\n\t\t\t\tcontent: this.renderPopupContent(),\n\t\t\t\tcachable: false,\n\t\t\t\tevents: {\n\t\t\t\t\tonFirstShow: (event) => {\n\t\t\t\t\t\tEventEmitter.subscribe('BX.Main.InterfaceButtons:onMenuShow', () => {\n\t\t\t\t\t\t\tif (this.popup)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.popup.close();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\tthis.popup.show();\n\t}\n\n\trenderPopupContent()\n\t{\n\t\tconst node = document.createElement('div');\n\n\t\t(BitrixVue.createApp({\n\t\t\tname: 'LicenseWidget:PopupWrapper',\n\t\t\tcomponents: {PopupWrapperComponent},\n\t\t\tdata: () => {\n\t\t\t\treturn {\n\t\t\t\t\tisDemo: this.isDemo,\n\t\t\t\t\texpirationLevel: this.expirationLevel,\n\t\t\t\t};\n\t\t\t},\n\t\t\ttemplate: `<PopupWrapperComponent/>`,\n\t\t})).mount(node);\n\t\treturn node;\n\t}\n\n\tclosePopup()\n\t{\n\t\tif (this.popup)\n\t\t{\n\t\t\tthis.popup.close();\n\t\t}\n\t}\n}\n\nnamespace.LicenseWidget = LicenseWidget;\n"],"names":["LoaderComponent","props","size","type","Number","template","mounted","loader","Loader","target","$el","show","beforeDestroy","destroy","ExpirationLevel","normal","soonExpired","almostExpired","expired","blocked","getExpirationLevel","daysLeft","ContentComponent","computed","getTariffName","license","isDemo","Loc","getMessage","getTariffButtonName","getTariffIconCLass","expirationLevel","getMarketClass","market","isExpired","isAlmostExpired","isPaid","getMarketIconClass","methods","sendAnalytics","code","ajax","runAction","data","analyticsLabel","helperCode","headerPopup","showInfoHelper","articleCode","BX","UI","InfoHelper","showHelper","console","error","article","isCloud","Helper","showPartner","partner","isPartnerOrder","formLang","Feedback","Form","open","id","portalUri","formPortalUri","forms","zones","lang","sec","defaultForm","showPartnerForm","connectPartnerJs","showMarketDemoPopup","e","loadExt","then","landingBuyCode","rest","Marketplace","openDemoSubscription","window","location","href","PopupWrapperComponent","components","loaded","loading","isAdmin","telephony","namespace","Reflection","LicenseWidget","params","node","wrapper","renderButton","setTimeout","initPopup","document","querySelector","BitrixVue","createApp","name","buttonClass","classNames","push","join","buttonName","togglePopup","popup","isShown","closePopup","mount","bindElement","B24","PopupBlur","autoHide","closeByEsc","contentPadding","padding","minWidth","minHeight","animation","showClassName","closeClassName","closeAnimationType","offsetLeft","className","angle","position","offset","content","renderPopupContent","cachable","events","onFirstShow","event","EventEmitter","subscribe","close","createElement"],"mappings":"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"}