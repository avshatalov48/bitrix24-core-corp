(function(){BX.namespace("BX.DocumentGenerator");BX.DocumentGenerator.DocumentList={gridId:null};BX.DocumentGenerator.DocumentList.init=function(e){if(this.gridId){return}this.gridId=e;if(window!==window.top&&BX.type.isFunction(top.BX.ajax.UpdatePageData)){top.BX.ajax.UpdatePageData=function(){}}};BX.DocumentGenerator.DocumentList.viewTemplate=function(e){if(BX.SidePanel){BX.SidePanel.Instance.open(e,{width:845,events:{onMessage:function(e){if(e.getEventId()==="numerator-saved-event"){var t=e.getData();var n=this.iframe.contentDocument.querySelector("#docs-template-num-select");if(n){var i=n.options;var a=true;for(var o=0;o<i.length;o++){var r=i[o];if(r.value===t.id){a=false;r.innerText=t.name}}if(a){n.appendChild(BX.create("option",{attrs:{value:t.id},text:t.name},this.iframe.contentDocument))}n.value=t.id}}}}})}else{top.location.href=e}};BX.DocumentGenerator.DocumentList.delete=function(e){if(confirm(BX.message("DOCGEN_DOCUMENTS_DELETE_CONFIRM"))){var t=BX.Main.gridManager.getById(BX.DocumentGenerator.DocumentList.gridId);if(t){t.instance.getLoader().show()}BX.ajax.runAction("documentgenerator.api.document.delete",{data:{id:e}}).then(function(){var t=BX.Main.gridManager.getById(BX.DocumentGenerator.DocumentList.gridId);if(t){t.instance.getLoader().hide();t.instance.removeRow(e)}BX.UI.Notification.Center.notify({content:BX.message("DOCGEN_DOCUMENTS_DELETE_SUCCESS")})},function(e){var t=BX.Main.gridManager.getById(BX.DocumentGenerator.DocumentList.gridId);if(t){t.instance.getLoader().hide()}BX.UI.Notification.Center.notify({content:BX.message("DOCGEN_DOCUMENTS_DELETE_ERROR")+e.errors.join(", ")})})}}})(window);