{"version":3,"sources":["script.js"],"names":["BX","CrmSmsSend","container","this","_senderId","_from","_commEntityTypeId","_commEntityId","_to","_fromList","_toList","_input","_menu","_isMenuShown","_shownMenuId","_canUse","_canSendMessage","_manageUrl","_senders","_defaults","_communications","_container","_isRequestRunning","saveButton","cancelButton","_serviceUrl","_ownerTypeId","_ownerId","prototype","init","settings","prop","getBoolean","getString","getArray","getObject","senderId","from","getInteger","_senderSelectorNode","querySelector","_fromContainerNode","_fromSelectorNode","_clientContainerNode","_clientSelectorNode","_toSelectorNode","_messageLengthCounterNode","initSenderSelector","initFromSelector","initClientContainer","initClientSelector","initToSelector","initMessageLengthCounter","initButtons","setMessageLengthCounter","defaultSenderId","defaultSender","canUse","restSender","menuItems","handler","onSenderSelectorClick","bind","i","length","fromList","id","push","text","name","sender","onclick","className","delimiter","message","href","target","setSender","openMenu","e","item","window","open","manageUrl","setFrom","close","setAsDefault","textContent","shortName","visualFn","userOptions","save","defaultFromId","defaultFrom","onFromSelectorClick","onFromSelectorItemClick","hide","onClientSelectorClick","caption","client","setClient","entityTypeId","entityId","phones","setTo","onToSelectorClick","onToSelectorItemClick","valueFormatted","value","to","menuId","bindElement","PopupMenu","show","_id","offsetTop","offsetLeft","angle","position","offset","events","onPopupClose","delegate","onMenuClose","currentItem","preventDefault","_messageLengthMax","parseInt","getAttribute","classFn","cancel","alert","ajax","url","util","add_url_param","action","method","dataType","data","site","sessid","bitrix_sessid","ACTION","SENDER_ID","MESSAGE_FROM","MESSAGE_TO","MESSAGE_BODY","OWNER_TYPE_ID","OWNER_ID","TO_ENTITY_TYPE_ID","TO_ENTITY_ID","onsuccess","onSaveSuccess","onfailure","onSaveFailure","SidePanel","curSlider","Instance","getSliderByWindow","error"],"mappings":"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","file":""}