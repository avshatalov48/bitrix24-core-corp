{"version":3,"sources":["script.js"],"names":["exports","main_core","namespace","Reflection","CrmSmsSend","container","babelHelpers","classCallCheck","this","_senderId","_from","_commEntityTypeId","_commEntityId","_to","_fromList","_toList","_input","_menu","_isMenuShown","_shownMenuId","_canUse","_canSendMessage","_manageUrl","_senders","_defaults","_communications","_container","_isRequestRunning","_isSenderFixed","saveButton","cancelButton","_serviceUrl","_ownerTypeId","_ownerId","createClass","key","value","init","settings","BX","prop","getBoolean","getString","getArray","getObject","senderId","from","getInteger","_title","querySelector","_senderContainerNode","_senderSelectorNode","_senderSelectorBlockNode","_fromContainerNode","_fromSelectorNode","_clientContainerNode","_clientSelectorNode","_toSelectorNode","_messageLengthCounterNode","initSenderSelector","initFromSelector","initClientContainer","initClientSelector","initToSelector","initMessageLengthCounter","initButtons","setMessageLengthCounter","switchToFixedSenderAppearance","sender","setSender","subtitleNode","document","classList","add","innerHTML","Loc","getMessage","name","style","display","_this$_senderId","defaultSenderId","defaultSender","canUse","restSender","menuItems","handler","onSenderSelectorClick","bind","i","length","fromList","id","push","text","onclick","className","delimiter","_i","href","target","openMenu","e","item","window","open","manageUrl","setFrom","close","setAsDefault","textContent","shortName","visualFn","userOptions","save","defaultFromId","defaultFrom","onFromSelectorClick","onFromSelectorItemClick","hide","onClientSelectorClick","caption","client","setClient","entityTypeId","entityId","phones","setTo","onToSelectorClick","onToSelectorItemClick","valueFormatted","to","menuId","bindElement","PopupMenu","show","_id","offsetTop","offsetLeft","angle","position","offset","events","onPopupClose","onMenuClose","currentItem","preventDefault","_messageLengthMax","parseInt","getAttribute","classFn","cancel","alert","ajax","url","util","add_url_param","action","method","dataType","data","site","sessid","bitrix_sessid","ACTION","SENDER_ID","MESSAGE_FROM","MESSAGE_TO","MESSAGE_BODY","OWNER_TYPE_ID","OWNER_ID","TO_ENTITY_TYPE_ID","TO_ENTITY_ID","onsuccess","onSaveSuccess","onfailure","onSaveFailure","SidePanel","curSlider","Instance","getSliderByWindow","error"],"mappings":"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","file":"script.map.js"}