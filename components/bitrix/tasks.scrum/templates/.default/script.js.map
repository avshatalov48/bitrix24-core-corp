{"version":3,"file":"script.js","sources":["src/service/side.panel.js","src/utility/request.sender.js","src/service/filter.js","src/view/header/tabs.js","src/view/view.js","src/service/disk.manager.js","src/item/task/toggle.js","src/item/task/name.js","src/item/task/checklist.js","src/item/task/files.js","src/item/task/comments.js","src/item/task/epic.js","src/item/task/tags.js","src/item/task/responsible.js","src/utility/story.points.storage.js","src/item/task/story.points.js","src/item/task/sub.tasks.js","src/item/item.js","src/entity/list.items.js","src/utility/tag.searcher.js","src/utility/input.js","src/entity/entity.js","src/entity/backlog/header.js","src/entity/blank.js","src/entity/dropzone.js","src/entity/backlog/backlog.js","src/entity/sprint/header/date.js","src/entity/sprint/stats/stats.calculator.js","src/entity/sprint/stats/stats.js","src/entity/sprint/stats/completed.stats.js","src/entity/sprint/stats/expired.stats.js","src/entity/sprint/stats/active.stats.js","src/entity/sprint/stats/stats.builder.js","src/entity/sprint/header/stats.js","src/entity/sprint/header/name.js","src/entity/sprint/header/info/chart.icon.js","src/entity/sprint/header/info/counters.js","src/entity/sprint/header/info/button.js","src/entity/sprint/header/info/info.js","src/entity/sprint/header/button.js","src/entity/sprint/header/tick.js","src/entity/sprint/header/header.js","src/entity/sprint/sprint.js","src/entity/entity.storage.js","src/view/plan/completed.sprints.js","src/view/plan/plan.builder.js","src/entity/action.panel.js","src/entity/search.arrows.js","src/utility/scroller.js","src/entity/search.items.js","src/entity/sprint/sprint.mover.js","src/entity/sprint/sprint.side.panel.js","src/counters/entity.counters.js","src/item/item.mover.js","src/item/item.designer.js","src/epic/epic.js","src/pull/pull.sprint.js","src/pull/pull.item.js","src/pull/pull.epic.js","src/pull/pull.counters.js","src/counters/task.counters.js","src/utility/filter.handler.js","src/utility/decomposition.js","src/view/plan/plan.js","src/view/header/active.sprint.action.button.js","src/view/header/robot.button.js","src/view/active.sprint.js","src/view/header/burn.down.button.js","src/view/completed.sprint.js","src/entry.js"],"sourcesContent":["import {Runtime} from 'main.core';\nimport {EventEmitter, BaseEvent} from 'main.core.events';\n\nexport class SidePanel extends EventEmitter\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\n\t\tthis.setEventNamespace('BX.Tasks.Scrum.SidePanel');\n\n\t\t/* eslint-disable */\n\t\tthis.sidePanelManager = BX.SidePanel.Instance;\n\t\t/* eslint-enable */\n\n\t\tthis.bindEvents();\n\t}\n\n\tbindEvents()\n\t{\n\t\tEventEmitter.subscribe('SidePanel.Slider:onLoad', (event: BaseEvent) => {\n\t\t\tconst [sliderEvent] = event.getCompatData();\n\t\t\tconst sidePanel = sliderEvent.getSlider();\n\t\t\tsidePanel.setCacheable(false);\n\t\t\tthis.emit('onLoadSidePanel', sidePanel);\n\t\t});\n\n\t\tEventEmitter.subscribe('SidePanel.Slider:onClose', (event: BaseEvent) => {\n\t\t\tconst [sliderEvent] = event.getCompatData();\n\t\t\tconst sidePanel = sliderEvent.getSlider();\n\t\t\tthis.emit('onCloseSidePanel', sidePanel);\n\t\t});\n\t}\n\n\tisPreviousSidePanelExist(currentSidePanel): Boolean\n\t{\n\t\treturn Boolean(this.sidePanelManager.getPreviousSlider(currentSidePanel));\n\t}\n\n\tgetTopSidePanel()\n\t{\n\t\tconst topSidePanel = this.sidePanelManager.getTopSlider();\n\n\t\treturn topSidePanel ? topSidePanel : null;\n\t}\n\n\treloadTopSidePanel()\n\t{\n\t\tif (this.sidePanelManager.getTopSlider())\n\t\t{\n\t\t\tthis.sidePanelManager.getTopSlider().reload();\n\t\t}\n\t}\n\n\tcloseTopSidePanel()\n\t{\n\t\tif (this.sidePanelManager.getTopSlider())\n\t\t{\n\t\t\tthis.sidePanelManager.getTopSlider().close();\n\t\t}\n\t}\n\n\treloadPreviousSidePanel(currentSidePanel)\n\t{\n\t\tconst previousSidePanel = this.sidePanelManager.getPreviousSlider(currentSidePanel);\n\n\t\tpreviousSidePanel.reload();\n\t}\n\n\topenSidePanelByUrl(url)\n\t{\n\t\tthis.sidePanelManager.open(url);\n\t}\n\n\topenSidePanel(id, options)\n\t{\n\t\tthis.sidePanelManager.open(id, options);\n\t}\n\n\tshowByExtension(name: string, params: Object): Promise\n\t{\n\t\tconst extensionName = 'tasks.scrum.' + name.toLowerCase();\n\n\t\treturn Runtime.loadExtension(extensionName)\n\t\t\t.then((exports) => {\n\n\t\t\t\tname = name.replaceAll('-', '');\n\n\t\t\t\tif (exports && exports[name])\n\t\t\t\t{\n\t\t\t\t\tconst extension = new exports[name](params);\n\n\t\t\t\t\textension.show();\n\n\t\t\t\t\treturn extension;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t})\n\t\t;\n\t}\n}","import {ajax, Loc, Type} from 'main.core';\nimport {MessageBox} from 'ui.dialogs.messagebox';\n\ntype ErrorResponse = {\n\tdata: string,\n\terrors: Array,\n\tstatus: string\n}\n\nexport class RequestSender\n{\n\tconstructor(options = {})\n\t{\n\t\tthis.signedParameters = (options.signedParameters ? options.signedParameters : '');\n\t\tthis.debugMode = options.debugMode;\n\t}\n\n\tgetSignedParameters(): string\n\t{\n\t\treturn this.signedParameters;\n\t}\n\n\tsendRequest(action: string, data = {}): Promise\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tajax.runAction(action, {\n\t\t\t\tsignedParameters: this.signedParameters,\n\t\t\t\tdata: data\n\t\t\t}).then(resolve, reject);\n\t\t});\n\t}\n\n\tsendRequestToComponent(data = {}, action): Promise\n\t{\n\t\tdata.debugMode = this.debugMode;\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tajax.runComponentAction('bitrix:tasks.scrum', action, {\n\t\t\t\tmode: 'class',\n\t\t\t\tsignedParameters: this.signedParameters,\n\t\t\t\tdata: data\n\t\t\t}).then(resolve, reject);\n\t\t});\n\t}\n\n\tupdateItems(data): Promise\n\t{\n\t\treturn this.sendRequestToComponent(data, 'updateItems');\n\t}\n\n\tremoveItems(data): Promise\n\t{\n\t\treturn this.sendRequestToComponent(data, 'removeItems');\n\t}\n\n\tupdateItemSort(data): Promise\n\t{\n\t\treturn this.sendRequestToComponent(data, 'updateItemSort');\n\t}\n\n\tupdateSprintSort(data): Promise\n\t{\n\t\treturn this.sendRequestToComponent(data, 'updateSprintSort');\n\t}\n\n\tcreateSprint(data): Promise\n\t{\n\t\treturn this.sendRequestToComponent(data, 'createSprint');\n\t}\n\n\tstartSprint(data): Promise\n\t{\n\t\treturn this.sendRequestToComponent(data, 'startSprint');\n\t}\n\n\tcompleteSprint(data): Promise\n\t{\n\t\treturn this.sendRequestToComponent(data, 'completeSprint');\n\t}\n\n\tcreateTask(data): Promise\n\t{\n\t\treturn this.sendRequestToComponent(data, 'createTask');\n\t}\n\n\tupdateItem(data): Promise\n\t{\n\t\treturn this.sendRequestToComponent(data, 'updateItem');\n\t}\n\n\tchangeTaskResponsible(data): Promise\n\t{\n\t\treturn this.sendRequestToComponent(data, 'changeTaskResponsible');\n\t}\n\n\tgetCurrentState(data): Promise\n\t{\n\t\treturn this.sendRequestToComponent(data, 'getCurrentState');\n\t}\n\n\thasTaskInFilter(data): Promise\n\t{\n\t\treturn this.sendRequestToComponent(data, 'hasTaskInFilter');\n\t}\n\n\tremoveSprint(data): Promise\n\t{\n\t\treturn this.sendRequestToComponent(data, 'removeSprint');\n\t}\n\n\tchangeSprintName(data): Promise\n\t{\n\t\treturn this.sendRequestToComponent(data, 'changeSprintName');\n\t}\n\n\tchangeSprintDeadline(data): Promise\n\t{\n\t\treturn this.sendRequestToComponent(data, 'changeSprintDeadline');\n\t}\n\n\tgetSprintCompletedItems(data): Promise\n\t{\n\t\treturn this.sendRequestToComponent(data, 'getSprintCompletedItems');\n\t}\n\n\tgetCompletedSprints(data): Promise\n\t{\n\t\treturn this.sendRequestToComponent(data, 'getCompletedSprints');\n\t}\n\n\tgetCompletedSprintsStats(data): Promise\n\t{\n\t\treturn this.sendRequestToComponent(data, 'getCompletedSprintsStats');\n\t}\n\n\tgetItems(data): Promise\n\t{\n\t\treturn this.sendRequestToComponent(data, 'getItems');\n\t}\n\n\tsaveShortView(data): Promise\n\t{\n\t\treturn this.sendRequestToComponent(data, 'saveShortView');\n\t}\n\n\tsaveDisplayPriority(data): Promise\n\t{\n\t\treturn this.sendRequestToComponent(data, 'saveDisplayPriority');\n\t}\n\n\tgetEntityCounters(data): Promise\n\t{\n\t\treturn this.sendRequestToComponent(data, 'getEntityCounters');\n\t}\n\n\tattachFilesToTask(data): Promise\n\t{\n\t\treturn this.sendRequestToComponent(data, 'attachFilesToTask');\n\t}\n\n\tupdateTaskTags(data): Promise\n\t{\n\t\treturn this.sendRequestToComponent(data, 'updateTaskTags');\n\t}\n\n\tremoveTaskTags(data): Promise\n\t{\n\t\treturn this.sendRequestToComponent(data, 'removeTaskTags');\n\t}\n\n\tupdateItemEpics(data): Promise\n\t{\n\t\treturn this.sendRequestToComponent(data, 'updateItemEpics');\n\t}\n\n\tupdateBorderColorToLinkedItems(data): Promise\n\t{\n\t\treturn this.sendRequestToComponent(data, 'updateBorderColorToLinkedItems');\n\t}\n\n\teditEpic(data): Promise\n\t{\n\t\treturn this.sendRequestToComponent(data, 'editEpic');\n\t}\n\n\tremoveEpic(data): Promise\n\t{\n\t\treturn this.sendRequestToComponent(data, 'removeEpic');\n\t}\n\n\tapplyFilter(data): Promise\n\t{\n\t\treturn this.sendRequestToComponent(data, 'applyFilter');\n\t}\n\n\tshowLinkedTasks(data): Promise\n\t{\n\t\treturn this.sendRequestToComponent(data, 'showLinkedTasks');\n\t}\n\n\tgetAllUsedItemBorderColors(data): Promise\n\t{\n\t\treturn this.sendRequestToComponent(data, 'getAllUsedItemBorderColors');\n\t}\n\n\tgetSubTaskItems(data): Promise\n\t{\n\t\treturn this.sendRequestToComponent(data, 'getSubTaskItems');\n\t}\n\n\tshowErrorAlert(response: ErrorResponse, alertTitle?: string)\n\t{\n\t\tif (Type.isUndefined(response.errors))\n\t\t{\n\t\t\tconsole.log(response);\n\t\t\treturn;\n\t\t}\n\t\tif (response.errors.length)\n\t\t{\n\t\t\tconst firstError = response.errors.shift();\n\t\t\tif (firstError)\n\t\t\t{\n\t\t\t\tconst errorCode = (firstError.code ? firstError.code : '');\n\n\t\t\t\tconst message = firstError.message + ' ' + errorCode;\n\t\t\t\tconst title = (alertTitle ? alertTitle : Loc.getMessage('TASKS_SCRUM_ERROR_TITLE_POPUP'));\n\n\t\t\t\tMessageBox.alert(message, title);\n\t\t\t}\n\t\t}\n\t}\n}\n","import {Dom} from 'main.core';\nimport {BaseEvent, EventEmitter} from 'main.core.events';\nimport {RequestSender} from '../utility/request.sender';\n\ntype ListTypeItem = {\n\tNAME: string,\n\tVALUE: string\n}\n\ntype ValueTypeField = {\n\tname: string,\n\tvalue: string\n}\n\ntype Params = {\n\tfilterId: string,\n\trequestSender?: RequestSender\n}\n\nexport class Filter extends EventEmitter\n{\n\tconstructor(params: Params)\n\t{\n\t\tsuper(params);\n\n\t\tthis.setEventNamespace('BX.Tasks.Scrum.Filter');\n\n\t\tthis.filterId = params.filterId;\n\t\tthis.requestSender = params.requestSender;\n\n\t\tthis.searchFieldApplied = false;\n\n\t\tthis.initUiFilterManager();\n\t\tthis.bindHandlers();\n\t}\n\n\tinitUiFilterManager()\n\t{\n\t\t/* eslint-disable */\n\t\tthis.filterManager = BX.Main.filterManager.getById(this.filterId);\n\t\t/* eslint-enable */\n\t}\n\n\tbindHandlers()\n\t{\n\t\tEventEmitter.subscribe('BX.Main.Filter:apply', this.onApplyFilter.bind(this));\n\t}\n\n\tisSearchFieldApplied(): boolean\n\t{\n\t\treturn this.searchFieldApplied;\n\t}\n\n\tgetSearchContainer(): HTMLElement\n\t{\n\t\treturn this.filterManager.getSearch().getContainer();\n\t}\n\n\tgetFilterManager()\n\t{\n\t\treturn this.filterManager;\n\t}\n\n\tscrollToSearchContainer()\n\t{\n\t\tconst filterSearchContainer = this.getSearchContainer();\n\n\t\tif (!this.isNodeInViewport(filterSearchContainer))\n\t\t{\n\t\t\tfilterSearchContainer.scrollIntoView(true);\n\t\t}\n\t}\n\n\tonApplyFilter(event: BaseEvent)\n\t{\n\t\tconst [filterId, values, filterInstance, promise, params] = event.getCompatData();\n\n\t\tif (filterInstance.getSearch().getSearchString())\n\t\t{\n\t\t\tthis.searchFieldApplied = true;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.searchFieldApplied = false;\n\t\t}\n\n\t\tif (this.filterId !== filterId)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tparams.autoResolve = true;\n\n\t\tthis.emit('applyFilter', {\n\t\t\tpromise: promise\n\t\t});\n\t}\n\n\taddItemToListTypeField(name: string, item: ListTypeItem)\n\t{\n\t\t//todo set item to list after epic crud actions\n\n\t\tconst fieldInstances = this.filterManager.getField(name);\n\t\tconst fieldOptions = this.filterManager.getFieldByName(name);\n\n\t\tif (!fieldInstances || !fieldOptions)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tfieldInstances.options.ITEMS.push(item);\n\t\tfieldOptions.ITEMS.push(item);\n\n\t\tconst itemsNode = fieldInstances.node.querySelector('[data-name='+name+']');\n\n\t\tconst items = Dom.attr(itemsNode, 'data-items');\n\t\titems.push(item);\n\t\tDom.attr(itemsNode, 'data-items', items);\n\t}\n\n\tsetValueToField(value: ValueTypeField)\n\t{\n\t\tconst filterApi = this.filterManager.getApi();\n\t\tconst filterFieldsValues = this.filterManager.getFilterFieldsValues();\n\n\t\tfilterFieldsValues[value.name] = value.value;\n\n\t\tfilterApi.setFields(filterFieldsValues);\n\t\tfilterApi.apply();\n\t}\n\n\tsetValuesToField(values: ValueTypeField[], resetFields = false)\n\t{\n\t\tconst filterApi = this.filterManager.getApi();\n\n\t\tlet filterFieldsValues = {};\n\t\tif (!resetFields)\n\t\t{\n\t\t\tfilterFieldsValues = this.filterManager.getFilterFieldsValues();\n\t\t}\n\n\t\tvalues.forEach((value) => {\n\t\t\tfilterFieldsValues[value.name] = value.value;\n\t\t});\n\n\t\tfilterApi.setFields(filterFieldsValues);\n\t\tfilterApi.apply();\n\t}\n\n\tgetValueFromField(value: ValueTypeField): string\n\t{\n\t\tconst filterFieldsValues = this.filterManager.getFilterFieldsValues();\n\t\treturn filterFieldsValues[value.name];\n\t}\n\n\tresetFilter()\n\t{\n\t\tthis.filterManager.resetFilter();\n\t}\n\n\tapplyFilter()\n\t{\n\t\tthis.filterManager.applyFilter();\n\t}\n\n\tisNodeInViewport(element: HTMLElement): boolean\n\t{\n\t\tconst rect = element.getBoundingClientRect();\n\t\treturn (\n\t\t\trect.top >= 0 &&\n\t\t\trect.left >= 0 &&\n\t\t\trect.bottom <= (window.innerHeight || document.documentElement.clientHeight) &&\n\t\t\trect.right <= (window.innerWidth || document.documentElement.clientWidth)\n\t\t);\n\t}\n}","import {Event, Tag, Text} from 'main.core';\n\nimport {SidePanel} from '../../service/side.panel';\n\nimport type {Views} from '../view';\n\ntype Params = {\n\tsidePanel: SidePanel,\n\tviews: Views\n}\n\nexport class Tabs\n{\n\tconstructor(params: Params)\n\t{\n\t\tthis.sidePanel = params.sidePanel;\n\t\tthis.views = params.views;\n\n\t\tthis.node = null;\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tconst planTabActiveClass = (\n\t\t\tthis.views['plan'].active\n\t\t\t? 'tasks-view-switcher--item --active'\n\t\t\t: ''\n\t\t);\n\t\tconst activeTabActiveClass = (\n\t\t\tthis.views['activeSprint'].active\n\t\t\t? 'tasks-view-switcher--item --active'\n\t\t\t: ''\n\t\t);\n\t\tconst completedTabActiveClass = (\n\t\t\tthis.views['completedSprint'].active\n\t\t\t? 'tasks-view-switcher--item --active'\n\t\t\t: ''\n\t\t);\n\n\t\tthis.node = Tag.render`\n\t\t\t<div class=\"tasks-view-switcher\">\n\t\t\t\t<a\n\t\t\t\t\thref=\"${this.views['plan'].url}\"\n\t\t\t\t\tclass=\"tasks-view-switcher--item ${planTabActiveClass}\"\n\t\t\t\t>${Text.encode(this.views['plan'].name)}</a>\n\t\t\t\t<a\n\t\t\t\t\thref=\"${this.views['activeSprint'].url}\"\n\t\t\t\t\tclass=\"tasks-view-switcher--item ${activeTabActiveClass}\"\n\t\t\t\t>${Text.encode(this.views['activeSprint'].name)}</a>\n\t\t\t\t<a\n\t\t\t\t\thref=\"${this.views['completedSprint'].url}\"\n\t\t\t\t\tclass=\"tasks-view-switcher--item ${completedTabActiveClass}\"\n\t\t\t\t>${Text.encode(this.views['completedSprint'].name)}</a>\n\t\t\t</div>\n\t\t`;\n\n\t\tthis.node.querySelectorAll('a').forEach((tab: HTMLElement) => {\n\t\t\tEvent.bind(tab, 'click', () => {\n\t\t\t\tconst topSidePanel = this.sidePanel.getTopSidePanel()\n\t\t\t\tif (topSidePanel !== null)\n\t\t\t\t{\n\t\t\t\t\ttopSidePanel.showLoader();\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\treturn this.node;\n\t}\n}","import {Dom, Type} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\n\nimport {SidePanel} from '../service/side.panel';\nimport {Filter} from '../service/filter';\n\nimport {RequestSender} from '../utility/request.sender';\n\nimport {Tabs} from './header/tabs';\n\nimport '../css/base.css';\n\nexport type ViewInfo = {\n\tname: string,\n\turl: string,\n\tactive: boolean\n}\n\nexport type Views = {\n\tplan: ViewInfo,\n\tactiveSprint: ViewInfo,\n\tcompletedSprint: ViewInfo\n}\n\ntype Params = {\n\tsignedParameters: string,\n\tdebugMode: string,\n\tisOwnerCurrentUser: 'Y' | 'N',\n\tuserId: number,\n\tgroupId: number,\n\tfilterId: string,\n\tpathToTask: string\n}\n\nexport class View extends EventEmitter\n{\n\tconstructor(params: Params)\n\t{\n\t\tsuper(params);\n\n\t\tthis.setEventNamespace('BX.Tasks.Scrum.View');\n\n\t\tthis.isOwnerCurrentUser = (params.isOwnerCurrentUser === 'Y');\n\n\t\tthis.sidePanel = new SidePanel();\n\n\t\tthis.requestSender = new RequestSender({\n\t\t\tsignedParameters: params.signedParameters,\n\t\t\tdebugMode: params.debugMode\n\t\t});\n\n\t\tthis.filter = new Filter({\n\t\t\tfilterId: params.filterId,\n\t\t\tscrumManager: this,\n\t\t\trequestSender: this.requestSender\n\t\t});\n\n\t\tthis.userId = parseInt(params.userId, 10);\n\t\tthis.groupId = parseInt(params.groupId, 10);\n\n\t\tthis.pathToTask = (Type.isString(params.pathToTask) ? params.pathToTask : '');\n\t}\n\n\trenderTo(container: HTMLElement)\n\t{\n\t\tif (!Type.isDomNode(container))\n\t\t{\n\t\t\tthrow new Error('Scrum: HTMLElement for scrum not found');\n\t\t}\n\t}\n\n\trenderTabsTo(container: HTMLElement)\n\t{\n\t\tif (!Type.isDomNode(container))\n\t\t{\n\t\t\tthrow new Error('Scrum: HTMLElement for tabs not found');\n\t\t}\n\n\t\tconst tabs = new Tabs({\n\t\t\tsidePanel: this.sidePanel,\n\t\t\tviews: this.views\n\t\t});\n\n\t\tDom.append(tabs.render(), container);\n\t}\n\n\trenderSprintStatsTo(container: HTMLElement)\n\t{\n\t\tif (!Type.isDomNode(container))\n\t\t{\n\t\t\tthrow new Error('Scrum: HTMLElement for Sprint stats not found');\n\t\t}\n\t}\n\n\trenderRightElementsTo(container: HTMLElement)\n\t{\n\t\tif (!Type.isDomNode(container))\n\t\t{\n\t\t\tthrow new Error('Scrum: HTMLElement for buttons not found');\n\t\t}\n\t}\n\n\tsetDisplayPriority(value: string)\n\t{\n\t\tconst availableValues = new Set([\n\t\t\t'backlog',\n\t\t\t'sprint',\n\t\t]);\n\n\t\tif (!availableValues.has(value))\n\t\t{\n\t\t\tthrow Error('Invalid parameter to set display priority');\n\t\t}\n\t}\n\n\tgetCurrentUserId(): number\n\t{\n\t\treturn this.userId;\n\t}\n\n\tgetCurrentGroupId(): number\n\t{\n\t\treturn this.groupId;\n\t}\n\n\tgetPathToTask(): string\n\t{\n\t\treturn this.pathToTask;\n\t}\n}","import {Loc, Tag, Text, Uri} from 'main.core';\nimport {Popup} from 'main.popup';\nimport {EventEmitter} from 'main.core.events';\n\nimport '../css/disk.manager.css';\n\nexport class DiskManager extends EventEmitter\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\n\t\tthis.setEventNamespace('BX.Tasks.Scrum.DiskManager');\n\n\t\tthis.diskUrls = {\n\t\t\turlSelect: '/bitrix/tools/disk/uf.php?action=selectFile&SITE_ID=' + Loc.getMessage('SITE_ID'),\n\t\t\turlRenameFile: '/bitrix/tools/disk/uf.php?action=renameFile',\n\t\t\turlDeleteFile: '/bitrix/tools/disk/uf.php?action=deleteFile',\n\t\t\turlUpload: '/bitrix/tools/disk/uf.php?action=uploadFile&ncc=1'\n\t\t};\n\n\t\tthis.attachedIds = [];\n\t}\n\n\tshowAttachmentMenu(node)\n\t{\n\t\tconst controlId = Text.getRandom();\n\n\t\tthis.popup = new Popup(\n\t\t\t`disk-manager-attachment-menu-${Text.getRandom()}`,\n\t\t\tnode,\n\t\t\t{\n\t\t\t\tcontent: this.getAttachmentsLoaderContent(controlId),\n\t\t\t\tautoHide: false,\n\t\t\t\tcloseByEsc: true,\n\t\t\t\tangle: false,\n\t\t\t\toffsetTop: 12,\n\t\t\t\toffsetLeft: -32\n\t\t\t}\n\t\t);\n\n\t\tthis.popup.subscribe('onShow', () => {\n\t\t\tBX.Disk.UF.add({\n\t\t\t\tUID: controlId,\n\t\t\t\tcontrolName: `[${controlId}][]`,\n\t\t\t\thideSelectDialog: false,\n\t\t\t\turlSelect: this.diskUrls.urlSelect,\n\t\t\t\turlRenameFile: this.diskUrls.urlRenameFile,\n\t\t\t\turlDeleteFile: this.diskUrls.urlDeleteFile,\n\t\t\t\turlUpload: this.diskUrls.urlUpload,\n\t\t\t});\n\n\t\t\tconst filesChooser = this.popup.contentContainer.querySelector('#files_chooser');\n\n\t\t\tBX.onCustomEvent(filesChooser, 'DiskLoadFormController', ['show']);\n\n\t\t\tif (BX.DiskFileDialog)\n\t\t\t{\n\t\t\t\tEventEmitter.subscribe(BX.DiskFileDialog, 'loadItemsDone', this.openDiskFileDialog.bind(this));\n\t\t\t}\n\t\t});\n\n\t\tthis.popup.subscribe('onClose', () => {\n\t\t\tthis.emit('onFinish', this.attachedIds);\n\t\t});\n\n\t\tEventEmitter.subscribe('onFinish', () => this.popup.close());\n\n\t\tthis.popup.show();\n\t}\n\n\topenDiskFileDialog()\n\t{\n\t\tif (BX.DiskFileDialog.popupWindow != null)\n\t\t{\n\t\t\tBX.DiskFileDialog.popupWindow.subscribe('onClose', () => this.popup.close());\n\t\t}\n\t}\n\n\tgetAttachmentsLoaderContent(controlId)\n\t{\n\t\tconst filesChooser = Tag.render`\n\t\t\t<div id=\"files_chooser\">\n\t\t\t<div id=\"diskuf-selectdialog-${controlId}\" class=\"diskuf-files-entity diskuf-selectdialog bx-disk\">\n\t\t\t\t<div class=\"diskuf-files-block\">\n\t\t\t\t\t<div class=\"diskuf-placeholder\">\n\t\t\t\t\t\t<table class=\"files-list\">\n\t\t\t\t\t\t\t<tbody class=\"diskuf-placeholder-tbody\"></tbody>\n\t\t\t\t\t\t</table>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"diskuf-extended\" style=\"display: block\">\n\t\t\t\t\t<input type=\"hidden\" name=\"[${controlId}][]\" value=\"\"/>\n\t\t\t\t\t<div class=\"diskuf-extended-item\">\n\t\t\t\t\t\t<label for=\"file_loader_${controlId}\">\n\t\t\t\t\t\t\t${Loc.getMessage('TASKS_SCRUM_FILES_LOADER_POPUP_FROM_COMPUTER')}\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<input class=\"diskuf-fileUploader\" id=\"file_loader_${controlId}\" type=\n\t\t\t\t\t\t\t\"file\" multiple=\"multiple\" size=\"1\" style=\"display: none\"/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"diskuf-extended-item\">\n\t\t\t\t\t\t<span class=\"diskuf-selector-link\">\n\t\t\t\t\t\t\t${Loc.getMessage('TASKS_SCRUM_FILES_LOADER_POPUP_FROM_B24')}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"diskuf-extended-item\">\n\t\t\t\t\t\t<span class=\"diskuf-selector-link-cloud\" data-bx-doc-handler=\"gdrive\">\n\t\t\t\t\t\t\t<span>${Loc.getMessage('TASKS_SCRUM_FILES_LOADER_POPUP_FROM_CLOUD')}</span>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\tBX.addCustomEvent(filesChooser, 'OnFileUploadSuccess', this.onFileUploadSuccess.bind(this));\n\n\t\treturn filesChooser;\n\t}\n\n\tonFileUploadSuccess(fileResult, uf, file, uploaderFile)\n\t{\n\t\tif (typeof file === 'undefined' || typeof uploaderFile === 'undefined')\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.attachedIds.push(fileResult.element_id.toString());\n\t}\n}","import {Event, Tag} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\n\ntype Params = {\n\tvisible: boolean\n}\n\nexport class Toggle extends EventEmitter\n{\n\tconstructor(params: Params)\n\t{\n\t\tsuper(params);\n\n\t\tthis.setEventNamespace('BX.Tasks.Scrum.Item.Toggle');\n\n\t\tthis.visible = params.visible;\n\n\t\tthis.shown = false;\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tthis.node = Tag.render`\n\t\t\t<div class=\"tasks-scrum__item--btn-toggle-tasks ${this.visible ? '--visible' : ''}\"></div>\n\t\t`;\n\n\t\tEvent.bind(this.node, 'click', this.onClick.bind(this));\n\n\t\treturn this.node;\n\t}\n\n\tgetNode(): ?HTMLElement\n\t{\n\t\treturn this.node;\n\t}\n\n\tonClick()\n\t{\n\t\tif (this.isShown())\n\t\t{\n\t\t\tthis.emit('hide');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.emit('show');\n\t\t}\n\t}\n\n\tshow()\n\t{\n\t\tthis.shown = true;\n\t}\n\n\thide()\n\t{\n\t\tthis.shown = false;\n\t}\n\n\tisShown(): boolean\n\t{\n\t\treturn this.shown;\n\t}\n}","import {Dom, Event, Loc, Tag, Text, Type} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\n\nexport class Name extends EventEmitter\n{\n\tconstructor(name: string, completed: boolean)\n\t{\n\t\tsuper(name);\n\n\t\tthis.setEventNamespace('BX.Tasks.Scrum.Item.Name');\n\n\t\tthis.value = ((Type.isString(name) && name) ? name.trim() : '');\n\t\tthis.completed = completed;\n\n\t\tif (!this.value)\n\t\t{\n\t\t\tthrow new Error(Loc.getMessage('TASKS_SCRUM_TASK_ADD_NAME_ERROR'));\n\t\t}\n\n\t\tthis.node = null;\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tthis.node = Tag.render`\n\t\t\t<div class=\"tasks-scrum__item--title ${this.completed ? '--completed' : ''}\">\n\t\t\t\t${Text.encode(this.value)}\n\t\t\t</div>\n\t\t`;\n\n\t\tEvent.bind(this.node, 'click', this.onClick.bind(this));\n\n\t\treturn this.node;\n\t}\n\n\tgetNode(): ?HTMLElement\n\t{\n\t\treturn this.node;\n\t}\n\n\tgetValue(): string\n\t{\n\t\treturn this.value;\n\t}\n\n\tstrikeOut()\n\t{\n\t\tDom.addClass(this.node, '--completed');\n\t}\n\n\tunStrikeOut()\n\t{\n\t\tDom.removeClass(this.node, '--completed');\n\t}\n\n\tonClick()\n\t{\n\t\tthis.emit('click');\n\t}\n}","import {Event, Tag, Type} from 'main.core';\nimport {EventEmitter} from \"main.core.events\";\n\ntype Params = {\n\tcomplete: number,\n\tall: number\n}\n\nexport class Checklist extends EventEmitter\n{\n\tconstructor(params: Params)\n\t{\n\t\tsuper(params);\n\n\t\tthis.complete = (Type.isInteger(params.complete) ? parseInt(params.complete, 10) : 0);\n\t\tthis.all = (Type.isInteger(params.all) ? parseInt(params.all, 10) : 0);\n\n\t\tthis.value = `${this.complete}/${this.all}`;\n\n\t\tthis.node = null;\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tconst uiClasses = 'ui-label ui-label-sm ui-label-light';\n\n\t\tthis.node = Tag.render`\n\t\t\t<div class=\"tasks-scrum__item--entity-tasks ${this.all ? '--visible' : ''} ${uiClasses}\">\n\t\t\t\t${this.value}\n\t\t\t</div>\n\t\t`;\n\n\t\tEvent.bind(this.node, 'click', this.onClick.bind(this));\n\n\t\treturn this.node;\n\t}\n\n\tgetNode(): ?HTMLElement\n\t{\n\t\treturn this.node;\n\t}\n\n\tgetValue(): string\n\t{\n\t\treturn this.value;\n\t}\n\n\tgetComplete(): number\n\t{\n\t\treturn this.complete;\n\t}\n\n\tgetAll(): number\n\t{\n\t\treturn this.all;\n\t}\n\n\tonClick()\n\t{\n\t\tthis.emit('click');\n\t}\n}","import {Event, Tag, Type} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\n\nexport class Files extends EventEmitter\n{\n\tconstructor(count: number)\n\t{\n\t\tsuper(count);\n\n\t\tthis.value = (Type.isInteger(count) ? parseInt(count, 10) : 0);\n\n\t\tthis.node = null;\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tconst uiClasses = 'ui-label ui-label-sm ui-label-light';\n\n\t\tthis.node = Tag.render`\n\t\t\t<div class=\"tasks-scrum__item--attachment-counter ${this.value ? '--visible' : ''} ${uiClasses}\">\n\t\t\t\t${this.value}\n\t\t\t</div>\n\t\t`;\n\n\t\tEvent.bind(this.node, 'click', this.onClick.bind(this));\n\n\t\treturn this.node;\n\t}\n\n\tgetNode(): ?HTMLElement\n\t{\n\t\treturn this.node;\n\t}\n\n\tgetValue(): string\n\t{\n\t\treturn this.value;\n\t}\n\n\tonClick()\n\t{\n\t\tthis.emit('click');\n\t}\n}","import {Event, Tag, Type} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\n\nexport type TaskCounter = {\n\tcolor: string,\n\tvalue: number\n}\n\nexport class Comments extends EventEmitter\n{\n\tconstructor(taskCounter?: TaskCounter)\n\t{\n\t\tsuper(taskCounter);\n\n\t\tif (Type.isUndefined(taskCounter) || Type.isNull(taskCounter))\n\t\t{\n\t\t\ttaskCounter = {\n\t\t\t\tcolor: '',\n\t\t\t\tvalue: 0\n\t\t\t};\n\t\t}\n\n\t\tthis.taskCounter = taskCounter;\n\n\t\tthis.node = null;\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tthis.node = Tag.render`\n\t\t\t<div class=\"tasks-scrum__item--comment-counter ${this.taskCounter.value ? '--visible' : ''}\">\n\t\t\t\t<div class='ui-counter ${this.taskCounter.color}'>\n\t\t\t\t\t<div class='ui-counter-inner'>${parseInt(this.taskCounter.value, 10)}</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\tEvent.bind(this.node, 'click', this.onClick.bind(this));\n\n\t\treturn this.node;\n\t}\n\n\tgetNode(): ?HTMLElement\n\t{\n\t\treturn this.node;\n\t}\n\n\tgetValue(): TaskCounter\n\t{\n\t\treturn this.taskCounter;\n\t}\n\n\tonClick()\n\t{\n\t\tthis.emit('click');\n\t}\n}","import {Event, Tag, Type, Text} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\n\nexport type EpicType = {\n\tid: number,\n\tgroupId: number,\n\tname: string,\n\tdescription: string,\n\tcreatedBy: number,\n\tmodifiedBy: number,\n\tcolor: string\n}\n\nexport class Epic extends EventEmitter\n{\n\tconstructor(epic: EpicType)\n\t{\n\t\tsuper(epic);\n\n\t\tthis.setEventNamespace('BX.Tasks.Scrum.Item.Epic');\n\n\t\tif (Type.isUndefined(epic) || Type.isArray(epic) || Type.isNull(epic))\n\t\t{\n\t\t\tepic = {\n\t\t\t\tid: 0,\n\t\t\t\tgroupId: 0,\n\t\t\t\tname: '',\n\t\t\t\tdescription: '',\n\t\t\t\tcreatedBy: 0,\n\t\t\t\tmodifiedBy: 0,\n\t\t\t\tcolor: ''\n\t\t\t};\n\t\t}\n\n\t\tthis.epic = epic;\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tthis.node = Tag.render`\n\t\t\t<div class=\"tasks-scrum__item--epic ${this.epic.id ? '--visible' : ''}\">\n\t\t\t\t<i\n\t\t\t\t\tclass=\"tasks-scrum__item--epic-point\"\n\t\t\t\t\tstyle=\"${`background-color: ${this.epic.color}`}\"\n\t\t\t\t></i>\n\t\t\t\t<span>${Text.encode(this.epic.name)}</span>\n\t\t\t</div>\n\t\t`;\n\n\t\tEvent.bind(this.node, 'click', this.onClick.bind(this));\n\n\t\treturn this.node;\n\t}\n\n\trenderFullView()\n\t{\n\t\tconst colorBorder = this.convertHexToRGBA(this.epic.color, 0.7);\n\t\tconst colorBackground = this.convertHexToRGBA(this.epic.color, 0.3);\n\n\t\tconst visibility = this.epic.id > 0 ? '--visible' : '';\n\n\t\tthis.node = Tag.render`\n\t\t\t<div\n\t\t\t\tclass=\"tasks-scrum__item--epic-full-view ${visibility}\"\n\t\t\t\tstyle=\"background: ${colorBackground}; border-color: ${colorBorder};\"\n\t\t\t>${Text.encode(this.epic.name)}</div>\n\t\t`;\n\n\t\tEvent.bind(this.node, 'click', this.onClick.bind(this));\n\n\t\treturn this.node;\n\t}\n\n\tgetNode(): ?HTMLElement\n\t{\n\t\treturn this.node;\n\t}\n\n\tgetValue(): EpicType\n\t{\n\t\treturn this.epic;\n\t}\n\n\tgetId(): number\n\t{\n\t\treturn this.epic.id;\n\t}\n\n\tonClick()\n\t{\n\t\tthis.emit('click');\n\t}\n\n\tconvertHexToRGBA(hexCode, opacity)\n\t{\n\t\tlet hex = hexCode.replace('#', '');\n\n\t\tif (hex.length === 3)\n\t\t{\n\t\t\thex = `${hex[0]}${hex[0]}${hex[1]}${hex[1]}${hex[2]}${hex[2]}`;\n\t\t}\n\n\t\tconst r = parseInt(hex.substring(0, 2), 16);\n\t\tconst g = parseInt(hex.substring(2, 4), 16);\n\t\tconst b = parseInt(hex.substring(4, 6), 16);\n\n\t\treturn `rgba(${r},${g},${b},${opacity})`;\n\t}\n}","import {Event, Tag, Text, Type} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\n\nexport class Tags extends EventEmitter\n{\n\tconstructor(tags?: Array<string>)\n\t{\n\t\tsuper(tags);\n\n\t\tthis.setEventNamespace('BX.Tasks.Scrum.Item.Tags');\n\n\t\tthis.tags = (Type.isArray(tags) ? tags : []);\n\n\t\tthis.node = null;\n\t}\n\n\trender(): HTMLElement|Array<HTMLElement>\n\t{\n\t\tif (this.tags.length)\n\t\t{\n\t\t\tthis.node = Tag.render`\n\t\t\t\t${this.tags.map((tag) => {\n\t\t\t\t\treturn Tag.render`<div class=\"tasks-scrum__item--hashtag --visible\">#${Text.encode(tag)}</div>`;\n\t\t\t\t})}\n\t\t\t`;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.node = Tag.render`<div class=\"tasks-scrum__item--hashtag\"></div>`\n\t\t}\n\n\t\tif (Type.isArray(this.node))\n\t\t{\n\t\t\tthis.node.forEach((node: HTMLElement) => {\n\t\t\t\tEvent.bind(node, 'click', this.onClick.bind(this));\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tEvent.bind(this.node, 'click', this.onClick.bind(this));\n\t\t}\n\n\t\treturn this.node;\n\t}\n\n\tgetNode(): ?HTMLElement|?Array\n\t{\n\t\treturn this.node;\n\t}\n\n\tgetValue(): Array<string>\n\t{\n\t\treturn this.tags;\n\t}\n\n\tonClick(event)\n\t{\n\t\tthis.emit('click', event.target.textContent.substring(1));\n\t}\n\n\tisEqualTags(tags: Tags): boolean\n\t{\n\t\treturn JSON.stringify(this.getValue()) === JSON.stringify(tags.getValue());\n\t}\n}","import {Tag, Type, Text, Event, Dom} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\n\nexport type ResponsibleType = {\n\tid: number,\n\tname: string,\n\tpathToUser: string,\n\tphoto?: {\n\t\tsrc: string\n\t}\n}\n\nexport class Responsible  extends EventEmitter\n{\n\tconstructor(responsible: ResponsibleType)\n\t{\n\t\tsuper();\n\n\t\tthis.setEventNamespace('BX.Tasks.Scrum.Item.Responsible');\n\n\t\tthis.responsible = (Type.isPlainObject(responsible) ? responsible : null);\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tconst uiClasses = 'ui-icon ui-icon-common-user';\n\n\t\tconst name = Text.encode(this.responsible.name);\n\n\t\tconst src = this.responsible.photo ? Text.encode(this.responsible.photo.src) : null;\n\t\tconst photoStyle = src ? `background-image: url('${src}');` : '';\n\n\t\tthis.node = Tag.render`\n\t\t\t<div class=\"tasks-scrum__item--responsible\">\n\t\t\t\t<div class=\"tasks-scrum__item--responsible-photo ${uiClasses}\" title=\"${name}\">\n\t\t\t\t\t<i style=\"${photoStyle}\"></i>\n\t\t\t\t</div>\n\t\t\t\t<span>${name}</span>\n\t\t\t</div>\n\t\t`;\n\n\t\tEvent.bind(this.node.querySelector('div'), 'click', this.onClick.bind(this));\n\t\tEvent.bind(this.node.querySelector('span'), 'click', this.onClick.bind(this));\n\n\t\treturn this.node;\n\t}\n\n\tgetNode(): ?HTMLElement\n\t{\n\t\treturn this.node;\n\t}\n\n\tgetValue(): ResponsibleType\n\t{\n\t\treturn this.responsible;\n\t}\n\n\tonClick()\n\t{\n\t\tthis.emit('click');\n\t}\n}","import {Type} from 'main.core';\n\nexport class StoryPointsStorage\n{\n\tconstructor()\n\t{\n\t\tthis.storyPoints = '';\n\t}\n\n\tsetPoints(storyPoints: string)\n\t{\n\t\tif (storyPoints === '')\n\t\t{\n\t\t\tthis.storyPoints = '';\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (Type.isUndefined(storyPoints) || isNaN(parseFloat(storyPoints)))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (Type.isFloat(storyPoints))\n\t\t{\n\t\t\tstoryPoints = parseFloat(storyPoints).toFixed(1);\n\t\t}\n\n\t\tthis.storyPoints = String(storyPoints);\n\t}\n\n\tgetPoints(): string\n\t{\n\t\treturn this.storyPoints;\n\t}\n\n\tclearPoints()\n\t{\n\t\tthis.storyPoints = '';\n\t}\n\n\tisEmpty(): boolean\n\t{\n\t\treturn this.storyPoints === '';\n\t}\n}","import {Event, Tag, Text, Dom} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\n\nimport {StoryPointsStorage} from '../../utility/story.points.storage';\n\nexport class StoryPoints  extends EventEmitter\n{\n\tconstructor(storyPoints: string)\n\t{\n\t\tsuper();\n\n\t\tthis.setEventNamespace('BX.Tasks.Scrum.Item.StoryPoints');\n\n\t\tthis.storyPointsStorage = new StoryPointsStorage();\n\n\t\tthis.storyPointsStorage.setPoints(storyPoints);\n\n\t\tthis.disableStatus = false;\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tconst value = Text.encode(this.storyPointsStorage.getPoints());\n\n\t\tthis.node = Tag.render`\n\t\t\t<div class=\"tasks-scrum__item--story-points ${this.storyPointsStorage.isEmpty() ? '--empty' : ''}\">\n\t\t\t\t<div class=\"tasks-scrum__item--story-points-content\">\n\t\t\t\t\t<div class=\"tasks-scrum__item--story-points-element\">\n\t\t\t\t\t\t${this.storyPointsStorage.isEmpty() ? '-' : value}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"tasks-scrum__item--story-points-input-container\">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tclass=\"tasks-scrum__item--story-points-input\"\n\t\t\t\t\t\t\tvalue=\"${value}\"\n\t\t\t\t\t\t>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\tEvent.bind(\n\t\t\tthis.node.querySelector('.tasks-scrum__item--story-points-element'),\n\t\t\t'click',\n\t\t\tthis.onClick.bind(this)\n\t\t);\n\n\t\tconst input = this.node.querySelector('.tasks-scrum__item--story-points-input');\n\n\t\tEvent.bind(input, 'blur', this.onBlur.bind(this));\n\t\tEvent.bind(input, 'keydown', this.onKeyDown.bind(input));\n\n\t\treturn this.node;\n\t}\n\n\tgetNode(): ?HTMLElement\n\t{\n\t\treturn this.node;\n\t}\n\n\tgetValue(): StoryPointsStorage\n\t{\n\t\treturn this.storyPointsStorage;\n\t}\n\n\tisDisable(): boolean\n\t{\n\t\treturn this.disableStatus;\n\t}\n\n\tdisable()\n\t{\n\t\tthis.disableStatus = true;\n\t}\n\n\tunDisable()\n\t{\n\t\tthis.disableStatus = false;\n\t}\n\n\tonClick()\n\t{\n\t\tif (this.isDisable())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst inputContainer = this.node.querySelector('.tasks-scrum__item--story-points-input-container');\n\t\tconst input = inputContainer.firstElementChild;\n\t\tconst value = this.storyPointsStorage.getPoints();\n\n\t\tDom.addClass(inputContainer, '--active');\n\n\t\tinput.focus();\n\t\tinput.setSelectionRange(value.length, value.length);\n\t}\n\n\tonBlur()\n\t{\n\t\tconst inputContainer = this.node.querySelector('.tasks-scrum__item--story-points-input-container');\n\t\tconst input = inputContainer.firstElementChild;\n\n\t\tconst value = input.value.trim();\n\n\t\tconst currentValue = this.storyPointsStorage.getPoints();\n\n\t\tif (currentValue !== value)\n\t\t{\n\t\t\tthis.emit('setStoryPoints', value);\n\t\t}\n\n\t\tDom.removeClass(inputContainer, '--active');\n\t}\n\n\tonKeyDown(event)\n\t{\n\t\tif (event.isComposing || event.key === 'Escape' || event.key === 'Enter')\n\t\t{\n\t\t\tthis.blur();\n\t\t}\n\t}\n}\n","import {Dom, Event, Tag} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\nimport {Loader} from 'main.loader';\n\nimport {Item} from '../item';\n\nexport class SubTasks extends EventEmitter\n{\n\tconstructor(parentItem: Item)\n\t{\n\t\tsuper();\n\n\t\tthis.parentItem = parentItem;\n\n\t\tthis.list = new Map();\n\n\t\tthis.node = null;\n\t}\n\n\trender()\n\t{\n\t\tthis.node = Tag.render`<div class=\"tasks-scrum__item-sub-tasks\"></div>`;\n\n\t\tEvent.bind(this.node, 'transitionend', this.onTransitionEnd.bind(this, this.node));\n\n\t\treturn this.node;\n\t}\n\n\tgetNode(): ?HTMLElement\n\t{\n\t\treturn this.node;\n\t}\n\n\tremoveYourself()\n\t{\n\t\tDom.remove(this.node);\n\n\t\tthis.node = null;\n\t}\n\n\tisEmpty(): boolean\n\t{\n\t\treturn this.list.size === 0;\n\t}\n\n\tgetParentItem(): Item\n\t{\n\t\treturn this.parentItem;\n\t}\n\n\taddTask(item: Item)\n\t{\n\t\tthis.list.set(item.getId(), item);\n\t}\n\n\tgetList(): Map<number, Item>\n\t{\n\t\treturn this.list;\n\t}\n\n\tcleanTasks()\n\t{\n\t\tthis.list.forEach((item: Item) => {\n\t\t\tDom.remove(item.getNode());\n\t\t});\n\n\t\tthis.list.clear();\n\t}\n\n\tshow()\n\t{\n\t\tif (this.list.size)\n\t\t{\n\t\t\tthis.hideLoader();\n\n\t\t\tthis.renderSubTasks();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.showLoader();\n\t\t}\n\n\t\tthis.getNode().style.height = `${ this.getNode().scrollHeight }px`;\n\t}\n\n\thide()\n\t{\n\t\tthis.hideLoader();\n\n\t\tthis.getNode().style.height = `${ this.getNode().scrollHeight }px`;\n\t\tthis.getNode().clientHeight;\n\t\tthis.getNode().style.height = '0';\n\t}\n\n\tisShown(): boolean\n\t{\n\t\treturn this.node !== null;\n\t}\n\n\trenderSubTasks()\n\t{\n\t\tthis.node.innerHTML = '';\n\n\t\tthis.list.forEach((item: Item) => {\n\t\t\tDom.append(item.render(), this.getNode());\n\t\t});\n\t}\n\n\tshowLoader()\n\t{\n\t\tif (this.loader)\n\t\t{\n\t\t\tthis.loader.show();\n\n\t\t\treturn;\n\t\t}\n\n\t\tconst listPosition = Dom.getPosition(this.getNode());\n\n\t\tthis.loader = new Loader({\n\t\t\ttarget: this.getNode(),\n\t\t\tsize: 60,\n\t\t\tmode: 'inline',\n\t\t\tcolor: 'rgba(82, 92, 105, 0.9)',\n\t\t\toffset: {\n\t\t\t\ttop: `12px`,\n\t\t\t\tleft: `${(listPosition.width / 2 - 30)}px`\n\t\t\t}\n\t\t});\n\n\t\tthis.loader.show();\n\t}\n\n\thideLoader()\n\t{\n\t\tif (this.loader)\n\t\t{\n\t\t\tthis.loader.hide();\n\t\t}\n\t}\n\n\tonTransitionEnd(node: HTMLElement)\n\t{\n\t\tconst isHide = (node.style.height === '0px');\n\n\t\tif (isHide)\n\t\t{\n\t\t\tthis.removeYourself();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tnode.style.height = 'auto';\n\t\t}\n\t}\n}\n","import {Type, Dom, Event, Tag, Text} from 'main.core';\nimport {BaseEvent, EventEmitter} from 'main.core.events';\nimport {Dialog} from 'ui.entity-selector';\n\nimport {Toggle} from './task/toggle';\nimport {Name} from './task/name';\nimport {Checklist} from './task/checklist';\nimport {Files} from './task/files';\nimport {Comments} from './task/comments';\nimport {Epic} from './task/epic';\nimport {Tags} from './task/tags';\nimport {Responsible} from './task/responsible';\nimport {StoryPoints} from './task/story.points';\nimport {SubTasks} from './task/sub.tasks';\n\nimport '../css/item.css';\n\nimport type {TaskCounter} from './task/comments';\nimport type {EpicType} from './task/epic';\nimport type {ResponsibleType} from './task/responsible';\n\ntype AllowedActions = {\n\ttask_edit: boolean,\n\ttask_remove: boolean\n}\n\ntype ItemInfo = {\n\tcolor?: string,\n\tborderColor?: string\n}\ntype SubTaskInfo = {\n\tsourceId: number,\n\tcompleted: 'Y' | 'N',\n\tstoryPoints: string\n}\n\ntype SubTasksInfo = {\n\t[sourceId: number]: SubTaskInfo\n}\n\nexport type ItemParams = {\n\tid: number|string,\n\ttmpId: string,\n\tname: string,\n\tcheckListComplete: number,\n\tcheckListAll: number,\n\tattachedFilesCount: number,\n\ttaskCounter: TaskCounter,\n\tepic?: EpicType,\n\ttags?: Array<string>,\n\tresponsible?: ResponsibleType,\n\tstoryPoints?: string,\n\tentityId?: number,\n\tentityType?: string,\n\tparentId?: number,\n\tsourceId?: number,\n\tcompleted?: 'Y' | 'N',\n\tsort?: number,\n\tallowedActions?: AllowedActions,\n\n\tinfo?: ItemInfo,\n\tisParentTask?: 'Y' | 'N',\n\tisLinkedTask?: 'Y' | 'N',\n\tparentTaskId?: number,\n\tisSubTask?: 'Y' | 'N',\n\tsubTasksInfo?: SubTasksInfo\n};\n\nexport class Item extends EventEmitter\n{\n\tconstructor(params: ItemParams)\n\t{\n\t\tsuper(params);\n\n\t\tthis.setEventNamespace('BX.Tasks.Scrum.Item');\n\n\t\tthis.groupMode = false;\n\n\t\tthis.node = null;\n\n\t\tthis.toggle = null;\n\t\tthis.name = null;\n\t\tthis.checklist = null;\n\t\tthis.files = null;\n\t\tthis.comments = null;\n\t\tthis.epic = null;\n\t\tthis.tags = null;\n\t\tthis.responsible = null;\n\t\tthis.storyPoints = null;\n\t\tthis.subTasks = null;\n\n\t\tthis.setItemParams(params);\n\t}\n\n\tsetItemParams(params: ItemParams)\n\t{\n\t\tthis.setId(params.id);\n\t\tthis.setTmpId(params.tmpId);\n\t\tthis.setSort(params.sort);\n\t\tthis.setEntityId(params.entityId);\n\t\tthis.setEntityType(params.entityType);\n\t\tthis.setSourceId(params.sourceId);\n\t\tthis.setInfo(params.info);\n\n\t\tthis.setSubTasksInfo(params.subTasksInfo);\n\t\tthis.setParentTask(params.isParentTask);\n\t\tthis.setLinkedTask(params.isLinkedTask);\n\t\tthis.setParentTaskId(params.parentTaskId);\n\t\tthis.setSubTask(params.isSubTask);\n\t\tthis.setCompleted(params.completed);\n\t\tthis.setDisableStatus(false);\n\t\tthis.setAllowedActions(params.allowedActions);\n\n\t\tthis.shortView = 'Y';\n\t}\n\n\tstatic buildItem(params: ItemParams): Item\n\t{\n\t\tconst item = new Item(params);\n\n\t\titem.setToggle(item.isParentTask());\n\t\titem.setName(params.name);\n\t\titem.setChecklist(\n\t\t\tparams.checkListComplete,\n\t\t\tparams.checkListAll\n\t\t);\n\t\titem.setFiles(params.attachedFilesCount);\n\t\titem.setComments(params.taskCounter);\n\t\titem.setEpic(params.epic);\n\t\titem.setTags(params.tags);\n\t\titem.setResponsible(params.responsible);\n\n\t\tif (!item.isSubTask())\n\t\t{\n\t\t\titem.setStoryPoints(params.storyPoints);\n\t\t}\n\n\t\titem.setSubTasks();\n\n\t\treturn item;\n\t}\n\n\tsetToggle(visible: boolean)\n\t{\n\t\tconst toggle = new Toggle({ visible });\n\n\t\tif (this.toggle)\n\t\t{\n\t\t\tDom.replace(this.toggle.getNode(), toggle.render());\n\t\t}\n\n\t\tthis.toggle = toggle;\n\n\t\tthis.toggle.subscribe('show', this.onShowToggle.bind(this));\n\t\tthis.toggle.subscribe('hide', this.onHideToggle.bind(this));\n\t}\n\n\tgetToggle(): Toggle\n\t{\n\t\treturn this.toggle;\n\t}\n\n\tsetName(inputName: string)\n\t{\n\t\tconst name = new Name(inputName, this.isCompleted());\n\n\t\tif (this.name)\n\t\t{\n\t\t\tDom.replace(this.name.getNode(), name.render());\n\t\t}\n\n\t\tthis.name = name;\n\n\t\tthis.name.subscribe('click', () => this.emit('showTask'));\n\t}\n\n\tgetName(): Name\n\t{\n\t\treturn this.name;\n\t}\n\n\tsetChecklist(complete: number, all: number)\n\t{\n\t\tconst checklist = new Checklist({ complete, all });\n\n\t\tif (this.checklist)\n\t\t{\n\t\t\tDom.replace(this.checklist.getNode(), checklist.render());\n\t\t}\n\n\t\tthis.checklist = checklist;\n\n\t\tthis.checklist.subscribe('click', () => this.emit('showTask'));\n\t}\n\n\tgetChecklist(): Checklist\n\t{\n\t\treturn this.checklist;\n\t}\n\n\tsetFiles(count: number)\n\t{\n\t\tconst files = new Files(count);\n\n\t\tif (this.files)\n\t\t{\n\t\t\tDom.replace(this.files.getNode(), files.render());\n\t\t}\n\n\t\tthis.files = files;\n\n\t\tthis.files.subscribe('click', () => this.emit('showTask'));\n\t}\n\n\tgetFiles(): Checklist\n\t{\n\t\treturn this.files;\n\t}\n\n\tsetComments(taskCounter: TaskCounter)\n\t{\n\t\tconst comments = new Comments(taskCounter);\n\n\t\tif (this.comments)\n\t\t{\n\t\t\tDom.replace(this.comments.getNode(), comments.render());\n\t\t}\n\n\t\tthis.comments = comments;\n\n\t\tthis.comments.subscribe('click', () => this.emit('showTask'));\n\t}\n\n\tgetComments(): Comments\n\t{\n\t\treturn this.comments;\n\t}\n\n\tsetEpic(inputEpic?: EpicType)\n\t{\n\t\tconst epic = new Epic(inputEpic);\n\n\t\tif (this.epic)\n\t\t{\n\t\t\tDom.replace(this.epic.getNode(), this.isShortView() ? epic.render() : epic.renderFullView());\n\t\t}\n\n\t\tthis.epic = epic;\n\n\t\tthis.updateTagsVisibility();\n\n\t\tthis.epic.subscribe('click', () => this.emit('filterByEpic', this.epic.getId()));\n\t}\n\n\tgetEpic(): Epic\n\t{\n\t\treturn this.epic;\n\t}\n\n\tsetTags(inputTags?: Array<string>)\n\t{\n\t\tconst tags = new Tags(inputTags);\n\n\t\tif (this.tags)\n\t\t{\n\t\t\tif (this.getNode()) //todo\n\t\t\t{\n\t\t\t\tthis.replaceTags(tags);\n\t\t\t}\n\t\t}\n\n\t\tthis.tags = tags;\n\n\t\tthis.updateTagsVisibility();\n\n\t\tthis.tags.subscribe('click', (baseEvent: BaseEvent) => this.emit('filterByTag', baseEvent.getData()));\n\t}\n\n\tgetTags(): Tags\n\t{\n\t\treturn this.tags;\n\t}\n\n\tsetShortView(value: string)\n\t{\n\t\tthis.shortView = (value === 'Y' ? 'Y' : 'N');\n\n\t\tif (this.getNode())\n\t\t{\n\t\t\tDom.replace(this.getNode(), this.render());\n\t\t}\n\t}\n\n\tgetShortView(): 'Y' | 'N'\n\t{\n\t\treturn this.shortView;\n\t}\n\n\tisShortView(): boolean\n\t{\n\t\treturn this.shortView === 'Y';\n\t}\n\n\tsetResponsible(inputResponsible: ResponsibleType)\n\t{\n\t\tconst responsible = new Responsible(inputResponsible);\n\n\t\tif (this.responsible)\n\t\t{\n\t\t\tDom.replace(this.responsible.getNode(), responsible.render());\n\t\t}\n\n\t\tthis.responsible = responsible;\n\n\t\tthis.responsible.subscribe('click', this.onResponsibleClick.bind(this));\n\t}\n\n\tgetResponsible(): Responsible\n\t{\n\t\treturn this.responsible;\n\t}\n\n\tsetStoryPoints(inputStoryPoints: string)\n\t{\n\t\tconst storyPoints = new StoryPoints(inputStoryPoints);\n\n\t\tif (this.storyPoints)\n\t\t{\n\t\t\tDom.replace(this.storyPoints.getNode(), storyPoints.render());\n\t\t}\n\n\t\tif (this.isDisabled())\n\t\t{\n\t\t\tstoryPoints.disable();\n\t\t}\n\n\t\tthis.storyPoints = storyPoints;\n\n\t\tthis.storyPoints.subscribe('setStoryPoints', this.onSetStoryPoints.bind(this));\n\t}\n\n\tgetStoryPoints(): StoryPoints\n\t{\n\t\treturn this.storyPoints;\n\t}\n\n\tsetSubTasks()\n\t{\n\t\tthis.subTasks = new SubTasks(this);\n\n\t\tthis.subTasks.subscribe('click', () => this.emit('showTask'));\n\t}\n\n\tgetSubTasks(): ?SubTasks\n\t{\n\t\treturn this.subTasks;\n\t}\n\n\tsetId(id: number|string)\n\t{\n\t\tthis.id = (\n\t\t\tType.isInteger(id) ? parseInt(id, 10) :\n\t\t\t\t(Type.isString(id) && id) ? id : Text.getRandom()\n\t\t);\n\n\t\tif (this.getNode())\n\t\t{\n\t\t\tthis.getNode().dataset.id = this.id;\n\t\t}\n\t}\n\n\tgetId()\n\t{\n\t\treturn this.id;\n\t}\n\n\tsetTmpId(tmpId: string)\n\t{\n\t\tthis.tmpId = (Type.isString(tmpId) ? tmpId : '');\n\t}\n\n\tgetTmpId(): string\n\t{\n\t\treturn this.tmpId;\n\t}\n\n\tsetSort(sort: number)\n\t{\n\t\tthis.setPreviousSort(this.sort);\n\n\t\tthis.sort = (Type.isInteger(sort) ? parseInt(sort, 10) : 0);\n\n\t\tif (this.getNode())\n\t\t{\n\t\t\tDom.attr(this.getNode(), 'data-sort', this.sort);\n\t\t}\n\t}\n\n\tgetSort(): number\n\t{\n\t\treturn this.sort;\n\t}\n\n\tsetPreviousSort(sort: number)\n\t{\n\t\tthis.previousSort = (Type.isInteger(sort) ? parseInt(sort, 10) : 0);\n\t}\n\n\tgetPreviousSort(): number\n\t{\n\t\treturn this.previousSort;\n\t}\n\n\tsetEntityId(entityId: number)\n\t{\n\t\tthis.entityId = (Type.isInteger(entityId) ? parseInt(entityId, 10) : 0);\n\t}\n\n\tgetEntityId(): number\n\t{\n\t\treturn this.entityId;\n\t}\n\n\tsetEntityType(entityType: string)\n\t{\n\t\tthis.entityType = (new Set(['backlog', 'sprint']).has(entityType) ? entityType : 'backlog');\n\n\t\tthis.updateBorderColor();\n\t}\n\n\tgetEntityType(): string\n\t{\n\t\treturn this.entityType;\n\t}\n\n\tsetSourceId(sourceId: number)\n\t{\n\t\tthis.sourceId = (Type.isInteger(sourceId) ? parseInt(sourceId, 10) : 0);\n\t}\n\n\tgetSourceId(): number\n\t{\n\t\treturn this.sourceId;\n\t}\n\n\tsetCompleted(value: string)\n\t{\n\t\tconst completed = (value === 'Y');\n\n\t\tif (this.name)\n\t\t{\n\t\t\tif (completed)\n\t\t\t{\n\t\t\t\tthis.name.strikeOut();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.name.unStrikeOut();\n\t\t\t}\n\t\t}\n\n\t\tthis.completed = completed;\n\t}\n\n\tsetAllowedActions(allowedActions: AllowedActions)\n\t{\n\t\tthis.allowedActions = (Type.isPlainObject(allowedActions) ? allowedActions : {});\n\t}\n\n\tsetSubTasksInfo(subTasksInfo: ?SubTasksInfo)\n\t{\n\t\tthis.subTasksInfo = subTasksInfo;\n\t}\n\n\tgetSubTasksInfo(): ?SubTasksInfo\n\t{\n\t\treturn this.subTasksInfo;\n\t}\n\n\tgetSubTasksCount(): number\n\t{\n\t\tif (!this.getSubTasksInfo())\n\t\t{\n\t\t\treturn 0;\n\t\t}\n\n\t\treturn Object.keys(this.getSubTasksInfo()).length;\n\t}\n\n\tsetParentTask(value: string)\n\t{\n\t\tthis.parentTask = (value === 'Y');\n\n\t\tif (this.getNode())\n\t\t{\n\t\t\tthis.setToggle(this.isParentTask());\n\n\t\t\tif (this.isParentTask())\n\t\t\t{\n\t\t\t\tDom.addClass(this.getNode(), '--parent-tasks');\n\n\t\t\t\tif (this.getSubTasksCount() > 1)\n\t\t\t\t{\n\t\t\t\t\tDom.addClass(this.getNode(), '--many');\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tDom.removeClass(this.getNode(), '--many');\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tDom.removeClass(this.getNode(), '--parent-tasks');\n\t\t\t}\n\t\t}\n\t}\n\n\tisParentTask(): boolean\n\t{\n\t\treturn this.parentTask;\n\t}\n\n\tsetLinkedTask(value: string)\n\t{\n\t\tthis.linkedTask = (value === 'Y');\n\n\t\tif (this.getNode())\n\t\t{\n\t\t\tif (this.isLinkedTask() && !this.isSubTask())\n\t\t\t{\n\t\t\t\tDom.addClass(this.getNode(), '--linked');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tDom.removeClass(this.getNode(), '--linked');\n\t\t\t}\n\t\t}\n\t}\n\n\tisLinkedTask(): boolean\n\t{\n\t\treturn this.linkedTask;\n\t}\n\n\tsetParentTaskId(id: number)\n\t{\n\t\tthis.parentTaskId = (Type.isInteger(id) ? parseInt(id, 10) : 0);\n\t}\n\n\tgetParentTaskId(): number\n\t{\n\t\treturn this.parentTaskId;\n\t}\n\n\tsetSubTask(value: string)\n\t{\n\t\tthis.subTask = (value === 'Y');\n\n\t\tif (this.getNode())\n\t\t{\n\t\t\tif (this.isSubTask())\n\t\t\t{\n\t\t\t\tDom.addClass(this.getNode(), '--subtasks');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tDom.removeClass(this.getNode(), '--subtasks');\n\t\t\t}\n\t\t}\n\t}\n\n\tisSubTask(): boolean\n\t{\n\t\treturn this.subTask;\n\t}\n\n\tsetInfo(info: ?ItemInfo)\n\t{\n\t\tif (Type.isUndefined(info))\n\t\t{\n\t\t\tthis.info = {\n\t\t\t\tcolor: '',\n\t\t\t\tborderColor: ''\n\t\t\t};\n\n\t\t\treturn;\n\t\t}\n\n\t\tthis.info = info;\n\t}\n\n\tgetInfo(): ?ItemInfo\n\t{\n\t\treturn this.info;\n\t}\n\n\tsetBorderColor(color: string)\n\t{\n\t\tthis.info.borderColor = (Type.isString(color) ? color : '');\n\n\t\tthis.updateBorderColor();\n\t}\n\n\tgetBorderColor(): string\n\t{\n\t\treturn (Type.isString(this.info.borderColor) ? this.info.borderColor : '');\n\t}\n\n\tupdateBorderColor()\n\t{\n\t\tif (this.isLinkedTask() && !this.isSubTask() && this.getNode() && this.getBorderColor() !== '')\n\t\t{\n\t\t\tconst colorNode = this.getNode().querySelector('.tasks-scrum__item--link');\n\n\t\t\tDom.style(colorNode, 'backgroundColor', this.getBorderColor());\n\n\t\t\tswitch (this.getEntityType())\n\t\t\t{\n\t\t\t\tcase 'backlog':\n\t\t\t\t\tDom.style(this.getNode(), 'borderLeft', '3px solid' + this.getBorderColor());\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'sprint':\n\t\t\t\t\tDom.style(this.getNode(), 'borderLeft', null);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tisCompleted(): boolean\n\t{\n\t\treturn this.completed;\n\t}\n\n\tisDisabled(): boolean\n\t{\n\t\treturn this.disableStatus;\n\t}\n\n\tsetMoveActivity(value: boolean)\n\t{\n\t\tthis.moveActivity = Boolean(value);\n\t}\n\n\tisMovable(): boolean\n\t{\n\t\treturn this.moveActivity;\n\t}\n\n\tsetDisableStatus(status: boolean)\n\t{\n\t\tthis.disableStatus = Boolean(status);\n\n\t\tif (this.isDisabled())\n\t\t{\n\t\t\tthis.storyPoints.disable();\n\t\t}\n\t}\n\n\tactivateGroupMode()\n\t{\n\t\tDom.addClass(this.getNode(), '--checked');\n\t}\n\n\tdeactivateGroupMode()\n\t{\n\t\tDom.removeClass(this.getNode(), '--checked');\n\t}\n\n\tactivateLinkedMode()\n\t{\n\t\tDom.addClass(this.getNode(), '--linked-mode');\n\t}\n\n\tdeactivateLinkedMode()\n\t{\n\t\tDom.removeClass(this.getNode(), '--linked-mode');\n\t\tDom.removeClass(this.getNode(), '--linked-mode-current');\n\t}\n\n\tactivateCurrentLinkedMode()\n\t{\n\t\tDom.addClass(this.getNode(), '--linked-mode-current');\n\t}\n\n\tdeactivateCurrentLinkedMode()\n\t{\n\t\tDom.removeClass(this.getNode(), '--linked-mode-current');\n\t}\n\n\taddItemToGroupMode()\n\t{\n\t\tthis.groupMode = true;\n\n\t\tDom.addClass(this.getNode(), ['--group-mode']);\n\n\t\tthis.getNode().querySelector('.tasks-scrum__item--group-mode-input').checked = true;\n\t}\n\n\tremoveItemFromGroupMode()\n\t{\n\t\tthis.groupMode = false;\n\n\t\tDom.removeClass(this.getNode(), ['--group-mode']);\n\n\t\tthis.getNode().querySelector('.tasks-scrum__item--group-mode-input').checked = false;\n\t}\n\n\tisGroupMode(): boolean\n\t{\n\t\treturn this.groupMode;\n\t}\n\n\tgetNode(): ?HTMLElement\n\t{\n\t\treturn this.node;\n\t}\n\n\tshowSubTasks()\n\t{\n\t\tDom.addClass(this.getNode(), '--open');\n\n\t\tthis.toggle.show();\n\n\t\tthis.getSubTasks().show();\n\t}\n\n\thideSubTasks()\n\t{\n\t\tDom.removeClass(this.getNode(), '--open');\n\n\t\tthis.toggle.hide();\n\n\t\tthis.getSubTasks().hide();\n\t}\n\n\tisShownSubTasks(): boolean\n\t{\n\t\treturn this.getSubTasks().isShown();\n\t}\n\n\tsetParentEntity(entityId: number, entityType: string)\n\t{\n\t\tthis.setEntityId(entityId);\n\t\tthis.setEntityType(entityType);\n\t}\n\n\tisEditAllowed(): boolean\n\t{\n\t\treturn Boolean(this.allowedActions['task_edit']);\n\t}\n\n\tisRemoveAllowed(): boolean\n\t{\n\t\treturn Boolean(this.allowedActions['task_remove']);\n\t}\n\n\tupdateYourself(tmpItem: Item)\n\t{\n\t\tthis.setToggle(tmpItem.isParentTask());\n\n\t\tif (this.getName().getValue() !== tmpItem.getName().getValue())\n\t\t{\n\t\t\tthis.setName(tmpItem.getName().getValue());\n\t\t}\n\t\tif (this.getChecklist().getValue() !== tmpItem.getChecklist().getValue())\n\t\t{\n\t\t\tthis.setChecklist(\n\t\t\t\ttmpItem.getChecklist().getComplete(),\n\t\t\t\ttmpItem.getChecklist().getAll()\n\t\t\t);\n\t\t}\n\t\tif (this.getFiles().getValue() !== tmpItem.getFiles().getValue())\n\t\t{\n\t\t\tthis.setFiles(tmpItem.getFiles().getValue());\n\t\t}\n\t\tif (this.getComments().getValue() !== tmpItem.getComments().getValue())\n\t\t{\n\t\t\tthis.setComments(tmpItem.getComments().getValue());\n\t\t}\n\t\tif (this.getEpic().getValue() !== tmpItem.getEpic().getValue())\n\t\t{\n\t\t\tthis.setEpic(tmpItem.getEpic().getValue());\n\t\t}\n\t\tif (!this.getTags().isEqualTags(tmpItem.getTags()))\n\t\t{\n\t\t\tthis.setTags(tmpItem.getTags().getValue());\n\t\t}\n\t\tif (this.getResponsible().getValue() !== tmpItem.getResponsible().getValue())\n\t\t{\n\t\t\tthis.setResponsible(tmpItem.getResponsible().getValue());\n\t\t}\n\t\tif (\n\t\t\t!this.isSubTask()\n\t\t\t&& this.getStoryPoints().getValue().getPoints() !== tmpItem.getStoryPoints().getValue().getPoints()\n\t\t)\n\t\t{\n\t\t\tthis.setStoryPoints(tmpItem.getStoryPoints().getValue().getPoints());\n\t\t}\n\t\tthis.setEntityId(tmpItem.getEntityId());\n\t\tif (this.isCompleted() !== tmpItem.isCompleted())\n\t\t{\n\t\t\tthis.setCompleted(tmpItem.isCompleted() ? 'Y' : 'N');\n\t\t}\n\n\t\tthis.setParentTask(tmpItem.isParentTask() ? 'Y' : 'N');\n\t\tthis.setLinkedTask(tmpItem.isLinkedTask() ? 'Y' : 'N');\n\t\tthis.setParentTaskId(tmpItem.getParentTaskId());\n\t\tthis.setSubTask(tmpItem.isSubTask() ? 'Y' : 'N');\n\t}\n\n\tremoveYourself()\n\t{\n\t\tDom.remove(this.node);\n\n\t\tthis.node = null;\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tif (this.isShortView())\n\t\t{\n\t\t\treturn this.renderShortView();\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn this.renderFullView();\n\t\t}\n\t}\n\n\trenderShortView(): HTMLElement\n\t{\n\t\tconst typeClass = (this.isParentTask() ? ' --parent-tasks ' : ' ') + (this.isSubTask() ? ' --subtasks ' : '');\n\t\tconst subClass = this.getSubTasksCount() > 1 ? ' --many ' : '';\n\t\tconst linkedClass = this.isLinkedTask() && !this.isSubTask() ? ' --linked ' : '';\n\t\tconst entityClass = '--item-' + this.getEntityType();\n\n\t\tthis.node = Tag.render`\n\t\t\t<div\n\t\t\t\tclass=\"tasks-scrum__item${typeClass}${subClass}${linkedClass}tasks-scrum__item--drag --short-view ${entityClass}\"\n\t\t\t\tdata-id=\"${Text.encode(this.getId())}\"\n\t\t\t\tdata-sort=\"${Text.encode(this.getSort())}\"\n\t\t\t>\n\t\t\t\t<div class=\"tasks-scrum__item--link\"></div>\n\t\t\t\t<div class=\"tasks-scrum__item--info\">\n\t\t\t\t\t${this.toggle ? this.toggle.render() : ''}\n\t\t\t\t\t<div class=\"tasks-scrum__item--main-info\">\n\t\t\t\t\t\t${this.name ? this.name.render() : ''}\n\t\t\t\t\t\t<div class=\"tasks-scrum__item--tags\">\n\t\t\t\t\t\t\t${this.epic ? this.epic.render() : ''}\n\t\t\t\t\t\t\t${this.tags ? this.tags.render() : ''}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"tasks-scrum__item--entity-content\">\n\t\t\t\t\t\t${this.comments ? this.comments.render() : ''}\n\t\t\t\t\t\t<div class=\"tasks-scrum__item--counter-container\">\n\t\t\t\t\t\t\t${this.files ? this.files.render() : ''}\n\t\t\t\t\t\t\t${this.checklist ? this.checklist.render() : ''}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t${this.responsible ? this.responsible.render() : ''}\n\t\t\t\t${!this.isSubTask() && this.storyPoints ? this.storyPoints.render() : ''}\n\t\t\t\t<div class=\"tasks-scrum__item--group-mode\">\n\t\t\t\t\t<input type=\"checkbox\" class=\"tasks-scrum__item--group-mode-input\">\n\t\t\t\t</div>\n\t\t\t\t<div class=\"tasks-scrum__item--substrate\"></div>\n\t\t\t</div>\n\t\t`;\n\n\t\tEvent.bind(this.node, 'click', this.onItemClick.bind(this));\n\n\t\tthis.updateBorderColor();\n\n\t\treturn this.node;\n\t}\n\n\trenderFullView(): HTMLElement\n\t{\n\t\tconst typeClass = (this.isParentTask() ? ' --parent-tasks ' : ' ') + (this.isSubTask() ? ' --subtasks ' : '');\n\t\tconst subClass = this.getSubTasksCount() > 1 ? ' --many ' : '';\n\t\tconst linkedClass = this.isLinkedTask() && !this.isSubTask() ? ' --linked ' : '';\n\t\tconst entityClass = '--item-' + this.getEntityType();\n\n\t\tthis.node = Tag.render`\n\t\t\t<div\n\t\t\t\tclass=\"tasks-scrum__item${typeClass}${subClass}${linkedClass}tasks-scrum__item--drag --full-view ${entityClass}\"\n\t\t\t\tdata-id=\"${Text.encode(this.getId())}\"\n\t\t\t\tdata-sort=\"${Text.encode(this.getSort())}\"\n\t\t\t>\n\t\t\t<div class=\"tasks-scrum__item--info-task--basic\">\n\t\t\t\t<div class=\"tasks-scrum__item--link\"></div>\n\t\t\t\t<div class=\"tasks-scrum__item--info\">\n\t\t\t\t\t${this.toggle ? this.toggle.render() : ''}\n\t\t\t\t\t<div class=\"tasks-scrum__item--main-info\">\n\t\t\t\t\t\t${this.name ? this.name.render() : ''}\n\t\t\t\t\t\t<div class=\"tasks-scrum__item--tags\">\n\t\t\t\t\t\t\t${this.epic ? this.epic.renderFullView() : ''}\n\t\t\t\t\t\t\t${this.tags ? this.tags.render() : ''}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t${this.comments ? this.comments.render() : ''}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"tasks-scrum__item--info-task--details\">\n\t\t\t\t${this.responsible ? this.responsible.render() : ''}\n\n\t\t\t\t\t<div class=\"tasks-scrum__item--counter-container\">\n\t\t\t\t\t\t${this.files ? this.files.render() : ''}\n\t\t\t\t\t\t${this.checklist ? this.checklist.render() : ''}\n\t\t\t\t\t</div>\n\n\t\t\t\t${!this.isSubTask() && this.storyPoints ? this.storyPoints.render() : ''}\n\t\t\t</div>\n\n\t\t\t\t<div class=\"tasks-scrum__item--group-mode\">\n\t\t\t\t\t<input type=\"checkbox\" class=\"tasks-scrum__item--group-mode-input\">\n\t\t\t\t</div>\n\t\t\t\t<div class=\"tasks-scrum__item--substrate\"></div>\n\t\t\t</div>\n\t\t`;\n\n\t\tthis.updateTagsVisibility();\n\n\t\tEvent.bind(this.node, 'click', this.onItemClick.bind(this));\n\n\t\tthis.updateBorderColor();\n\n\t\treturn this.node;\n\t}\n\n\tupdateTagsVisibility()\n\t{\n\t\tif (!this.getNode())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.epic.getValue().id > 0 || this.tags.getValue().length > 0)\n\t\t{\n\t\t\tDom.addClass(this.getNode().querySelector('.tasks-scrum__item--tags'), '--visible');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.removeClass(this.getNode().querySelector('.tasks-scrum__item--tags'), '--visible');\n\t\t}\n\t}\n\n\treplaceTags(tags: Tags)\n\t{\n\t\tconst tagsContainer = this.getNode().querySelector('.tasks-scrum__item--tags');\n\t\tconst tagsNode = tagsContainer.querySelectorAll('.tasks-scrum__item--hashtag');\n\n\t\ttagsNode.forEach((tagNode: HTMLElement) => Dom.remove(tagNode));\n\n\t\tconst tagList = tags.render();\n\n\t\tif (Type.isArray(tagList))\n\t\t{\n\t\t\ttagList.forEach((tagNode: HTMLElement) => Dom.append(tagNode, tagsContainer));\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.append(tagList, tagsContainer);\n\t\t}\n\t}\n\n\tonItemClick(event)\n\t{\n\t\tconst target = event.target;\n\n\t\tif (target.classList.contains('tasks-scrum__item--link'))\n\t\t{\n\t\t\tthis.emit('showLinked');\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.isDisabled())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.toggle && this.hasNode(this.toggle.getNode(), target))\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tif (this.name && this.hasNode(this.name.getNode(), target))\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tif (this.checklist && this.hasNode(this.checklist.getNode(), target))\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tif (this.files && this.hasNode(this.files.getNode(), target))\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tif (this.comments && this.hasNode(this.comments.getNode(), target))\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tif (this.epic && this.hasNode(this.epic.getNode(), target))\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tif (this.tags && this.hasNode(this.tags.getNode(), target))\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tif (this.responsible && this.hasNode(this.responsible.getNode(), target, true))\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tif (this.isSubTask())\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tif (this.storyPoints && this.hasNode(this.storyPoints.getNode(), target))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.emit('toggleActionPanel');\n\t}\n\n\tonResponsibleClick()\n\t{\n\t\tif (this.isGroupMode())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.isDisabled())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.responsibleDialog)\n\t\t{\n\t\t\tthis.responsibleDialog.destroy();\n\t\t\tthis.responsibleDialog = null;\n\n\t\t\treturn;\n\t\t}\n\n\t\tthis.responsibleDialog = new Dialog({\n\t\t\ttargetNode: this.responsible.getNode(),\n\t\t\tenableSearch: true,\n\t\t\tcontext: 'TASKS',\n\t\t\tevents: {\n\t\t\t\t'Item:onSelect': (event) => {\n\t\t\t\t\tthis.responsibleDialog.hide();\n\t\t\t\t\tconst selectedItem = event.getData().item;\n\t\t\t\t\tthis.setResponsible({\n\t\t\t\t\t\tid: selectedItem.getId(),\n\t\t\t\t\t\tname: selectedItem.getTitle(),\n\t\t\t\t\t\tphoto: {\n\t\t\t\t\t\t\tsrc: selectedItem.getAvatar()\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tthis.emit('changeTaskResponsible');\n\t\t\t\t},\n\t\t\t},\n\t\t\tentities: [\n\t\t\t\t{\n\t\t\t\t\tid: 'user',\n\t\t\t\t\toptions: {\n\t\t\t\t\t\tinviteEmployeeLink: false\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: 'department'\n\t\t\t\t}\n\t\t\t]\n\t\t});\n\n\t\tthis.responsibleDialog.show();\n\t}\n\n\tonSetStoryPoints(baseEvent: BaseEvent)\n\t{\n\t\tif (this.isDisabled())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.emit('updateItem', {\n\t\t\titemId: this.getId(),\n\t\t\tentityId: this.getEntityId(),\n\t\t\tstoryPoints: baseEvent.getData()\n\t\t});\n\n\t\tthis.setStoryPoints(baseEvent.getData());\n\t}\n\n\tonShowToggle()\n\t{\n\t\tDom.addClass(this.getNode(), '--open');\n\n\t\tthis.toggle.show();\n\n\t\tthis.emit('showSubTasks', this.getSubTasks());\n\t}\n\n\tonHideToggle()\n\t{\n\t\tthis.hideSubTasks();\n\t}\n\n\thasNode(parentNode: HTMLElement|Array<HTMLElement>, searchNode: HTMLElement, skipParent = false): boolean\n\t{\n\t\tif (Type.isArray(parentNode))\n\t\t{\n\t\t\tconst result = parentNode\n\t\t\t\t.map((node: HTMLElement) => this.hasNode(node, searchNode, skipParent))\n\t\t\t\t.find((result) => result === true)\n\t\t\t;\n\n\t\t\treturn !Type.isUndefined(result);\n\t\t}\n\n\t\tif (!skipParent && searchNode.isEqualNode(parentNode))\n\t\t{\n\t\t\treturn true;\n\t\t}\n\n\t\tconst nodes = parentNode.getElementsByTagName('*');\n\n\t\tfor (let k = 0; k < nodes.length; k++)\n\t\t{\n\t\t\tif (searchNode.isEqualNode(nodes[k]))\n\t\t\t{\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tactivateBlinking()\n\t{\n\t\tif (!this.getNode())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (typeof IntersectionObserver === `undefined`)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst observer = new IntersectionObserver((entries) =>\n\t\t\t{\n\t\t\t\tif (entries[0].isIntersecting === true)\n\t\t\t\t{\n\t\t\t\t\tthis.blink();\n\n\t\t\t\t\tobserver.disconnect();\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tthreshold: [0]\n\t\t\t}\n\t\t);\n\n\t\tobserver.observe(this.getNode());\n\t}\n\n\tblink()\n\t{\n\t\tif (!this.getNode())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tDom.addClass(this.getNode(), '--blink');\n\t\tsetTimeout(() => {\n\t\t\tDom.removeClass(this.getNode(), '--blink');\n\t\t}, 300);\n\t}\n}\n","import {Dom, Tag} from 'main.core';\n\nimport {Entity} from './entity';\nimport {Item} from '../item/item';\n\nexport class ListItems\n{\n\tconstructor(entity: Entity)\n\t{\n\t\tthis.entity = entity;\n\n\t\tthis.node = null;\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tthis.node = Tag.render`\n\t\t\t<div class=\"tasks-scrum__content-items\" data-entity-id=\"${this.entity.getId()}\">\n\t\t\t\t${[...this.entity.getItems().values()].map((item: Item) => {\n\t\t\t\t\titem.setEntityType(this.entity.getEntityType());\n\t\t\t\t\treturn item.render();\n\t\t\t\t})}\n\t\t\t\t${this.renderLoader()}\n\t\t\t</div>\n\t\t`;\n\n\t\treturn this.node;\n\t}\n\n\trenderLoader(): ?HTMLElement\n\t{\n\t\treturn Tag.render`<div class=\"tasks-scrum-entity-items-loader\"></div>`;\n\t}\n\n\tgetNode(): ?HTMLElement\n\t{\n\t\treturn this.node;\n\t}\n\n\tgetListNode(): ?HTMLElement\n\t{\n\t\treturn this.node;\n\t}\n\n\tsetEntityId(entityId: number)\n\t{\n\t\tthis.node.dataset.entityId = parseInt(entityId, 10);\n\t}\n\n\taddScrollbar()\n\t{\n\t\tDom.addClass(this.getNode(), '--scrollbar');\n\t}\n\n\tremoveScrollbar()\n\t{\n\t\tDom.removeClass(this.getNode(), '--scrollbar');\n\t}\n}\n","import {Dialog} from 'ui.entity-selector';\nimport {Loc, Tag, Text} from 'main.core';\nimport {BaseEvent, EventEmitter} from 'main.core.events';\n\nimport {Input} from './input';\n\nimport type {EpicType} from '../item/task/epic';\n\nexport class TagSearcher extends EventEmitter\n{\n\tstatic tagRegExp = '#[^#@](?:[^#@]*[^\\s#@])?';\n\tstatic epicRegExp = '@[^#@](?:[^#@]*[^\\s#@])?';\n\n\tconstructor()\n\t{\n\t\tsuper();\n\n\t\tthis.setEventNamespace('BX.Tasks.Scrum.TagSearcher');\n\n\t\tthis.allTags = new Map();\n\t}\n\n\taddTagToSearcher(tagName)\n\t{\n\t\ttagName = tagName.trim();\n\n\t\ttagName = tagName === '' ? Text.getRandom() : tagName;\n\n\t\tthis.allTags.set('tag_' + tagName, {\n\t\t\tid: tagName,\n\t\t\tentityId: 'tag',\n\t\t\ttabs: 'recents',\n\t\t\ttitle: tagName,\n\t\t\tavatar: '/bitrix/components/bitrix/tasks.scrum/templates/.default/images/search-hashtag.svg'\n\t\t});\n\t}\n\n\taddEpicToSearcher(epic: EpicType)\n\t{\n\t\tconst epicName = epic.name.trim();\n\n\t\tthis.allTags.set('epic_' + epicName, {\n\t\t\tid: epic.id,\n\t\t\tentityId: 'epic',\n\t\t\ttabs: 'recents',\n\t\t\ttitle: epicName,\n\t\t\tavatar: '/bitrix/components/bitrix/tasks.scrum/templates/.default/images/search-hashtag-green.svg',\n\t\t\tname: epicName,\n\t\t\tdescription: epic.description,\n\t\t\tcolor: epic.color,\n\t\t\tgroupId: epic.groupId,\n\t\t\tcreatedBy: epic.createdBy,\n\t\t\tmodifiedBy: epic.modifiedBy\n\t\t});\n\t}\n\n\tgetTagFromSearcher(name: String): Object\n\t{\n\t\treturn this.allTags.get(name);\n\t}\n\n\tremoveEpicFromSearcher(epic: EpicType)\n\t{\n\t\tthis.allTags.delete('epic_' + epic.name);\n\t}\n\n\tgetAllList(): Array\n\t{\n\t\treturn [...this.allTags.values()];\n\t}\n\n\tgetTagsList(): Array\n\t{\n\t\tconst tagsList = [];\n\t\t[...this.allTags.values()].forEach((tag) => {\n\t\t\tif (tag.entityId === 'tag')\n\t\t\t{\n\t\t\t\ttagsList.push(tag);\n\t\t\t}\n\t\t});\n\t\treturn tagsList;\n\t}\n\n\tgetEpicList(): Array\n\t{\n\t\tconst epicList = [];\n\n\t\t[...this.allTags.values()].forEach((epic) => {\n\t\t\tif (epic.entityId === 'epic')\n\t\t\t{\n\t\t\t\tepicList.push(epic);\n\t\t\t}\n\t\t});\n\n\t\treturn epicList;\n\t}\n\n\tgetEpicByName(epicName: string): ?EpicType\n\t{\n\t\tlet epic = null;\n\n\t\t[...this.allTags.values()].forEach((tag) => {\n\t\t\tif (tag.entityId === 'epic' && tag.name === epicName)\n\t\t\t{\n\t\t\t\tepic = tag;\n\t\t\t}\n\t\t});\n\n\t\treturn epic;\n\t}\n\n\tgetEpicById(epicId: number): ?EpicType\n\t{\n\t\treturn [...this.allTags.values()]\n\t\t\t.find((epic) => (epic.entityId === 'epic' && epic.id === epicId))\n\t\t;\n\t}\n\n\tshowTagsDialog(item: Item, targetNode: HTMLElement): Dialog\n\t{\n\t\tconst currentTags = item.getTags().getValue();\n\n\t\tconst selectedItems = [];\n\t\tcurrentTags.forEach((tag) => {\n\t\t\tconst currentTag = this.allTags.get(('tag_' + tag).trim());\n\t\t\tif (currentTag)\n\t\t\t{\n\t\t\t\tselectedItems.push(currentTag);\n\t\t\t}\n\t\t});\n\n\t\tlet choiceWasMade = false;\n\n\t\tthis.tagDialog = new Dialog({\n\t\t\tid: item.getId(),\n\t\t\ttargetNode: targetNode,\n\t\t\twidth: 400,\n\t\t\theight: 300,\n\t\t\tmultiple: true,\n\t\t\tdropdownMode: true,\n\t\t\tenableSearch: true,\n\t\t\tsearchOptions: {\n\t\t\t\tallowCreateItem: true,\n\t\t\t\tfooterOptions: {\n\t\t\t\t\tlabel: Loc.getMessage('TASKS_SCRUM_SEARCHER_ACTIONS_TAG_ADD')\n\t\t\t\t}\n\t\t\t},\n\t\t\toffsetTop: 12,\n\t\t\tselectedItems: selectedItems,\n\t\t\titems: this.getTagsList(),\n\t\t\tevents: {\n\t\t\t\t'Search:onItemCreateAsync': (event) => {\n\t\t\t\t\treturn new Promise((resolve) => {\n\n\t\t\t\t\t\tconst { searchQuery } = event.getData();\n\t\t\t\t\t\tconst dialog = event.getTarget();\n\n\t\t\t\t\t\tconst tagName = searchQuery.getQuery();\n\t\t\t\t\t\tif (!tagName)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tdialog.focusSearch();\n\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.addTagToSearcher(tagName);\n\t\t\t\t\t\tconst newTag = this.getTagFromSearcher('tag_' + tagName);\n\t\t\t\t\t\tconst item = dialog.addItem(newTag);\n\t\t\t\t\t\titem.select();\n\t\t\t\t\t\tdialog.getTagSelector().clearTextBox();\n\t\t\t\t\t\tdialog.focusSearch();\n\t\t\t\t\t\tdialog.selectFirstTab();\n\t\t\t\t\t\tconst label = dialog.getContainer().querySelector('.ui-selector-footer-conjunction');\n\t\t\t\t\t\tlabel.textContent = '';\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\t'Item:onSelect': (event) => {\n\t\t\t\t\tchoiceWasMade = true;\n\t\t\t\t\tconst selectedItem = event.getData().item;\n\t\t\t\t\tconst tag = selectedItem.getTitle();\n\t\t\t\t\tthis.emit('attachTagToTask', tag);\n\t\t\t\t},\n\t\t\t\t'Item:onDeselect': (event) => {\n\t\t\t\t\tchoiceWasMade = true;\n\t\t\t\t\tconst deselectedItem = event.getData().item;\n\t\t\t\t\tconst tag = deselectedItem.getTitle();\n\t\t\t\t\tthis.emit('deAttachTagToTask', tag);\n\t\t\t\t},\n\t\t\t},\n\t\t\ttagSelectorOptions: {\n\t\t\t\tevents: {\n\t\t\t\t\tonInput: (event) => {\n\t\t\t\t\t\tconst selector = event.getData().selector;\n\t\t\t\t\t\tif (selector)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconst dialog = selector.getDialog();\n\t\t\t\t\t\t\tconst label = dialog.getContainer().querySelector('.ui-selector-footer-conjunction');\n\t\t\t\t\t\t\tlabel.textContent = Text.encode(selector.getTextBoxValue());\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tthis.tagDialog.subscribe('onHide', () => {\n\t\t\tif (choiceWasMade)\n\t\t\t{\n\t\t\t\tthis.emit('hideTagDialog');\n\t\t\t}\n\t\t});\n\n\t\tthis.tagDialog.show();\n\t}\n\n\tshowEpicDialog(item: Item, targetNode: HTMLElement): Dialog\n\t{\n\t\tconst currentEpic = item.getEpic().getValue();\n\n\t\tconst selectedItems = [];\n\t\tif (currentEpic)\n\t\t{\n\t\t\tconst currentEpicInfo = this.allTags.get(('epic_' + currentEpic.name).trim());\n\t\t\tif (currentEpicInfo)\n\t\t\t{\n\t\t\t\tselectedItems.push(currentEpicInfo);\n\t\t\t}\n\t\t}\n\n\t\tlet choiceWasMade = false;\n\n\t\tthis.epicDialog = new Dialog({\n\t\t\tid: item.getId(),\n\t\t\ttargetNode: targetNode,\n\t\t\twidth: 400,\n\t\t\theight: 300,\n\t\t\tmultiple: false,\n\t\t\tdropdownMode: true,\n\t\t\tenableSearch: true,\n\t\t\toffsetTop: 12,\n\t\t\tselectedItems: selectedItems,\n\t\t\titems: this.getEpicList(),\n\t\t\tevents: {\n\t\t\t\t'Item:onSelect': (event) => {\n\t\t\t\t\tchoiceWasMade = true;\n\t\t\t\t\tconst selectedItem = event.getData().item;\n\t\t\t\t\tconst epicId = selectedItem.getId();\n\t\t\t\t\tthis.emit('updateItemEpic', epicId);\n\t\t\t\t},\n\t\t\t\t'Item:onDeselect': (event) => {\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tchoiceWasMade = true;\n\t\t\t\t\t\tif (this.epicDialog.getSelectedItems().length === 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.emit('updateItemEpic', 0);\n\t\t\t\t\t\t\tthis.epicDialog.hide();\n\t\t\t\t\t\t}\n\t\t\t\t\t}, 50);\n\t\t\t\t},\n\t\t\t},\n\t\t\ttagSelectorOptions: {\n\t\t\t\tplaceholder: Loc.getMessage('TASKS_SCRUM_ITEM_EPIC_SEARCHER_PLACEHOLDER')\n\t\t\t}\n\t\t});\n\n\t\tthis.epicDialog.subscribe('onHide', () => {\n\t\t\tif (choiceWasMade)\n\t\t\t{\n\t\t\t\tthis.emit('hideEpicDialog');\n\t\t\t}\n\t\t});\n\n\t\tthis.epicDialog.show();\n\t}\n\n\tisEpicDialogShown(): boolean\n\t{\n\t\treturn this.epicDialog && this.epicDialog.isOpen();\n\t}\n\n\thasActionPanelDialog(): boolean\n\t{\n\t\treturn (this.epicDialog || this.tagDialog)\n\t}\n\n\tshowTagsSearchDialog(inputObject: Input, enteredHashTagName: string): Dialog\n\t{\n\t\tconst input = inputObject.getInputNode();\n\n\t\tif (this.tagSearchDialog && this.tagSearchDialog.getId() !== inputObject.getNodeId())\n\t\t{\n\t\t\tthis.tagSearchDialog = null;\n\t\t}\n\n\t\tif (!this.tagSearchDialog)\n\t\t{\n\t\t\tthis.tagSearchDialog = new Dialog({\n\t\t\t\tid: inputObject.getNodeId(),\n\t\t\t\ttargetNode: inputObject.getNode(),\n\t\t\t\twidth: inputObject.getNode().offsetWidth,\n\t\t\t\theight: 210,\n\t\t\t\tmultiple: false,\n\t\t\t\tdropdownMode: true,\n\t\t\t\titems: this.getTagsList(),\n\t\t\t\tsearchOptions: {\n\t\t\t\t\tallowCreateItem: true,\n\t\t\t\t\tfooterOptions: {\n\t\t\t\t\t\tlabel: Loc.getMessage('TASKS_SCRUM_SEARCHER_ACTIONS_TAG_ADD')\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tevents: {\n\t\t\t\t\t'Search:onItemCreateAsync': (event) => {\n\t\t\t\t\t\treturn new Promise((resolve) => {\n\t\t\t\t\t\t\tconst dialog = event.getTarget();\n\t\t\t\t\t\t\tdialog.hide();\n\t\t\t\t\t\t\tinput.focus();\n\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\t'Item:onSelect': (event) => {\n\t\t\t\t\t\tconst selectedItem = event.getData().item;\n\t\t\t\t\t\tconst selectedHashTag = '#' + selectedItem.getTitle();\n\t\t\t\t\t\tconst hashTags = TagSearcher.getHashTagNamesFromText(input.value);\n\t\t\t\t\t\tconst enteredHashTag = (hashTags.length > 0 ? hashTags.pop() : '');\n\t\t\t\t\t\tinput.value = input.value.replace(\n\t\t\t\t\t\t\tnew RegExp('#' + enteredHashTag, 'g'),\n\t\t\t\t\t\t\tselectedHashTag\n\t\t\t\t\t\t);\n\t\t\t\t\t\tinput.focus();\n\t\t\t\t\t\tselectedItem.deselect();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.tagSearchDialog.subscribe('onHide', () => {\n\t\t\t\tinputObject.setTagsSearchMode(false);\n\t\t\t});\n\t\t}\n\n\t\tinputObject.setTagsSearchMode(true);\n\n\t\tinputObject.subscribeOnce('onMetaEnter', () => {\n\t\t\tthis.tagSearchDialog.hide();\n\t\t\tinput.focus();\n\t\t});\n\n\t\tthis.tagSearchDialog.show();\n\n\t\tthis.tagSearchDialog.search(enteredHashTagName);\n\t}\n\n\tcloseTagsSearchDialog()\n\t{\n\t\tif (this.tagSearchDialog)\n\t\t{\n\t\t\tthis.tagSearchDialog.hide();\n\t\t}\n\t}\n\n\tshowEpicSearchDialog(inputObject: Input, enteredHashEpicName: string): Dialog\n\t{\n\t\tconst input = inputObject.getInputNode();\n\n\t\tif (this.epicSearchDialog && this.epicSearchDialog.getId() !== inputObject.getNodeId())\n\t\t{\n\t\t\tthis.epicSearchDialog = null;\n\t\t}\n\n\t\tif (!this.epicSearchDialog)\n\t\t{\n\t\t\tthis.epicSearchDialog = new Dialog({\n\t\t\t\tid: inputObject.getNodeId(),\n\t\t\t\ttargetNode: inputObject.getNode(),\n\t\t\t\twidth: inputObject.getNode().offsetWidth,\n\t\t\t\theight: 210,\n\t\t\t\tmultiple: false,\n\t\t\t\tdropdownMode: true,\n\t\t\t\titems: this.getEpicList(),\n\t\t\t\tevents: {\n\t\t\t\t\t'Item:onSelect': (event: BaseEvent) => {\n\t\t\t\t\t\tconst selectedItem = event.getData().item;\n\t\t\t\t\t\tconst selectedHashEpic = '@' + selectedItem.getTitle();\n\t\t\t\t\t\tinput.value = input.value.replace(\n\t\t\t\t\t\t\tenteredHashEpicName === '' ? '@' : new RegExp(TagSearcher.epicRegExp,'g'),\n\t\t\t\t\t\t\t''\n\t\t\t\t\t\t);\n\t\t\t\t\t\tinput.value = input.value + ' ' + selectedHashEpic\n\t\t\t\t\t\tinput.focus();\n\t\t\t\t\t\tselectedItem.deselect();\n\t\t\t\t\t\tinputObject.setEpic(this.getEpicByName(selectedItem.getTitle()));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.epicSearchDialog.subscribe('onHide', () => {\n\t\t\t\tinputObject.setEpicSearchMode(false);\n\t\t\t});\n\t\t}\n\n\t\tinputObject.setEpicSearchMode(true);\n\n\t\tinputObject.subscribeOnce('onEnter', () => {\n\t\t\tthis.epicSearchDialog.hide();\n\t\t\tinput.value = input.value.replace(new RegExp(TagSearcher.epicRegExp,'g'), '');\n\t\t\tinput.focus();\n\t\t});\n\n\t\tthis.epicSearchDialog.show();\n\t\tthis.epicSearchDialog.search(enteredHashEpicName);\n\t}\n\n\tcloseEpicSearchDialog()\n\t{\n\t\tif (this.epicSearchDialog)\n\t\t{\n\t\t\tthis.epicSearchDialog.hide();\n\t\t}\n\t}\n\n\tstatic getHashTagNamesFromText(inputText: string): Array\n\t{\n\t\tconst regex = new RegExp(TagSearcher.tagRegExp, 'g');\n\n\t\tconst matches = [];\n\t\tlet match;\n\t\twhile (match = regex.exec(inputText))\n\t\t{\n\t\t\tmatches.push(match[0].substring(1));\n\t\t}\n\n\t\treturn matches;\n\t}\n\n\tstatic getHashEpicNamesFromText(inputText: string): Array\n\t{\n\t\tconst regex = new RegExp(TagSearcher.epicRegExp, 'g');\n\t\tconst matches = [];\n\t\tlet match;\n\t\twhile (match = regex.exec(inputText))\n\t\t{\n\t\t\tmatches.push(match[0].substring(1));\n\t\t}\n\n\t\treturn matches;\n\t}\n}\n","import {Browser, Dom, Event, Loc, Tag, Text, Type} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\n\nimport {Entity} from '../entity/entity';\n\nimport {TagSearcher} from './tag.searcher';\n\nimport '../css/input.css';\n\nimport type {EpicType} from '../item/task/epic';\n\nexport class Input extends EventEmitter\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\n\t\tthis.setEventNamespace('BX.Tasks.Scrum.Input');\n\n\t\tthis.entity = null;\n\t\tthis.bindNode = null;\n\n\t\tthis.node = null;\n\n\t\tthis.value = '';\n\t\tthis.epic = null;\n\t\tthis.taskCreated = false;\n\t}\n\n\tsetEntity(entity: Entity)\n\t{\n\t\tthis.entity = entity;\n\t}\n\n\tgetEntity(): ?Entity\n\t{\n\t\treturn this.entity;\n\t}\n\n\tsetBindNode(node: HTMLElement)\n\t{\n\t\tthis.bindNode = node;\n\t}\n\n\tgetBindNode(): ?HTMLElement\n\t{\n\t\treturn this.bindNode;\n\t}\n\n\tcleanBindNode()\n\t{\n\t\tthis.bindNode = null;\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tthis.nodeId = Text.getRandom();\n\n\t\tthis.node = Tag.render`\n\t\t\t<div id=\"${Text.encode(this.nodeId)}\" class=\"tasks-scrum__item --add-block\">\n\t\t\t\t<textarea\n\t\t\t\t\tplaceholder=\"${Loc.getMessage('TASKS_SCRUM_TASK_ADD_INPUT_TASK_PLACEHOLDER')}\"\n\t\t\t\t\tclass=\"tasks-scrum__item--textarea\"\n\t\t\t\t>${Text.encode(this.value)}</textarea>\n\t\t\t\t<div class=\"tasks-scrum__item--textarea-help\">\n\t\t\t\t\t${Loc.getMessage('TASKS_SCRUM_TASK_ADD_INPUT_TASK_PLACEHOLDER_HELPER')}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\tEvent.bind(this.getInputNode(), 'input', (event) => {\n\t\t\tthis.onTagSearch(event);\n\t\t\tthis.onEpicSearch(event);\n\t\t});\n\t\tEvent.bind(this.getInputNode(), 'keydown', this.onKeydown.bind(this));\n\t\tEvent.bind(this.getInputNode(), 'blur', this.onBlur.bind(this));\n\n\t\tthis.emit('render');\n\n\t\tthis.taskCreated = false;\n\n\t\treturn this.node;\n\t}\n\n\tonKeydown(event: KeyboardEvent)\n\t{\n\t\tif (event.isComposing || event.key === 'Escape' || event.key === 'Enter')\n\t\t{\n\t\t\tif (!this.isTagsSearchMode() && !this.isEpicSearchMode())\n\t\t\t{\n\t\t\t\tthis.getInputNode().blur();\n\n\t\t\t\tevent.stopImmediatePropagation();\n\t\t\t}\n\n\t\t\tif (event.key === 'Enter')\n\t\t\t{\n\t\t\t\tthis.emit('onEnter', { event });\n\n\t\t\t\tif ((Browser.isMac() && event.metaKey) || event.ctrlKey)\n\t\t\t\t{\n\t\t\t\t\tthis.emit('onMetaEnter', { event });\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tonBlur()\n\t{\n\t\tif (this.isTagsSearchMode() || this.isEpicSearchMode())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.disable();\n\n\t\tconst input = this.getInputNode();\n\n\t\tif (input.value === '')\n\t\t{\n\t\t\tthis.removeYourself();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.createTaskItem();\n\t\t}\n\t}\n\n\tonTagSearch(event)\n\t{\n\t\tconst inputNode = event.target;\n\t\tconst enteredHashTags = TagSearcher.getHashTagNamesFromText(inputNode.value);\n\n\t\tif (event.data === '#')\n\t\t{\n\t\t\tthis.setEpicSearchMode(false);\n\t\t\tthis.setTagsSearchMode(true);\n\t\t}\n\t\tif (this.isTagsSearchMode())\n\t\t{\n\t\t\tconst enteredHashTagName = enteredHashTags.pop();\n\n\t\t\tthis.emit('tagsSearchOpen', Type.isUndefined(enteredHashTagName) ? '' : enteredHashTagName);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.emit('tagsSearchClose');\n\t\t}\n\t}\n\n\tonEpicSearch(event)\n\t{\n\t\tconst inputNode = event.target;\n\t\tconst enteredHashEpics = TagSearcher.getHashEpicNamesFromText(inputNode.value);\n\t\tif (event.data === '@')\n\t\t{\n\t\t\tthis.setTagsSearchMode(false);\n\t\t\tthis.setEpicSearchMode(true);\n\t\t}\n\t\tif (this.isEpicSearchMode())\n\t\t{\n\t\t\tconst enteredHashTagName = enteredHashEpics.pop();\n\t\t\tthis.emit('epicSearchOpen', Type.isUndefined(enteredHashTagName) ? '' : enteredHashTagName);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.emit('epicSearchClose');\n\t\t}\n\t}\n\n\tfocus()\n\t{\n\t\tconst input = this.getInputNode();\n\n\t\tconst length = input.value.length;\n\n\t\tinput.focus();\n\t\tinput.setSelectionRange(length, length);\n\t}\n\n\tdisable()\n\t{\n\t\tDom.addClass(this.node, '--disabled');\n\n\t\tthis.getInputNode().disabled = true;\n\t}\n\n\tunDisable()\n\t{\n\t\tDom.removeClass(this.node, '--disabled');\n\n\t\tthis.getInputNode().disabled = false;\n\t}\n\n\tisTaskCreated(): boolean\n\t{\n\t\treturn this.taskCreated;\n\t}\n\n\tsetEpic(epic: ?EpicType)\n\t{\n\t\tthis.epic = epic;\n\t}\n\n\tgetNode(): HTMLElement\n\t{\n\t\treturn this.node;\n\t}\n\n\tgetNodeId(): String\n\t{\n\t\treturn this.nodeId;\n\t}\n\n\tgetInputNode(): HTMLTextAreaElement\n\t{\n\t\treturn this.node.querySelector('textarea');\n\t}\n\n\tgetEpic(): ?EpicType\n\t{\n\t\treturn this.epic;\n\t}\n\n\tremoveYourself()\n\t{\n\t\tDom.remove(this.node);\n\n\t\tthis.emit('remove');\n\t}\n\n\tsetTagsSearchMode(value: boolean)\n\t{\n\t\tDom.attr(this.getInputNode(), 'data-tag-disabled', value);\n\t}\n\n\tisTagsSearchMode(): boolean\n\t{\n\t\treturn Dom.attr(this.getInputNode(), 'data-tag-disabled');\n\t}\n\n\tsetEpicSearchMode(value: boolean)\n\t{\n\t\tDom.attr(this.getInputNode(), 'data-epic-disabled', value);\n\t}\n\n\tisEpicSearchMode(): boolean\n\t{\n\t\treturn Dom.attr(this.getInputNode(), 'data-epic-disabled');\n\t}\n\n\tcreateTaskItem()\n\t{\n\t\tif (!this.isTagsSearchMode() && !this.isEpicSearchMode())\n\t\t{\n\t\t\tconst input = this.getInputNode();\n\n\t\t\tif (input.value)\n\t\t\t{\n\t\t\t\tthis.emit('createTaskItem', input.value);\n\n\t\t\t\tthis.taskCreated = true;\n\n\t\t\t\tinput.value = '';\n\t\t\t}\n\t\t}\n\t}\n}\n","import {Dom, Type} from 'main.core';\nimport {BaseEvent, EventEmitter} from 'main.core.events';\nimport {Loader} from 'main.loader';\n\nimport {Item} from '../item/item';\nimport {ListItems} from './list.items';\n\nimport {Input} from '../utility/input';\nimport {StoryPointsStorage} from '../utility/story.points.storage';\n\nimport type {Views} from '../view/view';\n\ntype EntityParams = {\n\tid: number,\n\tviews?: Views,\n\tnumberTasks?: number,\n\tisExactSearchApplied: 'Y' | 'N',\n\tstoryPoints?: string,\n\tpageSize: number,\n\tpageNumberItems: number,\n\tisShortView: 'Y' | 'N'\n};\n\nexport class Entity extends EventEmitter\n{\n\tconstructor(params: EntityParams)\n\t{\n\t\tsuper(params);\n\n\t\tthis.setEventNamespace('BX.Tasks.Scrum.Entity');\n\n\t\tthis.storyPoints = new StoryPointsStorage();\n\n\t\tthis.items = new Map();\n\n\t\tthis.groupMode = false;\n\t\tthis.groupModeItems = new Map();\n\n\t\tthis.setEntityParams(params);\n\n\t\tthis.node = null;\n\t\tthis.listItems = null;\n\n\t\tthis.itemsLoaderNode = null;\n\n\t\tthis.blank = null;\n\t\tthis.dropzone = null;\n\t}\n\n\tsetEntityParams(params: EntityParams)\n\t{\n\t\tthis.setId(params.id);\n\t\tthis.setViews(params.views);\n\t\tthis.setNumberTasks(params.numberTasks);\n\t\tthis.setStoryPoints(params.storyPoints);\n\t\tthis.setShortView(params.isShortView);\n\n\t\tthis.exactSearchApplied = (params.isExactSearchApplied === 'Y');\n\n\t\tthis.pageSize = parseInt(params.pageSize, 10);\n\t\tthis.pageNumberItems = (Type.isInteger(params.pageNumberItems) ? parseInt(params.pageNumberItems, 10) : 1);\n\t}\n\n\tsetListItems(entity: Entity)\n\t{\n\t\tthis.listItems = new ListItems(entity);\n\t}\n\n\tgetListItems(): ListItems|null\n\t{\n\t\treturn this.listItems;\n\t}\n\n\tsetShortView(value: string)\n\t{\n\t\tthis.shortView = (value === 'Y' ? 'Y' : 'N');\n\n\t\tthis.getItems()\n\t\t\t.forEach((item: Item) => {\n\t\t\t\tif (item.isParentTask() && item.isShownSubTasks())\n\t\t\t\t{\n\t\t\t\t\titem.hideSubTasks();\n\t\t\t\t}\n\t\t\t\titem.setShortView(this.shortView);\n\t\t\t})\n\t\t;\n\t}\n\n\tgetShortView(): 'Y' | 'N'\n\t{\n\t\treturn this.shortView;\n\t}\n\n\tisShortView(): boolean\n\t{\n\t\treturn this.shortView === 'Y';\n\t}\n\n\tgetNode(): ?HTMLElement\n\t{\n\t\treturn this.node;\n\t}\n\n\tsetId(id: number)\n\t{\n\t\tthis.id = (Type.isInteger(id) ? parseInt(id, 10) : 0);\n\n\t\tif (this.listItems)\n\t\t{\n\t\t\tthis.listItems.setEntityId(this.id);\n\t\t}\n\t}\n\n\tgetId(): number\n\t{\n\t\treturn this.id;\n\t}\n\n\tsetViews(views)\n\t{\n\t\tthis.views = (Type.isPlainObject(views) ? views : {});\n\t}\n\n\tgetViews()\n\t{\n\t\treturn this.views;\n\t}\n\n\tgetEntityType()\n\t{\n\t\treturn 'entity';\n\t}\n\n\tisBacklog(): boolean\n\t{\n\t\treturn this.getEntityType() === 'backlog';\n\t}\n\n\tisActive(): boolean\n\t{\n\t\treturn false;\n\t}\n\n\tisCompleted(): boolean\n\t{\n\t\treturn false;\n\t}\n\n\tgetListItemsNode(): ?HTMLElement\n\t{\n\t\treturn (this.listItems ? this.listItems.getListNode() : null);\n\t}\n\n\tisEmpty(): boolean\n\t{\n\t\treturn (this.items.size === 0);\n\t}\n\n\tgetNumberItems(): number\n\t{\n\t\treturn this.items.size;\n\t}\n\n\tgetItems(): Map\n\t{\n\t\treturn this.items;\n\t}\n\n\thasItem(item: Item): boolean\n\t{\n\t\treturn this.items.has(item.getId());\n\t}\n\n\tgetPageSize(): number\n\t{\n\t\treturn this.pageSize;\n\t}\n\n\tgetPageNumberItems(): number\n\t{\n\t\treturn this.pageNumberItems;\n\t}\n\n\tincrementPageNumberItems()\n\t{\n\t\tthis.pageNumberItems++;\n\t}\n\n\trecalculateItemsSort()\n\t{\n\t\tconst listItemsNode = this.getListItemsNode();\n\t\tif (!listItemsNode)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tlet sort = 1;\n\t\tlistItemsNode.querySelectorAll('.tasks-scrum-item').forEach((node: HTMLElement) => {\n\t\t\tconst item = this.getItems().get(parseInt(node.dataset.id, 10));\n\t\t\tif (item)\n\t\t\t{\n\t\t\t\titem.setSort(sort);\n\t\t\t\tsort++;\n\t\t\t}\n\t\t});\n\t}\n\n\tsetItem(newItem: Item)\n\t{\n\t\tthis.items.set(newItem.getId(), newItem);\n\n\t\tthis.subscribeToItem(newItem);\n\n\t\t[...this.items.values()].map((item) => {\n\t\t\tthis.setItemMoveActivity(item);\n\t\t});\n\n\t\tnewItem.setEntityType(this.getEntityType());\n\t\tnewItem.setShortView(this.getShortView());\n\n\t\tthis.hideBlank();\n\t\tthis.hideDropzone();\n\n\t\tthis.adjustListItemsWidth();\n\t}\n\n\tsetItemMoveActivity(item: Item)\n\t{\n\t\titem.setMoveActivity(this.items.size > 2);\n\t}\n\n\tremoveItem(item: Item)\n\t{\n\t\tif (this.items.has(item.getId()))\n\t\t{\n\t\t\tthis.items.delete(item.getId());\n\n\t\t\titem.unsubscribeAll();\n\n\t\t\t[...this.items.values()].map((item) => {\n\t\t\t\tthis.setItemMoveActivity(item);\n\t\t\t});\n\n\t\t\tif (item.isParentTask())\n\t\t\t{\n\t\t\t\titem.getSubTasks().getList().forEach((item: Item) => {\n\t\t\t\t\tthis.removeItem(item);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis.pageNumberItems = 1;\n\n\t\t\tthis.adjustListItemsWidth();\n\t\t}\n\t}\n\n\tappendItemToList(item: Item)\n\t{\n\t\tDom.insertBefore(item.render(), this.getListItemsNode().lastElementChild);\n\n\t\tthis.adjustListItemsWidth();\n\t}\n\n\tisNodeCreated(): boolean\n\t{\n\t\treturn (this.node !== null);\n\t}\n\n\tsetNumberTasks(numberTasks: number)\n\t{\n\t\tthis.numberTasks = (Type.isInteger(numberTasks) ? parseInt(numberTasks, 10) : 0);\n\t}\n\n\tgetNumberTasks(): number\n\t{\n\t\treturn (this.numberTasks ? this.numberTasks : this.getItems().size);\n\t}\n\n\tsetExactSearchApplied(value: boolean)\n\t{\n\t\tthis.exactSearchApplied = Boolean(value);\n\t}\n\n\tisExactSearchApplied(): boolean\n\t{\n\t\treturn this.exactSearchApplied;\n\t}\n\n\tonAfterAppend()\n\t{\n\t\t[...this.items.values()].map((item) => {\n\t\t\tthis.subscribeToItem(item);\n\t\t\tthis.setItemMoveActivity(item);\n\t\t});\n\n\t\tthis.setStats();\n\n\t\tif (!this.isCompleted())\n\t\t{\n\t\t\tthis.itemsLoaderNode = this.getNode().querySelector('.tasks-scrum-entity-items-loader');\n\t\t\tthis.bindItemsLoader(this.itemsLoaderNode);\n\t\t}\n\n\t\tthis.adjustListItemsWidth();\n\t}\n\n\tsubscribeToItem(item: Item)\n\t{\n\t\tif (!this.getListItemsNode())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\titem.setEntityType(this.getEntityType());\n\n\t\titem.subscribe('updateItem', (baseEvent: BaseEvent) => {\n\t\t\tthis.emit('updateItem', baseEvent.getData());\n\t\t});\n\n\t\titem.subscribe('showTask', (baseEvent: BaseEvent) => this.emit('showTask', baseEvent.getTarget()));\n\n\t\titem.subscribe('changeTaskResponsible', (baseEvent: BaseEvent) => {\n\t\t\tconst item = baseEvent.getTarget();\n\t\t\tthis.emit('changeTaskResponsible', item);\n\t\t});\n\n\t\titem.subscribe('filterByEpic', (baseEvent: BaseEvent) => {\n\t\t\tthis.emit('filterByEpic', baseEvent.getData());\n\t\t});\n\n\t\titem.subscribe('filterByTag', (baseEvent: BaseEvent) => {\n\t\t\tthis.emit('filterByTag', baseEvent.getData());\n\t\t});\n\n\t\titem.subscribe('toggleActionPanel', (baseEvent: BaseEvent) => {\n\t\t\tthis.emit('toggleActionPanel', baseEvent.getTarget());\n\t\t});\n\n\t\titem.subscribe('showLinked', (baseEvent: BaseEvent) => {\n\t\t\tthis.emit('showLinked', baseEvent.getTarget());\n\t\t});\n\t}\n\n\tgetItemByItemId(itemId: number|string): Item|undefined\n\t{\n\t\treturn this.items.get((Type.isInteger(itemId) ? parseInt(itemId, 10) : itemId));\n\t}\n\n\tgetItemBySourceId(sourceId: number): Item|undefined\n\t{\n\t\treturn [...this.items.values()].find((item: Item) => item.getSourceId() === sourceId);\n\t}\n\n\tgetItemsByParentTaskId(parentTaskId: number): Map<number, Item>\n\t{\n\t\tconst items = new Map();\n\n\t\t[...this.items.values()].map((item: Item) => {\n\t\t\tif (item.getParentTaskId() === parentTaskId)\n\t\t\t{\n\t\t\t\titems.set(item.getId(), item);\n\t\t\t}\n\t\t});\n\n\t\treturn items;\n\t}\n\n\tsetStoryPoints(storyPoints: string)\n\t{\n\t\tthis.storyPoints.setPoints(storyPoints);\n\n\t\tthis.setStats();\n\t}\n\n\tgetStoryPoints(): StoryPointsStorage\n\t{\n\t\treturn this.storyPoints;\n\t}\n\n\tisFirstItem(item: Item): boolean\n\t{\n\t\tconst listItemsNode = this.getListItemsNode();\n\t\tconst itemNode = item.getNode();\n\t\tconst firstElementChild = listItemsNode.firstElementChild;\n\n\t\treturn firstElementChild.isEqualNode(itemNode);\n\t}\n\n\tisLastItem(item: Item): boolean\n\t{\n\t\tconst listItemsNode = this.getListItemsNode();\n\t\tconst itemNode = item.getNode();\n\n\t\treturn listItemsNode.lastElementChild.isEqualNode(itemNode);\n\t}\n\n\tgetFirstItemNode(input?: Input): ?HTMLElement\n\t{\n\t\tconst listItemsNode = this.getListItemsNode();\n\n\t\tconst fistNode = listItemsNode.firstElementChild;\n\n\t\tif (input && fistNode.isEqualNode(input.getNode()))\n\t\t{\n\t\t\treturn fistNode.nextElementSibling;\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn fistNode;\n\t\t}\n\t}\n\n\tgetLoaderNode(): ?HTMLElement\n\t{\n\t\treturn this.itemsLoaderNode ? this.itemsLoaderNode : null;\n\t}\n\n\tfadeOut()\n\t{\n\t\tDom.addClass(this.getListItemsNode(), 'tasks-scrum__entity-items-faded');\n\t}\n\n\tfadeIn()\n\t{\n\t\tDom.removeClass(this.getListItemsNode(), 'tasks-scrum__entity-items-faded');\n\t}\n\n\tactivateGroupMode()\n\t{\n\t\tthis.groupMode = true;\n\n\t\tthis.getItems().forEach((item: Item) => {\n\t\t\titem.activateGroupMode();\n\t\t});\n\t}\n\n\tdeactivateGroupMode()\n\t{\n\t\tthis.groupMode = false;\n\n\t\tthis.getItems().forEach((item: Item) => {\n\t\t\titem.deactivateGroupMode();\n\t\t});\n\n\t\tthis.groupModeItems.forEach((item: Item) => {\n\t\t\titem.removeItemFromGroupMode();\n\t\t});\n\t\tthis.groupModeItems.clear();\n\n\t}\n\n\tisGroupMode(): boolean\n\t{\n\t\treturn this.groupMode;\n\t}\n\n\taddItemToGroupMode(item: Item)\n\t{\n\t\tthis.groupModeItems.set(item.getId(), item);\n\n\t\titem.addItemToGroupMode();\n\t}\n\n\tremoveItemFromGroupMode(item: Item)\n\t{\n\t\tthis.groupModeItems.delete(item.getId());\n\n\t\titem.removeItemFromGroupMode();\n\t}\n\n\thasItemInGroupMode(item: Item): boolean\n\t{\n\t\treturn this.groupModeItems.has(item.getId());\n\t}\n\n\tgetGroupModeItems(): Map\n\t{\n\t\treturn this.groupModeItems;\n\t}\n\n\tbindItemsLoader(loader?: HTMLElement)\n\t{\n\t\tif (!loader)\n\t\t{\n\t\t\tif (this.itemsLoaderNode)\n\t\t\t{\n\t\t\t\tloader = this.itemsLoaderNode;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tif (typeof IntersectionObserver === `undefined`)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst observer = new IntersectionObserver((entries) =>\n\t\t\t{\n\t\t\t\tif (entries[0].isIntersecting === true)\n\t\t\t\t{\n\t\t\t\t\tif (!this.isActiveLoadItems())\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.emit('loadItems');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tthreshold: [0]\n\t\t\t}\n\t\t);\n\n\t\tobserver.observe(loader);\n\t}\n\n\tsetActiveLoadItems(value: boolean)\n\t{\n\t\tthis.activeLoadItems = Boolean(value);\n\t}\n\n\tisActiveLoadItems(): boolean\n\t{\n\t\treturn this.activeLoadItems === true;\n\t}\n\n\tshowItemsLoader()\n\t{\n\t\tconst listPosition = Dom.getPosition(this.itemsLoaderNode);\n\n\t\tconst loader = new Loader({\n\t\t\ttarget: this.itemsLoaderNode,\n\t\t\tsize: 60,\n\t\t\tmode: 'inline',\n\t\t\toffset: {\n\t\t\t\ttop: '7px',\n\t\t\t\tleft: `${(listPosition.width / 2 - 30)}px`\n\t\t\t}\n\t\t});\n\n\t\tif (this.getNumberItems() >= this.pageSize)\n\t\t{\n\t\t\tloader.show();\n\t\t}\n\n\t\treturn loader;\n\t}\n\n\tsetStats() {}\n\n\tshowBlank()\n\t{\n\t\tif (this.blank)\n\t\t{\n\t\t\tDom.addClass(this.blank.getNode(), '--open');\n\t\t}\n\t}\n\n\thideBlank()\n\t{\n\t\tif (this.blank)\n\t\t{\n\t\t\tDom.removeClass(this.blank.getNode(), '--open');\n\t\t}\n\t}\n\n\tshowDropzone()\n\t{\n\t\tif (this.dropzone)\n\t\t{\n\t\t\tDom.addClass(this.dropzone.getNode(), '--open');\n\t\t}\n\t}\n\n\thideDropzone()\n\t{\n\t\tif (this.dropzone)\n\t\t{\n\t\t\tDom.removeClass(this.dropzone.getNode(), '--open');\n\t\t}\n\t}\n\n\tgetDropzone(): ?HTMLElement\n\t{\n\t\treturn this.dropzone ? this.dropzone.getNode() : null;\n\t}\n\n\tappendNodeAfterItem(newItemNode: HTMLElement, bindItemNode: HTMLElement)\n\t{\n\t\tif (bindItemNode.nextElementSibling)\n\t\t{\n\t\t\tDom.insertBefore(newItemNode, bindItemNode.nextElementSibling);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (this.getLoaderNode())\n\t\t\t{\n\t\t\t\tDom.append(newItemNode, this.getLoaderNode());\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tDom.append(newItemNode, this.getListItemsNode());\n\t\t\t}\n\t\t}\n\t}\n\n\tadjustListItemsWidth()\n\t{\n\t\tconst hasListItemsScroll = this.getListItemsNode().scrollHeight > this.getListItemsNode().clientHeight;\n\n\t\tif (hasListItemsScroll)\n\t\t{\n\t\t\tthis.getListItems().addScrollbar();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.getListItems().removeScrollbar();\n\t\t}\n\t}\n}\n","import {Event, Loc, Tag, Dom} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\n\nimport {Backlog} from './backlog';\n\nexport class Header extends EventEmitter\n{\n\tconstructor(backlog: Backlog)\n\t{\n\t\tsuper(backlog);\n\n\t\tthis.setEventNamespace('BX.Tasks.Scrum.BacklogHeader');\n\n\t\tthis.backlog = backlog;\n\n\t\tthis.node = null;\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tconst uiEpicClasses = 'ui-btn ui-btn-sm ui-btn-light-border ui-btn-themes ui-btn-round ui-btn-no-caps';\n\t\tconst uiTaskClasses = 'ui-btn ui-btn-sm ui-btn-success ui-btn-round ui-btn-no-caps ';\n\n\t\tthis.node = Tag.render`\n\t\t\t<div class=\"tasks-scrum__content-header\">\n\n\t\t\t\t<div class=\"tasks-scrum__name-container\">\n\t\t\t\t\t<div class=\"tasks-scrum__title\">\n\t\t\t\t\t\t${Loc.getMessage('TASKS_SCRUM_BACKLOG_TITLE')}\n\t\t\t\t\t</div>\n\t\t\t\t\t${this.renderTaskCounterLabel(this.backlog.getNumberTasks())}\n\t\t\t\t</div>\n\n\t\t\t\t<button class=\"tasks-scrum__backlog-btn ${uiEpicClasses} ui-btn-icon-add\">\n\t\t\t\t\t${Loc.getMessage('TASKS_SCRUM_BACKLOG_HEADER_EPIC')}\n\t\t\t\t</button>\n\t\t\t\t<button class=\"tasks-scrum__backlog-btn ${uiTaskClasses} ui-btn-icon-add\">\n\t\t\t\t\t${Loc.getMessage('TASKS_SCRUM_BACKLOG_HEADER_TASK')}\n\t\t\t\t</button>\n\n\t\t\t</div>\n\t\t`;\n\n\t\tconst buttons = this.node.querySelectorAll('button');\n\n\t\tEvent.bind(buttons.item(0), 'click', this.onEpicClick.bind(this, buttons.item(0)));\n\t\tEvent.bind(buttons.item(1), 'click', this.onTaskClick.bind(this));\n\n\t\t//todo use it from project scrum button\n\t\t//this.emit('openListEpicGrid');\n\t\t//this.emit('openDefinitionOfDone');\n\n\t\treturn this.node;\n\t}\n\n\tupdateTaskCounter(value: string)\n\t{\n\t\tDom.replace(\n\t\t\tthis.node.querySelector('.tasks-scrum__backlog-tasks'),\n\t\t\tthis.renderTaskCounterLabel(value)\n\t\t);\n\t}\n\n\trenderTaskCounterLabel(value: string)\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"tasks-scrum__backlog-tasks\">\n\t\t\t\t${Loc.getMessage('TASKS_SCRUM_BACKLOG_HEADER_TASK_COUNTER').replace('#value#', value)}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tonEpicClick(button: HTMLElement)\n\t{\n\t\tthis.emit('epicClick', button);\n\t}\n\n\tonTaskClick()\n\t{\n\t\tthis.emit('taskClick');\n\t}\n}\n","import {Dom, Tag, Loc} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\n\nimport {Entity} from './entity';\n\nexport class Blank extends EventEmitter\n{\n\tconstructor(entity: Entity)\n\t{\n\t\tsuper();\n\n\t\tthis.entity = entity;\n\n\t\tthis.node = null;\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tif (this.entity.isBacklog())\n\t\t{\n\t\t\treturn this.renderBacklog();\n\t\t}\n\t\telse if (this.entity.isCompleted())\n\t\t{\n\t\t\treturn this.renderCompletedSprint();\n\t\t}\n\t}\n\n\trenderBacklog(): HTMLElement\n\t{\n\t\tthis.node = Tag.render`\n\t\t\t<div class=\"tasks-scrum__backlog-empty\">\n\t\t\t\t<div class=\"tasks-scrum__backlog-empty--icon\"></div>\n\t\t\t\t<div class=\"tasks-scrum__backlog-empty--title\">\n\t\t\t\t\t${Loc.getMessage('TASKS_SCRUM_BACKLOG_BLANK_1')}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"tasks-scrum__backlog-empty--subtitle\">\n\t\t\t\t\t${Loc.getMessage('TASKS_SCRUM_BACKLOG_BLANK_2')}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"tasks-scrum__backlog-empty--text\">\n\t\t\t\t\t${Loc.getMessage('TASKS_SCRUM_BACKLOG_BLANK_3')}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"tasks-scrum__backlog-empty--text\">\n\t\t\t\t\t${Loc.getMessage('TASKS_SCRUM_BACKLOG_BLANK_4')}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\treturn this.node;\n\t}\n\n\trenderCompletedSprint(): HTMLElement\n\t{\n\t\tthis.node = Tag.render`\n\t\t\t<div class=\"tasks-scrum__sprints--completed-empty\">\n\t\t\t\t${Loc.getMessage('TASKS_SCRUM_COMPLETED_SPRINT_EMPTY')}\n\t\t\t</div>\n\t\t`;\n\n\t\treturn this.node;\n\t}\n\n\tgetNode(): ?HTMLElement\n\t{\n\t\treturn this.node;\n\t}\n\n\tremoveNode()\n\t{\n\t\tDom.remove(this.node);\n\n\t\tthis.node = null;\n\t}\n}","import {Event, Dom, Tag, Loc} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\n\nimport {Entity} from './entity';\n\nexport class Dropzone extends EventEmitter\n{\n\tconstructor(entity: Entity)\n\t{\n\t\tsuper(entity);\n\n\t\tthis.setEventNamespace('BX.Tasks.Scrum.Dropzone');\n\n\t\tthis.entity = entity;\n\n\t\tthis.node = null;\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tif (this.entity.isBacklog())\n\t\t{\n\t\t\treturn this.renderBacklog();\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn this.renderSprint();\n\t\t}\n\t}\n\n\tgetNode(): ?HTMLElement\n\t{\n\t\treturn this.node;\n\t}\n\n\tremoveNode()\n\t{\n\t\tDom.remove(this.node);\n\n\t\tthis.node = null;\n\t}\n\n\trenderBacklog(): HTMLElement\n\t{\n\t\tthis.node = Tag.render`\n\t\t\t<div class=\"tasks-scrum__content-empty --empty-backlog\" data-entity-id=\"${this.entity.getId()}\">\n\t\t\t\t${Loc.getMessage('TASKS_SCRUM_BACKLOG_DROPZONE_1')}\n\t\t\t</div>\n\t\t`;\n\n\t\tEvent.bind(\n\t\t\tthis.node,\n\t\t\t'click',\n\t\t\t() => this.emit('createTask')\n\t\t);\n\n\t\treturn this.node;\n\t}\n\n\trenderSprint(): HTMLElement\n\t{\n\t\tthis.node = Tag.render`\n\t\t\t<div class=\"tasks-scrum__content-empty\" data-entity-id=\"${this.entity.getId()}\">\n\t\t\t\t<div class=\"tasks-scrum__content-empty--title\">\n\t\t\t\t\t${Loc.getMessage('TASKS_SCRUM_SPRINT_BLANK_1')}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"tasks-scrum__content-empty--text\">\n\t\t\t\t\t<span class=\"tasks-scrum__content-empty--btn-create\">\n\t\t\t\t\t\t${Loc.getMessage('TASKS_SCRUM_SPRINT_BLANK_2')}\n\t\t\t\t\t</span>${Loc.getMessage('TASKS_SCRUM_SPRINT_BLANK_3')}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\tEvent.bind(\n\t\t\tthis.node.querySelector('.tasks-scrum__content-empty--btn-create'),\n\t\t\t'click',\n\t\t\t() => this.emit('createTask')\n\t\t);\n\n\t\treturn this.node;\n\t}\n}","import {Event, Dom, Tag} from 'main.core';\nimport {BaseEvent} from 'main.core.events';\n\nimport {Header} from './header';\nimport {Blank} from '../blank';\nimport {Dropzone} from '../dropzone';\n\nimport {Entity} from '../entity';\nimport {Item} from '../../item/item';\n\nimport type {ItemParams} from '../../item/item';\n\nimport '../../css/backlog.css';\n\nexport type BacklogParams = {\n\tid: number,\n\titems?: Array<ItemParams>\n};\n\nexport class Backlog extends Entity\n{\n\tconstructor(params: BacklogParams)\n\t{\n\t\tsuper(params);\n\n\t\tthis.setEventNamespace('BX.Tasks.Scrum.Backlog');\n\n\t\tthis.setBacklogParams(params);\n\n\t\tthis.header = null;\n\t}\n\n\tsetBacklogParams(params: BacklogParams)\n\t{\n\t\tparams.items.forEach((itemData) => {\n\t\t\tconst item = Item.buildItem(itemData);\n\t\t\titem.setShortView(this.getShortView());\n\t\t\tthis.items.set(item.getId(), item);\n\t\t});\n\t}\n\n\tstatic buildBacklog(backlogData: BacklogParams): Backlog\n\t{\n\t\tconst backlog = new Backlog(backlogData);\n\n\t\tbacklog.setHeader(backlog);\n\t\tbacklog.setBlank(backlog);\n\t\tbacklog.setDropzone(backlog);\n\t\tbacklog.setListItems(backlog);\n\n\t\treturn backlog;\n\t}\n\n\tsetHeader(backlog: Backlog)\n\t{\n\t\tthis.header = new Header(backlog);\n\n\t\tthis.header.subscribe(\n\t\t\t'epicClick',\n\t\t\t(baseEvent: BaseEvent) => this.emit('openAddEpicForm', baseEvent.getData())\n\t\t);\n\n\t\tthis.header.subscribe('taskClick', () => this.emit('showInput'));\n\t}\n\n\tsetBlank(backlog: Backlog)\n\t{\n\t\tthis.blank = new Blank(backlog);\n\t}\n\n\tsetDropzone(backlog: Backlog)\n\t{\n\t\tthis.dropzone = new Dropzone(backlog);\n\n\t\tthis.dropzone.subscribe('createTask', () => this.emit('showInput'));\n\t}\n\n\tsetNumberTasks(numberTasks: number)\n\t{\n\t\tsuper.setNumberTasks(numberTasks);\n\n\t\tif (this.header)\n\t\t{\n\t\t\tthis.header.updateTaskCounter(this.getNumberTasks());\n\t\t}\n\t}\n\n\tgetEntityType()\n\t{\n\t\treturn 'backlog';\n\t}\n\n\tisDisabled()\n\t{\n\t\treturn false;\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tthis.node = Tag.render`\n\t\t\t<div class=\"tasks-scrum__backlog\">\n\t\t\t\t<div class=\"tasks-scrum__content --with-header --open\">\n\t\t\t\t\t${this.header ? this.header.render() : ''}\n\t\t\t\t\t${this.blank ? this.blank.render() : ''}\n\t\t\t\t\t${this.dropzone ? this.dropzone.render() : ''}\n\t\t\t\t\t${this.listItems ? this.listItems.render() : ''}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\tEvent.bind(this.node.querySelector('.tasks-scrum__content-items'), 'scroll', this.onItemsScroll.bind(this));\n\n\t\treturn this.node;\n\t}\n\n\tsetItem(newItem: Item)\n\t{\n\t\tsuper.setItem(newItem);\n\n\t\tif (newItem.getNode())\n\t\t{\n\t\t\tDom.addClass(newItem.getNode(), '--item-backlog');\n\t\t}\n\t}\n\n\tremoveItem(item: Item)\n\t{\n\t\tsuper.removeItem(item);\n\n\t\tif (this.isEmpty())\n\t\t{\n\t\t\tthis.emit('showBlank');\n\t\t}\n\t}\n\n\tonAfterAppend()\n\t{\n\t\tsuper.onAfterAppend();\n\n\t\tif (this.isEmpty())\n\t\t{\n\t\t\tthis.emit('showBlank');\n\t\t}\n\t}\n\n\tonItemsScroll()\n\t{\n\t\tthis.emit('itemsScroll');\n\t}\n}\n","import {Event, Loc, Tag, Text} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\n\nimport {Sprint} from '../sprint';\n\nexport class Date extends EventEmitter\n{\n\tconstructor(sprint: Sprint)\n\t{\n\t\tsuper(sprint);\n\n\t\tthis.setEventNamespace('BX.Tasks.Scrum.Sprint.Header.Date');\n\n\t\tthis.sprint = sprint;\n\n\t\tthis.node = null;\n\t}\n\n\trender(): HTMLElement|string\n\t{\n\t\tif (this.sprint.isActive() || this.sprint.isCompleted())\n\t\t{\n\t\t\treturn '';\n\t\t}\n\n\t\tthis.node = Tag.render`\n\t\t\t<div class=\"tasks-scrum__sprint--date-container\">\n\t\t\t\t<div class=\"tasks-scrum__sprint--date --start\">${Date.getFormattedDateStart(this.sprint)}</div>\n\t\t\t\t<div class=\"tasks-scrum__sprint--date-separator\"> - </div>\n\t\t\t\t<div class=\"tasks-scrum__sprint--date --end\">${Date.getFormattedDateEnd(this.sprint)}</div>\n\t\t\t\t<input type=\"hidden\" name=\"dateStart\" value=\"${Text.encode(this.sprint.getDateStartFormatted())})\">\n\t\t\t\t<input type=\"hidden\" name=\"dateEnd\" value=\"${Text.encode(this.sprint.getDateEndFormatted())}\">\n\t\t\t</div>\n\t\t`;\n\n\t\tthis.bindEvents();\n\n\t\treturn this.node;\n\t}\n\n\tgetNode(): ?HTMLElement\n\t{\n\t\treturn this.node;\n\t}\n\n\tbindEvents()\n\t{\n\t\tif (this.sprint.isActive() || this.sprint.isCompleted())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst parentPopup = this.node.closest('.popup-window');\n\n\t\tconst customBlur = () => {\n\t\t\tBX.calendar.get().popup.close();\n\t\t};\n\n\t\tconst showCalendar = (node, field) => {\n\t\t\t/* eslint-disable */\n\t\t\tBX.calendar({\n\t\t\t\tnode: node,\n\t\t\t\tfield: field,\n\t\t\t\tbTime: false,\n\t\t\t\tbSetFocus: false,\n\t\t\t\tbHideTime: false\n\t\t\t});\n\t\t\t/* eslint-enable */\n\t\t\tif (parentPopup)\n\t\t\t{\n\t\t\t\tEvent.bindOnce(parentPopup, 'click', customBlur);\n\t\t\t}\n\t\t};\n\n\t\tconst updateDateNode = (node, value) => {\n\t\t\t/* eslint-disable */\n\t\t\tnode.textContent = BX.date.format('j F', Math.floor(BX.parseDate(value).getTime() / 1000));\n\t\t\t/* eslint-enable */\n\t\t};\n\t\tconst sendRequest = (data) => {\n\t\t\tthis.emit('changeSprintDeadline', data);\n\t\t};\n\n\t\tconst dateStartNode = this.node.querySelector('.--start');\n\t\tconst dateEndNode = this.node.querySelector('.--end');\n\t\tconst dateStartInput = this.node.querySelector('input[name=\"dateStart\"]');\n\t\tconst dateEndInput = this.node.querySelector('input[name=\"dateEnd\"]');\n\n\t\tEvent.bind(this.node, 'click', (event) => {\n\t\t\tconst target = event.target;\n\t\t\tif (target.classList.contains('--start'))\n\t\t\t{\n\t\t\t\tshowCalendar(target, dateStartInput);\n\t\t\t}\n\t\t\telse if (target.classList.contains('--end'))\n\t\t\t{\n\t\t\t\tshowCalendar(target, dateEndInput);\n\t\t\t}\n\t\t\tevent.stopPropagation();\n\t\t});\n\t\tEvent.bind(dateStartInput, 'change', (event) => {\n\t\t\tconst value = event.target.value;\n\t\t\tupdateDateNode(dateStartNode, value);\n\t\t\tsendRequest({\n\t\t\t\tsprintId: this.sprint.getId(),\n\t\t\t\tdateStart: Math.floor(BX.parseDate(value).getTime() / 1000)\n\t\t\t});\n\t\t\tif (parentPopup)\n\t\t\t{\n\t\t\t\tEvent.unbind(parentPopup, 'click', customBlur);\n\t\t\t}\n\t\t});\n\t\tEvent.bind(dateEndInput, 'change', (event) => {\n\t\t\tconst value = event.target.value;\n\t\t\tupdateDateNode(dateEndNode, value);\n\t\t\tsendRequest({\n\t\t\t\tsprintId: this.sprint.getId(),\n\t\t\t\tdateEnd: Math.floor(BX.parseDate(value).getTime() / 1000)\n\t\t\t});\n\t\t\tif (parentPopup)\n\t\t\t{\n\t\t\t\tEvent.unbind(parentPopup, 'click', customBlur);\n\t\t\t}\n\t\t});\n\t}\n\n\tgetWeeks()\n\t{\n\t\tconst weekCount = (parseInt(this.sprint.getDefaultSprintDuration(), 10) / 604800);\n\n\t\tif (weekCount > 5)\n\t\t{\n\t\t\treturn weekCount + ' ' + Loc.getMessage('TASKS_SCRUM_DATE_WEEK_NAME_3');\n\t\t}\n\t\telse if (weekCount === 1)\n\t\t{\n\t\t\treturn weekCount + ' ' + Loc.getMessage('TASKS_SCRUM_DATE_WEEK_NAME_1');\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn weekCount + ' ' + Loc.getMessage('TASKS_SCRUM_DATE_WEEK_NAME_2');\n\t\t}\n\t}\n\n\tstatic getFormattedTitleDatePeriod(sprint: Sprint): string\n\t{\n\t\treturn Date.getFormattedDateStart(sprint) + ' - ' + Date.getFormattedDateEnd(sprint);\n\t}\n\n\tstatic getFormattedDateStart(sprint: Sprint): string\n\t{\n\t\t/* eslint-disable */\n\t\treturn BX.date.format('j F', sprint.getDateStart(), null, true);\n\t\t/* eslint-enable */\n\t}\n\n\tstatic getFormattedDateEnd(sprint: Sprint): string\n\t{\n\t\t/* eslint-disable */\n\t\treturn BX.date.format('j F', sprint.getDateEnd(), null, true);\n\t\t/* eslint-enable */\n\t}\n}","export class StatsCalculator\n{\n\tcalculatePercentage(first: number, second: number): number\n\t{\n\t\tif (first === 0)\n\t\t{\n\t\t\treturn 0;\n\t\t}\n\n\t\tconst result = Math.round(second * 100 / first);\n\n\t\treturn (isNaN(result) ? 0 : result);\n\t}\n}","import {Dom, Tag, Type} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\nimport {Sprint} from '../sprint';\n\nimport {StatsCalculator} from './stats.calculator';\n\nexport class Stats extends EventEmitter\n{\n\tconstructor(sprint: Sprint)\n\t{\n\t\tsuper(sprint);\n\n\t\tthis.setEventNamespace('BX.Tasks.Scrum.Sprint.Stats');\n\n\t\tthis.setSprintData(sprint);\n\n\t\tthis.statsCalculator = new StatsCalculator();\n\n\t\tthis.node = null;\n\n\t\tthis.kanbanMode = false;\n\t}\n\n\tsetKanbanStyle()\n\t{\n\t\tthis.kanbanMode = true;\n\t}\n\n\tisKanbanMode(): boolean\n\t{\n\t\treturn this.kanbanMode;\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tthis.node = Tag.render`<div></div>`;\n\n\t\treturn this.node;\n\t}\n\n\tsetSprintData(sprint: Sprint)\n\t{\n\t\tthis.sprint = sprint;\n\n\t\tthis.setStoryPoints(sprint.getStoryPoints().getPoints());\n\t\tthis.setCompletedStoryPoints(sprint.getCompletedStoryPoints().getPoints());\n\t\tthis.setUncompletedStoryPoints(sprint.getUncompletedStoryPoints().getPoints());\n\t\tthis.setEndDate(sprint.getDateEnd());\n\n\t\tthis.weekendDaysTime = sprint.getWeekendDaysTime();\n\n\t\tif (this.node)\n\t\t{\n\t\t\tDom.replace(this.node, this.render());\n\t\t}\n\t}\n\n\tsetStoryPoints(storyPoints)\n\t{\n\t\tif (Type.isUndefined(storyPoints) || isNaN(parseFloat(storyPoints)))\n\t\t{\n\t\t\tthis.storyPoints = 0;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.storyPoints = parseFloat(storyPoints);\n\t\t}\n\t}\n\n\tgetStoryPoints(): number\n\t{\n\t\treturn this.storyPoints;\n\t}\n\n\tsetCompletedStoryPoints(storyPoints)\n\t{\n\t\tif (Type.isUndefined(storyPoints) || isNaN(parseFloat(storyPoints)))\n\t\t{\n\t\t\tthis.completedStoryPoints = 0;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.completedStoryPoints = parseFloat(storyPoints);\n\t\t}\n\t}\n\n\tgetCompletedStoryPoints(): number\n\t{\n\t\treturn this.completedStoryPoints;\n\t}\n\n\tsetUncompletedStoryPoints(storyPoints)\n\t{\n\t\tif (Type.isUndefined(storyPoints) || isNaN(parseFloat(storyPoints)))\n\t\t{\n\t\t\tthis.uncompletedStoryPoints = 0;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.uncompletedStoryPoints = parseFloat(storyPoints);\n\t\t}\n\t}\n\n\tgetUncompletedStoryPoints(): number\n\t{\n\t\treturn this.completedStoryPoints;\n\t}\n\n\tsetEndDate(endDate)\n\t{\n\t\tif (Type.isUndefined(endDate) || isNaN(parseInt(endDate, 10)))\n\t\t{\n\t\t\tthis.endDate = (Date.now() / 1000);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.endDate = parseInt(endDate, 10);\n\t\t}\n\t}\n\n\tgetEndDate(): number\n\t{\n\t\treturn this.endDate;\n\t}\n}","import {Loc, Tag} from 'main.core';\n\nimport {Stats} from './stats';\nimport {Date as HeaderDate} from '../header/date';\n\nexport class CompletedStats extends Stats\n{\n\trender(): HTMLElement\n\t{\n\t\tconst percentage = this.statsCalculator.calculatePercentage(\n\t\t\tthis.getStoryPoints(),\n\t\t\tthis.getCompletedStoryPoints()\n\t\t);\n\n\t\tconst completedDate = this.getCompletedDate(this.getEndDate());\n\n\t\tconst label = Loc.getMessage('TASKS_SCRUM_SPRINT_STATS_COMPLETED_LABEL')\n\t\t\t.replace('#percent#', percentage)\n\t\t\t.replace('#date#', completedDate)\n\t\t;\n\n\t\tconst title = HeaderDate.getFormattedTitleDatePeriod(this.sprint);\n\n\t\tthis.node = Tag.render`\n\t\t\t<div title=\"${title}\">\n\t\t\t\t${label}\n\t\t\t</div>\n\t\t`;\n\n\t\treturn this.node;\n\t}\n\n\tgetCompletedDate(endDate: number): string\n\t{\n\t\treturn BX.date.format('j F Y', endDate);\n\t};\n}\n","import {Loc, Tag} from 'main.core';\n\nimport {Stats} from './stats';\nimport {Date as HeaderDate} from '../header/date';\n\nexport class ExpiredStats extends Stats\n{\n\trender(): HTMLElement\n\t{\n\t\tconst percentage = this.statsCalculator.calculatePercentage(\n\t\t\tthis.getStoryPoints(),\n\t\t\tthis.getCompletedStoryPoints()\n\t\t);\n\t\tconst expiredDay = this.getExpiredDay(this.getEndDate());\n\n\t\tconst label = Loc.getMessage('TASKS_SCRUM_SPRINT_STATS_EXPIRED_LABEL')\n\t\t\t.replace('#percent#', percentage)\n\t\t\t.replace('#date#', expiredDay)\n\t\t;\n\n\t\tconst title = HeaderDate.getFormattedTitleDatePeriod(this.sprint);\n\n\t\tthis.node = Tag.render`\n\t\t\t<div title=\"${title}\">\n\t\t\t\t${label}\n\t\t\t</div>\n\t\t`;\n\n\t\treturn this.node;\n\t}\n\n\tgetExpiredDay(endDate: number): string\n\t{\n\t\treturn BX.date.format('j F Y', endDate);\n\t};\n}\n","import {Loc, Tag, Type} from 'main.core';\n\nimport {Stats} from './stats';\nimport {Date as HeaderDate} from '../header/date';\n\nexport class ActiveStats extends Stats\n{\n\trender(): HTMLElement\n\t{\n\t\tconst remainingDays = this.getRemainingDays(this.getEndDate());\n\t\tconst percentage = this.statsCalculator.calculatePercentage(\n\t\t\tthis.getStoryPoints(),\n\t\t\tthis.getCompletedStoryPoints()\n\t\t);\n\n\t\tlet label = '';\n\t\tif (Type.isInteger(remainingDays) && remainingDays <= 1)\n\t\t{\n\t\t\tlabel = Loc.getMessage('TASKS_SCRUM_SPRINT_STATS_ACTIVE_LAST_LABEL')\n\t\t\t\t.replace('#percent#', percentage)\n\t\t\t;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tlabel = Loc.getMessage('TASKS_SCRUM_SPRINT_STATS_ACTIVE_LABEL')\n\t\t\t\t.replace('#days#', remainingDays)\n\t\t\t\t.replace('#percent#', percentage)\n\t\t\t;\n\t\t}\n\n\t\tconst title = HeaderDate.getFormattedTitleDatePeriod(this.sprint);\n\n\t\tthis.node = Tag.render`\n\t\t\t<div title=\"${title}\">\n\t\t\t\t${label}\n\t\t\t</div>\n\t\t`;\n\n\t\treturn this.node;\n\t}\n\n\tgetRemainingDays(endDate: number): string|number\n\t{\n\t\tconst dateWithWeekendOffset = new Date();\n\t\tdateWithWeekendOffset.setSeconds(dateWithWeekendOffset.getSeconds() + this.weekendDaysTime);\n\t\tdateWithWeekendOffset.setHours(0, 0, 0, 0);\n\n\t\tconst dateEnd = new Date(endDate * 1000);\n\n\t\tconst msPerMinute = 60 * 1000;\n\t\tconst msPerHour = msPerMinute * 60;\n\t\tconst msPerDay = msPerHour * 24;\n\n\t\tconst daysRemaining = Math.round((dateEnd - dateWithWeekendOffset) / msPerDay);\n\n\t\tif (daysRemaining <= 1)\n\t\t{\n\t\t\treturn daysRemaining;\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn BX.date.format('ddiff', dateWithWeekendOffset, dateEnd);\n\t\t}\n\t};\n}\n","import {Sprint} from '../sprint';\n\nimport {Stats} from './stats';\nimport {CompletedStats} from './completed.stats';\nimport {ExpiredStats} from './expired.stats';\nimport {ActiveStats} from './active.stats';\n\nexport class StatsBuilder\n{\n\tstatic build(sprint: Sprint): Stats\n\t{\n\t\tif (sprint.isCompleted())\n\t\t{\n\t\t\treturn new CompletedStats(sprint);\n\t\t}\n\t\telse if (sprint.isExpired())\n\t\t{\n\t\t\treturn new ExpiredStats(sprint);\n\t\t}\n\t\telse if (sprint.isActive())\n\t\t{\n\t\t\treturn new ActiveStats(sprint);\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn new Stats(sprint);\n\t\t}\n\t}\n}","import {Tag} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\n\nimport {Sprint} from '../sprint';\nimport {StatsBuilder} from '../stats/stats.builder';\n\nexport class Stats extends EventEmitter\n{\n\tconstructor(sprint: Sprint)\n\t{\n\t\tsuper(sprint);\n\n\t\tthis.setEventNamespace('BX.Tasks.Scrum.Sprint.Header.Stats');\n\n\t\tthis.sprint = sprint;\n\n\t\tthis.node = null;\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tconst stats = StatsBuilder.build(this.sprint);\n\n\t\tthis.node = Tag.render`\n\t\t\t<div class=\"tasks-scrum__content--event-params\">\n\t\t\t\t${stats.render()}\n\t\t\t</div>\n\t\t`;\n\n\t\treturn this.node;\n\t}\n\n\tgetNode(): ?HTMLElement\n\t{\n\t\treturn this.node;\n\t}\n}","import {Dom, Event, Loc, Tag, Text} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\nimport {MessageBox} from 'ui.dialogs.messagebox';\n\nimport {Sprint} from '../sprint';\n\nimport {Date} from './date';\nimport {Stats} from './stats';\n\nexport class Name extends EventEmitter\n{\n\tconstructor(sprint: Sprint)\n\t{\n\t\tsuper(sprint);\n\n\t\tthis.setEventNamespace('BX.Tasks.Scrum.Sprint.Header.Name');\n\n\t\tthis.sprint = sprint;\n\n\t\tthis.date = null;\n\t\tthis.stats = null;\n\n\t\tthis.node = null;\n\t}\n\n\tsetDate(sprint: Sprint)\n\t{\n\t\tconst date = new Date(sprint);\n\n\t\tif (this.date)\n\t\t{\n\t\t\tDom.replace(this.date.getNode(), date.render());\n\t\t}\n\n\t\tthis.date = date;\n\n\t\tthis.date.subscribe('changeSprintDeadline', (baseEvent) => {\n\t\t\tthis.emit('changeSprintDeadline', baseEvent.getData());\n\t\t});\n\t}\n\n\tgetDate(): ?Date\n\t{\n\t\treturn this.date;\n\t}\n\n\tsetStats(sprint: Sprint)\n\t{\n\t\tconst stats = new Stats(sprint);\n\n\t\tif (this.stats)\n\t\t{\n\t\t\tDom.replace(this.stats.getNode(), stats.render());\n\t\t}\n\n\t\tthis.stats = stats;\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tthis.node = Tag.render`\n\t\t\t<div class=\"tasks-scrum__name-container\">\n\t\t\t\t${this.renderEditInput()}\n\t\t\t\t<div class=\"tasks-scrum__title\">\n\t\t\t\t\t${Text.encode(this.sprint.getName())}\n\t\t\t\t</div>\n\t\t\t\t${this.renderEdit()}\n\t\t\t\t${this.renderRemove()}\n\t\t\t\t${this.date ? this.date.render() : ''}\n\t\t\t\t${this.stats ? this.stats.render() : ''}\n\t\t`;\n\n\t\tconst titleNode = this.node.querySelector('.tasks-scrum__title');\n\t\tconst editNode = this.node.querySelector('.tasks-scrum__sprint--edit');\n\n\t\tEvent.bind(titleNode, 'click', () => {\n\t\t\tthis.emit('editClick', this.node.querySelector('.tasks-scrum__title-editing-input'))\n\t\t});\n\t\tEvent.bind(editNode, 'click', () => {\n\t\t\tthis.emit('editClick', this.node.querySelector('.tasks-scrum__title-editing-input'))\n\t\t});\n\n\t\tif (this.sprint.isPlanned())\n\t\t{\n\t\t\tconst removeNode = this.node.querySelector('.tasks-scrum__sprint--remove');\n\n\t\t\tEvent.bind(removeNode, 'click', () => {\n\t\t\t\tMessageBox.confirm(\n\t\t\t\t\tLoc.getMessage('TASKS_SCRUM_CONFIRM_TEXT_REMOVE_SPRINT'),\n\t\t\t\t\t(messageBox) => {\n\t\t\t\t\t\tthis.emit('removeSprint');\n\t\t\t\t\t\tmessageBox.close();\n\t\t\t\t\t},\n\t\t\t\t\tLoc.getMessage('TASKS_SCRUM_BUTTON_TEXT_REMOVE'),\n\t\t\t\t);\n\t\t\t});\n\t\t}\n\n\t\treturn this.node;\n\t}\n\n\tgetNode(): ?HTMLElement\n\t{\n\t\treturn this.node;\n\t}\n\n\trenderEditInput(): HTMLElement\n\t{\n\t\tconst uiClasses = 'ui-ctl ui-ctl-sm ui-ctl-textbox ui-ctl-underline ui-ctl-no-padding';\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"tasks-scrum__title-editing ${uiClasses}\">\n\t\t\t\t<input\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tclass=\"tasks-scrum__title-editing-input ui-ctl-element\"\n\t\t\t\t\tvalue=\"${Text.encode(this.sprint.getName())}\"\n\t\t\t\t>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\trenderEdit(): ?HTMLElement\n\t{\n\t\tif (!this.sprint.isCompleted())\n\t\t{\n\t\t\treturn Tag.render`<div class=\"tasks-scrum__sprint--edit\"></div>`;\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn '';\n\t\t}\n\t}\n\n\trenderRemove(): ?HTMLElement\n\t{\n\t\tif (this.sprint.isPlanned())\n\t\t{\n\t\t\treturn Tag.render`<div class=\"tasks-scrum__sprint--remove\"></div>`;\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn '';\n\t\t}\n\t}\n}\n","import {Event, Tag} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\n\nimport {Sprint} from '../../sprint';\n\nexport class ChartIcon extends EventEmitter\n{\n\tconstructor(sprint: Sprint)\n\t{\n\t\tsuper(sprint);\n\n\t\tthis.setEventNamespace('BX.Tasks.Scrum.Sprint.Header.Info.ChartIcon');\n\n\t\tthis.sprint = sprint;\n\n\t\tthis.node = null;\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tconst uiChartStyles = 'ui-btn ui-btn-xs ui-btn-light ui-btn-round';\n\n\t\tthis.node = Tag.render`\n\t\t\t<div class=\"tasks-scrum__sprint--btn-burn-down-chart\">\n\t\t\t\t<div class=\"tasks-scrum__sprint--icon-burn-down-chart ${uiChartStyles}\"></div>\n\t\t\t</div>\n\t\t`;\n\n\t\tEvent.bind(this.node, 'click', this.onClick.bind(this));\n\n\t\treturn this.node;\n\t}\n\n\tonClick()\n\t{\n\t\tthis.emit('click');\n\t}\n}","import {Tag, Loc} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\n\nimport {Sprint} from '../../sprint';\n\n\nexport class Counters extends EventEmitter\n{\n\tconstructor(sprint: Sprint)\n\t{\n\t\tsuper(sprint);\n\n\t\tthis.setEventNamespace('BX.Tasks.Scrum.Sprint.Header.Info.Counters');\n\n\t\tthis.sprint = sprint;\n\n\t\tthis.node = null;\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\t//todo maybe need for active sprint\n\t\t//${this.sprint.getUncompletedStoryPoints().getPoints()}\n\t\t//${this.sprint.getCompletedStoryPoints().getPoints()}\n\n\t\tthis.node = Tag.render`\n\t\t\t<div class=\"tasks-scrum__sprint--event-content\">\n\t\t\t\t<div class=\"tasks-scrum__sprint--event-container\">\n\t\t\t\t\t<div class=\"tasks-scrum__sprint--subtitle\">\n\t\t\t\t\t\t${Loc.getMessage('TASKS_SCRUM_TASK_LABEL')}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"tasks-scrum__sprint--point\">\n\t\t\t\t\t\t${parseInt(this.sprint.getNumberTasks(), 10)}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"tasks-scrum__sprint--event-container\">\n\t\t\t\t\t<div class=\"tasks-scrum__sprint--subtitle\">\n\t\t\t\t\t\t${Loc.getMessage('TASKS_SCRUM_SPRINT_HEADER_STORY_POINTS')}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"tasks-scrum__sprint--point\">\n\t\t\t\t\t\t${this.sprint.getStoryPoints().isEmpty() ? '-' : this.sprint.getStoryPoints().getPoints()}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\treturn this.node;\n\t}\n}","import {Event, Tag} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\n\nimport {Sprint} from '../../sprint';\n\nexport class Button extends EventEmitter\n{\n\tconstructor(sprint: Sprint)\n\t{\n\t\tsuper(sprint);\n\n\t\tthis.setEventNamespace('BX.Tasks.Scrum.Sprint.Header.Info.Button');\n\n\t\tthis.sprint = sprint;\n\n\t\tthis.node = null;\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tconst uiBtnStyles = 'ui-btn ui-btn-xs ui-btn-light ui-btn-round ui-btn-icon-add';\n\n\t\tthis.node = Tag.render`\n\t\t\t<button class=\"tasks-scrum__sprint--btn-add ${uiBtnStyles}\"></button>\n\t\t`;\n\n\t\tEvent.bind(this.node, 'click', this.onClick.bind(this));\n\n\t\treturn this.node;\n\t}\n\n\tgetNode(): ?HTMLElement\n\t{\n\t\treturn this.node;\n\t}\n\n\tonClick()\n\t{\n\t\tthis.emit('click');\n\t}\n}","import {Tag} from 'main.core';\nimport {BaseEvent} from 'main.core.events';\nimport {EventEmitter} from 'main.core.events';\n\nimport {Sprint} from '../../sprint';\n\nimport {ChartIcon} from './chart.icon';\nimport {Counters} from './counters';\nimport {Button} from './button';\n\nexport class Info extends EventEmitter\n{\n\tconstructor(sprint: Sprint)\n\t{\n\t\tsuper(sprint);\n\n\t\tthis.setEventNamespace('BX.Tasks.Scrum.Sprint.Header.Info');\n\n\t\tthis.sprint = sprint;\n\n\t\tthis.node = null;\n\n\t\tthis.chartIcon = new ChartIcon(sprint);\n\t\tthis.counters = new Counters(sprint);\n\t\tthis.button = new Button(sprint);\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tthis.node = Tag.render`\n\t\t\t<div class=\"tasks-scrum__sprint--info\">\n\t\t\t\t${this.chartIcon.render()}\n\t\t\t\t${this.counters.render()}\n\t\t\t\t${this.button.render()}\n\t\t\t</div>\n\t\t`;\n\n\t\tthis.chartIcon.subscribe('click', () => this.emit('showBurnDownChart'));\n\t\tthis.button.subscribe(\n\t\t\t'click',\n\t\t\t(baseEvent: BaseEvent) => this.emit('showCreateMenu', baseEvent.getTarget())\n\t\t);\n\n\t\treturn this.node;\n\t}\n\n\tgetNode(): ?HTMLElement\n\t{\n\t\treturn this.node;\n\t}\n\n\tonClick()\n\t{\n\t\tthis.emit('click');\n\t}\n}","import {Event, Loc, Tag, Dom} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\n\nimport {Sprint} from '../sprint';\n\nexport class Button extends EventEmitter\n{\n\tconstructor(sprint: Sprint)\n\t{\n\t\tsuper(sprint);\n\n\t\tthis.setEventNamespace('BX.Tasks.Scrum.Sprint.Header.Button');\n\n\t\tthis.sprint = sprint;\n\n\t\tthis.disabled = false;\n\n\t\tthis.node = null;\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tthis.node = Tag.render`\n\t\t\t<div class=\"tasks-scrum__sprint--btn-run ${this.getUiClasses()}\" title=\"${this.getButtonText()}\">\n\t\t\t\t<span class=\"tasks-scrum__sprint--btn-run-text\">${this.getButtonText()}</span>\n\t\t\t</div>\n\t\t`;\n\n\t\tEvent.bind(this.node, 'click', this.onClick.bind(this));\n\n\t\treturn this.node;\n\t}\n\n\tgetNode(): ?HTMLElement\n\t{\n\t\treturn this.node;\n\t}\n\n\tonClick()\n\t{\n\t\tif (this.disabled)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.emit('click');\n\t}\n\n\tgetUiClasses(): string\n\t{\n\t\treturn 'ui-btn ui-btn-sm ui-btn-primary ui-btn-round ui-btn-no-caps';\n\t}\n\n\tgetButtonText(): string\n\t{\n\t\treturn Loc.getMessage('TASKS_SCRUM_SPRINT_HEADER_BUTTON_' + this.sprint.getStatus().toUpperCase());\n\t}\n\n\tdisable()\n\t{\n\t\tthis.disabled = true;\n\n\t\tif (this.node)\n\t\t{\n\t\t\tDom.addClass(this.node, 'ui-btn-disabled');\n\t\t}\n\t}\n\n\tunDisable()\n\t{\n\t\tthis.disabled = false;\n\n\t\tif (this.node)\n\t\t{\n\t\t\tDom.removeClass(this.node, 'ui-btn-disabled');\n\t\t}\n\t}\n}\n","import {Dom, Event, Tag} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\n\nimport {Sprint} from '../sprint';\n\nexport class Tick extends EventEmitter\n{\n\tconstructor(sprint: Sprint)\n\t{\n\t\tsuper(sprint);\n\n\t\tthis.setEventNamespace('BX.Tasks.Scrum.Sprint.Header.Tick');\n\n\t\tthis.sprint = sprint;\n\n\t\tthis.node = null;\n\t}\n\n\trender(): HTMLElement\n\t{\n\n\t\tthis.node = Tag.render`\n\t\t\t<div class=\"tasks-scrum__sprint--btn-dropdown ui-btn ui-btn-sm ui-btn-icon-angle-down --up\"></div>\n\t\t`;\n\n\t\tEvent.bind(this.node, 'click', this.onClick.bind(this));\n\n\t\tif (this.sprint.isCompleted())\n\t\t{\n\t\t\tDom.removeClass(this.node, '--up');\n\t\t}\n\n\t\treturn this.node;\n\t}\n\n\tonClick()\n\t{\n\t\tthis.emit('click');\n\t}\n\n\tupTick()\n\t{\n\t\tif (!this.node)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tDom.addClass(this.node, '--up');\n\t}\n\n\tdownTick()\n\t{\n\t\tif (!this.node)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tDom.removeClass(this.node, '--up');\n\t}\n}\n","import {Tag, Dom} from 'main.core';\nimport {BaseEvent} from 'main.core.events';\nimport {EventEmitter} from 'main.core.events';\n\nimport {Sprint} from '../sprint';\n\nimport {Name} from './name';\nimport {Stats} from './stats';\nimport {Info} from './info/info';\nimport {Button} from './button';\nimport {Tick} from './tick';\n\nexport class Header extends EventEmitter\n{\n\tconstructor(sprint: Sprint)\n\t{\n\t\tsuper(sprint);\n\n\t\tthis.setEventNamespace('BX.Tasks.Scrum.Sprint.Header');\n\n\t\tthis.sprint = sprint;\n\n\t\tthis.node = null;\n\n\t\tthis.name = null;\n\t\tthis.stats = null;\n\t\tthis.info = null;\n\t\tthis.button = null;\n\t\tthis.tick = null;\n\t}\n\n\tstatic buildHeader(sprint: Sprint): Header\n\t{\n\t\tconst header = new Header(sprint);\n\n\t\theader.setName(sprint);\n\n\t\tif (sprint.isCompleted())\n\t\t{\n\t\t\theader.setStats(sprint);\n\t\t}\n\t\telse\n\t\t{\n\t\t\theader.setInfo(sprint);\n\t\t\theader.setButton(sprint);\n\t\t}\n\n\t\theader.setTick(sprint);\n\n\t\treturn header;\n\t}\n\n\tsetName(sprint: Sprint)\n\t{\n\t\tconst name = new Name(sprint);\n\n\t\tif (sprint.isPlanned())\n\t\t{\n\t\t\tname.setDate(sprint);\n\t\t}\n\n\t\tif (sprint.isActive())\n\t\t{\n\t\t\tname.setStats(sprint);\n\t\t}\n\n\t\tif (this.name)\n\t\t{\n\t\t\tDom.replace(this.name.getNode(), name.render());\n\t\t}\n\n\t\tthis.name = name;\n\n\t\tthis.name.subscribe('editClick', (baseEvent) => {\n\t\t\tthis.emit('changeName', baseEvent.getData());\n\t\t});\n\t\tthis.name.subscribe('removeSprint', () => this.emit('removeSprint'));\n\t\tthis.name.subscribe('changeSprintDeadline', (baseEvent) => {\n\t\t\tthis.emit('changeSprintDeadline', baseEvent.getData());\n\t\t});\n\t}\n\n\tgetName(): Name\n\t{\n\t\treturn this.name;\n\t}\n\n\tsetStats(sprint: Sprint)\n\t{\n\t\tif (!sprint.isCompleted())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst stats = new Stats(sprint);\n\n\t\tif (this.stats)\n\t\t{\n\t\t\tDom.replace(this.stats.getNode(), stats.render());\n\t\t}\n\n\t\tthis.stats = stats;\n\t}\n\n\tsetInfo(sprint: Sprint)\n\t{\n\t\tconst info = new Info(sprint);\n\n\t\tif (this.info)\n\t\t{\n\t\t\tDom.replace(this.info.getNode(), info.render());\n\t\t}\n\n\t\tthis.info = info;\n\n\t\tthis.info.subscribe('showBurnDownChart', () => this.emit('showBurnDownChart'));\n\t\tthis.info.subscribe(\n\t\t\t'showCreateMenu',\n\t\t\t(baseEvent: BaseEvent) => this.emit('showCreateMenu', baseEvent.getData())\n\t\t);\n\t}\n\n\tsetButton(sprint: Sprint)\n\t{\n\t\tconst button = new Button(sprint);\n\n\t\tif (this.button)\n\t\t{\n\t\t\tDom.replace(this.button.getNode(), button.render());\n\t\t}\n\n\t\tthis.button = button;\n\n\t\tthis.button.subscribe('click', () => {\n\t\t\tif (this.sprint.isActive())\n\t\t\t{\n\t\t\t\tthis.emit('completeSprint');\n\t\t\t}\n\t\t\telse if (this.sprint.isPlanned())\n\t\t\t{\n\t\t\t\tthis.emit('startSprint');\n\t\t\t}\n\t\t});\n\t}\n\n\tsetTick(sprint: Sprint)\n\t{\n\t\tthis.tick = new Tick(sprint);\n\n\t\tthis.tick.subscribe('click', () => {\n\t\t\tthis.emit('toggleVisibilityContent');\n\t\t});\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tthis.node = Tag.render`\n\t\t\t<div class=\"tasks-scrum__content-header ${this.getHeaderClass()}\">\n\t\t\t\t${this.name ? this.name.render() : ''}\n\t\t\t\t${this.stats ? this.stats.render() : ''}\n\t\t\t\t${this.info ? this.info.render() : ''}\n\t\t\t\t${this.button ? this.button.render() : ''}\n\t\t\t\t${this.tick ? this.tick.render(): ''}\n\t\t\t</div>\n\t\t`;\n\n\t\treturn this.node;\n\t};\n\n\tgetNode(): ?HTMLElement\n\t{\n\t\treturn this.node;\n\t}\n\n\tgetHeaderClass(): string\n\t{\n\t\treturn 'tasks-scrum__content-header --' + this.sprint.getStatus();\n\t}\n\n\tactivateEditMode()\n\t{\n\t\tDom.addClass(this.getNode(), '--editing');\n\t}\n\n\tdeactivateEditMode()\n\t{\n\t\tDom.removeClass(this.getNode(), '--editing');\n\t}\n\n\tupTick()\n\t{\n\t\tif (!this.tick)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.tick.upTick();\n\t}\n\n\tdownTick()\n\t{\n\t\tif (!this.tick)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.tick.downTick();\n\t}\n\n\tdisableButton()\n\t{\n\t\tif (this.button)\n\t\t{\n\t\t\tthis.button.disable();\n\t\t}\n\t}\n\n\tunDisableButton()\n\t{\n\t\tif (this.button)\n\t\t{\n\t\t\tthis.button.unDisable();\n\t\t}\n\t}\n}\n","import {Dom, Event, Tag, Type} from 'main.core';\nimport {BaseEvent} from 'main.core.events';\n\nimport {Entity} from '../entity';\nimport {Blank} from '../blank';\nimport {Dropzone} from '../dropzone';\n\nimport {Item} from '../../item/item';\nimport {SubTasks} from '../../item/task/sub.tasks';\n\nimport {Header} from './header/header';\n\nimport {StoryPointsStorage} from '../../utility/story.points.storage';\n\nimport type {ItemParams} from '../../item/item';\nimport type {Views} from '../../view/view';\n\nimport '../../css/sprint.css';\n\ntype SprintInfo = {\n\tsprintGoal?: string\n}\n\nexport type SprintParams = {\n\tid: number,\n\ttmpId: string,\n\tname: string,\n\tsort: number,\n\tdateStart?: number,\n\tdateEnd?: number,\n\tdateStartFormatted?: string,\n\tdateEndFormatted?: string,\n\tweekendDaysTime?: number,\n\tdefaultSprintDuration: number,\n\tstoryPoints?: string,\n\tcompletedStoryPoints?: string,\n\tuncompletedStoryPoints?: string,\n\tcompletedTasks?: number,\n\tuncompletedTasks?: number,\n\tstatus?: string,\n\tnumberTasks?: number,\n\titems?: Array<ItemParams>,\n\tinfo?: SprintInfo,\n\tviews: Views\n};\n\nexport class Sprint extends Entity\n{\n\tconstructor(params: SprintParams)\n\t{\n\t\tsuper(params);\n\n\t\tthis.setEventNamespace('BX.Tasks.Scrum.Sprint');\n\n\t\tthis.completedStoryPoints = new StoryPointsStorage();\n\t\tthis.uncompletedStoryPoints = new StoryPointsStorage();\n\n\t\tthis.setSprintParams(params);\n\n\t\tthis.hideCont = this.isCompleted();\n\t}\n\n\tsetSprintParams(params: SprintParams)\n\t{\n\t\tthis.setTmpId(params.tmpId);\n\t\tthis.setName(params.name);\n\t\tthis.setSort(params.sort);\n\t\tthis.setDateStart(params.dateStart);\n\t\tthis.setDateEnd(params.dateEnd);\n\t\tthis.setDateStartFormatted(params.dateStartFormatted);\n\t\tthis.setDateEndFormatted(params.dateEndFormatted);\n\t\tthis.setWeekendDaysTime(params.weekendDaysTime);\n\t\tthis.setDefaultSprintDuration(params.defaultSprintDuration);\n\t\tthis.setStatus(params.status);\n\t\tthis.setCompletedStoryPoints(params.completedStoryPoints);\n\t\tthis.setUncompletedStoryPoints(params.uncompletedStoryPoints);\n\t\tthis.setCompletedTasks(params.completedTasks);\n\t\tthis.setUncompletedTasks(params.uncompletedTasks);\n\t\tthis.setItems(params.items);\n\t\tthis.setInfo(params.info);\n\t}\n\n\tstatic buildSprint(params: SprintParams): Sprint\n\t{\n\t\tconst sprint = new Sprint(params);\n\n\t\tsprint.setHeader(sprint);\n\t\tif (sprint.isCompleted())\n\t\t{\n\t\t\tsprint.setBlank(sprint);\n\t\t}\n\t\tsprint.setDropzone(sprint);\n\t\tsprint.setListItems(sprint);\n\n\t\treturn sprint;\n\t}\n\n\tsetHeader(sprint: Sprint)\n\t{\n\t\tconst header = Header.buildHeader(sprint);\n\n\t\tif (this.header)\n\t\t{\n\t\t\tDom.replace(this.header.getNode(), header.render());\n\t\t}\n\n\t\tthis.header = header;\n\n\t\tthis.header.subscribe('changeName', this.onChangeName.bind(this));\n\t\tthis.header.subscribe('removeSprint', () => this.emit('removeSprint'));\n\t\tthis.header.subscribe('completeSprint', () => this.emit('completeSprint'));\n\t\tthis.header.subscribe('startSprint', () => this.emit('startSprint'));\n\t\tthis.header.subscribe('changeSprintDeadline', this.onChangeSprintDeadline.bind(this));\n\t\tthis.header.subscribe('toggleVisibilityContent', () => {\n\t\t\tthis.toggleVisibilityContent(this.getContentContainer());\n\t\t});\n\t\tthis.header.subscribe('showBurnDownChart', () => this.emit('showSprintBurnDownChart'));\n\t\tthis.header.subscribe(\n\t\t\t'showCreateMenu',\n\t\t\t(baseEvent: BaseEvent) => this.emit('showSprintCreateMenu', baseEvent.getData())\n\t\t);\n\t}\n\n\tsetBlank(sprint: Sprint)\n\t{\n\t\tthis.blank = new Blank(sprint);\n\t}\n\n\tsetDropzone(sprint: Sprint)\n\t{\n\t\tthis.dropzone = new Dropzone(sprint);\n\n\t\tthis.dropzone.subscribe('createTask', () => this.emit('showInput'));\n\t}\n\n\tisActive(): boolean\n\t{\n\t\treturn (this.getStatus() === 'active');\n\t}\n\n\tisPlanned(): boolean\n\t{\n\t\treturn (this.getStatus() === 'planned');\n\t}\n\n\tisCompleted(): boolean\n\t{\n\t\treturn (this.getStatus() === 'completed');\n\t}\n\n\tisDisabled(): boolean\n\t{\n\t\treturn (this.isCompleted());\n\t}\n\n\tisExpired(): boolean\n\t{\n\t\tconst sprintEnd = new Date(this.dateEnd * 1000);\n\t\treturn (this.isActive() && (sprintEnd.getTime() < (new Date()).getTime()));\n\t}\n\n\tgetEntityType()\n\t{\n\t\treturn 'sprint';\n\t}\n\n\tsetItem(newItem: Item)\n\t{\n\t\tsuper.setItem(newItem);\n\n\t\tnewItem.setDisableStatus(this.isDisabled());\n\n\t\tif (newItem.getNode())\n\t\t{\n\t\t\tDom.addClass(newItem.getNode(), '--item-sprint');\n\t\t}\n\t}\n\n\tremoveItem(item: Item)\n\t{\n\t\tsuper.removeItem(item);\n\n\t\tif (this.isEmpty())\n\t\t{\n\t\t\tthis.showDropzone();\n\t\t}\n\t}\n\n\tsetName(name)\n\t{\n\t\tthis.name = (Type.isString(name) ? name : '');\n\n\t\tif (this.isNodeCreated())\n\t\t{\n\t\t\tthis.header.setName(this);\n\t\t}\n\t}\n\n\tgetName()\n\t{\n\t\treturn this.name;\n\t}\n\n\tsetTmpId(tmpId: string)\n\t{\n\t\tthis.tmpId = (Type.isString(tmpId) ? tmpId : '');\n\t}\n\n\tgetTmpId(): string\n\t{\n\t\treturn this.tmpId;\n\t}\n\n\tsetSort(sort)\n\t{\n\t\tthis.sort = (Type.isInteger(sort) ? parseInt(sort, 10) : 1);\n\n\t\tif (this.getNode())\n\t\t{\n\t\t\tthis.getNode().dataset.sprintSort = this.sort;\n\t\t}\n\t}\n\n\tgetSort()\n\t{\n\t\treturn this.sort;\n\t}\n\n\tsetDateStart(dateStart)\n\t{\n\t\tthis.dateStart = (Type.isInteger(dateStart) ? parseInt(dateStart, 10) : 0);\n\n\t\tif (this.isNodeCreated())\n\t\t{\n\t\t\tthis.header.setName(this);\n\t\t}\n\t}\n\n\tgetDateStart(): number\n\t{\n\t\treturn parseInt(this.dateStart, 10);\n\t}\n\n\tsetDateEnd(dateEnd)\n\t{\n\t\tthis.dateEnd = (Type.isInteger(dateEnd) ? parseInt(dateEnd, 10) : 0);\n\n\t\tif (this.isNodeCreated())\n\t\t{\n\t\t\tthis.header.setName(this);\n\t\t}\n\t}\n\n\tgetDateEnd(): number\n\t{\n\t\treturn parseInt(this.dateEnd, 10);\n\t}\n\n\tsetDateStartFormatted(dateStart)\n\t{\n\t\tthis.dateStartFormatted = (Type.isString(dateStart) ? dateStart : '');\n\t}\n\n\tgetDateStartFormatted(): string\n\t{\n\t\treturn this.dateStartFormatted;\n\t}\n\n\tsetDateEndFormatted(dateEnd)\n\t{\n\t\tthis.dateEndFormatted = (Type.isString(dateEnd) ? dateEnd : '');\n\t}\n\n\tgetDateEndFormatted(): string\n\t{\n\t\treturn this.dateEndFormatted;\n\t}\n\n\tsetWeekendDaysTime(weekendDaysTime)\n\t{\n\t\tthis.weekendDaysTime = (Type.isInteger(weekendDaysTime) ? parseInt(weekendDaysTime, 10) : 0);\n\t}\n\n\tgetWeekendDaysTime(): number\n\t{\n\t\treturn this.weekendDaysTime;\n\t}\n\n\tsetCompletedStoryPoints(completedStoryPoints)\n\t{\n\t\tthis.completedStoryPoints.setPoints(completedStoryPoints);\n\n\t\tthis.setStats();\n\t}\n\n\tgetCompletedStoryPoints(): StoryPointsStorage\n\t{\n\t\treturn this.completedStoryPoints;\n\t}\n\n\tsetUncompletedStoryPoints(uncompletedStoryPoints)\n\t{\n\t\tthis.uncompletedStoryPoints.setPoints(uncompletedStoryPoints);\n\n\t\tthis.setStats();\n\t}\n\n\tgetUncompletedStoryPoints(): StoryPointsStorage\n\t{\n\t\treturn this.uncompletedStoryPoints;\n\t}\n\n\tsetStats()\n\t{\n\t\tif (this.header)\n\t\t{\n\t\t\tthis.header.setStats(this);\n\t\t\tthis.header.setName(this);\n\t\t\tthis.header.setInfo(this);\n\t\t}\n\t}\n\n\tsetItems(items)\n\t{\n\t\tif (!Type.isArray(items))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\titems.forEach((itemParams: ItemParams) => {\n\t\t\tconst item = Item.buildItem(itemParams);\n\t\t\titem.setDisableStatus(this.isDisabled());\n\t\t\titem.setShortView(this.getShortView());\n\t\t\tthis.items.set(item.getId(), item);\n\t\t});\n\t}\n\n\tsetInfo(info: SprintInfo)\n\t{\n\t\tthis.info = (Type.isPlainObject(info) ? info : {sprintGoal: ''});\n\t}\n\n\tsetNumberTasks(numberTasks: number)\n\t{\n\t\tsuper.setNumberTasks(numberTasks);\n\n\t\tif (this.header)\n\t\t{\n\t\t\tthis.header.setInfo(this);\n\t\t}\n\t}\n\n\tsetCompletedTasks(completedTasks)\n\t{\n\t\tthis.completedTasks = (Type.isInteger(completedTasks) ? parseInt(completedTasks, 10) : 0);\n\t}\n\n\tgetCompletedTasks(): number\n\t{\n\t\treturn this.completedTasks;\n\t}\n\n\tsetUncompletedTasks(uncompletedTasks)\n\t{\n\t\tthis.uncompletedTasks = (Type.isInteger(uncompletedTasks) ? parseInt(uncompletedTasks, 10) : 0);\n\t}\n\n\tgetUncompletedTasks(): number\n\t{\n\t\treturn this.uncompletedTasks;\n\t}\n\n\tsetDefaultSprintDuration(defaultSprintDuration)\n\t{\n\t\tthis.defaultSprintDuration = (Type.isInteger(defaultSprintDuration) ? parseInt(defaultSprintDuration, 10) : 0);\n\t}\n\n\tgetDefaultSprintDuration()\n\t{\n\t\treturn this.defaultSprintDuration;\n\t}\n\n\tgetInfo(): SprintInfo\n\t{\n\t\treturn this.info;\n\t}\n\n\tgetUncompletedItems(): Map<string, Item>\n\t{\n\t\tconst items = new Map();\n\n\t\tthis.items.forEach((item: Item) => {\n\t\t\tif (!item.isCompleted())\n\t\t\t{\n\t\t\t\titems.set(item.getId(), item);\n\t\t\t}\n\t\t});\n\n\t\treturn items;\n\t}\n\n\tsetStatus(status)\n\t{\n\t\tconst availableStatus = new Set([\n\t\t\t'planned',\n\t\t\t'active',\n\t\t\t'completed'\n\t\t]);\n\n\t\tthis.status = (availableStatus.has(status) ? status : 'planned');\n\n\t\tthis.setHeader(this);\n\n\t\tthis.items.forEach((item) => {\n\t\t\titem.setDisableStatus(this.isDisabled());\n\t\t});\n\n\t\tif (this.isDisabled())\n\t\t{\n\t\t\tif (this.input)\n\t\t\t{\n\t\t\t\tthis.input.removeYourself();\n\t\t\t}\n\t\t}\n\t}\n\n\tgetStatus(): string\n\t{\n\t\treturn this.status;\n\t}\n\n\tdisableHeaderButton()\n\t{\n\t\tif (this.header)\n\t\t{\n\t\t\tthis.header.disableButton();\n\t\t}\n\t}\n\n\tunDisableHeaderButton()\n\t{\n\t\tif (this.header)\n\t\t{\n\t\t\tthis.header.unDisableButton();\n\t\t}\n\t}\n\n\tupdateYourself(tmpSprint: Sprint)\n\t{\n\t\tif (tmpSprint.getName() !== this.getName())\n\t\t{\n\t\t\tthis.setName(tmpSprint.getName());\n\t\t}\n\t\tif (tmpSprint.getDateStart() !== this.getDateStart())\n\t\t{\n\t\t\tthis.setDateStart(tmpSprint.getDateStart());\n\t\t}\n\t\tif (tmpSprint.getDateEnd() !== this.getDateEnd())\n\t\t{\n\t\t\tthis.setDateEnd(tmpSprint.getDateEnd());\n\t\t}\n\n\t\tthis.setStoryPoints(tmpSprint.getStoryPoints().getPoints());\n\t\tthis.setCompletedStoryPoints(tmpSprint.getCompletedStoryPoints().getPoints());\n\t\tthis.setUncompletedStoryPoints(tmpSprint.getUncompletedStoryPoints().getPoints());\n\n\t\tif (tmpSprint.getStatus() !== this.getStatus())\n\t\t{\n\t\t\tthis.setStatus(tmpSprint.getStatus());\n\t\t}\n\n\t\tif (this.node && this.header)\n\t\t{\n\t\t\tthis.setHeader(this);\n\t\t}\n\t}\n\n\tremoveYourself()\n\t{\n\t\tDom.remove(this.node);\n\n\t\tthis.node = null;\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tconst openClass = this.isCompleted() ? '' : '--open';\n\n\t\tthis.node = Tag.render`\n\t\t\t<div\n\t\t\t\tclass=\"tasks-scrum__content --with-header ${openClass}\"\n\t\t\t\tdata-sprint-sort=\"${this.sort}\"\n\t\t\t\tdata-sprint-id=\"${this.getId()}\"\n\t\t\t>\n\t\t\t\t${this.header ? this.header.render() : ''}\n\t\t\t\t<div class=\"tasks-scrum__content-container\">\n\t\t\t\t\t${this.blank ? this.blank.render() : ''}\n\t\t\t\t\t${this.dropzone ? this.dropzone.render() : ''}\n\t\t\t\t\t${this.listItems ? this.listItems.render() : ''}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\tEvent.bind(\n\t\t\tthis.getContentContainer(),\n\t\t\t'transitionend',\n\t\t\tthis.onTransitionEnd.bind(this, this.getContentContainer())\n\t\t);\n\n\t\treturn this.node;\n\t}\n\n\t// renderLinkToCompletedSprint(): HTMLElement\n\t// {\n\t// \t//todo remove it method\n\t// \treturn Tag.render`\n\t// \t\t<a href=\"${Text.encode(this.getViews().completedSprint.url)}\">\n\t// \t\t\t${Loc.getMessage('TASKS_SCRUM_COMPLETED_SPRINT_LINK')}\n\t// \t\t</a>\n\t// \t`;\n\t// }\n\n\tonAfterAppend()\n\t{\n\t\tsuper.onAfterAppend();\n\n\t\tif (this.isEmpty() && !this.isCompleted())\n\t\t{\n\t\t\tthis.showDropzone();\n\t\t}\n\t}\n\n\tsubscribeToItem(item)\n\t{\n\t\tsuper.subscribeToItem(item);\n\n\t\titem.subscribe('showSubTasks', (baseEvent: BaseEvent) => {\n\t\t\tconst parentItem: Item = baseEvent.getTarget();\n\t\t\tconst subTasks: SubTasks = baseEvent.getData();\n\n\t\t\tif (subTasks.isEmpty())\n\t\t\t{\n\t\t\t\tthis.emit('getSubTasks', subTasks);\n\t\t\t}\n\n\t\t\tthis.appendNodeAfterItem(subTasks.render(), parentItem.getNode());\n\n\t\t\tsubTasks.show();\n\t\t});\n\n\t\titem.subscribe('updateCompletedStatus', (baseEvent: BaseEvent) => {\n\t\t\t[...this.getItems().values()].map((item: Item) => {\n\t\t\t\tif (item.isCompleted())\n\t\t\t\t{\n\t\t\t\t\tthis.setCompletedTasks(this.getCompletedTasks() + 1);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.setUncompletedTasks(this.getUncompletedTasks() - 1);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\titem.subscribe('toggleSubTasks', (baseEvent: BaseEvent) => {\n\t\t\tthis.emit('toggleSubTasks', baseEvent.getTarget());\n\t\t})\n\t}\n\n\tonChangeName(baseEvent: BaseEvent)\n\t{\n\t\tconst header: Header = baseEvent.getTarget();\n\t\tconst input: HTMLInputElement = baseEvent.getData();\n\n\t\theader.activateEditMode();\n\n\t\tconst length = input.value.length;\n\n\t\tinput.focus();\n\t\tinput.setSelectionRange(length, length);\n\n\t\tEvent.bind(input, 'keydown', (event: KeyboardEvent) => {\n\t\t\tif (event.isComposing || event.key === 'Escape' || event.key === 'Enter')\n\t\t\t{\n\t\t\t\tinput.blur();\n\t\t\t}\n\t\t});\n\n\t\tEvent.bindOnce(input, 'blur', () => {\n\t\t\tif (this.getName() !== input.value)\n\t\t\t{\n\t\t\t\tthis.setName(input.value);\n\n\t\t\t\tthis.emit('changeSprintName', {\n\t\t\t\t\tsprintId: this.getId(),\n\t\t\t\t\tname: this.getName()\n\t\t\t\t});\n\t\t\t}\n\n\t\t\theader.deactivateEditMode();\n\t\t});\n\t}\n\n\tonChangeSprintDeadline(baseEvent)\n\t{\n\t\tconst requestData = baseEvent.getData();\n\n\t\tthis.emit('changeSprintDeadline', requestData);\n\n\t\tif (requestData.hasOwnProperty('dateStart'))\n\t\t{\n\t\t\tthis.dateStart = parseInt(requestData.dateStart, 10);\n\t\t}\n\t\telse if (requestData.hasOwnProperty('dateEnd'))\n\t\t{\n\t\t\tthis.dateEnd = parseInt(requestData.dateEnd, 10);\n\t\t}\n\t}\n\n\tonTransitionEnd(node: HTMLElement)\n\t{\n\t\tif (node.style.height !== '0px')\n\t\t{\n\t\t\tnode.style.height = 'auto'\n\t\t}\n\n\t\tthis.emit('toggleVisibilityContent');\n\t}\n\n\ttoggleVisibilityContent(node: HTMLElement)\n\t{\n\t\tif (this.isHideContent())\n\t\t{\n\t\t\tthis.showContent(node);\n\n\t\t\tDom.addClass(this.node, '--open');\n\n\t\t\tif (this.isCompleted())\n\t\t\t{\n\t\t\t\tif (this.getItems().size === 0)\n\t\t\t\t{\n\t\t\t\t\tthis.emit('getSprintCompletedItems');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.hideContent(node);\n\n\t\t\tDom.removeClass(this.node, '--open');\n\t\t}\n\t}\n\n\tshowContent(node: HTMLElement)\n\t{\n\t\tthis.hideCont = false;\n\n\t\tnode.style.height = `${ node.scrollHeight }px`\n\n\t\tif (this.header)\n\t\t{\n\t\t\tthis.header.upTick();\n\t\t}\n\t}\n\n\thideContent(node: HTMLElement)\n\t{\n\t\tthis.hideCont = true;\n\n\t\tnode.style.height = `${ node.scrollHeight }px`;\n\t\tnode.clientHeight;\n\t\tnode.style.height = '0';\n\n\t\tif (this.header)\n\t\t{\n\t\t\tthis.header.downTick();\n\t\t}\n\t}\n\n\tisHideContent(): boolean\n\t{\n\t\treturn this.hideCont;\n\t}\n\n\tshowSprint()\n\t{\n\t\tif (this.node)\n\t\t{\n\t\t\tthis.node.style.display = 'block';\n\t\t}\n\t}\n\n\thideSprint()\n\t{\n\t\tif (this.node)\n\t\t{\n\t\t\tthis.node.style.display = 'none';\n\t\t}\n\t}\n\n\tgetContentContainer(): HTMLElement\n\t{\n\t\treturn this.node.querySelector('.tasks-scrum__content-container');\n\t}\n\n\tfadeOut()\n\t{\n\t\tif (!this.isCompleted())\n\t\t{\n\t\t\tsuper.fadeOut();\n\t\t}\n\t}\n\n\tfadeIn()\n\t{\n\t\tif (!this.isCompleted())\n\t\t{\n\t\t\tsuper.fadeIn();\n\t\t}\n\t}\n}\n\n","import {Type} from 'main.core';\n\nimport {Entity} from './entity';\nimport {Backlog} from './backlog/backlog';\nimport {Sprint} from './sprint/sprint';\n\nexport class EntityStorage\n{\n\tconstructor()\n\t{\n\t\tthis.backlog = null;\n\t\tthis.sprints = new Map();\n\t}\n\n\taddBacklog(backlog: Backlog)\n\t{\n\t\tif (!(backlog instanceof Backlog))\n\t\t{\n\t\t\tthrow new Error('EntityStorage: Backlog is in wrong format');\n\t\t}\n\n\t\tthis.backlog = backlog;\n\t}\n\n\taddSprint(sprint: Sprint)\n\t{\n\t\tthis.sprints.set(sprint.getId(), sprint);\n\t}\n\n\tremoveSprint(sprintId: number)\n\t{\n\t\tthis.sprints.delete(sprintId);\n\t}\n\n\tgetBacklog(): Backlog\n\t{\n\t\tif (this.backlog === null)\n\t\t{\n\t\t\tthrow new Error('EntityStorage: Backlog not found');\n\t\t}\n\n\t\treturn this.backlog;\n\t}\n\n\tgetSprints(): Map<number, Sprint>\n\t{\n\t\treturn this.sprints;\n\t}\n\n\tgetActiveSprint(): ?Sprint\n\t{\n\t\treturn [...this.sprints.values()].find((sprint: Sprint) => sprint.isActive());\n\t}\n\n\tgetPlannedSprints(): Set<Sprint>\n\t{\n\t\tconst sprints = new Set();\n\n\t\tthis.sprints.forEach((sprint: Sprint) => {\n\t\t\tif (sprint.isPlanned())\n\t\t\t{\n\t\t\t\tsprints.add(sprint);\n\t\t\t}\n\t\t});\n\n\t\treturn sprints;\n\t}\n\n\tgetSprintsAvailableForFilling(entityFrom: Entity): Set<Sprint>\n\t{\n\t\tconst sprints = new Set();\n\n\t\tthis.sprints.forEach((sprint: Sprint) => {\n\t\t\tif (!sprint.isCompleted() && entityFrom.getId() !== sprint.getId())\n\t\t\t{\n\t\t\t\tsprints.add(sprint);\n\t\t\t}\n\t\t});\n\n\t\treturn sprints;\n\t}\n\n\texistCompletedSprint(): boolean\n\t{\n\t\treturn !Type.isUndefined([...this.sprints.values()].find((sprint) => sprint.isCompleted()));\n\t}\n\n\tgetAllEntities(): Map<number, Entity>\n\t{\n\t\tconst entities = new Map();\n\n\t\tentities.set(this.backlog.getId(), this.backlog);\n\n\t\t[...this.sprints.values()].map((sprint) => entities.set(sprint.getId(), sprint));\n\n\t\treturn entities;\n\t}\n\n\tgetAllItems(): Map<number, Item>\n\t{\n\t\tlet items = new Map(this.backlog.getItems());\n\n\t\tconst activeSprint = this.getActiveSprint();\n\n\t\tif (activeSprint)\n\t\t{\n\t\t\titems = new Map([...items, ...activeSprint.getItems()]);\n\t\t}\n\n\t\t[...this.getPlannedSprints().values()].map((sprint) => items = new Map([...items, ...sprint.getItems()]));\n\n\t\treturn items;\n\t}\n\n\texistsAtLeastOneItem(): boolean\n\t{\n\t\tconst backlogItems = new Map(this.backlog.getItems());\n\n\t\tif (backlogItems.size > 0)\n\t\t{\n\t\t\treturn true;\n\t\t}\n\n\t\tconst filledSprint = [...this.sprints.values()].find((sprint: Sprint) => sprint.getItems().size > 0);\n\n\t\treturn !Type.isUndefined(filledSprint);\n\t}\n\n\trecalculateItemsSort()\n\t{\n\t\tthis.backlog.recalculateItemsSort();\n\t\tthis.sprints.forEach((sprint) => sprint.recalculateItemsSort());\n\t}\n\n\tfindEntityByEntityId(entityId: number): Backlog|Sprint\n\t{\n\t\tentityId = parseInt(entityId, 10);\n\n\t\tif (this.backlog.getId() === entityId)\n\t\t{\n\t\t\treturn this.backlog;\n\t\t}\n\n\t\treturn [...this.sprints.values()].find((sprint) => sprint.getId() === entityId);\n\t}\n\n\tfindItemByItemId(itemId: number): Item\n\t{\n\t\titemId = parseInt(itemId, 10);\n\n\t\tconst backlogItems = this.backlog.getItems();\n\t\tif (backlogItems.has(itemId))\n\t\t{\n\t\t\treturn backlogItems.get(itemId);\n\t\t}\n\n\t\tconst sprint = [...this.sprints.values()].find((sprint) => sprint.getItems().has(itemId));\n\t\tif (sprint)\n\t\t{\n\t\t\treturn sprint.getItems().get(itemId);\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tfindItemBySourceId(sourceId: number): Item\n\t{\n\t\tsourceId = parseInt(sourceId, 10);\n\n\t\tlet items = new Map(this.backlog.getItems());\n\n\t\t[...this.sprints.values()].map((sprint) => items = new Map([...items, ...sprint.getItems()]));\n\n\t\treturn [...items.values()].find((item: Item) => item.getSourceId() === sourceId);\n\t}\n\n\tfindEntityByItemId(itemId: number): Entity\n\t{\n\t\titemId = parseInt(itemId, 10);\n\n\t\tconst backlogItems = this.backlog.getItems();\n\t\tif (backlogItems.has(itemId))\n\t\t{\n\t\t\treturn this.backlog;\n\t\t}\n\n\t\treturn [...this.sprints.values()].find((sprint) => sprint.getItems().has(itemId));\n\t}\n}","import {Event, Loc, Tag, Type, Dom} from 'main.core';\nimport {Loader} from 'main.loader';\nimport {EventEmitter} from 'main.core.events';\n\nimport {EntityStorage} from '../../entity/entity.storage';\nimport {Sprint} from '../../entity/sprint/sprint';\n\nimport {RequestSender} from '../../utility/request.sender';\n\ntype Params = {\n\trequestSender: RequestSender,\n\tentityStorage: EntityStorage,\n\tpageNumber: number,\n\tisShortView: 'Y' | 'N'\n}\n\ntype Stats = {\n\tnumberSprints: number,\n\taverageNumberTasks: number,\n\taverageNumberStoryPoints: number,\n\taveragePercentageCompletion: number\n}\n\nimport type {SprintParams} from '../../entity/sprint/sprint';\n\nimport '../../css/completed.sprints.css';\n\nexport class CompletedSprints extends EventEmitter\n{\n\tconstructor(params: Params)\n\t{\n\t\tsuper(params);\n\n\t\tthis.setEventNamespace('BX.Tasks.Scrum.CompletedSprints');\n\n\t\tthis.requestSender = params.requestSender;\n\t\tthis.entityStorage = params.entityStorage;\n\t\tthis.pageNumber = parseInt(params.pageNumber, 10);\n\t\tthis.isShortView = params.isShortView;\n\n\t\tthis.statsUploaded = false;\n\t\tthis.sprintsUploaded = false;\n\n\t\tthis.loader = null;\n\n\t\tthis.isActiveLoad = false;\n\n\t\tthis.node = null;\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tthis.node = Tag.render`\n\t\t\t<div class=\"tasks-scrum__content\">\n\t\t\t\t<div class=\"tasks-scrum__sprints--completed\">\n\t\t\t\t\t<div class=\"tasks-scrum__sprints--completed-title\">\n\t\t\t\t\t\t<span class=\"tasks-scrum__sprints--completed-title-text\">\n\t\t\t\t\t\t\t${Loc.getMessage('TASKS_SCRUM_COMPLETED_SPRINTS_TITLE')}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t${this.renderHeader()}\n\t\t\t\t\t${this.renderList()}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\tconst listNode = this.node.querySelector('.tasks-scrum__sprints--completed-list');\n\n\t\tEvent.bind(listNode, 'transitionend', this.onTransitionEnd.bind(this));\n\n\t\tconst observerTargetNode = listNode.querySelector('.tasks-scrum-completed-sprints-observer-target');\n\n\t\tthis.bindLoad(observerTargetNode);\n\n\t\treturn this.node;\n\t}\n\n\trenderHeader(): HTMLElement\n\t{\n\t\tconst btnStyles = 'tasks-scrum__sprint--btn-dropdown ui-btn ui-btn-sm ui-btn-icon-angle-down';\n\n\t\tconst header = Tag.render`\n\t\t\t<div class=\"tasks-scrum__sprints--completed-header\">\n\t\t\t\t<div class=\"tasks-scrum__sprints--completed-name\">\n\t\t\t\t\t${Loc.getMessage('TASKS_SCRUM_COMPLETED_SPRINTS_NAME')}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"tasks-scrum__sprints--completed-stats\"></div>\n\t\t\t\t<div class=\"tasks-scrum__sprints--completed-btn ${btnStyles}\"></div>\n\t\t\t</div>\n\t\t`;\n\n\t\tconst btnNode = header.querySelector('.tasks-scrum__sprints--completed-btn');\n\t\tEvent.bind(btnNode, 'click', this.onBtnClick.bind(this));\n\n\t\treturn header;\n\t}\n\n\tonBtnClick(event)\n\t{\n\t\tconst node = event.currentTarget;\n\n\t\tconst isShown = node.classList.contains('--up');\n\n\t\tif (isShown)\n\t\t{\n\t\t\tDom.removeClass(node, '--up');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.addClass(node, '--up');\n\n\t\t\tconst listNode = this.node.querySelector('.tasks-scrum__sprints--completed-list');\n\n\t\t\tDom.addClass(listNode, '--visible');\n\n\t\t\tif (!this.sprintsUploaded)\n\t\t\t{\n\t\t\t\tthis.loader = this.showLoader();\n\t\t\t}\n\t\t}\n\n\t\tif (isShown)\n\t\t{\n\t\t\tthis.hideList();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.showList();\n\t\t}\n\n\t\tthis.onLoadStats();\n\t}\n\n\trenderList(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"tasks-scrum__sprints--completed-list\">\n\t\t\t\t${this.renderObserverTarget()}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\trenderObserverTarget(): HTMLElement\n\t{\n\t\treturn Tag.render`<div class=\"tasks-scrum-completed-sprints-observer-target\"></div>`;\n\t}\n\n\trenderStats(stats: Stats): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div>\n\t\t\t\t${Loc.getMessage('TASKS_SCRUM_COMPLETED_SPRINTS_STATS')\n\t\t\t\t\t.replace('#tasks#', parseInt(stats.averageNumberTasks, 10))\n\t\t\t\t\t.replace('#storypoints#', parseInt(stats.averageNumberStoryPoints, 10))\n\t\t\t\t\t.replace('#percent#', parseInt(stats.averagePercentageCompletion, 10))\n\t\t\t\t}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tbindLoad(loader: HTMLElement)\n\t{\n\t\tif (typeof IntersectionObserver === `undefined`)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst observer = new IntersectionObserver((entries) =>\n\t\t\t{\n\t\t\t\tif(entries[0].isIntersecting === true)\n\t\t\t\t{\n\t\t\t\t\tif (!this.isActiveLoad)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.onLoadCompletedSprints();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tthreshold: [0]\n\t\t\t}\n\t\t);\n\n\t\tobserver.observe(loader);\n\t}\n\n\tonLoadStats()\n\t{\n\t\tif (this.statsUploaded)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.requestSender.getCompletedSprintsStats()\n\t\t\t.then((response) => {\n\t\t\t\tthis.statsUploaded = true;\n\t\t\t\tthis.updateStats(response.data);\n\t\t\t})\n\t\t\t.catch((response) => {\n\t\t\t\tthis.requestSender.showErrorAlert(response);\n\t\t\t})\n\t\t;\n\t}\n\n\tonLoadCompletedSprints()\n\t{\n\t\tthis.isActiveLoad = true;\n\n\t\tif (this.sprintsUploaded)\n\t\t{\n\t\t\tthis.loader = this.showLoader();\n\t\t}\n\n\t\tconst requestData = {\n\t\t\tpageNumber: this.pageNumber\n\t\t};\n\n\t\tthis.requestSender.getCompletedSprints(requestData)\n\t\t\t.then((response) => {\n\t\t\t\tconst data = response.data;\n\t\t\t\tif (Type.isArray(data) && data.length)\n\t\t\t\t{\n\t\t\t\t\tthis.pageNumber++;\n\n\t\t\t\t\tthis.createSprints(data);\n\n\t\t\t\t\tthis.isActiveLoad = false;\n\n\t\t\t\t\tthis.showList();\n\t\t\t\t}\n\t\t\t\tthis.sprintsUploaded = true;\n\t\t\t\tif (this.loader)\n\t\t\t\t{\n\t\t\t\t\tthis.loader.hide();\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch((response) => {\n\t\t\t\tif (this.loader)\n\t\t\t\t{\n\t\t\t\t\tthis.loader.hide();\n\t\t\t\t}\n\t\t\t\tthis.isActiveLoad = false;\n\t\t\t\tthis.requestSender.showErrorAlert(response);\n\t\t\t})\n\t\t;\n\t}\n\n\tshowLoader(): Loader\n\t{\n\t\tconst listNode = this.node.querySelector('.tasks-scrum__sprints--completed-list');\n\n\t\tconst listPosition = Dom.getPosition(listNode);\n\n\t\tconst loader = new Loader({\n\t\t\ttarget: listNode,\n\t\t\tsize: 60,\n\t\t\tmode: 'inline',\n\t\t\toffset: {\n\t\t\t\tleft: `${(listPosition.width / 2 - 30)}px`\n\t\t\t}\n\t\t});\n\n\t\tloader.show();\n\n\t\treturn loader;\n\t}\n\n\tupdateStats(stats: Stats)\n\t{\n\t\tconst nameNode = this.node.querySelector('.tasks-scrum__sprints--completed-name');\n\t\tconst statsHeaderNode = this.node.querySelector('.tasks-scrum__sprints--completed-stats');\n\n\t\tnameNode.textContent = nameNode.textContent + '- ' + parseInt(stats.numberSprints, 10);\n\n\t\tDom.append(this.renderStats(stats), statsHeaderNode);\n\t}\n\n\tcreateSprints(sprints: Array)\n\t{\n\t\tconst listNode = this.node.querySelector('.tasks-scrum__sprints--completed-list');\n\n\t\tsprints.forEach((sprintData: SprintParams) => {\n\t\t\tsprintData.isShortView = 'Y';\n\t\t\tconst sprint = Sprint.buildSprint(sprintData);\n\n\t\t\tthis.entityStorage.addSprint(sprint);\n\n\t\t\tDom.insertBefore(\n\t\t\t\tsprint.render(),\n\t\t\t\tlistNode.querySelector('.tasks-scrum-completed-sprints-observer-target')\n\t\t\t);\n\t\t\tsprint.onAfterAppend();\n\n\t\t\tthis.emit('createSprint', sprint);\n\t\t});\n\t}\n\n\tshowList()\n\t{\n\t\tconst parentNode = this.node.querySelector('.tasks-scrum__sprints--completed');\n\t\tconst listNode = this.node.querySelector('.tasks-scrum__sprints--completed-list');\n\n\t\tDom.addClass(parentNode, '--open');\n\n\t\tlistNode.style.height = `${ listNode.scrollHeight }px`;\n\n\t\tthis.emit('adjustWidth');\n\t}\n\n\thideList()\n\t{\n\t\tconst parentNode = this.node.querySelector('.tasks-scrum__sprints--completed');\n\t\tconst listNode = this.node.querySelector('.tasks-scrum__sprints--completed-list');\n\n\t\tDom.removeClass(parentNode, '--open');\n\n\t\tlistNode.style.height = `${ listNode.scrollHeight }px`;\n\t\tlistNode.clientHeight;\n\t\tlistNode.style.height = '0';\n\t}\n\n\tonTransitionEnd()\n\t{\n\t\tconst listNode = this.node.querySelector('.tasks-scrum__sprints--completed-list');\n\n\t\tconst isHide = (listNode.style.height === '0px');\n\n\t\tif (isHide)\n\t\t{\n\t\t\tDom.removeClass(listNode, '--visible');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tlistNode.style.height = 'auto';\n\t\t}\n\n\t\tthis.emit('adjustWidth');\n\t}\n}","import {Dom, Event, Loc, Tag, Text, Type} from 'main.core';\nimport {BaseEvent, EventEmitter} from 'main.core.events';\n\nimport {EntityStorage} from '../../entity/entity.storage';\nimport {Sprint, SprintParams} from '../../entity/sprint/sprint';\n\nimport {RequestSender} from '../../utility/request.sender';\n\nimport {CompletedSprints} from './completed.sprints';\n\ntype Params = {\n\trequestSender: RequestSender,\n\tentityStorage: EntityStorage,\n\tdefaultSprintDuration: number,\n\tpageNumberToCompletedSprints: number,\n\tdisplayPriority: string,\n\tisShortView: 'Y' | 'N'\n}\n\nexport class PlanBuilder extends EventEmitter\n{\n\tconstructor(params: Params)\n\t{\n\t\tsuper(params);\n\n\t\tthis.setEventNamespace('BX.Tasks.Scrum.DomBuilder');\n\n\t\tthis.requestSender = params.requestSender;\n\t\tthis.entityStorage = params.entityStorage;\n\t\tthis.defaultSprintDuration = params.defaultSprintDuration;\n\t\tthis.pageNumberToCompletedSprints = params.pageNumberToCompletedSprints;\n\t\tthis.displayPriority = params.displayPriority;\n\t\tthis.isShortView = params.isShortView;\n\t}\n\n\trenderTo(container: HTMLElement)\n\t{\n\t\tthis.scrumContainer = container;\n\n\t\tthis.setWidthPriority(this.displayPriority);\n\n\t\tDom.append(this.entityStorage.getBacklog().render(), this.scrumContainer);\n\t\tthis.entityStorage.getBacklog().onAfterAppend();\n\n\t\tDom.append(this.renderSprintsContainer(), this.scrumContainer);\n\t\tthis.entityStorage.getSprints().forEach((sprint: Sprint) => {\n\t\t\tif (!sprint.isCompleted())\n\t\t\t{\n\t\t\t\tsprint.onAfterAppend();\n\t\t\t}\n\t\t});\n\n\t\tthis.emit('setDraggable');\n\n\t\tthis.adjustSprintListWidth();\n\t}\n\n\trenderSprintsContainer(): HTMLElement\n\t{\n\t\tthis.completedSprints = new CompletedSprints({\n\t\t\trequestSender: this.requestSender,\n\t\t\tentityStorage: this.entityStorage,\n\t\t\tpageNumber: this.pageNumberToCompletedSprints,\n\t\t\tisShortView: this.isShortView\n\t\t});\n\t\tthis.completedSprints.subscribe('createSprint', (baseEvent: BaseEvent) => {\n\t\t\tthis.emit('createSprint', baseEvent.getData());\n\t\t});\n\t\tthis.completedSprints.subscribe('adjustWidth', () => this.adjustSprintListWidth());\n\n\t\tconst activeSprint = this.entityStorage.getActiveSprint();\n\t\tconst plannedSprints = this.entityStorage.getPlannedSprints();\n\n\t\tthis.sprintsNode = Tag.render`\n\t\t\t<div class=\"tasks-scrum__sprints --scrollbar\">\n\t\t\t\t<div class=\"tasks-scrum__sprints--active ${activeSprint ? '' : '--empty'}\">\n\t\t\t\t\t${activeSprint ? activeSprint.render() : ''}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"tasks-scrum__sprints--planned ${plannedSprints.size ? '' : '--empty'}\">\n\t\t\t\t\t${[...plannedSprints.values()].map((sprint) => sprint.render())}\n\t\t\t\t</div>\n\t\t\t\t${this.renderSprintDropzone()}\n\t\t\t\t${this.entityStorage.existCompletedSprint() ? this.completedSprints.render() : ''}\n\t\t\t</div>\n\t\t`;\n\n\t\tthis.updatePlannedSprints(plannedSprints, !Type.isUndefined(activeSprint));\n\n\t\tEvent.bind(this.sprintsNode, 'scroll', this.onSprintsScroll.bind(this));\n\n\t\treturn this.sprintsNode;\n\t}\n\n\trenderSprintDropzone(): HTMLElement\n\t{\n\t\tthis.sprintDropzone = Tag.render`\n\t\t\t<div class=\"tasks-scrum__content\">\n\t\t\t\t<div class=\"tasks-scrum__sprints--new-sprint\">\n\t\t\t\t\t${Loc.getMessage('TASKS_SCRUM_PLAN_SPRINT_DROPZONE')}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\tEvent.bind(this.sprintDropzone, 'click', this.createSprint.bind(this));\n\n\t\treturn this.sprintDropzone;\n\t}\n\n\tsetWidthPriority(value: string)\n\t{\n\t\tif (value === 'backlog')\n\t\t{\n\t\t\tDom.addClass(this.scrumContainer, '--width-priority-backlog');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.removeClass(this.scrumContainer, '--width-priority-backlog');\n\t\t}\n\t}\n\n\tsetShortView(value: 'Y' | 'N')\n\t{\n\t\tthis.isShortView = value;\n\t}\n\n\tgetSprintsContainer(): HTMLElement\n\t{\n\t\treturn this.sprintsNode;\n\t}\n\n\tgetSprintDropzone(): HTMLElement\n\t{\n\t\treturn this.sprintDropzone;\n\t}\n\n\tisSprintDropzone(container: HTMLElement): boolean\n\t{\n\t\tif (container.firstElementChild)\n\t\t{\n\t\t\treturn container.firstElementChild.classList.contains('tasks-scrum__sprints--new-sprint');\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tcreateSprint(): Promise\n\t{\n\t\tconst countSprints = this.entityStorage.getSprints().size;\n\t\tconst title = Loc.getMessage('TASKS_SCRUM_SPRINT_NAME').replace('%s', countSprints + 1);\n\t\tconst storyPoints = '';\n\t\tconst dateStart = Math.floor(Date.now() / 1000);\n\t\tconst dateEnd = (Math.floor(Date.now() / 1000) + parseInt(this.defaultSprintDuration, 10));\n\t\tconst sort = this.entityStorage.getPlannedSprints().size + 1;\n\n\t\tconst requestData = {\n\t\t\ttmpId: Text.getRandom(),\n\t\t\tname: title,\n\t\t\tsort: sort + 1,\n\t\t\tdateStart: dateStart,\n\t\t\tdateEnd: dateEnd\n\t\t};\n\n\t\tthis.emit('beforeCreateSprint', requestData);\n\n\t\treturn this.requestSender.createSprint(requestData)\n\t\t\t.then((response) => {\n\t\t\t\tconst sprintParams: SprintParams = response.data;\n\t\t\t\tsprintParams.isShortView = this.isShortView;\n\t\t\t\tconst sprint = Sprint.buildSprint(sprintParams);\n\n\t\t\t\tthis.entityStorage.addSprint(sprint);\n\n\t\t\t\tthis.appendToPlannedContainer(sprint);\n\n\t\t\t\tthis.scrollToSprint(sprint);\n\n\t\t\t\tthis.emit('createSprint', sprint);\n\n\t\t\t\treturn sprint;\n\t\t\t})\n\t\t\t.catch((response) => {\n\t\t\t\tthis.requestSender.showErrorAlert(response);\n\t\t\t})\n\t\t;\n\t}\n\n\tcreateSprintNode(sprint: Sprint)\n\t{\n\t\tsprint.setShortView(this.isShortView);\n\n\t\tthis.entityStorage.addSprint(sprint);\n\n\t\tthis.appendToPlannedContainer(sprint);\n\n\t\tthis.emit('createSprintNode', sprint);\n\t}\n\n\tappendToPlannedContainer(sprint: Sprint)\n\t{\n\t\tconst container = this.getSprintsContainer().querySelector('.tasks-scrum__sprints--planned');\n\n\t\tDom.append(sprint.render(), container);\n\n\t\tDom.removeClass(container, '--empty');\n\n\t\tsprint.onAfterAppend();\n\n\t\tthis.adjustSprintListWidth();\n\n\t\tthis.updatePlannedSprints(\n\t\t\tthis.entityStorage.getPlannedSprints(),\n\t\t\t!Type.isUndefined(this.entityStorage.getActiveSprint())\n\t\t);\n\t}\n\n\tmoveSprintToActiveListNode(sprint: Sprint)\n\t{\n\t\tconst container = this.getSprintsContainer().querySelector('.tasks-scrum__sprints--active');\n\n\t\tDom.append(sprint.getNode(), container);\n\n\t\tDom.removeClass(container, '--empty');\n\n\t\tthis.updatePlannedSprints(this.entityStorage.getPlannedSprints(), true);\n\t}\n\n\tappendItemAfterItem(newItemNode: HTMLElement, bindItemNode: HTMLElement)\n\t{\n\t\tif (bindItemNode.nextElementSibling)\n\t\t{\n\t\t\tDom.insertBefore(newItemNode, bindItemNode.nextElementSibling);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.append(newItemNode, bindItemNode.parentElement);\n\t\t}\n\t}\n\n\tonSprintsScroll()\n\t{\n\t\tthis.emit('sprintsScroll');\n\t}\n\n\tadjustSprintListWidth()\n\t{\n\t\tconst hasScroll = this.getSprintsContainer().scrollHeight > this.getSprintsContainer().clientHeight;\n\n\t\tif (hasScroll)\n\t\t{\n\t\t\tDom.addClass(this.getSprintsContainer(), '--scrollbar');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.removeClass(this.getSprintsContainer(), '--scrollbar');\n\t\t}\n\t}\n\n\tscrollToSprint(sprint: Sprint)\n\t{\n\t\t// todo dynamic focus to sprint node (loadItems)\n\n\t\twindow.scrollTo({ top: 240, behavior: 'smooth' });\n\n\t\tconst sprintsContainer = this.getSprintsContainer();\n\t\tconst position = Dom.getRelativePosition(sprint.getNode(), sprintsContainer).bottom;\n\n\t\tsprintsContainer.scrollTo({\n\t\t\ttop: sprintsContainer.scrollTop + position,\n\t\t\tbehavior: 'smooth'\n\t\t});\n\t}\n\n\tupdatePlannedSprints(plannedSprints: Set<Sprint>, existActiveSprint: boolean)\n\t{\n\t\tif (existActiveSprint)\n\t\t{\n\t\t\tplannedSprints.forEach((plannedSprint: Sprint) => {\n\t\t\t\tplannedSprint.disableHeaderButton();\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tplannedSprints.forEach((plannedSprint: Sprint) => {\n\t\t\t\tplannedSprint.unDisableHeaderButton();\n\t\t\t});\n\t\t}\n\t}\n\n\tgetScrumContainer(): HTMLElement\n\t{\n\t\treturn this.scrumContainer;\n\t}\n\n\tblockScrumContainerSelect()\n\t{\n\t\tDom.addClass(this.scrumContainer, '--select-none');\n\t}\n\n\tunblockScrumContainerSelect()\n\t{\n\t\tDom.removeClass(this.scrumContainer, '--select-none');\n\t}\n}\n","import {Dom, Event, Loc, Tag} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\n\nimport {Entity} from './entity';\nimport {Item} from '../item/item';\n\nimport '../css/action-panel.css';\n\ntype Params = {\n\tentity: Entity,\n\titem: Item,\n\tbindElement: HTMLElement,\n\titemList: Object\n}\n\nexport class ActionPanel extends EventEmitter\n{\n\tconstructor(params: Params)\n\t{\n\t\tsuper(params);\n\n\t\tthis.setEventNamespace('BX.Tasks.Scrum.ActionPanel');\n\n\t\tthis.entity = params.entity;\n\t\tthis.item = params.item;\n\n\t\tthis.bindElement = this.item.getNode();\n\n\t\tthis.itemList = {...{\n\t\t\ttask: {activity: false},\n\t\t\tattachment: {activity: false},\n\t\t\tdod: {activity: false},\n\t\t\tmove: {activity: false},\n\t\t\tsprint: {activity: false},\n\t\t\tbacklog: {activity: false},\n\t\t\ttags: {activity: false},\n\t\t\tepic: {activity: false},\n\t\t\tdecomposition: {activity: false},\n\t\t\tremove: {activity: false},\n\t\t}, ...params.itemList};\n\n\t\tthis.node = null;\n\n\t\tthis.isBlockBlur = false;\n\n\t\tthis.observeBindElement();\n\t}\n\n\tshow()\n\t{\n\t\tthis.node = this.calculatePanelPosition(this.createActionPanel());\n\t\tthis.bindItems();\n\n\t\tDom.append(this.node, document.body);\n\t}\n\n\tdestroy()\n\t{\n\t\tDom.remove(this.node);\n\n\t\tthis.node = null;\n\n\t\tif (this.observer)\n\t\t{\n\t\t\tthis.observer.disconnect();\n\t\t}\n\t}\n\n\tgetNode(): HTMLElement\n\t{\n\t\treturn this.node;\n\t}\n\n\tgetItem(): Item\n\t{\n\t\treturn this.item;\n\t}\n\n\tcreateActionPanel()\n\t{\n\t\tlet task = '';\n\t\tlet attachment = '';\n\t\tlet dod = '';\n\t\tlet move = '';\n\t\tlet sprint = '';\n\t\tlet backlog = '';\n\t\tlet tags = '';\n\t\tlet epic = '';\n\t\tlet decomposition = '';\n\t\tlet remove = '';\n\n\t\tconst baseBtnClass = 'tasks-scrum__action-panel--btn';\n\t\tconst arrowClass = 'tasks-scrum__action-panel--btn-with-arrow';\n\n\t\tconst selected = Tag.render`\n\t\t\t<div class=\"tasks-scrum__action-panel--selected-btn tasks-scrum__action-panel--btn-selected\">\n\t\t\t\t<span class=\"tasks-scrum__action-panel--text\">\n\t\t\t\t\t${this.getSelectedText(this.entity.getGroupModeItems().size)}\n\t\t\t\t</span>\n\t\t\t\t<span class=\"tasks-scrum__action-panel--icon\"></span>\n\t\t\t</div>\n\t\t\t<div class=\"tasks-scrum__action-panel--separator\"></div>\n\t\t`;\n\n\t\tif (this.itemList.task.activity)\n\t\t{\n\t\t\tconst disableClass = this.itemList.task.disable === true ? '--disabled' : '';\n\n\t\t\ttask = Tag.render`\n\t\t\t\t<div class=\"${baseBtnClass} tasks-scrum__action-panel--btn-task ${disableClass}\">\n\t\t\t\t\t<span class=\"tasks-scrum__action-panel--icon\"></span>\n\t\t\t\t\t<span class=\"tasks-scrum__action-panel--text\">\n\t\t\t\t\t\t${Loc.getMessage('TASKS_SCRUM_ITEM_ACTIONS_TASK')}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"tasks-scrum__action-panel--separator\"></div>\n\t\t\t`;\n\t\t}\n\n\t\tif (this.itemList.attachment.activity)\n\t\t{\n\t\t\tconst disableClass = this.itemList.attachment.disable === true ? '--disabled' : '';\n\n\t\t\tattachment = Tag.render`\n\t\t\t\t<div class=\"${baseBtnClass} tasks-scrum__action-panel--btn-attachment ${disableClass}\">\n\t\t\t\t\t<span class=\"tasks-scrum__action-panel--icon\"></span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"tasks-scrum__action-panel--separator\"></div>\n\t\t\t`;\n\t\t}\n\n\t\tif (this.itemList.dod.activity)\n\t\t{\n\n\t\t\tconst disableClass = this.itemList.dod.disable === true ? '--disabled' : '';\n\n\t\t\tdod = Tag.render`\n\t\t\t\t<div class=\"${baseBtnClass} tasks-scrum__action-panel--btn-dod ${disableClass}\">\n\t\t\t\t\t<span class=\"tasks-scrum__action-panel--text\">\n\t\t\t\t\t\t${Loc.getMessage('TASKS_SCRUM_ITEM_ACTIONS_DOD')}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"tasks-scrum__action-panel--separator\"></div>\n\t\t\t`;\n\t\t}\n\n\t\tif (this.itemList.move.activity)\n\t\t{\n\t\t\tconst disableClass = this.itemList.move.disable === true ? '--disabled' : '';\n\n\t\t\tmove = Tag.render`\n\t\t\t\t<div class=\"${baseBtnClass} tasks-scrum__action-panel--btn-move ${arrowClass} ${disableClass}\">\n\t\t\t\t\t<span class=\"tasks-scrum__action-panel--text\">\n\t\t\t\t\t\t${Loc.getMessage('TASKS_SCRUM_ITEM_ACTIONS_MOVE')}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"tasks-scrum__action-panel--separator\"></div>\n\t\t\t`;\n\t\t}\n\n\t\tif (this.itemList.sprint.activity)\n\t\t{\n\t\t\tconst disableClass = this.itemList.sprint.disable === true ? '--disabled' : '';\n\n\t\t\tsprint = Tag.render`\n\t\t\t\t<div class=\"${baseBtnClass} tasks-scrum__action-panel--btn-sprint ${arrowClass} ${disableClass}\">\n\t\t\t\t\t<span class=\"tasks-scrum__action-panel--text\">\n\t\t\t\t\t\t${Loc.getMessage('TASKS_SCRUM_ITEM_ACTIONS_SPRINT')}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"tasks-scrum__action-panel--separator\"></div>\n\t\t\t`;\n\t\t}\n\n\t\tif (this.itemList.backlog.activity)\n\t\t{\n\t\t\tconst disableClass = this.itemList.backlog.disable === true ? '--disabled' : '';\n\n\t\t\tbacklog = Tag.render`\n\t\t\t\t<div class=\"${baseBtnClass} tasks-scrum__action-panel--btn-backlog ${disableClass}\">\n\t\t\t\t\t<span class=\"tasks-scrum__action-panel--text\">\n\t\t\t\t\t\t${Loc.getMessage('TASKS_SCRUM_ITEM_ACTIONS_BACKLOG')}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"tasks-scrum__action-panel--separator\"></div>\n\t\t\t`;\n\t\t}\n\n\t\tif (this.itemList.tags.activity)\n\t\t{\n\t\t\tconst disableClass = this.itemList.tags.disable === true ? '--disabled' : '';\n\n\t\t\ttags = Tag.render`\n\t\t\t\t<div class=\"${baseBtnClass} tasks-scrum__action-panel--btn-tags ${arrowClass} ${disableClass}\">\n\t\t\t\t\t<span class=\"tasks-scrum__action-panel--text\">\n\t\t\t\t\t\t${Loc.getMessage('TASKS_SCRUM_ITEM_ACTIONS_TAGS')}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"tasks-scrum__action-panel--separator\"></div>\n\t\t\t`;\n\t\t}\n\n\t\tif (this.itemList.epic.activity)\n\t\t{\n\t\t\tconst disableClass = this.itemList.epic.disable === true ? '--disabled' : '';\n\n\t\t\tepic = Tag.render`\n\t\t\t\t<div class=\"${baseBtnClass} tasks-scrum__action-panel--btn-epics ${arrowClass} ${disableClass}\">\n\t\t\t\t\t<span class=\"tasks-scrum__action-panel--text\">\n\t\t\t\t\t\t${Loc.getMessage('TASKS_SCRUM_ITEM_ACTIONS_EPIC')}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"tasks-scrum__action-panel--separator\"></div>\n\t\t\t`;\n\t\t}\n\n\t\tif (this.itemList.decomposition.activity)\n\t\t{\n\t\t\tconst disableClass = this.itemList.decomposition.disable === true ? '--disabled' : '';\n\n\t\t\tdecomposition = Tag.render`\n\t\t\t\t<div class=\"${baseBtnClass} tasks-scrum__action-panel--btn-decomposition ${disableClass}\">\n\t\t\t\t\t<span class=\"tasks-scrum__action-panel--icon\"></span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"tasks-scrum__action-panel--separator\"></div>\n\t\t\t`;\n\t\t}\n\n\t\tif (this.itemList.remove.activity)\n\t\t{\n\t\t\tconst disableClass = this.itemList.remove.disable === true ? '--disabled' : '';\n\n\t\t\tremove = Tag.render`\n\t\t\t\t<div class=\"${baseBtnClass} tasks-scrum__action-panel--btn-remove ${disableClass}\">\n\t\t\t\t\t<span class=\"tasks-scrum__action-panel--icon\"></span>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"tasks-scrum__action-panel--container tasks-scrum__action-panel--scope\" tabindex=\"1\">\n\t\t\t\t<div class=\"tasks-scrum__action-panel\">\n\t\t\t\t\t${selected}\n\t\t\t\t\t${task}\n\t\t\t\t\t${attachment}\n\t\t\t\t\t${dod}\n\t\t\t\t\t${move}\n\t\t\t\t\t${sprint}\n\t\t\t\t\t${backlog}\n\t\t\t\t\t${tags}\n\t\t\t\t\t${epic}\n\t\t\t\t\t${decomposition}\n\t\t\t\t\t${remove}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tbindItems()\n\t{\n\t\tconst selectedBtn = this.node.querySelector('.tasks-scrum__action-panel--btn-selected')\n\t\tEvent.bind(\n\t\t\tselectedBtn.querySelector('.tasks-scrum__action-panel--icon'),\n\t\t\t'click',\n\t\t\t() => this.emit('unSelect')\n\t\t);\n\n\t\tif (this.itemList.task.activity && this.itemList.task.disable !== true)\n\t\t{\n\t\t\tEvent.bind(\n\t\t\t\tthis.node.querySelector('.tasks-scrum__action-panel--btn-task'),\n\t\t\t\t'click',\n\t\t\t\tthis.itemList.task.callback\n\t\t\t);\n\t\t}\n\n\t\tif (this.itemList.attachment.activity && this.itemList.attachment.disable !== true)\n\t\t{\n\t\t\tEvent.bind(\n\t\t\t\tthis.node.querySelector('.tasks-scrum__action-panel--btn-attachment'),\n\t\t\t\t'click',\n\t\t\t\tthis.itemList.attachment.callback\n\t\t\t);\n\t\t}\n\n\t\tif (this.itemList.dod.activity && this.itemList.dod.disable !== true)\n\t\t{\n\t\t\tEvent.bind(\n\t\t\t\tthis.node.querySelector('.tasks-scrum__action-panel--btn-dod'),\n\t\t\t\t'click',\n\t\t\t\tthis.itemList.dod.callback\n\t\t\t);\n\t\t}\n\n\t\tif (this.itemList.move.activity && this.itemList.move.disable !== true)\n\t\t{\n\t\t\tEvent.bind(\n\t\t\t\tthis.node.querySelector('.tasks-scrum__action-panel--btn-move'),\n\t\t\t\t'click',\n\t\t\t\tthis.itemList.move.callback\n\t\t\t);\n\t\t}\n\n\t\tif (this.itemList.sprint.activity && this.itemList.sprint.disable !== true)\n\t\t{\n\t\t\tEvent.bind(\n\t\t\t\tthis.node.querySelector('.tasks-scrum__action-panel--btn-sprint'),\n\t\t\t\t'click',\n\t\t\t\tthis.itemList.sprint.callback\n\t\t\t);\n\t\t}\n\n\t\tif (this.itemList.backlog.activity && this.itemList.backlog.disable !== true)\n\t\t{\n\t\t\tEvent.bind(\n\t\t\t\tthis.node.querySelector('.tasks-scrum__action-panel--btn-backlog'),\n\t\t\t\t'click',\n\t\t\t\tthis.itemList.backlog.callback\n\t\t\t);\n\t\t}\n\n\t\tif (this.itemList.tags.activity && this.itemList.tags.disable !== true)\n\t\t{\n\t\t\tEvent.bind(\n\t\t\t\tthis.node.querySelector('.tasks-scrum__action-panel--btn-tags'),\n\t\t\t\t'click',\n\t\t\t\tthis.itemList.tags.callback\n\t\t\t);\n\t\t}\n\n\t\tif (this.itemList.epic.activity && this.itemList.epic.disable !== true)\n\t\t{\n\t\t\tEvent.bind(\n\t\t\t\tthis.node.querySelector('.tasks-scrum__action-panel--btn-epics'),\n\t\t\t\t'click',\n\t\t\t\tthis.itemList.epic.callback\n\t\t\t);\n\t\t}\n\n\t\tif (this.itemList.decomposition.activity && this.itemList.decomposition.disable !== true)\n\t\t{\n\t\t\tEvent.bind(\n\t\t\t\tthis.node.querySelector('.tasks-scrum__action-panel--btn-decomposition'),\n\t\t\t\t'click',\n\t\t\t\tthis.itemList.decomposition.callback\n\t\t\t);\n\t\t}\n\n\t\tif (this.itemList.remove.activity && this.itemList.remove.disable !== true)\n\t\t{\n\t\t\tEvent.bind(\n\t\t\t\tthis.node.querySelector('.tasks-scrum__action-panel--btn-remove'),\n\t\t\t\t'click',\n\t\t\t\tthis.itemList.remove.callback\n\t\t\t);\n\t\t}\n\t}\n\n\tgetSelectedText(number: number): string\n\t{\n\t\treturn Loc.getMessage('TASKS_SCRUM_ITEM_ACTIONS_SELECTED') + parseInt(number, 10);\n\t}\n\n\tobserveBindElement()\n\t{\n\t\tif (typeof IntersectionObserver === `undefined`)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.observer = new IntersectionObserver((entries) =>\n\t\t\t{\n\t\t\t\tif (entries[0].isIntersecting === true)\n\t\t\t\t{\n\t\t\t\t\tthis.displayPanel();\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.hidePanel();\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tthreshold: [0]\n\t\t\t}\n\t\t);\n\n\t\tthis.observer.observe(this.bindElement);\n\t}\n\n\tdisplayPanel()\n\t{\n\t\tif (!Dom.isShown(this.getNode()))\n\t\t{\n\t\t\tDom.style(this.getNode(), 'display', 'block');\n\t\t}\n\t}\n\n\thidePanel()\n\t{\n\t\tif (Dom.isShown(this.getNode()))\n\t\t{\n\t\t\tDom.style(this.getNode(), 'display', 'none');\n\t\t}\n\t}\n\n\tcalculatePanelPosition(panel: HTMLElement)\n\t{\n\t\tconst position = Dom.getPosition(this.bindElement);\n\n\t\tconst top = `${position.top}px`;\n\t\tlet left = `${position.left}px`;\n\n\t\tconst fakePanel = panel.cloneNode(true);\n\t\tfakePanel.style.visibility = 'hidden';\n\t\tfakePanel.style.top = `${position.top}px`;\n\t\tfakePanel.style.left = `${position.left}px`;\n\n\t\tDom.append(fakePanel, document.body);\n\t\tif (this.isPanelWiderThanViewport(fakePanel))\n\t\t{\n\t\t\tconst fakePanelRect = fakePanel.getBoundingClientRect();\n\t\t\tconst windowWidth = (window.innerWidth || document.documentElement.clientWidth);\n\t\t\tleft = `${fakePanelRect.left - (fakePanelRect.right - windowWidth + 40)}px`;\n\t\t}\n\t\tDom.remove(fakePanel);\n\n\t\tpanel.style.top = top;\n\t\tpanel.style.left = left;\n\t\tpanel.style.zIndex = 1100;\n\n\t\tthis.removeLastSeparator(panel);\n\n\t\treturn panel;\n\t}\n\n\tisPanelWiderThanViewport(element: HTMLElement): boolean\n\t{\n\t\tconst rect = element.getBoundingClientRect();\n\t\tconst windowWidth = (window.innerWidth || document.documentElement.clientWidth);\n\n\t\treturn (rect.right > windowWidth);\n\t}\n\n\tcalculatePanelTopPosition()\n\t{\n\t\tif (!this.getNode())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst position = Dom.getPosition(this.bindElement);\n\n\t\tthis.getNode().style.top = `${position.top}px`;\n\t}\n\n\tremoveLastSeparator(panel: HTMLElement)\n\t{\n\t\tconst actionPanel =  panel.querySelector('.tasks-scrum__action-panel');\n\t\tif (Dom.hasClass(actionPanel.lastElementChild, 'tasks-scrum__action-panel--separator'))\n\t\t{\n\t\t\tDom.remove(actionPanel.lastElementChild);\n\t\t}\n\t}\n}","import {Dom, Tag, Event} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\n\nimport {Item} from '../item/item';\n\nimport '../css/search.arrows.css';\n\ntype Params = {\n\tcurrentPosition: number,\n\tlist: Set<Item>\n}\n\nexport class SearchArrows extends EventEmitter\n{\n\tconstructor(params: Params)\n\t{\n\t\tsuper(params);\n\n\t\tthis.setEventNamespace('BX.Tasks.Scrum.SearchArrows');\n\n\t\tthis.list = params.list;\n\n\t\tthis.currentPosition = parseInt(params.currentPosition, 10);\n\n\t\tthis.node = null;\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tthis.node = Tag.render`\n\t\t\t<div class=\"tasks-scrum__item--nav-linked tasks-scrum__scope\">\n\t\t\t\t<div class=\"tasks-scrum__item--nav-linked-close\"></div>\n\t\t\t\t<div class=\"tasks-scrum__item--nav-linked-block\">\n\t\t\t\t\t<div class=\"tasks-scrum__item--nav-linked-prev\"></div>\n\t\t\t\t\t<div class=\"tasks-scrum__item--nav-linked-num-container --visible\">\n\t\t\t\t\t<div class=\"tasks-scrum__item--nav-linked-num\">${this.currentPosition}/${this.list.size}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"tasks-scrum__item--nav-linked-next\"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\tconst closeBtn = this.node.querySelector('.tasks-scrum__item--nav-linked-close');\n\t\tconst prevBtn = this.node.querySelector('.tasks-scrum__item--nav-linked-prev');\n\t\tconst nextBtn = this.node.querySelector('.tasks-scrum__item--nav-linked-next');\n\n\t\tEvent.bind(closeBtn, 'click', this.onClose.bind(this));\n\t\tEvent.bind(prevBtn, 'click', this.onPrev.bind(this));\n\t\tEvent.bind(nextBtn, 'click', this.onNext.bind(this));\n\n\t\treturn this.node;\n\t}\n\n\tgetNode(): HTMLElement\n\t{\n\t\treturn this.node;\n\t}\n\n\tupdateCurrentPosition(value: number)\n\t{\n\t\tthis.currentPosition = parseInt(value, 10);\n\n\t\tif (this.node)\n\t\t{\n\t\t\tthis.node.querySelector('.tasks-scrum__item--nav-linked-num')\n\t\t\t\t.textContent = `${this.currentPosition}/${this.list.size}`\n\t\t\t;\n\t\t}\n\t}\n\n\tremove()\n\t{\n\t\tDom.remove(this.node);\n\n\t\tthis.node = null;\n\t}\n\n\tonClose()\n\t{\n\t\tthis.emit('close');\n\t}\n\n\tonPrev()\n\t{\n\t\tthis.emit('prev');\n\t}\n\n\tonNext()\n\t{\n\t\tthis.emit('next');\n\t}\n}\n","import {Dom} from 'main.core';\n\nimport {EntityStorage} from '../entity/entity.storage';\n\nimport {Item} from '../item/item';\nimport {PlanBuilder} from \"../view/plan/plan.builder\";\n\ntype Params = {\n\tplanBuilder: PlanBuilder,\n\tentityStorage: EntityStorage\n}\n\nexport class Scroller\n{\n\tconstructor(params: Params)\n\t{\n\t\tthis.planBuilder = params.planBuilder;\n\t\tthis.entityStorage = params.entityStorage;\n\t}\n\n\tscrollToItem(item: Item)\n\t{\n\t\tif (this.isItemInViewport(item))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst offset = 112;\n\n\t\tif (this.isBacklogItem(item))\n\t\t{\n\t\t\tconst scrollContainer = this.entityStorage.getBacklog().getListItemsNode();\n\n\t\t\tconst itemTopPosition = Dom.getRelativePosition(item.getNode(), scrollContainer).top;\n\n\t\t\tscrollContainer.scrollTo({\n\t\t\t\ttop: scrollContainer.scrollTop + itemTopPosition - offset,\n\t\t\t\tbehavior: 'smooth'\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tconst sprintsContainer = this.planBuilder.getSprintsContainer()\n\n\t\t\tconst itemTopPosition = Dom.getRelativePosition(item.getNode(), sprintsContainer).top;\n\n\t\t\tsprintsContainer.scrollTo({\n\t\t\t\ttop: sprintsContainer.scrollTop + itemTopPosition - offset,\n\t\t\t\tbehavior: 'smooth'\n\t\t\t});\n\t\t}\n\t}\n\n\tisItemInViewport(item: Item): boolean\n\t{\n\t\tconst rect = item.getNode().getBoundingClientRect();\n\n\t\treturn (\n\t\t\trect.top >= 0\n\t\t\t&& rect.left >= 0\n\t\t\t&& rect.bottom <= (window.innerHeight || document.documentElement.clientHeight)\n\t\t\t&& rect.right <= (window.innerWidth || document.documentElement.clientWidth)\n\t\t);\n\t}\n\n\tisBacklogItem(item: Item): boolean\n\t{\n\t\treturn this.entityStorage.getBacklog().hasItem(item);\n\t}\n}","import {Dom} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\n\nimport {PlanBuilder} from '../view/plan/plan.builder';\n\nimport {Sprint} from './sprint/sprint';\nimport {EntityStorage} from './entity.storage';\nimport {SearchArrows} from './search.arrows';\n\nimport {Item} from '../item/item';\n\nimport {Scroller} from '../utility/scroller';\n\ntype Params = {\n\tplanBuilder: PlanBuilder,\n\tentityStorage: EntityStorage\n}\n\nexport class SearchItems extends EventEmitter\n{\n\tconstructor(params: Params)\n\t{\n\t\tsuper(params);\n\n\t\tthis.setEventNamespace('BX.Tasks.Scrum.SearchItems');\n\n\t\tthis.planBuilder = params.planBuilder;\n\t\tthis.entityStorage = params.entityStorage;\n\n\t\tthis.scroller = new Scroller({\n\t\t\tplanBuilder: this.planBuilder,\n\t\t\tentityStorage: this.entityStorage\n\t\t});\n\n\t\tthis.active = false;\n\n\t\tthis.list = new Set();\n\n\t\tthis.currentIndex = 0;\n\n\t\tthis.arrows = null;\n\t}\n\n\tstart(startItem: Item, linkedItemIds: Array<number>)\n\t{\n\t\tthis.active = true;\n\n\t\tthis.setList(linkedItemIds);\n\n\t\tthis.fadeOutAll();\n\n\t\tif (!this.isBacklogItem(startItem))\n\t\t{\n\t\t\tthis.scroller.scrollToItem(this.getCurrent());\n\t\t}\n\n\t\tif (!startItem.isDisabled())\n\t\t{\n\t\t\tthis.updateCurrentIndexByItem(startItem);\n\n\t\t\tthis.activateCurrent(startItem);\n\t\t}\n\n\t\tthis.list.forEach((item: Item) => {\n\t\t\titem.activateLinkedMode();\n\t\t});\n\n\t\tthis.showArrows();\n\t}\n\n\tstop()\n\t{\n\t\tthis.active = false;\n\n\t\tthis.currentIndex = 0;\n\n\t\tthis.fadeInAll();\n\n\t\tthis.cleanList();\n\t\tthis.removeArrows();\n\t}\n\n\tsetList(linkedItemIds: Array<number>)\n\t{\n\t\tthis.list = new Set();\n\n\t\tconst items = this.entityStorage.getAllItems();\n\n\t\tlinkedItemIds.forEach((itemId: number) => {\n\t\t\tif (items.has(itemId))\n\t\t\t{\n\t\t\t\tthis.list.add(items.get(itemId));\n\t\t\t}\n\t\t});\n\t}\n\n\tisActive(): boolean\n\t{\n\t\treturn this.active;\n\t}\n\n\tisBacklogItem(item: Item): boolean\n\t{\n\t\treturn this.entityStorage.getBacklog().hasItem(item);\n\t}\n\n\tgetCurrent(): Item\n\t{\n\t\treturn [...this.list.values()][this.currentIndex];\n\t}\n\n\tupdateCurrentIndexByItem(inputItem: Item)\n\t{\n\t\tthis.deactivateCurrent(this.getCurrent());\n\n\t\t[...this.list.values()].forEach((item: Item, index: number) => {\n\t\t\tif (inputItem.getId() === item.getId())\n\t\t\t{\n\t\t\t\tthis.currentIndex = index;\n\t\t\t}\n\t\t});\n\n\t\tthis.updateArrows();\n\t}\n\n\tmoveToPrev()\n\t{\n\t\tthis.deactivateCurrent(this.getCurrent());\n\n\t\tthis.currentIndex--;\n\n\t\tif (this.currentIndex < 0)\n\t\t{\n\t\t\tthis.currentIndex = (this.list.size - 1);\n\t\t}\n\n\t\tthis.updateArrows();\n\n\t\tconst currentItem = this.getCurrent();\n\n\t\tthis.scroller.scrollToItem(currentItem);\n\n\t\tthis.activateCurrent(currentItem);\n\t}\n\n\tmoveToNext()\n\t{\n\t\tthis.deactivateCurrent(this.getCurrent());\n\n\t\tthis.currentIndex++;\n\n\t\tif (this.currentIndex === this.list.size)\n\t\t{\n\t\t\tthis.currentIndex = 0;\n\t\t}\n\n\t\tthis.updateArrows();\n\n\t\tconst currentItem = this.getCurrent();\n\n\t\tthis.scroller.scrollToItem(currentItem);\n\n\t\tthis.activateCurrent(currentItem);\n\t}\n\n\tactivateCurrent(item: Item)\n\t{\n\t\titem.activateCurrentLinkedMode(item);\n\t}\n\n\tdeactivateCurrent()\n\t{\n\t\tthis.list.forEach((item: Item) => {\n\t\t\titem.deactivateCurrentLinkedMode();\n\t\t});\n\t}\n\n\tfadeOutAll()\n\t{\n\t\tthis.entityStorage.getBacklog().fadeOut();\n\t\tthis.entityStorage.getBacklog().setActiveLoadItems(true);\n\n\t\tconst activeSprint = this.entityStorage.getActiveSprint();\n\t\tif (activeSprint)\n\t\t{\n\t\t\tactiveSprint.fadeOut();\n\t\t\tactiveSprint.setActiveLoadItems(true);\n\n\t\t\tif (activeSprint.isHideContent())\n\t\t\t{\n\t\t\t\tactiveSprint.toggleVisibilityContent(activeSprint.getContentContainer());\n\t\t\t}\n\t\t}\n\n\t\tthis.entityStorage.getPlannedSprints()\n\t\t\t.forEach((sprint: Sprint) => {\n\t\t\t\tsprint.fadeOut();\n\t\t\t\tsprint.setActiveLoadItems(true);\n\t\t\t\tif (sprint.isHideContent())\n\t\t\t\t{\n\t\t\t\t\tsprint.toggleVisibilityContent(sprint.getContentContainer());\n\t\t\t\t}\n\t\t\t})\n\t\t;\n\t}\n\n\tfadeInAll()\n\t{\n\t\tthis.entityStorage.getBacklog().fadeIn();\n\n\t\tconst activeSprint = this.entityStorage.getActiveSprint();\n\t\tif (activeSprint)\n\t\t{\n\t\t\tactiveSprint.fadeIn();\n\t\t}\n\n\t\tthis.entityStorage.getPlannedSprints()\n\t\t\t.forEach((sprint: Sprint) => {\n\t\t\t\tsprint.fadeIn();\n\t\t\t})\n\t\t;\n\t}\n\n\tdeactivateGroupMode()\n\t{\n\t\tthis.entityStorage.getBacklog().deactivateGroupMode();\n\n\t\tconst activeSprint = this.entityStorage.getActiveSprint();\n\t\tif (activeSprint)\n\t\t{\n\t\t\tactiveSprint.deactivateGroupMode();\n\t\t}\n\n\t\tthis.entityStorage.getPlannedSprints()\n\t\t\t.forEach((sprint: Sprint) => {\n\t\t\t\tsprint.deactivateGroupMode();\n\t\t\t})\n\t\t;\n\t}\n\n\tshowArrows()\n\t{\n\t\tthis.arrows = new SearchArrows({\n\t\t\tcurrentPosition: this.currentIndex + 1,\n\t\t\tlist: this.list\n\t\t});\n\n\t\tthis.arrows.subscribe('close', this.stop.bind(this));\n\t\tthis.arrows.subscribe('prev', this.moveToPrev.bind(this));\n\t\tthis.arrows.subscribe('next', this.moveToNext.bind(this));\n\n\t\tDom.append(this.arrows.render(), document.body);\n\n\t\tthis.adjustArrowsPosition();\n\t}\n\n\tupdateArrows()\n\t{\n\t\tif (this.arrows)\n\t\t{\n\t\t\tthis.arrows.updateCurrentPosition(this.currentIndex + 1);\n\t\t}\n\t}\n\n\tadjustArrowsPosition()\n\t{\n\t\tconst arrowsRect = Dom.getPosition(this.arrows.getNode());\n\t\tconst backlogRect = Dom.getPosition(this.entityStorage.getBacklog().getNode());\n\n\t\tthis.arrows.getNode().style.top = `${(backlogRect.height / 2) + (backlogRect.top - arrowsRect.height)}px`;\n\t\tthis.arrows.getNode().style.left = `${backlogRect.left - ((arrowsRect.width / 2) + 16)}px`;\n\t}\n\n\tcleanList()\n\t{\n\t\tthis.list.forEach((item: Item) => item.deactivateLinkedMode());\n\n\t\tthis.list = new Set();\n\t}\n\n\tremoveArrows()\n\t{\n\t\tthis.arrows.remove();\n\t}\n\n\tisClickInside(node: HTMLElement): boolean\n\t{\n\t\tlet isClickInside = false;\n\n\t\tconst backlog = this.entityStorage.getBacklog();\n\n\t\tif (backlog.getNode().contains(node))\n\t\t{\n\t\t\tisClickInside = true;\n\t\t}\n\n\t\tconst activeSprint = this.entityStorage.getActiveSprint();\n\t\tif (activeSprint && activeSprint.getNode().contains(node))\n\t\t{\n\t\t\tisClickInside = true;\n\t\t}\n\n\t\tif (this.arrows && this.arrows.getNode().contains(node))\n\t\t{\n\t\t\tisClickInside = true;\n\t\t}\n\n\t\tthis.entityStorage.getPlannedSprints()\n\t\t\t.forEach((sprint: Sprint) => {\n\t\t\t\tif (sprint.getNode().contains(node))\n\t\t\t\t{\n\t\t\t\t\tisClickInside = true;\n\t\t\t\t}\n\t\t\t})\n\t\t;\n\n\t\treturn isClickInside;\n\t}\n}","import {BaseEvent} from 'main.core.events';\n\nimport {PlanBuilder} from '../../view/plan/plan.builder';\n\nimport {EntityStorage} from '../entity.storage';\nimport {Sprint} from './sprint';\n\nimport {RequestSender} from '../../utility/request.sender';\n\ntype Params = {\n\trequestSender: RequestSender,\n\tplanBuilder: PlanBuilder,\n\tentityStorage: EntityStorage\n}\n\nexport class SprintMover\n{\n\tconstructor(params: Params)\n\t{\n\t\tthis.requestSender = params.requestSender;\n\t\tthis.planBuilder = params.planBuilder;\n\t\tthis.entityStorage = params.entityStorage;\n\n\t\tthis.bindHandlers();\n\t}\n\n\tbindHandlers()\n\t{\n\t\tthis.planBuilder.subscribe('setDraggable', this.onSetDraggable.bind(this));\n\n\t\t//this.planBuilder.subscribe('sprintMove', this.onSprintMove.bind(this))\n\t}\n\n\tonSetDraggable(baseEvent: BaseEvent)\n\t{\n\t\t// this.draggableSprints = new Draggable({\n\t\t// \tcontainer: this.sprintsNode.querySelector('.tasks-scrum__sprints--planned'),\n\t\t// \tdraggable: '.tasks-scrum-sprint',\n\t\t// \tdragElement: '.tasks-scrum-sprint-dragndrop',\n\t\t// \ttype: Draggable.DROP_PREVIEW,\n\t\t// });\n\t\t// this.draggableSprints.subscribe('end', (baseEvent) => {\n\t\t// \tconst dragEndEvent = baseEvent.getData();\n\t\t// \tthis.emit('sprintMove', dragEndEvent);\n\t\t// });\n\t}\n\n\tonSprintMove(baseEvent: BaseEvent)\n\t{\n\t\tconst dragEndEvent = baseEvent.getData();\n\t\tif (!dragEndEvent.endContainer)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.requestSender.updateSprintSort({\n\t\t\tsortInfo: this.calculateSprintSort()\n\t\t}).catch((response) => {\n\t\t\tthis.requestSender.showErrorAlert(response);\n\t\t});\n\t}\n\n\tcalculateSprintSort(increment = 0)\n\t{\n\t\tconst listSortInfo = {};\n\n\t\tconst sprints = this.entityStorage.getPlannedSprints();\n\n\t\tlet sort = 1 + increment;\n\t\tsprints.forEach((sprint: Sprint) => {\n\t\t\tsprint.setSort(sort);\n\t\t\tlistSortInfo[sprint.getId()] = {\n\t\t\t\tsort: sort\n\t\t\t};\n\t\t\tsort++;\n\t\t});\n\n\t\treturn listSortInfo;\n\t}\n}","import {SidePanel} from '../../service/side.panel';\nimport {BaseEvent, EventEmitter} from 'main.core.events';\n\nimport {Sprint} from './sprint';\n\ntype Params = {\n\tgroupId: number,\n\tsidePanel: SidePanel,\n\tviews: {\n\t\tplan: {\n\t\t\tname: string,\n\t\t\turl: string,\n\t\t\tactive: boolean\n\t\t},\n\t\tactiveSprint: {\n\t\t\tname: string,\n\t\t\turl: string,\n\t\t\tactive: boolean\n\t\t},\n\t\tcompletedSprint: {\n\t\t\tname: string,\n\t\t\turl: string,\n\t\t\tactive: boolean\n\t\t}\n\t}\n};\n\nexport class SprintSidePanel extends EventEmitter\n{\n\tconstructor(params: Params)\n\t{\n\t\tsuper(params);\n\n\t\tthis.sidePanel = params.sidePanel;\n\t\tthis.groupId = parseInt(params.groupId, 10);\n\t\tthis.views = params.views;\n\t}\n\n\tshowStartForm(sprint: Sprint)\n\t{\n\t\tthis.sidePanel.showByExtension(\n\t\t\t'Sprint-Start-Form',\n\t\t\t{\n\t\t\t\tgroupId: this.groupId,\n\t\t\t\tsprintId: sprint.getId()\n\t\t\t}\n\t\t)\n\t\t\t.then((extension) => {\n\t\t\t\tif (extension)\n\t\t\t\t{\n\t\t\t\t\textension.subscribe('afterStart', (baseEvent: BaseEvent) => {\n\t\t\t\t\t\tlocation.href = this.views['activeSprint'].url;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t})\n\t\t;\n\t}\n\n\tshowCompletionForm()\n\t{\n\t\tthis.sidePanel.showByExtension(\n\t\t\t'Sprint-Completion-Form',\n\t\t\t{ groupId: this.groupId }\n\t\t)\n\t\t\t.then((extension) => {\n\t\t\t\tif (extension)\n\t\t\t\t{\n\t\t\t\t\textension.subscribe('afterComplete', (baseEvent: BaseEvent) => {\n\t\t\t\t\t\tlocation.href = this.views['plan'].url;\n\t\t\t\t\t});\n\t\t\t\t\textension.subscribe('taskClick', (baseEvent: BaseEvent) => {\n\t\t\t\t\t\tthis.emit('showTask', baseEvent.getData());\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t})\n\t\t;\n\t}\n\n\tshowBurnDownChart(sprint: Sprint)\n\t{\n\t\tthis.sidePanel.showByExtension(\n\t\t\t'Burn-Down-Chart',\n\t\t\t{\n\t\t\t\tgroupId: this.groupId,\n\t\t\t\tsprintId: sprint.getId()\n\t\t\t}\n\t\t);\n\t}\n}\n","import {EntityStorage} from '../entity/entity.storage';\n\nimport {Backlog} from '../entity/backlog/backlog';\nimport {Sprint} from '../entity/sprint/sprint';\n\nimport {RequestSender} from '../utility/request.sender';\n\ntype Params = {\n\trequestSender: RequestSender,\n\tentityStorage: EntityStorage\n}\n\nexport class EntityCounters\n{\n\tconstructor(params: Params)\n\t{\n\t\tthis.requestSender = params.requestSender;\n\t\tthis.entityStorage = params.entityStorage;\n\t}\n\n\tupdateCounters(entities: Map<number, Backlog|Sprint>)\n\t{\n\t\tconst requestData = {\n\t\t\tentityIds: [...entities.keys()]\n\t\t};\n\n\t\tthis.requestSender.getEntityCounters(requestData)\n\t\t\t.then((response) => {\n\t\t\t\tObject.keys(response.data).forEach((entityId: number) => {\n\t\t\t\t\tentityId = parseInt(entityId, 10);\n\t\t\t\t\tconst entity = entities.get(entityId);\n\t\t\t\t\tconst counters = response.data[entityId];\n\t\t\t\t\tentity.setStoryPoints(counters.storyPoints);\n\t\t\t\t\tentity.setNumberTasks(counters.numberTasks);\n\t\t\t\t\tif (entity.isActive())\n\t\t\t\t\t{\n\t\t\t\t\t\tentity.setCompletedStoryPoints(counters.completedStoryPoints);\n\t\t\t\t\t\tentity.setUncompletedStoryPoints(counters.uncompletedStoryPoints);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t})\n\t\t\t.catch((response) => {\n\t\t\t\tthis.requestSender.showErrorAlert(response);\n\t\t\t})\n\t\t;\n\t}\n}","import {Loc, Type, Text, Dom} from 'main.core';\nimport {BaseEvent, EventEmitter} from 'main.core.events';\nimport {Menu} from 'main.popup';\nimport {MessageBox} from 'ui.dialogs.messagebox';\nimport {Draggable} from 'ui.draganddrop.draggable';\n\nimport {PlanBuilder} from '../view/plan/plan.builder';\n\nimport {EntityStorage} from '../entity/entity.storage';\nimport {Entity} from '../entity/entity';\nimport {Sprint} from '../entity/sprint/sprint';\n\nimport {Item} from './item';\n\nimport {EntityCounters} from '../counters/entity.counters';\n\nimport {RequestSender} from '../utility/request.sender';\nimport {Scroller} from \"../utility/scroller\";\n\nexport type ItemsSortInfo = {\n\t[id: number]: {\n\t\tsort: number,\n\t\tentityId?: number,\n\t\tupdatedItemId?: number\n\t}\n}\n\ntype Params = {\n\trequestSender: RequestSender,\n\tplanBuilder: PlanBuilder,\n\tentityStorage: EntityStorage,\n\tentityCounters: EntityCounters\n}\n\nexport class ItemMover extends EventEmitter\n{\n\tconstructor(params: Params)\n\t{\n\t\tsuper(params);\n\n\t\tthis.setEventNamespace('BX.Tasks.Scrum.ItemMover');\n\n\t\tthis.requestSender = params.requestSender;\n\t\tthis.planBuilder = params.planBuilder;\n\t\tthis.entityStorage = params.entityStorage;\n\t\tthis.entityCounters = params.entityCounters;\n\n\t\tthis.scroller = new Scroller({\n\t\t\tplanBuilder: this.planBuilder,\n\t\t\tentityStorage: this.entityStorage\n\t\t});\n\n\t\tthis.bindHandlers();\n\t}\n\n\tbindHandlers()\n\t{\n\t\tthis.planBuilder.subscribe('setDraggable', this.onSetDraggable.bind(this));\n\t\tthis.planBuilder.subscribe('createSprintNode', (baseEvent: BaseEvent) => {\n\t\t\tconst sprint = baseEvent.getData();\n\t\t\tthis.draggableItems.addContainer(sprint.getListItemsNode());\n\t\t\tthis.draggableItems.addDropzone(sprint.getDropzone());\n\t\t});\n\t}\n\n\tonSetDraggable(baseEvent: BaseEvent)\n\t{\n\t\tconst backlog = this.entityStorage.getBacklog();\n\n\t\tconst containers = [\n\t\t\tbacklog.getListItemsNode()\n\t\t];\n\t\tconst dropZones = [\n\t\t\tbacklog.getDropzone(),\n\t\t\tthis.planBuilder.getSprintDropzone()\n\t\t];\n\n\t\tthis.entityStorage.getSprints().forEach((sprint) => {\n\t\t\tif (!sprint.isDisabled())\n\t\t\t{\n\t\t\t\tcontainers.push(sprint.getListItemsNode());\n\n\t\t\t\tif (sprint.getDropzone())\n\t\t\t\t{\n\t\t\t\t\tdropZones.push(sprint.getDropzone());\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tthis.draggableItems = new Draggable({\n\t\t\tcontainer: containers,\n\t\t\tdropzone: dropZones,\n\t\t\tdraggable: '.tasks-scrum__item--drag',\n\t\t\tdragElement: '.tasks-scrum__item',\n\t\t\ttype: Draggable.DROP_PREVIEW,\n\t\t\tdelay: 300\n\t\t});\n\n\t\tthis.draggableItems.subscribe('beforeStart', this.onBeforeDragStart.bind(this));\n\t\tthis.draggableItems.subscribe('start', this.onDragStart.bind(this));\n\t\tthis.draggableItems.subscribe('end', this.onDragEnd.bind(this));\n\n\t\tthis.draggableItems.subscribe('drop', this.onDropEnd.bind(this));\n\n\t\tthis.draggableItems.subscribe('container:enter', this.onDragContainerEnter.bind(this));\n\t\tthis.draggableItems.subscribe('container:out', this.onDragContainerOut.bind(this));\n\t\tthis.draggableItems.subscribe('out', this.onDragOut.bind(this));\n\t}\n\n\tonBeforeDragStart(baseEvent: BaseEvent)\n\t{\n\t\tconst dragBeforeStartEvent = baseEvent.getData();\n\n\t\tif (!dragBeforeStartEvent.source)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst itemId = parseInt(dragBeforeStartEvent.source.dataset.id, 10);\n\n\t\tconst item = this.entityStorage.findItemByItemId(itemId);\n\n\t\tif (item.isSubTask() || item.isDisabled())\n\t\t{\n\t\t\tbaseEvent.preventDefault();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (item.isShownSubTasks())\n\t\t\t{\n\t\t\t\titem.hideSubTasks();\n\t\t\t}\n\n\t\t\tthis.entityStorage.getAllEntities()\n\t\t\t\t.forEach((entity: Entity) => {\n\t\t\t\t\tentity.deactivateGroupMode();\n\t\t\t\t\tentity.getItems()\n\t\t\t\t\t\t.forEach((entityItem: Item) => {\n\t\t\t\t\t\t\tif (entityItem.isShownSubTasks())\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tentityItem.hideSubTasks();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t;\n\t\t\t\t\t// todo add group mode\n\t\t\t\t\t// entity.getItems().forEach((item: Item) => {\n\t\t\t\t\t// \tentity.removeItemFromGroupMode(item);\n\t\t\t\t\t// });\n\t\t\t\t})\n\t\t\t;\n\n\t\t\tthis.emit('dragStart');\n\t\t}\n\t}\n\n\tonDragStart(baseEvent: BaseEvent)\n\t{\n\t\tthis.planBuilder.blockScrumContainerSelect();\n\n\t\tconst dragStartEvent = baseEvent.getData();\n\n\t\tconst sourceContainer = dragStartEvent.sourceContainer;\n\t\tconst sourceEntityId = parseInt(sourceContainer.dataset.entityId, 10);\n\n\t\tconst sourceEntity = this.entityStorage.findEntityByEntityId(sourceEntityId);\n\n\t\tif (!sourceEntity.isBacklog())\n\t\t{\n\t\t\tconst backlog = this.entityStorage.getBacklog();\n\t\t\tif (backlog.isEmpty())\n\t\t\t{\n\t\t\t\tbacklog.showDropzone();\n\t\t\t\tbacklog.hideBlank();\n\t\t\t}\n\t\t}\n\t}\n\n\tonDragEnd(baseEvent: BaseEvent)\n\t{\n\t\tthis.planBuilder.unblockScrumContainerSelect();\n\n\t\tconst dragEndEvent = baseEvent.getData();\n\n\t\tconst sourceContainer = dragEndEvent.sourceContainer;\n\t\tconst endContainer = dragEndEvent.endContainer;\n\t\tif (!endContainer)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst sourceEntityId = parseInt(sourceContainer.dataset.entityId, 10);\n\t\tconst endEntityId = parseInt(endContainer.dataset.entityId, 10);\n\n\t\tconst sourceEntity = this.entityStorage.findEntityByEntityId(sourceEntityId);\n\t\tconst endEntity = this.entityStorage.findEntityByEntityId(endEntityId);\n\n\t\tif (sourceEntity && endEntity)\n\t\t{\n\t\t\tconst itemNode = dragEndEvent.source;\n\t\t\tconst itemId = parseInt(itemNode.dataset.id, 10);\n\n\t\t\tconst item = this.entityStorage.findItemByItemId(itemId);\n\t\t\tif (item)\n\t\t\t{\n\t\t\t\tthis.onItemMove(item, sourceEntity, endEntity);\n\t\t\t}\n\n\t\t\tsourceEntity.adjustListItemsWidth();\n\t\t\tendEntity.adjustListItemsWidth();\n\t\t}\n\n\t\tif (!sourceEntity.isBacklog())\n\t\t{\n\t\t\tconst backlog = this.entityStorage.getBacklog();\n\t\t\tif (backlog.isEmpty())\n\t\t\t{\n\t\t\t\tbacklog.showDropzone();\n\t\t\t}\n\t\t}\n\n\t\tthis.planBuilder.adjustSprintListWidth();\n\t}\n\n\tonDropEnd(baseEvent: BaseEvent)\n\t{\n\t\tconst dragDropEvent = baseEvent.getData();\n\n\t\tconst dropzone = dragDropEvent.dropzone;\n\n\t\tconst sourceContainer = dragDropEvent.sourceContainer;\n\n\t\tconst sourceEntityId = parseInt(sourceContainer.dataset.entityId, 10);\n\t\tconst endEntityId = parseInt(dropzone.dataset.entityId, 10);\n\n\t\tconst sourceEntity = this.entityStorage.findEntityByEntityId(sourceEntityId);\n\t\tconst endEntity = this.entityStorage.findEntityByEntityId(endEntityId);\n\n\t\tconst itemNode = dragDropEvent.source;\n\t\tconst itemId = parseInt(itemNode.dataset.id, 10);\n\n\t\tconst item = this.entityStorage.findItemByItemId(itemId);\n\n\t\tif (this.planBuilder.isSprintDropzone(dropzone))\n\t\t{\n\t\t\tthis.planBuilder.createSprint()\n\t\t\t\t.then((sprint: Sprint) => {\n\t\t\t\t\tthis.addSprintContainers(sprint);\n\t\t\t\t\tthis.moveTo(sourceEntity, sprint, item);\n\t\t\t\t})\n\t\t\t;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (sourceEntity && endEntity)\n\t\t\t{\n\t\t\t\tconst itemNode = dragDropEvent.source;\n\t\t\t\tconst itemId = parseInt(itemNode.dataset.id, 10);\n\n\t\t\t\tconst item = this.entityStorage.findItemByItemId(itemId);\n\t\t\t\tif (item)\n\t\t\t\t{\n\t\t\t\t\tthis.onItemMove(item, sourceEntity, endEntity, true);\n\t\t\t\t}\n\n\t\t\t\tsourceEntity.adjustListItemsWidth();\n\t\t\t\tendEntity.adjustListItemsWidth();\n\t\t\t}\n\n\t\t\tthis.planBuilder.adjustSprintListWidth();\n\t\t}\n\n\t\tif (!sourceEntity.isBacklog())\n\t\t{\n\t\t\tconst backlog = this.entityStorage.getBacklog();\n\t\t\tif (backlog.isEmpty())\n\t\t\t{\n\t\t\t\tbacklog.showDropzone();\n\t\t\t}\n\t\t}\n\t}\n\n\taddSprintContainers(sprint: Sprint)\n\t{\n\t\tif (!sprint.isDisabled())\n\t\t{\n\t\t\tthis.draggableItems.addContainer(sprint.getListItemsNode());\n\t\t\tthis.draggableItems.addDropzone(sprint.getDropzone());\n\t\t}\n\t}\n\n\tonDragContainerEnter(baseEvent: BaseEvent)\n\t{\n\t\tconst dragEnterContainerEvent = baseEvent.getData();\n\n\t\tconst sourceContainer = dragEnterContainerEvent.sourceContainer;\n\t\tconst enterContainer = dragEnterContainerEvent.enter;\n\n\t\tconst dropPreview = this.draggableItems.getDropPreview();\n\n\t\tconst width = sourceContainer.isEqualNode(enterContainer)\n\t\t\t? parseInt(dropPreview.style.width, 10)\n\t\t\t: enterContainer.clientWidth\n\t\t;\n\n\t\tDom.style(dropPreview, {\n\t\t\twidth: `${width}px`,\n\t\t\ttop: `${parseInt(dropPreview.style.top, 10) + enterContainer.scrollTop}px`\n\t\t});\n\t}\n\n\tonDragContainerOut(baseEvent: BaseEvent)\n\t{\n\t\tconst dragOutContainerEvent = baseEvent.getData();\n\n\t\tconst dropPreview = this.draggableItems.getDropPreview();\n\n\t\tDom.style(dropPreview, {\n\t\t\twidth: dragOutContainerEvent.out.clientWidth + `px`\n\t\t});\n\t}\n\n\tonDragOut(baseEvent: BaseEvent)\n\t{\n\t\tconst dragOutEvent = baseEvent.getData();\n\n\t\tif (Type.isUndefined(dragOutEvent.outContainer))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst dropPreview = this.draggableItems.getDropPreview();\n\n\t\tDom.style(dropPreview, {\n\t\t\twidth: `${dragOutEvent.out.offsetWidth}px`,\n\t\t\theight: `${dragOutEvent.out.offsetHeight}px`,\n\t\t\ttop: `${parseInt(dropPreview.style.top, 10) + dragOutEvent.outContainer.scrollTop}px`\n\t\t});\n\t}\n\n\tonItemMove(item: Item, sourceEntity: Entity, endEntity: Entity, insertDom: false)\n\t{\n\t\tif (sourceEntity.getId() === endEntity.getId())\n\t\t{\n\t\t\tthis.moveInCurrentContainer(item, sourceEntity);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tconst message = Loc.getMessage('TASKS_SCRUM_CONFIRM_TEXT_MOVE_TASK_FROM_ACTIVE');\n\n\t\t\tthis.onMoveConfirm(sourceEntity, message)\n\t\t\t\t.then(() => {\n\t\t\t\t\tif (insertDom)\n\t\t\t\t\t{\n\t\t\t\t\t\tDom.insertBefore(item.getNode(), endEntity.getLoaderNode());\n\t\t\t\t\t}\n\t\t\t\t\tthis.moveInAnotherContainer(item, sourceEntity, endEntity);\n\t\t\t\t})\n\t\t\t\t.catch(() => {\n\t\t\t\t\tDom.insertBefore(\n\t\t\t\t\t\titem.getNode(),\n\t\t\t\t\t\tsourceEntity.getListItemsNode().children[item.getSort()]\n\t\t\t\t\t);\n\t\t\t\t})\n\t\t\t;\n\t\t}\n\t}\n\n\tonMoveItemUpdate(entityFrom: Entity, entityTo: Entity, item: Item)\n\t{\n\t\tthis.requestSender.updateItem({\n\t\t\titemId: item.getId(),\n\t\t\tentityId: entityTo.getId(),\n\t\t\tsourceEntityId: entityFrom.getId(),\n\t\t\tfromActiveSprint: ((entityFrom.getEntityType() === 'sprint' && entityFrom.isActive()) ? 'Y' : 'N'),\n\t\t\ttoActiveSprint: ((entityTo.getEntityType() === 'sprint' && entityTo.isActive()) ? 'Y' : 'N'),\n\t\t\tsortInfo: {\n\t\t\t\t...this.calculateSort(entityTo.getListItemsNode(), new Set([item.getId()]), true),\n\t\t\t\t...this.calculateSort(entityFrom.getListItemsNode(), new Set(), true)\n\t\t\t}\n\t\t})\n\t\t\t.then(() => {\n\t\t\t\tthis.updateEntityCounters(entityFrom, entityTo);\n\t\t\t})\n\t\t\t.catch((response) => {\n\t\t\t\tthis.requestSender.showErrorAlert(response);\n\t\t\t});\n\t}\n\n\tonMoveConfirm(entity: Entity, message: string): Promise\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tif (entity.isActive())\n\t\t\t{\n\t\t\t\tMessageBox.confirm(\n\t\t\t\t\tmessage,\n\t\t\t\t\t(messageBox) => {\n\t\t\t\t\t\tmessageBox.close();\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t},\n\t\t\t\t\tLoc.getMessage('TASKS_SCRUM_BUTTON_TEXT_MOVE'),\n\t\t\t\t\t(messageBox) => {\n\t\t\t\t\t\tmessageBox.close();\n\t\t\t\t\t\treject();\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresolve();\n\t\t\t}\n\t\t});\n\t}\n\n\tmoveItem(item: Item, button)\n\t{\n\t\tconst entity = this.entityStorage.findEntityByItemId(item.getId());\n\n\t\tconst listToMove = [];\n\n\t\tif (!entity.isFirstItem(item))\n\t\t{\n\t\t\tlistToMove.push({\n\t\t\t\ttext: Loc.getMessage('TASKS_SCRUM_ITEM_ACTIONS_MOVE_UP'),\n\t\t\t\tonclick: (event, menuItem) => {\n\t\t\t\t\tconst groupModeItems = entity.getGroupModeItems();\n\n\t\t\t\t\tconst sortedItems = [...groupModeItems.values()].sort((first: Item, second: Item) => {\n\t\t\t\t\t\tif (first.getSort() < second.getSort()) return 1;\n\t\t\t\t\t\tif (first.getSort() > second.getSort()) return -1;\n\t\t\t\t\t});\n\t\t\t\t\tconst sortedItemsIds = new Set();\n\n\t\t\t\t\tsortedItems.forEach((groupModeItem: Item) => {\n\t\t\t\t\t\tsortedItemsIds.add(groupModeItem.getId());\n\t\t\t\t\t\tif (groupModeItem.isParentTask() && groupModeItem.isShownSubTasks())\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tgroupModeItem.hideSubTasks();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.moveItemToUp(groupModeItem, entity.getListItemsNode(), false);\n\t\t\t\t\t\tgroupModeItem.activateBlinking();\n\t\t\t\t\t});\n\n\t\t\t\t\tthis.scroller.scrollToItem(sortedItems.values().next().value);\n\n\t\t\t\t\tthis.requestSender.updateItemSort({\n\t\t\t\t\t\tsortInfo: this.calculateSort(entity.getListItemsNode(), sortedItemsIds)\n\t\t\t\t\t}).catch((response) => {\n\t\t\t\t\t\tthis.requestSender.showErrorAlert(response);\n\t\t\t\t\t});\n\n\t\t\t\t\tentity.deactivateGroupMode();\n\n\t\t\t\t\tmenuItem.getMenuWindow().close();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tif (!entity.isLastItem(item))\n\t\t{\n\t\t\tlistToMove.push({\n\t\t\t\ttext: Loc.getMessage('TASKS_SCRUM_ITEM_ACTIONS_MOVE_DOWN'),\n\t\t\t\tonclick: (event, menuItem) => {\n\t\t\t\t\tconst groupModeItems = entity.getGroupModeItems();\n\n\t\t\t\t\tconst sortedItems = [...groupModeItems.values()].sort((first: Item, second: Item) => {\n\t\t\t\t\t\tif (first.getSort() > second.getSort()) return 1;\n\t\t\t\t\t\tif (first.getSort() < second.getSort()) return -1;\n\t\t\t\t\t});\n\n\t\t\t\t\tconst sortedItemsIds = new Set();\n\t\t\t\t\tsortedItems.forEach((groupModeItem: Item) => {\n\t\t\t\t\t\tsortedItemsIds.add(groupModeItem.getId());\n\t\t\t\t\t\tif (groupModeItem.isParentTask() && groupModeItem.isShownSubTasks())\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tgroupModeItem.hideSubTasks();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.moveItemToDown(groupModeItem, entity.getListItemsNode(), false);\n\t\t\t\t\t\tgroupModeItem.activateBlinking();\n\t\t\t\t\t});\n\n\t\t\t\t\tthis.scroller.scrollToItem(sortedItems.values().next().value);\n\n\t\t\t\t\tthis.requestSender.updateItemSort({\n\t\t\t\t\t\tsortInfo: this.calculateSort(entity.getListItemsNode(), sortedItemsIds)\n\t\t\t\t\t}).catch((response) => {\n\t\t\t\t\t\tthis.requestSender.showErrorAlert(response);\n\t\t\t\t\t});\n\n\t\t\t\t\tentity.deactivateGroupMode();\n\n\t\t\t\t\tmenuItem.getMenuWindow().close();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tthis.showMoveItemMenu(item, button, listToMove);\n\t}\n\n\tmoveItemToUp(item: Item, listItemsNode, updateSort = true)\n\t{\n\t\tDom.insertBefore(item.getNode(), listItemsNode.firstElementChild);\n\n\t\tif (updateSort)\n\t\t{\n\t\t\tthis.updateItemsSort(item, listItemsNode);\n\t\t}\n\t}\n\n\tmoveItemToDown(item, listItemsNode, updateSort = true)\n\t{\n\t\tDom.insertBefore(item.getNode(), listItemsNode.lastElementChild);\n\n\t\tif (updateSort)\n\t\t{\n\t\t\tthis.updateItemsSort(item, listItemsNode);\n\t\t}\n\t}\n\n\tupdateItemsSort(item: Item, listItemsNode: HTMLElement)\n\t{\n\t\tthis.requestSender.updateItem({\n\t\t\titemId: item.getId(),\n\t\t\tsortInfo: {\n\t\t\t\t...this.calculateSort(listItemsNode, new Set([item.getId()]))\n\t\t\t}\n\t\t}).catch((response) => {\n\t\t\tthis.requestSender.showErrorAlert(response);\n\t\t});\n\t}\n\n\tmoveInCurrentContainer(item: Item, entity: Entity)\n\t{\n\t\tthis.requestSender.updateItemSort({\n\t\t\tsortInfo: this.calculateSort(\n\t\t\t\tentity.getListItemsNode(),\n\t\t\t\tnew Set([item.getId()])\n\t\t\t)\n\t\t}).catch((response) => {\n\t\t\tthis.requestSender.showErrorAlert(response);\n\t\t});\n\t}\n\n\tmoveInAnotherContainer(item: Item, sourceEntity: Entity, endEntity: Entity)\n\t{\n\t\tthis.moveItemFromEntityToEntity(item, sourceEntity, endEntity);\n\n\t\tthis.requestSender.updateItemSort({\n\t\t\tentityId: endEntity.getId(),\n\t\t\titemId: item.getId(),\n\t\t\tsourceEntityId: sourceEntity.getId(),\n\t\t\tfromActiveSprint: (\n\t\t\t\t(sourceEntity.getEntityType() === 'sprint' && sourceEntity.isActive())\n\t\t\t\t\t? 'Y'\n\t\t\t\t\t: 'N'\n\t\t\t),\n\t\t\ttoActiveSprint: (\n\t\t\t\t(endEntity.getEntityType() === 'sprint' && endEntity.isActive())\n\t\t\t\t\t? 'Y'\n\t\t\t\t\t: 'N'\n\t\t\t),\n\t\t\tsortInfo: this.calculateSort(\n\t\t\t\tendEntity.getListItemsNode(),\n\t\t\t\tnew Set([item.getId()]), true\n\t\t\t)\n\t\t})\n\t\t\t.then(() => this.updateEntityCounters(sourceEntity, endEntity))\n\t\t\t.catch((response) => this.requestSender.showErrorAlert(response))\n\t\t;\n\t}\n\n\tupdateEntityCounters(sourceEntity: Entity, endEntity?: Entity)\n\t{\n\t\tconst entities = new Map();\n\n\t\tentities.set(sourceEntity.getId(), sourceEntity);\n\t\tif (endEntity)\n\t\t{\n\t\t\tentities.set(endEntity.getId(), endEntity);\n\t\t}\n\n\t\tthis.entityCounters.updateCounters(entities);\n\t}\n\n\tcalculateSort(container, updatedItemsIds?: Set, moveToAnotherEntity = false): ItemsSortInfo\n\t{\n\t\tconst listSortInfo = {};\n\n\t\tconst items = [...container.querySelectorAll('[data-sort]')];\n\t\tlet sort = 1;\n\t\titems.forEach((itemNode) => {\n\t\t\tconst itemId = parseInt(itemNode.dataset.id, 10);\n\t\t\tconst item = this.entityStorage.findItemByItemId(itemId);\n\t\t\tif (item && !item.isSubTask())\n\t\t\t{\n\t\t\t\tconst tmpId = Text.getRandom();\n\t\t\t\tlet isSortUpdated = (sort !== item.getSort());\n\t\t\t\titem.setSort(sort);\n\t\t\t\tlistSortInfo[itemId] = {\n\t\t\t\t\tsort: sort\n\t\t\t\t};\n\t\t\t\tif (moveToAnotherEntity)\n\t\t\t\t{\n\t\t\t\t\tlistSortInfo[itemId].entityId = container.dataset.entityId;\n\t\t\t\t\tisSortUpdated = true;\n\t\t\t\t}\n\t\t\t\tif (isSortUpdated && updatedItemsIds && updatedItemsIds.has(itemId))\n\t\t\t\t{\n\t\t\t\t\tlistSortInfo[itemId].tmpId = tmpId;\n\t\t\t\t\tlistSortInfo[itemId].updatedItemId = itemId;\n\t\t\t\t}\n\t\t\t\titemNode.dataset.sort = sort;\n\n\t\t\t\tsort++;\n\t\t\t}\n\t\t});\n\n\t\tthis.emit('calculateSort', listSortInfo);\n\n\t\treturn listSortInfo;\n\t}\n\n\tmoveToAnotherEntity(entityFrom: Entity, item: Item, targetEntity: ?Entity, bindButton?: HTMLElement)\n\t{\n\t\tconst isMoveToSprint = (Type.isNull(targetEntity));\n\n\t\tconst sprints = (isMoveToSprint ? this.entityStorage.getSprintsAvailableForFilling(entityFrom) : null);\n\n\t\tif (isMoveToSprint)\n\t\t{\n\t\t\tif (sprints.size > 1)\n\t\t\t{\n\t\t\t\tthis.showListSprintsToMove(entityFrom, item, bindButton);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (sprints.size === 0)\n\t\t\t\t{\n\t\t\t\t\tthis.planBuilder.createSprint().then((sprint: Sprint) => {\n\t\t\t\t\t\tthis.moveToWithGroupMode(entityFrom, sprint, item, true, false);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tsprints.forEach((sprint: Sprint) => {\n\t\t\t\t\t\tthis.moveToWithGroupMode(entityFrom, sprint, item, true, false);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tconst message = Loc.getMessage('TASKS_SCRUM_CONFIRM_TEXT_MOVE_TASKS_FROM_ACTIVE');\n\n\t\t\tthis.onMoveConfirm(entityFrom, message)\n\t\t\t\t.then(() => {\n\t\t\t\t\tthis.moveToWithGroupMode(entityFrom, targetEntity, item, false, false);\n\t\t\t\t})\n\t\t\t\t.catch(() => {})\n\t\t\t;\n\t\t}\n\t}\n\n\tmoveToWithGroupMode(entityFrom: Entity, entityTo: Entity, item: Item, after = true, update = true)\n\t{\n\t\tconst groupModeItems = entityFrom.getGroupModeItems();\n\n\t\tif (!groupModeItems.has(item.getId()))\n\t\t{\n\t\t\tgroupModeItems.set(item.getId(), item);\n\t\t}\n\n\t\tconst sortedItems = [...groupModeItems.values()].sort((first: Item, second: Item) => {\n\t\t\tif (after)\n\t\t\t{\n\t\t\t\tif (first.getSort() > second.getSort()) return 1;\n\t\t\t\tif (first.getSort() < second.getSort()) return -1;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (first.getSort() < second.getSort()) return 1;\n\t\t\t\tif (first.getSort() > second.getSort()) return -1;\n\t\t\t}\n\t\t});\n\n\t\tconst items = [];\n\t\tconst sortedItemsIds = new Set();\n\n\t\tsortedItems.forEach((groupModeItem: Item) => {\n\t\t\tthis.moveTo(entityFrom, entityTo, groupModeItem, after, update);\n\t\t\tsortedItemsIds.add(groupModeItem.getId());\n\t\t\titems.push({\n\t\t\t\titemId: groupModeItem.getId(),\n\t\t\t\tentityId: entityTo.getId(),\n\t\t\t\tsourceEntityId: entityFrom.getId(),\n\t\t\t\tfromActiveSprint: ((entityFrom.getEntityType() === 'sprint' && entityFrom.isActive()) ? 'Y' : 'N'),\n\t\t\t\ttoActiveSprint: ((entityTo.getEntityType() === 'sprint' && entityTo.isActive()) ? 'Y' : 'N')\n\t\t\t});\n\t\t\tgroupModeItem.activateBlinking();\n\t\t});\n\n\t\tthis.scroller.scrollToItem(sortedItems.values().next().value);\n\n\t\tthis.requestSender.updateItems({\n\t\t\titems: items,\n\t\t\tsortInfo: {\n\t\t\t\t...this.calculateSort(entityTo.getListItemsNode(), sortedItemsIds, true),\n\t\t\t\t...this.calculateSort(entityFrom.getListItemsNode(), new Set(), true)\n\t\t\t}\n\t\t})\n\t\t\t.then(() => {\n\t\t\t\tthis.updateEntityCounters(entityFrom, entityTo);\n\t\t\t})\n\t\t\t.catch((response) => {\n\t\t\t\tthis.requestSender.showErrorAlert(response);\n\t\t\t})\n\t\t;\n\n\t\tentityFrom.deactivateGroupMode();\n\t\tentityTo.deactivateGroupMode();\n\t}\n\n\tmoveTo(entityFrom: Entity, entityTo: Entity, item: Item, after = true, update = true)\n\t{\n\t\tconst itemNode = item.getNode();\n\t\tconst entityListNode = entityTo.getListItemsNode();\n\n\t\tif (item.isParentTask() && item.isShownSubTasks())\n\t\t{\n\t\t\titem.hideSubTasks();\n\t\t}\n\n\t\tif (after)\n\t\t{\n\t\t\tDom.insertBefore(itemNode, entityListNode.lastElementChild);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.insertBefore(itemNode, entityListNode.firstElementChild);\n\t\t}\n\n\t\tthis.moveItemFromEntityToEntity(item, entityFrom, entityTo);\n\n\t\tif (update)\n\t\t{\n\t\t\tthis.onMoveItemUpdate(entityFrom, entityTo, item);\n\t\t}\n\t}\n\n\tmoveToPosition(entityFrom: Entity, entityTo: Entity, item: Item)\n\t{\n\t\tconst isMoveFromAnotherEntity = (entityFrom.getId() !== entityTo.getId());\n\n\t\tconst itemNode = item.getNode() ? item.getNode() : item.render();\n\t\tconst itemSort = item.getSort();\n\t\tconst itemPreviousSortSort = item.getPreviousSort();\n\n\t\tconst entityListNode = entityTo.getListItemsNode();\n\t\tconst bindItemNode = entityListNode.children[itemSort - 1];\n\n\t\tif (Dom.hasClass(bindItemNode, 'tasks-scrum__item'))\n\t\t{\n\t\t\tconst bindItemSort = parseInt(bindItemNode.dataset.sort, 10);\n\n\t\t\tif (itemPreviousSortSort > 0 && bindItemSort >= itemPreviousSortSort)\n\t\t\t{\n\t\t\t\tif (isMoveFromAnotherEntity)\n\t\t\t\t{\n\t\t\t\t\tDom.insertBefore(itemNode, bindItemNode);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.planBuilder.appendItemAfterItem(itemNode, bindItemNode);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tDom.insertBefore(itemNode, bindItemNode);\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (entityTo.isEmpty())\n\t\t\t{\n\t\t\t\tDom.insertBefore(itemNode, entityTo.getLoaderNode());\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (entityTo.isBacklog())\n\t\t\t\t{\n\t\t\t\t\tDom.insertBefore(itemNode, entityTo.getFirstItemNode());\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tDom.insertBefore(itemNode, entityTo.getLoaderNode());\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.moveItemFromEntityToEntity(item, entityFrom, entityTo);\n\n\t\tthis.updateEntityCounters(entityFrom, entityTo);\n\t}\n\n\tmoveItemFromEntityToEntity(item: Item, entityFrom: Entity, entityTo: Entity)\n\t{\n\t\tentityFrom.removeItem(item);\n\n\t\titem.setParentEntity(entityTo.getId(), entityTo.getEntityType());\n\n\t\tentityTo.setItem(item);\n\t}\n\n\tshowListSprintsToMove(entityFrom: Entity, item: Item, button: HTMLElement)\n\t{\n\t\tconst id = `item-sprint-action-${entityFrom.getEntityType() + entityFrom.getId() + item.getId()}`;\n\n\t\tif (this.moveToSprintMenu)\n\t\t{\n\t\t\tthis.moveToSprintMenu.getPopupWindow().destroy();\n\t\t}\n\n\t\tthis.moveToSprintMenu = new Menu({\n\t\t\tid: id,\n\t\t\tbindElement: button,\n\t\t\toffsetTop: 12,\n\t\t\toffsetLeft: -32\n\t\t});\n\n\t\tthis.entityStorage.getSprints().forEach((sprint) => {\n\t\t\tif (!sprint.isCompleted() && !this.isSameSprint(entityFrom, sprint))\n\t\t\t{\n\t\t\t\tthis.moveToSprintMenu.addMenuItem({\n\t\t\t\t\ttext: sprint.getName(),\n\t\t\t\t\tonclick: (event, menuItem) => {\n\t\t\t\t\t\tlet message = Loc.getMessage('TASKS_SCRUM_CONFIRM_TEXT_MOVE_TASK_FROM_ACTIVE');\n\t\t\t\t\t\tif (entityFrom.isGroupMode())\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tmessage = Loc.getMessage('TASKS_SCRUM_CONFIRM_TEXT_MOVE_TASKS_FROM_ACTIVE');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.onMoveConfirm(entityFrom, message)\n\t\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\t\tthis.moveToWithGroupMode(entityFrom, sprint, item, true, false);\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.catch(() => {})\n\t\t\t\t\t\t;\n\t\t\t\t\t\tmenuItem.getMenuWindow().close();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\tthis.moveToSprintMenu.getPopupWindow().subscribe('onClose', () => {\n\t\t\tthis.moveToSprintMenu.destroy();\n\t\t\tthis.moveToSprintMenu = null;\n\t\t\tthis.emit('moveToSprintMenuClose');\n\t\t});\n\n\t\tthis.moveToSprintMenu.show();\n\t}\n\n\tisSameSprint(first: Sprint, second: Sprint): boolean\n\t{\n\t\treturn (first.getEntityType() === 'sprint' && first.getId() === second.getId());\n\t}\n\n\tshowMoveItemMenu(item, button, listToMove)\n\t{\n\t\tconst id = `item-move-${item.getId()}`;\n\n\t\tif (this.moveItemMenu)\n\t\t{\n\t\t\tthis.moveItemMenu.getPopupWindow().destroy();\n\t\t}\n\n\t\tthis.moveItemMenu = new Menu({\n\t\t\tid: id,\n\t\t\tbindElement: button,\n\t\t\toffsetTop: 12,\n\t\t\toffsetLeft: -28\n\t\t});\n\n\t\tlistToMove.forEach((item) => {\n\t\t\tthis.moveItemMenu.addMenuItem(item);\n\t\t});\n\n\t\tthis.moveItemMenu.getPopupWindow().subscribe('onClose', () => {\n\t\t\tthis.moveItemMenu.destroy();\n\t\t\tthis.moveItemMenu = null;\n\t\t\tthis.emit('moveMenuClose');\n\t\t});\n\n\t\tthis.moveItemMenu.show();\n\t}\n\n\thasActionPanelDialog(): boolean\n\t{\n\t\treturn (this.moveItemMenu || this.moveToSprintMenu)\n\t}\n}\n","import {Item} from './item';\n\nimport {Entity} from '../entity/entity';\nimport {EntityStorage} from '../entity/entity.storage';\n\nimport {RequestSender} from '../utility/request.sender';\n\ntype Params = {\n\trequestSender: RequestSender,\n\tentityStorage: EntityStorage\n}\n\nexport class ItemDesigner\n{\n\tconstructor(params: Params)\n\t{\n\t\tthis.requestSender = params.requestSender;\n\t\tthis.entityStorage = params.entityStorage;\n\n\t\tthis.listAllUsedColors = new Set();\n\n\t\tthis.randomColorCount = 0;\n\t\tthis.defaultColor = '#2ECEFF';\n\t}\n\n\tgetRandomColorForItemBorder(): Promise\n\t{\n\t\tthis.randomColorCount = 0;\n\n\t\treturn this.getAllUsedColors().then(() => {\n\t\t\treturn this.getRandomColor(this.getAllColors());\n\t\t});\n\t}\n\n\tgetAllColors(): Array\n\t{\n\t\treturn [\n\t\t\t'#2ECEFF', '#10E5FC', '#A5DE00', '#EEC202',\n\t\t\t'#AD8F47', '#FF5B55', '#EF3001', '#F968B6',\n\t\t\t'#6B52CC', '#07BAB1', '#5CD1DF', '#A1A6AC',\n\t\t\t'#949DA9', '#01A64C', '#B02FB0', '#EF008B',\n\t\t\t'#0202FF', '#555555', '#C4C4C4', '#AAAAAA',\n\t\t\t'#F89675', '#C5E099', '#7ECB9C', '#78CDCA',\n\t\t\t'#887FC0', '#BD8AC0', '#F6989C', '#F26A47',\n\t\t\t'#ABD46B', '#00BBB4', '#3FB2CD', '#5471B9',\n\t\t\t'#3E8BCD', '#A861AB', '#F26A7B', '#9E0402',\n\t\t\t'#A46200', '#578520', '#01736A', '#0175A6',\n\t\t\t'#033172', '#460763', '#630260', '#9F0137',\n\t\t\t'#B7EB81', '#FFA900', '#F7A700', '#333333',\n\t\t\t'#EDEEF0', '#E1F3F9'\n\t\t];\n\t}\n\n\tgetRandomColor(allColors: Array): string\n\t{\n\t\tthis.randomColorCount++;\n\n\t\tif (this.randomColorCount >= allColors.length)\n\t\t{\n\t\t\treturn this.defaultColor;\n\t\t}\n\n\t\tconst randomColor = allColors[Math.floor(Math.random() * allColors.length)];\n\n\t\tif (this.isThisBorderColorAlreadyUse(randomColor))\n\t\t{\n\t\t\treturn this.getRandomColor(allColors);\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn randomColor;\n\t\t}\n\t}\n\n\tisThisBorderColorAlreadyUse(color: string): boolean\n\t{\n\t\tlet isAlreadyUse = false;\n\n\t\tthis.listAllUsedColors\n\t\t\t.forEach((usedColor: string) => {\n\t\t\t\tif (usedColor === color)\n\t\t\t\t{\n\t\t\t\t\tisAlreadyUse = true;\n\t\t\t\t}\n\t\t\t})\n\t\t;\n\n\t\treturn isAlreadyUse;\n\t}\n\n\tgetAllUsedColors(): Promise\n\t{\n\t\tconst entityIds = new Set();\n\t\tthis.entityStorage.getAllEntities()\n\t\t\t.forEach((entity: Entity) => {\n\t\t\t\tif (!entity.isCompleted())\n\t\t\t\t{\n\t\t\t\t\tentityIds.add(entity.getId());\n\t\t\t\t}\n\t\t\t})\n\t\t;\n\n\t\treturn this.requestSender.getAllUsedItemBorderColors({\n\t\t\tentityIds: [...entityIds.values()]\n\t\t})\n\t\t\t.then((response) => {\n\t\t\t\tthis.listAllUsedColors = new Set(response.data);\n\t\t\t})\n\t\t\t.catch((response) => {\n\t\t\t\tthis.requestSender.showErrorAlert(response);\n\t\t\t})\n\t\t;\n\t}\n\n\tupdateBorderColor(items: Set<Item>)\n\t{\n\t\tconst itemIdsToUpdateColor = new Set();\n\n\t\titems.forEach((item: Item) => {\n\t\t\tif (item.isLinkedTask() && !item.getBorderColor())\n\t\t\t{\n\t\t\t\titemIdsToUpdateColor.add(item.getId());\n\t\t\t}\n\t\t});\n\n\t\tif (itemIdsToUpdateColor.size)\n\t\t{\n\t\t\tthis.getAllUsedColors().then(() => {\n\t\t\t\tconst items = new Map();\n\t\t\t\titemIdsToUpdateColor.forEach((itemId: number) => {\n\t\t\t\t\titems.set(itemId, this.getRandomColor(this.getAllColors()));\n\t\t\t\t});\n\n\t\t\t\tthis.requestSender.updateBorderColorToLinkedItems({\n\t\t\t\t\titems: Object.fromEntries(items)\n\t\t\t\t})\n\t\t\t\t\t.then((response) => {\n\t\t\t\t\t\tconst updatedItems = response.data;\n\t\t\t\t\t\tObject.keys(updatedItems).forEach((itemId: number) => {\n\t\t\t\t\t\t\tconst borderColor = updatedItems[itemId];\n\t\t\t\t\t\t\tconst item = this.entityStorage.findItemByItemId(itemId);\n\t\t\t\t\t\t\titem.setBorderColor(borderColor);\n\t\t\t\t\t\t});\n\t\t\t\t\t})\n\t\t\t\t\t.catch((response) => {\n\t\t\t\t\t\tthis.requestSender.showErrorAlert(response);\n\t\t\t\t\t})\n\t\t\t\t;\n\t\t\t});\n\t\t}\n\t}\n}","import {BaseEvent, EventEmitter} from 'main.core.events';\n\nimport {Filter} from '../service/filter';\nimport {SidePanel} from '../service/side.panel';\n\nimport {EntityStorage} from '../entity/entity.storage';\n\nimport {TagSearcher} from '../utility/tag.searcher';\n\nimport type {EpicType} from '../item/task/epic';\n\ntype Params = {\n\tgroupId: number,\n\tentityStorage: EntityStorage,\n\tsidePanel: SidePanel,\n\tfilter: Filter,\n\ttagSearcher: TagSearcher,\n}\n\nexport class Epic extends EventEmitter\n{\n\tconstructor(params: Params)\n\t{\n\t\tsuper(params);\n\n\t\tthis.setEventNamespace('BX.Tasks.Scrum.Epic.Helper');\n\n\t\tthis.groupId = parseInt(params.groupId, 10);\n\n\t\tthis.entityStorage = params.entityStorage;\n\t\tthis.sidePanel = params.sidePanel;\n\t\tthis.filter = params.filter;\n\t\tthis.tagSearcher = params.tagSearcher;\n\n\t\tthis.subscribeToExtension();\n\t}\n\n\tsubscribeToExtension()\n\t{\n\t\tEventEmitter.subscribe(\n\t\t\t'BX.Tasks.Scrum.Epic:afterAdd',\n\t\t\t(baseEvent: BaseEvent) => {\n\t\t\t\tthis.onAfterAdd(baseEvent);\n\t\t\t})\n\t\t;\n\n\t\tEventEmitter.subscribe(\n\t\t\t'BX.Tasks.Scrum.Epic:afterEdit',\n\t\t\t(baseEvent: BaseEvent) => {\n\t\t\t\tthis.onAfterEdit(baseEvent);\n\t\t\t})\n\t\t;\n\n\t\tEventEmitter.subscribe(\n\t\t\t'BX.Tasks.Scrum.Epic:openEdit',\n\t\t\t(baseEvent: BaseEvent) => {\n\t\t\t\tthis.openEditForm(baseEvent.getData());\n\t\t\t})\n\t\t;\n\n\t\tEventEmitter.subscribe(\n\t\t\t'BX.Tasks.Scrum.Epic:filterByTag',\n\t\t\t(baseEvent: BaseEvent) => {\n\t\t\t\tthis.emit('filterByTag', baseEvent.getData())\n\t\t\t})\n\t\t;\n\n\t\tEventEmitter.subscribe(\n\t\t\t'BX.Tasks.Scrum.Epic:afterRemove',\n\t\t\t(baseEvent: BaseEvent) => {\n\t\t\t\tthis.onAfterRemove(baseEvent);\n\t\t\t})\n\t\t;\n\t}\n\n\topenAddForm(): Promise\n\t{\n\t\treturn this.sidePanel.showByExtension(\n\t\t\t'Epic',\n\t\t\t{\n\t\t\t\tview: 'add',\n\t\t\t\tgroupId: this.groupId\n\t\t\t}\n\t\t);\n\t}\n\n\topenEditForm(epicId: number): Promise\n\t{\n\t\treturn this.sidePanel.showByExtension(\n\t\t\t'Epic',\n\t\t\t{\n\t\t\t\tview: 'edit',\n\t\t\t\tgroupId: this.groupId,\n\t\t\t\tepicId: epicId\n\t\t\t}\n\t\t);\n\t}\n\n\topenViewForm(epicId: number): Promise\n\t{\n\t\treturn this.sidePanel.showByExtension(\n\t\t\t'Epic',\n\t\t\t{\n\t\t\t\tview: 'view',\n\t\t\t\tgroupId: this.groupId,\n\t\t\t\tepicId: epicId\n\t\t\t}\n\t\t);\n\t}\n\n\topenList(): Promise\n\t{\n\t\treturn this.sidePanel.showByExtension(\n\t\t\t'Epic',\n\t\t\t{\n\t\t\t\tview: 'list',\n\t\t\t\tgroupId: this.groupId\n\t\t\t}\n\t\t);\n\t}\n\n\tonAfterAdd(baseEvent: BaseEvent)\n\t{\n\t\tconst epic: EpicType = baseEvent.getData();\n\n\t\tthis.tagSearcher.addEpicToSearcher(epic);\n\n\t\tthis.filter.addItemToListTypeField('EPIC', {\n\t\t\tNAME: epic.name.trim(),\n\t\t\tVALUE: String(epic.id)\n\t\t});\n\t}\n\n\tonAfterEdit(baseEvent: BaseEvent)\n\t{\n\t\tconst epic: EpicType = baseEvent.getData();\n\n\t\tthis.entityStorage.getAllItems().forEach((item) => {\n\t\t\tconst itemEpic = item.getEpic().getValue();\n\t\t\tif (itemEpic && itemEpic.id === epic.id)\n\t\t\t{\n\t\t\t\titem.setEpic(epic);\n\t\t\t}\n\t\t});\n\n\t\tthis.tagSearcher.removeEpicFromSearcher(epic);\n\t\tthis.tagSearcher.addEpicToSearcher(epic);\n\t}\n\n\tonAfterRemove(baseEvent: BaseEvent)\n\t{\n\t\tconst epic: EpicType = baseEvent.getData();\n\n\t\tthis.entityStorage.getAllItems().forEach((item) => {\n\t\t\tconst itemEpic = item.getEpic().getValue();\n\t\t\tif (itemEpic && itemEpic.id === epic.id)\n\t\t\t{\n\t\t\t\titem.setEpic();\n\t\t\t}\n\t\t});\n\n\t\tthis.tagSearcher.removeEpicFromSearcher(epic);\n\t}\n}","import {PlanBuilder} from '../view/plan/plan.builder';\n\nimport {EntityStorage} from '../entity/entity.storage';\nimport {Sprint} from '../entity/sprint/sprint';\n\nimport {RequestSender} from '../utility/request.sender';\n\nimport type {SprintParams} from '../entity/sprint/sprint';\n\ntype Params = {\n\trequestSender: RequestSender,\n\tplanBuilder: PlanBuilder,\n\tentityStorage: EntityStorage,\n\tgroupId: number\n}\n\ntype RemoveParams = {\n\tsprintId: number\n}\n\nexport class PullSprint\n{\n\tconstructor(params: Params)\n\t{\n\t\tthis.requestSender = params.requestSender;\n\t\tthis.planBuilder = params.planBuilder;\n\t\tthis.entityStorage = params.entityStorage;\n\t\tthis.groupId = params.groupId;\n\n\t\tthis.listIdsToSkipAdding = new Set();\n\t\tthis.listIdsToSkipUpdating = new Set();\n\t\tthis.listIdsToSkipRemoving = new Set();\n\t}\n\n\tgetModuleId()\n\t{\n\t\treturn 'tasks';\n\t}\n\n\tgetMap()\n\t{\n\t\treturn {\n\t\t\tsprintAdded: this.onSprintAdded.bind(this),\n\t\t\tsprintUpdated: this.onSprintUpdated.bind(this),\n\t\t\tsprintRemoved: this.onSprintRemoved.bind(this)\n\t\t};\n\t}\n\n\tonSprintAdded(params: SprintParams)\n\t{\n\t\tif (this.groupId !== params.groupId)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst sprint = Sprint.buildSprint(params);\n\n\t\tif (this.needSkipAdd(sprint))\n\t\t{\n\t\t\tthis.cleanSkipAdd(sprint);\n\n\t\t\treturn;\n\t\t}\n\n\t\tthis.planBuilder.createSprintNode(sprint);\n\t}\n\n\tonSprintUpdated(params: SprintParams)\n\t{\n\t\tconst tmpSprint = Sprint.buildSprint(params);\n\n\t\tif (this.needSkipUpdate(tmpSprint))\n\t\t{\n\t\t\tthis.cleanSkipUpdate(tmpSprint);\n\n\t\t\treturn;\n\t\t}\n\n\t\tconst sprint = this.entityStorage.findEntityByEntityId(tmpSprint.getId());\n\t\tif (sprint)\n\t\t{\n\t\t\tif (tmpSprint.getStatus() !== sprint.getStatus())\n\t\t\t{\n\t\t\t\tif (tmpSprint.getStatus() === 'active')\n\t\t\t\t{\n\t\t\t\t\tthis.planBuilder.moveSprintToActiveListNode(sprint);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.planBuilder.updatePlannedSprints(this.entityStorage.getPlannedSprints(), false);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tsprint.updateYourself(tmpSprint);\n\t\t}\n\t}\n\n\tonSprintRemoved(params: RemoveParams)\n\t{\n\t\tif (this.needSkipRemove(params.sprintId))\n\t\t{\n\t\t\tthis.cleanSkipRemove(params.sprintId);\n\n\t\t\treturn;\n\t\t}\n\n\t\tconst sprint = this.entityStorage.findEntityByEntityId(params.sprintId);\n\t\tif (sprint)\n\t\t{\n\t\t\tsprint.removeYourself();\n\t\t\tthis.entityStorage.removeSprint(sprint.getId());\n\t\t}\n\t}\n\n\taddTmpIdToSkipAdding(tmpId: string)\n\t{\n\t\tthis.listIdsToSkipAdding.add(tmpId);\n\t}\n\n\taddIdToSkipUpdating(sprintId: number)\n\t{\n\t\tthis.listIdsToSkipUpdating.add(sprintId);\n\t}\n\n\taddIdToSkipRemoving(sprintId: number)\n\t{\n\t\tthis.listIdsToSkipRemoving.add(sprintId);\n\t}\n\n\tneedSkipAdd(sprint: Sprint): boolean\n\t{\n\t\treturn this.listIdsToSkipAdding.has(sprint.getTmpId());\n\t}\n\n\tcleanSkipAdd(sprint: Sprint)\n\t{\n\t\tthis.listIdsToSkipAdding.delete(sprint.getTmpId());\n\t}\n\n\tneedSkipUpdate(sprint: Sprint): boolean\n\t{\n\t\treturn this.listIdsToSkipUpdating.has(sprint.getId());\n\t}\n\n\tcleanSkipUpdate(sprint: Sprint)\n\t{\n\t\tthis.listIdsToSkipUpdating.delete(sprint.getId());\n\t}\n\n\tneedSkipRemove(sprintId: number): boolean\n\t{\n\t\treturn this.listIdsToSkipRemoving.has(sprintId);\n\t}\n\n\tcleanSkipRemove(sprintId: number)\n\t{\n\t\tthis.listIdsToSkipRemoving.delete(sprintId);\n\t}\n}","import {Dom, Type} from 'main.core';\nimport {BaseEvent} from 'main.core.events';\n\nimport {EntityStorage} from '../entity/entity.storage';\n\nimport {Item} from '../item/item';\nimport {ItemMover} from '../item/item.mover';\n\nimport {EntityCounters} from '../counters/entity.counters';\n\nimport {RequestSender} from '../utility/request.sender';\nimport {TagSearcher} from '../utility/tag.searcher';\n\nimport {Entity} from '../entity/entity';\n\nimport type {ItemParams} from '../item/item';\nimport type {ItemsSortInfo} from '../item/item.mover';\n\ntype Params = {\n\trequestSender: RequestSender,\n\tentityStorage: EntityStorage,\n\tentityCounters: EntityCounters,\n\ttagSearcher: TagSearcher,\n\titemMover: ItemMover,\n\tcurrentUserId: number\n}\n\ntype RemoveParams = {\n\titemId: number\n}\n\nexport class PullItem\n{\n\tconstructor(params: Params)\n\t{\n\t\tthis.requestSender = params.requestSender;\n\t\tthis.entityStorage = params.entityStorage;\n\t\tthis.entityCounters = params.entityCounters;\n\t\tthis.tagSearcher = params.tagSearcher;\n\t\tthis.itemMover = params.itemMover;\n\t\tthis.currentUserId = params.currentUserId;\n\n\t\tthis.listToAddAfterUpdate = new Map();\n\n\t\tthis.listIdsToSkipAdding = new Set();\n\t\tthis.listIdsToSkipUpdating = new Set();\n\t\tthis.listIdsToSkipRemoving = new Set();\n\t\tthis.listIdsToSkipSorting = new Set();\n\n\t\tthis.itemMover.subscribe('calculateSort', this.onCalculateSort.bind(this));\n\t}\n\n\tgetModuleId()\n\t{\n\t\treturn 'tasks';\n\t}\n\n\tgetMap()\n\t{\n\t\treturn {\n\t\t\titemAdded: this.onItemAdded.bind(this),\n\t\t\titemUpdated: this.onItemUpdated.bind(this),\n\t\t\titemRemoved: this.onItemRemoved.bind(this),\n\t\t\titemSortUpdated: this.onItemSortUpdated.bind(this),\n\t\t\tcomment_add: this.onCommentAdd.bind(this)\n\t\t};\n\t}\n\n\tonItemAdded(itemData: ItemParams)\n\t{\n\t\tconst item = Item.buildItem(itemData);\n\n\t\tthis.setDelayedAdd(item);\n\n\t\tthis.externalAdd(item)\n\t\t\t.finally(() => this.cleanDelayedAdd(item))\n\t\t\t.then(() => this.addItemToEntity(item))\n\t\t\t.catch(() => {})\n\t\t;\n\t}\n\n\tonItemUpdated(itemData: ItemParams)\n\t{\n\t\tconst item = Item.buildItem(itemData);\n\n\t\tif (this.isDelayedAdd(item))\n\t\t{\n\t\t\tthis.cleanDelayedAdd(item);\n\n\t\t\tif (this.needSkipAdd(item))\n\t\t\t{\n\t\t\t\tthis.cleanSkipAdd(item);\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.addItemToEntity(item);\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.needSkipUpdate(item))\n\t\t{\n\t\t\tthis.cleanSkipUpdate(item);\n\n\t\t\treturn;\n\t\t}\n\n\t\tthis.updateItem(item);\n\t}\n\n\tonItemRemoved(params: RemoveParams)\n\t{\n\t\tif (this.needSkipRemove(params.itemId))\n\t\t{\n\t\t\tthis.cleanSkipRemove(params.itemId);\n\n\t\t\treturn;\n\t\t}\n\n\t\tconst item = this.entityStorage.findItemByItemId(params.itemId);\n\t\tif (item)\n\t\t{\n\t\t\tconst entity = this.entityStorage.findEntityByItemId(item.getId());\n\t\t\tentity.removeItem(item);\n\t\t\titem.removeYourself();\n\t\t}\n\t}\n\n\tonItemSortUpdated(itemsSortInfo : ItemsSortInfo)\n\t{\n\t\tconst itemsToSort = new Map();\n\t\tconst itemsInfoToSort = new Map();\n\t\tObject.entries(itemsSortInfo).forEach(([itemId, info]) => {\n\t\t\tconst item = this.entityStorage.findItemByItemId(itemId);\n\t\t\tif (item)\n\t\t\t{\n\t\t\t\tif (!this.needSkipSort(info.tmpId))\n\t\t\t\t{\n\t\t\t\t\titemsToSort.set(item.getId(), item);\n\t\t\t\t\titemsInfoToSort.set(item.getId(), info);\n\t\t\t\t}\n\t\t\t\tthis.cleanSkipRemove(info.tmpId);\n\t\t\t}\n\t\t});\n\n\t\titemsToSort.forEach((item: Item) => {\n\t\t\tconst itemInfoToSort = itemsInfoToSort.get(item.getId());\n\t\t\titem.setSort(itemInfoToSort.sort);\n\t\t\tconst sourceEntity = this.entityStorage.findEntityByEntityId(item.getEntityId());\n\t\t\tif (sourceEntity)\n\t\t\t{\n\t\t\t\tconst targetEntityId = (\n\t\t\t\t\tType.isUndefined(itemInfoToSort.entityId)\n\t\t\t\t\t\t? item.getEntityId()\n\t\t\t\t\t\t: itemInfoToSort.entityId\n\t\t\t\t);\n\t\t\t\tlet targetEntity = this.entityStorage.findEntityByEntityId(targetEntityId);\n\t\t\t\tif (!targetEntity || sourceEntity.getId() === targetEntity.getId())\n\t\t\t\t{\n\t\t\t\t\ttargetEntity = sourceEntity;\n\t\t\t\t}\n\t\t\t\tthis.itemMover.moveToPosition(sourceEntity, targetEntity, item);\n\t\t\t\tthis.entityStorage.recalculateItemsSort();\n\t\t\t}\n\t\t});\n\t}\n\n\tonCommentAdd(params)\n\t{\n\t\tconst participants = Type.isArray(params.participants) ? params.participants : [];\n\n\t\tif (participants.includes(this.currentUserId.toString()))\n\t\t{\n\t\t\tconst xmlId = params.entityXmlId.split('_');\n\t\t\tif (xmlId)\n\t\t\t{\n\t\t\t\tconst entityType = xmlId[0];\n\t\t\t\tconst taskId = xmlId[1];\n\t\t\t\tconst item = this.entityStorage.findItemBySourceId(taskId);\n\t\t\t\tif (entityType === 'TASK' && item)\n\t\t\t\t{\n\t\t\t\t\tthis.requestSender.getCurrentState({\n\t\t\t\t\t\ttaskId: item.getSourceId()\n\t\t\t\t\t}).then((response) => {\n\t\t\t\t\t\tconst tmpItem = Item.buildItem(response.data.itemData);\n\t\t\t\t\t\tthis.updateItem(tmpItem, item);\n\t\t\t\t\t}).catch((response) => {\n\t\t\t\t\t\tthis.requestSender.showErrorAlert(response);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\taddItemToEntity(item: Item)\n\t{\n\t\tif (item.isSubTask())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.requestSender.hasTaskInFilter({\n\t\t\ttaskId: item.getSourceId()\n\t\t}).then((response) => {\n\t\t\tif (!response.data.has)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst entity = this.entityStorage.findEntityByEntityId(item.getEntityId());\n\t\t\tif (!entity)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.itemMover.moveToPosition(entity, entity, item);\n\t\t\tthis.entityStorage.recalculateItemsSort();\n\n\t\t\titem.getTags().getValue().forEach((tag) => {\n\t\t\t\tthis.tagSearcher.addTagToSearcher(tag);\n\t\t\t});\n\t\t}).catch((response) => {\n\t\t\tthis.requestSender.showErrorAlert(response);\n\t\t});\n\t}\n\n\tupdateItem(tmpItem: Item, item?: Item)\n\t{\n\t\tif (!item)\n\t\t{\n\t\t\titem = this.entityStorage.findItemByItemId(tmpItem.getId());\n\t\t}\n\n\t\tif (item)\n\t\t{\n\t\t\tconst isParentChangeAction = tmpItem.isSubTask() !== item.isSubTask();\n\t\t\tif (isParentChangeAction)\n\t\t\t{\n\t\t\t\tif (tmpItem.isSubTask())\n\t\t\t\t{\n\t\t\t\t\tconst entity = this.entityStorage.findEntityByItemId(item.getId());\n\t\t\t\t\tentity.removeItem(item);\n\t\t\t\t\titem.removeYourself();\n\t\t\t\t}\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst targetEntityId = tmpItem.getEntityId();\n\t\t\tconst sourceEntityId = item.getEntityId();\n\t\t\tconst targetEntity = this.entityStorage.findEntityByEntityId(targetEntityId);\n\t\t\tconst sourceEntity = this.entityStorage.findEntityByEntityId(sourceEntityId);\n\n\t\t\tif (tmpItem.getEntityId() !== item.getEntityId())\n\t\t\t{\n\t\t\t\tif (targetEntity && sourceEntity)\n\t\t\t\t{\n\t\t\t\t\tthis.itemMover.moveToPosition(sourceEntity, targetEntity, item);\n\t\t\t\t\tthis.entityStorage.recalculateItemsSort();\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.updateEntityCounters(targetEntity);\n\t\t\t}\n\n\t\t\titem.updateYourself(tmpItem);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (tmpItem.isSubTask())\n\t\t\t{\n\t\t\t\tconst targetEntityId = tmpItem.getEntityId();\n\t\t\t\tconst targetEntity = this.entityStorage.findEntityByEntityId(targetEntityId);\n\n\t\t\t\tthis.updateEntityCounters(targetEntity);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.addItemToEntity(tmpItem);\n\t\t\t}\n\t\t}\n\t}\n\n\tupdateEntityCounters(sourceEntity: Entity, endEntity?: Entity)\n\t{\n\t\tconst entities = new Map();\n\n\t\tentities.set(sourceEntity.getId(), sourceEntity);\n\t\tif (endEntity)\n\t\t{\n\t\t\tentities.set(endEntity.getId(), endEntity);\n\t\t}\n\n\t\tthis.entityCounters.updateCounters(entities);\n\t}\n\n\tonCalculateSort(baseEvent: BaseEvent)\n\t{\n\t\tconst listSortInfo = baseEvent.getData();\n\n\t\tObject.entries(listSortInfo).forEach(([itemId, info]) => {\n\t\t\tif (Object.prototype.hasOwnProperty.call(info, 'tmpId'))\n\t\t\t{\n\t\t\t\tthis.addTmpIdToSkipSorting(info.tmpId);\n\t\t\t}\n\t\t});\n\t}\n\n\taddTmpIdsToSkipAdding(tmpId: string)\n\t{\n\t\tthis.listIdsToSkipAdding.add(tmpId);\n\t}\n\n\taddIdToSkipUpdating(itemId: string)\n\t{\n\t\tthis.listIdsToSkipUpdating.add(itemId);\n\t}\n\n\taddIdToSkipRemoving(itemId: number)\n\t{\n\t\tthis.listIdsToSkipRemoving.add(itemId);\n\t}\n\n\taddTmpIdToSkipSorting(tmpId: string)\n\t{\n\t\tthis.listIdsToSkipSorting.add(tmpId);\n\t}\n\n\texternalAdd(item: Item): boolean\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tsetTimeout(() => (this.isDelayedAdd(item) ? resolve() : reject()), 3000);\n\t\t});\n\t}\n\n\tisDelayedAdd(item: Item): boolean\n\t{\n\t\treturn this.listToAddAfterUpdate.has(item.getId());\n\t}\n\n\tsetDelayedAdd(item: Item)\n\t{\n\t\tthis.listToAddAfterUpdate.set(item.getId(), item);\n\t}\n\n\tcleanDelayedAdd(item: Item)\n\t{\n\t\tthis.listToAddAfterUpdate.delete(item.getId());\n\t}\n\n\tneedSkipAdd(item: Item): boolean\n\t{\n\t\treturn this.listIdsToSkipAdding.has(item.getTmpId());\n\t}\n\n\tcleanSkipAdd(item: Item)\n\t{\n\t\tthis.listIdsToSkipAdding.delete(item.getTmpId());\n\t}\n\n\tneedSkipUpdate(item: Item): boolean\n\t{\n\t\treturn this.listIdsToSkipUpdating.has(item.getId());\n\t}\n\n\tcleanSkipUpdate(item: Item)\n\t{\n\t\tthis.listIdsToSkipUpdating.delete(item.getId());\n\t}\n\n\tneedSkipRemove(itemId: number): boolean\n\t{\n\t\treturn this.listIdsToSkipRemoving.has(itemId);\n\t}\n\n\tcleanSkipRemove(itemId: number)\n\t{\n\t\tthis.listIdsToSkipRemoving.delete(itemId);\n\t}\n\n\tneedSkipSort(tmpId: string): boolean\n\t{\n\t\treturn this.listIdsToSkipSorting.has(tmpId);\n\t}\n\n\tcleanSkipSort(tmpId: string)\n\t{\n\t\tthis.listIdsToSkipSorting.delete(tmpId);\n\t}\n}\n","import {EntityStorage} from '../entity/entity.storage';\n\nimport {BaseEvent} from 'main.core.events';\n\nimport {RequestSender} from '../utility/request.sender';\n\nimport {Epic} from '../epic/epic';\n\nimport type {EpicType} from '../item/task/epic';\n\ntype Params = {\n\trequestSender: RequestSender,\n\tentityStorage: EntityStorage,\n\tepic: Epic\n}\n\nexport class PullEpic\n{\n\tconstructor(params: Params)\n\t{\n\t\tthis.requestSender = params.requestSender;\n\t\tthis.entityStorage = params.entityStorage;\n\t\tthis.epic = params.epic;\n\n\t\tthis.listIdsToSkipAdding = new Set();\n\t\tthis.listIdsToSkipUpdating = new Set();\n\t\tthis.listIdsToSkipRemoving = new Set();\n\t}\n\n\tgetModuleId()\n\t{\n\t\treturn 'tasks';\n\t}\n\n\tgetMap()\n\t{\n\t\treturn {\n\t\t\tepicAdded: this.onEpicAdded.bind(this),\n\t\t\tepicUpdated: this.onEpicUpdated.bind(this),\n\t\t\tepicRemoved: this.onEpicRemoved.bind(this)\n\t\t};\n\t}\n\n\tonEpicAdded(epicData: EpicType)\n\t{\n\t\tthis.epic.onAfterAdd((new BaseEvent()).setData(epicData));\n\t}\n\n\tonEpicUpdated(epicData: EpicType)\n\t{\n\t\tthis.epic.onAfterEdit((new BaseEvent()).setData(epicData));\n\t}\n\n\tonEpicRemoved(epicData: EpicType)\n\t{\n\t\tthis.epic.onAfterRemove((new BaseEvent()).setData(epicData));\n\t}\n}","import {Filter} from '../service/filter';\n\nimport {EntityStorage} from '../entity/entity.storage';\n\nimport {Item} from '../item/item';\n\nimport {RequestSender} from '../utility/request.sender';\n\ntype Params = {\n\trequestSender: RequestSender,\n\tentityStorage: EntityStorage,\n\tfilterService: Filter,\n\tuserId: number,\n\tgroupId: number\n}\n\nexport class PullCounters\n{\n\tconstructor(params: Params)\n\t{\n\t\tthis.requestSender = params.requestSender;\n\t\tthis.entityStorage = params.entityStorage;\n\t\tthis.filterService = params.filterService;\n\t\tthis.userId = params.userId;\n\t\tthis.groupId = params.groupId;\n\t}\n\n\tgetModuleId()\n\t{\n\t\treturn 'tasks';\n\t}\n\n\tgetMap()\n\t{\n\t\treturn {\n\t\t\ttask_view: this.onTaskView.bind(this),\n\t\t\tproject_read_all: this.onCommentsReadAll.bind(this)\n\t\t};\n\t}\n\n\tonTaskView(data)\n\t{\n\t\tconst inputTaskId = parseInt(data.TASK_ID, 10);\n\t\tconst inputUserId = parseInt(data.USER_ID, 10);\n\n\t\tif (inputUserId !== this.userId)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst item = this.entityStorage.findItemBySourceId(inputTaskId);\n\n\t\tif (item)\n\t\t{\n\t\t\tthis.requestSender.getCurrentState({\n\t\t\t\ttaskId: item.getSourceId()\n\t\t\t}).then((response) => {\n\t\t\t\titem.updateYourself(Item.buildItem(response.data.itemData));\n\t\t\t}).catch((response) => {\n\t\t\t\tthis.requestSender.showErrorAlert(response);\n\t\t\t});\n\t\t}\n\t}\n\n\tonCommentsReadAll(data)\n\t{\n\t\tconst groupId = data.GROUP_ID;\n\n\t\tif (groupId && groupId === this.groupId)\n\t\t{\n\t\t\tthis.filterService.applyFilter();\n\t\t}\n\t}\n}","import {Type} from 'main.core';\nimport {BaseEvent, EventEmitter} from 'main.core.events';\n\nimport {PULL as Pull} from 'pull.client';\n\nimport {Filter} from '../service/filter';\n\nimport {EntityStorage} from '../entity/entity.storage';\n\nimport {RequestSender} from '../utility/request.sender';\n\nimport {PullCounters} from '../pull/pull.counters';\n\ntype Params = {\n\trequestSender: RequestSender,\n\tentityStorage: EntityStorage,\n\tfilter: Filter,\n\tisOwnerCurrentUser: boolean,\n\tuserId: number,\n\tgroupId: number\n}\n\nexport class TaskCounters\n{\n\tconstructor(params: Params)\n\t{\n\t\tthis.requestSender = params.requestSender;\n\t\tthis.entityStorage = params.entityStorage;\n\t\tthis.filterService = params.filter;\n\n\t\tthis.isOwnerCurrentUser = params.isOwnerCurrentUser;\n\n\t\tthis.userId = parseInt(params.userId, 10);\n\t\tthis.groupId = parseInt(params.groupId, 10);\n\n\t\tthis.filter = this.filterService.getFilterManager();\n\n\t\tthis.updateFields();\n\t\tthis.bindEvents();\n\t\tthis.subscribeToPull();\n\t}\n\n\tbindEvents()\n\t{\n\t\tEventEmitter.subscribe('BX.Main.Filter:apply', this.onFilterApply.bind(this));\n\t\tEventEmitter.subscribe('Tasks.Toolbar:onItem', this.onCounterClick.bind(this));\n\t}\n\n\tsubscribeToPull()\n\t{\n\t\tPull.subscribe(new PullCounters({\n\t\t\trequestSender: this.requestSender,\n\t\t\tentityStorage: this.entityStorage,\n\t\t\tfilterService: this.filterService,\n\t\t\tuserId: this.userId,\n\t\t\tgroupId: this.groupId\n\t\t}));\n\t}\n\n\tonFilterApply()\n\t{\n\t\tthis.updateFields();\n\t}\n\n\tupdateFields()\n\t{\n\t\tthis.fields = this.filter.getFilterFieldsValues();\n\t}\n\n\tonCounterClick(baseEvent: BaseEvent)\n\t{\n\t\tconst data = baseEvent.getData();\n\n\t\tif (data.counter && data.counter.filter)\n\t\t{\n\t\t\tthis.toggleByField({[data.counter.filterField]: data.counter.filterValue});\n\t\t}\n\t}\n\n\tisFilteredByField(field)\n\t{\n\t\tif (!Object.keys(this.fields).includes(field))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tif (Type.isArray(this.fields[field]))\n\t\t{\n\t\t\treturn this.fields[field].length > 0;\n\t\t}\n\n\t\treturn this.fields[field] !== '';\n\t}\n\n\tisFilteredByFieldValue(field, value)\n\t{\n\t\treturn this.isFilteredByField(field) && this.fields[field] === value;\n\t}\n\n\ttoggleByField(field)\n\t{\n\t\tconst name = Object.keys(field)[0];\n\t\tconst value = field[name];\n\n\t\tif (!this.isFilteredByFieldValue(name, value))\n\t\t{\n\t\t\tthis.filter.getApi().extendFilter({[name]: value});\n\t\t\treturn;\n\t\t}\n\n\t\tthis.filter.getFilterFields().forEach((field) => {\n\t\t\tif (field.getAttribute('data-name') === name)\n\t\t\t{\n\t\t\t\tthis.filter.getFields().deleteField(field);\n\t\t\t}\n\t\t});\n\n\t\tthis.filter.getSearch().apply();\n\t}\n}","import {BaseEvent} from 'main.core.events';\n\nimport {Filter} from '../service/filter';\n\nimport {EntityStorage} from '../entity/entity.storage';\nimport {Sprint} from '../entity/sprint/sprint';\n\nimport {RequestSender} from './request.sender';\n\nimport {Item, ItemParams} from '../item/item';\n\ntype Params = {\n\tfilter: Filter,\n\trequestSender: RequestSender,\n\tentityStorage: EntityStorage\n}\n\nexport class FilterHandler\n{\n\tconstructor(params: Params)\n\t{\n\t\tthis.filter = params.filter;\n\t\tthis.requestSender = params.requestSender;\n\t\tthis.entityStorage = params.entityStorage;\n\n\t\tthis.filter.subscribe('applyFilter', this.onApplyFilter.bind(this));\n\t}\n\n\tonApplyFilter(baseEvent: BaseEvent)\n\t{\n\t\tthis.fadeOutAll();\n\n\t\tthis.requestSender.applyFilter().then((response) => {\n\n\t\t\tconst filteredItemsData = response.data;\n\n\t\t\tthis.entityStorage.getAllItems().forEach((item: Item) => {\n\t\t\t\tconst entity = this.entityStorage.findEntityByEntityId(item.getEntityId());\n\t\t\t\tif (!entity.isCompleted())\n\t\t\t\t{\n\t\t\t\t\tentity.removeItem(item);\n\t\t\t\t\titem.removeYourself();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tfilteredItemsData.forEach((itemParams: ItemParams) => {\n\t\t\t\tconst item = Item.buildItem(itemParams);\n\t\t\t\tconst entity = this.entityStorage.findEntityByEntityId(item.getEntityId());\n\t\t\t\titem.setShortView(entity.getShortView());\n\t\t\t\tif (!entity.isCompleted())\n\t\t\t\t{\n\t\t\t\t\tentity.appendItemToList(item);\n\t\t\t\t\tentity.setItem(item);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.fadeInAll();\n\t\t}).catch((response) => {\n\n\t\t\tthis.fadeInAll();\n\n\t\t\tthis.requestSender.showErrorAlert(response);\n\t\t});\n\t}\n\n\tfadeOutAll()\n\t{\n\t\tthis.entityStorage.getBacklog().fadeOut();\n\n\t\tthis.entityStorage.getSprints().forEach((sprint: Sprint) => {\n\t\t\tif (!sprint.isCompleted())\n\t\t\t{\n\t\t\t\tsprint.fadeOut();\n\t\t\t}\n\t\t});\n\t}\n\n\tfadeInAll()\n\t{\n\t\tthis.entityStorage.getBacklog().fadeIn();\n\n\t\tthis.entityStorage.getSprints().forEach((sprint: Sprint) => {\n\t\t\tif (!sprint.isCompleted())\n\t\t\t{\n\t\t\t\tsprint.fadeIn();\n\t\t\t}\n\t\t});\n\t}\n}","import {Item} from '../item/item';\n\ntype Params = {\n\tparentItem: Item\n}\n\nexport class Decomposition\n{\n\tconstructor(params: Params)\n\t{\n\t\tthis.parentItem = params.parentItem;\n\n\t\tthis.count = 1;\n\t}\n\n\tgetParentItem(): Item\n\t{\n\t\treturn this.parentItem;\n\t}\n\n\taddNumberDecompositionsPerformed()\n\t{\n\t\tthis.count++;\n\t}\n\n\tgetNumberDecompositionsPerformed(): number\n\t{\n\t\treturn this.count;\n\t}\n}\n","import {Type, Loc, Dom} from 'main.core';\nimport {BaseEvent} from 'main.core.events';\nimport {Loader} from 'main.loader';\nimport {Menu} from 'main.popup';\n\nimport {MessageBox} from 'ui.dialogs.messagebox';\n\nimport {ShortView} from 'ui.short-view';\n\nimport {DiskManager} from '../../service/disk.manager';\n\nimport {View} from '../view';\n\nimport {PlanBuilder} from './plan.builder';\n\nimport {Entity} from '../../entity/entity';\nimport {ActionPanel} from '../../entity/action.panel';\nimport {EntityStorage} from '../../entity/entity.storage';\nimport {SearchItems} from '../../entity/search.items';\nimport {Backlog} from '../../entity/backlog/backlog';\nimport {Sprint} from '../../entity/sprint/sprint';\nimport {SprintMover} from '../../entity/sprint/sprint.mover';\nimport {SprintSidePanel} from '../../entity/sprint/sprint.side.panel';\n\nimport {Item} from '../../item/item';\nimport {SubTasks} from '../../item/task/sub.tasks';\nimport {ItemMover} from '../../item/item.mover';\nimport {ItemDesigner} from '../../item/item.designer';\n\nimport {Epic} from '../../epic/epic';\n\nimport {PULL as Pull} from 'pull.client';\n\nimport {PullSprint} from '../../pull/pull.sprint';\nimport {PullItem} from '../../pull/pull.item';\nimport {PullEpic} from '../../pull/pull.epic';\n\nimport {TaskCounters} from '../../counters/task.counters';\nimport {EntityCounters} from '../../counters/entity.counters';\n\nimport {FilterHandler} from '../../utility/filter.handler';\nimport {Input} from '../../utility/input';\nimport {TagSearcher} from '../../utility/tag.searcher';\nimport {Decomposition} from '../../utility/decomposition';\n\nimport type {Views} from '../view';\nimport type {BacklogParams} from '../../entity/backlog/backlog';\nimport type {SprintParams} from '../../entity/sprint/sprint';\nimport type {ItemParams} from '../../item/item';\nimport type {EpicType} from '../../item/task/epic';\nimport type {ResponsibleType} from '../../item/task/responsible';\n\nimport type {ShowLinkedTasksResponse} from '../../response';\n\ntype Params = {\n\tpathToTask: string,\n\tdefaultSprintDuration: number,\n\tactiveSprintId: number,\n\tbacklog: BacklogParams,\n\tsprints: Array<SprintParams>,\n\tviews: Views,\n\ttags: {\n\t\tepic: EpicType,\n\t\ttask: Array\n\t},\n\tdefaultResponsible: ResponsibleType,\n\tpageSize: number,\n\tisShortView: 'Y' | 'N',\n\tdisplayPriority: string\n}\n\nexport class Plan extends View\n{\n\tconstructor(params: Params)\n\t{\n\t\tsuper(params);\n\n\t\tthis.setEventNamespace('BX.Tasks.Scrum.Plan');\n\n\t\tthis.pathToTask = params.pathToTask;\n\t\tthis.defaultResponsible = params.defaultResponsible;\n\t\tthis.pageSize = parseInt(params.pageSize, 10);\n\t\tthis.activeSprintId = parseInt(params.activeSprintId, 10);\n\t\tthis.views = params.views;\n\t\tthis.isShortView = params.isShortView;\n\t\tthis.displayPriority = params.displayPriority;\n\n\t\tthis.entityStorage = new EntityStorage();\n\t\tthis.entityStorage.addBacklog(Backlog.buildBacklog(params.backlog));\n\t\tparams.sprints.forEach((sprintData) => {\n\t\t\tsprintData.defaultSprintDuration = params.defaultSprintDuration;\n\t\t\tsprintData.isShortView = params.isShortView;\n\t\t\tconst sprint = Sprint.buildSprint(sprintData);\n\t\t\tthis.entityStorage.addSprint(sprint);\n\t\t});\n\n\t\tthis.entityCounters = new EntityCounters({\n\t\t\trequestSender: this.requestSender,\n\t\t\tentityStorage: this.entityStorage\n\t\t});\n\n\t\tthis.taskCounters = new TaskCounters({\n\t\t\trequestSender: this.requestSender,\n\t\t\tentityStorage: this.entityStorage,\n\t\t\tfilter: this.filter,\n\t\t\tuserId: params.userId,\n\t\t\tgroupId: params.groupId,\n\t\t\tisOwnerCurrentUser: params.isOwnerCurrentUser\n\t\t});\n\n\t\tthis.tagSearcher = new TagSearcher();\n\t\tObject.values(params.tags.epic).forEach((epic) => {\n\t\t\tthis.tagSearcher.addEpicToSearcher(epic);\n\t\t});\n\t\tObject.values(params.tags.task).forEach((tagName) => {\n\t\t\tthis.tagSearcher.addTagToSearcher(tagName);\n\t\t});\n\n\t\tthis.planBuilder = new PlanBuilder({\n\t\t\trequestSender: this.requestSender,\n\t\t\tentityStorage: this.entityStorage,\n\t\t\tdefaultSprintDuration: params.defaultSprintDuration,\n\t\t\tpageNumberToCompletedSprints: params.pageNumberToCompletedSprints,\n\t\t\tdisplayPriority: params.displayPriority,\n\t\t\tisShortView: params.isShortView\n\t\t});\n\t\tthis.planBuilder.subscribe('beforeCreateSprint', (baseEvent: BaseEvent) => {\n\t\t\tconst requestData = baseEvent.getData();\n\t\t\tthis.pullSprint.addTmpIdToSkipAdding(requestData.tmpId);\n\t\t});\n\t\tthis.planBuilder.subscribe(\n\t\t\t'createSprint',\n\t\t\t(baseEvent: BaseEvent) => {\n\t\t\t\tconst sprint: Sprint = baseEvent.getData();\n\t\t\t\tthis.subscribeToSprint(sprint);\n\t\t\t\tthis.itemMover.addSprintContainers(sprint);\n\t\t\t}\n\t\t);\n\t\tthis.planBuilder.subscribe(\n\t\t\t'createSprintNode',\n\t\t\t(baseEvent: BaseEvent) => {\n\t\t\t\tconst sprint: Sprint = baseEvent.getData();\n\t\t\t\tthis.subscribeToSprint(sprint);\n\t\t\t\tthis.itemMover.addSprintContainers(sprint);\n\t\t\t}\n\t\t);\n\t\tthis.planBuilder.subscribe('sprintsScroll', this.onActionPanelScroll.bind(this));\n\n\t\tthis.searchItems = new SearchItems({\n\t\t\tplanBuilder: this.planBuilder,\n\t\t\tentityStorage: this.entityStorage\n\t\t});\n\n\t\tthis.sprintMover = new SprintMover({\n\t\t\trequestSender: this.requestSender,\n\t\t\tplanBuilder: this.planBuilder,\n\t\t\tentityStorage: this.entityStorage\n\t\t});\n\n\t\tthis.itemMover = new ItemMover({\n\t\t\trequestSender: this.requestSender,\n\t\t\tplanBuilder: this.planBuilder,\n\t\t\tentityStorage: this.entityStorage,\n\t\t\tentityCounters: this.entityCounters\n\t\t});\n\n\t\tthis.itemDesigner = new ItemDesigner({\n\t\t\trequestSender: this.requestSender,\n\t\t\tentityStorage: this.entityStorage\n\t\t});\n\n\t\tthis.filterHandler = new FilterHandler({\n\t\t\tfilter: this.filter,\n\t\t\trequestSender: this.requestSender,\n\t\t\tentityStorage: this.entityStorage\n\t\t});\n\n\t\tthis.epic = new Epic({\n\t\t\tgroupId: this.groupId,\n\t\t\tsidePanel: this.sidePanel,\n\t\t\tentityStorage: this.entityStorage,\n\t\t\tfilter: this.filter,\n\t\t\ttagSearcher: this.tagSearcher\n\t\t});\n\n\t\tthis.pullSprint = new PullSprint({\n\t\t\trequestSender: this.requestSender,\n\t\t\tplanBuilder: this.planBuilder,\n\t\t\tentityStorage: this.entityStorage,\n\t\t\tgroupId: this.getCurrentGroupId()\n\t\t});\n\t\tthis.pullItem = new PullItem({\n\t\t\trequestSender: this.requestSender,\n\t\t\tentityStorage: this.entityStorage,\n\t\t\tentityCounters: this.entityCounters,\n\t\t\ttagSearcher: this.tagSearcher,\n\t\t\titemMover: this.itemMover,\n\t\t\tcurrentUserId: this.getCurrentUserId()\n\t\t});\n\t\tthis.pullEpic = new PullEpic({\n\t\t\trequestSender: this.requestSender,\n\t\t\tentityStorage: this.entityStorage,\n\t\t\tepic: this.epic,\n\t\t});\n\n\t\tthis.input = new Input();\n\t\tthis.input.subscribe('createTaskItem', this.onCreateTaskItem.bind(this));\n\t\tthis.input.subscribe('tagsSearchOpen', this.onTagsSearchOpen.bind(this));\n\t\tthis.input.subscribe('tagsSearchClose', this.onTagsSearchClose.bind(this));\n\t\tthis.input.subscribe('epicSearchOpen', this.onEpicSearchOpen.bind(this));\n\t\tthis.input.subscribe('epicSearchClose', this.onEpicSearchClose.bind(this));\n\t\tthis.input.subscribe('render', this.onRenderInput.bind(this));\n\t\tthis.input.subscribe('remove', this.onRemoveInput.bind(this));\n\n\t\tthis.actionPanel = null;\n\n\t\tthis.bindHandlers();\n\n\t\tthis.subscribeToPull();\n\t}\n\n\trenderTo(container: HTMLElement)\n\t{\n\t\tsuper.renderTo(container);\n\n\t\tthis.planBuilder.renderTo(container);\n\t}\n\n\trenderRightElementsTo(container: HTMLElement)\n\t{\n\t\tsuper.renderRightElementsTo(container);\n\n\t\tconst shortView = new ShortView({\n\t\t\tisShortView: this.isShortView\n\t\t});\n\n\t\tshortView.renderTo(container);\n\t\tshortView.subscribe('change', this.onChangeShortView.bind(this));\n\t}\n\n\tsetDisplayPriority(value: string)\n\t{\n\t\tsuper.setDisplayPriority(value);\n\n\t\tthis.planBuilder.setWidthPriority(value);\n\n\t\tthis.requestSender.saveDisplayPriority({\n\t\t\tvalue: value\n\t\t})\n\t\t\t.then((response) => {})\n\t\t\t.catch((response) => {\n\t\t\t\tthis.requestSender.showErrorAlert(response);\n\t\t\t})\n\t\t;\n\t}\n\n\tsubscribeToPull()\n\t{\n\t\tPull.subscribe(this.pullSprint);\n\t\tPull.subscribe(this.pullItem);\n\t\tPull.subscribe(this.pullEpic);\n\t}\n\n\tbindHandlers()\n\t{\n\t\tthis.entityStorage.getBacklog().subscribe('showInput', this.onShowInput.bind(this));\n\t\tthis.entityStorage.getBacklog().subscribe('updateItem', this.onUpdateItem.bind(this));\n\t\tthis.entityStorage.getBacklog().subscribe('showTask', this.onShowTask.bind(this));\n\t\tthis.entityStorage.getBacklog().subscribe('changeTaskResponsible', this.onChangeTaskResponsible.bind(this));\n\t\tthis.entityStorage.getBacklog().subscribe('openAddEpicForm', this.onOpenEpicForm.bind(this));\n\t\t// this.entityStorage.getBacklog().subscribe('openListEpicGrid', this.onOpenListEpicGrid.bind(this));\n\t\tthis.entityStorage.getBacklog().subscribe('tagsSearchOpen', this.onTagsSearchOpen.bind(this));\n\t\tthis.entityStorage.getBacklog().subscribe('tagsSearchClose', this.onTagsSearchClose.bind(this));\n\t\tthis.entityStorage.getBacklog().subscribe('epicSearchOpen', this.onEpicSearchOpen.bind(this));\n\t\tthis.entityStorage.getBacklog().subscribe('epicSearchClose', this.onEpicSearchClose.bind(this));\n\t\tthis.entityStorage.getBacklog().subscribe('filterByEpic', this.onFilterByEpic.bind(this));\n\t\tthis.entityStorage.getBacklog().subscribe('filterByTag', this.onFilterByTag.bind(this));\n\t\tthis.entityStorage.getBacklog().subscribe('loadItems', this.onLoadItems.bind(this));\n\t\tthis.entityStorage.getBacklog().subscribe('toggleActionPanel', this.onToggleActionPanel.bind(this));\n\t\tthis.entityStorage.getBacklog().subscribe('showLinked', this.onShowLinked.bind(this));\n\t\tthis.entityStorage.getBacklog().subscribe('itemsScroll', this.onActionPanelScroll.bind(this));\n\t\tthis.entityStorage.getBacklog().subscribe('showBlank', this.onShowBlank.bind(this));\n\n\t\tthis.entityStorage.getSprints().forEach((sprint) => this.subscribeToSprint(sprint));\n\n\t\tthis.epic.subscribe('filterByTag', this.onFilterByTag.bind(this));\n\n\t\tthis.itemMover.subscribe('dragStart', () => {\n\t\t\tthis.destroyActionPanel();\n\t\t\tif (this.searchItems.isActive())\n\t\t\t{\n\t\t\t\tthis.searchItems.stop();\n\t\t\t}\n\t\t});\n\n\t\tdocument.onkeydown = this.onDocumentKeyDown.bind(this);\n\t\tdocument.onclick = this.onDocumentClick.bind(this);\n\t}\n\n\tsubscribeToSprint(sprint: Sprint)\n\t{\n\t\tsprint.subscribe('showInput', this.onShowInput.bind(this));\n\t\tsprint.subscribe('updateItem', this.onUpdateItem.bind(this));\n\t\tsprint.subscribe('getSubTasks', this.onGetSubTasks.bind(this));\n\t\tsprint.subscribe('showTask', this.onShowTask.bind(this));\n\t\tsprint.subscribe('startSprint', this.onStartSprint.bind(this));\n\t\tsprint.subscribe('completeSprint', this.onCompleteSprint.bind(this));\n\t\tsprint.subscribe('changeTaskResponsible', this.onChangeTaskResponsible.bind(this));\n\t\tsprint.subscribe('removeSprint', this.onRemoveSprint.bind(this));\n\t\tsprint.subscribe('changeSprintName', this.onChangeSprintName.bind(this));\n\t\tsprint.subscribe('changeSprintDeadline', this.onChangeSprintDeadline.bind(this));\n\t\tsprint.subscribe('tagsSearchOpen', this.onTagsSearchOpen.bind(this));\n\t\tsprint.subscribe('tagsSearchClose', this.onTagsSearchClose.bind(this));\n\t\tsprint.subscribe('epicSearchOpen', this.onEpicSearchOpen.bind(this));\n\t\tsprint.subscribe('epicSearchClose', this.onEpicSearchClose.bind(this));\n\t\tsprint.subscribe('filterByEpic', this.onFilterByEpic.bind(this));\n\t\tsprint.subscribe('filterByTag', this.onFilterByTag.bind(this));\n\t\tsprint.subscribe('getSprintCompletedItems', this.onGetSprintCompletedItems.bind(this));\n\t\tsprint.subscribe('showSprintBurnDownChart', this.onShowSprintBurnDownChart.bind(this));\n\t\tsprint.subscribe('showSprintCreateMenu', this.onOpenSprintAddMenu.bind(this));\n\t\tsprint.subscribe('loadItems', this.onLoadItems.bind(this));\n\t\tsprint.subscribe('toggleActionPanel', this.onToggleActionPanel.bind(this));\n\t\tsprint.subscribe('showLinked', this.onShowLinked.bind(this));\n\t\tsprint.subscribe('toggleVisibilityContent', () => {\n\t\t\tthis.planBuilder.adjustSprintListWidth();\n\t\t});\n\t}\n\n\tshowErrorAlert(message: string)\n\t{\n\t\tMessageBox.alert(message, Loc.getMessage('TASKS_SCRUM_ERROR_TITLE_POPUP'));\n\t}\n\n\tonDocumentKeyDown(event)\n\t{\n\t\tevent = event || window.event;\n\n\t\tif (this.searchItems.isActive())\n\t\t{\n\t\t\tif (event.key === 'ArrowUp' || event.key === 'ArrowLeft')\n\t\t\t{\n\t\t\t\tevent.preventDefault();\n\n\t\t\t\tthis.searchItems.moveToPrev();\n\t\t\t}\n\n\t\t\tif (event.key === 'ArrowDown' || event.key === 'ArrowRight')\n\t\t\t{\n\t\t\t\tevent.preventDefault();\n\n\t\t\t\tthis.searchItems.moveToNext();\n\t\t\t}\n\t\t}\n\n\t\tif (event.key === 'Escape')\n\t\t{\n\t\t\tlet prevented = false;\n\n\t\t\tif (this.searchItems.isActive())\n\t\t\t{\n\t\t\t\tprevented = true;\n\n\t\t\t\tthis.searchItems.stop();\n\t\t\t}\n\n\t\t\tif (this.actionPanel)\n\t\t\t{\n\t\t\t\tprevented = true;\n\n\t\t\t\tthis.destroyActionPanel();\n\n\t\t\t\tthis.entityStorage.getAllEntities()\n\t\t\t\t\t.forEach((entity: Entity) => {\n\t\t\t\t\t\tentity.deactivateGroupMode();\n\t\t\t\t\t})\n\t\t\t\t;\n\t\t\t}\n\n\t\t\tif (prevented)\n\t\t\t{\n\t\t\t\tevent.stopImmediatePropagation();\n\t\t\t}\n\t\t}\n\t}\n\n\tonDocumentClick(event)\n\t{\n\t\tevent = event || window.event;\n\n\t\tif (this.searchItems.isActive() && !this.searchItems.isClickInside(event.target))\n\t\t{\n\t\t\tthis.searchItems.stop();\n\t\t}\n\t}\n\n\tonShowInput(baseEvent: BaseEvent)\n\t{\n\t\tconst entity: Entity = baseEvent.getTarget();\n\n\t\tthis.input.setEntity(entity);\n\t\tthis.input.cleanBindNode();\n\n\t\tthis.renderInput();\n\t}\n\n\tonRenderInput(baseEvent: BaseEvent)\n\t{\n\t\tconst input: Input = baseEvent.getTarget();\n\n\t\tconst entity = input.getEntity();\n\n\t\tentity.hideBlank();\n\t\tentity.hideDropzone();\n\t}\n\n\tonRemoveInput(baseEvent: BaseEvent)\n\t{\n\t\tconst input: Input = baseEvent.getTarget();\n\n\t\tconst entity = input.getEntity();\n\n\t\tif (!input.isTaskCreated() && entity.isEmpty())\n\t\t{\n\t\t\tif (entity.isBacklog())\n\t\t\t{\n\t\t\t\tif (this.entityStorage.existsAtLeastOneItem())\n\t\t\t\t{\n\t\t\t\t\tentity.showDropzone();\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tentity.showBlank();\n\t\t\t\t}\n\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tentity.showDropzone();\n\t\t\t}\n\t\t}\n\n\t\tif (this.decomposition)\n\t\t{\n\t\t\tthis.decomposition = null;\n\t\t}\n\n\t\tentity.adjustListItemsWidth();\n\t}\n\n\tonCreateTaskItem(baseEvent: BaseEvent)\n\t{\n\t\tconst input: Input = baseEvent.getTarget();\n\n\t\tconst entity = input.getEntity();\n\t\tconst inputValue = baseEvent.getData();\n\n\t\tlet newItem: Item = null;\n\n\t\ttry\n\t\t{\n\t\t\tnewItem = this.createItem(inputValue);\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tthis.showErrorAlert(error.message);\n\n\t\t\tinput.removeYourself();\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.decomposition)\n\t\t{\n\t\t\tconst parentItem: Item = this.decomposition.getParentItem();\n\n\t\t\tthis.pullItem.addIdToSkipUpdating(parentItem.getId());\n\n\t\t\tnewItem.setParentEntity(entity.getId(), entity.getEntityType());\n\t\t\tnewItem.setParentTaskId(parentItem.getSourceId());\n\t\t\tnewItem.setEpic(parentItem.getEpic().getValue());\n\t\t\tnewItem.setTags(parentItem.getTags().getValue());\n\t\t\tnewItem.setResponsible(parentItem.getResponsible().getValue());\n\n\t\t\tif (entity.isBacklog())\n\t\t\t{\n\t\t\t\tparentItem.setLinkedTask('Y');\n\t\t\t\tparentItem.updateBorderColor();\n\n\t\t\t\tnewItem.setLinkedTask('Y');\n\t\t\t\tnewItem.setBorderColor(parentItem.getBorderColor());\n\t\t\t\tnewItem.setSort(parentItem.getSort() + this.decomposition.getNumberDecompositionsPerformed());\n\n\t\t\t\tDom.insertBefore(newItem.render(), input.getNode());\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tnewItem.setSubTask('Y');\n\t\t\t\tnewItem.setSort(parentItem.getSort() + (parentItem.getSubTasksCount() + 1));\n\t\t\t\tnewItem.setParentTaskId(parentItem.getSourceId());\n\t\t\t\tnewItem.setParentTask('N');\n\t\t\t}\n\n\t\t\tthis.decomposition.addNumberDecompositionsPerformed();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tnewItem.setEpic(input.getEpic());\n\n\t\t\tinput.setEpic(null);\n\n\t\t\tthis.fillItemBeforeCreation(entity, newItem, inputValue);\n\n\t\t\tif (entity.isEmpty())\n\t\t\t{\n\t\t\t\tDom.insertBefore(newItem.render(), entity.getLoaderNode());\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tDom.insertBefore(newItem.render(), entity.getFirstItemNode(this.input));\n\t\t\t}\n\t\t}\n\n\t\tthis.pullItem.addTmpIdsToSkipAdding(newItem.getId());\n\t\tthis.pullItem.addTmpIdToSkipSorting(newItem.getId());\n\n\t\tthis.sendRequestToCreateTask(entity, newItem).then((response) => {\n\n\t\t\tinput.unDisable();\n\t\t\tinput.focus();\n\n\t\t\tthis.fillItemAfterCreation(newItem, response.data);\n\n\t\t\tresponse.data.tags.forEach((tag) => {\n\t\t\t\tthis.tagSearcher.addTagToSearcher(tag);\n\t\t\t});\n\t\t\tentity.setItem(newItem);\n\n\t\t\tthis.updateEntityCounters(entity);\n\n\t\t\tif (this.decomposition)\n\t\t\t{\n\t\t\t\tconst parentItem: Item = this.decomposition.getParentItem();\n\n\t\t\t\tif (!entity.isBacklog())\n\t\t\t\t{\n\t\t\t\t\tconst subTasks = parentItem.getSubTasks();\n\n\t\t\t\t\tsubTasks.addTask(newItem);\n\n\t\t\t\t\tif (!subTasks.isShown())\n\t\t\t\t\t{\n\t\t\t\t\t\tentity.appendNodeAfterItem(subTasks.render(), parentItem.getNode());\n\t\t\t\t\t}\n\n\t\t\t\t\tconst subTaskInfo = {};\n\t\t\t\t\tsubTaskInfo[newItem.getSourceId()] = {\n\t\t\t\t\t\tsourceId: newItem.getSourceId(),\n\t\t\t\t\t\tcompleted: 'N',\n\t\t\t\t\t\tstoryPoints: ''\n\t\t\t\t\t};\n\n\t\t\t\t\tparentItem.setSubTasksInfo({...parentItem.getSubTasksInfo(), ...subTaskInfo})\n\t\t\t\t\tparentItem.setParentTask('Y');\n\n\t\t\t\t\tparentItem.showSubTasks();\n\t\t\t\t}\n\t\t\t}\n\t\t\tentity.adjustListItemsWidth();\n\t\t\tthis.planBuilder.adjustSprintListWidth();\n\t\t}).catch((response) => {\n\t\t\tthis.requestSender.showErrorAlert(response);\n\t\t});\n\t}\n\n\tonUpdateItem(baseEvent: BaseEvent)\n\t{\n\t\tconst entity = baseEvent.getTarget();\n\t\tconst updateData = baseEvent.getData();\n\n\t\tthis.pullItem.addIdToSkipUpdating(updateData.itemId);\n\n\t\tthis.requestSender.updateItem(baseEvent.getData())\n\t\t\t.then(() => {\n\t\t\t\tconst isStoryPointsUpdated = (!Type.isUndefined(updateData.storyPoints));\n\t\t\t\tif (isStoryPointsUpdated)\n\t\t\t\t{\n\t\t\t\t\tthis.updateEntityCounters(entity);\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch((response) => {\n\t\t\t\tthis.requestSender.showErrorAlert(response);\n\t\t\t})\n\t\t;\n\t}\n\n\tonGetSubTasks(baseEvent: BaseEvent)\n\t{\n\t\tconst sprint: Sprint = baseEvent.getTarget();\n\t\tconst subTasks: SubTasks = baseEvent.getData();\n\n\t\tthis.requestSender.getSubTaskItems({\n\t\t\tentityId: sprint.getId(),\n\t\t\ttaskId: subTasks.getParentItem().getSourceId()\n\t\t})\n\t\t\t.then((response) => {\n\t\t\t\tresponse.data.forEach((itemParams: ItemParams) => {\n\t\t\t\t\tconst subTaskItem = Item.buildItem(itemParams);\n\t\t\t\t\tsprint.setItem(subTaskItem);\n\t\t\t\t\tsubTasks.addTask(subTaskItem);\n\t\t\t\t});\n\t\t\t\tsubTasks.show();\n\t\t\t\tthis.planBuilder.adjustSprintListWidth();\n\t\t\t})\n\t\t\t.catch((response) => {\n\t\t\t\tthis.requestSender.showErrorAlert(response);\n\t\t\t})\n\t\t;\n\t}\n\n\tonChangeTaskResponsible(baseEvent: BaseEvent)\n\t{\n\t\tthis.pullItem.addIdToSkipUpdating(baseEvent.getData().getId());\n\n\t\tthis.requestSender.changeTaskResponsible({\n\t\t\titemId: baseEvent.getData().getId(),\n\t\t\tsourceId: baseEvent.getData().getSourceId(),\n\t\t\tresponsible: baseEvent.getData().getResponsible().getValue(),\n\t\t}).catch((response) => {\n\t\t\tthis.requestSender.showErrorAlert(response);\n\t\t});\n\t}\n\n\tonOpenEpicForm(baseEvent: BaseEvent)\n\t{\n\t\tconst button: HTMLElement = baseEvent.getData();\n\n\t\tDom.addClass(button, 'ui-btn-wait');\n\n\t\tthis.epic.openAddForm().then(() => {\n\t\t\tDom.removeClass(button, 'ui-btn-wait');\n\t\t});\n\t}\n\n\tonStartSprint(baseEvent: BaseEvent)\n\t{\n\t\tconst sprint = baseEvent.getTarget();\n\n\t\tconst sprintSidePanel = new SprintSidePanel({\n\t\t\tsidePanel: this.sidePanel,\n\t\t\tgroupId: this.groupId,\n\t\t\tviews: this.views\n\t\t});\n\n\t\tsprintSidePanel.showStartForm(sprint);\n\t}\n\n\tonCompleteSprint()\n\t{\n\t\tconst sprintSidePanel = new SprintSidePanel({\n\t\t\tsidePanel: this.sidePanel,\n\t\t\tgroupId: this.groupId,\n\t\t\tviews: this.views\n\t\t});\n\n\t\tsprintSidePanel.showCompletionForm();\n\n\t\tsprintSidePanel.subscribe('showTask', (innerBaseEvent: BaseEvent) => {\n\t\t\tthis.sidePanel.openSidePanelByUrl(this.getPathToTask().replace('#task_id#', innerBaseEvent.getData()));\n\t\t});\n\t}\n\n\tonRemoveSprint(baseEvent: BaseEvent)\n\t{\n\t\tconst sprint: Sprint = baseEvent.getTarget();\n\n\t\tthis.pullSprint.addIdToSkipRemoving(sprint.getId());\n\n\t\tthis.requestSender.removeSprint({\n\t\t\tsprintId: sprint.getId(),\n\t\t\tsortInfo: this.sprintMover.calculateSprintSort()\n\t\t})\n\t\t.then((response) => {\n\n\t\t\t[...sprint.getItems().values()]\n\t\t\t\t.map((item: Item) => {\n\t\t\t\t\tthis.moveToBacklog(sprint, item);\n\t\t\t\t})\n\t\t\t;\n\n\t\t\tthis.destroyActionPanel();\n\n\t\t\tsprint.removeYourself();\n\n\t\t\tthis.entityStorage.removeSprint(sprint.getId());\n\n\t\t\tthis.planBuilder.adjustSprintListWidth();\n\t\t})\n\t\t.catch((response) => {\n\t\t\tthis.requestSender.showErrorAlert(response);\n\t\t});\n\t}\n\n\tonChangeSprintName(baseEvent: BaseEvent)\n\t{\n\t\tconst requestData = baseEvent.getData();\n\t\tthis.pullSprint.addIdToSkipUpdating(requestData.sprintId);\n\t\tthis.requestSender.changeSprintName(requestData).catch((response) => {\n\t\t\tthis.requestSender.showErrorAlert(response);\n\t\t});\n\t}\n\n\tonChangeSprintDeadline(baseEvent: BaseEvent)\n\t{\n\t\tconst requestData = baseEvent.getData();\n\t\tthis.pullSprint.addIdToSkipUpdating(requestData.sprintId);\n\t\tthis.requestSender.changeSprintDeadline(requestData).catch((response) => {\n\t\t\tthis.requestSender.showErrorAlert(response);\n\t\t});\n\t}\n\n\tonGetSprintCompletedItems(baseEvent: BaseEvent)\n\t{\n\t\tconst sprint = baseEvent.getTarget();\n\t\tconst listItemsNode = sprint.getListItemsNode();\n\t\tconst listPosition = Dom.getPosition(listItemsNode);\n\n\t\tsprint.getContentContainer().style.height = 'auto'; //todo ppc\n\n\t\tconst loader = new Loader({\n\t\t\tsize: 60,\n\t\t\tmode: 'inline',\n\t\t\tcolor: '#eaeaea',\n\t\t\toffset: {\n\t\t\t\tleft: `${(listPosition.width / 2 - 30)}px`\n\t\t\t}\n\t\t});\n\n\t\tloader.show(); // todo promise wtf\n\n\t\tthis.requestSender.getSprintCompletedItems({\n\t\t\tsprintId: sprint.getId()\n\t\t}).then((response) => {\n\t\t\tloader.hide();\n\t\t\tif (response.data.length > 0)\n\t\t\t{\n\t\t\t\tresponse.data.forEach((itemParams: ItemParams) => {\n\t\t\t\t\tconst item = Item.buildItem(itemParams);\n\t\t\t\t\titem.setDisableStatus(sprint.isDisabled());\n\t\t\t\t\tsprint.appendItemToList(item);\n\t\t\t\t\tsprint.setItem(item);\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tsprint.showBlank();\n\t\t\t}\n\t\t\tsprint.showContent(sprint.getContentContainer());\n\t\t}).catch((response) => {\n\t\t\tloader.hide();\n\t\t\tthis.requestSender.showErrorAlert(response);\n\t\t});\n\t}\n\n\tonShowSprintBurnDownChart(baseEvent: BaseEvent)\n\t{\n\t\tconst sprint = baseEvent.getTarget();\n\n\t\tconst sprintSidePanel = new SprintSidePanel({\n\t\t\tsidePanel: this.sidePanel,\n\t\t\tgroupId: this.groupId,\n\t\t\tviews: this.views\n\t\t});\n\n\t\tsprintSidePanel.showBurnDownChart(sprint);\n\t}\n\n\tonOpenSprintAddMenu(baseEvent: BaseEvent)\n\t{\n\t\tconst entity = baseEvent.getTarget();\n\t\tconst button = baseEvent.getData().getNode();\n\n\t\tif (this.sprintAddMenu)\n\t\t{\n\t\t\tthis.sprintAddMenu.getPopupWindow().destroy();\n\t\t\tthis.sprintAddMenu = null;\n\n\t\t\treturn;\n\t\t}\n\n\t\tconst buttonRect = button.getBoundingClientRect();\n\n\t\tthis.sprintAddMenu = new Menu({\n\t\t\tid: 'tasks-scrum-sprint-add-menu',\n\t\t\tbindElement: button,\n\t\t\tcloseByEsc : true,\n\t\t\tangle: {\n\t\t\t\tposition: 'top',\n\t\t\t\toffset: 78\n\t\t\t},\n\t\t\toffsetLeft: buttonRect.width - 67\n\t\t});\n\n\t\tthis.sprintAddMenu.addMenuItem({\n\t\t\ttext: Loc.getMessage('TASKS_SCRUM_BACKLOG_SPRINT_FIRST_ADD'),\n\t\t\tonclick: (event, menuItem) => {\n\t\t\t\tthis.input.setEntity(entity);\n\t\t\t\tthis.input.cleanBindNode();\n\t\t\t\tthis.renderInput();\n\t\t\t\tmenuItem.getMenuWindow().close();\n\t\t\t}\n\t\t});\n\t\tthis.sprintAddMenu.addMenuItem({\n\t\t\ttext: Loc.getMessage('TASKS_SCRUM_BACKLOG_SPRINT_SECOND_ADD'),\n\t\t\tonclick: (event, menuItem) => {\n\t\t\t\tthis.planBuilder.createSprint();\n\t\t\t\tmenuItem.getMenuWindow().close();\n\t\t\t}\n\t\t});\n\n\t\tthis.sprintAddMenu.getPopupWindow().subscribe('onClose', () => {\n\t\t\tthis.sprintAddMenu.getPopupWindow().destroy();\n\t\t\tthis.sprintAddMenu = null;\n\t\t});\n\t\tthis.sprintAddMenu.getPopupWindow().subscribe('onShow', () => {\n\t\t\tconst angle = this.sprintAddMenu.getMenuContainer().querySelector('.popup-window-angly');\n\t\t\tangle.style.pointerEvents = 'none';\n\t\t});\n\n\t\tthis.sprintAddMenu.show();\n\t}\n\n\tonShowTask(baseEvent: BaseEvent)\n\t{\n\t\tconst item = baseEvent.getData();\n\n\t\tthis.sidePanel.openSidePanelByUrl(this.pathToTask.replace('#task_id#', item.getSourceId()));\n\t}\n\n\tonTagsSearchOpen(baseEvent: BaseEvent)\n\t{\n\t\tthis.tagSearcher.showTagsSearchDialog(this.input, baseEvent.getData());\n\t}\n\n\tonTagsSearchClose()\n\t{\n\t\tthis.tagSearcher.closeTagsSearchDialog();\n\t}\n\n\tonFilterByTag(baseEvent: BaseEvent)\n\t{\n\t\tconst tag = baseEvent.getData();\n\t\tconst currentValue = this.filter.getValueFromField({name: 'TAG', value: ''});\n\n\t\tif (String(tag) === String(currentValue))\n\t\t{\n\t\t\tthis.filter.setValueToField({name: 'TAG', value: ''});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.filter.setValueToField({name: 'TAG', value: String(tag)});\n\t\t}\n\n\t\tthis.filter.scrollToSearchContainer();\n\t}\n\n\tonEpicSearchOpen(baseEvent: BaseEvent)\n\t{\n\t\tthis.tagSearcher.showEpicSearchDialog(this.input, baseEvent.getData());\n\t}\n\n\tonEpicSearchClose()\n\t{\n\t\tthis.tagSearcher.closeEpicSearchDialog();\n\t}\n\n\tonFilterByEpic(baseEvent: BaseEvent)\n\t{\n\t\tconst epicId = baseEvent.getData();\n\t\tconst currentValue = this.filter.getValueFromField({name: 'EPIC', value: ''});\n\n\t\tif (String(epicId) === String(currentValue))\n\t\t{\n\t\t\tthis.filter.setValueToField({name: 'EPIC', value: ''});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.filter.setValueToField({name: 'EPIC', value: String(epicId)});\n\t\t}\n\n\t\tthis.filter.scrollToSearchContainer();\n\t}\n\n\tonLoadItems(baseEvent: BaseEvent)\n\t{\n\t\tconst entity = baseEvent.getTarget();\n\n\t\tentity.setActiveLoadItems(true);\n\n\t\tif (entity.getNumberItems() >= this.pageSize)\n\t\t{\n\t\t\tentity.getListItems().addScrollbar();\n\t\t}\n\n\t\tconst loader = entity.showItemsLoader();\n\n\t\tconst requestData = {\n\t\t\tentityId: entity.getId(),\n\t\t\tpageNumber: entity.getPageNumberItems() + 1,\n\t\t\tpageSize: this.pageSize\n\t\t};\n\n\t\tthis.requestSender.getItems(requestData)\n\t\t\t.then((response) => {\n\t\t\t\tconst items = response.data;\n\t\t\t\tif (Type.isArray(items) && items.length)\n\t\t\t\t{\n\t\t\t\t\tentity.incrementPageNumberItems();\n\t\t\t\t\tentity.setActiveLoadItems(false);\n\n\t\t\t\t\tthis.createItemsInEntity(entity, items);\n\n\t\t\t\t\tif (entity.isGroupMode())\n\t\t\t\t\t{\n\t\t\t\t\t\tentity.activateGroupMode();\n\t\t\t\t\t}\n\n\t\t\t\t\tentity.bindItemsLoader();\n\t\t\t\t}\n\t\t\t\tloader.hide();\n\t\t\t})\n\t\t\t.catch((response) => {\n\t\t\t\tloader.hide();\n\t\t\t\tentity.setActiveLoadItems(false);\n\t\t\t\tthis.requestSender.showErrorAlert(response);\n\t\t\t})\n\t\t;\n\t}\n\n\tonShowTeamSpeedChart()\n\t{\n\t\tthis.sidePanel.showByExtension('Team-Speed-Chart', { groupId: this.groupId });\n\t}\n\n\tonOpenListEpicGrid()\n\t{\n\t\tthis.epic.openList();\n\t}\n\n\tonChangeShortView(baseEvent: BaseEvent)\n\t{\n\t\tconst isShortView = baseEvent.getData();\n\n\t\tthis.planBuilder.setShortView(isShortView);\n\n\t\tthis.destroyActionPanel();\n\n\t\tconst entities = this.entityStorage.getAllEntities();\n\n\t\tentities\n\t\t\t.forEach((entity: Entity) => {\n\t\t\t\tif (!entity.isCompleted())\n\t\t\t\t{\n\t\t\t\t\tentity.deactivateGroupMode();\n\t\t\t\t\tentity.fadeOut();\n\t\t\t\t}\n\t\t\t})\n\t\t;\n\n\t\tthis.requestSender.saveShortView({\n\t\t\tisShortView: isShortView\n\t\t})\n\t\t.then((response) => {\n\t\t\tentities\n\t\t\t\t.forEach((entity: Entity) => {\n\t\t\t\t\tif (!entity.isCompleted())\n\t\t\t\t\t{\n\t\t\t\t\t\tentity.setShortView(isShortView);\n\t\t\t\t\t\tentity.fadeIn();\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t;\n\t\t})\n\t\t.catch((response) => {\n\t\t\tentities\n\t\t\t\t.forEach((entity: Entity) => {\n\t\t\t\t\tif (!entity.isCompleted())\n\t\t\t\t\t{\n\t\t\t\t\t\tentity.fadeIn();\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t;\n\t\t\tthis.requestSender.showErrorAlert(response);\n\t\t});\n\t}\n\n\tonToggleActionPanel(baseEvent: BaseEvent)\n\t{\n\t\tconst item = baseEvent.getData();\n\t\tconst entity = baseEvent.getTarget();\n\n\t\tif (this.actionPanel)\n\t\t{\n\t\t\tconst repeatedClick = (this.actionPanel.getItem().getId() === item.getId());\n\n\t\t\tthis.destroyActionPanel();\n\n\t\t\tif (repeatedClick || entity.hasItemInGroupMode(item))\n\t\t\t{\n\t\t\t\tthis.deactivateGroupMode(entity, item);\n\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tthis.activateGroupMode(entity, item);\n\n\t\tthis.showActionPanel(entity, item);\n\n\t\tif (this.searchItems.isActive())\n\t\t{\n\t\t\tthis.searchItems.updateCurrentIndexByItem(item);\n\t\t}\n\t}\n\n\tonShowLinked(baseEvent: BaseEvent)\n\t{\n\t\tconst item = baseEvent.getData();\n\n\t\tif (this.searchItems.isActive())\n\t\t{\n\t\t\tthis.searchItems.stop();\n\n\t\t\treturn;\n\t\t}\n\n\t\tthis.destroyActionPanel();\n\n\t\tconst containerPosition = Dom.getPosition(this.planBuilder.getScrumContainer());\n\n\t\twindow.scrollTo({ top: containerPosition.top, behavior: 'smooth' });\n\n\t\tconst loader = new Loader({\n\t\t\ttarget: this.planBuilder.getScrumContainer(),\n\t\t\toffset: {\n\t\t\t\ttop: `${containerPosition.top / 2}px`\n\t\t\t}\n\t\t});\n\n\t\tloader.show();\n\n\t\tthis.searchItems.deactivateGroupMode();\n\t\tthis.searchItems.fadeOutAll();\n\n\t\tthis.requestSender.showLinkedTasks({\n\t\t\ttaskId: item.getSourceId()\n\t\t})\n\t\t\t.then((response: ShowLinkedTasksResponse) => {\n\t\t\t\tconst filteredItems = response.data.items;\n\t\t\t\tconst linkedItemIds = response.data.linkedItemIds;\n\n\t\t\t\tfilteredItems.forEach((itemParams: ItemParams) => {\n\t\t\t\t\tconst item = Item.buildItem(itemParams);\n\t\t\t\t\tconst entity = this.entityStorage.findEntityByEntityId(item.getEntityId());\n\n\t\t\t\t\tif (!entity.isCompleted() && !entity.hasItem(item))\n\t\t\t\t\t{\n\t\t\t\t\t\titem.setShortView(entity.getShortView());\n\t\t\t\t\t\tentity.appendItemToList(item);\n\t\t\t\t\t\tentity.setItem(item);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tconst allItems = this.entityStorage.getAllItems();\n\t\t\t\tconst items = new Set();\n\t\t\t\tlinkedItemIds.forEach((itemId: number) => {\n\t\t\t\t\tif (allItems.has(itemId))\n\t\t\t\t\t{\n\t\t\t\t\t\titems.add(allItems.get(itemId));\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tthis.itemDesigner.updateBorderColor(items);\n\n\t\t\t\tif (linkedItemIds.length > 0)\n\t\t\t\t{\n\t\t\t\t\tthis.searchItems.start(item, linkedItemIds);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.searchItems.fadeInAll();\n\t\t\t\t}\n\n\t\t\t\tloader.hide();\n\t\t\t})\n\t\t\t.catch((response) => {\n\t\t\t\tthis.requestSender.showErrorAlert(response);\n\n\t\t\t\tloader.hide();\n\t\t\t})\n\t\t;\n\t}\n\n\tonActionPanelScroll()\n\t{\n\t\tif (this.actionPanel)\n\t\t{\n\t\t\tthis.actionPanel.calculatePanelTopPosition();\n\t\t}\n\t}\n\n\tonShowBlank(baseEvent: BaseEvent)\n\t{\n\t\tconst backlog: Backlog = baseEvent.getTarget();\n\n\t\tsetTimeout(() => {\n\t\t\tif (!backlog.isEmpty())\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (this.entityStorage.existsAtLeastOneItem())\n\t\t\t{\n\t\t\t\tbacklog.showDropzone();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tbacklog.showBlank();\n\t\t\t}\n\t\t}, 200);\n\t}\n\n\trenderInput()\n\t{\n\t\tconst entity: Entity = this.input.getEntity();\n\t\tconst bindNode: ?HTMLElement = this.input.getBindNode();\n\n\t\tif (bindNode)\n\t\t{\n\t\t\tDom.insertAfter(this.input.render(), bindNode);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (entity.isEmpty())\n\t\t\t{\n\t\t\t\tDom.insertBefore(this.input.render(), entity.getLoaderNode());\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tDom.insertBefore(this.input.render(), entity.getFirstItemNode(this.input));\n\t\t\t}\n\t\t}\n\n\t\tthis.input.getInputNode().focus();\n\n\t\tthis.scrollToInput();\n\t}\n\n\tscrollToInput()\n\t{\n\t\tconst entity: Entity = this.input.getEntity();\n\n\t\tif (entity.isBacklog())\n\t\t{\n\t\t\tconst scrollContainer = entity.getListItemsNode();\n\n\t\t\tconst topPosition = Dom.getRelativePosition(this.input.getInputNode(), scrollContainer).top;\n\n\t\t\tscrollContainer.scrollTo({\n\t\t\t\ttop: scrollContainer.scrollTop + topPosition - 100,\n\t\t\t\tbehavior: 'smooth'\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tconst sprintsContainer = this.planBuilder.getSprintsContainer()\n\n\t\t\tconst topPosition = Dom.getRelativePosition(this.input.getInputNode(), sprintsContainer).top;\n\n\t\t\tsprintsContainer.scrollTo({\n\t\t\t\ttop: sprintsContainer.scrollTop + topPosition - 100,\n\t\t\t\tbehavior: 'smooth'\n\t\t\t});\n\t\t}\n\t}\n\n\tcreateItemsInEntity(entity: Entity, items: Array)\n\t{\n\t\titems.forEach((itemData: ItemParams) => {\n\t\t\tconst item = Item.buildItem(itemData);\n\t\t\titem.setEntityType(entity.getEntityType());\n\t\t\tif (!this.entityStorage.findItemByItemId(item.getId()))\n\t\t\t{\n\t\t\t\titem.setShortView(entity.getShortView());\n\t\t\t\tentity.appendItemToList(item);\n\t\t\t\tentity.setItem(item);\n\t\t\t}\n\t\t});\n\t}\n\n\tshowActionPanel(entity: Entity, item: Item)\n\t{\n\t\tconst stopSearch = () => {\n\t\t\tif (this.searchItems.isActive())\n\t\t\t{\n\t\t\t\tthis.searchItems.stop();\n\t\t\t}\n\t\t}\n\n\t\tconst isMultipleAction = (entity.getGroupModeItems().size > 1);\n\n\t\t//todo maybe will cool move list actions to item scope\n\t\tthis.actionPanel = new ActionPanel({\n\t\t\tentity: entity,\n\t\t\titem: item,\n\t\t\titemList: {\n\t\t\t\ttask: {\n\t\t\t\t\tactivity: true,\n\t\t\t\t\tdisable : isMultipleAction,\n\t\t\t\t\tcallback: () => {\n\t\t\t\t\t\tthis.onShowTask(\n\t\t\t\t\t\t\tnew BaseEvent({\n\t\t\t\t\t\t\t\tdata: item\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t);\n\t\t\t\t\t\tthis.destroyActionPanel();\n\t\t\t\t\t\tentity.deactivateGroupMode();\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tattachment: {\n\t\t\t\t\tactivity: true,\n\t\t\t\t\tdisable : !item.isEditAllowed(),\n\t\t\t\t\tcallback: (event) => {\n\t\t\t\t\t\tconst diskManager = new DiskManager({\n\t\t\t\t\t\t\tufDiskFilesFieldName: 'UF_TASK_WEBDAV_FILES'\n\t\t\t\t\t\t});\n\t\t\t\t\t\tdiskManager.subscribe('onFinish', (baseEvent) => {\n\t\t\t\t\t\t\tthis.attachFilesToTask(entity, baseEvent.getData());\n\t\t\t\t\t\t});\n\t\t\t\t\t\tdiskManager.showAttachmentMenu(event.currentTarget);\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tdod: {\n\t\t\t\t\tactivity: true,\n\t\t\t\t\tdisable : isMultipleAction,\n\t\t\t\t\tcallback: () => {\n\t\t\t\t\t\tthis.showDod(item);\n\t\t\t\t\t\tthis.destroyActionPanel();\n\t\t\t\t\t\tentity.deactivateGroupMode();\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tmove: {\n\t\t\t\t\tactivity: true,\n\t\t\t\t\tdisable : (!item.isMovable()),\n\t\t\t\t\tcallback: (event) => {\n\t\t\t\t\t\tthis.moveItem(item, event.currentTarget);\n\t\t\t\t\t\tstopSearch();\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tsprint: {\n\t\t\t\t\tactivity: true,\n\t\t\t\t\tdisable : false,\n\t\t\t\t\tcallback: (event) => {\n\t\t\t\t\t\tthis.moveToSprint(entity, item, event.currentTarget);\n\t\t\t\t\t\tstopSearch();\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tbacklog: {\n\t\t\t\t\tactivity: true,\n\t\t\t\t\tdisable : (item.getEntityType() !== 'sprint'),\n\t\t\t\t\tcallback: () => {\n\t\t\t\t\t\tthis.moveToBacklog(entity, item);\n\t\t\t\t\t\tthis.destroyActionPanel();\n\t\t\t\t\t\tstopSearch();\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\ttags: {\n\t\t\t\t\tactivity: true,\n\t\t\t\t\tcallback: (event) => {\n\t\t\t\t\t\tthis.showTagSearcher(entity, item, event.currentTarget);\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tepic: {\n\t\t\t\t\tactivity: true,\n\t\t\t\t\tcallback: (event) => {\n\t\t\t\t\t\tthis.showEpicSearcher(entity, item, event.currentTarget);\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tdecomposition: {\n\t\t\t\t\tactivity: true,\n\t\t\t\t\tdisable : (isMultipleAction),\n\t\t\t\t\tcallback: () => {\n\t\t\t\t\t\tif (entity.isBacklog())\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.startBacklogDecomposition(entity, item);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.startSprintDecomposition(entity, item);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.destroyActionPanel();\n\t\t\t\t\t\tentity.deactivateGroupMode();\n\t\t\t\t\t\tstopSearch();\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tremove: {\n\t\t\t\t\tactivity: true,\n\t\t\t\t\tdisable : (!item.isRemoveAllowed()),\n\t\t\t\t\tcallback: () => {\n\t\t\t\t\t\tMessageBox.confirm(\n\t\t\t\t\t\t\tLoc.getMessage('TASKS_SCRUM_CONFIRM_TEXT_REMOVE_TASKS'),\n\t\t\t\t\t\t\t(messageBox) => {\n\t\t\t\t\t\t\t\tmessageBox.close();\n\t\t\t\t\t\t\t\tthis.removeGroupItems(entity).then(() => {\n\t\t\t\t\t\t\t\t\tentity.getGroupModeItems().forEach((groupModeItem: Item) => {\n\t\t\t\t\t\t\t\t\t\tentity.removeItem(groupModeItem);\n\t\t\t\t\t\t\t\t\t\tthis.deactivateGroupMode(entity, groupModeItem);\n\t\t\t\t\t\t\t\t\t\tgroupModeItem.removeYourself();\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\tthis.updateEntityCounters(entity);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tLoc.getMessage('TASKS_SCRUM_BUTTON_TEXT_REMOVE'),\n\t\t\t\t\t\t);\n\t\t\t\t\t\tthis.destroyActionPanel();\n\t\t\t\t\t\tstopSearch();\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t}\n\t\t});\n\n\t\tthis.actionPanel.subscribe('unSelect', () => {\n\t\t\tthis.destroyActionPanel();\n\t\t\tentity.deactivateGroupMode();\n\t\t});\n\n\t\tthis.actionPanel.show();\n\t}\n\n\tactivateGroupMode(entity: Entity, item?: Item)\n\t{\n\t\tif (item)\n\t\t{\n\t\t\tentity.addItemToGroupMode(item);\n\t\t}\n\n\t\tif (entity.isGroupMode())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tentity.activateGroupMode();\n\n\t\tif (entity.getId() !== this.entityStorage.getBacklog().getId())\n\t\t{\n\t\t\tthis.entityStorage.getBacklog().deactivateGroupMode();\n\t\t}\n\t\tthis.entityStorage.getSprints().forEach((sprint) => {\n\t\t\tif (entity.getId() !== sprint.getId())\n\t\t\t{\n\t\t\t\tsprint.deactivateGroupMode();\n\t\t\t}\n\t\t});\n\t}\n\n\tdeactivateGroupMode(entity: Entity, item?: Item)\n\t{\n\t\tif (item)\n\t\t{\n\t\t\tentity.removeItemFromGroupMode(item);\n\t\t}\n\n\t\tif (!entity.isGroupMode())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst groupModeItems = entity.getGroupModeItems();\n\t\tif (groupModeItems.size === 0)\n\t\t{\n\t\t\tentity.deactivateGroupMode();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.showActionPanel(entity, Array.from(groupModeItems.values()).pop());\n\t\t}\n\t}\n\n\tcreateItem(value: string): Item\n\t{\n\t\tconst valueWithoutTags = value\n\t\t\t.replace(new RegExp(TagSearcher.tagRegExp,'g'), '')\n\t\t\t.replace(new RegExp(TagSearcher.epicRegExp,'g'), '')\n\t\t;\n\n\t\tconst item = Item.buildItem({\n\t\t\t'itemId': '',\n\t\t\t'name': valueWithoutTags\n\t\t});\n\n\t\titem.setShortView(this.isShortView);\n\n\t\treturn item;\n\t}\n\n\tsendRequestToCreateTask(entity: Entity, item: Item): Promise\n\t{\n\t\tconst requestData = {\n\t\t\t'tmpId': item.getId(),\n\t\t\t'name': item.getName().getValue(),\n\t\t\t'entityId': item.getEntityId(),\n\t\t\t'entityType': entity.getEntityType(),\n\t\t\t'epicId': item.getEpic().getValue().id,\n\t\t\t'sort': item.getSort(),\n\t\t\t'storyPoints': item.getStoryPoints().getValue().getPoints(),\n\t\t\t'tags': item.getTags().getValue(),\n\t\t\t'parentTaskId': item.getParentTaskId(),\n\t\t\t'responsible': item.getResponsible().getValue(),\n\t\t\t'info': item.getInfo(),\n\t\t\t'sortInfo': this.itemMover.calculateSort(entity.getListItemsNode())\n\t\t};\n\t\treturn this.requestSender.createTask(requestData);\n\t}\n\n\tfillItemBeforeCreation(entity: Entity, item: Item, value: string)\n\t{\n\t\titem.setParentEntity(entity.getId(), entity.getEntityType());\n\t\titem.setSort(1);\n\t\titem.setResponsible(this.defaultResponsible);\n\n\t\tconst tags = TagSearcher.getHashTagNamesFromText(value);\n\t\tif (tags.length > 0)\n\t\t{\n\t\t\titem.setTags(tags);\n\t\t}\n\n\t\tconst epicName = TagSearcher.getHashEpicNamesFromText(value).pop();\n\t\tif (epicName)\n\t\t{\n\t\t\titem.setEpic(this.tagSearcher.getEpicByName(epicName.trim()));\n\t\t}\n\t}\n\n\tfillItemAfterCreation(item: Item, responseData: Object): Item\n\t{\n\t\titem.setId(responseData.id);\n\t\titem.setEpic(responseData.epic);\n\t\titem.setTags(responseData.tags);\n\t\titem.setResponsible(responseData.responsible);\n\t\titem.setSourceId(responseData.sourceId);\n\t\titem.setAllowedActions(responseData.allowedActions);\n\t}\n\n\topenEpicEditForm(epicId)\n\t{\n\t\tthis.epic.openEditForm(epicId);\n\t}\n\n\tupdateEntityCounters(sourceEntity: Entity, endEntity?: Entity)\n\t{\n\t\tconst entities = new Map();\n\n\t\tentities.set(sourceEntity.getId(), sourceEntity);\n\t\tif (endEntity)\n\t\t{\n\t\t\tentities.set(endEntity.getId(), endEntity);\n\t\t}\n\n\t\tthis.entityCounters.updateCounters(entities);\n\t}\n\n\tdestroyActionPanel()\n\t{\n\t\tif (this.actionPanel)\n\t\t{\n\t\t\tthis.actionPanel.destroy();\n\t\t}\n\n\t\tthis.actionPanel = null;\n\t}\n\n\tgetActionPanel(): ?ActionPanel\n\t{\n\t\treturn this.actionPanel;\n\t}\n\n\tattachFilesToTask(entity: Entity, attachedIds: Array<string>)\n\t{\n\t\tif (attachedIds.length === 0)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst itemIds = [];\n\n\t\tentity.getGroupModeItems()\n\t\t\t.forEach((groupModeItem: Item) => {\n\t\t\t\tthis.pullItem.addIdToSkipUpdating(groupModeItem.getId());\n\t\t\t\titemIds.push(groupModeItem.getId());\n\t\t\t})\n\t\t;\n\n\t\tthis.requestSender.attachFilesToTask({\n\t\t\titemIds: itemIds,\n\t\t\tattachedIds: attachedIds,\n\t\t})\n\t\t\t.then((response) => {\n\t\t\t\tentity.getGroupModeItems()\n\t\t\t\t\t.forEach((groupModeItem: Item) => {\n\t\t\t\t\t\tgroupModeItem.setFiles(response.data.attachedFilesCount[groupModeItem.getId()]);\n\t\t\t\t\t})\n\t\t\t\t;\n\t\t\t\tthis.destroyActionPanel();\n\t\t\t\tentity.deactivateGroupMode();\n\t\t\t})\n\t\t\t.catch((response) => {\n\t\t\t\tthis.requestSender.showErrorAlert(response);\n\t\t\t})\n\t\t;\n\t}\n\n\tshowDod(item: Item)\n\t{\n\t\tthis.sidePanel.showByExtension('Dod', {\n\t\t\tview: 'list',\n\t\t\tgroupId: this.groupId,\n\t\t\ttaskId: item.getSourceId(),\n\t\t\tskipNotifications: true\n\t\t});\n\t}\n\n\tmoveItem(item: Item, bindButton: HTMLElement)\n\t{\n\t\tthis.itemMover.moveItem(item, bindButton);\n\t\tthis.itemMover.subscribe('moveMenuClose', () => {\n\t\t\tconst existOpenMenu = this.itemMover.hasActionPanelDialog() || this.tagSearcher.hasActionPanelDialog();\n\t\t\tif (!existOpenMenu)\n\t\t\t{\n\t\t\t\tthis.destroyActionPanel();\n\t\t\t}\n\t\t});\n\t}\n\n\tmoveToSprint(entityFrom: Entity, item: Item, bindButton: HTMLElement)\n\t{\n\t\tthis.itemMover.moveToAnotherEntity(entityFrom, item, null, bindButton);\n\t\tthis.itemMover.subscribe('moveToSprintMenuClose', () => {\n\t\t\tconst existOpenMenu = this.itemMover.hasActionPanelDialog() || this.tagSearcher.hasActionPanelDialog();\n\t\t\tif (!existOpenMenu)\n\t\t\t{\n\t\t\t\tthis.destroyActionPanel();\n\t\t\t}\n\t\t});\n\n\t\tif (this.entityStorage.getSprintsAvailableForFilling(entityFrom).size <= 1)\n\t\t{\n\t\t\tthis.destroyActionPanel();\n\t\t}\n\t}\n\n\tmoveToBacklog(sprint: Sprint, item: Item)\n\t{\n\t\tthis.itemMover.moveToAnotherEntity(sprint, item, this.entityStorage.getBacklog());\n\t}\n\n\tshowTagSearcher(entity: Entity, item: Item, bindButton: HTMLElement)\n\t{\n\t\tthis.tagSearcher.showTagsDialog(item, bindButton);\n\n\t\tthis.tagSearcher.unsubscribeAll('attachTagToTask');\n\t\tthis.tagSearcher.subscribe('attachTagToTask', (innerBaseEvent) => {\n\t\t\tconst tag = innerBaseEvent.getData();\n\n\t\t\tconst itemIds = [];\n\t\t\tentity.getGroupModeItems().forEach((groupModeItem: Item) => {\n\t\t\t\tthis.pullItem.addIdToSkipUpdating(groupModeItem.getId());\n\t\t\t\titemIds.push(groupModeItem.getId());\n\t\t\t});\n\t\t\tthis.requestSender.updateTaskTags({\n\t\t\t\titemIds: itemIds,\n\t\t\t\ttag: tag\n\t\t\t}).then((response) => {\n\t\t\t\tentity.getGroupModeItems().forEach((groupModeItem: Item) => {\n\t\t\t\t\tconst currentTags = groupModeItem.getTags().getValue();\n\t\t\t\t\tcurrentTags.push(tag);\n\t\t\t\t\tgroupModeItem.setTags(currentTags);\n\t\t\t\t});\n\t\t\t}).catch((response) => {\n\t\t\t\tthis.requestSender.showErrorAlert(response);\n\t\t\t});\n\n\t\t});\n\n\t\tthis.tagSearcher.unsubscribeAll('deAttachTagToTask');\n\t\tthis.tagSearcher.subscribe('deAttachTagToTask', (innerBaseEvent) => {\n\t\t\tconst tag = innerBaseEvent.getData();\n\n\t\t\tconst itemIds = [];\n\t\t\tentity.getGroupModeItems().forEach((groupModeItem: Item) => {\n\t\t\t\tthis.pullItem.addIdToSkipUpdating(groupModeItem.getId());\n\t\t\t\titemIds.push(groupModeItem.getId());\n\t\t\t});\n\t\t\tthis.requestSender.removeTaskTags({\n\t\t\t\titemIds: itemIds,\n\t\t\t\ttag: tag\n\t\t\t}).then((response) => {\n\t\t\t\tentity.getGroupModeItems().forEach((groupModeItem: Item) => {\n\t\t\t\t\tconst currentTags = groupModeItem.getTags().getValue();\n\t\t\t\t\tcurrentTags.splice(currentTags.indexOf(tag), 1);\n\t\t\t\t\tgroupModeItem.setTags(currentTags);\n\t\t\t\t});\n\t\t\t}).catch((response) => {\n\t\t\t\tthis.requestSender.showErrorAlert(response);\n\t\t\t});\n\t\t});\n\n\t\tthis.tagSearcher.unsubscribeAll('hideTagDialog');\n\t\tthis.tagSearcher.subscribe('hideTagDialog', () => {\n\t\t\tif (!this.tagSearcher.isEpicDialogShown())\n\t\t\t{\n\t\t\t\tthis.destroyActionPanel();\n\t\t\t\tentity.deactivateGroupMode();\n\t\t\t}\n\t\t});\n\t}\n\n\tshowEpicSearcher(entity: Entity, item: Item, bindButton: HTMLElement)\n\t{\n\t\tthis.tagSearcher.showEpicDialog(item, bindButton);\n\n\t\tthis.tagSearcher.unsubscribeAll('updateItemEpic');\n\t\tthis.tagSearcher.subscribe('updateItemEpic', (innerBaseEvent: BaseEvent) => {\n\t\t\tconst itemIds = [];\n\t\t\tconst epicId = innerBaseEvent.getData();\n\t\t\tentity.getGroupModeItems()\n\t\t\t\t.forEach((groupModeItem: Item) => {\n\t\t\t\t\tgroupModeItem.setEpic(this.tagSearcher.getEpicById(epicId));\n\t\t\t\t\titemIds.push(groupModeItem.getId());\n\t\t\t\t\tthis.pullItem.addIdToSkipUpdating(groupModeItem.getId());\n\t\t\t\t})\n\t\t\t;\n\t\t\tthis.requestSender.updateItemEpics({\n\t\t\t\titemIds: itemIds,\n\t\t\t\tepicId: epicId\n\t\t\t})\n\t\t\t\t.then((response) => {})\n\t\t\t\t.catch((response) => {\n\t\t\t\t\tthis.requestSender.showErrorAlert(response);\n\t\t\t\t})\n\t\t\t;\n\t\t});\n\n\t\tthis.tagSearcher.unsubscribeAll('hideEpicDialog');\n\t\tthis.tagSearcher.subscribe('hideEpicDialog', () => {\n\t\t\tthis.destroyActionPanel();\n\t\t\tentity.deactivateGroupMode();\n\t\t});\n\t}\n\n\tremoveGroupItems(entity: Entity): Promise\n\t{\n\t\tconst itemIds = [];\n\n\t\tentity.getGroupModeItems().forEach((groupModeItem: Item) => {\n\n\t\t\titemIds.push(groupModeItem.getId());\n\n\t\t\tthis.pullItem.addIdToSkipRemoving(groupModeItem.getId());\n\t\t});\n\n\t\treturn this.requestSender.removeItems({\n\t\t\titemIds: itemIds,\n\t\t\tsortInfo: this.itemMover.calculateSort(entity.getListItemsNode())\n\t\t}).catch((response) => {\n\t\t\tthis.requestSender.showErrorAlert(response);\n\t\t});\n\t}\n\n\tstartBacklogDecomposition(entity: Entity, parentItem: Item)\n\t{\n\t\tthis.decomposition = new Decomposition({\n\t\t\tparentItem: parentItem\n\t\t});\n\n\t\tthis.input.setEntity(entity);\n\t\tthis.input.setBindNode(parentItem.getNode());\n\n\t\tif (!parentItem.isLinkedTask())\n\t\t{\n\t\t\tthis.itemDesigner.getRandomColorForItemBorder()\n\t\t\t\t.then((randomColor: string) => {\n\t\t\t\t\tparentItem.setBorderColor(randomColor);\n\t\t\t\t})\n\t\t\t;\n\t\t}\n\n\t\tthis.renderInput();\n\t}\n\n\tstartSprintDecomposition(entity: Entity, parentItem: Item)\n\t{\n\t\tthis.decomposition = new Decomposition({\n\t\t\tparentItem: parentItem\n\t\t});\n\n\t\tconst renderInputAfterSubTasks = (subTasks: SubTasks) => {\n\t\t\tif (!subTasks.isShown())\n\t\t\t{\n\t\t\t\tentity.appendNodeAfterItem(subTasks.render(), parentItem.getNode());\n\t\t\t}\n\t\t\tparentItem.showSubTasks();\n\t\t\tthis.input.setEntity(entity);\n\t\t\tthis.input.setBindNode(subTasks.getNode());\n\n\t\t\tthis.renderInput();\n\t\t}\n\n\t\tif (parentItem.isParentTask())\n\t\t{\n\t\t\tconst subTasks = parentItem.getSubTasks();\n\n\t\t\tif (subTasks.isEmpty())\n\t\t\t{\n\t\t\t\tthis.requestSender.getSubTaskItems({\n\t\t\t\t\tentityId: entity.getId(),\n\t\t\t\t\ttaskId: parentItem.getSourceId()\n\t\t\t\t})\n\t\t\t\t\t.then((response) => {\n\t\t\t\t\t\tresponse.data.forEach((itemParams: ItemParams) => {\n\t\t\t\t\t\t\tconst subTaskItem = Item.buildItem(itemParams);\n\t\t\t\t\t\t\tentity.setItem(subTaskItem);\n\t\t\t\t\t\t\tsubTasks.addTask(subTaskItem);\n\t\t\t\t\t\t});\n\t\t\t\t\t\trenderInputAfterSubTasks(subTasks);\n\t\t\t\t\t})\n\t\t\t\t\t.catch((response) => {\n\t\t\t\t\t\tthis.requestSender.showErrorAlert(response);\n\t\t\t\t\t})\n\t\t\t\t;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\trenderInputAfterSubTasks(subTasks);\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.input.setEntity(entity);\n\t\t\tthis.input.setBindNode(parentItem.getNode());\n\n\t\t\tthis.renderInput();\n\t\t}\n\t}\n}\n","import {Event, Loc, Tag} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\n\nexport class ActiveSprintActionButton extends EventEmitter\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\n\t\tthis.setEventNamespace('BX.Tasks.Scrum.ActiveSprintButton');\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tconst node = Tag.render`\n\t\t\t<div class=\"ui-btn ui-btn-sm ui-btn-primary ui-btn-xs ui-btn-round ui-btn-no-caps\">\n\t\t\t\t<span>\n\t\t\t\t\t${Loc.getMessage('TASKS_SCRUM_ACTIONS_COMPLETE_SPRINT')}\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t`;\n\n\t\tEvent.bind(node, 'click', this.onCompleteSprintClick.bind(this));\n\n\t\treturn node;\n\t}\n\n\tonCompleteSprintClick()\n\t{\n\t\tthis.emit('completeSprint');\n\t}\n}","import {Event, Loc, Tag} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\n\nimport {SidePanel} from '../../service/side.panel';\n\nimport '../../css/robot.button.css';\n\ntype Params = {\n\tsidePanel: SidePanel,\n\tgroupId: number,\n\tisTaskLimitsExceeded: boolean,\n\tcanUseAutomation: boolean\n}\n\nexport class RobotButton extends EventEmitter\n{\n\tconstructor(params: Params)\n\t{\n\t\tsuper(params);\n\n\t\tthis.sidePanel = params.sidePanel;\n\t\tthis.isTaskLimitsExceeded = params.isTaskLimitsExceeded;\n\t\tthis.canUseAutomation = params.canUseAutomation;\n\t\tthis.groupId = params.groupId;\n\n\t\tthis.setEventNamespace('BX.Tasks.Scrum.RobotButton');\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tlet className = 'tasks-scrum-robot-btn ui-btn ui-btn-light-border ui-btn-no-caps ui-btn-themes ui-btn-round';\n\t\tif (this.isShowLimitSidePanel())\n\t\t{\n\t\t\tclassName += ' ui-btn-icon-lock';\n\t\t}\n\n\t\tconst node = Tag.render`\n\t\t\t<button class=\"${className}\">\n\t\t\t\t${Loc.getMessage('TASKS_SCRUM_ROBOTS_BUTTON')}\n\t\t\t</button>\n\t\t`;\n\n\t\tEvent.bind(node, 'click', this.onClick.bind(this));\n\n\t\treturn node;\n\t}\n\n\tonClick()\n\t{\n\t\tif (this.isShowLimitSidePanel())\n\t\t{\n\t\t\t// eslint-disable-next-line\n\t\t\tBX.UI.InfoHelper.show('limit_tasks_robots');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tconst url = '/bitrix/components/bitrix/tasks.automation/slider.php?site_id='\n\t\t\t\t+ Loc.getMessage('SITE_ID') + '&project_id=' + this.groupId;\n\n\t\t\tthis.sidePanel.openSidePanelByUrl(url);\n\t\t}\n\t}\n\n\tisShowLimitSidePanel(): boolean\n\t{\n\t\treturn (this.isTaskLimitsExceeded && !this.canUseAutomation);\n\t}\n}","import {Dom, Type} from 'main.core';\nimport {BaseEvent, EventEmitter} from 'main.core.events';\n\nimport {SidePanel} from '../service/side.panel';\n\nimport {View} from './view';\nimport {ActiveSprintActionButton} from './header/active.sprint.action.button';\nimport {RobotButton} from './header/robot.button';\n\nimport {SprintSidePanel} from '../entity/sprint/sprint.side.panel';\n\nimport {StatsBuilder} from '../entity/sprint/stats/stats.builder';\n\nimport type {Views} from './view';\n\ntype Params = {\n\tactiveSprintId: number,\n\tviews: Views,\n\ttaskLimitExceeded: 'Y' | 'N',\n\tcanUseAutomation: 'Y' | 'N'\n}\n\nexport class ActiveSprint extends View\n{\n\tconstructor(params: Params)\n\t{\n\t\tsuper(params);\n\n\t\tthis.setEventNamespace('BX.Tasks.Scrum.ActiveSprint');\n\n\t\tthis.setParams(params);\n\n\t\tif (this.existActiveSprint())\n\t\t{\n\t\t\tthis.bindHandlers();\n\t\t}\n\n\t\tthis.sidePanel = new SidePanel();\n\t}\n\n\trenderSprintStatsTo(container: HTMLElement)\n\t{\n\t\tsuper.renderSprintStatsTo(container);\n\n\t\t// todo ger data for sprint from server\n\t\tif (this.sprint)\n\t\t{\n\t\t\tthis.stats = StatsBuilder.build(this.sprint);\n\t\t\tthis.stats.setKanbanStyle();\n\n\t\t\tDom.append(this.stats.render(), container);\n\t\t}\n\t}\n\n\trenderRightElementsTo(container: HTMLElement)\n\t{\n\t\tsuper.renderRightElementsTo(container);\n\n\t\tif (!this.existActiveSprint())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst robotButton = new RobotButton({\n\t\t\tsidePanel: this.sidePanel,\n\t\t\tgroupId: this.getCurrentGroupId(),\n\t\t\tisTaskLimitsExceeded: this.isTaskLimitsExceeded(),\n\t\t\tcanUseAutomation: this.isCanUseAutomation()\n\t\t});\n\n\t\tconst activeSprintActionButton = new ActiveSprintActionButton();\n\t\tactiveSprintActionButton.subscribe('completeSprint', this.onCompleteSprint.bind(this));\n\t\tactiveSprintActionButton.subscribe('showBurnDownChart', this.onShowSprintBurnDownChart.bind(this));\n\n\t\tDom.addClass(container, '--without-bg');\n\n\t\tDom.append(robotButton.render(), container);\n\t\tDom.append(activeSprintActionButton.render(), container);\n\t}\n\n\tsetParams(params: Params)\n\t{\n\t\tthis.activeSprintId = parseInt(params.activeSprintId, 10);\n\n\t\tthis.setTaskLimitsExceeded(params.taskLimitExceeded);\n\t\tthis.setCanUseAutomation(params.canUseAutomation);\n\n\t\tthis.views = params.views;\n\t}\n\n\tsetTaskLimitsExceeded(limitExceeded: string)\n\t{\n\t\tthis.limitExceeded = (limitExceeded === 'Y');\n\t}\n\n\tisTaskLimitsExceeded(): boolean\n\t{\n\t\treturn this.limitExceeded;\n\t}\n\n\tsetCanUseAutomation(canUseAutomation: string)\n\t{\n\t\tthis.canUseAutomation = (canUseAutomation === 'Y');\n\t}\n\n\tisCanUseAutomation(): boolean\n\t{\n\t\treturn this.canUseAutomation;\n\t}\n\n\texistActiveSprint(): boolean\n\t{\n\t\treturn this.activeSprintId > 0;\n\t}\n\n\tbindHandlers()\n\t{\n\t\t// eslint-disable-next-line\n\t\tconst kanbanManager = BX.Tasks.Scrum.Kanban;\n\t\tif (kanbanManager)\n\t\t{\n\t\t\tthis.bindKanbanHandlers(kanbanManager.getKanban());\n\t\t\tkanbanManager.getKanbansGroupedByParentTasks().forEach((kanban) => {\n\t\t\t\tthis.bindKanbanHandlers(kanban);\n\t\t\t});\n\t\t}\n\t}\n\n\tbindKanbanHandlers(kanban)\n\t{\n\t\tEventEmitter.subscribe(kanban, 'Kanban.Grid:onItemMoved', (event: BaseEvent) => {\n\t\t\tconst [kanbanItem, targetColumn, beforeItem] = event.getCompatData();\n\t\t\tthis.onItemMoved(kanbanItem, targetColumn, beforeItem);\n\t\t});\n\t}\n\n\tonCompleteSprint(baseEvent: BaseEvent)\n\t{\n\t\tconst sprintSidePanel = new SprintSidePanel({\n\t\t\tgroupId: this.groupId,\n\t\t\tsidePanel: this.sidePanel,\n\t\t\tviews: this.views\n\t\t});\n\t\tsprintSidePanel.showCompletionForm();\n\n\t\tsprintSidePanel.subscribe('showTask', (innerBaseEvent: BaseEvent) => {\n\t\t\tthis.sidePanel.openSidePanelByUrl(this.getPathToTask().replace('#task_id#', innerBaseEvent.getData()));\n\t\t});\n\t}\n\n\t/**\n\t * Hook on item moved.\n\t * @param {BX.Tasks.Kanban.Item} kanbanItem\n\t * @param {BX.Tasks.Kanban.Column} targetColumn\n\t * @param {BX.Tasks.Kanban.Item} [beforeItem]\n\t * @returns {void}\n\t */\n\tonItemMoved(kanbanItem, targetColumn, beforeItem)\n\t{\n\t\t// todo update stats\n\t\t//this.stats.setSprintData(this.sprint);\n\t}\n\n\tonShowSprintBurnDownChart(baseEvent: BaseEvent)\n\t{\n\t\tconst sprintSidePanel = new SprintSidePanel({\n\t\t\tgroupId: this.groupId,\n\t\t\tsidePanel: this.sidePanel,\n\t\t\tviews: this.views\n\t\t});\n\t\tsprintSidePanel.showBurnDownChart(this.sprint);\n\t}\n}","import {Event, Loc, Tag} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\n\nexport class BurnDownButton extends EventEmitter\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\n\t\tthis.setEventNamespace('BX.Tasks.Scrum.BurnDownButton');\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tconst node = Tag.render`\n\t\t\t<div class=\"ui-btn ui-btn-sm ui-btn-primary ui-btn-xs ui-btn-round ui-btn-no-caps\">\n\t\t\t\t<span>\n\t\t\t\t\t${Loc.getMessage('TASKS_SCRUM_ACTIVE_SPRINT_BUTTON')}\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t`;\n\n\t\tEvent.bind(node, 'click', this.onClick.bind(this));\n\n\t\treturn node;\n\t}\n\n\tonClick()\n\t{\n\t\tthis.emit('click');\n\t}\n}","import {Dom, Text, Type} from 'main.core';\nimport {BaseEvent, EventEmitter} from 'main.core.events';\n\nimport {SidePanel} from '../service/side.panel';\n\nimport {Sprint} from '../entity/sprint/sprint';\nimport {SprintSidePanel} from '../entity/sprint/sprint.side.panel';\n\nimport {View} from './view';\nimport {BurnDownButton} from './header/burn.down.button';\n\nimport type {Views} from './view';\nimport type {SprintParams} from '../entity/sprint/sprint';\n\ntype Params = {\n\tviews: Views,\n\tcompletedSprint: SprintParams,\n\tsprints: Array<SprintParams>\n}\n\nexport class CompletedSprint extends View\n{\n\tconstructor(params: Params)\n\t{\n\t\tsuper(params);\n\n\t\tthis.setEventNamespace('BX.Tasks.Scrum.CompletedSprint');\n\n\t\tthis.setParams(params);\n\n\t\tthis.bindHandlers();\n\t}\n\n\trenderRightElementsTo(container: HTMLElement)\n\t{\n\t\tsuper.renderRightElementsTo(container);\n\n\t\tif (this.completedSprint === null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst burnDownButton = new BurnDownButton();\n\t\tburnDownButton.subscribe('click', this.onShowSprintBurnDownChart.bind(this));\n\n\t\tDom.addClass(container, '--without-bg');\n\n\t\tDom.append(burnDownButton.render(), container);\n\t}\n\n\tsetParams(params: Params)\n\t{\n\t\tif (Type.isArray(params.completedSprint))\n\t\t{\n\t\t\tthis.completedSprint = null;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.completedSprint = new Sprint(params.completedSprint);\n\t\t}\n\n\t\tthis.sidePanel = new SidePanel();\n\n\t\tthis.sprints = new Map();\n\t\tparams.sprints.forEach((sprintData) => {\n\t\t\tconst sprint = Sprint.buildSprint(sprintData);\n\t\t\tthis.sprints.set(sprint.getId(), sprint);\n\t\t});\n\t\tthis.views = params.views;\n\t}\n\n\tbindHandlers()\n\t{\n\t\tEventEmitter.subscribe('onTasksGroupSelectorChange', this.onSprintSelectorChange.bind(this));\n\t}\n\n\tonSprintSelectorChange(event: BaseEvent)\n\t{\n\t\tconst [currentSprint] = event.getCompatData()\n\n\t\tthis.completedSprint = this.findSprintBySprintId(currentSprint.sprintId);\n\n\t\tthis.titleContainer.textContent = Text.encode(currentSprint.name);\n\t}\n\n\tonShowSprintBurnDownChart(baseEvent: BaseEvent)\n\t{\n\t\tconst sprintSidePanel = new SprintSidePanel({\n\t\t\tgroupId: this.groupId,\n\t\t\tsidePanel: this.sidePanel,\n\t\t\tviews: this.views\n\t\t});\n\t\tsprintSidePanel.showBurnDownChart(this.completedSprint);\n\t}\n\n\tfindSprintBySprintId(sprintId: number): Sprint\n\t{\n\t\treturn [...this.sprints.values()].find((sprint) => sprint.getId() === parseInt(sprintId, 10));\n\t}\n}","import {Dom} from 'main.core';\n\nimport {View} from './view/view';\nimport {Plan} from './view/plan/plan';\nimport {ActiveSprint} from './view/active.sprint';\nimport {CompletedSprint} from './view/completed.sprint';\n\ntype Params = {\n\tviewName: string\n}\n\nexport class Entry\n{\n\tconstructor(params: Params)\n\t{\n\t\tthis.setParams(params);\n\n\t\tthis.buildView(params);\n\t}\n\n\tsetParams(params: Params)\n\t{\n\t\tthis.setViewName(params.viewName);\n\t}\n\n\tsetViewName(viewName: string)\n\t{\n\t\tconst availableViews = new Set([\n\t\t\t'plan',\n\t\t\t'activeSprint',\n\t\t\t'completedSprint'\n\t\t]);\n\n\t\tif (!availableViews.has(viewName))\n\t\t{\n\t\t\tthrow Error('Invalid value to activeView parameter');\n\t\t}\n\n\t\tthis.viewName = viewName;\n\t}\n\n\tgetViewName(): string\n\t{\n\t\treturn this.viewName;\n\t}\n\n\tsetView(view: View)\n\t{\n\t\tif (view instanceof View)\n\t\t{\n\t\t\tthis.view = view;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.view = null;\n\t\t}\n\t}\n\n\tgetView(): View\n\t{\n\t\treturn this.view;\n\t}\n\n\tbuildView(params: Params)\n\t{\n\t\tconst viewName = this.getViewName();\n\n\t\tif (viewName === 'plan')\n\t\t{\n\t\t\tthis.setView(new Plan(params));\n\t\t}\n\t\telse if (viewName === 'activeSprint')\n\t\t{\n\t\t\tthis.setView(new ActiveSprint(params));\n\t\t}\n\t\telse if (viewName === 'completedSprint')\n\t\t{\n\t\t\tthis.setView(new CompletedSprint(params));\n\t\t}\n\t}\n\n\trenderTo(container: HTMLElement)\n\t{\n\t\tconst view = this.getView();\n\t\tif (view instanceof View)\n\t\t{\n\t\t\tthis.getView().renderTo(container);\n\t\t}\n\t}\n\n\trenderTabsTo(container: HTMLElement)\n\t{\n\t\tconst view = this.getView();\n\t\tif (view instanceof View)\n\t\t{\n\t\t\tthis.getView().renderTabsTo(container);\n\t\t}\n\t}\n\n\trenderSprintStatsTo(container: HTMLElement)\n\t{\n\t\tconst view = this.getView();\n\t\tif (view instanceof View)\n\t\t{\n\t\t\tthis.getView().renderSprintStatsTo(container);\n\t\t}\n\t}\n\n\trenderRightElementsTo(container: HTMLElement)\n\t{\n\t\tconst view = this.getView();\n\t\tif (view instanceof View)\n\t\t{\n\t\t\tthis.getView().renderRightElementsTo(container);\n\t\t}\n\t}\n\n\topenEpicEditForm(epicId: number)\n\t{\n\t\tconst view = this.getView();\n\t\tif (view instanceof Plan)\n\t\t{\n\t\t\tview.openEpicEditForm(epicId);\n\t\t}\n\t}\n\n\tremoveEpic(epicId: number)\n\t{\n\t\tconst view = this.getView();\n\t\tif (view instanceof Plan)\n\t\t{\n\t\t\tview.removeEpic(epicId);\n\t\t}\n\t}\n\n\tsetDisplayPriority(menuItem: HTMLElement, value: string)\n\t{\n\t\tif (!Dom.hasClass(menuItem, 'menu-popup-item-accept'))\n\t\t{\n\t\t\tthis.refreshIcons(menuItem);\n\n\t\t\tconst view = this.getView();\n\t\t\tif (view instanceof View)\n\t\t\t{\n\t\t\t\tthis.getView().setDisplayPriority(value);\n\t\t\t}\n\t\t}\n\t}\n\n\trefreshIcons(item: HTMLElement)\n\t{\n\t\titem.parentElement.childNodes.forEach((element) => {\n\t\t\tDom.removeClass(element, 'menu-popup-item-accept');\n\t\t});\n\n\t\tDom.addClass(item, 'menu-popup-item-accept');\n\t}\n}\n"],"names":["SidePanel","setEventNamespace","sidePanelManager","BX","Instance","bindEvents","EventEmitter","subscribe","event","getCompatData","sliderEvent","sidePanel","getSlider","setCacheable","emit","currentSidePanel","Boolean","getPreviousSlider","topSidePanel","getTopSlider","reload","close","previousSidePanel","url","open","id","options","name","params","extensionName","toLowerCase","Runtime","loadExtension","then","exports","replaceAll","extension","show","RequestSender","signedParameters","debugMode","action","data","Promise","resolve","reject","ajax","runAction","runComponentAction","mode","sendRequestToComponent","response","alertTitle","Type","isUndefined","errors","console","log","length","firstError","shift","errorCode","code","message","title","Loc","getMessage","MessageBox","alert","Filter","filterId","requestSender","searchFieldApplied","initUiFilterManager","bindHandlers","filterManager","Main","getById","onApplyFilter","bind","getSearch","getContainer","filterSearchContainer","getSearchContainer","isNodeInViewport","scrollIntoView","values","filterInstance","promise","getSearchString","autoResolve","item","fieldInstances","getField","fieldOptions","getFieldByName","ITEMS","push","itemsNode","node","querySelector","items","Dom","attr","value","filterApi","getApi","filterFieldsValues","getFilterFieldsValues","setFields","apply","resetFields","forEach","resetFilter","applyFilter","element","rect","getBoundingClientRect","top","left","bottom","window","innerHeight","document","documentElement","clientHeight","right","innerWidth","clientWidth","Tabs","views","planTabActiveClass","active","activeTabActiveClass","completedTabActiveClass","Tag","render","Text","encode","querySelectorAll","tab","Event","getTopSidePanel","showLoader","View","isOwnerCurrentUser","filter","scrumManager","userId","parseInt","groupId","pathToTask","isString","container","isDomNode","Error","tabs","append","availableValues","Set","has","DiskManager","diskUrls","urlSelect","urlRenameFile","urlDeleteFile","urlUpload","attachedIds","controlId","getRandom","popup","Popup","content","getAttachmentsLoaderContent","autoHide","closeByEsc","angle","offsetTop","offsetLeft","Disk","UF","add","UID","controlName","hideSelectDialog","filesChooser","contentContainer","onCustomEvent","DiskFileDialog","openDiskFileDialog","popupWindow","addCustomEvent","onFileUploadSuccess","fileResult","uf","file","uploaderFile","element_id","toString","Toggle","visible","shown","onClick","isShown","Name","completed","trim","addClass","removeClass","Checklist","complete","isInteger","all","uiClasses","Files","count","Comments","taskCounter","isNull","color","Epic","epic","isArray","description","createdBy","modifiedBy","colorBorder","convertHexToRGBA","colorBackground","visibility","hexCode","opacity","hex","replace","r","substring","g","b","Tags","tags","map","tag","target","textContent","JSON","stringify","getValue","Responsible","responsible","isPlainObject","src","photo","photoStyle","StoryPointsStorage","storyPoints","isNaN","parseFloat","isFloat","toFixed","String","StoryPoints","storyPointsStorage","setPoints","disableStatus","getPoints","isEmpty","input","onBlur","onKeyDown","isDisable","inputContainer","firstElementChild","focus","setSelectionRange","currentValue","isComposing","key","blur","SubTasks","parentItem","list","Map","onTransitionEnd","remove","size","set","getId","getNode","clear","hideLoader","renderSubTasks","style","height","scrollHeight","innerHTML","loader","listPosition","getPosition","Loader","offset","width","hide","isHide","removeYourself","Item","groupMode","toggle","checklist","files","comments","subTasks","setItemParams","setId","setTmpId","tmpId","setSort","sort","setEntityId","entityId","setEntityType","entityType","setSourceId","sourceId","setInfo","info","setSubTasksInfo","subTasksInfo","setParentTask","isParentTask","setLinkedTask","isLinkedTask","setParentTaskId","parentTaskId","setSubTask","isSubTask","setCompleted","setDisableStatus","setAllowedActions","allowedActions","shortView","onShowToggle","onHideToggle","inputName","isCompleted","inputEpic","isShortView","renderFullView","updateTagsVisibility","inputTags","replaceTags","baseEvent","getData","inputResponsible","onResponsibleClick","inputStoryPoints","isDisabled","disable","onSetStoryPoints","dataset","setPreviousSort","previousSort","updateBorderColor","strikeOut","unStrikeOut","getSubTasksInfo","Object","keys","parentTask","setToggle","getSubTasksCount","linkedTask","subTask","borderColor","getBorderColor","colorNode","getEntityType","moveActivity","status","checked","getSubTasks","tmpItem","getName","setName","getChecklist","setChecklist","getComplete","getAll","getFiles","setFiles","getComments","setComments","getEpic","setEpic","getTags","isEqualTags","setTags","getResponsible","setResponsible","getStoryPoints","setStoryPoints","getEntityId","getParentTaskId","renderShortView","typeClass","subClass","linkedClass","entityClass","getSort","onItemClick","tagsContainer","tagsNode","tagNode","tagList","classList","contains","hasNode","isGroupMode","responsibleDialog","destroy","Dialog","targetNode","enableSearch","context","events","selectedItem","getTitle","getAvatar","entities","inviteEmployeeLink","itemId","hideSubTasks","parentNode","searchNode","skipParent","result","find","isEqualNode","nodes","getElementsByTagName","k","IntersectionObserver","observer","entries","isIntersecting","blink","disconnect","threshold","observe","setTimeout","checkListComplete","checkListAll","attachedFilesCount","setSubTasks","ListItems","entity","getItems","renderLoader","TagSearcher","allTags","tagName","avatar","epicName","get","delete","tagsList","epicList","epicId","currentTags","selectedItems","currentTag","choiceWasMade","tagDialog","multiple","dropdownMode","searchOptions","allowCreateItem","footerOptions","label","getTagsList","searchQuery","dialog","getTarget","getQuery","focusSearch","addTagToSearcher","newTag","getTagFromSearcher","addItem","select","getTagSelector","clearTextBox","selectFirstTab","deselectedItem","tagSelectorOptions","onInput","selector","getDialog","getTextBoxValue","currentEpic","currentEpicInfo","epicDialog","getEpicList","getSelectedItems","placeholder","isOpen","inputObject","enteredHashTagName","getInputNode","tagSearchDialog","getNodeId","offsetWidth","selectedHashTag","hashTags","getHashTagNamesFromText","enteredHashTag","pop","RegExp","deselect","setTagsSearchMode","subscribeOnce","search","enteredHashEpicName","epicSearchDialog","selectedHashEpic","epicRegExp","getEpicByName","setEpicSearchMode","inputText","regex","tagRegExp","matches","match","exec","Input","bindNode","taskCreated","nodeId","onTagSearch","onEpicSearch","onKeydown","isTagsSearchMode","isEpicSearchMode","stopImmediatePropagation","Browser","isMac","metaKey","ctrlKey","createTaskItem","inputNode","enteredHashTags","enteredHashEpics","getHashEpicNamesFromText","disabled","Entity","groupModeItems","setEntityParams","listItems","itemsLoaderNode","blank","dropzone","setViews","setNumberTasks","numberTasks","setShortView","exactSearchApplied","isExactSearchApplied","pageSize","pageNumberItems","isShownSubTasks","getListNode","listItemsNode","getListItemsNode","newItem","subscribeToItem","setItemMoveActivity","getShortView","hideBlank","hideDropzone","adjustListItemsWidth","setMoveActivity","unsubscribeAll","getList","removeItem","insertBefore","lastElementChild","setStats","bindItemsLoader","getSourceId","itemNode","fistNode","nextElementSibling","activateGroupMode","deactivateGroupMode","removeItemFromGroupMode","addItemToGroupMode","isActiveLoadItems","activeLoadItems","getNumberItems","newItemNode","bindItemNode","getLoaderNode","hasListItemsScroll","getListItems","addScrollbar","removeScrollbar","Header","backlog","uiEpicClasses","uiTaskClasses","renderTaskCounterLabel","getNumberTasks","buttons","onEpicClick","onTaskClick","button","Blank","isBacklog","renderBacklog","renderCompletedSprint","Dropzone","renderSprint","Backlog","setBacklogParams","header","itemData","buildItem","updateTaskCounter","onItemsScroll","backlogData","setHeader","setBlank","setDropzone","setListItems","Date","sprint","isActive","getFormattedDateStart","getFormattedDateEnd","getDateStartFormatted","getDateEndFormatted","parentPopup","closest","customBlur","calendar","showCalendar","field","bTime","bSetFocus","bHideTime","bindOnce","updateDateNode","date","format","Math","floor","parseDate","getTime","sendRequest","dateStartNode","dateEndNode","dateStartInput","dateEndInput","stopPropagation","sprintId","dateStart","unbind","dateEnd","weekCount","getDefaultSprintDuration","getDateStart","getDateEnd","StatsCalculator","first","second","round","Stats","setSprintData","statsCalculator","kanbanMode","setCompletedStoryPoints","getCompletedStoryPoints","setUncompletedStoryPoints","getUncompletedStoryPoints","setEndDate","weekendDaysTime","getWeekendDaysTime","completedStoryPoints","uncompletedStoryPoints","endDate","now","CompletedStats","percentage","calculatePercentage","completedDate","getCompletedDate","getEndDate","HeaderDate","getFormattedTitleDatePeriod","ExpiredStats","expiredDay","getExpiredDay","ActiveStats","remainingDays","getRemainingDays","dateWithWeekendOffset","setSeconds","getSeconds","setHours","msPerMinute","msPerHour","msPerDay","daysRemaining","StatsBuilder","isExpired","stats","build","renderEditInput","renderEdit","renderRemove","titleNode","editNode","isPlanned","removeNode","confirm","messageBox","ChartIcon","uiChartStyles","Counters","Button","uiBtnStyles","Info","chartIcon","counters","getUiClasses","getButtonText","getStatus","toUpperCase","Tick","tick","setDate","getHeaderClass","upTick","downTick","unDisable","setButton","setTick","Sprint","setSprintParams","hideCont","setDateStart","setDateEnd","setDateStartFormatted","dateStartFormatted","setDateEndFormatted","dateEndFormatted","setWeekendDaysTime","setDefaultSprintDuration","defaultSprintDuration","setStatus","setCompletedTasks","completedTasks","setUncompletedTasks","uncompletedTasks","setItems","buildHeader","onChangeName","onChangeSprintDeadline","toggleVisibilityContent","getContentContainer","sprintEnd","showDropzone","isNodeCreated","sprintSort","itemParams","sprintGoal","availableStatus","disableButton","unDisableButton","tmpSprint","openClass","appendNodeAfterItem","getCompletedTasks","getUncompletedTasks","activateEditMode","deactivateEditMode","requestData","hasOwnProperty","isHideContent","showContent","hideContent","display","EntityStorage","sprints","entityFrom","activeSprint","getActiveSprint","getPlannedSprints","backlogItems","filledSprint","recalculateItemsSort","CompletedSprints","entityStorage","pageNumber","statsUploaded","sprintsUploaded","isActiveLoad","renderHeader","renderList","listNode","observerTargetNode","bindLoad","btnStyles","btnNode","onBtnClick","currentTarget","hideList","showList","onLoadStats","renderObserverTarget","averageNumberTasks","averageNumberStoryPoints","averagePercentageCompletion","onLoadCompletedSprints","getCompletedSprintsStats","updateStats","catch","showErrorAlert","getCompletedSprints","createSprints","nameNode","statsHeaderNode","numberSprints","renderStats","sprintData","buildSprint","addSprint","onAfterAppend","PlanBuilder","pageNumberToCompletedSprints","displayPriority","scrumContainer","setWidthPriority","getBacklog","renderSprintsContainer","getSprints","adjustSprintListWidth","completedSprints","plannedSprints","sprintsNode","renderSprintDropzone","existCompletedSprint","updatePlannedSprints","onSprintsScroll","sprintDropzone","createSprint","countSprints","sprintParams","appendToPlannedContainer","scrollToSprint","getSprintsContainer","parentElement","hasScroll","scrollTo","behavior","sprintsContainer","position","getRelativePosition","scrollTop","existActiveSprint","plannedSprint","disableHeaderButton","unDisableHeaderButton","ActionPanel","bindElement","itemList","task","activity","attachment","dod","move","decomposition","isBlockBlur","observeBindElement","calculatePanelPosition","createActionPanel","bindItems","body","baseBtnClass","arrowClass","selected","getSelectedText","getGroupModeItems","disableClass","selectedBtn","callback","number","displayPanel","hidePanel","panel","fakePanel","cloneNode","isPanelWiderThanViewport","fakePanelRect","windowWidth","zIndex","removeLastSeparator","actionPanel","hasClass","SearchArrows","currentPosition","closeBtn","prevBtn","nextBtn","onClose","onPrev","onNext","Scroller","planBuilder","isItemInViewport","isBacklogItem","scrollContainer","itemTopPosition","hasItem","SearchItems","scroller","currentIndex","arrows","startItem","linkedItemIds","setList","fadeOutAll","scrollToItem","getCurrent","updateCurrentIndexByItem","activateCurrent","activateLinkedMode","showArrows","fadeInAll","cleanList","removeArrows","getAllItems","inputItem","deactivateCurrent","index","updateArrows","currentItem","activateCurrentLinkedMode","deactivateCurrentLinkedMode","fadeOut","setActiveLoadItems","fadeIn","stop","moveToPrev","moveToNext","adjustArrowsPosition","updateCurrentPosition","arrowsRect","backlogRect","deactivateLinkedMode","isClickInside","SprintMover","onSetDraggable","dragEndEvent","endContainer","updateSprintSort","sortInfo","calculateSprintSort","increment","listSortInfo","SprintSidePanel","showByExtension","location","href","EntityCounters","entityIds","getEntityCounters","ItemMover","entityCounters","draggableItems","addContainer","addDropzone","getDropzone","containers","dropZones","getSprintDropzone","Draggable","draggable","dragElement","type","DROP_PREVIEW","delay","onBeforeDragStart","onDragStart","onDragEnd","onDropEnd","onDragContainerEnter","onDragContainerOut","onDragOut","dragBeforeStartEvent","source","findItemByItemId","preventDefault","getAllEntities","entityItem","blockScrumContainerSelect","dragStartEvent","sourceContainer","sourceEntityId","sourceEntity","findEntityByEntityId","unblockScrumContainerSelect","endEntityId","endEntity","onItemMove","dragDropEvent","isSprintDropzone","addSprintContainers","moveTo","dragEnterContainerEvent","enterContainer","enter","dropPreview","getDropPreview","dragOutContainerEvent","out","dragOutEvent","outContainer","offsetHeight","insertDom","moveInCurrentContainer","onMoveConfirm","moveInAnotherContainer","children","entityTo","updateItem","fromActiveSprint","toActiveSprint","calculateSort","updateEntityCounters","findEntityByItemId","listToMove","isFirstItem","text","onclick","menuItem","sortedItems","sortedItemsIds","groupModeItem","moveItemToUp","activateBlinking","next","updateItemSort","getMenuWindow","isLastItem","moveItemToDown","showMoveItemMenu","updateSort","updateItemsSort","moveItemFromEntityToEntity","updateCounters","updatedItemsIds","moveToAnotherEntity","isSortUpdated","updatedItemId","targetEntity","bindButton","isMoveToSprint","getSprintsAvailableForFilling","showListSprintsToMove","moveToWithGroupMode","after","update","updateItems","entityListNode","onMoveItemUpdate","isMoveFromAnotherEntity","itemSort","itemPreviousSortSort","getPreviousSort","bindItemSort","appendItemAfterItem","getFirstItemNode","setParentEntity","setItem","moveToSprintMenu","getPopupWindow","Menu","isSameSprint","addMenuItem","moveItemMenu","ItemDesigner","listAllUsedColors","randomColorCount","defaultColor","getAllUsedColors","getRandomColor","getAllColors","allColors","randomColor","random","isThisBorderColorAlreadyUse","isAlreadyUse","usedColor","getAllUsedItemBorderColors","itemIdsToUpdateColor","updateBorderColorToLinkedItems","fromEntries","updatedItems","setBorderColor","tagSearcher","subscribeToExtension","onAfterAdd","onAfterEdit","openEditForm","onAfterRemove","view","addEpicToSearcher","addItemToListTypeField","NAME","VALUE","itemEpic","removeEpicFromSearcher","PullSprint","listIdsToSkipAdding","listIdsToSkipUpdating","listIdsToSkipRemoving","sprintAdded","onSprintAdded","sprintUpdated","onSprintUpdated","sprintRemoved","onSprintRemoved","needSkipAdd","cleanSkipAdd","createSprintNode","needSkipUpdate","cleanSkipUpdate","moveSprintToActiveListNode","updateYourself","needSkipRemove","cleanSkipRemove","removeSprint","getTmpId","PullItem","itemMover","currentUserId","listToAddAfterUpdate","listIdsToSkipSorting","onCalculateSort","itemAdded","onItemAdded","itemUpdated","onItemUpdated","itemRemoved","onItemRemoved","itemSortUpdated","onItemSortUpdated","comment_add","onCommentAdd","setDelayedAdd","externalAdd","finally","cleanDelayedAdd","addItemToEntity","isDelayedAdd","itemsSortInfo","itemsToSort","itemsInfoToSort","needSkipSort","itemInfoToSort","targetEntityId","moveToPosition","participants","includes","xmlId","entityXmlId","split","taskId","findItemBySourceId","getCurrentState","hasTaskInFilter","isParentChangeAction","prototype","call","addTmpIdToSkipSorting","PullEpic","epicAdded","onEpicAdded","epicUpdated","onEpicUpdated","epicRemoved","onEpicRemoved","epicData","BaseEvent","setData","PullCounters","filterService","task_view","onTaskView","project_read_all","onCommentsReadAll","inputTaskId","TASK_ID","inputUserId","USER_ID","GROUP_ID","TaskCounters","getFilterManager","updateFields","subscribeToPull","onFilterApply","onCounterClick","Pull","fields","counter","toggleByField","filterField","filterValue","isFilteredByField","isFilteredByFieldValue","extendFilter","getFilterFields","getAttribute","getFields","deleteField","FilterHandler","filteredItemsData","appendItemToList","Decomposition","Plan","defaultResponsible","activeSprintId","addBacklog","buildBacklog","taskCounters","pullSprint","addTmpIdToSkipAdding","subscribeToSprint","onActionPanelScroll","searchItems","sprintMover","itemDesigner","filterHandler","getCurrentGroupId","pullItem","getCurrentUserId","pullEpic","onCreateTaskItem","onTagsSearchOpen","onTagsSearchClose","onEpicSearchOpen","onEpicSearchClose","onRenderInput","onRemoveInput","renderTo","ShortView","onChangeShortView","saveDisplayPriority","onShowInput","onUpdateItem","onShowTask","onChangeTaskResponsible","onOpenEpicForm","onFilterByEpic","onFilterByTag","onLoadItems","onToggleActionPanel","onShowLinked","onShowBlank","destroyActionPanel","onkeydown","onDocumentKeyDown","onDocumentClick","onGetSubTasks","onStartSprint","onCompleteSprint","onRemoveSprint","onChangeSprintName","onGetSprintCompletedItems","onShowSprintBurnDownChart","onOpenSprintAddMenu","prevented","setEntity","cleanBindNode","renderInput","getEntity","isTaskCreated","existsAtLeastOneItem","showBlank","inputValue","createItem","error","getParentItem","addIdToSkipUpdating","getNumberDecompositionsPerformed","addNumberDecompositionsPerformed","fillItemBeforeCreation","addTmpIdsToSkipAdding","sendRequestToCreateTask","fillItemAfterCreation","addTask","subTaskInfo","showSubTasks","updateData","isStoryPointsUpdated","getSubTaskItems","subTaskItem","changeTaskResponsible","openAddForm","sprintSidePanel","showStartForm","showCompletionForm","innerBaseEvent","openSidePanelByUrl","getPathToTask","addIdToSkipRemoving","moveToBacklog","changeSprintName","changeSprintDeadline","getSprintCompletedItems","showBurnDownChart","sprintAddMenu","buttonRect","getMenuContainer","pointerEvents","showTagsSearchDialog","closeTagsSearchDialog","getValueFromField","setValueToField","scrollToSearchContainer","showEpicSearchDialog","closeEpicSearchDialog","showItemsLoader","getPageNumberItems","incrementPageNumberItems","createItemsInEntity","openList","saveShortView","repeatedClick","getItem","hasItemInGroupMode","showActionPanel","containerPosition","getScrumContainer","showLinkedTasks","filteredItems","allItems","start","calculatePanelTopPosition","getBindNode","insertAfter","scrollToInput","topPosition","stopSearch","isMultipleAction","isEditAllowed","diskManager","ufDiskFilesFieldName","attachFilesToTask","showAttachmentMenu","showDod","isMovable","moveItem","moveToSprint","showTagSearcher","showEpicSearcher","startBacklogDecomposition","startSprintDecomposition","isRemoveAllowed","removeGroupItems","Array","from","valueWithoutTags","getInfo","createTask","responseData","itemIds","skipNotifications","existOpenMenu","hasActionPanelDialog","showTagsDialog","updateTaskTags","removeTaskTags","splice","indexOf","isEpicDialogShown","showEpicDialog","getEpicById","updateItemEpics","removeItems","setBindNode","getRandomColorForItemBorder","renderInputAfterSubTasks","ActiveSprintActionButton","onCompleteSprintClick","RobotButton","isTaskLimitsExceeded","canUseAutomation","className","isShowLimitSidePanel","UI","InfoHelper","ActiveSprint","setParams","setKanbanStyle","robotButton","isCanUseAutomation","activeSprintActionButton","setTaskLimitsExceeded","taskLimitExceeded","setCanUseAutomation","limitExceeded","kanbanManager","Tasks","Scrum","Kanban","bindKanbanHandlers","getKanban","getKanbansGroupedByParentTasks","kanban","kanbanItem","targetColumn","beforeItem","onItemMoved","BurnDownButton","CompletedSprint","completedSprint","burnDownButton","onSprintSelectorChange","currentSprint","findSprintBySprintId","titleContainer","Entry","buildView","setViewName","viewName","availableViews","getViewName","setView","getView","renderTabsTo","renderSprintStatsTo","renderRightElementsTo","openEpicEditForm","removeEpic","refreshIcons","setDisplayPriority","childNodes"],"mappings":"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"}