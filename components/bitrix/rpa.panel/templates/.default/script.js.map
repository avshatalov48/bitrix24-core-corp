{"version":3,"file":"script.js","sources":["script.es6.js"],"sourcesContent":["import {ajax as Ajax, Loc, Tag, Reflection, Type, Text} from 'main.core';\nimport {Manager} from 'rpa.manager';\n\nimport {PopupMenu} from 'main.popup';\nimport {MessageBox} from 'ui.dialogs.messagebox';\n\nconst namespace = Reflection.namespace('BX.Rpa');\n\nclass PanelItem extends BX.TileGrid.Item\n{\n\tconstructor(options) {\n\t\tsuper(options);\n\n\t\tthis.typeId = options.typeId;\n\t\tthis.title = options.title;\n\t\tthis.image = options.image;\n\t\tthis.listUrl = options.listUrl;\n\t\tthis.canDelete = (options.canDelete === true);\n\t\tthis.tasksCounter = options.tasksCounter;\n\t\tthis.isSettingsRestricted = (options.isSettingsRestricted === true);\n\t}\n\n\tisNew(): boolean\n\t{\n\t\treturn this.id === 'rpa-type-new';\n\t}\n\n\tgetContent(): Element\n\t{\n\t\tif (!this.layout.container)\n\t\t{\n\t\t\tif (this.isNew())\n\t\t\t{\n\t\t\t\tthis.layout.container =\n\t\t\t\t\tTag.render`\n\t\t\t\t\t<div class=\"rpa-tile-item rpa-tile-item-add-new\" onclick=\"${this.onClick.bind(this)}\">\n\t\t\t\t\t\t<div class=\"rpa-tile-item-content\">\n\t\t\t\t\t\t\t<span class=\"rpa-tile-item-add-new-inner\">\n\t\t\t\t\t\t\t\t<span class=\"rpa-tile-item-add-icon\"></span>\n\t\t\t\t\t\t\t\t<span class=\"rpa-tile-item-add-text\">${Loc.getMessage('RPA_COMMON_NEW_PROCESS')}</span>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t`;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.layout.container =\n\t\t\t\t\tTag.render`\n\t\t\t\t\t<div class=\"rpa-tile-item\" onclick=\"${this.onClick.bind(this)}\">\n\t\t\t\t\t\t<div class=\"rpa-tile-item-content\">\n\t\t\t\t\t\t\t<div class=\"rpa-tile-item-subject\">\n\t\t\t\t\t\t\t\t${this.getTitle()}\n\t\t\t\t\t\t\t\t${this.getButton()}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t${this.getImage()}\n\t\t\t\t\t\t\t${this.getStatus()}\n\t\t\t\t\t\t\t${this.getCounter()}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t`;\n\t\t\t}\n\t\t}\n\n\t\treturn this.layout.container;\n\t}\n\n\tremoveNode()\n\t{\n\t\tif(this.layout.container && this.layout.container.parentNode)\n\t\t{\n\t\t\tthis.layout.container.parentNode.removeChild(this.layout.container);\n\t\t}\n\t}\n\n\tgetButton(): Element\n\t{\n\t\tif (!this.layout.button)\n\t\t{\n\t\t\tthis.layout.button =\n\t\t\t\tTag.render`\n\t\t\t\t\t<div class=\"rpa-tile-item-button\" onclick=\"${this.showActions.bind(this)}\">\n\t\t\t\t\t\t<div class=\"rpa-tile-item-button-inner\">${Loc.getMessage('RPA_COMMON_BUTTON_ACTIONS')}</div>\n\t\t\t\t\t</div>\n\t\t\t\t`;\n\t\t}\n\n\t\treturn this.layout.button;\n\t}\n\n\tgetImage(): Element\n\t{\n\t\tif (!this.layout.image)\n\t\t{\n\t\t\tthis.layout.image =\n\t\t\t\t/*Tag.render`\n\t\t\t\t\t<div class=\"rpa-tile-item-image-block\">\n\t\t\t\t\t\t<span class=\"rpa-tile-item-image fa fa-plane\"></span>\n\t\t\t\t\t\t<span class=\"rpa-tile-item-image\" style=\"background-image: url(&quot;https://cdn.bitrix24.site/bitrix/images/landing/business/1920x1080/img6.jpg&quot;);\"></span>\n\t\t\t\t\t</div>\n\t\t\t\t`;*/\n\t\t\t\tTag.render`\n\t\t\t\t\t<div class=\"rpa-tile-item-image-block\">\n\t\t\t\t\t\t<div class=\"rpa-tile-item-image rpa-tile-item-icon-${Text.encode(this.image)}\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t`;\n\t\t}\n\n\t\treturn this.layout.image;\n\t}\n\n\tgetStatus(): Element\n\t{\n\t\tif (!this.layout.status)\n\t\t{\n\t\t\tthis.layout.status =\n\t\t\t\tTag.render`\n\t\t\t\t\t<div class=\"rpa-tile-item-status\"></div>\n\t\t\t\t`;\n\t\t}\n\n\t\treturn this.layout.status;\n\t}\n\n\tgetCounter(): Element\n\t{\n\t\tif (!this.layout.counter)\n\t\t{\n\t\t\tthis.layout.counter =\n\t\t\t\tTag.render`\n\t\t\t\t\t<span id=\"rpa-type-list-${this.typeId}-counter\" class=\"rpa-tile-item-counter\" ${(this.tasksCounter <= 0 ? 'style=\"display: none;\"' : '')}>${this.tasksCounter}</span>\n\t\t\t\t`;\n\t\t}\n\n\t\treturn this.layout.counter;\n\t}\n\n\tgetTitle(): Element\n\t{\n\t\tif (!this.layout.title)\n\t\t{\n\t\t\tthis.layout.title =\n\t\t\t\tTag.render`\n\t\t\t\t\t<div class=\"rpa-tile-item-text\">${Text.encode(this.title)}</div>\n\t\t\t\t`;\n\t\t}\n\n\t\treturn this.layout.title;\n\t}\n\n\tupdateLayout()\n\t{\n\t\tthis.getTitle().innerText = this.title;\n\t\tconst imageNode = this.getImage().querySelector('.rpa-tile-item-image');\n\t\tif(!imageNode)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\timageNode.classList.forEach((className) =>\n\t\t{\n\t\t\tif(className.match('rpa-tile-item-icon-'))\n\t\t\t{\n\t\t\t\timageNode.classList.remove(className);\n\t\t\t}\n\t\t\timageNode.classList.add('rpa-tile-item-icon-' + Text.encode(this.image));\n\t\t});\n\t}\n\n\tonClick()\n\t{\n\t\tif (this.isNew())\n\t\t{\n\t\t\tif(this.gridTile.options.isCreateTypeRestricted)\n\t\t\t{\n\t\t\t\tManager.Instance.showFeatureSlider();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.openSettings().then((slider: BX.SidePanel.Slider) =>\n\t\t\t{\n\t\t\t\tconst sliderData = slider.getData();\n\t\t\t\tconst response = sliderData.get('response');\n\t\t\t\tif(response && response.status === 'success')\n\t\t\t\t{\n\t\t\t\t\tManager.Instance.openKanban(response.data.type.id);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tconst data = sliderData.get('type');\n\t\t\t\t\tif(Type.isPlainObject(data) && data.typeId && data.typeId > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\t//this.gridTile.appendItem(data);\n\t\t\t\t\t\tAjax.runAction('rpa.type.delete', {\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\tid: data.typeId,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.goToList();\n\t\t}\n\t}\n\n\tshowActions(event)\n\t{\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\t\tPopupMenu.show({\n\t\t\tid: this.id,\n\t\t\tbindElement: this.getButton(),\n\t\t\titems: this.getActions(),\n\t\t\toffsetLeft: 0,\n\t\t\toffsetTop: 0,\n\t\t\tcloseByEsc: true,\n\t\t\tclassName: 'rpa-item-actions',\n\t\t\tcacheable: false,\n\t\t});\n\t}\n\n\tcloseActions()\n\t{\n\t\tPopupMenu.destroy(this.id);\n\t}\n\n\tgetActions(): Array\n\t{\n\t\tconst self = this;\n\t\tconst actions = [\n\t\t\t{\n\t\t\t\ttext: Loc.getMessage('RPA_COMMON_LIST'),\n\t\t\t\tonclick: () =>\n\t\t\t\t{\n\t\t\t\t\tself.goToList();\n\t\t\t\t\tthis.closeActions();\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\ttext: Loc.getMessage('RPA_COMMON_ACTION_SETTINGS'),\n\t\t\t\tonclick: () =>\n\t\t\t\t{\n\t\t\t\t\tthis.closeActions();\n\t\t\t\t\tif(this.isSettingsRestricted)\n\t\t\t\t\t{\n\t\t\t\t\t\tManager.Instance.showFeatureSlider();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tthis.openSettings().then((slider) =>\n\t\t\t\t\t{\n\t\t\t\t\t\tif(!slider)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst response = slider.getData().get('response');\n\t\t\t\t\t\tif(response && response.data && Type.isPlainObject(response.data.type))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.image = response.data.type.image;\n\t\t\t\t\t\t\tthis.title = response.data.type.title;\n\n\t\t\t\t\t\t\tthis.updateLayout();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\ttext: Loc.getMessage('RPA_COMMON_STAGES'),\n\t\t\t\tonclick: () =>\n\t\t\t\t{\n\t\t\t\t\tif(this.isSettingsRestricted)\n\t\t\t\t\t{\n\t\t\t\t\t\tManager.Instance.showFeatureSlider();\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tManager.Instance.openStageList(this.typeId);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\ttext: Loc.getMessage('RPA_COMMON_FIELDS_SETTINGS'),\n\t\t\t\tonclick: () =>\n\t\t\t\t{\n\t\t\t\t\tif(this.isSettingsRestricted)\n\t\t\t\t\t{\n\t\t\t\t\t\tManager.Instance.showFeatureSlider();\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tManager.Instance.openFieldsList(this.typeId);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t];\n\n\t\tif(this.canDelete)\n\t\t{\n\t\t\tactions.push({\n\t\t\t\ttext: Loc.getMessage('RPA_COMMON_ACTION_DELETE'),\n\t\t\t\tonclick: () =>\n\t\t\t\t{\n\t\t\t\t\tthis.closeActions();\n\t\t\t\t\tif(this.gridTile.getLoader().isShown())\n\t\t\t\t\t{\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tMessageBox.confirm(\n\t\t\t\t\t\tLoc.getMessage('RPA_PANEL_DELETE_CONFIRM_TEXT'),\n\t\t\t\t\t\tLoc.getMessage('RPA_PANEL_DELETE_CONFIRM_TITLE'),\n\t\t\t\t\t\t() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn self.delete();\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn actions;\n\t}\n\n\topenSettings(): ?Promise\n\t{\n\t\tif(this.isNew())\n\t\t{\n\t\t\treturn Manager.Instance.openTypeDetail(0, {\n\t\t\t\tallowChangeHistory: false,\n\t\t\t});\n\t\t}\n\n\t\treturn Manager.Instance.openTypeDetail(this.typeId);\n\t}\n\n\topenStages(): ?Promise\n\t{\n\t\treturn Manager.Instance.openStageList(this.typeId);\n\t}\n\n\tdelete()\n\t{\n\t\treturn new Promise((resolve) =>\n\t\t{\n\t\t\tif(this.gridTile.getLoader().isShown())\n\t\t\t{\n\t\t\t\tresolve();\n\t\t\t}\n\t\t\tthis.gridTile.getLoader().show();\n\t\t\tAjax.runAction('rpa.type.delete', {\n\t\t\t\tanalyticsLabel: 'rpaPanelDeleteType',\n\t\t\t\tdata: {\n\t\t\t\t\tid: this.typeId,\n\t\t\t\t}\n\t\t\t}).then((response) =>\n\t\t\t{\n\t\t\t\tthis.gridTile.getLoader().hide();\n\t\t\t\tthis.gridTile.removeItem(this);\n\t\t\t\tresolve();\n\t\t\t}).catch((response) =>\n\t\t\t{\n\t\t\t\tthis.gridTile.getLoader().hide();\n\t\t\t\tlet message = '';\n\t\t\t\tresponse.errors.forEach((error) =>\n\t\t\t\t{\n\t\t\t\t\tmessage += error.message;\n\t\t\t\t});\n\t\t\t\tPanelItem.showError(message);\n\t\t\t\tresolve();\n\t\t\t});\n\t\t});\n\t}\n\n\tgoToList()\n\t{\n\t\tif(this.listUrl)\n\t\t{\n\t\t\tlocation.href = this.listUrl;\n\t\t}\n\t}\n\n\tstatic getErrorNode()\n\t{\n\t\treturn document.getElementById('rpa-panel-error-container');\n\t}\n\n\tstatic showError(message: string)\n\t{\n\t\tPanelItem.getErrorNode().innerText = message;\n\t\tif (message.length > 0)\n\t\t{\n\t\t\tPanelItem.getErrorNode().parentNode.style.display = 'block';\n\t\t}\n\t\telse\n\t\t{\n\t\t\tPanelItem.getErrorNode().parentNode.style.display = 'none';\n\t\t}\n\t}\n}\n\nnamespace.PanelItem = PanelItem;"],"names":["namespace","Reflection","PanelItem","options","typeId","title","image","listUrl","canDelete","tasksCounter","isSettingsRestricted","id","layout","container","isNew","Tag","render","onClick","bind","Loc","getMessage","getTitle","getButton","getImage","getStatus","getCounter","parentNode","removeChild","button","showActions","Text","encode","status","counter","innerText","imageNode","querySelector","classList","forEach","className","match","remove","add","gridTile","isCreateTypeRestricted","Manager","Instance","showFeatureSlider","openSettings","then","slider","sliderData","getData","response","get","openKanban","data","type","Type","isPlainObject","Ajax","runAction","goToList","event","preventDefault","stopPropagation","PopupMenu","show","bindElement","items","getActions","offsetLeft","offsetTop","closeByEsc","cacheable","destroy","self","actions","text","onclick","closeActions","updateLayout","openStageList","openFieldsList","push","getLoader","isShown","MessageBox","confirm","delete","openTypeDetail","allowChangeHistory","Promise","resolve","analyticsLabel","hide","removeItem","catch","message","errors","error","showError","location","href","document","getElementById","getErrorNode","length","style","display","BX","TileGrid","Item"],"mappings":"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"}