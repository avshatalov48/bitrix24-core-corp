(function(){BX.namespace("BX.Sender");if(BX.Sender.LetterList){return}var e=BX.Sender.Page;function t(){}t.prototype.init=function(e){this.gridId=e.gridId;this.actionUri=e.actionUri;this.pathToEdit=e.pathToEdit;this.mess=e.mess;this.ajaxAction=new BX.AjaxAction(this.actionUri);this.userErrorHandler=new BX.Sender.ErrorHandler;BX.addCustomEvent("Grid::updated",this.onGridUpdated.bind(this))};t.prototype.remove=function(e){this.sendChangeStateAction("remove",e)};t.prototype.copy=function(t){var n=this;this.sendChangeStateAction("copy",t,function(t){if(!t.copiedId){return}e.open(n.pathToEdit.replace("#id#",t.copiedId),e.reloadGrid.bind(e,this.gridId))})};t.prototype.send=function(e){this.sendChangeStateAction("send",e)};t.prototype.pause=function(e){this.sendChangeStateAction("pause",e)};t.prototype.stop=function(e){this.sendChangeStateAction("stop",e)};t.prototype.resume=function(e){this.sendChangeStateAction("resume",e)};t.prototype.sendChangeStateAction=function(t,n,i){var o=this.gridId;var r=null;if(BX.Main&&BX.Main.gridManager){var a=BX.Main.gridManager.getById(o);if(a){r=a.instance.getRows().getById(n).getDataset().messageCode}}e.changeGridLoaderShowing(o,true);var d=this;this.ajaxAction.request({action:t,onsuccess:function(t){e.reloadGrid(o);if(i){i.apply(d,[t])}},onusererror:this.userErrorHandler.getHandlers(function(){this.sendChangeStateAction(t,n,i)}.bind(this),function(){e.changeGridLoaderShowing(o,false)}.bind(this),{editUrl:this.pathToEdit.replace("#id#",n)}),onfailure:function(){e.changeGridLoaderShowing(o,false)},data:{id:n},urlParams:{messageCode:r}})};t.prototype.onMenuItemClick=function(t){if(!t.IS_AVAILABLE&&BX.Sender.B24License){BX.Sender.B24License.showPopup("Ad");this.popupMenu.close();return}e.open(t.URL);this.popupMenu.close()};t.prototype.onGridUpdated=function(e){BX.UI.Hint.init(e.getTable())};BX.Sender.LetterList=new t})(window);
//# sourceMappingURL=script.map.js