BX.namespace("BX.BitrixCloud");BX.BitrixCloud.MobileMonitorPush=function(e,t){this.app=e;this.domain=t.domain||"";this.ajaxUrl=t.ajaxUrl||"";this.makeFastButton=function(e,t){const s=BX(e);if(s){new FastButton(s,BX.delegate((()=>{if(this.app.enableInVersion(8)){this.app.showModalDialog({url:t})}else{this.app.loadPageBlank({url:t})}}),this),false)}};this.close=function(){if(this.app.enableInVersion(8)){this.app.closeModalDialog()}else{this.app.closeController({drop:true})}};this.getOptions=function(){const e=BX("mapp_edit_form_id");const t=[];if(e&&e.elements&&e.elements.SUBSCRIBE&&e.elements.SUBSCRIBE.value){t.SUBSCRIBE=e.elements.SUBSCRIBE.value}return t};this.save=function(){const t={options:this.getOptions(),domain:this.domain,sessid:BX.bitrix_sessid(),action:"save_options"};e.showPopupLoader({text:`${BX.Loc.getMessage("BCMMP_JS_SAVING")}...`});BX.ajax({timeout:30,method:"POST",dataType:"json",url:this.ajaxUrl,data:t,onsuccess:BX.delegate((e=>{this.app.hidePopupLoader();if(e&&!e.ERROR){this.close()}else if(e.ERROR){this.app.alert({text:`ERROR: ${e.ERROR}`})}else{this.app.alert({text:`${BX.Loc.getMessage("BCMMP_JS_SAVE_ERROR")} !result.`})}}),this),onfailure:BX.delegate((()=>{e.alert({text:`${BX.Loc.getMessage("BCMMP_JS_SAVE_ERROR")} onfailure.`})}),this)})}};
//# sourceMappingURL=script.map.js