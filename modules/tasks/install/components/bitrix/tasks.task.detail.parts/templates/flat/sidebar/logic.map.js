{"version":3,"sources":["logic.js"],"names":["BX","namespace","Tasks","Component","TaskViewSidebar","parameters","this","layout","stagesWrap","stages","taskId","messages","workingTime","start","hours","minutes","end","can","allowTimeTracking","user","isAmAuditor","iAmAuditor","auditorCtrl","pathToTasks","stageId","parseInt","query","Util","Query","taskLimitExceeded","initDeadline","initReminder","initMark","initTime","initTags","initAuditorThing","initStages","addCustomEvent","window","delegate","onTaskEvent","onChangeProjectLink","prototype","EDIT","Dispatcher","find","then","ctrl","bindControl","onToggleImAuditor","bind","canChange","SORT","stagesShowed","length","cleanNode","i","c","appendChild","TEXT_LAYOUT","create","attrs","data-stageId","ID","title","TITLE","props","className","text","events","click","setStageHadnler","style","cursor","show","setStage","hide","groupId","data","entityId","entityType","run","result","isSuccess","numeric","execute","getStageData","id","proxy_context","saveStage","fireGlobalTaskEvent","STAGE_ID","STAY_AT_PAGE","stage","color","clearAll","calculateTextColor","backgroundColor","borderBottomColor","COLOR","baseColor","defaultColors","r","g","b","util","in_array","toLowerCase","split","join","y","confirm","message","syncAuditor","UI","InfoHelper","deleteItem","addItem","setHeaderButtonLabelText","getData","READ","document","location","reload","type","task","isNotEmptyString","REAL_STATUS","STATUS_CHANGED_DATE","setStatus","status","time","statusName","statusDate","innerHTML","htmlspecialchars","deadline","deadlineClear","proxy","onDeadlineClick","clearDeadline","event","now","Date","today","UTC","getFullYear","getMonth","getDate","calendar","node","field","form","bTime","value","bHideTimebar","callback_after","setDeadline","ValueToString","date","format","convertBitrixFormat","replace","display","updateDeadline","emptyDeadline","add","DEADLINE","onCustomEvent","addReminder","reminderAdd","mark","onMarkClick","TaskGradePopup","listValue","onPopupChange","onMarkChange","popup","listItem","name","MARK","bindEvent","onTaskTimerTick","formatTimeAmount","saveTags","tags","tagsString","TAGS","call"],"mappings":"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","file":"logic.map.js"}