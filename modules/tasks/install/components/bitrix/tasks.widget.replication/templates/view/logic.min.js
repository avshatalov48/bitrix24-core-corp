"use strict";BX.namespace("Tasks.Component");(function(){if(typeof BX.Tasks.Component.TasksWidgetReplicationView!="undefined"){return}BX.Tasks.Component.TasksWidgetReplicationView=BX.Tasks.Component.extend({sys:{code:"replication"},methods:{construct:function(){this.callConstruct(BX.Tasks.Component);this.vars.enabled=this.option("enabled");this.vars.taskLimitExceeded=this.option("taskLimitExceeded")},bindEvents:function(){if(this.option("enableSync")){this.bindControl("switch","click",this.onReplicationToggle.bind(this))}},onReplicationToggle:function(){if(!this.vars.enabled&&this.vars.taskLimitExceeded){BX.Runtime.loadExtension("tasks.limit").then((t=>{const{Limit:i}=t;i.showInstance({featureId:"tasks_recurring_tasks",limitAnalyticsLabels:{module:"tasks",source:"templateSidebar"}})}));return}var t=this.vars.enabled?"stopReplication":"startReplication";BX.ajax.runComponentAction("bitrix:tasks.widget.replication",t,{mode:"class",data:{templateId:this.option("entityId")}}).then(function(t){if(!t.status||t.status!=="success"){return}this.setEnabled(!this.vars.enabled)}.bind(this),function(t){}.bind(this))},setEnabled:function(t){this.vars.enabled=t;this.changeCSSFlag("enabled",t);BX.Tasks.Util.fadeSlideToggleByClass(this.control("detail"))}}})}).call(this);
//# sourceMappingURL=logic.map.js