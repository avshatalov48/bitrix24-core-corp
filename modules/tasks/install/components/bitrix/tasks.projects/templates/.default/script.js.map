{"version":3,"file":"script.js","sources":["../../../../../../../main/install/components/bitrix/main.ui.grid/templates/.default/src/js/cell-action-state.js","src/actions-controller.js","src/filter/filter.js","src/members-popup.js","src/scrum-members-popup.js","src/grid.js","src/pull-controller.js","src/tourguide/first-project-creation-tour-guide.js","src/tourguide/first-scrum-creation-tour-guide.js","src/tourguide/tour-guide-controller.js","src/controller.js"],"sourcesContent":["import {Reflection} from 'main.core';\n\n/**\n * @memberOf BX.Grid\n */\nexport class CellActionState\n{\n\tstatic SHOW_BY_HOVER = 'main-grid-cell-content-action-by-hover';\n\tstatic ACTIVE = 'main-grid-cell-content-action-active';\n}\n\nconst namespace = Reflection.namespace('BX.Grid');\nnamespace.CellActionState = CellActionState;","import {Dom, Loc, Runtime} from 'main.core';\nimport {BaseEvent, EventEmitter} from 'main.core.events';\nimport {CellActionState} from '../../../../../../../../main/install/components/bitrix/main.ui.grid/templates/.default/src/js/cell-action-state';\n\nexport class ActionsController\n{\n\tstatic options;\n\n\tstatic setOptions(options)\n\t{\n\t\tActionsController.options = options;\n\t}\n\n\tstatic setActionsPanel(actionsPanel)\n\t{\n\t\tActionsController.actionsPanel = actionsPanel;\n\t}\n\n\tstatic doAction(action, groupId, data = [])\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tBX.ajax.runComponentAction('bitrix:tasks.projects', 'processAction', {\n\t\t\t\tmode: 'class',\n\t\t\t\tdata: {\n\t\t\t\t\taction,\n\t\t\t\t\tdata,\n\t\t\t\t\tids: ActionsController.getActionIds(groupId) || [],\n\t\t\t\t},\n\t\t\t\tsignedParameters: ActionsController.options.signedParameters,\n\t\t\t}).then(\n\t\t\t\t() => resolve(),\n\t\t\t\t() => reject()\n\t\t\t).catch(\n\t\t\t\t() => reject()\n\t\t\t);\n\n\t\t\tActionsController.hideActionsPanel();\n\t\t\tActionsController.unselectRows();\n\t\t});\n\t}\n\n\tstatic getActionIds(id)\n\t{\n\t\tif (id !== undefined)\n\t\t{\n\t\t\treturn [id];\n\t\t}\n\n\t\tconst selected = ActionsController.getSelectedRows();\n\t\tif (selected.length === 0)\n\t\t{\n\t\t\treturn [];\n\t\t}\n\n\t\treturn selected.map((row) => {\n\t\t\treturn row.getDataset().id;\n\t\t});\n\t}\n\n\tstatic getSelectedRows()\n\t{\n\t\treturn ActionsController.getGridInstance().getRows().getSelected();\n\t}\n\n\tstatic sendJoinRequest(button)\n\t{\n\t\tif (Dom.hasClass(button, 'ui-btn-clock'))\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tDom.addClass(button, 'ui-btn-clock');\n\n\t\tBX.ajax({\n\t\t\turl: button.getAttribute('bx-request-url'),\n\t\t\tmethod: 'POST',\n\t\t\tdataType: 'json',\n\t\t\tdata: {\n\t\t\t\tajax_request: 'Y',\n\t\t\t\tsave: 'Y',\n\t\t\t\tsessid: BX.bitrix_sessid(),\n\t\t\t},\n\t\t\tonsuccess: () => Dom.removeClass(button, 'ui-btn-clock'),\n\t\t\tonfailure: () => Dom.removeClass(button, 'ui-btn-clock'),\n\t\t});\n\n\t\tActionsController.hideActionsPanel();\n\t\tActionsController.unselectRows();\n\t}\n\n\tstatic sendAcceptRequest(userGroupRelationId, url)\n\t{\n\t\tBX.ajax({\n\t\t\turl: url,\n\t\t\tmethod: 'POST',\n\t\t\tdataType: 'json',\n\t\t\tdata: {\n\t\t\t\taction: 'accept',\n\t\t\t\tmax_count: 1,\n\t\t\t\tchecked_0: 'Y',\n\t\t\t\ttype_0: 'INVITE_GROUP',\n\t\t\t\tid_0: userGroupRelationId,\n\t\t\t\ttype: 'in',\n\t\t\t\tajax_request: 'Y',\n\t\t\t\tsessid: BX.bitrix_sessid(),\n\t\t\t},\n\t\t\tonsuccess: result => {},\n\t\t\tonfailure: result => console.log(result),\n\t\t});\n\n\t\tActionsController.hideActionsPanel();\n\t\tActionsController.unselectRows();\n\t}\n\n\tstatic sendDenyRequest(userGroupRelationId, url)\n\t{\n\t\tActionsController.sendCancelRequest(userGroupRelationId, url);\n\t}\n\n\tstatic sendCancelRequest(userGroupRelationId, url)\n\t{\n\t\tBX.ajax({\n\t\t\turl: url,\n\t\t\tmethod: 'POST',\n\t\t\tdataType: 'json',\n\t\t\tdata: {\n\t\t\t\taction: 'reject',\n\t\t\t\tmax_count: 1,\n\t\t\t\tchecked_0: 'Y',\n\t\t\t\ttype_0: 'INVITE_GROUP',\n\t\t\t\tid_0: userGroupRelationId,\n\t\t\t\ttype: 'out',\n\t\t\t\tajax_request: 'Y',\n\t\t\t\tsessid: BX.bitrix_sessid(),\n\t\t\t},\n\t\t\tonsuccess: result => {},\n\t\t\tonfailure: result => console.log(result),\n\t\t});\n\n\t\tActionsController.hideActionsPanel();\n\t\tActionsController.unselectRows();\n\t}\n\n\tstatic hideActionsPanel()\n\t{\n\t\tActionsController.options.actionsPanel.hidePanel();\n\t}\n\n\tstatic unselectRows()\n\t{\n\t\tActionsController.getGridInstance().getRows().unselectAll();\n\t}\n\n\tstatic getGridInstance()\n\t{\n\t\treturn BX.Main.gridManager.getById(ActionsController.options.gridId).instance;\n\t}\n\n\tstatic changePin(groupId, event: BaseEvent)\n\t{\n\t\tconst {button} = event.getData();\n\n\t\tif (Dom.hasClass(button, CellActionState.ACTIVE))\n\t\t{\n\t\t\tActionsController.doAction('unpin', groupId).then(() => {\n\t\t\t\tDom.removeClass(button, CellActionState.ACTIVE);\n\t\t\t\tDom.addClass(button, CellActionState.SHOW_BY_HOVER);\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tActionsController.doAction('pin', groupId).then(() => {\n\t\t\t\tDom.addClass(button, CellActionState.ACTIVE);\n\t\t\t\tDom.removeClass(button, CellActionState.SHOW_BY_HOVER);\n\t\t\t});\n\t\t}\n\t}\n\n\tstatic onTagClick(field)\n\t{\n\t\tconst {filter} = ActionsController.options;\n\t\tfilter.toggleByField(field);\n\t}\n\n\tstatic onTagAddClick(groupId, event)\n\t{\n\t\tRuntime.loadExtension('ui.entity-selector').then(exports => {\n\t\t\tconst onRowUpdate = (event: BaseEvent) => {\n\t\t\t\tconst {id} = event.getData();\n\t\t\t\tif (id === groupId)\n\t\t\t\t{\n\t\t\t\t\tconst row = ActionsController.getGridInstance().getRows().getById(id);\n\t\t\t\t\tconst button = row.getCellById('TAGS').querySelector('.main-grid-tag-add');\n\n\t\t\t\t\tdialog.setTargetNode(button);\n\t\t\t\t}\n\t\t\t};\n\t\t\tconst onRowRemove = (event: BaseEvent) => {\n\t\t\t\tconst {id} = event.getData();\n\t\t\t\tif (id === groupId)\n\t\t\t\t{\n\t\t\t\t\tdialog.hide();\n\t\t\t\t}\n\t\t\t};\n\t\t\tconst onTagsChange = (event: BaseEvent) => {\n\t\t\t\tconst dialog = event.getTarget();\n\t\t\t\tconst tags = dialog.getSelectedItems().map(item => item.getId());\n\n\t\t\t\tvoid ActionsController.doAction('update', groupId, {KEYWORDS: tags.join(',')});\n\t\t\t};\n\t\t\tconst {Dialog} = exports;\n\t\t\tconst dialog = new Dialog({\n\t\t\t\ttargetNode: event.getData().button,\n\t\t\t\tenableSearch: true,\n\t\t\t\twidth: 350,\n\t\t\t\theight: 400,\n\t\t\t\tmultiple: true,\n\t\t\t\tdropdownMode: true,\n\t\t\t\tcompactView: true,\n\t\t\t\tcontext: 'PROJECT_TAG',\n\t\t\t\tentities: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'project-tag',\n\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\tgroupId,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\tsearchOptions: {\n\t\t\t\t\tallowCreateItem: true,\n\t\t\t\t\tfooterOptions: {\n\t\t\t\t\t\tlabel: Loc.getMessage('TASKS_PROJECTS_ENTITY_SELECTOR_TAG_SEARCH_FOOTER_ADD'),\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tfooter: BX.SocialNetwork.EntitySelector.Footer,\n\t\t\t\tfooterOptions: {\n\t\t\t\t\ttagCreationLabel: true,\n\t\t\t\t},\n\t\t\t\tevents: {\n\t\t\t\t\t'onShow': () => {\n\t\t\t\t\t\tEventEmitter.subscribe('Tasks.Projects.Grid:RowUpdate', onRowUpdate);\n\t\t\t\t\t\tEventEmitter.subscribe('Tasks.Projects.Grid:RowRemove', onRowRemove);\n\t\t\t\t\t},\n\t\t\t\t\t'onHide': () => {\n\t\t\t\t\t\tEventEmitter.unsubscribe('Tasks.Projects.Grid:RowUpdate', onRowUpdate);\n\t\t\t\t\t\tEventEmitter.unsubscribe('Tasks.Projects.Grid:RowRemove', onRowRemove);\n\t\t\t\t\t},\n\t\t\t\t\t'Search:onItemCreateAsync': (event: BaseEvent) => {\n\t\t\t\t\t\treturn new Promise((resolve) => {\n\t\t\t\t\t\t\tconst {searchQuery} = event.getData();\n\t\t\t\t\t\t\tconst name = searchQuery.getQuery().toLowerCase();\n\t\t\t\t\t\t\tconst dialog: Dialog = event.getTarget();\n\n\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\tconst item = dialog.addItem({\n\t\t\t\t\t\t\t\t\tid: name,\n\t\t\t\t\t\t\t\t\tentityId: 'project-tag',\n\t\t\t\t\t\t\t\t\ttitle: name,\n\t\t\t\t\t\t\t\t\ttabs: 'all',\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tif (item)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\titem.select();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t\t}, 1000);\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\t'Item:onSelect': onTagsChange,\n\t\t\t\t\t'Item:onDeselect': onTagsChange,\n\t\t\t\t},\n\t\t\t});\n\t\t\tdialog.show();\n\t\t});\n\t}\n}","import {Type} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\n\nexport class Filter\n{\n\tconstructor(options)\n\t{\n\t\tthis.filter = BX.Main.filterManager.getById(options.filterId);\n\n\t\tthis.init();\n\t\tthis.bindEvents();\n\t}\n\n\tinit()\n\t{\n\t\tthis.updateFields();\n\t}\n\n\tbindEvents()\n\t{\n\t\tEventEmitter.subscribe('BX.Main.Filter:apply', this.onFilterApply.bind(this));\n\t\tEventEmitter.subscribe('Tasks.Toolbar:onItem', this.onCounterClick.bind(this));\n\t}\n\n\tonFilterApply()\n\t{\n\t\tthis.updateFields();\n\t}\n\n\tupdateFields()\n\t{\n\t\tthis.fields = this.filter.getFilterFieldsValues();\n\t}\n\n\tonCounterClick(event)\n\t{\n\t\tconst data = event.getData();\n\n\t\tif (data.counter && data.counter.filter)\n\t\t{\n\t\t\tthis.toggleByField({[data.counter.filterField]: data.counter.filterValue});\n\t\t}\n\t}\n\n\tisFilteredByField(field)\n\t{\n\t\tif (!Object.keys(this.fields).includes(field))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tif (Type.isArray(this.fields[field]))\n\t\t{\n\t\t\treturn this.fields[field].length > 0;\n\t\t}\n\n\t\treturn this.fields[field] !== '';\n\t}\n\n\tisFilteredByFieldValue(field, value)\n\t{\n\t\treturn this.isFilteredByField(field) && this.fields[field] === value;\n\t}\n\n\ttoggleByField(field)\n\t{\n\t\tconst name = Object.keys(field)[0];\n\t\tconst value = field[name];\n\n\t\tif (!this.isFilteredByFieldValue(name, value))\n\t\t{\n\t\t\tthis.filter.getApi().extendFilter({[name]: value});\n\t\t\treturn;\n\t\t}\n\n\t\tthis.filter.getFilterFields().forEach((field) => {\n\t\t\tif (field.getAttribute('data-name') === name)\n\t\t\t{\n\t\t\t\tthis.filter.getFields().deleteField(field);\n\t\t\t}\n\t\t});\n\n\t\tthis.filter.getSearch().apply();\n\t}\n}","import {Dom, Event, Loc, Tag, Type} from 'main.core';\nimport {Loader} from 'main.loader';\nimport {PopupWindowManager} from 'main.popup';\n\nexport class MembersPopup\n{\n\tconstructor(options)\n\t{\n\t\tthis.signedParameters = options.signedParameters;\n\t}\n\n\tshow(groupId, bindNode, type = 'all')\n\t{\n\t\tif (this.isPopupShown)\n\t\t{\n\t\t\tthis.popup.destroy();\n\t\t}\n\n\t\tthis.groupId = groupId;\n\n\t\tthis.resetPopupData();\n\t\tthis.changeType(type, false);\n\n\t\tthis.popup = PopupWindowManager.create({\n\t\t\tid: 'projects-members-popup-menu',\n\t\t\tclassName: 'tasks-projects-members-popup',\n\t\t\tbindElement: bindNode,\n\t\t\tautoHide: true,\n\t\t\tcloseByEsc: true,\n\t\t\tlightShadow: true,\n\t\t\tbindOptions: {\n\t\t\t\tposition: 'bottom',\n\t\t\t},\n\t\t\tanimationOptions: {\n\t\t\t\tshow: {\n\t\t\t\t\ttype: 'opacity-transform',\n\t\t\t\t},\n\t\t\t\tclose: {\n\t\t\t\t\ttype: 'opacity',\n\t\t\t\t},\n\t\t\t},\n\t\t\tevents: {\n\t\t\t\tonPopupDestroy: () => {\n\t\t\t\t\tthis.loader = null;\n\t\t\t\t\tthis.isPopupShown = false;\n\t\t\t\t},\n\t\t\t\tonPopupClose: () => {\n\t\t\t\t\tthis.popup.destroy();\n\t\t\t\t},\n\t\t\t\tonAfterPopupShow: (popup) => {\n\t\t\t\t\tpopup.contentContainer.appendChild(this.renderContainer());\n\n\t\t\t\t\tthis.showLoader();\n\t\t\t\t\tthis.showUsers(groupId, type);\n\n\t\t\t\t\tthis.isPopupShown = true;\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t\tthis.popupScroll(groupId, type);\n\t\tthis.popup.show();\n\t}\n\n\trenderContainer()\n\t{\n\t\treturn Tag.render`\n\t\t\t<span class=\"tasks-projects-members-popup-container\">\n\t\t\t\t<span class=\"tasks-projects-members-popup-head\">\n\t\t\t\t\t${this.popupData.all.tab}\n\t\t\t\t\t${this.popupData.heads.tab}\n\t\t\t\t\t${this.popupData.members.tab}\n\t\t\t\t</span>\n\t\t\t\t<span class=\"tasks-projects-members-popup-body\">\n\t\t\t\t\t<div class=\"tasks-projects-members-popup-content\">\n\t\t\t\t\t\t<div class=\"tasks-projects-members-popup-content-box\">\n\t\t\t\t\t\t\t${this.getCurrentPopupData().innerContainer}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</span>\n\t\t\t</span>\n\t\t`;\n\t}\n\n\tpopupScroll(groupId, type)\n\t{\n\t\tif (!BX.type.isDomNode(this.getCurrentPopupData().innerContainer))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tEvent.bind(this.getCurrentPopupData().innerContainer, 'scroll', (event) => {\n\t\t\tconst area = event.target;\n\t\t\tif (area.scrollTop > (area.scrollHeight - area.offsetHeight) / 1.5)\n\t\t\t{\n\t\t\t\tthis.showUsers(groupId, type);\n\t\t\t\tEvent.unbindAll(this.getCurrentPopupData().innerContainer);\n\t\t\t}\n\t\t});\n\t};\n\n\tshowUsers(groupId, type)\n\t{\n\t\tBX.ajax.runComponentAction('bitrix:tasks.projects', 'getPopupMembers', {\n\t\t\tmode: 'class',\n\t\t\tdata: {\n\t\t\t\tgroupId,\n\t\t\t\ttype,\n\t\t\t\tpage: this.getCurrentPopupData().currentPage,\n\t\t\t},\n\t\t\tsignedParameters: this.signedParameters,\n\t\t}).then(\n\t\t\t(response) => {\n\t\t\t\tif (this.groupId !== groupId || this.currentType !== type)\n\t\t\t\t{\n\t\t\t\t\tthis.hideLoader();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (response.data.length > 0)\n\t\t\t\t{\n\t\t\t\t\tthis.renderUsers(response.data);\n\t\t\t\t\tthis.popupScroll(groupId, this.currentType);\n\t\t\t\t}\n\t\t\t\telse if (!this.getCurrentPopupData().innerContainer.hasChildNodes())\n\t\t\t\t{\n\t\t\t\t\tthis.getCurrentPopupData().innerContainer.innerText = Loc.getMessage('TASKS_PROJECTS_MEMBERS_POPUP_EMPTY');\n\t\t\t\t}\n\t\t\t\tthis.getCurrentPopupData().currentPage++;\n\t\t\t\tthis.hideLoader();\n\t\t\t},\n\t\t\t() => this.hideLoader()\n\t\t);\n\t}\n\n\trenderUsers(users)\n\t{\n\t\tObject.values(users).forEach((user) => {\n\t\t\tif (this.getCurrentPopupData().renderedUsers.indexOf(user.ID) >= 0)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.getCurrentPopupData().renderedUsers.push(user.ID);\n\n\t\t\tthis.getCurrentPopupData().innerContainer.appendChild(\n\t\t\t\tTag.render`\n\t\t\t\t\t<a class=\"tasks-projects-members-popup-item\" href=\"${user['HREF']}\" target=\"_blank\">\n\t\t\t\t\t\t<span class=\"tasks-projects-members-popup-avatar-new\">\n\t\t\t\t\t\t\t${this.getAvatar(user)}\n\t\t\t\t\t\t\t<span class=\"tasks-projects-members-popup-avatar-status-icon\"></span>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span class=\"tasks-projects-members-popup-name\">${user['FORMATTED_NAME']}</span>\n\t\t\t\t\t</a>\n\t\t\t\t`\n\t\t\t);\n\t\t})\n\t}\n\n\tgetAvatar(user)\n\t{\n\t\tif (Type.isStringFilled(user['PHOTO']))\n\t\t{\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"ui-icon ui-icon-common-user tasks-projects-members-popup-avatar-img\">\n\t\t\t\t\t<i style=\"background-image: url('${encodeURI(user['PHOTO'])}')\"></i>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"ui-icon ui-icon-common-user tasks-projects-members-popup-avatar-img\"><i></i></div>\n\t\t`;\n\t}\n\n\tshowLoader()\n\t{\n\t\tif (!this.loader)\n\t\t{\n\t\t\tthis.loader = new Loader({\n\t\t\t\ttarget: this.popup.getPopupContainer().querySelector('.tasks-projects-members-popup-content'),\n\t\t\t\tsize: 40,\n\t\t\t});\n\t\t}\n\t\tvoid this.loader.show();\n\t}\n\n\thideLoader()\n\t{\n\t\tif (this.loader)\n\t\t{\n\t\t\tvoid this.loader.hide();\n\t\t\tthis.loader = null;\n\t\t}\n\t}\n\n\tchangeType(newType, loadUsers = true)\n\t{\n\t\tconst oldType = this.currentType;\n\n\t\tthis.currentType = newType;\n\n\t\tObject.values(this.popupData).forEach((item) => {\n\t\t\tDom.removeClass(item.tab, 'tasks-projects-members-popup-head-item-current');\n\t\t});\n\t\tDom.addClass(this.getCurrentPopupData().tab, 'tasks-projects-members-popup-head-item-current');\n\n\t\tif (oldType)\n\t\t{\n\t\t\tDom.replace(this.popupData[oldType].innerContainer, this.getCurrentPopupData().innerContainer);\n\t\t}\n\n\t\tif (loadUsers && this.getCurrentPopupData().currentPage === 1)\n\t\t{\n\t\t\tthis.showLoader();\n\t\t\tthis.showUsers(this.groupId, newType);\n\t\t}\n\t}\n\n\tresetPopupData()\n\t{\n\t\tthis.popupData = {\n\t\t\tall: {\n\t\t\t\tcurrentPage: 1,\n\t\t\t\trenderedUsers: [],\n\t\t\t\ttab: Tag.render`\n\t\t\t\t\t<span class=\"tasks-projects-members-popup-head-item\" onclick=\"${this.changeType.bind(this, 'all')}\">\n\t\t\t\t\t\t<span class=\"tasks-projects-members-popup-head-text\">\n\t\t\t\t\t\t\t${Loc.getMessage('TASKS_PROJECTS_MEMBERS_POPUP_TITLE_ALL')}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</span>\n\t\t\t\t`,\n\t\t\t\tinnerContainer: Tag.render`<div class=\"tasks-projects-members-popup-inner\"></div>`,\n\t\t\t},\n\t\t\theads: {\n\t\t\t\tcurrentPage: 1,\n\t\t\t\trenderedUsers: [],\n\t\t\t\ttab: Tag.render`\n\t\t\t\t\t<span class=\"tasks-projects-members-popup-head-item\" onclick=\"${this.changeType.bind(this, 'heads')}\">\n\t\t\t\t\t\t<span class=\"tasks-projects-members-popup-head-text\">\n\t\t\t\t\t\t\t${Loc.getMessage('TASKS_PROJECTS_MEMBERS_POPUP_TITLE_HEADS')}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</span>\n\t\t\t\t`,\n\t\t\t\tinnerContainer: Tag.render`<div class=\"tasks-projects-members-popup-inner\"></div>`,\n\t\t\t},\n\t\t\tmembers: {\n\t\t\t\tcurrentPage: 1,\n\t\t\t\trenderedUsers: [],\n\t\t\t\ttab: Tag.render`\n\t\t\t\t\t<span class=\"tasks-projects-members-popup-head-item\" onclick=\"${this.changeType.bind(this, 'members')}\">\n\t\t\t\t\t\t<span class=\"tasks-projects-members-popup-head-text\">\n\t\t\t\t\t\t\t${Loc.getMessage('TASKS_PROJECTS_MEMBERS_POPUP_TITLE_MEMBERS')}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</span>\n\t\t\t\t`,\n\t\t\t\tinnerContainer: Tag.render`<div class=\"tasks-projects-members-popup-inner\"></div>`,\n\t\t\t},\n\t\t};\n\t}\n\n\tgetCurrentPopupData()\n\t{\n\t\treturn this.popupData[this.currentType];\n\t}\n}","import {Loc, Tag, Type} from 'main.core';\nimport {MembersPopup} from './members-popup';\n\nexport class ScrumMembersPopup extends MembersPopup\n{\n\trenderContainer()\n\t{\n\t\treturn Tag.render`\n\t\t\t<span class=\"tasks-projects-members-popup-container\">\n\t\t\t\t<span class=\"tasks-projects-members-popup-head\">\n\t\t\t\t\t${this.popupData.all.tab}\n\t\t\t\t\t${this.popupData.scrumTeam.tab}\n\t\t\t\t\t${this.popupData.members.tab}\n\t\t\t\t</span>\n\t\t\t\t<span class=\"tasks-projects-members-popup-body\">\n\t\t\t\t\t<div class=\"tasks-projects-members-popup-content\">\n\t\t\t\t\t\t<div class=\"tasks-projects-members-popup-content-box\">\n\t\t\t\t\t\t\t${this.getCurrentPopupData().innerContainer}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</span>\n\t\t\t</span>\n\t\t`;\n\t}\n\n\tresetPopupData()\n\t{\n\t\tthis.popupData = {\n\t\t\tall: {\n\t\t\t\tcurrentPage: 1,\n\t\t\t\trenderedUsers: [],\n\t\t\t\ttab: Tag.render`\n\t\t\t\t\t<span\n\t\t\t\t\t\tclass=\"tasks-projects-members-popup-head-item\"\n\t\t\t\t\t\tonclick=\"${this.changeType.bind(this, 'all')}\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<span class=\"tasks-projects-members-popup-head-text\">\n\t\t\t\t\t\t\t${Loc.getMessage('TASKS_PROJECTS_MEMBERS_POPUP_TITLE_ALL')}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</span>\n\t\t\t\t`,\n\t\t\t\tinnerContainer: Tag.render`<div class=\"tasks-projects-members-popup-inner\"></div>`,\n\t\t\t},\n\t\t\tscrumTeam: {\n\t\t\t\tcurrentPage: 1,\n\t\t\t\trenderedUsers: [],\n\t\t\t\ttab: Tag.render`\n\t\t\t\t\t<span\n\t\t\t\t\t\tclass=\"tasks-projects-members-popup-head-item\"\n\t\t\t\t\t\tonclick=\"${this.changeType.bind(this, 'scrumTeam')}\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<span class=\"tasks-projects-members-popup-head-text\">\n\t\t\t\t\t\t\t${Loc.getMessage('TASKS_PROJECTS_MEMBERS_POPUP_TITLE_SCRUM_TEAM')}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</span>\n\t\t\t\t`,\n\t\t\t\tinnerContainer: Tag.render`<div class=\"tasks-projects-members-popup-inner\"></div>`,\n\t\t\t},\n\t\t\tmembers: {\n\t\t\t\tcurrentPage: 1,\n\t\t\t\trenderedUsers: [],\n\t\t\t\ttab: Tag.render`\n\t\t\t\t\t<span\n\t\t\t\t\t\tclass=\"tasks-projects-members-popup-head-item\"\n\t\t\t\t\t\tonclick=\"${this.changeType.bind(this, 'members')}\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<span class=\"tasks-projects-members-popup-head-text\">\n\t\t\t\t\t\t\t${Loc.getMessage('TASKS_PROJECTS_MEMBERS_POPUP_TITLE_SCRUM_MEMBERS')}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</span>\n\t\t\t\t`,\n\t\t\t\tinnerContainer: Tag.render`<div class=\"tasks-projects-members-popup-inner\"></div>`,\n\t\t\t}\n\t\t};\n\t}\n\n\trenderUsers(users)\n\t{\n\t\tif (this.currentType === 'scrumTeam')\n\t\t{\n\t\t\tthis.renderLabels(users);\n\n\t\t\tObject.values(users).forEach((user) => {\n\t\t\t\tif (\n\t\t\t\t\tthis.getCurrentPopupData().renderedUsers.indexOf(user.ID) >= 0\n\t\t\t\t\t&& user.ROLE !== 'M'\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis.getCurrentPopupData().renderedUsers.push(user.ID);\n\n\t\t\t\tconst containersMap = new Map();\n\t\t\t\tcontainersMap.set('A', 'tasks-scrum-members-popup-owner-container');\n\t\t\t\tcontainersMap.set('M', 'tasks-scrum-members-popup-master-container');\n\t\t\t\tcontainersMap.set('E', 'tasks-scrum-members-popup-team-container');\n\n\t\t\t\tif (Type.isUndefined(containersMap.get(user.ROLE)))\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.getCurrentPopupData()\n\t\t\t\t\t.innerContainer\n\t\t\t\t\t.querySelector('.' + containersMap.get(user.ROLE))\n\t\t\t\t\t.appendChild(\n\t\t\t\t\t\tTag.render`\n\t\t\t\t\t\t\t<a class=\"tasks-projects-members-popup-item\" href=\"${user['HREF']}\" target=\"_blank\">\n\t\t\t\t\t\t\t\t<span class=\"tasks-projects-members-popup-avatar-new\">\n\t\t\t\t\t\t\t\t\t${this.getAvatar(user)}\n\t\t\t\t\t\t\t\t\t<span class=\"tasks-projects-members-popup-avatar-status-icon\"></span>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<span class=\"tasks-scrum-members-popup-name\">${user['FORMATTED_NAME']}</span>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t`\n\t\t\t\t\t)\n\t\t\t\t;\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tObject.values(users).forEach((user) => {\n\t\t\t\tif (this.getCurrentPopupData().renderedUsers.indexOf(user.ID) >= 0)\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis.getCurrentPopupData().renderedUsers.push(user.ID);\n\n\t\t\t\tthis.getCurrentPopupData().innerContainer.appendChild(\n\t\t\t\t\tTag.render`\n\t\t\t\t\t<a class=\"tasks-projects-members-popup-item\" href=\"${user['HREF']}\" target=\"_blank\">\n\t\t\t\t\t\t<span class=\"tasks-projects-members-popup-avatar-new\">\n\t\t\t\t\t\t\t${this.getAvatar(user)}\n\t\t\t\t\t\t\t<span class=\"tasks-projects-members-popup-avatar-status-icon\"></span>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span class=\"tasks-scrum-members-popup-name\">${user['FORMATTED_NAME']}</span>\n\t\t\t\t\t</a>\n\t\t\t\t`\n\t\t\t\t);\n\t\t\t})\n\t\t}\n\t}\n\n\trenderLabels(users)\n\t{\n\t\tconst hasOwner = users.find((user) => user.ROLE === 'A');\n\t\tconst hasMaster = users.find((user) => user.ROLE === 'M');\n\t\tconst hasTeam = users.find((user) => user.ROLE === 'E');\n\n\t\tif (hasOwner)\n\t\t{\n\t\t\tthis.getCurrentPopupData().innerContainer.appendChild(\n\t\t\t\tTag.render`\n\t\t\t\t\t<div class=\"tasks-scrum-members-popup-owner-container\">\n\t\t\t\t\t\t<span class=\"tasks-scrum-members-popup-label\">\n\t\t\t\t\t\t\t<span class=\"tasks-scrum-members-popup-label-text\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('TASKS_PROJECTS_MEMBERS_POPUP_LABEL_SCRUM_OWNER')}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t`\n\t\t\t);\n\t\t}\n\n\t\tif (hasMaster)\n\t\t{\n\t\t\tthis.getCurrentPopupData().innerContainer.appendChild(\n\t\t\t\tTag.render`\n\t\t\t\t\t<div class=\"tasks-scrum-members-popup-master-container\">\n\t\t\t\t\t\t<span class=\"tasks-scrum-members-popup-label\">\n\t\t\t\t\t\t\t<span class=\"tasks-scrum-members-popup-label-text\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('TASKS_PROJECTS_MEMBERS_POPUP_LABEL_SCRUM_MASTER')}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t`\n\t\t\t);\n\t\t}\n\n\t\tif (hasTeam)\n\t\t{\n\t\t\tthis.getCurrentPopupData().innerContainer.appendChild(\n\t\t\t\tTag.render`\n\t\t\t\t\t<div class=\"tasks-scrum-members-popup-team-container\">\n\t\t\t\t\t\t<span class=\"tasks-scrum-members-popup-label\">\n\t\t\t\t\t\t\t<span class=\"tasks-scrum-members-popup-label-text\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('TASKS_PROJECTS_MEMBERS_POPUP_LABEL_SCRUM_TEAM')}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t`\n\t\t\t);\n\t\t}\n\t}\n}","import {Dom, Type} from 'main.core';\nimport {BaseEvent, EventEmitter} from 'main.core.events';\n\nexport class Grid\n{\n\tstatic get classes()\n\t{\n\t\treturn {\n\t\t\thighlighted: 'task-projects-item-highlighted',\n\t\t\tpinned: 'tasks-projects-row-pinned',\n\t\t};\n\t}\n\n\tconstructor(options)\n\t{\n\t\tthis.pageSize = 10;\n\n\t\tthis.grid = BX.Main.gridManager.getInstanceById(options.gridId);\n\t\tthis.stub = options.gridStub;\n\n\t\tthis.sort = options.sort;\n\t\tthis.actionsPanel = options.actionsPanel;\n\n\t\tthis.items = new Map();\n\t\tthis.fillItems(options.items);\n\n\t\tthis.bindEvents();\n\t\tthis.colorPinnedRows();\n\t}\n\n\tbindEvents()\n\t{\n\t\tEventEmitter.subscribe('BX.Main.grid:sort', this.onColumnSort.bind(this));\n\t\tEventEmitter.subscribe('BX.Main.grid:paramsUpdated', this.onParamsUpdated.bind(this));\n\t}\n\n\tonColumnSort(event: BaseEvent)\n\t{\n\t\tconst data = event.getData();\n\t\tconst grid = data[1];\n\t\tconst column = data[0];\n\n\t\tif (grid === this.grid)\n\t\t{\n\t\t\tthis.sort = {};\n\t\t\tthis.sort[column.sort_by] = column.sort_order;\n\t\t}\n\t}\n\n\tonParamsUpdated()\n\t{\n\t\tconst newItems = this.getRows().map(row => row.getId()).filter(id => id !== 'template_0');\n\t\tconst flipped = newItems.reduce((obj, value) => ({...obj, [value]: null}), {});\n\n\t\tthis.clearItems();\n\t\tthis.fillItems(flipped);\n\t\tthis.colorPinnedRows();\n\t}\n\n\taddRow(id, data, params)\n\t{\n\t\tconst options = {\n\t\t\tid: id,\n\t\t\tcolumns: data.content,\n\t\t\tactions: data.actions,\n\t\t\tcellActions: data.cellActions,\n\t\t\tcounters: data.counters,\n\t\t};\n\t\tconst moveParams = params.moveParams || {};\n\n\t\tif (moveParams.rowBefore)\n\t\t{\n\t\t\toptions.insertAfter = moveParams.rowBefore;\n\t\t}\n\t\telse if (moveParams.rowAfter)\n\t\t{\n\t\t\toptions.insertBefore = moveParams.rowAfter;\n\t\t}\n\t\telse\n\t\t{\n\t\t\toptions.append = true;\n\t\t}\n\n\t\tif (this.items.size > this.getCurrentPage() * this.pageSize)\n\t\t{\n\t\t\tconst lastRowId = this.getLastRowId();\n\n\t\t\tthis.removeItem(lastRowId);\n\t\t\tDom.remove(this.getRowNodeById(lastRowId));\n\t\t\tthis.showMoreButton();\n\t\t}\n\n\t\tthis.hideStub();\n\t\tthis.getRealtime().addRow(options);\n\t\tthis.colorPinnedRows();\n\n\t\tEventEmitter.emit('Tasks.Projects.Grid:RowAdd', {id});\n\t}\n\n\tupdateRow(id, data, params)\n\t{\n\t\tconst row = this.getRowById(id);\n\t\trow.setCellsContent(data.content);\n\t\trow.setActions(data.actions);\n\t\trow.setCellActions(data.cellActions);\n\t\trow.setCounters(data.counters);\n\n\t\tthis.resetRows();\n\t\tthis.moveRow(id, (params.moveParams || {}));\n\t\tthis.highlightRow(id, (params.highlightParams || {})).then(() => this.colorPinnedRows(), () => {});\n\n\t\tthis.grid.bindOnRowEvents();\n\n\t\tEventEmitter.emit('Tasks.Projects.Grid:RowUpdate', {id});\n\t}\n\n\tremoveRow(id)\n\t{\n\t\tif (!this.isRowExist(id))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.grid.removeRow(id);\n\n\t\tEventEmitter.emit('Tasks.Projects.Grid:RowRemove', {id});\n\t}\n\n\tmoveRow(rowId, params): void\n\t{\n\t\tif (params.skip)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst rowBefore = params.rowBefore || 0;\n\t\tconst rowAfter = params.rowAfter || 0;\n\n\t\tif (rowBefore)\n\t\t{\n\t\t\tthis.grid.getRows().insertAfter(rowId, rowBefore);\n\t\t}\n\t\telse if (rowAfter)\n\t\t{\n\t\t\tthis.grid.getRows().insertBefore(rowId, rowAfter);\n\t\t}\n\t}\n\n\thighlightRow(rowId, params): Promise\n\t{\n\t\tparams = params || {};\n\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tif (!this.isRowExist(rowId))\n\t\t\t{\n\t\t\t\treject();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (params.skip)\n\t\t\t{\n\t\t\t\tresolve();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst node = this.getRowNodeById(rowId);\n\t\t\tconst isPinned = Dom.hasClass(node, Grid.classes.pinned);\n\n\t\t\tif (isPinned)\n\t\t\t{\n\t\t\t\tDom.removeClass(node, Grid.classes.pinned);\n\t\t\t}\n\n\t\t\tDom.addClass(node, Grid.classes.highlighted);\n\t\t\tsetTimeout(() => {\n\t\t\t\tDom.removeClass(node, Grid.classes.highlighted);\n\t\t\t\tif (isPinned)\n\t\t\t\t{\n\t\t\t\t\tDom.addClass(node, Grid.classes.pinned);\n\t\t\t\t}\n\t\t\t\tresolve();\n\t\t\t}, 900);\n\t\t});\n\t}\n\n\tcolorPinnedRows()\n\t{\n\t\tthis.getRows().forEach((row) => {\n\t\t\tconst node = row.getNode();\n\t\t\tthis.getIsPinned(row.getId())\n\t\t\t\t? Dom.addClass(node, Grid.classes.pinned)\n\t\t\t\t: Dom.removeClass(node, Grid.classes.pinned)\n\t\t\t;\n\t\t});\n\t}\n\n\tresetRows()\n\t{\n\t\tthis.grid.getRows().reset();\n\t}\n\n\tgetRows()\n\t{\n\t\treturn this.grid.getRows().getBodyChild();\n\t}\n\n\tgetFirstRowId()\n\t{\n\t\tconst firstRow = this.grid.getRows().getBodyFirstChild();\n\t\treturn (firstRow ? this.getRowProperty(firstRow, 'id') : 0);\n\t}\n\n\tgetLastRowId()\n\t{\n\t\tconst lastRow = this.grid.getRows().getBodyLastChild();\n\t\treturn (lastRow ? this.getRowProperty(lastRow, 'id') : 0);\n\t}\n\n\tgetLastPinnedRowId()\n\t{\n\t\tconst pinnedRows = Object.values(this.getRows()).filter(row => this.getIsPinned(row.getId()));\n\t\tconst keys = Object.keys(pinnedRows);\n\n\t\tif (keys.length > 0)\n\t\t{\n\t\t\treturn pinnedRows[keys[keys.length - 1]].getId();\n\t\t}\n\n\t\treturn 0;\n\t}\n\n\tgetIsPinned(rowId)\n\t{\n\t\treturn this.isRowExist(rowId)\n\t\t\t&& Type.isDomNode(this.getRowNodeById(rowId).querySelector('.main-grid-cell-content-action-pin.main-grid-cell-content-action-active'));\n\t}\n\n\tgetRowProperty(row, propertyName)\n\t{\n\t\treturn BX.data(row.getNode(), propertyName);\n\t}\n\n\tgetRowById(id)\n\t{\n\t\treturn this.grid.getRows().getById(id);\n\t}\n\n\tgetRowNodeById(id)\n\t{\n\t\treturn this.getRowById(id).getNode();\n\t}\n\n\tisRowExist(id)\n\t{\n\t\treturn this.getRowById(id) !== null;\n\t}\n\n\tgetCurrentPage()\n\t{\n\t\tconst currentPage = this.grid.getContainer().querySelector('.modern-page-current');\n\t\treturn (currentPage ? currentPage.innerText : 1);\n\t}\n\n\tisActivityRealtimeMode()\n\t{\n\t\treturn this.sort.ACTIVITY_DATE\n\t\t\t&& this.sort.ACTIVITY_DATE === 'desc';\n\t}\n\n\tgetItems()\n\t{\n\t\treturn Array.from(this.items.keys());\n\t}\n\n\thasItem(id)\n\t{\n\t\treturn this.items.has(parseInt(id, 10));\n\t}\n\n\taddItem(id)\n\t{\n\t\tthis.items.set(parseInt(id, 10));\n\t}\n\n\tremoveItem(id)\n\t{\n\t\tthis.items.delete(parseInt(id, 10));\n\t}\n\n\tfillItems(items)\n\t{\n\t\tObject.keys(items).forEach(id => this.addItem(id));\n\t}\n\n\tclearItems()\n\t{\n\t\tthis.items.clear();\n\t}\n\n\tgetRealtime()\n\t{\n\t\treturn this.grid.getRealtime();\n\t}\n\n\tshowStub()\n\t{\n\t\tif (this.stub)\n\t\t{\n\t\t\tthis.getRealtime().showStub({content: this.stub});\n\t\t}\n\t}\n\n\thideStub()\n\t{\n\t\tthis.grid.hideEmptyStub();\n\t}\n\n\tshowMoreButton()\n\t{\n\t\tthis.grid.getMoreButton().getNode().style.display = 'inline-block';\n\t}\n\n\thideMoreButton()\n\t{\n\t\tthis.grid.getMoreButton().getNode().style.display = 'none';\n\t}\n}","import {Type, ajax} from 'main.core';\n\nimport {Grid} from './grid';\n\nexport class PullController\n{\n\tstatic get events()\n\t{\n\t\treturn {\n\t\t\tadd: 'add',\n\t\t\tupdate: 'update',\n\t\t\tremove: 'remove',\n\t\t\tuserAdd: 'userAdd',\n\t\t\tuserUpdate: 'userUpdate',\n\t\t\tuserRemove: 'userRemove',\n\t\t\tpinChanged: 'pinChanged',\n\t\t};\n\t}\n\n\tstatic get counterEvents()\n\t{\n\t\treturn [\n\t\t\t'onAfterTaskAdd',\n\t\t\t'onAfterTaskDelete',\n\t\t\t'onAfterTaskRestore',\n\t\t\t'onAfterTaskView',\n\t\t\t'onAfterTaskMute',\n\t\t\t'onAfterCommentAdd',\n\t\t\t'onAfterCommentDelete',\n\t\t\t'onProjectPermUpdate',\n\t\t];\n\t}\n\n\tstatic get movingProjectEvents()\n\t{\n\t\treturn [\n\t\t\t'onAfterTaskAdd',\n\t\t\t'onAfterCommentAdd',\n\t\t];\n\t}\n\n\tconstructor(options)\n\t{\n\t\tthis.signedParameters = options.signedParameters;\n\t\tthis.isScrumList = options.isScrumList === 'Y';\n\t\tthis.createProjectUrl = options.createProjectUrl;\n\t\tthis.scrumLimitSidePanelId = options.scrumLimitSidePanelId;\n\n\t\tthis.grid = new Grid(options);\n\n\t\tthis.timer = null;\n\t\tthis.counterData = new Map();\n\t\tthis.userOptions = options.userOptions;\n\t}\n\n\tgetModuleId()\n\t{\n\t\treturn 'tasks';\n\t}\n\n\tgetMap()\n\t{\n\t\treturn {\n\t\t\tproject_add: this.onProjectAdd.bind(this),\n\t\t\tproject_update: this.onProjectUpdate.bind(this),\n\t\t\tproject_remove: this.onProjectRemove.bind(this),\n\t\t\tproject_user_add: this.onProjectUserAdd.bind(this),\n\t\t\tproject_user_update: this.onProjectUserUpdate.bind(this),\n\t\t\tproject_user_remove: this.onProjectUserRemove.bind(this),\n\t\t\tproject_user_option_changed: this.onProjectUserOptionChanged.bind(this),\n\t\t\tproject_counter: this.onProjectCounter.bind(this),\n\t\t\tproject_read_all: this.onProjectCommentsReadAll.bind(this),\n\t\t\tcomment_read_all: this.onProjectCommentsReadAll.bind(this),\n\t\t\tscrum_read_all: this.onProjectCommentsReadAll.bind(this)\n\t\t};\n\t}\n\n\tonProjectAdd(data)\n\t{\n\t\tconst params = {\n\t\t\tevent: PullController.events.add,\n\t\t\tmoveParams: {\n\t\t\t\trowBefore: this.grid.getLastPinnedRowId(),\n\t\t\t\trowAfter: this.grid.getFirstRowId(),\n\t\t\t},\n\t\t};\n\n\t\tthis.checkExistence(data.ID).then(\n\t\t\tresponse => this.onCheckExistenceSuccess(response, data.ID, params),\n\t\t\tresponse => console.error(response)\n\t\t);\n\n\t\tif (this.isScrumList)\n\t\t{\n\t\t\tthis.checkScrumLimit()\n\t\t\t\t.then(\n\t\t\t\t\tisLimitExceeded => this.onCheckScrumLimit(isLimitExceeded),\n\t\t\t\t\tresponse => console.error(response)\n\t\t\t\t)\n\t\t\t;\n\t\t}\n\t}\n\n\tonProjectUpdate(data)\n\t{\n\t\tconst params = {\n\t\t\tevent: PullController.events.update,\n\t\t};\n\n\t\tthis.checkExistence(data.ID).then(\n\t\t\tresponse => this.onCheckExistenceSuccess(response, data.ID, params),\n\t\t\tresponse => console.error(response)\n\t\t);\n\t}\n\n\tonProjectRemove(data)\n\t{\n\t\tthis.removeRow(data.ID);\n\n\t\tif (this.isScrumList)\n\t\t{\n\t\t\tthis.checkScrumLimit()\n\t\t\t\t.then(\n\t\t\t\t\tisLimitExceeded => this.onCheckScrumLimit(isLimitExceeded),\n\t\t\t\t\tresponse => console.error(response)\n\t\t\t\t)\n\t\t\t;\n\t\t}\n\t}\n\n\tonProjectUserAdd(data)\n\t{\n\t\tconst params = {\n\t\t\tevent: PullController.events.userAdd,\n\t\t};\n\n\t\tthis.checkExistence(data.GROUP_ID).then(\n\t\t\tresponse => this.onCheckExistenceSuccess(response, data.GROUP_ID, params),\n\t\t\tresponse => console.error(response)\n\t\t);\n\t}\n\n\tonProjectUserUpdate(data)\n\t{\n\t\tconst params = {\n\t\t\tevent: PullController.events.userUpdate,\n\t\t};\n\n\t\tthis.checkExistence(data.GROUP_ID).then(\n\t\t\tresponse => this.onCheckExistenceSuccess(response, data.GROUP_ID, params),\n\t\t\tresponse => console.error(response)\n\t\t);\n\t}\n\n\tonProjectUserRemove(data)\n\t{\n\t\tconst params = {\n\t\t\tevent: PullController.events.userRemove,\n\t\t};\n\n\t\tthis.checkExistence(data.GROUP_ID).then(\n\t\t\tresponse => this.onCheckExistenceSuccess(response, data.GROUP_ID, params),\n\t\t\tresponse => console.error(response)\n\t\t);\n\t}\n\n\tonProjectUserOptionChanged(data)\n\t{\n\t\tswitch (data.OPTION)\n\t\t{\n\t\t\tcase this.userOptions.pinned:\n\t\t\t\tthis.onProjectPinChanged(data);\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tonProjectPinChanged(data)\n\t{\n\t\tconst params = {\n\t\t\tevent: PullController.events.pinChanged,\n\t\t};\n\n\t\tthis.moveToDirectPlace(data.PROJECT_ID, null, params);\n\t}\n\n\tonProjectCounter(data)\n\t{\n\t\tconst groupId = data.GROUP_ID;\n\t\tconst event = data.EVENT;\n\n\t\tif (!PullController.counterEvents.includes(event))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this.timer)\n\t\t{\n\t\t\tthis.timer = setTimeout(() => {\n\t\t\t\tthis.freeCounterQueue();\n\t\t\t}, 1000);\n\t\t}\n\n\t\tif (PullController.movingProjectEvents.includes(event) || !this.counterData.has(groupId))\n\t\t{\n\t\t\tthis.counterData.set(groupId, event);\n\t\t}\n\t}\n\n\tfreeCounterQueue()\n\t{\n\t\tthis.counterData.forEach((event, groupId) => {\n\t\t\tconst params = {\n\t\t\t\tevent,\n\t\t\t\thighlightParams: {\n\t\t\t\t\tskip: true,\n\t\t\t\t},\n\t\t\t};\n\t\t\tif (PullController.movingProjectEvents.includes(event))\n\t\t\t{\n\t\t\t\tparams.moveParams = {\n\t\t\t\t\trowBefore: (this.grid.getIsPinned(groupId) ? 0 : this.grid.getLastPinnedRowId()),\n\t\t\t\t\trowAfter: this.grid.getFirstRowId(),\n\t\t\t\t};\n\t\t\t\tparams.highlightParams = {\n\t\t\t\t\tskip: false,\n\t\t\t\t};\n\t\t\t}\n\t\t\tthis.checkExistence(groupId).then(\n\t\t\t\tresponse => this.onCheckExistenceSuccess(response, groupId, params),\n\t\t\t\tresponse => console.error(response)\n\t\t\t);\n\t\t});\n\t\tthis.counterData.clear();\n\t\tthis.timer = null;\n\t}\n\n\tonProjectCommentsReadAll(data)\n\t{\n\t\tconst groupId = data.GROUP_ID;\n\n\t\tif (groupId)\n\t\t{\n\t\t\tif (this.grid.isRowExist(groupId))\n\t\t\t{\n\t\t\t\tthis.updateCounter([groupId]);\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.updateCounter(this.grid.getItems());\n\t\t}\n\t}\n\n\tcheckExistence(groupId)\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tBX.ajax.runComponentAction('bitrix:tasks.projects', 'checkExistence', {\n\t\t\t\tmode: 'class',\n\t\t\t\tdata: {\n\t\t\t\t\tgroupIds: [groupId],\n\t\t\t\t},\n\t\t\t\tsignedParameters: this.signedParameters,\n\t\t\t}).then(\n\t\t\t\tresponse => resolve(response),\n\t\t\t\tresponse => reject(response)\n\t\t\t);\n\t\t});\n\t}\n\n\tcheckScrumLimit(): Promise\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tajax.runAction(\n\t\t\t\t'bitrix:tasks.scrum.info.checkScrumLimit',\n\t\t\t\t{\n\t\t\t\t\tdata: {},\n\t\t\t\t\tsignedParameters: this.signedParameters,\n\t\t\t\t}\n\t\t\t)\n\t\t\t\t.then(\n\t\t\t\t\tresponse => resolve(response.data),\n\t\t\t\t\tresponse => reject(response)\n\t\t\t\t)\n\t\t\t;\n\t\t});\n\t}\n\n\tonCheckExistenceSuccess(response, groupId, params)\n\t{\n\t\tif (Type.isUndefined(response.data[groupId]))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (response.data[groupId] === false)\n\t\t{\n\t\t\tthis.removeRow(groupId);\n\t\t\treturn;\n\t\t}\n\n\t\tconst group = response.data[groupId];\n\n\t\tif (this.grid.isRowExist(groupId))\n\t\t{\n\t\t\tthis.grid.isActivityRealtimeMode()\n\t\t\t\t? this.updateRow(groupId, group, params)\n\t\t\t\t: this.moveToDirectPlace(groupId, group, params)\n\t\t\t;\n\t\t}\n\t\telse if (\n\t\t\tthis.grid.isActivityRealtimeMode()\n\t\t\t&& (PullController.movingProjectEvents.includes(params.event) || params.event === PullController.events.add)\n\t\t)\n\t\t{\n\t\t\tthis.updateItem(groupId, group, params);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.moveToDirectPlace(groupId, group, params);\n\t\t}\n\t}\n\n\tonCheckScrumLimit(isLimitExceeded: boolean)\n\t{\n\t\tthis.projectAddButton = document.getElementById('projectAddButton');\n\t\tif (!Type.isDomNode(this.projectAddButton))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (isLimitExceeded)\n\t\t{\n\t\t\tthis.projectAddButton.href = `javascript:BX.UI.InfoHelper.show('${this.scrumLimitSidePanelId\n\t\t\t\t}', {isLimit: true, limitAnalyticsLabels: {module: 'tasks', source: 'scrumList'}})`\n\t\t\t;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.projectAddButton.href = this.createProjectUrl;\n\t\t}\n\t}\n\n\tupdateItem(rowId, rowData, params)\n\t{\n\t\tif (!this.grid.hasItem(rowId))\n\t\t{\n\t\t\tthis.grid.addItem(rowId);\n\t\t\tthis.addRow(rowId, rowData, params);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.updateRow(rowId, rowData, params);\n\t\t}\n\t}\n\n\taddRow(rowId, rowData, params)\n\t{\n\t\tif (this.grid.isRowExist(rowId))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tBX.ajax.runComponentAction('bitrix:tasks.projects', 'prepareGridRows', {\n\t\t\tmode: 'class',\n\t\t\tdata: {\n\t\t\t\tgroupIds: [rowId],\n\t\t\t\tdata: (rowData ? {[rowId]: rowData} : null),\n\t\t\t},\n\t\t\tsignedParameters: this.signedParameters,\n\t\t})\n\t\t\t.then((response) => {\n\t\t\t\tif (!Type.isUndefined(response.data[rowId]))\n\t\t\t\t{\n\t\t\t\t\tthis.grid.addRow(rowId, response.data[rowId], params);\n\t\t\t\t}\n\t\t\t})\n\t\t;\n\t}\n\n\tupdateRow(rowId, rowData, params)\n\t{\n\t\tif (!this.grid.isRowExist(rowId))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tBX.ajax.runComponentAction('bitrix:tasks.projects', 'prepareGridRows', {\n\t\t\tmode: 'class',\n\t\t\tdata: {\n\t\t\t\tgroupIds: [rowId],\n\t\t\t\tdata: (rowData ? {[rowId]: rowData} : null),\n\t\t\t},\n\t\t\tsignedParameters: this.signedParameters,\n\t\t})\n\t\t\t.then((response) => {\n\t\t\t\tif (!Type.isUndefined(response.data[rowId]))\n\t\t\t\t{\n\t\t\t\t\tthis.grid.updateRow(rowId, response.data[rowId], params)\n\t\t\t\t}\n\t\t\t})\n\t\t;\n\t}\n\n\tremoveRow(rowId)\n\t{\n\t\tthis.grid.removeItem(rowId);\n\t\tthis.grid.removeRow(rowId);\n\t}\n\n\tmoveToDirectPlace(groupId, data, params)\n\t{\n\t\tparams = params || {};\n\n\t\tBX.ajax.runComponentAction('bitrix:tasks.projects', 'findProjectPlace', {\n\t\t\tmode: 'class',\n\t\t\tdata: {\n\t\t\t\tgroupId,\n\t\t\t\tcurrentPage: this.grid.getCurrentPage(),\n\t\t\t},\n\t\t\tsignedParameters: this.signedParameters,\n\t\t}).then((response) => {\n\t\t\tif (response.data === null)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst {projectBefore, projectAfter} = response.data;\n\n\t\t\tif (projectBefore === false && projectAfter === false)\n\t\t\t{\n\t\t\t\tthis.removeRow(groupId);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (\n\t\t\t\t\t(projectBefore && this.grid.isRowExist(projectBefore))\n\t\t\t\t\t|| (projectAfter && this.grid.isRowExist(projectAfter))\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tparams.moveParams = {\n\t\t\t\t\t\trowBefore: projectBefore,\n\t\t\t\t\t\trowAfter: projectAfter,\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tparams.moveParams = {\n\t\t\t\t\t\tskip: true,\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tthis.updateItem(groupId, data, params);\n\t\t\t}\n\t\t});\n\t}\n\n\tupdateCounter(rowIds)\n\t{\n\t\tBX.ajax.runComponentAction('bitrix:tasks.projects', 'prepareGridRows', {\n\t\t\tmode: 'class',\n\t\t\tdata: {\n\t\t\t\tgroupIds: rowIds,\n\t\t\t\tdata: null,\n\t\t\t},\n\t\t\tsignedParameters: this.signedParameters,\n\t\t}).then((response) => {\n\t\t\tconst projects = response.data;\n\t\t\tif (projects)\n\t\t\t{\n\t\t\t\tObject.keys(projects).forEach((projectId) => {\n\t\t\t\t\tif (this.grid.isRowExist(projectId))\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.grid.getRowById(projectId).setCounters(projects[projectId].counters);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n}","import {BaseEvent, EventEmitter} from 'main.core.events';\nimport {Grid} from '../grid';\nimport {Guide, Step} from 'ui.tour';\nimport {Loc, Uri} from 'main.core';\n\nexport class FirstProjectCreationTourGuide\n{\n\tconstructor(options)\n\t{\n\t\tthis.grid = new Grid(options);\n\t\tthis.signedParameters = options.signedParameters;\n\t\tthis.popupData = options.tours.firstProjectCreation.popupData;\n\n\t\tthis.projectAddButton = BX('projectAddButton');\n\t\tthis.guide = new Guide({\n\t\t\tsteps: [\n\t\t\t\t{\n\t\t\t\t\ttarget: this.projectAddButton,\n\t\t\t\t\ttitle: this.popupData[0].title,\n\t\t\t\t\ttext: this.popupData[0].text,\n\t\t\t\t\tarticle: this.popupData[0].article,\n\t\t\t\t},\n\t\t\t],\n\t\t\tonEvents: true\n\t\t});\n\n\t\tthis.bindEvents();\n\t}\n\n\tbindEvents()\n\t{\n\t\tEventEmitter.subscribe('UI.Tour.Guide:onFinish', this.onGuideFinish.bind(this));\n\t\tEventEmitter.subscribe('SidePanel.Slider:onMessage', this.onProjectSliderMessage.bind(this));\n\t}\n\n\tonGuideFinish(event: BaseEvent)\n\t{\n\t\tconst {guide} = event.getData();\n\n\t\tif (guide === this.guide)\n\t\t{\n\t\t\tthis.projectAddButton.href = Uri.removeParam(this.projectAddButton.href, ['PROJECT_OPTIONS']);\n\t\t}\n\t}\n\n\tonProjectSliderMessage(event: BaseEvent)\n\t{\n\t\tconst [sliderEvent] = event.getData();\n\t\tif (sliderEvent.getEventId() !== 'sonetGroupEvent')\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst sliderEventData = sliderEvent.getData();\n\t\tif (\n\t\t\tsliderEventData.code !== 'afterCreate'\n\t\t\t|| sliderEventData.data.projectOptions.tourId !== this.guide.getId()\n\t\t)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst projectId = sliderEventData.data.group.ID;\n\n\t\tif (this.grid.isRowExist(projectId))\n\t\t{\n\t\t\tthis.showFinalStep(projectId);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tEventEmitter.subscribe('Tasks.Projects.Grid:RowAdd', this.onProjectRowAdded.bind(this, projectId));\n\t\t}\n\t}\n\n\tonProjectRowAdded(projectId, event: BaseEvent)\n\t{\n\t\tconst {id} = event.getData();\n\n\t\tif (Number(id) === Number(projectId))\n\t\t{\n\t\t\tthis.showFinalStep(projectId);\n\t\t}\n\t}\n\n\tshowFinalStep(projectId)\n\t{\n\t\tconst target = this.grid.getRowNodeById(projectId).querySelector('.tasks-projects-text');\n\n\t\tthis.guide.steps.push(new Step({\n\t\t\ttarget,\n\t\t\tcursorMode: true,\n\t\t\ttargetEvent: () => {\n\t\t\t\tBX.SidePanel.Instance.open(target.href);\n\t\t\t\tsetTimeout(() => this.guide.close(), 1000);\n\t\t\t},\n\t\t}));\n\t\tthis.finish();\n\t\tthis.showNextStep();\n\t}\n\n\tstart()\n\t{\n\t\tthis.projectAddButton.href = Uri.addParam(this.projectAddButton.href, {\n\t\t\tPROJECT_OPTIONS: {\n\t\t\t\ttourId: this.guide.getId(),\n\t\t\t},\n\t\t});\n\t\tthis.showNextStep();\n\t}\n\n\tfinish()\n\t{\n\t\tBX.ajax.runAction('tasks.tourguide.firstprojectcreation.finish');\n\t}\n\n\tshowNextStep()\n\t{\n\t\tsetTimeout(() => this.guide.showNextStep(), 1000);\n\t}\n}","import {BaseEvent, EventEmitter} from 'main.core.events';\nimport {Grid} from '../grid';\nimport {Guide, Step} from 'ui.tour';\nimport {Loc, Uri} from 'main.core';\n\nexport class FirstScrumCreationTourGuide\n{\n\tconstructor(options)\n\t{\n\t\tthis.grid = new Grid(options);\n\t\tthis.signedParameters = options.signedParameters;\n\t\tthis.popupData = options.tours.firstScrumCreation.popupData;\n\n\t\tthis.projectAddButton = BX('projectAddButton');\n\t\tthis.guide = new Guide({\n\t\t\tsteps: [\n\t\t\t\t{\n\t\t\t\t\ttarget: this.projectAddButton,\n\t\t\t\t\ttitle: this.popupData[0].title,\n\t\t\t\t\ttext: this.popupData[0].text,\n\t\t\t\t\tarticle: null\n\t\t\t\t},\n\t\t\t],\n\t\t\tonEvents: true\n\t\t});\n\n\t\tthis.bindEvents();\n\t}\n\n\tbindEvents()\n\t{\n\t\tEventEmitter.subscribe('UI.Tour.Guide:onFinish', this.onGuideFinish.bind(this));\n\t\tEventEmitter.subscribe('SidePanel.Slider:onMessage', this.onProjectSliderMessage.bind(this));\n\t}\n\n\tonGuideFinish(event: BaseEvent)\n\t{\n\t\tconst {guide} = event.getData();\n\n\t\tif (guide === this.guide)\n\t\t{\n\t\t\tthis.projectAddButton.href = Uri.removeParam(this.projectAddButton.href, ['PROJECT_OPTIONS']);\n\t\t}\n\t}\n\n\tonProjectSliderMessage(event: BaseEvent)\n\t{\n\t\tconst [sliderEvent] = event.getData();\n\t\tif (sliderEvent.getEventId() !== 'sonetGroupEvent')\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst sliderEventData = sliderEvent.getData();\n\t\tif (\n\t\t\tsliderEventData.code !== 'afterCreate'\n\t\t\t|| sliderEventData.data.projectOptions.tourId !== this.guide.getId()\n\t\t)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst projectId = sliderEventData.data.group.ID;\n\n\t\tif (this.grid.isRowExist(projectId))\n\t\t{\n\t\t\tthis.showFinalStep(projectId);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tEventEmitter.subscribe('Tasks.Projects.Grid:RowAdd', this.onProjectRowAdded.bind(this, projectId));\n\t\t}\n\t}\n\n\tonProjectRowAdded(projectId, event: BaseEvent)\n\t{\n\t\tconst {id} = event.getData();\n\n\t\tif (Number(id) === Number(projectId))\n\t\t{\n\t\t\tthis.showFinalStep(projectId);\n\t\t}\n\t}\n\n\tshowFinalStep(projectId)\n\t{\n\t\tconst target = this.grid.getRowNodeById(projectId).querySelector('.tasks-projects-text');\n\n\t\tthis.guide.steps.push(new Step({\n\t\t\ttarget,\n\t\t\tcursorMode: true,\n\t\t\ttargetEvent: () => {\n\t\t\t\tBX.SidePanel.Instance.open(target.href);\n\t\t\t\tsetTimeout(() => this.guide.close(), 1000);\n\t\t\t},\n\t\t}));\n\t\tthis.finish();\n\t\tthis.showNextStep();\n\t}\n\n\tstart()\n\t{\n\t\tthis.projectAddButton.href = Uri.addParam(this.projectAddButton.href, {\n\t\t\tPROJECT_OPTIONS: {\n\t\t\t\ttourId: this.guide.getId(),\n\t\t\t},\n\t\t});\n\t\tthis.showNextStep();\n\t}\n\n\tfinish()\n\t{\n\t\tBX.ajax.runAction('tasks.tourguide.firstscrumcreation.finish');\n\t}\n\n\tshowNextStep()\n\t{\n\t\tsetTimeout(() => this.guide.showNextStep(), 1000);\n\t}\n}","import {FirstProjectCreationTourGuide} from './first-project-creation-tour-guide';\nimport {FirstScrumCreationTourGuide} from './first-scrum-creation-tour-guide';\n\nexport class TourGuideController\n{\n\tconstructor(options)\n\t{\n\t\tthis.tours = options.tours;\n\n\t\tthis.initGuides(options);\n\t}\n\n\tinitGuides(options)\n\t{\n\t\tif (this.tours.firstProjectCreation && this.tours.firstProjectCreation.show)\n\t\t{\n\t\t\tthis.firstProjectCreationTourGuide = new FirstProjectCreationTourGuide(options);\n\t\t\tthis.firstProjectCreationTourGuide.start();\n\t\t}\n\n\t\tif (this.tours.firstScrumCreation && this.tours.firstScrumCreation.show)\n\t\t{\n\t\t\tthis.firstScrumCreationTourGuide = new FirstScrumCreationTourGuide(options);\n\t\t\tthis.firstScrumCreationTourGuide.start();\n\t\t}\n\t}\n}","import {PULL as Pull} from 'pull.client';\n\nimport {ActionsController} from './actions-controller';\nimport {Filter} from './filter/filter';\nimport {MembersPopup} from './members-popup';\nimport {ScrumMembersPopup} from './scrum-members-popup';\nimport {PullController} from './pull-controller';\nimport {TourGuideController} from './tourguide/tour-guide-controller';\n\nclass Controller\n{\n\tconstructor(options)\n\t{\n\t\tthis.membersPopup = new MembersPopup(options);\n\t\tthis.scrumMembersPopup = new ScrumMembersPopup(options);\n\t\tthis.filter = new Filter(options);\n\t\tthis.tourGuideController = new TourGuideController(options);\n\n\t\toptions.filter = this.filter;\n\n\t\tActionsController.setOptions(options);\n\n\t\tthis.initPull(options);\n\t}\n\n\tinitPull(options)\n\t{\n\t\tthis.pullController = new PullController(options);\n\n\t\tthis.pullClient = Pull;\n\t\tthis.pullClient.subscribe(this.pullController);\n\t}\n\n\tgetMembersPopup(): MembersPopup\n\t{\n\t\treturn this.membersPopup;\n\t}\n\n\tgetScrumMembersPopup(): ScrumMembersPopup\n\t{\n\t\treturn this.scrumMembersPopup;\n\t}\n\n\tgetFilter(): Filter\n\t{\n\t\treturn this.filter;\n\t}\n}\n\nexport {Controller, ActionsController};"],"names":["CellActionState","namespace","Reflection","ActionsController","options","actionsPanel","action","groupId","data","Promise","resolve","reject","BX","ajax","runComponentAction","mode","ids","getActionIds","signedParameters","then","hideActionsPanel","unselectRows","id","undefined","selected","getSelectedRows","length","map","row","getDataset","getGridInstance","getRows","getSelected","button","Dom","hasClass","addClass","url","getAttribute","method","dataType","ajax_request","save","sessid","bitrix_sessid","onsuccess","removeClass","onfailure","userGroupRelationId","max_count","checked_0","type_0","id_0","type","result","console","log","sendCancelRequest","hidePanel","unselectAll","Main","gridManager","getById","gridId","instance","event","getData","ACTIVE","doAction","SHOW_BY_HOVER","field","filter","toggleByField","Runtime","loadExtension","exports","onRowUpdate","getCellById","querySelector","dialog","setTargetNode","onRowRemove","hide","onTagsChange","getTarget","tags","getSelectedItems","item","getId","KEYWORDS","join","Dialog","targetNode","enableSearch","width","height","multiple","dropdownMode","compactView","context","entities","searchOptions","allowCreateItem","footerOptions","label","Loc","getMessage","footer","SocialNetwork","EntitySelector","Footer","tagCreationLabel","events","EventEmitter","subscribe","unsubscribe","searchQuery","name","getQuery","toLowerCase","setTimeout","addItem","entityId","title","tabs","select","show","Filter","filterManager","filterId","init","bindEvents","updateFields","onFilterApply","bind","onCounterClick","fields","getFilterFieldsValues","counter","filterField","filterValue","Object","keys","includes","Type","isArray","value","isFilteredByField","isFilteredByFieldValue","getApi","extendFilter","getFilterFields","forEach","getFields","deleteField","getSearch","apply","MembersPopup","bindNode","isPopupShown","popup","destroy","resetPopupData","changeType","PopupWindowManager","create","className","bindElement","autoHide","closeByEsc","lightShadow","bindOptions","position","animationOptions","close","onPopupDestroy","loader","onPopupClose","onAfterPopupShow","contentContainer","appendChild","renderContainer","showLoader","showUsers","popupScroll","Tag","render","popupData","all","tab","heads","members","getCurrentPopupData","innerContainer","isDomNode","Event","area","target","scrollTop","scrollHeight","offsetHeight","unbindAll","page","currentPage","response","currentType","hideLoader","renderUsers","hasChildNodes","innerText","users","values","user","renderedUsers","indexOf","ID","push","getAvatar","isStringFilled","encodeURI","Loader","getPopupContainer","size","newType","loadUsers","oldType","replace","ScrumMembersPopup","scrumTeam","renderLabels","ROLE","containersMap","Map","set","isUndefined","get","hasOwner","find","hasMaster","hasTeam","Grid","highlighted","pinned","pageSize","grid","getInstanceById","stub","gridStub","sort","items","fillItems","colorPinnedRows","onColumnSort","onParamsUpdated","column","sort_by","sort_order","newItems","flipped","reduce","obj","clearItems","params","columns","content","actions","cellActions","counters","moveParams","rowBefore","insertAfter","rowAfter","insertBefore","append","getCurrentPage","lastRowId","getLastRowId","removeItem","remove","getRowNodeById","showMoreButton","hideStub","getRealtime","addRow","emit","getRowById","setCellsContent","setActions","setCellActions","setCounters","resetRows","moveRow","highlightRow","highlightParams","bindOnRowEvents","isRowExist","removeRow","rowId","skip","node","isPinned","classes","getNode","getIsPinned","reset","getBodyChild","firstRow","getBodyFirstChild","getRowProperty","lastRow","getBodyLastChild","pinnedRows","propertyName","getContainer","ACTIVITY_DATE","Array","from","has","parseInt","clear","showStub","hideEmptyStub","getMoreButton","style","display","PullController","add","update","userAdd","userUpdate","userRemove","pinChanged","isScrumList","createProjectUrl","scrumLimitSidePanelId","timer","counterData","userOptions","project_add","onProjectAdd","project_update","onProjectUpdate","project_remove","onProjectRemove","project_user_add","onProjectUserAdd","project_user_update","onProjectUserUpdate","project_user_remove","onProjectUserRemove","project_user_option_changed","onProjectUserOptionChanged","project_counter","onProjectCounter","project_read_all","onProjectCommentsReadAll","comment_read_all","scrum_read_all","getLastPinnedRowId","getFirstRowId","checkExistence","onCheckExistenceSuccess","error","checkScrumLimit","isLimitExceeded","onCheckScrumLimit","GROUP_ID","OPTION","onProjectPinChanged","moveToDirectPlace","PROJECT_ID","EVENT","counterEvents","freeCounterQueue","movingProjectEvents","updateCounter","getItems","groupIds","runAction","group","isActivityRealtimeMode","updateRow","updateItem","projectAddButton","document","getElementById","href","rowData","hasItem","projectBefore","projectAfter","rowIds","projects","projectId","FirstProjectCreationTourGuide","tours","firstProjectCreation","guide","Guide","steps","text","article","onEvents","onGuideFinish","onProjectSliderMessage","Uri","removeParam","sliderEvent","getEventId","sliderEventData","code","projectOptions","tourId","showFinalStep","onProjectRowAdded","Number","Step","cursorMode","targetEvent","SidePanel","Instance","open","finish","showNextStep","addParam","PROJECT_OPTIONS","FirstScrumCreationTourGuide","firstScrumCreation","TourGuideController","initGuides","firstProjectCreationTourGuide","start","firstScrumCreationTourGuide","Controller","membersPopup","scrumMembersPopup","tourGuideController","setOptions","initPull","pullController","pullClient","Pull"],"mappings":"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"}