"use strict";BX.namespace("Tasks.Component");(function(){if(typeof BX.Tasks.Component.TasksWidgetMemberSelectorProjectLink!="undefined"){return}BX.Tasks.Component.TasksWidgetMemberSelectorProjectLink=BX.Tasks.Component.extend({sys:{code:"ms-plink"},options:{entityRoute:""},methods:{bindEvents:function(){this.bindDelegateControl("deselect","click",this.onDeSelect.bind(this));this.bindDelegateControl("open-form","click",this.onOpenForm.bind(this))},onDeSelect:function(){this.setItem(0)},setItem:function(e,t){e=parseInt(e);if(e){BX.removeClass(this.control("item"),"invisible");BX.addClass(this.control("open-form"),"invisible");this.control("item-link").innerHTML=BX.util.htmlspecialchars(t);this.control("item-link").setAttribute("href",this.option("path").SG.toString().replace("{{ID}}",e))}else{BX.addClass(this.control("item"),"invisible");BX.removeClass(this.control("open-form"),"invisible")}this.saveId(e)},onOpenForm:function(){this.getSelector().open()},saveId:function(e){var t=this.option("entityRoute");if(!t){return}var n=this.option("entityId");e=parseInt(e);this.callRemote(t+".update",{id:n,data:{GROUP_ID:e}},{},function(){BX.Tasks.Util.fireGlobalTaskEvent("UPDATE",{ID:n},{STAY_AT_PAGE:true},{id:n});BX.onCustomEvent(this,"onChangeProjectLink",[e,n])})},onSelectorItemSelected:function(e){this.setItem(e.id,BX.util.htmlspecialcharsback(e.nameFormatted));this.getSelector().close();this.getSelector().deselectItem(e.id)},getSelector:function(){return this.subInstance("socnet",function(){var e=new BX.Tasks.Integration.Socialnetwork.NetworkSelector({scope:this.control("open-form"),id:this.id()+"socnet-sel",mode:"group",query:this.getQuery(),useSearch:true,useAdd:false,controlBind:this.option("controlBind"),parent:this,popupOffsetTop:5,popupOffsetLeft:40});e.bindEvent("item-selected",this.onSelectorItemSelected.bind(this));return e})}}})}).call(this);
//# sourceMappingURL=logic.map.js