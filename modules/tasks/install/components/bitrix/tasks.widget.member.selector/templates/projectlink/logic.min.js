"use strict";BX.namespace("Tasks.Component");(function(){if(typeof BX.Tasks.Component.TasksWidgetMemberSelectorProjectLink!="undefined"){return}BX.Tasks.Component.TasksWidgetMemberSelectorProjectLink=BX.Tasks.Component.extend({sys:{code:"ms-plink"},options:{entityRoute:""},methods:{bindEvents:function(){this.bindDelegateControl("deselect","click",this.onDeSelect.bind(this));this.bindDelegateControl("open-form","click",this.onOpenForm.bind(this));this.bindDelegateControl("item-link","click",this.onProjectClick.bind(this))},onDeSelect:function(){this.setItem(0)},setItem:function(t,e){t=parseInt(t);if(t){BX.removeClass(this.control("item"),"invisible");BX.addClass(this.control("open-form"),"invisible");this.control("item-link").innerHTML=BX.util.htmlspecialchars(e);this.control("item-link").setAttribute("href",this.getProjectLink(t));this.option("groupId",t)}else{BX.addClass(this.control("item"),"invisible");BX.removeClass(this.control("open-form"),"invisible")}this.saveId(t)},onOpenForm:function(){this.getSelector().open()},onProjectClick:function(){BX.PreventDefault();if(BX.SidePanel&&typeof BXDesktopSystem!="undefined"){window.open(this.getProjectLink(this.option("groupId")))}else{window.top.location.href=this.getProjectLink(this.option("groupId"))}},getProjectLink:function(t){return this.option("path").SG.toString().replace("{{ID}}",t)},saveId:function(t){var e=this.option("entityRoute");if(!e){return}var i=this.option("entityId");t=parseInt(t);this.callRemote(e+".update",{id:i,data:{GROUP_ID:t}},{},function(){BX.Tasks.Util.fireGlobalTaskEvent("UPDATE",{ID:i},{STAY_AT_PAGE:true},{id:i});BX.onCustomEvent(this,"onChangeProjectLink",[t,i])})},onSelectorItemSelected:function(t){this.setItem(t.id,BX.util.htmlspecialcharsback(t.nameFormatted));this.getSelector().close();this.getSelector().deselectItem(t.id)},getSelector:function(){return this.subInstance("socnet",function(){var t=new BX.Tasks.Integration.Socialnetwork.NetworkSelector({scope:this.control("open-form"),id:this.id()+"socnet-sel",mode:"group",query:this.getQuery(),useSearch:true,useAdd:false,controlBind:this.option("controlBind"),parent:this,popupOffsetTop:5,popupOffsetLeft:40});t.bindEvent("item-selected",this.onSelectorItemSelected.bind(this));return t})}}})}).call(this);
//# sourceMappingURL=logic.map.js