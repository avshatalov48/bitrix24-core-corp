{"version":3,"file":"script.js","sources":["src/index.js"],"sourcesContent":["import {Loc, Text, Tag, Dom} from 'main.core';\n\nimport '../css/base.css';\n\ntype ChartData = {\n\tday: number,\n\tidealValue: number,\n\tremainValue: number\n}\n\nexport class BurnDownChart\n{\n\tconstructor()\n\t{\n\t\t/* eslint-disable */\n\t\tthis.sidePanelManager = BX.SidePanel.Instance;\n\t\t/* eslint-enable */\n\n\t\tthis.chart = null;\n\t}\n\n\trender(chartDiv: HTMLElement, data: ChartData)\n\t{\n\t\tsetTimeout(() => this.create(chartDiv, data), 300);\n\t}\n\n\tcreate(chartDiv: HTMLElement, data: ChartData)\n\t{\n\t\twindow.am4core.useTheme(am4themes_animated);\n\n\t\tthis.chart = window.am4core.create(chartDiv, am4charts.XYChart);\n\t\tthis.chart.data = data;\n\t\tthis.chart.paddingRight = 40;\n\n\t\tthis.createAxises();\n\n\t\tthis.createIdealLine();\n\t\tthis.createRemainLine();\n\n\t\tthis.createLegend();\n\t}\n\n\tcreateAxises()\n\t{\n\t\tconst categoryAxis = this.chart.xAxes.push(new am4charts.CategoryAxis());\n\t\tcategoryAxis.renderer.grid.template.location = 0;\n\t\tcategoryAxis.dataFields.category = 'day';\n\t\tcategoryAxis.renderer.minGridDistance = 60;\n\n\t\tconst valueAxis = this.chart.yAxes.push(new am4charts.ValueAxis());\n\t\tvalueAxis.min = -0.1;\n\t}\n\n\tcreateIdealLine()\n\t{\n\t\tconst lineSeries = this.chart.series.push(new am4charts.LineSeries());\n\t\tlineSeries.name = Loc.getMessage('TASKS_SCRUM_SPRINT_IDEAL_BURN_DOWN_CHART_LINE_LABEL');\n\t\tlineSeries.stroke = window.am4core.color('#2882b3');\n\t\tlineSeries.strokeWidth = 2;\n\n\t\tlineSeries.dataFields.categoryX = 'day';\n\t\tlineSeries.dataFields.valueY = 'idealValue';\n\n\t\tconst circleColor = '#2882b3';\n\t\tconst circleBullet = new am4charts.CircleBullet();\n\t\tcircleBullet.circle.radius = 4;\n\t\tcircleBullet.circle.fill = window.am4core.color(circleColor);\n\t\tcircleBullet.circle.stroke = window.am4core.color(circleColor);\n\n\t\tlineSeries.bullets.push(circleBullet);\n\n\t\tconst segment = lineSeries.segments.template;\n\t\tconst hoverState = segment.states.create('hover');\n\t\thoverState.properties.strokeWidth = 4;\n\t}\n\n\tcreateRemainLine()\n\t{\n\t\tconst lineSeries = this.chart.series.push(new am4charts.LineSeries());\n\t\tlineSeries.name = Loc.getMessage('TASKS_SCRUM_SPRINT_REMAIN_BURN_DOWN_CHART_LINE_LABEL');\n\t\tlineSeries.stroke = window.am4core.color('#9c1f1f');\n\t\tlineSeries.strokeWidth = 2;\n\n\t\tlineSeries.dataFields.categoryX = 'day';\n\t\tlineSeries.dataFields.valueY = 'remainValue';\n\n\t\tconst circleColor = '#9c1f1f';\n\t\tconst circleBullet = new am4charts.CircleBullet();\n\t\tcircleBullet.circle.radius = 4;\n\t\tcircleBullet.circle.fill = window.am4core.color(circleColor);\n\t\tcircleBullet.circle.stroke = window.am4core.color(circleColor);\n\n\t\tlineSeries.bullets.push(circleBullet);\n\n\t\tconst segment = lineSeries.segments.template;\n\t\tconst hoverState = segment.states.create('hover');\n\t\thoverState.properties.strokeWidth = 4;\n\t}\n\n\tcreateLegend()\n\t{\n\t\tthis.chart.legend = new am4charts.Legend();\n\t\tthis.chart.legend.itemContainers.template.clickable = false;\n\t\tthis.chart.legend.position = 'bottom';\n\t\tthis.chart.legend.itemContainers.template.events.on('over', (event) => {\n\t\t\tthis.processOver(event.target.dataItem.dataContext);\n\t\t});\n\t\tthis.chart.legend.itemContainers.template.events.on('out', () => this.processOut());\n\t}\n\n\tprocessOver(hoveredLine)\n\t{\n\t\thoveredLine.toFront();\n\t\thoveredLine.segments.each((segment) => segment.setState('hover'));\n\t};\n\n\tprocessOut()\n\t{\n\t\tthis.chart.series.each((series) => {\n\t\t\tseries.segments.each((segment) => segment.setState('default'));\n\t\t\tseries.bulletsContainer.setState('default');\n\t\t});\n\t};\n}"],"names":["BurnDownChart","sidePanelManager","BX","SidePanel","Instance","chart","chartDiv","data","setTimeout","create","window","am4core","useTheme","am4themes_animated","am4charts","XYChart","paddingRight","createAxises","createIdealLine","createRemainLine","createLegend","categoryAxis","xAxes","push","CategoryAxis","renderer","grid","template","location","dataFields","category","minGridDistance","valueAxis","yAxes","ValueAxis","min","lineSeries","series","LineSeries","name","Loc","getMessage","stroke","color","strokeWidth","categoryX","valueY","circleColor","circleBullet","CircleBullet","circle","radius","fill","bullets","segment","segments","hoverState","states","properties","legend","Legend","itemContainers","clickable","position","events","on","event","processOver","target","dataItem","dataContext","processOut","hoveredLine","toFront","each","setState","bulletsContainer"],"mappings":"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"}