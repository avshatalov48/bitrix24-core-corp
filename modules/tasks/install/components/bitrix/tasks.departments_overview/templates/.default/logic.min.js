"use strict";if(typeof BX.FilterEntitySelector==="undefined"){BX.FilterEntitySelector=function(){this._id="";this._settings={};this._fieldId="";this._control=null;this._selector=null;this._inputKeyPressHandler=BX.delegate(this.keypress,this)};BX.FilterEntitySelector.prototype={initialize:function(t,e){this._id=t;this._settings=e?e:{};this._fieldId=this.getSetting("fieldId","");BX.addCustomEvent(window,"BX.Main.Filter:customEntityFocus",BX.delegate(this.onCustomEntitySelectorOpen,this));BX.addCustomEvent(window,"BX.Main.Filter:customEntityBlur",BX.delegate(this.onCustomEntitySelectorClose,this))},getId:function(){return this._id},getSetting:function(t,e){return this._settings.hasOwnProperty(t)?this._settings[t]:e},keypress:function(t){},open:function(t,e){this._selector=new BX.Tasks.Integration.Socialnetwork.NetworkSelector({scope:t,id:this.getId()+"-selector",mode:this.getSetting("mode"),query:false,useSearch:true,useAdd:false,parent:this,popupOffsetTop:5,popupOffsetLeft:40});this._selector.bindEvent("item-selected",BX.delegate((function(t){this._control.setData(BX.util.htmlspecialcharsback(t.nameFormatted),t.id);if(!this.getSetting("multi")){this._selector.close()}}),this));this._selector.open()},close:function(){if(this._selector){this._selector.close()}},onCustomEntitySelectorOpen:function(t){this._control=t;if(this._fieldId!==t.getId()){this._selector=null;this.close()}else{this._selector=t;this.open(t.field)}},onCustomEntitySelectorClose:function(t){if(this._fieldId!==t.getId()){this.close()}}};BX.FilterEntitySelector.closeAll=function(){for(var t in this.items){if(this.items.hasOwnProperty(t)){this.items[t].close()}}};BX.FilterEntitySelector.items={};BX.FilterEntitySelector.create=function(t,e){var i=new BX.FilterEntitySelector(t,e);i.initialize(t,e);this.items[i.getId()]=i;return i}}(function(){BX.namespace("Tasks.Component");if(typeof BX.Tasks.Component.TasksDepartmentsOverview!="undefined"){return}BX.Tasks.Component.TasksDepartmentsOverview=BX.Tasks.Component.extend({sys:{code:"departments-overview"},methods:{construct:function(){this.callConstruct(BX.Tasks.Component)},bindEvents:function(){BX.addCustomEvent("BX.Main.Filter:apply",this.onFilterApply.bind(this));BX.addCustomEvent("SidePanel.Slider:onClose",this.onSliderClose.bind(this));var t=this.option("filterId");var e=this.scope();BX.bindDelegate(e,"click",{tagName:"a",className:"js-id-department"},BX.delegate((function(e){BX.PreventDefault(e);var i=BX.Main.filterManager.getById(t);if(!!i&&i instanceof BX.Main.Filter){var s=i.getApi();s.setFields({UF_DEPARTMENT:{0:this.dataset.id}});s.apply()}})))},onFilterApply:function(){if(this.option("taskLimitExceeded")){BX.UI.InfoHelper.show("limit_tasks_supervisor_view",{isLimit:true,limitAnalyticsLabels:{module:"tasks",source:"filter"}})}},onSliderClose:function(t){if(t.getSlider().getUrl()==="ui:info_helper"){window.location.href=this.option("pathToTasks")}}}})}).call(this);
//# sourceMappingURL=logic.map.js