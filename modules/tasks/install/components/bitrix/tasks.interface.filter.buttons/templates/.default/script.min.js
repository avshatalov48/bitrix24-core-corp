"use strict";BX.namespace("BX.Tasks");BX.Tasks.InterfaceFilterButtons=function(t){this.section=t.section;this.entityId=t.entityId;this.muted=t.muted;this.checklistShowCompleted=t.checklistShowCompleted;this.initButtons();this.bindControls()};BX.Tasks.InterfaceFilterButtons.prototype={constructor:BX.Tasks.InterfaceFilterButtons,initButtons:function(){this.muteButton=this.getMuteButton();this.optionsMenuButton=this.getOptionsMenuButton()},getMuteButton:function(){var t="";switch(this.section){case"VIEW_TASK":t="taskViewMute";break;default:break}return BX(t)},getOptionsMenuButton:function(){var t="";switch(this.section){case"EDIT_TASK":t="taskEditPopupMenuOptions";break;case"VIEW_TASK":t="taskViewPopupMenuOptions";break;default:break}return BX(t)},bindControls:function(){var t=[{control:this.muteButton,action:"click",method:this.onMuteButtonClick.bind(this)},{control:this.optionsMenuButton,action:"click",method:this.onOptionsMenuButtonClick.bind(this)}];t.forEach(function(t){if(t.control){BX.bind(t.control,t.action,t.method)}})},onMuteButtonClick:function(){if(this.muteInProgress){return}this.muteInProgress=true;var t="tasks.task."+(this.muted?"unmute":"mute");var e={data:{taskId:this.entityId}};BX.ajax.runAction(t,e).then(function(){var t=this.muted?"ui-btn-icon-unfollow":"ui-btn-icon-follow";var e=this.muted?"ui-btn-icon-follow":"ui-btn-icon-unfollow";var n=this.muted?BX.message("MUTE_BUTTON_HINT_MUTE"):BX.message("MUTE_BUTTON_HINT_UNMUTE");BX.removeClass(this.muteButton,t);BX.addClass(this.muteButton,e);this.muteButton.setAttribute("data-hint",n);this.muteButton.removeAttribute("data-hint-init");BX.UI.Hint.init();BX.UI.Hint.hide();BX.UI.Hint.show(this.muteButton,n);this.muted=!this.muted;this.muteInProgress=false}.bind(this))},onOptionsMenuButtonClick:function(){var t=[{delimiter:true,text:BX.message("POPUP_MENU_CHECKLIST_SECTION")}];t.push({tabId:"showCompleted",text:BX.message("POPUP_MENU_SHOW_COMPLETED"),className:this.checklistShowCompleted?"menu-popup-item-accept":"menu-popup-item",onclick:function(t,e){e.getMenuWindow().close();if(typeof BX.Tasks.CheckListInstance!=="undefined"){BX.toggleClass(e.layout.item,"menu-popup-item-accept");var n=BX.Tasks.CheckListInstance.getTreeStructure();var i=n.optionManager;i.setShowCompleted(!i.getShowCompleted());n.handleTaskOptions()}}});t.push({tabId:"showOnlyMine",text:BX.message("POPUP_MENU_SHOW_ONLY_MINE"),className:"menu-popup-item",onclick:function(t,e){e.getMenuWindow().close();if(typeof BX.Tasks.CheckListInstance!=="undefined"){BX.toggleClass(e.layout.item,"menu-popup-item-accept");var n=BX.Tasks.CheckListInstance.getTreeStructure();var i=n.optionManager;i.setShowOnlyMine(!i.getShowOnlyMine());n.handleTaskOptions()}}});var e=BX.PopupMenu.create("taskPopupMenuOptions",this.optionsMenuButton,t,{closeByEsc:true,offsetLeft:this.optionsMenuButton.getBoundingClientRect().width/2,angle:true});e.popupWindow.show()}};
//# sourceMappingURL=script.map.js