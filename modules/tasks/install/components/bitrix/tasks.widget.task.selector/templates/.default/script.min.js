this.BX=this.BX||{};(function(e,t,a){"use strict";function i(e,t){s(e,t);t.add(e)}function l(e,t,a){s(e,t);t.set(e,a)}function s(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function r(e,t,a){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return a}var n=new WeakMap;var b=new WeakMap;var u=new WeakMap;var c=new WeakMap;var d=new WeakMap;var o=new WeakSet;var v=new WeakSet;var p=new WeakSet;var h=new WeakSet;var H=function(e){babelHelpers.inherits(a,e);function a(e){var t;babelHelpers.classCallCheck(this,a);t=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(a).call(this,e));i(babelHelpers.assertThisInitialized(t),h);i(babelHelpers.assertThisInitialized(t),p);i(babelHelpers.assertThisInitialized(t),v);i(babelHelpers.assertThisInitialized(t),o);l(babelHelpers.assertThisInitialized(t),n,{writable:true,value:null});l(babelHelpers.assertThisInitialized(t),b,{writable:true,value:null});l(babelHelpers.assertThisInitialized(t),u,{writable:true,value:null});l(babelHelpers.assertThisInitialized(t),c,{writable:true,value:null});l(babelHelpers.assertThisInitialized(t),d,{writable:true,value:205});t.setEventNamespace("BX.Tasks.TaskSelector");babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(t),n,e.multiple);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(t),b,JSON.parse(e.currentTasks));babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(t),u,e.userId);return t}babelHelpers.createClass(a,[{key:"getSelector",value:function e(){var a=this;if(!babelHelpers.classPrivateFieldGet(this,c)){if(!Array.isArray(babelHelpers.classPrivateFieldGet(this,b))){babelHelpers.classPrivateFieldSet(this,b,[])}babelHelpers.classPrivateFieldSet(this,c,new t.TagSelector({textBoxWidth:babelHelpers.classPrivateFieldGet(this,d),multiple:babelHelpers.classPrivateFieldGet(this,n),items:r(this,v,g).call(this),dialogOptions:{showAvatars:false,enableSearch:true,context:"TASKS",entities:[{id:"task-with-id",itemOptions:{default:{link:r(this,o,f).call(this,"#id#")}}}]},events:{onTagAdd:function e(t){return r(a,p,w).call(a,t)},onTagRemove:function e(t){return r(a,h,k).call(a,t)}}}))}return babelHelpers.classPrivateFieldGet(this,c)}}]);return a}(a.EventEmitter);function f(e){return"/company/personal/user/"+babelHelpers.classPrivateFieldGet(this,u)+"/tasks/task/view/"+e+"/"}function g(){var e=this;var t=[];babelHelpers.classPrivateFieldGet(this,b).forEach((function(a){t.push({id:a.ID,entityId:"task-with-id",title:a.TITLE+"["+a.ID+"]",link:r(e,o,f).call(e,a.ID)})}));return t}function w(e){var t={selector:e.getTarget(),tag:e.getData()};this.emit("tagAdded",t)}function k(e){var t={selector:e.getTarget(),tag:e.getData()};this.emit("tagRemoved",t)}function T(e,t){I(e,t);t.add(e)}function m(e,t,a){I(e,t);t.set(e,a)}function I(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function P(e,t,a){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return a}var S=new WeakMap;var F=new WeakMap;var y=new WeakMap;var E=new WeakMap;var W=new WeakSet;var z=new WeakSet;var G=function(){function e(t){babelHelpers.classCallCheck(this,e);T(this,z);T(this,W);m(this,S,{writable:true,value:null});m(this,F,{writable:true,value:null});m(this,y,{writable:true,value:null});m(this,E,{writable:true,value:null});babelHelpers.classPrivateFieldSet(this,S,t.inputNodeId);babelHelpers.classPrivateFieldSet(this,F,t.scopeContainerId);babelHelpers.classPrivateFieldSet(this,y,t.inputPrefix);babelHelpers.classPrivateFieldSet(this,E,t.blockName)}babelHelpers.createClass(e,[{key:"onTagAdd",value:function e(t){var a=t.getData().selector;var i=t.getData().tag.tag;if(a.isMultiple()){P(this,W,B).call(this,i)}else{P(this,z,M).call(this,i)}}},{key:"onTagRemove",value:function e(t){var a=t.getData().selector;var i=t.getData().tag.tag;if(a.isMultiple()){var l=document.getElementById(babelHelpers.classPrivateFieldGet(this,S)+"-"+i.getId());l.setAttribute("value","")}else{var s=document.getElementById(babelHelpers.classPrivateFieldGet(this,S));s.setAttribute("value","")}}}]);return e}();function B(e){var t=document.getElementById(babelHelpers.classPrivateFieldGet(this,F));var a=document.createElement("input");a.type="hidden";a.name=babelHelpers.classPrivateFieldGet(this,y)+"["+babelHelpers.classPrivateFieldGet(this,E)+"]"+"["+e.getId()+"][ID]";a.id=babelHelpers.classPrivateFieldGet(this,S)+"-"+e.getId();a.value=e.getId();a.setAttribute("data-bx-id","task-edit-parent-input");t.appendChild(a)}function M(e){var t=document.getElementById(babelHelpers.classPrivateFieldGet(this,S));t.setAttribute("value",e.getId())}e.TaskSelector=H;e.TagDomManager=G})(this.BX.Tasks=this.BX.Tasks||{},BX.UI.EntitySelector,BX.Event);
//# sourceMappingURL=script.map.js