{"version":3,"sources":["src/legacy.js","src/preset.js"],"names":["Preset","options","filterId","setTimeout","guide","showNextStep","DELAY","BX","Main","filterManager","getById","Guide","simpleMode","onEvents","steps","target","getPopupBindElement","title","Loc","getMessage","text","position","condition","top","bottom","color","getPopup","setWidth","ajax","runComponentAction","mode","data","error","console","log"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;ACrZA,CACsC;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;AAMtC,KAAaA,MAAM;GAOlB,gBAAYC,OAAgB,EAC5B;KAAA;KAAA;KAAA;KAAA;KAAA;KAAA;KAAA;OAAA;OAAA;;KAAA;OAAA;OAAA;;KACC,sCAAI,aAAaA,OAAO,CAACC,QAAQ;KACjC,2BAAI,sBAAJ,IAAI;;GACJ;KAAA;KAAA,+BAGD;OAAA;OACCC,UAAU,CAAC,YAAM;SAChB,KAAI,CAACC,KAAK,CAACC,YAAY,EAAE;SACzB,4BAAI,kCAAJ,KAAI;QACJ,EAAEL,MAAM,CAACM,KAAK,CAAC;;;GAChB;CAAA;CAuDD,kBApDA;GAAA;GACC,0EAAI,gCAAJ,IAAI;CAGL;CAAC,uBAGD;GACC,sCAAI,WAAWC,EAAE,CAACC,IAAI,CAACC,aAAa,CAACC,OAAO,mCAAC,IAAI,aAAW;GAC5D,OAAO,IAAI;CACZ;CAAC,sBAGD;GACC,IAAI,CAACN,KAAK,GAAG,IAAIO,aAAK,CAAC;KACtBC,UAAU,EAAE,IAAI;KAChBC,QAAQ,EAAE,IAAI;KACdC,KAAK,EAAE,CACN;OACCC,MAAM,EAAE,sCAAI,WAASC,mBAAmB,EAAE;OAC1CC,KAAK,EAAEC,aAAG,CAACC,UAAU,CAAC,4CAA4C,CAAC;OACnEC,IAAI,EAAEF,aAAG,CAACC,UAAU,CAAC,2CAA2C,CAAC;OACjEE,QAAQ,EAAE,QAAQ;OAClBC,SAAS,EAAE;SACVC,GAAG,EAAE,IAAI;SACTC,MAAM,EAAE,KAAK;SACbC,KAAK,EAAE;;MAER;IAEF,CAAC;GAEF,IAAI,CAACrB,KAAK,CAACsB,QAAQ,EAAE,CAACC,QAAQ,CAAC,GAAG,CAAC;GAEnC,OAAO,IAAI;CACZ;CAAC,wBAGD;GAAA;GACCC,cAAI,CAACC,kBAAkB,CAAC,+BAA+B,EAAE,2BAA2B,EAAE;KACpFC,IAAI,EAAE,OAAO;KACbC,IAAI,EAAE;IACN,CAAC,SACI,CAAC,UAAAC,KAAK,EAAI;KACf,6BAAI,oBAAJ,MAAI,EAAMA,KAAK;IACf,CAAC;CACJ;CAAC,eAEIA,KAAY,EACjB;GACCC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;CACnB;CAAC,4BAzEWhC,MAAM,WAEH,IAAI","file":"script.js.map","sourcesContent":[null,"import { Guide } from 'ui.tour';\nimport { ajax, Loc } from 'main.core';\n\ntype Options = {\n\tfilterId: number,\n};\n\nexport class Preset\n{\n\tstatic DELAY = 1000;\n\n\t#filterId: number;\n\t#filter: BX.Main.Filter;\n\n\tconstructor(options: Options)\n\t{\n\t\tthis.#filterId = options.filterId;\n\t\tthis.#init();\n\t}\n\n\tpayAttention(): void\n\t{\n\t\tsetTimeout(() => {\n\t\t\tthis.guide.showNextStep();\n\t\t\tthis.#markViewed();\n\t\t}, Preset.DELAY);\n\t}\n\n\t#init(): void\n\t{\n\t\tthis\n\t\t\t.#setFilter()\n\t\t\t.#setGuide();\n\t}\n\n\t#setFilter(): Preset\n\t{\n\t\tthis.#filter = BX.Main.filterManager.getById(this.#filterId);\n\t\treturn this;\n\t}\n\n\t#setGuide(): Preset\n\t{\n\t\tthis.guide = new Guide({\n\t\t\tsimpleMode: true,\n\t\t\tonEvents: true,\n\t\t\tsteps: [\n\t\t\t\t{\n\t\t\t\t\ttarget: this.#filter.getPopupBindElement(),\n\t\t\t\t\ttitle: Loc.getMessage('TASKS_INTERFACE_FILTER_PRESETS_MOVED_TITLE'),\n\t\t\t\t\ttext: Loc.getMessage('TASKS_INTERFACE_FILTER_PRESETS_MOVED_TEXT'),\n\t\t\t\t\tposition: 'bottom',\n\t\t\t\t\tcondition: {\n\t\t\t\t\t\ttop: true,\n\t\t\t\t\t\tbottom: false,\n\t\t\t\t\t\tcolor: 'primary',\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t],\n\t\t});\n\n\t\tthis.guide.getPopup().setWidth(420);\n\n\t\treturn this;\n\t}\n\n\t#markViewed(): void\n\t{\n\t\tajax.runComponentAction('bitrix:tasks.interface.filter', 'markPresetAhaMomentViewed', {\n\t\t\t\tmode: 'class',\n\t\t\t\tdata: {},\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\tthis.#log(error);\n\t\t\t});\n\t}\n\n\t#log(error: Error): void\n\t{\n\t\tconsole.log(error);\n\t}\n}\n"]}