{"version":3,"file":"task-calendar.min.js","sources":["task-calendar.js"],"names":["BX","namespace","Tasks","Calendar","settings","this","weekends",6,"holidays","worktime","start","hours","minutes","end","setWeekends","weekEnds","setHolidays","setWorkTime","adaptSettings","cwt","cOpts","type","isPlainObject","wh","HOURS","we","WEEKEND","dayMap","MO","TU","WE","TH","FR","SA","SU","pad","num","toString","length","START","H","M","END","each","day","push","weekStart","WEEK_START","k","HOLIDAYS","month","parseInt","D","prototype","getClosestWorkTime","date","isForward","startDate","endDate","processEachDay","Date","getTime","calculateDuration","duration","calculateStartDate","newDate","interval","calculateEndDate","callback","currentDate","endless","intervals","getWorkHours","i","intervalStart","intervalEnd","availableStart","availableEnd","call","add","floorDate","Unit","Day","isWeekend","isHoliday","getWorkIntervals","year","getUTCFullYear","getUTCMonth","getUTCDate","time","UTC","getWorkDayDuration","isWorkTime","getUTCDay","isArray","j","holiday","validMonth","isNumber","validDay","isNotEmptyString","times","regex","matches","exec","startHours","startMinutes","endHours","endMinutes","isWorkTimeCorrect","sort","a","b","prevTime"],"mappings":"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"}