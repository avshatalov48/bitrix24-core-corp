(function(){"use strict";BX.namespace("BX.Tasks.Kanban");BX.Tasks.Kanban.Actions={notifySimpleAction:function(e,t){e="TASKS_KANBAN_PANEL_"+e;if(typeof BX.message[e]!=="undefined"){var i=BX.message[e];if(BX.type.isPlainObject(t)){for(var n in t){i=i.replace("#"+n+"#",t[n])}}BX.UI.Notification.Center.notify({content:i})}},simpleAction:function(e,t,i){const n=t.action;t.groupAction="Y";t.taskId=this.getMapKeys(e.getSelectedItems());e.ajax(n,t).then((n=>{const o=n.data;const a=n.errors.pop();if(o&&!a){if(!i){e.onApplyFilter()}e.stopActionPanel();this.notifySimpleAction(t.action.toUpperCase(),t)}else if(a){BX.Kanban.Utils.showErrorDialog(a.message,true)}}),(e=>{BX.Kanban.Utils.showErrorDialog("Error: "+e.errors[0].message,true)}))},getMapKeys:function(e){var t=[];e.forEach((function(e,i){t.push(i)}));return t},deadline:function(e,t){BX.calendar({node:t,bTime:true,bCompatibility:false,callback:function(t){var i=BX.date.convertBitrixFormat(BX.message("FORMAT_DATETIME"));this.simpleAction(e,{action:"deadlineTask",deadline:BX.date.format(i,t)})}.bind(this)})},member:function(e,t,i,n){if(typeof n==="undefined"){n="user"}var o=new BX.Tasks.Integration.Socialnetwork.NetworkSelector({scope:t,id:i,mode:n,query:false,useSearch:true,useAdd:false,parent:this,popupOffsetTop:5,popupOffsetLeft:40});o.bindEvent("item-selected",function(t){var a={action:i};if(n==="group"){a["groupId"]=t["id"]}else if(n==="user"){a["userId"]=t["id"]}a["entityName"]=t["nameFormatted"];this.simpleAction(e,a);o.close()}.bind(this));o.open()}}})();
//# sourceMappingURL=actions.map.js