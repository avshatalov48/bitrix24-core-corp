this.BX=this.BX||{};this.BX.Tasks=this.BX.Tasks||{};(function(t){"use strict";var e=function(){babelHelpers.createClass(t,null,[{key:"statusList",get:function t(){return{pending:2,inProgress:3,waitCtrl:4,completed:5,deferred:6}}},{key:"counterColors",get:function t(){return{green:"#9DCF00",red:"#FF5752",gray:"#AFB3B8"}}}]);function t(e){babelHelpers.classCallCheck(this,t);this.id="tmp-id-".concat((new Date).getTime());this.userId=e;this.deadline=null;this.changedDate=null;this.status=t.statusList.pending;this.subStatus=t.statusList.pending;this.isMuted=false;this.isPinned=false;this.notViewed=false;this.messageCount=0;this.commentsCount=0;this.newCommentsCount=0;this.accomplices=[];this.auditors=[];this.params={};this.params.allowChangeDeadline=true;this.rawAccess={};this.counter=null}babelHelpers.createClass(t,[{key:"setData",value:function t(e){this.id=e.id;this.title=e.title;this.groupId=e.groupId;this.status=e.realStatus;this.subStatus=e.status||this.status;this.createdBy=e.createdBy;this.responsibleId=e.responsibleId;this.accomplices=e.accomplices||[];this.auditors=e.auditors||[];this.commentsCount=e.commentsCount;this.newCommentsCount=e.newCommentsCount;this.isMuted=e.isMuted==="Y";this.isPinned=e.isPinned==="Y";this.notViewed=e.notViewed==="Y";this.rawAccess=e.action;var s=Date.parse(e.deadline);var i=Date.parse(e.changedDate);this.deadline=s>0?s:null;this.changedDate=i>0?i:null}},{key:"isCreator",value:function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;return Number(e||this.userId)===Number(this.createdBy)}},{key:"isResponsible",value:function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;return Number(e||this.userId)===Number(this.responsibleId)}},{key:"isAccomplice",value:function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;return this.accomplices.includes(Number(e||this.userId))}},{key:"isAuditor",value:function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;return this.auditors.includes(Number(e||this.userId))}},{key:"isMember",value:function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;return this.isCreator(e)||this.isResponsible(e)||this.isAccomplice(e)||this.isAuditor(e)}},{key:"isDoer",value:function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;return this.isResponsible(e)||this.isAccomplice(e)}},{key:"isPureDoer",value:function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;return this.isDoer(e)&&!this.isCreator(e)}},{key:"getCounterData",value:function t(){var e=BX.UI.Counter.Color;var s=this.newCommentsCount||0;var i=e.SUCCESS;if(this.isExpired&&!this.isCompletedCounts&&!this.isWaitCtrlCounts&&!this.isDeferred){s+=1;i=e.DANGER}if(this.isMuted){i=e.GRAY}return{value:s,color:i}}},{key:"checkCounterInstance",value:function t(){return this.counter!==null}},{key:"getCounterInstance",value:function t(){if(!this.checkCounterInstance()){this.counter=new BX.UI.Counter({animate:true});this.updateCounterInstance()}return this.counter}},{key:"updateCounterInstance",value:function t(){var e=this.getCounterData();if(e.value!==this.counter.getValue()){this.counter.update(e.value)}this.counter.setColor(e.color)}},{key:"removeCounterInstance",value:function t(){this.counter=null}},{key:"isWaitCtrl",get:function e(){return this.status===t.statusList.waitCtrl}},{key:"isWaitCtrlCounts",get:function t(){return this.isWaitCtrl&&this.isCreator()&&!this.isResponsible()}},{key:"isCompleted",get:function e(){return this.status===t.statusList.completed}},{key:"isCompletedCounts",get:function t(){return this.isCompleted||this.isWaitCtrl&&!this.isCreator()}},{key:"isDeferred",get:function e(){return this.status===t.statusList.deferred}},{key:"isExpired",get:function t(){var e=new Date;return this.deadline&&this.deadline<=e.getTime()}},{key:"isExpiredCounts",get:function t(){return this.isExpired&&this.isPureDoer()&&!this.isCompletedCounts}}]);return t}();t.Item=e})(this.BX.Tasks.List=this.BX.Tasks.List||{});
//# sourceMappingURL=item.bundle.map.js