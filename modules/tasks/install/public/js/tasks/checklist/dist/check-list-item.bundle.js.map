{"version":3,"file":"check-list-item.bundle.js","sources":["../src/tree-item.js","../src/composite-tree-item.js","../src/check-list-item-fields.js","../src/check-list-item.js"],"sourcesContent":["class TreeItem\n{\n\tstatic generateUniqueNodeId()\n\t{\n\t\treturn Math.random().toString(36).substr(2, 9);\n\t}\n\n\tconstructor()\n\t{\n\t\tthis.setNodeId(TreeItem.generateUniqueNodeId());\n\t\tthis.setParent(null);\n\t}\n\n\tgetRootNode()\n\t{\n\t\tlet parent = this;\n\n\t\twhile (parent.getParent() !== null)\n\t\t{\n\t\t\tparent = parent.getParent();\n\t\t}\n\n\t\treturn parent;\n\t}\n\n\tgetNodeId()\n\t{\n\t\treturn this.nodeId;\n\t}\n\n\tsetNodeId(nodeId)\n\t{\n\t\tthis.nodeId = nodeId;\n\t}\n\n\tgetParent()\n\t{\n\t\treturn this.parent;\n\t}\n\n\tsetParent(parent)\n\t{\n\t\tthis.parent = parent;\n\t}\n}\n\nexport {TreeItem};","import {TreeItem} from './tree-item';\n\nclass CompositeTreeItem extends TreeItem\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis.descendants = [];\n\t}\n\n\tadd(item, position = null)\n\t{\n\t\titem.setParent(this);\n\n\t\tif (position === null)\n\t\t{\n\t\t\tthis.descendants.push(item);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.descendants.splice(position, 0, item);\n\t\t}\n\t}\n\n\taddAfter(item, after)\n\t{\n\t\tconst index = this.descendants.findIndex(descendant => descendant === after);\n\t\tif (index !== -1)\n\t\t{\n\t\t\tthis.add(item, index + 1);\n\t\t}\n\t}\n\n\taddBefore(item, before)\n\t{\n\t\tconst index = this.descendants.findIndex(descendant => descendant === before);\n\t\tif (index !== -1)\n\t\t{\n\t\t\tthis.add(item, index);\n\t\t}\n\t}\n\n\tremove(item)\n\t{\n\t\tconst index = this.descendants.findIndex(descendant => descendant === item);\n\t\tif (index !== -1)\n\t\t{\n\t\t\tthis.descendants.splice(index, 1);\n\t\t}\n\t}\n\n\tgetDescendants()\n\t{\n\t\treturn this.descendants;\n\t}\n\n\tgetDescendantsCount()\n\t{\n\t\treturn this.descendants.length;\n\t}\n\n\tgetFirstDescendant()\n\t{\n\t\tif (this.descendants.length > 0)\n\t\t{\n\t\t\treturn this.descendants[0];\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tgetLastDescendant()\n\t{\n\t\tif (this.descendants.length > 0)\n\t\t{\n\t\t\treturn this.descendants[this.descendants.length - 1];\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tisFirstDescendant()\n\t{\n\t\treturn (this === this.getParent().getFirstDescendant());\n\t}\n\n\tisLastDescendant()\n\t{\n\t\treturn (this === this.getParent().getLastDescendant());\n\t}\n\n\tgetLeftSibling()\n\t{\n\t\tif (this.isFirstDescendant())\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tconst parentDescendants = this.getParent().getDescendants();\n\t\tconst index = parentDescendants.findIndex(descendant => descendant === this);\n\n\t\tif (index !== -1)\n\t\t{\n\t\t\treturn parentDescendants[index - 1];\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tgetRightSibling()\n\t{\n\t\tif (this.isLastDescendant())\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tconst parentDescendants = this.getParent().getDescendants();\n\t\tconst index = parentDescendants.findIndex(descendant => descendant === this);\n\n\t\tif (index !== -1)\n\t\t{\n\t\t\treturn parentDescendants[index + 1];\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tgetLeftSiblingThrough()\n\t{\n\t\tif (this === this.getRootNode())\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tif (this.isFirstDescendant())\n\t\t{\n\t\t\treturn this.getParent();\n\t\t}\n\n\t\tlet leftSiblingThrough = this.getLeftSibling();\n\t\twhile (leftSiblingThrough && leftSiblingThrough.getDescendantsCount() > 0)\n\t\t{\n\t\t\tleftSiblingThrough = leftSiblingThrough.getLastDescendant();\n\t\t}\n\n\t\treturn leftSiblingThrough;\n\t}\n\n\tgetRightSiblingThrough()\n\t{\n\t\tif (this.getDescendantsCount() > 0)\n\t\t{\n\t\t\treturn this.getFirstDescendant();\n\t\t}\n\n\t\tif (!this.isLastDescendant())\n\t\t{\n\t\t\treturn this.getRightSibling();\n\t\t}\n\n\t\tlet parent = this;\n\t\twhile (parent.getParent() !== null && parent.isLastDescendant())\n\t\t{\n\t\t\tparent = parent.getParent();\n\t\t}\n\n\t\tif (parent !== this.getRootNode())\n\t\t{\n\t\t\treturn parent.getRightSibling();\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tfindChild(nodeId)\n\t{\n\t\tif (!nodeId)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tif (this.getNodeId().toString() === nodeId.toString())\n\t\t{\n\t\t\treturn this;\n\t\t}\n\n\t\tlet found = null;\n\t\tthis.descendants.forEach((descendant) => {\n\t\t\tif (found === null)\n\t\t\t{\n\t\t\t\tfound = descendant.findChild(nodeId);\n\t\t\t}\n\t\t});\n\n\t\treturn found;\n\t}\n\n\tcountTreeSize()\n\t{\n\t\tlet size = this.getDescendantsCount();\n\n\t\tthis.descendants.forEach((descendant) => {\n\t\t\tsize += descendant.countTreeSize();\n\t\t});\n\n\t\treturn size;\n\t}\n\n\tgetTreeSize()\n\t{\n\t\treturn this.getRootNode().countTreeSize() + 1;\n\t}\n}\n\nexport {CompositeTreeItem};","import {Text, Type} from 'main.core';\n\nclass CheckListItemFields\n{\n\tstatic snakeToCamelCase(string)\n\t{\n\t\tlet camelCaseString = string;\n\n\t\tif (Type.isString(camelCaseString))\n\t\t{\n\t\t\tcamelCaseString = camelCaseString.toLowerCase();\n\t\t\tcamelCaseString = camelCaseString.replace(/[-_\\s]+(.)?/g, (match, chr) => (chr ? chr.toUpperCase() : ''));\n\n\t\t\treturn camelCaseString.substr(0, 1).toLowerCase() + camelCaseString.substr(1);\n\t\t}\n\n\t\treturn camelCaseString;\n\t}\n\n\tstatic camelToSnakeCase(string)\n\t{\n\t\tlet snakeCaseString = string;\n\n\t\tif (Type.isString(snakeCaseString))\n\t\t{\n\t\t\tsnakeCaseString = snakeCaseString.replace(/(.)([A-Z])/g, '$1_$2').toUpperCase();\n\t\t}\n\n\t\treturn snakeCaseString;\n\t}\n\n\tconstructor(fields)\n\t{\n\t\tthis.fields = [\n\t\t\t'id',\n\t\t\t'copiedId',\n\t\t\t'parentId',\n\t\t\t'title',\n\t\t\t'sortIndex',\n\t\t\t'displayTitle',\n\t\t\t'displaySortIndex',\n\t\t\t'isComplete',\n\t\t\t'isImportant',\n\t\t\t'isSelected',\n\t\t\t'isCollapse',\n\t\t\t'completedCount',\n\t\t\t'totalCount',\n\t\t\t'members',\n\t\t\t'attachments',\n\t\t];\n\n\t\tthis.id = null;\n\t\tthis.parentId = null;\n\t\tthis.title = '';\n\t\tthis.sortIndex = 0;\n\t\tthis.displayTitle = '';\n\t\tthis.displaySortIndex = '';\n\t\tthis.isComplete = false;\n\t\tthis.isImportant = false;\n\t\tthis.isSelected = false;\n\t\tthis.isCollapse = false;\n\t\tthis.completedCount = 0;\n\t\tthis.totalCount = 0;\n\t\tthis.members = new Map();\n\t\tthis.attachments = {};\n\n\t\tthis.setFields(fields);\n\t}\n\n\tsetFields(fields)\n\t{\n\t\tObject.keys(fields).forEach((name) => {\n\t\t\tconst camelCaseName = CheckListItemFields.snakeToCamelCase(name);\n\n\t\t\tif (this.fields.indexOf(name) !== -1)\n\t\t\t{\n\t\t\t\tconst snakeCaseName = CheckListItemFields.camelToSnakeCase(name);\n\t\t\t\tconst setMethod = this[CheckListItemFields.snakeToCamelCase(`SET_${snakeCaseName}`)].bind(this);\n\t\t\t\tsetMethod(fields[name]);\n\t\t\t}\n\t\t\telse if (this.fields.indexOf(camelCaseName) !== -1)\n\t\t\t{\n\t\t\t\tconst setMethod = this[CheckListItemFields.snakeToCamelCase(`SET_${name}`)].bind(this);\n\t\t\t\tsetMethod(fields[name]);\n\t\t\t}\n\t\t});\n\t}\n\n\tgetId()\n\t{\n\t\treturn this.id;\n\t}\n\n\tsetId(id)\n\t{\n\t\tthis.id = id;\n\t}\n\n\tgetCopiedId()\n\t{\n\t\treturn this.copiedId;\n\t}\n\n\tsetCopiedId(copiedId)\n\t{\n\t\tthis.copiedId = copiedId;\n\t}\n\n\tgetParentId()\n\t{\n\t\treturn this.parentId;\n\t}\n\n\tsetParentId(parentId)\n\t{\n\t\tthis.parentId = parentId;\n\t}\n\n\tgetTitle()\n\t{\n\t\treturn this.title;\n\t}\n\n\tsetTitle(title)\n\t{\n\t\tthis.title = title;\n\t}\n\n\tgetSortIndex()\n\t{\n\t\treturn this.sortIndex;\n\t}\n\n\tsetSortIndex(sortIndex)\n\t{\n\t\tthis.sortIndex = sortIndex;\n\t}\n\n\tgetDisplayTitle()\n\t{\n\t\treturn this.displayTitle;\n\t}\n\n\tsetDisplayTitle(displayTitle)\n\t{\n\t\tthis.displayTitle = displayTitle;\n\t}\n\n\tgetDisplaySortIndex()\n\t{\n\t\treturn this.displaySortIndex;\n\t}\n\n\tsetDisplaySortIndex(displaySortIndex)\n\t{\n\t\tthis.displaySortIndex = displaySortIndex;\n\t}\n\n\tgetIsComplete()\n\t{\n\t\treturn this.isComplete;\n\t}\n\n\tsetIsComplete(isComplete)\n\t{\n\t\tthis.isComplete = isComplete;\n\t}\n\n\tgetIsImportant()\n\t{\n\t\treturn this.isImportant;\n\t}\n\n\tsetIsImportant(isImportant)\n\t{\n\t\tthis.isImportant = isImportant;\n\t}\n\n\tgetIsSelected()\n\t{\n\t\treturn this.isSelected;\n\t}\n\n\tsetIsSelected(isSelected)\n\t{\n\t\tthis.isSelected = isSelected;\n\t}\n\n\tgetIsCollapse()\n\t{\n\t\treturn this.isCollapse;\n\t}\n\n\tsetIsCollapse(isCollapse)\n\t{\n\t\tthis.isCollapse = isCollapse;\n\t}\n\n\tgetCompletedCount()\n\t{\n\t\treturn this.completedCount;\n\t}\n\n\tsetCompletedCount(completedCount)\n\t{\n\t\tthis.completedCount = completedCount;\n\t}\n\n\tgetTotalCount()\n\t{\n\t\treturn this.totalCount;\n\t}\n\n\tsetTotalCount(totalCount)\n\t{\n\t\tthis.totalCount = totalCount;\n\t}\n\n\tgetMembers()\n\t{\n\t\treturn this.members;\n\t}\n\n\tsetMembers(members)\n\t{\n\t\tconst types = {\n\t\t\tA: 'accomplice',\n\t\t\tU: 'auditor',\n\t\t};\n\n\t\tthis.members.clear();\n\n\t\tObject.keys(members).forEach((id) => {\n\t\t\tconst {NAME, TYPE} = members[id];\n\t\t\tthis.members.set(id, {id, nameFormatted: Text.encode(NAME), type: types[TYPE]});\n\t\t});\n\t}\n\n\taddMember(member)\n\t{\n\t\tthis.members.set(member.id, member);\n\t}\n\n\tremoveMember(id)\n\t{\n\t\tthis.members.delete(id);\n\t}\n\n\tgetAttachments()\n\t{\n\t\treturn this.attachments;\n\t}\n\n\tsetAttachments(attachments)\n\t{\n\t\tthis.attachments = attachments;\n\t}\n\n\taddAttachments(attachments)\n\t{\n\t\tObject.keys(attachments).forEach((id) => {\n\t\t\tthis.attachments[id] = attachments[id];\n\t\t});\n\t}\n\n\tremoveAttachment(id)\n\t{\n\t\tdelete this.attachments[id];\n\t}\n}\n\nexport {CheckListItemFields};","import './css/check-list-item.css';\n\nimport {Dom, Loc, Tag, Text} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\n\nimport {CompositeTreeItem} from './composite-tree-item';\nimport {CheckListItemFields} from './check-list-item-fields';\n\nclass CheckListItem extends CompositeTreeItem\n{\n\tclass = CheckListItem;\n\n\tcheckedClass = 'tasks-checklist-item-solved';\n\thiddenClass = 'tasks-checklist-item-hidden';\n\tcollapseClass = 'tasks-checklist-collapse';\n\twrapperClass = 'tasks-checklist-items-wrapper';\n\n\tshowClass = 'tasks-checklist-item-show';\n\thideClass = 'tasks-checklist-item-hide';\n\n\tskipUpdateClasses = {\n\t\theader: [\n\t\t\t'.tasks-checklist-item-auditor',\n\t\t\t'.tasks-checklist-item-accomplice',\n\t\t\t'.tasks-checklist-item-link',\n\t\t],\n\t\titem: [\n\t\t\t'.tasks-checklist-item-auditor',\n\t\t\t'.tasks-checklist-item-accomplice',\n\t\t\t'.tasks-checklist-item-link',\n\t\t\t'.tasks-checklist-item-important',\n\t\t\t'.tasks-checklist-item-dragndrop',\n\t\t\t'.tasks-checklist-item-group-checkbox',\n\t\t\t'.tasks-checklist-item-remove',\n\t\t\t'.tasks-checklist-item-flag-block',\n\t\t],\n\t};\n\n\tstatic makeDangerElement(element)\n\t{\n\t\tconst dangerClass = 'ui-ctl-danger';\n\n\t\tif (!Dom.hasClass(element, dangerClass))\n\t\t{\n\t\t\tDom.addClass(element, dangerClass);\n\t\t}\n\t}\n\n\tstatic updateParents(oldParent, newParent)\n\t{\n\t\tif (oldParent !== newParent)\n\t\t{\n\t\t\toldParent.updateCounts();\n\t\t\tnewParent.updateCounts();\n\n\t\t\toldParent.updateProgress();\n\t\t\tnewParent.updateProgress();\n\n\t\t\toldParent.updateIndexes();\n\t\t\tnewParent.updateIndexes();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tnewParent.updateIndexes();\n\t\t}\n\t}\n\n\tstatic getProgressText(completed, total)\n\t{\n\t\tconst replaces = {\n\t\t\t'#total#': total,\n\t\t\t'#completed#': completed,\n\t\t};\n\t\tlet progressText = Loc.getMessage('TASKS_CHECKLIST_PROGRESS_BAR_PROGRESS_TEXT');\n\n\t\tObject.keys(replaces).forEach((search) => {\n\t\t\tprogressText = progressText.replace(search, replaces[search]);\n\t\t});\n\n\t\treturn progressText;\n\t}\n\n\tstatic getFileExtension(ext)\n\t{\n\t\tlet fileExtension = ext;\n\n\t\tswitch (ext)\n\t\t{\n\t\t\tcase 'mp4':\n\t\t\tcase 'mkv':\n\t\t\tcase 'mpeg':\n\t\t\tcase 'avi':\n\t\t\tcase '3gp':\n\t\t\tcase 'flv':\n\t\t\tcase 'm4v':\n\t\t\tcase 'ogg':\n\t\t\tcase 'swf':\n\t\t\tcase 'wmv':\n\t\t\t\tfileExtension = 'mov';\n\t\t\t\tbreak;\n\n\t\t\tcase 'txt':\n\t\t\t\tfileExtension = 'txt';\n\t\t\t\tbreak;\n\n\t\t\tcase 'doc':\n\t\t\tcase 'docx':\n\t\t\t\tfileExtension = 'doc';\n\t\t\t\tbreak;\n\n\t\t\tcase 'xls':\n\t\t\tcase 'xlsx':\n\t\t\t\tfileExtension = 'xls';\n\t\t\t\tbreak;\n\n\t\t\tcase 'php':\n\t\t\t\tfileExtension = 'php';\n\t\t\t\tbreak;\n\n\t\t\tcase 'pdf':\n\t\t\t\tfileExtension = 'pdf';\n\t\t\t\tbreak;\n\n\t\t\tcase 'ppt':\n\t\t\tcase 'pptx':\n\t\t\t\tfileExtension = 'ppt';\n\t\t\t\tbreak;\n\n\t\t\tcase 'rar':\n\t\t\t\tfileExtension = 'rar';\n\t\t\t\tbreak;\n\n\t\t\tcase 'zip':\n\t\t\t\tfileExtension = 'zip';\n\t\t\t\tbreak;\n\n\t\t\tcase 'set':\n\t\t\t\tfileExtension = 'set';\n\t\t\t\tbreak;\n\n\t\t\tcase 'mov':\n\t\t\t\tfileExtension = 'mov';\n\t\t\t\tbreak;\n\n\t\t\tcase 'img':\n\t\t\tcase 'jpg':\n\t\t\tcase 'jpeg':\n\t\t\tcase 'gif':\n\t\t\t\tfileExtension = 'img';\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tfileExtension = 'empty';\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn fileExtension;\n\t}\n\n\tstatic getInputSelection(input)\n\t{\n\t\tlet start = 0;\n\t\tlet end = 0;\n\t\tlet normalizedValue;\n\t\tlet range;\n\t\tlet textInputRange;\n\t\tlet len;\n\t\tlet endRange;\n\n\t\tif (typeof input.selectionStart === 'number' && typeof input.selectionEnd === 'number')\n\t\t{\n\t\t\tstart = input.selectionStart;\n\t\t\tend = input.selectionEnd;\n\t\t}\n\t\telse\n\t\t{\n\t\t\trange = document.selection.createRange();\n\n\t\t\tif (range && range.parentElement() === input)\n\t\t\t{\n\t\t\t\tlen = input.value.length;\n\t\t\t\tnormalizedValue = input.value.replace(/\\r\\n/g, '\\n');\n\n\t\t\t\t// Create a working TextRange that lives only in the input\n\t\t\t\ttextInputRange = input.createTextRange();\n\t\t\t\ttextInputRange.moveToBookmark(range.getBookmark());\n\n\t\t\t\t// Check if the start and end of the selection are at the very end\n\t\t\t\t// of the input, since moveStart/moveEnd doesn't return what we want\n\t\t\t\t// in those cases\n\t\t\t\tendRange = input.createTextRange();\n\t\t\t\tendRange.collapse(false);\n\n\t\t\t\tif (textInputRange.compareEndPoints('StartToEnd', endRange) > -1)\n\t\t\t\t{\n\t\t\t\t\tstart = len;\n\t\t\t\t\tend = len;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tstart = -textInputRange.moveStart('character', -len);\n\t\t\t\t\tstart += normalizedValue.slice(0, start).split('\\n').length - 1;\n\n\t\t\t\t\tif (textInputRange.compareEndPoints('EndToEnd', endRange) > -1)\n\t\t\t\t\t{\n\t\t\t\t\t\tend = len;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tend = -textInputRange.moveEnd('character', -len);\n\t\t\t\t\t\tend += normalizedValue.slice(0, end).split('\\n').length - 1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn {start, end};\n\t}\n\n\tstatic getDefaultDisplayTitle(title)\n\t{\n\t\tlet defaultDisplayTitle = title;\n\n\t\tif (title.indexOf('BX_CHECKLIST') === 0)\n\t\t{\n\t\t\tif (title === 'BX_CHECKLIST')\n\t\t\t{\n\t\t\t\tdefaultDisplayTitle = Loc.getMessage('TASKS_CHECKLIST_DEFAULT_DISPLAY_TITLE_2');\n\t\t\t}\n\t\t\telse if (title.match(/BX_CHECKLIST_\\d+$/))\n\t\t\t{\n\t\t\t\tconst itemNumber = title.replace('BX_CHECKLIST_', '');\n\t\t\t\tdefaultDisplayTitle = Loc.getMessage('TASKS_CHECKLIST_DEFAULT_DISPLAY_TITLE_WITH_NUMBER').replace('#ITEM_NUMBER#', itemNumber);\n\t\t\t}\n\t\t}\n\n\t\treturn defaultDisplayTitle;\n\t}\n\n\tstatic smoothScroll(node)\n\t{\n\t\tconst posFrom = BX.GetWindowScrollPos().scrollTop;\n\t\tconst posTo = BX.pos(node).top - Math.round(BX.GetWindowInnerSize().innerHeight / 2);\n\t\tconst toBottom = posFrom < posTo;\n\t\tconst distance = Math.abs(posTo - posFrom);\n\t\tconst speed = (Math.round(distance / 100) > 20 ? 20 : Math.round(distance / 100));\n\t\tconst step = speed / 2;\n\n\t\tif (step <= 0)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tlet posCurrent = (toBottom ? posFrom + step : posFrom - step);\n\t\tlet timer = 0;\n\n\t\tif (toBottom)\n\t\t{\n\t\t\tfor (let i = posFrom; i < posTo; i += step)\n\t\t\t{\n\t\t\t\tsetTimeout(`window.scrollTo(0, ${posCurrent})`, timer * speed);\n\n\t\t\t\tposCurrent += step;\n\t\t\t\tif (posCurrent > posTo)\n\t\t\t\t{\n\t\t\t\t\tposCurrent = posTo;\n\t\t\t\t}\n\t\t\t\ttimer += 1;\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tfor (let i = posFrom; i > posTo; i -= step)\n\t\t\t{\n\t\t\t\tsetTimeout(`window.scrollTo(0, ${posCurrent})`, timer * speed);\n\n\t\t\t\tposCurrent -= step;\n\t\t\t\tif (posCurrent < posTo)\n\t\t\t\t{\n\t\t\t\t\tposCurrent = posTo;\n\t\t\t\t}\n\t\t\t\ttimer += 1;\n\t\t\t}\n\t\t}\n\t}\n\n\tstatic getMemberLinkLayout(type, name, url)\n\t{\n\t\tconst messageId = `TASKS_CHECKLIST_${type.toUpperCase()}_ICON_HINT`;\n\t\treturn `\n\t\t\t<span class=\"tasks-checklist-item-auditor\">\n\t\t\t\t<a class=\"tasks-checklist-item-${type}-icon\" title=\"${Loc.getMessage(messageId)}\"></a>\n\t\t\t\t<a href=\"${url}\" class=\"tasks-checklist-item-${type}-link\">${name}</a>\n\t\t\t</span>\n\t\t`;\n\t}\n\n\tstatic getLinkLayout(url)\n\t{\n\t\treturn `<a class=\"tasks-checklist-item-link\" href=\"${url}\" target=\"_blank\">${url}</a>`;\n\t}\n\n\tconstructor(fields = {})\n\t{\n\t\tconst {action} = fields;\n\n\t\tsuper();\n\t\tthis.fields = new CheckListItemFields(fields);\n\t\tthis.action = {\n\t\t\tcanUpdate: (action && 'MODIFY' in action) ? action.MODIFY : true,\n\t\t\tcanRemove: (action && 'REMOVE' in action) ? action.REMOVE : true,\n\t\t\tcanToggle: (action && 'TOGGLE' in action) ? action.TOGGLE : true,\n\t\t\tcanDrag: (action && 'DRAG' in action) ? action.DRAG : true,\n\t\t};\n\n\t\tthis.input = null;\n\t\tthis.panel = null;\n\t\tthis.progress = null;\n\t\tthis.filesLoaderPopup = null;\n\t\tthis.filesLoaderProgressBars = new Map();\n\t\tthis.updateMode = false;\n\t}\n\n\tadd(item, position = null)\n\t{\n\t\tsuper.add(item, position);\n\n\t\titem.optionManager = this.optionManager;\n\t\titem.clickEventHandler = this.clickEventHandler;\n\t}\n\n\tisTaskRoot()\n\t{\n\t\treturn this.getNodeId() === 0 && this.getParent() === null;\n\t}\n\n\tisCheckList()\n\t{\n\t\treturn !this.isTaskRoot() && this.getParent().isTaskRoot();\n\t}\n\n\tgetCheckList()\n\t{\n\t\tlet parent = this;\n\n\t\twhile (!parent.getParent().isTaskRoot())\n\t\t{\n\t\t\tparent = parent.getParent();\n\t\t}\n\n\t\treturn parent;\n\t}\n\n\tfindById(id)\n\t{\n\t\tif (!id)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tif (this.fields.getId() && this.fields.getId().toString() === id.toString())\n\t\t{\n\t\t\treturn this;\n\t\t}\n\n\t\tlet found = null;\n\t\tthis.getDescendants().forEach((descendant) => {\n\t\t\tif (found === null)\n\t\t\t{\n\t\t\t\tfound = descendant.findById(id);\n\t\t\t}\n\t\t});\n\n\t\treturn found;\n\t}\n\n\tcountCompletedCount(recursively = false)\n\t{\n\t\tlet completedCount = 0;\n\n\t\tthis.getDescendants().forEach((descendant) => {\n\t\t\tif (descendant.fields.getIsComplete())\n\t\t\t{\n\t\t\t\tcompletedCount += 1;\n\t\t\t}\n\n\t\t\tif (recursively)\n\t\t\t{\n\t\t\t\tcompletedCount += descendant.countCompletedCount(recursively);\n\t\t\t}\n\t\t});\n\n\t\treturn completedCount;\n\t}\n\n\tcountTotalCount(recursively = false)\n\t{\n\t\tlet totalCount = 0;\n\n\t\tif (!recursively)\n\t\t{\n\t\t\ttotalCount = this.getDescendantsCount();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.getDescendants().forEach((descendant) => {\n\t\t\t\ttotalCount += 1;\n\t\t\t\ttotalCount += descendant.countTotalCount(recursively);\n\t\t\t});\n\t\t}\n\n\t\treturn totalCount;\n\t}\n\n\tupdateCompletedCount()\n\t{\n\t\tconst completedCount = this.countCompletedCount();\n\t\tthis.fields.setCompletedCount(completedCount);\n\t}\n\n\tupdateTotalCount()\n\t{\n\t\tconst totalCount = this.countTotalCount();\n\t\tthis.fields.setTotalCount(totalCount);\n\t}\n\n\tupdateCounts()\n\t{\n\t\tthis.updateCompletedCount();\n\t\tthis.updateTotalCount();\n\t}\n\n\tupdateProgress()\n\t{\n\t\tif (this.progress === null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst total = this.fields.getTotalCount();\n\t\tconst completed = this.fields.getCompletedCount();\n\n\t\tthis.progress.setMaxValue(total);\n\t\tthis.progress.update(completed);\n\n\t\tif (this.isCheckList())\n\t\t{\n\t\t\tthis.updateProgressText(completed, total);\n\t\t}\n\t}\n\n\tupdateProgressText(completed, total)\n\t{\n\t\tconst progressText = CheckListItem.getProgressText(completed, total);\n\t\tthis.progress.setTextAfter(progressText);\n\t}\n\n\tsetDefaultStyles(layout, action = 'add')\n\t{\n\t\tif (action === 'add')\n\t\t{\n\t\t\tlayout.style.overflow = 'hidden';\n\t\t\tlayout.style.height = 0;\n\t\t\tlayout.style.opacity = 0;\n\n\t\t\tDom.addClass(layout, this.showClass);\n\t\t}\n\t\telse if (action === 'delete')\n\t\t{\n\t\t\tlayout.style.overflow = 'hidden';\n\t\t\tlayout.style.height = `${layout.scrollHeight}px`;\n\t\t\tlayout.style.opacity = 1;\n\n\t\t\tDom.addClass(layout, this.hideClass);\n\t\t}\n\t}\n\n\tdelete()\n\t{\n\t\tconst parent = this.getParent();\n\n\t\tparent.remove(this);\n\t\tparent.updateCounts();\n\t\tparent.updateProgress();\n\n\t\tthis.setDefaultStyles(this.container, 'delete');\n\n\t\tsetTimeout(() => {\n\t\t\tthis.container.style.height = 0;\n\t\t\tthis.container.style.opacity = 0;\n\t\t\tthis.container.style.paddingTop = 0;\n\t\t}, 1);\n\n\t\tsetTimeout(() => {\n\t\t\tDom.remove(this.container);\n\t\t}, 250);\n\t}\n\n\trestore()\n\t{\n\t\tconst parent = this.getParent();\n\t\tconst position = this.fields.getSortIndex();\n\n\t\tif (position === 0)\n\t\t{\n\t\t\tif (parent.getDescendantsCount() > 0)\n\t\t\t{\n\t\t\t\tparent.addCheckListItem(this, parent.getFirstDescendant(), 'before');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tparent.addCheckListItem(this);\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tparent.addCheckListItem(this, parent.getDescendants()[position - 1]);\n\t\t}\n\t}\n\n\tdeleteAction(showBalloon = true)\n\t{\n\t\tconst title = this.fields.getTitle();\n\n\t\tthis.delete();\n\n\t\tif (showBalloon && title.length > 0 && title !== '')\n\t\t{\n\t\t\tconst action = 'DELETE';\n\t\t\tconst data = {\n\t\t\t\ttype: this.isCheckList() ? 'CHECKLIST' : 'ITEM',\n\t\t\t};\n\n\t\t\tthis.getNotificationBalloon(action, data);\n\t\t}\n\n\t\tEventEmitter.emit('BX.Tasks.CheckListItem:CheckListChanged', {action: 'delete'});\n\n\t\tthis.input = null;\n\t\tthis.updateMode = false;\n\t}\n\n\tonDeleteClick(e)\n\t{\n\t\te.preventDefault();\n\n\t\tDom.hide(this.getRootNode().panel);\n\n\t\tif (this.checkSelectedItems())\n\t\t{\n\t\t\tconst items = this.getSelectedItems();\n\t\t\tconst action = 'DELETE_SELECTED';\n\t\t\tconst data = {items};\n\n\t\t\tthis.runForEachSelectedItem((item) => {\n\t\t\t\titem.fields.setIsSelected(false);\n\t\t\t\titem.deleteAction(false);\n\t\t\t});\n\n\t\t\titems.forEach((item) => {\n\t\t\t\titem.getParent().updateIndexes();\n\t\t\t\titem.handleCheckListChanges();\n\t\t\t});\n\n\t\t\tthis.getNotificationBalloon(action, data);\n\n\t\t\treturn;\n\t\t}\n\n\t\tthis.deleteAction();\n\t\tthis.getParent().updateIndexes();\n\n\t\tthis.handleCheckListChanges();\n\t}\n\n\tgetNotificationBalloon(action, data)\n\t{\n\t\tconst actions = [];\n\t\tlet content = '';\n\n\t\tswitch (action)\n\t\t{\n\t\t\tcase 'DELETE':\n\t\t\t{\n\t\t\t\tcontent = Loc.getMessage(`TASKS_CHECKLIST_NOTIFICATION_BALLOON_ACTION_${action}_${data.type}`);\n\t\t\t\tactions.push({\n\t\t\t\t\ttitle: Loc.getMessage('TASKS_CHECKLIST_NOTIFICATION_BALLOON_CANCEL'),\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tclick: (event, balloon) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tballoon.close();\n\n\t\t\t\t\t\t\tthis.restore();\n\t\t\t\t\t\t\tthis.handleCheckListChanges();\n\t\t\t\t\t\t\tthis.handleTaskOptions();\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase 'DELETE_SELECTED':\n\t\t\t{\n\t\t\t\tcontent = Loc.getMessage(`TASKS_CHECKLIST_NOTIFICATION_BALLOON_ACTION_${action}_ITEMS`);\n\t\t\t\tactions.push({\n\t\t\t\t\ttitle: Loc.getMessage('TASKS_CHECKLIST_NOTIFICATION_BALLOON_CANCEL'),\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tclick: (event, balloon) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tballoon.close();\n\n\t\t\t\t\t\t\tdata.items.forEach((item) => {\n\t\t\t\t\t\t\t\titem.restore();\n\t\t\t\t\t\t\t\titem.handleCheckListChanges();\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tthis.handleTaskOptions();\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase 'AUDITOR_ADDED':\n\t\t\tcase 'ACCOMPLICE_ADDED':\n\t\t\t{\n\t\t\t\tcontent = Tag.render`\n\t\t\t\t\t<div class=\"tasks-checklist-notification-balloon-message-container\">\n\t\t\t\t\t\t<div class=\"tasks-checklist-notification-balloon-avatar\">\n\t\t\t\t\t\t\t<img class=\"tasks-checklist-notification-balloon-avatar-img\" src=\"${data.avatar}\" alt=\"\"/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<span class=\"tasks-checklist-notification-balloon-message\">\n\t\t\t\t\t\t\t${Loc.getMessage(`TASKS_CHECKLIST_NOTIFICATION_BALLOON_ACTION_${action}`)}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t`;\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tdefault:\n\t\t\t{\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tBX.loadExt('ui.notification').then(() => {\n\t\t\tBX.UI.Notification.Center.notify({content, actions});\n\t\t});\n\t}\n\n\tonToAnotherCheckListClick(e)\n\t{\n\t\tconst rootNode = this.getRootNode();\n\n\t\tif (rootNode.getDescendantsCount() === 1)\n\t\t{\n\t\t\tthis.moveToNewCheckList(2);\n\t\t\treturn;\n\t\t}\n\n\t\tnew BX.PopupMenuWindow(\n\t\t\t'to-another-checklist',\n\t\t\te.target,\n\t\t\tthis.getToAnotherCheckListPopupItems(),\n\t\t\t{\n\t\t\t\tautoHide: true,\n\t\t\t\tcloseByEsc: true,\n\t\t\t\toffsetLeft: e.target.offsetWidth / 3,\n\t\t\t\tangle: true,\n\t\t\t\tevents: {\n\t\t\t\t\tonPopupClose() {\n\t\t\t\t\t\tthis.destroy();\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t).show();\n\t}\n\n\tgetToAnotherCheckListPopupItems()\n\t{\n\t\tconst selectMode = this.checkSelectedItems();\n\t\tconst popupMenuItems = [];\n\t\tconst toNewCheckListMenuItem = {\n\t\t\ttext: Tag.message`+ ${'TASKS_CHECKLIST_PANEL_TO_ANOTHER_CHECKLIST_POPUP_NEW_CHECKLIST'}`,\n\t\t\tonclick: (event, item) => {\n\t\t\t\titem.getMenuWindow().close();\n\t\t\t\tthis.moveToNewCheckList(this.getRootNode().getDescendantsCount() + 1);\n\t\t\t},\n\t\t};\n\n\t\tif (selectMode)\n\t\t{\n\t\t\tthis.getDescendants().forEach((descendant) => {\n\t\t\t\tpopupMenuItems.push({\n\t\t\t\t\ttext: descendant.fields.getDisplayTitle(),\n\t\t\t\t\tonclick: (event, item) => {\n\t\t\t\t\t\titem.getMenuWindow().close();\n\n\t\t\t\t\t\tthis.runForEachSelectedItem((selectedItem) => {\n\t\t\t\t\t\t\tselectedItem.makeChildOf(descendant);\n\t\t\t\t\t\t\tdescendant.unselectAll();\n\n\t\t\t\t\t\t\tif (!this.checkSelectedItems())\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tDom.hide(this.getRootNode().panel);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tpopupMenuItems.push({delimiter: true});\n\t\t\tpopupMenuItems.push(toNewCheckListMenuItem);\n\n\t\t\treturn popupMenuItems;\n\t\t}\n\n\t\tconst checkList = this.getCheckList();\n\t\tconst checkLists = this.getRootNode().getDescendants().filter(item => item !== checkList);\n\n\t\tcheckLists.forEach((descendant) => {\n\t\t\tpopupMenuItems.push({\n\t\t\t\ttext: descendant.fields.getDisplayTitle(),\n\t\t\t\tonclick: (event, item) => {\n\t\t\t\t\titem.getMenuWindow().close();\n\t\t\t\t\tthis.makeChildOf(descendant);\n\t\t\t\t\tthis.handleUpdateEnding();\n\t\t\t\t},\n\t\t\t});\n\t\t});\n\n\t\tpopupMenuItems.push({delimiter: true});\n\t\tpopupMenuItems.push(toNewCheckListMenuItem);\n\n\t\treturn popupMenuItems;\n\t}\n\n\tmoveToNewCheckList(number)\n\t{\n\t\tconst title = `${Loc.getMessage('TASKS_CHECKLIST_NEW_CHECKLIST_TITLE')}`.replace('#ITEM_NUMBER#', number);\n\t\tconst newCheckList = new CheckListItem({TITLE: title, DISPLAY_TITLE: title});\n\n\t\tthis.getRootNode().addCheckListItem(newCheckList).then(() => {\n\t\t\tif (this.checkSelectedItems())\n\t\t\t{\n\t\t\t\tthis.runForEachSelectedItem((selectedItem) => {\n\t\t\t\t\tselectedItem.makeChildOf(newCheckList);\n\t\t\t\t\tnewCheckList.unselectAll();\n\n\t\t\t\t\tif (!this.checkSelectedItems())\n\t\t\t\t\t{\n\t\t\t\t\t\tDom.hide(this.getRootNode().panel);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.makeChildOf(newCheckList);\n\t\t\t\tthis.handleUpdateEnding();\n\t\t\t}\n\t\t});\n\t}\n\n\tprocessMemberSelect(member)\n\t{\n\t\tif (this.memberSelector)\n\t\t{\n\t\t\tthis.memberSelector.close();\n\t\t}\n\n\t\tif (this.checkSelectedItems())\n\t\t{\n\t\t\tthis.runForEachSelectedItem((selectedItem) => {\n\t\t\t\tconst displayTitle = selectedItem.fields.getDisplayTitle();\n\t\t\t\tconst space = displayTitle.slice(-1) === ' ' ? '' : ' ';\n\t\t\t\tconst newTitle = `${displayTitle}${space}${member.nameFormatted}`.substring(0, 255);\n\n\t\t\t\tselectedItem.fields.addMember(member);\n\n\t\t\t\tselectedItem.updateTitle(newTitle);\n\t\t\t\tselectedItem.updateDisplayTitle(newTitle);\n\t\t\t});\n\n\t\t\treturn;\n\t\t}\n\n\t\tconst inputText = this.input.value;\n\t\tconst mentioned = +this.mentioned;\n\t\tconst start = this.inputCursorPosition.start || 0;\n\t\tconst startSpace = (start === 0 || start - mentioned === 0 || inputText.charAt(start - mentioned - 1) === ' ') ? '' : ' ';\n\t\tconst endSpace = (inputText.charAt(start) === ' ' ? '' : ' ');\n\n\t\tthis.fields.addMember(member);\n\n\t\tconst newInputText = `${inputText.slice(0, start - mentioned)}${startSpace}${Text.decode(member.nameFormatted)}${endSpace}`;\n\n\t\tthis.inputCursorPosition.start = newInputText.length;\n\t\tthis.inputCursorPosition.end = newInputText.length;\n\n\t\tthis.input.value = `${newInputText}${inputText.slice(start)}`;\n\t\tthis.mentioned = false;\n\n\t\tthis.retrieveFocus();\n\t}\n\n\tonSocNetSelectorAuditorSelected(auditor)\n\t{\n\t\tconst type = 'auditor';\n\t\tconst action = `${type.toUpperCase()}_ADDED`;\n\t\tconst data = {avatar: auditor.avatar};\n\t\tconst resultAuditor = {...auditor, type};\n\n\t\tthis.processMemberSelect(resultAuditor);\n\t\tthis.getNotificationBalloon(action, data);\n\n\t\tEventEmitter.emit('BX.Tasks.CheckListItem:auditorAdded', auditor);\n\t\tEventEmitter.emit('BX.Tasks.CheckListItem:CheckListChanged', {action: 'addAuditor'});\n\t}\n\n\tonSocNetSelectorAccompliceSelected(accomplice)\n\t{\n\t\tconst type = 'accomplice';\n\t\tconst action = `${type.toUpperCase()}_ADDED`;\n\t\tconst data = {avatar: accomplice.avatar};\n\t\tconst resultAccomplice = {...accomplice, type};\n\n\t\tthis.processMemberSelect(resultAccomplice);\n\t\tthis.getNotificationBalloon(action, data);\n\n\t\tEventEmitter.emit('BX.Tasks.CheckListItem:accompliceAdded', accomplice);\n\t\tEventEmitter.emit('BX.Tasks.CheckListItem:CheckListChanged', {action: 'addAccomplice'});\n\t}\n\n\tgetMemberSelector(e, memberType = 'auditor', mentioned = false)\n\t{\n\t\tif (!this.checkCanAddAccomplice())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst typeFunctionMap = {\n\t\t\tauditor: this.onSocNetSelectorAuditorSelected.bind(this),\n\t\t\taccomplice: this.onSocNetSelectorAccompliceSelected.bind(this),\n\t\t};\n\t\tconst typeFunction = typeFunctionMap[memberType] || typeFunctionMap.auditor;\n\n\t\tthis.memberSelector = new BX.Tasks.Integration.Socialnetwork.NetworkSelector({\n\t\t\tscope: e.target,\n\t\t\tmode: 'user',\n\t\t\tuseSearch: true,\n\t\t\tuseAdd: false,\n\t\t\tcontrolBind: e.target,\n\t\t\tparent: this,\n\t\t});\n\t\tthis.memberSelector.bindEvent('initialized', () => {\n\t\t\tthis.isSelectorLoading = false;\n\t\t});\n\t\tthis.memberSelector.bindEvent('close', () => {\n\t\t\tthis.mentioned = mentioned;\n\t\t\tthis.isSelectorLoading = false;\n\t\t\tthis.retrieveFocus();\n\t\t});\n\t\tthis.memberSelector.bindEvent('item-selected', typeFunction);\n\t\tthis.memberSelector.open();\n\t}\n\n\tonAddAuditorClick(e)\n\t{\n\t\tthis.getMemberSelector(e, 'auditor');\n\t}\n\n\tonAddAccompliceClick(e)\n\t{\n\t\tthis.getMemberSelector(e, 'accomplice');\n\t}\n\n\tonUploadAttachmentClick(e)\n\t{\n\t\tconst nodeId = this.getNodeId();\n\t\tconst {prefix, diskUrls} = this.optionManager;\n\t\tconst {urlSelect, urlRenameFile, urlDeleteFile, urlUpload} = diskUrls;\n\n\t\tif (this.filesLoaderPopup === null)\n\t\t{\n\t\t\tthis.filesLoaderPopup = new BX.PopupWindow({\n\t\t\t\tcontent: this.getAttachmentsLoaderLayout(),\n\t\t\t\tbindElement: e.target,\n\t\t\t\toffsetLeft: e.target.offsetWidth / 2,\n\t\t\t\tautoHide: true,\n\t\t\t\tcloseByEsc: true,\n\t\t\t\tangle: true,\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.filesLoaderPopup.setBindElement(e.target);\n\t\t}\n\n\t\tthis.filesLoaderPopup.show();\n\n\t\tBX.Disk.UF.add({\n\t\t\tUID: nodeId,\n\t\t\tcontrolName: `${prefix}[${nodeId}][UF_CHECKLIST_FILES][]`,\n\t\t\thideSelectDialog: false,\n\t\t\turlSelect,\n\t\t\turlRenameFile,\n\t\t\turlDeleteFile,\n\t\t\turlUpload,\n\t\t});\n\n\t\tBX.onCustomEvent(\n\t\t\tthis.filesLoaderPopup.contentContainer.querySelector('#files_chooser'),\n\t\t\t'DiskLoadFormController',\n\t\t\t['show'],\n\t\t);\n\t}\n\n\tonDeleteAttachmentClick(fileId)\n\t{\n\t\tthis.fields.removeAttachment(fileId);\n\t\tDom.remove(this.getAttachmentsContainer().querySelector(`#disk-attach-${fileId}`));\n\t\tEventEmitter.emit('BX.Tasks.CheckListItem:CheckListChanged', {action: 'deleteAttachment'});\n\t}\n\n\tgetPanelBodyLayout()\n\t{\n\t\tconst membersLayout = Tag.render`\n\t\t\t<div class=\"tasks-checklist-item-editor-panel-btn tasks-checklist-item-editor-panel-btn-auditor\" onclick=\"${this.onAddAuditorClick.bind(this)}\">\n\t\t\t\t<span class=\"tasks-checklist-item-editor-panel-icon\"></span>\n\t\t\t\t<span class=\"tasks-checklist-item-editor-panel-text\">${Tag.message`+ ${'TASKS_CHECKLIST_PANEL_AUDITOR'}`}</span>\n\t\t\t</div>\n\t\t\t<div class=\"tasks-checklist-item-editor-panel-separator\"></div>\n\t\t\t<div class=\"tasks-checklist-item-editor-panel-btn tasks-checklist-item-editor-panel-btn-accomplice\" onclick=\"${this.onAddAccompliceClick.bind(this)}\">\n\t\t\t\t<span class=\"tasks-checklist-item-editor-panel-icon\"></span>\n\t\t\t\t<span class=\"tasks-checklist-item-editor-panel-text\">${Tag.message`+ ${'TASKS_CHECKLIST_PANEL_ACCOMPLICE'}`}</span>\n\t\t\t</div>\n\t\t\t<div class=\"tasks-checklist-item-editor-panel-separator\"></div>\n\t\t`;\n\t\tconst attachmentButtonLayout = Tag.render`\n\t\t\t<div class=\"tasks-checklist-item-editor-panel-btn tasks-checklist-item-editor-panel-btn-attachment\" onclick=\"${this.onUploadAttachmentClick.bind(this)}\">\n\t\t\t\t<span class=\"tasks-checklist-item-editor-panel-icon\"></span>\n\t\t\t</div>\n\t\t`;\n\t\tconst itemsActionButtonsLayout = Tag.render`\n\t\t\t${this.checkSelectedItems() ? '' : attachmentButtonLayout}\n\t\t\t<div class=\"tasks-checklist-item-editor-panel-btn tasks-checklist-item-editor-panel-btn-tabin\" onclick=\"${this.onTabInClick.bind(this)}\">\n\t\t\t\t<span class=\"tasks-checklist-item-editor-panel-icon\"></span>\n\t\t\t</div>\n\t\t\t<div class=\"tasks-checklist-item-editor-panel-btn tasks-checklist-item-editor-panel-btn-tabout\" onclick=\"${this.onTabOutClick.bind(this)}\">\n\t\t\t\t<span class=\"tasks-checklist-item-editor-panel-icon\"></span>\n\t\t\t</div>\n\t\t\t<div class=\"tasks-checklist-item-editor-panel-separator\"></div>\n\t\t\t<div class=\"tasks-checklist-item-editor-panel-btn tasks-checklist-item-editor-panel-btn-important\n\t\t\t\t${this.fields.getIsImportant() ? ' tasks-checklist-item-editor-panel-btn-important-selected' : ''}\" onclick=\"${this.onImportantClick.bind(this)}\">\n\t\t\t\t<span class=\"tasks-checklist-item-editor-panel-icon\"></span>\n\t\t\t\t<span class=\"tasks-checklist-item-editor-panel-text\">${Loc.getMessage('TASKS_CHECKLIST_PANEL_IMPORTANT')}</span>\n\t\t\t</div>\n\t\t\t<div class=\"tasks-checklist-item-editor-panel-separator\"></div>\n\t\t\t<div class=\"tasks-checklist-item-editor-panel-btn tasks-checklist-item-editor-panel-btn-checklist\" onclick=\"${this.onToAnotherCheckListClick.bind(this)}\">\n\t\t\t\t<span class=\"tasks-checklist-item-editor-panel-icon\"></span>\n\t\t\t\t<span class=\"tasks-checklist-item-editor-panel-text\">${Loc.getMessage('TASKS_CHECKLIST_PANEL_TO_ANOTHER_CHECKLIST')}</span>\n\t\t\t</div>\n\t\t\t<div class=\"tasks-checklist-item-editor-panel-separator\"></div>\n\t\t\t<div class=\"tasks-checklist-item-editor-panel-btn tasks-checklist-item-editor-panel-btn-remove\" onclick=\"${this.onDeleteClick.bind(this)}\">\n\t\t\t\t<span class=\"tasks-checklist-item-editor-panel-icon\"></span>\n\t\t\t</div>\n\t\t`;\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"tasks-checklist-item-editor-panel ${this.isTaskRoot() || this.isCheckList() ? 'tasks-checklist-item-editor-group-panel' : ''}\">\n\t\t\t\t${this.checkCanAddAccomplice() ? membersLayout : ''}\n\t\t\t\t${!this.isCheckList() ? itemsActionButtonsLayout : ''}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tupdateTitle(text)\n\t{\n\t\tthis.fields.setTitle(text);\n\t}\n\n\tupdateDisplayTitle(text)\n\t{\n\t\tconst oldTitleNode = this.getTitleNodeContainer();\n\t\tconst newTitleNode = this.getTitleLayout();\n\n\t\tthis.fields.setDisplayTitle(text);\n\n\t\tDom.replace(oldTitleNode, newTitleNode);\n\t}\n\n\tgetTitleLayout()\n\t{\n\t\tconst {userPath} = this.optionManager;\n\t\tlet title = this.fields.getTitle();\n\n\t\ttitle = this.isCheckList() ? CheckListItem.getDefaultDisplayTitle(title) : title;\n\n\t\tthis.fields.setDisplayTitle(title);\n\t\tthis.fields.getMembers().forEach(({id, nameFormatted, type}) => {\n\t\t\tconst regExp = new RegExp(nameFormatted, 'g');\n\t\t\tconst url = userPath.replace('#user_id#', id).replace('#USER_ID#', id);\n\t\t\ttitle = title.replace(regExp, CheckListItem.getMemberLinkLayout(type, nameFormatted, url));\n\t\t});\n\n\t\ttitle = title.replace(/(https?:\\/\\/[^\\s]+)/g, url => CheckListItem.getLinkLayout(url));\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"${this.getTitleNodeClass()}\">\n\t\t\t\t${title}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tprocessMembersFromText(text)\n\t{\n\t\tconst membersToDelete = [];\n\n\t\tthis.fields.getMembers().forEach(({id, nameFormatted}) => {\n\t\t\tif (text.indexOf(nameFormatted) === -1)\n\t\t\t{\n\t\t\t\tmembersToDelete.push(id);\n\t\t\t}\n\t\t});\n\n\t\tmembersToDelete.forEach((id) => {\n\t\t\tthis.fields.removeMember(id);\n\t\t});\n\t}\n\n\tupdateIndexes()\n\t{\n\t\tthis.updateSortIndexes();\n\t\tthis.updateDisplaySortIndexes();\n\t}\n\n\tupdateSortIndexes()\n\t{\n\t\tlet sortIndex = 0;\n\n\t\tthis.getDescendants().forEach((descendant) => {\n\t\t\tdescendant.fields.setSortIndex(sortIndex);\n\t\t\tsortIndex += 1;\n\t\t});\n\t}\n\n\tupdateDisplaySortIndexes()\n\t{\n\t\tconst parentSortIndex = (this.isCheckList() || this.isTaskRoot() ? '' : `${this.fields.getDisplaySortIndex()}.`);\n\t\tlet localSortIndex = 0;\n\n\t\tthis.getDescendants().forEach((descendant) => {\n\t\t\tlocalSortIndex += 1;\n\t\t\tconst newSortIndex = `${parentSortIndex}${localSortIndex}`;\n\n\t\t\tdescendant.fields.setDisplaySortIndex(newSortIndex);\n\n\t\t\tif (!descendant.isCheckList())\n\t\t\t{\n\t\t\t\tdescendant.container.querySelector('.tasks-checklist-item-number').innerText = newSortIndex;\n\t\t\t}\n\n\t\t\tdescendant.updateDisplaySortIndexes();\n\t\t});\n\t}\n\n\thandleTaskOptions()\n\t{\n\t\tconst {userId, showCompleted, showOnlyMine} = this.optionManager;\n\n\t\tthis.getRootNode().hideByCondition((item) => {\n\t\t\tconst isComplete = item.fields.getIsComplete();\n\t\t\tconst hasUserInMembers = item.fields.getMembers().has(userId.toString());\n\t\t\tlet condition;\n\n\t\t\tif (!showCompleted && showOnlyMine)\n\t\t\t{\n\t\t\t\tcondition = isComplete || !hasUserInMembers;\n\t\t\t}\n\t\t\telse if (!showCompleted)\n\t\t\t{\n\t\t\t\tcondition = isComplete;\n\t\t\t}\n\t\t\telse if (showOnlyMine)\n\t\t\t{\n\t\t\t\tcondition = !hasUserInMembers;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tcondition = false;\n\t\t\t}\n\n\t\t\treturn condition;\n\t\t});\n\t}\n\n\thideByCondition(condition)\n\t{\n\t\tif (this.checkCanHide(condition))\n\t\t{\n\t\t\tthis.hide();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.show();\n\t\t\tthis.getDescendants().forEach((descendant) => {\n\t\t\t\tdescendant.hideByCondition(condition);\n\t\t\t});\n\t\t}\n\t}\n\n\tcheckCanHide(condition)\n\t{\n\t\tif (\n\t\t\tthis.isTaskRoot()\n\t\t\t|| this.updateMode\n\t\t\t|| Dom.hasClass(this.container, this.showClass)\n\t\t\t|| !condition(this)\n\t\t)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tlet canHide = true;\n\n\t\tthis.getDescendants().forEach((descendant) => {\n\t\t\tif (!condition(descendant))\n\t\t\t{\n\t\t\t\tcanHide = false;\n\t\t\t}\n\t\t\telse if (canHide)\n\t\t\t{\n\t\t\t\tcanHide = descendant.checkCanHide(condition);\n\t\t\t}\n\t\t});\n\n\t\treturn canHide;\n\t}\n\n\thide()\n\t{\n\t\tDom.hide(this.container);\n\t}\n\n\tshow()\n\t{\n\t\tDom.show(this.container);\n\t}\n\n\tcheckIsComplete()\n\t{\n\t\tlet isComplete;\n\n\t\tif (this.isTaskRoot())\n\t\t{\n\t\t\tisComplete = false;\n\t\t}\n\t\telse if (this.isCheckList())\n\t\t{\n\t\t\tconst completedCount = this.countCompletedCount(true);\n\t\t\tconst totalCount = this.countTotalCount(true);\n\n\t\t\tisComplete = (completedCount === totalCount && totalCount > 0);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tisComplete = this.fields.getIsComplete();\n\t\t}\n\n\t\treturn isComplete;\n\t}\n\n\tcheckActiveUpdateExist()\n\t{\n\t\tif (this.updateMode)\n\t\t{\n\t\t\treturn true;\n\t\t}\n\n\t\tlet found = false;\n\n\t\tthis.getDescendants().forEach((descendant) => {\n\t\t\tif (found === false)\n\t\t\t{\n\t\t\t\tfound = descendant.checkActiveUpdateExist();\n\t\t\t}\n\t\t});\n\n\t\treturn found;\n\t}\n\n\tdisableAllGroup()\n\t{\n\t\tthis.getDescendants().forEach((descendant) => {\n\t\t\tif (descendant.fields.getIsSelected())\n\t\t\t{\n\t\t\t\tdescendant.toggleGroup();\n\t\t\t}\n\t\t});\n\t}\n\n\tdisableAllUpdateModes()\n\t{\n\t\tif (this.updateMode)\n\t\t{\n\t\t\tthis.handleUpdateEnding();\n\t\t}\n\n\t\tthis.getDescendants().forEach((descendant) => {\n\t\t\tdescendant.disableAllUpdateModes();\n\t\t});\n\t}\n\n\trememberInputState()\n\t{\n\t\tthis.input = this.container.querySelector(`#text_${this.getNodeId()}`);\n\t\tthis.inputCursorPosition = CheckListItem.getInputSelection(this.input);\n\t}\n\n\tclearInput(e)\n\t{\n\t\te.preventDefault();\n\n\t\tthis.container.querySelector(`#text_${this.getNodeId()}`).value = '';\n\t\tthis.retrieveFocus();\n\t}\n\n\tretrieveFocus()\n\t{\n\t\tif (this.input !== null && this.inputCursorPosition)\n\t\t{\n\t\t\tconst {start, end} = this.inputCursorPosition;\n\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.input.focus();\n\t\t\t\tthis.input.setSelectionRange(start, end);\n\t\t\t}, 10);\n\t\t}\n\t}\n\n\tgetUpdateModeLayout()\n\t{\n\t\tconst nodeId = this.getNodeId();\n\n\t\tif (this.isCheckList())\n\t\t{\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"tasks-checklist-header-name tasks-checklist-header-name-edit-mode\">\n\t\t\t\t\t<div class=\"ui-ctl ui-ctl-w100 ui-ctl-textbox ui-ctl-after-icon ui-ctl-xs ui-ctl-no-padding ui-ctl-underline \n\t\t\t\t\t\t\t\ttasks-checklist-header-name-editor\">\n\t\t\t\t\t\t<input class=\"ui-ctl-element\" type=\"text\" id=\"text_${nodeId}\"\n\t\t\t\t\t\t\t   value=\"${this.fields.getDisplayTitle()}\"\n\t\t\t\t\t\t\t   onkeypress=\"${this.onInputKeyPressed.bind(this)}\"\n\t\t\t\t\t\t\t   onkeydown=\"${this.onInputKeyDown.bind(this)}\"\n\t\t\t\t\t\t\t   onblur=\"${this.rememberInputState.bind(this)}\"/>\n\t\t\t\t\t\t<button class=\"ui-ctl-after ui-ctl-icon-clear\" onclick=\"${this.clearInput.bind(this)}\"/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\n\t\tconst progressBarLayout = new BX.UI.ProgressRound({\n\t\t\tvalue: this.fields.getCompletedCount(),\n\t\t\tmaxValue: this.fields.getTotalCount(),\n\t\t\twidth: 20,\n\t\t\tlineSize: 3,\n\t\t\tfill: false,\n\t\t\tcolor: BX.UI.ProgressRound.Color.PRIMARY,\n\t\t});\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"tasks-checklist-item-inner tasks-checklist-item-new ${this.fields.getIsComplete() ? 'tasks-checklist-item-solved' : ''}\">\n\t\t\t\t<div class=\"tasks-checklist-item-flag-block\">\n\t\t\t\t\t<div class=\"tasks-checklist-item-flag\">\n\t\t\t\t\t\t<label class=\"tasks-checklist-item-flag-element\" onclick=\"${this.onCompleteButtonClick.bind(this)}\">\n\t\t\t\t\t\t\t<span class=\"tasks-checklist-item-flag-sub-checklist-progress\">\n\t\t\t\t\t\t\t\t${progressBarLayout.getContainer()}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<span class=\"tasks-checklist-item-flag-element-decorate\"/>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"tasks-checklist-item-content-block\">\n\t\t\t\t\t<div class=\"ui-ctl ui-ctl-textbox ui-ctl-after-icon ui-ctl-w100\">\n\t\t\t\t\t\t<input class=\"ui-ctl-element\" type=\"text\" id=\"text_${nodeId}\"\n\t\t\t\t\t\t\t   placeholder=\"${Loc.getMessage('TASKS_CHECKLIST_NEW_ITEM_PLACEHOLDER')}\"\n\t\t\t\t\t\t\t   value=\"${this.fields.getDisplayTitle()}\"\n\t\t\t\t\t\t\t   onkeypress=\"${this.onInputKeyPressed.bind(this)}\"\n\t\t\t\t\t\t\t   onkeydown=\"${this.onInputKeyDown.bind(this)}\"\n\t\t\t\t\t\t\t   onblur=\"${this.rememberInputState.bind(this)}\"/>\n\t\t\t\t\t\t<button class=\"ui-ctl-after ui-ctl-icon-clear\" onclick=\"${this.clearInput.bind(this)}\"/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tshowEditorPanel(item, nodeToPosition = null)\n\t{\n\t\tconst node = nodeToPosition || item.getContainer();\n\t\tconst position = Dom.getPosition(node);\n\n\t\tif (!this.panel)\n\t\t{\n\t\t\tthis.panel = Tag.render`\n\t\t\t\t<div class=\"tasks-checklist-item-editor-panel-container\">\n\t\t\t\t\t${item.getPanelBodyLayout()}\n\t\t\t\t</div>\n\t\t\t`;\n\n\t\t\tthis.panel.style.top = `${position.top}px`;\n\t\t\tthis.panel.style.left = `${position.left}px`;\n\t\t\tthis.panel.style.width = `${position.width}px`;\n\n\t\t\tDom.append(this.panel, document.body);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.replace(this.panel.querySelector('.tasks-checklist-item-editor-panel'), item.getPanelBodyLayout());\n\n\t\t\tthis.panel.style.top = `${position.top}px`;\n\t\t\tthis.panel.style.left = `${position.left}px`;\n\t\t\tthis.panel.style.width = `${position.width}px`;\n\t\t}\n\n\t\tif (!Dom.isShown(this.panel))\n\t\t{\n\t\t\tDom.show(this.panel);\n\t\t}\n\n\t\tif (\n\t\t\t(Dom.isShown(this.panel) && item.isCheckList() && !item.checkCanAddAccomplice())\n\t\t\t|| (position.left === 0 && position.right === 0 && position.width === 0)\n\t\t)\n\t\t{\n\t\t\tDom.hide(this.panel);\n\t\t}\n\t}\n\n\tenableUpdateMode()\n\t{\n\t\tconst viewModeLayout = this.getInnerContainer();\n\t\tconst updateModeLayout = this.getUpdateModeLayout();\n\n\t\tDom.addClass(viewModeLayout, this.hiddenClass);\n\t\tDom.insertBefore(updateModeLayout, viewModeLayout);\n\n\t\tthis.input = updateModeLayout.querySelector(`#text_${this.getNodeId()}`);\n\t\tthis.input.focus();\n\t\tthis.input.setSelectionRange(this.input.value.length, this.input.value.length);\n\t\tthis.inputCursorPosition = CheckListItem.getInputSelection(this.input);\n\n\t\tif (this.input.value === '' || this.input.value.length === 0)\n\t\t{\n\t\t\tsetTimeout(() => {\n\t\t\t\tif (Dom.isShown(this.input))\n\t\t\t\t{\n\t\t\t\t\tthis.getRootNode().showEditorPanel(this, this.input);\n\t\t\t\t}\n\t\t\t}, 250);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.getRootNode().showEditorPanel(this, this.input);\n\t\t}\n\n\t\tthis.updateMode = true;\n\t}\n\n\tdisableUpdateMode()\n\t{\n\t\tconst currentInner = this.getInnerContainer();\n\t\tconst text = Text.encode(currentInner.querySelector(`#text_${this.getNodeId()}`).value.trim().substring(0, 255));\n\n\t\tthis.processMembersFromText(text);\n\t\tthis.updateTitle(text);\n\t\tthis.updateDisplayTitle(text);\n\n\t\tDom.removeClass(currentInner.nextElementSibling, this.hiddenClass);\n\t\tDom.remove(currentInner);\n\t\tDom.hide(this.getRootNode().panel);\n\n\t\tthis.input = null;\n\t\tthis.updateMode = false;\n\t}\n\n\tcheckCanDeleteOnUpdateEnding()\n\t{\n\t\treturn this.getDescendantsCount() === 0\n\t\t\t&& Object.keys(this.fields.getAttachments()).length === 0\n\t\t\t&& this.filesLoaderProgressBars.size === 0;\n\t}\n\n\thandleUpdateEnding(createNewItem = false)\n\t{\n\t\tconst input = this.container.querySelector(`#text_${this.getNodeId()}`);\n\t\tconst text = input.value.trim();\n\n\t\tif (text.length === 0)\n\t\t{\n\t\t\tif (this.checkCanDeleteOnUpdateEnding())\n\t\t\t{\n\t\t\t\tthis.deleteAction(false);\n\t\t\t\tthis.getParent().updateIndexes();\n\t\t\t\tthis.handleCheckListIsEmpty();\n\n\t\t\t\tDom.hide(this.getRootNode().panel);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tCheckListItem.makeDangerElement(input.parentElement);\n\t\t\t\tif (this.input !== null)\n\t\t\t\t{\n\t\t\t\t\tthis.getRootNode().showEditorPanel(this, this.input);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse if (createNewItem)\n\t\t{\n\t\t\tthis.getParent().addCheckListItem(null, this);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.disableUpdateMode();\n\t\t\tthis.handleTaskOptions();\n\t\t}\n\n\t\tif (this.filesLoaderPopup !== null)\n\t\t{\n\t\t\tthis.filesLoaderPopup.close();\n\t\t}\n\t}\n\n\ttoggleUpdateMode(e)\n\t{\n\t\tif (this.updateMode)\n\t\t{\n\t\t\tif (e.keyCode === 13 || e.keyCode === 9)\n\t\t\t{\n\t\t\t\tthis.handleUpdateEnding(!this.isCheckList());\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tconst rootNode = this.getRootNode();\n\n\t\t\trootNode.disableAllUpdateModes();\n\t\t\trootNode.disableAllGroup();\n\n\t\t\tif (!rootNode.checkActiveUpdateExist())\n\t\t\t{\n\t\t\t\tthis.enableUpdateMode();\n\t\t\t\tEventEmitter.emit('BX.Tasks.CheckListItem:CheckListChanged', {action: 'toggleUpdateMode'});\n\t\t\t}\n\t\t}\n\t}\n\n\tonInputKeyPressed(e)\n\t{\n\t\tif (this.isSelectorLoading)\n\t\t{\n\t\t\te.preventDefault();\n\t\t\treturn;\n\t\t}\n\n\t\tconst keys = {\n\t\t\tenter: 13,\n\t\t\tplus: 43,\n\t\t\tatsign: 64,\n\t\t};\n\n\t\tif (e.keyCode === keys.enter)\n\t\t{\n\t\t\tthis.toggleUpdateMode(e);\n\t\t\te.preventDefault();\n\t\t}\n\t\telse if (e.keyCode === keys.plus || (e.shiftKey && e.keyCode === keys.atsign))\n\t\t{\n\t\t\tthis.isSelectorLoading = true;\n\t\t\tthis.getMemberSelector(e, this.optionManager.defaultMemberSelectorType, true);\n\t\t}\n\n\t\tEventEmitter.emit('BX.Tasks.CheckListItem:CheckListChanged', {action: 'inputKeyPressed'});\n\t}\n\n\tonInputKeyDown(e)\n\t{\n\t\tconst keys = {\n\t\t\ttab: 9,\n\t\t\tup: 38,\n\t\t\tdown: 40,\n\t\t};\n\n\t\tswitch (e.keyCode)\n\t\t{\n\t\t\tdefault:\n\t\t\t\t// do nothing\n\t\t\t\tbreak;\n\n\t\t\tcase keys.tab:\n\t\t\t{\n\t\t\t\tif (!this.isCheckList())\n\t\t\t\t{\n\t\t\t\t\t(e.shiftKey ? this.tabOut.bind(this) : this.tabIn.bind(this))();\n\t\t\t\t}\n\t\t\t\tthis.retrieveFocus();\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase keys.up:\n\t\t\t{\n\t\t\t\tconst leftSiblingThrough = this.getLeftSiblingThrough();\n\t\t\t\tif (leftSiblingThrough && leftSiblingThrough !== this.getRootNode())\n\t\t\t\t{\n\t\t\t\t\tleftSiblingThrough.toggleUpdateMode(e);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase keys.down:\n\t\t\t{\n\t\t\t\tconst rightSiblingThrough = this.getRightSiblingThrough();\n\t\t\t\tif (rightSiblingThrough)\n\t\t\t\t{\n\t\t\t\t\trightSiblingThrough.toggleUpdateMode(e);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tonHeaderMouseDown(e)\n\t{\n\t\tthis.clickEventHandler.handleMouseDown(e);\n\t\tthis.clickEventHandler.registerClickDoneCallback(this.onHeaderClickDone.bind(this, e));\n\t}\n\n\tonHeaderMouseUp(e)\n\t{\n\t\tthis.clickEventHandler.handleMouseUp(e);\n\t}\n\n\tonHeaderClickDone(e)\n\t{\n\t\tif (!this.checkCanUpdate() || this.checkSkipUpdate(e, 'header'))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.toggleUpdateMode(e);\n\t}\n\n\tonInnerContainerMouseDown(e)\n\t{\n\t\tthis.clickEventHandler.handleMouseDown(e);\n\t\tthis.clickEventHandler.registerClickDoneCallback(this.onInnerContainerClickDone.bind(this, e));\n\t}\n\n\tonInnerContainerMouseUp(e)\n\t{\n\t\tthis.clickEventHandler.handleMouseUp(e);\n\t}\n\n\tonInnerContainerClickDone(e)\n\t{\n\t\tif (!this.checkCanUpdate() || this.checkSkipUpdate(e, 'item'))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.getCheckList().fields.getIsSelected())\n\t\t{\n\t\t\tthis.toggleSelect(e);\n\t\t\treturn;\n\t\t}\n\n\t\tthis.toggleUpdateMode(e);\n\t}\n\n\tgetImportantLayout()\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"tasks-checklist-item-important\" onclick=\"${this.onImportantClick.bind(this)}\"></div>\n\t\t`;\n\t}\n\n\ttoggleImportant()\n\t{\n\t\tif (this.fields.getIsImportant())\n\t\t{\n\t\t\tthis.fields.setIsImportant(false);\n\t\t\tDom.remove(this.container.querySelector('.tasks-checklist-item-important'));\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.fields.setIsImportant(true);\n\t\t\tDom.insertBefore(this.getImportantLayout(), this.container.querySelector('.tasks-checklist-item-description'));\n\t\t}\n\n\t\tEventEmitter.emit('BX.Tasks.CheckListItem:CheckListChanged', {action: 'toggleImportant'});\n\n\t\tthis.retrieveFocus();\n\t}\n\n\tcheckSelectedItems()\n\t{\n\t\treturn this.getRootNode().getSelectedItems().length > 0;\n\t}\n\n\trunForEachSelectedItem(callback, reverse = false)\n\t{\n\t\tlet selectedItems = this.getRootNode().getSelectedItems();\n\n\t\tif (reverse)\n\t\t{\n\t\t\tselectedItems = [...selectedItems.reverse()];\n\t\t}\n\n\t\tselectedItems.forEach((item) => {\n\t\t\tcallback(item);\n\t\t});\n\t}\n\n\tonImportantClick(e)\n\t{\n\t\tif (!this.checkCanUpdate())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.checkSelectedItems())\n\t\t{\n\t\t\tthis.runForEachSelectedItem((selectedItem) => {\n\t\t\t\tselectedItem.toggleImportant();\n\t\t\t});\n\n\t\t\treturn;\n\t\t}\n\n\t\tthis.toggleImportant();\n\n\t\tconst panelImportantButton = e.target.closest('.tasks-checklist-item-editor-panel-btn-important');\n\t\tif (panelImportantButton)\n\t\t{\n\t\t\tDom.toggleClass(panelImportantButton, 'tasks-checklist-item-editor-panel-btn-important-selected');\n\t\t}\n\t}\n\n\tonCompleteButtonClick()\n\t{\n\t\tif (\n\t\t\tthis.getCheckList().fields.getIsSelected()\n\t\t\t|| this.updateMode\n\t\t\t|| !this.checkCanToggle()\n\t\t)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.toggleComplete();\n\t}\n\n\ttoggleComplete()\n\t{\n\t\tconst isComplete = this.fields.getIsComplete();\n\n\t\tthis.fields.setIsComplete(!isComplete);\n\t\tthis.getParent().updateCounts();\n\t\tthis.getParent().updateProgress();\n\n\t\tDom.toggleClass(this.getInnerContainer(), this.checkedClass);\n\n\t\tthis.handleCheckListChanges();\n\t\tthis.handleTaskOptions();\n\n\t\tthis.runAjaxToggleComplete();\n\t}\n\n\trunAjaxToggleComplete()\n\t{\n\t\tconst id = this.fields.getId();\n\n\t\tif (!id)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst data = {};\n\t\tconst {ajaxActions, entityId, entityType, stableTreeStructure} = this.optionManager;\n\t\tconst actionName = (this.fields.getIsComplete() ? ajaxActions.COMPLETE : ajaxActions.RENEW);\n\n\t\tdata[`${entityType.toLowerCase()}Id`] = entityId;\n\t\tdata.checkListItemId = id;\n\n\t\tBX.ajax.runAction(actionName, {data}).then((response) => {\n\t\t\tconst {isComplete} = response.data.checkListItem;\n\t\t\tthis.updateStableTreeStructure(isComplete, stableTreeStructure, stableTreeStructure);\n\t\t});\n\t}\n\n\tupdateStableTreeStructure(isComplete, item, parent)\n\t{\n\t\tif (this.fields.getId() === item.FIELDS.id)\n\t\t{\n\t\t\titem.FIELDS.isComplete = isComplete;\n\t\t\tparent.FIELDS.completedCount += (isComplete ? 1 : -1);\n\n\t\t\treturn this;\n\t\t}\n\n\t\tlet found = null;\n\t\titem.DESCENDANTS.forEach((descendant) => {\n\t\t\tif (found === null)\n\t\t\t{\n\t\t\t\tfound = this.updateStableTreeStructure(isComplete, descendant, item);\n\t\t\t}\n\t\t});\n\n\t\treturn found;\n\t}\n\n\tunselectAll()\n\t{\n\t\tconst checkBox = this.container.querySelector(`#select_${this.getNodeId()}`);\n\n\t\tif (checkBox && checkBox.checked === true)\n\t\t{\n\t\t\tthis.fields.setIsSelected(false);\n\n\t\t\tcheckBox.checked = false;\n\t\t\tDom.removeClass(this.getInnerContainer(), 'tasks-checklist-item-selected');\n\t\t}\n\n\t\tthis.getDescendants().forEach((descendant) => {\n\t\t\tdescendant.unselectAll();\n\t\t});\n\t}\n\n\tgetSelected()\n\t{\n\t\tlet selected = [];\n\n\t\tif (this.fields.getIsSelected())\n\t\t{\n\t\t\tselected.push(this);\n\t\t}\n\n\t\tthis.getDescendants().forEach((descendant) => {\n\t\t\tselected = [...selected, ...descendant.getSelected()];\n\t\t});\n\n\t\treturn selected;\n\t}\n\n\tgetSelectedItems()\n\t{\n\t\treturn this.getSelected().filter(item => !item.isCheckList() && !item.isTaskRoot());\n\t}\n\n\tonSelectCheckboxClick(e)\n\t{\n\t\tif (!this.checkCanUpdate())\n\t\t{\n\t\t\te.target.checked = false;\n\t\t\treturn;\n\t\t}\n\n\t\tthis.toggleSelect();\n\t}\n\n\ttoggleSelect()\n\t{\n\t\tconst rootNode = this.getRootNode();\n\n\t\tif (this.fields.getIsSelected())\n\t\t{\n\t\t\tthis.container.querySelector(`#select_${this.getNodeId()}`).checked = false;\n\t\t\tthis.fields.setIsSelected(false);\n\n\t\t\trootNode.showEditorPanel(rootNode, this.container);\n\n\t\t\tif (!this.checkSelectedItems())\n\t\t\t{\n\t\t\t\tDom.hide(rootNode.panel);\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.container.querySelector(`#select_${this.getNodeId()}`).checked = true;\n\t\t\tthis.fields.setIsSelected(true);\n\n\t\t\trootNode.showEditorPanel(rootNode, this.container);\n\t\t}\n\n\t\tDom.toggleClass(this.getInnerContainer(), 'tasks-checklist-item-selected');\n\t}\n\n\tonGroupButtonClick()\n\t{\n\t\tif (!this.getRootNode().checkActiveUpdateExist())\n\t\t{\n\t\t\tthis.toggleGroup();\n\t\t}\n\t}\n\n\ttoggleGroup()\n\t{\n\t\tif (this.fields.getIsSelected())\n\t\t{\n\t\t\tthis.unselectAll();\n\t\t\tthis.fields.setIsSelected(false);\n\n\t\t\tif (!this.checkSelectedItems())\n\t\t\t{\n\t\t\t\tDom.hide(this.getRootNode().panel);\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.fields.setIsSelected(true);\n\n\t\t\tif (this.fields.getIsCollapse())\n\t\t\t{\n\t\t\t\tthis.toggleCollapse();\n\t\t\t}\n\t\t}\n\n\t\tDom.toggleClass(this.container, 'tasks-checklist-item-group-editor-collapse');\n\t\tDom.toggleClass(this.container, 'tasks-checklist-item-group-editor-expand');\n\t}\n\n\tonCollapseButtonClick()\n\t{\n\t\tif (this.collapseFreezed)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.toggleCollapse();\n\t}\n\n\ttoggleCollapse()\n\t{\n\t\tthis.collapseFreezed = true;\n\n\t\tconst wrapperList = this.container.querySelector(`.${this.wrapperClass}`);\n\t\tconst wrapperListHeight = `${Dom.getPosition(wrapperList).height}px`;\n\n\t\tif (!Dom.hasClass(this.container, this.collapseClass))\n\t\t{\n\t\t\tthis.fields.setIsCollapse(true);\n\n\t\t\twrapperList.style.overflow = 'hidden';\n\t\t\twrapperList.style.height = wrapperListHeight;\n\t\t\tsetTimeout(() => { wrapperList.style.height = 0; }, 0);\n\n\t\t\tDom.addClass(this.container, this.collapseClass);\n\n\t\t\tthis.collapseFreezed = false;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.fields.setIsCollapse(false);\n\n\t\t\twrapperList.style.height = 0;\n\t\t\twrapperList.style.height = `${wrapperList.scrollHeight}px`;\n\n\t\t\tconst setAutoHeight = () => {\n\t\t\t\twrapperList.style.height = 'auto';\n\t\t\t\tBX.unbind(wrapperList, 'transitionend', setAutoHeight);\n\n\t\t\t\tthis.collapseFreezed = false;\n\t\t\t};\n\t\t\tBX.bind(wrapperList, 'transitionend', setAutoHeight);\n\n\t\t\tDom.removeClass(this.container, this.collapseClass);\n\t\t}\n\t}\n\n\ttoggleEmpty()\n\t{\n\t\tDom.toggleClass(this.container, 'tasks-checklist-empty');\n\t}\n\n\thandleCheckListIsComplete()\n\t{\n\t\tconst checkList = this.getCheckList();\n\t\tconst checkListIsComplete = checkList.checkIsComplete();\n\n\t\tcheckList.fields.setIsComplete(checkListIsComplete);\n\n\t\tif (checkListIsComplete && !Dom.hasClass(checkList.container, 'tasks-checklist-collapse'))\n\t\t{\n\t\t\tcheckList.toggleCollapse();\n\t\t}\n\t}\n\n\thandleCheckListIsEmpty()\n\t{\n\t\tconst checkList = this.getCheckList();\n\t\tconst checkListIsEmpty = checkList.getDescendantsCount() === 0;\n\n\t\tif (\n\t\t\t(checkListIsEmpty && !Dom.hasClass(checkList.container, 'tasks-checklist-empty'))\n\t\t\t|| (!checkListIsEmpty && Dom.hasClass(checkList.container, 'tasks-checklist-empty'))\n\t\t)\n\t\t{\n\t\t\tcheckList.toggleEmpty();\n\t\t}\n\t}\n\n\thandleCheckListChanges()\n\t{\n\t\tthis.handleCheckListIsComplete();\n\t\tthis.handleCheckListIsEmpty();\n\t}\n\n\tcheckSkipUpdate(e, area)\n\t{\n\t\treturn this.skipUpdateClasses[area]\n\t\t\t&& this.skipUpdateClasses[area].find(item => e.target.closest(item));\n\t}\n\n\tcheckCanAdd()\n\t{\n\t\treturn this.optionManager.getCanAdd();\n\t}\n\n\tcheckCanAddAccomplice()\n\t{\n\t\treturn this.optionManager.getCanAddAccomplice();\n\t}\n\n\tcheckCanUpdate()\n\t{\n\t\treturn this.action.canUpdate;\n\t}\n\n\tcheckCanRemove()\n\t{\n\t\treturn this.action.canRemove;\n\t}\n\n\tcheckCanToggle()\n\t{\n\t\treturn this.action.canToggle;\n\t}\n\n\tcheckCanDrag()\n\t{\n\t\treturn this.action.canDrag;\n\t}\n\n\tgetTitleNodeClass()\n\t{\n\t\treturn (this.isCheckList() ? 'tasks-checklist-header-name-text' : 'tasks-checklist-item-description-text');\n\t}\n\n\tgetTitleNodeContainer()\n\t{\n\t\treturn this.container.querySelector(`.${this.getTitleNodeClass()}`);\n\t}\n\n\tgetAttachmentsContainer()\n\t{\n\t\treturn this.container.querySelector(`#attachments_${this.getNodeId()}`);\n\t}\n\n\tgetSubItemsContainer()\n\t{\n\t\treturn this.container.querySelector(`#subItems_${this.getNodeId()}`);\n\t}\n\n\tgetInnerContainer()\n\t{\n\t\treturn this.container.querySelector(this.isCheckList() ? '.tasks-checklist-header-name' : '.tasks-checklist-item-inner');\n\t}\n\n\tgetContainer()\n\t{\n\t\treturn this.container;\n\t}\n\n\tmove(item, position = 'bottom', action = 'move')\n\t{\n\t\tif (\n\t\t\tthis.getNodeId() === item.getNodeId()\n\t\t\t|| this.findChild(item.getNodeId()) !== null\n\t\t)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst oldParent = this.getParent();\n\t\tconst newParent = item.getParent();\n\n\t\toldParent.remove(this);\n\n\t\tif (position === 'top')\n\t\t{\n\t\t\tnewParent.addBefore(this, item);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tnewParent.addAfter(this, item);\n\t\t}\n\n\t\tCheckListItem.updateParents(oldParent, newParent);\n\n\t\tif (position === 'top')\n\t\t{\n\t\t\tDom.insertBefore(this.container, item.container);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.insertAfter(this.container, item.container);\n\t\t}\n\n\t\tthis.handleCheckListIsEmpty();\n\t\tthis.handleTaskOptions();\n\n\t\tEventEmitter.emit('BX.Tasks.CheckListItem:CheckListChanged', {action});\n\t}\n\n\tmakeChildOf(item, position = 'bottom', action = 'makeChildOf')\n\t{\n\t\tif (item.getDescendantsCount() > 0)\n\t\t{\n\t\t\tconst borderItems = {\n\t\t\t\ttop: item.getFirstDescendant(),\n\t\t\t\tbottom: item.getLastDescendant(),\n\t\t\t};\n\n\t\t\tthis.move(borderItems[position], position, action);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tconst oldParent = this.getParent();\n\t\t\tconst newParent = item;\n\n\t\t\toldParent.remove(this);\n\t\t\tnewParent.add(this);\n\n\t\t\tCheckListItem.updateParents(oldParent, newParent);\n\n\t\t\tDom.append(this.container, newParent.getSubItemsContainer());\n\t\t\tDom.addClass(this.container, 'mobile-task-checklist-item-wrapper-animate');\n\n\t\t\tthis.handleCheckListIsEmpty();\n\t\t\tthis.handleTaskOptions();\n\n\t\t\tEventEmitter.emit('BX.Tasks.CheckListItem:CheckListChanged', {action});\n\t\t}\n\t}\n\n\ttabIn()\n\t{\n\t\tif (!this.isFirstDescendant())\n\t\t{\n\t\t\tthis.makeChildOf(this.getLeftSibling(), 'bottom', 'tabIn');\n\t\t}\n\t}\n\n\tonTabInClick()\n\t{\n\t\tif (this.checkSelectedItems())\n\t\t{\n\t\t\tthis.runForEachSelectedItem((selectedItem) => {\n\t\t\t\tselectedItem.tabIn();\n\t\t\t});\n\n\t\t\treturn;\n\t\t}\n\n\t\tthis.tabIn();\n\t\tthis.retrieveFocus();\n\t}\n\n\ttabOut()\n\t{\n\t\tconst parent = this.getParent();\n\n\t\tif (parent.isCheckList())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.move(parent, 'bottom', 'tabOut');\n\t}\n\n\tonTabOutClick()\n\t{\n\t\tif (this.checkSelectedItems())\n\t\t{\n\t\t\tthis.runForEachSelectedItem((selectedItem) => {\n\t\t\t\tselectedItem.tabOut();\n\t\t\t}, true);\n\n\t\t\treturn;\n\t\t}\n\n\t\tthis.tabOut();\n\t\tthis.retrieveFocus();\n\t}\n\n\taddCheckListItem(item = null, dependsOn = null, position = 'after')\n\t{\n\t\tconst itemGet = item instanceof this.class;\n\n\t\treturn new Promise((resolve) => {\n\t\t\tconst newCheckListItem = item || new this.class();\n\t\t\tlet newCheckListItemLayout;\n\n\t\t\tif (dependsOn instanceof this.class)\n\t\t\t{\n\t\t\t\tif (position === 'before')\n\t\t\t\t{\n\t\t\t\t\tthis.addBefore(newCheckListItem, dependsOn);\n\n\t\t\t\t\tnewCheckListItemLayout = newCheckListItem.getLayout();\n\t\t\t\t\tthis.setDefaultStyles(newCheckListItemLayout);\n\n\t\t\t\t\tDom.insertBefore(newCheckListItemLayout, dependsOn.container);\n\t\t\t\t}\n\t\t\t\telse if (position === 'after')\n\t\t\t\t{\n\t\t\t\t\tthis.addAfter(newCheckListItem, dependsOn);\n\n\t\t\t\t\tnewCheckListItemLayout = newCheckListItem.getLayout();\n\t\t\t\t\tthis.setDefaultStyles(newCheckListItemLayout);\n\n\t\t\t\t\tDom.insertAfter(newCheckListItemLayout, dependsOn.container);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.add(newCheckListItem);\n\n\t\t\t\tnewCheckListItemLayout = newCheckListItem.getLayout();\n\t\t\t\tthis.setDefaultStyles(newCheckListItemLayout);\n\n\t\t\t\tDom.append(newCheckListItemLayout, this.getSubItemsContainer());\n\t\t\t}\n\n\t\t\tthis.updateCounts();\n\t\t\tthis.updateIndexes();\n\n\t\t\tif (!this.isTaskRoot())\n\t\t\t{\n\t\t\t\tthis.updateProgress();\n\t\t\t\tthis.handleCheckListIsEmpty();\n\n\t\t\t\tif (!itemGet)\n\t\t\t\t{\n\t\t\t\t\tnewCheckListItem.toggleUpdateMode();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tsetTimeout(() => {\n\t\t\t\tnewCheckListItemLayout.style.height = `${newCheckListItemLayout.scrollHeight}px`;\n\t\t\t\tnewCheckListItemLayout.style.opacity = 1;\n\t\t\t}, 1);\n\n\t\t\tsetTimeout(() => {\n\t\t\t\tnewCheckListItemLayout.style.overflow = '';\n\t\t\t\tnewCheckListItemLayout.style.height = '';\n\t\t\t\tnewCheckListItemLayout.style.opacity = '';\n\n\t\t\t\tDom.removeClass(newCheckListItemLayout, this.showClass);\n\n\t\t\t\tif (!this.isTaskRoot() && !itemGet && newCheckListItem.input !== null)\n\t\t\t\t{\n\t\t\t\t\tthis.class.smoothScroll(newCheckListItem.getContainer());\n\t\t\t\t}\n\n\t\t\t\tresolve(newCheckListItem);\n\t\t\t}, 250);\n\t\t});\n\t}\n\n\tonAddCheckListItemClick()\n\t{\n\t\tif (this.getRootNode().checkActiveUpdateExist())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.addCheckListItem();\n\t}\n\n\tgetItemRequestData()\n\t{\n\t\tconst itemRequestData = {\n\t\t\tNODE_ID: this.getNodeId(),\n\t\t\tPARENT_NODE_ID: this.getParent().getNodeId(),\n\t\t\tID: this.fields.getId(),\n\t\t\tCOPIED_ID: this.fields.getCopiedId(),\n\t\t\tPARENT_ID: this.fields.getParentId(),\n\t\t\tTITLE: Text.decode(this.fields.getTitle()),\n\t\t\tSORT_INDEX: this.fields.getSortIndex(),\n\t\t\tIS_COMPLETE: this.fields.getIsComplete(),\n\t\t\tIS_IMPORTANT: this.fields.getIsImportant(),\n\t\t\tMEMBERS: [],\n\t\t\tATTACHMENTS: {},\n\t\t};\n\n\t\tthis.fields.getMembers().forEach((value, key) => {\n\t\t\tconst {nameFormatted, type} = value;\n\t\t\titemRequestData.MEMBERS.push({\n\t\t\t\t[key]: {\n\t\t\t\t\tTYPE: type,\n\t\t\t\t\tNAME: Text.decode(nameFormatted),\n\t\t\t\t},\n\t\t\t});\n\t\t});\n\n\t\tconst attachments = this.fields.getAttachments();\n\t\tObject.keys(attachments).forEach((id) => {\n\t\t\titemRequestData.ATTACHMENTS[id] = attachments[id];\n\t\t});\n\n\t\treturn itemRequestData;\n\t}\n\n\tgetRequestData(inputData = null)\n\t{\n\t\tconst title = this.fields.getTitle();\n\t\tlet data = inputData || [];\n\n\t\tif (!this.isTaskRoot() && title !== '' && title.length > 0)\n\t\t{\n\t\t\tdata.push(this.getItemRequestData());\n\t\t}\n\n\t\tthis.getDescendants().forEach((descendant) => {\n\t\t\tdata = descendant.getRequestData(data);\n\t\t});\n\n\t\treturn data;\n\t}\n\n\tappendRequestLayout()\n\t{\n\t\tif (!this.isTaskRoot())\n\t\t{\n\t\t\tconst nodeId = this.getNodeId();\n\t\t\tconst attachments = this.fields.getAttachments();\n\t\t\tconst prefix = `${this.optionManager.prefix}[${nodeId}]`;\n\n\t\t\tlet membersLayout = '';\n\t\t\tlet attachmentsLayout = '';\n\n\t\t\tthis.fields.getMembers().forEach((value, key) => {\n\t\t\t\tmembersLayout += `<input type=\"hidden\" id=\"MEMBERS_TYPE_${key}\" name=\"${prefix}[MEMBERS][${key}][TYPE]\" value=\"${value.type}\"/>`;\n\t\t\t\tmembersLayout += `<input type=\"hidden\" id=\"MEMBERS_NAME_${key}\" name=\"${prefix}[MEMBERS][${key}][NAME]\" value=\"${value.nameFormatted}\"/>`;\n\t\t\t});\n\n\t\t\tObject.keys(attachments).forEach((id) => {\n\t\t\t\tattachmentsLayout += `<input type=\"hidden\" id=\"ATTACHMENTS_${id}\" name=\"${prefix}[ATTACHMENTS][${id}]\" value=\"${attachments[id]}\"/>`;\n\t\t\t});\n\n\t\t\tconst requestLayout = Tag.render`\n\t\t\t\t<div id=\"request_${nodeId}\">\n\t\t\t\t\t<input type=\"hidden\" id=\"NODE_ID\" name=\"${prefix}[NODE_ID]\" value=\"${nodeId}\"/>\n\t\t\t\t\t<input type=\"hidden\" id=\"PARENT_NODE_ID\" name=\"${prefix}[PARENT_NODE_ID]\" value=\"${this.getParent().getNodeId()}\"/>\n\t\t\t\t\t<input type=\"hidden\" id=\"ID\" name=\"${prefix}[ID]\" value=\"${this.fields.getId()}\"/>\n\t\t\t\t\t<input type=\"hidden\" id=\"COPIED_ID\" name=\"${prefix}[COPIED_ID]\" value=\"${this.fields.getCopiedId()}\"/>\n\t\t\t\t\t<input type=\"hidden\" id=\"PARENT_ID\" name=\"${prefix}[PARENT_ID]\" value=\"${this.fields.getParentId()}\"/>\n\t\t\t\t\t<input type=\"hidden\" id=\"TITLE\" name=\"${prefix}[TITLE]\" value=\"${this.fields.getTitle()}\"/>\n\t\t\t\t\t<input type=\"hidden\" id=\"SORT_INDEX\" name=\"${prefix}[SORT_INDEX]\" value=\"${this.fields.getSortIndex()}\"/>\n\t\t\t\t\t<input type=\"hidden\" id=\"IS_COMPLETE\" name=\"${prefix}[IS_COMPLETE]\" value=\"${this.fields.getIsComplete()}\"/>\n\t\t\t\t\t<input type=\"hidden\" id=\"IS_IMPORTANT\" name=\"${prefix}[IS_IMPORTANT]\" value=\"${this.fields.getIsImportant()}\"/>\n\t\t\t\t\t<input type=\"hidden\" id=\"MODIFY\" name=\"${prefix}[ACTION][MODIFY]\" value=\"${this.checkCanUpdate()}\"/>\n\t\t\t\t\t<input type=\"hidden\" id=\"REMOVE\" name=\"${prefix}[ACTION][REMOVE]\" value=\"${this.checkCanRemove()}\"/>\n\t\t\t\t\t<input type=\"hidden\" id=\"TOGGLE\" name=\"${prefix}[ACTION][TOGGLE]\" value=\"${this.checkCanToggle()}\"/>\n\t\t\t\t\t${membersLayout}\n\t\t\t\t\t${attachmentsLayout}\n\t\t\t\t</div>\n\t\t\t`;\n\n\t\t\tDom.remove(this.container.querySelector(`#request_${nodeId}`));\n\t\t\tDom.append(requestLayout, this.container);\n\t\t}\n\n\t\tthis.getDescendants().forEach((descendant) => {\n\t\t\tdescendant.appendRequestLayout();\n\t\t});\n\t}\n\n\tgetAttachmentsLayout()\n\t{\n\t\tconst searchId = this.fields.getId() || this.fields.getCopiedId();\n\t\tconst {optionManager} = this;\n\t\tconst optionAttachments = optionManager.attachments;\n\t\tlet attachmentsLayout = '';\n\n\t\tif (optionAttachments && (searchId in optionAttachments))\n\t\t{\n\t\t\tconst attachments = Tag.render`${optionAttachments[searchId]}`;\n\t\t\tconst stableAttachments = this.getStableAttachments(optionManager.getStableTreeStructure());\n\t\t\tconst attachmentsToDelete = [];\n\n\t\t\tif (!attachments)\n\t\t\t{\n\t\t\t\treturn attachmentsLayout;\n\t\t\t}\n\n\t\t\tattachmentsLayout = attachments;\n\n\t\t\tif (!Array.isArray(attachments))\n\t\t\t{\n\t\t\t\tattachmentsLayout = [attachments];\n\t\t\t}\n\n\t\t\tObject.keys(attachmentsLayout).forEach((key) => {\n\t\t\t\tconst attachment = attachmentsLayout[key];\n\t\t\t\tconst fileId = attachment.getAttribute('data-bx-id');\n\t\t\t\tconst extension = CheckListItem.getFileExtension(attachment.getAttribute('data-bx-extension'));\n\t\t\t\tconst extensionClass = `ui-icon-file-${extension}`;\n\t\t\t\tconst iconContainer = attachment.querySelector(`#disk-attach-file-${fileId}`);\n\t\t\t\tconst deleteButton = Tag.render`\n\t\t\t\t\t<div class=\"tasks-checklist-item-attachment-file-remove\"\n\t\t\t\t\t\t onclick=\"${this.onDeleteAttachmentClick.bind(this, fileId)}\"></div>\n\t\t\t\t`;\n\t\t\t\tconst has = Object.prototype.hasOwnProperty;\n\n\t\t\t\tif (!has.call(stableAttachments, fileId))\n\t\t\t\t{\n\t\t\t\t\tattachmentsToDelete.push(key);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (iconContainer && !Dom.hasClass(iconContainer, extensionClass))\n\t\t\t\t{\n\t\t\t\t\tDom.addClass(iconContainer, extensionClass);\n\t\t\t\t}\n\n\t\t\t\tif (this.checkCanUpdate())\n\t\t\t\t{\n\t\t\t\t\tDom.append(deleteButton, attachment.querySelector('.tasks-checklist-item-attachment-file-cover'));\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tattachmentsToDelete.sort((a, b) => b - a);\n\t\t\tattachmentsToDelete.forEach((id) => {\n\t\t\t\tattachmentsLayout.splice(id, 1);\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.fields.setAttachments({});\n\t\t}\n\n\t\treturn attachmentsLayout;\n\t}\n\n\tgetStableAttachments(item)\n\t{\n\t\tconst fields = item.FIELDS;\n\t\tconst id = fields.id || fields.copiedId;\n\n\t\tif (id === this.fields.getId() || id === this.fields.getCopiedId())\n\t\t{\n\t\t\treturn fields.attachments;\n\t\t}\n\n\t\tlet found = null;\n\t\titem.DESCENDANTS.forEach((descendant) => {\n\t\t\tif (found === null)\n\t\t\t{\n\t\t\t\tfound = this.getStableAttachments(descendant);\n\t\t\t}\n\t\t});\n\n\t\treturn found;\n\t}\n\n\tgetLoadedAttachmentLayout(attachment)\n\t{\n\t\tconst {id, name, viewUrl, size, ext} = attachment;\n\t\tlet img = '';\n\n\t\tif (viewUrl)\n\t\t{\n\t\t\timg = Tag.render`\n\t\t\t\t<div class=\"tasks-checklist-item-attachment-file-cover\" style=\"background-image: url(${viewUrl})\">\n\t\t\t\t\t<div class=\"tasks-checklist-item-attachment-file-remove\" onclick=\"${this.onDeleteAttachmentClick.bind(this, id)}\"></div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tconst extension = CheckListItem.getFileExtension(ext);\n\n\t\t\timg = Tag.render`\n\t\t\t\t<div class=\"tasks-checklist-item-attachment-file-cover\">\n\t\t\t\t\t<div class=\"ui-icon ui-icon-file-${extension}\"><i></i></div>\n\t\t\t\t\t<div class=\"tasks-checklist-item-attachment-file-remove\" onclick=\"${this.onDeleteAttachmentClick.bind(this, id)}\"></div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"tasks-checklist-item-attachment-file\" id=\"disk-attach-${id}\" data-bx-id=\"${id}\">\n\t\t\t\t${img}\n\t\t\t\t<div class=\"tasks-checklist-item-attachment-file-name\">\n\t\t\t\t\t<label class=\"tasks-checklist-item-attachment-file-name-text\" title=\"${name}\">${name}</label>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"tasks-checklist-item-attachment-file-size\">\n\t\t\t\t\t<label class=\"tasks-checklist-item-attachment-file-size-text\">${size}</label>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tonAttachmentsLoaderMenuItemClick()\n\t{\n\t\tif (this.filesLoaderPopup !== null)\n\t\t{\n\t\t\tthis.filesLoaderPopup.close();\n\t\t}\n\t}\n\n\tgetAttachmentsLoaderLayout()\n\t{\n\t\tconst nodeId = this.getNodeId();\n\t\tconst {prefix} = this.optionManager;\n\t\tconst filesChooser = Tag.render`\n\t\t\t<div id=\"files_chooser\">\n\t\t\t\t<div id=\"diskuf-selectdialog-${nodeId}\" class=\"diskuf-files-entity diskuf-selectdialog bx-disk\">\n\t\t\t\t\t<div class=\"diskuf-files-block tasks-checklist-loader-files\">\n\t\t\t\t\t\t<div class=\"diskuf-placeholder\">\n\t\t\t\t\t\t\t<table class=\"files-list\">\n\t\t\t\t\t\t\t\t<tbody class=\"diskuf-placeholder-tbody\"></tbody>\n\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"diskuf-extended\" style=\"display: block\">\n\t\t\t\t\t\t<input type=\"hidden\" name=\"${prefix}[${nodeId}][UF_CHECKLIST_FILES][]\" value=\"\"/>\n\t\t\t\t\t\t<div class=\"diskuf-extended-item\">\n\t\t\t\t\t\t\t<label for=\"file_loader_${nodeId}\" onclick=\"${this.onAttachmentsLoaderMenuItemClick.bind(this)}\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('TASKS_CHECKLIST_FILES_LOADER_POPUP_FROM_COMPUTER')}\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t<input class=\"diskuf-fileUploader\" id=\"file_loader_${nodeId}\" type=\"file\"\n\t\t\t\t\t\t\t\t   multiple=\"multiple\" size=\"1\" style=\"display: none\"/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"diskuf-extended-item\" onclick=\"${this.onAttachmentsLoaderMenuItemClick.bind(this)}\">\n\t\t\t\t\t\t\t<span class=\"diskuf-selector-link\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('TASKS_CHECKLIST_FILES_LOADER_POPUP_FROM_B24')}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"diskuf-extended-item\" onclick=\"${this.onAttachmentsLoaderMenuItemClick.bind(this)}\">\n\t\t\t\t\t\t\t<span class=\"diskuf-selector-link-cloud\" data-bx-doc-handler=\"gdrive\">\n\t\t\t\t\t\t\t\t<span>${Loc.getMessage('TASKS_CHECKLIST_FILES_LOADER_POPUP_FROM_CLOUD')}</span>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\tBX.addCustomEvent(filesChooser, 'OnFileUploadSuccess', this.OnFileUploadSuccess.bind(this));\n\t\tBX.addCustomEvent(filesChooser, 'DiskDLoadFormControllerInit', (uf) => {\n\t\t\tuf._onUploadProgress = this.onUploadProgress.bind(this);\n\t\t});\n\n\t\treturn filesChooser;\n\t}\n\n\tonUploadProgress(item, progress)\n\t{\n\t\tconst {id, name, size} = item;\n\t\tconst newProgress = Math.min(progress, 98);\n\n\t\tif (!this.filesLoaderProgressBars.has(id))\n\t\t{\n\t\t\tconst myProgress = new BX.UI.ProgressRound({\n\t\t\t\tid: `load_progress_${id}`,\n\t\t\t\tvalue: newProgress,\n\t\t\t\tmaxValue: 100,\n\t\t\t\twidth: 69,\n\t\t\t\tlineSize: 5,\n\t\t\t\tfill: false,\n\t\t\t\tcolor: BX.UI.ProgressRound.Color.PRIMARY,\n\t\t\t\tstatusType: BX.UI.ProgressRound.Status.INCIRCLE,\n\t\t\t});\n\t\t\tconst filePreview = Tag.render`\n\t\t\t\t<div class=\"tasks-checklist-item-attachment-file\" id=\"disk-attach-${id}\">\n\t\t\t\t\t${myProgress.getContainer()}\n\t\t\t\t\t<div class=\"tasks-checklist-item-attachment-file-name\">\n\t\t\t\t\t\t<label class=\"tasks-checklist-item-attachment-file-name-text\" title=\"${name}\">${name}</label>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"tasks-checklist-item-attachment-file-size\">\n\t\t\t\t\t\t<label class=\"tasks-checklist-item-attachment-file-size-text\">${size}</label>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\n\t\t\tthis.filesLoaderProgressBars.set(id, myProgress);\n\t\t\tDom.append(filePreview, this.getAttachmentsContainer());\n\t\t}\n\n\t\tif (!item.progressBarWidth)\n\t\t{\n\t\t\titem.progressBarWidth = 5;\n\t\t}\n\n\t\tif (newProgress > item.progressBarWidth)\n\t\t{\n\t\t\titem.progressBarWidth = Math.ceil(newProgress);\n\t\t\titem.progressBarWidth = item.progressBarWidth > 100 ? 100 : item.progressBarWidth;\n\n\t\t\tif (this.filesLoaderProgressBars.has(id))\n\t\t\t{\n\t\t\t\tthis.filesLoaderProgressBars.get(id).update(item.progressBarWidth);\n\t\t\t}\n\t\t}\n\t}\n\n\tOnFileUploadSuccess(fileResult, uf, file, uploaderFile)\n\t{\n\t\tif (typeof file === 'undefined' || typeof uploaderFile === 'undefined')\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst attachmentId = fileResult.element_id.toString();\n\t\tconst attachment = {\n\t\t\tid: attachmentId,\n\t\t\tname: fileResult.element_name,\n\t\t\tviewUrl: fileResult.element_url,\n\t\t\tsize: uploaderFile.size,\n\t\t\text: uploaderFile.ext,\n\t\t};\n\n\t\tthis.fields.addAttachments({[attachmentId]: attachmentId});\n\t\tthis.filesLoaderProgressBars.delete(uploaderFile.id);\n\n\t\tconst attachmentProgress = this.getAttachmentsContainer().querySelector(`#disk-attach-${uploaderFile.id}`);\n\t\tconst attachmentLayout = this.getLoadedAttachmentLayout(attachment);\n\n\t\tif (attachmentProgress)\n\t\t{\n\t\t\tDom.replace(attachmentProgress, attachmentLayout);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.append(attachmentLayout, this.getAttachmentsContainer());\n\t\t}\n\n\t\tconst id = this.fields.getId();\n\t\tconst optionAttachments = this.optionManager.attachments;\n\n\t\tif (optionAttachments)\n\t\t{\n\t\t\tif (id in optionAttachments)\n\t\t\t{\n\t\t\t\tthis.optionManager.attachments[id] += attachmentLayout.outerHTML;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.optionManager.attachments[id] = attachmentLayout.outerHTML;\n\t\t\t}\n\t\t}\n\n\t\tEventEmitter.emit('BX.Tasks.CheckListItem:CheckListChanged', {action: 'fileUpload'});\n\t}\n\n\tgetTaskRootLayout(children)\n\t{\n\t\tthis.container = Tag.render`\n\t\t\t<div class=\"tasks-checklist-task-root\">\n\t\t\t\t<div id=\"subItems_${this.getNodeId()}\">\n\t\t\t\t\t${children}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\treturn this.container;\n\t}\n\n\tgetCheckListLayout(children)\n\t{\n\t\tconst nodeId = this.getNodeId();\n\t\tconst value = this.fields.getCompletedCount();\n\t\tconst maxValue = this.fields.getTotalCount();\n\t\tconst layouts = {\n\t\t\tlistActionsPanel: Tag.render`<div class=\"tasks-checklist-items-list-actions droppable\"></div>`,\n\t\t\tgroupButton: '',\n\t\t\tdndButton: Tag.render`<div class=\"tasks-checklist-wrapper-dragndrop\"></div>`,\n\t\t};\n\n\t\tif (this.checkCanAdd())\n\t\t{\n\t\t\tconst addButtonLayout = Tag.render`\n\t\t\t\t<a class=\"tasks-checklist-item-add-btn\" onclick=\"${this.onAddCheckListItemClick.bind(this)}\">\n\t\t\t\t\t${Loc.getMessage('TASKS_CHECKLIST_ADD_NEW_ITEM')}\n\t\t\t\t</a>\n\t\t\t`;\n\t\t\tconst groupButton = Tag.render`\n\t\t\t\t<div class=\"tasks-checklist-action-group-btn\" onclick=\"${this.onGroupButtonClick.bind(this)}\">\n\t\t\t\t\t${Loc.getMessage('TASKS_CHECKLIST_GROUP_ACTIONS')}\n\t\t\t\t</div>\n\t\t\t`;\n\n\t\t\tDom.append(addButtonLayout, layouts.listActionsPanel);\n\t\t\tlayouts.groupButton = groupButton;\n\t\t}\n\n\t\tif (this.checkCanRemove())\n\t\t{\n\t\t\tconst removeButtonLayout = Tag.render`\n\t\t\t\t<a class=\"tasks-checklist-item-remove-btn\" onclick=\"${this.onDeleteClick.bind(this)}\">\n\t\t\t\t\t${Loc.getMessage('TASKS_CHECKLIST_DELETE_CHECKLIST')}\n\t\t\t\t</a>\n\t\t\t`;\n\t\t\tDom.append(removeButtonLayout, layouts.listActionsPanel);\n\t\t}\n\n\t\tif (!this.checkCanDrag())\n\t\t{\n\t\t\tlayouts.dndButton.style.visibility = 'hidden';\n\t\t}\n\n\t\tthis.progress = new BX.UI.ProgressBar({\n\t\t\tvalue,\n\t\t\tmaxValue,\n\t\t\tsize: BX.UI.ProgressBar.Size.MEDIUM,\n\t\t\ttextAfter: CheckListItem.getProgressText(value, maxValue),\n\t\t});\n\n\t\tthis.container = Tag.render`\n\t\t\t<div class=\"tasks-checklist-wrapper tasks-checklist-item-group-editor-collapse\" id=\"${nodeId}\">\n\t\t\t\t<div class=\"tasks-checklist-header-wrapper droppable\">\n\t\t\t\t\t${layouts.dndButton}\n\t\t\t\t\t<div class=\"tasks-checklist-header-block\">\n\t\t\t\t\t\t<div class=\"tasks-checklist-header-inner\">\n\t\t\t\t\t\t\t<div class=\"tasks-checklist-header-name\"\n\t\t\t\t\t\t\t\t onmousedown=\"${this.onHeaderMouseDown.bind(this)}\"\n\t\t\t\t\t\t\t\t onmouseup=\"${this.onHeaderMouseUp.bind(this)}\">\n\t\t\t\t\t\t\t\t${this.getTitleLayout()}\n\t\t\t\t\t\t\t\t<div class=\"tasks-checklist-header-name-edit-btn\"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"tasks-checklist-header-progress-block\">\n\t\t\t\t\t\t\t\t<div class=\"tasks-checklist-header-progress\" id=\"progress_${nodeId}\">\n\t\t\t\t\t\t\t\t\t${this.progress.getContainer()}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"tasks-checklist-header-actions\">\n\t\t\t\t\t\t${layouts.groupButton}\n\t\t\t\t\t\t<div class=\"tasks-checklist-action-collapse-btn collapsed\" onclick=\"${this.onCollapseButtonClick.bind(this)}\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"tasks-checklist-items-wrapper\">\n\t\t\t\t\t<div class=\"tasks-checklist-items-list\" id=\"subItems_${nodeId}\">\n\t\t\t\t\t\t${children}\n\t\t\t\t\t</div>\n\t\t\t\t\t${layouts.listActionsPanel}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\treturn this.container;\n\t}\n\n\tgetCheckListItemLayout(children)\n\t{\n\t\tconst nodeId = this.getNodeId();\n\t\tconst layouts = {\n\t\t\tdeleteButton: Tag.render`<button class=\"tasks-checklist-item-remove\" onclick=\"${this.onDeleteClick.bind(this)}\"/>`,\n\t\t\tdndButton: Tag.render`<div class=\"tasks-checklist-item-dragndrop\"></div>`,\n\t\t\tattachments: this.getAttachmentsLayout(),\n\t\t};\n\n\t\tif (!this.checkCanRemove())\n\t\t{\n\t\t\tlayouts.deleteButton = '';\n\t\t}\n\n\t\tif (!this.checkCanDrag())\n\t\t{\n\t\t\tlayouts.dndButton.style.visibility = 'hidden';\n\t\t}\n\n\t\tthis.progress = new BX.UI.ProgressRound({\n\t\t\tid: `progress_${nodeId}`,\n\t\t\tvalue: this.fields.getCompletedCount(),\n\t\t\tmaxValue: this.fields.getTotalCount(),\n\t\t\twidth: 20,\n\t\t\tlineSize: 3,\n\t\t\tfill: false,\n\t\t\tcolor: BX.UI.ProgressRound.Color.PRIMARY,\n\t\t});\n\n\t\tthis.container = Tag.render`\n\t\t\t<div class=\"tasks-checklist-item\" id=\"${nodeId}\">\n\t\t\t\t<div class=\"tasks-checklist-item-inner droppable ${this.fields.getIsComplete() ? 'tasks-checklist-item-solved' : ''}\"\n\t\t\t\t\t onmousedown=\"${this.onInnerContainerMouseDown.bind(this)}\" onmouseup=\"${this.onInnerContainerMouseUp.bind(this)}\">\n\t\t\t\t\t${layouts.dndButton}\n\t\t\t\t\t<div class=\"tasks-checklist-item-flag-block\">\n\t\t\t\t\t\t<div class=\"tasks-checklist-item-flag\">\n\t\t\t\t\t\t\t<label class=\"tasks-checklist-item-flag-element\" onclick=\"${this.onCompleteButtonClick.bind(this)}\">\n\t\t\t\t\t\t\t\t<span class=\"tasks-checklist-item-flag-sub-checklist-progress\" id=\"progress_${nodeId}\">\n\t\t\t\t\t\t\t\t\t${this.progress.getContainer()}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<span class=\"tasks-checklist-item-flag-element-decorate\"/>\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"tasks-checklist-item-content-block\">\n\t\t\t\t\t\t<div class=\"tasks-checklist-item-number\">${this.fields.getDisplaySortIndex()}</div>\n\t\t\t\t\t\t${this.fields.getIsImportant() ? this.getImportantLayout() : ''}\n\t\t\t\t\t\t<div class=\"tasks-checklist-item-description\">\n\t\t\t\t\t\t\t${this.getTitleLayout()}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"tasks-checklist-item-additional-block\">\n\t\t\t\t\t\t${layouts.deleteButton}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"tasks-checklist-item-actions-block\">\n\t\t\t\t\t\t<input class=\"tasks-checklist-item-group-checkbox\" id=\"select_${nodeId}\" type=\"checkbox\"\n\t\t\t\t\t\t\t   onclick=\"${this.onSelectCheckboxClick.bind(this)}\"/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"tasks-checklist-item-attachment\">\n\t\t\t\t\t<div class=\"tasks-checklist-item-attachment-list\" id=\"attachments_${nodeId}\">\n\t\t\t\t\t\t${layouts.attachments}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"tasks-checklist-sublist-items-wrapper\" id=\"subItems_${nodeId}\">\n\t\t\t\t\t${children}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\treturn this.container;\n\t}\n\n\tgetLayout()\n\t{\n\t\tconst children = [];\n\n\t\tthis.descendants.forEach((descendant) => {\n\t\t\tchildren.push(descendant.getLayout());\n\t\t});\n\n\t\tif (this.isTaskRoot())\n\t\t{\n\t\t\treturn this.getTaskRootLayout(children);\n\t\t}\n\n\t\tif (this.isCheckList())\n\t\t{\n\t\t\tconst checkListLayout = this.getCheckListLayout(children);\n\n\t\t\tthis.handleCheckListChanges();\n\n\t\t\treturn checkListLayout;\n\t\t}\n\n\t\treturn this.getCheckListItemLayout(children);\n\t}\n}\n\nclass MobileCheckListItem extends CheckListItem\n{\n\tclass = MobileCheckListItem;\n\n\tcheckedClass = 'mobile-task-checklist-item-checked';\n\thiddenClass = 'mobile-task-checklist-item-hidden';\n\tcollapseClass = 'mobile-task-checklist-section-collapse';\n\twrapperClass = 'mobile-task-checklist-wrapper';\n\n\tshowClass = 'mobile-checklist-item-show';\n\thideClass = 'mobile-checklist-item-hide';\n\n\tskipUpdateClasses = {\n\t\theader: [\n\t\t\t'.tasks-checklist-item-auditor',\n\t\t\t'.tasks-checklist-item-accomplice',\n\t\t\t'.tasks-checklist-item-link',\n\t\t],\n\t\titem: [\n\t\t\t'.tasks-checklist-item-auditor',\n\t\t\t'.tasks-checklist-item-accomplice',\n\t\t\t'.tasks-checklist-item-link',\n\t\t\t'.mobile-task-checklist-item-checker',\n\t\t\t'.mobile-task-checklist-item-param',\n\t\t\t'.mobile-task-checklist-item-controls',\n\t\t],\n\t};\n\n\tstatic makeDangerElement(element)\n\t{\n\t\tconst dangerClass = 'mobile-task-checklist-error';\n\n\t\tif (!Dom.hasClass(element, dangerClass))\n\t\t{\n\t\t\tDom.addClass(element, dangerClass);\n\t\t}\n\t}\n\n\tgetItemRequestData()\n\t{\n\t\tconst itemRequestData = {\n\t\t\tPARENT_ID: this.fields.getParentId(),\n\t\t\tTITLE: Text.decode(this.fields.getTitle()),\n\t\t\tIS_COMPLETE: this.fields.getIsComplete(),\n\t\t\tIS_IMPORTANT: this.fields.getIsImportant(),\n\t\t\tMEMBERS: {},\n\t\t\tATTACHMENTS: this.fields.getAttachments() || {},\n\t\t};\n\t\tconst membersTypes = {\n\t\t\taccomplice: 'A',\n\t\t\tauditor: 'U',\n\t\t};\n\n\t\tthis.fields.getMembers().forEach((value, key) => {\n\t\t\titemRequestData.MEMBERS[key] = {TYPE: membersTypes[value.type]};\n\t\t});\n\n\t\treturn itemRequestData;\n\t}\n\n\tonChecklistAjaxError()\n\t{\n\t\tBXMobileApp.Events.postToComponent('onChecklistAjaxError', {\n\t\t\ttaskId: this.optionManager.entityId,\n\t\t\ttaskGuid: this.optionManager.taskGuid,\n\t\t}, 'tasks.view');\n\t}\n\n\tsendAddAjaxAction()\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst fields = this.getItemRequestData();\n\t\t\tconst parent = this.getParent();\n\n\t\t\tfields.PARENT_ID = parent.fields.getId() || (parent.isTaskRoot() ? 0 : null);\n\n\n\t\t\tBX.ajax.runAction('tasks.task.checklist.add', {\n\t\t\t\tdata: {\n\t\t\t\t\ttaskId: this.optionManager.entityId,\n\t\t\t\t\tfields,\n\t\t\t\t},\n\t\t\t}).then((response) => {\n\t\t\t\tif (response.status === 'success')\n\t\t\t\t{\n\t\t\t\t\tconst {checkListItem} = response.data;\n\t\t\t\t\tthis.fields.setId(checkListItem.id);\n\t\t\t\t\tresolve();\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.onChecklistAjaxError();\n\t\t\t\t\treject();\n\t\t\t\t}\n\t\t\t}).catch(() => {\n\t\t\t\tthis.onChecklistAjaxError();\n\t\t\t\treject();\n\t\t\t});\n\t\t});\n\t}\n\n\tsendUpdateAjaxAction(fields, onFailCallback = null)\n\t{\n\t\tconst onFailFunction = onFailCallback || this.onChecklistAjaxError.bind(this);\n\n\t\tBX.ajax.runAction('tasks.task.checklist.update', {\n\t\t\tdata: {\n\t\t\t\ttaskId: this.optionManager.entityId,\n\t\t\t\tcheckListItemId: this.fields.getId(),\n\t\t\t\tfields,\n\t\t\t},\n\t\t}).then((response) => {\n\t\t\tif (response.status !== 'success')\n\t\t\t{\n\t\t\t\tonFailFunction();\n\t\t\t}\n\t\t}).catch(() => onFailFunction());\n\t}\n\n\tsendRemoveAjaxAction()\n\t{\n\t\tBX.ajax.runAction('tasks.task.checklist.delete', {\n\t\t\tdata: {\n\t\t\t\ttaskId: this.optionManager.entityId,\n\t\t\t\tcheckListItemId: this.fields.getId(),\n\t\t\t},\n\t\t}).then((response) => {\n\t\t\tif (response.status !== 'success')\n\t\t\t{\n\t\t\t\tthis.onChecklistAjaxError();\n\t\t\t}\n\t\t}).catch(() => this.onChecklistAjaxError());\n\t}\n\n\tsendMembersAddAjaxAction(member, focusInput)\n\t{\n\t\tconst map = {\n\t\t\tauditor: {\n\t\t\t\tactionName: 'addAuditors',\n\t\t\t\tparamName: 'auditorsIds',\n\t\t\t\tletter: 'U',\n\t\t\t},\n\t\t\taccomplice: {\n\t\t\t\tactionName: 'addAccomplices',\n\t\t\t\tparamName: 'accomplicesIds',\n\t\t\t\tletter: 'A',\n\t\t\t},\n\t\t};\n\t\tconst currentType = map[member.type];\n\n\t\tconst toChecklistAddAction = 'tasks.task.checklist.addMembers';\n\t\tconst toChecklistAddData = {\n\t\t\ttaskId: this.optionManager.entityId,\n\t\t\tcheckListItemId: this.fields.getId(),\n\t\t\tmembers: {[member.id]: currentType.letter},\n\t\t};\n\n\t\tBX.ajax.runAction(toChecklistAddAction, {data: toChecklistAddData}).then((toChecklistAddResponse) => {\n\t\t\tif (toChecklistAddResponse.status === 'success')\n\t\t\t{\n\t\t\t\tif (focusInput)\n\t\t\t\t{\n\t\t\t\t\tthis.toggleUpdateMode();\n\t\t\t\t}\n\n\t\t\t\tBX.ajax.runAction(`tasks.task.${currentType.actionName}`, {data: {\n\t\t\t\t\ttaskId: this.optionManager.entityId,\n\t\t\t\t\t[currentType.paramName]: [member.id],\n\t\t\t\t}});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.fields.removeMember(member.id);\n\t\t\t}\n\t\t}).catch(() => this.fields.removeMember(member.id));\n\t}\n\n\tsendMoveAfterAjaxAction(afterItem)\n\t{\n\t\tBX.ajax.runAction('tasks.task.checklist.moveAfter', {\n\t\t\tdata: {\n\t\t\t\ttaskId: this.optionManager.entityId,\n\t\t\t\tcheckListItemId: this.fields.getId(),\n\t\t\t\tafterItemId: afterItem.fields.getId(),\n\t\t\t},\n\t\t}).then((response) => {\n\t\t\tif (response.status !== 'success')\n\t\t\t{\n\t\t\t\tthis.onChecklistAjaxError();\n\t\t\t}\n\t\t}).catch(() => this.onChecklistAjaxError());\n\t}\n\n\tgetPopupMenuItems()\n\t{\n\t\tconst locPrefix = 'TASKS_CHECKLIST_MOBILE_POPUP_MENU_';\n\t\tconst popupMenuItems = [];\n\t\tconst popupMenuItemsBuildMap = {\n\t\t\tchecklist: {\n\t\t\t\taddAuditor: {\n\t\t\t\t\tcondition: this.checkCanAddAccomplice.bind(this),\n\t\t\t\t\tsectionCode: '0',\n\t\t\t\t\ttitle: Loc.getMessage(`${locPrefix}ADD_AUDITOR`),\n\t\t\t\t\ticonUrl: '/bitrix/js/tasks/checklist/images/mobile-checklist-add-auditor.png',\n\t\t\t\t},\n\t\t\t\taddAccomplice: {\n\t\t\t\t\tcondition: this.checkCanAddAccomplice.bind(this),\n\t\t\t\t\tsectionCode: '0',\n\t\t\t\t\ttitle: Loc.getMessage(`${locPrefix}ADD_ACCOMPLICE`),\n\t\t\t\t\ticonUrl: '/bitrix/js/tasks/checklist/images/mobile-checklist-add-accomplice.png',\n\t\t\t\t},\n\t\t\t\trename: {\n\t\t\t\t\tcondition: this.checkCanUpdate.bind(this),\n\t\t\t\t\tsectionCode: '0',\n\t\t\t\t\ttitle: Loc.getMessage(`${locPrefix}RENAME`),\n\t\t\t\t\ticonUrl: '/bitrix/js/tasks/checklist/images/mobile-checklist-rename.png',\n\t\t\t\t},\n\t\t\t\tremove: {\n\t\t\t\t\tcondition: this.checkCanRemove.bind(this),\n\t\t\t\t\tsectionCode: '0',\n\t\t\t\t\ttitle: Loc.getMessage(`${locPrefix}REMOVE`),\n\t\t\t\t\ticonUrl: '/bitrix/js/tasks/checklist/images/mobile-checklist-remove.png',\n\t\t\t\t},\n\t\t\t},\n\t\t\tchecklistItem: {\n\t\t\t\taddFile: {\n\t\t\t\t\tcondition: this.checkCanUpdate.bind(this),\n\t\t\t\t\tsectionCode: '0',\n\t\t\t\t\ttitle: Loc.getMessage(`${locPrefix}ADD_FILE`),\n\t\t\t\t\ticonUrl: '/bitrix/js/tasks/checklist/images/mobile-checklist-add-file.png',\n\t\t\t\t},\n\t\t\t\taddAuditor: {\n\t\t\t\t\tcondition: this.checkCanAddAccomplice.bind(this),\n\t\t\t\t\tsectionCode: '0',\n\t\t\t\t\ttitle: Loc.getMessage(`${locPrefix}ADD_AUDITOR`),\n\t\t\t\t\ticonUrl: '/bitrix/js/tasks/checklist/images/mobile-checklist-add-auditor.png',\n\t\t\t\t},\n\t\t\t\taddAccomplice: {\n\t\t\t\t\tcondition: this.checkCanAddAccomplice.bind(this),\n\t\t\t\t\tsectionCode: '0',\n\t\t\t\t\ttitle: Loc.getMessage(`${locPrefix}ADD_ACCOMPLICE`),\n\t\t\t\t\ticonUrl: '/bitrix/js/tasks/checklist/images/mobile-checklist-add-accomplice.png',\n\t\t\t\t},\n\t\t\t\ttabIn: {\n\t\t\t\t\tcondition: this.checkCanTabIn.bind(this),\n\t\t\t\t\tsectionCode: '0',\n\t\t\t\t\ttitle: Loc.getMessage(`${locPrefix}TAB_IN`),\n\t\t\t\t\ticonUrl: '/bitrix/js/tasks/checklist/images/mobile-checklist-tab-in.png',\n\t\t\t\t},\n\t\t\t\ttabOut: {\n\t\t\t\t\tcondition: this.checkCanTabOut.bind(this),\n\t\t\t\t\tsectionCode: '0',\n\t\t\t\t\ttitle: Loc.getMessage(`${locPrefix}TAB_OUT`),\n\t\t\t\t\ticonUrl: '/bitrix/js/tasks/checklist/images/mobile-checklist-tab-out.png',\n\t\t\t\t},\n\t\t\t\timportant: {\n\t\t\t\t\tcondition: this.checkCanUpdate.bind(this),\n\t\t\t\t\tsectionCode: '0',\n\t\t\t\t\ttitle: Loc.getMessage(`${locPrefix}IMPORTANT`),\n\t\t\t\t\ticonUrl: '/bitrix/js/tasks/checklist/images/mobile-checklist-important.png',\n\t\t\t\t},\n\t\t\t\ttoAnotherChecklist: {\n\t\t\t\t\tcondition: this.checkCanUpdate.bind(this),\n\t\t\t\t\tsectionCode: '0',\n\t\t\t\t\ttitle: Loc.getMessage(`${locPrefix}TO_ANOTHER_CHECKLIST`),\n\t\t\t\t\ticonUrl: '/bitrix/js/tasks/checklist/images/mobile-checklist-to-another-checklist.png',\n\t\t\t\t},\n\t\t\t\tremove: {\n\t\t\t\t\tcondition: this.checkCanRemove.bind(this),\n\t\t\t\t\tsectionCode: '0',\n\t\t\t\t\ttitle: Loc.getMessage(`${locPrefix}REMOVE`),\n\t\t\t\t\ticonUrl: '/bitrix/js/tasks/checklist/images/mobile-checklist-remove.png',\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\t\tconst type = (this.isCheckList() ? 'checklist' : 'checklistItem');\n\n\t\tObject.keys(popupMenuItemsBuildMap[type]).forEach((id) => {\n\t\t\tconst {sectionCode, title, iconUrl, condition} = popupMenuItemsBuildMap[type][id];\n\t\t\tpopupMenuItems.push({id, sectionCode, title, iconUrl, disable: !condition()});\n\t\t});\n\n\t\treturn popupMenuItems;\n\t}\n\n\tgetPopupChecklistsList()\n\t{\n\t\tconst checkList = this.getCheckList();\n\t\tconst checkLists = this.getRootNode().getDescendants().filter(item => item !== checkList);\n\t\tconst popupChecklistsList = [];\n\n\t\tcheckLists.forEach((descendant) => {\n\t\t\tpopupChecklistsList.push({\n\t\t\t\tid: descendant.getNodeId(),\n\t\t\t\ttitle: descendant.fields.getDisplayTitle(),\n\t\t\t\tsectionCode: '0',\n\t\t\t});\n\t\t});\n\t\tpopupChecklistsList.push({\n\t\t\tid: 'newChecklist',\n\t\t\ttitle: Tag.message`+ ${'TASKS_CHECKLIST_PANEL_TO_ANOTHER_CHECKLIST_POPUP_NEW_CHECKLIST'}`,\n\t\t\tsectionCode: '0',\n\t\t});\n\n\t\treturn popupChecklistsList;\n\t}\n\n\tonMemberSelectedEvent(eventData)\n\t{\n\t\tconst {nodeId, member, position, focusInput} = eventData;\n\t\tconst node = this.findChild(nodeId);\n\n\t\tif (!node)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst displayTitle = node.fields.getDisplayTitle();\n\t\tlet newTitle = '';\n\n\t\tmember.nameFormatted = Text.encode(member.nameFormatted);\n\n\t\tif (focusInput)\n\t\t{\n\t\t\tconst start = position || 0;\n\t\t\tconst startSpace = (start === 0 || start - 1 === 0 || displayTitle.charAt(start - 2) === ' ') ? '' : ' ';\n\t\t\tconst endSpace = (displayTitle.charAt(start - 1) === ' ' ? '' : ' ');\n\t\t\tconst newInputText = `${displayTitle.slice(0, start - 1)}${startSpace}${member.nameFormatted}${endSpace}`;\n\t\t\tnewTitle = `${newInputText}${displayTitle.slice(start)}`;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tconst space = (displayTitle.slice(-1) === ' ' ? '' : ' ');\n\t\t\tnewTitle = `${displayTitle}${space}${member.nameFormatted}`.substring(0, 255);\n\t\t}\n\n\t\tnode.fields.addMember(member);\n\t\tnode.updateTitle(newTitle);\n\t\tnode.updateDisplayTitle(newTitle);\n\n\t\tif (!this.checkEditMode())\n\t\t{\n\t\t\tnode.sendUpdateAjaxAction({TITLE: Text.decode(node.fields.getTitle())});\n\t\t\tnode.sendMembersAddAjaxAction(member, focusInput);\n\t\t}\n\t\telse if (focusInput)\n\t\t{\n\t\t\tnode.toggleUpdateMode();\n\t\t}\n\t}\n\n\tonAddAttachmentEvent(eventData)\n\t{\n\t\tconst {nodeId, attachment} = eventData;\n\t\tconst node = this.findChild(nodeId);\n\n\t\tif (node)\n\t\t{\n\t\t\tconst key = Object.keys(attachment)[0];\n\t\t\tconst value = Object.values(attachment)[0];\n\n\t\t\tnode.fields.addAttachments({[`n${key}`]: value});\n\t\t}\n\t}\n\n\tonRemoveAttachmentEvent(eventData)\n\t{\n\t\tconst {nodeId, attachmentId} = eventData;\n\t\tconst node = this.findChild(nodeId);\n\n\t\tif (node)\n\t\t{\n\t\t\tnode.fields.removeAttachment(attachmentId);\n\t\t\tnode.fields.removeAttachment(`n${attachmentId}`);\n\t\t}\n\t}\n\n\tgetFakeAttachmentsCount(filesToRemove, filesToAdd)\n\t{\n\t\tconst attachmentsIds = Object.keys(this.fields.getAttachments());\n\t\tconst countWithRemovable = attachmentsIds.filter(id => !filesToRemove.includes(id)).length;\n\n\t\treturn countWithRemovable + filesToAdd.length;\n\t}\n\n\tsetLayoutAttachmentsCount(attachmentsCount)\n\t{\n\t\tconst newAttachmentsLayout = Tag.render`\n\t\t\t<div class=\"mobile-task-checklist-item-param\" id=\"attachments_${this.getNodeId()}\" onclick=\"${this.onAttachmentsLayoutClick.bind(this)}\">\n\t\t\t\t${attachmentsCount > 0 ? `<div class=\"mobile-task-checklist-item-param-attach\">${attachmentsCount}</div>` : ''}\n\t\t\t</div>\n\t\t`;\n\t\tDom.replace(this.getAttachmentsContainer(), newAttachmentsLayout);\n\t}\n\n\tupdateNodeAttachments(filesToRemove, filesToAdd, attachments = null)\n\t{\n\t\tif (attachments)\n\t\t{\n\t\t\tthis.fields.setAttachments(attachments);\n\t\t}\n\n\t\tconst fakeAttachmentsCount = this.getFakeAttachmentsCount(filesToRemove, filesToAdd);\n\t\tthis.setLayoutAttachmentsCount(fakeAttachmentsCount);\n\t}\n\n\tonAttachFilesEvent(eventData)\n\t{\n\t\tconst {nodeId, filesToRemove, filesToAdd, attachments, checkListItemId} = eventData;\n\t\tconst node = (nodeId ? this.findChild(nodeId) : this.findById(checkListItemId));\n\n\t\tif (node)\n\t\t{\n\t\t\tnode.updateNodeAttachments(filesToRemove, filesToAdd, attachments);\n\t\t}\n\t}\n\n\tonRemoveFilesEvent(eventData)\n\t{\n\t\tconst {nodeId, filesToRemove, filesToAdd, attachments} = eventData;\n\t\tconst node = this.findChild(nodeId);\n\n\t\tif (node)\n\t\t{\n\t\t\tnode.updateNodeAttachments(filesToRemove, filesToAdd, attachments);\n\t\t}\n\t}\n\n\tonFakeAttachFilesEvent(eventData)\n\t{\n\t\tconst {nodeId, filesToRemove, filesToAdd, checkListItemId} = eventData;\n\t\tconst node = (nodeId ? this.findChild(nodeId) : this.findById(checkListItemId));\n\n\t\tif (node)\n\t\t{\n\t\t\tnode.updateNodeAttachments(filesToRemove, filesToAdd);\n\t\t}\n\t}\n\n\tonFakeRemoveFilesEvent(eventData)\n\t{\n\t\tconst {nodeId, filesToRemove, filesToAdd} = eventData;\n\t\tconst node = this.findChild(nodeId);\n\n\t\tif (node)\n\t\t{\n\t\t\tnode.updateNodeAttachments(filesToRemove, filesToAdd);\n\t\t}\n\t}\n\n\tonRenameEvent(eventData)\n\t{\n\t\tconst node = this.findChild(eventData.nodeId);\n\n\t\tif (node)\n\t\t{\n\t\t\tnode.toggleUpdateMode();\n\t\t}\n\t}\n\n\tonRemoveEvent(eventData)\n\t{\n\t\tconst node = this.findChild(eventData.nodeId);\n\n\t\tif (node)\n\t\t{\n\t\t\tif (!this.checkEditMode() && node.fields.getId())\n\t\t\t{\n\t\t\t\tnode.sendRemoveAjaxAction();\n\t\t\t}\n\t\t\tnode.deleteAction(false);\n\t\t\tnode.getParent().updateIndexes();\n\t\t\tnode.handleCheckListChanges();\n\t\t}\n\t}\n\n\tonTabInEvent(eventData)\n\t{\n\t\tconst node = this.findChild(eventData.nodeId);\n\n\t\tif (node && node.checkCanTabIn())\n\t\t{\n\t\t\tnode.tabIn();\n\n\t\t\tif (!this.checkEditMode())\n\t\t\t{\n\t\t\t\tif (node.getLeftSibling())\n\t\t\t\t{\n\t\t\t\t\tnode.sendMoveAfterAjaxAction(node.getLeftSibling());\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tconst fields = {\n\t\t\t\t\t\tPARENT_ID: node.getParent().fields.getId(),\n\t\t\t\t\t\tSORT_INDEX: node.fields.getSortIndex(),\n\t\t\t\t\t};\n\t\t\t\t\tconst onFailCallback = () => { node.tabOut(); };\n\n\t\t\t\t\tnode.sendUpdateAjaxAction(fields, onFailCallback);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tonTabOutEvent(eventData)\n\t{\n\t\tconst node = this.findChild(eventData.nodeId);\n\n\t\tif (node && node.checkCanTabOut())\n\t\t{\n\t\t\tif (!this.checkEditMode())\n\t\t\t{\n\t\t\t\tnode.sendMoveAfterAjaxAction(node.getParent());\n\t\t\t}\n\t\t\tnode.tabOut();\n\t\t}\n\t}\n\n\tonImportantEvent(eventData)\n\t{\n\t\tconst node = this.findChild(eventData.nodeId);\n\n\t\tif (node)\n\t\t{\n\t\t\tnode.toggleImportant();\n\t\t\tif (!this.checkEditMode())\n\t\t\t{\n\t\t\t\tconst onFailCallback = () => { node.toggleImportant(); };\n\t\t\t\tnode.sendUpdateAjaxAction({IS_IMPORTANT: node.fields.getIsImportant()}, onFailCallback);\n\t\t\t}\n\t\t}\n\t}\n\n\tonToAnotherCheckListEvent(eventData)\n\t{\n\t\tconst {nodeId, checklistId} = eventData;\n\t\tconst node = this.findChild(nodeId);\n\n\t\tif (!node)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (checklistId === 'newChecklist')\n\t\t{\n\t\t\tnode.moveToNewCheckList(this.getDescendantsCount() + 1);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tnode.makeChildOf(this.findChild(checklistId));\n\t\t\tnode.handleCheckListChanges();\n\n\t\t\tif (!this.checkEditMode())\n\t\t\t{\n\t\t\t\tif (node.getLeftSibling())\n\t\t\t\t{\n\t\t\t\t\tnode.sendMoveAfterAjaxAction(node.getLeftSibling());\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tnode.sendUpdateAjaxAction({\n\t\t\t\t\t\tPARENT_ID: node.getParent().fields.getId(),\n\t\t\t\t\t\tSORT_INDEX: node.fields.getSortIndex(),\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tgetNativeComponentName()\n\t{\n\t\treturn (this.checkEditMode() ? 'tasks.edit' : 'tasks.view');\n\t}\n\n\tcheckEditMode()\n\t{\n\t\treturn this.optionManager.isEditMode();\n\t}\n\n\tcheckCanTabIn()\n\t{\n\t\treturn !this.isTaskRoot() && !this.isCheckList() && !this.isFirstDescendant();\n\t}\n\n\tcheckCanTabOut()\n\t{\n\t\treturn !this.isTaskRoot() && !this.isCheckList() && !this.getParent().isCheckList();\n\t}\n\n\tshowEditorPanel(item, nodeToPosition = null)\n\t{\n\t\t// no editor panel in mobile version\n\t}\n\n\tgetTitleNodeClass()\n\t{\n\t\treturn this.isCheckList() ? 'mobile-task-checklist-head-title-text' : 'mobile-task-checklist-item-text';\n\t}\n\n\tgetInnerContainer()\n\t{\n\t\treturn this.container.querySelector(this.isCheckList() ? '.mobile-task-checklist-head-title' : '.mobile-task-checklist-item');\n\t}\n\n\tmoveToNewCheckList(number)\n\t{\n\t\tconst title = `${Loc.getMessage('TASKS_CHECKLIST_NEW_CHECKLIST_TITLE')}`.replace('#ITEM_NUMBER#', number);\n\t\tconst newCheckList = new MobileCheckListItem({TITLE: title, DISPLAY_TITLE: title});\n\n\t\tthis.getRootNode().addCheckListItem(newCheckList).then(() => {\n\t\t\tthis.makeChildOf(newCheckList);\n\t\t\tthis.handleCheckListChanges();\n\n\t\t\tif (!this.checkEditMode())\n\t\t\t{\n\t\t\t\tnewCheckList.sendAddAjaxAction().then(() => {\n\t\t\t\t\tthis.sendUpdateAjaxAction({\n\t\t\t\t\t\tPARENT_ID: this.getParent().fields.getId(),\n\t\t\t\t\t\tSORT_INDEX: this.fields.getSortIndex(),\n\t\t\t\t\t});\n\t\t\t\t}, () => {});\n\t\t\t}\n\t\t});\n\t}\n\n\ttoggleImportant()\n\t{\n\t\tif (this.fields.getIsImportant())\n\t\t{\n\t\t\tthis.fields.setIsImportant(false);\n\t\t\tDom.removeClass(this.getInnerContainer(), 'mobile-task-checklist-item-important');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.fields.setIsImportant(true);\n\t\t\tDom.addClass(this.getInnerContainer(), 'mobile-task-checklist-item-important');\n\t\t}\n\t}\n\n\thandleUpdateEnding(createNewItem = false)\n\t{\n\t\tconst input = this.container.querySelector(`#text_${this.getNodeId()}`);\n\t\tconst text = input.value.trim();\n\n\t\tif (text.length === 0)\n\t\t{\n\t\t\tif (this.checkCanDeleteOnUpdateEnding())\n\t\t\t{\n\t\t\t\tif (!this.checkEditMode() && this.fields.getId())\n\t\t\t\t{\n\t\t\t\t\tthis.sendRemoveAjaxAction();\n\t\t\t\t}\n\t\t\t\tthis.deleteAction(false);\n\t\t\t\tthis.getParent().updateIndexes();\n\t\t\t\tthis.handleCheckListIsEmpty();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tMobileCheckListItem.makeDangerElement(input.parentElement);\n\t\t\t}\n\t\t}\n\t\telse if (createNewItem)\n\t\t{\n\t\t\tthis.getParent().addCheckListItem(null, this);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.disableUpdateMode();\n\t\t\tthis.handleTaskOptions();\n\n\t\t\tif (!this.checkEditMode())\n\t\t\t{\n\t\t\t\tif (this.fields.getId())\n\t\t\t\t{\n\t\t\t\t\tconst itemRequestData = this.getItemRequestData();\n\t\t\t\t\tconst members = itemRequestData.MEMBERS;\n\n\t\t\t\t\tthis.sendUpdateAjaxAction({\n\t\t\t\t\t\tTITLE: itemRequestData.TITLE,\n\t\t\t\t\t\tMEMBERS: (Object.keys(members).length > 0 ? members : ''),\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.sendAddAjaxAction().then(() => {}, () => {});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tonInput(e)\n\t{\n\t\tconst memberSelectorCallKeys = ['@', '+'];\n\t\tconst position = CheckListItem.getInputSelection(this.input).start;\n\n\t\tif (memberSelectorCallKeys.includes(e.data) && this.checkCanAddAccomplice())\n\t\t{\n\t\t\tconst params = {\n\t\t\t\tposition,\n\t\t\t\tnodeId: this.getNodeId(),\n\t\t\t};\n\t\t\tBXMobileApp.Events.postToComponent('onChecklistInputMemberSelectorCall', params, this.getNativeComponentName());\n\t\t}\n\t}\n\n\tonInputKeyPressed(e)\n\t{\n\t\tconst keys = {\n\t\t\tenter: 13,\n\t\t};\n\n\t\tif (e.keyCode === keys.enter)\n\t\t{\n\t\t\tthis.toggleUpdateMode(e);\n\t\t\te.preventDefault();\n\t\t}\n\t}\n\n\tgetParamsForMobileEvent(type)\n\t{\n\t\tif (!['settings', 'attachments'].includes(type))\n\t\t{\n\t\t\treturn {};\n\t\t}\n\n\t\tconst {entityId, entityType, taskGuid, diskOptions, mode} = this.optionManager;\n\t\tconst defaultParams = {\n\t\t\ttaskGuid,\n\t\t\ttaskId: entityId,\n\t\t\tnodeId: this.getNodeId(),\n\t\t\tdisk: diskOptions,\n\t\t\tajaxData: {\n\t\t\t\tentityId,\n\t\t\t\tmode,\n\t\t\t\tcheckListItemId: (this.checkEditMode() ? this.getNodeId() : this.fields.getId()),\n\t\t\t\tentityTypeId: `${entityType.toLowerCase()}Id`,\n\t\t\t},\n\t\t};\n\t\tlet localParams = {};\n\n\t\tif (type === 'settings')\n\t\t{\n\t\t\tlocalParams = {\n\t\t\t\tpopupChecklists: this.getPopupChecklistsList(),\n\t\t\t\tpopupMenuItems: this.getPopupMenuItems(),\n\t\t\t\tpopupMenuSections: [{id: '0', title: Text.decode(this.fields.getDisplayTitle())}],\n\t\t\t};\n\t\t}\n\t\telse if (type === 'attachments')\n\t\t{\n\t\t\tlocalParams = {\n\t\t\t\tattachmentsIds: Object.keys(this.fields.getAttachments()),\n\t\t\t\tcanUpdate: this.checkCanUpdate(),\n\t\t\t};\n\t\t}\n\n\t\treturn {...defaultParams, ...localParams};\n\t}\n\n\tonAttachmentsLayoutClick()\n\t{\n\t\tconst params = this.getParamsForMobileEvent('attachments');\n\t\tBXMobileApp.Events.postToComponent('onChecklistAttachmentsClick', params, this.getNativeComponentName());\n\t}\n\n\tonSettingsClick()\n\t{\n\t\tconst params = this.getParamsForMobileEvent('settings');\n\t\tBXMobileApp.Events.postToComponent('onChecklistSettingsClick', params, this.getNativeComponentName());\n\t}\n\n\tgetUpdateModeLayout()\n\t{\n\t\tconst nodeId = this.getNodeId();\n\n\t\tif (this.isCheckList())\n\t\t{\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"mobile-task-checklist-head-title mobile-task-checklist-item-edit-mode\">\n\t\t\t\t\t<input class=\"mobile-task-checklist-item-input\" type=\"text\" id=\"text_${nodeId}\"\n\t\t\t\t\t\t   value=\"${this.fields.getDisplayTitle()}\"\n\t\t\t\t\t\t   oninput=\"${this.onInput.bind(this)}\"\n\t\t\t\t\t\t   onkeypress=\"${this.onInputKeyPressed.bind(this)}\"\n\t\t\t\t\t\t   onblur=\"${this.rememberInputState.bind(this)}\"/>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\n\t\tconst progressBarLayout = new BX.Mobile.Tasks.CheckList.ProgressRound({\n\t\t\tvalue: this.fields.getCompletedCount(),\n\t\t\tmaxValue: this.fields.getTotalCount(),\n\t\t\twidth: 29,\n\t\t\tlineSize: 3,\n\t\t\tfill: false,\n\t\t\tcolor: BX.UI.ProgressRound.Color.PRIMARY,\n\t\t});\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"mobile-task-checklist-item mobile-task-checklist-item-edit-mode ${this.fields.getIsComplete() ? this.checkedClass : ''}\">\n\t\t\t\t<div class=\"mobile-task-checklist-item-checker\">\n\t\t\t\t\t${progressBarLayout.getContainer()}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"mobile-task-checklist-item-title\">\n\t\t\t\t\t<div class=\"tasks-checklist-item-number\" style=\"display: none\">${this.fields.getDisplaySortIndex()}</div>\n\t\t\t\t\t<input class=\"mobile-task-checklist-item-input\" type=\"text\" id=\"text_${nodeId}\"\n\t\t\t\t\t\t   placeholder=\"${Loc.getMessage('TASKS_CHECKLIST_NEW_ITEM_PLACEHOLDER')}\"\n\t\t\t\t\t\t   value=\"${this.fields.getDisplayTitle()}\"\n\t\t\t\t\t\t   oninput=\"${this.onInput.bind(this)}\"\n\t\t\t\t\t\t   onkeypress=\"${this.onInputKeyPressed.bind(this)}\"\n\t\t\t\t\t\t   onblur=\"${this.rememberInputState.bind(this)}\"/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetAttachmentsLayout()\n\t{\n\t\tconst attachmentsCount = Object.keys(this.fields.getAttachments()).length;\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"mobile-task-checklist-item-param\" id=\"attachments_${this.getNodeId()}\" onclick=\"${this.onAttachmentsLayoutClick.bind(this)}\">\n\t\t\t\t${attachmentsCount > 0 ? `<div class=\"mobile-task-checklist-item-param-attach\">${attachmentsCount}</div>` : ''}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetCheckListLayout(children)\n\t{\n\t\tconst nodeId = this.getNodeId();\n\t\tconst settingsLayout = Tag.render`\n\t\t\t<div class=\"mobile-task-checklist-setting\" onclick=\"${this.onSettingsClick.bind(this)}\"></div>\n\t\t`;\n\t\tconst addButtonLayout = Tag.render`\n\t\t\t<div class=\"mobile-task-checklist-add-button\" onclick=\"${this.onAddCheckListItemClick.bind(this)}\">\n\t\t\t\t<div class=\"mobile-task-checklist-add-text\">\n\t\t\t\t\t${Loc.getMessage('TASKS_CHECKLIST_ADD_NEW_ITEM')}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\tthis.progress = new BX.Mobile.Tasks.CheckList.ProgressRound({\n\t\t\twidth: 29,\n\t\t\tlineSize: 3,\n\t\t\tvalue: this.fields.getCompletedCount(),\n\t\t\tmaxValue: this.fields.getTotalCount(),\n\t\t\tstatusType: BX.UI.ProgressRound.Status.COUNTER,\n\t\t});\n\n\t\tthis.container = Tag.render`\n\t\t\t<div class=\"mobile-task-checklist-section\" id=\"${nodeId}\" data-role=\"mobile-task-checklist\">\n\t\t\t\t<div class=\"mobile-task-checklist-head\">\n\t\t\t\t\t<div class=\"mobile-task-checklist-counter\">\n\t\t\t\t\t\t<div class=\"mobile-task-checklist-counter-progress\" id=\"progress_${nodeId}\">\n\t\t\t\t\t\t\t${this.progress.getContainer()}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"mobile-task-checklist-head-title\" onclick=\"${this.onHeaderClickDone.bind(this)}\">\n\t\t\t\t\t\t${this.getTitleLayout()}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"mobile-task-checklist-controls\">\n\t\t\t\t\t\t${this.checkCanUpdate() ? settingsLayout : ''}\n\t\t\t\t\t\t<div class=\"mobile-task-checklist-visible\"\n\t\t\t\t\t\t\t onclick=\"${this.onCollapseButtonClick.bind(this)}\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"mobile-task-checklist-wrapper\">\n\t\t\t\t\t<div class=\"mobile-task-checklist\" id=\"subItems_${nodeId}\">\n\t\t\t\t\t\t${children}\n\t\t\t\t\t</div>\n\t\t\t\t\t${this.checkCanAdd() ? addButtonLayout : ''}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\treturn this.container;\n\t}\n\n\tgetCheckListItemLayout(children)\n\t{\n\t\tconst nodeId = this.getNodeId();\n\t\tconst settingsLayout = Tag.render`\n\t\t\t<div class=\"mobile-task-checklist-item-setting\" onclick=\"${this.onSettingsClick.bind(this)}\"></div>\n\t\t`;\n\n\t\tthis.progress = new BX.Mobile.Tasks.CheckList.ProgressRound({\n\t\t\tid: `progress_${nodeId}`,\n\t\t\tvalue: this.fields.getCompletedCount(),\n\t\t\tmaxValue: this.fields.getTotalCount(),\n\t\t\twidth: 29,\n\t\t\tlineSize: 3,\n\t\t\tfill: false,\n\t\t\tcolor: BX.UI.ProgressRound.Color.PRIMARY,\n\t\t});\n\n\t\tthis.container = Tag.render`\n\t\t\t<div class=\"mobile-task-checklist-item-wrapper\" id=\"${nodeId}\">\n\t\t\t\t<div class=\"mobile-task-checklist-item ${this.fields.getIsComplete() ? this.checkedClass : ''} ${this.fields.getIsImportant() ? 'mobile-task-checklist-item-important' : ''}\"\n\t\t\t\t\t onclick=\"${this.onInnerContainerClickDone.bind(this)}\">\n\t\t\t\t\t<div class=\"mobile-task-checklist-item-checker\" id=\"progress_${nodeId}\"\n\t\t\t\t\t\t onclick=\"${this.onCompleteButtonClick.bind(this)}\">\n\t\t\t\t\t\t${this.progress.getContainer()}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"mobile-task-checklist-item-title\">\n\t\t\t\t\t\t<div class=\"tasks-checklist-item-number\" style=\"display: none\">${this.fields.getDisplaySortIndex()}</div>\n\t\t\t\t\t\t${this.getTitleLayout()}\n\t\t\t\t\t</div>\n\t\t\t\t\t${this.getAttachmentsLayout()}\n\t\t\t\t\t<div class=\"mobile-task-checklist-item-controls\">\n\t\t\t\t\t\t${this.checkCanUpdate() ? settingsLayout : ''}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"mobile-task-checklist\" id=\"subItems_${nodeId}\">\n\t\t\t\t\t${children}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\treturn this.container;\n\t}\n}\n\nexport {CheckListItem, MobileCheckListItem};"],"names":["TreeItem","Math","random","toString","substr","setNodeId","generateUniqueNodeId","setParent","parent","getParent","nodeId","CompositeTreeItem","descendants","item","position","push","splice","after","index","findIndex","descendant","add","before","length","getFirstDescendant","getLastDescendant","isFirstDescendant","parentDescendants","getDescendants","isLastDescendant","getRootNode","leftSiblingThrough","getLeftSibling","getDescendantsCount","getRightSibling","getNodeId","found","forEach","findChild","size","countTreeSize","CheckListItemFields","string","camelCaseString","Type","isString","toLowerCase","replace","match","chr","toUpperCase","snakeCaseString","fields","id","parentId","title","sortIndex","displayTitle","displaySortIndex","isComplete","isImportant","isSelected","isCollapse","completedCount","totalCount","members","Map","attachments","setFields","Object","keys","name","camelCaseName","snakeToCamelCase","indexOf","snakeCaseName","camelToSnakeCase","setMethod","bind","copiedId","types","A","U","clear","NAME","TYPE","set","nameFormatted","Text","encode","type","member","delete","CheckListItem","element","dangerClass","Dom","hasClass","addClass","oldParent","newParent","updateCounts","updateProgress","updateIndexes","completed","total","replaces","progressText","Loc","getMessage","search","ext","fileExtension","input","start","end","normalizedValue","range","textInputRange","len","endRange","selectionStart","selectionEnd","document","selection","createRange","parentElement","value","createTextRange","moveToBookmark","getBookmark","collapse","compareEndPoints","moveStart","slice","split","moveEnd","defaultDisplayTitle","itemNumber","node","posFrom","BX","GetWindowScrollPos","scrollTop","posTo","pos","top","round","GetWindowInnerSize","innerHeight","toBottom","distance","abs","speed","step","posCurrent","timer","i","setTimeout","url","messageId","action","header","canUpdate","MODIFY","canRemove","REMOVE","canToggle","TOGGLE","canDrag","DRAG","panel","progress","filesLoaderPopup","filesLoaderProgressBars","updateMode","optionManager","clickEventHandler","isTaskRoot","getId","findById","recursively","getIsComplete","countCompletedCount","countTotalCount","setCompletedCount","setTotalCount","updateCompletedCount","updateTotalCount","getTotalCount","getCompletedCount","setMaxValue","update","isCheckList","updateProgressText","getProgressText","setTextAfter","layout","style","overflow","height","opacity","showClass","scrollHeight","hideClass","remove","setDefaultStyles","container","paddingTop","getSortIndex","addCheckListItem","showBalloon","getTitle","data","getNotificationBalloon","EventEmitter","emit","e","preventDefault","hide","checkSelectedItems","items","getSelectedItems","runForEachSelectedItem","setIsSelected","deleteAction","handleCheckListChanges","actions","content","events","click","event","balloon","close","restore","handleTaskOptions","Tag","render","avatar","loadExt","then","UI","Notification","Center","notify","rootNode","moveToNewCheckList","PopupMenuWindow","target","getToAnotherCheckListPopupItems","autoHide","closeByEsc","offsetLeft","offsetWidth","angle","onPopupClose","destroy","show","selectMode","popupMenuItems","toNewCheckListMenuItem","text","message","onclick","getMenuWindow","getDisplayTitle","selectedItem","makeChildOf","unselectAll","delimiter","checkList","getCheckList","checkLists","filter","handleUpdateEnding","number","newCheckList","TITLE","DISPLAY_TITLE","memberSelector","space","newTitle","substring","addMember","updateTitle","updateDisplayTitle","inputText","mentioned","inputCursorPosition","startSpace","charAt","endSpace","newInputText","decode","retrieveFocus","auditor","resultAuditor","processMemberSelect","accomplice","resultAccomplice","memberType","checkCanAddAccomplice","typeFunctionMap","onSocNetSelectorAuditorSelected","onSocNetSelectorAccompliceSelected","typeFunction","Tasks","Integration","Socialnetwork","NetworkSelector","scope","mode","useSearch","useAdd","controlBind","bindEvent","isSelectorLoading","open","getMemberSelector","prefix","diskUrls","urlSelect","urlRenameFile","urlDeleteFile","urlUpload","PopupWindow","getAttachmentsLoaderLayout","bindElement","setBindElement","Disk","UF","UID","controlName","hideSelectDialog","onCustomEvent","contentContainer","querySelector","fileId","removeAttachment","getAttachmentsContainer","membersLayout","onAddAuditorClick","onAddAccompliceClick","attachmentButtonLayout","onUploadAttachmentClick","itemsActionButtonsLayout","onTabInClick","onTabOutClick","getIsImportant","onImportantClick","onToAnotherCheckListClick","onDeleteClick","setTitle","oldTitleNode","getTitleNodeContainer","newTitleNode","getTitleLayout","setDisplayTitle","userPath","getDefaultDisplayTitle","getMembers","regExp","RegExp","getMemberLinkLayout","getLinkLayout","getTitleNodeClass","membersToDelete","removeMember","updateSortIndexes","updateDisplaySortIndexes","setSortIndex","parentSortIndex","getDisplaySortIndex","localSortIndex","newSortIndex","setDisplaySortIndex","innerText","userId","showCompleted","showOnlyMine","hideByCondition","hasUserInMembers","has","condition","checkCanHide","canHide","checkActiveUpdateExist","getIsSelected","toggleGroup","disableAllUpdateModes","getInputSelection","focus","setSelectionRange","onInputKeyPressed","onInputKeyDown","rememberInputState","clearInput","progressBarLayout","ProgressRound","maxValue","width","lineSize","fill","color","Color","PRIMARY","onCompleteButtonClick","getContainer","nodeToPosition","getPosition","getPanelBodyLayout","left","append","body","isShown","right","viewModeLayout","getInnerContainer","updateModeLayout","getUpdateModeLayout","hiddenClass","insertBefore","showEditorPanel","currentInner","trim","processMembersFromText","removeClass","nextElementSibling","getAttachments","createNewItem","checkCanDeleteOnUpdateEnding","handleCheckListIsEmpty","makeDangerElement","disableUpdateMode","keyCode","disableAllGroup","enableUpdateMode","enter","plus","atsign","toggleUpdateMode","shiftKey","defaultMemberSelectorType","tab","up","down","tabOut","tabIn","getLeftSiblingThrough","rightSiblingThrough","getRightSiblingThrough","handleMouseDown","registerClickDoneCallback","onHeaderClickDone","handleMouseUp","checkCanUpdate","checkSkipUpdate","onInnerContainerClickDone","toggleSelect","setIsImportant","getImportantLayout","callback","reverse","selectedItems","toggleImportant","panelImportantButton","closest","toggleClass","checkCanToggle","toggleComplete","setIsComplete","checkedClass","runAjaxToggleComplete","ajaxActions","entityId","entityType","stableTreeStructure","actionName","COMPLETE","RENEW","checkListItemId","ajax","runAction","response","checkListItem","updateStableTreeStructure","FIELDS","DESCENDANTS","checkBox","checked","selected","getSelected","getIsCollapse","toggleCollapse","collapseFreezed","wrapperList","wrapperClass","wrapperListHeight","collapseClass","setIsCollapse","setAutoHeight","unbind","checkListIsComplete","checkIsComplete","checkListIsEmpty","toggleEmpty","handleCheckListIsComplete","area","skipUpdateClasses","find","getCanAdd","getCanAddAccomplice","addBefore","addAfter","updateParents","insertAfter","borderItems","bottom","move","getSubItemsContainer","dependsOn","itemGet","class","Promise","resolve","newCheckListItem","newCheckListItemLayout","getLayout","smoothScroll","itemRequestData","NODE_ID","PARENT_NODE_ID","ID","COPIED_ID","getCopiedId","PARENT_ID","getParentId","SORT_INDEX","IS_COMPLETE","IS_IMPORTANT","MEMBERS","ATTACHMENTS","key","inputData","getItemRequestData","getRequestData","attachmentsLayout","requestLayout","checkCanRemove","appendRequestLayout","searchId","optionAttachments","stableAttachments","getStableAttachments","getStableTreeStructure","attachmentsToDelete","Array","isArray","attachment","getAttribute","extension","getFileExtension","extensionClass","iconContainer","deleteButton","onDeleteAttachmentClick","prototype","hasOwnProperty","call","sort","a","b","setAttachments","viewUrl","img","filesChooser","onAttachmentsLoaderMenuItemClick","addCustomEvent","OnFileUploadSuccess","uf","_onUploadProgress","onUploadProgress","newProgress","min","myProgress","statusType","Status","INCIRCLE","filePreview","progressBarWidth","ceil","get","fileResult","file","uploaderFile","attachmentId","element_id","element_name","element_url","addAttachments","attachmentProgress","attachmentLayout","getLoadedAttachmentLayout","outerHTML","children","layouts","listActionsPanel","groupButton","dndButton","checkCanAdd","addButtonLayout","onAddCheckListItemClick","onGroupButtonClick","removeButtonLayout","checkCanDrag","visibility","ProgressBar","Size","MEDIUM","textAfter","onHeaderMouseDown","onHeaderMouseUp","onCollapseButtonClick","getAttachmentsLayout","onInnerContainerMouseDown","onInnerContainerMouseUp","onSelectCheckboxClick","getTaskRootLayout","checkListLayout","getCheckListLayout","getCheckListItemLayout","MobileCheckListItem","membersTypes","BXMobileApp","Events","postToComponent","taskId","taskGuid","reject","status","setId","onChecklistAjaxError","catch","onFailCallback","onFailFunction","focusInput","map","paramName","letter","currentType","toChecklistAddAction","toChecklistAddData","toChecklistAddResponse","afterItem","afterItemId","locPrefix","popupMenuItemsBuildMap","checklist","addAuditor","sectionCode","iconUrl","addAccomplice","rename","checklistItem","addFile","checkCanTabIn","checkCanTabOut","important","toAnotherChecklist","disable","popupChecklistsList","eventData","checkEditMode","sendUpdateAjaxAction","sendMembersAddAjaxAction","values","filesToRemove","filesToAdd","attachmentsIds","countWithRemovable","includes","attachmentsCount","newAttachmentsLayout","onAttachmentsLayoutClick","fakeAttachmentsCount","getFakeAttachmentsCount","setLayoutAttachmentsCount","updateNodeAttachments","sendRemoveAjaxAction","sendMoveAfterAjaxAction","checklistId","isEditMode","sendAddAjaxAction","memberSelectorCallKeys","params","getNativeComponentName","diskOptions","defaultParams","disk","ajaxData","entityTypeId","localParams","popupChecklists","getPopupChecklistsList","getPopupMenuItems","popupMenuSections","getParamsForMobileEvent","onInput","Mobile","CheckList","settingsLayout","onSettingsClick","COUNTER"],"mappings":"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"}