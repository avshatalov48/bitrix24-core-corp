BX.namespace("BX.Scheduler");BX.Scheduler.Tree=function(e){this.config=e||{};this.root=new BX.Scheduler.TreeNode;this.root.tree=this;this.byIdMap={};BX.addCustomEvent(this,"onNodeAdded",BX.proxy(this.onNodeAdded,this));BX.addCustomEvent(this,"onNodeRemoved",BX.proxy(this.onNodeRemoved,this));this.load(this.config.data)};BX.Scheduler.Tree.prototype={clearAll:function(){this.byIdMap={};this.root.childNodes=[]},getById:function(e){return this.byIdMap[e]?this.byIdMap[e]:null},getRoot:function(){return this.root},load:function(e){if(!BX.type.isArray(e)){return}for(var t=0;t<e.length;t++){var o=e[t];var d=o.parentId&&this.getById(o.parentId)||this.getRoot();var i=o.type&&BX.Scheduler.Util.getClass(o.type)||this.getDefaultDataType()||null;var n=i?new i(o):o;if(!this.getById(n.getId())){d.appendChild(n)}}},getDefaultDataType:function(){return null},onNodeAdded:function(e){e.getData().store=this;this.byIdMap[e.getId()]=e},onNodeRemoved:function(e){delete e.getData().store;delete this.byIdMap[e.getId()]}};BX.Scheduler.TreeNode=function(e){this.data=e||{};this.id=this.data.id||null;this.childNodes=[];this.parentNode=null};BX.Scheduler.TreeNode.prototype={appendChild:function(e){var t=new BX.Scheduler.TreeNode(e);t.parentNode=this;this.childNodes.push(t);BX.onCustomEvent(this.getTree(),"onNodeAdded",[t]);return t},insertBefore:function(e,t){},removeChild:function(e){for(var t=0;t<this.childNodes.length;t++){if(this.childNodes[t]===e){this.childNodes.splice(t,1);e.parentTask=null;BX.onCustomEvent(this.getTree(),"onNodeRemoved",[e]);break}}},forEach:function(e){for(var t=0,o=this.childNodes.length;t<o;t++){e(this.childNodes[t])}},getData:function(){return this.data},getChildNodes:function(){return this.childNodes},getId:function(){return this.id},getRoot:function(){var e=this;while(e.parentNode!==null){e=e.parentNode}return e},getTree:function(){return this.getRoot().tree}};
//# sourceMappingURL=tree.map.js