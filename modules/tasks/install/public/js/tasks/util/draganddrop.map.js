{"version":3,"file":"draganddrop.min.js","sources":["draganddrop.js"],"names":["BX","namespace","Tasks","Util","DragAndDrop","Base","extend","options","createFlying","DoNothing","autoMarkItemBefore","autoMarkItemAfter","autoMarkZoneTopBottom","methods","construct","this","callConstruct","ctrls","zones","items","flyingNode","currentZoneNodeCache","insertNodeScope","prevInserNodeScope","vars","flyingOverZone","ghostItem","dragStartHandleCoords","x","y","MouseTracker","getCoordinates","bind","document","throttle","trackMouse","stickToMouse","makeFlyingNode","node","baseOnNode","option","apply","flying","clone","addClass","makeAbsolute","getNodeMouseOffset","append","getElementsByTagName","makeItemGhost","k","embodyCurrentItem","removeClass","makeZoneIn","makeCurrentZoneCache","zoneNode","makeCurrentZoneOut","nodes","childNodes","nodeType","checkNodeBound","pos","width","height","push","getCurrentZoneNodeScope","mc","zonePos","mOffs","left","top","prevNode","nodePos","nodeOffs","yHalf","Math","floor","after","before","bindDropZone","type","isElementNode","TypeError","jsDD","registerDest","unBindDropZone","zone","unregisterDest","splice","bindNode","parameters","handle","length","registerObject","onbxdragstart","passCtx","onDragStart","onbxdrag","onDrag","onbxdragstop","delegate","onDragStop","onbxdraghover","onDragHover","onbxdraghout","onDragHout","unBindNode","j","unregisterObject","getItemIndexByHandle","getCurrentZone","toggleNodeScopeClass","toggleZoneClass","fireEvent","ghostNode","nodeScope","relocated","pBefore","Promise","setAutoResolve","then","insertBefore","clearNodeScopeClass","pAfter","remove","checkZoneIsLegal","scope","way","autoBefore","autoAfter","hasClass","search","source","style","position","margin","box-sizing","z-index","w","offsetWidth","h","offsetHeight","adjust","coords","offs"],"mappings":"AAAAA,GAAGC,UAAU,aAQbD,IAAGE,MAAMC,KAAKC,YAAcJ,GAAGE,MAAMC,KAAKE,KAAKC,QAC9CC,SACCC,aAAcR,GAAGS,UACjBC,mBAAoB,MACpBC,kBAAmB,MACnBC,sBAAuB,OAExBC,SAECC,UAAW,WAEVC,KAAKC,cAAchB,GAAGE,MAAMC,KAAKE,KAEjCU,MAAKE,OACJC,SACAC,SACAC,WAAY,MACZC,qBAAsB,MACtBC,gBAAiB,MACjBC,mBAAoB,MAErBR,MAAKS,MACJC,eAAgB,MAChBC,UAAW,MACXC,uBAAwBC,EAAG,EAAGC,EAAG,GAIlC7B,IAAGE,MAAMC,KAAK2B,aAAaC,gBAE3B/B,IAAGgC,KAAKC,SAAU,YAAajC,GAAGkC,SAASnB,KAAKoB,WAAY,GAAIpB,QAGjEoB,WAAY,WAEX,GAAGpB,KAAKE,MAAMG,aAAe,MAC7B,CACCL,KAAKqB,aAAarB,KAAKE,MAAMG,cAI/BiB,eAAgB,SAASC,GAExB,GAAIC,GAAaxB,KAAKyB,OAAO,gBAAgBC,MAAM1B,MAAOuB,GAC1D,UAAUC,IAAc,aAAeA,GAAc,KACrD,CACCA,EAAaD,EAGd,GAAII,GAAS1C,GAAG2C,MAAMJ,EAEtBvC,IAAG4C,SAASF,EAAQ,SACpB3B,MAAK8B,aAAaH,EAAQH,EAE1BxB,MAAKS,KAAKG,sBAAwBZ,KAAK+B,mBAAmBR,EAE1DtC,IAAG+C,OAAOL,EAAQT,SAASe,qBAAqB,QAAQ,GACxDjC,MAAKqB,aAAaM,EAElB,OAAOA,IAGRO,cAAe,SAASC,GAEvBlD,GAAG4C,SAAS7B,KAAKE,MAAME,MAAM+B,GAAGZ,KAAM,QACtCvB,MAAKS,KAAKE,UAAYwB,GAGvBC,kBAAmB,WAElB,GAAGpC,KAAKS,KAAKE,YAAc,MAC3B,CACC1B,GAAGoD,YAAYrC,KAAKE,MAAME,MAAMJ,KAAKS,KAAKE,WAAWY,KAAM,SAE5DvB,KAAKS,KAAKE,UAAY,OAGvB2B,WAAY,SAASH,GAEpBnC,KAAKS,KAAKC,eAAiByB,CAE3BnC,MAAKuC,sBAEL,IAAIC,GAAWxC,KAAKE,MAAMC,MAAMH,KAAKS,KAAKC,gBAAgBa,IAC1DtC,IAAG4C,SAASW,EAAU,SAGvBC,mBAAoB,WAEnB,GAAGzC,KAAKS,KAAKC,iBAAmB,MAChC,CACC,OAGD,GAAI8B,GAAWxC,KAAKE,MAAMC,MAAMH,KAAKS,KAAKC,gBAAgBa,IAE1DvB,MAAKS,KAAKC,eAAiB,KAC3BzB,IAAGoD,YAAYG,EAAU,OACzBxC,MAAKE,MAAMI,qBAAuB,OAGnCiC,qBAAsB,WAErB,GAAGvC,KAAKE,MAAMI,uBAAyB,OAASN,KAAKS,KAAKC,iBAAmB,MAC7E,CACC,GAAI8B,GAAWxC,KAAKE,MAAMC,MAAMH,KAAKS,KAAKC,gBAAgBa,IAE1D,IAAImB,KACJ,IAAIC,GAAaH,EAASG,UAC1B,KAAI,GAAIR,KAAKQ,GACb,CACC,GAAGA,EAAWR,GAAGS,UAAY,GAAK5C,KAAK6C,eAAeF,EAAWR,IACjE,CACC,GAAIW,GAAM7D,GAAG6D,IAAIH,EAAWR,GAC5B,IAAGW,EAAIC,OAASD,EAAIE,OACpB,CACCN,EAAMO,KAAKN,EAAWR,MAKzBnC,KAAKE,MAAMI,qBAAuBoC,IAKpCQ,wBAAyB,WAExB,GAAGlD,KAAKE,MAAMI,uBAAyB,OAASN,KAAKS,KAAKC,iBAAmB,OAASV,KAAKS,KAAKE,YAAc,MAC9G,CACC,GAAIwC,GAAKlE,GAAGE,MAAMC,KAAK2B,aAAaC,gBACpC,IAAIoC,GAAUnE,GAAG6D,IAAI9C,KAAKE,MAAMC,MAAMH,KAAKS,KAAKC,gBAAgBa,KAChE,IAAI8B,IACHxC,EAAGsC,EAAGtC,EAAIuC,EAAQE,KAClBxC,EAAGqC,EAAGrC,EAAIsC,EAAQG,IAMnB,IAAIC,GAAW,IAEf,KAAI,GAAIrB,KAAKnC,MAAKE,MAAMI,qBACxB,CACC,GAAIiB,GAAOvB,KAAKE,MAAMI,qBAAqB6B,EAC3C,IAAIsB,GAAUxE,GAAG6D,IAAIvB,EAErB,IAAImC,IACH7C,EAAG4C,EAAQH,KAAOF,EAAQE,KAC1BxC,EAAG2C,EAAQF,IAAMH,EAAQG,IAE1B,IAAII,GAAQC,KAAKC,MAAMJ,EAAQT,OAAS,EAIxC,IAAGK,EAAMvC,EAAK4C,EAAS5C,EAAI6C,EAC3B,CAEC,OAAQG,MAAON,EAAUO,OAAQxC,GAGlCiC,EAAWjC,EAKZ,OAAQuC,MAAON,EAAUO,OAAQ,MAIlC,OAAQD,MAAO,KAAMC,OAAQ,OAG9BC,aAAc,SAASzC,GAEtB,IAAItC,GAAGgF,KAAKC,cAAc3C,GAC1B,CACC,KAAM,IAAI4C,WAAU,uBAGrBC,KAAKC,aAAa9C,EAElBvB,MAAKE,MAAMC,MAAM8C,MAChB1B,KAAMA,KAIR+C,eAAgB,SAASC,GAExB,IAAItF,GAAGgF,KAAKC,cAAcK,GAC1B,CACC,OAGDH,KAAKI,eAAeD,EAEpB,KAAI,GAAIpC,KAAKnC,MAAKE,MAAMC,MACxB,CACC,GAAGH,KAAKE,MAAMC,MAAMgC,GAAGZ,OAASA,KAChC,CACCvB,KAAKE,MAAMC,MAAMgC,GAAK,IACtBnC,MAAKE,MAAMC,MAAMsE,OAAOtC,EAAG,MAK9BuC,SAAU,SAASnD,EAAMoD,GAExB,IAAI1F,GAAGgF,KAAKC,cAAc3C,GAC1B,CACC,KAAM,IAAI4C,WAAU,oBAGrB,GAAIS,IAAUrD,EACd,UAAUoD,IAAc,mBAAsBA,GAAWC,QAAU,YACnE,CACC,GAAG3F,GAAGgF,KAAKC,cAAcS,EAAWC,QACpC,CACCA,GAAUD,EAAWC,YAEjB,IAAG,UAAYD,GAAWC,OAC/B,CACCA,IACA,KAAI,GAAIzC,GAAI,EAAGA,EAAIwC,EAAWC,OAAOC,OAAQ1C,IAC7C,CACC,GAAGlD,GAAGgF,KAAKC,cAAcS,EAAWC,OAAOzC,IAC3C,CACCyC,EAAO3B,KAAK0B,EAAWC,OAAOzC,OAMlC,IAAI,GAAIA,GAAI,EAAGA,EAAIyC,EAAOC,OAAQ1C,IAClC,CACCiC,KAAKU,eAAeF,EAAOzC,GAE3ByC,GAAOzC,GAAG4C,cAAgB/E,KAAKgF,QAAQhF,KAAKiF,YAAajF,KACzD4E,GAAOzC,GAAG+C,SAAWjG,GAAGkC,SAASnB,KAAKmF,OAAQ,IAAKnF,KACnD4E,GAAOzC,GAAGiD,aAAenG,GAAGoG,SAASrF,KAAKsF,WAAYtF,KACtD4E,GAAOzC,GAAGoD,cAAgBtG,GAAGoG,SAASrF,KAAKwF,YAAaxF,KACxD4E,GAAOzC,GAAGsD,aAAexG,GAAGoG,SAASrF,KAAK0F,WAAY1F,MAGvDA,KAAKE,MAAME,MAAM6C,MAChB1B,KAAMA,EACNqD,OAAQA,KAIVe,WAAY,SAASpE,GAEpB,IAAItC,GAAGgF,KAAKC,cAAc3C,GAC1B,CACC,OAGD,IAAI,GAAIqE,KAAK5F,MAAKE,MAAME,MACxB,CACC,GAAGJ,KAAKE,MAAME,MAAMwF,GAAGrE,OAASA,EAChC,CACC,GAAIqD,GAAS5E,KAAKE,MAAME,MAAMwF,GAAGhB,MAEjC,KAAI,GAAIzC,GAAI,EAAGA,EAAIyC,EAAOC,OAAQ1C,IAClC,CACCiC,KAAKyB,iBAAiBjB,EAAOzC,GAE7ByC,GAAOzC,GAAG4C,cAAgB,IAC1BH,GAAOzC,GAAG+C,SAAW,IACrBN,GAAOzC,GAAGiD,aAAe,IACzBR,GAAOzC,GAAGoD,cAAgB,IAC1BX,GAAOzC,GAAGsD,aAAe,KAG1BzF,KAAKE,MAAME,MAAMwF,GAAK,IACtB5F,MAAKE,MAAME,MAAMqE,OAAOmB,EAAG,EAE3B,WAKH/C,eAAgB,SAAStB,GAExB,IAAItC,GAAGgF,KAAKC,cAAc3C,GAC1B,CACC,OAGD,IAAI,GAAIqE,KAAK5F,MAAKE,MAAME,MACxB,CACC,GAAGJ,KAAKE,MAAME,MAAMwF,GAAGrE,OAASA,EAChC,CACC,MAAO,OAIT,MAAO,QAGR0D,YAAa,SAASL,GAErB,GAAIzC,GAAInC,KAAK8F,qBAAqBlB,EAClC,UAAU5E,MAAKE,MAAME,MAAM+B,GAC3B,CACCnC,KAAKE,MAAMG,WAAaL,KAAKsB,eAAetB,KAAKE,MAAME,MAAM+B,GAAGZ,KAChEvB,MAAKkC,cAAcC,KAIrBgD,OAAQ,WAEP,GAAGnF,KAAKS,KAAKC,iBAAmB,MAChC,CACC,GAAI8B,GAAWxC,KAAK+F,iBAAiBxE,IACrCvB,MAAKE,MAAMK,gBAAkBP,KAAKkD,yBAElClD,MAAKgG,qBAAqBhG,KAAKE,MAAMM,mBAAoB,MACzDR,MAAKgG,qBAAqBhG,KAAKE,MAAMK,gBAAiB,KAEtDP,MAAKiG,gBAAgBzD,EAAUxC,KAAKE,MAAMK,gBAE1CP,MAAKE,MAAMM,mBAAqBR,KAAKE,MAAMK,eAE3CP,MAAKkG,UAAU,eAAgB1D,EAAUxC,KAAKE,MAAMK,oBAItD+E,WAAY,WAEX,GAAGtF,KAAKS,KAAKC,iBAAmB,MAChC,CACC,GAAI8B,GAAWxC,KAAKE,MAAMC,MAAMH,KAAKS,KAAKC,gBAAgBa,IAC1D,IAAI4E,GAAYnG,KAAKE,MAAME,MAAMJ,KAAKS,KAAKE,WAAWY,IAEtD,IAAGvB,KAAKE,MAAMK,kBAAoB,MAClC,CACC,GAAI6F,IACHrC,OAAQ/D,KAAKE,MAAMK,gBAAgBwD,OACnCD,MAAO9D,KAAKE,MAAMK,gBAAgBuD,MAClCS,KAAM/B,EAEP,IAAI6D,GAAYD,EAAUrC,QAAUoC,GAAaC,EAAUtC,OAASqC,CAEpE,IAAIG,GAAU,GAAIrH,IAAGsH,QAAQ,KAAMvG,KACnCsG,GAAQE,eAAe,KAEvB,IAAGH,EACH,CACCrG,KAAKkG,UAAU,0BAA2BI,EAASH,EAAWC,IAG/DE,EAAQG,KAAK,WAEZ,GAAGJ,EACH,CACC,GAAGrG,KAAKE,MAAMK,gBAAgBwD,SAAW,KACzC,CACC9E,GAAG+C,OAAOmE,EAAW3D,OAGtB,CACCA,EAASkE,aAAaP,EAAWC,EAAUrC,QAG5C/D,KAAKkG,UAAU,kBAAmBC,EAAW3D,EAAU4D,IAGxDpG,KAAK2G,qBACL3G,MAAKiG,gBAAgBzD,EACrBxC,MAAKyC,oBAEL,OAAO,QAELgE,KAAK,WAEP,GAAIG,GAAS,GAAI3H,IAAGsH,QAAQ,KAAMvG,KAClC4G,GAAOJ,eAAe,KAEtB,IAAGH,EACH,CACCrG,KAAKkG,UAAU,yBAA0BU,EAAQT,EAAWC,IAG7D,MAAOQ,MAKV5G,KAAKoC,mBACL,IAAGpC,KAAKE,MAAMyB,SAAW,MACzB,CACC1C,GAAG4H,OAAO7G,KAAKE,MAAMG,cAIvBmF,YAAa,SAASjB,EAAM1D,EAAGC,GAE9B,GAAG7B,GAAGgF,KAAKC,cAAcK,GACzB,CACC,GAAIpC,GAAInC,KAAK8G,iBAAiBvC,EAE9B,IAAGpC,IAAM,MACT,CACCnC,KAAKsC,WAAWH,MAKnBuD,WAAY,SAASnB,EAAM1D,EAAGC,GAE7B,GAAG7B,GAAGgF,KAAKC,cAAcK,IAAUvE,KAAK8G,iBAAiBvC,KAAU,MACnE,CACCvE,KAAKyC,oBACLzC,MAAK2G,qBACL3G,MAAKiG,gBAAgB1B,KAIvBwB,eAAgB,WAEf,MAAO/F,MAAKE,MAAMC,MAAMH,KAAKS,KAAKC,iBAGnCiG,oBAAqB,WAEpB3G,KAAKgG,qBAAqBhG,KAAKE,MAAMK,gBAAiB,MACtDP,MAAKE,MAAMK,gBAAkB,OAG9ByF,qBAAsB,SAASe,EAAOC,GAErC,GAAGD,EACH,CACC,GAAIE,GAAajH,KAAKyB,OAAO,qBAC7B,IAAIyF,GAAYlH,KAAKyB,OAAO,oBAE5B,IAAGuF,EACH,CACC,GAAGE,GAAaH,EAAMjD,QAAU7E,GAAGkI,SAASJ,EAAMjD,MAAO,SACzD,CACC7E,GAAG4C,SAASkF,EAAMjD,MAAO,SAE1B,GAAGmD,GAAcF,EAAMhD,SAAW9E,GAAGkI,SAASJ,EAAMhD,OAAQ,UAC5D,CACC9E,GAAG4C,SAASkF,EAAMhD,OAAQ,eAI5B,CACC,GAAGmD,GAAaH,EAAMjD,OAAS7E,GAAGkI,SAASJ,EAAMjD,MAAO,SACxD,CACC7E,GAAGoD,YAAY0E,EAAMjD,MAAO,SAE7B,GAAGmD,GAAcF,EAAMhD,QAAU9E,GAAGkI,SAASJ,EAAMhD,OAAQ,UAC3D,CACC9E,GAAGoD,YAAY0E,EAAMhD,OAAQ,cAMjCkC,gBAAiB,SAASzD,EAAUuE,GAEnC,IAAI/G,KAAKyB,OAAO,yBAChB,CACC,OAGD,IAAIsF,EACJ,CACCA,GAASjD,MAAO,KAAMC,OAAQ,MAG/B,GAAGvB,EACH,CACC,IAAIuE,EAAMjD,MACV,CACC,IAAI7E,GAAGkI,SAAS3E,EAAU,OAC1B,CACCvD,GAAG4C,SAASW,EAAU,YAIxB,CACC,GAAGvD,GAAGkI,SAAS3E,EAAU,OACzB,CACCvD,GAAGoD,YAAYG,EAAU,QAI3B,IAAIuE,EAAMhD,OACV,CACC,IAAI9E,GAAGkI,SAAS3E,EAAU,UAC1B,CACCvD,GAAG4C,SAASW,EAAU,eAIxB,CACC,GAAGvD,GAAGkI,SAAS3E,EAAU,UACzB,CACCvD,GAAGoD,YAAYG,EAAU,cAM7BsE,iBAAkB,SAASvF,GAG1B,IAAI,GAAIY,KAAKnC,MAAKE,MAAMC,MACxB,CACC,GAAGH,KAAKE,MAAMC,MAAMgC,GAAGZ,OAASA,EAChC,CACC,MAAOY,IAIT,MAAO,QAGR2D,qBAAsB,SAASsB,GAE9B,IAAI,GAAIxB,KAAK5F,MAAKE,MAAME,MACxB,CACC,GAAIwE,GAAS5E,KAAKE,MAAME,MAAMwF,GAAGhB,MAEjC,KAAI,GAAIzC,GAAI,EAAGA,EAAIyC,EAAOC,OAAQ1C,IAClC,CACC,GAAGyC,EAAOzC,KAAOiF,EACjB,CACC,MAAOxB,KAKV,MAAO,QAGR9D,aAAc,SAASP,EAAM8F,GAE5B,GAAIC,IACHC,SAAY,WACZhE,IAAO,QACPD,KAAQ,QACRkE,OAAU,EACVC,aAAc,aACdC,UAAW,IAGZ,IAAIC,GAAIN,EAAOO,WACf,IAAGD,EAAI,EACP,CACCL,EAAM,SAAWK,EAAE,KAGpB,GAAIE,GAAIR,EAAOS,YACf,IAAGD,EAAI,EACP,CACCP,EAAM,UAAYO,EAAE,KAGrB5I,GAAG8I,OAAOxG,GAAO+F,MAAOA,KAGzBvF,mBAAoB,SAASR,GAE5B,GAAIkC,GAAUxE,GAAG6D,IAAIvB,EACrB,IAAIyG,GAAS/I,GAAGE,MAAMC,KAAK2B,aAAaC,gBAExC,IAAIH,GAAImH,EAAOnH,EAAI4C,EAAQH,IAC3B,IAAIxC,GAAIkH,EAAOlH,EAAI2C,EAAQF,GAE3B,QACC1C,EAAGA,EACHC,EAAGA,IAILO,aAAc,SAASE,GAEtB,GAAIyG,GAAS/I,GAAGE,MAAMC,KAAK2B,aAAaC,gBACxC,IAAIiH,GAAOjI,KAAKS,KAAKG,qBAErB3B,IAAG8I,OAAOxG,GAAO+F,OAChB/D,IAAQyE,EAAOlH,EAAImH,EAAKnH,EAAG,KAC3BwC,KAAS0E,EAAOnH,EAAIoH,EAAKpH,EAAG"}