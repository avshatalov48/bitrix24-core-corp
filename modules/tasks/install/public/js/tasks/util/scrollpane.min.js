BX.namespace("Tasks.Util");if(typeof BX.Tasks.Util.ScrollPane=="undefined"){BX.Tasks.Util.ScrollPane=BX.Tasks.Util.Widget.extend({options:{controlBind:"class"},sys:{code:"scrollpane"},methods:{construct:function(){this.callConstruct(BX.Tasks.Util.Widget);this.vars.prevScroll=false;this.bindEvents()},bindEvents:function(){this.bindControlThis("pane","mousewheel",this.filterWheel);this.onScrollChanged=BX.throttle(this.onScrollChanged,50,this);this.bindControlThis("pane","scroll",this.onScrollChanged);this.bindControlThis("body","touchstart",this.onScrollChanged);BX.bind(window,"resize",BX.delegate(this.onScrollChanged,this));this.onScrollChanged()},onScrollChanged:function(t){var i=this.control("pane");if(!i){return}var n=i.scrollTop;if(t||this.vars.prevScroll===false||this.vars.prevScroll!==n){if(!n){this.fireEvent("top-reached")}var e=this.control("body").clientHeight;var s=i.clientHeight;if(n+s>=e){this.fireEvent("bottom-reached")}}this.vars.prevScroll=n},filterWheel:function(t){var i=BX.getWheelData(t);var n=this.control("pane");var e=false;if(i>0&&n.scrollTop==0){e=true}if(i<0&&n.scrollTop>=n.scrollHeight-n.clientHeight){e=true}if(e){BX.PreventDefault(t);BX.eventCancelBubble(t);return false}},append:function(t){var i=this.control("container");if(i){if(t){var n=BX.create("div");if(BX.type.isNotEmptyString(t)){n.innerHTML=t;BX.append(n,i)}this.onScrollChanged(true)}}},prepend:function(t){this.onScrollChanged(true)},clear:function(){var t=this.control("container");if(t){t.innerHTML=""}this.vars.prevScroll=false},destroy:function(){}}})}if(typeof BX.Tasks.Util.ScrollPanePopup=="undefined"){BX.Tasks.Util.ScrollPanePopup=BX.Tasks.Util.ScrollPane.extend({options:{popupParameters:{},windowId:"",maxHeight:300},methods:{construct:function(){this.callConstruct(BX.Tasks.Util.ScrollPane);this.vars.bindTo=null;this.vars.popupId=BX.type.isNotEmptyString(this.option("windowId"))?this.option("windowId"):this.code()+"-popup-"+Math.floor(Math.random()*1e4)},getPopup:function(){if(typeof this.instances.window=="undefined"){var t={zIndex:22e3,content:this.scope(),autoHide:true,closeByEsc:true};var i=this.option("popupParameters");for(var n in i){if(i.hasOwnProperty(n)){t[n]=i[n]}}this.instances.window=new BX.PopupWindow(this.vars.popupId,this.vars.bindTo,t)}return this.instances.window},bindTo:function(t){this.vars.bindTo=t;if(this.instances.window){this.instances.window.setBindElement(t)}return this},show:function(t){if(BX.type.isElementNode(t)){this.bindTo(t)}this.control("pane").style.maxHeight=this.option("maxHeight")+"px";this.getPopup().show();this.onScrollChanged(true);return this},hide:function(){if(this.instances.window){this.getPopup().close()}return this},onScrollChanged:function(t){if(this.instances.window&&this.instances.window.isShown()){this.callMethod(BX.Tasks.Util.ScrollPane,"onScrollChanged",arguments)}},destroy:function(){this.hide();if(this.instances.window){this.instances.window.close();this.instances.window.destroy();this.instances.window=null}}}})}
//# sourceMappingURL=scrollpane.map.js