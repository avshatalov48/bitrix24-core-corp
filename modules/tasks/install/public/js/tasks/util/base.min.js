BX.namespace("Tasks.Util");BX.Tasks.Util.Base=function(t){};BX.mergeEx(BX.Tasks.Util.Base.prototype,{construct:function(){var t=this.option("earlyBind");if(t){for(var e in t){if(t.hasOwnProperty(e)&&BX.type.isFunction(t[e])){this.bindEvent(e,t[e])}}}},fireEvent:function(t,e){BX.onCustomEvent(this,t,e)},bindEvent:function(t,e,i){if(i){e=BX.delegate(e,i)}BX.addCustomEvent(this,t,e)},callMethod:function(t,e,i){if(!BX.type.isNotEmptyString(e)){throw new Error("Illegal method name: "+e)}if(!BX.type.isFunction(t.prototype[e])){throw new Error("No such method in class: "+e)}return t.prototype[e].apply(this,i)},callConstruct:function(t){this.callMethod(t,"construct")},runParentConstructor:function(t){if(typeof t.superclass=="object"){t.superclass.constructor.apply(this,[null,true])}},walkPrototypeChain:function(t,e){var i=t.constructor;while(typeof i!="undefined"&&i!=null){e.apply(this,[i.prototype,i.superclass]);if(typeof i.superclass=="undefined"){return}i=i.superclass.constructor}},destroy:function(){this.walkPrototypeChain(this,function(t){if(typeof t.destruct=="function"){t.destruct.call(this)}})},option:function(t,e){if(typeof e!="undefined"){this.opts[t]=e}else{return typeof this.opts[t]!="undefined"?this.opts[t]:false}},optionInteger:function(t){var e=parseInt(this.option(t));return isNaN(e)?0:e},subInstance:function(t,e){this.instances=this.instances||{};if(e){if(BX.type.isFunction(e)){if(typeof this.instances[t]=="undefined"){var i=e.call(this);if(i instanceof BX.Tasks.Util.Widget){i.parent(this)}this.instances[t]=i}}else{this.instances[t]=e}return this.instances[t]}else{if(typeof t!="undefined"&&BX.type.isNotEmptyString(t)){return this.instances[t]?this.instances[t]:null}return null}},initialized:function(){return this.sys.initialized},passCtx:function(t){var e=this;return function(){var i=Array.prototype.slice.call(arguments);i.unshift(this);return t.apply(e,i)}},id:function(t){if(typeof t!="undefined"&&BX.type.isNotEmptyString(t)){this.sys.id=t.toString().toLowerCase()}else{return this.sys.id}},register:function(){if(this.option("registerDispatcher")){var t=this.id();if(t){BX.Tasks.Util.Dispatcher.register(t,this)}}}});BX.Tasks.Util.Base.extend=function(t){if(typeof t=="undefined"||!BX.type.isPlainObject(t)){t={}}var e=function(i,s){if(!("runParentConstructor"in this)){throw new TypeError('Did you miss "new" when creating an instance?')}this.runParentConstructor(e);if(typeof this.opts=="undefined"){this.opts={registerDispatcher:false}}if(typeof t.options!="undefined"&&BX.type.isPlainObject(t.options)){BX.mergeEx(this.opts,t.options)}if(typeof this.sys=="undefined"){this.sys={id:false,initialized:false}}if(typeof t.sys!="undefined"&&BX.type.isPlainObject(t.sys)){BX.mergeEx(this.sys,t["sys"])}delete t;delete e;if(!s){if(typeof i!="undefined"&&BX.type.isPlainObject(i)){BX.mergeEx(this.opts,i)}this.id(this.option("id"));this.register();this.construct();this.sys.initialized=true}};e.extend=BX.Tasks.Util.Base.extend;BX.extend(e,this);t.methods=t.methods||{};t.constants=t.constants||{};if(typeof t.methods!="undefined"&&BX.type.isPlainObject(t.methods)){for(var i in t.methods){if(t.methods.hasOwnProperty(i)){e.prototype[i]=t.methods[i]}}}if(BX.type.isPlainObject(t.methodsStatic)){for(var s in t.methodsStatic){if(t.methodsStatic.hasOwnProperty(s)){e[s]=t.methodsStatic[s]}}}if(typeof t.constants!="undefined"&&BX.type.isPlainObject(t.constants)){for(var n in t.constants){if(t.constants.hasOwnProperty(n)){e.prototype[n]=t.constants[n]}}}if(typeof t.methods.construct!="function"){var r=this;e.prototype.construct=function(){this.callConstruct(r);delete r}}if(typeof t.methods.destruct!="function"){e.prototype.destruct=BX.DoNothing()}return e};BX.Tasks.Util.Dispatcher=BX.Tasks.Util.Base.extend({methods:{construct:function(){this.callConstruct(BX.Tasks.Util.Base);this.vars={registry:{},pend:{bind:{},call:{},find:{}}}},destruct:function(){this.vars=null},registerInstance:function(t,e){if(!BX.type.isNotEmptyString(t)){throw new ReferenceError("Trying to register while id is empty")}if(e==null||e==false){throw new ReferenceError("Bad instance")}if(typeof this.vars.registry[t]!="undefined"){throw new ReferenceError('The id "'+t.toString()+'" is already in use in registry')}this.vars.registry[t]=e;if(typeof this.vars.pend.bind[t]!="undefined"){for(var i in this.vars.pend.bind[t]){this.vars.registry[t].bindEvent(this.vars.pend.bind[t][i].event,this.vars.pend.bind[t][i].cb)}delete this.vars.pend.bind[t]}if(typeof this.vars.pend.call[t]!="undefined"){BX.Tasks.Util.each(this.vars.pend.call[t],function(t){if(!(t.method in e)){t.pr.reject()}else{t.pr.resolve(e[t.method].call(e,t.args))}});delete this.vars.pend.call[t]}if(typeof this.vars.pend.find[t]!="undefined"){BX.Tasks.Util.each(this.vars.pend.find[t],function(t){t.pr.resolve(e)});delete this.vars.pend.find[t]}},getRegistry:function(){var t={};BX.Tasks.each(this.vars.registry,function(e,i){t[i]=e});return t},get:function(t){if(typeof this.vars.registry[t]=="undefined"){return null}return this.vars.registry[t]},find:function(t){var e=new BX.Promise;t=this.castToLiteralString(t);if(!t){e.reject();return e}var i=this.get(t);if(i){e.resolve(i)}else{if(typeof this.vars.pend.find[t]=="undefined"){this.vars.pend.find[t]=[]}this.vars.pend.find[t].push({pr:e})}return e},call:function(t,e,i){var s=new BX.Promise;t=this.castToLiteralString(t);e=this.castToLiteralString(e);if(!t||!e){s.reject();return s}var n=this.get(t);if(n!==null){if(!(e in n)){s.reject();return s}else{s.resolve(n[e].call(n,i||[]))}}else{this.vars.pend.call[t].push({method:e,args:i||[],pr:s})}return s},addDeferredBind:function(t,e,i){if(!BX.type.isNotEmptyString(t)){throw new TypeError("Bad id: "+t)}if(!BX.type.isNotEmptyString(e)){throw new TypeError("Bad event name: "+e)}if(!BX.type.isFunction(i)){throw new TypeError("Callback is not a function to call for: "+t+" "+e)}if(typeof this.vars.registry[t]!="undefined"){this.vars.registry[t].bindEvent(e,i)}else{if(typeof this.vars.pend.bind[t]=="undefined"){this.vars.pend.bind[t]=[]}this.vars.pend.bind[t].push({event:e,cb:i})}},addDeferredFire:function(t,e,i,s){if(!BX.type.isNotEmptyString(t)){throw new TypeError("Bad id: "+t)}if(!BX.type.isNotEmptyString(e)){throw new TypeError("Bad event name: "+e)}i=i||[];if(typeof this.vars.registry[t]!="undefined"){this.vars.registry[t].fireEvent(e,i)}else{}},castToLiteralString:function(t){if(typeof t=="undefined"||t===null){return null}t=t.toString().trim();if(!BX.type.isNotEmptyString(t)){return null}return t}}});BX.Tasks.Util.Dispatcher.register=function(t,e){BX.Tasks.Util.Dispatcher.getInstance().registerInstance(t,e)};BX.Tasks.Util.Dispatcher.getRegistry=function(){return BX.Tasks.Util.Dispatcher.getInstance().getRegistry()};BX.Tasks.Util.Dispatcher.call=function(t,e,i){return BX.Tasks.Util.Dispatcher.getInstance().call(t,e,i)};BX.Tasks.Util.Dispatcher.find=function(t){return BX.Tasks.Util.Dispatcher.getInstance().find(t)};BX.Tasks.Util.Dispatcher.getInstance=function(){if(typeof BX.Tasks.Singletons=="undefined"){BX.Tasks.Singletons={}}if(typeof BX.Tasks.Singletons.dispatcher=="undefined"){BX.Tasks.Singletons.dispatcher=new BX.Tasks.Util.Dispatcher({registerDispatcher:false})}return BX.Tasks.Singletons.dispatcher};BX.Tasks.Util.Dispatcher.bindEvent=function(t,e,i){BX.Tasks.Util.Dispatcher.getInstance().addDeferredBind(t,e,i)};BX.Tasks.Util.Dispatcher.fireEvent=function(t,e,i,s){BX.Tasks.Util.Dispatcher.getInstance().addDeferredFire(t,e,i,s)};BX.Tasks.Util.Dispatcher.get=function(t){return BX.Tasks.Util.Dispatcher.getInstance().get(t)};
//# sourceMappingURL=base.map.js