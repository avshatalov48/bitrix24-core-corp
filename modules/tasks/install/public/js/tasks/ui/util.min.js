BX.namespace("Tasks.UI");BX.Tasks.UI.Util={formatTimeAmount:function(e){var t="00";var i=""+Math.floor(e/3600);var n=""+Math.floor(e/60)%60;result=t.substring(0,2-i.length)+i+":"+t.substring(0,2-n.length)+n;seconds=""+e%60;result=result+":"+t.substring(0,2-seconds.length)+seconds;return result},delay:function(e,t,i){e=e||BX.DoNothing;t=t||300;i=i||this;var n=null;var o=function(){var o=arguments;n=setTimeout(function(){e.apply(i,o)},t)};o.cancel=function(){clearTimeout(n)};return o},fadeToggle:function(e,t,i,n){BX.Tasks.UI.Util.animateShowHide({node:e,duration:i,way:t,toShow:{opacity:100},toHide:{opacity:0},complete:n})},fadeSlideToggle:function(e,t,i,n){BX.Tasks.UI.Util.animateShowHide({node:e,duration:i,way:t,toShow:{opacity:100,height:BX.Tasks.UI.Util.getInvisibleSize(e).height},toHide:{opacity:0,height:0},complete:n})},fadeSlideHToggle:function(e,t,i,n){BX.Tasks.UI.Util.animateShowHide({node:e,duration:i,way:t,toShow:{opacity:100,width:BX.Tasks.UI.Util.getInvisibleSize(e).width},toHide:{opacity:0,width:0},complete:n})},getInvisibleSize:function(e){var t=BX.hasClass(e,"invisible");if(t){BX.removeClass(e,"invisible")}var i=BX.pos(e);if(t){BX.addClass(e,"invisible")}return i},animate:function(e){var e=e||{};var t=e.node||null;if(!BX.type.isElementNode(t)){return}var i=e.duration||300;var n=BX.Tasks.UI.Util.Runtime;if(typeof n.animations=="undefined"){n.animations=[]}var o=null;for(var s in n.animations){if(n.animations[s].node==t){o=n.animations[s];break}}if(o===null){var a=new BX.easing({duration:i,start:e.start,finish:e.finish,transition:BX.easing.transitions.linear,step:e.step,complete:function(){e.complete.call(this);for(var i in n.animations){if(n.animations[i].node==t){n.animations[i].easing=null;n.animations[i].node=null;n.animations.splice(i,1);break}}t=null;o=null}});o={node:t,easing:a};n.animations.push(o)}else{o.easing.stop()}o.easing.animate()},animateShowHide:function(e){var e=e||{};var t=e.node||null;if(!BX.type.isElementNode(t)){return}var i=BX.hasClass(t,"invisible");var n=typeof e.way=="undefined"||e.way===null?i:!!e.way;if(i!=n){return}var o=e.toShow||{};var s=e.toHide||{};BX.Tasks.UI.Util.animate({node:t,duration:e.duration,start:!n?o:s,finish:n?o:s,complete:function(){BX[!n?"addClass":"removeClass"](t,"invisible");t.style.cssText="";if(BX.type.isFunction(e.complete)){e.complete.call(this)}},step:function(e){if(typeof e.opacity!="undefined"){t.style.opacity=e.opacity/100}if(typeof e.height!="undefined"){t.style.height=e.height+"px"}if(typeof e.width!="undefined"){t.style.width=e.width+"px"}}})},isEnter:function(e){e=e||window.event;return e.keyCode==13},filterFocusBlur:function(e,t,i,n){if(!BX.type.isElementNode(e)){return false}var o=false;t=t||BX.DoNothing;i=i||BX.DoNothing;n=n||50;var s=function(e,s){if(e){if(o!=false){clearTimeout(o);o=false}else{t.apply(this,s)}}else{o=setTimeout(function(){o=false;i.apply(this,s)},n)}};BX.bind(e,"blur",function(){s.apply(this,[false,arguments])});BX.bind(e,"focus",function(){s.apply(this,[true,arguments])});return true},bindInstantChange:function(e,t,i){if(!BX.type.isElementNode(e)){return BX.DoNothing}i=i||e;var n=e.value;var o=BX.debounce(function(o){if(e.value.toString()!=n.toString()){t.apply(i,arguments);n=e.value}},3,i);BX.bind(e,"input",o);BX.bind(e,"keyup",o);BX.bind(e,"change",o)},fireChange:function(e){if(!BX.type.isElementNode(e)){return}if("createEvent"in document){var t=document.createEvent("HTMLEvents");t.initEvent("change",false,true);e.dispatchEvent(t)}else{e.fireEvent("onchange")}},disable:function(e){if(BX.type.isElementNode(e)){e.setAttribute("disabled","disabled")}},enable:function(e){if(BX.type.isElementNode(e)){e.removeAttribute("disabled")}},getMessagePlural:function(e,t){var i,n;n=BX.message("LANGUAGE_ID");e=parseInt(e);if(e<0){e=-1*e}if(n){switch(n){case"de":case"en":i=e!==1?1:0;break;case"ru":case"ua":i=e%10===1&&e%100!==11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2;break;default:i=1;break}}else{i=1}if(BX.type.isArray(t)){return t[i]}return BX.message(t+"_PLURAL_"+i)},showErrorPopup:function(e,t){if(BX.Tasks.UI.Util.Runtime.errorPopup==null){BX.Tasks.UI.Util.Runtime.errorPopup=new BX.PopupWindow("task-error-popup",null,{lightShadow:true})}var i=BX.Tasks.UI.Util.Runtime.errorPopup;if(i===null){i=new BX.PopupWindow("task-error-popup",null,{lightShadow:true})}i.setButtons([new BX.PopupWindowButton({text:BX.message("JS_CORE_WINDOW_CLOSE"),className:"",events:{click:function(){if(BX.type.isFunction(t)){t()}else{BX.reload()}this.popupWindow.close()}}})]);var n="";for(var o=0;o<e.length;o++){n+=(typeof e[o].MESSAGE!=="undefined"?e[o].MESSAGE:e[o])+"<br>"}i.setContent("<div style='width: 350px;padding: 10px; font-size: 12px; color: red;'>"+n+"</div>");if(window.console&&window.console.dir){window.console.dir(e)}i.show()},showConfirmPopup:function(e,t,i){if(BX.Tasks.UI.Util.Runtime.confirmPopup==null){BX.Tasks.UI.Util.Runtime.confirmPopup=new BX.PopupWindow("task-confirm-popup",null,{zIndex:22e3,overlay:{opacity:50},titleBar:{},content:"",autoHide:false,closeByEsc:false,buttons:[new BX.PopupWindowButton({text:BX.message("JS_CORE_WINDOW_CONTINUE"),className:"popup-window-button-accept",events:{click:function(){i.apply(this,[true]);this.popupWindow.close()}}}),new BX.PopupWindowButton({text:BX.message("JS_CORE_WINDOW_CANCEL"),events:{click:function(){i.apply(this,[false]);this.popupWindow.close()}}})]})}BX.Tasks.UI.Util.Runtime.confirmPopup.setTitleBar({content:e});BX.Tasks.UI.Util.Runtime.confirmPopup.setContent(t.outerHTML);BX.Tasks.UI.Util.Runtime.confirmPopup.show()},fireGlobalTaskEvent:function(e,t,i,n){if(!e){return false}e=e.toString();i=i||{};if(e!="ADD"&&e!="UPDATE"&&e!="DELETE"&&e!="NOOP"){return false}var o=[e,{task:t,taskUgly:n,options:i}];BX.onCustomEvent(window,"tasksTaskEvent",o);if(window!=window.top){window.top.BX.onCustomEvent(window.top,"tasksTaskEvent",o)}return true}};BX.Tasks.UI.Util.hintManager={show:function(e,t,i,n,o){n=n||BX.util.hashCode((Math.random()*100).toString()).toString();o=o||{};var s=BX.Tasks.UI.Util.Runtime;s.hintPopup=s.hintPopup||{};if(typeof s.hintPopup[n]=="undefined"){s.hintPopup[n]={popup:null,disable:false}}if(s.hintPopup[n].disable){return}if(s.hintPopup[n].popup==null){var a=[];if(BX.type.isNotEmptyString(o.title)){a.push(BX.create("SPAN",{attrs:{className:"task-hint-popup-title"},text:o.title}))}a.push(BX.create("P",{text:t,style:{margin:"10px 20px 10px 5px"}}));if(BX.type.isNotEmptyString(o.closeLabel)){a.push(BX.create("P",{style:{margin:"10px 20px 10px 5px"},children:[BX.create("A",{props:{href:"javascript:void(0)"},text:o.closeLabel,events:{click:function(){BX.Tasks.UI.Util.hintManager.disable(n);BX.Tasks.UI.Util.hintManager.hide(n)}}})]}))}s.hintPopup[n].popup=BX.PopupWindowManager.create(n,e,{closeByEsc:false,closeIcon:true,angle:{},autoHide:o.autoHide===true,offsetLeft:50,offsetTop:5,events:{onPopupClose:BX.delegate(this.onViewModeHintClose,this)},content:BX.create("DIV",{attrs:{className:"task-hint-popup-contents"},children:a})})}s.hintPopup[n].popup.show()},hide:function(e){try{BX.Tasks.UI.Util.Runtime.hintPopup[e].popup.close()}catch(t){}},disable:function(e){BX.Tasks.UI.Util.Runtime.hintPopup[e].disable=true;BX.userOptions.save("tasks","task_hints",e,"N",false)},disableSeveral:function(e){if(BX.type.isPlainObject(e)){var t=BX.Tasks.UI.Util.Runtime;t.hintPopup=t.hintPopup||{};for(var i in e){t.hintPopup[i]=t.hintPopup[i]||{};t.hintPopup[i].disable=!e[i]}}}};if(typeof BX.Tasks.UI.Util.Runtime=="undefined"){BX.Tasks.UI.Util.Runtime={errorPopup:null,confirmPopup:null}}
//# sourceMappingURL=util.map.js