{"version":3,"file":"scrum.dod.bundle.js","sources":["../src/side.panel.js","../src/request.sender.js","../src/scrum.dod.js"],"sourcesContent":["import {EventEmitter} from 'main.core.events';\n\nexport class SidePanel extends EventEmitter\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\n\t\tthis.setEventNamespace('BX.Tasks.Scrum.DodSidePanel');\n\n\t\t/* eslint-disable */\n\t\tthis.sidePanelManager = BX.SidePanel.Instance;\n\t\t/* eslint-enable */\n\n\t\tthis.BX = window.top.BX;\n\n\t\tthis.bindEvents();\n\t}\n\n\tbindEvents()\n\t{\n\t\t/* eslint-disable */\n\t\tthis.BX.addCustomEvent(window.top, 'SidePanel.Slider:onLoad', (event) => {\n\t\t\tconst sidePanel = event.getSlider();\n\t\t\tsidePanel.setCacheable(false);\n\t\t\tthis.emit('onLoadSidePanel', sidePanel);\n\t\t});\n\t\tthis.BX.addCustomEvent(window.top, 'SidePanel.Slider:onClose', (event) => {\n\t\t\tconst sidePanel = event.getSlider();\n\t\t\tthis.emit('onCloseSidePanel', sidePanel);\n\t\t});\n\t\t/* eslint-enable */\n\t}\n\n\tisPreviousSidePanelExist(currentSidePanel): Boolean\n\t{\n\t\treturn Boolean(this.sidePanelManager.getPreviousSlider(currentSidePanel));\n\t}\n\n\treloadTopSidePanel()\n\t{\n\t\tthis.sidePanelManager.getTopSlider().reload();\n\t}\n\n\tcloseTopSidePanel()\n\t{\n\t\tthis.sidePanelManager.getTopSlider().close();\n\t}\n\n\treloadPreviousSidePanel(currentSidePanel)\n\t{\n\t\tconst previousSidePanel = this.sidePanelManager.getPreviousSlider(currentSidePanel);\n\t\tpreviousSidePanel.reload();\n\t}\n\n\topenSidePanelByUrl(url)\n\t{\n\t\tthis.sidePanelManager.open(url);\n\t}\n\n\topenSidePanel(id, options)\n\t{\n\t\tthis.sidePanelManager.open(id, options);\n\t}\n}","import {Loc, Type} from 'main.core';\nimport {MessageBox} from \"ui.dialogs.messagebox\";\n\ntype RequestDataListComponent = {\n\tgroupId: number\n}\n\ntype RequestDataSaveList = {\n\ttaskId: number,\n\titems: Array\n}\n\ntype RequestDataListOptions = {\n\tgroupId: number\n}\n\nexport class RequestSender\n{\n\tconstructor()\n\t{\n\t\tthis.BX = window.top.BX;\n\t}\n\n\tsendRequest(action: string, data = {}): Promise\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tthis.BX.ajax.runAction('bitrix:tasks.scrum.service.definitionOfDoneService.' + action, {\n\t\t\t\tdata: data\n\t\t\t}).then(resolve, reject);\n\t\t});\n\t}\n\n\tgetListComponent(data: RequestDataListComponent): Promise\n\t{\n\t\treturn this.sendRequest('getItemComponent', data);\n\t}\n\n\tgetListOptions(data: RequestDataListOptions): Promise\n\t{\n\t\treturn this.sendRequest('getListOptions', data);\n\t}\n\n\tgetListButtons(): Promise\n\t{\n\t\treturn this.sendRequest('getTaskCompleteButtons');\n\t}\n\n\tsaveList(data: RequestDataSaveList): Promise\n\t{\n\t\treturn this.sendRequest('saveList', data);\n\t}\n\n\tshowErrorAlert(response: ErrorResponse, alertTitle?: string)\n\t{\n\t\tif (Type.isUndefined(response.errors))\n\t\t{\n\t\t\tconsole.log(response);\n\t\t\treturn;\n\t\t}\n\t\tif (response.errors.length)\n\t\t{\n\t\t\tconst firstError = response.errors.shift();\n\t\t\tif (firstError)\n\t\t\t{\n\t\t\t\tconst errorCode = (firstError.code ? firstError.code : '');\n\n\t\t\t\tconst message = firstError.message + ' ' + errorCode;\n\t\t\t\tconst title = (alertTitle ? alertTitle : Loc.getMessage('TASKS_SCRUM_ERROR_TITLE_POPUP'));\n\n\t\t\t\tMessageBox.alert(message, title);\n\t\t\t}\n\t\t}\n\t}\n}","import {Event, Loc, Runtime, Tag, Text, Dom} from 'main.core';\nimport {BaseEvent} from 'main.core.events';\nimport {SidePanel} from './side.panel';\nimport {RequestSender} from './request.sender';\n\nimport './css/base.css';\n\ntype Params = {\n\tgroupId: number\n}\n\nexport class ScrumDod\n{\n\tconstructor(params: Params)\n\t{\n\t\tthis.groupId = parseInt(params.groupId, 10);\n\n\t\tthis.sidePanel = new SidePanel();\n\t\tthis.requestSender = new RequestSender();\n\t}\n\n\tshowList(taskId: number): Promise\n\t{\n\t\treturn this.getListOptions().then((data) => {\n\t\t\tif (this.isRequiredToggle(data))\n\t\t\t{\n\t\t\t\tthis.sidePanelId = 'tasks-scrum-dod-' + Text.getRandom();\n\n\t\t\t\tthis.taskId = taskId;\n\n\t\t\t\tthis.sidePanel.subscribeOnce('onLoadSidePanel', this.onLoadList.bind(this));\n\n\t\t\t\tthis.sidePanel.openSidePanel(this.sidePanelId, {\n\t\t\t\t\tcontentCallback: () => {\n\t\t\t\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\t\t\t\tresolve(this.buildList());\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\tzIndex: 1000\n\t\t\t\t});\n\n\t\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\t\tthis.resolver = resolve;\n\t\t\t\t\tthis.rejecter = reject;\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\treturn new Promise((resolve) => {\n\t\t\t\t\tresolve();\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\tbuildList(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"tasks-scrum-project-side-panel\">\n\t\t\t\t<div class=\"tasks-scrum-project-side-panel-header\">\n\t\t\t\t\t<span class=\"tasks-scrum-project-side-panel-header-title\">\n\t\t\t\t\t\t${Loc.getMessage('TASKS_SCRUM_DOD_HEADER')}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"tasks-scrum-project-dod-error\"></div>\n\t\t\t\t<div class=\"tasks-scrum-project-dod-list\"></div>\n\t\t\t\t<div class=\"tasks-scrum-project-side-panel-buttons\"></div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tonLoadList(baseEvent: BaseEvent)\n\t{\n\t\tconst sidePanel = baseEvent.getData();\n\n\t\tthis.form = sidePanel.getContainer().querySelector('.tasks-scrum-project-side-panel');\n\n\t\tthis.getListComponent().then((data) => {\n\t\t\tconst listContainer = this.form.querySelector('.tasks-scrum-project-dod-list');\n\t\t\tRuntime.html(listContainer, data.html);\n\t\t}).then(() => {\n\t\t\tthis.getListButtons().then((response) => {\n\t\t\t\tconst buttonsContainer = this.form.querySelector('.tasks-scrum-project-side-panel-buttons');\n\t\t\t\tRuntime.html(buttonsContainer, response.html).then(() => {\n\t\t\t\t\tEvent.bind(\n\t\t\t\t\t\tbuttonsContainer.querySelector('[name=save]'),\n\t\t\t\t\t\t'click',\n\t\t\t\t\t\tthis.onCompleteClick.bind(this, sidePanel)\n\t\t\t\t\t);\n\t\t\t\t\tEvent.bind(\n\t\t\t\t\t\tbuttonsContainer.querySelector('[name=cancel]'),\n\t\t\t\t\t\t'click',\n\t\t\t\t\t\tthis.onCancelClick.bind(this, sidePanel)\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t}\n\n\tgetListComponent(): Promise\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tthis.requestSender.getListComponent({\n\t\t\t\tgroupId: this.groupId,\n\t\t\t\ttaskId: this.taskId\n\t\t\t}).then((response) => {\n\t\t\t\tresolve(response.data);\n\t\t\t});\n\t\t});\n\t}\n\n\tgetListOptions(): Promise\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tthis.requestSender.getListOptions({\n\t\t\t\tgroupId: this.groupId\n\t\t\t}).then((response) => {\n\t\t\t\tresolve(response.data);\n\t\t\t});\n\t\t});\n\t}\n\n\tgetListButtons(): Promise\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tthis.requestSender.getListButtons()\n\t\t\t\t.then((response) => {\n\t\t\t\t\tresolve(response.data);\n\t\t\t\t});\n\t\t});\n\t}\n\n\tsaveList(): Promise\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tthis.requestSender.saveList(this.getRequestDataForSaveList())\n\t\t\t\t.then((response) => {\n\t\t\t\t\tresolve(response.data);\n\t\t\t\t})\n\t\t\t\t.catch((response) => {\n\t\t\t\t\treject(response);\n\t\t\t\t});\n\t\t});\n\t}\n\n\tgetRequestDataForSaveList()\n\t{\n\t\tconst requestData = {};\n\n\t\trequestData.taskId = this.taskId;\n\t\trequestData.items = this.getListItems();\n\n\t\treturn requestData;\n\t}\n\n\tgetListItems(): Array\n\t{\n\t\t/* eslint-disable */\n\t\tif (typeof BX.Tasks.CheckListInstance === 'undefined')\n\t\t{\n\t\t\treturn [];\n\t\t}\n\n\t\tconst treeStructure = BX.Tasks.CheckListInstance.getTreeStructure();\n\t\treturn treeStructure.getRequestData();\n\t\t/* eslint-enable */\n\t}\n\n\tonCompleteClick(sidePanel)\n\t{\n\t\tif (this.isAllToggled())\n\t\t{\n\t\t\tthis.saveList().then((response) => {\n\t\t\t\tsidePanel.close();\n\t\t\t\tthis.resolver();\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.removeClockIconFromButton();\n\t\t\tthis.showError(this.getErrorContainer());\n\t\t}\n\t}\n\n\tonCancelClick(sidePanel)\n\t{\n\t\tsidePanel.close();\n\t}\n\n\tshowError(node: HTMLElement)\n\t{\n\t\tDom.clean(this.form.querySelector('.tasks-scrum-project-dod-error'));\n\t\tDom.append(node, this.form.querySelector('.tasks-scrum-project-dod-error'));\n\t\tthis.form.querySelector('.tasks-scrum-project-side-panel-header').scrollIntoView(true);\n\t}\n\n\tgetErrorContainer(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"ui-alert ui-alert-danger\">\n\t\t\t\t<span class=\"ui-alert-message\">\n\t\t\t\t\t${Loc.getMessage('TASKS_SCRUM_ERROR_ALL_TOGGLED')}\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tisAllToggled(): boolean\n\t{\n\t\t/* eslint-disable */\n\t\tif (typeof BX.Tasks.CheckListInstance === 'undefined')\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tlet isAllToggled = true;\n\n\t\tconst treeStructure = BX.Tasks.CheckListInstance.getTreeStructure();\n\n\t\ttreeStructure.getDescendants().forEach((checkList) => {\n\t\t\tif (!checkList.checkIsComplete())\n\t\t\t{\n\t\t\t\tisAllToggled = false;\n\t\t\t}\n\t\t});\n\n\t\treturn isAllToggled;\n\t\t/* eslint-enable */\n\t}\n\n\tisRequiredToggle(data): boolean\n\t{\n\t\treturn (data.requiredOption === 'Y');\n\t}\n\n\tremoveClockIconFromButton()\n\t{\n\t\tconst buttonsContainer = this.form.querySelector('.tasks-scrum-project-side-panel-buttons');\n\t\tif (buttonsContainer)\n\t\t{\n\t\t\tDom.removeClass(buttonsContainer.querySelector('[name=save]'), 'ui-btn-wait');\n\t\t}\n\t}\n}"],"names":["SidePanel","setEventNamespace","sidePanelManager","BX","Instance","window","top","bindEvents","addCustomEvent","event","sidePanel","getSlider","setCacheable","emit","currentSidePanel","Boolean","getPreviousSlider","getTopSlider","reload","close","previousSidePanel","url","open","id","options","EventEmitter","RequestSender","action","data","Promise","resolve","reject","ajax","runAction","then","sendRequest","response","alertTitle","Type","isUndefined","errors","console","log","length","firstError","shift","errorCode","code","message","title","Loc","getMessage","MessageBox","alert","ScrumDod","params","groupId","parseInt","requestSender","taskId","getListOptions","isRequiredToggle","sidePanelId","Text","getRandom","subscribeOnce","onLoadList","bind","openSidePanel","contentCallback","buildList","zIndex","resolver","rejecter","Tag","render","baseEvent","getData","form","getContainer","querySelector","getListComponent","listContainer","Runtime","html","getListButtons","buttonsContainer","Event","onCompleteClick","onCancelClick","saveList","getRequestDataForSaveList","catch","requestData","items","getListItems","Tasks","CheckListInstance","treeStructure","getTreeStructure","getRequestData","isAllToggled","removeClockIconFromButton","showError","getErrorContainer","node","Dom","clean","append","scrollIntoView","getDescendants","forEach","checkList","checkIsComplete","requiredOption","removeClass"],"mappings":"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"}