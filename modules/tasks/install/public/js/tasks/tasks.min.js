BX.namespace("Tasks");BX.mergeEx(BX.Tasks,{alert:function(e,t){var n=new BX.Promise;if(BX.Tasks.Runtime.errorPopup==null){BX.Tasks.Runtime.errorPopup=new BX.PopupWindow("task-error-popup",null,{lightShadow:true})}var i=BX.Tasks.Runtime.errorPopup;if(i===null){i=new BX.PopupWindow("task-error-popup",null,{lightShadow:true})}i.setButtons([new BX.PopupWindowButton({text:BX.message("JS_CORE_WINDOW_CLOSE"),className:"",events:{click:function(){if(BX.type.isFunction(t)){t()}this.popupWindow.close();n.resolve()}}})]);var o="";for(var s=0;s<e.length;s++){o+=BX.util.htmlspecialchars(typeof e[s].MESSAGE!=="undefined"?e[s].MESSAGE:e[s])+"<br>"}var r=BX.message("TASKS_COMMON_ERROR_OCCURRED");if(BX.type.isPlainObject(t)&&typeof t.title!="undefined"){r=t.title}i.setTitleBar({content:BX.type.isElementNode(r)?r:BX.create("div",{html:r})});i.setContent("<div style='width: 350px;padding: 10px; font-size: 12px; color: red;'>"+o+"</div>");if(window.console&&window.console.dir){window.console.dir(e)}i.show();return n},confirm:function(e,t,n){if(!BX.type.isFunction(t)){t=BX.DoNothing}n=n||{};n.ctx=n.ctx||this;var i=new BX.Promise(null,n.ctx);if(BX.Tasks.Runtime.confirmPopup==null){BX.Tasks.Runtime.confirmPopup=new BX.PopupWindow("task-confirm-popup",null,{zIndex:22e3,overlay:{opacity:50},content:"",autoHide:false,closeByEsc:false})}var o=n.isDisposable&&n.id&&"hintManager"in BX.Tasks.Util;var s=null;var r=n.buttonSet||[{text:BX.message("JS_CORE_WINDOW_CONTINUE"),type:"green",code:"continue",default:true}];if(o){if(BX.Tasks.Util.hintManager.wasDisposed(n.id)){var p=r.filter(function(e){return e.default});p=p[0]||r[0];i.fulfill(p.code);return i}else{s=BX.create("P",{style:{margin:"10px 20px 0 0"},children:[BX.create("LABEL",{children:[BX.create("INPUT",{props:{type:"checkbox",id:"bx-tasks-disposable-"+n.id}}),BX.create("SPAN",{style:{color:"gray"},text:BX.message("TASKS_COMMON_DONT_ASK_AGAIN")})]})]})}}var l=[];BX.Tasks.each(r,function(e){(function(e,t,n,o,s){e.push(new BX.PopupWindowButton({text:t.text,className:t.type=="red"?"popup-window-button-decline":"popup-window-button-accept",events:{click:function(){s.apply(n.ctx,[true]);this.popupWindow.close();if(o&&BX("bx-tasks-disposable-"+n.id).checked){BX.Tasks.Util.hintManager.disable(n.id)}i.fulfill(t.code);delete n}}}))})(l,e,n,o,t)});l.push(new BX.PopupWindowButtonLink({text:BX.message("JS_CORE_WINDOW_CANCEL"),events:{click:function(){t.apply(n.ctx,[false]);this.popupWindow.close();i.reject();delete n}}}));BX.Tasks.Runtime.confirmPopup.setButtons(l);if(typeof n.title!="undefined"){BX.Tasks.Runtime.confirmPopup.setTitleBar(BX.type.isElementNode(n.title)?n.title:BX.create("div",{html:n.title}))}e=BX.create("div",{style:{padding:"16px 12px",maxWidth:"400px",maxHeight:"400px",overflow:"hidden"},html:BX.type.isElementNode(e)?e.outerHTML:e.toString()});if(s){BX.append(s,e)}BX.Tasks.Runtime.confirmPopup.setContent(e.outerHTML);BX.Tasks.Runtime.confirmPopup.show();return i},confirmDelete:function(e){e=(e||"").toString();e=e.substr(0,1).toLowerCase()+e.substr(1);return this.confirm(BX.message("TASKS_COMMON_CONFIRM_DELETE").replace("#ENTITY_NAME#",e))},passCtx:function(e,t){return function(){var n=Array.prototype.slice.call(arguments);n.unshift(this);return e.apply(t,n)}},each:function(e,t,n){var i;n=n||this;if(BX.type.isArray(e)||e instanceof Object&&"length"in e){for(i=0;i<e.length;i++){if(e.hasOwnProperty(i)){if(t.apply(n,[e[i],i])===false){break}}}}else if(BX.type.isPlainObject(e)){for(i in e){if(e.hasOwnProperty(i)){if(t.apply(n,[e[i],i])===false){break}}}}},deReference:function(e,t){if(!BX.type.isNotEmptyString(e)){return null}e=e.split(".");var n=e.length;var i=t;for(var o=0;o<n;o++){if(e.hasOwnProperty(o)){if(typeof i=="undefined"||i===null){return null}if(!BX.type.isNotEmptyString(e[o])){return null}i=i[e[o].trim()]}else{return null}}return i}});if(typeof BX.Tasks.Runtime=="undefined"){BX.Tasks.Runtime={errorPopup:null,confirmPopup:null}}
//# sourceMappingURL=tasks.map.js