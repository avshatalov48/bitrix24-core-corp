this.BX=this.BX||{};this.BX.Tasks=this.BX.Tasks||{};(function(e,t,r,i){"use strict";var s=function(e){babelHelpers.inherits(s,e);function s(e){var t;babelHelpers.classCallCheck(this,s);t=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(s).call(this,e));t.setEventNamespace("BX.Tasks.Tour.FirstProject");t.popupData=e.popupData;t.targetNode=document.getElementById(e.targetNodeId);t.guide=new i.Guide({steps:[{target:t.targetNode,title:t.popupData[0].title,text:t.popupData[0].text,article:t.popupData[0].article}],onEvents:true});t.bindEvents();return t}babelHelpers.createClass(s,[{key:"bindEvents",value:function e(){r.EventEmitter.subscribe("UI.Tour.Guide:onFinish",this.onGuideFinish.bind(this));r.EventEmitter.subscribe("SidePanel.Slider:onMessage",this.onProjectSliderMessage.bind(this))}},{key:"onGuideFinish",value:function e(r){var i=r.getData(),s=i.guide;if(s===this.guide){this.targetNode.href=t.Uri.removeParam(this.targetNode.href,["PROJECT_OPTIONS"])}}},{key:"onProjectSliderMessage",value:function e(t){var r=t.getData(),i=babelHelpers.slicedToArray(r,1),s=i[0];if(s.getEventId()!=="sonetGroupEvent"){return}var a=s.getData();if(a.code!=="afterCreate"||a.data.projectOptions.tourId!==this.guide.getId()){return}var n=a.data.group.ID;this.emit("afterProjectCreated",n)}},{key:"showFinalStep",value:function e(t){var r=this;this.guide.steps.push(new i.Step({target:t,cursorMode:true,targetEvent:function e(){BX.SidePanel.Instance.open(t.href);setTimeout((function(){return r.guide.close()}),1e3)}}));this.finish();this.showNextStep()}},{key:"start",value:function e(){this.targetNode.href=t.Uri.addParam(this.targetNode.href,{PROJECT_OPTIONS:{tourId:this.guide.getId()}});this.showNextStep()}},{key:"finish",value:function e(){t.ajax.runAction("tasks.tourguide.firstprojectcreation.finish")}},{key:"showNextStep",value:function e(){var t=this;setTimeout((function(){return t.guide.showNextStep()}),1e3)}}]);return s}(r.EventEmitter);var a=function(e){babelHelpers.inherits(s,e);function s(e){var t;babelHelpers.classCallCheck(this,s);t=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(s).call(this,e));t.setEventNamespace("BX.Tasks.Tour.FirstScrum");t.popupData=e.popupData;t.targetNode=document.getElementById(e.targetNodeId);t.guide=new i.Guide({steps:[{target:t.targetNode,title:t.popupData[0].title,text:t.popupData[0].text,article:null}],onEvents:true});t.bindEvents();return t}babelHelpers.createClass(s,[{key:"bindEvents",value:function e(){r.EventEmitter.subscribe("UI.Tour.Guide:onFinish",this.onGuideFinish.bind(this));r.EventEmitter.subscribe("SidePanel.Slider:onMessage",this.onProjectSliderMessage.bind(this))}},{key:"onGuideFinish",value:function e(r){var i=r.getData(),s=i.guide;if(s===this.guide){this.targetNode.href=t.Uri.removeParam(this.targetNode.href,["PROJECT_OPTIONS"])}}},{key:"onProjectSliderMessage",value:function e(t){var r=t.getData(),i=babelHelpers.slicedToArray(r,1),s=i[0];if(s.getEventId()!=="sonetGroupEvent"){return}var a=s.getData();if(a.code!=="afterCreate"||a.data.projectOptions.tourId!==this.guide.getId()){return}var n=a.data.group.ID;this.emit("afterProjectCreated",n)}},{key:"showFinalStep",value:function e(t){var r=this;this.guide.steps.push(new i.Step({target:t,cursorMode:true,targetEvent:function e(){BX.SidePanel.Instance.open(t.href);setTimeout((function(){return r.guide.close()}),1e3)}}));this.finish();this.showNextStep()}},{key:"start",value:function e(){this.targetNode.href=t.Uri.addParam(this.targetNode.href,{PROJECT_OPTIONS:{tourId:this.guide.getId()}});this.showNextStep()}},{key:"finish",value:function e(){t.ajax.runAction("tasks.tourguide.firstscrumcreation.finish")}},{key:"showNextStep",value:function e(){var t=this;setTimeout((function(){return t.guide.showNextStep()}),1e3)}}]);return s}(r.EventEmitter);var n=function(e){babelHelpers.inherits(t,e);function t(e){var r,i;var n;babelHelpers.classCallCheck(this,t);n=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e));n.setEventNamespace("BX.Tasks.Tour");var o=e.tours;var u=(r=o.firstProjectCreation)!==null&&r!==void 0?r:{};var c=(i=o.firstScrumCreation)!==null&&i!==void 0?i:{};if(u.show){n.firstProject=new s({targetNodeId:u.targetNodeId,popupData:u.popupData});n.firstProject.subscribe("afterProjectCreated",(function(e){n.emit("FirstProject:afterProjectCreated",e.getData())}));n.firstProject.start()}if(c.show){n.firstScrum=new a({targetNodeId:c.targetNodeId,popupData:c.popupData});n.firstScrum.subscribe("afterProjectCreated",(function(e){n.emit("FirstScrum:afterScrumCreated",e.getData())}));n.firstScrum.start()}return n}babelHelpers.createClass(t,[{key:"showFinalStep",value:function e(t){if(this.firstProject){this.firstProject.showFinalStep(t)}if(this.firstScrum){this.firstScrum.showFinalStep(t)}}}]);return t}(r.EventEmitter);e.Tour=n})(this.BX.Tasks.Tour=this.BX.Tasks.Tour||{},BX,BX.Event,BX.UI.Tour);
//# sourceMappingURL=tour.bundle.map.js