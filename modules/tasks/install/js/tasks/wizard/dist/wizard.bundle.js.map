{"version":3,"file":"wizard.bundle.js","sources":["../src/wizard.js"],"sourcesContent":["import { Dom, Event, Loc, Tag, Type } from 'main.core';\nimport { Button, ButtonState } from 'ui.buttons';\nimport 'ui.icon-set.main';\nimport './style.css';\n\ntype Step = {\n\tid: string,\n\ttitle: string,\n\tcontent: HTMLElement,\n\tselected: ?boolean,\n\tisFilled: ?Function,\n\ttitleNode: ?HTMLElement,\n\tnode: ?HTMLElement,\n\tfadeTop: ?HTMLElement,\n\tfadeBottom: ?HTMLElement,\n};\n\ntype Params = {\n\tsteps: Step[],\n\tonCancel: Function,\n\tfinishButton: Button,\n\tsaveChangesButton: ?Button,\n\tarticle: ?number,\n\tonDisabledContinueButtonClick: ?Function,\n\tonContinueHandler: ?Function,\n};\n\nexport class Wizard\n{\n\t#params: Params;\n\t#layout: {\n\t\tbackButton: Button,\n\t\tcancelButton: Button,\n\t\tcontinueButton: Button,\n\t\tfinishButton: Button,\n\t\tsaveChangesButton: Button,\n\t};\n\n\t#steps: Step[];\n\n\tconstructor(params: Params)\n\t{\n\t\tthis.#params = params;\n\t\tthis.#steps = params.steps;\n\t\tthis.#layout = {};\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tconst wrap = Tag.render`\n\t\t\t<div class=\"tasks-wizard__container tasks-wizard__scope\">\n\t\t\t\t${this.#renderStepHeader(this.#steps)}\n\t\t\t\t${this.#renderStepContainer(this.#steps)}\n\t\t\t</div>\n\t\t`;\n\n\t\tthis.#openStep(this.#steps[0]);\n\n\t\treturn wrap;\n\t}\n\n\tgetCurrentStep(): Step\n\t{\n\t\treturn this.#steps[this.#getCurrentStepIndex()];\n\t}\n\n\tupdate(): void\n\t{\n\t\tthis.#updateStepsAvailability();\n\t}\n\n\t#getPreviousStep(): Step\n\t{\n\t\treturn this.#steps[this.#getCurrentStepIndex() - 1];\n\t}\n\n\t#updateStepsAvailability(): void\n\t{\n\t\tlet isAvailable = true;\n\n\t\tfor (const step of this.#steps)\n\t\t{\n\t\t\tif (isAvailable)\n\t\t\t{\n\t\t\t\tDom.removeClass(step.titleNode, '--unavailable');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tDom.addClass(step.titleNode, '--unavailable');\n\t\t\t}\n\n\t\t\tconst isStepUnavailable = Type.isFunction(step.isFilled) && !step.isFilled();\n\t\t\tisAvailable = isAvailable && !isStepUnavailable;\n\n\t\t\tif (step.selected)\n\t\t\t{\n\t\t\t\tthis.#layout.continueButton.setState(isAvailable ? null : ButtonState.DISABLED);\n\t\t\t}\n\t\t}\n\n\t\tthis.#layout.finishButton.setState(isAvailable ? null : ButtonState.DISABLED);\n\n\t\tif (this.#layout.saveChangesButton)\n\t\t{\n\t\t\tthis.#layout.saveChangesButton.setState(isAvailable ? null : ButtonState.DISABLED);\n\t\t}\n\t}\n\n\t#getCurrentStepIndex(): number\n\t{\n\t\tfor (const [index, step] of this.#steps.entries())\n\t\t{\n\t\t\tif (step.selected)\n\t\t\t{\n\t\t\t\treturn index;\n\t\t\t}\n\t\t}\n\n\t\treturn 0;\n\t}\n\n\t#renderStepHeader(steps: Step[]): HTMLElement\n\t{\n\t\tconst firstSteps = steps.slice(0, -1);\n\t\tconst lastStep = steps.slice(-1)[0];\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"tasks-wizard__step_header\">\n\t\t\t\t${firstSteps.map((step: Step) => this.#renderStepTitle(step, false))}\n\t\t\t\t${this.#renderStepTitle(lastStep, true)}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\t#renderStepTitle(step: Step, isLast: boolean): HTMLElement\n\t{\n\t\tconst arrow = isLast ? null : Tag.render`\n\t\t\t<div class=\"ui-icon-set --chevron-right\" style=\"--ui-icon-set__icon-size: 15px;\"></div>\n\t\t`;\n\n\t\tstep.titleNode = Tag.render`\n\t\t\t<span\n\t\t\t\tclass=\"tasks-wizard__step_name ${step.selected ? '--selected' : ''}\"\n\t\t\t\tdata-id=\"tasks-wizard-step-${step.id}\"\n\t\t\t>${step.title}</span>\n\t\t`;\n\n\t\tEvent.bind(step.titleNode, 'click', () => this.#openStep(step));\n\n\t\treturn Tag.render`\n\t\t\t<span class=\"tasks-wizard__step_name-container\">\n\t\t\t\t${step.titleNode}\n\t\t\t\t${arrow}\n\t\t\t</span>\n\t\t`;\n\t}\n\n\t#renderStepContainer(steps: Step[]): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"tasks-wizard__step_container\">\n\t\t\t\t${steps.map((step: Step) => this.#renderStep(step))}\n\t\t\t\t${this.#renderButtonsContainer()}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\t#renderButtonsContainer(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"tasks-wizard__step_buttons-container\">\n\t\t\t\t${this.#renderBackButton()}\n\t\t\t\t${this.#renderCancelButton()}\n\t\t\t\t${this.#renderContinueButton()}\n\t\t\t\t${this.#renderFinishButton()}\n\t\t\t\t${this.#renderSaveChangesButton()}\n\t\t\t\t${this.#renderArticle()}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\t#renderArticle(): HTMLElement | string\n\t{\n\t\tif (!Type.isNumber(this.#params.article))\n\t\t{\n\t\t\treturn '';\n\t\t}\n\n\t\tconst article = Tag.render`\n\t\t\t<div class=\"tasks-wizard__article\">\n\t\t\t\t<span class=\"ui-icon-set --help\"></span>\n\t\t\t\t${Loc.getMessage('TASKS_WIZARD_HELP')}\n\t\t\t</div>\n\t\t`;\n\n\t\tEvent.bind(article, 'click', this.#openHelpDesk.bind(this));\n\n\t\treturn article;\n\t}\n\n\t#openHelpDesk(): void\n\t{\n\t\ttop.BX.Helper.show(`redirect=detail&code=${this.#params.article}`);\n\t}\n\n\t#renderStep(step: Step): HTMLElement\n\t{\n\t\tconst fadeTop = Tag.render`\n\t\t\t<div class=\"tasks-wizard__step_fade --top\"></div>\n\t\t`;\n\n\t\tconst fadeBottom = Tag.render`\n\t\t\t<div class=\"tasks-wizard__step_fade\"></div>\n\t\t`;\n\n\t\tstep.node = Tag.render`\n\t\t\t<div class=\"tasks-wizard__step ${step.selected ? '--selected' : ''}\">\n\t\t\t\t${fadeTop}\n\t\t\t\t${step.content}\n\t\t\t\t${fadeBottom}\n\t\t\t</div>\n\t\t`;\n\n\t\tconst observer = new IntersectionObserver(() => {\n\t\t\tif (step.node.offsetWidth > 0)\n\t\t\t{\n\t\t\t\tthis.#updateFade(step.node, fadeTop, fadeBottom);\n\n\t\t\t\tobserver.disconnect();\n\t\t\t}\n\t\t});\n\t\tobserver.observe(step.node);\n\n\t\tEvent.bind(step.node, 'scroll', () => this.#updateFade(step.node, fadeTop, fadeBottom));\n\n\t\treturn step.node;\n\t}\n\n\t#updateFade(container, fadeTop, fadeBottom): void\n\t{\n\t\tconst scrollTop = container.scrollTop;\n\t\tconst maxScroll = container.scrollHeight - container.offsetHeight;\n\t\tconst scrolledToBottom = Math.abs(scrollTop - maxScroll) < 1;\n\n\t\tif (scrollTop === 0)\n\t\t{\n\t\t\tDom.removeClass(fadeTop, '--show');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.addClass(fadeTop, '--show');\n\t\t}\n\n\t\tif (scrolledToBottom)\n\t\t{\n\t\t\tDom.removeClass(fadeBottom, '--show');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.addClass(fadeBottom, '--show');\n\t\t}\n\t}\n\n\t#renderBackButton(): HTMLElement\n\t{\n\t\tthis.#layout.backButton = new Button({\n\t\t\ttext: Loc.getMessage('TASKS_FLOW_EDIT_FORM_BACK'),\n\t\t\tcolor: Button.Color.LIGHT_BORDER,\n\t\t\tround: true,\n\t\t\tsize: BX.UI.Button.Size.LARGE,\n\t\t\tonclick: () => {\n\t\t\t\tthis.#openStep(this.#getPreviousStep());\n\t\t\t},\n\t\t});\n\n\t\tthis.#layout.backButton.setDataSet({\n\t\t\tid: 'tasks-wizard-flow-back',\n\t\t});\n\n\t\treturn this.#layout.backButton.render();\n\t}\n\n\t#renderCancelButton(): HTMLElement\n\t{\n\t\tthis.#layout.cancelButton = new Button({\n\t\t\ttext: Loc.getMessage('TASKS_FLOW_EDIT_FORM_CANCEL'),\n\t\t\tcolor: Button.Color.LIGHT_BORDER,\n\t\t\tround: true,\n\t\t\tsize: BX.UI.Button.Size.LARGE,\n\t\t\tonclick: () => this.#params.onCancel(),\n\t\t});\n\n\t\tthis.#layout.cancelButton.setDataSet({\n\t\t\tid: 'tasks-wizard-flow-cancel',\n\t\t});\n\n\t\treturn this.#layout.cancelButton.render();\n\t}\n\n\t#renderContinueButton(): HTMLElement\n\t{\n\t\tthis.#layout.continueButton = new Button({\n\t\t\ttext: Loc.getMessage('TASKS_FLOW_EDIT_FORM_CONTINUE'),\n\t\t\tcolor: Button.Color.LIGHT_BORDER,\n\t\t\tround: true,\n\t\t\tsize: BX.UI.Button.Size.LARGE,\n\t\t\tonclick: this.#onContinueButtonClickHandler.bind(this),\n\t\t});\n\n\t\tthis.#layout.continueButton.setDataSet({\n\t\t\tid: 'tasks-wizard-flow-continue',\n\t\t});\n\n\t\treturn this.#layout.continueButton.render();\n\t}\n\n\tasync #onContinueButtonClickHandler(): void\n\t{\n\t\tif (this.#layout.continueButton.getState() === ButtonState.DISABLED)\n\t\t{\n\t\t\tthis.#params.onDisabledContinueButtonClick?.();\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (Type.isFunction(this.#params.onContinueHandler) && this.#layout.continueButton.getState() === null)\n\t\t{\n\t\t\tconst canContinue = await this.#params.onContinueHandler();\n\t\t\tif (!canContinue)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tconst currentStep = this.#getCurrentStepIndex();\n\t\tconst nextStep = currentStep + 1;\n\n\t\tthis.#openStep(this.#steps[nextStep]);\n\t}\n\n\t#renderFinishButton(): HTMLElement\n\t{\n\t\tthis.#layout.finishButton = this.#params.finishButton;\n\n\t\tthis.#layout.finishButton?.setDataSet({\n\t\t\tid: 'tasks-wizard-flow-finish',\n\t\t});\n\n\t\treturn this.#layout.finishButton.render();\n\t}\n\n\t#renderSaveChangesButton(): ?HTMLElement\n\t{\n\t\tthis.#layout.saveChangesButton = this.#params.saveChangesButton;\n\n\t\tthis.#layout.saveChangesButton?.setDataSet({\n\t\t\tid: 'tasks-wizard-flow-save',\n\t\t});\n\n\t\treturn this.#layout.saveChangesButton?.render();\n\t}\n\n\t#openStep(currentStep: Step): void\n\t{\n\t\tconst index = this.#steps.findIndex((step: Step) => step.id === currentStep.id);\n\n\t\tthis.#steps.forEach((step: Step) => {\n\t\t\tstep.selected = false;\n\t\t\tDom.removeClass(step.titleNode, '--selected');\n\t\t\tDom.removeClass(step.node, '--selected');\n\t\t});\n\n\t\tcurrentStep.selected = true;\n\t\tDom.addClass(currentStep.titleNode, '--selected');\n\t\tDom.addClass(currentStep.node, '--selected');\n\n\t\tDom.style(this.#layout.finishButton.getContainer(), 'display', 'none');\n\t\tDom.style(this.#layout.continueButton.getContainer(), 'display', '');\n\n\t\tif (this.#layout.saveChangesButton)\n\t\t{\n\t\t\tDom.style(this.#layout.saveChangesButton.getContainer(), 'display', '');\n\t\t}\n\n\t\tif (index === this.#steps.length - 1)\n\t\t{\n\t\t\tDom.style(this.#layout.finishButton.getContainer(), 'display', '');\n\t\t\tDom.style(this.#layout.continueButton.getContainer(), 'display', 'none');\n\n\t\t\tif (this.#layout.saveChangesButton)\n\t\t\t{\n\t\t\t\tDom.style(this.#layout.saveChangesButton.getContainer(), 'display', 'none');\n\t\t\t}\n\t\t}\n\n\t\tif (index > 0)\n\t\t{\n\t\t\tDom.style(this.#layout.backButton.getContainer(), 'display', '');\n\t\t\tDom.style(this.#layout.cancelButton.getContainer(), 'display', 'none');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.style(this.#layout.backButton.getContainer(), 'display', 'none');\n\t\t\tDom.style(this.#layout.cancelButton.getContainer(), 'display', '');\n\t\t}\n\n\t\tthis.#updateStepsAvailability();\n\t}\n}\n"],"names":["Wizard","constructor","params","steps","render","wrap","Tag","getCurrentStep","update","isAvailable","step","Dom","removeClass","titleNode","addClass","isStepUnavailable","Type","isFunction","isFilled","selected","continueButton","setState","ButtonState","DISABLED","finishButton","saveChangesButton","index","entries","firstSteps","slice","lastStep","map","isLast","arrow","id","title","Event","bind","isNumber","article","Loc","getMessage","top","BX","Helper","show","fadeTop","fadeBottom","node","content","observer","IntersectionObserver","offsetWidth","disconnect","observe","container","scrollTop","maxScroll","scrollHeight","offsetHeight","scrolledToBottom","Math","abs","backButton","Button","text","color","Color","LIGHT_BORDER","round","size","UI","Size","LARGE","onclick","setDataSet","cancelButton","onCancel","getState","onDisabledContinueButtonClick","onContinueHandler","canContinue","currentStep","nextStep","findIndex","forEach","style","getContainer","length"],"mappings":"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"}