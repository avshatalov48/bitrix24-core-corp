{"version":3,"file":"task-queue.bundle.js","sources":["../src/member.js","../src/line.js","../src/task-queue.js"],"sourcesContent":["import { Tag, Text } from 'main.core';\n\nexport type MemberData = {\n\tid: number,\n\tname: string,\n\tavatar: string,\n\tpathToProfile: string,\n}\n\nimport './css/member.css';\n\nexport class Member\n{\n\t#id: number;\n\t#name: string;\n\t#avatar: string;\n\t#workPosition: string;\n\t#pathToProfile: string;\n\n\tconstructor(data: MemberData)\n\t{\n\t\tthis.#id = parseInt(data.id, 10);\n\t\tthis.#name = data.name;\n\t\tthis.#avatar = data.avatar;\n\t\tthis.#workPosition = data.workPosition;\n\t\tthis.#pathToProfile = data.pathToProfile;\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"tasks-flow__task-queue-member\" data-id=\"tasks-flow-task-queue-member-${this.getId()}\">\n\t\t\t\t${this.#renderAvatar()}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\t#renderAvatar(): HTMLElement\n\t{\n\t\tlet photoIcon = '<i></i>';\n\t\tif (this.getAvatar())\n\t\t{\n\t\t\tphotoIcon = `<i style=\"background-image: url('${encodeURI(this.getAvatar())}')\"></i>`;\n\t\t}\n\n\t\treturn Tag.render`\n\t\t\t<a \n\t\t\t\thref=\"${Text.encode(this.getPathToProfile())}\"\n\t\t\t\tclass=\"tasks-flow__task-queue-member_avatar ui-icon ui-icon-common-user\"\n\t\t\t>\n\t\t\t\t${photoIcon}\n\t\t\t</a>\n\t\t`;\n\t}\n\n\tgetId(): number\n\t{\n\t\treturn this.#id;\n\t}\n\n\tgetName(): string\n\t{\n\t\treturn this.#name;\n\t}\n\n\tgetAvatar(): string\n\t{\n\t\treturn this.#avatar;\n\t}\n\n\tgetPathToProfile(): string\n\t{\n\t\treturn this.#pathToProfile;\n\t}\n}\n","import { Tag } from 'main.core';\n\nimport { Member, MemberData } from './member';\n\nexport type LineData = {\n\tserial: number,\n\tcreatedBy: number,\n\tcreator: MemberData,\n\tresponsibleId: number,\n\tresponsible: MemberData,\n\ttimeInStatus: {\n\t\tformatted: string,\n\t},\n}\n\nimport './css/line.css';\n\nexport class Line\n{\n\t#serial: number;\n\t#createdBy: number;\n\t#creator: Member;\n\t#responsibleId: number;\n\t#responsible: Member;\n\t#timeInStatus: string;\n\n\tconstructor(lineData: LineData)\n\t{\n\t\tthis.#serial = parseInt(lineData.serial, 10);\n\t\tthis.#createdBy = parseInt(lineData.createdBy, 10);\n\t\tthis.#creator = new Member(lineData.creator);\n\t\tthis.#responsibleId = parseInt(lineData.responsibleId, 10);\n\t\tthis.#responsible = new Member(lineData.responsible);\n\t\tthis.#timeInStatus = lineData.timeInStatus.formatted;\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"tasks-flow__task-queue-line\">\n\t\t\t\t<div class=\"tasks-flow__task-queue-line_number\">${this.#serial}</div>\n\t\t\t\t<div class=\"tasks-flow__task-queue-line_avatar\">${this.#creator.render()}</div>\n\t\t\t\t<div class=\"ui-icon-set --chevron-right\" style=\"--ui-icon-set__icon-size: 18px;\"></div>\n\t\t\t\t<div class=\"tasks-flow__task-queue-line_avatar\">${this.#responsible.render()}</div>\n\t\t\t\t<div class=\"tasks-flow__task-queue-line_time\" title=\"${this.#timeInStatus}\">${this.#timeInStatus}</div>\n\t\t\t</div>\n\t\t`;\n\t}\n}\n","import { ajax, AjaxError, AjaxResponse, Dom, Event, Loc, Tag, Type } from 'main.core';\nimport { Loader } from 'main.loader';\nimport { Popup, PopupManager } from 'main.popup';\n\nimport { SidePanelIntegration } from 'tasks.side-panel-integration';\n\nimport { Line, LineData } from './line';\n\ntype Params = {\n\tflowId: number,\n\ttype: string,\n\tbindElement: HTMLElement,\n};\n\nimport './css/base.css';\n\nexport class TaskQueue\n{\n\tstatic TYPES = {\n\t\tPENDING: 'PENDING',\n\t\tAT_WORK: 'AT_WORK',\n\t\tCOMPLETED: 'COMPLETED',\n\t};\n\n\t#params: Params;\n\t#flowId: number;\n\t#type: string;\n\n\t#pageSize: number = 10;\n\t#pageNum: number = 1;\n\t#pending: boolean = false;\n\t#pages: { [key: number]: Line[] };\n\t#totalTaskCount: number;\n\n\t#popup: Popup;\n\t#loader: Loader;\n\n\t#layout: {\n\t\tpopupContainer: HTMLElement,\n\t\tpopupContent: HTMLElement,\n\t\tpopupInner: HTMLElement,\n\t\tcounterContainer: HTMLElement,\n\t\ttotalTaskCounter: HTMLElement,\n\t};\n\n\tconstructor(params: Params)\n\t{\n\t\tthis.#params = params;\n\n\t\tthis.#flowId = parseInt(params.flowId, 10);\n\n\t\tif (!(params.type in TaskQueue.TYPES))\n\t\t{\n\t\t\tthrow new Error('The specified queue type is incorrect');\n\t\t}\n\t\tthis.#type = params.type;\n\n\t\tthis.#pages = {};\n\t\tthis.#layout = {};\n\t}\n\n\tstatic showInstance(params: Params): void\n\t{\n\t\t(new this(params)).show(params.bindElement);\n\t}\n\n\tshow(bindElement: HTMLElement): void\n\t{\n\t\tthis.#popup = this.getPopup();\n\n\t\tthis.#popup.setContent(this.#renderContent());\n\t\tthis.#popup.setBindElement(bindElement);\n\n\t\tthis.#popup.show();\n\t}\n\n\tgetPopup(): Popup\n\t{\n\t\tconst queueId = this.#params.flowId + this.#params.type;\n\n\t\tconst id = `tasks-flow-task-queue-popup-${queueId}`;\n\n\t\tif (PopupManager.getPopupById(id))\n\t\t{\n\t\t\treturn PopupManager.getPopupById(id);\n\t\t}\n\n\t\tconst popup = new Popup({\n\t\t\tid,\n\t\t\tclassName: 'tasks-flow__task-queue-popup',\n\t\t\tpadding: 2,\n\t\t\tautoHide: true,\n\t\t\tcloseByEsc: true,\n\t\t\tevents: {\n\t\t\t\tonFirstShow: () => {\n\t\t\t\t\tthis.#showLines();\n\t\t\t\t},\n\t\t\t\tonClose: () => {\n\t\t\t\t\tpopup.destroy();\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\n\t\tnew SidePanelIntegration(popup);\n\n\t\treturn popup;\n\t}\n\n\t#getList(pageNum: number): Promise\n\t{\n\t\tthis.#pending = true;\n\n\t\tconst map = {\n\t\t\tPENDING: 'Pending',\n\t\t\tAT_WORK: 'Progress',\n\t\t\tCOMPLETED: 'Completed',\n\t\t};\n\n\t\treturn new Promise((resolve) => {\n\t\t\tajax.runAction(`tasks.flow.Task.${map[this.#type]}.list`, {\n\t\t\t\tdata: {\n\t\t\t\t\tflowData: { id: this.#flowId },\n\t\t\t\t\tago: { days: 30 },\n\t\t\t\t},\n\t\t\t\tnavigation: {\n\t\t\t\t\tpage: pageNum,\n\t\t\t\t\tsize: this.#pageSize,\n\t\t\t\t},\n\t\t\t})\n\t\t\t\t.then((response: AjaxResponse) => {\n\t\t\t\t\tthis.#pending = false;\n\t\t\t\t\tif (response.data.tasks.length >= this.#pageSize)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.#pageNum++;\n\t\t\t\t\t}\n\t\t\t\t\tresolve({\n\t\t\t\t\t\tlines: response.data.tasks,\n\t\t\t\t\t\ttotalTaskCount: response.data.totalCount,\n\t\t\t\t\t});\n\t\t\t\t})\n\t\t\t\t.catch((error: AjaxError) => {\n\t\t\t\t\tthis.#consoleError('getList', error);\n\t\t\t\t})\n\t\t\t;\n\t\t});\n\t}\n\n\t#renderContent(): HTMLElement\n\t{\n\t\tconst { popupContainer, popupContent } = Tag.render`\n\t\t\t<div ref=\"popupContainer\" class=\"tasks-flow__task-queue-popup_container\">\n\t\t\t\t<div ref=\"listContainer\" class=\"tasks-flow__task-queue-popup_content\">\n\t\t\t\t\t<div class=\"tasks-flow__task-queue-popup_content-box\">\n\t\t\t\t\t\t<span class=\"tasks-flow__task-queue-popup_label\">\n\t\t\t\t\t\t\t<span class=\"tasks-flow__task-queue-popup_label-text\" title=\"${Loc.getMessage(`TASKS_FLOW_TASK_QUEUE_POPUP_LABEL_${this.#type}`)}\">\n\t\t\t\t\t\t\t\t${Loc.getMessage(`TASKS_FLOW_TASK_QUEUE_POPUP_LABEL_${this.#type}`)}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t${this.#renderCounterContainer()}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t${this.#renderLines()}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\tthis.#layout.popupContainer = popupContainer;\n\t\tthis.#layout.popupContent = popupContent;\n\n\t\treturn this.#layout.popupContainer;\n\t}\n\n\t#renderCounterContainer(): HTMLElement\n\t{\n\t\tthis.#layout.counterContainer = Tag.render`\n\t\t\t<div class=\"tasks-flow__total-task-counter-container ui-counter\">\n\t\t\t\t\t${this.#renderTotalTaskCounter()}\n\t\t\t</div>\n\t\t`;\n\t\tDom.style(this.#layout.counterContainer, 'display', 'none');\n\n\t\treturn this.#layout.counterContainer;\n\t}\n\n\t#renderTotalTaskCounter(): HTMLElement\n\t{\n\t\tthis.#layout.totalTaskCounter = Tag.render`\n\t\t\t<div class=\"tasks-flow__total-task-counter ui-counter-inner\"></div>\n\t\t`;\n\n\t\treturn this.#layout.totalTaskCounter;\n\t}\n\n\t#renderLines(): HTMLElement\n\t{\n\t\tthis.#layout.popupInner = Tag.render`\n\t\t\t<div class=\"tasks-flow__task-queue-popup_inner\">\n\t\t\t\t${Object.values(this.#pages).flat().map((line: Line) => line.render())}\n\t\t\t</div>\n\t\t`;\n\n\t\tEvent.bind(this.#layout.popupInner, 'scroll', () => {\n\t\t\tconst scrollTop = this.#layout.popupInner.scrollTop;\n\t\t\tconst maxScroll = this.#layout.popupInner.scrollHeight - this.#layout.popupInner.offsetHeight;\n\n\t\t\tif (Math.abs(scrollTop - maxScroll) < 1 && this.#pending === false)\n\t\t\t{\n\t\t\t\tthis.#showLines();\n\t\t\t}\n\t\t});\n\n\t\treturn this.#layout.popupInner;\n\t}\n\n\t#showLines(): void\n\t{\n\t\tthis.#showLoader();\n\n\t\t// eslint-disable-next-line promise/catch-or-return\n\t\tthis.#appendLines(this.#pageNum).then(() => {\n\t\t\tthis.#destroyLoader();\n\t\t\tthis.#setTotalTaskCount();\n\t\t});\n\t}\n\n\t#appendLines(pageNum: number): Promise\n\t{\n\t\tif (this.#pages[pageNum])\n\t\t{\n\t\t\treturn Promise.resolve();\n\t\t}\n\n\t\tconst list: HTMLElement = this.#layout.popupInner;\n\n\t\t// eslint-disable-next-line promise/catch-or-return\n\t\treturn this.#getList(pageNum)\n\t\t\t.then(({ lines, totalTaskCount }) => {\n\t\t\t\tthis.#totalTaskCount = totalTaskCount;\n\t\t\t\tDom.style(this.#layout.counterContainer, 'display', 'inline-flex');\n\t\t\t\tthis.#pages[pageNum] = lines.map((data: LineData) => new Line(data));\n\n\t\t\t\tthis.#pages[pageNum].forEach((line: Line) => Dom.append(line.render(), list));\n\t\t\t})\n\t\t;\n\t}\n\n\t#setTotalTaskCount(): void\n\t{\n\t\tif (!Type.isNil(this.#totalTaskCount))\n\t\t{\n\t\t\tthis.#layout.totalTaskCounter.innerText = this.#totalTaskCount > 99 ? '99+' : this.#totalTaskCount;\n\t\t}\n\t}\n\n\t#showLoader()\n\t{\n\t\tconst targetPosition = Dom.getPosition(this.#layout.popupInner);\n\t\tconst size = 40;\n\n\t\tthis.#loader = new Loader({\n\t\t\ttarget: this.#layout.popupInner,\n\t\t\tsize,\n\t\t\tmode: 'inline',\n\t\t\toffset: {\n\t\t\t\tleft: `${((targetPosition.width / 2) - (size / 2))}px`,\n\t\t\t},\n\t\t});\n\n\t\tthis.#loader.show();\n\t}\n\n\t#destroyLoader()\n\t{\n\t\tthis.#loader.destroy();\n\t}\n\n\t#consoleError(action: string, error: AjaxError)\n\t{\n\t\t// eslint-disable-next-line no-console\n\t\tconsole.error(`TaskQueue: ${action} error`, error);\n\t}\n}\n"],"names":["Member","constructor","data","parseInt","id","name","avatar","workPosition","pathToProfile","render","Tag","getId","getName","getAvatar","getPathToProfile","photoIcon","encodeURI","Text","encode","Line","lineData","serial","createdBy","creator","responsibleId","responsible","timeInStatus","formatted","TaskQueue","params","flowId","type","TYPES","Error","showInstance","show","bindElement","getPopup","setContent","setBindElement","queueId","PopupManager","getPopupById","popup","Popup","className","padding","autoHide","closeByEsc","events","onFirstShow","onClose","destroy","SidePanelIntegration","pageNum","map","PENDING","AT_WORK","COMPLETED","Promise","resolve","ajax","runAction","flowData","ago","days","navigation","page","size","then","response","tasks","length","lines","totalTaskCount","totalCount","catch","error","popupContainer","popupContent","Loc","getMessage","counterContainer","Dom","style","totalTaskCounter","popupInner","Object","values","flat","line","Event","bind","scrollTop","maxScroll","scrollHeight","offsetHeight","Math","abs","list","forEach","append","Type","isNil","innerText","targetPosition","getPosition","Loader","target","mode","offset","left","width","action","console"],"mappings":"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"}