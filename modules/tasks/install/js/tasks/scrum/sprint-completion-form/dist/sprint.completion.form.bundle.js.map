{"version":3,"file":"sprint.completion.form.bundle.js","sources":["../src/sprint.completion.form.js"],"sourcesContent":["import {ajax, Event, Loc, Tag, Text, Type} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\n\nimport {Layout} from 'ui.sidepanel.layout';\n\nimport '../css/base.css';\nimport '../css/item.css';\n\ntype Params = {\n\tgroupId: number\n}\n\ntype SprintData = {\n\tid: number,\n\tname: string,\n\tinfo: {\n\t\tsprintGoal: string\n\t},\n\tepics: Array<EpicType>,\n\tdateStart: string,\n\tdateEnd: string,\n\texistsLastSprint: boolean,\n\tstoryPoints: number,\n\tcompletedStoryPoints: number,\n\tlastStoryPoints: number,\n\tlastCompletedStoryPoints: number,\n\tplannedSprints: Array<PlannedSprint>,\n\tuncompletedTasks: Array<Item>\n}\n\ntype PlannedSprint = {\n\tid: number,\n\tname: string\n}\n\ntype Item = {\n\tid: number,\n\tname: string,\n\tresponsible: {\n\t\tid: number,\n\t\tname: string,\n\t\tpathToUser: string,\n\t\tphoto?: {\n\t\t\tsrc: string\n\t\t}\n\t},\n\tepic: ?EpicType,\n\ttags: Array<string>,\n\tsourceId: number,\n\tstoryPoints: string\n}\n\ntype EpicType = {\n\tid: number,\n\tname: string,\n\tdescription: string,\n\tcolor: string\n}\n\ntype Response = {\n\tstatus: string,\n\tdata: SprintData,\n\terrors: Array\n}\n\ntype ErrorResponse = {\n\tdata: string,\n\terrors: Array,\n\tstatus: string\n}\n\nexport class SprintCompletionForm extends EventEmitter\n{\n\tconstructor(params: Params)\n\t{\n\t\tsuper(params);\n\n\t\tthis.groupId = parseInt(params.groupId, 10);\n\n\t\t/* eslint-disable */\n\t\tthis.sidePanelManager = BX.SidePanel.Instance;\n\t\t/* eslint-enable */\n\n\t\tthis.sidePanelId = 'tasks-scrum-sprint-completion-form-side-panel';\n\n\t\tthis.node = null;\n\n\t\tthis.completeButton = null;\n\t}\n\n\tshow()\n\t{\n\t\tthis.sidePanelManager.open(\n\t\t\tthis.sidePanelId,\n\t\t\t{\n\t\t\t\tcacheable: false,\n\t\t\t\twidth: 700,\n\t\t\t\tcontentCallback: () => {\n\t\t\t\t\treturn Layout.createContent({\n\t\t\t\t\t\textensions: ['ui.dialogs.messagebox', 'ui.confetti', 'tasks.scrum.sprint-completion-form'],\n\t\t\t\t\t\ttitle: Loc.getMessage('TASKS_SCRUM_SPRINT_COMPLETION_FORM_TITLE'),\n\t\t\t\t\t\tcontent: this.createContent.bind(this),\n\t\t\t\t\t\tdesign: {\n\t\t\t\t\t\t\tsection: false\n\t\t\t\t\t\t},\n\t\t\t\t\t\tbuttons: ({cancelButton, SaveButton}) => {\n\t\t\t\t\t\t\treturn [\n\t\t\t\t\t\t\t\tthis.completeButton = new SaveButton({\n\t\t\t\t\t\t\t\t\ttext: Loc.getMessage('TASKS_SCRUM_SPRINT_COMPLETION_FORM_BUTTON'),\n\t\t\t\t\t\t\t\t\tonclick: this.onComplete.bind(this)\n\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\tcancelButton\n\t\t\t\t\t\t\t];\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t}\n\n\tonComplete()\n\t{\n\t\tlet direction = 'backlog';\n\n\t\tlet directionSelector = this.node.querySelector('.tasks-scrum__side-panel-completion--info-select');\n\t\tif (directionSelector)\n\t\t{\n\t\t\tdirectionSelector = directionSelector.querySelector('select');\n\t\t\tdirection = directionSelector.value;\n\t\t}\n\n\t\tthis.completeButton.setWaiting();\n\n\t\tajax.runAction(\n\t\t\t'bitrix:tasks.scrum.sprint.completeSprint',\n\t\t\t{\n\t\t\t\tdata: {\n\t\t\t\t\tgroupId: this.groupId,\n\t\t\t\t\tdirection: direction\n\t\t\t\t}\n\t\t\t}\n\t\t)\n\t\t\t.then((response) => {\n\t\t\t\tif (top.BX.UI.Confetti)\n\t\t\t\t{\n\t\t\t\t\ttop.BX.UI.Confetti.fire({\n\t\t\t\t\t\tparticleCount: 400,\n\t\t\t\t\t\tspread: 80,\n\t\t\t\t\t\torigin: {\n\t\t\t\t\t\t\tx: 0.7,\n\t\t\t\t\t\t\ty: 0.2\n\t\t\t\t\t\t},\n\t\t\t\t\t\tzIndex: (this.sidePanelManager.getTopSlider().getZindex() + 1)\n\t\t\t\t\t}).then(() => {\n\t\t\t\t\t\tthis.closeSidePanel();\n\t\t\t\t\t\tthis.emit('afterComplete');\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.closeSidePanel();\n\t\t\t\t\tthis.emit('afterComplete');\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch((response) => {\n\t\t\t\tthis.showErrorAlert(\n\t\t\t\t\tresponse,\n\t\t\t\t\tLoc.getMessage('TASKS_SCRUM_SPRINT_COMPLETION_ERROR_TITLE_POPUP')\n\t\t\t\t);\n\t\t\t})\n\t\t;\n\t}\n\n\tcloseSidePanel()\n\t{\n\t\tconst openSliders = this.sidePanelManager.getOpenSliders();\n\t\tif (openSliders.length > 0)\n\t\t{\n\t\t\topenSliders.forEach((slider) => {\n\t\t\t\tif (slider.getUrl() === this.sidePanelId)\n\t\t\t\t{\n\t\t\t\t\tslider.close(false);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tcreateContent()\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tajax.runAction(\n\t\t\t\t'bitrix:tasks.scrum.sprint.getDataForSprintCompletionForm',\n\t\t\t\t{\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tgroupId: this.groupId\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t)\n\t\t\t\t.then((response: Response) => {\n\t\t\t\t\tresolve(this.render(response.data));\n\t\t\t\t})\n\t\t\t;\n\t\t});\n\t}\n\n\trender(sprintData: SprintData): HTMLElement\n\t{\n\t\tthis.node = Tag.render`\n\t\t\t<div class=\"tasks-scrum__scope--side-panel-completion\">\n\n\t\t\t<div class=\"tasks-scrum__side-panel-completion--block\">\n\n\t\t\t\t<div class=\"tasks-scrum__side-panel-completion--info-basic\">\n\t\t\t\t\t<div class=\"tasks-scrum__side-panel-completion--info-basic-block\">\n\t\t\t\t\t\t<div class=\"tasks-scrum__side-panel-completion--info-basic-title\">\n\t\t\t\t\t\t\t${Text.encode(sprintData.name)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t${this.renderGoal(sprintData.info.sprintGoal)}\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"tasks-scrum__side-panel-completion--info-additional\">\n\n\t\t\t\t\t${this.renderEpics(sprintData.epics)}\n\n\t\t\t\t\t<div class=\"tasks-scrum__side-panel-completion--info-row\">\n\t\t\t\t\t\t<div class=\"tasks-scrum__side-panel-completion--info-title\">\n\t\t\t\t\t\t\t${Loc.getMessage('TASKS_SCRUM_SPRINT_COMPLETION_FORM_TIME_ROW_LABEL')}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"tasks-scrum__side-panel-completion--info-content tasks-scrum__side-panel-completion--sprint-timing\">\n\t\t\t\t\t\t\t<div class=\"tasks-scrum__side-panel-completion--date-name-block\">\n\t\t\t\t\t\t\t\t<div>${Loc.getMessage('TASKS_SCRUM_SPRINT_COMPLETION_FORM_DATE_START_LABEL')}</div>\n\t\t\t\t\t\t\t\t<div>${Loc.getMessage('TASKS_SCRUM_SPRINT_COMPLETION_FORM_DATE_END_LABEL')}</div>\n\t\t\t\t\t\t\t\t<div>${Loc.getMessage('TASKS_SCRUM_SPRINT_COMPLETION_FORM_PERIOD_LABEL')}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"tasks-scrum__side-panel-completion--date-result-block\">\n\t\t\t\t\t\t\t\t<div>${this.getFormattedDateStart(sprintData.dateStart)}</div>\n\t\t\t\t\t\t\t\t<div>${this.getFormattedDateStart(sprintData.dateEnd)}</div>\n\t\t\t\t\t\t\t\t<div>${this.getPeriodDays(sprintData.dateStart)}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"tasks-scrum__side-panel-completion--info-row\">\n\n\t\t\t\t\t\t<div class=\"tasks-scrum__side-panel-completion--info-title\">\n\t\t\t\t\t\t\t${Loc.getMessage('TASKS_SCRUM_SPRINT_COMPLETION_FORM_PLAN_ROW_LABEL')}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"tasks-scrum__side-panel-completion--info-content\">\n\t\t\t\t\t\t\t<div class=\"tasks-scrum__side-panel-completion--plan-block\">\n\n\t\t\t\t\t\t\t\t<div class=\"tasks-scrum__side-panel-completion--sprint-plans\">\n\t\t\t\t\t\t\t\t\t<div class=\"tasks-scrum__side-panel-completion--plan-block-number --percent\">\n\t\t\t\t\t\t\t\t\t\t<div \n\t\t\t\t\t\t\t\t\t\t\tclass=\"tasks-scrum__side-panel-completion--plan-block-number-date\"\n\t\t\t\t\t\t\t\t\t\t\ttitle=\"${Text.encode(sprintData.storyPoints)}\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t${Text.encode(sprintData.storyPoints)}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"tasks-scrum__side-panel-completion--plan-block-name\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"tasks-scrum__side-panel-completion--plan-block-name-text\">\n\t\t\t\t\t\t\t\t\t\t\t${Loc.getMessage('TASKS_SCRUM_SPRINT_COMPLETION_FORM_PLAN_SP')}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"ui-hint\"><span class=\"ui-hint-icon\"></span></div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div class=\"tasks-scrum__side-panel-completion--sprint-plans\">\n\t\t\t\t\t\t\t\t\t${this.renderWheelCompletedStoryPoints(sprintData)}\n\t\t\t\t\t\t\t\t\t<div class=\"tasks-scrum__side-panel-completion--plan-block-name\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"tasks-scrum__side-panel-completion--plan-block-name-text\">\n\t\t\t\t\t\t\t\t\t\t\t${Loc.getMessage('TASKS_SCRUM_SPRINT_COMPLETION_FORM_DONE_SP')}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"ui-hint\"><span class=\"ui-hint-icon\"></span></div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t${this.renderUncompletedTasks(sprintData)}\n\n\t\t\t</div>\n\t\t`;\n\n\t\treturn this.node;\n\t}\n\n\trenderGoal(goal: string): ?HTMLElement\n\t{\n\t\tif (goal === '')\n\t\t{\n\t\t\treturn '';\n\t\t}\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"tasks-scrum__side-panel-completion--info-basic-block\">\n\t\t\t\t<div class=\"tasks-scrum__side-panel-completion--info-basic-description\">\n\t\t\t\t\t${Text.encode(goal)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\trenderEpics(epics: Array<EpicType>): ?HTMLElement\n\t{\n\t\tif (!epics.length)\n\t\t{\n\t\t\treturn '';\n\t\t}\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"tasks-scrum__side-panel-completion--info-row\">\n\t\t\t\t<div class=\"tasks-scrum__side-panel-completion--info-title\">\n\t\t\t\t\t${Loc.getMessage('TASKS_SCRUM_SPRINT_COMPLETION_FORM_EPICS_ROW_LABEL')}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"tasks-scrum__side-panel-completion--info-content\">\n\t\t\t\t\t${\n\t\t\t\t\t\tepics.map((epic: EpicType) => {\n\t\t\t\t\t\t\tconst colorBorder = this.convertHexToRGBA(epic.color, 0.7);\n\t\t\t\t\t\t\tconst colorBackground = this.convertHexToRGBA(epic.color, 0.3);\n\n\t\t\t\t\t\t\treturn Tag.render`\n\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\tclass=\"tasks-scrum__epic-label\"\n\t\t\t\t\t\t\t\t\tstyle=\"background: ${colorBackground}; border-color: ${colorBorder};\"\n\t\t\t\t\t\t\t\t>${Text.encode(epic.name)}</span>`\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\trenderWheelCompletedStoryPoints(sprintData: SprintData): HTMLElement\n\t{\n\t\tlet differencePercentage = 0;\n\n\t\tconst currentPercentage = this.calculatePercentage(\n\t\t\tsprintData.storyPoints,\n\t\t\tsprintData.completedStoryPoints\n\t\t);\n\n\t\tif (sprintData.existsLastSprint)\n\t\t{\n\t\t\tconst lastPercentage = this.calculatePercentage(\n\t\t\t\tsprintData.lastStoryPoints,\n\t\t\t\tsprintData.lastCompletedStoryPoints\n\t\t\t);\n\n\t\t\tdifferencePercentage = parseFloat(currentPercentage) - parseFloat(lastPercentage);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tdifferencePercentage = currentPercentage;\n\t\t}\n\n\t\tlet wheelClass = '';\n\n\t\tif (differencePercentage > 0)\n\t\t{\n\t\t\twheelClass = `tasks-scrum__side-panel-completion--plan-block-number --arrow-up --percent --success`;\n\t\t}\n\t\telse\n\t\t{\n\t\t\twheelClass = `tasks-scrum__side-panel-completion--plan-block-number --arrow-down --percent --warning`;\n\t\t}\n\n\t\tconst absoluteValue = Math.abs(differencePercentage);\n\n\t\tconst renderProgress = (percent: number) => {\n\t\t\tif (percent === 0)\n\t\t\t{\n\t\t\t\treturn '';\n\t\t\t}\n\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"tasks-scrum__side-panel-completion--progress\">\n\t\t\t\t\t<span class=\"tasks-scrum__side-panel-completion--progress-number\">${percent}</span>\n\t\t\t\t\t<span class=\"tasks-scrum__side-panel-completion--progress-percent\">%</span></div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t};\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"${wheelClass}\">\n\t\t\t\t<div \n\t\t\t\t\tclass=\"tasks-scrum__side-panel-completion--plan-block-number-date\"\n\t\t\t\t\ttitle=\"${Text.encode(sprintData.completedStoryPoints)}\"\n\t\t\t\t>\n\t\t\t\t\t${Text.encode(sprintData.completedStoryPoints)}\n\t\t\t\t</div>\n\t\t\t\t${renderProgress(absoluteValue)}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\trenderUncompletedTasks(sprintData: SprintData): HTMLElement\n\t{\n\t\tif (sprintData.uncompletedTasks.length === 0)\n\t\t{\n\t\t\treturn '';\n\t\t}\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"tasks-scrum__side-panel-completion--block\">\n\t\t\t\t<div class=\"tasks-scrum__side-panel-completion--info-basic\">\n\t\t\t\t\t<div class=\"tasks-scrum__side-panel-completion--info-basic-block\">\n\t\t\t\t\t\t<div class=\"tasks-scrum__side-panel-completion--info-basic-title-icon\">\n\t\t\t\t\t\t\t${Loc.getMessage('TASKS_SCRUM_SPRINT_COMPLETION_FORM_ACTION_ROW_LABEL')}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"tasks-scrum__side-panel-completion--info-basic-description\">\n\t\t\t\t\t\t${Loc.getMessage('TASKS_SCRUM_SPRINT_COMPLETION_FORM_ACTION_MOVE_LABEL')}\n\t\t\t\t\t</div>\n\t\t\t\t\t${this.renderMoveSelect(sprintData.plannedSprints)}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"tasks-scrum__side-panel-completion--info-items\">\n\t\t\t\t\t${sprintData.uncompletedTasks.map((item: Item) => this.renderItem(item))}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\trenderMoveSelect(plannedSprints: Array<PlannedSprint>): HTMLElement\n\t{\n\t\tconst uiClasses = 'ui-ctl ui-ctl-after-icon ui-ctl-dropdown ui-ctl-w100';\n\n\t\tlet sprintsOptions = '';\n\n\t\tplannedSprints.forEach((sprint: PlannedSprint) => {\n\t\t\tsprintsOptions += `<option value=\"${sprint.id}\">${Text.encode(sprint.name)}</option>`;\n\t\t})\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"tasks-scrum__side-panel-completion--info-select ${uiClasses}\">\n\t\t\t\t<div class=\"ui-ctl-after ui-ctl-icon-angle\"></div>\n\t\t\t\t<select class=\"ui-ctl-element\">\n\t\t\t\t\t<option value=\"backlog\">\n\t\t\t\t\t\t${Loc.getMessage('TASKS_SCRUM_SPRINT_COMPLETION_FORM_SELECTOR_BACKLOG')}\n\t\t\t\t\t</option>\n\t\t\t\t\t<option value=\"0\">\n\t\t\t\t\t\t${Loc.getMessage('TASKS_SCRUM_SPRINT_COMPLETION_FORM_SELECTOR_SPRINT')}\n\t\t\t\t\t</option>\n\t\t\t\t\t${sprintsOptions}\n\t\t\t\t</select>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\trenderItem(item: Item): HTMLElement\n\t{\n\t\tconst src = item.responsible.photo ? Text.encode(item.responsible.photo.src) : null;\n\t\tconst photoStyle = src ? `background-image: url('${src}');` : '';\n\n\t\tconst storyPointsClass = (item.storyPoints === '' ? '--empty' : '');\n\n\t\tconst node = Tag.render`\n\t\t\t<div class=\"tasks-scrum__item-side-panel\">\n\t\t\t\t<div class=\"tasks-scrum__item-side-panel--info\">\n\t\t\t\t\t<div class=\"tasks-scrum__item-side-panel--main-info\">\n\t\t\t\t\t\t<div class=\"tasks-scrum__item-side-panel--title\">\n\t\t\t\t\t\t\t${Text.encode(item.name)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"tasks-scrum__item-side-panel--tags\">\n\t\t\t\t\t\t\t${this.renderEpic(item.epic)}\n\t\t\t\t\t\t\t${this.renderTags(item.tags)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"tasks-scrum__item-side-panel--responsible\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"tasks-scrum__item-side-panel--responsible-photo ui-icon ui-icon-common-user\"\n\t\t\t\t\t\ttitle=\"${Text.encode(item.responsible.name)}\"\n\t\t\t\t\t><i style=\"${photoStyle}\"></i>\n\t\t\t\t\t</div>\n\t\t\t\t\t<span>${Text.encode(item.responsible.name)}</span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"tasks-scrum__item-side-panel--story-points ${storyPointsClass}\">\n\t\t\t\t\t<div class=\"tasks-scrum__item-side-panel--story-points-content\">\n\t\t\t\t\t\t<div class=\"tasks-scrum__item-side-panel--story-points-element\">\n\t\t\t\t\t\t\t${item.storyPoints === '' ? '-' : Text.encode(item.storyPoints)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\tEvent.bind(node, 'click', () => this.emit('taskClick', item.sourceId))\n\n\t\treturn node;\n\t}\n\n\trenderEpic(epic: ?EpicType): ?HTMLElement\n\t{\n\t\tif (Type.isArray(epic) || Type.isUndefined(epic))\n\t\t{\n\t\t\treturn '';\n\t\t}\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"tasks-scrum__item-side-panel--epic --visible\">\n\t\t\t\t<i\n\t\t\t\t\tclass=\"tasks-scrum__item-side-panel--epic-point\"\n\t\t\t\t\tstyle=\"${`background-color: ${epic.color}`}\"\n\t\t\t\t></i>\n\t\t\t\t<span>${Text.encode(epic.name)}</span>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\trenderTags(tags: Array<string>): ?HTMLElement\n\t{\n\t\tif (tags.length === 0)\n\t\t{\n\t\t\treturn '';\n\t\t}\n\n\t\treturn Tag.render`\n\t\t\t${tags.map((tag) => Tag.render`\n\t\t\t\t<div class=\"tasks-scrum__item-side-panel--hashtag --visible\">#${Text.encode(tag)}</div>\n\t\t\t`)}\n\t\t`;\n\t}\n\n\tgetFormattedDateStart(dateStart: number): string\n\t{\n\t\t/* eslint-disable */\n\t\treturn BX.date.format('j F Y', dateStart);\n\t\t/* eslint-enable */\n\t}\n\n\tgetFormattedDateEnd(dateEnd: number): string\n\t{\n\t\t/* eslint-disable */\n\t\treturn BX.date.format('j F Y', dateEnd);\n\t\t/* eslint-enable */\n\t}\n\n\tgetPeriodDays(dateStartTime: number): string\n\t{\n\t\tconst dateWithWeekendOffset = new Date();\n\n\t\tdateWithWeekendOffset.setSeconds(dateWithWeekendOffset.getSeconds());\n\t\tdateWithWeekendOffset.setHours(0, 0, 0, 0);\n\n\t\tconst dateStart = new Date(dateStartTime * 1000);\n\n\t\treturn BX.date.format('ddiff', dateStart, dateWithWeekendOffset);\n\t};\n\n\tcalculatePercentage(first: number, second: number): number\n\t{\n\t\tif (first === 0)\n\t\t{\n\t\t\treturn 0;\n\t\t}\n\n\t\tconst result = Math.round(second * 100 / first);\n\n\t\treturn (isNaN(result) ? 0 : result);\n\t}\n\n\tconvertHexToRGBA(hexCode, opacity)\n\t{\n\t\tlet hex = hexCode.replace('#', '');\n\n\t\tif (hex.length === 3)\n\t\t{\n\t\t\thex = `${hex[0]}${hex[0]}${hex[1]}${hex[1]}${hex[2]}${hex[2]}`;\n\t\t}\n\n\t\tconst r = parseInt(hex.substring(0, 2), 16);\n\t\tconst g = parseInt(hex.substring(2, 4), 16);\n\t\tconst b = parseInt(hex.substring(4, 6), 16);\n\n\t\treturn `rgba(${r},${g},${b},${opacity})`;\n\t}\n\n\tshowErrorAlert(response: ErrorResponse, alertTitle?: string)\n\t{\n\t\tif (Type.isUndefined(response.errors))\n\t\t{\n\t\t\tconsole.log(response);\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (response.errors.length)\n\t\t{\n\t\t\tconst firstError = response.errors.shift();\n\t\t\tif (firstError)\n\t\t\t{\n\t\t\t\tconst errorCode = (firstError.code ? firstError.code : '');\n\n\t\t\t\tconst message = firstError.message + ' ' + errorCode;\n\t\t\t\tconst title = (alertTitle ? alertTitle : Loc.getMessage('TASKS_SCRUM_ERROR_TITLE_POPUP'));\n\n\t\t\t\ttop.BX.UI.Dialogs.MessageBox.alert(message, title);\n\t\t\t}\n\t\t}\n\t}\n}"],"names":["SprintCompletionForm","params","groupId","parseInt","sidePanelManager","BX","SidePanel","Instance","sidePanelId","node","completeButton","open","cacheable","width","contentCallback","Layout","createContent","extensions","title","Loc","getMessage","content","bind","design","section","buttons","cancelButton","SaveButton","text","onclick","onComplete","direction","directionSelector","querySelector","value","setWaiting","ajax","runAction","data","then","response","top","UI","Confetti","fire","particleCount","spread","origin","x","y","zIndex","getTopSlider","getZindex","closeSidePanel","emit","catch","showErrorAlert","openSliders","getOpenSliders","length","forEach","slider","getUrl","close","Promise","resolve","reject","render","sprintData","Tag","Text","encode","name","renderGoal","info","sprintGoal","renderEpics","epics","getFormattedDateStart","dateStart","dateEnd","getPeriodDays","storyPoints","renderWheelCompletedStoryPoints","renderUncompletedTasks","goal","map","epic","colorBorder","convertHexToRGBA","color","colorBackground","differencePercentage","currentPercentage","calculatePercentage","completedStoryPoints","existsLastSprint","lastPercentage","lastStoryPoints","lastCompletedStoryPoints","parseFloat","wheelClass","absoluteValue","Math","abs","renderProgress","percent","uncompletedTasks","renderMoveSelect","plannedSprints","item","renderItem","uiClasses","sprintsOptions","sprint","id","src","responsible","photo","photoStyle","storyPointsClass","renderEpic","renderTags","tags","Event","sourceId","Type","isArray","isUndefined","tag","date","format","dateStartTime","dateWithWeekendOffset","Date","setSeconds","getSeconds","setHours","first","second","result","round","isNaN","hexCode","opacity","hex","replace","r","substring","g","b","alertTitle","errors","console","log","firstError","shift","errorCode","code","message","Dialogs","MessageBox","alert","EventEmitter"],"mappings":"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"}