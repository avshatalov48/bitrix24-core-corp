{"version":3,"file":"sprint.completion.form.bundle.js","sources":["../src/request.sender.js","../src/sprint.completion.form.js"],"sourcesContent":["import {Loc, Type} from 'main.core';\n\ntype ErrorResponse = {\n\tdata: string,\n\terrors: Array,\n\tstatus: string\n}\n\nexport class RequestSender\n{\n\tsendRequest(controller: string, action: string, data = {}, analyticsLabel = {}): Promise\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\ttop.BX.ajax.runAction(\n\t\t\t\t'bitrix:tasks.scrum.' + controller + '.' + action,\n\t\t\t\t{\n\t\t\t\t\tdata: data,\n\t\t\t\t\tanalyticsLabel: analyticsLabel\n\t\t\t\t}\n\t\t\t).then(resolve, reject);\n\t\t});\n\t}\n\n\tgetDataForSprintCompletionForm(data): Promise\n\t{\n\t\treturn this.sendRequest('sprint', 'getDataForSprintCompletionForm', data);\n\t}\n\n\tcompleteSprint(data): Promise\n\t{\n\t\treturn this.sendRequest('sprint', 'completeSprint', data);\n\t}\n\n\tshowErrorAlert(response: ErrorResponse, alertTitle?: string)\n\t{\n\t\tif (Type.isUndefined(response.errors))\n\t\t{\n\t\t\tconsole.log(response);\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (response.errors.length)\n\t\t{\n\t\t\tconst firstError = response.errors.shift();\n\t\t\tif (firstError)\n\t\t\t{\n\t\t\t\tconst errorCode = (firstError.code ? firstError.code : '');\n\n\t\t\t\tconst message = firstError.message + ' ' + errorCode;\n\t\t\t\tconst title = (alertTitle ? alertTitle : Loc.getMessage('TASKS_SCRUM_ERROR_TITLE_POPUP'));\n\n\t\t\t\ttop.BX.UI.Dialogs.MessageBox.alert(message, title);\n\t\t\t}\n\t\t}\n\t}\n}","import {Event, Loc, Tag, Text, Type} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\n\nimport {Layout} from 'ui.sidepanel.layout';\n\nimport {RequestSender} from './request.sender';\n\nimport 'ui.hint';\n\nimport '../css/base.css';\nimport '../css/item.css';\n\ntype Params = {\n\tgroupId: number\n}\n\ntype SprintData = {\n\tid: number,\n\tname: string,\n\tinfo: {\n\t\tsprintGoal: string\n\t},\n\tepics: Array<EpicType>,\n\tdateStart: string,\n\tdateEnd: string,\n\texistsLastSprint: boolean,\n\tstoryPoints: number,\n\tcompletedStoryPoints: number,\n\tlastStoryPoints: number,\n\tlastCompletedStoryPoints: number,\n\tplannedSprints: Array<PlannedSprint>,\n\tuncompletedTasks: Array<Item>\n}\n\ntype PlannedSprint = {\n\tid: number,\n\tname: string\n}\n\ntype Item = {\n\tid: number,\n\tname: string,\n\tresponsible: {\n\t\tid: number,\n\t\tname: string,\n\t\tpathToUser: string,\n\t\tphoto?: {\n\t\t\tsrc: string\n\t\t}\n\t},\n\tepic: ?EpicType,\n\ttags: Array<string>,\n\tsourceId: number,\n\tstoryPoints: string\n}\n\ntype EpicType = {\n\tid: number,\n\tname: string,\n\tdescription: string,\n\tcolor: string\n}\n\ntype Response = {\n\tstatus: string,\n\tdata: SprintData,\n\terrors: Array\n}\n\nexport class SprintCompletionForm extends EventEmitter\n{\n\tconstructor(params: Params)\n\t{\n\t\tsuper(params);\n\n\t\tthis.groupId = parseInt(params.groupId, 10);\n\n\t\t/* eslint-disable */\n\t\tthis.sidePanelManager = BX.SidePanel.Instance;\n\t\t/* eslint-enable */\n\n\t\tthis.sidePanelId = 'tasks-scrum-sprint-completion-form-side-panel';\n\n\t\tthis.requestSender = new RequestSender();\n\n\t\tthis.node = null;\n\n\t\tthis.completeButton = null;\n\t}\n\n\tshow()\n\t{\n\t\tthis.sidePanelManager.open(\n\t\t\tthis.sidePanelId,\n\t\t\t{\n\t\t\t\tcacheable: false,\n\t\t\t\twidth: 700,\n\t\t\t\tcontentCallback: () => {\n\t\t\t\t\treturn Layout.createContent({\n\t\t\t\t\t\textensions: ['ui.dialogs.messagebox', 'ui.confetti', 'tasks.scrum.sprint-completion-form'],\n\t\t\t\t\t\ttitle: Loc.getMessage('TASKS_SCRUM_SPRINT_COMPLETION_FORM_TITLE'),\n\t\t\t\t\t\tcontent: this.createContent.bind(this),\n\t\t\t\t\t\tdesign: {\n\t\t\t\t\t\t\tsection: false\n\t\t\t\t\t\t},\n\t\t\t\t\t\tbuttons: ({cancelButton, SaveButton}) => {\n\t\t\t\t\t\t\treturn [\n\t\t\t\t\t\t\t\tthis.completeButton = new SaveButton({\n\t\t\t\t\t\t\t\t\ttext: Loc.getMessage('TASKS_SCRUM_SPRINT_COMPLETION_FORM_BUTTON'),\n\t\t\t\t\t\t\t\t\tonclick: this.onComplete.bind(this)\n\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\tcancelButton\n\t\t\t\t\t\t\t];\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t}\n\n\tonComplete()\n\t{\n\t\tlet direction = 'backlog';\n\n\t\tlet directionSelector = this.node.querySelector('.tasks-scrum__side-panel-completion--info-select');\n\t\tif (directionSelector)\n\t\t{\n\t\t\tdirectionSelector = directionSelector.querySelector('select');\n\t\t\tdirection = directionSelector.value;\n\t\t}\n\n\t\tthis.completeButton.setWaiting();\n\n\t\tthis.requestSender.completeSprint({\n\t\t\tgroupId: this.groupId,\n\t\t\tdirection: direction\n\t\t})\n\t\t\t.then((response) => {\n\t\t\t\tif (top.BX.UI.Confetti)\n\t\t\t\t{\n\t\t\t\t\ttop.BX.UI.Confetti.fire({\n\t\t\t\t\t\tparticleCount: 400,\n\t\t\t\t\t\tspread: 80,\n\t\t\t\t\t\torigin: {\n\t\t\t\t\t\t\tx: 0.7,\n\t\t\t\t\t\t\ty: 0.2\n\t\t\t\t\t\t},\n\t\t\t\t\t\tzIndex: (this.sidePanelManager.getTopSlider().getZindex() + 1)\n\t\t\t\t\t}).then(() => {\n\t\t\t\t\t\tthis.closeSidePanel();\n\t\t\t\t\t\tthis.emit('afterComplete');\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.closeSidePanel();\n\t\t\t\t\tthis.emit('afterComplete');\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch((response) => {\n\t\t\t\tthis.requestSender.showErrorAlert(\n\t\t\t\t\tresponse,\n\t\t\t\t\tLoc.getMessage('TASKS_SCRUM_SPRINT_COMPLETION_ERROR_TITLE_POPUP')\n\t\t\t\t);\n\t\t\t})\n\t\t;\n\t}\n\n\tcloseSidePanel()\n\t{\n\t\tconst openSliders = this.sidePanelManager.getOpenSliders();\n\t\tif (openSliders.length > 0)\n\t\t{\n\t\t\topenSliders.forEach((slider) => {\n\t\t\t\tif (slider.getUrl() === this.sidePanelId)\n\t\t\t\t{\n\t\t\t\t\tslider.close(false);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tcreateContent()\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tthis.requestSender.getDataForSprintCompletionForm({\n\t\t\t\tgroupId: this.groupId\n\t\t\t})\n\t\t\t\t.then((response: Response) => {\n\t\t\t\t\tresolve(this.render(response.data));\n\t\t\t\t})\n\t\t\t\t.catch((response) => {\n\t\t\t\t\treject();\n\t\t\t\t\tthis.sidePanelManager.close(false, () => {\n\t\t\t\t\t\tthis.requestSender.showErrorAlert(response);\n\t\t\t\t\t});\n\t\t\t\t})\n\t\t\t;\n\t\t});\n\t}\n\n\trender(sprintData: SprintData): HTMLElement\n\t{\n\t\tconst storyPoints = (sprintData.storyPoints === '' ? 0 : sprintData.storyPoints);\n\n\t\tthis.node = Tag.render`\n\t\t\t<div id=\"${Text.getRandom()}\" class=\"tasks-scrum__scope--side-panel-completion\">\n\n\t\t\t<div class=\"tasks-scrum__side-panel-completion--block\">\n\n\t\t\t\t<div class=\"tasks-scrum__side-panel-completion--info-basic\">\n\t\t\t\t\t<div class=\"tasks-scrum__side-panel-completion--info-basic-block\">\n\t\t\t\t\t\t<div class=\"tasks-scrum__side-panel-completion--info-basic-title\">\n\t\t\t\t\t\t\t${Text.encode(sprintData.name)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t${this.renderGoal(sprintData.info.sprintGoal)}\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"tasks-scrum__side-panel-completion--info-additional\">\n\n\t\t\t\t\t${this.renderEpics(sprintData.epics)}\n\n\t\t\t\t\t<div class=\"tasks-scrum__side-panel-completion--info-row\">\n\t\t\t\t\t\t<div class=\"tasks-scrum__side-panel-completion--info-title\">\n\t\t\t\t\t\t\t${Loc.getMessage('TASKS_SCRUM_SPRINT_COMPLETION_FORM_TIME_ROW_LABEL')}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"tasks-scrum__side-panel-completion--info-content tasks-scrum__side-panel-completion--sprint-timing\">\n\t\t\t\t\t\t\t<div class=\"tasks-scrum__side-panel-completion--date-name-block\">\n\t\t\t\t\t\t\t\t<div>${Loc.getMessage('TASKS_SCRUM_SPRINT_COMPLETION_FORM_DATE_START_LABEL')}</div>\n\t\t\t\t\t\t\t\t<div>${Loc.getMessage('TASKS_SCRUM_SPRINT_COMPLETION_FORM_DATE_END_LABEL')}</div>\n\t\t\t\t\t\t\t\t<div>${Loc.getMessage('TASKS_SCRUM_SPRINT_COMPLETION_FORM_PERIOD_LABEL')}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"tasks-scrum__side-panel-completion--date-result-block\">\n\t\t\t\t\t\t\t\t<div>${this.getFormattedDateStart(sprintData.dateStart)}</div>\n\t\t\t\t\t\t\t\t<div>${this.getFormattedDateStart(sprintData.dateEnd)}</div>\n\t\t\t\t\t\t\t\t<div>${this.getPeriodDays(sprintData.dateStart)}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"tasks-scrum__side-panel-completion--info-row\">\n\n\t\t\t\t\t\t<div class=\"tasks-scrum__side-panel-completion--info-title\">\n\t\t\t\t\t\t\t${Loc.getMessage('TASKS_SCRUM_SPRINT_COMPLETION_FORM_PLAN_ROW_LABEL')}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"tasks-scrum__side-panel-completion--info-content\">\n\t\t\t\t\t\t\t<div class=\"tasks-scrum__side-panel-completion--plan-block\">\n\n\t\t\t\t\t\t\t\t<div class=\"tasks-scrum__side-panel-completion--sprint-plans\">\n\t\t\t\t\t\t\t\t\t<div class=\"tasks-scrum__side-panel-completion--plan-block-number --percent\">\n\t\t\t\t\t\t\t\t\t\t<div \n\t\t\t\t\t\t\t\t\t\t\tclass=\"tasks-scrum__side-panel-completion--plan-block-number-date\"\n\t\t\t\t\t\t\t\t\t\t\ttitle=\"${Text.encode(storyPoints)}\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t${Text.encode(storyPoints)}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"tasks-scrum__side-panel-completion--plan-block-name\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"tasks-scrum__side-panel-completion--plan-block-name-text\">\n\t\t\t\t\t\t\t\t\t\t\t${Loc.getMessage('TASKS_SCRUM_SPRINT_COMPLETION_FORM_PLAN_SP')}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"ui-hint\">\n\t\t\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"ui-hint-icon\"\n\t\t\t\t\t\t\t\t\t\t\t\tdata-hint=\"${Loc.getMessage('TSS_START_STORY_POINTS_HINT')}\"\n\t\t\t\t\t\t\t\t\t\t\t\tdata-hint-no-icon\n\t\t\t\t\t\t\t\t\t\t\t></span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div class=\"tasks-scrum__side-panel-completion--sprint-plans\">\n\t\t\t\t\t\t\t\t\t${this.renderWheelCompletedStoryPoints(sprintData)}\n\t\t\t\t\t\t\t\t\t<div class=\"tasks-scrum__side-panel-completion--plan-block-name\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"tasks-scrum__side-panel-completion--plan-block-name-text\">\n\t\t\t\t\t\t\t\t\t\t\t${Loc.getMessage('TASKS_SCRUM_SPRINT_COMPLETION_FORM_DONE_SP')}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"ui-hint\">\n\t\t\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"ui-hint-icon\"\n\t\t\t\t\t\t\t\t\t\t\t\tdata-hint=\"${Loc.getMessage('TSS_START_STORY_POINTS_HINT')}\"\n\t\t\t\t\t\t\t\t\t\t\t\tdata-hint-no-icon\n\t\t\t\t\t\t\t\t\t\t\t></span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t${this.renderUncompletedTasks(sprintData)}\n\n\t\t\t</div>\n\t\t`;\n\n\t\tthis.initHints(this.node);\n\n\t\treturn this.node;\n\t}\n\n\trenderGoal(goal: string): ?HTMLElement\n\t{\n\t\tif (goal === '')\n\t\t{\n\t\t\treturn '';\n\t\t}\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"tasks-scrum__side-panel-completion--info-basic-block\">\n\t\t\t\t<div class=\"tasks-scrum__side-panel-completion--info-basic-description\">\n\t\t\t\t\t${Text.encode(goal)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\trenderEpics(epics: Array<EpicType>): ?HTMLElement\n\t{\n\t\tif (!epics.length)\n\t\t{\n\t\t\treturn '';\n\t\t}\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"tasks-scrum__side-panel-completion--info-row\">\n\t\t\t\t<div class=\"tasks-scrum__side-panel-completion--info-title\">\n\t\t\t\t\t${Loc.getMessage('TASKS_SCRUM_SPRINT_COMPLETION_FORM_EPICS_ROW_LABEL')}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"tasks-scrum__side-panel-completion--info-content\">\n\t\t\t\t\t${\n\t\t\t\t\t\tepics.map((epic: EpicType) => {\n\t\t\t\t\t\t\tconst colorBorder = this.convertHexToRGBA(epic.color, 0.7);\n\t\t\t\t\t\t\tconst colorBackground = this.convertHexToRGBA(epic.color, 0.3);\n\n\t\t\t\t\t\t\treturn Tag.render`\n\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\tclass=\"tasks-scrum__epic-label\"\n\t\t\t\t\t\t\t\t\tstyle=\"background: ${colorBackground}; border-color: ${colorBorder};\"\n\t\t\t\t\t\t\t\t>${Text.encode(epic.name)}</span>`\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\trenderWheelCompletedStoryPoints(sprintData: SprintData): HTMLElement\n\t{\n\t\tlet differencePercentage = 0;\n\n\t\tconst currentPercentage = this.calculatePercentage(\n\t\t\tsprintData.storyPoints,\n\t\t\tsprintData.completedStoryPoints\n\t\t);\n\n\t\tif (sprintData.existsLastSprint)\n\t\t{\n\t\t\tconst lastPercentage = this.calculatePercentage(\n\t\t\t\tsprintData.lastStoryPoints,\n\t\t\t\tsprintData.lastCompletedStoryPoints\n\t\t\t);\n\n\t\t\tdifferencePercentage = parseFloat(currentPercentage) - parseFloat(lastPercentage);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tdifferencePercentage = currentPercentage;\n\t\t}\n\n\t\tlet wheelClass = '';\n\n\t\tif (differencePercentage > 0)\n\t\t{\n\t\t\twheelClass = `tasks-scrum__side-panel-completion--plan-block-number --arrow-up --percent --success`;\n\t\t}\n\t\telse\n\t\t{\n\t\t\twheelClass = `tasks-scrum__side-panel-completion--plan-block-number --arrow-down --percent --warning`;\n\t\t}\n\n\t\tconst absoluteValue = Math.abs(differencePercentage);\n\n\t\tconst renderProgress = (percent: number) => {\n\t\t\tif (percent === 0)\n\t\t\t{\n\t\t\t\treturn '';\n\t\t\t}\n\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"tasks-scrum__side-panel-completion--progress\">\n\t\t\t\t\t<span class=\"tasks-scrum__side-panel-completion--progress-number\">${percent}</span>\n\t\t\t\t\t<span class=\"tasks-scrum__side-panel-completion--progress-percent\">%</span></div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t};\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"${wheelClass}\">\n\t\t\t\t<div \n\t\t\t\t\tclass=\"tasks-scrum__side-panel-completion--plan-block-number-date\"\n\t\t\t\t\ttitle=\"${Text.encode(sprintData.completedStoryPoints)}\"\n\t\t\t\t>\n\t\t\t\t\t${Text.encode(sprintData.completedStoryPoints)}\n\t\t\t\t</div>\n\t\t\t\t${renderProgress(absoluteValue)}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\trenderUncompletedTasks(sprintData: SprintData): HTMLElement\n\t{\n\t\tif (sprintData.uncompletedTasks.length === 0)\n\t\t{\n\t\t\treturn '';\n\t\t}\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"tasks-scrum__side-panel-completion--block\">\n\t\t\t\t<div class=\"tasks-scrum__side-panel-completion--info-basic\">\n\t\t\t\t\t<div class=\"tasks-scrum__side-panel-completion--info-basic-block\">\n\t\t\t\t\t\t<div class=\"tasks-scrum__side-panel-completion--info-basic-title-icon\">\n\t\t\t\t\t\t\t${Loc.getMessage('TASKS_SCRUM_SPRINT_COMPLETION_FORM_ACTION_ROW_LABEL')}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"tasks-scrum__side-panel-completion--info-basic-description\">\n\t\t\t\t\t\t${Loc.getMessage('TASKS_SCRUM_SPRINT_COMPLETION_FORM_ACTION_MOVE_LABEL')}\n\t\t\t\t\t</div>\n\t\t\t\t\t${this.renderMoveSelect(sprintData.plannedSprints)}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"tasks-scrum__side-panel-completion--info-items\">\n\t\t\t\t\t${sprintData.uncompletedTasks.map((item: Item) => this.renderItem(item))}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\trenderMoveSelect(plannedSprints: Array<PlannedSprint>): HTMLElement\n\t{\n\t\tconst uiClasses = 'ui-ctl ui-ctl-after-icon ui-ctl-dropdown ui-ctl-w100';\n\n\t\tlet sprintsOptions = '';\n\n\t\tplannedSprints.forEach((sprint: PlannedSprint) => {\n\t\t\tsprintsOptions += `<option value=\"${sprint.id}\">${Text.encode(sprint.name)}</option>`;\n\t\t})\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"tasks-scrum__side-panel-completion--info-select ${uiClasses}\">\n\t\t\t\t<div class=\"ui-ctl-after ui-ctl-icon-angle\"></div>\n\t\t\t\t<select class=\"ui-ctl-element\">\n\t\t\t\t\t<option value=\"backlog\">\n\t\t\t\t\t\t${Loc.getMessage('TASKS_SCRUM_SPRINT_COMPLETION_FORM_SELECTOR_BACKLOG')}\n\t\t\t\t\t</option>\n\t\t\t\t\t<option value=\"0\">\n\t\t\t\t\t\t${Loc.getMessage('TASKS_SCRUM_SPRINT_COMPLETION_FORM_SELECTOR_SPRINT')}\n\t\t\t\t\t</option>\n\t\t\t\t\t${sprintsOptions}\n\t\t\t\t</select>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\trenderItem(item: Item): HTMLElement\n\t{\n\t\tconst src = item.responsible.photo ? Text.encode(item.responsible.photo.src) : null;\n\t\tconst photoStyle = src ? `background-image: url('${src}');` : '';\n\n\t\tconst storyPointsClass = (item.storyPoints === '' ? '--empty' : '');\n\n\t\tconst node = Tag.render`\n\t\t\t<div class=\"tasks-scrum__item-side-panel\">\n\t\t\t\t<div class=\"tasks-scrum__item-side-panel--info\">\n\t\t\t\t\t<div class=\"tasks-scrum__item-side-panel--main-info\">\n\t\t\t\t\t\t<div class=\"tasks-scrum__item-side-panel--title\">\n\t\t\t\t\t\t\t${Text.encode(item.name)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"tasks-scrum__item-side-panel--tags\">\n\t\t\t\t\t\t\t${this.renderEpic(item.epic)}\n\t\t\t\t\t\t\t${this.renderTags(item.tags)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"tasks-scrum__item-side-panel--responsible\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"tasks-scrum__item-side-panel--responsible-photo ui-icon ui-icon-common-user\"\n\t\t\t\t\t\ttitle=\"${Text.encode(item.responsible.name)}\"\n\t\t\t\t\t><i style=\"${photoStyle}\"></i>\n\t\t\t\t\t</div>\n\t\t\t\t\t<span>${Text.encode(item.responsible.name)}</span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"tasks-scrum__item-side-panel--story-points ${storyPointsClass}\">\n\t\t\t\t\t<div class=\"tasks-scrum__item-side-panel--story-points-content\">\n\t\t\t\t\t\t<div class=\"tasks-scrum__item-side-panel--story-points-element\">\n\t\t\t\t\t\t\t${item.storyPoints === '' ? '-' : Text.encode(item.storyPoints)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\tEvent.bind(node, 'click', () => this.emit('taskClick', item.sourceId))\n\n\t\treturn node;\n\t}\n\n\trenderEpic(epic: ?EpicType): ?HTMLElement\n\t{\n\t\tif (Type.isArray(epic) || Type.isUndefined(epic))\n\t\t{\n\t\t\treturn '';\n\t\t}\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"tasks-scrum__item-side-panel--epic --visible\">\n\t\t\t\t<i\n\t\t\t\t\tclass=\"tasks-scrum__item-side-panel--epic-point\"\n\t\t\t\t\tstyle=\"${`background-color: ${epic.color}`}\"\n\t\t\t\t></i>\n\t\t\t\t<span>${Text.encode(epic.name)}</span>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\trenderTags(tags: Array<string>): ?HTMLElement\n\t{\n\t\tif (tags.length === 0)\n\t\t{\n\t\t\treturn '';\n\t\t}\n\n\t\treturn Tag.render`\n\t\t\t${tags.map((tag) => Tag.render`\n\t\t\t\t<div class=\"tasks-scrum__item-side-panel--hashtag --visible\">#${Text.encode(tag)}</div>\n\t\t\t`)}\n\t\t`;\n\t}\n\n\tgetFormattedDateStart(dateStart: number): string\n\t{\n\t\t/* eslint-disable */\n\t\treturn BX.date.format('j F Y', dateStart);\n\t\t/* eslint-enable */\n\t}\n\n\tgetFormattedDateEnd(dateEnd: number): string\n\t{\n\t\t/* eslint-disable */\n\t\treturn BX.date.format('j F Y', dateEnd);\n\t\t/* eslint-enable */\n\t}\n\n\tgetPeriodDays(dateStartTime: number): string\n\t{\n\t\tconst dateWithWeekendOffset = new Date();\n\n\t\tdateWithWeekendOffset.setSeconds(dateWithWeekendOffset.getSeconds());\n\t\tdateWithWeekendOffset.setHours(0, 0, 0, 0);\n\n\t\tconst dateStart = new Date(dateStartTime * 1000);\n\n\t\treturn BX.date.format('ddiff', dateStart, dateWithWeekendOffset);\n\t};\n\n\tcalculatePercentage(first: number, second: number): number\n\t{\n\t\tif (first === 0)\n\t\t{\n\t\t\treturn 0;\n\t\t}\n\n\t\tconst result = Math.round(second * 100 / first);\n\n\t\treturn (isNaN(result) ? 0 : result);\n\t}\n\n\tconvertHexToRGBA(hexCode, opacity)\n\t{\n\t\tlet hex = hexCode.replace('#', '');\n\n\t\tif (hex.length === 3)\n\t\t{\n\t\t\thex = `${hex[0]}${hex[0]}${hex[1]}${hex[1]}${hex[2]}${hex[2]}`;\n\t\t}\n\n\t\tconst r = parseInt(hex.substring(0, 2), 16);\n\t\tconst g = parseInt(hex.substring(2, 4), 16);\n\t\tconst b = parseInt(hex.substring(4, 6), 16);\n\n\t\treturn `rgba(${r},${g},${b},${opacity})`;\n\t}\n\n\tinitHints(node: HTMLElement)\n\t{\n\t\t// todo wtf hint\n\t\ttop.BX.UI.Hint.popup = null;\n\t\ttop.BX.UI.Hint.id = 'ui-hint-popup-' + (+new Date());\n\t\ttop.BX.UI.Hint.init(node);\n\t}\n}"],"names":["RequestSender","controller","action","data","analyticsLabel","Promise","resolve","reject","top","BX","ajax","runAction","then","sendRequest","response","alertTitle","Type","isUndefined","errors","console","log","length","firstError","shift","errorCode","code","message","title","Loc","getMessage","UI","Dialogs","MessageBox","alert","SprintCompletionForm","params","groupId","parseInt","sidePanelManager","SidePanel","Instance","sidePanelId","requestSender","node","completeButton","open","cacheable","width","contentCallback","Layout","createContent","extensions","content","bind","design","section","buttons","cancelButton","SaveButton","text","onclick","onComplete","direction","directionSelector","querySelector","value","setWaiting","completeSprint","Confetti","fire","particleCount","spread","origin","x","y","zIndex","getTopSlider","getZindex","closeSidePanel","emit","catch","showErrorAlert","openSliders","getOpenSliders","forEach","slider","getUrl","close","getDataForSprintCompletionForm","render","sprintData","storyPoints","Tag","Text","getRandom","encode","name","renderGoal","info","sprintGoal","renderEpics","epics","getFormattedDateStart","dateStart","dateEnd","getPeriodDays","renderWheelCompletedStoryPoints","renderUncompletedTasks","initHints","goal","map","epic","colorBorder","convertHexToRGBA","color","colorBackground","differencePercentage","currentPercentage","calculatePercentage","completedStoryPoints","existsLastSprint","lastPercentage","lastStoryPoints","lastCompletedStoryPoints","parseFloat","wheelClass","absoluteValue","Math","abs","renderProgress","percent","uncompletedTasks","renderMoveSelect","plannedSprints","item","renderItem","uiClasses","sprintsOptions","sprint","id","src","responsible","photo","photoStyle","storyPointsClass","renderEpic","renderTags","tags","Event","sourceId","isArray","tag","date","format","dateStartTime","dateWithWeekendOffset","Date","setSeconds","getSeconds","setHours","first","second","result","round","isNaN","hexCode","opacity","hex","replace","r","substring","g","b","Hint","popup","init","EventEmitter"],"mappings":"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"}