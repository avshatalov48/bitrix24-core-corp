{"version":3,"file":"sprint.start.form.bundle.js","sources":["../src/request.sender.js","../src/sprint.start.form.js"],"sourcesContent":["import {Loc, Type} from 'main.core';\n\ntype ErrorResponse = {\n\tdata: string,\n\terrors: Array,\n\tstatus: string\n}\n\nexport class RequestSender\n{\n\tsendRequest(controller: string, action: string, data = {}, analyticsLabel = {}): Promise\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\ttop.BX.ajax.runAction(\n\t\t\t\t'bitrix:tasks.scrum.' + controller + '.' + action,\n\t\t\t\t{\n\t\t\t\t\tdata: data,\n\t\t\t\t\tanalyticsLabel: analyticsLabel\n\t\t\t\t}\n\t\t\t).then(resolve, reject);\n\t\t});\n\t}\n\n\tgetDataForSprintStartForm(data): Promise\n\t{\n\t\treturn this.sendRequest('sprint', 'getDataForSprintStartForm', data);\n\t}\n\n\tstartSprint(data): Promise\n\t{\n\t\treturn this.sendRequest(\n\t\t\t'sprint',\n\t\t\t'startSprint',\n\t\t\tdata,\n\t\t\t{\n\t\t\t\tscrum: 'Y',\n\t\t\t\taction: 'sprint_start',\n\t\t\t}\n\t\t);\n\t}\n\n\tshowErrorAlert(response: ErrorResponse, alertTitle?: string)\n\t{\n\t\tif (Type.isUndefined(response.errors))\n\t\t{\n\t\t\tconsole.log(response);\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (response.errors.length)\n\t\t{\n\t\t\tconst firstError = response.errors.shift();\n\t\t\tif (firstError)\n\t\t\t{\n\t\t\t\tconst errorCode = (firstError.code ? firstError.code : '');\n\n\t\t\t\tconst message = firstError.message + ' ' + errorCode;\n\t\t\t\tconst title = (alertTitle ? alertTitle : Loc.getMessage('TASKS_SCRUM_ERROR_TITLE_POPUP'));\n\n\t\t\t\ttop.BX.UI.Dialogs.MessageBox.alert(message, title);\n\t\t\t}\n\t\t}\n\t}\n}","import {Event, Loc, Tag, Text} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\n\nimport {Layout} from 'ui.sidepanel.layout';\n\nimport {RequestSender} from './request.sender';\n\nimport 'ui.hint';\n\nimport '../css/base.css';\n\ntype Params = {\n\tgroupId: number,\n\tsprintId: number\n}\n\ntype SprintData = {\n\tid: number,\n\tname: string,\n\tepics: Array<EpicType>,\n\tdateStart: string,\n\tdateEnd: string,\n\tnumberTasks: number,\n\tstoryPoints: number,\n\tdifferenceStoryPoints: string,\n\tdifferenceMarker: boolean,\n\tnumberUnevaluatedTasks: number\n}\n\ntype EpicType = {\n\tid: number,\n\tname: string,\n\tdescription: string,\n\tcolor: string\n}\n\ntype Response = {\n\tstatus: string,\n\tdata: SprintData,\n\terrors: Array\n}\n\nexport class SprintStartForm extends EventEmitter\n{\n\tconstructor(params: Params)\n\t{\n\t\tsuper(params);\n\n\t\tthis.groupId = parseInt(params.groupId, 10);\n\t\tthis.sprintId = parseInt(params.sprintId, 10);\n\n\t\t/* eslint-disable */\n\t\tthis.sidePanelManager = BX.SidePanel.Instance;\n\t\t/* eslint-enable */\n\n\t\tthis.requestSender = new RequestSender();\n\n\t\tthis.node = null;\n\t}\n\n\tshow()\n\t{\n\t\tthis.sidePanelManager.open(\n\t\t\t'tasks-scrum-sprint-start-form-side-panel',\n\t\t\t{\n\t\t\t\tcacheable: false,\n\t\t\t\twidth: 700,\n\t\t\t\tlabel: {\n\t\t\t\t\ttext: Loc.getMessage('TASKS_SCRUM_SPRINT_SIDE_PANEL_LABEL'),\n\t\t\t\t},\n\t\t\t\tcontentCallback: () => {\n\t\t\t\t\treturn Layout.createContent({\n\t\t\t\t\t\textensions: ['ui.dialogs.messagebox', 'tasks.scrum.sprint-start-form'],\n\t\t\t\t\t\ttitle: Loc.getMessage('TASKS_SCRUM_SPRINT_START_FORM_TITLE'),\n\t\t\t\t\t\tcontent: this.createContent.bind(this),\n\t\t\t\t\t\tdesign: {\n\t\t\t\t\t\t\tsection: false\n\t\t\t\t\t\t},\n\t\t\t\t\t\tbuttons: ({cancelButton, SaveButton}) => {\n\t\t\t\t\t\t\treturn [\n\t\t\t\t\t\t\t\tnew SaveButton({\n\t\t\t\t\t\t\t\t\ttext: Loc.getMessage('TASKS_SCRUM_SPRINT_START_FORM_BUTTON'),\n\t\t\t\t\t\t\t\t\tonclick: this.onStart.bind(this)\n\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\tcancelButton\n\t\t\t\t\t\t\t];\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t}\n\n\tonStart()\n\t{\n\t\tconst baseContainer = this.node.querySelector('.tasks-scrum__side-panel-start--info-basic');\n\n\t\tconst timeContainer = this.node.querySelector('.tasks-scrum__side-panel-start--timing');\n\t\tconst dateInputs = timeContainer.querySelectorAll('.ui-ctl-date');\n\n\t\tconst dateStartValue = dateInputs.item(0).querySelector('input').value;\n\t\tconst dateEndValue = dateInputs.item(1).querySelector('input').value;\n\n\t\tthis.requestSender.startSprint({\n\t\t\tgroupId: this.groupId,\n\t\t\tsprintId: this.sprintId,\n\t\t\tname: baseContainer.querySelector('input').value,\n\t\t\tsprintGoal: baseContainer.querySelector('textarea').value,\n\t\t\tdateStart: Math.floor(BX.parseDate(dateStartValue).getTime() / 1000),\n\t\t\tdateEnd: Math.floor(BX.parseDate(dateEndValue).getTime() / 1000)\n\t\t})\n\t\t\t.then((response) => {\n\t\t\t\tthis.sidePanelManager.close(false, () => {\n\t\t\t\t\tthis.emit('afterStart');\n\t\t\t\t});\n\t\t\t})\n\t\t\t.catch((response) => {\n\t\t\t\tthis.requestSender.showErrorAlert(\n\t\t\t\t\tresponse,\n\t\t\t\t\tLoc.getMessage('TASKS_SCRUM_SPRINT_START_ERROR_TITLE_POPUP')\n\t\t\t\t);\n\t\t\t})\n\t\t;\n\t}\n\n\tcreateContent()\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tthis.requestSender.getDataForSprintStartForm({\n\t\t\t\tgroupId: this.groupId,\n\t\t\t\tsprintId: this.sprintId\n\t\t\t})\n\t\t\t\t.then((response: Response) => {\n\t\t\t\t\tresolve(this.render(response.data));\n\t\t\t\t})\n\t\t\t\t.catch((response) => {\n\t\t\t\t\treject();\n\t\t\t\t\tthis.sidePanelManager.close(false, () => {\n\t\t\t\t\t\tthis.requestSender.showErrorAlert(response);\n\t\t\t\t\t});\n\t\t\t\t})\n\t\t\t;\n\t\t});\n\t}\n\n\trender(sprintData: SprintData): HTMLElement\n\t{\n\t\tthis.node = Tag.render`\n\t\t\t<div class=\"tasks-scrum__side-panel-start tasks-scrum__scope--side-panel-start\">\n\n\t\t\t\t<div class=\"tasks-scrum__side-panel-start--block\">\n\n\t\t\t\t\t<div class=\"tasks-scrum__side-panel-start--info-basic\">\n\t\t\t\t\t\t<div class=\"tasks-scrum__side-panel-start--info-basic-block\">\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tplaceholder=\"${Loc.getMessage('TASKS_SCRUM_SPRINT_START_FORM_NAME_PLACEHOLDER')}\"\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tclass=\"tasks-scrum__side-panel-start--info-basic-input\"\n\t\t\t\t\t\t\t\tvalue=\"${Text.encode(sprintData.name)}\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"tasks-scrum__side-panel-start--info-basic-block\">\n\t\t\t\t\t\t\t<textarea\n\t\t\t\t\t\t\t\tplaceholder=\"${Loc.getMessage('TASKS_SCRUM_SPRINT_START_FORM_DESC_PLACEHOLDER')}\"\n\t\t\t\t\t\t\t\trows=\"7\"\n\t\t\t\t\t\t\t\tclass=\"tasks-scrum__side-panel-start--info-basic-textarea\"\n\t\t\t\t\t\t\t></textarea>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"tasks-scrum__side-panel-start--info-additional\">\n\n\t\t\t\t\t\t${this.renderEpics(sprintData.epics)}\n\n\t\t\t\t\t\t<div class=\"tasks-scrum__side-panel-start--info-row tasks-scrum__side-panel-start--timing\">\n\t\t\t\t\t\t\t<div class=\"tasks-scrum__side-panel-start--info-title\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('TASKS_SCRUM_SPRINT_START_FORM_TIME_ROW_LABEL')}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"tasks-scrum__side-panel-start--info-content\">\n\t\t\t\t\t\t\t\t<label class=\"tasks-scrum__side-panel-start--date\">\n\t\t\t\t\t\t\t\t\t<div class=\"tasks-scrum__side-panel-start--date-name\">\n\t\t\t\t\t\t\t\t\t\t${Loc.getMessage('TASKS_SCRUM_SPRINT_START_FORM_DATE_START_LABEL')}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-after-icon ui-ctl-date\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"ui-ctl-after ui-ctl-icon-calendar\"></div>\n\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t\t\t\t\t\t\tvalue=\"${sprintData.dateStart}\"\n\t\t\t\t\t\t\t\t\t\t\treadonly=\"readonly\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t<label class=\"tasks-scrum__side-panel-start--date\">\n\t\t\t\t\t\t\t\t\t<div class=\"tasks-scrum__side-panel-start--date-name\">\n\t\t\t\t\t\t\t\t\t\t${Loc.getMessage('TASKS_SCRUM_SPRINT_START_FORM_DATE_END_LABEL')}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-after-icon ui-ctl-date\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"ui-ctl-after ui-ctl-icon-calendar\"></div>\n\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t\t\t\t\t\t\tvalue=\"${sprintData.dateEnd}\"\n\t\t\t\t\t\t\t\t\t\t\treadonly=\"readonly\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class=\"tasks-scrum__side-panel-start--info-row\">\n\t\t\t\t\t\t\t<div class=\"tasks-scrum__side-panel-start--info-title\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('TASKS_SCRUM_SPRINT_START_FORM_PLAN_ROW_LABEL')}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"tasks-scrum__side-panel-start--info-content\">\n\t\t\t\t\t\t\t\t<div class=\"tasks-scrum__side-panel-start--plan-block\">\n\n\t\t\t\t\t\t\t\t\t<div class=\"tasks-scrum__side-panel-start--sprint-plans\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"tasks-scrum__side-panel-start--plan-block-number\">\n\t\t\t\t\t\t\t\t\t\t\t<div \n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"tasks-scrum__side-panel-start--plan-block-number-date\" \n\t\t\t\t\t\t\t\t\t\t\t\ttitle=\"${sprintData.numberTasks}\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t${sprintData.numberTasks}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"tasks-scrum__side-panel-start--plan-block-name\">\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"tasks-scrum__side-panel-start--plan-block-name-text\">\n\t\t\t\t\t\t\t\t\t\t\t\t${Loc.getMessage('TASKS_SCRUM_SPRINT_START_FORM_TASK_COUNT_LABEL')}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div class=\"tasks-scrum__side-panel-start--sprint-plans\">\n\t\t\t\t\t\t\t\t\t${this.renderWheelStoryPoints(sprintData)}\n\t\t\t\t\t\t\t\t\t<div class=\"tasks-scrum__side-panel-start--plan-block-name\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"tasks-scrum__side-panel-start--plan-block-name-text\">\n\t\t\t\t\t\t\t\t\t\t\t${Loc.getMessage('TASKS_SCRUM_SPRINT_START_FORM_STORY_POINTS_LABEL')}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"ui-hint\">\n\t\t\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"ui-hint-icon\"\n\t\t\t\t\t\t\t\t\t\t\t\tdata-hint=\"${Loc.getMessage('TSS_START_STORY_POINTS_HINT')}\"\n\t\t\t\t\t\t\t\t\t\t\t\tdata-hint-no-icon\n\t\t\t\t\t\t\t\t\t\t\t></span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t${this.renderWarning(sprintData.numberUnevaluatedTasks)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\tconst timeContainer = this.node.querySelector('.tasks-scrum__side-panel-start--timing');\n\t\ttimeContainer.querySelectorAll('.ui-ctl-date')\n\t\t\t.forEach((inputContainer: HTMLElement) => {\n\t\t\t\tEvent.bind(\n\t\t\t\t\tinputContainer,\n\t\t\t\t\t'click',\n\t\t\t\t\tthis.showCalendar.bind(this, inputContainer)\n\t\t\t\t);\n\t\t\t})\n\t\t;\n\n\t\tthis.initHints(this.node);\n\n\t\treturn this.node;\n\t}\n\n\trenderEpics(epics: Array<EpicType>): ?HTMLElement\n\t{\n\t\tif (!epics.length)\n\t\t{\n\t\t\treturn '';\n\t\t}\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"tasks-scrum__side-panel-start--info-row\">\n\t\t\t\t<div class=\"tasks-scrum__side-panel-start--info-title\">\n\t\t\t\t\t${Loc.getMessage('TASKS_SCRUM_SPRINT_START_FORM_EPICS_ROW_LABEL')}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"tasks-scrum__side-panel-start--info-content\">\n\t\t\t\t\t${\n\t\t\t\t\t\tepics.map((epic: EpicType) => {\n\t\t\t\t\t\t\tconst colorBorder = this.convertHexToRGBA(epic.color, 0.7);\n\t\t\t\t\t\t\tconst colorBackground = this.convertHexToRGBA(epic.color, 0.3);\n\n\t\t\t\t\t\t\treturn Tag.render`\n\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\tclass=\"tasks-scrum__epic-label\"\n\t\t\t\t\t\t\t\t\tstyle=\"background: ${colorBackground}; border-color: ${colorBorder};\"\n\t\t\t\t\t\t\t\t>${Text.encode(epic.name)}</span>`\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\trenderWarning(count: number): ?HTMLElement\n\t{\n\t\tif (count === 0)\n\t\t{\n\t\t\treturn '';\n\t\t}\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"ui-alert ui-alert-icon-danger ui-alert-warning\">\n\t\t\t\t<span class=\"ui-alert-message\">\n\t\t\t\t\t${Loc.getMessage('TASKS_SCRUM_SPRINT_START_FORM_WARN_TEXT').replace('#count#', count)}\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\trenderWheelStoryPoints(sprintData: SprintData): string\n\t{\n\t\tlet numberClass = '';\n\n\t\tif (sprintData.differenceMarker)\n\t\t{\n\t\t\tconst arrowClass = sprintData.storyPoints === '' ? '' : '--arrow-up';\n\n\t\t\tnumberClass = `tasks-scrum__side-panel-start--plan-block-number ${arrowClass} --success`;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tconst arrowClass = sprintData.storyPoints === '' ? '' : '--arrow-down';\n\n\t\t\tnumberClass = `tasks-scrum__side-panel-start--plan-block-number ${arrowClass} --warning`;\n\t\t}\n\n\t\tconst renderProgress = (differenceStoryPoints) => {\n\t\t\tif (parseInt(differenceStoryPoints, 10) === 0)\n\t\t\t{\n\t\t\t\treturn '';\n\t\t\t}\n\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"tasks-scrum__side-panel-start--progress\">\n\t\t\t\t\t<span class=\"tasks-scrum__side-panel-start--progress-number\">${differenceStoryPoints}</span>\n\t\t\t\t\t<span class=\"tasks-scrum__side-panel-start--progress-percent\">%</span></div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t};\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"${numberClass}\">\n\t\t\t<div \n\t\t\t\tclass=\"tasks-scrum__side-panel-start--plan-block-number-date\"\n\t\t\t\ttitle=\"${sprintData.storyPoints === '' ? 0 : sprintData.storyPoints}\"\n\t\t\t>\n\t\t\t\t${sprintData.storyPoints === '' ? 0 : sprintData.storyPoints}\n\t\t\t</div>\n\t\t\t${renderProgress(sprintData.differenceStoryPoints)}\n\t\t`;\n\t}\n\n\tshowCalendar(inputContainer: HTMLElement)\n\t{\n\t\t/* eslint-disable */\n\t\tnew top.BX.JCCalendar().Show({\n\t\t\tnode: inputContainer,\n\t\t\tfield: inputContainer.querySelector('input'),\n\t\t\tbTime: false,\n\t\t\tbSetFocus: false,\n\t\t\tbHideTime: false\n\t\t})\n\t\t/* eslint-enable */\n\t}\n\n\tconvertHexToRGBA(hexCode, opacity)\n\t{\n\t\tlet hex = hexCode.replace('#', '');\n\n\t\tif (hex.length === 3)\n\t\t{\n\t\t\thex = `${hex[0]}${hex[0]}${hex[1]}${hex[1]}${hex[2]}${hex[2]}`;\n\t\t}\n\n\t\tconst r = parseInt(hex.substring(0, 2), 16);\n\t\tconst g = parseInt(hex.substring(2, 4), 16);\n\t\tconst b = parseInt(hex.substring(4, 6), 16);\n\n\t\treturn `rgba(${r},${g},${b},${opacity})`;\n\t}\n\n\tinitHints(node: HTMLElement)\n\t{\n\t\t// todo wtf hint\n\t\ttop.BX.UI.Hint.popup = null;\n\t\ttop.BX.UI.Hint.id = 'ui-hint-popup-' + (+new Date());\n\t\ttop.BX.UI.Hint.init(node);\n\t}\n}"],"names":["RequestSender","controller","action","data","analyticsLabel","Promise","resolve","reject","top","BX","ajax","runAction","then","sendRequest","scrum","response","alertTitle","Type","isUndefined","errors","console","log","length","firstError","shift","errorCode","code","message","title","Loc","getMessage","UI","Dialogs","MessageBox","alert","SprintStartForm","params","groupId","parseInt","sprintId","sidePanelManager","SidePanel","Instance","requestSender","node","open","cacheable","width","label","text","contentCallback","Layout","createContent","extensions","content","bind","design","section","buttons","cancelButton","SaveButton","onclick","onStart","baseContainer","querySelector","timeContainer","dateInputs","querySelectorAll","dateStartValue","item","value","dateEndValue","startSprint","name","sprintGoal","dateStart","Math","floor","parseDate","getTime","dateEnd","close","emit","catch","showErrorAlert","getDataForSprintStartForm","render","sprintData","Tag","Text","encode","renderEpics","epics","numberTasks","renderWheelStoryPoints","renderWarning","numberUnevaluatedTasks","forEach","inputContainer","Event","showCalendar","initHints","map","epic","colorBorder","convertHexToRGBA","color","colorBackground","count","replace","numberClass","differenceMarker","arrowClass","storyPoints","renderProgress","differenceStoryPoints","JCCalendar","Show","field","bTime","bSetFocus","bHideTime","hexCode","opacity","hex","r","substring","g","b","Hint","popup","id","Date","init","EventEmitter"],"mappings":"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"}