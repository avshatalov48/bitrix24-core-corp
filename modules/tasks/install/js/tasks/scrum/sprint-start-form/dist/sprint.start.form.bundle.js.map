{"version":3,"file":"sprint.start.form.bundle.js","sources":["../src/sprint.start.form.js"],"sourcesContent":["import {ajax, Event, Loc, Tag, Text, Type} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\n\nimport {Layout} from 'ui.sidepanel.layout';\n\nimport '../css/base.css';\n\ntype Params = {\n\tgroupId: number,\n\tsprintId: number\n}\n\ntype SprintData = {\n\tid: number,\n\tname: string,\n\tepics: Array<EpicType>,\n\tdateStart: string,\n\tdateEnd: string,\n\tnumberTasks: number,\n\tstoryPoints: number,\n\tdifferenceStoryPoints: string,\n\tdifferenceMarker: boolean,\n\tnumberUnevaluatedTasks: number\n}\n\ntype EpicType = {\n\tid: number,\n\tname: string,\n\tdescription: string,\n\tcolor: string\n}\n\ntype Response = {\n\tstatus: string,\n\tdata: SprintData,\n\terrors: Array\n}\n\ntype ErrorResponse = {\n\tdata: string,\n\terrors: Array,\n\tstatus: string\n}\n\nexport class SprintStartForm extends EventEmitter\n{\n\tconstructor(params: Params)\n\t{\n\t\tsuper(params);\n\n\t\tthis.groupId = parseInt(params.groupId, 10);\n\t\tthis.sprintId = parseInt(params.sprintId, 10);\n\n\t\t/* eslint-disable */\n\t\tthis.sidePanelManager = BX.SidePanel.Instance;\n\t\t/* eslint-enable */\n\n\t\tthis.node = null;\n\t}\n\n\tshow()\n\t{\n\t\tthis.sidePanelManager.open(\n\t\t\t'tasks-scrum-sprint-start-form-side-panel',\n\t\t\t{\n\t\t\t\tcacheable: false,\n\t\t\t\twidth: 700,\n\t\t\t\tlabel: {\n\t\t\t\t\ttext: Loc.getMessage('TASKS_SCRUM_SPRINT_SIDE_PANEL_LABEL'),\n\t\t\t\t},\n\t\t\t\tcontentCallback: () => {\n\t\t\t\t\treturn Layout.createContent({\n\t\t\t\t\t\textensions: ['ui.dialogs.messagebox', 'tasks.scrum.sprint-start-form'],\n\t\t\t\t\t\ttitle: Loc.getMessage('TASKS_SCRUM_SPRINT_START_FORM_TITLE'),\n\t\t\t\t\t\tcontent: this.createContent.bind(this),\n\t\t\t\t\t\tdesign: {\n\t\t\t\t\t\t\tsection: false\n\t\t\t\t\t\t},\n\t\t\t\t\t\tbuttons: ({cancelButton, SaveButton}) => {\n\t\t\t\t\t\t\treturn [\n\t\t\t\t\t\t\t\tnew SaveButton({\n\t\t\t\t\t\t\t\t\ttext: Loc.getMessage('TASKS_SCRUM_SPRINT_START_FORM_BUTTON'),\n\t\t\t\t\t\t\t\t\tonclick: this.onStart.bind(this)\n\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\tcancelButton\n\t\t\t\t\t\t\t];\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t}\n\n\tonStart()\n\t{\n\t\tconst baseContainer = this.node.querySelector('.tasks-scrum__side-panel-start--info-basic');\n\n\t\tconst timeContainer = this.node.querySelector('.tasks-scrum__side-panel-start--timing');\n\t\tconst dateInputs = timeContainer.querySelectorAll('.ui-ctl-date');\n\n\t\tconst dateStartValue = dateInputs.item(0).querySelector('input').value;\n\t\tconst dateEndValue = dateInputs.item(1).querySelector('input').value;\n\n\t\tajax.runAction(\n\t\t\t'bitrix:tasks.scrum.sprint.startSprint',\n\t\t\t{\n\t\t\t\tdata: {\n\t\t\t\t\tgroupId: this.groupId,\n\t\t\t\t\tsprintId: this.sprintId,\n\t\t\t\t\tname: baseContainer.querySelector('input').value,\n\t\t\t\t\tsprintGoal: baseContainer.querySelector('textarea').value,\n\t\t\t\t\tdateStart: Math.floor(BX.parseDate(dateStartValue).getTime() / 1000),\n\t\t\t\t\tdateEnd: Math.floor(BX.parseDate(dateEndValue).getTime() / 1000)\n\t\t\t\t}\n\t\t\t}\n\t\t)\n\t\t\t.then((response) => {\n\t\t\t\tthis.sidePanelManager.close(false, () => {\n\t\t\t\t\tthis.emit('afterStart');\n\t\t\t\t});\n\t\t\t})\n\t\t\t.catch((response) => {\n\t\t\t\tthis.showErrorAlert(response, Loc.getMessage('TASKS_SCRUM_SPRINT_START_ERROR_TITLE_POPUP'));\n\t\t\t})\n\t\t;\n\t}\n\n\tcreateContent()\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tajax.runAction(\n\t\t\t\t'bitrix:tasks.scrum.sprint.getDataForSprintStartForm',\n\t\t\t\t{\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tgroupId: this.groupId,\n\t\t\t\t\t\tsprintId: this.sprintId\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t)\n\t\t\t\t.then((response: Response) => {\n\t\t\t\t\tresolve(this.render(response.data));\n\t\t\t\t})\n\t\t\t;\n\t\t});\n\t}\n\n\trender(sprintData: SprintData): HTMLElement\n\t{\n\t\tthis.node = Tag.render`\n\t\t\t<div class=\"tasks-scrum__side-panel-start tasks-scrum__scope--side-panel-start\">\n\n\t\t\t\t<div class=\"tasks-scrum__side-panel-start--block\">\n\n\t\t\t\t\t<div class=\"tasks-scrum__side-panel-start--info-basic\">\n\t\t\t\t\t\t<div class=\"tasks-scrum__side-panel-start--info-basic-block\">\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tplaceholder=\"${Loc.getMessage('TASKS_SCRUM_SPRINT_START_FORM_NAME_PLACEHOLDER')}\"\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tclass=\"tasks-scrum__side-panel-start--info-basic-input\"\n\t\t\t\t\t\t\t\tvalue=\"${Text.encode(sprintData.name)}\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"tasks-scrum__side-panel-start--info-basic-block\">\n\t\t\t\t\t\t\t<textarea\n\t\t\t\t\t\t\t\tplaceholder=\"${Loc.getMessage('TASKS_SCRUM_SPRINT_START_FORM_DESC_PLACEHOLDER')}\"\n\t\t\t\t\t\t\t\trows=\"7\"\n\t\t\t\t\t\t\t\tclass=\"tasks-scrum__side-panel-start--info-basic-textarea\"\n\t\t\t\t\t\t\t></textarea>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"tasks-scrum__side-panel-start--info-additional\">\n\n\t\t\t\t\t\t${this.renderEpics(sprintData.epics)}\n\n\t\t\t\t\t\t<div class=\"tasks-scrum__side-panel-start--info-row tasks-scrum__side-panel-start--timing\">\n\t\t\t\t\t\t\t<div class=\"tasks-scrum__side-panel-start--info-title\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('TASKS_SCRUM_SPRINT_START_FORM_TIME_ROW_LABEL')}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"tasks-scrum__side-panel-start--info-content\">\n\t\t\t\t\t\t\t\t<label class=\"tasks-scrum__side-panel-start--date\">\n\t\t\t\t\t\t\t\t\t<div class=\"tasks-scrum__side-panel-start--date-name\">\n\t\t\t\t\t\t\t\t\t\t${Loc.getMessage('TASKS_SCRUM_SPRINT_START_FORM_DATE_START_LABEL')}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-after-icon ui-ctl-date\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"ui-ctl-after ui-ctl-icon-calendar\"></div>\n\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t\t\t\t\t\t\tvalue=\"${sprintData.dateStart}\"\n\t\t\t\t\t\t\t\t\t\t\treadonly=\"readonly\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t<label class=\"tasks-scrum__side-panel-start--date\">\n\t\t\t\t\t\t\t\t\t<div class=\"tasks-scrum__side-panel-start--date-name\">\n\t\t\t\t\t\t\t\t\t\t${Loc.getMessage('TASKS_SCRUM_SPRINT_START_FORM_DATE_END_LABEL')}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-after-icon ui-ctl-date\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"ui-ctl-after ui-ctl-icon-calendar\"></div>\n\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t\t\t\t\t\t\tvalue=\"${sprintData.dateEnd}\"\n\t\t\t\t\t\t\t\t\t\t\treadonly=\"readonly\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class=\"tasks-scrum__side-panel-start--info-row\">\n\t\t\t\t\t\t\t<div class=\"tasks-scrum__side-panel-start--info-title\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('TASKS_SCRUM_SPRINT_START_FORM_PLAN_ROW_LABEL')}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"tasks-scrum__side-panel-start--info-content\">\n\t\t\t\t\t\t\t\t<div class=\"tasks-scrum__side-panel-start--plan-block\">\n\n\t\t\t\t\t\t\t\t\t<div class=\"tasks-scrum__side-panel-start--sprint-plans\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"tasks-scrum__side-panel-start--plan-block-number\">\n\t\t\t\t\t\t\t\t\t\t\t<div \n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"tasks-scrum__side-panel-start--plan-block-number-date\" \n\t\t\t\t\t\t\t\t\t\t\t\ttitle=\"${sprintData.numberTasks}\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t${sprintData.numberTasks}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"tasks-scrum__side-panel-start--plan-block-name\">\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"tasks-scrum__side-panel-start--plan-block-name-text\">\n\t\t\t\t\t\t\t\t\t\t\t\t${Loc.getMessage('TASKS_SCRUM_SPRINT_START_FORM_TASK_COUNT_LABEL')}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div class=\"tasks-scrum__side-panel-start--sprint-plans\">\n\t\t\t\t\t\t\t\t\t${this.renderWheelStoryPoints(sprintData)}\n\t\t\t\t\t\t\t\t\t<div class=\"tasks-scrum__side-panel-start--plan-block-name\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"tasks-scrum__side-panel-start--plan-block-name-text\">\n\t\t\t\t\t\t\t\t\t\t\t${Loc.getMessage('TASKS_SCRUM_SPRINT_START_FORM_STORY_POINTS_LABEL')}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"ui-hint\"><span class=\"ui-hint-icon\"></span></div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t${this.renderWarning(sprintData.numberUnevaluatedTasks)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\tconst timeContainer = this.node.querySelector('.tasks-scrum__side-panel-start--timing');\n\t\ttimeContainer.querySelectorAll('.ui-ctl-date')\n\t\t\t.forEach((inputContainer: HTMLElement) => {\n\t\t\t\tEvent.bind(\n\t\t\t\t\tinputContainer,\n\t\t\t\t\t'click',\n\t\t\t\t\tthis.showCalendar.bind(this, inputContainer)\n\t\t\t\t);\n\t\t\t})\n\t\t;\n\n\t\treturn this.node;\n\t}\n\n\trenderEpics(epics: Array<EpicType>): ?HTMLElement\n\t{\n\t\tif (!epics.length)\n\t\t{\n\t\t\treturn '';\n\t\t}\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"tasks-scrum__side-panel-start--info-row\">\n\t\t\t\t<div class=\"tasks-scrum__side-panel-start--info-title\">\n\t\t\t\t\t${Loc.getMessage('TASKS_SCRUM_SPRINT_START_FORM_EPICS_ROW_LABEL')}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"tasks-scrum__side-panel-start--info-content\">\n\t\t\t\t\t${\n\t\t\t\t\t\tepics.map((epic: EpicType) => {\n\t\t\t\t\t\t\tconst colorBorder = this.convertHexToRGBA(epic.color, 0.7);\n\t\t\t\t\t\t\tconst colorBackground = this.convertHexToRGBA(epic.color, 0.3);\n\n\t\t\t\t\t\t\treturn Tag.render`\n\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\tclass=\"tasks-scrum__epic-label\"\n\t\t\t\t\t\t\t\t\tstyle=\"background: ${colorBackground}; border-color: ${colorBorder};\"\n\t\t\t\t\t\t\t\t>${Text.encode(epic.name)}</span>`\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\trenderWarning(count: number): ?HTMLElement\n\t{\n\t\tif (count === 0)\n\t\t{\n\t\t\treturn '';\n\t\t}\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"ui-alert ui-alert-icon-danger ui-alert-warning\">\n\t\t\t\t<span class=\"ui-alert-message\">\n\t\t\t\t\t${Loc.getMessage('TASKS_SCRUM_SPRINT_START_FORM_WARN_TEXT').replace('#count#', count)}\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\trenderWheelStoryPoints(sprintData: SprintData): string\n\t{\n\t\tlet numberClass = '';\n\n\t\tif (sprintData.differenceMarker)\n\t\t{\n\t\t\tconst arrowClass = sprintData.storyPoints === '' ? '' : '--arrow-up';\n\n\t\t\tnumberClass = `tasks-scrum__side-panel-start--plan-block-number ${arrowClass} --success`;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tconst arrowClass = sprintData.storyPoints === '' ? '' : '--arrow-down';\n\n\t\t\tnumberClass = `tasks-scrum__side-panel-start--plan-block-number ${arrowClass} --warning`;\n\t\t}\n\n\t\tconst renderProgress = (differenceStoryPoints) => {\n\t\t\tif (parseInt(differenceStoryPoints, 10) === 0)\n\t\t\t{\n\t\t\t\treturn '';\n\t\t\t}\n\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"tasks-scrum__side-panel-start--progress\">\n\t\t\t\t\t<span class=\"tasks-scrum__side-panel-start--progress-number\">${differenceStoryPoints}</span>\n\t\t\t\t\t<span class=\"tasks-scrum__side-panel-start--progress-percent\">%</span></div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t};\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"${numberClass}\">\n\t\t\t<div \n\t\t\t\tclass=\"tasks-scrum__side-panel-start--plan-block-number-date\"\n\t\t\t\ttitle=\"${sprintData.storyPoints === '' ? 0 : sprintData.storyPoints}\"\n\t\t\t>\n\t\t\t\t${sprintData.storyPoints === '' ? 0 : sprintData.storyPoints}\n\t\t\t</div>\n\t\t\t${renderProgress(sprintData.differenceStoryPoints)}\n\t\t`;\n\t}\n\n\tshowCalendar(inputContainer: HTMLElement)\n\t{\n\t\t/* eslint-disable */\n\t\tnew top.BX.JCCalendar().Show({\n\t\t\tnode: inputContainer,\n\t\t\tfield: inputContainer.querySelector('input'),\n\t\t\tbTime: false,\n\t\t\tbSetFocus: false,\n\t\t\tbHideTime: false\n\t\t})\n\t\t/* eslint-enable */\n\t}\n\n\tconvertHexToRGBA(hexCode, opacity)\n\t{\n\t\tlet hex = hexCode.replace('#', '');\n\n\t\tif (hex.length === 3)\n\t\t{\n\t\t\thex = `${hex[0]}${hex[0]}${hex[1]}${hex[1]}${hex[2]}${hex[2]}`;\n\t\t}\n\n\t\tconst r = parseInt(hex.substring(0, 2), 16);\n\t\tconst g = parseInt(hex.substring(2, 4), 16);\n\t\tconst b = parseInt(hex.substring(4, 6), 16);\n\n\t\treturn `rgba(${r},${g},${b},${opacity})`;\n\t}\n\n\tshowErrorAlert(response: ErrorResponse, alertTitle?: string)\n\t{\n\t\tif (Type.isUndefined(response.errors))\n\t\t{\n\t\t\tconsole.log(response);\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (response.errors.length)\n\t\t{\n\t\t\tconst firstError = response.errors.shift();\n\t\t\tif (firstError)\n\t\t\t{\n\t\t\t\tconst errorCode = (firstError.code ? firstError.code : '');\n\n\t\t\t\tconst message = firstError.message + ' ' + errorCode;\n\t\t\t\tconst title = (alertTitle ? alertTitle : Loc.getMessage('TASKS_SCRUM_ERROR_TITLE_POPUP'));\n\n\t\t\t\ttop.BX.UI.Dialogs.MessageBox.alert(message, title);\n\t\t\t}\n\t\t}\n\t}\n}"],"names":["SprintStartForm","params","groupId","parseInt","sprintId","sidePanelManager","BX","SidePanel","Instance","node","open","cacheable","width","label","text","Loc","getMessage","contentCallback","Layout","createContent","extensions","title","content","bind","design","section","buttons","cancelButton","SaveButton","onclick","onStart","baseContainer","querySelector","timeContainer","dateInputs","querySelectorAll","dateStartValue","item","value","dateEndValue","ajax","runAction","data","name","sprintGoal","dateStart","Math","floor","parseDate","getTime","dateEnd","then","response","close","emit","catch","showErrorAlert","Promise","resolve","reject","render","sprintData","Tag","Text","encode","renderEpics","epics","numberTasks","renderWheelStoryPoints","renderWarning","numberUnevaluatedTasks","forEach","inputContainer","Event","showCalendar","length","map","epic","colorBorder","convertHexToRGBA","color","colorBackground","count","replace","numberClass","differenceMarker","arrowClass","storyPoints","renderProgress","differenceStoryPoints","top","JCCalendar","Show","field","bTime","bSetFocus","bHideTime","hexCode","opacity","hex","r","substring","g","b","alertTitle","Type","isUndefined","errors","console","log","firstError","shift","errorCode","code","message","UI","Dialogs","MessageBox","alert","EventEmitter"],"mappings":"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"}