this.BX=this.BX||{};this.BX.Tasks=this.BX.Tasks||{};(function(t,e,i,n,s,r,a){"use strict";var o=function(){function t(){babelHelpers.classCallCheck(this,t)}babelHelpers.createClass(t,[{key:"sendRequest",value:function t(e,i){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};return new Promise((function(t,s){r.ajax.runAction("bitrix:tasks.scrum."+e+"."+i,{data:n}).then(t,s)}))}},{key:"showErrorAlert",value:function t(e,i){if(r.Type.isUndefined(e.errors)){console.error(e);return}if(e.errors.length){var n=e.errors.shift();if(n){var s=n.code?n.code:"";var o=n.message+" "+s;var c=i?i:r.Loc.getMessage("TSE_ERROR_POPUP_TITLE");a.MessageBox.alert(o,c)}}}}]);return t}();var c,d,l,u,p,h,f,v;function m(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function g(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?m(Object(i),!0).forEach((function(e){babelHelpers.defineProperty(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):m(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var k=function(t){babelHelpers.inherits(a,t);function a(){var t;var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};babelHelpers.classCallCheck(this,a);t=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(a).call(this,e));t.setEventNamespace("BX.Tasks.Scrum.Epic");t.view=r.Type.isString(e.view)?e.view:"";t.groupId=parseInt(e.groupId,10);t.epicId=r.Type.isUndefined(e.epicId)?0:parseInt(e.epicId,10);t.gridId=r.Type.isUndefined(e.gridId)?"":e.gridId;t.pathToTask=r.Type.isString(e.pathToTask)?e.pathToTask:"";t.requestSender=new o;t.sidePanelManager=BX.SidePanel.Instance;t.sidePanel=null;t.id=null;t.form=null;t.formData=null;t.listData=null;t.editorHandler=null;t.colorPickers=new Map;t.defaultColor="#69dafc";t.selectedColor="";return t}babelHelpers.createClass(a,[{key:"show",value:function t(){switch(this.view){case"add":this.showAddForm();break;case"list":this.showList();break;case"view":this.showViewForm();break;case"edit":this.showEditForm();break;case"tasks":this.showTasksList();break;case"completedTasks":this.showTasksList(true);break}}},{key:"showAddForm",value:function t(){var e=this;this.id=r.Text.getRandom();this.sidePanelManager.open("tasks-scrum-epic-add-form-side-panel",{cacheable:false,width:800,contentCallback:function t(){return i.Layout.createContent({extensions:["tasks.scrum.epic"],title:r.Loc.getMessage("TASKS_SCRUM_ADD_EPIC_FORM_TITLE"),content:e.createAddContent.bind(e),design:{section:false},buttons:function t(i){var n=i.cancelButton,s=i.SaveButton;return[new s({onclick:e.onSaveAddForm.bind(e)}),n]}})},events:{onLoad:this.onLoadAddForm.bind(this)}})}},{key:"showList",value:function t(){var e=this;this.id=r.Text.getRandom();this.gridId="EntityEpicsGrid_"+this.groupId;var n="tasks-scrum-epic-list-side-panel";this.subscribeListToEvents(n);this.sidePanelManager.open(n,{cacheable:false,contentCallback:function t(){return i.Layout.createContent({extensions:["tasks.scrum.epic"],title:r.Loc.getMessage("TASKS_SCRUM_SPRINT_ADD_EPIC_LIST_TITLE"),toolbar:function t(i){var n=i.Button;return[new n({text:r.Loc.getMessage("TASKS_SCRUM_SPRINT_ADD_EPIC_LIST_TOOLBAR_BUTTON"),color:n.Color.PRIMARY,onclick:function t(){e.showAddForm()}})]},content:e.createListContent.bind(e),design:{section:false},buttons:[]})},events:{onLoad:this.onLoadList.bind(this)}})}},{key:"showTasksList",value:function t(){var e=this;var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;this.id=r.Text.getRandom();this.gridId="EpicTasksGrid_"+this.groupId;this.sidePanelManager.open("tasks-scrum-epic-tasks-list-side-panel",{cacheable:false,contentCallback:function t(){return i.Layout.createContent({extensions:["tasks.scrum.epic"],title:n?r.Loc.getMessage("TASKS_SCRUM_SPRINT_ADD_EPIC_COMPLETED_TASKS_LIST_TITLE"):r.Loc.getMessage("TASKS_SCRUM_SPRINT_ADD_EPIC_TASKS_LIST_TITLE"),content:e.createTasksListContent.bind(e,n),design:{section:false},buttons:[]})},events:{onLoad:this.onLoadTasksList.bind(this)}})}},{key:"showViewForm",value:function t(){var n=this;this.id=r.Text.getRandom();this.subscribeViewToEvents();this.sidePanelManager.open("tasks-scrum-epic-view-form-side-panel",{cacheable:false,width:800,contentCallback:function t(){return new Promise((function(t,s){n.getEpic().then((function(s){var a=s.data;t(i.Layout.createContent({extensions:["tasks.scrum.epic"],title:r.Loc.getMessage("TASKS_SCRUM_VIEW_EPIC_FORM_TITLE"),content:n.createViewContent.bind(n,a),design:{section:false},buttons:function t(i){var s=i.cancelButton,o=i.SaveButton;return[new o({text:r.Loc.getMessage("TASKS_SCRUM_EPIC_EDIT_BUTTON"),onclick:function t(){n.sidePanel.close(false,(function(){e.EventEmitter.emit(n.getEventNamespace()+":"+"openEdit",a.id)}))}}),s]}}))}))}))},events:{onLoad:this.onLoadViewForm.bind(this)}})}},{key:"showEditForm",value:function t(){var e=this;this.id=r.Text.getRandom();this.sidePanelManager.open("tasks-scrum-epic-edit-form-side-panel",{cacheable:false,width:800,contentCallback:function t(){return i.Layout.createContent({extensions:["tasks.scrum.epic"],title:r.Loc.getMessage("TASKS_SCRUM_EDIT_EPIC_FORM_TITLE"),content:e.createEditContent.bind(e),design:{section:false},buttons:function t(i){var n=i.cancelButton,s=i.SaveButton;return[new s({onclick:e.onSaveEditForm.bind(e)}),n]}})},events:{onLoad:this.onLoadEditForm.bind(this)}})}},{key:"removeEpic",value:function t(){var i=this;return r.ajax.runAction("bitrix:tasks.scrum.epic.removeEpic",{data:{groupId:this.groupId,epicId:this.epicId}}).then((function(t){e.EventEmitter.emit(i.getEventNamespace()+":"+"afterRemove",t.data);return true}))["catch"]((function(t){i.requestSender.showErrorAlert(t)}))}},{key:"showTask",value:function t(e){if(this.pathToTask){this.sidePanelManager.open(this.pathToTask.replace("#action#","view").replace("#task_id#",parseInt(e,10)))}}},{key:"subscribeListToEvents",value:function t(i){var n=this;e.EventEmitter.subscribe(this.getEventNamespace()+":"+"afterAdd",(function(){return n.reloadGrid()}));e.EventEmitter.subscribe(this.getEventNamespace()+":"+"afterEdit",(function(){return n.reloadGrid()}))}},{key:"subscribeViewToEvents",value:function t(){var i=this;e.EventEmitter.subscribe(this.getEventNamespace()+":"+"openEdit",(function(t){a.showEdit(i.groupId,t.getData())}))}},{key:"reloadSidePanel",value:function t(e){if(r.Type.isUndefined(e)){this.sidePanelManager.reload()}else{var i=this.sidePanelManager.getOpenSliders();if(i.length>0){i.forEach((function(t){if(t.getUrl()===e){t.reload()}}))}}}},{key:"createAddContent",value:function t(){var e=this;return new Promise((function(t,i){r.ajax.runAction("bitrix:tasks.scrum.epic.getDescriptionEditor",{data:{groupId:e.groupId,editorId:e.id}}).then((function(i){e.formData=i.data;t(e.renderAddForm())}))["catch"]((function(t){e.requestSender.showErrorAlert(t)}))}))}},{key:"createListContent",value:function t(){var e=this;return new Promise((function(t,i){r.ajax.runAction("bitrix:tasks.scrum.epic.getList",{data:{groupId:e.groupId,gridId:e.gridId}}).then((function(i){e.listData=i.data;t(e.renderList())}))["catch"]((function(t){e.requestSender.showErrorAlert(t)}))}))}},{key:"createTasksListContent",value:function t(e){var i=this;return new Promise((function(t,n){r.ajax.runAction("bitrix:tasks.scrum.epic.getTasksList",{data:{groupId:i.groupId,epicId:i.epicId,gridId:i.gridId,completed:e?"Y":"N"}}).then((function(e){i.listData=e.data;t(i.renderTasksList())}))["catch"]((function(t){i.requestSender.showErrorAlert(t)}))}))}},{key:"createViewContent",value:function t(e){var i=this;return new Promise((function(t,n){r.ajax.runAction("bitrix:tasks.scrum.epic.getEpicFiles",{data:{groupId:i.groupId,epicId:e.id}}).then((function(n){i.epicFiles=r.Type.isUndefined(n.data.html)?"":n.data.html;t(i.renderViewForm(e))}))["catch"]((function(t){i.requestSender.showErrorAlert(t)}))}))}},{key:"createEditContent",value:function t(){var e=this;return new Promise((function(t,i){e.getEpic().then((function(i){var n=i.data;r.ajax.runAction("bitrix:tasks.scrum.epic.getDescriptionEditor",{data:{groupId:e.groupId,editorId:e.id,epicId:n.id,text:n.description}}).then((function(i){e.currentEpic=n;e.formData=i.data;t(e.renderEditForm(n))}))["catch"]((function(t){e.requestSender.showErrorAlert(t)}))}))}))}},{key:"getEpic",value:function t(){var e=this;return new Promise((function(t,i){r.ajax.runAction("bitrix:tasks.scrum.epic.getEpic",{data:{groupId:e.groupId,epicId:e.epicId}}).then(t,i)}))}},{key:"onLoadAddForm",value:function t(e){this.sidePanel=e.getSlider();this.form=this.sidePanel.getContainer().querySelector(".tasks-scrum-epic-form");var i=this.form.querySelector(".tasks-scrum-epic-form-description");if(r.Type.isUndefined(this.formData.html)){return}this.renderEditor(i)}},{key:"onSaveAddForm",value:function t(){var i=this;r.ajax.runAction("bitrix:tasks.scrum.epic.createEpic",{data:this.getRequestData()}).then((function(t){i.sidePanel.close(false,(function(){e.EventEmitter.emit(i.getEventNamespace()+":"+"afterAdd",t.data);s.UI.Notification.Center.notify({content:r.Loc.getMessage("TASKS_SCRUM_ADD_EPIC_NOTIFY")})}))}))["catch"]((function(t){i.requestSender.showErrorAlert(t)}))}},{key:"onLoadList",value:function t(i){var n=this;this.sidePanel=i.getSlider();var s=this.sidePanel.getContainer().querySelector(".tasks-scrum-epic-list");if(r.Type.isUndefined(this.listData.html)){r.Dom.append(this.renderListBlank(),s);r.Event.bind(s.querySelector(".tasks-scrum-epics-empty-button"),"click",this.showAddForm.bind(this))}else{r.Runtime.html(s,this.listData.html).then((function(){e.EventEmitter.subscribe("Grid::beforeRequest",n.onBeforeGridRequest.bind(n));n.prepareTagsList(s)}))}}},{key:"onLoadTasksList",value:function t(i){var n=this;this.sidePanel=i.getSlider();var s=this.sidePanel.getContainer().querySelector(".tasks-scrum-epic-tasks-list");r.Runtime.html(s,this.listData.html).then((function(){e.EventEmitter.subscribe("Grid::beforeRequest",n.onBeforeGridRequest.bind(n))}))}},{key:"onLoadViewForm",value:function t(e){this.sidePanel=e.getSlider();if(this.epicFiles){var i=this.sidePanel.getContainer().querySelector(".tasks-scrum-epic-form-files");r.Runtime.html(i,this.epicFiles)}}},{key:"onLoadEditForm",value:function t(e){this.sidePanel=e.getSlider();this.form=this.sidePanel.getContainer().querySelector(".tasks-scrum-epic-form");var i=this.form.querySelector(".tasks-scrum-epic-form-description");if(r.Type.isUndefined(this.formData.html)){return}this.renderEditor(i)}},{key:"onSaveEditForm",value:function t(){var i=this;r.ajax.runAction("bitrix:tasks.scrum.epic.editEpic",{data:this.getRequestData()}).then((function(t){i.sidePanel.close(false,(function(){e.EventEmitter.emit(i.getEventNamespace()+":"+"afterEdit",t.data)}))}))["catch"]((function(t){i.requestSender.showErrorAlert(t)}))}},{key:"onBeforeGridRequest",value:function t(e){var i=e.getCompatData(),n=babelHelpers.slicedToArray(i,2),s=n[0],r=n[1];r.sessid=BX.bitrix_sessid();r.method="POST";if(!r.url){r.url=this.getListUrl()}r.data=g(g({},r.data),{},{groupId:this.groupId,gridId:this.gridId,epicId:this.epicId})}},{key:"getListUrl",value:function t(){return"/bitrix/services/main/ajax.php?action=bitrix:tasks.scrum.epic.getList"}},{key:"renderAddForm",value:function t(){return r.Tag.render(c||(c=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="tasks-scrum-epic-form">\n\t\t\t\t<div class="tasks-scrum-epic-form-container">\n\t\t\t\t\t',"\n\t\t\t\t\t","\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t"])),this.renderNameField(0,"",this.defaultColor),this.renderDescriptionField())}},{key:"renderList",value:function t(){return r.Tag.render(d||(d=babelHelpers.taggedTemplateLiteral(['<div class="tasks-scrum-epic-list"></div>'])))}},{key:"renderTasksList",value:function t(){return r.Tag.render(l||(l=babelHelpers.taggedTemplateLiteral(['<div class="tasks-scrum-epic-tasks-list"></div>'])))}},{key:"renderViewForm",value:function t(e){return r.Tag.render(u||(u=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="tasks-scrum-epic-form">\n\t\t\t\t<div class="tasks-scrum-epic-form-container">\n\t\t\t\t\t<div class="tasks-scrum-epic-form-header">\n\t\t\t\t\t\t<div class="tasks-scrum-epic-form-header-title">\n\t\t\t\t\t\t\t','\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="tasks-scrum-epic-form-header-separate"></div>\n\t\t\t\t\t\t<div class="tasks-scrum-epic-header-color">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclass="tasks-scrum-epic-header-color-current"\n\t\t\t\t\t\t\t\tstyle="background-color: ',';"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="tasks-scrum-epic-form-body">\n\t\t\t\t\t\t<div class="tasks-scrum-epic-form-description">\n\t\t\t\t\t\t\t','\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="tasks-scrum-epic-form-files"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t'])),r.Text.encode(e.name),r.Text.encode(e.color),e.description)}},{key:"renderEditForm",value:function t(e){this.selectedColor=e.color;return r.Tag.render(p||(p=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="tasks-scrum-epic-form">\n\t\t\t\t<div class="tasks-scrum-epic-form-container">\n\t\t\t\t\t',"\n\t\t\t\t\t","\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t"])),this.renderNameField(e.id,e.name,this.selectedColor),this.renderDescriptionField())}},{key:"renderNameField",value:function t(e,i,n){var s=this;var a=r.Tag.render(h||(h=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="tasks-scrum-epic-form-header">\n\t\t\t\t<div class="tasks-scrum-epic-form-header-title">\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype="text"\n\t\t\t\t\t\tname="name"\n\t\t\t\t\t\tvalue="','"\n\t\t\t\t\t\tclass="tasks-scrum-epic-form-header-title-control"\n\t\t\t\t\t\tplaceholder="','"\n\t\t\t\t\t>\n\t\t\t\t</div>\n\t\t\t\t<div class="tasks-scrum-epic-form-header-separate"></div>\n\t\t\t\t<div class="tasks-scrum-epic-header-color">\n\t\t\t\t\t<div\n\t\t\t\t\t\tdata-epic-id="','"\n\t\t\t\t\t\tclass="tasks-scrum-epic-header-color-current"\n\t\t\t\t\t\tstyle="background-color: ',';"\n\t\t\t\t\t>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="tasks-scrum-epic-header-color-btn-angle"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t'])),r.Text.encode(i),r.Loc.getMessage("TASKS_SCRUM_SPRINT_ADD_EPIC_NAME_PLACEHOLDER"),parseInt(e,10),r.Text.encode(n));var o=a.querySelector(".tasks-scrum-epic-header-color");r.Event.bind(o,"click",(function(){var t=o.querySelector(".tasks-scrum-epic-header-color-current");var e=s.getColorPicker(t);e.open()}));return a}},{key:"renderDescriptionField",value:function t(){return r.Tag.render(f||(f=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="tasks-scrum-epic-form-body">\n\t\t\t\t<div class="tasks-scrum-epic-form-description --editing"></div>\n\t\t\t</div>\n\t\t'])))}},{key:"renderEditor",value:function t(i){var n=this;setTimeout((function(){r.Runtime.html(i,n.formData.html).then((function(){if(window.LHEPostForm){n.editorHandler=window.LHEPostForm.getHandler(n.id);e.EventEmitter.emit(n.editorHandler.eventNode,"OnShowLHE",[true])}n.focusToName()}))}),300)}},{key:"renderListBlank",value:function t(){return r.Tag.render(v||(v=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="tasks-scrum-epics-empty">\n\t\t\t\t<div class="tasks-scrum-epics-empty-first-title">\n\t\t\t\t\t','\n\t\t\t\t</div>\n\t\t\t\t<div class="tasks-scrum-epics-empty-image">\n\t\t\t\t\t<svg width="124px" height="123px" viewBox="0 0 124 123" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n\t\t\t\t\t\t<g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" opacity="0.28">\n\t\t\t\t\t\t\t<path d="M83,105 L83,81.4375 L105,81.4375 L105,18 L17,18 L17,81.4375 L39,81.4375 L39,105 L83,105 Z M10.9411765,0 L113.058824,0 C119.101468,0 124,4.85902727 124,10.8529412 L124,112.147059 C124,118.140973 119.101468,123 113.058824,123 L10.9411765,123 C4.89853156,123 0,118.140973 0,112.147059 L0,10.8529412 C0,4.85902727 4.89853156,0 10.9411765,0 Z M44.0142862,47.0500004 L54.2142857,57.4416671 L79.7142857,32 L87,42.75 L54.2142857,75 L36,57.0833333 L44.0142862,47.0500004 Z" fill="#A8ADB4" />\n\t\t\t\t\t\t</g>\n\t\t\t\t\t</svg>\n\t\t\t\t</div>\n\t\t\t\t<div class="tasks-scrum-epics-empty-second-title">\n\t\t\t\t\t','\n\t\t\t\t</div>\n\t\t\t\t<div class="tasks-scrum-epics-empty-button">\n\t\t\t\t\t<button class="ui-btn ui-btn-primary ui-btn-lg">\n\t\t\t\t\t\t',"\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t"])),r.Loc.getMessage("TASKS_SCRUM_EPICS_EMPTY_FIRST_TITLE"),r.Loc.getMessage("TASKS_SCRUM_EPICS_EMPTY_SECOND_TITLE"),r.Loc.getMessage("TASKS_SCRUM_SPRINT_ADD_EPIC_LIST_TOOLBAR_BUTTON"))}},{key:"getGrid",value:function t(){if(BX&&BX.Main&&BX.Main.gridManager){return BX.Main.gridManager.getById(this.gridId)}return null}},{key:"reloadGrid",value:function t(){if(BX&&BX.Main&&BX.Main.gridManager){BX.Main.gridManager.reload(this.gridId)}}},{key:"prepareTagsList",value:function t(e){var i=this;var n=e.querySelectorAll(".tasks-scrum-epic-grid-tags");n.forEach((function(t){var e=i.getTagsFromNode(t);r.Dom.clean(t);e.forEach((function(e){r.Dom.append(i.getTagNode(e),t)}))}))}},{key:"getTagsFromNode",value:function t(e){var i=[];e.childNodes.forEach((function(t){i.push(t.textContent.trim())}));return i}},{key:"getTagNode",value:function t(e){var i=new n.Label({text:e,color:n.Label.Color.TAG_LIGHT,fill:true,size:n.Label.Size.SM,customClass:""});return i.getContainer()}},{key:"getColorPicker",value:function t(e){var i=this;var n=r.Dom.attr(e,"data-epic-id");if(!this.colorPickers.has(n)){var s=new BX.ColorPicker({bindElement:e,defaultColor:this.defaultColor,selectedColor:this.selectedColor?this.selectedColor:this.defaultColor,onColorSelected:function t(n,s){i.selectedColor=n;e.style.backgroundColor=n},popupOptions:{angle:{position:"top",offset:33},className:"tasks-scrum-epic-color-popup"},allowCustomColor:false,colors:[["#aae9fc","#bbecf1","#98e1dc","#e3f299","#ffee95","#ffdd93","#dfd3b6","#e3c6bb"],["#ffad97","#ffbdbb","#ffcbd8","#ffc4e4","#c4baed","#dbdde0","#bfc5cd","#a2a8b0"]]});this.colorPickers.set(n,s)}return this.colorPickers.get(n)}},{key:"focusToName",value:function t(){var e=this;setTimeout((function(){e.form.querySelector(".tasks-scrum-epic-form-header-title-control").focus()}),50)}},{key:"getRequestData",value:function t(){var e={};if(this.currentEpic){e.epicId=this.currentEpic.id}e.groupId=this.groupId;e.name=this.form.querySelector("[name=name]").value.trim();e.description=this.editorHandler.getEditor().GetContent();e.color=this.selectedColor?this.selectedColor:this.defaultColor;e.files=this.getAttachmentsFiles();return e}},{key:"getAttachmentsFiles",value:function t(){var e=this;var i=[];if(!this.editorHandler||!r.Type.isPlainObject(this.editorHandler.arFiles)||!r.Type.isPlainObject(this.editorHandler.controllers)){return i}var n=[];Object.values(this.editorHandler.arFiles).forEach((function(t){if(!n.includes(t)){n.push(t)}}));n.forEach((function(t){if(e.editorHandler.controllers[t]&&r.Type.isPlainObject(e.editorHandler.controllers[t].values)){Object.keys(e.editorHandler.controllers[t].values).forEach((function(t){if(!i.includes(t)){i.push(t)}}))}}));return i}}],[{key:"showView",value:function t(e,i){var n=new a({view:"view",groupId:e,epicId:i});n.show()}},{key:"showEdit",value:function t(e,i){var n=new a({view:"edit",groupId:e,epicId:i});n.show()}},{key:"removeEpic",value:function t(e,i,n){var s=new a({view:"edit",groupId:e,gridId:n,epicId:i});s.removeEpic().then((function(){s.reloadGrid()}))}},{key:"showTasks",value:function t(e,i){var n=new a({view:"tasks",groupId:e,epicId:i});n.show()}},{key:"showCompletedTasks",value:function t(e,i){var n=new a({view:"completedTasks",groupId:e,epicId:i});n.show()}},{key:"showTask",value:function t(e){var i=BX.SidePanel.Instance;i.getOpenSliders().forEach((function(t){var i=t.getWindow();if(!r.Type.isNil(i)&&!r.Type.isNil(i.BX.Tasks.Scrum.EpicInstance)){i.BX.Tasks.Scrum.EpicInstance.showTask(e)}}))}}]);return a}(e.EventEmitter);t.Epic=k})(this.BX.Tasks.Scrum=this.BX.Tasks.Scrum||{},BX.Event,BX.UI.SidePanel,BX.UI,BX,BX,BX.UI.Dialogs);
//# sourceMappingURL=epic.bundle.map.js