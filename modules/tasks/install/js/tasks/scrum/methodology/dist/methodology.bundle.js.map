{"version":3,"file":"methodology.bundle.js","sources":["../src/request.sender.js","../src/side.panel.js","../src/methodology.js"],"sourcesContent":["import {Loc, Type, ajax} from 'main.core';\nimport {MessageBox} from 'ui.dialogs.messagebox';\n\ntype RequestParams = {\n\tgroupId: number,\n\ttaskId: number,\n\ttypeId?: number\n}\n\ntype ErrorResponse = {\n\tdata: string,\n\terrors: Array,\n\tstatus: string\n}\n\nexport class RequestSender\n{\n\tsendRequest(controller: string, action: string, data = {}): Promise\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tajax.runAction(\n\t\t\t\t'bitrix:tasks.scrum.' + controller + '.' + action,\n\t\t\t\t{\n\t\t\t\t\tdata: data\n\t\t\t\t}\n\t\t\t).then(resolve, reject);\n\t\t});\n\t}\n\n\tgetEpicInfo(data: RequestParams): Promise\n\t{\n\t\treturn this.sendRequest('epic', 'getEpicInfo', data);\n\t}\n\n\tgetDodInfo(data: RequestParams): Promise\n\t{\n\t\treturn this.sendRequest('dod', 'getDodInfo', data);\n\t}\n\n\tgetTeamSpeedInfo(data: RequestParams): Promise\n\t{\n\t\treturn this.sendRequest('sprint', 'getTeamSpeedInfo', data);\n\t}\n\n\tgetTutorInfo(data: RequestParams): Promise\n\t{\n\t\treturn this.sendRequest('info', 'getTutorInfo', data);\n\t}\n\n\tgetBurnDownInfo(data: RequestParams): Promise\n\t{\n\t\treturn this.sendRequest('sprint', 'getBurnDownInfo', data);\n\t}\n\n\tgetMarketPath(): Promise\n\t{\n\t\treturn this.sendRequest('info', 'getMarketPath');\n\t}\n\n\tshowErrorAlert(response: ErrorResponse, alertTitle?: string)\n\t{\n\t\tif (Type.isUndefined(response.errors))\n\t\t{\n\t\t\tconsole.error(response);\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (response.errors.length)\n\t\t{\n\t\t\tconst firstError = response.errors.shift();\n\t\t\tif (firstError)\n\t\t\t{\n\t\t\t\tconst errorCode = (firstError.code ? firstError.code : '');\n\n\t\t\t\tconst message = firstError.message + ' ' + errorCode;\n\t\t\t\tconst title = (alertTitle ? alertTitle : Loc.getMessage('TSM_ERROR_POPUP_TITLE'));\n\n\t\t\t\tMessageBox.alert(message, title);\n\t\t\t}\n\t\t}\n\t}\n}","import {EventEmitter} from 'main.core.events';\n\nexport class SidePanel extends EventEmitter\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\n\t\tthis.setEventNamespace('BX.Tasks.Scrum.Methodology.SidePanel');\n\n\t\t/* eslint-disable */\n\t\tthis.sidePanelManager = BX.SidePanel.Instance;\n\t\t/* eslint-enable */\n\t}\n\n\topenSidePanelByUrl(url)\n\t{\n\t\tthis.sidePanelManager.open(url);\n\t}\n\n\topenSidePanel(id, options)\n\t{\n\t\tthis.sidePanelManager.open(id, options);\n\t}\n\n\tshowByExtension(name: string, params: Object): Promise\n\t{\n\t\tconst extensionName = 'tasks.scrum.' + name.toLowerCase();\n\n\t\treturn top.BX.Runtime.loadExtension(extensionName)\n\t\t\t.then((exports) => {\n\n\t\t\t\tname = name.replaceAll('-', '');\n\n\t\t\t\tif (exports && exports[name])\n\t\t\t\t{\n\t\t\t\t\tconst extension = new exports[name](params);\n\n\t\t\t\t\textension.show();\n\n\t\t\t\t\treturn extension;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t})\n\t\t;\n\t}\n}","import {ajax, Event, Loc, Tag, Uri, Type} from 'main.core';\n\nimport {Manual} from 'ui.manual';\nimport {PopupComponentsMaker} from 'ui.popupcomponentsmaker';\n\nimport {RequestSender} from './request.sender';\nimport {SidePanel} from './side.panel';\n\nimport 'ui.hint';\nimport 'ui.fonts.opensans';\n\nimport '../css/base.css';\n\ntype Params = {\n\tgroupId: number,\n\tteamSpeedPath: string,\n\tburnDownPath: string\n}\n\ntype EpicInfoResponse = {\n\tdata: {\n\t\texistsEpic: boolean\n\t}\n}\n\ntype DodInfoResponse = {\n\tdata: {\n\t\texistsDod: boolean\n\t}\n}\n\ntype TeamSpeedResponse = {\n\tdata: {\n\t\texistsCompletedSprint: boolean\n\t}\n}\n\ntype TutorResponse = {\n\tdata: {\n\t\turl: string,\n\t\turlParams: Object\n\t}\n}\n\ntype BurnDownResponse = {\n\tdata: {\n\t\tsprint: ?SprintData\n\t}\n}\n\ntype SprintData = {\n\tid: number,\n\tname: string\n}\n\nexport class Methodology\n{\n\tconstructor(params: Params)\n\t{\n\t\tthis.groupId = parseInt(params.groupId, 10);\n\n\t\tthis.teamSpeedPath = Type.isString(params.teamSpeedPath) ? params.teamSpeedPath : '';\n\t\tthis.burnDownPath = Type.isString(params.burnDownPath) ? params.burnDownPath : '';\n\t\tthis.pathToTask = Type.isString(params.pathToTask) ? params.pathToTask : '';\n\n\t\tthis.requestSender = new RequestSender();\n\t\tthis.sidePanel = new SidePanel();\n\n\t\tthis.menu = null;\n\t\tthis.hintManager = null;\n\t}\n\n\tshowMenu(targetNode: HTMLElement)\n\t{\n\t\tif (this.menu)\n\t\t{\n\t\t\tif (this.menu.isShown())\n\t\t\t{\n\t\t\t\tthis.menu.close();\n\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tthis.menu = new PopupComponentsMaker({\n\t\t\tid: 'tasks-scrum-methodology-widget',\n\t\t\ttarget: targetNode,\n\t\t\tcacheable: false,\n\t\t\tcontent: [\n\t\t\t\t{\n\t\t\t\t\thtml: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\thtml: this.renderEpics(),\n\t\t\t\t\t\t\tbackgroundColor: '#fafafa'\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\thtml: this.renderDod(),\n\t\t\t\t\t\t\tbackgroundColor: '#fafafa'\n\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\thtml: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\thtml: this.renderTeamSpeed()\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\thtml: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\thtml: this.renderBurnDown()\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\thtml: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\thtml: this.renderTutor(),\n\t\t\t\t\t\t\tbackgroundColor: '#fafafa'\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\thtml: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\thtml: this.renderMigration()\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t]\n\t\t});\n\n\t\tthis.menu.show();\n\t}\n\n\trenderEpics(): Promise\n\t{\n\t\treturn this.requestSender.getEpicInfo({\n\t\t\tgroupId: this.groupId\n\t\t})\n\t\t\t.then((response: EpicInfoResponse) => {\n\n\t\t\t\tconst existsEpic = response.data.existsEpic;\n\n\t\t\t\tconst buttonText = existsEpic\n\t\t\t\t\t? Loc.getMessage('TSF_EPIC_OPEN_BUTTON')\n\t\t\t\t\t: Loc.getMessage('TSF_EPIC_CREATE_BUTTON')\n\t\t\t\t;\n\n\t\t\t\tconst buttonClass = existsEpic\n\t\t\t\t\t? '--border'\n\t\t\t\t\t: ''\n\t\t\t\t;\n\n\t\t\t\tconst iconClass = existsEpic\n\t\t\t\t\t? 'ui-icon-service-epics'\n\t\t\t\t\t: 'ui-icon-service-light-epics'\n\t\t\t\t;\n\n\t\t\t\tconst blockClass = existsEpic\n\t\t\t\t\t? '--active'\n\t\t\t\t\t: ''\n\t\t\t\t;\n\n\t\t\t\tconst baseClasses = 'tasks-scrum__widget-methodology tasks-scrum__widget-methodology--scope';\n\n\t\t\t\tconst node = Tag.render`\n\t\t\t\t\t<div class=\"${baseClasses} tasks-scrum__widget-methodology--bg ${blockClass}\">\n\t\t\t\t\t\t<div class=\"tasks-scrum__widget-methodology--conteiner\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclass=\"ui-icon ${iconClass} tasks-scrum__widget-methodology--icon\"\n\t\t\t\t\t\t\t><i></i></div>\n\t\t\t\t\t\t\t<div class=\"tasks-scrum__widget-methodology--content\">\n\t\t\t\t\t\t\t\t<div class=\"tasks-scrum__widget-methodology--name\">\n\t\t\t\t\t\t\t\t\t<span>${Loc.getMessage('TSF_EPIC_TITLE')}</span>\n\t\t\t\t\t\t\t\t\t<span class=\"ui-hint\">\n\t\t\t\t\t\t\t\t\t\t<i class=\"ui-hint-icon\" data-hint=\"${Loc.getMessage('TSF_EPIC_HINT')}\"></i>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"tasks-scrum__widget-methodology--btn-box\">\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tclass=\"ui-qr-popupcomponentmaker__btn ${buttonClass}\"\n\t\t\t\t\t\t\t\t\t\tdata-role=\"open-epics\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t${buttonText}\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t`;\n\n\t\t\t\tthis.initHints(node);\n\n\t\t\t\tEvent.bind(node.querySelector('button'), 'click', () => {\n\t\t\t\t\tif (existsEpic)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.showEpics();\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.createEpic();\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\treturn node;\n\t\t\t})\n\t\t\t.catch((response) => {\n\t\t\t\tthis.requestSender.showErrorAlert(response);\n\t\t\t})\n\t\t;\n\t}\n\n\trenderDod(): Promise\n\t{\n\t\treturn this.requestSender.getDodInfo({\n\t\t\tgroupId: this.groupId\n\t\t})\n\t\t\t.then((response: DodInfoResponse) => {\n\n\t\t\t\tconst existsDod = response.data.existsDod;\n\n\t\t\t\tconst buttonText = existsDod\n\t\t\t\t\t? Loc.getMessage('TSF_DOD_OPEN_BUTTON')\n\t\t\t\t\t: Loc.getMessage('TSF_DOD_CREATE_BUTTON')\n\t\t\t\t;\n\n\t\t\t\tconst buttonClass = existsDod\n\t\t\t\t\t? '--border'\n\t\t\t\t\t: ''\n\t\t\t\t;\n\n\t\t\t\tconst iconClass = existsDod\n\t\t\t\t\t? 'ui-icon-service-dod'\n\t\t\t\t\t: 'ui-icon-service-light-dod'\n\t\t\t\t;\n\n\t\t\t\tconst blockClass = existsDod\n\t\t\t\t\t? '--active'\n\t\t\t\t\t: ''\n\t\t\t\t;\n\n\t\t\t\tconst node = Tag.render`\n\t\t\t\t\t<div class=\"tasks-scrum__widget-methodology tasks-scrum__widget-methodology--scope tasks-scrum__widget-methodology--bg ${blockClass}\">\n\t\t\t\t\t\t<div class=\"tasks-scrum__widget-methodology--conteiner\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclass=\"ui-icon ${iconClass} tasks-scrum__widget-methodology--icon\"\n\t\t\t\t\t\t\t><i></i></div>\n\t\t\t\t\t\t\t<div class=\"tasks-scrum__widget-methodology--content\">\n\t\t\t\t\t\t\t\t<div class=\"tasks-scrum__widget-methodology--name\">\n\t\t\t\t\t\t\t\t\t<span>${Loc.getMessage('TSF_DOD_TITLE_NEW')}</span>\n\t\t\t\t\t\t\t\t\t<span class=\"ui-hint\">\n\t\t\t\t\t\t\t\t\t\t<i class=\"ui-hint-icon\" data-hint=\"${Loc.getMessage('TSF_DOD_HINT_NEW')}\"></i>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"tasks-scrum__widget-methodology--btn-box\">\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tclass=\"ui-qr-popupcomponentmaker__btn ${buttonClass}\"\n\t\t\t\t\t\t\t\t\t\tdata-role=\"open-dod\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t${buttonText}\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t`;\n\n\t\t\t\tthis.initHints(node);\n\n\t\t\t\tEvent.bind(node.querySelector('button'), 'click', this.showDodSettings.bind(this));\n\n\t\t\t\treturn node;\n\t\t\t})\n\t\t\t.catch((response) => {\n\t\t\t\tthis.requestSender.showErrorAlert(response);\n\t\t\t})\n\t\t;\n\t}\n\n\trenderTeamSpeed(): Promise\n\t{\n\t\treturn this.requestSender.getTeamSpeedInfo({\n\t\t\tgroupId: this.groupId\n\t\t})\n\t\t\t.then((response: TeamSpeedResponse) => {\n\n\t\t\t\tconst isDisabled = (!response.data.existsCompletedSprint);\n\n\t\t\t\tconst btnUiClasses = 'ui-qr-popupcomponentmaker__btn --border';\n\t\t\t\tconst disableClass = isDisabled ? '--disabled' : '';\n\n\t\t\t\tconst node = Tag.render`\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"tasks-scrum__widget-methodology tasks-scrum__widget-methodology--scope\"\n\t\t\t\t\t\tdata-role=\"show-team-speed-chart\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div class=\"tasks-scrum__widget-methodology--btn-box-center\">\n\t\t\t\t\t\t\t<div class=\"tasks-scrum__widget-methodology--image ${disableClass}\">\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<button class=\"${btnUiClasses} ${disableClass}\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('TSF_TEAM_SPEED_BUTTON')}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t`;\n\n\t\t\t\tif (!isDisabled)\n\t\t\t\t{\n\t\t\t\t\tEvent.bind(node, 'click', this.showTeamSpeedChart.bind(this));\n\t\t\t\t}\n\n\t\t\t\treturn node;\n\t\t\t})\n\t\t\t.catch((response) => {\n\t\t\t\tthis.requestSender.showErrorAlert(response);\n\t\t\t})\n\t\t;\n\t}\n\n\trenderBurnDown(): Promise\n\t{\n\t\treturn this.requestSender.getBurnDownInfo({\n\t\t\tgroupId: this.groupId\n\t\t})\n\t\t\t.then((response: BurnDownResponse) => {\n\t\t\t\tconst existsChart = !Type.isNull(response.data.sprint);\n\t\t\t\tconst btnUiClasses = 'ui-qr-popupcomponentmaker__btn --border';\n\t\t\t\tconst disableClass = existsChart ? '' : '--disabled';\n\n\t\t\t\tconst node = Tag.render`\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"tasks-scrum__widget-methodology tasks-scrum__widget-methodology--scope\"\n\t\t\t\t\t\tdata-role=\"show-burn-down-chart\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div class=\"tasks-scrum__widget-methodology--btn-box-center\">\n\t\t\t\t\t\t\t<div class=\"tasks-scrum__widget-methodology--image-diagram ${disableClass}\">\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<button class=\"${btnUiClasses} ${disableClass}\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('TSF_TEAM_SPEED_DIAGRAM')}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t`;\n\n\t\t\t\tif (existsChart)\n\t\t\t\t{\n\t\t\t\t\tEvent.bind(node, 'click', this.showBurnDownChart.bind(this, response.data.sprint.id));\n\t\t\t\t}\n\n\t\t\t\treturn node;\n\t\t\t})\n\t\t\t.catch((response) => {\n\t\t\t\tthis.requestSender.showErrorAlert(response);\n\t\t\t})\n\t\t;\n\t}\n\n\trenderTutor(): HTMLElement\n\t{\n\t\treturn this.requestSender.getTutorInfo({\n\t\t\tgroupId: this.groupId\n\t\t})\n\t\t\t.then((response: TutorResponse) => {\n\t\t\t\tconst baseClasses = 'tasks-scrum__widget-methodology tasks-scrum__widget-methodology--scope';\n\t\t\t\tconst tutorClasses = 'tasks-scrum__widget-methodology--training tasks-scrum__widget-methodology--bg';\n\n\t\t\t\tconst node = Tag.render`\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"${baseClasses} ${tutorClasses} --active\"\n\t\t\t\t\t\tdata-role=\"open-tutor\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div class=\"tasks-scrum__widget-methodology--conteiner\">\n\t\t\t\t\t\t\t<div class=\"tasks-scrum__widget-methodology--conteiner\">\n\t\t\t\t\t\t\t\t<div class=\"ui-icon ui-icon-service-tutorial tasks-scrum__widget-methodology--icon\">\n\t\t\t\t\t\t\t\t\t<i></i>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"tasks-scrum__widget-methodology--content\">\n\t\t\t\t\t\t\t\t\t<div class=\"tasks-scrum__widget-methodology--name\">\n\t\t\t\t\t\t\t\t\t\t${Loc.getMessage('TSF_TUTORIAL_TITLE')}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"tasks-scrum__widget-methodology--description\">\n\t\t\t\t\t\t\t\t\t\t${Loc.getMessage('TSF_TUTORIAL_TEXT')}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"tasks-scrum__widget-methodology--label --hidden\">\n\t\t\t\t\t\t\t\t\t${Loc.getMessage('TSF_TEAM_SPEED_LABEL')}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t`;\n\n\t\t\t\tEvent.bind(node, 'click', () => {\n\t\t\t\t\tManual.show(\n\t\t\t\t\t\t'scrum',\n\t\t\t\t\t\tresponse.data.urlParams,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tscrum: 'Y',\n\t\t\t\t\t\t\taction: 'guide_open'\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t});\n\n\t\t\t\treturn node;\n\t\t\t})\n\t\t\t.catch((response) => {\n\t\t\t\tthis.requestSender.showErrorAlert(response);\n\t\t\t})\n\t\t;\n\t}\n\n\trenderMigration()\n\t{\n\t\tconst baseClasses = 'tasks-scrum__widget-methodology tasks-scrum__widget-methodology--scope';\n\t\tconst migrationClasses = 'tasks-scrum__widget-methodology--migration tasks-scrum__widget-methodology--bg';\n\t\tconst iconClass = 'ui-icon-service-tutorial tasks-scrum__widget-methodology--migration-btn';\n\n\t\tconst node = Tag.render`\n\t\t\t<div class=\"${baseClasses} ${migrationClasses}\" data-role=\"open-migration\">\n\t\t\t\t<div class=\"tasks-scrum__widget-methodology--conteiner\">\n\t\t\t\t\t<div class=\"tasks-scrum__widget-methodology--conteiner\">\n\t\t\t\t\t\t<div class=\"ui-icon ${iconClass} tasks-scrum__widget-methodology--icon\">\n\t\t\t\t\t\t\t<i></i>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"tasks-scrum__widget-methodology--content\">\n\t\t\t\t\t\t\t<div class=\"tasks-scrum__widget-methodology--name\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('TSF_MIGRATION_TITLE')}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"tasks-scrum__widget-methodology--label --migration\">\n\t\t\t\t\t\t\t${Loc.getMessage('TSF_MIGRATION_LABEL')}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\tthis.requestSender.getMarketPath()\n\t\t.then((response) => {\n\t\t\tconst marketUri = response.data;\n\n\t\t\tEvent.bind(node, 'click', () => {\n\t\t\t\tconst uri = new Uri(marketUri);\n\t\t\t\turi.setQueryParam('tag', ['migrator', 'tasks']);\n\n\t\t\t\tthis.sidePanel.openSidePanelByUrl(uri.toString());\n\n\t\t\t\tthis.menu.close();\n\t\t\t});\n\t\t})\n\n\n\t\treturn node;\n\t}\n\n\tshowEpics()\n\t{\n\t\tthis.sidePanel.showByExtension(\n\t\t\t'Epic',\n\t\t\t{\n\t\t\t\tview: 'list',\n\t\t\t\tgroupId: this.groupId,\n\t\t\t\tpathToTask: this.pathToTask\n\t\t\t}\n\t\t)\n\t\t\t.then((extension) => {\n\t\t\t\tBX.Tasks.Scrum.EpicInstance = extension;\n\t\t\t})\n\t\t;\n\n\t\tthis.menu.close();\n\t}\n\n\tcreateEpic()\n\t{\n\t\tthis.sidePanel.showByExtension(\n\t\t\t'Epic',\n\t\t\t{\n\t\t\t\tview: 'add',\n\t\t\t\tgroupId: this.groupId\n\t\t\t}\n\t\t);\n\n\t\tthis.menu.close();\n\t}\n\n\tshowDodSettings()\n\t{\n\t\tthis.sidePanel.showByExtension(\n\t\t\t'Dod',\n\t\t\t{\n\t\t\t\tview: 'settings',\n\t\t\t\tgroupId: this.groupId\n\t\t\t}\n\t\t);\n\n\t\tthis.menu.close();\n\t}\n\n\tshowTeamSpeedChart()\n\t{\n\t\tif (this.teamSpeedPath)\n\t\t{\n\t\t\tthis.sidePanel.openSidePanel(this.teamSpeedPath);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthrow new Error('Could not find a page to display the chart.');\n\t\t}\n\n\t\tthis.menu.close();\n\n\t\tajax.runAction(\n\t\t\t'bitrix:tasks.scrum.info.saveAnalyticsLabel',\n\t\t\t{\n\t\t\t\tdata: {},\n\t\t\t\tanalyticsLabel: {\n\t\t\t\t\tscrum: 'Y',\n\t\t\t\t\taction: 'open_team_speed_diag'\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t}\n\n\tshowBurnDownChart(sprintId: number)\n\t{\n\t\tif (this.burnDownPath)\n\t\t{\n\t\t\tthis.sidePanel.openSidePanel(this.burnDownPath.replace('#sprint_id#', sprintId));\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthrow new Error('Could not find a page to display the chart.');\n\t\t}\n\n\t\tthis.menu.close();\n\n\t\tajax.runAction(\n\t\t\t'bitrix:tasks.scrum.info.saveAnalyticsLabel',\n\t\t\t{\n\t\t\t\tdata: {},\n\t\t\t\tanalyticsLabel: {\n\t\t\t\t\tscrum: 'Y',\n\t\t\t\t\taction: 'open_burn_diag'\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t}\n\n\tinitHints(node: HTMLElement)\n\t{\n\t\tthis.hintManager = BX.UI.Hint.createInstance({\n\t\t\tpopupParameters: {\n\t\t\t\tcloseByEsc: true,\n\t\t\t\tautoHide: true\n\t\t\t}\n\t\t});\n\n\t\tthis.hintManager.init(node);\n\t}\n}"],"names":["RequestSender","controller","action","data","Promise","resolve","reject","ajax","runAction","then","sendRequest","response","alertTitle","Type","isUndefined","errors","console","error","length","firstError","shift","errorCode","code","message","title","Loc","getMessage","MessageBox","alert","SidePanel","setEventNamespace","sidePanelManager","BX","Instance","url","open","id","options","name","params","extensionName","toLowerCase","top","Runtime","loadExtension","exports","replaceAll","extension","show","EventEmitter","Methodology","groupId","parseInt","teamSpeedPath","isString","burnDownPath","pathToTask","requestSender","sidePanel","menu","hintManager","targetNode","isShown","close","PopupComponentsMaker","target","cacheable","content","html","renderEpics","backgroundColor","renderDod","renderTeamSpeed","renderBurnDown","renderTutor","renderMigration","getEpicInfo","existsEpic","buttonText","buttonClass","iconClass","blockClass","baseClasses","node","Tag","render","initHints","Event","bind","querySelector","showEpics","createEpic","showErrorAlert","getDodInfo","existsDod","showDodSettings","getTeamSpeedInfo","isDisabled","existsCompletedSprint","btnUiClasses","disableClass","showTeamSpeedChart","getBurnDownInfo","existsChart","isNull","sprint","showBurnDownChart","getTutorInfo","tutorClasses","Manual","urlParams","scrum","migrationClasses","getMarketPath","marketUri","uri","Uri","setQueryParam","openSidePanelByUrl","toString","showByExtension","view","Tasks","Scrum","EpicInstance","openSidePanel","Error","analyticsLabel","sprintId","replace","UI","Hint","createInstance","popupParameters","closeByEsc","autoHide","init"],"mappings":"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"}