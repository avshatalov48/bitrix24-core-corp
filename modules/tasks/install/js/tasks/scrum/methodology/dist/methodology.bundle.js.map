{"version":3,"file":"methodology.bundle.js","sources":["../src/request.sender.js","../src/side.panel.js","../src/methodology.js"],"sourcesContent":["import {Loc, Type} from 'main.core';\n\ntype RequestParams = {\n\tgroupId: number,\n\ttaskId: number,\n\ttypeId?: number\n}\n\ntype ErrorResponse = {\n\tdata: string,\n\terrors: Array,\n\tstatus: string\n}\n\nexport class RequestSender\n{\n\tsendRequest(controller: string, action: string, data = {}): Promise\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\ttop.BX.ajax.runAction(\n\t\t\t\t'bitrix:tasks.scrum.' + controller + '.' + action,\n\t\t\t\t{\n\t\t\t\t\tdata: data\n\t\t\t\t}\n\t\t\t).then(resolve, reject);\n\t\t});\n\t}\n\n\tgetEpicInfo(data: RequestParams): Promise\n\t{\n\t\treturn this.sendRequest('epic', 'getEpicInfo', data);\n\t}\n\n\tgetDodInfo(data: RequestParams): Promise\n\t{\n\t\treturn this.sendRequest('dod', 'getDodInfo', data);\n\t}\n\n\tgetTeamSpeedInfo(data: RequestParams): Promise\n\t{\n\t\treturn this.sendRequest('sprint', 'getTeamSpeedInfo', data);\n\t}\n\n\tgetTutorInfo(data: RequestParams): Promise\n\t{\n\t\treturn this.sendRequest('info', 'getTutorInfo', data);\n\t}\n\n\tgetBurnDownInfo(data: RequestParams): Promise\n\t{\n\t\treturn this.sendRequest('sprint', 'getBurnDownInfo', data);\n\t}\n\n\tshowErrorAlert(response: ErrorResponse, alertTitle?: string)\n\t{\n\t\tif (Type.isUndefined(response.errors))\n\t\t{\n\t\t\tconsole.log(response);\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (response.errors.length)\n\t\t{\n\t\t\tconst firstError = response.errors.shift();\n\t\t\tif (firstError)\n\t\t\t{\n\t\t\t\tconst errorCode = (firstError.code ? firstError.code : '');\n\n\t\t\t\tconst message = firstError.message + ' ' + errorCode;\n\t\t\t\tconst title = (alertTitle ? alertTitle : Loc.getMessage('TSM_ERROR_POPUP_TITLE'));\n\n\t\t\t\ttop.BX.UI.Dialogs.MessageBox.alert(message, title);\n\t\t\t}\n\t\t}\n\t}\n}","import {Runtime} from 'main.core';\nimport {EventEmitter, BaseEvent} from 'main.core.events';\n\nexport class SidePanel extends EventEmitter\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\n\t\tthis.setEventNamespace('BX.Tasks.Scrum.Methodology.SidePanel');\n\n\t\t/* eslint-disable */\n\t\tthis.sidePanelManager = BX.SidePanel.Instance;\n\t\t/* eslint-enable */\n\t}\n\n\topenSidePanelByUrl(url)\n\t{\n\t\tthis.sidePanelManager.open(url);\n\t}\n\n\topenSidePanel(id, options)\n\t{\n\t\tthis.sidePanelManager.open(id, options);\n\t}\n\n\tshowByExtension(name: string, params: Object): Promise\n\t{\n\t\tconst extensionName = 'tasks.scrum.' + name.toLowerCase();\n\n\t\treturn Runtime.loadExtension(extensionName)\n\t\t\t.then((exports) => {\n\n\t\t\t\tname = name.replaceAll('-', '');\n\n\t\t\t\tif (exports && exports[name])\n\t\t\t\t{\n\t\t\t\t\tconst extension = new exports[name](params);\n\n\t\t\t\t\textension.show();\n\n\t\t\t\t\treturn extension;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t})\n\t\t;\n\t}\n}","import {ajax, Event, Loc, Tag, Uri, Type} from 'main.core';\n\nimport {PopupComponentsMaker} from 'ui.popupcomponentsmaker';\n\nimport {RequestSender} from './request.sender';\nimport {SidePanel} from './side.panel';\n\nimport 'ui.hint';\n\nimport '../css/base.css';\n\ntype Params = {\n\tgroupId: number,\n\tteamSpeedPath: string,\n\tburnDownPath: string\n}\n\ntype EpicInfoResponse = {\n\tdata: {\n\t\texistsEpic: boolean\n\t}\n}\n\ntype DodInfoResponse = {\n\tdata: {\n\t\texistsDod: boolean\n\t}\n}\n\ntype TeamSpeedResponse = {\n\tdata: {\n\t\texistsCompletedSprint: boolean\n\t}\n}\n\ntype TutorResponse = {\n\tdata: {\n\t\turl: string\n\t}\n}\n\ntype BurnDownResponse = {\n\tdata: {\n\t\tsprint: ?SprintData\n\t}\n}\n\ntype SprintData = {\n\tid: number,\n\tname: string\n}\n\nexport class Methodology\n{\n\tconstructor(params: Params)\n\t{\n\t\tthis.groupId = parseInt(params.groupId, 10);\n\n\t\tthis.teamSpeedPath = params.teamSpeedPath ? params.teamSpeedPath : '';\n\t\tthis.burnDownPath = params.burnDownPath ? params.burnDownPath : '';\n\n\t\tthis.requestSender = new RequestSender();\n\t\tthis.sidePanel = new SidePanel();\n\n\t\tthis.menu = null;\n\t}\n\n\tshowMenu(targetNode: HTMLElement)\n\t{\n\t\tif (this.menu)\n\t\t{\n\t\t\tif (this.menu.isShown())\n\t\t\t{\n\t\t\t\tthis.menu.close();\n\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tthis.menu = new PopupComponentsMaker({\n\t\t\tid: 'tasks-scrum-methodology-widget',\n\t\t\ttarget: targetNode,\n\t\t\tcacheable: false,\n\t\t\tcontent: [\n\t\t\t\t{\n\t\t\t\t\thtml: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\thtml: this.renderEpics(),\n\t\t\t\t\t\t\tbackgroundColor: '#fafafa'\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\thtml: this.renderDod(),\n\t\t\t\t\t\t\tbackgroundColor: '#fafafa'\n\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\thtml: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\thtml: this.renderTeamSpeed()\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\thtml: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\thtml: this.renderBurnDown()\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\thtml: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\thtml: this.renderTutor(),\n\t\t\t\t\t\t\tbackgroundColor: '#fafafa'\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\thtml: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\thtml: this.renderMigration()\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t]\n\t\t});\n\n\t\tthis.menu.show();\n\t}\n\n\trenderEpics(): Promise\n\t{\n\t\treturn this.requestSender.getEpicInfo({\n\t\t\tgroupId: this.groupId\n\t\t})\n\t\t\t.then((response: EpicInfoResponse) => {\n\n\t\t\t\tconst existsEpic = response.data.existsEpic;\n\n\t\t\t\tconst buttonText = existsEpic\n\t\t\t\t\t? Loc.getMessage('TSF_EPIC_OPEN_BUTTON')\n\t\t\t\t\t: Loc.getMessage('TSF_EPIC_CREATE_BUTTON')\n\t\t\t\t;\n\n\t\t\t\tconst buttonClass = existsEpic\n\t\t\t\t\t? '--border'\n\t\t\t\t\t: ''\n\t\t\t\t;\n\n\t\t\t\tconst iconClass = existsEpic\n\t\t\t\t\t? 'ui-icon-service-epics'\n\t\t\t\t\t: 'ui-icon-service-light-epics'\n\t\t\t\t;\n\n\t\t\t\tconst blockClass = existsEpic\n\t\t\t\t\t? '--active'\n\t\t\t\t\t: ''\n\t\t\t\t;\n\n\t\t\t\tconst baseClasses = 'tasks-scrum__widget-methodology tasks-scrum__widget-methodology--scope';\n\n\t\t\t\tconst node = Tag.render`\n\t\t\t\t\t<div class=\"${baseClasses} tasks-scrum__widget-methodology--bg ${blockClass}\">\n\t\t\t\t\t\t<div class=\"tasks-scrum__widget-methodology--conteiner\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclass=\"ui-icon ${iconClass} tasks-scrum__widget-methodology--icon\"\n\t\t\t\t\t\t\t><i></i></div>\n\t\t\t\t\t\t\t<div class=\"tasks-scrum__widget-methodology--content\">\n\t\t\t\t\t\t\t\t<div class=\"tasks-scrum__widget-methodology--name\">\n\t\t\t\t\t\t\t\t\t<span>${Loc.getMessage('TSF_EPIC_TITLE')}</span>\n\t\t\t\t\t\t\t\t\t<span class=\"ui-hint\">\n\t\t\t\t\t\t\t\t\t\t<i class=\"ui-hint-icon\" data-hint=\"${Loc.getMessage('TSF_EPIC_HINT')}\"></i>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"tasks-scrum__widget-methodology--btn-box\">\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tclass=\"ui-qr-popupcomponentmaker__btn ${buttonClass}\"\n\t\t\t\t\t\t\t\t\t\tdata-role=\"open-epics\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t${buttonText}\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t`;\n\n\t\t\t\tthis.initHints(node);\n\n\t\t\t\tEvent.bind(node.querySelector('button'), 'click', () => {\n\t\t\t\t\tif (existsEpic)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.showEpics();\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.createEpic();\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\treturn node;\n\t\t\t})\n\t\t\t.catch((response) => {\n\t\t\t\tthis.requestSender.showErrorAlert(response);\n\t\t\t})\n\t\t;\n\t}\n\n\trenderDod(): Promise\n\t{\n\t\treturn this.requestSender.getDodInfo({\n\t\t\tgroupId: this.groupId\n\t\t})\n\t\t\t.then((response: DodInfoResponse) => {\n\n\t\t\t\tconst existsDod = response.data.existsDod;\n\n\t\t\t\tconst buttonText = existsDod\n\t\t\t\t\t? Loc.getMessage('TSF_DOD_OPEN_BUTTON')\n\t\t\t\t\t: Loc.getMessage('TSF_DOD_CREATE_BUTTON')\n\t\t\t\t;\n\n\t\t\t\tconst buttonClass = existsDod\n\t\t\t\t\t? '--border'\n\t\t\t\t\t: ''\n\t\t\t\t;\n\n\t\t\t\tconst iconClass = existsDod\n\t\t\t\t\t? 'ui-icon-service-dod'\n\t\t\t\t\t: 'ui-icon-service-light-dod'\n\t\t\t\t;\n\n\t\t\t\tconst blockClass = existsDod\n\t\t\t\t\t? '--active'\n\t\t\t\t\t: ''\n\t\t\t\t;\n\n\t\t\t\tconst node = Tag.render`\n\t\t\t\t\t<div class=\"tasks-scrum__widget-methodology tasks-scrum__widget-methodology--scope tasks-scrum__widget-methodology--bg ${blockClass}\">\n\t\t\t\t\t\t<div class=\"tasks-scrum__widget-methodology--conteiner\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclass=\"ui-icon ${iconClass} tasks-scrum__widget-methodology--icon\"\n\t\t\t\t\t\t\t><i></i></div>\n\t\t\t\t\t\t\t<div class=\"tasks-scrum__widget-methodology--content\">\n\t\t\t\t\t\t\t\t<div class=\"tasks-scrum__widget-methodology--name\">\n\t\t\t\t\t\t\t\t\t<span>${Loc.getMessage('TSF_DOD_TITLE')}</span>\n\t\t\t\t\t\t\t\t\t<span class=\"ui-hint\">\n\t\t\t\t\t\t\t\t\t\t<i class=\"ui-hint-icon\" data-hint=\"${Loc.getMessage('TSF_DOD_HINT')}\"></i>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"tasks-scrum__widget-methodology--btn-box\">\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tclass=\"ui-qr-popupcomponentmaker__btn ${buttonClass}\"\n\t\t\t\t\t\t\t\t\t\tdata-role=\"open-dod\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t${buttonText}\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t`;\n\n\t\t\t\tthis.initHints(node);\n\n\t\t\t\tEvent.bind(node.querySelector('button'), 'click', this.showDodSettings.bind(this));\n\n\t\t\t\treturn node;\n\t\t\t})\n\t\t\t.catch((response) => {\n\t\t\t\tthis.requestSender.showErrorAlert(response);\n\t\t\t})\n\t\t;\n\t}\n\n\trenderTeamSpeed(): Promise\n\t{\n\t\treturn this.requestSender.getTeamSpeedInfo({\n\t\t\tgroupId: this.groupId\n\t\t})\n\t\t\t.then((response: TeamSpeedResponse) => {\n\n\t\t\t\tconst isDisabled = (!response.data.existsCompletedSprint);\n\n\t\t\t\tconst btnUiClasses = 'ui-qr-popupcomponentmaker__btn --border';\n\t\t\t\tconst disableClass = isDisabled ? '--disabled' : '';\n\n\t\t\t\tconst node = Tag.render`\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"tasks-scrum__widget-methodology tasks-scrum__widget-methodology--scope\"\n\t\t\t\t\t\tdata-role=\"show-team-speed-chart\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div class=\"tasks-scrum__widget-methodology--btn-box-center\">\n\t\t\t\t\t\t\t<div class=\"tasks-scrum__widget-methodology--image ${disableClass}\">\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<button class=\"${btnUiClasses} ${disableClass}\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('TSF_TEAM_SPEED_BUTTON')}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t`;\n\n\t\t\t\tif (!isDisabled)\n\t\t\t\t{\n\t\t\t\t\tEvent.bind(node, 'click', this.showTeamSpeedChart.bind(this));\n\t\t\t\t}\n\n\t\t\t\treturn node;\n\t\t\t})\n\t\t\t.catch((response) => {\n\t\t\t\tthis.requestSender.showErrorAlert(response);\n\t\t\t})\n\t\t;\n\t}\n\n\trenderBurnDown(): Promise\n\t{\n\t\treturn this.requestSender.getBurnDownInfo({\n\t\t\tgroupId: this.groupId\n\t\t})\n\t\t\t.then((response: BurnDownResponse) => {\n\t\t\t\tconst existsChart = !Type.isNull(response.data.sprint);\n\t\t\t\tconst btnUiClasses = 'ui-qr-popupcomponentmaker__btn --border';\n\t\t\t\tconst disableClass = existsChart ? '' : '--disabled';\n\n\t\t\t\tconst node = Tag.render`\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"tasks-scrum__widget-methodology tasks-scrum__widget-methodology--scope\"\n\t\t\t\t\t\tdata-role=\"show-burn-down-chart\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div class=\"tasks-scrum__widget-methodology--btn-box-center\">\n\t\t\t\t\t\t\t<div class=\"tasks-scrum__widget-methodology--image-diagram ${disableClass}\">\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<button class=\"${btnUiClasses} ${disableClass}\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('TSF_TEAM_SPEED_DIAGRAM')}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t`;\n\n\t\t\t\tif (existsChart)\n\t\t\t\t{\n\t\t\t\t\tEvent.bind(node, 'click', this.showBurnDownChart.bind(this, response.data.sprint.id));\n\t\t\t\t}\n\n\t\t\t\treturn node;\n\t\t\t})\n\t\t\t.catch((response) => {\n\t\t\t\tthis.requestSender.showErrorAlert(response);\n\t\t\t})\n\t\t;\n\t}\n\n\trenderTutor(): HTMLElement\n\t{\n\t\treturn this.requestSender.getTutorInfo({\n\t\t\tgroupId: this.groupId\n\t\t})\n\t\t\t.then((response: TutorResponse) => {\n\t\t\t\tconst baseClasses = 'tasks-scrum__widget-methodology tasks-scrum__widget-methodology--scope';\n\t\t\t\tconst tutorClasses = 'tasks-scrum__widget-methodology--training tasks-scrum__widget-methodology--bg';\n\n\t\t\t\tconst url = response.data.url;\n\t\t\t\tconst existsTutor = (url !== '');\n\n\t\t\t\tconst iconClass = existsTutor\n\t\t\t\t\t? 'ui-icon-service-tutorial'\n\t\t\t\t\t: 'ui-icon-service-light-tutorial'\n\t\t\t\t;\n\n\t\t\t\tconst blockClass = existsTutor\n\t\t\t\t\t? '--active'\n\t\t\t\t\t: ''\n\t\t\t\t;\n\n\t\t\t\tconst labelClass = existsTutor\n\t\t\t\t\t? '--hidden'\n\t\t\t\t\t: ''\n\t\t\t\t;\n\n\t\t\t\tconst node = Tag.render`\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"${baseClasses} ${tutorClasses} ${blockClass}\"\n\t\t\t\t\t\tdata-role=\"open-tutor\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div class=\"tasks-scrum__widget-methodology--conteiner\">\n\t\t\t\t\t\t\t<div class=\"tasks-scrum__widget-methodology--conteiner\">\n\t\t\t\t\t\t\t\t<div class=\"ui-icon ${iconClass} tasks-scrum__widget-methodology--icon\">\n\t\t\t\t\t\t\t\t\t<i></i>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"tasks-scrum__widget-methodology--content\">\n\t\t\t\t\t\t\t\t\t<div class=\"tasks-scrum__widget-methodology--name\">\n\t\t\t\t\t\t\t\t\t\t${Loc.getMessage('TSF_TUTORIAL_TITLE')}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"tasks-scrum__widget-methodology--description\">\n\t\t\t\t\t\t\t\t\t\t${Loc.getMessage('TSF_TUTORIAL_TEXT')}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"tasks-scrum__widget-methodology--label ${labelClass}\">\n\t\t\t\t\t\t\t\t\t${Loc.getMessage('TSF_TEAM_SPEED_LABEL')}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t`;\n\n\t\t\t\tEvent.bind(node, 'click', () => {\n\t\t\t\t\tif (existsTutor)\n\t\t\t\t\t{\n\t\t\t\t\t\tajax.runAction(\n\t\t\t\t\t\t\t'bitrix:tasks.scrum.info.saveAnalyticsLabel',\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\tgroupId: this.groupId\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tanalyticsLabel: {\n\t\t\t\t\t\t\t\t\tscrum: 'Y',\n\t\t\t\t\t\t\t\t\taction: 'guide_open',\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t)\n\t\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\t\tthis.sidePanel.openSidePanel(url, {\n\t\t\t\t\t\t\t\t\twidth: 1000,\n\t\t\t\t\t\t\t\t\tcontentCallback: () => {\n\t\t\t\t\t\t\t\t\t\treturn this.createTutorFrame(url);\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\treturn node;\n\t\t\t})\n\t\t\t.catch((response) => {\n\t\t\t\tthis.requestSender.showErrorAlert(response);\n\t\t\t})\n\t\t;\n\t}\n\n\trenderMigration()\n\t{\n\t\tconst baseClasses = 'tasks-scrum__widget-methodology tasks-scrum__widget-methodology--scope';\n\t\tconst migrationClasses = 'tasks-scrum__widget-methodology--migration tasks-scrum__widget-methodology--bg';\n\t\tconst iconClass = 'ui-icon-service-tutorial tasks-scrum__widget-methodology--migration-btn';\n\n\t\tconst node = Tag.render`\n\t\t\t<div class=\"${baseClasses} ${migrationClasses}\" data-role=\"open-migration\">\n\t\t\t\t<div class=\"tasks-scrum__widget-methodology--conteiner\">\n\t\t\t\t\t<div class=\"tasks-scrum__widget-methodology--conteiner\">\n\t\t\t\t\t\t<div class=\"ui-icon ${iconClass} tasks-scrum__widget-methodology--icon\">\n\t\t\t\t\t\t\t<i></i>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"tasks-scrum__widget-methodology--content\">\n\t\t\t\t\t\t\t<div class=\"tasks-scrum__widget-methodology--name\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('TSF_MIGRATION_TITLE')}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"tasks-scrum__widget-methodology--label --migration\">\n\t\t\t\t\t\t\t${Loc.getMessage('TSF_MIGRATION_LABEL')}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\tEvent.bind(node, 'click', () => {\n\t\t\tconst uri = new Uri('/marketplace/');\n\t\t\turi.setQueryParam('tag', ['migrator', 'tasks']);\n\n\t\t\tthis.sidePanel.openSidePanelByUrl(uri.toString());\n\n\t\t\tthis.menu.close();\n\t\t});\n\n\t\treturn node;\n\t}\n\n\tcreateTutorFrame(url: string)\n\t{\n\t\tconst frameStyles = 'position: absolute; left: 0; top: 0; padding: 0;'\n\t\t\t+ ' border: none; margin: 0; width: 100%; height: 100%;';\n\n\t\treturn new Promise((resolve) => resolve(Tag.render`<iframe style=\"${frameStyles}\" src=\"${url}\"></iframe>`));\n\t}\n\n\tshowEpics()\n\t{\n\t\tthis.sidePanel.showByExtension(\n\t\t\t'Epic',\n\t\t\t{\n\t\t\t\tview: 'list',\n\t\t\t\tgroupId: this.groupId\n\t\t\t}\n\t\t);\n\n\t\tthis.menu.close();\n\t}\n\n\tcreateEpic()\n\t{\n\t\tthis.sidePanel.showByExtension(\n\t\t\t'Epic',\n\t\t\t{\n\t\t\t\tview: 'add',\n\t\t\t\tgroupId: this.groupId\n\t\t\t}\n\t\t);\n\n\t\tthis.menu.close();\n\t}\n\n\tshowDodSettings()\n\t{\n\t\tthis.sidePanel.showByExtension(\n\t\t\t'Dod',\n\t\t\t{\n\t\t\t\tview: 'settings',\n\t\t\t\tgroupId: this.groupId\n\t\t\t}\n\t\t);\n\n\t\tthis.menu.close();\n\t}\n\n\tshowTeamSpeedChart()\n\t{\n\t\tif (this.teamSpeedPath)\n\t\t{\n\t\t\tthis.sidePanel.openSidePanel(this.teamSpeedPath);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthrow new Error('Could not find a page to display the chart.');\n\t\t}\n\n\t\tthis.menu.close();\n\n\t\tajax.runAction(\n\t\t\t'bitrix:tasks.scrum.info.saveAnalyticsLabel',\n\t\t\t{\n\t\t\t\tdata: {},\n\t\t\t\tanalyticsLabel: {\n\t\t\t\t\tscrum: 'Y',\n\t\t\t\t\taction: 'open_team_speed_diag'\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t}\n\n\tshowBurnDownChart(sprintId: number)\n\t{\n\t\tif (this.burnDownPath)\n\t\t{\n\t\t\tthis.sidePanel.openSidePanel(this.burnDownPath.replace('#sprint_id#', sprintId));\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthrow new Error('Could not find a page to display the chart.');\n\t\t}\n\n\t\tthis.menu.close();\n\n\t\tajax.runAction(\n\t\t\t'bitrix:tasks.scrum.info.saveAnalyticsLabel',\n\t\t\t{\n\t\t\t\tdata: {},\n\t\t\t\tanalyticsLabel: {\n\t\t\t\t\tscrum: 'Y',\n\t\t\t\t\taction: 'open_burn_diag'\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t}\n\n\tinitHints(node: HTMLElement)\n\t{\n\t\tBX.UI.Hint.init(node);\n\t}\n}"],"names":["RequestSender","controller","action","data","Promise","resolve","reject","top","BX","ajax","runAction","then","sendRequest","response","alertTitle","Type","isUndefined","errors","console","log","length","firstError","shift","errorCode","code","message","title","Loc","getMessage","UI","Dialogs","MessageBox","alert","SidePanel","setEventNamespace","sidePanelManager","Instance","url","open","id","options","name","params","extensionName","toLowerCase","Runtime","loadExtension","exports","replaceAll","extension","show","EventEmitter","Methodology","groupId","parseInt","teamSpeedPath","burnDownPath","requestSender","sidePanel","menu","targetNode","isShown","close","PopupComponentsMaker","target","cacheable","content","html","renderEpics","backgroundColor","renderDod","renderTeamSpeed","renderBurnDown","renderTutor","renderMigration","getEpicInfo","existsEpic","buttonText","buttonClass","iconClass","blockClass","baseClasses","node","Tag","render","initHints","Event","bind","querySelector","showEpics","createEpic","showErrorAlert","getDodInfo","existsDod","showDodSettings","getTeamSpeedInfo","isDisabled","existsCompletedSprint","btnUiClasses","disableClass","showTeamSpeedChart","getBurnDownInfo","existsChart","isNull","sprint","showBurnDownChart","getTutorInfo","tutorClasses","existsTutor","labelClass","analyticsLabel","scrum","openSidePanel","width","contentCallback","createTutorFrame","migrationClasses","uri","Uri","setQueryParam","openSidePanelByUrl","toString","frameStyles","showByExtension","view","Error","sprintId","replace","Hint","init"],"mappings":"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"}