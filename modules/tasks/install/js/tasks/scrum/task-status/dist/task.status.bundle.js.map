{"version":3,"file":"task.status.bundle.js","sources":["../src/request.sender.js","../src/task.status.js"],"sourcesContent":["import {Loc, Type, ajax} from 'main.core';\n\nimport {MessageBox} from 'ui.dialogs.messagebox';\n\ntype ErrorResponse = {\n\tdata: string,\n\terrors: Array,\n\tstatus: string\n}\n\nexport class RequestSender\n{\n\tsendRequest(controller: string, action: string, data = {}): Promise\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tajax.runAction(\n\t\t\t\t'bitrix:tasks.scrum.' + controller + '.' + action,\n\t\t\t\t{\n\t\t\t\t\tdata: data\n\t\t\t\t}\n\t\t\t).then(resolve, reject);\n\t\t});\n\t}\n\n\tneedUpdateTask(data): Promise\n\t{\n\t\treturn this.sendRequest('task', 'needUpdateTaskStatus', data);\n\t}\n\n\tgetTasks(data): Promise\n\t{\n\t\treturn this.sendRequest('task', 'getTasks', data);\n\t}\n\n\tcompleteTask(data): Promise\n\t{\n\t\treturn this.sendRequest('task', 'completeTask', data);\n\t}\n\n\trenewTask(data): Promise\n\t{\n\t\treturn this.sendRequest('task', 'renewTask', data);\n\t}\n\n\tproceedParentTask(data): Promise\n\t{\n\t\treturn this.sendRequest('task', 'proceedParentTask', data);\n\t}\n\n\tisParentScrumTask(data): Promise\n\t{\n\t\treturn this.sendRequest('task', 'isParentScrumTask', data);\n\t}\n\n\tshowErrorAlert(response: ErrorResponse, alertTitle?: string)\n\t{\n\t\tif (Type.isUndefined(response.errors))\n\t\t{\n\t\t\tconsole.error(response);\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (response.errors.length)\n\t\t{\n\t\t\tconst firstError = response.errors.shift();\n\t\t\tif (firstError)\n\t\t\t{\n\t\t\t\tconst errorCode = (firstError.code ? firstError.code : '');\n\n\t\t\t\tconst message = firstError.message + ' ' + errorCode;\n\t\t\t\tconst title = (alertTitle ? alertTitle : Loc.getMessage('TST_ERROR_POPUP_TITLE'));\n\n\t\t\t\tMessageBox.alert(message, title);\n\t\t\t}\n\t\t}\n\t}\n}","import {Type, Loc, Text} from 'main.core';\n\nimport {MessageBox, MessageBoxButtons} from 'ui.dialogs.messagebox';\nimport {UI} from 'ui.notification';\n\nimport {Dod} from 'tasks.scrum.dod';\n\nimport {RequestSender} from './request.sender';\n\ntype State = {\n\tgroupId: number,\n\tparentTaskId: number,\n\ttaskId: number,\n\taction: 'complete' | 'renew',\n\tperformActionOnParentTask?: boolean\n}\n\ntype Task = {\n\tname: string\n}\n\nexport class TaskStatus\n{\n\tstatic actions = {\n\t\tcomplete: 'complete',\n\t\trenew: 'renew',\n\t\tproceed: 'proceed',\n\t\tskip: 'skip'\n\t};\n\n\tconstructor(state: State)\n\t{\n\t\tthis.setState(state);\n\n\t\tthis.requestSender = new RequestSender();\n\t}\n\n\tsetState(state: State)\n\t{\n\t\tthis.groupId = parseInt(state.groupId, 10);\n\t\tthis.parentTaskId = parseInt(state.parentTaskId, 10);\n\t\tthis.taskId = parseInt(state.taskId, 10);\n\t\tthis.action = (\n\t\t\tstate.action === TaskStatus.actions.complete\n\t\t\t\t? TaskStatus.actions.complete\n\t\t\t\t: TaskStatus.actions.renew\n\t\t);\n\t\tthis.performActionOnParentTask = (\n\t\t\tType.isUndefined(state.performActionOnParentTask)\n\t\t\t\t? false\n\t\t\t\t: state.performActionOnParentTask\n\t\t);\n\t}\n\n\tupdate(): Promise\n\t{\n\t\treturn this.requestSender.needUpdateTask({\n\t\t\ttaskId: this.parentTaskId,\n\t\t\taction: this.action\n\t\t})\n\t\t\t.then((response) => response.data === true)\n\t\t\t.then((needUpdate: boolean) => {\n\t\t\t\tif (needUpdate)\n\t\t\t\t{\n\t\t\t\t\treturn this.requestSender.getTasks({\n\t\t\t\t\t\tgroupId: this.groupId,\n\t\t\t\t\t\ttaskIds: [this.parentTaskId, this.taskId]\n\t\t\t\t\t})\n\t\t\t\t\t\t.then((response) => {\n\t\t\t\t\t\t\tconst tasks = response.data;\n\n\t\t\t\t\t\t\treturn this.showMessage(\n\t\t\t\t\t\t\t\ttasks[this.parentTaskId],\n\t\t\t\t\t\t\t\ttasks[this.taskId]\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})\n\t\t\t\t\t;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\treturn TaskStatus.actions.skip;\n\t\t\t\t}\n\t\t\t})\n\t\t\t.then((response) => {\n\t\t\t\tif (this.performActionOnParentTask)\n\t\t\t\t{\n\t\t\t\t\tswitch (response)\n\t\t\t\t\t{\n\t\t\t\t\t\tcase TaskStatus.actions.complete:\n\t\t\t\t\t\t\treturn this.completeTask(this.parentTaskId)\n\t\t\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\t\t\tUI.Notification.Center.notify({\n\t\t\t\t\t\t\t\t\t\tcontent: Loc.getMessage('TST_PARENT_COMPLETE_NOTIFY')\n\t\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t\treturn response;\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t;\n\t\t\t\t\t\tcase TaskStatus.actions.renew:\n\t\t\t\t\t\t\treturn this.renewTask(this.parentTaskId)\n\t\t\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\t\t\tUI.Notification.Center.notify({\n\t\t\t\t\t\t\t\t\t\tcontent: Loc.getMessage('TST_PARENT_RENEW_NOTIFY')\n\t\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t\treturn response;\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t;\n\t\t\t\t\t\tcase TaskStatus.actions.proceed:\n\t\t\t\t\t\t\tUI.Notification.Center.notify({\n\t\t\t\t\t\t\t\tcontent: Loc.getMessage('TST_PARENT_PROCEED_NOTIFY')\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\treturn response;\n\t\t\t\t\t\tcase TaskStatus.actions.skip:\n\t\t\t\t\t\t\treturn response;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\treturn response;\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch((response) => this.requestSender.showErrorAlert(response))\n\t\t;\n\t}\n\n\tisParentScrumTask(taskId: number): Promise\n\t{\n\t\treturn this.requestSender.isParentScrumTask({\n\t\t\tgroupId: this.groupId,\n\t\t\ttaskId: taskId\n\t\t})\n\t\t\t.then((response) => response.data === true)\n\t\t;\n\t}\n\n\tshowMessage(parentTask: Task, task: Task): Promise\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst isCompleteAction = (this.action === TaskStatus.actions.complete);\n\n\t\t\t(new MessageBox({\n\t\t\t\tminWidth: 300,\n\t\t\t\tmessage: isCompleteAction\n\t\t\t\t\t? Loc.getMessage('TST_PARENT_COMPLETE_MESSAGE')\n\t\t\t\t\t\t.replace(/#name#/g, Text.encode(parentTask.name))\n\t\t\t\t\t: Loc.getMessage('TST_PARENT_RENEW_MESSAGE')\n\t\t\t\t\t\t.replace(\"#name#\", Text.encode(parentTask.name))\n\t\t\t\t\t\t.replace(\"#sub-name#\", Text.encode(task.name))\n\t\t\t\t,\n\t\t\t\tbuttons: MessageBoxButtons.OK_CANCEL,\n\t\t\t\tokCaption: isCompleteAction\n\t\t\t\t\t? Loc.getMessage('TST_PARENT_COMPLETE_OK_CAPTION')\n\t\t\t\t\t: Loc.getMessage('TST_PARENT_RENEW_OK_CAPTION')\n\t\t\t\t,\n\t\t\t\tcancelCaption: isCompleteAction\n\t\t\t\t\t? Loc.getMessage('TST_PARENT_PROCEED_CAPTION')\n\t\t\t\t\t: Loc.getMessage('TST_PARENT_RENEW_CANCEL_CAPTION')\n\t\t\t\t,\n\t\t\t\tonOk: (messageBox) => {\n\t\t\t\t\tif (isCompleteAction)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.showDod(this.parentTaskId)\n\t\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\t\tmessageBox.close();\n\n\t\t\t\t\t\t\t\tresolve(TaskStatus.actions.complete);\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.catch(() => {\n\t\t\t\t\t\t\t\tmessageBox.getOkButton().setDisabled(false);\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tmessageBox.close();\n\n\t\t\t\t\t\tresolve(TaskStatus.actions.renew);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tonCancel: (messageBox) => {\n\t\t\t\t\tmessageBox.close();\n\t\t\t\t\tif (isCompleteAction)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.proceedParentTask(this.parentTaskId)\n\t\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\t\tresolve(TaskStatus.actions.proceed);\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tresolve(TaskStatus.actions.skip);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t})).show();\n\t\t});\n\t}\n\n\tshowDod(taskId: number): Promise\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst dod = new Dod({\n\t\t\t\tgroupId: this.groupId,\n\t\t\t\ttaskId: taskId\n\t\t\t})\n\n\t\t\tdod.subscribe('resolve', () => resolve());\n\t\t\tdod.subscribe('reject', () => reject());\n\n\t\t\tdod.isNecessary()\n\t\t\t\t.then((isNecessary) => {\n\t\t\t\t\tif (isNecessary)\n\t\t\t\t\t{\n\t\t\t\t\t\tdod.showList();\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t;\n\t\t});\n\t}\n\n\tcompleteTask(taskId: number): Promise\n\t{\n\t\treturn this.requestSender.completeTask({\n\t\t\tgroupId: this.groupId,\n\t\t\ttaskId: taskId\n\t\t});\n\t}\n\n\trenewTask(taskId: number): Promise\n\t{\n\t\treturn this.requestSender.renewTask({\n\t\t\tgroupId: this.groupId,\n\t\t\ttaskId: taskId\n\t\t});\n\t}\n\n\tproceedParentTask(taskId: number): Promise\n\t{\n\t\treturn this.requestSender.proceedParentTask({\n\t\t\tgroupId: this.groupId,\n\t\t\ttaskId: taskId\n\t\t});\n\t}\n}"],"names":["RequestSender","controller","action","data","Promise","resolve","reject","ajax","runAction","then","sendRequest","response","alertTitle","Type","isUndefined","errors","console","error","length","firstError","shift","errorCode","code","message","title","Loc","getMessage","MessageBox","alert","TaskStatus","state","setState","requestSender","groupId","parseInt","parentTaskId","taskId","actions","complete","renew","performActionOnParentTask","needUpdateTask","needUpdate","getTasks","taskIds","tasks","showMessage","skip","completeTask","UI","Notification","Center","notify","content","renewTask","proceed","showErrorAlert","isParentScrumTask","parentTask","task","isCompleteAction","minWidth","replace","Text","encode","name","buttons","MessageBoxButtons","OK_CANCEL","okCaption","cancelCaption","onOk","messageBox","showDod","close","getOkButton","setDisabled","onCancel","proceedParentTask","show","dod","Dod","subscribe","isNecessary","showList"],"mappings":"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"}