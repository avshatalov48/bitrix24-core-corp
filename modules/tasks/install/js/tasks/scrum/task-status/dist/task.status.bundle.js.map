{"version":3,"file":"task.status.bundle.js","sources":["../src/request.sender.js","../src/task.status.js"],"sourcesContent":["import {Loc, Type, ajax} from 'main.core';\n\nimport {MessageBox} from 'ui.dialogs.messagebox';\n\ntype ErrorResponse = {\n\tdata: string,\n\terrors: Array,\n\tstatus: string\n}\n\nexport class RequestSender\n{\n\tsendRequest(controller: string, action: string, data = {}): Promise\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tajax.runAction(\n\t\t\t\t'bitrix:tasks.scrum.' + controller + '.' + action,\n\t\t\t\t{\n\t\t\t\t\tdata: data\n\t\t\t\t}\n\t\t\t).then(resolve, reject);\n\t\t});\n\t}\n\n\tneedUpdateTask(data): Promise\n\t{\n\t\treturn this.sendRequest('task', 'needUpdateTaskStatus', data);\n\t}\n\n\tgetTasks(data): Promise\n\t{\n\t\treturn this.sendRequest('task', 'getTasks', data);\n\t}\n\n\tcompleteTask(data): Promise\n\t{\n\t\treturn this.sendRequest('task', 'completeTask', data);\n\t}\n\n\trenewTask(data): Promise\n\t{\n\t\treturn this.sendRequest('task', 'renewTask', data);\n\t}\n\n\tproceedParentTask(data): Promise\n\t{\n\t\treturn this.sendRequest('task', 'proceedParentTask', data);\n\t}\n\n\tisParentScrumTask(data): Promise\n\t{\n\t\treturn this.sendRequest('task', 'isParentScrumTask', data);\n\t}\n\n\tgetData(data): Promise\n\t{\n\t\treturn this.sendRequest('task', 'getData', data);\n\t}\n\n\tshowErrorAlert(response: ErrorResponse, alertTitle?: string)\n\t{\n\t\tif (Type.isUndefined(response.errors))\n\t\t{\n\t\t\tconsole.error(response);\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (response.errors.length)\n\t\t{\n\t\t\tconst firstError = response.errors.shift();\n\t\t\tif (firstError)\n\t\t\t{\n\t\t\t\tconst errorCode = (firstError.code ? firstError.code : '');\n\n\t\t\t\tconst message = firstError.message + ' ' + errorCode;\n\t\t\t\tconst title = (alertTitle ? alertTitle : Loc.getMessage('TST_ERROR_POPUP_TITLE'));\n\n\t\t\t\tMessageBox.alert(message, title);\n\t\t\t}\n\t\t}\n\t}\n}","import {Type, Loc, Text} from 'main.core';\n\nimport {MessageBox, MessageBoxButtons} from 'ui.dialogs.messagebox';\nimport {UI} from 'ui.notification';\n\nimport {Dod} from 'tasks.scrum.dod';\n\nimport {RequestSender} from './request.sender';\n\ntype State = {\n\ttaskId: number,\n\taction: 'complete' | 'renew',\n\tgroupId?: number,\n\tparentTaskId?: number,\n\tperformActionOnParentTask?: boolean\n}\n\ntype Task = {\n\tname: string\n}\n\nexport class TaskStatus\n{\n\tstatic actions = {\n\t\tcomplete: 'complete',\n\t\trenew: 'renew',\n\t\tproceed: 'proceed',\n\t\tskip: 'skip'\n\t};\n\n\tconstructor(state: State)\n\t{\n\t\tthis.setState(state);\n\n\t\tthis.requestSender = new RequestSender();\n\t}\n\n\tsetState(state: State)\n\t{\n\t\tthis.taskId = parseInt(state.taskId, 10);\n\t\tthis.action = (\n\t\t\tstate.action === TaskStatus.actions.complete\n\t\t\t\t? TaskStatus.actions.complete\n\t\t\t\t: TaskStatus.actions.renew\n\t\t);\n\t\tthis.groupId = Type.isUndefined(state.groupId) ? 0 : parseInt(state.groupId, 10);\n\t\tthis.parentTaskId = Type.isUndefined(state.parentTaskId) ? 0 : parseInt(state.parentTaskId, 10);\n\t\tthis.performActionOnParentTask = (\n\t\t\tType.isUndefined(state.performActionOnParentTask)\n\t\t\t\t? false\n\t\t\t\t: state.performActionOnParentTask\n\t\t);\n\t}\n\n\tupdateState(): Promise\n\t{\n\t\treturn this.requestSender.getData({\n\t\t\ttaskId: this.taskId\n\t\t})\n\t\t\t.then((response) => {\n\t\t\t\tthis.setState(\n\t\t\t\t\t{\n\t\t\t\t\t\t...{\n\t\t\t\t\t\t\taction: this.action,\n\t\t\t\t\t\t\tgroupId: this.groupId,\n\t\t\t\t\t\t\tparentTaskId: this.parentTaskId,\n\t\t\t\t\t\t\tperformActionOnParentTask: this.performActionOnParentTask\n\t\t\t\t\t\t},\n\t\t\t\t\t\t...response.data\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t})\n\t\t;\n\t}\n\n\tupdate(): Promise\n\t{\n\t\treturn this.requestSender.needUpdateTask({\n\t\t\ttaskId: this.parentTaskId,\n\t\t\taction: this.action\n\t\t})\n\t\t\t.then((response) => response.data === true)\n\t\t\t.then((needUpdate: boolean) => {\n\t\t\t\tif (needUpdate)\n\t\t\t\t{\n\t\t\t\t\treturn this.requestSender.getTasks({\n\t\t\t\t\t\tgroupId: this.groupId,\n\t\t\t\t\t\ttaskIds: [this.parentTaskId, this.taskId]\n\t\t\t\t\t})\n\t\t\t\t\t\t.then((response) => {\n\t\t\t\t\t\t\tconst tasks = response.data;\n\n\t\t\t\t\t\t\treturn this.showMessage(\n\t\t\t\t\t\t\t\ttasks[this.parentTaskId],\n\t\t\t\t\t\t\t\ttasks[this.taskId]\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})\n\t\t\t\t\t;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\treturn TaskStatus.actions.skip;\n\t\t\t\t}\n\t\t\t})\n\t\t\t.then((response) => {\n\t\t\t\tif (this.performActionOnParentTask)\n\t\t\t\t{\n\t\t\t\t\tswitch (response)\n\t\t\t\t\t{\n\t\t\t\t\t\tcase TaskStatus.actions.complete:\n\t\t\t\t\t\t\treturn this.completeTask(this.parentTaskId)\n\t\t\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\t\t\tUI.Notification.Center.notify({\n\t\t\t\t\t\t\t\t\t\tcontent: Loc.getMessage('TST_PARENT_COMPLETE_NOTIFY')\n\t\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t\treturn response;\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t;\n\t\t\t\t\t\tcase TaskStatus.actions.renew:\n\t\t\t\t\t\t\treturn this.renewTask(this.parentTaskId)\n\t\t\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\t\t\tUI.Notification.Center.notify({\n\t\t\t\t\t\t\t\t\t\tcontent: Loc.getMessage('TST_PARENT_RENEW_NOTIFY')\n\t\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t\treturn response;\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t;\n\t\t\t\t\t\tcase TaskStatus.actions.proceed:\n\t\t\t\t\t\t\tUI.Notification.Center.notify({\n\t\t\t\t\t\t\t\tcontent: Loc.getMessage('TST_PARENT_PROCEED_NOTIFY')\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\treturn response;\n\t\t\t\t\t\tcase TaskStatus.actions.skip:\n\t\t\t\t\t\t\treturn response;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\treturn response;\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch((response) => this.requestSender.showErrorAlert(response))\n\t\t;\n\t}\n\n\tisParentScrumTask(taskId?: number): Promise\n\t{\n\t\ttaskId = Type.isUndefined(taskId) ? this.parentTaskId : taskId;\n\t\tif (!taskId)\n\t\t{\n\t\t\treturn new Promise((resolve) => resolve(false));\n\t\t}\n\n\t\treturn this.requestSender.isParentScrumTask({\n\t\t\tgroupId: this.groupId,\n\t\t\ttaskId: taskId\n\t\t})\n\t\t\t.then((response) => response.data === true)\n\t\t;\n\t}\n\n\tshowMessage(parentTask: Task, task: Task): Promise\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst isCompleteAction = (this.action === TaskStatus.actions.complete);\n\n\t\t\t(new MessageBox({\n\t\t\t\tminWidth: 300,\n\t\t\t\tmessage: isCompleteAction\n\t\t\t\t\t? Loc.getMessage('TST_PARENT_COMPLETE_MESSAGE')\n\t\t\t\t\t\t.replace(/#name#/g, Text.encode(parentTask.name))\n\t\t\t\t\t: Loc.getMessage('TST_PARENT_RENEW_MESSAGE')\n\t\t\t\t\t\t.replace(\"#name#\", Text.encode(parentTask.name))\n\t\t\t\t\t\t.replace(\"#sub-name#\", Text.encode(task.name))\n\t\t\t\t,\n\t\t\t\tbuttons: MessageBoxButtons.OK_CANCEL,\n\t\t\t\tokCaption: isCompleteAction\n\t\t\t\t\t? Loc.getMessage('TST_PARENT_COMPLETE_OK_CAPTION')\n\t\t\t\t\t: Loc.getMessage('TST_PARENT_RENEW_OK_CAPTION')\n\t\t\t\t,\n\t\t\t\tcancelCaption: isCompleteAction\n\t\t\t\t\t? Loc.getMessage('TST_PARENT_PROCEED_CAPTION')\n\t\t\t\t\t: Loc.getMessage('TST_PARENT_RENEW_CANCEL_CAPTION')\n\t\t\t\t,\n\t\t\t\tonOk: (messageBox) => {\n\t\t\t\t\tif (isCompleteAction)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.showDod(this.parentTaskId)\n\t\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\t\tmessageBox.close();\n\n\t\t\t\t\t\t\t\tresolve(TaskStatus.actions.complete);\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.catch(() => {\n\t\t\t\t\t\t\t\tmessageBox.getOkButton().setDisabled(false);\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tmessageBox.close();\n\n\t\t\t\t\t\tresolve(TaskStatus.actions.renew);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tonCancel: (messageBox) => {\n\t\t\t\t\tmessageBox.close();\n\t\t\t\t\tif (isCompleteAction)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.proceedParentTask(this.parentTaskId)\n\t\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\t\tresolve(TaskStatus.actions.proceed);\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tresolve(TaskStatus.actions.skip);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t})).show();\n\t\t});\n\t}\n\n\tshowDod(taskId: number): Promise\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst dod = new Dod({\n\t\t\t\tgroupId: this.groupId,\n\t\t\t\ttaskId: taskId\n\t\t\t})\n\n\t\t\tdod.subscribe('resolve', () => resolve());\n\t\t\tdod.subscribe('reject', () => reject());\n\n\t\t\tdod.isNecessary()\n\t\t\t\t.then((isNecessary) => {\n\t\t\t\t\tif (isNecessary)\n\t\t\t\t\t{\n\t\t\t\t\t\tdod.showList();\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t;\n\t\t});\n\t}\n\n\tcompleteTask(taskId: number): Promise\n\t{\n\t\treturn this.requestSender.completeTask({\n\t\t\tgroupId: this.groupId,\n\t\t\ttaskId: taskId\n\t\t});\n\t}\n\n\trenewTask(taskId: number): Promise\n\t{\n\t\treturn this.requestSender.renewTask({\n\t\t\tgroupId: this.groupId,\n\t\t\ttaskId: taskId\n\t\t});\n\t}\n\n\tproceedParentTask(taskId: number): Promise\n\t{\n\t\treturn this.requestSender.proceedParentTask({\n\t\t\tgroupId: this.groupId,\n\t\t\ttaskId: taskId\n\t\t});\n\t}\n}"],"names":["RequestSender","controller","action","data","Promise","resolve","reject","ajax","runAction","then","sendRequest","response","alertTitle","Type","isUndefined","errors","console","error","length","firstError","shift","errorCode","code","message","title","Loc","getMessage","MessageBox","alert","TaskStatus","state","setState","requestSender","taskId","parseInt","actions","complete","renew","groupId","parentTaskId","performActionOnParentTask","getData","needUpdateTask","needUpdate","getTasks","taskIds","tasks","showMessage","skip","completeTask","UI","Notification","Center","notify","content","renewTask","proceed","showErrorAlert","isParentScrumTask","parentTask","task","isCompleteAction","minWidth","replace","Text","encode","name","buttons","MessageBoxButtons","OK_CANCEL","okCaption","cancelCaption","onOk","messageBox","showDod","close","getOkButton","setDisabled","onCancel","proceedParentTask","show","dod","Dod","subscribe","isNecessary","showList"],"mappings":"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"}