{"version":3,"file":"dod.bundle.js","sources":["../src/item.type.js","../src/type.storage.js","../src/tabs.js","../src/request.sender.js","../src/settings.js","../src/list.js","../src/dod.js"],"sourcesContent":["import {Text, Type} from 'main.core';\n\nexport type ItemTypeParams = {\n\tid?: number | string,\n\tname?: string,\n\tsort?: number,\n\tdodRequired?: 'Y' | 'N',\n\tparticipants: Array<Participant>\n}\n\nexport type Participant = {\n\tid: number | string,\n\tentityId: string\n}\n\nexport class ItemType\n{\n\tconstructor(params: ItemTypeParams = {})\n\t{\n\t\tthis.setId(params.id);\n\t\tthis.setName(params.name);\n\t\tthis.setSort(params.sort);\n\t\tthis.setDodRequired(params.dodRequired);\n\t\tthis.setParticipants(params.participants);\n\t}\n\n\tsetId(id: number)\n\t{\n\t\tthis.id = (\n\t\t\tType.isInteger(id)\n\t\t\t\t? parseInt(id, 10)\n\t\t\t\t: (Type.isString(id) && id) ? id : Text.getRandom()\n\t\t);\n\t}\n\n\tgetId(): number\n\t{\n\t\treturn this.id;\n\t}\n\n\tsetName(name: string)\n\t{\n\t\tthis.name = (Type.isString(name) ? name : '');\n\t}\n\n\tgetName(): string\n\t{\n\t\treturn this.name;\n\t}\n\n\tsetSort(sort: number)\n\t{\n\t\tthis.sort = (Type.isInteger(sort) ? parseInt(sort, 10) : 0);\n\t}\n\n\tgetSort(): number\n\t{\n\t\treturn this.sort;\n\t}\n\n\tsetDodRequired(value: string)\n\t{\n\t\tthis.dodRequired = (value === 'Y');\n\t}\n\n\tisDodRequired(): boolean\n\t{\n\t\treturn this.dodRequired;\n\t}\n\n\tsetParticipants(participants: Array<Participant>)\n\t{\n\t\tthis.participants = [];\n\n\t\tif (!Type.isArray(participants))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tparticipants\n\t\t\t.forEach((participant: Participant) => {\n\t\t\t\tthis.participants.push([participant.entityId, participant.id])\n\t\t\t})\n\t\t;\n\t}\n\n\tgetParticipants(): Array<Participant>\n\t{\n\t\treturn this.participants;\n\t}\n}","import {ItemType} from './item.type';\n\nexport class TypeStorage\n{\n\tsetTypes(types: Map<number, ItemType>)\n\t{\n\t\tthis.types = types;\n\t}\n\n\tgetNextType(): ItemType\n\t{\n\t\treturn this.types.values().next().value;\n\t}\n\n\tgetTypes(): Map<number, ItemType>\n\t{\n\t\treturn this.types;\n\t}\n\n\taddType(type: ItemType)\n\t{\n\t\tthis.types.set(type.getId(), type);\n\t}\n\n\tgetType(typeId: number): ?ItemType\n\t{\n\t\treturn this.types.get(typeId);\n\t}\n\n\tremoveType(type: ItemType)\n\t{\n\t\tthis.types.delete(type.getId());\n\t}\n}","import {Dom, Event, Loc, Tag, Text} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\n\nimport {ItemType} from './item.type';\nimport {TypeStorage} from './type.storage';\n\nexport class Tabs extends EventEmitter\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\n\t\tthis.setEventNamespace('BX.Tasks.Scrum.Dod.Tabs');\n\n\t\tthis.tabNodes = new Map();\n\n\t\tthis.activeType = null;\n\t\tthis.previousType = null;\n\t}\n\n\tsetTypeStorage(typeStorage: TypeStorage)\n\t{\n\t\tthis.typeStorage = typeStorage;\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tconst sidebarClass = 'tasks-scrum-dod-settings-container-sidebar'\n\t\t\t+ ' tasks-scrum-dod-settings-container-sidebar-settings';\n\n\t\tthis.node = Tag.render`\n\t\t\t<div class=\"${sidebarClass}\">\n\t\t\t\t${[...this.typeStorage.getTypes().values()].map((type: ItemType) => this.renderTab(type))}\n\t\t\t</div>\n\t\t`;\n\n\t\treturn this.node;\n\t}\n\n\tisEmpty(): boolean\n\t{\n\t\treturn this.tabNodes.size === 0;\n\t}\n\n\trenderTab(type: ItemType): HTMLElement\n\t{\n\t\tif (this.isEmptyType(type))\n\t\t{\n\t\t\tconst addNode = Tag.render`\n\t\t\t\t<div class=\"sidebar-tab-link\">\n\t\t\t\t\t<div class=\"tasks-scrum-dod-settings-type-name\">\n\t\t\t\t\t\t+ ${Loc.getMessage('TASKS_SCRUM_CREATE_TYPE')}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\n\t\t\tEvent.bind(addNode, 'click', this.createType.bind(this));\n\n\t\t\treturn addNode;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tconst tabClass = this.isActiveType(type) ? 'sidebar-tab sidebar-tab-active' : 'sidebar-tab';\n\n\t\t\tconst tabNode = Tag.render`\n\t\t\t\t<div class=\"${tabClass}\">\n\t\t\t\t\t<div class=\"tasks-scrum-dod-settings-type-name\">\n\t\t\t\t\t\t${Text.encode(type.getName())}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"tasks-scrum-dod-settings-type-edit\"></div>\n\t\t\t\t\t<div class=\"tasks-scrum-dod-settings-type-remove\"></div>\n\t\t\t\t</div>\n\t\t\t`;\n\n\t\t\tthis.tabNodes.set(type.getId(), tabNode);\n\n\t\t\tEvent.bind(tabNode, 'click', (event) => {\n\t\t\t\tconst edit = event.target.classList.contains('tasks-scrum-dod-settings-type-edit');\n\t\t\t\tconst remove = event.target.classList.contains('tasks-scrum-dod-settings-type-remove');\n\t\t\t\tif (!this.isActiveType(type))\n\t\t\t\t{\n\t\t\t\t\tthis.switchType(type, tabNode);\n\t\t\t\t}\n\t\t\t\tif (edit)\n\t\t\t\t{\n\t\t\t\t\tthis.changeTypeName(type, tabNode);\n\t\t\t\t}\n\t\t\t\tif (remove)\n\t\t\t\t{\n\t\t\t\t\tthis.removeType(type, tabNode);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn tabNode;\n\t\t}\n\t}\n\n\taddType(newType: ItemType, tmpType?: ItemType)\n\t{\n\t\tif (tmpType)\n\t\t{\n\t\t\tDom.remove(this.tabNodes.get(tmpType.getId()));\n\t\t\tthis.tabNodes.delete(tmpType.getId());\n\t\t}\n\n\t\tconst node = this.renderTab(newType);\n\n\t\tDom.insertBefore(node, this.node.lastElementChild);\n\n\t\tthis.switchType(newType, node);\n\t}\n\n\tswitchType(type: ItemType, typeNode: HTMLElement, savePrevious: boolean = true)\n\t{\n\t\tthis.tabNodes.forEach((node: HTMLElement) => {\n\t\t\tDom.removeClass(node, 'sidebar-tab-active');\n\t\t});\n\n\t\tDom.addClass(typeNode, 'sidebar-tab-active');\n\n\t\tif (savePrevious && !this.isEmpty())\n\t\t{\n\t\t\tthis.setPreviousType(this.getActiveType());\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.setPreviousType(null);\n\t\t}\n\n\t\tthis.setActiveType(type);\n\n\t\tthis.emit('switchType', type);\n\t}\n\n\tcreateType()\n\t{\n\t\tconst type = new ItemType();\n\t\ttype.setSort(this.typeStorage.getTypes().size);\n\n\t\tthis.tabNodes.forEach((node: HTMLElement) => {\n\t\t\tDom.removeClass(node, 'sidebar-tab-active');\n\t\t});\n\n\t\tconst node = Tag.render`\n\t\t\t<div class=\"sidebar-tab sidebar-tab-active\">\n\t\t\t\t<input type=\"text\" class=\"tasks-scrum-dod-settings-type-name-input\">\n\t\t\t</div>\n\t\t`;\n\t\tconst nameNode = Tag.render`<div class=\"tasks-scrum-dod-settings-type-name\"></div>`;\n\n\t\tDom.insertBefore(node, this.node.lastElementChild);\n\n\t\tconst input = node.querySelector('input');\n\n\t\tEvent.bind(input, 'change', (event) => {\n\t\t\ttype.setName(event.target['value']);\n\t\t\tthis.emit('createType', type);\n\t\t\tnameNode.textContent = Text.encode(type.getName());\n\t\t\tDom.replace(input, nameNode);\n\t\t}, true);\n\n\t\tEvent.bind(input, 'blur', (event) => {\n\t\t\tif (event.target['value'].trim() === '')\n\t\t\t{\n\t\t\t\tDom.remove(node);\n\t\t\t}\n\t\t}, true);\n\n\t\tEvent.bind(input, 'keydown', (event) => {\n\t\t\tif (event.isComposing || event.keyCode === 13)\n\t\t\t{\n\t\t\t\tinput.blur();\n\t\t\t}\n\t\t});\n\n\t\tinput.focus();\n\n\t\tthis.tabNodes.set(type.getId(), node);\n\t}\n\n\tchangeTypeName(type: ItemType, typeNode: HTMLElement)\n\t{\n\t\tconst inputNode = Tag.render`\n\t\t\t<input type=\"text\" class=\"tasks-scrum-dod-settings-type-name-input\" value=\"${Text.encode(type.getName())}\">\n\t\t`;\n\t\tconst nameNode = typeNode.querySelector('.tasks-scrum-dod-settings-type-name');\n\n\t\tEvent.bind(inputNode, 'change', (event) => {\n\t\t\ttype.setName(event.target['value'])\n\t\t\tthis.emit('changeTypeName', type);\n\t\t\tinputNode.blur();\n\t\t}, true);\n\n\t\tEvent.bind(inputNode, 'blur', () => {\n\t\t\tnameNode.textContent = Text.encode(type.getName());\n\t\t\tDom.replace(inputNode, nameNode);\n\t\t}, true);\n\n\t\tEvent.bind(inputNode, 'keydown', (event) => {\n\t\t\tif (event.isComposing || event.keyCode === 13)\n\t\t\t{\n\t\t\t\tinputNode.blur();\n\t\t\t}\n\t\t});\n\n\t\tDom.replace(nameNode, inputNode);\n\n\t\tinputNode.focus();\n\t\tinputNode.setSelectionRange(type.getName().length, type.getName().length);\n\t}\n\n\tremoveType(type: ItemType, typeNode: HTMLElement)\n\t{\n\t\ttop.BX.UI.Dialogs.MessageBox.confirm(\n\t\t\tLoc.getMessage('TASKS_SCRUM_CONFIRM_TEXT_REMOVE_TYPE'),\n\t\t\t(messageBox) => {\n\t\t\t\tthis.tabNodes.delete(type.getId());\n\t\t\t\tif (this.isActiveType(type))\n\t\t\t\t{\n\t\t\t\t\tthis.setActiveType(null);\n\t\t\t\t}\n\t\t\t\tthis.setPreviousType(null);\n\t\t\t\tDom.remove(typeNode);\n\t\t\t\tthis.emit('removeType', type);\n\t\t\t\tmessageBox.close();\n\t\t\t},\n\t\t\tLoc.getMessage('TASKS_SCRUM_BUTTON_TEXT_REMOVE'),\n\t\t);\n\t}\n\n\tsetActiveType(type: ?ItemType)\n\t{\n\t\tthis.activeType = type;\n\t}\n\n\tgetActiveType(): ?ItemType\n\t{\n\t\treturn this.activeType;\n\t}\n\n\tsetPreviousType(type: ?ItemType)\n\t{\n\t\tthis.previousType = type;\n\t}\n\n\tgetPreviousType(): ?ItemType\n\t{\n\t\treturn this.previousType;\n\t}\n\n\tisActiveType(type: ItemType): boolean\n\t{\n\t\treturn (\n\t\t\tthis.activeType\n\t\t\t&& this.activeType.getId() === type.getId()\n\t\t);\n\t}\n\n\tsetEmptyType(type: ItemType)\n\t{\n\t\tthis.emptyType = type;\n\t}\n\n\tisEmptyType(type: ItemType): boolean\n\t{\n\t\treturn type.getId() === this.emptyType.getId();\n\t}\n\n\tswitchToType(type: ItemType)\n\t{\n\t\tthis.switchType(type, this.tabNodes.get(type.getId()), false);\n\t}\n}","import {Loc, Type} from 'main.core';\n\ntype RequestParams = {\n\tgroupId: number,\n\ttaskId: number,\n\ttypeId?: number\n}\n\ntype ErrorResponse = {\n\tdata: string,\n\terrors: Array,\n\tstatus: string\n}\n\nexport class RequestSender\n{\n\tsendRequest(controller: string, action: string, data = {}): Promise\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\ttop.BX.ajax.runAction(\n\t\t\t\t'bitrix:tasks.scrum.' + controller + '.' + action,\n\t\t\t\t{\n\t\t\t\t\tdata: data\n\t\t\t\t}\n\t\t\t).then(resolve, reject);\n\t\t});\n\t}\n\n\tisNecessary(data: RequestParams): Promise\n\t{\n\t\treturn this.sendRequest('doD', 'isNecessary', data);\n\t}\n\n\tgetSettings(data: RequestParams): Promise\n\t{\n\t\treturn this.sendRequest('doD', 'getSettings', data);\n\t}\n\n\tgetChecklist(data: RequestParams): Promise\n\t{\n\t\treturn this.sendRequest('doD', 'getChecklist', data);\n\t}\n\n\tsaveSettings(data: RequestParams): Promise\n\t{\n\t\treturn this.sendRequest('doD', 'saveSettings', data);\n\t}\n\n\tgetList(data: RequestParams): Promise\n\t{\n\t\treturn this.sendRequest('doD', 'getList', data);\n\t}\n\n\tsaveList(data: RequestParams): Promise\n\t{\n\t\treturn this.sendRequest('doD', 'saveList', data);\n\t}\n\n\tcreateType(data): Promise\n\t{\n\t\treturn this.sendRequest('type', 'createType', data);\n\t}\n\n\tchangeTypeName(data): Promise\n\t{\n\t\treturn this.sendRequest('type', 'changeTypeName', data);\n\t}\n\n\tremoveType(data): Promise\n\t{\n\t\treturn this.sendRequest('type', 'removeType', data);\n\t}\n\n\tshowErrorAlert(response: ErrorResponse, alertTitle?: string)\n\t{\n\t\tif (Type.isUndefined(response.errors))\n\t\t{\n\t\t\tconsole.log(response);\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (response.errors.length)\n\t\t{\n\t\t\tconst firstError = response.errors.shift();\n\t\t\tif (firstError)\n\t\t\t{\n\t\t\t\tconst errorCode = (firstError.code ? firstError.code : '');\n\n\t\t\t\tconst message = firstError.message + ' ' + errorCode;\n\t\t\t\tconst title = (alertTitle ? alertTitle : Loc.getMessage('TSD_ERROR_POPUP_TITLE'));\n\n\t\t\t\ttop.BX.UI.Dialogs.MessageBox.alert(message, title);\n\t\t\t}\n\t\t}\n\t}\n}","import {Dom, Tag, Type, Loc, Event} from 'main.core';\nimport {BaseEvent} from 'main.core.events';\nimport {Loader} from 'main.loader';\n\nimport {ItemType, ItemTypeParams} from './item.type';\nimport {TypeStorage} from './type.storage';\nimport {Tabs} from './tabs';\n\nimport {RequestSender} from './request.sender';\n\ntype Params = {\n\trequestSender: RequestSender,\n\tgroupId: number,\n\ttaskId?: number\n}\n\nexport class Settings\n{\n\tconstructor(params: Params)\n\t{\n\t\tthis.requestSender = params.requestSender;\n\n\t\tthis.groupId = parseInt(params.groupId, 10);\n\t\tthis.taskId = parseInt(params.taskId, 10);\n\n\t\tthis.typeStorage = new TypeStorage();\n\t\tthis.tabs = new Tabs();\n\n\t\tthis.tabs.subscribe('switchType', this.onSwitchType.bind(this));\n\t\tthis.tabs.subscribe('createType', this.onCreateType.bind(this));\n\t\tthis.tabs.subscribe('changeTypeName', this.onChangeTypeName.bind(this));\n\t\tthis.tabs.subscribe('removeType', this.onRemoveType.bind(this));\n\t}\n\n\tisEmpty(): boolean\n\t{\n\t\treturn this.tabs.isEmpty();\n\t}\n\n\trenderContent(): Promise\n\t{\n\t\treturn this.requestSender.getSettings({\n\t\t\tgroupId: this.groupId\n\t\t})\n\t\t\t.then((response) => {\n\n\t\t\t\tconst types = Type.isArray(response.data.types) ? response.data.types : [];\n\n\t\t\t\tconst itemTypes = new Map();\n\n\t\t\t\ttypes.forEach((typeData: ItemTypeParams) => {\n\t\t\t\t\tconst itemType = new ItemType(typeData);\n\t\t\t\t\titemTypes.set(itemType.getId(), itemType);\n\t\t\t\t});\n\n\t\t\t\tthis.typeStorage.setTypes(itemTypes);\n\n\t\t\t\tthis.tabs.setTypeStorage(this.typeStorage);\n\t\t\t\tthis.tabs.setActiveType(this.typeStorage.getNextType());\n\n\t\t\t\tthis.addEmptyCreationType();\n\n\t\t\t\treturn this.render();\n\t\t\t})\n\t\t\t.catch((response) => {\n\t\t\t\tthis.requestSender.showErrorAlert(response);\n\t\t\t})\n\t\t;\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tconst currentType: ItemType = this.typeStorage.getNextType();\n\n\t\tthis.node = Tag.render`\n\t\t\t<div class=\"tasks-scrum-dod-settings\">\n\t\t\t\t<div class=\"tasks-scrum-dod-settings-container\">\n\t\t\t\t\t<div class=\"tasks-scrum-dod-settings-container-wrap\">\n\t\t\t\t\t\t<div class=\"tasks-scrum-dod-settings-container-shell\">\n\t\t\t\t\t\t\t${this.tabs.render()}\n\t\t\t\t\t\t\t<div class=\"tasks-scrum-dod-settings-container-sidebar-wrapper\">\n\t\t\t\t\t\t\t\t${this.renderContainer(currentType)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\treturn this.node;\n\t}\n\n\trenderContainer(type: ItemType): HTMLElement\n\t{\n\t\tif (this.tabs.isEmpty())\n\t\t{\n\t\t\treturn this.renderEmptyForm();\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn this.renderEditingForm(type);\n\t\t}\n\t}\n\n\trenderEditingForm(type: ItemType): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"ui-form\">\n\t\t\t\t<div class=\"ui-form-row\">\n\t\t\t\t\t<div class=\"ui-form-content\">\n\t\t\t\t\t\t${this.renderRequiredOption(type)}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"ui-form-row\">\n\t\t\t\t\t<div class=\"ui-form-content\">\n\t\t\t\t\t\t${this.renderParticipantsSelector()}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"ui-form-row\">\n\t\t\t\t\t<div class=\"ui-form-content ui-form-content-dod-list\"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\trenderEmptyForm(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"ui-form\">\n\t\t\t\t<div class=\"ui-form-row\">\n\t\t\t\t\t<div class=\"ui-form-content\">\n\t\t\t\t\t\t<div class=\"ui-form-row\">\n\t\t\t\t\t\t\t<div class=\"ui-ctl-label-text\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('TASKS_SCRUM_CREATE_TYPE_PROMPT')}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\trenderRequiredOption(type: ItemType): HTMLElement\n\t{\n\t\tconst node = Tag.render`\n\t\t\t<div class=\"ui-form-row\">\n\t\t\t\t<label class=\"ui-ctl ui-ctl-checkbox\">\n\t\t\t\t\t<input type=\"checkbox\" class=\"ui-ctl-element ui-form-content-required-option\">\n\t\t\t\t\t<div class=\"ui-ctl-label-text\">\n\t\t\t\t\t\t${Loc.getMessage('TASKS_SCRUM_DOD_OPTIONS_REQUIRED_LABEL')}\n\t\t\t\t\t</div>\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t`;\n\n\t\tconst checkbox = node.querySelector('.ui-form-content-required-option');\n\t\tcheckbox.checked = type.isDodRequired();\n\n\t\tEvent.bind(checkbox, 'click', () => {\n\t\t\tthis.updateActiveType();\n\t\t});\n\n\t\treturn node;\n\t}\n\n\trenderParticipantsSelector(): ?HTMLElement\n\t{\n\t\treturn ''; //todo tmp\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"ui-form-row\">\n\t\t\t\t<div class=\"ui-form-label\">\n\t\t\t\t\t<div class=\"ui-ctl-label-text\">\n\t\t\t\t\t\t${Loc.getMessage('TASKS_SCRUM_DOD_LABEL_USER_SELECTOR')}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"ui-form-content\">\n\t\t\t\t\t<div class=\"tasks-scrum-dod-settings-user-selector\"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tinitParticipantsSelector(type: ItemType)\n\t{\n\t\tconst participantsSelectorContainer = this.node.querySelector('.tasks-scrum-dod-settings-user-selector');\n\n\t\tif (Type.isNil(participantsSelectorContainer))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst selectorId = 'tasks-scrum-dod-settings-participants-selector-' + type.getId();\n\n\t\tthis.participantsSelector = new top.BX.UI.EntitySelector.TagSelector({\n\t\t\tid: selectorId,\n\t\t\tdialogOptions: {\n\t\t\t\tid: selectorId,\n\t\t\t\tcontext: 'TASKS',\n\t\t\t\tpreselectedItems: this.tabs.getActiveType().getParticipants(),\n\t\t\t\tentities: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'user',\n\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\tinviteEmployeeLink: false\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'project-roles',\n\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\tprojectId: this.groupId\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdynamicLoad: true\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t}\n\t\t});\n\n\t\tthis.participantsSelector.renderTo(participantsSelectorContainer);\n\t}\n\n\tbuildEditingForm(type: ItemType)\n\t{\n\t\tconst container = this.cleanTypeForm();\n\n\t\tDom.append(this.renderEditingForm(type), container);\n\n\t\tthis.initParticipantsSelector(type);\n\n\t\tconst listContainer = this.node.querySelector('.ui-form-content-dod-list');\n\n\t\tconst loader = this.showLoader(listContainer);\n\n\t\tthis.requestSender.getChecklist({\n\t\t\tgroupId: this.groupId,\n\t\t\ttypeId: type.getId()\n\t\t})\n\t\t.then((response) => {\n\t\t\tloader.hide();\n\t\t\ttop.BX.Runtime.html(listContainer, response.data.html);\n\t\t})\n\t\t.catch((response) => {\n\t\t\tloader.hide();\n\t\t\tthis.requestSender.showErrorAlert(response);\n\t\t});\n\t}\n\n\tbuildEmptyForm()\n\t{\n\t\tconst container = this.cleanTypeForm();\n\n\t\tDom.append(this.renderEmptyForm(), container);\n\t}\n\n\tonSwitchType(baseEvent: BaseEvent)\n\t{\n\t\tconst type: ItemType = baseEvent.getData();\n\t\tconst previousType: ?ItemType = this.tabs.getPreviousType();\n\n\t\tif (previousType)\n\t\t{\n\t\t\tthis.saveSettings(previousType)\n\t\t\t\t.then((response) => {\n\t\t\t\t\tconst updatedType: ItemTypeParams = response.data.type;\n\n\t\t\t\t\tpreviousType.setDodRequired(updatedType.dodRequired);\n\t\t\t\t\tpreviousType.setParticipants(updatedType.participants);\n\n\t\t\t\t\tthis.buildEditingForm(type);\n\t\t\t\t})\n\t\t\t;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.buildEditingForm(type);\n\t\t}\n\t}\n\n\tonCreateType(baseEvent: BaseEvent)\n\t{\n\t\tconst container = this.node.querySelector('.tasks-scrum-dod-settings-container-sidebar-wrapper');\n\n\t\tconst loader = this.showLoader(container);\n\n\t\tconst tmpType = baseEvent.getData();\n\n\t\tthis.requestSender.createType({\n\t\t\tgroupId: this.groupId,\n\t\t\tname: tmpType.getName(),\n\t\t\tsort: tmpType.getSort()\n\t\t})\n\t\t.then((response) => {\n\t\t\tloader.hide();\n\t\t\tconst createdType = new ItemType(response.data);\n\t\t\tthis.typeStorage.addType(createdType);\n\t\t\tthis.tabs.addType(createdType, tmpType);\n\t\t})\n\t\t.catch((response) => {\n\t\t\tloader.hide();\n\t\t\tthis.requestSender.showErrorAlert(response);\n\t\t});\n\t}\n\n\tonChangeTypeName(baseEvent: BaseEvent)\n\t{\n\t\tconst type = baseEvent.getData();\n\n\t\tthis.requestSender.changeTypeName({\n\t\t\tgroupId: this.groupId,\n\t\t\tid: type.getId(),\n\t\t\tname: type.getName()\n\t\t})\n\t\t.catch((response) => {\n\t\t\tthis.requestSender.showErrorAlert(response);\n\t\t});\n\t}\n\n\tonRemoveType(baseEvent: BaseEvent)\n\t{\n\t\tconst type = baseEvent.getData();\n\n\t\tthis.requestSender.removeType({\n\t\t\tgroupId: this.groupId,\n\t\t\tid: type.getId()\n\t\t})\n\t\t.then(() => {\n\t\t\tthis.typeStorage.removeType(type);\n\t\t\tif (this.tabs.isEmpty())\n\t\t\t{\n\t\t\t\tthis.buildEmptyForm();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tconst nextType = [...this.typeStorage.getTypes().values()]\n\t\t\t\t\t.find((type: ItemType) => !this.tabs.isEmptyType(type))\n\t\t\t\t;\n\t\t\t\tthis.tabs.switchToType(nextType);\n\t\t\t}\n\t\t})\n\t\t.catch((response) => {\n\t\t\tthis.requestSender.showErrorAlert(response);\n\t\t});\n\t}\n\n\tsaveSettings(inputType?: ItemType): Promise\n\t{\n\t\tif (this.tabs.isEmpty())\n\t\t{\n\t\t\treturn Promise.resolve();\n\t\t}\n\n\t\tconst type = inputType ? inputType : this.tabs.getActiveType();\n\n\t\tif (!(type instanceof ItemType))\n\t\t{\n\t\t\treturn Promise.resolve();\n\t\t}\n\n\t\treturn this.requestSender.saveSettings({\n\t\t\tgroupId: this.groupId,\n\t\t\ttypeId: type.getId(),\n\t\t\trequiredOption: this.getRequiredOptionValue(),\n\t\t\titems: this.getChecklistItems(),\n\t\t\tparticipants: this.getSelectedParticipants()\n\t\t})\n\t\t.catch((response) => {\n\t\t\tthis.requestSender.showErrorAlert(response);\n\t\t});\n\t}\n\n\tgetChecklistItems(): Array\n\t{\n\t\t/* eslint-disable */\n\t\tif (typeof top.BX.Tasks.CheckListInstance === 'undefined')\n\t\t{\n\t\t\treturn [];\n\t\t}\n\n\t\tconst treeStructure = top.BX.Tasks.CheckListInstance.getTreeStructure();\n\n\t\treturn treeStructure.getRequestData();\n\t\t/* eslint-enable */\n\t}\n\n\tgetSelectedParticipants(): Array\n\t{\n\t\tif (Type.isNil(this.participantsSelector))\n\t\t{\n\t\t\treturn [];\n\t\t}\n\n\t\tconst selectedParticipants = [];\n\n\t\tthis.participantsSelector.getTags()\n\t\t\t.forEach((tag) => {\n\t\t\t\tselectedParticipants.push({\n\t\t\t\t\tid: tag.getId(),\n\t\t\t\t\tentityId: tag.getEntityId()\n\t\t\t\t});\n\t\t\t})\n\t\t;\n\n\t\treturn selectedParticipants;\n\t}\n\n\tgetRequiredOptionValue(): string\n\t{\n\t\tconst requiredOption = this.node.querySelector('.ui-form-content-required-option');\n\n\t\treturn (requiredOption.checked === true ? 'Y' : 'N');\n\t}\n\n\tshowLoader(container: HTMLElement): Loader\n\t{\n\t\tconst listPosition = Dom.getPosition(container);\n\n\t\tconst loader = new Loader({\n\t\t\ttarget: container,\n\t\t\tsize: 60,\n\t\t\tmode: 'inline',\n\t\t\tcolor: 'rgba(82, 92, 105, 0.9)',\n\t\t\toffset: {\n\t\t\t\tleft: `${(listPosition.width / 2 - 30)}px`\n\t\t\t}\n\t\t});\n\n\t\tloader.show();\n\n\t\treturn loader;\n\t}\n\n\tgetActiveType(): ?ItemType\n\t{\n\t\treturn this.tabs.getActiveType();\n\t}\n\n\tupdateActiveType()\n\t{\n\t\tconst type = this.tabs.getActiveType();\n\n\t\ttype.setDodRequired(this.getRequiredOptionValue());\n\t}\n\n\tcleanTypeForm(): HTMLElement\n\t{\n\t\tconst container = this.node.querySelector('.tasks-scrum-dod-settings-container-sidebar-wrapper');\n\n\t\tDom.clean(container);\n\n\t\treturn container;\n\t}\n\n\taddEmptyCreationType()\n\t{\n\t\tconst itemType = new ItemType();\n\n\t\tthis.tabs.setEmptyType(itemType);\n\n\t\tthis.typeStorage.addType(itemType);\n\t}\n}","import {Loc, Tag, Text, Type, Event, Dom} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\nimport {Loader} from 'main.loader';\n\nimport {MessageBox} from 'ui.dialogs.messagebox';\n\nimport {Button} from 'ui.buttons';\n\nimport {RequestSender} from './request.sender';\nimport {TypeStorage} from './type.storage';\nimport {Tabs} from './tabs';\nimport {ItemType} from './item.type';\n\nimport type {ItemTypeParams} from './item.type';\n\ntype Params = {\n\trequestSender: RequestSender,\n\tgroupId: number,\n\ttaskId?: number,\n\tskipNotifications?: boolean\n}\n\ntype SettingsResponse = {\n\tdata: {\n\t\ttypes: Array<ItemTypeParams>,\n\t\tactiveTypeId: number\n\t}\n}\n\nexport class List extends EventEmitter\n{\n\tconstructor(params: Params)\n\t{\n\t\tsuper(params);\n\n\t\tthis.setEventNamespace('BX.Tasks.Scrum.Dod.List');\n\n\t\tthis.requestSender = params.requestSender;\n\n\t\tthis.groupId = parseInt(params.groupId, 10);\n\t\tthis.taskId = parseInt(params.taskId, 10);\n\n\t\tthis.skipNotifications = Type.isBoolean(params.skipNotifications) ? params.skipNotifications : false;\n\n\t\tthis.typeStorage = new TypeStorage();\n\t\tthis.tabs = new Tabs();\n\n\t\tthis.empty = true;\n\t\tthis.activeTypeData = null;\n\n\t\tthis.node = null;\n\t}\n\n\trenderContent(): Promise\n\t{\n\t\treturn this.requestSender.getSettings({\n\t\t\tgroupId: this.groupId,\n\t\t\ttaskId: this.taskId,\n\t\t\tsaveRequest: this.isSkipNotifications() ? 'Y' : 'N'\n\t\t})\n\t\t\t.then((response: SettingsResponse) => {\n\t\t\t\tconst types = Type.isArray(response.data.types) ? response.data.types : [];\n\t\t\t\tconst activeTypeId = (\n\t\t\t\t\tType.isInteger(response.data.activeTypeId)\n\t\t\t\t\t\t? parseInt(response.data.activeTypeId, 10)\n\t\t\t\t\t\t: 0\n\t\t\t\t);\n\n\t\t\t\tthis.empty = (types.length === 0);\n\n\t\t\t\tconst itemTypes = new Map();\n\n\t\t\t\ttypes.forEach((typeData: ItemTypeParams) => {\n\t\t\t\t\tconst itemType = new ItemType(typeData);\n\t\t\t\t\titemTypes.set(itemType.getId(), itemType);\n\t\t\t\t});\n\n\t\t\t\tthis.typeStorage.setTypes(itemTypes);\n\n\t\t\t\tthis.tabs.setTypeStorage(this.typeStorage);\n\n\t\t\t\tconst activeType = itemTypes.get(activeTypeId);\n\t\t\t\tif (Type.isUndefined(activeType))\n\t\t\t\t{\n\t\t\t\t\tthis.tabs.setActiveType(this.typeStorage.getNextType());\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.tabs.setActiveType(activeType);\n\t\t\t\t}\n\n\t\t\t\tif (this.isEmpty())\n\t\t\t\t{\n\t\t\t\t\tif (!this.isSkipNotifications())\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.emit('resolve');\n\t\t\t\t\t}\n\n\t\t\t\t\treturn this.renderEmpty();\n\t\t\t\t}\n\n\t\t\t\treturn this.render();\n\t\t\t})\n\t\t\t.catch((response) => {\n\t\t\t\tthis.requestSender.showErrorAlert(response);\n\t\t\t})\n\t\t;\n\t}\n\n\trenderList()\n\t{\n\t\tconst listNode = this.node.querySelector('.tasks-scrum-dod-checklist');\n\n\t\tDom.clean(listNode);\n\n\t\tconst loader = this.showLoader(listNode);\n\n\t\tthis.requestSender.getList({\n\t\t\tgroupId: this.groupId,\n\t\t\ttaskId: this.taskId,\n\t\t\ttypeId: this.getActiveType().getId()\n\t\t})\n\t\t\t.then((response) => {\n\t\t\t\tloader.hide();\n\t\t\t\ttop.BX.Runtime.html(listNode, response.data.html);\n\t\t\t})\n\t\t\t.catch((response) => {\n\t\t\t\tthis.requestSender.showErrorAlert(response);\n\t\t\t})\n\t\t;\n\t}\n\n\trenderEmpty(): HTMLElement\n\t{\n\t\tconst node = Tag.render`\n\t\t\t\t<div class=\"ui-form ui-form-line tasks-scrum-dod-form\">\n\t\t\t\t\t<div class=\"ui-form-row\">\n\t\t\t\t\t\t<div class=\"ui-form-label\">\n\t\t\t\t\t\t\t<div class=\"ui-ctl-label-text\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('TASKS_SCRUM_DOD_LABEL_EMPTY')}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\n\t\tEvent.bind(node.querySelector('span'), 'click', () => this.emit('showSettings'));\n\n\t\treturn node;\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tconst activeType = this.getActiveType();\n\n\t\tconst renderOption = (typeData: ItemTypeParams) => {\n\t\t\tconst selected = activeType.getId() === typeData.id ? 'selected' : '';\n\n\t\t\treturn `<option value=\"${parseInt(typeData.id, 10)}\" ${selected}>${Text.encode(typeData.name)}</option>`;\n\t\t};\n\n\t\tthis.node = Tag.render`\n\t\t\t<div class=\"ui-form ui-form-line tasks-scrum-dod-form\">\n\t\t\t\t<div class=\"ui-form-row\">\n\t\t\t\t\t<div class=\"ui-form-label\">\n\t\t\t\t\t\t<div class=\"ui-ctl-label-text\">\n\t\t\t\t\t\t\t${Loc.getMessage('TASKS_SCRUM_DOD_LABEL_TYPES')}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"ui-form-content\">\n\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-after-icon ui-ctl-dropdown\">\n\t\t\t\t\t\t\t<div class=\"ui-ctl-after ui-ctl-icon-angle\"></div>\n\t\t\t\t\t\t\t<select class=\"ui-ctl-element tasks-scrum-dod-types\">\n\t\t\t\t\t\t\t\t${\n\t\t\t\t\t\t\t\t\t[...this.typeStorage.getTypes().values()]\n\t\t\t\t\t\t\t\t\t\t.map((typeData: ItemTypeParams) => renderOption(typeData)).join('')\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"ui-form-row\">\n\t\t\t\t\t<div class=\"ui-form-content tasks-scrum-dod-checklist\"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\tconst typeSelector = this.node.querySelector('.tasks-scrum-dod-types');\n\n\t\tEvent.bind(typeSelector, 'change', (event) => {\n\t\t\tconst typeId = parseInt(event.target.value, 10);\n\t\t\tthis.tabs.setActiveType(this.typeStorage.getType(typeId));\n\t\t\tthis.renderList();\n\t\t});\n\n\t\treturn this.node;\n\t}\n\n\tsave()\n\t{\n\t\tconst activeType = this.getActiveType();\n\n\t\tthis.requestSender.saveList({\n\t\t\ttypeId: activeType.getId(),\n\t\t\ttaskId: this.taskId,\n\t\t\tgroupId: this.groupId,\n\t\t\titems: this.getListItems()\n\t\t})\n\t\t\t.then(() => {\n\t\t\t\tif (this.isSkipNotifications())\n\t\t\t\t{\n\t\t\t\t\tthis.solve();\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tif (this.isListRequired(this.getActiveType()))\n\t\t\t\t\t{\n\t\t\t\t\t\tif (this.isAllToggled())\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.emit('resolve');\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.emit('reject');\n\n\t\t\t\t\t\t\tthis.showInfoPopup();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tif (this.isAllToggled())\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.emit('resolve');\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.showConfirmPopup();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch((response) => {\n\t\t\t\tthis.requestSender.showErrorAlert(response);\n\t\t\t})\n\t\t;\n\t}\n\n\tisSkipNotifications(): boolean\n\t{\n\t\treturn this.skipNotifications;\n\t}\n\n\tisEmpty(): boolean\n\t{\n\t\treturn this.empty;\n\t}\n\n\tgetActiveType(): ?ItemType\n\t{\n\t\treturn this.tabs.getActiveType();\n\t}\n\n\tisListRequired(type: ItemType): boolean\n\t{\n\t\treturn type.isDodRequired();\n\t}\n\n\tsolve()\n\t{\n\t\tif (this.isListRequired(this.getActiveType()))\n\t\t{\n\t\t\tif (this.isAllToggled())\n\t\t\t{\n\t\t\t\tthis.emit('resolve');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.emit('reject');\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.emit('resolve');\n\t\t}\n\t}\n\n\tgetListItems(): Array\n\t{\n\t\t/* eslint-disable */\n\t\tif (typeof top.BX.Tasks.CheckListInstance === 'undefined')\n\t\t{\n\t\t\treturn [];\n\t\t}\n\n\t\tconst treeStructure = top.BX.Tasks.CheckListInstance.getTreeStructure();\n\n\t\treturn treeStructure.getRequestData();\n\t\t/* eslint-enable */\n\t}\n\n\tisAllToggled(): boolean\n\t{\n\t\t/* eslint-disable */\n\t\tif (typeof top.BX.Tasks.CheckListInstance === 'undefined')\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tlet isAllToggled = true;\n\n\t\tconst treeStructure = top.BX.Tasks.CheckListInstance.getTreeStructure();\n\n\t\ttreeStructure.getDescendants()\n\t\t\t.forEach((checkList) => {\n\t\t\t\tif (checkList.countTotalCount() > 0 && !checkList.checkIsComplete())\n\t\t\t\t{\n\t\t\t\t\tisAllToggled = false;\n\t\t\t\t}\n\t\t\t})\n\t\t;\n\n\t\treturn isAllToggled;\n\t\t/* eslint-enable */\n\t}\n\n\tshowInfoPopup()\n\t{\n\t\tMessageBox.alert(Loc.getMessage('TASKS_SCRUM_DOD_INFO_TEXT'));\n\t}\n\n\tshowConfirmPopup()\n\t{\n\t\tconst messageBox = new MessageBox({\n\t\t\tmessage: Loc.getMessage('TASKS_SCRUM_DOD_CONFIRM_TEXT_COMPLETE'),\n\t\t\tmodal: true,\n\t\t\tbuttons: [\n\t\t\t\tnew Button({\n\t\t\t\t\ttext: Loc.getMessage('TASKS_SCRUM_DOD_CONFIRM_COMPLETE_BUTTON_TEXT'),\n\t\t\t\t\tcolor: Button.Color.SUCCESS,\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tclick: () => {\n\t\t\t\t\t\t\tthis.emit('resolve');\n\t\t\t\t\t\t\tmessageBox.close();\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t}),\n\t\t\t\tnew Button({\n\t\t\t\t\ttext: Loc.getMessage('TASKS_SCRUM_DOD_CONFIRM_SAVE_BUTTON_TEXT'),\n\t\t\t\t\tcolor: Button.Color.LINK,\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tclick: () => {\n\t\t\t\t\t\t\tthis.emit('reject');\n\t\t\t\t\t\t\tmessageBox.close();\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t}),\n\t\t\t],\n\t\t});\n\n\t\tmessageBox.show();\n\t}\n\n\tshowLoader(container: HTMLElement): Loader\n\t{\n\t\tconst listPosition = Dom.getPosition(container);\n\n\t\tconst loader = new Loader({\n\t\t\ttarget: container,\n\t\t\tsize: 60,\n\t\t\tmode: 'inline',\n\t\t\tcolor: 'rgba(82, 92, 105, 0.9)',\n\t\t\toffset: {\n\t\t\t\tleft: `${(listPosition.width / 2 - 30)}px`\n\t\t\t}\n\t\t});\n\n\t\tloader.show();\n\n\t\treturn loader;\n\t}\n}","import {Loc, Type} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\n\nimport {Layout} from 'ui.sidepanel.layout';\n\nimport 'ui.layout-form';\nimport 'ui.forms';\n\nimport {Settings} from './settings';\nimport {List} from './list';\nimport {RequestSender} from './request.sender';\n\nimport '../css/base.css';\n\ntype Params = {\n\tview: 'settings' | 'list',\n\tgroupId: number,\n\ttaskId?: number,\n\tskipNotifications?: boolean\n}\n\nexport class Dod extends EventEmitter\n{\n\tconstructor(params: Params)\n\t{\n\t\tsuper(params);\n\n\t\tthis.setEventNamespace('BX.Tasks.Scrum.Dod');\n\n\t\tthis.view = params.view;\n\n\t\tthis.groupId = parseInt(params.groupId, 10);\n\t\tthis.taskId = parseInt(params.taskId, 10);\n\n\t\t/* eslint-disable */\n\t\tthis.sidePanelManager = BX.SidePanel.Instance;\n\t\t/* eslint-enable */\n\n\t\tthis.requestSender = new RequestSender();\n\n\t\tthis.settings = new Settings({\n\t\t\trequestSender: this.requestSender,\n\t\t\tgroupId: this.groupId,\n\t\t\ttaskId: this.taskId\n\t\t});\n\n\t\tthis.list = new List({\n\t\t\trequestSender: this.requestSender,\n\t\t\tgroupId: this.groupId,\n\t\t\ttaskId: this.taskId,\n\t\t\tskipNotifications: params.skipNotifications\n\t\t});\n\n\t\tthis.list.subscribe('resolve', () => this.emit('resolve'));\n\t\tthis.list.subscribe('reject', () => this.emit('reject'));\n\t\tthis.list.subscribe('showSettings', () => {\n\t\t\tthis.sidePanelManager.close(false, () => this.showSettings());\n\t\t});\n\t}\n\n\tisNecessary(): Promise\n\t{\n\t\treturn this.requestSender.isNecessary({\n\t\t\tgroupId: this.groupId,\n\t\t\ttaskId: this.taskId\n\t\t})\n\t\t\t.then((response) => {\n\t\t\t\treturn response.data;\n\t\t\t})\n\t\t\t.catch((response) => {\n\t\t\t\tthis.requestSender.showErrorAlert(response);\n\t\t\t})\n\t\t;\n\t}\n\n\tshow()\n\t{\n\t\tswitch(this.view)\n\t\t{\n\t\t\tcase 'settings':\n\t\t\t\tthis.showSettings();\n\t\t\t\tbreak;\n\t\t\tcase 'list':\n\t\t\t\tthis.showList();\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tshowSettings()\n\t{\n\t\tthis.sidePanelManager.open(\n\t\t\t'tasks-scrum-dod-settings-side-panel',\n\t\t\t{\n\t\t\t\tcacheable: false,\n\t\t\t\twidth: 1000,\n\t\t\t\tcontentCallback: () => {\n\t\t\t\t\treturn Layout.createContent({\n\t\t\t\t\t\textensions: ['tasks.scrum.dod', 'ui.entity-selector'],\n\t\t\t\t\t\ttitle: Loc.getMessage('TASKS_SCRUM_DOD_TITLE'),\n\t\t\t\t\t\tcontent: this.createSettingsContent.bind(this),\n\t\t\t\t\t\tdesign: {\n\t\t\t\t\t\t\tsection: false\n\t\t\t\t\t\t},\n\t\t\t\t\t\tbuttons: []\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tevents: {\n\t\t\t\t\tonLoad: this.onLoadSettings.bind(this),\n\t\t\t\t\tonClose: this.onCloseSettings.bind(this)\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t}\n\n\tshowList()\n\t{\n\t\tthis.sidePanelManager.open(\n\t\t\t'tasks-scrum-dod-list-side-panel',\n\t\t\t{\n\t\t\t\tcacheable: false,\n\t\t\t\twidth: 800,\n\t\t\t\tcontentCallback: () => {\n\t\t\t\t\treturn Layout.createContent({\n\t\t\t\t\t\textensions: ['tasks.scrum.dod'],\n\t\t\t\t\t\ttitle: Loc.getMessage('TASKS_SCRUM_DOD_TITLE'),\n\t\t\t\t\t\tcontent: this.createListContent.bind(this),\n\t\t\t\t\t\tdesign: {\n\t\t\t\t\t\t\tsection: false\n\t\t\t\t\t\t},\n\t\t\t\t\t\tbuttons: ({cancelButton, SaveButton}) => {\n\t\t\t\t\t\t\treturn [\n\t\t\t\t\t\t\t\tnew SaveButton({\n\t\t\t\t\t\t\t\t\ttext: this.getListButtonText(),\n\t\t\t\t\t\t\t\t\tonclick: this.onSaveList.bind(this)\n\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\tcancelButton\n\t\t\t\t\t\t\t];\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tevents: {\n\t\t\t\t\tonLoad: this.onLoadList.bind(this)\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t}\n\n\tcreateSettingsContent(): Promise\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tthis.settings.renderContent()\n\t\t\t\t.then((content: HTMLElement) => {\n\t\t\t\t\tresolve(content);\n\t\t\t\t})\n\t\t\t;\n\t\t});\n\t}\n\n\tcreateListContent(): Promise\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tthis.list.renderContent()\n\t\t\t\t.then((content: HTMLElement) => {\n\t\t\t\t\tresolve(content);\n\t\t\t\t})\n\t\t\t;\n\t\t});\n\t}\n\n\tonLoadSettings()\n\t{\n\t\tif (!this.settings.isEmpty())\n\t\t{\n\t\t\tthis.settings.buildEditingForm(this.settings.getActiveType());\n\t\t}\n\t}\n\n\tonLoadList()\n\t{\n\t\tif (this.list.isEmpty())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.list.renderList();\n\t}\n\n\tonCloseSettings()\n\t{\n\t\tthis.settings.saveSettings()\n\t\t\t.then(() => {})\n\t\t\t.catch(() => {})\n\t\t;\n\t}\n\n\tonSaveList()\n\t{\n\t\tif (this.list.isEmpty())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.list.save();\n\n\t\tthis.sidePanelManager.close(false);\n\t}\n\n\tgetListButtonText(): string\n\t{\n\t\tif (this.list.isSkipNotifications())\n\t\t{\n\t\t\treturn Loc.getMessage('TASKS_SCRUM_DOD_CONFIRM_SAVE_BUTTON_TEXT')\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn Loc.getMessage('TASKS_SCRUM_DOD_CONFIRM_COMPLETE_BUTTON_TEXT')\n\t\t}\n\t}\n}"],"names":["ItemType","params","setId","id","setName","name","setSort","sort","setDodRequired","dodRequired","setParticipants","participants","Type","isInteger","parseInt","isString","Text","getRandom","value","isArray","forEach","participant","push","entityId","TypeStorage","types","values","next","type","set","getId","typeId","get","Tabs","setEventNamespace","tabNodes","Map","activeType","previousType","typeStorage","sidebarClass","node","Tag","render","getTypes","map","renderTab","size","isEmptyType","addNode","Loc","getMessage","Event","bind","createType","tabClass","isActiveType","tabNode","encode","getName","event","edit","target","classList","contains","remove","switchType","changeTypeName","removeType","newType","tmpType","Dom","insertBefore","lastElementChild","typeNode","savePrevious","removeClass","addClass","isEmpty","setPreviousType","getActiveType","setActiveType","emit","nameNode","input","querySelector","textContent","replace","trim","isComposing","keyCode","blur","focus","inputNode","setSelectionRange","length","top","BX","UI","Dialogs","MessageBox","confirm","messageBox","close","emptyType","EventEmitter","RequestSender","controller","action","data","Promise","resolve","reject","ajax","runAction","then","sendRequest","response","alertTitle","isUndefined","errors","console","log","firstError","shift","errorCode","code","message","title","alert","Settings","requestSender","groupId","taskId","tabs","subscribe","onSwitchType","onCreateType","onChangeTypeName","onRemoveType","getSettings","itemTypes","typeData","itemType","setTypes","setTypeStorage","getNextType","addEmptyCreationType","showErrorAlert","currentType","renderContainer","renderEmptyForm","renderEditingForm","renderRequiredOption","renderParticipantsSelector","checkbox","checked","isDodRequired","updateActiveType","participantsSelectorContainer","isNil","selectorId","participantsSelector","EntitySelector","TagSelector","dialogOptions","context","preselectedItems","getParticipants","entities","options","inviteEmployeeLink","projectId","dynamicLoad","renderTo","container","cleanTypeForm","append","initParticipantsSelector","listContainer","loader","showLoader","getChecklist","hide","Runtime","html","baseEvent","getData","getPreviousType","saveSettings","updatedType","buildEditingForm","getSort","createdType","addType","buildEmptyForm","nextType","find","switchToType","inputType","requiredOption","getRequiredOptionValue","items","getChecklistItems","getSelectedParticipants","Tasks","CheckListInstance","treeStructure","getTreeStructure","getRequestData","selectedParticipants","getTags","tag","getEntityId","listPosition","getPosition","Loader","mode","color","offset","left","width","show","clean","setEmptyType","List","skipNotifications","isBoolean","empty","activeTypeData","saveRequest","isSkipNotifications","activeTypeId","renderEmpty","listNode","getList","renderOption","selected","join","typeSelector","getType","renderList","saveList","getListItems","solve","isListRequired","isAllToggled","showInfoPopup","showConfirmPopup","getDescendants","checkList","countTotalCount","checkIsComplete","modal","buttons","Button","text","Color","SUCCESS","events","click","LINK","Dod","view","sidePanelManager","SidePanel","Instance","settings","list","showSettings","isNecessary","showList","open","cacheable","contentCallback","Layout","createContent","extensions","content","createSettingsContent","design","section","onLoad","onLoadSettings","onClose","onCloseSettings","createListContent","cancelButton","SaveButton","getListButtonText","onclick","onSaveList","onLoadList","renderContent","save"],"mappings":"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"}