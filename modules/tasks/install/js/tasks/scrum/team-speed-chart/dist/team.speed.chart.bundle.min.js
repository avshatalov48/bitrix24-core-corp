this.BX=this.BX||{};this.BX.Tasks=this.BX.Tasks||{};(function(e,t,a,r,s){"use strict";function n(){var e=babelHelpers.taggedTemplateLiteral(['<div class="tasks-scrum-sprint-team-speed-chart"></div>']);n=function t(){return e};return e}var i=function(){function e(t){babelHelpers.classCallCheck(this,e);this.groupId=parseInt(t.groupId,10);this.sidePanelManager=BX.SidePanel.Instance;this.chart=null;this.chartData=null}babelHelpers.createClass(e,[{key:"show",value:function e(){var a=this;this.sidePanelManager.open("tasks-scrum-sprint-team-speed-chart-side-panel",{cacheable:false,events:{onLoad:this.onSidePanelLoad.bind(this),onCloseComplete:this.onSidePanelAfterClose.bind(this)},contentCallback:function e(){return s.Layout.createContent({extensions:["tasks.scrum.team-speed-chart"],title:t.Loc.getMessage("TASKS_SCRUM_TEAM_SPEED_CHART_TITLE"),content:a.createContent.bind(a),design:{section:false},buttons:[]})}})}},{key:"onSidePanelLoad",value:function e(t){var a=this;var r=t.getSlider();setTimeout(function(){a.createChart(r.getContainer().querySelector(".tasks-scrum-sprint-team-speed-chart"),a.chartData)},300)}},{key:"onSidePanelAfterClose",value:function e(){this.destroyChart()}},{key:"createContent",value:function e(){var a=this;return new Promise(function(e,r){t.ajax.runAction("bitrix:tasks.scrum.sprint.getTeamSpeedChartData",{data:{groupId:a.groupId}}).then(function(t){a.chartData=t.data;e(a.render())})})}},{key:"render",value:function e(){return t.Tag.render(n())}},{key:"createChart",value:function e(a,s){window.am4core.useTheme(r);this.chart=window.am4core.create(a,am4charts.XYChart);this.chart.data=s;this.chart.paddingRight=40;this.chart.scrollbarX=new window.am4core.Scrollbar;this.chart.scrollbarX.parent=this.chart.bottomAxesContainer;this.createAxises();this.createColumn("plan",t.Loc.getMessage("TASKS_SCRUM_TEAM_SPEED_CHART_PLAN_COLUMN"),"#2882b3");this.createColumn("done",t.Loc.getMessage("TASKS_SCRUM_TEAM_SPEED_CHART_DONE_COLUMN"),"#9c1f1f");this.createLegend()}},{key:"createAxises",value:function e(){var t=this.chart.xAxes.push(new am4charts.CategoryAxis);t.dataFields.category="sprintName";t.renderer.grid.template.location=0;var a=t.renderer.labels.template;a.wrap=true;a.maxWidth=120;var r=this.chart.yAxes.push(new am4charts.ValueAxis);r.min=0}},{key:"createColumn",value:function e(t,a,r){var s=this.chart.series.push(new am4charts.ColumnSeries);s.dataFields.valueY=t;s.dataFields.categoryX="sprintName";s.name=a;s.stroke=window.am4core.color(r);s.fill=window.am4core.color(r);return s}},{key:"createLegend",value:function e(){this.chart.legend=new am4charts.Legend;this.chart.legend.position="bottom";this.chart.legend.paddingBottom=20;this.chart.legend.itemContainers.template.clickable=false}},{key:"destroyChart",value:function e(){if(this.chart){this.chart.dispose()}}}]);return e}();e.TeamSpeedChart=i})(this.BX.Tasks.Scrum=this.BX.Tasks.Scrum||{},BX,BX,BX,BX.UI.SidePanel);
//# sourceMappingURL=team.speed.chart.bundle.map.js