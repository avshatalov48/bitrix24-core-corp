this.BX=this.BX||{};(function(e,s,a,t){"use strict";var l=babelHelpers.classPrivateFieldLooseKey("params");var i=babelHelpers.classPrivateFieldLooseKey("action");var r=babelHelpers.classPrivateFieldLooseKey("data");var o=babelHelpers.classPrivateFieldLooseKey("title");var c=babelHelpers.classPrivateFieldLooseKey("forAll");var b=babelHelpers.classPrivateFieldLooseKey("step");var _=babelHelpers.classPrivateFieldLooseKey("requestStopFunction");var d=babelHelpers.classPrivateFieldLooseKey("process");var P=babelHelpers.classPrivateFieldLooseKey("getProcess");var T=babelHelpers.classPrivateFieldLooseKey("getTotalElements");var p=babelHelpers.classPrivateFieldLooseKey("allSteps");var O=babelHelpers.classPrivateFieldLooseKey("getTitle");class A extends a.EventEmitter{constructor(e){var s;super();Object.defineProperty(this,O,{value:v});Object.defineProperty(this,p,{value:n});Object.defineProperty(this,T,{value:L});Object.defineProperty(this,P,{value:S});Object.defineProperty(this,l,{writable:true,value:void 0});Object.defineProperty(this,i,{writable:true,value:void 0});Object.defineProperty(this,r,{writable:true,value:void 0});Object.defineProperty(this,o,{writable:true,value:null});Object.defineProperty(this,c,{writable:true,value:false});Object.defineProperty(this,b,{writable:true,value:void 0});Object.defineProperty(this,_,{writable:true,value:void 0});Object.defineProperty(this,d,{writable:true,value:null});this.setEventNamespace("BX.Tasks.GroupActionsStepper");babelHelpers.classPrivateFieldLooseBase(this,l)[l]=e;babelHelpers.classPrivateFieldLooseBase(this,i)[i]=e.action;babelHelpers.classPrivateFieldLooseBase(this,r)[r]=e.data;babelHelpers.classPrivateFieldLooseBase(this,b)[b]=(s=e.step)!=null?s:20;babelHelpers.classPrivateFieldLooseBase(this,_)[_]=e.requestStopFunction;babelHelpers.classPrivateFieldLooseBase(this,c)[c]=babelHelpers.classPrivateFieldLooseBase(this,r)[r].forAll==="Y";babelHelpers.classPrivateFieldLooseBase(this,o)[o]=babelHelpers.classPrivateFieldLooseBase(this,O)[O](babelHelpers.classPrivateFieldLooseBase(this,i)[i]);babelHelpers.classPrivateFieldLooseBase(this,d)[d]=babelHelpers.classPrivateFieldLooseBase(this,P)[P]()}showDialog(){babelHelpers.classPrivateFieldLooseBase(this,d)[d].showDialog();return babelHelpers.classPrivateFieldLooseBase(this,d)[d]}closeDialog(){babelHelpers.classPrivateFieldLooseBase(this,d)[d].closeDialog();return this}}function S(){if(!babelHelpers.classPrivateFieldLooseBase(this,d)[d]){babelHelpers.classPrivateFieldLooseBase(this,d)[d]=new t.Process({id:"TaskListGroupActionsStepper",controller:A.ACTION_CONTROLLER,messages:{DialogTitle:s.Loc.getMessage("TASKS_GRID_GROUP_ACTION_NAME"),DialogSummary:s.Loc.getMessage("TASKS_GRID_GROUP_ACTION_DESCRIPTION"),RequestCanceling:s.Loc.getMessage("TASKS_GRID_GROUP_ACTION_CANCELING")},showButtons:{start:true,stop:true,close:true},dialogMaxWidth:600,popupOptions:{resizable:false,draggable:false,disableScroll:true}});if(babelHelpers.classPrivateFieldLooseBase(this,c)[c]){babelHelpers.classPrivateFieldLooseBase(this,T)[T]()}babelHelpers.classPrivateFieldLooseBase(this,p)[p]()}return babelHelpers.classPrivateFieldLooseBase(this,d)[d]}function L(){babelHelpers.classPrivateFieldLooseBase(this,r)[r].nPageSize=babelHelpers.classPrivateFieldLooseBase(this,b)[b];delete babelHelpers.classPrivateFieldLooseBase(this,r)[r].selectedIds;delete babelHelpers.classPrivateFieldLooseBase(this,r)[r].forAll;babelHelpers.classPrivateFieldLooseBase(this,d)[d].addQueueAction({title:s.Loc.getMessage("TASKS_GRID_GROUP_ACTION_COUNTING_ELEMENTS_PROGRESS"),action:A.ACTION_CONTROLLER_COUNT_TASKS,handlers:{StepCompleted(e,s){if(e===t.ProcessResultStatus.completed){const e=this.getParam("data")||[];if(s.TOTAL_ITEMS){e.totalItems=parseInt(s.TOTAL_ITEMS,10)}this.setParam("data",e)}}}})}function n(){const e=babelHelpers.classPrivateFieldLooseBase(this,_)[_];babelHelpers.classPrivateFieldLooseBase(this,d)[d].setHandler(t.ProcessCallback.StateChanged,(function(s){if(s===t.ProcessResultStatus.completed){e();this.closeDialog()}})).setHandler(t.ProcessCallback.RequestStop,(function(s){setTimeout(BX.delegate((function(){e();this.closeDialog()}),this),2e3)})).addQueueAction({title:babelHelpers.classPrivateFieldLooseBase(this,o)[o],action:babelHelpers.classPrivateFieldLooseBase(this,i)[i],handlers:{StepCompleted(s,a){if(s===t.ProcessResultStatus.progress){const e=this.getParam("data")||[];if(a.PROCESSED_ITEMS){e.processedItems=parseInt(a.PROCESSED_ITEMS,10)}this.setParam("data",e)}if(s===t.ProcessState.error){e();this.setMessage("RequestError",a.ERRORS);this.getDialog().setWarning(a.WARNING_TEXT,true)}}}}).setParam("data",babelHelpers.classPrivateFieldLooseBase(this,r)[r])}function v(e){let a="";switch(e){case"unmute":a=s.Loc.getMessage("TASKS_GRID_GROUP_ACTION_NAME_UNMUTE");break;case"mute":a=s.Loc.getMessage("TASKS_GRID_GROUP_ACTION_NAME_MUTE");break;case"ping":a=s.Loc.getMessage("TASKS_GRID_GROUP_ACTION_NAME_PING");break;case"complete":a=s.Loc.getMessage("TASKS_GRID_GROUP_ACTION_NAME_COMPLETE");break;case"setdeadline":a=s.Loc.getMessage("TASKS_GRID_GROUP_ACTION_NAME_SETDEADLINE");break;case"adjustdeadline":case"substractdeadline":a=s.Loc.getMessage("TASKS_GRID_GROUP_ACTION_NAME_ADJUSTDEADLINE");break;case"settaskcontrol":if(babelHelpers.classPrivateFieldLooseBase(this,r)[r].taskControlState==="Y"){a=s.Loc.getMessage("TASKS_GRID_GROUP_ACTION_NAME_SETTASKCONTROL_YES")}else{a=s.Loc.getMessage("TASKS_GRID_GROUP_ACTION_NAME_SETTASKCONTROL")}break;case"setresponsible":a=s.Loc.getMessage("TASKS_GRID_GROUP_ACTION_NAME_SETRESPONSIBLE");break;case"setoriginator":a=s.Loc.getMessage("TASKS_GRID_GROUP_ACTION_NAME_SETORIGINATOR");break;case"addauditor":a=s.Loc.getMessage("TASKS_GRID_GROUP_ACTION_NAME_ADDAUDITOR");break;case"addaccomplice":a=s.Loc.getMessage("TASKS_GRID_GROUP_ACTION_NAME_ADDACCOMPLICE");break;case"addtofavorite":a=s.Loc.getMessage("TASKS_GRID_GROUP_ACTION_NAME_ADDTOFAVORITE");break;case"removefromfavorite":a=s.Loc.getMessage("TASKS_GRID_GROUP_ACTION_NAME_REMOVEFROMFAVORITE");break;case"setgroup":a=s.Loc.getMessage("TASKS_GRID_GROUP_ACTION_NAME_SETGROUP");break;case"setflow":a=s.Loc.getMessage("TASKS_GRID_GROUP_ACTION_NAME_SETFLOW");break;case"delete":a=s.Loc.getMessage("TASKS_GRID_GROUP_ACTION_NAME_DELETE");break;default:a=s.Loc.getMessage("TASKS_GRID_GROUP_ACTION_NONE")}return a}A.ACTION_CONTROLLER="tasks.task.action.group";A.ACTION_CONTROLLER_COUNT_TASKS="getTotalCountTasks";e.GroupActionsStepper=A})(this.BX.Tasks=this.BX.Tasks||{},BX,BX.Event,BX.UI.StepProcessing);
//# sourceMappingURL=group-actions-stepper.bundle.map.js