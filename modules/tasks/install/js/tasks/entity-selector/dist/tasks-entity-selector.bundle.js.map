{"version":3,"file":"tasks-entity-selector.bundle.js","sources":["../src/footer.js"],"sourcesContent":["import { DefaultFooter, Dialog } from 'ui.entity-selector';\nimport { Loc, Tag } from 'main.core';\n\nexport default class Footer extends DefaultFooter\n{\n\tconstructor(dialog: Dialog, options: { [option: string]: any })\n\t{\n\t\tsuper(dialog, options);\n\n\t\tthis.userId = options.userId ? options.userId.toString() : BX.message('USER_ID');\n\t\tthis.taskId = options.taskId ? options.taskId.toString() : 0;\n\t\tthis.groupId = options.groupId ? options.groupId.toString() : 0;\n\t}\n\n\tgetContent(): HTMLElement | HTMLElement[] | string | null\n\t{\n\t\tif (this.#isTaskTemplateFooter())\n\t\t{\n\t\t\treturn this.#renderTasksTemplateFooter();\n\t\t}\n\n\t\treturn this.#renderTasksTagFooter();\n\t}\n\n\t#isTaskTemplateFooter(): boolean\n\t{\n\t\treturn [...this.dialog.entities.keys()][0] === 'task-template';\n\t}\n\n\t#renderTasksTagFooter(): HTMLElement\n\t{\n\t\tlet url = '/company/personal/user/' + this.userId + '/tasks/tags/';\n\t\tconst task = this.taskId;\n\t\tconst group = this.groupId;\n\t\tif (group !== 0)\n\t\t{\n\t\t\turl = '/company/personal/user/' + this.userId + '/tasks/tags/?GROUP_ID=' + group;\n\t\t}\n\t\treturn this.cache.remember('content', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"tags-widget-custom-footer\">\n\t\t\t\t\t<a class=\"ui-selector-footer-link ui-selector-footer-link-add\"  \n\t\t\t\t\t\tid=\"tags-widget-custom-footer-add-new\" hidden=\"true\">\n\t\t\t\t\t\t\t${Loc.getMessage('TASKS_ENTITY_SELECTOR_TAG_FOOTER_CREATE')}\n\t\t\t\t\t</a>\n\t\t\t\t\t<span class=\"ui-selector-footer-conjunction\" \n\t\t\t\t\t\tid=\"tags-widget-custom-footer-conjunction\" hidden=\"true\">\n\t\t\t\t\t\t\t${Loc.getMessage('TASKS_ENTITY_SELECTOR_TAG_FOOTER_OR')}\n\t\t\t\t\t</span>\n\t\t\t\t\t<a class=\"ui-selector-footer-link\" \n\t\t\t\t\t\tonclick=\"BX.SidePanel.Instance.open(\\'${url}\\', {\n\t\t\t\t\t\t\t\t\twidth: 1000,\n\t\t\t\t\t\t\t\t\trequestMethod: 'post',\n\t\t\t\t\t\t\t\t\trequestParams: {\n\t\t\t\t\t\t\t\t\t\ttaskId: ${task},\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\">\n\t\t\t\t\t\t\t${Loc.getMessage('TASKS_ENTITY_SELECTOR_TAG_FOOTER_GET_TAG_SLIDER')}\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\t#renderTasksTemplateFooter(): HTMLElement | null\n\t{\n\t\tif (!this.options.canCreateTemplate)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\treturn Tag.render`\n\t\t\t<a class=\"ui-selector-footer-link ui-selector-footer-link-add\" href=\"${this.options.templateAddUrl}\">\n\t\t\t\t${Loc.getMessage('TASKS_ENTITY_SELECTOR_TEMPLATE_FOOTER_CREATE_TEMPLATE')}\n\t\t\t</a>\n\t\t`;\n\t}\n}"],"names":["Footer","dialog","options","userId","toString","BX","message","taskId","groupId","DefaultFooter","entities","keys","url","task","group","cache","remember","Tag","render","Loc","getMessage","canCreateTemplate","templateAddUrl"],"mappings":";;;;;;;;;;AAAA,CACqC;CAAA;CAAA;AAAA,KAEhBA,MAAM;GAAA;GAE1B,gBAAYC,MAAc,EAAEC,OAAkC,EAC9D;KAAA;KAAA;KACC,oGAAMD,MAAM,EAAEC,OAAO;KAAE;KAAA;KAAA;KAEvB,MAAKC,MAAM,GAAGD,OAAO,CAACC,MAAM,GAAGD,OAAO,CAACC,MAAM,CAACC,QAAQ,EAAE,GAAGC,EAAE,CAACC,OAAO,CAAC,SAAS,CAAC;KAChF,MAAKC,MAAM,GAAGL,OAAO,CAACK,MAAM,GAAGL,OAAO,CAACK,MAAM,CAACH,QAAQ,EAAE,GAAG,CAAC;KAC5D,MAAKI,OAAO,GAAGN,OAAO,CAACM,OAAO,GAAGN,OAAO,CAACM,OAAO,CAACJ,QAAQ,EAAE,GAAG,CAAC;KAAC;;GAChE;KAAA;KAAA,6BAGD;OACC,2BAAI,IAAI,sDAAJ,IAAI,GACR;SACC,8BAAO,IAAI,gEAAJ,IAAI;;OAGZ,8BAAO,IAAI,sDAAJ,IAAI;;;GACX;CAAA,EAnBkCK,+BAAa;CAAA,kCAsBhD;GACC,OAAO,+BAAI,IAAI,CAACR,MAAM,CAACS,QAAQ,CAACC,IAAI,EAAE,EAAE,CAAC,CAAC,KAAK,eAAe;CAC/D;CAAC,kCAGD;GACC,IAAIC,GAAG,GAAG,yBAAyB,GAAG,IAAI,CAACT,MAAM,GAAG,cAAc;GAClE,IAAMU,IAAI,GAAG,IAAI,CAACN,MAAM;GACxB,IAAMO,KAAK,GAAG,IAAI,CAACN,OAAO;GAC1B,IAAIM,KAAK,KAAK,CAAC,EACf;KACCF,GAAG,GAAG,yBAAyB,GAAG,IAAI,CAACT,MAAM,GAAG,wBAAwB,GAAGW,KAAK;;GAEjF,OAAO,IAAI,CAACC,KAAK,CAACC,QAAQ,CAAC,SAAS,EAAE,YAAM;KAC3C,OAAOC,aAAG,CAACC,MAAM,wnDAIXC,aAAG,CAACC,UAAU,CAAC,yCAAyC,CAAC,EAIzDD,aAAG,CAACC,UAAU,CAAC,qCAAqC,CAAC,EAGhBR,GAAG,EAI7BC,IAAI,EAIfM,aAAG,CAACC,UAAU,CAAC,iDAAiD,CAAC;IAIvE,CAAC;CACH;CAAC,uCAGD;GACC,IAAI,CAAC,IAAI,CAAClB,OAAO,CAACmB,iBAAiB,EACnC;KACC,OAAO,IAAI;;GAGZ,OAAOJ,aAAG,CAACC,MAAM,2MACuD,IAAI,CAAChB,OAAO,CAACoB,cAAc,EAC/FH,aAAG,CAACC,UAAU,CAAC,uDAAuD,CAAC;CAG5E;;;;;;;;"}