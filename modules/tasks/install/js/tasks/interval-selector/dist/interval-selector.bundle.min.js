this.BX=this.BX||{};(function(e,s,t){"use strict";let a=e=>e,l;const i="days";const r=["hours","days","months"];var o=babelHelpers.classPrivateFieldLooseKey("params");var n=babelHelpers.classPrivateFieldLooseKey("layout");var v=babelHelpers.classPrivateFieldLooseKey("intervals");var b=babelHelpers.classPrivateFieldLooseKey("currentInterval");var c=babelHelpers.classPrivateFieldLooseKey("showIntervalMenu");var d=babelHelpers.classPrivateFieldLooseKey("getIntervalPhrase");var u=babelHelpers.classPrivateFieldLooseKey("getIntervalDuration");class p{constructor(e={}){Object.defineProperty(this,u,{value:L});Object.defineProperty(this,d,{value:P});Object.defineProperty(this,c,{value:h});Object.defineProperty(this,o,{writable:true,value:void 0});Object.defineProperty(this,n,{writable:true,value:void 0});Object.defineProperty(this,v,{writable:true,value:void 0});Object.defineProperty(this,b,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,o)[o]=e;babelHelpers.classPrivateFieldLooseBase(this,n)[n]={};babelHelpers.classPrivateFieldLooseBase(this,v)[v]=e.intervals||r;babelHelpers.classPrivateFieldLooseBase(this,b)[b]=e.defaultInterval||i;if(babelHelpers.classPrivateFieldLooseBase(this,o)[o].value){this.setSuitableInterval(babelHelpers.classPrivateFieldLooseBase(this,o)[o].value)}}render(){babelHelpers.classPrivateFieldLooseBase(this,n)[n].intervalSelector=s.Tag.render(l||(l=a`
			<div class="tasks-interval-selector">
				${0}
			</div>
		`),babelHelpers.classPrivateFieldLooseBase(this,d)[d](babelHelpers.classPrivateFieldLooseBase(this,b)[b]));s.Event.bind(babelHelpers.classPrivateFieldLooseBase(this,n)[n].intervalSelector,"click",babelHelpers.classPrivateFieldLooseBase(this,c)[c].bind(this));return babelHelpers.classPrivateFieldLooseBase(this,n)[n].intervalSelector}getInterval(){return babelHelpers.classPrivateFieldLooseBase(this,b)[b]}getDuration(){return babelHelpers.classPrivateFieldLooseBase(this,u)[u](babelHelpers.classPrivateFieldLooseBase(this,b)[b])}setSuitableInterval(e){const s=babelHelpers.classPrivateFieldLooseBase(this,v)[v].map((s=>({interval:s,value:e/babelHelpers.classPrivateFieldLooseBase(this,u)[u](s)})));const t=s.reduce(((e,s)=>{if(s.value%1===0&&s.value<=e.value){return{interval:s.interval,value:s.value}}return e}),{value:Math.max(...s.map((e=>e.value)))});this.setInterval(t.interval)}setInterval(e){babelHelpers.classPrivateFieldLooseBase(this,b)[b]=e;if(babelHelpers.classPrivateFieldLooseBase(this,n)[n].intervalSelector){babelHelpers.classPrivateFieldLooseBase(this,n)[n].intervalSelector.innerText=babelHelpers.classPrivateFieldLooseBase(this,d)[d](e)}}}function h(){let e;const a=()=>{const s=e.getPopupWindow();s.adjustPosition();const t=s.bindElement.getBoundingClientRect();if(t.top>window.innerHeight||t.bottom<0){e.close()}};e=t.MenuManager.create({id:"tasks-flow-create-planned-completion-time-interval-menu"+Date.now(),bindElement:babelHelpers.classPrivateFieldLooseBase(this,n)[n].intervalSelector,items:babelHelpers.classPrivateFieldLooseBase(this,v)[v].map((s=>({id:s,text:babelHelpers.classPrivateFieldLooseBase(this,d)[d](s),onclick:(s,t)=>{this.setInterval(t.id);e.close()}}))),events:{onShow:()=>{const t=e.getPopupWindow();const l=t.getPopupContainer().offsetWidth;const i=t.bindElement.offsetWidth;t.setOffset({offsetLeft:i/2-l/2+4,offsetTop:5});t.adjustPosition();s.Event.bind(window,"scroll",a,true)},onClose:()=>{e.destroy();s.Event.unbind(window,"scroll",a,true)}}});e.show()}function P(e){return s.Loc.getMessage(`TASKS_INTERVAL_SELECTOR_${e.toUpperCase()}`)}function L(e){const s={minutes:60,hours:60*60,days:60*60*24,months:60*60*24*30};return s[e]}e.IntervalSelector=p})(this.BX.Tasks=this.BX.Tasks||{},BX,BX.Main);
//# sourceMappingURL=interval-selector.bundle.map.js