{"version":3,"file":"app.bundle.js","sources":["../src/models/application.js","../src/models/ordercreation.js","../src/config.js","../src/component.js","../src/bx-salescenter-app-add-payment-product.js","../src/bx-salescenter-app-add-payment.js","../src/app.js"],"sourcesContent":["import {Vue} from 'ui.vue';\nimport {VuexBuilderModel} from 'ui.vue.vuex';\n\nexport class ApplicationModel extends VuexBuilderModel\n{\n\t/**\n\t * @inheritDoc\n\t */\n\tgetName()\n\t{\n\t\treturn 'application';\n\t}\n\n\tgetState()\n\t{\n\t\treturn {\n\t\t\tpages: [\n\n\t\t\t],\n\t\t\tpreviewUrl: null,\n\t\t\terror: null,\n\t\t}\n\t}\n\n\tgetMutations()\n\t{\n\t\treturn {\n\t\t\tsetPages: (state, payload) =>\n\t\t\t{\n\t\t\t\tif(typeof payload.pages === 'object')\n\t\t\t\t{\n\t\t\t\t\tstate.pages = payload.pages;\n\t\t\t\t\tthis.saveState(state);\n\t\t\t\t}\n\t\t\t},\n\t\t\tremovePage: (state, payload) =>\n\t\t\t{\n\t\t\t\tif(typeof payload.page === 'object')\n\t\t\t\t{\n\t\t\t\t\tstate.pages = state.pages.filter((page) => {\n\t\t\t\t\t\treturn !(\n\t\t\t\t\t\t\t(payload.page.id && payload.page.id > 0 && page.id === payload.page.id) ||\n\t\t\t\t\t\t\t(payload.page.landingId && payload.page.landingId > 0 && page.landingId === payload.page.landingId)\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\t\t\tthis.saveState(state);\n\t\t\t\t}\n\t\t\t},\n\t\t\taddPage: (state, payload) =>\n\t\t\t{\n\t\t\t\tif(typeof payload.page === 'object')\n\t\t\t\t{\n\t\t\t\t\tstate.pages.push(payload.page);\n\t\t\t\t\tthis.saveState(state);\n\t\t\t\t}\n\t\t\t},\n\t\t}\n\t}\n}","import {Vue} from 'ui.vue';\nimport {VuexBuilderModel} from 'ui.vue.vuex';\n\nexport class OrderCreationModel extends VuexBuilderModel\n{\n\t/**\n\t * @inheritDoc\n\t */\n\tgetName()\n\t{\n\t\treturn 'orderCreation';\n\t}\n\n\tgetState()\n\t{\n\t\treturn {\n\t\t\tselectedProducts: [],\n\t\t\tbasket: [],\n\t\t\ttotal: {\n\t\t\t\tsum: null,\n\t\t\t\tdiscount: null,\n\t\t\t\tresult: null\n\t\t\t}\n\t\t}\n\t}\n\n\tgetBasketItemState(params = {})\n\t{\n\t\treturn {\n\t\t\tproductId: null,\n\t\t\tcode: null,\n\t\t\tname: '',\n\t\t\tsort: 0,\n\t\t\tbasePrice: 0,\n\t\t\tquantity: 0,\n\t\t\tshowDiscount: 'N',\n\t\t\tdiscount: 0,\n\t\t\tdiscountType: 'percent',\n\t\t\tmodule: null,\n\t\t\ttotalPrice: 0,\n\t\t\tmeasureCode: 0,\n\t\t\tmeasureName: '',\n\t\t\tisCustomPrice: 'N',\n\t\t\tisCreatedProduct: 'N',\n\t\t\tformatted: null\n\t\t};\n\t}\n\n\tgetActions()\n\t{\n\t\treturn {\n\t\t\tresetBasket ({ commit })\n\t\t\t{\n\t\t\t\tcommit('refreshBasket');\n\t\t\t\tcommit('setTotal', {\n\t\t\t\t\tsum: null,\n\t\t\t\t\tdiscount: null,\n\t\t\t\t\tresult: null\n\t\t\t\t});\n\t\t\t\tcommit('addBasketItem');\n\t\t\t},\n\t\t\tremoveItem({ commit, state }, payload)\n\t\t\t{\n\t\t\t\tcommit('deleteBasketItem', payload);\n\t\t\t\tif (state.basket.length === 0)\n\t\t\t\t{\n\t\t\t\t\tcommit('addBasketItem');\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tfor (let i in state.basket)\n\t\t\t\t\t{\n\t\t\t\t\t\tcommit('updateBasketItem', {\n\t\t\t\t\t\t\tindex: i,\n\t\t\t\t\t\t\tfields: {sort: i}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tsetBasket ({ commit }, basketItems)\n\t\t\t{\n\t\t\t\tfor (let element of basketItems)\n\t\t\t\t{\n\t\t\t\t\tcommit('updateBasketItem', element);\n\t\t\t\t}\n\t\t\t\tcommit('setSelectedProducts');\n\t\t\t},\n\t\t\tupdateBasketItem: ({ commit }, payload) =>\n\t\t\t{\n\t\t\t\tcommit('updateBasketItem', payload);\n\t\t\t\tcommit('setSelectedProducts');\n\t\t\t},\n\t\t}\n\t}\n\n\tgetGetters()\n\t{\n\t\treturn {\n\t\t\tgetBasket: state => index =>\n\t\t\t{\n\t\t\t\treturn state.basket;\n\t\t\t},\n\t\t\tgetBlankBasketItem: state => params =>\n\t\t\t{\n\t\t\t\treturn this.getBasketItemState();\n\t\t\t}\n\t\t}\n\t}\n\n\tgetMutations()\n\t{\n\t\treturn {\n\t\t\taddBasketItem: (state, payload) =>\n\t\t\t{\n\t\t\t\tlet item = this.getBasketItemState();\n\t\t\t\titem.sort = state.basket.length;\n\t\t\t\tstate.basket.push(item);\n\t\t\t},\n\t\t\tupdateBasketItem: (state, payload) =>\n\t\t\t{\n\t\t\t\tif (typeof state.basket[payload.index] === 'undefined')\n\t\t\t\t{\n\t\t\t\t\tVue.set(state.basket, payload.index, this.getBasketItemState());\n\t\t\t\t}\n\n\t\t\t\tstate.basket[payload.index] = Object.assign(\n\t\t\t\t\tstate.basket[payload.index],\n\t\t\t\t\tpayload.fields\n\t\t\t\t);\n\t\t\t},\n\t\t\trefreshBasket: (state) =>\n\t\t\t{\n\t\t\t\tstate.basket = [];\n\t\t\t},\n\t\t\tdeleteBasketItem: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.basket.splice(payload.index, 1);\n\t\t\t},\n\t\t\tsetSelectedProducts: (state) =>\n\t\t\t{\n\t\t\t\tstate.selectedProducts = state.basket\n\t\t\t\t\t.filter( basketItem => (basketItem.module === 'catalog' && parseInt(basketItem.productId) > 0))\n\t\t\t\t\t.map( filtered => filtered.productId);\n\t\t\t},\n\t\t\tsetTotal: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.total = Object.assign(\n\t\t\t\t\tstate.total,\n\t\t\t\t\tpayload\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n}","const config = {\n\tdatabaseConfig: {\n\t\tname: 'salescenter.app',\n\t},\n\ttemplateName: 'bx-salescenter-app',\n\ttemplateAddPaymentName: 'bx-salescenter-app-add-payment',\n\ttemplateAddPaymentProductName: 'bx-salescenter-app-add-payment-product',\n\tmoduleId: 'salescenter',\n};\nexport {config};","import {Vue} from 'ui.vue';\nimport {Vuex} from 'ui.vue.vuex';\n\nimport {config} from './config';\n\nimport 'popup';\nimport 'ui.buttons';\nimport {Manager} from \"salescenter.manager\";\nimport 'ui.forms';\nimport 'ui.fonts.opensans';\n\nVue.component(config.templateName, {\n\tdata()\n\t{\n\t\treturn {\n\t\t\tisPagesShown: true,\n\t\t\tisShowPreview: false,\n\t\t\tisShowPayment: false,\n\t\t\tframeSrc: null,\n\t\t\tpageTitle: '',\n\t\t\tcurrentPage: null,\n\t\t\tactions: [],\n\t\t};\n\t},\n\n\tcreated: function()\n\t{\n\t\tthis.openFirstPage();\n\t},\n\n\tmethods:\n\t{\n\t\tgetActions()\n\t\t{\n\t\t\tlet actions = [];\n\t\t\tif(this.currentPage)\n\t\t\t{\n\t\t\t\tactions = [\n\t\t\t\t\t{text: this.localize.SALESCENTER_RIGHT_ACTION_COPY_URL, onclick: this.copyUrl},\n\t\t\t\t];\n\t\t\t\tif(this.currentPage.landingId > 0)\n\t\t\t\t{\n\t\t\t\t\tactions = [\n\t\t\t\t\t\t...actions,\n\t\t\t\t\t\t{'delimiter': true},\n\t\t\t\t\t\t{text: this.localize.SALESCENTER_RIGHT_ACTION_EDIT, onclick: this.editPage},\n\t\t\t\t\t\t{text: this.localize.SALESCENTER_RIGHT_ACTION_HIDE, onclick: this.hidePage},\n\t\t\t\t\t\t{'delimiter': true},\n\t\t\t\t\t];\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tactions = [\n\t\t\t\t\t\t...actions,\n\t\t\t\t\t\t{text: this.localize.SALESCENTER_RIGHT_ACTION_DELETE, onclick: this.hidePage},\n\t\t\t\t\t];\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn [\n\t\t\t\t...actions,\n\t\t\t\t{text: this.localize.SALESCENTER_RIGHT_ACTION_ADD, items: [\n\t\t\t\t\t\t{text: this.localize.SALESCENTER_RIGHT_ACTION_ADD_SITE_B24, onclick: this.addSite},\n\t\t\t\t\t\t{text: this.localize.SALESCENTER_RIGHT_ACTION_ADD_STORE_B24, onclick: this.addStore},\n\t\t\t\t\t\t{text: this.localize.SALESCENTER_RIGHT_ACTION_ADD_CUSTOM, onclick: this.showAddUrlPopup},\n\t\t\t\t\t]},\n\t\t\t];\n\t\t},\n\t\topenFirstPage()\n\t\t{\n\t\t\tthis.isShowPayment = false;\n\t\t\tthis.isShowPreview = true;\n\t\t\tif(this.application.pages && this.application.pages.length > 0)\n\t\t\t{\n\t\t\t\tthis.onPageClick(this.application.pages[0]);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.frameSrc = null;\n\t\t\t\tthis.pageTitle = null;\n\t\t\t\tthis.currentPage = null;\n\t\t\t}\n\t\t},\n\t\tonPageClick(page)\n\t\t{\n\t\t\tthis.frameSrc = page.url;\n\t\t\tthis.pageTitle = page.name;\n\t\t\tthis.currentPage = page;\n\t\t\tthis.hideActionsPopup();\n\t\t\tthis.isShowPayment = false;\n\t\t\tthis.isShowPreview = true;\n\t\t},\n\t\tshowActionsPopup(event)\n\t\t{\n\t\t\tconst target = event.target;\n\t\t\tBX.PopupMenu.show('salescenter-app-actions', target, this.getActions(), {\n\t\t\t\toffsetLeft: 0,\n\t\t\t\toffsetTop: 0,\n\t\t\t\tcloseByEsc: true,\n\t\t\t});\n\t\t},\n\t\thideActionsPopup()\n\t\t{\n\t\t\tBX.PopupMenu.destroy('salescenter-app-actions');\n\t\t},\n\t\taddSite()\n\t\t{\n\t\t\tManager.addSitePage().then(() =>\n\t\t\t{\n\t\t\t\tthis.$root.$app.fillPages().then(() =>\n\t\t\t\t{\n\t\t\t\t\tthis.openFirstPage();\n\t\t\t\t});\n\t\t\t});\n\t\t\tthis.hideActionsPopup();\n\t\t},\n\t\taddStore()\n\t\t{\n\t\t\tManager.addStorePage().then(() =>\n\t\t\t{\n\t\t\t\tthis.$root.$app.fillPages().then(() =>\n\t\t\t\t{\n\t\t\t\t\tthis.openFirstPage();\n\t\t\t\t});\n\t\t\t});\n\t\t\tthis.hideActionsPopup();\n\t\t},\n\t\tcopyUrl()\n\t\t{\n\t\t\tif(this.currentPage && this.currentPage.url)\n\t\t\t{\n\t\t\t\tManager.copyUrl(this.currentPage.url);\n\t\t\t\tthis.hideActionsPopup();\n\t\t\t}\n\t\t},\n\t\teditPage()\n\t\t{\n\t\t\tif(this.currentPage && this.currentPage.landingId && this.currentPage.landingId > 0)\n\t\t\t{\n\t\t\t\tManager.editLandingPage(this.currentPage.landingId);\n\t\t\t\tthis.hideActionsPopup();\n\t\t\t}\n\t\t},\n\t\thidePage()\n\t\t{\n\t\t\tif(this.currentPage)\n\t\t\t{\n\t\t\t\tthis.$root.$app.hidePage(this.currentPage).then(() => {\n\t\t\t\t\tthis.openFirstPage();\n\t\t\t\t});\n\t\t\t\tthis.hideActionsPopup();\n\t\t\t}\n\t\t},\n\t\tshowAddUrlPopup()\n\t\t{\n\t\t\tManager.addCustomPage().then(() =>\n\t\t\t{\n\t\t\t\tthis.$root.$app.fillPages().then(() =>\n\t\t\t\t{\n\t\t\t\t\tthis.openFirstPage();\n\t\t\t\t});\n\t\t\t});\n\t\t\tthis.hideActionsPopup();\n\t\t},\n\t\tshowPaymentForm()\n\t\t{\n\t\t\tthis.isShowPayment = true;\n\t\t\tthis.isShowPreview = false;\n\t\t},\n\t\tshowOrdersList()\n\t\t{\n\t\t\tManager.showOrdersList();\n\t\t\tthis.hideActionsPopup();\n\t\t},\n\t\tshowOrderAdd()\n\t\t{\n\t\t\tManager.showOrderAdd();\n\t\t\tthis.hideActionsPopup();\n\t\t},\n\t\tonFormsClick()\n\t\t{\n\t\t\tthis.hideActionsPopup();\n\t\t},\n\t\topenContactCenter()\n\t\t{\n\t\t\tManager.openContactCenter();\n\t\t\tthis.hideActionsPopup();\n\t\t},\n\t\topenHelpDesk()\n\t\t{\n\t\t\tthis.hideActionsPopup();\n\t\t},\n\t\tisPageSelected(page)\n\t\t{\n\t\t\treturn (this.currentPage && this.isShowPreview && this.currentPage.id === page.id);\n\t\t},\n\t\tsend(event)\n\t\t{\n\t\t\tif (this.isShowPayment)\n\t\t\t{\n\t\t\t\tthis.$root.$app.sendPayment(event.target);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.$root.$app.sendPage(this.currentPage.id);\n\t\t\t}\n\t\t},\n\t\tclose()\n\t\t{\n\t\t\tthis.$root.$app.closeApplication();\n\t\t},\n\t},\n\n\tcomputed:\n\t{\n\t\tlocalize()\n\t\t{\n\t\t\treturn Vue.getFilteredPhrases('SALESCENTER_');\n\t\t},\n\n\t\t...Vuex.mapState({\n\t\t\tapplication: state => state.application,\n\t\t})\n\t},\n\n\ttemplate: `\n\t\t<div class=\"salescenter-app-wrapper\" id=\"salescenter-app-root\">\n\t\t\t<div class=\"salescenter-app-left-side\">\n\t\t\t\t<div class=\"salescenter-app-nav\">\n\t\t\t\t\t<a class=\"salescenter-app-nav-item\" @click=\"isPagesShown = !isPagesShown\">\n\t\t\t\t\t\t<span class=\"salescenter-app-nav-item-text\">{{localize.SALESCENTER_LEFT_PAGES}}</span>\n\t\t\t\t\t</a>\n\t\t\t\t\t<template v-if=\"isPagesShown\">\n\t\t\t\t\t\t<a v-bind:class=\"{ selected: isPageSelected(page)}\" class=\"salescenter-app-nav-item-sub\" @click=\"onPageClick(page)\" v-for=\"page in application.pages\" :key=\"page.id\">\n\t\t\t\t\t\t\t<span class=\"salescenter-app-nav-item-text\">{{page.name}}</span>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</template>\n\t\t\t\t\t<a v-bind:class=\"{ selected: this.isShowPayment}\" class=\"salescenter-app-nav-item\" @click=\"showPaymentForm\">\n\t\t\t\t\t\t<span class=\"salescenter-app-nav-item-text\">{{localize.SALESCENTER_LEFT_PAYMENT_ADD}}</span>\n\t\t\t\t\t</a>\n\t\t\t\t\t<a class=\"salescenter-app-nav-item\" @click=\"showOrdersList\">\n\t\t\t\t\t\t<span class=\"salescenter-app-nav-item-text\">{{localize.SALESCENTER_LEFT_ORDERS}}</span>\n\t\t\t\t\t</a>\n\t\t\t\t\t<a class=\"salescenter-app-nav-item\" @click=\"showOrderAdd\">\n\t\t\t\t\t\t<span class=\"salescenter-app-nav-item-text\">{{localize.SALESCENTER_LEFT_ORDER_ALL}}</span>\n\t\t\t\t\t</a>\n\t\t\t\t\t<a class=\"salescenter-app-nav-item\" @click=\"onFormsClick\">\n\t\t\t\t\t\t<span class=\"salescenter-app-nav-item-text\">{{localize.SALESCENTER_LEFT_FORMS_ALL}}</span>\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"salescenter-app-helper-nav\">\n\t\t\t\t\t<a class=\"salescenter-app-helper-nav-item\" @click=\"openContactCenter\">\n\t\t\t\t\t\t<span class=\"salescenter-app-helper-nav-item-text\">{{localize.SALESCENTER_PAYMENT_TYPE_ADD}}</span>\n\t\t\t\t\t</a>\n\t\t\t\t\t<a class=\"salescenter-app-helper-nav-item\" @click=\"openHelpDesk\">\n\t\t\t\t\t\t<span class=\"salescenter-app-helper-nav-item-text\">{{localize.SALESCENTER_HOW}}</span>\n\t\t\t\t\t</a>\n\t\t\t\t</div> \n\t\t\t</div>\n\t\t\t<div class=\"salescenter-app-right-side\">\n\t\t\t\t<template v-if=\"isShowPreview\">\n\t\t\t\t\t<div class=\"salescenter-app-page-title\">\n\t\t\t\t\t\t<div class=\"salescenter-app-page-title-text\">{{pageTitle}}</div>\n\t\t\t\t\t\t<div class=\"salescenter-btn-action ui-btn ui-btn-link ui-btn-dropdown ui-btn-sm\" @click=\"showActionsPopup($event)\">{{localize.SALESCENTER_RIGHT_ACTIONS_BUTTON}}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"salescenter-app-page-content\">\n\t\t\t\t\t\t<div class=\"salescenter-app-demo-wrapper\">\n\t\t\t\t\t\t\t<iframe class=\"salescenter-app-demo\" v-if=\"frameSrc\" :src=\"frameSrc\" frameborder=\"0\"></iframe>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t\t<template v-if=\"isShowPayment\">\n\t\t\t\t\t<${config.templateAddPaymentName} />\n\t\t\t\t</template>\n\t\t\t\t<div class=\"bottom\">\n\t\t\t\t\t<button class=\"ui-btn ui-btn-md ui-btn-primary\" @click=\"send\">{{localize.SALESCENTER_SEND}}</button>\n\t\t\t\t\t<button class=\"ui-btn ui-btn-md ui-btn-link\" @click=\"close\">{{localize.SALESCENTER_CANCEL}}</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n\n});","import {config} from \"./config\";\nimport {Vue} from \"ui.vue\";\nimport \"ui.dropdown\";\n\nVue.component(config.templateAddPaymentProductName,\n{\n\tprops: ['basketItem', 'basketItemIndex', 'countItems', 'selectedProductIds'],\n\tdata()\n\t{\n\t\treturn {\n\t\t\tproductSelector: null\n\t\t};\n\t},\n\tcreated: function()\n\t{\n\t\tthis.currencyName = this.$root.$app.options.currencyName || null;\n\t\tthis.defaultMeasure = {\n\t\t\tname: '',\n\t\t\tid: null,\n\t\t};\n\t\tthis.measures = this.$root.$app.options.measures || {};\n\t\tif (BX.type.isArray(this.measures) && this.measures)\n\t\t{\n\t\t\tfor (let i in this.measures)\n\t\t\t{\n\t\t\t\tif (this.measures[i]['IS_DEFAULT'] === 'Y')\n\t\t\t\t{\n\t\t\t\t\tthis.defaultMeasure.name = this.measures[i].SYMBOL;\n\t\t\t\t\tthis.defaultMeasure.code = this.measures[i].CODE;\n\t\t\t\t\tthis.changeData({\n\t\t\t\t\t\tmeasureCode: this.defaultMeasure.code,\n\t\t\t\t\t\tmeasureName: this.defaultMeasure.name\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\tmounted()\n\t{\n\t\tlet dropdownSelector = this.$el.querySelector('.salescenter-app-product-search');\n\t\tthis.productSelector = new BX.UI.Dropdown(\n\t\t\t{\n\t\t\t\tsearchAction: \"salescenter.api.order.searchProduct\",\n\t\t\t\tsearchOptions: {\n\t\t\t\t\trestrictedSearchIds: this.selectedProductIds\n\t\t\t\t},\n\t\t\t\tenableCreation: true,\n\t\t\t\tsearchResultRenderer: null,\n\t\t\t\ttargetElement: dropdownSelector,\n\t\t\t\titems: [{\n\t\t\t\t\ttitle: '',\n\t\t\t\t\tsubTitle: this.localize.SALESCENTER_PRODUCT_BEFORE_SEARCH_TITLE\n\t\t\t\t}],\n\t\t\t\tmessages:\n\t\t\t\t\t{\n\t\t\t\t\t\tcreationLegend: this.localize.SALESCENTER_PRODUCT_CREATE,\n\t\t\t\t\t\tnotFound: this.localize.SALESCENTER_PRODUCT_NOT_FOUND,\n\t\t\t\t\t},\n\t\t\t\tevents:\n\t\t\t\t\t{\n\t\t\t\t\t\tonSelect: this.selectCatalogItem.bind(this),\n\t\t\t\t\t\tonAdd: this.showCreationForm.bind(this),\n\t\t\t\t\t\tonReset: this.resetSearchForm(this)\n\t\t\t\t\t}\n\t\t\t}\n\t\t);\n\t},\n\tupdated()\n\t{\n\t\tif (this.productSelector instanceof BX.UI.Dropdown)\n\t\t{\n\t\t\tthis.productSelector.searchOptions = {\n\t\t\t\trestrictedSearchIds: this.restrictedSearchIds\n\t\t\t};\n\n\t\t\tthis.productSelector.items = this.productSelector.items.filter(\n\t\t\t\titem => !this.restrictedSearchIds.includes(item.id)\n\t\t\t);\n\t\t}\n\n\t\tif (this.basketItem.isCreatedProduct !== 'Y' && !this.basketItem.name)\n\t\t{\n\t\t\tthis.productSelector.targetElement = this.$el.querySelector('.salescenter-app-product-search');\n\t\t\tthis.productSelector.init();\n\t\t}\n\t},\n\tmethods:\n\t{\n\t\ttoggleDiscount(value)\n\t\t{\n\t\t\tthis.changeData(\n\t\t\t\t{showDiscount: value}\n\t\t\t);\n\t\t},\n\t\tchangeData(fields)\n\t\t{\n\t\t\tthis.$emit('changeBasketItem', {\n\t\t\t\tindex: this.basketItemIndex,\n\t\t\t\tfields: fields\n\t\t\t});\n\t\t},\n\t\tisNeedRefreshAfterChanges()\n\t\t{\n\t\t\tif (!this.isCreationMode)\n\t\t\t{\n\t\t\t\treturn this.basketItem.code;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\treturn this.basketItem.name.length > 0\n\t\t\t\t\t&& this.basketItem.quantity > 0\n\t\t\t\t\t&& this.basketItem.basePrice > 0\n\t\t\t}\n\t\t},\n\t\trefreshBasket()\n\t\t{\n\t\t\tthis.$emit('refreshBasket');\n\t\t},\n\t\tchangeQuantity(event)\n\t\t{\n\t\t\tlet newQuantity = parseFloat(event.target.value);\n\t\t\tif (!newQuantity)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet fields = this.basketItem;\n\t\t\tfields.quantity = newQuantity;\n\t\t\tthis.changeData(fields);\n\n\t\t\tif (this.isNeedRefreshAfterChanges())\n\t\t\t{\n\t\t\t\tthis.refreshBasket();\n\t\t\t}\n\t\t},\n\t\tchangeName(event)\n\t\t{\n\t\t\tlet newName = event.target.value;\n\t\t\tif (newName.length === 0)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet fields = this.basketItem;\n\t\t\tfields.name = newName;\n\t\t\tthis.changeData(fields);\n\n\t\t\tif (this.isNeedRefreshAfterChanges())\n\t\t\t{\n\t\t\t\tthis.refreshBasket();\n\t\t\t}\n\t\t},\n\t\tchangeBasePrice(event)\n\t\t{\n\t\t\tlet newPrice = parseFloat(event.target.value);\n\t\t\tif (!newPrice)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet fields = this.basketItem;\n\t\t\tfields.basePrice = newPrice;\n\t\t\tfields.isCustomPrice = 'Y';\n\t\t\tthis.changeData(fields);\n\n\t\t\tif (this.isNeedRefreshAfterChanges())\n\t\t\t{\n\t\t\t\tthis.refreshBasket();\n\t\t\t}\n\t\t},\n\t\tchangeDiscountType(event)\n\t\t{\n\t\t\tlet type = (event.target.value === 'currency') ? 'currency' : 'percent';\n\t\t\tif (parseFloat(this.basketItem.discount) <= 0)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet fields = this.basketItem;\n\t\t\tfields.discountType = type;\n\t\t\tfields.isCustomPrice = 'Y';\n\t\t\tthis.changeData(fields);\n\n\t\t\tif (this.isNeedRefreshAfterChanges())\n\t\t\t{\n\t\t\t\tthis.refreshBasket();\n\t\t\t}\n\t\t},\n\t\tchangeDiscount(event)\n\t\t{\n\t\t\tlet discountValue = parseFloat(event.target.value);\n\t\t\tif (discountValue === parseFloat(this.basketItem.discount))\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet fields = this.basketItem;\n\t\t\tfields.discount = discountValue;\n\t\t\tfields.isCustomPrice = 'Y';\n\t\t\tthis.changeData(fields);\n\n\t\t\tif (this.isNeedRefreshAfterChanges())\n\t\t\t{\n\t\t\t\tthis.refreshBasket();\n\t\t\t}\n\t\t},\n\t\tchangeMeasureValue(event)\n\t\t{\n\t\t\tlet measureCode = parseInt(event.target.value);\n\t\t\tlet measureName = '';\n\t\t\tfor (let i in this.measures)\n\t\t\t{\n\t\t\t\tif (parseInt(this.measures[i].CODE) === measureCode)\n\t\t\t\t{\n\t\t\t\t\tmeasureName = this.measures[i].SYMBOL;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.changeData({\n\t\t\t\tmeasureCode: measureCode,\n\t\t\t\tmeasureName: measureName\n\t\t\t});\n\t\t},\n\t\tshowCreationForm()\n\t\t{\n\t\t\tif (!(this.productSelector instanceof BX.UI.Dropdown))\n\t\t\t\treturn true;\n\n\t\t\tlet value = this.productSelector.targetElement.value;\n\t\t\tthis.changeData({\n\t\t\t\tproductId: 0,\n\t\t\t\tsort: this.basketItemIndex,\n\t\t\t\tisCreatedProduct: 'Y',\n\t\t\t\tname: value,\n\t\t\t\tformatted: null,\n\t\t\t\tisCustomPrice: 'Y',\n\t\t\t});\n\n\t\t\tthis.productSelector.destroyPopupWindow();\n\t\t},\n\t\tresetSearchForm()\n\t\t{\n\t\t\tif (!(this.productSelector instanceof BX.UI.Dropdown))\n\t\t\t\treturn true;\n\n\t\t\tthis.productSelector.targetElement.value = '';\n\t\t\tthis.productSelector.items = [{\n\t\t\t\ttitle: '',\n\t\t\t\tsubTitle: this.localize.SALESCENTER_PRODUCT_BEFORE_SEARCH_TITLE\n\t\t\t}];\n\t\t\tthis.changeData({\n\t\t\t\tproductId: 0,\n\t\t\t\tname: '',\n\t\t\t\tformatted: null,\n\t\t\t\ttotalPrice: 0\n\t\t\t});\n\t\t\tthis.refreshBasket();\n\t\t\tthis.productSelector.destroyPopupWindow();\n\t\t},\n\t\thideCreationForm()\n\t\t{\n\t\t\tif (!(this.productSelector instanceof BX.UI.Dropdown))\n\t\t\t\treturn true;\n\n\t\t\tthis.changeData({\n\t\t\t\tisCreatedProduct: 'N',\n\t\t\t\tname: null\n\t\t\t});\n\t\t},\n\t\tremoveItem()\n\t\t{\n\t\t\tthis.$emit('removeItem', {\n\t\t\t\tindex: this.basketItemIndex\n\t\t\t});\n\t\t},\n\t\tselectCatalogItem(sender, item)\n\t\t{\n\t\t\tif (!sender instanceof BX.UI.Dropdown)\n\t\t\t\treturn true;\n\n\t\t\tif (item.id === undefined || parseInt(item.id) <= 0)\n\t\t\t\treturn true;\n\n\t\t\tlet fields = {\n\t\t\t\tname: item.title,\n\t\t\t\tproductId: item.id,\n\t\t\t\tsort: this.basketItemIndex,\n\t\t\t\tmodule: 'catalog',\n\t\t\t\tquantity: this.basketItem.quantity > 0 ? this.basketItem.quantity : 1,\n\t\t\t};\n\n\t\t\tif (this.basketItemIndex.productId !== item.id)\n\t\t\t{\n\t\t\t\tfields.formatted = null;\n\t\t\t\tfields.discount = 0;\n\t\t\t\tfields.isCustomPrice = 'N';\n\t\t\t}\n\n\t\t\tthis.changeData(fields);\n\t\t\tthis.refreshBasket();\n\t\t\tsender.destroyPopupWindow();\n\t\t}\n\t},\n\tcomputed:\n\t{\n\t\tlocalize()\n\t\t{\n\t\t\treturn Vue.getFilteredPhrases('SALESCENTER_PRODUCT_');\n\t\t},\n\t\tshowDiscount()\n\t\t{\n\t\t\treturn this.basketItem.showDiscount === 'Y';\n\t\t},\n\t\tgetMeasureName()\n\t\t{\n\t\t\treturn this.basketItem.measureName || this.defaultMeasure.name\n\t\t},\n\t\tgetMeasureCode()\n\t\t{\n\t\t\treturn this.basketItem.measureCode || this.defaultMeasure.code\n\t\t},\n\t\trestrictedSearchIds()\n\t\t{\n\t\t\tlet restrictedSearchIds = this.selectedProductIds;\n\t\t\tif (this.basketItem.module === 'catalog')\n\t\t\t{\n\t\t\t\trestrictedSearchIds = restrictedSearchIds.filter(id => id !== this.basketItem.productId);\n\t\t\t}\n\n\t\t\treturn restrictedSearchIds;\n\t\t},\n\t\tisCreationMode()\n\t\t{\n\t\t\treturn this.basketItem.isCreatedProduct === 'Y';\n\t\t}\n\t},\n\ttemplate: `\n\t\t<div>\n\t\t\t<div class=\"salescenter-app-counter\" v-if=\"this.countItems > 1\">{{this.basketItemIndex + 1}}</div>\n\t\t\t<div class=\"salescenter-app-remove\" @click=\"removeItem\" v-if=\"this.countItems > 1\"></div>\n\t\t\t<div class=\"salescenter-app-form-container\" v-if=\"!this.isCreationMode\">\n\n\t\t\t\t<div class=\"salescenter-app-form-row\">\n\t\t\t\t\t<div class=\"salescenter-app-form-col\" style=\"flex:8\">\n\n\t\t\t\t\t\t<label class=\"salescenter-app-ctl-label-text ui-ctl-label-text\">{{this.localize.SALESCENTER_PRODUCT_TITLE}}</label>\n\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-md ui-ctl-w100 ui-ctl-after-icon\">\n\t\t\t\t\t\t\t<button class=\"ui-ctl-after ui-ctl-icon-clear\" @click=\"resetSearchForm\"> </button>\n\t\t\t\t\t\t\t<input type=\"text\" class=\"ui-ctl-element ui-ctl-textbox salescenter-app-product-search\" :value=\"this.basketItem.name\">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<input type=\"hidden\" :value=\"this.restrictedSearchIds\">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"salescenter-app-form-col\" style=\"flex:4\">\n\n\t\t\t\t\t\t<label class=\"salescenter-app-ctl-label-text ui-ctl-label-text\">\n\t\t\t\t\t\t\t{{this.localize.SALESCENTER_PRODUCT_QUANTITY.replace('#MEASURE_NAME#', this.getMeasureName)}}\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-md ui-ctl-w100\">\n\t\t\t\t\t\t\t<input type=\"text\" class=\"ui-ctl-element ui-ctl-textbox\" :value=\"this.basketItem.quantity\" @change=\"changeQuantity\">\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"salescenter-app-form-row\">\n\t\t\t\t\t<div class=\"salescenter-app-form-col\" style=\"flex:12\">\n\n\t\t\t\t\t\t<label class=\"salescenter-app-ctl-label-text ui-ctl-label-text\">\n\t\t\t\t\t\t\t{{this.localize.SALESCENTER_PRODUCT_PRICE.replace('#CURRENCY_NAME#', this.currencyName)}}\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-md ui-ctl-w100\">\n\t\t\t\t\t\t\t<input type=\"text\" class=\"ui-ctl-element ui-ctl-textbox\"  :value=\"this.basketItem.basePrice\"  @change=\"changeBasePrice\">\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t</div>\n\t\t\t<div class=\"salescenter-app-form-container\" v-else>\n\t\t\t\t<div class=\"salescenter-app-form-row\">\n\t\t\t\t\t<div class=\"salescenter-app-form-col\" style=\"flex:8\">\n\n\t\t\t\t\t\t<label class=\"salescenter-app-ctl-label-text ui-ctl-label-text\">{{this.localize.SALESCENTER_PRODUCT_TITLE}}</label>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-md ui-ctl-w100 ui-ctl-after-icon\">\n\t\t\t\t\t\t\t\t<button class=\"ui-ctl-after ui-ctl-icon-clear\" @click=\"hideCreationForm\"> </button>\n\t\t\t\t\t\t\t\t<input type=\"text\" class=\"ui-ctl-element ui-ctl-textbox\" @change=\"changeName\" :value=\"this.basketItem.name\">\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"salescenter-app-form-col\" style=\"flex:4\">\n\n\t\t\t\t\t\t<label class=\"salescenter-app-ctl-label-text ui-ctl-label-text\">\n\t\t\t\t\t\t\t{{this.localize.SALESCENTER_PRODUCT_QUANTITY.replace('#MEASURE_NAME#', this.getMeasureName)}}\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-md ui-ctl-w100\">\n\t\t\t\t\t\t\t<input type=\"text\" class=\"ui-ctl-element ui-ctl-textbox\" :value=\"this.basketItem.quantity\" @change=\"changeQuantity\">\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"salescenter-app-form-row\">\n\t\t\t\t\t<div class=\"salescenter-app-form-col\" style=\"flex:8\">\n\n\t\t\t\t\t\t<label class=\"salescenter-app-ctl-label-text ui-ctl-label-text\">\n\t\t\t\t\t\t\t{{this.localize.SALESCENTER_PRODUCT_PRICE.replace('#CURRENCY_NAME#', this.currencyName)}}\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-md ui-ctl-w100\">\n\t\t\t\t\t\t\t<input type=\"text\" class=\"ui-ctl-element ui-ctl-textbox\"  :value=\"this.basketItem.basePrice\"  @change=\"changeBasePrice\">\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"salescenter-app-form-col\" style=\"flex:4;\">\n\t\t\t\t\t\t<label class=\"salescenter-app-ctl-label-text ui-ctl-label-text\">{{this.localize.SALESCENTER_PRODUCT_MEASURE}}</label>\n\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-after-icon ui-ctl-w100 ui-ctl-dropdown\">\n\t\t\t\t\t\t\t<div class=\"ui-ctl-after ui-ctl-icon-angle\"></div>\n\t\t\t\t\t\t\t<select class=\"ui-ctl-element\" @change=\"changeMeasureValue\" :value=\"this.getMeasureCode\">\n\t\t\t\t\t\t\t\t<option v-for=\"item in this.measures\" :value=\"item.CODE\">{{item.SYMBOL}}</option>\n\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t</div>\n\t\t\t<div class=\"salescenter-app-sale-container\" v-if=\"this.showDiscount\">\n\n\t\t\t\t<div class=\"salescenter-app-form-collapse-container\">\n\n\t\t\t\t\t<div class=\"salescenter-app-form-col\">\n\t\t\t\t\t\t<label class=\"salescenter-app-ctl-label-text ui-ctl-label-text\">{{this.localize.SALESCENTER_PRODUCT_DISCOUNT_TITLE}}</label>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"salescenter-app-form-row-center\">\n\n\t\t\t\t\t\t<div class=\"salescenter-app-form-col\" style=\"flex:1;max-width: 112px;\">\n\t\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-md ui-ctl-w100\">\n\t\t\t\t\t\t\t\t<input type=\"text\" class=\"ui-ctl-element ui-ctl-textbox\" :value=\"this.basketItem.discount\" @change=\"changeDiscount\">\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class=\"salescenter-app-form-col\" style=\"flex:1.5;max-width: 84px;\">\n\t\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-after-icon ui-ctl-w100 ui-ctl-dropdown\">\n\t\t\t\t\t\t\t\t<div class=\"ui-ctl-after ui-ctl-icon-angle\"></div>\n\t\t\t\t\t\t\t\t<select class=\"ui-ctl-element\" :value=\"this.basketItem.discountType\" @change=\"changeDiscountType\">\n\t\t\t\t\t\t\t\t\t<option value=\"percent\">%</option>\n\t\t\t\t\t\t\t\t\t<option value=\"currency\">{{this.currencyName}}</option>\n\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class=\"salescenter-app-form-col\">\n\t\t\t\t\t\t\t<div class=\"salescenter-app-form-text\">\n\t\t\t\t\t\t\t\t{{this.localize.SALESCENTER_PRODUCT_SUM.replace('#MEASURE_NAME#', this.getMeasureName)}}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class=\"salescenter-app-form-col\" style=\"flex:auto; text-align: right;\">\n\t\t\t\t\t\t\t<div class=\"salescenter-app-form-text\">{{this.basketItem.totalPrice}}</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"salescenter-app-collapse-link-container\" @click=\"toggleDiscount('N')\">\n\t\t\t\t\t<a class=\"salescenter-app-collapse-link\">{{this.localize.SALESCENTER_PRODUCT_HIDE_DISCOUNT}}</a>\n\t\t\t\t</div>\n\n\t\t\t</div>\n\t\t\t<div class=\"salescenter-app-sale-container\" v-else>\n\t\t\t\t<div class=\"salescenter-app-collapse-link-container\" @click=\"toggleDiscount('Y')\">\n\t\t\t\t\t<a class=\"salescenter-app-collapse-link\">{{this.localize.SALESCENTER_PRODUCT_ADD_DISCOUNT}}</a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n});","import {config} from './config';\n\nimport {Vue} from 'ui.vue';\nimport {Vuex} from 'ui.vue.vuex';\n\nimport \"./bx-salescenter-app-add-payment-product\";\n\nVue.component(config.templateAddPaymentName,\n{\n\tdata()\n\t{\n\t\treturn {};\n\t},\n\tcreated: function()\n\t{\n\t\tlet defaultPrice = this.$root.$app.options.defaultSum || null;\n\t\tthis.$store.commit('orderCreation/setTotal', {\n\t\t\tsum: defaultPrice,\n\t\t\tdiscount: defaultPrice,\n\t\t\tresult: defaultPrice,\n\t\t});\n\t\tthis.addBasketItemForm();\n\t},\n\tmethods:\n\t{\n\t\trefreshBasket()\n\t\t{\n\t\t\tif (this._isRefreshingProcess)\n\t\t\t\treturn true;\n\n\t\t\tthis._isRefreshingProcess = true;\n\t\t\tlet basketItems = this.order.basket;\n\t\t\tBX.ajax.runAction(\n\t\t\t\t\"salescenter.api.order.refreshBasket\",\n\t\t\t\t{ data: { basketItems: basketItems } }\n\t\t\t).then(this.refreshFields.bind(this))\n\t\t\t\t.catch(this.obtainError.bind(this));\n\t\t},\n\t\tchangeBasketItem(item)\n\t\t{\n\t\t\tthis.$store.dispatch('orderCreation/updateBasketItem', {\n\t\t\t\tindex: item.index,\n\t\t\t\tfields: item.fields\n\t\t\t});\n\t\t},\n\t\tremoveItem(item)\n\t\t{\n\t\t\tthis.$store.dispatch('orderCreation/removeItem', {\n\t\t\t\tindex: item.index\n\t\t\t});\n\t\t\tthis.refreshBasket();\n\t\t},\n\t\tobtainError(error)\n\t\t{\n\t\t\tthis._isRefreshingProcess = false;\n\t\t\t//@Todo show error info\n\t\t},\n\t\trefreshFields(result)\n\t\t{\n\t\t\tthis._isRefreshingProcess = false;\n\t\t\tlet data = BX.prop.getObject(result,\"data\", {});\n\t\t\tlet items = BX.prop.get(data,\"items\",[]);\n\t\t\tlet basket = [];\n\t\t\tfor (let i in items)\n\t\t\t{\n\t\t\t\tbasket.push({\n\t\t\t\t\tindex: items[i].sort,\n\t\t\t\t\tfields: items[i],\n\t\t\t\t});\n\t\t\t}\n\t\t\tthis.$store.dispatch('orderCreation/setBasket', basket);\n\t\t\tthis.$store.commit('orderCreation/setTotal', BX.prop.getObject(data,\"total\",{}));\n\t\t},\n\t\taddBasketItemForm()\n\t\t{\n\t\t\tthis.$store.commit('orderCreation/addBasketItem');\n\t\t}\n\t},\n\tcomputed:\n\t{\n\t\tlocalize()\n\t\t{\n\t\t\treturn Vue.getFilteredPhrases('SALESCENTER_');\n\t\t},\n\n\t\ttotal()\n\t\t{\n\t\t\treturn this.order.total;\n\t\t},\n\n\t\tcountItems()\n\t\t{\n\t\t\treturn this.order.basket.length;\n\t\t},\n\n\t\t...Vuex.mapState({\n\t\t\torder: state => state.orderCreation,\n\t\t})\n\t},\n\ttemplate: `\n\t<div>\n\t\t<div class=\"salescenter-app-page-title\">\n\t\t\t<div class=\"salescenter-app-page-title-text\">{{this.localize.SALESCENTER_PAYMENT_TITLE}}</div>\n\t\t</div>\n\t\t<div class=\"salescenter-app-page-content\">\n\t\t\t<div v-for=\"(item, index) in order.basket\" class=\"salescenter-app-form-wrapper\">\n\t\t\t\t<${config.templateAddPaymentProductName} \n\t\t\t\t\t:basketItem=\"item\" \n\t\t\t\t\t:basketItemIndex=\"index\"  \n\t\t\t\t\t:countItems=\"countItems\"\n\t\t\t\t\t:selectedProductIds=\"order.selectedProducts\"\n\t\t\t\t\t@changeBasketItem=\"changeBasketItem\" \n\t\t\t\t\t@removeItem=\"removeItem\" \n\t\t\t\t\t@refreshBasket=\"refreshBasket\" \n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div class=\"salescenter-app-add-item-container\">\n\t\t\t\t<a @click=\"addBasketItemForm\" class=\"salescenter-app-add-item-link\">{{this.localize.SALESCENTER_PRODUCT_ADD_PRODUCT}}</a>\n\t\t\t</div>\n\t\t\t<div class=\"salescenter-app-result-container\">\n\t\t\t\t<div class=\"salescenter-app-result-grid-row\">\n\t\t\t\t\t<div class=\"salescenter-app-result-grid-item\">{{this.localize.SALESCENTER_PRODUCT_TOTAL_SUM}}:</div>\n\t\t\t\t\t<div class=\"salescenter-app-result-grid-item\">{{this.total.sum}}</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"salescenter-app-result-grid-row salescenter-app-result-grid-benefit\">\n\t\t\t\t\t<div class=\"salescenter-app-result-grid-item\">{{this.localize.SALESCENTER_PRODUCT_TOTAL_DISCOUNT}}:</div>\n\t\t\t\t\t<div class=\"salescenter-app-result-grid-item\">{{this.total.discount}}</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"salescenter-app-result-grid-row salescenter-app-result-grid-total\">\n\t\t\t\t\t<div class=\"salescenter-app-result-grid-item\">{{this.localize.SALESCENTER_PRODUCT_TOTAL_RESULT}}:</div>\n\t\t\t\t\t<div class=\"salescenter-app-result-grid-item\">{{this.total.result}}</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n`,\n});","import {Vue} from 'ui.vue';\nimport {VuexBuilder} from 'ui.vue.vuex';\n\nimport {rest as Rest} from 'rest.client';\nimport {PULL as Pull} from 'pull.client';\n\nimport {ApplicationModel} from './models/application';\nimport {OrderCreationModel} from './models/ordercreation';\n\nimport {config} from \"./config\";\nimport './component';\nimport './component.css';\nimport './bx-salescenter-app-add-payment';\nimport {Manager} from 'salescenter.manager';\nimport {Loader} from \"main.loader\";\n\nexport class App\n{\n\tconstructor(options = {dialogId: null, sessionId: null, orderAddPullTag: null, userId: 0})\n\t{\n\t\tthis.slider = BX.SidePanel.Instance.getTopSlider();\n\t\tthis.dialogId = options.dialogId;\n\t\tthis.sessionId = parseInt(options.sessionId);\n\t\tthis.orderAddPullTag = options.orderAddPullTag;\n\t\tthis.userId = options.userId;\n\t\tthis.options = options;\n\t\tthis.isProgress = false;\n\t\tPull.start().then(() => this.initPull());\n\n\t\tthis.initStore()\n\t\t\t.then((result) => this.initTemplate(result))\n\t\t\t.then(this.fillPages())\n\t\t\t.catch((error) => this.showError(error))\n\t\t;\n\t}\n\n\tinitStore()\n\t{\n\t\tconst builder = new VuexBuilder();\n\n\t\treturn builder.addModel(ApplicationModel.create())\n\t\t\t.addModel(OrderCreationModel.create())\n\t\t\t.useNamespace(true)\n\t\t\t.setDatabaseConfig(config.databaseConfig)\n\t\t\t.build();\n\t}\n\n\tinitPull()\n\t{\n\t\tif(typeof this.orderAddPullTag === \"string\")\n\t\t{\n\t\t\tPull.subscribe({\n\t\t\t\tmoduleId: config.moduleId,\n\t\t\t\tcommand: this.orderAddPullTag,\n\t\t\t\tcallback: (params) =>\n\t\t\t\t{\n\t\t\t\t\tconsole.log(params);\n\t\t\t\t\tconsole.log(this);\n\t\t\t\t\tif(parseInt(params.sessionId) === this.sessionId && params.orderId > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.sendOrder(params.orderId);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t}\n\n\tinitTemplate(result)\n\t{\n\t\treturn new Promise((resolve, reject) =>\n\t\t{\n\t\t\tconst context = this;\n\t\t\tthis.store = result.store;\n\n\t\t\tthis.templateEngine = Vue.create({\n\t\t\t\tel: document.getElementById('salescenter-app-root'),\n\t\t\t\ttemplate: '<' + config.templateName + '/>',\n\t\t\t\tstore: this.store,\n\t\t\t\tmounted()\n\t\t\t\t{\n\t\t\t\t\tthis.$app = context;\n\t\t\t\t\tresolve();\n\t\t\t\t},\n\t\t\t});\n\t\t});\n\t}\n\n\tcloseApplication()\n\t{\n\t\tif(this.slider)\n\t\t{\n\t\t\tlet sliders = BX.SidePanel.Instance.getOpenSliders();\n\t\t\tlet startClosing = false;\n\t\t\tsliders.forEach((slider) => {\n\t\t\t\tif(slider === this.slider)\n\t\t\t\t{\n\t\t\t\t\tstartClosing = true;\n\t\t\t\t}\n\t\t\t\tif(startClosing)\n\t\t\t\t{\n\t\t\t\t\tslider.close();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tfillPages()\n\t{\n\t\treturn new Promise((resolve) =>\n\t\t{\n\t\t\tRest.callMethod('salescenter.page.list', {}).then((result) => {\n\t\t\t\tthis.store.commit('application/setPages', {pages: result.answer.result.pages});\n\t\t\t\tresolve();\n\t\t\t});\n\t\t});\n\t}\n\n\tshowError(error)\n\t{\n\t\tconsole.error(error);\n\t}\n\n\tgetLoader()\n\t{\n\t\tif(!this.loader)\n\t\t{\n\t\t\tthis.loader = new Loader({size: 200});\n\t\t}\n\n\t\treturn this.loader;\n\t}\n\n\tshowLoader()\n\t{\n\t\tthis.getLoader().show(this.templateEngine.$el);\n\t}\n\n\thideLoader()\n\t{\n\t\tthis.getLoader().hide();\n\t}\n\n\tstartProgress()\n\t{\n\t\tthis.isProgress = true;\n\t\tthis.showLoader();\n\t}\n\n\tstopProgress()\n\t{\n\t\tthis.isProgress = false;\n\t\tthis.hideLoader();\n\t}\n\n\thidePage(page)\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tManager.hidePage(page.id).then(() =>\n\t\t\t{\n\t\t\t\tthis.store.commit('application/removePage', {page: page});\n\t\t\t\tresolve();\n\t\t\t}).catch((result) =>\n\t\t\t{\n\t\t\t\tthis.showError(result.answer.error_description);\n\t\t\t\treject(result.answer.error_description);\n\t\t\t});\n\t\t});\n\t}\n\n\tsendPage(pageId)\n\t{\n\t\tif(this.isProgress)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tthis.startProgress();\n\t\tRest.callMethod('salescenter.page.send', {\n\t\t\tid: pageId,\n\t\t\toptions: {\n\t\t\t\tdialogId: this.dialogId,\n\t\t\t},\n\t\t}).then((result) =>\n\t\t{\n\t\t\tthis.stopProgress();\n\t\t\tthis.closeApplication();\n\t\t}).catch((result) =>\n\t\t{\n\t\t\tthis.showError(result.answer.error_description);\n\t\t\tthis.stopProgress();\n\t\t});\n\t}\n\n\tsendOrder(orderId)\n\t{\n\t\tif(this.isProgress)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tthis.startProgress();\n\t\tRest.callMethod('salescenter.order.sendOrder', {\n\t\t\torderId: orderId,\n\t\t\toptions: {\n\t\t\t\tdialogId: this.dialogId,\n\t\t\t},\n\t\t}).then((result) =>\n\t\t{\n\t\t\tthis.stopProgress();\n\t\t\tthis.closeApplication();\n\t\t}).catch((result) =>\n\t\t{\n\t\t\tthis.showError(result.answer.error_description)\n\t\t\tthis.stopProgress();\n\t\t});\n\t}\n\n\tsendPayment(buttonEvent)\n\t{\n\t\tlet basket = this.store.getters['orderCreation/getBasket']();\n\t\tif (basket.length === 0 || this.isProgress)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tif (BX.type.isDomNode(buttonEvent))\n\t\t{\n\t\t\tbuttonEvent.classList.add('ui-btn-wait');\n\t\t}\n\n\t\tthis.startProgress();\n\t\tBX.ajax.runAction('salescenter.order.createPayment', {\n\t\t\tdata: {\n\t\t\t\tbasketItems: basket,\n\t\t\t\toptions: {\n\t\t\t\t\tdialogId: this.dialogId,\n\t\t\t\t\tsessionId: this.sessionId,\n\t\t\t\t}\n\t\t\t},\n\t\t}).then((result) =>\n\t\t{\n\t\t\tthis.store.dispatch('orderCreation/resetBasket');\n\t\t\tthis.stopProgress();\n\t\t\tif (BX.type.isDomNode(buttonEvent))\n\t\t\t{\n\t\t\t\tbuttonEvent.classList.remove('ui-btn-wait');\n\t\t\t}\n\t\t\tthis.closeApplication();\n\t\t}).catch((error) =>\n\t\t{\n\t\t\tthis.stopProgress();\n\t\t\tif (BX.type.isDomNode(buttonEvent))\n\t\t\t{\n\t\t\t\tbuttonEvent.classList.remove('ui-btn-wait');\n\t\t\t}\n\t\t\tthis.showError(error);\n\t\t});\n\t}\n}"],"names":["ApplicationModel","pages","previewUrl","error","setPages","state","payload","saveState","removePage","page","filter","id","landingId","addPage","push","VuexBuilderModel","OrderCreationModel","selectedProducts","basket","total","sum","discount","result","productId","code","name","sort","basePrice","quantity","showDiscount","discountType","module","totalPrice","measureCode","measureName","isCustomPrice","isCreatedProduct","formatted","resetBasket","commit","removeItem","length","i","index","fields","setBasket","basketItems","element","updateBasketItem","getBasket","getBlankBasketItem","params","getBasketItemState","addBasketItem","item","Vue","set","Object","assign","refreshBasket","deleteBasketItem","splice","setSelectedProducts","basketItem","parseInt","map","filtered","setTotal","config","databaseConfig","templateName","templateAddPaymentName","templateAddPaymentProductName","moduleId","component","data","isPagesShown","isShowPreview","isShowPayment","frameSrc","pageTitle","currentPage","actions","created","openFirstPage","methods","getActions","text","localize","SALESCENTER_RIGHT_ACTION_COPY_URL","onclick","copyUrl","SALESCENTER_RIGHT_ACTION_EDIT","editPage","SALESCENTER_RIGHT_ACTION_HIDE","hidePage","SALESCENTER_RIGHT_ACTION_DELETE","SALESCENTER_RIGHT_ACTION_ADD","items","SALESCENTER_RIGHT_ACTION_ADD_SITE_B24","addSite","SALESCENTER_RIGHT_ACTION_ADD_STORE_B24","addStore","SALESCENTER_RIGHT_ACTION_ADD_CUSTOM","showAddUrlPopup","application","onPageClick","url","hideActionsPopup","showActionsPopup","event","target","BX","PopupMenu","show","offsetLeft","offsetTop","closeByEsc","destroy","Manager","addSitePage","then","$root","$app","fillPages","addStorePage","editLandingPage","addCustomPage","showPaymentForm","showOrdersList","showOrderAdd","onFormsClick","openContactCenter","openHelpDesk","isPageSelected","send","sendPayment","sendPage","close","closeApplication","computed","getFilteredPhrases","Vuex","mapState","template","props","productSelector","currencyName","options","defaultMeasure","measures","type","isArray","SYMBOL","CODE","changeData","mounted","dropdownSelector","$el","querySelector","UI","Dropdown","searchAction","searchOptions","restrictedSearchIds","selectedProductIds","enableCreation","searchResultRenderer","targetElement","title","subTitle","SALESCENTER_PRODUCT_BEFORE_SEARCH_TITLE","messages","creationLegend","SALESCENTER_PRODUCT_CREATE","notFound","SALESCENTER_PRODUCT_NOT_FOUND","events","onSelect","selectCatalogItem","bind","onAdd","showCreationForm","onReset","resetSearchForm","updated","includes","init","toggleDiscount","value","$emit","basketItemIndex","isNeedRefreshAfterChanges","isCreationMode","changeQuantity","newQuantity","parseFloat","changeName","newName","changeBasePrice","newPrice","changeDiscountType","changeDiscount","discountValue","changeMeasureValue","destroyPopupWindow","hideCreationForm","sender","undefined","getMeasureName","getMeasureCode","defaultPrice","defaultSum","$store","addBasketItemForm","_isRefreshingProcess","order","ajax","runAction","refreshFields","catch","obtainError","changeBasketItem","dispatch","prop","getObject","get","countItems","orderCreation","App","dialogId","sessionId","orderAddPullTag","userId","slider","SidePanel","Instance","getTopSlider","isProgress","Pull","start","initPull","initStore","initTemplate","showError","builder","VuexBuilder","addModel","create","useNamespace","setDatabaseConfig","build","subscribe","command","callback","console","log","orderId","sendOrder","Promise","resolve","reject","context","store","templateEngine","el","document","getElementById","sliders","getOpenSliders","startClosing","forEach","Rest","callMethod","answer","loader","Loader","size","getLoader","hide","showLoader","hideLoader","error_description","pageId","startProgress","stopProgress","buttonEvent","getters","isDomNode","classList","add","remove"],"mappings":"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"}