{"version":3,"file":"app.bundle.js","sources":["../src/models/application.js","../src/models/ordercreation.js","../src/models/document-selector.js","../src/components/templates-type-mixin.js","../src/components/stage-blocks/tile-collection/tile-collection-mixins.js","../src/components/stage-blocks/tile-collection/uninstalled.js","../src/components/stage-blocks/tile-collection/installed.js","../src/components/stage-blocks/stage-mixin.js","../src/components/stage-blocks/cashbox.js","../src/product.js","../src/components/stage-blocks/product.js","../src/components/delivery-selector.js","../src/components/shipment-view.js","../src/components/stage-blocks/delivery-vuex.js","../src/components/stage-blocks/paysystem.js","../src/components/stage-blocks/chat-message.js","../src/components/stage-blocks/automation.js","../src/components/deal-receiving-payment/stage-blocks/send.js","../src/components/stage-blocks/timeline.js","../src/components/stage-blocks/document-selector.js","../src/components/chat-receiving-payment/stage-blocks-list.js","../src/component-mixin.js","../src/start.js","../src/no-payment-systems.js","../src/chat.js","../src/components/stage-blocks/sms-message.js","../src/components/deal-receiving-payment/stage-blocks-list.js","../src/components/crm-entity-create-payment/stage-blocks-list.js","../src/components/deal-creating-shipment/stage-blocks/send.js","../src/components/deal-creating-shipment/stage-blocks-list.js","../src/deal.js","../src/app.js"],"sourcesContent":["import {VuexBuilderModel} from 'ui.vue.vuex';\n\nexport class ApplicationModel extends VuexBuilderModel\n{\n\t/**\n\t * @inheritDoc\n\t */\n\tgetName()\n\t{\n\t\treturn 'application';\n\t}\n\n\tgetState()\n\t{\n\t\treturn {\n\t\t\tpages: [],\n\t\t}\n\t}\n\n\tgetGetters()\n\t{\n\t\treturn {\n\t\t\tgetPages: (state) => () =>\n\t\t\t{\n\t\t\t\treturn state.pages;\n\t\t\t},\n\t\t}\n\t}\n\n\tgetMutations()\n\t{\n\t\treturn {\n\t\t\tsetPages: (state, payload) =>\n\t\t\t{\n\t\t\t\tif(typeof payload.pages === 'object')\n\t\t\t\t{\n\t\t\t\t\tstate.pages = payload.pages        ;\n\t\t\t\t\tthis.saveState(state);\n\t\t\t\t}\n\t\t\t},\n\t\t\tremovePage: (state, payload) =>\n\t\t\t{\n\t\t\t\tif(typeof payload.page === 'object')\n\t\t\t\t{\n\t\t\t\t\tstate.pages = state.pages.filter((page) => {\n\t\t\t\t\t\treturn !(\n\t\t\t\t\t\t\t(payload.page.id && payload.page.id > 0 && page.id === payload.page.id) ||\n\t\t\t\t\t\t\t(payload.page.landingId && payload.page.landingId > 0 && page.landingId === payload.page.landingId)\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\t\t\tthis.saveState(state);\n\t\t\t\t}\n\t\t\t},\n\t\t\taddPage: (state, payload) =>\n\t\t\t{\n\t\t\t\tif(typeof payload.page === 'object')\n\t\t\t\t{\n\t\t\t\t\tstate.pages.push(payload.page);\n\t\t\t\t\tthis.saveState(state);\n\t\t\t\t}\n\t\t\t},\n\t\t}\n\t}\n}","import {VuexBuilderModel} from 'ui.vue.vuex';\n\nexport class OrderCreationModel extends VuexBuilderModel\n{\n\t/**\n\t * @inheritDoc\n\t */\n\tgetName()\n\t{\n\t\treturn 'orderCreation';\n\t}\n\n\tgetState()\n\t{\n\t\treturn {\n\t\t\tcurrency: '',\n\t\t\tprocessingId: null,\n\t\t\tbasket: [],\n\t\t\tbasketVersion: 0,\n\t\t\tpropertyValues: [],\n\t\t\tdeliveryExtraServicesValues: [],\n\t\t\texpectedDelivery: null,\n\t\t\tdeliveryResponsibleId: null,\n\t\t\tpersonTypeId: null,\n\t\t\tdeliveryId: null,\n\t\t\tdelivery: null,\n\t\t\tisEnabledSubmit: false,\n\t\t\terrors: [],\n\t\t\ttotal: {\n\t\t\t\tsum: null,\n\t\t\t\tdiscount: null,\n\t\t\t\tresult: null,\n\t\t\t},\n\t\t\t/**\n\t\t\t * ID of selected pay systems available for order payment\n\t\t\t */\n\t\t\tavailablePaySystemsIds: [],\n\t\t}\n\t}\n\n\tgetActions()\n\t{\n\t\treturn {\n\t\t\tresetBasket ({ commit })\n\t\t\t{\n\t\t\t\tcommit('clearBasket');\n\t\t\t},\n\t\t\tsetCurrency: ({ commit }, payload) =>\n\t\t\t{\n\t\t\t\tconst currency = payload || '';\n\t\t\t\tcommit('setCurrency', currency);\n\t\t\t},\n\t\t\tsetDeliveryId: ({ commit }, payload) =>\n\t\t\t{\n\t\t\t\tcommit('setDeliveryId', payload);\n\t\t\t},\n\t\t\tsetDelivery: ({ commit }, payload) =>\n\t\t\t{\n\t\t\t\tcommit('setDelivery', payload);\n\t\t\t},\n\t\t\tsetPropertyValues: ({ commit }, payload) =>\n\t\t\t{\n\t\t\t\tcommit('setPropertyValues', payload);\n\t\t\t},\n\t\t\tsetDeliveryExtraServicesValues: ({ commit }, payload) =>\n\t\t\t{\n\t\t\t\tcommit('setDeliveryExtraServicesValues', payload);\n\t\t\t},\n\t\t\tsetExpectedDelivery: ({ commit }, payload) =>\n\t\t\t{\n\t\t\t\tcommit('setExpectedDelivery', payload);\n\t\t\t},\n\t\t\tsetDeliveryResponsibleId: ({ commit }, payload) =>\n\t\t\t{\n\t\t\t\tcommit('setDeliveryResponsibleId', payload);\n\t\t\t},\n\t\t\tsetPersonTypeId: ({ commit }, payload) =>\n\t\t\t{\n\t\t\t\tcommit('setPersonTypeId', payload);\n\t\t\t},\n\t\t\tsetAvailablePaySystemsIds: ({ commit }, payload) =>\n\t\t\t{\n\t\t\t\tcommit('setAvailablePaySystemsIds', payload);\n\t\t\t},\n\t\t}\n\t}\n\n\tgetGetters()\n\t{\n\t\treturn {\n\t\t\tgetBasket: state => index =>\n\t\t\t{\n\t\t\t\treturn state.basket;\n\t\t\t},\n\t\t\tisAllowedSubmit: state =>\n\t\t\t{\n\t\t\t\treturn state.isEnabledSubmit;\n\t\t\t},\n\t\t\tgetTotal: state =>\n\t\t\t{\n\t\t\t\treturn state.total;\n\t\t\t},\n\t\t\tgetDelivery: state =>\n\t\t\t{\n\t\t\t\treturn state.delivery;\n\t\t\t},\n\t\t\tgetDeliveryId: state =>\n\t\t\t{\n\t\t\t\treturn state.deliveryId;\n\t\t\t},\n\t\t\tgetPropertyValues: state =>\n\t\t\t{\n\t\t\t\treturn state.propertyValues;\n\t\t\t},\n\t\t\tgetDeliveryExtraServicesValues: state =>\n\t\t\t{\n\t\t\t\treturn state.deliveryExtraServicesValues;\n\t\t\t},\n\t\t\tgetExpectedDelivery: state =>\n\t\t\t{\n\t\t\t\treturn state.expectedDelivery;\n\t\t\t},\n\t\t\tgetDeliveryResponsibleId: state =>\n\t\t\t{\n\t\t\t\treturn state.deliveryResponsibleId;\n\t\t\t},\n\t\t\tgetPersonTypeId: state =>\n\t\t\t{\n\t\t\t\treturn state.personTypeId;\n\t\t\t},\n\t\t\tgetAvailablePaySystemsIds: state =>\n\t\t\t{\n\t\t\t\treturn state.availablePaySystemsIds;\n\t\t\t},\n\t\t}\n\t}\n\n\tgetMutations()\n\t{\n\t\treturn {\n\t\t\tsetBasket: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.basket = payload;\n\t\t\t},\n\t\t\tsetTotal: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.total = Object.assign(state.total, payload);\n\t\t\t},\n\t\t\tclearBasket: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.basket = [];\n\t\t\t\tstate.basketVersion++ ;\n\t\t\t},\n\t\t\tsetErrors: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.errors = payload;\n\t\t\t},\n\t\t\tsetDeliveryId: (state, deliveryId) =>\n\t\t\t{\n\t\t\t\tstate.deliveryId = deliveryId;\n\t\t\t},\n\t\t\tsetDelivery: (state, delivery) =>\n\t\t\t{\n\t\t\t\tstate.delivery = delivery;\n\t\t\t},\n\t\t\tsetPropertyValues: (state, propertyValues) =>\n\t\t\t{\n\t\t\t\tstate.propertyValues = propertyValues;\n\t\t\t},\n\t\t\tsetDeliveryExtraServicesValues: (state, deliveryExtraServicesValues) =>\n\t\t\t{\n\t\t\t\tstate.deliveryExtraServicesValues = deliveryExtraServicesValues;\n\t\t\t},\n\t\t\tsetExpectedDelivery: (state, expectedDelivery) =>\n\t\t\t{\n\t\t\t\tstate.expectedDelivery = expectedDelivery;\n\t\t\t},\n\t\t\tsetDeliveryResponsibleId: (state, deliveryResponsibleId) =>\n\t\t\t{\n\t\t\t\tstate.deliveryResponsibleId = deliveryResponsibleId;\n\t\t\t},\n\t\t\tclearErrors: (state) =>\n\t\t\t{\n\t\t\t\tstate.errors = [];\n\t\t\t},\n\t\t\tsetProcessingId: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.processingId = payload;\n\t\t\t},\n\t\t\tsetCurrency: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.currency = payload;\n\t\t\t},\n\t\t\tsetPersonTypeId: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.personTypeId = payload;\n\t\t\t},\n\t\t\tsetAvailablePaySystemsIds: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.availablePaySystemsIds = payload;\n\t\t\t},\n\t\t\tenableSubmit: (state) =>\n\t\t\t{\n\t\t\t\tstate.isEnabledSubmit = true;\n\t\t\t},\n\t\t\tdisableSubmit: (state) =>\n\t\t\t{\n\t\t\t\tstate.isEnabledSubmit = false;\n\t\t\t},\n\t\t}\n\t}\n}\n","import {VuexBuilderModel} from 'ui.vue.vuex';\nimport {rest as Rest} from 'rest.client';\n\nexport class DocumentSelectorModel extends VuexBuilderModel\n{\n\t/**\n\t * @inheritDoc\n\t */\n\tgetName()\n\t{\n\t\treturn 'documentSelector';\n\t}\n\n\tgetActions()\n\t{\n\t\treturn {\n\t\t\taddDocument({commit, dispatch}, {document})\n\t\t\t{\n\t\t\t\tcommit('addDocument', {document});\n\t\t\t\tdispatch('setBoundDocumentId', {boundDocumentId: document.id});\n\t\t\t},\n\t\t\tsetBoundDocumentId({state, commit}, {boundDocumentId})\n\t\t\t{\n\t\t\t\tif (state.paymentId > 0)\n\t\t\t\t{\n\t\t\t\t\tRest.callMethod('crm.documentgenerator.document.bindToPayment', {\n\t\t\t\t\t\tid: boundDocumentId,\n\t\t\t\t\t\tpaymentId: state.paymentId,\n\t\t\t\t\t}).then(() => {\n\t\t\t\t\t\tcommit('setBoundDocumentId', {boundDocumentId});\n\t\t\t\t\t}).catch((response) => {\n\t\t\t\t\t\tconsole.error(response);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tcommit('setBoundDocumentId', {boundDocumentId});\n\t\t\t\t}\n\t\t\t},\n\t\t\tloadTemplates({state, commit})\n\t\t\t{\n\t\t\t\tif (Number(state.entityTypeId) <= 0 || Number(state.entityId) <= 0)\n\t\t\t\t{\n\t\t\t\t\tcommit('setTemplates', {templates: []});\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tRest.callMethod('crm.documentgenerator.template.listForItem', {\n\t\t\t\t\tentityTypeId: state.entityTypeId,\n\t\t\t\t\tentityId: state.entityId,\n\t\t\t\t}).then((response) => {\n\t\t\t\t\tif (response.answer.result.templates)\n\t\t\t\t\t{\n\t\t\t\t\t\tcommit('setTemplates', {templates: response.answer.result.templates});\n\t\t\t\t\t}\n\t\t\t\t}).catch((response) => {\n\t\t\t\t\tconsole.error(response);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\tgetState()\n\t{\n\t\treturn {\n\t\t\tentityTypeId: null,\n\t\t\tentityId: null,\n\t\t\tpaymentId: null,\n\t\t\tdocuments: [],\n\t\t\ttemplates: [],\n\t\t\tboundDocumentId: null,\n\t\t\tselectedTemplateId: null,\n\t\t}\n\t}\n\n\tgetGetters()\n\t{\n\t\treturn {\n\t\t\tgetTemplates: (state) => {\n\t\t\t\treturn state.templates;\n\t\t\t},\n\t\t\tgetDocuments: (state) => {\n\t\t\t\treturn state.documents;\n\t\t\t},\n\t\t\tgetBoundDocumentId: (state) => {\n\t\t\t\treturn state.boundDocumentId;\n\t\t\t},\n\t\t\tgetSelectedTemplateId: (state) => {\n\t\t\t\treturn state.selectedTemplateId;\n\t\t\t},\n\t\t}\n\t}\n\n\tgetMutations()\n\t{\n\t\treturn {\n\t\t\tfillState: (state, payload) => {\n\t\t\t\tstate.entityTypeId = payload.entityTypeId;\n\t\t\t\tstate.entityId = payload.entityId;\n\t\t\t\tstate.paymentId = payload.paymentId;\n\t\t\t\tstate.documents = payload.documents;\n\t\t\t\tstate.templates = payload.templates;\n\t\t\t\tstate.boundDocumentId = payload.boundDocumentId;\n\t\t\t\tstate.selectedTemplateId = payload.selectedTemplateId;\n\t\t\t},\n\t\t\tsetTemplates: (state, payload) => {\n\t\t\t\tif(typeof payload.templates === 'object')\n\t\t\t\t{\n\t\t\t\t\tstate.templates = payload.templates;\n\t\t\t\t}\n\t\t\t},\n\t\t\tsetBoundDocumentId: (state, payload) => {\n\t\t\t\tif(typeof payload.boundDocumentId === 'number')\n\t\t\t\t{\n\t\t\t\t\tstate.boundDocumentId = payload.boundDocumentId;\n\t\t\t\t}\n\t\t\t},\n\t\t\tsetSelectedTemplateId: (state, payload) => {\n\t\t\t\tif(typeof payload.selectedTemplateId === 'number')\n\t\t\t\t{\n\t\t\t\t\tstate.selectedTemplateId = payload.selectedTemplateId;\n\t\t\t\t\tstate.boundDocumentId = null;\n\t\t\t\t}\n\t\t\t},\n\t\t\taddDocument: (state, payload) => {\n\t\t\t\tif(typeof payload.document === 'object')\n\t\t\t\t{\n\t\t\t\t\tconst newDocument = payload.document;\n\t\t\t\t\tif (!newDocument.id)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tconst documents = state.documents || [];\n\t\t\t\t\tlet isUpdated = false;\n\t\t\t\t\tfor (const index in documents)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (documents[index].id === newDocument.id)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tdocuments[index] = newDocument;\n\t\t\t\t\t\t\tisUpdated = true;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (!isUpdated)\n\t\t\t\t\t{\n\t\t\t\t\t\tdocuments.unshift(newDocument);\n\t\t\t\t\t}\n\t\t\t\t\tstate.documents = documents;\n\t\t\t\t}\n\t\t\t},\n\t\t}\n\t}\n}\n","let MixinTemplatesType = {\n\tdata() {\n\t\treturn {\n\t\t\teditable: true\n\t\t};\n\t},\n\tcreated(){\n\t\tthis.$root.$on(\"on-change-editable\", (value) => {\n\t\t\tthis.editable = value;\n\t\t});\n\t}\n}\n\nexport {\n\tMixinTemplatesType\n}","import\n{\n\tAppSlider,\n\tEventTypes\n} \t\t\t\t\t\t\t\tfrom 'salescenter.marketplace';\nimport\n{\n\tLabel,\n\tTileLabel,\n\tTileHintImg,\n\tTileLabelPlus,\n\tTileHintImgCaption,\n\tTileHintBackground,\n\tTileHintBackgroundCaption,\n} \t\t\t\t\t\t\t\tfrom 'salescenter.component.stage-block.tile';\nimport * as Hint \t\t\t\tfrom 'salescenter.component.stage-block.hint';\nimport * as Tile \t\t\t\tfrom 'salescenter.tile';\n\n\nlet TileCollectionMixins = {\n\n\tcomponents:\n\t\t{\n\t\t\t'label-block'\t\t\t\t\t\t\t:\tLabel,\n\t\t\t'tile-label-block'\t\t\t\t\t\t:\tTileLabel,\n\t\t\t'tile-hint-img-block'\t\t\t\t\t:\tTileHintImg,\n\t\t\t'tile-hint-plus-block'\t\t\t\t\t:\tTileLabelPlus,\n\t\t\t'tile-hint-img-caption-block'\t\t\t:\tTileHintImgCaption,\n\t\t\t'tile-hint-background-block'\t\t\t:\tTileHintBackground,\n\t\t\t'tile-hint-background-caption-block'\t:\tTileHintBackgroundCaption\n\t\t},\n\tmethods:\n\t\t{\n\t\t\tgetCollectionTile()\n\t\t\t{\n\t\t\t\treturn this.tiles;\n\t\t\t},\n\n\t\t\tgetCollectionTileByFilter(filter: Array)\n\t\t\t{\n\t\t\t\tlet map = new Map();\n\t\t\t\tlet collection = this.getCollectionTile();\n\n\t\t\t\tif(filter.hasOwnProperty('type') && filter.type.length > 0)\n\t\t\t\t{\n\t\t\t\t\tcollection\n\t\t\t\t\t\t.forEach((item, index) => {\n\n\t\t\t\t\t\t\tif(filter.type === item.getType())\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tmap.set(index, item);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tcollection\n\t\t\t\t\t\t.forEach((item, index) => map.set(index, item));\n\t\t\t\t}\n\n\t\t\t\treturn map;\n\t\t\t},\n\n\t\t\thasTileOfferFromCollection()\n\t\t\t{\n\t\t\t\tlet map = this.getCollectionTileByFilter({\n\t\t\t\t\ttype: Tile.Offer.type()\n\t\t\t\t});\n\n\t\t\t\treturn map.size > 0;\n\t\t\t},\n\n\t\t\thasTileMoreFromCollection()\n\t\t\t{\n\t\t\t\tlet map = this.getCollectionTileByFilter({\n\t\t\t\t\ttype: Tile.More.type()\n\t\t\t\t});\n\n\t\t\t\treturn map.size > 0;\n\t\t\t},\n\n\t\t\tgetTileOfferFromCollection()\n\t\t\t{\n\t\t\t\tlet map = this.getCollectionTileByFilter({\n\t\t\t\t\ttype: Tile.Offer.type()\n\t\t\t\t});\n\n\t\t\t\tlet result = {};\n\t\t\t\tmap.forEach((item, inx)=> { result = {index: inx, tile: item}; return false;});\n\t\t\t\treturn result;\n\t\t\t},\n\n\t\t\tgetTileMoreFromCollection()\n\t\t\t{\n\t\t\t\tlet map = this.getCollectionTileByFilter({\n\t\t\t\t\ttype: Tile.More.type()\n\t\t\t\t});\n\n\t\t\t\tlet result = {};\n\t\t\t\tmap.forEach((item, inx)=> { result = {index: inx, tile: item}; return false;});\n\t\t\t\treturn result;\n\t\t\t},\n\n\t\t\tgetTileByIndex(index)\n\t\t\t{\n\t\t\t\tlet  tile = null;\n\t\t\t\tthis.getCollectionTileByFilter({})\n\t\t\t\t\t.forEach((item, inx)=> {\n\n\t\t\t\t\t\tif(index === inx)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttile = item;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\treturn tile;\n\t\t\t},\n\n\t\t\topenSlider(inx)\n\t\t\t{\n\t\t\t\tlet slider = new AppSlider();\n\t\t\t\tlet tile = this.getTileByIndex(inx);\n\n\t\t\t\tslider.openAppLocal(tile, this.getOptionSlider);\n\t\t\t\tslider.subscribe(EventTypes.AppSliderSliderClose,\n\t\t\t\t\t(e) => this.$emit('on-tile-slider-close', {data: e.data})\n\t\t\t\t);\n\t\t\t},\n\n\t\t\tisControlTile(tile: Tile.Base)\n\t\t\t{\n\t\t\t\treturn [Tile.More.type(), Tile.Offer.type()].includes(tile.getType());\n\t\t\t},\n\n\t\t\tshowHint(inx, e)\n\t\t\t{\n\t\t\t\tlet event = e.data.event;\n\t\t\t\tlet tile = this.getTileByIndex(inx);\n\n\t\t\t\tthis.popup = new Hint.Popup();\n\t\t\t\tthis.popup.show(event.target, tile.info);\n\t\t\t},\n\n\t\t\thideHint()\n\t\t\t{\n\t\t\t\tif(this.popup)\n\t\t\t\t{\n\t\t\t\t\tthis.popup.hide();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\tcomputed:\n\t\t{\n\t\t\tgetOptionSlider()\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\twidth: 1000\n\t\t\t\t}\n\t\t\t}\n\t\t},\n};\nexport {\n\tTileCollectionMixins\n}","import {TileCollectionMixins} from \"./tile-collection-mixins\";\n\nconst Uninstalled = {\n\tprops: {\n\t\ttiles: {\n\t\t\ttype: Array,\n\t\t\trequired: true\n\t\t}\n\t},\n\tmixins:[TileCollectionMixins],\n\ttemplate: `\t\t\n\t\t<div>\n\t\t\t<template v-for=\"(tile, index) in tiles\">\n\t\t\t\t<tile-hint-background-caption-block\tv-if=\"tile.img.length > 0 && tile.showTitle\"\n\t\t\t\t\t:src=\"tile.img\"\n\t\t\t\t\t:name=\"tile.name\"\n\t\t\t\t\t:caption=\"tile.name\"\n\t\t\t\t\tv-on:tile-hint-bg-label-on-click=\"openSlider(index)\"\n\t\t\t\t\tv-on:tile-hint-bg-label-on-mouseenter=\"showHint(index, $event)\"\n\t\t\t\t\tv-on:tile-hint-bg-label-on-mouseleave=\"hideHint\"\n\t\t\t\t/>\n\t\t\t\t<tile-hint-background-block\t\tv-else-if=\"tile.img.length > 0\"\n\t\t\t\t\t:src=\"tile.img\"\n\t\t\t\t\t:name=\"tile.name\"\n\t\t\t\t\tv-on:tile-hint-bg-on-click=\"openSlider(index)\"\n\t\t\t\t\tv-on:tile-label-bg-hint-on-mouseenter=\"showHint(index, $event)\"\n\t\t\t\t\tv-on:tile-label-bg-hint-on-mouseleave=\"hideHint\"\n\t\t\t\t/>\n\t\t\t\t<tile-hint-plus-block\t\t\tv-else \n\t\t\t\t\t:name=\"tile.name\" \n\t\t\t\t\tv-on:tile-label-plus-on-click=\"openSlider(index)\"\n\t\t\t\t/> \n\t\t\t</template>\n\t\t</div>\n\t`\n};\nexport {\n\tUninstalled\n}","import {TileCollectionMixins} from \"./tile-collection-mixins\";\n\nconst Installed = {\n\tprops: {\n\t\ttiles: {\n\t\t\ttype: Array,\n\t\t\trequired: true\n\t\t}\n\t},\n\tmixins:[TileCollectionMixins],\n\n\ttemplate: `\t\n\t\t<div class=\"salescenter-app-payment-by-sms-item-container-payment\">\n\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container-payment-inline\">\n\t\t\t\t<tile-label-block class=\"salescenter-app-payment-by-sms-item-container-payment-item-text\"\n\t\t\t\t\tv-for=\"(tile, index) in tiles\"\n\t\t\t\t\tv-if=\"isControlTile(tile) === false\"\n\t\t\t\t\t:name=\"tile.name\" \n\t\t\t\t\tv-on:tile-label-on-click=\"openSlider(index)\"\n\t\t\t\t/>\n\t\t\t\t<br>\n\t\t\t\t<tile-label-block class=\"salescenter-app-payment-by-sms-item-container-payment-item-text-add\"\n\t\t\t\t\tv-if=\"hasTileOfferFromCollection() === true\"\n\t\t\t\t\t:name=\"getTileOfferFromCollection().tile.name\"\n\t\t\t\t\tv-on:tile-label-on-click=\"openSlider(getTileOfferFromCollection().index)\"\n\t\t\t\t/>\n\t\t\t\t<tile-label-block class=\"salescenter-app-payment-by-sms-item-container-payment-item-text-add\"\n\t\t\t\t\tv-if=\"hasTileMoreFromCollection() === true\"\n\t\t\t\t\t:name=\"getTileMoreFromCollection().tile.name\"\n\t\t\t\t\tv-on:tile-label-on-click=\"openSlider(getTileMoreFromCollection().index)\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t`\n};\nexport {\n\tInstalled\n}","import {StatusTypes as Status} from 'salescenter.component.stage-block';\n\nconst StageMixin = {\n\tcomputed:\n\t\t{\n\t\t\tstatusClassMixin()\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\t'salescenter-app-payment-by-sms-item'\t\t\t: true,\n\t\t\t\t\t'salescenter-app-payment-by-sms-item-current'\t: this.status === Status.current,\n\t\t\t\t\t'salescenter-app-payment-by-sms-item-disabled'\t: this.status === Status.disabled,\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tcontainerClassMixin()\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\t'salescenter-app-payment-by-sms-item-container'\t: true\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tcounterCheckedMixin()\n\t\t\t{\n\t\t\t\treturn this.status === Status.complete\n\t\t\t}\n\t\t},\n\t\tmethods:\n\t\t\t{\n\t\t\t\tonSliderClose(e)\n\t\t\t\t{\n\t\t\t\t\tthis.$emit('on-stage-tile-collection-slider-close', e);\n\t\t\t\t}\n\t\t\t}\n};\n\nexport {\n\tStageMixin\n}","import {Loc} \t\t\t\t\t\t\t\t\tfrom 'main.core';\nimport {Block} \t\t\tfrom 'salescenter.component.stage-block';\nimport {Uninstalled as TileUnInstalled} \t\tfrom \"./tile-collection/uninstalled\";\nimport {Installed as TileInstalled} \t\t\tfrom \"./tile-collection/installed\";\nimport {StageMixin} \t\t\t\t\t\t\tfrom \"./stage-mixin\";\n\nconst Cashbox = {\n\tprops: {\n\t\tstatus: {\n\t\t\ttype: String,\n\t\t\t\trequired: true\n\t\t},\n\t\tcounter: {\n\t\t\ttype: Number,\n\t\t\t\trequired: true\n\t\t},\n\t\ttiles: {\n\t\t\ttype: Array,\n\t\t\t\trequired: true\n\t\t},\n\t\tinstalled: {\n\t\t\ttype: Boolean,\n\t\t\t\trequired: true\n\t\t},\n\t\ttitleItems: {\n\t\t\ttype: Array\n\t\t},\n\t\tinitialCollapseState: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true\n\t\t},\n\t},\n\tmixins:[StageMixin],\n\tcomponents:\n\t{\n\t\t'stage-block-item'\t\t\t\t\t:\tBlock,\n\t\t'tile-collection-installed-block'\t:\tTileInstalled,\n\t\t'tile-collection-uninstalled-block'\t:\tTileUnInstalled\n\t},\n\tcomputed:\n\t{\n\t\tstatusClass()\n\t\t{\n\t\t\treturn {\n\t\t\t\t'salescenter-app-payment-by-sms-item-disabled-bg': this.installed === false\n\t\t\t}\n\t\t},\n\n\t\ttitle()\n\t\t{\n\t\t\treturn this.installed === true\n\t\t\t\t? Loc.getMessage('SALESCENTER_CASHBOX_SET_BLOCK_TITLE')\n\t\t\t\t: Loc.getMessage('SALESCENTER_CASHBOX_BLOCK_TITLE');\n\t\t},\n\t\tconfigForBlock()\n\t\t{\n\t\t\treturn {\n\t\t\t\tcounter: this.counter,\n\t\t\t\ttitleItems: this.installed ? this.titleItems : [],\n\t\t\t\tinstalled: this.installed,\n\t\t\t\tcollapsible: true,\n\t\t\t\tchecked: this.counterCheckedMixin,\n\t\t\t\tshowHint: !this.installed,\n\t\t\t\tinitialCollapseState: this.initialCollapseState,\n\t\t\t}\n\t\t}\n\t},\n\tmethods:\n\t{\n\t\tonItemHint(e)\n\t\t{\n\t\t\tBX.Salescenter.Manager.openHowToConfigCashBox(e);\n\t\t},\n\t\tsaveCollapsedOption(option)\n\t\t{\n\t\t\tthis.$emit('on-save-collapsed-option', 'cashbox', option);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<stage-block-item\n\t\t\t:class=\"[statusClassMixin, statusClass]\"\n\t\t\t:config=\"configForBlock\"\n\t\t\t@on-item-hint.stop.prevent=\"onItemHint\"\n\t\t\t@on-tile-slider-close=\"onSliderClose\"\n\t\t\t@on-adjust-collapsed=\"saveCollapsedOption\"\n\t\t>\n\t\t\t<template v-slot:block-title-title>{{title}}</template>\n\t\t\t<template v-slot:block-hint-title>${Loc.getMessage('SALESCENTER_CASHBOX_BLOCK_SETTINGS_TITLE')}</template>\n\t\t\t<template v-slot:block-container>\n\t\t\t\t<div :class=\"containerClassMixin\">\n\t\t\t\t\t<tile-collection-uninstalled-block \t:tiles=\"tiles\" v-if=\"!installed\"/>\n\t\t\t\t\t<tile-collection-installed-block :tiles=\"tiles\" v-on:on-tile-slider-close=\"onSliderClose\" v-else />\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</stage-block-item>\n\t`\n};\n\nexport\n{\n\tCashbox\n}","import {ProductForm} from 'catalog.product-form';\nimport 'currency';\nimport {MixinTemplatesType} from './components/templates-type-mixin';\nimport {Runtime, Type, Text} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\nimport type {BaseEvent} from 'main.core.events';\nimport {Loc} from 'main.core';\n\nexport default {\n\tmixins:[MixinTemplatesType],\n\tmounted()\n\t{\n\t\tif (this.$root.$app.options.templateMode === 'view')\n\t\t{\n\t\t\tthis.$root.$emit(\"on-change-editable\", false);\n\t\t\tif (this.productForm)\n\t\t\t{\n\t\t\t\tthis.productForm.setEditable(false);\n\t\t\t}\n\t\t}\n\t\tif (this.productForm)\n\t\t{\n\t\t\tconst formWrapper = this.$root.$el.querySelector('.salescenter-app-form-wrapper');\n\t\t\tformWrapper.appendChild(this.productForm.layout());\n\t\t}\n\t},\n\tcreated()\n\t{\n\t\tthis.refreshId = null;\n\n\t\tconst defaultCurrency = this.$root.$app.options.currencyCode || '';\n\n\t\tthis.$store.dispatch('orderCreation/setCurrency', defaultCurrency);\n\t\tif (Type.isArray(this.$root.$app.options.basket))\n\t\t{\n\t\t\tconst fields = [];\n\t\t\tthis.$root.$app.options.basket.forEach((item) => {\n\t\t\t\tfields.push(item.fields);\n\t\t\t});\n\t\t\tthis.$store.commit('orderCreation/setBasket', fields);\n\t\t}\n\t\tif (Type.isObject(this.$root.$app.options.totals))\n\t\t{\n\t\t\tthis.$store.commit('orderCreation/setTotal', this.$root.$app.options.totals);\n\t\t}\n\n\t\tthis.productForm = new ProductForm(\n\t\t\t{\n\t\t\t\tcurrencySymbol: this.$root.$app.options.currencySymbol,\n\t\t\t\tcurrency: defaultCurrency,\n\t\t\t\tiblockId: this.$root.$app.options.catalogIblockId,\n\t\t\t\tbasePriceId: this.$root.$app.options.basePriceId,\n\t\t\t\tbasket: Type.isArray(this.$root.$app.options.basket) ? this.$root.$app.options.basket : [],\n\t\t\t\ttotals: this.$root.$app.options.totals,\n\t\t\t\ttaxList: this.$root.$app.options.vatList,\n\t\t\t\tmeasures: this.$root.$app.options.measures,\n\t\t\t\tshowDiscountBlock: this.$root.$app.options.showProductDiscounts,\n\t\t\t\tshowTaxBlock: this.$root.$app.options.showProductTaxes,\n\t\t\t\ttotalResultLabel: this.$root.$app.options.mode === 'delivery' ? Loc.getMessage('SALESCENTER_SHIPMENT_PRODUCT_BLOCK_TOTAL') : null,\n\t\t\t\turlBuilderContext: this.$root.$app.options.urlProductBuilderContext,\n\t\t\t\tisCatalogPriceEditEnabled: this.$root.$app.options.isCatalogPriceEditEnabled,\n\t\t\t\tfieldHints: this.$root.$app.options.fieldHints,\n\t\t\t\thideUnselectedProperties: (this.$root.$app.options.templateMode === 'view'),\n\t\t\t\tshowCompilationModeSwitcher: (this.$root.$app.options.showCompilationModeSwitcher === 'Y'),\n\t\t\t}\n\t\t);\n\n\t\tthis.checkProductErrors();\n\n\t\tEventEmitter.subscribe(\n\t\t\tthis.productForm,\n\t\t\t'ProductForm:onBasketChange',\n\t\t\tRuntime.debounce(this.onBasketChange, 500, this)\n\t\t);\n\n\t\tEventEmitter.subscribe(\n\t\t\tthis.productForm,\n\t\t\t'ProductForm:onErrorsChange',\n\t\t\tRuntime.debounce(this.checkProductErrors, 500, this)\n\t\t);\n\t},\n\tmethods: {\n\t\tonBasketChange(event: BaseEvent)\n\t\t{\n\t\t\tlet processRefreshRequest = (data) => {\n\t\t\t\tif (this.productForm)\n\t\t\t\t{\n\t\t\t\t\tconst preparedBasket = [];\n\t\t\t\t\tdata.basket.forEach((item) => {\n\t\t\t\t\t\tif (!Type.isStringFilled(item.innerId))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tpreparedBasket.push({\n\t\t\t\t\t\t\tselectorId: item.innerId,\n\t\t\t\t\t\t\tfields: item,\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\n\t\t\t\t\tthis.productForm.setData({...data, ...{basket: preparedBasket}});\n\n\t\t\t\t\tif (Type.isArray(data.basket))\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$store.commit('orderCreation/setBasket', data.basket);\n\t\t\t\t\t}\n\t\t\t\t\tif (Type.isObject(data.total))\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$store.commit('orderCreation/setTotal', data.total);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tconst data = event.getData();\n\t\t\tif (!Type.isArray(data.basket))\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst fields = [];\n\t\t\tdata.basket.forEach((item) => {\n\t\t\t\tfields.push(item.fields);\n\t\t\t});\n\t\t\tthis.$store.commit('orderCreation/setBasket', fields);\n\n\t\t\tif (this.isNeedDisableSubmit())\n\t\t\t{\n\t\t\t\tthis.$store.commit('orderCreation/disableSubmit');\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.$store.commit('orderCreation/enableSubmit');\n\n\t\t\tconst requestId = Text.getRandom(20);\n\t\t\tthis.refreshId = requestId;\n\t\t\tBX.ajax.runAction(\n\t\t\t\t\"salescenter.api.order.refreshBasket\",\n\t\t\t\t{\n\t\t\t\t\tdata: {\n\t\t\t\t\t\torderId : this.$root.$app.orderId,\n\t\t\t\t\t\tbasketItems: fields\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t)\n\t\t\t\t.then((result) => {\n\t\t\t\t\tif (this.refreshId !== requestId)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst data = BX.prop.getObject(result,\"data\", {});\n\t\t\t\t\tprocessRefreshRequest({\n\t\t\t\t\t\ttotal: BX.prop.getObject(\n\t\t\t\t\t\t\tdata,\n\t\t\t\t\t\t\t\"total\",\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tdiscount: 0,\n\t\t\t\t\t\t\t\tresult: 0,\n\t\t\t\t\t\t\t\tsum: 0,\n\t\t\t\t\t\t\t\t//resultNumeric: 0,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t),\n\t\t\t\t\t\tbasket: BX.prop.get(data,\"items\",[])\n\t\t\t\t\t});\n\t\t\t\t})\n\t\t\t\t.catch((result) => {\n\t\t\t\t\tconst data = BX.prop.getObject(result,\"data\", {});\n\t\t\t\t\tprocessRefreshRequest({\n\t\t\t\t\t\terrors: BX.prop.get(result,\"errors\", []),\n\t\t\t\t\t\tbasket: BX.prop.get(data,\"items\",[])\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t},\n\t\tcheckProductErrors()\n\t\t{\n\t\t\tif (this.isNeedDisableSubmit())\n\t\t\t{\n\t\t\t\tthis.$store.commit('orderCreation/disableSubmit');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.$store.commit('orderCreation/enableSubmit')\n\t\t\t}\n\t\t},\n\t\tisNeedDisableSubmit()\n\t\t{\n\t\t\tconst basket = this.$store.getters['orderCreation/getBasket']();\n\n\t\t\tif (\n\t\t\t\tbasket.length <= 0\n\t\t\t\t//|| !this.$root.$app.hasClientContactInfo()\n\t\t\t\t|| (this.productForm && Type.isFunction(this.productForm.hasErrors) && this.productForm.hasErrors())\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tconst filledProducts = basket.filter((item) => {\n\t\t\t\treturn (Type.isStringFilled(item.module) && item.productId > 0);\n\t\t\t});\n\n\t\t\treturn filledProducts.length <= 0;\n\t\t}\n\t},\n\ttemplate: `\n\t\t<div class=\"salescenter-app-payment-side\">\n\t\t\t<div class=\"salescenter-app-page-content\">\n\t\t\t\t<div class=\"salescenter-app-form-wrapper\"></div>\n\t\t\t\t<slot name=\"footer\"></slot>\n\t\t\t</div>\n\t\t</div>\n\t`,\n}\n","import {Block} from 'salescenter.component.stage-block';\nimport Product from '../../product';\nimport {StageMixin} from './stage-mixin';\n\nexport default {\n\tprops: {\n\t\tstatus: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\tcounter: {\n\t\t\ttype: Number,\n\t\t\trequired: true\n\t\t},\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\thintTitle: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t},\n\tmixins:[StageMixin],\n\tcomponents:\n\t\t{\n\t\t\t'stage-block-item':\tBlock,\n\t\t\t'product':\tProduct,\n\t\t},\n\tmethods:\n\t\t{\n\t\t\tonItemHint(e)\n\t\t\t{\n\t\t\t\tBX.Salescenter.Manager.openHowToSell(e);\n\t\t\t},\n\t\t},\n\tcomputed:\n\t\t{\n\t\t\tconfigForBlock()\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\tcounter: this.counter,\n\t\t\t\t\tchecked: this.counterCheckedMixin,\n\t\t\t\t\tshowHint: true,\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\ttemplate: `\n\t\t<stage-block-item\n\t\t\t@on-item-hint.stop.prevent=\"onItemHint\"\n\t\t\t:config=\"configForBlock\"\n\t\t\t:class=\"statusClassMixin\"\n\t\t>\n\t\t\t<template v-slot:block-title-title>{{title}}</template>\n\t\t\t<template v-slot:block-hint-title>{{hintTitle}}</template>\n\t\t\t<template v-slot:block-container>\n\t\t\t\t<div :class=\"containerClassMixin\">\n\t\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container-payment\">\n\t\t\t\t\t\t<product/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</stage-block-item>\n\t`\n}\n","import {Vuex} from 'ui.vue.vuex';\nimport {Vue} from 'ui.vue';\nimport {ajax, Loc} from 'main.core';\nimport DeliverySelector from 'salescenter.deliveryselector';\n\nexport default {\n\tprops: {\n\t\tconfig: {type: Object, required: true}\n\t},\n\tcomponents: {\n\t\t'delivery-selector': DeliverySelector,\n\t},\n\tdata()\n\t{\n\t\treturn {\n\t\t\tavailableServices: [],\n\t\t};\n\t},\n\tmethods: {\n\t\tonChange(payload)\n\t\t{\n\t\t\tthis.$store.dispatch('orderCreation/setDelivery', payload.deliveryPrice);\n\n\t\t\tthis.$store.dispatch(\n\t\t\t\t'orderCreation/setDeliveryId',\n\t\t\t\tpayload.deliveryServiceId\n\t\t\t);\n\t\t\tthis.$store.dispatch(\n\t\t\t\t'orderCreation/setPropertyValues',\n\t\t\t\tpayload.relatedPropsValues\n\t\t\t);\n\t\t\tthis.$store.dispatch(\n\t\t\t\t'orderCreation/setDeliveryExtraServicesValues',\n\t\t\t\tpayload.relatedServicesValues\n\t\t\t);\n\t\t\tthis.$store.dispatch(\n\t\t\t\t'orderCreation/setExpectedDelivery',\n\t\t\t\tpayload.estimatedDeliveryPrice\n\t\t\t);\n\t\t\tthis.$store.dispatch(\n\t\t\t\t'orderCreation/setDeliveryResponsibleId',\n\t\t\t\tpayload.responsibleUser ? payload.responsibleUser.id : null\n\t\t\t);\n\n\t\t\tthis.$emit('change', payload);\n\t\t},\n\t\tonAddressFromChanged()\n\t\t{\n\t\t\tthis.refreshAvailableServices();\n\t\t},\n\t\tonDeliveryServiceChanged()\n\t\t{\n\t\t\tthis.refreshAvailableServices();\n\t\t},\n\t\tonSettingsChanged()\n\t\t{\n\t\t\tthis.$emit('delivery-settings-changed');\n\t\t},\n\t\trefreshAvailableServices()\n\t\t{\n\t\t\tajax.runAction(\n\t\t\t\t'salescenter.order.getCompatibleDeliverySystems',\n\t\t\t\t{\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tbasketItems: this.config.basket ? this.config.basket : [],\n\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\tsessionId: this.config.sessionId,\n\t\t\t\t\t\t\townerTypeId: this.config.ownerTypeId,\n\t\t\t\t\t\t\townerId: this.config.ownerId,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdeliveryServiceId: this.order.deliveryId,\n\t\t\t\t\t\tshipmentPropValues: this.order.propertyValues,\n\t\t\t\t\t\tdeliveryRelatedServiceValues: this.order.deliveryExtraServicesValues,\n\t\t\t\t\t\tdeliveryResponsibleId: this.order.deliveryResponsibleId,\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t).then((result) => {\n\t\t\t\tlet data = BX.prop.getObject(result, \"data\", {});\n\t\t\t\tthis.availableServices = data.availableServices ? data.availableServices : {};\n\t\t\t}).catch((result) => {\n\t\t\t\tthis.availableServices = {};\n\t\t\t});\n\t\t}\n\t},\n\tcreated()\n\t{\n\t\tthis.$store.dispatch('orderCreation/setPersonTypeId', this.config.personTypeId);\n\n\t\tthis.refreshAvailableServices();\n\t},\n\n\tcomputed: {\n\t\tlocalize()\n\t\t{\n\t\t\treturn Vue.getFilteredPhrases('SALESCENTER_');\n\t\t},\n\t\tsumTitle()\n\t\t{\n\t\t\treturn Loc.getMessage('SALESCENTER_PRODUCT_PRODUCTS_PRICE');\n\t\t},\n\t\tproductsPrice()\n\t\t{\n\t\t\treturn this.order.total.result;\n\t\t},\n\t\tdelivery()\n\t\t{\n\t\t\treturn this.order.delivery;\n\t\t},\n\t\tdeliveryFormatted()\n\t\t{\n\t\t\tif (this.isDeliveryCalculated)\n\t\t\t{\n\t\t\t\treturn BX.Currency.currencyFormat(this.delivery, this.config.currency, false);\n\t\t\t}\n\n\t\t},\n\t\ttotal()\n\t\t{\n\t\t\tif (this.productsPrice === null || this.delivery === null)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn this.productsPrice + this.delivery;\n\t\t},\n\t\ttotalFormatted()\n\t\t{\n\t\t\treturn BX.Currency.currencyFormat(this.total, this.config.currency, false);\n\t\t},\n\t\tisDeliveryCalculated()\n\t\t{\n\t\t\treturn (this.order.delivery !== null);\n\t\t},\n\t\texcludedServiceIds()\n\t\t{\n\t\t\treturn this.$root.$app.options.mode === 'delivery' ? [this.$root.$app.options.emptyDeliveryServiceId] : [];\n\t\t},\n\t\tactionData()\n\t\t{\n\t\t\treturn {\n\t\t\t\tbasketItems: this.config.basket,\n\t\t\t\toptions: {\n\t\t\t\t\torderId : this.$root.$app.orderId,\n\t\t\t\t\tsessionId: this.config.sessionId,\n\t\t\t\t\townerTypeId: this.config.ownerTypeId,\n\t\t\t\t\townerId: this.config.ownerId,\n\t\t\t\t},\n\t\t\t};\n\t\t},\n\t\t...Vuex.mapState({\n\t\t\torder: state => state.orderCreation,\n\t\t}),\n\t},\n\ttemplate: `\n\t\t<delivery-selector\n\t\t\t:available-services=\"availableServices\"\n\t\t\t:excluded-service-ids=\"excludedServiceIds\"\t\t\t\t\n\t\t\t:init-entered-delivery-price=\"config.deliveryPrice\"\n\t\t\t:init-delivery-service-id=\"config.deliveryServiceId\"\n\t\t\t:init-related-services-values=\"config.relatedServicesValues\"\n\t\t\t:init-related-props-values=\"config.relatedPropsValues\"\n\t\t\t:init-related-props-options=\"config.relatedPropsOptions\"\n\t\t\t:init-responsible-id=\"config.responsibleId\"\n\t\t\t:person-type-id=\"config.personTypeId\"\n\t\t\t:action=\"'salescenter.api.order.refreshDelivery'\"\n\t\t\t:action-data=\"actionData\"\n\t\t\t:external-sum=\"productsPrice\"\n\t\t\t:external-sum-label=\"sumTitle\"\n\t\t\t:currency=\"config.currency\"\n\t\t\t:currency-symbol=\"config.currencySymbol\"\n\t\t\t@change=\"onChange\"\n\t\t\t@address-from-changed=\"onAddressFromChanged\"\n\t\t\t@delivery-service-changed=\"onDeliveryServiceChanged\"\n\t\t\t@settings-changed=\"onSettingsChanged\"\n\t\t></delivery-selector>\n\t`\n};\n","import 'ui.fonts.ruble';\nimport 'currency';\nimport {ajax, Loc} from 'main.core';\n\nexport default {\n\tprops: {\n\t\tid: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\tproductsPrice: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata()\n\t{\n\t\treturn {\n\t\t\tshipment: {\n\t\t\t\tpriceDelivery: null,\n\t\t\t\tbasePriceDelivery: null,\n\t\t\t\tcurrency: null,\n\t\t\t\tdeliveryService: {\n\t\t\t\t\tname: null,\n\t\t\t\t\tlogo: null,\n\t\t\t\t\tparent: {\n\t\t\t\t\t\tname: null,\n\t\t\t\t\t\tlogo: null,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\textraServices: []\n\t\t\t}\n\t\t};\n\t},\n\tcreated()\n\t{\n\t\tajax.runAction(\n\t\t\t'salescenter.deliveryselector.getShipmentData',\n\t\t\t{data: {\n\t\t\t\t\tid: this.id\n\t\t\t\t}}\n\t\t).then((result) => {\n\t\t\tthis.shipment = result.data.shipment;\n\t\t});\n\t},\n\tmethods: {\n\t\tgetFormattedPrice(price)\n\t\t{\n\t\t\treturn BX.Currency.currencyFormat(price, this.currency, true);\n\t\t}\n\t},\n\tcomputed: {\n\t\thasParent()\n\t\t{\n\t\t\treturn (\n\t\t\t\tthis.shipment.hasOwnProperty('deliveryService')\n\t\t\t\t&& this.shipment.deliveryService.hasOwnProperty('parent')\n\t\t\t\t&& this.shipment.deliveryService.parent\n\t\t\t);\n\t\t},\n\t\tdeliveryServiceLogo()\n\t\t{\n\t\t\treturn this.shipment.deliveryService.logo ? this.shipment.deliveryService.logo : null;\n\t\t},\n\t\tdeliveryServiceProfileLogo()\n\t\t{\n\t\t\treturn (this.hasParent && this.shipment.deliveryService.parent.logo)\n\t\t\t\t? this.shipment.deliveryService.parent.logo\n\t\t\t\t: null;\n\t\t},\n\t\tpaymentPrice()\n\t\t{\n\t\t\treturn this.productsPrice + this.priceDelivery;\n\t\t},\n\t\tdeliveryServiceName()\n\t\t{\n\t\t\treturn this.hasParent ? this.shipment.deliveryService.parent.name : this.shipment.deliveryService.name;\n\t\t},\n\t\tdeliveryServiceProfileName()\n\t\t{\n\t\t\treturn this.hasParent ? this.shipment.deliveryService.name : null;\n\t\t},\n\t\tbasePriceDelivery()\n\t\t{\n\t\t\treturn this.shipment ? this.shipment.basePriceDelivery : null;\n\t\t},\n\t\tpriceDelivery()\n\t\t{\n\t\t\treturn this.shipment ? this.shipment.priceDelivery : null;\n\t\t},\n\t\tcurrency()\n\t\t{\n\t\t\treturn this.shipment ? this.shipment.currency : null;\n\t\t},\n\t\textraServices()\n\t\t{\n\t\t\treturn this.shipment.extraServices ? this.shipment.extraServices : [];\n\t\t},\n\t\tisExtraServicesVisible()\n\t\t{\n\t\t\treturn this.extraServices.length > 0;\n\t\t},\n\t\tbasePriceDeliveryFormatted()\n\t\t{\n\t\t\treturn this.getFormattedPrice(this.basePriceDelivery);\n\t\t},\n\t\tpriceDeliveryFormatted()\n\t\t{\n\t\t\treturn this.getFormattedPrice(this.priceDelivery);\n\t\t},\n\t\tproductsPriceFormatted()\n\t\t{\n\t\t\treturn this.getFormattedPrice(this.productsPrice);\n\t\t},\n\t\tpaymentPriceFormatted()\n\t\t{\n\t\t\treturn this.getFormattedPrice(this.paymentPrice);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div style=\"width: 100%;\" xmlns=\"http://www.w3.org/1999/html\">\n\t\t\t<div class=\"salescenter-delivery-selector-head\">\n\t\t\t\t<div\n\t\t\t\t\tv-if=\"hasParent && deliveryServiceLogo\"\n\t\t\t\t\t:style=\"{ backgroundImage: 'url(' + deliveryServiceLogo + ')' }\"\n\t\t\t\t\tclass=\"salescenter-delivery-selector-logo\"\n\t\t\t\t>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"salescenter-delivery-selector-info\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tv-if=\"deliveryServiceProfileLogo\"\n\t\t\t\t\t\t:style=\"{ backgroundImage: 'url(' + deliveryServiceProfileLogo + ')' }\"\n\t\t\t\t\t\tclass=\"salescenter-delivery-selector-logo\"\n\t\t\t\t\t>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"salescenter-delivery-selector-content\">\n\t\t\t\t\t\t<div class=\"salescenter-delivery-selector-text-light\">{{deliveryServiceName}}</div>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tv-if=\"deliveryServiceProfileName\"\n\t\t\t\t\t\t\tclass=\"salescenter-delivery-selector-text-dark\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{deliveryServiceProfileName}}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div v-if=\"isExtraServicesVisible\" class=\"salescenter-delivery-selector-main\">\n\t\t\t\t<div class=\"salescenter-delivery-selector-text-light\">\n\t\t\t\t\t${Loc.getMessage('SALESCENTER_SHIPMENT_EXTRA_SERVICES')}:\n\t\t\t\t</div>\n\t\t\t\t<ul class=\"salescenter-delivery-selector-list\">\n\t\t\t\t\t<li\n\t\t\t\t\t\tv-for=\"extraService in extraServices\"\n\t\t\t\t\t\tclass=\"salescenter-delivery-selector-list-item salescenter-delivery-selector-text-dark\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{extraService.name}}: {{extraService.value}} \n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t\t<div class=\"salescenter-delivery-selector-bottom salescenter-delivery-selector-text-dark\">\n\t\t\t\t${Loc.getMessage('SALESCENTER_SHIPMENT_DELIVERY_PRICE_RECEIVED')}:\n\t\t\t\t<span v-html=\"basePriceDeliveryFormatted\"></span>\n\t\t\t</div>\n\t\t\t<div class=\"salescenter-delivery-selector-line\"></div>\n\t\t\t<div class=\"catalog-pf-result-wrapper\">\n\t\t\t\t<table class=\"catalog-pf-result\">\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<span class=\"catalog-pf-text\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_PRODUCT_PRODUCTS_PRICE')}:\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</td> \n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<span v-html=\"productsPriceFormatted\" class=\"catalog-pf-text\"></span> \n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td class=\"catalog-pf-result-padding-bottom\">\n\t\t\t\t\t\t\t<span class=\"catalog-pf-text catalog-pf-text--tax\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_SHIPMENT_PRODUCT_BLOCK_DELIVERY_PRICE')}: \n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</td> \n\t\t\t\t\t\t<td class=\"catalog-pf-result-padding-bottom\"> \n\t\t\t\t\t\t\t<span class=\"catalog-pf-text catalog-pf-text--tax\" v-html=\"priceDeliveryFormatted\"></span>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr> \n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td class=\"catalog-pf-result-padding\">\n\t\t\t\t\t\t\t<span class=\"catalog-pf-text catalog-pf-text--total catalog-pf-text--border\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_PRODUCT_TOTAL_RESULT')}: \n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</td> \n\t\t\t\t\t\t<td class=\"catalog-pf-result-padding\">\n\t\t\t\t\t\t\t<span v-html=\"paymentPriceFormatted\" class=\"catalog-pf-text catalog-pf-text--total\"></span> \n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t</table>\n\t\t\t</div>\n\t\t</div>\n\t`\n};\n","import {Vuex} \t\t\t\t\t\t\tfrom 'ui.vue.vuex';\nimport {Loc} \t\t\t\t\t\t\tfrom 'main.core';\nimport {Block} \t\t\tfrom 'salescenter.component.stage-block';\nimport {Uninstalled as TileUnInstalled} from \"./tile-collection/uninstalled\";\nimport DeliverySelector\t\t\t\t\tfrom \"../delivery-selector\";\nimport ShipmentView\t\t\t\t\t\tfrom \"../shipment-view\";\nimport {StageMixin} \t\t\t\t\tfrom \"./stage-mixin\";\nimport {MixinTemplatesType} \t\t\tfrom \"../templates-type-mixin\";\n\nconst DeliveryVuex = {\n\tprops: {\n\t\tstatus: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\tcounter: {\n\t\t\ttype: Number,\n\t\t\trequired: true\n\t\t},\n\t\ttiles: {\n\t\t\ttype: Array,\n\t\t\trequired: true\n\t\t},\n\t\tinstalled: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true\n\t\t},\n\t\tisCollapsible: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true\n\t\t},\n\t\tinitialCollapseState: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true\n\t\t},\n\t},\n\tdata()\n\t{\n\t\treturn {\n\t\t\tselectedDeliveryServiceName: null,\n\t\t}\n\t},\n\tmixins:[StageMixin, MixinTemplatesType],\n\tcomponents:\n\t\t{\n\t\t\t'stage-block-item'\t\t\t\t:\tBlock,\n\t\t\t'delivery-selector-block'\t\t:\tDeliverySelector,\n\t\t\t'shipment-view'\t\t\t\t\t:\tShipmentView,\n\t\t\t'uninstalled-delivery-block'\t:\tTileUnInstalled,\n\t\t},\n\tcomputed:\n\t\t{\n\t\t\tstatusClass()\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\t'salescenter-app-payment-by-sms-item-disabled-bg': this.installed === false\n\t\t\t\t}\n\t\t\t},\n\t\t\tproductsPrice()\n\t\t\t{\n\t\t\t\treturn this.order.total.result;\n\t\t\t},\n\t\t\tshipmentId()\n\t\t\t{\n\t\t\t\treturn this.$root.$app.options.shipmentId;\n\t\t\t},\n\t\t\tconfigForBlock()\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\tcounter: this.counter,\n\t\t\t\t\ttitleName: this.selectedDeliveryServiceName,\n\t\t\t\t\tinstalled: this.installed,\n\t\t\t\t\tcollapsible: this.isCollapsible,\n\t\t\t\t\tchecked: this.counterCheckedMixin,\n\t\t\t\t\tshowHint: false,\n\t\t\t\t\tinitialCollapseState: this.initialCollapseState,\n\t\t\t\t}\n\t\t\t},\n\t\t\tconfig()\n\t\t\t{\n\t\t\t\tlet deliveryServiceId = null;\n\t\t\t\tif (this.$root.$app.options.hasOwnProperty('shipmentData')\n\t\t\t\t\t&& this.$root.$app.options.shipmentData.hasOwnProperty('deliveryServiceId')\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tdeliveryServiceId = this.$root.$app.options.shipmentData.deliveryServiceId;\n\t\t\t\t}\n\n\t\t\t\tlet deliveryPrice = null;\n\t\t\t\tif (this.$root.$app.options.hasOwnProperty('shipmentData')\n\t\t\t\t\t&& this.$root.$app.options.shipmentData.hasOwnProperty('deliveryPrice')\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tdeliveryPrice = this.$root.$app.options.shipmentData.deliveryPrice;\n\t\t\t\t}\n\n\t\t\t\tlet relatedPropsValues = {};\n\t\t\t\tif (this.$root.$app.options.hasOwnProperty('shipmentData')\n\t\t\t\t\t&& this.$root.$app.options.shipmentData.hasOwnProperty('propValues')\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\trelatedPropsValues = this.$root.$app.options.shipmentData.propValues;\n\t\t\t\t}\n\n\t\t\t\tlet relatedServicesValues = {};\n\t\t\t\tif (this.$root.$app.options.hasOwnProperty('shipmentData')\n\t\t\t\t\t&& this.$root.$app.options.shipmentData.hasOwnProperty('extraServicesValues')\n\t\t\t\t\t&& !Array.isArray(this.$root.$app.options.shipmentData.extraServicesValues)\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\trelatedServicesValues = this.$root.$app.options.shipmentData.extraServicesValues;\n\t\t\t\t}\n\n\t\t\t\tlet relatedPropsOptions = {};\n\t\t\t\tif (this.$root.$app.options.hasOwnProperty('deliveryOrderPropOptions')\n\t\t\t\t\t&& !Array.isArray(this.$root.$app.options.deliveryOrderPropOptions)\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\trelatedPropsOptions = this.$root.$app.options.deliveryOrderPropOptions;\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\tpersonTypeId: this.$root.$app.options.personTypeId,\n\t\t\t\t\tbasket: this.order.basket,\n\t\t\t\t\tcurrencySymbol: this.$root.$app.options.currencySymbol,\n\t\t\t\t\tcurrency: this.order.currency,\n\t\t\t\t\townerTypeId: this.$root.$app.options.ownerTypeId,\n\t\t\t\t\townerId: this.$root.$app.options.ownerId,\n\t\t\t\t\tsessionId: this.$root.$app.options.sessionId,\n\t\t\t\t\trelatedPropsValues,\n\t\t\t\t\trelatedPropsOptions,\n\t\t\t\t\trelatedServicesValues,\n\t\t\t\t\tdeliveryServiceId,\n\t\t\t\t\tresponsibleId: this.$root.$app.options.assignedById,\n\t\t\t\t\tdeliveryPrice,\n\t\t\t\t};\n\t\t\t},\n\t\t\tisViewTemplateMode()\n\t\t\t{\n\t\t\t\treturn this.$root.$app.options.templateMode === 'view';\n\t\t\t},\n\n\t\t\t...Vuex.mapState({\n\t\t\t\torder: state => state.orderCreation\n\t\t\t})\n\t\t},\n\tmethods:{\n\t\tsetTitleName(state)\n\t\t{\n\t\t\tthis.selectedDeliveryServiceName = state.deliveryServiceName;\n\t\t},\n\t\tsaveCollapsedOption(option)\n\t\t{\n\t\t\tthis.$emit('on-save-collapsed-option', 'delivery', option);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<stage-block-item\n\t\t\t:config=\"configForBlock\"\n\t\t\t:class=\"[statusClassMixin, statusClass]\"\n\t\t\t@on-item-hint.stop.prevent=\"onItemHint\"\n\t\t\t@on-adjust-collapsed=\"saveCollapsedOption\"\n\t\t>\n\t\t\t<template v-slot:block-title-title>${Loc.getMessage('SALESCENTER_DELIVERY_BLOCK_TITLE')}</template>\n\t\t\t<template v-slot:block-container>\n\t\t\t\t<div :class=\"containerClassMixin\">\n\t\t\t\t\t<template v-if=\"!installed\">\n\t\t\t\t\t\t<uninstalled-delivery-block :tiles=\"tiles\" \n\t\t\t\t\t\t\t\tv-on:on-tile-slider-close=\"onSliderClose\"/>\n\t\t\t\t\t</template>\n\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container-select\">\n\t\t\t\t\t\t\t<shipment-view\n\t\t\t\t\t\t\t\tv-if=\"isViewTemplateMode\"\n\t\t\t\t\t\t\t\t:id=\"shipmentId\"\n\t\t\t\t\t\t\t\t:productsPrice=\"productsPrice\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t</shipment-view>\n\t\t\t\t\t\t\t<delivery-selector-block v-else\n\t\t\t\t\t\t\t\t:config=\"config\" \n\t\t\t\t\t\t\t\t@delivery-settings-changed=\"onSliderClose\"\n\t\t\t\t\t\t\t\t@change=\"setTitleName\" \n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</template>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</stage-block-item>\n\t`\n};\n\nexport {\n\tDeliveryVuex\n}","import {Loc} \t\t\t\t\t\t\t\tfrom 'main.core';\nimport {Block} \t\t\tfrom 'salescenter.component.stage-block';\nimport {Uninstalled as TileUnInstalled} \tfrom \"./tile-collection/uninstalled\";\nimport {Installed as TileInstalled} \t\tfrom \"./tile-collection/installed\";\nimport {StageMixin} \t\t\t\t\t\tfrom \"./stage-mixin\";\n\nconst PaySystem = {\n\tprops: {\n\t\tstatus: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\tcounter: {\n\t\t\ttype: Number,\n\t\t\trequired: true\n\t\t},\n\t\ttiles: {\n\t\t\ttype: Array,\n\t\t\trequired: true\n\t\t},\n\t\tinstalled: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true\n\t\t},\n\t\ttitleItems: {\n\t\t\ttype: Array\n\t\t},\n\t\tinitialCollapseState: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true\n\t\t},\n\t},\n\tmixins:[StageMixin],\n\tcomponents:\n\t{\n\t\t'stage-block-item'\t\t\t\t\t:\tBlock,\n\t\t'tile-collection-installed-block'\t:\tTileInstalled,\n\t\t'tile-collection-uninstalled-block'\t:\tTileUnInstalled\n\t},\n\tmethods:\n\t{\n\t\tonItemHint(e)\n\t\t{\n\t\t\tBX.Salescenter.Manager.openHowToConfigDefaultPaySystem(e);\n\t\t},\n\t\tsaveCollapsedOption(option)\n\t\t{\n\t\t\tthis.$emit('on-save-collapsed-option', 'pay_system', option);\n\t\t},\n\n\t},\n\tcomputed:\n\t{\n\t\tconfigForBlock()\n\t\t{\n\t\t\treturn {\n\t\t\t\tcounter: this.counter,\n\t\t\t\ttitleItems: this.installed ? this.titleItems : [],\n\t\t\t\tinstalled: this.installed,\n\t\t\t\tcollapsible: true,\n\t\t\t\tchecked: this.counterCheckedMixin,\n\t\t\t\tshowHint: !this.installed,\n\t\t\t\tinitialCollapseState: this.initialCollapseState,\n\t\t\t}\n\t\t},\n\t\tstatusClass()\n\t\t{\n\t\t\treturn {\n\t\t\t\t'salescenter-app-payment-by-sms-item-disabled-bg': this.installed === false\n\t\t\t}\n\t\t},\n\t\ttitle()\n\t\t{\n\t\t\treturn this.installed === true\n\t\t\t\t? Loc.getMessage('SALESCENTER_PAYSYSTEM_SET_BLOCK_TITLE')\n\t\t\t\t: Loc.getMessage('SALESCENTER_PAYSYSTEM_BLOCK_TITLE');\n\t\t}\n\t},\n\n\ttemplate: `\n\t\t<stage-block-item\n\t\t\t:class=\"[statusClassMixin, statusClass]\"\n\t\t\t:config=\"configForBlock\"\n\t\t\t@on-item-hint.stop.prevent=\"onItemHint\"\n\t\t\t@on-tile-slider-close=\"onSliderClose\"\n\t\t\t@on-adjust-collapsed=\"saveCollapsedOption\"\n\t\t>\n\t\t\t<template v-slot:block-title-title>{{title}}</template>\n\t\t\t<template v-slot:block-hint-title>${Loc.getMessage('SALESCENTER_PAYSYSTEM_BLOCK_SETTINGS_TITLE')}</template>\n\t\t\t<template v-slot:block-container>\n\t\t\t\t<div :class=\"containerClassMixin\">\n\t\t\t\t\t<tile-collection-uninstalled-block \t:tiles=\"tiles\" v-if=\"!installed\"/>\n\t\t\t\t\t<tile-collection-installed-block :tiles=\"tiles\" v-on:on-tile-slider-close=\"onSliderClose\" v-else />\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</stage-block-item>\n\t`\n};\nexport {\n\tPaySystem\n}","import {Loc} from 'main.core';\nimport {Block} from 'salescenter.component.stage-block';\nimport {UserAvatar, MessageEditor} from 'salescenter.component.stage-block.sms-message';\nimport {StageMixin} from './stage-mixin';\n\nconst ChatMessage = {\n\tprops: {\n\t\tstatus: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\tcounter: {\n\t\t\ttype: Number,\n\t\t\trequired: true\n\t\t},\n\t\tmanager: {\n\t\t\ttype: Object,\n\t\t\trequired: true\n\t\t},\n\t\ttitleTemplate: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\tshowHint: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true\n\t\t},\n\t\teditorTemplate: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\teditorUrl: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t}\n\t},\n\tmixins: [StageMixin],\n\tcomponents: {\n\t\t'stage-block-item':\tBlock,\n\t\t'chat-user-avatar-block': UserAvatar,\n\t\t'chat-message-editor-block': MessageEditor,\n\t},\n\tdata()\n\t{\n\t\treturn {\n\t\t\tcurrentSenderCode: null,\n\t\t\tsenders: [],\n\t\t\tpushedToUseBitrix24Notifications: null,\n\t\t\tsmsSenderListComponentKey: 0,\n\t\t};\n\t},\n\tcomputed: {\n\t\tconfigForBlock()\n\t\t{\n\t\t\treturn {\n\t\t\t\tcounter: this.counter,\n\t\t\t\tchecked: this.counterCheckedMixin,\n\t\t\t\tshowHint: true,\n\t\t\t};\n\t\t},\n\t\teditor()\n\t\t{\n\t\t\treturn {\n\t\t\t\ttemplate: this.editorTemplate,\n\t\t\t\turl: this.editorUrl\n\t\t\t};\n\t\t},\n\t\ttitle()\n\t\t{\n\t\t\treturn this.titleTemplate;\n\t\t},\n\t\tisMessageReadOnly()\n\t\t{\n\t\t\treturn this.$root.$app.context !== 'sms';\n\t\t},\n\t},\n\tcreated() {\n\t},\n\tmethods: {\n\t\tonItemHint(e)\n\t\t{\n\t\t\tBX.Salescenter.Manager.openSlider(this.$root.$app.options.urlSettingsCompanyContacts, {width: 1200} );\n\t\t},\n\t\topenBitrix24NotificationsHelp(event)\n\t\t{\n\t\t\tBX.Salescenter.Manager.openBitrix24NotificationsHelp(event);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<stage-block-item\t\t\t\n\t\t\t:config=\"configForBlock\"\n\t\t\t:class=\"statusClassMixin\"\n\t\t\tv-on:on-item-hint=\"onItemHint\"\n\t\t>\n\t\t\t<template v-slot:block-title-title>{{title}}</template>\n\t\t\t<template\n\t\t\t\tv-if=\"showHint\"\n\t\t\t\tv-slot:block-hint-title\n\t\t\t>\n\t\t\t\t${Loc.getMessage('SALESCENTER_LEFT_PAYMENT_COMPANY_CONTACTS_SHORTER_VERSION')}\n\t\t\t</template>\n\t\t\t<template v-slot:block-container>\n\t\t\t\t<div :class=\"containerClassMixin\" class=\"salescenter-app-payment-by-sms-item-container-offtop\">\n\t\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container-sms\">\n\t\t\t\t\t\t<chat-user-avatar-block :manager=\"manager\"/>\n\t\t\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container-sms-content\">\n\t\t\t\t\t\t\t<chat-message-editor-block :editor=\"editor\" :isReadOnly=\"isMessageReadOnly\"/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</stage-block-item>\n\t`\n};\nexport {\n\tChatMessage\n};\n","import {Loc} \t\t\t\t\t\t\t\tfrom 'main.core';\nimport {Block} \t\tfrom 'salescenter.component.stage-block';\nimport {StageList} \t\t\t\t\t\t\tfrom 'salescenter.component.stage-block.automation';\nimport * as AutomationStage \t\t\t\tfrom 'salescenter.automation-stage';\nimport {StageMixin} \t\t\t\t\t\tfrom \"./stage-mixin\";\nimport {MixinTemplatesType} \t\t\tfrom \"../templates-type-mixin\";\n\nconst Automation = {\n\tprops: {\n\t\tstatus: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\tcounter: {\n\t\t\ttype: Number,\n\t\t\trequired: true\n\t\t},\n\t\tstageOnOrderPaid: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t},\n\t\tstageOnDeliveryFinished: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t},\n\t\titems: {\n\t\t\ttype: Array,\n\t\t\trequired: true\n\t\t},\n\t\tinitialCollapseState: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true\n\t\t},\n\t},\n\tmixins:[StageMixin, MixinTemplatesType],\n\tdata()\n\t{\n\t\treturn {\n\t\t\tpaymentStages: [],\n\t\t\tshipmentStages: [],\n\t\t}\n\t},\n\tcomponents:\n\t\t{\n\t\t\t'stage-block-item'\t\t\t:\tBlock,\n\t\t\t'stage-item-list'\t\t\t:\tStageList\n\t\t},\n\tmethods:\n\t\t{\n\t\t\tsaveCollapsedOption(option)\n\t\t\t{\n\t\t\t\tthis.$emit('on-save-collapsed-option', 'automation', option);\n\t\t\t},\n\n\t\t\tupdatePaymentStage(e)\n\t\t\t{\n\t\t\t\tlet newStageId = e.data;\n\t\t\t\tthis.paymentStages.forEach((stage) => {\n\t\t\t\t\tstage.selected = stage.id === newStageId;\n\t\t\t\t});\n\n\t\t\t\tthis.$root.$app.stageOnOrderPaid = e.data;\n\t\t\t},\n\n\t\t\tupdateShipmentStage(e)\n\t\t\t{\n\t\t\t\tlet newStageId = e.data;\n\t\t\t\tthis.shipmentStages.forEach((stage) => {\n\t\t\t\t\tstage.selected = stage.id === newStageId;\n\t\t\t\t});\n\n\t\t\t\tthis.$root.$app.stageOnDeliveryFinished = e.data;\n\t\t\t},\n\t\t\tinitStages(stages, currentValue)\n\t\t\t{\n\t\t\t\tObject.values(this.items).forEach(options => {\n\t\t\t\t\toptions.selected = (\n\t\t\t\t\t\t(!currentValue && !options.hasOwnProperty('id'))\n\t\t\t\t\t\t|| (options.id === currentValue)\n\t\t\t\t\t);\n\t\t\t\t\tstages.push(AutomationStage.Factory.create(options));\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\tcomputed:\n\t\t{\n\t\t\tconfigForBlock()\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\tcounter: this.counter,\n\t\t\t\t\tchecked: this.counterCheckedMixin,\n\t\t\t\t\tcollapsible: true,\n\t\t\t\t\tinitialCollapseState: this.initialCollapseState,\n\t\t\t\t\ttitleName: this.selectedStage.name,\n\t\t\t\t}\n\t\t\t},\n\t\t\tselectedStage()\n\t\t\t{\n\t\t\t\tlet stages = this.isPayment ? this.paymentStages : this.shipmentStages;\n\n\t\t\t\treturn stages.find((stage) =>\n\t\t\t\t{\n\t\t\t\t\treturn stage.selected;\n\t\t\t\t});\n\t\t\t},\n\t\t\tisPayment()\n\t\t\t{\n\t\t\t\treturn (\n\t\t\t\t\tthis.$root.$app.options.mode === 'payment_delivery'\n\t\t\t\t\t|| this.$root.$app.options.mode === 'payment'\n\t\t\t\t);\n\t\t\t},\n\t\t\tisHideDeliveryStage()\n\t\t\t{\n\t\t\t\treturn this.$root.$app.options.mode === 'payment';\n\t\t\t}\n\t\t},\n\tcreated()\n\t{\n\t\tif (this.isPayment)\n\t\t{\n\t\t\tthis.initStages(this.paymentStages, this.stageOnOrderPaid);\n\t\t}\n\n\t\tthis.initStages(this.shipmentStages, this.stageOnDeliveryFinished);\n\t},\n\ttemplate: `\n\t\t<stage-block-item\n\t\t\t:config=\"configForBlock\"\n\t\t\t:class=\"statusClassMixin\"\n\t\t\t@on-adjust-collapsed=\"saveCollapsedOption\"\n\t\t>\n\t\t\t<template v-slot:block-title-title>${Loc.getMessage('SALESCENTER_AUTOMATION_BLOCK_TITLE')}</template>\n\t\t\t<template v-slot:block-container>\n\t\t\t\t<div :class=\"containerClassMixin\">\n\t\t\t\t\t<div v-if=\"isPayment\">\n\t\t\t\t\t\t<stage-item-list\n\t\t\t\t\t\t\tv-on:on-choose-select-option=\"updatePaymentStage($event)\"\n\t\t\t\t\t\t\t:stages=\"paymentStages\"\n\t\t\t\t\t\t\t:editable=\"editable\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<template v-slot:stage-list-text>${Loc.getMessage('SALESCENTER_AUTOMATION_BLOCK_TEXT')}</template>\n\t\t\t\t\t\t</stage-item-list>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div v-if=\"!isHideDeliveryStage\">\n\t\t\t\t\t\t<stage-item-list\n\t\t\t\t\t\t\tv-on:on-choose-select-option=\"updateShipmentStage($event)\"\n\t\t\t\t\t\t\t:stages=\"shipmentStages\"\n\t\t\t\t\t\t\t:editable=\"editable\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<template v-slot:stage-list-text>${Loc.getMessage('SALESCENTER_AUTOMATION_DELIVERY_FINISHED')}</template>\n\t\t\t\t\t\t</stage-item-list>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t</template>\n\t\t</stage-block-item>\n\t`\n};\nexport {\n\tAutomation\n}\n","import {Loc} from 'main.core';\n\nexport default {\n\tprops: {\n\t\tbuttonLabel: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tbuttonEnabled: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t\tshowWhatClientSeesControl: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t}\n\t},\n\tcomputed: {\n\t\tbuttonClass()\n\t\t{\n\t\t\treturn {'salescenter-app-payment-by-sms-item-disabled': this.buttonEnabled === false};\n\t\t},\n\t},\n\tmethods: {\n\t\tshowWhatClientSees(event)\n\t\t{\n\t\t\tBX.Salescenter.Manager.openWhatClientSee(event);\n\t\t},\n\t\tsubmit(event)\n\t\t{\n\t\t\tthis.$emit('on-submit', event);\n\t\t},\n\t},\n\ttemplate: `\t\t\n\t\t<div\n\t\t\t:class=\"buttonClass\"\n\t\t\tclass=\"salescenter-app-payment-by-sms-item-show salescenter-app-payment-by-sms-item salescenter-app-payment-by-sms-item-send\"\n\t\t>\n\t\t\t<div class=\"salescenter-app-payment-by-sms-item-counter\">\n\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-counter-rounder\"></div>\n\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-counter-line\"></div>\n\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-counter-number\"></div>\n\t\t\t</div>\n\t\t\t<div class=\"\">\n\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container\">\n\t\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container-payment\">\n\t\t\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container-payment-inline\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t@click=\"submit($event)\"\n\t\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-lg ui-btn-success ui-btn-round\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{{buttonLabel}}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tv-if=\"showWhatClientSeesControl\"\n\t\t\t\t\t\t\t\t@click=\"showWhatClientSees\"\n\t\t\t\t\t\t\t\tclass=\"salescenter-app-add-item-link\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_SEND_ORDER_BY_SMS_SENDER_TEMPLATE_WHAT_DOES_CLIENT_SEE')}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`\n}\n","import {\n\tTimeLineItemBlock as Item,\n\tTimeLineItemPaymentBlock as PaymentItem\n} \t\t\t\t\t\t\t\t\t\t\t\tfrom 'salescenter.component.stage-block.timeline';\nimport {Payment} \t\t\t\t\t\t\t\tfrom 'salescenter.timeline';\n\nconst TimeLine = {\n\tprops:{\n\t\ttimelineItems: {\n\t\t\ttype: Array,\n\t\t\trequired: true\n\t\t},\n\t},\n\tcomponents: {\n\t\t'timeline-item-block'\t\t\t: Item,\n\t\t'timeline-item-payment-block'\t: PaymentItem,\n\t},\n\n\tmethods:\n\t\t{\n\t\t\tisPayment(item)\n\t\t\t{\n\t\t\t\treturn item.type === Payment.type();\n\t\t\t}\n\t\t},\n\ttemplate: `\n\t\t<div class=\"salescenter-app-payment-by-sms-timeline\">\n\t\t\t<template v-for=\"(item) in timelineItems\">\n\t\t\t\t<timeline-item-payment-block\t:item=\"item\"\tv-if=\"isPayment(item)\"/>\n\t\t\t\t<timeline-item-block\t\t\t:item=\"item\" \tv-else/>\n\t\t\t</template>\n\t\t</div>\n\t`\n};\n\nexport {\n\tTimeLine,\n}","import {Loc, Uri} from 'main.core';\nimport {StatusTypes as Status} from 'salescenter.component.stage-block';\nimport {MenuManager} from \"main.popup\";\nimport {Manager} from 'salescenter.manager';\nimport {Block} from 'salescenter.component.stage-block';\nimport {StageMixin} from \"./stage-mixin\";\nimport \"ui.icons.disk\";\nimport type {Document, Template} from \"../../app\";\nimport {Vuex} from \"ui.vue.vuex\";\n\nconst DocumentSelector = {\n\tprops: {\n\t\tcounter: {\n\t\t\ttype: Number,\n\t\t\trequired: true\n\t\t},\n\t\ttemplateAddUrl: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t},\n\t},\n\tmixins: [StageMixin],\n\tcomponents: {\n\t\t'stage-block-item':\tBlock,\n\t},\n\tcomputed: {\n\t\tstatus()\n\t\t{\n\t\t\tif (\n\t\t\t\tthis.model\n\t\t\t\t&& (\n\t\t\t\t\tthis.model.templates\n\t\t\t\t\t&& this.model.templates.length\n\t\t\t\t)\n\t\t\t\t|| (\n\t\t\t\t\tthis.model.documents\n\t\t\t\t\t&& this.model.documents.length\n\t\t\t\t)\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn Status.complete;\n\t\t\t}\n\n\t\t\tif(\n\t\t\t\tthis.templateAddUrl\n\t\t\t\t&& this.templateAddUrl.length\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn Status.current;\n\t\t\t}\n\n\t\t\treturn Status.disabled;\n\t\t},\n\t\tconfigForBlock()\n\t\t{\n\t\t\treturn {\n\t\t\t\tcounter: this.counter,\n\t\t\t\ttitleItems: [],\n\t\t\t\tinstalled: true,\n\t\t\t\tcollapsible: false,\n\t\t\t\tchecked: this.counterCheckedMixin,\n\t\t\t\tshowHint: false,\n\t\t\t\tinitialCollapseState: false,\n\t\t\t}\n\t\t},\n\t\tgetDocumentTitle(): ?string\n\t\t{\n\t\t\tconst currentDocument = this.getCurrentDocument();\n\t\t\tif (currentDocument)\n\t\t\t{\n\t\t\t\treturn currentDocument.title;\n\t\t\t}\n\n\t\t\treturn Loc.getMessage('SALESCENTER_DOCUMENT_SELECTOR_BLOCK_CREATE_NEW_TEMPLATE');\n\t\t},\n\t\twithStamps(): string\n\t\t{\n\t\t\tlet isWithStamps = '';\n\t\t\tconst currentDocument = this.getCurrentDocument();\n\t\t\tif (currentDocument)\n\t\t\t{\n\t\t\t\tif(currentDocument.isWithStamps)\n\t\t\t\t{\n\t\t\t\t\tisWithStamps = Loc.getMessage('SALESCENTER_DOCUMENT_SELECTOR_BLOCK_WITH_SIGNS');\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tisWithStamps = Loc.getMessage('SALESCENTER_DOCUMENT_SELECTOR_BLOCK_WITHOUT_SIGNS');\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn isWithStamps;\n\t\t},\n\t\thasData()\n\t\t{\n\t\t\tconst document = this.getCurrentDocument();\n\n\t\t\treturn (document && document.detailUrl);\n\t\t},\n\t\t...Vuex.mapState({\n\t\t\tmodel: state => state.documentSelector,\n\t\t})\n\t},\n\tmethods: {\n\t\thandleDocumentClick({target})\n\t\t{\n\t\t\tif (this.getCurrentDocument() !== null)\n\t\t\t{\n\t\t\t\tthis.openSelectorMenu(target);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.openTemplatesList();\n\t\t\t}\n\t\t},\n\t\topenSelectorMenu(bindElement)\n\t\t{\n\t\t\tMenuManager.show({\n\t\t\t\tid: 'payment-document-selector',\n\t\t\t\tbindElement,\n\t\t\t\titems: this.prepareSelectorMenuItems(),\n\t\t\t\tcloseByEsc: true,\n\t\t\t\tcacheable: false,\n\t\t\t});\n\t\t},\n\t\tcloseSelectorMenu()\n\t\t{\n\t\t\tMenuManager.destroy('payment-document-selector');\n\t\t},\n\t\tprepareSelectorMenuItems()\n\t\t{\n\t\t\tconst items = [];\n\t\t\tif (this.model.documents)\n\t\t\t{\n\t\t\t\tfor (const document of this.model.documents)\n\t\t\t\t{\n\t\t\t\t\titems.push({\n\t\t\t\t\t\ttext: document.title,\n\t\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\t\tthis.closeSelectorMenu();\n\t\t\t\t\t\t\tthis.$store.dispatch('documentSelector/setBoundDocumentId', {boundDocumentId: document.id});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst templateListItem = {\n\t\t\t\ttext: Loc.getMessage('SALESCENTER_DOCUMENT_SELECTOR_BLOCK_CREATE_NEW_DOCUMENT'),\n\t\t\t\titems: [],\n\t\t\t};\n\t\t\tif (this.model.templates)\n\t\t\t{\n\t\t\t\tif (items.length > 0)\n\t\t\t\t{\n\t\t\t\t\titems.push({delimiter: true});\n\t\t\t\t}\n\t\t\t\tfor (const template of this.model.templates)\n\t\t\t\t{\n\t\t\t\t\ttemplateListItem.items.push({\n\t\t\t\t\t\ttext: template.title,\n\t\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\t\tthis.closeSelectorMenu();\n\t\t\t\t\t\t\tthis.$store.commit('documentSelector/setSelectedTemplateId', {selectedTemplateId: template.id});\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (this.templateAddUrl)\n\t\t\t{\n\t\t\t\tif (templateListItem.items.length > 0)\n\t\t\t\t{\n\t\t\t\t\ttemplateListItem.items.push({delimiter: true});\n\t\t\t\t}\n\t\t\t\ttemplateListItem.items.push({\n\t\t\t\t\ttext: Loc.getMessage('SALESCENTER_DOCUMENT_SELECTOR_BLOCK_CREATE_NEW_TEMPLATE'),\n\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\tthis.closeSelectorMenu();\n\t\t\t\t\t\tthis.openTemplatesList();\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t\tif (templateListItem.items.length > 0)\n\t\t\t{\n\t\t\t\titems.push(templateListItem);\n\t\t\t}\n\n\t\t\treturn items;\n\t\t},\n\t\topenTemplatesList()\n\t\t{\n\t\t\tManager.openSlider(this.templateAddUrl, {\n\t\t\t\twidth: 930,\n\t\t\t}).then(() => {\n\t\t\t\tthis.$store.dispatch('documentSelector/loadTemplates');\n\t\t\t});\n\t\t},\n\t\thandleEditDocumentClick()\n\t\t{\n\t\t\tconst currentDocument = this.getCurrentDocument();\n\t\t\tif (currentDocument.detailUrl)\n\t\t\t{\n\t\t\t\tManager.openSlider(currentDocument.detailUrl, {\n\t\t\t\t\twidth: 980,\n\t\t\t\t}).then((slider) => {\n\t\t\t\t\tconst document = slider.getData().get('document');\n\t\t\t\t\tif (document)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$store.dispatch('documentSelector/addDocument', {document});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tgetCurrentDocument(): ?Document\n\t\t{\n\t\t\tlet document = null;\n\t\t\tif (this.model.boundDocumentId > 0)\n\t\t\t{\n\t\t\t\tdocument = this.getDocumentById(this.model.boundDocumentId);\n\t\t\t}\n\t\t\tif (!document && this.model.selectedTemplateId > 0)\n\t\t\t{\n\t\t\t\tdocument = this.getStubDocumentByTemplate(this.model.selectedTemplateId);\n\t\t\t}\n\t\t\tif (!document)\n\t\t\t{\n\t\t\t\tconst documents = this.model.documents;\n\t\t\t\tif (documents && documents[0])\n\t\t\t\t{\n\t\t\t\t\tdocument = documents[0];\n\t\t\t\t\tthis.$store.dispatch('documentSelector/setBoundDocumentId', {boundDocumentId: document.id});\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!document)\n\t\t\t{\n\t\t\t\tconst templates = this.model.templates;\n\t\t\t\tif (templates && templates[0])\n\t\t\t\t{\n\t\t\t\t\tdocument = this.getStubDocumentByTemplate(templates[0].id);\n\t\t\t\t\tthis.$store.commit('documentSelector/setSelectedTemplateId', {selectedTemplateId: templates[0].id});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn document;\n\t\t},\n\t\tgetDocumentById(id: number): ?Document\n\t\t{\n\t\t\tfor (const document: Document of this.model.documents)\n\t\t\t{\n\t\t\t\tif (document.id === id)\n\t\t\t\t{\n\t\t\t\t\treturn document;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\t\tgetTemplateById(id: number): ?Template\n\t\t{\n\t\t\tfor (const template: Template of this.model.templates)\n\t\t\t{\n\t\t\t\tif (template.id === id)\n\t\t\t\t{\n\t\t\t\t\treturn template;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\t\tgetStubDocumentByTemplate(templateId: number): ?Document\n\t\t{\n\t\t\tconst template = this.getTemplateById(templateId);\n\t\t\tif (!template)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tconst paymentId = this.$root.$app.options.paymentId || 0;\n\t\t\tlet title = null;\n\t\t\tlet detailUrl = null;\n\t\t\tif (paymentId > 0)\n\t\t\t{\n\t\t\t\ttitle = Loc.getMessage('SALESCENTER_DOCUMENT_SELECTOR_BLOCK_DOCUMENT_NEW_SUFFIX', {\n\t\t\t\t\t'#TITLE#': template.title\n\t\t\t\t});\n\t\t\t\tdetailUrl = Uri.addParam(template.documentCreationUrl, {\n\t\t\t\t\tvalues: {\n\t\t\t\t\t\t_paymentId: paymentId,\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\ttitle = Loc.getMessage('SALESCENTER_DOCUMENT_SELECTOR_BLOCK_DOCUMENT_CREATED_LATER_SUFFIX', {\n\t\t\t\t\t'#TITLE#': template.title\n\t\t\t\t});\n\t\t\t\tdetailUrl = null;\n\t\t\t}\n\t\t\treturn {\n\t\t\t\tid: 0,\n\t\t\t\ttitle,\n\t\t\t\tdetailUrl,\n\t\t\t\tisWithStamps: template.isWithStamps,\n\t\t\t}\n\t\t},\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<stage-block-item\n\t\t\t:class=\"statusClassMixin\"\n\t\t\t:config=\"configForBlock\"\n\t\t>\n\t\t\t<template v-slot:block-title-title>${Loc.getMessage('SALESCENTER_DOCUMENT_SELECTOR_BLOCK_TITLE')}</template>\n\t\t\t<template v-slot:block-container>\n\t\t\t\t<div :class=\"containerClassMixin\">\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t<div class=\"salescenter-app-payment-item-container-document-selector\">\n\t\t\t\t\t\t<div class=\"salescenter-app-payment-item-container-document-selector-selector\">\n\t\t\t\t\t\t\t<div class=\"salescenter-app-payment-item-container-document-selector-selector-file\">\n\t\t\t\t\t\t\t\t<div class=\"ui-icon ui-icon-lg ui-icon-file-pdf\"><i></i></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"salescenter-app-payment-item-container-document-selector-title\">\n\t\t\t\t\t\t\t\t<div \n\t\t\t\t\t\t\t\t\tref=\"selectorNode\"\n\t\t\t\t\t\t\t\t\tclass=\"salescenter-app-payment-item-container-document-selector-title-button\"\n\t\t\t\t\t\t\t\t\t@click=\"handleDocumentClick\"\n\t\t\t\t\t\t\t\t>{{getDocumentTitle}}</div>\n\t\t\t\t\t\t\t\t<div class=\"salescenter-app-payment-item-container-document-selector-title-sign\">{{withStamps}}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tv-if=\"hasData\"\n\t\t\t\t\t\t\tclass=\"salescenter-app-payment-item-container-document-selector-edit\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div \n\t\t\t\t\t\t\t\tclass=\"salescenter-app-payment-item-container-document-selector-edit-button\"\n\t\t\t\t\t\t\t\t@click=\"handleEditDocumentClick\"\n\t\t\t\t\t\t\t>\n                              <svg width=\"14\" height=\"14\" viewBox=\"0 0 14 14\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                                <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M11.4359 0.03479L13.9865 2.61221L4.00879 12.563L1.45822 9.98561L11.4359 0.03479ZM0.0256074 13.6726C0.00148857 13.7639 0.0273302 13.8603 0.0927957 13.9275C0.159984 13.9947 0.25646 14.0205 0.347767 13.9947L3.19896 13.2265L0.793965 10.8223L0.0256074 13.6726Z\" fill=\"#525C69\"/>\n                              </svg>\n                              ${Loc.getMessage('SALESCENTER_RIGHT_ACTION_EDIT')}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</stage-block-item>\n\t`\n};\n\nexport\n{\n\tDocumentSelector\n}","import {Loc} from 'main.core';\nimport {StatusTypes as Status} from 'salescenter.component.stage-block';\nimport * as Tile from 'salescenter.tile';\nimport * as TimeLineItem from 'salescenter.timeline';\nimport {UI} from 'ui.notification';\nimport {MixinTemplatesType} from '../templates-type-mixin';\nimport {Cashbox} from '../stage-blocks/cashbox';\nimport Product from '../stage-blocks/product';\nimport {DeliveryVuex} from '../stage-blocks/delivery-vuex';\nimport {PaySystem} from '../stage-blocks/paysystem';\nimport {ChatMessage} from '../stage-blocks/chat-message';\nimport {Automation} from '../stage-blocks/automation';\nimport {StageMixin} from '../stage-blocks/stage-mixin';\nimport Send from '../deal-receiving-payment/stage-blocks/send';\nimport {TimeLine} from '../stage-blocks/timeline';\nimport {DocumentSelector} from '../stage-blocks/document-selector';\n\nexport default {\n\tcomponents: {\n\t\t'chat-message-block': ChatMessage,\n\t\t'product-block': Product,\n\t\t'paysystem-block': PaySystem,\n\t\t'cashbox-block': Cashbox,\n\t\t'delivery-block': DeliveryVuex,\n\t\t'automation-block': Automation,\n\t\t'send-block': Send,\n\t\t'timeline-block': TimeLine,\n\t\t'document-selector-block': DocumentSelector,\n\t},\n\tdata()\n\t{\n\t\tlet stages = {\n\t\t\tmessage: {\n\t\t\t\tstatus: Status.complete,\n\t\t\t\tmanager: this.$root.$app.options.entityResponsible,\n\t\t\t\ttitleTemplate: Loc.getMessage('SALESCENTER_APP_CHAT_MESSAGE_TITLE'),\n\t\t\t\tshowHint: this.$root.$app.options.templateMode !== 'view',\n\t\t\t\teditorTemplate: this.$root.$app.sendingMethodDesc.text,\n\t\t\t\teditorUrl: this.$root.$app.orderPublicUrl\n\t\t\t},\n\t\t\tproduct: {\n\t\t\t\tstatus: this.$root.$app.options.basket && this.$root.$app.options.basket.length > 0\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.current,\n\t\t\t\ttitle: this.$root.$app.options.templateMode === 'view'\n\t\t\t\t\t? Loc.getMessage('SALESCENTER_PRODUCT_BLOCK_TITLE_PAYMENT_VIEW')\n\t\t\t\t\t: Loc.getMessage('SALESCENTER_PRODUCT_BLOCK_TITLE_SHORT'),\n\t\t\t\thintTitle: this.$root.$app.options.templateMode === 'view'\n\t\t\t\t\t? ''\n\t\t\t\t\t: Loc.getMessage('SALESCENTER_PRODUCT_SET_BLOCK_TITLE_SHORT'),\n\t\t\t},\n\t\t\tpaysystem: {\n\t\t\t\tstatus: this.$root.$app.options.paySystemList.isSet\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled,\n\t\t\t\ttiles: this.getTileCollection(this.$root.$app.options.paySystemList.items),\n\t\t\t\tinstalled: this.$root.$app.options.paySystemList.isSet,\n\t\t\t\ttitleItems: this.getTitleItems(this.$root.$app.options.paySystemList.items),\n\t\t\t\tinitialCollapseState: this.$root.$app.options.isPaySystemCollapsed\n\t\t\t\t\t? this.$root.$app.options.isPaySystemCollapsed === 'Y'\n\t\t\t\t\t: this.$root.$app.options.paySystemList.isSet,\n\t\t\t},\n\t\t\tcashbox: {},\n\t\t\tautomation: {},\n\t\t\tdocumentSelector: {\n\t\t\t\tstatus: Status.complete,\n\t\t\t},\n\t\t};\n\n\t\tif (this.$root.$app.options.hasOwnProperty('deliveryList'))\n\t\t{\n\t\t\tstages.delivery = {\n\t\t\t\tisHidden: (\n\t\t\t\t\tthis.$root.$app.options.templateMode === 'view'\n\t\t\t\t\t&& parseInt(this.$root.$app.options.shipmentId) <= 0\n\t\t\t\t),\n\t\t\t\tstatus: this.$root.$app.options.deliveryList.isInstalled\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled,\n\t\t\t\ttiles: this.getTileCollection(this.$root.$app.options.deliveryList.items),\n\t\t\t\tinstalled: this.$root.$app.options.deliveryList.isInstalled,\n\t\t\t\tinitialCollapseState: this.$root.$app.options.isDeliveryCollapsed\n\t\t\t\t\t? this.$root.$app.options.isDeliveryCollapsed === 'Y'\n\t\t\t\t\t: this.$root.$app.options.deliveryList.isInstalled,\n\t\t\t};\n\t\t}\n\n\t\tif (this.$root.$app.options.cashboxList.hasOwnProperty('items'))\n\t\t{\n\t\t\tstages.cashbox = {\n\t\t\t\tstatus: this.$root.$app.options.cashboxList.isSet\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled,\n\t\t\t\ttiles: this.getTileCollection(this.$root.$app.options.cashboxList.items),\n\t\t\t\tinstalled: this.$root.$app.options.cashboxList.isSet,\n\t\t\t\ttitleItems: this.getTitleItems(this.$root.$app.options.cashboxList.items),\n\t\t\t\tinitialCollapseState: this.$root.$app.options.isCashboxCollapsed\n\t\t\t\t\t? this.$root.$app.options.isCashboxCollapsed === 'Y'\n\t\t\t\t\t: this.$root.$app.options.cashboxList.isSet,\n\t\t\t};\n\t\t}\n\n\t\tif (this.$root.$app.options.isAutomationAvailable)\n\t\t{\n\t\t\tstages.automation = {\n\t\t\t\tstatus: Status.complete,\n\t\t\t\tstageOnOrderPaid: this.$root.$app.options.stageOnOrderPaid,\n\t\t\t\tstageOnDeliveryFinished: this.$root.$app.options.stageOnDeliveryFinished,\n\t\t\t\titems: this.$root.$app.options.entityStageList,\n\t\t\t\tinitialCollapseState: this.$root.$app.options.isAutomationCollapsed\n\t\t\t\t\t? this.$root.$app.options.isAutomationCollapsed === 'Y'\n\t\t\t\t\t: false,\n\t\t\t};\n\t\t}\n\n\t\tif (this.$root.$app.options.hasOwnProperty('timeline'))\n\t\t{\n\t\t\tstages.timeline = {\n\t\t\t\titems: this.getTimelineCollection(this.$root.$app.options.timeline)\n\t\t\t}\n\t\t}\n\n\t\tif (this.$root.$app.hasOwnProperty('documentSelector'))\n\t\t{\n\t\t\tif (this.$root.$app.documentSelector.templateAddUrl)\n\t\t\t{\n\t\t\t\tstages.documentSelector.templateAddUrl = this.$root.$app.documentSelector.templateAddUrl;\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\tstages: stages,\n\t\t}\n\t},\n\tmixins: [\n\t\tStageMixin,\n\t\tMixinTemplatesType\n\t],\n\tcomputed: {\n\t\tisSendAllowed()\n\t\t{\n\t\t\treturn this.$store.getters['orderCreation/isAllowedSubmit'];\n\t\t},\n\t\thasStageTimeLine()\n\t\t{\n\t\t\treturn this.stages.timeline.hasOwnProperty('items') && this.stages.timeline.items.length > 0;\n\t\t},\n\t\thasStageAutomation()\n\t\t{\n\t\t\treturn this.stages.automation.hasOwnProperty('items');\n\t\t},\n\t\thasStageCashBox()\n\t\t{\n\t\t\treturn this.stages.cashbox.hasOwnProperty('tiles');\n\t\t},\n\t\tsubmitButtonLabel()\n\t\t{\n\t\t\treturn Loc.getMessage('SALESCENTER_SEND');\n\t\t},\n\t\tisShowDocumentSelector()\n\t\t{\n\t\t\treturn this.$root.$app.hasOwnProperty('documentSelector');\n\t\t},\n\t},\n\tmethods: {\n\t\tinitCounter()\n\t\t{\n\t\t\tthis.counter = 1;\n\t\t},\n\t\tgetTimelineCollection(items)\n\t\t{\n\t\t\tlet list = [];\n\n\t\t\tObject.values(items).forEach((options) => {\n\t\t\t\tlist.push(TimeLineItem.Factory.create(options))\n\t\t\t});\n\n\t\t\treturn list;\n\t\t},\n\t\tgetTileCollection(items)\n\t\t{\n\t\t\tlet tiles = [];\n\n\t\t\tObject.values(items).forEach((options) => {\n\t\t\t\ttiles.push(Tile.Factory.create(options))\n\t\t\t});\n\n\t\t\treturn tiles;\n\t\t},\n\t\tgetTitleItems(items)\n\t\t{\n\t\t\tlet result = [];\n\t\t\titems.forEach((item) => {\n\t\t\t\tif (![Tile.More.type(), Tile.Offer.type()].includes(item.type))\n\t\t\t\t{\n\t\t\t\t\tresult.push(item);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn result;\n\t\t},\n\t\tstageRefresh(e, type)\n\t\t{\n\t\t\tBX.ajax.runComponentAction(\n\t\t\t\t'bitrix:salescenter.app',\n\t\t\t\t'getAjaxData',\n\t\t\t\t{\n\t\t\t\t\tmode: 'class',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\ttype: type,\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t).then(function(response) {\n\t\t\t\tif (response.data)\n\t\t\t\t{\n\t\t\t\t\tthis.refreshTilesByType(response.data, type);\n\t\t\t\t}\n\t\t\t}.bind(this),\n\t\t\tfunction() {\n\t\t\t\tUI.Notification.Center.notify({\n\t\t\t\t\tcontent: Loc.getMessage('SALESCENTER_DATA_UPDATE_ERROR'),\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\trefreshTilesByType(data, type)\n\t\t{\n\t\t\tif(type === 'PAY_SYSTEM')\n\t\t\t{\n\t\t\t\tthis.stages.paysystem.status = data.isSet\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled;\n\t\t\t\tthis.stages.paysystem.tiles = this.getTileCollection(data.items);\n\t\t\t\tthis.stages.paysystem.installed = data.isSet;\n\t\t\t}\n\t\t\telse if(type === 'CASHBOX')\n\t\t\t{\n\t\t\t\tthis.stages.cashbox.status = data.isSet\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled;\n\t\t\t\tthis.stages.cashbox.tiles = this.getTileCollection(data.items);\n\t\t\t\tthis.stages.cashbox.installed = data.isSet;\n\t\t\t\tthis.stages.cashbox.titleItems = this.getTitleItems(data.items);\n\t\t\t}\n\t\t\telse if(type === 'DELIVERY')\n\t\t\t{\n\t\t\t\tthis.stages.delivery.status = data.isSet\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled;\n\t\t\t\tthis.stages.delivery.tiles = this.getTileCollection(data.items);\n\t\t\t\tthis.stages.delivery.installed = data.isInstalled;\n\t\t\t}\n\t\t},\n\t\tonSend(event)\n\t\t{\n\t\t\tthis.$emit('stage-block-send-on-send', event);\n\t\t},\n\t\tchangeProvider(value)\n\t\t{\n\t\t\tthis.$root.$app.sendingMethodDesc.provider = value;\n\t\t\tBX.userOptions.save('salescenter', 'payment_sms_provider_options', 'latest_selected_provider', value);\n\t\t},\n\t\tsaveCollapsedOption(type, value)\n\t\t{\n\t\t\tBX.userOptions.save('salescenter', 'add_payment_collapse_options', type, value);\n\t\t},\n\n\t},\n\tcreated()\n\t{\n\t\tthis.initCounter();\n\t},\n\tbeforeUpdate()\n\t{\n\t\tthis.initCounter();\n\t},\n\ttemplate: `\n\t\t<div>\n\t\t\t<chat-message-block\n\t\t\t\t@stage-block-sms-send-on-change-provider=\"changeProvider\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.message.status\"\n\t\t\t\t:manager=\"stages.message.manager\"\n\t\t\t\t:titleTemplate=\"stages.message.titleTemplate\"\n\t\t\t\t:showHint=\"stages.message.showHint\"\n\t\t\t\t:editorTemplate=\"stages.message.editorTemplate\"\n\t\t\t\t:editorUrl=\"stages.message.editorUrl\"\n\t\t\t/>\t\n\t\t\t<product-block \n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.product.status\"\n\t\t\t\t:title=\"stages.product.title\"\n\t\t\t\t:hintTitle=\"stages.product.hintTitle\"\n\t\t\t/>\n\t\t\t<paysystem-block\n\t\t\t\t@on-stage-tile-collection-slider-close=\"stageRefresh($event, 'PAY_SYSTEM')\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.paysystem.status\"\n\t\t\t\t:tiles=\"stages.paysystem.tiles\"\n\t\t\t\t:installed=\"stages.paysystem.installed\"\n\t\t\t\t:titleItems=\"stages.paysystem.titleItems\"\n\t\t\t\t:initialCollapseState=\"stages.paysystem.initialCollapseState\"\n\t\t\t\t@on-save-collapsed-option=\"saveCollapsedOption\"\n\t\t\t/>\n\t\t\t<cashbox-block\n\t\t\t\tv-if=\"hasStageCashBox\"\n\t\t\t\t@on-stage-tile-collection-slider-close=\"stageRefresh($event, 'CASHBOX')\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.cashbox.status\"\n\t\t\t\t:tiles=\"stages.cashbox.tiles\"\n\t\t\t\t:installed=\"stages.cashbox.installed\"\n\t\t\t\t:titleItems=\"stages.cashbox.titleItems\"\n\t\t\t\t:initialCollapseState=\"stages.cashbox.initialCollapseState\"\n\t\t\t\t@on-save-collapsed-option=\"saveCollapsedOption\"\n\t\t\t/>\n\t\t\t<delivery-block\n\t\t\t\tv-if=\"stages.delivery && !stages.delivery.isHidden\"\n\t\t\t\t@on-stage-tile-collection-slider-close=\"stageRefresh($event, 'DELIVERY')\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.delivery.status\"\n\t\t\t\t:tiles=\"stages.delivery.tiles\"\n\t\t\t\t:installed=\"stages.delivery.installed\"\n\t\t\t\t:isCollapsible=\"true\"\n\t\t\t\t:initialCollapseState=\"stages.delivery.initialCollapseState\"\n\t\t\t\t@on-save-collapsed-option=\"saveCollapsedOption\"\n\t\t\t/>\n\t\t\t<document-selector-block\n\t\t\t\tv-if=\"isShowDocumentSelector\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:templateAddUrl=\"stages.documentSelector.templateAddUrl\"\n\t\t\t/>\n\t\t\t<automation-block\n\t\t\t\tv-if=\"hasStageAutomation\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.automation.status\"\n\t\t\t\t:stageOnOrderPaid=\"stages.automation.stageOnOrderPaid\"\n\t\t\t\t:stageOnDeliveryFinished=\"stages.automation.stageOnDeliveryFinished\"\n\t\t\t\t:items=\"stages.automation.items\"\n\t\t\t\t:initialCollapseState=\"stages.automation.initialCollapseState\"\n\t\t\t\t@on-save-collapsed-option=\"saveCollapsedOption\"\n\t\t\t/>\n\t\t\t<send-block\n\t\t\t\t@on-submit=\"onSend\"\n\t\t\t\t:buttonEnabled=\"isSendAllowed\"\n\t\t\t\t:buttonLabel=\"submitButtonLabel\"\n\t\t\t/>\n\t\t\t<timeline-block\n\t\t\t\tv-if=\"hasStageTimeLine\"\n\t\t\t\t:timelineItems=\"stages.timeline.items\"\n\t\t\t/>\n\t\t</div>\n\t`\n};\n","export default {\n\tdata()\n\t{\n\t\treturn {\n\t\t\tisFaded: false,\n\t\t};\n\t},\n\tmounted()\n\t{\n\t\tthis.createPinner();\n\t},\n\tcreated()\n\t{\n\t\tthis.$root.$on('on-start-progress', () => {\n\t\t\tthis.startFade();\n\t\t});\n\n\t\tthis.$root.$on('on-stop-progress', () => {\n\t\t\tthis.endFade();\n\t\t});\n\t},\n\tmethods: {\n\t\tstartFade()\n\t\t{\n\t\t\tthis.isFaded = true;\n\t\t},\n\t\tendFade()\n\t\t{\n\t\t\tthis.isFaded = false;\n\t\t},\n\t\tcreatePinner()\n\t\t{\n\t\t\tlet buttonsPanel = this.$refs['buttonsPanel'];\n\t\t\tif(buttonsPanel)\n\t\t\t{\n\t\t\t\tthis.$root.$el.parentNode.appendChild(buttonsPanel);\n\t\t\t\tnew BX.UI.Pinner(\n\t\t\t\t\tbuttonsPanel,\n\t\t\t\t\t{\n\t\t\t\t\t\tfixBottom: this.$root.$app.isFrame,\n\t\t\t\t\t\tfullWidth: this.$root.$app.isFrame\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t},\n\t\tclose()\n\t\t{\n\t\t\tthis.$root.$app.closeApplication();\n\t\t},\n\t},\n\tcomputed: {\n\t\tisOrderPublicUrlAvailable()\n\t\t{\n\t\t\treturn this.$root.$app.isOrderPublicUrlAvailable;\n\t\t},\n\t\twrapperClass()\n\t\t{\n\t\t\treturn {'salescenter-app-wrapper-fade': this.isFaded};\n\t\t},\n\t\twrapperStyle()\n\t\t{\n\t\t\tconst position = BX.pos(this.$root.$el);\n\n\t\t\tlet offset = position.top + 20;\n\t\t\tif(this.$root.$nodes.footer)\n\t\t\t{\n\t\t\t\toffset += BX.pos(this.$root.$nodes.footer).height;\n\t\t\t}\n\t\t\tconst buttonsPanel = this.$refs['buttonsPanel'];\n\t\t\tif(buttonsPanel)\n\t\t\t{\n\t\t\t\toffset += BX.pos(buttonsPanel).height;\n\t\t\t}\n\n\t\t\t//?auto\n\t\t\treturn {'minHeight': 'calc(100vh - ' + offset + 'px)'};\n\t\t},\n\t}\n}\n","import {Loc} from 'main.core';\nimport {Manager} from 'salescenter.manager';\n\nexport default {\n\tdata()\n\t{\n\t\treturn {\n\t\t};\n\t},\n\tmethods: {\n\t\tconnect()\n\t\t{\n\t\t\tconst loader = new BX.Loader({size: 200});\n\t\t\tloader.show(document.body);\n\n\t\t\tBX.Salescenter.Manager.connect({\n\t\t\t\tno_redirect: 'Y',\n\t\t\t\tcontext: this.$root.$app.context,\n\t\t\t}).then(() =>\n\t\t\t{\n\t\t\t\tBX.Salescenter.Manager.loadConfig().then((result) =>\n\t\t\t\t{\n\t\t\t\t\tloader.hide();\n\n\t\t\t\t\tif(result.isSiteExists)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$root.$app.isSiteExists = result.isSiteExists;\n\t\t\t\t\t\tthis.$root.$app.isOrderPublicUrlExists = true;\n\t\t\t\t\t\tthis.$root.$app.orderPublicUrl = result.orderPublicUrl;\n\t\t\t\t\t\tthis.$root.$app.isOrderPublicUrlAvailable = result.isOrderPublicUrlAvailable;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.$emit('on-successfully-connected');\n\t\t\t\t});\n\t\t\t}).catch(function()\n\t\t\t{\n\t\t\t\tloader.hide();\n\t\t\t});\n\t\t},\n\t\tcheckRecycle()\n\t\t{\n\t\t\tManager.openConnectedSite(true);\n\t\t},\n\t\topenConnectedSite()\n\t\t{\n\t\t\tManager.openConnectedSite();\n\t\t},\n\t},\n\tcomputed: {\n\t\tisOrderPageDeleted()\n\t\t{\n\t\t\treturn (this.$root.$app.isSiteExists && !this.isOrderPublicUrlExists);\n\t\t},\n\t\tisOrderPublicUrlExists()\n\t\t{\n\t\t\treturn this.$root.$app.isOrderPublicUrlExists;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"salescenter-app-page-content salescenter-app-start-wrapper\">\n\t\t\t<div class=\"ui-title-1 ui-text-center ui-color-medium\" style=\"margin-bottom: 20px;\">\n\t\t\t\t${Loc.getMessage('SALESCENTER_INFO_TEXT_TOP_2')}\n\t\t\t</div>\n\t\t\t<div class=\"ui-hr ui-mv-25\"></div>\n\t\t\t<template v-if=\"isOrderPublicUrlExists\">\n\t\t\t\t<div class=\"salescenter-title-5 ui-title-5 ui-text-center ui-color-medium\">\n\t\t\t\t\t${Loc.getMessage('SALESCENTER_INFO_TEXT_BOTTOM_PUBLIC')}\n\t\t\t\t</div>\n\t\t\t\t<div style=\"padding-top: 5px;\" class=\"ui-text-center\">\n\t\t\t\t\t<div class=\"ui-btn ui-btn-primary ui-btn-lg\" @click=\"openConnectedSite\">\n\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_INFO_PUBLIC')}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t\t<template v-else-if=\"isOrderPageDeleted\">\n\t\t\t\t<div class=\"salescenter-title-5 ui-title-5 ui-text-center ui-color-medium\">\n\t\t\t\t\t${Loc.getMessage('SALESCENTER_INFO_ORDER_PAGE_DELETED')}\n\t\t\t\t</div>\n\t\t\t\t<div style=\"padding-top: 5px;\" class=\"ui-text-center\">\n\t\t\t\t\t<div\n\t\t\t\t\t\t@click=\"checkRecycle\"\n\t\t\t\t\t\tclass=\"ui-btn ui-btn-primary ui-btn-lg\"\n\t\t\t\t\t>\n\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_CHECK_RECYCLE')}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t\t<template v-else>\n\t\t\t\t<div class=\"salescenter-title-5 ui-title-5 ui-text-center ui-color-medium\">\n\t\t\t\t\t${Loc.getMessage('SALESCENTER_INFO_TEXT_BOTTOM_2')}\n\t\t\t\t</div>\n\t\t\t\t<div style=\"padding-top: 5px;\" class=\"ui-text-center\">\n\t\t\t\t\t<div\n\t\t\t\t\t\t@click=\"connect\"\n\t\t\t\t\t\tclass=\"ui-btn ui-btn-primary ui-btn-lg\"\n\t\t\t\t\t>\n\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_INFO_CREATE')}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div style=\"padding-top: 5px;\" class=\"ui-text-center\">\n\t\t\t\t\t<div\n\t\t\t\t\t\t@click=\"BX.Salescenter.Manager.openHowPayDealWorks(event)\"\n\t\t\t\t\t\tclass=\"ui-btn ui-btn-link ui-btn-lg\"\n\t\t\t\t\t>\n\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_HOW')}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</div>\n\t`,\n}\n","import {Loc} from 'main.core';\nimport {Manager} from \"salescenter.manager\";\n\nexport default {\n\tdata()\n\t{\n\t\treturn {\n\t\t\tisVisible: true,\n\t\t};\n\t},\n\tmethods: {\n\t\thide()\n\t\t{\n\t\t\tthis.isVisible = false;\n\t\t\tthis.$emit('on-hide');\n\t\t},\n\t\topenControlPanel()\n\t\t{\n\t\t\tManager.openControlPanel();\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div v-if=\"isVisible\" class=\"salescenter-app-banner\" >\n\t\t\t<div class=\"salescenter-app-banner-inner\">\n\t\t\t\t<div class=\"salescenter-app-banner-title\">\n\t\t\t\t\t${Loc.getMessage('SALESCENTER_BANNER_TITLE')}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"salescenter-app-banner-content\">\n\t\t\t\t\t<div class=\"salescenter-app-banner-text\">\n\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_BANNER_TEXT')}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"salescenter-app-banner-btn-block\">\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t@click=\"openControlPanel\"\n\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-sm ui-btn-primary salescenter-app-banner-btn-connect\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_BANNER_BTN_CONFIGURE')}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t@click=\"hide\"\n\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-sm ui-btn-link salescenter-app-banner-btn-hide\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_BANNER_BTN_HIDE')}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\t@click=\"hide\"\n\t\t\t\t\tclass=\"salescenter-app-banner-close\"\n\t\t\t\t>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n}\n","import {Vue} from 'ui.vue';\nimport {Vuex} from 'ui.vue.vuex';\nimport {Manager} from 'salescenter.manager';\nimport {Loader} from 'main.loader';\nimport {Type, Uri} from 'main.core';\nimport {MixinTemplatesType} from './components/templates-type-mixin';\nimport StageBlocksList from './components/chat-receiving-payment/stage-blocks-list';\nimport ComponentMixin from './component-mixin';\nimport Product from './product';\nimport Start from './start';\nimport NoPaymentSystemsBanner from './no-payment-systems';\nimport 'popup';\nimport 'ui.buttons';\nimport 'ui.buttons.icons';\nimport 'ui.forms';\nimport 'ui.fonts.opensans';\nimport 'ui.pinner';\n\nexport default {\n\tmixins: [MixinTemplatesType, ComponentMixin],\n\tdata()\n\t{\n\t\treturn {\n\t\t\tisShowPreview: false,\n\t\t\tisShowPayment: false,\n\t\t\tpageTitle: '',\n\t\t\tcurrentPageId: null,\n\t\t\tactions: [],\n\t\t\tframeCheckShortTimeout: false,\n\t\t\tframeCheckLongTimeout: false,\n\t\t\tisPagesOpen: false,\n\t\t\tisFormsOpen: false,\n\t\t\tshowedPageIds: [],\n\t\t\tloadedPageIds: [],\n\t\t\terrorPageIds: [],\n\t\t\tlastAddedPages: [],\n\t\t\tordersCount: null,\n\t\t\tpaymentsCount: null,\n\t\t\teditedPageId: null,\n\t\t\tcurrentPageTitle: null\n\t\t};\n\t},\n\tcomponents:\n\t\t{\n\t\t\t'product': Product,\n\t\t\t'start': Start,\n\t\t\t'no-payment-systems-banner': NoPaymentSystemsBanner,\n\t\t\t'chat-receiving-payment': StageBlocksList,\n\t\t},\n\tupdated()\n\t{\n\t\tthis.renderErrors();\n\t},\n\tmounted()\n\t{\n\t\tthis.createLoader();\n\t\tthis.$root.$app.fillPages().then(() =>\n\t\t{\n\t\t\tif (this.$root.$app.isWithOrdersMode)\n\t\t\t{\n\t\t\t\tthis.refreshOrdersCount();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.refreshPaymentsCount();\n\t\t\t}\n\n\t\t\tthis.openFirstPage();\n\t\t});\n\n\t\tif(this.$root.$app.isPaymentsLimitReached)\n\t\t{\n\t\t\tlet paymentsLimitStartNode = this.$root.$nodes.paymentsLimit;\n\t\t\tlet paymentsLimitNode = this.$refs['paymentsLimit'];\n\t\t\tfor (let node of paymentsLimitStartNode.children)\n\t\t\t{\n\t\t\t\tpaymentsLimitNode.appendChild(node);\n\t\t\t}\n\t\t}\n\t},\n\tmethods:\n\t\t{\n\t\t\tgetActions()\n\t\t\t{\n\t\t\t\tlet actions = [];\n\t\t\t\tif(this.currentPage)\n\t\t\t\t{\n\t\t\t\t\tactions = [\n\t\t\t\t\t\t{text: this.localize.SALESCENTER_RIGHT_ACTION_COPY_URL, onclick: this.copyUrl},\n\t\t\t\t\t];\n\t\t\t\t\tif(this.currentPage.landingId > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tactions = [\n\t\t\t\t\t\t\t...actions,\n\t\t\t\t\t\t\t{text: this.localize.SALESCENTER_RIGHT_ACTION_HIDE, onclick: this.hidePage},\n\t\t\t\t\t\t];\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tactions = [\n\t\t\t\t\t\t\t...actions,\n\t\t\t\t\t\t\t{text: this.localize.SALESCENTER_RIGHT_ACTION_DELETE, onclick: this.hidePage},\n\t\t\t\t\t\t];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn [\n\t\t\t\t\t...actions,\n\t\t\t\t\t{text: this.localize.SALESCENTER_RIGHT_ACTION_ADD, items: this.getAddPageActions()},\n\t\t\t\t];\n\t\t\t},\n\t\t\tgetAddPageActions(isWebform = false)\n\t\t\t{\n\t\t\t\treturn [\n\t\t\t\t\t{text: this.localize.SALESCENTER_RIGHT_ACTION_ADD_SITE_B24, onclick: () =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.addSite(isWebform);\n\t\t\t\t\t\t}},\n\t\t\t\t\t{text: this.localize.SALESCENTER_RIGHT_ACTION_ADD_CUSTOM, onclick: () =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.showAddUrlPopup({\n\t\t\t\t\t\t\t\tisWebform: isWebform === true ? 'Y' : null\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}},\n\t\t\t\t];\n\t\t\t},\n\t\t\topenFirstPage()\n\t\t\t{\n\t\t\t\tthis.isShowPayment = false;\n\t\t\t\tthis.isShowPreview = true;\n\t\t\t\tif (this.$root.$app.isPaymentCreationAvailable)\n\t\t\t\t{\n\t\t\t\t\tthis.showPaymentForm();\n\t\t\t\t}\n\t\t\t\telse if(this.pages && this.pages.length > 0)\n\t\t\t\t{\n\t\t\t\t\tlet firstWebformPage = false;\n\t\t\t\t\tlet pageToOpen = false;\n\t\t\t\t\tthis.pages.forEach((page) =>\n\t\t\t\t\t{\n\t\t\t\t\t\tif(!pageToOpen)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif(!page.isWebform)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tpageToOpen = page;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tfirstWebformPage = page;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tif(!pageToOpen && firstWebformPage)\n\t\t\t\t\t{\n\t\t\t\t\t\tpageToOpen = firstWebformPage;\n\t\t\t\t\t}\n\t\t\t\t\tif(this.currentPageId !== pageToOpen.id)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.onPageClick(pageToOpen);\n\t\t\t\t\t\tif(pageToOpen.isWebform)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.isFormsOpen = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.isPagesOpen = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.currentPageId = this.pages[0].id;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.pageTitle = null;\n\t\t\t\t\tthis.currentPageId = null;\n\t\t\t\t\tthis.setPageTitle(this.pageTitle);\n\t\t\t\t}\n\t\t\t},\n\t\t\tonPageClick(page)\n\t\t\t{\n\t\t\t\tthis.pageTitle = page.name;\n\t\t\t\tthis.currentPageId = page.id;\n\t\t\t\tthis.hideActionsPopup();\n\t\t\t\tthis.isShowPayment = false;\n\t\t\t\tthis.isShowPreview = true;\n\t\t\t\tthis.setPageTitle(this.pageTitle);\n\t\t\t\tif(page.isFrameDenied !== true)\n\t\t\t\t{\n\t\t\t\t\tif(!this.showedPageIds.includes(page.id))\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.startFrameCheckTimeout();\n\t\t\t\t\t\tthis.showedPageIds.push(page.id);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.onFrameError();\n\t\t\t\t}\n\t\t\t},\n\t\t\tshowActionsPopup({target})\n\t\t\t{\n\t\t\t\tBX.PopupMenu.show('salescenter-app-actions', target, this.getActions(), {\n\t\t\t\t\toffsetLeft: 0,\n\t\t\t\t\toffsetTop: 0,\n\t\t\t\t\tcloseByEsc: true,\n\t\t\t\t});\n\t\t\t},\n\t\t\tshowCompanyContacts({target})\n\t\t\t{\n\t\t\t\tBX.Salescenter.Manager.openSlider(this.$root.$app.options.urlSettingsCompanyContacts, {width: 1200} );\n\t\t\t},\n\t\t\tshowAddPageActionPopup({target}, isWebform = false)\n\t\t\t{\n\t\t\t\tlet menuId = 'salescenter-app-add-page-actions';\n\t\t\t\tif(isWebform)\n\t\t\t\t{\n\t\t\t\t\tmenuId += '-forms';\n\t\t\t\t}\n\t\t\t\tBX.PopupMenu.show(menuId, target, this.getAddPageActions(isWebform), {\n\t\t\t\t\toffsetLeft: target.offsetWidth + 20,\n\t\t\t\t\toffsetTop: -target.offsetHeight - 15,\n\t\t\t\t\tcloseByEsc: true,\n\t\t\t\t\tangle: {\n\t\t\t\t\t\tposition: 'left',\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\thideActionsPopup()\n\t\t\t{\n\t\t\t\tBX.PopupMenu.destroy('salescenter-app-actions');\n\t\t\t\tBX.PopupMenu.destroy('salescenter-app-add-page-actions');\n\t\t\t},\n\t\t\taddSite(isWebform = false)\n\t\t\t{\n\t\t\t\tManager.addSitePage(isWebform).then((result) =>\n\t\t\t\t{\n\t\t\t\t\tlet newPage = result.answer.result.page || false;\n\t\t\t\t\tthis.$root.$app.fillPages().then(() =>\n\t\t\t\t\t{\n\t\t\t\t\t\tif(newPage)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.onPageClick(newPage);\n\t\t\t\t\t\t\tthis.lastAddedPages.push(parseInt(newPage.id));\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.openFirstPage();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\tthis.hideActionsPopup();\n\t\t\t},\n\t\t\tcopyUrl(event)\n\t\t\t{\n\t\t\t\tif(this.currentPage && this.currentPage.url)\n\t\t\t\t{\n\t\t\t\t\tManager.copyUrl(this.currentPage.url, event);\n\t\t\t\t\tthis.hideActionsPopup();\n\t\t\t\t}\n\t\t\t},\n\t\t\teditPage()\n\t\t\t{\n\t\t\t\tif(this.currentPage)\n\t\t\t\t{\n\t\t\t\t\tif(this.currentPage.landingId && this.currentPage.landingId > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tManager.editLandingPage(this.currentPage.landingId, this.currentPage.siteId);\n\t\t\t\t\t\tthis.hideActionsPopup();\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.showAddUrlPopup(this.currentPage);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\thidePage()\n\t\t\t{\n\t\t\t\tif(this.currentPage)\n\t\t\t\t{\n\t\t\t\t\tthis.$root.$app.hidePage(this.currentPage).then(() => {\n\t\t\t\t\t\tthis.openFirstPage();\n\t\t\t\t\t});\n\t\t\t\t\tthis.hideActionsPopup();\n\t\t\t\t}\n\t\t\t},\n\t\t\thideNoPaymentSystemsBanner()\n\t\t\t{\n\t\t\t\tthis.$root.$app.hideNoPaymentSystemsBanner();\n\t\t\t},\n\t\t\tshowAddUrlPopup(newPage)\n\t\t\t{\n\t\t\t\tif(!Type.isPlainObject(newPage))\n\t\t\t\t{\n\t\t\t\t\tnewPage = {};\n\t\t\t\t}\n\t\t\t\tManager.addCustomPage(newPage).then((pageId) =>\n\t\t\t\t{\n\t\t\t\t\tif(!this.isShowPreview)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.isShowPreview = false;\n\t\t\t\t\t}\n\t\t\t\t\tthis.$root.$app.fillPages().then(() => {\n\t\t\t\t\t\tif(pageId && (!Type.isPlainObject(newPage) || !newPage.id))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.lastAddedPages.push(parseInt(pageId));\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(!pageId && newPage)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tpageId = newPage.id;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(pageId)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.pages.forEach((page) =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif(parseInt(page.id) === parseInt(pageId))\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tthis.onPageClick(page);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif(!this.isShowPayment)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.isShowPreview = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\tthis.hideActionsPopup();\n\t\t\t},\n\t\t\tgetPaymentItemTitle(): ?string\n\t\t\t{\n\t\t\t\tif(!this.isOrderPublicUrlAvailable)\n\t\t\t\t{\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t\tif (this.$root.$app.options.mode === 'payment')\n\t\t\t\t{\n\t\t\t\t\treturn this.localize.SALESCENTER_LEFT_PAYMENT_ADD_2;\n\t\t\t\t}\n\n\t\t\t\treturn this.localize.SALESCENTER_LEFT_PAYMENT_AND_DELIVERY;\n\t\t\t},\n\t\t\tshowPaymentForm()\n\t\t\t{\n\t\t\t\tthis.isShowPayment = true;\n\t\t\t\tthis.isShowPreview = false;\n\t\t\t\tlet title = this.getPaymentItemTitle() || this.localize.SALESCENTER_DEFAULT_TITLE;\n\n\t\t\t\tthis.setPageTitle(title);\n\t\t\t},\n\t\t\tshowOrdersList()\n\t\t\t{\n\t\t\t\tthis.hideActionsPopup();\n\t\t\t\tManager.showOrdersList({\n\t\t\t\t\tcontext: this.$root.$app.context,\n\t\t\t\t\townerId: this.$root.$app.ownerId,\n\t\t\t\t\townerTypeId: this.$root.$app.ownerTypeId,\n\t\t\t\t}).then(() =>\n\t\t\t\t{\n\t\t\t\t\tthis.refreshOrdersCount();\n\t\t\t\t});\n\t\t\t},\n\t\t\tshowPaymentsList()\n\t\t\t{\n\t\t\t\tthis.hideActionsPopup();\n\t\t\t\tManager.showPaymentsList({\n\t\t\t\t\tcontext: this.$root.$app.context,\n\t\t\t\t\townerId: this.$root.$app.ownerId,\n\t\t\t\t\townerTypeId: this.$root.$app.ownerTypeId,\n\t\t\t\t}).then(() =>\n\t\t\t\t{\n\t\t\t\t\tthis.refreshPaymentsCount();\n\t\t\t\t});\n\t\t\t},\n\t\t\tshowOrderAdd()\n\t\t\t{\n\t\t\t\tthis.hideActionsPopup();\n\t\t\t\tManager.showOrderAdd({\n\t\t\t\t\townerId: this.$root.$app.ownerId,\n\t\t\t\t\townerTypeId: this.$root.$app.ownerTypeId,\n\t\t\t\t}).then(() =>\n\t\t\t\t{\n\t\t\t\t\tthis.refreshOrdersCount();\n\t\t\t\t});\n\t\t\t},\n\t\t\tshowCatalog()\n\t\t\t{\n\t\t\t\tthis.hideActionsPopup();\n\t\t\t\tManager.openSlider(`/saleshub/catalog/?sessionId=${this.$root.$app.sessionId}`);\n\t\t\t},\n\t\t\tonFormsClick()\n\t\t\t{\n\t\t\t\tthis.isFormsOpen = !this.isFormsOpen;\n\t\t\t\tthis.hideActionsPopup();\n\t\t\t},\n\t\t\topenControlPanel()\n\t\t\t{\n\t\t\t\tManager.openControlPanel();\n\t\t\t\tthis.hideActionsPopup();\n\t\t\t},\n\t\t\topenHelpDesk()\n\t\t\t{\n\t\t\t\tthis.hideActionsPopup();\n\t\t\t\tManager.openHowItWorks();\n\t\t\t},\n\t\t\tisPageSelected(page)\n\t\t\t{\n\t\t\t\treturn (this.currentPage && this.isShowPreview && this.currentPage.id === page.id);\n\t\t\t},\n\t\t\tsend(event, skipPublicMessage = 'n')\n\t\t\t{\n\t\t\t\tif(!this.isAllowedSubmitButton)\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif(this.isShowPayment && !this.isShowStartInfo)\n\t\t\t\t{\n\t\t\t\t\tthis.$root.$app.sendPayment(event.target, skipPublicMessage);\n\t\t\t\t}\n\t\t\t\telse if(this.currentPage && this.currentPage.isActive)\n\t\t\t\t{\n\t\t\t\t\tthis.$root.$app.sendPage(this.currentPage.id);\n\t\t\t\t}\n\t\t\t},\n\t\t\tsetPageTitle(title = null)\n\t\t\t{\n\t\t\t\tif(!title)\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif(this.$root.$nodes.title)\n\t\t\t\t{\n\t\t\t\t\tthis.$root.$nodes.title.innerText = title;\n\t\t\t\t}\n\t\t\t},\n\t\t\tonFrameError()\n\t\t\t{\n\t\t\t\tclearTimeout(this.frameCheckLongTimeout);\n\t\t\t\tif(this.showedPageIds.includes(this.currentPage.id))\n\t\t\t\t{\n\t\t\t\t\tthis.loadedPageIds.push(this.currentPage.id);\n\t\t\t\t}\n\t\t\t\tthis.errorPageIds.push(this.currentPage.id);\n\t\t\t},\n\t\t\tonFrameLoad(pageId)\n\t\t\t{\n\t\t\t\tclearTimeout(this.frameCheckLongTimeout);\n\t\t\t\tif(this.showedPageIds.includes(pageId))\n\t\t\t\t{\n\t\t\t\t\tthis.loadedPageIds.push(pageId);\n\t\t\t\t\tif(this.currentPage && this.currentPage.id === pageId)\n\t\t\t\t\t{\n\t\t\t\t\t\tif(this.frameCheckShortTimeout && !this.currentPage.landingId)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.onFrameError();\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(this.errorPageIds.includes(this.currentPage.id))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.errorPageIds = this.errorPageIds.filter((pageId) =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treturn pageId !== this.currentPage.id;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif(this.frameCheckShortTimeout && this.currentPage && this.currentPage.id === pageId && !this.currentPage.landingId)\n\t\t\t\t{\n\t\t\t\t\tthis.onFrameError();\n\t\t\t\t}\n\t\t\t},\n\t\t\tonSuccessfullyConnected()\n\t\t\t{\n\t\t\t\tthis.$root.$app.fillPages().then(() =>\n\t\t\t\t{\n\t\t\t\t\tthis.openFirstPage();\n\t\t\t\t});\n\t\t\t},\n\t\t\tstartFrameCheckTimeout()\n\t\t\t{\n\t\t\t\t// this is a workaround for denied through X-Frame-Options sources\n\t\t\t\tif(this.frameCheckShortTimeout)\n\t\t\t\t{\n\t\t\t\t\tclearTimeout(this.frameCheckShortTimeout);\n\t\t\t\t\tthis.frameCheckShortTimeout = false;\n\t\t\t\t}\n\t\t\t\tthis.frameCheckShortTimeout = setTimeout(() =>\n\t\t\t\t{\n\t\t\t\t\tthis.frameCheckShortTimeout = false;\n\t\t\t\t}, 500);\n\n\t\t\t\t// to show error on long loading\n\t\t\t\tclearTimeout(this.frameCheckLongTimeout);\n\t\t\t\tthis.frameCheckLongTimeout = setTimeout(() =>\n\t\t\t\t{\n\t\t\t\t\tif(this.currentPage && this.showedPageIds.includes(this.currentPage.id) && !this.loadedPageIds.includes(this.currentPage.id))\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.errorPageIds.push(this.currentPage.id);\n\t\t\t\t\t}\n\t\t\t\t}, 5000);\n\t\t\t},\n\t\t\tgetFrameSource(page)\n\t\t\t{\n\t\t\t\tif(this.showedPageIds.includes(page.id))\n\t\t\t\t{\n\t\t\t\t\tif(page.landingId > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tif(page.isActive)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn (new Uri(page.url)).setQueryParam('theme', '').toString();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\treturn page.url;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn null;\n\t\t\t},\n\t\t\trefreshOrdersCount()\n\t\t\t{\n\t\t\t\tthis.$root.$app.getOrdersCount().then((result) =>\n\t\t\t\t{\n\t\t\t\t\tthis.ordersCount = result.answer.result || null;\n\t\t\t\t}).catch(() =>\n\t\t\t\t{\n\t\t\t\t\tthis.ordersCount = null;\n\t\t\t\t});\n\t\t\t},\n\t\t\trefreshPaymentsCount()\n\t\t\t{\n\t\t\t\tthis.$root.$app.getPaymentsCount().then((result) =>\n\t\t\t\t{\n\t\t\t\t\tthis.paymentsCount = result.answer.result || null;\n\t\t\t\t}).catch(() =>\n\t\t\t\t{\n\t\t\t\t\tthis.paymentsCount = null;\n\t\t\t\t});\n\t\t\t},\n\t\t\trenderErrors()\n\t\t\t{\n\t\t\t\tif (this.isShowPayment && this.order.errors.length > 0)\n\t\t\t\t{\n\t\t\t\t\tlet errorMessages = this.order.errors.map((item) => item.message).join('<br>');\n\t\t\t\t\tlet params = {\n\t\t\t\t\t\tcolor: BX.UI.Alert.Color.DANGER,\n\t\t\t\t\t\ttextCenter: true,\n\t\t\t\t\t\ttext: BX.util.htmlspecialchars(errorMessages)\n\t\t\t\t\t};\n\t\t\t\t\tif (this.$refs.errorBlock.innerHTML.length === 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tparams.animated = true;\n\t\t\t\t\t}\n\t\t\t\t\tlet alert = new BX.UI.Alert(params);\n\t\t\t\t\tthis.$refs.errorBlock.innerHTML = '';\n\t\t\t\t\tthis.$refs.errorBlock.appendChild(alert.getContainer());\n\t\t\t\t}\n\t\t\t\telse if (this.$refs.errorBlock)\n\t\t\t\t{\n\t\t\t\t\tthis.$refs.errorBlock.innerHTML = '';\n\t\t\t\t}\n\t\t\t},\n\t\t\teditMenuItem(event, page)\n\t\t\t{\n\t\t\t\tthis.editedPageId = page.id;\n\t\t\t\tsetTimeout(() =>\n\t\t\t\t{\n\t\t\t\t\tevent.target.parentNode.parentNode.querySelector('input').focus();\n\t\t\t\t}, 50);\n\t\t\t},\n\t\t\tsaveMenuItem(event)\n\t\t\t{\n\t\t\t\tconst pageId = this.editedPageId;\n\t\t\t\tconst name = event.target.value;\n\t\t\t\tlet oldName;\n\t\t\t\tthis.pages.forEach((page) =>\n\t\t\t\t{\n\t\t\t\t\tif(page.id === this.editedPageId)\n\t\t\t\t\t{\n\t\t\t\t\t\toldName = page.name\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tif(pageId > 0 && oldName && name !== oldName && name.length > 0)\n\t\t\t\t{\n\t\t\t\t\tManager.addPage({\n\t\t\t\t\t\tid: pageId,\n\t\t\t\t\t\tname: name,\n\t\t\t\t\t\tanalyticsLabel: 'salescenterUpdatePageTitle',\n\t\t\t\t\t}).then(() =>\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$root.$app.fillPages().then(() => {\n\t\t\t\t\t\t\tif(this.editedPageId === this.currentPageId)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.setPageTitle(name);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthis.editedPageId = null;\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.editedPageId = null;\n\t\t\t\t}\n\t\t\t},\n\t\t\tcreateLoader()\n\t\t\t{\n\t\t\t\tconst loader = new Loader({size: 200});\n\t\t\t\tloader.show(this.$refs['previewLoader']);\n\t\t\t}\n\t\t},\n\n\tcomputed:\n\t\t{\n\t\t\tconfig: () => config,\n\t\t\tcurrentPage()\n\t\t\t{\n\t\t\t\tif(this.currentPageId > 0)\n\t\t\t\t{\n\t\t\t\t\tlet pages = this.application.pages.filter((page) =>\n\t\t\t\t\t{\n\t\t\t\t\t\treturn page.id === this.currentPageId;\n\t\t\t\t\t});\n\t\t\t\t\tif(pages.length > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn pages[0];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn null;\n\t\t\t},\n\n\t\t\tpagesSubmenuHeight()\n\t\t\t{\n\t\t\t\tif(this.isPagesOpen)\n\t\t\t\t{\n\t\t\t\t\treturn (this.application.pages.filter((page) =>\n\t\t\t\t\t{\n\t\t\t\t\t\treturn !page.isWebform;\n\t\t\t\t\t}).length * 39 + 30) + 'px';\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\treturn '0px';\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tformsSubmenuHeight()\n\t\t\t{\n\t\t\t\tif(this.isFormsOpen)\n\t\t\t\t{\n\t\t\t\t\treturn (this.application.pages.filter((page) =>\n\t\t\t\t\t{\n\t\t\t\t\t\treturn page.isWebform;\n\t\t\t\t\t}).length * 39 + 30) + 'px';\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\treturn '0px';\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tisFrameError()\n\t\t\t{\n\t\t\t\tif(this.isShowPreview && this.currentPage)\n\t\t\t\t{\n\t\t\t\t\tif(!this.currentPage.isActive)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\telse if(!this.currentPage.landingId && this.errorPageIds.includes(this.currentPage.id))\n\t\t\t\t\t{\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t},\n\n\t\t\tisShowLoader()\n\t\t\t{\n\t\t\t\treturn (\n\t\t\t\t\tthis.isShowPreview &&\n\t\t\t\t\tthis.currentPageId > 0 &&\n\t\t\t\t\tthis.showedPageIds.includes(this.currentPageId) &&\n\t\t\t\t\t!this.loadedPageIds.includes(this.currentPageId)\n\t\t\t\t);\n\t\t\t},\n\n\t\t\tisShowStartInfo()\n\t\t\t{\n\t\t\t\tlet res = false;\n\t\t\t\tif(this.isShowPreview)\n\t\t\t\t{\n\t\t\t\t\tres = (!this.pages || this.pages.length <= 0);\n\t\t\t\t}\n\t\t\t\telse if(this.isShowPayment)\n\t\t\t\t{\n\t\t\t\t\tres = !this.isOrderPublicUrlAvailable;\n\t\t\t\t}\n\n\t\t\t\treturn res;\n\t\t\t},\n\n\t\t\tlastModified()\n\t\t\t{\n\t\t\t\tif(this.currentPage && this.currentPage.modifiedAgo)\n\t\t\t\t{\n\t\t\t\t\treturn this.localize.SALESCENTER_MODIFIED.replace('#AGO#', this.currentPage.modifiedAgo);\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\t\t\t},\n\n\t\t\tlocalize()\n\t\t\t{\n\t\t\t\treturn Vue.getFilteredPhrases('SALESCENTER_');\n\t\t\t},\n\n\t\t\tpages()\n\t\t\t{\n\t\t\t\treturn [...this.application.pages];\n\t\t\t},\n\n\t\t\tisAllowedSubmitButton()\n\t\t\t{\n\t\t\t\tif(this.$root.$app.disableSendButton)\n\t\t\t\t{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tif (this.isShowPreview && this.currentPage && !this.currentPage.isActive)\n\t\t\t\t{\n\t\t\t\t\treturn false\n\t\t\t\t}\n\t\t\t\tif (this.isShowPayment)\n\t\t\t\t{\n\t\t\t\t\treturn this.$store.getters['orderCreation/isAllowedSubmit'];\n\t\t\t\t}\n\t\t\t\treturn this.currentPage;\n\t\t\t},\n\t\t\tisNoPaymentSystemsBannerVisible()\n\t\t\t{\n\t\t\t\treturn this.$root.$app.options.showPaySystemSettingBanner;\n\t\t\t},\n\t\t\tmode()\n\t\t\t{\n\t\t\t\treturn this.$root.$app.options.mode;\n\t\t\t},\n\t\t\t...Vuex.mapState({\n\t\t\t\tapplication: state => state.application,\n\t\t\t\torder: state => state.orderCreation,\n\t\t\t})\n\t\t},\n\ttemplate: `\n\t\t<div\n\t\t\t:class=\"wrapperClass\"\n\t\t\t:style=\"wrapperStyle\"\n\t\t\tclass=\"salescenter-app-wrapper salescenter-app-chat-wrapper\"\n\t\t>\n\t\t\t<div class=\"ui-sidepanel-sidebar salescenter-app-sidebar\" ref=\"sidebar\">\n\t\t\t\t<ul class=\"ui-sidepanel-menu\" ref=\"sidepanelMenu\">\n\t\t\t\t\t<li v-if=\"this.$root.$app.isPaymentCreationAvailable\" :class=\"{ 'salescenter-app-sidebar-menu-active': this.isShowPayment}\" class=\"ui-sidepanel-menu-item\" @click=\"showPaymentForm\">\n\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link\">\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">{{getPaymentItemTitle()}}</div>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li :class=\"{'salescenter-app-sidebar-menu-active': isPagesOpen}\" class=\"ui-sidepanel-menu-item\">\n\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link\" @click.stop.prevent=\"isPagesOpen = !isPagesOpen;\">\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">{{localize.SALESCENTER_LEFT_PAGES}}</div>\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-toggle-btn\">{{this.isPagesOpen ? this.localize.SALESCENTER_SUBMENU_CLOSE : this.localize.SALESCENTER_SUBMENU_OPEN}}</div>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t<ul class=\"ui-sidepanel-submenu\" :style=\"{height: pagesSubmenuHeight}\">\n\t\t\t\t\t\t\t<li v-for=\"page in pages\" v-if=\"!page.isWebform\" :key=\"page.id\"\n\t\t\t\t\t\t\t:class=\"{\n\t\t\t\t\t\t\t\t'ui-sidepanel-submenu-active': (currentPage && currentPage.id == page.id && isShowPreview),\n\t\t\t\t\t\t\t\t'ui-sidepanel-submenu-edit-mode': (editedPageId === page.id)\n\t\t\t\t\t\t\t}\" class=\"ui-sidepanel-submenu-item\">\n\t\t\t\t\t\t\t\t<a :title=\"page.name\" class=\"ui-sidepanel-submenu-link\" @click.stop=\"onPageClick(page)\">\n\t\t\t\t\t\t\t\t\t<input class=\"ui-sidepanel-input\" :value=\"page.name\" v-on:keyup.enter=\"saveMenuItem($event)\" @blur=\"saveMenuItem($event)\" />\n\t\t\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">{{page.name}}</div>\n\t\t\t\t\t\t\t\t\t<div v-if=\"lastAddedPages.includes(page.id)\" class=\"ui-sidepanel-badge-new\"></div>\n\t\t\t\t\t\t\t\t\t<div class=\"ui-sidepanel-edit-btn\"><span class=\"ui-sidepanel-edit-btn-icon\" @click=\"editMenuItem($event, page);\"></span></div>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li class=\"salescenter-app-helper-nav-item salescenter-app-menu-add-page\" @click.stop=\"showAddPageActionPopup($event)\">\n\t\t\t\t\t\t\t\t<span class=\"salescenter-app-helper-nav-item-text salescenter-app-helper-nav-item-add\">+</span><span class=\"salescenter-app-helper-nav-item-text\">{{localize.SALESCENTER_RIGHT_ACTION_ADD}}</span>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li v-if=\"this.$root.$app.isWithOrdersMode\" @click=\"showOrdersList\">\n\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link\">\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">{{localize.SALESCENTER_LEFT_ORDERS}}</div>\n\t\t\t\t\t\t\t<span class=\"ui-sidepanel-counter\" ref=\"ordersCounter\" v-show=\"ordersCount > 0\">{{ordersCount}}</span>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li v-if=\"this.$root.$app.isWithOrdersMode\" @click=\"showOrderAdd\">\n\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link\">\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">{{localize.SALESCENTER_LEFT_ORDER_ADD}}</div>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li v-if=\"!this.$root.$app.isWithOrdersMode\" @click=\"showPaymentsList\">\n\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link\">\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">{{localize.SALESCENTER_LEFT_PAYMENTS}}</div>\n\t\t\t\t\t\t\t<span class=\"ui-sidepanel-counter\" ref=\"paymentsCounter\" v-show=\"paymentsCount > 0\">{{paymentsCount}}</span>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li v-if=\"this.$root.$app.isCatalogAvailable\" @click=\"showCatalog\">\n\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link\">\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">{{localize.SALESCENTER_LEFT_CATALOG}}</div>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li :class=\"{'salescenter-app-sidebar-menu-active': isFormsOpen}\" class=\"ui-sidepanel-menu-item\">\n\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link\" @click.stop.prevent=\"onFormsClick();\">\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">{{localize.SALESCENTER_LEFT_FORMS_ALL}}</div>\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-toggle-btn\">{{this.isFormsOpen ? this.localize.SALESCENTER_SUBMENU_CLOSE : this.localize.SALESCENTER_SUBMENU_OPEN}}</div>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t<ul class=\"ui-sidepanel-submenu\" :style=\"{height: formsSubmenuHeight}\">\n\t\t\t\t\t\t\t<li v-for=\"page in pages\" v-if=\"page.isWebform\" :key=\"page.id\"\n\t\t\t\t\t\t\t :class=\"{\n\t\t\t\t\t\t\t\t'ui-sidepanel-submenu-active': (currentPage && currentPage.id == page.id && isShowPreview),\n\t\t\t\t\t\t\t\t'ui-sidepanel-submenu-edit-mode': (editedPageId === page.id)\n\t\t\t\t\t\t\t}\" class=\"ui-sidepanel-submenu-item\">\n\t\t\t\t\t\t\t\t<a :title=\"page.name\" class=\"ui-sidepanel-submenu-link\" @click.stop=\"onPageClick(page)\">\n\t\t\t\t\t\t\t\t\t<input class=\"ui-sidepanel-input\" :value=\"page.name\" v-on:keyup.enter=\"saveMenuItem($event)\" @blur=\"saveMenuItem($event)\" />\n\t\t\t\t\t\t\t\t\t<div v-if=\"lastAddedPages.includes(page.id)\" class=\"ui-sidepanel-badge-new\"></div>\n\t\t\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">{{page.name}}</div>\n\t\t\t\t\t\t\t\t\t<div class=\"ui-sidepanel-edit-btn\"><span class=\"ui-sidepanel-edit-btn-icon\" @click=\"editMenuItem($event, page);\"></span></div>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li class=\"salescenter-app-helper-nav-item salescenter-app-menu-add-page\" @click.stop=\"showAddPageActionPopup($event, true)\">\n\t\t\t\t\t\t\t\t<span class=\"salescenter-app-helper-nav-item-text salescenter-app-helper-nav-item-add\">+</span><span class=\"salescenter-app-helper-nav-item-text\">{{localize.SALESCENTER_RIGHT_ACTION_ADD}}</span>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t\t<div class=\"salescenter-app-right-side\">\n\t\t\t\t<div class=\"salescenter-app-page-header\" v-show=\"isShowPreview && !isShowStartInfo\">\n\t\t\t\t\t<div class=\"salescenter-btn-action ui-btn ui-btn-link ui-btn-dropdown ui-btn-xs\" @click=\"showActionsPopup($event)\">{{localize.SALESCENTER_RIGHT_ACTIONS_BUTTON}}</div>\n\t\t\t\t\t<div class=\"salescenter-btn-delimiter salescenter-btn-action\"></div>\n\t\t\t\t\t<div class=\"salescenter-btn-action ui-btn ui-btn-link ui-btn-xs ui-btn-icon-edit\" @click=\"editPage\">{{localize.SALESCENTER_RIGHT_ACTION_EDIT}}</div>\n\t\t\t\t</div>\n\t\t\t\t<start\n\t\t\t\t\tv-if=\"isShowStartInfo\"\n\t\t\t\t\t@on-successfully-connected=\"onSuccessfullyConnected\"\n\t\t\t\t>\n\t\t\t\t</start>\n\t\t\t\t<template v-else-if=\"isFrameError && isShowPreview\">\n\t\t\t\t\t<div class=\"salescenter-app-page-content salescenter-app-lost\">\n\t\t\t\t\t\t<div class=\"salescenter-app-lost-block ui-title-1 ui-text-center ui-color-medium\">{{localize.SALESCENTER_ERROR_TITLE}}</div>\n\t\t\t\t\t\t<div v-if=\"currentPage.isFrameDenied === true\" class=\"salescenter-app-lost-helper ui-color-medium\">{{localize.SALESCENTER_RIGHT_FRAME_DENIED}}</div>\n\t\t\t\t\t\t<div v-else-if=\"currentPage.isActive !== true\" class=\"salescenter-app-lost-helper salescenter-app-not-active ui-color-medium\">{{localize.SALESCENTER_RIGHT_NOT_ACTIVE}}</div>\n\t\t\t\t\t\t<div v-else class=\"salescenter-app-lost-helper ui-color-medium\">{{localize.SALESCENTER_ERROR_TEXT}}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t\t<div v-show=\"isShowPreview && !isShowStartInfo && !isFrameError\" class=\"salescenter-app-page-content\">\n\t\t\t\t\t<template v-for=\"page in pages\">\n\t\t\t\t\t\t<iframe class=\"salescenter-app-demo\" v-show=\"currentPage && currentPage.id == page.id\" :src=\"getFrameSource(page)\" frameborder=\"0\" @error=\"onFrameError(page.id)\" @load=\"onFrameLoad(page.id)\" :key=\"page.id\"></iframe>\n\t\t\t\t\t</template>\n\t\t\t\t\t<div class=\"salescenter-app-demo-overlay\" :class=\"{\n\t\t\t\t\t\t'salescenter-app-demo-overlay-loading': this.isShowLoader\n\t\t\t\t\t}\">\n\t\t\t\t\t\t<div v-show=\"isShowLoader\" ref=\"previewLoader\"></div>\n\t\t\t\t\t\t<div v-if=\"lastModified\" class=\"salescenter-app-demo-overlay-modification\">{{lastModified}}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t    <template v-if=\"this.$root.$app.isPaymentsLimitReached\">\n\t\t\t        <div ref=\"paymentsLimit\" v-show=\"isShowPayment && !isShowStartInfo\"></div>\n\t\t\t\t</template>\n\t\t\t\t<template v-else>\n\t\t\t\t\t<chat-receiving-payment\n\t\t\t\t\t\tv-if=\"isShowPayment && !isShowStartInfo\"\n\t\t\t\t\t\t:key=\"order.basketVersion\"\n\t\t\t\t\t\t@stage-block-send-on-send=\"send($event)\"\n\t\t\t\t\t/>\n\t\t        </template>\n\t\t\t</div>\n\t\t\t<div class=\"ui-button-panel-wrapper salescenter-button-panel\" ref=\"buttonsPanel\">\n\t\t\t\t<div class=\"ui-button-panel\">\n\t\t\t\t\t<button :class=\"{'ui-btn-disabled': !this.isAllowedSubmitButton}\" class=\"ui-btn ui-btn-md ui-btn-success\" @click=\"send($event)\">{{localize.SALESCENTER_SEND}}</button>\n\t\t\t\t\t<button class=\"ui-btn ui-btn-md ui-btn-link\" @click=\"close\">{{localize.SALESCENTER_CANCEL}}</button>\n\t\t\t\t\t<button v-if=\"isShowPayment && !isShowStartInfo && !this.$root.$app.isPaymentsLimitReached && this.$root.$app.isWithOrdersMode\" class=\"ui-btn ui-btn-md ui-btn-link btn-send-crm\" @click=\"send($event, 'y')\">{{localize.SALESCENTER_SAVE_ORDER}}</button>\n\t\t\t\t</div>\n\t\t\t\t<div v-if=\"this.order.errors.length > 0\" ref=\"errorBlock\"></div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n}\n","import { Loc, ajax as Ajax } from 'main.core';\nimport { Block } from 'salescenter.component.stage-block';\nimport { StageMixin } from './stage-mixin';\nimport { Error, SenderList, UserAvatar, MessageEdit, MessageView, MessageEditor, MessageControl } from 'salescenter.component.stage-block.sms-message';\nimport { Manager } from \"salescenter.manager\";\nimport { SenderConfig } from \"salescenter.lib\";\nimport {UI} from \"ui.notification\";\n\nconst TYPE_PHONE = 'phone';\nconst TYPE_SENDER = 'sender';\n\nconst SmsMessage = {\n\tprops: {\n\t\tinitSenders: {\n\t\t\ttype: Array,\n\t\t\trequired: true\n\t\t},\n\t\tinitCurrentSenderCode: {\n\t\t\ttype: String,\n\t\t\trequired: false\n\t\t},\n\t\tinitPushedToUseBitrix24Notifications: {\n\t\t\ttype: String,\n\t\t\trequired: false\n\t\t},\n\t\tstatus: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\tcounter: {\n\t\t\ttype: Number,\n\t\t\trequired: true\n\t\t},\n\t\tmanager: {\n\t\t\ttype: Object,\n\t\t\trequired: true\n\t\t},\n\t\tselectedSmsSender: {\n\t\t\ttype: String,\n\t\t\trequired: false\n\t\t},\n\t\tphone: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\tcontactEditorUrl: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\townerTypeId: {\n\t\t\ttype: Number,\n\t\t\trequired: true\n\t\t},\n\t\townerId: {\n\t\t\ttype: Number,\n\t\t\trequired: true\n\t\t},\n\t\ttitleTemplate: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\tshowHint: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true\n\t\t},\n\t\teditorTemplate: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\teditorUrl: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t}\n\t},\n\tmixins: [StageMixin],\n\tcomponents: {\n\t\t'stage-block-item':\tBlock,\n\t\t'sms-error-block': Error,\n\t\t'sms-sender-list-block': SenderList,\n\t\t'sms-user-avatar-block': UserAvatar,\n\t\t'sms-message-edit-block': MessageEdit,\n\t\t'sms-message-view-block': MessageView,\n\t\t'sms-message-editor-block': MessageEditor,\n\t\t'sms-message-control-block': MessageControl,\n\t},\n\tdata()\n\t{\n\t\treturn {\n\t\t\tcontactPhone: this.phone,\n\t\t\tcurrentSenderCode: null,\n\t\t\tsenders: [],\n\t\t\tpushedToUseBitrix24Notifications: null,\n\t\t\tsmsSenderListComponentKey: 0,\n\t\t}\n\t},\n\tcomputed: {\n\t\tconfigForBlock()\n\t\t{\n\t\t\treturn {\n\t\t\t\tcounter: this.counter,\n\t\t\t\tchecked: this.counterCheckedMixin,\n\t\t\t\tshowHint: true,\n\t\t\t\thintClassModifier: 'salescenter-app-payment-by-sms-item-title-info--link-gray',\n\t\t\t}\n\t\t},\n\t\teditor()\n\t\t{\n\t\t\treturn {\n\t\t\t\ttemplate: this.editorTemplate,\n\t\t\t\turl: this.editorUrl\n\t\t\t};\n\t\t},\n\t\tcurrentSender()\n\t\t{\n\t\t\treturn this.senders.find(sender => sender.code === this.currentSenderCode);\n\t\t},\n\t\ttitle()\n\t\t{\n\t\t\treturn this.titleTemplate.replace('#PHONE#', this.contactPhone);\n\t\t},\n\t\terrors()\n\t\t{\n\t\t\tlet result = [];\n\n\t\t\tlet bitrix24ConnectUrlError;\n\n\t\t\tif (!this.currentSender)\n\t\t\t{\n\t\t\t\tfor (let sender of this.senders)\n\t\t\t\t{\n\t\t\t\t\tif (!SenderConfig.needConfigure(sender))\n\t\t\t\t\t{\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tresult.push({\n\t\t\t\t\t\ttext: this.getConnectionErrorText(sender),\n\t\t\t\t\t\tfixer: SenderConfig.openSliderFreeMessages(sender.connectUrl),\n\t\t\t\t\t\tfixText: this.getConnectionErrorFixText(sender),\n\t\t\t\t\t\ttype: TYPE_SENDER\n\t\t\t\t\t});\n\n\t\t\t\t\tif (sender.code === SenderConfig.BITRIX24)\n\t\t\t\t\t{\n\t\t\t\t\t\tbitrix24ConnectUrlError = sender.connectUrl;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (!this.currentSender.isAvailable)\n\t\t\t\t{\n\t\t\t\t\tresult.push({\n\t\t\t\t\t\ttext: Loc.getMessage('SALESCENTER_SEND_ORDER_BY_SMS_' + this.currentSender.code.toUpperCase() + '_NOT_AVAILABLE'),\n\t\t\t\t\t\ttype: TYPE_SENDER\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tif (this.currentSender.isConnected)\n\t\t\t\t\t{\n\t\t\t\t\t\tresult = this.currentSender.usageErrors.map(error => ({ text: error, type: TYPE_SENDER }))\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tresult.push({\n\t\t\t\t\t\t\ttext: this.getConnectionErrorText(this.currentSender),\n\t\t\t\t\t\t\tfixer: this.getFixer(this.currentSender.connectUrl),\n\t\t\t\t\t\t\tfixText: this.getConnectionErrorFixText(this.currentSender),\n\t\t\t\t\t\t\ttype: TYPE_SENDER\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif (this.currentSender.code === SenderConfig.BITRIX24)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tbitrix24ConnectUrlError = this.currentSender.connectUrl;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!this.contactPhone)\n\t\t\t{\n\t\t\t\tif(this.contactEditorUrl.length > 0)\n\t\t\t\t{\n\t\t\t\t\tresult.push({\n\t\t\t\t\t\ttext: Loc.getMessage('SALESCENTER_SEND_ORDER_BY_SMS_SENDER_ALERT_PHONE_EMPTY'),\n\t\t\t\t\t\tfixer: this.getFixer(this.contactEditorUrl),\n\t\t\t\t\t\tfixText: Loc.getMessage('SALESCENTER_SEND_ORDER_BY_SMS_SENDER_ALERT_PHONE_EMPTY_SETTINGS'),\n\t\t\t\t\t\ttype: TYPE_PHONE\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tresult.push({\n\t\t\t\t\t\ttext: Loc.getMessage('SALESCENTER_SEND_ORDER_BY_SMS_SENDER_ALERT_PHONE_EMPTY'),\n\t\t\t\t\t\ttype: TYPE_PHONE\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif (this.pushedToUseBitrix24Notifications === 'N' && bitrix24ConnectUrlError)\n\t\t\t{\n\t\t\t\tthis.getFixer(bitrix24ConnectUrlError)().then(() => this.handleErrorFix());\n\t\t\t\tBX.userOptions.save('salescenter', 'payment_sender_options', 'pushed_to_use_bitrix24_notifications', 'Y');\n\t\t\t\tthis.pushedToUseBitrix24Notifications = 'Y';\n\t\t\t}\n\n\t\t\treturn result;\n\t\t}\n\t},\n\tcreated() {\n\t\tthis.initialize(this.initCurrentSenderCode, this.initSenders, this.initPushedToUseBitrix24Notifications);\n\t},\n\tmethods: {\n\t\tonConfigureContactPhone()\n\t\t{\n\t\t\tthis.$emit('stage-block-sms-message-on-change-contact-phone');\n\t\t},\n\t\tgetConnectionErrorText(sender)\n\t\t{\n\t\t\tconst messageCode = 'SALESCENTER_SEND_ORDER_BY_SMS_' + sender.code.toUpperCase() + '_NOT_CONNECTED_WARNING';\n\t\t\tconst fallback = 'SALESCENTER_SEND_ORDER_BY_SMS_' + sender.code.toUpperCase() + '_NOT_CONNECTED';\n\n\t\t\treturn Loc.getMessage(messageCode) || Loc.getMessage(fallback);\n\t\t},\n\t\tgetConnectionErrorFixText(sender)\n\t\t{\n\t\t\tconst messageCode = 'SALESCENTER_SEND_ORDER_BY_SMS_' + sender.code.toUpperCase() + '_NOT_CONNECTED_FIX';\n\t\t\tconst fallback = 'SALESCENTER_PRODUCT_DISCOUNT_EDIT_PAGE_URL_TITLE';\n\n\t\t\treturn Loc.getMessage(messageCode) || Loc.getMessage(fallback);\n\t\t},\n\t\tgetFixer(fixUrl)\n\t\t{\n\t\t\treturn () => {\n\t\t\t\tif (typeof fixUrl === 'string')\n\t\t\t\t{\n\t\t\t\t\treturn Manager.openSlider(fixUrl, {\n\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\tonLoad: function(event) {\n\t\t\t\t\t\t\t\tconst slider = event.getSlider();\n\t\t\t\t\t\t\t\tconst sliderBx = slider.getFrameWindow().BX;\n\t\t\t\t\t\t\t\tsliderBx.addCustomEvent(\"BX.Crm.EntityEditor:onNothingChanged\", () => slider.close());\n\t\t\t\t\t\t\t\tsliderBx.addCustomEvent(\"BX.Crm.EntityEditor:onCancel\", () => slider.close());\n\t\t\t\t\t\t\t\tsliderBx.addCustomEvent(\"onCrmEntityUpdate\", () => slider.close());\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tif (typeof fixUrl === 'object' && fixUrl !== null)\n\t\t\t\t{\n\t\t\t\t\tif (fixUrl.type === 'ui_helper')\n\t\t\t\t\t{\n\t\t\t\t\t\treturn BX.loadExt('ui.info-helper').then(() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tBX.UI.InfoHelper.show(fixUrl.value);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn Promise.resolve();\n\t\t\t};\n\t\t},\n\t\tonItemHint(e)\n\t\t{\n\t\t\tBX.Salescenter.Manager.openSlider(this.$root.$app.options.urlSettingsCompanyContacts, {width: 1200} );\n\t\t},\n\t\tinitialize(currentSenderCode, senders, pushedToUseBitrix24Notifications)\n\t\t{\n\t\t\tthis.currentSenderCode = currentSenderCode;\n\t\t\tthis.senders = senders;\n\t\t\tthis.pushedToUseBitrix24Notifications = pushedToUseBitrix24Notifications;\n\t\t},\n\t\thandleOnSmsSenderSelected(value)\n\t\t{\n\t\t\tthis.$emit('stage-block-sms-send-on-change-provider', value);\n\t\t},\n\t\thandleErrorFix()\n\t\t{\n\t\t\tAjax.runComponentAction(\"bitrix:salescenter.app\", \"refreshSenderSettings\", {\n\t\t\t\tmode: \"class\"\n\t\t\t})\n\t\t\t\t.then((resolve)=> {\n\t\t\t\t\tif (BX.type.isObject(resolve.data) && Object.values(resolve.data).length > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.initialize(\n\t\t\t\t\t\t\tresolve.data.currentSenderCode,\n\t\t\t\t\t\t\tresolve.data.senders,\n\t\t\t\t\t\t\tresolve.data.pushedToUseBitrix24Notifications\n\t\t\t\t\t\t);\n\t\t\t\t\t\tthis.smsSenderListComponentKey += 1;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t},\n\t\thandlePhoneErrorFix()\n\t\t{\n\t\t\tAjax.runComponentAction(\"bitrix:salescenter.app\", \"refreshContactPhone\", {\n\t\t\t\tmode: \"class\",\n\t\t\t\tdata: {\n\t\t\t\t\tfields:{\n\t\t\t\t\t\townerId: this.ownerId,\n\t\t\t\t\t\townerTypeId: this.ownerTypeId,\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t})\n\t\t\t.then((resolve)=> {\n\t\t\t\tif (BX.type.isObject(resolve.data) && Object.values(resolve.data).length > 0)\n\t\t\t\t{\n\t\t\t\t\tif(this.contactPhone != resolve.data.contactPhone)\n\t\t\t\t\t{\n\t\t\t\t\t\tUI.Notification.Center.notify({\n\t\t\t\t\t\t\tcontent: Loc.getMessage('SALESCENTER_SEND_ORDER_BY_SMS_SENDER_PHONE_CHANGE', {\n\t\t\t\t\t\t\t\t'#TITLE#': resolve.data.title\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.contactPhone = resolve.data.contactPhone;\n\t\t\t\t\tthis.onConfigureContactPhone();\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\thendleSmsErrorBlock(event)\n\t\t{\n\t\t\tif(event.data.type === TYPE_PHONE)\n\t\t\t{\n\t\t\t\tthis.handlePhoneErrorFix()\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.handleErrorFix()\n\t\t\t}\n\t\t},\n\t\topenBitrix24NotificationsHelp(event)\n\t\t{\n\t\t\tBX.Salescenter.Manager.openBitrix24NotificationsHelp(event);\n\t\t},\n\t},\n\t//language=Vue\n\ttemplate: `\n\t\t<stage-block-item\t\t\t\n\t\t\t:config=\"configForBlock\"\n\t\t\t:class=\"statusClassMixin\"\n\t\t\tv-on:on-item-hint=\"onItemHint\"\n\t\t>\n\t\t\t<template v-slot:block-title-title>{{title}}</template>\n\t\t\t<template\n\t\t\t\tv-if=\"showHint\"\n\t\t\t\tv-slot:block-hint-title\n\t\t\t>\n\t\t\t\t${Loc.getMessage('SALESCENTER_LEFT_PAYMENT_COMPANY_CONTACTS_V3')}\n\t\t\t</template>\n\t\t\t<template v-slot:block-container>\n\t\t\t\t<div :class=\"containerClassMixin\" class=\"salescenter-app-payment-by-sms-item-container-offtop\">\n\t\t\t\t\t<sms-error-block\n\t\t\t\t\t\tv-for=\"error in errors\"\n\t\t\t\t\t\tv-on:on-configure=\"hendleSmsErrorBlock($event)\"\n\t\t\t\t\t\t:error=\"error\"\n\t\t\t\t\t>\n\t\t\t\t\t</sms-error-block>\n\t\t\t\t\t\n\t\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container-sms\">\n\t\t\t\t\t\t<sms-user-avatar-block :manager=\"manager\"/>\n\t\t\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container-sms-content\">\n\t\t\t\t\t\t\t<div v-if=\"currentSenderCode === 'bitrix24'\" class=\"salescenter-app-payment-by-sms-item-container-sms-content\">\n\t\t\t\t\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container-sms-content-message\">\n\t\t\t\t\t\t\t\t\t<div contenteditable=\"false\" class=\"salescenter-app-payment-by-sms-item-container-sms-content-message-text\">\n\t\t\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_TEMPLATE_BASED_MESSAGE_WILL_BE_SENT')}\n\t\t\t\t\t\t\t\t\t\t<a @click.stop.prevent=\"openBitrix24NotificationsHelp(event)\" href=\"#\">\n\t\t\t\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_MORE_DETAILS')}\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<sms-message-editor-block v-else :editor=\"editor\"/>\n\t\t\t\t\t\t\t<template v-if=\"currentSenderCode === 'bitrix24'\">\n\t\t\t\t\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container-sms-content-info\">\n\t\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_SEND_ORDER_VIA_BITRIX24')}\n\t\t\t\t\t\t\t\t\t<span @click=\"openBitrix24NotificationsHelp(event)\">\n\t\t\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_PRODUCT_SET_BLOCK_TITLE_SHORT')}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t<template v-else-if=\"currentSenderCode === 'sms_provider'\">\n\t\t\t\t\t\t\t\t<sms-sender-list-block\n\t\t\t\t\t\t\t\t\t:key=\"smsSenderListComponentKey\"\n\t\t\t\t\t\t\t\t\t:list=\"currentSender.smsSenders\"\n\t\t\t\t\t\t\t\t\t:initSelected=\"selectedSmsSender\"\n\t\t\t\t\t\t\t\t\t:settingUrl=\"currentSender.connectUrl\"\n\t\t\t\t\t\t\t\t\tv-on:on-configure=\"handleErrorFix\"\n\t\t\t\t\t\t\t\t\tv-on:on-selected=\"handleOnSmsSenderSelected\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<template v-slot:sms-sender-list-text-send-from>\n\t\t\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_SEND_ORDER_BY_SMS_SENDER')}\n\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t</sms-sender-list-block>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</stage-block-item>\n\t`\n};\nexport {\n\tSmsMessage\n}\n","import {Loc} from 'main.core';\nimport {StatusTypes as Status} from 'salescenter.component.stage-block';\nimport * as TimeLineItem from 'salescenter.timeline';\nimport {UI} from 'ui.notification';\nimport {MixinTemplatesType} from '../templates-type-mixin';\nimport * as Tile from 'salescenter.tile';\nimport Send from './stage-blocks/send';\nimport {Cashbox} from '../stage-blocks/cashbox';\nimport Product from '../stage-blocks/product';\nimport {DeliveryVuex} from '../stage-blocks/delivery-vuex';\nimport {PaySystem} from '../stage-blocks/paysystem';\nimport {SmsMessage} from '../stage-blocks/sms-message';\nimport {Automation} from '../stage-blocks/automation';\nimport {StageMixin} from '../stage-blocks/stage-mixin';\nimport {TimeLine} from '../stage-blocks/timeline';\n\nexport default {\n\tcomponents: {\n\t\t'send-block': Send,\n\t\t'cashbox-block': Cashbox,\n\t\t'product-block': Product,\n\t\t'delivery-block': DeliveryVuex,\n\t\t'paysystem-block': PaySystem,\n\t\t'automation-block': Automation,\n\t\t'sms-message-block': SmsMessage,\n\t\t'timeline-block': TimeLine,\n\t},\n\tprops: {\n\t\tsendAllowed: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true\n\t\t},\n\t},\n\tdata()\n\t{\n\t\tlet stages =  {\n\t\t\tmessage: {\n\t\t\t\tinitSenders: this.$root.$app.options.senders,\n\t\t\t\tinitCurrentSenderCode: this.$root.$app.options.currentSenderCode,\n\t\t\t\tinitPushedToUseBitrix24Notifications: this.$root.$app.options.pushedToUseBitrix24Notifications,\n\t\t\t\tstatus: Status.complete,\n\t\t\t\tselectedSmsSender: this.$root.$app.sendingMethodDesc.provider,\n\t\t\t\tmanager: this.$root.$app.options.entityResponsible,\n\t\t\t\tphone: this.$root.$app.options.contactPhone,\n\t\t\t\townerId: this.$root.$app.options.ownerId,\n\t\t\t\townerTypeId: this.$root.$app.options.ownerTypeId,\n\t\t\t\tcontactEditorUrl: this.$root.$app.options.contactEditorUrl,\n\t\t\t\ttitleTemplate: this.$root.$app.sendingMethodDesc.sent\n\t\t\t\t\t? Loc.getMessage('SALESCENTER_APP_CONTACT_BLOCK_TITLE_MESSAGE_2_PAST_TIME')\n\t\t\t\t\t: Loc.getMessage('SALESCENTER_APP_CONTACT_BLOCK_TITLE_MESSAGE_2'),\n\t\t\t\tshowHint: this.$root.$app.options.templateMode !== 'view',\n\t\t\t\teditorTemplate: this.$root.$app.sendingMethodDesc.text,\n\t\t\t\teditorUrl: this.$root.$app.orderPublicUrl\n\t\t\t},\n\t\t\tproduct: {\n\t\t\t\tstatus: this.$root.$app.options.basket && this.$root.$app.options.basket.length > 0\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.current,\n\t\t\t\ttitle: this.$root.$app.options.templateMode === 'view'\n\t\t\t\t\t? Loc.getMessage('SALESCENTER_PRODUCT_BLOCK_TITLE_PAYMENT_VIEW')\n\t\t\t\t\t: Loc.getMessage('SALESCENTER_PRODUCT_BLOCK_TITLE_SHORT'),\n\t\t\t\thintTitle: this.$root.$app.options.templateMode === 'view'\n\t\t\t\t\t? ''\n\t\t\t\t\t: Loc.getMessage('SALESCENTER_PRODUCT_SET_BLOCK_TITLE_SHORT'),\n\t\t\t},\n\t\t\tpaysystem: {\n\t\t\t\tstatus: this.$root.$app.options.paySystemList.isSet\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled,\n\t\t\t\ttiles: this.getTileCollection(this.$root.$app.options.paySystemList.items),\n\t\t\t\tinstalled: this.$root.$app.options.paySystemList.isSet,\n\t\t\t\ttitleItems: this.getTitleItems(this.$root.$app.options.paySystemList.items),\n\t\t\t\tinitialCollapseState: this.$root.$app.options.isPaySystemCollapsed ? this.$root.$app.options.isPaySystemCollapsed === 'Y' : this.$root.$app.options.paySystemList.isSet,\n\t\t\t},\n\t\t\tcashbox: {},\n\t\t\tdelivery: {\n\t\t\t\tstatus: this.$root.$app.options.deliveryList.isInstalled\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled,\n\t\t\t\ttiles: this.getTileCollection(this.$root.$app.options.deliveryList.items),\n\t\t\t\tinstalled: this.$root.$app.options.deliveryList.isInstalled,\n\t\t\t\tinitialCollapseState: this.$root.$app.options.isDeliveryCollapsed ? this.$root.$app.options.isDeliveryCollapsed === 'Y' : this.$root.$app.options.deliveryList.isInstalled,\n\t\t\t},\n\t\t\tautomation: {},\n\t\t};\n\n\t\tif (this.$root.$app.options.cashboxList.hasOwnProperty('items'))\n\t\t{\n\t\t\tstages.cashbox = {\n\t\t\t\tstatus: this.$root.$app.options.cashboxList.isSet\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled,\n\t\t\t\ttiles: this.getTileCollection(this.$root.$app.options.cashboxList.items),\n\t\t\t\tinstalled: this.$root.$app.options.cashboxList.isSet,\n\t\t\t\ttitleItems: this.getTitleItems(this.$root.$app.options.cashboxList.items),\n\t\t\t\tinitialCollapseState: this.$root.$app.options.isCashboxCollapsed ? this.$root.$app.options.isCashboxCollapsed === 'Y' : this.$root.$app.options.cashboxList.isSet,\n\t\t\t};\n\t\t}\n\n\t\tif (this.$root.$app.options.isAutomationAvailable)\n\t\t{\n\t\t\tstages.automation = {\n\t\t\t\tstatus: Status.complete,\n\t\t\t\tstageOnOrderPaid: this.$root.$app.options.stageOnOrderPaid,\n\t\t\t\tstageOnDeliveryFinished: this.$root.$app.options.stageOnDeliveryFinished,\n\t\t\t\titems: this.$root.$app.options.entityStageList,\n\t\t\t\tinitialCollapseState: this.$root.$app.options.isAutomationCollapsed ? this.$root.$app.options.isAutomationCollapsed === 'Y' : false,\n\t\t\t};\n\t\t}\n\n\t\tif (this.$root.$app.options.hasOwnProperty('timeline'))\n\t\t{\n\t\t\tstages.timeline = {\n\t\t\t\titems: this.getTimelineCollection(this.$root.$app.options.timeline)\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (this.$root.$app.options.paySystemList.groups)\n\t\t{\n\t\t\tstages.paysystem.groups = this.getTileGroupsCollection(\n\t\t\t\tthis.$root.$app.options.paySystemList.groups,\n\t\t\t\tstages.paysystem.tiles\n\t\t\t);\n\t\t}\n\n\t\treturn {\n\t\t\tstages: stages,\n\t\t}\n\t},\n\tmixins: [\n\t\tStageMixin,\n\t\tMixinTemplatesType\n\t],\n\tcomputed: {\n\t\thasStageTimeLine()\n\t\t{\n\t\t\treturn this.stages.timeline.hasOwnProperty('items') && this.stages.timeline.items.length > 0;\n\t\t},\n\t\thasStageAutomation()\n\t\t{\n\t\t\treturn this.stages.automation.hasOwnProperty('items');\n\t\t},\n\t\thasStageCashBox()\n\t\t{\n\t\t\treturn this.stages.cashbox.hasOwnProperty('tiles');\n\t\t},\n\t\tsubmitButtonLabel()\n\t\t{\n\t\t\treturn this.editable ? Loc.getMessage('SALESCENTER_SEND') : Loc.getMessage('SALESCENTER_RESEND');\n\t\t},\n\t\tisHideDeliveryStage()\n\t\t{\n\t\t\treturn this.isViewWithoutDelivery();\n\t\t},\n\t},\n\tmethods: {\n\t\tinitCounter()\n\t\t{\n\t\t\tthis.counter = 1;\n\t\t},\n\t\tgetTimelineCollection(items)\n\t\t{\n\t\t\tlet list = [];\n\n\t\t\tObject.values(items).forEach(\n\t\t\t\toptions => list.push(TimeLineItem.Factory.create(options)));\n\n\t\t\treturn list;\n\t\t},\n\t\tgetTileCollection(items)\n\t\t{\n\t\t\tlet tiles = [];\n\t\t\tObject.values(items).forEach(\n\t\t\t\toptions => tiles.push(Tile.Factory.create(options)));\n\n\t\t\treturn tiles;\n\t\t},\n\t\tgetTileGroupsCollection(groups, tiles)\n\t\t{\n\t\t\tconst ret = [];\n\t\t\t\n\t\t\tif (groups instanceof Array)\n\t\t\t{\n\t\t\t\tObject.values(groups).forEach((item) => {\n\t\t\t\t\tconst group = new Tile.Group(item);\n\t\t\t\t\tgroup.fillTiles(tiles);\n\t\t\t\t\tret.push(group);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn ret;\n\t\t},\n\t\tgetTitleItems(items)\n\t\t{\n\t\t\tlet result = [];\n\t\t\titems.forEach((item) => {\n\t\t\t\tif (![Tile.More.type(), Tile.Offer.type()].includes(item.type))\n\t\t\t\t{\n\t\t\t\t\tresult.push(item);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn result;\n\t\t},\n\t\tstageRefresh(e, type)\n\t\t{\n\t\t\tBX.ajax.runComponentAction(\n\t\t\t\t\"bitrix:salescenter.app\",\n\t\t\t\t\"getAjaxData\",\n\t\t\t\t{\n\t\t\t\t\tmode: \"class\",\n\t\t\t\t\tdata: {\n\t\t\t\t\t\ttype: type,\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t).then(function(response) {\n\t\t\t\tif (response.data)\n\t\t\t\t{\n\t\t\t\t\tthis.refreshTilesByType(response.data, type);\n\t\t\t\t}\n\t\t\t}.bind(this),\n\t\t\tfunction() {\n\t\t\t\tUI.Notification.Center.notify({\n\t\t\t\t\tcontent: Loc.getMessage('SALESCENTER_DATA_UPDATE_ERROR'),\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\trefreshTilesByType(data, type)\n\t\t{\n\t\t\tif(type === 'PAY_SYSTEM')\n\t\t\t{\n\t\t\t\tthis.stages.paysystem.status = data.isSet\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled;\n\t\t\t\tthis.stages.paysystem.tiles = this.getTileCollection(data.items);\n\t\t\t\tthis.stages.paysystem.groups = this.getTileGroupsCollection(data.groups, this.stages.paysystem.tiles);\n\t\t\t\tthis.stages.paysystem.installed = data.isSet;\n\t\t\t}\n\t\t\telse if(type === 'CASHBOX')\n\t\t\t{\n\t\t\t\tthis.stages.cashbox.status = data.isSet\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled;\n\t\t\t\tthis.stages.cashbox.tiles = this.getTileCollection(data.items);\n\t\t\t\tthis.stages.cashbox.installed = data.isSet;\n\t\t\t\tthis.stages.cashbox.titleItems = this.getTitleItems(data.items);\n\t\t\t}\n\t\t\telse if(type === 'DELIVERY')\n\t\t\t{\n\t\t\t\tthis.stages.delivery.status = data.isSet\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled;\n\t\t\t\tthis.stages.delivery.tiles = this.getTileCollection(data.items);\n\t\t\t\tthis.stages.delivery.installed = data.isInstalled;\n\t\t\t}\n\t\t},\n\t\tonSend(event)\n\t\t{\n\t\t\tthis.$emit('stage-block-send-on-send', event)\n\t\t},\n\t\tchangeProvider(value)\n\t\t{\n\t\t\tthis.$root.$app.sendingMethodDesc.provider = value;\n\t\t\tBX.userOptions.save('salescenter', 'payment_sms_provider_options', 'latest_selected_provider', value);\n\t\t},\n\t\tchangeContactPhone(event)\n\t\t{\n\t\t\tthis.$emit('stage-block-on-reload', event)\n\t\t},\n\t\tsaveCollapsedOption(type, value)\n\t\t{\n\t\t\tBX.userOptions.save('salescenter', 'add_payment_collapse_options', type, value);\n\t\t},\n\t\tisViewWithoutDelivery()\n\t\t{\n\t\t\treturn (\n\t\t\t\tthis.$root.$app.options.templateMode === 'view'\n\t\t\t\t&& parseInt(this.$root.$app.options.shipmentId) <= 0\n\t\t\t);\n\t\t}\n\t},\n\tcreated()\n\t{\n\t\tthis.initCounter();\n\t},\n\tbeforeUpdate()\n\t{\n\t\tthis.initCounter();\n\t},\n\t//language=Vue\n\ttemplate: `\n\t\t<div>\n\t\t\t<sms-message-block\n\t\t\t\t@stage-block-sms-send-on-change-provider=\"changeProvider\"\n\t\t\t\t@stage-block-sms-message-on-change-contact-phone=\"changeContactPhone\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.message.status\"\n\t\t\t\t:initSenders=\"stages.message.initSenders\"\n\t\t\t\t:initCurrentSenderCode=\"stages.message.initCurrentSenderCode\"\n\t\t\t\t:initPushedToUseBitrix24Notifications=\"stages.message.initPushedToUseBitrix24Notifications\"\n\t\t\t\t:selectedSmsSender=\"stages.message.selectedSmsSender\"\n\t\t\t\t:manager=\"stages.message.manager\"\n\t\t\t\t:phone=\"stages.message.phone\"\n\t\t\t\t:contactEditorUrl=\"stages.message.contactEditorUrl\"\n\t\t\t\t:ownerId=\"stages.message.ownerId\"\n\t\t\t\t:ownerTypeId=\"stages.message.ownerTypeId\"\n\t\t\t\t:titleTemplate=\"stages.message.titleTemplate\"\n\t\t\t\t:showHint=\"stages.message.showHint\"\n\t\t\t\t:editorTemplate=\"stages.message.editorTemplate\"\n\t\t\t\t:editorUrl=\"stages.message.editorUrl\"\n\t\t\t/>\n\t\t\t<product-block\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.product.status\"\n\t\t\t\t:title=\"stages.product.title\"\n\t\t\t\t:hintTitle=\"stages.product.hintTitle\"\n\t\t\t/>\n\t\t\t<paysystem-block\n\t\t\t\tv-if=\"editable\"\n\t\t\t\t@on-stage-tile-collection-slider-close=\"stageRefresh($event, 'PAY_SYSTEM')\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.paysystem.status\"\n\t\t\t\t:tiles=\"stages.paysystem.tiles\"\n\t\t\t\t:installed=\"stages.paysystem.installed\"\n\t\t\t\t:titleItems=\"stages.paysystem.titleItems\"\n\t\t\t\t:initialCollapseState=\"stages.paysystem.initialCollapseState\"\n\t\t\t\t@on-save-collapsed-option=\"saveCollapsedOption\"\n\t\t\t/>\n\t\t\t<cashbox-block\n\t\t\t\tv-if=\"editable && hasStageCashBox\"\n\t\t\t\t@on-stage-tile-collection-slider-close=\"stageRefresh($event, 'CASHBOX')\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.cashbox.status\"\n\t\t\t\t:tiles=\"stages.cashbox.tiles\"\n\t\t\t\t:installed=\"stages.cashbox.installed\"\n\t\t\t\t:titleItems=\"stages.cashbox.titleItems\"\n\t\t\t\t:initialCollapseState=\"stages.cashbox.initialCollapseState\"\n\t\t\t\t@on-save-collapsed-option=\"saveCollapsedOption\"\n\t\t\t/>\n\t\t\t<delivery-block\n\t\t\t\tv-if=\"!isHideDeliveryStage\"\n\t\t\t\t@on-stage-tile-collection-slider-close=\"stageRefresh($event, 'DELIVERY')\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.delivery.status\"\n\t\t\t\t:tiles=\"stages.delivery.tiles\"\n\t\t\t\t:installed=\"stages.delivery.installed\"\n\t\t\t\t:isCollapsible=\"true\"\n\t\t\t\t:initialCollapseState=\"stages.delivery.initialCollapseState\"\n\t\t\t\t@on-save-collapsed-option=\"saveCollapsedOption\"\n\t\t\t/>\n\t\t\t<automation-block\n\t\t\t\tv-if=\"editable && hasStageAutomation\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.automation.status\"\n\t\t\t\t:stageOnOrderPaid=\"stages.automation.stageOnOrderPaid\"\n\t\t\t\t:stageOnDeliveryFinished=\"stages.automation.stageOnDeliveryFinished\"\n\t\t\t\t:items=\"stages.automation.items\"\n\t\t\t\t:initialCollapseState=\"stages.automation.initialCollapseState\"\n\t\t\t\t@on-save-collapsed-option=\"saveCollapsedOption\"\n\t\t\t/>\n\t\t\t<send-block\n\t\t\t\t@on-submit=\"onSend\"\n\t\t\t\t:buttonEnabled=\"sendAllowed\"\n\t\t\t\t:showWhatClientSeesControl=\"!editable\"\n\t\t\t\t:buttonLabel=\"submitButtonLabel\"\n\t\t\t/>\n\t\t\t<timeline-block\n\t\t\t\tv-if=\"hasStageTimeLine\"\n\t\t\t\t:timelineItems=\"stages.timeline.items\"\n\t\t\t/>\n\t\t</div>\n\t`\n};\n","import {Loc} from 'main.core';\nimport {StatusTypes as Status} from 'salescenter.component.stage-block';\nimport * as TimeLineItem from 'salescenter.timeline';\nimport {UI} from 'ui.notification';\nimport {MixinTemplatesType} from '../templates-type-mixin';\nimport * as Tile from 'salescenter.tile';\nimport Send from '../deal-receiving-payment/stage-blocks/send';\nimport {Cashbox} from '../stage-blocks/cashbox';\nimport Product from '../stage-blocks/product';\nimport {PaySystem} from '../stage-blocks/paysystem';\nimport {SmsMessage} from '../stage-blocks/sms-message';\nimport {Automation} from '../stage-blocks/automation';\nimport {StageMixin} from '../stage-blocks/stage-mixin';\nimport {TimeLine} from '../stage-blocks/timeline';\nimport {DocumentSelector} from '../stage-blocks/document-selector';\n\nexport default {\n\tcomponents: {\n\t\t'send-block': Send,\n\t\t'cashbox-block': Cashbox,\n\t\t'product-block': Product,\n\t\t'paysystem-block': PaySystem,\n\t\t'automation-block': Automation,\n\t\t'sms-message-block': SmsMessage,\n\t\t'timeline-block': TimeLine,\n\t\t'document-selector-block': DocumentSelector,\n\t},\n\tprops: {\n\t\tsendAllowed: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true\n\t\t},\n\t},\n\tdata()\n\t{\n\t\tlet stages =  {\n\t\t\tmessage: {\n\t\t\t\tinitSenders: this.$root.$app.options.senders,\n\t\t\t\tinitCurrentSenderCode: this.$root.$app.options.currentSenderCode,\n\t\t\t\tinitPushedToUseBitrix24Notifications: this.$root.$app.options.pushedToUseBitrix24Notifications,\n\t\t\t\tstatus: Status.complete,\n\t\t\t\tselectedSmsSender: this.$root.$app.sendingMethodDesc.provider,\n\t\t\t\tmanager: this.$root.$app.options.entityResponsible,\n\t\t\t\tphone: this.$root.$app.options.contactPhone,\n\t\t\t\ttitleTemplate: this.$root.$app.sendingMethodDesc.sent\n\t\t\t\t\t? Loc.getMessage('SALESCENTER_APP_CONTACT_BLOCK_TITLE_MESSAGE_2_PAST_TIME')\n\t\t\t\t\t: Loc.getMessage('SALESCENTER_APP_CONTACT_BLOCK_TITLE_MESSAGE_2'),\n\t\t\t\tshowHint: this.$root.$app.options.templateMode !== 'view',\n\t\t\t\teditorTemplate: this.$root.$app.sendingMethodDesc.text,\n\t\t\t\teditorUrl: this.$root.$app.orderPublicUrl\n\t\t\t},\n\t\t\tproduct: {\n\t\t\t\tstatus: this.$root.$app.options.basket && this.$root.$app.options.basket.length > 0\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.current,\n\t\t\t\ttitle: this.$root.$app.options.templateMode === 'view'\n\t\t\t\t\t? Loc.getMessage('SALESCENTER_PRODUCT_BLOCK_TITLE_PAYMENT_VIEW')\n\t\t\t\t\t: Loc.getMessage('SALESCENTER_PRODUCT_BLOCK_TITLE_SHORT'),\n\t\t\t\thintTitle: this.$root.$app.options.templateMode === 'view'\n\t\t\t\t\t? ''\n\t\t\t\t\t: Loc.getMessage('SALESCENTER_PRODUCT_SET_BLOCK_TITLE_SHORT'),\n\t\t\t},\n\t\t\tpaysystem: {\n\t\t\t\tstatus: this.$root.$app.options.paySystemList.isSet\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled,\n\t\t\t\ttiles: this.getTileCollection(this.$root.$app.options.paySystemList.items),\n\t\t\t\tinstalled: this.$root.$app.options.paySystemList.isSet,\n\t\t\t\ttitleItems: this.getTitleItems(this.$root.$app.options.paySystemList.items),\n\t\t\t\tinitialCollapseState: this.$root.$app.options.isPaySystemCollapsed ? this.$root.$app.options.isPaySystemCollapsed === 'Y' : this.$root.$app.options.paySystemList.isSet,\n\t\t\t},\n\t\t\tcashbox: {},\n\t\t\tautomation: {},\n\t\t\tdocumentSelector: {\n\t\t\t\tstatus: Status.complete,\n\t\t\t},\n\t\t};\n\n\t\tif (this.$root.$app.options.cashboxList.hasOwnProperty('items'))\n\t\t{\n\t\t\tstages.cashbox = {\n\t\t\t\tstatus: this.$root.$app.options.cashboxList.isSet\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled,\n\t\t\t\ttiles: this.getTileCollection(this.$root.$app.options.cashboxList.items),\n\t\t\t\tinstalled: this.$root.$app.options.cashboxList.isSet,\n\t\t\t\ttitleItems: this.getTitleItems(this.$root.$app.options.cashboxList.items),\n\t\t\t\tinitialCollapseState: this.$root.$app.options.isCashboxCollapsed ? this.$root.$app.options.isCashboxCollapsed === 'Y' : this.$root.$app.options.cashboxList.isSet,\n\t\t\t};\n\t\t}\n\n\t\tif (this.$root.$app.options.isAutomationAvailable)\n\t\t{\n\t\t\tstages.automation = {\n\t\t\t\tstatus: Status.complete,\n\t\t\t\tstageOnOrderPaid: this.$root.$app.options.stageOnOrderPaid,\n\t\t\t\titems: this.$root.$app.options.entityStageList,\n\t\t\t\tinitialCollapseState: this.$root.$app.options.isAutomationCollapsed ? this.$root.$app.options.isAutomationCollapsed === 'Y' : false,\n\t\t\t};\n\t\t}\n\n\t\tif (this.$root.$app.options.hasOwnProperty('timeline'))\n\t\t{\n\t\t\tstages.timeline = {\n\t\t\t\titems: this.getTimelineCollection(this.$root.$app.options.timeline)\n\t\t\t}\n\t\t}\n\n\t\tif (this.$root.$app.hasOwnProperty('documentSelector'))\n\t\t{\n\t\t\tif (this.$root.$app.documentSelector.templateAddUrl)\n\t\t\t{\n\t\t\t\tstages.documentSelector.templateAddUrl = this.$root.$app.documentSelector.templateAddUrl;\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\tstages: stages,\n\t\t}\n\t},\n\tmixins: [\n\t\tStageMixin,\n\t\tMixinTemplatesType\n\t],\n\tcomputed: {\n\t\thasStageTimeLine()\n\t\t{\n\t\t\treturn this.stages.timeline.hasOwnProperty('items') && this.stages.timeline.items.length > 0;\n\t\t},\n\t\thasStageAutomation()\n\t\t{\n\t\t\treturn this.stages.automation.hasOwnProperty('items');\n\t\t},\n\t\thasStageCashBox()\n\t\t{\n\t\t\treturn this.stages.cashbox.hasOwnProperty('tiles');\n\t\t},\n\t\tsubmitButtonLabel()\n\t\t{\n\t\t\treturn this.editable ? Loc.getMessage('SALESCENTER_SEND') : Loc.getMessage('SALESCENTER_RESEND');\n\t\t},\n\t\tisShowDocumentSelector()\n\t\t{\n\t\t\treturn this.$root.$app.hasOwnProperty('documentSelector');\n\t\t},\n\t},\n\tmethods: {\n\t\tinitCounter()\n\t\t{\n\t\t\tthis.counter = 1;\n\t\t},\n\t\tgetTimelineCollection(items)\n\t\t{\n\t\t\tlet list = [];\n\n\t\t\tObject.values(items).forEach(\n\t\t\t\toptions => list.push(TimeLineItem.Factory.create(options)));\n\n\t\t\treturn list;\n\t\t},\n\t\tgetTileCollection(items)\n\t\t{\n\t\t\tlet tiles = [];\n\t\t\tObject.values(items).forEach(\n\t\t\t\toptions => tiles.push(Tile.Factory.create(options)));\n\n\t\t\treturn tiles;\n\t\t},\n\t\tgetTitleItems(items)\n\t\t{\n\t\t\tlet result = [];\n\t\t\titems.forEach((item) => {\n\t\t\t\tif (![Tile.More.type(), Tile.Offer.type()].includes(item.type))\n\t\t\t\t{\n\t\t\t\t\tresult.push(item);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn result;\n\t\t},\n\t\tstageRefresh(e, type)\n\t\t{\n\t\t\tBX.ajax.runComponentAction(\n\t\t\t\t\"bitrix:salescenter.app\",\n\t\t\t\t\"getAjaxData\",\n\t\t\t\t{\n\t\t\t\t\tmode: \"class\",\n\t\t\t\t\tdata: {\n\t\t\t\t\t\ttype: type,\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t).then(function(response) {\n\t\t\t\t\tif (response.data)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.refreshTilesByType(response.data, type);\n\t\t\t\t\t}\n\t\t\t\t}.bind(this),\n\t\t\t\tfunction() {\n\t\t\t\t\tUI.Notification.Center.notify({\n\t\t\t\t\t\tcontent: Loc.getMessage('SALESCENTER_DATA_UPDATE_ERROR'),\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t},\n\t\trefreshTilesByType(data, type)\n\t\t{\n\t\t\tif(type === 'PAY_SYSTEM')\n\t\t\t{\n\t\t\t\tthis.stages.paysystem.status = data.isSet\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled;\n\t\t\t\tthis.stages.paysystem.tiles = this.getTileCollection(data.items);\n\t\t\t\tthis.stages.paysystem.installed = data.isSet;\n\t\t\t}\n\t\t\telse if(type === 'CASHBOX')\n\t\t\t{\n\t\t\t\tthis.stages.cashbox.status = data.isSet\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled;\n\t\t\t\tthis.stages.cashbox.tiles = this.getTileCollection(data.items);\n\t\t\t\tthis.stages.cashbox.installed = data.isSet;\n\t\t\t\tthis.stages.cashbox.titleItems = this.getTitleItems(data.items);\n\t\t\t}\n\t\t},\n\t\tonSend(event)\n\t\t{\n\t\t\tthis.$emit('stage-block-send-on-send', event)\n\t\t},\n\t\tchangeProvider(value)\n\t\t{\n\t\t\tthis.$root.$app.sendingMethodDesc.provider = value;\n\t\t\tBX.userOptions.save('salescenter', 'payment_sms_provider_options', 'latest_selected_provider', value);\n\t\t},\n\t\tsaveCollapsedOption(type, value)\n\t\t{\n\t\t\tBX.userOptions.save('salescenter', 'add_payment_collapse_options', type, value);\n\t\t},\n\t},\n\tcreated()\n\t{\n\t\tthis.initCounter();\n\t},\n\tbeforeUpdate()\n\t{\n\t\tthis.initCounter();\n\t},\n\ttemplate: `\n\t\t<div>\n\t\t\t<sms-message-block\n\t\t\t\t@stage-block-sms-send-on-change-provider=\"changeProvider\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.message.status\"\n\t\t\t\t:initSenders=\"stages.message.initSenders\"\n\t\t\t\t:initCurrentSenderCode=\"stages.message.initCurrentSenderCode\"\n\t\t\t\t:initPushedToUseBitrix24Notifications=\"stages.message.initPushedToUseBitrix24Notifications\"\n\t\t\t\t:selectedSmsSender=\"stages.message.selectedSmsSender\"\n\t\t\t\t:manager=\"stages.message.manager\"\n\t\t\t\t:phone=\"stages.message.phone\"\n\t\t\t\t:titleTemplate=\"stages.message.titleTemplate\"\n\t\t\t\t:showHint=\"stages.message.showHint\"\n\t\t\t\t:editorTemplate=\"stages.message.editorTemplate\"\n\t\t\t\t:editorUrl=\"stages.message.editorUrl\"\n\t\t\t/>\n\t\t\t<product-block\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.product.status\"\n\t\t\t\t:title=\"stages.product.title\"\n\t\t\t\t:hintTitle=\"stages.product.hintTitle\"\n\t\t\t/>\n\t\t\t<paysystem-block\n\t\t\t\tv-if=\"editable\"\n\t\t\t\t@on-stage-tile-collection-slider-close=\"stageRefresh($event, 'PAY_SYSTEM')\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.paysystem.status\"\n\t\t\t\t:tiles=\"stages.paysystem.tiles\"\n\t\t\t\t:installed=\"stages.paysystem.installed\"\n\t\t\t\t:titleItems=\"stages.paysystem.titleItems\"\n\t\t\t\t:initialCollapseState=\"stages.paysystem.initialCollapseState\"\n\t\t\t\t@on-save-collapsed-option=\"saveCollapsedOption\"\n\t\t\t/>\n\t\t\t<cashbox-block\n\t\t\t\tv-if=\"editable && hasStageCashBox\"\n\t\t\t\t@on-stage-tile-collection-slider-close=\"stageRefresh($event, 'CASHBOX')\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.cashbox.status\"\n\t\t\t\t:tiles=\"stages.cashbox.tiles\"\n\t\t\t\t:installed=\"stages.cashbox.installed\"\n\t\t\t\t:titleItems=\"stages.cashbox.titleItems\"\n\t\t\t\t:initialCollapseState=\"stages.cashbox.initialCollapseState\"\n\t\t\t\t@on-save-collapsed-option=\"saveCollapsedOption\"\n\t\t\t/>\n\t\t\t<document-selector-block\n\t\t\t\tv-if=\"isShowDocumentSelector\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:templateAddUrl=\"stages.documentSelector.templateAddUrl\"\n\t\t\t/>\n\t\t\t<automation-block\n\t\t\t\tv-if=\"editable && hasStageAutomation\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.automation.status\"\n\t\t\t\t:stageOnOrderPaid=\"stages.automation.stageOnOrderPaid\"\n\t\t\t\t:items=\"stages.automation.items\"\n\t\t\t\t:initialCollapseState=\"stages.automation.initialCollapseState\"\n\t\t\t\t@on-save-collapsed-option=\"saveCollapsedOption\"\n\t\t\t/>\n\t\t\t<send-block\n\t\t\t\t@on-submit=\"onSend\"\n\t\t\t\t:buttonEnabled=\"sendAllowed\"\n\t\t\t\t:showWhatClientSeesControl=\"!editable\"\n\t\t\t\t:buttonLabel=\"submitButtonLabel\"\n\t\t\t/>\n\t\t\t<timeline-block\n\t\t\t\tv-if=\"hasStageTimeLine\"\n\t\t\t\t:timelineItems=\"stages.timeline.items\"\n\t\t\t/>\n\t\t</div>\n\t`\n};\n","import {Loc} from 'main.core';\n\nexport default {\n\tprops: {\n\t\tbuttonEnabled: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomputed: {\n\t\tbuttonClass()\n\t\t{\n\t\t\treturn {'salescenter-app-payment-by-sms-item-disabled': this.buttonEnabled === false};\n\t\t},\n\t},\n\tmethods: {\n\t\tsubmit(event)\n\t\t{\n\t\t\tthis.$emit('on-submit', event);\n\t\t},\n\t},\n\ttemplate: `\t\t\n\t\t<div\n\t\t\t:class=\"buttonClass\"\n\t\t\tclass=\"salescenter-app-payment-by-sms-item-show salescenter-app-payment-by-sms-item salescenter-app-payment-by-sms-item-send\"\n\t\t>\n\t\t\t<div class=\"salescenter-app-payment-by-sms-item-counter\">\n\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-counter-rounder\"></div>\n\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-counter-line\"></div>\n\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-counter-number\"></div>\n\t\t\t</div>\n\t\t\t<div class=\"\">\n\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container\">\n\t\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container-payment\">\n\t\t\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container-payment-inline\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t@click=\"submit($event)\"\n\t\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-lg ui-btn-success ui-btn-round\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_CREATE_SHIPMENT')}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`\n}\n","import {Loc} from 'main.core';\nimport {StatusTypes as Status} from 'salescenter.component.stage-block';\nimport {UI} from 'ui.notification';\nimport {MixinTemplatesType} from '../templates-type-mixin';\nimport * as Tile from 'salescenter.tile';\nimport Send from './stage-blocks/send';\nimport Product from '../stage-blocks/product';\nimport {DeliveryVuex} from '../stage-blocks/delivery-vuex';\nimport {Automation} from '../stage-blocks/automation';\nimport {StageMixin} from '../stage-blocks/stage-mixin';\n\nexport default {\n\tcomponents: {\n\t\t'send-block'\t\t\t: Send,\n\t\t'product-block'\t\t\t: Product,\n\t\t'delivery-block'\t\t: DeliveryVuex,\n\t\t'automation-block'\t\t: Automation,\n\t},\n\tprops:{\n\t\tsendAllowed: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true\n\t\t},\n\t},\n\tdata()\n\t{\n\t\tlet stages =  {\n\t\t\tproduct:{\n\t\t\t\tstatus:\t\t\t\tthis.$root.$app.options.basket && this.$root.$app.options.basket.length > 0\n\t\t\t\t\t?\tStatus.complete\n\t\t\t\t\t:\tStatus.current,\n\t\t\t\ttitle: this.$root.$app.options.templateMode === 'view'\n\t\t\t\t\t? Loc.getMessage('SALESCENTER_PRODUCT_BLOCK_TITLE_SHIPMENT_VIEW')\n\t\t\t\t\t: Loc.getMessage('SALESCENTER_PRODUCT_BLOCK_TITLE_SHORT_SHIPMENT'),\n\t\t\t},\n\t\t\tdelivery:{\n\t\t\t\tstatus: \t\t\tthis.$root.$app.options.deliveryList.isInstalled\n\t\t\t\t\t?\tStatus.complete\n\t\t\t\t\t:\tStatus.disabled,\n\t\t\t\ttiles:\t\t\tthis.getTileCollection(\n\t\t\t\t\tthis.$root.$app.options.deliveryList.items),\n\t\t\t\tinstalled:\t\t\tthis.$root.$app.options.deliveryList.isInstalled,\n\t\t\t\tinitialCollapseState: this.$root.$app.options.isDeliveryCollapsed ? this.$root.$app.options.isDeliveryCollapsed === 'Y' : this.$root.$app.options.deliveryList.isInstalled,\n\t\t\t},\n\t\t\tautomation:{}\n\t\t};\n\n\t\tif (this.$root.$app.options.isAutomationAvailable)\n\t\t{\n\t\t\tstages.automation = {\n\t\t\t\tstatus:\t\t\t\t\t\tStatus.complete,\n\t\t\t\tstageOnDeliveryFinished:\tthis.$root.$app.options.stageOnDeliveryFinished,\n\t\t\t\titems:\t\t\t\t\t\tthis.$root.$app.options.entityStageList,\n\t\t\t\tinitialCollapseState: \t\tthis.$root.$app.options.isAutomationCollapsed ? this.$root.$app.options.isAutomationCollapsed === 'Y' : false,\n\t\t\t};\n\t\t}\n\n\t\treturn {\n\t\t\tstages: stages,\n\t\t}\n\t},\n\tmixins:[StageMixin, MixinTemplatesType],\n\tcomputed:\n\t\t{\n\t\t\thasStageAutomation()\n\t\t\t{\n\t\t\t\treturn this.stages.automation.hasOwnProperty('items');\n\t\t\t},\n\t\t\teditableMixin()\n\t\t\t{\n\t\t\t\treturn this.editable === false;\n\t\t\t},\n\t\t\tisViewTemplateMode()\n\t\t\t{\n\t\t\t\treturn this.$root.$app.options.templateMode === 'view';\n\t\t\t},\n\t\t},\n\tmethods:\n\t\t{\n\t\t\tinitCounter()\n\t\t\t{\n\t\t\t\tthis.counter = 1;\n\t\t\t},\n\n\t\t\tgetTileCollection(items)\n\t\t\t{\n\t\t\t\tlet tiles = [];\n\t\t\t\tObject.values(items).forEach(\n\t\t\t\t\toptions => tiles.push(Tile.Factory.create(options)));\n\n\t\t\t\treturn tiles;\n\t\t\t},\n\n\t\t\tgetTitleItems(items)\n\t\t\t{\n\t\t\t\tlet result = [];\n\t\t\t\titems.forEach((item) => {\n\t\t\t\t\tif (![Tile.More.type(), Tile.Offer.type()].includes(item.type))\n\t\t\t\t\t{\n\t\t\t\t\t\tresult.push(item);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\treturn result;\n\t\t\t},\n\n\t\t\tstageRefresh(e, type)\n\t\t\t{\n\t\t\t\tBX.ajax.runComponentAction(\n\t\t\t\t\t\"bitrix:salescenter.app\",\n\t\t\t\t\t\"getAjaxData\",\n\t\t\t\t\t{\n\t\t\t\t\t\tmode: \"class\",\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\ttype: type,\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t).then(function(response) {\n\t\t\t\t\tif (response.data)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.refreshTilesByType(response.data, type);\n\t\t\t\t\t}\n\t\t\t\t}.bind(this),\n\t\t\t\tfunction() {\n\t\t\t\t\tUI.Notification.Center.notify({\n\t\t\t\t\t\tcontent: Loc.getMessage('SALESCENTER_DATA_UPDATE_ERROR'),\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t},\n\n\t\t\trefreshTilesByType(data, type)\n\t\t\t{\n\t\t\t\tif(type === 'DELIVERY')\n\t\t\t\t{\n\t\t\t\t\tthis.stages.delivery.status = \t\tdata.isSet\n\t\t\t\t\t\t?\tStatus.complete\n\t\t\t\t\t\t:\tStatus.disabled;\n\t\t\t\t\tthis.stages.delivery.tiles = \t\tthis.getTileCollection(data.items);\n\t\t\t\t\tthis.stages.delivery.installed = \tdata.isInstalled;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tonSend(event)\n\t\t\t{\n\t\t\t\tthis.$emit('stage-block-send-on-send', event)\n\t\t\t},\n\n\t\t\tsaveCollapsedOption(type, value)\n\t\t\t{\n\t\t\t\tBX.userOptions.save('salescenter', 'add_shipment_collapse_options', type, value);\n\t\t\t},\n\t\t},\n\tcreated()\n\t{\n\t\tthis.initCounter();\n\t},\n\tbeforeUpdate()\n\t{\n\t\tthis.initCounter();\n\t},\n\ttemplate: `\n\t\t<div>\n\t\t\t<product-block \n\t\t\t\t:counter=\t\"counter++\"\n\t\t\t\t:status= \t\"stages.product.status\"\n\t\t\t\t:title=\t\t\"stages.product.title\"\t\t\n\t\t\t\t:hintTitle=\t\t\"''\"\n\t\t\t/>\n\t\t\t\n\t\t\t<delivery-block\t\t\t\t\t\t\tv-on:on-stage-tile-collection-slider-close=\"stageRefresh($event, 'DELIVERY')\"\n\t\t\t\t:counter=\t\"counter++\"\n\t\t\t\t:status=  \t\"stages.delivery.status\"\n\t\t\t\t:tiles=  \t\"stages.delivery.tiles\"\n\t\t\t\t:installed=\t\"stages.delivery.installed\"\n\t\t\t\t:isCollapsible=\"false\"\n\t\t\t\t:initialCollapseState = \"stages.delivery.initialCollapseState\"\n\t\t\t\t@on-save-collapsed-option=\"saveCollapsedOption\"\n\t\t\t/>\n\t\t\t\t\t\t\t\t\t\n\t\t\t<automation-block v-if=\"editable && hasStageAutomation\"\n\t\t\t\t:counter=\t\"counter++\"\n\t\t\t\t:status=\t\"stages.automation.status\"\n\t\t\t\t:stageOnDeliveryFinished=\t\"stages.automation.stageOnDeliveryFinished\"\n\t\t\t\t:items=\t\t\"stages.automation.items\"\n\t\t\t\t:initialCollapseState = \"stages.automation.initialCollapseState\"\n\t\t\t\t@on-save-collapsed-option=\"saveCollapsedOption\"\n\t\t\t/>\n\t\t\t\n\t\t\t<send-block\n\t\t\t\tv-if=\"!isViewTemplateMode\"\n\t\t\t\t@on-submit=\"onSend\"\n\t\t\t\t:buttonEnabled=\"sendAllowed\"\n\t\t\t/>\n\t\t</div>\n\t`\n};\n","import { Vuex } from 'ui.vue.vuex';\nimport StageBlocksList from './components/deal-receiving-payment/stage-blocks-list';\nimport EntityCreatePaymentStages from './components/crm-entity-create-payment/stage-blocks-list';\nimport StageBlocksListShipment from './components/deal-creating-shipment/stage-blocks-list';\nimport ComponentMixin from './component-mixin';\nimport { Loc } from 'main.core';\nimport { MixinTemplatesType } from './components/templates-type-mixin';\nimport Start from './start';\n\nimport { SenderConfig } from \"salescenter.lib\";\n\nexport default {\n\tmixins: [MixinTemplatesType, ComponentMixin],\n\tdata()\n\t{\n\t\treturn {\n\t\t\tactiveMenuItem: this.$root.$app.options.mode,\n\t\t\tisLoading: false,\n\t\t};\n\t},\n\tcomponents: {\n\t\t'deal-receiving-payment': StageBlocksList,\n\t\t'crm-entity-create-payment': EntityCreatePaymentStages,\n\t\t'deal-creating-shipment': StageBlocksListShipment,\n\t\t'start': Start,\n\t},\n\tmethods: {\n\t\treload(form)\n\t\t{\n\t\t\tif (this.isLoading || !this.editable)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.isLoading = true;\n\t\t\tthis.activeMenuItem = form;\n\t\t\tthis.$emit(\n\t\t\t\t'on-reload',\n\t\t\t\t{\n\t\t\t\t\tcontext: this.$root.$app.options.context,\n\t\t\t\t\torderId: this.$root.$app.orderId,\n\t\t\t\t\townerTypeId: this.$root.$app.options.ownerTypeId,\n\t\t\t\t\townerId: this.$root.$app.options.ownerId,\n\t\t\t\t\ttemplateMode: 'create',\n\t\t\t\t\tmode: this.activeMenuItem,\n\t\t\t\t\tinitialMode: this.$root.$app.options.initialMode,\n\t\t\t\t}\n\t\t\t);\n\t\t},\n\t\tonSuccessfullyConnected()\n\t\t{\n\t\t\tthis.reload(this.activeMenuItem);\n\t\t},\n\t\tonReload()\n\t\t{\n\t\t\tthis.reload(this.activeMenuItem);\n\t\t},\n\t\tsendPaymentDeliveryForm(event)\n\t\t{\n\t\t\tif (!this.isAllowedPaymentDeliverySubmitButton)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.editable)\n\t\t\t{\n\t\t\t\tthis.$root.$app.sendPayment(event.target);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.$root.$app.resendPayment(event.target);\n\t\t\t}\n\t\t},\n\t\tsendDeliveryForm(event)\n\t\t{\n\t\t\tif (!this.isAllowedDeliverySubmitButton)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.$root.$app.sendShipment(event.target);\n\t\t},\n\t\t// region menu item handlers\n\t\tspecifyCompanyContacts()\n\t\t{\n\t\t\tBX.Salescenter.Manager.openSlider(this.$root.$app.options.urlSettingsCompanyContacts, {width: 1200} );\n\t\t},\n\t\tsuggestScenario(event)\n\t\t{\n\t\t\tBX.Salescenter.Manager.openFeedbackPayOrderForm(event);\n\t\t},\n\t\thowItWorks(event)\n\t\t{\n\t\t\tif (this.mode === 'payment')\n\t\t\t{\n\t\t\t\tBX.Salescenter.Manager.openHowPaySmartInvoiceWorks(event);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tBX.Salescenter.Manager.openHowPayDealWorks(event);\n\t\t},\n\t\topenIntegrationWindow(event)\n\t\t{\n\t\t\tBX.Salescenter.Manager.openIntegrationRequestForm(event);\n\t\t},\n\t\tfreeMessages()\n\t\t{\n\t\t\tlet senders = this.$root.$app.options.senders\n\n\t\t\tlet sender = senders.filter(item => item.code === SenderConfig.BITRIX24)\n\n\t\t\tif(sender.length > 0)\n\t\t\t{\n\t\t\t\tlet fixed = SenderConfig.openSliderFreeMessages(sender[0].connectUrl);\n\t\t\t\tfixed().then()\n\t\t\t}\n\t\t},\n\t\t// endregion\n\t},\n\tcomputed: {\n\t\tmode()\n\t\t{\n\t\t\treturn this.$root.$app.options.mode;\n\t\t},\n\t\ttemplateMode()\n\t\t{\n\t\t\treturn this.$root.$app.options.templateMode;\n\t\t},\n\t\tinitialMode()\n\t\t{\n\t\t\treturn this.$root.$app.options.initialMode;\n\t\t},\n\t\tisAllowedFreeMessagesButton()\n\t\t{\n\t\t\tlet senders = this.$root.$app.options.senders\n\n\t\t\tlet sender = senders.filter(item => item.code === SenderConfig.BITRIX24)\n\n\t\t\tif(sender.length > 0)\n\t\t\t{\n\t\t\t\treturn SenderConfig.needConfigure(sender[0])\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\tisOnlyDeliveryItemVisible()\n\t\t{\n\t\t\treturn (\n\t\t\t\tthis.$root.$app.options.hasOwnProperty('deliveryList')\n\t\t\t\t&& this.$root.$app.options.deliveryList.hasOwnProperty('hasInstallable')\n\t\t\t\t&& this.$root.$app.options.deliveryList.hasInstallable\n\t\t\t);\n\t\t},\n\t\tisAllowedPaymentDeliverySubmitButton()\n\t\t{\n\t\t\tif (!this.$root.$app.hasClientContactInfo())\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tlet isCurrentSenderConnected = false;\n\t\t\tfor (let sender of this.$root.$app.options.senders)\n\t\t\t{\n\t\t\t\tif (sender.code !== this.$root.$app.options.currentSenderCode)\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif (sender.isConnected)\n\t\t\t\t{\n\t\t\t\t\tisCurrentSenderConnected = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!isCurrentSenderConnected)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn this.$store.getters['orderCreation/isAllowedSubmit'];\n\t\t},\n\t\tisAllowedDeliverySubmitButton()\n\t\t{\n\t\t\tconst deliveryId = this.$store.getters['orderCreation/getDeliveryId'];\n\t\t\tif (!deliveryId)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif (!this.$store.getters['orderCreation/isAllowedSubmit'])\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn (deliveryId != this.$root.$app.options.emptyDeliveryServiceId);\n\t\t},\n\t\tisSuggestScenarioMenuItemVisible()\n\t\t{\n\t\t\treturn this.$root.$app.options.isBitrix24;\n\t\t},\n\t\tisRequestIntegrationMenuItemVisible()\n\t\t{\n\t\t\treturn this.$root.$app.options.isIntegrationButtonVisible;\n\t\t},\n\t\tneedShowStoreConnection()\n\t\t{\n\t\t\treturn !this.isOrderPublicUrlAvailable && this.mode !== 'delivery';\n\t\t},\n\t\tsendPaymentDeliveryFormButtonText()\n\t\t{\n\t\t\treturn this.editable ? Loc.getMessage('SALESCENTER_SEND') : Loc.getMessage('SALESCENTER_RESEND');\n\t\t},\n\t\ttitle()\n\t\t{\n\t\t\treturn this.$root.$app.options.title;\n\t\t},\n\t\tgetTitleForPaymentDeliveryMenuItem()\n\t\t{\n\t\t\treturn Loc.getMessage('SALESCENTER_LEFT_TAKE_PAYMENT_AND_CREATE_SHIPMENT');\n\t\t},\n\t\t// classes region\n\t\tpaymentDeliveryFormSubmitButtonClass()\n\t\t{\n\t\t\treturn {'ui-btn-disabled': !this.isAllowedPaymentDeliverySubmitButton};\n\t\t},\n\t\tdeliveryFormSubmitButtonClass()\n\t\t{\n\t\t\treturn {'ui-btn-disabled': !this.isAllowedDeliverySubmitButton};\n\t\t},\n\t\tpaymentDeliveryMenuItemClass()\n\t\t{\n\t\t\treturn {\n\t\t\t\t'salescenter-app-sidebar-menu-active': (\n\t\t\t\t\tthis.activeMenuItem === 'payment_delivery'\n\t\t\t\t\t|| this.activeMenuItem === 'payment'\n\t\t\t\t)\n\t\t\t};\n\t\t},\n\t\tdeliveryMenuItemClass()\n\t\t{\n\t\t\treturn {'salescenter-app-sidebar-menu-active': this.activeMenuItem === 'delivery'};\n\t\t},\n\t\t// endregion\n\t\t...Vuex.mapState({\n\t\t\tapplication: state => state.application,\n\t\t\torder: state => state.orderCreation,\n\t\t})\n\t},\n\t//language=Vue\n\ttemplate: `\n\t\t<div\n\t\t\t:class=\"wrapperClass\"\n\t\t\t:style=\"wrapperStyle\"\n\t\t\tclass=\"salescenter-app-wrapper\"\n\t\t>\n\t\t\t<div class=\"ui-sidepanel-sidebar salescenter-app-sidebar\">\n\t\t\t\t<ul class=\"ui-sidepanel-menu\">\n\t\t\t\t\t<template v-if=\"templateMode === 'view'\">\n\t\t\t\t\t\t<li class=\"ui-sidepanel-menu-item salescenter-app-sidebar-menu-active\">\n\t\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link\">\n\t\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">{{title}}</div>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t</template>\n\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t<li\n\t\t\t\t\t\t\tv-if=\"initialMode === 'payment_delivery'\"\n\t\t\t\t\t\t\t@click=\"reload('payment_delivery')\"\n\t\t\t\t\t\t\t:class=\"paymentDeliveryMenuItemClass\"\n\t\t\t\t\t\t\tclass=\"ui-sidepanel-menu-item\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link\">\n\t\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">\n\t\t\t\t\t\t\t\t\t{{getTitleForPaymentDeliveryMenuItem}}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li\n\t\t\t\t\t\t\tv-if=\"isOnlyDeliveryItemVisible\"\n\t\t\t\t\t\t\t@click=\"reload('delivery')\"\n\t\t\t\t\t\t\t:class=\"deliveryMenuItemClass\"\n\t\t\t\t\t\t\tclass=\"ui-sidepanel-menu-item\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link\">\n\t\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">\n\t\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_LEFT_CREATE_SHIPMENT')}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t</template>\n\n\t\t\t\t\t<li class=\"ui-sidepanel-menu-item ui-sidepanel-menu-item-sm ui-sidepanel-menu-item-separate\">\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t@click=\"specifyCompanyContacts\"\n\t\t\t\t\t\t\tclass=\"ui-sidepanel-menu-link\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_LEFT_PAYMENT_COMPANY_CONTACTS')}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li\n\t\t\t\t\t\tv-if=\"isSuggestScenarioMenuItemVisible\"\n\t\t\t\t\t\tclass=\"ui-sidepanel-menu-item ui-sidepanel-menu-item-sm\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t@click=\"suggestScenario($event)\"\n\t\t\t\t\t\t\tclass=\"ui-sidepanel-menu-link\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_LEFT_PAYMENT_OFFER_SCRIPT')}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li class=\"ui-sidepanel-menu-item ui-sidepanel-menu-item-sm\">\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t@click=\"howItWorks($event)\"\n\t\t\t\t\t\t\tclass=\"ui-sidepanel-menu-link\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_LEFT_PAYMENT_HOW_WORKS')}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li\n\t\t\t\t\t\tv-if=\"isAllowedFreeMessagesButton\"\n\t\t\t\t\t\tclass=\"ui-sidepanel-menu-item ui-sidepanel-menu-item-sm\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t@click=\"freeMessages($event)\"\n\t\t\t\t\t\t\tclass=\"ui-sidepanel-menu-link\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_LEFT_PAYMENT_FREE_MESSAGES')}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li\n\t\t\t\t\t\tv-if=\"isRequestIntegrationMenuItemVisible\"\n\t\t\t\t\t\tclass=\"ui-sidepanel-menu-item ui-sidepanel-menu-item-sm\">\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t@click=\"openIntegrationWindow($event)\"\n\t\t\t\t\t\t\tclass=\"ui-sidepanel-menu-link\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_LEFT_PAYMENT_INTEGRATION')}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t\t<div class=\"salescenter-app-right-side\">\n\t\t\t\t<start\n\t\t\t\t\tv-if=\"needShowStoreConnection\"\n\t\t\t\t\t@on-successfully-connected=\"onSuccessfullyConnected\"\n\t\t\t\t>\n\t\t\t\t</start>\n\t\t        <template v-else>\n\t\t\t        <deal-receiving-payment\n\t\t\t        \tv-if=\"mode === 'payment_delivery'\"\n\t\t\t\t\t\t@stage-block-on-reload=\"onReload\"\n\t\t\t        \t@stage-block-send-on-send=\"sendPaymentDeliveryForm($event)\"\n\t\t\t        \t:sendAllowed=\"isAllowedPaymentDeliverySubmitButton\"\n\t\t\t        />\n\t\t\t        <deal-creating-shipment\n\t\t\t        \tv-else-if=\"mode === 'delivery'\"\n\t\t\t        \t@stage-block-send-on-send=\"sendDeliveryForm($event)\"\n\t\t\t        \t:sendAllowed=\"isAllowedDeliverySubmitButton\"\n\t\t\t        />\n\t\t\t        <crm-entity-create-payment\n\t\t\t        \tv-if=\"mode === 'payment'\"\n\t\t\t        \t@stage-block-send-on-send=\"sendPaymentDeliveryForm($event)\"\n\t\t\t        \t:sendAllowed=\"isAllowedPaymentDeliverySubmitButton\"\n\t\t\t        />\n\t\t        </template>\n\t\t\t</div>\n\t\t\t<div class=\"ui-button-panel-wrapper salescenter-button-panel\" ref=\"buttonsPanel\">\n\t\t\t\t<div class=\"ui-button-panel\">\n\t\t\t\t\t<template v-if=\"mode === 'payment_delivery' || mode === 'payment'\">\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t@click=\"sendPaymentDeliveryForm($event)\"\n\t\t\t\t\t\t\t:class=\"paymentDeliveryFormSubmitButtonClass\"\n\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-md ui-btn-success\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{sendPaymentDeliveryFormButtonText}}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t@click=\"close\"\n\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-md ui-btn-link\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_CANCEL')}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</template>\n\t\t\t\t\t<template v-else-if=\"mode === 'delivery'\">\n\t\t\t\t\t\t<template v-if=\"editable\">\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t@click=\"sendDeliveryForm($event)\"\n\t\t\t\t\t\t\t\t:class=\"deliveryFormSubmitButtonClass\"\n\t\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-md ui-btn-success\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_CREATE_SHIPMENT')}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t@click=\"close\"\n\t\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-md ui-btn-link\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_CANCEL')}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</template>\n\t\t\t\t</div>\n\t\t\t\t<div v-if=\"this.order.errors.length > 0\" ref=\"errorBlock\"></div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n}\n","import {Vue} from 'ui.vue';\nimport {VuexBuilder} from 'ui.vue.vuex';\nimport {rest as Rest} from 'rest.client';\nimport {Manager} from 'salescenter.manager';\nimport {Loader} from 'main.loader';\nimport {Type, Text, Loc, ajax as Ajax, Event} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\nimport {MenuManager} from 'main.popup';\nimport 'ui.notification';\nimport 'ui.design-tokens';\nimport {ApplicationModel} from './models/application';\nimport {OrderCreationModel} from './models/ordercreation';\nimport {DocumentSelectorModel} from './models/document-selector';\nimport Chat from './chat';\nimport Deal from './deal';\nimport './css/component.css';\n\nexport class App\n{\n\tconstructor(options = {\n\t\tdialogId: null,\n\t\tsessionId: null,\n\t\tlineId: null,\n\t\torderAddPullTag: null,\n\t\tlandingPublicationPullTag: null,\n\t\tlandingUnPublicationPullTag: null,\n\t\tisFrame: true,\n\t\tisOrderPublicUrlAvailable: false,\n\t\tisCatalogAvailable: false,\n\t\tisOrderPublicUrlExists: false,\n\t\tisWithOrdersMode: true,\n\t\tdocumentSelector: DocumentSelectorParams|null,\n\t})\n\t{\n\t\tthis.slider = BX.SidePanel.Instance.getTopSlider();\n\t\tthis.dialogId = options.dialogId;\n\t\tthis.sessionId = parseInt(options.sessionId);\n\t\tthis.lineId = parseInt(options.lineId);\n\t\tthis.orderAddPullTag = options.orderAddPullTag;\n\t\tthis.landingPublicationPullTag = options.landingPublicationPullTag;\n\t\tthis.landingUnPublicationPullTag = options.landingUnPublicationPullTag;\n\t\tthis.paySystemList = options.paySystemList;\n\t\tthis.cashboxList = options.cashboxList;\n\t\tthis.options = options;\n\t\tthis.isProgress = false;\n\t\tthis.fillPagesTimeout = false;\n\t\tthis.disableSendButton = false;\n\t\tthis.context = '';\n\t\tthis.fillPagesQueue = [];\n\t\tthis.ownerTypeId = '';\n\t\tthis.ownerId = '';\n\t\tthis.orderId = parseInt(options.orderId);\n\t\tthis.stageOnOrderPaid = null;\n\t\tthis.stageOnDeliveryFinished = null;\n\t\tthis.sendingMethod = '';\n\t\tthis.sendingMethodDesc = {};\n\t\tthis.orderPublicUrl = '';\n\t\tthis.fileControl = options.fileControl;\n\t\tthis.currencyCode = options.currencyCode;\n\t\tthis.assignedById = options.assignedById;\n\n\t\tif(Type.isString(options.stageOnOrderPaid))\n\t\t{\n\t\t\tthis.stageOnOrderPaid = options.stageOnOrderPaid;\n\t\t}\n\n\t\tif(Type.isString(options.stageOnDeliveryFinished))\n\t\t{\n\t\t\tthis.stageOnDeliveryFinished = options.stageOnDeliveryFinished;\n\t\t}\n\n\t\tif(Type.isBoolean(options.isFrame))\n\t\t{\n\t\t\tthis.isFrame = options.isFrame;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.isFrame = true;\n\t\t}\n\n\t\tif(Type.isBoolean(options.isOrderPublicUrlAvailable))\n\t\t{\n\t\t\tthis.isOrderPublicUrlAvailable = options.isOrderPublicUrlAvailable;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.isOrderPublicUrlAvailable = false;\n\t\t}\n\n\t\tif(Type.isBoolean(options.isOrderPublicUrlExists))\n\t\t{\n\t\t\tthis.isOrderPublicUrlExists = options.isOrderPublicUrlExists;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.isOrderPublicUrlExists = false;\n\t\t}\n\n\t\tif(Type.isString(options.orderPublicUrl))\n\t\t{\n\t\t\tthis.orderPublicUrl = options.orderPublicUrl;\n\t\t}\n\n\t\tif(Type.isBoolean(options.isCatalogAvailable))\n\t\t{\n\t\t\tthis.isCatalogAvailable = options.isCatalogAvailable;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.isCatalogAvailable = false;\n\t\t}\n\n\t\tif(Type.isBoolean(options.isWithOrdersMode))\n\t\t{\n\t\t\tthis.isWithOrdersMode = options.isWithOrdersMode;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.isWithOrdersMode = false;\n\t\t}\n\n\t\tif(Type.isBoolean(options.disableSendButton))\n\t\t{\n\t\t\tthis.disableSendButton = options.disableSendButton;\n\t\t}\n\n\t\tif(options.ownerTypeId)\n\t\t{\n\t\t\tthis.ownerTypeId = options.ownerTypeId;\n\t\t}\n\n\t\tif(options.ownerId)\n\t\t{\n\t\t\tthis.ownerId = options.ownerId;\n\t\t}\n\n\t\tif(Type.isString(options.context) && options.context.length > 0)\n\t\t{\n\t\t\tthis.context = options.context;\n\t\t}\n\t\telse if(this.sessionId && this.dialogId)\n\t\t{\n\t\t\tthis.context = 'imopenlines_app';\n\t\t}\n\n\t\tif(Type.isBoolean(options.isPaymentsLimitReached))\n\t\t{\n\t\t\tthis.isPaymentsLimitReached = options.isPaymentsLimitReached;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.isPaymentsLimitReached = false;\n\t\t}\n\n\t\tif(!Type.isUndefined(options.sendingMethod))\n\t\t{\n\t\t\tthis.sendingMethod = options.sendingMethod;\n\t\t}\n\t\tif(!Type.isUndefined(options.sendingMethodDesc))\n\t\t{\n\t\t\tthis.sendingMethodDesc = this.options.sendingMethodDesc;\n\t\t}\n\n\t\tthis.isPaymentCreationAvailable = (\n\t\t\t(this.sessionId > 0 && this.dialogId.length > 0) || (this.ownerTypeId && this.ownerId)\n\t\t);\n\t\tthis.connector = Type.isString(options.connector) ? options.connector : '';\n\n\t\tif (Type.isPlainObject(options.documentSelector))\n\t\t{\n\t\t\tthis.documentSelector = options.documentSelector;\n\t\t\tthis.documentSelector.paymentId = this.options.paymentId;\n\t\t}\n\n\t\tEvent.ready(() =>\n\t\t{\n\t\t\tthis.pull = BX.PULL;\n\t\t\tthis.initPull();\n\t\t\tthis.isSiteExists = Manager.isSiteExists;\n\t\t});\n\n\t\tApp.initStore()\n\t\t\t.then((result) => this.initTemplate(result))\n\t\t\t.catch((error) => App.showError(error))\n\t\t;\n\t}\n\n\tstatic initStore()\n\t{\n\t\tconst builder = new VuexBuilder();\n\n\t\treturn builder.addModel(ApplicationModel.create())\n\t\t\t.addModel(OrderCreationModel.create())\n\t\t\t.addModel(DocumentSelectorModel.create())\n\t\t\t.useNamespace(true)\n\t\t\t.build();\n\t}\n\n\tinitPull()\n\t{\n\t\tif(this.pull)\n\t\t{\n\t\t\tif(Type.isString(this.orderAddPullTag))\n\t\t\t{\n\t\t\t\tthis.pull.subscribe({\n\t\t\t\t\tmoduleId: 'salescenter',\n\t\t\t\t\tcommand: this.orderAddPullTag,\n\t\t\t\t\tcallback: (params) =>\n\t\t\t\t\t{\n\t\t\t\t\t\tif(parseInt(params.sessionId) === this.sessionId && params.orderId > 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tManager.showOrdersListAfterCreate(params.orderId);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif(Type.isString(this.landingPublicationPullTag))\n\t\t\t{\n\t\t\t\tthis.pull.subscribe({\n\t\t\t\t\tmoduleId: 'salescenter',\n\t\t\t\t\tcommand: this.landingPublicationPullTag,\n\t\t\t\t\tcallback: (params) =>\n\t\t\t\t\t{\n\t\t\t\t\t\tif(parseInt(params.landingId) > 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.fillPages();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(params.hasOwnProperty('isOrderPublicUrlAvailable') && Type.isBoolean(params.isOrderPublicUrlAvailable))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.isOrderPublicUrlAvailable = params.isOrderPublicUrlAvailable;\n\t\t\t\t\t\t\tthis.isOrderPublicUrlExists = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif(Type.isString(this.landingUnPublicationPullTag))\n\t\t\t{\n\t\t\t\tthis.pull.subscribe({\n\t\t\t\t\tmoduleId: 'salescenter',\n\t\t\t\t\tcommand: this.landingUnPublicationPullTag,\n\t\t\t\t\tcallback: (params) =>\n\t\t\t\t\t{\n\t\t\t\t\t\tif(parseInt(params.landingId) > 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.fillPages();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(params.hasOwnProperty('isOrderPublicUrlAvailable') && Type.isBoolean(params.isOrderPublicUrlAvailable))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.isOrderPublicUrlAvailable = params.isOrderPublicUrlAvailable;\n\t\t\t\t\t\t\tthis.isOrderPublicUrlExists = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\tinitTemplate(result)\n\t{\n\t\treturn new Promise((resolve) =>\n\t\t{\n\t\t\tconst context = this;\n\t\t\tthis.store = result.store;\n\n\t\t\tthis.templateEngine = Vue.create({\n\t\t\t\tel: document.getElementById('salescenter-app-root'),\n\t\t\t\tcomponents: {\n\t\t\t\t\t'chat': Chat,\n\t\t\t\t\t'deal': Deal,\n\t\t\t\t},\n\t\t\t\ttemplate:\n\t\t\t\t\tthis.isPaymentMode()\n\t\t\t\t\t\t? `<deal :key=\"componentKey\" @on-reload=\"reload\"/>`\n\t\t\t\t\t\t: `<chat :key=\"componentKey\" @on-reload=\"reload\"/>`\n\t\t\t\t\t,\n\t\t\t\tstore: this.store,\n\t\t\t\tcreated()\n\t\t\t\t{\n\t\t\t\t\tthis.$app = context;\n\t\t\t\t\tthis.$nodes = {\n\t\t\t\t\t\tfooter: document.getElementById('footer'),\n\t\t\t\t\t\tleftPanel: document.getElementById('left-panel'),\n\t\t\t\t\t\ttitle: document.getElementById('pagetitle'),\n\t\t\t\t\t\tpaymentsLimit: document.getElementById('salescenter-payment-limit-container'),\n\t\t\t\t\t\torderSelector: document.getElementById('salescenter-app-order-selector'),\n\t\t\t\t\t};\n\t\t\t\t\tthis.initOrderSelector();\n\t\t\t\t\tif (context.documentSelector)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$store.commit('documentSelector/fillState', context.documentSelector);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tmounted()\n\t\t\t\t{\n\t\t\t\t\tresolve();\n\t\t\t\t},\n\t\t\t\tmethods: {\n\t\t\t\t\treload(arParams)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$root.$app.getLoader().show(document.body);\n\n\t\t\t\t\t\tBX.ajax.runComponentAction(\n\t\t\t\t\t\t\t'bitrix:salescenter.app',\n\t\t\t\t\t\t\t'getComponentResult',\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tmode: 'class',\n\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\tarParams\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t).then(function(response) {\n\t\t\t\t\t\t\tif (response.data)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.$root.$app.options = response.data;\n\t\t\t\t\t\t\t\tthis.$root.$app.orderId = this.$root.$app.options.orderId;\n\t\t\t\t\t\t\t\tthis.componentKey += 1;\n\n\t\t\t\t\t\t\t\tthis.$root.$app.getLoader().hide();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}.bind(this));\n\t\t\t\t\t},\n\t\t\t\t\tinitOrderSelector()\n\t\t\t\t\t{\n\t\t\t\t\t\ttry\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\tthis.$app.options.orderList.length < 2\n\t\t\t\t\t\t\t\t|| this.$app.options.templateMode !== 'create'\n\t\t\t\t\t\t\t\t|| !this.$app.options.orderId\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tconst orderSelectorBtn = this.$nodes.orderSelector.querySelector('.salescenter-app-order-selector-text');\n\t\t\t\t\t\t\tif (!orderSelectorBtn)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\torderSelectorBtn.innerText = Loc.getMessage('SALESCENTER_ORDER_SELECTOR_ORDER_NUM')\n\t\t\t\t\t\t\t\t.replace('#ORDER_ID#', this.$app.options.orderId);\n\n\t\t\t\t\t\t\torderSelectorBtn.setAttribute('data-hint', Loc.getMessage('SALESCENTER_ORDER_SELECTOR_TOOLTIP'));\n\n\t\t\t\t\t\t\tlet popupMenu;\n\t\t\t\t\t\t\tlet menuItems = [];\n\t\t\t\t\t\t\tthis.$app.options.orderList.map(orderId => {\n\t\t\t\t\t\t\t\tconst orderCaption = Loc.getMessage('SALESCENTER_ORDER_SELECTOR_ORDER_NUM').replace('#ORDER_ID#', orderId);\n\t\t\t\t\t\t\t\tmenuItems.push({\n\t\t\t\t\t\t\t\t\ttext: orderCaption,\n\t\t\t\t\t\t\t\t\tonclick: event => {\n\t\t\t\t\t\t\t\t\t\tpopupMenu.close();\n\t\t\t\t\t\t\t\t\t\torderSelectorBtn.innerText = orderCaption;\n\t\t\t\t\t\t\t\t\t\tthis.reload({\n\t\t\t\t\t\t\t\t\t\t\tcontext: this.$app.options.context,\n\t\t\t\t\t\t\t\t\t\t\torderId: orderId,\n\t\t\t\t\t\t\t\t\t\t\townerTypeId: this.$app.options.ownerTypeId,\n\t\t\t\t\t\t\t\t\t\t\townerId: this.$app.options.ownerId,\n\t\t\t\t\t\t\t\t\t\t\ttemplateMode: this.$app.options.templateMode,\n\t\t\t\t\t\t\t\t\t\t\tmode: this.$app.options.mode,\n\t\t\t\t\t\t\t\t\t\t\tinitialMode: this.$app.options.initialMode,\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tpopupMenu = MenuManager.create({\n\t\t\t\t\t\t\t\tid: 'deal-order-selector',\n\t\t\t\t\t\t\t\tbindElement: orderSelectorBtn,\n\t\t\t\t\t\t\t\titems: menuItems\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tthis.$nodes.orderSelector.classList.remove('is-hidden');\n\t\t\t\t\t\t\tthis.$nodes.orderSelector.addEventListener('click', e => {\n\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\tpopupMenu.show();\n\t\t\t\t\t\t\t\tBX.UI.Hint.hide();\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tBX.UI.Hint.init(this.$nodes.orderSelector);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcatch (err)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t//\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tdata() {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tcomponentKey: 0,\n\t\t\t\t\t};\n\t\t\t\t},\n\t\t\t});\n\t\t});\n\t}\n\n\tcloseApplication()\n\t{\n\t\tif(this.slider)\n\t\t{\n\t\t\tthis.slider.close();\n\t\t}\n\t}\n\n\tfillPages()\n\t{\n\t\treturn new Promise((resolve) =>\n\t\t{\n\t\t\tif(this.isProgress)\n\t\t\t{\n\t\t\t\tthis.fillPagesQueue.push(resolve);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif(this.fillPagesTimeout)\n\t\t\t\t{\n\t\t\t\t\tclearTimeout(this.fillPagesTimeout);\n\t\t\t\t}\n\t\t\t\tthis.fillPagesTimeout = setTimeout(() =>\n\t\t\t\t{\n\t\t\t\t\tthis.startProgress();\n\t\t\t\t\tRest.callMethod('salescenter.page.list', {}).then((result) => {\n\t\t\t\t\t\tthis.store.commit('application/setPages', {pages: result.answer.result.pages});\n\t\t\t\t\t\tthis.stopProgress();\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t\tthis.fillPagesQueue.forEach((item) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\titem();\n\t\t\t\t\t\t});\n\t\t\t\t\t\tthis.fillPagesQueue = [];\n\t\t\t\t\t});\n\t\t\t\t}, 100);\n\t\t\t}\n\t\t});\n\t}\n\n\tstatic showError(error)\n\t{\n\t\t// console.error(error);\n\t}\n\n\tgetLoader()\n\t{\n\t\tif(!this.loader)\n\t\t{\n\t\t\tthis.loader = new Loader({size: 200, mode: 'custom'});\n\t\t}\n\n\t\treturn this.loader;\n\t}\n\n\tshowLoader()\n\t{\n\t\tif(this.templateEngine)\n\t\t{\n\t\t\tthis.getLoader().show(this.templateEngine.$el);\n\t\t}\n\t}\n\n\thideLoader()\n\t{\n\t\tthis.getLoader().hide();\n\t}\n\n\tstartProgress(buttonEvent = null)\n\t{\n\t\tthis.isProgress = true;\n\t\tthis.templateEngine.$emit('on-start-progress');\n\t\tthis.showLoader();\n\t\tif (Type.isDomNode(buttonEvent))\n\t\t{\n\t\t\tbuttonEvent.classList.add('ui-btn-wait');\n\t\t}\n\t}\n\n\tstopProgress(buttonEvent = null)\n\t{\n\t\tthis.isProgress = false;\n\t\tthis.templateEngine.$emit('on-stop-progress');\n\t\tthis.hideLoader();\n\t\tif (Type.isDomNode(buttonEvent))\n\t\t{\n\t\t\tbuttonEvent.classList.remove('ui-btn-wait');\n\t\t}\n\t}\n\n\thidePage(page)\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tlet promise;\n\t\t\tif(page.landingId > 0)\n\t\t\t{\n\t\t\t\tpromise = Manager.hidePage(page);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tpromise = Manager.deleteUrl(page);\n\t\t\t}\n\t\t\tpromise.then(() =>\n\t\t\t{\n\t\t\t\tthis.store.commit('application/removePage', {page});\n\t\t\t\tresolve();\n\t\t\t}).catch((result) =>\n\t\t\t{\n\t\t\t\tApp.showError(result.answer.error_description);\n\t\t\t\treject(result.answer.error_description);\n\t\t\t});\n\t\t});\n\t}\n\n\tsendPage(pageId)\n\t{\n\t\tif(this.isProgress)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tif(this.disableSendButton)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tconst pages = this.store.getters['application/getPages']();\n\t\tlet page;\n\t\tfor(let index in pages)\n\t\t{\n\t\t\tif(pages.hasOwnProperty(index) && pages[index].id === pageId)\n\t\t\t{\n\t\t\t\tpage = pages[index];\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tlet source = 'other';\n\t\tif(page.landingId > 0)\n\t\t{\n\t\t\tif(parseInt(page.siteId) === parseInt(Manager.connectedSiteId))\n\t\t\t{\n\t\t\t\tsource = 'landing_store_chat';\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tsource = 'landing_other';\n\t\t\t}\n\t\t}\n\t\tif(!this.dialogId)\n\t\t{\n\t\t\tthis.slider.data.set('action', 'sendPage');\n\t\t\tthis.slider.data.set('page', page);\n\t\t\tthis.slider.data.set('pageId', pageId);\n\t\t\tif(this.context === 'sms')\n\t\t\t{\n\t\t\t\tthis.startProgress();\n\t\t\t\tBX.Salescenter.Manager.addAnalyticAction({\n\t\t\t\t\tanalyticsLabel: 'salescenterSendSms',\n\t\t\t\t\tcontext: this.context,\n\t\t\t\t\tsource: source,\n\t\t\t\t\ttype: page.isWebform ? 'form' : 'info',\n\t\t\t\t\tcode: page.code,\n\t\t\t\t}).then(() =>\n\t\t\t\t{\n\t\t\t\t\tthis.stopProgress();\n\t\t\t\t\tthis.closeApplication();\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.closeApplication();\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\tthis.startProgress();\n\n\t\tAjax.runAction('salescenter.page.send', {\n\t\t\tanalyticsLabel: 'salescenterSendChat',\n\t\t\tgetParameters: {\n\t\t\t\tdialogId: this.dialogId,\n\t\t\t\tcontext: this.context,\n\t\t\t\tsource: source,\n\t\t\t\ttype: page.isWebform ? 'form' : 'info',\n\t\t\t\tconnector: this.connector,\n\t\t\t\tcode: page.code,\n\t\t\t},\n\t\t\tdata: {\n\t\t\t\tid: pageId,\n\t\t\t\toptions: {\n\t\t\t\t\tdialogId: this.dialogId,\n\t\t\t\t\tsessionId: this.sessionId,\n\t\t\t\t},\n\t\t\t}\n\t\t}).then(() =>\n\t\t{\n\t\t\tthis.stopProgress();\n\t\t\tthis.closeApplication();\n\t\t}).catch((result) =>\n\t\t{\n\t\t\tApp.showError(result.errors.pop().message);\n\t\t\tthis.stopProgress();\n\t\t});\n\t}\n\tsendShipment(buttonEvent)\n\t{\n\t\tif (!this.isPaymentCreationAvailable)\n\t\t{\n\t\t\tthis.closeApplication();\n\t\t\treturn null;\n\t\t}\n\n\t\tif (!this.store.getters['orderCreation/isAllowedSubmit'] || this.isProgress)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tthis.startProgress(buttonEvent);\n\n\t\tlet data = {\n\t\t\townerTypeId: this.ownerTypeId,\n\t\t\townerId: this.ownerId,\n\t\t\torderId: this.orderId,\n\t\t\tdeliveryId: this.store.getters['orderCreation/getDeliveryId'],\n\t\t\tdeliveryPrice: this.store.getters['orderCreation/getDelivery'],\n\t\t\texpectedDeliveryPrice: this.store.getters['orderCreation/getExpectedDelivery'],\n\t\t\tdeliveryResponsibleId: this.store.getters['orderCreation/getDeliveryResponsibleId'],\n\t\t\tpersonTypeId: this.store.getters['orderCreation/getPersonTypeId'],\n\t\t\tshipmentPropValues: this.store.getters['orderCreation/getPropertyValues'],\n\t\t\tdeliveryExtraServicesValues: this.store.getters['orderCreation/getDeliveryExtraServicesValues'],\n\t\t};\n\n\t\tif (this.stageOnDeliveryFinished !== null)\n\t\t{\n\t\t\tdata.stageOnDeliveryFinished = this.stageOnDeliveryFinished;\n\t\t}\n\n\t\tBX.ajax.runAction('salescenter.order.createShipment', {\n\t\t\tdata: {\n\t\t\t\tbasketItems: this.store.getters['orderCreation/getBasket'](),\n\t\t\t\toptions: data,\n\t\t\t},\n\t\t\tanalyticsLabel: 'salescenterCreateShipment',\n\t\t}).then((result) =>\n\t\t{\n\t\t\tthis.store.dispatch('orderCreation/resetBasket');\n\t\t\tthis.stopProgress(buttonEvent);\n\n\t\t\tif (result.data)\n\t\t\t{\n\t\t\t\tif (result.data.order)\n\t\t\t\t{\n\t\t\t\t\tthis.slider.data.set('order', result.data.order);\n\t\t\t\t}\n\t\t\t\tif (result.data.deal)\n\t\t\t\t{\n\t\t\t\t\tthis.slider.data.set('deal', result.data.deal);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.closeApplication();\n\t\t\tthis.emitGlobalEvent('salescenter.app:onshipmentcreated');\n\t\t}).catch((data) =>\n\t\t{\n\t\t\tdata.errors.forEach((error) => {\n\t\t\t\talert(error.message);\n\t\t\t});\n\t\t\tthis.stopProgress(buttonEvent);\n\t\t\tApp.showError(data);\n\t\t});\n\t}\n\n\tsendPayment(buttonEvent, skipPublicMessage = 'n')\n\t{\n\t\tif (!this.isPaymentCreationAvailable)\n\t\t{\n\t\t\tthis.closeApplication();\n\t\t\treturn null;\n\t\t}\n\n\t\tif (!this.store.getters['orderCreation/isAllowedSubmit'] || this.isProgress)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tthis.startProgress(buttonEvent);\n\n\t\tlet data = {\n\t\t\tdialogId: this.dialogId,\n\t\t\tsendingMethod: this.sendingMethod,\n\t\t\tsendingMethodDesc: this.sendingMethodDesc,\n\t\t\tsessionId: this.sessionId,\n\t\t\tlineId: this.lineId,\n\t\t\townerTypeId: this.ownerTypeId,\n\t\t\torderId: this.orderId,\n\t\t\townerId: this.ownerId,\n\t\t\tskipPublicMessage,\n\t\t\tdeliveryId: this.store.getters['orderCreation/getDeliveryId'],\n\t\t\tdeliveryPrice: this.store.getters['orderCreation/getDelivery'],\n\t\t\texpectedDeliveryPrice: this.store.getters['orderCreation/getExpectedDelivery'],\n\t\t\tdeliveryResponsibleId: this.store.getters['orderCreation/getDeliveryResponsibleId'],\n\t\t\tpersonTypeId: this.store.getters['orderCreation/getPersonTypeId'],\n\t\t\tshipmentPropValues: this.store.getters['orderCreation/getPropertyValues'],\n\t\t\tdeliveryExtraServicesValues: this.store.getters['orderCreation/getDeliveryExtraServicesValues'],\n\t\t\tavailablePaySystemsIds: this.store.getters['orderCreation/getAvailablePaySystemsIds'],\n\t\t\tconnector: this.connector,\n\t\t\tcontext: this.context,\n\t\t\tcurrency: this.currencyCode,\n\t\t\tassignedById: this.assignedById,\n\t\t};\n\n\t\tif (this.documentSelector)\n\t\t{\n\t\t\tdata.boundDocumentId = this.store.getters['documentSelector/getBoundDocumentId'];\n\t\t\tdata.selectedTemplateId = this.store.getters['documentSelector/getSelectedTemplateId'];\n\t\t}\n\n\t\tif (this.stageOnOrderPaid !== null)\n\t\t{\n\t\t\tdata.stageOnOrderPaid = this.stageOnOrderPaid;\n\t\t}\n\t\tif (this.stageOnDeliveryFinished !== null)\n\t\t{\n\t\t\tdata.stageOnDeliveryFinished = this.stageOnDeliveryFinished;\n\t\t}\n\n\t\tBX.ajax.runAction('salescenter.order.createPayment', {\n\t\t\tdata: {\n\t\t\t\tbasketItems: this.store.getters['orderCreation/getBasket'](),\n\t\t\t\toptions: data,\n\t\t\t},\n\t\t\tanalyticsLabel: (this.context === 'deal') ? 'salescenterCreatePaymentSms' : 'salescenterCreatePayment',\n\t\t\tgetParameters: {\n\t\t\t\tdialogId: this.dialogId,\n\t\t\t\tcontext: this.context,\n\t\t\t\tconnector: this.connector,\n\t\t\t\tskipPublicMessage: skipPublicMessage,\n\t\t\t}\n\t\t}).then((result) =>\n\t\t{\n\t\t\tthis.store.dispatch('orderCreation/resetBasket');\n\t\t\tthis.stopProgress(buttonEvent);\n\t\t\tif (skipPublicMessage === 'y')\n\t\t\t{\n\t\t\t\tlet notify = {\n\t\t\t\t\tcontent: Loc.getMessage('SALESCENTER_ORDER_CREATE_NOTIFICATION').replace('#ORDER_ID#', result.data.order.number),\n\t\t\t\t};\n\t\t\t\tnotify.actions = [{\n\t\t\t\t\ttitle: Loc.getMessage('SALESCENTER_VIEW'),\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tclick() {\n\t\t\t\t\t\t\tManager.showOrderAdd(result.data.order.id);\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t}];\n\t\t\t\tBX.UI.Notification.Center.notify(notify);\n\t\t\t\tManager.showOrdersList({\n\t\t\t\t\torderId: result.data.order.id,\n\t\t\t\t\townerId: this.ownerId,\n\t\t\t\t\townerTypeId: this.ownerTypeId,\n\t\t\t\t\tcontext: this.context,\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.slider.data.set('action', 'sendPayment');\n\t\t\t\tthis.slider.data.set('order', result.data.order);\n\n\t\t\t\tif (result.data.deal)\n\t\t\t\t{\n\t\t\t\t\tthis.slider.data.set('deal', result.data.deal);\n\t\t\t\t}\n\n\t\t\t\tif (result.data.entity)\n\t\t\t\t{\n\t\t\t\t\tthis.slider.data.set('entity', result.data.entity);\n\t\t\t\t}\n\n\t\t\t\tthis.closeApplication();\n\t\t\t}\n\t\t\tthis.emitGlobalEvent('salescenter.app:onpaymentcreated');\n\t\t}).catch((data) =>\n\t\t{\n\n\t\t\tdata.errors.forEach((error) => {\n\t\t\t\ttop.BX.UI.Notification.Center.notify({\n\t\t\t\t\tcontent: Text.encode(error.message)\n\t\t\t\t});\n\t\t\t});\n\t\t\tthis.stopProgress(buttonEvent);\n\t\t\tApp.showError(data);\n\n\t\t\tif(this.needCloseApplication(data.errors))\n\t\t\t{\n\t\t\t\tthis.closeApplication();\n\t\t\t}\n\t\t});\n\t}\n\n\tneedCloseApplication(errors)\n\t{\n\t\tlet alwaysOpen = errors.filter(error => {\n\t\t\treturn error.code < 1 || error.code > 100\n\t\t}).length >= 1\n\n\t\treturn alwaysOpen === false\n\t}\n\n\tresendPayment(buttonEvent)\n\t{\n\t\tif (!this.isPaymentCreationAvailable)\n\t\t{\n\t\t\tthis.closeApplication();\n\t\t\treturn null;\n\t\t}\n\n\t\tif (!this.store.getters['orderCreation/isAllowedSubmit'] || this.isProgress)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tthis.startProgress(buttonEvent);\n\n\t\tconst options = {\n\t\t\tsendingMethod: this.sendingMethod,\n\t\t\tsendingMethodDesc: this.sendingMethodDesc,\n\t\t\tstageOnOrderPaid: this.stageOnOrderPaid,\n\t\t\townerTypeId: this.ownerTypeId,\n\t\t\townerId: this.ownerId,\n\t\t};\n\t\tif (this.documentSelector)\n\t\t{\n\t\t\toptions.boundDocumentId = this.store.getters['documentSelector/getBoundDocumentId'];\n\t\t\toptions.selectedTemplateId = this.store.getters['documentSelector/getSelectedTemplateId'];\n\t\t}\n\t\tBX.ajax.runAction('salescenter.order.resendPayment', {\n\t\t\tdata: {\n\t\t\t\torderId: this.orderId,\n\t\t\t\tpaymentId: this.options.paymentId,\n\t\t\t\tshipmentId: this.options.shipmentId,\n\t\t\t\toptions,\n\t\t\t},\n\t\t\tgetParameters: {\n\t\t\t\tcontext: this.context,\n\t\t\t}\n\t\t}).then((result) =>\n\t\t{\n\t\t\tthis.stopProgress(buttonEvent);\n\t\t\tthis.closeApplication();\n\t\t\tthis.emitGlobalEvent('salescenter.app:onpaymentresend');\n\t\t}).catch((data) =>\n\t\t{\n\t\t\tdata.errors.forEach((error) => {\n\t\t\t\talert(error.message);\n\t\t\t});\n\t\t\tthis.stopProgress(buttonEvent);\n\t\t\tApp.showError(data);\n\t\t});\n\t}\n\thideNoPaymentSystemsBanner()\n\t{\n\t\tconst userOptionName = this.options.orderCreationOption || false;\n\t\tconst userOptionKeyName = this.options.paySystemBannerOptionName || false;\n\t\tif (userOptionName && userOptionKeyName)\n\t\t{\n\t\t\tBX.userOptions.save('salescenter', userOptionName, userOptionKeyName, 'Y');\n\t\t}\n\t}\n\tgetOrdersCount()\n\t{\n\t\tif(this.sessionId > 0)\n\t\t{\n\t\t\treturn Rest.callMethod('salescenter.order.getActiveOrdersCount', {\n\t\t\t\tsessionId: this.sessionId\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn new Promise((resolve, reject) => {});\n\t\t}\n\t}\n\n\tgetPaymentsCount()\n\t{\n\t\tif (this.sessionId > 0)\n\t\t{\n\t\t\treturn Rest.callMethod('salescenter.order.getActivePaymentsCount', {\n\t\t\t\tsessionId: this.sessionId\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn new Promise((resolve, reject) => {});\n\t\t}\n\t}\n\n\thasClientContactInfo()\n\t{\n\t\tif (this.options.sendingMethod === 'chat')\n\t\t{\n\t\t\treturn this.options.dialogId !== '';\n\t\t}\n\n\t\treturn this.options.contactPhone !== '';\n\t}\n\n\temitGlobalEvent(eventName, data)\n\t{\n\t\tEventEmitter.emit(eventName, data);\n\t\tBX.SidePanel.Instance.postMessage(this.slider, eventName, data);\n\t}\n\n\tisPaymentMode(): boolean\n\t{\n\t\treturn this.context === 'deal';\n\t}\n}\n\ndeclare type DocumentSelectorParams = {\n\tboundDocumentId: ?number,\n\tselectedTemplateId: ?number,\n\tdocuments: ?Document[],\n\ttemplates: ?Template[],\n\ttemplateAddUrl: ?string,\n\tprovider: ?string,\n\tvalue: ?number,\n};\n\nexport type Document = {\n\tid: number,\n\ttitle: string,\n\tdetailUrl: string,\n\tisWithStamps: boolean,\n}\n\nexport type Template = {\n\tid: number,\n\ttitle: string,\n\tdocumentCreationUrl: string,\n\tisWithStamps: boolean,\n}"],"names":["ApplicationModel","pages","getPages","state","setPages","payload","saveState","removePage","page","filter","id","landingId","addPage","push","VuexBuilderModel","OrderCreationModel","currency","processingId","basket","basketVersion","propertyValues","deliveryExtraServicesValues","expectedDelivery","deliveryResponsibleId","personTypeId","deliveryId","delivery","isEnabledSubmit","errors","total","sum","discount","result","availablePaySystemsIds","resetBasket","commit","setCurrency","setDeliveryId","setDelivery","setPropertyValues","setDeliveryExtraServicesValues","setExpectedDelivery","setDeliveryResponsibleId","setPersonTypeId","setAvailablePaySystemsIds","getBasket","index","isAllowedSubmit","getTotal","getDelivery","getDeliveryId","getPropertyValues","getDeliveryExtraServicesValues","getExpectedDelivery","getDeliveryResponsibleId","getPersonTypeId","getAvailablePaySystemsIds","setBasket","setTotal","Object","assign","clearBasket","setErrors","clearErrors","setProcessingId","enableSubmit","disableSubmit","DocumentSelectorModel","addDocument","dispatch","document","boundDocumentId","setBoundDocumentId","paymentId","Rest","callMethod","then","response","console","error","loadTemplates","Number","entityTypeId","entityId","templates","answer","documents","selectedTemplateId","getTemplates","getDocuments","getBoundDocumentId","getSelectedTemplateId","fillState","setTemplates","setSelectedTemplateId","newDocument","isUpdated","unshift","MixinTemplatesType","data","editable","created","$root","$on","value","TileCollectionMixins","components","Label","TileLabel","TileHintImg","TileLabelPlus","TileHintImgCaption","TileHintBackground","TileHintBackgroundCaption","methods","getCollectionTile","tiles","getCollectionTileByFilter","map","Map","collection","hasOwnProperty","type","length","forEach","item","getType","set","hasTileOfferFromCollection","Tile","size","hasTileMoreFromCollection","getTileOfferFromCollection","inx","tile","getTileMoreFromCollection","getTileByIndex","openSlider","slider","AppSlider","openAppLocal","getOptionSlider","subscribe","EventTypes","AppSliderSliderClose","e","$emit","isControlTile","includes","showHint","event","popup","Hint","show","target","info","hideHint","hide","computed","width","Uninstalled","props","Array","required","mixins","template","Installed","StageMixin","statusClassMixin","status","Status","current","disabled","containerClassMixin","counterCheckedMixin","complete","onSliderClose","Cashbox","String","counter","installed","Boolean","titleItems","initialCollapseState","Block","TileInstalled","TileUnInstalled","statusClass","title","Loc","getMessage","configForBlock","collapsible","checked","onItemHint","BX","Salescenter","Manager","openHowToConfigCashBox","saveCollapsedOption","option","mounted","$app","options","templateMode","productForm","setEditable","formWrapper","$el","querySelector","appendChild","layout","refreshId","defaultCurrency","currencyCode","$store","Type","isArray","fields","isObject","totals","ProductForm","currencySymbol","iblockId","catalogIblockId","basePriceId","taxList","vatList","measures","showDiscountBlock","showProductDiscounts","showTaxBlock","showProductTaxes","totalResultLabel","mode","urlBuilderContext","urlProductBuilderContext","isCatalogPriceEditEnabled","fieldHints","hideUnselectedProperties","showCompilationModeSwitcher","checkProductErrors","EventEmitter","Runtime","debounce","onBasketChange","processRefreshRequest","preparedBasket","isStringFilled","innerId","selectorId","setData","getData","isNeedDisableSubmit","requestId","Text","getRandom","ajax","runAction","orderId","basketItems","prop","getObject","get","getters","isFunction","hasErrors","filledProducts","module","productId","hintTitle","Product","openHowToSell","config","DeliverySelector","availableServices","onChange","deliveryPrice","deliveryServiceId","relatedPropsValues","relatedServicesValues","estimatedDeliveryPrice","responsibleUser","onAddressFromChanged","refreshAvailableServices","onDeliveryServiceChanged","onSettingsChanged","sessionId","ownerTypeId","ownerId","order","shipmentPropValues","deliveryRelatedServiceValues","localize","Vue","getFilteredPhrases","sumTitle","productsPrice","deliveryFormatted","isDeliveryCalculated","Currency","currencyFormat","totalFormatted","excludedServiceIds","emptyDeliveryServiceId","actionData","Vuex","mapState","orderCreation","shipment","priceDelivery","basePriceDelivery","deliveryService","name","logo","parent","extraServices","getFormattedPrice","price","hasParent","deliveryServiceLogo","deliveryServiceProfileLogo","paymentPrice","deliveryServiceName","deliveryServiceProfileName","isExtraServicesVisible","basePriceDeliveryFormatted","priceDeliveryFormatted","productsPriceFormatted","paymentPriceFormatted","DeliveryVuex","isCollapsible","selectedDeliveryServiceName","ShipmentView","shipmentId","titleName","shipmentData","propValues","extraServicesValues","relatedPropsOptions","deliveryOrderPropOptions","responsibleId","assignedById","isViewTemplateMode","setTitleName","PaySystem","openHowToConfigDefaultPaySystem","ChatMessage","manager","titleTemplate","editorTemplate","editorUrl","UserAvatar","MessageEditor","currentSenderCode","senders","pushedToUseBitrix24Notifications","smsSenderListComponentKey","editor","url","isMessageReadOnly","context","urlSettingsCompanyContacts","openBitrix24NotificationsHelp","Automation","stageOnOrderPaid","stageOnDeliveryFinished","items","paymentStages","shipmentStages","StageList","updatePaymentStage","newStageId","stage","selected","updateShipmentStage","initStages","stages","currentValue","values","AutomationStage","create","selectedStage","isPayment","find","isHideDeliveryStage","buttonLabel","buttonEnabled","showWhatClientSeesControl","buttonClass","showWhatClientSees","openWhatClientSee","submit","TimeLine","timelineItems","Item","PaymentItem","Payment","DocumentSelector","templateAddUrl","model","getDocumentTitle","currentDocument","getCurrentDocument","withStamps","isWithStamps","hasData","detailUrl","documentSelector","handleDocumentClick","openSelectorMenu","openTemplatesList","bindElement","MenuManager","prepareSelectorMenuItems","closeByEsc","cacheable","closeSelectorMenu","destroy","text","onclick","templateListItem","delimiter","handleEditDocumentClick","getDocumentById","getStubDocumentByTemplate","getTemplateById","templateId","Uri","addParam","documentCreationUrl","_paymentId","Send","message","entityResponsible","sendingMethodDesc","orderPublicUrl","product","paysystem","paySystemList","isSet","getTileCollection","getTitleItems","isPaySystemCollapsed","cashbox","automation","isHidden","parseInt","deliveryList","isInstalled","isDeliveryCollapsed","cashboxList","isCashboxCollapsed","isAutomationAvailable","entityStageList","isAutomationCollapsed","timeline","getTimelineCollection","isSendAllowed","hasStageTimeLine","hasStageAutomation","hasStageCashBox","submitButtonLabel","isShowDocumentSelector","initCounter","list","TimeLineItem","stageRefresh","runComponentAction","refreshTilesByType","bind","UI","Notification","Center","notify","content","onSend","changeProvider","provider","userOptions","save","beforeUpdate","isFaded","createPinner","startFade","endFade","buttonsPanel","$refs","parentNode","Pinner","fixBottom","isFrame","fullWidth","close","closeApplication","isOrderPublicUrlAvailable","wrapperClass","wrapperStyle","position","pos","offset","top","$nodes","footer","height","connect","loader","Loader","body","no_redirect","loadConfig","isSiteExists","isOrderPublicUrlExists","checkRecycle","openConnectedSite","isOrderPageDeleted","isVisible","openControlPanel","ComponentMixin","isShowPreview","isShowPayment","pageTitle","currentPageId","actions","frameCheckShortTimeout","frameCheckLongTimeout","isPagesOpen","isFormsOpen","showedPageIds","loadedPageIds","errorPageIds","lastAddedPages","ordersCount","paymentsCount","editedPageId","currentPageTitle","Start","NoPaymentSystemsBanner","StageBlocksList","updated","renderErrors","createLoader","fillPages","isWithOrdersMode","refreshOrdersCount","refreshPaymentsCount","openFirstPage","isPaymentsLimitReached","paymentsLimitStartNode","paymentsLimit","paymentsLimitNode","children","node","getActions","currentPage","SALESCENTER_RIGHT_ACTION_COPY_URL","copyUrl","SALESCENTER_RIGHT_ACTION_HIDE","hidePage","SALESCENTER_RIGHT_ACTION_DELETE","SALESCENTER_RIGHT_ACTION_ADD","getAddPageActions","isWebform","SALESCENTER_RIGHT_ACTION_ADD_SITE_B24","addSite","SALESCENTER_RIGHT_ACTION_ADD_CUSTOM","showAddUrlPopup","isPaymentCreationAvailable","showPaymentForm","firstWebformPage","pageToOpen","onPageClick","setPageTitle","hideActionsPopup","isFrameDenied","startFrameCheckTimeout","onFrameError","showActionsPopup","PopupMenu","offsetLeft","offsetTop","showCompanyContacts","showAddPageActionPopup","menuId","offsetWidth","offsetHeight","angle","addSitePage","newPage","editPage","editLandingPage","siteId","hideNoPaymentSystemsBanner","isPlainObject","addCustomPage","pageId","getPaymentItemTitle","SALESCENTER_LEFT_PAYMENT_ADD_2","SALESCENTER_LEFT_PAYMENT_AND_DELIVERY","SALESCENTER_DEFAULT_TITLE","showOrdersList","showPaymentsList","showOrderAdd","showCatalog","onFormsClick","openHelpDesk","openHowItWorks","isPageSelected","send","skipPublicMessage","isAllowedSubmitButton","isShowStartInfo","sendPayment","isActive","sendPage","innerText","clearTimeout","onFrameLoad","onSuccessfullyConnected","setTimeout","getFrameSource","setQueryParam","toString","getOrdersCount","getPaymentsCount","errorMessages","join","params","color","Alert","Color","DANGER","textCenter","util","htmlspecialchars","errorBlock","innerHTML","animated","alert","getContainer","editMenuItem","focus","saveMenuItem","oldName","analyticsLabel","application","pagesSubmenuHeight","formsSubmenuHeight","isFrameError","isShowLoader","res","lastModified","modifiedAgo","SALESCENTER_MODIFIED","replace","disableSendButton","isNoPaymentSystemsBannerVisible","showPaySystemSettingBanner","TYPE_PHONE","TYPE_SENDER","SmsMessage","initSenders","initCurrentSenderCode","initPushedToUseBitrix24Notifications","selectedSmsSender","phone","contactEditorUrl","Error","SenderList","MessageEdit","MessageView","MessageControl","contactPhone","hintClassModifier","currentSender","sender","code","bitrix24ConnectUrlError","SenderConfig","needConfigure","getConnectionErrorText","fixer","openSliderFreeMessages","connectUrl","fixText","getConnectionErrorFixText","BITRIX24","isAvailable","toUpperCase","isConnected","usageErrors","getFixer","handleErrorFix","initialize","onConfigureContactPhone","messageCode","fallback","fixUrl","events","onLoad","getSlider","sliderBx","getFrameWindow","addCustomEvent","loadExt","InfoHelper","Promise","resolve","handleOnSmsSenderSelected","Ajax","handlePhoneErrorFix","hendleSmsErrorBlock","sendAllowed","sent","groups","getTileGroupsCollection","isViewWithoutDelivery","ret","group","fillTiles","changeContactPhone","editableMixin","activeMenuItem","isLoading","EntityCreatePaymentStages","StageBlocksListShipment","reload","form","initialMode","onReload","sendPaymentDeliveryForm","isAllowedPaymentDeliverySubmitButton","resendPayment","sendDeliveryForm","isAllowedDeliverySubmitButton","sendShipment","specifyCompanyContacts","suggestScenario","openFeedbackPayOrderForm","howItWorks","openHowPaySmartInvoiceWorks","openHowPayDealWorks","openIntegrationWindow","openIntegrationRequestForm","freeMessages","fixed","isAllowedFreeMessagesButton","isOnlyDeliveryItemVisible","hasInstallable","hasClientContactInfo","isCurrentSenderConnected","isSuggestScenarioMenuItemVisible","isBitrix24","isRequestIntegrationMenuItemVisible","isIntegrationButtonVisible","needShowStoreConnection","sendPaymentDeliveryFormButtonText","getTitleForPaymentDeliveryMenuItem","paymentDeliveryFormSubmitButtonClass","deliveryFormSubmitButtonClass","paymentDeliveryMenuItemClass","deliveryMenuItemClass","App","dialogId","lineId","orderAddPullTag","landingPublicationPullTag","landingUnPublicationPullTag","isCatalogAvailable","DocumentSelectorParams","SidePanel","Instance","getTopSlider","isProgress","fillPagesTimeout","fillPagesQueue","sendingMethod","fileControl","isString","isBoolean","isUndefined","connector","Event","ready","pull","PULL","initPull","initStore","initTemplate","showError","moduleId","command","callback","showOrdersListAfterCreate","store","templateEngine","el","getElementById","Chat","Deal","isPaymentMode","leftPanel","orderSelector","initOrderSelector","arParams","getLoader","componentKey","orderList","orderSelectorBtn","setAttribute","popupMenu","menuItems","orderCaption","classList","remove","addEventListener","preventDefault","init","err","startProgress","stopProgress","buttonEvent","showLoader","isDomNode","add","hideLoader","reject","promise","deleteUrl","error_description","source","connectedSiteId","addAnalyticAction","getParameters","pop","expectedDeliveryPrice","deal","emitGlobalEvent","number","click","entity","encode","needCloseApplication","alwaysOpen","userOptionName","orderCreationOption","userOptionKeyName","paySystemBannerOptionName","eventName","emit","postMessage","builder","VuexBuilder","addModel","useNamespace","build"],"mappings":"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"}