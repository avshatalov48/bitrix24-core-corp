{"version":3,"file":"app.bundle.js","sources":["../src/models/application.js","../src/models/ordercreation.js","../src/models/document-selector.js","../src/components/templates-type-mixin.js","../src/components/stage-blocks/tile-collection/tile-collection-mixins.js","../src/components/stage-blocks/tile-collection/uninstalled.js","../src/components/stage-blocks/tile-collection/installed.js","../src/components/stage-blocks/stage-mixin.js","../src/components/stage-blocks/cashbox.js","../src/product.js","../src/components/stage-blocks/product.js","../src/components/delivery-selector.js","../src/components/shipment-view.js","../src/components/stage-blocks/delivery-vuex.js","../src/components/stage-blocks/paysystem.js","../src/components/stage-blocks/chat-message.js","../src/components/stage-blocks/automation.js","../src/components/deal-receiving-payment/stage-blocks/send.js","../src/components/stage-blocks/timeline.js","../src/components/stage-blocks/document-selector.js","../src/components/chat-receiving-payment/stage-blocks-list.js","../src/component-mixin.js","../src/start.js","../src/no-payment-systems.js","../src/chat.js","../src/components/stage-blocks/sms-message.js","../src/components/deal-receiving-payment/stage-blocks-list.js","../src/components/crm-entity-create-payment/stage-blocks-list.js","../src/components/deal-creating-shipment/stage-blocks/send.js","../src/components/deal-creating-shipment/stage-blocks-list.js","../src/deal.js","../src/app.js"],"sourcesContent":["import {VuexBuilderModel} from 'ui.vue.vuex';\n\nexport class ApplicationModel extends VuexBuilderModel\n{\n\t/**\n\t * @inheritDoc\n\t */\n\tgetName()\n\t{\n\t\treturn 'application';\n\t}\n\n\tgetState()\n\t{\n\t\treturn {\n\t\t\tpages: [],\n\t\t}\n\t}\n\n\tgetGetters()\n\t{\n\t\treturn {\n\t\t\tgetPages: (state) => () =>\n\t\t\t{\n\t\t\t\treturn state.pages;\n\t\t\t},\n\t\t}\n\t}\n\n\tgetMutations()\n\t{\n\t\treturn {\n\t\t\tsetPages: (state, payload) =>\n\t\t\t{\n\t\t\t\tif(typeof payload.pages === 'object')\n\t\t\t\t{\n\t\t\t\t\tstate.pages = payload.pages        ;\n\t\t\t\t\tthis.saveState(state);\n\t\t\t\t}\n\t\t\t},\n\t\t\tremovePage: (state, payload) =>\n\t\t\t{\n\t\t\t\tif(typeof payload.page === 'object')\n\t\t\t\t{\n\t\t\t\t\tstate.pages = state.pages.filter((page) => {\n\t\t\t\t\t\treturn !(\n\t\t\t\t\t\t\t(payload.page.id && payload.page.id > 0 && page.id === payload.page.id) ||\n\t\t\t\t\t\t\t(payload.page.landingId && payload.page.landingId > 0 && page.landingId === payload.page.landingId)\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\t\t\tthis.saveState(state);\n\t\t\t\t}\n\t\t\t},\n\t\t\taddPage: (state, payload) =>\n\t\t\t{\n\t\t\t\tif(typeof payload.page === 'object')\n\t\t\t\t{\n\t\t\t\t\tstate.pages.push(payload.page);\n\t\t\t\t\tthis.saveState(state);\n\t\t\t\t}\n\t\t\t},\n\t\t}\n\t}\n}","import {VuexBuilderModel} from 'ui.vue.vuex';\n\nexport class OrderCreationModel extends VuexBuilderModel\n{\n\t/**\n\t * @inheritDoc\n\t */\n\tgetName()\n\t{\n\t\treturn 'orderCreation';\n\t}\n\n\tgetState()\n\t{\n\t\treturn {\n\t\t\tcurrency: '',\n\t\t\tprocessingId: null,\n\t\t\tbasket: [],\n\t\t\tbasketVersion: 0,\n\t\t\tpropertyValues: [],\n\t\t\tdeliveryExtraServicesValues: [],\n\t\t\texpectedDelivery: null,\n\t\t\tdeliveryResponsibleId: null,\n\t\t\tpersonTypeId: null,\n\t\t\tdeliveryId: null,\n\t\t\tdelivery: null,\n\t\t\tisEnabledSubmit: false,\n\t\t\tisCompilationMode: false,\n\t\t\terrors: [],\n\t\t\ttotal: {\n\t\t\t\tsum: null,\n\t\t\t\tdiscount: null,\n\t\t\t\tresult: null,\n\t\t\t},\n\t\t\t/**\n\t\t\t * ID of selected pay systems available for order payment\n\t\t\t */\n\t\t\tavailablePaySystemsIds: [],\n\t\t}\n\t}\n\n\tgetActions()\n\t{\n\t\treturn {\n\t\t\tresetBasket ({ commit })\n\t\t\t{\n\t\t\t\tcommit('clearBasket');\n\t\t\t},\n\t\t\tsetCurrency: ({ commit }, payload) =>\n\t\t\t{\n\t\t\t\tconst currency = payload || '';\n\t\t\t\tcommit('setCurrency', currency);\n\t\t\t},\n\t\t\tsetDeliveryId: ({ commit }, payload) =>\n\t\t\t{\n\t\t\t\tcommit('setDeliveryId', payload);\n\t\t\t},\n\t\t\tsetDelivery: ({ commit }, payload) =>\n\t\t\t{\n\t\t\t\tcommit('setDelivery', payload);\n\t\t\t},\n\t\t\tsetPropertyValues: ({ commit }, payload) =>\n\t\t\t{\n\t\t\t\tcommit('setPropertyValues', payload);\n\t\t\t},\n\t\t\tsetDeliveryExtraServicesValues: ({ commit }, payload) =>\n\t\t\t{\n\t\t\t\tcommit('setDeliveryExtraServicesValues', payload);\n\t\t\t},\n\t\t\tsetExpectedDelivery: ({ commit }, payload) =>\n\t\t\t{\n\t\t\t\tcommit('setExpectedDelivery', payload);\n\t\t\t},\n\t\t\tsetDeliveryResponsibleId: ({ commit }, payload) =>\n\t\t\t{\n\t\t\t\tcommit('setDeliveryResponsibleId', payload);\n\t\t\t},\n\t\t\tsetPersonTypeId: ({ commit }, payload) =>\n\t\t\t{\n\t\t\t\tcommit('setPersonTypeId', payload);\n\t\t\t},\n\t\t\tsetAvailablePaySystemsIds: ({ commit }, payload) =>\n\t\t\t{\n\t\t\t\tcommit('setAvailablePaySystemsIds', payload);\n\t\t\t},\n\t\t}\n\t}\n\n\tgetGetters()\n\t{\n\t\treturn {\n\t\t\tgetBasket: state => index =>\n\t\t\t{\n\t\t\t\treturn state.basket;\n\t\t\t},\n\t\t\tisAllowedSubmit: state =>\n\t\t\t{\n\t\t\t\treturn state.isEnabledSubmit;\n\t\t\t},\n\t\t\tisCompilationMode: state =>\n\t\t\t{\n\t\t\t\treturn state.isCompilationMode;\n\t\t\t},\n\t\t\tgetTotal: state =>\n\t\t\t{\n\t\t\t\treturn state.total;\n\t\t\t},\n\t\t\tgetDelivery: state =>\n\t\t\t{\n\t\t\t\treturn state.delivery;\n\t\t\t},\n\t\t\tgetDeliveryId: state =>\n\t\t\t{\n\t\t\t\treturn state.deliveryId;\n\t\t\t},\n\t\t\tgetPropertyValues: state =>\n\t\t\t{\n\t\t\t\treturn state.propertyValues;\n\t\t\t},\n\t\t\tgetDeliveryExtraServicesValues: state =>\n\t\t\t{\n\t\t\t\treturn state.deliveryExtraServicesValues;\n\t\t\t},\n\t\t\tgetExpectedDelivery: state =>\n\t\t\t{\n\t\t\t\treturn state.expectedDelivery;\n\t\t\t},\n\t\t\tgetDeliveryResponsibleId: state =>\n\t\t\t{\n\t\t\t\treturn state.deliveryResponsibleId;\n\t\t\t},\n\t\t\tgetPersonTypeId: state =>\n\t\t\t{\n\t\t\t\treturn state.personTypeId;\n\t\t\t},\n\t\t\tgetAvailablePaySystemsIds: state =>\n\t\t\t{\n\t\t\t\treturn state.availablePaySystemsIds;\n\t\t\t},\n\t\t}\n\t}\n\n\tgetMutations()\n\t{\n\t\treturn {\n\t\t\tsetBasket: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.basket = payload;\n\t\t\t},\n\t\t\tsetTotal: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.total = Object.assign(state.total, payload);\n\t\t\t},\n\t\t\tclearBasket: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.basket = [];\n\t\t\t\tstate.basketVersion++ ;\n\t\t\t},\n\t\t\tsetErrors: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.errors = payload;\n\t\t\t},\n\t\t\tsetDeliveryId: (state, deliveryId) =>\n\t\t\t{\n\t\t\t\tstate.deliveryId = deliveryId;\n\t\t\t},\n\t\t\tsetDelivery: (state, delivery) =>\n\t\t\t{\n\t\t\t\tstate.delivery = delivery;\n\t\t\t},\n\t\t\tsetPropertyValues: (state, propertyValues) =>\n\t\t\t{\n\t\t\t\tstate.propertyValues = propertyValues;\n\t\t\t},\n\t\t\tsetDeliveryExtraServicesValues: (state, deliveryExtraServicesValues) =>\n\t\t\t{\n\t\t\t\tstate.deliveryExtraServicesValues = deliveryExtraServicesValues;\n\t\t\t},\n\t\t\tsetExpectedDelivery: (state, expectedDelivery) =>\n\t\t\t{\n\t\t\t\tstate.expectedDelivery = expectedDelivery;\n\t\t\t},\n\t\t\tsetDeliveryResponsibleId: (state, deliveryResponsibleId) =>\n\t\t\t{\n\t\t\t\tstate.deliveryResponsibleId = deliveryResponsibleId;\n\t\t\t},\n\t\t\tclearErrors: (state) =>\n\t\t\t{\n\t\t\t\tstate.errors = [];\n\t\t\t},\n\t\t\tsetProcessingId: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.processingId = payload;\n\t\t\t},\n\t\t\tsetCurrency: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.currency = payload;\n\t\t\t},\n\t\t\tsetPersonTypeId: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.personTypeId = payload;\n\t\t\t},\n\t\t\tsetAvailablePaySystemsIds: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.availablePaySystemsIds = payload;\n\t\t\t},\n\t\t\tenableSubmit: (state) =>\n\t\t\t{\n\t\t\t\tstate.isEnabledSubmit = true;\n\t\t\t},\n\t\t\tdisableSubmit: (state) =>\n\t\t\t{\n\t\t\t\tstate.isEnabledSubmit = false;\n\t\t\t},\n\t\t\tenableCompilationMode: (state) =>\n\t\t\t{\n\t\t\t\tstate.isCompilationMode = true;\n\t\t\t},\n\t\t\tdisableCompilationMode: (state) =>\n\t\t\t{\n\t\t\t\tstate.isCompilationMode = false;\n\t\t\t},\n\t\t}\n\t}\n}\n","import {VuexBuilderModel} from 'ui.vue.vuex';\nimport {rest as Rest} from 'rest.client';\n\nexport class DocumentSelectorModel extends VuexBuilderModel\n{\n\t/**\n\t * @inheritDoc\n\t */\n\tgetName()\n\t{\n\t\treturn 'documentSelector';\n\t}\n\n\tgetActions()\n\t{\n\t\treturn {\n\t\t\taddDocument({commit, dispatch}, {document})\n\t\t\t{\n\t\t\t\tcommit('addDocument', {document});\n\t\t\t\tdispatch('setBoundDocumentId', {boundDocumentId: document.id});\n\t\t\t},\n\t\t\tsetBoundDocumentId({state, commit}, {boundDocumentId})\n\t\t\t{\n\t\t\t\tif (state.paymentId > 0)\n\t\t\t\t{\n\t\t\t\t\tRest.callMethod('crm.documentgenerator.document.bindToPayment', {\n\t\t\t\t\t\tid: boundDocumentId,\n\t\t\t\t\t\tpaymentId: state.paymentId,\n\t\t\t\t\t}).then(() => {\n\t\t\t\t\t\tcommit('setBoundDocumentId', {boundDocumentId});\n\t\t\t\t\t}).catch((response) => {\n\t\t\t\t\t\tconsole.error(response);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tcommit('setBoundDocumentId', {boundDocumentId});\n\t\t\t\t}\n\t\t\t},\n\t\t\tloadTemplates({state, commit})\n\t\t\t{\n\t\t\t\tif (Number(state.entityTypeId) <= 0 || Number(state.entityId) <= 0)\n\t\t\t\t{\n\t\t\t\t\tcommit('setTemplates', {templates: []});\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tRest.callMethod('crm.documentgenerator.template.listForItem', {\n\t\t\t\t\tentityTypeId: state.entityTypeId,\n\t\t\t\t\tentityId: state.entityId,\n\t\t\t\t}).then((response) => {\n\t\t\t\t\tif (response.answer.result.templates)\n\t\t\t\t\t{\n\t\t\t\t\t\tcommit('setTemplates', {templates: response.answer.result.templates});\n\t\t\t\t\t}\n\t\t\t\t}).catch((response) => {\n\t\t\t\t\tconsole.error(response);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\tgetState()\n\t{\n\t\treturn {\n\t\t\tentityTypeId: null,\n\t\t\tentityId: null,\n\t\t\tpaymentId: null,\n\t\t\tdocuments: [],\n\t\t\ttemplates: [],\n\t\t\tboundDocumentId: null,\n\t\t\tselectedTemplateId: null,\n\t\t}\n\t}\n\n\tgetGetters()\n\t{\n\t\treturn {\n\t\t\tgetTemplates: (state) => {\n\t\t\t\treturn state.templates;\n\t\t\t},\n\t\t\tgetDocuments: (state) => {\n\t\t\t\treturn state.documents;\n\t\t\t},\n\t\t\tgetBoundDocumentId: (state) => {\n\t\t\t\treturn state.boundDocumentId;\n\t\t\t},\n\t\t\tgetSelectedTemplateId: (state) => {\n\t\t\t\treturn state.selectedTemplateId;\n\t\t\t},\n\t\t}\n\t}\n\n\tgetMutations()\n\t{\n\t\treturn {\n\t\t\tfillState: (state, payload) => {\n\t\t\t\tstate.entityTypeId = payload.entityTypeId;\n\t\t\t\tstate.entityId = payload.entityId;\n\t\t\t\tstate.paymentId = payload.paymentId;\n\t\t\t\tstate.documents = payload.documents;\n\t\t\t\tstate.templates = payload.templates;\n\t\t\t\tstate.boundDocumentId = payload.boundDocumentId;\n\t\t\t\tstate.selectedTemplateId = payload.selectedTemplateId;\n\t\t\t},\n\t\t\tsetTemplates: (state, payload) => {\n\t\t\t\tif(typeof payload.templates === 'object')\n\t\t\t\t{\n\t\t\t\t\tstate.templates = payload.templates;\n\t\t\t\t}\n\t\t\t},\n\t\t\tsetBoundDocumentId: (state, payload) => {\n\t\t\t\tif(typeof payload.boundDocumentId === 'number')\n\t\t\t\t{\n\t\t\t\t\tstate.boundDocumentId = payload.boundDocumentId;\n\t\t\t\t}\n\t\t\t},\n\t\t\tsetSelectedTemplateId: (state, payload) => {\n\t\t\t\tif(typeof payload.selectedTemplateId === 'number')\n\t\t\t\t{\n\t\t\t\t\tstate.selectedTemplateId = payload.selectedTemplateId;\n\t\t\t\t\tstate.boundDocumentId = null;\n\t\t\t\t}\n\t\t\t},\n\t\t\taddDocument: (state, payload) => {\n\t\t\t\tif(typeof payload.document === 'object')\n\t\t\t\t{\n\t\t\t\t\tconst newDocument = payload.document;\n\t\t\t\t\tif (!newDocument.id)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tconst documents = state.documents || [];\n\t\t\t\t\tlet isUpdated = false;\n\t\t\t\t\tfor (const index in documents)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (documents[index].id === newDocument.id)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tdocuments[index] = newDocument;\n\t\t\t\t\t\t\tisUpdated = true;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (!isUpdated)\n\t\t\t\t\t{\n\t\t\t\t\t\tdocuments.unshift(newDocument);\n\t\t\t\t\t}\n\t\t\t\t\tstate.documents = documents;\n\t\t\t\t}\n\t\t\t},\n\t\t}\n\t}\n}\n","let MixinTemplatesType = {\n\tdata() {\n\t\treturn {\n\t\t\teditable: true\n\t\t};\n\t},\n\tcreated(){\n\t\tthis.$root.$on(\"on-change-editable\", (value) => {\n\t\t\tthis.editable = value;\n\t\t});\n\t}\n}\n\nexport {\n\tMixinTemplatesType\n}","import\n{\n\tAppSlider,\n\tEventTypes\n} \t\t\t\t\t\t\t\tfrom 'salescenter.marketplace';\nimport\n{\n\tLabel,\n\tTileLabel,\n\tTileHintImg,\n\tTileLabelPlus,\n\tTileHintImgCaption,\n\tTileHintBackground,\n\tTileHintBackgroundCaption,\n} \t\t\t\t\t\t\t\tfrom 'salescenter.component.stage-block.tile';\nimport * as Hint \t\t\t\tfrom 'salescenter.component.stage-block.hint';\nimport * as Tile \t\t\t\tfrom 'salescenter.tile';\n\n\nlet TileCollectionMixins = {\n\n\tcomponents:\n\t\t{\n\t\t\t'label-block'\t\t\t\t\t\t\t:\tLabel,\n\t\t\t'tile-label-block'\t\t\t\t\t\t:\tTileLabel,\n\t\t\t'tile-hint-img-block'\t\t\t\t\t:\tTileHintImg,\n\t\t\t'tile-hint-plus-block'\t\t\t\t\t:\tTileLabelPlus,\n\t\t\t'tile-hint-img-caption-block'\t\t\t:\tTileHintImgCaption,\n\t\t\t'tile-hint-background-block'\t\t\t:\tTileHintBackground,\n\t\t\t'tile-hint-background-caption-block'\t:\tTileHintBackgroundCaption\n\t\t},\n\tmethods:\n\t\t{\n\t\t\tgetCollectionTile()\n\t\t\t{\n\t\t\t\treturn this.tiles;\n\t\t\t},\n\n\t\t\tgetCollectionTileByFilter(filter: Array)\n\t\t\t{\n\t\t\t\tlet map = new Map();\n\t\t\t\tlet collection = this.getCollectionTile();\n\n\t\t\t\tif(filter.hasOwnProperty('type') && filter.type.length > 0)\n\t\t\t\t{\n\t\t\t\t\tcollection\n\t\t\t\t\t\t.forEach((item, index) => {\n\n\t\t\t\t\t\t\tif(filter.type === item.getType())\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tmap.set(index, item);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tcollection\n\t\t\t\t\t\t.forEach((item, index) => map.set(index, item));\n\t\t\t\t}\n\n\t\t\t\treturn map;\n\t\t\t},\n\n\t\t\thasTileOfferFromCollection()\n\t\t\t{\n\t\t\t\tlet map = this.getCollectionTileByFilter({\n\t\t\t\t\ttype: Tile.Offer.type()\n\t\t\t\t});\n\n\t\t\t\treturn map.size > 0;\n\t\t\t},\n\n\t\t\thasTileMoreFromCollection()\n\t\t\t{\n\t\t\t\tlet map = this.getCollectionTileByFilter({\n\t\t\t\t\ttype: Tile.More.type()\n\t\t\t\t});\n\n\t\t\t\treturn map.size > 0;\n\t\t\t},\n\n\t\t\tgetTileOfferFromCollection()\n\t\t\t{\n\t\t\t\tlet map = this.getCollectionTileByFilter({\n\t\t\t\t\ttype: Tile.Offer.type()\n\t\t\t\t});\n\n\t\t\t\tlet result = {};\n\t\t\t\tmap.forEach((item, inx)=> { result = {index: inx, tile: item}; return false;});\n\t\t\t\treturn result;\n\t\t\t},\n\n\t\t\tgetTileMoreFromCollection()\n\t\t\t{\n\t\t\t\tlet map = this.getCollectionTileByFilter({\n\t\t\t\t\ttype: Tile.More.type()\n\t\t\t\t});\n\n\t\t\t\tlet result = {};\n\t\t\t\tmap.forEach((item, inx)=> { result = {index: inx, tile: item}; return false;});\n\t\t\t\treturn result;\n\t\t\t},\n\n\t\t\tgetTileByIndex(index)\n\t\t\t{\n\t\t\t\tlet  tile = null;\n\t\t\t\tthis.getCollectionTileByFilter({})\n\t\t\t\t\t.forEach((item, inx)=> {\n\n\t\t\t\t\t\tif(index === inx)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttile = item;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\treturn tile;\n\t\t\t},\n\n\t\t\topenSlider(inx)\n\t\t\t{\n\t\t\t\tlet slider = new AppSlider();\n\t\t\t\tlet tile = this.getTileByIndex(inx);\n\n\t\t\t\tslider.openAppLocal(tile, this.getOptionSlider);\n\t\t\t\tslider.subscribe(EventTypes.AppSliderSliderClose,\n\t\t\t\t\t(e) => this.$emit('on-tile-slider-close', {data: e.data})\n\t\t\t\t);\n\t\t\t},\n\n\t\t\tisControlTile(tile: Tile.Base)\n\t\t\t{\n\t\t\t\treturn [Tile.More.type(), Tile.Offer.type()].includes(tile.getType());\n\t\t\t},\n\n\t\t\tshowHint(inx, e)\n\t\t\t{\n\t\t\t\tlet event = e.data.event;\n\t\t\t\tlet tile = this.getTileByIndex(inx);\n\n\t\t\t\tthis.popup = new Hint.Popup();\n\t\t\t\tthis.popup.show(event.target, tile.info);\n\t\t\t},\n\n\t\t\thideHint()\n\t\t\t{\n\t\t\t\tif(this.popup)\n\t\t\t\t{\n\t\t\t\t\tthis.popup.hide();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\tcomputed:\n\t\t{\n\t\t\tgetOptionSlider()\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\twidth: 1000\n\t\t\t\t}\n\t\t\t}\n\t\t},\n};\nexport {\n\tTileCollectionMixins\n}","import {TileCollectionMixins} from \"./tile-collection-mixins\";\n\nconst Uninstalled = {\n\tprops: {\n\t\ttiles: {\n\t\t\ttype: Array,\n\t\t\trequired: true\n\t\t}\n\t},\n\tmixins:[TileCollectionMixins],\n\ttemplate: `\t\t\n\t\t<div>\n\t\t\t<template v-for=\"(tile, index) in tiles\">\n\t\t\t\t<tile-hint-background-caption-block\tv-if=\"tile.img.length > 0 && tile.showTitle\"\n\t\t\t\t\t:src=\"tile.img\"\n\t\t\t\t\t:name=\"tile.name\"\n\t\t\t\t\t:caption=\"tile.name\"\n\t\t\t\t\tv-on:tile-hint-bg-label-on-click=\"openSlider(index)\"\n\t\t\t\t\tv-on:tile-hint-bg-label-on-mouseenter=\"showHint(index, $event)\"\n\t\t\t\t\tv-on:tile-hint-bg-label-on-mouseleave=\"hideHint\"\n\t\t\t\t/>\n\t\t\t\t<tile-hint-background-block\t\tv-else-if=\"tile.img.length > 0\"\n\t\t\t\t\t:src=\"tile.img\"\n\t\t\t\t\t:name=\"tile.name\"\n\t\t\t\t\tv-on:tile-hint-bg-on-click=\"openSlider(index)\"\n\t\t\t\t\tv-on:tile-label-bg-hint-on-mouseenter=\"showHint(index, $event)\"\n\t\t\t\t\tv-on:tile-label-bg-hint-on-mouseleave=\"hideHint\"\n\t\t\t\t/>\n\t\t\t\t<tile-hint-plus-block\t\t\tv-else \n\t\t\t\t\t:name=\"tile.name\" \n\t\t\t\t\tv-on:tile-label-plus-on-click=\"openSlider(index)\"\n\t\t\t\t/> \n\t\t\t</template>\n\t\t</div>\n\t`\n};\nexport {\n\tUninstalled\n}","import {TileCollectionMixins} from \"./tile-collection-mixins\";\n\nconst Installed = {\n\tprops: {\n\t\ttiles: {\n\t\t\ttype: Array,\n\t\t\trequired: true\n\t\t}\n\t},\n\tmixins:[TileCollectionMixins],\n\n\ttemplate: `\t\n\t\t<div class=\"salescenter-app-payment-by-sms-item-container-payment\">\n\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container-payment-inline\">\n\t\t\t\t<tile-label-block class=\"salescenter-app-payment-by-sms-item-container-payment-item-text\"\n\t\t\t\t\tv-for=\"(tile, index) in tiles\"\n\t\t\t\t\tv-if=\"isControlTile(tile) === false\"\n\t\t\t\t\t:name=\"tile.name\" \n\t\t\t\t\tv-on:tile-label-on-click=\"openSlider(index)\"\n\t\t\t\t/>\n\t\t\t\t<br>\n\t\t\t\t<tile-label-block class=\"salescenter-app-payment-by-sms-item-container-payment-item-text-add\"\n\t\t\t\t\tv-if=\"hasTileOfferFromCollection() === true\"\n\t\t\t\t\t:name=\"getTileOfferFromCollection().tile.name\"\n\t\t\t\t\tv-on:tile-label-on-click=\"openSlider(getTileOfferFromCollection().index)\"\n\t\t\t\t/>\n\t\t\t\t<tile-label-block class=\"salescenter-app-payment-by-sms-item-container-payment-item-text-add\"\n\t\t\t\t\tv-if=\"hasTileMoreFromCollection() === true\"\n\t\t\t\t\t:name=\"getTileMoreFromCollection().tile.name\"\n\t\t\t\t\tv-on:tile-label-on-click=\"openSlider(getTileMoreFromCollection().index)\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t`\n};\nexport {\n\tInstalled\n}","import {StatusTypes as Status} from 'salescenter.component.stage-block';\n\nconst StageMixin = {\n\tcomputed:\n\t\t{\n\t\t\tstatusClassMixin()\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\t'salescenter-app-payment-by-sms-item'\t\t\t: true,\n\t\t\t\t\t'salescenter-app-payment-by-sms-item-current'\t: this.status === Status.current,\n\t\t\t\t\t'salescenter-app-payment-by-sms-item-disabled'\t: this.status === Status.disabled,\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tcontainerClassMixin()\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\t'salescenter-app-payment-by-sms-item-container'\t: true\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tcounterCheckedMixin()\n\t\t\t{\n\t\t\t\treturn this.status === Status.complete\n\t\t\t}\n\t\t},\n\t\tmethods:\n\t\t\t{\n\t\t\t\tonSliderClose(e)\n\t\t\t\t{\n\t\t\t\t\tthis.$emit('on-stage-tile-collection-slider-close', e);\n\t\t\t\t}\n\t\t\t}\n};\n\nexport {\n\tStageMixin\n}","import {Loc} \t\t\t\t\t\t\t\t\tfrom 'main.core';\nimport {Block} \t\t\tfrom 'salescenter.component.stage-block';\nimport {Uninstalled as TileUnInstalled} \t\tfrom \"./tile-collection/uninstalled\";\nimport {Installed as TileInstalled} \t\t\tfrom \"./tile-collection/installed\";\nimport {StageMixin} \t\t\t\t\t\t\tfrom \"./stage-mixin\";\n\nconst Cashbox = {\n\tprops: {\n\t\tstatus: {\n\t\t\ttype: String,\n\t\t\t\trequired: true\n\t\t},\n\t\tcounter: {\n\t\t\ttype: Number,\n\t\t\t\trequired: true\n\t\t},\n\t\ttiles: {\n\t\t\ttype: Array,\n\t\t\t\trequired: true\n\t\t},\n\t\tinstalled: {\n\t\t\ttype: Boolean,\n\t\t\t\trequired: true\n\t\t},\n\t\ttitleItems: {\n\t\t\ttype: Array\n\t\t},\n\t\tinitialCollapseState: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true\n\t\t},\n\t},\n\tmixins:[StageMixin],\n\tcomponents:\n\t{\n\t\t'stage-block-item'\t\t\t\t\t:\tBlock,\n\t\t'tile-collection-installed-block'\t:\tTileInstalled,\n\t\t'tile-collection-uninstalled-block'\t:\tTileUnInstalled\n\t},\n\tcomputed:\n\t{\n\t\tstatusClass()\n\t\t{\n\t\t\treturn {\n\t\t\t\t'salescenter-app-payment-by-sms-item-disabled-bg': this.installed === false\n\t\t\t}\n\t\t},\n\n\t\ttitle()\n\t\t{\n\t\t\treturn this.installed === true\n\t\t\t\t? Loc.getMessage('SALESCENTER_CASHBOX_SET_BLOCK_TITLE')\n\t\t\t\t: Loc.getMessage('SALESCENTER_CASHBOX_BLOCK_TITLE');\n\t\t},\n\t\tconfigForBlock()\n\t\t{\n\t\t\treturn {\n\t\t\t\tcounter: this.counter,\n\t\t\t\ttitleItems: this.installed ? this.titleItems : [],\n\t\t\t\tinstalled: this.installed,\n\t\t\t\tcollapsible: true,\n\t\t\t\tchecked: this.counterCheckedMixin,\n\t\t\t\tshowHint: !this.installed,\n\t\t\t\tinitialCollapseState: this.initialCollapseState,\n\t\t\t}\n\t\t}\n\t},\n\tmethods:\n\t{\n\t\tonItemHint(e)\n\t\t{\n\t\t\tBX.Salescenter.Manager.openHowToConfigCashBox(e);\n\t\t},\n\t\tsaveCollapsedOption(option)\n\t\t{\n\t\t\tthis.$emit('on-save-collapsed-option', 'cashbox', option);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<stage-block-item\n\t\t\t:class=\"[statusClassMixin, statusClass]\"\n\t\t\t:config=\"configForBlock\"\n\t\t\t@on-item-hint.stop.prevent=\"onItemHint\"\n\t\t\t@on-tile-slider-close=\"onSliderClose\"\n\t\t\t@on-adjust-collapsed=\"saveCollapsedOption\"\n\t\t>\n\t\t\t<template v-slot:block-title-title>{{title}}</template>\n\t\t\t<template v-slot:block-hint-title>${Loc.getMessage('SALESCENTER_CASHBOX_BLOCK_SETTINGS_TITLE')}</template>\n\t\t\t<template v-slot:block-container>\n\t\t\t\t<div :class=\"containerClassMixin\">\n\t\t\t\t\t<tile-collection-uninstalled-block \t:tiles=\"tiles\" v-if=\"!installed\"/>\n\t\t\t\t\t<tile-collection-installed-block :tiles=\"tiles\" v-on:on-tile-slider-close=\"onSliderClose\" v-else />\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</stage-block-item>\n\t`\n};\n\nexport\n{\n\tCashbox\n}","import {FormMode, ProductForm} from 'catalog.product-form';\nimport 'currency';\nimport {MixinTemplatesType} from './components/templates-type-mixin';\nimport {Runtime, Type, Text} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\nimport type {BaseEvent} from 'main.core.events';\nimport {Loc} from 'main.core';\n\nexport default {\n\tmixins:[MixinTemplatesType],\n\tmounted()\n\t{\n\t\tconst editable = this.$root.$app.options.templateMode !== 'view';\n\t\tconst isCompilationMode = this.$root.$app.compilation !== null;\n\n\t\tthis.$root.$emit(\"on-change-editable\", editable);\n\t\tif (this.productForm)\n\t\t{\n\t\t\tthis.productForm.setEditable(editable, isCompilationMode);\n\t\t}\n\n\t\tif (this.productForm)\n\t\t{\n\t\t\tconst formWrapper = this.$root.$el.querySelector('.salescenter-app-form-wrapper');\n\t\t\tformWrapper.appendChild(this.productForm.layout());\n\t\t}\n\t},\n\tcreated()\n\t{\n\t\tthis.refreshId = null;\n\n\t\tconst defaultCurrency = this.$root.$app.options.currencyCode || '';\n\n\t\tthis.$store.dispatch('orderCreation/setCurrency', defaultCurrency);\n\t\tif (Type.isArray(this.$root.$app.options.basket))\n\t\t{\n\t\t\tconst fields = [];\n\t\t\tthis.$root.$app.options.basket.forEach((item) => {\n\t\t\t\tfields.push(item.fields);\n\t\t\t});\n\t\t\tthis.$store.commit('orderCreation/setBasket', fields);\n\t\t}\n\t\tif (Type.isObject(this.$root.$app.options.totals))\n\t\t{\n\t\t\tthis.$store.commit('orderCreation/setTotal', this.$root.$app.options.totals);\n\t\t}\n\n\t\tthis.productForm = new ProductForm(\n\t\t\t{\n\t\t\t\tcurrencySymbol: this.$root.$app.options.currencySymbol,\n\t\t\t\tcurrency: defaultCurrency,\n\t\t\t\tiblockId: this.$root.$app.options.catalogIblockId,\n\t\t\t\tbasePriceId: this.$root.$app.options.basePriceId,\n\t\t\t\tbasket: Type.isArray(this.$root.$app.options.basket) ? this.$root.$app.options.basket : [],\n\t\t\t\ttotals: this.$root.$app.options.totals,\n\t\t\t\ttaxList: this.$root.$app.options.vatList,\n\t\t\t\tmeasures: this.$root.$app.options.measures,\n\t\t\t\tshowDiscountBlock: this.$root.$app.options.showProductDiscounts,\n\t\t\t\tshowTaxBlock: this.$root.$app.options.showProductTaxes,\n\t\t\t\ttotalResultLabel: this.$root.$app.options.mode === 'delivery' ? Loc.getMessage('SALESCENTER_SHIPMENT_PRODUCT_BLOCK_TOTAL') : null,\n\t\t\t\turlBuilderContext: this.$root.$app.options.urlProductBuilderContext,\n\t\t\t\tisCatalogPriceEditEnabled: this.$root.$app.options.isCatalogPriceEditEnabled,\n\t\t\t\tisCatalogDiscountSetEnabled: this.$root.$app.options.isCatalogDiscountSetEnabled,\n\t\t\t\tfieldHints: this.$root.$app.options.fieldHints,\n\t\t\t\thideUnselectedProperties: (this.$root.$app.options.templateMode === 'view'),\n\t\t\t\tshowCompilationModeSwitcher: (\n\t\t\t\t\tthis.$root.$app.options.templateMode === 'create'\n\t\t\t\t\t&& this.$root.$app.options.showCompilationModeSwitcher === 'Y'\n\t\t\t\t\t&& this.$root.$app.options.mode === 'payment_delivery'\n\t\t\t\t),\n\t\t\t\tcompilationFormType: this.$root.$app.connector === 'facebook' && this.$root.$app.isAllowedFacebookRegion ? 'FACEBOOK' : 'REGULAR',\n\t\t\t\tfacebookFailProducts: this.$root.$app.compilation?.FAIL_PRODUCTS,\n\t\t\t\townerId: this.$root.$app.options.ownerId,\n\t\t\t\townerTypeId: this.$root.$app.options.ownerTypeId,\n\t\t\t\tdialogId: this.$root.$app.options.dialogId,\n\t\t\t\tsessionId: this.$root.$app.options.sessionId,\n\t\t\t\tisShortProductViewFormat: true,\n\t\t\t}\n\t\t);\n\n\t\tthis.checkProductErrors();\n\n\t\tEventEmitter.subscribe(\n\t\t\tthis.productForm,\n\t\t\t'ProductForm:onBasketChange',\n\t\t\tRuntime.debounce(this.onBasketChange, 500, this)\n\t\t);\n\n\t\tEventEmitter.subscribe(\n\t\t\tthis.productForm,\n\t\t\t'ProductForm:onErrorsChange',\n\t\t\tRuntime.debounce(this.checkProductErrors, 500, this)\n\t\t);\n\n\t\tEventEmitter.subscribe(\n\t\t\tthis.productForm,\n\t\t\t'ProductForm:onModeChange',\n\t\t\tthis.onProductFormModeChange\n\t\t);\n\n\t\tEventEmitter.subscribe(\n\t\t\tthis.productForm,\n\t\t\t'ProductForm:onCompilationCreated',\n\t\t\tthis.onProductFormCompilationCreated.bind(this),\n\t\t);\n\t},\n\tmethods: {\n\t\tonProductFormCompilationCreated(event: BaseEvent)\n\t\t{\n\t\t\tconst data = event.getData();\n\t\t\tthis.$root.$app.newCompilationId = data.compilationId;\n\t\t\tthis.$root.$app.ownerId = data.ownerId;\n\t\t\tthis.$root.$app.options.ownerId = data.ownerId;\n\t\t},\n\t\tonProductFormModeChange(event: BaseEvent)\n\t\t{\n\t\t\tconst mode = event.getData().mode;\n\t\t\tif (mode === FormMode.COMPILATION || mode === FormMode.COMPILATION_READ_ONLY)\n\t\t\t{\n\t\t\t\tthis.$store.commit('orderCreation/enableCompilationMode');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.$store.commit('orderCreation/disableCompilationMode');\n\t\t\t}\n\t\t\tthis.$emit('on-product-form-mode-change');\n\t\t},\n\t\tonBasketChange(event: BaseEvent)\n\t\t{\n\t\t\tlet processRefreshRequest = (data) => {\n\t\t\t\tif (this.productForm)\n\t\t\t\t{\n\t\t\t\t\tconst preparedBasket = [];\n\t\t\t\t\tdata.basket.forEach((item) => {\n\t\t\t\t\t\tif (!Type.isStringFilled(item.innerId))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tpreparedBasket.push({\n\t\t\t\t\t\t\tselectorId: item.innerId,\n\t\t\t\t\t\t\tfields: item,\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\n\t\t\t\t\tthis.productForm.setData({...data, ...{basket: preparedBasket}});\n\n\t\t\t\t\tif (Type.isArray(data.basket))\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$store.commit('orderCreation/setBasket', data.basket);\n\t\t\t\t\t}\n\t\t\t\t\tif (Type.isObject(data.total))\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$store.commit('orderCreation/setTotal', data.total);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tconst data = event.getData();\n\t\t\tif (!Type.isArray(data.basket))\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst fields = [];\n\t\t\tdata.basket.forEach((item) => {\n\t\t\t\tfields.push(item.fields);\n\t\t\t});\n\t\t\tthis.$store.commit('orderCreation/setBasket', fields);\n\n\t\t\tif (this.$root.$app.newCompilationId)\n\t\t\t{\n\t\t\t\tthis.changeCompilationProducts();\n\t\t\t}\n\n\t\t\tif (this.isNeedDisableSubmit())\n\t\t\t{\n\t\t\t\tthis.$store.commit('orderCreation/disableSubmit');\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.$store.commit('orderCreation/enableSubmit');\n\n\t\t\tconst requestId = Text.getRandom(20);\n\t\t\tthis.refreshId = requestId;\n\t\t\tBX.ajax.runAction(\n\t\t\t\t\"salescenter.api.order.refreshBasket\",\n\t\t\t\t{\n\t\t\t\t\tdata: {\n\t\t\t\t\t\torderId : this.$root.$app.orderId,\n\t\t\t\t\t\tbasketItems: fields\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t)\n\t\t\t\t.then((result) => {\n\t\t\t\t\tif (this.refreshId !== requestId)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst data = BX.prop.getObject(result,\"data\", {});\n\t\t\t\t\tprocessRefreshRequest({\n\t\t\t\t\t\ttotal: BX.prop.getObject(\n\t\t\t\t\t\t\tdata,\n\t\t\t\t\t\t\t\"total\",\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tdiscount: 0,\n\t\t\t\t\t\t\t\tresult: 0,\n\t\t\t\t\t\t\t\tsum: 0,\n\t\t\t\t\t\t\t\t//resultNumeric: 0,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t),\n\t\t\t\t\t\tbasket: BX.prop.get(data,\"items\",[])\n\t\t\t\t\t});\n\t\t\t\t})\n\t\t\t\t.catch((result) => {\n\t\t\t\t\tconst data = BX.prop.getObject(result,\"data\", {});\n\t\t\t\t\tprocessRefreshRequest({\n\t\t\t\t\t\terrors: BX.prop.get(result,\"errors\", []),\n\t\t\t\t\t\tbasket: BX.prop.get(data,\"items\",[])\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t},\n\t\tchangeCompilationProducts()\n\t\t{\n\t\t\tconst basketItems = this.$store.getters['orderCreation/getBasket']();\n\t\t\tconst productIds = basketItems.map((basketItem) => {\n\t\t\t\treturn basketItem.skuId;\n\t\t\t});\n\t\t\tconst compilationId =\n\t\t\t\tthis.$root.$app.compilation\n\t\t\t\t\t? this.$root.$app.compilation.ID\n\t\t\t\t\t: this.$root.$app.newCompilationId\n\t\t\t;\n\t\t\tif (compilationId)\n\t\t\t{\n\t\t\t\tBX.ajax.runAction(\n\t\t\t\t\t'salescenter.compilation.updateCompilation',\n\t\t\t\t\t{\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tcompilationId,\n\t\t\t\t\t\t\tproductIds,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t}\n\t\t},\n\t\tcheckProductErrors()\n\t\t{\n\t\t\tif (this.isNeedDisableSubmit())\n\t\t\t{\n\t\t\t\tthis.$store.commit('orderCreation/disableSubmit');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.$store.commit('orderCreation/enableSubmit')\n\t\t\t}\n\t\t},\n\t\tisNeedDisableSubmit()\n\t\t{\n\t\t\tconst basket = this.$store.getters['orderCreation/getBasket']();\n\n\t\t\tif (\n\t\t\t\tbasket.length <= 0\n\t\t\t\t//|| !this.$root.$app.hasClientContactInfo()\n\t\t\t\t|| (this.productForm && Type.isFunction(this.productForm.hasErrors) && this.productForm.hasErrors())\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tconst filledProducts = basket.filter((item) => {\n\t\t\t\treturn (Type.isStringFilled(item.module) && item.productId > 0);\n\t\t\t});\n\n\t\t\treturn filledProducts.length <= 0;\n\t\t}\n\t},\n\ttemplate: `\n\t\t<div class=\"salescenter-app-payment-side\">\n\t\t\t<div class=\"salescenter-app-page-content\">\n\t\t\t\t<div class=\"salescenter-app-form-wrapper\"></div>\n\t\t\t\t<slot name=\"footer\"></slot>\n\t\t\t</div>\n\t\t</div>\n\t`,\n}\n","import {Block} from 'salescenter.component.stage-block';\nimport Product from '../../product';\nimport {StageMixin} from './stage-mixin';\n\nexport default {\n\tprops: {\n\t\tstatus: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\tcounter: {\n\t\t\ttype: Number,\n\t\t\trequired: true\n\t\t},\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\thintTitle: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t},\n\tmixins:[StageMixin],\n\tcomponents:\n\t\t{\n\t\t\t'stage-block-item':\tBlock,\n\t\t\t'product':\tProduct,\n\t\t},\n\tmethods:\n\t\t{\n\t\t\tonItemHint(e)\n\t\t\t{\n\t\t\t\tBX.Salescenter.Manager.openHowToSell(e);\n\t\t\t},\n\t\t\tonProductFormModeChange(event)\n\t\t\t{\n\t\t\t\tthis.$emit('on-product-form-mode-change');\n\t\t\t}\n\t\t},\n\tcomputed:\n\t\t{\n\t\t\tconfigForBlock()\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\tcounter: this.counter,\n\t\t\t\t\tchecked: this.counterCheckedMixin,\n\t\t\t\t\tshowHint: true,\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\ttemplate: `\n\t\t<stage-block-item\n\t\t\t@on-item-hint.stop.prevent=\"onItemHint\"\n\t\t\t:config=\"configForBlock\"\n\t\t\t:class=\"statusClassMixin\"\n\t\t>\n\t\t\t<template v-slot:block-title-title>{{title}}</template>\n\t\t\t<template v-slot:block-hint-title>{{hintTitle}}</template>\n\t\t\t<template v-slot:block-container>\n\t\t\t\t<div :class=\"containerClassMixin\">\n\t\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container-payment\">\n\t\t\t\t\t\t<product\n\t\t\t\t\t\t@on-product-form-mode-change=\"onProductFormModeChange\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</stage-block-item>\n\t`\n}\n","import {Vuex} from 'ui.vue.vuex';\nimport {Vue} from 'ui.vue';\nimport {ajax, Loc} from 'main.core';\nimport DeliverySelector from 'salescenter.deliveryselector';\n\nexport default {\n\tprops: {\n\t\tconfig: {type: Object, required: true}\n\t},\n\tcomponents: {\n\t\t'delivery-selector': DeliverySelector,\n\t},\n\tdata()\n\t{\n\t\treturn {\n\t\t\tavailableServices: [],\n\t\t};\n\t},\n\tmethods: {\n\t\tonChange(payload)\n\t\t{\n\t\t\tthis.$store.dispatch('orderCreation/setDelivery', payload.deliveryPrice);\n\n\t\t\tthis.$store.dispatch(\n\t\t\t\t'orderCreation/setDeliveryId',\n\t\t\t\tpayload.deliveryServiceId\n\t\t\t);\n\t\t\tthis.$store.dispatch(\n\t\t\t\t'orderCreation/setPropertyValues',\n\t\t\t\tpayload.relatedPropsValues\n\t\t\t);\n\t\t\tthis.$store.dispatch(\n\t\t\t\t'orderCreation/setDeliveryExtraServicesValues',\n\t\t\t\tpayload.relatedServicesValues\n\t\t\t);\n\t\t\tthis.$store.dispatch(\n\t\t\t\t'orderCreation/setExpectedDelivery',\n\t\t\t\tpayload.estimatedDeliveryPrice\n\t\t\t);\n\t\t\tthis.$store.dispatch(\n\t\t\t\t'orderCreation/setDeliveryResponsibleId',\n\t\t\t\tpayload.responsibleUser ? payload.responsibleUser.id : null\n\t\t\t);\n\n\t\t\tthis.$emit('change', payload);\n\t\t},\n\t\tonAddressFromChanged()\n\t\t{\n\t\t\tthis.refreshAvailableServices();\n\t\t},\n\t\tonDeliveryServiceChanged()\n\t\t{\n\t\t\tthis.refreshAvailableServices();\n\t\t},\n\t\tonSettingsChanged()\n\t\t{\n\t\t\tthis.$emit('delivery-settings-changed');\n\t\t},\n\t\trefreshAvailableServices()\n\t\t{\n\t\t\tajax.runAction(\n\t\t\t\t'salescenter.order.getCompatibleDeliverySystems',\n\t\t\t\t{\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tbasketItems: this.config.basket ? this.config.basket : [],\n\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\tsessionId: this.config.sessionId,\n\t\t\t\t\t\t\townerTypeId: this.config.ownerTypeId,\n\t\t\t\t\t\t\townerId: this.config.ownerId,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdeliveryServiceId: this.order.deliveryId,\n\t\t\t\t\t\tshipmentPropValues: this.order.propertyValues,\n\t\t\t\t\t\tdeliveryRelatedServiceValues: this.order.deliveryExtraServicesValues,\n\t\t\t\t\t\tdeliveryResponsibleId: this.order.deliveryResponsibleId,\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t).then((result) => {\n\t\t\t\tlet data = BX.prop.getObject(result, \"data\", {});\n\t\t\t\tthis.availableServices = data.availableServices ? data.availableServices : {};\n\t\t\t}).catch((result) => {\n\t\t\t\tthis.availableServices = {};\n\t\t\t});\n\t\t}\n\t},\n\tcreated()\n\t{\n\t\tthis.$store.dispatch('orderCreation/setPersonTypeId', this.config.personTypeId);\n\n\t\tthis.refreshAvailableServices();\n\t},\n\n\tcomputed: {\n\t\tlocalize()\n\t\t{\n\t\t\treturn Vue.getFilteredPhrases('SALESCENTER_');\n\t\t},\n\t\tsumTitle()\n\t\t{\n\t\t\treturn Loc.getMessage('SALESCENTER_PRODUCT_PRODUCTS_PRICE');\n\t\t},\n\t\tproductsPrice()\n\t\t{\n\t\t\treturn this.order.total.result;\n\t\t},\n\t\tdelivery()\n\t\t{\n\t\t\treturn this.order.delivery;\n\t\t},\n\t\tdeliveryFormatted()\n\t\t{\n\t\t\tif (this.isDeliveryCalculated)\n\t\t\t{\n\t\t\t\treturn BX.Currency.currencyFormat(this.delivery, this.config.currency, false);\n\t\t\t}\n\n\t\t},\n\t\ttotal()\n\t\t{\n\t\t\tif (this.productsPrice === null || this.delivery === null)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn this.productsPrice + this.delivery;\n\t\t},\n\t\ttotalFormatted()\n\t\t{\n\t\t\treturn BX.Currency.currencyFormat(this.total, this.config.currency, false);\n\t\t},\n\t\tisDeliveryCalculated()\n\t\t{\n\t\t\treturn (this.order.delivery !== null);\n\t\t},\n\t\texcludedServiceIds()\n\t\t{\n\t\t\treturn this.$root.$app.options.mode === 'delivery' ? [this.$root.$app.options.emptyDeliveryServiceId] : [];\n\t\t},\n\t\tactionData()\n\t\t{\n\t\t\treturn {\n\t\t\t\tbasketItems: this.config.basket,\n\t\t\t\toptions: {\n\t\t\t\t\torderId : this.$root.$app.orderId,\n\t\t\t\t\tsessionId: this.config.sessionId,\n\t\t\t\t\townerTypeId: this.config.ownerTypeId,\n\t\t\t\t\townerId: this.config.ownerId,\n\t\t\t\t},\n\t\t\t};\n\t\t},\n\t\t...Vuex.mapState({\n\t\t\torder: state => state.orderCreation,\n\t\t}),\n\t},\n\ttemplate: `\n\t\t<delivery-selector\n\t\t\t:available-services=\"availableServices\"\n\t\t\t:excluded-service-ids=\"excludedServiceIds\"\t\t\t\t\n\t\t\t:init-entered-delivery-price=\"config.deliveryPrice\"\n\t\t\t:init-delivery-service-id=\"config.deliveryServiceId\"\n\t\t\t:init-related-services-values=\"config.relatedServicesValues\"\n\t\t\t:init-related-props-values=\"config.relatedPropsValues\"\n\t\t\t:init-related-props-options=\"config.relatedPropsOptions\"\n\t\t\t:init-responsible-id=\"config.responsibleId\"\n\t\t\t:person-type-id=\"config.personTypeId\"\n\t\t\t:action=\"'salescenter.api.order.refreshDelivery'\"\n\t\t\t:action-data=\"actionData\"\n\t\t\t:external-sum=\"productsPrice\"\n\t\t\t:external-sum-label=\"sumTitle\"\n\t\t\t:currency=\"config.currency\"\n\t\t\t:currency-symbol=\"config.currencySymbol\"\n\t\t\t@change=\"onChange\"\n\t\t\t@address-from-changed=\"onAddressFromChanged\"\n\t\t\t@delivery-service-changed=\"onDeliveryServiceChanged\"\n\t\t\t@settings-changed=\"onSettingsChanged\"\n\t\t></delivery-selector>\n\t`\n};\n","import 'ui.fonts.ruble';\nimport 'currency';\nimport {ajax, Loc, Type} from 'main.core';\n\nexport default {\n\tprops: {\n\t\tid: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\tproductsPrice: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata()\n\t{\n\t\treturn {\n\t\t\tshipment: {\n\t\t\t\tpriceDelivery: null,\n\t\t\t\tbasePriceDelivery: null,\n\t\t\t\tcurrency: null,\n\t\t\t\tdeliveryService: {\n\t\t\t\t\tname: null,\n\t\t\t\t\tlogo: null,\n\t\t\t\t\tparent: {\n\t\t\t\t\t\tname: null,\n\t\t\t\t\t\tlogo: null,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\textraServices: [],\n\t\t\t\trequestProperties: [],\n\t\t\t},\n\t\t\tcanUserPerformCalls: false,\n\t\t};\n\t},\n\tcreated()\n\t{\n\t\tajax.runAction(\n\t\t\t'salescenter.deliveryselector.getShipmentData',\n\t\t\t{data: {\n\t\t\t\t\tid: this.id\n\t\t\t\t}}\n\t\t).then((result) => {\n\t\t\tthis.shipment = result.data.shipment;\n\t\t\tthis.canUserPerformCalls = result.data.canUserPerformCalls;\n\t\t});\n\t},\n\tmethods: {\n\t\tgetFormattedPrice(price)\n\t\t{\n\t\t\treturn BX.Currency.currencyFormat(price, this.currency, true);\n\t\t},\n\t\tisPhoneRequestProperty(property)\n\t\t{\n\t\t\tif (!Type.isArray(property.tags))\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn property.tags.includes('phone');\n\t\t},\n\t\tmakeCall(phoneNumber)\n\t\t{\n\t\t\tif (\n\t\t\t\t!Type.isUndefined(window.top['BXIM'])\n\t\t\t\t&& this.canUserPerformCalls === true\n\t\t\t)\n\t\t\t{\n\t\t\t\twindow.top['BXIM'].phoneTo(phoneNumber);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\twindow.open('tel:' + phoneNumber, '_self');\n\t\t\t}\n\t\t},\n\t},\n\tcomputed: {\n\t\thasParent()\n\t\t{\n\t\t\treturn (\n\t\t\t\tthis.shipment.hasOwnProperty('deliveryService')\n\t\t\t\t&& this.shipment.deliveryService.hasOwnProperty('parent')\n\t\t\t\t&& this.shipment.deliveryService.parent\n\t\t\t);\n\t\t},\n\t\tdeliveryServiceLogo()\n\t\t{\n\t\t\treturn this.shipment.deliveryService.logo ? this.shipment.deliveryService.logo : null;\n\t\t},\n\t\tdeliveryServiceProfileLogo()\n\t\t{\n\t\t\treturn (this.hasParent && this.shipment.deliveryService.parent.logo)\n\t\t\t\t? this.shipment.deliveryService.parent.logo\n\t\t\t\t: null;\n\t\t},\n\t\tpaymentPrice()\n\t\t{\n\t\t\treturn this.productsPrice + this.priceDelivery;\n\t\t},\n\t\tdeliveryServiceName()\n\t\t{\n\t\t\treturn this.hasParent ? this.shipment.deliveryService.parent.name : this.shipment.deliveryService.name;\n\t\t},\n\t\tdeliveryServiceProfileName()\n\t\t{\n\t\t\treturn this.hasParent ? this.shipment.deliveryService.name : null;\n\t\t},\n\t\tpriceDelivery()\n\t\t{\n\t\t\treturn this.shipment ? this.shipment.priceDelivery : null;\n\t\t},\n\t\tcurrency()\n\t\t{\n\t\t\treturn this.shipment ? this.shipment.currency : null;\n\t\t},\n\t\textraServices()\n\t\t{\n\t\t\treturn Type.isArray(this.shipment.extraServices) ? this.shipment.extraServices : [];\n\t\t},\n\t\tisExtraServicesVisible()\n\t\t{\n\t\t\treturn this.extraServices.length > 0;\n\t\t},\n\t\trequestProperties()\n\t\t{\n\t\t\treturn Type.isArray(this.shipment.requestProperties) ? this.shipment.requestProperties : [];\n\t\t},\n\t\tisRequestPropertiesVisible()\n\t\t{\n\t\t\treturn this.requestProperties.length > 0;\n\t\t},\n\t\tpriceDeliveryFormatted()\n\t\t{\n\t\t\treturn this.getFormattedPrice(this.priceDelivery);\n\t\t},\n\t\tproductsPriceFormatted()\n\t\t{\n\t\t\treturn this.getFormattedPrice(this.productsPrice);\n\t\t},\n\t\tpaymentPriceFormatted()\n\t\t{\n\t\t\treturn this.getFormattedPrice(this.paymentPrice);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div style=\"width: 100%;\" xmlns=\"http://www.w3.org/1999/html\">\n\t\t\t<div class=\"salescenter-delivery-selector-head\">\n\t\t\t\t<div\n\t\t\t\t\tv-if=\"hasParent && deliveryServiceLogo\"\n\t\t\t\t\t:style=\"{ backgroundImage: 'url(' + deliveryServiceLogo + ')' }\"\n\t\t\t\t\tclass=\"salescenter-delivery-selector-logo\"\n\t\t\t\t>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"salescenter-delivery-selector-info\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tv-if=\"deliveryServiceProfileLogo\"\n\t\t\t\t\t\t:style=\"{ backgroundImage: 'url(' + deliveryServiceProfileLogo + ')' }\"\n\t\t\t\t\t\tclass=\"salescenter-delivery-selector-logo\"\n\t\t\t\t\t>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"salescenter-delivery-selector-content\">\n\t\t\t\t\t\t<div class=\"salescenter-delivery-selector-text-light\">{{deliveryServiceName}}</div>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tv-if=\"deliveryServiceProfileName\"\n\t\t\t\t\t\t\tclass=\"salescenter-delivery-selector-text-dark\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{deliveryServiceProfileName}}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div v-if=\"isExtraServicesVisible\" class=\"salescenter-delivery-selector-main\">\n\t\t\t\t<div class=\"salescenter-delivery-selector-text-light\">\n\t\t\t\t\t${Loc.getMessage('SALESCENTER_SHIPMENT_EXTRA_SERVICES')}:\n\t\t\t\t</div>\n\t\t\t\t<ul class=\"salescenter-delivery-selector-list\">\n\t\t\t\t\t<li\n\t\t\t\t\t\tv-for=\"extraService in extraServices\"\n\t\t\t\t\t\tclass=\"salescenter-delivery-selector-list-item salescenter-delivery-selector-text-dark\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{extraService.name}}: {{extraService.value}} \n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t\t<div v-if=\"isRequestPropertiesVisible\" class=\"salescenter-delivery-selector-main\">\n\t\t\t\t<div class=\"salescenter-delivery-selector-text-light\">\n\t\t\t\t\t${Loc.getMessage('SALESCENTER_DELIVERY_REQUEST_DETAILS')}:\n\t\t\t\t</div>\n\t\t\t\t<ul class=\"salescenter-delivery-selector-list\">\n\t\t\t\t\t<li\n\t\t\t\t\t\tv-for=\"requestProperty in requestProperties\"\n\t\t\t\t\t\tclass=\"salescenter-delivery-selector-list-item salescenter-delivery-selector-text-dark\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{requestProperty.name}}:\n\t\t\t\t\t\t<template v-if=\"isPhoneRequestProperty(requestProperty)\">\n\t\t\t\t\t\t\t<a @click.prevent=\"makeCall(requestProperty.value)\" href=\"#\">{{requestProperty.value}}</a>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t\t{{requestProperty.value}}\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t\t<div class=\"salescenter-delivery-selector-line\"></div>\n\t\t\t<div class=\"catalog-pf-result-wrapper\">\n\t\t\t\t<table class=\"catalog-pf-result\">\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<span class=\"catalog-pf-text\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_PRODUCT_PRODUCTS_PRICE')}:\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</td> \n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<span v-html=\"productsPriceFormatted\" class=\"catalog-pf-text\"></span> \n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td class=\"catalog-pf-result-padding-bottom\">\n\t\t\t\t\t\t\t<span class=\"catalog-pf-text catalog-pf-text--tax\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_SHIPMENT_PRODUCT_BLOCK_DELIVERY_PRICE')}: \n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</td> \n\t\t\t\t\t\t<td class=\"catalog-pf-result-padding-bottom\"> \n\t\t\t\t\t\t\t<span class=\"catalog-pf-text catalog-pf-text--tax\" v-html=\"priceDeliveryFormatted\"></span>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr> \n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td class=\"catalog-pf-result-padding\">\n\t\t\t\t\t\t\t<span class=\"catalog-pf-text catalog-pf-text--total catalog-pf-text--border\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_PRODUCT_TOTAL_RESULT')}: \n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</td> \n\t\t\t\t\t\t<td class=\"catalog-pf-result-padding\">\n\t\t\t\t\t\t\t<span v-html=\"paymentPriceFormatted\" class=\"catalog-pf-text catalog-pf-text--total\"></span> \n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t</table>\n\t\t\t</div>\n\t\t</div>\n\t`\n};\n","import {Vuex} \t\t\t\t\t\t\tfrom 'ui.vue.vuex';\nimport {Loc} \t\t\t\t\t\t\tfrom 'main.core';\nimport {Block} \t\t\tfrom 'salescenter.component.stage-block';\nimport {Uninstalled as TileUnInstalled} from \"./tile-collection/uninstalled\";\nimport DeliverySelector\t\t\t\t\tfrom \"../delivery-selector\";\nimport ShipmentView\t\t\t\t\t\tfrom \"../shipment-view\";\nimport {StageMixin} \t\t\t\t\tfrom \"./stage-mixin\";\nimport {MixinTemplatesType} \t\t\tfrom \"../templates-type-mixin\";\nimport {StatusTypes as Status} from 'salescenter.component.stage-block';\n\nconst DeliveryVuex = {\n\tprops: {\n\t\tstatus: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\tcounter: {\n\t\t\ttype: Number,\n\t\t\trequired: true\n\t\t},\n\t\ttiles: {\n\t\t\ttype: Array,\n\t\t\trequired: true\n\t\t},\n\t\tinstalled: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true\n\t\t},\n\t\tisCollapsible: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true\n\t\t},\n\t\tinitialCollapseState: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true\n\t\t},\n\t},\n\tdata()\n\t{\n\t\treturn {\n\t\t\tselectedDeliveryServiceName: null,\n\t\t}\n\t},\n\tmixins:[StageMixin, MixinTemplatesType],\n\tcomponents:\n\t\t{\n\t\t\t'stage-block-item'\t\t\t\t:\tBlock,\n\t\t\t'delivery-selector-block'\t\t:\tDeliverySelector,\n\t\t\t'shipment-view'\t\t\t\t\t:\tShipmentView,\n\t\t\t'uninstalled-delivery-block'\t:\tTileUnInstalled,\n\t\t},\n\tcomputed:\n\t\t{\n\t\t\tstatusClass()\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\t'salescenter-app-payment-by-sms-item-disabled-bg': this.installed === false || this.status === Status.disabled\n\t\t\t\t}\n\t\t\t},\n\t\t\tproductsPrice()\n\t\t\t{\n\t\t\t\treturn this.order.total.result;\n\t\t\t},\n\t\t\tshipmentId()\n\t\t\t{\n\t\t\t\treturn this.$root.$app.options.shipmentId;\n\t\t\t},\n\t\t\tconfigForBlock()\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\tcounter: this.counter,\n\t\t\t\t\ttitleName: this.selectedDeliveryServiceName,\n\t\t\t\t\tinstalled: this.installed,\n\t\t\t\t\tcollapsible: this.isCollapsible,\n\t\t\t\t\tchecked: this.counterCheckedMixin,\n\t\t\t\t\tshowHint: false,\n\t\t\t\t\tinitialCollapseState: this.initialCollapseState,\n\t\t\t\t}\n\t\t\t},\n\t\t\tconfig()\n\t\t\t{\n\t\t\t\tlet deliveryServiceId = null;\n\t\t\t\tif (this.$root.$app.options.hasOwnProperty('shipmentData')\n\t\t\t\t\t&& this.$root.$app.options.shipmentData.hasOwnProperty('deliveryServiceId')\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tdeliveryServiceId = this.$root.$app.options.shipmentData.deliveryServiceId;\n\t\t\t\t}\n\n\t\t\t\tlet deliveryPrice = null;\n\t\t\t\tif (this.$root.$app.options.hasOwnProperty('shipmentData')\n\t\t\t\t\t&& this.$root.$app.options.shipmentData.hasOwnProperty('deliveryPrice')\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tdeliveryPrice = this.$root.$app.options.shipmentData.deliveryPrice;\n\t\t\t\t}\n\n\t\t\t\tlet relatedPropsValues = {};\n\t\t\t\tif (this.$root.$app.options.hasOwnProperty('shipmentData')\n\t\t\t\t\t&& this.$root.$app.options.shipmentData.hasOwnProperty('propValues')\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\trelatedPropsValues = this.$root.$app.options.shipmentData.propValues;\n\t\t\t\t}\n\n\t\t\t\tlet relatedServicesValues = {};\n\t\t\t\tif (this.$root.$app.options.hasOwnProperty('shipmentData')\n\t\t\t\t\t&& this.$root.$app.options.shipmentData.hasOwnProperty('extraServicesValues')\n\t\t\t\t\t&& !Array.isArray(this.$root.$app.options.shipmentData.extraServicesValues)\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\trelatedServicesValues = this.$root.$app.options.shipmentData.extraServicesValues;\n\t\t\t\t}\n\n\t\t\t\tlet relatedPropsOptions = {};\n\t\t\t\tif (this.$root.$app.options.hasOwnProperty('deliveryOrderPropOptions')\n\t\t\t\t\t&& !Array.isArray(this.$root.$app.options.deliveryOrderPropOptions)\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\trelatedPropsOptions = this.$root.$app.options.deliveryOrderPropOptions;\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\tpersonTypeId: this.$root.$app.options.personTypeId,\n\t\t\t\t\tbasket: this.order.basket,\n\t\t\t\t\tcurrencySymbol: this.$root.$app.options.currencySymbol,\n\t\t\t\t\tcurrency: this.order.currency,\n\t\t\t\t\townerTypeId: this.$root.$app.options.ownerTypeId,\n\t\t\t\t\townerId: this.$root.$app.options.ownerId,\n\t\t\t\t\tsessionId: this.$root.$app.options.sessionId,\n\t\t\t\t\trelatedPropsValues,\n\t\t\t\t\trelatedPropsOptions,\n\t\t\t\t\trelatedServicesValues,\n\t\t\t\t\tdeliveryServiceId,\n\t\t\t\t\tresponsibleId: this.$root.$app.options.assignedById,\n\t\t\t\t\tdeliveryPrice,\n\t\t\t\t};\n\t\t\t},\n\t\t\tisViewTemplateMode()\n\t\t\t{\n\t\t\t\treturn this.$root.$app.options.templateMode === 'view';\n\t\t\t},\n\n\t\t\t...Vuex.mapState({\n\t\t\t\torder: state => state.orderCreation\n\t\t\t})\n\t\t},\n\tmethods:{\n\t\tsetTitleName(state)\n\t\t{\n\t\t\tthis.selectedDeliveryServiceName = state.deliveryServiceName;\n\t\t},\n\t\tsaveCollapsedOption(option)\n\t\t{\n\t\t\tthis.$emit('on-save-collapsed-option', 'delivery', option);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<stage-block-item\n\t\t\t:config=\"configForBlock\"\n\t\t\t:class=\"[statusClassMixin, statusClass]\"\n\t\t\t@on-item-hint.stop.prevent=\"onItemHint\"\n\t\t\t@on-adjust-collapsed=\"saveCollapsedOption\"\n\t\t>\n\t\t\t<template v-slot:block-title-title>${Loc.getMessage('SALESCENTER_DELIVERY_BLOCK_TITLE')}</template>\n\t\t\t<template v-slot:block-container>\n\t\t\t\t<div :class=\"containerClassMixin\">\n\t\t\t\t\t<template v-if=\"!installed\">\n\t\t\t\t\t\t<uninstalled-delivery-block :tiles=\"tiles\" \n\t\t\t\t\t\t\t\tv-on:on-tile-slider-close=\"onSliderClose\"/>\n\t\t\t\t\t</template>\n\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container-select\">\n\t\t\t\t\t\t\t<shipment-view\n\t\t\t\t\t\t\t\tv-if=\"isViewTemplateMode\"\n\t\t\t\t\t\t\t\t:id=\"shipmentId\"\n\t\t\t\t\t\t\t\t:productsPrice=\"productsPrice\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t</shipment-view>\n\t\t\t\t\t\t\t<delivery-selector-block v-else\n\t\t\t\t\t\t\t\t:config=\"config\" \n\t\t\t\t\t\t\t\t@delivery-settings-changed=\"onSliderClose\"\n\t\t\t\t\t\t\t\t@change=\"setTitleName\" \n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</template>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</stage-block-item>\n\t`\n};\n\nexport {\n\tDeliveryVuex\n}","import {Loc} \t\t\t\t\t\t\t\tfrom 'main.core';\nimport {Block} \t\t\tfrom 'salescenter.component.stage-block';\nimport {Uninstalled as TileUnInstalled} \tfrom \"./tile-collection/uninstalled\";\nimport {Installed as TileInstalled} \t\tfrom \"./tile-collection/installed\";\nimport {StageMixin} \t\t\t\t\t\tfrom \"./stage-mixin\";\n\nconst PaySystem = {\n\tprops: {\n\t\tstatus: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\tcounter: {\n\t\t\ttype: Number,\n\t\t\trequired: true\n\t\t},\n\t\ttiles: {\n\t\t\ttype: Array,\n\t\t\trequired: true\n\t\t},\n\t\tinstalled: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true\n\t\t},\n\t\ttitleItems: {\n\t\t\ttype: Array\n\t\t},\n\t\tinitialCollapseState: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true\n\t\t},\n\t},\n\tmixins:[StageMixin],\n\tcomponents:\n\t{\n\t\t'stage-block-item'\t\t\t\t\t:\tBlock,\n\t\t'tile-collection-installed-block'\t:\tTileInstalled,\n\t\t'tile-collection-uninstalled-block'\t:\tTileUnInstalled\n\t},\n\tmethods:\n\t{\n\t\tonItemHint(e)\n\t\t{\n\t\t\tBX.Salescenter.Manager.openHowToConfigDefaultPaySystem(e);\n\t\t},\n\t\tsaveCollapsedOption(option)\n\t\t{\n\t\t\tthis.$emit('on-save-collapsed-option', 'pay_system', option);\n\t\t},\n\n\t},\n\tcomputed:\n\t{\n\t\tconfigForBlock()\n\t\t{\n\t\t\treturn {\n\t\t\t\tcounter: this.counter,\n\t\t\t\ttitleItems: this.installed ? this.titleItems : [],\n\t\t\t\tinstalled: this.installed,\n\t\t\t\tcollapsible: true,\n\t\t\t\tchecked: this.counterCheckedMixin,\n\t\t\t\tshowHint: !this.installed,\n\t\t\t\tinitialCollapseState: this.initialCollapseState,\n\t\t\t}\n\t\t},\n\t\tstatusClass()\n\t\t{\n\t\t\treturn {\n\t\t\t\t'salescenter-app-payment-by-sms-item-disabled-bg': this.installed === false\n\t\t\t}\n\t\t},\n\t\ttitle()\n\t\t{\n\t\t\treturn this.installed === true\n\t\t\t\t? Loc.getMessage('SALESCENTER_PAYSYSTEM_SET_BLOCK_TITLE')\n\t\t\t\t: Loc.getMessage('SALESCENTER_PAYSYSTEM_BLOCK_TITLE');\n\t\t}\n\t},\n\n\ttemplate: `\n\t\t<stage-block-item\n\t\t\t:class=\"[statusClassMixin, statusClass]\"\n\t\t\t:config=\"configForBlock\"\n\t\t\t@on-item-hint.stop.prevent=\"onItemHint\"\n\t\t\t@on-tile-slider-close=\"onSliderClose\"\n\t\t\t@on-adjust-collapsed=\"saveCollapsedOption\"\n\t\t>\n\t\t\t<template v-slot:block-title-title>{{title}}</template>\n\t\t\t<template v-slot:block-hint-title>${Loc.getMessage('SALESCENTER_PAYSYSTEM_BLOCK_SETTINGS_TITLE')}</template>\n\t\t\t<template v-slot:block-container>\n\t\t\t\t<div :class=\"containerClassMixin\">\n\t\t\t\t\t<tile-collection-uninstalled-block \t:tiles=\"tiles\" v-if=\"!installed\"/>\n\t\t\t\t\t<tile-collection-installed-block :tiles=\"tiles\" v-on:on-tile-slider-close=\"onSliderClose\" v-else />\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</stage-block-item>\n\t`\n};\nexport {\n\tPaySystem\n}","import {Loc} from 'main.core';\nimport {Block} from 'salescenter.component.stage-block';\nimport {UserAvatar, MessageEditor} from 'salescenter.component.stage-block.sms-message';\nimport {StageMixin} from './stage-mixin';\n\nconst ChatMessage = {\n\tprops: {\n\t\tstatus: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\tcounter: {\n\t\t\ttype: Number,\n\t\t\trequired: true\n\t\t},\n\t\tmanager: {\n\t\t\ttype: Object,\n\t\t\trequired: true\n\t\t},\n\t\ttitleTemplate: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\tshowHint: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true\n\t\t},\n\t\teditorTemplate: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\teditorUrl: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\tselectedMode: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tmixins: [StageMixin],\n\tcomponents: {\n\t\t'stage-block-item':\tBlock,\n\t\t'chat-user-avatar-block': UserAvatar,\n\t\t'chat-message-editor-block': MessageEditor,\n\t},\n\tdata()\n\t{\n\t\treturn {\n\t\t\tcurrentSenderCode: null,\n\t\t\tsenders: [],\n\t\t\tpushedToUseBitrix24Notifications: null,\n\t\t\tsmsSenderListComponentKey: 0,\n\t\t};\n\t},\n\tcomputed: {\n\t\tconfigForBlock()\n\t\t{\n\t\t\treturn {\n\t\t\t\tcounter: this.counter,\n\t\t\t\tchecked: this.counterCheckedMixin,\n\t\t\t\tshowHint: true,\n\t\t\t};\n\t\t},\n\t\teditor()\n\t\t{\n\t\t\treturn {\n\t\t\t\ttemplate: this.editorTemplate,\n\t\t\t\turl: this.editorUrl\n\t\t\t};\n\t\t},\n\t\ttitle()\n\t\t{\n\t\t\treturn this.titleTemplate;\n\t\t},\n\t\tisMessageReadOnly()\n\t\t{\n\t\t\treturn this.$root.$app.context !== 'sms';\n\t\t},\n\t},\n\tcreated() {\n\t},\n\tmethods: {\n\t\tonItemHint(e)\n\t\t{\n\t\t\tBX.Salescenter.Manager.openSlider(this.$root.$app.options.urlSettingsCompanyContacts, {width: 1200} );\n\t\t},\n\t\topenBitrix24NotificationsHelp(event)\n\t\t{\n\t\t\tBX.Salescenter.Manager.openBitrix24NotificationsHelp(event);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<stage-block-item\t\t\t\n\t\t\t:config=\"configForBlock\"\n\t\t\t:class=\"statusClassMixin\"\n\t\t\tv-on:on-item-hint=\"onItemHint\"\n\t\t>\n\t\t\t<template v-slot:block-title-title>{{title}}</template>\n\t\t\t<template\n\t\t\t\tv-if=\"showHint\"\n\t\t\t\tv-slot:block-hint-title\n\t\t\t>\n\t\t\t\t${Loc.getMessage('SALESCENTER_LEFT_PAYMENT_COMPANY_CONTACTS_SHORTER_VERSION')}\n\t\t\t</template>\n\t\t\t<template v-slot:block-container>\n\t\t\t\t<div :class=\"containerClassMixin\" class=\"salescenter-app-payment-by-sms-item-container-offtop\">\n\t\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container-sms\">\n\t\t\t\t\t\t<chat-user-avatar-block :manager=\"manager\"/>\n\t\t\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container-sms-content\">\n\t\t\t\t\t\t\t<chat-message-editor-block :editor=\"editor\" :isReadOnly=\"isMessageReadOnly\" :selectedMode=\"selectedMode\"/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</stage-block-item>\n\t`\n};\nexport {\n\tChatMessage\n};\n","import {Loc} \t\t\t\t\t\t\t\tfrom 'main.core';\nimport {Block} \t\tfrom 'salescenter.component.stage-block';\nimport {StageList} \t\t\t\t\t\t\tfrom 'salescenter.component.stage-block.automation';\nimport * as AutomationStage \t\t\t\tfrom 'salescenter.automation-stage';\nimport {StageMixin} \t\t\t\t\t\tfrom \"./stage-mixin\";\nimport {MixinTemplatesType} \t\t\tfrom \"../templates-type-mixin\";\n\nconst Automation = {\n\tprops: {\n\t\tstatus: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\tcounter: {\n\t\t\ttype: Number,\n\t\t\trequired: true\n\t\t},\n\t\tstageOnOrderPaid: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t},\n\t\tstageOnDeliveryFinished: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t},\n\t\titems: {\n\t\t\ttype: Array,\n\t\t\trequired: true\n\t\t},\n\t\tinitialCollapseState: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true\n\t\t},\n\t},\n\tmixins:[StageMixin, MixinTemplatesType],\n\tdata()\n\t{\n\t\treturn {\n\t\t\tpaymentStages: [],\n\t\t\tshipmentStages: [],\n\t\t}\n\t},\n\tcomponents:\n\t\t{\n\t\t\t'stage-block-item'\t\t\t:\tBlock,\n\t\t\t'stage-item-list'\t\t\t:\tStageList\n\t\t},\n\tmethods:\n\t\t{\n\t\t\tsaveCollapsedOption(option)\n\t\t\t{\n\t\t\t\tthis.$emit('on-save-collapsed-option', 'automation', option);\n\t\t\t},\n\n\t\t\tupdatePaymentStage(e)\n\t\t\t{\n\t\t\t\tlet newStageId = e.data;\n\t\t\t\tthis.paymentStages.forEach((stage) => {\n\t\t\t\t\tstage.selected = stage.id === newStageId;\n\t\t\t\t});\n\n\t\t\t\tthis.$root.$app.stageOnOrderPaid = e.data;\n\t\t\t},\n\n\t\t\tupdateShipmentStage(e)\n\t\t\t{\n\t\t\t\tlet newStageId = e.data;\n\t\t\t\tthis.shipmentStages.forEach((stage) => {\n\t\t\t\t\tstage.selected = stage.id === newStageId;\n\t\t\t\t});\n\n\t\t\t\tthis.$root.$app.stageOnDeliveryFinished = e.data;\n\t\t\t},\n\t\t\tinitStages(stages, currentValue)\n\t\t\t{\n\t\t\t\tObject.values(this.items).forEach(options => {\n\t\t\t\t\toptions.selected = (\n\t\t\t\t\t\t(!currentValue && !options.hasOwnProperty('id'))\n\t\t\t\t\t\t|| (options.id === currentValue)\n\t\t\t\t\t);\n\t\t\t\t\tstages.push(AutomationStage.Factory.create(options));\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\tcomputed:\n\t\t{\n\t\t\tconfigForBlock()\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\tcounter: this.counter,\n\t\t\t\t\tchecked: this.counterCheckedMixin,\n\t\t\t\t\tcollapsible: true,\n\t\t\t\t\tinitialCollapseState: this.initialCollapseState,\n\t\t\t\t\ttitleName: this.selectedStage.name,\n\t\t\t\t}\n\t\t\t},\n\t\t\tselectedStage()\n\t\t\t{\n\t\t\t\tlet stages = this.isPayment ? this.paymentStages : this.shipmentStages;\n\n\t\t\t\treturn stages.find((stage) =>\n\t\t\t\t{\n\t\t\t\t\treturn stage.selected;\n\t\t\t\t});\n\t\t\t},\n\t\t\tisPayment()\n\t\t\t{\n\t\t\t\treturn (\n\t\t\t\t\tthis.$root.$app.options.mode === 'payment_delivery'\n\t\t\t\t\t|| this.$root.$app.options.mode === 'payment'\n\t\t\t\t);\n\t\t\t},\n\t\t\tisHideDeliveryStage()\n\t\t\t{\n\t\t\t\treturn this.$root.$app.options.mode === 'payment';\n\t\t\t}\n\t\t},\n\tcreated()\n\t{\n\t\tif (this.isPayment)\n\t\t{\n\t\t\tthis.initStages(this.paymentStages, this.stageOnOrderPaid);\n\t\t}\n\n\t\tthis.initStages(this.shipmentStages, this.stageOnDeliveryFinished);\n\t},\n\ttemplate: `\n\t\t<stage-block-item\n\t\t\t:config=\"configForBlock\"\n\t\t\t:class=\"statusClassMixin\"\n\t\t\t@on-adjust-collapsed=\"saveCollapsedOption\"\n\t\t>\n\t\t\t<template v-slot:block-title-title>${Loc.getMessage('SALESCENTER_AUTOMATION_BLOCK_TITLE')}</template>\n\t\t\t<template v-slot:block-container>\n\t\t\t\t<div :class=\"containerClassMixin\">\n\t\t\t\t\t<div v-if=\"isPayment\">\n\t\t\t\t\t\t<stage-item-list\n\t\t\t\t\t\t\tv-on:on-choose-select-option=\"updatePaymentStage($event)\"\n\t\t\t\t\t\t\t:stages=\"paymentStages\"\n\t\t\t\t\t\t\t:editable=\"editable\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<template v-slot:stage-list-text>${Loc.getMessage('SALESCENTER_AUTOMATION_BLOCK_TEXT')}</template>\n\t\t\t\t\t\t</stage-item-list>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div v-if=\"!isHideDeliveryStage\">\n\t\t\t\t\t\t<stage-item-list\n\t\t\t\t\t\t\tv-on:on-choose-select-option=\"updateShipmentStage($event)\"\n\t\t\t\t\t\t\t:stages=\"shipmentStages\"\n\t\t\t\t\t\t\t:editable=\"editable\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<template v-slot:stage-list-text>${Loc.getMessage('SALESCENTER_AUTOMATION_DELIVERY_FINISHED')}</template>\n\t\t\t\t\t\t</stage-item-list>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t</template>\n\t\t</stage-block-item>\n\t`\n};\nexport {\n\tAutomation\n}\n","import {Loc} from 'main.core';\n\nexport default {\n\tprops: {\n\t\tbuttonLabel: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tbuttonEnabled: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t\tshowWhatClientSeesControl: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t\tisFacebookForm: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tcomputed: {\n\t\tbuttonClass()\n\t\t{\n\t\t\treturn {'salescenter-app-payment-by-sms-item-disabled': this.buttonEnabled === false};\n\t\t},\n\t\tshowSubmitCompilationLinkToFacebookButton()\n\t\t{\n\t\t\tconst isCompilationMode = this.$store.getters['orderCreation/isCompilationMode'];\n\t\t\treturn this.isFacebookForm && isCompilationMode;\n\t\t},\n\t},\n\tmethods: {\n\t\tshowWhatClientSees(event)\n\t\t{\n\t\t\tBX.Salescenter.Manager.openWhatClientSee(event);\n\t\t},\n\t\tsubmit(event)\n\t\t{\n\t\t\tthis.$emit('on-submit', event);\n\t\t},\n\t\tsubmitCompilationLinkToFacebook(event)\n\t\t{\n\t\t\tthis.$emit('on-submit-compilation-link-to-facebook', event);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div\n\t\t\t:class=\"buttonClass\"\n\t\t\tclass=\"salescenter-app-payment-by-sms-item-show salescenter-app-payment-by-sms-item salescenter-app-payment-by-sms-item-send\"\n\t\t>\n\t\t\t<div class=\"salescenter-app-payment-by-sms-item-counter\">\n\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-counter-rounder\"></div>\n\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-counter-line\"></div>\n\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-counter-number\"></div>\n\t\t\t</div>\n\t\t\t<div class=\"\">\n\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container\">\n\t\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container-payment\">\n\t\t\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container-payment-inline\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t@click=\"submit($event)\"\n\t\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-lg ui-btn-success ui-btn-round\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{{buttonLabel}}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tv-if=\"showSubmitCompilationLinkToFacebookButton\"\n\t\t\t\t\t\t\t\t@click=\"submitCompilationLinkToFacebook($event)\"\n\t\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-lg ui-btn-light-border ui-btn-round\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_SEND_COMPILATION_LINK_TO_FACEBOOK')}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tv-if=\"showWhatClientSeesControl\"\n\t\t\t\t\t\t\t\t@click=\"showWhatClientSees\"\n\t\t\t\t\t\t\t\tclass=\"salescenter-app-add-item-link\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_SEND_ORDER_BY_SMS_SENDER_TEMPLATE_WHAT_DOES_CLIENT_SEE')}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`\n}\n","import {\n\tTimeLineItemBlock as Item,\n\tTimeLineItemPaymentBlock as PaymentItem\n} \t\t\t\t\t\t\t\t\t\t\t\tfrom 'salescenter.component.stage-block.timeline';\nimport {Payment} \t\t\t\t\t\t\t\tfrom 'salescenter.timeline';\n\nconst TimeLine = {\n\tprops:{\n\t\ttimelineItems: {\n\t\t\ttype: Array,\n\t\t\trequired: true\n\t\t},\n\t},\n\tcomponents: {\n\t\t'timeline-item-block'\t\t\t: Item,\n\t\t'timeline-item-payment-block'\t: PaymentItem,\n\t},\n\n\tmethods:\n\t\t{\n\t\t\tisPayment(item)\n\t\t\t{\n\t\t\t\treturn item.type === Payment.type();\n\t\t\t}\n\t\t},\n\ttemplate: `\n\t\t<div class=\"salescenter-app-payment-by-sms-timeline\">\n\t\t\t<template v-for=\"(item) in timelineItems\">\n\t\t\t\t<timeline-item-payment-block\t:item=\"item\"\tv-if=\"isPayment(item)\"/>\n\t\t\t\t<timeline-item-block\t\t\t:item=\"item\" \tv-else/>\n\t\t\t</template>\n\t\t</div>\n\t`\n};\n\nexport {\n\tTimeLine,\n}","import {Loc, Uri} from 'main.core';\nimport {StatusTypes as Status} from 'salescenter.component.stage-block';\nimport {MenuManager} from \"main.popup\";\nimport {Manager} from 'salescenter.manager';\nimport {Block} from 'salescenter.component.stage-block';\nimport {StageMixin} from \"./stage-mixin\";\nimport \"ui.icons.disk\";\nimport type {Document, Template} from \"../../app\";\nimport {Vuex} from \"ui.vue.vuex\";\n\nconst DocumentSelector = {\n\tprops: {\n\t\tcounter: {\n\t\t\ttype: Number,\n\t\t\trequired: true\n\t\t},\n\t\ttemplateAddUrl: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t},\n\t},\n\tmixins: [StageMixin],\n\tcomponents: {\n\t\t'stage-block-item':\tBlock,\n\t},\n\tcomputed: {\n\t\tstatus()\n\t\t{\n\t\t\tif (\n\t\t\t\tthis.model\n\t\t\t\t&& (\n\t\t\t\t\tthis.model.templates\n\t\t\t\t\t&& this.model.templates.length\n\t\t\t\t)\n\t\t\t\t|| (\n\t\t\t\t\tthis.model.documents\n\t\t\t\t\t&& this.model.documents.length\n\t\t\t\t)\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn Status.complete;\n\t\t\t}\n\n\t\t\tif(\n\t\t\t\tthis.templateAddUrl\n\t\t\t\t&& this.templateAddUrl.length\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn Status.current;\n\t\t\t}\n\n\t\t\treturn Status.disabled;\n\t\t},\n\t\tconfigForBlock()\n\t\t{\n\t\t\treturn {\n\t\t\t\tcounter: this.counter,\n\t\t\t\ttitleItems: [],\n\t\t\t\tinstalled: true,\n\t\t\t\tcollapsible: false,\n\t\t\t\tchecked: this.counterCheckedMixin,\n\t\t\t\tshowHint: false,\n\t\t\t\tinitialCollapseState: false,\n\t\t\t}\n\t\t},\n\t\tgetDocumentTitle(): ?string\n\t\t{\n\t\t\tconst currentDocument = this.getCurrentDocument();\n\t\t\tif (currentDocument)\n\t\t\t{\n\t\t\t\treturn currentDocument.title;\n\t\t\t}\n\n\t\t\treturn Loc.getMessage('SALESCENTER_DOCUMENT_SELECTOR_BLOCK_CREATE_NEW_TEMPLATE');\n\t\t},\n\t\twithStamps(): string\n\t\t{\n\t\t\tlet isWithStamps = '';\n\t\t\tconst currentDocument = this.getCurrentDocument();\n\t\t\tif (currentDocument)\n\t\t\t{\n\t\t\t\tif(currentDocument.isWithStamps)\n\t\t\t\t{\n\t\t\t\t\tisWithStamps = Loc.getMessage('SALESCENTER_DOCUMENT_SELECTOR_BLOCK_WITH_SIGNS');\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tisWithStamps = Loc.getMessage('SALESCENTER_DOCUMENT_SELECTOR_BLOCK_WITHOUT_SIGNS');\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn isWithStamps;\n\t\t},\n\t\thasData()\n\t\t{\n\t\t\tconst document = this.getCurrentDocument();\n\n\t\t\treturn (document && document.detailUrl);\n\t\t},\n\t\t...Vuex.mapState({\n\t\t\tmodel: state => state.documentSelector,\n\t\t})\n\t},\n\tmethods: {\n\t\thandleDocumentClick({target})\n\t\t{\n\t\t\tif (this.getCurrentDocument() !== null)\n\t\t\t{\n\t\t\t\tthis.openSelectorMenu(target);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.openTemplatesList();\n\t\t\t}\n\t\t},\n\t\topenSelectorMenu(bindElement)\n\t\t{\n\t\t\tMenuManager.show({\n\t\t\t\tid: 'payment-document-selector',\n\t\t\t\tbindElement,\n\t\t\t\titems: this.prepareSelectorMenuItems(),\n\t\t\t\tcloseByEsc: true,\n\t\t\t\tcacheable: false,\n\t\t\t});\n\t\t},\n\t\tcloseSelectorMenu()\n\t\t{\n\t\t\tMenuManager.destroy('payment-document-selector');\n\t\t},\n\t\tprepareSelectorMenuItems()\n\t\t{\n\t\t\tconst items = [];\n\t\t\tif (this.model.documents)\n\t\t\t{\n\t\t\t\tfor (const document of this.model.documents)\n\t\t\t\t{\n\t\t\t\t\titems.push({\n\t\t\t\t\t\ttext: document.title,\n\t\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\t\tthis.closeSelectorMenu();\n\t\t\t\t\t\t\tthis.$store.dispatch('documentSelector/setBoundDocumentId', {boundDocumentId: document.id});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst templateListItem = {\n\t\t\t\ttext: Loc.getMessage('SALESCENTER_DOCUMENT_SELECTOR_BLOCK_CREATE_NEW_DOCUMENT'),\n\t\t\t\titems: [],\n\t\t\t};\n\t\t\tif (this.model.templates)\n\t\t\t{\n\t\t\t\tif (items.length > 0)\n\t\t\t\t{\n\t\t\t\t\titems.push({delimiter: true});\n\t\t\t\t}\n\t\t\t\tfor (const template of this.model.templates)\n\t\t\t\t{\n\t\t\t\t\ttemplateListItem.items.push({\n\t\t\t\t\t\ttext: template.title,\n\t\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\t\tthis.closeSelectorMenu();\n\t\t\t\t\t\t\tthis.$store.commit('documentSelector/setSelectedTemplateId', {selectedTemplateId: template.id});\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (this.templateAddUrl)\n\t\t\t{\n\t\t\t\tif (templateListItem.items.length > 0)\n\t\t\t\t{\n\t\t\t\t\ttemplateListItem.items.push({delimiter: true});\n\t\t\t\t}\n\t\t\t\ttemplateListItem.items.push({\n\t\t\t\t\ttext: Loc.getMessage('SALESCENTER_DOCUMENT_SELECTOR_BLOCK_CREATE_NEW_TEMPLATE'),\n\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\tthis.closeSelectorMenu();\n\t\t\t\t\t\tthis.openTemplatesList();\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t\tif (templateListItem.items.length > 0)\n\t\t\t{\n\t\t\t\titems.push(templateListItem);\n\t\t\t}\n\n\t\t\treturn items;\n\t\t},\n\t\topenTemplatesList()\n\t\t{\n\t\t\tManager.openSlider(this.templateAddUrl, {\n\t\t\t\twidth: 930,\n\t\t\t}).then(() => {\n\t\t\t\tthis.$store.dispatch('documentSelector/loadTemplates');\n\t\t\t});\n\t\t},\n\t\thandleEditDocumentClick()\n\t\t{\n\t\t\tconst currentDocument = this.getCurrentDocument();\n\t\t\tif (currentDocument.detailUrl)\n\t\t\t{\n\t\t\t\tManager.openSlider(currentDocument.detailUrl, {\n\t\t\t\t\twidth: 980,\n\t\t\t\t}).then((slider) => {\n\t\t\t\t\tconst document = slider.getData().get('document');\n\t\t\t\t\tif (document)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$store.dispatch('documentSelector/addDocument', {document});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tgetCurrentDocument(): ?Document\n\t\t{\n\t\t\tlet document = null;\n\t\t\tif (this.model.boundDocumentId > 0)\n\t\t\t{\n\t\t\t\tdocument = this.getDocumentById(this.model.boundDocumentId);\n\t\t\t}\n\t\t\tif (!document && this.model.selectedTemplateId > 0)\n\t\t\t{\n\t\t\t\tdocument = this.getStubDocumentByTemplate(this.model.selectedTemplateId);\n\t\t\t}\n\t\t\tif (!document)\n\t\t\t{\n\t\t\t\tconst documents = this.model.documents;\n\t\t\t\tif (documents && documents[0])\n\t\t\t\t{\n\t\t\t\t\tdocument = documents[0];\n\t\t\t\t\tthis.$store.dispatch('documentSelector/setBoundDocumentId', {boundDocumentId: document.id});\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!document)\n\t\t\t{\n\t\t\t\tconst templates = this.model.templates;\n\t\t\t\tif (templates && templates[0])\n\t\t\t\t{\n\t\t\t\t\tdocument = this.getStubDocumentByTemplate(templates[0].id);\n\t\t\t\t\tthis.$store.commit('documentSelector/setSelectedTemplateId', {selectedTemplateId: templates[0].id});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn document;\n\t\t},\n\t\tgetDocumentById(id: number): ?Document\n\t\t{\n\t\t\tfor (const document: Document of this.model.documents)\n\t\t\t{\n\t\t\t\tif (document.id === id)\n\t\t\t\t{\n\t\t\t\t\treturn document;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\t\tgetTemplateById(id: number): ?Template\n\t\t{\n\t\t\tfor (const template: Template of this.model.templates)\n\t\t\t{\n\t\t\t\tif (template.id === id)\n\t\t\t\t{\n\t\t\t\t\treturn template;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\t\tgetStubDocumentByTemplate(templateId: number): ?Document\n\t\t{\n\t\t\tconst template = this.getTemplateById(templateId);\n\t\t\tif (!template)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tconst paymentId = this.$root.$app.options.paymentId || 0;\n\t\t\tlet title = null;\n\t\t\tlet detailUrl = null;\n\t\t\tif (paymentId > 0)\n\t\t\t{\n\t\t\t\ttitle = Loc.getMessage('SALESCENTER_DOCUMENT_SELECTOR_BLOCK_DOCUMENT_NEW_SUFFIX', {\n\t\t\t\t\t'#TITLE#': template.title\n\t\t\t\t});\n\t\t\t\tdetailUrl = Uri.addParam(template.documentCreationUrl, {\n\t\t\t\t\tvalues: {\n\t\t\t\t\t\t_paymentId: paymentId,\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\ttitle = Loc.getMessage('SALESCENTER_DOCUMENT_SELECTOR_BLOCK_DOCUMENT_CREATED_LATER_SUFFIX', {\n\t\t\t\t\t'#TITLE#': template.title\n\t\t\t\t});\n\t\t\t\tdetailUrl = null;\n\t\t\t}\n\t\t\treturn {\n\t\t\t\tid: 0,\n\t\t\t\ttitle,\n\t\t\t\tdetailUrl,\n\t\t\t\tisWithStamps: template.isWithStamps,\n\t\t\t}\n\t\t},\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<stage-block-item\n\t\t\t:class=\"statusClassMixin\"\n\t\t\t:config=\"configForBlock\"\n\t\t>\n\t\t\t<template v-slot:block-title-title>${Loc.getMessage('SALESCENTER_DOCUMENT_SELECTOR_BLOCK_TITLE')}</template>\n\t\t\t<template v-slot:block-container>\n\t\t\t\t<div :class=\"containerClassMixin\">\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t<div class=\"salescenter-app-payment-item-container-document-selector\">\n\t\t\t\t\t\t<div class=\"salescenter-app-payment-item-container-document-selector-selector\">\n\t\t\t\t\t\t\t<div class=\"salescenter-app-payment-item-container-document-selector-selector-file\">\n\t\t\t\t\t\t\t\t<div class=\"ui-icon ui-icon-lg ui-icon-file-pdf\"><i></i></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"salescenter-app-payment-item-container-document-selector-title\">\n\t\t\t\t\t\t\t\t<div \n\t\t\t\t\t\t\t\t\tref=\"selectorNode\"\n\t\t\t\t\t\t\t\t\tclass=\"salescenter-app-payment-item-container-document-selector-title-button\"\n\t\t\t\t\t\t\t\t\t@click=\"handleDocumentClick\"\n\t\t\t\t\t\t\t\t>{{getDocumentTitle}}</div>\n\t\t\t\t\t\t\t\t<div class=\"salescenter-app-payment-item-container-document-selector-title-sign\">{{withStamps}}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tv-if=\"hasData\"\n\t\t\t\t\t\t\tclass=\"salescenter-app-payment-item-container-document-selector-edit\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div \n\t\t\t\t\t\t\t\tclass=\"salescenter-app-payment-item-container-document-selector-edit-button\"\n\t\t\t\t\t\t\t\t@click=\"handleEditDocumentClick\"\n\t\t\t\t\t\t\t>\n                              <svg width=\"14\" height=\"14\" viewBox=\"0 0 14 14\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                                <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M11.4359 0.03479L13.9865 2.61221L4.00879 12.563L1.45822 9.98561L11.4359 0.03479ZM0.0256074 13.6726C0.00148857 13.7639 0.0273302 13.8603 0.0927957 13.9275C0.159984 13.9947 0.25646 14.0205 0.347767 13.9947L3.19896 13.2265L0.793965 10.8223L0.0256074 13.6726Z\" fill=\"#525C69\"/>\n                              </svg>\n                              ${Loc.getMessage('SALESCENTER_RIGHT_ACTION_EDIT')}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</stage-block-item>\n\t`\n};\n\nexport\n{\n\tDocumentSelector\n}","import {Loc} from 'main.core';\nimport {StatusTypes as Status} from 'salescenter.component.stage-block';\nimport * as Tile from 'salescenter.tile';\nimport * as TimeLineItem from 'salescenter.timeline';\nimport {UI} from 'ui.notification';\nimport {MixinTemplatesType} from '../templates-type-mixin';\nimport {Cashbox} from '../stage-blocks/cashbox';\nimport Product from '../stage-blocks/product';\nimport {DeliveryVuex} from '../stage-blocks/delivery-vuex';\nimport {PaySystem} from '../stage-blocks/paysystem';\nimport {ChatMessage} from '../stage-blocks/chat-message';\nimport {Automation} from '../stage-blocks/automation';\nimport {StageMixin} from '../stage-blocks/stage-mixin';\nimport Send from '../deal-receiving-payment/stage-blocks/send';\nimport {TimeLine} from '../stage-blocks/timeline';\nimport {DocumentSelector} from '../stage-blocks/document-selector';\n\nexport default {\n\tcomponents: {\n\t\t'chat-message-block': ChatMessage,\n\t\t'product-block': Product,\n\t\t'paysystem-block': PaySystem,\n\t\t'cashbox-block': Cashbox,\n\t\t'delivery-block': DeliveryVuex,\n\t\t'automation-block': Automation,\n\t\t'send-block': Send,\n\t\t'timeline-block': TimeLine,\n\t\t'document-selector-block': DocumentSelector,\n\t},\n\tdata()\n\t{\n\t\tlet stages = {\n\t\t\tmessage: {\n\t\t\t\tstatus: Status.complete,\n\t\t\t\tmanager: this.$root.$app.options.entityResponsible,\n\t\t\t\ttitleTemplate: Loc.getMessage('SALESCENTER_APP_CHAT_MESSAGE_TITLE'),\n\t\t\t\tshowHint: this.$root.$app.options.templateMode !== 'view',\n\t\t\t\teditorTemplate: this.$root.$app.sendingMethodDesc.text,\n\t\t\t\teditorUrl: this.$root.$app.orderPublicUrl,\n\t\t\t\tselectedMode: 'payment',\n\t\t\t},\n\t\t\tproduct: {\n\t\t\t\tstatus: this.$root.$app.options.basket && this.$root.$app.options.basket.length > 0\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.current,\n\t\t\t\ttitle: this.$root.$app.options.templateMode === 'view'\n\t\t\t\t\t? Loc.getMessage('SALESCENTER_PRODUCT_BLOCK_TITLE_PAYMENT_VIEW')\n\t\t\t\t\t: Loc.getMessage('SALESCENTER_PRODUCT_BLOCK_TITLE_SHORT'),\n\t\t\t\thintTitle: this.$root.$app.options.templateMode === 'view'\n\t\t\t\t\t? ''\n\t\t\t\t\t: Loc.getMessage('SALESCENTER_PRODUCT_SET_BLOCK_TITLE_SHORT'),\n\t\t\t},\n\t\t\tpaysystem: {\n\t\t\t\tstatus: this.$root.$app.options.paySystemList.isSet\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled,\n\t\t\t\ttiles: this.getTileCollection(this.$root.$app.options.paySystemList.items),\n\t\t\t\tinstalled: this.$root.$app.options.paySystemList.isSet,\n\t\t\t\ttitleItems: this.getTitleItems(this.$root.$app.options.paySystemList.items),\n\t\t\t\tinitialCollapseState: this.$root.$app.options.isPaySystemCollapsed\n\t\t\t\t\t? this.$root.$app.options.isPaySystemCollapsed === 'Y'\n\t\t\t\t\t: this.$root.$app.options.paySystemList.isSet,\n\t\t\t},\n\t\t\tcashbox: {},\n\t\t\tautomation: {},\n\t\t\tdocumentSelector: {\n\t\t\t\tstatus: Status.complete,\n\t\t\t},\n\t\t};\n\n\t\tif (this.$root.$app.options.hasOwnProperty('deliveryList'))\n\t\t{\n\t\t\tstages.delivery = {\n\t\t\t\tisHidden: (\n\t\t\t\t\tthis.$root.$app.options.templateMode === 'view'\n\t\t\t\t\t&& parseInt(this.$root.$app.options.shipmentId) <= 0\n\t\t\t\t),\n\t\t\t\tstatus: this.$root.$app.options.deliveryList.isInstalled\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled,\n\t\t\t\ttiles: this.getTileCollection(this.$root.$app.options.deliveryList.items),\n\t\t\t\tinstalled: this.$root.$app.options.deliveryList.isInstalled,\n\t\t\t\tinitialCollapseState: this.$root.$app.options.isDeliveryCollapsed\n\t\t\t\t\t? this.$root.$app.options.isDeliveryCollapsed === 'Y'\n\t\t\t\t\t: this.$root.$app.options.deliveryList.isInstalled,\n\t\t\t};\n\t\t}\n\n\t\tif (this.$root.$app.options.cashboxList.hasOwnProperty('items'))\n\t\t{\n\t\t\tstages.cashbox = {\n\t\t\t\tstatus: this.$root.$app.options.cashboxList.isSet\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled,\n\t\t\t\ttiles: this.getTileCollection(this.$root.$app.options.cashboxList.items),\n\t\t\t\tinstalled: this.$root.$app.options.cashboxList.isSet,\n\t\t\t\ttitleItems: this.getTitleItems(this.$root.$app.options.cashboxList.items),\n\t\t\t\tinitialCollapseState: this.$root.$app.options.isCashboxCollapsed\n\t\t\t\t\t? this.$root.$app.options.isCashboxCollapsed === 'Y'\n\t\t\t\t\t: this.$root.$app.options.cashboxList.isSet,\n\t\t\t};\n\t\t}\n\n\t\tif (this.$root.$app.options.isAutomationAvailable)\n\t\t{\n\t\t\tstages.automation = {\n\t\t\t\tstatus: Status.complete,\n\t\t\t\tstageOnOrderPaid: this.$root.$app.options.stageOnOrderPaid,\n\t\t\t\tstageOnDeliveryFinished: this.$root.$app.options.stageOnDeliveryFinished,\n\t\t\t\titems: this.$root.$app.options.entityStageList,\n\t\t\t\tinitialCollapseState: this.$root.$app.options.isAutomationCollapsed\n\t\t\t\t\t? this.$root.$app.options.isAutomationCollapsed === 'Y'\n\t\t\t\t\t: false,\n\t\t\t};\n\t\t}\n\n\t\tif (this.$root.$app.options.hasOwnProperty('timeline'))\n\t\t{\n\t\t\tstages.timeline = {\n\t\t\t\titems: this.getTimelineCollection(this.$root.$app.options.timeline)\n\t\t\t}\n\t\t}\n\n\t\tif (this.$root.$app.hasOwnProperty('documentSelector'))\n\t\t{\n\t\t\tif (this.$root.$app.documentSelector.templateAddUrl)\n\t\t\t{\n\t\t\t\tstages.documentSelector.templateAddUrl = this.$root.$app.documentSelector.templateAddUrl;\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\tstages: stages,\n\t\t}\n\t},\n\tmixins: [\n\t\tStageMixin,\n\t\tMixinTemplatesType\n\t],\n\tcomputed: {\n\t\tisSendAllowed()\n\t\t{\n\t\t\treturn this.$store.getters['orderCreation/isAllowedSubmit'];\n\t\t},\n\t\thasStageTimeLine()\n\t\t{\n\t\t\treturn this.stages.timeline.hasOwnProperty('items') && this.stages.timeline.items.length > 0;\n\t\t},\n\t\thasStageAutomation()\n\t\t{\n\t\t\treturn this.stages.automation.hasOwnProperty('items');\n\t\t},\n\t\thasStageCashBox()\n\t\t{\n\t\t\treturn this.stages.cashbox.hasOwnProperty('tiles');\n\t\t},\n\t\tsubmitButtonLabel()\n\t\t{\n\t\t\treturn this.editable && !this.$root.$app?.compilation\n\t\t\t\t? Loc.getMessage('SALESCENTER_SEND')\n\t\t\t\t: Loc.getMessage('SALESCENTER_RESEND')\n\t\t\t\t;\n\t\t},\n\t\tisFacebookForm()\n\t\t{\n\t\t\treturn this.$root.$app?.connector === 'facebook' && this.$root.$app?.isAllowedFacebookRegion;\n\t\t},\n\t\tisShowDocumentSelector()\n\t\t{\n\t\t\treturn this.$root.$app.hasOwnProperty('documentSelector');\n\t\t},\n\t},\n\tmethods: {\n\t\tinitCounter()\n\t\t{\n\t\t\tthis.counter = 1;\n\t\t},\n\t\tgetTimelineCollection(items)\n\t\t{\n\t\t\tlet list = [];\n\n\t\t\tObject.values(items).forEach((options) => {\n\t\t\t\tlist.push(TimeLineItem.Factory.create(options))\n\t\t\t});\n\n\t\t\treturn list;\n\t\t},\n\t\tgetTileCollection(items)\n\t\t{\n\t\t\tlet tiles = [];\n\n\t\t\tObject.values(items).forEach((options) => {\n\t\t\t\ttiles.push(Tile.Factory.create(options))\n\t\t\t});\n\n\t\t\treturn tiles;\n\t\t},\n\t\tgetTitleItems(items)\n\t\t{\n\t\t\tlet result = [];\n\t\t\titems.forEach((item) => {\n\t\t\t\tif (![Tile.More.type(), Tile.Offer.type()].includes(item.type))\n\t\t\t\t{\n\t\t\t\t\tresult.push(item);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn result;\n\t\t},\n\t\tstageRefresh(e, type)\n\t\t{\n\t\t\tBX.ajax.runComponentAction(\n\t\t\t\t'bitrix:salescenter.app',\n\t\t\t\t'getAjaxData',\n\t\t\t\t{\n\t\t\t\t\tmode: 'class',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\ttype: type,\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t).then(function(response) {\n\t\t\t\tif (response.data)\n\t\t\t\t{\n\t\t\t\t\tthis.refreshTilesByType(response.data, type);\n\t\t\t\t}\n\t\t\t}.bind(this),\n\t\t\tfunction() {\n\t\t\t\tUI.Notification.Center.notify({\n\t\t\t\t\tcontent: Loc.getMessage('SALESCENTER_DATA_UPDATE_ERROR'),\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\trefreshTilesByType(data, type)\n\t\t{\n\t\t\tif(type === 'PAY_SYSTEM')\n\t\t\t{\n\t\t\t\tthis.stages.paysystem.status = data.isSet\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled;\n\t\t\t\tthis.stages.paysystem.tiles = this.getTileCollection(data.items);\n\t\t\t\tthis.stages.paysystem.installed = data.isSet;\n\t\t\t}\n\t\t\telse if(type === 'CASHBOX')\n\t\t\t{\n\t\t\t\tthis.stages.cashbox.status = data.isSet\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled;\n\t\t\t\tthis.stages.cashbox.tiles = this.getTileCollection(data.items);\n\t\t\t\tthis.stages.cashbox.installed = data.isSet;\n\t\t\t\tthis.stages.cashbox.titleItems = this.getTitleItems(data.items);\n\t\t\t}\n\t\t\telse if(type === 'DELIVERY')\n\t\t\t{\n\t\t\t\tthis.stages.delivery.status = data.isSet\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled;\n\t\t\t\tthis.stages.delivery.tiles = this.getTileCollection(data.items);\n\t\t\t\tthis.stages.delivery.installed = data.isInstalled;\n\t\t\t}\n\t\t},\n\t\tonSend(event)\n\t\t{\n\t\t\tthis.$emit('stage-block-send-on-send', event);\n\t\t},\n\t\tonSendCompilationLinkToFacebook(event)\n\t\t{\n\t\t\tthis.$emit('stage-block-send-on-send-compilation-link-to-facebook', event);\n\t\t},\n\t\tchangeProvider(value)\n\t\t{\n\t\t\tthis.$root.$app.sendingMethodDesc.provider = value;\n\t\t\tBX.userOptions.save('salescenter', 'payment_sms_provider_options', 'latest_selected_provider', value);\n\t\t},\n\t\tsaveCollapsedOption(type, value)\n\t\t{\n\t\t\tBX.userOptions.save('salescenter', 'add_payment_collapse_options', type, value);\n\t\t},\n\t\tonProductFormModeChange()\n\t\t{\n\t\t\tconst isCompilationMode = this.$store.getters['orderCreation/isCompilationMode'];\n\t\t\tif (isCompilationMode)\n\t\t\t{\n\t\t\t\tthis.stages.delivery.status = Status.disabled;\n\n\t\t\t\tthis.stages.message.selectedMode = 'compilation';\n\t\t\t\tthis.$root.$app.sendingMethodDesc.text = this.$root.$app.sendingMethodDesc.text_modes.compilation;\n\t\t\t\tthis.stages.message.editorTemplate = this.$root.$app.sendingMethodDesc.text_modes.compilation;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.stages.delivery.status = this.$root.$app.options.deliveryList.isInstalled\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled;\n\n\t\t\t\tthis.stages.message.selectedMode = 'payment';\n\t\t\t\tthis.$root.$app.sendingMethodDesc.text = this.$root.$app.sendingMethodDesc.text_modes.payment;\n\t\t\t\tthis.stages.message.editorTemplate = this.$root.$app.sendingMethodDesc.text_modes.payment;\n\t\t\t}\n\t\t},\n\t},\n\tcreated()\n\t{\n\t\tthis.initCounter();\n\t},\n\tbeforeUpdate()\n\t{\n\t\tthis.initCounter();\n\t},\n\ttemplate: `\n\t\t<div>\n\t\t\t<chat-message-block\n\t\t\t\tv-if=\"editable\"\n\t\t\t\t@stage-block-sms-send-on-change-provider=\"changeProvider\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.message.status\"\n\t\t\t\t:manager=\"stages.message.manager\"\n\t\t\t\t:titleTemplate=\"stages.message.titleTemplate\"\n\t\t\t\t:showHint=\"stages.message.showHint\"\n\t\t\t\t:editorTemplate=\"stages.message.editorTemplate\"\n\t\t\t\t:editorUrl=\"stages.message.editorUrl\"\n\t\t\t\t:selectedMode=\"stages.message.selectedMode\"\n\t\t\t/>\n\t\t\t<product-block\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.product.status\"\n\t\t\t\t:title=\"stages.product.title\"\n\t\t\t\t:hintTitle=\"stages.product.hintTitle\"\n\t\t\t\t@on-product-form-mode-change=\"onProductFormModeChange\"\n\t\t\t/>\n\t\t\t<paysystem-block\n\t\t\t\t@on-stage-tile-collection-slider-close=\"stageRefresh($event, 'PAY_SYSTEM')\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.paysystem.status\"\n\t\t\t\t:tiles=\"stages.paysystem.tiles\"\n\t\t\t\t:installed=\"stages.paysystem.installed\"\n\t\t\t\t:titleItems=\"stages.paysystem.titleItems\"\n\t\t\t\t:initialCollapseState=\"stages.paysystem.initialCollapseState\"\n\t\t\t\t@on-save-collapsed-option=\"saveCollapsedOption\"\n\t\t\t/>\n\t\t\t<cashbox-block\n\t\t\t\tv-if=\"hasStageCashBox\"\n\t\t\t\t@on-stage-tile-collection-slider-close=\"stageRefresh($event, 'CASHBOX')\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.cashbox.status\"\n\t\t\t\t:tiles=\"stages.cashbox.tiles\"\n\t\t\t\t:installed=\"stages.cashbox.installed\"\n\t\t\t\t:titleItems=\"stages.cashbox.titleItems\"\n\t\t\t\t:initialCollapseState=\"stages.cashbox.initialCollapseState\"\n\t\t\t\t@on-save-collapsed-option=\"saveCollapsedOption\"\n\t\t\t/>\n\t\t\t<delivery-block\n\t\t\t\tv-if=\"stages.delivery && !stages.delivery.isHidden\"\n\t\t\t\t@on-stage-tile-collection-slider-close=\"stageRefresh($event, 'DELIVERY')\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.delivery.status\"\n\t\t\t\t:tiles=\"stages.delivery.tiles\"\n\t\t\t\t:installed=\"stages.delivery.installed\"\n\t\t\t\t:isCollapsible=\"true\"\n\t\t\t\t:initialCollapseState=\"stages.delivery.initialCollapseState\"\n\t\t\t\t@on-save-collapsed-option=\"saveCollapsedOption\"\n\t\t\t/>\n\t\t\t<document-selector-block\n\t\t\t\tv-if=\"isShowDocumentSelector\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:templateAddUrl=\"stages.documentSelector.templateAddUrl\"\n\t\t\t/>\n\t\t\t<automation-block\n\t\t\t\tv-if=\"hasStageAutomation\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.automation.status\"\n\t\t\t\t:stageOnOrderPaid=\"stages.automation.stageOnOrderPaid\"\n\t\t\t\t:stageOnDeliveryFinished=\"stages.automation.stageOnDeliveryFinished\"\n\t\t\t\t:items=\"stages.automation.items\"\n\t\t\t\t:initialCollapseState=\"stages.automation.initialCollapseState\"\n\t\t\t\t@on-save-collapsed-option=\"saveCollapsedOption\"\n\t\t\t/>\n\t\t\t<send-block\n\t\t\t\t@on-submit=\"onSend\"\n\t\t\t\t@on-submit-compilation-link-to-facebook=\"onSendCompilationLinkToFacebook\"\n\t\t\t\t:buttonEnabled=\"isSendAllowed\"\n\t\t\t\t:buttonLabel=\"submitButtonLabel\"\n\t\t\t\t:isFacebookForm=\"isFacebookForm\"\n\t\t\t/>\n\t\t\t<timeline-block\n\t\t\t\tv-if=\"hasStageTimeLine\"\n\t\t\t\t:timelineItems=\"stages.timeline.items\"\n\t\t\t/>\n\t\t</div>\n\t`\n};\n","export default {\n\tdata()\n\t{\n\t\treturn {\n\t\t\tisFaded: false,\n\t\t};\n\t},\n\tmounted()\n\t{\n\t\tthis.createPinner();\n\t},\n\tcreated()\n\t{\n\t\tthis.$root.$on('on-start-progress', () => {\n\t\t\tthis.startFade();\n\t\t});\n\n\t\tthis.$root.$on('on-stop-progress', () => {\n\t\t\tthis.endFade();\n\t\t});\n\t},\n\tmethods: {\n\t\tstartFade()\n\t\t{\n\t\t\tthis.isFaded = true;\n\t\t},\n\t\tendFade()\n\t\t{\n\t\t\tthis.isFaded = false;\n\t\t},\n\t\tcreatePinner()\n\t\t{\n\t\t\tlet buttonsPanel = this.$refs['buttonsPanel'];\n\t\t\tif(buttonsPanel)\n\t\t\t{\n\t\t\t\tthis.$root.$el.parentNode.appendChild(buttonsPanel);\n\t\t\t\tnew BX.UI.Pinner(\n\t\t\t\t\tbuttonsPanel,\n\t\t\t\t\t{\n\t\t\t\t\t\tfixBottom: this.$root.$app.isFrame,\n\t\t\t\t\t\tfullWidth: this.$root.$app.isFrame\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t},\n\t\tclose()\n\t\t{\n\t\t\tthis.$root.$app.closeApplication();\n\t\t},\n\t},\n\tcomputed: {\n\t\tisOrderPublicUrlAvailable()\n\t\t{\n\t\t\treturn this.$root.$app.isOrderPublicUrlAvailable;\n\t\t},\n\t\tcompilation()\n\t\t{\n\t\t\treturn this.$root.$app.compilation;\n\t\t},\n\t\twrapperClass()\n\t\t{\n\t\t\treturn {'salescenter-app-wrapper-fade': this.isFaded};\n\t\t},\n\t\twrapperStyle()\n\t\t{\n\t\t\tconst position = BX.pos(this.$root.$el);\n\n\t\t\tlet offset = position.top + 20;\n\t\t\tif(this.$root.$nodes.footer)\n\t\t\t{\n\t\t\t\toffset += BX.pos(this.$root.$nodes.footer).height;\n\t\t\t}\n\t\t\tconst buttonsPanel = this.$refs['buttonsPanel'];\n\t\t\tif(buttonsPanel)\n\t\t\t{\n\t\t\t\toffset += BX.pos(buttonsPanel).height;\n\t\t\t}\n\n\t\t\t//?auto\n\t\t\treturn {'minHeight': 'calc(100vh - ' + offset + 'px)'};\n\t\t},\n\t}\n}\n","import {Loc} from 'main.core';\nimport {Manager} from 'salescenter.manager';\n\nexport default {\n\tdata()\n\t{\n\t\treturn {\n\t\t};\n\t},\n\tmethods: {\n\t\tconnect()\n\t\t{\n\t\t\tconst loader = new BX.Loader({size: 200});\n\t\t\tloader.show(document.body);\n\n\t\t\tBX.Salescenter.Manager.connect({\n\t\t\t\tno_redirect: 'Y',\n\t\t\t\tcontext: this.$root.$app.context,\n\t\t\t}).then(() =>\n\t\t\t{\n\t\t\t\tBX.Salescenter.Manager.loadConfig().then((result) =>\n\t\t\t\t{\n\t\t\t\t\tloader.hide();\n\n\t\t\t\t\tif(result.isSiteExists)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$root.$app.isSiteExists = result.isSiteExists;\n\t\t\t\t\t\tthis.$root.$app.isOrderPublicUrlExists = true;\n\t\t\t\t\t\tthis.$root.$app.orderPublicUrl = result.orderPublicUrl;\n\t\t\t\t\t\tthis.$root.$app.isOrderPublicUrlAvailable = result.isOrderPublicUrlAvailable;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.$emit('on-successfully-connected');\n\t\t\t\t});\n\t\t\t}).catch(function()\n\t\t\t{\n\t\t\t\tloader.hide();\n\t\t\t});\n\t\t},\n\t\tcheckRecycle()\n\t\t{\n\t\t\tManager.openConnectedSite(true);\n\t\t},\n\t\topenConnectedSite()\n\t\t{\n\t\t\tManager.openConnectedSite();\n\t\t},\n\t},\n\tcomputed: {\n\t\tisOrderPageDeleted()\n\t\t{\n\t\t\treturn (this.$root.$app.isSiteExists && !this.isOrderPublicUrlExists);\n\t\t},\n\t\tisOrderPublicUrlExists()\n\t\t{\n\t\t\treturn this.$root.$app.isOrderPublicUrlExists;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"salescenter-app-page-content salescenter-app-start-wrapper\">\n\t\t\t<div class=\"ui-title-1 ui-text-center ui-color-medium\" style=\"margin-bottom: 20px;\">\n\t\t\t\t${Loc.getMessage('SALESCENTER_INFO_TEXT_TOP_2')}\n\t\t\t</div>\n\t\t\t<div class=\"ui-hr ui-mv-25\"></div>\n\t\t\t<template v-if=\"isOrderPublicUrlExists\">\n\t\t\t\t<div class=\"salescenter-title-5 ui-title-5 ui-text-center ui-color-medium\">\n\t\t\t\t\t${Loc.getMessage('SALESCENTER_INFO_TEXT_BOTTOM_PUBLIC')}\n\t\t\t\t</div>\n\t\t\t\t<div style=\"padding-top: 5px;\" class=\"ui-text-center\">\n\t\t\t\t\t<div class=\"ui-btn ui-btn-primary ui-btn-lg\" @click=\"openConnectedSite\">\n\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_INFO_PUBLIC')}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t\t<template v-else-if=\"isOrderPageDeleted\">\n\t\t\t\t<div class=\"salescenter-title-5 ui-title-5 ui-text-center ui-color-medium\">\n\t\t\t\t\t${Loc.getMessage('SALESCENTER_INFO_ORDER_PAGE_DELETED')}\n\t\t\t\t</div>\n\t\t\t\t<div style=\"padding-top: 5px;\" class=\"ui-text-center\">\n\t\t\t\t\t<div\n\t\t\t\t\t\t@click=\"checkRecycle\"\n\t\t\t\t\t\tclass=\"ui-btn ui-btn-primary ui-btn-lg\"\n\t\t\t\t\t>\n\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_CHECK_RECYCLE')}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t\t<template v-else>\n\t\t\t\t<div class=\"salescenter-title-5 ui-title-5 ui-text-center ui-color-medium\">\n\t\t\t\t\t${Loc.getMessage('SALESCENTER_INFO_TEXT_BOTTOM_2')}\n\t\t\t\t</div>\n\t\t\t\t<div style=\"padding-top: 5px;\" class=\"ui-text-center\">\n\t\t\t\t\t<div\n\t\t\t\t\t\t@click=\"connect\"\n\t\t\t\t\t\tclass=\"ui-btn ui-btn-primary ui-btn-lg\"\n\t\t\t\t\t>\n\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_INFO_CREATE')}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div style=\"padding-top: 5px;\" class=\"ui-text-center\">\n\t\t\t\t\t<div\n\t\t\t\t\t\t@click=\"BX.Salescenter.Manager.openHowPayDealWorks(event)\"\n\t\t\t\t\t\tclass=\"ui-btn ui-btn-link ui-btn-lg\"\n\t\t\t\t\t>\n\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_HOW')}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</div>\n\t`,\n}\n","import {Loc} from 'main.core';\nimport {Manager} from \"salescenter.manager\";\n\nexport default {\n\tdata()\n\t{\n\t\treturn {\n\t\t\tisVisible: true,\n\t\t};\n\t},\n\tmethods: {\n\t\thide()\n\t\t{\n\t\t\tthis.isVisible = false;\n\t\t\tthis.$emit('on-hide');\n\t\t},\n\t\topenControlPanel()\n\t\t{\n\t\t\tManager.openControlPanel();\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div v-if=\"isVisible\" class=\"salescenter-app-banner\" >\n\t\t\t<div class=\"salescenter-app-banner-inner\">\n\t\t\t\t<div class=\"salescenter-app-banner-title\">\n\t\t\t\t\t${Loc.getMessage('SALESCENTER_BANNER_TITLE')}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"salescenter-app-banner-content\">\n\t\t\t\t\t<div class=\"salescenter-app-banner-text\">\n\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_BANNER_TEXT')}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"salescenter-app-banner-btn-block\">\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t@click=\"openControlPanel\"\n\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-sm ui-btn-primary salescenter-app-banner-btn-connect\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_BANNER_BTN_CONFIGURE')}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t@click=\"hide\"\n\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-sm ui-btn-link salescenter-app-banner-btn-hide\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_BANNER_BTN_HIDE')}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\t@click=\"hide\"\n\t\t\t\t\tclass=\"salescenter-app-banner-close\"\n\t\t\t\t>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n}\n","import {Vue} from 'ui.vue';\nimport {Vuex} from 'ui.vue.vuex';\nimport {Manager} from 'salescenter.manager';\nimport {Loader} from 'main.loader';\nimport {Loc, Type, Uri} from 'main.core';\nimport {MixinTemplatesType} from './components/templates-type-mixin';\nimport StageBlocksList from './components/chat-receiving-payment/stage-blocks-list';\nimport ComponentMixin from './component-mixin';\nimport Product from './product';\nimport Start from './start';\nimport NoPaymentSystemsBanner from './no-payment-systems';\nimport 'popup';\nimport 'ui.buttons';\nimport 'ui.buttons.icons';\nimport 'ui.forms';\nimport 'ui.fonts.opensans';\nimport 'ui.pinner';\n\nexport default {\n\tmixins: [MixinTemplatesType, ComponentMixin],\n\tdata()\n\t{\n\t\treturn {\n\t\t\tisShowPreview: false,\n\t\t\tisShowPayment: false,\n\t\t\tpageTitle: '',\n\t\t\tcurrentPageId: null,\n\t\t\tactions: [],\n\t\t\tframeCheckShortTimeout: false,\n\t\t\tframeCheckLongTimeout: false,\n\t\t\tisPagesOpen: false,\n\t\t\tisFormsOpen: false,\n\t\t\tshowedPageIds: [],\n\t\t\tloadedPageIds: [],\n\t\t\terrorPageIds: [],\n\t\t\tlastAddedPages: [],\n\t\t\tordersCount: null,\n\t\t\tpaymentsCount: null,\n\t\t\teditedPageId: null,\n\t\t\tcurrentPageTitle: null\n\t\t};\n\t},\n\tcomponents:\n\t\t{\n\t\t\t'product': Product,\n\t\t\t'start': Start,\n\t\t\t'no-payment-systems-banner': NoPaymentSystemsBanner,\n\t\t\t'chat-receiving-payment': StageBlocksList,\n\t\t},\n\tupdated()\n\t{\n\t\tthis.renderErrors();\n\t},\n\tmounted()\n\t{\n\t\tthis.createLoader();\n\t\tthis.$root.$app.fillPages().then(() =>\n\t\t{\n\t\t\tif (this.$root.$app.isWithOrdersMode)\n\t\t\t{\n\t\t\t\tthis.refreshOrdersCount();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.refreshPaymentsCount();\n\t\t\t}\n\n\t\t\tthis.openFirstPage();\n\t\t});\n\n\t\tif(this.$root.$app.isPaymentsLimitReached)\n\t\t{\n\t\t\tlet paymentsLimitStartNode = this.$root.$nodes.paymentsLimit;\n\t\t\tlet paymentsLimitNode = this.$refs['paymentsLimit'];\n\t\t\tfor (let node of paymentsLimitStartNode.children)\n\t\t\t{\n\t\t\t\tpaymentsLimitNode.appendChild(node);\n\t\t\t}\n\t\t}\n\t},\n\tmethods:\n\t\t{\n\t\t\tgetActions()\n\t\t\t{\n\t\t\t\tlet actions = [];\n\t\t\t\tif(this.currentPage)\n\t\t\t\t{\n\t\t\t\t\tactions = [\n\t\t\t\t\t\t{text: this.localize.SALESCENTER_RIGHT_ACTION_COPY_URL, onclick: this.copyUrl},\n\t\t\t\t\t];\n\t\t\t\t\tif(this.currentPage.landingId > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tactions = [\n\t\t\t\t\t\t\t...actions,\n\t\t\t\t\t\t\t{text: this.localize.SALESCENTER_RIGHT_ACTION_HIDE, onclick: this.hidePage},\n\t\t\t\t\t\t];\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tactions = [\n\t\t\t\t\t\t\t...actions,\n\t\t\t\t\t\t\t{text: this.localize.SALESCENTER_RIGHT_ACTION_DELETE, onclick: this.hidePage},\n\t\t\t\t\t\t];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn [\n\t\t\t\t\t...actions,\n\t\t\t\t\t{text: this.localize.SALESCENTER_RIGHT_ACTION_ADD, items: this.getAddPageActions()},\n\t\t\t\t];\n\t\t\t},\n\t\t\tgetAddPageActions(isWebform = false)\n\t\t\t{\n\t\t\t\treturn [\n\t\t\t\t\t{text: this.localize.SALESCENTER_RIGHT_ACTION_ADD_SITE_B24, onclick: () =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.addSite(isWebform);\n\t\t\t\t\t\t}},\n\t\t\t\t\t{text: this.localize.SALESCENTER_RIGHT_ACTION_ADD_CUSTOM, onclick: () =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.showAddUrlPopup({\n\t\t\t\t\t\t\t\tisWebform: isWebform === true ? 'Y' : null\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}},\n\t\t\t\t];\n\t\t\t},\n\t\t\topenFirstPage()\n\t\t\t{\n\t\t\t\tthis.isShowPayment = false;\n\t\t\t\tthis.isShowPreview = true;\n\t\t\t\tif (this.$root.$app.isPaymentCreationAvailable)\n\t\t\t\t{\n\t\t\t\t\tthis.showPaymentForm();\n\t\t\t\t}\n\t\t\t\telse if(this.pages && this.pages.length > 0)\n\t\t\t\t{\n\t\t\t\t\tlet firstWebformPage = false;\n\t\t\t\t\tlet pageToOpen = false;\n\t\t\t\t\tthis.pages.forEach((page) =>\n\t\t\t\t\t{\n\t\t\t\t\t\tif(!pageToOpen)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif(!page.isWebform)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tpageToOpen = page;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tfirstWebformPage = page;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tif(!pageToOpen && firstWebformPage)\n\t\t\t\t\t{\n\t\t\t\t\t\tpageToOpen = firstWebformPage;\n\t\t\t\t\t}\n\t\t\t\t\tif(this.currentPageId !== pageToOpen.id)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.onPageClick(pageToOpen);\n\t\t\t\t\t\tif(pageToOpen.isWebform)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.isFormsOpen = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.isPagesOpen = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.currentPageId = this.pages[0].id;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.pageTitle = null;\n\t\t\t\t\tthis.currentPageId = null;\n\t\t\t\t\tthis.setPageTitle(this.pageTitle);\n\t\t\t\t}\n\t\t\t},\n\t\t\tonPageClick(page)\n\t\t\t{\n\t\t\t\tthis.pageTitle = page.name;\n\t\t\t\tthis.currentPageId = page.id;\n\t\t\t\tthis.hideActionsPopup();\n\t\t\t\tthis.isShowPayment = false;\n\t\t\t\tthis.isShowPreview = true;\n\t\t\t\tthis.setPageTitle(this.pageTitle);\n\t\t\t\tif(page.isFrameDenied !== true)\n\t\t\t\t{\n\t\t\t\t\tif(!this.showedPageIds.includes(page.id))\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.startFrameCheckTimeout();\n\t\t\t\t\t\tthis.showedPageIds.push(page.id);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.onFrameError();\n\t\t\t\t}\n\t\t\t},\n\t\t\tshowActionsPopup({target})\n\t\t\t{\n\t\t\t\tBX.PopupMenu.show('salescenter-app-actions', target, this.getActions(), {\n\t\t\t\t\toffsetLeft: 0,\n\t\t\t\t\toffsetTop: 0,\n\t\t\t\t\tcloseByEsc: true,\n\t\t\t\t});\n\t\t\t},\n\t\t\tshowCompanyContacts({target})\n\t\t\t{\n\t\t\t\tBX.Salescenter.Manager.openSlider(this.$root.$app.options.urlSettingsCompanyContacts, {width: 1200} );\n\t\t\t},\n\t\t\tshowAddPageActionPopup({target}, isWebform = false)\n\t\t\t{\n\t\t\t\tlet menuId = 'salescenter-app-add-page-actions';\n\t\t\t\tif(isWebform)\n\t\t\t\t{\n\t\t\t\t\tmenuId += '-forms';\n\t\t\t\t}\n\t\t\t\tBX.PopupMenu.show(menuId, target, this.getAddPageActions(isWebform), {\n\t\t\t\t\toffsetLeft: target.offsetWidth + 20,\n\t\t\t\t\toffsetTop: -target.offsetHeight - 15,\n\t\t\t\t\tcloseByEsc: true,\n\t\t\t\t\tangle: {\n\t\t\t\t\t\tposition: 'left',\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\thideActionsPopup()\n\t\t\t{\n\t\t\t\tBX.PopupMenu.destroy('salescenter-app-actions');\n\t\t\t\tBX.PopupMenu.destroy('salescenter-app-add-page-actions');\n\t\t\t},\n\t\t\taddSite(isWebform = false)\n\t\t\t{\n\t\t\t\tManager.addSitePage(isWebform).then((result) =>\n\t\t\t\t{\n\t\t\t\t\tlet newPage = result.answer.result.page || false;\n\t\t\t\t\tthis.$root.$app.fillPages().then(() =>\n\t\t\t\t\t{\n\t\t\t\t\t\tif(newPage)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.onPageClick(newPage);\n\t\t\t\t\t\t\tthis.lastAddedPages.push(parseInt(newPage.id));\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.openFirstPage();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\tthis.hideActionsPopup();\n\t\t\t},\n\t\t\tcopyUrl(event)\n\t\t\t{\n\t\t\t\tif(this.currentPage && this.currentPage.url)\n\t\t\t\t{\n\t\t\t\t\tManager.copyUrl(this.currentPage.url, event);\n\t\t\t\t\tthis.hideActionsPopup();\n\t\t\t\t}\n\t\t\t},\n\t\t\teditPage()\n\t\t\t{\n\t\t\t\tif(this.currentPage)\n\t\t\t\t{\n\t\t\t\t\tif(this.currentPage.landingId && this.currentPage.landingId > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tManager.editLandingPage(this.currentPage.landingId, this.currentPage.siteId);\n\t\t\t\t\t\tthis.hideActionsPopup();\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.showAddUrlPopup(this.currentPage);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\thidePage()\n\t\t\t{\n\t\t\t\tif(this.currentPage)\n\t\t\t\t{\n\t\t\t\t\tthis.$root.$app.hidePage(this.currentPage).then(() => {\n\t\t\t\t\t\tthis.openFirstPage();\n\t\t\t\t\t});\n\t\t\t\t\tthis.hideActionsPopup();\n\t\t\t\t}\n\t\t\t},\n\t\t\thideNoPaymentSystemsBanner()\n\t\t\t{\n\t\t\t\tthis.$root.$app.hideNoPaymentSystemsBanner();\n\t\t\t},\n\t\t\tshowAddUrlPopup(newPage)\n\t\t\t{\n\t\t\t\tif(!Type.isPlainObject(newPage))\n\t\t\t\t{\n\t\t\t\t\tnewPage = {};\n\t\t\t\t}\n\t\t\t\tManager.addCustomPage(newPage).then((pageId) =>\n\t\t\t\t{\n\t\t\t\t\tif(!this.isShowPreview)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.isShowPreview = false;\n\t\t\t\t\t}\n\t\t\t\t\tthis.$root.$app.fillPages().then(() => {\n\t\t\t\t\t\tif(pageId && (!Type.isPlainObject(newPage) || !newPage.id))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.lastAddedPages.push(parseInt(pageId));\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(!pageId && newPage)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tpageId = newPage.id;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(pageId)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.pages.forEach((page) =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif(parseInt(page.id) === parseInt(pageId))\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tthis.onPageClick(page);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif(!this.isShowPayment)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.isShowPreview = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\tthis.hideActionsPopup();\n\t\t\t},\n\t\t\tgetPaymentItemTitle(): ?string\n\t\t\t{\n\t\t\t\tif(!this.isOrderPublicUrlAvailable)\n\t\t\t\t{\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t\tif (this.$root.$app.options.mode === 'payment')\n\t\t\t\t{\n\t\t\t\t\treturn this.localize.SALESCENTER_LEFT_PAYMENT_ADD_2;\n\t\t\t\t}\n\n\t\t\t\treturn this.localize.SALESCENTER_LEFT_PAYMENT_AND_DELIVERY;\n\t\t\t},\n\t\t\tshowPaymentForm()\n\t\t\t{\n\t\t\t\tthis.isShowPayment = true;\n\t\t\t\tthis.isShowPreview = false;\n\n\t\t\t\tif (this.compilation)\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tlet title = this.getPaymentItemTitle() || this.localize.SALESCENTER_DEFAULT_TITLE;\n\n\t\t\t\tthis.setPageTitle(title);\n\t\t\t},\n\t\t\tshowOrdersList()\n\t\t\t{\n\t\t\t\tthis.hideActionsPopup();\n\t\t\t\tManager.showOrdersList({\n\t\t\t\t\tcontext: this.$root.$app.context,\n\t\t\t\t\townerId: this.$root.$app.ownerId,\n\t\t\t\t\townerTypeId: this.$root.$app.ownerTypeId,\n\t\t\t\t}).then(() =>\n\t\t\t\t{\n\t\t\t\t\tthis.refreshOrdersCount();\n\t\t\t\t});\n\t\t\t},\n\t\t\tshowPaymentsList()\n\t\t\t{\n\t\t\t\tthis.hideActionsPopup();\n\t\t\t\tManager.showPaymentsList({\n\t\t\t\t\tcontext: this.$root.$app.context,\n\t\t\t\t\townerId: this.$root.$app.ownerId,\n\t\t\t\t\townerTypeId: this.$root.$app.ownerTypeId,\n\t\t\t\t}).then(() =>\n\t\t\t\t{\n\t\t\t\t\tthis.refreshPaymentsCount();\n\t\t\t\t});\n\t\t\t},\n\t\t\tshowOrderAdd()\n\t\t\t{\n\t\t\t\tthis.hideActionsPopup();\n\t\t\t\tManager.showOrderAdd({\n\t\t\t\t\townerId: this.$root.$app.ownerId,\n\t\t\t\t\townerTypeId: this.$root.$app.ownerTypeId,\n\t\t\t\t}).then(() =>\n\t\t\t\t{\n\t\t\t\t\tthis.refreshOrdersCount();\n\t\t\t\t});\n\t\t\t},\n\t\t\tshowCatalog()\n\t\t\t{\n\t\t\t\tthis.hideActionsPopup();\n\t\t\t\tManager.openSlider(`/saleshub/catalog/?sessionId=${this.$root.$app.sessionId}`);\n\t\t\t},\n\t\t\tonFormsClick()\n\t\t\t{\n\t\t\t\tthis.isFormsOpen = !this.isFormsOpen;\n\t\t\t\tthis.hideActionsPopup();\n\t\t\t},\n\t\t\topenControlPanel()\n\t\t\t{\n\t\t\t\tManager.openControlPanel();\n\t\t\t\tthis.hideActionsPopup();\n\t\t\t},\n\t\t\topenHelpDesk()\n\t\t\t{\n\t\t\t\tthis.hideActionsPopup();\n\t\t\t\tManager.openHowItWorks();\n\t\t\t},\n\t\t\tisPageSelected(page)\n\t\t\t{\n\t\t\t\treturn (this.currentPage && this.isShowPreview && this.currentPage.id === page.id);\n\t\t\t},\n\t\t\tsendCompilationLinkToFacebook(event)\n\t\t\t{\n\t\t\t\tthis.send(event, 'n',true)\n\t\t\t},\n\t\t\tsend(event, skipPublicMessage = 'n', sendCompilationLinkToFacebook = false)\n\t\t\t{\n\t\t\t\tif(!this.isAllowedSubmitButton)\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif(this.isShowPayment && !this.isShowStartInfo)\n\t\t\t\t{\n\t\t\t\t\tif (this.$store.getters['orderCreation/isCompilationMode'])\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$root.$app.sendCompilation(event.target, sendCompilationLinkToFacebook);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$root.$app.sendPayment(event.target, skipPublicMessage);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if(this.currentPage && this.currentPage.isActive)\n\t\t\t\t{\n\t\t\t\t\tthis.$root.$app.sendPage(this.currentPage.id);\n\t\t\t\t}\n\t\t\t},\n\t\t\tsetPageTitle(title = null)\n\t\t\t{\n\t\t\t\tif(!title)\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif(this.$root.$nodes.title)\n\t\t\t\t{\n\t\t\t\t\tthis.$root.$nodes.title.innerText = title;\n\t\t\t\t}\n\t\t\t},\n\t\t\tonFrameError()\n\t\t\t{\n\t\t\t\tclearTimeout(this.frameCheckLongTimeout);\n\t\t\t\tif(this.showedPageIds.includes(this.currentPage.id))\n\t\t\t\t{\n\t\t\t\t\tthis.loadedPageIds.push(this.currentPage.id);\n\t\t\t\t}\n\t\t\t\tthis.errorPageIds.push(this.currentPage.id);\n\t\t\t},\n\t\t\tonFrameLoad(pageId)\n\t\t\t{\n\t\t\t\tclearTimeout(this.frameCheckLongTimeout);\n\t\t\t\tif(this.showedPageIds.includes(pageId))\n\t\t\t\t{\n\t\t\t\t\tthis.loadedPageIds.push(pageId);\n\t\t\t\t\tif(this.currentPage && this.currentPage.id === pageId)\n\t\t\t\t\t{\n\t\t\t\t\t\tif(this.frameCheckShortTimeout && !this.currentPage.landingId)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.onFrameError();\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(this.errorPageIds.includes(this.currentPage.id))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.errorPageIds = this.errorPageIds.filter((pageId) =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treturn pageId !== this.currentPage.id;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif(this.frameCheckShortTimeout && this.currentPage && this.currentPage.id === pageId && !this.currentPage.landingId)\n\t\t\t\t{\n\t\t\t\t\tthis.onFrameError();\n\t\t\t\t}\n\t\t\t},\n\t\t\tonSuccessfullyConnected()\n\t\t\t{\n\t\t\t\tthis.$root.$app.fillPages().then(() =>\n\t\t\t\t{\n\t\t\t\t\tthis.openFirstPage();\n\t\t\t\t});\n\t\t\t},\n\t\t\tstartFrameCheckTimeout()\n\t\t\t{\n\t\t\t\t// this is a workaround for denied through X-Frame-Options sources\n\t\t\t\tif(this.frameCheckShortTimeout)\n\t\t\t\t{\n\t\t\t\t\tclearTimeout(this.frameCheckShortTimeout);\n\t\t\t\t\tthis.frameCheckShortTimeout = false;\n\t\t\t\t}\n\t\t\t\tthis.frameCheckShortTimeout = setTimeout(() =>\n\t\t\t\t{\n\t\t\t\t\tthis.frameCheckShortTimeout = false;\n\t\t\t\t}, 500);\n\n\t\t\t\t// to show error on long loading\n\t\t\t\tclearTimeout(this.frameCheckLongTimeout);\n\t\t\t\tthis.frameCheckLongTimeout = setTimeout(() =>\n\t\t\t\t{\n\t\t\t\t\tif(this.currentPage && this.showedPageIds.includes(this.currentPage.id) && !this.loadedPageIds.includes(this.currentPage.id))\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.errorPageIds.push(this.currentPage.id);\n\t\t\t\t\t}\n\t\t\t\t}, 5000);\n\t\t\t},\n\t\t\tgetFrameSource(page)\n\t\t\t{\n\t\t\t\tif(this.showedPageIds.includes(page.id))\n\t\t\t\t{\n\t\t\t\t\tif(page.landingId > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tif(page.isActive)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn (new Uri(page.url)).setQueryParam('theme', '').toString();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\treturn page.url;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn null;\n\t\t\t},\n\t\t\trefreshOrdersCount()\n\t\t\t{\n\t\t\t\tthis.$root.$app.getOrdersCount().then((result) =>\n\t\t\t\t{\n\t\t\t\t\tthis.ordersCount = result.answer.result || null;\n\t\t\t\t}).catch(() =>\n\t\t\t\t{\n\t\t\t\t\tthis.ordersCount = null;\n\t\t\t\t});\n\t\t\t},\n\t\t\trefreshPaymentsCount()\n\t\t\t{\n\t\t\t\tthis.$root.$app.getPaymentsCount().then((result) =>\n\t\t\t\t{\n\t\t\t\t\tthis.paymentsCount = result.answer.result || null;\n\t\t\t\t}).catch(() =>\n\t\t\t\t{\n\t\t\t\t\tthis.paymentsCount = null;\n\t\t\t\t});\n\t\t\t},\n\t\t\trenderErrors()\n\t\t\t{\n\t\t\t\tif (this.isShowPayment && this.order.errors.length > 0)\n\t\t\t\t{\n\t\t\t\t\tlet errorMessages = this.order.errors.map((item) => item.message).join('<br>');\n\t\t\t\t\tlet params = {\n\t\t\t\t\t\tcolor: BX.UI.Alert.Color.DANGER,\n\t\t\t\t\t\ttextCenter: true,\n\t\t\t\t\t\ttext: BX.util.htmlspecialchars(errorMessages)\n\t\t\t\t\t};\n\t\t\t\t\tif (this.$refs.errorBlock.innerHTML.length === 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tparams.animated = true;\n\t\t\t\t\t}\n\t\t\t\t\tlet alert = new BX.UI.Alert(params);\n\t\t\t\t\tthis.$refs.errorBlock.innerHTML = '';\n\t\t\t\t\tthis.$refs.errorBlock.appendChild(alert.getContainer());\n\t\t\t\t}\n\t\t\t\telse if (this.$refs.errorBlock)\n\t\t\t\t{\n\t\t\t\t\tthis.$refs.errorBlock.innerHTML = '';\n\t\t\t\t}\n\t\t\t},\n\t\t\teditMenuItem(event, page)\n\t\t\t{\n\t\t\t\tthis.editedPageId = page.id;\n\t\t\t\tsetTimeout(() =>\n\t\t\t\t{\n\t\t\t\t\tevent.target.parentNode.parentNode.querySelector('input').focus();\n\t\t\t\t}, 50);\n\t\t\t},\n\t\t\tsaveMenuItem(event)\n\t\t\t{\n\t\t\t\tconst pageId = this.editedPageId;\n\t\t\t\tconst name = event.target.value;\n\t\t\t\tlet oldName;\n\t\t\t\tthis.pages.forEach((page) =>\n\t\t\t\t{\n\t\t\t\t\tif(page.id === this.editedPageId)\n\t\t\t\t\t{\n\t\t\t\t\t\toldName = page.name\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tif(pageId > 0 && oldName && name !== oldName && name.length > 0)\n\t\t\t\t{\n\t\t\t\t\tManager.addPage({\n\t\t\t\t\t\tid: pageId,\n\t\t\t\t\t\tname: name,\n\t\t\t\t\t\tanalyticsLabel: 'salescenterUpdatePageTitle',\n\t\t\t\t\t}).then(() =>\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$root.$app.fillPages().then(() => {\n\t\t\t\t\t\t\tif(this.editedPageId === this.currentPageId)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.setPageTitle(name);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthis.editedPageId = null;\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.editedPageId = null;\n\t\t\t\t}\n\t\t\t},\n\t\t\tcreateLoader()\n\t\t\t{\n\t\t\t\tconst loader = new Loader({size: 200});\n\t\t\t\tloader.show(this.$refs['previewLoader']);\n\t\t\t}\n\t\t},\n\n\tcomputed:\n\t\t{\n\t\t\tconfig: () => config,\n\t\t\tcurrentPage()\n\t\t\t{\n\t\t\t\tif(this.currentPageId > 0)\n\t\t\t\t{\n\t\t\t\t\tlet pages = this.application.pages.filter((page) =>\n\t\t\t\t\t{\n\t\t\t\t\t\treturn page.id === this.currentPageId;\n\t\t\t\t\t});\n\t\t\t\t\tif(pages.length > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn pages[0];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn null;\n\t\t\t},\n\n\t\t\tsendButtonLabel()\n\t\t\t{\n\t\t\t\treturn this.editable && !this.$root.$app?.compilation\n\t\t\t\t\t? Loc.getMessage('SALESCENTER_SEND')\n\t\t\t\t\t: Loc.getMessage('SALESCENTER_RESEND')\n\t\t\t\t\t;\n\t\t\t},\n\n\t\t\tpagesSubmenuHeight()\n\t\t\t{\n\t\t\t\tif(this.isPagesOpen)\n\t\t\t\t{\n\t\t\t\t\treturn (this.application.pages.filter((page) =>\n\t\t\t\t\t{\n\t\t\t\t\t\treturn !page.isWebform;\n\t\t\t\t\t}).length * 39 + 30) + 'px';\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\treturn '0px';\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tformsSubmenuHeight()\n\t\t\t{\n\t\t\t\tif(this.isFormsOpen)\n\t\t\t\t{\n\t\t\t\t\treturn (this.application.pages.filter((page) =>\n\t\t\t\t\t{\n\t\t\t\t\t\treturn page.isWebform;\n\t\t\t\t\t}).length * 39 + 30) + 'px';\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\treturn '0px';\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tisFrameError()\n\t\t\t{\n\t\t\t\tif(this.isShowPreview && this.currentPage)\n\t\t\t\t{\n\t\t\t\t\tif(!this.currentPage.isActive)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\telse if(!this.currentPage.landingId && this.errorPageIds.includes(this.currentPage.id))\n\t\t\t\t\t{\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t},\n\n\t\t\tisShowLoader()\n\t\t\t{\n\t\t\t\treturn (\n\t\t\t\t\tthis.isShowPreview &&\n\t\t\t\t\tthis.currentPageId > 0 &&\n\t\t\t\t\tthis.showedPageIds.includes(this.currentPageId) &&\n\t\t\t\t\t!this.loadedPageIds.includes(this.currentPageId)\n\t\t\t\t);\n\t\t\t},\n\n\t\t\tisShowStartInfo()\n\t\t\t{\n\t\t\t\tlet res = false;\n\t\t\t\tif(this.isShowPreview)\n\t\t\t\t{\n\t\t\t\t\tres = (!this.pages || this.pages.length <= 0);\n\t\t\t\t}\n\t\t\t\telse if(this.isShowPayment)\n\t\t\t\t{\n\t\t\t\t\tres = !this.isOrderPublicUrlAvailable;\n\t\t\t\t}\n\n\t\t\t\treturn res;\n\t\t\t},\n\n\t\t\tlastModified()\n\t\t\t{\n\t\t\t\tif(this.currentPage && this.currentPage.modifiedAgo)\n\t\t\t\t{\n\t\t\t\t\treturn this.localize.SALESCENTER_MODIFIED.replace('#AGO#', this.currentPage.modifiedAgo);\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\t\t\t},\n\n\t\t\tlocalize()\n\t\t\t{\n\t\t\t\treturn Vue.getFilteredPhrases('SALESCENTER_');\n\t\t\t},\n\n\t\t\tpages()\n\t\t\t{\n\t\t\t\treturn [...this.application.pages];\n\t\t\t},\n\n\t\t\tisAllowedSubmitButton()\n\t\t\t{\n\t\t\t\tif(this.$root.$app.disableSendButton)\n\t\t\t\t{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tif (this.isShowPreview && this.currentPage && !this.currentPage.isActive)\n\t\t\t\t{\n\t\t\t\t\treturn false\n\t\t\t\t}\n\t\t\t\tif (this.isShowPayment)\n\t\t\t\t{\n\t\t\t\t\treturn this.$store.getters['orderCreation/isAllowedSubmit'];\n\t\t\t\t}\n\t\t\t\treturn this.currentPage;\n\t\t\t},\n\t\t\tshowSubmitCompilationLinkToFacebookButton()\n\t\t\t{\n\t\t\t\tconst isCompilationMode = this.$store.getters['orderCreation/isCompilationMode'];\n\n\t\t\t\treturn this.$root.$app.connector === 'facebook' && this.$root.$app.isAllowedFacebookRegion && isCompilationMode;\n\t\t\t},\n\t\t\tisNoPaymentSystemsBannerVisible()\n\t\t\t{\n\t\t\t\treturn this.$root.$app.options.showPaySystemSettingBanner;\n\t\t\t},\n\t\t\tmode()\n\t\t\t{\n\t\t\t\treturn this.$root.$app.options.mode;\n\t\t\t},\n\t\t\t...Vuex.mapState({\n\t\t\t\tapplication: state => state.application,\n\t\t\t\torder: state => state.orderCreation,\n\t\t\t})\n\t\t},\n\ttemplate: `\n\t\t<div\n\t\t\t:class=\"wrapperClass\"\n\t\t\t:style=\"wrapperStyle\"\n\t\t\tclass=\"salescenter-app-wrapper salescenter-app-chat-wrapper\"\n\t\t>\n\t\t\t<div class=\"ui-sidepanel-sidebar salescenter-app-sidebar\" ref=\"sidebar\">\n\t\t\t\t<ul class=\"ui-sidepanel-menu\" ref=\"sidepanelMenu\">\n\t\t\t\t\t<li v-if=\"this.$root.$app.isPaymentCreationAvailable && !this.compilation\" :class=\"{ 'salescenter-app-sidebar-menu-active': this.isShowPayment}\" class=\"ui-sidepanel-menu-item\" @click=\"showPaymentForm\">\n\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link\">\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">{{getPaymentItemTitle()}}</div>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li v-if=\"this.compilation\" :class=\"{ 'salescenter-app-sidebar-menu-active': this.isShowPayment}\" class=\"ui-sidepanel-menu-item\" @click=\"showPaymentForm\">\n\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link\">\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">{{this.compilation.TITLE_TAB}}</div>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li :class=\"{'salescenter-app-sidebar-menu-active': isPagesOpen}\" class=\"ui-sidepanel-menu-item\">\n\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link\" @click.stop.prevent=\"isPagesOpen = !isPagesOpen;\">\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">{{localize.SALESCENTER_LEFT_PAGES}}</div>\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-toggle-btn\">{{this.isPagesOpen ? this.localize.SALESCENTER_SUBMENU_CLOSE : this.localize.SALESCENTER_SUBMENU_OPEN}}</div>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t<ul class=\"ui-sidepanel-submenu\" :style=\"{height: pagesSubmenuHeight}\">\n\t\t\t\t\t\t\t<li v-for=\"page in pages\" v-if=\"!page.isWebform\" :key=\"page.id\"\n\t\t\t\t\t\t\t:class=\"{\n\t\t\t\t\t\t\t\t'ui-sidepanel-submenu-active': (currentPage && currentPage.id == page.id && isShowPreview),\n\t\t\t\t\t\t\t\t'ui-sidepanel-submenu-edit-mode': (editedPageId === page.id)\n\t\t\t\t\t\t\t}\" class=\"ui-sidepanel-submenu-item\">\n\t\t\t\t\t\t\t\t<a :title=\"page.name\" class=\"ui-sidepanel-submenu-link\" @click.stop=\"onPageClick(page)\">\n\t\t\t\t\t\t\t\t\t<input class=\"ui-sidepanel-input\" :value=\"page.name\" v-on:keyup.enter=\"saveMenuItem($event)\" @blur=\"saveMenuItem($event)\" />\n\t\t\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">{{page.name}}</div>\n\t\t\t\t\t\t\t\t\t<div v-if=\"lastAddedPages.includes(page.id)\" class=\"ui-sidepanel-badge-new\"></div>\n\t\t\t\t\t\t\t\t\t<div class=\"ui-sidepanel-edit-btn\"><span class=\"ui-sidepanel-edit-btn-icon\" @click=\"editMenuItem($event, page);\"></span></div>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li class=\"salescenter-app-helper-nav-item salescenter-app-menu-add-page\" @click.stop=\"showAddPageActionPopup($event)\">\n\t\t\t\t\t\t\t\t<span class=\"salescenter-app-helper-nav-item-text salescenter-app-helper-nav-item-add\">+</span><span class=\"salescenter-app-helper-nav-item-text\">{{localize.SALESCENTER_RIGHT_ACTION_ADD}}</span>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li v-if=\"this.$root.$app.isWithOrdersMode\" @click=\"showOrdersList\">\n\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link\">\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">{{localize.SALESCENTER_LEFT_ORDERS}}</div>\n\t\t\t\t\t\t\t<span class=\"ui-sidepanel-counter\" ref=\"ordersCounter\" v-show=\"ordersCount > 0\">{{ordersCount}}</span>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li v-if=\"this.$root.$app.isWithOrdersMode\" @click=\"showOrderAdd\">\n\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link\">\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">{{localize.SALESCENTER_LEFT_ORDER_ADD}}</div>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li v-if=\"!this.$root.$app.isWithOrdersMode\" @click=\"showPaymentsList\">\n\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link\">\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">{{localize.SALESCENTER_LEFT_PAYMENTS}}</div>\n\t\t\t\t\t\t\t<span class=\"ui-sidepanel-counter\" ref=\"paymentsCounter\" v-show=\"paymentsCount > 0\">{{paymentsCount}}</span>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li v-if=\"this.$root.$app.isCatalogAvailable\" @click=\"showCatalog\">\n\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link\">\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">{{localize.SALESCENTER_LEFT_CATALOG}}</div>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li :class=\"{'salescenter-app-sidebar-menu-active': isFormsOpen}\" class=\"ui-sidepanel-menu-item\">\n\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link\" @click.stop.prevent=\"onFormsClick();\">\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">{{localize.SALESCENTER_LEFT_FORMS_ALL}}</div>\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-toggle-btn\">{{this.isFormsOpen ? this.localize.SALESCENTER_SUBMENU_CLOSE : this.localize.SALESCENTER_SUBMENU_OPEN}}</div>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t<ul class=\"ui-sidepanel-submenu\" :style=\"{height: formsSubmenuHeight}\">\n\t\t\t\t\t\t\t<li v-for=\"page in pages\" v-if=\"page.isWebform\" :key=\"page.id\"\n\t\t\t\t\t\t\t :class=\"{\n\t\t\t\t\t\t\t\t'ui-sidepanel-submenu-active': (currentPage && currentPage.id == page.id && isShowPreview),\n\t\t\t\t\t\t\t\t'ui-sidepanel-submenu-edit-mode': (editedPageId === page.id)\n\t\t\t\t\t\t\t}\" class=\"ui-sidepanel-submenu-item\">\n\t\t\t\t\t\t\t\t<a :title=\"page.name\" class=\"ui-sidepanel-submenu-link\" @click.stop=\"onPageClick(page)\">\n\t\t\t\t\t\t\t\t\t<input class=\"ui-sidepanel-input\" :value=\"page.name\" v-on:keyup.enter=\"saveMenuItem($event)\" @blur=\"saveMenuItem($event)\" />\n\t\t\t\t\t\t\t\t\t<div v-if=\"lastAddedPages.includes(page.id)\" class=\"ui-sidepanel-badge-new\"></div>\n\t\t\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">{{page.name}}</div>\n\t\t\t\t\t\t\t\t\t<div class=\"ui-sidepanel-edit-btn\"><span class=\"ui-sidepanel-edit-btn-icon\" @click=\"editMenuItem($event, page);\"></span></div>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li class=\"salescenter-app-helper-nav-item salescenter-app-menu-add-page\" @click.stop=\"showAddPageActionPopup($event, true)\">\n\t\t\t\t\t\t\t\t<span class=\"salescenter-app-helper-nav-item-text salescenter-app-helper-nav-item-add\">+</span><span class=\"salescenter-app-helper-nav-item-text\">{{localize.SALESCENTER_RIGHT_ACTION_ADD}}</span>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t\t<div class=\"salescenter-app-right-side\">\n\t\t\t\t<div class=\"salescenter-app-page-header\" v-show=\"isShowPreview && !isShowStartInfo\">\n\t\t\t\t\t<div class=\"salescenter-btn-action ui-btn ui-btn-link ui-btn-dropdown ui-btn-xs\" @click=\"showActionsPopup($event)\">{{localize.SALESCENTER_RIGHT_ACTIONS_BUTTON}}</div>\n\t\t\t\t\t<div class=\"salescenter-btn-delimiter salescenter-btn-action\"></div>\n\t\t\t\t\t<div class=\"salescenter-btn-action ui-btn ui-btn-link ui-btn-xs ui-btn-icon-edit\" @click=\"editPage\">{{localize.SALESCENTER_RIGHT_ACTION_EDIT}}</div>\n\t\t\t\t</div>\n\t\t\t\t<start\n\t\t\t\t\tv-if=\"isShowStartInfo\"\n\t\t\t\t\t@on-successfully-connected=\"onSuccessfullyConnected\"\n\t\t\t\t>\n\t\t\t\t</start>\n\t\t\t\t<template v-else-if=\"isFrameError && isShowPreview\">\n\t\t\t\t\t<div class=\"salescenter-app-page-content salescenter-app-lost\">\n\t\t\t\t\t\t<div class=\"salescenter-app-lost-block ui-title-1 ui-text-center ui-color-medium\">{{localize.SALESCENTER_ERROR_TITLE}}</div>\n\t\t\t\t\t\t<div v-if=\"currentPage.isFrameDenied === true\" class=\"salescenter-app-lost-helper ui-color-medium\">{{localize.SALESCENTER_RIGHT_FRAME_DENIED}}</div>\n\t\t\t\t\t\t<div v-else-if=\"currentPage.isActive !== true\" class=\"salescenter-app-lost-helper salescenter-app-not-active ui-color-medium\">{{localize.SALESCENTER_RIGHT_NOT_ACTIVE}}</div>\n\t\t\t\t\t\t<div v-else class=\"salescenter-app-lost-helper ui-color-medium\">{{localize.SALESCENTER_ERROR_TEXT}}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t\t<div v-show=\"isShowPreview && !isShowStartInfo && !isFrameError\" class=\"salescenter-app-page-content\">\n\t\t\t\t\t<template v-for=\"page in pages\">\n\t\t\t\t\t\t<iframe class=\"salescenter-app-demo\" v-show=\"currentPage && currentPage.id == page.id\" :src=\"getFrameSource(page)\" frameborder=\"0\" @error=\"onFrameError(page.id)\" @load=\"onFrameLoad(page.id)\" :key=\"page.id\"></iframe>\n\t\t\t\t\t</template>\n\t\t\t\t\t<div class=\"salescenter-app-demo-overlay\" :class=\"{\n\t\t\t\t\t\t'salescenter-app-demo-overlay-loading': this.isShowLoader\n\t\t\t\t\t}\">\n\t\t\t\t\t\t<div v-show=\"isShowLoader\" ref=\"previewLoader\"></div>\n\t\t\t\t\t\t<div v-if=\"lastModified\" class=\"salescenter-app-demo-overlay-modification\">{{lastModified}}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t    <template v-if=\"this.$root.$app.isPaymentsLimitReached\">\n\t\t\t        <div ref=\"paymentsLimit\" v-show=\"isShowPayment && !isShowStartInfo\"></div>\n\t\t\t\t</template>\n\t\t\t\t<template v-else>\n\t\t\t\t\t<chat-receiving-payment\n\t\t\t\t\t\tv-if=\"isShowPayment && !isShowStartInfo\"\n\t\t\t\t\t\t:key=\"order.basketVersion\"\n\t\t\t\t\t\t@stage-block-send-on-send=\"send($event)\"\n\t\t\t\t\t\t@stage-block-send-on-send-compilation-link-to-facebook=\"sendCompilationLinkToFacebook($event)\"\n\t\t\t\t\t/>\n\t\t        </template>\n\t\t\t</div>\n\t\t\t<div class=\"ui-button-panel-wrapper salescenter-button-panel\" ref=\"buttonsPanel\">\n\t\t\t\t<div class=\"ui-button-panel\">\n\t\t\t\t\t<button :class=\"{'ui-btn-disabled': !this.isAllowedSubmitButton}\" class=\"ui-btn ui-btn-md ui-btn-success\" @click=\"send($event)\">{{sendButtonLabel}}</button>\n\t\t\t\t\t<button\n\t\t\t\t\t\tv-if=\"showSubmitCompilationLinkToFacebookButton\"\n\t\t\t\t\t\t:class=\"{'ui-btn-disabled': !this.isAllowedSubmitButton}\"\n\t\t\t\t\t\tclass=\"ui-btn ui-btn-md ui-btn-light-border\"\n\t\t\t\t\t\t@click=\"sendCompilationLinkToFacebook($event)\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{localize.SALESCENTER_SEND_COMPILATION_LINK_TO_FACEBOOK}}\n\t\t\t\t\t</button>\n\t\t\t\t\t<button class=\"ui-btn ui-btn-md ui-btn-link\" @click=\"close\">{{localize.SALESCENTER_CANCEL}}</button>\n\t\t\t\t\t<button v-if=\"isShowPayment && !isShowStartInfo && !this.$root.$app.isPaymentsLimitReached && this.$root.$app.isWithOrdersMode\" class=\"ui-btn ui-btn-md ui-btn-link btn-send-crm\" @click=\"send($event, 'y')\">{{localize.SALESCENTER_SAVE_ORDER}}</button>\n\t\t\t\t</div>\n\t\t\t\t<div v-if=\"this.order.errors.length > 0\" ref=\"errorBlock\"></div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n}\n","import { Loc, ajax as Ajax } from 'main.core';\nimport { Block } from 'salescenter.component.stage-block';\nimport { StageMixin } from './stage-mixin';\nimport { Error, SenderList, UserAvatar, MessageEdit, MessageView, MessageEditor, MessageControl } from 'salescenter.component.stage-block.sms-message';\nimport { Manager } from \"salescenter.manager\";\nimport { SenderConfig } from \"salescenter.lib\";\nimport {UI} from \"ui.notification\";\n\nconst TYPE_PHONE = 'phone';\nconst TYPE_SENDER = 'sender';\n\nconst SmsMessage = {\n\tprops: {\n\t\tinitSenders: {\n\t\t\ttype: Array,\n\t\t\trequired: true\n\t\t},\n\t\tinitCurrentSenderCode: {\n\t\t\ttype: String,\n\t\t\trequired: false\n\t\t},\n\t\tinitPushedToUseBitrix24Notifications: {\n\t\t\ttype: String,\n\t\t\trequired: false\n\t\t},\n\t\tstatus: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\tcounter: {\n\t\t\ttype: Number,\n\t\t\trequired: true\n\t\t},\n\t\tmanager: {\n\t\t\ttype: Object,\n\t\t\trequired: true\n\t\t},\n\t\tselectedSmsSender: {\n\t\t\ttype: String,\n\t\t\trequired: false\n\t\t},\n\t\tphone: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\tcontactEditorUrl: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\townerTypeId: {\n\t\t\ttype: Number,\n\t\t\trequired: true\n\t\t},\n\t\townerId: {\n\t\t\ttype: Number,\n\t\t\trequired: true\n\t\t},\n\t\ttitleTemplate: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\tshowHint: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true\n\t\t},\n\t\teditorTemplate: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\teditorUrl: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\tselectedMode: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t}\n\t},\n\tmixins: [StageMixin],\n\tcomponents: {\n\t\t'stage-block-item':\tBlock,\n\t\t'sms-error-block': Error,\n\t\t'sms-sender-list-block': SenderList,\n\t\t'sms-user-avatar-block': UserAvatar,\n\t\t'sms-message-edit-block': MessageEdit,\n\t\t'sms-message-view-block': MessageView,\n\t\t'sms-message-editor-block': MessageEditor,\n\t\t'sms-message-control-block': MessageControl,\n\t},\n\tdata()\n\t{\n\t\treturn {\n\t\t\tcontactPhone: this.phone,\n\t\t\tcurrentSenderCode: null,\n\t\t\tsenders: [],\n\t\t\tpushedToUseBitrix24Notifications: null,\n\t\t\tsmsSenderListComponentKey: 0,\n\t\t}\n\t},\n\tcomputed: {\n\t\tconfigForBlock()\n\t\t{\n\t\t\treturn {\n\t\t\t\tcounter: this.counter,\n\t\t\t\tchecked: this.counterCheckedMixin,\n\t\t\t\tshowHint: true,\n\t\t\t\thintClassModifier: 'salescenter-app-payment-by-sms-item-title-info--link-gray',\n\t\t\t}\n\t\t},\n\t\teditor()\n\t\t{\n\t\t\treturn {\n\t\t\t\ttemplate: this.editorTemplate,\n\t\t\t\turl: this.editorUrl\n\t\t\t};\n\t\t},\n\t\tcurrentSender()\n\t\t{\n\t\t\treturn this.senders.find(sender => sender.code === this.currentSenderCode);\n\t\t},\n\t\ttitle()\n\t\t{\n\t\t\treturn this.titleTemplate.replace('#PHONE#', this.contactPhone);\n\t\t},\n\t\terrors()\n\t\t{\n\t\t\tlet result = [];\n\n\t\t\tlet bitrix24ConnectUrlError;\n\n\t\t\tif (!this.currentSender)\n\t\t\t{\n\t\t\t\tfor (let sender of this.senders)\n\t\t\t\t{\n\t\t\t\t\tif (!SenderConfig.needConfigure(sender))\n\t\t\t\t\t{\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tresult.push({\n\t\t\t\t\t\ttext: this.getConnectionErrorText(sender),\n\t\t\t\t\t\tfixer: SenderConfig.openSliderFreeMessages(sender.connectUrl),\n\t\t\t\t\t\tfixText: this.getConnectionErrorFixText(sender),\n\t\t\t\t\t\ttype: TYPE_SENDER\n\t\t\t\t\t});\n\n\t\t\t\t\tif (sender.code === SenderConfig.BITRIX24)\n\t\t\t\t\t{\n\t\t\t\t\t\tbitrix24ConnectUrlError = sender.connectUrl;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (!this.currentSender.isAvailable)\n\t\t\t\t{\n\t\t\t\t\tresult.push({\n\t\t\t\t\t\ttext: Loc.getMessage('SALESCENTER_SEND_ORDER_BY_SMS_' + this.currentSender.code.toUpperCase() + '_NOT_AVAILABLE'),\n\t\t\t\t\t\ttype: TYPE_SENDER\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tif (this.currentSender.isConnected)\n\t\t\t\t\t{\n\t\t\t\t\t\tresult = this.currentSender.usageErrors.map(error => ({ text: error, type: TYPE_SENDER }))\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tresult.push({\n\t\t\t\t\t\t\ttext: this.getConnectionErrorText(this.currentSender),\n\t\t\t\t\t\t\tfixer: this.getFixer(this.currentSender.connectUrl),\n\t\t\t\t\t\t\tfixText: this.getConnectionErrorFixText(this.currentSender),\n\t\t\t\t\t\t\ttype: TYPE_SENDER\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif (this.currentSender.code === SenderConfig.BITRIX24)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tbitrix24ConnectUrlError = this.currentSender.connectUrl;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!this.contactPhone)\n\t\t\t{\n\t\t\t\tif(this.contactEditorUrl.length > 0)\n\t\t\t\t{\n\t\t\t\t\tresult.push({\n\t\t\t\t\t\ttext: Loc.getMessage('SALESCENTER_SEND_ORDER_BY_SMS_SENDER_ALERT_PHONE_EMPTY'),\n\t\t\t\t\t\tfixer: this.getFixer(this.contactEditorUrl),\n\t\t\t\t\t\tfixText: Loc.getMessage('SALESCENTER_SEND_ORDER_BY_SMS_SENDER_ALERT_PHONE_EMPTY_SETTINGS'),\n\t\t\t\t\t\ttype: TYPE_PHONE\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tresult.push({\n\t\t\t\t\t\ttext: Loc.getMessage('SALESCENTER_SEND_ORDER_BY_SMS_SENDER_ALERT_PHONE_EMPTY'),\n\t\t\t\t\t\ttype: TYPE_PHONE\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif (this.pushedToUseBitrix24Notifications === 'N' && bitrix24ConnectUrlError)\n\t\t\t{\n\t\t\t\tthis.getFixer(bitrix24ConnectUrlError)().then(() => this.handleErrorFix());\n\t\t\t\tBX.userOptions.save('salescenter', 'payment_sender_options', 'pushed_to_use_bitrix24_notifications', 'Y');\n\t\t\t\tthis.pushedToUseBitrix24Notifications = 'Y';\n\t\t\t}\n\n\t\t\treturn result;\n\t\t}\n\t},\n\tcreated() {\n\t\tthis.initialize(this.initCurrentSenderCode, this.initSenders, this.initPushedToUseBitrix24Notifications);\n\t},\n\tmethods: {\n\t\tonConfigureContactPhone()\n\t\t{\n\t\t\tthis.$emit('stage-block-sms-message-on-change-contact-phone');\n\t\t},\n\t\tgetConnectionErrorText(sender)\n\t\t{\n\t\t\tconst messageCode = 'SALESCENTER_SEND_ORDER_BY_SMS_' + sender.code.toUpperCase() + '_NOT_CONNECTED_WARNING';\n\t\t\tconst fallback = 'SALESCENTER_SEND_ORDER_BY_SMS_' + sender.code.toUpperCase() + '_NOT_CONNECTED';\n\n\t\t\treturn Loc.getMessage(messageCode) || Loc.getMessage(fallback);\n\t\t},\n\t\tgetConnectionErrorFixText(sender)\n\t\t{\n\t\t\tconst messageCode = 'SALESCENTER_SEND_ORDER_BY_SMS_' + sender.code.toUpperCase() + '_NOT_CONNECTED_FIX';\n\t\t\tconst fallback = 'SALESCENTER_PRODUCT_DISCOUNT_EDIT_PAGE_URL_TITLE';\n\n\t\t\treturn Loc.getMessage(messageCode) || Loc.getMessage(fallback);\n\t\t},\n\t\tgetFixer(fixUrl)\n\t\t{\n\t\t\treturn () => {\n\t\t\t\tif (typeof fixUrl === 'string')\n\t\t\t\t{\n\t\t\t\t\treturn Manager.openSlider(fixUrl, {\n\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\tonLoad: function(event) {\n\t\t\t\t\t\t\t\tconst slider = event.getSlider();\n\t\t\t\t\t\t\t\tconst sliderBx = slider.getFrameWindow().BX;\n\t\t\t\t\t\t\t\tsliderBx.addCustomEvent(\"BX.Crm.EntityEditor:onNothingChanged\", () => slider.close());\n\t\t\t\t\t\t\t\tsliderBx.addCustomEvent(\"BX.Crm.EntityEditor:onCancel\", () => slider.close());\n\t\t\t\t\t\t\t\tsliderBx.addCustomEvent(\"onCrmEntityUpdate\", () => slider.close());\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tif (typeof fixUrl === 'object' && fixUrl !== null)\n\t\t\t\t{\n\t\t\t\t\tif (fixUrl.type === 'ui_helper')\n\t\t\t\t\t{\n\t\t\t\t\t\treturn BX.loadExt('ui.info-helper').then(() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tBX.UI.InfoHelper.show(fixUrl.value);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn Promise.resolve();\n\t\t\t};\n\t\t},\n\t\tonItemHint(e)\n\t\t{\n\t\t\tBX.Salescenter.Manager.openSlider(this.$root.$app.options.urlSettingsCompanyContacts, {width: 1200} );\n\t\t},\n\t\tinitialize(currentSenderCode, senders, pushedToUseBitrix24Notifications)\n\t\t{\n\t\t\tthis.currentSenderCode = currentSenderCode;\n\t\t\tthis.senders = senders;\n\t\t\tthis.pushedToUseBitrix24Notifications = pushedToUseBitrix24Notifications;\n\t\t},\n\t\thandleOnSmsSenderSelected(value)\n\t\t{\n\t\t\tthis.$emit('stage-block-sms-send-on-change-provider', value);\n\t\t},\n\t\thandleErrorFix()\n\t\t{\n\t\t\tAjax.runComponentAction(\"bitrix:salescenter.app\", \"refreshSenderSettings\", {\n\t\t\t\tmode: \"class\"\n\t\t\t})\n\t\t\t\t.then((resolve)=> {\n\t\t\t\t\tif (BX.type.isObject(resolve.data) && Object.values(resolve.data).length > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.initialize(\n\t\t\t\t\t\t\tresolve.data.currentSenderCode,\n\t\t\t\t\t\t\tresolve.data.senders,\n\t\t\t\t\t\t\tresolve.data.pushedToUseBitrix24Notifications\n\t\t\t\t\t\t);\n\t\t\t\t\t\tthis.smsSenderListComponentKey += 1;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t},\n\t\thandlePhoneErrorFix()\n\t\t{\n\t\t\tAjax.runComponentAction(\"bitrix:salescenter.app\", \"refreshContactPhone\", {\n\t\t\t\tmode: \"class\",\n\t\t\t\tdata: {\n\t\t\t\t\tfields:{\n\t\t\t\t\t\townerId: this.ownerId,\n\t\t\t\t\t\townerTypeId: this.ownerTypeId,\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t})\n\t\t\t.then((resolve)=> {\n\t\t\t\tif (BX.type.isObject(resolve.data) && Object.values(resolve.data).length > 0)\n\t\t\t\t{\n\t\t\t\t\tif(this.contactPhone != resolve.data.contactPhone)\n\t\t\t\t\t{\n\t\t\t\t\t\tUI.Notification.Center.notify({\n\t\t\t\t\t\t\tcontent: Loc.getMessage('SALESCENTER_SEND_ORDER_BY_SMS_SENDER_PHONE_CHANGE', {\n\t\t\t\t\t\t\t\t'#TITLE#': resolve.data.title\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.contactPhone = resolve.data.contactPhone;\n\t\t\t\t\tthis.onConfigureContactPhone();\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\thendleSmsErrorBlock(event)\n\t\t{\n\t\t\tif(event.data.type === TYPE_PHONE)\n\t\t\t{\n\t\t\t\tthis.handlePhoneErrorFix()\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.handleErrorFix()\n\t\t\t}\n\t\t},\n\t\topenBitrix24NotificationsHelp(event)\n\t\t{\n\t\t\tBX.Salescenter.Manager.openBitrix24NotificationsHelp(event);\n\t\t},\n\t\topenBitrix24NotificationsWorks(event)\n\t\t{\n\t\t\tBX.Salescenter.Manager.openBitrix24NotificationsWorks(event);\n\t\t},\n\t},\n\t//language=Vue\n\ttemplate: `\n\t\t<stage-block-item\t\t\t\n\t\t\t:config=\"configForBlock\"\n\t\t\t:class=\"statusClassMixin\"\n\t\t\tv-on:on-item-hint=\"onItemHint\"\n\t\t>\n\t\t\t<template v-slot:block-title-title>{{title}}</template>\n\t\t\t<template\n\t\t\t\tv-if=\"showHint\"\n\t\t\t\tv-slot:block-hint-title\n\t\t\t>\n\t\t\t\t${Loc.getMessage('SALESCENTER_LEFT_PAYMENT_COMPANY_CONTACTS_V3')}\n\t\t\t</template>\n\t\t\t<template v-slot:block-container>\n\t\t\t\t<div :class=\"containerClassMixin\" class=\"salescenter-app-payment-by-sms-item-container-offtop\">\n\t\t\t\t\t<sms-error-block\n\t\t\t\t\t\tv-for=\"error in errors\"\n\t\t\t\t\t\tv-on:on-configure=\"hendleSmsErrorBlock($event)\"\n\t\t\t\t\t\t:error=\"error\"\n\t\t\t\t\t>\n\t\t\t\t\t</sms-error-block>\n\t\t\t\t\t\n\t\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container-sms\">\n\t\t\t\t\t\t<sms-user-avatar-block :manager=\"manager\"/>\n\t\t\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container-sms-content\">\n\t\t\t\t\t\t\t<div v-if=\"currentSenderCode === 'bitrix24'\" class=\"salescenter-app-payment-by-sms-item-container-sms-content\">\n\t\t\t\t\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container-sms-content-message\">\n\t\t\t\t\t\t\t\t\t<div contenteditable=\"false\" class=\"salescenter-app-payment-by-sms-item-container-sms-content-message-text\">\n\t\t\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_TEMPLATE_BASED_MESSAGE_WILL_BE_SENT')}\n\t\t\t\t\t\t\t\t\t\t<a @click.stop.prevent=\"openBitrix24NotificationsHelp(event)\" href=\"#\">\n\t\t\t\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_MORE_DETAILS')}\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<sms-message-editor-block v-else :editor=\"editor\" :selectedMode=\"selectedMode\"/>\n\t\t\t\t\t\t\t<template v-if=\"currentSenderCode === 'bitrix24'\">\n\t\t\t\t\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container-sms-content-info\">\n\t\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_SEND_ORDER_VIA_BITRIX24')}\n\t\t\t\t\t\t\t\t\t<span @click=\"openBitrix24NotificationsWorks(event)\">\n\t\t\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_PRODUCT_SET_BLOCK_TITLE_SHORT')}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t<template v-else-if=\"currentSenderCode === 'sms_provider'\">\n\t\t\t\t\t\t\t\t<sms-sender-list-block\n\t\t\t\t\t\t\t\t\t:key=\"smsSenderListComponentKey\"\n\t\t\t\t\t\t\t\t\t:list=\"currentSender.smsSenders\"\n\t\t\t\t\t\t\t\t\t:initSelected=\"selectedSmsSender\"\n\t\t\t\t\t\t\t\t\t:settingUrl=\"currentSender.connectUrl\"\n\t\t\t\t\t\t\t\t\tv-on:on-configure=\"handleErrorFix\"\n\t\t\t\t\t\t\t\t\tv-on:on-selected=\"handleOnSmsSenderSelected\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<template v-slot:sms-sender-list-text-send-from>\n\t\t\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_SEND_ORDER_BY_SMS_SENDER')}\n\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t</sms-sender-list-block>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</stage-block-item>\n\t`\n};\nexport {\n\tSmsMessage\n}\n","import {Loc} from 'main.core';\nimport {StatusTypes as Status} from 'salescenter.component.stage-block';\nimport * as TimeLineItem from 'salescenter.timeline';\nimport {UI} from 'ui.notification';\nimport {MixinTemplatesType} from '../templates-type-mixin';\nimport * as Tile from 'salescenter.tile';\nimport Send from './stage-blocks/send';\nimport {Cashbox} from '../stage-blocks/cashbox';\nimport Product from '../stage-blocks/product';\nimport {DeliveryVuex} from '../stage-blocks/delivery-vuex';\nimport {PaySystem} from '../stage-blocks/paysystem';\nimport {SmsMessage} from '../stage-blocks/sms-message';\nimport {Automation} from '../stage-blocks/automation';\nimport {StageMixin} from '../stage-blocks/stage-mixin';\nimport {TimeLine} from '../stage-blocks/timeline';\n\nexport default {\n\tcomponents: {\n\t\t'send-block': Send,\n\t\t'cashbox-block': Cashbox,\n\t\t'product-block': Product,\n\t\t'delivery-block': DeliveryVuex,\n\t\t'paysystem-block': PaySystem,\n\t\t'automation-block': Automation,\n\t\t'sms-message-block': SmsMessage,\n\t\t'timeline-block': TimeLine,\n\t},\n\tprops: {\n\t\tsendAllowed: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true\n\t\t},\n\t},\n\tdata()\n\t{\n\t\tlet stages =  {\n\t\t\tmessage: {\n\t\t\t\tinitSenders: this.$root.$app.options.senders,\n\t\t\t\tinitCurrentSenderCode: this.$root.$app.options.currentSenderCode,\n\t\t\t\tinitPushedToUseBitrix24Notifications: this.$root.$app.options.pushedToUseBitrix24Notifications,\n\t\t\t\tstatus: Status.complete,\n\t\t\t\tselectedSmsSender: this.$root.$app.sendingMethodDesc.provider,\n\t\t\t\tmanager: this.$root.$app.options.entityResponsible,\n\t\t\t\tphone: this.$root.$app.options.contactPhone,\n\t\t\t\townerId: this.$root.$app.options.ownerId,\n\t\t\t\townerTypeId: this.$root.$app.options.ownerTypeId,\n\t\t\t\tcontactEditorUrl: this.$root.$app.options.contactEditorUrl,\n\t\t\t\ttitleTemplate: this.$root.$app.sendingMethodDesc.sent\n\t\t\t\t\t? Loc.getMessage('SALESCENTER_APP_CONTACT_BLOCK_TITLE_MESSAGE_2_PAST_TIME')\n\t\t\t\t\t: Loc.getMessage('SALESCENTER_APP_CONTACT_BLOCK_TITLE_MESSAGE_2'),\n\t\t\t\tshowHint: this.$root.$app.options.templateMode !== 'view',\n\t\t\t\teditorTemplate: this.$root.$app.sendingMethodDesc.text,\n\t\t\t\teditorUrl: this.$root.$app.orderPublicUrl,\n\t\t\t\tselectedMode: 'payment',\n\t\t\t},\n\t\t\tproduct: {\n\t\t\t\tstatus: this.$root.$app.options.basket && this.$root.$app.options.basket.length > 0\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.current,\n\t\t\t\ttitle: this.$root.$app.options.templateMode === 'view'\n\t\t\t\t\t? Loc.getMessage('SALESCENTER_PRODUCT_BLOCK_TITLE_PAYMENT_VIEW')\n\t\t\t\t\t: Loc.getMessage('SALESCENTER_PRODUCT_BLOCK_TITLE_SHORT'),\n\t\t\t\thintTitle: this.$root.$app.options.templateMode === 'view'\n\t\t\t\t\t? ''\n\t\t\t\t\t: Loc.getMessage('SALESCENTER_PRODUCT_SET_BLOCK_TITLE_SHORT'),\n\t\t\t},\n\t\t\tpaysystem: {\n\t\t\t\tstatus: this.$root.$app.options.paySystemList.isSet\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled,\n\t\t\t\ttiles: this.getTileCollection(this.$root.$app.options.paySystemList.items),\n\t\t\t\tinstalled: this.$root.$app.options.paySystemList.isSet,\n\t\t\t\ttitleItems: this.getTitleItems(this.$root.$app.options.paySystemList.items),\n\t\t\t\tinitialCollapseState: this.$root.$app.options.isPaySystemCollapsed ? this.$root.$app.options.isPaySystemCollapsed === 'Y' : this.$root.$app.options.paySystemList.isSet,\n\t\t\t},\n\t\t\tcashbox: {},\n\t\t\tdelivery: {\n\t\t\t\tstatus: this.$root.$app.options.deliveryList.isInstalled\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled,\n\t\t\t\ttiles: this.getTileCollection(this.$root.$app.options.deliveryList.items),\n\t\t\t\tinstalled: this.$root.$app.options.deliveryList.isInstalled,\n\t\t\t\tinitialCollapseState: this.$root.$app.options.isDeliveryCollapsed ? this.$root.$app.options.isDeliveryCollapsed === 'Y' : this.$root.$app.options.deliveryList.isInstalled,\n\t\t\t},\n\t\t\tautomation: {},\n\t\t};\n\n\t\tif (this.$root.$app.options.cashboxList.hasOwnProperty('items'))\n\t\t{\n\t\t\tstages.cashbox = {\n\t\t\t\tstatus: this.$root.$app.options.cashboxList.isSet\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled,\n\t\t\t\ttiles: this.getTileCollection(this.$root.$app.options.cashboxList.items),\n\t\t\t\tinstalled: this.$root.$app.options.cashboxList.isSet,\n\t\t\t\ttitleItems: this.getTitleItems(this.$root.$app.options.cashboxList.items),\n\t\t\t\tinitialCollapseState: this.$root.$app.options.isCashboxCollapsed ? this.$root.$app.options.isCashboxCollapsed === 'Y' : this.$root.$app.options.cashboxList.isSet,\n\t\t\t};\n\t\t}\n\n\t\tif (this.$root.$app.options.isAutomationAvailable)\n\t\t{\n\t\t\tstages.automation = {\n\t\t\t\tstatus: Status.complete,\n\t\t\t\tstageOnOrderPaid: this.$root.$app.options.stageOnOrderPaid,\n\t\t\t\tstageOnDeliveryFinished: this.$root.$app.options.stageOnDeliveryFinished,\n\t\t\t\titems: this.$root.$app.options.entityStageList,\n\t\t\t\tinitialCollapseState: this.$root.$app.options.isAutomationCollapsed ? this.$root.$app.options.isAutomationCollapsed === 'Y' : false,\n\t\t\t};\n\t\t}\n\n\t\tif (this.$root.$app.options.hasOwnProperty('timeline'))\n\t\t{\n\t\t\tstages.timeline = {\n\t\t\t\titems: this.getTimelineCollection(this.$root.$app.options.timeline)\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (this.$root.$app.options.paySystemList.groups)\n\t\t{\n\t\t\tstages.paysystem.groups = this.getTileGroupsCollection(\n\t\t\t\tthis.$root.$app.options.paySystemList.groups,\n\t\t\t\tstages.paysystem.tiles\n\t\t\t);\n\t\t}\n\n\t\treturn {\n\t\t\tstages: stages,\n\t\t}\n\t},\n\tmixins: [\n\t\tStageMixin,\n\t\tMixinTemplatesType\n\t],\n\tcomputed: {\n\t\thasStageTimeLine()\n\t\t{\n\t\t\treturn this.stages.timeline.hasOwnProperty('items') && this.stages.timeline.items.length > 0;\n\t\t},\n\t\thasStageAutomation()\n\t\t{\n\t\t\treturn this.stages.automation.hasOwnProperty('items');\n\t\t},\n\t\thasStageCashBox()\n\t\t{\n\t\t\treturn this.stages.cashbox.hasOwnProperty('tiles');\n\t\t},\n\t\tsubmitButtonLabel()\n\t\t{\n\t\t\treturn this.editable ? Loc.getMessage('SALESCENTER_SEND') : Loc.getMessage('SALESCENTER_RESEND');\n\t\t},\n\t\tisHideDeliveryStage()\n\t\t{\n\t\t\treturn this.isViewWithoutDelivery();\n\t\t},\n\t},\n\tmethods: {\n\t\tinitCounter()\n\t\t{\n\t\t\tthis.counter = 1;\n\t\t},\n\t\tgetTimelineCollection(items)\n\t\t{\n\t\t\tlet list = [];\n\n\t\t\tObject.values(items).forEach(\n\t\t\t\toptions => list.push(TimeLineItem.Factory.create(options)));\n\n\t\t\treturn list;\n\t\t},\n\t\tgetTileCollection(items)\n\t\t{\n\t\t\tlet tiles = [];\n\t\t\tObject.values(items).forEach(\n\t\t\t\toptions => tiles.push(Tile.Factory.create(options)));\n\n\t\t\treturn tiles;\n\t\t},\n\t\tgetTileGroupsCollection(groups, tiles)\n\t\t{\n\t\t\tconst ret = [];\n\t\t\t\n\t\t\tif (groups instanceof Array)\n\t\t\t{\n\t\t\t\tObject.values(groups).forEach((item) => {\n\t\t\t\t\tconst group = new Tile.Group(item);\n\t\t\t\t\tgroup.fillTiles(tiles);\n\t\t\t\t\tret.push(group);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn ret;\n\t\t},\n\t\tgetTitleItems(items)\n\t\t{\n\t\t\tlet result = [];\n\t\t\titems.forEach((item) => {\n\t\t\t\tif (![Tile.More.type(), Tile.Offer.type()].includes(item.type))\n\t\t\t\t{\n\t\t\t\t\tresult.push(item);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn result;\n\t\t},\n\t\tstageRefresh(e, type)\n\t\t{\n\t\t\tBX.ajax.runComponentAction(\n\t\t\t\t\"bitrix:salescenter.app\",\n\t\t\t\t\"getAjaxData\",\n\t\t\t\t{\n\t\t\t\t\tmode: \"class\",\n\t\t\t\t\tdata: {\n\t\t\t\t\t\ttype: type,\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t).then(function(response) {\n\t\t\t\tif (response.data)\n\t\t\t\t{\n\t\t\t\t\tthis.refreshTilesByType(response.data, type);\n\t\t\t\t}\n\t\t\t}.bind(this),\n\t\t\tfunction() {\n\t\t\t\tUI.Notification.Center.notify({\n\t\t\t\t\tcontent: Loc.getMessage('SALESCENTER_DATA_UPDATE_ERROR'),\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\trefreshTilesByType(data, type)\n\t\t{\n\t\t\tif(type === 'PAY_SYSTEM')\n\t\t\t{\n\t\t\t\tthis.stages.paysystem.status = data.isSet\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled;\n\t\t\t\tthis.stages.paysystem.tiles = this.getTileCollection(data.items);\n\t\t\t\tthis.stages.paysystem.groups = this.getTileGroupsCollection(data.groups, this.stages.paysystem.tiles);\n\t\t\t\tthis.stages.paysystem.installed = data.isSet;\n\t\t\t}\n\t\t\telse if(type === 'CASHBOX')\n\t\t\t{\n\t\t\t\tthis.stages.cashbox.status = data.isSet\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled;\n\t\t\t\tthis.stages.cashbox.tiles = this.getTileCollection(data.items);\n\t\t\t\tthis.stages.cashbox.installed = data.isSet;\n\t\t\t\tthis.stages.cashbox.titleItems = this.getTitleItems(data.items);\n\t\t\t}\n\t\t\telse if(type === 'DELIVERY')\n\t\t\t{\n\t\t\t\tthis.stages.delivery.status = data.isSet\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled;\n\t\t\t\tthis.stages.delivery.tiles = this.getTileCollection(data.items);\n\t\t\t\tthis.stages.delivery.installed = data.isInstalled;\n\t\t\t}\n\t\t},\n\t\tonSend(event)\n\t\t{\n\t\t\tthis.$emit('stage-block-send-on-send', event)\n\t\t},\n\t\tchangeProvider(value)\n\t\t{\n\t\t\tthis.$root.$app.sendingMethodDesc.provider = value;\n\t\t\tBX.userOptions.save('salescenter', 'payment_sms_provider_options', 'latest_selected_provider', value);\n\t\t},\n\t\tchangeContactPhone(event)\n\t\t{\n\t\t\tthis.$emit('stage-block-on-reload', event)\n\t\t},\n\t\tsaveCollapsedOption(type, value)\n\t\t{\n\t\t\tBX.userOptions.save('salescenter', 'add_payment_collapse_options', type, value);\n\t\t},\n\t\tonProductFormModeChange()\n\t\t{\n\t\t\tconst isCompilationMode = this.$store.getters['orderCreation/isCompilationMode'];\n\t\t\tif (isCompilationMode)\n\t\t\t{\n\t\t\t\tthis.stages.delivery.status = Status.disabled;\n\n\t\t\t\tthis.stages.message.selectedMode = 'compilation';\n\t\t\t\tthis.$root.$app.sendingMethodDesc.text = this.$root.$app.sendingMethodDesc.text_modes.compilation;\n\t\t\t\tthis.stages.message.editorTemplate = this.$root.$app.sendingMethodDesc.text_modes.compilation;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.stages.delivery.status = this.$root.$app.options.deliveryList.isInstalled\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled;\n\n\t\t\t\tthis.stages.message.selectedMode = 'payment';\n\t\t\t\tthis.$root.$app.sendingMethodDesc.text = this.$root.$app.sendingMethodDesc.text_modes.payment;\n\t\t\t\tthis.stages.message.editorTemplate = this.$root.$app.sendingMethodDesc.text_modes.payment;\n\t\t\t}\n\t\t},\n\t\tisViewWithoutDelivery()\n\t\t{\n\t\t\treturn (\n\t\t\t\tthis.$root.$app.options.templateMode === 'view'\n\t\t\t\t&& parseInt(this.$root.$app.options.shipmentId) <= 0\n\t\t\t);\n\t\t}\n\t},\n\tcreated()\n\t{\n\t\tthis.initCounter();\n\t},\n\tbeforeUpdate()\n\t{\n\t\tthis.initCounter();\n\t},\n\t//language=Vue\n\ttemplate: `\n\t\t<div>\n\t\t\t<sms-message-block\n\t\t\t\t@stage-block-sms-send-on-change-provider=\"changeProvider\"\n\t\t\t\t@stage-block-sms-message-on-change-contact-phone=\"changeContactPhone\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.message.status\"\n\t\t\t\t:initSenders=\"stages.message.initSenders\"\n\t\t\t\t:initCurrentSenderCode=\"stages.message.initCurrentSenderCode\"\n\t\t\t\t:initPushedToUseBitrix24Notifications=\"stages.message.initPushedToUseBitrix24Notifications\"\n\t\t\t\t:selectedSmsSender=\"stages.message.selectedSmsSender\"\n\t\t\t\t:manager=\"stages.message.manager\"\n\t\t\t\t:phone=\"stages.message.phone\"\n\t\t\t\t:contactEditorUrl=\"stages.message.contactEditorUrl\"\n\t\t\t\t:ownerId=\"stages.message.ownerId\"\n\t\t\t\t:ownerTypeId=\"stages.message.ownerTypeId\"\n\t\t\t\t:titleTemplate=\"stages.message.titleTemplate\"\n\t\t\t\t:showHint=\"stages.message.showHint\"\n\t\t\t\t:editorTemplate=\"stages.message.editorTemplate\"\n\t\t\t\t:editorUrl=\"stages.message.editorUrl\"\n\t\t\t\t:selectedMode=\"stages.message.selectedMode\"\n\t\t\t/>\n\t\t\t<product-block\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.product.status\"\n\t\t\t\t:title=\"stages.product.title\"\n\t\t\t\t:hintTitle=\"stages.product.hintTitle\"\n\t\t\t\t@on-product-form-mode-change=\"onProductFormModeChange\"\n\t\t\t/>\n\t\t\t<paysystem-block\n\t\t\t\tv-if=\"editable\"\n\t\t\t\t@on-stage-tile-collection-slider-close=\"stageRefresh($event, 'PAY_SYSTEM')\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.paysystem.status\"\n\t\t\t\t:tiles=\"stages.paysystem.tiles\"\n\t\t\t\t:installed=\"stages.paysystem.installed\"\n\t\t\t\t:titleItems=\"stages.paysystem.titleItems\"\n\t\t\t\t:initialCollapseState=\"stages.paysystem.initialCollapseState\"\n\t\t\t\t@on-save-collapsed-option=\"saveCollapsedOption\"\n\t\t\t/>\n\t\t\t<cashbox-block\n\t\t\t\tv-if=\"editable && hasStageCashBox\"\n\t\t\t\t@on-stage-tile-collection-slider-close=\"stageRefresh($event, 'CASHBOX')\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.cashbox.status\"\n\t\t\t\t:tiles=\"stages.cashbox.tiles\"\n\t\t\t\t:installed=\"stages.cashbox.installed\"\n\t\t\t\t:titleItems=\"stages.cashbox.titleItems\"\n\t\t\t\t:initialCollapseState=\"stages.cashbox.initialCollapseState\"\n\t\t\t\t@on-save-collapsed-option=\"saveCollapsedOption\"\n\t\t\t/>\n\t\t\t<delivery-block\n\t\t\t\tv-if=\"!isHideDeliveryStage\"\n\t\t\t\t@on-stage-tile-collection-slider-close=\"stageRefresh($event, 'DELIVERY')\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.delivery.status\"\n\t\t\t\t:tiles=\"stages.delivery.tiles\"\n\t\t\t\t:installed=\"stages.delivery.installed\"\n\t\t\t\t:isCollapsible=\"true\"\n\t\t\t\t:initialCollapseState=\"stages.delivery.initialCollapseState\"\n\t\t\t\t@on-save-collapsed-option=\"saveCollapsedOption\"\n\t\t\t/>\n\t\t\t<automation-block\n\t\t\t\tv-if=\"editable && hasStageAutomation\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.automation.status\"\n\t\t\t\t:stageOnOrderPaid=\"stages.automation.stageOnOrderPaid\"\n\t\t\t\t:stageOnDeliveryFinished=\"stages.automation.stageOnDeliveryFinished\"\n\t\t\t\t:items=\"stages.automation.items\"\n\t\t\t\t:initialCollapseState=\"stages.automation.initialCollapseState\"\n\t\t\t\t@on-save-collapsed-option=\"saveCollapsedOption\"\n\t\t\t/>\n\t\t\t<send-block\n\t\t\t\t@on-submit=\"onSend\"\n\t\t\t\t:buttonEnabled=\"sendAllowed\"\n\t\t\t\t:showWhatClientSeesControl=\"!editable\"\n\t\t\t\t:buttonLabel=\"submitButtonLabel\"\n\t\t\t/>\n\t\t\t<timeline-block\n\t\t\t\tv-if=\"hasStageTimeLine\"\n\t\t\t\t:timelineItems=\"stages.timeline.items\"\n\t\t\t/>\n\t\t</div>\n\t`\n};\n","import {Loc} from 'main.core';\nimport {StatusTypes as Status} from 'salescenter.component.stage-block';\nimport * as TimeLineItem from 'salescenter.timeline';\nimport {UI} from 'ui.notification';\nimport {MixinTemplatesType} from '../templates-type-mixin';\nimport * as Tile from 'salescenter.tile';\nimport Send from '../deal-receiving-payment/stage-blocks/send';\nimport {Cashbox} from '../stage-blocks/cashbox';\nimport Product from '../stage-blocks/product';\nimport {PaySystem} from '../stage-blocks/paysystem';\nimport {SmsMessage} from '../stage-blocks/sms-message';\nimport {Automation} from '../stage-blocks/automation';\nimport {StageMixin} from '../stage-blocks/stage-mixin';\nimport {TimeLine} from '../stage-blocks/timeline';\nimport {DocumentSelector} from '../stage-blocks/document-selector';\n\nexport default {\n\tcomponents: {\n\t\t'send-block': Send,\n\t\t'cashbox-block': Cashbox,\n\t\t'product-block': Product,\n\t\t'paysystem-block': PaySystem,\n\t\t'automation-block': Automation,\n\t\t'sms-message-block': SmsMessage,\n\t\t'timeline-block': TimeLine,\n\t\t'document-selector-block': DocumentSelector,\n\t},\n\tprops: {\n\t\tsendAllowed: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true\n\t\t},\n\t},\n\tdata()\n\t{\n\t\tlet stages =  {\n\t\t\tmessage: {\n\t\t\t\tinitSenders: this.$root.$app.options.senders,\n\t\t\t\tinitCurrentSenderCode: this.$root.$app.options.currentSenderCode,\n\t\t\t\tinitPushedToUseBitrix24Notifications: this.$root.$app.options.pushedToUseBitrix24Notifications,\n\t\t\t\tstatus: Status.complete,\n\t\t\t\tselectedSmsSender: this.$root.$app.sendingMethodDesc.provider,\n\t\t\t\tmanager: this.$root.$app.options.entityResponsible,\n\t\t\t\tphone: this.$root.$app.options.contactPhone,\n\t\t\t\tcontactEditorUrl: this.$root.$app.options.contactEditorUrl,\n\t\t\t\ttitleTemplate: this.$root.$app.sendingMethodDesc.sent\n\t\t\t\t\t? Loc.getMessage('SALESCENTER_APP_CONTACT_BLOCK_TITLE_MESSAGE_2_PAST_TIME')\n\t\t\t\t\t: Loc.getMessage('SALESCENTER_APP_CONTACT_BLOCK_TITLE_MESSAGE_2'),\n\t\t\t\tshowHint: this.$root.$app.options.templateMode !== 'view',\n\t\t\t\teditorTemplate: this.$root.$app.sendingMethodDesc.text,\n\t\t\t\teditorUrl: this.$root.$app.orderPublicUrl\n\t\t\t},\n\t\t\tproduct: {\n\t\t\t\tstatus: this.$root.$app.options.basket && this.$root.$app.options.basket.length > 0\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.current,\n\t\t\t\ttitle: this.$root.$app.options.templateMode === 'view'\n\t\t\t\t\t? Loc.getMessage('SALESCENTER_PRODUCT_BLOCK_TITLE_PAYMENT_VIEW')\n\t\t\t\t\t: Loc.getMessage('SALESCENTER_PRODUCT_BLOCK_TITLE_SHORT'),\n\t\t\t\thintTitle: this.$root.$app.options.templateMode === 'view'\n\t\t\t\t\t? ''\n\t\t\t\t\t: Loc.getMessage('SALESCENTER_PRODUCT_SET_BLOCK_TITLE_SHORT'),\n\t\t\t},\n\t\t\tpaysystem: {\n\t\t\t\tstatus: this.$root.$app.options.paySystemList.isSet\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled,\n\t\t\t\ttiles: this.getTileCollection(this.$root.$app.options.paySystemList.items),\n\t\t\t\tinstalled: this.$root.$app.options.paySystemList.isSet,\n\t\t\t\ttitleItems: this.getTitleItems(this.$root.$app.options.paySystemList.items),\n\t\t\t\tinitialCollapseState: this.$root.$app.options.isPaySystemCollapsed ? this.$root.$app.options.isPaySystemCollapsed === 'Y' : this.$root.$app.options.paySystemList.isSet,\n\t\t\t},\n\t\t\tcashbox: {},\n\t\t\tautomation: {},\n\t\t\tdocumentSelector: {\n\t\t\t\tstatus: Status.complete,\n\t\t\t},\n\t\t};\n\n\t\tif (this.$root.$app.options.cashboxList.hasOwnProperty('items'))\n\t\t{\n\t\t\tstages.cashbox = {\n\t\t\t\tstatus: this.$root.$app.options.cashboxList.isSet\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled,\n\t\t\t\ttiles: this.getTileCollection(this.$root.$app.options.cashboxList.items),\n\t\t\t\tinstalled: this.$root.$app.options.cashboxList.isSet,\n\t\t\t\ttitleItems: this.getTitleItems(this.$root.$app.options.cashboxList.items),\n\t\t\t\tinitialCollapseState: this.$root.$app.options.isCashboxCollapsed ? this.$root.$app.options.isCashboxCollapsed === 'Y' : this.$root.$app.options.cashboxList.isSet,\n\t\t\t};\n\t\t}\n\n\t\tif (this.$root.$app.options.isAutomationAvailable)\n\t\t{\n\t\t\tstages.automation = {\n\t\t\t\tstatus: Status.complete,\n\t\t\t\tstageOnOrderPaid: this.$root.$app.options.stageOnOrderPaid,\n\t\t\t\titems: this.$root.$app.options.entityStageList,\n\t\t\t\tinitialCollapseState: this.$root.$app.options.isAutomationCollapsed ? this.$root.$app.options.isAutomationCollapsed === 'Y' : false,\n\t\t\t};\n\t\t}\n\n\t\tif (this.$root.$app.options.hasOwnProperty('timeline'))\n\t\t{\n\t\t\tstages.timeline = {\n\t\t\t\titems: this.getTimelineCollection(this.$root.$app.options.timeline)\n\t\t\t}\n\t\t}\n\n\t\tif (this.$root.$app.hasOwnProperty('documentSelector'))\n\t\t{\n\t\t\tif (this.$root.$app.documentSelector.templateAddUrl)\n\t\t\t{\n\t\t\t\tstages.documentSelector.templateAddUrl = this.$root.$app.documentSelector.templateAddUrl;\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\tstages: stages,\n\t\t}\n\t},\n\tmixins: [\n\t\tStageMixin,\n\t\tMixinTemplatesType\n\t],\n\tcomputed: {\n\t\thasStageTimeLine()\n\t\t{\n\t\t\treturn this.stages.timeline.hasOwnProperty('items') && this.stages.timeline.items.length > 0;\n\t\t},\n\t\thasStageAutomation()\n\t\t{\n\t\t\treturn this.stages.automation.hasOwnProperty('items');\n\t\t},\n\t\thasStageCashBox()\n\t\t{\n\t\t\treturn this.stages.cashbox.hasOwnProperty('tiles');\n\t\t},\n\t\tsubmitButtonLabel()\n\t\t{\n\t\t\treturn this.editable ? Loc.getMessage('SALESCENTER_SEND') : Loc.getMessage('SALESCENTER_RESEND');\n\t\t},\n\t\tisShowDocumentSelector()\n\t\t{\n\t\t\treturn this.$root.$app.hasOwnProperty('documentSelector');\n\t\t},\n\t},\n\tmethods: {\n\t\tinitCounter()\n\t\t{\n\t\t\tthis.counter = 1;\n\t\t},\n\t\tgetTimelineCollection(items)\n\t\t{\n\t\t\tlet list = [];\n\n\t\t\tObject.values(items).forEach(\n\t\t\t\toptions => list.push(TimeLineItem.Factory.create(options)));\n\n\t\t\treturn list;\n\t\t},\n\t\tgetTileCollection(items)\n\t\t{\n\t\t\tlet tiles = [];\n\t\t\tObject.values(items).forEach(\n\t\t\t\toptions => tiles.push(Tile.Factory.create(options)));\n\n\t\t\treturn tiles;\n\t\t},\n\t\tgetTitleItems(items)\n\t\t{\n\t\t\tlet result = [];\n\t\t\titems.forEach((item) => {\n\t\t\t\tif (![Tile.More.type(), Tile.Offer.type()].includes(item.type))\n\t\t\t\t{\n\t\t\t\t\tresult.push(item);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn result;\n\t\t},\n\t\tstageRefresh(e, type)\n\t\t{\n\t\t\tBX.ajax.runComponentAction(\n\t\t\t\t\"bitrix:salescenter.app\",\n\t\t\t\t\"getAjaxData\",\n\t\t\t\t{\n\t\t\t\t\tmode: \"class\",\n\t\t\t\t\tdata: {\n\t\t\t\t\t\ttype: type,\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t).then(function(response) {\n\t\t\t\t\tif (response.data)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.refreshTilesByType(response.data, type);\n\t\t\t\t\t}\n\t\t\t\t}.bind(this),\n\t\t\t\tfunction() {\n\t\t\t\t\tUI.Notification.Center.notify({\n\t\t\t\t\t\tcontent: Loc.getMessage('SALESCENTER_DATA_UPDATE_ERROR'),\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t},\n\t\trefreshTilesByType(data, type)\n\t\t{\n\t\t\tif(type === 'PAY_SYSTEM')\n\t\t\t{\n\t\t\t\tthis.stages.paysystem.status = data.isSet\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled;\n\t\t\t\tthis.stages.paysystem.tiles = this.getTileCollection(data.items);\n\t\t\t\tthis.stages.paysystem.installed = data.isSet;\n\t\t\t}\n\t\t\telse if(type === 'CASHBOX')\n\t\t\t{\n\t\t\t\tthis.stages.cashbox.status = data.isSet\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled;\n\t\t\t\tthis.stages.cashbox.tiles = this.getTileCollection(data.items);\n\t\t\t\tthis.stages.cashbox.installed = data.isSet;\n\t\t\t\tthis.stages.cashbox.titleItems = this.getTitleItems(data.items);\n\t\t\t}\n\t\t},\n\t\tonSend(event)\n\t\t{\n\t\t\tthis.$emit('stage-block-send-on-send', event)\n\t\t},\n\t\tchangeProvider(value)\n\t\t{\n\t\t\tthis.$root.$app.sendingMethodDesc.provider = value;\n\t\t\tBX.userOptions.save('salescenter', 'payment_sms_provider_options', 'latest_selected_provider', value);\n\t\t},\n\t\tsaveCollapsedOption(type, value)\n\t\t{\n\t\t\tBX.userOptions.save('salescenter', 'add_payment_collapse_options', type, value);\n\t\t},\n\t},\n\tcreated()\n\t{\n\t\tthis.initCounter();\n\t},\n\tbeforeUpdate()\n\t{\n\t\tthis.initCounter();\n\t},\n\ttemplate: `\n\t\t<div>\n\t\t\t<sms-message-block\n\t\t\t\t@stage-block-sms-send-on-change-provider=\"changeProvider\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.message.status\"\n\t\t\t\t:initSenders=\"stages.message.initSenders\"\n\t\t\t\t:initCurrentSenderCode=\"stages.message.initCurrentSenderCode\"\n\t\t\t\t:initPushedToUseBitrix24Notifications=\"stages.message.initPushedToUseBitrix24Notifications\"\n\t\t\t\t:selectedSmsSender=\"stages.message.selectedSmsSender\"\n\t\t\t\t:manager=\"stages.message.manager\"\n\t\t\t\t:phone=\"stages.message.phone\"\n\t\t\t\t:contactEditorUrl=\"stages.message.contactEditorUrl\"\n\t\t\t\t:titleTemplate=\"stages.message.titleTemplate\"\n\t\t\t\t:showHint=\"stages.message.showHint\"\n\t\t\t\t:editorTemplate=\"stages.message.editorTemplate\"\n\t\t\t\t:editorUrl=\"stages.message.editorUrl\"\n\t\t\t/>\n\t\t\t<product-block\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.product.status\"\n\t\t\t\t:title=\"stages.product.title\"\n\t\t\t\t:hintTitle=\"stages.product.hintTitle\"\n\t\t\t/>\n\t\t\t<paysystem-block\n\t\t\t\tv-if=\"editable\"\n\t\t\t\t@on-stage-tile-collection-slider-close=\"stageRefresh($event, 'PAY_SYSTEM')\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.paysystem.status\"\n\t\t\t\t:tiles=\"stages.paysystem.tiles\"\n\t\t\t\t:installed=\"stages.paysystem.installed\"\n\t\t\t\t:titleItems=\"stages.paysystem.titleItems\"\n\t\t\t\t:initialCollapseState=\"stages.paysystem.initialCollapseState\"\n\t\t\t\t@on-save-collapsed-option=\"saveCollapsedOption\"\n\t\t\t/>\n\t\t\t<cashbox-block\n\t\t\t\tv-if=\"editable && hasStageCashBox\"\n\t\t\t\t@on-stage-tile-collection-slider-close=\"stageRefresh($event, 'CASHBOX')\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.cashbox.status\"\n\t\t\t\t:tiles=\"stages.cashbox.tiles\"\n\t\t\t\t:installed=\"stages.cashbox.installed\"\n\t\t\t\t:titleItems=\"stages.cashbox.titleItems\"\n\t\t\t\t:initialCollapseState=\"stages.cashbox.initialCollapseState\"\n\t\t\t\t@on-save-collapsed-option=\"saveCollapsedOption\"\n\t\t\t/>\n\t\t\t<document-selector-block\n\t\t\t\tv-if=\"isShowDocumentSelector\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:templateAddUrl=\"stages.documentSelector.templateAddUrl\"\n\t\t\t/>\n\t\t\t<automation-block\n\t\t\t\tv-if=\"editable && hasStageAutomation\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.automation.status\"\n\t\t\t\t:stageOnOrderPaid=\"stages.automation.stageOnOrderPaid\"\n\t\t\t\t:items=\"stages.automation.items\"\n\t\t\t\t:initialCollapseState=\"stages.automation.initialCollapseState\"\n\t\t\t\t@on-save-collapsed-option=\"saveCollapsedOption\"\n\t\t\t/>\n\t\t\t<send-block\n\t\t\t\t@on-submit=\"onSend\"\n\t\t\t\t:buttonEnabled=\"sendAllowed\"\n\t\t\t\t:showWhatClientSeesControl=\"!editable\"\n\t\t\t\t:buttonLabel=\"submitButtonLabel\"\n\t\t\t/>\n\t\t\t<timeline-block\n\t\t\t\tv-if=\"hasStageTimeLine\"\n\t\t\t\t:timelineItems=\"stages.timeline.items\"\n\t\t\t/>\n\t\t</div>\n\t`\n};\n","import {Loc} from 'main.core';\n\nexport default {\n\tprops: {\n\t\tbuttonEnabled: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomputed: {\n\t\tbuttonClass()\n\t\t{\n\t\t\treturn {'salescenter-app-payment-by-sms-item-disabled': this.buttonEnabled === false};\n\t\t},\n\t},\n\tmethods: {\n\t\tsubmit(event)\n\t\t{\n\t\t\tthis.$emit('on-submit', event);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div\n\t\t\t:class=\"buttonClass\"\n\t\t\tclass=\"salescenter-app-payment-by-sms-item-show salescenter-app-payment-by-sms-item salescenter-app-payment-by-sms-item-send\"\n\t\t>\n\t\t\t<div class=\"salescenter-app-payment-by-sms-item-counter\">\n\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-counter-rounder\"></div>\n\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-counter-line\"></div>\n\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-counter-number\"></div>\n\t\t\t</div>\n\t\t\t<div class=\"\">\n\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container\">\n\t\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container-payment\">\n\t\t\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container-payment-inline\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t@click=\"submit($event)\"\n\t\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-lg ui-btn-success ui-btn-round\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_CREATE_SHIPMENT')}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`\n}\n","import {Loc} from 'main.core';\nimport {StatusTypes as Status} from 'salescenter.component.stage-block';\nimport {UI} from 'ui.notification';\nimport {MixinTemplatesType} from '../templates-type-mixin';\nimport * as Tile from 'salescenter.tile';\nimport Send from './stage-blocks/send';\nimport Product from '../stage-blocks/product';\nimport {DeliveryVuex} from '../stage-blocks/delivery-vuex';\nimport {Automation} from '../stage-blocks/automation';\nimport {StageMixin} from '../stage-blocks/stage-mixin';\n\nexport default {\n\tcomponents: {\n\t\t'send-block'\t\t\t: Send,\n\t\t'product-block'\t\t\t: Product,\n\t\t'delivery-block'\t\t: DeliveryVuex,\n\t\t'automation-block'\t\t: Automation,\n\t},\n\tprops:{\n\t\tsendAllowed: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true\n\t\t},\n\t},\n\tdata()\n\t{\n\t\tlet stages =  {\n\t\t\tproduct:{\n\t\t\t\tstatus:\t\t\t\tthis.$root.$app.options.basket && this.$root.$app.options.basket.length > 0\n\t\t\t\t\t?\tStatus.complete\n\t\t\t\t\t:\tStatus.current,\n\t\t\t\ttitle: this.$root.$app.options.templateMode === 'view'\n\t\t\t\t\t? Loc.getMessage('SALESCENTER_PRODUCT_BLOCK_TITLE_SHIPMENT_VIEW')\n\t\t\t\t\t: Loc.getMessage('SALESCENTER_PRODUCT_BLOCK_TITLE_SHORT_SHIPMENT'),\n\t\t\t},\n\t\t\tdelivery:{\n\t\t\t\tstatus: \t\t\tthis.$root.$app.options.deliveryList.isInstalled\n\t\t\t\t\t?\tStatus.complete\n\t\t\t\t\t:\tStatus.disabled,\n\t\t\t\ttiles:\t\t\tthis.getTileCollection(\n\t\t\t\t\tthis.$root.$app.options.deliveryList.items),\n\t\t\t\tinstalled:\t\t\tthis.$root.$app.options.deliveryList.isInstalled,\n\t\t\t\tinitialCollapseState: this.$root.$app.options.isDeliveryCollapsed ? this.$root.$app.options.isDeliveryCollapsed === 'Y' : this.$root.$app.options.deliveryList.isInstalled,\n\t\t\t},\n\t\t\tautomation:{}\n\t\t};\n\n\t\tif (this.$root.$app.options.isAutomationAvailable)\n\t\t{\n\t\t\tstages.automation = {\n\t\t\t\tstatus:\t\t\t\t\t\tStatus.complete,\n\t\t\t\tstageOnDeliveryFinished:\tthis.$root.$app.options.stageOnDeliveryFinished,\n\t\t\t\titems:\t\t\t\t\t\tthis.$root.$app.options.entityStageList,\n\t\t\t\tinitialCollapseState: \t\tthis.$root.$app.options.isAutomationCollapsed ? this.$root.$app.options.isAutomationCollapsed === 'Y' : false,\n\t\t\t};\n\t\t}\n\n\t\treturn {\n\t\t\tstages: stages,\n\t\t}\n\t},\n\tmixins:[StageMixin, MixinTemplatesType],\n\tcomputed:\n\t\t{\n\t\t\thasStageAutomation()\n\t\t\t{\n\t\t\t\treturn this.stages.automation.hasOwnProperty('items');\n\t\t\t},\n\t\t\teditableMixin()\n\t\t\t{\n\t\t\t\treturn this.editable === false;\n\t\t\t},\n\t\t\tisViewTemplateMode()\n\t\t\t{\n\t\t\t\treturn this.$root.$app.options.templateMode === 'view';\n\t\t\t},\n\t\t},\n\tmethods:\n\t\t{\n\t\t\tinitCounter()\n\t\t\t{\n\t\t\t\tthis.counter = 1;\n\t\t\t},\n\n\t\t\tgetTileCollection(items)\n\t\t\t{\n\t\t\t\tlet tiles = [];\n\t\t\t\tObject.values(items).forEach(\n\t\t\t\t\toptions => tiles.push(Tile.Factory.create(options)));\n\n\t\t\t\treturn tiles;\n\t\t\t},\n\n\t\t\tgetTitleItems(items)\n\t\t\t{\n\t\t\t\tlet result = [];\n\t\t\t\titems.forEach((item) => {\n\t\t\t\t\tif (![Tile.More.type(), Tile.Offer.type()].includes(item.type))\n\t\t\t\t\t{\n\t\t\t\t\t\tresult.push(item);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\treturn result;\n\t\t\t},\n\n\t\t\tstageRefresh(e, type)\n\t\t\t{\n\t\t\t\tBX.ajax.runComponentAction(\n\t\t\t\t\t\"bitrix:salescenter.app\",\n\t\t\t\t\t\"getAjaxData\",\n\t\t\t\t\t{\n\t\t\t\t\t\tmode: \"class\",\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\ttype: type,\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t).then(function(response) {\n\t\t\t\t\tif (response.data)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.refreshTilesByType(response.data, type);\n\t\t\t\t\t}\n\t\t\t\t}.bind(this),\n\t\t\t\tfunction() {\n\t\t\t\t\tUI.Notification.Center.notify({\n\t\t\t\t\t\tcontent: Loc.getMessage('SALESCENTER_DATA_UPDATE_ERROR'),\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t},\n\n\t\t\trefreshTilesByType(data, type)\n\t\t\t{\n\t\t\t\tif(type === 'DELIVERY')\n\t\t\t\t{\n\t\t\t\t\tthis.stages.delivery.status = \t\tdata.isSet\n\t\t\t\t\t\t?\tStatus.complete\n\t\t\t\t\t\t:\tStatus.disabled;\n\t\t\t\t\tthis.stages.delivery.tiles = \t\tthis.getTileCollection(data.items);\n\t\t\t\t\tthis.stages.delivery.installed = \tdata.isInstalled;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tonSend(event)\n\t\t\t{\n\t\t\t\tthis.$emit('stage-block-send-on-send', event)\n\t\t\t},\n\n\t\t\tsaveCollapsedOption(type, value)\n\t\t\t{\n\t\t\t\tBX.userOptions.save('salescenter', 'add_shipment_collapse_options', type, value);\n\t\t\t},\n\t\t},\n\tcreated()\n\t{\n\t\tthis.initCounter();\n\t},\n\tbeforeUpdate()\n\t{\n\t\tthis.initCounter();\n\t},\n\ttemplate: `\n\t\t<div>\n\t\t\t<product-block \n\t\t\t\t:counter=\t\"counter++\"\n\t\t\t\t:status= \t\"stages.product.status\"\n\t\t\t\t:title=\t\t\"stages.product.title\"\t\t\n\t\t\t\t:hintTitle=\t\t\"''\"\n\t\t\t/>\n\t\t\t\n\t\t\t<delivery-block\t\t\t\t\t\t\tv-on:on-stage-tile-collection-slider-close=\"stageRefresh($event, 'DELIVERY')\"\n\t\t\t\t:counter=\t\"counter++\"\n\t\t\t\t:status=  \t\"stages.delivery.status\"\n\t\t\t\t:tiles=  \t\"stages.delivery.tiles\"\n\t\t\t\t:installed=\t\"stages.delivery.installed\"\n\t\t\t\t:isCollapsible=\"false\"\n\t\t\t\t:initialCollapseState = \"stages.delivery.initialCollapseState\"\n\t\t\t\t@on-save-collapsed-option=\"saveCollapsedOption\"\n\t\t\t/>\n\t\t\t\t\t\t\t\t\t\n\t\t\t<automation-block v-if=\"editable && hasStageAutomation\"\n\t\t\t\t:counter=\t\"counter++\"\n\t\t\t\t:status=\t\"stages.automation.status\"\n\t\t\t\t:stageOnDeliveryFinished=\t\"stages.automation.stageOnDeliveryFinished\"\n\t\t\t\t:items=\t\t\"stages.automation.items\"\n\t\t\t\t:initialCollapseState = \"stages.automation.initialCollapseState\"\n\t\t\t\t@on-save-collapsed-option=\"saveCollapsedOption\"\n\t\t\t/>\n\t\t\t\n\t\t\t<send-block\n\t\t\t\tv-if=\"!isViewTemplateMode\"\n\t\t\t\t@on-submit=\"onSend\"\n\t\t\t\t:buttonEnabled=\"sendAllowed\"\n\t\t\t/>\n\t\t</div>\n\t`\n};\n","import { Vuex } from 'ui.vue.vuex';\nimport StageBlocksList from './components/deal-receiving-payment/stage-blocks-list';\nimport EntityCreatePaymentStages from './components/crm-entity-create-payment/stage-blocks-list';\nimport StageBlocksListShipment from './components/deal-creating-shipment/stage-blocks-list';\nimport ComponentMixin from './component-mixin';\nimport { Loc } from 'main.core';\nimport { MixinTemplatesType } from './components/templates-type-mixin';\nimport Start from './start';\n\nimport { SenderConfig } from \"salescenter.lib\";\n\nexport default {\n\tmixins: [MixinTemplatesType, ComponentMixin],\n\tdata()\n\t{\n\t\treturn {\n\t\t\tactiveMenuItem: this.$root.$app.options.mode,\n\t\t\tisLoading: false,\n\t\t};\n\t},\n\tcomponents: {\n\t\t'deal-receiving-payment': StageBlocksList,\n\t\t'crm-entity-create-payment': EntityCreatePaymentStages,\n\t\t'deal-creating-shipment': StageBlocksListShipment,\n\t\t'start': Start,\n\t},\n\tmethods: {\n\t\treload(form)\n\t\t{\n\t\t\tif (this.isLoading || !this.editable)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.isLoading = true;\n\t\t\tthis.activeMenuItem = form;\n\t\t\tthis.$emit(\n\t\t\t\t'on-reload',\n\t\t\t\t{\n\t\t\t\t\tcontext: this.$root.$app.options.context,\n\t\t\t\t\torderId: this.$root.$app.orderId,\n\t\t\t\t\townerTypeId: this.$root.$app.options.ownerTypeId,\n\t\t\t\t\townerId: this.$root.$app.options.ownerId,\n\t\t\t\t\ttemplateMode: 'create',\n\t\t\t\t\tmode: this.activeMenuItem,\n\t\t\t\t\tinitialMode: this.$root.$app.options.initialMode,\n\t\t\t\t}\n\t\t\t);\n\t\t},\n\t\tonSuccessfullyConnected()\n\t\t{\n\t\t\tthis.reload(this.activeMenuItem);\n\t\t},\n\t\tonReload()\n\t\t{\n\t\t\tthis.reload(this.activeMenuItem);\n\t\t},\n\t\tsendPaymentDeliveryForm(event)\n\t\t{\n\t\t\tif (!this.isAllowedPaymentDeliverySubmitButton)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.$store.getters['orderCreation/isCompilationMode'])\n\t\t\t{\n\t\t\t\tthis.$root.$app.sendCompilation(event.target);\n\t\t\t}\n\t\t\telse if (this.editable)\n\t\t\t{\n\t\t\t\tthis.$root.$app.sendPayment(event.target);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.$root.$app.resendPayment(event.target);\n\t\t\t}\n\t\t},\n\t\tsendDeliveryForm(event)\n\t\t{\n\t\t\tif (!this.isAllowedDeliverySubmitButton)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.$root.$app.sendShipment(event.target);\n\t\t},\n\t\t// region menu item handlers\n\t\tspecifyCompanyContacts()\n\t\t{\n\t\t\tBX.Salescenter.Manager.openSlider(this.$root.$app.options.urlSettingsCompanyContacts, {width: 1200} );\n\t\t},\n\t\tsuggestScenario(event)\n\t\t{\n\t\t\tBX.Salescenter.Manager.openFeedbackPayOrderForm(event);\n\t\t},\n\t\thowItWorks(event)\n\t\t{\n\t\t\tif (this.mode === 'payment')\n\t\t\t{\n\t\t\t\tBX.Salescenter.Manager.openHowPaySmartInvoiceWorks(event);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tBX.Salescenter.Manager.openHowPayDealWorks(event);\n\t\t},\n\t\topenIntegrationWindow(event)\n\t\t{\n\t\t\tBX.Salescenter.Manager.openIntegrationRequestForm(event);\n\t\t},\n\t\tfreeMessages()\n\t\t{\n\t\t\tlet senders = this.$root.$app.options.senders\n\n\t\t\tlet sender = senders.filter(item => item.code === SenderConfig.BITRIX24)\n\n\t\t\tif(sender.length > 0)\n\t\t\t{\n\t\t\t\tlet fixed = SenderConfig.openSliderFreeMessages(sender[0].connectUrl);\n\t\t\t\tfixed().then()\n\t\t\t}\n\t\t},\n\t\t// endregion\n\t},\n\tcomputed: {\n\t\tmode()\n\t\t{\n\t\t\treturn this.$root.$app.options.mode;\n\t\t},\n\t\ttemplateMode()\n\t\t{\n\t\t\treturn this.$root.$app.options.templateMode;\n\t\t},\n\t\tinitialMode()\n\t\t{\n\t\t\treturn this.$root.$app.options.initialMode;\n\t\t},\n\t\tisAllowedFreeMessagesButton()\n\t\t{\n\t\t\tlet senders = this.$root.$app.options.senders\n\n\t\t\tlet sender = senders.filter(item => item.code === SenderConfig.BITRIX24)\n\n\t\t\tif(sender.length > 0)\n\t\t\t{\n\t\t\t\treturn SenderConfig.needConfigure(sender[0])\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\tisOnlyDeliveryItemVisible()\n\t\t{\n\t\t\treturn (\n\t\t\t\tthis.$root.$app.options.hasOwnProperty('deliveryList')\n\t\t\t\t&& this.$root.$app.options.deliveryList.hasOwnProperty('hasInstallable')\n\t\t\t\t&& this.$root.$app.options.deliveryList.hasInstallable\n\t\t\t);\n\t\t},\n\t\tisAllowedPaymentDeliverySubmitButton()\n\t\t{\n\t\t\tif (!this.$root.$app.hasClientContactInfo())\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tconst senders = this.$root.$app.options.senders;\n\t\t\tconst filteredSenders = senders.filter(sender => (\n\t\t\t\tsender.code === this.$root.$app.options.currentSenderCode && sender.isConnected\n\t\t\t));\n\t\t\tif (filteredSenders.length === 0)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn this.$store.getters['orderCreation/isAllowedSubmit'];\n\t\t},\n\t\tisAllowedDeliverySubmitButton()\n\t\t{\n\t\t\tconst deliveryId = this.$store.getters['orderCreation/getDeliveryId'];\n\t\t\tif (!deliveryId)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif (!this.$store.getters['orderCreation/isAllowedSubmit'])\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn (deliveryId != this.$root.$app.options.emptyDeliveryServiceId);\n\t\t},\n\t\tisSuggestScenarioMenuItemVisible()\n\t\t{\n\t\t\treturn this.$root.$app.options.isBitrix24;\n\t\t},\n\t\tisRequestIntegrationMenuItemVisible()\n\t\t{\n\t\t\treturn this.$root.$app.options.isIntegrationButtonVisible;\n\t\t},\n\t\tneedShowStoreConnection()\n\t\t{\n\t\t\treturn !this.isOrderPublicUrlAvailable && this.mode !== 'delivery';\n\t\t},\n\t\tsendPaymentDeliveryFormButtonText()\n\t\t{\n\t\t\treturn this.editable ? Loc.getMessage('SALESCENTER_SEND') : Loc.getMessage('SALESCENTER_RESEND');\n\t\t},\n\t\ttitle()\n\t\t{\n\t\t\treturn this.$root.$app.options.title;\n\t\t},\n\t\tgetTitleForPaymentDeliveryMenuItem()\n\t\t{\n\t\t\treturn Loc.getMessage('SALESCENTER_LEFT_TAKE_PAYMENT_AND_CREATE_SHIPMENT');\n\t\t},\n\t\t// classes region\n\t\tpaymentDeliveryFormSubmitButtonClass()\n\t\t{\n\t\t\treturn {'ui-btn-disabled': !this.isAllowedPaymentDeliverySubmitButton};\n\t\t},\n\t\tdeliveryFormSubmitButtonClass()\n\t\t{\n\t\t\treturn {'ui-btn-disabled': !this.isAllowedDeliverySubmitButton};\n\t\t},\n\t\tpaymentDeliveryMenuItemClass()\n\t\t{\n\t\t\treturn {\n\t\t\t\t'salescenter-app-sidebar-menu-active': (\n\t\t\t\t\tthis.activeMenuItem === 'payment_delivery'\n\t\t\t\t\t|| this.activeMenuItem === 'payment'\n\t\t\t\t)\n\t\t\t};\n\t\t},\n\t\tdeliveryMenuItemClass()\n\t\t{\n\t\t\treturn {'salescenter-app-sidebar-menu-active': this.activeMenuItem === 'delivery'};\n\t\t},\n\t\t// endregion\n\t\t...Vuex.mapState({\n\t\t\tapplication: state => state.application,\n\t\t\torder: state => state.orderCreation,\n\t\t})\n\t},\n\t//language=Vue\n\ttemplate: `\n\t\t<div\n\t\t\t:class=\"wrapperClass\"\n\t\t\t:style=\"wrapperStyle\"\n\t\t\tclass=\"salescenter-app-wrapper\"\n\t\t>\n\t\t\t<div class=\"ui-sidepanel-sidebar salescenter-app-sidebar\">\n\t\t\t\t<ul class=\"ui-sidepanel-menu\">\n\t\t\t\t\t<template v-if=\"templateMode === 'view'\">\n\t\t\t\t\t\t<li class=\"ui-sidepanel-menu-item salescenter-app-sidebar-menu-active\">\n\t\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link\">\n\t\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">{{title}}</div>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t</template>\n\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t<li\n\t\t\t\t\t\t\tv-if=\"initialMode === 'payment_delivery'\"\n\t\t\t\t\t\t\t@click=\"reload('payment_delivery')\"\n\t\t\t\t\t\t\t:class=\"paymentDeliveryMenuItemClass\"\n\t\t\t\t\t\t\tclass=\"ui-sidepanel-menu-item\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link\">\n\t\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">\n\t\t\t\t\t\t\t\t\t{{getTitleForPaymentDeliveryMenuItem}}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li\n\t\t\t\t\t\t\tv-if=\"isOnlyDeliveryItemVisible\"\n\t\t\t\t\t\t\t@click=\"reload('delivery')\"\n\t\t\t\t\t\t\t:class=\"deliveryMenuItemClass\"\n\t\t\t\t\t\t\tclass=\"ui-sidepanel-menu-item\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link\">\n\t\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">\n\t\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_LEFT_CREATE_SHIPMENT')}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t</template>\n\n\t\t\t\t\t<li class=\"ui-sidepanel-menu-item ui-sidepanel-menu-item-sm ui-sidepanel-menu-item-separate\">\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t@click=\"specifyCompanyContacts\"\n\t\t\t\t\t\t\tclass=\"ui-sidepanel-menu-link\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_LEFT_PAYMENT_COMPANY_CONTACTS')}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li\n\t\t\t\t\t\tv-if=\"isSuggestScenarioMenuItemVisible\"\n\t\t\t\t\t\tclass=\"ui-sidepanel-menu-item ui-sidepanel-menu-item-sm\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t@click=\"suggestScenario($event)\"\n\t\t\t\t\t\t\tclass=\"ui-sidepanel-menu-link\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_LEFT_PAYMENT_OFFER_SCRIPT')}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li class=\"ui-sidepanel-menu-item ui-sidepanel-menu-item-sm\">\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t@click=\"howItWorks($event)\"\n\t\t\t\t\t\t\tclass=\"ui-sidepanel-menu-link\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_LEFT_PAYMENT_HOW_WORKS')}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li\n\t\t\t\t\t\tv-if=\"isAllowedFreeMessagesButton\"\n\t\t\t\t\t\tclass=\"ui-sidepanel-menu-item ui-sidepanel-menu-item-sm\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t@click=\"freeMessages($event)\"\n\t\t\t\t\t\t\tclass=\"ui-sidepanel-menu-link\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_LEFT_PAYMENT_FREE_MESSAGES')}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li\n\t\t\t\t\t\tv-if=\"isRequestIntegrationMenuItemVisible\"\n\t\t\t\t\t\tclass=\"ui-sidepanel-menu-item ui-sidepanel-menu-item-sm\">\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t@click=\"openIntegrationWindow($event)\"\n\t\t\t\t\t\t\tclass=\"ui-sidepanel-menu-link\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\"\n\t\t\t\t\t\t\t\t data-manager-openIntegrationRequestForm-params=\"sender_page:deal\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_LEFT_PAYMENT_INTEGRATION_MSGVER_2')}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t\t<div class=\"salescenter-app-right-side\">\n\t\t\t\t<start\n\t\t\t\t\tv-if=\"needShowStoreConnection\"\n\t\t\t\t\t@on-successfully-connected=\"onSuccessfullyConnected\"\n\t\t\t\t>\n\t\t\t\t</start>\n\t\t        <template v-else>\n\t\t\t        <deal-receiving-payment\n\t\t\t        \tv-if=\"mode === 'payment_delivery'\"\n\t\t\t\t\t\t@stage-block-on-reload=\"onReload\"\n\t\t\t        \t@stage-block-send-on-send=\"sendPaymentDeliveryForm($event)\"\n\t\t\t        \t:sendAllowed=\"isAllowedPaymentDeliverySubmitButton\"\n\t\t\t        />\n\t\t\t        <deal-creating-shipment\n\t\t\t        \tv-else-if=\"mode === 'delivery'\"\n\t\t\t        \t@stage-block-send-on-send=\"sendDeliveryForm($event)\"\n\t\t\t        \t:sendAllowed=\"isAllowedDeliverySubmitButton\"\n\t\t\t        />\n\t\t\t        <crm-entity-create-payment\n\t\t\t        \tv-if=\"mode === 'payment'\"\n\t\t\t        \t@stage-block-send-on-send=\"sendPaymentDeliveryForm($event)\"\n\t\t\t        \t:sendAllowed=\"isAllowedPaymentDeliverySubmitButton\"\n\t\t\t        />\n\t\t        </template>\n\t\t\t</div>\n\t\t\t<div class=\"ui-button-panel-wrapper salescenter-button-panel\" ref=\"buttonsPanel\">\n\t\t\t\t<div class=\"ui-button-panel\">\n\t\t\t\t\t<template v-if=\"mode === 'payment_delivery' || mode === 'payment'\">\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t@click=\"sendPaymentDeliveryForm($event)\"\n\t\t\t\t\t\t\t:class=\"paymentDeliveryFormSubmitButtonClass\"\n\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-md ui-btn-success\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{sendPaymentDeliveryFormButtonText}}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t@click=\"close\"\n\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-md ui-btn-link\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_CANCEL')}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</template>\n\t\t\t\t\t<template v-else-if=\"mode === 'delivery'\">\n\t\t\t\t\t\t<template v-if=\"editable\">\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t@click=\"sendDeliveryForm($event)\"\n\t\t\t\t\t\t\t\t:class=\"deliveryFormSubmitButtonClass\"\n\t\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-md ui-btn-success\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_CREATE_SHIPMENT')}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t@click=\"close\"\n\t\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-md ui-btn-link\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_CANCEL')}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</template>\n\t\t\t\t</div>\n\t\t\t\t<div v-if=\"this.order.errors.length > 0\" ref=\"errorBlock\"></div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n}\n","import {Vue} from 'ui.vue';\nimport {VuexBuilder} from 'ui.vue.vuex';\nimport {rest as Rest} from 'rest.client';\nimport {Manager} from 'salescenter.manager';\nimport {Loader} from 'main.loader';\nimport {Type, Text, Loc, ajax as Ajax, Event, Tag} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\nimport {MenuManager, Popup} from 'main.popup';\nimport 'ui.notification';\nimport 'ui.design-tokens';\nimport 'ui.fonts.opensans';\nimport {ApplicationModel} from './models/application';\nimport {OrderCreationModel} from './models/ordercreation';\nimport {DocumentSelectorModel} from './models/document-selector';\nimport Chat from './chat';\nimport Deal from './deal';\nimport './css/component.css';\n\nconst instances = new Map();\n\nexport class App\n{\n\tstatic getByDialogId(dialogId: string): ?App\n\t{\n\t\treturn instances.get(dialogId) || null;\n\t}\n\n\tconstructor(options = {\n\t\tdialogId: null,\n\t\tsessionId: null,\n\t\tlineId: null,\n\t\torderAddPullTag: null,\n\t\tlandingPublicationPullTag: null,\n\t\tlandingUnPublicationPullTag: null,\n\t\tisFrame: true,\n\t\tisOrderPublicUrlAvailable: false,\n\t\tisCatalogAvailable: false,\n\t\tisOrderPublicUrlExists: false,\n\t\tisWithOrdersMode: true,\n\t\tcompilation: null,\n\t\tdocumentSelector: DocumentSelectorParams|null,\n\t})\n\t{\n\t\tthis.slider = BX.SidePanel.Instance.getTopSlider();\n\t\tthis.dialogId = options.dialogId;\n\t\tthis.sessionId = parseInt(options.sessionId);\n\t\tthis.lineId = parseInt(options.lineId);\n\t\tthis.orderAddPullTag = options.orderAddPullTag;\n\t\tthis.landingPublicationPullTag = options.landingPublicationPullTag;\n\t\tthis.landingUnPublicationPullTag = options.landingUnPublicationPullTag;\n\t\tthis.paySystemList = options.paySystemList;\n\t\tthis.cashboxList = options.cashboxList;\n\t\tthis.options = options;\n\t\tthis.isProgress = false;\n\t\tthis.fillPagesTimeout = false;\n\t\tthis.disableSendButton = false;\n\t\tthis.context = '';\n\t\tthis.fillPagesQueue = [];\n\t\tthis.ownerTypeId = '';\n\t\tthis.ownerId = '';\n\t\tthis.orderId = parseInt(options.orderId);\n\t\tthis.stageOnOrderPaid = null;\n\t\tthis.stageOnDeliveryFinished = null;\n\t\tthis.sendingMethod = '';\n\t\tthis.sendingMethodDesc = {};\n\t\tthis.orderPublicUrl = '';\n\t\tthis.fileControl = options.fileControl;\n\t\tthis.currencyCode = options.currencyCode;\n\t\tthis.compilation = null;\n\t\tthis.newCompilationId = null;\n\t\tthis.assignedById = options.assignedById;\n\n\t\tif(Type.isString(options.stageOnOrderPaid))\n\t\t{\n\t\t\tthis.stageOnOrderPaid = options.stageOnOrderPaid;\n\t\t}\n\n\t\tif(Type.isString(options.stageOnDeliveryFinished))\n\t\t{\n\t\t\tthis.stageOnDeliveryFinished = options.stageOnDeliveryFinished;\n\t\t}\n\n\t\tif(Type.isBoolean(options.isFrame))\n\t\t{\n\t\t\tthis.isFrame = options.isFrame;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.isFrame = true;\n\t\t}\n\n\t\tif(Type.isBoolean(options.isOrderPublicUrlAvailable))\n\t\t{\n\t\t\tthis.isOrderPublicUrlAvailable = options.isOrderPublicUrlAvailable;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.isOrderPublicUrlAvailable = false;\n\t\t}\n\n\t\tif(Type.isBoolean(options.isOrderPublicUrlExists))\n\t\t{\n\t\t\tthis.isOrderPublicUrlExists = options.isOrderPublicUrlExists;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.isOrderPublicUrlExists = false;\n\t\t}\n\n\t\tif(Type.isString(options.orderPublicUrl))\n\t\t{\n\t\t\tthis.orderPublicUrl = options.orderPublicUrl;\n\t\t}\n\n\t\tif(Type.isBoolean(options.isCatalogAvailable))\n\t\t{\n\t\t\tthis.isCatalogAvailable = options.isCatalogAvailable;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.isCatalogAvailable = false;\n\t\t}\n\n\t\tif(Type.isBoolean(options.isWithOrdersMode))\n\t\t{\n\t\t\tthis.isWithOrdersMode = options.isWithOrdersMode;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.isWithOrdersMode = false;\n\t\t}\n\n\t\tif(Type.isBoolean(options.disableSendButton))\n\t\t{\n\t\t\tthis.disableSendButton = options.disableSendButton;\n\t\t}\n\n\t\tif(options.ownerTypeId)\n\t\t{\n\t\t\tthis.ownerTypeId = options.ownerTypeId;\n\t\t}\n\n\t\tif(options.ownerId)\n\t\t{\n\t\t\tthis.ownerId = options.ownerId;\n\t\t}\n\n\t\tif(Type.isString(options.context) && options.context.length > 0)\n\t\t{\n\t\t\tthis.context = options.context;\n\t\t}\n\t\telse if(this.sessionId && this.dialogId)\n\t\t{\n\t\t\tthis.context = 'imopenlines_app';\n\t\t}\n\n\t\tif(Type.isBoolean(options.isPaymentsLimitReached))\n\t\t{\n\t\t\tthis.isPaymentsLimitReached = options.isPaymentsLimitReached;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.isPaymentsLimitReached = false;\n\t\t}\n\n\t\tif(!Type.isUndefined(options.sendingMethod))\n\t\t{\n\t\t\tthis.sendingMethod = options.sendingMethod;\n\t\t}\n\t\tif(!Type.isUndefined(options.sendingMethodDesc))\n\t\t{\n\t\t\tthis.sendingMethodDesc = this.options.sendingMethodDesc;\n\t\t}\n\n\t\tif(Type.isObject(options.compilation))\n\t\t{\n\t\t\tthis.compilation = options.compilation;\n\t\t}\n\n\t\tthis.isPaymentCreationAvailable = (\n\t\t\t(this.sessionId > 0 && this.dialogId.length > 0) || (this.ownerTypeId && this.ownerId)\n\t\t);\n\t\tthis.connector = Type.isString(options.connector) ? options.connector : '';\n\n\t\tthis.isAllowedFacebookRegion = Type.isBoolean(options.isAllowedFacebookRegion) ? options.isAllowedFacebookRegion : false;\n\n\t\tif (Type.isPlainObject(options.documentSelector))\n\t\t{\n\t\t\tthis.documentSelector = options.documentSelector;\n\t\t\tthis.documentSelector.paymentId = this.options.paymentId;\n\t\t}\n\n\t\tEvent.ready(() =>\n\t\t{\n\t\t\tthis.pull = BX.PULL;\n\t\t\tthis.initPull();\n\t\t\tthis.isSiteExists = Manager.isSiteExists;\n\t\t});\n\n\t\tApp.initStore()\n\t\t\t.then((result) => this.initTemplate(result))\n\t\t\t.catch((error) => App.showError(error))\n\t\t;\n\n\t\tEventEmitter.subscribe(window.parent, 'onSendCompilationChatButtonClick', this.sendCompilation.bind(this));\n\n\t\tinstances.set(this.dialogId, this);\n\t}\n\n\tstatic initStore()\n\t{\n\t\tconst builder = new VuexBuilder();\n\n\t\treturn builder.addModel(ApplicationModel.create())\n\t\t\t.addModel(OrderCreationModel.create())\n\t\t\t.addModel(DocumentSelectorModel.create())\n\t\t\t.useNamespace(true)\n\t\t\t.build();\n\t}\n\n\tinitPull()\n\t{\n\t\tif(this.pull)\n\t\t{\n\t\t\tif(Type.isString(this.orderAddPullTag))\n\t\t\t{\n\t\t\t\tthis.pull.subscribe({\n\t\t\t\t\tmoduleId: 'salescenter',\n\t\t\t\t\tcommand: this.orderAddPullTag,\n\t\t\t\t\tcallback: (params) =>\n\t\t\t\t\t{\n\t\t\t\t\t\tif(parseInt(params.sessionId) === this.sessionId && params.orderId > 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tManager.showOrdersListAfterCreate(params.orderId);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif(Type.isString(this.landingPublicationPullTag))\n\t\t\t{\n\t\t\t\tthis.pull.subscribe({\n\t\t\t\t\tmoduleId: 'salescenter',\n\t\t\t\t\tcommand: this.landingPublicationPullTag,\n\t\t\t\t\tcallback: (params) =>\n\t\t\t\t\t{\n\t\t\t\t\t\tif(parseInt(params.landingId) > 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.fillPages();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(params.hasOwnProperty('isOrderPublicUrlAvailable') && Type.isBoolean(params.isOrderPublicUrlAvailable))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.isOrderPublicUrlAvailable = params.isOrderPublicUrlAvailable;\n\t\t\t\t\t\t\tthis.isOrderPublicUrlExists = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif(Type.isString(this.landingUnPublicationPullTag))\n\t\t\t{\n\t\t\t\tthis.pull.subscribe({\n\t\t\t\t\tmoduleId: 'salescenter',\n\t\t\t\t\tcommand: this.landingUnPublicationPullTag,\n\t\t\t\t\tcallback: (params) =>\n\t\t\t\t\t{\n\t\t\t\t\t\tif(parseInt(params.landingId) > 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.fillPages();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(params.hasOwnProperty('isOrderPublicUrlAvailable') && Type.isBoolean(params.isOrderPublicUrlAvailable))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.isOrderPublicUrlAvailable = params.isOrderPublicUrlAvailable;\n\t\t\t\t\t\t\tthis.isOrderPublicUrlExists = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\tinitTemplate(result)\n\t{\n\t\treturn new Promise((resolve) =>\n\t\t{\n\t\t\tconst context = this;\n\t\t\tthis.store = result.store;\n\n\t\t\tthis.templateEngine = Vue.create({\n\t\t\t\tel: document.getElementById('salescenter-app-root'),\n\t\t\t\tcomponents: {\n\t\t\t\t\t'chat': Chat,\n\t\t\t\t\t'deal': Deal,\n\t\t\t\t},\n\t\t\t\ttemplate:\n\t\t\t\t\tthis.isPaymentMode()\n\t\t\t\t\t\t? `<deal :key=\"componentKey\" @on-reload=\"reload\"/>`\n\t\t\t\t\t\t: `<chat :key=\"componentKey\" @on-reload=\"reload\"/>`\n\t\t\t\t\t,\n\t\t\t\tstore: this.store,\n\t\t\t\tcreated()\n\t\t\t\t{\n\t\t\t\t\tthis.$app = context;\n\t\t\t\t\tthis.$nodes = {\n\t\t\t\t\t\tfooter: document.getElementById('footer'),\n\t\t\t\t\t\tleftPanel: document.getElementById('left-panel'),\n\t\t\t\t\t\ttitle: document.getElementById('pagetitle'),\n\t\t\t\t\t\tpaymentsLimit: document.getElementById('salescenter-payment-limit-container'),\n\t\t\t\t\t\torderSelector: document.getElementById('salescenter-app-order-selector'),\n\t\t\t\t\t};\n\t\t\t\t\tthis.initOrderSelector();\n\t\t\t\t\tif (context.documentSelector)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$store.commit('documentSelector/fillState', context.documentSelector);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (this.$app.options.showCompilationModeSwitcher === 'N')\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$store.commit('orderCreation/enableCompilationMode');\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tmounted()\n\t\t\t\t{\n\t\t\t\t\tresolve();\n\t\t\t\t},\n\t\t\t\tmethods: {\n\t\t\t\t\treload(arParams)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$root.$app.getLoader().show(document.body);\n\n\t\t\t\t\t\tBX.ajax.runComponentAction(\n\t\t\t\t\t\t\t'bitrix:salescenter.app',\n\t\t\t\t\t\t\t'getComponentResult',\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tmode: 'class',\n\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\tarParams\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t).then(function(response) {\n\t\t\t\t\t\t\tif (response.data)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.$root.$app.options = response.data;\n\t\t\t\t\t\t\t\tthis.$root.$app.orderId = this.$root.$app.options.orderId;\n\t\t\t\t\t\t\t\tthis.componentKey += 1;\n\n\t\t\t\t\t\t\t\tthis.$root.$app.getLoader().hide();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}.bind(this));\n\t\t\t\t\t},\n\t\t\t\t\tinitOrderSelector()\n\t\t\t\t\t{\n\t\t\t\t\t\ttry\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\tthis.$app.options.orderList.length < 2\n\t\t\t\t\t\t\t\t|| this.$app.options.templateMode !== 'create'\n\t\t\t\t\t\t\t\t|| !this.$app.options.orderId\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tconst orderSelectorBtn = this.$nodes.orderSelector.querySelector('.salescenter-app-order-selector-text');\n\t\t\t\t\t\t\tif (!orderSelectorBtn)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\torderSelectorBtn.innerText = Loc.getMessage('SALESCENTER_ORDER_SELECTOR_ORDER_NUM')\n\t\t\t\t\t\t\t\t.replace('#ORDER_ID#', this.$app.options.orderId);\n\n\t\t\t\t\t\t\torderSelectorBtn.setAttribute('data-hint', Loc.getMessage('SALESCENTER_ORDER_SELECTOR_TOOLTIP'));\n\n\t\t\t\t\t\t\tlet popupMenu;\n\t\t\t\t\t\t\tlet menuItems = [];\n\t\t\t\t\t\t\tthis.$app.options.orderList.map(orderId => {\n\t\t\t\t\t\t\t\tconst orderCaption = Loc.getMessage('SALESCENTER_ORDER_SELECTOR_ORDER_NUM').replace('#ORDER_ID#', orderId);\n\t\t\t\t\t\t\t\tmenuItems.push({\n\t\t\t\t\t\t\t\t\ttext: orderCaption,\n\t\t\t\t\t\t\t\t\tonclick: event => {\n\t\t\t\t\t\t\t\t\t\tpopupMenu.close();\n\t\t\t\t\t\t\t\t\t\torderSelectorBtn.innerText = orderCaption;\n\t\t\t\t\t\t\t\t\t\tthis.reload({\n\t\t\t\t\t\t\t\t\t\t\tcontext: this.$app.options.context,\n\t\t\t\t\t\t\t\t\t\t\torderId: orderId,\n\t\t\t\t\t\t\t\t\t\t\townerTypeId: this.$app.options.ownerTypeId,\n\t\t\t\t\t\t\t\t\t\t\townerId: this.$app.options.ownerId,\n\t\t\t\t\t\t\t\t\t\t\ttemplateMode: this.$app.options.templateMode,\n\t\t\t\t\t\t\t\t\t\t\tmode: this.$app.options.mode,\n\t\t\t\t\t\t\t\t\t\t\tinitialMode: this.$app.options.initialMode,\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tpopupMenu = MenuManager.create({\n\t\t\t\t\t\t\t\tid: 'deal-order-selector',\n\t\t\t\t\t\t\t\tbindElement: orderSelectorBtn,\n\t\t\t\t\t\t\t\titems: menuItems\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tthis.$nodes.orderSelector.classList.remove('is-hidden');\n\t\t\t\t\t\t\tthis.$nodes.orderSelector.addEventListener('click', e => {\n\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\tpopupMenu.show();\n\t\t\t\t\t\t\t\tBX.UI.Hint.hide();\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tBX.UI.Hint.init(this.$nodes.orderSelector);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcatch (err)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t//\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tdata() {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tcomponentKey: 0,\n\t\t\t\t\t};\n\t\t\t\t},\n\t\t\t});\n\t\t});\n\t}\n\n\tcloseApplication()\n\t{\n\t\tif(this.slider)\n\t\t{\n\t\t\tthis.slider.close();\n\t\t}\n\t}\n\n\tfillPages()\n\t{\n\t\treturn new Promise((resolve) =>\n\t\t{\n\t\t\tif(this.isProgress)\n\t\t\t{\n\t\t\t\tthis.fillPagesQueue.push(resolve);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif(this.fillPagesTimeout)\n\t\t\t\t{\n\t\t\t\t\tclearTimeout(this.fillPagesTimeout);\n\t\t\t\t}\n\t\t\t\tthis.fillPagesTimeout = setTimeout(() =>\n\t\t\t\t{\n\t\t\t\t\tthis.startProgress();\n\t\t\t\t\tRest.callMethod('salescenter.page.list', {}).then((result) => {\n\t\t\t\t\t\tthis.store.commit('application/setPages', {pages: result.answer.result.pages});\n\t\t\t\t\t\tthis.stopProgress();\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t\tthis.fillPagesQueue.forEach((item) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\titem();\n\t\t\t\t\t\t});\n\t\t\t\t\t\tthis.fillPagesQueue = [];\n\t\t\t\t\t});\n\t\t\t\t}, 100);\n\t\t\t}\n\t\t});\n\t}\n\n\tstatic showError(error)\n\t{\n\t\t// console.error(error);\n\t}\n\n\tgetLoader()\n\t{\n\t\tif(!this.loader)\n\t\t{\n\t\t\tthis.loader = new Loader({size: 200, mode: 'custom'});\n\t\t}\n\n\t\treturn this.loader;\n\t}\n\n\tshowLoader()\n\t{\n\t\tif(this.templateEngine)\n\t\t{\n\t\t\tthis.getLoader().show(this.templateEngine.$el);\n\t\t}\n\t}\n\n\thideLoader()\n\t{\n\t\tthis.getLoader().hide();\n\t}\n\n\tstartProgress(buttonEvent = null)\n\t{\n\t\tthis.isProgress = true;\n\t\tthis.templateEngine.$emit('on-start-progress');\n\t\tthis.showLoader();\n\t\tif (Type.isDomNode(buttonEvent))\n\t\t{\n\t\t\tbuttonEvent.classList.add('ui-btn-wait');\n\t\t}\n\t}\n\n\tstopProgress(buttonEvent = null)\n\t{\n\t\tthis.isProgress = false;\n\t\tthis.templateEngine.$emit('on-stop-progress');\n\t\tthis.hideLoader();\n\t\tif (Type.isDomNode(buttonEvent))\n\t\t{\n\t\t\tbuttonEvent.classList.remove('ui-btn-wait');\n\t\t}\n\t}\n\n\thidePage(page)\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tlet promise;\n\t\t\tif(page.landingId > 0)\n\t\t\t{\n\t\t\t\tpromise = Manager.hidePage(page);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tpromise = Manager.deleteUrl(page);\n\t\t\t}\n\t\t\tpromise.then(() =>\n\t\t\t{\n\t\t\t\tthis.store.commit('application/removePage', {page});\n\t\t\t\tresolve();\n\t\t\t}).catch((result) =>\n\t\t\t{\n\t\t\t\tApp.showError(result.answer.error_description);\n\t\t\t\treject(result.answer.error_description);\n\t\t\t});\n\t\t});\n\t}\n\n\tsendPage(pageId)\n\t{\n\t\tif(this.isProgress)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tif(this.disableSendButton)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tconst pages = this.store.getters['application/getPages']();\n\t\tlet page;\n\t\tfor(let index in pages)\n\t\t{\n\t\t\tif(pages.hasOwnProperty(index) && pages[index].id === pageId)\n\t\t\t{\n\t\t\t\tpage = pages[index];\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tlet source = 'other';\n\t\tif(page.landingId > 0)\n\t\t{\n\t\t\tif(parseInt(page.siteId) === parseInt(Manager.connectedSiteId))\n\t\t\t{\n\t\t\t\tsource = 'landing_store_chat';\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tsource = 'landing_other';\n\t\t\t}\n\t\t}\n\t\tif(!this.dialogId)\n\t\t{\n\t\t\tthis.slider.data.set('action', 'sendPage');\n\t\t\tthis.slider.data.set('page', page);\n\t\t\tthis.slider.data.set('pageId', pageId);\n\t\t\tif(this.context === 'sms')\n\t\t\t{\n\t\t\t\tthis.startProgress();\n\t\t\t\tBX.Salescenter.Manager.addAnalyticAction({\n\t\t\t\t\tanalyticsLabel: 'salescenterSendSms',\n\t\t\t\t\tcontext: this.context,\n\t\t\t\t\tsource: source,\n\t\t\t\t\ttype: page.isWebform ? 'form' : 'info',\n\t\t\t\t\tcode: page.code,\n\t\t\t\t}).then(() =>\n\t\t\t\t{\n\t\t\t\t\tthis.stopProgress();\n\t\t\t\t\tthis.closeApplication();\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.closeApplication();\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\tthis.startProgress();\n\n\t\tAjax.runAction('salescenter.page.send', {\n\t\t\tanalyticsLabel: 'salescenterSendChat',\n\t\t\tgetParameters: {\n\t\t\t\tdialogId: this.dialogId,\n\t\t\t\tcontext: this.context,\n\t\t\t\tsource: source,\n\t\t\t\ttype: page.isWebform ? 'form' : 'info',\n\t\t\t\tconnector: this.connector,\n\t\t\t\tcode: page.code,\n\t\t\t},\n\t\t\tdata: {\n\t\t\t\tid: pageId,\n\t\t\t\toptions: {\n\t\t\t\t\tdialogId: this.dialogId,\n\t\t\t\t\tsessionId: this.sessionId,\n\t\t\t\t},\n\t\t\t}\n\t\t}).then(() =>\n\t\t{\n\t\t\tthis.stopProgress();\n\t\t\tthis.closeApplication();\n\t\t}).catch((result) =>\n\t\t{\n\t\t\tApp.showError(result.errors.pop().message);\n\t\t\tthis.stopProgress();\n\t\t});\n\t}\n\n\tsendCompilation(buttonEvent = null, sendCompilationLinkToFacebook = false)\n\t{\n\t\tif (!this.isPaymentCreationAvailable)\n\t\t{\n\t\t\tthis.closeApplication();\n\t\t\treturn null;\n\t\t}\n\n\t\tif (!this.store.getters['orderCreation/isAllowedSubmit'] || this.isProgress)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tif (!this.isAllowedFacebookRegion)\n\t\t{\n\t\t\tsendCompilationLinkToFacebook = true;\n\t\t}\n\n\t\tthis.startProgress(buttonEvent);\n\n\t\tlet options = {\n\t\t\tdialogId: this.dialogId,\n\t\t\tsendingMethod: this.sendingMethod,\n\t\t\tsendingMethodDesc: this.sendingMethodDesc,\n\t\t\townerTypeId: this.ownerTypeId,\n\t\t\townerId: this.ownerId,\n\t\t\tconnector: this.connector,\n\t\t\tsessionId: this.sessionId,\n\t\t\tsendCompilationLinkToFacebook: sendCompilationLinkToFacebook,\n\t\t\tcompilationId: this.compilation ? this.compilation.ID : this.newCompilationId,\n\t\t\teditable: this.options.templateMode === 'create',\n\t\t};\n\n\t\tif (this.stageOnOrderPaid !== null)\n\t\t{\n\t\t\toptions.stageOnOrderPaid = this.stageOnOrderPaid;\n\t\t}\n\t\tif (this.stageOnDeliveryFinished !== null)\n\t\t{\n\t\t\toptions.stageOnDeliveryFinished = this.stageOnDeliveryFinished;\n\t\t}\n\n\t\tif (this.connector === 'facebook' && this.isAllowedFacebookRegion && !sendCompilationLinkToFacebook)\n\t\t{\n\t\t\tthis.sendCompilationToFacebook(buttonEvent, options)\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.sendCompilationAjaxAction(buttonEvent, options);\n\t\t}\n\t}\n\n\tsendCompilationToFacebook(buttonEvent, options)\n\t{\n\t\tBX.ajax.runComponentAction(\n\t\t\t'bitrix:salescenter.app',\n\t\t\t'getFacebookSettingsPath',\n\t\t\t{\n\t\t\t\tmode: 'class',\n\t\t\t\tdata: {\n\t\t\t\t\tdialogId: this.dialogId,\n\t\t\t\t}\n\t\t\t}\n\t\t).then((response) => {\n\t\t\tconst facebookSettingsPath = response.data;\n\t\t\tif (facebookSettingsPath)\n\t\t\t{\n\t\t\t\tthis.stopProgress(buttonEvent);\n\t\t\t\tthis.showFacebookCatalogConnectionPopup(buttonEvent, facebookSettingsPath)\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tBX.ajax.runAction('salescenter.compilation.sendFacebookModerationWaitingNotification', {\n\t\t\t\t\tdata: {\n\t\t\t\t\t\toptions,\n\t\t\t\t\t},\n\t\t\t\t}).then((result) => {\n\t\t\t\t\tthis.sendCompilationAjaxAction(buttonEvent, options);\n\t\t\t\t\tthis.store.dispatch('orderCreation/resetBasket');\n\t\t\t\t\tthis.closeApplication();\n\t\t\t\t\tthis.stopProgress(buttonEvent);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\tshowFacebookCatalogConnectionPopup(buttonEvent, facebookSettingsPath)\n\t{\n\t\tif (!this.facebookCatalogConnectionPopup)\n\t\t{\n\t\t\tthis.facebookCatalogConnectionPopup = new Popup({\n\t\t\t\tclassName: 'salescenter-app-catalog-facebook-connection-popup',\n\t\t\t\tcontent: this.getFacebookCatalogConnectionPopupContent(buttonEvent, facebookSettingsPath),\n\t\t\t\twidth: 500,\n\t\t\t\toverlay: true,\n\t\t\t\toffsetTop: 0,\n\t\t\t\toffsetLeft: 0,\n\t\t\t\tpadding: 17,\n\t\t\t\tanimation: 'fading-slide',\n\t\t\t\tangle: false,\n\t\t\t\tcloseIcon: {\n\t\t\t\t\ttop: '5px',\n\t\t\t\t\tright: '5px',\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\tthis.facebookCatalogConnectionPopup.show();\n\t}\n\n\tgetFacebookCatalogConnectionPopupContent(buttonEvent, facebookSettingsPath)\n\t{\n\t\tconst setFacebookCatalogConnectionButton = Tag.render`\n\t\t\t<button class=\"ui-btn ui-btn-md ui-btn-primary\">\n\t\t\t\t${Loc.getMessage('SALESCENTER_FACEBOOK_CATALOG_POPUP_SET_BUTTON')}\n\t\t\t</button>\n\t\t`;\n\t\tEvent.bind(setFacebookCatalogConnectionButton, 'click', this.setFacebookCatalogConnectionPopupHandler.bind(this, facebookSettingsPath));\n\n\t\tconst sendLinkToB24CompilationButton = Tag.render`\n\t\t\t<button class=\"ui-btn ui-btn-md ui-btn-light-border\">\n\t\t\t\t${Loc.getMessage('SALESCENTER_FACEBOOK_CATALOG_POPUP_SEND_B24_COMPILATION_LINK_BUTTON')}\n\t\t\t</button>\n\t\t`;\n\t\tEvent.bind(sendLinkToB24CompilationButton, 'click', this.sendLinkToB24CompilationButtonPopupHandler.bind(this, buttonEvent));\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"salescenter-app-catalog-facebook-connection-popup--container\">\n\t\t\t\t<div class=\"salescenter-app-catalog-facebook-connection-popup--title\">${Loc.getMessage('SALESCENTER_FACEBOOK_CATALOG_POPUP_TITLE_1')}</div>\n\t\t\t\t<div class=\"salescenter-app-catalog-facebook-connection-popup--button-container\">\n\t\t\t\t\t${setFacebookCatalogConnectionButton}\n\t\t\t\t\t${sendLinkToB24CompilationButton}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tsetFacebookCatalogConnectionPopupHandler(facebookSettingsPath)\n\t{\n\t\tBX.SidePanel.Instance.open(facebookSettingsPath);\n\t\tthis.facebookCatalogConnectionPopup.close();\n\t}\n\n\tsendLinkToB24CompilationButtonPopupHandler(buttonEvent)\n\t{\n\t\tthis.facebookCatalogConnectionPopup.close();\n\t\tthis.sendCompilation(buttonEvent, true);\n\t}\n\n\tsendCompilationAjaxAction(buttonEvent, options)\n\t{\n\t\tconst basketItems = this.store.getters['orderCreation/getBasket']();\n\t\tconst productIds = basketItems.map((basketItem) => {\n\t\t\treturn basketItem.skuId;\n\t\t});\n\t\tBX.ajax.runAction('salescenter.compilation.sendCompilation', {\n\t\t\tdata: {\n\t\t\t\tproductIds,\n\t\t\t\toptions,\n\t\t\t},\n\t\t\tanalyticsLabel: 'salescenterCreateCompilation',\n\t\t}).then((result) => {\n\t\t\tthis.store.dispatch('orderCreation/resetBasket');\n\t\t\tthis.stopProgress(buttonEvent);\n\n\t\t\tif (result.data && result.data.compilation)\n\t\t\t{\n\t\t\t\tthis.slider.data.set('action', 'sendCompilation');\n\t\t\t\tthis.slider.data.set('compilation', result.data.compilation);\n\t\t\t}\n\n\t\t\tthis.closeApplication();\n\t\t\tthis.emitGlobalEvent('salescenter.app:oncompilationcreated');\n\t\t}).catch((data) => {\n\t\t\tdata.errors.forEach((error) => {\n\t\t\t\talert(error.message);\n\t\t\t});\n\t\t\tthis.stopProgress(buttonEvent);\n\t\t\tApp.showError(data);\n\t\t});\n\t}\n\n\tsendShipment(buttonEvent)\n\t{\n\t\tif (!this.isPaymentCreationAvailable)\n\t\t{\n\t\t\tthis.closeApplication();\n\t\t\treturn null;\n\t\t}\n\n\t\tif (!this.store.getters['orderCreation/isAllowedSubmit'] || this.isProgress)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tthis.startProgress(buttonEvent);\n\n\t\tlet data = {\n\t\t\townerTypeId: this.ownerTypeId,\n\t\t\townerId: this.ownerId,\n\t\t\torderId: this.orderId,\n\t\t\tdeliveryId: this.store.getters['orderCreation/getDeliveryId'],\n\t\t\tdeliveryPrice: this.store.getters['orderCreation/getDelivery'],\n\t\t\texpectedDeliveryPrice: this.store.getters['orderCreation/getExpectedDelivery'],\n\t\t\tdeliveryResponsibleId: this.store.getters['orderCreation/getDeliveryResponsibleId'],\n\t\t\tpersonTypeId: this.store.getters['orderCreation/getPersonTypeId'],\n\t\t\tshipmentPropValues: this.store.getters['orderCreation/getPropertyValues'],\n\t\t\tdeliveryExtraServicesValues: this.store.getters['orderCreation/getDeliveryExtraServicesValues'],\n\t\t};\n\n\t\tif (this.stageOnDeliveryFinished !== null)\n\t\t{\n\t\t\tdata.stageOnDeliveryFinished = this.stageOnDeliveryFinished;\n\t\t}\n\n\t\tBX.ajax.runAction('salescenter.order.createShipment', {\n\t\t\tdata: {\n\t\t\t\tbasketItems: this.store.getters['orderCreation/getBasket'](),\n\t\t\t\toptions: data,\n\t\t\t},\n\t\t\tanalyticsLabel: 'salescenterCreateShipment',\n\t\t}).then((result) =>\n\t\t{\n\t\t\tthis.store.dispatch('orderCreation/resetBasket');\n\t\t\tthis.stopProgress(buttonEvent);\n\n\t\t\tif (result.data)\n\t\t\t{\n\t\t\t\tif (result.data.order)\n\t\t\t\t{\n\t\t\t\t\tthis.slider.data.set('order', result.data.order);\n\t\t\t\t}\n\t\t\t\tif (result.data.deal)\n\t\t\t\t{\n\t\t\t\t\tthis.slider.data.set('deal', result.data.deal);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.closeApplication();\n\t\t\tthis.emitGlobalEvent('salescenter.app:onshipmentcreated');\n\t\t}).catch((data) =>\n\t\t{\n\t\t\tdata.errors.forEach((error) => {\n\t\t\t\talert(error.message);\n\t\t\t});\n\t\t\tthis.stopProgress(buttonEvent);\n\t\t\tApp.showError(data);\n\t\t});\n\t}\n\n\tsendPayment(buttonEvent, skipPublicMessage = 'n')\n\t{\n\t\tif (!this.isPaymentCreationAvailable)\n\t\t{\n\t\t\tthis.closeApplication();\n\t\t\treturn null;\n\t\t}\n\n\t\tif (!this.store.getters['orderCreation/isAllowedSubmit'] || this.isProgress)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tthis.startProgress(buttonEvent);\n\n\t\tlet data = {\n\t\t\tdialogId: this.dialogId,\n\t\t\tsendingMethod: this.sendingMethod,\n\t\t\tsendingMethodDesc: this.sendingMethodDesc,\n\t\t\tsessionId: this.sessionId,\n\t\t\tlineId: this.lineId,\n\t\t\townerTypeId: this.ownerTypeId,\n\t\t\torderId: this.orderId,\n\t\t\townerId: this.ownerId,\n\t\t\tskipPublicMessage,\n\t\t\tdeliveryId: this.store.getters['orderCreation/getDeliveryId'],\n\t\t\tdeliveryPrice: this.store.getters['orderCreation/getDelivery'],\n\t\t\texpectedDeliveryPrice: this.store.getters['orderCreation/getExpectedDelivery'],\n\t\t\tdeliveryResponsibleId: this.store.getters['orderCreation/getDeliveryResponsibleId'],\n\t\t\tpersonTypeId: this.store.getters['orderCreation/getPersonTypeId'],\n\t\t\tshipmentPropValues: this.store.getters['orderCreation/getPropertyValues'],\n\t\t\tdeliveryExtraServicesValues: this.store.getters['orderCreation/getDeliveryExtraServicesValues'],\n\t\t\tavailablePaySystemsIds: this.store.getters['orderCreation/getAvailablePaySystemsIds'],\n\t\t\tconnector: this.connector,\n\t\t\tcontext: this.context,\n\t\t\tcurrency: this.currencyCode,\n\t\t\tassignedById: this.assignedById,\n\t\t};\n\n\t\tif (this.documentSelector)\n\t\t{\n\t\t\tdata.boundDocumentId = this.store.getters['documentSelector/getBoundDocumentId'];\n\t\t\tdata.selectedTemplateId = this.store.getters['documentSelector/getSelectedTemplateId'];\n\t\t}\n\n\t\tif (this.stageOnOrderPaid !== null)\n\t\t{\n\t\t\tdata.stageOnOrderPaid = this.stageOnOrderPaid;\n\t\t}\n\t\tif (this.stageOnDeliveryFinished !== null)\n\t\t{\n\t\t\tdata.stageOnDeliveryFinished = this.stageOnDeliveryFinished;\n\t\t}\n\n\t\tBX.ajax.runAction('salescenter.order.createPayment', {\n\t\t\tdata: {\n\t\t\t\tbasketItems: this.store.getters['orderCreation/getBasket'](),\n\t\t\t\toptions: data,\n\t\t\t},\n\t\t\tanalyticsLabel: (this.context === 'deal') ? 'salescenterCreatePaymentSms' : 'salescenterCreatePayment',\n\t\t\tgetParameters: {\n\t\t\t\tdialogId: this.dialogId,\n\t\t\t\tcontext: this.context,\n\t\t\t\tconnector: this.connector,\n\t\t\t\tskipPublicMessage: skipPublicMessage,\n\t\t\t}\n\t\t}).then((result) =>\n\t\t{\n\t\t\tthis.store.dispatch('orderCreation/resetBasket');\n\t\t\tthis.stopProgress(buttonEvent);\n\t\t\tif (skipPublicMessage === 'y')\n\t\t\t{\n\t\t\t\tlet notify = {\n\t\t\t\t\tcontent: Loc.getMessage('SALESCENTER_ORDER_CREATE_NOTIFICATION').replace('#ORDER_ID#', result.data.order.number),\n\t\t\t\t};\n\t\t\t\tnotify.actions = [{\n\t\t\t\t\ttitle: Loc.getMessage('SALESCENTER_VIEW'),\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tclick() {\n\t\t\t\t\t\t\tManager.showOrderAdd(result.data.order.id);\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t}];\n\t\t\t\tBX.UI.Notification.Center.notify(notify);\n\t\t\t\tManager.showOrdersList({\n\t\t\t\t\torderId: result.data.order.id,\n\t\t\t\t\townerId: this.ownerId,\n\t\t\t\t\townerTypeId: this.ownerTypeId,\n\t\t\t\t\tcontext: this.context,\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.slider.data.set('action', 'sendPayment');\n\t\t\t\tthis.slider.data.set('order', result.data.order);\n\n\t\t\t\tif (result.data.deal)\n\t\t\t\t{\n\t\t\t\t\tthis.slider.data.set('deal', result.data.deal);\n\t\t\t\t}\n\n\t\t\t\tif (result.data.entity)\n\t\t\t\t{\n\t\t\t\t\tthis.slider.data.set('entity', result.data.entity);\n\t\t\t\t}\n\n\t\t\t\tthis.closeApplication();\n\t\t\t}\n\t\t\tthis.emitGlobalEvent('salescenter.app:onpaymentcreated');\n\t\t}).catch((data) =>\n\t\t{\n\n\t\t\tdata.errors.forEach((error) => {\n\t\t\t\ttop.BX.UI.Notification.Center.notify({\n\t\t\t\t\tcontent: Text.encode(error.message)\n\t\t\t\t});\n\t\t\t});\n\t\t\tthis.stopProgress(buttonEvent);\n\t\t\tApp.showError(data);\n\n\t\t\tif(this.needCloseApplication(data.errors))\n\t\t\t{\n\t\t\t\tthis.closeApplication();\n\t\t\t}\n\t\t});\n\t}\n\n\tneedCloseApplication(errors)\n\t{\n\t\tlet alwaysOpen = errors.filter(error => {\n\t\t\treturn error.code < 1 || error.code > 100\n\t\t}).length >= 1\n\n\t\treturn alwaysOpen === false\n\t}\n\n\tresendPayment(buttonEvent)\n\t{\n\t\tif (!this.isPaymentCreationAvailable)\n\t\t{\n\t\t\tthis.closeApplication();\n\t\t\treturn null;\n\t\t}\n\n\t\tif (!this.store.getters['orderCreation/isAllowedSubmit'] || this.isProgress)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tthis.startProgress(buttonEvent);\n\n\t\tconst options = {\n\t\t\tsendingMethod: this.sendingMethod,\n\t\t\tsendingMethodDesc: this.sendingMethodDesc,\n\t\t\tstageOnOrderPaid: this.stageOnOrderPaid,\n\t\t\townerTypeId: this.ownerTypeId,\n\t\t\townerId: this.ownerId,\n\t\t};\n\t\tif (this.documentSelector)\n\t\t{\n\t\t\toptions.boundDocumentId = this.store.getters['documentSelector/getBoundDocumentId'];\n\t\t\toptions.selectedTemplateId = this.store.getters['documentSelector/getSelectedTemplateId'];\n\t\t}\n\t\tBX.ajax.runAction('salescenter.order.resendPayment', {\n\t\t\tdata: {\n\t\t\t\torderId: this.orderId,\n\t\t\t\tpaymentId: this.options.paymentId,\n\t\t\t\tshipmentId: this.options.shipmentId,\n\t\t\t\toptions,\n\t\t\t},\n\t\t\tgetParameters: {\n\t\t\t\tcontext: this.context,\n\t\t\t}\n\t\t}).then((result) =>\n\t\t{\n\t\t\tthis.stopProgress(buttonEvent);\n\t\t\tthis.closeApplication();\n\t\t\tthis.emitGlobalEvent('salescenter.app:onpaymentresend');\n\t\t}).catch((data) =>\n\t\t{\n\t\t\tdata.errors.forEach((error) => {\n\t\t\t\talert(error.message);\n\t\t\t});\n\t\t\tthis.stopProgress(buttonEvent);\n\t\t\tApp.showError(data);\n\t\t});\n\t}\n\thideNoPaymentSystemsBanner()\n\t{\n\t\tconst userOptionName = this.options.orderCreationOption || false;\n\t\tconst userOptionKeyName = this.options.paySystemBannerOptionName || false;\n\t\tif (userOptionName && userOptionKeyName)\n\t\t{\n\t\t\tBX.userOptions.save('salescenter', userOptionName, userOptionKeyName, 'Y');\n\t\t}\n\t}\n\tgetOrdersCount()\n\t{\n\t\tif(this.sessionId > 0)\n\t\t{\n\t\t\treturn Rest.callMethod('salescenter.order.getActiveOrdersCount', {\n\t\t\t\tsessionId: this.sessionId\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn new Promise((resolve, reject) => {});\n\t\t}\n\t}\n\n\tgetPaymentsCount()\n\t{\n\t\tif (this.sessionId > 0)\n\t\t{\n\t\t\treturn Rest.callMethod('salescenter.order.getActivePaymentsCount', {\n\t\t\t\tsessionId: this.sessionId\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn new Promise((resolve, reject) => {});\n\t\t}\n\t}\n\n\thasClientContactInfo()\n\t{\n\t\tif (this.options.sendingMethod === 'chat')\n\t\t{\n\t\t\treturn this.options.dialogId !== '';\n\t\t}\n\n\t\treturn this.options.contactPhone !== '';\n\t}\n\n\temitGlobalEvent(eventName, data)\n\t{\n\t\tEventEmitter.emit(eventName, data);\n\t\tBX.SidePanel.Instance.postMessage(this.slider, eventName, data);\n\t}\n\n\tisPaymentMode(): boolean\n\t{\n\t\treturn this.context === 'deal';\n\t}\n}\n\ndeclare type DocumentSelectorParams = {\n\tboundDocumentId: ?number,\n\tselectedTemplateId: ?number,\n\tdocuments: ?Document[],\n\ttemplates: ?Template[],\n\ttemplateAddUrl: ?string,\n\tprovider: ?string,\n\tvalue: ?number,\n};\n\nexport type Document = {\n\tid: number,\n\ttitle: string,\n\tdetailUrl: string,\n\tisWithStamps: boolean,\n}\n\nexport type Template = {\n\tid: number,\n\ttitle: string,\n\tdocumentCreationUrl: string,\n\tisWithStamps: boolean,\n}"],"names":["ApplicationModel","pages","getPages","state","setPages","payload","saveState","removePage","page","filter","id","landingId","addPage","push","VuexBuilderModel","OrderCreationModel","currency","processingId","basket","basketVersion","propertyValues","deliveryExtraServicesValues","expectedDelivery","deliveryResponsibleId","personTypeId","deliveryId","delivery","isEnabledSubmit","isCompilationMode","errors","total","sum","discount","result","availablePaySystemsIds","resetBasket","commit","setCurrency","setDeliveryId","setDelivery","setPropertyValues","setDeliveryExtraServicesValues","setExpectedDelivery","setDeliveryResponsibleId","setPersonTypeId","setAvailablePaySystemsIds","getBasket","index","isAllowedSubmit","getTotal","getDelivery","getDeliveryId","getPropertyValues","getDeliveryExtraServicesValues","getExpectedDelivery","getDeliveryResponsibleId","getPersonTypeId","getAvailablePaySystemsIds","setBasket","setTotal","Object","assign","clearBasket","setErrors","clearErrors","setProcessingId","enableSubmit","disableSubmit","enableCompilationMode","disableCompilationMode","DocumentSelectorModel","addDocument","dispatch","document","boundDocumentId","setBoundDocumentId","paymentId","Rest","callMethod","then","response","console","error","loadTemplates","Number","entityTypeId","entityId","templates","answer","documents","selectedTemplateId","getTemplates","getDocuments","getBoundDocumentId","getSelectedTemplateId","fillState","setTemplates","setSelectedTemplateId","newDocument","isUpdated","unshift","MixinTemplatesType","data","editable","created","$root","$on","value","TileCollectionMixins","components","Label","TileLabel","TileHintImg","TileLabelPlus","TileHintImgCaption","TileHintBackground","TileHintBackgroundCaption","methods","getCollectionTile","tiles","getCollectionTileByFilter","map","Map","collection","hasOwnProperty","type","length","forEach","item","getType","set","hasTileOfferFromCollection","Tile","size","hasTileMoreFromCollection","getTileOfferFromCollection","inx","tile","getTileMoreFromCollection","getTileByIndex","openSlider","slider","AppSlider","openAppLocal","getOptionSlider","subscribe","EventTypes","AppSliderSliderClose","e","$emit","isControlTile","includes","showHint","event","popup","Hint","show","target","info","hideHint","hide","computed","width","Uninstalled","props","Array","required","mixins","template","Installed","StageMixin","statusClassMixin","status","Status","current","disabled","containerClassMixin","counterCheckedMixin","complete","onSliderClose","Cashbox","String","counter","installed","Boolean","titleItems","initialCollapseState","Block","TileInstalled","TileUnInstalled","statusClass","title","Loc","getMessage","configForBlock","collapsible","checked","onItemHint","BX","Salescenter","Manager","openHowToConfigCashBox","saveCollapsedOption","option","mounted","$app","options","templateMode","compilation","productForm","setEditable","formWrapper","$el","querySelector","appendChild","layout","refreshId","defaultCurrency","currencyCode","$store","Type","isArray","fields","isObject","totals","ProductForm","currencySymbol","iblockId","catalogIblockId","basePriceId","taxList","vatList","measures","showDiscountBlock","showProductDiscounts","showTaxBlock","showProductTaxes","totalResultLabel","mode","urlBuilderContext","urlProductBuilderContext","isCatalogPriceEditEnabled","isCatalogDiscountSetEnabled","fieldHints","hideUnselectedProperties","showCompilationModeSwitcher","compilationFormType","connector","isAllowedFacebookRegion","facebookFailProducts","FAIL_PRODUCTS","ownerId","ownerTypeId","dialogId","sessionId","isShortProductViewFormat","checkProductErrors","EventEmitter","Runtime","debounce","onBasketChange","onProductFormModeChange","onProductFormCompilationCreated","bind","getData","newCompilationId","compilationId","FormMode","COMPILATION","COMPILATION_READ_ONLY","processRefreshRequest","preparedBasket","isStringFilled","innerId","selectorId","setData","changeCompilationProducts","isNeedDisableSubmit","requestId","Text","getRandom","ajax","runAction","orderId","basketItems","prop","getObject","get","getters","productIds","basketItem","skuId","ID","isFunction","hasErrors","filledProducts","module","productId","hintTitle","Product","openHowToSell","config","DeliverySelector","availableServices","onChange","deliveryPrice","deliveryServiceId","relatedPropsValues","relatedServicesValues","estimatedDeliveryPrice","responsibleUser","onAddressFromChanged","refreshAvailableServices","onDeliveryServiceChanged","onSettingsChanged","order","shipmentPropValues","deliveryRelatedServiceValues","localize","Vue","getFilteredPhrases","sumTitle","productsPrice","deliveryFormatted","isDeliveryCalculated","Currency","currencyFormat","totalFormatted","excludedServiceIds","emptyDeliveryServiceId","actionData","Vuex","mapState","orderCreation","shipment","priceDelivery","basePriceDelivery","deliveryService","name","logo","parent","extraServices","requestProperties","canUserPerformCalls","getFormattedPrice","price","isPhoneRequestProperty","property","tags","makeCall","phoneNumber","isUndefined","window","top","phoneTo","open","hasParent","deliveryServiceLogo","deliveryServiceProfileLogo","paymentPrice","deliveryServiceName","deliveryServiceProfileName","isExtraServicesVisible","isRequestPropertiesVisible","priceDeliveryFormatted","productsPriceFormatted","paymentPriceFormatted","DeliveryVuex","isCollapsible","selectedDeliveryServiceName","ShipmentView","shipmentId","titleName","shipmentData","propValues","extraServicesValues","relatedPropsOptions","deliveryOrderPropOptions","responsibleId","assignedById","isViewTemplateMode","setTitleName","PaySystem","openHowToConfigDefaultPaySystem","ChatMessage","manager","titleTemplate","editorTemplate","editorUrl","selectedMode","UserAvatar","MessageEditor","currentSenderCode","senders","pushedToUseBitrix24Notifications","smsSenderListComponentKey","editor","url","isMessageReadOnly","context","urlSettingsCompanyContacts","openBitrix24NotificationsHelp","Automation","stageOnOrderPaid","stageOnDeliveryFinished","items","paymentStages","shipmentStages","StageList","updatePaymentStage","newStageId","stage","selected","updateShipmentStage","initStages","stages","currentValue","values","AutomationStage","create","selectedStage","isPayment","find","isHideDeliveryStage","buttonLabel","buttonEnabled","showWhatClientSeesControl","isFacebookForm","buttonClass","showSubmitCompilationLinkToFacebookButton","showWhatClientSees","openWhatClientSee","submit","submitCompilationLinkToFacebook","TimeLine","timelineItems","Item","PaymentItem","Payment","DocumentSelector","templateAddUrl","model","getDocumentTitle","currentDocument","getCurrentDocument","withStamps","isWithStamps","hasData","detailUrl","documentSelector","handleDocumentClick","openSelectorMenu","openTemplatesList","bindElement","MenuManager","prepareSelectorMenuItems","closeByEsc","cacheable","closeSelectorMenu","destroy","text","onclick","templateListItem","delimiter","handleEditDocumentClick","getDocumentById","getStubDocumentByTemplate","getTemplateById","templateId","Uri","addParam","documentCreationUrl","_paymentId","Send","message","entityResponsible","sendingMethodDesc","orderPublicUrl","product","paysystem","paySystemList","isSet","getTileCollection","getTitleItems","isPaySystemCollapsed","cashbox","automation","isHidden","parseInt","deliveryList","isInstalled","isDeliveryCollapsed","cashboxList","isCashboxCollapsed","isAutomationAvailable","entityStageList","isAutomationCollapsed","timeline","getTimelineCollection","isSendAllowed","hasStageTimeLine","hasStageAutomation","hasStageCashBox","submitButtonLabel","isShowDocumentSelector","initCounter","list","TimeLineItem","stageRefresh","runComponentAction","refreshTilesByType","UI","Notification","Center","notify","content","onSend","onSendCompilationLinkToFacebook","changeProvider","provider","userOptions","save","text_modes","payment","beforeUpdate","isFaded","createPinner","startFade","endFade","buttonsPanel","$refs","parentNode","Pinner","fixBottom","isFrame","fullWidth","close","closeApplication","isOrderPublicUrlAvailable","wrapperClass","wrapperStyle","position","pos","offset","$nodes","footer","height","connect","loader","Loader","body","no_redirect","loadConfig","isSiteExists","isOrderPublicUrlExists","checkRecycle","openConnectedSite","isOrderPageDeleted","isVisible","openControlPanel","ComponentMixin","isShowPreview","isShowPayment","pageTitle","currentPageId","actions","frameCheckShortTimeout","frameCheckLongTimeout","isPagesOpen","isFormsOpen","showedPageIds","loadedPageIds","errorPageIds","lastAddedPages","ordersCount","paymentsCount","editedPageId","currentPageTitle","Start","NoPaymentSystemsBanner","StageBlocksList","updated","renderErrors","createLoader","fillPages","isWithOrdersMode","refreshOrdersCount","refreshPaymentsCount","openFirstPage","isPaymentsLimitReached","paymentsLimitStartNode","paymentsLimit","paymentsLimitNode","children","node","getActions","currentPage","SALESCENTER_RIGHT_ACTION_COPY_URL","copyUrl","SALESCENTER_RIGHT_ACTION_HIDE","hidePage","SALESCENTER_RIGHT_ACTION_DELETE","SALESCENTER_RIGHT_ACTION_ADD","getAddPageActions","isWebform","SALESCENTER_RIGHT_ACTION_ADD_SITE_B24","addSite","SALESCENTER_RIGHT_ACTION_ADD_CUSTOM","showAddUrlPopup","isPaymentCreationAvailable","showPaymentForm","firstWebformPage","pageToOpen","onPageClick","setPageTitle","hideActionsPopup","isFrameDenied","startFrameCheckTimeout","onFrameError","showActionsPopup","PopupMenu","offsetLeft","offsetTop","showCompanyContacts","showAddPageActionPopup","menuId","offsetWidth","offsetHeight","angle","addSitePage","newPage","editPage","editLandingPage","siteId","hideNoPaymentSystemsBanner","isPlainObject","addCustomPage","pageId","getPaymentItemTitle","SALESCENTER_LEFT_PAYMENT_ADD_2","SALESCENTER_LEFT_PAYMENT_AND_DELIVERY","SALESCENTER_DEFAULT_TITLE","showOrdersList","showPaymentsList","showOrderAdd","showCatalog","onFormsClick","openHelpDesk","openHowItWorks","isPageSelected","sendCompilationLinkToFacebook","send","skipPublicMessage","isAllowedSubmitButton","isShowStartInfo","sendCompilation","sendPayment","isActive","sendPage","innerText","clearTimeout","onFrameLoad","onSuccessfullyConnected","setTimeout","getFrameSource","setQueryParam","toString","getOrdersCount","getPaymentsCount","errorMessages","join","params","color","Alert","Color","DANGER","textCenter","util","htmlspecialchars","errorBlock","innerHTML","animated","alert","getContainer","editMenuItem","focus","saveMenuItem","oldName","analyticsLabel","application","sendButtonLabel","pagesSubmenuHeight","formsSubmenuHeight","isFrameError","isShowLoader","res","lastModified","modifiedAgo","SALESCENTER_MODIFIED","replace","disableSendButton","isNoPaymentSystemsBannerVisible","showPaySystemSettingBanner","TYPE_PHONE","TYPE_SENDER","SmsMessage","initSenders","initCurrentSenderCode","initPushedToUseBitrix24Notifications","selectedSmsSender","phone","contactEditorUrl","Error","SenderList","MessageEdit","MessageView","MessageControl","contactPhone","hintClassModifier","currentSender","sender","code","bitrix24ConnectUrlError","SenderConfig","needConfigure","getConnectionErrorText","fixer","openSliderFreeMessages","connectUrl","fixText","getConnectionErrorFixText","BITRIX24","isAvailable","toUpperCase","isConnected","usageErrors","getFixer","handleErrorFix","initialize","onConfigureContactPhone","messageCode","fallback","fixUrl","events","onLoad","getSlider","sliderBx","getFrameWindow","addCustomEvent","loadExt","InfoHelper","Promise","resolve","handleOnSmsSenderSelected","Ajax","handlePhoneErrorFix","hendleSmsErrorBlock","openBitrix24NotificationsWorks","sendAllowed","sent","groups","getTileGroupsCollection","isViewWithoutDelivery","ret","group","fillTiles","changeContactPhone","editableMixin","activeMenuItem","isLoading","EntityCreatePaymentStages","StageBlocksListShipment","reload","form","initialMode","onReload","sendPaymentDeliveryForm","isAllowedPaymentDeliverySubmitButton","resendPayment","sendDeliveryForm","isAllowedDeliverySubmitButton","sendShipment","specifyCompanyContacts","suggestScenario","openFeedbackPayOrderForm","howItWorks","openHowPaySmartInvoiceWorks","openHowPayDealWorks","openIntegrationWindow","openIntegrationRequestForm","freeMessages","fixed","isAllowedFreeMessagesButton","isOnlyDeliveryItemVisible","hasInstallable","hasClientContactInfo","filteredSenders","isSuggestScenarioMenuItemVisible","isBitrix24","isRequestIntegrationMenuItemVisible","isIntegrationButtonVisible","needShowStoreConnection","sendPaymentDeliveryFormButtonText","getTitleForPaymentDeliveryMenuItem","paymentDeliveryFormSubmitButtonClass","deliveryFormSubmitButtonClass","paymentDeliveryMenuItemClass","deliveryMenuItemClass","instances","App","lineId","orderAddPullTag","landingPublicationPullTag","landingUnPublicationPullTag","isCatalogAvailable","DocumentSelectorParams","SidePanel","Instance","getTopSlider","isProgress","fillPagesTimeout","fillPagesQueue","sendingMethod","fileControl","isString","isBoolean","Event","ready","pull","PULL","initPull","initStore","initTemplate","showError","moduleId","command","callback","showOrdersListAfterCreate","store","templateEngine","el","getElementById","Chat","Deal","isPaymentMode","leftPanel","orderSelector","initOrderSelector","arParams","getLoader","componentKey","orderList","orderSelectorBtn","setAttribute","popupMenu","menuItems","orderCaption","classList","remove","addEventListener","preventDefault","init","err","startProgress","stopProgress","buttonEvent","showLoader","isDomNode","add","hideLoader","reject","promise","deleteUrl","error_description","source","connectedSiteId","addAnalyticAction","getParameters","pop","sendCompilationToFacebook","sendCompilationAjaxAction","facebookSettingsPath","showFacebookCatalogConnectionPopup","facebookCatalogConnectionPopup","Popup","className","getFacebookCatalogConnectionPopupContent","overlay","padding","animation","closeIcon","right","setFacebookCatalogConnectionButton","Tag","render","setFacebookCatalogConnectionPopupHandler","sendLinkToB24CompilationButton","sendLinkToB24CompilationButtonPopupHandler","emitGlobalEvent","expectedDeliveryPrice","deal","number","click","entity","encode","needCloseApplication","alwaysOpen","userOptionName","orderCreationOption","userOptionKeyName","paySystemBannerOptionName","eventName","emit","postMessage","builder","VuexBuilder","addModel","useNamespace","build"],"mappings":"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"}