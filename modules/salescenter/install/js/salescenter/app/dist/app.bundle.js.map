{"version":3,"file":"app.bundle.js","sources":["../src/models/application.js","../src/models/ordercreation.js","../src/config.js","../src/component.js","../src/bx-salescenter-app-add-payment-product.js","../src/bx-salescenter-app-add-payment.js","../src/app.js"],"sourcesContent":["import {VuexBuilderModel} from 'ui.vue.vuex';\n\nexport class ApplicationModel extends VuexBuilderModel\n{\n\t/**\n\t * @inheritDoc\n\t */\n\tgetName()\n\t{\n\t\treturn 'application';\n\t}\n\n\tgetState()\n\t{\n\t\treturn {\n\t\t\tpages: [],\n\t\t}\n\t}\n\n\tgetGetters()\n\t{\n\t\treturn {\n\t\t\tgetPages: (state) => () =>\n\t\t\t{\n\t\t\t\treturn state.pages;\n\t\t\t},\n\t\t}\n\t}\n\n\tgetMutations()\n\t{\n\t\treturn {\n\t\t\tsetPages: (state, payload) =>\n\t\t\t{\n\t\t\t\tif(typeof payload.pages === 'object')\n\t\t\t\t{\n\t\t\t\t\tstate.pages = payload.pages;\n\t\t\t\t\tthis.saveState(state);\n\t\t\t\t}\n\t\t\t},\n\t\t\tremovePage: (state, payload) =>\n\t\t\t{\n\t\t\t\tif(typeof payload.page === 'object')\n\t\t\t\t{\n\t\t\t\t\tstate.pages = state.pages.filter((page) => {\n\t\t\t\t\t\treturn !(\n\t\t\t\t\t\t\t(payload.page.id && payload.page.id > 0 && page.id === payload.page.id) ||\n\t\t\t\t\t\t\t(payload.page.landingId && payload.page.landingId > 0 && page.landingId === payload.page.landingId)\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\t\t\tthis.saveState(state);\n\t\t\t\t}\n\t\t\t},\n\t\t\taddPage: (state, payload) =>\n\t\t\t{\n\t\t\t\tif(typeof payload.page === 'object')\n\t\t\t\t{\n\t\t\t\t\tstate.pages.push(payload.page);\n\t\t\t\t\tthis.saveState(state);\n\t\t\t\t}\n\t\t\t},\n\t\t}\n\t}\n}","import {Vue} from 'ui.vue';\nimport {VuexBuilderModel} from 'ui.vue.vuex';\nimport \"currency\";\n\nexport class OrderCreationModel extends VuexBuilderModel\n{\n\t/**\n\t * @inheritDoc\n\t */\n\tgetName()\n\t{\n\t\treturn 'orderCreation';\n\t}\n\n\tgetState()\n\t{\n\t\treturn {\n\t\t\tcurrency: '',\n\t\t\tprocessingId: null,\n\t\t\tshowPaySystemSettingBanner: false,\n\t\t\tselectedProducts: [],\n\t\t\tbasket: [],\n\t\t\terrors: [],\n\t\t\ttotal: {\n\t\t\t\tsum: null,\n\t\t\t\tdiscount: null,\n\t\t\t\tresult: null\n\t\t\t}\n\t\t}\n\t}\n\n\tstatic getBasketItemState()\n\t{\n\t\treturn {\n\t\t\tproductId: null,\n\t\t\tcode: null,\n\t\t\tname: '',\n\t\t\tsort: 0,\n\t\t\tbasePrice: 0,\n\t\t\tcatalogPrice: 0,\n\t\t\tquantity: 0,\n\t\t\tshowDiscount: '',\n\t\t\tdiscount: 0,\n\t\t\tdiscountInfos: [],\n\t\t\tdiscountType: 'percent',\n\t\t\tmodule: null,\n\t\t\tformattedPrice: 0,\n\t\t\tformattedCatalogPrice: null,\n\t\t\tmeasureCode: 0,\n\t\t\tmeasureName: '',\n\t\t\tisCustomPrice: 'N',\n\t\t\tisCreatedProduct: 'N',\n\t\t\tencodedFields: null,\n\t\t\terrors: [],\n\t\t};\n\t}\n\n\tgetActions()\n\t{\n\t\treturn {\n\t\t\trefreshBasket({ commit, dispatch, state }, payload)\n\t\t\t{\n\t\t\t\tpayload.timeout = payload.timeout || 300;\n\t\t\t\tif (this.updateTimer)\n\t\t\t\t{\n\t\t\t\t\tclearTimeout(this.updateTimer);\n\t\t\t\t}\n\n\t\t\t\tthis.updateTimer = setTimeout(() => {\n\t\t\t\t\tconst currentProcessingId = Math.random() * 100000;\n\t\t\t\t\tcommit('setProcessingId', currentProcessingId);\n\t\t\t\t\tBX.ajax.runAction(\n\t\t\t\t\t\t\"salescenter.api.order.refreshBasket\",\n\t\t\t\t\t\t{ data: { basketItems: state.basket } }\n\t\t\t\t\t)\n\t\t\t\t\t.then((result) => {\n\t\t\t\t\t\tif (currentProcessingId === state.processingId)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconst data = BX.prop.getObject(result,\"data\", {});\n\t\t\t\t\t\t\tdispatch('processRefreshRequest', {\n\t\t\t\t\t\t\t\ttotal: BX.prop.getObject(data,\"total\",{}),\n\t\t\t\t\t\t\t\tbasket: BX.prop.get(data,\"items\",[])\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tif (payload.onsuccess)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tpayload.onsuccess();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.catch((result) => {\n\t\t\t\t\t\tif (currentProcessingId === state.processingId)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconst data = BX.prop.getObject(result,\"data\", {});\n\t\t\t\t\t\t\tdispatch('processRefreshRequest', {\n\t\t\t\t\t\t\t\terrors: BX.prop.get(result,\"errors\", []),\n\t\t\t\t\t\t\t\tbasket: BX.prop.get(data,\"items\",[])\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tif (payload.onfailure)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tpayload.onfailure();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}, payload.timeout);\n\t\t\t},\n\t\t\tprocessRefreshRequest({ commit, dispatch }, payload)\n\t\t\t{\n\t\t\t\tif (BX.type.isArray(payload.basket))\n\t\t\t\t{\n\t\t\t\t\tpayload.basket.forEach((basketItem) => {\n\t\t\t\t\t\tcommit('updateBasketItem', {\n\t\t\t\t\t\t\tindex: basketItem.sort,\n\t\t\t\t\t\t\tfields: basketItem,\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\n\t\t\t\t\tcommit('setSelectedProducts');\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (BX.type.isObject(payload.total))\n\t\t\t\t{\n\t\t\t\t\tcommit('setTotal', payload.total);\n\t\t\t\t}\n\n\t\t\t\tif (BX.type.isArray(payload.errors))\n\t\t\t\t{\n\t\t\t\t\tcommit('setErrors', payload.errors);\n\t\t\t\t\tdispatch('recalculate');\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tcommit('clearErrors');\n\t\t\t\t}\n\n\t\t\t\tcommit('setProcessingId', null);\n\t\t\t},\n\t\t\trecalculate({ commit, state })\n\t\t\t{\n\t\t\t\tcommit('setProcessingId', null);\n\t\t\t\tlet productCost = 0;\n\t\t\t\tlet totalDiscount = 0;\n\t\t\t\tlet resultSum = 0;\n\t\t\t\tstate.basket.forEach((item, i) => {\n\t\t\t\t\tif (item.name === '')\n\t\t\t\t\t{\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tlet currentPrice = item.basePrice;\n\t\t\t\t\tif (item.discount > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tlet discountValue = item.discount;\n\t\t\t\t\t\tif (item.discountType === 'percent')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tdiscountValue = (item.basePrice * item.discount) / 100\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcurrentPrice -= discountValue;\n\t\t\t\t\t\ttotalDiscount += (discountValue * item.quantity);\n\t\t\t\t\t}\n\n\t\t\t\t\tcurrentPrice = (currentPrice > 0) ? currentPrice : 0;\n\t\t\t\t\tresultSum += (currentPrice * item.quantity);\n\t\t\t\t\tproductCost += (item.catalogPrice * item.quantity);\n\n\t\t\t\t\tcommit('updateBasketItem', {\n\t\t\t\t\t\tindex: i,\n\t\t\t\t\t\tfields: {\n\t\t\t\t\t\t\tformattedPrice: BX.Currency.currencyFormat(currentPrice, state.currency, true),\n\t\t\t\t\t\t\tformattedCatalogPrice: BX.Currency.currencyFormat(item.catalogPrice, state.currency, true),\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\ttotalDiscount = Math.min(totalDiscount, productCost);\n\t\t\t\tcommit('setTotal', {\n\t\t\t\t\tsum: BX.Currency.currencyFormat(productCost, state.currency, true),\n\t\t\t\t\tdiscount: BX.Currency.currencyFormat(totalDiscount, state.currency, true),\n\t\t\t\t\tresult: BX.Currency.currencyFormat(resultSum, state.currency, true)\n\t\t\t\t});\n\t\t\t},\n\t\t\tresetBasket ({ commit })\n\t\t\t{\n\t\t\t\tcommit('clearBasket');\n\t\t\t\tcommit('setTotal', {\n\t\t\t\t\tsum: null,\n\t\t\t\t\tdiscount: null,\n\t\t\t\t\tresult: null\n\t\t\t\t});\n\t\t\t\tcommit('addBasketItem');\n\t\t\t},\n\t\t\tremoveItem({ commit, state, dispatch }, payload)\n\t\t\t{\n\t\t\t\tcommit('deleteBasketItem', payload);\n\t\t\t\tif (state.basket.length === 0)\n\t\t\t\t{\n\t\t\t\t\tcommit('addBasketItem');\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tstate.basket.forEach((item, i) => {\n\t\t\t\t\t\tcommit('updateBasketItem', {\n\t\t\t\t\t\t\tindex: i,\n\t\t\t\t\t\t\tfields: {sort: i}\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tdispatch('recalculate');\n\t\t\t},\n\t\t\tchangeBasketItem: ({ commit, dispatch }, payload) =>\n\t\t\t{\n\t\t\t\tcommit('updateBasketItem', payload);\n\t\t\t\tcommit('setSelectedProducts');\n\t\t\t\tdispatch('recalculate');\n\t\t\t},\n\t\t\tsetCurrency: ({ commit }, payload) =>\n\t\t\t{\n\t\t\t\tconst currency = payload || '';\n\t\t\t\tcommit('setCurrency', currency);\n\t\t\t}\n\t\t}\n\t}\n\n\tgetGetters()\n\t{\n\t\treturn {\n\t\t\tgetBasket: state => index =>\n\t\t\t{\n\t\t\t\treturn state.basket;\n\t\t\t},\n\t\t\tisAllowedSubmit: state =>\n\t\t\t{\n\t\t\t\treturn state.basket.filter( basketItem => (\n\t\t\t\t\t(basketItem.module === 'catalog' && parseInt(basketItem.productId) > 0)\n\t\t\t\t\t|| (basketItem.module !== 'catalog' && BX.type.isNotEmptyString(basketItem.name) && parseFloat(basketItem.quantity) > 0)\n\t\t\t\t)).length > 0;\n\t\t\t},\n\t\t}\n\t}\n\n\tgetMutations()\n\t{\n\t\treturn {\n\t\t\taddBasketItem: (state, payload) =>\n\t\t\t{\n\t\t\t\tlet item = OrderCreationModel.getBasketItemState();\n\t\t\t\titem.sort = state.basket.length;\n\t\t\t\tstate.basket.push(item);\n\t\t\t},\n\t\t\tupdateBasketItem: (state, payload) =>\n\t\t\t{\n\t\t\t\tif (typeof state.basket[payload.index] === 'undefined')\n\t\t\t\t{\n\t\t\t\t\tVue.set(state.basket, payload.index, OrderCreationModel.getBasketItemState());\n\t\t\t\t}\n\n\t\t\t\tstate.basket[payload.index] = Object.assign(\n\t\t\t\t\tstate.basket[payload.index],\n\t\t\t\t\tpayload.fields\n\t\t\t\t);\n\t\t\t},\n\t\t\tclearBasket: (state) =>\n\t\t\t{\n\t\t\t\tstate.basket = [];\n\t\t\t},\n\t\t\tdeleteBasketItem: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.basket.splice(payload.index, 1);\n\t\t\t},\n\t\t\tsetSelectedProducts: (state) =>\n\t\t\t{\n\t\t\t\tstate.selectedProducts = state.basket\n\t\t\t\t\t.filter( basketItem => (basketItem.module === 'catalog' && parseInt(basketItem.productId) > 0))\n\t\t\t\t\t.map( filtered => filtered.productId);\n\t\t\t},\n\t\t\tsetTotal: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.total = Object.assign(\n\t\t\t\t\tstate.total,\n\t\t\t\t\tpayload\n\t\t\t\t);\n\t\t\t},\n\t\t\tsetErrors: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.errors = payload;\n\t\t\t},\n\t\t\tclearErrors: (state) =>\n\t\t\t{\n\t\t\t\tstate.errors = [];\n\t\t\t},\n\t\t\tsetProcessingId: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.processingId = payload;\n\t\t\t},\n\t\t\tsetCurrency: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.currency = payload;\n\t\t\t},\n\t\t\tshowBanner: (state) =>\n\t\t\t{\n\t\t\t\tstate.showPaySystemSettingBanner = true;\n\t\t\t},\n\t\t\thideBanner: (state) =>\n\t\t\t{\n\t\t\t\tstate.showPaySystemSettingBanner = false;\n\t\t\t},\n\t\t}\n\t}\n}","export const config = Object.freeze({\n\tdatabaseConfig: {\n\t\tname: 'salescenter.app',\n\t},\n\ttemplateName: 'bx-salescenter-app',\n\ttemplateAddPaymentName: 'bx-salescenter-app-add-payment',\n\ttemplateAddPaymentProductName: 'bx-salescenter-app-add-payment-product',\n\tmoduleId: 'salescenter',\n});","import {Vue} from 'ui.vue';\nimport {Vuex} from 'ui.vue.vuex';\nimport {Manager} from 'salescenter.manager';\nimport {Loader} from 'main.loader';\nimport {Type, Uri} from 'main.core';\nimport 'popup';\nimport 'ui.buttons';\nimport 'ui.buttons.icons';\nimport 'ui.forms';\nimport 'ui.fonts.opensans';\nimport 'ui.pinner';\n\nimport {config} from './config';\n\nVue.component(config.templateName, {\n\tdata()\n\t{\n\t\treturn {\n\t\t\tisShowPreview: false,\n\t\t\tisShowPayment: false,\n\t\t\tpageTitle: '',\n\t\t\tcurrentPageId: null,\n\t\t\tactions: [],\n\t\t\tframeCheckShortTimeout: false,\n\t\t\tframeCheckLongTimeout: false,\n\t\t\tisPagesOpen: false,\n\t\t\tisFormsOpen: false,\n\t\t\tshowedPageIds: [],\n\t\t\tloadedPageIds: [],\n\t\t\terrorPageIds: [],\n\t\t\tlastAddedPages: [],\n\t\t\tordersCount: null,\n\t\t\teditedPageId: null,\n\t\t\tisOrderPublicUrlAvailable: null,\n\t\t};\n\t},\n\n\tcreated()\n\t{\n\t},\n\n\tupdated()\n\t{\n\t\tthis.renderErrors();\n\t},\n\n\tmounted()\n\t{\n\t\tthis.createPinner();\n\t\tthis.createLoader();\n\t\tthis.$root.$app.fillPages().then(() =>\n\t\t{\n\t\t\tthis.refreshOrdersCount();\n\t\t\tthis.openFirstPage();\n\t\t});\n\t\tthis.isOrderPublicUrlAvailable = this.$root.$app.isOrderPublicUrlAvailable;\n\t\tthis.isOrderPublicUrlExists = this.$root.$app.isOrderPublicUrlExists;\n\n\t\tif(this.$root.$app.isPaymentsLimitReached)\n\t\t{\n\t\t\tlet paymentsLimitStartNode = this.$root.$nodes.paymentsLimit;\n\t\t\tlet paymentsLimitNode = this.$refs['paymentsLimit'];\n\t\t\tfor (let node of paymentsLimitStartNode.children)\n\t\t\t{\n\t\t\t\tpaymentsLimitNode.appendChild(node);\n\t\t\t}\n\t\t}\n\n\t\tthis.movePanels();\n\t},\n\n\tmethods:\n\t{\n\t\tmovePanels()\n\t\t{\n\t\t\tlet sidepanel = this.$refs['sidebar'];\n\t\t\tlet leftPanel = this.$root.$nodes.leftPanel;\n\t\t\tif(!leftPanel)\n\t\t\t{\n\t\t\t\tleftPanel = this.$refs['leftSide'];\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.$refs['leftSide'].remove();\n\t\t\t}\n\n\t\t\tif(sidepanel && leftPanel)\n\t\t\t{\n\t\t\t\tleftPanel.appendChild(sidepanel);\n\t\t\t\tBX.show(sidepanel);\n\n\t\t\t\tlet nav = this.$refs['sidepanelNav'];\n\t\t\t\tif(nav)\n\t\t\t\t{\n\t\t\t\t\tleftPanel.appendChild(nav);\n\t\t\t\t\tBX.show(nav);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tcreatePinner()\n\t\t{\n\t\t\tlet buttonsPanel = this.$refs['buttonsPanel'];\n\t\t\tif(buttonsPanel)\n\t\t\t{\n\t\t\t\tthis.$root.$el.parentNode.appendChild(buttonsPanel);\n\t\t\t\tnew BX.UI.Pinner(\n\t\t\t\t\tbuttonsPanel,\n\t\t\t\t\t{\n\t\t\t\t\t\tfixBottom: this.$root.$app.isFrame,\n\t\t\t\t\t\tfullWidth: this.$root.$app.isFrame\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t},\n\t\tgetActions()\n\t\t{\n\t\t\tlet actions = [];\n\t\t\tif(this.currentPage)\n\t\t\t{\n\t\t\t\tactions = [\n\t\t\t\t\t{text: this.localize.SALESCENTER_RIGHT_ACTION_COPY_URL, onclick: this.copyUrl},\n\t\t\t\t];\n\t\t\t\tif(this.currentPage.landingId > 0)\n\t\t\t\t{\n\t\t\t\t\tactions = [\n\t\t\t\t\t\t...actions,\n\t\t\t\t\t\t{text: this.localize.SALESCENTER_RIGHT_ACTION_HIDE, onclick: this.hidePage},\n\t\t\t\t\t];\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tactions = [\n\t\t\t\t\t\t...actions,\n\t\t\t\t\t\t{text: this.localize.SALESCENTER_RIGHT_ACTION_DELETE, onclick: this.hidePage},\n\t\t\t\t\t];\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn [\n\t\t\t\t...actions,\n\t\t\t\t{text: this.localize.SALESCENTER_RIGHT_ACTION_ADD, items: this.getAddPageActions()},\n\t\t\t];\n\t\t},\n\t\tgetAddPageActions(isWebform = false)\n\t\t{\n\t\t\treturn [\n\t\t\t\t{text: this.localize.SALESCENTER_RIGHT_ACTION_ADD_SITE_B24, onclick: () =>\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.addSite(isWebform);\n\t\t\t\t\t}},\n\t\t\t\t{text: this.localize.SALESCENTER_RIGHT_ACTION_ADD_CUSTOM, onclick: () =>\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.showAddUrlPopup({\n\t\t\t\t\t\t\tisWebform: isWebform === true ? 'Y' : null\n\t\t\t\t\t\t});\n\t\t\t\t\t}},\n\t\t\t];\n\t\t},\n\t\topenFirstPage()\n\t\t{\n\t\t\tthis.isShowPayment = false;\n\t\t\tthis.isShowPreview = true;\n\t\t\tif(this.pages && this.pages.length > 0)\n\t\t\t{\n\t\t\t\tlet firstWebformPage = false;\n\t\t\t\tlet pageToOpen = false;\n\t\t\t\tthis.pages.forEach((page) =>\n\t\t\t\t{\n\t\t\t\t\tif(!pageToOpen)\n\t\t\t\t\t{\n\t\t\t\t\t\tif(!page.isWebform)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tpageToOpen = page;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfirstWebformPage = page;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tif(!pageToOpen && firstWebformPage)\n\t\t\t\t{\n\t\t\t\t\tpageToOpen = firstWebformPage;\n\t\t\t\t}\n\t\t\t\tif(this.currentPageId !== pageToOpen.id)\n\t\t\t\t{\n\t\t\t\t\tthis.onPageClick(pageToOpen);\n\t\t\t\t\tif(pageToOpen.isWebform)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.isFormsOpen = true;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.isPagesOpen = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.currentPageId = this.pages[0].id;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.pageTitle = null;\n\t\t\t\tthis.currentPageId = null;\n\t\t\t\tthis.setPageTitle(this.pageTitle);\n\t\t\t}\n\t\t},\n\t\tonPageClick(page)\n\t\t{\n\t\t\tthis.pageTitle = page.name;\n\t\t\tthis.currentPageId = page.id;\n\t\t\tthis.hideActionsPopup();\n\t\t\tthis.isShowPayment = false;\n\t\t\tthis.isShowPreview = true;\n\t\t\tthis.setPageTitle(this.pageTitle);\n\t\t\tif(page.isFrameDenied !== true)\n\t\t\t{\n\t\t\t\tif(!this.showedPageIds.includes(page.id))\n\t\t\t\t{\n\t\t\t\t\tthis.startFrameCheckTimeout();\n\t\t\t\t\tthis.showedPageIds.push(page.id);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.onFrameError();\n\t\t\t}\n\t\t},\n\t\tshowActionsPopup({target})\n\t\t{\n\t\t\tBX.PopupMenu.show('salescenter-app-actions', target, this.getActions(), {\n\t\t\t\toffsetLeft: 0,\n\t\t\t\toffsetTop: 0,\n\t\t\t\tcloseByEsc: true,\n\t\t\t});\n\t\t},\n\t\tshowAddPageActionPopup({target}, isWebform = false)\n\t\t{\n\t\t\tlet menuId = 'salescenter-app-add-page-actions';\n\t\t\tif(isWebform)\n\t\t\t{\n\t\t\t\tmenuId += '-forms';\n\t\t\t}\n\t\t\tBX.PopupMenu.show(menuId, target, this.getAddPageActions(isWebform), {\n\t\t\t\toffsetLeft: target.offsetWidth + 20,\n\t\t\t\toffsetTop: -target.offsetHeight - 15,\n\t\t\t\tcloseByEsc: true,\n\t\t\t\tangle: {\n\t\t\t\t\tposition: 'left',\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\thideActionsPopup()\n\t\t{\n\t\t\tBX.PopupMenu.destroy('salescenter-app-actions');\n\t\t\tBX.PopupMenu.destroy('salescenter-app-add-page-actions');\n\t\t},\n\t\taddSite(isWebform = false)\n\t\t{\n\t\t\tManager.addSitePage(isWebform).then((result) =>\n\t\t\t{\n\t\t\t\tlet newPage = result.answer.result.page || false;\n\t\t\t\tthis.$root.$app.fillPages().then(() =>\n\t\t\t\t{\n\t\t\t\t\tif(newPage)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.onPageClick(newPage);\n\t\t\t\t\t\tthis.lastAddedPages.push(parseInt(newPage.id));\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.openFirstPage();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t\tthis.hideActionsPopup();\n\t\t},\n\t\tcopyUrl(event)\n\t\t{\n\t\t\tif(this.currentPage && this.currentPage.url)\n\t\t\t{\n\t\t\t\tManager.copyUrl(this.currentPage.url, event);\n\t\t\t\tthis.hideActionsPopup();\n\t\t\t}\n\t\t},\n\t\teditPage()\n\t\t{\n\t\t\tif(this.currentPage)\n\t\t\t{\n\t\t\t\tif(this.currentPage.landingId && this.currentPage.landingId > 0)\n\t\t\t\t{\n\t\t\t\t\tManager.editLandingPage(this.currentPage.landingId, this.currentPage.siteId);\n\t\t\t\t\tthis.hideActionsPopup();\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.showAddUrlPopup(this.currentPage);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\thidePage()\n\t\t{\n\t\t\tif(this.currentPage)\n\t\t\t{\n\t\t\t\tthis.$root.$app.hidePage(this.currentPage).then(() => {\n\t\t\t\t\tthis.openFirstPage();\n\t\t\t\t});\n\t\t\t\tthis.hideActionsPopup();\n\t\t\t}\n\t\t},\n\t\tshowAddUrlPopup(newPage)\n\t\t{\n\t\t\tif(!Type.isPlainObject(newPage))\n\t\t\t{\n\t\t\t\tnewPage = {};\n\t\t\t}\n\t\t\tManager.addCustomPage(newPage).then((pageId) =>\n\t\t\t{\n\t\t\t\tif(!this.isShowPreview)\n\t\t\t\t{\n\t\t\t\t\tthis.isShowPreview = false;\n\t\t\t\t}\n\t\t\t\tthis.$root.$app.fillPages().then(() => {\n\t\t\t\t\tif(pageId && (!Type.isPlainObject(newPage) || !newPage.id))\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.lastAddedPages.push(parseInt(pageId));\n\t\t\t\t\t}\n\t\t\t\t\tif(!pageId && newPage)\n\t\t\t\t\t{\n\t\t\t\t\t\tpageId = newPage.id;\n\t\t\t\t\t}\n\t\t\t\t\tif(pageId)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.pages.forEach((page) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif(parseInt(page.id) === parseInt(pageId))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.onPageClick(page);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tif(!this.isShowPayment)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.isShowPreview = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t\tthis.hideActionsPopup();\n\t\t},\n\t\tshowPaymentForm()\n\t\t{\n\t\t\tthis.isShowPayment = true;\n\t\t\tthis.isShowPreview = false;\n\t\t\tif(this.isOrderPublicUrlAvailable)\n\t\t\t{\n\t\t\t\tthis.setPageTitle(this.localize.SALESCENTER_LEFT_PAYMENT_ADD);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.setPageTitle(this.localize.SALESCENTER_DEFAULT_TITLE);\n\t\t\t}\n\t\t},\n\t\tshowOrdersList()\n\t\t{\n\t\t\tthis.hideActionsPopup();\n\t\t\tManager.showOrdersList({\n\t\t\t\townerId: this.$root.$app.ownerId,\n\t\t\t\townerTypeId: this.$root.$app.ownerTypeId,\n\t\t\t}).then(() =>\n\t\t\t{\n\t\t\t\tthis.refreshOrdersCount();\n\t\t\t});\n\t\t},\n\t\tshowOrderAdd()\n\t\t{\n\t\t\tthis.hideActionsPopup();\n\t\t\tManager.showOrderAdd({\n\t\t\t\townerId: this.$root.$app.ownerId,\n\t\t\t\townerTypeId: this.$root.$app.ownerTypeId,\n\t\t\t}).then(() =>\n\t\t\t{\n\t\t\t\tthis.refreshOrdersCount();\n\t\t\t});\n\t\t},\n\t\tshowCatalog()\n\t\t{\n\t\t\tthis.hideActionsPopup();\n\t\t\tManager.openSlider(`/saleshub/catalog/?sessionId=${this.$root.$app.sessionId}`);\n\t\t},\n\t\tonFormsClick()\n\t\t{\n\t\t\tthis.isFormsOpen = !this.isFormsOpen;\n\t\t\tthis.hideActionsPopup();\n\t\t},\n\t\topenControlPanel()\n\t\t{\n\t\t\tManager.openControlPanel();\n\t\t\tthis.hideActionsPopup();\n\t\t},\n\t\topenHelpDesk()\n\t\t{\n\t\t\tthis.hideActionsPopup();\n\t\t\tManager.openHowItWorks();\n\t\t},\n\t\tisPageSelected(page)\n\t\t{\n\t\t\treturn (this.currentPage && this.isShowPreview && this.currentPage.id === page.id);\n\t\t},\n\t\tsend(event, skipPublicMessage = 'n')\n\t\t{\n\t\t\tif(!this.isAllowedSubmitButton)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif(this.isShowPayment && !this.isShowStartInfo)\n\t\t\t{\n\t\t\t\tthis.$root.$app.sendPayment(event.target, skipPublicMessage);\n\t\t\t}\n\t\t\telse if(this.currentPage && this.currentPage.isActive)\n\t\t\t{\n\t\t\t\tthis.$root.$app.sendPage(this.currentPage.id);\n\t\t\t}\n\t\t},\n\t\tclose()\n\t\t{\n\t\t\tthis.$root.$app.closeApplication();\n\t\t},\n\t\tsetPageTitle(title = null)\n\t\t{\n\t\t\tif(!title)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif(this.$root.$nodes.title)\n\t\t\t{\n\t\t\t\tthis.$root.$nodes.title.innerText = title;\n\t\t\t}\n\t\t},\n\t\tonFrameError()\n\t\t{\n\t\t\tclearTimeout(this.frameCheckLongTimeout);\n\t\t\tif(this.showedPageIds.includes(this.currentPage.id))\n\t\t\t{\n\t\t\t\tthis.loadedPageIds.push(this.currentPage.id);\n\t\t\t}\n\t\t\tthis.errorPageIds.push(this.currentPage.id);\n\t\t},\n\t\tonFrameLoad(pageId)\n\t\t{\n\t\t\tclearTimeout(this.frameCheckLongTimeout);\n\t\t\tif(this.showedPageIds.includes(pageId))\n\t\t\t{\n\t\t\t\tthis.loadedPageIds.push(pageId);\n\t\t\t\tif(this.currentPage && this.currentPage.id === pageId)\n\t\t\t\t{\n\t\t\t\t\tif(this.frameCheckShortTimeout && !this.currentPage.landingId)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.onFrameError();\n\t\t\t\t\t}\n\t\t\t\t\telse if(this.errorPageIds.includes(this.currentPage.id))\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.errorPageIds = this.errorPageIds.filter((pageId) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn pageId !== this.currentPage.id;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(this.frameCheckShortTimeout && this.currentPage && this.currentPage.id === pageId && !this.currentPage.landingId)\n\t\t\t{\n\t\t\t\tthis.onFrameError();\n\t\t\t}\n\t\t},\n\t\tstartFrameCheckTimeout()\n\t\t{\n\t\t\t// this is a workaround for denied through X-Frame-Options sources\n\t\t\tif(this.frameCheckShortTimeout)\n\t\t\t{\n\t\t\t\tclearTimeout(this.frameCheckShortTimeout);\n\t\t\t\tthis.frameCheckShortTimeout = false;\n\t\t\t}\n\t\t\tthis.frameCheckShortTimeout = setTimeout(() =>\n\t\t\t{\n\t\t\t\tthis.frameCheckShortTimeout = false;\n\t\t\t}, 500);\n\n\t\t\t// to show error on long loading\n\t\t\tclearTimeout(this.frameCheckLongTimeout);\n\t\t\tthis.frameCheckLongTimeout = setTimeout(() =>\n\t\t\t{\n\t\t\t\tif(this.currentPage && this.showedPageIds.includes(this.currentPage.id) && !this.loadedPageIds.includes(this.currentPage.id))\n\t\t\t\t{\n\t\t\t\t\tthis.errorPageIds.push(this.currentPage.id);\n\t\t\t\t}\n\t\t\t}, 5000);\n\t\t},\n\t\tconnect()\n\t\t{\n\t\t\tManager.startConnection({\n\t\t\t\tcontext: this.$root.$app.context,\n\t\t\t}).then(() =>\n\t\t\t{\n\t\t\t\tManager.loadConfig().then((result) =>\n\t\t\t\t{\n\t\t\t\t\tif(result.isSiteExists)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$root.$app.isSiteExists = result.isSiteExists;\n\t\t\t\t\t\tthis.isSiteExists = result.isSiteExists;\n\t\t\t\t\t\tthis.$root.$app.fillPages().then(() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.isOrderPublicUrlExists = true;\n\t\t\t\t\t\t\tthis.$root.$app.isOrderPublicUrlExists = true;\n\t\t\t\t\t\t\tthis.isOrderPublicUrlAvailable = result.isOrderPublicUrlAvailable;\n\t\t\t\t\t\t\tthis.$root.$app.isOrderPublicUrlAvailable = result.isOrderPublicUrlAvailable;\n\t\t\t\t\t\t\tif(!this.isShowPayment)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.openFirstPage();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.showPaymentForm();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tcheckRecycle()\n\t\t{\n\t\t\tManager.openConnectedSite(true);\n\t\t},\n\t\topenConnectedSite()\n\t\t{\n\t\t\tManager.openConnectedSite();\n\t\t},\n\t\tgetFrameSource(page)\n\t\t{\n\t\t\tif(this.showedPageIds.includes(page.id))\n\t\t\t{\n\t\t\t\tif(page.landingId > 0)\n\t\t\t\t{\n\t\t\t\t\tif(page.isActive)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn (new Uri(page.url)).setQueryParam('theme', '').toString();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\treturn page.url;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\t\trefreshOrdersCount()\n\t\t{\n\t\t\tthis.$root.$app.getOrdersCount().then((result) =>\n\t\t\t{\n\t\t\t\tthis.ordersCount = result.answer.result || null;\n\t\t\t}).catch(() =>\n\t\t\t{\n\t\t\t\tthis.ordersCount = null;\n\t\t\t});\n\t\t},\n\t\trenderErrors()\n\t\t{\n\t\t\tif (this.isShowPayment && this.order.errors.length > 0)\n\t\t\t{\n\t\t\t\tlet errorMessages = this.order.errors.map((item) => item.message).join('<br>');\n\t\t\t\tlet params = {\n\t\t\t\t\tcolor: BX.UI.Alert.Color.DANGER,\n\t\t\t\t\ttextCenter: true,\n\t\t\t\t\ttext: BX.util.htmlspecialchars(errorMessages)\n\t\t\t\t};\n\t\t\t\tif (this.$refs.errorBlock.innerHTML.length === 0)\n\t\t\t\t{\n\t\t\t\t\tparams.animated = true;\n\t\t\t\t}\n\t\t\t\tlet alert = new BX.UI.Alert(params);\n\t\t\t\tthis.$refs.errorBlock.innerHTML = '';\n\t\t\t\tthis.$refs.errorBlock.appendChild(alert.getContainer());\n\t\t\t}\n\t\t\telse if (this.$refs.errorBlock)\n\t\t\t{\n\t\t\t\tthis.$refs.errorBlock.innerHTML = '';\n\t\t\t}\n\t\t},\n\t\teditMenuItem(event, page)\n\t\t{\n\t\t\tthis.editedPageId = page.id;\n\t\t\tsetTimeout(() =>\n\t\t\t{\n\t\t\t\tevent.target.parentNode.parentNode.querySelector('input').focus();\n\t\t\t}, 50);\n\t\t},\n\t\tsaveMenuItem(event)\n\t\t{\n\t\t\tconst pageId = this.editedPageId;\n\t\t\tconst name = event.target.value;\n\t\t\tlet oldName;\n\t\t\tthis.pages.forEach((page) =>\n\t\t\t{\n\t\t\t\tif(page.id === this.editedPageId)\n\t\t\t\t{\n\t\t\t\t\toldName = page.name\n\t\t\t\t}\n\t\t\t});\n\t\t\tif(pageId > 0 && oldName && name !== oldName && name.length > 0)\n\t\t\t{\n\t\t\t\tManager.addPage({\n\t\t\t\t\tid: pageId,\n\t\t\t\t\tname: name,\n\t\t\t\t\tanalyticsLabel: 'salescenterUpdatePageTitle',\n\t\t\t\t}).then(() =>\n\t\t\t\t{\n\t\t\t\t\tthis.$root.$app.fillPages().then(() => {\n\t\t\t\t\t\tif(this.editedPageId === this.currentPageId)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.setPageTitle(name);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.editedPageId = null;\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.editedPageId = null;\n\t\t\t}\n\t\t},\n\t\tcreateLoader()\n\t\t{\n\t\t\tconst loader = new Loader({size: 200});\n\t\t\tloader.show(this.$refs['previewLoader']);\n\t\t}\n\t},\n\n\tcomputed:\n\t{\n\t\tconfig: () => config,\n\t\tcurrentPage()\n\t\t{\n\t\t\tif(this.currentPageId > 0)\n\t\t\t{\n\t\t\t\tlet pages = this.application.pages.filter((page) =>\n\t\t\t\t{\n\t\t\t\t\treturn page.id === this.currentPageId;\n\t\t\t\t});\n\t\t\t\tif(pages.length > 0)\n\t\t\t\t{\n\t\t\t\t\treturn pages[0];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\n\t\tpagesSubmenuHeight()\n\t\t{\n\t\t\tif(this.isPagesOpen)\n\t\t\t{\n\t\t\t\treturn (this.application.pages.filter((page) =>\n\t\t\t\t{\n\t\t\t\t\treturn !page.isWebform;\n\t\t\t\t}).length * 39 + 30) + 'px';\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\treturn '0px';\n\t\t\t}\n\t\t},\n\n\t\tformsSubmenuHeight()\n\t\t{\n\t\t\tif(this.isFormsOpen)\n\t\t\t{\n\t\t\t\treturn (this.application.pages.filter((page) =>\n\t\t\t\t{\n\t\t\t\t\treturn page.isWebform;\n\t\t\t\t}).length * 39 + 30) + 'px';\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\treturn '0px';\n\t\t\t}\n\t\t},\n\n\t\tisFrameError()\n\t\t{\n\t\t\tif(this.isShowPreview && this.currentPage)\n\t\t\t{\n\t\t\t\tif(!this.currentPage.isActive)\n\t\t\t\t{\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\telse if(!this.currentPage.landingId && this.errorPageIds.includes(this.currentPage.id))\n\t\t\t\t{\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\n\t\tisShowLoader()\n\t\t{\n\t\t\treturn (\n\t\t\t\tthis.isShowPreview &&\n\t\t\t\tthis.currentPageId > 0 &&\n\t\t\t\tthis.showedPageIds.includes(this.currentPageId) &&\n\t\t\t\t!this.loadedPageIds.includes(this.currentPageId)\n\t\t\t);\n\t\t},\n\n\t\tisShowStartInfo()\n\t\t{\n\t\t\tlet res = false;\n\t\t\tif(this.isShowPreview)\n\t\t\t{\n\t\t\t\tres = (!this.pages || this.pages.length <= 0);\n\t\t\t}\n\t\t\telse if(this.isShowPayment)\n\t\t\t{\n\t\t\t\tres = !this.isOrderPublicUrlAvailable;\n\t\t\t}\n\n\t\t\treturn res;\n\t\t},\n\n\t\twrapperHeight()\n\t\t{\n\t\t\tif(this.isShowPreview || this.isShowPayment)\n\t\t\t{\n\t\t\t\tconst position = BX.pos(this.$root.$el);\n\t\t\t\tlet offset = position.top + 20;\n\t\t\t\tif(this.$root.$nodes.footer)\n\t\t\t\t{\n\t\t\t\t\toffset += BX.pos(this.$root.$nodes.footer).height;\n\t\t\t\t}\n\t\t\t\tconst buttonsPanel = this.$refs['buttonsPanel'];\n\t\t\t\tif(buttonsPanel)\n\t\t\t\t{\n\t\t\t\t\toffset += BX.pos(buttonsPanel).height;\n\t\t\t\t}\n\t\t\t\treturn 'calc(100vh - ' + offset + 'px)';\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\treturn 'auto';\n\t\t\t}\n\t\t},\n\n\t\tlastModified()\n\t\t{\n\t\t\tif(this.currentPage && this.currentPage.modifiedAgo)\n\t\t\t{\n\t\t\t\treturn this.localize.SALESCENTER_MODIFIED.replace('#AGO#', this.currentPage.modifiedAgo);\n\t\t\t}\n\n\t\t\treturn false;\n\t\t},\n\n\t\tlocalize()\n\t\t{\n\t\t\treturn Vue.getFilteredPhrases('SALESCENTER_');\n\t\t},\n\n\t\tpages()\n\t\t{\n\t\t\tthis.isOrderPublicUrlAvailable = this.$root.$app.isOrderPublicUrlAvailable;\n\t\t\treturn [...this.application.pages];\n\t\t},\n\n\t\tisAllowedSubmitButton()\n\t\t{\n\t\t\tif(this.$root.$app.disableSendButton)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif (this.isShowPreview && this.currentPage && !this.currentPage.isActive)\n\t\t\t{\n\t\t\t\treturn false\n\t\t\t}\n\t\t\tif (this.isShowPayment)\n\t\t\t{\n\t\t\t\treturn this.$store.getters['orderCreation/isAllowedSubmit'];\n\t\t\t}\n\n\t\t\treturn this.currentPage;\n\t\t},\n\n\t\tisOrderPageDeleted()\n\t\t{\n\t\t\treturn (this.$root.$app.isSiteExists && !this.isOrderPublicUrlExists);\n\t\t},\n\n\t\t...Vuex.mapState({\n\t\t\tapplication: state => state.application,\n\t\t\torder: state => state.orderCreation,\n\t\t})\n\t},\n\n\ttemplate: `\n\t\t<div class=\"salescenter-app-wrapper\" :style=\"{height: wrapperHeight}\">\n\t\t\t<div class=\"ui-sidepanel-sidebar salescenter-app-sidebar\" ref=\"sidebar\">\n\t\t\t\t<div class=\"ui-sidepanel-head\">\n\t\t\t\t\t<div class=\"ui-sidepanel-title\">{{localize.SALESCENTER_DEFAULT_TITLE}}</div>\n\t\t\t\t</div>\n\t\t\t\t<ul class=\"ui-sidepanel-menu\" ref=\"sidepanelMenu\">\n\t\t\t\t\t<li :class=\"{'salescenter-app-sidebar-menu-active': isPagesOpen}\" class=\"ui-sidepanel-menu-item\">\n\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link\" @click.stop.prevent=\"isPagesOpen = !isPagesOpen;\">\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">{{localize.SALESCENTER_LEFT_PAGES}}</div>\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-toggle-btn\">{{this.isPagesOpen ? this.localize.SALESCENTER_SUBMENU_CLOSE : this.localize.SALESCENTER_SUBMENU_OPEN}}</div>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t<ul class=\"ui-sidepanel-submenu\" :style=\"{height: pagesSubmenuHeight}\">\n\t\t\t\t\t\t\t<li v-for=\"page in pages\" v-if=\"!page.isWebform\" :key=\"page.id\"\n\t\t\t\t\t\t\t:class=\"{\n\t\t\t\t\t\t\t\t'ui-sidepanel-submenu-active': (currentPage && currentPage.id == page.id && isShowPreview),\n\t\t\t\t\t\t\t\t'ui-sidepanel-submenu-edit-mode': (editedPageId === page.id)\n\t\t\t\t\t\t\t}\" class=\"ui-sidepanel-submenu-item\">\n\t\t\t\t\t\t\t\t<a :title=\"page.name\" class=\"ui-sidepanel-submenu-link\" @click.stop=\"onPageClick(page)\">\n\t\t\t\t\t\t\t\t\t<input class=\"ui-sidepanel-input\" :value=\"page.name\" v-on:keyup.enter=\"saveMenuItem($event)\" @blur=\"saveMenuItem($event)\" />\n\t\t\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">{{page.name}}</div>\n\t\t\t\t\t\t\t\t\t<div v-if=\"lastAddedPages.includes(page.id)\" class=\"ui-sidepanel-badge-new\"></div>\n\t\t\t\t\t\t\t\t\t<div class=\"ui-sidepanel-edit-btn\"><span class=\"ui-sidepanel-edit-btn-icon\" @click=\"editMenuItem($event, page);\"></span></div>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li class=\"salescenter-app-helper-nav-item salescenter-app-menu-add-page\" @click.stop=\"showAddPageActionPopup($event)\">\n\t\t\t\t\t\t\t\t<span class=\"salescenter-app-helper-nav-item-text salescenter-app-helper-nav-item-add\">+</span><span class=\"salescenter-app-helper-nav-item-text\">{{localize.SALESCENTER_RIGHT_ACTION_ADD}}</span>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li v-if=\"this.$root.$app.isPaymentCreationAvailable\" :class=\"{ 'salescenter-app-sidebar-menu-active': this.isShowPayment}\" class=\"ui-sidepanel-menu-item\" @click=\"showPaymentForm\">\n\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link\">\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">{{localize.SALESCENTER_LEFT_PAYMENT_ADD}}</div>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li @click=\"showOrdersList\">\n\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link\">\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">{{localize.SALESCENTER_LEFT_ORDERS}}</div>\n\t\t\t\t\t\t\t<span class=\"ui-sidepanel-counter\" ref=\"ordersCounter\" v-show=\"ordersCount > 0\">{{ordersCount}}</span>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li @click=\"showOrderAdd\">\n\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link\">\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">{{localize.SALESCENTER_LEFT_ORDER_ADD}}</div>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li v-if=\"this.$root.$app.isCatalogAvailable\" @click=\"showCatalog\">\n\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link\">\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">{{localize.SALESCENTER_LEFT_CATALOG}}</div>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li :class=\"{'salescenter-app-sidebar-menu-active': isFormsOpen}\" class=\"ui-sidepanel-menu-item\">\n\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link\" @click.stop.prevent=\"onFormsClick();\">\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">{{localize.SALESCENTER_LEFT_FORMS_ALL}}</div>\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-toggle-btn\">{{this.isPagesOpen ? this.localize.SALESCENTER_SUBMENU_CLOSE : this.localize.SALESCENTER_SUBMENU_OPEN}}</div>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t<ul class=\"ui-sidepanel-submenu\" :style=\"{height: formsSubmenuHeight}\">\n\t\t\t\t\t\t\t<li v-for=\"page in pages\" v-if=\"page.isWebform\" :key=\"page.id\"\n\t\t\t\t\t\t\t :class=\"{\n\t\t\t\t\t\t\t\t'ui-sidepanel-submenu-active': (currentPage && currentPage.id == page.id && isShowPreview),\n\t\t\t\t\t\t\t\t'ui-sidepanel-submenu-edit-mode': (editedPageId === page.id)\n\t\t\t\t\t\t\t}\" class=\"ui-sidepanel-submenu-item\">\n\t\t\t\t\t\t\t\t<a :title=\"page.name\" class=\"ui-sidepanel-submenu-link\" @click.stop=\"onPageClick(page)\">\n\t\t\t\t\t\t\t\t\t<input class=\"ui-sidepanel-input\" :value=\"page.name\" v-on:keyup.enter=\"saveMenuItem($event)\" @blur=\"saveMenuItem($event)\" />\n\t\t\t\t\t\t\t\t\t<div v-if=\"lastAddedPages.includes(page.id)\" class=\"ui-sidepanel-badge-new\"></div>\n\t\t\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">{{page.name}}</div>\n\t\t\t\t\t\t\t\t\t<div class=\"ui-sidepanel-edit-btn\"><span class=\"ui-sidepanel-edit-btn-icon\" @click=\"editMenuItem($event, page);\"></span></div>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li class=\"salescenter-app-helper-nav-item salescenter-app-menu-add-page\" @click.stop=\"showAddPageActionPopup($event, true)\">\n\t\t\t\t\t\t\t\t<span class=\"salescenter-app-helper-nav-item-text salescenter-app-helper-nav-item-add\">+</span><span class=\"salescenter-app-helper-nav-item-text\">{{localize.SALESCENTER_RIGHT_ACTION_ADD}}</span>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t\t<div class=\"salescenter-app-helper-nav\" ref=\"sidepanelNav\">\n\t\t\t\t<a class=\"salescenter-app-helper-nav-item\" @click=\"openControlPanel\">\n\t\t\t\t\t<span class=\"salescenter-app-helper-nav-item-text\">{{localize.SALESCENTER_PAYMENT_TYPE_ADD}}</span>\n\t\t\t\t</a>\n\t\t\t\t<a class=\"salescenter-app-helper-nav-item\" @click=\"openHelpDesk\">\n\t\t\t\t\t<span class=\"salescenter-app-helper-nav-item-text\">{{localize.SALESCENTER_HOW}}</span>\n\t\t\t\t</a>\n\t\t\t</div> \n\t\t\t<div class=\"salescenter-app-left-side\" ref=\"leftSide\"></div>\n\t\t\t<div class=\"salescenter-app-right-side\">\n\t\t\t\t<div class=\"salescenter-app-page-header\" v-show=\"isShowPreview && !isShowStartInfo\">\n\t\t\t\t\t<div class=\"salescenter-btn-action ui-btn ui-btn-link ui-btn-dropdown ui-btn-xs\" @click=\"showActionsPopup($event)\">{{localize.SALESCENTER_RIGHT_ACTIONS_BUTTON}}</div>\n\t\t\t\t\t<div class=\"salescenter-btn-delimiter salescenter-btn-action\"></div>\n\t\t\t\t\t<div class=\"salescenter-btn-action ui-btn ui-btn-link ui-btn-xs ui-btn-icon-edit\" @click=\"editPage\">{{localize.SALESCENTER_RIGHT_ACTION_EDIT}}</div>\n\t\t\t\t</div>\n\t\t\t\t<template v-if=\"isShowStartInfo\">\n\t\t\t\t\t<div class=\"salescenter-app-page-content salescenter-app-start-wrapper\">\n\t\t\t\t\t\t<div class=\"ui-title-1 ui-text-center ui-color-medium\" style=\"margin-bottom: 20px;\">{{localize.SALESCENTER_INFO_TEXT_TOP}}</div>\n\t\t\t\t\t\t<div class=\"ui-hr ui-mv-25\"></div>\n\t\t\t\t\t\t<template v-if=\"this.isOrderPublicUrlExists\">\n\t\t\t\t\t\t\t<div class=\"salescenter-title-5 ui-title-5 ui-text-center ui-color-medium\">{{localize.SALESCENTER_INFO_TEXT_BOTTOM_PUBLIC}}</div>\n\t\t\t\t\t\t\t<div style=\"padding-top: 5px;\" class=\"ui-text-center\">\n\t\t\t\t\t\t\t\t<div class=\"ui-btn ui-btn-primary ui-btn-lg\" @click=\"openConnectedSite\">{{localize.SALESCENTER_INFO_PUBLIC}}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t<template v-else-if=\"isOrderPageDeleted\">\n\t\t\t\t\t\t\t<div class=\"salescenter-title-5 ui-title-5 ui-text-center ui-color-medium\">{{localize.SALESCENTER_INFO_ORDER_PAGE_DELETED}}</div>\n\t\t\t\t\t\t\t<div style=\"padding-top: 5px;\" class=\"ui-text-center\">\n\t\t\t\t\t\t\t\t<div class=\"ui-btn ui-btn-primary ui-btn-lg\" @click=\"checkRecycle\">{{localize.SALESCENTER_CHECK_RECYCLE}}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t\t<div class=\"salescenter-title-5 ui-title-5 ui-text-center ui-color-medium\">{{localize.SALESCENTER_INFO_TEXT_BOTTOM}}</div>\n\t\t\t\t\t\t\t<div style=\"padding-top: 5px;\" class=\"ui-text-center\">\n\t\t\t\t\t\t\t\t<div class=\"ui-btn ui-btn-primary ui-btn-lg\" @click=\"connect\">{{localize.SALESCENTER_INFO_CREATE}}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t\t<template v-else-if=\"isFrameError && isShowPreview\">\n\t\t\t\t\t<div class=\"salescenter-app-page-content salescenter-app-lost\">\n\t\t\t\t\t\t<div class=\"salescenter-app-lost-block ui-title-1 ui-text-center ui-color-medium\">{{localize.SALESCENTER_ERROR_TITLE}}</div>\n\t\t\t\t\t\t<div v-if=\"currentPage.isFrameDenied === true\" class=\"salescenter-app-lost-helper ui-color-medium\">{{localize.SALESCENTER_RIGHT_FRAME_DENIED}}</div>\n\t\t\t\t\t\t<div v-else-if=\"currentPage.isActive !== true\" class=\"salescenter-app-lost-helper salescenter-app-not-active ui-color-medium\">{{localize.SALESCENTER_RIGHT_NOT_ACTIVE}}</div>\n\t\t\t\t\t\t<div v-else class=\"salescenter-app-lost-helper ui-color-medium\">{{localize.SALESCENTER_ERROR_TEXT}}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t\t<div v-show=\"isShowPreview && !isShowStartInfo && !isFrameError\" class=\"salescenter-app-page-content\">\n\t\t\t\t\t<template v-for=\"page in pages\">\n\t\t\t\t\t\t<iframe class=\"salescenter-app-demo\" v-show=\"currentPage && currentPage.id == page.id\" :src=\"getFrameSource(page)\" frameborder=\"0\" @error=\"onFrameError(page.id)\" @load=\"onFrameLoad(page.id)\" :key=\"page.id\"></iframe>\n\t\t\t\t\t</template>\n\t\t\t\t\t<div class=\"salescenter-app-demo-overlay\" :class=\"{\n\t\t\t\t\t\t'salescenter-app-demo-overlay-loading': this.isShowLoader\n\t\t\t\t\t}\">\n\t\t\t\t\t\t<div v-show=\"isShowLoader\" ref=\"previewLoader\"></div>\n\t\t\t\t\t\t<div v-if=\"lastModified\" class=\"salescenter-app-demo-overlay-modification\">{{lastModified}}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t    <template v-if=\"this.$root.$app.isPaymentsLimitReached\">\n\t\t\t        <div ref=\"paymentsLimit\" v-show=\"isShowPayment && !isShowStartInfo\"></div>\n\t\t\t\t</template>\n\t\t\t\t<template v-else>\n\t\t\t        <component v-show=\"isShowPayment && !isShowStartInfo\" :is=\"config.templateAddPaymentName\"></component>\n\t\t        </template>\n\t\t\t</div>\n\t\t\t<div class=\"ui-button-panel-wrapper salescenter-button-panel\" ref=\"buttonsPanel\">\n\t\t\t\t<div class=\"ui-button-panel\">\n\t\t\t\t\t<button :class=\"{\n\t\t\t\t\t\t'ui-btn-disabled': !this.isAllowedSubmitButton\n\t\t\t\t\t}\" class=\"ui-btn ui-btn-md ui-btn-success\" @click=\"send($event)\">{{localize.SALESCENTER_SEND}}</button>\n\t\t\t\t\t<button class=\"ui-btn ui-btn-md ui-btn-link\" @click=\"close\">{{localize.SALESCENTER_CANCEL}}</button>\n\t\t\t\t\t<button v-if=\"isShowPayment && !isShowStartInfo && !this.$root.$app.isPaymentsLimitReached\" class=\"ui-btn ui-btn-md ui-btn-link btn-send-crm\" @click=\"send($event, 'y')\">{{localize.SALESCENTER_SAVE_ORDER}}</button>\n\t\t\t\t</div>\n\t\t\t\t<div v-if=\"this.order.errors.length > 0\" ref=\"errorBlock\"></div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n\n});","import {config} from \"./config\";\nimport {Vue} from \"ui.vue\";\n\nimport \"ui.dropdown\";\nimport \"ui.common\";\nimport \"ui.alerts\";\n\nVue.component(config.templateAddPaymentProductName,\n{\n\t/**\n\t * @emits 'changeBasketItem' {index: number, fields: object}\n\t * @emits 'refreshBasket' {timeout: number}\n\t * @emits 'removeItem' {index: number}\n\t */\n\n\tprops: ['basketItem', 'basketItemIndex', 'countItems', 'selectedProductIds'],\n\tdata()\n\t{\n\t\treturn {\n\t\t\ttimer: null,\n\t\t\tproductSelector: null,\n\t\t\tisNeedRebindSearch: false,\n\t\t};\n\t},\n\tcreated()\n\t{\n\t\tthis.currencyName = this.$root.$app.options.currencyName || null;\n\t\tthis.defaultMeasure = {\n\t\t\tname: '',\n\t\t\tid: null,\n\t\t};\n\t\tthis.measures = this.$root.$app.options.measures || [];\n\t\tif (BX.type.isArray(this.measures) && this.measures)\n\t\t{\n\t\t\tthis.measures.map((measure) => {\n\t\t\t\tif (measure['IS_DEFAULT'] === 'Y')\n\t\t\t\t{\n\t\t\t\t\tthis.defaultMeasure.name = measure.SYMBOL;\n\t\t\t\t\tthis.defaultMeasure.code = measure.CODE;\n\t\t\t\t\tthis.changeData({\n\t\t\t\t\t\tmeasureCode: this.defaultMeasure.code,\n\t\t\t\t\t\tmeasureName: this.defaultMeasure.name\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t},\n\tmounted()\n\t{\n\t\tthis.productSelector = new BX.UI.Dropdown(\n\t\t\t{\n\t\t\t\tsearchAction: \"salescenter.api.order.searchProduct\",\n\t\t\t\tsearchOptions: {\n\t\t\t\t\trestrictedSearchIds: this.selectedProductIds\n\t\t\t\t},\n\t\t\t\tenableCreation: true,\n\t\t\t\tsearchResultRenderer: null,\n\t\t\t\ttargetElement: this.$refs.searchProductLine,\n\t\t\t\titems: [{\n\t\t\t\t\ttitle: '',\n\t\t\t\t\tsubTitle: this.localize.SALESCENTER_PRODUCT_BEFORE_SEARCH_TITLE\n\t\t\t\t}],\n\t\t\t\tmessages:\n\t\t\t\t{\n\t\t\t\t\tcreationLegend: this.localize.SALESCENTER_PRODUCT_CREATE,\n\t\t\t\t\tnotFound: this.localize.SALESCENTER_PRODUCT_NOT_FOUND,\n\t\t\t\t},\n\t\t\t\tevents:\n\t\t\t\t{\n\t\t\t\t\tonSelect: this.selectCatalogItem.bind(this),\n\t\t\t\t\tonAdd: this.showCreationForm.bind(this),\n\t\t\t\t\tonReset: this.resetSearchForm(this)\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t},\n\tdirectives:\n\t{\n\t\t'bx-search-product':\n\t\t{\n\t\t\tinserted(element, binding)\n\t\t\t{\n\t\t\t\tif (binding.value.selector instanceof BX.UI.Dropdown)\n\t\t\t\t{\n\t\t\t\t\tconst restrictedSearchIds = binding.value.restrictedIds;\n\t\t\t\t\tbinding.value.selector.targetElement = element;\n\t\t\t\t\tif (BX.type.isArray(restrictedSearchIds))\n\t\t\t\t\t{\n\t\t\t\t\t\tbinding.value.selector.searchOptions = {restrictedSearchIds};\n\t\t\t\t\t\tbinding.value.selector.items = binding.value.selector.items.filter(\n\t\t\t\t\t\t\titem => !restrictedSearchIds.includes(item.id)\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tbinding.value.selector.init()\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\tmethods:\n\t{\n\t\ttoggleDiscount(value)\n\t\t{\n\t\t\tthis.changeData(\n\t\t\t\t{showDiscount: value}\n\t\t\t);\n\t\t},\n\t\tchangeData(fields)\n\t\t{\n\t\t\tthis.$emit('changeBasketItem', {\n\t\t\t\tindex: this.basketItemIndex,\n\t\t\t\tfields: fields\n\t\t\t});\n\t\t},\n\t\tisNeedRefreshAfterChanges()\n\t\t{\n\t\t\tif (this.isCreationMode)\n\t\t\t{\n\t\t\t\treturn this.basketItem.name.length > 0\n\t\t\t\t\t&& this.basketItem.quantity > 0\n\t\t\t\t\t&& this.basketItem.basePrice > 0\n\t\t\t}\n\n\t\t\treturn true;\n\t\t},\n\t\trefreshBasket()\n\t\t{\n\t\t\tif (this.isNeedRefreshAfterChanges())\n\t\t\t\tthis.$emit('refreshBasket');\n\t\t},\n\t\tdebouncedRefresh(delay)\n\t\t{\n\t\t\tif (this.timer)\n\t\t\t{\n\t\t\t\tclearTimeout(this.timer);\n\t\t\t}\n\n\t\t\tthis.timer = setTimeout(() => {\n\t\t\t\tthis.refreshBasket();\n\t\t\t\tthis.timer = null;\n\t\t\t}, delay);\n\t\t},\n\t\tchangeQuantity(event)\n\t\t{\n\t\t\tlet newQuantity = parseFloat(event.target.value);\n\t\t\tif (!newQuantity)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet fields = this.basketItem;\n\t\t\tfields.quantity = newQuantity;\n\t\t\tthis.changeData(fields);\n\n\t\t\tthis.debouncedRefresh(300);\n\t\t},\n\t\tchangeName(event)\n\t\t{\n\t\t\tlet newName = event.target.value;\n\t\t\tlet fields = this.basketItem;\n\t\t\tfields.name = newName;\n\t\t\tthis.changeData(fields);\n\t\t\tthis.refreshBasket();\n\t\t},\n\t\tchangeBasePrice(event)\n\t\t{\n\t\t\tlet newPrice = Number(event.target.value);\n\t\t\tif (newPrice < 0)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet fields = this.basketItem;\n\t\t\tfields.basePrice = newPrice;\n\t\t\tif (fields.module !== 'catalog')\n\t\t\t{\n\t\t\t\tfields.catalogPrice = newPrice;\n\t\t\t}\n\t\t\tfields.isCustomPrice = 'Y';\n\t\t\tthis.changeData(fields);\n\n\t\t\tthis.debouncedRefresh(300);\n\t\t},\n\t\tchangeDiscountType(event)\n\t\t{\n\t\t\tlet type = (event.target.value === 'currency') ? 'currency' : 'percent';\n\t\t\tlet fields = this.basketItem;\n\t\t\tfields.discountType = type;\n\t\t\tfields.isCustomPrice = 'Y';\n\t\t\tthis.changeData(fields);\n\n\t\t\tif (parseFloat(this.basketItem.discount) > 0)\n\t\t\t{\n\t\t\t\tthis.refreshBasket();\n\t\t\t}\n\t\t},\n\t\tchangeDiscount(event)\n\t\t{\n\t\t\tlet discountValue = parseFloat(event.target.value) || 0;\n\t\t\tif (discountValue === parseFloat(this.basketItem.discount))\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet fields = this.basketItem;\n\t\t\tfields.discount = discountValue;\n\t\t\tfields.isCustomPrice = 'Y';\n\t\t\tthis.changeData(fields);\n\n\t\t\tthis.debouncedRefresh(300);\n\t\t},\n\t\tchangeMeasureValue(event)\n\t\t{\n\t\t\tlet measureCode = parseInt(event.target.value);\n\t\t\tlet measureName = '';\n\t\t\tthis.measures.forEach ((measure) => {\n\t\t\t\tif (parseInt(measure.CODE) === measureCode)\n\t\t\t\t{\n\t\t\t\t\tmeasureName = measure.SYMBOL;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.changeData({\n\t\t\t\tmeasureCode: measureCode,\n\t\t\t\tmeasureName: measureName\n\t\t\t});\n\t\t},\n\t\tshowCreationForm()\n\t\t{\n\t\t\tif (!(this.productSelector instanceof BX.UI.Dropdown))\n\t\t\t\treturn true;\n\n\t\t\tconst value = this.productSelector.targetElement.value;\n\t\t\tthis.changeData({\n\t\t\t\tproductId: 0,\n\t\t\t\tquantity: 1,\n\t\t\t\tmodule: null,\n\t\t\t\tsort: this.basketItemIndex,\n\t\t\t\tisCreatedProduct: 'Y',\n\t\t\t\tname: value,\n\t\t\t\tencodedFields: null,\n\t\t\t\tisCustomPrice: 'Y',\n\t\t\t\tdiscountInfos: []\n\t\t\t});\n\n\t\t\tthis.productSelector.destroyPopupWindow();\n\t\t},\n\t\tresetSearchForm()\n\t\t{\n\t\t\tif (!(this.productSelector instanceof BX.UI.Dropdown))\n\t\t\t\treturn true;\n\n\t\t\tthis.productSelector.targetElement.value = '';\n\t\t\tthis.productSelector.items = [{\n\t\t\t\ttitle: '',\n\t\t\t\tsubTitle: this.localize.SALESCENTER_PRODUCT_BEFORE_SEARCH_TITLE\n\t\t\t}];\n\t\t\tthis.changeData({\n\t\t\t\tproductId: 0,\n\t\t\t\tname: '',\n\t\t\t\tencodedFields: null,\n\t\t\t\tquantity: 0,\n\t\t\t\tbasePrice: 0,\n\t\t\t\tformattedPrice: 0,\n\t\t\t\tcatalogPrice: 0,\n\t\t\t\tformattedCatalogPrice: null,\n\t\t\t\tdiscount: 0,\n\t\t\t\tdiscountInfos: [],\n\t\t\t\terrors:[],\n\t\t\t});\n\t\t\tthis.productSelector.destroyPopupWindow();\n\t\t},\n\t\thideCreationForm()\n\t\t{\n\t\t\tif (!(this.productSelector instanceof BX.UI.Dropdown))\n\t\t\t\treturn true;\n\n\t\t\tthis.changeData({\n\t\t\t\tisCreatedProduct: 'N',\n\t\t\t\tproductId: 0,\n\t\t\t\tname: '',\n\t\t\t\tencodedFields: null,\n\t\t\t\tquantity: 0,\n\t\t\t\tbasePrice: 0,\n\t\t\t\tformattedPrice: 0,\n\t\t\t\tcatalogPrice: 0,\n\t\t\t\tformattedCatalogPrice: null,\n\t\t\t\tdiscount: 0,\n\t\t\t\tdiscountInfos: [],\n\t\t\t\terrors:[],\n\t\t\t});\n\t\t\tthis.refreshBasket();\n\n\t\t\tthis.isNeedRebindSearch = true;\n\t\t},\n\t\tremoveItem()\n\t\t{\n\t\t\tthis.$emit('removeItem', {\n\t\t\t\tindex: this.basketItemIndex\n\t\t\t});\n\t\t},\n\t\tselectCatalogItem(sender, item)\n\t\t{\n\t\t\tif (!sender instanceof BX.UI.Dropdown)\n\t\t\t\treturn true;\n\n\t\t\tif (item.id === undefined || parseInt(item.id) <= 0)\n\t\t\t\treturn true;\n\n\t\t\tlet fields = {\n\t\t\t\tname: item.title,\n\t\t\t\tproductId: item.id,\n\t\t\t\tsort: this.basketItemIndex,\n\t\t\t\tmodule: 'catalog',\n\t\t\t\tquantity: this.basketItem.quantity > 0 ? this.basketItem.quantity : 1,\n\t\t\t};\n\n\t\t\tif (this.basketItemIndex.productId !== item.id)\n\t\t\t{\n\t\t\t\tfields.encodedFields = null;\n\t\t\t\tfields.discount = 0;\n\t\t\t\tfields.isCustomPrice = 'N';\n\t\t\t}\n\n\t\t\tBX.ajax.runAction(\n\t\t\t\t\"salescenter.api.order.getBaseProductPrice\",\n\t\t\t\t{ data: { productId: item.id } }\n\t\t\t).then((result) => {\n\t\t\t\tfields.basePrice = BX.prop.getNumber(result,\"data\", 0);\n\t\t\t\tfields.catalogPrice = BX.prop.getNumber(result,\"data\", 0);\n\t\t\t\tthis.changeData(fields);\n\t\t\t\tthis.$emit('refreshBasket', 0);\n\t\t\t});\n\t\t\tsender.destroyPopupWindow();\n\t\t},\n\t\topenDiscountEditor(e, url)\n\t\t{\n\t\t\tif(!(window.top.BX.SidePanel && window.top.BX.SidePanel.Instance))\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\twindow.top.BX.SidePanel.Instance.open (\n\t\t\t\tBX.util.add_url_param( url, { \"IFRAME\": \"Y\", \"IFRAME_TYPE\": \"SIDE_SLIDER\", \"publicSidePanel\": \"Y\" } ),\n\t\t\t\t{ allowChangeHistory: false }\n\t\t\t);\n\n\t\t\te.preventDefault ? e.preventDefault() : (e.returnValue = false);\n\t\t},\n\t},\n\tcomputed:\n\t{\n\t\tlocalize()\n\t\t{\n\t\t\treturn Vue.getFilteredPhrases('SALESCENTER_PRODUCT_');\n\t\t},\n\t\tshowDiscount()\n\t\t{\n\t\t\treturn this.basketItem.showDiscount === 'Y';\n\t\t},\n\t\tshowCatalogPrice()\n\t\t{\n\t\t\treturn this.basketItem.discount > 0 || parseFloat(this.basketItem.basePrice) !== parseFloat(this.basketItem.catalogPrice);\n\t\t},\n\t\tgetMeasureName()\n\t\t{\n\t\t\treturn this.basketItem.measureName || this.defaultMeasure.name;\n\t\t},\n\t\tgetMeasureCode()\n\t\t{\n\t\t\treturn this.basketItem.measureCode || this.defaultMeasure.code;\n\t\t},\n\t\trestrictedSearchIds()\n\t\t{\n\t\t\tlet restrictedSearchIds = this.selectedProductIds;\n\t\t\tif (this.basketItem.module === 'catalog')\n\t\t\t{\n\t\t\t\trestrictedSearchIds = restrictedSearchIds.filter(id => id !== this.basketItem.productId);\n\t\t\t}\n\n\t\t\treturn restrictedSearchIds;\n\t\t},\n\t\tisCreationMode()\n\t\t{\n\t\t\treturn this.basketItem.isCreatedProduct === 'Y';\n\t\t},\n\t\tisNotEnoughQuantity()\n\t\t{\n\t\t\treturn this.basketItem.errors.includes('SALE_BASKET_AVAILABLE_QUANTITY');\n\t\t},\n\t\thasPriceError()\n\t\t{\n\t\t\treturn this.basketItem.errors.includes('SALE_BASKET_ITEM_WRONG_PRICE');\n\t\t},\n\t\tisEmptyProductName()\n\t\t{\n\t\t\treturn (this.basketItem.name.length === 0);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div>\n\t\t\t<div class=\"salescenter-app-counter\" v-if=\"countItems > 1\">{{basketItemIndex + 1}}</div>\n\t\t\t<div class=\"salescenter-app-remove\" @click=\"removeItem\" v-if=\"countItems > 1\"></div>\n\t\t\t<div class=\"salescenter-app-form-container\" v-if=\"!isCreationMode\">\n\n\t\t\t\t<div class=\"salescenter-app-form-row\">\n\t\t\t\t\t<div class=\"salescenter-app-form-col\" style=\"flex:8\">\n\n\t\t\t\t\t\t<label class=\"salescenter-app-ctl-label-text ui-ctl-label-text\">{{localize.SALESCENTER_PRODUCT_TITLE}}</label>\n\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-md ui-ctl-w100 ui-ctl-after-icon\">\n\t\t\t\t\t\t\t<button class=\"ui-ctl-after ui-ctl-icon-clear\" @click=\"resetSearchForm\" v-if=\"basketItem.name.length > 0\"> </button>\n\t\t\t\t\t\t\t<input \n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tref=\"searchProductLine\" \n\t\t\t\t\t\t\t\tclass=\"ui-ctl-element ui-ctl-textbox salescenter-app-product-search\" \n\t\t\t\t\t\t\t\t:value=\"basketItem.name\"\n\t\t\t\t\t\t\t\tv-bx-search-product=\"{selector: productSelector, restrictedIds: restrictedSearchIds}\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"salescenter-app-form-col\" style=\"flex:4\">\n\n\t\t\t\t\t\t<label class=\"salescenter-app-ctl-label-text ui-ctl-label-text\">\n\t\t\t\t\t\t\t{{localize.SALESCENTER_PRODUCT_QUANTITY.replace('#MEASURE_NAME#', getMeasureName)}}\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-md ui-ctl-w100\" :class=\"isNotEnoughQuantity ? 'ui-ctl-danger' : ''\">\n\t\t\t\t\t\t\t<input type=\"text\" class=\"ui-ctl-element ui-ctl-textbox\" :value=\"basketItem.quantity\" @input=\"changeQuantity\" @change=\"refreshBasket\">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"salescenter-form-error\" v-if=\"isNotEnoughQuantity\">{{localize.SALESCENTER_PRODUCT_IS_NOT_AVAILABLE}}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"salescenter-app-form-row\">\n\t\t\t\t\t<div class=\"salescenter-app-form-col\" style=\"flex:12\">\n\n\t\t\t\t\t\t<label class=\"salescenter-app-ctl-label-text ui-ctl-label-text\">\n\t\t\t\t\t\t\t{{localize.SALESCENTER_PRODUCT_PRICE.replace('#CURRENCY_NAME#', currencyName)}}\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-md ui-ctl-w100\" :class=\"hasPriceError ? 'ui-ctl-danger' : ''\">\n\t\t\t\t\t\t\t<input type=\"text\" class=\"ui-ctl-element ui-ctl-textbox\"  :value=\"basketItem.basePrice\"  @input=\"changeBasePrice\" @change=\"refreshBasket\">\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t</div>\n\t\t\t<div class=\"salescenter-app-form-container\" v-else>\n\t\t\t\t<div class=\"salescenter-app-form-row\">\n\t\t\t\t\t<div class=\"salescenter-app-form-col\" style=\"flex:8\">\n\n\t\t\t\t\t\t<label class=\"salescenter-app-ctl-label-text ui-ctl-label-text\">{{localize.SALESCENTER_PRODUCT_TITLE}}</label>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-md ui-ctl-w100 ui-ctl-after-icon\" :class=\"{'ui-ctl-danger' : this.isEmptyProductName}\">\n\t\t\t\t\t\t\t\t<button class=\"ui-ctl-after ui-ctl-icon-clear\" @click=\"hideCreationForm\"> </button>\n\t\t\t\t\t\t\t\t<input type=\"text\" class=\"ui-ctl-element ui-ctl-textbox\" @change=\"changeName\" :value=\"basketItem.name\">\n\t\t\t\t\t\t\t\t<div class=\"salescenter-ctl-label\">\n\t\t\t\t\t\t\t\t\t<div class=\"salescenter-ctl-label-text\">{{localize.SALESCENTER_PRODUCT_NEW_LABEL}}</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"salescenter-app-form-col\" style=\"flex:4\">\n\n\t\t\t\t\t\t<label class=\"salescenter-app-ctl-label-text ui-ctl-label-text\">\n\t\t\t\t\t\t\t{{localize.SALESCENTER_PRODUCT_QUANTITY.replace('#MEASURE_NAME#', getMeasureName)}}\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-md ui-ctl-w100\">\n\t\t\t\t\t\t\t<input type=\"text\" class=\"ui-ctl-element ui-ctl-textbox\" :value=\"basketItem.quantity\" @input=\"changeQuantity\" @change=\"refreshBasket\">\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"salescenter-app-form-row\" style=\"align-items: flex-end\">\n\t\t\t\t\t<div class=\"salescenter-app-form-col\" style=\"flex:8\">\n\n\t\t\t\t\t\t<label class=\"salescenter-app-ctl-label-text ui-ctl-label-text\">\n\t\t\t\t\t\t\t{{localize.SALESCENTER_PRODUCT_PRICE.replace('#CURRENCY_NAME#', currencyName)}}\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-md ui-ctl-w100\">\n\t\t\t\t\t\t\t<input type=\"text\" class=\"ui-ctl-element ui-ctl-textbox\" :value=\"basketItem.basePrice\"  @input=\"changeBasePrice\" @change=\"refreshBasket\">\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"salescenter-app-form-col\" style=\"flex:4;\">\n\t\t\t\t\t\t<label class=\"salescenter-app-ctl-label-text ui-ctl-label-text\">{{localize.SALESCENTER_PRODUCT_MEASURE}}</label>\n\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-after-icon ui-ctl-w100 ui-ctl-dropdown\">\n\t\t\t\t\t\t\t<div class=\"ui-ctl-after ui-ctl-icon-angle\"></div>\n\t\t\t\t\t\t\t<select class=\"ui-ctl-element\" @change=\"changeMeasureValue\" :value=\"getMeasureCode\">\n\t\t\t\t\t\t\t\t<option v-for=\"item in measures\" :value=\"item.CODE\">{{item.SYMBOL}}</option>\n\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t</div>\n\t\t\t<div class=\"salescenter-app-sale-container\" v-if=\"showDiscount\">\n\n\t\t\t\t<div class=\"salescenter-app-form-collapse-container\">\n\n\t\t\t\t\t<div class=\"salescenter-app-form-col\">\n\t\t\t\t\t\t<label class=\"salescenter-app-ctl-label-text ui-ctl-label-text\">{{localize.SALESCENTER_PRODUCT_DISCOUNT_TITLE}}</label>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"salescenter-app-form-row\">\n\n\t\t\t\t\t\t<div class=\"salescenter-app-form-col\" style=\"flex:1;max-width: 112px;\">\n\t\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-md ui-ctl-w100\">\n\t\t\t\t\t\t\t\t<input type=\"text\" class=\"ui-ctl-element ui-ctl-textbox\" :value=\"basketItem.discount\" @input=\"changeDiscount\"  @change=\"refreshBasket\">\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class=\"salescenter-app-form-col\" style=\"flex:1.5;max-width: 84px;\">\n\t\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-after-icon ui-ctl-w100 ui-ctl-dropdown\">\n\t\t\t\t\t\t\t\t<div class=\"ui-ctl-after ui-ctl-icon-angle\"></div>\n\t\t\t\t\t\t\t\t<select class=\"ui-ctl-element\" :value=\"basketItem.discountType\" @change=\"changeDiscountType\">\n\t\t\t\t\t\t\t\t\t<option value=\"percent\">%</option>\n\t\t\t\t\t\t\t\t\t<option value=\"currency\">{{currencyName}}</option>\n\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class=\"salescenter-app-form-col\" style=\"flex:auto; text-align: right;\">\n\t\t\t\t\t\t\t<div style=\"margin-bottom: 0;\" class=\"ui-text-4 ui-color-light\">{{localize.SALESCENTER_PRODUCT_DISCOUNT_PRICE_TITLE}}</div>\n\t\t\t\t\t\t\t<div class=\"salescenter-app-form-text\">\n\t\t\t\t\t\t\t\t<span class=\"salescenter-app-text-line-through\" v-if=\"showCatalogPrice\" v-html=\"basketItem.formattedCatalogPrice\"></span>\n\t\t\t\t\t\t\t\t<span v-html=\"basketItem.formattedPrice\"></span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t</div>\n\t\t\t\t\t\n\t\t\t\t\t<div class=\"salescenter-app-form-row\" style=\"margin-bottom: 0;\">\n\t\t\t\t\t\t<div class=\"salescenter-app-form-col\" v-for=\"discount in basketItem.discountInfos\"\">\n\t\t\t\t\t\t\t<span class=\"ui-text-4 ui-color-light\"> {{discount.name}} \n\t\t\t\t\t\t\t<a :href=\"discount.editPageUrl\" @click=\"openDiscountEditor(event, discount.editPageUrl)\">\n\t\t\t\t\t\t\t\t{{localize.SALESCENTER_PRODUCT_DISCOUNT_EDIT_PAGE_URL_TITLE}}\n\t\t\t\t\t\t\t</a></span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"salescenter-app-collapse-link-container\">\n\t\t\t\t\t<a class=\"salescenter-app-collapse-link\" @click=\"toggleDiscount('N')\">{{localize.SALESCENTER_PRODUCT_HIDE_DISCOUNT}}</a>\n\t\t\t\t</div>\n\n\t\t\t</div>\n\t\t\t<div class=\"salescenter-app-sale-container\" v-else>\n\t\t\t\t<div class=\"salescenter-app-collapse-link-container\">\n\t\t\t\t\t<a class=\"salescenter-app-collapse-link\"  @click=\"toggleDiscount('Y')\">{{localize.SALESCENTER_PRODUCT_ADD_DISCOUNT}}</a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n});","import {config} from './config';\n\nimport {Vue} from 'ui.vue';\nimport {Vuex} from 'ui.vue.vuex';\nimport {Manager} from 'salescenter.manager';\nimport \"currency\";\n\nimport \"./bx-salescenter-app-add-payment-product\";\n\nVue.component(config.templateAddPaymentName,\n{\n\tdata()\n\t{\n\t\treturn {};\n\t},\n\tcreated()\n\t{\n\t\tconst defaultCurrency = this.$root.$app.options.currencyCode || '';\n\t\tif (this.$root.$app.options.showPaySystemSettingBanner)\n\t\t{\n\t\t\tthis.$store.commit('orderCreation/showBanner');\n\t\t}\n\t\tconst defaultPrice = BX.Currency.currencyFormat(0, defaultCurrency, true);\n\t\tthis.$store.dispatch('orderCreation/setCurrency', defaultCurrency);\n\t\tthis.$store.commit('orderCreation/setTotal', {\n\t\t\tsum: defaultPrice,\n\t\t\tdiscount: defaultPrice,\n\t\t\tresult: defaultPrice,\n\t\t});\n\t\tthis.addBasketItemForm();\n\t},\n\tmethods:\n\t{\n\t\trefreshBasket(timeout = 300)\n\t\t{\n\t\t\tthis.$store.dispatch('orderCreation/refreshBasket', {timeout});\n\t\t},\n\t\tchangeBasketItem(item)\n\t\t{\n\t\t\tthis.$store.dispatch('orderCreation/changeBasketItem', {\n\t\t\t\tindex: item.index,\n\t\t\t\tfields: item.fields\n\t\t\t});\n\t\t},\n\t\tremoveItem(item)\n\t\t{\n\t\t\tthis.$store.dispatch('orderCreation/removeItem', {\n\t\t\t\tindex: item.index\n\t\t\t});\n\t\t\tthis.refreshBasket();\n\t\t},\n\t\taddBasketItemForm()\n\t\t{\n\t\t\tthis.$store.commit('orderCreation/addBasketItem');\n\t\t},\n\t\thideBanner()\n\t\t{\n\t\t\tthis.$store.commit('orderCreation/hideBanner');\n\t\t\tconst userOptionName = this.$root.$app.options.orderCreationOption || false;\n\t\t\tconst userOptionKeyName = this.$root.$app.options.paySystemBannerOptionName || false;\n\t\t\tif (userOptionName && userOptionKeyName)\n\t\t\t{\n\t\t\t\tBX.userOptions.save('salescenter', userOptionName, userOptionKeyName, 'Y');\n\t\t\t}\n\t\t},\n\t\topenControlPanel()\n\t\t{\n\t\t\tManager.openControlPanel();\n\t\t},\n\t},\n\tcomputed:\n\t{\n\t\tlocalize()\n\t\t{\n\t\t\treturn Vue.getFilteredPhrases('SALESCENTER_');\n\t\t},\n\n\t\ttotal()\n\t\t{\n\t\t\treturn this.order.total;\n\t\t},\n\n\t\tcountItems()\n\t\t{\n\t\t\treturn this.order.basket.length;\n\t\t},\n\n\t\tisShowedBanner()\n\t\t{\n\t\t\treturn this.order.showPaySystemSettingBanner;\n\t\t},\n\n\t\t...Vuex.mapState({\n\t\t\torder: state => state.orderCreation,\n\t\t})\n\t},\n\ttemplate: `\n\t<div class=\"salescenter-app-payment-side\">\n\t\t<div class=\"salescenter-app-page-content\">\n\t\t\t<div v-for=\"(item, index) in order.basket\" class=\"salescenter-app-form-wrapper\">\n\t\t\t\t<${config.templateAddPaymentProductName} \n\t\t\t\t\t:basketItem=\"item\" \n\t\t\t\t\t:basketItemIndex=\"index\"  \n\t\t\t\t\t:countItems=\"countItems\"\n\t\t\t\t\t:selectedProductIds=\"order.selectedProducts\"\n\t\t\t\t\t@changeBasketItem=\"changeBasketItem\" \n\t\t\t\t\t@removeItem=\"removeItem\" \n\t\t\t\t\t@refreshBasket=\"refreshBasket\" \n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div class=\"salescenter-app-add-item-container\">\n\t\t\t\t<a @click=\"addBasketItemForm\" class=\"salescenter-app-add-item-link\">{{localize.SALESCENTER_PRODUCT_ADD_PRODUCT}}</a>\n\t\t\t</div>\n\t\t\t<div class=\"salescenter-app-result-container\">\n\t\t\t\t<div class=\"salescenter-app-result-grid-row\">\n\t\t\t\t\t<div class=\"salescenter-app-result-grid-item\">{{localize.SALESCENTER_PRODUCT_TOTAL_SUM}}:</div>\n\t\t\t\t\t<div class=\"salescenter-app-result-grid-item\" :class=\"total.result !== total.sum ? 'salescenter-app-text-line-through' : ''\" v-html=\"total.sum\"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"salescenter-app-result-grid-row salescenter-app-result-grid-benefit\">\n\t\t\t\t\t<div class=\"salescenter-app-result-grid-item\">{{localize.SALESCENTER_PRODUCT_TOTAL_DISCOUNT}}:</div>\n\t\t\t\t\t<div class=\"salescenter-app-result-grid-item\" v-html=\"total.discount\"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"salescenter-app-result-grid-row salescenter-app-result-grid-total\">\n\t\t\t\t\t<div class=\"salescenter-app-result-grid-item\">{{localize.SALESCENTER_PRODUCT_TOTAL_RESULT}}:</div>\n\t\t\t\t\t<div class=\"salescenter-app-result-grid-item\" v-html=\"total.result\"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"salescenter-app-banner\"  v-if=\"isShowedBanner\">\n\t\t\t\t<div class=\"salescenter-app-banner-inner\">\n\t\t\t\t\t<div class=\"salescenter-app-banner-title\">{{localize.SALESCENTER_BANNER_TITLE}}</div>\n\t\t\t\t\t<div class=\"salescenter-app-banner-content\">\n\t\t\t\t\t\t<div class=\"salescenter-app-banner-text\">{{localize.SALESCENTER_BANNER_TEXT}}</div>\n\t\t\t\t\t\t<div class=\"salescenter-app-banner-btn-block\">\n\t\t\t\t\t\t\t<button class=\"ui-btn ui-btn-sm ui-btn-primary salescenter-app-banner-btn-connect\" @click=\"openControlPanel\">{{localize.SALESCENTER_BANNER_BTN_CONFIGURE}}</button>\n\t\t\t\t\t\t\t<button class=\"ui-btn ui-btn-sm ui-btn-link salescenter-app-banner-btn-hide\" @click=\"hideBanner\">{{localize.SALESCENTER_BANNER_BTN_HIDE}}</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"salescenter-app-banner-close\" @click=\"hideBanner\"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n`,\n});","import {Vue} from 'ui.vue';\nimport {VuexBuilder} from 'ui.vue.vuex';\nimport {rest as Rest} from 'rest.client';\nimport {Manager} from 'salescenter.manager';\nimport {Loader} from 'main.loader';\nimport {Type, Loc, ajax as Ajax, Event} from 'main.core';\nimport 'ui.notification';\n\nimport {ApplicationModel} from './models/application';\nimport {OrderCreationModel} from './models/ordercreation';\nimport {config} from \"./config\";\nimport './component';\nimport './component.css';\nimport './bx-salescenter-app-add-payment';\n\nexport class App\n{\n\tconstructor(options = {\n\t\tdialogId: null,\n\t\tsessionId: null,\n\t\torderAddPullTag: null,\n\t\tlandingPublicationPullTag: null,\n\t\tlandingUnPublicationPullTag: null,\n\t\tisFrame: true,\n\t\tisOrderPublicUrlAvailable: false,\n\t\tisCatalogAvailable: false,\n\t\tisOrderPublicUrlExists: false,\n\t})\n\t{\n\t\tthis.slider = BX.SidePanel.Instance.getTopSlider();\n\t\tthis.dialogId = options.dialogId;\n\t\tthis.sessionId = parseInt(options.sessionId);\n\t\tthis.orderAddPullTag = options.orderAddPullTag;\n\t\tthis.landingPublicationPullTag = options.landingPublicationPullTag;\n\t\tthis.landingUnPublicationPullTag = options.landingUnPublicationPullTag;\n\t\tthis.options = options;\n\t\tthis.isProgress = false;\n\t\tthis.fillPagesTimeout = false;\n\t\tthis.disableSendButton = false;\n\t\tthis.context = '';\n\t\tthis.fillPagesQueue = [];\n\t\tthis.ownerTypeId = '';\n\t\tthis.ownerId = '';\n\t\tif(Type.isBoolean(options.isFrame))\n\t\t{\n\t\t\tthis.isFrame = options.isFrame;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.isFrame = true;\n\t\t}\n\t\tif(Type.isBoolean(options.isOrderPublicUrlAvailable))\n\t\t{\n\t\t\tthis.isOrderPublicUrlAvailable = options.isOrderPublicUrlAvailable;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.isOrderPublicUrlAvailable = false;\n\t\t}\n\t\tif(Type.isBoolean(options.isOrderPublicUrlExists))\n\t\t{\n\t\t\tthis.isOrderPublicUrlExists = options.isOrderPublicUrlExists;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.isOrderPublicUrlExists = false;\n\t\t}\n\t\tif(Type.isBoolean(options.isCatalogAvailable))\n\t\t{\n\t\t\tthis.isCatalogAvailable = options.isCatalogAvailable;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.isCatalogAvailable = false;\n\t\t}\n\t\tif(Type.isBoolean(options.disableSendButton))\n\t\t{\n\t\t\tthis.disableSendButton = options.disableSendButton;\n\t\t}\n\t\tif(options.ownerTypeId)\n\t\t{\n\t\t\tthis.ownerTypeId = options.ownerTypeId;\n\t\t}\n\t\tif(options.ownerId)\n\t\t{\n\t\t\tthis.ownerId = options.ownerId;\n\t\t}\n\t\tif(Type.isString(options.context) && options.context.length > 0)\n\t\t{\n\t\t\tthis.context = options.context;\n\t\t}\n\t\telse if(this.sessionId && this.dialogId)\n\t\t{\n\t\t\tthis.context = 'imopenlines_app';\n\t\t}\n\t\tif(Type.isBoolean(options.isPaymentsLimitReached))\n\t\t{\n\t\t\tthis.isPaymentsLimitReached = options.isPaymentsLimitReached;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.isPaymentsLimitReached = false;\n\t\t}\n\n\t\tthis.isPaymentCreationAvailable = (\n\t\t\t(this.sessionId > 0 && this.dialogId.length > 0) || (this.ownerTypeId && this.ownerId)\n\t\t);\n\t\tthis.connector = Type.isString(options.connector) ? options.connector : '';\n\n\t\tEvent.ready(() =>\n\t\t{\n\t\t\tthis.pull = BX.PULL;\n\t\t\tthis.initPull();\n\t\t\tthis.isSiteExists = Manager.isSiteExists;\n\t\t});\n\n\t\tApp.initStore()\n\t\t\t.then((result) => this.initTemplate(result))\n\t\t\t.catch((error) => App.showError(error))\n\t\t;\n\t}\n\n\tstatic initStore()\n\t{\n\t\tconst builder = new VuexBuilder();\n\n\t\treturn builder.addModel(ApplicationModel.create())\n\t\t\t.addModel(OrderCreationModel.create())\n\t\t\t.useNamespace(true)\n\t\t\t.build();\n\t}\n\n\tinitPull()\n\t{\n\t\tif(this.pull)\n\t\t{\n\t\t\tif(Type.isString(this.orderAddPullTag))\n\t\t\t{\n\t\t\t\tthis.pull.subscribe({\n\t\t\t\t\tmoduleId: config.moduleId,\n\t\t\t\t\tcommand: this.orderAddPullTag,\n\t\t\t\t\tcallback: (params) =>\n\t\t\t\t\t{\n\t\t\t\t\t\tif(parseInt(params.sessionId) === this.sessionId && params.orderId > 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tManager.showOrdersListAfterCreate(params.orderId);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif(Type.isString(this.landingPublicationPullTag))\n\t\t\t{\n\t\t\t\tthis.pull.subscribe({\n\t\t\t\t\tmoduleId: config.moduleId,\n\t\t\t\t\tcommand: this.landingPublicationPullTag,\n\t\t\t\t\tcallback: (params) =>\n\t\t\t\t\t{\n\t\t\t\t\t\tif(parseInt(params.landingId) > 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.fillPages();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(params.hasOwnProperty('isOrderPublicUrlAvailable') && Type.isBoolean(params.isOrderPublicUrlAvailable))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.isOrderPublicUrlAvailable = params.isOrderPublicUrlAvailable;\n\t\t\t\t\t\t\tthis.isOrderPublicUrlExists = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif(Type.isString(this.landingUnPublicationPullTag))\n\t\t\t{\n\t\t\t\tthis.pull.subscribe({\n\t\t\t\t\tmoduleId: config.moduleId,\n\t\t\t\t\tcommand: this.landingUnPublicationPullTag,\n\t\t\t\t\tcallback: (params) =>\n\t\t\t\t\t{\n\t\t\t\t\t\tif(parseInt(params.landingId) > 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.fillPages();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(params.hasOwnProperty('isOrderPublicUrlAvailable') && Type.isBoolean(params.isOrderPublicUrlAvailable))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.isOrderPublicUrlAvailable = params.isOrderPublicUrlAvailable;\n\t\t\t\t\t\t\tthis.isOrderPublicUrlExists = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\tinitTemplate(result)\n\t{\n\t\treturn new Promise((resolve) =>\n\t\t{\n\t\t\tconst context = this;\n\t\t\tthis.store = result.store;\n\n\t\t\tthis.templateEngine = Vue.create({\n\t\t\t\tel: document.getElementById('salescenter-app-root'),\n\t\t\t\ttemplate: `<${config.templateName}/>`,\n\t\t\t\tstore: this.store,\n\t\t\t\tcreated()\n\t\t\t\t{\n\t\t\t\t\tthis.$app = context;\n\t\t\t\t\tthis.$nodes = {\n\t\t\t\t\t\tfooter: document.getElementById('footer'),\n\t\t\t\t\t\tleftPanel: document.getElementById('left-panel'),\n\t\t\t\t\t\ttitle: document.getElementById('pagetitle'),\n\t\t\t\t\t\tpaymentsLimit: document.getElementById('salescenter-payment-limit-container'),\n\t\t\t\t\t};\n\t\t\t\t},\n\t\t\t\tmounted()\n\t\t\t\t{\n\t\t\t\t\tresolve();\n\t\t\t\t},\n\t\t\t});\n\t\t});\n\t}\n\n\tcloseApplication()\n\t{\n\t\tif(this.slider)\n\t\t{\n\t\t\tthis.slider.close();\n\t\t}\n\t}\n\n\tfillPages()\n\t{\n\t\treturn new Promise((resolve) =>\n\t\t{\n\t\t\tif(this.isProgress)\n\t\t\t{\n\t\t\t\tthis.fillPagesQueue.push(resolve);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif(this.fillPagesTimeout)\n\t\t\t\t{\n\t\t\t\t\tclearTimeout(this.fillPagesTimeout);\n\t\t\t\t}\n\t\t\t\tthis.fillPagesTimeout = setTimeout(() =>\n\t\t\t\t{\n\t\t\t\t\tthis.startProgress();\n\t\t\t\t\tRest.callMethod('salescenter.page.list', {}).then((result) => {\n\t\t\t\t\t\tthis.store.commit('application/setPages', {pages: result.answer.result.pages});\n\t\t\t\t\t\tthis.stopProgress();\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t\tthis.fillPagesQueue.forEach((item) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\titem();\n\t\t\t\t\t\t});\n\t\t\t\t\t\tthis.fillPagesQueue = [];\n\t\t\t\t\t});\n\t\t\t\t}, 100);\n\t\t\t}\n\t\t});\n\t}\n\n\tstatic showError(error)\n\t{\n\t\tconsole.error(error);\n\t}\n\n\tgetLoader()\n\t{\n\t\tif(!this.loader)\n\t\t{\n\t\t\tthis.loader = new Loader({size: 200});\n\t\t}\n\n\t\treturn this.loader;\n\t}\n\n\tshowLoader()\n\t{\n\t\tif(this.templateEngine)\n\t\t{\n\t\t\tthis.getLoader().show(this.templateEngine.$el);\n\t\t}\n\t}\n\n\thideLoader()\n\t{\n\t\tthis.getLoader().hide();\n\t}\n\n\tstartProgress(buttonEvent = null)\n\t{\n\t\tthis.isProgress = true;\n\t\tthis.showLoader();\n\t\tif (Type.isDomNode(buttonEvent))\n\t\t{\n\t\t\tbuttonEvent.classList.add('ui-btn-wait');\n\t\t}\n\t}\n\n\tstopProgress(buttonEvent = null)\n\t{\n\t\tthis.isProgress = false;\n\t\tthis.hideLoader();\n\t\tif (Type.isDomNode(buttonEvent))\n\t\t{\n\t\t\tbuttonEvent.classList.remove('ui-btn-wait');\n\t\t}\n\t}\n\n\thidePage(page)\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tlet promise;\n\t\t\tif(page.landingId > 0)\n\t\t\t{\n\t\t\t\tpromise = Manager.hidePage(page);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tpromise = Manager.deleteUrl(page);\n\t\t\t}\n\t\t\tpromise.then(() =>\n\t\t\t{\n\t\t\t\tthis.store.commit('application/removePage', {page});\n\t\t\t\tresolve();\n\t\t\t}).catch((result) =>\n\t\t\t{\n\t\t\t\tApp.showError(result.answer.error_description);\n\t\t\t\treject(result.answer.error_description);\n\t\t\t});\n\t\t});\n\t}\n\n\tsendPage(pageId)\n\t{\n\t\tif(this.isProgress)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tif(this.disableSendButton)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tconst pages = this.store.getters['application/getPages']();\n\t\tlet page;\n\t\tfor(let index in pages)\n\t\t{\n\t\t\tif(pages.hasOwnProperty(index) && pages[index].id === pageId)\n\t\t\t{\n\t\t\t\tpage = pages[index];\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tlet source = 'other';\n\t\tif(page.landingId > 0)\n\t\t{\n\t\t\tif(parseInt(page.siteId) === parseInt(Manager.connectedSiteId))\n\t\t\t{\n\t\t\t\tsource = 'landing_store_chat';\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tsource = 'landing_other';\n\t\t\t}\n\t\t}\n\t\tif(!this.dialogId)\n\t\t{\n\t\t\tthis.slider.data.set('action', 'sendPage');\n\t\t\tthis.slider.data.set('page', page);\n\t\t\tthis.slider.data.set('pageId', pageId);\n\t\t\tif(this.context === 'sms')\n\t\t\t{\n\t\t\t\tthis.startProgress();\n\t\t\t\tBX.Salescenter.Manager.addAnalyticAction({\n\t\t\t\t\tanalyticsLabel: 'salescenterSendSms',\n\t\t\t\t\tcontext: this.context,\n\t\t\t\t\tsource: source,\n\t\t\t\t\ttype: page.isWebform ? 'form' : 'info',\n\t\t\t\t\tcode: page.code,\n\t\t\t\t}).then(() =>\n\t\t\t\t{\n\t\t\t\t\tthis.stopProgress();\n\t\t\t\t\tthis.closeApplication();\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.closeApplication();\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\tthis.startProgress();\n\n\t\tAjax.runAction('salescenter.page.send', {\n\t\t\tanalyticsLabel: 'salescenterSendChat',\n\t\t\tgetParameters: {\n\t\t\t\tdialogId: this.dialogId,\n\t\t\t\tcontext: this.context,\n\t\t\t\tsource: source,\n\t\t\t\ttype: page.isWebform ? 'form' : 'info',\n\t\t\t\tconnector: this.connector,\n\t\t\t\tcode: page.code,\n\t\t\t},\n\t\t\tdata: {\n\t\t\t\tid: pageId,\n\t\t\t\toptions: {\n\t\t\t\t\tdialogId: this.dialogId,\n\t\t\t\t\tsessionId: this.sessionId,\n\t\t\t\t},\n\t\t\t}\n\t\t}).then(() =>\n\t\t{\n\t\t\tthis.stopProgress();\n\t\t\tthis.closeApplication();\n\t\t}).catch((result) =>\n\t\t{\n\t\t\tApp.showError(result.errors.pop().message);\n\t\t\tthis.stopProgress();\n\t\t});\n\t}\n\n\tsendPayment(buttonEvent, skipPublicMessage = 'n')\n\t{\n\t\tif(!this.isPaymentCreationAvailable)\n\t\t{\n\t\t\tthis.closeApplication();\n\t\t\treturn null;\n\t\t}\n\t\tconst basket = this.store.getters['orderCreation/getBasket']();\n\t\tif (!this.store.getters['orderCreation/isAllowedSubmit'] || this.isProgress)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tthis.startProgress(buttonEvent);\n\n\t\tthis.store.dispatch('orderCreation/refreshBasket', {\n\t\t\ttimeout: 0,\n\t\t\tonsuccess: () => {\n\t\t\t\tBX.ajax.runAction('salescenter.order.createPayment', {\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tbasketItems: basket,\n\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\tdialogId: this.dialogId,\n\t\t\t\t\t\t\tsessionId: this.sessionId,\n\t\t\t\t\t\t\townerTypeId: this.ownerTypeId,\n\t\t\t\t\t\t\townerId: this.ownerId,\n\t\t\t\t\t\t\tskipPublicMessage,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tanalyticsLabel: 'salescenterCreatePayment',\n\t\t\t\t\tgetParameters: {\n\t\t\t\t\t\tdialogId: this.dialogId,\n\t\t\t\t\t\tcontext: this.context,\n\t\t\t\t\t\tconnector: this.connector,\n\t\t\t\t\t\tskipPublicMessage: skipPublicMessage,\n\t\t\t\t\t}\n\t\t\t\t}).then((result) =>\n\t\t\t\t{\n\t\t\t\t\tthis.store.dispatch('orderCreation/resetBasket');\n\t\t\t\t\tthis.stopProgress(buttonEvent);\n\t\t\t\t\tif(skipPublicMessage === 'y')\n\t\t\t\t\t{\n\t\t\t\t\t\tlet notify = {\n\t\t\t\t\t\t\tcontent: Loc.getMessage('SALESCENTER_ORDER_CREATE_NOTIFICATION').replace('#ORDER_ID#', result.data.order.number),\n\t\t\t\t\t\t};\n\t\t\t\t\t\tnotify.actions = [{\n\t\t\t\t\t\t\ttitle: Loc.getMessage('SALESCENTER_VIEW'),\n\t\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\t\tclick() {\n\t\t\t\t\t\t\t\t\tManager.showOrderAdd(result.data.order.id);\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t}];\n\t\t\t\t\t\tBX.UI.Notification.Center.notify(notify);\n\t\t\t\t\t\tManager.showOrdersList({\n\t\t\t\t\t\t\torderId: result.data.order.id,\n\t\t\t\t\t\t\townerId: this.ownerId,\n\t\t\t\t\t\t\townerTypeId: this.ownerTypeId,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.slider.data.set('action', 'sendPayment');\n\t\t\t\t\t\tthis.slider.data.set('order', result.data.order);\n\t\t\t\t\t\tthis.closeApplication();\n\t\t\t\t\t}\n\t\t\t\t}).catch((error) =>\n\t\t\t\t{\n\t\t\t\t\tthis.stopProgress(buttonEvent);\n\t\t\t\t\tApp.showError(error);\n\t\t\t\t});\n\t\t\t},\n\t\t\tonfailure: () => {\n\t\t\t\tthis.stopProgress(buttonEvent);\n\t\t\t}\n\t\t});\n\t}\n\n\tgetOrdersCount()\n\t{\n\t\tif(this.sessionId > 0)\n\t\t{\n\t\t\treturn Rest.callMethod('salescenter.order.getActiveOrdersCount', {\n\t\t\t\tsessionId: this.sessionId\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn new Promise((resolve, reject) => {});\n\t\t}\n\t}\n}"],"names":["ApplicationModel","pages","getPages","state","setPages","payload","saveState","removePage","page","filter","id","landingId","addPage","push","VuexBuilderModel","OrderCreationModel","currency","processingId","showPaySystemSettingBanner","selectedProducts","basket","errors","total","sum","discount","result","refreshBasket","commit","dispatch","timeout","updateTimer","clearTimeout","setTimeout","currentProcessingId","Math","random","BX","ajax","runAction","data","basketItems","then","prop","getObject","get","onsuccess","catch","onfailure","processRefreshRequest","type","isArray","forEach","basketItem","index","sort","fields","isObject","recalculate","productCost","totalDiscount","resultSum","item","i","name","currentPrice","basePrice","discountValue","discountType","quantity","catalogPrice","formattedPrice","Currency","currencyFormat","formattedCatalogPrice","min","resetBasket","removeItem","length","changeBasketItem","setCurrency","getBasket","isAllowedSubmit","module","parseInt","productId","isNotEmptyString","parseFloat","addBasketItem","getBasketItemState","updateBasketItem","Vue","set","Object","assign","clearBasket","deleteBasketItem","splice","setSelectedProducts","map","filtered","setTotal","setErrors","clearErrors","setProcessingId","showBanner","hideBanner","code","showDiscount","discountInfos","measureCode","measureName","isCustomPrice","isCreatedProduct","encodedFields","config","freeze","databaseConfig","templateName","templateAddPaymentName","templateAddPaymentProductName","moduleId","component","isShowPreview","isShowPayment","pageTitle","currentPageId","actions","frameCheckShortTimeout","frameCheckLongTimeout","isPagesOpen","isFormsOpen","showedPageIds","loadedPageIds","errorPageIds","lastAddedPages","ordersCount","editedPageId","isOrderPublicUrlAvailable","created","updated","renderErrors","mounted","createPinner","createLoader","$root","$app","fillPages","refreshOrdersCount","openFirstPage","isOrderPublicUrlExists","isPaymentsLimitReached","paymentsLimitStartNode","$nodes","paymentsLimit","paymentsLimitNode","$refs","children","node","appendChild","movePanels","methods","sidepanel","leftPanel","remove","show","nav","buttonsPanel","$el","parentNode","UI","Pinner","fixBottom","isFrame","fullWidth","getActions","currentPage","text","localize","SALESCENTER_RIGHT_ACTION_COPY_URL","onclick","copyUrl","SALESCENTER_RIGHT_ACTION_HIDE","hidePage","SALESCENTER_RIGHT_ACTION_DELETE","SALESCENTER_RIGHT_ACTION_ADD","items","getAddPageActions","isWebform","SALESCENTER_RIGHT_ACTION_ADD_SITE_B24","addSite","SALESCENTER_RIGHT_ACTION_ADD_CUSTOM","showAddUrlPopup","firstWebformPage","pageToOpen","onPageClick","setPageTitle","hideActionsPopup","isFrameDenied","includes","startFrameCheckTimeout","onFrameError","showActionsPopup","target","PopupMenu","offsetLeft","offsetTop","closeByEsc","showAddPageActionPopup","menuId","offsetWidth","offsetHeight","angle","position","destroy","Manager","addSitePage","newPage","answer","event","url","editPage","editLandingPage","siteId","Type","isPlainObject","addCustomPage","pageId","showPaymentForm","SALESCENTER_LEFT_PAYMENT_ADD","SALESCENTER_DEFAULT_TITLE","showOrdersList","ownerId","ownerTypeId","showOrderAdd","showCatalog","openSlider","sessionId","onFormsClick","openControlPanel","openHelpDesk","openHowItWorks","isPageSelected","send","skipPublicMessage","isAllowedSubmitButton","isShowStartInfo","sendPayment","isActive","sendPage","close","closeApplication","title","innerText","onFrameLoad","connect","startConnection","context","loadConfig","isSiteExists","checkRecycle","openConnectedSite","getFrameSource","Uri","setQueryParam","toString","getOrdersCount","order","errorMessages","message","join","params","color","Alert","Color","DANGER","textCenter","util","htmlspecialchars","errorBlock","innerHTML","animated","alert","getContainer","editMenuItem","querySelector","focus","saveMenuItem","value","oldName","analyticsLabel","loader","Loader","size","computed","application","pagesSubmenuHeight","formsSubmenuHeight","isFrameError","isShowLoader","res","wrapperHeight","pos","offset","top","footer","height","lastModified","modifiedAgo","SALESCENTER_MODIFIED","replace","getFilteredPhrases","disableSendButton","$store","getters","isOrderPageDeleted","Vuex","mapState","orderCreation","template","props","timer","productSelector","isNeedRebindSearch","currencyName","options","defaultMeasure","measures","measure","SYMBOL","CODE","changeData","Dropdown","searchAction","searchOptions","restrictedSearchIds","selectedProductIds","enableCreation","searchResultRenderer","targetElement","searchProductLine","subTitle","SALESCENTER_PRODUCT_BEFORE_SEARCH_TITLE","messages","creationLegend","SALESCENTER_PRODUCT_CREATE","notFound","SALESCENTER_PRODUCT_NOT_FOUND","events","onSelect","selectCatalogItem","bind","onAdd","showCreationForm","onReset","resetSearchForm","directives","inserted","element","binding","selector","restrictedIds","init","toggleDiscount","$emit","basketItemIndex","isNeedRefreshAfterChanges","isCreationMode","debouncedRefresh","delay","changeQuantity","newQuantity","changeName","newName","changeBasePrice","newPrice","Number","changeDiscountType","changeDiscount","changeMeasureValue","destroyPopupWindow","hideCreationForm","sender","undefined","getNumber","openDiscountEditor","e","window","SidePanel","Instance","open","add_url_param","allowChangeHistory","preventDefault","returnValue","showCatalogPrice","getMeasureName","getMeasureCode","isNotEnoughQuantity","hasPriceError","isEmptyProductName","defaultCurrency","currencyCode","defaultPrice","addBasketItemForm","userOptionName","orderCreationOption","userOptionKeyName","paySystemBannerOptionName","userOptions","save","countItems","isShowedBanner","App","dialogId","orderAddPullTag","landingPublicationPullTag","landingUnPublicationPullTag","isCatalogAvailable","slider","getTopSlider","isProgress","fillPagesTimeout","fillPagesQueue","isBoolean","isString","isPaymentCreationAvailable","connector","Event","ready","pull","PULL","initPull","initStore","initTemplate","error","showError","subscribe","command","callback","orderId","showOrdersListAfterCreate","hasOwnProperty","Promise","resolve","store","templateEngine","create","el","document","getElementById","startProgress","Rest","callMethod","stopProgress","getLoader","hide","buttonEvent","showLoader","isDomNode","classList","add","hideLoader","reject","promise","deleteUrl","error_description","source","connectedSiteId","Salescenter","addAnalyticAction","Ajax","getParameters","pop","notify","content","Loc","getMessage","number","click","Notification","Center","builder","VuexBuilder","addModel","useNamespace","build","console"],"mappings":"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"}