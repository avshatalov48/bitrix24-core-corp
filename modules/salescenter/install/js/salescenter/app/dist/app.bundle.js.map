{"version":3,"file":"app.bundle.js","sources":["../src/models/application.js","../src/models/ordercreation.js","../src/models/document-selector.js","../src/const/context-dictionary.js","../src/components/templates-type-mixin.js","../src/components/stage-blocks/tile-collection/tile-collection-mixins.js","../src/components/stage-blocks/tile-collection/uninstalled.js","../src/components/stage-blocks/tile-collection/installed.js","../src/components/stage-blocks/stage-mixin.js","../src/components/stage-blocks/cashbox.js","../src/const/mode-dictionary.js","../src/product.js","../src/components/stage-blocks/product.js","../src/components/delivery-selector.js","../src/components/shipment-view.js","../src/components/stage-blocks/delivery-vuex.js","../src/components/stage-blocks/paysystem.js","../src/components/stage-blocks/chat-message.js","../src/components/stage-blocks/automation.js","../src/components/deal-receiving-payment/stage-blocks/send.js","../src/components/stage-blocks/timeline.js","../src/components/stage-blocks/document-selector.js","../src/components/chat-receiving-payment/stage-blocks-list.js","../src/component-mixin.js","../src/start.js","../src/no-payment-systems.js","../src/chat.js","../src/components/stage-blocks/sms-message.js","../src/components/deal-receiving-payment/stage-blocks-list.js","../src/components/crm-entity-create-payment/stage-blocks-list.js","../src/components/deal-creating-shipment/stage-blocks/send.js","../src/components/deal-creating-shipment/stage-blocks-list.js","../src/deal.js","../src/app.js"],"sourcesContent":["import {VuexBuilderModel} from 'ui.vue.vuex';\n\nexport class ApplicationModel extends VuexBuilderModel\n{\n\t/**\n\t * @inheritDoc\n\t */\n\tgetName()\n\t{\n\t\treturn 'application';\n\t}\n\n\tgetState()\n\t{\n\t\treturn {\n\t\t\tpages: [],\n\t\t}\n\t}\n\n\tgetGetters()\n\t{\n\t\treturn {\n\t\t\tgetPages: (state) => () =>\n\t\t\t{\n\t\t\t\treturn state.pages;\n\t\t\t},\n\t\t}\n\t}\n\n\tgetMutations()\n\t{\n\t\treturn {\n\t\t\tsetPages: (state, payload) =>\n\t\t\t{\n\t\t\t\tif(typeof payload.pages === 'object')\n\t\t\t\t{\n\t\t\t\t\tstate.pages = payload.pages        ;\n\t\t\t\t\tthis.saveState(state);\n\t\t\t\t}\n\t\t\t},\n\t\t\tremovePage: (state, payload) =>\n\t\t\t{\n\t\t\t\tif(typeof payload.page === 'object')\n\t\t\t\t{\n\t\t\t\t\tstate.pages = state.pages.filter((page) => {\n\t\t\t\t\t\treturn !(\n\t\t\t\t\t\t\t(payload.page.id && payload.page.id > 0 && page.id === payload.page.id) ||\n\t\t\t\t\t\t\t(payload.page.landingId && payload.page.landingId > 0 && page.landingId === payload.page.landingId)\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\t\t\tthis.saveState(state);\n\t\t\t\t}\n\t\t\t},\n\t\t\taddPage: (state, payload) =>\n\t\t\t{\n\t\t\t\tif(typeof payload.page === 'object')\n\t\t\t\t{\n\t\t\t\t\tstate.pages.push(payload.page);\n\t\t\t\t\tthis.saveState(state);\n\t\t\t\t}\n\t\t\t},\n\t\t}\n\t}\n}","import {VuexBuilderModel} from 'ui.vue.vuex';\n\nexport class OrderCreationModel extends VuexBuilderModel\n{\n\t/**\n\t * @inheritDoc\n\t */\n\tgetName()\n\t{\n\t\treturn 'orderCreation';\n\t}\n\n\tgetState()\n\t{\n\t\treturn {\n\t\t\tcurrency: '',\n\t\t\tprocessingId: null,\n\t\t\tbasket: [],\n\t\t\tbasketVersion: 0,\n\t\t\tpropertyValues: [],\n\t\t\tdeliveryExtraServicesValues: [],\n\t\t\texpectedDelivery: null,\n\t\t\tdeliveryResponsibleId: null,\n\t\t\tpersonTypeId: null,\n\t\t\tdeliveryId: null,\n\t\t\tdelivery: null,\n\t\t\tisEnabledSubmit: false,\n\t\t\tisCompilationMode: false,\n\t\t\terrors: [],\n\t\t\ttotal: {\n\t\t\t\tsum: null,\n\t\t\t\tdiscount: null,\n\t\t\t\tresult: null,\n\t\t\t},\n\t\t\t/**\n\t\t\t * ID of selected pay systems available for order payment\n\t\t\t */\n\t\t\tavailablePaySystemsIds: [],\n\t\t}\n\t}\n\n\tgetActions()\n\t{\n\t\treturn {\n\t\t\tresetBasket ({ commit })\n\t\t\t{\n\t\t\t\tcommit('clearBasket');\n\t\t\t},\n\t\t\tsetCurrency: ({ commit }, payload) =>\n\t\t\t{\n\t\t\t\tconst currency = payload || '';\n\t\t\t\tcommit('setCurrency', currency);\n\t\t\t},\n\t\t\tsetDeliveryId: ({ commit }, payload) =>\n\t\t\t{\n\t\t\t\tcommit('setDeliveryId', payload);\n\t\t\t},\n\t\t\tsetDelivery: ({ commit }, payload) =>\n\t\t\t{\n\t\t\t\tcommit('setDelivery', payload);\n\t\t\t},\n\t\t\tsetPropertyValues: ({ commit }, payload) =>\n\t\t\t{\n\t\t\t\tcommit('setPropertyValues', payload);\n\t\t\t},\n\t\t\tsetDeliveryExtraServicesValues: ({ commit }, payload) =>\n\t\t\t{\n\t\t\t\tcommit('setDeliveryExtraServicesValues', payload);\n\t\t\t},\n\t\t\tsetExpectedDelivery: ({ commit }, payload) =>\n\t\t\t{\n\t\t\t\tcommit('setExpectedDelivery', payload);\n\t\t\t},\n\t\t\tsetDeliveryResponsibleId: ({ commit }, payload) =>\n\t\t\t{\n\t\t\t\tcommit('setDeliveryResponsibleId', payload);\n\t\t\t},\n\t\t\tsetPersonTypeId: ({ commit }, payload) =>\n\t\t\t{\n\t\t\t\tcommit('setPersonTypeId', payload);\n\t\t\t},\n\t\t\tsetAvailablePaySystemsIds: ({ commit }, payload) =>\n\t\t\t{\n\t\t\t\tcommit('setAvailablePaySystemsIds', payload);\n\t\t\t},\n\t\t}\n\t}\n\n\tgetGetters()\n\t{\n\t\treturn {\n\t\t\tgetBasket: state => index =>\n\t\t\t{\n\t\t\t\treturn state.basket;\n\t\t\t},\n\t\t\tisAllowedSubmit: state =>\n\t\t\t{\n\t\t\t\treturn state.isEnabledSubmit;\n\t\t\t},\n\t\t\tisCompilationMode: state =>\n\t\t\t{\n\t\t\t\treturn state.isCompilationMode;\n\t\t\t},\n\t\t\tgetTotal: state =>\n\t\t\t{\n\t\t\t\treturn state.total;\n\t\t\t},\n\t\t\tgetDelivery: state =>\n\t\t\t{\n\t\t\t\treturn state.delivery;\n\t\t\t},\n\t\t\tgetDeliveryId: state =>\n\t\t\t{\n\t\t\t\treturn state.deliveryId;\n\t\t\t},\n\t\t\tgetPropertyValues: state =>\n\t\t\t{\n\t\t\t\treturn state.propertyValues;\n\t\t\t},\n\t\t\tgetDeliveryExtraServicesValues: state =>\n\t\t\t{\n\t\t\t\treturn state.deliveryExtraServicesValues;\n\t\t\t},\n\t\t\tgetExpectedDelivery: state =>\n\t\t\t{\n\t\t\t\treturn state.expectedDelivery;\n\t\t\t},\n\t\t\tgetDeliveryResponsibleId: state =>\n\t\t\t{\n\t\t\t\treturn state.deliveryResponsibleId;\n\t\t\t},\n\t\t\tgetPersonTypeId: state =>\n\t\t\t{\n\t\t\t\treturn state.personTypeId;\n\t\t\t},\n\t\t\tgetAvailablePaySystemsIds: state =>\n\t\t\t{\n\t\t\t\treturn state.availablePaySystemsIds;\n\t\t\t},\n\t\t}\n\t}\n\n\tgetMutations()\n\t{\n\t\treturn {\n\t\t\tsetBasket: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.basket = payload;\n\t\t\t},\n\t\t\tsetTotal: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.total = Object.assign(state.total, payload);\n\t\t\t},\n\t\t\tclearBasket: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.basket = [];\n\t\t\t\tstate.basketVersion++ ;\n\t\t\t},\n\t\t\tsetErrors: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.errors = payload;\n\t\t\t},\n\t\t\tsetDeliveryId: (state, deliveryId) =>\n\t\t\t{\n\t\t\t\tstate.deliveryId = deliveryId;\n\t\t\t},\n\t\t\tsetDelivery: (state, delivery) =>\n\t\t\t{\n\t\t\t\tstate.delivery = delivery;\n\t\t\t},\n\t\t\tsetPropertyValues: (state, propertyValues) =>\n\t\t\t{\n\t\t\t\tstate.propertyValues = propertyValues;\n\t\t\t},\n\t\t\tsetDeliveryExtraServicesValues: (state, deliveryExtraServicesValues) =>\n\t\t\t{\n\t\t\t\tstate.deliveryExtraServicesValues = deliveryExtraServicesValues;\n\t\t\t},\n\t\t\tsetExpectedDelivery: (state, expectedDelivery) =>\n\t\t\t{\n\t\t\t\tstate.expectedDelivery = expectedDelivery;\n\t\t\t},\n\t\t\tsetDeliveryResponsibleId: (state, deliveryResponsibleId) =>\n\t\t\t{\n\t\t\t\tstate.deliveryResponsibleId = deliveryResponsibleId;\n\t\t\t},\n\t\t\tclearErrors: (state) =>\n\t\t\t{\n\t\t\t\tstate.errors = [];\n\t\t\t},\n\t\t\tsetProcessingId: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.processingId = payload;\n\t\t\t},\n\t\t\tsetCurrency: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.currency = payload;\n\t\t\t},\n\t\t\tsetPersonTypeId: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.personTypeId = payload;\n\t\t\t},\n\t\t\tsetAvailablePaySystemsIds: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.availablePaySystemsIds = payload;\n\t\t\t},\n\t\t\tenableSubmit: (state) =>\n\t\t\t{\n\t\t\t\tstate.isEnabledSubmit = true;\n\t\t\t},\n\t\t\tdisableSubmit: (state) =>\n\t\t\t{\n\t\t\t\tstate.isEnabledSubmit = false;\n\t\t\t},\n\t\t\tenableCompilationMode: (state) =>\n\t\t\t{\n\t\t\t\tstate.isCompilationMode = true;\n\t\t\t},\n\t\t\tdisableCompilationMode: (state) =>\n\t\t\t{\n\t\t\t\tstate.isCompilationMode = false;\n\t\t\t},\n\t\t}\n\t}\n}\n","import {VuexBuilderModel} from 'ui.vue.vuex';\nimport {rest as Rest} from 'rest.client';\n\nexport class DocumentSelectorModel extends VuexBuilderModel\n{\n\t/**\n\t * @inheritDoc\n\t */\n\tgetName()\n\t{\n\t\treturn 'documentSelector';\n\t}\n\n\tgetActions()\n\t{\n\t\treturn {\n\t\t\taddDocument({commit, dispatch}, {document})\n\t\t\t{\n\t\t\t\tcommit('addDocument', {document});\n\t\t\t\tdispatch('setBoundDocumentId', {boundDocumentId: document.id});\n\t\t\t},\n\t\t\tsetBoundDocumentId({state, commit}, {boundDocumentId})\n\t\t\t{\n\t\t\t\tif (state.paymentId > 0)\n\t\t\t\t{\n\t\t\t\t\tRest.callMethod('crm.documentgenerator.document.bindToPayment', {\n\t\t\t\t\t\tid: boundDocumentId,\n\t\t\t\t\t\tpaymentId: state.paymentId,\n\t\t\t\t\t}).then(() => {\n\t\t\t\t\t\tcommit('setBoundDocumentId', {boundDocumentId});\n\t\t\t\t\t}).catch((response) => {\n\t\t\t\t\t\tconsole.error(response);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tcommit('setBoundDocumentId', {boundDocumentId});\n\t\t\t\t}\n\t\t\t},\n\t\t\tloadTemplates({state, commit})\n\t\t\t{\n\t\t\t\tif (Number(state.entityTypeId) <= 0 || Number(state.entityId) <= 0)\n\t\t\t\t{\n\t\t\t\t\tcommit('setTemplates', {templates: []});\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tRest.callMethod('crm.documentgenerator.template.listForItem', {\n\t\t\t\t\tentityTypeId: state.entityTypeId,\n\t\t\t\t\tentityId: state.entityId,\n\t\t\t\t}).then((response) => {\n\t\t\t\t\tif (response.answer.result.templates)\n\t\t\t\t\t{\n\t\t\t\t\t\tcommit('setTemplates', {templates: response.answer.result.templates});\n\t\t\t\t\t}\n\t\t\t\t}).catch((response) => {\n\t\t\t\t\tconsole.error(response);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\tgetState()\n\t{\n\t\treturn {\n\t\t\tentityTypeId: null,\n\t\t\tentityId: null,\n\t\t\tpaymentId: null,\n\t\t\tdocuments: [],\n\t\t\ttemplates: [],\n\t\t\tboundDocumentId: null,\n\t\t\tselectedTemplateId: null,\n\t\t}\n\t}\n\n\tgetGetters()\n\t{\n\t\treturn {\n\t\t\tgetTemplates: (state) => {\n\t\t\t\treturn state.templates;\n\t\t\t},\n\t\t\tgetDocuments: (state) => {\n\t\t\t\treturn state.documents;\n\t\t\t},\n\t\t\tgetBoundDocumentId: (state) => {\n\t\t\t\treturn state.boundDocumentId;\n\t\t\t},\n\t\t\tgetSelectedTemplateId: (state) => {\n\t\t\t\treturn state.selectedTemplateId;\n\t\t\t},\n\t\t}\n\t}\n\n\tgetMutations()\n\t{\n\t\treturn {\n\t\t\tfillState: (state, payload) => {\n\t\t\t\tstate.entityTypeId = payload.entityTypeId;\n\t\t\t\tstate.entityId = payload.entityId;\n\t\t\t\tstate.paymentId = payload.paymentId;\n\t\t\t\tstate.documents = payload.documents;\n\t\t\t\tstate.templates = payload.templates;\n\t\t\t\tstate.boundDocumentId = payload.boundDocumentId;\n\t\t\t\tstate.selectedTemplateId = payload.selectedTemplateId;\n\t\t\t},\n\t\t\tsetTemplates: (state, payload) => {\n\t\t\t\tif(typeof payload.templates === 'object')\n\t\t\t\t{\n\t\t\t\t\tstate.templates = payload.templates;\n\t\t\t\t}\n\t\t\t},\n\t\t\tsetBoundDocumentId: (state, payload) => {\n\t\t\t\tif(typeof payload.boundDocumentId === 'number')\n\t\t\t\t{\n\t\t\t\t\tstate.boundDocumentId = payload.boundDocumentId;\n\t\t\t\t}\n\t\t\t},\n\t\t\tsetSelectedTemplateId: (state, payload) => {\n\t\t\t\tif(typeof payload.selectedTemplateId === 'number')\n\t\t\t\t{\n\t\t\t\t\tstate.selectedTemplateId = payload.selectedTemplateId;\n\t\t\t\t\tstate.boundDocumentId = null;\n\t\t\t\t}\n\t\t\t},\n\t\t\taddDocument: (state, payload) => {\n\t\t\t\tif(typeof payload.document === 'object')\n\t\t\t\t{\n\t\t\t\t\tconst newDocument = payload.document;\n\t\t\t\t\tif (!newDocument.id)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tconst documents = state.documents || [];\n\t\t\t\t\tlet isUpdated = false;\n\t\t\t\t\tfor (const index in documents)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (documents[index].id === newDocument.id)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tdocuments[index] = newDocument;\n\t\t\t\t\t\t\tisUpdated = true;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (!isUpdated)\n\t\t\t\t\t{\n\t\t\t\t\t\tdocuments.unshift(newDocument);\n\t\t\t\t\t}\n\t\t\t\t\tstate.documents = documents;\n\t\t\t\t}\n\t\t\t},\n\t\t}\n\t}\n}\n","export const ContextDictionary = Object.freeze({\n\tdeal: 'deal',\n\tsmartInvoice: 'smart_invoice',\n\tchat: 'chat',\n\tsms: 'sms',\n\timOpenlines: 'imopenlines_app',\n});\n","let MixinTemplatesType = {\n\tdata() {\n\t\treturn {\n\t\t\teditable: true\n\t\t};\n\t},\n\tcreated(){\n\t\tthis.$root.$on(\"on-change-editable\", (value) => {\n\t\t\tthis.editable = value;\n\t\t});\n\t}\n}\n\nexport {\n\tMixinTemplatesType\n}","import\n{\n\tAppSlider,\n\tEventTypes\n} \t\t\t\t\t\t\t\tfrom 'salescenter.marketplace';\nimport\n{\n\tLabel,\n\tTileLabel,\n\tTileHintImg,\n\tTileLabelPlus,\n\tTileHintImgCaption,\n\tTileHintBackground,\n\tTileHintBackgroundCaption,\n} \t\t\t\t\t\t\t\tfrom 'salescenter.component.stage-block.tile';\nimport * as Hint \t\t\t\tfrom 'salescenter.component.stage-block.hint';\nimport * as Tile \t\t\t\tfrom 'salescenter.tile';\n\n\nlet TileCollectionMixins = {\n\n\tcomponents:\n\t\t{\n\t\t\t'label-block'\t\t\t\t\t\t\t:\tLabel,\n\t\t\t'tile-label-block'\t\t\t\t\t\t:\tTileLabel,\n\t\t\t'tile-hint-img-block'\t\t\t\t\t:\tTileHintImg,\n\t\t\t'tile-hint-plus-block'\t\t\t\t\t:\tTileLabelPlus,\n\t\t\t'tile-hint-img-caption-block'\t\t\t:\tTileHintImgCaption,\n\t\t\t'tile-hint-background-block'\t\t\t:\tTileHintBackground,\n\t\t\t'tile-hint-background-caption-block'\t:\tTileHintBackgroundCaption\n\t\t},\n\tmethods:\n\t\t{\n\t\t\tgetCollectionTile()\n\t\t\t{\n\t\t\t\treturn this.tiles;\n\t\t\t},\n\n\t\t\tgetCollectionTileByFilter(filter: Array)\n\t\t\t{\n\t\t\t\tlet map = new Map();\n\t\t\t\tlet collection = this.getCollectionTile();\n\n\t\t\t\tif(filter.hasOwnProperty('type') && filter.type.length > 0)\n\t\t\t\t{\n\t\t\t\t\tcollection\n\t\t\t\t\t\t.forEach((item, index) => {\n\n\t\t\t\t\t\t\tif(filter.type === item.getType())\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tmap.set(index, item);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tcollection\n\t\t\t\t\t\t.forEach((item, index) => map.set(index, item));\n\t\t\t\t}\n\n\t\t\t\treturn map;\n\t\t\t},\n\n\t\t\thasTileOfferFromCollection()\n\t\t\t{\n\t\t\t\tlet map = this.getCollectionTileByFilter({\n\t\t\t\t\ttype: Tile.Offer.type()\n\t\t\t\t});\n\n\t\t\t\treturn map.size > 0;\n\t\t\t},\n\n\t\t\thasTileMoreFromCollection()\n\t\t\t{\n\t\t\t\tlet map = this.getCollectionTileByFilter({\n\t\t\t\t\ttype: Tile.More.type()\n\t\t\t\t});\n\n\t\t\t\treturn map.size > 0;\n\t\t\t},\n\n\t\t\tgetTileOfferFromCollection()\n\t\t\t{\n\t\t\t\tlet map = this.getCollectionTileByFilter({\n\t\t\t\t\ttype: Tile.Offer.type()\n\t\t\t\t});\n\n\t\t\t\tlet result = {};\n\t\t\t\tmap.forEach((item, inx)=> { result = {index: inx, tile: item}; return false;});\n\t\t\t\treturn result;\n\t\t\t},\n\n\t\t\tgetTileMoreFromCollection()\n\t\t\t{\n\t\t\t\tlet map = this.getCollectionTileByFilter({\n\t\t\t\t\ttype: Tile.More.type()\n\t\t\t\t});\n\n\t\t\t\tlet result = {};\n\t\t\t\tmap.forEach((item, inx)=> { result = {index: inx, tile: item}; return false;});\n\t\t\t\treturn result;\n\t\t\t},\n\n\t\t\tgetTileByIndex(index)\n\t\t\t{\n\t\t\t\tlet  tile = null;\n\t\t\t\tthis.getCollectionTileByFilter({})\n\t\t\t\t\t.forEach((item, inx)=> {\n\n\t\t\t\t\t\tif(index === inx)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttile = item;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\treturn tile;\n\t\t\t},\n\n\t\t\topenSlider(inx)\n\t\t\t{\n\t\t\t\tlet slider = new AppSlider();\n\t\t\t\tlet tile = this.getTileByIndex(inx);\n\n\t\t\t\tslider.openAppLocal(tile, this.getOptionSlider);\n\t\t\t\tslider.subscribe(EventTypes.AppSliderSliderClose,\n\t\t\t\t\t(e) => this.$emit('on-tile-slider-close', {data: e.data})\n\t\t\t\t);\n\t\t\t},\n\n\t\t\tisControlTile(tile: Tile.Base)\n\t\t\t{\n\t\t\t\treturn [Tile.More.type(), Tile.Offer.type()].includes(tile.getType());\n\t\t\t},\n\n\t\t\tshowHint(inx, e)\n\t\t\t{\n\t\t\t\tlet event = e.data.event;\n\t\t\t\tlet tile = this.getTileByIndex(inx);\n\n\t\t\t\tthis.popup = new Hint.Popup();\n\t\t\t\tthis.popup.show(event.target, tile.info);\n\t\t\t},\n\n\t\t\thideHint()\n\t\t\t{\n\t\t\t\tif(this.popup)\n\t\t\t\t{\n\t\t\t\t\tthis.popup.hide();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\tcomputed:\n\t\t{\n\t\t\tgetOptionSlider()\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\twidth: 1000\n\t\t\t\t}\n\t\t\t}\n\t\t},\n};\nexport {\n\tTileCollectionMixins\n}","import {TileCollectionMixins} from \"./tile-collection-mixins\";\n\nconst Uninstalled = {\n\tprops: {\n\t\ttiles: {\n\t\t\ttype: Array,\n\t\t\trequired: true\n\t\t}\n\t},\n\tmixins:[TileCollectionMixins],\n\ttemplate: `\t\t\n\t\t<div>\n\t\t\t<template v-for=\"(tile, index) in tiles\">\n\t\t\t\t<tile-hint-background-caption-block\tv-if=\"tile.img.length > 0 && tile.showTitle\"\n\t\t\t\t\t:src=\"tile.img\"\n\t\t\t\t\t:name=\"tile.name\"\n\t\t\t\t\t:caption=\"tile.name\"\n\t\t\t\t\tv-on:tile-hint-bg-label-on-click=\"openSlider(index)\"\n\t\t\t\t\tv-on:tile-hint-bg-label-on-mouseenter=\"showHint(index, $event)\"\n\t\t\t\t\tv-on:tile-hint-bg-label-on-mouseleave=\"hideHint\"\n\t\t\t\t/>\n\t\t\t\t<tile-hint-background-block\t\tv-else-if=\"tile.img.length > 0\"\n\t\t\t\t\t:src=\"tile.img\"\n\t\t\t\t\t:name=\"tile.name\"\n\t\t\t\t\tv-on:tile-hint-bg-on-click=\"openSlider(index)\"\n\t\t\t\t\tv-on:tile-label-bg-hint-on-mouseenter=\"showHint(index, $event)\"\n\t\t\t\t\tv-on:tile-label-bg-hint-on-mouseleave=\"hideHint\"\n\t\t\t\t/>\n\t\t\t\t<tile-hint-plus-block\t\t\tv-else \n\t\t\t\t\t:name=\"tile.name\" \n\t\t\t\t\tv-on:tile-label-plus-on-click=\"openSlider(index)\"\n\t\t\t\t/> \n\t\t\t</template>\n\t\t</div>\n\t`\n};\nexport {\n\tUninstalled\n}","import {TileCollectionMixins} from \"./tile-collection-mixins\";\n\nconst Installed = {\n\tprops: {\n\t\ttiles: {\n\t\t\ttype: Array,\n\t\t\trequired: true\n\t\t}\n\t},\n\tmixins:[TileCollectionMixins],\n\n\ttemplate: `\t\n\t\t<div class=\"salescenter-app-payment-by-sms-item-container-payment\">\n\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container-payment-inline\">\n\t\t\t\t<tile-label-block class=\"salescenter-app-payment-by-sms-item-container-payment-item-text\"\n\t\t\t\t\tv-for=\"(tile, index) in tiles\"\n\t\t\t\t\tv-bind:key=\"index\"\n\t\t\t\t\tv-if=\"isControlTile(tile) === false\"\n\t\t\t\t\t:name=\"tile.name\" \n\t\t\t\t\tv-on:tile-label-on-click=\"openSlider(index)\"\n\t\t\t\t/>\n\t\t\t\t<br>\n\t\t\t\t<tile-label-block class=\"salescenter-app-payment-by-sms-item-container-payment-item-text-add\"\n\t\t\t\t\tv-if=\"hasTileOfferFromCollection() === true\"\n\t\t\t\t\t:name=\"getTileOfferFromCollection().tile.name\"\n\t\t\t\t\tv-on:tile-label-on-click=\"openSlider(getTileOfferFromCollection().index)\"\n\t\t\t\t/>\n\t\t\t\t<tile-label-block class=\"salescenter-app-payment-by-sms-item-container-payment-item-text-add\"\n\t\t\t\t\tv-if=\"hasTileMoreFromCollection() === true\"\n\t\t\t\t\t:name=\"getTileMoreFromCollection().tile.name\"\n\t\t\t\t\tv-on:tile-label-on-click=\"openSlider(getTileMoreFromCollection().index)\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t`\n};\nexport {\n\tInstalled\n}","import {StatusTypes as Status} from 'salescenter.component.stage-block';\n\nconst StageMixin = {\n\tcomputed:\n\t\t{\n\t\t\tstatusClassMixin()\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\t'salescenter-app-payment-by-sms-item'\t\t\t: true,\n\t\t\t\t\t'salescenter-app-payment-by-sms-item-current'\t: this.status === Status.current,\n\t\t\t\t\t'salescenter-app-payment-by-sms-item-disabled'\t: this.status === Status.disabled,\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tcontainerClassMixin()\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\t'salescenter-app-payment-by-sms-item-container'\t: true\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tcounterCheckedMixin()\n\t\t\t{\n\t\t\t\treturn this.status === Status.complete\n\t\t\t}\n\t\t},\n\t\tmethods:\n\t\t\t{\n\t\t\t\tonSliderClose(e)\n\t\t\t\t{\n\t\t\t\t\tthis.$emit('on-stage-tile-collection-slider-close', e);\n\t\t\t\t}\n\t\t\t}\n};\n\nexport {\n\tStageMixin\n}","import {Loc} \t\t\t\t\t\t\t\t\tfrom 'main.core';\nimport {Block} \t\t\tfrom 'salescenter.component.stage-block';\nimport {Uninstalled as TileUnInstalled} \t\tfrom \"./tile-collection/uninstalled\";\nimport {Installed as TileInstalled} \t\t\tfrom \"./tile-collection/installed\";\nimport {StageMixin} \t\t\t\t\t\t\tfrom \"./stage-mixin\";\n\nconst Cashbox = {\n\tprops: {\n\t\tstatus: {\n\t\t\ttype: String,\n\t\t\t\trequired: true\n\t\t},\n\t\tcounter: {\n\t\t\ttype: Number,\n\t\t\t\trequired: true\n\t\t},\n\t\ttiles: {\n\t\t\ttype: Array,\n\t\t\t\trequired: true\n\t\t},\n\t\tinstalled: {\n\t\t\ttype: Boolean,\n\t\t\t\trequired: true\n\t\t},\n\t\ttitleItems: {\n\t\t\ttype: Array\n\t\t},\n\t\tinitialCollapseState: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true\n\t\t},\n\t},\n\tmixins:[StageMixin],\n\tcomponents:\n\t{\n\t\t'stage-block-item'\t\t\t\t\t:\tBlock,\n\t\t'tile-collection-installed-block'\t:\tTileInstalled,\n\t\t'tile-collection-uninstalled-block'\t:\tTileUnInstalled\n\t},\n\tcomputed:\n\t{\n\t\tstatusClass()\n\t\t{\n\t\t\treturn {\n\t\t\t\t'salescenter-app-payment-by-sms-item-disabled-bg': this.installed === false\n\t\t\t}\n\t\t},\n\n\t\ttitle()\n\t\t{\n\t\t\treturn this.installed === true\n\t\t\t\t? Loc.getMessage('SALESCENTER_CASHBOX_SET_BLOCK_TITLE')\n\t\t\t\t: Loc.getMessage('SALESCENTER_CASHBOX_BLOCK_TITLE');\n\t\t},\n\t\tconfigForBlock()\n\t\t{\n\t\t\treturn {\n\t\t\t\tcounter: this.counter,\n\t\t\t\ttitleItems: this.installed ? this.titleItems : [],\n\t\t\t\tinstalled: this.installed,\n\t\t\t\tcollapsible: true,\n\t\t\t\tchecked: this.counterCheckedMixin,\n\t\t\t\tshowHint: !this.installed,\n\t\t\t\tinitialCollapseState: this.initialCollapseState,\n\t\t\t}\n\t\t}\n\t},\n\tmethods:\n\t{\n\t\tonItemHint(e)\n\t\t{\n\t\t\tBX.Salescenter.Manager.openHowToConfigCashBox(e);\n\t\t},\n\t\tsaveCollapsedOption(option)\n\t\t{\n\t\t\tthis.$emit('on-save-collapsed-option', 'cashbox', option);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<stage-block-item\n\t\t\t:class=\"[statusClassMixin, statusClass]\"\n\t\t\t:config=\"configForBlock\"\n\t\t\t@on-item-hint.stop.prevent=\"onItemHint\"\n\t\t\t@on-tile-slider-close=\"onSliderClose\"\n\t\t\t@on-adjust-collapsed=\"saveCollapsedOption\"\n\t\t>\n\t\t\t<template v-slot:block-title-title>{{title}}</template>\n\t\t\t<template v-slot:block-hint-title>${Loc.getMessage('SALESCENTER_CASHBOX_BLOCK_SETTINGS_TITLE')}</template>\n\t\t\t<template v-slot:block-container>\n\t\t\t\t<div :class=\"containerClassMixin\">\n\t\t\t\t\t<tile-collection-uninstalled-block \t:tiles=\"tiles\" v-if=\"!installed\"/>\n\t\t\t\t\t<tile-collection-installed-block :tiles=\"tiles\" v-on:on-tile-slider-close=\"onSliderClose\" v-else />\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</stage-block-item>\n\t`\n};\n\nexport\n{\n\tCashbox\n}","export const ModeDictionary = Object.freeze({\n\tpayment: 'payment',\n\tdelivery: 'delivery',\n\tpaymentDelivery: 'payment_delivery',\n});\n","import { FormMode, ProductForm } from 'catalog.product-form';\nimport 'currency';\nimport { MixinTemplatesType } from './components/templates-type-mixin';\nimport { Runtime, Type, Text } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport type { BaseEvent } from 'main.core.events';\nimport { Loc } from 'main.core';\nimport { ModeDictionary } from './const/mode-dictionary';\n\nexport default {\n\tmixins:[MixinTemplatesType],\n\tmounted()\n\t{\n\t\tconst editable = this.$root.$app.options.templateMode !== 'view';\n\t\tconst isCompilationMode = this.$root.$app.compilation !== null;\n\n\t\tthis.$root.$emit(\"on-change-editable\", editable);\n\t\tif (this.productForm)\n\t\t{\n\t\t\tthis.productForm.setEditable(editable, isCompilationMode);\n\t\t}\n\n\t\tif (this.productForm)\n\t\t{\n\t\t\tconst formWrapper = this.$root.$el.querySelector('.salescenter-app-form-wrapper');\n\t\t\tformWrapper.appendChild(this.productForm.layout());\n\t\t}\n\t},\n\tcreated()\n\t{\n\t\tthis.refreshId = null;\n\n\t\tconst defaultCurrency = this.$root.$app.options.currencyCode || '';\n\n\t\tthis.$store.dispatch('orderCreation/setCurrency', defaultCurrency);\n\t\tif (Type.isArray(this.$root.$app.options.basket))\n\t\t{\n\t\t\tconst fields = [];\n\t\t\tthis.$root.$app.options.basket.forEach((item) => {\n\t\t\t\tfields.push(item.fields);\n\t\t\t});\n\t\t\tthis.$store.commit('orderCreation/setBasket', fields);\n\t\t}\n\t\tif (Type.isObject(this.$root.$app.options.totals))\n\t\t{\n\t\t\tthis.$store.commit('orderCreation/setTotal', this.$root.$app.options.totals);\n\t\t}\n\n\t\tthis.productForm = new ProductForm(\n\t\t\t{\n\t\t\t\tcurrencySymbol: this.$root.$app.options.currencySymbol,\n\t\t\t\tcurrency: defaultCurrency,\n\t\t\t\tiblockId: this.$root.$app.options.catalogIblockId,\n\t\t\t\tbasePriceId: this.$root.$app.options.basePriceId,\n\t\t\t\tbasket: Type.isArray(this.$root.$app.options.basket) ? this.$root.$app.options.basket : [],\n\t\t\t\ttotals: this.$root.$app.options.totals,\n\t\t\t\ttaxList: this.$root.$app.options.vatList,\n\t\t\t\tmeasures: this.$root.$app.options.measures,\n\t\t\t\tshowDiscountBlock: this.$root.$app.options.showProductDiscounts,\n\t\t\t\tshowTaxBlock: this.$root.$app.options.showProductTaxes,\n\t\t\t\ttotalResultLabel: this.$root.$app.options.mode === 'delivery' ? Loc.getMessage('SALESCENTER_SHIPMENT_PRODUCT_BLOCK_TOTAL') : null,\n\t\t\t\turlBuilderContext: this.$root.$app.options.urlProductBuilderContext,\n\t\t\t\tisCatalogPriceEditEnabled: this.$root.$app.options.isCatalogPriceEditEnabled,\n\t\t\t\tisCatalogDiscountSetEnabled: this.$root.$app.options.isCatalogDiscountSetEnabled,\n\t\t\t\tfieldHints: this.$root.$app.options.fieldHints,\n\t\t\t\thideUnselectedProperties: (this.$root.$app.options.templateMode === 'view'),\n\t\t\t\tshowCompilationModeSwitcher: (\n\t\t\t\t\tthis.$root.$app.options.templateMode === 'create'\n\t\t\t\t\t&& this.$root.$app.options.showCompilationModeSwitcher === 'Y'\n\t\t\t\t\t&& this.$root.$app.options.mode === ModeDictionary.paymentDelivery\n\t\t\t\t),\n\t\t\t\tcompilationFormType: this.$root.$app.connector === 'facebook' && this.$root.$app.isAllowedFacebookRegion ? 'FACEBOOK' : 'REGULAR',\n\t\t\t\tfacebookFailProducts: this.$root.$app.compilation?.FAIL_PRODUCTS,\n\t\t\t\townerId: this.$root.$app.options.ownerId,\n\t\t\t\townerTypeId: this.$root.$app.options.ownerTypeId,\n\t\t\t\tdialogId: this.$root.$app.options.dialogId,\n\t\t\t\tsessionId: this.$root.$app.options.sessionId,\n\t\t\t\tisShortProductViewFormat: true,\n\t\t\t}\n\t\t);\n\n\t\tthis.checkProductErrors();\n\n\t\tEventEmitter.subscribe(\n\t\t\tthis.productForm,\n\t\t\t'ProductForm:onBasketChange',\n\t\t\tRuntime.debounce(this.onBasketChange, 500, this)\n\t\t);\n\n\t\tEventEmitter.subscribe(\n\t\t\tthis.productForm,\n\t\t\t'ProductForm:onErrorsChange',\n\t\t\tRuntime.debounce(this.checkProductErrors, 500, this)\n\t\t);\n\n\t\tEventEmitter.subscribe(\n\t\t\tthis.productForm,\n\t\t\t'ProductForm:onModeChange',\n\t\t\tthis.onProductFormModeChange\n\t\t);\n\n\t\tEventEmitter.subscribe(\n\t\t\tthis.productForm,\n\t\t\t'ProductForm:onCompilationCreated',\n\t\t\tthis.onProductFormCompilationCreated.bind(this),\n\t\t);\n\t},\n\tmethods: {\n\t\tonProductFormCompilationCreated(event: BaseEvent)\n\t\t{\n\t\t\tconst data = event.getData();\n\t\t\tthis.$root.$app.newCompilationId = data.compilationId;\n\t\t\tthis.$root.$app.ownerId = data.ownerId;\n\t\t\tthis.$root.$app.options.ownerId = data.ownerId;\n\t\t},\n\t\tonProductFormModeChange(event: BaseEvent)\n\t\t{\n\t\t\tconst mode = event.getData().mode;\n\t\t\tif (mode === FormMode.COMPILATION || mode === FormMode.COMPILATION_READ_ONLY)\n\t\t\t{\n\t\t\t\tthis.$store.commit('orderCreation/enableCompilationMode');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.$store.commit('orderCreation/disableCompilationMode');\n\t\t\t}\n\t\t\tthis.$emit('on-product-form-mode-change');\n\t\t},\n\t\tonBasketChange(event: BaseEvent)\n\t\t{\n\t\t\tlet processRefreshRequest = (data) => {\n\t\t\t\tif (this.productForm)\n\t\t\t\t{\n\t\t\t\t\tconst preparedBasket = [];\n\t\t\t\t\tdata.basket.forEach((item) => {\n\t\t\t\t\t\tif (!Type.isStringFilled(item.innerId))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tpreparedBasket.push({\n\t\t\t\t\t\t\tselectorId: item.innerId,\n\t\t\t\t\t\t\tfields: item,\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\n\t\t\t\t\tthis.productForm.setData({...data, ...{basket: preparedBasket}});\n\n\t\t\t\t\tif (Type.isArray(data.basket))\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$store.commit('orderCreation/setBasket', data.basket);\n\t\t\t\t\t}\n\t\t\t\t\tif (Type.isObject(data.total))\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$store.commit('orderCreation/setTotal', data.total);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tconst data = event.getData();\n\t\t\tif (!Type.isArray(data.basket))\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst fields = [];\n\t\t\tdata.basket.forEach((item) => {\n\t\t\t\tfields.push(item.fields);\n\t\t\t});\n\t\t\tthis.$store.commit('orderCreation/setBasket', fields);\n\n\t\t\tif (this.$root.$app.newCompilationId)\n\t\t\t{\n\t\t\t\tthis.changeCompilationProducts();\n\t\t\t}\n\n\t\t\tif (this.isNeedDisableSubmit())\n\t\t\t{\n\t\t\t\tthis.$store.commit('orderCreation/disableSubmit');\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.$store.commit('orderCreation/enableSubmit');\n\n\t\t\tconst requestId = Text.getRandom(20);\n\t\t\tthis.refreshId = requestId;\n\t\t\tBX.ajax.runAction(\n\t\t\t\t\"salescenter.api.order.refreshBasket\",\n\t\t\t\t{\n\t\t\t\t\tdata: {\n\t\t\t\t\t\torderId : this.$root.$app.orderId,\n\t\t\t\t\t\tbasketItems: fields\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t)\n\t\t\t\t.then((result) => {\n\t\t\t\t\tif (this.refreshId !== requestId)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst data = BX.prop.getObject(result,\"data\", {});\n\t\t\t\t\tprocessRefreshRequest({\n\t\t\t\t\t\ttotal: BX.prop.getObject(\n\t\t\t\t\t\t\tdata,\n\t\t\t\t\t\t\t\"total\",\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tdiscount: 0,\n\t\t\t\t\t\t\t\tresult: 0,\n\t\t\t\t\t\t\t\tsum: 0,\n\t\t\t\t\t\t\t\t//resultNumeric: 0,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t),\n\t\t\t\t\t\tbasket: BX.prop.get(data,\"items\",[])\n\t\t\t\t\t});\n\t\t\t\t})\n\t\t\t\t.catch((result) => {\n\t\t\t\t\tconst data = BX.prop.getObject(result,\"data\", {});\n\t\t\t\t\tprocessRefreshRequest({\n\t\t\t\t\t\terrors: BX.prop.get(result,\"errors\", []),\n\t\t\t\t\t\tbasket: BX.prop.get(data,\"items\",[])\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t},\n\t\tchangeCompilationProducts()\n\t\t{\n\t\t\tconst basketItems = this.$store.getters['orderCreation/getBasket']();\n\t\t\tconst productIds = basketItems.map((basketItem) => {\n\t\t\t\treturn basketItem.skuId;\n\t\t\t});\n\t\t\tconst compilationId =\n\t\t\t\tthis.$root.$app.compilation\n\t\t\t\t\t? this.$root.$app.compilation.ID\n\t\t\t\t\t: this.$root.$app.newCompilationId\n\t\t\t;\n\t\t\tif (compilationId)\n\t\t\t{\n\t\t\t\tBX.ajax.runAction(\n\t\t\t\t\t'salescenter.compilation.updateCompilation',\n\t\t\t\t\t{\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tcompilationId,\n\t\t\t\t\t\t\tproductIds,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t}\n\t\t},\n\t\tcheckProductErrors()\n\t\t{\n\t\t\tif (this.isNeedDisableSubmit())\n\t\t\t{\n\t\t\t\tthis.$store.commit('orderCreation/disableSubmit');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.$store.commit('orderCreation/enableSubmit')\n\t\t\t}\n\t\t},\n\t\tisNeedDisableSubmit()\n\t\t{\n\t\t\tconst basket = this.$store.getters['orderCreation/getBasket']();\n\n\t\t\tif (\n\t\t\t\tbasket.length <= 0\n\t\t\t\t//|| !this.$root.$app.hasClientContactInfo()\n\t\t\t\t|| (this.productForm && Type.isFunction(this.productForm.hasErrors) && this.productForm.hasErrors())\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tconst filledProducts = basket.filter((item) => {\n\t\t\t\treturn (Type.isStringFilled(item.module) && item.productId > 0);\n\t\t\t});\n\n\t\t\treturn filledProducts.length <= 0;\n\t\t}\n\t},\n\ttemplate: `\n\t\t<div class=\"salescenter-app-payment-side\">\n\t\t\t<div class=\"salescenter-app-page-content\">\n\t\t\t\t<div class=\"salescenter-app-form-wrapper\"></div>\n\t\t\t\t<slot name=\"footer\"></slot>\n\t\t\t</div>\n\t\t</div>\n\t`,\n}\n","import {Block} from 'salescenter.component.stage-block';\nimport Product from '../../product';\nimport {StageMixin} from './stage-mixin';\n\nexport default {\n\tprops: {\n\t\tstatus: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\tcounter: {\n\t\t\ttype: Number,\n\t\t\trequired: true\n\t\t},\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\thintTitle: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t},\n\tmixins:[StageMixin],\n\tcomponents:\n\t\t{\n\t\t\t'stage-block-item':\tBlock,\n\t\t\t'product':\tProduct,\n\t\t},\n\tmethods:\n\t\t{\n\t\t\tonItemHint(e)\n\t\t\t{\n\t\t\t\tBX.Salescenter.Manager.openHowToSell(e);\n\t\t\t},\n\t\t\tonProductFormModeChange(event)\n\t\t\t{\n\t\t\t\tthis.$emit('on-product-form-mode-change');\n\t\t\t}\n\t\t},\n\tcomputed:\n\t\t{\n\t\t\tconfigForBlock()\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\tcounter: this.counter,\n\t\t\t\t\tchecked: this.counterCheckedMixin,\n\t\t\t\t\tshowHint: true,\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\ttemplate: `\n\t\t<stage-block-item\n\t\t\t@on-item-hint.stop.prevent=\"onItemHint\"\n\t\t\t:config=\"configForBlock\"\n\t\t\t:class=\"statusClassMixin\"\n\t\t>\n\t\t\t<template v-slot:block-title-title>{{title}}</template>\n\t\t\t<template v-slot:block-hint-title>{{hintTitle}}</template>\n\t\t\t<template v-slot:block-container>\n\t\t\t\t<div :class=\"containerClassMixin\">\n\t\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container-payment\">\n\t\t\t\t\t\t<product\n\t\t\t\t\t\t@on-product-form-mode-change=\"onProductFormModeChange\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</stage-block-item>\n\t`\n}\n","import {Vuex} from 'ui.vue.vuex';\nimport {Vue} from 'ui.vue';\nimport {ajax, Loc} from 'main.core';\nimport DeliverySelector from 'salescenter.deliveryselector';\n\nexport default {\n\tprops: {\n\t\tconfig: {type: Object, required: true}\n\t},\n\tcomponents: {\n\t\t'delivery-selector': DeliverySelector,\n\t},\n\tdata()\n\t{\n\t\treturn {\n\t\t\tavailableServices: [],\n\t\t};\n\t},\n\tmethods: {\n\t\tonChange(payload)\n\t\t{\n\t\t\tthis.$store.dispatch('orderCreation/setDelivery', payload.deliveryPrice);\n\n\t\t\tthis.$store.dispatch(\n\t\t\t\t'orderCreation/setDeliveryId',\n\t\t\t\tpayload.deliveryServiceId\n\t\t\t);\n\t\t\tthis.$store.dispatch(\n\t\t\t\t'orderCreation/setPropertyValues',\n\t\t\t\tpayload.relatedPropsValues\n\t\t\t);\n\t\t\tthis.$store.dispatch(\n\t\t\t\t'orderCreation/setDeliveryExtraServicesValues',\n\t\t\t\tpayload.relatedServicesValues\n\t\t\t);\n\t\t\tthis.$store.dispatch(\n\t\t\t\t'orderCreation/setExpectedDelivery',\n\t\t\t\tpayload.estimatedDeliveryPrice\n\t\t\t);\n\t\t\tthis.$store.dispatch(\n\t\t\t\t'orderCreation/setDeliveryResponsibleId',\n\t\t\t\tpayload.responsibleUser ? payload.responsibleUser.id : null\n\t\t\t);\n\n\t\t\tthis.$emit('change', payload);\n\t\t},\n\t\tonAddressFromChanged()\n\t\t{\n\t\t\tthis.refreshAvailableServices();\n\t\t},\n\t\tonDeliveryServiceChanged()\n\t\t{\n\t\t\tthis.refreshAvailableServices();\n\t\t},\n\t\tonSettingsChanged()\n\t\t{\n\t\t\tthis.$emit('delivery-settings-changed');\n\t\t},\n\t\trefreshAvailableServices()\n\t\t{\n\t\t\tajax.runAction(\n\t\t\t\t'salescenter.order.getCompatibleDeliverySystems',\n\t\t\t\t{\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tbasketItems: this.config.basket ? this.config.basket : [],\n\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\tsessionId: this.config.sessionId,\n\t\t\t\t\t\t\townerTypeId: this.config.ownerTypeId,\n\t\t\t\t\t\t\townerId: this.config.ownerId,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdeliveryServiceId: this.order.deliveryId,\n\t\t\t\t\t\tshipmentPropValues: this.order.propertyValues,\n\t\t\t\t\t\tdeliveryRelatedServiceValues: this.order.deliveryExtraServicesValues,\n\t\t\t\t\t\tdeliveryResponsibleId: this.order.deliveryResponsibleId,\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t).then((result) => {\n\t\t\t\tlet data = BX.prop.getObject(result, \"data\", {});\n\t\t\t\tthis.availableServices = data.availableServices ? data.availableServices : {};\n\t\t\t}).catch((result) => {\n\t\t\t\tthis.availableServices = {};\n\t\t\t});\n\t\t}\n\t},\n\tcreated()\n\t{\n\t\tthis.$store.dispatch('orderCreation/setPersonTypeId', this.config.personTypeId);\n\n\t\tthis.refreshAvailableServices();\n\t},\n\n\tcomputed: {\n\t\tlocalize()\n\t\t{\n\t\t\treturn Vue.getFilteredPhrases('SALESCENTER_');\n\t\t},\n\t\tsumTitle()\n\t\t{\n\t\t\treturn Loc.getMessage('SALESCENTER_PRODUCT_PRODUCTS_PRICE');\n\t\t},\n\t\tproductsPrice()\n\t\t{\n\t\t\treturn this.order.total.result;\n\t\t},\n\t\tdelivery()\n\t\t{\n\t\t\treturn this.order.delivery;\n\t\t},\n\t\tdeliveryFormatted()\n\t\t{\n\t\t\tif (this.isDeliveryCalculated)\n\t\t\t{\n\t\t\t\treturn BX.Currency.currencyFormat(this.delivery, this.config.currency, false);\n\t\t\t}\n\n\t\t},\n\t\ttotal()\n\t\t{\n\t\t\tif (this.productsPrice === null || this.delivery === null)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn this.productsPrice + this.delivery;\n\t\t},\n\t\ttotalFormatted()\n\t\t{\n\t\t\treturn BX.Currency.currencyFormat(this.total, this.config.currency, false);\n\t\t},\n\t\tisDeliveryCalculated()\n\t\t{\n\t\t\treturn (this.order.delivery !== null);\n\t\t},\n\t\texcludedServiceIds()\n\t\t{\n\t\t\treturn this.$root.$app.options.mode === 'delivery' ? [this.$root.$app.options.emptyDeliveryServiceId] : [];\n\t\t},\n\t\tactionData()\n\t\t{\n\t\t\treturn {\n\t\t\t\tbasketItems: this.config.basket,\n\t\t\t\toptions: {\n\t\t\t\t\torderId : this.$root.$app.orderId,\n\t\t\t\t\tsessionId: this.config.sessionId,\n\t\t\t\t\townerTypeId: this.config.ownerTypeId,\n\t\t\t\t\townerId: this.config.ownerId,\n\t\t\t\t},\n\t\t\t};\n\t\t},\n\t\t...Vuex.mapState({\n\t\t\torder: state => state.orderCreation,\n\t\t}),\n\t},\n\ttemplate: `\n\t\t<delivery-selector\n\t\t\t:available-services=\"availableServices\"\n\t\t\t:excluded-service-ids=\"excludedServiceIds\"\t\t\t\t\n\t\t\t:init-entered-delivery-price=\"config.deliveryPrice\"\n\t\t\t:init-delivery-service-id=\"config.deliveryServiceId\"\n\t\t\t:init-related-services-values=\"config.relatedServicesValues\"\n\t\t\t:init-related-props-values=\"config.relatedPropsValues\"\n\t\t\t:init-related-props-options=\"config.relatedPropsOptions\"\n\t\t\t:init-responsible-id=\"config.responsibleId\"\n\t\t\t:person-type-id=\"config.personTypeId\"\n\t\t\t:action=\"'salescenter.api.order.refreshDelivery'\"\n\t\t\t:action-data=\"actionData\"\n\t\t\t:external-sum=\"productsPrice\"\n\t\t\t:external-sum-label=\"sumTitle\"\n\t\t\t:currency=\"config.currency\"\n\t\t\t:currency-symbol=\"config.currencySymbol\"\n\t\t\t@change=\"onChange\"\n\t\t\t@address-from-changed=\"onAddressFromChanged\"\n\t\t\t@delivery-service-changed=\"onDeliveryServiceChanged\"\n\t\t\t@settings-changed=\"onSettingsChanged\"\n\t\t></delivery-selector>\n\t`\n};\n","import 'ui.fonts.ruble';\nimport 'currency';\nimport {ajax, Loc, Type} from 'main.core';\n\nexport default {\n\tprops: {\n\t\tid: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\tproductsPrice: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata()\n\t{\n\t\treturn {\n\t\t\tshipment: {\n\t\t\t\tpriceDelivery: null,\n\t\t\t\tbasePriceDelivery: null,\n\t\t\t\tcurrency: null,\n\t\t\t\tdeliveryService: {\n\t\t\t\t\tname: null,\n\t\t\t\t\tlogo: null,\n\t\t\t\t\tparent: {\n\t\t\t\t\t\tname: null,\n\t\t\t\t\t\tlogo: null,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\textraServices: [],\n\t\t\t\trequestProperties: [],\n\t\t\t},\n\t\t\tcanUserPerformCalls: false,\n\t\t};\n\t},\n\tcreated()\n\t{\n\t\tajax.runAction(\n\t\t\t'salescenter.deliveryselector.getShipmentData',\n\t\t\t{data: {\n\t\t\t\t\tid: this.id\n\t\t\t\t}}\n\t\t).then((result) => {\n\t\t\tthis.shipment = result.data.shipment;\n\t\t\tthis.canUserPerformCalls = result.data.canUserPerformCalls;\n\t\t});\n\t},\n\tmethods: {\n\t\tgetFormattedPrice(price)\n\t\t{\n\t\t\treturn BX.Currency.currencyFormat(price, this.currency, true);\n\t\t},\n\t\tisPhoneRequestProperty(property)\n\t\t{\n\t\t\tif (!Type.isArray(property.tags))\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn property.tags.includes('phone');\n\t\t},\n\t\tmakeCall(phoneNumber)\n\t\t{\n\t\t\tif (\n\t\t\t\t!Type.isUndefined(window.top['BXIM'])\n\t\t\t\t&& this.canUserPerformCalls === true\n\t\t\t)\n\t\t\t{\n\t\t\t\twindow.top['BXIM'].phoneTo(phoneNumber);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\twindow.open('tel:' + phoneNumber, '_self');\n\t\t\t}\n\t\t},\n\t},\n\tcomputed: {\n\t\thasParent()\n\t\t{\n\t\t\treturn (\n\t\t\t\tthis.shipment.hasOwnProperty('deliveryService')\n\t\t\t\t&& this.shipment.deliveryService.hasOwnProperty('parent')\n\t\t\t\t&& this.shipment.deliveryService.parent\n\t\t\t);\n\t\t},\n\t\tdeliveryServiceLogo()\n\t\t{\n\t\t\treturn this.shipment.deliveryService.logo ? this.shipment.deliveryService.logo : null;\n\t\t},\n\t\tdeliveryServiceProfileLogo()\n\t\t{\n\t\t\treturn (this.hasParent && this.shipment.deliveryService.parent.logo)\n\t\t\t\t? this.shipment.deliveryService.parent.logo\n\t\t\t\t: null;\n\t\t},\n\t\tpaymentPrice()\n\t\t{\n\t\t\treturn this.productsPrice + this.priceDelivery;\n\t\t},\n\t\tdeliveryServiceName()\n\t\t{\n\t\t\treturn this.hasParent ? this.shipment.deliveryService.parent.name : this.shipment.deliveryService.name;\n\t\t},\n\t\tdeliveryServiceProfileName()\n\t\t{\n\t\t\treturn this.hasParent ? this.shipment.deliveryService.name : null;\n\t\t},\n\t\tpriceDelivery()\n\t\t{\n\t\t\treturn this.shipment ? this.shipment.priceDelivery : null;\n\t\t},\n\t\tcurrency()\n\t\t{\n\t\t\treturn this.shipment ? this.shipment.currency : null;\n\t\t},\n\t\textraServices()\n\t\t{\n\t\t\treturn Type.isArray(this.shipment.extraServices) ? this.shipment.extraServices : [];\n\t\t},\n\t\tisExtraServicesVisible()\n\t\t{\n\t\t\treturn this.extraServices.length > 0;\n\t\t},\n\t\trequestProperties()\n\t\t{\n\t\t\treturn Type.isArray(this.shipment.requestProperties) ? this.shipment.requestProperties : [];\n\t\t},\n\t\tisRequestPropertiesVisible()\n\t\t{\n\t\t\treturn this.requestProperties.length > 0;\n\t\t},\n\t\tpriceDeliveryFormatted()\n\t\t{\n\t\t\treturn this.getFormattedPrice(this.priceDelivery);\n\t\t},\n\t\tproductsPriceFormatted()\n\t\t{\n\t\t\treturn this.getFormattedPrice(this.productsPrice);\n\t\t},\n\t\tpaymentPriceFormatted()\n\t\t{\n\t\t\treturn this.getFormattedPrice(this.paymentPrice);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div style=\"width: 100%;\" xmlns=\"http://www.w3.org/1999/html\">\n\t\t\t<div class=\"salescenter-delivery-selector-head\">\n\t\t\t\t<div\n\t\t\t\t\tv-if=\"hasParent && deliveryServiceLogo\"\n\t\t\t\t\t:style=\"{ backgroundImage: 'url(' + deliveryServiceLogo + ')' }\"\n\t\t\t\t\tclass=\"salescenter-delivery-selector-logo\"\n\t\t\t\t>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"salescenter-delivery-selector-info\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tv-if=\"deliveryServiceProfileLogo\"\n\t\t\t\t\t\t:style=\"{ backgroundImage: 'url(' + deliveryServiceProfileLogo + ')' }\"\n\t\t\t\t\t\tclass=\"salescenter-delivery-selector-logo\"\n\t\t\t\t\t>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"salescenter-delivery-selector-content\">\n\t\t\t\t\t\t<div class=\"salescenter-delivery-selector-text-light\">{{deliveryServiceName}}</div>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tv-if=\"deliveryServiceProfileName\"\n\t\t\t\t\t\t\tclass=\"salescenter-delivery-selector-text-dark\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{deliveryServiceProfileName}}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div v-if=\"isExtraServicesVisible\" class=\"salescenter-delivery-selector-main\">\n\t\t\t\t<div class=\"salescenter-delivery-selector-text-light\">\n\t\t\t\t\t${Loc.getMessage('SALESCENTER_SHIPMENT_EXTRA_SERVICES')}:\n\t\t\t\t</div>\n\t\t\t\t<ul class=\"salescenter-delivery-selector-list\">\n\t\t\t\t\t<li\n\t\t\t\t\t\tv-for=\"extraService in extraServices\"\n\t\t\t\t\t\tclass=\"salescenter-delivery-selector-list-item salescenter-delivery-selector-text-dark\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{extraService.name}}: {{extraService.value}} \n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t\t<div v-if=\"isRequestPropertiesVisible\" class=\"salescenter-delivery-selector-main\">\n\t\t\t\t<div class=\"salescenter-delivery-selector-text-light\">\n\t\t\t\t\t${Loc.getMessage('SALESCENTER_DELIVERY_REQUEST_DETAILS')}:\n\t\t\t\t</div>\n\t\t\t\t<ul class=\"salescenter-delivery-selector-list\">\n\t\t\t\t\t<li\n\t\t\t\t\t\tv-for=\"requestProperty in requestProperties\"\n\t\t\t\t\t\tclass=\"salescenter-delivery-selector-list-item salescenter-delivery-selector-text-dark\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{requestProperty.name}}:\n\t\t\t\t\t\t<template v-if=\"isPhoneRequestProperty(requestProperty)\">\n\t\t\t\t\t\t\t<a @click.prevent=\"makeCall(requestProperty.value)\" href=\"#\">{{requestProperty.value}}</a>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t\t{{requestProperty.value}}\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t\t<div class=\"salescenter-delivery-selector-line\"></div>\n\t\t\t<div class=\"catalog-pf-result-wrapper\">\n\t\t\t\t<table class=\"catalog-pf-result\">\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<span class=\"catalog-pf-text\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_PRODUCT_PRODUCTS_PRICE')}:\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</td> \n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<span v-html=\"productsPriceFormatted\" class=\"catalog-pf-text\"></span> \n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td class=\"catalog-pf-result-padding-bottom\">\n\t\t\t\t\t\t\t<span class=\"catalog-pf-text catalog-pf-text--tax\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_SHIPMENT_PRODUCT_BLOCK_DELIVERY_PRICE')}: \n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</td> \n\t\t\t\t\t\t<td class=\"catalog-pf-result-padding-bottom\"> \n\t\t\t\t\t\t\t<span class=\"catalog-pf-text catalog-pf-text--tax\" v-html=\"priceDeliveryFormatted\"></span>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr> \n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td class=\"catalog-pf-result-padding\">\n\t\t\t\t\t\t\t<span class=\"catalog-pf-text catalog-pf-text--total catalog-pf-text--border\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_PRODUCT_TOTAL_RESULT')}: \n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</td> \n\t\t\t\t\t\t<td class=\"catalog-pf-result-padding\">\n\t\t\t\t\t\t\t<span v-html=\"paymentPriceFormatted\" class=\"catalog-pf-text catalog-pf-text--total\"></span> \n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t</table>\n\t\t\t</div>\n\t\t</div>\n\t`\n};\n","import {Vuex} \t\t\t\t\t\t\tfrom 'ui.vue.vuex';\nimport {Loc} \t\t\t\t\t\t\tfrom 'main.core';\nimport {Block} \t\t\tfrom 'salescenter.component.stage-block';\nimport {Uninstalled as TileUnInstalled} from \"./tile-collection/uninstalled\";\nimport DeliverySelector\t\t\t\t\tfrom \"../delivery-selector\";\nimport ShipmentView\t\t\t\t\t\tfrom \"../shipment-view\";\nimport {StageMixin} \t\t\t\t\tfrom \"./stage-mixin\";\nimport {MixinTemplatesType} \t\t\tfrom \"../templates-type-mixin\";\nimport {StatusTypes as Status} from 'salescenter.component.stage-block';\n\nconst DeliveryVuex = {\n\tprops: {\n\t\tstatus: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\tcounter: {\n\t\t\ttype: Number,\n\t\t\trequired: true\n\t\t},\n\t\ttiles: {\n\t\t\ttype: Array,\n\t\t\trequired: true\n\t\t},\n\t\tinstalled: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true\n\t\t},\n\t\tisCollapsible: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true\n\t\t},\n\t\tinitialCollapseState: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true\n\t\t},\n\t},\n\tdata()\n\t{\n\t\treturn {\n\t\t\tselectedDeliveryServiceName: null,\n\t\t}\n\t},\n\tmixins:[StageMixin, MixinTemplatesType],\n\tcomponents:\n\t\t{\n\t\t\t'stage-block-item'\t\t\t\t:\tBlock,\n\t\t\t'delivery-selector-block'\t\t:\tDeliverySelector,\n\t\t\t'shipment-view'\t\t\t\t\t:\tShipmentView,\n\t\t\t'uninstalled-delivery-block'\t:\tTileUnInstalled,\n\t\t},\n\tcomputed:\n\t\t{\n\t\t\tstatusClass()\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\t'salescenter-app-payment-by-sms-item-disabled-bg': this.installed === false || this.status === Status.disabled\n\t\t\t\t}\n\t\t\t},\n\t\t\tproductsPrice()\n\t\t\t{\n\t\t\t\treturn this.order.total.result;\n\t\t\t},\n\t\t\tshipmentId()\n\t\t\t{\n\t\t\t\treturn this.$root.$app.options.shipmentId;\n\t\t\t},\n\t\t\tconfigForBlock()\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\tcounter: this.counter,\n\t\t\t\t\ttitleName: this.selectedDeliveryServiceName,\n\t\t\t\t\tinstalled: this.installed,\n\t\t\t\t\tcollapsible: this.isCollapsible,\n\t\t\t\t\tchecked: this.counterCheckedMixin,\n\t\t\t\t\tshowHint: false,\n\t\t\t\t\tinitialCollapseState: this.initialCollapseState,\n\t\t\t\t}\n\t\t\t},\n\t\t\tconfig()\n\t\t\t{\n\t\t\t\tlet deliveryServiceId = null;\n\t\t\t\tif (this.$root.$app.options.hasOwnProperty('shipmentData')\n\t\t\t\t\t&& this.$root.$app.options.shipmentData.hasOwnProperty('deliveryServiceId')\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tdeliveryServiceId = this.$root.$app.options.shipmentData.deliveryServiceId;\n\t\t\t\t}\n\n\t\t\t\tlet deliveryPrice = null;\n\t\t\t\tif (this.$root.$app.options.hasOwnProperty('shipmentData')\n\t\t\t\t\t&& this.$root.$app.options.shipmentData.hasOwnProperty('deliveryPrice')\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tdeliveryPrice = this.$root.$app.options.shipmentData.deliveryPrice;\n\t\t\t\t}\n\n\t\t\t\tlet relatedPropsValues = {};\n\t\t\t\tif (this.$root.$app.options.hasOwnProperty('shipmentData')\n\t\t\t\t\t&& this.$root.$app.options.shipmentData.hasOwnProperty('propValues')\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\trelatedPropsValues = this.$root.$app.options.shipmentData.propValues;\n\t\t\t\t}\n\n\t\t\t\tlet relatedServicesValues = {};\n\t\t\t\tif (this.$root.$app.options.hasOwnProperty('shipmentData')\n\t\t\t\t\t&& this.$root.$app.options.shipmentData.hasOwnProperty('extraServicesValues')\n\t\t\t\t\t&& !Array.isArray(this.$root.$app.options.shipmentData.extraServicesValues)\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\trelatedServicesValues = this.$root.$app.options.shipmentData.extraServicesValues;\n\t\t\t\t}\n\n\t\t\t\tlet relatedPropsOptions = {};\n\t\t\t\tif (this.$root.$app.options.hasOwnProperty('deliveryOrderPropOptions')\n\t\t\t\t\t&& !Array.isArray(this.$root.$app.options.deliveryOrderPropOptions)\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\trelatedPropsOptions = this.$root.$app.options.deliveryOrderPropOptions;\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\tpersonTypeId: this.$root.$app.options.personTypeId,\n\t\t\t\t\tbasket: this.order.basket,\n\t\t\t\t\tcurrencySymbol: this.$root.$app.options.currencySymbol,\n\t\t\t\t\tcurrency: this.order.currency,\n\t\t\t\t\townerTypeId: this.$root.$app.options.ownerTypeId,\n\t\t\t\t\townerId: this.$root.$app.options.ownerId,\n\t\t\t\t\tsessionId: this.$root.$app.options.sessionId,\n\t\t\t\t\trelatedPropsValues,\n\t\t\t\t\trelatedPropsOptions,\n\t\t\t\t\trelatedServicesValues,\n\t\t\t\t\tdeliveryServiceId,\n\t\t\t\t\tresponsibleId: this.$root.$app.options.assignedById,\n\t\t\t\t\tdeliveryPrice,\n\t\t\t\t};\n\t\t\t},\n\t\t\tisViewTemplateMode()\n\t\t\t{\n\t\t\t\treturn this.$root.$app.options.templateMode === 'view';\n\t\t\t},\n\n\t\t\t...Vuex.mapState({\n\t\t\t\torder: state => state.orderCreation\n\t\t\t})\n\t\t},\n\tmethods:{\n\t\tsetTitleName(state)\n\t\t{\n\t\t\tthis.selectedDeliveryServiceName = state.deliveryServiceName;\n\t\t},\n\t\tsaveCollapsedOption(option)\n\t\t{\n\t\t\tthis.$emit('on-save-collapsed-option', 'delivery', option);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<stage-block-item\n\t\t\t:config=\"configForBlock\"\n\t\t\t:class=\"[statusClassMixin, statusClass]\"\n\t\t\t@on-item-hint.stop.prevent=\"onItemHint\"\n\t\t\t@on-adjust-collapsed=\"saveCollapsedOption\"\n\t\t>\n\t\t\t<template v-slot:block-title-title>${Loc.getMessage('SALESCENTER_DELIVERY_BLOCK_TITLE')}</template>\n\t\t\t<template v-slot:block-container>\n\t\t\t\t<div :class=\"containerClassMixin\">\n\t\t\t\t\t<template v-if=\"!installed\">\n\t\t\t\t\t\t<uninstalled-delivery-block :tiles=\"tiles\" \n\t\t\t\t\t\t\t\tv-on:on-tile-slider-close=\"onSliderClose\"/>\n\t\t\t\t\t</template>\n\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container-select\">\n\t\t\t\t\t\t\t<shipment-view\n\t\t\t\t\t\t\t\tv-if=\"isViewTemplateMode\"\n\t\t\t\t\t\t\t\t:id=\"shipmentId\"\n\t\t\t\t\t\t\t\t:productsPrice=\"productsPrice\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t</shipment-view>\n\t\t\t\t\t\t\t<delivery-selector-block v-else\n\t\t\t\t\t\t\t\t:config=\"config\" \n\t\t\t\t\t\t\t\t@delivery-settings-changed=\"onSliderClose\"\n\t\t\t\t\t\t\t\t@change=\"setTitleName\" \n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</template>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</stage-block-item>\n\t`\n};\n\nexport {\n\tDeliveryVuex\n}","import {Loc} \t\t\t\t\t\t\t\tfrom 'main.core';\nimport {Block} \t\t\tfrom 'salescenter.component.stage-block';\nimport {Uninstalled as TileUnInstalled} \tfrom \"./tile-collection/uninstalled\";\nimport {Installed as TileInstalled} \t\tfrom \"./tile-collection/installed\";\nimport {StageMixin} \t\t\t\t\t\tfrom \"./stage-mixin\";\n\nconst PaySystem = {\n\tprops: {\n\t\tstatus: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\tcounter: {\n\t\t\ttype: Number,\n\t\t\trequired: true\n\t\t},\n\t\ttiles: {\n\t\t\ttype: Array,\n\t\t\trequired: true\n\t\t},\n\t\tinstalled: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true\n\t\t},\n\t\ttitleItems: {\n\t\t\ttype: Array\n\t\t},\n\t\tinitialCollapseState: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true\n\t\t},\n\t},\n\tmixins:[StageMixin],\n\tcomponents:\n\t{\n\t\t'stage-block-item'\t\t\t\t\t:\tBlock,\n\t\t'tile-collection-installed-block'\t:\tTileInstalled,\n\t\t'tile-collection-uninstalled-block'\t:\tTileUnInstalled\n\t},\n\tmethods:\n\t{\n\t\tonItemHint(e)\n\t\t{\n\t\t\tBX.Salescenter.Manager.openHowToConfigDefaultPaySystem(e);\n\t\t},\n\t\tsaveCollapsedOption(option)\n\t\t{\n\t\t\tthis.$emit('on-save-collapsed-option', 'pay_system', option);\n\t\t},\n\n\t},\n\tcomputed:\n\t{\n\t\tconfigForBlock()\n\t\t{\n\t\t\treturn {\n\t\t\t\tcounter: this.counter,\n\t\t\t\ttitleItems: this.installed ? this.titleItems : [],\n\t\t\t\tinstalled: this.installed,\n\t\t\t\tcollapsible: true,\n\t\t\t\tchecked: this.counterCheckedMixin,\n\t\t\t\tshowHint: !this.installed,\n\t\t\t\tinitialCollapseState: this.initialCollapseState,\n\t\t\t}\n\t\t},\n\t\tstatusClass()\n\t\t{\n\t\t\treturn {\n\t\t\t\t'salescenter-app-payment-by-sms-item-disabled-bg': this.installed === false\n\t\t\t}\n\t\t},\n\t\ttitle()\n\t\t{\n\t\t\treturn this.installed === true\n\t\t\t\t? Loc.getMessage('SALESCENTER_PAYSYSTEM_SET_BLOCK_TITLE')\n\t\t\t\t: Loc.getMessage('SALESCENTER_PAYSYSTEM_BLOCK_TITLE');\n\t\t}\n\t},\n\n\ttemplate: `\n\t\t<stage-block-item\n\t\t\t:class=\"[statusClassMixin, statusClass]\"\n\t\t\t:config=\"configForBlock\"\n\t\t\t@on-item-hint.stop.prevent=\"onItemHint\"\n\t\t\t@on-tile-slider-close=\"onSliderClose\"\n\t\t\t@on-adjust-collapsed=\"saveCollapsedOption\"\n\t\t>\n\t\t\t<template v-slot:block-title-title>{{title}}</template>\n\t\t\t<template v-slot:block-hint-title>${Loc.getMessage('SALESCENTER_PAYSYSTEM_BLOCK_SETTINGS_TITLE')}</template>\n\t\t\t<template v-slot:block-container>\n\t\t\t\t<div :class=\"containerClassMixin\">\n\t\t\t\t\t<tile-collection-uninstalled-block \t:tiles=\"tiles\" v-if=\"!installed\"/>\n\t\t\t\t\t<tile-collection-installed-block :tiles=\"tiles\" v-on:on-tile-slider-close=\"onSliderClose\" v-else />\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</stage-block-item>\n\t`\n};\nexport {\n\tPaySystem\n}","import { Loc } from 'main.core';\nimport { Block } from 'salescenter.component.stage-block';\nimport { UserAvatar, MessageEditor } from 'salescenter.component.stage-block.sms-message';\nimport { ContextDictionary } from '../../const/context-dictionary';\nimport { StageMixin } from './stage-mixin';\n\nconst ChatMessage = {\n\tprops: {\n\t\tstatus: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\tcounter: {\n\t\t\ttype: Number,\n\t\t\trequired: true\n\t\t},\n\t\tmanager: {\n\t\t\ttype: Object,\n\t\t\trequired: true\n\t\t},\n\t\ttitleTemplate: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\tshowHint: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true\n\t\t},\n\t\teditorTemplate: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\teditorUrl: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\tselectedMode: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tmixins: [StageMixin],\n\tcomponents: {\n\t\t'stage-block-item':\tBlock,\n\t\t'chat-user-avatar-block': UserAvatar,\n\t\t'chat-message-editor-block': MessageEditor,\n\t},\n\tdata()\n\t{\n\t\treturn {\n\t\t\tcurrentSenderCode: null,\n\t\t\tsenders: [],\n\t\t\tpushedToUseBitrix24Notifications: null,\n\t\t\tsmsSenderListComponentKey: 0,\n\t\t};\n\t},\n\tcomputed: {\n\t\tconfigForBlock()\n\t\t{\n\t\t\treturn {\n\t\t\t\tcounter: this.counter,\n\t\t\t\tchecked: this.counterCheckedMixin,\n\t\t\t\tshowHint: true,\n\t\t\t};\n\t\t},\n\t\teditor()\n\t\t{\n\t\t\treturn {\n\t\t\t\ttemplate: this.editorTemplate,\n\t\t\t\turl: this.editorUrl\n\t\t\t};\n\t\t},\n\t\ttitle()\n\t\t{\n\t\t\treturn this.titleTemplate;\n\t\t},\n\t\tisMessageReadOnly()\n\t\t{\n\t\t\treturn this.$root.$app.context !== ContextDictionary.sms;\n\t\t},\n\t},\n\tcreated() {\n\t},\n\tmethods: {\n\t\tonItemHint(e)\n\t\t{\n\t\t\tBX.Salescenter.Manager.openSlider(this.$root.$app.options.urlSettingsCompanyContacts, {width: 1200} );\n\t\t},\n\t\topenBitrix24NotificationsHelp(event)\n\t\t{\n\t\t\tBX.Salescenter.Manager.openBitrix24NotificationsHelp(event);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<stage-block-item\t\t\t\n\t\t\t:config=\"configForBlock\"\n\t\t\t:class=\"statusClassMixin\"\n\t\t\tv-on:on-item-hint=\"onItemHint\"\n\t\t>\n\t\t\t<template v-slot:block-title-title>{{title}}</template>\n\t\t\t<template\n\t\t\t\tv-if=\"showHint\"\n\t\t\t\tv-slot:block-hint-title\n\t\t\t>\n\t\t\t\t${Loc.getMessage('SALESCENTER_LEFT_PAYMENT_COMPANY_CONTACTS_SHORTER_VERSION')}\n\t\t\t</template>\n\t\t\t<template v-slot:block-container>\n\t\t\t\t<div :class=\"containerClassMixin\" class=\"salescenter-app-payment-by-sms-item-container-offtop\">\n\t\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container-sms\">\n\t\t\t\t\t\t<chat-user-avatar-block :manager=\"manager\"/>\n\t\t\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container-sms-content\">\n\t\t\t\t\t\t\t<chat-message-editor-block :editor=\"editor\" :isReadOnly=\"isMessageReadOnly\" :selectedMode=\"selectedMode\"/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</stage-block-item>\n\t`\n};\nexport {\n\tChatMessage\n};\n","import {Loc} \t\t\t\t\t\t\t\tfrom 'main.core';\nimport {Block} \t\tfrom 'salescenter.component.stage-block';\nimport {StageList} \t\t\t\t\t\t\tfrom 'salescenter.component.stage-block.automation';\nimport * as AutomationStage \t\t\t\tfrom 'salescenter.automation-stage';\nimport {StageMixin} \t\t\t\t\t\tfrom \"./stage-mixin\";\nimport {MixinTemplatesType} \t\t\tfrom \"../templates-type-mixin\";\n\nconst Automation = {\n\tprops: {\n\t\tstatus: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\tcounter: {\n\t\t\ttype: Number,\n\t\t\trequired: true\n\t\t},\n\t\tstageOnOrderPaid: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t},\n\t\tstageOnDeliveryFinished: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t},\n\t\titems: {\n\t\t\ttype: Array,\n\t\t\trequired: true\n\t\t},\n\t\tinitialCollapseState: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true\n\t\t},\n\t},\n\tmixins:[StageMixin, MixinTemplatesType],\n\tdata()\n\t{\n\t\treturn {\n\t\t\tpaymentStages: [],\n\t\t\tshipmentStages: [],\n\t\t}\n\t},\n\tcomponents:\n\t\t{\n\t\t\t'stage-block-item'\t\t\t:\tBlock,\n\t\t\t'stage-item-list'\t\t\t:\tStageList\n\t\t},\n\tmethods:\n\t\t{\n\t\t\tsaveCollapsedOption(option)\n\t\t\t{\n\t\t\t\tthis.$emit('on-save-collapsed-option', 'automation', option);\n\t\t\t},\n\n\t\t\tupdatePaymentStage(e)\n\t\t\t{\n\t\t\t\tlet newStageId = e.data;\n\t\t\t\tthis.paymentStages.forEach((stage) => {\n\t\t\t\t\tstage.selected = stage.id === newStageId;\n\t\t\t\t});\n\n\t\t\t\tthis.$root.$app.stageOnOrderPaid = e.data;\n\t\t\t},\n\n\t\t\tupdateShipmentStage(e)\n\t\t\t{\n\t\t\t\tlet newStageId = e.data;\n\t\t\t\tthis.shipmentStages.forEach((stage) => {\n\t\t\t\t\tstage.selected = stage.id === newStageId;\n\t\t\t\t});\n\n\t\t\t\tthis.$root.$app.stageOnDeliveryFinished = e.data;\n\t\t\t},\n\t\t\tinitStages(stages, currentValue)\n\t\t\t{\n\t\t\t\tObject.values(this.items).forEach(options => {\n\t\t\t\t\toptions.selected = (\n\t\t\t\t\t\t(!currentValue && !options.hasOwnProperty('id'))\n\t\t\t\t\t\t|| (options.id === currentValue)\n\t\t\t\t\t);\n\t\t\t\t\tstages.push(AutomationStage.Factory.create(options));\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\tcomputed:\n\t\t{\n\t\t\tconfigForBlock()\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\tcounter: this.counter,\n\t\t\t\t\tchecked: this.counterCheckedMixin,\n\t\t\t\t\tcollapsible: true,\n\t\t\t\t\tinitialCollapseState: this.initialCollapseState,\n\t\t\t\t\ttitleName: this.selectedStage.name,\n\t\t\t\t}\n\t\t\t},\n\t\t\tselectedStage()\n\t\t\t{\n\t\t\t\tlet stages = this.isPayment ? this.paymentStages : this.shipmentStages;\n\n\t\t\t\treturn stages.find((stage) =>\n\t\t\t\t{\n\t\t\t\t\treturn stage.selected;\n\t\t\t\t});\n\t\t\t},\n\t\t\tisPayment()\n\t\t\t{\n\t\t\t\treturn (\n\t\t\t\t\tthis.$root.$app.options.mode === 'payment_delivery'\n\t\t\t\t\t|| this.$root.$app.options.mode === 'payment'\n\t\t\t\t);\n\t\t\t},\n\t\t\tisHideDeliveryStage()\n\t\t\t{\n\t\t\t\treturn this.$root.$app.options.mode === 'payment';\n\t\t\t}\n\t\t},\n\tcreated()\n\t{\n\t\tif (this.isPayment)\n\t\t{\n\t\t\tthis.initStages(this.paymentStages, this.stageOnOrderPaid);\n\t\t}\n\n\t\tthis.initStages(this.shipmentStages, this.stageOnDeliveryFinished);\n\t},\n\ttemplate: `\n\t\t<stage-block-item\n\t\t\t:config=\"configForBlock\"\n\t\t\t:class=\"statusClassMixin\"\n\t\t\t@on-adjust-collapsed=\"saveCollapsedOption\"\n\t\t>\n\t\t\t<template v-slot:block-title-title>${Loc.getMessage('SALESCENTER_AUTOMATION_BLOCK_TITLE')}</template>\n\t\t\t<template v-slot:block-container>\n\t\t\t\t<div :class=\"containerClassMixin\">\n\t\t\t\t\t<div v-if=\"isPayment\">\n\t\t\t\t\t\t<stage-item-list\n\t\t\t\t\t\t\tv-on:on-choose-select-option=\"updatePaymentStage($event)\"\n\t\t\t\t\t\t\t:stages=\"paymentStages\"\n\t\t\t\t\t\t\t:editable=\"editable\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<template v-slot:stage-list-text>${Loc.getMessage('SALESCENTER_AUTOMATION_BLOCK_TEXT')}</template>\n\t\t\t\t\t\t</stage-item-list>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div v-if=\"!isHideDeliveryStage\">\n\t\t\t\t\t\t<stage-item-list\n\t\t\t\t\t\t\tv-on:on-choose-select-option=\"updateShipmentStage($event)\"\n\t\t\t\t\t\t\t:stages=\"shipmentStages\"\n\t\t\t\t\t\t\t:editable=\"editable\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<template v-slot:stage-list-text>${Loc.getMessage('SALESCENTER_AUTOMATION_DELIVERY_FINISHED')}</template>\n\t\t\t\t\t\t</stage-item-list>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t</template>\n\t\t</stage-block-item>\n\t`\n};\nexport {\n\tAutomation\n}\n","import {Loc} from 'main.core';\n\nexport default {\n\tprops: {\n\t\tbuttonLabel: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tbuttonEnabled: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t\tshowWhatClientSeesControl: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t\tisFacebookForm: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tcomputed: {\n\t\tbuttonClass()\n\t\t{\n\t\t\treturn {'salescenter-app-payment-by-sms-item-disabled': this.buttonEnabled === false};\n\t\t},\n\t\tshowSubmitCompilationLinkToFacebookButton()\n\t\t{\n\t\t\tconst isCompilationMode = this.$store.getters['orderCreation/isCompilationMode'];\n\t\t\treturn this.isFacebookForm && isCompilationMode;\n\t\t},\n\t},\n\tmethods: {\n\t\tshowWhatClientSees(event)\n\t\t{\n\t\t\tBX.Salescenter.Manager.openWhatClientSee(event);\n\t\t},\n\t\tsubmit(event)\n\t\t{\n\t\t\tthis.$emit('on-submit', event);\n\t\t},\n\t\tsubmitCompilationLinkToFacebook(event)\n\t\t{\n\t\t\tthis.$emit('on-submit-compilation-link-to-facebook', event);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div\n\t\t\t:class=\"buttonClass\"\n\t\t\tclass=\"salescenter-app-payment-by-sms-item-show salescenter-app-payment-by-sms-item salescenter-app-payment-by-sms-item-send\"\n\t\t>\n\t\t\t<div class=\"salescenter-app-payment-by-sms-item-counter\">\n\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-counter-rounder\"></div>\n\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-counter-line\"></div>\n\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-counter-number\"></div>\n\t\t\t</div>\n\t\t\t<div class=\"\">\n\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container\">\n\t\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container-payment\">\n\t\t\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container-payment-inline\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t@click=\"submit($event)\"\n\t\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-lg ui-btn-success ui-btn-round\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{{buttonLabel}}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tv-if=\"showSubmitCompilationLinkToFacebookButton\"\n\t\t\t\t\t\t\t\t@click=\"submitCompilationLinkToFacebook($event)\"\n\t\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-lg ui-btn-light-border ui-btn-round\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_SEND_COMPILATION_LINK_TO_FACEBOOK')}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tv-if=\"showWhatClientSeesControl\"\n\t\t\t\t\t\t\t\t@click=\"showWhatClientSees\"\n\t\t\t\t\t\t\t\tclass=\"salescenter-app-add-item-link\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_SEND_ORDER_BY_SMS_SENDER_TEMPLATE_WHAT_DOES_CLIENT_SEE')}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`\n}\n","import {\n\tTimeLineItemBlock as Item,\n\tTimeLineItemPaymentBlock as PaymentItem\n} \t\t\t\t\t\t\t\t\t\t\t\tfrom 'salescenter.component.stage-block.timeline';\nimport {Payment} \t\t\t\t\t\t\t\tfrom 'salescenter.timeline';\n\nconst TimeLine = {\n\tprops:{\n\t\ttimelineItems: {\n\t\t\ttype: Array,\n\t\t\trequired: true\n\t\t},\n\t},\n\tcomponents: {\n\t\t'timeline-item-block'\t\t\t: Item,\n\t\t'timeline-item-payment-block'\t: PaymentItem,\n\t},\n\n\tmethods:\n\t\t{\n\t\t\tisPayment(item)\n\t\t\t{\n\t\t\t\treturn item.type === Payment.type();\n\t\t\t}\n\t\t},\n\ttemplate: `\n\t\t<div class=\"salescenter-app-payment-by-sms-timeline\">\n\t\t\t<template v-for=\"(item) in timelineItems\">\n\t\t\t\t<timeline-item-payment-block\t:item=\"item\"\tv-if=\"isPayment(item)\"/>\n\t\t\t\t<timeline-item-block\t\t\t:item=\"item\" \tv-else/>\n\t\t\t</template>\n\t\t</div>\n\t`\n};\n\nexport {\n\tTimeLine,\n}","import {Loc, Uri} from 'main.core';\nimport {StatusTypes as Status} from 'salescenter.component.stage-block';\nimport {MenuManager} from \"main.popup\";\nimport {Manager} from 'salescenter.manager';\nimport {Block} from 'salescenter.component.stage-block';\nimport {StageMixin} from \"./stage-mixin\";\nimport \"ui.icons.disk\";\nimport type {Document, Template} from \"../../app\";\nimport {Vuex} from \"ui.vue.vuex\";\n\nconst DocumentSelector = {\n\tprops: {\n\t\tcounter: {\n\t\t\ttype: Number,\n\t\t\trequired: true\n\t\t},\n\t\ttemplateAddUrl: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t},\n\t},\n\tmixins: [StageMixin],\n\tcomponents: {\n\t\t'stage-block-item':\tBlock,\n\t},\n\tcomputed: {\n\t\tstatus()\n\t\t{\n\t\t\tif (\n\t\t\t\tthis.model\n\t\t\t\t&& (\n\t\t\t\t\tthis.model.templates\n\t\t\t\t\t&& this.model.templates.length\n\t\t\t\t)\n\t\t\t\t|| (\n\t\t\t\t\tthis.model.documents\n\t\t\t\t\t&& this.model.documents.length\n\t\t\t\t)\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn Status.complete;\n\t\t\t}\n\n\t\t\tif(\n\t\t\t\tthis.templateAddUrl\n\t\t\t\t&& this.templateAddUrl.length\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn Status.current;\n\t\t\t}\n\n\t\t\treturn Status.disabled;\n\t\t},\n\t\tconfigForBlock()\n\t\t{\n\t\t\treturn {\n\t\t\t\tcounter: this.counter,\n\t\t\t\ttitleItems: [],\n\t\t\t\tinstalled: true,\n\t\t\t\tcollapsible: false,\n\t\t\t\tchecked: this.counterCheckedMixin,\n\t\t\t\tshowHint: false,\n\t\t\t\tinitialCollapseState: false,\n\t\t\t}\n\t\t},\n\t\tgetDocumentTitle(): ?string\n\t\t{\n\t\t\tconst currentDocument = this.getCurrentDocument();\n\t\t\tif (currentDocument)\n\t\t\t{\n\t\t\t\treturn currentDocument.title;\n\t\t\t}\n\n\t\t\treturn Loc.getMessage('SALESCENTER_DOCUMENT_SELECTOR_BLOCK_CREATE_NEW_TEMPLATE');\n\t\t},\n\t\twithStamps(): string\n\t\t{\n\t\t\tlet isWithStamps = '';\n\t\t\tconst currentDocument = this.getCurrentDocument();\n\t\t\tif (currentDocument)\n\t\t\t{\n\t\t\t\tif(currentDocument.isWithStamps)\n\t\t\t\t{\n\t\t\t\t\tisWithStamps = Loc.getMessage('SALESCENTER_DOCUMENT_SELECTOR_BLOCK_WITH_SIGNS');\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tisWithStamps = Loc.getMessage('SALESCENTER_DOCUMENT_SELECTOR_BLOCK_WITHOUT_SIGNS');\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn isWithStamps;\n\t\t},\n\t\thasData()\n\t\t{\n\t\t\tconst document = this.getCurrentDocument();\n\n\t\t\treturn (document && document.detailUrl);\n\t\t},\n\t\t...Vuex.mapState({\n\t\t\tmodel: state => state.documentSelector,\n\t\t})\n\t},\n\tmethods: {\n\t\thandleDocumentClick({target})\n\t\t{\n\t\t\tif (this.getCurrentDocument() !== null)\n\t\t\t{\n\t\t\t\tthis.openSelectorMenu(target);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.openTemplatesList();\n\t\t\t}\n\t\t},\n\t\topenSelectorMenu(bindElement)\n\t\t{\n\t\t\tMenuManager.show({\n\t\t\t\tid: 'payment-document-selector',\n\t\t\t\tbindElement,\n\t\t\t\titems: this.prepareSelectorMenuItems(),\n\t\t\t\tcloseByEsc: true,\n\t\t\t\tcacheable: false,\n\t\t\t});\n\t\t},\n\t\tcloseSelectorMenu()\n\t\t{\n\t\t\tMenuManager.destroy('payment-document-selector');\n\t\t},\n\t\tprepareSelectorMenuItems()\n\t\t{\n\t\t\tconst items = [];\n\t\t\tif (this.model.documents)\n\t\t\t{\n\t\t\t\tfor (const document of this.model.documents)\n\t\t\t\t{\n\t\t\t\t\titems.push({\n\t\t\t\t\t\ttext: document.title,\n\t\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\t\tthis.closeSelectorMenu();\n\t\t\t\t\t\t\tthis.$store.dispatch('documentSelector/setBoundDocumentId', {boundDocumentId: document.id});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst templateListItem = {\n\t\t\t\ttext: Loc.getMessage('SALESCENTER_DOCUMENT_SELECTOR_BLOCK_CREATE_NEW_DOCUMENT'),\n\t\t\t\titems: [],\n\t\t\t};\n\t\t\tif (this.model.templates)\n\t\t\t{\n\t\t\t\tif (items.length > 0)\n\t\t\t\t{\n\t\t\t\t\titems.push({delimiter: true});\n\t\t\t\t}\n\t\t\t\tfor (const template of this.model.templates)\n\t\t\t\t{\n\t\t\t\t\ttemplateListItem.items.push({\n\t\t\t\t\t\ttext: template.title,\n\t\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\t\tthis.closeSelectorMenu();\n\t\t\t\t\t\t\tthis.$store.commit('documentSelector/setSelectedTemplateId', {selectedTemplateId: template.id});\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (this.templateAddUrl)\n\t\t\t{\n\t\t\t\tif (templateListItem.items.length > 0)\n\t\t\t\t{\n\t\t\t\t\ttemplateListItem.items.push({delimiter: true});\n\t\t\t\t}\n\t\t\t\ttemplateListItem.items.push({\n\t\t\t\t\ttext: Loc.getMessage('SALESCENTER_DOCUMENT_SELECTOR_BLOCK_CREATE_NEW_TEMPLATE'),\n\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\tthis.closeSelectorMenu();\n\t\t\t\t\t\tthis.openTemplatesList();\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t\tif (templateListItem.items.length > 0)\n\t\t\t{\n\t\t\t\titems.push(templateListItem);\n\t\t\t}\n\n\t\t\treturn items;\n\t\t},\n\t\topenTemplatesList()\n\t\t{\n\t\t\tManager.openSlider(this.templateAddUrl, {\n\t\t\t\twidth: 930,\n\t\t\t}).then(() => {\n\t\t\t\tthis.$store.dispatch('documentSelector/loadTemplates');\n\t\t\t});\n\t\t},\n\t\thandleEditDocumentClick()\n\t\t{\n\t\t\tconst currentDocument = this.getCurrentDocument();\n\t\t\tif (currentDocument.detailUrl)\n\t\t\t{\n\t\t\t\tManager.openSlider(currentDocument.detailUrl, {\n\t\t\t\t\twidth: 980,\n\t\t\t\t}).then((slider) => {\n\t\t\t\t\tconst document = slider.getData().get('document');\n\t\t\t\t\tif (document)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$store.dispatch('documentSelector/addDocument', {document});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tgetCurrentDocument(): ?Document\n\t\t{\n\t\t\tlet document = null;\n\t\t\tif (this.model.boundDocumentId > 0)\n\t\t\t{\n\t\t\t\tdocument = this.getDocumentById(this.model.boundDocumentId);\n\t\t\t}\n\t\t\tif (!document && this.model.selectedTemplateId > 0)\n\t\t\t{\n\t\t\t\tdocument = this.getStubDocumentByTemplate(this.model.selectedTemplateId);\n\t\t\t}\n\t\t\tif (!document)\n\t\t\t{\n\t\t\t\tconst documents = this.model.documents;\n\t\t\t\tif (documents && documents[0])\n\t\t\t\t{\n\t\t\t\t\tdocument = documents[0];\n\t\t\t\t\tthis.$store.dispatch('documentSelector/setBoundDocumentId', {boundDocumentId: document.id});\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!document)\n\t\t\t{\n\t\t\t\tconst templates = this.model.templates;\n\t\t\t\tif (templates && templates[0])\n\t\t\t\t{\n\t\t\t\t\tdocument = this.getStubDocumentByTemplate(templates[0].id);\n\t\t\t\t\tthis.$store.commit('documentSelector/setSelectedTemplateId', {selectedTemplateId: templates[0].id});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn document;\n\t\t},\n\t\tgetDocumentById(id: number): ?Document\n\t\t{\n\t\t\tfor (const document: Document of this.model.documents)\n\t\t\t{\n\t\t\t\tif (document.id === id)\n\t\t\t\t{\n\t\t\t\t\treturn document;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\t\tgetTemplateById(id: number): ?Template\n\t\t{\n\t\t\tfor (const template: Template of this.model.templates)\n\t\t\t{\n\t\t\t\tif (template.id === id)\n\t\t\t\t{\n\t\t\t\t\treturn template;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\t\tgetStubDocumentByTemplate(templateId: number): ?Document\n\t\t{\n\t\t\tconst template = this.getTemplateById(templateId);\n\t\t\tif (!template)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tconst paymentId = this.$root.$app.options.paymentId || 0;\n\t\t\tlet title = null;\n\t\t\tlet detailUrl = null;\n\t\t\tif (paymentId > 0)\n\t\t\t{\n\t\t\t\ttitle = Loc.getMessage('SALESCENTER_DOCUMENT_SELECTOR_BLOCK_DOCUMENT_NEW_SUFFIX', {\n\t\t\t\t\t'#TITLE#': template.title\n\t\t\t\t});\n\t\t\t\tdetailUrl = Uri.addParam(template.documentCreationUrl, {\n\t\t\t\t\tvalues: {\n\t\t\t\t\t\t_paymentId: paymentId,\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\ttitle = Loc.getMessage('SALESCENTER_DOCUMENT_SELECTOR_BLOCK_DOCUMENT_CREATED_LATER_SUFFIX', {\n\t\t\t\t\t'#TITLE#': template.title\n\t\t\t\t});\n\t\t\t\tdetailUrl = null;\n\t\t\t}\n\t\t\treturn {\n\t\t\t\tid: 0,\n\t\t\t\ttitle,\n\t\t\t\tdetailUrl,\n\t\t\t\tisWithStamps: template.isWithStamps,\n\t\t\t}\n\t\t},\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<stage-block-item\n\t\t\t:class=\"statusClassMixin\"\n\t\t\t:config=\"configForBlock\"\n\t\t>\n\t\t\t<template v-slot:block-title-title>${Loc.getMessage('SALESCENTER_DOCUMENT_SELECTOR_BLOCK_TITLE')}</template>\n\t\t\t<template v-slot:block-container>\n\t\t\t\t<div :class=\"containerClassMixin\">\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t<div class=\"salescenter-app-payment-item-container-document-selector\">\n\t\t\t\t\t\t<div class=\"salescenter-app-payment-item-container-document-selector-selector\">\n\t\t\t\t\t\t\t<div class=\"salescenter-app-payment-item-container-document-selector-selector-file\">\n\t\t\t\t\t\t\t\t<div class=\"ui-icon ui-icon-lg ui-icon-file-pdf\"><i></i></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"salescenter-app-payment-item-container-document-selector-title\">\n\t\t\t\t\t\t\t\t<div \n\t\t\t\t\t\t\t\t\tref=\"selectorNode\"\n\t\t\t\t\t\t\t\t\tclass=\"salescenter-app-payment-item-container-document-selector-title-button\"\n\t\t\t\t\t\t\t\t\t@click=\"handleDocumentClick\"\n\t\t\t\t\t\t\t\t>{{getDocumentTitle}}</div>\n\t\t\t\t\t\t\t\t<div class=\"salescenter-app-payment-item-container-document-selector-title-sign\">{{withStamps}}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tv-if=\"hasData\"\n\t\t\t\t\t\t\tclass=\"salescenter-app-payment-item-container-document-selector-edit\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div \n\t\t\t\t\t\t\t\tclass=\"salescenter-app-payment-item-container-document-selector-edit-button\"\n\t\t\t\t\t\t\t\t@click=\"handleEditDocumentClick\"\n\t\t\t\t\t\t\t>\n                              <svg width=\"14\" height=\"14\" viewBox=\"0 0 14 14\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                                <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M11.4359 0.03479L13.9865 2.61221L4.00879 12.563L1.45822 9.98561L11.4359 0.03479ZM0.0256074 13.6726C0.00148857 13.7639 0.0273302 13.8603 0.0927957 13.9275C0.159984 13.9947 0.25646 14.0205 0.347767 13.9947L3.19896 13.2265L0.793965 10.8223L0.0256074 13.6726Z\" fill=\"#525C69\"/>\n                              </svg>\n                              ${Loc.getMessage('SALESCENTER_RIGHT_ACTION_EDIT')}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</stage-block-item>\n\t`\n};\n\nexport\n{\n\tDocumentSelector\n}","import {Loc} from 'main.core';\nimport {StatusTypes as Status} from 'salescenter.component.stage-block';\nimport * as Tile from 'salescenter.tile';\nimport * as TimeLineItem from 'salescenter.timeline';\nimport {UI} from 'ui.notification';\nimport {MixinTemplatesType} from '../templates-type-mixin';\nimport {Cashbox} from '../stage-blocks/cashbox';\nimport Product from '../stage-blocks/product';\nimport {DeliveryVuex} from '../stage-blocks/delivery-vuex';\nimport {PaySystem} from '../stage-blocks/paysystem';\nimport {ChatMessage} from '../stage-blocks/chat-message';\nimport {Automation} from '../stage-blocks/automation';\nimport {StageMixin} from '../stage-blocks/stage-mixin';\nimport Send from '../deal-receiving-payment/stage-blocks/send';\nimport {TimeLine} from '../stage-blocks/timeline';\nimport {DocumentSelector} from '../stage-blocks/document-selector';\n\nexport default {\n\tcomponents: {\n\t\t'chat-message-block': ChatMessage,\n\t\t'product-block': Product,\n\t\t'paysystem-block': PaySystem,\n\t\t'cashbox-block': Cashbox,\n\t\t'delivery-block': DeliveryVuex,\n\t\t'automation-block': Automation,\n\t\t'send-block': Send,\n\t\t'timeline-block': TimeLine,\n\t\t'document-selector-block': DocumentSelector,\n\t},\n\tdata()\n\t{\n\t\tlet stages = {\n\t\t\tmessage: {\n\t\t\t\tstatus: Status.complete,\n\t\t\t\tmanager: this.$root.$app.options.entityResponsible,\n\t\t\t\ttitleTemplate: Loc.getMessage('SALESCENTER_APP_CHAT_MESSAGE_TITLE'),\n\t\t\t\tshowHint: this.$root.$app.options.templateMode !== 'view',\n\t\t\t\teditorTemplate: this.$root.$app.sendingMethodDesc.text,\n\t\t\t\teditorUrl: this.$root.$app.orderPublicUrl,\n\t\t\t\tselectedMode: 'payment',\n\t\t\t},\n\t\t\tproduct: {\n\t\t\t\tstatus: this.$root.$app.options.basket && this.$root.$app.options.basket.length > 0\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.current,\n\t\t\t\ttitle: this.$root.$app.options.templateMode === 'view'\n\t\t\t\t\t? Loc.getMessage('SALESCENTER_PRODUCT_BLOCK_TITLE_PAYMENT_VIEW')\n\t\t\t\t\t: Loc.getMessage('SALESCENTER_PRODUCT_BLOCK_TITLE_SHORT'),\n\t\t\t\thintTitle: this.$root.$app.options.templateMode === 'view'\n\t\t\t\t\t? ''\n\t\t\t\t\t: Loc.getMessage('SALESCENTER_PRODUCT_SET_BLOCK_TITLE_SHORT'),\n\t\t\t},\n\t\t\tpaysystem: {\n\t\t\t\tstatus: this.$root.$app.options.paySystemList.isSet\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled,\n\t\t\t\ttiles: this.getTileCollection(this.$root.$app.options.paySystemList.items),\n\t\t\t\tinstalled: this.$root.$app.options.paySystemList.isSet,\n\t\t\t\ttitleItems: this.getTitleItems(this.$root.$app.options.paySystemList.items),\n\t\t\t\tinitialCollapseState: this.$root.$app.options.isPaySystemCollapsed\n\t\t\t\t\t? this.$root.$app.options.isPaySystemCollapsed === 'Y'\n\t\t\t\t\t: this.$root.$app.options.paySystemList.isSet,\n\t\t\t},\n\t\t\tcashbox: {},\n\t\t\tautomation: {},\n\t\t\tdocumentSelector: {\n\t\t\t\tstatus: Status.complete,\n\t\t\t},\n\t\t};\n\n\t\tif (this.$root.$app.options.hasOwnProperty('deliveryList'))\n\t\t{\n\t\t\tstages.delivery = {\n\t\t\t\tisHidden: (\n\t\t\t\t\tthis.$root.$app.options.templateMode === 'view'\n\t\t\t\t\t&& parseInt(this.$root.$app.options.shipmentId) <= 0\n\t\t\t\t),\n\t\t\t\tstatus: this.$root.$app.options.deliveryList.isInstalled\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled,\n\t\t\t\ttiles: this.getTileCollection(this.$root.$app.options.deliveryList.items),\n\t\t\t\tinstalled: this.$root.$app.options.deliveryList.isInstalled,\n\t\t\t\tinitialCollapseState: this.$root.$app.options.isDeliveryCollapsed\n\t\t\t\t\t? this.$root.$app.options.isDeliveryCollapsed === 'Y'\n\t\t\t\t\t: this.$root.$app.options.deliveryList.isInstalled,\n\t\t\t};\n\t\t}\n\n\t\tif (this.$root.$app.options.cashboxList.hasOwnProperty('items'))\n\t\t{\n\t\t\tstages.cashbox = {\n\t\t\t\tstatus: this.$root.$app.options.cashboxList.isSet\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled,\n\t\t\t\ttiles: this.getTileCollection(this.$root.$app.options.cashboxList.items),\n\t\t\t\tinstalled: this.$root.$app.options.cashboxList.isSet,\n\t\t\t\ttitleItems: this.getTitleItems(this.$root.$app.options.cashboxList.items),\n\t\t\t\tinitialCollapseState: this.$root.$app.options.isCashboxCollapsed\n\t\t\t\t\t? this.$root.$app.options.isCashboxCollapsed === 'Y'\n\t\t\t\t\t: this.$root.$app.options.cashboxList.isSet,\n\t\t\t};\n\t\t}\n\n\t\tif (this.$root.$app.options.isAutomationAvailable)\n\t\t{\n\t\t\tstages.automation = {\n\t\t\t\tstatus: Status.complete,\n\t\t\t\tstageOnOrderPaid: this.$root.$app.options.stageOnOrderPaid,\n\t\t\t\tstageOnDeliveryFinished: this.$root.$app.options.stageOnDeliveryFinished,\n\t\t\t\titems: this.$root.$app.options.entityStageList,\n\t\t\t\tinitialCollapseState: this.$root.$app.options.isAutomationCollapsed\n\t\t\t\t\t? this.$root.$app.options.isAutomationCollapsed === 'Y'\n\t\t\t\t\t: false,\n\t\t\t};\n\t\t}\n\n\t\tif (this.$root.$app.options.hasOwnProperty('timeline'))\n\t\t{\n\t\t\tstages.timeline = {\n\t\t\t\titems: this.getTimelineCollection(this.$root.$app.options.timeline)\n\t\t\t}\n\t\t}\n\n\t\tif (this.$root.$app.hasOwnProperty('documentSelector'))\n\t\t{\n\t\t\tif (this.$root.$app.documentSelector.templateAddUrl)\n\t\t\t{\n\t\t\t\tstages.documentSelector.templateAddUrl = this.$root.$app.documentSelector.templateAddUrl;\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\tstages: stages,\n\t\t}\n\t},\n\tmixins: [\n\t\tStageMixin,\n\t\tMixinTemplatesType\n\t],\n\tcomputed: {\n\t\tisSendAllowed()\n\t\t{\n\t\t\treturn this.$store.getters['orderCreation/isAllowedSubmit'];\n\t\t},\n\t\thasStageTimeLine()\n\t\t{\n\t\t\treturn this.stages.timeline.hasOwnProperty('items') && this.stages.timeline.items.length > 0;\n\t\t},\n\t\thasStageAutomation()\n\t\t{\n\t\t\treturn this.stages.automation.hasOwnProperty('items');\n\t\t},\n\t\thasStageCashBox()\n\t\t{\n\t\t\treturn this.stages.cashbox.hasOwnProperty('tiles');\n\t\t},\n\t\tsubmitButtonLabel()\n\t\t{\n\t\t\treturn this.editable && !this.$root.$app?.compilation\n\t\t\t\t? Loc.getMessage('SALESCENTER_SEND')\n\t\t\t\t: Loc.getMessage('SALESCENTER_RESEND')\n\t\t\t\t;\n\t\t},\n\t\tisFacebookForm()\n\t\t{\n\t\t\treturn this.$root.$app?.connector === 'facebook' && this.$root.$app?.isAllowedFacebookRegion;\n\t\t},\n\t\tisShowDocumentSelector()\n\t\t{\n\t\t\treturn this.$root.$app.hasOwnProperty('documentSelector');\n\t\t},\n\t},\n\tmethods: {\n\t\tinitCounter()\n\t\t{\n\t\t\tthis.counter = 1;\n\t\t},\n\t\tgetTimelineCollection(items)\n\t\t{\n\t\t\tlet list = [];\n\n\t\t\tObject.values(items).forEach((options) => {\n\t\t\t\tlist.push(TimeLineItem.Factory.create(options))\n\t\t\t});\n\n\t\t\treturn list;\n\t\t},\n\t\tgetTileCollection(items)\n\t\t{\n\t\t\tlet tiles = [];\n\n\t\t\tObject.values(items).forEach((options) => {\n\t\t\t\ttiles.push(Tile.Factory.create(options))\n\t\t\t});\n\n\t\t\treturn tiles;\n\t\t},\n\t\tgetTitleItems(items)\n\t\t{\n\t\t\tlet result = [];\n\t\t\titems.forEach((item) => {\n\t\t\t\tif (![Tile.More.type(), Tile.Offer.type()].includes(item.type))\n\t\t\t\t{\n\t\t\t\t\tresult.push(item);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn result;\n\t\t},\n\t\tstageRefresh(e, type)\n\t\t{\n\t\t\tBX.ajax.runComponentAction(\n\t\t\t\t'bitrix:salescenter.app',\n\t\t\t\t'getAjaxData',\n\t\t\t\t{\n\t\t\t\t\tmode: 'class',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\ttype: type,\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t).then(function(response) {\n\t\t\t\tif (response.data)\n\t\t\t\t{\n\t\t\t\t\tthis.refreshTilesByType(response.data, type);\n\t\t\t\t}\n\t\t\t}.bind(this),\n\t\t\tfunction() {\n\t\t\t\tUI.Notification.Center.notify({\n\t\t\t\t\tcontent: Loc.getMessage('SALESCENTER_DATA_UPDATE_ERROR'),\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\trefreshTilesByType(data, type)\n\t\t{\n\t\t\tif(type === 'PAY_SYSTEM')\n\t\t\t{\n\t\t\t\tthis.stages.paysystem.status = data.isSet\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled;\n\t\t\t\tthis.stages.paysystem.tiles = this.getTileCollection(data.items);\n\t\t\t\tthis.stages.paysystem.installed = data.isSet;\n\t\t\t}\n\t\t\telse if(type === 'CASHBOX')\n\t\t\t{\n\t\t\t\tthis.stages.cashbox.status = data.isSet\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled;\n\t\t\t\tthis.stages.cashbox.tiles = this.getTileCollection(data.items);\n\t\t\t\tthis.stages.cashbox.installed = data.isSet;\n\t\t\t\tthis.stages.cashbox.titleItems = this.getTitleItems(data.items);\n\t\t\t}\n\t\t\telse if(type === 'DELIVERY')\n\t\t\t{\n\t\t\t\tthis.stages.delivery.status = data.isSet\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled;\n\t\t\t\tthis.stages.delivery.tiles = this.getTileCollection(data.items);\n\t\t\t\tthis.stages.delivery.installed = data.isInstalled;\n\t\t\t}\n\t\t},\n\t\tonSend(event)\n\t\t{\n\t\t\tthis.$emit('stage-block-send-on-send', event);\n\t\t},\n\t\tonSendCompilationLinkToFacebook(event)\n\t\t{\n\t\t\tthis.$emit('stage-block-send-on-send-compilation-link-to-facebook', event);\n\t\t},\n\t\tchangeProvider(value)\n\t\t{\n\t\t\tthis.$root.$app.sendingMethodDesc.provider = value;\n\t\t\tBX.userOptions.save('salescenter', 'payment_sms_provider_options', 'latest_selected_provider', value);\n\t\t},\n\t\tsaveCollapsedOption(type, value)\n\t\t{\n\t\t\tBX.userOptions.save('salescenter', 'add_payment_collapse_options', type, value);\n\t\t},\n\t\tonProductFormModeChange()\n\t\t{\n\t\t\tconst isCompilationMode = this.$store.getters['orderCreation/isCompilationMode'];\n\t\t\tif (isCompilationMode)\n\t\t\t{\n\t\t\t\tthis.stages.delivery.status = Status.disabled;\n\n\t\t\t\tthis.stages.message.selectedMode = 'compilation';\n\t\t\t\tthis.$root.$app.sendingMethodDesc.text = this.$root.$app.sendingMethodDesc.text_modes.compilation;\n\t\t\t\tthis.stages.message.editorTemplate = this.$root.$app.sendingMethodDesc.text_modes.compilation;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.stages.delivery.status = this.$root.$app.options.deliveryList.isInstalled\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled;\n\n\t\t\t\tthis.stages.message.selectedMode = 'payment';\n\t\t\t\tthis.$root.$app.sendingMethodDesc.text = this.$root.$app.sendingMethodDesc.text_modes.payment;\n\t\t\t\tthis.stages.message.editorTemplate = this.$root.$app.sendingMethodDesc.text_modes.payment;\n\t\t\t}\n\t\t},\n\t},\n\tcreated()\n\t{\n\t\tthis.initCounter();\n\t},\n\tbeforeUpdate()\n\t{\n\t\tthis.initCounter();\n\t},\n\ttemplate: `\n\t\t<div>\n\t\t\t<chat-message-block\n\t\t\t\tv-if=\"editable\"\n\t\t\t\t@stage-block-sms-send-on-change-provider=\"changeProvider\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.message.status\"\n\t\t\t\t:manager=\"stages.message.manager\"\n\t\t\t\t:titleTemplate=\"stages.message.titleTemplate\"\n\t\t\t\t:showHint=\"stages.message.showHint\"\n\t\t\t\t:editorTemplate=\"stages.message.editorTemplate\"\n\t\t\t\t:editorUrl=\"stages.message.editorUrl\"\n\t\t\t\t:selectedMode=\"stages.message.selectedMode\"\n\t\t\t/>\n\t\t\t<product-block\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.product.status\"\n\t\t\t\t:title=\"stages.product.title\"\n\t\t\t\t:hintTitle=\"stages.product.hintTitle\"\n\t\t\t\t@on-product-form-mode-change=\"onProductFormModeChange\"\n\t\t\t/>\n\t\t\t<paysystem-block\n\t\t\t\t@on-stage-tile-collection-slider-close=\"stageRefresh($event, 'PAY_SYSTEM')\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.paysystem.status\"\n\t\t\t\t:tiles=\"stages.paysystem.tiles\"\n\t\t\t\t:installed=\"stages.paysystem.installed\"\n\t\t\t\t:titleItems=\"stages.paysystem.titleItems\"\n\t\t\t\t:initialCollapseState=\"stages.paysystem.initialCollapseState\"\n\t\t\t\t@on-save-collapsed-option=\"saveCollapsedOption\"\n\t\t\t/>\n\t\t\t<cashbox-block\n\t\t\t\tv-if=\"hasStageCashBox\"\n\t\t\t\t@on-stage-tile-collection-slider-close=\"stageRefresh($event, 'CASHBOX')\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.cashbox.status\"\n\t\t\t\t:tiles=\"stages.cashbox.tiles\"\n\t\t\t\t:installed=\"stages.cashbox.installed\"\n\t\t\t\t:titleItems=\"stages.cashbox.titleItems\"\n\t\t\t\t:initialCollapseState=\"stages.cashbox.initialCollapseState\"\n\t\t\t\t@on-save-collapsed-option=\"saveCollapsedOption\"\n\t\t\t/>\n\t\t\t<delivery-block\n\t\t\t\tv-if=\"stages.delivery && !stages.delivery.isHidden\"\n\t\t\t\t@on-stage-tile-collection-slider-close=\"stageRefresh($event, 'DELIVERY')\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.delivery.status\"\n\t\t\t\t:tiles=\"stages.delivery.tiles\"\n\t\t\t\t:installed=\"stages.delivery.installed\"\n\t\t\t\t:isCollapsible=\"true\"\n\t\t\t\t:initialCollapseState=\"stages.delivery.initialCollapseState\"\n\t\t\t\t@on-save-collapsed-option=\"saveCollapsedOption\"\n\t\t\t/>\n\t\t\t<document-selector-block\n\t\t\t\tv-if=\"isShowDocumentSelector\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:templateAddUrl=\"stages.documentSelector.templateAddUrl\"\n\t\t\t/>\n\t\t\t<automation-block\n\t\t\t\tv-if=\"hasStageAutomation\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.automation.status\"\n\t\t\t\t:stageOnOrderPaid=\"stages.automation.stageOnOrderPaid\"\n\t\t\t\t:stageOnDeliveryFinished=\"stages.automation.stageOnDeliveryFinished\"\n\t\t\t\t:items=\"stages.automation.items\"\n\t\t\t\t:initialCollapseState=\"stages.automation.initialCollapseState\"\n\t\t\t\t@on-save-collapsed-option=\"saveCollapsedOption\"\n\t\t\t/>\n\t\t\t<send-block\n\t\t\t\t@on-submit=\"onSend\"\n\t\t\t\t@on-submit-compilation-link-to-facebook=\"onSendCompilationLinkToFacebook\"\n\t\t\t\t:buttonEnabled=\"isSendAllowed\"\n\t\t\t\t:buttonLabel=\"submitButtonLabel\"\n\t\t\t\t:isFacebookForm=\"isFacebookForm\"\n\t\t\t/>\n\t\t\t<timeline-block\n\t\t\t\tv-if=\"hasStageTimeLine\"\n\t\t\t\t:timelineItems=\"stages.timeline.items\"\n\t\t\t/>\n\t\t</div>\n\t`\n};\n","export default {\n\tdata()\n\t{\n\t\treturn {\n\t\t\tisFaded: false,\n\t\t};\n\t},\n\tmounted()\n\t{\n\t\tthis.createPinner();\n\t},\n\tcreated()\n\t{\n\t\tthis.$root.$on('on-start-progress', () => {\n\t\t\tthis.startFade();\n\t\t});\n\n\t\tthis.$root.$on('on-stop-progress', () => {\n\t\t\tthis.endFade();\n\t\t});\n\t},\n\tmethods: {\n\t\tstartFade()\n\t\t{\n\t\t\tthis.isFaded = true;\n\t\t},\n\t\tendFade()\n\t\t{\n\t\t\tthis.isFaded = false;\n\t\t},\n\t\tcreatePinner()\n\t\t{\n\t\t\tlet buttonsPanel = this.$refs['buttonsPanel'];\n\t\t\tif(buttonsPanel)\n\t\t\t{\n\t\t\t\tthis.$root.$el.parentNode.appendChild(buttonsPanel);\n\t\t\t\tnew BX.UI.Pinner(\n\t\t\t\t\tbuttonsPanel,\n\t\t\t\t\t{\n\t\t\t\t\t\tfixBottom: this.$root.$app.isFrame,\n\t\t\t\t\t\tfullWidth: this.$root.$app.isFrame\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t},\n\t\tclose()\n\t\t{\n\t\t\tthis.$root.$app.closeApplication();\n\t\t},\n\t},\n\tcomputed: {\n\t\tisOrderPublicUrlAvailable()\n\t\t{\n\t\t\treturn this.$root.$app.isOrderPublicUrlAvailable;\n\t\t},\n\t\tcompilation()\n\t\t{\n\t\t\treturn this.$root.$app.compilation;\n\t\t},\n\t\twrapperClass()\n\t\t{\n\t\t\treturn {'salescenter-app-wrapper-fade': this.isFaded};\n\t\t},\n\t\twrapperStyle()\n\t\t{\n\t\t\tconst position = BX.pos(this.$root.$el);\n\n\t\t\tlet offset = position.top + 20;\n\t\t\tif(this.$root.$nodes.footer)\n\t\t\t{\n\t\t\t\toffset += BX.pos(this.$root.$nodes.footer).height;\n\t\t\t}\n\t\t\tconst buttonsPanel = this.$refs['buttonsPanel'];\n\t\t\tif(buttonsPanel)\n\t\t\t{\n\t\t\t\toffset += BX.pos(buttonsPanel).height;\n\t\t\t}\n\n\t\t\t//?auto\n\t\t\treturn {'minHeight': 'calc(100vh - ' + offset + 'px)'};\n\t\t},\n\t}\n}\n","import {Loc} from 'main.core';\nimport {Manager} from 'salescenter.manager';\n\nexport default {\n\tdata()\n\t{\n\t\treturn {\n\t\t};\n\t},\n\tmethods: {\n\t\tconnect()\n\t\t{\n\t\t\tconst loader = new BX.Loader({size: 200});\n\t\t\tloader.show(document.body);\n\n\t\t\tBX.Salescenter.Manager.connect({\n\t\t\t\tno_redirect: 'Y',\n\t\t\t\tcontext: this.$root.$app.context,\n\t\t\t}).then(() =>\n\t\t\t{\n\t\t\t\tBX.Salescenter.Manager.loadConfig().then((result) =>\n\t\t\t\t{\n\t\t\t\t\tloader.hide();\n\n\t\t\t\t\tif(result.isSiteExists)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$root.$app.isSiteExists = result.isSiteExists;\n\t\t\t\t\t\tthis.$root.$app.isOrderPublicUrlExists = true;\n\t\t\t\t\t\tthis.$root.$app.orderPublicUrl = result.orderPublicUrl;\n\t\t\t\t\t\tthis.$root.$app.isOrderPublicUrlAvailable = result.isOrderPublicUrlAvailable;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.$emit('on-successfully-connected');\n\t\t\t\t});\n\t\t\t}).catch(function()\n\t\t\t{\n\t\t\t\tloader.hide();\n\t\t\t});\n\t\t},\n\t\tcheckRecycle()\n\t\t{\n\t\t\tManager.openConnectedSite(true);\n\t\t},\n\t\topenConnectedSite()\n\t\t{\n\t\t\tManager.openConnectedSite();\n\t\t},\n\t},\n\tcomputed: {\n\t\tisOrderPageDeleted()\n\t\t{\n\t\t\treturn (this.$root.$app.isSiteExists && !this.isOrderPublicUrlExists);\n\t\t},\n\t\tisOrderPublicUrlExists()\n\t\t{\n\t\t\treturn this.$root.$app.isOrderPublicUrlExists;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"salescenter-app-page-content salescenter-app-start-wrapper\">\n\t\t\t<div class=\"ui-title-1 ui-text-center ui-color-medium\" style=\"margin-bottom: 20px;\">\n\t\t\t\t${Loc.getMessage('SALESCENTER_INFO_TEXT_TOP_2')}\n\t\t\t</div>\n\t\t\t<div class=\"ui-hr ui-mv-25\"></div>\n\t\t\t<template v-if=\"isOrderPublicUrlExists\">\n\t\t\t\t<div class=\"salescenter-title-5 ui-title-5 ui-text-center ui-color-medium\">\n\t\t\t\t\t${Loc.getMessage('SALESCENTER_INFO_TEXT_BOTTOM_PUBLIC')}\n\t\t\t\t</div>\n\t\t\t\t<div style=\"padding-top: 5px;\" class=\"ui-text-center\">\n\t\t\t\t\t<div class=\"ui-btn ui-btn-primary ui-btn-lg\" @click=\"openConnectedSite\">\n\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_INFO_PUBLIC')}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t\t<template v-else-if=\"isOrderPageDeleted\">\n\t\t\t\t<div class=\"salescenter-title-5 ui-title-5 ui-text-center ui-color-medium\">\n\t\t\t\t\t${Loc.getMessage('SALESCENTER_INFO_ORDER_PAGE_DELETED')}\n\t\t\t\t</div>\n\t\t\t\t<div style=\"padding-top: 5px;\" class=\"ui-text-center\">\n\t\t\t\t\t<div\n\t\t\t\t\t\t@click=\"checkRecycle\"\n\t\t\t\t\t\tclass=\"ui-btn ui-btn-primary ui-btn-lg\"\n\t\t\t\t\t>\n\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_CHECK_RECYCLE')}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t\t<template v-else>\n\t\t\t\t<div class=\"salescenter-title-5 ui-title-5 ui-text-center ui-color-medium\">\n\t\t\t\t\t${Loc.getMessage('SALESCENTER_INFO_TEXT_BOTTOM_2')}\n\t\t\t\t</div>\n\t\t\t\t<div style=\"padding-top: 5px;\" class=\"ui-text-center\">\n\t\t\t\t\t<div\n\t\t\t\t\t\t@click=\"connect\"\n\t\t\t\t\t\tclass=\"ui-btn ui-btn-primary ui-btn-lg\"\n\t\t\t\t\t>\n\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_INFO_CREATE')}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div style=\"padding-top: 5px;\" class=\"ui-text-center\">\n\t\t\t\t\t<div\n\t\t\t\t\t\t@click=\"BX.Salescenter.Manager.openHowPayDealWorks(event)\"\n\t\t\t\t\t\tclass=\"ui-btn ui-btn-link ui-btn-lg\"\n\t\t\t\t\t>\n\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_HOW')}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</div>\n\t`,\n}\n","import {Loc} from 'main.core';\nimport {Manager} from \"salescenter.manager\";\n\nexport default {\n\tdata()\n\t{\n\t\treturn {\n\t\t\tisVisible: true,\n\t\t};\n\t},\n\tmethods: {\n\t\thide()\n\t\t{\n\t\t\tthis.isVisible = false;\n\t\t\tthis.$emit('on-hide');\n\t\t},\n\t\topenControlPanel()\n\t\t{\n\t\t\tManager.openControlPanel();\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div v-if=\"isVisible\" class=\"salescenter-app-banner\" >\n\t\t\t<div class=\"salescenter-app-banner-inner\">\n\t\t\t\t<div class=\"salescenter-app-banner-title\">\n\t\t\t\t\t${Loc.getMessage('SALESCENTER_BANNER_TITLE')}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"salescenter-app-banner-content\">\n\t\t\t\t\t<div class=\"salescenter-app-banner-text\">\n\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_BANNER_TEXT')}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"salescenter-app-banner-btn-block\">\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t@click=\"openControlPanel\"\n\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-sm ui-btn-primary salescenter-app-banner-btn-connect\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_BANNER_BTN_CONFIGURE')}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t@click=\"hide\"\n\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-sm ui-btn-link salescenter-app-banner-btn-hide\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_BANNER_BTN_HIDE')}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\t@click=\"hide\"\n\t\t\t\t\tclass=\"salescenter-app-banner-close\"\n\t\t\t\t>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n}\n","import {Vue} from 'ui.vue';\nimport {Vuex} from 'ui.vue.vuex';\nimport {Manager} from 'salescenter.manager';\nimport {Loader} from 'main.loader';\nimport {Loc, Type, Uri} from 'main.core';\nimport {MixinTemplatesType} from './components/templates-type-mixin';\nimport StageBlocksList from './components/chat-receiving-payment/stage-blocks-list';\nimport ComponentMixin from './component-mixin';\nimport Product from './product';\nimport Start from './start';\nimport NoPaymentSystemsBanner from './no-payment-systems';\nimport 'popup';\nimport 'ui.buttons';\nimport 'ui.buttons.icons';\nimport 'ui.forms';\nimport 'ui.fonts.opensans';\nimport 'ui.pinner';\n\nexport default {\n\tmixins: [MixinTemplatesType, ComponentMixin],\n\tdata()\n\t{\n\t\treturn {\n\t\t\tisShowPreview: false,\n\t\t\tisShowPayment: false,\n\t\t\tpageTitle: '',\n\t\t\tcurrentPageId: null,\n\t\t\tactions: [],\n\t\t\tframeCheckShortTimeout: false,\n\t\t\tframeCheckLongTimeout: false,\n\t\t\tisPagesOpen: false,\n\t\t\tisFormsOpen: false,\n\t\t\tshowedPageIds: [],\n\t\t\tloadedPageIds: [],\n\t\t\terrorPageIds: [],\n\t\t\tlastAddedPages: [],\n\t\t\tordersCount: null,\n\t\t\tpaymentsCount: null,\n\t\t\teditedPageId: null,\n\t\t\tcurrentPageTitle: null\n\t\t};\n\t},\n\tcomponents:\n\t\t{\n\t\t\t'product': Product,\n\t\t\t'start': Start,\n\t\t\t'no-payment-systems-banner': NoPaymentSystemsBanner,\n\t\t\t'chat-receiving-payment': StageBlocksList,\n\t\t},\n\tupdated()\n\t{\n\t\tthis.renderErrors();\n\t},\n\tmounted()\n\t{\n\t\tthis.createLoader();\n\t\tthis.$root.$app.fillPages().then(() =>\n\t\t{\n\t\t\tif (this.$root.$app.isWithOrdersMode)\n\t\t\t{\n\t\t\t\tthis.refreshOrdersCount();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.refreshPaymentsCount();\n\t\t\t}\n\n\t\t\tthis.openFirstPage();\n\t\t});\n\n\t\tif(this.$root.$app.isPaymentsLimitReached)\n\t\t{\n\t\t\tlet paymentsLimitStartNode = this.$root.$nodes.paymentsLimit;\n\t\t\tlet paymentsLimitNode = this.$refs['paymentsLimit'];\n\t\t\tfor (let node of paymentsLimitStartNode.children)\n\t\t\t{\n\t\t\t\tpaymentsLimitNode.appendChild(node);\n\t\t\t}\n\t\t}\n\t},\n\tmethods:\n\t\t{\n\t\t\tgetActions()\n\t\t\t{\n\t\t\t\tlet actions = [];\n\t\t\t\tif(this.currentPage)\n\t\t\t\t{\n\t\t\t\t\tactions = [\n\t\t\t\t\t\t{text: this.localize.SALESCENTER_RIGHT_ACTION_COPY_URL, onclick: this.copyUrl},\n\t\t\t\t\t];\n\t\t\t\t\tif(this.currentPage.landingId > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tactions = [\n\t\t\t\t\t\t\t...actions,\n\t\t\t\t\t\t\t{text: this.localize.SALESCENTER_RIGHT_ACTION_HIDE, onclick: this.hidePage},\n\t\t\t\t\t\t];\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tactions = [\n\t\t\t\t\t\t\t...actions,\n\t\t\t\t\t\t\t{text: this.localize.SALESCENTER_RIGHT_ACTION_DELETE, onclick: this.hidePage},\n\t\t\t\t\t\t];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn [\n\t\t\t\t\t...actions,\n\t\t\t\t\t{text: this.localize.SALESCENTER_RIGHT_ACTION_ADD, items: this.getAddPageActions()},\n\t\t\t\t];\n\t\t\t},\n\t\t\tgetAddPageActions(isWebform = false)\n\t\t\t{\n\t\t\t\treturn [\n\t\t\t\t\t{text: this.localize.SALESCENTER_RIGHT_ACTION_ADD_SITE_B24, onclick: () =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.addSite(isWebform);\n\t\t\t\t\t\t}},\n\t\t\t\t\t{text: this.localize.SALESCENTER_RIGHT_ACTION_ADD_CUSTOM, onclick: () =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.showAddUrlPopup({\n\t\t\t\t\t\t\t\tisWebform: isWebform === true ? 'Y' : null\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}},\n\t\t\t\t];\n\t\t\t},\n\t\t\topenFirstPage()\n\t\t\t{\n\t\t\t\tthis.isShowPayment = false;\n\t\t\t\tthis.isShowPreview = true;\n\t\t\t\tif (this.$root.$app.isPaymentCreationAvailable)\n\t\t\t\t{\n\t\t\t\t\tthis.showPaymentForm();\n\t\t\t\t}\n\t\t\t\telse if(this.pages && this.pages.length > 0)\n\t\t\t\t{\n\t\t\t\t\tlet firstWebformPage = false;\n\t\t\t\t\tlet pageToOpen = false;\n\t\t\t\t\tthis.pages.forEach((page) =>\n\t\t\t\t\t{\n\t\t\t\t\t\tif(!pageToOpen)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif(!page.isWebform)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tpageToOpen = page;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tfirstWebformPage = page;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tif(!pageToOpen && firstWebformPage)\n\t\t\t\t\t{\n\t\t\t\t\t\tpageToOpen = firstWebformPage;\n\t\t\t\t\t}\n\t\t\t\t\tif(this.currentPageId !== pageToOpen.id)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.onPageClick(pageToOpen);\n\t\t\t\t\t\tif(pageToOpen.isWebform)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.isFormsOpen = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.isPagesOpen = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.currentPageId = this.pages[0].id;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.pageTitle = null;\n\t\t\t\t\tthis.currentPageId = null;\n\t\t\t\t\tthis.setPageTitle(this.pageTitle);\n\t\t\t\t}\n\t\t\t},\n\t\t\tonPageClick(page)\n\t\t\t{\n\t\t\t\tthis.pageTitle = page.name;\n\t\t\t\tthis.currentPageId = page.id;\n\t\t\t\tthis.hideActionsPopup();\n\t\t\t\tthis.isShowPayment = false;\n\t\t\t\tthis.isShowPreview = true;\n\t\t\t\tthis.setPageTitle(this.pageTitle);\n\t\t\t\tif(page.isFrameDenied !== true)\n\t\t\t\t{\n\t\t\t\t\tif(!this.showedPageIds.includes(page.id))\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.startFrameCheckTimeout();\n\t\t\t\t\t\tthis.showedPageIds.push(page.id);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.onFrameError();\n\t\t\t\t}\n\t\t\t},\n\t\t\tshowActionsPopup({target})\n\t\t\t{\n\t\t\t\tBX.PopupMenu.show('salescenter-app-actions', target, this.getActions(), {\n\t\t\t\t\toffsetLeft: 0,\n\t\t\t\t\toffsetTop: 0,\n\t\t\t\t\tcloseByEsc: true,\n\t\t\t\t});\n\t\t\t},\n\t\t\tshowCompanyContacts({target})\n\t\t\t{\n\t\t\t\tBX.Salescenter.Manager.openSlider(this.$root.$app.options.urlSettingsCompanyContacts, {width: 1200} );\n\t\t\t},\n\t\t\tshowAddPageActionPopup({target}, isWebform = false)\n\t\t\t{\n\t\t\t\tlet menuId = 'salescenter-app-add-page-actions';\n\t\t\t\tif(isWebform)\n\t\t\t\t{\n\t\t\t\t\tmenuId += '-forms';\n\t\t\t\t}\n\t\t\t\tBX.PopupMenu.show(menuId, target, this.getAddPageActions(isWebform), {\n\t\t\t\t\toffsetLeft: target.offsetWidth + 20,\n\t\t\t\t\toffsetTop: -target.offsetHeight - 15,\n\t\t\t\t\tcloseByEsc: true,\n\t\t\t\t\tangle: {\n\t\t\t\t\t\tposition: 'left',\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\thideActionsPopup()\n\t\t\t{\n\t\t\t\tBX.PopupMenu.destroy('salescenter-app-actions');\n\t\t\t\tBX.PopupMenu.destroy('salescenter-app-add-page-actions');\n\t\t\t},\n\t\t\taddSite(isWebform = false)\n\t\t\t{\n\t\t\t\tManager.addSitePage(isWebform).then((result) =>\n\t\t\t\t{\n\t\t\t\t\tlet newPage = result.answer.result.page || false;\n\t\t\t\t\tthis.$root.$app.fillPages().then(() =>\n\t\t\t\t\t{\n\t\t\t\t\t\tif(newPage)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.onPageClick(newPage);\n\t\t\t\t\t\t\tthis.lastAddedPages.push(parseInt(newPage.id));\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.openFirstPage();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\tthis.hideActionsPopup();\n\t\t\t},\n\t\t\tcopyUrl(event)\n\t\t\t{\n\t\t\t\tif(this.currentPage && this.currentPage.url)\n\t\t\t\t{\n\t\t\t\t\tManager.copyUrl(this.currentPage.url, event);\n\t\t\t\t\tthis.hideActionsPopup();\n\t\t\t\t}\n\t\t\t},\n\t\t\teditPage()\n\t\t\t{\n\t\t\t\tif(this.currentPage)\n\t\t\t\t{\n\t\t\t\t\tif(this.currentPage.landingId && this.currentPage.landingId > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tManager.editLandingPage(this.currentPage.landingId, this.currentPage.siteId);\n\t\t\t\t\t\tthis.hideActionsPopup();\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.showAddUrlPopup(this.currentPage);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\thidePage()\n\t\t\t{\n\t\t\t\tif(this.currentPage)\n\t\t\t\t{\n\t\t\t\t\tthis.$root.$app.hidePage(this.currentPage).then(() => {\n\t\t\t\t\t\tthis.openFirstPage();\n\t\t\t\t\t});\n\t\t\t\t\tthis.hideActionsPopup();\n\t\t\t\t}\n\t\t\t},\n\t\t\thideNoPaymentSystemsBanner()\n\t\t\t{\n\t\t\t\tthis.$root.$app.hideNoPaymentSystemsBanner();\n\t\t\t},\n\t\t\tshowAddUrlPopup(newPage)\n\t\t\t{\n\t\t\t\tif(!Type.isPlainObject(newPage))\n\t\t\t\t{\n\t\t\t\t\tnewPage = {};\n\t\t\t\t}\n\t\t\t\tManager.addCustomPage(newPage).then((pageId) =>\n\t\t\t\t{\n\t\t\t\t\tif(!this.isShowPreview)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.isShowPreview = false;\n\t\t\t\t\t}\n\t\t\t\t\tthis.$root.$app.fillPages().then(() => {\n\t\t\t\t\t\tif(pageId && (!Type.isPlainObject(newPage) || !newPage.id))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.lastAddedPages.push(parseInt(pageId));\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(!pageId && newPage)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tpageId = newPage.id;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(pageId)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.pages.forEach((page) =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif(parseInt(page.id) === parseInt(pageId))\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tthis.onPageClick(page);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif(!this.isShowPayment)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.isShowPreview = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\tthis.hideActionsPopup();\n\t\t\t},\n\t\t\tgetPaymentItemTitle(): ?string\n\t\t\t{\n\t\t\t\tif(!this.isOrderPublicUrlAvailable)\n\t\t\t\t{\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t\tif (this.$root.$app.options.mode === 'payment')\n\t\t\t\t{\n\t\t\t\t\treturn this.localize.SALESCENTER_LEFT_PAYMENT_ADD_2;\n\t\t\t\t}\n\n\t\t\t\treturn this.localize.SALESCENTER_LEFT_PAYMENT_AND_DELIVERY;\n\t\t\t},\n\t\t\tshowPaymentForm()\n\t\t\t{\n\t\t\t\tthis.isShowPayment = true;\n\t\t\t\tthis.isShowPreview = false;\n\n\t\t\t\tif (this.compilation)\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tlet title = this.getPaymentItemTitle() || this.localize.SALESCENTER_DEFAULT_TITLE;\n\n\t\t\t\tthis.setPageTitle(title);\n\t\t\t},\n\t\t\tshowOrdersList()\n\t\t\t{\n\t\t\t\tthis.hideActionsPopup();\n\t\t\t\tManager.showOrdersList({\n\t\t\t\t\tcontext: this.$root.$app.context,\n\t\t\t\t\townerId: this.$root.$app.ownerId,\n\t\t\t\t\townerTypeId: this.$root.$app.ownerTypeId,\n\t\t\t\t}).then(() =>\n\t\t\t\t{\n\t\t\t\t\tthis.refreshOrdersCount();\n\t\t\t\t});\n\t\t\t},\n\t\t\tshowPaymentsList()\n\t\t\t{\n\t\t\t\tthis.hideActionsPopup();\n\t\t\t\tManager.showPaymentsList({\n\t\t\t\t\tcontext: this.$root.$app.context,\n\t\t\t\t\townerId: this.$root.$app.ownerId,\n\t\t\t\t\townerTypeId: this.$root.$app.ownerTypeId,\n\t\t\t\t}).then(() =>\n\t\t\t\t{\n\t\t\t\t\tthis.refreshPaymentsCount();\n\t\t\t\t});\n\t\t\t},\n\t\t\tshowOrderAdd()\n\t\t\t{\n\t\t\t\tthis.hideActionsPopup();\n\t\t\t\tManager.showOrderAdd({\n\t\t\t\t\townerId: this.$root.$app.ownerId,\n\t\t\t\t\townerTypeId: this.$root.$app.ownerTypeId,\n\t\t\t\t}).then(() =>\n\t\t\t\t{\n\t\t\t\t\tthis.refreshOrdersCount();\n\t\t\t\t});\n\t\t\t},\n\t\t\tshowCatalog()\n\t\t\t{\n\t\t\t\tthis.hideActionsPopup();\n\t\t\t\tManager.openSlider(`/saleshub/catalog/?sessionId=${this.$root.$app.sessionId}`);\n\t\t\t},\n\t\t\tonFormsClick()\n\t\t\t{\n\t\t\t\tthis.isFormsOpen = !this.isFormsOpen;\n\t\t\t\tthis.hideActionsPopup();\n\t\t\t},\n\t\t\topenControlPanel()\n\t\t\t{\n\t\t\t\tManager.openControlPanel();\n\t\t\t\tthis.hideActionsPopup();\n\t\t\t},\n\t\t\topenHelpDesk()\n\t\t\t{\n\t\t\t\tthis.hideActionsPopup();\n\t\t\t\tManager.openHowItWorks();\n\t\t\t},\n\t\t\tisPageSelected(page)\n\t\t\t{\n\t\t\t\treturn (this.currentPage && this.isShowPreview && this.currentPage.id === page.id);\n\t\t\t},\n\t\t\tsendCompilationLinkToFacebook(event)\n\t\t\t{\n\t\t\t\tthis.send(event, 'n',true)\n\t\t\t},\n\t\t\tsend(event, skipPublicMessage = 'n', sendCompilationLinkToFacebook = false)\n\t\t\t{\n\t\t\t\tif(!this.isAllowedSubmitButton)\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif(this.isShowPayment && !this.isShowStartInfo)\n\t\t\t\t{\n\t\t\t\t\tif (this.$store.getters['orderCreation/isCompilationMode'])\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$root.$app.sendCompilation(event.target, sendCompilationLinkToFacebook);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$root.$app.sendPayment(event.target, skipPublicMessage);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if(this.currentPage && this.currentPage.isActive)\n\t\t\t\t{\n\t\t\t\t\tthis.$root.$app.sendPage(this.currentPage.id);\n\t\t\t\t}\n\t\t\t},\n\t\t\tsetPageTitle(title = null)\n\t\t\t{\n\t\t\t\tif(!title)\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif(this.$root.$nodes.title)\n\t\t\t\t{\n\t\t\t\t\tthis.$root.$nodes.title.innerText = title;\n\t\t\t\t}\n\t\t\t},\n\t\t\tonFrameError()\n\t\t\t{\n\t\t\t\tclearTimeout(this.frameCheckLongTimeout);\n\t\t\t\tif(this.showedPageIds.includes(this.currentPage.id))\n\t\t\t\t{\n\t\t\t\t\tthis.loadedPageIds.push(this.currentPage.id);\n\t\t\t\t}\n\t\t\t\tthis.errorPageIds.push(this.currentPage.id);\n\t\t\t},\n\t\t\tonFrameLoad(pageId)\n\t\t\t{\n\t\t\t\tclearTimeout(this.frameCheckLongTimeout);\n\t\t\t\tif(this.showedPageIds.includes(pageId))\n\t\t\t\t{\n\t\t\t\t\tthis.loadedPageIds.push(pageId);\n\t\t\t\t\tif(this.currentPage && this.currentPage.id === pageId)\n\t\t\t\t\t{\n\t\t\t\t\t\tif(this.frameCheckShortTimeout && !this.currentPage.landingId)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.onFrameError();\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(this.errorPageIds.includes(this.currentPage.id))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.errorPageIds = this.errorPageIds.filter((pageId) =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treturn pageId !== this.currentPage.id;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif(this.frameCheckShortTimeout && this.currentPage && this.currentPage.id === pageId && !this.currentPage.landingId)\n\t\t\t\t{\n\t\t\t\t\tthis.onFrameError();\n\t\t\t\t}\n\t\t\t},\n\t\t\tonSuccessfullyConnected()\n\t\t\t{\n\t\t\t\tthis.$root.$app.fillPages().then(() =>\n\t\t\t\t{\n\t\t\t\t\tthis.openFirstPage();\n\t\t\t\t});\n\t\t\t},\n\t\t\tstartFrameCheckTimeout()\n\t\t\t{\n\t\t\t\t// this is a workaround for denied through X-Frame-Options sources\n\t\t\t\tif(this.frameCheckShortTimeout)\n\t\t\t\t{\n\t\t\t\t\tclearTimeout(this.frameCheckShortTimeout);\n\t\t\t\t\tthis.frameCheckShortTimeout = false;\n\t\t\t\t}\n\t\t\t\tthis.frameCheckShortTimeout = setTimeout(() =>\n\t\t\t\t{\n\t\t\t\t\tthis.frameCheckShortTimeout = false;\n\t\t\t\t}, 500);\n\n\t\t\t\t// to show error on long loading\n\t\t\t\tclearTimeout(this.frameCheckLongTimeout);\n\t\t\t\tthis.frameCheckLongTimeout = setTimeout(() =>\n\t\t\t\t{\n\t\t\t\t\tif(this.currentPage && this.showedPageIds.includes(this.currentPage.id) && !this.loadedPageIds.includes(this.currentPage.id))\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.errorPageIds.push(this.currentPage.id);\n\t\t\t\t\t}\n\t\t\t\t}, 5000);\n\t\t\t},\n\t\t\tgetFrameSource(page)\n\t\t\t{\n\t\t\t\tif(this.showedPageIds.includes(page.id))\n\t\t\t\t{\n\t\t\t\t\tif(page.landingId > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tif(page.isActive)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn (new Uri(page.url)).setQueryParam('theme', '').toString();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\treturn page.url;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn null;\n\t\t\t},\n\t\t\trefreshOrdersCount()\n\t\t\t{\n\t\t\t\tthis.$root.$app.getOrdersCount().then((result) =>\n\t\t\t\t{\n\t\t\t\t\tthis.ordersCount = result.answer.result || null;\n\t\t\t\t}).catch(() =>\n\t\t\t\t{\n\t\t\t\t\tthis.ordersCount = null;\n\t\t\t\t});\n\t\t\t},\n\t\t\trefreshPaymentsCount()\n\t\t\t{\n\t\t\t\tthis.$root.$app.getPaymentsCount().then((result) =>\n\t\t\t\t{\n\t\t\t\t\tthis.paymentsCount = result.answer.result || null;\n\t\t\t\t}).catch(() =>\n\t\t\t\t{\n\t\t\t\t\tthis.paymentsCount = null;\n\t\t\t\t});\n\t\t\t},\n\t\t\trenderErrors()\n\t\t\t{\n\t\t\t\tif (this.isShowPayment && this.order.errors.length > 0)\n\t\t\t\t{\n\t\t\t\t\tlet errorMessages = this.order.errors.map((item) => item.message).join('<br>');\n\t\t\t\t\tlet params = {\n\t\t\t\t\t\tcolor: BX.UI.Alert.Color.DANGER,\n\t\t\t\t\t\ttextCenter: true,\n\t\t\t\t\t\ttext: BX.util.htmlspecialchars(errorMessages)\n\t\t\t\t\t};\n\t\t\t\t\tif (this.$refs.errorBlock.innerHTML.length === 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tparams.animated = true;\n\t\t\t\t\t}\n\t\t\t\t\tlet alert = new BX.UI.Alert(params);\n\t\t\t\t\tthis.$refs.errorBlock.innerHTML = '';\n\t\t\t\t\tthis.$refs.errorBlock.appendChild(alert.getContainer());\n\t\t\t\t}\n\t\t\t\telse if (this.$refs.errorBlock)\n\t\t\t\t{\n\t\t\t\t\tthis.$refs.errorBlock.innerHTML = '';\n\t\t\t\t}\n\t\t\t},\n\t\t\teditMenuItem(event, page)\n\t\t\t{\n\t\t\t\tthis.editedPageId = page.id;\n\t\t\t\tsetTimeout(() =>\n\t\t\t\t{\n\t\t\t\t\tevent.target.parentNode.parentNode.querySelector('input').focus();\n\t\t\t\t}, 50);\n\t\t\t},\n\t\t\tsaveMenuItem(event)\n\t\t\t{\n\t\t\t\tconst pageId = this.editedPageId;\n\t\t\t\tconst name = event.target.value;\n\t\t\t\tlet oldName;\n\t\t\t\tthis.pages.forEach((page) =>\n\t\t\t\t{\n\t\t\t\t\tif(page.id === this.editedPageId)\n\t\t\t\t\t{\n\t\t\t\t\t\toldName = page.name\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tif(pageId > 0 && oldName && name !== oldName && name.length > 0)\n\t\t\t\t{\n\t\t\t\t\tManager.addPage({\n\t\t\t\t\t\tid: pageId,\n\t\t\t\t\t\tname: name,\n\t\t\t\t\t\tanalyticsLabel: 'salescenterUpdatePageTitle',\n\t\t\t\t\t}).then(() =>\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$root.$app.fillPages().then(() => {\n\t\t\t\t\t\t\tif(this.editedPageId === this.currentPageId)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.setPageTitle(name);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthis.editedPageId = null;\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.editedPageId = null;\n\t\t\t\t}\n\t\t\t},\n\t\t\tcreateLoader()\n\t\t\t{\n\t\t\t\tconst loader = new Loader({size: 200});\n\t\t\t\tloader.show(this.$refs['previewLoader']);\n\t\t\t}\n\t\t},\n\n\tcomputed:\n\t\t{\n\t\t\tconfig: () => config,\n\t\t\tcurrentPage()\n\t\t\t{\n\t\t\t\tif(this.currentPageId > 0)\n\t\t\t\t{\n\t\t\t\t\tlet pages = this.application.pages.filter((page) =>\n\t\t\t\t\t{\n\t\t\t\t\t\treturn page.id === this.currentPageId;\n\t\t\t\t\t});\n\t\t\t\t\tif(pages.length > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn pages[0];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn null;\n\t\t\t},\n\n\t\t\tsendButtonLabel()\n\t\t\t{\n\t\t\t\treturn this.editable && !this.$root.$app?.compilation\n\t\t\t\t\t? Loc.getMessage('SALESCENTER_SEND')\n\t\t\t\t\t: Loc.getMessage('SALESCENTER_RESEND')\n\t\t\t\t\t;\n\t\t\t},\n\n\t\t\tpagesSubmenuHeight()\n\t\t\t{\n\t\t\t\tif(this.isPagesOpen)\n\t\t\t\t{\n\t\t\t\t\treturn (this.application.pages.filter((page) =>\n\t\t\t\t\t{\n\t\t\t\t\t\treturn !page.isWebform;\n\t\t\t\t\t}).length * 39 + 30) + 'px';\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\treturn '0px';\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tformsSubmenuHeight()\n\t\t\t{\n\t\t\t\tif(this.isFormsOpen)\n\t\t\t\t{\n\t\t\t\t\treturn (this.application.pages.filter((page) =>\n\t\t\t\t\t{\n\t\t\t\t\t\treturn page.isWebform;\n\t\t\t\t\t}).length * 39 + 30) + 'px';\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\treturn '0px';\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tisFrameError()\n\t\t\t{\n\t\t\t\tif(this.isShowPreview && this.currentPage)\n\t\t\t\t{\n\t\t\t\t\tif(!this.currentPage.isActive)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\telse if(!this.currentPage.landingId && this.errorPageIds.includes(this.currentPage.id))\n\t\t\t\t\t{\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t},\n\n\t\t\tisShowLoader()\n\t\t\t{\n\t\t\t\treturn (\n\t\t\t\t\tthis.isShowPreview &&\n\t\t\t\t\tthis.currentPageId > 0 &&\n\t\t\t\t\tthis.showedPageIds.includes(this.currentPageId) &&\n\t\t\t\t\t!this.loadedPageIds.includes(this.currentPageId)\n\t\t\t\t);\n\t\t\t},\n\n\t\t\tisShowStartInfo()\n\t\t\t{\n\t\t\t\tlet res = false;\n\t\t\t\tif(this.isShowPreview)\n\t\t\t\t{\n\t\t\t\t\tres = (!this.pages || this.pages.length <= 0);\n\t\t\t\t}\n\t\t\t\telse if(this.isShowPayment)\n\t\t\t\t{\n\t\t\t\t\tres = !this.isOrderPublicUrlAvailable;\n\t\t\t\t}\n\n\t\t\t\treturn res;\n\t\t\t},\n\n\t\t\tlastModified()\n\t\t\t{\n\t\t\t\tif(this.currentPage && this.currentPage.modifiedAgo)\n\t\t\t\t{\n\t\t\t\t\treturn this.localize.SALESCENTER_MODIFIED.replace('#AGO#', this.currentPage.modifiedAgo);\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\t\t\t},\n\n\t\t\tlocalize()\n\t\t\t{\n\t\t\t\treturn Vue.getFilteredPhrases('SALESCENTER_');\n\t\t\t},\n\n\t\t\tpages()\n\t\t\t{\n\t\t\t\treturn [...this.application.pages];\n\t\t\t},\n\n\t\t\tisAllowedSubmitButton()\n\t\t\t{\n\t\t\t\tif(this.$root.$app.disableSendButton)\n\t\t\t\t{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tif (this.isShowPreview && this.currentPage && !this.currentPage.isActive)\n\t\t\t\t{\n\t\t\t\t\treturn false\n\t\t\t\t}\n\t\t\t\tif (this.isShowPayment)\n\t\t\t\t{\n\t\t\t\t\treturn this.$store.getters['orderCreation/isAllowedSubmit'];\n\t\t\t\t}\n\t\t\t\treturn this.currentPage;\n\t\t\t},\n\t\t\tshowSubmitCompilationLinkToFacebookButton()\n\t\t\t{\n\t\t\t\tconst isCompilationMode = this.$store.getters['orderCreation/isCompilationMode'];\n\n\t\t\t\treturn this.$root.$app.connector === 'facebook' && this.$root.$app.isAllowedFacebookRegion && isCompilationMode;\n\t\t\t},\n\t\t\tisNoPaymentSystemsBannerVisible()\n\t\t\t{\n\t\t\t\treturn this.$root.$app.options.showPaySystemSettingBanner;\n\t\t\t},\n\t\t\tmode()\n\t\t\t{\n\t\t\t\treturn this.$root.$app.options.mode;\n\t\t\t},\n\t\t\t...Vuex.mapState({\n\t\t\t\tapplication: state => state.application,\n\t\t\t\torder: state => state.orderCreation,\n\t\t\t})\n\t\t},\n\ttemplate: `\n\t\t<div\n\t\t\t:class=\"wrapperClass\"\n\t\t\t:style=\"wrapperStyle\"\n\t\t\tclass=\"salescenter-app-wrapper salescenter-app-chat-wrapper\"\n\t\t>\n\t\t\t<div class=\"ui-sidepanel-sidebar salescenter-app-sidebar\" ref=\"sidebar\">\n\t\t\t\t<ul class=\"ui-sidepanel-menu\" ref=\"sidepanelMenu\">\n\t\t\t\t\t<li v-if=\"this.$root.$app.isPaymentCreationAvailable && !this.compilation\" :class=\"{ 'salescenter-app-sidebar-menu-active': this.isShowPayment}\" class=\"ui-sidepanel-menu-item\" @click=\"showPaymentForm\">\n\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link\">\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">{{getPaymentItemTitle()}}</div>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li v-if=\"this.compilation\" :class=\"{ 'salescenter-app-sidebar-menu-active': this.isShowPayment}\" class=\"ui-sidepanel-menu-item\" @click=\"showPaymentForm\">\n\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link\">\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">{{this.compilation.TITLE_TAB}}</div>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li :class=\"{'salescenter-app-sidebar-menu-active': isPagesOpen}\" class=\"ui-sidepanel-menu-item\">\n\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link\" @click.stop.prevent=\"isPagesOpen = !isPagesOpen;\">\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">{{localize.SALESCENTER_LEFT_PAGES}}</div>\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-toggle-btn\">{{this.isPagesOpen ? this.localize.SALESCENTER_SUBMENU_CLOSE : this.localize.SALESCENTER_SUBMENU_OPEN}}</div>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t<ul class=\"ui-sidepanel-submenu\" :style=\"{height: pagesSubmenuHeight}\">\n\t\t\t\t\t\t\t<li v-for=\"page in pages\" v-if=\"!page.isWebform\" :key=\"page.id\"\n\t\t\t\t\t\t\t:class=\"{\n\t\t\t\t\t\t\t\t'ui-sidepanel-submenu-active': (currentPage && currentPage.id == page.id && isShowPreview),\n\t\t\t\t\t\t\t\t'ui-sidepanel-submenu-edit-mode': (editedPageId === page.id)\n\t\t\t\t\t\t\t}\" class=\"ui-sidepanel-submenu-item\">\n\t\t\t\t\t\t\t\t<a :title=\"page.name\" class=\"ui-sidepanel-submenu-link\" @click.stop=\"onPageClick(page)\">\n\t\t\t\t\t\t\t\t\t<input class=\"ui-sidepanel-input\" :value=\"page.name\" v-on:keyup.enter=\"saveMenuItem($event)\" @blur=\"saveMenuItem($event)\" />\n\t\t\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">{{page.name}}</div>\n\t\t\t\t\t\t\t\t\t<div v-if=\"lastAddedPages.includes(page.id)\" class=\"ui-sidepanel-badge-new\"></div>\n\t\t\t\t\t\t\t\t\t<div class=\"ui-sidepanel-edit-btn\"><span class=\"ui-sidepanel-edit-btn-icon\" @click=\"editMenuItem($event, page);\"></span></div>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li class=\"salescenter-app-helper-nav-item salescenter-app-menu-add-page\" @click.stop=\"showAddPageActionPopup($event)\">\n\t\t\t\t\t\t\t\t<span class=\"salescenter-app-helper-nav-item-text salescenter-app-helper-nav-item-add\">+</span><span class=\"salescenter-app-helper-nav-item-text\">{{localize.SALESCENTER_RIGHT_ACTION_ADD}}</span>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li v-if=\"this.$root.$app.isWithOrdersMode\" @click=\"showOrdersList\">\n\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link\">\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">{{localize.SALESCENTER_LEFT_ORDERS}}</div>\n\t\t\t\t\t\t\t<span class=\"ui-sidepanel-counter\" ref=\"ordersCounter\" v-show=\"ordersCount > 0\">{{ordersCount}}</span>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li v-if=\"this.$root.$app.isWithOrdersMode\" @click=\"showOrderAdd\">\n\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link\">\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">{{localize.SALESCENTER_LEFT_ORDER_ADD}}</div>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li v-if=\"!this.$root.$app.isWithOrdersMode\" @click=\"showPaymentsList\">\n\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link\">\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">{{localize.SALESCENTER_LEFT_PAYMENTS}}</div>\n\t\t\t\t\t\t\t<span class=\"ui-sidepanel-counter\" ref=\"paymentsCounter\" v-show=\"paymentsCount > 0\">{{paymentsCount}}</span>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li v-if=\"this.$root.$app.isCatalogAvailable\" @click=\"showCatalog\">\n\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link\">\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">{{localize.SALESCENTER_LEFT_CATALOG}}</div>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li :class=\"{'salescenter-app-sidebar-menu-active': isFormsOpen}\" class=\"ui-sidepanel-menu-item\">\n\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link\" @click.stop.prevent=\"onFormsClick();\">\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">{{localize.SALESCENTER_LEFT_FORMS_ALL}}</div>\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-toggle-btn\">{{this.isFormsOpen ? this.localize.SALESCENTER_SUBMENU_CLOSE : this.localize.SALESCENTER_SUBMENU_OPEN}}</div>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t<ul class=\"ui-sidepanel-submenu\" :style=\"{height: formsSubmenuHeight}\">\n\t\t\t\t\t\t\t<li v-for=\"page in pages\" v-if=\"page.isWebform\" :key=\"page.id\"\n\t\t\t\t\t\t\t :class=\"{\n\t\t\t\t\t\t\t\t'ui-sidepanel-submenu-active': (currentPage && currentPage.id == page.id && isShowPreview),\n\t\t\t\t\t\t\t\t'ui-sidepanel-submenu-edit-mode': (editedPageId === page.id)\n\t\t\t\t\t\t\t}\" class=\"ui-sidepanel-submenu-item\">\n\t\t\t\t\t\t\t\t<a :title=\"page.name\" class=\"ui-sidepanel-submenu-link\" @click.stop=\"onPageClick(page)\">\n\t\t\t\t\t\t\t\t\t<input class=\"ui-sidepanel-input\" :value=\"page.name\" v-on:keyup.enter=\"saveMenuItem($event)\" @blur=\"saveMenuItem($event)\" />\n\t\t\t\t\t\t\t\t\t<div v-if=\"lastAddedPages.includes(page.id)\" class=\"ui-sidepanel-badge-new\"></div>\n\t\t\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">{{page.name}}</div>\n\t\t\t\t\t\t\t\t\t<div class=\"ui-sidepanel-edit-btn\"><span class=\"ui-sidepanel-edit-btn-icon\" @click=\"editMenuItem($event, page);\"></span></div>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li class=\"salescenter-app-helper-nav-item salescenter-app-menu-add-page\" @click.stop=\"showAddPageActionPopup($event, true)\">\n\t\t\t\t\t\t\t\t<span class=\"salescenter-app-helper-nav-item-text salescenter-app-helper-nav-item-add\">+</span><span class=\"salescenter-app-helper-nav-item-text\">{{localize.SALESCENTER_RIGHT_ACTION_ADD}}</span>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t\t<div class=\"salescenter-app-right-side\">\n\t\t\t\t<div class=\"salescenter-app-page-header\" v-show=\"isShowPreview && !isShowStartInfo\">\n\t\t\t\t\t<div class=\"salescenter-btn-action ui-btn ui-btn-link ui-btn-dropdown ui-btn-xs\" @click=\"showActionsPopup($event)\">{{localize.SALESCENTER_RIGHT_ACTIONS_BUTTON}}</div>\n\t\t\t\t\t<div class=\"salescenter-btn-delimiter salescenter-btn-action\"></div>\n\t\t\t\t\t<div class=\"salescenter-btn-action ui-btn ui-btn-link ui-btn-xs ui-btn-icon-edit\" @click=\"editPage\">{{localize.SALESCENTER_RIGHT_ACTION_EDIT}}</div>\n\t\t\t\t</div>\n\t\t\t\t<start\n\t\t\t\t\tv-if=\"isShowStartInfo\"\n\t\t\t\t\t@on-successfully-connected=\"onSuccessfullyConnected\"\n\t\t\t\t>\n\t\t\t\t</start>\n\t\t\t\t<template v-else-if=\"isFrameError && isShowPreview\">\n\t\t\t\t\t<div class=\"salescenter-app-page-content salescenter-app-lost\">\n\t\t\t\t\t\t<div class=\"salescenter-app-lost-block ui-title-1 ui-text-center ui-color-medium\">{{localize.SALESCENTER_ERROR_TITLE}}</div>\n\t\t\t\t\t\t<div v-if=\"currentPage.isFrameDenied === true\" class=\"salescenter-app-lost-helper ui-color-medium\">{{localize.SALESCENTER_RIGHT_FRAME_DENIED}}</div>\n\t\t\t\t\t\t<div v-else-if=\"currentPage.isActive !== true\" class=\"salescenter-app-lost-helper salescenter-app-not-active ui-color-medium\">{{localize.SALESCENTER_RIGHT_NOT_ACTIVE}}</div>\n\t\t\t\t\t\t<div v-else class=\"salescenter-app-lost-helper ui-color-medium\">{{localize.SALESCENTER_ERROR_TEXT}}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t\t<div v-show=\"isShowPreview && !isShowStartInfo && !isFrameError\" class=\"salescenter-app-page-content\">\n\t\t\t\t\t<template v-for=\"page in pages\">\n\t\t\t\t\t\t<iframe class=\"salescenter-app-demo\" v-show=\"currentPage && currentPage.id == page.id\" :src=\"getFrameSource(page)\" frameborder=\"0\" @error=\"onFrameError(page.id)\" @load=\"onFrameLoad(page.id)\" :key=\"page.id\"></iframe>\n\t\t\t\t\t</template>\n\t\t\t\t\t<div class=\"salescenter-app-demo-overlay\" :class=\"{\n\t\t\t\t\t\t'salescenter-app-demo-overlay-loading': this.isShowLoader\n\t\t\t\t\t}\">\n\t\t\t\t\t\t<div v-show=\"isShowLoader\" ref=\"previewLoader\"></div>\n\t\t\t\t\t\t<div v-if=\"lastModified\" class=\"salescenter-app-demo-overlay-modification\">{{lastModified}}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t    <template v-if=\"this.$root.$app.isPaymentsLimitReached\">\n\t\t\t        <div ref=\"paymentsLimit\" v-show=\"isShowPayment && !isShowStartInfo\"></div>\n\t\t\t\t</template>\n\t\t\t\t<template v-else>\n\t\t\t\t\t<chat-receiving-payment\n\t\t\t\t\t\tv-if=\"isShowPayment && !isShowStartInfo\"\n\t\t\t\t\t\t:key=\"order.basketVersion\"\n\t\t\t\t\t\t@stage-block-send-on-send=\"send($event)\"\n\t\t\t\t\t\t@stage-block-send-on-send-compilation-link-to-facebook=\"sendCompilationLinkToFacebook($event)\"\n\t\t\t\t\t/>\n\t\t        </template>\n\t\t\t</div>\n\t\t\t<div class=\"ui-button-panel-wrapper salescenter-button-panel\" ref=\"buttonsPanel\">\n\t\t\t\t<div class=\"ui-button-panel\">\n\t\t\t\t\t<button :class=\"{'ui-btn-disabled': !this.isAllowedSubmitButton}\" class=\"ui-btn ui-btn-md ui-btn-success\" @click=\"send($event)\">{{sendButtonLabel}}</button>\n\t\t\t\t\t<button\n\t\t\t\t\t\tv-if=\"showSubmitCompilationLinkToFacebookButton\"\n\t\t\t\t\t\t:class=\"{'ui-btn-disabled': !this.isAllowedSubmitButton}\"\n\t\t\t\t\t\tclass=\"ui-btn ui-btn-md ui-btn-light-border\"\n\t\t\t\t\t\t@click=\"sendCompilationLinkToFacebook($event)\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{localize.SALESCENTER_SEND_COMPILATION_LINK_TO_FACEBOOK}}\n\t\t\t\t\t</button>\n\t\t\t\t\t<button class=\"ui-btn ui-btn-md ui-btn-link\" @click=\"close\">{{localize.SALESCENTER_CANCEL}}</button>\n\t\t\t\t\t<button v-if=\"isShowPayment && !isShowStartInfo && !this.$root.$app.isPaymentsLimitReached && this.$root.$app.isWithOrdersMode\" class=\"ui-btn ui-btn-md ui-btn-link btn-send-crm\" @click=\"send($event, 'y')\">{{localize.SALESCENTER_SAVE_ORDER}}</button>\n\t\t\t\t</div>\n\t\t\t\t<div v-if=\"this.order.errors.length > 0\" ref=\"errorBlock\"></div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n}\n","import { Loc, ajax as Ajax } from 'main.core';\nimport { Block } from 'salescenter.component.stage-block';\nimport { StageMixin } from './stage-mixin';\nimport { Error, SenderList, UserAvatar, MessageEdit, MessageView, MessageEditor, MessageControl } from 'salescenter.component.stage-block.sms-message';\nimport { Manager } from \"salescenter.manager\";\nimport { SenderConfig } from \"salescenter.lib\";\nimport {UI} from \"ui.notification\";\n\nconst TYPE_PHONE = 'phone';\nconst TYPE_SENDER = 'sender';\n\nconst SmsMessage = {\n\tprops: {\n\t\tinitSenders: {\n\t\t\ttype: Array,\n\t\t\trequired: true\n\t\t},\n\t\tinitCurrentSenderCode: {\n\t\t\ttype: String,\n\t\t\trequired: false\n\t\t},\n\t\tinitPushedToUseBitrix24Notifications: {\n\t\t\ttype: String,\n\t\t\trequired: false\n\t\t},\n\t\tstatus: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\tcounter: {\n\t\t\ttype: Number,\n\t\t\trequired: true\n\t\t},\n\t\tmanager: {\n\t\t\ttype: Object,\n\t\t\trequired: true\n\t\t},\n\t\tselectedSmsSender: {\n\t\t\ttype: String,\n\t\t\trequired: false\n\t\t},\n\t\tphone: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\tcontactEditorUrl: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\townerTypeId: {\n\t\t\ttype: Number,\n\t\t\trequired: true\n\t\t},\n\t\townerId: {\n\t\t\ttype: Number,\n\t\t\trequired: true\n\t\t},\n\t\ttitleTemplate: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\tshowHint: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true\n\t\t},\n\t\teditorTemplate: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\teditorUrl: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\tselectedMode: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t}\n\t},\n\tmixins: [StageMixin],\n\tcomponents: {\n\t\t'stage-block-item':\tBlock,\n\t\t'sms-error-block': Error,\n\t\t'sms-sender-list-block': SenderList,\n\t\t'sms-user-avatar-block': UserAvatar,\n\t\t'sms-message-edit-block': MessageEdit,\n\t\t'sms-message-view-block': MessageView,\n\t\t'sms-message-editor-block': MessageEditor,\n\t\t'sms-message-control-block': MessageControl,\n\t},\n\tdata()\n\t{\n\t\treturn {\n\t\t\tcontactPhone: this.phone,\n\t\t\tcurrentSenderCode: null,\n\t\t\tsenders: [],\n\t\t\tpushedToUseBitrix24Notifications: null,\n\t\t\tsmsSenderListComponentKey: 0,\n\t\t}\n\t},\n\tcomputed: {\n\t\tconfigForBlock()\n\t\t{\n\t\t\treturn {\n\t\t\t\tcounter: this.counter,\n\t\t\t\tchecked: this.counterCheckedMixin,\n\t\t\t\tshowHint: true,\n\t\t\t\thintClassModifier: 'salescenter-app-payment-by-sms-item-title-info--link-gray',\n\t\t\t}\n\t\t},\n\t\teditor()\n\t\t{\n\t\t\treturn {\n\t\t\t\ttemplate: this.editorTemplate,\n\t\t\t\turl: this.editorUrl\n\t\t\t};\n\t\t},\n\t\tcurrentSender()\n\t\t{\n\t\t\treturn this.senders.find(sender => sender.code === this.currentSenderCode);\n\t\t},\n\t\ttitle()\n\t\t{\n\t\t\treturn this.titleTemplate.replace('#PHONE#', this.contactPhone);\n\t\t},\n\t\terrors()\n\t\t{\n\t\t\tlet result = [];\n\n\t\t\tlet bitrix24ConnectUrlError;\n\n\t\t\tif (!this.currentSender)\n\t\t\t{\n\t\t\t\tfor (let sender of this.senders)\n\t\t\t\t{\n\t\t\t\t\tif (!SenderConfig.needConfigure(sender))\n\t\t\t\t\t{\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tresult.push({\n\t\t\t\t\t\ttext: this.getConnectionErrorText(sender),\n\t\t\t\t\t\tfixer: SenderConfig.openSliderFreeMessages(sender.connectUrl),\n\t\t\t\t\t\tfixText: this.getConnectionErrorFixText(sender),\n\t\t\t\t\t\ttype: TYPE_SENDER\n\t\t\t\t\t});\n\n\t\t\t\t\tif (sender.code === SenderConfig.BITRIX24)\n\t\t\t\t\t{\n\t\t\t\t\t\tbitrix24ConnectUrlError = sender.connectUrl;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (!this.currentSender.isAvailable)\n\t\t\t\t{\n\t\t\t\t\tresult.push({\n\t\t\t\t\t\ttext: Loc.getMessage('SALESCENTER_SEND_ORDER_BY_SMS_' + this.currentSender.code.toUpperCase() + '_NOT_AVAILABLE'),\n\t\t\t\t\t\ttype: TYPE_SENDER\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tif (this.currentSender.isConnected)\n\t\t\t\t\t{\n\t\t\t\t\t\tresult = this.currentSender.usageErrors.map(error => ({ text: error, type: TYPE_SENDER }))\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tresult.push({\n\t\t\t\t\t\t\ttext: this.getConnectionErrorText(this.currentSender),\n\t\t\t\t\t\t\tfixer: this.getFixer(this.currentSender.connectUrl),\n\t\t\t\t\t\t\tfixText: this.getConnectionErrorFixText(this.currentSender),\n\t\t\t\t\t\t\ttype: TYPE_SENDER\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif (this.currentSender.code === SenderConfig.BITRIX24)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tbitrix24ConnectUrlError = this.currentSender.connectUrl;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!this.contactPhone)\n\t\t\t{\n\t\t\t\tif(this.contactEditorUrl.length > 0)\n\t\t\t\t{\n\t\t\t\t\tresult.push({\n\t\t\t\t\t\ttext: Loc.getMessage('SALESCENTER_SEND_ORDER_BY_SMS_SENDER_ALERT_PHONE_EMPTY'),\n\t\t\t\t\t\tfixer: this.getFixer(this.contactEditorUrl),\n\t\t\t\t\t\tfixText: Loc.getMessage('SALESCENTER_SEND_ORDER_BY_SMS_SENDER_ALERT_PHONE_EMPTY_SETTINGS'),\n\t\t\t\t\t\ttype: TYPE_PHONE\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tresult.push({\n\t\t\t\t\t\ttext: Loc.getMessage('SALESCENTER_SEND_ORDER_BY_SMS_SENDER_ALERT_PHONE_EMPTY'),\n\t\t\t\t\t\ttype: TYPE_PHONE\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif (this.pushedToUseBitrix24Notifications === 'N' && bitrix24ConnectUrlError)\n\t\t\t{\n\t\t\t\tthis.getFixer(bitrix24ConnectUrlError)().then(() => this.handleErrorFix());\n\t\t\t\tBX.userOptions.save('salescenter', 'payment_sender_options', 'pushed_to_use_bitrix24_notifications', 'Y');\n\t\t\t\tthis.pushedToUseBitrix24Notifications = 'Y';\n\t\t\t}\n\n\t\t\treturn result;\n\t\t}\n\t},\n\tcreated() {\n\t\tthis.initialize(this.initCurrentSenderCode, this.initSenders, this.initPushedToUseBitrix24Notifications);\n\t},\n\tmethods: {\n\t\tonConfigureContactPhone()\n\t\t{\n\t\t\tthis.$emit('stage-block-sms-message-on-change-contact-phone');\n\t\t},\n\t\tgetConnectionErrorText(sender)\n\t\t{\n\t\t\tconst messageCode = 'SALESCENTER_SEND_ORDER_BY_SMS_' + sender.code.toUpperCase() + '_NOT_CONNECTED_WARNING';\n\t\t\tconst fallback = 'SALESCENTER_SEND_ORDER_BY_SMS_' + sender.code.toUpperCase() + '_NOT_CONNECTED';\n\n\t\t\treturn Loc.getMessage(messageCode) || Loc.getMessage(fallback);\n\t\t},\n\t\tgetConnectionErrorFixText(sender)\n\t\t{\n\t\t\tconst messageCode = 'SALESCENTER_SEND_ORDER_BY_SMS_' + sender.code.toUpperCase() + '_NOT_CONNECTED_FIX';\n\t\t\tconst fallback = 'SALESCENTER_PRODUCT_DISCOUNT_EDIT_PAGE_URL_TITLE';\n\n\t\t\treturn Loc.getMessage(messageCode) || Loc.getMessage(fallback);\n\t\t},\n\t\tgetFixer(fixUrl)\n\t\t{\n\t\t\treturn () => {\n\t\t\t\tif (typeof fixUrl === 'string')\n\t\t\t\t{\n\t\t\t\t\treturn Manager.openSlider(fixUrl, {\n\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\tonLoad: function(event) {\n\t\t\t\t\t\t\t\tconst slider = event.getSlider();\n\t\t\t\t\t\t\t\tconst sliderBx = slider.getFrameWindow().BX;\n\t\t\t\t\t\t\t\tsliderBx.addCustomEvent(\"BX.Crm.EntityEditor:onNothingChanged\", () => slider.close());\n\t\t\t\t\t\t\t\tsliderBx.addCustomEvent(\"BX.Crm.EntityEditor:onCancel\", () => slider.close());\n\t\t\t\t\t\t\t\tsliderBx.addCustomEvent(\"onCrmEntityUpdate\", () => slider.close());\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tif (typeof fixUrl === 'object' && fixUrl !== null)\n\t\t\t\t{\n\t\t\t\t\tif (fixUrl.type === 'ui_helper')\n\t\t\t\t\t{\n\t\t\t\t\t\treturn BX.loadExt('ui.info-helper').then(() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tBX.UI.InfoHelper.show(fixUrl.value);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn Promise.resolve();\n\t\t\t};\n\t\t},\n\t\tonItemHint(e)\n\t\t{\n\t\t\tBX.Salescenter.Manager.openSlider(this.$root.$app.options.urlSettingsCompanyContacts, {width: 1200} );\n\t\t},\n\t\tinitialize(currentSenderCode, senders, pushedToUseBitrix24Notifications)\n\t\t{\n\t\t\tthis.currentSenderCode = currentSenderCode;\n\t\t\tthis.senders = senders;\n\t\t\tthis.pushedToUseBitrix24Notifications = pushedToUseBitrix24Notifications;\n\t\t},\n\t\thandleOnSmsSenderSelected(value)\n\t\t{\n\t\t\tthis.$emit('stage-block-sms-send-on-change-provider', value);\n\t\t},\n\t\thandleErrorFix()\n\t\t{\n\t\t\tAjax.runComponentAction(\"bitrix:salescenter.app\", \"refreshSenderSettings\", {\n\t\t\t\tmode: \"class\"\n\t\t\t})\n\t\t\t\t.then((resolve)=> {\n\t\t\t\t\tif (BX.type.isObject(resolve.data) && Object.values(resolve.data).length > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.initialize(\n\t\t\t\t\t\t\tresolve.data.currentSenderCode,\n\t\t\t\t\t\t\tresolve.data.senders,\n\t\t\t\t\t\t\tresolve.data.pushedToUseBitrix24Notifications\n\t\t\t\t\t\t);\n\t\t\t\t\t\tthis.smsSenderListComponentKey += 1;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t},\n\t\thandlePhoneErrorFix()\n\t\t{\n\t\t\tAjax.runComponentAction(\"bitrix:salescenter.app\", \"refreshContactPhone\", {\n\t\t\t\tmode: \"class\",\n\t\t\t\tdata: {\n\t\t\t\t\tfields:{\n\t\t\t\t\t\townerId: this.ownerId,\n\t\t\t\t\t\townerTypeId: this.ownerTypeId,\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t})\n\t\t\t.then((resolve)=> {\n\t\t\t\tif (BX.type.isObject(resolve.data) && Object.values(resolve.data).length > 0)\n\t\t\t\t{\n\t\t\t\t\tif(this.contactPhone != resolve.data.contactPhone)\n\t\t\t\t\t{\n\t\t\t\t\t\tUI.Notification.Center.notify({\n\t\t\t\t\t\t\tcontent: Loc.getMessage('SALESCENTER_SEND_ORDER_BY_SMS_SENDER_PHONE_CHANGE', {\n\t\t\t\t\t\t\t\t'#TITLE#': resolve.data.title\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.contactPhone = resolve.data.contactPhone;\n\t\t\t\t\tthis.onConfigureContactPhone();\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\thendleSmsErrorBlock(event)\n\t\t{\n\t\t\tif(event.data.type === TYPE_PHONE)\n\t\t\t{\n\t\t\t\tthis.handlePhoneErrorFix()\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.handleErrorFix()\n\t\t\t}\n\t\t},\n\t\topenBitrix24NotificationsHelp(event)\n\t\t{\n\t\t\tBX.Salescenter.Manager.openBitrix24NotificationsHelp(event);\n\t\t},\n\t\topenBitrix24NotificationsWorks(event)\n\t\t{\n\t\t\tBX.Salescenter.Manager.openBitrix24NotificationsWorks(event);\n\t\t},\n\t},\n\t//language=Vue\n\ttemplate: `\n\t\t<stage-block-item\t\t\t\n\t\t\t:config=\"configForBlock\"\n\t\t\t:class=\"statusClassMixin\"\n\t\t\tv-on:on-item-hint=\"onItemHint\"\n\t\t>\n\t\t\t<template v-slot:block-title-title>{{title}}</template>\n\t\t\t<template\n\t\t\t\tv-if=\"showHint\"\n\t\t\t\tv-slot:block-hint-title\n\t\t\t>\n\t\t\t\t${Loc.getMessage('SALESCENTER_LEFT_PAYMENT_COMPANY_CONTACTS_V3')}\n\t\t\t</template>\n\t\t\t<template v-slot:block-container>\n\t\t\t\t<div :class=\"containerClassMixin\" class=\"salescenter-app-payment-by-sms-item-container-offtop\">\n\t\t\t\t\t<sms-error-block\n\t\t\t\t\t\tv-for=\"(error, index) in errors\"\n\t\t\t\t\t\tv-bind:key=\"index\"\n\t\t\t\t\t\tv-on:on-configure=\"hendleSmsErrorBlock($event)\"\n\t\t\t\t\t\t:error=\"error\"\n\t\t\t\t\t>\n\t\t\t\t\t</sms-error-block>\n\t\t\t\t\t\n\t\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container-sms\">\n\t\t\t\t\t\t<sms-user-avatar-block :manager=\"manager\"/>\n\t\t\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container-sms-content\">\n\t\t\t\t\t\t\t<div v-if=\"currentSenderCode === 'bitrix24'\" class=\"salescenter-app-payment-by-sms-item-container-sms-content\">\n\t\t\t\t\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container-sms-content-message\">\n\t\t\t\t\t\t\t\t\t<div contenteditable=\"false\" class=\"salescenter-app-payment-by-sms-item-container-sms-content-message-text\">\n\t\t\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_TEMPLATE_BASED_MESSAGE_WILL_BE_SENT')}\n\t\t\t\t\t\t\t\t\t\t<a @click.stop.prevent=\"openBitrix24NotificationsHelp(event)\" href=\"#\">\n\t\t\t\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_MORE_DETAILS')}\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<sms-message-editor-block v-else :editor=\"editor\" :selectedMode=\"selectedMode\"/>\n\t\t\t\t\t\t\t<template v-if=\"currentSenderCode === 'bitrix24'\">\n\t\t\t\t\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container-sms-content-info\">\n\t\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_SEND_ORDER_VIA_BITRIX24')}\n\t\t\t\t\t\t\t\t\t<span @click=\"openBitrix24NotificationsWorks(event)\">\n\t\t\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_PRODUCT_SET_BLOCK_TITLE_SHORT')}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t<template v-else-if=\"currentSenderCode === 'sms_provider'\">\n\t\t\t\t\t\t\t\t<sms-sender-list-block\n\t\t\t\t\t\t\t\t\t:key=\"smsSenderListComponentKey\"\n\t\t\t\t\t\t\t\t\t:list=\"currentSender.smsSenders\"\n\t\t\t\t\t\t\t\t\t:initSelected=\"selectedSmsSender\"\n\t\t\t\t\t\t\t\t\t:settingUrl=\"currentSender.connectUrl\"\n\t\t\t\t\t\t\t\t\tv-on:on-configure=\"handleErrorFix\"\n\t\t\t\t\t\t\t\t\tv-on:on-selected=\"handleOnSmsSenderSelected\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<template v-slot:sms-sender-list-text-send-from>\n\t\t\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_SEND_ORDER_BY_SMS_SENDER')}\n\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t</sms-sender-list-block>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</stage-block-item>\n\t`\n};\nexport {\n\tSmsMessage\n}\n","import {Loc} from 'main.core';\nimport {StatusTypes as Status} from 'salescenter.component.stage-block';\nimport * as TimeLineItem from 'salescenter.timeline';\nimport {UI} from 'ui.notification';\nimport {MixinTemplatesType} from '../templates-type-mixin';\nimport * as Tile from 'salescenter.tile';\nimport Send from './stage-blocks/send';\nimport {Cashbox} from '../stage-blocks/cashbox';\nimport Product from '../stage-blocks/product';\nimport {DeliveryVuex} from '../stage-blocks/delivery-vuex';\nimport {PaySystem} from '../stage-blocks/paysystem';\nimport {SmsMessage} from '../stage-blocks/sms-message';\nimport {Automation} from '../stage-blocks/automation';\nimport {StageMixin} from '../stage-blocks/stage-mixin';\nimport {TimeLine} from '../stage-blocks/timeline';\n\nexport default {\n\tcomponents: {\n\t\t'send-block': Send,\n\t\t'cashbox-block': Cashbox,\n\t\t'product-block': Product,\n\t\t'delivery-block': DeliveryVuex,\n\t\t'paysystem-block': PaySystem,\n\t\t'automation-block': Automation,\n\t\t'sms-message-block': SmsMessage,\n\t\t'timeline-block': TimeLine,\n\t},\n\tprops: {\n\t\tsendAllowed: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true\n\t\t},\n\t},\n\tdata()\n\t{\n\t\tlet stages =  {\n\t\t\tmessage: {\n\t\t\t\tinitSenders: this.$root.$app.options.senders,\n\t\t\t\tinitCurrentSenderCode: this.$root.$app.options.currentSenderCode,\n\t\t\t\tinitPushedToUseBitrix24Notifications: this.$root.$app.options.pushedToUseBitrix24Notifications,\n\t\t\t\tstatus: Status.complete,\n\t\t\t\tselectedSmsSender: this.$root.$app.sendingMethodDesc.provider,\n\t\t\t\tmanager: this.$root.$app.options.entityResponsible,\n\t\t\t\tphone: this.$root.$app.options.contactPhone,\n\t\t\t\townerId: this.$root.$app.options.ownerId,\n\t\t\t\townerTypeId: this.$root.$app.options.ownerTypeId,\n\t\t\t\tcontactEditorUrl: this.$root.$app.options.contactEditorUrl,\n\t\t\t\ttitleTemplate: this.$root.$app.sendingMethodDesc.sent\n\t\t\t\t\t? Loc.getMessage('SALESCENTER_APP_CONTACT_BLOCK_TITLE_MESSAGE_2_PAST_TIME')\n\t\t\t\t\t: Loc.getMessage('SALESCENTER_APP_CONTACT_BLOCK_TITLE_MESSAGE_2'),\n\t\t\t\tshowHint: this.$root.$app.options.templateMode !== 'view',\n\t\t\t\teditorTemplate: this.$root.$app.sendingMethodDesc.text,\n\t\t\t\teditorUrl: this.$root.$app.orderPublicUrl,\n\t\t\t\tselectedMode: 'payment',\n\t\t\t},\n\t\t\tproduct: {\n\t\t\t\tstatus: this.$root.$app.options.basket && this.$root.$app.options.basket.length > 0\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.current,\n\t\t\t\ttitle: this.$root.$app.options.templateMode === 'view'\n\t\t\t\t\t? Loc.getMessage('SALESCENTER_PRODUCT_BLOCK_TITLE_PAYMENT_VIEW')\n\t\t\t\t\t: Loc.getMessage('SALESCENTER_PRODUCT_BLOCK_TITLE_SHORT'),\n\t\t\t\thintTitle: this.$root.$app.options.templateMode === 'view'\n\t\t\t\t\t? ''\n\t\t\t\t\t: Loc.getMessage('SALESCENTER_PRODUCT_SET_BLOCK_TITLE_SHORT'),\n\t\t\t},\n\t\t\tpaysystem: {\n\t\t\t\tstatus: this.$root.$app.options.paySystemList.isSet\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled,\n\t\t\t\ttiles: this.getTileCollection(this.$root.$app.options.paySystemList.items),\n\t\t\t\tinstalled: this.$root.$app.options.paySystemList.isSet,\n\t\t\t\ttitleItems: this.getTitleItems(this.$root.$app.options.paySystemList.items),\n\t\t\t\tinitialCollapseState: this.$root.$app.options.isPaySystemCollapsed ? this.$root.$app.options.isPaySystemCollapsed === 'Y' : this.$root.$app.options.paySystemList.isSet,\n\t\t\t},\n\t\t\tcashbox: {},\n\t\t\tdelivery: {\n\t\t\t\tstatus: this.$root.$app.options.deliveryList.isInstalled\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled,\n\t\t\t\ttiles: this.getTileCollection(this.$root.$app.options.deliveryList.items),\n\t\t\t\tinstalled: this.$root.$app.options.deliveryList.isInstalled,\n\t\t\t\tinitialCollapseState: this.$root.$app.options.isDeliveryCollapsed ? this.$root.$app.options.isDeliveryCollapsed === 'Y' : this.$root.$app.options.deliveryList.isInstalled,\n\t\t\t},\n\t\t\tautomation: {},\n\t\t};\n\n\t\tif (this.$root.$app.options.cashboxList.hasOwnProperty('items'))\n\t\t{\n\t\t\tstages.cashbox = {\n\t\t\t\tstatus: this.$root.$app.options.cashboxList.isSet\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled,\n\t\t\t\ttiles: this.getTileCollection(this.$root.$app.options.cashboxList.items),\n\t\t\t\tinstalled: this.$root.$app.options.cashboxList.isSet,\n\t\t\t\ttitleItems: this.getTitleItems(this.$root.$app.options.cashboxList.items),\n\t\t\t\tinitialCollapseState: this.$root.$app.options.isCashboxCollapsed ? this.$root.$app.options.isCashboxCollapsed === 'Y' : this.$root.$app.options.cashboxList.isSet,\n\t\t\t};\n\t\t}\n\n\t\tif (this.$root.$app.options.isAutomationAvailable)\n\t\t{\n\t\t\tstages.automation = {\n\t\t\t\tstatus: Status.complete,\n\t\t\t\tstageOnOrderPaid: this.$root.$app.options.stageOnOrderPaid,\n\t\t\t\tstageOnDeliveryFinished: this.$root.$app.options.stageOnDeliveryFinished,\n\t\t\t\titems: this.$root.$app.options.entityStageList,\n\t\t\t\tinitialCollapseState: this.$root.$app.options.isAutomationCollapsed ? this.$root.$app.options.isAutomationCollapsed === 'Y' : false,\n\t\t\t};\n\t\t}\n\n\t\tif (this.$root.$app.options.hasOwnProperty('timeline'))\n\t\t{\n\t\t\tstages.timeline = {\n\t\t\t\titems: this.getTimelineCollection(this.$root.$app.options.timeline)\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (this.$root.$app.options.paySystemList.groups)\n\t\t{\n\t\t\tstages.paysystem.groups = this.getTileGroupsCollection(\n\t\t\t\tthis.$root.$app.options.paySystemList.groups,\n\t\t\t\tstages.paysystem.tiles\n\t\t\t);\n\t\t}\n\n\t\treturn {\n\t\t\tstages: stages,\n\t\t}\n\t},\n\tmixins: [\n\t\tStageMixin,\n\t\tMixinTemplatesType\n\t],\n\tcomputed: {\n\t\thasStageTimeLine()\n\t\t{\n\t\t\treturn this.stages.timeline.hasOwnProperty('items') && this.stages.timeline.items.length > 0;\n\t\t},\n\t\thasStageAutomation()\n\t\t{\n\t\t\treturn this.stages.automation.hasOwnProperty('items');\n\t\t},\n\t\thasStageCashBox()\n\t\t{\n\t\t\treturn this.stages.cashbox.hasOwnProperty('tiles');\n\t\t},\n\t\tsubmitButtonLabel()\n\t\t{\n\t\t\treturn this.editable ? Loc.getMessage('SALESCENTER_SEND') : Loc.getMessage('SALESCENTER_RESEND');\n\t\t},\n\t\tisHideDeliveryStage()\n\t\t{\n\t\t\treturn this.isViewWithoutDelivery();\n\t\t},\n\t},\n\tmethods: {\n\t\tinitCounter()\n\t\t{\n\t\t\tthis.counter = 1;\n\t\t},\n\t\tgetTimelineCollection(items)\n\t\t{\n\t\t\tlet list = [];\n\n\t\t\tObject.values(items).forEach(\n\t\t\t\toptions => list.push(TimeLineItem.Factory.create(options)));\n\n\t\t\treturn list;\n\t\t},\n\t\tgetTileCollection(items)\n\t\t{\n\t\t\tlet tiles = [];\n\t\t\tObject.values(items).forEach(\n\t\t\t\toptions => tiles.push(Tile.Factory.create(options)));\n\n\t\t\treturn tiles;\n\t\t},\n\t\tgetTileGroupsCollection(groups, tiles)\n\t\t{\n\t\t\tconst ret = [];\n\t\t\t\n\t\t\tif (groups instanceof Array)\n\t\t\t{\n\t\t\t\tObject.values(groups).forEach((item) => {\n\t\t\t\t\tconst group = new Tile.Group(item);\n\t\t\t\t\tgroup.fillTiles(tiles);\n\t\t\t\t\tret.push(group);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn ret;\n\t\t},\n\t\tgetTitleItems(items)\n\t\t{\n\t\t\tlet result = [];\n\t\t\titems.forEach((item) => {\n\t\t\t\tif (![Tile.More.type(), Tile.Offer.type()].includes(item.type))\n\t\t\t\t{\n\t\t\t\t\tresult.push(item);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn result;\n\t\t},\n\t\tstageRefresh(e, type)\n\t\t{\n\t\t\tBX.ajax.runComponentAction(\n\t\t\t\t\"bitrix:salescenter.app\",\n\t\t\t\t\"getAjaxData\",\n\t\t\t\t{\n\t\t\t\t\tmode: \"class\",\n\t\t\t\t\tdata: {\n\t\t\t\t\t\ttype: type,\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t).then(function(response) {\n\t\t\t\tif (response.data)\n\t\t\t\t{\n\t\t\t\t\tthis.refreshTilesByType(response.data, type);\n\t\t\t\t}\n\t\t\t}.bind(this),\n\t\t\tfunction() {\n\t\t\t\tUI.Notification.Center.notify({\n\t\t\t\t\tcontent: Loc.getMessage('SALESCENTER_DATA_UPDATE_ERROR'),\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\trefreshTilesByType(data, type)\n\t\t{\n\t\t\tif(type === 'PAY_SYSTEM')\n\t\t\t{\n\t\t\t\tthis.stages.paysystem.status = data.isSet\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled;\n\t\t\t\tthis.stages.paysystem.tiles = this.getTileCollection(data.items);\n\t\t\t\tthis.stages.paysystem.groups = this.getTileGroupsCollection(data.groups, this.stages.paysystem.tiles);\n\t\t\t\tthis.stages.paysystem.installed = data.isSet;\n\t\t\t}\n\t\t\telse if(type === 'CASHBOX')\n\t\t\t{\n\t\t\t\tthis.stages.cashbox.status = data.isSet\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled;\n\t\t\t\tthis.stages.cashbox.tiles = this.getTileCollection(data.items);\n\t\t\t\tthis.stages.cashbox.installed = data.isSet;\n\t\t\t\tthis.stages.cashbox.titleItems = this.getTitleItems(data.items);\n\t\t\t}\n\t\t\telse if(type === 'DELIVERY')\n\t\t\t{\n\t\t\t\tthis.stages.delivery.status = data.isSet\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled;\n\t\t\t\tthis.stages.delivery.tiles = this.getTileCollection(data.items);\n\t\t\t\tthis.stages.delivery.installed = data.isInstalled;\n\t\t\t}\n\t\t},\n\t\tonSend(event)\n\t\t{\n\t\t\tthis.$emit('stage-block-send-on-send', event)\n\t\t},\n\t\tchangeProvider(value)\n\t\t{\n\t\t\tthis.$root.$app.sendingMethodDesc.provider = value;\n\t\t\tBX.userOptions.save('salescenter', 'payment_sms_provider_options', 'latest_selected_provider', value);\n\t\t},\n\t\tchangeContactPhone(event)\n\t\t{\n\t\t\tthis.$emit('stage-block-on-reload', event)\n\t\t},\n\t\tsaveCollapsedOption(type, value)\n\t\t{\n\t\t\tBX.userOptions.save('salescenter', 'add_payment_collapse_options', type, value);\n\t\t},\n\t\tonProductFormModeChange()\n\t\t{\n\t\t\tconst isCompilationMode = this.$store.getters['orderCreation/isCompilationMode'];\n\t\t\tif (isCompilationMode)\n\t\t\t{\n\t\t\t\tthis.stages.delivery.status = Status.disabled;\n\n\t\t\t\tthis.stages.message.selectedMode = 'compilation';\n\t\t\t\tthis.$root.$app.sendingMethodDesc.text = this.$root.$app.sendingMethodDesc.text_modes.compilation;\n\t\t\t\tthis.stages.message.editorTemplate = this.$root.$app.sendingMethodDesc.text_modes.compilation;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.stages.delivery.status = this.$root.$app.options.deliveryList.isInstalled\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled;\n\n\t\t\t\tthis.stages.message.selectedMode = 'payment';\n\t\t\t\tthis.$root.$app.sendingMethodDesc.text = this.$root.$app.sendingMethodDesc.text_modes.payment;\n\t\t\t\tthis.stages.message.editorTemplate = this.$root.$app.sendingMethodDesc.text_modes.payment;\n\t\t\t}\n\t\t},\n\t\tisViewWithoutDelivery()\n\t\t{\n\t\t\treturn (\n\t\t\t\tthis.$root.$app.options.templateMode === 'view'\n\t\t\t\t&& parseInt(this.$root.$app.options.shipmentId) <= 0\n\t\t\t);\n\t\t}\n\t},\n\tcreated()\n\t{\n\t\tthis.initCounter();\n\t},\n\tbeforeUpdate()\n\t{\n\t\tthis.initCounter();\n\t},\n\t//language=Vue\n\ttemplate: `\n\t\t<div>\n\t\t\t<sms-message-block\n\t\t\t\t@stage-block-sms-send-on-change-provider=\"changeProvider\"\n\t\t\t\t@stage-block-sms-message-on-change-contact-phone=\"changeContactPhone\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.message.status\"\n\t\t\t\t:initSenders=\"stages.message.initSenders\"\n\t\t\t\t:initCurrentSenderCode=\"stages.message.initCurrentSenderCode\"\n\t\t\t\t:initPushedToUseBitrix24Notifications=\"stages.message.initPushedToUseBitrix24Notifications\"\n\t\t\t\t:selectedSmsSender=\"stages.message.selectedSmsSender\"\n\t\t\t\t:manager=\"stages.message.manager\"\n\t\t\t\t:phone=\"stages.message.phone\"\n\t\t\t\t:contactEditorUrl=\"stages.message.contactEditorUrl\"\n\t\t\t\t:ownerId=\"stages.message.ownerId\"\n\t\t\t\t:ownerTypeId=\"stages.message.ownerTypeId\"\n\t\t\t\t:titleTemplate=\"stages.message.titleTemplate\"\n\t\t\t\t:showHint=\"stages.message.showHint\"\n\t\t\t\t:editorTemplate=\"stages.message.editorTemplate\"\n\t\t\t\t:editorUrl=\"stages.message.editorUrl\"\n\t\t\t\t:selectedMode=\"stages.message.selectedMode\"\n\t\t\t/>\n\t\t\t<product-block\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.product.status\"\n\t\t\t\t:title=\"stages.product.title\"\n\t\t\t\t:hintTitle=\"stages.product.hintTitle\"\n\t\t\t\t@on-product-form-mode-change=\"onProductFormModeChange\"\n\t\t\t/>\n\t\t\t<paysystem-block\n\t\t\t\tv-if=\"editable\"\n\t\t\t\t@on-stage-tile-collection-slider-close=\"stageRefresh($event, 'PAY_SYSTEM')\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.paysystem.status\"\n\t\t\t\t:tiles=\"stages.paysystem.tiles\"\n\t\t\t\t:installed=\"stages.paysystem.installed\"\n\t\t\t\t:titleItems=\"stages.paysystem.titleItems\"\n\t\t\t\t:initialCollapseState=\"stages.paysystem.initialCollapseState\"\n\t\t\t\t@on-save-collapsed-option=\"saveCollapsedOption\"\n\t\t\t/>\n\t\t\t<cashbox-block\n\t\t\t\tv-if=\"editable && hasStageCashBox\"\n\t\t\t\t@on-stage-tile-collection-slider-close=\"stageRefresh($event, 'CASHBOX')\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.cashbox.status\"\n\t\t\t\t:tiles=\"stages.cashbox.tiles\"\n\t\t\t\t:installed=\"stages.cashbox.installed\"\n\t\t\t\t:titleItems=\"stages.cashbox.titleItems\"\n\t\t\t\t:initialCollapseState=\"stages.cashbox.initialCollapseState\"\n\t\t\t\t@on-save-collapsed-option=\"saveCollapsedOption\"\n\t\t\t/>\n\t\t\t<delivery-block\n\t\t\t\tv-if=\"!isHideDeliveryStage\"\n\t\t\t\t@on-stage-tile-collection-slider-close=\"stageRefresh($event, 'DELIVERY')\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.delivery.status\"\n\t\t\t\t:tiles=\"stages.delivery.tiles\"\n\t\t\t\t:installed=\"stages.delivery.installed\"\n\t\t\t\t:isCollapsible=\"true\"\n\t\t\t\t:initialCollapseState=\"stages.delivery.initialCollapseState\"\n\t\t\t\t@on-save-collapsed-option=\"saveCollapsedOption\"\n\t\t\t/>\n\t\t\t<automation-block\n\t\t\t\tv-if=\"editable && hasStageAutomation\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.automation.status\"\n\t\t\t\t:stageOnOrderPaid=\"stages.automation.stageOnOrderPaid\"\n\t\t\t\t:stageOnDeliveryFinished=\"stages.automation.stageOnDeliveryFinished\"\n\t\t\t\t:items=\"stages.automation.items\"\n\t\t\t\t:initialCollapseState=\"stages.automation.initialCollapseState\"\n\t\t\t\t@on-save-collapsed-option=\"saveCollapsedOption\"\n\t\t\t/>\n\t\t\t<send-block\n\t\t\t\t@on-submit=\"onSend\"\n\t\t\t\t:buttonEnabled=\"sendAllowed\"\n\t\t\t\t:showWhatClientSeesControl=\"!editable\"\n\t\t\t\t:buttonLabel=\"submitButtonLabel\"\n\t\t\t/>\n\t\t\t<timeline-block\n\t\t\t\tv-if=\"hasStageTimeLine\"\n\t\t\t\t:timelineItems=\"stages.timeline.items\"\n\t\t\t/>\n\t\t</div>\n\t`\n};\n","import {Loc} from 'main.core';\nimport {StatusTypes as Status} from 'salescenter.component.stage-block';\nimport * as TimeLineItem from 'salescenter.timeline';\nimport {UI} from 'ui.notification';\nimport {MixinTemplatesType} from '../templates-type-mixin';\nimport * as Tile from 'salescenter.tile';\nimport Send from '../deal-receiving-payment/stage-blocks/send';\nimport {Cashbox} from '../stage-blocks/cashbox';\nimport Product from '../stage-blocks/product';\nimport {PaySystem} from '../stage-blocks/paysystem';\nimport {SmsMessage} from '../stage-blocks/sms-message';\nimport {Automation} from '../stage-blocks/automation';\nimport {StageMixin} from '../stage-blocks/stage-mixin';\nimport {TimeLine} from '../stage-blocks/timeline';\nimport {DocumentSelector} from '../stage-blocks/document-selector';\n\nexport default {\n\tcomponents: {\n\t\t'send-block': Send,\n\t\t'cashbox-block': Cashbox,\n\t\t'product-block': Product,\n\t\t'paysystem-block': PaySystem,\n\t\t'automation-block': Automation,\n\t\t'sms-message-block': SmsMessage,\n\t\t'timeline-block': TimeLine,\n\t\t'document-selector-block': DocumentSelector,\n\t},\n\tprops: {\n\t\tsendAllowed: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true\n\t\t},\n\t},\n\tdata()\n\t{\n\t\tlet stages =  {\n\t\t\tmessage: {\n\t\t\t\tinitSenders: this.$root.$app.options.senders,\n\t\t\t\tinitCurrentSenderCode: this.$root.$app.options.currentSenderCode,\n\t\t\t\tinitPushedToUseBitrix24Notifications: this.$root.$app.options.pushedToUseBitrix24Notifications,\n\t\t\t\tstatus: Status.complete,\n\t\t\t\tselectedSmsSender: this.$root.$app.sendingMethodDesc.provider,\n\t\t\t\tmanager: this.$root.$app.options.entityResponsible,\n\t\t\t\tphone: this.$root.$app.options.contactPhone,\n\t\t\t\townerId: this.$root.$app.options.ownerId,\n\t\t\t\townerTypeId: this.$root.$app.options.ownerTypeId,\n\t\t\t\tcontactEditorUrl: this.$root.$app.options.contactEditorUrl,\n\t\t\t\ttitleTemplate: this.$root.$app.sendingMethodDesc.sent\n\t\t\t\t\t? Loc.getMessage('SALESCENTER_APP_CONTACT_BLOCK_TITLE_MESSAGE_2_PAST_TIME')\n\t\t\t\t\t: Loc.getMessage('SALESCENTER_APP_CONTACT_BLOCK_TITLE_MESSAGE_2'),\n\t\t\t\tshowHint: this.$root.$app.options.templateMode !== 'view',\n\t\t\t\teditorTemplate: this.$root.$app.sendingMethodDesc.text,\n\t\t\t\teditorUrl: this.$root.$app.orderPublicUrl,\n\t\t\t\tselectedMode: 'payment',\n\t\t\t},\n\t\t\tproduct: {\n\t\t\t\tstatus: this.$root.$app.options.basket && this.$root.$app.options.basket.length > 0\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.current,\n\t\t\t\ttitle: this.$root.$app.options.templateMode === 'view'\n\t\t\t\t\t? Loc.getMessage('SALESCENTER_PRODUCT_BLOCK_TITLE_PAYMENT_VIEW')\n\t\t\t\t\t: Loc.getMessage('SALESCENTER_PRODUCT_BLOCK_TITLE_SHORT'),\n\t\t\t\thintTitle: this.$root.$app.options.templateMode === 'view'\n\t\t\t\t\t? ''\n\t\t\t\t\t: Loc.getMessage('SALESCENTER_PRODUCT_SET_BLOCK_TITLE_SHORT'),\n\t\t\t},\n\t\t\tpaysystem: {\n\t\t\t\tstatus: this.$root.$app.options.paySystemList.isSet\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled,\n\t\t\t\ttiles: this.getTileCollection(this.$root.$app.options.paySystemList.items),\n\t\t\t\tinstalled: this.$root.$app.options.paySystemList.isSet,\n\t\t\t\ttitleItems: this.getTitleItems(this.$root.$app.options.paySystemList.items),\n\t\t\t\tinitialCollapseState: this.$root.$app.options.isPaySystemCollapsed ? this.$root.$app.options.isPaySystemCollapsed === 'Y' : this.$root.$app.options.paySystemList.isSet,\n\t\t\t},\n\t\t\tcashbox: {},\n\t\t\tautomation: {},\n\t\t\tdocumentSelector: {\n\t\t\t\tstatus: Status.complete,\n\t\t\t},\n\t\t};\n\n\t\tif (this.$root.$app.options.cashboxList.hasOwnProperty('items'))\n\t\t{\n\t\t\tstages.cashbox = {\n\t\t\t\tstatus: this.$root.$app.options.cashboxList.isSet\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled,\n\t\t\t\ttiles: this.getTileCollection(this.$root.$app.options.cashboxList.items),\n\t\t\t\tinstalled: this.$root.$app.options.cashboxList.isSet,\n\t\t\t\ttitleItems: this.getTitleItems(this.$root.$app.options.cashboxList.items),\n\t\t\t\tinitialCollapseState: this.$root.$app.options.isCashboxCollapsed ? this.$root.$app.options.isCashboxCollapsed === 'Y' : this.$root.$app.options.cashboxList.isSet,\n\t\t\t};\n\t\t}\n\n\t\tif (this.$root.$app.options.isAutomationAvailable)\n\t\t{\n\t\t\tstages.automation = {\n\t\t\t\tstatus: Status.complete,\n\t\t\t\tstageOnOrderPaid: this.$root.$app.options.stageOnOrderPaid,\n\t\t\t\titems: this.$root.$app.options.entityStageList,\n\t\t\t\tinitialCollapseState: this.$root.$app.options.isAutomationCollapsed ? this.$root.$app.options.isAutomationCollapsed === 'Y' : false,\n\t\t\t};\n\t\t}\n\n\t\tif (this.$root.$app.options.hasOwnProperty('timeline'))\n\t\t{\n\t\t\tstages.timeline = {\n\t\t\t\titems: this.getTimelineCollection(this.$root.$app.options.timeline)\n\t\t\t}\n\t\t}\n\n\t\tif (this.$root.$app.hasOwnProperty('documentSelector'))\n\t\t{\n\t\t\tif (this.$root.$app.documentSelector.templateAddUrl)\n\t\t\t{\n\t\t\t\tstages.documentSelector.templateAddUrl = this.$root.$app.documentSelector.templateAddUrl;\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\tstages: stages,\n\t\t}\n\t},\n\tmixins: [\n\t\tStageMixin,\n\t\tMixinTemplatesType\n\t],\n\tcomputed: {\n\t\thasStageTimeLine()\n\t\t{\n\t\t\treturn this.stages.timeline.hasOwnProperty('items') && this.stages.timeline.items.length > 0;\n\t\t},\n\t\thasStageAutomation()\n\t\t{\n\t\t\treturn this.stages.automation.hasOwnProperty('items');\n\t\t},\n\t\thasStageCashBox()\n\t\t{\n\t\t\treturn this.stages.cashbox.hasOwnProperty('tiles');\n\t\t},\n\t\tsubmitButtonLabel()\n\t\t{\n\t\t\treturn this.editable ? Loc.getMessage('SALESCENTER_SEND') : Loc.getMessage('SALESCENTER_RESEND');\n\t\t},\n\t\tisShowDocumentSelector()\n\t\t{\n\t\t\treturn this.$root.$app.hasOwnProperty('documentSelector');\n\t\t},\n\t},\n\tmethods: {\n\t\tinitCounter()\n\t\t{\n\t\t\tthis.counter = 1;\n\t\t},\n\t\tgetTimelineCollection(items)\n\t\t{\n\t\t\tlet list = [];\n\n\t\t\tObject.values(items).forEach(\n\t\t\t\toptions => list.push(TimeLineItem.Factory.create(options)));\n\n\t\t\treturn list;\n\t\t},\n\t\tgetTileCollection(items)\n\t\t{\n\t\t\tlet tiles = [];\n\t\t\tObject.values(items).forEach(\n\t\t\t\toptions => tiles.push(Tile.Factory.create(options)));\n\n\t\t\treturn tiles;\n\t\t},\n\t\tgetTitleItems(items)\n\t\t{\n\t\t\tlet result = [];\n\t\t\titems.forEach((item) => {\n\t\t\t\tif (![Tile.More.type(), Tile.Offer.type()].includes(item.type))\n\t\t\t\t{\n\t\t\t\t\tresult.push(item);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn result;\n\t\t},\n\t\tstageRefresh(e, type)\n\t\t{\n\t\t\tBX.ajax.runComponentAction(\n\t\t\t\t\"bitrix:salescenter.app\",\n\t\t\t\t\"getAjaxData\",\n\t\t\t\t{\n\t\t\t\t\tmode: \"class\",\n\t\t\t\t\tdata: {\n\t\t\t\t\t\ttype: type,\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t).then(function(response) {\n\t\t\t\t\tif (response.data)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.refreshTilesByType(response.data, type);\n\t\t\t\t\t}\n\t\t\t\t}.bind(this),\n\t\t\t\tfunction() {\n\t\t\t\t\tUI.Notification.Center.notify({\n\t\t\t\t\t\tcontent: Loc.getMessage('SALESCENTER_DATA_UPDATE_ERROR'),\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t},\n\t\trefreshTilesByType(data, type)\n\t\t{\n\t\t\tif(type === 'PAY_SYSTEM')\n\t\t\t{\n\t\t\t\tthis.stages.paysystem.status = data.isSet\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled;\n\t\t\t\tthis.stages.paysystem.tiles = this.getTileCollection(data.items);\n\t\t\t\tthis.stages.paysystem.installed = data.isSet;\n\t\t\t}\n\t\t\telse if(type === 'CASHBOX')\n\t\t\t{\n\t\t\t\tthis.stages.cashbox.status = data.isSet\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled;\n\t\t\t\tthis.stages.cashbox.tiles = this.getTileCollection(data.items);\n\t\t\t\tthis.stages.cashbox.installed = data.isSet;\n\t\t\t\tthis.stages.cashbox.titleItems = this.getTitleItems(data.items);\n\t\t\t}\n\t\t},\n\t\tonSend(event)\n\t\t{\n\t\t\tthis.$emit('stage-block-send-on-send', event)\n\t\t},\n\t\tchangeProvider(value)\n\t\t{\n\t\t\tthis.$root.$app.sendingMethodDesc.provider = value;\n\t\t\tBX.userOptions.save('salescenter', 'payment_sms_provider_options', 'latest_selected_provider', value);\n\t\t},\n\t\tsaveCollapsedOption(type, value)\n\t\t{\n\t\t\tBX.userOptions.save('salescenter', 'add_payment_collapse_options', type, value);\n\t\t},\n\t},\n\tcreated()\n\t{\n\t\tthis.initCounter();\n\t},\n\tbeforeUpdate()\n\t{\n\t\tthis.initCounter();\n\t},\n\ttemplate: `\n\t\t<div>\n\t\t\t<sms-message-block\n\t\t\t\t@stage-block-sms-send-on-change-provider=\"changeProvider\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.message.status\"\n\t\t\t\t:initSenders=\"stages.message.initSenders\"\n\t\t\t\t:initCurrentSenderCode=\"stages.message.initCurrentSenderCode\"\n\t\t\t\t:initPushedToUseBitrix24Notifications=\"stages.message.initPushedToUseBitrix24Notifications\"\n\t\t\t\t:selectedSmsSender=\"stages.message.selectedSmsSender\"\n\t\t\t\t:manager=\"stages.message.manager\"\n\t\t\t\t:phone=\"stages.message.phone\"\n\t\t\t\t:contactEditorUrl=\"stages.message.contactEditorUrl\"\n\t\t\t\t:ownerId=\"stages.message.ownerId\"\n\t\t\t\t:ownerTypeId=\"stages.message.ownerTypeId\"\n\t\t\t\t:titleTemplate=\"stages.message.titleTemplate\"\n\t\t\t\t:showHint=\"stages.message.showHint\"\n\t\t\t\t:editorTemplate=\"stages.message.editorTemplate\"\n\t\t\t\t:editorUrl=\"stages.message.editorUrl\"\n\t\t\t\t:selectedMode=\"stages.message.selectedMode\"\n\t\t\t/>\n\t\t\t<product-block\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.product.status\"\n\t\t\t\t:title=\"stages.product.title\"\n\t\t\t\t:hintTitle=\"stages.product.hintTitle\"\n\t\t\t/>\n\t\t\t<paysystem-block\n\t\t\t\tv-if=\"editable\"\n\t\t\t\t@on-stage-tile-collection-slider-close=\"stageRefresh($event, 'PAY_SYSTEM')\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.paysystem.status\"\n\t\t\t\t:tiles=\"stages.paysystem.tiles\"\n\t\t\t\t:installed=\"stages.paysystem.installed\"\n\t\t\t\t:titleItems=\"stages.paysystem.titleItems\"\n\t\t\t\t:initialCollapseState=\"stages.paysystem.initialCollapseState\"\n\t\t\t\t@on-save-collapsed-option=\"saveCollapsedOption\"\n\t\t\t/>\n\t\t\t<cashbox-block\n\t\t\t\tv-if=\"editable && hasStageCashBox\"\n\t\t\t\t@on-stage-tile-collection-slider-close=\"stageRefresh($event, 'CASHBOX')\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.cashbox.status\"\n\t\t\t\t:tiles=\"stages.cashbox.tiles\"\n\t\t\t\t:installed=\"stages.cashbox.installed\"\n\t\t\t\t:titleItems=\"stages.cashbox.titleItems\"\n\t\t\t\t:initialCollapseState=\"stages.cashbox.initialCollapseState\"\n\t\t\t\t@on-save-collapsed-option=\"saveCollapsedOption\"\n\t\t\t/>\n\t\t\t<document-selector-block\n\t\t\t\tv-if=\"isShowDocumentSelector\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:templateAddUrl=\"stages.documentSelector.templateAddUrl\"\n\t\t\t/>\n\t\t\t<automation-block\n\t\t\t\tv-if=\"editable && hasStageAutomation\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.automation.status\"\n\t\t\t\t:stageOnOrderPaid=\"stages.automation.stageOnOrderPaid\"\n\t\t\t\t:items=\"stages.automation.items\"\n\t\t\t\t:initialCollapseState=\"stages.automation.initialCollapseState\"\n\t\t\t\t@on-save-collapsed-option=\"saveCollapsedOption\"\n\t\t\t/>\n\t\t\t<send-block\n\t\t\t\t@on-submit=\"onSend\"\n\t\t\t\t:buttonEnabled=\"sendAllowed\"\n\t\t\t\t:showWhatClientSeesControl=\"!editable\"\n\t\t\t\t:buttonLabel=\"submitButtonLabel\"\n\t\t\t/>\n\t\t\t<timeline-block\n\t\t\t\tv-if=\"hasStageTimeLine\"\n\t\t\t\t:timelineItems=\"stages.timeline.items\"\n\t\t\t/>\n\t\t</div>\n\t`\n};\n","import {Loc} from 'main.core';\n\nexport default {\n\tprops: {\n\t\tbuttonEnabled: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomputed: {\n\t\tbuttonClass()\n\t\t{\n\t\t\treturn {'salescenter-app-payment-by-sms-item-disabled': this.buttonEnabled === false};\n\t\t},\n\t},\n\tmethods: {\n\t\tsubmit(event)\n\t\t{\n\t\t\tthis.$emit('on-submit', event);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div\n\t\t\t:class=\"buttonClass\"\n\t\t\tclass=\"salescenter-app-payment-by-sms-item-show salescenter-app-payment-by-sms-item salescenter-app-payment-by-sms-item-send\"\n\t\t>\n\t\t\t<div class=\"salescenter-app-payment-by-sms-item-counter\">\n\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-counter-rounder\"></div>\n\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-counter-line\"></div>\n\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-counter-number\"></div>\n\t\t\t</div>\n\t\t\t<div class=\"\">\n\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container\">\n\t\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container-payment\">\n\t\t\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container-payment-inline\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t@click=\"submit($event)\"\n\t\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-lg ui-btn-success ui-btn-round\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_CREATE_SHIPMENT')}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`\n}\n","import {Loc} from 'main.core';\nimport {StatusTypes as Status} from 'salescenter.component.stage-block';\nimport {UI} from 'ui.notification';\nimport {MixinTemplatesType} from '../templates-type-mixin';\nimport * as Tile from 'salescenter.tile';\nimport Send from './stage-blocks/send';\nimport Product from '../stage-blocks/product';\nimport {DeliveryVuex} from '../stage-blocks/delivery-vuex';\nimport {Automation} from '../stage-blocks/automation';\nimport {StageMixin} from '../stage-blocks/stage-mixin';\n\nexport default {\n\tcomponents: {\n\t\t'send-block'\t\t\t: Send,\n\t\t'product-block'\t\t\t: Product,\n\t\t'delivery-block'\t\t: DeliveryVuex,\n\t\t'automation-block'\t\t: Automation,\n\t},\n\tprops:{\n\t\tsendAllowed: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true\n\t\t},\n\t},\n\tdata()\n\t{\n\t\tlet stages =  {\n\t\t\tproduct:{\n\t\t\t\tstatus:\t\t\t\tthis.$root.$app.options.basket && this.$root.$app.options.basket.length > 0\n\t\t\t\t\t?\tStatus.complete\n\t\t\t\t\t:\tStatus.current,\n\t\t\t\ttitle: this.$root.$app.options.templateMode === 'view'\n\t\t\t\t\t? Loc.getMessage('SALESCENTER_PRODUCT_BLOCK_TITLE_SHIPMENT_VIEW')\n\t\t\t\t\t: Loc.getMessage('SALESCENTER_PRODUCT_BLOCK_TITLE_SHORT_SHIPMENT'),\n\t\t\t},\n\t\t\tdelivery:{\n\t\t\t\tstatus: \t\t\tthis.$root.$app.options.deliveryList.isInstalled\n\t\t\t\t\t?\tStatus.complete\n\t\t\t\t\t:\tStatus.disabled,\n\t\t\t\ttiles:\t\t\tthis.getTileCollection(\n\t\t\t\t\tthis.$root.$app.options.deliveryList.items),\n\t\t\t\tinstalled:\t\t\tthis.$root.$app.options.deliveryList.isInstalled,\n\t\t\t\tinitialCollapseState: this.$root.$app.options.isDeliveryCollapsed ? this.$root.$app.options.isDeliveryCollapsed === 'Y' : this.$root.$app.options.deliveryList.isInstalled,\n\t\t\t},\n\t\t\tautomation:{}\n\t\t};\n\n\t\tif (this.$root.$app.options.isAutomationAvailable)\n\t\t{\n\t\t\tstages.automation = {\n\t\t\t\tstatus:\t\t\t\t\t\tStatus.complete,\n\t\t\t\tstageOnDeliveryFinished:\tthis.$root.$app.options.stageOnDeliveryFinished,\n\t\t\t\titems:\t\t\t\t\t\tthis.$root.$app.options.entityStageList,\n\t\t\t\tinitialCollapseState: \t\tthis.$root.$app.options.isAutomationCollapsed ? this.$root.$app.options.isAutomationCollapsed === 'Y' : false,\n\t\t\t};\n\t\t}\n\n\t\treturn {\n\t\t\tstages: stages,\n\t\t}\n\t},\n\tmixins:[StageMixin, MixinTemplatesType],\n\tcomputed:\n\t\t{\n\t\t\thasStageAutomation()\n\t\t\t{\n\t\t\t\treturn this.stages.automation.hasOwnProperty('items');\n\t\t\t},\n\t\t\teditableMixin()\n\t\t\t{\n\t\t\t\treturn this.editable === false;\n\t\t\t},\n\t\t\tisViewTemplateMode()\n\t\t\t{\n\t\t\t\treturn this.$root.$app.options.templateMode === 'view';\n\t\t\t},\n\t\t},\n\tmethods:\n\t\t{\n\t\t\tinitCounter()\n\t\t\t{\n\t\t\t\tthis.counter = 1;\n\t\t\t},\n\n\t\t\tgetTileCollection(items)\n\t\t\t{\n\t\t\t\tlet tiles = [];\n\t\t\t\tObject.values(items).forEach(\n\t\t\t\t\toptions => tiles.push(Tile.Factory.create(options)));\n\n\t\t\t\treturn tiles;\n\t\t\t},\n\n\t\t\tgetTitleItems(items)\n\t\t\t{\n\t\t\t\tlet result = [];\n\t\t\t\titems.forEach((item) => {\n\t\t\t\t\tif (![Tile.More.type(), Tile.Offer.type()].includes(item.type))\n\t\t\t\t\t{\n\t\t\t\t\t\tresult.push(item);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\treturn result;\n\t\t\t},\n\n\t\t\tstageRefresh(e, type)\n\t\t\t{\n\t\t\t\tBX.ajax.runComponentAction(\n\t\t\t\t\t\"bitrix:salescenter.app\",\n\t\t\t\t\t\"getAjaxData\",\n\t\t\t\t\t{\n\t\t\t\t\t\tmode: \"class\",\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\ttype: type,\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t).then(function(response) {\n\t\t\t\t\tif (response.data)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.refreshTilesByType(response.data, type);\n\t\t\t\t\t}\n\t\t\t\t}.bind(this),\n\t\t\t\tfunction() {\n\t\t\t\t\tUI.Notification.Center.notify({\n\t\t\t\t\t\tcontent: Loc.getMessage('SALESCENTER_DATA_UPDATE_ERROR'),\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t},\n\n\t\t\trefreshTilesByType(data, type)\n\t\t\t{\n\t\t\t\tif(type === 'DELIVERY')\n\t\t\t\t{\n\t\t\t\t\tthis.stages.delivery.status = \t\tdata.isSet\n\t\t\t\t\t\t?\tStatus.complete\n\t\t\t\t\t\t:\tStatus.disabled;\n\t\t\t\t\tthis.stages.delivery.tiles = \t\tthis.getTileCollection(data.items);\n\t\t\t\t\tthis.stages.delivery.installed = \tdata.isInstalled;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tonSend(event)\n\t\t\t{\n\t\t\t\tthis.$emit('stage-block-send-on-send', event)\n\t\t\t},\n\n\t\t\tsaveCollapsedOption(type, value)\n\t\t\t{\n\t\t\t\tBX.userOptions.save('salescenter', 'add_shipment_collapse_options', type, value);\n\t\t\t},\n\t\t},\n\tcreated()\n\t{\n\t\tthis.initCounter();\n\t},\n\tbeforeUpdate()\n\t{\n\t\tthis.initCounter();\n\t},\n\ttemplate: `\n\t\t<div>\n\t\t\t<product-block \n\t\t\t\t:counter=\t\"counter++\"\n\t\t\t\t:status= \t\"stages.product.status\"\n\t\t\t\t:title=\t\t\"stages.product.title\"\t\t\n\t\t\t\t:hintTitle=\t\t\"''\"\n\t\t\t/>\n\t\t\t\n\t\t\t<delivery-block\t\t\t\t\t\t\tv-on:on-stage-tile-collection-slider-close=\"stageRefresh($event, 'DELIVERY')\"\n\t\t\t\t:counter=\t\"counter++\"\n\t\t\t\t:status=  \t\"stages.delivery.status\"\n\t\t\t\t:tiles=  \t\"stages.delivery.tiles\"\n\t\t\t\t:installed=\t\"stages.delivery.installed\"\n\t\t\t\t:isCollapsible=\"false\"\n\t\t\t\t:initialCollapseState = \"stages.delivery.initialCollapseState\"\n\t\t\t\t@on-save-collapsed-option=\"saveCollapsedOption\"\n\t\t\t/>\n\t\t\t\t\t\t\t\t\t\n\t\t\t<automation-block v-if=\"editable && hasStageAutomation\"\n\t\t\t\t:counter=\t\"counter++\"\n\t\t\t\t:status=\t\"stages.automation.status\"\n\t\t\t\t:stageOnDeliveryFinished=\t\"stages.automation.stageOnDeliveryFinished\"\n\t\t\t\t:items=\t\t\"stages.automation.items\"\n\t\t\t\t:initialCollapseState = \"stages.automation.initialCollapseState\"\n\t\t\t\t@on-save-collapsed-option=\"saveCollapsedOption\"\n\t\t\t/>\n\t\t\t\n\t\t\t<send-block\n\t\t\t\tv-if=\"!isViewTemplateMode\"\n\t\t\t\t@on-submit=\"onSend\"\n\t\t\t\t:buttonEnabled=\"sendAllowed\"\n\t\t\t/>\n\t\t</div>\n\t`\n};\n","import { Vuex } from 'ui.vue.vuex';\nimport StageBlocksList from './components/deal-receiving-payment/stage-blocks-list';\nimport EntityCreatePaymentStages from './components/crm-entity-create-payment/stage-blocks-list';\nimport StageBlocksListShipment from './components/deal-creating-shipment/stage-blocks-list';\nimport ComponentMixin from './component-mixin';\nimport { Loc } from 'main.core';\nimport { MixinTemplatesType } from './components/templates-type-mixin';\nimport Start from './start';\nimport { ModeDictionary } from './const/mode-dictionary';\n\nimport { SenderConfig } from \"salescenter.lib\";\n\nexport default {\n\tmixins: [MixinTemplatesType, ComponentMixin],\n\tdata()\n\t{\n\t\treturn {\n\t\t\tactiveMenuItem: this.$root.$app.options.mode,\n\t\t\tisLoading: false,\n\t\t\tModeDictionary,\n\t\t};\n\t},\n\tcomponents: {\n\t\t'deal-receiving-payment': StageBlocksList,\n\t\t'crm-entity-create-payment': EntityCreatePaymentStages,\n\t\t'deal-creating-shipment': StageBlocksListShipment,\n\t\t'start': Start,\n\t},\n\tmethods: {\n\t\treload(form)\n\t\t{\n\t\t\tif (this.isLoading || !this.editable)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.isLoading = true;\n\t\t\tthis.activeMenuItem = form;\n\t\t\tthis.$emit(\n\t\t\t\t'on-reload',\n\t\t\t\t{\n\t\t\t\t\tcontext: this.$root.$app.options.context,\n\t\t\t\t\torderId: this.$root.$app.orderId,\n\t\t\t\t\townerTypeId: this.$root.$app.options.ownerTypeId,\n\t\t\t\t\townerId: this.$root.$app.options.ownerId,\n\t\t\t\t\ttemplateMode: 'create',\n\t\t\t\t\tmode: this.activeMenuItem,\n\t\t\t\t\tshowModeList: this.$root.$app.options.showModeList,\n\t\t\t\t\tinitialMode: this.$root.$app.options.initialMode,\n\t\t\t\t}\n\t\t\t);\n\t\t},\n\t\tonSuccessfullyConnected()\n\t\t{\n\t\t\tthis.reload(this.activeMenuItem);\n\t\t},\n\t\tonReload()\n\t\t{\n\t\t\tthis.reload(this.activeMenuItem);\n\t\t},\n\t\tsendPaymentDeliveryForm(event)\n\t\t{\n\t\t\tif (!this.isAllowedPaymentDeliverySubmitButton)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.$store.getters['orderCreation/isCompilationMode'])\n\t\t\t{\n\t\t\t\tthis.$root.$app.sendCompilation(event.target);\n\t\t\t}\n\t\t\telse if (this.editable)\n\t\t\t{\n\t\t\t\tthis.$root.$app.sendPayment(event.target);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.$root.$app.resendPayment(event.target);\n\t\t\t}\n\t\t},\n\t\tsendDeliveryForm(event)\n\t\t{\n\t\t\tif (!this.isAllowedDeliverySubmitButton)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.$root.$app.sendShipment(event.target);\n\t\t},\n\t\t// region menu item handlers\n\t\tspecifyCompanyContacts()\n\t\t{\n\t\t\tBX.Salescenter.Manager.openSlider(this.$root.$app.options.urlSettingsCompanyContacts, {width: 1200} );\n\t\t},\n\t\tsuggestScenario(event)\n\t\t{\n\t\t\tBX.Salescenter.Manager.openFeedbackPayOrderForm(event);\n\t\t},\n\t\thowItWorks(event)\n\t\t{\n\t\t\tif (this.mode === ModeDictionary.payment)\n\t\t\t{\n\t\t\t\tBX.Salescenter.Manager.openHowPaySmartInvoiceWorks(event);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tBX.Salescenter.Manager.openHowPayDealWorks(event);\n\t\t},\n\t\topenIntegrationWindow(event)\n\t\t{\n\t\t\tBX.Salescenter.Manager.openIntegrationRequestForm(event);\n\t\t},\n\t\tfreeMessages()\n\t\t{\n\t\t\tlet senders = this.$root.$app.options.senders\n\n\t\t\tlet sender = senders.filter(item => item.code === SenderConfig.BITRIX24)\n\n\t\t\tif(sender.length > 0)\n\t\t\t{\n\t\t\t\tlet fixed = SenderConfig.openSliderFreeMessages(sender[0].connectUrl);\n\t\t\t\tfixed().then()\n\t\t\t}\n\t\t},\n\t\t// endregion\n\t},\n\tcomputed: {\n\t\tmode()\n\t\t{\n\t\t\treturn this.$root.$app.options.mode;\n\t\t},\n\t\ttemplateMode()\n\t\t{\n\t\t\treturn this.$root.$app.options.templateMode;\n\t\t},\n\t\tinitialMode()\n\t\t{\n\t\t\treturn this.$root.$app.options.initialMode;\n\t\t},\n\t\tisAllowedFreeMessagesButton()\n\t\t{\n\t\t\tlet senders = this.$root.$app.options.senders\n\n\t\t\tlet sender = senders.filter(item => item.code === SenderConfig.BITRIX24)\n\n\t\t\tif(sender.length > 0)\n\t\t\t{\n\t\t\t\treturn SenderConfig.needConfigure(sender[0])\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\tisOnlyDeliveryItemVisible()\n\t\t{\n\t\t\treturn (\n\t\t\t\tthis.initialMode === ModeDictionary.delivery\n\t\t\t\t&& this.$root.$app.options.hasOwnProperty('deliveryList')\n\t\t\t\t&& this.$root.$app.options.deliveryList.hasOwnProperty('hasInstallable')\n\t\t\t\t&& this.$root.$app.options.deliveryList.hasInstallable\n\t\t\t);\n\t\t},\n\t\tisPaymentItemVisible()\n\t\t{\n\t\t\treturn this.initialMode === ModeDictionary.payment || this.initialMode === ModeDictionary.paymentDelivery;\n\t\t},\n\t\tisAllowedPaymentDeliverySubmitButton()\n\t\t{\n\t\t\tif (!this.$root.$app.hasClientContactInfo())\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tconst senders = this.$root.$app.options.senders;\n\t\t\tconst filteredSenders = senders.filter(sender => (\n\t\t\t\tsender.code === this.$root.$app.options.currentSenderCode && sender.isConnected\n\t\t\t));\n\t\t\tif (filteredSenders.length === 0)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn this.$store.getters['orderCreation/isAllowedSubmit'];\n\t\t},\n\t\tisAllowedDeliverySubmitButton()\n\t\t{\n\t\t\tconst deliveryId = this.$store.getters['orderCreation/getDeliveryId'];\n\t\t\tif (!deliveryId)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif (!this.$store.getters['orderCreation/isAllowedSubmit'])\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn (deliveryId != this.$root.$app.options.emptyDeliveryServiceId);\n\t\t},\n\t\tisSuggestScenarioMenuItemVisible()\n\t\t{\n\t\t\treturn this.$root.$app.options.isBitrix24;\n\t\t},\n\t\tisRequestIntegrationMenuItemVisible()\n\t\t{\n\t\t\treturn this.$root.$app.options.isIntegrationButtonVisible;\n\t\t},\n\t\tisModeListVisible()\n\t\t{\n\t\t\treturn this.$root.$app.options.showModeList ?? true;\n\t\t},\n\t\tneedShowStoreConnection()\n\t\t{\n\t\t\treturn !this.isOrderPublicUrlAvailable && this.mode !== ModeDictionary.delivery;\n\t\t},\n\t\tsendPaymentDeliveryFormButtonText()\n\t\t{\n\t\t\treturn this.editable ? Loc.getMessage('SALESCENTER_SEND') : Loc.getMessage('SALESCENTER_RESEND');\n\t\t},\n\t\ttitle()\n\t\t{\n\t\t\treturn this.$root.$app.options.title;\n\t\t},\n\t\t// classes region\n\t\tpaymentDeliveryFormSubmitButtonClass()\n\t\t{\n\t\t\treturn {'ui-btn-disabled': !this.isAllowedPaymentDeliverySubmitButton};\n\t\t},\n\t\tdeliveryFormSubmitButtonClass()\n\t\t{\n\t\t\treturn {'ui-btn-disabled': !this.isAllowedDeliverySubmitButton};\n\t\t},\n\t\tpaymentMenuItemClass()\n\t\t{\n\t\t\treturn {\n\t\t\t\t'salescenter-app-sidebar-menu-active': this.activeMenuItem === ModeDictionary.payment,\n\t\t\t};\n\t\t},\n\t\tpaymentDeliveryMenuItemClass()\n\t\t{\n\t\t\treturn {\n\t\t\t\t'salescenter-app-sidebar-menu-active': this.activeMenuItem === ModeDictionary.paymentDelivery,\n\t\t\t};\n\t\t},\n\t\tdeliveryMenuItemClass()\n\t\t{\n\t\t\treturn {\n\t\t\t\t'salescenter-app-sidebar-menu-active': this.activeMenuItem === ModeDictionary.delivery,\n\t\t\t};\n\t\t},\n\t\t// endregion\n\t\t...Vuex.mapState({\n\t\t\tapplication: state => state.application,\n\t\t\torder: state => state.orderCreation,\n\t\t})\n\t},\n\t//language=Vue\n\ttemplate: `\n\t\t<div\n\t\t\t:class=\"wrapperClass\"\n\t\t\t:style=\"wrapperStyle\"\n\t\t\tclass=\"salescenter-app-wrapper\"\n\t\t>\n\t\t\t<div class=\"ui-sidepanel-sidebar salescenter-app-sidebar\">\n\t\t\t\t<ul class=\"ui-sidepanel-menu\">\n\t\t\t\t\t<template v-if=\"templateMode === 'view'\">\n\t\t\t\t\t\t<li class=\"ui-sidepanel-menu-item salescenter-app-sidebar-menu-active\">\n\t\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link\">\n\t\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">{{title}}</div>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t</template>\n\t\t\t\t\t<template v-else-if=\"isModeListVisible\">\n\t\t\t\t\t\t<template v-if=\"isOnlyDeliveryItemVisible\">\n\t\t\t\t\t\t\t<li\n\t\t\t\t\t\t\t\t:class=\"deliveryMenuItemClass\"\n\t\t\t\t\t\t\t\tclass=\"ui-sidepanel-menu-item\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link\">\n\t\t\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">\n\t\t\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_LEFT_CREATE_SHIPMENT_MSGVER_1')}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t\t<li\n\t\t\t\t\t\t\t\tv-if=\"isPaymentItemVisible\"\n\t\t\t\t\t\t\t\t@click=\"reload(ModeDictionary.payment)\"\n\t\t\t\t\t\t\t\t:class=\"paymentMenuItemClass\"\n\t\t\t\t\t\t\t\tclass=\"ui-sidepanel-menu-item\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link\">\n\t\t\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">\n\t\t\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_LEFT_TAKE_PAYMENT')}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</li>\n\n\t\t\t\t\t\t\t<li\n\t\t\t\t\t\t\t\tv-if=\"isPaymentItemVisible\"\n\t\t\t\t\t\t\t\t@click=\"reload(ModeDictionary.paymentDelivery)\"\n\t\t\t\t\t\t\t\t:class=\"paymentDeliveryMenuItemClass\"\n\t\t\t\t\t\t\t\tclass=\"ui-sidepanel-menu-item\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link\">\n\t\t\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">\n\t\t\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_LEFT_TAKE_PAYMENT_AND_CREATE_SHIPMENT')}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</template>\n\n\t\t\t\t\t<li class=\"ui-sidepanel-menu-item ui-sidepanel-menu-item-sm ui-sidepanel-menu-item-separate\">\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t@click=\"specifyCompanyContacts\"\n\t\t\t\t\t\t\tclass=\"ui-sidepanel-menu-link\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_LEFT_PAYMENT_COMPANY_CONTACTS')}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li\n\t\t\t\t\t\tv-if=\"isSuggestScenarioMenuItemVisible\"\n\t\t\t\t\t\tclass=\"ui-sidepanel-menu-item ui-sidepanel-menu-item-sm\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t@click=\"suggestScenario($event)\"\n\t\t\t\t\t\t\tclass=\"ui-sidepanel-menu-link\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_LEFT_PAYMENT_OFFER_SCRIPT')}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li class=\"ui-sidepanel-menu-item ui-sidepanel-menu-item-sm\">\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t@click=\"howItWorks($event)\"\n\t\t\t\t\t\t\tclass=\"ui-sidepanel-menu-link\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_LEFT_PAYMENT_HOW_WORKS')}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li\n\t\t\t\t\t\tv-if=\"isAllowedFreeMessagesButton\"\n\t\t\t\t\t\tclass=\"ui-sidepanel-menu-item ui-sidepanel-menu-item-sm\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t@click=\"freeMessages($event)\"\n\t\t\t\t\t\t\tclass=\"ui-sidepanel-menu-link\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_LEFT_PAYMENT_FREE_MESSAGES')}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li\n\t\t\t\t\t\tv-if=\"isRequestIntegrationMenuItemVisible\"\n\t\t\t\t\t\tclass=\"ui-sidepanel-menu-item ui-sidepanel-menu-item-sm\">\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t@click=\"openIntegrationWindow($event)\"\n\t\t\t\t\t\t\tclass=\"ui-sidepanel-menu-link\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\"\n\t\t\t\t\t\t\t\t data-manager-openIntegrationRequestForm-params=\"sender_page:deal\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_LEFT_PAYMENT_INTEGRATION_MSGVER_2')}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t\t<div class=\"salescenter-app-right-side\">\n\t\t\t\t<start\n\t\t\t\t\tv-if=\"needShowStoreConnection\"\n\t\t\t\t\t@on-successfully-connected=\"onSuccessfullyConnected\"\n\t\t\t\t>\n\t\t\t\t</start>\n\t\t\t\t<template v-else>\n\t\t\t\t\t<deal-receiving-payment\n\t\t\t\t\t\tv-if=\"mode === ModeDictionary.paymentDelivery\"\n\t\t\t\t\t\t@stage-block-on-reload=\"onReload\"\n\t\t\t\t\t\t@stage-block-send-on-send=\"sendPaymentDeliveryForm($event)\"\n\t\t\t\t\t\t:sendAllowed=\"isAllowedPaymentDeliverySubmitButton\"\n\t\t\t\t\t/>\n\t\t\t\t\t<deal-creating-shipment\n\t\t\t\t\t\tv-else-if=\"mode === ModeDictionary.delivery\"\n\t\t\t\t\t\t@stage-block-send-on-send=\"sendDeliveryForm($event)\"\n\t\t\t\t\t\t:sendAllowed=\"isAllowedDeliverySubmitButton\"\n\t\t\t\t\t/>\n\t\t\t\t\t<crm-entity-create-payment\n\t\t\t\t\t\tv-if=\"mode === ModeDictionary.payment\"\n\t\t\t\t\t\t@stage-block-send-on-send=\"sendPaymentDeliveryForm($event)\"\n\t\t\t\t\t\t:sendAllowed=\"isAllowedPaymentDeliverySubmitButton\"\n\t\t\t\t\t/>\n\t\t\t\t</template>\n\t\t\t</div>\n\t\t\t<div class=\"ui-button-panel-wrapper salescenter-button-panel\" ref=\"buttonsPanel\">\n\t\t\t\t<div class=\"ui-button-panel\">\n\t\t\t\t\t<template v-if=\"mode === ModeDictionary.paymentDelivery || mode === ModeDictionary.payment\">\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t@click=\"sendPaymentDeliveryForm($event)\"\n\t\t\t\t\t\t\t:class=\"paymentDeliveryFormSubmitButtonClass\"\n\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-md ui-btn-success\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{sendPaymentDeliveryFormButtonText}}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t@click=\"close\"\n\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-md ui-btn-link\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_CANCEL')}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</template>\n\t\t\t\t\t<template v-else-if=\"mode === ModeDictionary.delivery\">\n\t\t\t\t\t\t<template v-if=\"editable\">\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t@click=\"sendDeliveryForm($event)\"\n\t\t\t\t\t\t\t\t:class=\"deliveryFormSubmitButtonClass\"\n\t\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-md ui-btn-success\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_CREATE_SHIPMENT')}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t@click=\"close\"\n\t\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-md ui-btn-link\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_CANCEL')}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</template>\n\t\t\t\t</div>\n\t\t\t\t<div v-if=\"this.order.errors.length > 0\" ref=\"errorBlock\"></div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n}\n","import { Vue } from 'ui.vue';\nimport { VuexBuilder } from 'ui.vue.vuex';\nimport { rest as Rest } from 'rest.client';\nimport { Manager } from 'salescenter.manager';\nimport { Loader } from 'main.loader';\nimport { Type, Text, Loc, ajax as Ajax, Event, Tag } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { MenuManager, Popup } from 'main.popup';\nimport 'ui.notification';\nimport 'ui.design-tokens';\nimport 'ui.fonts.opensans';\nimport { ApplicationModel } from './models/application';\nimport { OrderCreationModel } from './models/ordercreation';\nimport { DocumentSelectorModel } from './models/document-selector';\nimport { ContextDictionary } from './const/context-dictionary';\nimport Chat from './chat';\nimport Deal from './deal';\nimport './css/component.css';\n\nconst instances = new Map();\n\nexport class App\n{\n\tstatic getByDialogId(dialogId: string): ?App\n\t{\n\t\treturn instances.get(dialogId) || null;\n\t}\n\n\tconstructor(options = {\n\t\tdialogId: null,\n\t\tsessionId: null,\n\t\tlineId: null,\n\t\torderAddPullTag: null,\n\t\tlandingPublicationPullTag: null,\n\t\tlandingUnPublicationPullTag: null,\n\t\tisFrame: true,\n\t\tisOrderPublicUrlAvailable: false,\n\t\tisCatalogAvailable: false,\n\t\tisOrderPublicUrlExists: false,\n\t\tisWithOrdersMode: true,\n\t\tcompilation: null,\n\t\tdocumentSelector: DocumentSelectorParams|null,\n\t})\n\t{\n\t\tthis.slider = BX.SidePanel.Instance.getTopSlider();\n\t\tthis.dialogId = options.dialogId;\n\t\tthis.sessionId = parseInt(options.sessionId);\n\t\tthis.lineId = parseInt(options.lineId);\n\t\tthis.orderAddPullTag = options.orderAddPullTag;\n\t\tthis.landingPublicationPullTag = options.landingPublicationPullTag;\n\t\tthis.landingUnPublicationPullTag = options.landingUnPublicationPullTag;\n\t\tthis.paySystemList = options.paySystemList;\n\t\tthis.cashboxList = options.cashboxList;\n\t\tthis.options = options;\n\t\tthis.isProgress = false;\n\t\tthis.fillPagesTimeout = false;\n\t\tthis.disableSendButton = false;\n\t\tthis.context = '';\n\t\tthis.fillPagesQueue = [];\n\t\tthis.ownerTypeId = '';\n\t\tthis.ownerId = '';\n\t\tthis.orderId = parseInt(options.orderId);\n\t\tthis.stageOnOrderPaid = null;\n\t\tthis.stageOnDeliveryFinished = null;\n\t\tthis.sendingMethod = '';\n\t\tthis.sendingMethodDesc = {};\n\t\tthis.orderPublicUrl = '';\n\t\tthis.fileControl = options.fileControl;\n\t\tthis.currencyCode = options.currencyCode;\n\t\tthis.compilation = null;\n\t\tthis.newCompilationId = null;\n\t\tthis.assignedById = options.assignedById;\n\n\t\tif(Type.isString(options.stageOnOrderPaid))\n\t\t{\n\t\t\tthis.stageOnOrderPaid = options.stageOnOrderPaid;\n\t\t}\n\n\t\tif(Type.isString(options.stageOnDeliveryFinished))\n\t\t{\n\t\t\tthis.stageOnDeliveryFinished = options.stageOnDeliveryFinished;\n\t\t}\n\n\t\tif(Type.isBoolean(options.isFrame))\n\t\t{\n\t\t\tthis.isFrame = options.isFrame;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.isFrame = true;\n\t\t}\n\n\t\tif(Type.isBoolean(options.isOrderPublicUrlAvailable))\n\t\t{\n\t\t\tthis.isOrderPublicUrlAvailable = options.isOrderPublicUrlAvailable;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.isOrderPublicUrlAvailable = false;\n\t\t}\n\n\t\tif(Type.isBoolean(options.isOrderPublicUrlExists))\n\t\t{\n\t\t\tthis.isOrderPublicUrlExists = options.isOrderPublicUrlExists;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.isOrderPublicUrlExists = false;\n\t\t}\n\n\t\tif(Type.isString(options.orderPublicUrl))\n\t\t{\n\t\t\tthis.orderPublicUrl = options.orderPublicUrl;\n\t\t}\n\n\t\tif(Type.isBoolean(options.isCatalogAvailable))\n\t\t{\n\t\t\tthis.isCatalogAvailable = options.isCatalogAvailable;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.isCatalogAvailable = false;\n\t\t}\n\n\t\tif(Type.isBoolean(options.isWithOrdersMode))\n\t\t{\n\t\t\tthis.isWithOrdersMode = options.isWithOrdersMode;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.isWithOrdersMode = false;\n\t\t}\n\n\t\tif(Type.isBoolean(options.disableSendButton))\n\t\t{\n\t\t\tthis.disableSendButton = options.disableSendButton;\n\t\t}\n\n\t\tif(options.ownerTypeId)\n\t\t{\n\t\t\tthis.ownerTypeId = options.ownerTypeId;\n\t\t}\n\n\t\tif(options.ownerId)\n\t\t{\n\t\t\tthis.ownerId = options.ownerId;\n\t\t}\n\n\t\tif(Type.isString(options.context) && options.context.length > 0)\n\t\t{\n\t\t\tthis.context = options.context;\n\t\t}\n\t\telse if(this.sessionId && this.dialogId)\n\t\t{\n\t\t\tthis.context = ContextDictionary.imOpenlines;\n\t\t}\n\n\t\tif(Type.isBoolean(options.isPaymentsLimitReached))\n\t\t{\n\t\t\tthis.isPaymentsLimitReached = options.isPaymentsLimitReached;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.isPaymentsLimitReached = false;\n\t\t}\n\n\t\tif(!Type.isUndefined(options.sendingMethod))\n\t\t{\n\t\t\tthis.sendingMethod = options.sendingMethod;\n\t\t}\n\t\tif(!Type.isUndefined(options.sendingMethodDesc))\n\t\t{\n\t\t\tthis.sendingMethodDesc = this.options.sendingMethodDesc;\n\t\t}\n\n\t\tif(Type.isObject(options.compilation))\n\t\t{\n\t\t\tthis.compilation = options.compilation;\n\t\t}\n\n\t\tthis.isPaymentCreationAvailable = (\n\t\t\t(this.sessionId > 0 && this.dialogId.length > 0) || (this.ownerTypeId && this.ownerId)\n\t\t);\n\t\tthis.connector = Type.isString(options.connector) ? options.connector : '';\n\n\t\tthis.isAllowedFacebookRegion = Type.isBoolean(options.isAllowedFacebookRegion) ? options.isAllowedFacebookRegion : false;\n\n\t\tif (Type.isPlainObject(options.documentSelector))\n\t\t{\n\t\t\tthis.documentSelector = options.documentSelector;\n\t\t\tthis.documentSelector.paymentId = this.options.paymentId;\n\t\t}\n\n\t\tEvent.ready(() =>\n\t\t{\n\t\t\tthis.pull = BX.PULL;\n\t\t\tthis.initPull();\n\t\t\tthis.isSiteExists = Manager.isSiteExists;\n\t\t});\n\n\t\tApp.initStore()\n\t\t\t.then((result) => this.initTemplate(result))\n\t\t\t.catch((error) => App.showError(error))\n\t\t;\n\n\t\tEventEmitter.subscribe(window.parent, 'onSendCompilationChatButtonClick', this.sendCompilation.bind(this));\n\n\t\tinstances.set(this.dialogId, this);\n\t}\n\n\tstatic initStore()\n\t{\n\t\tconst builder = new VuexBuilder();\n\n\t\treturn builder.addModel(ApplicationModel.create())\n\t\t\t.addModel(OrderCreationModel.create())\n\t\t\t.addModel(DocumentSelectorModel.create())\n\t\t\t.useNamespace(true)\n\t\t\t.build();\n\t}\n\n\tinitPull()\n\t{\n\t\tif(this.pull)\n\t\t{\n\t\t\tif(Type.isString(this.orderAddPullTag))\n\t\t\t{\n\t\t\t\tthis.pull.subscribe({\n\t\t\t\t\tmoduleId: 'salescenter',\n\t\t\t\t\tcommand: this.orderAddPullTag,\n\t\t\t\t\tcallback: (params) =>\n\t\t\t\t\t{\n\t\t\t\t\t\tif(parseInt(params.sessionId) === this.sessionId && params.orderId > 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tManager.showOrdersListAfterCreate(params.orderId);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif(Type.isString(this.landingPublicationPullTag))\n\t\t\t{\n\t\t\t\tthis.pull.subscribe({\n\t\t\t\t\tmoduleId: 'salescenter',\n\t\t\t\t\tcommand: this.landingPublicationPullTag,\n\t\t\t\t\tcallback: (params) =>\n\t\t\t\t\t{\n\t\t\t\t\t\tif(parseInt(params.landingId) > 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.fillPages();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(params.hasOwnProperty('isOrderPublicUrlAvailable') && Type.isBoolean(params.isOrderPublicUrlAvailable))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.isOrderPublicUrlAvailable = params.isOrderPublicUrlAvailable;\n\t\t\t\t\t\t\tthis.isOrderPublicUrlExists = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif(Type.isString(this.landingUnPublicationPullTag))\n\t\t\t{\n\t\t\t\tthis.pull.subscribe({\n\t\t\t\t\tmoduleId: 'salescenter',\n\t\t\t\t\tcommand: this.landingUnPublicationPullTag,\n\t\t\t\t\tcallback: (params) =>\n\t\t\t\t\t{\n\t\t\t\t\t\tif(parseInt(params.landingId) > 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.fillPages();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(params.hasOwnProperty('isOrderPublicUrlAvailable') && Type.isBoolean(params.isOrderPublicUrlAvailable))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.isOrderPublicUrlAvailable = params.isOrderPublicUrlAvailable;\n\t\t\t\t\t\t\tthis.isOrderPublicUrlExists = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\tinitTemplate(result)\n\t{\n\t\treturn new Promise((resolve) =>\n\t\t{\n\t\t\tconst context = this;\n\t\t\tthis.store = result.store;\n\n\t\t\tthis.templateEngine = Vue.create({\n\t\t\t\tel: document.getElementById('salescenter-app-root'),\n\t\t\t\tcomponents: {\n\t\t\t\t\t'chat': Chat,\n\t\t\t\t\t'deal': Deal,\n\t\t\t\t},\n\t\t\t\ttemplate:\n\t\t\t\t\tthis.isPaymentMode()\n\t\t\t\t\t\t? `<deal :key=\"componentKey\" @on-reload=\"reload\"/>`\n\t\t\t\t\t\t: `<chat :key=\"componentKey\" @on-reload=\"reload\"/>`\n\t\t\t\t\t,\n\t\t\t\tstore: this.store,\n\t\t\t\tcreated()\n\t\t\t\t{\n\t\t\t\t\tthis.$app = context;\n\t\t\t\t\tthis.$nodes = {\n\t\t\t\t\t\tfooter: document.getElementById('footer'),\n\t\t\t\t\t\tleftPanel: document.getElementById('left-panel'),\n\t\t\t\t\t\ttitle: document.getElementById('pagetitle'),\n\t\t\t\t\t\tpaymentsLimit: document.getElementById('salescenter-payment-limit-container'),\n\t\t\t\t\t\torderSelector: document.getElementById('salescenter-app-order-selector'),\n\t\t\t\t\t};\n\t\t\t\t\tthis.initOrderSelector();\n\t\t\t\t\tif (context.documentSelector)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$store.commit('documentSelector/fillState', context.documentSelector);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (this.$app.options.showCompilationModeSwitcher === 'N')\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$store.commit('orderCreation/enableCompilationMode');\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tmounted()\n\t\t\t\t{\n\t\t\t\t\tresolve();\n\t\t\t\t},\n\t\t\t\tmethods: {\n\t\t\t\t\treload(arParams)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$root.$app.getLoader().show(document.body);\n\n\t\t\t\t\t\tBX.ajax.runComponentAction(\n\t\t\t\t\t\t\t'bitrix:salescenter.app',\n\t\t\t\t\t\t\t'getComponentResult',\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tmode: 'class',\n\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\tarParams\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t).then(function(response) {\n\t\t\t\t\t\t\tif (response.data)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.$root.$app.options = response.data;\n\t\t\t\t\t\t\t\tthis.$root.$app.orderId = this.$root.$app.options.orderId;\n\t\t\t\t\t\t\t\tthis.componentKey += 1;\n\n\t\t\t\t\t\t\t\tthis.$root.$app.getLoader().hide();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}.bind(this));\n\t\t\t\t\t},\n\t\t\t\t\tinitOrderSelector()\n\t\t\t\t\t{\n\t\t\t\t\t\ttry\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\tthis.$app.options.orderList.length < 2\n\t\t\t\t\t\t\t\t|| this.$app.options.templateMode !== 'create'\n\t\t\t\t\t\t\t\t|| !this.$app.options.orderId\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tconst orderSelectorBtn = this.$nodes.orderSelector.querySelector('.salescenter-app-order-selector-text');\n\t\t\t\t\t\t\tif (!orderSelectorBtn)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\torderSelectorBtn.innerText = Loc.getMessage('SALESCENTER_ORDER_SELECTOR_ORDER_NUM')\n\t\t\t\t\t\t\t\t.replace('#ORDER_ID#', this.$app.options.orderId);\n\n\t\t\t\t\t\t\torderSelectorBtn.setAttribute('data-hint', Loc.getMessage('SALESCENTER_ORDER_SELECTOR_TOOLTIP'));\n\n\t\t\t\t\t\t\tlet popupMenu;\n\t\t\t\t\t\t\tlet menuItems = [];\n\t\t\t\t\t\t\tthis.$app.options.orderList.map(orderId => {\n\t\t\t\t\t\t\t\tconst orderCaption = Loc.getMessage('SALESCENTER_ORDER_SELECTOR_ORDER_NUM').replace('#ORDER_ID#', orderId);\n\t\t\t\t\t\t\t\tmenuItems.push({\n\t\t\t\t\t\t\t\t\ttext: orderCaption,\n\t\t\t\t\t\t\t\t\tonclick: event => {\n\t\t\t\t\t\t\t\t\t\tpopupMenu.close();\n\t\t\t\t\t\t\t\t\t\torderSelectorBtn.innerText = orderCaption;\n\t\t\t\t\t\t\t\t\t\tthis.reload({\n\t\t\t\t\t\t\t\t\t\t\tcontext: this.$app.options.context,\n\t\t\t\t\t\t\t\t\t\t\torderId: orderId,\n\t\t\t\t\t\t\t\t\t\t\townerTypeId: this.$app.options.ownerTypeId,\n\t\t\t\t\t\t\t\t\t\t\townerId: this.$app.options.ownerId,\n\t\t\t\t\t\t\t\t\t\t\ttemplateMode: this.$app.options.templateMode,\n\t\t\t\t\t\t\t\t\t\t\tmode: this.$app.options.mode,\n\t\t\t\t\t\t\t\t\t\t\tinitialMode: this.$app.options.initialMode,\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tpopupMenu = MenuManager.create({\n\t\t\t\t\t\t\t\tid: 'deal-order-selector',\n\t\t\t\t\t\t\t\tbindElement: orderSelectorBtn,\n\t\t\t\t\t\t\t\titems: menuItems\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tthis.$nodes.orderSelector.classList.remove('is-hidden');\n\t\t\t\t\t\t\tthis.$nodes.orderSelector.addEventListener('click', e => {\n\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\tpopupMenu.show();\n\t\t\t\t\t\t\t\tBX.UI.Hint.hide();\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tBX.UI.Hint.init(this.$nodes.orderSelector);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcatch (err)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t//\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tdata() {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tcomponentKey: 0,\n\t\t\t\t\t};\n\t\t\t\t},\n\t\t\t});\n\t\t});\n\t}\n\n\tcloseApplication()\n\t{\n\t\tif(this.slider)\n\t\t{\n\t\t\tthis.slider.close();\n\t\t}\n\t}\n\n\tfillPages()\n\t{\n\t\treturn new Promise((resolve) =>\n\t\t{\n\t\t\tif(this.isProgress)\n\t\t\t{\n\t\t\t\tthis.fillPagesQueue.push(resolve);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif(this.fillPagesTimeout)\n\t\t\t\t{\n\t\t\t\t\tclearTimeout(this.fillPagesTimeout);\n\t\t\t\t}\n\t\t\t\tthis.fillPagesTimeout = setTimeout(() =>\n\t\t\t\t{\n\t\t\t\t\tthis.startProgress();\n\t\t\t\t\tRest.callMethod('salescenter.page.list', {}).then((result) => {\n\t\t\t\t\t\tthis.store.commit('application/setPages', {pages: result.answer.result.pages});\n\t\t\t\t\t\tthis.stopProgress();\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t\tthis.fillPagesQueue.forEach((item) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\titem();\n\t\t\t\t\t\t});\n\t\t\t\t\t\tthis.fillPagesQueue = [];\n\t\t\t\t\t});\n\t\t\t\t}, 100);\n\t\t\t}\n\t\t});\n\t}\n\n\tstatic showError(error)\n\t{\n\t\t// console.error(error);\n\t}\n\n\tgetLoader()\n\t{\n\t\tif(!this.loader)\n\t\t{\n\t\t\tthis.loader = new Loader({size: 200, mode: 'custom'});\n\t\t}\n\n\t\treturn this.loader;\n\t}\n\n\tshowLoader()\n\t{\n\t\tif(this.templateEngine)\n\t\t{\n\t\t\tthis.getLoader().show(this.templateEngine.$el);\n\t\t}\n\t}\n\n\thideLoader()\n\t{\n\t\tthis.getLoader().hide();\n\t}\n\n\tstartProgress(buttonEvent = null)\n\t{\n\t\tthis.isProgress = true;\n\t\tthis.templateEngine.$emit('on-start-progress');\n\t\tthis.showLoader();\n\t\tif (Type.isDomNode(buttonEvent))\n\t\t{\n\t\t\tbuttonEvent.classList.add('ui-btn-wait');\n\t\t}\n\t}\n\n\tstopProgress(buttonEvent = null)\n\t{\n\t\tthis.isProgress = false;\n\t\tthis.templateEngine.$emit('on-stop-progress');\n\t\tthis.hideLoader();\n\t\tif (Type.isDomNode(buttonEvent))\n\t\t{\n\t\t\tbuttonEvent.classList.remove('ui-btn-wait');\n\t\t}\n\t}\n\n\thidePage(page)\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tlet promise;\n\t\t\tif(page.landingId > 0)\n\t\t\t{\n\t\t\t\tpromise = Manager.hidePage(page);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tpromise = Manager.deleteUrl(page);\n\t\t\t}\n\t\t\tpromise.then(() =>\n\t\t\t{\n\t\t\t\tthis.store.commit('application/removePage', {page});\n\t\t\t\tresolve();\n\t\t\t}).catch((result) =>\n\t\t\t{\n\t\t\t\tApp.showError(result.answer.error_description);\n\t\t\t\treject(result.answer.error_description);\n\t\t\t});\n\t\t});\n\t}\n\n\tsendPage(pageId)\n\t{\n\t\tif(this.isProgress)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tif(this.disableSendButton)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tconst pages = this.store.getters['application/getPages']();\n\t\tlet page;\n\t\tfor(let index in pages)\n\t\t{\n\t\t\tif(pages.hasOwnProperty(index) && pages[index].id === pageId)\n\t\t\t{\n\t\t\t\tpage = pages[index];\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tlet source = 'other';\n\t\tif(page.landingId > 0)\n\t\t{\n\t\t\tif(parseInt(page.siteId) === parseInt(Manager.connectedSiteId))\n\t\t\t{\n\t\t\t\tsource = 'landing_store_chat';\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tsource = 'landing_other';\n\t\t\t}\n\t\t}\n\t\tif(!this.dialogId)\n\t\t{\n\t\t\tthis.slider.data.set('action', 'sendPage');\n\t\t\tthis.slider.data.set('page', page);\n\t\t\tthis.slider.data.set('pageId', pageId);\n\t\t\tif(this.context === ContextDictionary.sms)\n\t\t\t{\n\t\t\t\tthis.startProgress();\n\t\t\t\tBX.Salescenter.Manager.addAnalyticAction({\n\t\t\t\t\tanalyticsLabel: 'salescenterSendSms',\n\t\t\t\t\tcontext: this.context,\n\t\t\t\t\tsource: source,\n\t\t\t\t\ttype: page.isWebform ? 'form' : 'info',\n\t\t\t\t\tcode: page.code,\n\t\t\t\t}).then(() =>\n\t\t\t\t{\n\t\t\t\t\tthis.stopProgress();\n\t\t\t\t\tthis.closeApplication();\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.closeApplication();\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\tthis.startProgress();\n\n\t\tAjax.runAction('salescenter.page.send', {\n\t\t\tanalyticsLabel: 'salescenterSendChat',\n\t\t\tgetParameters: {\n\t\t\t\tdialogId: this.dialogId,\n\t\t\t\tcontext: this.context,\n\t\t\t\tsource: source,\n\t\t\t\ttype: page.isWebform ? 'form' : 'info',\n\t\t\t\tconnector: this.connector,\n\t\t\t\tcode: page.code,\n\t\t\t},\n\t\t\tdata: {\n\t\t\t\tid: pageId,\n\t\t\t\toptions: {\n\t\t\t\t\tdialogId: this.dialogId,\n\t\t\t\t\tsessionId: this.sessionId,\n\t\t\t\t},\n\t\t\t}\n\t\t}).then(() =>\n\t\t{\n\t\t\tthis.stopProgress();\n\t\t\tthis.closeApplication();\n\t\t}).catch((result) =>\n\t\t{\n\t\t\tApp.showError(result.errors.pop().message);\n\t\t\tthis.stopProgress();\n\t\t});\n\t}\n\n\tsendCompilation(buttonEvent = null, sendCompilationLinkToFacebook = false)\n\t{\n\t\tif (!this.isPaymentCreationAvailable)\n\t\t{\n\t\t\tthis.closeApplication();\n\t\t\treturn null;\n\t\t}\n\n\t\tif (!this.store.getters['orderCreation/isAllowedSubmit'] || this.isProgress)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tif (!this.isAllowedFacebookRegion)\n\t\t{\n\t\t\tsendCompilationLinkToFacebook = true;\n\t\t}\n\n\t\tthis.startProgress(buttonEvent);\n\n\t\tlet options = {\n\t\t\tdialogId: this.dialogId,\n\t\t\tsendingMethod: this.sendingMethod,\n\t\t\tsendingMethodDesc: this.sendingMethodDesc,\n\t\t\townerTypeId: this.ownerTypeId,\n\t\t\townerId: this.ownerId,\n\t\t\tconnector: this.connector,\n\t\t\tsessionId: this.sessionId,\n\t\t\tsendCompilationLinkToFacebook: sendCompilationLinkToFacebook,\n\t\t\tcompilationId: this.compilation ? this.compilation.ID : this.newCompilationId,\n\t\t\teditable: this.options.templateMode === 'create',\n\t\t};\n\n\t\tif (this.stageOnOrderPaid !== null)\n\t\t{\n\t\t\toptions.stageOnOrderPaid = this.stageOnOrderPaid;\n\t\t}\n\t\tif (this.stageOnDeliveryFinished !== null)\n\t\t{\n\t\t\toptions.stageOnDeliveryFinished = this.stageOnDeliveryFinished;\n\t\t}\n\n\t\tif (this.connector === 'facebook' && this.isAllowedFacebookRegion && !sendCompilationLinkToFacebook)\n\t\t{\n\t\t\tthis.sendCompilationToFacebook(buttonEvent, options)\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.sendCompilationAjaxAction(buttonEvent, options);\n\t\t}\n\t}\n\n\tsendCompilationToFacebook(buttonEvent, options)\n\t{\n\t\tBX.ajax.runComponentAction(\n\t\t\t'bitrix:salescenter.app',\n\t\t\t'getFacebookSettingsPath',\n\t\t\t{\n\t\t\t\tmode: 'class',\n\t\t\t\tdata: {\n\t\t\t\t\tdialogId: this.dialogId,\n\t\t\t\t}\n\t\t\t}\n\t\t).then((response) => {\n\t\t\tconst facebookSettingsPath = response.data;\n\t\t\tif (facebookSettingsPath)\n\t\t\t{\n\t\t\t\tthis.stopProgress(buttonEvent);\n\t\t\t\tthis.showFacebookCatalogConnectionPopup(buttonEvent, facebookSettingsPath)\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tBX.ajax.runAction('salescenter.compilation.sendFacebookModerationWaitingNotification', {\n\t\t\t\t\tdata: {\n\t\t\t\t\t\toptions,\n\t\t\t\t\t},\n\t\t\t\t}).then((result) => {\n\t\t\t\t\tthis.sendCompilationAjaxAction(buttonEvent, options);\n\t\t\t\t\tthis.store.dispatch('orderCreation/resetBasket');\n\t\t\t\t\tthis.closeApplication();\n\t\t\t\t\tthis.stopProgress(buttonEvent);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\tshowFacebookCatalogConnectionPopup(buttonEvent, facebookSettingsPath)\n\t{\n\t\tif (!this.facebookCatalogConnectionPopup)\n\t\t{\n\t\t\tthis.facebookCatalogConnectionPopup = new Popup({\n\t\t\t\tclassName: 'salescenter-app-catalog-facebook-connection-popup',\n\t\t\t\tcontent: this.getFacebookCatalogConnectionPopupContent(buttonEvent, facebookSettingsPath),\n\t\t\t\twidth: 500,\n\t\t\t\toverlay: true,\n\t\t\t\toffsetTop: 0,\n\t\t\t\toffsetLeft: 0,\n\t\t\t\tpadding: 17,\n\t\t\t\tanimation: 'fading-slide',\n\t\t\t\tangle: false,\n\t\t\t\tcloseIcon: {\n\t\t\t\t\ttop: '5px',\n\t\t\t\t\tright: '5px',\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\tthis.facebookCatalogConnectionPopup.show();\n\t}\n\n\tgetFacebookCatalogConnectionPopupContent(buttonEvent, facebookSettingsPath)\n\t{\n\t\tconst setFacebookCatalogConnectionButton = Tag.render`\n\t\t\t<button class=\"ui-btn ui-btn-md ui-btn-primary\">\n\t\t\t\t${Loc.getMessage('SALESCENTER_FACEBOOK_CATALOG_POPUP_SET_BUTTON')}\n\t\t\t</button>\n\t\t`;\n\t\tEvent.bind(setFacebookCatalogConnectionButton, 'click', this.setFacebookCatalogConnectionPopupHandler.bind(this, facebookSettingsPath));\n\n\t\tconst sendLinkToB24CompilationButton = Tag.render`\n\t\t\t<button class=\"ui-btn ui-btn-md ui-btn-light-border\">\n\t\t\t\t${Loc.getMessage('SALESCENTER_FACEBOOK_CATALOG_POPUP_SEND_B24_COMPILATION_LINK_BUTTON')}\n\t\t\t</button>\n\t\t`;\n\t\tEvent.bind(sendLinkToB24CompilationButton, 'click', this.sendLinkToB24CompilationButtonPopupHandler.bind(this, buttonEvent));\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"salescenter-app-catalog-facebook-connection-popup--container\">\n\t\t\t\t<div class=\"salescenter-app-catalog-facebook-connection-popup--title\">${Loc.getMessage('SALESCENTER_FACEBOOK_CATALOG_POPUP_TITLE_1')}</div>\n\t\t\t\t<div class=\"salescenter-app-catalog-facebook-connection-popup--button-container\">\n\t\t\t\t\t${setFacebookCatalogConnectionButton}\n\t\t\t\t\t${sendLinkToB24CompilationButton}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tsetFacebookCatalogConnectionPopupHandler(facebookSettingsPath)\n\t{\n\t\tBX.SidePanel.Instance.open(facebookSettingsPath);\n\t\tthis.facebookCatalogConnectionPopup.close();\n\t}\n\n\tsendLinkToB24CompilationButtonPopupHandler(buttonEvent)\n\t{\n\t\tthis.facebookCatalogConnectionPopup.close();\n\t\tthis.sendCompilation(buttonEvent, true);\n\t}\n\n\tsendCompilationAjaxAction(buttonEvent, options)\n\t{\n\t\tconst basketItems = this.store.getters['orderCreation/getBasket']();\n\t\tconst productIds = basketItems.map((basketItem) => {\n\t\t\treturn basketItem.skuId;\n\t\t});\n\t\tBX.ajax.runAction('salescenter.compilation.sendCompilation', {\n\t\t\tdata: {\n\t\t\t\tproductIds,\n\t\t\t\toptions,\n\t\t\t},\n\t\t\tanalyticsLabel: 'salescenterCreateCompilation',\n\t\t}).then((result) => {\n\t\t\tthis.store.dispatch('orderCreation/resetBasket');\n\t\t\tthis.stopProgress(buttonEvent);\n\n\t\t\tif (result.data && result.data.compilation)\n\t\t\t{\n\t\t\t\tthis.slider.data.set('action', 'sendCompilation');\n\t\t\t\tthis.slider.data.set('compilation', result.data.compilation);\n\t\t\t}\n\n\t\t\tthis.closeApplication();\n\t\t\tthis.emitGlobalEvent('salescenter.app:oncompilationcreated');\n\t\t}).catch((data) => {\n\t\t\tdata.errors.forEach((error) => {\n\t\t\t\talert(error.message);\n\t\t\t});\n\t\t\tthis.stopProgress(buttonEvent);\n\t\t\tApp.showError(data);\n\t\t});\n\t}\n\n\tsendShipment(buttonEvent)\n\t{\n\t\tif (!this.isPaymentCreationAvailable)\n\t\t{\n\t\t\tthis.closeApplication();\n\t\t\treturn null;\n\t\t}\n\n\t\tif (!this.store.getters['orderCreation/isAllowedSubmit'] || this.isProgress)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tthis.startProgress(buttonEvent);\n\n\t\tlet data = {\n\t\t\townerTypeId: this.ownerTypeId,\n\t\t\townerId: this.ownerId,\n\t\t\torderId: this.orderId,\n\t\t\tdeliveryId: this.store.getters['orderCreation/getDeliveryId'],\n\t\t\tdeliveryPrice: this.store.getters['orderCreation/getDelivery'],\n\t\t\texpectedDeliveryPrice: this.store.getters['orderCreation/getExpectedDelivery'],\n\t\t\tdeliveryResponsibleId: this.store.getters['orderCreation/getDeliveryResponsibleId'],\n\t\t\tpersonTypeId: this.store.getters['orderCreation/getPersonTypeId'],\n\t\t\tshipmentPropValues: this.store.getters['orderCreation/getPropertyValues'],\n\t\t\tdeliveryExtraServicesValues: this.store.getters['orderCreation/getDeliveryExtraServicesValues'],\n\t\t};\n\n\t\tif (this.stageOnDeliveryFinished !== null)\n\t\t{\n\t\t\tdata.stageOnDeliveryFinished = this.stageOnDeliveryFinished;\n\t\t}\n\n\t\tBX.ajax.runAction('salescenter.order.createShipment', {\n\t\t\tdata: {\n\t\t\t\tbasketItems: this.store.getters['orderCreation/getBasket'](),\n\t\t\t\toptions: data,\n\t\t\t},\n\t\t\tanalyticsLabel: 'salescenterCreateShipment',\n\t\t}).then((result) =>\n\t\t{\n\t\t\tthis.store.dispatch('orderCreation/resetBasket');\n\t\t\tthis.stopProgress(buttonEvent);\n\n\t\t\tif (result.data)\n\t\t\t{\n\t\t\t\tif (result.data.order)\n\t\t\t\t{\n\t\t\t\t\tthis.slider.data.set('order', result.data.order);\n\t\t\t\t}\n\t\t\t\tif (result.data.deal)\n\t\t\t\t{\n\t\t\t\t\tthis.slider.data.set('deal', result.data.deal);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.closeApplication();\n\t\t\tthis.emitGlobalEvent('salescenter.app:onshipmentcreated');\n\t\t}).catch((data) =>\n\t\t{\n\t\t\tdata.errors.forEach((error) => {\n\t\t\t\talert(error.message);\n\t\t\t});\n\t\t\tthis.stopProgress(buttonEvent);\n\t\t\tApp.showError(data);\n\t\t});\n\t}\n\n\tsendPayment(buttonEvent, skipPublicMessage = 'n')\n\t{\n\t\tif (!this.isPaymentCreationAvailable)\n\t\t{\n\t\t\tthis.closeApplication();\n\t\t\treturn null;\n\t\t}\n\n\t\tif (!this.store.getters['orderCreation/isAllowedSubmit'] || this.isProgress)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tthis.startProgress(buttonEvent);\n\n\t\tconst data = {\n\t\t\tdialogId: this.dialogId,\n\t\t\tsendingMethod: this.sendingMethod,\n\t\t\tsendingMethodDesc: this.sendingMethodDesc,\n\t\t\tsessionId: this.sessionId,\n\t\t\tlineId: this.lineId,\n\t\t\townerTypeId: this.ownerTypeId,\n\t\t\torderId: this.orderId,\n\t\t\townerId: this.ownerId,\n\t\t\tmode: this.options.mode,\n\t\t\tskipPublicMessage,\n\t\t\tdeliveryId: this.store.getters['orderCreation/getDeliveryId'],\n\t\t\tdeliveryPrice: this.store.getters['orderCreation/getDelivery'],\n\t\t\texpectedDeliveryPrice: this.store.getters['orderCreation/getExpectedDelivery'],\n\t\t\tdeliveryResponsibleId: this.store.getters['orderCreation/getDeliveryResponsibleId'],\n\t\t\tpersonTypeId: this.store.getters['orderCreation/getPersonTypeId'],\n\t\t\tshipmentPropValues: this.store.getters['orderCreation/getPropertyValues'],\n\t\t\tdeliveryExtraServicesValues: this.store.getters['orderCreation/getDeliveryExtraServicesValues'],\n\t\t\tavailablePaySystemsIds: this.store.getters['orderCreation/getAvailablePaySystemsIds'],\n\t\t\tconnector: this.connector,\n\t\t\tcontext: this.context,\n\t\t\tcurrency: this.currencyCode,\n\t\t\tassignedById: this.assignedById,\n\t\t};\n\n\t\tif (this.documentSelector)\n\t\t{\n\t\t\tdata.boundDocumentId = this.store.getters['documentSelector/getBoundDocumentId'];\n\t\t\tdata.selectedTemplateId = this.store.getters['documentSelector/getSelectedTemplateId'];\n\t\t}\n\n\t\tif (this.stageOnOrderPaid !== null)\n\t\t{\n\t\t\tdata.stageOnOrderPaid = this.stageOnOrderPaid;\n\t\t}\n\t\tif (this.stageOnDeliveryFinished !== null)\n\t\t{\n\t\t\tdata.stageOnDeliveryFinished = this.stageOnDeliveryFinished;\n\t\t}\n\n\t\tBX.ajax.runAction('salescenter.order.createPayment', {\n\t\t\tdata: {\n\t\t\t\tbasketItems: this.store.getters['orderCreation/getBasket'](),\n\t\t\t\toptions: data,\n\t\t\t},\n\t\t\tanalyticsLabel: (this.context === ContextDictionary.deal) ? 'salescenterCreatePaymentSms' : 'salescenterCreatePayment',\n\t\t\tgetParameters: {\n\t\t\t\tdialogId: this.dialogId,\n\t\t\t\tcontext: this.context,\n\t\t\t\tconnector: this.connector,\n\t\t\t\tskipPublicMessage: skipPublicMessage,\n\t\t\t}\n\t\t}).then((result) =>\n\t\t{\n\t\t\tthis.store.dispatch('orderCreation/resetBasket');\n\t\t\tthis.stopProgress(buttonEvent);\n\t\t\tif (skipPublicMessage === 'y')\n\t\t\t{\n\t\t\t\tlet notify = {\n\t\t\t\t\tcontent: Loc.getMessage('SALESCENTER_ORDER_CREATE_NOTIFICATION').replace('#ORDER_ID#', result.data.order.number),\n\t\t\t\t};\n\t\t\t\tnotify.actions = [{\n\t\t\t\t\ttitle: Loc.getMessage('SALESCENTER_VIEW'),\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tclick() {\n\t\t\t\t\t\t\tManager.showOrderAdd(result.data.order.id);\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t}];\n\t\t\t\tBX.UI.Notification.Center.notify(notify);\n\t\t\t\tManager.showOrdersList({\n\t\t\t\t\torderId: result.data.order.id,\n\t\t\t\t\townerId: this.ownerId,\n\t\t\t\t\townerTypeId: this.ownerTypeId,\n\t\t\t\t\tcontext: this.context,\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.slider.data.set('action', 'sendPayment');\n\t\t\t\tthis.slider.data.set('order', result.data.order);\n\n\t\t\t\tif (result.data.deal)\n\t\t\t\t{\n\t\t\t\t\tthis.slider.data.set('deal', result.data.deal);\n\t\t\t\t}\n\n\t\t\t\tif (result.data.entity)\n\t\t\t\t{\n\t\t\t\t\tthis.slider.data.set('entity', result.data.entity);\n\t\t\t\t}\n\n\t\t\t\tthis.closeApplication();\n\t\t\t}\n\t\t\tthis.emitGlobalEvent('salescenter.app:onpaymentcreated');\n\t\t}).catch((data) =>\n\t\t{\n\n\t\t\tdata.errors.forEach((error) => {\n\t\t\t\ttop.BX.UI.Notification.Center.notify({\n\t\t\t\t\tcontent: Text.encode(error.message)\n\t\t\t\t});\n\t\t\t});\n\t\t\tthis.stopProgress(buttonEvent);\n\t\t\tApp.showError(data);\n\n\t\t\tif(this.needCloseApplication(data.errors))\n\t\t\t{\n\t\t\t\tthis.closeApplication();\n\t\t\t}\n\t\t});\n\t}\n\n\tneedCloseApplication(errors)\n\t{\n\t\tlet alwaysOpen = errors.filter(error => {\n\t\t\treturn error.code < 1 || error.code > 100\n\t\t}).length >= 1\n\n\t\treturn alwaysOpen === false\n\t}\n\n\tresendPayment(buttonEvent)\n\t{\n\t\tif (!this.isPaymentCreationAvailable)\n\t\t{\n\t\t\tthis.closeApplication();\n\t\t\treturn null;\n\t\t}\n\n\t\tif (!this.store.getters['orderCreation/isAllowedSubmit'] || this.isProgress)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tthis.startProgress(buttonEvent);\n\n\t\tconst options = {\n\t\t\tsendingMethod: this.sendingMethod,\n\t\t\tsendingMethodDesc: this.sendingMethodDesc,\n\t\t\tstageOnOrderPaid: this.stageOnOrderPaid,\n\t\t\townerTypeId: this.ownerTypeId,\n\t\t\townerId: this.ownerId,\n\t\t};\n\t\tif (this.documentSelector)\n\t\t{\n\t\t\toptions.boundDocumentId = this.store.getters['documentSelector/getBoundDocumentId'];\n\t\t\toptions.selectedTemplateId = this.store.getters['documentSelector/getSelectedTemplateId'];\n\t\t}\n\t\tBX.ajax.runAction('salescenter.order.resendPayment', {\n\t\t\tdata: {\n\t\t\t\torderId: this.orderId,\n\t\t\t\tpaymentId: this.options.paymentId,\n\t\t\t\tshipmentId: this.options.shipmentId,\n\t\t\t\toptions,\n\t\t\t},\n\t\t\tgetParameters: {\n\t\t\t\tcontext: this.context,\n\t\t\t}\n\t\t}).then((result) =>\n\t\t{\n\t\t\tthis.stopProgress(buttonEvent);\n\t\t\tthis.closeApplication();\n\t\t\tthis.emitGlobalEvent('salescenter.app:onpaymentresend');\n\t\t}).catch((data) =>\n\t\t{\n\t\t\tdata.errors.forEach((error) => {\n\t\t\t\talert(error.message);\n\t\t\t});\n\t\t\tthis.stopProgress(buttonEvent);\n\t\t\tApp.showError(data);\n\t\t});\n\t}\n\thideNoPaymentSystemsBanner()\n\t{\n\t\tconst userOptionName = this.options.orderCreationOption || false;\n\t\tconst userOptionKeyName = this.options.paySystemBannerOptionName || false;\n\t\tif (userOptionName && userOptionKeyName)\n\t\t{\n\t\t\tBX.userOptions.save('salescenter', userOptionName, userOptionKeyName, 'Y');\n\t\t}\n\t}\n\tgetOrdersCount()\n\t{\n\t\tif(this.sessionId > 0)\n\t\t{\n\t\t\treturn Rest.callMethod('salescenter.order.getActiveOrdersCount', {\n\t\t\t\tsessionId: this.sessionId\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn new Promise((resolve, reject) => {});\n\t\t}\n\t}\n\n\tgetPaymentsCount()\n\t{\n\t\tif (this.sessionId > 0)\n\t\t{\n\t\t\treturn Rest.callMethod('salescenter.order.getActivePaymentsCount', {\n\t\t\t\tsessionId: this.sessionId\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn new Promise((resolve, reject) => {});\n\t\t}\n\t}\n\n\thasClientContactInfo()\n\t{\n\t\tif (this.options.sendingMethod === 'chat')\n\t\t{\n\t\t\treturn this.options.dialogId !== '';\n\t\t}\n\n\t\treturn this.options.contactPhone !== '';\n\t}\n\n\temitGlobalEvent(eventName, data)\n\t{\n\t\tEventEmitter.emit(eventName, data);\n\t\tBX.SidePanel.Instance.postMessage(this.slider, eventName, data);\n\t}\n\n\tisPaymentMode(): boolean\n\t{\n\t\treturn this.context === ContextDictionary.deal || this.context === ContextDictionary.smartInvoice;\n\t}\n}\n\ndeclare type DocumentSelectorParams = {\n\tboundDocumentId: ?number,\n\tselectedTemplateId: ?number,\n\tdocuments: ?Document[],\n\ttemplates: ?Template[],\n\ttemplateAddUrl: ?string,\n\tprovider: ?string,\n\tvalue: ?number,\n};\n\nexport type Document = {\n\tid: number,\n\ttitle: string,\n\tdetailUrl: string,\n\tisWithStamps: boolean,\n}\n\nexport type Template = {\n\tid: number,\n\ttitle: string,\n\tdocumentCreationUrl: string,\n\tisWithStamps: boolean,\n}"],"names":["ApplicationModel","pages","getPages","state","setPages","payload","saveState","removePage","page","filter","id","landingId","addPage","push","VuexBuilderModel","OrderCreationModel","currency","processingId","basket","basketVersion","propertyValues","deliveryExtraServicesValues","expectedDelivery","deliveryResponsibleId","personTypeId","deliveryId","delivery","isEnabledSubmit","isCompilationMode","errors","total","sum","discount","result","availablePaySystemsIds","resetBasket","commit","setCurrency","setDeliveryId","setDelivery","setPropertyValues","setDeliveryExtraServicesValues","setExpectedDelivery","setDeliveryResponsibleId","setPersonTypeId","setAvailablePaySystemsIds","getBasket","index","isAllowedSubmit","getTotal","getDelivery","getDeliveryId","getPropertyValues","getDeliveryExtraServicesValues","getExpectedDelivery","getDeliveryResponsibleId","getPersonTypeId","getAvailablePaySystemsIds","setBasket","setTotal","Object","assign","clearBasket","setErrors","clearErrors","setProcessingId","enableSubmit","disableSubmit","enableCompilationMode","disableCompilationMode","DocumentSelectorModel","addDocument","dispatch","document","boundDocumentId","setBoundDocumentId","paymentId","Rest","callMethod","then","response","console","error","loadTemplates","Number","entityTypeId","entityId","templates","answer","documents","selectedTemplateId","getTemplates","getDocuments","getBoundDocumentId","getSelectedTemplateId","fillState","setTemplates","setSelectedTemplateId","newDocument","isUpdated","unshift","ContextDictionary","freeze","deal","smartInvoice","chat","sms","imOpenlines","MixinTemplatesType","data","editable","created","$root","$on","value","TileCollectionMixins","components","Label","TileLabel","TileHintImg","TileLabelPlus","TileHintImgCaption","TileHintBackground","TileHintBackgroundCaption","methods","getCollectionTile","tiles","getCollectionTileByFilter","map","Map","collection","hasOwnProperty","type","length","forEach","item","getType","set","hasTileOfferFromCollection","Tile","size","hasTileMoreFromCollection","getTileOfferFromCollection","inx","tile","getTileMoreFromCollection","getTileByIndex","openSlider","slider","AppSlider","openAppLocal","getOptionSlider","subscribe","EventTypes","AppSliderSliderClose","e","$emit","isControlTile","includes","showHint","event","popup","Hint","show","target","info","hideHint","hide","computed","width","Uninstalled","props","Array","required","mixins","template","Installed","StageMixin","statusClassMixin","status","Status","current","disabled","containerClassMixin","counterCheckedMixin","complete","onSliderClose","Cashbox","String","counter","installed","Boolean","titleItems","initialCollapseState","Block","TileInstalled","TileUnInstalled","statusClass","title","Loc","getMessage","configForBlock","collapsible","checked","onItemHint","BX","Salescenter","Manager","openHowToConfigCashBox","saveCollapsedOption","option","ModeDictionary","payment","paymentDelivery","mounted","$app","options","templateMode","compilation","productForm","setEditable","formWrapper","$el","querySelector","appendChild","layout","refreshId","defaultCurrency","currencyCode","$store","Type","isArray","fields","isObject","totals","ProductForm","currencySymbol","iblockId","catalogIblockId","basePriceId","taxList","vatList","measures","showDiscountBlock","showProductDiscounts","showTaxBlock","showProductTaxes","totalResultLabel","mode","urlBuilderContext","urlProductBuilderContext","isCatalogPriceEditEnabled","isCatalogDiscountSetEnabled","fieldHints","hideUnselectedProperties","showCompilationModeSwitcher","compilationFormType","connector","isAllowedFacebookRegion","facebookFailProducts","FAIL_PRODUCTS","ownerId","ownerTypeId","dialogId","sessionId","isShortProductViewFormat","checkProductErrors","EventEmitter","Runtime","debounce","onBasketChange","onProductFormModeChange","onProductFormCompilationCreated","bind","getData","newCompilationId","compilationId","FormMode","COMPILATION","COMPILATION_READ_ONLY","processRefreshRequest","preparedBasket","isStringFilled","innerId","selectorId","setData","changeCompilationProducts","isNeedDisableSubmit","requestId","Text","getRandom","ajax","runAction","orderId","basketItems","prop","getObject","get","getters","productIds","basketItem","skuId","ID","isFunction","hasErrors","filledProducts","module","productId","hintTitle","Product","openHowToSell","config","DeliverySelector","availableServices","onChange","deliveryPrice","deliveryServiceId","relatedPropsValues","relatedServicesValues","estimatedDeliveryPrice","responsibleUser","onAddressFromChanged","refreshAvailableServices","onDeliveryServiceChanged","onSettingsChanged","order","shipmentPropValues","deliveryRelatedServiceValues","localize","Vue","getFilteredPhrases","sumTitle","productsPrice","deliveryFormatted","isDeliveryCalculated","Currency","currencyFormat","totalFormatted","excludedServiceIds","emptyDeliveryServiceId","actionData","Vuex","mapState","orderCreation","shipment","priceDelivery","basePriceDelivery","deliveryService","name","logo","parent","extraServices","requestProperties","canUserPerformCalls","getFormattedPrice","price","isPhoneRequestProperty","property","tags","makeCall","phoneNumber","isUndefined","window","top","phoneTo","open","hasParent","deliveryServiceLogo","deliveryServiceProfileLogo","paymentPrice","deliveryServiceName","deliveryServiceProfileName","isExtraServicesVisible","isRequestPropertiesVisible","priceDeliveryFormatted","productsPriceFormatted","paymentPriceFormatted","DeliveryVuex","isCollapsible","selectedDeliveryServiceName","ShipmentView","shipmentId","titleName","shipmentData","propValues","extraServicesValues","relatedPropsOptions","deliveryOrderPropOptions","responsibleId","assignedById","isViewTemplateMode","setTitleName","PaySystem","openHowToConfigDefaultPaySystem","ChatMessage","manager","titleTemplate","editorTemplate","editorUrl","selectedMode","UserAvatar","MessageEditor","currentSenderCode","senders","pushedToUseBitrix24Notifications","smsSenderListComponentKey","editor","url","isMessageReadOnly","context","urlSettingsCompanyContacts","openBitrix24NotificationsHelp","Automation","stageOnOrderPaid","stageOnDeliveryFinished","items","paymentStages","shipmentStages","StageList","updatePaymentStage","newStageId","stage","selected","updateShipmentStage","initStages","stages","currentValue","values","AutomationStage","create","selectedStage","isPayment","find","isHideDeliveryStage","buttonLabel","buttonEnabled","showWhatClientSeesControl","isFacebookForm","buttonClass","showSubmitCompilationLinkToFacebookButton","showWhatClientSees","openWhatClientSee","submit","submitCompilationLinkToFacebook","TimeLine","timelineItems","Item","PaymentItem","Payment","DocumentSelector","templateAddUrl","model","getDocumentTitle","currentDocument","getCurrentDocument","withStamps","isWithStamps","hasData","detailUrl","documentSelector","handleDocumentClick","openSelectorMenu","openTemplatesList","bindElement","MenuManager","prepareSelectorMenuItems","closeByEsc","cacheable","closeSelectorMenu","destroy","text","onclick","templateListItem","delimiter","handleEditDocumentClick","getDocumentById","getStubDocumentByTemplate","getTemplateById","templateId","Uri","addParam","documentCreationUrl","_paymentId","Send","message","entityResponsible","sendingMethodDesc","orderPublicUrl","product","paysystem","paySystemList","isSet","getTileCollection","getTitleItems","isPaySystemCollapsed","cashbox","automation","isHidden","parseInt","deliveryList","isInstalled","isDeliveryCollapsed","cashboxList","isCashboxCollapsed","isAutomationAvailable","entityStageList","isAutomationCollapsed","timeline","getTimelineCollection","isSendAllowed","hasStageTimeLine","hasStageAutomation","hasStageCashBox","submitButtonLabel","isShowDocumentSelector","initCounter","list","TimeLineItem","stageRefresh","runComponentAction","refreshTilesByType","UI","Notification","Center","notify","content","onSend","onSendCompilationLinkToFacebook","changeProvider","provider","userOptions","save","text_modes","beforeUpdate","isFaded","createPinner","startFade","endFade","buttonsPanel","$refs","parentNode","Pinner","fixBottom","isFrame","fullWidth","close","closeApplication","isOrderPublicUrlAvailable","wrapperClass","wrapperStyle","position","pos","offset","$nodes","footer","height","connect","loader","Loader","body","no_redirect","loadConfig","isSiteExists","isOrderPublicUrlExists","checkRecycle","openConnectedSite","isOrderPageDeleted","isVisible","openControlPanel","ComponentMixin","isShowPreview","isShowPayment","pageTitle","currentPageId","actions","frameCheckShortTimeout","frameCheckLongTimeout","isPagesOpen","isFormsOpen","showedPageIds","loadedPageIds","errorPageIds","lastAddedPages","ordersCount","paymentsCount","editedPageId","currentPageTitle","Start","NoPaymentSystemsBanner","StageBlocksList","updated","renderErrors","createLoader","fillPages","isWithOrdersMode","refreshOrdersCount","refreshPaymentsCount","openFirstPage","isPaymentsLimitReached","paymentsLimitStartNode","paymentsLimit","paymentsLimitNode","children","node","getActions","currentPage","SALESCENTER_RIGHT_ACTION_COPY_URL","copyUrl","SALESCENTER_RIGHT_ACTION_HIDE","hidePage","SALESCENTER_RIGHT_ACTION_DELETE","SALESCENTER_RIGHT_ACTION_ADD","getAddPageActions","isWebform","SALESCENTER_RIGHT_ACTION_ADD_SITE_B24","addSite","SALESCENTER_RIGHT_ACTION_ADD_CUSTOM","showAddUrlPopup","isPaymentCreationAvailable","showPaymentForm","firstWebformPage","pageToOpen","onPageClick","setPageTitle","hideActionsPopup","isFrameDenied","startFrameCheckTimeout","onFrameError","showActionsPopup","PopupMenu","offsetLeft","offsetTop","showCompanyContacts","showAddPageActionPopup","menuId","offsetWidth","offsetHeight","angle","addSitePage","newPage","editPage","editLandingPage","siteId","hideNoPaymentSystemsBanner","isPlainObject","addCustomPage","pageId","getPaymentItemTitle","SALESCENTER_LEFT_PAYMENT_ADD_2","SALESCENTER_LEFT_PAYMENT_AND_DELIVERY","SALESCENTER_DEFAULT_TITLE","showOrdersList","showPaymentsList","showOrderAdd","showCatalog","onFormsClick","openHelpDesk","openHowItWorks","isPageSelected","sendCompilationLinkToFacebook","send","skipPublicMessage","isAllowedSubmitButton","isShowStartInfo","sendCompilation","sendPayment","isActive","sendPage","innerText","clearTimeout","onFrameLoad","onSuccessfullyConnected","setTimeout","getFrameSource","setQueryParam","toString","getOrdersCount","getPaymentsCount","errorMessages","join","params","color","Alert","Color","DANGER","textCenter","util","htmlspecialchars","errorBlock","innerHTML","animated","alert","getContainer","editMenuItem","focus","saveMenuItem","oldName","analyticsLabel","application","sendButtonLabel","pagesSubmenuHeight","formsSubmenuHeight","isFrameError","isShowLoader","res","lastModified","modifiedAgo","SALESCENTER_MODIFIED","replace","disableSendButton","isNoPaymentSystemsBannerVisible","showPaySystemSettingBanner","TYPE_PHONE","TYPE_SENDER","SmsMessage","initSenders","initCurrentSenderCode","initPushedToUseBitrix24Notifications","selectedSmsSender","phone","contactEditorUrl","Error","SenderList","MessageEdit","MessageView","MessageControl","contactPhone","hintClassModifier","currentSender","sender","code","bitrix24ConnectUrlError","SenderConfig","needConfigure","getConnectionErrorText","fixer","openSliderFreeMessages","connectUrl","fixText","getConnectionErrorFixText","BITRIX24","isAvailable","toUpperCase","isConnected","usageErrors","getFixer","handleErrorFix","initialize","onConfigureContactPhone","messageCode","fallback","fixUrl","events","onLoad","getSlider","sliderBx","getFrameWindow","addCustomEvent","loadExt","InfoHelper","Promise","resolve","handleOnSmsSenderSelected","Ajax","handlePhoneErrorFix","hendleSmsErrorBlock","openBitrix24NotificationsWorks","sendAllowed","sent","groups","getTileGroupsCollection","isViewWithoutDelivery","ret","group","fillTiles","changeContactPhone","editableMixin","activeMenuItem","isLoading","EntityCreatePaymentStages","StageBlocksListShipment","reload","form","showModeList","initialMode","onReload","sendPaymentDeliveryForm","isAllowedPaymentDeliverySubmitButton","resendPayment","sendDeliveryForm","isAllowedDeliverySubmitButton","sendShipment","specifyCompanyContacts","suggestScenario","openFeedbackPayOrderForm","howItWorks","openHowPaySmartInvoiceWorks","openHowPayDealWorks","openIntegrationWindow","openIntegrationRequestForm","freeMessages","fixed","isAllowedFreeMessagesButton","isOnlyDeliveryItemVisible","hasInstallable","isPaymentItemVisible","hasClientContactInfo","filteredSenders","isSuggestScenarioMenuItemVisible","isBitrix24","isRequestIntegrationMenuItemVisible","isIntegrationButtonVisible","isModeListVisible","needShowStoreConnection","sendPaymentDeliveryFormButtonText","paymentDeliveryFormSubmitButtonClass","deliveryFormSubmitButtonClass","paymentMenuItemClass","paymentDeliveryMenuItemClass","deliveryMenuItemClass","instances","App","lineId","orderAddPullTag","landingPublicationPullTag","landingUnPublicationPullTag","isCatalogAvailable","DocumentSelectorParams","SidePanel","Instance","getTopSlider","isProgress","fillPagesTimeout","fillPagesQueue","sendingMethod","fileControl","isString","isBoolean","Event","ready","pull","PULL","initPull","initStore","initTemplate","showError","moduleId","command","callback","showOrdersListAfterCreate","store","templateEngine","el","getElementById","Chat","Deal","isPaymentMode","leftPanel","orderSelector","initOrderSelector","arParams","getLoader","componentKey","orderList","orderSelectorBtn","setAttribute","popupMenu","menuItems","orderCaption","classList","remove","addEventListener","preventDefault","init","err","startProgress","stopProgress","buttonEvent","showLoader","isDomNode","add","hideLoader","reject","promise","deleteUrl","error_description","source","connectedSiteId","addAnalyticAction","getParameters","pop","sendCompilationToFacebook","sendCompilationAjaxAction","facebookSettingsPath","showFacebookCatalogConnectionPopup","facebookCatalogConnectionPopup","Popup","className","getFacebookCatalogConnectionPopupContent","overlay","padding","animation","closeIcon","right","setFacebookCatalogConnectionButton","Tag","render","setFacebookCatalogConnectionPopupHandler","sendLinkToB24CompilationButton","sendLinkToB24CompilationButtonPopupHandler","emitGlobalEvent","expectedDeliveryPrice","number","click","entity","encode","needCloseApplication","alwaysOpen","userOptionName","orderCreationOption","userOptionKeyName","paySystemBannerOptionName","eventName","emit","postMessage","builder","VuexBuilder","addModel","useNamespace","build"],"mappings":"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"}