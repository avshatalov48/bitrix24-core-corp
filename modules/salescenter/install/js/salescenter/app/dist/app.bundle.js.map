{"version":3,"file":"app.bundle.js","sources":["../src/models/application.js","../src/models/ordercreation.js","../src/config.js","../src/components/deal-receiving-payment/templates-type-mixin.js","../src/components/deal-receiving-payment/stage-blocks/send.js","../src/components/deal-receiving-payment/stage-blocks/tile-collection/tile-collection-mixins.js","../src/components/deal-receiving-payment/stage-blocks/tile-collection/uninstalled.js","../src/components/deal-receiving-payment/stage-blocks/tile-collection/installed.js","../src/components/deal-receiving-payment/stage-blocks/stage-mixin.js","../src/components/deal-receiving-payment/stage-blocks/cashbox.js","../src/bx-salescenter-app-add-payment-product.js","../src/components/basket-item-add.js","../src/bx-salescenter-app-add-payment.js","../src/components/deal-receiving-payment/stage-blocks/product.js","../src/components/delivery-selector.js","../src/components/deal-receiving-payment/stage-blocks/delivery-vuex.js","../src/components/deal-receiving-payment/stage-blocks/paysystem.js","../src/components/deal-receiving-payment/stage-blocks/sms-message.js","../src/components/deal-receiving-payment/stage-blocks/automation.js","../src/components/deal-receiving-payment/stage-blocks/timeline.js","../src/components/deal-receiving-payment/stage-blocks-list.js","../src/component.js","../src/app.js"],"sourcesContent":["import {VuexBuilderModel} from 'ui.vue.vuex';\n\nexport class ApplicationModel extends VuexBuilderModel\n{\n\t/**\n\t * @inheritDoc\n\t */\n\tgetName()\n\t{\n\t\treturn 'application';\n\t}\n\n\tgetState()\n\t{\n\t\treturn {\n\t\t\tpages: [],\n\t\t}\n\t}\n\n\tgetGetters()\n\t{\n\t\treturn {\n\t\t\tgetPages: (state) => () =>\n\t\t\t{\n\t\t\t\treturn state.pages;\n\t\t\t},\n\t\t}\n\t}\n\n\tgetMutations()\n\t{\n\t\treturn {\n\t\t\tsetPages: (state, payload) =>\n\t\t\t{\n\t\t\t\tif(typeof payload.pages === 'object')\n\t\t\t\t{\n\t\t\t\t\tstate.pages = payload.pages        ;\n\t\t\t\t\tthis.saveState(state);\n\t\t\t\t}\n\t\t\t},\n\t\t\tremovePage: (state, payload) =>\n\t\t\t{\n\t\t\t\tif(typeof payload.page === 'object')\n\t\t\t\t{\n\t\t\t\t\tstate.pages = state.pages.filter((page) => {\n\t\t\t\t\t\treturn !(\n\t\t\t\t\t\t\t(payload.page.id && payload.page.id > 0 && page.id === payload.page.id) ||\n\t\t\t\t\t\t\t(payload.page.landingId && payload.page.landingId > 0 && page.landingId === payload.page.landingId)\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\t\t\tthis.saveState(state);\n\t\t\t\t}\n\t\t\t},\n\t\t\taddPage: (state, payload) =>\n\t\t\t{\n\t\t\t\tif(typeof payload.page === 'object')\n\t\t\t\t{\n\t\t\t\t\tstate.pages.push(payload.page);\n\t\t\t\t\tthis.saveState(state);\n\t\t\t\t}\n\t\t\t},\n\t\t}\n\t}\n}","import {Vue} from 'ui.vue';\nimport {VuexBuilderModel} from 'ui.vue.vuex';\nimport \"currency\";\n\nexport class OrderCreationModel extends VuexBuilderModel\n{\n\t/**\n\t * @inheritDoc\n\t */\n\tgetName()\n\t{\n\t\treturn 'orderCreation';\n\t}\n\n\tgetState()\n\t{\n\t\treturn {\n\t\t\tcurrency: '',\n\t\t\tprocessingId: null,\n\t\t\tshowPaySystemSettingBanner: false,\n\t\t\tselectedProducts: [],\n\t\t\tbasket: [],\n\t\t\tbasketVersion: 0,\n\t\t\tpropertyValues: [],\n\t\t\tdeliveryExtraServicesValues: [],\n\t\t\texpectedDelivery: null,\n\t\t\tdeliveryResponsibleId: null,\n\t\t\tpersonTypeId: null,\n\t\t\tdeliveryId: null,\n\t\t\tdelivery: null,\n\t\t\tisEnabledSubmit: false,\n\t\t\terrors: [],\n\t\t\ttotal: {\n\t\t\t\tsum: null,\n\t\t\t\tdiscount: null,\n\t\t\t\tresult: null,\n\t\t\t\tresultNumeric: null,\n\t\t\t},\n\t\t}\n\t}\n\n\tgetActions()\n\t{\n\t\treturn {\n\t\t\tresetBasket ({ commit })\n\t\t\t{\n\t\t\t\tcommit('clearBasket');\n\t\t\t},\n\t\t\tsetCurrency: ({ commit }, payload) =>\n\t\t\t{\n\t\t\t\tconst currency = payload || '';\n\t\t\t\tcommit('setCurrency', currency);\n\t\t\t},\n\t\t\tenableSubmitButton: ({ commit }, payload) =>\n\t\t\t{\n\t\t\t\tcommit('setSubmitButtonStatus', true);\n\t\t\t},\n\t\t\tdisableSubmitButton: ({ commit }, payload) =>\n\t\t\t{\n\t\t\t\tcommit('setSubmitButtonStatus', false);\n\t\t\t},\n\t\t\tsetDeliveryId: ({ commit }, payload) =>\n\t\t\t{\n\t\t\t\tcommit('setDeliveryId', payload);\n\t\t\t},\n\t\t\tsetDelivery: ({ commit }, payload) =>\n\t\t\t{\n\t\t\t\tcommit('setDelivery', payload);\n\t\t\t},\n\t\t\tsetPropertyValues: ({ commit }, payload) =>\n\t\t\t{\n\t\t\t\tcommit('setPropertyValues', payload);\n\t\t\t},\n\t\t\tsetDeliveryExtraServicesValues: ({ commit }, payload) =>\n\t\t\t{\n\t\t\t\tcommit('setDeliveryExtraServicesValues', payload);\n\t\t\t},\n\t\t\tsetExpectedDelivery: ({ commit }, payload) =>\n\t\t\t{\n\t\t\t\tcommit('setExpectedDelivery', payload);\n\t\t\t},\n\t\t\tsetDeliveryResponsibleId: ({ commit }, payload) =>\n\t\t\t{\n\t\t\t\tcommit('setDeliveryResponsibleId', payload);\n\t\t\t},\n\t\t\tsetPersonTypeId: ({ commit }, payload) =>\n\t\t\t{\n\t\t\t\tcommit('setPersonTypeId', payload);\n\t\t\t},\n\t\t}\n\t}\n\n\tgetGetters()\n\t{\n\t\treturn {\n\t\t\tgetBasket: state => index =>\n\t\t\t{\n\t\t\t\treturn state.basket;\n\t\t\t},\n\t\t\tisAllowedSubmit: state =>\n\t\t\t{\n\t\t\t\treturn state.isEnabledSubmit;\n\t\t\t},\n\t\t\tgetTotal: state =>\n\t\t\t{\n\t\t\t\treturn state.total;\n\t\t\t},\n\t\t\tgetDelivery: state =>\n\t\t\t{\n\t\t\t\treturn state.delivery;\n\t\t\t},\n\t\t\tgetDeliveryId: state =>\n\t\t\t{\n\t\t\t\treturn state.deliveryId;\n\t\t\t},\n\t\t\tgetPropertyValues: state =>\n\t\t\t{\n\t\t\t\treturn state.propertyValues;\n\t\t\t},\n\t\t\tgetDeliveryExtraServicesValues: state =>\n\t\t\t{\n\t\t\t\treturn state.deliveryExtraServicesValues;\n\t\t\t},\n\t\t\tgetExpectedDelivery: state =>\n\t\t\t{\n\t\t\t\treturn state.expectedDelivery;\n\t\t\t},\n\t\t\tgetDeliveryResponsibleId: state =>\n\t\t\t{\n\t\t\t\treturn state.deliveryResponsibleId;\n\t\t\t},\n\t\t\tgetPersonTypeId: state =>\n\t\t\t{\n\t\t\t\treturn state.personTypeId;\n\t\t\t},\n\t\t}\n\t}\n\n\tgetMutations()\n\t{\n\t\treturn {\n\t\t\tsetBasket: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.basket = payload;\n\t\t\t},\n\t\t\tsetTotal: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.total = Object.assign(state.total, payload);\n\t\t\t},\n\t\t\tclearBasket: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.basket = [];\n\t\t\t\tstate.basketVersion++ ;\n\t\t\t},\n\t\t\tsetErrors: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.errors = payload;\n\t\t\t},\n\t\t\tsetDeliveryId: (state, deliveryId) =>\n\t\t\t{\n\t\t\t\tstate.deliveryId = deliveryId;\n\t\t\t},\n\t\t\tsetDelivery: (state, delivery) =>\n\t\t\t{\n\t\t\t\tstate.delivery = delivery;\n\t\t\t},\n\t\t\tsetPropertyValues: (state, propertyValues) =>\n\t\t\t{\n\t\t\t\tstate.propertyValues = propertyValues;\n\t\t\t},\n\t\t\tsetDeliveryExtraServicesValues: (state, deliveryExtraServicesValues) =>\n\t\t\t{\n\t\t\t\tstate.deliveryExtraServicesValues = deliveryExtraServicesValues;\n\t\t\t},\n\t\t\tsetExpectedDelivery: (state, expectedDelivery) =>\n\t\t\t{\n\t\t\t\tstate.expectedDelivery = expectedDelivery;\n\t\t\t},\n\t\t\tsetDeliveryResponsibleId: (state, deliveryResponsibleId) =>\n\t\t\t{\n\t\t\t\tstate.deliveryResponsibleId = deliveryResponsibleId;\n\t\t\t},\n\t\t\tclearErrors: (state) =>\n\t\t\t{\n\t\t\t\tstate.errors = [];\n\t\t\t},\n\t\t\tsetProcessingId: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.processingId = payload;\n\t\t\t},\n\t\t\tsetCurrency: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.currency = payload;\n\t\t\t},\n\t\t\tsetPersonTypeId: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.personTypeId = payload;\n\t\t\t},\n\t\t\tshowBanner: (state) =>\n\t\t\t{\n\t\t\t\tstate.showPaySystemSettingBanner = true;\n\t\t\t},\n\t\t\thideBanner: (state) =>\n\t\t\t{\n\t\t\t\tstate.showPaySystemSettingBanner = false;\n\t\t\t},\n\t\t\tenableSubmit: (state) =>\n\t\t\t{\n\t\t\t\tstate.isEnabledSubmit = true;\n\t\t\t},\n\t\t\tdisableSubmit: (state) =>\n\t\t\t{\n\t\t\t\tstate.isEnabledSubmit = false;\n\t\t\t},\n\t\t}\n\t}\n}","export const config = Object.freeze({\n\tdatabaseConfig: {\n\t\tname: 'salescenter.app',\n\t},\n\ttemplateName: 'bx-salescenter-app',\n\ttemplateAddPaymentName: 'bx-salescenter-app-add-payment',\n\ttemplateAddPaymentProductName: 'bx-salescenter-app-add-payment-product',\n\ttemplateAddPaymentBySms: 'bx-salescenter-app-add-payment-by-sms',\n\ttemplateAddPaymentBySmsItem: 'bx-salescenter-app-add-payment-by-sms-item',\n\tmoduleId: 'salescenter',\n});","let MixinTemplatesType = {\n\tdata() {\n\t\treturn {\n\t\t\teditable: true\n\t\t};\n\t},\n\tcreated(){\n\t\tthis.$root.$on(\"on-change-editable\", (value) => {\n\t\t\tthis.editable = value;\n\t\t});\n\t}\n}\n\nexport {\n\tMixinTemplatesType\n}","import {Block} \tfrom 'salescenter.component.stage-block';\nimport {\n\tSendModeEnabled as Enabled,\n\tSendModeDisabled as Disabled\n} \t\t\t\t\t\t\t\tfrom 'salescenter.component.stage-block.send';\n\nconst Send = {\n\tprops: {\n\t\tallowed: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true\n\t\t},\n\t\tresend: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true\n\t\t}\n\t},\n\tcomponents:\n\t\t{\n\t\t\t'stage-block-item'\t\t\t:\tBlock,\n\t\t\t'send-mode-enabled-block'\t:\tEnabled,\n\t\t\t'send-mode-disabled-block'\t:\tDisabled\n\t\t},\n\tcomputed:\n\t\t{\n\t\t\tclasses()\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\t'salescenter-app-payment-by-sms-item-disabled'\t:\tthis.allowed === false,\n\t\t\t\t\t'salescenter-app-payment-by-sms-item'\t\t\t:\ttrue,\n\t\t\t\t\t'salescenter-app-payment-by-sms-item-send'\t\t:\ttrue,\n\t\t\t\t};\n\t\t\t},\n\n\t\t\tconfigForBlock()\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\tcounter: ''\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\tmethods:\n\t\t{\n\t\t\topenWhatClientSee(event)\n\t\t\t{\n\t\t\t\tBX.Salescenter.Manager.openWhatClientSee(event)\n\t\t\t},\n\t\t\tonSend(event)\n\t\t\t{\n\t\t\t\tthis.$emit('stage-block-send-on-send', event)\n\t\t\t}\n\t\t},\n\ttemplate: `\n\t\t<stage-block-item\n\t\t\t:class=\"classes\"\n\t\t\t:config=\"configForBlock\"\n\t\t>\n\t\t\t<template v-slot:block-container>\n\t\t\t\t<send-mode-enabled-block\t\t\t\tv-if=\"allowed\"\n\t\t\t\t\t:resend=\"resend\" \n\t\t\t\t\tv-on:stage-block-send-mode-enabled-send=\"onSend\"\n\t\t\t\t\tv-on:stage-block-send-mode-enabled-see-client=\"openWhatClientSee\"\n\t\t\t\t/>\n\t\t\t\t<send-mode-disabled-block \t\t\t\tv-else\n\t\t\t\t\t:resend=\"resend\" \n\t\t\t\t\tv-on:stage-block-send-mode-disabled-send=\"onSend\"\n\t\t\t\t/>\n\t\t\t</template>\n\t\t</stage-block-item>\n\t`\n};\nexport {\n\tSend\n}","import\n{\n\tAppSlider,\n\tEventTypes\n} \t\t\t\t\t\t\t\tfrom 'salescenter.marketplace';\nimport\n{\n\tLabel,\n\tTileLabel,\n\tTileHintImg,\n\tTileLabelPlus,\n\tTileHintImgCaption,\n\tTileHintBackground,\n\tTileHintBackgroundCaption,\n} \t\t\t\t\t\t\t\tfrom 'salescenter.component.stage-block.tile';\nimport * as Hint \t\t\t\tfrom 'salescenter.component.stage-block.hint';\nimport * as Tile \t\t\t\tfrom 'salescenter.tile';\n\n\nlet TileCollectionMixins = {\n\n\tcomponents:\n\t\t{\n\t\t\t'label-block'\t\t\t\t\t\t\t:\tLabel,\n\t\t\t'tile-label-block'\t\t\t\t\t\t:\tTileLabel,\n\t\t\t'tile-hint-img-block'\t\t\t\t\t:\tTileHintImg,\n\t\t\t'tile-hint-plus-block'\t\t\t\t\t:\tTileLabelPlus,\n\t\t\t'tile-hint-img-caption-block'\t\t\t:\tTileHintImgCaption,\n\t\t\t'tile-hint-background-block'\t\t\t:\tTileHintBackground,\n\t\t\t'tile-hint-background-caption-block'\t:\tTileHintBackgroundCaption\n\t\t},\n\tmethods:\n\t\t{\n\t\t\tgetCollectionTile()\n\t\t\t{\n\t\t\t\treturn this.tiles;\n\t\t\t},\n\n\t\t\tgetCollectionTileByFilter(filter: Array)\n\t\t\t{\n\t\t\t\tlet map = new Map();\n\t\t\t\tlet collection = this.getCollectionTile();\n\n\t\t\t\tif(filter.hasOwnProperty('type') && filter.type.length > 0)\n\t\t\t\t{\n\t\t\t\t\tcollection\n\t\t\t\t\t\t.forEach((item, index) => {\n\n\t\t\t\t\t\t\tif(filter.type === item.getType())\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tmap.set(index, item);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tcollection\n\t\t\t\t\t\t.forEach((item, index) => map.set(index, item));\n\t\t\t\t}\n\n\t\t\t\treturn map;\n\t\t\t},\n\n\t\t\thasTileOfferFromCollection()\n\t\t\t{\n\t\t\t\tlet map = this.getCollectionTileByFilter({\n\t\t\t\t\ttype: Tile.Offer.type()\n\t\t\t\t});\n\n\t\t\t\treturn map.size > 0;\n\t\t\t},\n\n\t\t\thasTileMoreFromCollection()\n\t\t\t{\n\t\t\t\tlet map = this.getCollectionTileByFilter({\n\t\t\t\t\ttype: Tile.More.type()\n\t\t\t\t});\n\n\t\t\t\treturn map.size > 0;\n\t\t\t},\n\n\t\t\tgetTileOfferFromCollection()\n\t\t\t{\n\t\t\t\tlet map = this.getCollectionTileByFilter({\n\t\t\t\t\ttype: Tile.Offer.type()\n\t\t\t\t});\n\n\t\t\t\tlet result = {};\n\t\t\t\tmap.forEach((item, inx)=> { result = {index: inx, tile: item}; return false;});\n\t\t\t\treturn result;\n\t\t\t},\n\n\t\t\tgetTileMoreFromCollection()\n\t\t\t{\n\t\t\t\tlet map = this.getCollectionTileByFilter({\n\t\t\t\t\ttype: Tile.More.type()\n\t\t\t\t});\n\n\t\t\t\tlet result = {};\n\t\t\t\tmap.forEach((item, inx)=> { result = {index: inx, tile: item}; return false;});\n\t\t\t\treturn result;\n\t\t\t},\n\n\t\t\tgetTileByIndex(index)\n\t\t\t{\n\t\t\t\tlet  tile = null;\n\t\t\t\tthis.getCollectionTileByFilter({})\n\t\t\t\t\t.forEach((item, inx)=> {\n\n\t\t\t\t\t\tif(index === inx)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttile = item;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\treturn tile;\n\t\t\t},\n\n\t\t\topenSlider(inx)\n\t\t\t{\n\t\t\t\tlet slider = new AppSlider();\n\t\t\t\tlet tile = this.getTileByIndex(inx);\n\n\t\t\t\tslider.openAppLocal(tile, this.getOptionSlider);\n\t\t\t\tslider.subscribe(EventTypes.AppSliderSliderClose,\n\t\t\t\t\t(e) => this.$emit('on-tile-slider-close', {data: e.data})\n\t\t\t\t);\n\t\t\t},\n\n\t\t\tisControlTile(tile: Tile.Base)\n\t\t\t{\n\t\t\t\treturn [Tile.More.type(), Tile.Offer.type()].includes(tile.getType());\n\t\t\t},\n\n\t\t\tshowHint(inx, e)\n\t\t\t{\n\t\t\t\tlet event = e.data.event;\n\t\t\t\tlet tile = this.getTileByIndex(inx);\n\n\t\t\t\tthis.popup = new Hint.Popup();\n\t\t\t\tthis.popup.show(event.target, tile.info);\n\t\t\t},\n\n\t\t\thideHint()\n\t\t\t{\n\t\t\t\tif(this.popup)\n\t\t\t\t{\n\t\t\t\t\tthis.popup.hide();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\tcomputed:\n\t\t{\n\t\t\tgetOptionSlider()\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\twidth: 1000\n\t\t\t\t}\n\t\t\t}\n\t\t},\n};\nexport {\n\tTileCollectionMixins\n}","import {TileCollectionMixins} from \"./tile-collection-mixins\";\n\nconst Uninstalled = {\n\tprops: {\n\t\ttiles: {\n\t\t\ttype: Array,\n\t\t\trequired: true\n\t\t}\n\t},\n\tmixins:[TileCollectionMixins],\n\ttemplate: `\t\t\n\t\t<div>\n\t\t\t<template v-for=\"(tile, index) in tiles\">\n\t\t\t\t<tile-hint-background-caption-block\tv-if=\"tile.img.length > 0 && tile.showTitle\"\n\t\t\t\t\t:src=\"tile.img\"\n\t\t\t\t\t:name=\"tile.name\"\n\t\t\t\t\t:caption=\"tile.name\"\n\t\t\t\t\tv-on:tile-hint-bg-label-on-click=\"openSlider(index)\"\n\t\t\t\t\tv-on:tile-hint-bg-label-on-mouseenter=\"showHint(index, $event)\"\n\t\t\t\t\tv-on:tile-hint-bg-label-on-mouseleave=\"hideHint\"\n\t\t\t\t/>\n\t\t\t\t<tile-hint-background-block\t\tv-else-if=\"tile.img.length > 0\"\n\t\t\t\t\t:src=\"tile.img\"\n\t\t\t\t\t:name=\"tile.name\"\n\t\t\t\t\tv-on:tile-hint-bg-on-click=\"openSlider(index)\"\n\t\t\t\t\tv-on:tile-label-bg-hint-on-mouseenter=\"showHint(index, $event)\"\n\t\t\t\t\tv-on:tile-label-bg-hint-on-mouseleave=\"hideHint\"\n\t\t\t\t/>\n\t\t\t\t<tile-hint-plus-block\t\t\tv-else \n\t\t\t\t\t:name=\"tile.name\" \n\t\t\t\t\tv-on:tile-label-plus-on-click=\"openSlider(index)\"\n\t\t\t\t/> \n\t\t\t</template>\n\t\t</div>\n\t`\n};\nexport {\n\tUninstalled\n}","import {TileCollectionMixins} from \"./tile-collection-mixins\";\n\nconst Installed = {\n\tprops: {\n\t\ttiles: {\n\t\t\ttype: Array,\n\t\t\trequired: true\n\t\t}\n\t},\n\tmixins:[TileCollectionMixins],\n\n\ttemplate: `\t\n\t\t<div class=\"salescenter-app-payment-by-sms-item-container-payment\">\n\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container-payment-inline\">\n\t\t\t\t<tile-label-block class=\"salescenter-app-payment-by-sms-item-container-payment-item-text\"\n\t\t\t\t\tv-for=\"(tile, index) in tiles\"\n\t\t\t\t\tv-if=\"isControlTile(tile) === false\"\n\t\t\t\t\t:name=\"tile.name\" \n\t\t\t\t\tv-on:tile-label-on-click=\"openSlider(index)\"\n\t\t\t\t/>\n\t\t\t\t<br>\n\t\t\t\t<tile-label-block class=\"salescenter-app-payment-by-sms-item-container-payment-item-text-add\"\n\t\t\t\t\tv-if=\"hasTileOfferFromCollection() === true\"\n\t\t\t\t\t:name=\"getTileOfferFromCollection().tile.name\"\n\t\t\t\t\tv-on:tile-label-on-click=\"openSlider(getTileOfferFromCollection().index)\"\n\t\t\t\t/>\n\t\t\t\t<tile-label-block class=\"salescenter-app-payment-by-sms-item-container-payment-item-text-add\"\n\t\t\t\t\tv-if=\"hasTileMoreFromCollection() === true\"\n\t\t\t\t\t:name=\"getTileMoreFromCollection().tile.name\"\n\t\t\t\t\tv-on:tile-label-on-click=\"openSlider(getTileMoreFromCollection().index)\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t`\n};\nexport {\n\tInstalled\n}","import {StatusTypes as Status} from 'salescenter.component.stage-block';\n\nlet StageMixin = {\n\tcomputed:\n\t\t{\n\t\t\tstatusClassMixin()\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\t'salescenter-app-payment-by-sms-item'\t\t\t: true,\n\t\t\t\t\t'salescenter-app-payment-by-sms-item-current'\t: this.status === Status.current,\n\t\t\t\t\t'salescenter-app-payment-by-sms-item-disabled'\t: this.status === Status.disabled,\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tcontainerClassMixin()\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\t'salescenter-app-payment-by-sms-item-container'\t: true\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tcounterCheckedMixin()\n\t\t\t{\n\t\t\t\treturn this.status === Status.complete\n\t\t\t}\n\t\t},\n\t\tmethods:\n\t\t\t{\n\t\t\t\tonSliderClose(e)\n\t\t\t\t{\n\t\t\t\t\tthis.$emit('on-stage-tile-collection-slider-close', e);\n\t\t\t\t}\n\t\t\t}\n};\n\nexport {\n\tStageMixin\n}","import {Loc} \t\t\t\t\t\t\t\t\tfrom 'main.core';\nimport {Block} \t\t\tfrom 'salescenter.component.stage-block';\nimport {Uninstalled as TileUnInstalled} \t\tfrom \"./tile-collection/uninstalled\";\nimport {Installed as TileInstalled} \t\t\tfrom \"./tile-collection/installed\";\nimport {StageMixin} \t\t\t\t\t\t\tfrom \"./stage-mixin\";\n\nconst Cashbox = {\n\tprops: {\n\t\tstatus: {\n\t\t\ttype: String,\n\t\t\t\trequired: true\n\t\t},\n\t\tcounter: {\n\t\t\ttype: String,\n\t\t\t\trequired: true\n\t\t},\n\t\ttiles: {\n\t\t\ttype: Array,\n\t\t\t\trequired: true\n\t\t},\n\t\tinstalled: {\n\t\t\ttype: Boolean,\n\t\t\t\trequired: true\n\t\t},\n\t\ttitleItems: {\n\t\t\ttype: Array\n\t\t},\n\t\tinitialCollapseState: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true\n\t\t},\n\t},\n\tmixins:[StageMixin],\n\tcomponents:\n\t{\n\t\t'stage-block-item'\t\t\t\t\t:\tBlock,\n\t\t'tile-collection-installed-block'\t:\tTileInstalled,\n\t\t'tile-collection-uninstalled-block'\t:\tTileUnInstalled\n\t},\n\tcomputed:\n\t{\n\t\tstatusClass()\n\t\t{\n\t\t\treturn {\n\t\t\t\t'salescenter-app-payment-by-sms-item-disabled-bg': this.installed === false\n\t\t\t}\n\t\t},\n\n\t\ttitle()\n\t\t{\n\t\t\treturn this.installed === true\n\t\t\t\t? Loc.getMessage('SALESCENTER_CASHBOX_SET_BLOCK_TITLE')\n\t\t\t\t: Loc.getMessage('SALESCENTER_CASHBOX_BLOCK_TITLE');\n\t\t},\n\t\tconfigForBlock()\n\t\t{\n\t\t\treturn {\n\t\t\t\tcounter: this.counter,\n\t\t\t\ttitleItems: this.installed ? this.titleItems : [],\n\t\t\t\tinstalled: this.installed,\n\t\t\t\tcollapsible: true,\n\t\t\t\tchecked: this.counterCheckedMixin,\n\t\t\t\tshowHint: !this.installed,\n\t\t\t\tinitialCollapseState: this.initialCollapseState,\n\t\t\t}\n\t\t}\n\t},\n\tmethods:\n\t{\n\t\tonItemHint(e)\n\t\t{\n\t\t\tBX.Salescenter.Manager.openHowToConfigCashBox(e);\n\t\t},\n\t\tsaveCollapsedOption(option)\n\t\t{\n\t\t\tthis.$emit('on-save-collapsed-option', 'cashbox', option);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<stage-block-item\n\t\t\t:class=\"[statusClassMixin, statusClass]\"\n\t\t\t:config=\"configForBlock\"\n\t\t\t@on-item-hint.stop.prevent=\"onItemHint\"\n\t\t\t@on-tile-slider-close=\"onSliderClose\"\n\t\t\t@on-adjust-collapsed=\"saveCollapsedOption\"\n\t\t>\n\t\t\t<template v-slot:block-title-title>{{title}}</template>\n\t\t\t<template v-slot:block-hint-title>${Loc.getMessage('SALESCENTER_CASHBOX_BLOCK_SETTINGS_TITLE')}</template>\n\t\t\t<template v-slot:block-container>\n\t\t\t\t<div :class=\"containerClassMixin\">\n\t\t\t\t\t<tile-collection-uninstalled-block \t:tiles=\"tiles\" v-if=\"!installed\"/>\n\t\t\t\t\t<tile-collection-installed-block :tiles=\"tiles\" v-on:on-tile-slider-close=\"onSliderClose\" v-else />\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</stage-block-item>\n\t`\n};\n\nexport\n{\n\tCashbox\n}","import {config} from \"./config\";\nimport {Vue} from \"ui.vue\";\nimport {PopupMenuWindow} from 'main.popup';\nimport {Popup} from 'main.popup';\n\nimport \"ui.dropdown\";\nimport \"ui.common\";\nimport \"ui.alerts\";\nimport {MixinTemplatesType} from \"./components/deal-receiving-payment/templates-type-mixin\";\nimport {type BaseEvent, EventEmitter} from 'main.core.events';\n\nVue.component(config.templateAddPaymentProductName,\n\t{\n\t\t/**\n\t\t * @emits 'changeBasketItem' {index: number, fields: object}\n\t\t * @emits 'refreshBasket'\n\t\t * @emits 'removeItem' {index: number}\n\t\t */\n\n\t\tprops: ['basketItem', 'basketItemIndex', 'countItems', 'selectedProductIds'],\n\t\tmixins:[MixinTemplatesType],\n\t\tdata()\n\t\t{\n\t\t\treturn {\n\t\t\t\ttimer: null,\n\t\t\t\tproductSelector: null,\n\t\t\t\tisImageAdded: false,\n\t\t\t\timageControlId: null,\n\t\t\t};\n\t\t},\n\t\tcreated()\n\t\t{\n\t\t\tthis.currencySymbol = this.$root.$app.options.currencySymbol;\n\t\t\tthis.defaultMeasure = {\n\t\t\t\tname: '',\n\t\t\t\tid: null,\n\t\t\t};\n\t\t\tthis.measures = this.$root.$app.options.measures || [];\n\t\t\tif (BX.type.isArray(this.measures) && this.measures)\n\t\t\t{\n\t\t\t\tthis.measures.map((measure) => {\n\t\t\t\t\tif (measure['IS_DEFAULT'] === 'Y')\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.defaultMeasure.name = measure.SYMBOL;\n\t\t\t\t\t\tthis.defaultMeasure.code = measure.CODE;\n\n\t\t\t\t\t\tif (!this.basketItem.measureName && !this.basketItem.measureName)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.changeData({\n\t\t\t\t\t\t\t\tmeasureCode: this.defaultMeasure.code,\n\t\t\t\t\t\t\t\tmeasureName: this.defaultMeasure.name\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tEventEmitter.subscribe('onUploaderIsInited', this.onUploaderIsInitedHandler.bind(this));\n\t\t},\n\t\tmounted()\n\t\t{\n\t\t\tthis.productSelector = new BX.UI.Dropdown(\n\t\t\t\t{\n\t\t\t\t\tsearchAction: \"salescenter.api.order.searchProduct\",\n\t\t\t\t\tsearchOptions: {\n\t\t\t\t\t\trestrictedSearchIds: this.selectedProductIds\n\t\t\t\t\t},\n\t\t\t\t\tenableCreation: true,\n\t\t\t\t\tenableCreationOnBlur: false,\n\t\t\t\t\tsearchResultRenderer: null,\n\t\t\t\t\ttargetElement: this.$refs.searchProductLine,\n\t\t\t\t\titems: this.getProductSelectorItems(),\n\t\t\t\t\tmessages:\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcreationLegend: this.localize.SALESCENTER_PRODUCT_CREATE,\n\t\t\t\t\t\t\tnotFound: this.localize.SALESCENTER_PRODUCT_NOT_FOUND,\n\t\t\t\t\t\t},\n\t\t\t\t\tevents:\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tonSelect: this.selectCatalogItem.bind(this),\n\t\t\t\t\t\t\tonAdd: this.showCreationForm.bind(this),\n\t\t\t\t\t\t\tonReset: this.resetSearchForm.bind(this)\n\t\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tif (!this.basketItem.hasOwnProperty('id'))\n\t\t\t{\n\t\t\t\tthis.initDefaultFileControl();\n\t\t\t}\n\t\t},\n\t\tupdated()\n\t\t{\n\t\t\tif (this.basketItem.hasOwnProperty('fileControlJs') && !this.basketItem.productId)\n\t\t\t{\n\t\t\t\tlet fileControlJs = this.basketItem.fileControlJs;\n\t\t\t\tif (fileControlJs)\n\t\t\t\t{\n\t\t\t\t\tfileControlJs.forEach((fileControlJsItem) => {\n\t\t\t\t\t\tBX.evalGlobal(fileControlJsItem);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tdirectives:\n\t\t\t{\n\t\t\t\t'bx-search-product':\n\t\t\t\t\t{\n\t\t\t\t\t\tinserted(element, binding)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (binding.value.selector instanceof BX.UI.Dropdown)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tconst restrictedSearchIds = binding.value.restrictedIds;\n\t\t\t\t\t\t\t\tbinding.value.selector.targetElement = element;\n\t\t\t\t\t\t\t\tif (BX.type.isArray(restrictedSearchIds))\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tbinding.value.selector.searchOptions = {restrictedSearchIds};\n\t\t\t\t\t\t\t\t\tbinding.value.selector.items = binding.value.selector.items.filter(\n\t\t\t\t\t\t\t\t\t\titem => !restrictedSearchIds.includes(item.id)\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tbinding.value.selector.init()\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t},\n\n\t\tmethods:\n\t\t\t{\n\t\t\t\tonUploaderIsInitedHandler(event: BaseEvent)\n\t\t\t\t{\n\t\t\t\t\tif (this.basketItem.productId)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst [, uploader] = event.getCompatData();\n\n\t\t\t\t\tEventEmitter.subscribe(uploader, 'onFileIsUploaded', this.onFileIsUploadedHandler.bind(this));\n\t\t\t\t\tEventEmitter.subscribe(uploader, 'onFileIsDeleted', this.onFileIsDeleteHandler.bind(this));\n\t\t\t\t},\n\t\t\t\tonFileIsUploadedHandler(event: BaseEvent)\n\t\t\t\t{\n\t\t\t\t\tconst [fileId, , params, uploader] = event.getCompatData();\n\n\t\t\t\t\tif (!this.imageControlId)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.imageControlId = uploader.CID;\n\t\t\t\t\t}\n\t\t\t\t\telse if (this.imageControlId !== uploader.CID)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tlet images = this.basketItem.image,\n\t\t\t\t\t\tfile = params && params['file'] && params['file']['files'] && params['file']['files']['default']\n\t\t\t\t\t\t\t? params['file']['files']['default']\n\t\t\t\t\t\t\t: false;\n\n\t\t\t\t\tif (file)\n\t\t\t\t\t{\n\t\t\t\t\t\timages.push({\n\t\t\t\t\t\t\tfileId: fileId,\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\tname: file.name,\n\t\t\t\t\t\t\t\ttype: file.type,\n\t\t\t\t\t\t\t\ttmp_name: file.path,\n\t\t\t\t\t\t\t\tsize: file.size,\n\t\t\t\t\t\t\t\terror: null,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tlet fields = {\n\t\t\t\t\t\t\timage: images,\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tfields.isCreatedProduct = 'Y';\n\n\t\t\t\t\t\tthis.changeData(fields);\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.isImageAdded = true;\n\t\t\t\t},\n\t\t\t\tonFileIsDeleteHandler(event: BaseEvent)\n\t\t\t\t{\n\t\t\t\t\tconst [fileId] = event.getCompatData();\n\n\t\t\t\t\tlet images = this.basketItem.image;\n\t\t\t\t\timages.forEach(function (item, index, object) {\n\t\t\t\t\t\tif (item.fileId === fileId)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tobject.splice(index, 1);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tlet fields = {\n\t\t\t\t\t\timage: images,\n\t\t\t\t\t};\n\n\t\t\t\t\tthis.changeData(fields);\n\t\t\t\t},\n\t\t\t\ttoggleDiscount(value)\n\t\t\t\t{\n\t\t\t\t\tthis.changeData(\n\t\t\t\t\t\t{showDiscount: value}\n\t\t\t\t\t);\n\n\t\t\t\t\tvalue === 'Y' ? setTimeout(() => this.$refs.discountInput.focus()) : null;\n\t\t\t\t},\n\t\t\t\tchangeData(fields)\n\t\t\t\t{\n\t\t\t\t\tthis.$emit('changeBasketItem', {\n\t\t\t\t\t\tindex: this.basketItemIndex,\n\t\t\t\t\t\tfields: fields\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tisNeedRefreshAfterChanges()\n\t\t\t\t{\n\t\t\t\t\tif (this.isCreationMode)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn this.basketItem.name.length > 0\n\t\t\t\t\t\t\t&& this.basketItem.quantity > 0\n\t\t\t\t\t\t\t&& this.basketItem.price > 0\n\t\t\t\t\t}\n\n\t\t\t\t\treturn true;\n\t\t\t\t},\n\t\t\t\trefreshBasket()\n\t\t\t\t{\n\t\t\t\t\tif (this.isNeedRefreshAfterChanges())\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$emit('refreshBasket');\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tdebouncedRefresh(delay)\n\t\t\t\t{\n\t\t\t\t\tif (this.timer)\n\t\t\t\t\t{\n\t\t\t\t\t\tclearTimeout(this.timer);\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.timer = setTimeout(() => {\n\t\t\t\t\t\tthis.refreshBasket();\n\t\t\t\t\t\tthis.timer = null;\n\t\t\t\t\t}, delay);\n\t\t\t\t},\n\t\t\t\tchangeQuantity(event)\n\t\t\t\t{\n\t\t\t\t\tevent.target.value = event.target.value.replace(/[^.\\d]/g,'.');\n\t\t\t\t\tlet newQuantity = parseFloat(event.target.value);\n\t\t\t\t\tlet lastSymbol = event.target.value.substr(-1);\n\n\t\t\t\t\tif (!newQuantity || lastSymbol === '.')\n\t\t\t\t\t{\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tlet fields = this.basketItem;\n\t\t\t\t\tfields.quantity = newQuantity;\n\t\t\t\t\tthis.changeData(fields);\n\n\t\t\t\t\tthis.debouncedRefresh(300);\n\t\t\t\t},\n\t\t\t\tchangeName(event)\n\t\t\t\t{\n\t\t\t\t\tlet newName = event.target.value;\n\t\t\t\t\tlet fields = this.basketItem;\n\t\t\t\t\tfields.name = newName;\n\t\t\t\t\tthis.changeData(fields);\n\t\t\t\t\tthis.refreshBasket();\n\t\t\t\t},\n\t\t\t\tchangePrice(event)\n\t\t\t\t{\n\t\t\t\t\tevent.target.value = event.target.value.replace(/[^.,\\d]/g,'');\n\t\t\t\t\tif (event.target.value === '')\n\t\t\t\t\t{\n\t\t\t\t\t\tevent.target.value = 0;\n\t\t\t\t\t}\n\t\t\t\t\tlet lastSymbol = event.target.value.substr(-1);\n\t\t\t\t\tif (lastSymbol === ',')\n\t\t\t\t\t{\n\t\t\t\t\t\tevent.target.value = event.target.value.replace(',', \".\");\n\t\t\t\t\t}\n\t\t\t\t\tlet newPrice = parseFloat(event.target.value);\n\t\t\t\t\tif (newPrice < 0|| lastSymbol === '.' || lastSymbol === ',')\n\t\t\t\t\t{\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tlet fields = this.basketItem;\n\t\t\t\t\tfields.price = newPrice;\n\t\t\t\t\tfields.discount = 0;\n\n\t\t\t\t\tif (fields.module !== 'catalog')\n\t\t\t\t\t{\n\t\t\t\t\t\tfields.basePrice = newPrice;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tfields.isCustomPrice = 'Y';\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.changeData(fields);\n\n\t\t\t\t\tthis.refreshBasket();\n\t\t\t\t},\n\t\t\t\t/**\n\t\t\t\t *\n\t\t\t\t * @param discountType {string}\n\t\t\t\t */\n\t\t\t\tchangeDiscountType(discountType)\n\t\t\t\t{\n\t\t\t\t\tlet type = (discountType === 'currency') ? 'currency' : 'percent';\n\t\t\t\t\tlet fields = this.basketItem;\n\t\t\t\t\tfields.discountType = type;\n\t\t\t\t\tfields.price = fields.basePrice;\n\t\t\t\t\tfields.isCustomPrice = 'Y';\n\n\t\t\t\t\tthis.changeData(fields);\n\n\t\t\t\t\tthis.refreshBasket();\n\t\t\t\t},\n\t\t\t\tchangeDiscount(event)\n\t\t\t\t{\n\t\t\t\t\tlet discountValue = parseFloat(event.target.value) || 0;\n\t\t\t\t\tif (discountValue === parseFloat(this.basketItem.discount))\n\t\t\t\t\t{\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tlet fields = this.basketItem;\n\t\t\t\t\tfields.discount = discountValue;\n\t\t\t\t\tfields.price = fields.basePrice;\n\t\t\t\t\tfields.isCustomPrice = 'Y';\n\n\t\t\t\t\tthis.changeData(fields);\n\n\t\t\t\t\tthis.refreshBasket();\n\t\t\t\t},\n\t\t\t\tshowCreationForm()\n\t\t\t\t{\n\t\t\t\t\tif (!(this.productSelector instanceof BX.UI.Dropdown))\n\t\t\t\t\t\treturn true;\n\n\t\t\t\t\tconst value = this.productSelector.targetElement.value;\n\t\t\t\t\tlet fields = {\n\t\t\t\t\t\tproductId: '',\n\t\t\t\t\t\tquantity: 1,\n\t\t\t\t\t\tmodule: null,\n\t\t\t\t\t\tsort: this.basketItemIndex,\n\t\t\t\t\t\tisCreatedProduct: 'Y',\n\t\t\t\t\t\tname: value,\n\t\t\t\t\t\tisCustomPrice: 'Y',\n\t\t\t\t\t\tdiscountInfos: [],\n\t\t\t\t\t\terrors: [],\n\t\t\t\t\t};\n\n\t\t\t\t\tif (!this.isImageAdded)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.initDefaultFileControl(fields);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.changeData(fields);\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.productSelector.destroyPopupWindow();\n\t\t\t\t},\n\t\t\t\tresetSearchForm()\n\t\t\t\t{\n\t\t\t\t\tif (!(this.productSelector instanceof BX.UI.Dropdown))\n\t\t\t\t\t\treturn true;\n\n\t\t\t\t\tthis.productSelector.targetElement.value = '';\n\t\t\t\t\tthis.productSelector.updateItemsList(this.getProductSelectorItems());\n\n\t\t\t\t\tlet fields = {\n\t\t\t\t\t\tproductId: '',\n\t\t\t\t\t\tcode: null,\n\t\t\t\t\t\tmodule: null,\n\t\t\t\t\t\tname: '',\n\t\t\t\t\t\tquantity: 0,\n\t\t\t\t\t\tprice: 0,\n\t\t\t\t\t\tbasePrice: 0,\n\t\t\t\t\t\tdiscount: 0,\n\t\t\t\t\t\tdiscountInfos: [],\n\t\t\t\t\t\timage:[],\n\t\t\t\t\t\terrors:['SALE_BASKET_ITEM_NAME'],\n\t\t\t\t\t};\n\n\t\t\t\t\tthis.initDefaultFileControl(fields).then(() => {\n\t\t\t\t\t\tthis.refreshBasket();\n\t\t\t\t\t});\n\n\t\t\t\t\tthis.isImageAdded = false;\n\t\t\t\t\tthis.imageControlId = null;\n\t\t\t\t\tthis.productSelector.destroyPopupWindow();\n\t\t\t\t},\n\t\t\t\thideCreationForm()\n\t\t\t\t{\n\t\t\t\t\tif (!(this.productSelector instanceof BX.UI.Dropdown))\n\t\t\t\t\t\treturn true;\n\n\t\t\t\t\tlet fields = {\n\t\t\t\t\t\tisCreatedProduct: 'N',\n\t\t\t\t\t\tproductId: '',\n\t\t\t\t\t\tname: '',\n\t\t\t\t\t\tquantity: 0,\n\t\t\t\t\t\tprice: 0,\n\t\t\t\t\t\tbasePrice: 0,\n\t\t\t\t\t\tdiscount: 0,\n\t\t\t\t\t\tdiscountInfos: [],\n\t\t\t\t\t\timage:[],\n\t\t\t\t\t\terrors:[],\n\t\t\t\t\t};\n\n\t\t\t\t\tthis.initDefaultFileControl(fields).then(() => {\n\t\t\t\t\t\tthis.refreshBasket();\n\t\t\t\t\t});\n\n\t\t\t\t\tthis.isImageAdded = false;\n\t\t\t\t\tthis.imageControlId = null;\n\t\t\t\t},\n\t\t\t\tremoveItem()\n\t\t\t\t{\n\t\t\t\t\tthis.$emit('removeItem', {\n\t\t\t\t\t\tindex: this.basketItemIndex\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tselectCatalogItem(sender, item)\n\t\t\t\t{\n\t\t\t\t\tthis.$root.$app.startProgress();\n\t\t\t\t\tif (!sender instanceof BX.UI.Dropdown)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (item.id === undefined || parseInt(item.id) <= 0)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\n\t\t\t\t\tlet quantity = item.attributes && item.attributes.measureRatio ? item.attributes.measureRatio : item.quantity;\n\n\t\t\t\t\tlet fields = {\n\t\t\t\t\t\tname: item.title,\n\t\t\t\t\t\tproductId: item.id,\n\t\t\t\t\t\tsort: this.basketItemIndex,\n\t\t\t\t\t\tmodule: 'catalog',\n\t\t\t\t\t\tisCustomPrice: 'N',\n\t\t\t\t\t\tdiscount: 0,\n\t\t\t\t\t\tquantity: quantity,\n\t\t\t\t\t\tisCreatedProduct: 'N',\n\t\t\t\t\t\timage: [],\n\t\t\t\t\t};\n\n\t\t\t\t\tif (this.basketItemIndex.productId !== item.id)\n\t\t\t\t\t{\n\t\t\t\t\t\tfields.encodedFields = null;\n\t\t\t\t\t\tfields.discount = 0;\n\t\t\t\t\t\tfields.isCustomPrice = 'N';\n\t\t\t\t\t}\n\n\t\t\t\t\tBX.ajax.runAction(\n\t\t\t\t\t\t\"salescenter.api.order.getFileControl\",\n\t\t\t\t\t\t{ data: { productId: item.id } }\n\t\t\t\t\t).then((result) => {\n\t\t\t\t\t\tlet data = BX.prop.getObject(result, \"data\", {});\n\t\t\t\t\t\tif (data.fileControl)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlet fileControl = BX.processHTML(data.fileControl);\n\t\t\t\t\t\t\tfields.fileControlHtml = fileControl['HTML'];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.changeData(fields);\n\t\t\t\t\t\tthis.$emit('refreshBasket');\n\t\t\t\t\t});\n\n\t\t\t\t\tsender.destroyPopupWindow();\n\t\t\t\t},\n\t\t\t\topenDiscountEditor(e, url)\n\t\t\t\t{\n\t\t\t\t\tif(!(window.top.BX.SidePanel && window.top.BX.SidePanel.Instance))\n\t\t\t\t\t{\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\twindow.top.BX.SidePanel.Instance.open (\n\t\t\t\t\t\tBX.util.add_url_param( url, { \"IFRAME\": \"Y\", \"IFRAME_TYPE\": \"SIDE_SLIDER\", \"publicSidePanel\": \"Y\" } ),\n\t\t\t\t\t\t{ allowChangeHistory: false }\n\t\t\t\t\t);\n\n\t\t\t\t\te.preventDefault ? e.preventDefault() : (e.returnValue = false);\n\t\t\t\t},\n\t\t\t\tisEmptyProductName()\n\t\t\t\t{\n\t\t\t\t\treturn (this.basketItem.name.length === 0);\n\t\t\t\t},\n\t\t\t\tcalculateCorrectionFactor(quantity, measureRatio)\n\t\t\t\t{\n\t\t\t\t\tlet factoredQuantity = quantity;\n\t\t\t\t\tlet factoredRatio = measureRatio;\n\t\t\t\t\tlet correctionFactor = 1;\n\n\t\t\t\t\twhile (!(Number.isInteger(factoredQuantity) && Number.isInteger(factoredRatio)))\n\t\t\t\t\t{\n\t\t\t\t\t\tcorrectionFactor *= 10;\n\t\t\t\t\t\tfactoredQuantity = quantity * correctionFactor;\n\t\t\t\t\t\tfactoredRatio = measureRatio * correctionFactor;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn correctionFactor;\n\t\t\t\t},\n\t\t\t\tincrementQuantity()\n\t\t\t\t{\n\t\t\t\t\tlet correctionFactor = this.calculateCorrectionFactor(this.basketItem.quantity, this.basketItem.measureRatio);\n\t\t\t\t\tthis.basketItem.quantity = (this.basketItem.quantity * correctionFactor + this.basketItem.measureRatio * correctionFactor) / correctionFactor;\n\t\t\t\t\tthis.changeData(this.basketItem);\n\n\t\t\t\t\tthis.debouncedRefresh(300);\n\t\t\t\t},\n\t\t\t\tdecrementQuantity()\n\t\t\t\t{\n\t\t\t\t\tif (this.basketItem.quantity > this.basketItem.measureRatio)\n\t\t\t\t\t{\n\t\t\t\t\t\tlet correctionFactor = this.calculateCorrectionFactor(this.basketItem.quantity, this.basketItem.measureRatio);\n\t\t\t\t\t\tthis.basketItem.quantity = (this.basketItem.quantity * correctionFactor - this.basketItem.measureRatio * correctionFactor) / correctionFactor;\n\t\t\t\t\t\tthis.changeData(this.basketItem);\n\n\t\t\t\t\t\tthis.debouncedRefresh(300);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tshowPopupMenu(target, array, type)\n\t\t\t\t{\n\t\t\t\t\tif (!this.editable)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tlet menuItems = [];\n\t\t\t\t\tlet setItem = (ev, param) => {\n\t\t\t\t\t\ttarget.innerHTML = ev.target.innerHTML;\n\n\t\t\t\t\t\tif(type === 'discount')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.changeDiscountType(param.options.type);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.popupMenu.close();\n\t\t\t\t\t};\n\n\t\t\t\t\tif(type === 'discount')\n\t\t\t\t\t{\n\t\t\t\t\t\tarray = [];\n\t\t\t\t\t\tarray.percent = '%';\n\t\t\t\t\t\tarray.currency = this.currencySymbol;\n\t\t\t\t\t}\n\n\t\t\t\t\tif(array)\n\t\t\t\t\t{\n\t\t\t\t\t\tfor(let item in array)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlet text = array[item];\n\n\t\t\t\t\t\t\tif(type === 'measures')\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttext = array[item].SYMBOL;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tmenuItems.push({\n\t\t\t\t\t\t\t\ttext: text,\n\t\t\t\t\t\t\t\tonclick: setItem.bind({ value: 'settswguy' }),\n\t\t\t\t\t\t\t\ttype: type === 'discount' ? item : null\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.popupMenu = new PopupMenuWindow({\n\t\t\t\t\t\tbindElement: target,\n\t\t\t\t\t\titems: menuItems\n\t\t\t\t\t});\n\n\t\t\t\t\tthis.popupMenu.show();\n\t\t\t\t},\n\t\t\t\tinitDefaultFileControl(fields = {})\n\t\t\t\t{\n\t\t\t\t\treturn this.getDefaultFileControl().then((fileControl) => {\n\n\t\t\t\t\t\tlet fileControlData = BX.processHTML(fileControl);\n\t\t\t\t\t\tfields.fileControlHtml = fileControlData['HTML'];\n\t\t\t\t\t\tfields.fileControlJs = [];\n\t\t\t\t\t\tfor (let i in fileControlData['SCRIPT'])\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (fileControlData['SCRIPT'].hasOwnProperty(i))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tfields.fileControlJs.push(fileControlData['SCRIPT'][i]['JS']);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.changeData(fields);\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tgetDefaultFileControl()\n\t\t\t\t{\n\t\t\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\t\t\tBX.ajax.runAction(\n\t\t\t\t\t\t\t\"salescenter.api.order.getFileControl\"\n\t\t\t\t\t\t).then(\n\t\t\t\t\t\t\t(result) => {\n\t\t\t\t\t\t\t\tlet data = BX.prop.getObject(result, \"data\", {'fileControl': ''});\n\t\t\t\t\t\t\t\tif (data.fileControl)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tresolve(data.fileControl);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t(error) => {\n\t\t\t\t\t\t\t\treject(new Error(error.errors.join('<br />')));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tgetProductSelectorItems()\n\t\t\t\t{\n\t\t\t\t\tlet initialProducts = this.$root.$app.options.mostPopularProducts.map((item) => {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tid: item.ID,\n\t\t\t\t\t\t\ttitle: item.NAME,\n\t\t\t\t\t\t\tquantity: item.MEASURE_RATIO,\n\t\t\t\t\t\t\tmodule: 'salescenter',\n\t\t\t\t\t\t};\n\t\t\t\t\t});\n\n\t\t\t\t\tlet selectedProductIds = Array.isArray(this.selectedProductIds) ? this.selectedProductIds : [];\n\n\t\t\t\t\tlet productSelectorItems = initialProducts.filter((item) => {\n\t\t\t\t\t\treturn !item.id || !selectedProductIds.includes(item.id)\n\t\t\t\t\t});\n\n\t\t\t\t\tif (productSelectorItems.length)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn productSelectorItems;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\treturn [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttitle: '',\n\t\t\t\t\t\t\t\tsubTitle: this.localize.SALESCENTER_PRODUCT_BEFORE_SEARCH_TITLE\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t];\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tshowProductTooltip(e)\n\t\t\t\t{\n\t\t\t\t\tif(!this.productTooltip)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.productTooltip = new Popup({\n\t\t\t\t\t\t\tbindElement: e.target,\n\t\t\t\t\t\t\tmaxWidth: 400,\n\t\t\t\t\t\t\tdarkMode: true,\n\t\t\t\t\t\t\tinnerHTML: e.target.value,\n\t\t\t\t\t\t\tanimation: 'fading-slide'\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.productTooltip.setContent(e.target.value);\n\t\t\t\t\te.target.value.length > 0 ? this.productTooltip.show() : null;\n\t\t\t\t},\n\t\t\t\thideProductTooltip()\n\t\t\t\t{\n\t\t\t\t\tthis.productTooltip ? this.productTooltip.close() : null;\n\t\t\t\t}\n\t\t\t},\n\t\twatch: {\n\t\t\tselectedProductIds(newValue, oldValue) {\n\t\t\t\tlet newValueArray = Array.isArray(newValue) ? newValue : [];\n\t\t\t\tlet oldValueArray = Array.isArray(oldValue) ? oldValue : [];\n\n\t\t\t\tif (newValueArray.join() === oldValueArray.join())\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.productSelector.updateItemsList(this.getProductSelectorItems());\n\t\t\t}\n\t\t},\n\t\tcomputed:\n\t\t\t{\n\t\t\t\tlocalize()\n\t\t\t\t{\n\t\t\t\t\treturn Vue.getFilteredPhrases('SALESCENTER_PRODUCT_');\n\t\t\t\t},\n\t\t\t\tshowDiscount()\n\t\t\t\t{\n\t\t\t\t\treturn this.basketItem.showDiscount === 'Y';\n\t\t\t\t},\n\t\t\t\tshowPrice()\n\t\t\t\t{\n\t\t\t\t\treturn this.basketItem.discount > 0 || parseFloat(this.basketItem.price) !== parseFloat(this.basketItem.basePrice);\n\t\t\t\t},\n\t\t\t\tgetMeasureName()\n\t\t\t\t{\n\t\t\t\t\treturn this.basketItem.measureName || this.defaultMeasure.name;\n\t\t\t\t},\n\t\t\t\tgetMeasureCode()\n\t\t\t\t{\n\t\t\t\t\treturn this.basketItem.measureCode || this.defaultMeasure.code;\n\t\t\t\t},\n\t\t\t\tgetBasketFileControl()\n\t\t\t\t{\n\t\t\t\t\tlet fileControl = this.basketItem.fileControl, html = '';\n\t\t\t\t\tif (fileControl)\n\t\t\t\t\t{\n\t\t\t\t\t\tlet data = BX.processHTML(fileControl);\n\t\t\t\t\t\thtml = data['HTML'];\n\t\t\t\t\t}\n\n\t\t\t\t\treturn html;\n\t\t\t\t},\n\t\t\t\trestrictedSearchIds()\n\t\t\t\t{\n\t\t\t\t\tlet restrictedSearchIds = this.selectedProductIds;\n\t\t\t\t\tif (this.basketItem.module === 'catalog')\n\t\t\t\t\t{\n\t\t\t\t\t\trestrictedSearchIds = restrictedSearchIds.filter(id => id !== this.basketItem.productId);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn restrictedSearchIds;\n\t\t\t\t},\n\t\t\t\tisCreationMode()\n\t\t\t\t{\n\t\t\t\t\treturn this.basketItem.isCreatedProduct === 'Y';\n\t\t\t\t},\n\t\t\t\tisNotEnoughQuantity()\n\t\t\t\t{\n\t\t\t\t\treturn this.basketItem.errors.includes('SALE_BASKET_AVAILABLE_QUANTITY');\n\t\t\t\t},\n\t\t\t\thasPriceError()\n\t\t\t\t{\n\t\t\t\t\treturn this.basketItem.errors.includes('SALE_BASKET_ITEM_WRONG_PRICE');\n\t\t\t\t},\n\t\t\t\thasNameError()\n\t\t\t\t{\n\t\t\t\t\treturn this.basketItem.errors.includes('SALE_BASKET_ITEM_NAME');\n\t\t\t\t},\n\t\t\t\tproductInputWrapperClass()\n\t\t\t\t{\n\t\t\t\t\treturn {\n\t\t\t\t\t\t'ui-ctl': true,\n\t\t\t\t\t\t'ui-ctl-w100': true,\n\t\t\t\t\t\t'ui-ctl-md': true,\n\t\t\t\t\t\t'ui-ctl-after-icon': true,\n\t\t\t\t\t\t'ui-ctl-danger': this.hasNameError,\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t},\n\t\ttemplate: `\n\t\t<div class=\"salescenter-app-page-content-item\">\n\t\t\t<!--counters anr remover-->\n\t\t\t<div class=\"salescenter-app-counter\">{{basketItemIndex + 1}}</div>\n\t\t\t<div class=\"salescenter-app-remove\" @click=\"removeItem\" v-if=\"countItems > 1 && editable\"></div>\n\t\t\t<!--counters anr remover end-->\n\t\t\t\n\t\t\t<!--if isCreationMode-->\n\t\t\t<div class=\"salescenter-app-form-container\" v-if=\"!isCreationMode\">\n\t\t\t\t<div class=\"salescenter-app-form-row\">\n\t\t\t\t\t<!--col 1-->\n\t\t\t\t\t<div class=\"salescenter-app-form-col salescenter-app-form-col-prod\" style=\"flex:8\">\n\t\t\t\t\t\t<div class=\"salescenter-app-form-col-input\">\n\t\t\t\t\t\t\t<label class=\"salescenter-app-ctl-label-text ui-ctl-label-text\">{{localize.SALESCENTER_PRODUCT_NAME}}</label>\n\t\t\t\t\t\t\t<div :class=\"productInputWrapperClass\">\n\t\t\t\t\t\t\t\t<button class=\"ui-ctl-after ui-ctl-icon-clear\" @click=\"resetSearchForm\" v-if=\"basketItem.name.length > 0 && editable\"/>\n\t\t\t\t\t\t\t\t<!--<button class=\"ui-ctl-after ui-ctl-icon-clear\" @click=\"removeItem\" v-if=\"countItems > 1 && editable\"/>-->\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\tref=\"searchProductLine\" \n\t\t\t\t\t\t\t\t\tclass=\"ui-ctl-element ui-ctl-textbox salescenter-app-product-search\" \n\t\t\t\t\t\t\t\t\t:value=\"basketItem.name\"\n\t\t\t\t\t\t\t\t\tv-bx-search-product=\"{selector: productSelector, restrictedIds: restrictedSearchIds}\"\n\t\t\t\t\t\t\t\t\t:disabled=\"!editable\"\n\t\t\t\t\t\t\t\t\t:placeholder=\"localize.SALESCENTER_PRODUCT_NAME_PLACEHOLDER\" \n\t\t\t\t\t\t\t\t\t@mouseover=\"showProductTooltip(event)\"\n\t\t\t\t\t\t\t\t\t@mouseleave=\"hideProductTooltip(event)\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"salescenter-form-error\" v-if=\"hasNameError\">{{localize.SALESCENTER_PRODUCT_CHOOSE_PRODUCT}}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div v-if=\"getBasketFileControl\" class=\"salescenter-app-form-col-img\">\n\t\t\t\t\t\t\t<!-- loaded product -->\n\t\t\t\t\t\t\t<div v-html=\"getBasketFileControl\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div v-else class=\"salescenter-app-form-col-img\">\n\t\t\t\t\t\t\t<!-- selected product -->\n\t\t\t\t\t\t\t<div v-html=\"basketItem.fileControlHtml\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<!--col 1 end-->\n\n\t\t\t\t\t<!--col 2-->\n\t\t\t\t\t<div class=\"salescenter-app-form-col salescenter-app-form-col-sm\" style=\"flex:2\">\n\t\t\t\t\t\t<label class=\"salescenter-app-ctl-label-text salescenter-app-ctl-label-text-link ui-ctl-label-text\">\n\t\t\t\t\t\t\t{{localize.SALESCENTER_PRODUCT_QUANTITY.replace('#MEASURE_NAME#', ' ')}}\n\t\t\t\t\t\t\t<span @click=\"showPopupMenu($event.target, measures, 'measures')\">{{ getMeasureName }}</span>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-md ui-ctl-w100\" :class=\"isNotEnoughQuantity ? 'ui-ctl-danger' : ''\">\n\t\t\t\t\t\t\t<input \ttype=\"text\" class=\"ui-ctl-element ui-ctl-textbox\" \n\t\t\t\t\t\t\t\t\t:value=\"basketItem.quantity\"\n\t\t\t\t\t\t\t\t\t@change=\"changeQuantity\"\n\t\t\t\t\t\t\t\t\t:disabled=\"!editable\">\n\t\t\t\t\t\t\t<div class=\"salescenter-app-input-counter\" v-if=\"editable\">\n\t\t\t\t\t\t\t\t<div class=\"salescenter-app-input-counter-up\" @click=\"incrementQuantity\"></div>\n\t\t\t\t\t\t\t\t<div class=\"salescenter-app-input-counter-down\" @click=\"decrementQuantity\"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"salescenter-form-error\" v-if=\"isNotEnoughQuantity\">{{localize.SALESCENTER_PRODUCT_IS_NOT_AVAILABLE}}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<!--col 2 end-->\n\t\t\t\t\t\n\t\t\t\t\t<!--col 3-->\n\t\t\t\t\t<div class=\"salescenter-app-form-col salescenter-app-form-col-sm\" style=\"flex:2\">\n\t\t\t\t\t\t<label class=\"salescenter-app-ctl-label-text ui-ctl-label-text\">{{localize.SALESCENTER_PRODUCT_PRICE_2}}</label>\n\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-md ui-ctl-w100 salescenter-app-col-currency\" :class=\"hasPriceError ? 'ui-ctl-danger' : ''\">\n\t\t\t\t\t\t\t<input \ttype=\"text\" class=\"ui-ctl-element ui-ctl-textbox\"\n\t\t\t\t\t\t\t\t\t:value=\"basketItem.price\"\n\t\t\t\t\t\t\t\t\t@change=\"changePrice\"\n\t\t\t\t\t\t\t\t\t:disabled=\"!editable\">\n\t\t\t\t\t\t\t<div class=\"salescenter-app-col-currency-symbol\" v-html=\"currencySymbol\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<!--col 3 end-->\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t<!--show discount link-->\n\t\t\t\t<div class=\"salescenter-app-form-row\" v-if=\"editable || (!editable && showPrice)\">\n\t\t\t\t\t<div style=\"flex: 8;\"></div>\n\t\t\t\t\t<div class=\"salescenter-app-form-col salescenter-app-form-col-sm\" style=\"flex: 2;\">\n\t\t\t\t\t\t<div v-if=\"showDiscount\" class=\"salescenter-app-collapse-link-pointer-event\">{{localize.SALESCENTER_PRODUCT_DISCOUNT_PRICE_TITLE}}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"salescenter-app-form-col salescenter-app-form-col-sm\" style=\"flex:2\" v-if=\"showDiscount\">\n\t\t\t\t\t\t<div class=\"salescenter-app-collapse-link-hide\"  @click=\"toggleDiscount('N')\">{{localize.SALESCENTER_PRODUCT_DISCOUNT_TITLE}}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"salescenter-app-form-col salescenter-app-form-col-sm\" style=\"flex:2\" v-else>\n\t\t\t\t\t\t<div class=\"salescenter-app-collapse-link-show\"  @click=\"toggleDiscount('Y')\">{{localize.SALESCENTER_PRODUCT_DISCOUNT_TITLE}}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<!--show discount link end-->\n\t\t\t\t\n\t\t\t\t<!--dicount controller-->\n\t\t\t\t<div class=\"salescenter-app-form-row\" style=\"margin-bottom: 7px\" v-if=\"showDiscount\">\n\t\t\t\t\t<div class=\"salescenter-app-form-collapse-container\">\n\t\t\t\t\t\t<div class=\"salescenter-app-form-row\">\t\t\t\t\t\n\t\t\t\t\t\t\t<div class=\"salescenter-app-form-col\" style=\"flex: 8\"></div>\n\t\t\t\t\t\t\t<div class=\"salescenter-app-form-col  salescenter-app-form-col-sm\" style=\"flex:2; overflow: hidden;\">\n\t\t\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-md ui-ctl-w100 salescenter-app-col-currency\">\n\t\t\t\t\t\t\t\t\t<div class=\"ui-ctl-element ui-ctl-textbox salescenter-ui-ctl-element\" v-html=\"basketItem.basePrice\" disabled=\"true\"></div>\n\t\t\t\t\t\t\t\t\t<div class=\"salescenter-app-col-currency-symbol\" v-html=\"currencySymbol\"></div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"salescenter-app-form-col salescenter-app-form-col-sm\" style=\"flex:2; overflow: hidden;\">\n\t\t\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-after-icon ui-ctl-w100 ui-ctl-dropdown salescenter-app-col-currency\">\n\t\t\t\t\t\t\t\t\t<input \ttype=\"text\" class=\"ui-ctl-element ui-ctl-textbox\"\n\t\t\t\t\t\t\t\t\t\t\tref=\"discountInput\" \n\t\t\t\t\t\t\t\t\t\t\t:value=\"basketItem.discount\"\n\t\t\t\t\t\t\t\t\t\t\t@change=\"changeDiscount\"\n\t\t\t\t\t\t\t\t\t\t\t:disabled=\"!editable\">\n\t\t\t\t\t\t\t\t\t<div class=\"salescenter-app-col-currency-symbol salescenter-app-col-currency-symbol-link\" @click=\"showPopupMenu($event.target.firstChild, null, 'discount')\"><span v-html=\"basketItem.discountType === 'percent' ? '%' : currencySymbol\"></span></div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"salescenter-app-form-row\" style=\"margin-bottom: 0;\" v-if=\"editable\">\n\t\t\t\t\t\t\t<div class=\"salescenter-app-form-col\" v-for=\"discount in basketItem.discountInfos\"\">\n\t\t\t\t\t\t\t\t<span class=\"ui-text-4 ui-color-light\"> {{discount.name}}<a :href=\"discount.editPageUrl\" @click=\"openDiscountEditor(event, discount.editPageUrl)\">{{localize.SALESCENTER_PRODUCT_DISCOUNT_EDIT_PAGE_URL_TITLE}}</a></span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<!--dicount controller end-->\n\t\t\t\t\n\t\t\t</div>\n\t\t\t<!--endif isCreationMode-->\n\t\t\t\n\t\t\t<!--else isCreationMode-->\n\t\t\t<div class=\"salescenter-app-form-container\" v-else>\n\t\t\t\t<div class=\"salescenter-app-form-row\">\n\t\t\t\t\t<!--col 1-->\n\t\t\t\t\t<div class=\"salescenter-app-form-col salescenter-app-form-col-prod\" style=\"flex:8\">\n\t\t\t\t\t\t<div class=\"salescenter-app-form-col-input\">\n\t\t\t\t\t\t\t<label class=\"salescenter-app-ctl-label-text ui-ctl-label-text\">{{localize.SALESCENTER_PRODUCT_TITLE}}</label>\n\t\t\t\t\t\t\t<div :class=\"productInputWrapperClass\">\n\t\t\t\t\t\t\t\t<button class=\"ui-ctl-after ui-ctl-icon-clear\" @click=\"hideCreationForm\"> </button>\n\t\t\t\t\t\t\t\t<input \n\t\t\t\t\t\t\t\t\ttype=\"text\" \n\t\t\t\t\t\t\t\t\tclass=\"ui-ctl-element ui-ctl-textbox\" \n\t\t\t\t\t\t\t\t\t@change=\"changeName\" \n\t\t\t\t\t\t\t\t\t:value=\"basketItem.name\"\n\t\t\t\t\t\t\t\t\t@mouseover=\"showProductTooltip(event)\"\n\t\t\t\t\t\t\t\t\t@mouseleave=\"hideProductTooltip(event)\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div class=\"ui-ctl-tag\">{{localize.SALESCENTER_PRODUCT_NEW_LABEL}}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"salescenter-form-error\" v-if=\"hasNameError\">{{localize.SALESCENTER_PRODUCT_EMPTY_PRODUCT_NAME}}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"salescenter-app-form-col-img\">\n\t\t\t\t\t\t\t<!-- new product -->\n\t\t\t\t\t\t\t<div v-html=\"basketItem.fileControlHtml\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<!--col 1 end-->\n\t\t\t\t\t\n\t\t\t\t\t<!--col 2-->\n\t\t\t\t\t<div class=\"salescenter-app-form-col salescenter-app-form-col-sm\" style=\"flex:2\">\n\t\t\t\t\t\t<label class=\"salescenter-app-ctl-label-text salescenter-app-ctl-label-text-link ui-ctl-label-text\">\n\t\t\t\t\t\t\t{{localize.SALESCENTER_PRODUCT_QUANTITY.replace('#MEASURE_NAME#', ' ')}}\n\t\t\t\t\t\t\t<span @click=\"showPopupMenu($event.target, measures, 'measures')\">{{ getMeasureName }}</span>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-md ui-ctl-w100\">\n\t\t\t\t\t\t\t<input \ttype=\"text\" \n\t\t\t\t\t\t\t\t\tclass=\"ui-ctl-element ui-ctl-textbox\" \n\t\t\t\t\t\t\t\t\t:value=\"basketItem.quantity\" \n\t\t\t\t\t\t\t\t\t@input=\"changeQuantity\" \n\t\t\t\t\t\t\t\t\t@change=\"refreshBasket\">\n\t\t\t\t\t\t\t<div class=\"salescenter-app-input-counter\" v-if=\"editable\">\n\t\t\t\t\t\t\t\t<div class=\"salescenter-app-input-counter-up\" @click=\"incrementQuantity\"></div>\n\t\t\t\t\t\t\t\t<div class=\"salescenter-app-input-counter-down\" @click=\"decrementQuantity\"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<!--col 2 end-->\n\t\t\t\t\t\n\t\t\t\t\t<!--col 3-->\n\t\t\t\t\t<div class=\"salescenter-app-form-col salescenter-app-form-col-sm\" style=\"flex:2\">\n\t\t\t\t\t\n\t\t\t\t\t\t<label class=\"salescenter-app-ctl-label-text ui-ctl-label-text\">{{localize.SALESCENTER_PRODUCT_PRICE_2}}</label>\n\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-md ui-ctl-w100 salescenter-app-col-currency\" :class=\"hasPriceError ? 'ui-ctl-danger' : ''\">\n\t\t\t\t\t\t\t<input \ttype=\"text\" class=\"ui-ctl-element ui-ctl-textbox\"\n\t\t\t\t\t\t\t\t\t:value=\"basketItem.price\"\n\t\t\t\t\t\t\t\t\t@change=\"changePrice\"\n\t\t\t\t\t\t\t\t\t:disabled=\"!editable\">\n\t\t\t\t\t\t\t<div class=\"salescenter-app-col-currency-symbol\" v-html=\"currencySymbol\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<!--col 3 end-->\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t<!--show discount link-->\n\t\t\t\t<div class=\"salescenter-app-form-row\" v-if=\"editable || (!editable && showPrice)\">\n\t\t\t\t\t<div style=\"flex: 8;\"></div>\n\t\t\t\t\t<div class=\"salescenter-app-form-col salescenter-app-form-col-sm\" style=\"flex: 2;\">\n\t\t\t\t\t\t<div v-if=\"showDiscount\" class=\"salescenter-app-collapse-link-pointer-event\">{{localize.SALESCENTER_PRODUCT_DISCOUNT_PRICE_TITLE}}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"salescenter-app-form-col salescenter-app-form-col-sm\" style=\"flex:2\" v-if=\"showDiscount\">\n\t\t\t\t\t\t<div class=\"salescenter-app-collapse-link-hide\"  @click=\"toggleDiscount('N')\">{{localize.SALESCENTER_PRODUCT_DISCOUNT_TITLE}}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"salescenter-app-form-col salescenter-app-form-col-sm\" style=\"flex:2\" v-else>\n\t\t\t\t\t\t<div class=\"salescenter-app-collapse-link-show\"  @click=\"toggleDiscount('Y')\">{{localize.SALESCENTER_PRODUCT_DISCOUNT_TITLE}}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<!--show discount link end-->\n\t\t\t\t\n\t\t\t\t<!--dicount controller-->\n\t\t\t\t<div class=\"salescenter-app-form-row\" style=\"margin-bottom: 7px\" v-if=\"showDiscount\">\n\t\t\t\t\t<div class=\"salescenter-app-form-collapse-container\">\n\t\t\t\t\t\t<div class=\"salescenter-app-form-row\">\t\t\t\t\t\n\t\t\t\t\t\t\t<div class=\"salescenter-app-form-col\" style=\"flex: 8\"></div>\n\t\t\t\t\t\t\t<div class=\"salescenter-app-form-col  salescenter-app-form-col-sm\" style=\"flex:2; overflow: hidden;\">\n\t\t\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-md ui-ctl-w100 salescenter-app-col-currency\">\n\t\t\t\t\t\t\t\t\t<div class=\"ui-ctl-element ui-ctl-textbox salescenter-ui-ctl-element\" v-html=\"basketItem.basePrice\" disabled=\"true\"></div>\n\t\t\t\t\t\t\t\t\t<div class=\"salescenter-app-col-currency-symbol\" v-html=\"currencySymbol\"></div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"salescenter-app-form-col salescenter-app-form-col-sm\" style=\"flex:2; overflow: hidden;\">\n\t\t\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-after-icon ui-ctl-w100 ui-ctl-dropdown salescenter-app-col-currency\">\n\t\t\t\t\t\t\t\t\t<input \ttype=\"text\" class=\"ui-ctl-element ui-ctl-textbox\"\n\t\t\t\t\t\t\t\t\t\t\tref=\"discountInput\"\n\t\t\t\t\t\t\t\t\t\t\t:value=\"basketItem.discount\"\n\t\t\t\t\t\t\t\t\t\t\t@change=\"changeDiscount\"\n\t\t\t\t\t\t\t\t\t\t\t:disabled=\"!editable\">\n\t\t\t\t\t\t\t\t\t<div class=\"salescenter-app-col-currency-symbol salescenter-app-col-currency-symbol-link\" @click=\"showPopupMenu($event.target.firstChild, null, 'discount')\"><span v-html=\"basketItem.discountType === 'percent' ? '%' : currencySymbol\"></span></div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"salescenter-app-form-row\" style=\"margin-bottom: 0;\" v-if=\"editable\">\n\t\t\t\t\t\t\t<div class=\"salescenter-app-form-col\" v-for=\"discount in basketItem.discountInfos\"\">\n\t\t\t\t\t\t\t\t<span class=\"ui-text-4 ui-color-light\"> {{discount.name}} \n\t\t\t\t\t\t\t\t<a :href=\"discount.editPageUrl\" @click=\"openDiscountEditor(event, discount.editPageUrl)\">{{localize.SALESCENTER_PRODUCT_DISCOUNT_EDIT_PAGE_URL_TITLE}}</a></span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<!--dicount controller end-->\n\t\t\t</div>\n\t\t\t<!--endelse isCreationMode-->\n\t\t</div>\n\t`\n\t});","import {Vuex} from 'ui.vue.vuex';\nimport {Popup} from 'main.popup';\nimport {Loc} from 'main.core';\n\nconst BasketItemAddBlock = {\n\tprops: [],\n\tmethods:\n\t{\n\t\trefreshBasket()\n\t\t{\n\t\t\tthis.$emit('on-refresh-basket');\n\t\t},\n\t\tchangeBasketItem(item)\n\t\t{\n\t\t\tthis.$emit('on-change-basket-item', item);\n\t\t},\n\t\taddBasketItemForm()\n\t\t{\n\t\t\tthis.$emit('on-add-basket-item');\n\t\t},\n\t\tgetInternalIndexByProductId(productId)\n\t\t{\n\t\t\tlet basket = this.$store.getters['orderCreation/getBasket']();\n\t\t\treturn Object\n\t\t\t\t.keys(basket)\n\t\t\t\t.findIndex((inx) =>{\n\t\t\t\t\treturn parseInt(basket[inx].productId) === parseInt(productId)\n\t\t\t\t});\n\t\t},\n\t\tonAddBasketItem(params)\n\t\t{\n\t\t\tthis.$store.commit('orderCreation/addBasketItem');\n\t\t\tlet basketItemIndex = this.countItems-1;\n\t\t\tthis.$store.commit('orderCreation/updateBasketItem', {\n\t\t\t\tindex : basketItemIndex,\n\t\t\t\tfields : params\n\t\t\t});\n\n\t\t\tlet basketItem = this.order.basket[basketItemIndex];\n\n\t\t\tif (basketItem.id === undefined || parseInt(basketItem.id) <= 0)\n\t\t\t\treturn true;\n\n\t\t\tlet fields = {\n\t\t\t\tname: basketItem.name,\n\t\t\t\tproductId: basketItem.id,\n\t\t\t\tsort: basketItemIndex,\n\t\t\t\tmodule: 'catalog',\n\t\t\t\tquantity: basketItem.quantity > 0 ? basketItem.quantity : 1,\n\t\t\t};\n\n\t\t\tBX.ajax.runAction(\n\t\t\t\t\"salescenter.api.order.getFileControl\",\n\t\t\t\t{ data: { productId: basketItem.id } }\n\t\t\t).then((result) => {\n\t\t\t\tlet data = BX.prop.getObject(result, \"data\", {});\n\t\t\t\tif (data.fileControl)\n\t\t\t\t{\n\t\t\t\t\tlet fileControl = BX.processHTML(data.fileControl);\n\t\t\t\t\tfields.fileControlHtml = fileControl['HTML'];\n\t\t\t\t}\n\n\t\t\t\tthis.changeBasketItem({\n\t\t\t\t\tindex:  basketItemIndex,\n\t\t\t\t\tfields: fields\n\t\t\t\t});\n\t\t\t\tthis.refreshBasket();\n\t\t\t});\n\t\t},\n\t\tonUpdateBasketItem(inx, fields)\n\t\t{\n\t\t\tthis.$store.dispatch('orderCreation/changeBasketItem', {\n\t\t\t\tindex : inx,\n\t\t\t\tfields : fields\n\t\t\t});\n\t\t},\n\t\t/*\n\t\t* By default, basket collection contains a fake|empty item,\n\t\t*  that is deleted when you select items from the catalog.\n\t\t* Also, products can be added to the form and become an empty string,\n\t\t*  while stay a item of basket collection\n\t\t* */\n\t\tremoveEmptyItems()\n\t\t{\n\t\t\tlet basket = this.$store.getters['orderCreation/getBasket']();\n\t\t\tbasket.forEach((item, i)=>{\n\t\t\t\tif(\n\t\t\t\t\tbasket[i].name === ''\n\t\t\t\t\t&& basket[i].price < 1e-10\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tthis.$store.dispatch('orderCreation/deleteBasketItem', {\n\t\t\t\t\t\tindex: i\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tmodifyBasketItem(params)\n\t\t{\n\t\t\tlet productId = parseInt(params.id);\n\t\t\tif(productId > 0)\n\t\t\t{\n\t\t\t\tlet inx = this.getInternalIndexByProductId(productId);\n\t\t\t\tif(inx >= 0)\n\t\t\t\t{\n\t\t\t\t\tthis.showDialogProductExists(params);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.removeEmptyItems();\n\t\t\t\t\tthis.onAddBasketItem(params);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tshowDialogProductExists(params)\n\t\t{\n\t\t\tthis.popup = new Popup(null, null, {\n\t\t\t\tevents: {\n\t\t\t\t\tonPopupClose: () => {this.popup.destroy()}\n\t\t\t\t},\n\t\t\t\tzIndex: 4000,\n\t\t\t\tautoHide: true,\n\t\t\t\tcloseByEsc: true,\n\t\t\t\tcloseIcon: true,\n\t\t\t\ttitleBar: Loc.getMessage('SALESCENTER_PRODUCT_BLOCK_PROD_EXIST_DLG_TITLE'),\n\t\t\t\tdraggable: true,\n\t\t\t\tresizable: false,\n\t\t\t\tlightShadow: true,\n\t\t\t\tcacheable: false,\n\t\t\t\toverlay: true,\n\t\t\t\tcontent: Loc.getMessage('SALESCENTER_PRODUCT_BLOCK_PROD_EXIST_DLG_TEXT').replace('#NAME#', params.name),\n\t\t\t\tbuttons: this.getButtons(params),\n\t\t\t});\n\n\t\t\tthis.popup.show();\n\t\t},\n\t\tgetButtons(product)\n\t\t{\n\t\t\tlet buttons = [];\n\t\t\tlet params = product;\n\t\t\tbuttons.push(\n\t\t\t\tnew BX.UI.SaveButton(\n\t\t\t\t\t{\n\t\t\t\t\t\ttext : Loc.getMessage('SALESCENTER_PRODUCT_BLOCK_PROD_EXIST_DLG_OK'),\n\t\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\t\tlet productId = parseInt(params.id);\n\t\t\t\t\t\t\tlet inx = this.getInternalIndexByProductId(productId);\n\t\t\t\t\t\t\tif(inx >= 0)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlet item = this.$store.getters['orderCreation/getBasket']()[inx];\n\t\t\t\t\t\t\t\tlet fields = {\n\t\t\t\t\t\t\t\t\tquantity: parseInt(item.quantity) + 1\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\tthis.onUpdateBasketItem(inx, fields);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthis.popup.destroy();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t\t);\n\n\t\t\tbuttons.push(\n\t\t\t\tnew BX.UI.CancelButton(\n\t\t\t\t\t{\n\t\t\t\t\t\ttext : Loc.getMessage('SALESCENTER_PRODUCT_BLOCK_PROD_EXIST_DLG_NO'),\n\t\t\t\t\t\tonclick: () => {this.popup.destroy()}\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t\t);\n\t\t\treturn buttons;\n\t\t},\n\t\tshowDialogProductSearch()\n\t\t{\n\t\t\tlet funcName = 'addBasketItemFromDialogProductSearch';\n\t\t\twindow[funcName] = params => this.modifyBasketItem(params);\n\n\t\t\tlet popup = new BX.CDialog({\n\t\t\t\tcontent_url: '/bitrix/tools/sale/product_search_dialog.php?'+\n\t\t\t\t\t//todo: 'lang='+this._settings.languageId+\n\t\t\t\t\t//todo: '&LID='+this._settings.siteId+\n\t\t\t\t\t'&caller=order_edit'+\n\t\t\t\t\t'&func_name='+funcName+\n\t\t\t\t\t'&STORE_FROM_ID=0'+\n\t\t\t\t\t'&public_mode=Y',\n\t\t\t\theight: Math.max(500, window.innerHeight-400),\n\t\t\t\twidth: Math.max(800, window.innerWidth-400),\n\t\t\t\tdraggable: true,\n\t\t\t\tresizable: true,\n\t\t\t\tmin_height: 500,\n\t\t\t\tmin_width: 800,\n\t\t\t\tzIndex: 3100\n\t\t\t});\n\n\t\t\tpopup.Show();\n\t\t},\n\t},\n\tcomputed:\n\t{\n\t\tcountItems()\n\t\t{\n\t\t\treturn this.order.basket.length;\n\t\t},\n\t\t...Vuex.mapState({\n\t\t\torder: state => state.orderCreation,\n\t\t})\n\t},\n\ttemplate: `\n\t\t<div class=\"salescenter-app-form-col\" style=\"flex: 1; white-space: nowrap;\">\n\t\t\t<a class=\"salescenter-app-add-item-link\" @click=\"addBasketItemForm\">\n\t\t\t\t<slot name=\"product-add-title\"></slot>\n\t\t\t</a>\n\t\t\t<a class=\"salescenter-app-add-item-link salescenter-app-add-item-link-catalog\" @click=\"showDialogProductSearch\">\n\t\t\t\t<slot name=\"product-add-from-catalog-title\"></slot>\n\t\t\t</a>\n\t\t</div>\n\t`\n};\n\nexport {\n\tBasketItemAddBlock,\n}","import {config} from './config';\n\nimport {Vue} from 'ui.vue';\nimport {Vuex} from 'ui.vue.vuex';\nimport {Manager} from 'salescenter.manager';\nimport {ProductForm} from 'catalog.product-form';\nimport \"currency\";\n\nimport \"./bx-salescenter-app-add-payment-product\";\nimport {MixinTemplatesType} from \"./components/deal-receiving-payment/templates-type-mixin\";\nimport {BasketItemAddBlock} from \"./components/basket-item-add\";\nimport {Runtime, Type, Text} from \"main.core\";\nimport {EventEmitter} from \"main.core.events\";\nimport type {BaseEvent} from \"main.core.events\";\n\nVue.component(config.templateAddPaymentName,\n{\n\tmixins:[MixinTemplatesType],\n\tcomponents: {\n\t\t'basket-item-add-block': BasketItemAddBlock,\n\t},\n\tdata()\n\t{\n\t\treturn {};\n\t},\n\tmounted()\n\t{\n\t\tif(parseInt(this.$root.$app.options.associatedEntityId)>0)\n\t\t{\n\t\t\tthis.$root.$emit(\"on-change-editable\", false);\n\t\t\tif (this.productForm)\n\t\t\t{\n\t\t\t\tthis.productForm.setEditable(false);\n\t\t\t}\n\t\t}\n\t\tif (this.productForm)\n\t\t{\n\t\t\tconst formWrapper = this.$root.$el.querySelector('.salescenter-app-form-wrapper');\n\t\t\tformWrapper.appendChild(this.productForm.layout());\n\t\t}\n\t},\n\tcreated()\n\t{\n\t\tthis.refreshId = null;\n\t\tthis.currencySymbol = this.$root.$app.options.currencySymbol;\n\n\t\tconst defaultCurrency = this.$root.$app.options.currencyCode || '';\n\n\t\tthis.$store.dispatch('orderCreation/setCurrency', defaultCurrency);\n\t\tif (Type.isArray(this.$root.$app.options.basket))\n\t\t{\n\t\t\tconst fields = [];\n\t\t\tthis.$root.$app.options.basket.forEach((item) => {\n\t\t\t\tfields.push(item.fields);\n\t\t\t});\n\t\t\tthis.$store.commit('orderCreation/setBasket', fields);\n\t\t}\n\n\t\tthis.productForm = new ProductForm({\n\t\t\tcurrencySymbol: this.currencySymbol,\n\t\t\tcurrency: defaultCurrency,\n\t\t\tiblockId: this.$root.$app.options.catalogIblockId,\n\t\t\tbasePriceId: this.$root.$app.options.basePriceId,\n\t\t\tbasket: Type.isArray(this.$root.$app.options.basket) ? this.$root.$app.options.basket : [],\n\t\t\ttotals: this.$root.$app.options.totals,\n\t\t\ttaxList: this.$root.$app.options.vatList,\n\t\t\tmeasures: this.$root.$app.options.measures,\n\t\t\tshowDiscountBlock: this.$root.$app.options.showProductDiscounts,\n\t\t\tshowTaxBlock: this.$root.$app.options.showProductTaxes,\n\t\t});\n\n\t\tthis.currencySymbol = this.$root.$app.options.currencySymbol;\n\n\t\tconst onChangeWithDebounce = Runtime.debounce(this.onBasketChange, 500, this);\n\t\tEventEmitter.subscribe(this.productForm, 'ProductForm:onBasketChange', onChangeWithDebounce);\n\n\t\tif (this.$root.$app.options.showPaySystemSettingBanner)\n\t\t{\n\t\t\tthis.$store.commit('orderCreation/showBanner');\n\t\t}\n\n\t\tif (Type.isArray(this.$root.$app.options.basket))\n\t\t{\n\t\t\tthis.$store.commit('orderCreation/enableSubmit');\n\t\t}\n\t},\n\tmethods:\n\t{\n\t\tonBasketChange(event: BaseEvent)\n\t\t{\n\t\t\tconst data = event.getData();\n\t\t\tif (!Type.isArray(data.basket))\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst fields = [];\n\t\t\tdata.basket.forEach((item) => {\n\t\t\t\tfields.push(item.fields);\n\t\t\t});\n\t\t\tthis.$store.commit('orderCreation/setBasket', fields);\n\n\t\t\tif (data.basket.length <= 0)\n\t\t\t{\n\t\t\t\tthis.$store.commit('orderCreation/disableSubmit');\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.$store.commit('orderCreation/enableSubmit');\n\n\t\t\tconst requestId = Text.getRandom(20);\n\t\t\tthis.refreshId = requestId;\n\t\t\tBX.ajax.runAction(\n\t\t\t\t\"salescenter.api.order.refreshBasket\",\n\t\t\t\t{\n\t\t\t\t\tdata: {basketItems: fields}\n\t\t\t\t}\n\t\t\t)\n\t\t\t.then((result) => {\n\t\t\t\tif (this.refreshId !== requestId)\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tconst data = BX.prop.getObject(result,\"data\", {});\n\t\t\t\tthis.processRefreshRequest({\n\t\t\t\t\ttotal: BX.prop.getObject(\n\t\t\t\t\t\tdata,\n\t\t\t\t\t\t\"total\",\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tsum: 0,\n\t\t\t\t\t\t\tdiscount: 0,\n\t\t\t\t\t\t\tresult: 0,\n\t\t\t\t\t\t\tresultNumeric: 0,\n\t\t\t\t\t\t}\n\t\t\t\t\t),\n\t\t\t\t\tbasket: BX.prop.get(data,\"items\",[])\n\t\t\t\t});\n\t\t\t})\n\t\t\t.catch((result) => {\n\t\t\t\tconst data = BX.prop.getObject(result,\"data\", {});\n\t\t\t\tthis.processRefreshRequest({\n\t\t\t\t\terrors: BX.prop.get(result,\"errors\", []),\n\t\t\t\t\tbasket: BX.prop.get(data,\"items\",[])\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tprocessRefreshRequest(data)\n\t\t{\n\t\t\tif (this.productForm)\n\t\t\t{\n\t\t\t\tthis.productForm.setData(data);\n\t\t\t\tif (Type.isArray(data.basket))\n\t\t\t\t{\n\t\t\t\t\tthis.$store.commit('orderCreation/setBasket', data.basket);\n\t\t\t\t}\n\t\t\t\tif (Type.isObject(data.total))\n\t\t\t\t{\n\t\t\t\t\tthis.$store.commit('orderCreation/setTotal', data.total);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\trefreshBasket(timeout = 300)\n\t\t{\n\t\t\tthis.$root.$app.startProgress();\n\t\t\tthis.$store.dispatch('orderCreation/refreshBasket', {\n\t\t\t\ttimeout,\n\t\t\t\tonsuccess: () => {\n\t\t\t\t\tthis.$root.$app.stopProgress();\n\t\t\t\t},\n\t\t\t});\n\t\t},\n\t\tchangeBasketItem(item)\n\t\t{\n\t\t\tthis.$store.dispatch('orderCreation/changeBasketItem', {\n\t\t\t\tindex: item.index,\n\t\t\t\tfields: item.fields\n\t\t\t});\n\t\t},\n\t\tremoveItem(item)\n\t\t{\n\t\t\tthis.$store.dispatch('orderCreation/removeItem', {\n\t\t\t\tindex: item.index\n\t\t\t});\n\t\t\tthis.refreshBasket();\n\t\t},\n\t\taddBasketItemForm()\n\t\t{\n\t\t\tif (this.productForm)\n\t\t\t{\n\t\t\t\tthis.productForm.addProduct();\n\t\t\t}\n\t\t},\n\t\thideBanner()\n\t\t{\n\t\t\tthis.$store.commit('orderCreation/hideBanner');\n\t\t\tconst userOptionName = this.$root.$app.options.orderCreationOption || false;\n\t\t\tconst userOptionKeyName = this.$root.$app.options.paySystemBannerOptionName || false;\n\t\t\tif (userOptionName && userOptionKeyName)\n\t\t\t{\n\t\t\t\tBX.userOptions.save('salescenter', userOptionName, userOptionKeyName, 'Y');\n\t\t\t}\n\t\t},\n\t\topenControlPanel()\n\t\t{\n\t\t\tManager.openControlPanel();\n\t\t},\n\t},\n\tcomputed:\n\t{\n\t\tlocalize()\n\t\t{\n\t\t\treturn Vue.getFilteredPhrases('SALESCENTER_');\n\t\t},\n\n\t\ttotal()\n\t\t{\n\t\t\treturn this.order.total;\n\t\t},\n\n\t\tcountItems()\n\t\t{\n\t\t\treturn this.order.basket.length;\n\t\t},\n\n\t\tisShowedBanner()\n\t\t{\n\t\t\treturn this.order.showPaySystemSettingBanner;\n\t\t},\n\n\t\t...Vuex.mapState({\n\t\t\torder: state => state.orderCreation,\n\t\t})\n\t},\n\ttemplate: `\n\t<div class=\"salescenter-app-payment-side\">\n\t\t<div class=\"salescenter-app-page-content\">\n\t\t\t<div class=\"salescenter-app-form-wrapper\"></div>\n\t\t\t<div class=\"salescenter-app-banner\" v-if=\"isShowedBanner\">\n\t\t\t\t<div class=\"salescenter-app-banner-inner\">\n\t\t\t\t\t<div class=\"salescenter-app-banner-title\">{{localize.SALESCENTER_BANNER_TITLE}}</div>\n\t\t\t\t\t<div class=\"salescenter-app-banner-content\">\n\t\t\t\t\t\t<div class=\"salescenter-app-banner-text\">{{localize.SALESCENTER_BANNER_TEXT}}</div>\n\t\t\t\t\t\t<div class=\"salescenter-app-banner-btn-block\">\n\t\t\t\t\t\t\t<button class=\"ui-btn ui-btn-sm ui-btn-primary salescenter-app-banner-btn-connect\" @click=\"openControlPanel\">{{localize.SALESCENTER_BANNER_BTN_CONFIGURE}}</button>\n\t\t\t\t\t\t\t<button class=\"ui-btn ui-btn-sm ui-btn-link salescenter-app-banner-btn-hide\" @click=\"hideBanner\">{{localize.SALESCENTER_BANNER_BTN_HIDE}}</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"salescenter-app-banner-close\" @click=\"hideBanner\"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\t\t\n\t</div>\n`,\n});","import {Loc} \t\t\t\t\t\tfrom 'main.core';\nimport {Block} from 'salescenter.component.stage-block';\nimport \"../../../bx-salescenter-app-add-payment\";\nimport {StageMixin} from \"./stage-mixin\";\n\nconst Product = {\n\tprops: {\n\t\tstatus: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\tcounter: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t}\n\t},\n\tmixins:[StageMixin],\n\tcomponents:\n\t{\n\t\t'stage-block-item'\t:\tBlock\n\t},\n\tmethods:\n\t{\n\t\tonItemHint(e)\n\t\t{\n\t\t\tBX.Salescenter.Manager.openHowToSell(e);\n\t\t},\n\t},\n\tcomputed:\n\t\t{\n\t\t\tconfigForBlock()\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\tcounter: this.counter,\n\t\t\t\t\tchecked: this.counterCheckedMixin,\n\t\t\t\t\tshowHint: true,\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\ttemplate: `\n\t\t<stage-block-item\n\t\t\t@on-item-hint.stop.prevent=\"onItemHint\"\n\t\t\t:config=\"configForBlock\"\n\t\t\t:class=\"statusClassMixin\"\n\t\t>\n\t\t\t<template v-slot:block-title-title>\t\t\t\t\t\n\t\t\t\t${Loc.getMessage('SALESCENTER_PRODUCT_BLOCK_TITLE_SHORT')}\t\n\t\t\t</template>\n\t\t\t<template v-slot:block-hint-title>${Loc.getMessage('SALESCENTER_PRODUCT_SET_BLOCK_TITLE_SHORT')}</template>\n\t\t\t<template v-slot:block-container>\n\t\t\t\t<div :class=\"containerClassMixin\">\n\t\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container-payment\">\n\t\t\t\t\t\t<bx-salescenter-app-add-payment/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</stage-block-item>\n\t`\n};\nexport {\n\tProduct\n}","import {Vuex} from 'ui.vue.vuex';\nimport {Vue} from 'ui.vue';\nimport {ajax, Loc} from 'main.core';\nimport DeliverySelector from 'salescenter.deliveryselector';\n\nexport default {\n\tprops: {\n\t\tconfig: {type: Object, required: true}\n\t},\n\tcomponents: {\n\t\t'delivery-selector': DeliverySelector,\n\t},\n\tdata()\n\t{\n\t\treturn {\n\t\t\tavailableServiceIds: [],\n\t\t};\n\t},\n\tmethods: {\n\t\tonChange(payload)\n\t\t{\n\t\t\tlet fromPropId = this.getAddressFromPropId();\n\t\t\tlet prevFrom = this.getPrevFrom(fromPropId);\n\t\t\tlet newFrom = this.getNewFrom(fromPropId, payload.relatedPropsValues);\n\n\t\t\tthis.$store.dispatch('orderCreation/setDelivery', payload.deliveryPrice);\n\n\t\t\tthis.$store.dispatch(\n\t\t\t\t'orderCreation/setDeliveryId',\n\t\t\t\tpayload.deliveryServiceId\n\t\t\t);\n\t\t\tthis.$store.dispatch(\n\t\t\t\t'orderCreation/setPropertyValues',\n\t\t\t\tpayload.relatedPropsValues\n\t\t\t);\n\t\t\tthis.$store.dispatch(\n\t\t\t\t'orderCreation/setDeliveryExtraServicesValues',\n\t\t\t\tpayload.relatedServicesValues\n\t\t\t);\n\t\t\tthis.$store.dispatch(\n\t\t\t\t'orderCreation/setExpectedDelivery',\n\t\t\t\tpayload.estimatedDeliveryPrice\n\t\t\t);\n\t\t\tthis.$store.dispatch(\n\t\t\t\t'orderCreation/setDeliveryResponsibleId',\n\t\t\t\tpayload.responsibleUser ? payload.responsibleUser.id : null\n\t\t\t);\n\n\t\t\tif (prevFrom !== newFrom)\n\t\t\t{\n\t\t\t\tthis.refreshAvailableServiceIds();\n\t\t\t}\n\n\t\t\tthis.$emit('change', payload);\n\t\t},\n\t\tgetAddressFromPropId()\n\t\t{\n\t\t\tfor (let propId in this.$root.$app.options.deliveryOrderPropOptions)\n\t\t\t{\n\t\t\t\tif (this.$root.$app.options.deliveryOrderPropOptions.hasOwnProperty(propId))\n\t\t\t\t{\n\t\t\t\t\tif (this.$root.$app.options.deliveryOrderPropOptions[propId].hasOwnProperty('isFromAddress'))\n\t\t\t\t\t{\n\t\t\t\t\t\treturn propId;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\t\tgetPrevFrom(fromPropId)\n\t\t{\n\t\t\tfor (let prop of this.order.propertyValues)\n\t\t\t{\n\t\t\t\tif (prop.id === fromPropId)\n\t\t\t\t{\n\t\t\t\t\treturn prop.value;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\t\tgetNewFrom(fromPropId, relatedPropsValues)\n\t\t{\n\t\t\tfor (let prop of relatedPropsValues)\n\t\t\t{\n\t\t\t\tif (prop.id === fromPropId)\n\t\t\t\t{\n\t\t\t\t\treturn prop.value;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\t\tonSettingsChanged()\n\t\t{\n\t\t\tthis.$emit('delivery-settings-changed');\n\t\t},\n\t\trefreshAvailableServiceIds()\n\t\t{\n\t\t\tajax.runAction(\n\t\t\t\t'salescenter.order.getCompatibleDeliverySystems',\n\t\t\t\t{\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tbasketItems: this.config.basket ? this.config.basket : [],\n\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\tsessionId: this.config.sessionId,\n\t\t\t\t\t\t\townerTypeId: this.config.ownerTypeId,\n\t\t\t\t\t\t\townerId: this.config.ownerId,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdeliveryServiceId: this.order.deliveryId,\n\t\t\t\t\t\tdeliveryRelatedPropValues: this.order.propertyValues,\n\t\t\t\t\t\tdeliveryRelatedServiceValues: this.order.deliveryExtraServicesValues,\n\t\t\t\t\t\tdeliveryResponsibleId: this.order.deliveryResponsibleId,\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t).then((result) => {\n\t\t\t\tlet data = BX.prop.getObject(result, \"data\", {});\n\n\t\t\t\tthis.availableServiceIds = (data.availableServiceIds) ? data.availableServiceIds : [];\n\t\t\t}).catch((result) => {\n\t\t\t\tthis.availableServiceIds = [];\n\t\t\t});\n\t\t}\n\t},\n\tcreated()\n\t{\n\t\tthis.$store.dispatch('orderCreation/setPersonTypeId', this.config.personTypeId);\n\n\t\tthis.refreshAvailableServiceIds();\n\t},\n\n\tcomputed: {\n\t\tlocalize()\n\t\t{\n\t\t\treturn Vue.getFilteredPhrases('SALESCENTER_');\n\t\t},\n\t\tsumTitle()\n\t\t{\n\t\t\treturn Loc.getMessage('SALESCENTER_PRODUCT_PRODUCTS_PRICE');\n\t\t},\n\t\tproductsPriceFormatted()\n\t\t{\n\t\t\treturn this.order.total.result;\n\t\t},\n\t\tproductsPrice()\n\t\t{\n\t\t\treturn this.order.total.resultNumeric;\n\t\t},\n\t\tdelivery()\n\t\t{\n\t\t\treturn this.order.delivery;\n\t\t},\n\t\tdeliveryFormatted()\n\t\t{\n\t\t\tif (this.isDeliveryCalculated)\n\t\t\t{\n\t\t\t\treturn BX.Currency.currencyFormat(this.delivery, this.config.currency, false);\n\t\t\t}\n\n\t\t},\n\t\ttotal()\n\t\t{\n\t\t\tif (this.productsPrice === null || this.delivery === null)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn this.productsPrice + this.delivery;\n\t\t},\n\t\ttotalFormatted()\n\t\t{\n\t\t\treturn BX.Currency.currencyFormat(this.total, this.config.currency, false);\n\t\t},\n\t\tisDeliveryCalculated()\n\t\t{\n\t\t\treturn (this.order.delivery !== null);\n\t\t},\n\n\t\tactionData()\n\t\t{\n\t\t\treturn {\n\t\t\t\tbasketItems: this.config.basket,\n\t\t\t\toptions: {\n\t\t\t\t\tsessionId: this.config.sessionId,\n\t\t\t\t\townerTypeId: this.config.ownerTypeId,\n\t\t\t\t\townerId: this.config.ownerId,\n\t\t\t\t},\n\t\t\t};\n\t\t},\n\t\t...Vuex.mapState({\n\t\t\torder: state => state.orderCreation,\n\t\t}),\n\t},\n\ttemplate: `\n\t\t<delivery-selector\n\t\t\t:editable=\"this.config.editable\"\n\t\t\t:available-service-ids=\"availableServiceIds\"\n\t\t\t:init-is-calculated=\"config.isExistingItem\"\t\t\n\t\t\t:init-estimated-delivery-price=\"config.expectedDeliveryPrice\"\t\t\n\t\t\t:init-entered-delivery-price=\"config.deliveryPrice\"\n\t\t\t:init-delivery-service-id=\"config.deliveryServiceId\"\n\t\t\t:init-related-services-values=\"config.relatedServicesValues\"\n\t\t\t:init-related-props-values=\"config.relatedPropsValues\"\n\t\t\t:init-related-props-options=\"config.relatedPropsOptions\"\n\t\t\t:init-responsible-id=\"config.responsibleId\"\n\t\t\t:person-type-id=\"config.personTypeId\"\n\t\t\t:action=\"'salescenter.api.order.refreshDelivery'\"\n\t\t\t:action-data=\"actionData\"\n\t\t\t:external-sum=\"productsPrice\"\n\t\t\t:external-sum-label=\"sumTitle\"\n\t\t\t:currency=\"config.currency\"\n\t\t\t:currency-symbol=\"config.currencySymbol\"\n\t\t\t@change=\"onChange\"\n\t\t\t@settings-changed=\"onSettingsChanged\"\n\t\t></delivery-selector>\n\t`\n};\n","import {Vuex} \t\t\t\t\t\t\tfrom 'ui.vue.vuex';\nimport {Loc} \t\t\t\t\t\t\tfrom 'main.core';\nimport {Block} \t\t\tfrom 'salescenter.component.stage-block';\nimport {Uninstalled as TileUnInstalled} from \"./tile-collection/uninstalled\";\nimport DeliverySelector\t\t\t\t\tfrom \"../../delivery-selector\";\nimport {StageMixin} \t\t\t\t\tfrom \"./stage-mixin\";\nimport {MixinTemplatesType} \t\t\tfrom \"../templates-type-mixin\";\n\nconst DeliveryVuex = {\n\tprops: {\n\t\tstatus: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\tcounter: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\ttiles: {\n\t\t\ttype: Array,\n\t\t\trequired: true\n\t\t},\n\t\tinstalled: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true\n\t\t},\n\t\tinitialCollapseState: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true\n\t\t},\n\t},\n\tdata()\n\t{\n\t\treturn {\n\t\t\tselectedDeliveryServiceName: null,\n\t\t}\n\t},\n\tmixins:[StageMixin, MixinTemplatesType],\n\tcomponents:\n\t\t{\n\t\t\t'stage-block-item'\t\t\t\t:\tBlock,\n\t\t\t'delivery-selector-block'\t\t:\tDeliverySelector,\n\t\t\t'uninstalled-delivery-block'\t:\tTileUnInstalled,\n\t\t},\n\tcomputed:\n\t\t{\n\t\t\tstatusClass()\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\t'salescenter-app-payment-by-sms-item-disabled-bg': this.installed === false\n\t\t\t\t}\n\t\t\t},\n\t\t\tconfigForBlock()\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\tcounter: this.counter,\n\t\t\t\t\ttitleName: this.selectedDeliveryServiceName,\n\t\t\t\t\tinstalled: this.installed,\n\t\t\t\t\tcollapsible: true,\n\t\t\t\t\tchecked: this.counterCheckedMixin,\n\t\t\t\t\tshowHint: false,\n\t\t\t\t}\n\t\t\t},\n\t\t\tconfig()\n\t\t\t{\n\t\t\t\tlet deliveryServiceId = null;\n\t\t\t\tif (this.$root.$app.options.hasOwnProperty('shipmentData')\n\t\t\t\t\t&& this.$root.$app.options.shipmentData.hasOwnProperty('deliveryServiceId')\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tdeliveryServiceId = this.$root.$app.options.shipmentData.deliveryServiceId;\n\t\t\t\t}\n\n\t\t\t\tlet responsibleId = null;\n\t\t\t\tif (this.$root.$app.options.hasOwnProperty('shipmentData')\n\t\t\t\t\t&& this.$root.$app.options.shipmentData.hasOwnProperty('responsibleId')\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tresponsibleId = this.$root.$app.options.shipmentData.responsibleId;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tresponsibleId = this.$root.$app.options.assignedById;\n\t\t\t\t}\n\n\t\t\t\tlet deliveryPrice = null;\n\t\t\t\tif (this.$root.$app.options.hasOwnProperty('shipmentData')\n\t\t\t\t\t&& this.$root.$app.options.shipmentData.hasOwnProperty('deliveryPrice')\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tdeliveryPrice = this.$root.$app.options.shipmentData.deliveryPrice;\n\t\t\t\t}\n\n\t\t\t\tlet expectedDeliveryPrice = null;\n\t\t\t\tif (this.$root.$app.options.hasOwnProperty('shipmentData')\n\t\t\t\t\t&& this.$root.$app.options.shipmentData.hasOwnProperty('deliveryPrice')\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\texpectedDeliveryPrice = this.$root.$app.options.shipmentData.expectedDeliveryPrice;\n\t\t\t\t}\n\n\t\t\t\tlet relatedPropsValues = {};\n\t\t\t\tif (this.$root.$app.options.hasOwnProperty('orderPropertyValues')\n\t\t\t\t\t&& !Array.isArray(this.$root.$app.options.orderPropertyValues)\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\trelatedPropsValues = this.$root.$app.options.orderPropertyValues;\n\t\t\t\t}\n\n\t\t\t\tlet relatedServicesValues = {};\n\t\t\t\tif (this.$root.$app.options.hasOwnProperty('shipmentData')\n\t\t\t\t\t&& this.$root.$app.options.shipmentData.hasOwnProperty('extraServicesValues')\n\t\t\t\t\t&& !Array.isArray(this.$root.$app.options.shipmentData.extraServicesValues)\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\trelatedServicesValues = this.$root.$app.options.shipmentData.extraServicesValues;\n\t\t\t\t}\n\n\t\t\t\tlet relatedPropsOptions = {};\n\t\t\t\tif (this.$root.$app.options.hasOwnProperty('deliveryOrderPropOptions')\n\t\t\t\t\t&& !Array.isArray(this.$root.$app.options.deliveryOrderPropOptions)\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\trelatedPropsOptions = this.$root.$app.options.deliveryOrderPropOptions;\n\t\t\t\t}\n\n\t\t\t\tlet isExistingItem = parseInt(this.$root.$app.options.associatedEntityId) > 0;\n\n\t\t\t\treturn {\n\t\t\t\t\tisExistingItem,\n\t\t\t\t\tpersonTypeId: this.$root.$app.options.personTypeId,\n\t\t\t\t\tbasket: this.order.basket,\n\t\t\t\t\tcurrencySymbol: this.$root.$app.options.currencySymbol,\n\t\t\t\t\tcurrency: this.order.currency,\n\t\t\t\t\townerTypeId: this.$root.$app.options.ownerTypeId,\n\t\t\t\t\townerId: this.$root.$app.options.ownerId,\n\t\t\t\t\tsessionId: this.$root.$app.options.sessionId,\n\t\t\t\t\trelatedPropsValues,\n\t\t\t\t\trelatedPropsOptions,\n\t\t\t\t\trelatedServicesValues,\n\t\t\t\t\tdeliveryServiceId,\n\t\t\t\t\tresponsibleId,\n\t\t\t\t\tdeliveryPrice,\n\t\t\t\t\texpectedDeliveryPrice,\n\t\t\t\t\teditable: this.editable,\n\t\t\t\t};\n\t\t\t},\n\n\t\t\t...Vuex.mapState({\n\t\t\t\torder: state => state.orderCreation\n\t\t\t})\n\t\t},\n\tmethods:{\n\t\tsetTitleName(state)\n\t\t{\n\t\t\tthis.selectedDeliveryServiceName = state.deliveryServiceName;\n\t\t},\n\t\tsaveCollapsedOption(option)\n\t\t{\n\t\t\tthis.$emit('on-save-collapsed-option', 'delivery', option);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<stage-block-item\n\t\t\t:config=\"configForBlock\"\n\t\t\t:class=\"[statusClassMixin, statusClass]\"\n\t\t\t@on-item-hint.stop.prevent=\"onItemHint\"\n\t\t\t@on-adjust-collapsed=\"saveCollapsedOption\"\n\t\t>\n\t\t\t<template v-slot:block-title-title>${Loc.getMessage('SALESCENTER_DELIVERY_BLOCK_TITLE')}</template>\n\t\t\t<template v-slot:block-container>\n\t\t\t\t<div :class=\"containerClassMixin\">\n\t\t\t\t\t<template v-if=\"!installed\">\n\t\t\t\t\t\t<uninstalled-delivery-block :tiles=\"tiles\" \n\t\t\t\t\t\t\t\tv-on:on-tile-slider-close=\"onSliderClose\"/>\n\t\t\t\t\t</template>\n\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container-select\">\n\t\t\t\t\t\t\t<delivery-selector-block :config=\"config\" \n\t\t\t\t\t\t\t\tv-on:delivery-settings-changed=\"onSliderClose\"\n\t\t\t\t\t\t\t\tv-on:change=\"setTitleName\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</template>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</stage-block-item>\n\t`\n};\n\nexport {\n\tDeliveryVuex\n}","import {Loc} \t\t\t\t\t\t\t\tfrom 'main.core';\nimport {Block} \t\t\tfrom 'salescenter.component.stage-block';\nimport {Uninstalled as TileUnInstalled} \tfrom \"./tile-collection/uninstalled\";\nimport {Installed as TileInstalled} \t\tfrom \"./tile-collection/installed\";\nimport {StageMixin} \t\t\t\t\t\tfrom \"./stage-mixin\";\n\nconst PaySystem = {\n\tprops: {\n\t\tstatus: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\tcounter: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\ttiles: {\n\t\t\ttype: Array,\n\t\t\trequired: true\n\t\t},\n\t\tinstalled: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true\n\t\t},\n\t\ttitleItems: {\n\t\t\ttype: Array\n\t\t},\n\t\tinitialCollapseState: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true\n\t\t},\n\t},\n\tmixins:[StageMixin],\n\tcomponents:\n\t{\n\t\t'stage-block-item'\t\t\t\t\t:\tBlock,\n\t\t'tile-collection-installed-block'\t:\tTileInstalled,\n\t\t'tile-collection-uninstalled-block'\t:\tTileUnInstalled\n\t},\n\tmethods:\n\t{\n\t\tonItemHint(e)\n\t\t{\n\t\t\tBX.Salescenter.Manager.openHowToConfigDefaultPaySystem(e);\n\t\t},\n\t\tsaveCollapsedOption(option)\n\t\t{\n\t\t\tthis.$emit('on-save-collapsed-option', 'pay_system', option);\n\t\t},\n\n\t},\n\tcomputed:\n\t{\n\t\tconfigForBlock()\n\t\t{\n\t\t\treturn {\n\t\t\t\tcounter: this.counter,\n\t\t\t\ttitleItems: this.installed ? this.titleItems : [],\n\t\t\t\tinstalled: this.installed,\n\t\t\t\tcollapsible: true,\n\t\t\t\tchecked: this.counterCheckedMixin,\n\t\t\t\tshowHint: !this.installed,\n\t\t\t\tinitialCollapseState: this.initialCollapseState,\n\t\t\t}\n\t\t},\n\t\tstatusClass()\n\t\t{\n\t\t\treturn {\n\t\t\t\t'salescenter-app-payment-by-sms-item-disabled-bg': this.installed === false\n\t\t\t}\n\t\t},\n\t\ttitle()\n\t\t{\n\t\t\treturn this.installed === true\n\t\t\t\t? Loc.getMessage('SALESCENTER_PAYSYSTEM_SET_BLOCK_TITLE')\n\t\t\t\t: Loc.getMessage('SALESCENTER_PAYSYSTEM_BLOCK_TITLE');\n\t\t}\n\t},\n\n\ttemplate: `\n\t\t<stage-block-item\n\t\t\t:class=\"[statusClassMixin, statusClass]\"\n\t\t\t:config=\"configForBlock\"\n\t\t\t@on-item-hint.stop.prevent=\"onItemHint\"\n\t\t\t@on-tile-slider-close=\"onSliderClose\"\n\t\t\t@on-adjust-collapsed=\"saveCollapsedOption\"\n\t\t>\n\t\t\t<template v-slot:block-title-title>{{title}}</template>\n\t\t\t<template v-slot:block-hint-title>${Loc.getMessage('SALESCENTER_PAYSYSTEM_BLOCK_SETTINGS_TITLE')}</template>\n\t\t\t<template v-slot:block-container>\n\t\t\t\t<div :class=\"containerClassMixin\">\n\t\t\t\t\t<tile-collection-uninstalled-block \t:tiles=\"tiles\" v-if=\"!installed\"/>\n\t\t\t\t\t<tile-collection-installed-block :tiles=\"tiles\" v-on:on-tile-slider-close=\"onSliderClose\" v-else />\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</stage-block-item>\n\t`\n};\nexport {\n\tPaySystem\n}","import {Loc, ajax as Ajax} \t\t\t\tfrom 'main.core';\nimport {Block} from 'salescenter.component.stage-block';\nimport\n{\n\tAlert,\n\tConfigure,\n\tSenderList,\n\tUserAvatar,\n\tMessageEdit,\n\tMessageView,\n\tMessageEditor,\n\tMessageControl\n} \t\t\t\t\t\t\t\t\t\tfrom 'salescenter.component.stage-block.sms-message';\nimport {StageMixin} \t\t\t\t\tfrom \"./stage-mixin\";\n\nconst SmsMessage = {\n\tprops: {\n\t\tstatus: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\tcounter: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\tmanager: {\n\t\t\ttype: Object,\n\t\t\trequired: true\n\t\t},\n\t\titems: {\n\t\t\ttype: Array,\n\t\t\trequired: true\n\t\t},\n\t\tphone: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\tsenderSettingsUrl: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\teditorTemplate: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\teditorUrl: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t}\n\t},\n\tmixins:[StageMixin],\n\tcomponents:\n\t\t{\n\t\t\t'stage-block-item'\t\t\t:\tBlock,\n\t\t\t'sms-alert-block'\t\t\t:\tAlert,\n\t\t\t'sms-configure-block'\t\t:\tConfigure,\n\t\t\t'sms-sender-list-block'\t\t:\tSenderList,\n\t\t\t'sms-user-avatar-block'\t\t:\tUserAvatar,\n\t\t\t'sms-message-edit-block'\t:\tMessageEdit,\n\t\t\t'sms-message-view-block'\t:\tMessageView,\n\t\t\t'sms-message-editor-block'\t: \tMessageEditor,\n\t\t\t'sms-message-control-block'\t: \tMessageControl,\n\t\t},\n\tdata()\n\t{\n\t\treturn {\n\t\t\tphone:\t\t\tthis.phone,\n\t\t\tsenders:{\n\t\t\t\tlist: \t\tthis.items,\n\t\t\t\tsettings:{\n\t\t\t\t\turl:\tthis.senderSettingsUrl\n\t\t\t\t},\n\t\t\t},\n\t\t\tmanager:{\n\t\t\t\tname: \t\tthis.manager.name,\n\t\t\t\tphoto: \t\tthis.manager.photo\n\t\t\t},\n\t\t\teditor:{\n\t\t\t\ttemplate:\tthis.editorTemplate,\n\t\t\t\turl: \t\tthis.editorUrl\n\t\t\t}\n\t\t}\n\t},\n\tcomputed:\n\t\t{\n\t\t\tconfigForBlock()\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\tcounter: this.counter,\n\t\t\t\t\tchecked: this.counterCheckedMixin,\n\t\t\t\t\tshowHint: true,\n\t\t\t\t}\n\t\t\t},\n\n\t\t\thasSender()\n\t\t\t{\n\t\t\t\treturn this.senders.list.length !== 0;\n\t\t\t},\n\n\t\t\thasPhone()\n\t\t\t{\n\t\t\t\treturn !(this.phone === '');\n\t\t\t},\n\n\t\t\tcontainerClass()\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\t'salescenter-app-payment-by-sms-item-container-offtop'\t: true\n\t\t\t\t}\n\t\t\t},\n\n\t\t\ttitle()\n\t\t\t{\n\t\t\t\treturn Loc.getMessage('SALESCENTER_APP_CONTACT_BLOCK_TITLE_SMS_2').replace('#PHONE#', this.phone);\n\t\t\t}\n\t\t},\n\tmethods:\n\t\t{\n\t\t\tonItemHint(e)\n\t\t\t{\n\t\t\t\tthis.$root.$emit(\"on-show-company-contacts\", e);\n\t\t\t},\n\n\t\t\tsmsSenderConfigure()\n\t\t\t{\n\t\t\t\tAjax.runComponentAction(\"bitrix:salescenter.app\", \"getSmsSenderList\", {\n\t\t\t\t\tmode: \"class\"\n\t\t\t\t})\n\t\t\t\t\t.then((resolve)=>{\n\t\t\t\t\t\tif (BX.type.isObject(resolve.data) && Object.values(resolve.data).length > 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.resetSenderList();\n\n\t\t\t\t\t\t\tObject.values(resolve.data).forEach(\n\t\t\t\t\t\t\t\titem => this.senders.list\n\t\t\t\t\t\t\t\t\t.push({\n\t\t\t\t\t\t\t\t\t\tname: item.name,\n\t\t\t\t\t\t\t\t\t\tid: item.id\n\t\t\t\t\t\t\t\t\t}));\n\n\t\t\t\t\t\t\tlet value = this.getFirstSender();\n\t\t\t\t\t\t\tthis.setSelectedSender(value);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t},\n\n\t\t\tresetSenderList()\n\t\t\t{\n\t\t\t\tthis.senders.list = [];\n\t\t\t},\n\n\t\t\tgetFirstSender()\n\t\t\t{\n\t\t\t\treturn this.hasSender ? this.senders.list[0].id : null;\n\t\t\t},\n\n\t\t\tsetSelectedSender(value)\n\t\t\t{\n\t\t\t\tthis.$emit('stage-block-sms-send-on-change-provider', value);\n\t\t\t},\n\t\t},\n\ttemplate: `\n\t\t<stage-block-item\t\t\t\n\t\t\t:config=\"configForBlock\"\n\t\t\t:class=\"statusClassMixin\"\n\t\t\tv-on:on-item-hint=\"onItemHint\"\n\t\t>\n\t\t\t<template v-slot:block-title-title>{{title}}</template>\n\t\t\t<template v-slot:block-hint-title>${Loc.getMessage('SALESCENTER_LEFT_PAYMENT_COMPANY_CONTACTS')}</template>\n\t\t\t<template v-slot:block-container>\n\t\t\t\t<div :class=\"containerClassMixin\" :class=\"containerClass\">\n\t\t\t\t\t<template v-if=\"hasSender\">\n\t\t\t\t\t\t<sms-alert-block v-if=\"hasPhone === false\">\n\t\t\t\t\t\t\t<template v-slot:sms-alert-text>${Loc.getMessage('SALESCENTER_SEND_ORDER_BY_SMS_SENDER_ALERT_PHONE_EMPTY')}</template>\n\t\t\t\t\t\t</sms-alert-block>\n\t\t\t\t\t</template>\n\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t<sms-configure-block \n\t\t\t\t\t\t\t:url=\"senders.settings.url\"\n\t\t\t\t\t\t\tv-on:on-configure=\"smsSenderConfigure\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<template v-slot:sms-configure-text-alert>${Loc.getMessage('SALESCENTER_SEND_ORDER_BY_SMS_SENDER_NOT_CONFIGURED')}</template>\n\t\t\t\t\t\t\t<template v-slot:sms-configure-text-setting>${Loc.getMessage('SALESCENTER_PRODUCT_DISCOUNT_EDIT_PAGE_URL_TITLE')}</template>\n\t\t\t\t\t\t</sms-configure-block>\n\t\t\t\t\t</template> \n\t\t\t\t\t\n\t\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container-sms\">\n\t\t\t\t\t\t\n\t\t\t\t\t\t<sms-user-avatar-block :manager=\"manager\"/>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container-sms-content\">\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t<sms-message-editor-block :editor=\"editor\"/>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t<sms-sender-list-block\n\t\t\t\t\t\t\t\t:list=\"items\"\n\t\t\t\t\t\t\t\t:selected=\"getFirstSender()\"\n\t\t\t\t\t\t\t\t:settingUrl=\"senders.settings.url\"\n\t\t\t\t\t\t\t\tv-on:on-configure=\"smsSenderConfigure\"\n\t\t\t\t\t\t\t\tv-on:on-selected=\"setSelectedSender\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<template v-slot:sms-sender-list-text-send-from>${Loc.getMessage('SALESCENTER_SEND_ORDER_BY_SMS_SENDER')}</template>\n\t\t\t\t\t\t\t</sms-sender-list-block>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</stage-block-item>\n\t`\n};\nexport {\n\tSmsMessage\n}","import {Loc} \t\t\t\t\t\t\t\tfrom 'main.core';\nimport {Block} \t\tfrom 'salescenter.component.stage-block';\nimport {StageList} \t\t\t\t\t\t\tfrom 'salescenter.component.stage-block.automation';\nimport * as AutomationStage \t\t\t\tfrom 'salescenter.automation-stage';\nimport {StageMixin} \t\t\t\t\t\tfrom \"./stage-mixin\";\n\nconst Automation = {\n\tprops: {\n\t\tstatus: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\tcounter: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\titems: {\n\t\t\ttype: Array,\n\t\t\trequired: true\n\t\t},\n\t\tinitialCollapseState: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true\n\t\t},\n\t},\n\tmixins:[StageMixin],\n\tdata()\n\t{\n\t\treturn {\n\t\t\tstages: []\n\t\t}\n\t},\n\tcomponents:\n\t\t{\n\t\t\t'stage-block-item'\t\t\t:\tBlock,\n\t\t\t'stage-item-list'\t\t\t:\tStageList\n\t\t},\n\tmethods:\n\t\t{\n\t\t\tloadStageCollection()\n\t\t\t{\n\t\t\t\tObject.values(this.items).forEach(\n\t\t\t\t\toptions => this.stages.push(AutomationStage.Factory.create(options)));\n\t\t\t},\n\n\t\t\tsetStageOnOrderPaid(e)\n\t\t\t{\n\t\t\t\tthis.$root.$app.stageOnOrderPaid = e.data;\n\t\t\t},\n\n\t\t\tsaveCollapsedOption(option)\n\t\t\t{\n\t\t\t\tthis.$emit('on-save-collapsed-option', 'automation', option);\n\t\t\t},\n\n\t\t\tupdateSelectedStage(e)\n\t\t\t{\n\t\t\t\tlet newStageId = e.data;\n\t\t\t\tthis.stages.forEach((stage) => {\n\t\t\t\t\tstage.selected = stage.id === newStageId;\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\tcomputed:\n\t\t{\n\t\t\tconfigForBlock()\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\tcounter: this.counter,\n\t\t\t\t\tchecked: this.counterCheckedMixin,\n\t\t\t\t\tcollapsible: true,\n\t\t\t\t\tinitialCollapseState: this.initialCollapseState,\n\t\t\t\t\ttitleName: this.selectedStage.name,\n\t\t\t\t}\n\t\t\t},\n\t\t\tselectedStage()\n\t\t\t{\n\t\t\t\treturn this.stages.find((stage) =>\n\t\t\t\t{\n\t\t\t\t\treturn stage.selected;\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\tcreated()\n\t{\n\t\tthis.loadStageCollection()\n\t},\n\ttemplate: `\n\t\t<stage-block-item\n\t\t\t:config=\"configForBlock\"\n\t\t\t:class=\"statusClassMixin\"\n\t\t\t@on-adjust-collapsed=\"saveCollapsedOption\"\n\t\t>\n\t\t\t<template v-slot:block-title-title>${Loc.getMessage('SALESCENTER_AUTOMATION_BLOCK_TITLE')}</template>\n\t\t\t<template v-slot:block-container>\n\t\t\t\t<div :class=\"containerClassMixin\">\n\t\t\t\t\t<stage-item-list \n\t\t\t\t\t\tv-on:on-choose-select-option=\"updateSelectedStage($event); setStageOnOrderPaid($event)\"\n\t\t\t\t\t\t:stages=\"stages\">\n\t\t\t\t\t\t<template v-slot:stage-list-text>${Loc.getMessage('SALESCENTER_AUTOMATION_BLOCK_TEXT')}</template>\n\t\t\t\t\t</stage-item-list>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</stage-block-item>\n\t`\n};\nexport {\n\tAutomation\n}","import {\n\tTimeLineItemBlock as Item,\n\tTimeLineItemPaymentBlock as PaymentItem\n} \t\t\t\t\t\t\t\t\t\t\t\tfrom 'salescenter.component.stage-block.timeline';\nimport {Payment} \t\t\t\t\t\t\t\tfrom 'salescenter.timeline';\n\nconst TimeLine = {\n\tprops:{\n\t\ttimelineItems: {\n\t\t\ttype: Array,\n\t\t\trequired: true\n\t\t},\n\t},\n\tcomponents: {\n\t\t'timeline-item-block'\t\t\t: Item,\n\t\t'timeline-item-payment-block'\t: PaymentItem,\n\t},\n\n\tmethods:\n\t\t{\n\t\t\tisPayment(item)\n\t\t\t{\n\t\t\t\treturn item.type === Payment.type();\n\t\t\t}\n\t\t},\n\ttemplate: `\n\t\t<div class=\"salescenter-app-payment-by-sms-timeline\">\n\t\t\t<template v-for=\"(item) in timelineItems\">\n\t\t\t\t<timeline-item-payment-block\t:item=\"item\"\tv-if=\"isPayment(item)\"/>\n\t\t\t\t<timeline-item-block\t\t\t:item=\"item\" \tv-else/>\n\t\t\t</template>\n\t\t</div>\n\t`\n};\n\nexport {\n\tTimeLine,\n}","import {\n\tStatusTypes as Status\n} \t\t\t\t\t\tfrom 'salescenter.component.stage-block';\nimport * as TimeLineItem\n\t\t\t\t\t\tfrom 'salescenter.timeline';\nimport {MixinTemplatesType}\n\t\t\t\t\t\tfrom \"./templates-type-mixin\";\n\nimport * as Tile \t\tfrom 'salescenter.tile';\nimport {Send} \t\t\tfrom \"./stage-blocks/send\";\nimport {Cashbox} \t\tfrom \"./stage-blocks/cashbox\";\nimport {Product} \t\tfrom \"./stage-blocks/product\";\nimport {DeliveryVuex} \tfrom \"./stage-blocks/delivery-vuex\";\nimport {PaySystem} \t\tfrom \"./stage-blocks/paysystem\";\nimport {SmsMessage} \tfrom \"./stage-blocks/sms-message\";\nimport {Automation} \tfrom \"./stage-blocks/automation\";\nimport {StageMixin} \tfrom \"./stage-blocks/stage-mixin\";\nimport {TimeLine} \t\tfrom \"./stage-blocks/timeline\";\n\n\nconst StageBlocksList = {\n\tprops:{\n\t\tsendAllowed: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true\n\t\t},\n\t},\n\tdata()\n\t{\n\t\tlet stages =  {\n\t\t\tmessage:{\n\t\t\t\tstatus: \t\t\tStatus.complete,\n\t\t\t\titems: \t\t\t\tthis.$root.$app.options.contactBlock.smsSenders,\n\t\t\t\tmanager:\t\t\tthis.$root.$app.options.contactBlock.manager,\n\t\t\t\tphone:\t\t\t\tthis.$root.$app.options.contactPhone,\n\t\t\t\tsenderSettingsUrl:\tthis.$root.$app.urlSettingsSmsSenders,\n\t\t\t\teditorTemplate:\t\tthis.$root.$app.sendingMethodDesc.text,\n\t\t\t\teditorUrl:\t\t\tthis.$root.$app.orderPublicUrl\n\t\t\t},\n\t\t\tproduct:{\n\t\t\t\tstatus:\t\t\t\tthis.$root.$app.options.basket && this.$root.$app.options.basket.length > 0\n\t\t\t\t\t\t\t\t\t?\tStatus.complete\n\t\t\t\t\t\t\t\t\t:\tStatus.current\n\t\t\t},\n\t\t\tpaysystem:{\n\t\t\t\tstatus: \t\t\tthis.$root.$app.options.paySystemList.isSet\n\t\t\t\t\t\t\t\t\t?\tStatus.complete\n\t\t\t\t\t\t\t\t\t:\tStatus.disabled,\n\t\t\t\ttiles:\t\t\tthis.getTileCollection(\n\t\t\t\t\t\t\t\t\tthis.$root.$app.options.paySystemList.items),\n\t\t\t\tinstalled:\t\t\tthis.$root.$app.options.paySystemList.isSet,\n\t\t\t\ttitleItems: this.getTitleItems(this.$root.$app.options.paySystemList.items),\n\t\t\t\tinitialCollapseState: this.$root.$app.options.isPaySystemCollapsed ? this.$root.$app.options.isPaySystemCollapsed === 'Y' : this.$root.$app.options.paySystemList.isSet,\n\t\t\t},\n\t\t\tcashbox:{},\n\t\t\tdelivery:{\n\t\t\t\tstatus: \t\t\tthis.$root.$app.options.deliveryList.isInstalled\n\t\t\t\t\t\t\t\t\t?\tStatus.complete\n\t\t\t\t\t\t\t\t\t:\tStatus.disabled,\n\t\t\t\ttiles:\t\t\tthis.getTileCollection(\n\t\t\t\t\t\t\t\t\tthis.$root.$app.options.deliveryList.items),\n\t\t\t\tinstalled:\t\t\tthis.$root.$app.options.deliveryList.isInstalled,\n\t\t\t\tinitialCollapseState: this.$root.$app.options.isDeliveryCollapsed ? this.$root.$app.options.isDeliveryCollapsed === 'Y' : this.$root.$app.options.deliveryList.isInstalled,\n\t\t\t}\n\t\t};\n\n\t\tif (this.$root.$app.options.cashboxList.hasOwnProperty('items'))\n\t\t{\n\t\t\tstages.cashbox = {\n\t\t\t\tstatus: \t\t\tthis.$root.$app.options.cashboxList.isSet\n\t\t\t\t\t\t\t\t\t?\tStatus.complete\n\t\t\t\t\t\t\t\t\t:\tStatus.disabled,\n\t\t\t\ttiles:\t\t\tthis.getTileCollection(\n\t\t\t\t\t\t\t\t\tthis.$root.$app.options.cashboxList.items),\n\t\t\t\tinstalled:\t\t\tthis.$root.$app.options.cashboxList.isSet,\n\t\t\t\ttitleItems: this.getTitleItems(this.$root.$app.options.cashboxList.items),\n\t\t\t\tinitialCollapseState: this.$root.$app.options.isCashboxCollapsed ? this.$root.$app.options.isCashboxCollapsed === 'Y' : this.$root.$app.options.cashboxList.isSet,\n\t\t\t};\n\t\t}\n\n\t\tif (this.$root.$app.options.isAutomationAvailable)\n\t\t{\n\t\t\tstages.automation = {\n\t\t\t\tstatus:\t\t\t\tStatus.complete,\n\t\t\t\titems:\t\t\t\tthis.$root.$app.options.dealStageList,\n\t\t\t\tinitialCollapseState: this.$root.$app.options.isAutomationCollapsed ? this.$root.$app.options.isAutomationCollapsed === 'Y' : false,\n\t\t\t};\n\t\t}\n\n\t\tif (BX.type.isObject(this.$root.$app.options.timeline)\n\t\t\t&& Object.values(this.$root.$app.options.timeline).length > 0)\n\t\t{\n\t\t\tstages.timeline = {\n\t\t\t\titems:\t\t\tthis.getTimelineCollection(\n\t\t\t\t\t\t\t\t\tthis.$root.$app.options.timeline)\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\tstages: stages,\n\t\t}\n\t},\n\tcomponents: {\n\t\t'send-block'\t\t\t: Send,\n\t\t'cashbox-block'\t\t\t: Cashbox,\n\t\t'product-block'\t\t\t: Product,\n\t\t'delivery-block'\t\t: DeliveryVuex,\n\t\t'paysystem-block'\t\t: PaySystem,\n\t\t'automation-block'\t\t: Automation,\n\t\t'sms-message-block'\t\t: SmsMessage,\n\t\t'timeline-block'\t\t: TimeLine\n\t},\n\tmixins:[StageMixin, MixinTemplatesType],\n\tcomputed:\n\t\t{\n\t\t\thasStageTimeLine()\n\t\t\t{\n\t\t\t\treturn this.stages.timeline.hasOwnProperty('items');\n\t\t\t},\n\n\t\t\thasStageAutomation()\n\t\t\t{\n\t\t\t\treturn this.stages.automation.hasOwnProperty('items');\n\t\t\t},\n\t\t\thasStageCashBox()\n\t\t\t{\n\t\t\t\treturn this.stages.cashbox.hasOwnProperty('tiles');\n\t\t\t},\n\t\t\teditableMixin()\n\t\t\t{\n\t\t\t\treturn this.editable === false;\n\t\t\t}\n\t\t},\n\tmethods:\n\t\t{\n\t\t\tinitCounter()\n\t\t\t{\n\t\t\t\tthis.counter = 1;\n\t\t\t},\n\n\t\t\tgetTimelineCollection(items)\n\t\t\t{\n\t\t\t\tlet list = [];\n\n\t\t\t\tObject.values(items).forEach(\n\t\t\t\t\toptions => list.push(TimeLineItem.Factory.create(options)));\n\n\t\t\t\treturn list;\n\t\t\t},\n\n\t\t\tgetTileCollection(items)\n\t\t\t{\n\t\t\t\tlet tiles = [];\n\t\t\t\tObject.values(items).forEach(\n\t\t\t\t\toptions => tiles.push(Tile.Factory.create(options)));\n\n\t\t\t\treturn tiles;\n\t\t\t},\n\n\t\t\tgetTitleItems(items)\n\t\t\t{\n\t\t\t\tlet result = [];\n\t\t\t\titems.forEach((item) => {\n\t\t\t\t\tif (![Tile.More.type(), Tile.Offer.type()].includes(item.type))\n\t\t\t\t\t{\n\t\t\t\t\t\tresult.push(item);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\treturn result;\n\t\t\t},\n\n\t\t\tstageRefresh(e, type)\n\t\t\t{\n\t\t\t\tBX.ajax.runComponentAction(\n\t\t\t\t\t\"bitrix:salescenter.app\",\n\t\t\t\t\t\"getAjaxData\",\n\t\t\t\t\t{\n\t\t\t\t\t\tmode: \"class\",\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\ttype: type,\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t).then(function(response) {\n\t\t\t\t\tif (response.data)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.refreshTilesByType(response.data, type);\n\t\t\t\t\t}\n\t\t\t\t}.bind(this));\n\t\t\t},\n\n\t\t\trefreshTilesByType(data, type)\n\t\t\t{\n\t\t\t\tif(type === 'PAY_SYSTEM')\n\t\t\t\t{\n\t\t\t\t\tthis.stages.paysystem.status = \t\tdata.isSet\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t?\tStatus.complete\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t:\tStatus.disabled;\n\t\t\t\t\tthis.stages.paysystem.tiles = \t\tthis.getTileCollection(data.items);\n\t\t\t\t\tthis.stages.paysystem.installed = \tdata.isSet;\n\t\t\t\t}\n\t\t\t\telse if(type === 'CASHBOX')\n\t\t\t\t{\n\t\t\t\t\tthis.stages.cashbox.status = \t\tdata.isSet\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t?\tStatus.complete\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t:\tStatus.disabled;\n\t\t\t\t\tthis.stages.cashbox.tiles = \t\tthis.getTileCollection(data.items);\n\t\t\t\t\tthis.stages.cashbox.installed = \tdata.isSet;\n\t\t\t\t\tthis.stages.cashbox.titleItems = this.getTitleItems(data.items);\n\t\t\t\t}\n\t\t\t\telse if(type === 'DELIVERY')\n\t\t\t\t{\n\t\t\t\t\tthis.stages.delivery.status = \t\tdata.isSet\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t?\tStatus.complete\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t:\tStatus.disabled;\n\t\t\t\t\tthis.stages.delivery.tiles = \t\tthis.getTileCollection(data.items);\n\t\t\t\t\tthis.stages.delivery.installed = \tdata.isInstalled;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tonSend(event)\n\t\t\t{\n\t\t\t\tthis.$emit('stage-block-send-on-send', event)\n\t\t\t},\n\n\t\t\tchangeProvider(value)\n\t\t\t{\n\t\t\t\tthis.$root.$app.sendingMethodDesc.provider = value;\n\t\t\t},\n\n\t\t\tsaveCollapsedOption(type, value)\n\t\t\t{\n\t\t\t\tBX.userOptions.save('salescenter', 'add_payment_collapse_options', type, value);\n\t\t\t},\n\t\t},\n\tcreated()\n\t{\n\t\tthis.initCounter();\n\t},\n\tbeforeUpdate()\n\t{\n\t\tthis.initCounter();\n\t},\n\ttemplate: `\n\t\t<div>\n\t\t\t<sms-message-block \t\t\t\t\t\tv-on:stage-block-sms-send-on-change-provider=\"changeProvider\"\n\t\t\t\t:counter=\t\t\t\"counter++\"\n\t\t\t\t:status=\t\t\t\"stages.message.status\"\n\t\t\t\t:items=\t\t\t\t\"stages.message.items\"\n\t\t\t\t:manager=\t\t\t\"stages.message.manager\"\n\t\t\t\t:phone=\t\t\t\t\"stages.message.phone\"\n\t\t\t\t:senderSettingsUrl=\t\"stages.message.senderSettingsUrl\"\n\t\t\t\t:editorTemplate=\t\"stages.message.editorTemplate\"\n\t\t\t\t:editorUrl=\t\t\t\"stages.message.editorUrl\"\n\t\t\t/>\n\t\t\t\t\n\t\t\t<product-block \n\t\t\t\t:counter=\t\"counter++\"\n\t\t\t\t:status= \t\"stages.product.status\"\t\t\t\t\n\t\t\t/>\n\t\t\t\n\t\t\t<paysystem-block\t\t\t\t\t\tv-on:on-stage-tile-collection-slider-close=\"stageRefresh($event, 'PAY_SYSTEM')\"\n\t\t\t\t:counter=\t\"counter++\"\n\t\t\t\t:status=  \t\"stages.paysystem.status\"\n\t\t\t\t:tiles=  \t\"stages.paysystem.tiles\"\n\t\t\t\t:installed=\t\"stages.paysystem.installed\"\n\t\t\t\t:titleItems=\"stages.paysystem.titleItems\"\n\t\t\t\t:initialCollapseState = \"stages.paysystem.initialCollapseState\"\n\t\t\t\t@on-save-collapsed-option=\"saveCollapsedOption\"\n\t\t\t/>\n\t\t\t\t\n\t\t\t<cashbox-block \tv-if=\"hasStageCashBox\"\tv-on:on-stage-tile-collection-slider-close=\"stageRefresh($event, 'CASHBOX')\"\n\t\t\t\t:counter=\t\"counter++\"\n\t\t\t\t:status=\t\"stages.cashbox.status\"\n\t\t\t\t:tiles=\t\t\"stages.cashbox.tiles\"\n\t\t\t\t:installed=\t\"stages.cashbox.installed\"\n\t\t\t\t:titleItems=\"stages.cashbox.titleItems\"\n\t\t\t\t:initialCollapseState = \"stages.cashbox.initialCollapseState\"\n\t\t\t\t@on-save-collapsed-option=\"saveCollapsedOption\"\n\t\t\t/>\t\n\t\t\t\n\t\t\t<automation-block v-if=\"hasStageAutomation\"\n\t\t\t\t:counter=\t\"counter++\"\n\t\t\t\t:status=\t\"stages.automation.status\"\n\t\t\t\t:items=\t\t\"stages.automation.items\"\n\t\t\t\t:initialCollapseState = \"stages.automation.initialCollapseState\"\n\t\t\t\t@on-save-collapsed-option=\"saveCollapsedOption\"\n\t\t\t/>\n\t\t\t\n\t\t\t<delivery-block\t\t\t\t\t\t\tv-on:on-stage-tile-collection-slider-close=\"stageRefresh($event, 'DELIVERY')\"\n\t\t\t\t:counter=\t\"counter++\"\n\t\t\t\t:status=  \t\"stages.delivery.status\"\n\t\t\t\t:tiles=  \t\"stages.delivery.tiles\"\n\t\t\t\t:installed=\t\"stages.delivery.installed\"\n\t\t\t\t:initialCollapseState = \"stages.delivery.initialCollapseState\"\n\t\t\t\t@on-save-collapsed-option=\"saveCollapsedOption\"\n\t\t\t/>\n\t\t\t\n\t\t\t<send-block\t\t\t\t\t\t\t\tv-on:stage-block-send-on-send=\"onSend\"\n\t\t\t\t:allowed=\t\"sendAllowed\" \n\t\t\t\t:resend=\t\"editableMixin\"\n\t\t\t/>\n\t\t\t\n\t\t\t<timeline-block  v-if=\"hasStageTimeLine\"\n\t\t\t\t:timelineItems= \"stages.timeline.items\"\n\t\t\t/>\n\t\t</div>\n\t`\n};\n\nexport {\n\tStageBlocksList\n}","import {Vue} from 'ui.vue';\nimport {Vuex} from 'ui.vue.vuex';\nimport {Manager} from 'salescenter.manager';\nimport {Loader} from 'main.loader';\nimport {Type, Uri} from 'main.core';\nimport {MixinTemplatesType} from \"./components/deal-receiving-payment/templates-type-mixin\";\nimport {StageBlocksList} from \"./components/deal-receiving-payment/stage-blocks-list\";\n\nimport 'popup';\nimport 'ui.buttons';\nimport 'ui.buttons.icons';\nimport 'ui.forms';\nimport 'ui.fonts.opensans';\nimport 'ui.pinner';\n\nimport {config} from './config';\n\nVue.component(config.templateName, {\n\n\tmixins:[MixinTemplatesType],\n\n\tdata()\n\t{\n\t\treturn {\n\t\t\tisFaded: false,\n\t\t\tisShowPreview: false,\n\t\t\tisShowPayment: false,\n\t\t\tisShowPaymentBySms: false,\n\t\t\tisShowPaymentByEmail: false,\n\t\t\tisShowPaymentByCash: false,\n\t\t\tisShowPaymentByQr: false,\n\t\t\tpageTitle: '',\n\t\t\tcurrentPageId: null,\n\t\t\tactions: [],\n\t\t\tframeCheckShortTimeout: false,\n\t\t\tframeCheckLongTimeout: false,\n\t\t\tisPagesOpen: false,\n\t\t\tisFormsOpen: false,\n\t\t\tshowedPageIds: [],\n\t\t\tloadedPageIds: [],\n\t\t\terrorPageIds: [],\n\t\t\tlastAddedPages: [],\n\t\t\tordersCount: null,\n\t\t\teditedPageId: null,\n\t\t\tisOrderPublicUrlAvailable: null,\n\t\t\tcurrentPageTitle: null\n\t\t};\n\t},\n\n\tcomponents:\n\t{\n\t\t'deal-receiving-payment'\t:\tStageBlocksList\n\t},\n\tcreated()\n\t{\n\t\tthis.$root.$on(\"on-show-company-contacts\", (value) => {\n\t\t\tthis.showCompanyContacts(value);\n\t\t});\n\t\tthis.$root.$on('on-start-progress', () => {\n\t\t\tthis.startFade();\n\t\t});\n\t\tthis.$root.$on('on-stop-progress', () => {\n\t\t\tthis.endFade();\n\t\t});\n\t},\n\n\tupdated()\n\t{\n\t\tthis.renderErrors();\n\t},\n\n\tmounted()\n\t{\n\t\tthis.createPinner();\n\n\t\tif (this.$root.$app.context === 'deal')\n\t\t{\n\t\t\tthis.showPaymentBySmsForm();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.createLoader();\n\t\t\tthis.$root.$app.fillPages().then(() =>\n\t\t\t{\n\t\t\t\tthis.refreshOrdersCount();\n\t\t\t\tthis.openFirstPage();\n\t\t\t});\n\t\t}\n\t\tthis.isOrderPublicUrlAvailable = this.$root.$app.isOrderPublicUrlAvailable;\n\t\tthis.isOrderPublicUrlExists = this.$root.$app.isOrderPublicUrlExists;\n\n\t\tif(this.$root.$app.isPaymentsLimitReached)\n\t\t{\n\t\t\tlet paymentsLimitStartNode = this.$root.$nodes.paymentsLimit;\n\t\t\tlet paymentsLimitNode = this.$refs['paymentsLimit'];\n\t\t\tfor (let node of paymentsLimitStartNode.children)\n\t\t\t{\n\t\t\t\tpaymentsLimitNode.appendChild(node);\n\t\t\t}\n\t\t}\n\n\t\tthis.movePanels();\n\t},\n\n\tmethods:\n\t{\n\t\tstartFade()\n\t\t{\n\t\t\tthis.isFaded = true;\n\t\t},\n\t\tendFade()\n\t\t{\n\t\t\tthis.isFaded = false;\n\t\t},\n\t\tmovePanels()\n\t\t{\n\t\t\tlet sidepanel = this.$refs['sidebar'];\n\t\t\tlet leftPanel = this.$root.$nodes.leftPanel;\n\t\t\tif(!leftPanel)\n\t\t\t{\n\t\t\t\tleftPanel = this.$refs['leftSide'];\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t// this.$refs['leftSide'].remove();\n\t\t\t}\n\n\t\t\tif(sidepanel && leftPanel)\n\t\t\t{\n\t\t\t\t// leftPanel.appendChild(sidepanel);\n\t\t\t\t// BX.show(sidepanel);\n\n\t\t\t\tlet nav = this.$refs['sidepanelNav'];\n\t\t\t\tif(nav)\n\t\t\t\t{\n\t\t\t\t\t// leftPanel.appendChild(nav);\n\t\t\t\t\t// BX.show(nav);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tcreatePinner()\n\t\t{\n\t\t\tlet buttonsPanel = this.$refs['buttonsPanel'];\n\t\t\tif(buttonsPanel)\n\t\t\t{\n\t\t\t\tthis.$root.$el.parentNode.appendChild(buttonsPanel);\n\t\t\t\tnew BX.UI.Pinner(\n\t\t\t\t\tbuttonsPanel,\n\t\t\t\t\t{\n\t\t\t\t\t\tfixBottom: this.$root.$app.isFrame,\n\t\t\t\t\t\tfullWidth: this.$root.$app.isFrame\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t},\n\t\tgetActions()\n\t\t{\n\t\t\tlet actions = [];\n\t\t\tif(this.currentPage)\n\t\t\t{\n\t\t\t\tactions = [\n\t\t\t\t\t{text: this.localize.SALESCENTER_RIGHT_ACTION_COPY_URL, onclick: this.copyUrl},\n\t\t\t\t];\n\t\t\t\tif(this.currentPage.landingId > 0)\n\t\t\t\t{\n\t\t\t\t\tactions = [\n\t\t\t\t\t\t...actions,\n\t\t\t\t\t\t{text: this.localize.SALESCENTER_RIGHT_ACTION_HIDE, onclick: this.hidePage},\n\t\t\t\t\t];\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tactions = [\n\t\t\t\t\t\t...actions,\n\t\t\t\t\t\t{text: this.localize.SALESCENTER_RIGHT_ACTION_DELETE, onclick: this.hidePage},\n\t\t\t\t\t];\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn [\n\t\t\t\t...actions,\n\t\t\t\t{text: this.localize.SALESCENTER_RIGHT_ACTION_ADD, items: this.getAddPageActions()},\n\t\t\t];\n\t\t},\n\t\tgetAddPageActions(isWebform = false)\n\t\t{\n\t\t\treturn [\n\t\t\t\t{text: this.localize.SALESCENTER_RIGHT_ACTION_ADD_SITE_B24, onclick: () =>\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.addSite(isWebform);\n\t\t\t\t\t}},\n\t\t\t\t{text: this.localize.SALESCENTER_RIGHT_ACTION_ADD_CUSTOM, onclick: () =>\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.showAddUrlPopup({\n\t\t\t\t\t\t\tisWebform: isWebform === true ? 'Y' : null\n\t\t\t\t\t\t});\n\t\t\t\t\t}},\n\t\t\t];\n\t\t},\n\t\topenFirstPage()\n\t\t{\n\t\t\tthis.isShowPayment = false;\n\t\t\tthis.isShowPaymentBySms = false;\n\t\t\tthis.isShowPreview = true;\n\t\t\tif(this.pages && this.pages.length > 0)\n\t\t\t{\n\t\t\t\tlet firstWebformPage = false;\n\t\t\t\tlet pageToOpen = false;\n\t\t\t\tthis.pages.forEach((page) =>\n\t\t\t\t{\n\t\t\t\t\tif(!pageToOpen)\n\t\t\t\t\t{\n\t\t\t\t\t\tif(!page.isWebform)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tpageToOpen = page;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfirstWebformPage = page;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tif(!pageToOpen && firstWebformPage)\n\t\t\t\t{\n\t\t\t\t\tpageToOpen = firstWebformPage;\n\t\t\t\t}\n\t\t\t\tif(this.currentPageId !== pageToOpen.id)\n\t\t\t\t{\n\t\t\t\t\tthis.onPageClick(pageToOpen);\n\t\t\t\t\tif(pageToOpen.isWebform)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.isFormsOpen = true;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.isPagesOpen = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.currentPageId = this.pages[0].id;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.pageTitle = null;\n\t\t\t\tthis.currentPageId = null;\n\t\t\t\tthis.setPageTitle(this.pageTitle);\n\t\t\t}\n\t\t},\n\t\tonPageClick(page)\n\t\t{\n\t\t\tthis.pageTitle = page.name;\n\t\t\tthis.currentPageId = page.id;\n\t\t\tthis.hideActionsPopup();\n\t\t\tthis.isShowPayment = false;\n\t\t\tthis.isShowPaymentBySms = false;\n\t\t\tthis.isShowPreview = true;\n\t\t\tthis.setPageTitle(this.pageTitle);\n\t\t\tif(page.isFrameDenied !== true)\n\t\t\t{\n\t\t\t\tif(!this.showedPageIds.includes(page.id))\n\t\t\t\t{\n\t\t\t\t\tthis.startFrameCheckTimeout();\n\t\t\t\t\tthis.showedPageIds.push(page.id);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.onFrameError();\n\t\t\t}\n\t\t},\n\t\tshowActionsPopup({target})\n\t\t{\n\t\t\tBX.PopupMenu.show('salescenter-app-actions', target, this.getActions(), {\n\t\t\t\toffsetLeft: 0,\n\t\t\t\toffsetTop: 0,\n\t\t\t\tcloseByEsc: true,\n\t\t\t});\n\t\t},\n\t\tshowCompanyContacts({target})\n\t\t{\n\t\t\tBX.Salescenter.Manager.openSlider(this.$root.$app.options.urlSettingsCompanyContacts, {width: 1200} );\n\t\t},\n\t\tshowAddPageActionPopup({target}, isWebform = false)\n\t\t{\n\t\t\tlet menuId = 'salescenter-app-add-page-actions';\n\t\t\tif(isWebform)\n\t\t\t{\n\t\t\t\tmenuId += '-forms';\n\t\t\t}\n\t\t\tBX.PopupMenu.show(menuId, target, this.getAddPageActions(isWebform), {\n\t\t\t\toffsetLeft: target.offsetWidth + 20,\n\t\t\t\toffsetTop: -target.offsetHeight - 15,\n\t\t\t\tcloseByEsc: true,\n\t\t\t\tangle: {\n\t\t\t\t\tposition: 'left',\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\thideActionsPopup()\n\t\t{\n\t\t\tBX.PopupMenu.destroy('salescenter-app-actions');\n\t\t\tBX.PopupMenu.destroy('salescenter-app-add-page-actions');\n\t\t},\n\t\taddSite(isWebform = false)\n\t\t{\n\t\t\tManager.addSitePage(isWebform).then((result) =>\n\t\t\t{\n\t\t\t\tlet newPage = result.answer.result.page || false;\n\t\t\t\tthis.$root.$app.fillPages().then(() =>\n\t\t\t\t{\n\t\t\t\t\tif(newPage)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.onPageClick(newPage);\n\t\t\t\t\t\tthis.lastAddedPages.push(parseInt(newPage.id));\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.openFirstPage();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t\tthis.hideActionsPopup();\n\t\t},\n\t\tcopyUrl(event)\n\t\t{\n\t\t\tif(this.currentPage && this.currentPage.url)\n\t\t\t{\n\t\t\t\tManager.copyUrl(this.currentPage.url, event);\n\t\t\t\tthis.hideActionsPopup();\n\t\t\t}\n\t\t},\n\t\teditPage()\n\t\t{\n\t\t\tif(this.currentPage)\n\t\t\t{\n\t\t\t\tif(this.currentPage.landingId && this.currentPage.landingId > 0)\n\t\t\t\t{\n\t\t\t\t\tManager.editLandingPage(this.currentPage.landingId, this.currentPage.siteId);\n\t\t\t\t\tthis.hideActionsPopup();\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.showAddUrlPopup(this.currentPage);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\thidePage()\n\t\t{\n\t\t\tif(this.currentPage)\n\t\t\t{\n\t\t\t\tthis.$root.$app.hidePage(this.currentPage).then(() => {\n\t\t\t\t\tthis.openFirstPage();\n\t\t\t\t});\n\t\t\t\tthis.hideActionsPopup();\n\t\t\t}\n\t\t},\n\t\tshowAddUrlPopup(newPage)\n\t\t{\n\t\t\tif(!Type.isPlainObject(newPage))\n\t\t\t{\n\t\t\t\tnewPage = {};\n\t\t\t}\n\t\t\tManager.addCustomPage(newPage).then((pageId) =>\n\t\t\t{\n\t\t\t\tif(!this.isShowPreview)\n\t\t\t\t{\n\t\t\t\t\tthis.isShowPreview = false;\n\t\t\t\t}\n\t\t\t\tthis.$root.$app.fillPages().then(() => {\n\t\t\t\t\tif(pageId && (!Type.isPlainObject(newPage) || !newPage.id))\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.lastAddedPages.push(parseInt(pageId));\n\t\t\t\t\t}\n\t\t\t\t\tif(!pageId && newPage)\n\t\t\t\t\t{\n\t\t\t\t\t\tpageId = newPage.id;\n\t\t\t\t\t}\n\t\t\t\t\tif(pageId)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.pages.forEach((page) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif(parseInt(page.id) === parseInt(pageId))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.onPageClick(page);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tif(!this.isShowPayment || !this.isShowPaymentBySms)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.isShowPreview = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t\tthis.hideActionsPopup();\n\t\t},\n\t\tshowPaymentForm()\n\t\t{\n\t\t\tthis.isShowPayment = true;\n\t\t\tthis.isShowPaymentBySms = false;\n\t\t\tthis.isShowPreview = false;\n\t\t\tif(this.isOrderPublicUrlAvailable)\n\t\t\t{\n\t\t\t\tthis.setPageTitle(this.localize.SALESCENTER_LEFT_PAYMENT_ADD);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.setPageTitle(this.localize.SALESCENTER_DEFAULT_TITLE);\n\t\t\t}\n\t\t},\n\t\tshowPaymentBySmsForm()\n\t\t{\n\t\t\tthis.isShowPayment = false;\n\t\t\tthis.isShowPaymentBySms = true;\n\t\t\tthis.isShowPreview = false;\n\t\t\tthis.currentPageTitle = this.$root.$app.options.title;\n\n\t\t\tif(this.isOrderPublicUrlAvailable)\n\t\t\t{\n\t\t\t\tlet title = this.localize.SALESCENTER_LEFT_PAYMENT_BY_SMS;\n\n\t\t\t\tif(this.currentPageTitle)\n\t\t\t\t{\n\t\t\t\t\ttitle = this.currentPageTitle;\n\t\t\t\t}\n\n\t\t\t\tthis.setPageTitle(title);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.setPageTitle(this.localize.SALESCENTER_DEFAULT_TITLE);\n\t\t\t}\n\t\t},\n\t\tshowOrdersList()\n\t\t{\n\t\t\tthis.hideActionsPopup();\n\t\t\tManager.showOrdersList({\n\t\t\t\townerId: this.$root.$app.ownerId,\n\t\t\t\townerTypeId: this.$root.$app.ownerTypeId,\n\t\t\t}).then(() =>\n\t\t\t{\n\t\t\t\tthis.refreshOrdersCount();\n\t\t\t});\n\t\t},\n\t\tshowOrderAdd()\n\t\t{\n\t\t\tthis.hideActionsPopup();\n\t\t\tManager.showOrderAdd({\n\t\t\t\townerId: this.$root.$app.ownerId,\n\t\t\t\townerTypeId: this.$root.$app.ownerTypeId,\n\t\t\t}).then(() =>\n\t\t\t{\n\t\t\t\tthis.refreshOrdersCount();\n\t\t\t});\n\t\t},\n\t\tshowCatalog()\n\t\t{\n\t\t\tthis.hideActionsPopup();\n\t\t\tManager.openSlider(`/saleshub/catalog/?sessionId=${this.$root.$app.sessionId}`);\n\t\t},\n\t\tonFormsClick()\n\t\t{\n\t\t\tthis.isFormsOpen = !this.isFormsOpen;\n\t\t\tthis.hideActionsPopup();\n\t\t},\n\t\topenControlPanel()\n\t\t{\n\t\t\tManager.openControlPanel();\n\t\t\tthis.hideActionsPopup();\n\t\t},\n\t\topenHelpDesk()\n\t\t{\n\t\t\tthis.hideActionsPopup();\n\t\t\tManager.openHowItWorks();\n\t\t},\n\t\tisPageSelected(page)\n\t\t{\n\t\t\treturn (this.currentPage && this.isShowPreview && this.currentPage.id === page.id);\n\t\t},\n\t\tsend(event, skipPublicMessage = 'n')\n\t\t{\n\t\t\tif(!this.isAllowedSubmitButton)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif((this.isShowPayment || this.isShowPaymentBySms) && !this.isShowStartInfo)\n\t\t\t{\n\t\t\t\tif (this.editable)\n\t\t\t\t{\n\t\t\t\t\tthis.$root.$app.sendPayment(event.target, skipPublicMessage);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.$root.$app.resendPayment(event.target);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if(this.currentPage && this.currentPage.isActive)\n\t\t\t{\n\t\t\t\tthis.$root.$app.sendPage(this.currentPage.id);\n\t\t\t}\n\t\t},\n\t\tclose()\n\t\t{\n\t\t\tthis.$root.$app.closeApplication();\n\t\t},\n\t\tsetPageTitle(title = null)\n\t\t{\n\t\t\tif(!title)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif(this.$root.$nodes.title)\n\t\t\t{\n\t\t\t\tthis.$root.$nodes.title.innerText = title;\n\t\t\t}\n\t\t},\n\t\tonFrameError()\n\t\t{\n\t\t\tclearTimeout(this.frameCheckLongTimeout);\n\t\t\tif(this.showedPageIds.includes(this.currentPage.id))\n\t\t\t{\n\t\t\t\tthis.loadedPageIds.push(this.currentPage.id);\n\t\t\t}\n\t\t\tthis.errorPageIds.push(this.currentPage.id);\n\t\t},\n\t\tonFrameLoad(pageId)\n\t\t{\n\t\t\tclearTimeout(this.frameCheckLongTimeout);\n\t\t\tif(this.showedPageIds.includes(pageId))\n\t\t\t{\n\t\t\t\tthis.loadedPageIds.push(pageId);\n\t\t\t\tif(this.currentPage && this.currentPage.id === pageId)\n\t\t\t\t{\n\t\t\t\t\tif(this.frameCheckShortTimeout && !this.currentPage.landingId)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.onFrameError();\n\t\t\t\t\t}\n\t\t\t\t\telse if(this.errorPageIds.includes(this.currentPage.id))\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.errorPageIds = this.errorPageIds.filter((pageId) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn pageId !== this.currentPage.id;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(this.frameCheckShortTimeout && this.currentPage && this.currentPage.id === pageId && !this.currentPage.landingId)\n\t\t\t{\n\t\t\t\tthis.onFrameError();\n\t\t\t}\n\t\t},\n\t\tstartFrameCheckTimeout()\n\t\t{\n\t\t\t// this is a workaround for denied through X-Frame-Options sources\n\t\t\tif(this.frameCheckShortTimeout)\n\t\t\t{\n\t\t\t\tclearTimeout(this.frameCheckShortTimeout);\n\t\t\t\tthis.frameCheckShortTimeout = false;\n\t\t\t}\n\t\t\tthis.frameCheckShortTimeout = setTimeout(() =>\n\t\t\t{\n\t\t\t\tthis.frameCheckShortTimeout = false;\n\t\t\t}, 500);\n\n\t\t\t// to show error on long loading\n\t\t\tclearTimeout(this.frameCheckLongTimeout);\n\t\t\tthis.frameCheckLongTimeout = setTimeout(() =>\n\t\t\t{\n\t\t\t\tif(this.currentPage && this.showedPageIds.includes(this.currentPage.id) && !this.loadedPageIds.includes(this.currentPage.id))\n\t\t\t\t{\n\t\t\t\t\tthis.errorPageIds.push(this.currentPage.id);\n\t\t\t\t}\n\t\t\t}, 5000);\n\t\t},\n\t\tconnect()\n\t\t{\n\t\t\tvar loader = new BX.Loader({size: 200});\n\n\t\t\tloader.show(document.body);\n\t\t\tBX.Salescenter.Manager.connect({\n\t\t\t\tno_redirect: 'Y',\n\t\t\t\tcontext: this.$root.$app.context,\n\t\t\t}).then(() =>\n\t\t\t{\n\t\t\t\tBX.Salescenter.Manager.loadConfig().then((result) =>\n\t\t\t\t{\n\t\t\t\t\tloader.hide();\n\t\t\t\t\tif(result.isSiteExists)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$root.$app.isSiteExists = result.isSiteExists;\n\t\t\t\t\t\tthis.isSiteExists = result.isSiteExists;\n\t\t\t\t\t\tthis.$root.$app.fillPages().then(() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.isOrderPublicUrlExists = true;\n\t\t\t\t\t\t\tthis.$root.$app.isOrderPublicUrlExists = true;\n\t\t\t\t\t\t\tthis.$root.$app.orderPublicUrl = result.orderPublicUrl;\n\t\t\t\t\t\t\tthis.isOrderPublicUrlAvailable = result.isOrderPublicUrlAvailable;\n\t\t\t\t\t\t\tthis.$root.$app.isOrderPublicUrlAvailable = result.isOrderPublicUrlAvailable;\n\t\t\t\t\t\t\tif(!this.isShowPayment && !this.isShowPaymentBySms)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.openFirstPage();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif (this.isShowPaymentBySms)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tthis.showPaymentBySmsForm();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tthis.showPaymentForm();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}).catch(function()\n\t\t\t{\n\t\t\t\tloader.hide();\n\t\t\t});\n\t\t},\n\t\tcheckRecycle()\n\t\t{\n\t\t\tManager.openConnectedSite(true);\n\t\t},\n\t\topenConnectedSite()\n\t\t{\n\t\t\tManager.openConnectedSite();\n\t\t},\n\t\tgetFrameSource(page)\n\t\t{\n\t\t\tif(this.showedPageIds.includes(page.id))\n\t\t\t{\n\t\t\t\tif(page.landingId > 0)\n\t\t\t\t{\n\t\t\t\t\tif(page.isActive)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn (new Uri(page.url)).setQueryParam('theme', '').toString();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\treturn page.url;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\t\trefreshOrdersCount()\n\t\t{\n\t\t\tthis.$root.$app.getOrdersCount().then((result) =>\n\t\t\t{\n\t\t\t\tthis.ordersCount = result.answer.result || null;\n\t\t\t}).catch(() =>\n\t\t\t{\n\t\t\t\tthis.ordersCount = null;\n\t\t\t});\n\t\t},\n\t\trenderErrors()\n\t\t{\n\t\t\tif (this.isShowPayment && this.order.errors.length > 0)\n\t\t\t{\n\t\t\t\tlet errorMessages = this.order.errors.map((item) => item.message).join('<br>');\n\t\t\t\tlet params = {\n\t\t\t\t\tcolor: BX.UI.Alert.Color.DANGER,\n\t\t\t\t\ttextCenter: true,\n\t\t\t\t\ttext: BX.util.htmlspecialchars(errorMessages)\n\t\t\t\t};\n\t\t\t\tif (this.$refs.errorBlock.innerHTML.length === 0)\n\t\t\t\t{\n\t\t\t\t\tparams.animated = true;\n\t\t\t\t}\n\t\t\t\tlet alert = new BX.UI.Alert(params);\n\t\t\t\tthis.$refs.errorBlock.innerHTML = '';\n\t\t\t\tthis.$refs.errorBlock.appendChild(alert.getContainer());\n\t\t\t}\n\t\t\telse if (this.$refs.errorBlock)\n\t\t\t{\n\t\t\t\tthis.$refs.errorBlock.innerHTML = '';\n\t\t\t}\n\t\t},\n\t\teditMenuItem(event, page)\n\t\t{\n\t\t\tthis.editedPageId = page.id;\n\t\t\tsetTimeout(() =>\n\t\t\t{\n\t\t\t\tevent.target.parentNode.parentNode.querySelector('input').focus();\n\t\t\t}, 50);\n\t\t},\n\t\tsaveMenuItem(event)\n\t\t{\n\t\t\tconst pageId = this.editedPageId;\n\t\t\tconst name = event.target.value;\n\t\t\tlet oldName;\n\t\t\tthis.pages.forEach((page) =>\n\t\t\t{\n\t\t\t\tif(page.id === this.editedPageId)\n\t\t\t\t{\n\t\t\t\t\toldName = page.name\n\t\t\t\t}\n\t\t\t});\n\t\t\tif(pageId > 0 && oldName && name !== oldName && name.length > 0)\n\t\t\t{\n\t\t\t\tManager.addPage({\n\t\t\t\t\tid: pageId,\n\t\t\t\t\tname: name,\n\t\t\t\t\tanalyticsLabel: 'salescenterUpdatePageTitle',\n\t\t\t\t}).then(() =>\n\t\t\t\t{\n\t\t\t\t\tthis.$root.$app.fillPages().then(() => {\n\t\t\t\t\t\tif(this.editedPageId === this.currentPageId)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.setPageTitle(name);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.editedPageId = null;\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.editedPageId = null;\n\t\t\t}\n\t\t},\n\t\tcreateLoader()\n\t\t{\n\t\t\tconst loader = new Loader({size: 200});\n\t\t\tloader.show(this.$refs['previewLoader']);\n\t\t}\n\t},\n\n\tcomputed:\n\t{\n\t\tconfig: () => config,\n\t\tcurrentPage()\n\t\t{\n\t\t\tif(this.currentPageId > 0)\n\t\t\t{\n\t\t\t\tlet pages = this.application.pages.filter((page) =>\n\t\t\t\t{\n\t\t\t\t\treturn page.id === this.currentPageId;\n\t\t\t\t});\n\t\t\t\tif(pages.length > 0)\n\t\t\t\t{\n\t\t\t\t\treturn pages[0];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\n\t\tpagesSubmenuHeight()\n\t\t{\n\t\t\tif(this.isPagesOpen)\n\t\t\t{\n\t\t\t\treturn (this.application.pages.filter((page) =>\n\t\t\t\t{\n\t\t\t\t\treturn !page.isWebform;\n\t\t\t\t}).length * 39 + 30) + 'px';\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\treturn '0px';\n\t\t\t}\n\t\t},\n\n\t\tformsSubmenuHeight()\n\t\t{\n\t\t\tif(this.isFormsOpen)\n\t\t\t{\n\t\t\t\treturn (this.application.pages.filter((page) =>\n\t\t\t\t{\n\t\t\t\t\treturn page.isWebform;\n\t\t\t\t}).length * 39 + 30) + 'px';\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\treturn '0px';\n\t\t\t}\n\t\t},\n\n\t\tisFrameError()\n\t\t{\n\t\t\tif(this.isShowPreview && this.currentPage)\n\t\t\t{\n\t\t\t\tif(!this.currentPage.isActive)\n\t\t\t\t{\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\telse if(!this.currentPage.landingId && this.errorPageIds.includes(this.currentPage.id))\n\t\t\t\t{\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\n\t\tisShowLoader()\n\t\t{\n\t\t\treturn (\n\t\t\t\tthis.isShowPreview &&\n\t\t\t\tthis.currentPageId > 0 &&\n\t\t\t\tthis.showedPageIds.includes(this.currentPageId) &&\n\t\t\t\t!this.loadedPageIds.includes(this.currentPageId)\n\t\t\t);\n\t\t},\n\n\t\tisShowStartInfo()\n\t\t{\n\t\t\tlet res = false;\n\t\t\tif(this.isShowPreview)\n\t\t\t{\n\t\t\t\tres = (!this.pages || this.pages.length <= 0);\n\t\t\t}\n\t\t\telse if(this.isShowPayment || this.isShowPaymentBySms)\n\t\t\t{\n\t\t\t\tres = !this.isOrderPublicUrlAvailable;\n\t\t\t}\n\n\t\t\treturn res;\n\t\t},\n\n\t\tgetWrapperHeight()\n\t\t{\n\t\t\tif(\tthis.isShowPreview ||\n\t\t\t\tthis.isShowPayment ||\n\t\t\t\tthis.isShowPaymentBySms )\n\t\t\t{\n\t\t\t\tconst position = BX.pos(this.$root.$el);\n\t\t\t\tlet offset = position.top + 20;\n\t\t\t\tif(this.$root.$nodes.footer)\n\t\t\t\t{\n\t\t\t\t\toffset += BX.pos(this.$root.$nodes.footer).height;\n\t\t\t\t}\n\t\t\t\tconst buttonsPanel = this.$refs['buttonsPanel'];\n\t\t\t\tif(buttonsPanel)\n\t\t\t\t{\n\t\t\t\t\toffset += BX.pos(buttonsPanel).height;\n\t\t\t\t}\n\t\t\t\treturn 'calc(100vh - ' + offset + 'px)';\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\treturn 'auto';\n\t\t\t}\n\t\t},\n\n\t\tlastModified()\n\t\t{\n\t\t\tif(this.currentPage && this.currentPage.modifiedAgo)\n\t\t\t{\n\t\t\t\treturn this.localize.SALESCENTER_MODIFIED.replace('#AGO#', this.currentPage.modifiedAgo);\n\t\t\t}\n\n\t\t\treturn false;\n\t\t},\n\n\t\tlocalize()\n\t\t{\n\t\t\treturn Vue.getFilteredPhrases('SALESCENTER_');\n\t\t},\n\n\t\tpages()\n\t\t{\n\t\t\tthis.isOrderPublicUrlAvailable = this.$root.$app.isOrderPublicUrlAvailable;\n\t\t\treturn [...this.application.pages];\n\t\t},\n\n\t\tisAllowedSubmitButton()\n\t\t{\n\t\t\tif(this.$root.$app.disableSendButton)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif (this.isShowPreview && this.currentPage && !this.currentPage.isActive)\n\t\t\t{\n\t\t\t\treturn false\n\t\t\t}\n\t\t\tif (this.isShowPayment || this.isShowPaymentBySms)\n\t\t\t{\n\t\t\t\tif (\n\t\t\t\t\tthis.isShowPaymentBySms\n\t\t\t\t\t&& this.$root.$app.options.contactPhone === ''\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\treturn this.$store.getters['orderCreation/isAllowedSubmit'];\n\t\t\t}\n\t\t\treturn this.currentPage;\n\t\t},\n\n\t\tisOrderPageDeleted()\n\t\t{\n\t\t\treturn (this.$root.$app.isSiteExists && !this.isOrderPublicUrlExists);\n\t\t},\n\n\t\t...Vuex.mapState({\n\t\t\tapplication: state => state.application,\n\t\t\torder: state => state.orderCreation,\n\t\t})\n\t},\n\n\ttemplate: `\n\t\t<div class=\"salescenter-app-wrapper\" :class=\"{'salescenter-app-wrapper-fade': isFaded}\" :style=\"{minHeight: getWrapperHeight}\">\n\t\t\t<div class=\"ui-sidepanel-sidebar salescenter-app-sidebar\" ref=\"sidebar\">\n\t\t\t\t<ul class=\"ui-sidepanel-menu\" ref=\"sidepanelMenu\" v-if=\"this.$root.$app.context !== 'deal'\">\n\t\t\t\t\t<li :class=\"{'salescenter-app-sidebar-menu-active': isPagesOpen}\" class=\"ui-sidepanel-menu-item\">\n\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link\" @click.stop.prevent=\"isPagesOpen = !isPagesOpen;\">\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">{{localize.SALESCENTER_LEFT_PAGES}}</div>\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-toggle-btn\">{{this.isPagesOpen ? this.localize.SALESCENTER_SUBMENU_CLOSE : this.localize.SALESCENTER_SUBMENU_OPEN}}</div>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t<ul class=\"ui-sidepanel-submenu\" :style=\"{height: pagesSubmenuHeight}\">\n\t\t\t\t\t\t\t<li v-for=\"page in pages\" v-if=\"!page.isWebform\" :key=\"page.id\"\n\t\t\t\t\t\t\t:class=\"{\n\t\t\t\t\t\t\t\t'ui-sidepanel-submenu-active': (currentPage && currentPage.id == page.id && isShowPreview),\n\t\t\t\t\t\t\t\t'ui-sidepanel-submenu-edit-mode': (editedPageId === page.id)\n\t\t\t\t\t\t\t}\" class=\"ui-sidepanel-submenu-item\">\n\t\t\t\t\t\t\t\t<a :title=\"page.name\" class=\"ui-sidepanel-submenu-link\" @click.stop=\"onPageClick(page)\">\n\t\t\t\t\t\t\t\t\t<input class=\"ui-sidepanel-input\" :value=\"page.name\" v-on:keyup.enter=\"saveMenuItem($event)\" @blur=\"saveMenuItem($event)\" />\n\t\t\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">{{page.name}}</div>\n\t\t\t\t\t\t\t\t\t<div v-if=\"lastAddedPages.includes(page.id)\" class=\"ui-sidepanel-badge-new\"></div>\n\t\t\t\t\t\t\t\t\t<div class=\"ui-sidepanel-edit-btn\"><span class=\"ui-sidepanel-edit-btn-icon\" @click=\"editMenuItem($event, page);\"></span></div>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li class=\"salescenter-app-helper-nav-item salescenter-app-menu-add-page\" @click.stop=\"showAddPageActionPopup($event)\">\n\t\t\t\t\t\t\t\t<span class=\"salescenter-app-helper-nav-item-text salescenter-app-helper-nav-item-add\">+</span><span class=\"salescenter-app-helper-nav-item-text\">{{localize.SALESCENTER_RIGHT_ACTION_ADD}}</span>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li v-if=\"this.$root.$app.isPaymentCreationAvailable\" :class=\"{ 'salescenter-app-sidebar-menu-active': this.isShowPayment}\" class=\"ui-sidepanel-menu-item\" @click=\"showPaymentForm\">\n\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link\">\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">{{localize.SALESCENTER_LEFT_PAYMENT_ADD}}</div>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li @click=\"showOrdersList\">\n\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link\">\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">{{localize.SALESCENTER_LEFT_ORDERS}}</div>\n\t\t\t\t\t\t\t<span class=\"ui-sidepanel-counter\" ref=\"ordersCounter\" v-show=\"ordersCount > 0\">{{ordersCount}}</span>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li @click=\"showOrderAdd\">\n\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link\">\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">{{localize.SALESCENTER_LEFT_ORDER_ADD}}</div>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li v-if=\"this.$root.$app.isCatalogAvailable\" @click=\"showCatalog\">\n\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link\">\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">{{localize.SALESCENTER_LEFT_CATALOG}}</div>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li :class=\"{'salescenter-app-sidebar-menu-active': isFormsOpen}\" class=\"ui-sidepanel-menu-item\">\n\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link\" @click.stop.prevent=\"onFormsClick();\">\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">{{localize.SALESCENTER_LEFT_FORMS_ALL}}</div>\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-toggle-btn\">{{this.isPagesOpen ? this.localize.SALESCENTER_SUBMENU_CLOSE : this.localize.SALESCENTER_SUBMENU_OPEN}}</div>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t<ul class=\"ui-sidepanel-submenu\" :style=\"{height: formsSubmenuHeight}\">\n\t\t\t\t\t\t\t<li v-for=\"page in pages\" v-if=\"page.isWebform\" :key=\"page.id\"\n\t\t\t\t\t\t\t :class=\"{\n\t\t\t\t\t\t\t\t'ui-sidepanel-submenu-active': (currentPage && currentPage.id == page.id && isShowPreview),\n\t\t\t\t\t\t\t\t'ui-sidepanel-submenu-edit-mode': (editedPageId === page.id)\n\t\t\t\t\t\t\t}\" class=\"ui-sidepanel-submenu-item\">\n\t\t\t\t\t\t\t\t<a :title=\"page.name\" class=\"ui-sidepanel-submenu-link\" @click.stop=\"onPageClick(page)\">\n\t\t\t\t\t\t\t\t\t<input class=\"ui-sidepanel-input\" :value=\"page.name\" v-on:keyup.enter=\"saveMenuItem($event)\" @blur=\"saveMenuItem($event)\" />\n\t\t\t\t\t\t\t\t\t<div v-if=\"lastAddedPages.includes(page.id)\" class=\"ui-sidepanel-badge-new\"></div>\n\t\t\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">{{page.name}}</div>\n\t\t\t\t\t\t\t\t\t<div class=\"ui-sidepanel-edit-btn\"><span class=\"ui-sidepanel-edit-btn-icon\" @click=\"editMenuItem($event, page);\"></span></div>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li class=\"salescenter-app-helper-nav-item salescenter-app-menu-add-page\" @click.stop=\"showAddPageActionPopup($event, true)\">\n\t\t\t\t\t\t\t\t<span class=\"salescenter-app-helper-nav-item-text salescenter-app-helper-nav-item-add\">+</span><span class=\"salescenter-app-helper-nav-item-text\">{{localize.SALESCENTER_RIGHT_ACTION_ADD}}</span>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t\t<ul class=\"ui-sidepanel-menu\" ref=\"sidepanelMenu\" v-if=\"this.$root.$app.context === 'deal'\">\n\t\t\t\t\t<li v-if=\"this.$root.$app.isPaymentCreationAvailable\" :class=\"{ 'salescenter-app-sidebar-menu-active': this.isShowPaymentBySms}\" class=\"ui-sidepanel-menu-item\" @click=\"showPaymentBySmsForm\">\n\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link\">\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">{{localize.SALESCENTER_LEFT_SEND_BY_SMS}}</div>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li class=\"ui-sidepanel-menu-item ui-sidepanel-menu-item-sm ui-sidepanel-menu-item-separate\">\n\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link\" v-on:click=\"showCompanyContacts(event)\">\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">{{localize.SALESCENTER_LEFT_PAYMENT_COMPANY_CONTACTS}}</div>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li v-if=\"this.$root.$app.options.isBitrix24\" class=\"ui-sidepanel-menu-item ui-sidepanel-menu-item-sm\">\n\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link\" v-on:click=\"BX.Salescenter.Manager.openFeedbackPayOrderForm(event)\">\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">{{localize.SALESCENTER_LEFT_PAYMENT_OFFER_SCRIPT}}</div>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li class=\"ui-sidepanel-menu-item ui-sidepanel-menu-item-sm\">\n\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link\" v-on:click=\"BX.Salescenter.Manager.openHowPayDealWorks(event)\">\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">{{localize.SALESCENTER_LEFT_PAYMENT_HOW_WORKS}}</div>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t\t<div class=\"salescenter-app-right-side\">\n\t\t\t\t<div class=\"salescenter-app-page-header\" v-show=\"isShowPreview && !isShowStartInfo\">\n\t\t\t\t\t<div class=\"salescenter-btn-action ui-btn ui-btn-link ui-btn-dropdown ui-btn-xs\" @click=\"showActionsPopup($event)\">{{localize.SALESCENTER_RIGHT_ACTIONS_BUTTON}}</div>\n\t\t\t\t\t<div class=\"salescenter-btn-delimiter salescenter-btn-action\"></div>\n\t\t\t\t\t<div class=\"salescenter-btn-action ui-btn ui-btn-link ui-btn-xs ui-btn-icon-edit\" @click=\"editPage\">{{localize.SALESCENTER_RIGHT_ACTION_EDIT}}</div>\n\t\t\t\t</div>\n\t\t\t\t<template v-if=\"isShowStartInfo\">\n\t\t\t\t\t<div class=\"salescenter-app-page-content salescenter-app-start-wrapper\">\n\t\t\t\t\t\t<div class=\"ui-title-1 ui-text-center ui-color-medium\" style=\"margin-bottom: 20px;\">{{localize.SALESCENTER_INFO_TEXT_TOP_2}}</div>\n\t\t\t\t\t\t<div class=\"ui-hr ui-mv-25\"></div>\n\t\t\t\t\t\t<template v-if=\"this.isOrderPublicUrlExists\">\n\t\t\t\t\t\t\t<div class=\"salescenter-title-5 ui-title-5 ui-text-center ui-color-medium\">{{localize.SALESCENTER_INFO_TEXT_BOTTOM_PUBLIC}}</div>\n\t\t\t\t\t\t\t<div style=\"padding-top: 5px;\" class=\"ui-text-center\">\n\t\t\t\t\t\t\t\t<div class=\"ui-btn ui-btn-primary ui-btn-lg\" @click=\"openConnectedSite\">{{localize.SALESCENTER_INFO_PUBLIC}}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t<template v-else-if=\"isOrderPageDeleted\">\n\t\t\t\t\t\t\t<div class=\"salescenter-title-5 ui-title-5 ui-text-center ui-color-medium\">{{localize.SALESCENTER_INFO_ORDER_PAGE_DELETED}}</div>\n\t\t\t\t\t\t\t<div style=\"padding-top: 5px;\" class=\"ui-text-center\">\n\t\t\t\t\t\t\t\t<div class=\"ui-btn ui-btn-primary ui-btn-lg\" @click=\"checkRecycle\">{{localize.SALESCENTER_CHECK_RECYCLE}}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t\t<div class=\"salescenter-title-5 ui-title-5 ui-text-center ui-color-medium\">{{localize.SALESCENTER_INFO_TEXT_BOTTOM_2}}</div>\n\t\t\t\t\t\t\t<div style=\"padding-top: 5px;\" class=\"ui-text-center\">\n\t\t\t\t\t\t\t\t<div class=\"ui-btn ui-btn-primary ui-btn-lg\" @click=\"connect\">{{localize.SALESCENTER_INFO_CREATE}}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div style=\"padding-top: 5px;\" class=\"ui-text-center\">\n\t\t\t\t\t\t\t\t<div class=\"ui-btn ui-btn-link ui-btn-lg\" @click=\"BX.Salescenter.Manager.openHowPayDealWorks(event)\">{{localize.SALESCENTER_HOW}}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t\t<template v-else-if=\"isFrameError && isShowPreview\">\n\t\t\t\t\t<div class=\"salescenter-app-page-content salescenter-app-lost\">\n\t\t\t\t\t\t<div class=\"salescenter-app-lost-block ui-title-1 ui-text-center ui-color-medium\">{{localize.SALESCENTER_ERROR_TITLE}}</div>\n\t\t\t\t\t\t<div v-if=\"currentPage.isFrameDenied === true\" class=\"salescenter-app-lost-helper ui-color-medium\">{{localize.SALESCENTER_RIGHT_FRAME_DENIED}}</div>\n\t\t\t\t\t\t<div v-else-if=\"currentPage.isActive !== true\" class=\"salescenter-app-lost-helper salescenter-app-not-active ui-color-medium\">{{localize.SALESCENTER_RIGHT_NOT_ACTIVE}}</div>\n\t\t\t\t\t\t<div v-else class=\"salescenter-app-lost-helper ui-color-medium\">{{localize.SALESCENTER_ERROR_TEXT}}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t\t<div v-show=\"isShowPreview && !isShowStartInfo && !isFrameError\" class=\"salescenter-app-page-content\">\n\t\t\t\t\t<template v-for=\"page in pages\">\n\t\t\t\t\t\t<iframe class=\"salescenter-app-demo\" v-show=\"currentPage && currentPage.id == page.id\" :src=\"getFrameSource(page)\" frameborder=\"0\" @error=\"onFrameError(page.id)\" @load=\"onFrameLoad(page.id)\" :key=\"page.id\"></iframe>\n\t\t\t\t\t</template>\n\t\t\t\t\t<div class=\"salescenter-app-demo-overlay\" :class=\"{\n\t\t\t\t\t\t'salescenter-app-demo-overlay-loading': this.isShowLoader\n\t\t\t\t\t}\">\n\t\t\t\t\t\t<div v-show=\"isShowLoader\" ref=\"previewLoader\"></div>\n\t\t\t\t\t\t<div v-if=\"lastModified\" class=\"salescenter-app-demo-overlay-modification\">{{lastModified}}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t    <template v-if=\"this.$root.$app.isPaymentsLimitReached\">\n\t\t\t        <div ref=\"paymentsLimit\" v-show=\"isShowPayment && !isShowStartInfo\"></div>\n\t\t\t\t</template>\n\t\t\t\t<template v-else>\n\t\t\t        <component v-if=\"isShowPayment && !isShowStartInfo\" :is=\"config.templateAddPaymentName\" :key=\"order.basketVersion\"></component>\n\t\t        </template>\n\t\t        <template v-if=\"isShowPaymentBySms && !isShowStartInfo\">\n\t\t\t        <deal-receiving-payment v-on:stage-block-send-on-send=\"send\" :sendAllowed=\"isAllowedSubmitButton\"/>\n\t\t        </template>\n\t\t\t</div>\n\t\t\t<div class=\"ui-button-panel-wrapper salescenter-button-panel\" ref=\"buttonsPanel\">\n\t\t\t\t<div class=\"ui-button-panel\">\n\t\t\t\t\t<button :class=\"{'ui-btn-disabled': !this.isAllowedSubmitButton}\" class=\"ui-btn ui-btn-md ui-btn-success\" @click=\"send($event)\" v-if=\"editable\">{{localize.SALESCENTER_SEND}}</button>\n\t\t\t\t\t<button :class=\"{'ui-btn-disabled': !this.isAllowedSubmitButton}\" class=\"ui-btn ui-btn-md ui-btn-success\" @click=\"send($event)\" v-else>{{localize.SALESCENTER_RESEND}}</button>\n\t\t\t\t\t<button class=\"ui-btn ui-btn-md ui-btn-link\" @click=\"close\">{{localize.SALESCENTER_CANCEL}}</button>\n\t\t\t\t\t<button v-if=\"isShowPayment && !isShowStartInfo && !this.$root.$app.isPaymentsLimitReached\" class=\"ui-btn ui-btn-md ui-btn-link btn-send-crm\" @click=\"send($event, 'y')\">{{localize.SALESCENTER_SAVE_ORDER}}</button>\n\t\t\t\t</div>\n\t\t\t\t<div v-if=\"this.order.errors.length > 0\" ref=\"errorBlock\"></div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n\n});","import {Vue} from 'ui.vue';\nimport {VuexBuilder} from 'ui.vue.vuex';\nimport {rest as Rest} from 'rest.client';\nimport {Manager} from 'salescenter.manager';\nimport {Loader} from 'main.loader';\nimport {Type, Loc, ajax as Ajax, Event} from 'main.core';\nimport 'ui.notification';\n\nimport {ApplicationModel} from './models/application';\nimport {OrderCreationModel} from './models/ordercreation';\nimport {config} from \"./config\";\nimport './component';\nimport './component.css';\nimport './bx-salescenter-app-add-payment';\n\nexport class App\n{\n\tconstructor(options = {\n\t\tdialogId: null,\n\t\tsessionId: null,\n\t\tlineId: null,\n\t\torderAddPullTag: null,\n\t\tlandingPublicationPullTag: null,\n\t\tlandingUnPublicationPullTag: null,\n\t\tisFrame: true,\n\t\tisOrderPublicUrlAvailable: false,\n\t\tisCatalogAvailable: false,\n\t\tisOrderPublicUrlExists: false,\n\t})\n\t{\n\t\tthis.slider = BX.SidePanel.Instance.getTopSlider();\n\t\tthis.dialogId = options.dialogId;\n\t\tthis.sessionId = parseInt(options.sessionId);\n\t\tthis.lineId = parseInt(options.lineId);\n\t\tthis.orderAddPullTag = options.orderAddPullTag;\n\t\tthis.landingPublicationPullTag = options.landingPublicationPullTag;\n\t\tthis.landingUnPublicationPullTag = options.landingUnPublicationPullTag;\n\t\tthis.paySystemList = options.paySystemList;\n\t\tthis.cashboxList = options.cashboxList;\n\t\tthis.options = options;\n\t\tthis.isProgress = false;\n\t\tthis.fillPagesTimeout = false;\n\t\tthis.disableSendButton = false;\n\t\tthis.context = '';\n\t\tthis.fillPagesQueue = [];\n\t\tthis.ownerTypeId = '';\n\t\tthis.ownerId = '';\n\t\tthis.stageOnOrderPaid = null;\n\t\tthis.sendingMethod = '';\n\t\tthis.sendingMethodDesc = {};\n\t\tthis.urlSettingsSmsSenders = options.urlSettingsSmsSenders;\n\t\tthis.orderPublicUrl = '';\n\t\tthis.fileControl = options.fileControl;\n\n\t\tif(Type.isString(options.stageOnOrderPaid))\n\t\t{\n\t\t\tthis.stageOnOrderPaid = options.stageOnOrderPaid;\n\t\t}\n\n\t\tif(Type.isBoolean(options.isFrame))\n\t\t{\n\t\t\tthis.isFrame = options.isFrame;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.isFrame = true;\n\t\t}\n\n\t\tif(Type.isBoolean(options.isOrderPublicUrlAvailable))\n\t\t{\n\t\t\tthis.isOrderPublicUrlAvailable = options.isOrderPublicUrlAvailable;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.isOrderPublicUrlAvailable = false;\n\t\t}\n\n\t\tif(Type.isBoolean(options.isOrderPublicUrlExists))\n\t\t{\n\t\t\tthis.isOrderPublicUrlExists = options.isOrderPublicUrlExists;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.isOrderPublicUrlExists = false;\n\t\t}\n\n\t\tif(Type.isString(options.orderPublicUrl))\n\t\t{\n\t\t\tthis.orderPublicUrl = options.orderPublicUrl;\n\t\t}\n\n\t\tif(Type.isBoolean(options.isCatalogAvailable))\n\t\t{\n\t\t\tthis.isCatalogAvailable = options.isCatalogAvailable;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.isCatalogAvailable = false;\n\t\t}\n\n\t\tif(Type.isBoolean(options.disableSendButton))\n\t\t{\n\t\t\tthis.disableSendButton = options.disableSendButton;\n\t\t}\n\n\t\tif(options.ownerTypeId)\n\t\t{\n\t\t\tthis.ownerTypeId = options.ownerTypeId;\n\t\t}\n\n\t\tif(options.ownerId)\n\t\t{\n\t\t\tthis.ownerId = options.ownerId;\n\t\t}\n\n\t\tif(Type.isString(options.context) && options.context.length > 0)\n\t\t{\n\t\t\tthis.context = options.context;\n\t\t}\n\t\telse if(this.sessionId && this.dialogId)\n\t\t{\n\t\t\tthis.context = 'imopenlines_app';\n\t\t}\n\n\t\tif(Type.isBoolean(options.isPaymentsLimitReached))\n\t\t{\n\t\t\tthis.isPaymentsLimitReached = options.isPaymentsLimitReached;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.isPaymentsLimitReached = false;\n\t\t}\n\n\t\tif(!Type.isUndefined(options.sendingMethod))\n\t\t{\n\t\t\tthis.sendingMethod = options.sendingMethod;\n\t\t\tthis.sendingMethodDesc = this.options.sendingMethodDesc;\n\t\t}\n\n\t\tthis.isPaymentCreationAvailable = (\n\t\t\t(this.sessionId > 0 && this.dialogId.length > 0) || (this.ownerTypeId && this.ownerId)\n\t\t);\n\t\tthis.connector = Type.isString(options.connector) ? options.connector : '';\n\n\t\tEvent.ready(() =>\n\t\t{\n\t\t\tthis.pull = BX.PULL;\n\t\t\tthis.initPull();\n\t\t\tthis.isSiteExists = Manager.isSiteExists;\n\t\t});\n\n\t\tApp.initStore()\n\t\t\t.then((result) => this.initTemplate(result))\n\t\t\t.catch((error) => App.showError(error))\n\t\t;\n\t}\n\n\tstatic initStore()\n\t{\n\t\tconst builder = new VuexBuilder();\n\n\t\treturn builder.addModel(ApplicationModel.create())\n\t\t\t.addModel(OrderCreationModel.create())\n\t\t\t.useNamespace(true)\n\t\t\t.build();\n\t}\n\n\tinitPull()\n\t{\n\t\tif(this.pull)\n\t\t{\n\t\t\tif(Type.isString(this.orderAddPullTag))\n\t\t\t{\n\t\t\t\tthis.pull.subscribe({\n\t\t\t\t\tmoduleId: config.moduleId,\n\t\t\t\t\tcommand: this.orderAddPullTag,\n\t\t\t\t\tcallback: (params) =>\n\t\t\t\t\t{\n\t\t\t\t\t\tif(parseInt(params.sessionId) === this.sessionId && params.orderId > 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tManager.showOrdersListAfterCreate(params.orderId);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif(Type.isString(this.landingPublicationPullTag))\n\t\t\t{\n\t\t\t\tthis.pull.subscribe({\n\t\t\t\t\tmoduleId: config.moduleId,\n\t\t\t\t\tcommand: this.landingPublicationPullTag,\n\t\t\t\t\tcallback: (params) =>\n\t\t\t\t\t{\n\t\t\t\t\t\tif(parseInt(params.landingId) > 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.fillPages();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(params.hasOwnProperty('isOrderPublicUrlAvailable') && Type.isBoolean(params.isOrderPublicUrlAvailable))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.isOrderPublicUrlAvailable = params.isOrderPublicUrlAvailable;\n\t\t\t\t\t\t\tthis.isOrderPublicUrlExists = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif(Type.isString(this.landingUnPublicationPullTag))\n\t\t\t{\n\t\t\t\tthis.pull.subscribe({\n\t\t\t\t\tmoduleId: config.moduleId,\n\t\t\t\t\tcommand: this.landingUnPublicationPullTag,\n\t\t\t\t\tcallback: (params) =>\n\t\t\t\t\t{\n\t\t\t\t\t\tif(parseInt(params.landingId) > 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.fillPages();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(params.hasOwnProperty('isOrderPublicUrlAvailable') && Type.isBoolean(params.isOrderPublicUrlAvailable))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.isOrderPublicUrlAvailable = params.isOrderPublicUrlAvailable;\n\t\t\t\t\t\t\tthis.isOrderPublicUrlExists = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\tinitTemplate(result)\n\t{\n\t\treturn new Promise((resolve) =>\n\t\t{\n\t\t\tconst context = this;\n\t\t\tthis.store = result.store;\n\n\t\t\tthis.templateEngine = Vue.create({\n\t\t\t\tel: document.getElementById('salescenter-app-root'),\n\t\t\t\ttemplate: `<${config.templateName}/>`,\n\t\t\t\tstore: this.store,\n\t\t\t\tcreated()\n\t\t\t\t{\n\t\t\t\t\tthis.$app = context;\n\t\t\t\t\tthis.$nodes = {\n\t\t\t\t\t\tfooter: document.getElementById('footer'),\n\t\t\t\t\t\tleftPanel: document.getElementById('left-panel'),\n\t\t\t\t\t\ttitle: document.getElementById('pagetitle'),\n\t\t\t\t\t\tpaymentsLimit: document.getElementById('salescenter-payment-limit-container'),\n\t\t\t\t\t};\n\t\t\t\t},\n\t\t\t\tmounted()\n\t\t\t\t{\n\t\t\t\t\tresolve();\n\t\t\t\t},\n\t\t\t});\n\t\t});\n\t}\n\n\tcloseApplication()\n\t{\n\t\tif(this.slider)\n\t\t{\n\t\t\tthis.slider.close();\n\t\t}\n\t}\n\n\tfillPages()\n\t{\n\t\treturn new Promise((resolve) =>\n\t\t{\n\t\t\tif(this.isProgress)\n\t\t\t{\n\t\t\t\tthis.fillPagesQueue.push(resolve);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif(this.fillPagesTimeout)\n\t\t\t\t{\n\t\t\t\t\tclearTimeout(this.fillPagesTimeout);\n\t\t\t\t}\n\t\t\t\tthis.fillPagesTimeout = setTimeout(() =>\n\t\t\t\t{\n\t\t\t\t\tthis.startProgress();\n\t\t\t\t\tRest.callMethod('salescenter.page.list', {}).then((result) => {\n\t\t\t\t\t\tthis.store.commit('application/setPages', {pages: result.answer.result.pages});\n\t\t\t\t\t\tthis.stopProgress();\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t\tthis.fillPagesQueue.forEach((item) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\titem();\n\t\t\t\t\t\t});\n\t\t\t\t\t\tthis.fillPagesQueue = [];\n\t\t\t\t\t});\n\t\t\t\t}, 100);\n\t\t\t}\n\t\t});\n\t}\n\n\tstatic showError(error)\n\t{\n\t\tconsole.error(error);\n\t}\n\n\tgetLoader()\n\t{\n\t\tif(!this.loader)\n\t\t{\n\t\t\tthis.loader = new Loader({size: 200});\n\t\t}\n\n\t\treturn this.loader;\n\t}\n\n\tshowLoader()\n\t{\n\t\tif(this.templateEngine)\n\t\t{\n\t\t\tthis.getLoader().show(this.templateEngine.$el);\n\t\t}\n\t}\n\n\thideLoader()\n\t{\n\t\tthis.getLoader().hide();\n\t}\n\n\tstartProgress(buttonEvent = null)\n\t{\n\t\tthis.isProgress = true;\n\t\tthis.templateEngine.$emit('on-start-progress');\n\t\tthis.showLoader();\n\t\tif (Type.isDomNode(buttonEvent))\n\t\t{\n\t\t\tbuttonEvent.classList.add('ui-btn-wait');\n\t\t}\n\t}\n\n\tstopProgress(buttonEvent = null)\n\t{\n\t\tthis.isProgress = false;\n\t\tthis.templateEngine.$emit('on-stop-progress');\n\t\tthis.hideLoader();\n\t\tif (Type.isDomNode(buttonEvent))\n\t\t{\n\t\t\tbuttonEvent.classList.remove('ui-btn-wait');\n\t\t}\n\t}\n\n\thidePage(page)\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tlet promise;\n\t\t\tif(page.landingId > 0)\n\t\t\t{\n\t\t\t\tpromise = Manager.hidePage(page);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tpromise = Manager.deleteUrl(page);\n\t\t\t}\n\t\t\tpromise.then(() =>\n\t\t\t{\n\t\t\t\tthis.store.commit('application/removePage', {page});\n\t\t\t\tresolve();\n\t\t\t}).catch((result) =>\n\t\t\t{\n\t\t\t\tApp.showError(result.answer.error_description);\n\t\t\t\treject(result.answer.error_description);\n\t\t\t});\n\t\t});\n\t}\n\n\tsendPage(pageId)\n\t{\n\t\tif(this.isProgress)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tif(this.disableSendButton)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tconst pages = this.store.getters['application/getPages']();\n\t\tlet page;\n\t\tfor(let index in pages)\n\t\t{\n\t\t\tif(pages.hasOwnProperty(index) && pages[index].id === pageId)\n\t\t\t{\n\t\t\t\tpage = pages[index];\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tlet source = 'other';\n\t\tif(page.landingId > 0)\n\t\t{\n\t\t\tif(parseInt(page.siteId) === parseInt(Manager.connectedSiteId))\n\t\t\t{\n\t\t\t\tsource = 'landing_store_chat';\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tsource = 'landing_other';\n\t\t\t}\n\t\t}\n\t\tif(!this.dialogId)\n\t\t{\n\t\t\tthis.slider.data.set('action', 'sendPage');\n\t\t\tthis.slider.data.set('page', page);\n\t\t\tthis.slider.data.set('pageId', pageId);\n\t\t\tif(this.context === 'sms')\n\t\t\t{\n\t\t\t\tthis.startProgress();\n\t\t\t\tBX.Salescenter.Manager.addAnalyticAction({\n\t\t\t\t\tanalyticsLabel: 'salescenterSendSms',\n\t\t\t\t\tcontext: this.context,\n\t\t\t\t\tsource: source,\n\t\t\t\t\ttype: page.isWebform ? 'form' : 'info',\n\t\t\t\t\tcode: page.code,\n\t\t\t\t}).then(() =>\n\t\t\t\t{\n\t\t\t\t\tthis.stopProgress();\n\t\t\t\t\tthis.closeApplication();\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.closeApplication();\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\tthis.startProgress();\n\n\t\tAjax.runAction('salescenter.page.send', {\n\t\t\tanalyticsLabel: 'salescenterSendChat',\n\t\t\tgetParameters: {\n\t\t\t\tdialogId: this.dialogId,\n\t\t\t\tcontext: this.context,\n\t\t\t\tsource: source,\n\t\t\t\ttype: page.isWebform ? 'form' : 'info',\n\t\t\t\tconnector: this.connector,\n\t\t\t\tcode: page.code,\n\t\t\t},\n\t\t\tdata: {\n\t\t\t\tid: pageId,\n\t\t\t\toptions: {\n\t\t\t\t\tdialogId: this.dialogId,\n\t\t\t\t\tsessionId: this.sessionId,\n\t\t\t\t},\n\t\t\t}\n\t\t}).then(() =>\n\t\t{\n\t\t\tthis.stopProgress();\n\t\t\tthis.closeApplication();\n\t\t}).catch((result) =>\n\t\t{\n\t\t\tApp.showError(result.errors.pop().message);\n\t\t\tthis.stopProgress();\n\t\t});\n\t}\n\n\tsendPayment(buttonEvent, skipPublicMessage = 'n')\n\t{\n\t\tif (!this.isPaymentCreationAvailable)\n\t\t{\n\t\t\tthis.closeApplication();\n\t\t\treturn null;\n\t\t}\n\t\tconst basket = this.store.getters['orderCreation/getBasket']();\n\t\tconst deliveryId = this.store.getters['orderCreation/getDeliveryId'];\n\t\tconst delivery = this.store.getters['orderCreation/getDelivery'];\n\t\tconst propertyValues = this.store.getters['orderCreation/getPropertyValues'];\n\t\tconst deliveryExtraServicesValues = this.store.getters['orderCreation/getDeliveryExtraServicesValues'];\n\t\tconst expectedDelivery = this.store.getters['orderCreation/getExpectedDelivery'];\n\t\tconst deliveryResponsibleId = this.store.getters['orderCreation/getDeliveryResponsibleId'];\n\t\tconst personTypeId = this.store.getters['orderCreation/getPersonTypeId'];\n\n\t\tif (!this.store.getters['orderCreation/isAllowedSubmit'] || this.isProgress)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tthis.startProgress(buttonEvent);\n\n\t\tlet data = {\n\t\t\tdialogId: this.dialogId,\n\t\t\tsendingMethod: this.sendingMethod,\n\t\t\tsendingMethodDesc: this.sendingMethodDesc,\n\t\t\tsessionId: this.sessionId,\n\t\t\tlineId: this.lineId,\n\t\t\townerTypeId: this.ownerTypeId,\n\t\t\townerId: this.ownerId,\n\t\t\tskipPublicMessage,\n\t\t\tdeliveryId: deliveryId,\n\t\t\tdeliveryPrice: delivery,\n\t\t\texpectedDeliveryPrice: expectedDelivery,\n\t\t\tdeliveryResponsibleId: deliveryResponsibleId,\n\t\t\tpersonTypeId: personTypeId,\n\t\t\tpropertyValues: propertyValues,\n\t\t\tdeliveryExtraServicesValues: deliveryExtraServicesValues,\n\t\t\tconnector: this.connector,\n\t\t};\n\n\t\tif (this.stageOnOrderPaid !== null)\n\t\t{\n\t\t\tdata.stageOnOrderPaid = this.stageOnOrderPaid;\n\t\t}\n\n\t\tBX.ajax.runAction('salescenter.order.createPayment', {\n\t\t\tdata: {\n\t\t\t\tbasketItems: basket,\n\t\t\t\toptions: data,\n\t\t\t},\n\t\t\tanalyticsLabel: (this.context === 'deal') ? 'salescenterCreatePaymentSms' : 'salescenterCreatePayment',\n\t\t\tgetParameters: {\n\t\t\t\tdialogId: this.dialogId,\n\t\t\t\tcontext: this.context,\n\t\t\t\tconnector: this.connector,\n\t\t\t\tskipPublicMessage: skipPublicMessage,\n\t\t\t}\n\t\t}).then((result) =>\n\t\t{\n\t\t\tthis.store.dispatch('orderCreation/resetBasket');\n\t\t\tthis.stopProgress(buttonEvent);\n\t\t\tif (skipPublicMessage === 'y')\n\t\t\t{\n\t\t\t\tlet notify = {\n\t\t\t\t\tcontent: Loc.getMessage('SALESCENTER_ORDER_CREATE_NOTIFICATION').replace('#ORDER_ID#', result.data.order.number),\n\t\t\t\t};\n\t\t\t\tnotify.actions = [{\n\t\t\t\t\ttitle: Loc.getMessage('SALESCENTER_VIEW'),\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tclick() {\n\t\t\t\t\t\t\tManager.showOrderAdd(result.data.order.id);\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t}];\n\t\t\t\tBX.UI.Notification.Center.notify(notify);\n\t\t\t\tManager.showOrdersList({\n\t\t\t\t\torderId: result.data.order.id,\n\t\t\t\t\townerId: this.ownerId,\n\t\t\t\t\townerTypeId: this.ownerTypeId,\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.slider.data.set('action', 'sendPayment');\n\t\t\t\tthis.slider.data.set('order', result.data.order);\n\n\t\t\t\tif (result.data.deal)\n\t\t\t\t{\n\t\t\t\t\tthis.slider.data.set('deal', result.data.deal);\n\t\t\t\t}\n\t\t\t\tthis.closeApplication();\n\t\t\t}\n\t\t}).catch((data) =>\n\t\t{\n\t\t\tdata.errors.forEach((error) => {\n\t\t\t\talert(error.message);\n\t\t\t});\n\t\t\tthis.stopProgress(buttonEvent);\n\t\t\tApp.showError(data);\n\t\t});\n\t}\n\n\tresendPayment(buttonEvent)\n\t{\n\t\tif (!this.isPaymentCreationAvailable)\n\t\t{\n\t\t\tthis.closeApplication();\n\t\t\treturn null;\n\t\t}\n\n\t\tif (!this.store.getters['orderCreation/isAllowedSubmit'] || this.isProgress)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tthis.startProgress(buttonEvent);\n\n\t\tBX.ajax.runAction('salescenter.order.resendPayment', {\n\t\t\tdata: {\n\t\t\t\torderId: this.options.associatedEntityId,\n\t\t\t\toptions: {\n\t\t\t\t\tsendingMethod: this.sendingMethod,\n\t\t\t\t\tsendingMethodDesc: this.sendingMethodDesc,\n\t\t\t\t\tstageOnOrderPaid: this.stageOnOrderPaid\n\t\t\t\t},\n\t\t\t},\n\t\t\tgetParameters: {\n\t\t\t\tcontext: this.context,\n\t\t\t}\n\t\t}).then((result) =>\n\t\t{\n\t\t\tthis.stopProgress(buttonEvent);\n\t\t\tthis.closeApplication();\n\t\t}).catch((data) =>\n\t\t{\n\t\t\tdata.errors.forEach((error) => {\n\t\t\t\talert(error.message);\n\t\t\t});\n\t\t\tthis.stopProgress(buttonEvent);\n\t\t\tApp.showError(data);\n\t\t});\n\t}\n\n\tgetOrdersCount()\n\t{\n\t\tif(this.sessionId > 0)\n\t\t{\n\t\t\treturn Rest.callMethod('salescenter.order.getActiveOrdersCount', {\n\t\t\t\tsessionId: this.sessionId\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn new Promise((resolve, reject) => {});\n\t\t}\n\t}\n}"],"names":["ApplicationModel","pages","getPages","state","setPages","payload","saveState","removePage","page","filter","id","landingId","addPage","push","VuexBuilderModel","OrderCreationModel","currency","processingId","showPaySystemSettingBanner","selectedProducts","basket","basketVersion","propertyValues","deliveryExtraServicesValues","expectedDelivery","deliveryResponsibleId","personTypeId","deliveryId","delivery","isEnabledSubmit","errors","total","sum","discount","result","resultNumeric","resetBasket","commit","setCurrency","enableSubmitButton","disableSubmitButton","setDeliveryId","setDelivery","setPropertyValues","setDeliveryExtraServicesValues","setExpectedDelivery","setDeliveryResponsibleId","setPersonTypeId","getBasket","index","isAllowedSubmit","getTotal","getDelivery","getDeliveryId","getPropertyValues","getDeliveryExtraServicesValues","getExpectedDelivery","getDeliveryResponsibleId","getPersonTypeId","setBasket","setTotal","Object","assign","clearBasket","setErrors","clearErrors","setProcessingId","showBanner","hideBanner","enableSubmit","disableSubmit","config","freeze","databaseConfig","name","templateName","templateAddPaymentName","templateAddPaymentProductName","templateAddPaymentBySms","templateAddPaymentBySmsItem","moduleId","MixinTemplatesType","data","editable","created","$root","$on","value","Send","props","allowed","type","Boolean","required","resend","components","Block","Enabled","Disabled","computed","classes","configForBlock","counter","methods","openWhatClientSee","event","BX","Salescenter","Manager","onSend","$emit","template","TileCollectionMixins","Label","TileLabel","TileHintImg","TileLabelPlus","TileHintImgCaption","TileHintBackground","TileHintBackgroundCaption","getCollectionTile","tiles","getCollectionTileByFilter","map","Map","collection","hasOwnProperty","length","forEach","item","getType","set","hasTileOfferFromCollection","Tile","size","hasTileMoreFromCollection","getTileOfferFromCollection","inx","tile","getTileMoreFromCollection","getTileByIndex","openSlider","slider","AppSlider","openAppLocal","getOptionSlider","subscribe","EventTypes","AppSliderSliderClose","e","isControlTile","includes","showHint","popup","Hint","show","target","info","hideHint","hide","width","Uninstalled","Array","mixins","Installed","StageMixin","statusClassMixin","status","Status","current","disabled","containerClassMixin","counterCheckedMixin","complete","onSliderClose","Cashbox","String","installed","titleItems","initialCollapseState","TileInstalled","TileUnInstalled","statusClass","title","Loc","getMessage","collapsible","checked","onItemHint","openHowToConfigCashBox","saveCollapsedOption","option","Vue","component","timer","productSelector","isImageAdded","imageControlId","currencySymbol","$app","options","defaultMeasure","measures","isArray","measure","SYMBOL","code","CODE","basketItem","measureName","changeData","measureCode","EventEmitter","onUploaderIsInitedHandler","bind","mounted","UI","Dropdown","searchAction","searchOptions","restrictedSearchIds","selectedProductIds","enableCreation","enableCreationOnBlur","searchResultRenderer","targetElement","$refs","searchProductLine","items","getProductSelectorItems","messages","creationLegend","localize","SALESCENTER_PRODUCT_CREATE","notFound","SALESCENTER_PRODUCT_NOT_FOUND","events","onSelect","selectCatalogItem","onAdd","showCreationForm","onReset","resetSearchForm","initDefaultFileControl","updated","productId","fileControlJs","fileControlJsItem","evalGlobal","directives","inserted","element","binding","selector","restrictedIds","init","getCompatData","uploader","onFileIsUploadedHandler","onFileIsDeleteHandler","fileId","params","CID","images","image","file","tmp_name","path","error","fields","isCreatedProduct","object","splice","toggleDiscount","showDiscount","setTimeout","discountInput","focus","basketItemIndex","isNeedRefreshAfterChanges","isCreationMode","quantity","price","refreshBasket","debouncedRefresh","delay","clearTimeout","changeQuantity","replace","newQuantity","parseFloat","lastSymbol","substr","changeName","newName","changePrice","newPrice","module","basePrice","isCustomPrice","changeDiscountType","discountType","changeDiscount","discountValue","sort","discountInfos","destroyPopupWindow","updateItemsList","then","hideCreationForm","removeItem","sender","startProgress","undefined","parseInt","attributes","measureRatio","encodedFields","ajax","runAction","prop","getObject","fileControl","processHTML","fileControlHtml","openDiscountEditor","url","window","top","SidePanel","Instance","open","util","add_url_param","allowChangeHistory","preventDefault","returnValue","isEmptyProductName","calculateCorrectionFactor","factoredQuantity","factoredRatio","correctionFactor","Number","isInteger","incrementQuantity","decrementQuantity","showPopupMenu","array","menuItems","setItem","ev","param","innerHTML","popupMenu","close","percent","text","onclick","PopupMenuWindow","bindElement","getDefaultFileControl","fileControlData","i","Promise","resolve","reject","Error","join","initialProducts","mostPopularProducts","ID","NAME","MEASURE_RATIO","productSelectorItems","subTitle","SALESCENTER_PRODUCT_BEFORE_SEARCH_TITLE","showProductTooltip","productTooltip","Popup","maxWidth","darkMode","animation","setContent","hideProductTooltip","watch","newValue","oldValue","newValueArray","oldValueArray","getFilteredPhrases","showPrice","getMeasureName","getMeasureCode","getBasketFileControl","html","isNotEnoughQuantity","hasPriceError","hasNameError","productInputWrapperClass","BasketItemAddBlock","changeBasketItem","addBasketItemForm","getInternalIndexByProductId","$store","getters","keys","findIndex","onAddBasketItem","countItems","order","onUpdateBasketItem","dispatch","removeEmptyItems","modifyBasketItem","showDialogProductExists","onPopupClose","destroy","zIndex","autoHide","closeByEsc","closeIcon","titleBar","draggable","resizable","lightShadow","cacheable","overlay","content","buttons","getButtons","product","SaveButton","CancelButton","showDialogProductSearch","funcName","CDialog","content_url","height","Math","max","innerHeight","innerWidth","min_height","min_width","Show","Vuex","mapState","orderCreation","associatedEntityId","productForm","setEditable","formWrapper","$el","querySelector","appendChild","layout","refreshId","defaultCurrency","currencyCode","Type","ProductForm","iblockId","catalogIblockId","basePriceId","totals","taxList","vatList","showDiscountBlock","showProductDiscounts","showTaxBlock","showProductTaxes","onChangeWithDebounce","Runtime","debounce","onBasketChange","getData","requestId","Text","getRandom","basketItems","processRefreshRequest","get","catch","setData","isObject","timeout","onsuccess","stopProgress","addProduct","userOptionName","orderCreationOption","userOptionKeyName","paySystemBannerOptionName","userOptions","save","openControlPanel","isShowedBanner","Product","openHowToSell","DeliverySelector","availableServiceIds","onChange","fromPropId","getAddressFromPropId","prevFrom","getPrevFrom","newFrom","getNewFrom","relatedPropsValues","deliveryPrice","deliveryServiceId","relatedServicesValues","estimatedDeliveryPrice","responsibleUser","refreshAvailableServiceIds","propId","deliveryOrderPropOptions","onSettingsChanged","sessionId","ownerTypeId","ownerId","deliveryRelatedPropValues","deliveryRelatedServiceValues","sumTitle","productsPriceFormatted","productsPrice","deliveryFormatted","isDeliveryCalculated","Currency","currencyFormat","totalFormatted","actionData","DeliveryVuex","selectedDeliveryServiceName","titleName","shipmentData","responsibleId","assignedById","expectedDeliveryPrice","orderPropertyValues","extraServicesValues","relatedPropsOptions","isExistingItem","setTitleName","deliveryServiceName","PaySystem","openHowToConfigDefaultPaySystem","SmsMessage","manager","phone","senderSettingsUrl","editorTemplate","editorUrl","Alert","Configure","SenderList","UserAvatar","MessageEdit","MessageView","MessageEditor","MessageControl","senders","list","settings","photo","editor","hasSender","hasPhone","containerClass","smsSenderConfigure","Ajax","runComponentAction","mode","values","resetSenderList","getFirstSender","setSelectedSender","Automation","stages","StageList","loadStageCollection","AutomationStage","create","setStageOnOrderPaid","stageOnOrderPaid","updateSelectedStage","newStageId","stage","selected","selectedStage","find","TimeLine","timelineItems","Item","PaymentItem","isPayment","Payment","StageBlocksList","sendAllowed","message","contactBlock","smsSenders","contactPhone","urlSettingsSmsSenders","sendingMethodDesc","orderPublicUrl","paysystem","paySystemList","isSet","getTileCollection","getTitleItems","isPaySystemCollapsed","cashbox","deliveryList","isInstalled","isDeliveryCollapsed","cashboxList","isCashboxCollapsed","isAutomationAvailable","automation","dealStageList","isAutomationCollapsed","timeline","getTimelineCollection","hasStageTimeLine","hasStageAutomation","hasStageCashBox","editableMixin","initCounter","TimeLineItem","stageRefresh","response","refreshTilesByType","changeProvider","provider","beforeUpdate","isFaded","isShowPreview","isShowPayment","isShowPaymentBySms","isShowPaymentByEmail","isShowPaymentByCash","isShowPaymentByQr","pageTitle","currentPageId","actions","frameCheckShortTimeout","frameCheckLongTimeout","isPagesOpen","isFormsOpen","showedPageIds","loadedPageIds","errorPageIds","lastAddedPages","ordersCount","editedPageId","isOrderPublicUrlAvailable","currentPageTitle","showCompanyContacts","startFade","endFade","renderErrors","createPinner","context","showPaymentBySmsForm","createLoader","fillPages","refreshOrdersCount","openFirstPage","isOrderPublicUrlExists","isPaymentsLimitReached","paymentsLimitStartNode","$nodes","paymentsLimit","paymentsLimitNode","children","node","movePanels","sidepanel","leftPanel","nav","buttonsPanel","parentNode","Pinner","fixBottom","isFrame","fullWidth","getActions","currentPage","SALESCENTER_RIGHT_ACTION_COPY_URL","copyUrl","SALESCENTER_RIGHT_ACTION_HIDE","hidePage","SALESCENTER_RIGHT_ACTION_DELETE","SALESCENTER_RIGHT_ACTION_ADD","getAddPageActions","isWebform","SALESCENTER_RIGHT_ACTION_ADD_SITE_B24","addSite","SALESCENTER_RIGHT_ACTION_ADD_CUSTOM","showAddUrlPopup","firstWebformPage","pageToOpen","onPageClick","setPageTitle","hideActionsPopup","isFrameDenied","startFrameCheckTimeout","onFrameError","showActionsPopup","PopupMenu","offsetLeft","offsetTop","urlSettingsCompanyContacts","showAddPageActionPopup","menuId","offsetWidth","offsetHeight","angle","position","addSitePage","newPage","answer","editPage","editLandingPage","siteId","isPlainObject","addCustomPage","pageId","showPaymentForm","SALESCENTER_LEFT_PAYMENT_ADD","SALESCENTER_DEFAULT_TITLE","SALESCENTER_LEFT_PAYMENT_BY_SMS","showOrdersList","showOrderAdd","showCatalog","onFormsClick","openHelpDesk","openHowItWorks","isPageSelected","send","skipPublicMessage","isAllowedSubmitButton","isShowStartInfo","sendPayment","resendPayment","isActive","sendPage","closeApplication","innerText","onFrameLoad","connect","loader","Loader","document","body","no_redirect","loadConfig","isSiteExists","checkRecycle","openConnectedSite","getFrameSource","Uri","setQueryParam","toString","getOrdersCount","errorMessages","color","Color","DANGER","textCenter","htmlspecialchars","errorBlock","animated","alert","getContainer","editMenuItem","saveMenuItem","oldName","analyticsLabel","application","pagesSubmenuHeight","formsSubmenuHeight","isFrameError","isShowLoader","res","getWrapperHeight","pos","offset","footer","lastModified","modifiedAgo","SALESCENTER_MODIFIED","disableSendButton","isOrderPageDeleted","App","dialogId","lineId","orderAddPullTag","landingPublicationPullTag","landingUnPublicationPullTag","isCatalogAvailable","getTopSlider","isProgress","fillPagesTimeout","fillPagesQueue","sendingMethod","isString","isBoolean","isUndefined","isPaymentCreationAvailable","connector","Event","ready","pull","PULL","initPull","initStore","initTemplate","showError","command","callback","orderId","showOrdersListAfterCreate","store","templateEngine","el","getElementById","Rest","callMethod","getLoader","buttonEvent","showLoader","isDomNode","classList","add","hideLoader","remove","promise","deleteUrl","error_description","source","connectedSiteId","addAnalyticAction","getParameters","pop","notify","number","click","Notification","Center","deal","builder","VuexBuilder","addModel","useNamespace","build","console"],"mappings":"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"}