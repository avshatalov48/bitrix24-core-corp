{"version":3,"file":"app.bundle.js","sources":["../src/components/templates-type-mixin.js","../src/components/stage-blocks/tile-collection/tile-collection-mixins.js","../src/components/stage-blocks/tile-collection/uninstalled.js","../src/components/stage-blocks/tile-collection/installed.js","../src/components/stage-blocks/stage-mixin.js","../src/components/stage-blocks/cashbox.js","../src/const/mode-dictionary.js","../src/product.js","../src/components/stage-blocks/product.js","../src/components/delivery-selector.js","../src/components/shipment-view.js","../src/components/stage-blocks/delivery-vuex.js","../src/components/stage-blocks/paysystem.js","../src/const/context-dictionary.js","../src/components/stage-blocks/chat-message.js","../src/components/stage-blocks/automation.js","../src/components/deal-receiving-payment/stage-blocks/send.js","../src/components/stage-blocks/timeline.js","../src/components/stage-blocks/document-selector.js","../src/components/chat-receiving-payment/stage-blocks-list.js","../src/component-mixin.js","../src/start.js","../src/no-payment-systems.js","../src/chat.js","../src/components/stage-blocks/sms-message.js","../src/components/deal-receiving-payment/stage-blocks-list.js","../src/components/crm-entity-create-payment/stage-blocks-list.js","../src/components/deal-creating-shipment/stage-blocks/send.js","../src/components/deal-creating-shipment/stage-blocks-list.js","../src/components/stage-blocks/responsible-selector.js","../src/components/deal-terminal-payment/stage-blocks/send.js","../src/components/deal-terminal-payment/stage-blocks/amount.js","../src/components/deal-terminal-payment/stage-blocks-list.js","../src/deal.js","../src/models/application.js","../src/models/document-selector.js","../src/models/ordercreation.js","../src/components/deal-terminal-payment/mobile-app-install-popup.js","../src/app.js"],"sourcesContent":["const MixinTemplatesType = {\n\tdata() {\n\t\treturn {\n\t\t\teditable: true,\n\t\t};\n\t},\n\tcreated() {\n\t\t// TODO: this code is really weird; the only place this event is emitted in is in the products block;\n\t\t// if there's no products block on the page, the entire slider breaks\n\t\t// perhaps a little refactoring is due\n\t\tthis.$root.$on('on-change-editable', (value) => {\n\t\t\tthis.editable = value;\n\t\t});\n\t},\n};\n\nexport {\n\tMixinTemplatesType,\n};\n","import\n{\n\tAppSlider,\n\tEventTypes\n} \t\t\t\t\t\t\t\tfrom 'salescenter.marketplace';\nimport\n{\n\tLabel,\n\tTileLabel,\n\tTileHintImg,\n\tTileLabelPlus,\n\tTileHintImgCaption,\n\tTileHintBackground,\n\tTileHintBackgroundCaption,\n} \t\t\t\t\t\t\t\tfrom 'salescenter.component.stage-block.tile';\nimport * as Hint \t\t\t\tfrom 'salescenter.component.stage-block.hint';\nimport * as Tile \t\t\t\tfrom 'salescenter.tile';\n\n\nlet TileCollectionMixins = {\n\n\tcomponents:\n\t\t{\n\t\t\t'label-block'\t\t\t\t\t\t\t:\tLabel,\n\t\t\t'tile-label-block'\t\t\t\t\t\t:\tTileLabel,\n\t\t\t'tile-hint-img-block'\t\t\t\t\t:\tTileHintImg,\n\t\t\t'tile-hint-plus-block'\t\t\t\t\t:\tTileLabelPlus,\n\t\t\t'tile-hint-img-caption-block'\t\t\t:\tTileHintImgCaption,\n\t\t\t'tile-hint-background-block'\t\t\t:\tTileHintBackground,\n\t\t\t'tile-hint-background-caption-block'\t:\tTileHintBackgroundCaption\n\t\t},\n\tmethods:\n\t\t{\n\t\t\tgetCollectionTile()\n\t\t\t{\n\t\t\t\treturn this.tiles;\n\t\t\t},\n\n\t\t\tgetCollectionTileByFilter(filter: Array)\n\t\t\t{\n\t\t\t\tlet map = new Map();\n\t\t\t\tlet collection = this.getCollectionTile();\n\n\t\t\t\tif(filter.hasOwnProperty('type') && filter.type.length > 0)\n\t\t\t\t{\n\t\t\t\t\tcollection\n\t\t\t\t\t\t.forEach((item, index) => {\n\n\t\t\t\t\t\t\tif(filter.type === item.getType())\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tmap.set(index, item);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tcollection\n\t\t\t\t\t\t.forEach((item, index) => map.set(index, item));\n\t\t\t\t}\n\n\t\t\t\treturn map;\n\t\t\t},\n\n\t\t\thasTileOfferFromCollection()\n\t\t\t{\n\t\t\t\tlet map = this.getCollectionTileByFilter({\n\t\t\t\t\ttype: Tile.Offer.type()\n\t\t\t\t});\n\n\t\t\t\treturn map.size > 0;\n\t\t\t},\n\n\t\t\thasTileMoreFromCollection()\n\t\t\t{\n\t\t\t\tlet map = this.getCollectionTileByFilter({\n\t\t\t\t\ttype: Tile.More.type()\n\t\t\t\t});\n\n\t\t\t\treturn map.size > 0;\n\t\t\t},\n\n\t\t\tgetTileOfferFromCollection()\n\t\t\t{\n\t\t\t\tlet map = this.getCollectionTileByFilter({\n\t\t\t\t\ttype: Tile.Offer.type()\n\t\t\t\t});\n\n\t\t\t\tlet result = {};\n\t\t\t\tmap.forEach((item, inx)=> { result = {index: inx, tile: item}; return false;});\n\t\t\t\treturn result;\n\t\t\t},\n\n\t\t\tgetTileMoreFromCollection()\n\t\t\t{\n\t\t\t\tlet map = this.getCollectionTileByFilter({\n\t\t\t\t\ttype: Tile.More.type()\n\t\t\t\t});\n\n\t\t\t\tlet result = {};\n\t\t\t\tmap.forEach((item, inx)=> { result = {index: inx, tile: item}; return false;});\n\t\t\t\treturn result;\n\t\t\t},\n\n\t\t\tgetTileByIndex(index)\n\t\t\t{\n\t\t\t\tlet  tile = null;\n\t\t\t\tthis.getCollectionTileByFilter({})\n\t\t\t\t\t.forEach((item, inx)=> {\n\n\t\t\t\t\t\tif(index === inx)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttile = item;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\treturn tile;\n\t\t\t},\n\n\t\t\topenSlider(inx)\n\t\t\t{\n\t\t\t\tlet slider = new AppSlider();\n\t\t\t\tlet tile = this.getTileByIndex(inx);\n\n\t\t\t\tslider.openAppLocal(tile, this.getOptionSlider);\n\t\t\t\tslider.subscribe(EventTypes.AppSliderSliderClose,\n\t\t\t\t\t(e) => this.$emit('on-tile-slider-close', {data: e.data})\n\t\t\t\t);\n\t\t\t},\n\n\t\t\tisControlTile(tile: Tile.Base)\n\t\t\t{\n\t\t\t\treturn [Tile.More.type(), Tile.Offer.type()].includes(tile.getType());\n\t\t\t},\n\n\t\t\tshowHint(inx, e)\n\t\t\t{\n\t\t\t\tlet event = e.data.event;\n\t\t\t\tlet tile = this.getTileByIndex(inx);\n\n\t\t\t\tthis.popup = new Hint.Popup();\n\t\t\t\tthis.popup.show(event.target, tile.info);\n\t\t\t},\n\n\t\t\thideHint()\n\t\t\t{\n\t\t\t\tif(this.popup)\n\t\t\t\t{\n\t\t\t\t\tthis.popup.hide();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\tcomputed:\n\t\t{\n\t\t\tgetOptionSlider()\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\twidth: 1000\n\t\t\t\t}\n\t\t\t}\n\t\t},\n};\nexport {\n\tTileCollectionMixins\n}","import {TileCollectionMixins} from \"./tile-collection-mixins\";\n\nconst Uninstalled = {\n\tprops: {\n\t\ttiles: {\n\t\t\ttype: Array,\n\t\t\trequired: true\n\t\t}\n\t},\n\tmixins:[TileCollectionMixins],\n\ttemplate: `\t\t\n\t\t<div>\n\t\t\t<template v-for=\"(tile, index) in tiles\">\n\t\t\t\t<tile-hint-background-caption-block\tv-if=\"tile.img.length > 0 && tile.showTitle\"\n\t\t\t\t\t:src=\"tile.img\"\n\t\t\t\t\t:name=\"tile.name\"\n\t\t\t\t\t:caption=\"tile.name\"\n\t\t\t\t\tv-on:tile-hint-bg-label-on-click=\"openSlider(index)\"\n\t\t\t\t\tv-on:tile-hint-bg-label-on-mouseenter=\"showHint(index, $event)\"\n\t\t\t\t\tv-on:tile-hint-bg-label-on-mouseleave=\"hideHint\"\n\t\t\t\t/>\n\t\t\t\t<tile-hint-background-block\t\tv-else-if=\"tile.img.length > 0\"\n\t\t\t\t\t:src=\"tile.img\"\n\t\t\t\t\t:name=\"tile.name\"\n\t\t\t\t\tv-on:tile-hint-bg-on-click=\"openSlider(index)\"\n\t\t\t\t\tv-on:tile-label-bg-hint-on-mouseenter=\"showHint(index, $event)\"\n\t\t\t\t\tv-on:tile-label-bg-hint-on-mouseleave=\"hideHint\"\n\t\t\t\t/>\n\t\t\t\t<tile-hint-plus-block\t\t\tv-else \n\t\t\t\t\t:name=\"tile.name\" \n\t\t\t\t\tv-on:tile-label-plus-on-click=\"openSlider(index)\"\n\t\t\t\t/> \n\t\t\t</template>\n\t\t</div>\n\t`\n};\nexport {\n\tUninstalled\n}","import {TileCollectionMixins} from \"./tile-collection-mixins\";\n\nconst Installed = {\n\tprops: {\n\t\ttiles: {\n\t\t\ttype: Array,\n\t\t\trequired: true\n\t\t}\n\t},\n\tmixins:[TileCollectionMixins],\n\n\ttemplate: `\t\n\t\t<div class=\"salescenter-app-payment-by-sms-item-container-payment\">\n\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container-payment-inline\">\n\t\t\t\t<tile-label-block class=\"salescenter-app-payment-by-sms-item-container-payment-item-text\"\n\t\t\t\t\tv-for=\"(tile, index) in tiles\"\n\t\t\t\t\tv-bind:key=\"index\"\n\t\t\t\t\tv-if=\"isControlTile(tile) === false\"\n\t\t\t\t\t:name=\"tile.name\" \n\t\t\t\t\tv-on:tile-label-on-click=\"openSlider(index)\"\n\t\t\t\t/>\n\t\t\t\t<br>\n\t\t\t\t<tile-label-block class=\"salescenter-app-payment-by-sms-item-container-payment-item-text-add\"\n\t\t\t\t\tv-if=\"hasTileOfferFromCollection() === true\"\n\t\t\t\t\t:name=\"getTileOfferFromCollection().tile.name\"\n\t\t\t\t\tv-on:tile-label-on-click=\"openSlider(getTileOfferFromCollection().index)\"\n\t\t\t\t/>\n\t\t\t\t<tile-label-block class=\"salescenter-app-payment-by-sms-item-container-payment-item-text-add\"\n\t\t\t\t\tv-if=\"hasTileMoreFromCollection() === true\"\n\t\t\t\t\t:name=\"getTileMoreFromCollection().tile.name\"\n\t\t\t\t\tv-on:tile-label-on-click=\"openSlider(getTileMoreFromCollection().index)\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t`\n};\nexport {\n\tInstalled\n}","import {StatusTypes as Status} from 'salescenter.component.stage-block';\n\nconst StageMixin = {\n\tcomputed:\n\t\t{\n\t\t\tstatusClassMixin()\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\t'salescenter-app-payment-by-sms-item'\t\t\t: true,\n\t\t\t\t\t'salescenter-app-payment-by-sms-item-current'\t: this.status === Status.current,\n\t\t\t\t\t'salescenter-app-payment-by-sms-item-disabled'\t: this.status === Status.disabled,\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tcontainerClassMixin()\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\t'salescenter-app-payment-by-sms-item-container'\t: true\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tcounterCheckedMixin()\n\t\t\t{\n\t\t\t\treturn this.status === Status.complete\n\t\t\t}\n\t\t},\n\t\tmethods:\n\t\t\t{\n\t\t\t\tonSliderClose(e)\n\t\t\t\t{\n\t\t\t\t\tthis.$emit('on-stage-tile-collection-slider-close', e);\n\t\t\t\t}\n\t\t\t}\n};\n\nexport {\n\tStageMixin\n}","import {Loc} \t\t\t\t\t\t\t\t\tfrom 'main.core';\nimport {Block} \t\t\tfrom 'salescenter.component.stage-block';\nimport {Uninstalled as TileUnInstalled} \t\tfrom \"./tile-collection/uninstalled\";\nimport {Installed as TileInstalled} \t\t\tfrom \"./tile-collection/installed\";\nimport {StageMixin} \t\t\t\t\t\t\tfrom \"./stage-mixin\";\n\nconst Cashbox = {\n\tprops: {\n\t\tstatus: {\n\t\t\ttype: String,\n\t\t\t\trequired: true\n\t\t},\n\t\tcounter: {\n\t\t\ttype: Number,\n\t\t\t\trequired: true\n\t\t},\n\t\ttiles: {\n\t\t\ttype: Array,\n\t\t\t\trequired: true\n\t\t},\n\t\tinstalled: {\n\t\t\ttype: Boolean,\n\t\t\t\trequired: true\n\t\t},\n\t\ttitleItems: {\n\t\t\ttype: Array\n\t\t},\n\t\tinitialCollapseState: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true\n\t\t},\n\t},\n\tmixins:[StageMixin],\n\tcomponents:\n\t{\n\t\t'stage-block-item'\t\t\t\t\t:\tBlock,\n\t\t'tile-collection-installed-block'\t:\tTileInstalled,\n\t\t'tile-collection-uninstalled-block'\t:\tTileUnInstalled\n\t},\n\tcomputed:\n\t{\n\t\tstatusClass()\n\t\t{\n\t\t\treturn {\n\t\t\t\t'salescenter-app-payment-by-sms-item-disabled-bg': this.installed === false\n\t\t\t}\n\t\t},\n\t\ttitle()\n\t\t{\n\t\t\treturn this.installed === true\n\t\t\t\t? Loc.getMessage('SALESCENTER_CASHBOX_SET_BLOCK_TITLE')\n\t\t\t\t: Loc.getMessage('SALESCENTER_CASHBOX_BLOCK_TITLE');\n\t\t},\n\t\tconfigForBlock()\n\t\t{\n\t\t\treturn {\n\t\t\t\tcounter: this.counter,\n\t\t\t\ttitleItems: this.installed ? this.titleItems : [],\n\t\t\t\tinstalled: this.installed,\n\t\t\t\tcollapsible: true,\n\t\t\t\tchecked: this.counterCheckedMixin,\n\t\t\t\tshowHint: !this.installed,\n\t\t\t\tinitialCollapseState: this.initialCollapseState,\n\t\t\t}\n\t\t},\n\t},\n\tmethods:\n\t{\n\t\tonItemHint(e)\n\t\t{\n\t\t\tBX.Salescenter.Manager.openHowToConfigCashBox(e);\n\t\t},\n\t\tsaveCollapsedOption(option)\n\t\t{\n\t\t\tthis.$emit('on-save-collapsed-option', 'cashbox', option);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<stage-block-item\n\t\t\t:class=\"[statusClassMixin, statusClass]\"\n\t\t\t:config=\"configForBlock\"\n\t\t\t@on-item-hint.stop.prevent=\"onItemHint\"\n\t\t\t@on-tile-slider-close=\"onSliderClose\"\n\t\t\t@on-adjust-collapsed=\"saveCollapsedOption\"\n\t\t>\n\t\t\t<template v-slot:block-title-title>{{title}}</template>\n\t\t\t<template v-slot:block-hint-title>\n\t\t\t\t${Loc.getMessage('SALESCENTER_CASHBOX_BLOCK_SETTINGS_TITLE')}\n\t\t\t</template>\n\t\t\t<template v-slot:block-container>\n\t\t\t\t<div\n\t\t\t\t\tv-if=\"!installed\"\n\t\t\t\t\tclass=\"salescenter-app-explanation\"\n\t\t\t\t>\n\t\t\t\t\t<div class=\"salescenter-app-explanation-img\"></div>\n\t\t\t\t\t<div class=\"salescenter-app-explanation-area\">\n\t\t\t\t\t\t<div class=\"salescenter-app-explanation-text\">\n\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_TERMINAL_CASHBOX_SETUP_HINT')}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div :class=\"containerClassMixin\">\n\t\t\t\t\t<tile-collection-uninstalled-block \t:tiles=\"tiles\" v-if=\"!installed\" v-on:on-tile-slider-close=\"onSliderClose\"/>\n\t\t\t\t\t<tile-collection-installed-block :tiles=\"tiles\" v-on:on-tile-slider-close=\"onSliderClose\" v-else />\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</stage-block-item>\n\t`\n};\n\nexport\n{\n\tCashbox\n}\n","export const ModeDictionary = Object.freeze({\n\tpayment: 'payment',\n\tdelivery: 'delivery',\n\tpaymentDelivery: 'payment_delivery',\n\tterminalPayment: 'terminal_payment',\n});\n","import { FormMode, ProductForm } from 'catalog.product-form';\nimport 'currency';\nimport { MixinTemplatesType } from './components/templates-type-mixin';\nimport { ajax as Ajax, Runtime, Type, Text, Loc } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport type { BaseEvent } from 'main.core.events';\nimport { ModeDictionary } from './const/mode-dictionary';\n\nexport default {\n\tmixins: [MixinTemplatesType],\n\tmounted()\n\t{\n\t\tconst editable = this.$root.$app.options.templateMode !== 'view';\n\t\tconst isCompilationMode = this.$root.$app.compilation !== null;\n\n\t\tthis.$root.$emit('on-change-editable', editable);\n\t\tif (this.productForm)\n\t\t{\n\t\t\tthis.productForm.setEditable(editable, isCompilationMode);\n\t\t}\n\n\t\tif (this.productForm)\n\t\t{\n\t\t\tconst formWrapper = this.$root.$el.querySelector('.salescenter-app-form-wrapper');\n\t\t\tformWrapper.appendChild(this.productForm.layout());\n\t\t}\n\t},\n\tcreated()\n\t{\n\t\tthis.refreshId = null;\n\n\t\tconst defaultCurrency = this.$root.$app.options.currencyCode || '';\n\n\t\tthis.$store.dispatch('orderCreation/setCurrency', defaultCurrency);\n\t\tif (Type.isArray(this.$root.$app.options.basket))\n\t\t{\n\t\t\tconst fields = [];\n\t\t\tthis.$root.$app.options.basket.forEach((item) => {\n\t\t\t\tfields.push(item.fields);\n\t\t\t});\n\t\t\tthis.$store.commit('orderCreation/setBasket', fields);\n\t\t}\n\n\t\tif (Type.isObject(this.$root.$app.options.totals))\n\t\t{\n\t\t\tthis.$store.commit('orderCreation/setTotal', this.$root.$app.options.totals);\n\t\t}\n\n\t\tthis.productForm = new ProductForm(\n\t\t\t{\n\t\t\t\tcurrencySymbol: this.$root.$app.options.currencySymbol,\n\t\t\t\tcurrency: defaultCurrency,\n\t\t\t\tiblockId: this.$root.$app.options.catalogIblockId,\n\t\t\t\tbasePriceId: this.$root.$app.options.basePriceId,\n\t\t\t\tbasket: Type.isArray(this.$root.$app.options.basket) ? this.$root.$app.options.basket : [],\n\t\t\t\ttotals: this.$root.$app.options.totals,\n\t\t\t\ttaxList: this.$root.$app.options.vatList,\n\t\t\t\tmeasures: this.$root.$app.options.measures,\n\t\t\t\tshowDiscountBlock: this.$root.$app.options.showProductDiscounts,\n\t\t\t\tshowTaxBlock: this.$root.$app.options.showProductTaxes,\n\t\t\t\ttotalResultLabel: this.$root.$app.options.mode === 'delivery' ? Loc.getMessage('SALESCENTER_SHIPMENT_PRODUCT_BLOCK_TOTAL') : null,\n\t\t\t\turlBuilderContext: this.$root.$app.options.urlProductBuilderContext,\n\t\t\t\tisCatalogPriceEditEnabled: this.$root.$app.options.isCatalogPriceEditEnabled,\n\t\t\t\tisCatalogDiscountSetEnabled: this.$root.$app.options.isCatalogDiscountSetEnabled,\n\t\t\t\tfieldHints: this.$root.$app.options.fieldHints,\n\t\t\t\thideUnselectedProperties: (this.$root.$app.options.templateMode === 'view'),\n\t\t\t\tshowCompilationModeSwitcher: (\n\t\t\t\t\tthis.$root.$app.options.templateMode === 'create'\n\t\t\t\t\t&& this.$root.$app.options.showCompilationModeSwitcher === 'Y'\n\t\t\t\t\t&& this.$root.$app.options.mode === ModeDictionary.paymentDelivery\n\t\t\t\t),\n\t\t\t\tcompilationFormType: this.$root.$app.connector === 'facebook' && this.$root.$app.isAllowedFacebookRegion ? 'FACEBOOK' : 'REGULAR',\n\t\t\t\tfacebookFailProducts: this.$root.$app.compilation?.FAIL_PRODUCTS,\n\t\t\t\townerId: this.$root.$app.options.ownerId,\n\t\t\t\townerTypeId: this.$root.$app.options.ownerTypeId,\n\t\t\t\tdialogId: this.$root.$app.options.dialogId,\n\t\t\t\tsessionId: this.$root.$app.options.sessionId,\n\t\t\t\tisShortProductViewFormat: true,\n\t\t\t},\n\t\t);\n\n\t\tthis.checkProductErrors();\n\n\t\tEventEmitter.subscribe(\n\t\t\tthis.productForm,\n\t\t\t'ProductForm:onBasketChange',\n\t\t\tRuntime.debounce(this.onBasketChange, 500, this),\n\t\t);\n\n\t\tEventEmitter.subscribe(\n\t\t\tthis.productForm,\n\t\t\t'ProductForm:onErrorsChange',\n\t\t\tRuntime.debounce(this.checkProductErrors, 500, this),\n\t\t);\n\n\t\tEventEmitter.subscribe(\n\t\t\tthis.productForm,\n\t\t\t'ProductForm:onModeChange',\n\t\t\tthis.onProductFormModeChange,\n\t\t);\n\n\t\tEventEmitter.subscribe(\n\t\t\tthis.productForm,\n\t\t\t'ProductForm:onCompilationCreated',\n\t\t\tthis.onProductFormCompilationCreated.bind(this),\n\t\t);\n\t},\n\tmethods: {\n\t\tonProductFormCompilationCreated(event: BaseEvent)\n\t\t{\n\t\t\tconst data = event.getData();\n\t\t\tthis.$root.$app.newCompilationId = data.compilationId;\n\t\t\tthis.$root.$app.ownerId = data.ownerId;\n\t\t\tthis.$root.$app.options.ownerId = data.ownerId;\n\t\t},\n\t\tonProductFormModeChange(event: BaseEvent)\n\t\t{\n\t\t\tconst mode = event.getData().mode;\n\t\t\tif (mode === FormMode.COMPILATION || mode === FormMode.COMPILATION_READ_ONLY)\n\t\t\t{\n\t\t\t\tthis.$store.commit('orderCreation/enableCompilationMode');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.$store.commit('orderCreation/disableCompilationMode');\n\t\t\t}\n\t\t\tthis.$emit('on-product-form-mode-change');\n\t\t},\n\t\tonBasketChange(event: BaseEvent)\n\t\t{\n\t\t\tconst processRefreshRequest = (data) => {\n\t\t\t\tif (this.productForm)\n\t\t\t\t{\n\t\t\t\t\tconst preparedBasket = [];\n\t\t\t\t\tdata.basket.forEach((item) => {\n\t\t\t\t\t\tif (!Type.isStringFilled(item.innerId))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tpreparedBasket.push({\n\t\t\t\t\t\t\tselectorId: item.innerId,\n\t\t\t\t\t\t\tfields: item,\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\n\t\t\t\t\tthis.productForm.setData({\n\t\t\t\t\t\t...data,\n\t\t\t\t\t\tbasket: preparedBasket,\n\t\t\t\t\t});\n\n\t\t\t\t\tif (Type.isArray(data.basket))\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$store.commit('orderCreation/setBasket', data.basket);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (Type.isObject(data.total))\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$store.commit('orderCreation/setTotal', data.total);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tconst data = event.getData();\n\t\t\tif (!Type.isArray(data.basket))\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst fields = [];\n\t\t\tdata.basket.forEach((item) => {\n\t\t\t\tfields.push(item.fields);\n\t\t\t});\n\t\t\tthis.$store.commit('orderCreation/setBasket', fields);\n\n\t\t\tif (this.$root.$app.newCompilationId)\n\t\t\t{\n\t\t\t\tthis.changeCompilationProducts();\n\t\t\t}\n\n\t\t\tif (this.isNeedDisableSubmit())\n\t\t\t{\n\t\t\t\tthis.$store.commit('orderCreation/disableSubmit');\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.$store.commit('orderCreation/enableSubmit');\n\n\t\t\tconst requestId = Text.getRandom(20);\n\t\t\tthis.refreshId = requestId;\n\t\t\tAjax.runAction(\n\t\t\t\t'salescenter.api.order.refreshBasket',\n\t\t\t\t{\n\t\t\t\t\tdata: {\n\t\t\t\t\t\torderId: this.$root.$app.orderId,\n\t\t\t\t\t\tbasketItems: fields,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t)\n\t\t\t\t.then((result) => {\n\t\t\t\t\tif (this.refreshId !== requestId)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst data = BX.prop.getObject(result, 'data', {});\n\t\t\t\t\tprocessRefreshRequest({\n\t\t\t\t\t\ttotal: BX.prop.getObject(\n\t\t\t\t\t\t\tdata,\n\t\t\t\t\t\t\t'total',\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tdiscount: 0,\n\t\t\t\t\t\t\t\tresult: 0,\n\t\t\t\t\t\t\t\tsum: 0,\n\t\t\t\t\t\t\t\t// resultNumeric: 0,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t),\n\t\t\t\t\t\tbasket: BX.prop.get(data, 'items', []),\n\t\t\t\t\t});\n\t\t\t\t})\n\t\t\t\t.catch((result) => {\n\t\t\t\t\tconst data = BX.prop.getObject(result, 'data', {});\n\t\t\t\t\tprocessRefreshRequest({\n\t\t\t\t\t\terrors: BX.prop.get(result, 'errors', []),\n\t\t\t\t\t\tbasket: BX.prop.get(data, 'items', []),\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t},\n\t\tchangeCompilationProducts()\n\t\t{\n\t\t\tconst basketItems = this.$store.getters['orderCreation/getBasket']();\n\t\t\tconst productIds = basketItems.map((basketItem) => {\n\t\t\t\treturn basketItem.skuId;\n\t\t\t});\n\t\t\tconst compilationId = this.$root.$app.compilation\n\t\t\t\t? this.$root.$app.compilation.ID\n\t\t\t\t: this.$root.$app.newCompilationId\n\t\t\t;\n\t\t\tif (compilationId)\n\t\t\t{\n\t\t\t\tAjax.runAction(\n\t\t\t\t\t'salescenter.compilation.updateCompilation',\n\t\t\t\t\t{\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tcompilationId,\n\t\t\t\t\t\t\tproductIds,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t}\n\t\t},\n\t\tcheckProductErrors()\n\t\t{\n\t\t\tif (this.isNeedDisableSubmit())\n\t\t\t{\n\t\t\t\tthis.$store.commit('orderCreation/disableSubmit');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.$store.commit('orderCreation/enableSubmit');\n\t\t\t}\n\t\t},\n\t\tisNeedDisableSubmit()\n\t\t{\n\t\t\tconst basket = this.$store.getters['orderCreation/getBasket']();\n\n\t\t\tif (\n\t\t\t\tbasket.length <= 0\n\t\t\t\t// || !this.$root.$app.hasClientContactInfo()\n\t\t\t\t|| (this.productForm && Type.isFunction(this.productForm.hasErrors) && this.productForm.hasErrors())\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tconst filledProducts = basket.filter((item) => {\n\t\t\t\treturn (Type.isStringFilled(item.module) && item.productId > 0);\n\t\t\t});\n\n\t\t\treturn filledProducts.length <= 0;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"salescenter-app-payment-side\">\n\t\t\t<div class=\"salescenter-app-page-content\">\n\t\t\t\t<div class=\"salescenter-app-form-wrapper\"></div>\n\t\t\t\t<slot name=\"footer\"></slot>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { Block } from 'salescenter.component.stage-block';\nimport Product from '../../product';\nimport { StageMixin } from './stage-mixin';\n\nexport default {\n\tprops: {\n\t\tstatus: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tcounter: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\thintTitle: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tadditionalContainerClasses: {\n\t\t\ttype: Object,\n\t\t\trequired: false,\n\t\t\tdefault()\n\t\t\t{\n\t\t\t\treturn {};\n\t\t\t},\n\t\t},\n\t},\n\tmixins: [StageMixin],\n\tcomponents:\n\t\t{\n\t\t\t'stage-block-item': Block,\n\t\t\tproduct: Product,\n\t\t},\n\tmethods:\n\t\t{\n\t\t\tonItemHint(e)\n\t\t\t{\n\t\t\t\tBX.Salescenter.Manager.openHowToSell(e);\n\t\t\t},\n\t\t\tonProductFormModeChange(event)\n\t\t\t{\n\t\t\t\tthis.$emit('on-product-form-mode-change');\n\t\t\t},\n\t\t},\n\tcomputed:\n\t\t{\n\t\t\tconfigForBlock()\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\tcounter: this.counter,\n\t\t\t\t\tchecked: this.counterCheckedMixin,\n\t\t\t\t\tshowHint: true,\n\t\t\t\t};\n\t\t\t},\n\t\t\tcontainerClasses()\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\t...this.statusClassMixin,\n\t\t\t\t\t...this.additionalContainerClasses,\n\t\t\t\t};\n\t\t\t},\n\t\t},\n\ttemplate: `\n\t\t<stage-block-item\n\t\t\t@on-item-hint.stop.prevent=\"onItemHint\"\n\t\t\t:config=\"configForBlock\"\n\t\t\t:class=\"containerClasses\"\n\t\t>\n\t\t\t<template v-slot:block-title-title>{{ title }}</template>\n\t\t\t<template v-slot:block-hint-title>{{ hintTitle }}</template>\n\t\t\t<template v-slot:block-container>\n\t\t\t\t<div :class=\"containerClassMixin\">\n\t\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container-payment\">\n\t\t\t\t\t\t<product\n\t\t\t\t\t\t@on-product-form-mode-change=\"onProductFormModeChange\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</stage-block-item>\n\t`,\n};\n","import {Vuex} from 'ui.vue.vuex';\nimport {Vue} from 'ui.vue';\nimport {ajax, Loc} from 'main.core';\nimport DeliverySelector from 'salescenter.deliveryselector';\n\nexport default {\n\tprops: {\n\t\tconfig: {type: Object, required: true}\n\t},\n\tcomponents: {\n\t\t'delivery-selector': DeliverySelector,\n\t},\n\tdata()\n\t{\n\t\treturn {\n\t\t\tavailableServices: [],\n\t\t};\n\t},\n\tmethods: {\n\t\tonChange(payload)\n\t\t{\n\t\t\tthis.$store.dispatch('orderCreation/setDelivery', payload.deliveryPrice);\n\n\t\t\tthis.$store.dispatch(\n\t\t\t\t'orderCreation/setDeliveryId',\n\t\t\t\tpayload.deliveryServiceId\n\t\t\t);\n\t\t\tthis.$store.dispatch(\n\t\t\t\t'orderCreation/setPropertyValues',\n\t\t\t\tpayload.relatedPropsValues\n\t\t\t);\n\t\t\tthis.$store.dispatch(\n\t\t\t\t'orderCreation/setDeliveryExtraServicesValues',\n\t\t\t\tpayload.relatedServicesValues\n\t\t\t);\n\t\t\tthis.$store.dispatch(\n\t\t\t\t'orderCreation/setExpectedDelivery',\n\t\t\t\tpayload.estimatedDeliveryPrice\n\t\t\t);\n\t\t\tthis.$store.dispatch(\n\t\t\t\t'orderCreation/setDeliveryResponsibleId',\n\t\t\t\tpayload.responsibleUser ? payload.responsibleUser.id : null\n\t\t\t);\n\n\t\t\tthis.$emit('change', payload);\n\t\t},\n\t\tonAddressFromChanged()\n\t\t{\n\t\t\tthis.refreshAvailableServices();\n\t\t},\n\t\tonDeliveryServiceChanged()\n\t\t{\n\t\t\tthis.refreshAvailableServices();\n\t\t},\n\t\tonSettingsChanged()\n\t\t{\n\t\t\tthis.$emit('delivery-settings-changed');\n\t\t},\n\t\trefreshAvailableServices()\n\t\t{\n\t\t\tajax.runAction(\n\t\t\t\t'salescenter.order.getCompatibleDeliverySystems',\n\t\t\t\t{\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tbasketItems: this.config.basket ? this.config.basket : [],\n\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\tsessionId: this.config.sessionId,\n\t\t\t\t\t\t\townerTypeId: this.config.ownerTypeId,\n\t\t\t\t\t\t\townerId: this.config.ownerId,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdeliveryServiceId: this.order.deliveryId,\n\t\t\t\t\t\tshipmentPropValues: this.order.propertyValues,\n\t\t\t\t\t\tdeliveryRelatedServiceValues: this.order.deliveryExtraServicesValues,\n\t\t\t\t\t\tdeliveryResponsibleId: this.order.deliveryResponsibleId,\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t).then((result) => {\n\t\t\t\tlet data = BX.prop.getObject(result, \"data\", {});\n\t\t\t\tthis.availableServices = data.availableServices ? data.availableServices : {};\n\t\t\t}).catch((result) => {\n\t\t\t\tthis.availableServices = {};\n\t\t\t});\n\t\t}\n\t},\n\tcreated()\n\t{\n\t\tthis.$store.dispatch('orderCreation/setPersonTypeId', this.config.personTypeId);\n\n\t\tthis.refreshAvailableServices();\n\t},\n\n\tcomputed: {\n\t\tlocalize()\n\t\t{\n\t\t\treturn Vue.getFilteredPhrases('SALESCENTER_');\n\t\t},\n\t\tsumTitle()\n\t\t{\n\t\t\treturn Loc.getMessage('SALESCENTER_PRODUCT_PRODUCTS_PRICE');\n\t\t},\n\t\tproductsPrice()\n\t\t{\n\t\t\treturn this.order.total.result;\n\t\t},\n\t\tdelivery()\n\t\t{\n\t\t\treturn this.order.delivery;\n\t\t},\n\t\tdeliveryFormatted()\n\t\t{\n\t\t\tif (this.isDeliveryCalculated)\n\t\t\t{\n\t\t\t\treturn BX.Currency.currencyFormat(this.delivery, this.config.currency, false);\n\t\t\t}\n\n\t\t},\n\t\ttotal()\n\t\t{\n\t\t\tif (this.productsPrice === null || this.delivery === null)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn this.productsPrice + this.delivery;\n\t\t},\n\t\ttotalFormatted()\n\t\t{\n\t\t\treturn BX.Currency.currencyFormat(this.total, this.config.currency, false);\n\t\t},\n\t\tisDeliveryCalculated()\n\t\t{\n\t\t\treturn (this.order.delivery !== null);\n\t\t},\n\t\texcludedServiceIds()\n\t\t{\n\t\t\treturn this.$root.$app.options.mode === 'delivery' ? [this.$root.$app.options.emptyDeliveryServiceId] : [];\n\t\t},\n\t\tactionData()\n\t\t{\n\t\t\treturn {\n\t\t\t\tbasketItems: this.config.basket,\n\t\t\t\toptions: {\n\t\t\t\t\torderId : this.$root.$app.orderId,\n\t\t\t\t\tsessionId: this.config.sessionId,\n\t\t\t\t\townerTypeId: this.config.ownerTypeId,\n\t\t\t\t\townerId: this.config.ownerId,\n\t\t\t\t},\n\t\t\t};\n\t\t},\n\t\t...Vuex.mapState({\n\t\t\torder: state => state.orderCreation,\n\t\t}),\n\t},\n\ttemplate: `\n\t\t<delivery-selector\n\t\t\t:available-services=\"availableServices\"\n\t\t\t:excluded-service-ids=\"excludedServiceIds\"\t\t\t\t\n\t\t\t:init-entered-delivery-price=\"config.deliveryPrice\"\n\t\t\t:init-delivery-service-id=\"config.deliveryServiceId\"\n\t\t\t:init-related-services-values=\"config.relatedServicesValues\"\n\t\t\t:init-related-props-values=\"config.relatedPropsValues\"\n\t\t\t:init-related-props-options=\"config.relatedPropsOptions\"\n\t\t\t:init-responsible-id=\"config.responsibleId\"\n\t\t\t:person-type-id=\"config.personTypeId\"\n\t\t\t:action=\"'salescenter.api.order.refreshDelivery'\"\n\t\t\t:action-data=\"actionData\"\n\t\t\t:external-sum=\"productsPrice\"\n\t\t\t:external-sum-label=\"sumTitle\"\n\t\t\t:currency=\"config.currency\"\n\t\t\t:currency-symbol=\"config.currencySymbol\"\n\t\t\t@change=\"onChange\"\n\t\t\t@address-from-changed=\"onAddressFromChanged\"\n\t\t\t@delivery-service-changed=\"onDeliveryServiceChanged\"\n\t\t\t@settings-changed=\"onSettingsChanged\"\n\t\t></delivery-selector>\n\t`\n};\n","import 'ui.fonts.ruble';\nimport 'currency';\nimport {ajax, Loc, Type} from 'main.core';\n\nexport default {\n\tprops: {\n\t\tid: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\tproductsPrice: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata()\n\t{\n\t\treturn {\n\t\t\tshipment: {\n\t\t\t\tpriceDelivery: null,\n\t\t\t\tbasePriceDelivery: null,\n\t\t\t\tcurrency: null,\n\t\t\t\tdeliveryService: {\n\t\t\t\t\tname: null,\n\t\t\t\t\tlogo: null,\n\t\t\t\t\tparent: {\n\t\t\t\t\t\tname: null,\n\t\t\t\t\t\tlogo: null,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\textraServices: [],\n\t\t\t\trequestProperties: [],\n\t\t\t},\n\t\t\tcanUserPerformCalls: false,\n\t\t};\n\t},\n\tcreated()\n\t{\n\t\tajax.runAction(\n\t\t\t'salescenter.deliveryselector.getShipmentData',\n\t\t\t{data: {\n\t\t\t\t\tid: this.id\n\t\t\t\t}}\n\t\t).then((result) => {\n\t\t\tthis.shipment = result.data.shipment;\n\t\t\tthis.canUserPerformCalls = result.data.canUserPerformCalls;\n\t\t});\n\t},\n\tmethods: {\n\t\tgetFormattedPrice(price)\n\t\t{\n\t\t\treturn BX.Currency.currencyFormat(price, this.currency, true);\n\t\t},\n\t\tisPhoneRequestProperty(property)\n\t\t{\n\t\t\tif (!Type.isArray(property.tags))\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn property.tags.includes('phone');\n\t\t},\n\t\tmakeCall(phoneNumber)\n\t\t{\n\t\t\tif (\n\t\t\t\t!Type.isUndefined(window.top['BXIM'])\n\t\t\t\t&& this.canUserPerformCalls === true\n\t\t\t)\n\t\t\t{\n\t\t\t\twindow.top['BXIM'].phoneTo(phoneNumber);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\twindow.open('tel:' + phoneNumber, '_self');\n\t\t\t}\n\t\t},\n\t},\n\tcomputed: {\n\t\thasParent()\n\t\t{\n\t\t\treturn (\n\t\t\t\tthis.shipment.hasOwnProperty('deliveryService')\n\t\t\t\t&& this.shipment.deliveryService.hasOwnProperty('parent')\n\t\t\t\t&& this.shipment.deliveryService.parent\n\t\t\t);\n\t\t},\n\t\tdeliveryServiceLogo()\n\t\t{\n\t\t\treturn this.shipment.deliveryService.logo ? this.shipment.deliveryService.logo : null;\n\t\t},\n\t\tdeliveryServiceProfileLogo()\n\t\t{\n\t\t\treturn (this.hasParent && this.shipment.deliveryService.parent.logo)\n\t\t\t\t? this.shipment.deliveryService.parent.logo\n\t\t\t\t: null;\n\t\t},\n\t\tpaymentPrice()\n\t\t{\n\t\t\treturn this.productsPrice + this.priceDelivery;\n\t\t},\n\t\tdeliveryServiceName()\n\t\t{\n\t\t\treturn this.hasParent ? this.shipment.deliveryService.parent.name : this.shipment.deliveryService.name;\n\t\t},\n\t\tdeliveryServiceProfileName()\n\t\t{\n\t\t\treturn this.hasParent ? this.shipment.deliveryService.name : null;\n\t\t},\n\t\tpriceDelivery()\n\t\t{\n\t\t\treturn this.shipment ? this.shipment.priceDelivery : null;\n\t\t},\n\t\tcurrency()\n\t\t{\n\t\t\treturn this.shipment ? this.shipment.currency : null;\n\t\t},\n\t\textraServices()\n\t\t{\n\t\t\treturn Type.isArray(this.shipment.extraServices) ? this.shipment.extraServices : [];\n\t\t},\n\t\tisExtraServicesVisible()\n\t\t{\n\t\t\treturn this.extraServices.length > 0;\n\t\t},\n\t\trequestProperties()\n\t\t{\n\t\t\treturn Type.isArray(this.shipment.requestProperties) ? this.shipment.requestProperties : [];\n\t\t},\n\t\tisRequestPropertiesVisible()\n\t\t{\n\t\t\treturn this.requestProperties.length > 0;\n\t\t},\n\t\tpriceDeliveryFormatted()\n\t\t{\n\t\t\treturn this.getFormattedPrice(this.priceDelivery);\n\t\t},\n\t\tproductsPriceFormatted()\n\t\t{\n\t\t\treturn this.getFormattedPrice(this.productsPrice);\n\t\t},\n\t\tpaymentPriceFormatted()\n\t\t{\n\t\t\treturn this.getFormattedPrice(this.paymentPrice);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div style=\"width: 100%;\" xmlns=\"http://www.w3.org/1999/html\">\n\t\t\t<div class=\"salescenter-delivery-selector-head\">\n\t\t\t\t<div\n\t\t\t\t\tv-if=\"hasParent && deliveryServiceLogo\"\n\t\t\t\t\t:style=\"{ backgroundImage: 'url(' + deliveryServiceLogo + ')' }\"\n\t\t\t\t\tclass=\"salescenter-delivery-selector-logo\"\n\t\t\t\t>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"salescenter-delivery-selector-info\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tv-if=\"deliveryServiceProfileLogo\"\n\t\t\t\t\t\t:style=\"{ backgroundImage: 'url(' + deliveryServiceProfileLogo + ')' }\"\n\t\t\t\t\t\tclass=\"salescenter-delivery-selector-logo\"\n\t\t\t\t\t>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"salescenter-delivery-selector-content\">\n\t\t\t\t\t\t<div class=\"salescenter-delivery-selector-text-light\">{{deliveryServiceName}}</div>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tv-if=\"deliveryServiceProfileName\"\n\t\t\t\t\t\t\tclass=\"salescenter-delivery-selector-text-dark\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{deliveryServiceProfileName}}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div v-if=\"isExtraServicesVisible\" class=\"salescenter-delivery-selector-main\">\n\t\t\t\t<div class=\"salescenter-delivery-selector-text-light\">\n\t\t\t\t\t${Loc.getMessage('SALESCENTER_SHIPMENT_EXTRA_SERVICES')}:\n\t\t\t\t</div>\n\t\t\t\t<ul class=\"salescenter-delivery-selector-list\">\n\t\t\t\t\t<li\n\t\t\t\t\t\tv-for=\"extraService in extraServices\"\n\t\t\t\t\t\tclass=\"salescenter-delivery-selector-list-item salescenter-delivery-selector-text-dark\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{extraService.name}}: {{extraService.value}} \n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t\t<div v-if=\"isRequestPropertiesVisible\" class=\"salescenter-delivery-selector-main\">\n\t\t\t\t<div class=\"salescenter-delivery-selector-text-light\">\n\t\t\t\t\t${Loc.getMessage('SALESCENTER_DELIVERY_REQUEST_DETAILS')}:\n\t\t\t\t</div>\n\t\t\t\t<ul class=\"salescenter-delivery-selector-list\">\n\t\t\t\t\t<li\n\t\t\t\t\t\tv-for=\"requestProperty in requestProperties\"\n\t\t\t\t\t\tclass=\"salescenter-delivery-selector-list-item salescenter-delivery-selector-text-dark\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{requestProperty.name}}:\n\t\t\t\t\t\t<template v-if=\"isPhoneRequestProperty(requestProperty)\">\n\t\t\t\t\t\t\t<a @click.prevent=\"makeCall(requestProperty.value)\" href=\"#\">{{requestProperty.value}}</a>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t\t{{requestProperty.value}}\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t\t<div class=\"salescenter-delivery-selector-line\"></div>\n\t\t\t<div class=\"catalog-pf-result-wrapper\">\n\t\t\t\t<table class=\"catalog-pf-result\">\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<span class=\"catalog-pf-text\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_PRODUCT_PRODUCTS_PRICE')}:\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</td> \n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<span v-html=\"productsPriceFormatted\" class=\"catalog-pf-text\"></span> \n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td class=\"catalog-pf-result-padding-bottom\">\n\t\t\t\t\t\t\t<span class=\"catalog-pf-text catalog-pf-text--tax\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_SHIPMENT_PRODUCT_BLOCK_DELIVERY_PRICE')}: \n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</td> \n\t\t\t\t\t\t<td class=\"catalog-pf-result-padding-bottom\"> \n\t\t\t\t\t\t\t<span class=\"catalog-pf-text catalog-pf-text--tax\" v-html=\"priceDeliveryFormatted\"></span>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr> \n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td class=\"catalog-pf-result-padding\">\n\t\t\t\t\t\t\t<span class=\"catalog-pf-text catalog-pf-text--total catalog-pf-text--border\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_PRODUCT_TOTAL_RESULT')}: \n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</td> \n\t\t\t\t\t\t<td class=\"catalog-pf-result-padding\">\n\t\t\t\t\t\t\t<span v-html=\"paymentPriceFormatted\" class=\"catalog-pf-text catalog-pf-text--total\"></span> \n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t</table>\n\t\t\t</div>\n\t\t</div>\n\t`\n};\n","import {Vuex} \t\t\t\t\t\t\tfrom 'ui.vue.vuex';\nimport {Loc} \t\t\t\t\t\t\tfrom 'main.core';\nimport {Block} \t\t\tfrom 'salescenter.component.stage-block';\nimport {Uninstalled as TileUnInstalled} from \"./tile-collection/uninstalled\";\nimport DeliverySelector\t\t\t\t\tfrom \"../delivery-selector\";\nimport ShipmentView\t\t\t\t\t\tfrom \"../shipment-view\";\nimport {StageMixin} \t\t\t\t\tfrom \"./stage-mixin\";\nimport {MixinTemplatesType} \t\t\tfrom \"../templates-type-mixin\";\nimport {StatusTypes as Status} from 'salescenter.component.stage-block';\n\nconst DeliveryVuex = {\n\tprops: {\n\t\tstatus: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\tcounter: {\n\t\t\ttype: Number,\n\t\t\trequired: true\n\t\t},\n\t\ttiles: {\n\t\t\ttype: Array,\n\t\t\trequired: true\n\t\t},\n\t\tinstalled: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true\n\t\t},\n\t\tisCollapsible: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true\n\t\t},\n\t\tinitialCollapseState: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true\n\t\t},\n\t},\n\tdata()\n\t{\n\t\treturn {\n\t\t\tselectedDeliveryServiceName: null,\n\t\t}\n\t},\n\tmixins:[StageMixin, MixinTemplatesType],\n\tcomponents:\n\t\t{\n\t\t\t'stage-block-item'\t\t\t\t:\tBlock,\n\t\t\t'delivery-selector-block'\t\t:\tDeliverySelector,\n\t\t\t'shipment-view'\t\t\t\t\t:\tShipmentView,\n\t\t\t'uninstalled-delivery-block'\t:\tTileUnInstalled,\n\t\t},\n\tcomputed:\n\t\t{\n\t\t\tstatusClass()\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\t'salescenter-app-payment-by-sms-item-disabled-bg': this.installed === false || this.status === Status.disabled\n\t\t\t\t}\n\t\t\t},\n\t\t\tproductsPrice()\n\t\t\t{\n\t\t\t\treturn this.order.total.result;\n\t\t\t},\n\t\t\tshipmentId()\n\t\t\t{\n\t\t\t\treturn this.$root.$app.options.shipmentId;\n\t\t\t},\n\t\t\tconfigForBlock()\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\tcounter: this.counter,\n\t\t\t\t\ttitleName: this.selectedDeliveryServiceName,\n\t\t\t\t\tinstalled: this.installed,\n\t\t\t\t\tcollapsible: this.isCollapsible,\n\t\t\t\t\tchecked: this.counterCheckedMixin,\n\t\t\t\t\tshowHint: false,\n\t\t\t\t\tinitialCollapseState: this.initialCollapseState,\n\t\t\t\t}\n\t\t\t},\n\t\t\tconfig()\n\t\t\t{\n\t\t\t\tlet deliveryServiceId = null;\n\t\t\t\tif (this.$root.$app.options.hasOwnProperty('shipmentData')\n\t\t\t\t\t&& this.$root.$app.options.shipmentData.hasOwnProperty('deliveryServiceId')\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tdeliveryServiceId = this.$root.$app.options.shipmentData.deliveryServiceId;\n\t\t\t\t}\n\n\t\t\t\tlet deliveryPrice = null;\n\t\t\t\tif (this.$root.$app.options.hasOwnProperty('shipmentData')\n\t\t\t\t\t&& this.$root.$app.options.shipmentData.hasOwnProperty('deliveryPrice')\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tdeliveryPrice = this.$root.$app.options.shipmentData.deliveryPrice;\n\t\t\t\t}\n\n\t\t\t\tlet relatedPropsValues = {};\n\t\t\t\tif (this.$root.$app.options.hasOwnProperty('shipmentData')\n\t\t\t\t\t&& this.$root.$app.options.shipmentData.hasOwnProperty('propValues')\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\trelatedPropsValues = this.$root.$app.options.shipmentData.propValues;\n\t\t\t\t}\n\n\t\t\t\tlet relatedServicesValues = {};\n\t\t\t\tif (this.$root.$app.options.hasOwnProperty('shipmentData')\n\t\t\t\t\t&& this.$root.$app.options.shipmentData.hasOwnProperty('extraServicesValues')\n\t\t\t\t\t&& !Array.isArray(this.$root.$app.options.shipmentData.extraServicesValues)\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\trelatedServicesValues = this.$root.$app.options.shipmentData.extraServicesValues;\n\t\t\t\t}\n\n\t\t\t\tlet relatedPropsOptions = {};\n\t\t\t\tif (this.$root.$app.options.hasOwnProperty('deliveryOrderPropOptions')\n\t\t\t\t\t&& !Array.isArray(this.$root.$app.options.deliveryOrderPropOptions)\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\trelatedPropsOptions = this.$root.$app.options.deliveryOrderPropOptions;\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\tpersonTypeId: this.$root.$app.options.personTypeId,\n\t\t\t\t\tbasket: this.order.basket,\n\t\t\t\t\tcurrencySymbol: this.$root.$app.options.currencySymbol,\n\t\t\t\t\tcurrency: this.order.currency,\n\t\t\t\t\townerTypeId: this.$root.$app.options.ownerTypeId,\n\t\t\t\t\townerId: this.$root.$app.options.ownerId,\n\t\t\t\t\tsessionId: this.$root.$app.options.sessionId,\n\t\t\t\t\trelatedPropsValues,\n\t\t\t\t\trelatedPropsOptions,\n\t\t\t\t\trelatedServicesValues,\n\t\t\t\t\tdeliveryServiceId,\n\t\t\t\t\tresponsibleId: this.$root.$app.options.assignedById,\n\t\t\t\t\tdeliveryPrice,\n\t\t\t\t};\n\t\t\t},\n\t\t\tisViewTemplateMode()\n\t\t\t{\n\t\t\t\treturn this.$root.$app.options.templateMode === 'view';\n\t\t\t},\n\n\t\t\t...Vuex.mapState({\n\t\t\t\torder: state => state.orderCreation\n\t\t\t})\n\t\t},\n\tmethods:{\n\t\tsetTitleName(state)\n\t\t{\n\t\t\tthis.selectedDeliveryServiceName = state.deliveryServiceName;\n\t\t},\n\t\tsaveCollapsedOption(option)\n\t\t{\n\t\t\tthis.$emit('on-save-collapsed-option', 'delivery', option);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<stage-block-item\n\t\t\t:config=\"configForBlock\"\n\t\t\t:class=\"[statusClassMixin, statusClass]\"\n\t\t\t@on-item-hint.stop.prevent=\"onItemHint\"\n\t\t\t@on-adjust-collapsed=\"saveCollapsedOption\"\n\t\t>\n\t\t\t<template v-slot:block-title-title>${Loc.getMessage('SALESCENTER_DELIVERY_BLOCK_TITLE')}</template>\n\t\t\t<template v-slot:block-container>\n\t\t\t\t<div :class=\"containerClassMixin\">\n\t\t\t\t\t<template v-if=\"!installed\">\n\t\t\t\t\t\t<uninstalled-delivery-block :tiles=\"tiles\" \n\t\t\t\t\t\t\t\tv-on:on-tile-slider-close=\"onSliderClose\"/>\n\t\t\t\t\t</template>\n\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container-select\">\n\t\t\t\t\t\t\t<shipment-view\n\t\t\t\t\t\t\t\tv-if=\"isViewTemplateMode\"\n\t\t\t\t\t\t\t\t:id=\"shipmentId\"\n\t\t\t\t\t\t\t\t:productsPrice=\"productsPrice\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t</shipment-view>\n\t\t\t\t\t\t\t<delivery-selector-block v-else\n\t\t\t\t\t\t\t\t:config=\"config\" \n\t\t\t\t\t\t\t\t@delivery-settings-changed=\"onSliderClose\"\n\t\t\t\t\t\t\t\t@change=\"setTitleName\" \n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</template>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</stage-block-item>\n\t`\n};\n\nexport {\n\tDeliveryVuex\n}","import {Loc} \t\t\t\t\t\t\t\tfrom 'main.core';\nimport {Block} \t\t\tfrom 'salescenter.component.stage-block';\nimport {Uninstalled as TileUnInstalled} \tfrom \"./tile-collection/uninstalled\";\nimport {Installed as TileInstalled} \t\tfrom \"./tile-collection/installed\";\nimport {StageMixin} \t\t\t\t\t\tfrom \"./stage-mixin\";\n\nconst PaySystem = {\n\tprops: {\n\t\tstatus: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\tcounter: {\n\t\t\ttype: Number,\n\t\t\trequired: true\n\t\t},\n\t\ttiles: {\n\t\t\ttype: Array,\n\t\t\trequired: true\n\t\t},\n\t\tinstalled: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true\n\t\t},\n\t\ttitleItems: {\n\t\t\ttype: Array\n\t\t},\n\t\tinitialCollapseState: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true\n\t\t},\n\t},\n\tmixins:[StageMixin],\n\tcomponents:\n\t{\n\t\t'stage-block-item'\t\t\t\t\t:\tBlock,\n\t\t'tile-collection-installed-block'\t:\tTileInstalled,\n\t\t'tile-collection-uninstalled-block'\t:\tTileUnInstalled\n\t},\n\tmethods:\n\t{\n\t\tonItemHint(e)\n\t\t{\n\t\t\tBX.Salescenter.Manager.openHowToConfigDefaultPaySystem(e);\n\t\t},\n\t\tsaveCollapsedOption(option)\n\t\t{\n\t\t\tthis.$emit('on-save-collapsed-option', 'pay_system', option);\n\t\t},\n\n\t},\n\tcomputed:\n\t{\n\t\tconfigForBlock()\n\t\t{\n\t\t\treturn {\n\t\t\t\tcounter: this.counter,\n\t\t\t\ttitleItems: this.installed ? this.titleItems : [],\n\t\t\t\tinstalled: this.installed,\n\t\t\t\tcollapsible: true,\n\t\t\t\tchecked: this.counterCheckedMixin,\n\t\t\t\tshowHint: !this.installed,\n\t\t\t\tinitialCollapseState: this.initialCollapseState,\n\t\t\t}\n\t\t},\n\t\tstatusClass()\n\t\t{\n\t\t\treturn {\n\t\t\t\t'salescenter-app-payment-by-sms-item-disabled-bg': this.installed === false\n\t\t\t}\n\t\t},\n\t\ttitle()\n\t\t{\n\t\t\treturn this.installed === true\n\t\t\t\t? Loc.getMessage('SALESCENTER_PAYSYSTEM_SET_BLOCK_TITLE')\n\t\t\t\t: Loc.getMessage('SALESCENTER_PAYSYSTEM_BLOCK_TITLE');\n\t\t},\n\t},\n\n\ttemplate: `\n\t\t<stage-block-item\n\t\t\t:class=\"[statusClassMixin, statusClass]\"\n\t\t\t:config=\"configForBlock\"\n\t\t\t@on-item-hint.stop.prevent=\"onItemHint\"\n\t\t\t@on-tile-slider-close=\"onSliderClose\"\n\t\t\t@on-adjust-collapsed=\"saveCollapsedOption\"\n\t\t>\n\t\t\t<template v-slot:block-title-title>{{title}}</template>\n\t\t\t<template v-slot:block-hint-title>\n\t\t\t\t${Loc.getMessage('SALESCENTER_PAYSYSTEM_BLOCK_SETTINGS_TITLE')}\n\t\t\t</template>\n\t\t\t<template v-slot:block-container>\n\t\t\t\t<div\n\t\t\t\t\tv-if=\"!installed\"\n\t\t\t\t\tclass=\"salescenter-app-explanation\"\n\t\t\t\t>\n\t\t\t\t\t<div class=\"salescenter-app-explanation-img\"></div>\n\t\t\t\t\t<div class=\"salescenter-app-explanation-area\">\n\t\t\t\t\t\t<div class=\"salescenter-app-explanation-text\">\n\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_TERMINAL_PAYMENT_SYSTEM_SETUP_HINT')}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div :class=\"containerClassMixin\">\n\t\t\t\t\t<tile-collection-uninstalled-block \t:tiles=\"tiles\" v-if=\"!installed\" v-on:on-tile-slider-close=\"onSliderClose\"/>\n\t\t\t\t\t<tile-collection-installed-block :tiles=\"tiles\" v-on:on-tile-slider-close=\"onSliderClose\" v-else />\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</stage-block-item>\n\t`\n};\nexport {\n\tPaySystem\n}\n","export const ContextDictionary = Object.freeze({\n\tdeal: 'deal',\n\tsmartInvoice: 'smart_invoice',\n\tchat: 'chat',\n\tsms: 'sms',\n\timOpenlines: 'imopenlines_app',\n\tterminalList: 'terminal_list',\n});\n","import { Loc } from 'main.core';\nimport { Block } from 'salescenter.component.stage-block';\nimport { UserAvatar, MessageEditor } from 'salescenter.component.stage-block.sms-message';\nimport { ContextDictionary } from '../../const/context-dictionary';\nimport { StageMixin } from './stage-mixin';\n\nconst ChatMessage = {\n\tprops: {\n\t\tstatus: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\tcounter: {\n\t\t\ttype: Number,\n\t\t\trequired: true\n\t\t},\n\t\tmanager: {\n\t\t\ttype: Object,\n\t\t\trequired: true\n\t\t},\n\t\ttitleTemplate: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\tshowHint: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true\n\t\t},\n\t\teditorTemplate: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\teditorUrl: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\tselectedMode: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tmixins: [StageMixin],\n\tcomponents: {\n\t\t'stage-block-item':\tBlock,\n\t\t'chat-user-avatar-block': UserAvatar,\n\t\t'chat-message-editor-block': MessageEditor,\n\t},\n\tdata()\n\t{\n\t\treturn {\n\t\t\tcurrentSenderCode: null,\n\t\t\tsenders: [],\n\t\t\tpushedToUseBitrix24Notifications: null,\n\t\t\tsmsSenderListComponentKey: 0,\n\t\t};\n\t},\n\tcomputed: {\n\t\tconfigForBlock()\n\t\t{\n\t\t\treturn {\n\t\t\t\tcounter: this.counter,\n\t\t\t\tchecked: this.counterCheckedMixin,\n\t\t\t\tshowHint: true,\n\t\t\t};\n\t\t},\n\t\teditor()\n\t\t{\n\t\t\treturn {\n\t\t\t\ttemplate: this.editorTemplate,\n\t\t\t\turl: this.editorUrl\n\t\t\t};\n\t\t},\n\t\ttitle()\n\t\t{\n\t\t\treturn this.titleTemplate;\n\t\t},\n\t\tisMessageReadOnly()\n\t\t{\n\t\t\treturn this.$root.$app.context !== ContextDictionary.sms;\n\t\t},\n\t},\n\tcreated() {\n\t},\n\tmethods: {\n\t\tonItemHint(e)\n\t\t{\n\t\t\tBX.Salescenter.Manager.openSlider(this.$root.$app.options.urlSettingsCompanyContacts, {width: 1200} );\n\t\t},\n\t\topenBitrix24NotificationsHelp(event)\n\t\t{\n\t\t\tBX.Salescenter.Manager.openBitrix24NotificationsHelp(event);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<stage-block-item\t\t\t\n\t\t\t:config=\"configForBlock\"\n\t\t\t:class=\"statusClassMixin\"\n\t\t\tv-on:on-item-hint=\"onItemHint\"\n\t\t>\n\t\t\t<template v-slot:block-title-title>{{title}}</template>\n\t\t\t<template\n\t\t\t\tv-if=\"showHint\"\n\t\t\t\tv-slot:block-hint-title\n\t\t\t>\n\t\t\t\t${Loc.getMessage('SALESCENTER_LEFT_PAYMENT_COMPANY_CONTACTS_SHORTER_VERSION')}\n\t\t\t</template>\n\t\t\t<template v-slot:block-container>\n\t\t\t\t<div :class=\"containerClassMixin\" class=\"salescenter-app-payment-by-sms-item-container-offtop\">\n\t\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container-sms\">\n\t\t\t\t\t\t<chat-user-avatar-block :manager=\"manager\"/>\n\t\t\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container-sms-content\">\n\t\t\t\t\t\t\t<chat-message-editor-block :editor=\"editor\" :isReadOnly=\"isMessageReadOnly\" :selectedMode=\"selectedMode\"/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</stage-block-item>\n\t`\n};\nexport {\n\tChatMessage\n};\n","import { Loc } from 'main.core';\nimport { Block } from 'salescenter.component.stage-block';\nimport { StageList } from 'salescenter.component.stage-block.automation';\nimport * as AutomationStage from 'salescenter.automation-stage';\nimport { StageMixin } from './stage-mixin';\nimport { MixinTemplatesType } from '../templates-type-mixin';\n\nconst Automation = {\n\tprops: {\n\t\tstatus: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tcounter: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\tstageOnOrderPaid: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t},\n\t\tstageOnDeliveryFinished: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t},\n\t\titems: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tinitialCollapseState: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tmixins: [StageMixin, MixinTemplatesType],\n\tdata()\n\t{\n\t\treturn {\n\t\t\tpaymentStages: [],\n\t\t\tshipmentStages: [],\n\t\t};\n\t},\n\tcomponents:\n\t\t{\n\t\t\t'stage-block-item':\tBlock,\n\t\t\t'stage-item-list':\tStageList,\n\t\t},\n\tmethods:\n\t\t{\n\t\t\tsaveCollapsedOption(option)\n\t\t\t{\n\t\t\t\tthis.$emit('on-save-collapsed-option', 'automation', option);\n\t\t\t},\n\n\t\t\tupdatePaymentStage(e)\n\t\t\t{\n\t\t\t\tconst newStageId = e.data;\n\t\t\t\tthis.paymentStages.forEach((stage) => {\n\t\t\t\t\tstage.selected = stage.id === newStageId;\n\t\t\t\t});\n\n\t\t\t\tthis.$root.$app.stageOnOrderPaid = e.data;\n\t\t\t},\n\n\t\t\tupdateShipmentStage(e)\n\t\t\t{\n\t\t\t\tconst newStageId = e.data;\n\t\t\t\tthis.shipmentStages.forEach((stage) => {\n\t\t\t\t\tstage.selected = stage.id === newStageId;\n\t\t\t\t});\n\n\t\t\t\tthis.$root.$app.stageOnDeliveryFinished = e.data;\n\t\t\t},\n\t\t\tinitStages(stages, currentValue)\n\t\t\t{\n\t\t\t\tObject.values(this.items).forEach((options) => {\n\t\t\t\t\toptions.selected = (\n\t\t\t\t\t\t(!currentValue && !options.hasOwnProperty('id'))\n\t\t\t\t\t\t|| (options.id === currentValue)\n\t\t\t\t\t);\n\t\t\t\t\tstages.push(AutomationStage.Factory.create(options));\n\t\t\t\t});\n\t\t\t},\n\t\t},\n\tcomputed:\n\t\t{\n\t\t\tconfigForBlock()\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\tcounter: this.counter,\n\t\t\t\t\tchecked: this.counterCheckedMixin,\n\t\t\t\t\tcollapsible: true,\n\t\t\t\t\tinitialCollapseState: this.initialCollapseState,\n\t\t\t\t\ttitleName: this.selectedStage.name,\n\t\t\t\t};\n\t\t\t},\n\t\t\tselectedStage()\n\t\t\t{\n\t\t\t\tconst stages = this.isPayment ? this.paymentStages : this.shipmentStages;\n\n\t\t\t\treturn stages.find((stage) => {\n\t\t\t\t\treturn stage.selected;\n\t\t\t\t});\n\t\t\t},\n\t\t\tisPayment()\n\t\t\t{\n\t\t\t\treturn (\n\t\t\t\t\tthis.$root.$app.options.mode === 'payment_delivery'\n\t\t\t\t\t|| this.$root.$app.options.mode === 'payment'\n\t\t\t\t\t|| this.$root.$app.options.mode === 'terminal_payment'\n\t\t\t\t);\n\t\t\t},\n\t\t\tisHideDeliveryStage()\n\t\t\t{\n\t\t\t\treturn this.$root.$app.options.mode === 'payment' || this.$root.$app.options.mode === 'terminal_payment';\n\t\t\t},\n\t\t},\n\tcreated()\n\t{\n\t\tif (this.isPayment)\n\t\t{\n\t\t\tthis.initStages(this.paymentStages, this.stageOnOrderPaid);\n\t\t}\n\n\t\tthis.initStages(this.shipmentStages, this.stageOnDeliveryFinished);\n\t},\n\ttemplate: `\n\t\t<stage-block-item\n\t\t\t:config=\"configForBlock\"\n\t\t\t:class=\"statusClassMixin\"\n\t\t\t@on-adjust-collapsed=\"saveCollapsedOption\"\n\t\t>\n\t\t\t<template v-slot:block-title-title>${Loc.getMessage('SALESCENTER_AUTOMATION_BLOCK_TITLE')}</template>\n\t\t\t<template v-slot:block-container>\n\t\t\t\t<div :class=\"containerClassMixin\">\n\t\t\t\t\t<div v-if=\"isPayment\">\n\t\t\t\t\t\t<stage-item-list\n\t\t\t\t\t\t\tv-on:on-choose-select-option=\"updatePaymentStage($event)\"\n\t\t\t\t\t\t\t:stages=\"paymentStages\"\n\t\t\t\t\t\t\t:editable=\"editable\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<template v-slot:stage-list-text>${Loc.getMessage('SALESCENTER_AUTOMATION_BLOCK_TEXT')}</template>\n\t\t\t\t\t\t</stage-item-list>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div v-if=\"!isHideDeliveryStage\">\n\t\t\t\t\t\t<stage-item-list\n\t\t\t\t\t\t\tv-on:on-choose-select-option=\"updateShipmentStage($event)\"\n\t\t\t\t\t\t\t:stages=\"shipmentStages\"\n\t\t\t\t\t\t\t:editable=\"editable\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<template v-slot:stage-list-text>${Loc.getMessage('SALESCENTER_AUTOMATION_DELIVERY_FINISHED')}</template>\n\t\t\t\t\t\t</stage-item-list>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</stage-block-item>\n\t`,\n};\nexport {\n\tAutomation,\n};\n","import {Loc} from 'main.core';\n\nexport default {\n\tprops: {\n\t\tbuttonLabel: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tbuttonEnabled: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t\tshowWhatClientSeesControl: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t\tisFacebookForm: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tcomputed: {\n\t\tbuttonClass()\n\t\t{\n\t\t\treturn {'salescenter-app-payment-by-sms-item-disabled': this.buttonEnabled === false};\n\t\t},\n\t\tshowSubmitCompilationLinkToFacebookButton()\n\t\t{\n\t\t\tconst isCompilationMode = this.$store.getters['orderCreation/isCompilationMode'];\n\t\t\treturn this.isFacebookForm && isCompilationMode;\n\t\t},\n\t},\n\tmethods: {\n\t\tshowWhatClientSees(event)\n\t\t{\n\t\t\tBX.Salescenter.Manager.openWhatClientSee(event);\n\t\t},\n\t\tsubmit(event)\n\t\t{\n\t\t\tthis.$emit('on-submit', event);\n\t\t},\n\t\tsubmitCompilationLinkToFacebook(event)\n\t\t{\n\t\t\tthis.$emit('on-submit-compilation-link-to-facebook', event);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div\n\t\t\t:class=\"buttonClass\"\n\t\t\tclass=\"salescenter-app-payment-by-sms-item-show salescenter-app-payment-by-sms-item salescenter-app-payment-by-sms-item-send\"\n\t\t>\n\t\t\t<div class=\"salescenter-app-payment-by-sms-item-counter\">\n\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-counter-rounder\"></div>\n\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-counter-line\"></div>\n\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-counter-number\"></div>\n\t\t\t</div>\n\t\t\t<div class=\"\">\n\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container\">\n\t\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container-payment\">\n\t\t\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container-payment-inline\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t@click=\"submit($event)\"\n\t\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-lg ui-btn-success ui-btn-round\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{{buttonLabel}}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tv-if=\"showSubmitCompilationLinkToFacebookButton\"\n\t\t\t\t\t\t\t\t@click=\"submitCompilationLinkToFacebook($event)\"\n\t\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-lg ui-btn-light-border ui-btn-round\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_SEND_COMPILATION_LINK_TO_FACEBOOK')}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tv-if=\"showWhatClientSeesControl\"\n\t\t\t\t\t\t\t\t@click=\"showWhatClientSees\"\n\t\t\t\t\t\t\t\tclass=\"salescenter-app-add-item-link\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_SEND_ORDER_BY_SMS_SENDER_TEMPLATE_WHAT_DOES_CLIENT_SEE')}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`\n}\n","import {\n\tTimeLineItemBlock as Item,\n\tTimeLineItemPaymentBlock as PaymentItem,\n\tTimeLineItemCustomBlock as CustomItem,\n} from 'salescenter.component.stage-block.timeline';\nimport { Payment, Custom } from 'salescenter.timeline';\n\nconst TimeLine = {\n\tprops: {\n\t\ttimelineItems: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomponents: {\n\t\t'timeline-item-block': Item,\n\t\t'timeline-item-payment-block': PaymentItem,\n\t\t'timeline-item-custom-block': CustomItem,\n\t},\n\tmethods: {\n\t\tisPayment(item)\n\t\t{\n\t\t\treturn item.type === Payment.type();\n\t\t},\n\t\tisCustom(item)\n\t\t{\n\t\t\treturn item.type === Custom.type();\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"salescenter-app-payment-by-sms-timeline\">\n\t\t\t<template v-for=\"(item) in timelineItems\">\n\t\t\t\t<timeline-item-payment-block :item=\"item\" v-if=\"isPayment(item)\"/>\n\t\t\t\t<timeline-item-custom-block :item=\"item\" v-else-if=\"isCustom(item)\"/>\n\t\t\t\t<timeline-item-block :item=\"item\" v-else/>\n\t\t\t</template>\n\t\t</div>\n\t`,\n};\n\nexport {\n\tTimeLine,\n};\n","import {Loc, Uri} from 'main.core';\nimport {StatusTypes as Status} from 'salescenter.component.stage-block';\nimport {MenuManager} from \"main.popup\";\nimport {Manager} from 'salescenter.manager';\nimport {Block} from 'salescenter.component.stage-block';\nimport {StageMixin} from \"./stage-mixin\";\nimport \"ui.icons.disk\";\nimport type {Document, Template} from \"../../app\";\nimport {Vuex} from \"ui.vue.vuex\";\n\nconst DocumentSelector = {\n\tprops: {\n\t\tcounter: {\n\t\t\ttype: Number,\n\t\t\trequired: true\n\t\t},\n\t\ttemplateAddUrl: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t},\n\t},\n\tmixins: [StageMixin],\n\tcomponents: {\n\t\t'stage-block-item':\tBlock,\n\t},\n\tcomputed: {\n\t\tstatus()\n\t\t{\n\t\t\tif (\n\t\t\t\tthis.model\n\t\t\t\t&& (\n\t\t\t\t\tthis.model.templates\n\t\t\t\t\t&& this.model.templates.length\n\t\t\t\t)\n\t\t\t\t|| (\n\t\t\t\t\tthis.model.documents\n\t\t\t\t\t&& this.model.documents.length\n\t\t\t\t)\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn Status.complete;\n\t\t\t}\n\n\t\t\tif(\n\t\t\t\tthis.templateAddUrl\n\t\t\t\t&& this.templateAddUrl.length\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn Status.current;\n\t\t\t}\n\n\t\t\treturn Status.disabled;\n\t\t},\n\t\tconfigForBlock()\n\t\t{\n\t\t\treturn {\n\t\t\t\tcounter: this.counter,\n\t\t\t\ttitleItems: [],\n\t\t\t\tinstalled: true,\n\t\t\t\tcollapsible: false,\n\t\t\t\tchecked: this.counterCheckedMixin,\n\t\t\t\tshowHint: false,\n\t\t\t\tinitialCollapseState: false,\n\t\t\t}\n\t\t},\n\t\tgetDocumentTitle(): ?string\n\t\t{\n\t\t\tconst currentDocument = this.getCurrentDocument();\n\t\t\tif (currentDocument)\n\t\t\t{\n\t\t\t\treturn currentDocument.title;\n\t\t\t}\n\n\t\t\treturn Loc.getMessage('SALESCENTER_DOCUMENT_SELECTOR_BLOCK_CREATE_NEW_TEMPLATE');\n\t\t},\n\t\twithStamps(): string\n\t\t{\n\t\t\tlet isWithStamps = '';\n\t\t\tconst currentDocument = this.getCurrentDocument();\n\t\t\tif (currentDocument)\n\t\t\t{\n\t\t\t\tif(currentDocument.isWithStamps)\n\t\t\t\t{\n\t\t\t\t\tisWithStamps = Loc.getMessage('SALESCENTER_DOCUMENT_SELECTOR_BLOCK_WITH_SIGNS');\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tisWithStamps = Loc.getMessage('SALESCENTER_DOCUMENT_SELECTOR_BLOCK_WITHOUT_SIGNS');\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn isWithStamps;\n\t\t},\n\t\thasData()\n\t\t{\n\t\t\tconst document = this.getCurrentDocument();\n\n\t\t\treturn (document && document.detailUrl);\n\t\t},\n\t\t...Vuex.mapState({\n\t\t\tmodel: state => state.documentSelector,\n\t\t})\n\t},\n\tmethods: {\n\t\thandleDocumentClick({target})\n\t\t{\n\t\t\tif (this.getCurrentDocument() !== null)\n\t\t\t{\n\t\t\t\tthis.openSelectorMenu(target);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.openTemplatesList();\n\t\t\t}\n\t\t},\n\t\topenSelectorMenu(bindElement)\n\t\t{\n\t\t\tMenuManager.show({\n\t\t\t\tid: 'payment-document-selector',\n\t\t\t\tbindElement,\n\t\t\t\titems: this.prepareSelectorMenuItems(),\n\t\t\t\tcloseByEsc: true,\n\t\t\t\tcacheable: false,\n\t\t\t});\n\t\t},\n\t\tcloseSelectorMenu()\n\t\t{\n\t\t\tMenuManager.destroy('payment-document-selector');\n\t\t},\n\t\tprepareSelectorMenuItems()\n\t\t{\n\t\t\tconst items = [];\n\t\t\tif (this.model.documents)\n\t\t\t{\n\t\t\t\tfor (const document of this.model.documents)\n\t\t\t\t{\n\t\t\t\t\titems.push({\n\t\t\t\t\t\ttext: document.title,\n\t\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\t\tthis.closeSelectorMenu();\n\t\t\t\t\t\t\tthis.$store.dispatch('documentSelector/setBoundDocumentId', {boundDocumentId: document.id});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst templateListItem = {\n\t\t\t\ttext: Loc.getMessage('SALESCENTER_DOCUMENT_SELECTOR_BLOCK_CREATE_NEW_DOCUMENT'),\n\t\t\t\titems: [],\n\t\t\t};\n\t\t\tif (this.model.templates)\n\t\t\t{\n\t\t\t\tif (items.length > 0)\n\t\t\t\t{\n\t\t\t\t\titems.push({delimiter: true});\n\t\t\t\t}\n\t\t\t\tfor (const template of this.model.templates)\n\t\t\t\t{\n\t\t\t\t\ttemplateListItem.items.push({\n\t\t\t\t\t\ttext: template.title,\n\t\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\t\tthis.closeSelectorMenu();\n\t\t\t\t\t\t\tthis.$store.commit('documentSelector/setSelectedTemplateId', {selectedTemplateId: template.id});\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (this.templateAddUrl)\n\t\t\t{\n\t\t\t\tif (templateListItem.items.length > 0)\n\t\t\t\t{\n\t\t\t\t\ttemplateListItem.items.push({delimiter: true});\n\t\t\t\t}\n\t\t\t\ttemplateListItem.items.push({\n\t\t\t\t\ttext: Loc.getMessage('SALESCENTER_DOCUMENT_SELECTOR_BLOCK_CREATE_NEW_TEMPLATE'),\n\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\tthis.closeSelectorMenu();\n\t\t\t\t\t\tthis.openTemplatesList();\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t\tif (templateListItem.items.length > 0)\n\t\t\t{\n\t\t\t\titems.push(templateListItem);\n\t\t\t}\n\n\t\t\treturn items;\n\t\t},\n\t\topenTemplatesList()\n\t\t{\n\t\t\tManager.openSlider(this.templateAddUrl, {\n\t\t\t\twidth: 930,\n\t\t\t}).then(() => {\n\t\t\t\tthis.$store.dispatch('documentSelector/loadTemplates');\n\t\t\t});\n\t\t},\n\t\thandleEditDocumentClick()\n\t\t{\n\t\t\tconst currentDocument = this.getCurrentDocument();\n\t\t\tif (currentDocument.detailUrl)\n\t\t\t{\n\t\t\t\tManager.openSlider(currentDocument.detailUrl, {\n\t\t\t\t\twidth: 980,\n\t\t\t\t}).then((slider) => {\n\t\t\t\t\tconst document = slider.getData().get('document');\n\t\t\t\t\tif (document)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$store.dispatch('documentSelector/addDocument', {document});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tgetCurrentDocument(): ?Document\n\t\t{\n\t\t\tlet document = null;\n\t\t\tif (this.model.boundDocumentId > 0)\n\t\t\t{\n\t\t\t\tdocument = this.getDocumentById(this.model.boundDocumentId);\n\t\t\t}\n\t\t\tif (!document && this.model.selectedTemplateId > 0)\n\t\t\t{\n\t\t\t\tdocument = this.getStubDocumentByTemplate(this.model.selectedTemplateId);\n\t\t\t}\n\t\t\tif (!document)\n\t\t\t{\n\t\t\t\tconst documents = this.model.documents;\n\t\t\t\tif (documents && documents[0])\n\t\t\t\t{\n\t\t\t\t\tdocument = documents[0];\n\t\t\t\t\tthis.$store.dispatch('documentSelector/setBoundDocumentId', {boundDocumentId: document.id});\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!document)\n\t\t\t{\n\t\t\t\tconst templates = this.model.templates;\n\t\t\t\tif (templates && templates[0])\n\t\t\t\t{\n\t\t\t\t\tdocument = this.getStubDocumentByTemplate(templates[0].id);\n\t\t\t\t\tthis.$store.commit('documentSelector/setSelectedTemplateId', {selectedTemplateId: templates[0].id});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn document;\n\t\t},\n\t\tgetDocumentById(id: number): ?Document\n\t\t{\n\t\t\tfor (const document: Document of this.model.documents)\n\t\t\t{\n\t\t\t\tif (document.id === id)\n\t\t\t\t{\n\t\t\t\t\treturn document;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\t\tgetTemplateById(id: number): ?Template\n\t\t{\n\t\t\tfor (const template: Template of this.model.templates)\n\t\t\t{\n\t\t\t\tif (template.id === id)\n\t\t\t\t{\n\t\t\t\t\treturn template;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\t\tgetStubDocumentByTemplate(templateId: number): ?Document\n\t\t{\n\t\t\tconst template = this.getTemplateById(templateId);\n\t\t\tif (!template)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tconst paymentId = this.$root.$app.options.paymentId || 0;\n\t\t\tlet title = null;\n\t\t\tlet detailUrl = null;\n\t\t\tif (paymentId > 0)\n\t\t\t{\n\t\t\t\ttitle = Loc.getMessage('SALESCENTER_DOCUMENT_SELECTOR_BLOCK_DOCUMENT_NEW_SUFFIX', {\n\t\t\t\t\t'#TITLE#': template.title\n\t\t\t\t});\n\t\t\t\tdetailUrl = Uri.addParam(template.documentCreationUrl, {\n\t\t\t\t\tvalues: {\n\t\t\t\t\t\t_paymentId: paymentId,\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\ttitle = Loc.getMessage('SALESCENTER_DOCUMENT_SELECTOR_BLOCK_DOCUMENT_CREATED_LATER_SUFFIX', {\n\t\t\t\t\t'#TITLE#': template.title\n\t\t\t\t});\n\t\t\t\tdetailUrl = null;\n\t\t\t}\n\t\t\treturn {\n\t\t\t\tid: 0,\n\t\t\t\ttitle,\n\t\t\t\tdetailUrl,\n\t\t\t\tisWithStamps: template.isWithStamps,\n\t\t\t}\n\t\t},\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<stage-block-item\n\t\t\t:class=\"statusClassMixin\"\n\t\t\t:config=\"configForBlock\"\n\t\t>\n\t\t\t<template v-slot:block-title-title>${Loc.getMessage('SALESCENTER_DOCUMENT_SELECTOR_BLOCK_TITLE')}</template>\n\t\t\t<template v-slot:block-container>\n\t\t\t\t<div :class=\"containerClassMixin\">\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t<div class=\"salescenter-app-payment-item-container-document-selector\">\n\t\t\t\t\t\t<div class=\"salescenter-app-payment-item-container-document-selector-selector\">\n\t\t\t\t\t\t\t<div class=\"salescenter-app-payment-item-container-document-selector-selector-file\">\n\t\t\t\t\t\t\t\t<div class=\"ui-icon ui-icon-lg ui-icon-file-pdf\"><i></i></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"salescenter-app-payment-item-container-document-selector-title\">\n\t\t\t\t\t\t\t\t<div \n\t\t\t\t\t\t\t\t\tref=\"selectorNode\"\n\t\t\t\t\t\t\t\t\tclass=\"salescenter-app-payment-item-container-document-selector-title-button\"\n\t\t\t\t\t\t\t\t\t@click=\"handleDocumentClick\"\n\t\t\t\t\t\t\t\t>{{getDocumentTitle}}</div>\n\t\t\t\t\t\t\t\t<div class=\"salescenter-app-payment-item-container-document-selector-title-sign\">{{withStamps}}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tv-if=\"hasData\"\n\t\t\t\t\t\t\tclass=\"salescenter-app-payment-item-container-document-selector-edit\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div \n\t\t\t\t\t\t\t\tclass=\"salescenter-app-payment-item-container-document-selector-edit-button\"\n\t\t\t\t\t\t\t\t@click=\"handleEditDocumentClick\"\n\t\t\t\t\t\t\t>\n                              <svg width=\"14\" height=\"14\" viewBox=\"0 0 14 14\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                                <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M11.4359 0.03479L13.9865 2.61221L4.00879 12.563L1.45822 9.98561L11.4359 0.03479ZM0.0256074 13.6726C0.00148857 13.7639 0.0273302 13.8603 0.0927957 13.9275C0.159984 13.9947 0.25646 14.0205 0.347767 13.9947L3.19896 13.2265L0.793965 10.8223L0.0256074 13.6726Z\" fill=\"#525C69\"/>\n                              </svg>\n                              ${Loc.getMessage('SALESCENTER_RIGHT_ACTION_EDIT')}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</stage-block-item>\n\t`\n};\n\nexport\n{\n\tDocumentSelector\n}","import { ajax as Ajax, Loc} from 'main.core';\nimport {StatusTypes as Status} from 'salescenter.component.stage-block';\nimport * as Tile from 'salescenter.tile';\nimport * as TimeLineItem from 'salescenter.timeline';\nimport {UI} from 'ui.notification';\nimport {MixinTemplatesType} from '../templates-type-mixin';\nimport {Cashbox} from '../stage-blocks/cashbox';\nimport Product from '../stage-blocks/product';\nimport {DeliveryVuex} from '../stage-blocks/delivery-vuex';\nimport {PaySystem} from '../stage-blocks/paysystem';\nimport {ChatMessage} from '../stage-blocks/chat-message';\nimport {Automation} from '../stage-blocks/automation';\nimport {StageMixin} from '../stage-blocks/stage-mixin';\nimport Send from '../deal-receiving-payment/stage-blocks/send';\nimport {TimeLine} from '../stage-blocks/timeline';\nimport {DocumentSelector} from '../stage-blocks/document-selector';\n\nexport default {\n\tcomponents: {\n\t\t'chat-message-block': ChatMessage,\n\t\t'product-block': Product,\n\t\t'paysystem-block': PaySystem,\n\t\t'cashbox-block': Cashbox,\n\t\t'delivery-block': DeliveryVuex,\n\t\t'automation-block': Automation,\n\t\t'send-block': Send,\n\t\t'timeline-block': TimeLine,\n\t\t'document-selector-block': DocumentSelector,\n\t},\n\tdata()\n\t{\n\t\tlet stages = {\n\t\t\tmessage: {\n\t\t\t\tstatus: Status.complete,\n\t\t\t\tmanager: this.$root.$app.options.entityResponsible,\n\t\t\t\ttitleTemplate: Loc.getMessage('SALESCENTER_APP_CHAT_MESSAGE_TITLE'),\n\t\t\t\tshowHint: this.$root.$app.options.templateMode !== 'view',\n\t\t\t\teditorTemplate: this.$root.$app.sendingMethodDesc.text,\n\t\t\t\teditorUrl: this.$root.$app.orderPublicUrl,\n\t\t\t\tselectedMode: 'payment',\n\t\t\t},\n\t\t\tproduct: {\n\t\t\t\tstatus: this.$root.$app.options.basket && this.$root.$app.options.basket.length > 0\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.current,\n\t\t\t\ttitle: this.$root.$app.options.templateMode === 'view'\n\t\t\t\t\t? Loc.getMessage('SALESCENTER_PRODUCT_BLOCK_TITLE_PAYMENT_VIEW')\n\t\t\t\t\t: Loc.getMessage('SALESCENTER_PRODUCT_BLOCK_TITLE_SHORT'),\n\t\t\t\thintTitle: this.$root.$app.options.templateMode === 'view'\n\t\t\t\t\t? ''\n\t\t\t\t\t: Loc.getMessage('SALESCENTER_PRODUCT_SET_BLOCK_TITLE_SHORT'),\n\t\t\t},\n\t\t\tpaysystem: {\n\t\t\t\tstatus: this.$root.$app.options.paySystemList.isSet\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled,\n\t\t\t\ttiles: this.getTileCollection(this.$root.$app.options.paySystemList.items),\n\t\t\t\tinstalled: this.$root.$app.options.paySystemList.isSet,\n\t\t\t\ttitleItems: this.getTitleItems(this.$root.$app.options.paySystemList.items),\n\t\t\t\tinitialCollapseState: this.$root.$app.options.isPaySystemCollapsed\n\t\t\t\t\t? this.$root.$app.options.isPaySystemCollapsed === 'Y'\n\t\t\t\t\t: this.$root.$app.options.paySystemList.isSet,\n\t\t\t},\n\t\t\tcashbox: {},\n\t\t\tautomation: {},\n\t\t\tdocumentSelector: {\n\t\t\t\tstatus: Status.complete,\n\t\t\t},\n\t\t};\n\n\t\tif (this.$root.$app.options.hasOwnProperty('deliveryList'))\n\t\t{\n\t\t\tstages.delivery = {\n\t\t\t\tisHidden: (\n\t\t\t\t\tthis.$root.$app.options.templateMode === 'view'\n\t\t\t\t\t&& parseInt(this.$root.$app.options.shipmentId) <= 0\n\t\t\t\t),\n\t\t\t\tstatus: this.$root.$app.options.deliveryList.isInstalled\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled,\n\t\t\t\ttiles: this.getTileCollection(this.$root.$app.options.deliveryList.items),\n\t\t\t\tinstalled: this.$root.$app.options.deliveryList.isInstalled,\n\t\t\t\tinitialCollapseState: this.$root.$app.options.isDeliveryCollapsed\n\t\t\t\t\t? this.$root.$app.options.isDeliveryCollapsed === 'Y'\n\t\t\t\t\t: this.$root.$app.options.deliveryList.isInstalled,\n\t\t\t};\n\t\t}\n\n\t\tif (this.$root.$app.options.cashboxList.hasOwnProperty('items'))\n\t\t{\n\t\t\tstages.cashbox = {\n\t\t\t\tstatus: this.$root.$app.options.cashboxList.isSet\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled,\n\t\t\t\ttiles: this.getTileCollection(this.$root.$app.options.cashboxList.items),\n\t\t\t\tinstalled: this.$root.$app.options.cashboxList.isSet,\n\t\t\t\ttitleItems: this.getTitleItems(this.$root.$app.options.cashboxList.items),\n\t\t\t\tinitialCollapseState: this.$root.$app.options.isCashboxCollapsed\n\t\t\t\t\t? this.$root.$app.options.isCashboxCollapsed === 'Y'\n\t\t\t\t\t: this.$root.$app.options.cashboxList.isSet,\n\t\t\t};\n\t\t}\n\n\t\tif (this.$root.$app.options.isAutomationAvailable)\n\t\t{\n\t\t\tstages.automation = {\n\t\t\t\tstatus: Status.complete,\n\t\t\t\tstageOnOrderPaid: this.$root.$app.options.stageOnOrderPaid,\n\t\t\t\tstageOnDeliveryFinished: this.$root.$app.options.stageOnDeliveryFinished,\n\t\t\t\titems: this.$root.$app.options.entityStageList,\n\t\t\t\tinitialCollapseState: this.$root.$app.options.isAutomationCollapsed\n\t\t\t\t\t? this.$root.$app.options.isAutomationCollapsed === 'Y'\n\t\t\t\t\t: false,\n\t\t\t};\n\t\t}\n\n\t\tif (this.$root.$app.options.hasOwnProperty('timeline'))\n\t\t{\n\t\t\tstages.timeline = {\n\t\t\t\titems: this.getTimelineCollection(this.$root.$app.options.timeline)\n\t\t\t}\n\t\t}\n\n\t\tif (this.$root.$app.hasOwnProperty('documentSelector'))\n\t\t{\n\t\t\tif (this.$root.$app.documentSelector.templateAddUrl)\n\t\t\t{\n\t\t\t\tstages.documentSelector.templateAddUrl = this.$root.$app.documentSelector.templateAddUrl;\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\tstages: stages,\n\t\t}\n\t},\n\tmixins: [\n\t\tStageMixin,\n\t\tMixinTemplatesType\n\t],\n\tcomputed: {\n\t\tisSendAllowed()\n\t\t{\n\t\t\treturn this.$store.getters['orderCreation/isAllowedSubmit'];\n\t\t},\n\t\thasStageTimeLine()\n\t\t{\n\t\t\treturn this.stages.timeline.hasOwnProperty('items') && this.stages.timeline.items.length > 0;\n\t\t},\n\t\thasStageAutomation()\n\t\t{\n\t\t\treturn this.stages.automation.hasOwnProperty('items');\n\t\t},\n\t\thasStageCashBox()\n\t\t{\n\t\t\treturn this.stages.cashbox.hasOwnProperty('tiles');\n\t\t},\n\t\tsubmitButtonLabel()\n\t\t{\n\t\t\treturn this.editable && !this.$root.$app?.compilation\n\t\t\t\t? Loc.getMessage('SALESCENTER_SEND')\n\t\t\t\t: Loc.getMessage('SALESCENTER_RESEND')\n\t\t\t\t;\n\t\t},\n\t\tisFacebookForm()\n\t\t{\n\t\t\treturn this.$root.$app?.connector === 'facebook' && this.$root.$app?.isAllowedFacebookRegion;\n\t\t},\n\t\tisShowDocumentSelector()\n\t\t{\n\t\t\treturn this.$root.$app.hasOwnProperty('documentSelector');\n\t\t},\n\t},\n\tmethods: {\n\t\tinitCounter()\n\t\t{\n\t\t\tthis.counter = 1;\n\t\t},\n\t\tgetTimelineCollection(items)\n\t\t{\n\t\t\tlet list = [];\n\n\t\t\tObject.values(items).forEach((options) => {\n\t\t\t\tlist.push(TimeLineItem.Factory.create(options))\n\t\t\t});\n\n\t\t\treturn list;\n\t\t},\n\t\tgetTileCollection(items)\n\t\t{\n\t\t\tlet tiles = [];\n\n\t\t\tObject.values(items).forEach((options) => {\n\t\t\t\ttiles.push(Tile.Factory.create(options))\n\t\t\t});\n\n\t\t\treturn tiles;\n\t\t},\n\t\tgetTitleItems(items)\n\t\t{\n\t\t\tlet result = [];\n\t\t\titems.forEach((item) => {\n\t\t\t\tif (![Tile.More.type(), Tile.Offer.type()].includes(item.type))\n\t\t\t\t{\n\t\t\t\t\tresult.push(item);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn result;\n\t\t},\n\t\tstageRefresh(e, type)\n\t\t{\n\t\t\tAjax.runComponentAction(\n\t\t\t\t'bitrix:salescenter.app',\n\t\t\t\t'getAjaxData',\n\t\t\t\t{\n\t\t\t\t\tmode: 'class',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\ttype: type,\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t).then(function(response) {\n\t\t\t\tif (response.data)\n\t\t\t\t{\n\t\t\t\t\tthis.refreshTilesByType(response.data, type);\n\t\t\t\t}\n\t\t\t}.bind(this),\n\t\t\tfunction() {\n\t\t\t\tUI.Notification.Center.notify({\n\t\t\t\t\tcontent: Loc.getMessage('SALESCENTER_DATA_UPDATE_ERROR'),\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\trefreshTilesByType(data, type)\n\t\t{\n\t\t\tif(type === 'PAY_SYSTEM')\n\t\t\t{\n\t\t\t\tthis.stages.paysystem.status = data.isSet\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled;\n\t\t\t\tthis.stages.paysystem.tiles = this.getTileCollection(data.items);\n\t\t\t\tthis.stages.paysystem.installed = data.isSet;\n\t\t\t\tthis.stages.paysystem.titleItems = this.getTitleItems(data.items);\n\t\t\t}\n\t\t\telse if(type === 'CASHBOX')\n\t\t\t{\n\t\t\t\tthis.stages.cashbox.status = data.isSet\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled;\n\t\t\t\tthis.stages.cashbox.tiles = this.getTileCollection(data.items);\n\t\t\t\tthis.stages.cashbox.installed = data.isSet;\n\t\t\t\tthis.stages.cashbox.titleItems = this.getTitleItems(data.items);\n\t\t\t}\n\t\t\telse if(type === 'DELIVERY')\n\t\t\t{\n\t\t\t\tthis.stages.delivery.status = data.isSet\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled;\n\t\t\t\tthis.stages.delivery.tiles = this.getTileCollection(data.items);\n\t\t\t\tthis.stages.delivery.installed = data.isInstalled;\n\t\t\t}\n\t\t},\n\t\tonSend(event)\n\t\t{\n\t\t\tthis.$emit('stage-block-send-on-send', event);\n\t\t},\n\t\tonSendCompilationLinkToFacebook(event)\n\t\t{\n\t\t\tthis.$emit('stage-block-send-on-send-compilation-link-to-facebook', event);\n\t\t},\n\t\tchangeProvider(value)\n\t\t{\n\t\t\tthis.$root.$app.sendingMethodDesc.provider = value;\n\t\t\tBX.userOptions.save('salescenter', 'payment_sms_provider_options', 'latest_selected_provider', value);\n\t\t},\n\t\tsaveCollapsedOption(type, value)\n\t\t{\n\t\t\tBX.userOptions.save('salescenter', 'add_payment_collapse_options', type, value);\n\t\t},\n\t\tonProductFormModeChange()\n\t\t{\n\t\t\tconst isCompilationMode = this.$store.getters['orderCreation/isCompilationMode'];\n\t\t\tif (isCompilationMode)\n\t\t\t{\n\t\t\t\tthis.stages.delivery.status = Status.disabled;\n\n\t\t\t\tthis.stages.message.selectedMode = 'compilation';\n\t\t\t\tthis.$root.$app.sendingMethodDesc.text = this.$root.$app.sendingMethodDesc.text_modes.compilation;\n\t\t\t\tthis.stages.message.editorTemplate = this.$root.$app.sendingMethodDesc.text_modes.compilation;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.stages.delivery.status = this.$root.$app.options.deliveryList.isInstalled\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled;\n\n\t\t\t\tthis.stages.message.selectedMode = 'payment';\n\t\t\t\tthis.$root.$app.sendingMethodDesc.text = this.$root.$app.sendingMethodDesc.text_modes.payment;\n\t\t\t\tthis.stages.message.editorTemplate = this.$root.$app.sendingMethodDesc.text_modes.payment;\n\t\t\t}\n\t\t},\n\t},\n\tcreated()\n\t{\n\t\tthis.initCounter();\n\t},\n\tbeforeUpdate()\n\t{\n\t\tthis.initCounter();\n\t},\n\ttemplate: `\n\t\t<div>\n\t\t\t<chat-message-block\n\t\t\t\tv-if=\"editable\"\n\t\t\t\t@stage-block-sms-send-on-change-provider=\"changeProvider\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.message.status\"\n\t\t\t\t:manager=\"stages.message.manager\"\n\t\t\t\t:titleTemplate=\"stages.message.titleTemplate\"\n\t\t\t\t:showHint=\"stages.message.showHint\"\n\t\t\t\t:editorTemplate=\"stages.message.editorTemplate\"\n\t\t\t\t:editorUrl=\"stages.message.editorUrl\"\n\t\t\t\t:selectedMode=\"stages.message.selectedMode\"\n\t\t\t/>\n\t\t\t<product-block\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.product.status\"\n\t\t\t\t:title=\"stages.product.title\"\n\t\t\t\t:hintTitle=\"stages.product.hintTitle\"\n\t\t\t\t@on-product-form-mode-change=\"onProductFormModeChange\"\n\t\t\t/>\n\t\t\t<paysystem-block\n\t\t\t\t@on-stage-tile-collection-slider-close=\"stageRefresh($event, 'PAY_SYSTEM')\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.paysystem.status\"\n\t\t\t\t:tiles=\"stages.paysystem.tiles\"\n\t\t\t\t:installed=\"stages.paysystem.installed\"\n\t\t\t\t:titleItems=\"stages.paysystem.titleItems\"\n\t\t\t\t:initialCollapseState=\"stages.paysystem.initialCollapseState\"\n\t\t\t\t@on-save-collapsed-option=\"saveCollapsedOption\"\n\t\t\t/>\n\t\t\t<cashbox-block\n\t\t\t\tv-if=\"hasStageCashBox\"\n\t\t\t\t@on-stage-tile-collection-slider-close=\"stageRefresh($event, 'CASHBOX')\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.cashbox.status\"\n\t\t\t\t:tiles=\"stages.cashbox.tiles\"\n\t\t\t\t:installed=\"stages.cashbox.installed\"\n\t\t\t\t:titleItems=\"stages.cashbox.titleItems\"\n\t\t\t\t:initialCollapseState=\"stages.cashbox.initialCollapseState\"\n\t\t\t\t@on-save-collapsed-option=\"saveCollapsedOption\"\n\t\t\t/>\n\t\t\t<delivery-block\n\t\t\t\tv-if=\"stages.delivery && !stages.delivery.isHidden\"\n\t\t\t\t@on-stage-tile-collection-slider-close=\"stageRefresh($event, 'DELIVERY')\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.delivery.status\"\n\t\t\t\t:tiles=\"stages.delivery.tiles\"\n\t\t\t\t:installed=\"stages.delivery.installed\"\n\t\t\t\t:isCollapsible=\"true\"\n\t\t\t\t:initialCollapseState=\"stages.delivery.initialCollapseState\"\n\t\t\t\t@on-save-collapsed-option=\"saveCollapsedOption\"\n\t\t\t/>\n\t\t\t<document-selector-block\n\t\t\t\tv-if=\"isShowDocumentSelector\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:templateAddUrl=\"stages.documentSelector.templateAddUrl\"\n\t\t\t/>\n\t\t\t<automation-block\n\t\t\t\tv-if=\"hasStageAutomation\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.automation.status\"\n\t\t\t\t:stageOnOrderPaid=\"stages.automation.stageOnOrderPaid\"\n\t\t\t\t:stageOnDeliveryFinished=\"stages.automation.stageOnDeliveryFinished\"\n\t\t\t\t:items=\"stages.automation.items\"\n\t\t\t\t:initialCollapseState=\"stages.automation.initialCollapseState\"\n\t\t\t\t@on-save-collapsed-option=\"saveCollapsedOption\"\n\t\t\t/>\n\t\t\t<send-block\n\t\t\t\t@on-submit=\"onSend\"\n\t\t\t\t@on-submit-compilation-link-to-facebook=\"onSendCompilationLinkToFacebook\"\n\t\t\t\t:buttonEnabled=\"isSendAllowed\"\n\t\t\t\t:buttonLabel=\"submitButtonLabel\"\n\t\t\t\t:isFacebookForm=\"isFacebookForm\"\n\t\t\t/>\n\t\t\t<timeline-block\n\t\t\t\tv-if=\"hasStageTimeLine\"\n\t\t\t\t:timelineItems=\"stages.timeline.items\"\n\t\t\t/>\n\t\t</div>\n\t`\n};\n","export default {\n\tdata()\n\t{\n\t\treturn {\n\t\t\tisFaded: false,\n\t\t};\n\t},\n\tmounted()\n\t{\n\t\tthis.createPinner();\n\t},\n\tcreated()\n\t{\n\t\tthis.$root.$on('on-start-progress', () => {\n\t\t\tthis.startFade();\n\t\t});\n\n\t\tthis.$root.$on('on-stop-progress', () => {\n\t\t\tthis.endFade();\n\t\t});\n\t},\n\tmethods: {\n\t\tstartFade()\n\t\t{\n\t\t\tthis.isFaded = true;\n\t\t},\n\t\tendFade()\n\t\t{\n\t\t\tthis.isFaded = false;\n\t\t},\n\t\tcreatePinner()\n\t\t{\n\t\t\tlet buttonsPanel = this.$refs['buttonsPanel'];\n\t\t\tif(buttonsPanel)\n\t\t\t{\n\t\t\t\tthis.$root.$el.parentNode.appendChild(buttonsPanel);\n\t\t\t\tnew BX.UI.Pinner(\n\t\t\t\t\tbuttonsPanel,\n\t\t\t\t\t{\n\t\t\t\t\t\tfixBottom: this.$root.$app.isFrame,\n\t\t\t\t\t\tfullWidth: this.$root.$app.isFrame,\n\t\t\t\t\t\tanchorBottom: '.salescenter-app-pinner-anchor',\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t}\n\t\t},\n\t\tclose()\n\t\t{\n\t\t\tthis.$root.$app.closeApplication();\n\t\t},\n\t},\n\tcomputed: {\n\t\tisOrderPublicUrlAvailable()\n\t\t{\n\t\t\treturn this.$root.$app.isOrderPublicUrlAvailable;\n\t\t},\n\t\tcompilation()\n\t\t{\n\t\t\treturn this.$root.$app.compilation;\n\t\t},\n\t\twrapperClass()\n\t\t{\n\t\t\treturn {'salescenter-app-wrapper-fade': this.isFaded};\n\t\t},\n\t\twrapperStyle()\n\t\t{\n\t\t\tconst position = BX.pos(this.$root.$el);\n\n\t\t\tlet offset = position.top + 20;\n\t\t\tif(this.$root.$nodes.footer)\n\t\t\t{\n\t\t\t\toffset += BX.pos(this.$root.$nodes.footer).height;\n\t\t\t}\n\t\t\tconst buttonsPanel = this.$refs['buttonsPanel'];\n\t\t\tif(buttonsPanel)\n\t\t\t{\n\t\t\t\toffset += BX.pos(buttonsPanel).height;\n\t\t\t}\n\n\t\t\t//?auto\n\t\t\treturn {'minHeight': 'calc(100vh - ' + offset + 'px)'};\n\t\t},\n\t}\n}\n","import {Loc} from 'main.core';\nimport {Manager} from 'salescenter.manager';\n\nexport default {\n\tdata()\n\t{\n\t\treturn {\n\t\t};\n\t},\n\tmethods: {\n\t\tconnect()\n\t\t{\n\t\t\tconst loader = new BX.Loader({size: 200});\n\t\t\tloader.show(document.body);\n\n\t\t\tBX.Salescenter.Manager.connect({\n\t\t\t\tno_redirect: 'Y',\n\t\t\t\tcontext: this.$root.$app.context,\n\t\t\t}).then(() =>\n\t\t\t{\n\t\t\t\tBX.Salescenter.Manager.loadConfig().then((result) =>\n\t\t\t\t{\n\t\t\t\t\tloader.hide();\n\n\t\t\t\t\tif(result.isSiteExists)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$root.$app.isSiteExists = result.isSiteExists;\n\t\t\t\t\t\tthis.$root.$app.isOrderPublicUrlExists = true;\n\t\t\t\t\t\tthis.$root.$app.orderPublicUrl = result.orderPublicUrl;\n\t\t\t\t\t\tthis.$root.$app.isOrderPublicUrlAvailable = result.isOrderPublicUrlAvailable;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.$emit('on-successfully-connected');\n\t\t\t\t});\n\t\t\t}).catch(function()\n\t\t\t{\n\t\t\t\tloader.hide();\n\t\t\t});\n\t\t},\n\t\tcheckRecycle()\n\t\t{\n\t\t\tManager.openConnectedSite(true);\n\t\t},\n\t\topenConnectedSite()\n\t\t{\n\t\t\tManager.openConnectedSite();\n\t\t},\n\t},\n\tcomputed: {\n\t\tisOrderPageDeleted()\n\t\t{\n\t\t\treturn (this.$root.$app.isSiteExists && !this.isOrderPublicUrlExists);\n\t\t},\n\t\tisOrderPublicUrlExists()\n\t\t{\n\t\t\treturn this.$root.$app.isOrderPublicUrlExists;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"salescenter-app-page-content salescenter-app-start-wrapper\">\n\t\t\t<div class=\"ui-title-1 ui-text-center ui-color-medium\" style=\"margin-bottom: 20px;\">\n\t\t\t\t${Loc.getMessage('SALESCENTER_INFO_TEXT_TOP_2')}\n\t\t\t</div>\n\t\t\t<div class=\"ui-hr ui-mv-25\"></div>\n\t\t\t<template v-if=\"isOrderPublicUrlExists\">\n\t\t\t\t<div class=\"salescenter-title-5 ui-title-5 ui-text-center ui-color-medium\">\n\t\t\t\t\t${Loc.getMessage('SALESCENTER_INFO_TEXT_BOTTOM_PUBLIC')}\n\t\t\t\t</div>\n\t\t\t\t<div style=\"padding-top: 5px;\" class=\"ui-text-center\">\n\t\t\t\t\t<div class=\"ui-btn ui-btn-primary ui-btn-lg\" @click=\"openConnectedSite\">\n\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_INFO_PUBLIC')}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t\t<template v-else-if=\"isOrderPageDeleted\">\n\t\t\t\t<div class=\"salescenter-title-5 ui-title-5 ui-text-center ui-color-medium\">\n\t\t\t\t\t${Loc.getMessage('SALESCENTER_INFO_ORDER_PAGE_DELETED')}\n\t\t\t\t</div>\n\t\t\t\t<div style=\"padding-top: 5px;\" class=\"ui-text-center\">\n\t\t\t\t\t<div\n\t\t\t\t\t\t@click=\"checkRecycle\"\n\t\t\t\t\t\tclass=\"ui-btn ui-btn-primary ui-btn-lg\"\n\t\t\t\t\t>\n\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_CHECK_RECYCLE')}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t\t<template v-else>\n\t\t\t\t<div class=\"salescenter-title-5 ui-title-5 ui-text-center ui-color-medium\">\n\t\t\t\t\t${Loc.getMessage('SALESCENTER_INFO_TEXT_BOTTOM_2')}\n\t\t\t\t</div>\n\t\t\t\t<div style=\"padding-top: 5px;\" class=\"ui-text-center\">\n\t\t\t\t\t<div\n\t\t\t\t\t\t@click=\"connect\"\n\t\t\t\t\t\tclass=\"ui-btn ui-btn-primary ui-btn-lg\"\n\t\t\t\t\t>\n\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_INFO_CREATE')}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div style=\"padding-top: 5px;\" class=\"ui-text-center\">\n\t\t\t\t\t<div\n\t\t\t\t\t\t@click=\"BX.Salescenter.Manager.openHowPayDealWorks(event)\"\n\t\t\t\t\t\tclass=\"ui-btn ui-btn-link ui-btn-lg\"\n\t\t\t\t\t>\n\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_HOW')}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</div>\n\t`,\n}\n","import {Loc} from 'main.core';\nimport {Manager} from \"salescenter.manager\";\n\nexport default {\n\tdata()\n\t{\n\t\treturn {\n\t\t\tisVisible: true,\n\t\t};\n\t},\n\tmethods: {\n\t\thide()\n\t\t{\n\t\t\tthis.isVisible = false;\n\t\t\tthis.$emit('on-hide');\n\t\t},\n\t\topenControlPanel()\n\t\t{\n\t\t\tManager.openControlPanel();\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div v-if=\"isVisible\" class=\"salescenter-app-banner\" >\n\t\t\t<div class=\"salescenter-app-banner-inner\">\n\t\t\t\t<div class=\"salescenter-app-banner-title\">\n\t\t\t\t\t${Loc.getMessage('SALESCENTER_BANNER_TITLE')}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"salescenter-app-banner-content\">\n\t\t\t\t\t<div class=\"salescenter-app-banner-text\">\n\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_BANNER_TEXT')}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"salescenter-app-banner-btn-block\">\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t@click=\"openControlPanel\"\n\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-sm ui-btn-primary salescenter-app-banner-btn-connect\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_BANNER_BTN_CONFIGURE')}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t@click=\"hide\"\n\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-sm ui-btn-link salescenter-app-banner-btn-hide\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_BANNER_BTN_HIDE')}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\t@click=\"hide\"\n\t\t\t\t\tclass=\"salescenter-app-banner-close\"\n\t\t\t\t>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n}\n","import {Vue} from 'ui.vue';\nimport {Vuex} from 'ui.vue.vuex';\nimport {Manager} from 'salescenter.manager';\nimport {Loader} from 'main.loader';\nimport {Loc, Type, Uri} from 'main.core';\nimport {MixinTemplatesType} from './components/templates-type-mixin';\nimport StageBlocksList from './components/chat-receiving-payment/stage-blocks-list';\nimport ComponentMixin from './component-mixin';\nimport Product from './product';\nimport Start from './start';\nimport NoPaymentSystemsBanner from './no-payment-systems';\nimport 'popup';\nimport 'ui.buttons';\nimport 'ui.buttons.icons';\nimport 'ui.forms';\nimport 'ui.fonts.opensans';\nimport 'ui.pinner';\n\nexport default {\n\tmixins: [MixinTemplatesType, ComponentMixin],\n\tdata()\n\t{\n\t\treturn {\n\t\t\tisShowPreview: false,\n\t\t\tisShowPayment: false,\n\t\t\tpageTitle: '',\n\t\t\tcurrentPageId: null,\n\t\t\tactions: [],\n\t\t\tframeCheckShortTimeout: false,\n\t\t\tframeCheckLongTimeout: false,\n\t\t\tisPagesOpen: false,\n\t\t\tisFormsOpen: false,\n\t\t\tshowedPageIds: [],\n\t\t\tloadedPageIds: [],\n\t\t\terrorPageIds: [],\n\t\t\tlastAddedPages: [],\n\t\t\tordersCount: null,\n\t\t\tpaymentsCount: null,\n\t\t\teditedPageId: null,\n\t\t\tcurrentPageTitle: null\n\t\t};\n\t},\n\tcomponents:\n\t\t{\n\t\t\t'product': Product,\n\t\t\t'start': Start,\n\t\t\t'no-payment-systems-banner': NoPaymentSystemsBanner,\n\t\t\t'chat-receiving-payment': StageBlocksList,\n\t\t},\n\tupdated()\n\t{\n\t\tthis.renderErrors();\n\t},\n\tmounted()\n\t{\n\t\tthis.createLoader();\n\t\tthis.$root.$app.fillPages().then(() =>\n\t\t{\n\t\t\tif (this.$root.$app.isWithOrdersMode)\n\t\t\t{\n\t\t\t\tthis.refreshOrdersCount();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.refreshPaymentsCount();\n\t\t\t}\n\n\t\t\tthis.openFirstPage();\n\t\t});\n\n\t\tif(this.$root.$app.isPaymentsLimitReached)\n\t\t{\n\t\t\tlet paymentsLimitStartNode = this.$root.$nodes.paymentsLimit;\n\t\t\tlet paymentsLimitNode = this.$refs['paymentsLimit'];\n\t\t\tfor (let node of paymentsLimitStartNode.children)\n\t\t\t{\n\t\t\t\tpaymentsLimitNode.appendChild(node);\n\t\t\t}\n\t\t}\n\t},\n\tmethods:\n\t\t{\n\t\t\tgetActions()\n\t\t\t{\n\t\t\t\tlet actions = [];\n\t\t\t\tif(this.currentPage)\n\t\t\t\t{\n\t\t\t\t\tactions = [\n\t\t\t\t\t\t{text: this.localize.SALESCENTER_RIGHT_ACTION_COPY_URL, onclick: this.copyUrl},\n\t\t\t\t\t];\n\t\t\t\t\tif(this.currentPage.landingId > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tactions = [\n\t\t\t\t\t\t\t...actions,\n\t\t\t\t\t\t\t{text: this.localize.SALESCENTER_RIGHT_ACTION_HIDE, onclick: this.hidePage},\n\t\t\t\t\t\t];\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tactions = [\n\t\t\t\t\t\t\t...actions,\n\t\t\t\t\t\t\t{text: this.localize.SALESCENTER_RIGHT_ACTION_DELETE, onclick: this.hidePage},\n\t\t\t\t\t\t];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn [\n\t\t\t\t\t...actions,\n\t\t\t\t\t{text: this.localize.SALESCENTER_RIGHT_ACTION_ADD, items: this.getAddPageActions()},\n\t\t\t\t];\n\t\t\t},\n\t\t\tgetAddPageActions(isWebform = false)\n\t\t\t{\n\t\t\t\treturn [\n\t\t\t\t\t{text: this.localize.SALESCENTER_RIGHT_ACTION_ADD_SITE_B24, onclick: () =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.addSite(isWebform);\n\t\t\t\t\t\t}},\n\t\t\t\t\t{text: this.localize.SALESCENTER_RIGHT_ACTION_ADD_CUSTOM, onclick: () =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.showAddUrlPopup({\n\t\t\t\t\t\t\t\tisWebform: isWebform === true ? 'Y' : null\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}},\n\t\t\t\t];\n\t\t\t},\n\t\t\topenFirstPage()\n\t\t\t{\n\t\t\t\tthis.isShowPayment = false;\n\t\t\t\tthis.isShowPreview = true;\n\t\t\t\tif (this.$root.$app.isPaymentCreationAvailable)\n\t\t\t\t{\n\t\t\t\t\tthis.showPaymentForm();\n\t\t\t\t}\n\t\t\t\telse if(this.pages && this.pages.length > 0)\n\t\t\t\t{\n\t\t\t\t\tlet firstWebformPage = false;\n\t\t\t\t\tlet pageToOpen = false;\n\t\t\t\t\tthis.pages.forEach((page) =>\n\t\t\t\t\t{\n\t\t\t\t\t\tif(!pageToOpen)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif(!page.isWebform)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tpageToOpen = page;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tfirstWebformPage = page;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tif(!pageToOpen && firstWebformPage)\n\t\t\t\t\t{\n\t\t\t\t\t\tpageToOpen = firstWebformPage;\n\t\t\t\t\t}\n\t\t\t\t\tif(this.currentPageId !== pageToOpen.id)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.onPageClick(pageToOpen);\n\t\t\t\t\t\tif(pageToOpen.isWebform)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.isFormsOpen = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.isPagesOpen = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.currentPageId = this.pages[0].id;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.pageTitle = null;\n\t\t\t\t\tthis.currentPageId = null;\n\t\t\t\t\tthis.setPageTitle(this.pageTitle);\n\t\t\t\t}\n\t\t\t},\n\t\t\tonPageClick(page)\n\t\t\t{\n\t\t\t\tthis.pageTitle = page.name;\n\t\t\t\tthis.currentPageId = page.id;\n\t\t\t\tthis.hideActionsPopup();\n\t\t\t\tthis.isShowPayment = false;\n\t\t\t\tthis.isShowPreview = true;\n\t\t\t\tthis.setPageTitle(this.pageTitle);\n\t\t\t\tif(page.isFrameDenied !== true)\n\t\t\t\t{\n\t\t\t\t\tif(!this.showedPageIds.includes(page.id))\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.startFrameCheckTimeout();\n\t\t\t\t\t\tthis.showedPageIds.push(page.id);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.onFrameError();\n\t\t\t\t}\n\t\t\t},\n\t\t\tshowActionsPopup({target})\n\t\t\t{\n\t\t\t\tBX.PopupMenu.show('salescenter-app-actions', target, this.getActions(), {\n\t\t\t\t\toffsetLeft: 0,\n\t\t\t\t\toffsetTop: 0,\n\t\t\t\t\tcloseByEsc: true,\n\t\t\t\t});\n\t\t\t},\n\t\t\tshowCompanyContacts({target})\n\t\t\t{\n\t\t\t\tBX.Salescenter.Manager.openSlider(this.$root.$app.options.urlSettingsCompanyContacts, {width: 1200} );\n\t\t\t},\n\t\t\tshowAddPageActionPopup({target}, isWebform = false)\n\t\t\t{\n\t\t\t\tlet menuId = 'salescenter-app-add-page-actions';\n\t\t\t\tif(isWebform)\n\t\t\t\t{\n\t\t\t\t\tmenuId += '-forms';\n\t\t\t\t}\n\t\t\t\tBX.PopupMenu.show(menuId, target, this.getAddPageActions(isWebform), {\n\t\t\t\t\toffsetLeft: target.offsetWidth + 20,\n\t\t\t\t\toffsetTop: -target.offsetHeight - 15,\n\t\t\t\t\tcloseByEsc: true,\n\t\t\t\t\tangle: {\n\t\t\t\t\t\tposition: 'left',\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\thideActionsPopup()\n\t\t\t{\n\t\t\t\tBX.PopupMenu.destroy('salescenter-app-actions');\n\t\t\t\tBX.PopupMenu.destroy('salescenter-app-add-page-actions');\n\t\t\t},\n\t\t\taddSite(isWebform = false)\n\t\t\t{\n\t\t\t\tManager.addSitePage(isWebform).then((result) =>\n\t\t\t\t{\n\t\t\t\t\tlet newPage = result.answer.result.page || false;\n\t\t\t\t\tthis.$root.$app.fillPages().then(() =>\n\t\t\t\t\t{\n\t\t\t\t\t\tif(newPage)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.onPageClick(newPage);\n\t\t\t\t\t\t\tthis.lastAddedPages.push(parseInt(newPage.id));\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.openFirstPage();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\tthis.hideActionsPopup();\n\t\t\t},\n\t\t\tcopyUrl(event)\n\t\t\t{\n\t\t\t\tif(this.currentPage && this.currentPage.url)\n\t\t\t\t{\n\t\t\t\t\tManager.copyUrl(this.currentPage.url, event);\n\t\t\t\t\tthis.hideActionsPopup();\n\t\t\t\t}\n\t\t\t},\n\t\t\teditPage()\n\t\t\t{\n\t\t\t\tif(this.currentPage)\n\t\t\t\t{\n\t\t\t\t\tif(this.currentPage.landingId && this.currentPage.landingId > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tManager.editLandingPage(this.currentPage.landingId, this.currentPage.siteId);\n\t\t\t\t\t\tthis.hideActionsPopup();\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.showAddUrlPopup(this.currentPage);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\thidePage()\n\t\t\t{\n\t\t\t\tif(this.currentPage)\n\t\t\t\t{\n\t\t\t\t\tthis.$root.$app.hidePage(this.currentPage).then(() => {\n\t\t\t\t\t\tthis.openFirstPage();\n\t\t\t\t\t});\n\t\t\t\t\tthis.hideActionsPopup();\n\t\t\t\t}\n\t\t\t},\n\t\t\thideNoPaymentSystemsBanner()\n\t\t\t{\n\t\t\t\tthis.$root.$app.hideNoPaymentSystemsBanner();\n\t\t\t},\n\t\t\tshowAddUrlPopup(newPage)\n\t\t\t{\n\t\t\t\tif(!Type.isPlainObject(newPage))\n\t\t\t\t{\n\t\t\t\t\tnewPage = {};\n\t\t\t\t}\n\t\t\t\tManager.addCustomPage(newPage).then((pageId) =>\n\t\t\t\t{\n\t\t\t\t\tif(!this.isShowPreview)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.isShowPreview = false;\n\t\t\t\t\t}\n\t\t\t\t\tthis.$root.$app.fillPages().then(() => {\n\t\t\t\t\t\tif(pageId && (!Type.isPlainObject(newPage) || !newPage.id))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.lastAddedPages.push(parseInt(pageId));\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(!pageId && newPage)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tpageId = newPage.id;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(pageId)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.pages.forEach((page) =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif(parseInt(page.id) === parseInt(pageId))\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tthis.onPageClick(page);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif(!this.isShowPayment)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.isShowPreview = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\tthis.hideActionsPopup();\n\t\t\t},\n\t\t\tgetPaymentItemTitle(): ?string\n\t\t\t{\n\t\t\t\tif(!this.isOrderPublicUrlAvailable)\n\t\t\t\t{\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t\tif (this.$root.$app.options.mode === 'payment')\n\t\t\t\t{\n\t\t\t\t\treturn this.localize.SALESCENTER_LEFT_PAYMENT_ADD_2_MSGVER_1;\n\t\t\t\t}\n\n\t\t\t\treturn this.localize.SALESCENTER_LEFT_PAYMENT_AND_DELIVERY_MSGVER_1;\n\t\t\t},\n\t\t\tshowPaymentForm()\n\t\t\t{\n\t\t\t\tthis.isShowPayment = true;\n\t\t\t\tthis.isShowPreview = false;\n\n\t\t\t\tif (this.compilation)\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tlet title = this.getPaymentItemTitle() || this.localize.SALESCENTER_DEFAULT_TITLE;\n\n\t\t\t\tthis.setPageTitle(title);\n\t\t\t},\n\t\t\tshowOrdersList()\n\t\t\t{\n\t\t\t\tthis.hideActionsPopup();\n\t\t\t\tManager.showOrdersList({\n\t\t\t\t\tcontext: this.$root.$app.context,\n\t\t\t\t\townerId: this.$root.$app.ownerId,\n\t\t\t\t\townerTypeId: this.$root.$app.ownerTypeId,\n\t\t\t\t}).then(() =>\n\t\t\t\t{\n\t\t\t\t\tthis.refreshOrdersCount();\n\t\t\t\t});\n\t\t\t},\n\t\t\tshowPaymentsList()\n\t\t\t{\n\t\t\t\tthis.hideActionsPopup();\n\t\t\t\tManager.showPaymentsList({\n\t\t\t\t\tcontext: this.$root.$app.context,\n\t\t\t\t\townerId: this.$root.$app.ownerId,\n\t\t\t\t\townerTypeId: this.$root.$app.ownerTypeId,\n\t\t\t\t}).then(() =>\n\t\t\t\t{\n\t\t\t\t\tthis.refreshPaymentsCount();\n\t\t\t\t});\n\t\t\t},\n\t\t\tshowOrderAdd()\n\t\t\t{\n\t\t\t\tthis.hideActionsPopup();\n\t\t\t\tManager.showOrderAdd({\n\t\t\t\t\townerId: this.$root.$app.ownerId,\n\t\t\t\t\townerTypeId: this.$root.$app.ownerTypeId,\n\t\t\t\t}).then(() =>\n\t\t\t\t{\n\t\t\t\t\tthis.refreshOrdersCount();\n\t\t\t\t});\n\t\t\t},\n\t\t\tshowCatalog()\n\t\t\t{\n\t\t\t\tthis.hideActionsPopup();\n\t\t\t\tManager.openSlider(`/saleshub/catalog/?sessionId=${this.$root.$app.sessionId}`);\n\t\t\t},\n\t\t\tonFormsClick()\n\t\t\t{\n\t\t\t\tthis.isFormsOpen = !this.isFormsOpen;\n\t\t\t\tthis.hideActionsPopup();\n\t\t\t},\n\t\t\topenControlPanel()\n\t\t\t{\n\t\t\t\tManager.openControlPanel();\n\t\t\t\tthis.hideActionsPopup();\n\t\t\t},\n\t\t\topenHelpDesk()\n\t\t\t{\n\t\t\t\tthis.hideActionsPopup();\n\t\t\t\tManager.openHowItWorks();\n\t\t\t},\n\t\t\tisPageSelected(page)\n\t\t\t{\n\t\t\t\treturn (this.currentPage && this.isShowPreview && this.currentPage.id === page.id);\n\t\t\t},\n\t\t\tsendCompilationLinkToFacebook(event)\n\t\t\t{\n\t\t\t\tthis.send(event, 'n',true)\n\t\t\t},\n\t\t\tsend(event, skipPublicMessage = 'n', sendCompilationLinkToFacebook = false)\n\t\t\t{\n\t\t\t\tif(!this.isAllowedSubmitButton)\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif(this.isShowPayment && !this.isShowStartInfo)\n\t\t\t\t{\n\t\t\t\t\tif (this.$store.getters['orderCreation/isCompilationMode'])\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$root.$app.sendCompilation(event.target, sendCompilationLinkToFacebook);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$root.$app.sendPayment(event.target, skipPublicMessage);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if(this.currentPage && this.currentPage.isActive)\n\t\t\t\t{\n\t\t\t\t\tthis.$root.$app.sendPage(this.currentPage.id);\n\t\t\t\t}\n\t\t\t},\n\t\t\tsetPageTitle(title = null)\n\t\t\t{\n\t\t\t\tif(!title)\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif(this.$root.$nodes.title)\n\t\t\t\t{\n\t\t\t\t\tthis.$root.$nodes.title.innerText = title;\n\t\t\t\t}\n\t\t\t},\n\t\t\tonFrameError()\n\t\t\t{\n\t\t\t\tclearTimeout(this.frameCheckLongTimeout);\n\t\t\t\tif(this.showedPageIds.includes(this.currentPage.id))\n\t\t\t\t{\n\t\t\t\t\tthis.loadedPageIds.push(this.currentPage.id);\n\t\t\t\t}\n\t\t\t\tthis.errorPageIds.push(this.currentPage.id);\n\t\t\t},\n\t\t\tonFrameLoad(pageId)\n\t\t\t{\n\t\t\t\tclearTimeout(this.frameCheckLongTimeout);\n\t\t\t\tif(this.showedPageIds.includes(pageId))\n\t\t\t\t{\n\t\t\t\t\tthis.loadedPageIds.push(pageId);\n\t\t\t\t\tif(this.currentPage && this.currentPage.id === pageId)\n\t\t\t\t\t{\n\t\t\t\t\t\tif(this.frameCheckShortTimeout && !this.currentPage.landingId)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.onFrameError();\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(this.errorPageIds.includes(this.currentPage.id))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.errorPageIds = this.errorPageIds.filter((pageId) =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treturn pageId !== this.currentPage.id;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif(this.frameCheckShortTimeout && this.currentPage && this.currentPage.id === pageId && !this.currentPage.landingId)\n\t\t\t\t{\n\t\t\t\t\tthis.onFrameError();\n\t\t\t\t}\n\t\t\t},\n\t\t\tonSuccessfullyConnected()\n\t\t\t{\n\t\t\t\tthis.$root.$app.fillPages().then(() =>\n\t\t\t\t{\n\t\t\t\t\tthis.openFirstPage();\n\t\t\t\t});\n\t\t\t},\n\t\t\tstartFrameCheckTimeout()\n\t\t\t{\n\t\t\t\t// this is a workaround for denied through X-Frame-Options sources\n\t\t\t\tif(this.frameCheckShortTimeout)\n\t\t\t\t{\n\t\t\t\t\tclearTimeout(this.frameCheckShortTimeout);\n\t\t\t\t\tthis.frameCheckShortTimeout = false;\n\t\t\t\t}\n\t\t\t\tthis.frameCheckShortTimeout = setTimeout(() =>\n\t\t\t\t{\n\t\t\t\t\tthis.frameCheckShortTimeout = false;\n\t\t\t\t}, 500);\n\n\t\t\t\t// to show error on long loading\n\t\t\t\tclearTimeout(this.frameCheckLongTimeout);\n\t\t\t\tthis.frameCheckLongTimeout = setTimeout(() =>\n\t\t\t\t{\n\t\t\t\t\tif(this.currentPage && this.showedPageIds.includes(this.currentPage.id) && !this.loadedPageIds.includes(this.currentPage.id))\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.errorPageIds.push(this.currentPage.id);\n\t\t\t\t\t}\n\t\t\t\t}, 5000);\n\t\t\t},\n\t\t\tgetFrameSource(page)\n\t\t\t{\n\t\t\t\tif(this.showedPageIds.includes(page.id))\n\t\t\t\t{\n\t\t\t\t\tif(page.landingId > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tif(page.isActive)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn (new Uri(page.url)).setQueryParam('theme', '').toString();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\treturn page.url;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn null;\n\t\t\t},\n\t\t\trefreshOrdersCount()\n\t\t\t{\n\t\t\t\tthis.$root.$app.getOrdersCount().then((result) =>\n\t\t\t\t{\n\t\t\t\t\tthis.ordersCount = result.answer.result || null;\n\t\t\t\t}).catch(() =>\n\t\t\t\t{\n\t\t\t\t\tthis.ordersCount = null;\n\t\t\t\t});\n\t\t\t},\n\t\t\trefreshPaymentsCount()\n\t\t\t{\n\t\t\t\tthis.$root.$app.getPaymentsCount().then((result) =>\n\t\t\t\t{\n\t\t\t\t\tthis.paymentsCount = result.answer.result || null;\n\t\t\t\t}).catch(() =>\n\t\t\t\t{\n\t\t\t\t\tthis.paymentsCount = null;\n\t\t\t\t});\n\t\t\t},\n\t\t\trenderErrors()\n\t\t\t{\n\t\t\t\tif (this.isShowPayment && this.order.errors.length > 0)\n\t\t\t\t{\n\t\t\t\t\tlet errorMessages = this.order.errors.map((item) => item.message).join('<br>');\n\t\t\t\t\tlet params = {\n\t\t\t\t\t\tcolor: BX.UI.Alert.Color.DANGER,\n\t\t\t\t\t\ttextCenter: true,\n\t\t\t\t\t\ttext: BX.util.htmlspecialchars(errorMessages)\n\t\t\t\t\t};\n\t\t\t\t\tif (this.$refs.errorBlock.innerHTML.length === 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tparams.animated = true;\n\t\t\t\t\t}\n\t\t\t\t\tlet alert = new BX.UI.Alert(params);\n\t\t\t\t\tthis.$refs.errorBlock.innerHTML = '';\n\t\t\t\t\tthis.$refs.errorBlock.appendChild(alert.getContainer());\n\t\t\t\t}\n\t\t\t\telse if (this.$refs.errorBlock)\n\t\t\t\t{\n\t\t\t\t\tthis.$refs.errorBlock.innerHTML = '';\n\t\t\t\t}\n\t\t\t},\n\t\t\teditMenuItem(event, page)\n\t\t\t{\n\t\t\t\tthis.editedPageId = page.id;\n\t\t\t\tsetTimeout(() =>\n\t\t\t\t{\n\t\t\t\t\tevent.target.parentNode.parentNode.querySelector('input').focus();\n\t\t\t\t}, 50);\n\t\t\t},\n\t\t\tsaveMenuItem(event)\n\t\t\t{\n\t\t\t\tconst pageId = this.editedPageId;\n\t\t\t\tconst name = event.target.value;\n\t\t\t\tlet oldName;\n\t\t\t\tthis.pages.forEach((page) =>\n\t\t\t\t{\n\t\t\t\t\tif(page.id === this.editedPageId)\n\t\t\t\t\t{\n\t\t\t\t\t\toldName = page.name\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tif(pageId > 0 && oldName && name !== oldName && name.length > 0)\n\t\t\t\t{\n\t\t\t\t\tManager.addPage({\n\t\t\t\t\t\tid: pageId,\n\t\t\t\t\t\tname: name,\n\t\t\t\t\t\tanalyticsLabel: 'salescenterUpdatePageTitle',\n\t\t\t\t\t}).then(() =>\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$root.$app.fillPages().then(() => {\n\t\t\t\t\t\t\tif(this.editedPageId === this.currentPageId)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.setPageTitle(name);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthis.editedPageId = null;\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.editedPageId = null;\n\t\t\t\t}\n\t\t\t},\n\t\t\tcreateLoader()\n\t\t\t{\n\t\t\t\tconst loader = new Loader({size: 200});\n\t\t\t\tloader.show(this.$refs['previewLoader']);\n\t\t\t}\n\t\t},\n\n\tcomputed:\n\t\t{\n\t\t\tconfig: () => config,\n\t\t\tcurrentPage()\n\t\t\t{\n\t\t\t\tif(this.currentPageId > 0)\n\t\t\t\t{\n\t\t\t\t\tlet pages = this.application.pages.filter((page) =>\n\t\t\t\t\t{\n\t\t\t\t\t\treturn page.id === this.currentPageId;\n\t\t\t\t\t});\n\t\t\t\t\tif(pages.length > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn pages[0];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn null;\n\t\t\t},\n\n\t\t\tsendButtonLabel()\n\t\t\t{\n\t\t\t\treturn this.editable && !this.$root.$app?.compilation\n\t\t\t\t\t? Loc.getMessage('SALESCENTER_SEND')\n\t\t\t\t\t: Loc.getMessage('SALESCENTER_RESEND')\n\t\t\t\t\t;\n\t\t\t},\n\n\t\t\tpagesSubmenuHeight()\n\t\t\t{\n\t\t\t\tif(this.isPagesOpen)\n\t\t\t\t{\n\t\t\t\t\treturn (this.application.pages.filter((page) =>\n\t\t\t\t\t{\n\t\t\t\t\t\treturn !page.isWebform;\n\t\t\t\t\t}).length * 39 + 30) + 'px';\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\treturn '0px';\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tformsSubmenuHeight()\n\t\t\t{\n\t\t\t\tif(this.isFormsOpen)\n\t\t\t\t{\n\t\t\t\t\treturn (this.application.pages.filter((page) =>\n\t\t\t\t\t{\n\t\t\t\t\t\treturn page.isWebform;\n\t\t\t\t\t}).length * 39 + 30) + 'px';\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\treturn '0px';\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tisFrameError()\n\t\t\t{\n\t\t\t\tif(this.isShowPreview && this.currentPage)\n\t\t\t\t{\n\t\t\t\t\tif(!this.currentPage.isActive)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\telse if(!this.currentPage.landingId && this.errorPageIds.includes(this.currentPage.id))\n\t\t\t\t\t{\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t},\n\n\t\t\tisShowLoader()\n\t\t\t{\n\t\t\t\treturn (\n\t\t\t\t\tthis.isShowPreview &&\n\t\t\t\t\tthis.currentPageId > 0 &&\n\t\t\t\t\tthis.showedPageIds.includes(this.currentPageId) &&\n\t\t\t\t\t!this.loadedPageIds.includes(this.currentPageId)\n\t\t\t\t);\n\t\t\t},\n\n\t\t\tisShowStartInfo()\n\t\t\t{\n\t\t\t\tlet res = false;\n\t\t\t\tif(this.isShowPreview)\n\t\t\t\t{\n\t\t\t\t\tres = (!this.pages || this.pages.length <= 0);\n\t\t\t\t}\n\t\t\t\telse if(this.isShowPayment)\n\t\t\t\t{\n\t\t\t\t\tres = !this.isOrderPublicUrlAvailable;\n\t\t\t\t}\n\n\t\t\t\treturn res;\n\t\t\t},\n\n\t\t\tlastModified()\n\t\t\t{\n\t\t\t\tif(this.currentPage && this.currentPage.modifiedAgo)\n\t\t\t\t{\n\t\t\t\t\treturn this.localize.SALESCENTER_MODIFIED.replace('#AGO#', this.currentPage.modifiedAgo);\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\t\t\t},\n\n\t\t\tlocalize()\n\t\t\t{\n\t\t\t\treturn Vue.getFilteredPhrases('SALESCENTER_');\n\t\t\t},\n\n\t\t\tpages()\n\t\t\t{\n\t\t\t\treturn [...this.application.pages];\n\t\t\t},\n\n\t\t\tisAllowedSubmitButton()\n\t\t\t{\n\t\t\t\tif(this.$root.$app.disableSendButton)\n\t\t\t\t{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tif (this.isShowPreview && this.currentPage && !this.currentPage.isActive)\n\t\t\t\t{\n\t\t\t\t\treturn false\n\t\t\t\t}\n\t\t\t\tif (this.isShowPayment)\n\t\t\t\t{\n\t\t\t\t\treturn this.$store.getters['orderCreation/isAllowedSubmit'];\n\t\t\t\t}\n\t\t\t\treturn this.currentPage;\n\t\t\t},\n\t\t\tshowSubmitCompilationLinkToFacebookButton()\n\t\t\t{\n\t\t\t\tconst isCompilationMode = this.$store.getters['orderCreation/isCompilationMode'];\n\n\t\t\t\treturn this.$root.$app.connector === 'facebook' && this.$root.$app.isAllowedFacebookRegion && isCompilationMode;\n\t\t\t},\n\t\t\tisNoPaymentSystemsBannerVisible()\n\t\t\t{\n\t\t\t\treturn this.$root.$app.options.showPaySystemSettingBanner;\n\t\t\t},\n\t\t\tmode()\n\t\t\t{\n\t\t\t\treturn this.$root.$app.options.mode;\n\t\t\t},\n\t\t\t...Vuex.mapState({\n\t\t\t\tapplication: state => state.application,\n\t\t\t\torder: state => state.orderCreation,\n\t\t\t})\n\t\t},\n\ttemplate: `\n\t\t<div\n\t\t\t:class=\"wrapperClass\"\n\t\t\t:style=\"wrapperStyle\"\n\t\t\tclass=\"salescenter-app-wrapper salescenter-app-chat-wrapper\"\n\t\t>\n\t\t\t<div class=\"ui-sidepanel-sidebar salescenter-app-sidebar\" ref=\"sidebar\">\n\t\t\t\t<ul class=\"ui-sidepanel-menu\" ref=\"sidepanelMenu\">\n\t\t\t\t\t<li v-if=\"this.$root.$app.isPaymentCreationAvailable && !this.compilation\" :class=\"{ 'salescenter-app-sidebar-menu-active': this.isShowPayment}\" class=\"ui-sidepanel-menu-item\" @click=\"showPaymentForm\">\n\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link\">\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">{{getPaymentItemTitle()}}</div>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li v-if=\"this.compilation\" :class=\"{ 'salescenter-app-sidebar-menu-active': this.isShowPayment}\" class=\"ui-sidepanel-menu-item\" @click=\"showPaymentForm\">\n\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link\">\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">{{this.compilation.TITLE_TAB}}</div>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li :class=\"{'salescenter-app-sidebar-menu-active': isPagesOpen}\" class=\"ui-sidepanel-menu-item\">\n\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link\" @click.stop.prevent=\"isPagesOpen = !isPagesOpen;\">\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">{{localize.SALESCENTER_LEFT_PAGES}}</div>\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-toggle-btn\">{{this.isPagesOpen ? this.localize.SALESCENTER_SUBMENU_CLOSE : this.localize.SALESCENTER_SUBMENU_OPEN}}</div>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t<ul class=\"ui-sidepanel-submenu\" :style=\"{height: pagesSubmenuHeight}\">\n\t\t\t\t\t\t\t<li v-for=\"page in pages\" v-if=\"!page.isWebform\" :key=\"page.id\"\n\t\t\t\t\t\t\t:class=\"{\n\t\t\t\t\t\t\t\t'ui-sidepanel-submenu-active': (currentPage && currentPage.id == page.id && isShowPreview),\n\t\t\t\t\t\t\t\t'ui-sidepanel-submenu-edit-mode': (editedPageId === page.id)\n\t\t\t\t\t\t\t}\" class=\"ui-sidepanel-submenu-item\">\n\t\t\t\t\t\t\t\t<a :title=\"page.name\" class=\"ui-sidepanel-submenu-link\" @click.stop=\"onPageClick(page)\">\n\t\t\t\t\t\t\t\t\t<input class=\"ui-sidepanel-input\" :value=\"page.name\" v-on:keyup.enter=\"saveMenuItem($event)\" @blur=\"saveMenuItem($event)\" />\n\t\t\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">{{page.name}}</div>\n\t\t\t\t\t\t\t\t\t<div v-if=\"lastAddedPages.includes(page.id)\" class=\"ui-sidepanel-badge-new\"></div>\n\t\t\t\t\t\t\t\t\t<div class=\"ui-sidepanel-edit-btn\"><span class=\"ui-sidepanel-edit-btn-icon\" @click=\"editMenuItem($event, page);\"></span></div>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li class=\"salescenter-app-helper-nav-item salescenter-app-menu-add-page\" @click.stop=\"showAddPageActionPopup($event)\">\n\t\t\t\t\t\t\t\t<span class=\"salescenter-app-helper-nav-item-text salescenter-app-helper-nav-item-add\">+</span><span class=\"salescenter-app-helper-nav-item-text\">{{localize.SALESCENTER_RIGHT_ACTION_ADD}}</span>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li v-if=\"this.$root.$app.isWithOrdersMode\" @click=\"showOrdersList\">\n\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link\">\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">{{localize.SALESCENTER_LEFT_ORDERS}}</div>\n\t\t\t\t\t\t\t<span class=\"ui-sidepanel-counter\" ref=\"ordersCounter\" v-show=\"ordersCount > 0\">{{ordersCount}}</span>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li v-if=\"this.$root.$app.isWithOrdersMode\" @click=\"showOrderAdd\">\n\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link\">\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">{{localize.SALESCENTER_LEFT_ORDER_ADD}}</div>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li v-if=\"!this.$root.$app.isWithOrdersMode\" @click=\"showPaymentsList\">\n\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link\">\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">{{localize.SALESCENTER_LEFT_PAYMENTS}}</div>\n\t\t\t\t\t\t\t<span class=\"ui-sidepanel-counter\" ref=\"paymentsCounter\" v-show=\"paymentsCount > 0\">{{paymentsCount}}</span>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li v-if=\"this.$root.$app.isCatalogAvailable\" @click=\"showCatalog\">\n\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link\">\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">{{localize.SALESCENTER_LEFT_CATALOG}}</div>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li :class=\"{'salescenter-app-sidebar-menu-active': isFormsOpen}\" class=\"ui-sidepanel-menu-item\">\n\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link\" @click.stop.prevent=\"onFormsClick();\">\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">{{localize.SALESCENTER_LEFT_FORMS_ALL}}</div>\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-toggle-btn\">{{this.isFormsOpen ? this.localize.SALESCENTER_SUBMENU_CLOSE : this.localize.SALESCENTER_SUBMENU_OPEN}}</div>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t<ul class=\"ui-sidepanel-submenu\" :style=\"{height: formsSubmenuHeight}\">\n\t\t\t\t\t\t\t<li v-for=\"page in pages\" v-if=\"page.isWebform\" :key=\"page.id\"\n\t\t\t\t\t\t\t :class=\"{\n\t\t\t\t\t\t\t\t'ui-sidepanel-submenu-active': (currentPage && currentPage.id == page.id && isShowPreview),\n\t\t\t\t\t\t\t\t'ui-sidepanel-submenu-edit-mode': (editedPageId === page.id)\n\t\t\t\t\t\t\t}\" class=\"ui-sidepanel-submenu-item\">\n\t\t\t\t\t\t\t\t<a :title=\"page.name\" class=\"ui-sidepanel-submenu-link\" @click.stop=\"onPageClick(page)\">\n\t\t\t\t\t\t\t\t\t<input class=\"ui-sidepanel-input\" :value=\"page.name\" v-on:keyup.enter=\"saveMenuItem($event)\" @blur=\"saveMenuItem($event)\" />\n\t\t\t\t\t\t\t\t\t<div v-if=\"lastAddedPages.includes(page.id)\" class=\"ui-sidepanel-badge-new\"></div>\n\t\t\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">{{page.name}}</div>\n\t\t\t\t\t\t\t\t\t<div class=\"ui-sidepanel-edit-btn\"><span class=\"ui-sidepanel-edit-btn-icon\" @click=\"editMenuItem($event, page);\"></span></div>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li class=\"salescenter-app-helper-nav-item salescenter-app-menu-add-page\" @click.stop=\"showAddPageActionPopup($event, true)\">\n\t\t\t\t\t\t\t\t<span class=\"salescenter-app-helper-nav-item-text salescenter-app-helper-nav-item-add\">+</span><span class=\"salescenter-app-helper-nav-item-text\">{{localize.SALESCENTER_RIGHT_ACTION_ADD}}</span>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t\t<div class=\"salescenter-app-right-side\">\n\t\t\t\t<div class=\"salescenter-app-page-header\" v-show=\"isShowPreview && !isShowStartInfo\">\n\t\t\t\t\t<div class=\"salescenter-btn-action ui-btn ui-btn-link ui-btn-dropdown ui-btn-xs\" @click=\"showActionsPopup($event)\">{{localize.SALESCENTER_RIGHT_ACTIONS_BUTTON}}</div>\n\t\t\t\t\t<div class=\"salescenter-btn-delimiter salescenter-btn-action\"></div>\n\t\t\t\t\t<div class=\"salescenter-btn-action ui-btn ui-btn-link ui-btn-xs ui-btn-icon-edit\" @click=\"editPage\">{{localize.SALESCENTER_RIGHT_ACTION_EDIT}}</div>\n\t\t\t\t</div>\n\t\t\t\t<start\n\t\t\t\t\tv-if=\"isShowStartInfo\"\n\t\t\t\t\t@on-successfully-connected=\"onSuccessfullyConnected\"\n\t\t\t\t>\n\t\t\t\t</start>\n\t\t\t\t<template v-else-if=\"isFrameError && isShowPreview\">\n\t\t\t\t\t<div class=\"salescenter-app-page-content salescenter-app-lost\">\n\t\t\t\t\t\t<div class=\"salescenter-app-lost-block ui-title-1 ui-text-center ui-color-medium\">{{localize.SALESCENTER_ERROR_TITLE}}</div>\n\t\t\t\t\t\t<div v-if=\"currentPage.isFrameDenied === true\" class=\"salescenter-app-lost-helper ui-color-medium\">{{localize.SALESCENTER_RIGHT_FRAME_DENIED}}</div>\n\t\t\t\t\t\t<div v-else-if=\"currentPage.isActive !== true\" class=\"salescenter-app-lost-helper salescenter-app-not-active ui-color-medium\">{{localize.SALESCENTER_RIGHT_NOT_ACTIVE}}</div>\n\t\t\t\t\t\t<div v-else class=\"salescenter-app-lost-helper ui-color-medium\">{{localize.SALESCENTER_ERROR_TEXT}}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t\t<div v-show=\"isShowPreview && !isShowStartInfo && !isFrameError\" class=\"salescenter-app-page-content\">\n\t\t\t\t\t<template v-for=\"page in pages\">\n\t\t\t\t\t\t<iframe class=\"salescenter-app-demo\" v-show=\"currentPage && currentPage.id == page.id\" :src=\"getFrameSource(page)\" frameborder=\"0\" @error=\"onFrameError(page.id)\" @load=\"onFrameLoad(page.id)\" :key=\"page.id\"></iframe>\n\t\t\t\t\t</template>\n\t\t\t\t\t<div class=\"salescenter-app-demo-overlay\" :class=\"{\n\t\t\t\t\t\t'salescenter-app-demo-overlay-loading': this.isShowLoader\n\t\t\t\t\t}\">\n\t\t\t\t\t\t<div v-show=\"isShowLoader\" ref=\"previewLoader\"></div>\n\t\t\t\t\t\t<div v-if=\"lastModified\" class=\"salescenter-app-demo-overlay-modification\">{{lastModified}}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t    <template v-if=\"this.$root.$app.isPaymentsLimitReached\">\n\t\t\t        <div ref=\"paymentsLimit\" v-show=\"isShowPayment && !isShowStartInfo\"></div>\n\t\t\t\t</template>\n\t\t\t\t<template v-else>\n\t\t\t\t\t<chat-receiving-payment\n\t\t\t\t\t\tv-if=\"isShowPayment && !isShowStartInfo\"\n\t\t\t\t\t\t:key=\"order.basketVersion\"\n\t\t\t\t\t\t@stage-block-send-on-send=\"send($event)\"\n\t\t\t\t\t\t@stage-block-send-on-send-compilation-link-to-facebook=\"sendCompilationLinkToFacebook($event)\"\n\t\t\t\t\t/>\n\t\t        </template>\n\t\t\t</div>\n\t\t\t<div class=\"ui-button-panel-wrapper salescenter-button-panel\" ref=\"buttonsPanel\">\n\t\t\t\t<div class=\"ui-button-panel\">\n\t\t\t\t\t<button :class=\"{'ui-btn-disabled': !this.isAllowedSubmitButton}\" class=\"ui-btn ui-btn-md ui-btn-success\" @click=\"send($event)\">{{sendButtonLabel}}</button>\n\t\t\t\t\t<button\n\t\t\t\t\t\tv-if=\"showSubmitCompilationLinkToFacebookButton\"\n\t\t\t\t\t\t:class=\"{'ui-btn-disabled': !this.isAllowedSubmitButton}\"\n\t\t\t\t\t\tclass=\"ui-btn ui-btn-md ui-btn-light-border\"\n\t\t\t\t\t\t@click=\"sendCompilationLinkToFacebook($event)\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{localize.SALESCENTER_SEND_COMPILATION_LINK_TO_FACEBOOK}}\n\t\t\t\t\t</button>\n\t\t\t\t\t<button class=\"ui-btn ui-btn-md ui-btn-link\" @click=\"close\">{{localize.SALESCENTER_CANCEL}}</button>\n\t\t\t\t\t<button v-if=\"isShowPayment && !isShowStartInfo && !this.$root.$app.isPaymentsLimitReached && this.$root.$app.isWithOrdersMode\" class=\"ui-btn ui-btn-md ui-btn-link btn-send-crm\" @click=\"send($event, 'y')\">{{localize.SALESCENTER_SAVE_ORDER}}</button>\n\t\t\t\t</div>\n\t\t\t\t<div v-if=\"this.order.errors.length > 0\" ref=\"errorBlock\"></div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n}\n","import { Loc, ajax as Ajax } from 'main.core';\nimport { Block } from 'salescenter.component.stage-block';\nimport { StageMixin } from './stage-mixin';\nimport { Error, SenderList, UserAvatar, MessageEdit, MessageView, MessageEditor, MessageControl } from 'salescenter.component.stage-block.sms-message';\nimport { Manager } from \"salescenter.manager\";\nimport { SenderConfig } from \"salescenter.lib\";\nimport {UI} from \"ui.notification\";\n\nconst TYPE_PHONE = 'phone';\nconst TYPE_SENDER = 'sender';\n\nconst SmsMessage = {\n\tprops: {\n\t\tinitSenders: {\n\t\t\ttype: Array,\n\t\t\trequired: true\n\t\t},\n\t\tinitCurrentSenderCode: {\n\t\t\ttype: String,\n\t\t\trequired: false\n\t\t},\n\t\tinitPushedToUseBitrix24Notifications: {\n\t\t\ttype: String,\n\t\t\trequired: false\n\t\t},\n\t\tstatus: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\tcounter: {\n\t\t\ttype: Number,\n\t\t\trequired: true\n\t\t},\n\t\tmanager: {\n\t\t\ttype: Object,\n\t\t\trequired: true\n\t\t},\n\t\tselectedSmsSender: {\n\t\t\ttype: String,\n\t\t\trequired: false\n\t\t},\n\t\tphone: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\tcontactEditorUrl: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\townerTypeId: {\n\t\t\ttype: Number,\n\t\t\trequired: true\n\t\t},\n\t\townerId: {\n\t\t\ttype: Number,\n\t\t\trequired: true\n\t\t},\n\t\ttitleTemplate: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\tshowHint: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true\n\t\t},\n\t\teditorTemplate: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\teditorUrl: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\tselectedMode: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t}\n\t},\n\tmixins: [StageMixin],\n\tcomponents: {\n\t\t'stage-block-item':\tBlock,\n\t\t'sms-error-block': Error,\n\t\t'sms-sender-list-block': SenderList,\n\t\t'sms-user-avatar-block': UserAvatar,\n\t\t'sms-message-edit-block': MessageEdit,\n\t\t'sms-message-view-block': MessageView,\n\t\t'sms-message-editor-block': MessageEditor,\n\t\t'sms-message-control-block': MessageControl,\n\t},\n\tdata()\n\t{\n\t\treturn {\n\t\t\tcontactPhone: this.phone,\n\t\t\tcurrentSenderCode: null,\n\t\t\tsenders: [],\n\t\t\tpushedToUseBitrix24Notifications: null,\n\t\t\tsmsSenderListComponentKey: 0,\n\t\t}\n\t},\n\tcomputed: {\n\t\tconfigForBlock()\n\t\t{\n\t\t\treturn {\n\t\t\t\tcounter: this.counter,\n\t\t\t\tchecked: this.counterCheckedMixin,\n\t\t\t\tshowHint: true,\n\t\t\t\thintClassModifier: 'salescenter-app-payment-by-sms-item-title-info--link-gray',\n\t\t\t}\n\t\t},\n\t\teditor()\n\t\t{\n\t\t\treturn {\n\t\t\t\ttemplate: this.editorTemplate,\n\t\t\t\turl: this.editorUrl\n\t\t\t};\n\t\t},\n\t\tcurrentSender()\n\t\t{\n\t\t\treturn this.senders.find(sender => sender.code === this.currentSenderCode);\n\t\t},\n\t\ttitle()\n\t\t{\n\t\t\treturn this.titleTemplate.replace('#PHONE#', this.contactPhone);\n\t\t},\n\t\terrors()\n\t\t{\n\t\t\tlet result = [];\n\n\t\t\tlet bitrix24ConnectUrlError;\n\n\t\t\tif (!this.currentSender)\n\t\t\t{\n\t\t\t\tfor (let sender of this.senders)\n\t\t\t\t{\n\t\t\t\t\tif (!SenderConfig.needConfigure(sender))\n\t\t\t\t\t{\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tresult.push({\n\t\t\t\t\t\ttext: this.getConnectionErrorText(sender),\n\t\t\t\t\t\tfixer: SenderConfig.openSliderFreeMessages(sender.connectUrl),\n\t\t\t\t\t\tfixText: this.getConnectionErrorFixText(sender),\n\t\t\t\t\t\ttype: TYPE_SENDER\n\t\t\t\t\t});\n\n\t\t\t\t\tif (sender.code === SenderConfig.BITRIX24)\n\t\t\t\t\t{\n\t\t\t\t\t\tbitrix24ConnectUrlError = sender.connectUrl;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (!this.currentSender.isAvailable)\n\t\t\t\t{\n\t\t\t\t\tresult.push({\n\t\t\t\t\t\ttext: Loc.getMessage('SALESCENTER_SEND_ORDER_BY_SMS_' + this.currentSender.code.toUpperCase() + '_NOT_AVAILABLE'),\n\t\t\t\t\t\ttype: TYPE_SENDER\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tif (this.currentSender.isConnected)\n\t\t\t\t\t{\n\t\t\t\t\t\tresult = this.currentSender.usageErrors.map(error => ({ text: error, type: TYPE_SENDER }))\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tresult.push({\n\t\t\t\t\t\t\ttext: this.getConnectionErrorText(this.currentSender),\n\t\t\t\t\t\t\tfixer: this.getFixer(this.currentSender.connectUrl),\n\t\t\t\t\t\t\tfixText: this.getConnectionErrorFixText(this.currentSender),\n\t\t\t\t\t\t\ttype: TYPE_SENDER\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif (this.currentSender.code === SenderConfig.BITRIX24)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tbitrix24ConnectUrlError = this.currentSender.connectUrl;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!this.contactPhone)\n\t\t\t{\n\t\t\t\tif(this.contactEditorUrl.length > 0)\n\t\t\t\t{\n\t\t\t\t\tresult.push({\n\t\t\t\t\t\ttext: Loc.getMessage('SALESCENTER_SEND_ORDER_BY_SMS_SENDER_ALERT_PHONE_EMPTY'),\n\t\t\t\t\t\tfixer: this.getFixer(this.contactEditorUrl),\n\t\t\t\t\t\tfixText: Loc.getMessage('SALESCENTER_SEND_ORDER_BY_SMS_SENDER_ALERT_PHONE_EMPTY_SETTINGS'),\n\t\t\t\t\t\ttype: TYPE_PHONE\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tresult.push({\n\t\t\t\t\t\ttext: Loc.getMessage('SALESCENTER_SEND_ORDER_BY_SMS_SENDER_ALERT_PHONE_EMPTY'),\n\t\t\t\t\t\ttype: TYPE_PHONE\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif (this.pushedToUseBitrix24Notifications === 'N' && bitrix24ConnectUrlError)\n\t\t\t{\n\t\t\t\tthis.getFixer(bitrix24ConnectUrlError)().then(() => this.handleErrorFix());\n\t\t\t\tBX.userOptions.save('salescenter', 'payment_sender_options', 'pushed_to_use_bitrix24_notifications', 'Y');\n\t\t\t\tthis.pushedToUseBitrix24Notifications = 'Y';\n\t\t\t}\n\n\t\t\treturn result;\n\t\t}\n\t},\n\tcreated() {\n\t\tthis.initialize(this.initCurrentSenderCode, this.initSenders, this.initPushedToUseBitrix24Notifications);\n\t},\n\tmethods: {\n\t\tonConfigureContactPhone()\n\t\t{\n\t\t\tthis.$emit('stage-block-sms-message-on-change-contact-phone');\n\t\t},\n\t\tgetConnectionErrorText(sender)\n\t\t{\n\t\t\tconst messageCode = 'SALESCENTER_SEND_ORDER_BY_SMS_' + sender.code.toUpperCase() + '_NOT_CONNECTED_WARNING';\n\t\t\tconst fallback = 'SALESCENTER_SEND_ORDER_BY_SMS_' + sender.code.toUpperCase() + '_NOT_CONNECTED';\n\n\t\t\treturn Loc.getMessage(messageCode) || Loc.getMessage(fallback);\n\t\t},\n\t\tgetConnectionErrorFixText(sender)\n\t\t{\n\t\t\tconst messageCode = 'SALESCENTER_SEND_ORDER_BY_SMS_' + sender.code.toUpperCase() + '_NOT_CONNECTED_FIX';\n\t\t\tconst fallback = 'SALESCENTER_PRODUCT_DISCOUNT_EDIT_PAGE_URL_TITLE';\n\n\t\t\treturn Loc.getMessage(messageCode) || Loc.getMessage(fallback);\n\t\t},\n\t\tgetFixer(fixUrl)\n\t\t{\n\t\t\treturn () => {\n\t\t\t\tif (typeof fixUrl === 'string')\n\t\t\t\t{\n\t\t\t\t\treturn Manager.openSlider(fixUrl, {\n\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\tonLoad: function(event) {\n\t\t\t\t\t\t\t\tconst slider = event.getSlider();\n\t\t\t\t\t\t\t\tconst sliderBx = slider.getFrameWindow().BX;\n\t\t\t\t\t\t\t\tsliderBx.addCustomEvent(\"BX.Crm.EntityEditor:onNothingChanged\", () => slider.close());\n\t\t\t\t\t\t\t\tsliderBx.addCustomEvent(\"BX.Crm.EntityEditor:onCancel\", () => slider.close());\n\t\t\t\t\t\t\t\tsliderBx.addCustomEvent(\"onCrmEntityUpdate\", () => slider.close());\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tif (typeof fixUrl === 'object' && fixUrl !== null)\n\t\t\t\t{\n\t\t\t\t\tif (fixUrl.type === 'ui_helper')\n\t\t\t\t\t{\n\t\t\t\t\t\treturn BX.loadExt('ui.info-helper').then(() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tBX.UI.InfoHelper.show(fixUrl.value);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn Promise.resolve();\n\t\t\t};\n\t\t},\n\t\tonItemHint(e)\n\t\t{\n\t\t\tBX.Salescenter.Manager.openSlider(this.$root.$app.options.urlSettingsCompanyContacts, {width: 1200} );\n\t\t},\n\t\tinitialize(currentSenderCode, senders, pushedToUseBitrix24Notifications)\n\t\t{\n\t\t\tthis.currentSenderCode = currentSenderCode;\n\t\t\tthis.senders = senders;\n\t\t\tthis.pushedToUseBitrix24Notifications = pushedToUseBitrix24Notifications;\n\t\t},\n\t\thandleOnSmsSenderSelected(value)\n\t\t{\n\t\t\tthis.$emit('stage-block-sms-send-on-change-provider', value);\n\t\t},\n\t\thandleErrorFix()\n\t\t{\n\t\t\tAjax.runComponentAction(\"bitrix:salescenter.app\", \"refreshSenderSettings\", {\n\t\t\t\tmode: \"class\"\n\t\t\t})\n\t\t\t\t.then((resolve)=> {\n\t\t\t\t\tif (BX.type.isObject(resolve.data) && Object.values(resolve.data).length > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.initialize(\n\t\t\t\t\t\t\tresolve.data.currentSenderCode,\n\t\t\t\t\t\t\tresolve.data.senders,\n\t\t\t\t\t\t\tresolve.data.pushedToUseBitrix24Notifications\n\t\t\t\t\t\t);\n\t\t\t\t\t\tthis.smsSenderListComponentKey += 1;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t},\n\t\thandlePhoneErrorFix()\n\t\t{\n\t\t\tAjax.runComponentAction(\"bitrix:salescenter.app\", \"refreshContactPhone\", {\n\t\t\t\tmode: \"class\",\n\t\t\t\tdata: {\n\t\t\t\t\tfields:{\n\t\t\t\t\t\townerId: this.ownerId,\n\t\t\t\t\t\townerTypeId: this.ownerTypeId,\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t})\n\t\t\t.then((resolve)=> {\n\t\t\t\tif (BX.type.isObject(resolve.data) && Object.values(resolve.data).length > 0)\n\t\t\t\t{\n\t\t\t\t\tif(this.contactPhone != resolve.data.contactPhone)\n\t\t\t\t\t{\n\t\t\t\t\t\tUI.Notification.Center.notify({\n\t\t\t\t\t\t\tcontent: Loc.getMessage('SALESCENTER_SEND_ORDER_BY_SMS_SENDER_PHONE_CHANGE', {\n\t\t\t\t\t\t\t\t'#TITLE#': resolve.data.title\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.contactPhone = resolve.data.contactPhone;\n\t\t\t\t\tthis.onConfigureContactPhone();\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\thendleSmsErrorBlock(event)\n\t\t{\n\t\t\tif(event.data.type === TYPE_PHONE)\n\t\t\t{\n\t\t\t\tthis.handlePhoneErrorFix()\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.handleErrorFix()\n\t\t\t}\n\t\t},\n\t\topenBitrix24NotificationsHelp(event)\n\t\t{\n\t\t\tBX.Salescenter.Manager.openBitrix24NotificationsHelp(event);\n\t\t},\n\t\topenBitrix24NotificationsWorks(event)\n\t\t{\n\t\t\tBX.Salescenter.Manager.openBitrix24NotificationsWorks(event);\n\t\t},\n\t},\n\t//language=Vue\n\ttemplate: `\n\t\t<stage-block-item\t\t\t\n\t\t\t:config=\"configForBlock\"\n\t\t\t:class=\"statusClassMixin\"\n\t\t\tv-on:on-item-hint=\"onItemHint\"\n\t\t>\n\t\t\t<template v-slot:block-title-title>{{title}}</template>\n\t\t\t<template\n\t\t\t\tv-if=\"showHint\"\n\t\t\t\tv-slot:block-hint-title\n\t\t\t>\n\t\t\t\t${Loc.getMessage('SALESCENTER_LEFT_PAYMENT_COMPANY_CONTACTS_V3')}\n\t\t\t</template>\n\t\t\t<template v-slot:block-container>\n\t\t\t\t<div :class=\"containerClassMixin\" class=\"salescenter-app-payment-by-sms-item-container-offtop\">\n\t\t\t\t\t<sms-error-block\n\t\t\t\t\t\tv-for=\"(error, index) in errors\"\n\t\t\t\t\t\tv-bind:key=\"index\"\n\t\t\t\t\t\tv-on:on-configure=\"hendleSmsErrorBlock($event)\"\n\t\t\t\t\t\t:error=\"error\"\n\t\t\t\t\t>\n\t\t\t\t\t</sms-error-block>\n\t\t\t\t\t\n\t\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container-sms\">\n\t\t\t\t\t\t<sms-user-avatar-block :manager=\"manager\"/>\n\t\t\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container-sms-content\">\n\t\t\t\t\t\t\t<div v-if=\"currentSenderCode === 'bitrix24'\" class=\"salescenter-app-payment-by-sms-item-container-sms-content\">\n\t\t\t\t\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container-sms-content-message\">\n\t\t\t\t\t\t\t\t\t<div contenteditable=\"false\" class=\"salescenter-app-payment-by-sms-item-container-sms-content-message-text\">\n\t\t\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_TEMPLATE_BASED_MESSAGE_WILL_BE_SENT')}\n\t\t\t\t\t\t\t\t\t\t<a @click.stop.prevent=\"openBitrix24NotificationsHelp(event)\" href=\"#\">\n\t\t\t\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_MORE_DETAILS')}\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<sms-message-editor-block v-else :editor=\"editor\" :selectedMode=\"selectedMode\"/>\n\t\t\t\t\t\t\t<template v-if=\"currentSenderCode === 'bitrix24'\">\n\t\t\t\t\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container-sms-content-info\">\n\t\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_SEND_ORDER_VIA_BITRIX24')}\n\t\t\t\t\t\t\t\t\t<span @click=\"openBitrix24NotificationsWorks(event)\">\n\t\t\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_PRODUCT_SET_BLOCK_TITLE_SHORT')}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t<template v-else-if=\"currentSenderCode === 'sms_provider'\">\n\t\t\t\t\t\t\t\t<sms-sender-list-block\n\t\t\t\t\t\t\t\t\t:key=\"smsSenderListComponentKey\"\n\t\t\t\t\t\t\t\t\t:list=\"currentSender.smsSenders\"\n\t\t\t\t\t\t\t\t\t:initSelected=\"selectedSmsSender\"\n\t\t\t\t\t\t\t\t\t:settingUrl=\"currentSender.connectUrl\"\n\t\t\t\t\t\t\t\t\tv-on:on-configure=\"handleErrorFix\"\n\t\t\t\t\t\t\t\t\tv-on:on-selected=\"handleOnSmsSenderSelected\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<template v-slot:sms-sender-list-text-send-from>\n\t\t\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_SEND_ORDER_BY_SMS_SENDER')}\n\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t</sms-sender-list-block>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</stage-block-item>\n\t`\n};\nexport {\n\tSmsMessage\n}\n","import { ajax as Ajax, Loc } from 'main.core';\nimport {StatusTypes as Status} from 'salescenter.component.stage-block';\nimport * as TimeLineItem from 'salescenter.timeline';\nimport {UI} from 'ui.notification';\nimport {MixinTemplatesType} from '../templates-type-mixin';\nimport * as Tile from 'salescenter.tile';\nimport Send from './stage-blocks/send';\nimport {Cashbox} from '../stage-blocks/cashbox';\nimport Product from '../stage-blocks/product';\nimport {DeliveryVuex} from '../stage-blocks/delivery-vuex';\nimport {PaySystem} from '../stage-blocks/paysystem';\nimport {SmsMessage} from '../stage-blocks/sms-message';\nimport {Automation} from '../stage-blocks/automation';\nimport {StageMixin} from '../stage-blocks/stage-mixin';\nimport {TimeLine} from '../stage-blocks/timeline';\n\nexport default {\n\tcomponents: {\n\t\t'send-block': Send,\n\t\t'cashbox-block': Cashbox,\n\t\t'product-block': Product,\n\t\t'delivery-block': DeliveryVuex,\n\t\t'paysystem-block': PaySystem,\n\t\t'automation-block': Automation,\n\t\t'sms-message-block': SmsMessage,\n\t\t'timeline-block': TimeLine,\n\t},\n\tprops: {\n\t\tsendAllowed: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true\n\t\t},\n\t},\n\tdata()\n\t{\n\t\tlet stages =  {\n\t\t\tmessage: {\n\t\t\t\tinitSenders: this.$root.$app.options.senders,\n\t\t\t\tinitCurrentSenderCode: this.$root.$app.options.currentSenderCode,\n\t\t\t\tinitPushedToUseBitrix24Notifications: this.$root.$app.options.pushedToUseBitrix24Notifications,\n\t\t\t\tstatus: Status.complete,\n\t\t\t\tselectedSmsSender: this.$root.$app.sendingMethodDesc.provider,\n\t\t\t\tmanager: this.$root.$app.options.entityResponsible,\n\t\t\t\tphone: this.$root.$app.options.contactPhone,\n\t\t\t\townerId: this.$root.$app.options.ownerId,\n\t\t\t\townerTypeId: this.$root.$app.options.ownerTypeId,\n\t\t\t\tcontactEditorUrl: this.$root.$app.options.contactEditorUrl,\n\t\t\t\ttitleTemplate: this.$root.$app.sendingMethodDesc.sent\n\t\t\t\t\t? Loc.getMessage('SALESCENTER_APP_CONTACT_BLOCK_TITLE_MESSAGE_2_PAST_TIME')\n\t\t\t\t\t: Loc.getMessage('SALESCENTER_APP_CONTACT_BLOCK_TITLE_MESSAGE_2'),\n\t\t\t\tshowHint: this.$root.$app.options.templateMode !== 'view',\n\t\t\t\teditorTemplate: this.$root.$app.sendingMethodDesc.text,\n\t\t\t\teditorUrl: this.$root.$app.orderPublicUrl,\n\t\t\t\tselectedMode: 'payment',\n\t\t\t},\n\t\t\tproduct: {\n\t\t\t\tstatus: this.$root.$app.options.basket && this.$root.$app.options.basket.length > 0\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.current,\n\t\t\t\ttitle: this.$root.$app.options.templateMode === 'view'\n\t\t\t\t\t? Loc.getMessage('SALESCENTER_PRODUCT_BLOCK_TITLE_PAYMENT_VIEW')\n\t\t\t\t\t: Loc.getMessage('SALESCENTER_PRODUCT_BLOCK_TITLE_SHORT'),\n\t\t\t\thintTitle: this.$root.$app.options.templateMode === 'view'\n\t\t\t\t\t? ''\n\t\t\t\t\t: Loc.getMessage('SALESCENTER_PRODUCT_SET_BLOCK_TITLE_SHORT'),\n\t\t\t},\n\t\t\tpaysystem: {\n\t\t\t\tstatus: this.$root.$app.options.paySystemList.isSet\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled,\n\t\t\t\ttiles: this.getTileCollection(this.$root.$app.options.paySystemList.items),\n\t\t\t\tinstalled: this.$root.$app.options.paySystemList.isSet,\n\t\t\t\ttitleItems: this.getTitleItems(this.$root.$app.options.paySystemList.items),\n\t\t\t\tinitialCollapseState: this.$root.$app.options.isPaySystemCollapsed ? this.$root.$app.options.isPaySystemCollapsed === 'Y' : this.$root.$app.options.paySystemList.isSet,\n\t\t\t},\n\t\t\tcashbox: {},\n\t\t\tdelivery: {\n\t\t\t\tstatus: this.$root.$app.options.deliveryList.isInstalled\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled,\n\t\t\t\ttiles: this.getTileCollection(this.$root.$app.options.deliveryList.items),\n\t\t\t\tinstalled: this.$root.$app.options.deliveryList.isInstalled,\n\t\t\t\tinitialCollapseState: this.$root.$app.options.isDeliveryCollapsed ? this.$root.$app.options.isDeliveryCollapsed === 'Y' : this.$root.$app.options.deliveryList.isInstalled,\n\t\t\t},\n\t\t\tautomation: {},\n\t\t};\n\n\t\tif (this.$root.$app.options.cashboxList.hasOwnProperty('items'))\n\t\t{\n\t\t\tstages.cashbox = {\n\t\t\t\tstatus: this.$root.$app.options.cashboxList.isSet\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled,\n\t\t\t\ttiles: this.getTileCollection(this.$root.$app.options.cashboxList.items),\n\t\t\t\tinstalled: this.$root.$app.options.cashboxList.isSet,\n\t\t\t\ttitleItems: this.getTitleItems(this.$root.$app.options.cashboxList.items),\n\t\t\t\tinitialCollapseState: this.$root.$app.options.isCashboxCollapsed ? this.$root.$app.options.isCashboxCollapsed === 'Y' : this.$root.$app.options.cashboxList.isSet,\n\t\t\t};\n\t\t}\n\n\t\tif (this.$root.$app.options.isAutomationAvailable)\n\t\t{\n\t\t\tstages.automation = {\n\t\t\t\tstatus: Status.complete,\n\t\t\t\tstageOnOrderPaid: this.$root.$app.options.stageOnOrderPaid,\n\t\t\t\tstageOnDeliveryFinished: this.$root.$app.options.stageOnDeliveryFinished,\n\t\t\t\titems: this.$root.$app.options.entityStageList,\n\t\t\t\tinitialCollapseState: this.$root.$app.options.isAutomationCollapsed ? this.$root.$app.options.isAutomationCollapsed === 'Y' : false,\n\t\t\t};\n\t\t}\n\n\t\tif (this.$root.$app.options.hasOwnProperty('timeline'))\n\t\t{\n\t\t\tstages.timeline = {\n\t\t\t\titems: this.getTimelineCollection(this.$root.$app.options.timeline)\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (this.$root.$app.options.paySystemList.groups)\n\t\t{\n\t\t\tstages.paysystem.groups = this.getTileGroupsCollection(\n\t\t\t\tthis.$root.$app.options.paySystemList.groups,\n\t\t\t\tstages.paysystem.tiles\n\t\t\t);\n\t\t}\n\n\t\treturn {\n\t\t\tstages: stages,\n\t\t}\n\t},\n\tmixins: [\n\t\tStageMixin,\n\t\tMixinTemplatesType\n\t],\n\tcomputed: {\n\t\thasStageTimeLine()\n\t\t{\n\t\t\treturn this.stages.timeline.hasOwnProperty('items') && this.stages.timeline.items.length > 0;\n\t\t},\n\t\thasStageAutomation()\n\t\t{\n\t\t\treturn this.stages.automation.hasOwnProperty('items');\n\t\t},\n\t\thasStageCashBox()\n\t\t{\n\t\t\treturn this.stages.cashbox.hasOwnProperty('tiles');\n\t\t},\n\t\tsubmitButtonLabel()\n\t\t{\n\t\t\treturn this.editable ? Loc.getMessage('SALESCENTER_SEND') : Loc.getMessage('SALESCENTER_RESEND');\n\t\t},\n\t\tisHideDeliveryStage()\n\t\t{\n\t\t\treturn this.isViewWithoutDelivery();\n\t\t},\n\t},\n\tmethods: {\n\t\tinitCounter()\n\t\t{\n\t\t\tthis.counter = 1;\n\t\t},\n\t\tgetTimelineCollection(items)\n\t\t{\n\t\t\tlet list = [];\n\n\t\t\tObject.values(items).forEach(\n\t\t\t\toptions => list.push(TimeLineItem.Factory.create(options)));\n\n\t\t\treturn list;\n\t\t},\n\t\tgetTileCollection(items)\n\t\t{\n\t\t\tlet tiles = [];\n\t\t\tObject.values(items).forEach(\n\t\t\t\toptions => tiles.push(Tile.Factory.create(options)));\n\n\t\t\treturn tiles;\n\t\t},\n\t\tgetTileGroupsCollection(groups, tiles)\n\t\t{\n\t\t\tconst ret = [];\n\t\t\t\n\t\t\tif (groups instanceof Array)\n\t\t\t{\n\t\t\t\tObject.values(groups).forEach((item) => {\n\t\t\t\t\tconst group = new Tile.Group(item);\n\t\t\t\t\tgroup.fillTiles(tiles);\n\t\t\t\t\tret.push(group);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn ret;\n\t\t},\n\t\tgetTitleItems(items)\n\t\t{\n\t\t\tlet result = [];\n\t\t\titems.forEach((item) => {\n\t\t\t\tif (![Tile.More.type(), Tile.Offer.type()].includes(item.type))\n\t\t\t\t{\n\t\t\t\t\tresult.push(item);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn result;\n\t\t},\n\t\tstageRefresh(e, type)\n\t\t{\n\t\t\tAjax.runComponentAction(\n\t\t\t\t\"bitrix:salescenter.app\",\n\t\t\t\t\"getAjaxData\",\n\t\t\t\t{\n\t\t\t\t\tmode: \"class\",\n\t\t\t\t\tdata: {\n\t\t\t\t\t\ttype: type,\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t).then(function(response) {\n\t\t\t\tif (response.data)\n\t\t\t\t{\n\t\t\t\t\tthis.refreshTilesByType(response.data, type);\n\t\t\t\t}\n\t\t\t}.bind(this),\n\t\t\tfunction() {\n\t\t\t\tUI.Notification.Center.notify({\n\t\t\t\t\tcontent: Loc.getMessage('SALESCENTER_DATA_UPDATE_ERROR'),\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\trefreshTilesByType(data, type)\n\t\t{\n\t\t\tif(type === 'PAY_SYSTEM')\n\t\t\t{\n\t\t\t\tthis.stages.paysystem.status = data.isSet\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled;\n\t\t\t\tthis.stages.paysystem.tiles = this.getTileCollection(data.items);\n\t\t\t\tthis.stages.paysystem.groups = this.getTileGroupsCollection(data.groups, this.stages.paysystem.tiles);\n\t\t\t\tthis.stages.paysystem.installed = data.isSet;\n\t\t\t\tthis.stages.paysystem.titleItems = this.getTitleItems(data.items);\n\t\t\t}\n\t\t\telse if(type === 'CASHBOX')\n\t\t\t{\n\t\t\t\tthis.stages.cashbox.status = data.isSet\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled;\n\t\t\t\tthis.stages.cashbox.tiles = this.getTileCollection(data.items);\n\t\t\t\tthis.stages.cashbox.installed = data.isSet;\n\t\t\t\tthis.stages.cashbox.titleItems = this.getTitleItems(data.items);\n\t\t\t}\n\t\t\telse if(type === 'DELIVERY')\n\t\t\t{\n\t\t\t\tthis.stages.delivery.status = data.isSet\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled;\n\t\t\t\tthis.stages.delivery.tiles = this.getTileCollection(data.items);\n\t\t\t\tthis.stages.delivery.installed = data.isInstalled;\n\t\t\t}\n\t\t},\n\t\tonSend(event)\n\t\t{\n\t\t\tthis.$emit('stage-block-send-on-send', event)\n\t\t},\n\t\tchangeProvider(value)\n\t\t{\n\t\t\tthis.$root.$app.sendingMethodDesc.provider = value;\n\t\t\tBX.userOptions.save('salescenter', 'payment_sms_provider_options', 'latest_selected_provider', value);\n\t\t},\n\t\tchangeContactPhone(event)\n\t\t{\n\t\t\tthis.$emit('stage-block-on-reload', event)\n\t\t},\n\t\tsaveCollapsedOption(type, value)\n\t\t{\n\t\t\tBX.userOptions.save('salescenter', 'add_payment_collapse_options', type, value);\n\t\t},\n\t\tonProductFormModeChange()\n\t\t{\n\t\t\tconst isCompilationMode = this.$store.getters['orderCreation/isCompilationMode'];\n\t\t\tif (isCompilationMode)\n\t\t\t{\n\t\t\t\tthis.stages.delivery.status = Status.disabled;\n\n\t\t\t\tthis.stages.message.selectedMode = 'compilation';\n\t\t\t\tthis.$root.$app.sendingMethodDesc.text = this.$root.$app.sendingMethodDesc.text_modes.compilation;\n\t\t\t\tthis.stages.message.editorTemplate = this.$root.$app.sendingMethodDesc.text_modes.compilation;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.stages.delivery.status = this.$root.$app.options.deliveryList.isInstalled\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled;\n\n\t\t\t\tthis.stages.message.selectedMode = 'payment';\n\t\t\t\tthis.$root.$app.sendingMethodDesc.text = this.$root.$app.sendingMethodDesc.text_modes.payment;\n\t\t\t\tthis.stages.message.editorTemplate = this.$root.$app.sendingMethodDesc.text_modes.payment;\n\t\t\t}\n\t\t},\n\t\tisViewWithoutDelivery()\n\t\t{\n\t\t\treturn (\n\t\t\t\tthis.$root.$app.options.templateMode === 'view'\n\t\t\t\t&& parseInt(this.$root.$app.options.shipmentId) <= 0\n\t\t\t);\n\t\t}\n\t},\n\tcreated()\n\t{\n\t\tthis.initCounter();\n\t},\n\tbeforeUpdate()\n\t{\n\t\tthis.initCounter();\n\t},\n\t//language=Vue\n\ttemplate: `\n\t\t<div>\n\t\t\t<sms-message-block\n\t\t\t\t@stage-block-sms-send-on-change-provider=\"changeProvider\"\n\t\t\t\t@stage-block-sms-message-on-change-contact-phone=\"changeContactPhone\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.message.status\"\n\t\t\t\t:initSenders=\"stages.message.initSenders\"\n\t\t\t\t:initCurrentSenderCode=\"stages.message.initCurrentSenderCode\"\n\t\t\t\t:initPushedToUseBitrix24Notifications=\"stages.message.initPushedToUseBitrix24Notifications\"\n\t\t\t\t:selectedSmsSender=\"stages.message.selectedSmsSender\"\n\t\t\t\t:manager=\"stages.message.manager\"\n\t\t\t\t:phone=\"stages.message.phone\"\n\t\t\t\t:contactEditorUrl=\"stages.message.contactEditorUrl\"\n\t\t\t\t:ownerId=\"stages.message.ownerId\"\n\t\t\t\t:ownerTypeId=\"stages.message.ownerTypeId\"\n\t\t\t\t:titleTemplate=\"stages.message.titleTemplate\"\n\t\t\t\t:showHint=\"stages.message.showHint\"\n\t\t\t\t:editorTemplate=\"stages.message.editorTemplate\"\n\t\t\t\t:editorUrl=\"stages.message.editorUrl\"\n\t\t\t\t:selectedMode=\"stages.message.selectedMode\"\n\t\t\t/>\n\t\t\t<product-block\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.product.status\"\n\t\t\t\t:title=\"stages.product.title\"\n\t\t\t\t:hintTitle=\"stages.product.hintTitle\"\n\t\t\t\t@on-product-form-mode-change=\"onProductFormModeChange\"\n\t\t\t/>\n\t\t\t<paysystem-block\n\t\t\t\tv-if=\"editable\"\n\t\t\t\t@on-stage-tile-collection-slider-close=\"stageRefresh($event, 'PAY_SYSTEM')\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.paysystem.status\"\n\t\t\t\t:tiles=\"stages.paysystem.tiles\"\n\t\t\t\t:installed=\"stages.paysystem.installed\"\n\t\t\t\t:titleItems=\"stages.paysystem.titleItems\"\n\t\t\t\t:initialCollapseState=\"stages.paysystem.initialCollapseState\"\n\t\t\t\t@on-save-collapsed-option=\"saveCollapsedOption\"\n\t\t\t/>\n\t\t\t<cashbox-block\n\t\t\t\tv-if=\"editable && hasStageCashBox\"\n\t\t\t\t@on-stage-tile-collection-slider-close=\"stageRefresh($event, 'CASHBOX')\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.cashbox.status\"\n\t\t\t\t:tiles=\"stages.cashbox.tiles\"\n\t\t\t\t:installed=\"stages.cashbox.installed\"\n\t\t\t\t:titleItems=\"stages.cashbox.titleItems\"\n\t\t\t\t:initialCollapseState=\"stages.cashbox.initialCollapseState\"\n\t\t\t\t@on-save-collapsed-option=\"saveCollapsedOption\"\n\t\t\t/>\n\t\t\t<delivery-block\n\t\t\t\tv-if=\"!isHideDeliveryStage\"\n\t\t\t\t@on-stage-tile-collection-slider-close=\"stageRefresh($event, 'DELIVERY')\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.delivery.status\"\n\t\t\t\t:tiles=\"stages.delivery.tiles\"\n\t\t\t\t:installed=\"stages.delivery.installed\"\n\t\t\t\t:isCollapsible=\"true\"\n\t\t\t\t:initialCollapseState=\"stages.delivery.initialCollapseState\"\n\t\t\t\t@on-save-collapsed-option=\"saveCollapsedOption\"\n\t\t\t/>\n\t\t\t<automation-block\n\t\t\t\tv-if=\"editable && hasStageAutomation\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.automation.status\"\n\t\t\t\t:stageOnOrderPaid=\"stages.automation.stageOnOrderPaid\"\n\t\t\t\t:stageOnDeliveryFinished=\"stages.automation.stageOnDeliveryFinished\"\n\t\t\t\t:items=\"stages.automation.items\"\n\t\t\t\t:initialCollapseState=\"stages.automation.initialCollapseState\"\n\t\t\t\t@on-save-collapsed-option=\"saveCollapsedOption\"\n\t\t\t/>\n\t\t\t<send-block\n\t\t\t\t@on-submit=\"onSend\"\n\t\t\t\t:buttonEnabled=\"sendAllowed\"\n\t\t\t\t:showWhatClientSeesControl=\"!editable\"\n\t\t\t\t:buttonLabel=\"submitButtonLabel\"\n\t\t\t/>\n\t\t\t<timeline-block\n\t\t\t\tv-if=\"hasStageTimeLine\"\n\t\t\t\t:timelineItems=\"stages.timeline.items\"\n\t\t\t/>\n\t\t</div>\n\t`\n};\n","import {ajax as Ajax, Loc} from 'main.core';\nimport {StatusTypes as Status} from 'salescenter.component.stage-block';\nimport * as TimeLineItem from 'salescenter.timeline';\nimport {UI} from 'ui.notification';\nimport {MixinTemplatesType} from '../templates-type-mixin';\nimport * as Tile from 'salescenter.tile';\nimport Send from '../deal-receiving-payment/stage-blocks/send';\nimport {Cashbox} from '../stage-blocks/cashbox';\nimport Product from '../stage-blocks/product';\nimport {PaySystem} from '../stage-blocks/paysystem';\nimport {SmsMessage} from '../stage-blocks/sms-message';\nimport {Automation} from '../stage-blocks/automation';\nimport {StageMixin} from '../stage-blocks/stage-mixin';\nimport {TimeLine} from '../stage-blocks/timeline';\nimport {DocumentSelector} from '../stage-blocks/document-selector';\n\nexport default {\n\tcomponents: {\n\t\t'send-block': Send,\n\t\t'cashbox-block': Cashbox,\n\t\t'product-block': Product,\n\t\t'paysystem-block': PaySystem,\n\t\t'automation-block': Automation,\n\t\t'sms-message-block': SmsMessage,\n\t\t'timeline-block': TimeLine,\n\t\t'document-selector-block': DocumentSelector,\n\t},\n\tprops: {\n\t\tsendAllowed: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true\n\t\t},\n\t},\n\tdata()\n\t{\n\t\tlet stages =  {\n\t\t\tmessage: {\n\t\t\t\tinitSenders: this.$root.$app.options.senders,\n\t\t\t\tinitCurrentSenderCode: this.$root.$app.options.currentSenderCode,\n\t\t\t\tinitPushedToUseBitrix24Notifications: this.$root.$app.options.pushedToUseBitrix24Notifications,\n\t\t\t\tstatus: Status.complete,\n\t\t\t\tselectedSmsSender: this.$root.$app.sendingMethodDesc.provider,\n\t\t\t\tmanager: this.$root.$app.options.entityResponsible,\n\t\t\t\tphone: this.$root.$app.options.contactPhone,\n\t\t\t\townerId: this.$root.$app.options.ownerId,\n\t\t\t\townerTypeId: this.$root.$app.options.ownerTypeId,\n\t\t\t\tcontactEditorUrl: this.$root.$app.options.contactEditorUrl,\n\t\t\t\ttitleTemplate: this.$root.$app.sendingMethodDesc.sent\n\t\t\t\t\t? Loc.getMessage('SALESCENTER_APP_CONTACT_BLOCK_TITLE_MESSAGE_2_PAST_TIME')\n\t\t\t\t\t: Loc.getMessage('SALESCENTER_APP_CONTACT_BLOCK_TITLE_MESSAGE_2'),\n\t\t\t\tshowHint: this.$root.$app.options.templateMode !== 'view',\n\t\t\t\teditorTemplate: this.$root.$app.sendingMethodDesc.text,\n\t\t\t\teditorUrl: this.$root.$app.orderPublicUrl,\n\t\t\t\tselectedMode: 'payment',\n\t\t\t},\n\t\t\tproduct: {\n\t\t\t\tstatus: this.$root.$app.options.basket && this.$root.$app.options.basket.length > 0\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.current,\n\t\t\t\ttitle: this.$root.$app.options.templateMode === 'view'\n\t\t\t\t\t? Loc.getMessage('SALESCENTER_PRODUCT_BLOCK_TITLE_PAYMENT_VIEW')\n\t\t\t\t\t: Loc.getMessage('SALESCENTER_PRODUCT_BLOCK_TITLE_SHORT'),\n\t\t\t\thintTitle: this.$root.$app.options.templateMode === 'view'\n\t\t\t\t\t? ''\n\t\t\t\t\t: Loc.getMessage('SALESCENTER_PRODUCT_SET_BLOCK_TITLE_SHORT'),\n\t\t\t},\n\t\t\tpaysystem: {\n\t\t\t\tstatus: this.$root.$app.options.paySystemList.isSet\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled,\n\t\t\t\ttiles: this.getTileCollection(this.$root.$app.options.paySystemList.items),\n\t\t\t\tinstalled: this.$root.$app.options.paySystemList.isSet,\n\t\t\t\ttitleItems: this.getTitleItems(this.$root.$app.options.paySystemList.items),\n\t\t\t\tinitialCollapseState: this.$root.$app.options.isPaySystemCollapsed ? this.$root.$app.options.isPaySystemCollapsed === 'Y' : this.$root.$app.options.paySystemList.isSet,\n\t\t\t},\n\t\t\tcashbox: {},\n\t\t\tautomation: {},\n\t\t\tdocumentSelector: {\n\t\t\t\tstatus: Status.complete,\n\t\t\t},\n\t\t};\n\n\t\tif (this.$root.$app.options.cashboxList.hasOwnProperty('items'))\n\t\t{\n\t\t\tstages.cashbox = {\n\t\t\t\tstatus: this.$root.$app.options.cashboxList.isSet\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled,\n\t\t\t\ttiles: this.getTileCollection(this.$root.$app.options.cashboxList.items),\n\t\t\t\tinstalled: this.$root.$app.options.cashboxList.isSet,\n\t\t\t\ttitleItems: this.getTitleItems(this.$root.$app.options.cashboxList.items),\n\t\t\t\tinitialCollapseState: this.$root.$app.options.isCashboxCollapsed ? this.$root.$app.options.isCashboxCollapsed === 'Y' : this.$root.$app.options.cashboxList.isSet,\n\t\t\t};\n\t\t}\n\n\t\tif (this.$root.$app.options.isAutomationAvailable)\n\t\t{\n\t\t\tstages.automation = {\n\t\t\t\tstatus: Status.complete,\n\t\t\t\tstageOnOrderPaid: this.$root.$app.options.stageOnOrderPaid,\n\t\t\t\titems: this.$root.$app.options.entityStageList,\n\t\t\t\tinitialCollapseState: this.$root.$app.options.isAutomationCollapsed ? this.$root.$app.options.isAutomationCollapsed === 'Y' : false,\n\t\t\t};\n\t\t}\n\n\t\tif (this.$root.$app.options.hasOwnProperty('timeline'))\n\t\t{\n\t\t\tstages.timeline = {\n\t\t\t\titems: this.getTimelineCollection(this.$root.$app.options.timeline)\n\t\t\t}\n\t\t}\n\n\t\tif (this.$root.$app.hasOwnProperty('documentSelector'))\n\t\t{\n\t\t\tif (this.$root.$app.documentSelector.templateAddUrl)\n\t\t\t{\n\t\t\t\tstages.documentSelector.templateAddUrl = this.$root.$app.documentSelector.templateAddUrl;\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\tstages: stages,\n\t\t}\n\t},\n\tmixins: [\n\t\tStageMixin,\n\t\tMixinTemplatesType\n\t],\n\tcomputed: {\n\t\thasStageTimeLine()\n\t\t{\n\t\t\treturn this.stages.timeline.hasOwnProperty('items') && this.stages.timeline.items.length > 0;\n\t\t},\n\t\thasStageAutomation()\n\t\t{\n\t\t\treturn this.stages.automation.hasOwnProperty('items');\n\t\t},\n\t\thasStageCashBox()\n\t\t{\n\t\t\treturn this.stages.cashbox.hasOwnProperty('tiles');\n\t\t},\n\t\tsubmitButtonLabel()\n\t\t{\n\t\t\treturn this.editable ? Loc.getMessage('SALESCENTER_SEND') : Loc.getMessage('SALESCENTER_RESEND');\n\t\t},\n\t\tisShowDocumentSelector()\n\t\t{\n\t\t\treturn this.$root.$app.hasOwnProperty('documentSelector');\n\t\t},\n\t},\n\tmethods: {\n\t\tinitCounter()\n\t\t{\n\t\t\tthis.counter = 1;\n\t\t},\n\t\tgetTimelineCollection(items)\n\t\t{\n\t\t\tlet list = [];\n\n\t\t\tObject.values(items).forEach(\n\t\t\t\toptions => list.push(TimeLineItem.Factory.create(options)));\n\n\t\t\treturn list;\n\t\t},\n\t\tgetTileCollection(items)\n\t\t{\n\t\t\tlet tiles = [];\n\t\t\tObject.values(items).forEach(\n\t\t\t\toptions => tiles.push(Tile.Factory.create(options)));\n\n\t\t\treturn tiles;\n\t\t},\n\t\tgetTitleItems(items)\n\t\t{\n\t\t\tlet result = [];\n\t\t\titems.forEach((item) => {\n\t\t\t\tif (![Tile.More.type(), Tile.Offer.type()].includes(item.type))\n\t\t\t\t{\n\t\t\t\t\tresult.push(item);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn result;\n\t\t},\n\t\tstageRefresh(e, type)\n\t\t{\n\t\t\tAjax.runComponentAction(\n\t\t\t\t\"bitrix:salescenter.app\",\n\t\t\t\t\"getAjaxData\",\n\t\t\t\t{\n\t\t\t\t\tmode: \"class\",\n\t\t\t\t\tdata: {\n\t\t\t\t\t\ttype: type,\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t).then(function(response) {\n\t\t\t\t\tif (response.data)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.refreshTilesByType(response.data, type);\n\t\t\t\t\t}\n\t\t\t\t}.bind(this),\n\t\t\t\tfunction() {\n\t\t\t\t\tUI.Notification.Center.notify({\n\t\t\t\t\t\tcontent: Loc.getMessage('SALESCENTER_DATA_UPDATE_ERROR'),\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t},\n\t\trefreshTilesByType(data, type)\n\t\t{\n\t\t\tif(type === 'PAY_SYSTEM')\n\t\t\t{\n\t\t\t\tthis.stages.paysystem.status = data.isSet\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled;\n\t\t\t\tthis.stages.paysystem.tiles = this.getTileCollection(data.items);\n\t\t\t\tthis.stages.paysystem.installed = data.isSet;\n\t\t\t\tthis.stages.paysystem.titleItems = this.getTitleItems(data.items);\n\t\t\t}\n\t\t\telse if(type === 'CASHBOX')\n\t\t\t{\n\t\t\t\tthis.stages.cashbox.status = data.isSet\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled;\n\t\t\t\tthis.stages.cashbox.tiles = this.getTileCollection(data.items);\n\t\t\t\tthis.stages.cashbox.installed = data.isSet;\n\t\t\t\tthis.stages.cashbox.titleItems = this.getTitleItems(data.items);\n\t\t\t}\n\t\t},\n\t\tonSend(event)\n\t\t{\n\t\t\tthis.$emit('stage-block-send-on-send', event)\n\t\t},\n\t\tchangeProvider(value)\n\t\t{\n\t\t\tthis.$root.$app.sendingMethodDesc.provider = value;\n\t\t\tBX.userOptions.save('salescenter', 'payment_sms_provider_options', 'latest_selected_provider', value);\n\t\t},\n\t\tsaveCollapsedOption(type, value)\n\t\t{\n\t\t\tBX.userOptions.save('salescenter', 'add_payment_collapse_options', type, value);\n\t\t},\n\t},\n\tcreated()\n\t{\n\t\tthis.initCounter();\n\t},\n\tbeforeUpdate()\n\t{\n\t\tthis.initCounter();\n\t},\n\ttemplate: `\n\t\t<div>\n\t\t\t<sms-message-block\n\t\t\t\t@stage-block-sms-send-on-change-provider=\"changeProvider\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.message.status\"\n\t\t\t\t:initSenders=\"stages.message.initSenders\"\n\t\t\t\t:initCurrentSenderCode=\"stages.message.initCurrentSenderCode\"\n\t\t\t\t:initPushedToUseBitrix24Notifications=\"stages.message.initPushedToUseBitrix24Notifications\"\n\t\t\t\t:selectedSmsSender=\"stages.message.selectedSmsSender\"\n\t\t\t\t:manager=\"stages.message.manager\"\n\t\t\t\t:phone=\"stages.message.phone\"\n\t\t\t\t:contactEditorUrl=\"stages.message.contactEditorUrl\"\n\t\t\t\t:ownerId=\"stages.message.ownerId\"\n\t\t\t\t:ownerTypeId=\"stages.message.ownerTypeId\"\n\t\t\t\t:titleTemplate=\"stages.message.titleTemplate\"\n\t\t\t\t:showHint=\"stages.message.showHint\"\n\t\t\t\t:editorTemplate=\"stages.message.editorTemplate\"\n\t\t\t\t:editorUrl=\"stages.message.editorUrl\"\n\t\t\t\t:selectedMode=\"stages.message.selectedMode\"\n\t\t\t/>\n\t\t\t<product-block\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.product.status\"\n\t\t\t\t:title=\"stages.product.title\"\n\t\t\t\t:hintTitle=\"stages.product.hintTitle\"\n\t\t\t/>\n\t\t\t<paysystem-block\n\t\t\t\tv-if=\"editable\"\n\t\t\t\t@on-stage-tile-collection-slider-close=\"stageRefresh($event, 'PAY_SYSTEM')\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.paysystem.status\"\n\t\t\t\t:tiles=\"stages.paysystem.tiles\"\n\t\t\t\t:installed=\"stages.paysystem.installed\"\n\t\t\t\t:titleItems=\"stages.paysystem.titleItems\"\n\t\t\t\t:initialCollapseState=\"stages.paysystem.initialCollapseState\"\n\t\t\t\t@on-save-collapsed-option=\"saveCollapsedOption\"\n\t\t\t/>\n\t\t\t<cashbox-block\n\t\t\t\tv-if=\"editable && hasStageCashBox\"\n\t\t\t\t@on-stage-tile-collection-slider-close=\"stageRefresh($event, 'CASHBOX')\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.cashbox.status\"\n\t\t\t\t:tiles=\"stages.cashbox.tiles\"\n\t\t\t\t:installed=\"stages.cashbox.installed\"\n\t\t\t\t:titleItems=\"stages.cashbox.titleItems\"\n\t\t\t\t:initialCollapseState=\"stages.cashbox.initialCollapseState\"\n\t\t\t\t@on-save-collapsed-option=\"saveCollapsedOption\"\n\t\t\t/>\n\t\t\t<document-selector-block\n\t\t\t\tv-if=\"isShowDocumentSelector\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:templateAddUrl=\"stages.documentSelector.templateAddUrl\"\n\t\t\t/>\n\t\t\t<automation-block\n\t\t\t\tv-if=\"editable && hasStageAutomation\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.automation.status\"\n\t\t\t\t:stageOnOrderPaid=\"stages.automation.stageOnOrderPaid\"\n\t\t\t\t:items=\"stages.automation.items\"\n\t\t\t\t:initialCollapseState=\"stages.automation.initialCollapseState\"\n\t\t\t\t@on-save-collapsed-option=\"saveCollapsedOption\"\n\t\t\t/>\n\t\t\t<send-block\n\t\t\t\t@on-submit=\"onSend\"\n\t\t\t\t:buttonEnabled=\"sendAllowed\"\n\t\t\t\t:showWhatClientSeesControl=\"!editable\"\n\t\t\t\t:buttonLabel=\"submitButtonLabel\"\n\t\t\t/>\n\t\t\t<timeline-block\n\t\t\t\tv-if=\"hasStageTimeLine\"\n\t\t\t\t:timelineItems=\"stages.timeline.items\"\n\t\t\t/>\n\t\t</div>\n\t`\n};\n","import {Loc} from 'main.core';\n\nexport default {\n\tprops: {\n\t\tbuttonEnabled: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomputed: {\n\t\tbuttonClass()\n\t\t{\n\t\t\treturn {'salescenter-app-payment-by-sms-item-disabled': this.buttonEnabled === false};\n\t\t},\n\t},\n\tmethods: {\n\t\tsubmit(event)\n\t\t{\n\t\t\tthis.$emit('on-submit', event);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div\n\t\t\t:class=\"buttonClass\"\n\t\t\tclass=\"salescenter-app-payment-by-sms-item-show salescenter-app-payment-by-sms-item salescenter-app-payment-by-sms-item-send\"\n\t\t>\n\t\t\t<div class=\"salescenter-app-payment-by-sms-item-counter\">\n\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-counter-rounder\"></div>\n\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-counter-line\"></div>\n\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-counter-number\"></div>\n\t\t\t</div>\n\t\t\t<div class=\"\">\n\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container\">\n\t\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container-payment\">\n\t\t\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container-payment-inline\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t@click=\"submit($event)\"\n\t\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-lg ui-btn-success ui-btn-round\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_CREATE_SHIPMENT')}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`\n}\n","import {ajax as Ajax, Loc} from 'main.core';\nimport {StatusTypes as Status} from 'salescenter.component.stage-block';\nimport {UI} from 'ui.notification';\nimport {MixinTemplatesType} from '../templates-type-mixin';\nimport * as Tile from 'salescenter.tile';\nimport Send from './stage-blocks/send';\nimport Product from '../stage-blocks/product';\nimport {DeliveryVuex} from '../stage-blocks/delivery-vuex';\nimport {Automation} from '../stage-blocks/automation';\nimport {StageMixin} from '../stage-blocks/stage-mixin';\n\nexport default {\n\tcomponents: {\n\t\t'send-block'\t\t\t: Send,\n\t\t'product-block'\t\t\t: Product,\n\t\t'delivery-block'\t\t: DeliveryVuex,\n\t\t'automation-block'\t\t: Automation,\n\t},\n\tprops:{\n\t\tsendAllowed: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true\n\t\t},\n\t},\n\tdata()\n\t{\n\t\tlet stages =  {\n\t\t\tproduct:{\n\t\t\t\tstatus:\t\t\t\tthis.$root.$app.options.basket && this.$root.$app.options.basket.length > 0\n\t\t\t\t\t?\tStatus.complete\n\t\t\t\t\t:\tStatus.current,\n\t\t\t\ttitle: this.$root.$app.options.templateMode === 'view'\n\t\t\t\t\t? Loc.getMessage('SALESCENTER_PRODUCT_BLOCK_TITLE_SHIPMENT_VIEW')\n\t\t\t\t\t: Loc.getMessage('SALESCENTER_PRODUCT_BLOCK_TITLE_SHORT_SHIPMENT'),\n\t\t\t},\n\t\t\tdelivery:{\n\t\t\t\tstatus: \t\t\tthis.$root.$app.options.deliveryList.isInstalled\n\t\t\t\t\t?\tStatus.complete\n\t\t\t\t\t:\tStatus.disabled,\n\t\t\t\ttiles:\t\t\tthis.getTileCollection(\n\t\t\t\t\tthis.$root.$app.options.deliveryList.items),\n\t\t\t\tinstalled:\t\t\tthis.$root.$app.options.deliveryList.isInstalled,\n\t\t\t\tinitialCollapseState: this.$root.$app.options.isDeliveryCollapsed ? this.$root.$app.options.isDeliveryCollapsed === 'Y' : this.$root.$app.options.deliveryList.isInstalled,\n\t\t\t},\n\t\t\tautomation:{}\n\t\t};\n\n\t\tif (this.$root.$app.options.isAutomationAvailable)\n\t\t{\n\t\t\tstages.automation = {\n\t\t\t\tstatus:\t\t\t\t\t\tStatus.complete,\n\t\t\t\tstageOnDeliveryFinished:\tthis.$root.$app.options.stageOnDeliveryFinished,\n\t\t\t\titems:\t\t\t\t\t\tthis.$root.$app.options.entityStageList,\n\t\t\t\tinitialCollapseState: \t\tthis.$root.$app.options.isAutomationCollapsed ? this.$root.$app.options.isAutomationCollapsed === 'Y' : false,\n\t\t\t};\n\t\t}\n\n\t\treturn {\n\t\t\tstages: stages,\n\t\t}\n\t},\n\tmixins:[StageMixin, MixinTemplatesType],\n\tcomputed:\n\t\t{\n\t\t\thasStageAutomation()\n\t\t\t{\n\t\t\t\treturn this.stages.automation.hasOwnProperty('items');\n\t\t\t},\n\t\t\teditableMixin()\n\t\t\t{\n\t\t\t\treturn this.editable === false;\n\t\t\t},\n\t\t\tisViewTemplateMode()\n\t\t\t{\n\t\t\t\treturn this.$root.$app.options.templateMode === 'view';\n\t\t\t},\n\t\t},\n\tmethods:\n\t\t{\n\t\t\tinitCounter()\n\t\t\t{\n\t\t\t\tthis.counter = 1;\n\t\t\t},\n\n\t\t\tgetTileCollection(items)\n\t\t\t{\n\t\t\t\tlet tiles = [];\n\t\t\t\tObject.values(items).forEach(\n\t\t\t\t\toptions => tiles.push(Tile.Factory.create(options)));\n\n\t\t\t\treturn tiles;\n\t\t\t},\n\n\t\t\tgetTitleItems(items)\n\t\t\t{\n\t\t\t\tlet result = [];\n\t\t\t\titems.forEach((item) => {\n\t\t\t\t\tif (![Tile.More.type(), Tile.Offer.type()].includes(item.type))\n\t\t\t\t\t{\n\t\t\t\t\t\tresult.push(item);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\treturn result;\n\t\t\t},\n\n\t\t\tstageRefresh(e, type)\n\t\t\t{\n\t\t\t\tAjax.runComponentAction(\n\t\t\t\t\t\"bitrix:salescenter.app\",\n\t\t\t\t\t\"getAjaxData\",\n\t\t\t\t\t{\n\t\t\t\t\t\tmode: \"class\",\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\ttype: type,\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t).then(function(response) {\n\t\t\t\t\tif (response.data)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.refreshTilesByType(response.data, type);\n\t\t\t\t\t}\n\t\t\t\t}.bind(this),\n\t\t\t\tfunction() {\n\t\t\t\t\tUI.Notification.Center.notify({\n\t\t\t\t\t\tcontent: Loc.getMessage('SALESCENTER_DATA_UPDATE_ERROR'),\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t},\n\n\t\t\trefreshTilesByType(data, type)\n\t\t\t{\n\t\t\t\tif(type === 'DELIVERY')\n\t\t\t\t{\n\t\t\t\t\tthis.stages.delivery.status = \t\tdata.isSet\n\t\t\t\t\t\t?\tStatus.complete\n\t\t\t\t\t\t:\tStatus.disabled;\n\t\t\t\t\tthis.stages.delivery.tiles = \t\tthis.getTileCollection(data.items);\n\t\t\t\t\tthis.stages.delivery.installed = \tdata.isInstalled;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tonSend(event)\n\t\t\t{\n\t\t\t\tthis.$emit('stage-block-send-on-send', event)\n\t\t\t},\n\n\t\t\tsaveCollapsedOption(type, value)\n\t\t\t{\n\t\t\t\tBX.userOptions.save('salescenter', 'add_shipment_collapse_options', type, value);\n\t\t\t},\n\t\t},\n\tcreated()\n\t{\n\t\tthis.initCounter();\n\t},\n\tbeforeUpdate()\n\t{\n\t\tthis.initCounter();\n\t},\n\ttemplate: `\n\t\t<div>\n\t\t\t<product-block \n\t\t\t\t:counter=\t\"counter++\"\n\t\t\t\t:status= \t\"stages.product.status\"\n\t\t\t\t:title=\t\t\"stages.product.title\"\t\t\n\t\t\t\t:hintTitle=\t\t\"''\"\n\t\t\t/>\n\t\t\t\n\t\t\t<delivery-block\t\t\t\t\t\t\tv-on:on-stage-tile-collection-slider-close=\"stageRefresh($event, 'DELIVERY')\"\n\t\t\t\t:counter=\t\"counter++\"\n\t\t\t\t:status=  \t\"stages.delivery.status\"\n\t\t\t\t:tiles=  \t\"stages.delivery.tiles\"\n\t\t\t\t:installed=\t\"stages.delivery.installed\"\n\t\t\t\t:isCollapsible=\"false\"\n\t\t\t\t:initialCollapseState = \"stages.delivery.initialCollapseState\"\n\t\t\t\t@on-save-collapsed-option=\"saveCollapsedOption\"\n\t\t\t/>\n\t\t\t\t\t\t\t\t\t\n\t\t\t<automation-block v-if=\"editable && hasStageAutomation\"\n\t\t\t\t:counter=\t\"counter++\"\n\t\t\t\t:status=\t\"stages.automation.status\"\n\t\t\t\t:stageOnDeliveryFinished=\t\"stages.automation.stageOnDeliveryFinished\"\n\t\t\t\t:items=\t\t\"stages.automation.items\"\n\t\t\t\t:initialCollapseState = \"stages.automation.initialCollapseState\"\n\t\t\t\t@on-save-collapsed-option=\"saveCollapsedOption\"\n\t\t\t/>\n\t\t\t\n\t\t\t<send-block\n\t\t\t\tv-if=\"!isViewTemplateMode\"\n\t\t\t\t@on-submit=\"onSend\"\n\t\t\t\t:buttonEnabled=\"sendAllowed\"\n\t\t\t/>\n\t\t</div>\n\t`\n};\n","import { ajax as Ajax, Loc, Text, Event } from 'main.core';\nimport { TagSelector } from 'ui.entity-selector';\nimport { Block } from 'salescenter.component.stage-block';\nimport { StageMixin } from './stage-mixin';\n\nconst ResponsibleSelector = {\n\tprops: {\n\t\tstatus: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tcounter: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tselectedUser: {\n\t\t\ttype: Number,\n\t\t\trequired: false,\n\t\t},\n\t\tresponsible: {\n\t\t\ttype: Object,\n\t\t\trequired: false,\n\t\t},\n\t\tisMobileInstalledForResponsible: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t},\n\t\teditable: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t\tcontact: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\thintTitle: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t},\n\t},\n\n\tmixins: [StageMixin],\n\n\tcomponents: {\n\t\t'stage-block-item':\tBlock,\n\t},\n\n\tcomputed: {\n\t\tisCreateMode()\n\t\t{\n\t\t\treturn this.$root.$app.options.templateMode === 'create';\n\t\t},\n\t\tconfigForBlock()\n\t\t{\n\t\t\treturn {\n\t\t\t\tcounter: this.counter,\n\t\t\t\ttitleItems: [],\n\t\t\t\tinstalled: true,\n\t\t\t\tcollapsible: false,\n\t\t\t\tchecked: this.counterCheckedMixin,\n\t\t\t\tshowHint: true,\n\t\t\t};\n\t\t},\n\t\tcontactInfo()\n\t\t{\n\t\t\tif (this.contact.name || this.contact.phone)\n\t\t\t{\n\t\t\t\treturn Loc.getMessage(\n\t\t\t\t\t'SALESCENTER_PAYMENT_RESPONSIBLE_SELECTOR_BLOCK_CONTACT_INFO_TEMPLATE',\n\t\t\t\t\t{\n\t\t\t\t\t\t'[span]': '<span class=\"salescenter-responsible-block-contact\">',\n\t\t\t\t\t\t'[/span]': '</span>',\n\t\t\t\t\t\t'#CONTACT_NAME#': Text.encode(this.contact.name),\n\t\t\t\t\t\t'#CONTACT_PHONE#': Text.encode(this.contact.phone),\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t}\n\n\t\t\treturn '';\n\t\t},\n\t\taddEmployee()\n\t\t{\n\t\t\treturn Loc.getMessage(\n\t\t\t\t'SALESCENTER_PAYMENT_RESPONSIBLE_SELECTOR_BLOCK_ADD_EMPLOYEE',\n\t\t\t\t{\n\t\t\t\t\t'[link]': '<span id=\"add-employee-link\" class=\"salescenter-responsible-block-add-employee-link\">',\n\t\t\t\t\t'[/link]': '</span>',\n\t\t\t\t},\n\t\t\t);\n\t\t},\n\t\tresponsibleHeaderText()\n\t\t{\n\t\t\treturn this.isCreateMode ? Loc.getMessage('SALESCENTER_PAYMENT_RESPONSIBLE_SELECTOR_BLOCK_RESPONSIBLE_CREATE') : Loc.getMessage('SALESCENTER_PAYMENT_RESPONSIBLE_SELECTOR_BLOCK_RESPONSIBLE_VIEW');\n\t\t},\n\t\tavatarStyle()\n\t\t{\n\t\t\tconst url = this.responsible.photo ? { 'background-image': `url(${this.responsible.photo})` } : null;\n\n\t\t\treturn [url];\n\t\t},\n\t},\n\n\tmounted()\n\t{\n\t\tthis.$store.commit('orderCreation/setMobileInstalledForResponsible', this.isMobileInstalledForResponsible ?? true);\n\n\t\tconst addEmployeeLink = document.getElementById('add-employee-link');\n\t\tif (addEmployeeLink)\n\t\t{\n\t\t\tEvent.bind(addEmployeeLink, 'click', (event) => {\n\t\t\t\tthis.$root.$app.openMobileAppPopup();\n\t\t\t});\n\t\t}\n\n\t\tif (!this.editable)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst selectorRoot = document.getElementById('salescenterResponsibleSelector');\n\n\t\tconst dialogOptions = {\n\t\t\tcontext: 'salescenter_responsible',\n\t\t\tentities: [\n\t\t\t\t{\n\t\t\t\t\tid: 'user',\n\t\t\t\t},\n\t\t\t],\n\t\t\tevents: {\n\t\t\t\t'Item:onSelect': (event) => {\n\t\t\t\t\tthis.onResponsibleChanged(event);\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\n\t\tif (this.selectedUser)\n\t\t{\n\t\t\tdialogOptions.preselectedItems = [\n\t\t\t\t['user', this.selectedUser],\n\t\t\t];\n\t\t\tdialogOptions.undeselectedItems = [\n\t\t\t\t['user', this.selectedUser],\n\t\t\t];\n\t\t}\n\n\t\tconst tagSelector = new TagSelector({\n\t\t\tmultiple: false,\n\t\t\tdialogOptions,\n\t\t\tdeselectable: false,\n\t\t});\n\n\t\ttagSelector.renderTo(selectorRoot);\n\t},\n\n\tmethods: {\n\t\tonResponsibleChanged(event)\n\t\t{\n\t\t\tconst { item } = event.getData();\n\n\t\t\titem.setDeselectable(false);\n\t\t\tevent.target?.tagSelector?.updateTags();\n\t\t\tthis.$store.commit('orderCreation/setPaymentResponsibleId', item.getId());\n\n\t\t\tconst isSubmitEnabled = this.$store.getters['orderCreation/isAllowedSubmit'];\n\t\t\tthis.$store.commit('orderCreation/disableSubmit');\n\t\t\tAjax.runAction('salescenter.terminalResponsible.getUserMobileInfo', {\n\t\t\t\tdata: {\n\t\t\t\t\tuserId: item.getId(),\n\t\t\t\t},\n\t\t\t}).then((result) => {\n\t\t\t\tthis.$store.commit('orderCreation/setMobileInstalledForResponsible', result.data.isMobileInstalled);\n\t\t\t\tif (!result.data.isMobileInstalled)\n\t\t\t\t{\n\t\t\t\t\tthis.$store.commit('orderCreation/setResponsiblePhoneNumbers', result.data.phones);\n\t\t\t\t}\n\n\t\t\t\tif (isSubmitEnabled)\n\t\t\t\t{\n\t\t\t\t\tthis.$store.commit('orderCreation/enableSubmit');\n\t\t\t\t}\n\n\t\t\t\tthis.$emit('on-responsible-changed', event);\n\t\t\t});\n\t\t},\n\t\tonItemHint(event)\n\t\t{\n\t\t\tBX.Salescenter.Manager.openHowTerminalWorks();\n\t\t},\n\t},\n\n\tcreated()\n\t{\n\t\tif (this.selectedUser)\n\t\t{\n\t\t\tthis.$store.commit('orderCreation/setPaymentResponsibleId', this.selectedUser);\n\t\t}\n\t},\n\n\t// language=Vue\n\ttemplate: `\n\t\t<stage-block-item\n\t\t\t:class=\"statusClassMixin\"\n\t\t\t:config=\"configForBlock\"\n\t\t\tv-on:on-item-hint=\"onItemHint\"\n\t\t>\n\t\t\t<template v-slot:block-title-title>{{ title }}</template>\n\t\t\t<template v-slot:block-hint-title>{{ hintTitle }}</template>\n\t\t\t<template v-slot:block-container>\n\t\t\t\t<div :class=\"containerClassMixin\">\n\t\t\t\t\t<p class=\"salescenter-responsible-block-responsible-header\">{{ responsibleHeaderText }}</p>\n\t\t\t\t\t<div id=\"salescenterResponsibleSelector\" v-if=\"editable\"></div>\n\t\t\t\t\t<div class=\"salescenter-responsible-block-responsible-wrapper\" v-else>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclass=\"salescenter-app-payment-by-sms-item-container-sms-user-avatar salescenter-responsible-block-responsible-photo\"\n\t\t\t\t\t\t\t:style=\"avatarStyle\"></div>\n\t\t\t\t\t\t<div class=\"salescenter-responsible-block-responsible-name-wrapper\">\n\t\t\t\t\t\t\t<a class=\"salescenter-responsible-block-responsible-name\">{{ responsible.fullName }}</a>\n\t\t\t\t\t\t\t<div class=\"salescenter-responsible-block-responsible-position-wrapper\">\n\t\t\t\t\t\t\t\t<span class=\"salescenter-responsible-block-responsible-position\">{{ responsible.position }}</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div v-html=\"contactInfo\" class=\"salescenter-responsible-block-contact-info\" v-if=\"!isCreateMode\"></div>\n\t\t\t\t\t<div v-html=\"addEmployee\" class=\"salescenter-responsible-block-add-employee\" v-else></div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</stage-block-item>\n\t`,\n};\n\nexport\n{\n\tResponsibleSelector,\n};\n","export default {\n\tprops: {\n\t\tbuttonLabel: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tbuttonEnabled: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomputed: {\n\t\tbuttonClass()\n\t\t{\n\t\t\treturn { 'salescenter-app-payment-by-sms-item-disabled': this.buttonEnabled === false };\n\t\t},\n\t},\n\tmethods: {\n\t\tsubmit(event)\n\t\t{\n\t\t\tthis.$emit('on-submit', event);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div\n\t\t\t:class=\"buttonClass\"\n\t\t\tclass=\"salescenter-app-payment-by-sms-item-show salescenter-app-payment-by-sms-item salescenter-app-payment-by-sms-item-send\"\n\t\t>\n\t\t\t<div class=\"salescenter-app-payment-by-sms-item-counter\">\n\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-counter-rounder\"></div>\n\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-counter-line\"></div>\n\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-counter-number\"></div>\n\t\t\t</div>\n\t\t\t<div class=\"\">\n\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container\">\n\t\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container-payment\">\n\t\t\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container-payment-inline\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t@click=\"submit($event)\"\n\t\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-lg ui-btn-success ui-btn-round\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{{buttonLabel}}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { Loc, Tag } from 'main.core';\nimport { Block } from 'salescenter.component.stage-block';\nimport { StageMixin } from '../../stage-blocks/stage-mixin';\nimport { CurrencyCore } from 'currency.currency-core';\n\nexport default {\n\tprops: {\n\t\tstatus: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tcounter: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\thintTitle: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tmixins: [StageMixin],\n\tmounted()\n\t{\n\t\t// temporary fix; see the comment in the product block (product.js) for more details\n\t\tconst editable = this.$root.$app.options.templateMode !== 'view';\n\t\tthis.$root.$emit('on-change-editable', editable);\n\t\tthis.$store.commit('orderCreation/enableSubmit');\n\t},\n\tcomponents:\n\t\t{\n\t\t\t'stage-block-item': Block,\n\t\t},\n\tmethods:\n\t\t{\n\t\t\tonItemHint(e)\n\t\t\t{\n\t\t\t\tBX.Salescenter.Manager.openHowToSell(e);\n\t\t\t},\n\t\t\tonProductFormModeChange(event)\n\t\t\t{\n\t\t\t\tthis.$emit('on-product-form-mode-change');\n\t\t\t},\n\t\t},\n\tcomputed:\n\t\t{\n\t\t\tconfigForBlock()\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\tcounter: this.counter,\n\t\t\t\t\tchecked: this.counterCheckedMixin,\n\t\t\t\t\tshowHint: true,\n\t\t\t\t};\n\t\t\t},\n\t\t\tformattedSum()\n\t\t\t{\n\t\t\t\tconst defaultCurrency = this.$root.$app.options.currencyCode || '';\n\t\t\t\tconst sum = CurrencyCore.currencyFormat(this.$root.$app.options.totals.result, defaultCurrency, false);\n\t\t\t\tconst element = Tag.render`<span class=\"catalog-pf-text salescenter-amount-block-amount-result-text--total\">${sum}</span>`;\n\n\t\t\t\treturn CurrencyCore.getPriceControl(element, defaultCurrency);\n\t\t\t},\n\t\t},\n\ttemplate: `\n\t\t<stage-block-item\n\t\t\t@on-item-hint.stop.prevent=\"onItemHint\"\n\t\t\t:config=\"configForBlock\"\n\t\t\t:class=\"statusClassMixin\"\n\t\t>\n\t\t\t<template v-slot:block-title-title>{{ title }}</template>\n\t\t\t<template v-slot:block-hint-title>{{ hintTitle }}</template>\n\t\t\t<template v-slot:block-container>\n\t\t\t\t<div :class=\"containerClassMixin\">\n\t\t\t\t\t<div class=\"salescenter-amount-block-stub-wrapper\">\n\t\t\t\t\t\t<div class=\"salescenter-amount-block-stub-icon\"></div>\n\t\t\t\t\t\t<div class=\"salescenter-amount-block-stub-text-wrapper\">\n\t\t\t\t\t\t\t<h3 class=\"salescenter-amount-block-stub-title\">${Loc.getMessage('SALESCENTER_AMOUNT_BLOCK_STUB_TITLE')}</h3>\n\t\t\t\t\t\t\t<p class=\"salescenter-amount-block-stub-text\">${Loc.getMessage('SALESCENTER_AMOUNT_BLOCK_STUB_TEXT')}</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"salescenter-amount-block-amount-wrapper\">\n\t\t\t\t\t\t<table class=\"salescenter-amount-block-amount-result\">\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td class=\"salescenter-amount-block-amount-result-cell\">\n\t\t\t\t\t\t\t\t\t<span class=\"salescenter-amount-block-amount-result-text salescenter-amount-block-amount-result-text--total\">${Loc.getMessage('SALESCENTER_AMOUNT_BLOCK_TOTAL')}</span>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t<td class=\"salescenter-amount-block-amount-result-cell\">\n\t\t\t\t\t\t\t\t\t<span class=\"salescenter-amount-block-amount-result-symbol salescenter-amount-block-amount-result-symbol--total\" v-html=\"formattedSum\"></span>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</table>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</stage-block-item>\n\t`,\n};\n","import { ajax as Ajax, Loc, Runtime, userOptions as UserOptions } from 'main.core';\nimport { StatusTypes as Status } from 'salescenter.component.stage-block';\nimport * as TimeLineItem from 'salescenter.timeline';\nimport { UI } from 'ui.notification';\nimport { MixinTemplatesType } from '../templates-type-mixin';\nimport * as Tile from 'salescenter.tile';\nimport { ResponsibleSelector } from '../stage-blocks/responsible-selector';\nimport { Cashbox } from '../stage-blocks/cashbox';\nimport Product from '../stage-blocks/product';\nimport { PaySystem } from '../stage-blocks/paysystem';\nimport { Automation } from '../stage-blocks/automation';\nimport { StageMixin } from '../stage-blocks/stage-mixin';\nimport { TimeLine } from '../stage-blocks/timeline';\nimport Send from './stage-blocks/send';\nimport Amount from './stage-blocks/amount';\n\nexport default {\n\tcomponents: {\n\t\t'responsible-block': ResponsibleSelector,\n\t\t'cashbox-block': Cashbox,\n\t\t'product-block': Product,\n\t\t'paysystem-block': PaySystem,\n\t\t'automation-block': Automation,\n\t\t'timeline-block': TimeLine,\n\t\t'send-block': Send,\n\t\t'amount-block': Amount,\n\t},\n\tprops: {\n\t\tsendAllowed: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tmounted()\n\t{\n\t\tconst tourOptions = this.$root.$app.options.terminalTour;\n\t\tif (tourOptions['step-2-shown'] !== 'Y' && this.$root.$app.options.payment?.PAID !== 'Y')\n\t\t{\n\t\t\tRuntime.loadExtension('ui.tour').then((exports) => {\n\t\t\t\tconst { Guide } = exports;\n\t\t\t\tconst guide = new Guide({\n\t\t\t\t\tsteps: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttarget: document.querySelector('#salescenterResponsibleSelector'),\n\t\t\t\t\t\t\ttext: Loc.getMessage('SALESCENTER_TERMINAL_TOUR_STEP_2_TEXT'),\n\t\t\t\t\t\t\tposition: 'bottom',\n\t\t\t\t\t\t\tarticle: '18537646',\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t\tonEvents: true,\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tonFinish: () => {\n\t\t\t\t\t\t\tUserOptions.save('salescenter.tour', 'crm-terminal-tour', 'step-2-shown', 'Y');\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t});\n\n\t\t\t\tguide.getPopup().setAutoHide(true);\n\n\t\t\t\tguide.showNextStep();\n\t\t\t});\n\t\t}\n\t},\n\tdata()\n\t{\n\t\tconst stages = {\n\t\t\tresponsible: {\n\t\t\t\tstatus: Status.complete,\n\t\t\t\tselectedUser: parseInt(this.$root.$app.options.paymentResponsible ?? 0),\n\t\t\t\tresponsible: this.$root.$app.options.entityResponsible,\n\t\t\t\tisMobileInstalledForResponsible: this.$root.$app.options.isMobileInstalledForResponsible,\n\t\t\t\tcontact: {\n\t\t\t\t\tname: this.$root.$app.options.contactName,\n\t\t\t\t\tphone: this.$root.$app.options.contactPhone,\n\t\t\t\t},\n\t\t\t\teditable: this.$root.$app.options.templateMode === 'create' || this.$root.$app.options.payment?.PAID === 'N',\n\t\t\t\thintTitle: this.$root.$app.options.templateMode === 'view'\n\t\t\t\t\t? ''\n\t\t\t\t\t: Loc.getMessage('SALESCENTER_HOW_TERMINAL_WORKS'),\n\t\t\t},\n\t\t\tproduct: {\n\t\t\t\tstatus: this.$root.$app.options.basket && this.$root.$app.options.basket.length > 0\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.current,\n\t\t\t\ttitle: this.$root.$app.options.templateMode === 'view'\n\t\t\t\t\t? Loc.getMessage('SALESCENTER_PRODUCT_BLOCK_TITLE_PAYMENT_VIEW')\n\t\t\t\t\t: Loc.getMessage('SALESCENTER_PRODUCT_BLOCK_TITLE_SHORT'),\n\t\t\t\thintTitle: '',\n\t\t\t},\n\t\t\tpaysystem: {\n\t\t\t\tstatus: this.$root.$app.options.paySystemList.isSet\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled,\n\t\t\t\ttiles: this.getTileCollection(this.$root.$app.options.paySystemList.items),\n\t\t\t\tinstalled: this.$root.$app.options.paySystemList.isSet,\n\t\t\t\ttitleItems: this.getTitleItems(this.$root.$app.options.paySystemList.items),\n\t\t\t\tinitialCollapseState: this.$root.$app.options.isPaySystemCollapsed ? this.$root.$app.options.isPaySystemCollapsed === 'Y' : this.$root.$app.options.paySystemList.isSet,\n\t\t\t},\n\t\t\tcashbox: {},\n\t\t\tautomation: {},\n\t\t};\n\n\t\tif (this.$root.$app.options.cashboxList.hasOwnProperty('items'))\n\t\t{\n\t\t\tstages.cashbox = {\n\t\t\t\tstatus: this.$root.$app.options.cashboxList.isSet\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled,\n\t\t\t\ttiles: this.getTileCollection(this.$root.$app.options.cashboxList.items),\n\t\t\t\tinstalled: this.$root.$app.options.cashboxList.isSet,\n\t\t\t\ttitleItems: this.getTitleItems(this.$root.$app.options.cashboxList.items),\n\t\t\t\tinitialCollapseState: this.$root.$app.options.isCashboxCollapsed ? this.$root.$app.options.isCashboxCollapsed === 'Y' : this.$root.$app.options.cashboxList.isSet,\n\t\t\t};\n\t\t}\n\n\t\tif (this.$root.$app.options.isAutomationAvailable)\n\t\t{\n\t\t\tstages.automation = {\n\t\t\t\tstatus: Status.complete,\n\t\t\t\tstageOnOrderPaid: this.$root.$app.options.stageOnOrderPaid,\n\t\t\t\titems: this.$root.$app.options.entityStageList,\n\t\t\t\tinitialCollapseState: this.$root.$app.options.isAutomationCollapsed ? this.$root.$app.options.isAutomationCollapsed === 'Y' : false,\n\t\t\t};\n\t\t}\n\n\t\tif (this.$root.$app.options.hasOwnProperty('timeline'))\n\t\t{\n\t\t\tstages.timeline = {\n\t\t\t\titems: this.getTimelineCollection(this.$root.$app.options.timeline),\n\t\t\t};\n\t\t}\n\n\t\tif (this.$root.$app.options.paySystemList.groups)\n\t\t{\n\t\t\tstages.paysystem.groups = this.getTileGroupsCollection(\n\t\t\t\tthis.$root.$app.options.paySystemList.groups,\n\t\t\t\tstages.paysystem.tiles,\n\t\t\t);\n\t\t}\n\n\t\tif (this.$root.$app.options.templateMode === 'view' && this.$root.$app.options.payment?.PAID === 'Y')\n\t\t{\n\t\t\tstages.responsible.title = Loc.getMessage('SALESCENTER_PAYMENT_RESPONSIBLE_SELECTOR_BLOCK_TITLE_PAID_VIEW');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tstages.responsible.title = Loc.getMessage('SALESCENTER_PAYMENT_RESPONSIBLE_SELECTOR_BLOCK_TITLE');\n\t\t}\n\n\t\treturn {\n\t\t\tstages,\n\t\t};\n\t},\n\tmixins: [\n\t\tStageMixin,\n\t\tMixinTemplatesType,\n\t],\n\tcomputed: {\n\t\thasStageTimeLine()\n\t\t{\n\t\t\treturn this.stages.timeline.hasOwnProperty('items') && this.stages.timeline.items.length > 0;\n\t\t},\n\t\thasStageAutomation()\n\t\t{\n\t\t\treturn this.stages.automation.hasOwnProperty('items');\n\t\t},\n\t\thasStageCashBox()\n\t\t{\n\t\t\treturn this.stages.cashbox.hasOwnProperty('tiles');\n\t\t},\n\t\tsubmitButtonLabel()\n\t\t{\n\t\t\treturn this.editable ? Loc.getMessage('SALESCENTER_CREATE_TERMINAL_PAYMENT') : Loc.getMessage('SALESCENTER_SAVE');\n\t\t},\n\t\thasProducts()\n\t\t{\n\t\t\treturn !this.$root.$app.options.isPaymentByAmount;\n\t\t},\n\t},\n\tmethods: {\n\t\tinitCounter()\n\t\t{\n\t\t\tthis.counter = 1;\n\t\t},\n\t\tgetTimelineCollection(items)\n\t\t{\n\t\t\tconst list = [];\n\n\t\t\tObject.values(items).forEach(\n\t\t\t\t(options) => list.push(TimeLineItem.Factory.create(options)),\n\t\t\t);\n\n\t\t\treturn list;\n\t\t},\n\t\tgetTileCollection(items)\n\t\t{\n\t\t\tconst tiles = [];\n\t\t\tObject.values(items).forEach(\n\t\t\t\t(options) => tiles.push(Tile.Factory.create(options)),\n\t\t\t);\n\n\t\t\treturn tiles;\n\t\t},\n\t\tgetTileGroupsCollection(groups, tiles)\n\t\t{\n\t\t\tconst ret = [];\n\n\t\t\tif (Array.isArray(groups))\n\t\t\t{\n\t\t\t\tObject.values(groups).forEach((item) => {\n\t\t\t\t\tconst group = new Tile.Group(item);\n\t\t\t\t\tgroup.fillTiles(tiles);\n\t\t\t\t\tret.push(group);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn ret;\n\t\t},\n\t\tgetTitleItems(items)\n\t\t{\n\t\t\tconst result = [];\n\t\t\titems.forEach((item) => {\n\t\t\t\tif (![Tile.More.type(), Tile.Offer.type()].includes(item.type))\n\t\t\t\t{\n\t\t\t\t\tresult.push(item);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn result;\n\t\t},\n\t\tstageRefresh(e, type)\n\t\t{\n\t\t\tAjax.runComponentAction(\n\t\t\t\t'bitrix:salescenter.app',\n\t\t\t\t'getAjaxData',\n\t\t\t\t{\n\t\t\t\t\tmode: 'class',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\ttype,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t).then(\n\t\t\t\t(response) => {\n\t\t\t\t\tif (response.data)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.refreshTilesByType(response.data, type);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t() => {\n\t\t\t\t\tUI.Notification.Center.notify({\n\t\t\t\t\t\tcontent: Loc.getMessage('SALESCENTER_DATA_UPDATE_ERROR'),\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t);\n\t\t},\n\t\trefreshTilesByType(data, type)\n\t\t{\n\t\t\tswitch (type)\n\t\t\t{\n\t\t\t\tcase 'PAY_SYSTEM': {\n\t\t\t\t\tthis.stages.paysystem.status = data.isSet\n\t\t\t\t\t\t? Status.complete\n\t\t\t\t\t\t: Status.disabled;\n\t\t\t\t\tthis.stages.paysystem.tiles = this.getTileCollection(data.items);\n\t\t\t\t\tthis.stages.paysystem.groups = this.getTileGroupsCollection(data.groups, this.stages.paysystem.tiles);\n\t\t\t\t\tthis.stages.paysystem.installed = data.isSet;\n\t\t\t\t\tthis.stages.paysystem.titleItems = this.getTitleItems(data.items);\n\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tcase 'CASHBOX': {\n\t\t\t\t\tthis.stages.cashbox.status = data.isSet\n\t\t\t\t\t\t? Status.complete\n\t\t\t\t\t\t: Status.disabled;\n\t\t\t\t\tthis.stages.cashbox.tiles = this.getTileCollection(data.items);\n\t\t\t\t\tthis.stages.cashbox.installed = data.isSet;\n\t\t\t\t\tthis.stages.cashbox.titleItems = this.getTitleItems(data.items);\n\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t// No default\n\t\t\t}\n\t\t},\n\t\tonSend(event)\n\t\t{\n\t\t\tthis.$emit('stage-block-send-on-send', event);\n\t\t},\n\t\tonResponsibleChanged(event)\n\t\t{\n\t\t\tthis.$emit('on-responsible-changed', event);\n\t\t},\n\t\tsaveCollapsedOption(type, value)\n\t\t{\n\t\t\tBX.userOptions.save('salescenter', 'add_payment_collapse_options', type, value);\n\t\t},\n\t},\n\tcreated()\n\t{\n\t\tthis.initCounter();\n\t},\n\tbeforeUpdate()\n\t{\n\t\tthis.initCounter();\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<div class=\"salescenter-app-terminal-wrapper\">\n\t\t\t<responsible-block\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.responsible.status\"\n\t\t\t\t:title=\"stages.responsible.title\"\n\t\t\t\t:selectedUser=\"stages.responsible.selectedUser\"\n\t\t\t\t:responsible=\"stages.responsible.responsible\"\n\t\t\t\t:isMobileInstalledForResponsible=\"stages.responsible.isMobileInstalledForResponsible\"\n\t\t\t\t:contact=\"stages.responsible.contact\"\n\t\t\t\t:editable=\"stages.responsible.editable\"\n\t\t\t\t:hintTitle=\"stages.responsible.hintTitle\"\n\t\t\t\t@on-responsible-changed=\"onResponsibleChanged\"\n\t\t\t/>\n\t\t\t<product-block\n\t\t\t\tv-if=\"hasProducts\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.product.status\"\n\t\t\t\t:title=\"stages.product.title\"\n\t\t\t\t:hintTitle=\"stages.product.hintTitle\"\n\t\t\t\t:additionalContainerClasses=\"{ 'salescenter-app-teminal-products-item': true }\"\n\t\t\t/>\n\t\t\t<amount-block\n\t\t\t\tv-else\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.product.status\"\n\t\t\t\t:title=\"stages.product.title\"\n\t\t\t\t:hintTitle=\"stages.product.hintTitle\"\n\t\t\t/>\n\t\t\t<paysystem-block\n\t\t\t\tv-if=\"editable\"\n\t\t\t\t@on-stage-tile-collection-slider-close=\"stageRefresh($event, 'PAY_SYSTEM')\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.paysystem.status\"\n\t\t\t\t:tiles=\"stages.paysystem.tiles\"\n\t\t\t\t:installed=\"stages.paysystem.installed\"\n\t\t\t\t:titleItems=\"stages.paysystem.titleItems\"\n\t\t\t\t:initialCollapseState=\"stages.paysystem.initialCollapseState\"\n\t\t\t\t@on-save-collapsed-option=\"saveCollapsedOption\"\n\t\t\t/>\n\t\t\t<cashbox-block\n\t\t\t\tv-if=\"editable && hasStageCashBox\"\n\t\t\t\t@on-stage-tile-collection-slider-close=\"stageRefresh($event, 'CASHBOX')\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.cashbox.status\"\n\t\t\t\t:tiles=\"stages.cashbox.tiles\"\n\t\t\t\t:installed=\"stages.cashbox.installed\"\n\t\t\t\t:titleItems=\"stages.cashbox.titleItems\"\n\t\t\t\t:initialCollapseState=\"stages.cashbox.initialCollapseState\"\n\t\t\t\t@on-save-collapsed-option=\"saveCollapsedOption\"\n\t\t\t/>\n\t\t\t<automation-block\n\t\t\t\tv-if=\"editable && hasStageAutomation\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.automation.status\"\n\t\t\t\t:stageOnOrderPaid=\"stages.automation.stageOnOrderPaid\"\n\t\t\t\t:items=\"stages.automation.items\"\n\t\t\t\t:initialCollapseState=\"stages.automation.initialCollapseState\"\n\t\t\t\t@on-save-collapsed-option=\"saveCollapsedOption\"\n\t\t\t/>\n\t\t\t<send-block\n\t\t\t\tv-if=\"editable\"\n\t\t\t\t@on-submit=\"onSend\"\n\t\t\t\t:buttonEnabled=\"sendAllowed\"\n\t\t\t\t:buttonLabel=\"submitButtonLabel\"\n\t\t\t/>\n\t\t\t<timeline-block\n\t\t\t\tv-if=\"hasStageTimeLine\"\n\t\t\t\t:timelineItems=\"stages.timeline.items\"\n\t\t\t/>\n\t\t</div>\n\t`,\n};\n","import { Vuex } from 'ui.vue.vuex';\nimport StageBlocksList from './components/deal-receiving-payment/stage-blocks-list';\nimport EntityCreatePaymentStages from './components/crm-entity-create-payment/stage-blocks-list';\nimport StageBlocksListShipment from './components/deal-creating-shipment/stage-blocks-list';\nimport TerminalStageBlocksList from './components/deal-terminal-payment/stage-blocks-list';\nimport ComponentMixin from './component-mixin';\nimport { Loc, Runtime, userOptions as UserOptions } from 'main.core';\nimport { MixinTemplatesType } from './components/templates-type-mixin';\nimport Start from './start';\nimport { ModeDictionary } from './const/mode-dictionary';\n\nimport { SenderConfig } from 'salescenter.lib';\n\nexport default {\n\tmixins: [MixinTemplatesType, ComponentMixin],\n\tdata()\n\t{\n\t\tlet isPanelVisible = true;\n\t\tif (this.$root.$app.options.mode === ModeDictionary.terminalPayment && this.$root.$app.options.templateMode === 'view' && this.$root.$app.options.payment?.PAID === 'N')\n\t\t{\n\t\t\tisPanelVisible = false;\n\t\t}\n\n\t\treturn {\n\t\t\tactiveMenuItem: this.$root.$app.options.mode,\n\t\t\tisLoading: false,\n\t\t\tisPanelVisible,\n\t\t\tModeDictionary,\n\t\t};\n\t},\n\tcomponents: {\n\t\t'deal-receiving-payment': StageBlocksList,\n\t\t'crm-entity-create-payment': EntityCreatePaymentStages,\n\t\t'deal-creating-shipment': StageBlocksListShipment,\n\t\t'deal-terminal-payment': TerminalStageBlocksList,\n\t\t'start': Start,\n\t},\n\tmounted()\n\t{\n\t\tconst tourOptions = this.$root.$app.options.terminalTour;\n\t\tif (tourOptions['step-1-shown'] !== 'Y' && tourOptions['step-2-shown'] !== 'Y' && this.activeMenuItem !== ModeDictionary.terminalPayment && this.initialMode !== ModeDictionary.terminalPayment)\n\t\t{\n\t\t\tRuntime.loadExtension('spotlight').then((exports) => {\n\t\t\t\tconst spotlight = new BX.SpotLight(\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'terminal-tour-spotlight',\n\t\t\t\t\t\ttargetElement: document.querySelector('.salescenter-menu-terminal-payment'),\n\t\t\t\t\t\tautoSave: true,\n\t\t\t\t\t\ttargetVertex: 'middle-center',\n\t\t\t\t\t\tzIndex: 200,\n\t\t\t\t\t\tleft: -40,\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t\tspotlight.show();\n\t\t\t\tspotlight.container.style.pointerEvents = \"none\";\n\t\t\t\tUserOptions.save('salescenter.tour', 'crm-terminal-tour', 'step-1-shown', 'Y');\n\t\t\t});\n\t\t}\n\t},\n\tmethods: {\n\t\treload(form)\n\t\t{\n\t\t\tif (this.isLoading || !this.editable)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.isLoading = true;\n\t\t\tthis.activeMenuItem = form;\n\t\t\tthis.$emit(\n\t\t\t\t'on-reload',\n\t\t\t\t{\n\t\t\t\t\tcontext: this.$root.$app.options.context,\n\t\t\t\t\torderId: this.$root.$app.orderId,\n\t\t\t\t\townerTypeId: this.$root.$app.options.ownerTypeId,\n\t\t\t\t\townerId: this.$root.$app.options.ownerId,\n\t\t\t\t\ttemplateMode: 'create',\n\t\t\t\t\tmode: this.activeMenuItem,\n\t\t\t\t\tshowModeList: this.$root.$app.options.showModeList,\n\t\t\t\t\tinitialMode: this.$root.$app.options.initialMode,\n\t\t\t\t}\n\t\t\t);\n\t\t},\n\t\tonSuccessfullyConnected()\n\t\t{\n\t\t\tthis.reload(this.activeMenuItem);\n\t\t},\n\t\tonReload()\n\t\t{\n\t\t\tthis.reload(this.activeMenuItem);\n\t\t},\n\t\tsendPaymentDeliveryForm(event)\n\t\t{\n\t\t\tif (!this.isAllowedPaymentDeliverySubmitButton)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.$store.getters['orderCreation/isCompilationMode'])\n\t\t\t{\n\t\t\t\tthis.$root.$app.sendCompilation(event.target);\n\t\t\t}\n\t\t\telse if (this.editable)\n\t\t\t{\n\t\t\t\tthis.$root.$app.sendPayment(event.target);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.$root.$app.resendPayment(event.target);\n\t\t\t}\n\t\t},\n\t\tsendDeliveryForm(event)\n\t\t{\n\t\t\tif (!this.isAllowedDeliverySubmitButton)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.$root.$app.sendShipment(event.target);\n\t\t},\n\t\tsendTerminalPaymentForm(event)\n\t\t{\n\t\t\tif (!this.isAllowedTerminalPaymentSubmitButton)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.templateMode === 'view')\n\t\t\t{\n\t\t\t\tthis.$root.$app.updateTerminalPayment(event.target);\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.$root.$app.sendTerminalPayment(event.target);\n\t\t},\n\t\t// region menu item handlers\n\t\tspecifyCompanyContacts()\n\t\t{\n\t\t\tBX.Salescenter.Manager.openSlider(this.$root.$app.options.urlSettingsCompanyContacts, {width: 1200} );\n\t\t},\n\t\tsuggestScenario(event)\n\t\t{\n\t\t\tBX.Salescenter.Manager.openFeedbackPayOrderForm(event);\n\t\t},\n\t\thowItWorks(event)\n\t\t{\n\t\t\tif (this.mode === ModeDictionary.payment)\n\t\t\t{\n\t\t\t\tBX.Salescenter.Manager.openHowPaySmartInvoiceWorks(event);\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.mode === ModeDictionary.terminalPayment)\n\t\t\t{\n\t\t\t\tBX.Salescenter.Manager.openHowTerminalWorks(event);\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tBX.Salescenter.Manager.openHowPayDealWorks(event);\n\t\t},\n\t\topenIntegrationWindow(event)\n\t\t{\n\t\t\tBX.Salescenter.Manager.openIntegrationRequestForm(event);\n\t\t},\n\t\tfreeMessages()\n\t\t{\n\t\t\tlet senders = this.$root.$app.options.senders\n\n\t\t\tlet sender = senders.filter(item => item.code === SenderConfig.BITRIX24)\n\n\t\t\tif(sender.length > 0)\n\t\t\t{\n\t\t\t\tlet fixed = SenderConfig.openSliderFreeMessages(sender[0].connectUrl);\n\t\t\t\tfixed().then()\n\t\t\t}\n\t\t},\n\t\tonResponsibleChanged(event)\n\t\t{\n\t\t\t// it needs to be done like that and not with vue's @class attribute because is breaks BX.UI.Pinner's classes\n\t\t\tconst buttonsPanel = this.$refs['buttonsPanel'];\n\t\t\tbuttonsPanel.classList.remove('salescenter-button-panel-hidden');\n\t\t\tconst pinnerAnchor = document.querySelector('.salescenter-app-pinner-anchor');\n\t\t\tpinnerAnchor.classList.remove('salescenter-app-pinner-anchor-hidden');\n\t\t},\n\t\topenTerminalToolDisabledSlider()\n\t\t{\n\t\t\tRuntime.loadExtension('ui.info-helper').then(() => {\n\t\t\t\ttop.BX.UI.InfoHelper.show('limit_crm_terminal_off');\n\t\t\t});\n\t\t},\n\t\topenSalescanterToolDisabledSlider()\n\t\t{\n\t\t\tBX.loadExt('salescenter.tool-availability-manager').then(() => {\n\t\t\t\tBX.Salescenter.ToolAvailabilityManager.openSalescenterToolDisabledSlider();\n\t\t\t});\n\t\t},\n\t\t// endregion\n\t},\n\tcomputed: {\n\t\tmode()\n\t\t{\n\t\t\treturn this.$root.$app.options.mode;\n\t\t},\n\t\ttemplateMode()\n\t\t{\n\t\t\treturn this.$root.$app.options.templateMode;\n\t\t},\n\t\tinitialMode()\n\t\t{\n\t\t\treturn this.$root.$app.options.initialMode;\n\t\t},\n\t\tisAllowedFreeMessagesButton()\n\t\t{\n\t\t\tlet senders = this.$root.$app.options.senders\n\n\t\t\tlet sender = senders.filter(item => item.code === SenderConfig.BITRIX24)\n\n\t\t\tif(sender.length > 0)\n\t\t\t{\n\t\t\t\treturn SenderConfig.needConfigure(sender[0])\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\tisOnlyDeliveryItemVisible()\n\t\t{\n\t\t\treturn (\n\t\t\t\tthis.initialMode === ModeDictionary.delivery\n\t\t\t\t&& this.$root.$app.options.hasOwnProperty('deliveryList')\n\t\t\t\t&& this.$root.$app.options.deliveryList.hasOwnProperty('hasInstallable')\n\t\t\t\t&& this.$root.$app.options.deliveryList.hasInstallable\n\t\t\t);\n\t\t},\n\t\tisTerminalItemVisible()\n\t\t{\n\t\t\treturn this.isPaymentItemVisible && this.$root.$app.options.isTerminalAvailable;\n\t\t},\n\t\tisTerminalToolEnabled()\n\t\t{\n\t\t\treturn this.$root.$app.options.isTerminalToolEnabled;\n\t\t},\n\t\tisSalescenterToolEnabled()\n\t\t{\n\t\t\treturn this.$root.$app.options.isSalescenterToolEnabled;\n\t\t},\n\t\tisPaymentItemVisible()\n\t\t{\n\t\t\treturn (\n\t\t\t\tthis.initialMode === ModeDictionary.payment\n\t\t\t\t|| this.initialMode === ModeDictionary.paymentDelivery\n\t\t\t\t|| this.initialMode === ModeDictionary.terminalPayment\n\t\t\t);\n\t\t},\n\t\tisAllowedPaymentDeliverySubmitButton()\n\t\t{\n\t\t\tif (!this.$root.$app.hasClientContactInfo())\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tconst senders = this.$root.$app.options.senders;\n\t\t\tconst filteredSenders = senders.filter(sender => (\n\t\t\t\tsender.code === this.$root.$app.options.currentSenderCode && sender.isConnected\n\t\t\t));\n\t\t\tif (filteredSenders.length === 0)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn this.$store.getters['orderCreation/isAllowedSubmit'];\n\t\t},\n\t\tisAllowedTerminalPaymentSubmitButton()\n\t\t{\n\t\t\treturn (\n\t\t\t\tthis.$store.getters['orderCreation/isAllowedSubmit']\n\t\t\t\t|| this.isTerminalViewModeSaveAllowed\n\t\t\t);\n\t\t},\n\t\tisTerminalViewModeSaveAllowed()\n\t\t{\n\t\t\treturn this.templateMode === 'view' && this.$root.$app.options.payment?.PAID === 'N';\n\t\t},\n\t\tisAllowedDeliverySubmitButton()\n\t\t{\n\t\t\tconst deliveryId = this.$store.getters['orderCreation/getDeliveryId'];\n\t\t\tif (!deliveryId)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif (!this.$store.getters['orderCreation/isAllowedSubmit'])\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn (deliveryId != this.$root.$app.options.emptyDeliveryServiceId);\n\t\t},\n\t\tisSuggestScenarioMenuItemVisible()\n\t\t{\n\t\t\treturn this.$root.$app.options.isBitrix24;\n\t\t},\n\t\tisRequestIntegrationMenuItemVisible()\n\t\t{\n\t\t\treturn this.$root.$app.options.isIntegrationButtonVisible;\n\t\t},\n\t\tisModeListVisible()\n\t\t{\n\t\t\treturn this.$root.$app.options.showModeList ?? true;\n\t\t},\n\t\tneedShowStoreConnection()\n\t\t{\n\t\t\treturn !this.isOrderPublicUrlAvailable && this.mode !== ModeDictionary.delivery;\n\t\t},\n\t\tisSidebarEnabled()\n\t\t{\n\t\t\treturn true; // not removing this just yet because who knows...\n\t\t},\n\t\tsendPaymentDeliveryFormButtonText()\n\t\t{\n\t\t\treturn this.editable ? Loc.getMessage('SALESCENTER_SEND') : Loc.getMessage('SALESCENTER_RESEND');\n\t\t},\n\t\ttitle()\n\t\t{\n\t\t\treturn this.$root.$app.options.title;\n\t\t},\n\t\t// classes region\n\t\tpaymentDeliveryFormSubmitButtonClass()\n\t\t{\n\t\t\treturn {'ui-btn-disabled': !this.isAllowedPaymentDeliverySubmitButton};\n\t\t},\n\t\tdeliveryFormSubmitButtonClass()\n\t\t{\n\t\t\treturn {'ui-btn-disabled': !this.isAllowedDeliverySubmitButton};\n\t\t},\n\t\tterminalPaymentFormSubmitButtonClass()\n\t\t{\n\t\t\treturn {'ui-btn-disabled': !this.isAllowedTerminalPaymentSubmitButton};\n\t\t},\n\t\tpaymentMenuItemClass()\n\t\t{\n\t\t\treturn {\n\t\t\t\t'salescenter-app-sidebar-menu-active': this.activeMenuItem === ModeDictionary.payment,\n\t\t\t};\n\t\t},\n\t\tpaymentTerminalMenuItemClass()\n\t\t{\n\t\t\treturn {\n\t\t\t\t'salescenter-app-sidebar-menu-active': this.activeMenuItem === ModeDictionary.terminalPayment,\n\t\t\t};\n\t\t},\n\t\tpaymentDeliveryMenuItemClass()\n\t\t{\n\t\t\treturn {\n\t\t\t\t'salescenter-app-sidebar-menu-active': this.activeMenuItem === ModeDictionary.paymentDelivery,\n\t\t\t};\n\t\t},\n\t\tdeliveryMenuItemClass()\n\t\t{\n\t\t\treturn {\n\t\t\t\t'salescenter-app-sidebar-menu-active': this.activeMenuItem === ModeDictionary.delivery,\n\t\t\t};\n\t\t},\n\t\t// endregion\n\t\t...Vuex.mapState({\n\t\t\tapplication: state => state.application,\n\t\t\torder: state => state.orderCreation,\n\t\t})\n\t},\n\t//language=Vue\n\ttemplate: `\n\t\t<div>\n\t\t\t<div\n\t\t\t\t:class=\"wrapperClass\"\n\t\t\t\t:style=\"wrapperStyle\"\n\t\t\t\tclass=\"salescenter-app-wrapper\"\n\t\t\t>\n\t\t\t\t<div class=\"ui-sidepanel-sidebar salescenter-app-sidebar\" v-if=\"isSidebarEnabled\">\n\t\t\t\t\t<ul class=\"ui-sidepanel-menu\">\n\t\t\t\t\t\t<template v-if=\"templateMode === 'view'\">\n\t\t\t\t\t\t\t<li class=\"ui-sidepanel-menu-item salescenter-app-sidebar-menu-active\">\n\t\t\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link\">\n\t\t\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">{{title}}</div>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t<template v-else-if=\"isModeListVisible\">\n\t\t\t\t\t\t\t<template v-if=\"isOnlyDeliveryItemVisible\">\n\t\t\t\t\t\t\t\t<li\n\t\t\t\t\t\t\t\t\t:class=\"deliveryMenuItemClass\"\n\t\t\t\t\t\t\t\t\tclass=\"ui-sidepanel-menu-item\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">\n\t\t\t\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_LEFT_CREATE_SHIPMENT_MSGVER_1')}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t\t\t<li\n\t\t\t\t\t\t\t\t\tv-if=\"isPaymentItemVisible\"\n\t\t\t\t\t\t\t\t\t@click=\"isSalescenterToolEnabled ? reload(ModeDictionary.payment) : openSalescanterToolDisabledSlider()\"\n\t\t\t\t\t\t\t\t\t:class=\"paymentMenuItemClass\"\n\t\t\t\t\t\t\t\t\tclass=\"ui-sidepanel-menu-item\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">\n\t\t\t\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_LEFT_TAKE_PAYMENT')}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</li>\n\t\n\t\t\t\t\t\t\t\t<li\n\t\t\t\t\t\t\t\t\tv-if=\"isTerminalItemVisible\"\n\t\t\t\t\t\t\t\t\t@click=\"isTerminalToolEnabled ? reload(ModeDictionary.terminalPayment) : openTerminalToolDisabledSlider()\"\n\t\t\t\t\t\t\t\t\t:class=\"paymentTerminalMenuItemClass\"\n\t\t\t\t\t\t\t\t\tclass=\"ui-sidepanel-menu-item\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link salescenter-menu-terminal-payment\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">\n\t\t\t\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_LEFT_TERMINAL_PAYMENT')}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</li>\n\t\n\t\t\t\t\t\t\t\t<li\n\t\t\t\t\t\t\t\t\tv-if=\"isPaymentItemVisible\"\n\t\t\t\t\t\t\t\t\t@click=\"isSalescenterToolEnabled ? reload(ModeDictionary.paymentDelivery) : openSalescanterToolDisabledSlider()\"\n\t\t\t\t\t\t\t\t\t:class=\"paymentDeliveryMenuItemClass\"\n\t\t\t\t\t\t\t\t\tclass=\"ui-sidepanel-menu-item\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">\n\t\t\t\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_LEFT_TAKE_PAYMENT_AND_CREATE_SHIPMENT')}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</template>\n\t\n\t\t\t\t\t\t<li class=\"ui-sidepanel-menu-item ui-sidepanel-menu-item-sm ui-sidepanel-menu-item-separate\">\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t@click=\"specifyCompanyContacts\"\n\t\t\t\t\t\t\t\tclass=\"ui-sidepanel-menu-link\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">\n\t\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_LEFT_PAYMENT_COMPANY_CONTACTS')}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li\n\t\t\t\t\t\t\tv-if=\"isSuggestScenarioMenuItemVisible\"\n\t\t\t\t\t\t\tclass=\"ui-sidepanel-menu-item ui-sidepanel-menu-item-sm\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t@click=\"suggestScenario($event)\"\n\t\t\t\t\t\t\t\tclass=\"ui-sidepanel-menu-link\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">\n\t\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_LEFT_PAYMENT_OFFER_SCRIPT')}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class=\"ui-sidepanel-menu-item ui-sidepanel-menu-item-sm\">\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t@click=\"howItWorks($event)\"\n\t\t\t\t\t\t\t\tclass=\"ui-sidepanel-menu-link\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">\n\t\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_LEFT_PAYMENT_HOW_WORKS')}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li\n\t\t\t\t\t\t\tv-if=\"isAllowedFreeMessagesButton\"\n\t\t\t\t\t\t\tclass=\"ui-sidepanel-menu-item ui-sidepanel-menu-item-sm\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t@click=\"freeMessages($event)\"\n\t\t\t\t\t\t\t\tclass=\"ui-sidepanel-menu-link\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">\n\t\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_LEFT_PAYMENT_FREE_MESSAGES')}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li\n\t\t\t\t\t\t\tv-if=\"isRequestIntegrationMenuItemVisible\"\n\t\t\t\t\t\t\tclass=\"ui-sidepanel-menu-item ui-sidepanel-menu-item-sm\">\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t@click=\"openIntegrationWindow($event)\"\n\t\t\t\t\t\t\t\tclass=\"ui-sidepanel-menu-link\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\"\n\t\t\t\t\t\t\t\t\t data-manager-openIntegrationRequestForm-params=\"sender_page:deal\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_LEFT_PAYMENT_INTEGRATION_MSGVER_2')}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"salescenter-app-right-side\">\n\t\t\t\t\t<start\n\t\t\t\t\t\tv-if=\"needShowStoreConnection\"\n\t\t\t\t\t\t@on-successfully-connected=\"onSuccessfullyConnected\"\n\t\t\t\t\t>\n\t\t\t\t\t</start>\n\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t<deal-receiving-payment\n\t\t\t\t\t\t\tv-if=\"mode === ModeDictionary.paymentDelivery\"\n\t\t\t\t\t\t\t@stage-block-on-reload=\"onReload\"\n\t\t\t\t\t\t\t@stage-block-send-on-send=\"sendPaymentDeliveryForm($event)\"\n\t\t\t\t\t\t\t:sendAllowed=\"isAllowedPaymentDeliverySubmitButton\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<deal-creating-shipment\n\t\t\t\t\t\t\tv-else-if=\"mode === ModeDictionary.delivery\"\n\t\t\t\t\t\t\t@stage-block-send-on-send=\"sendDeliveryForm($event)\"\n\t\t\t\t\t\t\t:sendAllowed=\"isAllowedDeliverySubmitButton\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<crm-entity-create-payment\n\t\t\t\t\t\t\tv-if=\"mode === ModeDictionary.payment\"\n\t\t\t\t\t\t\t@stage-block-send-on-send=\"sendPaymentDeliveryForm($event)\"\n\t\t\t\t\t\t\t:sendAllowed=\"isAllowedPaymentDeliverySubmitButton\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<deal-terminal-payment\n\t\t\t\t\t\t\tv-if=\"mode === ModeDictionary.terminalPayment\"\n\t\t\t\t\t\t\t@stage-block-send-on-send=\"sendTerminalPaymentForm($event)\"\n\t\t\t\t\t\t\t@on-responsible-changed=\"onResponsibleChanged($event)\"\n\t\t\t\t\t\t\t:sendAllowed=\"isAllowedTerminalPaymentSubmitButton\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</template>\n\t\t\t\t</div>\n\t\t\t\t<template v-if=\"!(mode === 'terminal_payment' && templateMode === 'view' && !isTerminalViewModeSaveAllowed)\">\n\t\t\t\t\t<div class=\"ui-button-panel-wrapper salescenter-button-panel\" ref=\"buttonsPanel\" :class=\"{ 'salescenter-button-panel-hidden': !isPanelVisible }\">\n\t\t\t\t\t\t<div class=\"ui-button-panel\">\n\t\t\t\t\t\t\t<template v-if=\"mode === ModeDictionary.paymentDelivery || mode === ModeDictionary.payment\">\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t@click=\"sendPaymentDeliveryForm($event)\"\n\t\t\t\t\t\t\t\t\t:class=\"paymentDeliveryFormSubmitButtonClass\"\n\t\t\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-md ui-btn-success\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{{sendPaymentDeliveryFormButtonText}}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t@click=\"close\"\n\t\t\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-md ui-btn-link\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_CANCEL')}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t<template v-else-if=\"mode === 'terminal_payment'\">\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tv-if=\"editable\"\n\t\t\t\t\t\t\t\t\t@click=\"sendTerminalPaymentForm($event)\"\n\t\t\t\t\t\t\t\t\t:class=\"terminalPaymentFormSubmitButtonClass\"\n\t\t\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-md ui-btn-success\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_CREATE_TERMINAL_PAYMENT')}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tv-if=\"isTerminalViewModeSaveAllowed\"\n\t\t\t\t\t\t\t\t\t@click=\"sendTerminalPaymentForm($event)\"\n\t\t\t\t\t\t\t\t\t:class=\"terminalPaymentFormSubmitButtonClass\"\n\t\t\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-md ui-btn-success\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_SAVE')}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t@click=\"close\"\n\t\t\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-md ui-btn-link\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_CANCEL')}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t<template v-else-if=\"mode === ModeDictionary.delivery\">\n\t\t\t\t\t\t\t\t<template v-if=\"editable\">\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t@click=\"sendDeliveryForm($event)\"\n\t\t\t\t\t\t\t\t\t\t:class=\"deliveryFormSubmitButtonClass\"\n\t\t\t\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-md ui-btn-success\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_CREATE_SHIPMENT')}\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t@click=\"close\"\n\t\t\t\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-md ui-btn-link\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_CANCEL')}\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div v-if=\"this.order.errors.length > 0\" ref=\"errorBlock\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t</div>\n\t\t\t<div class=\"salescenter-app-pinner-anchor\" :class=\"{ 'salescenter-app-pinner-anchor-hidden': !isPanelVisible }\"></div>\n\t\t</div>\n\t`,\n};\n","import {VuexBuilderModel} from 'ui.vue.vuex';\n\nexport class ApplicationModel extends VuexBuilderModel\n{\n\t/**\n\t * @inheritDoc\n\t */\n\tgetName()\n\t{\n\t\treturn 'application';\n\t}\n\n\tgetState()\n\t{\n\t\treturn {\n\t\t\tpages: [],\n\t\t}\n\t}\n\n\tgetGetters()\n\t{\n\t\treturn {\n\t\t\tgetPages: (state) => () =>\n\t\t\t{\n\t\t\t\treturn state.pages;\n\t\t\t},\n\t\t}\n\t}\n\n\tgetMutations()\n\t{\n\t\treturn {\n\t\t\tsetPages: (state, payload) =>\n\t\t\t{\n\t\t\t\tif(typeof payload.pages === 'object')\n\t\t\t\t{\n\t\t\t\t\tstate.pages = payload.pages        ;\n\t\t\t\t\tthis.saveState(state);\n\t\t\t\t}\n\t\t\t},\n\t\t\tremovePage: (state, payload) =>\n\t\t\t{\n\t\t\t\tif(typeof payload.page === 'object')\n\t\t\t\t{\n\t\t\t\t\tstate.pages = state.pages.filter((page) => {\n\t\t\t\t\t\treturn !(\n\t\t\t\t\t\t\t(payload.page.id && payload.page.id > 0 && page.id === payload.page.id) ||\n\t\t\t\t\t\t\t(payload.page.landingId && payload.page.landingId > 0 && page.landingId === payload.page.landingId)\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\t\t\tthis.saveState(state);\n\t\t\t\t}\n\t\t\t},\n\t\t\taddPage: (state, payload) =>\n\t\t\t{\n\t\t\t\tif(typeof payload.page === 'object')\n\t\t\t\t{\n\t\t\t\t\tstate.pages.push(payload.page);\n\t\t\t\t\tthis.saveState(state);\n\t\t\t\t}\n\t\t\t},\n\t\t}\n\t}\n}","import {VuexBuilderModel} from 'ui.vue.vuex';\nimport {rest as Rest} from 'rest.client';\n\nexport class DocumentSelectorModel extends VuexBuilderModel\n{\n\t/**\n\t * @inheritDoc\n\t */\n\tgetName()\n\t{\n\t\treturn 'documentSelector';\n\t}\n\n\tgetActions()\n\t{\n\t\treturn {\n\t\t\taddDocument({commit, dispatch}, {document})\n\t\t\t{\n\t\t\t\tcommit('addDocument', {document});\n\t\t\t\tdispatch('setBoundDocumentId', {boundDocumentId: document.id});\n\t\t\t},\n\t\t\tsetBoundDocumentId({state, commit}, {boundDocumentId})\n\t\t\t{\n\t\t\t\tif (state.paymentId > 0)\n\t\t\t\t{\n\t\t\t\t\tRest.callMethod('crm.documentgenerator.document.bindToPayment', {\n\t\t\t\t\t\tid: boundDocumentId,\n\t\t\t\t\t\tpaymentId: state.paymentId,\n\t\t\t\t\t}).then(() => {\n\t\t\t\t\t\tcommit('setBoundDocumentId', {boundDocumentId});\n\t\t\t\t\t}).catch((response) => {\n\t\t\t\t\t\tconsole.error(response);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tcommit('setBoundDocumentId', {boundDocumentId});\n\t\t\t\t}\n\t\t\t},\n\t\t\tloadTemplates({state, commit})\n\t\t\t{\n\t\t\t\tif (Number(state.entityTypeId) <= 0 || Number(state.entityId) <= 0)\n\t\t\t\t{\n\t\t\t\t\tcommit('setTemplates', {templates: []});\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tRest.callMethod('crm.documentgenerator.template.listForItem', {\n\t\t\t\t\tentityTypeId: state.entityTypeId,\n\t\t\t\t\tentityId: state.entityId,\n\t\t\t\t}).then((response) => {\n\t\t\t\t\tif (response.answer.result.templates)\n\t\t\t\t\t{\n\t\t\t\t\t\tcommit('setTemplates', {templates: response.answer.result.templates});\n\t\t\t\t\t}\n\t\t\t\t}).catch((response) => {\n\t\t\t\t\tconsole.error(response);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\tgetState()\n\t{\n\t\treturn {\n\t\t\tentityTypeId: null,\n\t\t\tentityId: null,\n\t\t\tpaymentId: null,\n\t\t\tdocuments: [],\n\t\t\ttemplates: [],\n\t\t\tboundDocumentId: null,\n\t\t\tselectedTemplateId: null,\n\t\t}\n\t}\n\n\tgetGetters()\n\t{\n\t\treturn {\n\t\t\tgetTemplates: (state) => {\n\t\t\t\treturn state.templates;\n\t\t\t},\n\t\t\tgetDocuments: (state) => {\n\t\t\t\treturn state.documents;\n\t\t\t},\n\t\t\tgetBoundDocumentId: (state) => {\n\t\t\t\treturn state.boundDocumentId;\n\t\t\t},\n\t\t\tgetSelectedTemplateId: (state) => {\n\t\t\t\treturn state.selectedTemplateId;\n\t\t\t},\n\t\t}\n\t}\n\n\tgetMutations()\n\t{\n\t\treturn {\n\t\t\tfillState: (state, payload) => {\n\t\t\t\tstate.entityTypeId = payload.entityTypeId;\n\t\t\t\tstate.entityId = payload.entityId;\n\t\t\t\tstate.paymentId = payload.paymentId;\n\t\t\t\tstate.documents = payload.documents;\n\t\t\t\tstate.templates = payload.templates;\n\t\t\t\tstate.boundDocumentId = payload.boundDocumentId;\n\t\t\t\tstate.selectedTemplateId = payload.selectedTemplateId;\n\t\t\t},\n\t\t\tsetTemplates: (state, payload) => {\n\t\t\t\tif(typeof payload.templates === 'object')\n\t\t\t\t{\n\t\t\t\t\tstate.templates = payload.templates;\n\t\t\t\t}\n\t\t\t},\n\t\t\tsetBoundDocumentId: (state, payload) => {\n\t\t\t\tif(typeof payload.boundDocumentId === 'number')\n\t\t\t\t{\n\t\t\t\t\tstate.boundDocumentId = payload.boundDocumentId;\n\t\t\t\t}\n\t\t\t},\n\t\t\tsetSelectedTemplateId: (state, payload) => {\n\t\t\t\tif(typeof payload.selectedTemplateId === 'number')\n\t\t\t\t{\n\t\t\t\t\tstate.selectedTemplateId = payload.selectedTemplateId;\n\t\t\t\t\tstate.boundDocumentId = null;\n\t\t\t\t}\n\t\t\t},\n\t\t\taddDocument: (state, payload) => {\n\t\t\t\tif(typeof payload.document === 'object')\n\t\t\t\t{\n\t\t\t\t\tconst newDocument = payload.document;\n\t\t\t\t\tif (!newDocument.id)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tconst documents = state.documents || [];\n\t\t\t\t\tlet isUpdated = false;\n\t\t\t\t\tfor (const index in documents)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (documents[index].id === newDocument.id)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tdocuments[index] = newDocument;\n\t\t\t\t\t\t\tisUpdated = true;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (!isUpdated)\n\t\t\t\t\t{\n\t\t\t\t\t\tdocuments.unshift(newDocument);\n\t\t\t\t\t}\n\t\t\t\t\tstate.documents = documents;\n\t\t\t\t}\n\t\t\t},\n\t\t}\n\t}\n}\n","import {VuexBuilderModel} from 'ui.vue.vuex';\n\nexport class OrderCreationModel extends VuexBuilderModel\n{\n\t/**\n\t * @inheritDoc\n\t */\n\tgetName()\n\t{\n\t\treturn 'orderCreation';\n\t}\n\n\tgetState()\n\t{\n\t\treturn {\n\t\t\tcurrency: '',\n\t\t\tprocessingId: null,\n\t\t\tbasket: [],\n\t\t\tbasketVersion: 0,\n\t\t\tpropertyValues: [],\n\t\t\tdeliveryExtraServicesValues: [],\n\t\t\texpectedDelivery: null,\n\t\t\tdeliveryResponsibleId: null,\n\t\t\tpersonTypeId: null,\n\t\t\tdeliveryId: null,\n\t\t\tdelivery: null,\n\t\t\tisEnabledSubmit: false,\n\t\t\tisCompilationMode: false,\n\t\t\terrors: [],\n\t\t\ttotal: {\n\t\t\t\tsum: null,\n\t\t\t\tdiscount: null,\n\t\t\t\tresult: null,\n\t\t\t},\n\t\t\t/**\n\t\t\t * ID of selected pay systems available for order payment\n\t\t\t */\n\t\t\tavailablePaySystemsIds: [],\n\t\t\tpaymentResponsibleId: null,\n\t\t\tisMobileInstalledForResponsible: false,\n\t\t\tresponsiblePhoneNumbers: [],\n\t\t};\n\t}\n\n\tgetActions()\n\t{\n\t\treturn {\n\t\t\tresetBasket ({ commit })\n\t\t\t{\n\t\t\t\tcommit('clearBasket');\n\t\t\t},\n\t\t\tsetCurrency: ({ commit }, payload) =>\n\t\t\t{\n\t\t\t\tconst currency = payload || '';\n\t\t\t\tcommit('setCurrency', currency);\n\t\t\t},\n\t\t\tsetDeliveryId: ({ commit }, payload) =>\n\t\t\t{\n\t\t\t\tcommit('setDeliveryId', payload);\n\t\t\t},\n\t\t\tsetDelivery: ({ commit }, payload) =>\n\t\t\t{\n\t\t\t\tcommit('setDelivery', payload);\n\t\t\t},\n\t\t\tsetPropertyValues: ({ commit }, payload) =>\n\t\t\t{\n\t\t\t\tcommit('setPropertyValues', payload);\n\t\t\t},\n\t\t\tsetDeliveryExtraServicesValues: ({ commit }, payload) =>\n\t\t\t{\n\t\t\t\tcommit('setDeliveryExtraServicesValues', payload);\n\t\t\t},\n\t\t\tsetExpectedDelivery: ({ commit }, payload) =>\n\t\t\t{\n\t\t\t\tcommit('setExpectedDelivery', payload);\n\t\t\t},\n\t\t\tsetDeliveryResponsibleId: ({ commit }, payload) =>\n\t\t\t{\n\t\t\t\tcommit('setDeliveryResponsibleId', payload);\n\t\t\t},\n\t\t\tsetPaymentResponsibleId: ({ commit }, payload) =>\n\t\t\t{\n\t\t\t\tcommit('setPaymentResponsibleId', payload);\n\t\t\t},\n\t\t\tsetMobileInstalledForResponsible: ({ commit }, payload) =>\n\t\t\t{\n\t\t\t\tcommit('setMobileInstalledForResponsible', payload);\n\t\t\t},\n\t\t\tsetResponsiblePhoneNumbers: ({ commit }, payload) =>\n\t\t\t{\n\t\t\t\tcommit('setResponsiblePhoneNumbers', payload);\n\t\t\t},\n\t\t\tsetPersonTypeId: ({ commit }, payload) =>\n\t\t\t{\n\t\t\t\tcommit('setPersonTypeId', payload);\n\t\t\t},\n\t\t\tsetAvailablePaySystemsIds: ({ commit }, payload) =>\n\t\t\t{\n\t\t\t\tcommit('setAvailablePaySystemsIds', payload);\n\t\t\t},\n\t\t}\n\t}\n\n\tgetGetters()\n\t{\n\t\treturn {\n\t\t\tgetBasket: state => index =>\n\t\t\t{\n\t\t\t\treturn state.basket;\n\t\t\t},\n\t\t\tisAllowedSubmit: state =>\n\t\t\t{\n\t\t\t\treturn state.isEnabledSubmit;\n\t\t\t},\n\t\t\tisCompilationMode: state =>\n\t\t\t{\n\t\t\t\treturn state.isCompilationMode;\n\t\t\t},\n\t\t\tgetTotal: state =>\n\t\t\t{\n\t\t\t\treturn state.total;\n\t\t\t},\n\t\t\tgetDelivery: state =>\n\t\t\t{\n\t\t\t\treturn state.delivery;\n\t\t\t},\n\t\t\tgetDeliveryId: state =>\n\t\t\t{\n\t\t\t\treturn state.deliveryId;\n\t\t\t},\n\t\t\tgetPropertyValues: state =>\n\t\t\t{\n\t\t\t\treturn state.propertyValues;\n\t\t\t},\n\t\t\tgetDeliveryExtraServicesValues: state =>\n\t\t\t{\n\t\t\t\treturn state.deliveryExtraServicesValues;\n\t\t\t},\n\t\t\tgetExpectedDelivery: state =>\n\t\t\t{\n\t\t\t\treturn state.expectedDelivery;\n\t\t\t},\n\t\t\tgetDeliveryResponsibleId: state =>\n\t\t\t{\n\t\t\t\treturn state.deliveryResponsibleId;\n\t\t\t},\n\t\t\tgetPaymentResponsibleId: state =>\n\t\t\t{\n\t\t\t\treturn state.paymentResponsibleId;\n\t\t\t},\n\t\t\tisMobileInstalledForResponsible: state =>\n\t\t\t{\n\t\t\t\treturn state.isMobileInstalledForResponsible;\n\t\t\t},\n\t\t\tgetResponsiblePhoneNumbers: state =>\n\t\t\t{\n\t\t\t\treturn state.responsiblePhoneNumbers;\n\t\t\t},\n\t\t\tgetPersonTypeId: state =>\n\t\t\t{\n\t\t\t\treturn state.personTypeId;\n\t\t\t},\n\t\t\tgetAvailablePaySystemsIds: state =>\n\t\t\t{\n\t\t\t\treturn state.availablePaySystemsIds;\n\t\t\t},\n\t\t}\n\t}\n\n\tgetMutations()\n\t{\n\t\treturn {\n\t\t\tsetBasket: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.basket = payload;\n\t\t\t},\n\t\t\tsetTotal: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.total = Object.assign(state.total, payload);\n\t\t\t},\n\t\t\tclearBasket: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.basket = [];\n\t\t\t\tstate.basketVersion++ ;\n\t\t\t},\n\t\t\tsetErrors: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.errors = payload;\n\t\t\t},\n\t\t\tsetDeliveryId: (state, deliveryId) =>\n\t\t\t{\n\t\t\t\tstate.deliveryId = deliveryId;\n\t\t\t},\n\t\t\tsetDelivery: (state, delivery) =>\n\t\t\t{\n\t\t\t\tstate.delivery = delivery;\n\t\t\t},\n\t\t\tsetPropertyValues: (state, propertyValues) =>\n\t\t\t{\n\t\t\t\tstate.propertyValues = propertyValues;\n\t\t\t},\n\t\t\tsetDeliveryExtraServicesValues: (state, deliveryExtraServicesValues) =>\n\t\t\t{\n\t\t\t\tstate.deliveryExtraServicesValues = deliveryExtraServicesValues;\n\t\t\t},\n\t\t\tsetExpectedDelivery: (state, expectedDelivery) =>\n\t\t\t{\n\t\t\t\tstate.expectedDelivery = expectedDelivery;\n\t\t\t},\n\t\t\tsetDeliveryResponsibleId: (state, deliveryResponsibleId) =>\n\t\t\t{\n\t\t\t\tstate.deliveryResponsibleId = deliveryResponsibleId;\n\t\t\t},\n\t\t\tsetPaymentResponsibleId: (state, paymentResponsibleId) =>\n\t\t\t{\n\t\t\t\tstate.paymentResponsibleId = paymentResponsibleId;\n\t\t\t},\n\t\t\tsetMobileInstalledForResponsible: (state, isMobileInstalledForResponsible) =>\n\t\t\t{\n\t\t\t\tstate.isMobileInstalledForResponsible = isMobileInstalledForResponsible;\n\t\t\t},\n\t\t\tsetResponsiblePhoneNumbers: (state, responsiblePhoneNumbers) =>\n\t\t\t{\n\t\t\t\tstate.responsiblePhoneNumbers = responsiblePhoneNumbers;\n\t\t\t},\n\t\t\tclearErrors: (state) =>\n\t\t\t{\n\t\t\t\tstate.errors = [];\n\t\t\t},\n\t\t\tsetProcessingId: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.processingId = payload;\n\t\t\t},\n\t\t\tsetCurrency: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.currency = payload;\n\t\t\t},\n\t\t\tsetPersonTypeId: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.personTypeId = payload;\n\t\t\t},\n\t\t\tsetAvailablePaySystemsIds: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.availablePaySystemsIds = payload;\n\t\t\t},\n\t\t\tenableSubmit: (state) =>\n\t\t\t{\n\t\t\t\tstate.isEnabledSubmit = true;\n\t\t\t},\n\t\t\tdisableSubmit: (state) =>\n\t\t\t{\n\t\t\t\tstate.isEnabledSubmit = false;\n\t\t\t},\n\t\t\tenableCompilationMode: (state) =>\n\t\t\t{\n\t\t\t\tstate.isCompilationMode = true;\n\t\t\t},\n\t\t\tdisableCompilationMode: (state) =>\n\t\t\t{\n\t\t\t\tstate.isCompilationMode = false;\n\t\t\t},\n\t\t}\n\t}\n}\n","import { Loc, Tag, Text, Event, ajax as Ajax } from 'main.core';\nimport { Popup } from 'main.popup';\nimport { Button, ButtonIcon, ButtonState } from 'ui.buttons';\nimport { App } from '../../app';\n\ntype MobileAppInstallPopupOptions = {\n\tsendersConfig: Array,\n\tphoneNumbers: Array,\n\tuserId: number,\n\troot: App,\n}\n\nclass MobileAppInstallPopup\n{\n\tconstructor(options: MobileAppInstallPopupOptions)\n\t{\n\t\tthis.initSenders(options.sendersConfig);\n\t\tthis.phoneNumbers = options.phoneNumbers;\n\t\tthis.userId = options.userId;\n\t\tthis.root = options.root;\n\n\t\tthis.selectedPhoneNumber = this.phoneNumbers?.[0] ?? null;\n\t\tthis.selectedSender = this.senders?.[0] ?? null;\n\n\t\t/** @type Popup  */\n\t\tthis.mainPopup = null;\n\t\t/** @type Button */\n\t\tthis.sendButton = null;\n\t\tthis.sendersMenu = null;\n\t\tthis.phoneMenu = null;\n\t}\n\n\tinitSenders(sendersData)\n\t{\n\t\tthis.sendersConfig = sendersData.find((item) => item.code === 'sms_provider');\n\t\tthis.senders = this.sendersConfig?.smsSenders;\n\t}\n\n\trender()\n\t{\n\t\tconst popupContent = this.getPopupContent();\n\n\t\tconst linkButton = new Button({\n\t\t\tid: 'copy-install-link',\n\t\t\tcolor: Button.Color.LINK,\n\t\t\tround: true,\n\t\t\ticon: ButtonIcon.COPY,\n\t\t\ttext: Loc.getMessage('SALESCENTER_TERMINAL_MOBILE_POPUP_BTN_LINK'),\n\t\t});\n\n\t\tthis.sendButton = new Button({\n\t\t\tstate: (this.selectedPhoneNumber && this.selectedSender) ? null : ButtonState.DISABLED,\n\t\t\tcolor: Button.Color.PRIMARY,\n\t\t\tround: true,\n\t\t\ttext: Loc.getMessage('SALESCENTER_TERMINAL_MOBILE_POPUP_BTN_SEND'),\n\t\t\tonclick: () => {\n\t\t\t\tthis.sendButton.setClocking();\n\t\t\t\tthis.sendSms();\n\t\t\t},\n\t\t});\n\n\t\tthis.mainPopup = new Popup({\n\t\t\tclassName: 'salescenter-popup-mobile',\n\t\t\toverlay: true,\n\t\t\tcontent: popupContent,\n\t\t\tcloseIcon: true,\n\t\t\tmaxWidth: 666,\n\t\t\tbuttons: [\n\t\t\t\tthis.sendButton,\n\t\t\t\tlinkButton,\n\t\t\t],\n\t\t\tevents: {\n\t\t\t\tonClose: () => {\n\t\t\t\t\tthis.root.closeApplication();\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\n\t\tthis.mainPopup.show();\n\n\t\tthis.bindCopyLink(linkButton);\n\n\t\tthis.bindSelectors();\n\t}\n\n\tsendSms()\n\t{\n\t\tAjax.runAction('salescenter.terminalResponsible.sendLinkToMobileApp', {\n\t\t\tdata: {\n\t\t\t\tuserId: this.userId,\n\t\t\t\tphone: this.selectedPhoneNumber,\n\t\t\t\tsenderId: this.selectedSender.id,\n\t\t\t\tentity: {\n\t\t\t\t\tentityTypeId: this.root.ownerTypeId,\n\t\t\t\t\tentityId: this.root.ownerId,\n\t\t\t\t},\n\t\t\t},\n\t\t}).then((result) => {\n\t\t\tthis.mainPopup.close();\n\t\t\tthis.root.closeApplication();\n\t\t});\n\t}\n\n\tbindCopyLink(linkButton)\n\t{\n\t\tBX.clipboard.bindCopyClick(linkButton.getContainer(), {\n\t\t\ttext: this.root.options.mobileAppLink,\n\t\t});\n\t}\n\n\tbindSelectors()\n\t{\n\t\tthis.bindSendersSelector();\n\t\tthis.bindPhoneSelector();\n\t}\n\n\tbindSendersSelector()\n\t{\n\t\tconst sendersSelector = document.getElementById('senders-selector');\n\n\t\tif (this.selectedSender)\n\t\t{\n\t\t\tEvent.bind(sendersSelector, 'click', () => {\n\t\t\t\tconst menuItems = [];\n\t\t\t\tthis.senders.forEach((sender) => {\n\t\t\t\t\tmenuItems.push({\n\t\t\t\t\t\ttext: Text.encode(sender.name),\n\t\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\t\tthis.selectedSender = sender;\n\t\t\t\t\t\t\tsendersSelector.firstChild.innerText = Text.encode(this.selectedSender.name);\n\t\t\t\t\t\t\tthis.sendersMenu?.close();\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\t\t\t\t});\n\n\t\t\t\tBX.PopupMenu.show(\n\t\t\t\t\t'sender-menu',\n\t\t\t\t\tsendersSelector,\n\t\t\t\t\tmenuItems,\n\t\t\t\t\t{\n\t\t\t\t\t\toffsetTop: 0,\n\t\t\t\t\t\toffsetLeft: 36,\n\t\t\t\t\t\tangle: { position: 'top', offset: 0 },\n\t\t\t\t\t},\n\t\t\t\t);\n\n\t\t\t\tthis.sendersMenu = BX.PopupMenu.getCurrentMenu();\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tEvent.bind(sendersSelector, 'click', () => {\n\t\t\t\tBX.SidePanel.Instance.open(\n\t\t\t\t\tthis.sendersConfig.connectUrl,\n\t\t\t\t\t{\n\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\tonClose: () => {\n\t\t\t\t\t\t\t\tthis.refresh();\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t});\n\t\t}\n\t}\n\n\tbindPhoneSelector()\n\t{\n\t\tconst phoneSelector = document.getElementById('phone-selector');\n\n\t\tif (this.selectedPhoneNumber)\n\t\t{\n\t\t\tEvent.bind(phoneSelector, 'click', () => {\n\t\t\t\tconst menuItems = [];\n\t\t\t\tthis.phoneNumbers.forEach((phoneNumber) => {\n\t\t\t\t\tmenuItems.push({\n\t\t\t\t\t\ttext: Text.encode(phoneNumber),\n\t\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\t\tthis.selectedPhoneNumber = phoneNumber;\n\t\t\t\t\t\t\tphoneSelector.firstChild.innerText = Text.encode(this.selectedPhoneNumber);\n\t\t\t\t\t\t\tthis.phoneMenu?.close();\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\t\t\t\t});\n\n\t\t\t\tBX.PopupMenu.show(\n\t\t\t\t\t'phone-menu',\n\t\t\t\t\tphoneSelector,\n\t\t\t\t\tmenuItems,\n\t\t\t\t\t{\n\t\t\t\t\t\toffsetTop: 0,\n\t\t\t\t\t\toffsetLeft: 36,\n\t\t\t\t\t\tangle: { position: 'top', offset: 0 },\n\t\t\t\t\t},\n\t\t\t\t);\n\n\t\t\t\tthis.phoneMenu = BX.PopupMenu.getCurrentMenu();\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tEvent.bind(phoneSelector, 'click', () => {\n\t\t\t\tBX.SidePanel.Instance.open(\n\t\t\t\t\t`/company/personal/user/${this.userId}/`,\n\t\t\t\t\t{\n\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\tonClose: () => {\n\t\t\t\t\t\t\t\tthis.refresh();\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t});\n\t\t}\n\t}\n\n\trefresh()\n\t{\n\t\tAjax.runAction('salescenter.terminalResponsible.refreshDataForSendingLink', {\n\t\t\tdata: {\n\t\t\t\tuserId: this.userId,\n\t\t\t},\n\t\t}).then((result) => {\n\t\t\tthis.initSenders(result.data.senders);\n\t\t\tthis.phoneNumbers = result.data.phones;\n\n\t\t\tthis.selectedPhoneNumber = this.phoneNumbers?.[0] ?? null;\n\t\t\tthis.selectedSender = this.senders?.[0] ?? null;\n\n\t\t\tthis.updateSendButtonState();\n\t\t\tthis.updateContent();\n\t\t});\n\t}\n\n\tupdateSendButtonState()\n\t{\n\t\tthis.sendButton.setDisabled(!Boolean(this.selectedPhoneNumber && this.selectedSender));\n\t}\n\n\tupdateContent()\n\t{\n\t\tthis.mainPopup.setContent(this.getPopupContent());\n\t\tthis.bindSelectors();\n\t}\n\n\tgetPopupContent()\n\t{\n\t\t// all for the sake of localization\n\t\tlet phoneAndServiceContent = '';\n\t\tif (this.selectedSender)\n\t\t{\n\t\t\tphoneAndServiceContent = Loc.getMessage(\n\t\t\t\t'SALESCENTER_TERMINAL_MOBILE_POPUP_SENDER_AND_PHONE',\n\t\t\t\t{\n\t\t\t\t\t'[main]': '<div class=\"salescenter-popup-mobile__service\">',\n\t\t\t\t\t'[/main]': '</div>',\n\t\t\t\t\t'[number]': '<div class=\"salescenter-popup-mobile__service-box\"><div class=\"salescenter-popup-mobile__service-name\">',\n\t\t\t\t\t'#NUMBER#': `\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"salescenter-popup-mobile__service-inline\" id=\"phone-selector\">\n\t\t\t\t\t\t\t<div class=\"salescenter-popup-mobile__service-value\">\n\t\t\t\t\t\t\t\t${\n\t\t\t\t\t\t\tthis.selectedPhoneNumber\n\t\t\t\t\t\t\t\t? Text.encode(this.selectedPhoneNumber)\n\t\t\t\t\t\t\t\t: Loc.getMessage('SALESCENTER_TERMINAL_MOBILE_POPUP_ADD_PHONE')\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t`,\n\t\t\t\t\t'[/number]': `\n\t\t\t\t\t\t\t${this.selectedPhoneNumber ? '<div class=\"ui-icon-set --chevron-down\"></div>' : ''}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t`,\n\t\t\t\t\t'[service]': '<div class=\"salescenter-popup-mobile__service-box\"><div class=\"salescenter-popup-mobile__service-name\">',\n\t\t\t\t\t'#SERVICE#': `\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"salescenter-popup-mobile__service-inline\" id=\"senders-selector\">\n\t\t\t\t\t\t\t<div class=\"salescenter-popup-mobile__service-value\">${Text.encode(this.selectedSender.name)}</div>\n\t\t\t\t\t`,\n\t\t\t\t\t'[/service]': `\n\t\t\t\t\t\t\t<div class=\"ui-icon-set --chevron-down\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t`,\n\t\t\t\t},\n\t\t\t);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tphoneAndServiceContent = Loc.getMessage(\n\t\t\t\t'SALESCENTER_TERMINAL_MOBILE_POPUP_SENDER_AND_PHONE_NO_SENDER',\n\t\t\t\t{\n\t\t\t\t\t'[main]': '<div class=\"salescenter-popup-mobile__service\">',\n\t\t\t\t\t'[/main]': '</div>',\n\t\t\t\t\t'[number]': '<div class=\"salescenter-popup-mobile__service-box\"><div class=\"salescenter-popup-mobile__service-name\">',\n\t\t\t\t\t'#NUMBER#': `\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"salescenter-popup-mobile__service-inline\" id=\"phone-selector\">\n\t\t\t\t\t\t\t<div class=\"salescenter-popup-mobile__service-value\">\n\t\t\t\t\t\t\t\t${\n\t\t\t\t\t\t\t\t\tthis.selectedPhoneNumber\n\t\t\t\t\t\t\t\t\t\t? Text.encode(this.selectedPhoneNumber)\n\t\t\t\t\t\t\t\t\t\t: Loc.getMessage('SALESCENTER_TERMINAL_MOBILE_POPUP_ADD_PHONE')\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t`,\n\t\t\t\t\t'[/number]': `\n\t\t\t\t\t\t\t${this.selectedPhoneNumber ? '<div class=\"ui-icon-set --chevron-down\"></div>' : ''}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t`,\n\t\t\t\t\t'[service]': '<div class=\"salescenter-popup-mobile__service-box\"><div class=\"salescenter-popup-mobile__service-inline\" id=\"senders-selector\"><div class=\"salescenter-popup-mobile__service-value\">',\n\t\t\t\t\t'[/service]': `\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"ui-icon-set --chevron-down\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t`,\n\t\t\t\t},\n\t\t\t);\n\t\t}\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"salescenter-popup-mobile__wrap\">\n\t\t\t\t<div class=\"salescenter-popup-mobile__icon-box\">\n\t\t\t\t\t<div class=\"salescenter-popup-mobile__icon\"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"salescenter-popup-mobile__content\">\n\t\t\t\t\t<div class=\"salescenter-popup-mobile__title\">${Loc.getMessage('SALESCENTER_TERMINAL_MOBILE_POPUP_TITLE')}</div>\n\t\t\t\t\t${phoneAndServiceContent}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n}\n\nexport { MobileAppInstallPopup };\n","import { ajax as Ajax, Event, Loc, Tag, Text, Type } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { Loader } from 'main.loader';\nimport { MenuManager, Popup } from 'main.popup';\nimport { rest as Rest } from 'rest.client';\nimport { Manager } from 'salescenter.manager';\nimport { Button } from 'ui.buttons';\nimport 'ui.design-tokens';\nimport 'ui.fonts.opensans';\nimport 'ui.notification';\nimport { Vue } from 'ui.vue';\nimport { VuexBuilder } from 'ui.vue.vuex';\nimport Chat from './chat';\nimport { ContextDictionary } from './const/context-dictionary';\nimport './css/component.css';\nimport Deal from './deal';\nimport { ApplicationModel } from './models/application';\nimport { DocumentSelectorModel } from './models/document-selector';\nimport { OrderCreationModel } from './models/ordercreation';\nimport 'ui.icon-set.actions';\nimport { MobileAppInstallPopup } from './components/deal-terminal-payment/mobile-app-install-popup'\n\nconst instances = new Map();\n\nexport class App\n{\n\tstatic getByDialogId(dialogId: string): ?App\n\t{\n\t\treturn instances.get(dialogId) || null;\n\t}\n\n\tconstructor(options = {\n\t\tdialogId: null,\n\t\tsessionId: null,\n\t\tlineId: null,\n\t\torderAddPullTag: null,\n\t\tlandingPublicationPullTag: null,\n\t\tlandingUnPublicationPullTag: null,\n\t\tisFrame: true,\n\t\tisOrderPublicUrlAvailable: false,\n\t\tisCatalogAvailable: false,\n\t\tisOrderPublicUrlExists: false,\n\t\tisWithOrdersMode: true,\n\t\tcompilation: null,\n\t\tdocumentSelector: DocumentSelectorParams|null,\n\t})\n\t{\n\t\tthis.slider = BX.SidePanel.Instance.getTopSlider();\n\t\tthis.dialogId = options.dialogId;\n\t\tthis.sessionId = parseInt(options.sessionId);\n\t\tthis.lineId = parseInt(options.lineId);\n\t\tthis.orderAddPullTag = options.orderAddPullTag;\n\t\tthis.landingPublicationPullTag = options.landingPublicationPullTag;\n\t\tthis.landingUnPublicationPullTag = options.landingUnPublicationPullTag;\n\t\tthis.paySystemList = options.paySystemList;\n\t\tthis.cashboxList = options.cashboxList;\n\t\tthis.options = options;\n\t\tthis.isProgress = false;\n\t\tthis.fillPagesTimeout = false;\n\t\tthis.disableSendButton = false;\n\t\tthis.context = '';\n\t\tthis.fillPagesQueue = [];\n\t\tthis.ownerTypeId = '';\n\t\tthis.ownerId = '';\n\t\tthis.orderId = parseInt(options.orderId);\n\t\tthis.stageOnOrderPaid = null;\n\t\tthis.stageOnDeliveryFinished = null;\n\t\tthis.sendingMethod = '';\n\t\tthis.sendingMethodDesc = {};\n\t\tthis.orderPublicUrl = '';\n\t\tthis.fileControl = options.fileControl;\n\t\tthis.currencyCode = options.currencyCode;\n\t\tthis.compilation = null;\n\t\tthis.newCompilationId = null;\n\t\tthis.assignedById = options.assignedById;\n\n\t\tif(Type.isString(options.stageOnOrderPaid))\n\t\t{\n\t\t\tthis.stageOnOrderPaid = options.stageOnOrderPaid;\n\t\t}\n\n\t\tif(Type.isString(options.stageOnDeliveryFinished))\n\t\t{\n\t\t\tthis.stageOnDeliveryFinished = options.stageOnDeliveryFinished;\n\t\t}\n\n\t\tif(Type.isBoolean(options.isFrame))\n\t\t{\n\t\t\tthis.isFrame = options.isFrame;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.isFrame = true;\n\t\t}\n\n\t\tif(Type.isBoolean(options.isOrderPublicUrlAvailable))\n\t\t{\n\t\t\tthis.isOrderPublicUrlAvailable = options.isOrderPublicUrlAvailable;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.isOrderPublicUrlAvailable = false;\n\t\t}\n\n\t\tif(Type.isBoolean(options.isOrderPublicUrlExists))\n\t\t{\n\t\t\tthis.isOrderPublicUrlExists = options.isOrderPublicUrlExists;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.isOrderPublicUrlExists = false;\n\t\t}\n\n\t\tif(Type.isString(options.orderPublicUrl))\n\t\t{\n\t\t\tthis.orderPublicUrl = options.orderPublicUrl;\n\t\t}\n\n\t\tif(Type.isBoolean(options.isCatalogAvailable))\n\t\t{\n\t\t\tthis.isCatalogAvailable = options.isCatalogAvailable;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.isCatalogAvailable = false;\n\t\t}\n\n\t\tif(Type.isBoolean(options.isWithOrdersMode))\n\t\t{\n\t\t\tthis.isWithOrdersMode = options.isWithOrdersMode;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.isWithOrdersMode = false;\n\t\t}\n\n\t\tif(Type.isBoolean(options.disableSendButton))\n\t\t{\n\t\t\tthis.disableSendButton = options.disableSendButton;\n\t\t}\n\n\t\tif(options.ownerTypeId)\n\t\t{\n\t\t\tthis.ownerTypeId = options.ownerTypeId;\n\t\t}\n\n\t\tif(options.ownerId)\n\t\t{\n\t\t\tthis.ownerId = options.ownerId;\n\t\t}\n\n\t\tif(Type.isString(options.context) && options.context.length > 0)\n\t\t{\n\t\t\tthis.context = options.context;\n\t\t}\n\t\telse if(this.sessionId && this.dialogId)\n\t\t{\n\t\t\tthis.context = ContextDictionary.imOpenlines;\n\t\t}\n\n\t\tif(Type.isBoolean(options.isPaymentsLimitReached))\n\t\t{\n\t\t\tthis.isPaymentsLimitReached = options.isPaymentsLimitReached;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.isPaymentsLimitReached = false;\n\t\t}\n\n\t\tif(!Type.isUndefined(options.sendingMethod))\n\t\t{\n\t\t\tthis.sendingMethod = options.sendingMethod;\n\t\t}\n\t\tif(!Type.isUndefined(options.sendingMethodDesc))\n\t\t{\n\t\t\tthis.sendingMethodDesc = this.options.sendingMethodDesc;\n\t\t}\n\n\t\tif(Type.isObject(options.compilation))\n\t\t{\n\t\t\tthis.compilation = options.compilation;\n\t\t}\n\n\t\tthis.isPaymentCreationAvailable = (\n\t\t\t(this.sessionId > 0 && this.dialogId.length > 0) || (this.ownerTypeId && this.ownerId)\n\t\t);\n\t\tthis.connector = Type.isString(options.connector) ? options.connector : '';\n\n\t\tthis.isAllowedFacebookRegion = Type.isBoolean(options.isAllowedFacebookRegion) ? options.isAllowedFacebookRegion : false;\n\n\t\tif (Type.isPlainObject(options.documentSelector))\n\t\t{\n\t\t\tthis.documentSelector = options.documentSelector;\n\t\t\tthis.documentSelector.paymentId = this.options.paymentId;\n\t\t}\n\n\t\tEvent.ready(() =>\n\t\t{\n\t\t\tthis.pull = BX.PULL;\n\t\t\tthis.initPull();\n\t\t\tthis.isSiteExists = Manager.isSiteExists;\n\t\t});\n\n\t\tApp.initStore()\n\t\t\t.then((result) => this.initTemplate(result))\n\t\t\t.catch((error) => App.showError(error))\n\t\t;\n\n\t\tEventEmitter.subscribe(window.parent, 'onSendCompilationChatButtonClick', this.sendCompilation.bind(this));\n\n\t\tinstances.set(this.dialogId, this);\n\t}\n\n\tstatic initStore()\n\t{\n\t\tconst builder = new VuexBuilder();\n\n\t\treturn builder.addModel(ApplicationModel.create())\n\t\t\t.addModel(OrderCreationModel.create())\n\t\t\t.addModel(DocumentSelectorModel.create())\n\t\t\t.useNamespace(true)\n\t\t\t.build();\n\t}\n\n\tinitPull()\n\t{\n\t\tif(this.pull)\n\t\t{\n\t\t\tif(Type.isString(this.orderAddPullTag))\n\t\t\t{\n\t\t\t\tthis.pull.subscribe({\n\t\t\t\t\tmoduleId: 'salescenter',\n\t\t\t\t\tcommand: this.orderAddPullTag,\n\t\t\t\t\tcallback: (params) =>\n\t\t\t\t\t{\n\t\t\t\t\t\tif(parseInt(params.sessionId) === this.sessionId && params.orderId > 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tManager.showOrdersListAfterCreate(params.orderId);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif(Type.isString(this.landingPublicationPullTag))\n\t\t\t{\n\t\t\t\tthis.pull.subscribe({\n\t\t\t\t\tmoduleId: 'salescenter',\n\t\t\t\t\tcommand: this.landingPublicationPullTag,\n\t\t\t\t\tcallback: (params) =>\n\t\t\t\t\t{\n\t\t\t\t\t\tif(parseInt(params.landingId) > 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.fillPages();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(params.hasOwnProperty('isOrderPublicUrlAvailable') && Type.isBoolean(params.isOrderPublicUrlAvailable))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.isOrderPublicUrlAvailable = params.isOrderPublicUrlAvailable;\n\t\t\t\t\t\t\tthis.isOrderPublicUrlExists = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif(Type.isString(this.landingUnPublicationPullTag))\n\t\t\t{\n\t\t\t\tthis.pull.subscribe({\n\t\t\t\t\tmoduleId: 'salescenter',\n\t\t\t\t\tcommand: this.landingUnPublicationPullTag,\n\t\t\t\t\tcallback: (params) =>\n\t\t\t\t\t{\n\t\t\t\t\t\tif(parseInt(params.landingId) > 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.fillPages();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(params.hasOwnProperty('isOrderPublicUrlAvailable') && Type.isBoolean(params.isOrderPublicUrlAvailable))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.isOrderPublicUrlAvailable = params.isOrderPublicUrlAvailable;\n\t\t\t\t\t\t\tthis.isOrderPublicUrlExists = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\tinitTemplate(result)\n\t{\n\t\treturn new Promise((resolve) =>\n\t\t{\n\t\t\tconst context = this;\n\t\t\tthis.store = result.store;\n\n\t\t\tthis.templateEngine = Vue.create({\n\t\t\t\tel: document.getElementById('salescenter-app-root'),\n\t\t\t\tcomponents: {\n\t\t\t\t\t'chat': Chat,\n\t\t\t\t\t'deal': Deal,\n\t\t\t\t},\n\t\t\t\ttemplate:\n\t\t\t\t\tthis.isPaymentMode()\n\t\t\t\t\t\t? `<deal :key=\"componentKey\" @on-reload=\"reload\"/>`\n\t\t\t\t\t\t: `<chat :key=\"componentKey\" @on-reload=\"reload\"/>`\n\t\t\t\t\t,\n\t\t\t\tstore: this.store,\n\t\t\t\tcreated()\n\t\t\t\t{\n\t\t\t\t\tthis.$app = context;\n\t\t\t\t\tthis.$nodes = {\n\t\t\t\t\t\tfooter: document.getElementById('footer'),\n\t\t\t\t\t\tleftPanel: document.getElementById('left-panel'),\n\t\t\t\t\t\ttitle: document.getElementById('pagetitle'),\n\t\t\t\t\t\tpaymentsLimit: document.getElementById('salescenter-payment-limit-container'),\n\t\t\t\t\t\torderSelector: document.getElementById('salescenter-app-order-selector'),\n\t\t\t\t\t};\n\t\t\t\t\tthis.initOrderSelector();\n\t\t\t\t\tif (context.documentSelector)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$store.commit('documentSelector/fillState', context.documentSelector);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (this.$app.options.showCompilationModeSwitcher === 'N')\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$store.commit('orderCreation/enableCompilationMode');\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tmounted()\n\t\t\t\t{\n\t\t\t\t\tresolve();\n\t\t\t\t},\n\t\t\t\tmethods: {\n\t\t\t\t\treload(arParams)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$root.$app.getLoader().show(document.body);\n\n\t\t\t\t\t\tAjax.runComponentAction(\n\t\t\t\t\t\t\t'bitrix:salescenter.app',\n\t\t\t\t\t\t\t'getComponentResult',\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tmode: 'class',\n\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\tarParams\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t).then(function(response) {\n\t\t\t\t\t\t\tif (response.data)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.$root.$app.options = response.data;\n\t\t\t\t\t\t\t\tthis.$root.$app.orderId = this.$root.$app.options.orderId;\n\t\t\t\t\t\t\t\tthis.componentKey += 1;\n\n\t\t\t\t\t\t\t\tthis.$root.$app.getLoader().hide();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}.bind(this));\n\t\t\t\t\t},\n\t\t\t\t\tinitOrderSelector()\n\t\t\t\t\t{\n\t\t\t\t\t\ttry\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\tthis.$app.options.orderList.length < 2\n\t\t\t\t\t\t\t\t|| this.$app.options.templateMode !== 'create'\n\t\t\t\t\t\t\t\t|| !this.$app.options.orderId\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tconst orderSelectorBtn = this.$nodes.orderSelector.querySelector('.salescenter-app-order-selector-text');\n\t\t\t\t\t\t\tif (!orderSelectorBtn)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\torderSelectorBtn.innerText = Loc.getMessage('SALESCENTER_ORDER_SELECTOR_ORDER_NUM')\n\t\t\t\t\t\t\t\t.replace('#ORDER_ID#', this.$app.options.orderId);\n\n\t\t\t\t\t\t\torderSelectorBtn.setAttribute('data-hint', Loc.getMessage('SALESCENTER_ORDER_SELECTOR_TOOLTIP'));\n\n\t\t\t\t\t\t\tlet popupMenu;\n\t\t\t\t\t\t\tlet menuItems = [];\n\t\t\t\t\t\t\tthis.$app.options.orderList.map(orderId => {\n\t\t\t\t\t\t\t\tconst orderCaption = Loc.getMessage('SALESCENTER_ORDER_SELECTOR_ORDER_NUM').replace('#ORDER_ID#', orderId);\n\t\t\t\t\t\t\t\tmenuItems.push({\n\t\t\t\t\t\t\t\t\ttext: orderCaption,\n\t\t\t\t\t\t\t\t\tonclick: event => {\n\t\t\t\t\t\t\t\t\t\tpopupMenu.close();\n\t\t\t\t\t\t\t\t\t\torderSelectorBtn.innerText = orderCaption;\n\t\t\t\t\t\t\t\t\t\tthis.reload({\n\t\t\t\t\t\t\t\t\t\t\tcontext: this.$app.options.context,\n\t\t\t\t\t\t\t\t\t\t\torderId: orderId,\n\t\t\t\t\t\t\t\t\t\t\townerTypeId: this.$app.options.ownerTypeId,\n\t\t\t\t\t\t\t\t\t\t\townerId: this.$app.options.ownerId,\n\t\t\t\t\t\t\t\t\t\t\ttemplateMode: this.$app.options.templateMode,\n\t\t\t\t\t\t\t\t\t\t\tmode: this.$app.options.mode,\n\t\t\t\t\t\t\t\t\t\t\tinitialMode: this.$app.options.initialMode,\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tpopupMenu = MenuManager.create({\n\t\t\t\t\t\t\t\tid: 'deal-order-selector',\n\t\t\t\t\t\t\t\tbindElement: orderSelectorBtn,\n\t\t\t\t\t\t\t\titems: menuItems\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tthis.$nodes.orderSelector.classList.remove('is-hidden');\n\t\t\t\t\t\t\tthis.$nodes.orderSelector.addEventListener('click', e => {\n\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\tpopupMenu.show();\n\t\t\t\t\t\t\t\tBX.UI.Hint.hide();\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tBX.UI.Hint.init(this.$nodes.orderSelector);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcatch (err)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t//\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tdata() {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tcomponentKey: 0,\n\t\t\t\t\t};\n\t\t\t\t},\n\t\t\t});\n\t\t});\n\t}\n\n\tcloseApplication()\n\t{\n\t\tif(this.slider)\n\t\t{\n\t\t\tthis.slider.close();\n\t\t}\n\t}\n\n\tfillPages()\n\t{\n\t\treturn new Promise((resolve) =>\n\t\t{\n\t\t\tif(this.isProgress)\n\t\t\t{\n\t\t\t\tthis.fillPagesQueue.push(resolve);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif(this.fillPagesTimeout)\n\t\t\t\t{\n\t\t\t\t\tclearTimeout(this.fillPagesTimeout);\n\t\t\t\t}\n\t\t\t\tthis.fillPagesTimeout = setTimeout(() =>\n\t\t\t\t{\n\t\t\t\t\tthis.startProgress();\n\t\t\t\t\tRest.callMethod('salescenter.page.list', {}).then((result) => {\n\t\t\t\t\t\tthis.store.commit('application/setPages', {pages: result.answer.result.pages});\n\t\t\t\t\t\tthis.stopProgress();\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t\tthis.fillPagesQueue.forEach((item) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\titem();\n\t\t\t\t\t\t});\n\t\t\t\t\t\tthis.fillPagesQueue = [];\n\t\t\t\t\t});\n\t\t\t\t}, 100);\n\t\t\t}\n\t\t});\n\t}\n\n\tstatic showError(error)\n\t{\n\t\t// console.error(error);\n\t}\n\n\tgetLoader()\n\t{\n\t\tif(!this.loader)\n\t\t{\n\t\t\tthis.loader = new Loader({size: 200, mode: 'custom'});\n\t\t}\n\n\t\treturn this.loader;\n\t}\n\n\tshowLoader()\n\t{\n\t\tif(this.templateEngine)\n\t\t{\n\t\t\tthis.getLoader().show(this.templateEngine.$el);\n\t\t}\n\t}\n\n\thideLoader()\n\t{\n\t\tthis.getLoader().hide();\n\t}\n\n\tstartProgress(buttonEvent = null)\n\t{\n\t\tthis.isProgress = true;\n\t\tthis.templateEngine.$emit('on-start-progress');\n\t\tthis.showLoader();\n\t\tif (Type.isDomNode(buttonEvent))\n\t\t{\n\t\t\tbuttonEvent.classList.add('ui-btn-wait');\n\t\t}\n\t}\n\n\tstopProgress(buttonEvent = null)\n\t{\n\t\tthis.isProgress = false;\n\t\tthis.templateEngine.$emit('on-stop-progress');\n\t\tthis.hideLoader();\n\t\tif (Type.isDomNode(buttonEvent))\n\t\t{\n\t\t\tbuttonEvent.classList.remove('ui-btn-wait');\n\t\t}\n\t}\n\n\thidePage(page)\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tlet promise;\n\t\t\tif(page.landingId > 0)\n\t\t\t{\n\t\t\t\tpromise = Manager.hidePage(page);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tpromise = Manager.deleteUrl(page);\n\t\t\t}\n\t\t\tpromise.then(() =>\n\t\t\t{\n\t\t\t\tthis.store.commit('application/removePage', {page});\n\t\t\t\tresolve();\n\t\t\t}).catch((result) =>\n\t\t\t{\n\t\t\t\tApp.showError(result.answer.error_description);\n\t\t\t\treject(result.answer.error_description);\n\t\t\t});\n\t\t});\n\t}\n\n\tsendPage(pageId)\n\t{\n\t\tif(this.isProgress)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tif(this.disableSendButton)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tconst pages = this.store.getters['application/getPages']();\n\t\tlet page;\n\t\tfor(let index in pages)\n\t\t{\n\t\t\tif(pages.hasOwnProperty(index) && pages[index].id === pageId)\n\t\t\t{\n\t\t\t\tpage = pages[index];\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tlet source = 'other';\n\t\tif(page.landingId > 0)\n\t\t{\n\t\t\tif(parseInt(page.siteId) === parseInt(Manager.connectedSiteId))\n\t\t\t{\n\t\t\t\tsource = 'landing_store_chat';\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tsource = 'landing_other';\n\t\t\t}\n\t\t}\n\t\tif(!this.dialogId)\n\t\t{\n\t\t\tthis.slider.data.set('action', 'sendPage');\n\t\t\tthis.slider.data.set('page', page);\n\t\t\tthis.slider.data.set('pageId', pageId);\n\t\t\tif(this.context === ContextDictionary.sms)\n\t\t\t{\n\t\t\t\tthis.startProgress();\n\t\t\t\tBX.Salescenter.Manager.addAnalyticAction({\n\t\t\t\t\tanalyticsLabel: 'salescenterSendSms',\n\t\t\t\t\tcontext: this.context,\n\t\t\t\t\tsource: source,\n\t\t\t\t\ttype: page.isWebform ? 'form' : 'info',\n\t\t\t\t\tcode: page.code,\n\t\t\t\t}).then(() =>\n\t\t\t\t{\n\t\t\t\t\tthis.stopProgress();\n\t\t\t\t\tthis.closeApplication();\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.closeApplication();\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\tthis.startProgress();\n\n\t\tAjax.runAction('salescenter.page.send', {\n\t\t\tanalyticsLabel: 'salescenterSendChat',\n\t\t\tgetParameters: {\n\t\t\t\tdialogId: this.dialogId,\n\t\t\t\tcontext: this.context,\n\t\t\t\tsource: source,\n\t\t\t\ttype: page.isWebform ? 'form' : 'info',\n\t\t\t\tconnector: this.connector,\n\t\t\t\tcode: page.code,\n\t\t\t},\n\t\t\tdata: {\n\t\t\t\tid: pageId,\n\t\t\t\toptions: {\n\t\t\t\t\tdialogId: this.dialogId,\n\t\t\t\t\tsessionId: this.sessionId,\n\t\t\t\t},\n\t\t\t}\n\t\t}).then(() =>\n\t\t{\n\t\t\tthis.stopProgress();\n\t\t\tthis.closeApplication();\n\t\t}).catch((result) =>\n\t\t{\n\t\t\tApp.showError(result.errors.pop().message);\n\t\t\tthis.stopProgress();\n\t\t});\n\t}\n\n\tsendCompilation(buttonEvent = null, sendCompilationLinkToFacebook = false)\n\t{\n\t\tif (!this.isPaymentCreationAvailable)\n\t\t{\n\t\t\tthis.closeApplication();\n\t\t\treturn null;\n\t\t}\n\n\t\tif (!this.store.getters['orderCreation/isAllowedSubmit'] || this.isProgress)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tif (!this.isAllowedFacebookRegion)\n\t\t{\n\t\t\tsendCompilationLinkToFacebook = true;\n\t\t}\n\n\t\tthis.startProgress(buttonEvent);\n\n\t\tlet options = {\n\t\t\tdialogId: this.dialogId,\n\t\t\tsendingMethod: this.sendingMethod,\n\t\t\tsendingMethodDesc: this.sendingMethodDesc,\n\t\t\townerTypeId: this.ownerTypeId,\n\t\t\townerId: this.ownerId,\n\t\t\tconnector: this.connector,\n\t\t\tsessionId: this.sessionId,\n\t\t\tsendCompilationLinkToFacebook: sendCompilationLinkToFacebook,\n\t\t\tcompilationId: this.compilation ? this.compilation.ID : this.newCompilationId,\n\t\t\teditable: this.options.templateMode === 'create',\n\t\t};\n\n\t\tif (this.stageOnOrderPaid !== null)\n\t\t{\n\t\t\toptions.stageOnOrderPaid = this.stageOnOrderPaid;\n\t\t}\n\t\tif (this.stageOnDeliveryFinished !== null)\n\t\t{\n\t\t\toptions.stageOnDeliveryFinished = this.stageOnDeliveryFinished;\n\t\t}\n\n\t\tif (this.connector === 'facebook' && this.isAllowedFacebookRegion && !sendCompilationLinkToFacebook)\n\t\t{\n\t\t\tthis.sendCompilationToFacebook(buttonEvent, options)\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.sendCompilationAjaxAction(buttonEvent, options);\n\t\t}\n\t}\n\n\tsendCompilationToFacebook(buttonEvent, options)\n\t{\n\t\tAjax.runComponentAction(\n\t\t\t'bitrix:salescenter.app',\n\t\t\t'getFacebookSettingsPath',\n\t\t\t{\n\t\t\t\tmode: 'class',\n\t\t\t\tdata: {\n\t\t\t\t\tdialogId: this.dialogId,\n\t\t\t\t}\n\t\t\t}\n\t\t).then((response) => {\n\t\t\tconst facebookSettingsPath = response.data;\n\t\t\tif (facebookSettingsPath)\n\t\t\t{\n\t\t\t\tthis.stopProgress(buttonEvent);\n\t\t\t\tthis.showFacebookCatalogConnectionPopup(buttonEvent, facebookSettingsPath)\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tAjax.runAction('salescenter.compilation.sendFacebookModerationWaitingNotification', {\n\t\t\t\t\tdata: {\n\t\t\t\t\t\toptions,\n\t\t\t\t\t},\n\t\t\t\t}).then((result) => {\n\t\t\t\t\tthis.sendCompilationAjaxAction(buttonEvent, options);\n\t\t\t\t\tthis.store.dispatch('orderCreation/resetBasket');\n\t\t\t\t\tthis.closeApplication();\n\t\t\t\t\tthis.stopProgress(buttonEvent);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\tshowFacebookCatalogConnectionPopup(buttonEvent, facebookSettingsPath)\n\t{\n\t\tif (!this.facebookCatalogConnectionPopup)\n\t\t{\n\t\t\tthis.facebookCatalogConnectionPopup = new Popup({\n\t\t\t\tclassName: 'salescenter-app-catalog-facebook-connection-popup',\n\t\t\t\tcontent: this.getFacebookCatalogConnectionPopupContent(buttonEvent, facebookSettingsPath),\n\t\t\t\twidth: 500,\n\t\t\t\toverlay: true,\n\t\t\t\toffsetTop: 0,\n\t\t\t\toffsetLeft: 0,\n\t\t\t\tpadding: 17,\n\t\t\t\tanimation: 'fading-slide',\n\t\t\t\tangle: false,\n\t\t\t\tcloseIcon: {\n\t\t\t\t\ttop: '5px',\n\t\t\t\t\tright: '5px',\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\tthis.facebookCatalogConnectionPopup.show();\n\t}\n\n\tgetFacebookCatalogConnectionPopupContent(buttonEvent, facebookSettingsPath)\n\t{\n\t\tconst setFacebookCatalogConnectionButton = Tag.render`\n\t\t\t<button class=\"ui-btn ui-btn-md ui-btn-primary\">\n\t\t\t\t${Loc.getMessage('SALESCENTER_FACEBOOK_CATALOG_POPUP_SET_BUTTON')}\n\t\t\t</button>\n\t\t`;\n\t\tEvent.bind(setFacebookCatalogConnectionButton, 'click', this.setFacebookCatalogConnectionPopupHandler.bind(this, facebookSettingsPath));\n\n\t\tconst sendLinkToB24CompilationButton = Tag.render`\n\t\t\t<button class=\"ui-btn ui-btn-md ui-btn-light-border\">\n\t\t\t\t${Loc.getMessage('SALESCENTER_FACEBOOK_CATALOG_POPUP_SEND_B24_COMPILATION_LINK_BUTTON')}\n\t\t\t</button>\n\t\t`;\n\t\tEvent.bind(sendLinkToB24CompilationButton, 'click', this.sendLinkToB24CompilationButtonPopupHandler.bind(this, buttonEvent));\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"salescenter-app-catalog-facebook-connection-popup--container\">\n\t\t\t\t<div class=\"salescenter-app-catalog-facebook-connection-popup--title\">${Loc.getMessage('SALESCENTER_FACEBOOK_CATALOG_POPUP_TITLE_1')}</div>\n\t\t\t\t<div class=\"salescenter-app-catalog-facebook-connection-popup--button-container\">\n\t\t\t\t\t${setFacebookCatalogConnectionButton}\n\t\t\t\t\t${sendLinkToB24CompilationButton}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tsetFacebookCatalogConnectionPopupHandler(facebookSettingsPath)\n\t{\n\t\tBX.SidePanel.Instance.open(facebookSettingsPath);\n\t\tthis.facebookCatalogConnectionPopup.close();\n\t}\n\n\tsendLinkToB24CompilationButtonPopupHandler(buttonEvent)\n\t{\n\t\tthis.facebookCatalogConnectionPopup.close();\n\t\tthis.sendCompilation(buttonEvent, true);\n\t}\n\n\tsendCompilationAjaxAction(buttonEvent, options)\n\t{\n\t\tconst basketItems = this.store.getters['orderCreation/getBasket']();\n\t\tconst productIds = basketItems.map((basketItem) => {\n\t\t\treturn basketItem.skuId;\n\t\t});\n\t\tAjax.runAction('salescenter.compilation.sendCompilation', {\n\t\t\tdata: {\n\t\t\t\tproductIds,\n\t\t\t\toptions,\n\t\t\t},\n\t\t\tanalyticsLabel: 'salescenterCreateCompilation',\n\t\t}).then((result) => {\n\t\t\tthis.store.dispatch('orderCreation/resetBasket');\n\t\t\tthis.stopProgress(buttonEvent);\n\n\t\t\tif (result.data && result.data.compilation)\n\t\t\t{\n\t\t\t\tthis.slider.data.set('action', 'sendCompilation');\n\t\t\t\tthis.slider.data.set('compilation', result.data.compilation);\n\t\t\t}\n\n\t\t\tthis.closeApplication();\n\t\t\tthis.emitGlobalEvent('salescenter.app:oncompilationcreated');\n\t\t}).catch((data) => {\n\t\t\tdata.errors.forEach((error) => {\n\t\t\t\talert(error.message);\n\t\t\t});\n\t\t\tthis.stopProgress(buttonEvent);\n\t\t\tApp.showError(data);\n\t\t});\n\t}\n\n\tsendShipment(buttonEvent)\n\t{\n\t\tif (!this.isPaymentCreationAvailable)\n\t\t{\n\t\t\tthis.closeApplication();\n\t\t\treturn null;\n\t\t}\n\n\t\tif (!this.store.getters['orderCreation/isAllowedSubmit'] || this.isProgress)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tthis.startProgress(buttonEvent);\n\n\t\tlet data = {\n\t\t\townerTypeId: this.ownerTypeId,\n\t\t\townerId: this.ownerId,\n\t\t\torderId: this.orderId,\n\t\t\tdeliveryId: this.store.getters['orderCreation/getDeliveryId'],\n\t\t\tdeliveryPrice: this.store.getters['orderCreation/getDelivery'],\n\t\t\texpectedDeliveryPrice: this.store.getters['orderCreation/getExpectedDelivery'],\n\t\t\tdeliveryResponsibleId: this.store.getters['orderCreation/getDeliveryResponsibleId'],\n\t\t\tpersonTypeId: this.store.getters['orderCreation/getPersonTypeId'],\n\t\t\tshipmentPropValues: this.store.getters['orderCreation/getPropertyValues'],\n\t\t\tdeliveryExtraServicesValues: this.store.getters['orderCreation/getDeliveryExtraServicesValues'],\n\t\t};\n\n\t\tif (this.stageOnDeliveryFinished !== null)\n\t\t{\n\t\t\tdata.stageOnDeliveryFinished = this.stageOnDeliveryFinished;\n\t\t}\n\n\t\tAjax.runAction('salescenter.order.createShipment', {\n\t\t\tdata: {\n\t\t\t\tbasketItems: this.store.getters['orderCreation/getBasket'](),\n\t\t\t\toptions: data,\n\t\t\t},\n\t\t\tanalyticsLabel: 'salescenterCreateShipment',\n\t\t}).then((result) =>\n\t\t{\n\t\t\tthis.store.dispatch('orderCreation/resetBasket');\n\t\t\tthis.stopProgress(buttonEvent);\n\n\t\t\tif (result.data)\n\t\t\t{\n\t\t\t\tif (result.data.order)\n\t\t\t\t{\n\t\t\t\t\tthis.slider.data.set('order', result.data.order);\n\t\t\t\t}\n\t\t\t\tif (result.data.deal)\n\t\t\t\t{\n\t\t\t\t\tthis.slider.data.set('deal', result.data.deal);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.closeApplication();\n\t\t\tthis.emitGlobalEvent('salescenter.app:onshipmentcreated');\n\t\t}).catch((data) =>\n\t\t{\n\t\t\tdata.errors.forEach((error) => {\n\t\t\t\talert(error.message);\n\t\t\t});\n\t\t\tthis.stopProgress(buttonEvent);\n\t\t\tApp.showError(data);\n\t\t});\n\t}\n\n\tsendPayment(buttonEvent, skipPublicMessage = 'n')\n\t{\n\t\tif (!this.isPaymentCreationAvailable)\n\t\t{\n\t\t\tthis.closeApplication();\n\t\t\treturn null;\n\t\t}\n\n\t\tif (!this.store.getters['orderCreation/isAllowedSubmit'] || this.isProgress)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tthis.startProgress(buttonEvent);\n\n\t\tconst data = {\n\t\t\tdialogId: this.dialogId,\n\t\t\tsendingMethod: this.sendingMethod,\n\t\t\tsendingMethodDesc: this.sendingMethodDesc,\n\t\t\tsessionId: this.sessionId,\n\t\t\tlineId: this.lineId,\n\t\t\townerTypeId: this.ownerTypeId,\n\t\t\torderId: this.orderId,\n\t\t\townerId: this.ownerId,\n\t\t\tmode: this.options.mode,\n\t\t\tskipPublicMessage,\n\t\t\tdeliveryId: this.store.getters['orderCreation/getDeliveryId'],\n\t\t\tdeliveryPrice: this.store.getters['orderCreation/getDelivery'],\n\t\t\texpectedDeliveryPrice: this.store.getters['orderCreation/getExpectedDelivery'],\n\t\t\tdeliveryResponsibleId: this.store.getters['orderCreation/getDeliveryResponsibleId'],\n\t\t\tpersonTypeId: this.store.getters['orderCreation/getPersonTypeId'],\n\t\t\tshipmentPropValues: this.store.getters['orderCreation/getPropertyValues'],\n\t\t\tdeliveryExtraServicesValues: this.store.getters['orderCreation/getDeliveryExtraServicesValues'],\n\t\t\tavailablePaySystemsIds: this.store.getters['orderCreation/getAvailablePaySystemsIds'],\n\t\t\tconnector: this.connector,\n\t\t\tcontext: this.context,\n\t\t\tcurrency: this.currencyCode,\n\t\t\tassignedById: this.assignedById,\n\t\t};\n\n\t\tif (this.documentSelector)\n\t\t{\n\t\t\tdata.boundDocumentId = this.store.getters['documentSelector/getBoundDocumentId'];\n\t\t\tdata.selectedTemplateId = this.store.getters['documentSelector/getSelectedTemplateId'];\n\t\t}\n\n\t\tif (this.stageOnOrderPaid !== null)\n\t\t{\n\t\t\tdata.stageOnOrderPaid = this.stageOnOrderPaid;\n\t\t}\n\t\tif (this.stageOnDeliveryFinished !== null)\n\t\t{\n\t\t\tdata.stageOnDeliveryFinished = this.stageOnDeliveryFinished;\n\t\t}\n\n\t\tAjax.runAction('salescenter.order.createPayment', {\n\t\t\tdata: {\n\t\t\t\tbasketItems: this.store.getters['orderCreation/getBasket'](),\n\t\t\t\toptions: data,\n\t\t\t},\n\t\t\tanalyticsLabel: (this.context === ContextDictionary.deal) ? 'salescenterCreatePaymentSms' : 'salescenterCreatePayment',\n\t\t\tgetParameters: {\n\t\t\t\tdialogId: this.dialogId,\n\t\t\t\tcontext: this.context,\n\t\t\t\tconnector: this.connector,\n\t\t\t\tskipPublicMessage: skipPublicMessage,\n\t\t\t}\n\t\t}).then((result) =>\n\t\t{\n\t\t\tthis.store.dispatch('orderCreation/resetBasket');\n\t\t\tthis.stopProgress(buttonEvent);\n\t\t\tif (skipPublicMessage === 'y')\n\t\t\t{\n\t\t\t\tlet notify = {\n\t\t\t\t\tcontent: Loc.getMessage('SALESCENTER_ORDER_CREATE_NOTIFICATION').replace('#ORDER_ID#', result.data.order.number),\n\t\t\t\t};\n\t\t\t\tnotify.actions = [{\n\t\t\t\t\ttitle: Loc.getMessage('SALESCENTER_VIEW'),\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tclick() {\n\t\t\t\t\t\t\tManager.showOrderAdd(result.data.order.id);\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t}];\n\t\t\t\tBX.UI.Notification.Center.notify(notify);\n\t\t\t\tManager.showOrdersList({\n\t\t\t\t\torderId: result.data.order.id,\n\t\t\t\t\townerId: this.ownerId,\n\t\t\t\t\townerTypeId: this.ownerTypeId,\n\t\t\t\t\tcontext: this.context,\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.slider.data.set('action', 'sendPayment');\n\t\t\t\tthis.slider.data.set('order', result.data.order);\n\n\t\t\t\tif (result.data.deal)\n\t\t\t\t{\n\t\t\t\t\tthis.slider.data.set('deal', result.data.deal);\n\t\t\t\t}\n\n\t\t\t\tif (result.data.entity)\n\t\t\t\t{\n\t\t\t\t\tthis.slider.data.set('entity', result.data.entity);\n\t\t\t\t}\n\n\t\t\t\tthis.closeApplication();\n\t\t\t}\n\t\t\tthis.emitGlobalEvent('salescenter.app:onpaymentcreated');\n\t\t}).catch((data) =>\n\t\t{\n\n\t\t\tdata.errors.forEach((error) => {\n\t\t\t\ttop.BX.UI.Notification.Center.notify({\n\t\t\t\t\tcontent: Text.encode(error.message)\n\t\t\t\t});\n\t\t\t});\n\t\t\tthis.stopProgress(buttonEvent);\n\t\t\tApp.showError(data);\n\n\t\t\tif(this.needCloseApplication(data.errors))\n\t\t\t{\n\t\t\t\tthis.closeApplication();\n\t\t\t}\n\t\t});\n\t}\n\n\tsendTerminalPayment(buttonEvent)\n\t{\n\t\tif (!this.isPaymentCreationAvailable)\n\t\t{\n\t\t\tthis.closeApplication();\n\n\t\t\treturn null;\n\t\t}\n\n\t\tif (!this.store.getters['orderCreation/isAllowedSubmit'] || this.isProgress)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tthis.startProgress(buttonEvent);\n\n\t\tconst data = {\n\t\t\townerTypeId: this.ownerTypeId,\n\t\t\townerId: this.ownerId,\n\t\t\torderId: this.orderId,\n\t\t\tpaymentResponsibleId: this.store.getters['orderCreation/getPaymentResponsibleId'],\n\t\t\tcontext: this.context,\n\t\t\tcurrency: this.currencyCode,\n\t\t\tassignedById: this.assignedById,\n\t\t};\n\n\t\tif (this.stageOnOrderPaid !== null)\n\t\t{\n\t\t\tdata.stageOnOrderPaid = this.stageOnOrderPaid;\n\t\t}\n\n\t\tconst isMobileInstalledForResponsible = this.store.getters['orderCreation/isMobileInstalledForResponsible'];\n\n\t\tAjax.runAction('salescenter.order.createTerminalPayment', {\n\t\t\tdata: {\n\t\t\t\tbasketItems: this.store.getters['orderCreation/getBasket'](),\n\t\t\t\toptions: data,\n\t\t\t},\n\t\t\tanalyticsLabel: 'salescenterCreateTerminalPayment',\n\t\t\tgetParameters: {\n\t\t\t\tcontext: this.context,\n\t\t\t},\n\t\t}).then((result) => {\n\t\t\tthis.store.dispatch('orderCreation/resetBasket');\n\t\t\tthis.stopProgress(buttonEvent);\n\t\t\tthis.slider.data.set('action', 'sendPayment');\n\t\t\tthis.slider.data.set('order', result.data.order);\n\n\t\t\tif (result.data.deal)\n\t\t\t{\n\t\t\t\tthis.slider.data.set('deal', result.data.deal);\n\t\t\t}\n\n\t\t\tif (result.data.entity)\n\t\t\t{\n\t\t\t\tthis.slider.data.set('entity', result.data.entity);\n\t\t\t}\n\n\t\t\tif (isMobileInstalledForResponsible)\n\t\t\t{\n\t\t\t\tthis.closeApplication();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.showMobileAppInstallLinkPopup();\n\t\t\t}\n\n\t\t\tthis.emitGlobalEvent('salescenter.app:onterminalpaymentcreated');\n\t\t}).catch((data) => {\n\t\t\tdata.errors.forEach((error) => {\n\t\t\t\ttop.BX.UI.Notification.Center.notify({\n\t\t\t\t\tcontent: Text.encode(error.message),\n\t\t\t\t});\n\t\t\t});\n\t\t\tthis.stopProgress(buttonEvent);\n\t\t\tApp.showError(data);\n\n\t\t\tif (this.needCloseApplication(data.errors))\n\t\t\t{\n\t\t\t\tthis.closeApplication();\n\t\t\t}\n\t\t});\n\t}\n\n\tshowMobileAppInstallLinkPopup()\n\t{\n\t\tconst responsiblePhoneNumbers = this.store.getters['orderCreation/getResponsiblePhoneNumbers'];\n\n\t\t(new MobileAppInstallPopup({\n\t\t\tsendersConfig: this.options.senders,\n\t\t\tphoneNumbers: responsiblePhoneNumbers,\n\t\t\tuserId: this.store.getters['orderCreation/getPaymentResponsibleId'],\n\t\t\troot: this,\n\t\t})).render();\n\t}\n\n\tupdateTerminalPayment(buttonEvent)\n\t{\n\t\tif (!this.store.getters['orderCreation/isAllowedSubmit'] || this.isProgress)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tthis.startProgress(buttonEvent);\n\n\t\tconst data = {\n\t\t\tpaymentResponsibleId: this.store.getters['orderCreation/getPaymentResponsibleId'],\n\t\t};\n\n\t\tAjax.runAction('salescenter.order.updateTerminalPayment', {\n\t\t\tdata: {\n\t\t\t\tpaymentId: this.options.paymentId,\n\t\t\t\toptions: data,\n\t\t\t},\n\t\t\tanalyticsLabel: 'salescenterUpdateTerminalPayment',\n\t\t\tgetParameters: {\n\t\t\t\tcontext: this.context,\n\t\t\t},\n\t\t}).then((result) => {\n\t\t\tthis.store.dispatch('orderCreation/resetBasket');\n\t\t\tthis.stopProgress(buttonEvent);\n\t\t\tthis.slider.data.set('action', 'sendPayment');\n\t\t\tthis.slider.data.set('order', result.data.order);\n\n\t\t\tif (result.data.deal)\n\t\t\t{\n\t\t\t\tthis.slider.data.set('deal', result.data.deal);\n\t\t\t}\n\n\t\t\tif (result.data.entity)\n\t\t\t{\n\t\t\t\tthis.slider.data.set('entity', result.data.entity);\n\t\t\t}\n\n\t\t\tthis.closeApplication();\n\t\t\tthis.emitGlobalEvent('salescenter.app:onterminalpaymentupdated');\n\t\t}).catch((data) => {\n\t\t\tdata.errors.forEach((error) => {\n\t\t\t\ttop.BX.UI.Notification.Center.notify({\n\t\t\t\t\tcontent: Text.encode(error.message),\n\t\t\t\t});\n\t\t\t});\n\t\t\tthis.stopProgress(buttonEvent);\n\t\t\tApp.showError(data);\n\n\t\t\tif (this.needCloseApplication(data.errors))\n\t\t\t{\n\t\t\t\tthis.closeApplication();\n\t\t\t}\n\t\t});\n\t}\n\n\topenMobileAppPopup()\n\t{\n\t\tconst popupIconClass = this.options.currentLanguage === 'ru' ? 'salescenter-popup-qr__icon --ru' : 'salescenter-popup-qr__icon';\n\n\t\t// the mobile app popup goes here\n\t\tconst popupContent = Tag.render`\n\t\t\t<div class=\"salescenter-popup-qr__box\">\n\t\t\t\t<div class=\"salescenter-popup-qr__title\">${Loc.getMessage('SALESCENTER_TERMINAL_QR_POPUP_TITLE')}</div>\n\t\t\t\t<div class=\"salescenter-popup-qr__desc\">${Loc.getMessage('SALESCENTER_TERMINAL_QR_POPUP_DESC')}</div>\n\t\t\t\t<div class=\"salescenter-popup-qr__content\">\n\t\t\t\t\t<div class=\"salescenter-popup-qr__code\"></div>\n\t\t\t\t\t<ul class=\"salescenter-popup-qr__list\">\n\t\t\t\t\t\t<li class=\"salescenter-popup-qr__list_item\">${Loc.getMessage('SALESCENTER_TERMINAL_QR_POPUP_LIST_ITEM_1')}</li>\n\t\t\t\t\t\t<li class=\"salescenter-popup-qr__list_item\">${Loc.getMessage('SALESCENTER_TERMINAL_QR_POPUP_LIST_ITEM_2')}</li>\n\t\t\t\t\t\t<li class=\"salescenter-popup-qr__list_item\">${Loc.getMessage('SALESCENTER_TERMINAL_QR_POPUP_LIST_ITEM_3')}</li>\n\t\t\t\t\t\t<li class=\"salescenter-popup-qr__list_item\">${Loc.getMessage('SALESCENTER_TERMINAL_QR_POPUP_LIST_ITEM_4')}</li>\n\t\t\t\t\t</ul>\n\t\t\t\t\t<div class=\"salescenter-popup-qr__icon_box\">\n\t\t\t\t\t\t<div class=\"${popupIconClass}\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\t\t\n\t\t`;\n\n\t\tconst mobilePopup = new Popup({\n\t\t\tclassName: 'salescenter-popup-qr__wrap',\n\t\t\tcontent: popupContent,\n\t\t\toverlay: true,\n\t\t\tcloseIcon: true,\n\t\t\tmaxWidth: 725,\n\t\t\tautoHide: true,\n\t\t\tcacheable: false,\n\t\t\tbuttons: [\n\t\t\t\tnew Button({\n\t\t\t\t\tcolor: Button.Color.PRIMARY,\n\t\t\t\t\ttext: Loc.getMessage('SALESCENTER_JS_POPUP_CLOSE'),\n\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\tmobilePopup.close();\n\t\t\t\t\t},\n\t\t\t\t}),\n\t\t\t\tnew Button({\n\t\t\t\t\tcolor: Button.Color.LINK,\n\t\t\t\t\ttext: Loc.getMessage('SALESCENTER_TERMINAL_QR_POPUP_BUTTON_ABOUT'),\n\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\tManager.openHowTerminalWorks();\n\t\t\t\t\t},\n\t\t\t\t}),\n\t\t\t],\n\t\t});\n\n\t\tmobilePopup.show();\n\t\tthis.getQRCode();\n\t}\n\n\tgetQRCode()\n\t{\n\t\tconst qrNode = document.querySelector('.salescenter-popup-qr__code');\n\n\t\treturn new QRCode(qrNode, {\n\t\t\ttext: this.options.mobileAppLink,\n\t\t\twidth: 143,\n\t\t\theight: 143,\n\t\t});\n\t}\n\n\tneedCloseApplication(errors)\n\t{\n\t\tlet alwaysOpen = errors.filter(error => {\n\t\t\treturn error.code < 1 || error.code > 100\n\t\t}).length >= 1\n\n\t\treturn alwaysOpen === false\n\t}\n\n\tresendPayment(buttonEvent)\n\t{\n\t\tif (!this.isPaymentCreationAvailable)\n\t\t{\n\t\t\tthis.closeApplication();\n\t\t\treturn null;\n\t\t}\n\n\t\tif (!this.store.getters['orderCreation/isAllowedSubmit'] || this.isProgress)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tthis.startProgress(buttonEvent);\n\n\t\tconst options = {\n\t\t\tsendingMethod: this.sendingMethod,\n\t\t\tsendingMethodDesc: this.sendingMethodDesc,\n\t\t\tstageOnOrderPaid: this.stageOnOrderPaid,\n\t\t\townerTypeId: this.ownerTypeId,\n\t\t\townerId: this.ownerId,\n\t\t};\n\t\tif (this.documentSelector)\n\t\t{\n\t\t\toptions.boundDocumentId = this.store.getters['documentSelector/getBoundDocumentId'];\n\t\t\toptions.selectedTemplateId = this.store.getters['documentSelector/getSelectedTemplateId'];\n\t\t}\n\t\tAjax.runAction('salescenter.order.resendPayment', {\n\t\t\tdata: {\n\t\t\t\torderId: this.orderId,\n\t\t\t\tpaymentId: this.options.paymentId,\n\t\t\t\tshipmentId: this.options.shipmentId,\n\t\t\t\toptions,\n\t\t\t},\n\t\t\tgetParameters: {\n\t\t\t\tcontext: this.context,\n\t\t\t}\n\t\t}).then((result) =>\n\t\t{\n\t\t\tthis.stopProgress(buttonEvent);\n\t\t\tthis.closeApplication();\n\t\t\tthis.emitGlobalEvent('salescenter.app:onpaymentresend');\n\t\t}).catch((data) =>\n\t\t{\n\t\t\tdata.errors.forEach((error) => {\n\t\t\t\talert(error.message);\n\t\t\t});\n\t\t\tthis.stopProgress(buttonEvent);\n\t\t\tApp.showError(data);\n\t\t});\n\t}\n\thideNoPaymentSystemsBanner()\n\t{\n\t\tconst userOptionName = this.options.orderCreationOption || false;\n\t\tconst userOptionKeyName = this.options.paySystemBannerOptionName || false;\n\t\tif (userOptionName && userOptionKeyName)\n\t\t{\n\t\t\tBX.userOptions.save('salescenter', userOptionName, userOptionKeyName, 'Y');\n\t\t}\n\t}\n\tgetOrdersCount()\n\t{\n\t\tif(this.sessionId > 0)\n\t\t{\n\t\t\treturn Rest.callMethod('salescenter.order.getActiveOrdersCount', {\n\t\t\t\tsessionId: this.sessionId\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn new Promise((resolve, reject) => {});\n\t\t}\n\t}\n\n\tgetPaymentsCount()\n\t{\n\t\tif (this.sessionId > 0)\n\t\t{\n\t\t\treturn Rest.callMethod('salescenter.order.getActivePaymentsCount', {\n\t\t\t\tsessionId: this.sessionId\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn new Promise((resolve, reject) => {});\n\t\t}\n\t}\n\n\thasClientContactInfo()\n\t{\n\t\tif (this.options.sendingMethod === 'chat')\n\t\t{\n\t\t\treturn this.options.dialogId !== '';\n\t\t}\n\n\t\treturn this.options.contactPhone !== '';\n\t}\n\n\temitGlobalEvent(eventName, data)\n\t{\n\t\tEventEmitter.emit(eventName, data);\n\t\tBX.SidePanel.Instance.postMessage(this.slider, eventName, data);\n\t}\n\n\tisPaymentMode(): boolean\n\t{\n\t\treturn this.context === ContextDictionary.deal || this.context === ContextDictionary.smartInvoice || this.context === ContextDictionary.terminalList;\n\t}\n}\n\ndeclare type DocumentSelectorParams = {\n\tboundDocumentId: ?number,\n\tselectedTemplateId: ?number,\n\tdocuments: ?Document[],\n\ttemplates: ?Template[],\n\ttemplateAddUrl: ?string,\n\tprovider: ?string,\n\tvalue: ?number,\n};\n\nexport type Document = {\n\tid: number,\n\ttitle: string,\n\tdetailUrl: string,\n\tisWithStamps: boolean,\n}\n\nexport type Template = {\n\tid: number,\n\ttitle: string,\n\tdocumentCreationUrl: string,\n\tisWithStamps: boolean,\n}\n"],"names":["MixinTemplatesType","data","editable","created","$root","$on","value","TileCollectionMixins","components","Label","TileLabel","TileHintImg","TileLabelPlus","TileHintImgCaption","TileHintBackground","TileHintBackgroundCaption","methods","getCollectionTile","tiles","getCollectionTileByFilter","filter","map","Map","collection","hasOwnProperty","type","length","forEach","item","index","getType","set","hasTileOfferFromCollection","Tile","size","hasTileMoreFromCollection","getTileOfferFromCollection","result","inx","tile","getTileMoreFromCollection","getTileByIndex","openSlider","slider","AppSlider","openAppLocal","getOptionSlider","subscribe","EventTypes","AppSliderSliderClose","e","$emit","isControlTile","includes","showHint","event","popup","Hint","show","target","info","hideHint","hide","computed","width","Uninstalled","props","Array","required","mixins","template","Installed","StageMixin","statusClassMixin","status","Status","current","disabled","containerClassMixin","counterCheckedMixin","complete","onSliderClose","Cashbox","String","counter","Number","installed","Boolean","titleItems","initialCollapseState","Block","TileInstalled","TileUnInstalled","statusClass","title","Loc","getMessage","configForBlock","collapsible","checked","onItemHint","BX","Salescenter","Manager","openHowToConfigCashBox","saveCollapsedOption","option","ModeDictionary","Object","freeze","payment","delivery","paymentDelivery","terminalPayment","mounted","$app","options","templateMode","isCompilationMode","compilation","productForm","setEditable","formWrapper","$el","querySelector","appendChild","layout","refreshId","defaultCurrency","currencyCode","$store","dispatch","Type","isArray","basket","fields","push","commit","isObject","totals","ProductForm","currencySymbol","currency","iblockId","catalogIblockId","basePriceId","taxList","vatList","measures","showDiscountBlock","showProductDiscounts","showTaxBlock","showProductTaxes","totalResultLabel","mode","urlBuilderContext","urlProductBuilderContext","isCatalogPriceEditEnabled","isCatalogDiscountSetEnabled","fieldHints","hideUnselectedProperties","showCompilationModeSwitcher","compilationFormType","connector","isAllowedFacebookRegion","facebookFailProducts","FAIL_PRODUCTS","ownerId","ownerTypeId","dialogId","sessionId","isShortProductViewFormat","checkProductErrors","EventEmitter","Runtime","debounce","onBasketChange","onProductFormModeChange","onProductFormCompilationCreated","bind","getData","newCompilationId","compilationId","FormMode","COMPILATION","COMPILATION_READ_ONLY","processRefreshRequest","preparedBasket","isStringFilled","innerId","selectorId","setData","total","changeCompilationProducts","isNeedDisableSubmit","requestId","Text","getRandom","Ajax","runAction","orderId","basketItems","then","prop","getObject","discount","sum","get","errors","getters","productIds","basketItem","skuId","ID","isFunction","hasErrors","filledProducts","module","productId","hintTitle","additionalContainerClasses","product","Product","openHowToSell","containerClasses","config","DeliverySelector","availableServices","onChange","payload","deliveryPrice","deliveryServiceId","relatedPropsValues","relatedServicesValues","estimatedDeliveryPrice","responsibleUser","id","onAddressFromChanged","refreshAvailableServices","onDeliveryServiceChanged","onSettingsChanged","ajax","order","deliveryId","shipmentPropValues","propertyValues","deliveryRelatedServiceValues","deliveryExtraServicesValues","deliveryResponsibleId","personTypeId","localize","Vue","getFilteredPhrases","sumTitle","productsPrice","deliveryFormatted","isDeliveryCalculated","Currency","currencyFormat","totalFormatted","excludedServiceIds","emptyDeliveryServiceId","actionData","Vuex","mapState","state","orderCreation","shipment","priceDelivery","basePriceDelivery","deliveryService","name","logo","parent","extraServices","requestProperties","canUserPerformCalls","getFormattedPrice","price","isPhoneRequestProperty","property","tags","makeCall","phoneNumber","isUndefined","window","top","phoneTo","open","hasParent","deliveryServiceLogo","deliveryServiceProfileLogo","paymentPrice","deliveryServiceName","deliveryServiceProfileName","isExtraServicesVisible","isRequestPropertiesVisible","priceDeliveryFormatted","productsPriceFormatted","paymentPriceFormatted","DeliveryVuex","isCollapsible","selectedDeliveryServiceName","ShipmentView","shipmentId","titleName","shipmentData","propValues","extraServicesValues","relatedPropsOptions","deliveryOrderPropOptions","responsibleId","assignedById","isViewTemplateMode","setTitleName","PaySystem","openHowToConfigDefaultPaySystem","ContextDictionary","deal","smartInvoice","chat","sms","imOpenlines","terminalList","ChatMessage","manager","titleTemplate","editorTemplate","editorUrl","selectedMode","UserAvatar","MessageEditor","currentSenderCode","senders","pushedToUseBitrix24Notifications","smsSenderListComponentKey","editor","url","isMessageReadOnly","context","urlSettingsCompanyContacts","openBitrix24NotificationsHelp","Automation","stageOnOrderPaid","stageOnDeliveryFinished","items","paymentStages","shipmentStages","StageList","updatePaymentStage","newStageId","stage","selected","updateShipmentStage","initStages","stages","currentValue","values","AutomationStage","create","selectedStage","isPayment","find","isHideDeliveryStage","buttonLabel","buttonEnabled","showWhatClientSeesControl","isFacebookForm","buttonClass","showSubmitCompilationLinkToFacebookButton","showWhatClientSees","openWhatClientSee","submit","submitCompilationLinkToFacebook","TimeLine","timelineItems","Item","PaymentItem","CustomItem","Payment","isCustom","Custom","DocumentSelector","templateAddUrl","model","templates","documents","getDocumentTitle","currentDocument","getCurrentDocument","withStamps","isWithStamps","hasData","document","detailUrl","documentSelector","handleDocumentClick","openSelectorMenu","openTemplatesList","bindElement","MenuManager","prepareSelectorMenuItems","closeByEsc","cacheable","closeSelectorMenu","destroy","text","onclick","boundDocumentId","templateListItem","delimiter","selectedTemplateId","handleEditDocumentClick","getDocumentById","getStubDocumentByTemplate","getTemplateById","templateId","paymentId","Uri","addParam","documentCreationUrl","_paymentId","Send","message","entityResponsible","sendingMethodDesc","orderPublicUrl","paysystem","paySystemList","isSet","getTileCollection","getTitleItems","isPaySystemCollapsed","cashbox","automation","isHidden","parseInt","deliveryList","isInstalled","isDeliveryCollapsed","cashboxList","isCashboxCollapsed","isAutomationAvailable","entityStageList","isAutomationCollapsed","timeline","getTimelineCollection","isSendAllowed","hasStageTimeLine","hasStageAutomation","hasStageCashBox","submitButtonLabel","isShowDocumentSelector","initCounter","list","TimeLineItem","stageRefresh","runComponentAction","response","refreshTilesByType","UI","Notification","Center","notify","content","onSend","onSendCompilationLinkToFacebook","changeProvider","provider","userOptions","save","text_modes","beforeUpdate","isFaded","createPinner","startFade","endFade","buttonsPanel","$refs","parentNode","Pinner","fixBottom","isFrame","fullWidth","anchorBottom","close","closeApplication","isOrderPublicUrlAvailable","wrapperClass","wrapperStyle","position","pos","offset","$nodes","footer","height","connect","loader","Loader","body","no_redirect","loadConfig","isSiteExists","isOrderPublicUrlExists","checkRecycle","openConnectedSite","isOrderPageDeleted","isVisible","openControlPanel","ComponentMixin","isShowPreview","isShowPayment","pageTitle","currentPageId","actions","frameCheckShortTimeout","frameCheckLongTimeout","isPagesOpen","isFormsOpen","showedPageIds","loadedPageIds","errorPageIds","lastAddedPages","ordersCount","paymentsCount","editedPageId","currentPageTitle","Start","NoPaymentSystemsBanner","StageBlocksList","updated","renderErrors","createLoader","fillPages","isWithOrdersMode","refreshOrdersCount","refreshPaymentsCount","openFirstPage","isPaymentsLimitReached","paymentsLimitStartNode","paymentsLimit","paymentsLimitNode","children","node","getActions","currentPage","SALESCENTER_RIGHT_ACTION_COPY_URL","copyUrl","landingId","SALESCENTER_RIGHT_ACTION_HIDE","hidePage","SALESCENTER_RIGHT_ACTION_DELETE","SALESCENTER_RIGHT_ACTION_ADD","getAddPageActions","isWebform","SALESCENTER_RIGHT_ACTION_ADD_SITE_B24","addSite","SALESCENTER_RIGHT_ACTION_ADD_CUSTOM","showAddUrlPopup","isPaymentCreationAvailable","showPaymentForm","pages","firstWebformPage","pageToOpen","page","onPageClick","setPageTitle","hideActionsPopup","isFrameDenied","startFrameCheckTimeout","onFrameError","showActionsPopup","PopupMenu","offsetLeft","offsetTop","showCompanyContacts","showAddPageActionPopup","menuId","offsetWidth","offsetHeight","angle","addSitePage","newPage","answer","editPage","editLandingPage","siteId","hideNoPaymentSystemsBanner","isPlainObject","addCustomPage","pageId","getPaymentItemTitle","SALESCENTER_LEFT_PAYMENT_ADD_2_MSGVER_1","SALESCENTER_LEFT_PAYMENT_AND_DELIVERY_MSGVER_1","SALESCENTER_DEFAULT_TITLE","showOrdersList","showPaymentsList","showOrderAdd","showCatalog","onFormsClick","openHelpDesk","openHowItWorks","isPageSelected","sendCompilationLinkToFacebook","send","skipPublicMessage","isAllowedSubmitButton","isShowStartInfo","sendCompilation","sendPayment","isActive","sendPage","innerText","clearTimeout","onFrameLoad","onSuccessfullyConnected","setTimeout","getFrameSource","setQueryParam","toString","getOrdersCount","getPaymentsCount","errorMessages","join","params","color","Alert","Color","DANGER","textCenter","util","htmlspecialchars","errorBlock","innerHTML","animated","alert","getContainer","editMenuItem","focus","saveMenuItem","oldName","addPage","analyticsLabel","application","sendButtonLabel","pagesSubmenuHeight","formsSubmenuHeight","isFrameError","isShowLoader","res","lastModified","modifiedAgo","SALESCENTER_MODIFIED","replace","disableSendButton","isNoPaymentSystemsBannerVisible","showPaySystemSettingBanner","TYPE_PHONE","TYPE_SENDER","SmsMessage","initSenders","initCurrentSenderCode","initPushedToUseBitrix24Notifications","selectedSmsSender","phone","contactEditorUrl","Error","SenderList","MessageEdit","MessageView","MessageControl","contactPhone","hintClassModifier","currentSender","sender","code","bitrix24ConnectUrlError","SenderConfig","needConfigure","getConnectionErrorText","fixer","openSliderFreeMessages","connectUrl","fixText","getConnectionErrorFixText","BITRIX24","isAvailable","toUpperCase","isConnected","usageErrors","error","getFixer","handleErrorFix","initialize","onConfigureContactPhone","messageCode","fallback","fixUrl","events","onLoad","getSlider","sliderBx","getFrameWindow","addCustomEvent","loadExt","InfoHelper","Promise","resolve","handleOnSmsSenderSelected","handlePhoneErrorFix","hendleSmsErrorBlock","openBitrix24NotificationsWorks","sendAllowed","sent","groups","getTileGroupsCollection","isViewWithoutDelivery","ret","group","fillTiles","changeContactPhone","editableMixin","ResponsibleSelector","selectedUser","responsible","isMobileInstalledForResponsible","contact","isCreateMode","contactInfo","encode","addEmployee","responsibleHeaderText","avatarStyle","photo","addEmployeeLink","getElementById","Event","openMobileAppPopup","selectorRoot","dialogOptions","entities","onResponsibleChanged","preselectedItems","undeselectedItems","tagSelector","TagSelector","multiple","deselectable","renderTo","setDeselectable","updateTags","getId","isSubmitEnabled","userId","isMobileInstalled","phones","openHowTerminalWorks","formattedSum","CurrencyCore","element","Tag","render","getPriceControl","Amount","tourOptions","terminalTour","PAID","loadExtension","exports","Guide","guide","steps","article","onEvents","onFinish","UserOptions","getPopup","setAutoHide","showNextStep","paymentResponsible","contactName","hasProducts","isPaymentByAmount","isPanelVisible","activeMenuItem","isLoading","EntityCreatePaymentStages","StageBlocksListShipment","TerminalStageBlocksList","initialMode","spotlight","SpotLight","targetElement","autoSave","targetVertex","zIndex","left","container","style","pointerEvents","reload","form","showModeList","onReload","sendPaymentDeliveryForm","isAllowedPaymentDeliverySubmitButton","resendPayment","sendDeliveryForm","isAllowedDeliverySubmitButton","sendShipment","sendTerminalPaymentForm","isAllowedTerminalPaymentSubmitButton","updateTerminalPayment","sendTerminalPayment","specifyCompanyContacts","suggestScenario","openFeedbackPayOrderForm","howItWorks","openHowPaySmartInvoiceWorks","openHowPayDealWorks","openIntegrationWindow","openIntegrationRequestForm","freeMessages","fixed","classList","remove","pinnerAnchor","openTerminalToolDisabledSlider","openSalescanterToolDisabledSlider","ToolAvailabilityManager","openSalescenterToolDisabledSlider","isAllowedFreeMessagesButton","isOnlyDeliveryItemVisible","hasInstallable","isTerminalItemVisible","isPaymentItemVisible","isTerminalAvailable","isTerminalToolEnabled","isSalescenterToolEnabled","hasClientContactInfo","filteredSenders","isTerminalViewModeSaveAllowed","isSuggestScenarioMenuItemVisible","isBitrix24","isRequestIntegrationMenuItemVisible","isIntegrationButtonVisible","isModeListVisible","needShowStoreConnection","isSidebarEnabled","sendPaymentDeliveryFormButtonText","paymentDeliveryFormSubmitButtonClass","deliveryFormSubmitButtonClass","terminalPaymentFormSubmitButtonClass","paymentMenuItemClass","paymentTerminalMenuItemClass","paymentDeliveryMenuItemClass","deliveryMenuItemClass","ApplicationModel","getPages","setPages","saveState","removePage","VuexBuilderModel","DocumentSelectorModel","addDocument","setBoundDocumentId","Rest","callMethod","console","loadTemplates","entityTypeId","entityId","getTemplates","getDocuments","getBoundDocumentId","getSelectedTemplateId","fillState","setTemplates","setSelectedTemplateId","newDocument","isUpdated","unshift","OrderCreationModel","processingId","basketVersion","expectedDelivery","isEnabledSubmit","availablePaySystemsIds","paymentResponsibleId","responsiblePhoneNumbers","resetBasket","setCurrency","setDeliveryId","setDelivery","setPropertyValues","setDeliveryExtraServicesValues","setExpectedDelivery","setDeliveryResponsibleId","setPaymentResponsibleId","setMobileInstalledForResponsible","setResponsiblePhoneNumbers","setPersonTypeId","setAvailablePaySystemsIds","getBasket","isAllowedSubmit","getTotal","getDelivery","getDeliveryId","getPropertyValues","getDeliveryExtraServicesValues","getExpectedDelivery","getDeliveryResponsibleId","getPaymentResponsibleId","getResponsiblePhoneNumbers","getPersonTypeId","getAvailablePaySystemsIds","setBasket","setTotal","assign","clearBasket","setErrors","clearErrors","setProcessingId","enableSubmit","disableSubmit","enableCompilationMode","disableCompilationMode","MobileAppInstallPopup","sendersConfig","phoneNumbers","root","selectedPhoneNumber","selectedSender","mainPopup","sendButton","sendersMenu","phoneMenu","sendersData","smsSenders","popupContent","getPopupContent","linkButton","Button","LINK","round","icon","ButtonIcon","COPY","ButtonState","DISABLED","PRIMARY","setClocking","sendSms","Popup","className","overlay","closeIcon","maxWidth","buttons","onClose","bindCopyLink","bindSelectors","senderId","entity","clipboard","bindCopyClick","mobileAppLink","bindSendersSelector","bindPhoneSelector","sendersSelector","menuItems","firstChild","getCurrentMenu","SidePanel","Instance","refresh","phoneSelector","updateSendButtonState","updateContent","setDisabled","setContent","phoneAndServiceContent","instances","App","lineId","orderAddPullTag","landingPublicationPullTag","landingUnPublicationPullTag","isCatalogAvailable","DocumentSelectorParams","getTopSlider","isProgress","fillPagesTimeout","fillPagesQueue","sendingMethod","fileControl","isString","isBoolean","ready","pull","PULL","initPull","initStore","initTemplate","showError","moduleId","command","callback","showOrdersListAfterCreate","store","templateEngine","el","Chat","Deal","isPaymentMode","leftPanel","orderSelector","initOrderSelector","arParams","getLoader","componentKey","orderList","orderSelectorBtn","setAttribute","popupMenu","orderCaption","addEventListener","preventDefault","init","err","startProgress","stopProgress","buttonEvent","showLoader","isDomNode","add","hideLoader","reject","promise","deleteUrl","error_description","source","connectedSiteId","addAnalyticAction","getParameters","pop","sendCompilationToFacebook","sendCompilationAjaxAction","facebookSettingsPath","showFacebookCatalogConnectionPopup","facebookCatalogConnectionPopup","getFacebookCatalogConnectionPopupContent","padding","animation","right","setFacebookCatalogConnectionButton","setFacebookCatalogConnectionPopupHandler","sendLinkToB24CompilationButton","sendLinkToB24CompilationButtonPopupHandler","emitGlobalEvent","expectedDeliveryPrice","number","click","needCloseApplication","showMobileAppInstallLinkPopup","popupIconClass","currentLanguage","mobilePopup","autoHide","getQRCode","qrNode","QRCode","alwaysOpen","userOptionName","orderCreationOption","userOptionKeyName","paySystemBannerOptionName","eventName","emit","postMessage","builder","VuexBuilder","addModel","useNamespace","build"],"mappings":"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"}