{"version":3,"file":"app.bundle.js","sources":["../src/components/templates-type-mixin.js","../src/components/stage-blocks/tile-collection/tile-collection-mixins.js","../src/components/stage-blocks/tile-collection/uninstalled.js","../src/components/stage-blocks/tile-collection/installed.js","../src/components/stage-blocks/stage-mixin.js","../src/components/stage-blocks/cashbox.js","../src/const/mode-dictionary.js","../src/product.js","../src/components/stage-blocks/product.js","../src/components/delivery-selector.js","../src/components/shipment-view.js","../src/components/stage-blocks/delivery-vuex.js","../src/components/stage-blocks/paysystem.js","../src/const/context-dictionary.js","../src/components/stage-blocks/chat-message.js","../src/components/stage-blocks/automation.js","../src/components/deal-receiving-payment/stage-blocks/send.js","../src/components/stage-blocks/timeline.js","../src/components/stage-blocks/document-selector.js","../src/components/chat-receiving-payment/stage-blocks-list.js","../src/component-mixin.js","../src/start.js","../src/no-payment-systems.js","../src/chat.js","../src/components/stage-blocks/sms-message.js","../src/components/deal-receiving-payment/stage-blocks-list.js","../src/components/crm-entity-create-payment/stage-blocks-list.js","../src/components/deal-creating-shipment/stage-blocks/send.js","../src/components/deal-creating-shipment/stage-blocks-list.js","../src/components/stage-blocks/responsible-selector.js","../src/components/deal-terminal-payment/stage-blocks/send.js","../src/components/deal-terminal-payment/stage-blocks/amount.js","../src/components/deal-terminal-payment/stage-blocks-list.js","../src/deal.js","../src/models/application.js","../src/models/document-selector.js","../src/models/ordercreation.js","../src/components/deal-terminal-payment/mobile-app-install-popup.js","../src/app.js"],"sourcesContent":["const MixinTemplatesType = {\n\tdata() {\n\t\treturn {\n\t\t\teditable: true,\n\t\t};\n\t},\n\tcreated() {\n\t\t// TODO: this code is really weird; the only place this event is emitted in is in the products block;\n\t\t// if there's no products block on the page, the entire slider breaks\n\t\t// perhaps a little refactoring is due\n\t\tthis.$root.$on('on-change-editable', (value) => {\n\t\t\tthis.editable = value;\n\t\t});\n\t},\n};\n\nexport {\n\tMixinTemplatesType,\n};\n","import\n{\n\tAppSlider,\n\tEventTypes\n} \t\t\t\t\t\t\t\tfrom 'salescenter.marketplace';\nimport\n{\n\tLabel,\n\tTileLabel,\n\tTileHintImg,\n\tTileLabelPlus,\n\tTileHintImgCaption,\n\tTileHintBackground,\n\tTileHintBackgroundCaption,\n} \t\t\t\t\t\t\t\tfrom 'salescenter.component.stage-block.tile';\nimport * as Hint \t\t\t\tfrom 'salescenter.component.stage-block.hint';\nimport * as Tile \t\t\t\tfrom 'salescenter.tile';\n\n\nlet TileCollectionMixins = {\n\n\tcomponents:\n\t\t{\n\t\t\t'label-block'\t\t\t\t\t\t\t:\tLabel,\n\t\t\t'tile-label-block'\t\t\t\t\t\t:\tTileLabel,\n\t\t\t'tile-hint-img-block'\t\t\t\t\t:\tTileHintImg,\n\t\t\t'tile-hint-plus-block'\t\t\t\t\t:\tTileLabelPlus,\n\t\t\t'tile-hint-img-caption-block'\t\t\t:\tTileHintImgCaption,\n\t\t\t'tile-hint-background-block'\t\t\t:\tTileHintBackground,\n\t\t\t'tile-hint-background-caption-block'\t:\tTileHintBackgroundCaption\n\t\t},\n\tmethods:\n\t\t{\n\t\t\tgetCollectionTile()\n\t\t\t{\n\t\t\t\treturn this.tiles;\n\t\t\t},\n\n\t\t\tgetCollectionTileByFilter(filter: Array)\n\t\t\t{\n\t\t\t\tlet map = new Map();\n\t\t\t\tlet collection = this.getCollectionTile();\n\n\t\t\t\tif(filter.hasOwnProperty('type') && filter.type.length > 0)\n\t\t\t\t{\n\t\t\t\t\tcollection\n\t\t\t\t\t\t.forEach((item, index) => {\n\n\t\t\t\t\t\t\tif(filter.type === item.getType())\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tmap.set(index, item);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tcollection\n\t\t\t\t\t\t.forEach((item, index) => map.set(index, item));\n\t\t\t\t}\n\n\t\t\t\treturn map;\n\t\t\t},\n\n\t\t\thasTileOfferFromCollection()\n\t\t\t{\n\t\t\t\tlet map = this.getCollectionTileByFilter({\n\t\t\t\t\ttype: Tile.Offer.type()\n\t\t\t\t});\n\n\t\t\t\treturn map.size > 0;\n\t\t\t},\n\n\t\t\thasTileMoreFromCollection()\n\t\t\t{\n\t\t\t\tlet map = this.getCollectionTileByFilter({\n\t\t\t\t\ttype: Tile.More.type()\n\t\t\t\t});\n\n\t\t\t\treturn map.size > 0;\n\t\t\t},\n\n\t\t\tgetTileOfferFromCollection()\n\t\t\t{\n\t\t\t\tlet map = this.getCollectionTileByFilter({\n\t\t\t\t\ttype: Tile.Offer.type()\n\t\t\t\t});\n\n\t\t\t\tlet result = {};\n\t\t\t\tmap.forEach((item, inx)=> { result = {index: inx, tile: item}; return false;});\n\t\t\t\treturn result;\n\t\t\t},\n\n\t\t\tgetTileMoreFromCollection()\n\t\t\t{\n\t\t\t\tlet map = this.getCollectionTileByFilter({\n\t\t\t\t\ttype: Tile.More.type()\n\t\t\t\t});\n\n\t\t\t\tlet result = {};\n\t\t\t\tmap.forEach((item, inx)=> { result = {index: inx, tile: item}; return false;});\n\t\t\t\treturn result;\n\t\t\t},\n\n\t\t\tgetTileByIndex(index)\n\t\t\t{\n\t\t\t\tlet  tile = null;\n\t\t\t\tthis.getCollectionTileByFilter({})\n\t\t\t\t\t.forEach((item, inx)=> {\n\n\t\t\t\t\t\tif(index === inx)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttile = item;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\treturn tile;\n\t\t\t},\n\n\t\t\topenSlider(inx)\n\t\t\t{\n\t\t\t\tlet slider = new AppSlider();\n\t\t\t\tlet tile = this.getTileByIndex(inx);\n\n\t\t\t\tslider.openAppLocal(tile, this.getOptionSlider);\n\t\t\t\tslider.subscribe(EventTypes.AppSliderSliderClose,\n\t\t\t\t\t(e) => this.$emit('on-tile-slider-close', {data: e.data})\n\t\t\t\t);\n\t\t\t},\n\n\t\t\tisControlTile(tile: Tile.Base)\n\t\t\t{\n\t\t\t\treturn [Tile.More.type(), Tile.Offer.type()].includes(tile.getType());\n\t\t\t},\n\n\t\t\tshowHint(inx, e)\n\t\t\t{\n\t\t\t\tlet event = e.data.event;\n\t\t\t\tlet tile = this.getTileByIndex(inx);\n\n\t\t\t\tthis.popup = new Hint.Popup();\n\t\t\t\tthis.popup.show(event.target, tile.info);\n\t\t\t},\n\n\t\t\thideHint()\n\t\t\t{\n\t\t\t\tif(this.popup)\n\t\t\t\t{\n\t\t\t\t\tthis.popup.hide();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\tcomputed:\n\t\t{\n\t\t\tgetOptionSlider()\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\twidth: 1000\n\t\t\t\t}\n\t\t\t}\n\t\t},\n};\nexport {\n\tTileCollectionMixins\n}","import { TileCollectionMixins } from './tile-collection-mixins';\n\nconst Uninstalled = {\n\tprops: {\n\t\ttiles: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tmixins: [TileCollectionMixins],\n\ttemplate: `\t\t\n\t\t<div>\n\t\t\t<template v-for=\"(tile, index) in tiles\">\n\t\t\t\t<tile-hint-background-caption-block\tv-if=\"tile.img.length > 0 && tile.showTitle\"\n\t\t\t\t\t:src=\"tile.img\"\n\t\t\t\t\t:name=\"tile.name\"\n\t\t\t\t\t:caption=\"tile.psModeName\"\n\t\t\t\t\tv-on:tile-hint-bg-label-on-click=\"openSlider(index)\"\n\t\t\t\t\tv-on:tile-hint-bg-label-on-mouseenter=\"showHint(index, $event)\"\n\t\t\t\t\tv-on:tile-hint-bg-label-on-mouseleave=\"hideHint\"\n\t\t\t\t/>\n\t\t\t\t<tile-hint-background-block\t\tv-else-if=\"tile.img.length > 0\"\n\t\t\t\t\t:src=\"tile.img\"\n\t\t\t\t\t:name=\"tile.name\"\n\t\t\t\t\tv-on:tile-hint-bg-on-click=\"openSlider(index)\"\n\t\t\t\t\tv-on:tile-label-bg-hint-on-mouseenter=\"showHint(index, $event)\"\n\t\t\t\t\tv-on:tile-label-bg-hint-on-mouseleave=\"hideHint\"\n\t\t\t\t/>\n\t\t\t\t<tile-hint-plus-block\t\t\tv-else \n\t\t\t\t\t:name=\"tile.name\" \n\t\t\t\t\tv-on:tile-label-plus-on-click=\"openSlider(index)\"\n\t\t\t\t/> \n\t\t\t</template>\n\t\t</div>\n\t`\n};\n\nexport {\n\tUninstalled,\n};\n","import {TileCollectionMixins} from \"./tile-collection-mixins\";\n\nconst Installed = {\n\tprops: {\n\t\ttiles: {\n\t\t\ttype: Array,\n\t\t\trequired: true\n\t\t}\n\t},\n\tmixins:[TileCollectionMixins],\n\n\ttemplate: `\t\n\t\t<div class=\"salescenter-app-payment-by-sms-item-container-payment\">\n\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container-payment-inline\">\n\t\t\t\t<tile-label-block class=\"salescenter-app-payment-by-sms-item-container-payment-item-text\"\n\t\t\t\t\tv-for=\"(tile, index) in tiles\"\n\t\t\t\t\tv-bind:key=\"index\"\n\t\t\t\t\tv-if=\"isControlTile(tile) === false\"\n\t\t\t\t\t:name=\"tile.name\" \n\t\t\t\t\tv-on:tile-label-on-click=\"openSlider(index)\"\n\t\t\t\t/>\n\t\t\t\t<br>\n\t\t\t\t<tile-label-block class=\"salescenter-app-payment-by-sms-item-container-payment-item-text-add\"\n\t\t\t\t\tv-if=\"hasTileOfferFromCollection() === true\"\n\t\t\t\t\t:name=\"getTileOfferFromCollection().tile.name\"\n\t\t\t\t\tv-on:tile-label-on-click=\"openSlider(getTileOfferFromCollection().index)\"\n\t\t\t\t/>\n\t\t\t\t<tile-label-block class=\"salescenter-app-payment-by-sms-item-container-payment-item-text-add\"\n\t\t\t\t\tv-if=\"hasTileMoreFromCollection() === true\"\n\t\t\t\t\t:name=\"getTileMoreFromCollection().tile.name\"\n\t\t\t\t\tv-on:tile-label-on-click=\"openSlider(getTileMoreFromCollection().index)\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t`\n};\nexport {\n\tInstalled\n}","import {StatusTypes as Status} from 'salescenter.component.stage-block';\n\nconst StageMixin = {\n\tcomputed:\n\t\t{\n\t\t\tstatusClassMixin()\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\t'salescenter-app-payment-by-sms-item'\t\t\t: true,\n\t\t\t\t\t'salescenter-app-payment-by-sms-item-current'\t: this.status === Status.current,\n\t\t\t\t\t'salescenter-app-payment-by-sms-item-disabled'\t: this.status === Status.disabled,\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tcontainerClassMixin()\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\t'salescenter-app-payment-by-sms-item-container'\t: true\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tcounterCheckedMixin()\n\t\t\t{\n\t\t\t\treturn this.status === Status.complete\n\t\t\t}\n\t\t},\n\t\tmethods:\n\t\t\t{\n\t\t\t\tonSliderClose(e)\n\t\t\t\t{\n\t\t\t\t\tthis.$emit('on-stage-tile-collection-slider-close', e);\n\t\t\t\t}\n\t\t\t}\n};\n\nexport {\n\tStageMixin\n}","import {Loc} \t\t\t\t\t\t\t\t\tfrom 'main.core';\nimport {Block} \t\t\tfrom 'salescenter.component.stage-block';\nimport {Uninstalled as TileUnInstalled} \t\tfrom \"./tile-collection/uninstalled\";\nimport {Installed as TileInstalled} \t\t\tfrom \"./tile-collection/installed\";\nimport {StageMixin} \t\t\t\t\t\t\tfrom \"./stage-mixin\";\n\nconst Cashbox = {\n\tprops: {\n\t\tstatus: {\n\t\t\ttype: String,\n\t\t\t\trequired: true\n\t\t},\n\t\tcounter: {\n\t\t\ttype: Number,\n\t\t\t\trequired: true\n\t\t},\n\t\ttiles: {\n\t\t\ttype: Array,\n\t\t\t\trequired: true\n\t\t},\n\t\tinstalled: {\n\t\t\ttype: Boolean,\n\t\t\t\trequired: true\n\t\t},\n\t\ttitleItems: {\n\t\t\ttype: Array\n\t\t},\n\t\tinitialCollapseState: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true\n\t\t},\n\t},\n\tmixins:[StageMixin],\n\tcomponents:\n\t{\n\t\t'stage-block-item'\t\t\t\t\t:\tBlock,\n\t\t'tile-collection-installed-block'\t:\tTileInstalled,\n\t\t'tile-collection-uninstalled-block'\t:\tTileUnInstalled\n\t},\n\tcomputed:\n\t{\n\t\tstatusClass()\n\t\t{\n\t\t\treturn {\n\t\t\t\t'salescenter-app-payment-by-sms-item-disabled-bg': this.installed === false\n\t\t\t}\n\t\t},\n\t\ttitle()\n\t\t{\n\t\t\treturn this.installed === true\n\t\t\t\t? Loc.getMessage('SALESCENTER_CASHBOX_SET_BLOCK_TITLE')\n\t\t\t\t: Loc.getMessage('SALESCENTER_CASHBOX_BLOCK_TITLE');\n\t\t},\n\t\tconfigForBlock()\n\t\t{\n\t\t\treturn {\n\t\t\t\tcounter: this.counter,\n\t\t\t\ttitleItems: this.installed ? this.titleItems : [],\n\t\t\t\tinstalled: this.installed,\n\t\t\t\tcollapsible: true,\n\t\t\t\tchecked: this.counterCheckedMixin,\n\t\t\t\tshowHint: !this.installed,\n\t\t\t\tinitialCollapseState: this.initialCollapseState,\n\t\t\t}\n\t\t},\n\t},\n\tmethods:\n\t{\n\t\tonItemHint(e)\n\t\t{\n\t\t\tBX.Salescenter.Manager.openHowToConfigCashBox(e);\n\t\t},\n\t\tsaveCollapsedOption(option)\n\t\t{\n\t\t\tthis.$emit('on-save-collapsed-option', 'cashbox', option);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<stage-block-item\n\t\t\t:class=\"[statusClassMixin, statusClass]\"\n\t\t\t:config=\"configForBlock\"\n\t\t\t@on-item-hint.stop.prevent=\"onItemHint\"\n\t\t\t@on-tile-slider-close=\"onSliderClose\"\n\t\t\t@on-adjust-collapsed=\"saveCollapsedOption\"\n\t\t>\n\t\t\t<template v-slot:block-title-title>{{title}}</template>\n\t\t\t<template v-slot:block-hint-title>\n\t\t\t\t${Loc.getMessage('SALESCENTER_CASHBOX_BLOCK_SETTINGS_TITLE')}\n\t\t\t</template>\n\t\t\t<template v-slot:block-container>\n\t\t\t\t<div\n\t\t\t\t\tv-if=\"!installed\"\n\t\t\t\t\tclass=\"salescenter-app-explanation\"\n\t\t\t\t>\n\t\t\t\t\t<div class=\"salescenter-app-explanation-img\"></div>\n\t\t\t\t\t<div class=\"salescenter-app-explanation-area\">\n\t\t\t\t\t\t<div class=\"salescenter-app-explanation-text\">\n\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_TERMINAL_CASHBOX_SETUP_HINT')}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div :class=\"containerClassMixin\">\n\t\t\t\t\t<tile-collection-uninstalled-block \t:tiles=\"tiles\" v-if=\"!installed\" v-on:on-tile-slider-close=\"onSliderClose\"/>\n\t\t\t\t\t<tile-collection-installed-block :tiles=\"tiles\" v-on:on-tile-slider-close=\"onSliderClose\" v-else />\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</stage-block-item>\n\t`\n};\n\nexport\n{\n\tCashbox\n}\n","export const ModeDictionary = Object.freeze({\n\tpayment: 'payment',\n\tdelivery: 'delivery',\n\tpaymentDelivery: 'payment_delivery',\n\tterminalPayment: 'terminal_payment',\n});\n","import { FormMode, ProductForm } from 'catalog.product-form';\nimport 'currency';\nimport { MixinTemplatesType } from './components/templates-type-mixin';\nimport { ajax as Ajax, Runtime, Type, Text, Loc } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport type { BaseEvent } from 'main.core.events';\nimport { ModeDictionary } from './const/mode-dictionary';\n\nexport default {\n\tmixins: [MixinTemplatesType],\n\tmounted()\n\t{\n\t\tconst editable = this.$root.$app.options.templateMode !== 'view';\n\t\tconst isCompilationMode = this.$root.$app.compilation !== null;\n\n\t\tthis.$root.$emit('on-change-editable', editable);\n\t\tif (this.productForm)\n\t\t{\n\t\t\tthis.productForm.setEditable(editable, isCompilationMode);\n\t\t}\n\n\t\tif (this.productForm)\n\t\t{\n\t\t\tconst formWrapper = this.$root.$el.querySelector('.salescenter-app-form-wrapper');\n\t\t\tformWrapper.appendChild(this.productForm.layout());\n\t\t}\n\t},\n\tcreated()\n\t{\n\t\tthis.refreshId = null;\n\n\t\tconst defaultCurrency = this.$root.$app.options.currencyCode || '';\n\n\t\tthis.$store.dispatch('orderCreation/setCurrency', defaultCurrency);\n\t\tif (Type.isArray(this.$root.$app.options.basket))\n\t\t{\n\t\t\tconst fields = [];\n\t\t\tthis.$root.$app.options.basket.forEach((item) => {\n\t\t\t\tfields.push(item.fields);\n\t\t\t});\n\t\t\tthis.$store.commit('orderCreation/setBasket', fields);\n\t\t}\n\n\t\tif (Type.isObject(this.$root.$app.options.totals))\n\t\t{\n\t\t\tthis.$store.commit('orderCreation/setTotal', this.$root.$app.options.totals);\n\t\t}\n\n\t\tthis.productForm = new ProductForm(\n\t\t\t{\n\t\t\t\tcurrencySymbol: this.$root.$app.options.currencySymbol,\n\t\t\t\tcurrency: defaultCurrency,\n\t\t\t\tiblockId: this.$root.$app.options.catalogIblockId,\n\t\t\t\tbasePriceId: this.$root.$app.options.basePriceId,\n\t\t\t\tbasket: Type.isArray(this.$root.$app.options.basket) ? this.$root.$app.options.basket : [],\n\t\t\t\ttotals: this.$root.$app.options.totals,\n\t\t\t\ttaxList: this.$root.$app.options.vatList,\n\t\t\t\tmeasures: this.$root.$app.options.measures,\n\t\t\t\tshowDiscountBlock: this.$root.$app.options.showProductDiscounts,\n\t\t\t\tshowTaxBlock: this.$root.$app.options.showProductTaxes,\n\t\t\t\ttotalResultLabel: this.$root.$app.options.mode === 'delivery' ? Loc.getMessage('SALESCENTER_SHIPMENT_PRODUCT_BLOCK_TOTAL') : null,\n\t\t\t\turlBuilderContext: this.$root.$app.options.urlProductBuilderContext,\n\t\t\t\tisCatalogPriceEditEnabled: this.$root.$app.options.isCatalogPriceEditEnabled,\n\t\t\t\tisCatalogDiscountSetEnabled: this.$root.$app.options.isCatalogDiscountSetEnabled,\n\t\t\t\tfieldHints: this.$root.$app.options.fieldHints,\n\t\t\t\thideUnselectedProperties: (this.$root.$app.options.templateMode === 'view'),\n\t\t\t\tshowCompilationModeSwitcher: (\n\t\t\t\t\tthis.$root.$app.options.templateMode === 'create'\n\t\t\t\t\t&& this.$root.$app.options.showCompilationModeSwitcher === 'Y'\n\t\t\t\t\t&& this.$root.$app.options.mode === ModeDictionary.paymentDelivery\n\t\t\t\t),\n\t\t\t\tcompilationFormType: this.$root.$app.connector === 'facebook' && this.$root.$app.isAllowedFacebookRegion ? 'FACEBOOK' : 'REGULAR',\n\t\t\t\tfacebookFailProducts: this.$root.$app.compilation?.FAIL_PRODUCTS,\n\t\t\t\townerId: this.$root.$app.options.ownerId,\n\t\t\t\townerTypeId: this.$root.$app.options.ownerTypeId,\n\t\t\t\tdialogId: this.$root.$app.options.dialogId,\n\t\t\t\tsessionId: this.$root.$app.options.sessionId,\n\t\t\t\tisShortProductViewFormat: true,\n\t\t\t\tenableEmptyProductError: false,\n\t\t\t},\n\t\t);\n\n\t\tthis.checkProductErrors();\n\n\t\tEventEmitter.subscribe(\n\t\t\tthis.productForm,\n\t\t\t'ProductForm:onBasketChange',\n\t\t\tRuntime.debounce(this.onBasketChange, 500, this),\n\t\t);\n\n\t\tEventEmitter.subscribe(\n\t\t\tthis.productForm,\n\t\t\t'ProductForm:onErrorsChange',\n\t\t\tRuntime.debounce(this.checkProductErrors, 500, this),\n\t\t);\n\n\t\tEventEmitter.subscribe(\n\t\t\tthis.productForm,\n\t\t\t'ProductForm:onModeChange',\n\t\t\tthis.onProductFormModeChange,\n\t\t);\n\n\t\tEventEmitter.subscribe(\n\t\t\tthis.productForm,\n\t\t\t'ProductForm:onCompilationCreated',\n\t\t\tthis.onProductFormCompilationCreated.bind(this),\n\t\t);\n\t},\n\tmethods: {\n\t\tonProductFormCompilationCreated(event: BaseEvent)\n\t\t{\n\t\t\tconst data = event.getData();\n\t\t\tthis.$root.$app.newCompilationId = data.compilationId;\n\t\t\tthis.$root.$app.ownerId = data.ownerId;\n\t\t\tthis.$root.$app.options.ownerId = data.ownerId;\n\t\t},\n\t\tonProductFormModeChange(event: BaseEvent)\n\t\t{\n\t\t\tconst mode = event.getData().mode;\n\t\t\tif (mode === FormMode.COMPILATION || mode === FormMode.COMPILATION_READ_ONLY)\n\t\t\t{\n\t\t\t\tthis.$store.commit('orderCreation/enableCompilationMode');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.$store.commit('orderCreation/disableCompilationMode');\n\t\t\t}\n\t\t\tthis.$emit('on-product-form-mode-change');\n\t\t},\n\t\tonBasketChange(event: BaseEvent)\n\t\t{\n\t\t\tconst processRefreshRequest = (data) => {\n\t\t\t\tif (this.productForm)\n\t\t\t\t{\n\t\t\t\t\tconst preparedBasket = [];\n\t\t\t\t\tdata.basket.forEach((item) => {\n\t\t\t\t\t\tif (!Type.isStringFilled(item.innerId))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tpreparedBasket.push({\n\t\t\t\t\t\t\tselectorId: item.innerId,\n\t\t\t\t\t\t\tfields: item,\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\n\t\t\t\t\tthis.productForm.setData({\n\t\t\t\t\t\t...data,\n\t\t\t\t\t\tbasket: preparedBasket,\n\t\t\t\t\t});\n\n\t\t\t\t\tif (Type.isArray(data.basket))\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$store.commit('orderCreation/setBasket', data.basket);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (Type.isObject(data.total))\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$store.commit('orderCreation/setTotal', data.total);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tconst data = event.getData();\n\t\t\tif (!Type.isArray(data.basket))\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst fields = [];\n\t\t\tdata.basket.forEach((item) => {\n\t\t\t\tfields.push(item.fields);\n\t\t\t});\n\t\t\tthis.$store.commit('orderCreation/setBasket', fields);\n\n\t\t\tif (this.$root.$app.newCompilationId)\n\t\t\t{\n\t\t\t\tthis.changeCompilationProducts();\n\t\t\t}\n\n\t\t\tif (this.isNeedDisableSubmit())\n\t\t\t{\n\t\t\t\tthis.$store.commit('orderCreation/disableSubmit');\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.$store.commit('orderCreation/enableSubmit');\n\n\t\t\tconst requestId = Text.getRandom(20);\n\t\t\tthis.refreshId = requestId;\n\t\t\tAjax.runAction(\n\t\t\t\t'salescenter.api.order.refreshBasket',\n\t\t\t\t{\n\t\t\t\t\tdata: {\n\t\t\t\t\t\torderId: this.$root.$app.orderId,\n\t\t\t\t\t\tbasketItems: fields,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t)\n\t\t\t\t.then((result) => {\n\t\t\t\t\tif (this.refreshId !== requestId)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst data = BX.prop.getObject(result, 'data', {});\n\t\t\t\t\tprocessRefreshRequest({\n\t\t\t\t\t\ttotal: BX.prop.getObject(\n\t\t\t\t\t\t\tdata,\n\t\t\t\t\t\t\t'total',\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tdiscount: 0,\n\t\t\t\t\t\t\t\tresult: 0,\n\t\t\t\t\t\t\t\tsum: 0,\n\t\t\t\t\t\t\t\t// resultNumeric: 0,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t),\n\t\t\t\t\t\tbasket: BX.prop.get(data, 'items', []),\n\t\t\t\t\t});\n\t\t\t\t})\n\t\t\t\t.catch((result) => {\n\t\t\t\t\tconst data = BX.prop.getObject(result, 'data', {});\n\t\t\t\t\tprocessRefreshRequest({\n\t\t\t\t\t\terrors: BX.prop.get(result, 'errors', []),\n\t\t\t\t\t\tbasket: BX.prop.get(data, 'items', []),\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t},\n\t\tchangeCompilationProducts()\n\t\t{\n\t\t\tconst basketItems = this.$store.getters['orderCreation/getBasket']();\n\t\t\tconst productIds = basketItems.map((basketItem) => {\n\t\t\t\treturn basketItem.skuId;\n\t\t\t});\n\t\t\tconst compilationId = this.$root.$app.compilation\n\t\t\t\t? this.$root.$app.compilation.ID\n\t\t\t\t: this.$root.$app.newCompilationId\n\t\t\t;\n\t\t\tif (compilationId)\n\t\t\t{\n\t\t\t\tAjax.runAction(\n\t\t\t\t\t'salescenter.compilation.updateCompilation',\n\t\t\t\t\t{\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tcompilationId,\n\t\t\t\t\t\t\tproductIds,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t}\n\t\t},\n\t\tcheckProductErrors()\n\t\t{\n\t\t\tif (this.isNeedDisableSubmit())\n\t\t\t{\n\t\t\t\tthis.$store.commit('orderCreation/disableSubmit');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.$store.commit('orderCreation/enableSubmit');\n\t\t\t}\n\t\t},\n\t\tisNeedDisableSubmit(): boolean\n\t\t{\n\t\t\tconst basket = this.$store.getters['orderCreation/getBasket']();\n\n\t\t\treturn (\n\t\t\t\tbasket.length <= 0\n\t\t\t\t|| (this.productForm && Type.isFunction(this.productForm.hasErrors) && this.productForm.hasErrors())\n\t\t\t);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"salescenter-app-payment-side\">\n\t\t\t<div class=\"salescenter-app-page-content\">\n\t\t\t\t<div class=\"salescenter-app-form-wrapper\"></div>\n\t\t\t\t<slot name=\"footer\"></slot>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { Block } from 'salescenter.component.stage-block';\nimport Product from '../../product';\nimport { StageMixin } from './stage-mixin';\n\nexport default {\n\tprops: {\n\t\tstatus: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tcounter: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\thintTitle: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tadditionalContainerClasses: {\n\t\t\ttype: Object,\n\t\t\trequired: false,\n\t\t\tdefault()\n\t\t\t{\n\t\t\t\treturn {};\n\t\t\t},\n\t\t},\n\t},\n\tmixins: [StageMixin],\n\tcomponents:\n\t\t{\n\t\t\t'stage-block-item': Block,\n\t\t\tproduct: Product,\n\t\t},\n\tmethods:\n\t\t{\n\t\t\tonItemHint(e)\n\t\t\t{\n\t\t\t\tBX.Salescenter.Manager.openHowToSell(e);\n\t\t\t},\n\t\t\tonProductFormModeChange(event)\n\t\t\t{\n\t\t\t\tthis.$emit('on-product-form-mode-change');\n\t\t\t},\n\t\t},\n\tcomputed:\n\t\t{\n\t\t\tconfigForBlock()\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\tcounter: this.counter,\n\t\t\t\t\tchecked: this.counterCheckedMixin,\n\t\t\t\t\tshowHint: true,\n\t\t\t\t};\n\t\t\t},\n\t\t\tcontainerClasses()\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\t...this.statusClassMixin,\n\t\t\t\t\t...this.additionalContainerClasses,\n\t\t\t\t};\n\t\t\t},\n\t\t},\n\ttemplate: `\n\t\t<stage-block-item\n\t\t\t@on-item-hint.stop.prevent=\"onItemHint\"\n\t\t\t:config=\"configForBlock\"\n\t\t\t:class=\"containerClasses\"\n\t\t>\n\t\t\t<template v-slot:block-title-title>{{ title }}</template>\n\t\t\t<template v-slot:block-hint-title>{{ hintTitle }}</template>\n\t\t\t<template v-slot:block-container>\n\t\t\t\t<div :class=\"containerClassMixin\">\n\t\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container-payment\">\n\t\t\t\t\t\t<product\n\t\t\t\t\t\t@on-product-form-mode-change=\"onProductFormModeChange\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</stage-block-item>\n\t`,\n};\n","import {Vuex} from 'ui.vue.vuex';\nimport {Vue} from 'ui.vue';\nimport {ajax, Loc} from 'main.core';\nimport DeliverySelector from 'salescenter.deliveryselector';\n\nexport default {\n\tprops: {\n\t\tconfig: {type: Object, required: true}\n\t},\n\tcomponents: {\n\t\t'delivery-selector': DeliverySelector,\n\t},\n\tdata()\n\t{\n\t\treturn {\n\t\t\tavailableServices: [],\n\t\t};\n\t},\n\tmethods: {\n\t\tonChange(payload)\n\t\t{\n\t\t\tthis.$store.dispatch('orderCreation/setDelivery', payload.deliveryPrice);\n\n\t\t\tthis.$store.dispatch(\n\t\t\t\t'orderCreation/setDeliveryId',\n\t\t\t\tpayload.deliveryServiceId\n\t\t\t);\n\t\t\tthis.$store.dispatch(\n\t\t\t\t'orderCreation/setPropertyValues',\n\t\t\t\tpayload.relatedPropsValues\n\t\t\t);\n\t\t\tthis.$store.dispatch(\n\t\t\t\t'orderCreation/setDeliveryExtraServicesValues',\n\t\t\t\tpayload.relatedServicesValues\n\t\t\t);\n\t\t\tthis.$store.dispatch(\n\t\t\t\t'orderCreation/setExpectedDelivery',\n\t\t\t\tpayload.estimatedDeliveryPrice\n\t\t\t);\n\t\t\tthis.$store.dispatch(\n\t\t\t\t'orderCreation/setDeliveryResponsibleId',\n\t\t\t\tpayload.responsibleUser ? payload.responsibleUser.id : null\n\t\t\t);\n\n\t\t\tthis.$emit('change', payload);\n\t\t},\n\t\tonAddressFromChanged()\n\t\t{\n\t\t\tthis.refreshAvailableServices();\n\t\t},\n\t\tonDeliveryServiceChanged()\n\t\t{\n\t\t\tthis.refreshAvailableServices();\n\t\t},\n\t\tonSettingsChanged()\n\t\t{\n\t\t\tthis.$emit('delivery-settings-changed');\n\t\t},\n\t\trefreshAvailableServices()\n\t\t{\n\t\t\tajax.runAction(\n\t\t\t\t'salescenter.order.getCompatibleDeliverySystems',\n\t\t\t\t{\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tbasketItems: this.config.basket ? this.config.basket : [],\n\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\tsessionId: this.config.sessionId,\n\t\t\t\t\t\t\townerTypeId: this.config.ownerTypeId,\n\t\t\t\t\t\t\townerId: this.config.ownerId,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdeliveryServiceId: this.order.deliveryId,\n\t\t\t\t\t\tshipmentPropValues: this.order.propertyValues,\n\t\t\t\t\t\tdeliveryRelatedServiceValues: this.order.deliveryExtraServicesValues,\n\t\t\t\t\t\tdeliveryResponsibleId: this.order.deliveryResponsibleId,\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t).then((result) => {\n\t\t\t\tlet data = BX.prop.getObject(result, \"data\", {});\n\t\t\t\tthis.availableServices = data.availableServices ? data.availableServices : {};\n\t\t\t}).catch((result) => {\n\t\t\t\tthis.availableServices = {};\n\t\t\t});\n\t\t}\n\t},\n\tcreated()\n\t{\n\t\tthis.$store.dispatch('orderCreation/setPersonTypeId', this.config.personTypeId);\n\n\t\tthis.refreshAvailableServices();\n\t},\n\n\tcomputed: {\n\t\tlocalize()\n\t\t{\n\t\t\treturn Vue.getFilteredPhrases('SALESCENTER_');\n\t\t},\n\t\tsumTitle()\n\t\t{\n\t\t\treturn Loc.getMessage('SALESCENTER_PRODUCT_PRODUCTS_PRICE');\n\t\t},\n\t\tproductsPrice()\n\t\t{\n\t\t\treturn this.order.total.result;\n\t\t},\n\t\tdelivery()\n\t\t{\n\t\t\treturn this.order.delivery;\n\t\t},\n\t\tdeliveryFormatted()\n\t\t{\n\t\t\tif (this.isDeliveryCalculated)\n\t\t\t{\n\t\t\t\treturn BX.Currency.currencyFormat(this.delivery, this.config.currency, false);\n\t\t\t}\n\n\t\t},\n\t\ttotal()\n\t\t{\n\t\t\tif (this.productsPrice === null || this.delivery === null)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn this.productsPrice + this.delivery;\n\t\t},\n\t\ttotalFormatted()\n\t\t{\n\t\t\treturn BX.Currency.currencyFormat(this.total, this.config.currency, false);\n\t\t},\n\t\tisDeliveryCalculated()\n\t\t{\n\t\t\treturn (this.order.delivery !== null);\n\t\t},\n\t\texcludedServiceIds()\n\t\t{\n\t\t\treturn this.$root.$app.options.mode === 'delivery' ? [this.$root.$app.options.emptyDeliveryServiceId] : [];\n\t\t},\n\t\tactionData()\n\t\t{\n\t\t\treturn {\n\t\t\t\tbasketItems: this.config.basket,\n\t\t\t\toptions: {\n\t\t\t\t\torderId : this.$root.$app.orderId,\n\t\t\t\t\tsessionId: this.config.sessionId,\n\t\t\t\t\townerTypeId: this.config.ownerTypeId,\n\t\t\t\t\townerId: this.config.ownerId,\n\t\t\t\t},\n\t\t\t};\n\t\t},\n\t\t...Vuex.mapState({\n\t\t\torder: state => state.orderCreation,\n\t\t}),\n\t},\n\ttemplate: `\n\t\t<delivery-selector\n\t\t\t:available-services=\"availableServices\"\n\t\t\t:excluded-service-ids=\"excludedServiceIds\"\t\t\t\t\n\t\t\t:init-entered-delivery-price=\"config.deliveryPrice\"\n\t\t\t:init-delivery-service-id=\"config.deliveryServiceId\"\n\t\t\t:init-related-services-values=\"config.relatedServicesValues\"\n\t\t\t:init-related-props-values=\"config.relatedPropsValues\"\n\t\t\t:init-related-props-options=\"config.relatedPropsOptions\"\n\t\t\t:init-responsible-id=\"config.responsibleId\"\n\t\t\t:person-type-id=\"config.personTypeId\"\n\t\t\t:action=\"'salescenter.api.order.refreshDelivery'\"\n\t\t\t:action-data=\"actionData\"\n\t\t\t:external-sum=\"productsPrice\"\n\t\t\t:external-sum-label=\"sumTitle\"\n\t\t\t:currency=\"config.currency\"\n\t\t\t:currency-symbol=\"config.currencySymbol\"\n\t\t\t@change=\"onChange\"\n\t\t\t@address-from-changed=\"onAddressFromChanged\"\n\t\t\t@delivery-service-changed=\"onDeliveryServiceChanged\"\n\t\t\t@settings-changed=\"onSettingsChanged\"\n\t\t></delivery-selector>\n\t`\n};\n","import 'ui.fonts.ruble';\nimport 'currency';\nimport {ajax, Loc, Type} from 'main.core';\n\nexport default {\n\tprops: {\n\t\tid: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\tproductsPrice: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata()\n\t{\n\t\treturn {\n\t\t\tshipment: {\n\t\t\t\tpriceDelivery: null,\n\t\t\t\tbasePriceDelivery: null,\n\t\t\t\tcurrency: null,\n\t\t\t\tdeliveryService: {\n\t\t\t\t\tname: null,\n\t\t\t\t\tlogo: null,\n\t\t\t\t\tparent: {\n\t\t\t\t\t\tname: null,\n\t\t\t\t\t\tlogo: null,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\textraServices: [],\n\t\t\t\trequestProperties: [],\n\t\t\t},\n\t\t\tcanUserPerformCalls: false,\n\t\t};\n\t},\n\tcreated()\n\t{\n\t\tajax.runAction(\n\t\t\t'salescenter.deliveryselector.getShipmentData',\n\t\t\t{data: {\n\t\t\t\t\tid: this.id\n\t\t\t\t}}\n\t\t).then((result) => {\n\t\t\tthis.shipment = result.data.shipment;\n\t\t\tthis.canUserPerformCalls = result.data.canUserPerformCalls;\n\t\t});\n\t},\n\tmethods: {\n\t\tgetFormattedPrice(price)\n\t\t{\n\t\t\treturn BX.Currency.currencyFormat(price, this.currency, true);\n\t\t},\n\t\tisPhoneRequestProperty(property)\n\t\t{\n\t\t\tif (!Type.isArray(property.tags))\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn property.tags.includes('phone');\n\t\t},\n\t\tmakeCall(phoneNumber)\n\t\t{\n\t\t\tif (\n\t\t\t\t!Type.isUndefined(window.top['BXIM'])\n\t\t\t\t&& this.canUserPerformCalls === true\n\t\t\t)\n\t\t\t{\n\t\t\t\twindow.top['BXIM'].phoneTo(phoneNumber);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\twindow.open('tel:' + phoneNumber, '_self');\n\t\t\t}\n\t\t},\n\t},\n\tcomputed: {\n\t\thasParent()\n\t\t{\n\t\t\treturn (\n\t\t\t\tthis.shipment.hasOwnProperty('deliveryService')\n\t\t\t\t&& this.shipment.deliveryService.hasOwnProperty('parent')\n\t\t\t\t&& this.shipment.deliveryService.parent\n\t\t\t);\n\t\t},\n\t\tdeliveryServiceLogo()\n\t\t{\n\t\t\treturn this.shipment.deliveryService.logo ? this.shipment.deliveryService.logo : null;\n\t\t},\n\t\tdeliveryServiceProfileLogo()\n\t\t{\n\t\t\treturn (this.hasParent && this.shipment.deliveryService.parent.logo)\n\t\t\t\t? this.shipment.deliveryService.parent.logo\n\t\t\t\t: null;\n\t\t},\n\t\tpaymentPrice()\n\t\t{\n\t\t\treturn this.productsPrice + this.priceDelivery;\n\t\t},\n\t\tdeliveryServiceName()\n\t\t{\n\t\t\treturn this.hasParent ? this.shipment.deliveryService.parent.name : this.shipment.deliveryService.name;\n\t\t},\n\t\tdeliveryServiceProfileName()\n\t\t{\n\t\t\treturn this.hasParent ? this.shipment.deliveryService.name : null;\n\t\t},\n\t\tpriceDelivery()\n\t\t{\n\t\t\treturn this.shipment ? this.shipment.priceDelivery : null;\n\t\t},\n\t\tcurrency()\n\t\t{\n\t\t\treturn this.shipment ? this.shipment.currency : null;\n\t\t},\n\t\textraServices()\n\t\t{\n\t\t\treturn Type.isArray(this.shipment.extraServices) ? this.shipment.extraServices : [];\n\t\t},\n\t\tisExtraServicesVisible()\n\t\t{\n\t\t\treturn this.extraServices.length > 0;\n\t\t},\n\t\trequestProperties()\n\t\t{\n\t\t\treturn Type.isArray(this.shipment.requestProperties) ? this.shipment.requestProperties : [];\n\t\t},\n\t\tisRequestPropertiesVisible()\n\t\t{\n\t\t\treturn this.requestProperties.length > 0;\n\t\t},\n\t\tpriceDeliveryFormatted()\n\t\t{\n\t\t\treturn this.getFormattedPrice(this.priceDelivery);\n\t\t},\n\t\tproductsPriceFormatted()\n\t\t{\n\t\t\treturn this.getFormattedPrice(this.productsPrice);\n\t\t},\n\t\tpaymentPriceFormatted()\n\t\t{\n\t\t\treturn this.getFormattedPrice(this.paymentPrice);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div style=\"width: 100%;\" xmlns=\"http://www.w3.org/1999/html\">\n\t\t\t<div class=\"salescenter-delivery-selector-head\">\n\t\t\t\t<div\n\t\t\t\t\tv-if=\"hasParent && deliveryServiceLogo\"\n\t\t\t\t\t:style=\"{ backgroundImage: 'url(' + deliveryServiceLogo + ')' }\"\n\t\t\t\t\tclass=\"salescenter-delivery-selector-logo\"\n\t\t\t\t>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"salescenter-delivery-selector-info\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tv-if=\"deliveryServiceProfileLogo\"\n\t\t\t\t\t\t:style=\"{ backgroundImage: 'url(' + deliveryServiceProfileLogo + ')' }\"\n\t\t\t\t\t\tclass=\"salescenter-delivery-selector-logo\"\n\t\t\t\t\t>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"salescenter-delivery-selector-content\">\n\t\t\t\t\t\t<div class=\"salescenter-delivery-selector-text-light\">{{deliveryServiceName}}</div>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tv-if=\"deliveryServiceProfileName\"\n\t\t\t\t\t\t\tclass=\"salescenter-delivery-selector-text-dark\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{deliveryServiceProfileName}}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div v-if=\"isExtraServicesVisible\" class=\"salescenter-delivery-selector-main\">\n\t\t\t\t<div class=\"salescenter-delivery-selector-text-light\">\n\t\t\t\t\t${Loc.getMessage('SALESCENTER_SHIPMENT_EXTRA_SERVICES')}:\n\t\t\t\t</div>\n\t\t\t\t<ul class=\"salescenter-delivery-selector-list\">\n\t\t\t\t\t<li\n\t\t\t\t\t\tv-for=\"extraService in extraServices\"\n\t\t\t\t\t\tclass=\"salescenter-delivery-selector-list-item salescenter-delivery-selector-text-dark\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{extraService.name}}: {{extraService.value}} \n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t\t<div v-if=\"isRequestPropertiesVisible\" class=\"salescenter-delivery-selector-main\">\n\t\t\t\t<div class=\"salescenter-delivery-selector-text-light\">\n\t\t\t\t\t${Loc.getMessage('SALESCENTER_DELIVERY_REQUEST_DETAILS')}:\n\t\t\t\t</div>\n\t\t\t\t<ul class=\"salescenter-delivery-selector-list\">\n\t\t\t\t\t<li\n\t\t\t\t\t\tv-for=\"requestProperty in requestProperties\"\n\t\t\t\t\t\tclass=\"salescenter-delivery-selector-list-item salescenter-delivery-selector-text-dark\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{requestProperty.name}}:\n\t\t\t\t\t\t<template v-if=\"isPhoneRequestProperty(requestProperty)\">\n\t\t\t\t\t\t\t<a @click.prevent=\"makeCall(requestProperty.value)\" href=\"#\">{{requestProperty.value}}</a>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t\t{{requestProperty.value}}\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t\t<div class=\"salescenter-delivery-selector-line\"></div>\n\t\t\t<div class=\"catalog-pf-result-wrapper\">\n\t\t\t\t<table class=\"catalog-pf-result\">\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<span class=\"catalog-pf-text\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_PRODUCT_PRODUCTS_PRICE')}:\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</td> \n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<span v-html=\"productsPriceFormatted\" class=\"catalog-pf-text\"></span> \n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td class=\"catalog-pf-result-padding-bottom\">\n\t\t\t\t\t\t\t<span class=\"catalog-pf-text catalog-pf-text--tax\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_SHIPMENT_PRODUCT_BLOCK_DELIVERY_PRICE')}: \n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</td> \n\t\t\t\t\t\t<td class=\"catalog-pf-result-padding-bottom\"> \n\t\t\t\t\t\t\t<span class=\"catalog-pf-text catalog-pf-text--tax\" v-html=\"priceDeliveryFormatted\"></span>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr> \n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td class=\"catalog-pf-result-padding\">\n\t\t\t\t\t\t\t<span class=\"catalog-pf-text catalog-pf-text--total catalog-pf-text--border\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_PRODUCT_TOTAL_RESULT')}: \n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</td> \n\t\t\t\t\t\t<td class=\"catalog-pf-result-padding\">\n\t\t\t\t\t\t\t<span v-html=\"paymentPriceFormatted\" class=\"catalog-pf-text catalog-pf-text--total\"></span> \n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t</table>\n\t\t\t</div>\n\t\t</div>\n\t`\n};\n","import {Vuex} \t\t\t\t\t\t\tfrom 'ui.vue.vuex';\nimport {Loc} \t\t\t\t\t\t\tfrom 'main.core';\nimport {Block} \t\t\tfrom 'salescenter.component.stage-block';\nimport {Uninstalled as TileUnInstalled} from \"./tile-collection/uninstalled\";\nimport DeliverySelector\t\t\t\t\tfrom \"../delivery-selector\";\nimport ShipmentView\t\t\t\t\t\tfrom \"../shipment-view\";\nimport {StageMixin} \t\t\t\t\tfrom \"./stage-mixin\";\nimport {MixinTemplatesType} \t\t\tfrom \"../templates-type-mixin\";\nimport {StatusTypes as Status} from 'salescenter.component.stage-block';\n\nconst DeliveryVuex = {\n\tprops: {\n\t\tstatus: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\tcounter: {\n\t\t\ttype: Number,\n\t\t\trequired: true\n\t\t},\n\t\ttiles: {\n\t\t\ttype: Array,\n\t\t\trequired: true\n\t\t},\n\t\tinstalled: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true\n\t\t},\n\t\tisCollapsible: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true\n\t\t},\n\t\tinitialCollapseState: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true\n\t\t},\n\t},\n\tdata()\n\t{\n\t\treturn {\n\t\t\tselectedDeliveryServiceName: null,\n\t\t}\n\t},\n\tmixins:[StageMixin, MixinTemplatesType],\n\tcomponents:\n\t\t{\n\t\t\t'stage-block-item'\t\t\t\t:\tBlock,\n\t\t\t'delivery-selector-block'\t\t:\tDeliverySelector,\n\t\t\t'shipment-view'\t\t\t\t\t:\tShipmentView,\n\t\t\t'uninstalled-delivery-block'\t:\tTileUnInstalled,\n\t\t},\n\tcomputed:\n\t\t{\n\t\t\tstatusClass()\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\t'salescenter-app-payment-by-sms-item-disabled-bg': this.installed === false || this.status === Status.disabled\n\t\t\t\t}\n\t\t\t},\n\t\t\tproductsPrice()\n\t\t\t{\n\t\t\t\treturn this.order.total.result;\n\t\t\t},\n\t\t\tshipmentId()\n\t\t\t{\n\t\t\t\treturn this.$root.$app.options.shipmentId;\n\t\t\t},\n\t\t\tconfigForBlock()\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\tcounter: this.counter,\n\t\t\t\t\ttitleName: this.selectedDeliveryServiceName,\n\t\t\t\t\tinstalled: this.installed,\n\t\t\t\t\tcollapsible: this.isCollapsible,\n\t\t\t\t\tchecked: this.counterCheckedMixin,\n\t\t\t\t\tshowHint: false,\n\t\t\t\t\tinitialCollapseState: this.initialCollapseState,\n\t\t\t\t}\n\t\t\t},\n\t\t\tconfig()\n\t\t\t{\n\t\t\t\tlet deliveryServiceId = null;\n\t\t\t\tif (this.$root.$app.options.hasOwnProperty('shipmentData')\n\t\t\t\t\t&& this.$root.$app.options.shipmentData.hasOwnProperty('deliveryServiceId')\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tdeliveryServiceId = this.$root.$app.options.shipmentData.deliveryServiceId;\n\t\t\t\t}\n\n\t\t\t\tlet deliveryPrice = null;\n\t\t\t\tif (this.$root.$app.options.hasOwnProperty('shipmentData')\n\t\t\t\t\t&& this.$root.$app.options.shipmentData.hasOwnProperty('deliveryPrice')\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tdeliveryPrice = this.$root.$app.options.shipmentData.deliveryPrice;\n\t\t\t\t}\n\n\t\t\t\tlet relatedPropsValues = {};\n\t\t\t\tif (this.$root.$app.options.hasOwnProperty('shipmentData')\n\t\t\t\t\t&& this.$root.$app.options.shipmentData.hasOwnProperty('propValues')\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\trelatedPropsValues = this.$root.$app.options.shipmentData.propValues;\n\t\t\t\t}\n\n\t\t\t\tlet relatedServicesValues = {};\n\t\t\t\tif (this.$root.$app.options.hasOwnProperty('shipmentData')\n\t\t\t\t\t&& this.$root.$app.options.shipmentData.hasOwnProperty('extraServicesValues')\n\t\t\t\t\t&& !Array.isArray(this.$root.$app.options.shipmentData.extraServicesValues)\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\trelatedServicesValues = this.$root.$app.options.shipmentData.extraServicesValues;\n\t\t\t\t}\n\n\t\t\t\tlet relatedPropsOptions = {};\n\t\t\t\tif (this.$root.$app.options.hasOwnProperty('deliveryOrderPropOptions')\n\t\t\t\t\t&& !Array.isArray(this.$root.$app.options.deliveryOrderPropOptions)\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\trelatedPropsOptions = this.$root.$app.options.deliveryOrderPropOptions;\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\tpersonTypeId: this.$root.$app.options.personTypeId,\n\t\t\t\t\tbasket: this.order.basket,\n\t\t\t\t\tcurrencySymbol: this.$root.$app.options.currencySymbol,\n\t\t\t\t\tcurrency: this.order.currency,\n\t\t\t\t\townerTypeId: this.$root.$app.options.ownerTypeId,\n\t\t\t\t\townerId: this.$root.$app.options.ownerId,\n\t\t\t\t\tsessionId: this.$root.$app.options.sessionId,\n\t\t\t\t\trelatedPropsValues,\n\t\t\t\t\trelatedPropsOptions,\n\t\t\t\t\trelatedServicesValues,\n\t\t\t\t\tdeliveryServiceId,\n\t\t\t\t\tresponsibleId: this.$root.$app.options.assignedById,\n\t\t\t\t\tdeliveryPrice,\n\t\t\t\t};\n\t\t\t},\n\t\t\tisViewTemplateMode()\n\t\t\t{\n\t\t\t\treturn this.$root.$app.options.templateMode === 'view';\n\t\t\t},\n\n\t\t\t...Vuex.mapState({\n\t\t\t\torder: state => state.orderCreation\n\t\t\t})\n\t\t},\n\tmethods:{\n\t\tsetTitleName(state)\n\t\t{\n\t\t\tthis.selectedDeliveryServiceName = state.deliveryServiceName;\n\t\t},\n\t\tsaveCollapsedOption(option)\n\t\t{\n\t\t\tthis.$emit('on-save-collapsed-option', 'delivery', option);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<stage-block-item\n\t\t\t:config=\"configForBlock\"\n\t\t\t:class=\"[statusClassMixin, statusClass]\"\n\t\t\t@on-item-hint.stop.prevent=\"onItemHint\"\n\t\t\t@on-adjust-collapsed=\"saveCollapsedOption\"\n\t\t>\n\t\t\t<template v-slot:block-title-title>${Loc.getMessage('SALESCENTER_DELIVERY_BLOCK_TITLE')}</template>\n\t\t\t<template v-slot:block-container>\n\t\t\t\t<div :class=\"containerClassMixin\">\n\t\t\t\t\t<template v-if=\"!installed\">\n\t\t\t\t\t\t<uninstalled-delivery-block :tiles=\"tiles\" \n\t\t\t\t\t\t\t\tv-on:on-tile-slider-close=\"onSliderClose\"/>\n\t\t\t\t\t</template>\n\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container-select\">\n\t\t\t\t\t\t\t<shipment-view\n\t\t\t\t\t\t\t\tv-if=\"isViewTemplateMode\"\n\t\t\t\t\t\t\t\t:id=\"shipmentId\"\n\t\t\t\t\t\t\t\t:productsPrice=\"productsPrice\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t</shipment-view>\n\t\t\t\t\t\t\t<delivery-selector-block v-else\n\t\t\t\t\t\t\t\t:config=\"config\" \n\t\t\t\t\t\t\t\t@delivery-settings-changed=\"onSliderClose\"\n\t\t\t\t\t\t\t\t@change=\"setTitleName\" \n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</template>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</stage-block-item>\n\t`\n};\n\nexport {\n\tDeliveryVuex\n}","import {Loc} \t\t\t\t\t\t\t\tfrom 'main.core';\nimport {Block} \t\t\tfrom 'salescenter.component.stage-block';\nimport {Uninstalled as TileUnInstalled} \tfrom \"./tile-collection/uninstalled\";\nimport {Installed as TileInstalled} \t\tfrom \"./tile-collection/installed\";\nimport {StageMixin} \t\t\t\t\t\tfrom \"./stage-mixin\";\n\nconst PaySystem = {\n\tprops: {\n\t\tstatus: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\tcounter: {\n\t\t\ttype: Number,\n\t\t\trequired: true\n\t\t},\n\t\ttiles: {\n\t\t\ttype: Array,\n\t\t\trequired: true\n\t\t},\n\t\tinstalled: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true\n\t\t},\n\t\ttitleItems: {\n\t\t\ttype: Array\n\t\t},\n\t\tinitialCollapseState: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true\n\t\t},\n\t},\n\tmixins:[StageMixin],\n\tcomponents:\n\t{\n\t\t'stage-block-item'\t\t\t\t\t:\tBlock,\n\t\t'tile-collection-installed-block'\t:\tTileInstalled,\n\t\t'tile-collection-uninstalled-block'\t:\tTileUnInstalled\n\t},\n\tmethods:\n\t{\n\t\tonItemHint(e)\n\t\t{\n\t\t\tBX.Salescenter.Manager.openHowToConfigDefaultPaySystem(e);\n\t\t},\n\t\tsaveCollapsedOption(option)\n\t\t{\n\t\t\tthis.$emit('on-save-collapsed-option', 'pay_system', option);\n\t\t},\n\n\t},\n\tcomputed:\n\t{\n\t\tconfigForBlock()\n\t\t{\n\t\t\treturn {\n\t\t\t\tcounter: this.counter,\n\t\t\t\ttitleItems: this.installed ? this.titleItems : [],\n\t\t\t\tinstalled: this.installed,\n\t\t\t\tcollapsible: true,\n\t\t\t\tchecked: this.counterCheckedMixin,\n\t\t\t\tshowHint: !this.installed,\n\t\t\t\tinitialCollapseState: this.initialCollapseState,\n\t\t\t}\n\t\t},\n\t\tstatusClass()\n\t\t{\n\t\t\treturn {\n\t\t\t\t'salescenter-app-payment-by-sms-item-disabled-bg': this.installed === false\n\t\t\t}\n\t\t},\n\t\ttitle()\n\t\t{\n\t\t\treturn this.installed === true\n\t\t\t\t? Loc.getMessage('SALESCENTER_PAYSYSTEM_SET_BLOCK_TITLE')\n\t\t\t\t: Loc.getMessage('SALESCENTER_PAYSYSTEM_BLOCK_TITLE');\n\t\t},\n\t},\n\n\ttemplate: `\n\t\t<stage-block-item\n\t\t\t:class=\"[statusClassMixin, statusClass]\"\n\t\t\t:config=\"configForBlock\"\n\t\t\t@on-item-hint.stop.prevent=\"onItemHint\"\n\t\t\t@on-tile-slider-close=\"onSliderClose\"\n\t\t\t@on-adjust-collapsed=\"saveCollapsedOption\"\n\t\t>\n\t\t\t<template v-slot:block-title-title>{{title}}</template>\n\t\t\t<template v-slot:block-hint-title>\n\t\t\t\t${Loc.getMessage('SALESCENTER_PAYSYSTEM_BLOCK_SETTINGS_TITLE')}\n\t\t\t</template>\n\t\t\t<template v-slot:block-container>\n\t\t\t\t<div\n\t\t\t\t\tv-if=\"!installed\"\n\t\t\t\t\tclass=\"salescenter-app-explanation\"\n\t\t\t\t>\n\t\t\t\t\t<div class=\"salescenter-app-explanation-img\"></div>\n\t\t\t\t\t<div class=\"salescenter-app-explanation-area\">\n\t\t\t\t\t\t<div class=\"salescenter-app-explanation-text\">\n\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_TERMINAL_PAYMENT_SYSTEM_SETUP_HINT')}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div :class=\"containerClassMixin\">\n\t\t\t\t\t<tile-collection-uninstalled-block \t:tiles=\"tiles\" v-if=\"!installed\" v-on:on-tile-slider-close=\"onSliderClose\"/>\n\t\t\t\t\t<tile-collection-installed-block :tiles=\"tiles\" v-on:on-tile-slider-close=\"onSliderClose\" v-else />\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</stage-block-item>\n\t`\n};\nexport {\n\tPaySystem\n}\n","export const ContextDictionary = Object.freeze({\n\tdeal: 'deal',\n\tsmartInvoice: 'smart_invoice',\n\tchat: 'chat',\n\tsms: 'sms',\n\timOpenlines: 'imopenlines_app',\n\tterminalList: 'terminal_list',\n});\n","import { Loc } from 'main.core';\nimport { Block } from 'salescenter.component.stage-block';\nimport { UserAvatar, MessageEditor } from 'salescenter.component.stage-block.sms-message';\nimport { ContextDictionary } from '../../const/context-dictionary';\nimport { StageMixin } from './stage-mixin';\n\nconst ChatMessage = {\n\tprops: {\n\t\tstatus: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\tcounter: {\n\t\t\ttype: Number,\n\t\t\trequired: true\n\t\t},\n\t\tmanager: {\n\t\t\ttype: Object,\n\t\t\trequired: true\n\t\t},\n\t\ttitleTemplate: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\tshowHint: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true\n\t\t},\n\t\teditorTemplate: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\teditorUrl: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\tselectedMode: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tmixins: [StageMixin],\n\tcomponents: {\n\t\t'stage-block-item':\tBlock,\n\t\t'chat-user-avatar-block': UserAvatar,\n\t\t'chat-message-editor-block': MessageEditor,\n\t},\n\tdata()\n\t{\n\t\treturn {\n\t\t\tcurrentSenderCode: null,\n\t\t\tsenders: [],\n\t\t\tpushedToUseBitrix24Notifications: null,\n\t\t\tsmsSenderListComponentKey: 0,\n\t\t};\n\t},\n\tcomputed: {\n\t\tconfigForBlock()\n\t\t{\n\t\t\treturn {\n\t\t\t\tcounter: this.counter,\n\t\t\t\tchecked: this.counterCheckedMixin,\n\t\t\t\tshowHint: true,\n\t\t\t};\n\t\t},\n\t\teditor()\n\t\t{\n\t\t\treturn {\n\t\t\t\ttemplate: this.editorTemplate,\n\t\t\t\turl: this.editorUrl\n\t\t\t};\n\t\t},\n\t\ttitle()\n\t\t{\n\t\t\treturn this.titleTemplate;\n\t\t},\n\t\tisMessageReadOnly()\n\t\t{\n\t\t\treturn this.$root.$app.context !== ContextDictionary.sms;\n\t\t},\n\t},\n\tcreated() {\n\t},\n\tmethods: {\n\t\tonItemHint(e)\n\t\t{\n\t\t\tBX.Salescenter.Manager.openSlider(this.$root.$app.options.urlSettingsCompanyContacts, {width: 1200} );\n\t\t},\n\t\topenBitrix24NotificationsHelp(event)\n\t\t{\n\t\t\tBX.Salescenter.Manager.openBitrix24NotificationsHelp(event);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<stage-block-item\t\t\t\n\t\t\t:config=\"configForBlock\"\n\t\t\t:class=\"statusClassMixin\"\n\t\t\tv-on:on-item-hint=\"onItemHint\"\n\t\t>\n\t\t\t<template v-slot:block-title-title>{{title}}</template>\n\t\t\t<template\n\t\t\t\tv-if=\"showHint\"\n\t\t\t\tv-slot:block-hint-title\n\t\t\t>\n\t\t\t\t${Loc.getMessage('SALESCENTER_LEFT_PAYMENT_COMPANY_CONTACTS_SHORTER_VERSION')}\n\t\t\t</template>\n\t\t\t<template v-slot:block-container>\n\t\t\t\t<div :class=\"containerClassMixin\" class=\"salescenter-app-payment-by-sms-item-container-offtop\">\n\t\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container-sms\">\n\t\t\t\t\t\t<chat-user-avatar-block :manager=\"manager\"/>\n\t\t\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container-sms-content\">\n\t\t\t\t\t\t\t<chat-message-editor-block :editor=\"editor\" :isReadOnly=\"isMessageReadOnly\" :selectedMode=\"selectedMode\"/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</stage-block-item>\n\t`\n};\nexport {\n\tChatMessage\n};\n","import { Loc } from 'main.core';\nimport { Block } from 'salescenter.component.stage-block';\nimport { StageList } from 'salescenter.component.stage-block.automation';\nimport * as AutomationStage from 'salescenter.automation-stage';\nimport { StageMixin } from './stage-mixin';\nimport { MixinTemplatesType } from '../templates-type-mixin';\n\nconst Automation = {\n\tprops: {\n\t\tstatus: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tcounter: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\tstageOnOrderPaid: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t},\n\t\tstageOnDeliveryFinished: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t},\n\t\titems: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tinitialCollapseState: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t\tisDeliveryStageVisible: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tmixins: [StageMixin, MixinTemplatesType],\n\tdata()\n\t{\n\t\treturn {\n\t\t\tpaymentStages: [],\n\t\t\tshipmentStages: [],\n\t\t};\n\t},\n\tcomponents:\n\t\t{\n\t\t\t'stage-block-item':\tBlock,\n\t\t\t'stage-item-list':\tStageList,\n\t\t},\n\tmethods:\n\t\t{\n\t\t\tsaveCollapsedOption(option)\n\t\t\t{\n\t\t\t\tthis.$emit('on-save-collapsed-option', 'automation', option);\n\t\t\t},\n\n\t\t\tupdatePaymentStage(e)\n\t\t\t{\n\t\t\t\tconst newStageId = e.data;\n\t\t\t\tthis.paymentStages.forEach((stage) => {\n\t\t\t\t\tstage.selected = stage.id === newStageId;\n\t\t\t\t});\n\n\t\t\t\tthis.$root.$app.stageOnOrderPaid = e.data;\n\t\t\t},\n\n\t\t\tupdateShipmentStage(e)\n\t\t\t{\n\t\t\t\tconst newStageId = e.data;\n\t\t\t\tthis.shipmentStages.forEach((stage) => {\n\t\t\t\t\tstage.selected = stage.id === newStageId;\n\t\t\t\t});\n\n\t\t\t\tthis.$root.$app.stageOnDeliveryFinished = e.data;\n\t\t\t},\n\t\t\tinitStages(stages, currentValue)\n\t\t\t{\n\t\t\t\tObject.values(this.items).forEach((options) => {\n\t\t\t\t\toptions.selected = (\n\t\t\t\t\t\t(!currentValue && !options.hasOwnProperty('id'))\n\t\t\t\t\t\t|| (options.id === currentValue)\n\t\t\t\t\t);\n\t\t\t\t\tstages.push(AutomationStage.Factory.create(options));\n\t\t\t\t});\n\t\t\t},\n\t\t},\n\tcomputed:\n\t\t{\n\t\t\tconfigForBlock()\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\tcounter: this.counter,\n\t\t\t\t\tchecked: this.counterCheckedMixin,\n\t\t\t\t\tcollapsible: true,\n\t\t\t\t\tinitialCollapseState: this.initialCollapseState,\n\t\t\t\t\ttitleName: this.selectedStage.name,\n\t\t\t\t};\n\t\t\t},\n\t\t\tselectedStage()\n\t\t\t{\n\t\t\t\tconst stages = this.isPayment ? this.paymentStages : this.shipmentStages;\n\n\t\t\t\treturn stages.find((stage) => {\n\t\t\t\t\treturn stage.selected;\n\t\t\t\t});\n\t\t\t},\n\t\t\tisPayment()\n\t\t\t{\n\t\t\t\treturn (\n\t\t\t\t\tthis.$root.$app.options.mode === 'payment_delivery'\n\t\t\t\t\t|| this.$root.$app.options.mode === 'payment'\n\t\t\t\t\t|| this.$root.$app.options.mode === 'terminal_payment'\n\t\t\t\t);\n\t\t\t},\n\t\t\tisHideDeliveryStage()\n\t\t\t{\n\t\t\t\treturn !this.isDeliveryStageVisible;\n\t\t\t},\n\t\t},\n\tcreated()\n\t{\n\t\tif (this.isPayment)\n\t\t{\n\t\t\tthis.initStages(this.paymentStages, this.stageOnOrderPaid);\n\t\t}\n\n\t\tthis.initStages(this.shipmentStages, this.stageOnDeliveryFinished);\n\t},\n\ttemplate: `\n\t\t<stage-block-item\n\t\t\t:config=\"configForBlock\"\n\t\t\t:class=\"statusClassMixin\"\n\t\t\t@on-adjust-collapsed=\"saveCollapsedOption\"\n\t\t>\n\t\t\t<template v-slot:block-title-title>${Loc.getMessage('SALESCENTER_AUTOMATION_BLOCK_TITLE')}</template>\n\t\t\t<template v-slot:block-container>\n\t\t\t\t<div :class=\"containerClassMixin\">\n\t\t\t\t\t<div v-if=\"isPayment\">\n\t\t\t\t\t\t<stage-item-list\n\t\t\t\t\t\t\tv-on:on-choose-select-option=\"updatePaymentStage($event)\"\n\t\t\t\t\t\t\t:stages=\"paymentStages\"\n\t\t\t\t\t\t\t:editable=\"editable\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<template v-slot:stage-list-text>${Loc.getMessage('SALESCENTER_AUTOMATION_BLOCK_TEXT')}</template>\n\t\t\t\t\t\t</stage-item-list>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div v-if=\"!isHideDeliveryStage\">\n\t\t\t\t\t\t<stage-item-list\n\t\t\t\t\t\t\tv-on:on-choose-select-option=\"updateShipmentStage($event)\"\n\t\t\t\t\t\t\t:stages=\"shipmentStages\"\n\t\t\t\t\t\t\t:editable=\"editable\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<template v-slot:stage-list-text>${Loc.getMessage('SALESCENTER_AUTOMATION_DELIVERY_FINISHED')}</template>\n\t\t\t\t\t\t</stage-item-list>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</stage-block-item>\n\t`,\n};\nexport {\n\tAutomation,\n};\n","import {Loc} from 'main.core';\n\nexport default {\n\tprops: {\n\t\tbuttonLabel: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tbuttonEnabled: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t\tshowWhatClientSeesControl: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t\tisFacebookForm: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tcomputed: {\n\t\tbuttonClass()\n\t\t{\n\t\t\treturn {'salescenter-app-payment-by-sms-item-disabled': this.buttonEnabled === false};\n\t\t},\n\t\tshowSubmitCompilationLinkToFacebookButton()\n\t\t{\n\t\t\tconst isCompilationMode = this.$store.getters['orderCreation/isCompilationMode'];\n\t\t\treturn this.isFacebookForm && isCompilationMode;\n\t\t},\n\t},\n\tmethods: {\n\t\tshowWhatClientSees(event)\n\t\t{\n\t\t\tBX.Salescenter.Manager.openWhatClientSee(event);\n\t\t},\n\t\tsubmit(event)\n\t\t{\n\t\t\tthis.$emit('on-submit', event);\n\t\t},\n\t\tsubmitCompilationLinkToFacebook(event)\n\t\t{\n\t\t\tthis.$emit('on-submit-compilation-link-to-facebook', event);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div\n\t\t\t:class=\"buttonClass\"\n\t\t\tclass=\"salescenter-app-payment-by-sms-item-show salescenter-app-payment-by-sms-item salescenter-app-payment-by-sms-item-send\"\n\t\t>\n\t\t\t<div class=\"salescenter-app-payment-by-sms-item-counter\">\n\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-counter-rounder\"></div>\n\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-counter-line\"></div>\n\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-counter-number\"></div>\n\t\t\t</div>\n\t\t\t<div class=\"\">\n\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container\">\n\t\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container-payment\">\n\t\t\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container-payment-inline\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t@click=\"submit($event)\"\n\t\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-lg ui-btn-success ui-btn-round\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{{buttonLabel}}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tv-if=\"showSubmitCompilationLinkToFacebookButton\"\n\t\t\t\t\t\t\t\t@click=\"submitCompilationLinkToFacebook($event)\"\n\t\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-lg ui-btn-light-border ui-btn-round\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_SEND_COMPILATION_LINK_TO_FACEBOOK')}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tv-if=\"showWhatClientSeesControl\"\n\t\t\t\t\t\t\t\t@click=\"showWhatClientSees\"\n\t\t\t\t\t\t\t\tclass=\"salescenter-app-add-item-link\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_SEND_ORDER_BY_SMS_SENDER_TEMPLATE_WHAT_DOES_CLIENT_SEE')}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`\n}\n","import {\n\tTimeLineItemBlock as Item,\n\tTimeLineItemPaymentBlock as PaymentItem,\n\tTimeLineItemCustomBlock as CustomItem,\n} from 'salescenter.component.stage-block.timeline';\nimport { Payment, Custom } from 'salescenter.timeline';\n\nconst TimeLine = {\n\tprops: {\n\t\ttimelineItems: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomponents: {\n\t\t'timeline-item-block': Item,\n\t\t'timeline-item-payment-block': PaymentItem,\n\t\t'timeline-item-custom-block': CustomItem,\n\t},\n\tmethods: {\n\t\tisPayment(item)\n\t\t{\n\t\t\treturn item.type === Payment.type();\n\t\t},\n\t\tisCustom(item)\n\t\t{\n\t\t\treturn item.type === Custom.type();\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"salescenter-app-payment-by-sms-timeline\">\n\t\t\t<template v-for=\"(item) in timelineItems\">\n\t\t\t\t<timeline-item-payment-block :item=\"item\" v-if=\"isPayment(item)\"/>\n\t\t\t\t<timeline-item-custom-block :item=\"item\" v-else-if=\"isCustom(item)\"/>\n\t\t\t\t<timeline-item-block :item=\"item\" v-else/>\n\t\t\t</template>\n\t\t</div>\n\t`,\n};\n\nexport {\n\tTimeLine,\n};\n","import {Loc, Uri} from 'main.core';\nimport {StatusTypes as Status} from 'salescenter.component.stage-block';\nimport {MenuManager} from \"main.popup\";\nimport {Manager} from 'salescenter.manager';\nimport {Block} from 'salescenter.component.stage-block';\nimport {StageMixin} from \"./stage-mixin\";\nimport \"ui.icons.disk\";\nimport type {Document, Template} from \"../../app\";\nimport {Vuex} from \"ui.vue.vuex\";\n\nconst DocumentSelector = {\n\tprops: {\n\t\tcounter: {\n\t\t\ttype: Number,\n\t\t\trequired: true\n\t\t},\n\t\ttemplateAddUrl: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t},\n\t},\n\tmixins: [StageMixin],\n\tcomponents: {\n\t\t'stage-block-item':\tBlock,\n\t},\n\tcomputed: {\n\t\tstatus()\n\t\t{\n\t\t\tif (\n\t\t\t\tthis.model\n\t\t\t\t&& (\n\t\t\t\t\tthis.model.templates\n\t\t\t\t\t&& this.model.templates.length\n\t\t\t\t)\n\t\t\t\t|| (\n\t\t\t\t\tthis.model.documents\n\t\t\t\t\t&& this.model.documents.length\n\t\t\t\t)\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn Status.complete;\n\t\t\t}\n\n\t\t\tif(\n\t\t\t\tthis.templateAddUrl\n\t\t\t\t&& this.templateAddUrl.length\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn Status.current;\n\t\t\t}\n\n\t\t\treturn Status.disabled;\n\t\t},\n\t\tconfigForBlock()\n\t\t{\n\t\t\treturn {\n\t\t\t\tcounter: this.counter,\n\t\t\t\ttitleItems: [],\n\t\t\t\tinstalled: true,\n\t\t\t\tcollapsible: false,\n\t\t\t\tchecked: this.counterCheckedMixin,\n\t\t\t\tshowHint: false,\n\t\t\t\tinitialCollapseState: false,\n\t\t\t}\n\t\t},\n\t\tgetDocumentTitle(): ?string\n\t\t{\n\t\t\tconst currentDocument = this.getCurrentDocument();\n\t\t\tif (currentDocument)\n\t\t\t{\n\t\t\t\treturn currentDocument.title;\n\t\t\t}\n\n\t\t\treturn Loc.getMessage('SALESCENTER_DOCUMENT_SELECTOR_BLOCK_CREATE_NEW_TEMPLATE');\n\t\t},\n\t\twithStamps(): string\n\t\t{\n\t\t\tlet isWithStamps = '';\n\t\t\tconst currentDocument = this.getCurrentDocument();\n\t\t\tif (currentDocument)\n\t\t\t{\n\t\t\t\tif(currentDocument.isWithStamps)\n\t\t\t\t{\n\t\t\t\t\tisWithStamps = Loc.getMessage('SALESCENTER_DOCUMENT_SELECTOR_BLOCK_WITH_SIGNS');\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tisWithStamps = Loc.getMessage('SALESCENTER_DOCUMENT_SELECTOR_BLOCK_WITHOUT_SIGNS');\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn isWithStamps;\n\t\t},\n\t\thasData()\n\t\t{\n\t\t\tconst document = this.getCurrentDocument();\n\n\t\t\treturn (document && document.detailUrl);\n\t\t},\n\t\t...Vuex.mapState({\n\t\t\tmodel: state => state.documentSelector,\n\t\t})\n\t},\n\tmethods: {\n\t\thandleDocumentClick({target})\n\t\t{\n\t\t\tif (this.getCurrentDocument() !== null)\n\t\t\t{\n\t\t\t\tthis.openSelectorMenu(target);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.openTemplatesList();\n\t\t\t}\n\t\t},\n\t\topenSelectorMenu(bindElement)\n\t\t{\n\t\t\tMenuManager.show({\n\t\t\t\tid: 'payment-document-selector',\n\t\t\t\tbindElement,\n\t\t\t\titems: this.prepareSelectorMenuItems(),\n\t\t\t\tcloseByEsc: true,\n\t\t\t\tcacheable: false,\n\t\t\t});\n\t\t},\n\t\tcloseSelectorMenu()\n\t\t{\n\t\t\tMenuManager.destroy('payment-document-selector');\n\t\t},\n\t\tprepareSelectorMenuItems()\n\t\t{\n\t\t\tconst items = [];\n\t\t\tif (this.model.documents)\n\t\t\t{\n\t\t\t\tfor (const document of this.model.documents)\n\t\t\t\t{\n\t\t\t\t\titems.push({\n\t\t\t\t\t\ttext: document.title,\n\t\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\t\tthis.closeSelectorMenu();\n\t\t\t\t\t\t\tthis.$store.dispatch('documentSelector/setBoundDocumentId', {boundDocumentId: document.id});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst templateListItem = {\n\t\t\t\ttext: Loc.getMessage('SALESCENTER_DOCUMENT_SELECTOR_BLOCK_CREATE_NEW_DOCUMENT'),\n\t\t\t\titems: [],\n\t\t\t};\n\t\t\tif (this.model.templates)\n\t\t\t{\n\t\t\t\tif (items.length > 0)\n\t\t\t\t{\n\t\t\t\t\titems.push({delimiter: true});\n\t\t\t\t}\n\t\t\t\tfor (const template of this.model.templates)\n\t\t\t\t{\n\t\t\t\t\ttemplateListItem.items.push({\n\t\t\t\t\t\ttext: template.title,\n\t\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\t\tthis.closeSelectorMenu();\n\t\t\t\t\t\t\tthis.$store.commit('documentSelector/setSelectedTemplateId', {selectedTemplateId: template.id});\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (this.templateAddUrl)\n\t\t\t{\n\t\t\t\tif (templateListItem.items.length > 0)\n\t\t\t\t{\n\t\t\t\t\ttemplateListItem.items.push({delimiter: true});\n\t\t\t\t}\n\t\t\t\ttemplateListItem.items.push({\n\t\t\t\t\ttext: Loc.getMessage('SALESCENTER_DOCUMENT_SELECTOR_BLOCK_CREATE_NEW_TEMPLATE'),\n\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\tthis.closeSelectorMenu();\n\t\t\t\t\t\tthis.openTemplatesList();\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t\tif (templateListItem.items.length > 0)\n\t\t\t{\n\t\t\t\titems.push(templateListItem);\n\t\t\t}\n\n\t\t\treturn items;\n\t\t},\n\t\topenTemplatesList()\n\t\t{\n\t\t\tManager.openSlider(this.templateAddUrl, {\n\t\t\t\twidth: 930,\n\t\t\t}).then(() => {\n\t\t\t\tthis.$store.dispatch('documentSelector/loadTemplates');\n\t\t\t});\n\t\t},\n\t\thandleEditDocumentClick()\n\t\t{\n\t\t\tconst currentDocument = this.getCurrentDocument();\n\t\t\tif (currentDocument.detailUrl)\n\t\t\t{\n\t\t\t\tManager.openSlider(currentDocument.detailUrl, {\n\t\t\t\t\twidth: 980,\n\t\t\t\t}).then((slider) => {\n\t\t\t\t\tconst document = slider.getData().get('document');\n\t\t\t\t\tif (document)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$store.dispatch('documentSelector/addDocument', {document});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tgetCurrentDocument(): ?Document\n\t\t{\n\t\t\tlet document = null;\n\t\t\tif (this.model.boundDocumentId > 0)\n\t\t\t{\n\t\t\t\tdocument = this.getDocumentById(this.model.boundDocumentId);\n\t\t\t}\n\t\t\tif (!document && this.model.selectedTemplateId > 0)\n\t\t\t{\n\t\t\t\tdocument = this.getStubDocumentByTemplate(this.model.selectedTemplateId);\n\t\t\t}\n\t\t\tif (!document)\n\t\t\t{\n\t\t\t\tconst documents = this.model.documents;\n\t\t\t\tif (documents && documents[0])\n\t\t\t\t{\n\t\t\t\t\tdocument = documents[0];\n\t\t\t\t\tthis.$store.dispatch('documentSelector/setBoundDocumentId', {boundDocumentId: document.id});\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!document)\n\t\t\t{\n\t\t\t\tconst templates = this.model.templates;\n\t\t\t\tif (templates && templates[0])\n\t\t\t\t{\n\t\t\t\t\tdocument = this.getStubDocumentByTemplate(templates[0].id);\n\t\t\t\t\tthis.$store.commit('documentSelector/setSelectedTemplateId', {selectedTemplateId: templates[0].id});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn document;\n\t\t},\n\t\tgetDocumentById(id: number): ?Document\n\t\t{\n\t\t\tfor (const document: Document of this.model.documents)\n\t\t\t{\n\t\t\t\tif (document.id === id)\n\t\t\t\t{\n\t\t\t\t\treturn document;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\t\tgetTemplateById(id: number): ?Template\n\t\t{\n\t\t\tfor (const template: Template of this.model.templates)\n\t\t\t{\n\t\t\t\tif (template.id === id)\n\t\t\t\t{\n\t\t\t\t\treturn template;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\t\tgetStubDocumentByTemplate(templateId: number): ?Document\n\t\t{\n\t\t\tconst template = this.getTemplateById(templateId);\n\t\t\tif (!template)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tconst paymentId = this.$root.$app.options.paymentId || 0;\n\t\t\tlet title = null;\n\t\t\tlet detailUrl = null;\n\t\t\tif (paymentId > 0)\n\t\t\t{\n\t\t\t\ttitle = Loc.getMessage('SALESCENTER_DOCUMENT_SELECTOR_BLOCK_DOCUMENT_NEW_SUFFIX', {\n\t\t\t\t\t'#TITLE#': template.title\n\t\t\t\t});\n\t\t\t\tdetailUrl = Uri.addParam(template.documentCreationUrl, {\n\t\t\t\t\tvalues: {\n\t\t\t\t\t\t_paymentId: paymentId,\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\ttitle = Loc.getMessage('SALESCENTER_DOCUMENT_SELECTOR_BLOCK_DOCUMENT_CREATED_LATER_SUFFIX', {\n\t\t\t\t\t'#TITLE#': template.title\n\t\t\t\t});\n\t\t\t\tdetailUrl = null;\n\t\t\t}\n\t\t\treturn {\n\t\t\t\tid: 0,\n\t\t\t\ttitle,\n\t\t\t\tdetailUrl,\n\t\t\t\tisWithStamps: template.isWithStamps,\n\t\t\t}\n\t\t},\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<stage-block-item\n\t\t\t:class=\"statusClassMixin\"\n\t\t\t:config=\"configForBlock\"\n\t\t>\n\t\t\t<template v-slot:block-title-title>${Loc.getMessage('SALESCENTER_DOCUMENT_SELECTOR_BLOCK_TITLE')}</template>\n\t\t\t<template v-slot:block-container>\n\t\t\t\t<div :class=\"containerClassMixin\">\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t<div class=\"salescenter-app-payment-item-container-document-selector\">\n\t\t\t\t\t\t<div class=\"salescenter-app-payment-item-container-document-selector-selector\">\n\t\t\t\t\t\t\t<div class=\"salescenter-app-payment-item-container-document-selector-selector-file\">\n\t\t\t\t\t\t\t\t<div class=\"ui-icon ui-icon-lg ui-icon-file-pdf\"><i></i></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"salescenter-app-payment-item-container-document-selector-title\">\n\t\t\t\t\t\t\t\t<div \n\t\t\t\t\t\t\t\t\tref=\"selectorNode\"\n\t\t\t\t\t\t\t\t\tclass=\"salescenter-app-payment-item-container-document-selector-title-button\"\n\t\t\t\t\t\t\t\t\t@click=\"handleDocumentClick\"\n\t\t\t\t\t\t\t\t>{{getDocumentTitle}}</div>\n\t\t\t\t\t\t\t\t<div class=\"salescenter-app-payment-item-container-document-selector-title-sign\">{{withStamps}}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tv-if=\"hasData\"\n\t\t\t\t\t\t\tclass=\"salescenter-app-payment-item-container-document-selector-edit\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div \n\t\t\t\t\t\t\t\tclass=\"salescenter-app-payment-item-container-document-selector-edit-button\"\n\t\t\t\t\t\t\t\t@click=\"handleEditDocumentClick\"\n\t\t\t\t\t\t\t>\n                              <svg width=\"14\" height=\"14\" viewBox=\"0 0 14 14\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                                <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M11.4359 0.03479L13.9865 2.61221L4.00879 12.563L1.45822 9.98561L11.4359 0.03479ZM0.0256074 13.6726C0.00148857 13.7639 0.0273302 13.8603 0.0927957 13.9275C0.159984 13.9947 0.25646 14.0205 0.347767 13.9947L3.19896 13.2265L0.793965 10.8223L0.0256074 13.6726Z\" fill=\"#525C69\"/>\n                              </svg>\n                              ${Loc.getMessage('SALESCENTER_RIGHT_ACTION_EDIT')}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</stage-block-item>\n\t`\n};\n\nexport\n{\n\tDocumentSelector\n}","import { ajax as Ajax, Loc} from 'main.core';\nimport {StatusTypes as Status} from 'salescenter.component.stage-block';\nimport * as Tile from 'salescenter.tile';\nimport * as TimeLineItem from 'salescenter.timeline';\nimport {UI} from 'ui.notification';\nimport {MixinTemplatesType} from '../templates-type-mixin';\nimport {Cashbox} from '../stage-blocks/cashbox';\nimport Product from '../stage-blocks/product';\nimport {DeliveryVuex} from '../stage-blocks/delivery-vuex';\nimport {PaySystem} from '../stage-blocks/paysystem';\nimport {ChatMessage} from '../stage-blocks/chat-message';\nimport {Automation} from '../stage-blocks/automation';\nimport {StageMixin} from '../stage-blocks/stage-mixin';\nimport Send from '../deal-receiving-payment/stage-blocks/send';\nimport {TimeLine} from '../stage-blocks/timeline';\nimport {DocumentSelector} from '../stage-blocks/document-selector';\n\nexport default {\n\tcomponents: {\n\t\t'chat-message-block': ChatMessage,\n\t\t'product-block': Product,\n\t\t'paysystem-block': PaySystem,\n\t\t'cashbox-block': Cashbox,\n\t\t'delivery-block': DeliveryVuex,\n\t\t'automation-block': Automation,\n\t\t'send-block': Send,\n\t\t'timeline-block': TimeLine,\n\t\t'document-selector-block': DocumentSelector,\n\t},\n\tdata()\n\t{\n\t\tconst stages = {\n\t\t\tmessage: {\n\t\t\t\tstatus: Status.complete,\n\t\t\t\tmanager: this.$root.$app.options.entityResponsible,\n\t\t\t\ttitleTemplate: Loc.getMessage('SALESCENTER_APP_CHAT_MESSAGE_TITLE'),\n\t\t\t\tshowHint: this.$root.$app.options.templateMode !== 'view',\n\t\t\t\teditorTemplate: this.$root.$app.sendingMethodDesc.text,\n\t\t\t\teditorUrl: this.$root.$app.orderPublicUrl,\n\t\t\t\tselectedMode: 'payment',\n\t\t\t},\n\t\t\tproduct: {\n\t\t\t\tstatus: this.$root.$app.options.basket && this.$root.$app.options.basket.length > 0\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.current,\n\t\t\t\ttitle: this.$root.$app.options.templateMode === 'view'\n\t\t\t\t\t? Loc.getMessage('SALESCENTER_PRODUCT_BLOCK_TITLE_PAYMENT_VIEW')\n\t\t\t\t\t: Loc.getMessage('SALESCENTER_PRODUCT_BLOCK_TITLE_SHORT'),\n\t\t\t\thintTitle: this.$root.$app.options.templateMode === 'view'\n\t\t\t\t\t? ''\n\t\t\t\t\t: Loc.getMessage('SALESCENTER_PRODUCT_SET_BLOCK_TITLE_SHORT'),\n\t\t\t},\n\t\t\tpaysystem: {\n\t\t\t\tstatus: this.$root.$app.options.paySystemList.isSet\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled,\n\t\t\t\ttiles: this.getTileCollection(this.$root.$app.options.paySystemList.items),\n\t\t\t\tinstalled: this.$root.$app.options.paySystemList.isSet,\n\t\t\t\ttitleItems: this.getTitleItems(this.$root.$app.options.paySystemList.items),\n\t\t\t\tinitialCollapseState: this.$root.$app.options.isPaySystemCollapsed\n\t\t\t\t\t? this.$root.$app.options.isPaySystemCollapsed === 'Y'\n\t\t\t\t\t: this.$root.$app.options.paySystemList.isSet,\n\t\t\t},\n\t\t\tcashbox: {},\n\t\t\tautomation: {},\n\t\t\tdocumentSelector: {\n\t\t\t\tstatus: Status.complete,\n\t\t\t},\n\t\t};\n\n\t\tif (this.$root.$app.options.hasOwnProperty('deliveryList'))\n\t\t{\n\t\t\tstages.delivery = {\n\t\t\t\tisHidden: (\n\t\t\t\t\tthis.$root.$app.options.templateMode === 'view'\n\t\t\t\t\t&& parseInt(this.$root.$app.options.shipmentId) <= 0\n\t\t\t\t),\n\t\t\t\tstatus: this.$root.$app.options.deliveryList.isInstalled\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled,\n\t\t\t\ttiles: this.getTileCollection(this.$root.$app.options.deliveryList.items),\n\t\t\t\tinstalled: this.$root.$app.options.deliveryList.isInstalled,\n\t\t\t\tinitialCollapseState: this.$root.$app.options.isDeliveryCollapsed\n\t\t\t\t\t? this.$root.$app.options.isDeliveryCollapsed === 'Y'\n\t\t\t\t\t: this.$root.$app.options.deliveryList.isInstalled,\n\t\t\t};\n\t\t}\n\n\t\tif (this.$root.$app.options.cashboxList.hasOwnProperty('items'))\n\t\t{\n\t\t\tstages.cashbox = {\n\t\t\t\tstatus: this.$root.$app.options.cashboxList.isSet\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled,\n\t\t\t\ttiles: this.getTileCollection(this.$root.$app.options.cashboxList.items),\n\t\t\t\tinstalled: this.$root.$app.options.cashboxList.isSet,\n\t\t\t\ttitleItems: this.getTitleItems(this.$root.$app.options.cashboxList.items),\n\t\t\t\tinitialCollapseState: this.$root.$app.options.isCashboxCollapsed\n\t\t\t\t\t? this.$root.$app.options.isCashboxCollapsed === 'Y'\n\t\t\t\t\t: this.$root.$app.options.cashboxList.isSet,\n\t\t\t};\n\t\t}\n\n\t\tif (this.$root.$app.options.isAutomationAvailable)\n\t\t{\n\t\t\tstages.automation = {\n\t\t\t\tstatus: Status.complete,\n\t\t\t\tstageOnOrderPaid: this.$root.$app.options.stageOnOrderPaid,\n\t\t\t\tstageOnDeliveryFinished: this.$root.$app.options.stageOnDeliveryFinished,\n\t\t\t\titems: this.$root.$app.options.entityStageList,\n\t\t\t\tinitialCollapseState: this.$root.$app.options.isAutomationCollapsed\n\t\t\t\t\t? this.$root.$app.options.isAutomationCollapsed === 'Y'\n\t\t\t\t\t: false,\n\t\t\t};\n\t\t}\n\n\t\tif (this.$root.$app.options.hasOwnProperty('timeline'))\n\t\t{\n\t\t\tstages.timeline = {\n\t\t\t\titems: this.getTimelineCollection(this.$root.$app.options.timeline)\n\t\t\t};\n\t\t}\n\n\t\tif (this.$root.$app.hasOwnProperty('documentSelector') && this.$root.$app.documentSelector.templateAddUrl)\n\t\t{\n\t\t\tstages.documentSelector.templateAddUrl = this.$root.$app.documentSelector.templateAddUrl;\n\t\t}\n\n\t\treturn {\n\t\t\tstages,\n\t\t};\n\t},\n\tmixins: [\n\t\tStageMixin,\n\t\tMixinTemplatesType,\n\t],\n\tcomputed: {\n\t\tisSendAllowed()\n\t\t{\n\t\t\treturn this.$store.getters['orderCreation/isAllowedSubmit'];\n\t\t},\n\t\thasStageTimeLine()\n\t\t{\n\t\t\treturn this.stages.timeline.hasOwnProperty('items') && this.stages.timeline.items.length > 0;\n\t\t},\n\t\thasStageAutomation()\n\t\t{\n\t\t\treturn this.stages.automation.hasOwnProperty('items');\n\t\t},\n\t\thasStageCashBox()\n\t\t{\n\t\t\treturn this.stages.cashbox.hasOwnProperty('tiles');\n\t\t},\n\t\tsubmitButtonLabel()\n\t\t{\n\t\t\treturn this.editable && !this.$root.$app?.compilation\n\t\t\t\t? Loc.getMessage('SALESCENTER_SEND')\n\t\t\t\t: Loc.getMessage('SALESCENTER_RESEND')\n\t\t\t;\n\t\t},\n\t\tisFacebookForm()\n\t\t{\n\t\t\treturn this.$root.$app?.connector === 'facebook' && this.$root.$app?.isAllowedFacebookRegion;\n\t\t},\n\t\tisShowDocumentSelector()\n\t\t{\n\t\t\treturn this.$root.$app.hasOwnProperty('documentSelector');\n\t\t},\n\t},\n\tmethods: {\n\t\tinitCounter()\n\t\t{\n\t\t\tthis.counter = 1;\n\t\t},\n\t\tgetTimelineCollection(items)\n\t\t{\n\t\t\tconst list = [];\n\n\t\t\tObject.values(items).forEach((options) => {\n\t\t\t\tlist.push(TimeLineItem.Factory.create(options))\n\t\t\t});\n\n\t\t\treturn list;\n\t\t},\n\t\tgetTileCollection(items)\n\t\t{\n\t\t\tconst tiles = [];\n\n\t\t\tObject.values(items).forEach((options) => {\n\t\t\t\ttiles.push(Tile.Factory.create(options))\n\t\t\t});\n\n\t\t\treturn tiles;\n\t\t},\n\t\tgetTitleItems(items)\n\t\t{\n\t\t\tconst result = [];\n\t\t\titems.forEach((item) => {\n\t\t\t\tif (![Tile.More.type(), Tile.Offer.type()].includes(item.type))\n\t\t\t\t{\n\t\t\t\t\tresult.push(item);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn result;\n\t\t},\n\t\tstageRefresh(e, type)\n\t\t{\n\t\t\tAjax.runComponentAction(\n\t\t\t\t'bitrix:salescenter.app',\n\t\t\t\t'getAjaxData',\n\t\t\t\t{\n\t\t\t\t\tmode: 'class',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\ttype,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t).then(\n\t\t\t\t(response) => {\n\t\t\t\t\tif (response.data)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.refreshTilesByType(response.data, type);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t() => {\n\t\t\t\t\tUI.Notification.Center.notify({\n\t\t\t\t\t\tcontent: Loc.getMessage('SALESCENTER_DATA_UPDATE_ERROR'),\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t);\n\t\t},\n\t\trefreshTilesByType(data, type)\n\t\t{\n\t\t\tif (type === 'PAY_SYSTEM')\n\t\t\t{\n\t\t\t\tthis.stages.paysystem.status = data.isSet\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled;\n\t\t\t\tthis.stages.paysystem.tiles = this.getTileCollection(data.items);\n\t\t\t\tthis.stages.paysystem.installed = data.isSet;\n\t\t\t\tthis.stages.paysystem.titleItems = this.getTitleItems(data.items);\n\t\t\t}\n\t\t\telse if (type === 'CASHBOX')\n\t\t\t{\n\t\t\t\tthis.stages.cashbox.status = data.isSet\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled;\n\t\t\t\tthis.stages.cashbox.tiles = this.getTileCollection(data.items);\n\t\t\t\tthis.stages.cashbox.installed = data.isSet;\n\t\t\t\tthis.stages.cashbox.titleItems = this.getTitleItems(data.items);\n\t\t\t}\n\t\t\telse if (type === 'DELIVERY')\n\t\t\t{\n\t\t\t\tthis.stages.delivery.status = data.isInstalled\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled;\n\t\t\t\tthis.stages.delivery.tiles = this.getTileCollection(data.items);\n\t\t\t\tthis.stages.delivery.installed = data.isInstalled;\n\t\t\t}\n\t\t},\n\t\tonSend(event)\n\t\t{\n\t\t\tthis.$emit('stage-block-send-on-send', event);\n\t\t},\n\t\tonSendCompilationLinkToFacebook(event)\n\t\t{\n\t\t\tthis.$emit('stage-block-send-on-send-compilation-link-to-facebook', event);\n\t\t},\n\t\tchangeProvider(value)\n\t\t{\n\t\t\tthis.$root.$app.sendingMethodDesc.provider = value;\n\t\t\tBX.userOptions.save('salescenter', 'payment_sms_provider_options', 'latest_selected_provider', value);\n\t\t},\n\t\tsaveCollapsedOption(type, value)\n\t\t{\n\t\t\tBX.userOptions.save('salescenter', 'add_payment_collapse_options', type, value);\n\t\t},\n\t\tonProductFormModeChange()\n\t\t{\n\t\t\tconst isCompilationMode = this.$store.getters['orderCreation/isCompilationMode'];\n\t\t\tif (isCompilationMode)\n\t\t\t{\n\t\t\t\tthis.stages.delivery.status = Status.disabled;\n\n\t\t\t\tthis.stages.message.selectedMode = 'compilation';\n\t\t\t\tthis.$root.$app.sendingMethodDesc.text = this.$root.$app.sendingMethodDesc.text_modes.compilation;\n\t\t\t\tthis.stages.message.editorTemplate = this.$root.$app.sendingMethodDesc.text_modes.compilation;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (this.stages.delivery)\n\t\t\t\t{\n\t\t\t\t\tthis.stages.delivery.status = this.$root.$app.options.deliveryList.isInstalled\n\t\t\t\t\t\t? Status.complete\n\t\t\t\t\t\t: Status.disabled;\n\t\t\t\t}\n\n\t\t\t\tthis.stages.message.selectedMode = 'payment';\n\t\t\t\tthis.$root.$app.sendingMethodDesc.text = this.$root.$app.sendingMethodDesc.text_modes.payment;\n\t\t\t\tthis.stages.message.editorTemplate = this.$root.$app.sendingMethodDesc.text_modes.payment;\n\t\t\t}\n\t\t},\n\t},\n\tcreated()\n\t{\n\t\tthis.initCounter();\n\t},\n\tbeforeUpdate()\n\t{\n\t\tthis.initCounter();\n\t},\n\ttemplate: `\n\t\t<div>\n\t\t\t<chat-message-block\n\t\t\t\tv-if=\"editable\"\n\t\t\t\t@stage-block-sms-send-on-change-provider=\"changeProvider\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.message.status\"\n\t\t\t\t:manager=\"stages.message.manager\"\n\t\t\t\t:titleTemplate=\"stages.message.titleTemplate\"\n\t\t\t\t:showHint=\"stages.message.showHint\"\n\t\t\t\t:editorTemplate=\"stages.message.editorTemplate\"\n\t\t\t\t:editorUrl=\"stages.message.editorUrl\"\n\t\t\t\t:selectedMode=\"stages.message.selectedMode\"\n\t\t\t/>\n\t\t\t<product-block\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.product.status\"\n\t\t\t\t:title=\"stages.product.title\"\n\t\t\t\t:hintTitle=\"stages.product.hintTitle\"\n\t\t\t\t@on-product-form-mode-change=\"onProductFormModeChange\"\n\t\t\t/>\n\t\t\t<paysystem-block\n\t\t\t\t@on-stage-tile-collection-slider-close=\"stageRefresh($event, 'PAY_SYSTEM')\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.paysystem.status\"\n\t\t\t\t:tiles=\"stages.paysystem.tiles\"\n\t\t\t\t:installed=\"stages.paysystem.installed\"\n\t\t\t\t:titleItems=\"stages.paysystem.titleItems\"\n\t\t\t\t:initialCollapseState=\"stages.paysystem.initialCollapseState\"\n\t\t\t\t@on-save-collapsed-option=\"saveCollapsedOption\"\n\t\t\t/>\n\t\t\t<cashbox-block\n\t\t\t\tv-if=\"hasStageCashBox\"\n\t\t\t\t@on-stage-tile-collection-slider-close=\"stageRefresh($event, 'CASHBOX')\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.cashbox.status\"\n\t\t\t\t:tiles=\"stages.cashbox.tiles\"\n\t\t\t\t:installed=\"stages.cashbox.installed\"\n\t\t\t\t:titleItems=\"stages.cashbox.titleItems\"\n\t\t\t\t:initialCollapseState=\"stages.cashbox.initialCollapseState\"\n\t\t\t\t@on-save-collapsed-option=\"saveCollapsedOption\"\n\t\t\t/>\n\t\t\t<delivery-block\n\t\t\t\tv-if=\"stages.delivery && !stages.delivery.isHidden\"\n\t\t\t\t@on-stage-tile-collection-slider-close=\"stageRefresh($event, 'DELIVERY')\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.delivery.status\"\n\t\t\t\t:tiles=\"stages.delivery.tiles\"\n\t\t\t\t:installed=\"stages.delivery.installed\"\n\t\t\t\t:isCollapsible=\"true\"\n\t\t\t\t:initialCollapseState=\"stages.delivery.initialCollapseState\"\n\t\t\t\t@on-save-collapsed-option=\"saveCollapsedOption\"\n\t\t\t/>\n\t\t\t<document-selector-block\n\t\t\t\tv-if=\"isShowDocumentSelector\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:templateAddUrl=\"stages.documentSelector.templateAddUrl\"\n\t\t\t/>\n\t\t\t<automation-block\n\t\t\t\tv-if=\"hasStageAutomation\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.automation.status\"\n\t\t\t\t:stageOnOrderPaid=\"stages.automation.stageOnOrderPaid\"\n\t\t\t\t:stageOnDeliveryFinished=\"stages.automation.stageOnDeliveryFinished\"\n\t\t\t\t:items=\"stages.automation.items\"\n\t\t\t\t:initialCollapseState=\"stages.automation.initialCollapseState\"\n\t\t\t\t:isDeliveryStageVisible=\"stages.delivery && stages.delivery.installed\"\n\t\t\t\t@on-save-collapsed-option=\"saveCollapsedOption\"\n\t\t\t/>\n\t\t\t<send-block\n\t\t\t\t@on-submit=\"onSend\"\n\t\t\t\t@on-submit-compilation-link-to-facebook=\"onSendCompilationLinkToFacebook\"\n\t\t\t\t:buttonEnabled=\"isSendAllowed\"\n\t\t\t\t:buttonLabel=\"submitButtonLabel\"\n\t\t\t\t:isFacebookForm=\"isFacebookForm\"\n\t\t\t/>\n\t\t\t<timeline-block\n\t\t\t\tv-if=\"hasStageTimeLine\"\n\t\t\t\t:timelineItems=\"stages.timeline.items\"\n\t\t\t/>\n\t\t</div>\n\t`\n};\n","export default {\n\tdata()\n\t{\n\t\treturn {\n\t\t\tisFaded: false,\n\t\t};\n\t},\n\tmounted()\n\t{\n\t\tthis.createPinner();\n\t},\n\tcreated()\n\t{\n\t\tthis.$root.$on('on-start-progress', () => {\n\t\t\tthis.startFade();\n\t\t});\n\n\t\tthis.$root.$on('on-stop-progress', () => {\n\t\t\tthis.endFade();\n\t\t});\n\t},\n\tmethods: {\n\t\tstartFade()\n\t\t{\n\t\t\tthis.isFaded = true;\n\t\t},\n\t\tendFade()\n\t\t{\n\t\t\tthis.isFaded = false;\n\t\t},\n\t\tcreatePinner()\n\t\t{\n\t\t\tlet buttonsPanel = this.$refs['buttonsPanel'];\n\t\t\tif(buttonsPanel)\n\t\t\t{\n\t\t\t\tthis.$root.$el.parentNode.appendChild(buttonsPanel);\n\t\t\t\tnew BX.UI.Pinner(\n\t\t\t\t\tbuttonsPanel,\n\t\t\t\t\t{\n\t\t\t\t\t\tfixBottom: this.$root.$app.isFrame,\n\t\t\t\t\t\tfullWidth: this.$root.$app.isFrame,\n\t\t\t\t\t\tanchorBottom: '.salescenter-app-pinner-anchor',\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t}\n\t\t},\n\t\tclose()\n\t\t{\n\t\t\tthis.$root.$app.closeApplication();\n\t\t},\n\t},\n\tcomputed: {\n\t\tisOrderPublicUrlAvailable()\n\t\t{\n\t\t\treturn this.$root.$app.isOrderPublicUrlAvailable;\n\t\t},\n\t\tcompilation()\n\t\t{\n\t\t\treturn this.$root.$app.compilation;\n\t\t},\n\t\twrapperClass()\n\t\t{\n\t\t\treturn {'salescenter-app-wrapper-fade': this.isFaded};\n\t\t},\n\t\twrapperStyle()\n\t\t{\n\t\t\tconst position = BX.pos(this.$root.$el);\n\n\t\t\tlet offset = position.top + 20;\n\t\t\tif(this.$root.$nodes.footer)\n\t\t\t{\n\t\t\t\toffset += BX.pos(this.$root.$nodes.footer).height;\n\t\t\t}\n\t\t\tconst buttonsPanel = this.$refs['buttonsPanel'];\n\t\t\tif(buttonsPanel)\n\t\t\t{\n\t\t\t\toffset += BX.pos(buttonsPanel).height;\n\t\t\t}\n\n\t\t\t//?auto\n\t\t\treturn {'minHeight': 'calc(100vh - ' + offset + 'px)'};\n\t\t},\n\t}\n}\n","import {Loc} from 'main.core';\nimport {Manager} from 'salescenter.manager';\nimport { EventEmitter } from 'main.core.events';\n\nexport default {\n\tdata()\n\t{\n\t\treturn {\n\t\t};\n\t},\n\tmethods: {\n\t\tconnect()\n\t\t{\n\t\t\tconst loader = new BX.Loader({size: 200});\n\t\t\tloader.show(document.body);\n\n\t\t\tBX.Salescenter.Manager.connect({\n\t\t\t\tno_redirect: 'Y',\n\t\t\t\tcontext: this.$root.$app.context,\n\t\t\t}).then(() =>\n\t\t\t{\n\t\t\t\tBX.Salescenter.Manager.loadConfig().then((result) =>\n\t\t\t\t{\n\t\t\t\t\tloader.hide();\n\n\t\t\t\t\tif(result.isSiteExists)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$root.$app.isSiteExists = result.isSiteExists;\n\t\t\t\t\t\tthis.$root.$app.isOrderPublicUrlExists = true;\n\t\t\t\t\t\tthis.$root.$app.orderPublicUrl = result.orderPublicUrl;\n\t\t\t\t\t\tthis.$root.$app.isOrderPublicUrlAvailable = result.isOrderPublicUrlAvailable;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.$emit('on-successfully-connected');\n\t\t\t\t});\n\t\t\t}).catch(function()\n\t\t\t{\n\t\t\t\tloader.hide();\n\t\t\t});\n\t\t},\n\t\tcheckRecycle()\n\t\t{\n\t\t\tManager.openConnectedSite(true);\n\t\t},\n\t\tpublishConnectedSite()\n\t\t{\n\t\t\tthis.$root.$app.publishShop();\n\t\t},\n\t\tconfirmPhoneNumber()\n\t\t{\n\t\t\tEventEmitter.subscribeOnce('BX.Salescenter.App::onPhoneConfirmed', () => this.$root.$app.publishShop());\n\n\t\t\tthis.$root.$app.confirmPhoneNumber();\n\t\t},\n\t},\n\tcomputed: {\n\t\tisOrderPageDeleted()\n\t\t{\n\t\t\treturn (this.$root.$app.isSiteExists && !this.isOrderPublicUrlExists);\n\t\t},\n\t\tisOrderPublicUrlExists()\n\t\t{\n\t\t\treturn this.$root.$app.isOrderPublicUrlExists;\n\t\t},\n\t\tisPhoneConfirmed()\n\t\t{\n\t\t\treturn this.$root.$app.isPhoneConfirmed;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"salescenter-app-page-content salescenter-app-start-wrapper\">\n\t\t\t<div class=\"ui-title-1 ui-text-center ui-color-medium\" style=\"margin-bottom: 20px;\">\n\t\t\t\t${Loc.getMessage('SALESCENTER_INFO_TEXT_TOP_2_MSGVER_1')}\n\t\t\t</div>\n\t\t\t<div class=\"ui-hr ui-mv-25\"></div>\n\t\t\t<template v-if=\"isOrderPublicUrlExists && !isPhoneConfirmed\">\n\t\t\t\t<div class=\"salescenter-title-5 ui-title-5 ui-text-center ui-color-medium\">\n\t\t\t\t\t${Loc.getMessage('SALESCENTER_PHONE_CONFIRMATION_INFO_TEXT_BOTTOM_PUBLIC')}\n\t\t\t\t</div>\n\t\t\t\t<div style=\"padding-top: 5px;\" class=\"ui-text-center\">\n\t\t\t\t\t<div class=\"ui-btn ui-btn-primary ui-btn-lg\" @click=\"confirmPhoneNumber\">\n\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_PHONE_CONFIRMATION_INFO_CONFIRM')}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t\t<template v-else-if=\"isOrderPublicUrlExists\">\n\t\t\t\t<div class=\"salescenter-title-5 ui-title-5 ui-text-center ui-color-medium\">\n\t\t\t\t\t${Loc.getMessage('SALESCENTER_INFO_TEXT_BOTTOM_PUBLIC')}\n\t\t\t\t</div>\n\t\t\t\t<div style=\"padding-top: 5px;\" class=\"ui-text-center\">\n\t\t\t\t\t<div class=\"ui-btn ui-btn-primary ui-btn-lg\" @click=\"publishConnectedSite\">\n\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_INFO_PUBLIC')}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t\t<template v-else-if=\"isOrderPageDeleted\">\n\t\t\t\t<div class=\"salescenter-title-5 ui-title-5 ui-text-center ui-color-medium\">\n\t\t\t\t\t${Loc.getMessage('SALESCENTER_INFO_ORDER_PAGE_DELETED')}\n\t\t\t\t</div>\n\t\t\t\t<div style=\"padding-top: 5px;\" class=\"ui-text-center\">\n\t\t\t\t\t<div\n\t\t\t\t\t\t@click=\"checkRecycle\"\n\t\t\t\t\t\tclass=\"ui-btn ui-btn-primary ui-btn-lg\"\n\t\t\t\t\t>\n\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_CHECK_RECYCLE')}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t\t<template v-else>\n\t\t\t\t<div class=\"salescenter-title-5 ui-title-5 ui-text-center ui-color-medium\">\n\t\t\t\t\t${Loc.getMessage('SALESCENTER_INFO_TEXT_BOTTOM_2')}\n\t\t\t\t</div>\n\t\t\t\t<div style=\"padding-top: 5px;\" class=\"ui-text-center\">\n\t\t\t\t\t<div\n\t\t\t\t\t\t@click=\"connect\"\n\t\t\t\t\t\tclass=\"ui-btn ui-btn-primary ui-btn-lg\"\n\t\t\t\t\t>\n\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_INFO_CREATE')}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div style=\"padding-top: 5px;\" class=\"ui-text-center\">\n\t\t\t\t\t<div\n\t\t\t\t\t\t@click=\"BX.Salescenter.Manager.openHowPayDealWorks(event)\"\n\t\t\t\t\t\tclass=\"ui-btn ui-btn-link ui-btn-lg\"\n\t\t\t\t\t>\n\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_HOW')}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</div>\n\t`,\n}\n","import {Loc} from 'main.core';\nimport {Manager} from \"salescenter.manager\";\n\nexport default {\n\tdata()\n\t{\n\t\treturn {\n\t\t\tisVisible: true,\n\t\t};\n\t},\n\tmethods: {\n\t\thide()\n\t\t{\n\t\t\tthis.isVisible = false;\n\t\t\tthis.$emit('on-hide');\n\t\t},\n\t\topenControlPanel()\n\t\t{\n\t\t\tManager.openControlPanel();\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div v-if=\"isVisible\" class=\"salescenter-app-banner\" >\n\t\t\t<div class=\"salescenter-app-banner-inner\">\n\t\t\t\t<div class=\"salescenter-app-banner-title\">\n\t\t\t\t\t${Loc.getMessage('SALESCENTER_BANNER_TITLE')}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"salescenter-app-banner-content\">\n\t\t\t\t\t<div class=\"salescenter-app-banner-text\">\n\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_BANNER_TEXT')}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"salescenter-app-banner-btn-block\">\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t@click=\"openControlPanel\"\n\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-sm ui-btn-primary salescenter-app-banner-btn-connect\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_BANNER_BTN_CONFIGURE')}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t@click=\"hide\"\n\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-sm ui-btn-link salescenter-app-banner-btn-hide\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_BANNER_BTN_HIDE')}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\t@click=\"hide\"\n\t\t\t\t\tclass=\"salescenter-app-banner-close\"\n\t\t\t\t>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n}\n","import {Vue} from 'ui.vue';\nimport {Vuex} from 'ui.vue.vuex';\nimport {Manager} from 'salescenter.manager';\nimport {Loader} from 'main.loader';\nimport {Loc, Type, Uri} from 'main.core';\nimport {MixinTemplatesType} from './components/templates-type-mixin';\nimport StageBlocksList from './components/chat-receiving-payment/stage-blocks-list';\nimport ComponentMixin from './component-mixin';\nimport { ModeDictionary } from './const/mode-dictionary';\nimport Product from './product';\nimport Start from './start';\nimport NoPaymentSystemsBanner from './no-payment-systems';\nimport 'popup';\nimport 'ui.buttons';\nimport 'ui.buttons.icons';\nimport 'ui.forms';\nimport 'ui.fonts.opensans';\nimport 'ui.pinner';\n\nexport default {\n\tmixins: [MixinTemplatesType, ComponentMixin],\n\tdata()\n\t{\n\t\treturn {\n\t\t\tisShowPreview: false,\n\t\t\tisShowPayment: false,\n\t\t\tpageTitle: '',\n\t\t\tcurrentPageId: null,\n\t\t\tactions: [],\n\t\t\tframeCheckShortTimeout: false,\n\t\t\tframeCheckLongTimeout: false,\n\t\t\tisPagesOpen: false,\n\t\t\tisFormsOpen: false,\n\t\t\tshowedPageIds: [],\n\t\t\tloadedPageIds: [],\n\t\t\terrorPageIds: [],\n\t\t\tlastAddedPages: [],\n\t\t\tordersCount: null,\n\t\t\tpaymentsCount: null,\n\t\t\teditedPageId: null,\n\t\t\tcurrentPageTitle: null,\n\t\t\tModeDictionary,\n\t\t};\n\t},\n\tcomponents:\n\t\t{\n\t\t\t'product': Product,\n\t\t\t'start': Start,\n\t\t\t'no-payment-systems-banner': NoPaymentSystemsBanner,\n\t\t\t'chat-receiving-payment': StageBlocksList,\n\t\t},\n\tupdated()\n\t{\n\t\tthis.renderErrors();\n\t},\n\tmounted()\n\t{\n\t\tthis.createLoader();\n\t\tthis.$root.$app.fillPages().then(() =>\n\t\t{\n\t\t\tif (this.$root.$app.isWithOrdersMode)\n\t\t\t{\n\t\t\t\tthis.refreshOrdersCount();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.refreshPaymentsCount();\n\t\t\t}\n\n\t\t\tthis.openFirstPage();\n\t\t});\n\n\t\tif(this.$root.$app.isPaymentsLimitReached)\n\t\t{\n\t\t\tlet paymentsLimitStartNode = this.$root.$nodes.paymentsLimit;\n\t\t\tlet paymentsLimitNode = this.$refs['paymentsLimit'];\n\t\t\tfor (let node of paymentsLimitStartNode.children)\n\t\t\t{\n\t\t\t\tpaymentsLimitNode.appendChild(node);\n\t\t\t}\n\t\t}\n\t},\n\tmethods:\n\t\t{\n\t\t\tgetActions()\n\t\t\t{\n\t\t\t\tlet actions = [];\n\t\t\t\tif(this.currentPage)\n\t\t\t\t{\n\t\t\t\t\tactions = [\n\t\t\t\t\t\t{text: this.localize.SALESCENTER_RIGHT_ACTION_COPY_URL, onclick: this.copyUrl},\n\t\t\t\t\t];\n\t\t\t\t\tif(this.currentPage.landingId > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tactions = [\n\t\t\t\t\t\t\t...actions,\n\t\t\t\t\t\t\t{text: this.localize.SALESCENTER_RIGHT_ACTION_HIDE, onclick: this.hidePage},\n\t\t\t\t\t\t];\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tactions = [\n\t\t\t\t\t\t\t...actions,\n\t\t\t\t\t\t\t{text: this.localize.SALESCENTER_RIGHT_ACTION_DELETE, onclick: this.hidePage},\n\t\t\t\t\t\t];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn [\n\t\t\t\t\t...actions,\n\t\t\t\t\t{text: this.localize.SALESCENTER_RIGHT_ACTION_ADD, items: this.getAddPageActions()},\n\t\t\t\t];\n\t\t\t},\n\t\t\tgetAddPageActions(isWebform = false)\n\t\t\t{\n\t\t\t\treturn [\n\t\t\t\t\t{text: this.localize.SALESCENTER_RIGHT_ACTION_ADD_SITE_B24, onclick: () =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.addSite(isWebform);\n\t\t\t\t\t\t}},\n\t\t\t\t\t{text: this.localize.SALESCENTER_RIGHT_ACTION_ADD_CUSTOM, onclick: () =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.showAddUrlPopup({\n\t\t\t\t\t\t\t\tisWebform: isWebform === true ? 'Y' : null\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}},\n\t\t\t\t];\n\t\t\t},\n\t\t\topenFirstPage()\n\t\t\t{\n\t\t\t\tthis.isShowPayment = false;\n\t\t\t\tthis.isShowPreview = true;\n\t\t\t\tif (this.$root.$app.isPaymentCreationAvailable)\n\t\t\t\t{\n\t\t\t\t\tthis.showPaymentForm();\n\t\t\t\t}\n\t\t\t\telse if(this.pages && this.pages.length > 0)\n\t\t\t\t{\n\t\t\t\t\tlet firstWebformPage = false;\n\t\t\t\t\tlet pageToOpen = false;\n\t\t\t\t\tthis.pages.forEach((page) =>\n\t\t\t\t\t{\n\t\t\t\t\t\tif(!pageToOpen)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif(!page.isWebform)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tpageToOpen = page;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tfirstWebformPage = page;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tif(!pageToOpen && firstWebformPage)\n\t\t\t\t\t{\n\t\t\t\t\t\tpageToOpen = firstWebformPage;\n\t\t\t\t\t}\n\t\t\t\t\tif(this.currentPageId !== pageToOpen.id)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.onPageClick(pageToOpen);\n\t\t\t\t\t\tif(pageToOpen.isWebform)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.isFormsOpen = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.isPagesOpen = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.currentPageId = this.pages[0].id;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.pageTitle = null;\n\t\t\t\t\tthis.currentPageId = null;\n\t\t\t\t\tthis.setPageTitle(this.pageTitle);\n\t\t\t\t}\n\t\t\t},\n\t\t\tonPageClick(page)\n\t\t\t{\n\t\t\t\tthis.pageTitle = page.name;\n\t\t\t\tthis.currentPageId = page.id;\n\t\t\t\tthis.hideActionsPopup();\n\t\t\t\tthis.isShowPayment = false;\n\t\t\t\tthis.isShowPreview = true;\n\t\t\t\tthis.setPageTitle(this.pageTitle);\n\t\t\t\tif(page.isFrameDenied !== true)\n\t\t\t\t{\n\t\t\t\t\tif(!this.showedPageIds.includes(page.id))\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.startFrameCheckTimeout();\n\t\t\t\t\t\tthis.showedPageIds.push(page.id);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.onFrameError();\n\t\t\t\t}\n\t\t\t},\n\t\t\tshowActionsPopup({target})\n\t\t\t{\n\t\t\t\tBX.PopupMenu.show('salescenter-app-actions', target, this.getActions(), {\n\t\t\t\t\toffsetLeft: 0,\n\t\t\t\t\toffsetTop: 0,\n\t\t\t\t\tcloseByEsc: true,\n\t\t\t\t});\n\t\t\t},\n\t\t\tshowCompanyContacts({target})\n\t\t\t{\n\t\t\t\tBX.Salescenter.Manager.openSlider(this.$root.$app.options.urlSettingsCompanyContacts, {width: 1200} );\n\t\t\t},\n\t\t\tshowAddPageActionPopup({target}, isWebform = false)\n\t\t\t{\n\t\t\t\tlet menuId = 'salescenter-app-add-page-actions';\n\t\t\t\tif(isWebform)\n\t\t\t\t{\n\t\t\t\t\tmenuId += '-forms';\n\t\t\t\t}\n\t\t\t\tBX.PopupMenu.show(menuId, target, this.getAddPageActions(isWebform), {\n\t\t\t\t\toffsetLeft: target.offsetWidth + 20,\n\t\t\t\t\toffsetTop: -target.offsetHeight - 15,\n\t\t\t\t\tcloseByEsc: true,\n\t\t\t\t\tangle: {\n\t\t\t\t\t\tposition: 'left',\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\thideActionsPopup()\n\t\t\t{\n\t\t\t\tBX.PopupMenu.destroy('salescenter-app-actions');\n\t\t\t\tBX.PopupMenu.destroy('salescenter-app-add-page-actions');\n\t\t\t},\n\t\t\taddSite(isWebform = false)\n\t\t\t{\n\t\t\t\tManager.addSitePage(isWebform).then((result) =>\n\t\t\t\t{\n\t\t\t\t\tlet newPage = result.answer.result.page || false;\n\t\t\t\t\tthis.$root.$app.fillPages().then(() =>\n\t\t\t\t\t{\n\t\t\t\t\t\tif(newPage)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.onPageClick(newPage);\n\t\t\t\t\t\t\tthis.lastAddedPages.push(parseInt(newPage.id));\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.openFirstPage();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\tthis.hideActionsPopup();\n\t\t\t},\n\t\t\tcopyUrl(event)\n\t\t\t{\n\t\t\t\tif(this.currentPage && this.currentPage.url)\n\t\t\t\t{\n\t\t\t\t\tManager.copyUrl(this.currentPage.url, event);\n\t\t\t\t\tthis.hideActionsPopup();\n\t\t\t\t}\n\t\t\t},\n\t\t\teditPage()\n\t\t\t{\n\t\t\t\tif(this.currentPage)\n\t\t\t\t{\n\t\t\t\t\tif(this.currentPage.landingId && this.currentPage.landingId > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tManager.editLandingPage(this.currentPage.landingId, this.currentPage.siteId);\n\t\t\t\t\t\tthis.hideActionsPopup();\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.showAddUrlPopup(this.currentPage);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\thidePage()\n\t\t\t{\n\t\t\t\tif(this.currentPage)\n\t\t\t\t{\n\t\t\t\t\tthis.$root.$app.hidePage(this.currentPage).then(() => {\n\t\t\t\t\t\tthis.openFirstPage();\n\t\t\t\t\t});\n\t\t\t\t\tthis.hideActionsPopup();\n\t\t\t\t}\n\t\t\t},\n\t\t\thideNoPaymentSystemsBanner()\n\t\t\t{\n\t\t\t\tthis.$root.$app.hideNoPaymentSystemsBanner();\n\t\t\t},\n\t\t\tshowAddUrlPopup(newPage)\n\t\t\t{\n\t\t\t\tif(!Type.isPlainObject(newPage))\n\t\t\t\t{\n\t\t\t\t\tnewPage = {};\n\t\t\t\t}\n\t\t\t\tManager.addCustomPage(newPage).then((pageId) =>\n\t\t\t\t{\n\t\t\t\t\tif(!this.isShowPreview)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.isShowPreview = false;\n\t\t\t\t\t}\n\t\t\t\t\tthis.$root.$app.fillPages().then(() => {\n\t\t\t\t\t\tif(pageId && (!Type.isPlainObject(newPage) || !newPage.id))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.lastAddedPages.push(parseInt(pageId));\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(!pageId && newPage)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tpageId = newPage.id;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(pageId)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.pages.forEach((page) =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif(parseInt(page.id) === parseInt(pageId))\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tthis.onPageClick(page);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif(!this.isShowPayment)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.isShowPreview = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\tthis.hideActionsPopup();\n\t\t\t},\n\t\t\tgetPaymentItemTitle(): ?string\n\t\t\t{\n\t\t\t\tif(!this.isOrderPublicUrlAvailable)\n\t\t\t\t{\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t\tif (this.$root.$app.options.mode === 'payment')\n\t\t\t\t{\n\t\t\t\t\treturn this.localize.SALESCENTER_LEFT_PAYMENT_ADD_2_MSGVER_1;\n\t\t\t\t}\n\n\t\t\t\treturn this.localize.SALESCENTER_LEFT_PAYMENT_AND_DELIVERY_MSGVER_1;\n\t\t\t},\n\t\t\tshowPaymentForm()\n\t\t\t{\n\t\t\t\tthis.isShowPayment = true;\n\t\t\t\tthis.isShowPreview = false;\n\n\t\t\t\tif (this.compilation)\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tlet title = this.getPaymentItemTitle() || this.localize.SALESCENTER_DEFAULT_TITLE;\n\n\t\t\t\tthis.setPageTitle(title);\n\t\t\t},\n\t\t\tshowOrdersList()\n\t\t\t{\n\t\t\t\tthis.hideActionsPopup();\n\t\t\t\tManager.showOrdersList({\n\t\t\t\t\tcontext: this.$root.$app.context,\n\t\t\t\t\townerId: this.$root.$app.ownerId,\n\t\t\t\t\townerTypeId: this.$root.$app.ownerTypeId,\n\t\t\t\t}).then(() =>\n\t\t\t\t{\n\t\t\t\t\tthis.refreshOrdersCount();\n\t\t\t\t});\n\t\t\t},\n\t\t\tshowPaymentsList()\n\t\t\t{\n\t\t\t\tthis.hideActionsPopup();\n\t\t\t\tManager.showPaymentsList({\n\t\t\t\t\tcontext: this.$root.$app.context,\n\t\t\t\t\townerId: this.$root.$app.ownerId,\n\t\t\t\t\townerTypeId: this.$root.$app.ownerTypeId,\n\t\t\t\t}).then(() =>\n\t\t\t\t{\n\t\t\t\t\tthis.refreshPaymentsCount();\n\t\t\t\t});\n\t\t\t},\n\t\t\tshowOrderAdd()\n\t\t\t{\n\t\t\t\tthis.hideActionsPopup();\n\t\t\t\tManager.showOrderAdd({\n\t\t\t\t\townerId: this.$root.$app.ownerId,\n\t\t\t\t\townerTypeId: this.$root.$app.ownerTypeId,\n\t\t\t\t}).then(() =>\n\t\t\t\t{\n\t\t\t\t\tthis.refreshOrdersCount();\n\t\t\t\t});\n\t\t\t},\n\t\t\tshowCatalog()\n\t\t\t{\n\t\t\t\tthis.hideActionsPopup();\n\t\t\t\tManager.openSlider(`/saleshub/catalog/?sessionId=${this.$root.$app.sessionId}`);\n\t\t\t},\n\t\t\tonFormsClick()\n\t\t\t{\n\t\t\t\tthis.isFormsOpen = !this.isFormsOpen;\n\t\t\t\tthis.hideActionsPopup();\n\t\t\t},\n\t\t\topenControlPanel()\n\t\t\t{\n\t\t\t\tManager.openControlPanel();\n\t\t\t\tthis.hideActionsPopup();\n\t\t\t},\n\t\t\topenHelpDesk()\n\t\t\t{\n\t\t\t\tthis.hideActionsPopup();\n\t\t\t\tManager.openHowItWorks();\n\t\t\t},\n\t\t\tisPageSelected(page)\n\t\t\t{\n\t\t\t\treturn (this.currentPage && this.isShowPreview && this.currentPage.id === page.id);\n\t\t\t},\n\t\t\tsendCompilationLinkToFacebook(event)\n\t\t\t{\n\t\t\t\tthis.send(event, 'n',true)\n\t\t\t},\n\t\t\tsend(event, skipPublicMessage = 'n', sendCompilationLinkToFacebook = false)\n\t\t\t{\n\t\t\t\tif(!this.isAllowedSubmitButton)\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif(this.isShowPayment && !this.isShowStartInfo)\n\t\t\t\t{\n\t\t\t\t\tif (this.$store.getters['orderCreation/isCompilationMode'])\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$root.$app.sendCompilation(event.target, sendCompilationLinkToFacebook);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$root.$app.sendPayment(event.target, skipPublicMessage);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if(this.currentPage && this.currentPage.isActive)\n\t\t\t\t{\n\t\t\t\t\tthis.$root.$app.sendPage(this.currentPage.id);\n\t\t\t\t}\n\t\t\t},\n\t\t\tsetPageTitle(title = null)\n\t\t\t{\n\t\t\t\tif(!title)\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif(this.$root.$nodes.title)\n\t\t\t\t{\n\t\t\t\t\tthis.$root.$nodes.title.innerText = title;\n\t\t\t\t}\n\t\t\t},\n\t\t\tonFrameError()\n\t\t\t{\n\t\t\t\tclearTimeout(this.frameCheckLongTimeout);\n\t\t\t\tif(this.showedPageIds.includes(this.currentPage.id))\n\t\t\t\t{\n\t\t\t\t\tthis.loadedPageIds.push(this.currentPage.id);\n\t\t\t\t}\n\t\t\t\tthis.errorPageIds.push(this.currentPage.id);\n\t\t\t},\n\t\t\tonFrameLoad(pageId)\n\t\t\t{\n\t\t\t\tclearTimeout(this.frameCheckLongTimeout);\n\t\t\t\tif(this.showedPageIds.includes(pageId))\n\t\t\t\t{\n\t\t\t\t\tthis.loadedPageIds.push(pageId);\n\t\t\t\t\tif(this.currentPage && this.currentPage.id === pageId)\n\t\t\t\t\t{\n\t\t\t\t\t\tif(this.frameCheckShortTimeout && !this.currentPage.landingId)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.onFrameError();\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(this.errorPageIds.includes(this.currentPage.id))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.errorPageIds = this.errorPageIds.filter((pageId) =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treturn pageId !== this.currentPage.id;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif(this.frameCheckShortTimeout && this.currentPage && this.currentPage.id === pageId && !this.currentPage.landingId)\n\t\t\t\t{\n\t\t\t\t\tthis.onFrameError();\n\t\t\t\t}\n\t\t\t},\n\t\t\tonSuccessfullyConnected()\n\t\t\t{\n\t\t\t\tthis.$root.$app.fillPages().then(() =>\n\t\t\t\t{\n\t\t\t\t\tthis.openFirstPage();\n\t\t\t\t});\n\t\t\t},\n\t\t\tstartFrameCheckTimeout()\n\t\t\t{\n\t\t\t\t// this is a workaround for denied through X-Frame-Options sources\n\t\t\t\tif(this.frameCheckShortTimeout)\n\t\t\t\t{\n\t\t\t\t\tclearTimeout(this.frameCheckShortTimeout);\n\t\t\t\t\tthis.frameCheckShortTimeout = false;\n\t\t\t\t}\n\t\t\t\tthis.frameCheckShortTimeout = setTimeout(() =>\n\t\t\t\t{\n\t\t\t\t\tthis.frameCheckShortTimeout = false;\n\t\t\t\t}, 500);\n\n\t\t\t\t// to show error on long loading\n\t\t\t\tclearTimeout(this.frameCheckLongTimeout);\n\t\t\t\tthis.frameCheckLongTimeout = setTimeout(() =>\n\t\t\t\t{\n\t\t\t\t\tif(this.currentPage && this.showedPageIds.includes(this.currentPage.id) && !this.loadedPageIds.includes(this.currentPage.id))\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.errorPageIds.push(this.currentPage.id);\n\t\t\t\t\t}\n\t\t\t\t}, 5000);\n\t\t\t},\n\t\t\tgetFrameSource(page)\n\t\t\t{\n\t\t\t\tif(this.showedPageIds.includes(page.id))\n\t\t\t\t{\n\t\t\t\t\tif(page.landingId > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tif(page.isActive)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn (new Uri(page.url)).setQueryParam('theme', '').toString();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\treturn page.url;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn null;\n\t\t\t},\n\t\t\trefreshOrdersCount()\n\t\t\t{\n\t\t\t\tthis.$root.$app.getOrdersCount().then((result) =>\n\t\t\t\t{\n\t\t\t\t\tthis.ordersCount = result.answer.result || null;\n\t\t\t\t}).catch(() =>\n\t\t\t\t{\n\t\t\t\t\tthis.ordersCount = null;\n\t\t\t\t});\n\t\t\t},\n\t\t\trefreshPaymentsCount()\n\t\t\t{\n\t\t\t\tthis.$root.$app.getPaymentsCount().then((result) =>\n\t\t\t\t{\n\t\t\t\t\tthis.paymentsCount = result.answer.result || null;\n\t\t\t\t}).catch(() =>\n\t\t\t\t{\n\t\t\t\t\tthis.paymentsCount = null;\n\t\t\t\t});\n\t\t\t},\n\t\t\trenderErrors()\n\t\t\t{\n\t\t\t\tif (this.isShowPayment && this.order.errors.length > 0)\n\t\t\t\t{\n\t\t\t\t\tlet errorMessages = this.order.errors.map((item) => item.message).join('<br>');\n\t\t\t\t\tlet params = {\n\t\t\t\t\t\tcolor: BX.UI.Alert.Color.DANGER,\n\t\t\t\t\t\ttextCenter: true,\n\t\t\t\t\t\ttext: BX.util.htmlspecialchars(errorMessages)\n\t\t\t\t\t};\n\t\t\t\t\tif (this.$refs.errorBlock.innerHTML.length === 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tparams.animated = true;\n\t\t\t\t\t}\n\t\t\t\t\tlet alert = new BX.UI.Alert(params);\n\t\t\t\t\tthis.$refs.errorBlock.innerHTML = '';\n\t\t\t\t\tthis.$refs.errorBlock.appendChild(alert.getContainer());\n\t\t\t\t}\n\t\t\t\telse if (this.$refs.errorBlock)\n\t\t\t\t{\n\t\t\t\t\tthis.$refs.errorBlock.innerHTML = '';\n\t\t\t\t}\n\t\t\t},\n\t\t\teditMenuItem(event, page)\n\t\t\t{\n\t\t\t\tthis.editedPageId = page.id;\n\t\t\t\tsetTimeout(() =>\n\t\t\t\t{\n\t\t\t\t\tevent.target.parentNode.parentNode.querySelector('input').focus();\n\t\t\t\t}, 50);\n\t\t\t},\n\t\t\tsaveMenuItem(event)\n\t\t\t{\n\t\t\t\tconst pageId = this.editedPageId;\n\t\t\t\tconst name = event.target.value;\n\t\t\t\tlet oldName;\n\t\t\t\tthis.pages.forEach((page) =>\n\t\t\t\t{\n\t\t\t\t\tif(page.id === this.editedPageId)\n\t\t\t\t\t{\n\t\t\t\t\t\toldName = page.name\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tif(pageId > 0 && oldName && name !== oldName && name.length > 0)\n\t\t\t\t{\n\t\t\t\t\tManager.addPage({\n\t\t\t\t\t\tid: pageId,\n\t\t\t\t\t\tname: name,\n\t\t\t\t\t\tanalyticsLabel: 'salescenterUpdatePageTitle',\n\t\t\t\t\t}).then(() =>\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$root.$app.fillPages().then(() => {\n\t\t\t\t\t\t\tif(this.editedPageId === this.currentPageId)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.setPageTitle(name);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthis.editedPageId = null;\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.editedPageId = null;\n\t\t\t\t}\n\t\t\t},\n\t\t\tcreateLoader()\n\t\t\t{\n\t\t\t\tconst loader = new Loader({size: 200});\n\t\t\t\tloader.show(this.$refs['previewLoader']);\n\t\t\t}\n\t\t},\n\n\tcomputed:\n\t\t{\n\t\t\tModeDictionary()\n\t\t\t{\n\t\t\t\treturn ModeDictionary\n\t\t\t},\n\t\t\tconfig: () => config,\n\t\t\tcurrentPage()\n\t\t\t{\n\t\t\t\tif(this.currentPageId > 0)\n\t\t\t\t{\n\t\t\t\t\tlet pages = this.application.pages.filter((page) =>\n\t\t\t\t\t{\n\t\t\t\t\t\treturn page.id === this.currentPageId;\n\t\t\t\t\t});\n\t\t\t\t\tif(pages.length > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn pages[0];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn null;\n\t\t\t},\n\n\t\t\tsendButtonLabel()\n\t\t\t{\n\t\t\t\treturn this.editable && !this.$root.$app?.compilation\n\t\t\t\t\t? Loc.getMessage('SALESCENTER_SEND')\n\t\t\t\t\t: Loc.getMessage('SALESCENTER_RESEND')\n\t\t\t\t\t;\n\t\t\t},\n\n\t\t\tpagesSubmenuHeight()\n\t\t\t{\n\t\t\t\tif(this.isPagesOpen)\n\t\t\t\t{\n\t\t\t\t\treturn (this.application.pages.filter((page) =>\n\t\t\t\t\t{\n\t\t\t\t\t\treturn !page.isWebform;\n\t\t\t\t\t}).length * 39 + 30) + 'px';\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\treturn '0px';\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tformsSubmenuHeight()\n\t\t\t{\n\t\t\t\tif(this.isFormsOpen)\n\t\t\t\t{\n\t\t\t\t\treturn (this.application.pages.filter((page) =>\n\t\t\t\t\t{\n\t\t\t\t\t\treturn page.isWebform;\n\t\t\t\t\t}).length * 39 + 30) + 'px';\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\treturn '0px';\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tisFrameError()\n\t\t\t{\n\t\t\t\tif(this.isShowPreview && this.currentPage)\n\t\t\t\t{\n\t\t\t\t\tif(!this.currentPage.isActive)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\telse if(!this.currentPage.landingId && this.errorPageIds.includes(this.currentPage.id))\n\t\t\t\t\t{\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t},\n\n\t\t\tisShowLoader()\n\t\t\t{\n\t\t\t\treturn (\n\t\t\t\t\tthis.isShowPreview &&\n\t\t\t\t\tthis.currentPageId > 0 &&\n\t\t\t\t\tthis.showedPageIds.includes(this.currentPageId) &&\n\t\t\t\t\t!this.loadedPageIds.includes(this.currentPageId)\n\t\t\t\t);\n\t\t\t},\n\n\t\t\tisShowStartInfo()\n\t\t\t{\n\t\t\t\tlet res = false;\n\t\t\t\tif(this.isShowPreview)\n\t\t\t\t{\n\t\t\t\t\tres = (!this.pages || this.pages.length <= 0);\n\t\t\t\t}\n\t\t\t\telse if(this.isShowPayment)\n\t\t\t\t{\n\t\t\t\t\tres = !this.isOrderPublicUrlAvailable;\n\t\t\t\t}\n\n\t\t\t\treturn res;\n\t\t\t},\n\n\t\t\tlastModified()\n\t\t\t{\n\t\t\t\tif(this.currentPage && this.currentPage.modifiedAgo)\n\t\t\t\t{\n\t\t\t\t\treturn this.localize.SALESCENTER_MODIFIED.replace('#AGO#', this.currentPage.modifiedAgo);\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\t\t\t},\n\n\t\t\tlocalize()\n\t\t\t{\n\t\t\t\treturn Vue.getFilteredPhrases('SALESCENTER_');\n\t\t\t},\n\n\t\t\tpages()\n\t\t\t{\n\t\t\t\treturn [...this.application.pages];\n\t\t\t},\n\n\t\t\tisAllowedSubmitButton()\n\t\t\t{\n\t\t\t\tif(this.$root.$app.disableSendButton)\n\t\t\t\t{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tif (this.isShowPreview && this.currentPage && !this.currentPage.isActive)\n\t\t\t\t{\n\t\t\t\t\treturn false\n\t\t\t\t}\n\t\t\t\tif (this.isShowPayment)\n\t\t\t\t{\n\t\t\t\t\treturn this.$store.getters['orderCreation/isAllowedSubmit'];\n\t\t\t\t}\n\t\t\t\treturn this.currentPage;\n\t\t\t},\n\t\t\tshowSubmitCompilationLinkToFacebookButton()\n\t\t\t{\n\t\t\t\tconst isCompilationMode = this.$store.getters['orderCreation/isCompilationMode'];\n\n\t\t\t\treturn this.$root.$app.connector === 'facebook' && this.$root.$app.isAllowedFacebookRegion && isCompilationMode;\n\t\t\t},\n\t\t\tisNoPaymentSystemsBannerVisible()\n\t\t\t{\n\t\t\t\treturn this.$root.$app.options.showPaySystemSettingBanner;\n\t\t\t},\n\t\t\tmode()\n\t\t\t{\n\t\t\t\treturn this.$root.$app.options.mode;\n\t\t\t},\n\t\t\t...Vuex.mapState({\n\t\t\t\tapplication: state => state.application,\n\t\t\t\torder: state => state.orderCreation,\n\t\t\t})\n\t\t},\n\ttemplate: `\n\t\t<div\n\t\t\t:class=\"wrapperClass\"\n\t\t\t:style=\"wrapperStyle\"\n\t\t\tclass=\"salescenter-app-wrapper salescenter-app-chat-wrapper\"\n\t\t>\n\t\t\t<div class=\"ui-sidepanel-sidebar salescenter-app-sidebar\" ref=\"sidebar\">\n\t\t\t\t<ul class=\"ui-sidepanel-menu\" ref=\"sidepanelMenu\">\n\t\t\t\t\t<li v-if=\"this.$root.$app.isPaymentCreationAvailable && !this.compilation\" :class=\"{ 'salescenter-app-sidebar-menu-active': this.isShowPayment}\" class=\"ui-sidepanel-menu-item\" @click=\"showPaymentForm\">\n\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link\">\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">{{getPaymentItemTitle()}}</div>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li v-if=\"this.compilation\" :class=\"{ 'salescenter-app-sidebar-menu-active': this.isShowPayment}\" class=\"ui-sidepanel-menu-item\" @click=\"showPaymentForm\">\n\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link\">\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">{{this.compilation.TITLE_TAB}}</div>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li :class=\"{'salescenter-app-sidebar-menu-active': isPagesOpen}\" class=\"ui-sidepanel-menu-item\">\n\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link\" @click.stop.prevent=\"isPagesOpen = !isPagesOpen;\">\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">{{localize.SALESCENTER_LEFT_PAGES}}</div>\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-toggle-btn\">{{this.isPagesOpen ? this.localize.SALESCENTER_SUBMENU_CLOSE : this.localize.SALESCENTER_SUBMENU_OPEN}}</div>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t<ul class=\"ui-sidepanel-submenu\" :style=\"{height: pagesSubmenuHeight}\">\n\t\t\t\t\t\t\t<li v-for=\"page in pages\" v-if=\"!page.isWebform\" :key=\"page.id\"\n\t\t\t\t\t\t\t:class=\"{\n\t\t\t\t\t\t\t\t'ui-sidepanel-submenu-active': (currentPage && currentPage.id == page.id && isShowPreview),\n\t\t\t\t\t\t\t\t'ui-sidepanel-submenu-edit-mode': (editedPageId === page.id)\n\t\t\t\t\t\t\t}\" class=\"ui-sidepanel-submenu-item\">\n\t\t\t\t\t\t\t\t<a :title=\"page.name\" class=\"ui-sidepanel-submenu-link\" @click.stop=\"onPageClick(page)\">\n\t\t\t\t\t\t\t\t\t<input class=\"ui-sidepanel-input\" :value=\"page.name\" v-on:keyup.enter=\"saveMenuItem($event)\" @blur=\"saveMenuItem($event)\" />\n\t\t\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">{{page.name}}</div>\n\t\t\t\t\t\t\t\t\t<div v-if=\"lastAddedPages.includes(page.id)\" class=\"ui-sidepanel-badge-new\"></div>\n\t\t\t\t\t\t\t\t\t<div class=\"ui-sidepanel-edit-btn\"><span class=\"ui-sidepanel-edit-btn-icon\" @click=\"editMenuItem($event, page);\"></span></div>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li class=\"salescenter-app-helper-nav-item salescenter-app-menu-add-page\" @click.stop=\"showAddPageActionPopup($event)\">\n\t\t\t\t\t\t\t\t<span class=\"salescenter-app-helper-nav-item-text salescenter-app-helper-nav-item-add\">+</span><span class=\"salescenter-app-helper-nav-item-text\">{{localize.SALESCENTER_RIGHT_ACTION_ADD}}</span>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li v-if=\"this.$root.$app.isWithOrdersMode\" @click=\"showOrdersList\">\n\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link\">\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">{{localize.SALESCENTER_LEFT_ORDERS}}</div>\n\t\t\t\t\t\t\t<span class=\"ui-sidepanel-counter\" ref=\"ordersCounter\" v-show=\"ordersCount > 0\">{{ordersCount}}</span>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li v-if=\"this.$root.$app.isWithOrdersMode\" @click=\"showOrderAdd\">\n\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link\">\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">{{localize.SALESCENTER_LEFT_ORDER_ADD}}</div>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li v-if=\"!this.$root.$app.isWithOrdersMode\" @click=\"showPaymentsList\">\n\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link\">\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">{{localize.SALESCENTER_LEFT_PAYMENTS}}</div>\n\t\t\t\t\t\t\t<span class=\"ui-sidepanel-counter\" ref=\"paymentsCounter\" v-show=\"paymentsCount > 0\">{{paymentsCount}}</span>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li v-if=\"this.$root.$app.isCatalogAvailable\" @click=\"showCatalog\">\n\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link\">\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">{{localize.SALESCENTER_LEFT_CATALOG}}</div>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li :class=\"{'salescenter-app-sidebar-menu-active': isFormsOpen}\" class=\"ui-sidepanel-menu-item\">\n\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link\" @click.stop.prevent=\"onFormsClick();\">\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">{{localize.SALESCENTER_LEFT_FORMS_ALL}}</div>\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-toggle-btn\">{{this.isFormsOpen ? this.localize.SALESCENTER_SUBMENU_CLOSE : this.localize.SALESCENTER_SUBMENU_OPEN}}</div>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t<ul class=\"ui-sidepanel-submenu\" :style=\"{height: formsSubmenuHeight}\">\n\t\t\t\t\t\t\t<li v-for=\"page in pages\" v-if=\"page.isWebform\" :key=\"page.id\"\n\t\t\t\t\t\t\t :class=\"{\n\t\t\t\t\t\t\t\t'ui-sidepanel-submenu-active': (currentPage && currentPage.id == page.id && isShowPreview),\n\t\t\t\t\t\t\t\t'ui-sidepanel-submenu-edit-mode': (editedPageId === page.id)\n\t\t\t\t\t\t\t}\" class=\"ui-sidepanel-submenu-item\">\n\t\t\t\t\t\t\t\t<a :title=\"page.name\" class=\"ui-sidepanel-submenu-link\" @click.stop=\"onPageClick(page)\">\n\t\t\t\t\t\t\t\t\t<input class=\"ui-sidepanel-input\" :value=\"page.name\" v-on:keyup.enter=\"saveMenuItem($event)\" @blur=\"saveMenuItem($event)\" />\n\t\t\t\t\t\t\t\t\t<div v-if=\"lastAddedPages.includes(page.id)\" class=\"ui-sidepanel-badge-new\"></div>\n\t\t\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">{{page.name}}</div>\n\t\t\t\t\t\t\t\t\t<div class=\"ui-sidepanel-edit-btn\"><span class=\"ui-sidepanel-edit-btn-icon\" @click=\"editMenuItem($event, page);\"></span></div>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li class=\"salescenter-app-helper-nav-item salescenter-app-menu-add-page\" @click.stop=\"showAddPageActionPopup($event, true)\">\n\t\t\t\t\t\t\t\t<span class=\"salescenter-app-helper-nav-item-text salescenter-app-helper-nav-item-add\">+</span><span class=\"salescenter-app-helper-nav-item-text\">{{localize.SALESCENTER_RIGHT_ACTION_ADD}}</span>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t\t<div class=\"salescenter-app-right-side\">\n\t\t\t\t<div class=\"salescenter-app-page-header\" v-show=\"isShowPreview && !isShowStartInfo\">\n\t\t\t\t\t<div class=\"salescenter-btn-action ui-btn ui-btn-link ui-btn-dropdown ui-btn-xs\" @click=\"showActionsPopup($event)\">{{localize.SALESCENTER_RIGHT_ACTIONS_BUTTON}}</div>\n\t\t\t\t\t<div class=\"salescenter-btn-delimiter salescenter-btn-action\"></div>\n\t\t\t\t\t<div class=\"salescenter-btn-action ui-btn ui-btn-link ui-btn-xs ui-btn-icon-edit\" @click=\"editPage\">{{localize.SALESCENTER_RIGHT_ACTION_EDIT}}</div>\n\t\t\t\t</div>\n\t\t\t\t<start\n\t\t\t\t\tv-if=\"isShowStartInfo && mode !== ModeDictionary.terminalPayment\"\n\t\t\t\t\t@on-successfully-connected=\"onSuccessfullyConnected\"\n\t\t\t\t>\n\t\t\t\t</start>\n\t\t\t\t<template v-else-if=\"isFrameError && isShowPreview\">\n\t\t\t\t\t<div class=\"salescenter-app-page-content salescenter-app-lost\">\n\t\t\t\t\t\t<div class=\"salescenter-app-lost-block ui-title-1 ui-text-center ui-color-medium\">{{localize.SALESCENTER_ERROR_TITLE}}</div>\n\t\t\t\t\t\t<div v-if=\"currentPage.isFrameDenied === true\" class=\"salescenter-app-lost-helper ui-color-medium\">{{localize.SALESCENTER_RIGHT_FRAME_DENIED}}</div>\n\t\t\t\t\t\t<div v-else-if=\"currentPage.isActive !== true\" class=\"salescenter-app-lost-helper salescenter-app-not-active ui-color-medium\">{{localize.SALESCENTER_RIGHT_NOT_ACTIVE}}</div>\n\t\t\t\t\t\t<div v-else class=\"salescenter-app-lost-helper ui-color-medium\">{{localize.SALESCENTER_ERROR_TEXT}}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t\t<div v-show=\"isShowPreview && !isShowStartInfo && !isFrameError\" class=\"salescenter-app-page-content\">\n\t\t\t\t\t<template v-for=\"page in pages\">\n\t\t\t\t\t\t<iframe class=\"salescenter-app-demo\" v-show=\"currentPage && currentPage.id == page.id\" :src=\"getFrameSource(page)\" frameborder=\"0\" @error=\"onFrameError(page.id)\" @load=\"onFrameLoad(page.id)\" :key=\"page.id\"></iframe>\n\t\t\t\t\t</template>\n\t\t\t\t\t<div class=\"salescenter-app-demo-overlay\" :class=\"{\n\t\t\t\t\t\t'salescenter-app-demo-overlay-loading': this.isShowLoader\n\t\t\t\t\t}\">\n\t\t\t\t\t\t<div v-show=\"isShowLoader\" ref=\"previewLoader\"></div>\n\t\t\t\t\t\t<div v-if=\"lastModified\" class=\"salescenter-app-demo-overlay-modification\">{{lastModified}}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t    <template v-if=\"this.$root.$app.isPaymentsLimitReached\">\n\t\t\t        <div ref=\"paymentsLimit\" v-show=\"isShowPayment && !isShowStartInfo\"></div>\n\t\t\t\t</template>\n\t\t\t\t<template v-else>\n\t\t\t\t\t<chat-receiving-payment\n\t\t\t\t\t\tv-if=\"isShowPayment && !isShowStartInfo\"\n\t\t\t\t\t\t:key=\"order.basketVersion\"\n\t\t\t\t\t\t@stage-block-send-on-send=\"send($event)\"\n\t\t\t\t\t\t@stage-block-send-on-send-compilation-link-to-facebook=\"sendCompilationLinkToFacebook($event)\"\n\t\t\t\t\t/>\n\t\t        </template>\n\t\t\t</div>\n\t\t\t<div class=\"ui-button-panel-wrapper salescenter-button-panel\" ref=\"buttonsPanel\">\n\t\t\t\t<div class=\"ui-button-panel\">\n\t\t\t\t\t<button :class=\"{'ui-btn-disabled': !this.isAllowedSubmitButton}\" class=\"ui-btn ui-btn-md ui-btn-success\" @click=\"send($event)\">{{sendButtonLabel}}</button>\n\t\t\t\t\t<button\n\t\t\t\t\t\tv-if=\"showSubmitCompilationLinkToFacebookButton\"\n\t\t\t\t\t\t:class=\"{'ui-btn-disabled': !this.isAllowedSubmitButton}\"\n\t\t\t\t\t\tclass=\"ui-btn ui-btn-md ui-btn-light-border\"\n\t\t\t\t\t\t@click=\"sendCompilationLinkToFacebook($event)\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{localize.SALESCENTER_SEND_COMPILATION_LINK_TO_FACEBOOK}}\n\t\t\t\t\t</button>\n\t\t\t\t\t<button class=\"ui-btn ui-btn-md ui-btn-link\" @click=\"close\">{{localize.SALESCENTER_CANCEL}}</button>\n\t\t\t\t\t<button v-if=\"isShowPayment && !isShowStartInfo && !this.$root.$app.isPaymentsLimitReached && this.$root.$app.isWithOrdersMode\" class=\"ui-btn ui-btn-md ui-btn-link btn-send-crm\" @click=\"send($event, 'y')\">{{localize.SALESCENTER_SAVE_ORDER}}</button>\n\t\t\t\t</div>\n\t\t\t\t<div v-if=\"this.order.errors.length > 0\" ref=\"errorBlock\"></div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n}\n","import { Loc, ajax as Ajax } from 'main.core';\nimport { Block } from 'salescenter.component.stage-block';\nimport { StageMixin } from './stage-mixin';\nimport { Error, SenderList, UserAvatar, MessageEdit, MessageView, MessageEditor, MessageControl } from 'salescenter.component.stage-block.sms-message';\nimport { Manager } from \"salescenter.manager\";\nimport { SenderConfig } from \"salescenter.lib\";\nimport {UI} from \"ui.notification\";\n\nconst TYPE_PHONE = 'phone';\nconst TYPE_SENDER = 'sender';\n\nconst SmsMessage = {\n\tprops: {\n\t\tinitSenders: {\n\t\t\ttype: Array,\n\t\t\trequired: true\n\t\t},\n\t\tinitCurrentSenderCode: {\n\t\t\ttype: String,\n\t\t\trequired: false\n\t\t},\n\t\tinitPushedToUseBitrix24Notifications: {\n\t\t\ttype: String,\n\t\t\trequired: false\n\t\t},\n\t\tstatus: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\tcounter: {\n\t\t\ttype: Number,\n\t\t\trequired: true\n\t\t},\n\t\tmanager: {\n\t\t\ttype: Object,\n\t\t\trequired: true\n\t\t},\n\t\tselectedSmsSender: {\n\t\t\ttype: String,\n\t\t\trequired: false\n\t\t},\n\t\tphone: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\tcontactEditorUrl: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\townerTypeId: {\n\t\t\ttype: Number,\n\t\t\trequired: true\n\t\t},\n\t\townerId: {\n\t\t\ttype: Number,\n\t\t\trequired: true\n\t\t},\n\t\ttitleTemplate: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\tshowHint: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true\n\t\t},\n\t\teditorTemplate: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\teditorUrl: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\tselectedMode: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t}\n\t},\n\tmixins: [StageMixin],\n\tcomponents: {\n\t\t'stage-block-item':\tBlock,\n\t\t'sms-error-block': Error,\n\t\t'sms-sender-list-block': SenderList,\n\t\t'sms-user-avatar-block': UserAvatar,\n\t\t'sms-message-edit-block': MessageEdit,\n\t\t'sms-message-view-block': MessageView,\n\t\t'sms-message-editor-block': MessageEditor,\n\t\t'sms-message-control-block': MessageControl,\n\t},\n\tdata()\n\t{\n\t\treturn {\n\t\t\tcontactPhone: this.phone,\n\t\t\tcurrentSenderCode: null,\n\t\t\tsenders: [],\n\t\t\tpushedToUseBitrix24Notifications: null,\n\t\t\tsmsSenderListComponentKey: 0,\n\t\t}\n\t},\n\tcomputed: {\n\t\tconfigForBlock()\n\t\t{\n\t\t\treturn {\n\t\t\t\tcounter: this.counter,\n\t\t\t\tchecked: this.counterCheckedMixin,\n\t\t\t\tshowHint: true,\n\t\t\t\thintClassModifier: 'salescenter-app-payment-by-sms-item-title-info--link-gray',\n\t\t\t}\n\t\t},\n\t\teditor()\n\t\t{\n\t\t\treturn {\n\t\t\t\ttemplate: this.editorTemplate,\n\t\t\t\turl: this.editorUrl\n\t\t\t};\n\t\t},\n\t\tcurrentSender()\n\t\t{\n\t\t\treturn this.senders.find(sender => sender.code === this.currentSenderCode);\n\t\t},\n\t\ttitle()\n\t\t{\n\t\t\treturn this.titleTemplate.replace('#PHONE#', this.contactPhone);\n\t\t},\n\t\terrors()\n\t\t{\n\t\t\tlet result = [];\n\n\t\t\tlet bitrix24ConnectUrlError;\n\n\t\t\tif (!this.currentSender)\n\t\t\t{\n\t\t\t\tfor (let sender of this.senders)\n\t\t\t\t{\n\t\t\t\t\tif (!SenderConfig.needConfigure(sender))\n\t\t\t\t\t{\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tresult.push({\n\t\t\t\t\t\ttext: this.getConnectionErrorText(sender),\n\t\t\t\t\t\tfixer: SenderConfig.openSliderFreeMessages(sender.connectUrl),\n\t\t\t\t\t\tfixText: this.getConnectionErrorFixText(sender),\n\t\t\t\t\t\ttype: TYPE_SENDER\n\t\t\t\t\t});\n\n\t\t\t\t\tif (sender.code === SenderConfig.BITRIX24)\n\t\t\t\t\t{\n\t\t\t\t\t\tbitrix24ConnectUrlError = sender.connectUrl;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (!this.currentSender.isAvailable)\n\t\t\t\t{\n\t\t\t\t\tresult.push({\n\t\t\t\t\t\ttext: Loc.getMessage('SALESCENTER_SEND_ORDER_BY_SMS_' + this.currentSender.code.toUpperCase() + '_NOT_AVAILABLE'),\n\t\t\t\t\t\ttype: TYPE_SENDER\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tif (this.currentSender.isConnected)\n\t\t\t\t\t{\n\t\t\t\t\t\tresult = this.currentSender.usageErrors.map(error => ({ text: error, type: TYPE_SENDER }))\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tresult.push({\n\t\t\t\t\t\t\ttext: this.getConnectionErrorText(this.currentSender),\n\t\t\t\t\t\t\tfixer: this.getFixer(this.currentSender.connectUrl),\n\t\t\t\t\t\t\tfixText: this.getConnectionErrorFixText(this.currentSender),\n\t\t\t\t\t\t\ttype: TYPE_SENDER\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif (this.currentSender.code === SenderConfig.BITRIX24)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tbitrix24ConnectUrlError = this.currentSender.connectUrl;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!this.contactPhone)\n\t\t\t{\n\t\t\t\tif(this.contactEditorUrl.length > 0)\n\t\t\t\t{\n\t\t\t\t\tresult.push({\n\t\t\t\t\t\ttext: Loc.getMessage('SALESCENTER_SEND_ORDER_BY_SMS_SENDER_ALERT_PHONE_EMPTY'),\n\t\t\t\t\t\tfixer: this.getFixer(this.contactEditorUrl),\n\t\t\t\t\t\tfixText: Loc.getMessage('SALESCENTER_SEND_ORDER_BY_SMS_SENDER_ALERT_PHONE_EMPTY_SETTINGS'),\n\t\t\t\t\t\ttype: TYPE_PHONE\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tresult.push({\n\t\t\t\t\t\ttext: Loc.getMessage('SALESCENTER_SEND_ORDER_BY_SMS_SENDER_ALERT_PHONE_EMPTY'),\n\t\t\t\t\t\ttype: TYPE_PHONE\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif (this.pushedToUseBitrix24Notifications === 'N' && bitrix24ConnectUrlError)\n\t\t\t{\n\t\t\t\tthis.getFixer(bitrix24ConnectUrlError)().then(() => this.handleErrorFix());\n\t\t\t\tBX.userOptions.save('salescenter', 'payment_sender_options', 'pushed_to_use_bitrix24_notifications', 'Y');\n\t\t\t\tthis.pushedToUseBitrix24Notifications = 'Y';\n\t\t\t}\n\n\t\t\treturn result;\n\t\t}\n\t},\n\tcreated() {\n\t\tthis.initialize(this.initCurrentSenderCode, this.initSenders, this.initPushedToUseBitrix24Notifications);\n\t},\n\tmethods: {\n\t\tonConfigureContactPhone()\n\t\t{\n\t\t\tthis.$emit('stage-block-sms-message-on-change-contact-phone');\n\t\t},\n\t\tgetConnectionErrorText(sender)\n\t\t{\n\t\t\tconst messageCode = 'SALESCENTER_SEND_ORDER_BY_SMS_' + sender.code.toUpperCase() + '_NOT_CONNECTED_WARNING';\n\t\t\tconst fallback = 'SALESCENTER_SEND_ORDER_BY_SMS_' + sender.code.toUpperCase() + '_NOT_CONNECTED';\n\n\t\t\treturn Loc.getMessage(messageCode) || Loc.getMessage(fallback);\n\t\t},\n\t\tgetConnectionErrorFixText(sender)\n\t\t{\n\t\t\tconst messageCode = 'SALESCENTER_SEND_ORDER_BY_SMS_' + sender.code.toUpperCase() + '_NOT_CONNECTED_FIX';\n\t\t\tconst fallback = 'SALESCENTER_PRODUCT_DISCOUNT_EDIT_PAGE_URL_TITLE';\n\n\t\t\treturn Loc.getMessage(messageCode) || Loc.getMessage(fallback);\n\t\t},\n\t\tgetFixer(fixUrl)\n\t\t{\n\t\t\treturn () => {\n\t\t\t\tif (typeof fixUrl === 'string')\n\t\t\t\t{\n\t\t\t\t\treturn Manager.openSlider(fixUrl, {\n\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\tonLoad: function(event) {\n\t\t\t\t\t\t\t\tconst slider = event.getSlider();\n\t\t\t\t\t\t\t\tconst sliderBx = slider.getFrameWindow().BX;\n\t\t\t\t\t\t\t\tsliderBx.addCustomEvent(\"BX.Crm.EntityEditor:onNothingChanged\", () => slider.close());\n\t\t\t\t\t\t\t\tsliderBx.addCustomEvent(\"BX.Crm.EntityEditor:onCancel\", () => slider.close());\n\t\t\t\t\t\t\t\tsliderBx.addCustomEvent(\"onCrmEntityUpdate\", () => slider.close());\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tif (typeof fixUrl === 'object' && fixUrl !== null)\n\t\t\t\t{\n\t\t\t\t\tif (fixUrl.type === 'ui_helper')\n\t\t\t\t\t{\n\t\t\t\t\t\treturn BX.loadExt('ui.info-helper').then(() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tBX.UI.InfoHelper.show(fixUrl.value);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn Promise.resolve();\n\t\t\t};\n\t\t},\n\t\tonItemHint(e)\n\t\t{\n\t\t\tBX.Salescenter.Manager.openSlider(this.$root.$app.options.urlSettingsCompanyContacts, {width: 1200} );\n\t\t},\n\t\tinitialize(currentSenderCode, senders, pushedToUseBitrix24Notifications)\n\t\t{\n\t\t\tthis.currentSenderCode = currentSenderCode;\n\t\t\tthis.senders = senders;\n\t\t\tthis.pushedToUseBitrix24Notifications = pushedToUseBitrix24Notifications;\n\n\t\t\tthis.$root.$app.options.currentSenderCode = this.currentSenderCode;\n\t\t\tthis.$root.$app.options.senders = this.senders;\n\t\t\tthis.$root.$app.options.pushedToUseBitrix24Notifications = this.pushedToUseBitrix24Notifications;\n\n\t\t\tthis.$store.commit('orderCreation/setIsSenderSelected', this.currentSenderCode !== '');\n\t\t},\n\t\thandleOnSmsSenderSelected(value)\n\t\t{\n\t\t\tthis.$emit('stage-block-sms-send-on-change-provider', value);\n\t\t},\n\t\thandleErrorFix()\n\t\t{\n\t\t\tAjax.runComponentAction(\"bitrix:salescenter.app\", \"refreshSenderSettings\", {\n\t\t\t\tmode: \"class\"\n\t\t\t})\n\t\t\t\t.then((resolve)=> {\n\t\t\t\t\tif (BX.type.isObject(resolve.data) && Object.values(resolve.data).length > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.initialize(\n\t\t\t\t\t\t\tresolve.data.currentSenderCode,\n\t\t\t\t\t\t\tresolve.data.senders,\n\t\t\t\t\t\t\tresolve.data.pushedToUseBitrix24Notifications,\n\t\t\t\t\t\t);\n\t\t\t\t\t\tthis.smsSenderListComponentKey += 1;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t},\n\t\thandlePhoneErrorFix()\n\t\t{\n\t\t\tAjax.runComponentAction(\"bitrix:salescenter.app\", \"refreshContactPhone\", {\n\t\t\t\tmode: \"class\",\n\t\t\t\tdata: {\n\t\t\t\t\tfields:{\n\t\t\t\t\t\townerId: this.ownerId,\n\t\t\t\t\t\townerTypeId: this.ownerTypeId,\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t})\n\t\t\t.then((resolve)=> {\n\t\t\t\tif (BX.type.isObject(resolve.data) && Object.values(resolve.data).length > 0)\n\t\t\t\t{\n\t\t\t\t\tif(this.contactPhone != resolve.data.contactPhone)\n\t\t\t\t\t{\n\t\t\t\t\t\tUI.Notification.Center.notify({\n\t\t\t\t\t\t\tcontent: Loc.getMessage('SALESCENTER_SEND_ORDER_BY_SMS_SENDER_PHONE_CHANGE', {\n\t\t\t\t\t\t\t\t'#TITLE#': resolve.data.title\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.contactPhone = resolve.data.contactPhone;\n\t\t\t\t\tthis.onConfigureContactPhone();\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\thendleSmsErrorBlock(event)\n\t\t{\n\t\t\tif(event.data.type === TYPE_PHONE)\n\t\t\t{\n\t\t\t\tthis.handlePhoneErrorFix()\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.handleErrorFix()\n\t\t\t}\n\t\t},\n\t\topenBitrix24NotificationsHelp(event)\n\t\t{\n\t\t\tBX.Salescenter.Manager.openBitrix24NotificationsHelp(event);\n\t\t},\n\t\topenBitrix24NotificationsWorks(event)\n\t\t{\n\t\t\tBX.Salescenter.Manager.openBitrix24NotificationsWorks(event);\n\t\t},\n\t},\n\t//language=Vue\n\ttemplate: `\n\t\t<stage-block-item\t\t\t\n\t\t\t:config=\"configForBlock\"\n\t\t\t:class=\"statusClassMixin\"\n\t\t\tv-on:on-item-hint=\"onItemHint\"\n\t\t>\n\t\t\t<template v-slot:block-title-title>{{title}}</template>\n\t\t\t<template\n\t\t\t\tv-if=\"showHint\"\n\t\t\t\tv-slot:block-hint-title\n\t\t\t>\n\t\t\t\t${Loc.getMessage('SALESCENTER_LEFT_PAYMENT_COMPANY_CONTACTS_V3')}\n\t\t\t</template>\n\t\t\t<template v-slot:block-container>\n\t\t\t\t<div :class=\"containerClassMixin\" class=\"salescenter-app-payment-by-sms-item-container-offtop\">\n\t\t\t\t\t<sms-error-block\n\t\t\t\t\t\tv-for=\"(error, index) in errors\"\n\t\t\t\t\t\tv-bind:key=\"index\"\n\t\t\t\t\t\tv-on:on-configure=\"hendleSmsErrorBlock($event)\"\n\t\t\t\t\t\t:error=\"error\"\n\t\t\t\t\t>\n\t\t\t\t\t</sms-error-block>\n\t\t\t\t\t\n\t\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container-sms\">\n\t\t\t\t\t\t<sms-user-avatar-block :manager=\"manager\"/>\n\t\t\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container-sms-content\">\n\t\t\t\t\t\t\t<div v-if=\"currentSenderCode === 'bitrix24'\" class=\"salescenter-app-payment-by-sms-item-container-sms-content\">\n\t\t\t\t\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container-sms-content-message\">\n\t\t\t\t\t\t\t\t\t<div contenteditable=\"false\" class=\"salescenter-app-payment-by-sms-item-container-sms-content-message-text\">\n\t\t\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_TEMPLATE_BASED_MESSAGE_WILL_BE_SENT')}\n\t\t\t\t\t\t\t\t\t\t<a @click.stop.prevent=\"openBitrix24NotificationsHelp(event)\" href=\"#\">\n\t\t\t\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_MORE_DETAILS')}\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<sms-message-editor-block v-else :editor=\"editor\" :selectedMode=\"selectedMode\"/>\n\t\t\t\t\t\t\t<template v-if=\"currentSenderCode === 'bitrix24'\">\n\t\t\t\t\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container-sms-content-info\">\n\t\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_SEND_ORDER_VIA_BITRIX24')}\n\t\t\t\t\t\t\t\t\t<span @click=\"openBitrix24NotificationsWorks(event)\">\n\t\t\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_PRODUCT_SET_BLOCK_TITLE_SHORT')}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t<template v-else-if=\"currentSenderCode === 'sms_provider'\">\n\t\t\t\t\t\t\t\t<sms-sender-list-block\n\t\t\t\t\t\t\t\t\t:key=\"smsSenderListComponentKey\"\n\t\t\t\t\t\t\t\t\t:list=\"currentSender.smsSenders\"\n\t\t\t\t\t\t\t\t\t:initSelected=\"selectedSmsSender\"\n\t\t\t\t\t\t\t\t\t:settingUrl=\"currentSender.connectUrl\"\n\t\t\t\t\t\t\t\t\tv-on:on-configure=\"handleErrorFix\"\n\t\t\t\t\t\t\t\t\tv-on:on-selected=\"handleOnSmsSenderSelected\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<template v-slot:sms-sender-list-text-send-from>\n\t\t\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_SEND_ORDER_BY_SMS_SENDER')}\n\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t</sms-sender-list-block>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</stage-block-item>\n\t`\n};\nexport {\n\tSmsMessage\n}\n","import { ajax as Ajax, Loc } from 'main.core';\nimport {StatusTypes as Status} from 'salescenter.component.stage-block';\nimport * as TimeLineItem from 'salescenter.timeline';\nimport {UI} from 'ui.notification';\nimport {MixinTemplatesType} from '../templates-type-mixin';\nimport * as Tile from 'salescenter.tile';\nimport Send from './stage-blocks/send';\nimport {Cashbox} from '../stage-blocks/cashbox';\nimport Product from '../stage-blocks/product';\nimport {DeliveryVuex} from '../stage-blocks/delivery-vuex';\nimport {PaySystem} from '../stage-blocks/paysystem';\nimport {SmsMessage} from '../stage-blocks/sms-message';\nimport {Automation} from '../stage-blocks/automation';\nimport {StageMixin} from '../stage-blocks/stage-mixin';\nimport {TimeLine} from '../stage-blocks/timeline';\n\nexport default {\n\tcomponents: {\n\t\t'send-block': Send,\n\t\t'cashbox-block': Cashbox,\n\t\t'product-block': Product,\n\t\t'delivery-block': DeliveryVuex,\n\t\t'paysystem-block': PaySystem,\n\t\t'automation-block': Automation,\n\t\t'sms-message-block': SmsMessage,\n\t\t'timeline-block': TimeLine,\n\t},\n\tprops: {\n\t\tsendAllowed: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata()\n\t{\n\t\tconst stages = {\n\t\t\tmessage: {\n\t\t\t\tinitSenders: this.$root.$app.options.senders,\n\t\t\t\tinitCurrentSenderCode: this.$root.$app.options.currentSenderCode,\n\t\t\t\tinitPushedToUseBitrix24Notifications: this.$root.$app.options.pushedToUseBitrix24Notifications,\n\t\t\t\tstatus: Status.complete,\n\t\t\t\tselectedSmsSender: this.$root.$app.sendingMethodDesc.provider,\n\t\t\t\tmanager: this.$root.$app.options.entityResponsible,\n\t\t\t\tphone: this.$root.$app.options.contactPhone,\n\t\t\t\townerId: this.$root.$app.options.ownerId,\n\t\t\t\townerTypeId: this.$root.$app.options.ownerTypeId,\n\t\t\t\tcontactEditorUrl: this.$root.$app.options.contactEditorUrl,\n\t\t\t\ttitleTemplate: this.$root.$app.sendingMethodDesc.sent\n\t\t\t\t\t? Loc.getMessage('SALESCENTER_APP_CONTACT_BLOCK_TITLE_MESSAGE_2_PAST_TIME')\n\t\t\t\t\t: Loc.getMessage('SALESCENTER_APP_CONTACT_BLOCK_TITLE_MESSAGE_2'),\n\t\t\t\tshowHint: this.$root.$app.options.templateMode !== 'view',\n\t\t\t\teditorTemplate: this.$root.$app.sendingMethodDesc.text,\n\t\t\t\teditorUrl: this.$root.$app.orderPublicUrl,\n\t\t\t\tselectedMode: 'payment',\n\t\t\t},\n\t\t\tproduct: {\n\t\t\t\tstatus: this.$root.$app.options.basket && this.$root.$app.options.basket.length > 0\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.current,\n\t\t\t\ttitle: this.$root.$app.options.templateMode === 'view'\n\t\t\t\t\t? Loc.getMessage('SALESCENTER_PRODUCT_BLOCK_TITLE_PAYMENT_VIEW')\n\t\t\t\t\t: Loc.getMessage('SALESCENTER_PRODUCT_BLOCK_TITLE_SHORT'),\n\t\t\t\thintTitle: this.$root.$app.options.templateMode === 'view'\n\t\t\t\t\t? ''\n\t\t\t\t\t: Loc.getMessage('SALESCENTER_PRODUCT_SET_BLOCK_TITLE_SHORT'),\n\t\t\t},\n\t\t\tpaysystem: {\n\t\t\t\tstatus: this.$root.$app.options.paySystemList.isSet\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled,\n\t\t\t\ttiles: this.getTileCollection(this.$root.$app.options.paySystemList.items),\n\t\t\t\tinstalled: this.$root.$app.options.paySystemList.isSet,\n\t\t\t\ttitleItems: this.getTitleItems(this.$root.$app.options.paySystemList.items),\n\t\t\t\tinitialCollapseState: this.$root.$app.options.isPaySystemCollapsed ? this.$root.$app.options.isPaySystemCollapsed === 'Y' : this.$root.$app.options.paySystemList.isSet,\n\t\t\t},\n\t\t\tcashbox: {},\n\t\t\tdelivery: {\n\t\t\t\tstatus: this.$root.$app.options.deliveryList.isInstalled\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled,\n\t\t\t\ttiles: this.getTileCollection(this.$root.$app.options.deliveryList.items),\n\t\t\t\tinstalled: this.$root.$app.options.deliveryList.isInstalled,\n\t\t\t\tinitialCollapseState: this.$root.$app.options.isDeliveryCollapsed ? this.$root.$app.options.isDeliveryCollapsed === 'Y' : this.$root.$app.options.deliveryList.isInstalled,\n\t\t\t},\n\t\t\tautomation: {},\n\t\t};\n\n\t\tif (this.$root.$app.options.cashboxList.hasOwnProperty('items'))\n\t\t{\n\t\t\tstages.cashbox = {\n\t\t\t\tstatus: this.$root.$app.options.cashboxList.isSet\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled,\n\t\t\t\ttiles: this.getTileCollection(this.$root.$app.options.cashboxList.items),\n\t\t\t\tinstalled: this.$root.$app.options.cashboxList.isSet,\n\t\t\t\ttitleItems: this.getTitleItems(this.$root.$app.options.cashboxList.items),\n\t\t\t\tinitialCollapseState: this.$root.$app.options.isCashboxCollapsed ? this.$root.$app.options.isCashboxCollapsed === 'Y' : this.$root.$app.options.cashboxList.isSet,\n\t\t\t};\n\t\t}\n\n\t\tif (this.$root.$app.options.isAutomationAvailable)\n\t\t{\n\t\t\tstages.automation = {\n\t\t\t\tstatus: Status.complete,\n\t\t\t\tstageOnOrderPaid: this.$root.$app.options.stageOnOrderPaid,\n\t\t\t\tstageOnDeliveryFinished: this.$root.$app.options.stageOnDeliveryFinished,\n\t\t\t\titems: this.$root.$app.options.entityStageList,\n\t\t\t\tinitialCollapseState: this.$root.$app.options.isAutomationCollapsed ? this.$root.$app.options.isAutomationCollapsed === 'Y' : false,\n\t\t\t};\n\t\t}\n\n\t\tif (this.$root.$app.options.hasOwnProperty('timeline'))\n\t\t{\n\t\t\tstages.timeline = {\n\t\t\t\titems: this.getTimelineCollection(this.$root.$app.options.timeline),\n\t\t\t};\n\t\t}\n\n\t\tif (this.$root.$app.options.paySystemList.groups)\n\t\t{\n\t\t\tstages.paysystem.groups = this.getTileGroupsCollection(\n\t\t\t\tthis.$root.$app.options.paySystemList.groups,\n\t\t\t\tstages.paysystem.tiles,\n\t\t\t);\n\t\t}\n\n\t\treturn {\n\t\t\tstages,\n\t\t};\n\t},\n\tmixins: [\n\t\tStageMixin,\n\t\tMixinTemplatesType,\n\t],\n\tcomputed: {\n\t\thasStageTimeLine()\n\t\t{\n\t\t\treturn this.stages.timeline.hasOwnProperty('items') && this.stages.timeline.items.length > 0;\n\t\t},\n\t\thasStageAutomation()\n\t\t{\n\t\t\treturn this.stages.automation.hasOwnProperty('items');\n\t\t},\n\t\thasStageCashBox()\n\t\t{\n\t\t\treturn this.stages.cashbox.hasOwnProperty('tiles');\n\t\t},\n\t\tsubmitButtonLabel()\n\t\t{\n\t\t\treturn this.editable ? Loc.getMessage('SALESCENTER_SEND') : Loc.getMessage('SALESCENTER_RESEND');\n\t\t},\n\t\tisHideDeliveryStage()\n\t\t{\n\t\t\treturn this.isViewWithoutDelivery();\n\t\t},\n\t},\n\tmethods: {\n\t\tinitCounter()\n\t\t{\n\t\t\tthis.counter = 1;\n\t\t},\n\t\tgetTimelineCollection(items)\n\t\t{\n\t\t\tconst list = [];\n\n\t\t\tObject.values(items).forEach(\n\t\t\t\toptions => list.push(TimeLineItem.Factory.create(options)));\n\n\t\t\treturn list;\n\t\t},\n\t\tgetTileCollection(items)\n\t\t{\n\t\t\tconst tiles = [];\n\t\t\tObject.values(items).forEach(\n\t\t\t\toptions => tiles.push(Tile.Factory.create(options)));\n\n\t\t\treturn tiles;\n\t\t},\n\t\tgetTileGroupsCollection(groups, tiles)\n\t\t{\n\t\t\tconst ret = [];\n\n\t\t\tif (Array.isArray(groups))\n\t\t\t{\n\t\t\t\tObject.values(groups).forEach((item) => {\n\t\t\t\t\tconst group = new Tile.Group(item);\n\t\t\t\t\tgroup.fillTiles(tiles);\n\t\t\t\t\tret.push(group);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn ret;\n\t\t},\n\t\tgetTitleItems(items)\n\t\t{\n\t\t\tconst result = [];\n\t\t\titems.forEach((item) => {\n\t\t\t\tif (![Tile.More.type(), Tile.Offer.type()].includes(item.type))\n\t\t\t\t{\n\t\t\t\t\tresult.push(item);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn result;\n\t\t},\n\t\tstageRefresh(e, type)\n\t\t{\n\t\t\tAjax.runComponentAction(\n\t\t\t\t'bitrix:salescenter.app',\n\t\t\t\t'getAjaxData',\n\t\t\t\t{\n\t\t\t\t\tmode: 'class',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\ttype,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t).then(\n\t\t\t\t(response) => {\n\t\t\t\t\tif (response.data)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.refreshTilesByType(response.data, type);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t() => {\n\t\t\t\t\tUI.Notification.Center.notify({\n\t\t\t\t\t\tcontent: Loc.getMessage('SALESCENTER_DATA_UPDATE_ERROR'),\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t);\n\t\t},\n\t\trefreshTilesByType(data, type)\n\t\t{\n\t\t\tif (type === 'PAY_SYSTEM')\n\t\t\t{\n\t\t\t\tthis.stages.paysystem.status = data.isSet\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled;\n\t\t\t\tthis.stages.paysystem.tiles = this.getTileCollection(data.items);\n\t\t\t\tthis.stages.paysystem.groups = this.getTileGroupsCollection(data.groups, this.stages.paysystem.tiles);\n\t\t\t\tthis.stages.paysystem.installed = data.isSet;\n\t\t\t\tthis.stages.paysystem.titleItems = this.getTitleItems(data.items);\n\t\t\t}\n\t\t\telse if (type === 'CASHBOX')\n\t\t\t{\n\t\t\t\tthis.stages.cashbox.status = data.isSet\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled;\n\t\t\t\tthis.stages.cashbox.tiles = this.getTileCollection(data.items);\n\t\t\t\tthis.stages.cashbox.installed = data.isSet;\n\t\t\t\tthis.stages.cashbox.titleItems = this.getTitleItems(data.items);\n\t\t\t}\n\t\t\telse if (type === 'DELIVERY')\n\t\t\t{\n\t\t\t\tthis.stages.delivery.status = data.isInstalled\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled;\n\t\t\t\tthis.stages.delivery.tiles = this.getTileCollection(data.items);\n\t\t\t\tthis.stages.delivery.installed = data.isInstalled;\n\t\t\t}\n\t\t},\n\t\tonSend(event)\n\t\t{\n\t\t\tthis.$emit('stage-block-send-on-send', event)\n\t\t},\n\t\tchangeProvider(value)\n\t\t{\n\t\t\tthis.$root.$app.sendingMethodDesc.provider = value;\n\t\t\tBX.userOptions.save('salescenter', 'payment_sms_provider_options', 'latest_selected_provider', value);\n\t\t},\n\t\tchangeContactPhone(event)\n\t\t{\n\t\t\tthis.$emit('stage-block-on-reload', event)\n\t\t},\n\t\tsaveCollapsedOption(type, value)\n\t\t{\n\t\t\tBX.userOptions.save('salescenter', 'add_payment_collapse_options', type, value);\n\t\t},\n\t\tonProductFormModeChange()\n\t\t{\n\t\t\tconst isCompilationMode = this.$store.getters['orderCreation/isCompilationMode'];\n\t\t\tif (isCompilationMode)\n\t\t\t{\n\t\t\t\tthis.stages.delivery.status = Status.disabled;\n\n\t\t\t\tthis.stages.message.selectedMode = 'compilation';\n\t\t\t\tthis.$root.$app.sendingMethodDesc.text = this.$root.$app.sendingMethodDesc.text_modes.compilation;\n\t\t\t\tthis.stages.message.editorTemplate = this.$root.$app.sendingMethodDesc.text_modes.compilation;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.stages.delivery.status = this.$root.$app.options.deliveryList.isInstalled\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled;\n\n\t\t\t\tthis.stages.message.selectedMode = 'payment';\n\t\t\t\tthis.$root.$app.sendingMethodDesc.text = this.$root.$app.sendingMethodDesc.text_modes.payment;\n\t\t\t\tthis.stages.message.editorTemplate = this.$root.$app.sendingMethodDesc.text_modes.payment;\n\t\t\t}\n\t\t},\n\t\tisViewWithoutDelivery()\n\t\t{\n\t\t\treturn (\n\t\t\t\tthis.$root.$app.options.templateMode === 'view'\n\t\t\t\t&& parseInt(this.$root.$app.options.shipmentId) <= 0\n\t\t\t);\n\t\t}\n\t},\n\tcreated()\n\t{\n\t\tthis.initCounter();\n\t},\n\tbeforeUpdate()\n\t{\n\t\tthis.initCounter();\n\t},\n\t//language=Vue\n\ttemplate: `\n\t\t<div>\n\t\t\t<sms-message-block\n\t\t\t\t@stage-block-sms-send-on-change-provider=\"changeProvider\"\n\t\t\t\t@stage-block-sms-message-on-change-contact-phone=\"changeContactPhone\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.message.status\"\n\t\t\t\t:initSenders=\"stages.message.initSenders\"\n\t\t\t\t:initCurrentSenderCode=\"stages.message.initCurrentSenderCode\"\n\t\t\t\t:initPushedToUseBitrix24Notifications=\"stages.message.initPushedToUseBitrix24Notifications\"\n\t\t\t\t:selectedSmsSender=\"stages.message.selectedSmsSender\"\n\t\t\t\t:manager=\"stages.message.manager\"\n\t\t\t\t:phone=\"stages.message.phone\"\n\t\t\t\t:contactEditorUrl=\"stages.message.contactEditorUrl\"\n\t\t\t\t:ownerId=\"stages.message.ownerId\"\n\t\t\t\t:ownerTypeId=\"stages.message.ownerTypeId\"\n\t\t\t\t:titleTemplate=\"stages.message.titleTemplate\"\n\t\t\t\t:showHint=\"stages.message.showHint\"\n\t\t\t\t:editorTemplate=\"stages.message.editorTemplate\"\n\t\t\t\t:editorUrl=\"stages.message.editorUrl\"\n\t\t\t\t:selectedMode=\"stages.message.selectedMode\"\n\t\t\t/>\n\t\t\t<product-block\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.product.status\"\n\t\t\t\t:title=\"stages.product.title\"\n\t\t\t\t:hintTitle=\"stages.product.hintTitle\"\n\t\t\t\t@on-product-form-mode-change=\"onProductFormModeChange\"\n\t\t\t/>\n\t\t\t<paysystem-block\n\t\t\t\tv-if=\"editable\"\n\t\t\t\t@on-stage-tile-collection-slider-close=\"stageRefresh($event, 'PAY_SYSTEM')\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.paysystem.status\"\n\t\t\t\t:tiles=\"stages.paysystem.tiles\"\n\t\t\t\t:installed=\"stages.paysystem.installed\"\n\t\t\t\t:titleItems=\"stages.paysystem.titleItems\"\n\t\t\t\t:initialCollapseState=\"stages.paysystem.initialCollapseState\"\n\t\t\t\t@on-save-collapsed-option=\"saveCollapsedOption\"\n\t\t\t/>\n\t\t\t<cashbox-block\n\t\t\t\tv-if=\"editable && hasStageCashBox\"\n\t\t\t\t@on-stage-tile-collection-slider-close=\"stageRefresh($event, 'CASHBOX')\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.cashbox.status\"\n\t\t\t\t:tiles=\"stages.cashbox.tiles\"\n\t\t\t\t:installed=\"stages.cashbox.installed\"\n\t\t\t\t:titleItems=\"stages.cashbox.titleItems\"\n\t\t\t\t:initialCollapseState=\"stages.cashbox.initialCollapseState\"\n\t\t\t\t@on-save-collapsed-option=\"saveCollapsedOption\"\n\t\t\t/>\n\t\t\t<delivery-block\n\t\t\t\tv-if=\"!isHideDeliveryStage\"\n\t\t\t\t@on-stage-tile-collection-slider-close=\"stageRefresh($event, 'DELIVERY')\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.delivery.status\"\n\t\t\t\t:tiles=\"stages.delivery.tiles\"\n\t\t\t\t:installed=\"stages.delivery.installed\"\n\t\t\t\t:isCollapsible=\"true\"\n\t\t\t\t:initialCollapseState=\"stages.delivery.initialCollapseState\"\n\t\t\t\t@on-save-collapsed-option=\"saveCollapsedOption\"\n\t\t\t/>\n\t\t\t<automation-block\n\t\t\t\tv-if=\"editable && hasStageAutomation\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.automation.status\"\n\t\t\t\t:stageOnOrderPaid=\"stages.automation.stageOnOrderPaid\"\n\t\t\t\t:stageOnDeliveryFinished=\"stages.automation.stageOnDeliveryFinished\"\n\t\t\t\t:items=\"stages.automation.items\"\n\t\t\t\t:initialCollapseState=\"stages.automation.initialCollapseState\"\n\t\t\t\t:isDeliveryStageVisible=\"stages.delivery.installed\"\n\t\t\t\t@on-save-collapsed-option=\"saveCollapsedOption\"\n\t\t\t/>\n\t\t\t<send-block\n\t\t\t\t@on-submit=\"onSend\"\n\t\t\t\t:buttonEnabled=\"sendAllowed\"\n\t\t\t\t:showWhatClientSeesControl=\"!editable\"\n\t\t\t\t:buttonLabel=\"submitButtonLabel\"\n\t\t\t/>\n\t\t\t<timeline-block\n\t\t\t\tv-if=\"hasStageTimeLine\"\n\t\t\t\t:timelineItems=\"stages.timeline.items\"\n\t\t\t/>\n\t\t</div>\n\t`\n};\n","import {ajax as Ajax, Loc} from 'main.core';\nimport {StatusTypes as Status} from 'salescenter.component.stage-block';\nimport * as TimeLineItem from 'salescenter.timeline';\nimport {UI} from 'ui.notification';\nimport {MixinTemplatesType} from '../templates-type-mixin';\nimport * as Tile from 'salescenter.tile';\nimport Send from '../deal-receiving-payment/stage-blocks/send';\nimport {Cashbox} from '../stage-blocks/cashbox';\nimport Product from '../stage-blocks/product';\nimport {PaySystem} from '../stage-blocks/paysystem';\nimport {SmsMessage} from '../stage-blocks/sms-message';\nimport {Automation} from '../stage-blocks/automation';\nimport {StageMixin} from '../stage-blocks/stage-mixin';\nimport {TimeLine} from '../stage-blocks/timeline';\nimport {DocumentSelector} from '../stage-blocks/document-selector';\n\nexport default {\n\tcomponents: {\n\t\t'send-block': Send,\n\t\t'cashbox-block': Cashbox,\n\t\t'product-block': Product,\n\t\t'paysystem-block': PaySystem,\n\t\t'automation-block': Automation,\n\t\t'sms-message-block': SmsMessage,\n\t\t'timeline-block': TimeLine,\n\t\t'document-selector-block': DocumentSelector,\n\t},\n\tprops: {\n\t\tsendAllowed: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true\n\t\t},\n\t},\n\tdata()\n\t{\n\t\tlet stages =  {\n\t\t\tmessage: {\n\t\t\t\tinitSenders: this.$root.$app.options.senders,\n\t\t\t\tinitCurrentSenderCode: this.$root.$app.options.currentSenderCode,\n\t\t\t\tinitPushedToUseBitrix24Notifications: this.$root.$app.options.pushedToUseBitrix24Notifications,\n\t\t\t\tstatus: Status.complete,\n\t\t\t\tselectedSmsSender: this.$root.$app.sendingMethodDesc.provider,\n\t\t\t\tmanager: this.$root.$app.options.entityResponsible,\n\t\t\t\tphone: this.$root.$app.options.contactPhone,\n\t\t\t\townerId: this.$root.$app.options.ownerId,\n\t\t\t\townerTypeId: this.$root.$app.options.ownerTypeId,\n\t\t\t\tcontactEditorUrl: this.$root.$app.options.contactEditorUrl,\n\t\t\t\ttitleTemplate: this.$root.$app.sendingMethodDesc.sent\n\t\t\t\t\t? Loc.getMessage('SALESCENTER_APP_CONTACT_BLOCK_TITLE_MESSAGE_2_PAST_TIME')\n\t\t\t\t\t: Loc.getMessage('SALESCENTER_APP_CONTACT_BLOCK_TITLE_MESSAGE_2'),\n\t\t\t\tshowHint: this.$root.$app.options.templateMode !== 'view',\n\t\t\t\teditorTemplate: this.$root.$app.sendingMethodDesc.text,\n\t\t\t\teditorUrl: this.$root.$app.orderPublicUrl,\n\t\t\t\tselectedMode: 'payment',\n\t\t\t},\n\t\t\tproduct: {\n\t\t\t\tstatus: this.$root.$app.options.basket && this.$root.$app.options.basket.length > 0\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.current,\n\t\t\t\ttitle: this.$root.$app.options.templateMode === 'view'\n\t\t\t\t\t? Loc.getMessage('SALESCENTER_PRODUCT_BLOCK_TITLE_PAYMENT_VIEW')\n\t\t\t\t\t: Loc.getMessage('SALESCENTER_PRODUCT_BLOCK_TITLE_SHORT'),\n\t\t\t\thintTitle: this.$root.$app.options.templateMode === 'view'\n\t\t\t\t\t? ''\n\t\t\t\t\t: Loc.getMessage('SALESCENTER_PRODUCT_SET_BLOCK_TITLE_SHORT'),\n\t\t\t},\n\t\t\tpaysystem: {\n\t\t\t\tstatus: this.$root.$app.options.paySystemList.isSet\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled,\n\t\t\t\ttiles: this.getTileCollection(this.$root.$app.options.paySystemList.items),\n\t\t\t\tinstalled: this.$root.$app.options.paySystemList.isSet,\n\t\t\t\ttitleItems: this.getTitleItems(this.$root.$app.options.paySystemList.items),\n\t\t\t\tinitialCollapseState: this.$root.$app.options.isPaySystemCollapsed ? this.$root.$app.options.isPaySystemCollapsed === 'Y' : this.$root.$app.options.paySystemList.isSet,\n\t\t\t},\n\t\t\tcashbox: {},\n\t\t\tautomation: {},\n\t\t\tdocumentSelector: {\n\t\t\t\tstatus: Status.complete,\n\t\t\t},\n\t\t};\n\n\t\tif (this.$root.$app.options.cashboxList.hasOwnProperty('items'))\n\t\t{\n\t\t\tstages.cashbox = {\n\t\t\t\tstatus: this.$root.$app.options.cashboxList.isSet\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled,\n\t\t\t\ttiles: this.getTileCollection(this.$root.$app.options.cashboxList.items),\n\t\t\t\tinstalled: this.$root.$app.options.cashboxList.isSet,\n\t\t\t\ttitleItems: this.getTitleItems(this.$root.$app.options.cashboxList.items),\n\t\t\t\tinitialCollapseState: this.$root.$app.options.isCashboxCollapsed ? this.$root.$app.options.isCashboxCollapsed === 'Y' : this.$root.$app.options.cashboxList.isSet,\n\t\t\t};\n\t\t}\n\n\t\tif (this.$root.$app.options.isAutomationAvailable)\n\t\t{\n\t\t\tstages.automation = {\n\t\t\t\tstatus: Status.complete,\n\t\t\t\tstageOnOrderPaid: this.$root.$app.options.stageOnOrderPaid,\n\t\t\t\titems: this.$root.$app.options.entityStageList,\n\t\t\t\tinitialCollapseState: this.$root.$app.options.isAutomationCollapsed ? this.$root.$app.options.isAutomationCollapsed === 'Y' : false,\n\t\t\t};\n\t\t}\n\n\t\tif (this.$root.$app.options.hasOwnProperty('timeline'))\n\t\t{\n\t\t\tstages.timeline = {\n\t\t\t\titems: this.getTimelineCollection(this.$root.$app.options.timeline)\n\t\t\t}\n\t\t}\n\n\t\tif (this.$root.$app.hasOwnProperty('documentSelector'))\n\t\t{\n\t\t\tif (this.$root.$app.documentSelector.templateAddUrl)\n\t\t\t{\n\t\t\t\tstages.documentSelector.templateAddUrl = this.$root.$app.documentSelector.templateAddUrl;\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\tstages: stages,\n\t\t}\n\t},\n\tmixins: [\n\t\tStageMixin,\n\t\tMixinTemplatesType\n\t],\n\tcomputed: {\n\t\thasStageTimeLine()\n\t\t{\n\t\t\treturn this.stages.timeline.hasOwnProperty('items') && this.stages.timeline.items.length > 0;\n\t\t},\n\t\thasStageAutomation()\n\t\t{\n\t\t\treturn this.stages.automation.hasOwnProperty('items');\n\t\t},\n\t\thasStageCashBox()\n\t\t{\n\t\t\treturn this.stages.cashbox.hasOwnProperty('tiles');\n\t\t},\n\t\tsubmitButtonLabel()\n\t\t{\n\t\t\treturn this.editable ? Loc.getMessage('SALESCENTER_SEND') : Loc.getMessage('SALESCENTER_RESEND');\n\t\t},\n\t\tisShowDocumentSelector()\n\t\t{\n\t\t\treturn this.$root.$app.hasOwnProperty('documentSelector');\n\t\t},\n\t},\n\tmethods: {\n\t\tinitCounter()\n\t\t{\n\t\t\tthis.counter = 1;\n\t\t},\n\t\tgetTimelineCollection(items)\n\t\t{\n\t\t\tlet list = [];\n\n\t\t\tObject.values(items).forEach(\n\t\t\t\toptions => list.push(TimeLineItem.Factory.create(options)));\n\n\t\t\treturn list;\n\t\t},\n\t\tgetTileCollection(items)\n\t\t{\n\t\t\tlet tiles = [];\n\t\t\tObject.values(items).forEach(\n\t\t\t\toptions => tiles.push(Tile.Factory.create(options)));\n\n\t\t\treturn tiles;\n\t\t},\n\t\tgetTitleItems(items)\n\t\t{\n\t\t\tlet result = [];\n\t\t\titems.forEach((item) => {\n\t\t\t\tif (![Tile.More.type(), Tile.Offer.type()].includes(item.type))\n\t\t\t\t{\n\t\t\t\t\tresult.push(item);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn result;\n\t\t},\n\t\tstageRefresh(e, type)\n\t\t{\n\t\t\tAjax.runComponentAction(\n\t\t\t\t\"bitrix:salescenter.app\",\n\t\t\t\t\"getAjaxData\",\n\t\t\t\t{\n\t\t\t\t\tmode: \"class\",\n\t\t\t\t\tdata: {\n\t\t\t\t\t\ttype: type,\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t).then(function(response) {\n\t\t\t\t\tif (response.data)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.refreshTilesByType(response.data, type);\n\t\t\t\t\t}\n\t\t\t\t}.bind(this),\n\t\t\t\tfunction() {\n\t\t\t\t\tUI.Notification.Center.notify({\n\t\t\t\t\t\tcontent: Loc.getMessage('SALESCENTER_DATA_UPDATE_ERROR'),\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t},\n\t\trefreshTilesByType(data, type)\n\t\t{\n\t\t\tif(type === 'PAY_SYSTEM')\n\t\t\t{\n\t\t\t\tthis.stages.paysystem.status = data.isSet\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled;\n\t\t\t\tthis.stages.paysystem.tiles = this.getTileCollection(data.items);\n\t\t\t\tthis.stages.paysystem.installed = data.isSet;\n\t\t\t\tthis.stages.paysystem.titleItems = this.getTitleItems(data.items);\n\t\t\t}\n\t\t\telse if(type === 'CASHBOX')\n\t\t\t{\n\t\t\t\tthis.stages.cashbox.status = data.isSet\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled;\n\t\t\t\tthis.stages.cashbox.tiles = this.getTileCollection(data.items);\n\t\t\t\tthis.stages.cashbox.installed = data.isSet;\n\t\t\t\tthis.stages.cashbox.titleItems = this.getTitleItems(data.items);\n\t\t\t}\n\t\t},\n\t\tonSend(event)\n\t\t{\n\t\t\tthis.$emit('stage-block-send-on-send', event)\n\t\t},\n\t\tchangeProvider(value)\n\t\t{\n\t\t\tthis.$root.$app.sendingMethodDesc.provider = value;\n\t\t\tBX.userOptions.save('salescenter', 'payment_sms_provider_options', 'latest_selected_provider', value);\n\t\t},\n\t\tsaveCollapsedOption(type, value)\n\t\t{\n\t\t\tBX.userOptions.save('salescenter', 'add_payment_collapse_options', type, value);\n\t\t},\n\t},\n\tcreated()\n\t{\n\t\tthis.initCounter();\n\t},\n\tbeforeUpdate()\n\t{\n\t\tthis.initCounter();\n\t},\n\ttemplate: `\n\t\t<div>\n\t\t\t<sms-message-block\n\t\t\t\t@stage-block-sms-send-on-change-provider=\"changeProvider\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.message.status\"\n\t\t\t\t:initSenders=\"stages.message.initSenders\"\n\t\t\t\t:initCurrentSenderCode=\"stages.message.initCurrentSenderCode\"\n\t\t\t\t:initPushedToUseBitrix24Notifications=\"stages.message.initPushedToUseBitrix24Notifications\"\n\t\t\t\t:selectedSmsSender=\"stages.message.selectedSmsSender\"\n\t\t\t\t:manager=\"stages.message.manager\"\n\t\t\t\t:phone=\"stages.message.phone\"\n\t\t\t\t:contactEditorUrl=\"stages.message.contactEditorUrl\"\n\t\t\t\t:ownerId=\"stages.message.ownerId\"\n\t\t\t\t:ownerTypeId=\"stages.message.ownerTypeId\"\n\t\t\t\t:titleTemplate=\"stages.message.titleTemplate\"\n\t\t\t\t:showHint=\"stages.message.showHint\"\n\t\t\t\t:editorTemplate=\"stages.message.editorTemplate\"\n\t\t\t\t:editorUrl=\"stages.message.editorUrl\"\n\t\t\t\t:selectedMode=\"stages.message.selectedMode\"\n\t\t\t/>\n\t\t\t<product-block\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.product.status\"\n\t\t\t\t:title=\"stages.product.title\"\n\t\t\t\t:hintTitle=\"stages.product.hintTitle\"\n\t\t\t/>\n\t\t\t<paysystem-block\n\t\t\t\tv-if=\"editable\"\n\t\t\t\t@on-stage-tile-collection-slider-close=\"stageRefresh($event, 'PAY_SYSTEM')\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.paysystem.status\"\n\t\t\t\t:tiles=\"stages.paysystem.tiles\"\n\t\t\t\t:installed=\"stages.paysystem.installed\"\n\t\t\t\t:titleItems=\"stages.paysystem.titleItems\"\n\t\t\t\t:initialCollapseState=\"stages.paysystem.initialCollapseState\"\n\t\t\t\t@on-save-collapsed-option=\"saveCollapsedOption\"\n\t\t\t/>\n\t\t\t<cashbox-block\n\t\t\t\tv-if=\"editable && hasStageCashBox\"\n\t\t\t\t@on-stage-tile-collection-slider-close=\"stageRefresh($event, 'CASHBOX')\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.cashbox.status\"\n\t\t\t\t:tiles=\"stages.cashbox.tiles\"\n\t\t\t\t:installed=\"stages.cashbox.installed\"\n\t\t\t\t:titleItems=\"stages.cashbox.titleItems\"\n\t\t\t\t:initialCollapseState=\"stages.cashbox.initialCollapseState\"\n\t\t\t\t@on-save-collapsed-option=\"saveCollapsedOption\"\n\t\t\t/>\n\t\t\t<document-selector-block\n\t\t\t\tv-if=\"isShowDocumentSelector\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:templateAddUrl=\"stages.documentSelector.templateAddUrl\"\n\t\t\t/>\n\t\t\t<automation-block\n\t\t\t\tv-if=\"editable && hasStageAutomation\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.automation.status\"\n\t\t\t\t:stageOnOrderPaid=\"stages.automation.stageOnOrderPaid\"\n\t\t\t\t:items=\"stages.automation.items\"\n\t\t\t\t:initialCollapseState=\"stages.automation.initialCollapseState\"\n\t\t\t\t@on-save-collapsed-option=\"saveCollapsedOption\"\n\t\t\t/>\n\t\t\t<send-block\n\t\t\t\t@on-submit=\"onSend\"\n\t\t\t\t:buttonEnabled=\"sendAllowed\"\n\t\t\t\t:showWhatClientSeesControl=\"!editable\"\n\t\t\t\t:buttonLabel=\"submitButtonLabel\"\n\t\t\t/>\n\t\t\t<timeline-block\n\t\t\t\tv-if=\"hasStageTimeLine\"\n\t\t\t\t:timelineItems=\"stages.timeline.items\"\n\t\t\t/>\n\t\t</div>\n\t`\n};\n","import {Loc} from 'main.core';\n\nexport default {\n\tprops: {\n\t\tbuttonEnabled: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomputed: {\n\t\tbuttonClass()\n\t\t{\n\t\t\treturn {'salescenter-app-payment-by-sms-item-disabled': this.buttonEnabled === false};\n\t\t},\n\t},\n\tmethods: {\n\t\tsubmit(event)\n\t\t{\n\t\t\tthis.$emit('on-submit', event);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div\n\t\t\t:class=\"buttonClass\"\n\t\t\tclass=\"salescenter-app-payment-by-sms-item-show salescenter-app-payment-by-sms-item salescenter-app-payment-by-sms-item-send\"\n\t\t>\n\t\t\t<div class=\"salescenter-app-payment-by-sms-item-counter\">\n\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-counter-rounder\"></div>\n\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-counter-line\"></div>\n\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-counter-number\"></div>\n\t\t\t</div>\n\t\t\t<div class=\"\">\n\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container\">\n\t\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container-payment\">\n\t\t\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container-payment-inline\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t@click=\"submit($event)\"\n\t\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-lg ui-btn-success ui-btn-round\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_CREATE_SHIPMENT')}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`\n}\n","import {ajax as Ajax, Loc} from 'main.core';\nimport {StatusTypes as Status} from 'salescenter.component.stage-block';\nimport {UI} from 'ui.notification';\nimport {MixinTemplatesType} from '../templates-type-mixin';\nimport * as Tile from 'salescenter.tile';\nimport Send from './stage-blocks/send';\nimport Product from '../stage-blocks/product';\nimport {DeliveryVuex} from '../stage-blocks/delivery-vuex';\nimport {Automation} from '../stage-blocks/automation';\nimport {StageMixin} from '../stage-blocks/stage-mixin';\n\nexport default {\n\tcomponents: {\n\t\t'send-block': Send,\n\t\t'product-block': Product,\n\t\t'delivery-block': DeliveryVuex,\n\t\t'automation-block': Automation,\n\t},\n\tprops: {\n\t\tsendAllowed: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata()\n\t{\n\t\tconst stages = {\n\t\t\tproduct: {\n\t\t\t\tstatus: this.$root.$app.options.basket && this.$root.$app.options.basket.length > 0\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.current,\n\t\t\t\ttitle: this.$root.$app.options.templateMode === 'view'\n\t\t\t\t\t? Loc.getMessage('SALESCENTER_PRODUCT_BLOCK_TITLE_SHIPMENT_VIEW')\n\t\t\t\t\t: Loc.getMessage('SALESCENTER_PRODUCT_BLOCK_TITLE_SHORT_SHIPMENT'),\n\t\t\t},\n\t\t\tdelivery: {\n\t\t\t\tstatus: this.$root.$app.options.deliveryList.isInstalled\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled,\n\t\t\t\ttiles: this.getTileCollection(this.$root.$app.options.deliveryList.items),\n\t\t\t\tinstalled: this.$root.$app.options.deliveryList.isInstalled,\n\t\t\t\tinitialCollapseState: this.$root.$app.options.isDeliveryCollapsed ? this.$root.$app.options.isDeliveryCollapsed === 'Y' : this.$root.$app.options.deliveryList.isInstalled,\n\t\t\t},\n\t\t\tautomation: {},\n\t\t};\n\n\t\tif (this.$root.$app.options.isAutomationAvailable)\n\t\t{\n\t\t\tstages.automation = {\n\t\t\t\tstatus: Status.complete,\n\t\t\t\tstageOnDeliveryFinished: this.$root.$app.options.stageOnDeliveryFinished,\n\t\t\t\titems: this.$root.$app.options.entityStageList,\n\t\t\t\tinitialCollapseState: this.$root.$app.options.isAutomationCollapsed ? this.$root.$app.options.isAutomationCollapsed === 'Y' : false,\n\t\t\t};\n\t\t}\n\n\t\treturn {\n\t\t\tstages,\n\t\t};\n\t},\n\tmixins: [StageMixin, MixinTemplatesType],\n\tcomputed:\n\t\t{\n\t\t\thasStageAutomation()\n\t\t\t{\n\t\t\t\treturn this.stages.automation.hasOwnProperty('items');\n\t\t\t},\n\t\t\teditableMixin()\n\t\t\t{\n\t\t\t\treturn this.editable === false;\n\t\t\t},\n\t\t\tisViewTemplateMode()\n\t\t\t{\n\t\t\t\treturn this.$root.$app.options.templateMode === 'view';\n\t\t\t},\n\t\t},\n\tmethods:\n\t\t{\n\t\t\tinitCounter()\n\t\t\t{\n\t\t\t\tthis.counter = 1;\n\t\t\t},\n\n\t\t\tgetTileCollection(items)\n\t\t\t{\n\t\t\t\tconst tiles = [];\n\t\t\t\tObject.values(items).forEach(\n\t\t\t\t\t(options) => tiles.push(Tile.Factory.create(options))\n\t\t\t\t);\n\n\t\t\t\treturn tiles;\n\t\t\t},\n\n\t\t\tgetTitleItems(items)\n\t\t\t{\n\t\t\t\tconst result = [];\n\t\t\t\titems.forEach((item) => {\n\t\t\t\t\tif (![Tile.More.type(), Tile.Offer.type()].includes(item.type))\n\t\t\t\t\t{\n\t\t\t\t\t\tresult.push(item);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\treturn result;\n\t\t\t},\n\n\t\t\tstageRefresh(e, type)\n\t\t\t{\n\t\t\t\tAjax.runComponentAction(\n\t\t\t\t\t'bitrix:salescenter.app',\n\t\t\t\t\t'getAjaxData',\n\t\t\t\t\t{\n\t\t\t\t\t\tmode: 'class',\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\ttype,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t).then(\n\t\t\t\t\t(response) => {\n\t\t\t\t\t\tif (response.data)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.refreshTilesByType(response.data, type);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t() => {\n\t\t\t\t\t\tUI.Notification.Center.notify({\n\t\t\t\t\t\t\tcontent: Loc.getMessage('SALESCENTER_DATA_UPDATE_ERROR'),\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t},\n\n\t\t\trefreshTilesByType(data, type)\n\t\t\t{\n\t\t\t\tif (type === 'DELIVERY')\n\t\t\t\t{\n\t\t\t\t\tthis.stages.delivery.status = data.isInstalled\n\t\t\t\t\t\t? Status.complete\n\t\t\t\t\t\t: Status.disabled;\n\t\t\t\t\tthis.stages.delivery.tiles = this.getTileCollection(data.items);\n\t\t\t\t\tthis.stages.delivery.installed = data.isInstalled;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tonSend(event)\n\t\t\t{\n\t\t\t\tthis.$emit('stage-block-send-on-send', event)\n\t\t\t},\n\n\t\t\tsaveCollapsedOption(type, value)\n\t\t\t{\n\t\t\t\tBX.userOptions.save('salescenter', 'add_shipment_collapse_options', type, value);\n\t\t\t},\n\t\t},\n\tcreated()\n\t{\n\t\tthis.initCounter();\n\t},\n\tbeforeUpdate()\n\t{\n\t\tthis.initCounter();\n\t},\n\ttemplate: `\n\t\t<div>\n\t\t\t<product-block \n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.product.status\"\n\t\t\t\t:title=\t\"stages.product.title\"\n\t\t\t\t:hintTitle=\"''\"\n\t\t\t/>\n\t\t\t\n\t\t\t<delivery-block v-on:on-stage-tile-collection-slider-close=\"stageRefresh($event, 'DELIVERY')\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.delivery.status\"\n\t\t\t\t:tiles=\"stages.delivery.tiles\"\n\t\t\t\t:installed=\"stages.delivery.installed\"\n\t\t\t\t:isCollapsible=\"false\"\n\t\t\t\t:initialCollapseState=\"stages.delivery.initialCollapseState\"\n\t\t\t\t@on-save-collapsed-option=\"saveCollapsedOption\"\n\t\t\t/>\n\n\t\t\t<automation-block v-if=\"editable && hasStageAutomation\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.automation.status\"\n\t\t\t\t:stageOnDeliveryFinished=\"stages.automation.stageOnDeliveryFinished\"\n\t\t\t\t:items=\"stages.automation.items\"\n\t\t\t\t:initialCollapseState=\"stages.automation.initialCollapseState\"\n\t\t\t\t:isDeliveryStageVisible=true\n\t\t\t\t@on-save-collapsed-option=\"saveCollapsedOption\"\n\t\t\t/>\n\t\t\t\n\t\t\t<send-block\n\t\t\t\tv-if=\"!isViewTemplateMode\"\n\t\t\t\t@on-submit=\"onSend\"\n\t\t\t\t:buttonEnabled=\"sendAllowed\"\n\t\t\t/>\n\t\t</div>\n\t`\n};\n","import { ajax as Ajax, Loc, Text, Event } from 'main.core';\nimport { TagSelector } from 'ui.entity-selector';\nimport { Block } from 'salescenter.component.stage-block';\nimport { StageMixin } from './stage-mixin';\n\nconst ResponsibleSelector = {\n\tprops: {\n\t\tstatus: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tcounter: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tselectedUser: {\n\t\t\ttype: Number,\n\t\t\trequired: false,\n\t\t},\n\t\tresponsible: {\n\t\t\ttype: Object,\n\t\t\trequired: false,\n\t\t},\n\t\tisMobileInstalledForResponsible: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t},\n\t\teditable: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t\tcontact: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\thintTitle: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t},\n\t},\n\n\tmixins: [StageMixin],\n\n\tcomponents: {\n\t\t'stage-block-item':\tBlock,\n\t},\n\n\tcomputed: {\n\t\tisCreateMode()\n\t\t{\n\t\t\treturn this.$root.$app.options.templateMode === 'create';\n\t\t},\n\t\tconfigForBlock()\n\t\t{\n\t\t\treturn {\n\t\t\t\tcounter: this.counter,\n\t\t\t\ttitleItems: [],\n\t\t\t\tinstalled: true,\n\t\t\t\tcollapsible: false,\n\t\t\t\tchecked: this.counterCheckedMixin,\n\t\t\t\tshowHint: true,\n\t\t\t};\n\t\t},\n\t\tcontactInfo()\n\t\t{\n\t\t\tif (this.contact.name || this.contact.phone)\n\t\t\t{\n\t\t\t\treturn Loc.getMessage(\n\t\t\t\t\t'SALESCENTER_PAYMENT_RESPONSIBLE_SELECTOR_BLOCK_CONTACT_INFO_TEMPLATE',\n\t\t\t\t\t{\n\t\t\t\t\t\t'[span]': '<span class=\"salescenter-responsible-block-contact\">',\n\t\t\t\t\t\t'[/span]': '</span>',\n\t\t\t\t\t\t'#CONTACT_NAME#': Text.encode(this.contact.name),\n\t\t\t\t\t\t'#CONTACT_PHONE#': Text.encode(this.contact.phone),\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t}\n\n\t\t\treturn '';\n\t\t},\n\t\taddEmployee()\n\t\t{\n\t\t\treturn Loc.getMessage(\n\t\t\t\t'SALESCENTER_PAYMENT_RESPONSIBLE_SELECTOR_BLOCK_ADD_EMPLOYEE',\n\t\t\t\t{\n\t\t\t\t\t'[link]': '<span id=\"add-employee-link\" class=\"salescenter-responsible-block-add-employee-link\">',\n\t\t\t\t\t'[/link]': '</span>',\n\t\t\t\t},\n\t\t\t);\n\t\t},\n\t\tresponsibleHeaderText()\n\t\t{\n\t\t\treturn this.isCreateMode ? Loc.getMessage('SALESCENTER_PAYMENT_RESPONSIBLE_SELECTOR_BLOCK_RESPONSIBLE_CREATE') : Loc.getMessage('SALESCENTER_PAYMENT_RESPONSIBLE_SELECTOR_BLOCK_RESPONSIBLE_VIEW');\n\t\t},\n\t\tavatarStyle()\n\t\t{\n\t\t\tconst url = this.responsible.photo ? { 'background-image': `url(${this.responsible.photo})` } : null;\n\n\t\t\treturn [url];\n\t\t},\n\t},\n\n\tmounted()\n\t{\n\t\tthis.$store.commit('orderCreation/setMobileInstalledForResponsible', this.isMobileInstalledForResponsible ?? true);\n\n\t\tconst addEmployeeLink = document.getElementById('add-employee-link');\n\t\tif (addEmployeeLink)\n\t\t{\n\t\t\tEvent.bind(addEmployeeLink, 'click', (event) => {\n\t\t\t\tthis.$root.$app.openMobileAppPopup();\n\t\t\t});\n\t\t}\n\n\t\tif (!this.editable)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst selectorRoot = document.getElementById('salescenterResponsibleSelector');\n\n\t\tconst dialogOptions = {\n\t\t\tcontext: 'salescenter_responsible',\n\t\t\tentities: [\n\t\t\t\t{\n\t\t\t\t\tid: 'user',\n\t\t\t\t},\n\t\t\t],\n\t\t\tevents: {\n\t\t\t\t'Item:onSelect': (event) => {\n\t\t\t\t\tthis.onResponsibleChanged(event);\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\n\t\tif (this.selectedUser)\n\t\t{\n\t\t\tdialogOptions.preselectedItems = [\n\t\t\t\t['user', this.selectedUser],\n\t\t\t];\n\t\t\tdialogOptions.undeselectedItems = [\n\t\t\t\t['user', this.selectedUser],\n\t\t\t];\n\t\t}\n\n\t\tconst tagSelector = new TagSelector({\n\t\t\tmultiple: false,\n\t\t\tdialogOptions,\n\t\t\tdeselectable: false,\n\t\t});\n\n\t\ttagSelector.renderTo(selectorRoot);\n\t},\n\n\tmethods: {\n\t\tonResponsibleChanged(event)\n\t\t{\n\t\t\tconst { item } = event.getData();\n\n\t\t\titem.setDeselectable(false);\n\t\t\tevent.target?.tagSelector?.updateTags();\n\t\t\tthis.$store.commit('orderCreation/setPaymentResponsibleId', item.getId());\n\n\t\t\tconst isSubmitEnabled = this.$store.getters['orderCreation/isAllowedSubmit'];\n\t\t\tthis.$store.commit('orderCreation/disableSubmit');\n\t\t\tAjax.runAction('salescenter.terminalResponsible.getUserMobileInfo', {\n\t\t\t\tdata: {\n\t\t\t\t\tuserId: item.getId(),\n\t\t\t\t},\n\t\t\t}).then((result) => {\n\t\t\t\tthis.$store.commit('orderCreation/setMobileInstalledForResponsible', result.data.isMobileInstalled);\n\t\t\t\tif (!result.data.isMobileInstalled)\n\t\t\t\t{\n\t\t\t\t\tthis.$store.commit('orderCreation/setResponsiblePhoneNumbers', result.data.phones);\n\t\t\t\t}\n\n\t\t\t\tif (isSubmitEnabled)\n\t\t\t\t{\n\t\t\t\t\tthis.$store.commit('orderCreation/enableSubmit');\n\t\t\t\t}\n\n\t\t\t\tthis.$emit('on-responsible-changed', event);\n\t\t\t});\n\t\t},\n\t\tonItemHint(event)\n\t\t{\n\t\t\tBX.Salescenter.Manager.openHowTerminalWorks();\n\t\t},\n\t},\n\n\tcreated()\n\t{\n\t\tif (this.selectedUser)\n\t\t{\n\t\t\tthis.$store.commit('orderCreation/setPaymentResponsibleId', this.selectedUser);\n\t\t}\n\t},\n\n\t// language=Vue\n\ttemplate: `\n\t\t<stage-block-item\n\t\t\t:class=\"statusClassMixin\"\n\t\t\t:config=\"configForBlock\"\n\t\t\tv-on:on-item-hint=\"onItemHint\"\n\t\t>\n\t\t\t<template v-slot:block-title-title>{{ title }}</template>\n\t\t\t<template v-slot:block-hint-title>{{ hintTitle }}</template>\n\t\t\t<template v-slot:block-container>\n\t\t\t\t<div :class=\"containerClassMixin\">\n\t\t\t\t\t<p class=\"salescenter-responsible-block-responsible-header\">{{ responsibleHeaderText }}</p>\n\t\t\t\t\t<div id=\"salescenterResponsibleSelector\" v-if=\"editable\"></div>\n\t\t\t\t\t<div class=\"salescenter-responsible-block-responsible-wrapper\" v-else>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclass=\"salescenter-app-payment-by-sms-item-container-sms-user-avatar salescenter-responsible-block-responsible-photo\"\n\t\t\t\t\t\t\t:style=\"avatarStyle\"></div>\n\t\t\t\t\t\t<div class=\"salescenter-responsible-block-responsible-name-wrapper\">\n\t\t\t\t\t\t\t<a class=\"salescenter-responsible-block-responsible-name\">{{ responsible.fullName }}</a>\n\t\t\t\t\t\t\t<div class=\"salescenter-responsible-block-responsible-position-wrapper\">\n\t\t\t\t\t\t\t\t<span class=\"salescenter-responsible-block-responsible-position\">{{ responsible.position }}</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div v-html=\"contactInfo\" class=\"salescenter-responsible-block-contact-info\" v-if=\"!isCreateMode\"></div>\n\t\t\t\t\t<div v-html=\"addEmployee\" class=\"salescenter-responsible-block-add-employee\" v-else></div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</stage-block-item>\n\t`,\n};\n\nexport\n{\n\tResponsibleSelector,\n};\n","export default {\n\tprops: {\n\t\tbuttonLabel: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tbuttonEnabled: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomputed: {\n\t\tbuttonClass()\n\t\t{\n\t\t\treturn { 'salescenter-app-payment-by-sms-item-disabled': this.buttonEnabled === false };\n\t\t},\n\t},\n\tmethods: {\n\t\tsubmit(event)\n\t\t{\n\t\t\tthis.$emit('on-submit', event);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div\n\t\t\t:class=\"buttonClass\"\n\t\t\tclass=\"salescenter-app-payment-by-sms-item-show salescenter-app-payment-by-sms-item salescenter-app-payment-by-sms-item-send\"\n\t\t>\n\t\t\t<div class=\"salescenter-app-payment-by-sms-item-counter\">\n\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-counter-rounder\"></div>\n\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-counter-line\"></div>\n\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-counter-number\"></div>\n\t\t\t</div>\n\t\t\t<div class=\"\">\n\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container\">\n\t\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container-payment\">\n\t\t\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container-payment-inline\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t@click=\"submit($event)\"\n\t\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-lg ui-btn-success ui-btn-round\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{{buttonLabel}}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { Loc, Tag } from 'main.core';\nimport { Block } from 'salescenter.component.stage-block';\nimport { StageMixin } from '../../stage-blocks/stage-mixin';\nimport { CurrencyCore } from 'currency.currency-core';\n\nexport default {\n\tprops: {\n\t\tstatus: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tcounter: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\thintTitle: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tmixins: [StageMixin],\n\tmounted()\n\t{\n\t\t// temporary fix; see the comment in the product block (product.js) for more details\n\t\tconst editable = this.$root.$app.options.templateMode !== 'view';\n\t\tthis.$root.$emit('on-change-editable', editable);\n\t\tthis.$store.commit('orderCreation/enableSubmit');\n\t},\n\tcomponents:\n\t\t{\n\t\t\t'stage-block-item': Block,\n\t\t},\n\tmethods:\n\t\t{\n\t\t\tonItemHint(e)\n\t\t\t{\n\t\t\t\tBX.Salescenter.Manager.openHowToSell(e);\n\t\t\t},\n\t\t\tonProductFormModeChange(event)\n\t\t\t{\n\t\t\t\tthis.$emit('on-product-form-mode-change');\n\t\t\t},\n\t\t},\n\tcomputed:\n\t\t{\n\t\t\tconfigForBlock()\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\tcounter: this.counter,\n\t\t\t\t\tchecked: this.counterCheckedMixin,\n\t\t\t\t\tshowHint: true,\n\t\t\t\t};\n\t\t\t},\n\t\t\tformattedSum()\n\t\t\t{\n\t\t\t\tconst defaultCurrency = this.$root.$app.options.currencyCode || '';\n\t\t\t\tconst sum = CurrencyCore.currencyFormat(this.$root.$app.options.totals.result, defaultCurrency, false);\n\t\t\t\tconst element = Tag.render`<span class=\"catalog-pf-text salescenter-amount-block-amount-result-text--total\">${sum}</span>`;\n\n\t\t\t\treturn CurrencyCore.getPriceControl(element, defaultCurrency);\n\t\t\t},\n\t\t},\n\ttemplate: `\n\t\t<stage-block-item\n\t\t\t@on-item-hint.stop.prevent=\"onItemHint\"\n\t\t\t:config=\"configForBlock\"\n\t\t\t:class=\"statusClassMixin\"\n\t\t>\n\t\t\t<template v-slot:block-title-title>{{ title }}</template>\n\t\t\t<template v-slot:block-hint-title>{{ hintTitle }}</template>\n\t\t\t<template v-slot:block-container>\n\t\t\t\t<div :class=\"containerClassMixin\">\n\t\t\t\t\t<div class=\"salescenter-amount-block-stub-wrapper\">\n\t\t\t\t\t\t<div class=\"salescenter-amount-block-stub-icon\"></div>\n\t\t\t\t\t\t<div class=\"salescenter-amount-block-stub-text-wrapper\">\n\t\t\t\t\t\t\t<h3 class=\"salescenter-amount-block-stub-title\">${Loc.getMessage('SALESCENTER_AMOUNT_BLOCK_STUB_TITLE')}</h3>\n\t\t\t\t\t\t\t<p class=\"salescenter-amount-block-stub-text\">${Loc.getMessage('SALESCENTER_AMOUNT_BLOCK_STUB_TEXT')}</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"salescenter-amount-block-amount-wrapper\">\n\t\t\t\t\t\t<table class=\"salescenter-amount-block-amount-result\">\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td class=\"salescenter-amount-block-amount-result-cell\">\n\t\t\t\t\t\t\t\t\t<span class=\"salescenter-amount-block-amount-result-text salescenter-amount-block-amount-result-text--total\">${Loc.getMessage('SALESCENTER_AMOUNT_BLOCK_TOTAL')}</span>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t<td class=\"salescenter-amount-block-amount-result-cell\">\n\t\t\t\t\t\t\t\t\t<span class=\"salescenter-amount-block-amount-result-symbol salescenter-amount-block-amount-result-symbol--total\" v-html=\"formattedSum\"></span>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</table>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</stage-block-item>\n\t`,\n};\n","import { ajax as Ajax, Loc, Runtime, userOptions as UserOptions } from 'main.core';\nimport { StatusTypes as Status } from 'salescenter.component.stage-block';\nimport * as TimeLineItem from 'salescenter.timeline';\nimport { UI } from 'ui.notification';\nimport { MixinTemplatesType } from '../templates-type-mixin';\nimport * as Tile from 'salescenter.tile';\nimport { ResponsibleSelector } from '../stage-blocks/responsible-selector';\nimport { Cashbox } from '../stage-blocks/cashbox';\nimport Product from '../stage-blocks/product';\nimport { PaySystem } from '../stage-blocks/paysystem';\nimport { Automation } from '../stage-blocks/automation';\nimport { StageMixin } from '../stage-blocks/stage-mixin';\nimport { TimeLine } from '../stage-blocks/timeline';\nimport Send from './stage-blocks/send';\nimport Amount from './stage-blocks/amount';\n\nexport default {\n\tcomponents: {\n\t\t'responsible-block': ResponsibleSelector,\n\t\t'cashbox-block': Cashbox,\n\t\t'product-block': Product,\n\t\t'paysystem-block': PaySystem,\n\t\t'automation-block': Automation,\n\t\t'timeline-block': TimeLine,\n\t\t'send-block': Send,\n\t\t'amount-block': Amount,\n\t},\n\tprops: {\n\t\tsendAllowed: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata()\n\t{\n\t\tconst stages = {\n\t\t\tresponsible: {\n\t\t\t\tstatus: Status.complete,\n\t\t\t\tselectedUser: parseInt(this.$root.$app.options.paymentResponsible ?? 0),\n\t\t\t\tresponsible: this.$root.$app.options.entityResponsible,\n\t\t\t\tisMobileInstalledForResponsible: this.$root.$app.options.isMobileInstalledForResponsible,\n\t\t\t\tcontact: {\n\t\t\t\t\tname: this.$root.$app.options.contactName,\n\t\t\t\t\tphone: this.$root.$app.options.contactPhone,\n\t\t\t\t},\n\t\t\t\teditable: this.$root.$app.options.templateMode === 'create' || this.$root.$app.options.payment?.PAID === 'N',\n\t\t\t\thintTitle: this.$root.$app.options.templateMode === 'view'\n\t\t\t\t\t? ''\n\t\t\t\t\t: Loc.getMessage('SALESCENTER_HOW_TERMINAL_WORKS'),\n\t\t\t},\n\t\t\tproduct: {\n\t\t\t\tstatus: this.$root.$app.options.basket && this.$root.$app.options.basket.length > 0\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.current,\n\t\t\t\ttitle: this.$root.$app.options.templateMode === 'view'\n\t\t\t\t\t? Loc.getMessage('SALESCENTER_PRODUCT_BLOCK_TITLE_PAYMENT_VIEW')\n\t\t\t\t\t: Loc.getMessage('SALESCENTER_PRODUCT_BLOCK_TITLE_SHORT'),\n\t\t\t\thintTitle: '',\n\t\t\t},\n\t\t\tpaysystem: {\n\t\t\t\tstatus: this.$root.$app.options.paySystemList.isSet\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled,\n\t\t\t\ttiles: this.getTileCollection(this.$root.$app.options.paySystemList.items),\n\t\t\t\tinstalled: this.$root.$app.options.paySystemList.isSet,\n\t\t\t\ttitleItems: this.getTitleItems(this.$root.$app.options.paySystemList.items),\n\t\t\t\tinitialCollapseState: this.$root.$app.options.isPaySystemCollapsed ? this.$root.$app.options.isPaySystemCollapsed === 'Y' : this.$root.$app.options.paySystemList.isSet,\n\t\t\t},\n\t\t\tcashbox: {},\n\t\t\tautomation: {},\n\t\t};\n\n\t\tif (this.$root.$app.options.cashboxList.hasOwnProperty('items'))\n\t\t{\n\t\t\tstages.cashbox = {\n\t\t\t\tstatus: this.$root.$app.options.cashboxList.isSet\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled,\n\t\t\t\ttiles: this.getTileCollection(this.$root.$app.options.cashboxList.items),\n\t\t\t\tinstalled: this.$root.$app.options.cashboxList.isSet,\n\t\t\t\ttitleItems: this.getTitleItems(this.$root.$app.options.cashboxList.items),\n\t\t\t\tinitialCollapseState: this.$root.$app.options.isCashboxCollapsed ? this.$root.$app.options.isCashboxCollapsed === 'Y' : this.$root.$app.options.cashboxList.isSet,\n\t\t\t};\n\t\t}\n\n\t\tif (this.$root.$app.options.isAutomationAvailable)\n\t\t{\n\t\t\tstages.automation = {\n\t\t\t\tstatus: Status.complete,\n\t\t\t\tstageOnOrderPaid: this.$root.$app.options.stageOnOrderPaid,\n\t\t\t\titems: this.$root.$app.options.entityStageList,\n\t\t\t\tinitialCollapseState: this.$root.$app.options.isAutomationCollapsed ? this.$root.$app.options.isAutomationCollapsed === 'Y' : false,\n\t\t\t};\n\t\t}\n\n\t\tif (this.$root.$app.options.hasOwnProperty('timeline'))\n\t\t{\n\t\t\tstages.timeline = {\n\t\t\t\titems: this.getTimelineCollection(this.$root.$app.options.timeline),\n\t\t\t};\n\t\t}\n\n\t\tif (this.$root.$app.options.paySystemList.groups)\n\t\t{\n\t\t\tstages.paysystem.groups = this.getTileGroupsCollection(\n\t\t\t\tthis.$root.$app.options.paySystemList.groups,\n\t\t\t\tstages.paysystem.tiles,\n\t\t\t);\n\t\t}\n\n\t\tif (this.$root.$app.options.templateMode === 'view' && this.$root.$app.options.payment?.PAID === 'Y')\n\t\t{\n\t\t\tstages.responsible.title = Loc.getMessage('SALESCENTER_PAYMENT_RESPONSIBLE_SELECTOR_BLOCK_TITLE_PAID_VIEW');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tstages.responsible.title = Loc.getMessage('SALESCENTER_PAYMENT_RESPONSIBLE_SELECTOR_BLOCK_TITLE');\n\t\t}\n\n\t\treturn {\n\t\t\tstages,\n\t\t};\n\t},\n\tmixins: [\n\t\tStageMixin,\n\t\tMixinTemplatesType,\n\t],\n\tcomputed: {\n\t\thasStageTimeLine()\n\t\t{\n\t\t\treturn this.stages.timeline.hasOwnProperty('items') && this.stages.timeline.items.length > 0;\n\t\t},\n\t\thasStageAutomation()\n\t\t{\n\t\t\treturn this.stages.automation.hasOwnProperty('items');\n\t\t},\n\t\thasStageCashBox()\n\t\t{\n\t\t\treturn this.stages.cashbox.hasOwnProperty('tiles');\n\t\t},\n\t\tsubmitButtonLabel()\n\t\t{\n\t\t\treturn this.editable ? Loc.getMessage('SALESCENTER_CREATE_TERMINAL_PAYMENT') : Loc.getMessage('SALESCENTER_SAVE');\n\t\t},\n\t\thasProducts()\n\t\t{\n\t\t\treturn !this.$root.$app.options.isPaymentByAmount;\n\t\t},\n\t},\n\tmethods: {\n\t\tinitCounter()\n\t\t{\n\t\t\tthis.counter = 1;\n\t\t},\n\t\tgetTimelineCollection(items)\n\t\t{\n\t\t\tconst list = [];\n\n\t\t\tObject.values(items).forEach(\n\t\t\t\t(options) => list.push(TimeLineItem.Factory.create(options)),\n\t\t\t);\n\n\t\t\treturn list;\n\t\t},\n\t\tgetTileCollection(items)\n\t\t{\n\t\t\tconst tiles = [];\n\t\t\tObject.values(items).forEach(\n\t\t\t\t(options) => tiles.push(Tile.Factory.create(options)),\n\t\t\t);\n\n\t\t\treturn tiles;\n\t\t},\n\t\tgetTileGroupsCollection(groups, tiles)\n\t\t{\n\t\t\tconst ret = [];\n\n\t\t\tif (Array.isArray(groups))\n\t\t\t{\n\t\t\t\tObject.values(groups).forEach((item) => {\n\t\t\t\t\tconst group = new Tile.Group(item);\n\t\t\t\t\tgroup.fillTiles(tiles);\n\t\t\t\t\tret.push(group);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn ret;\n\t\t},\n\t\tgetTitleItems(items)\n\t\t{\n\t\t\tconst result = [];\n\t\t\titems.forEach((item) => {\n\t\t\t\tif (![Tile.More.type(), Tile.Offer.type()].includes(item.type))\n\t\t\t\t{\n\t\t\t\t\tresult.push(item);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn result;\n\t\t},\n\t\tstageRefresh(e, type)\n\t\t{\n\t\t\tAjax.runComponentAction(\n\t\t\t\t'bitrix:salescenter.app',\n\t\t\t\t'getAjaxData',\n\t\t\t\t{\n\t\t\t\t\tmode: 'class',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\ttype,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t).then(\n\t\t\t\t(response) => {\n\t\t\t\t\tif (response.data)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.refreshTilesByType(response.data, type);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t() => {\n\t\t\t\t\tUI.Notification.Center.notify({\n\t\t\t\t\t\tcontent: Loc.getMessage('SALESCENTER_DATA_UPDATE_ERROR'),\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t);\n\t\t},\n\t\trefreshTilesByType(data, type)\n\t\t{\n\t\t\tswitch (type)\n\t\t\t{\n\t\t\t\tcase 'PAY_SYSTEM': {\n\t\t\t\t\tthis.stages.paysystem.status = data.isSet\n\t\t\t\t\t\t? Status.complete\n\t\t\t\t\t\t: Status.disabled;\n\t\t\t\t\tthis.stages.paysystem.tiles = this.getTileCollection(data.items);\n\t\t\t\t\tthis.stages.paysystem.groups = this.getTileGroupsCollection(data.groups, this.stages.paysystem.tiles);\n\t\t\t\t\tthis.stages.paysystem.installed = data.isSet;\n\t\t\t\t\tthis.stages.paysystem.titleItems = this.getTitleItems(data.items);\n\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tcase 'CASHBOX': {\n\t\t\t\t\tthis.stages.cashbox.status = data.isSet\n\t\t\t\t\t\t? Status.complete\n\t\t\t\t\t\t: Status.disabled;\n\t\t\t\t\tthis.stages.cashbox.tiles = this.getTileCollection(data.items);\n\t\t\t\t\tthis.stages.cashbox.installed = data.isSet;\n\t\t\t\t\tthis.stages.cashbox.titleItems = this.getTitleItems(data.items);\n\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t// No default\n\t\t\t}\n\t\t},\n\t\tonSend(event)\n\t\t{\n\t\t\tthis.$emit('stage-block-send-on-send', event);\n\t\t},\n\t\tonResponsibleChanged(event)\n\t\t{\n\t\t\tthis.$emit('on-responsible-changed', event);\n\t\t},\n\t\tsaveCollapsedOption(type, value)\n\t\t{\n\t\t\tBX.userOptions.save('salescenter', 'add_payment_collapse_options', type, value);\n\t\t},\n\t},\n\tcreated()\n\t{\n\t\tthis.initCounter();\n\t},\n\tbeforeUpdate()\n\t{\n\t\tthis.initCounter();\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<div class=\"salescenter-app-terminal-wrapper\">\n\t\t\t<responsible-block\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.responsible.status\"\n\t\t\t\t:title=\"stages.responsible.title\"\n\t\t\t\t:selectedUser=\"stages.responsible.selectedUser\"\n\t\t\t\t:responsible=\"stages.responsible.responsible\"\n\t\t\t\t:isMobileInstalledForResponsible=\"stages.responsible.isMobileInstalledForResponsible\"\n\t\t\t\t:contact=\"stages.responsible.contact\"\n\t\t\t\t:editable=\"stages.responsible.editable\"\n\t\t\t\t:hintTitle=\"stages.responsible.hintTitle\"\n\t\t\t\t@on-responsible-changed=\"onResponsibleChanged\"\n\t\t\t/>\n\t\t\t<product-block\n\t\t\t\tv-if=\"hasProducts\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.product.status\"\n\t\t\t\t:title=\"stages.product.title\"\n\t\t\t\t:hintTitle=\"stages.product.hintTitle\"\n\t\t\t\t:additionalContainerClasses=\"{ 'salescenter-app-teminal-products-item': true }\"\n\t\t\t/>\n\t\t\t<amount-block\n\t\t\t\tv-else\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.product.status\"\n\t\t\t\t:title=\"stages.product.title\"\n\t\t\t\t:hintTitle=\"stages.product.hintTitle\"\n\t\t\t/>\n\t\t\t<paysystem-block\n\t\t\t\tv-if=\"editable\"\n\t\t\t\t@on-stage-tile-collection-slider-close=\"stageRefresh($event, 'PAY_SYSTEM')\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.paysystem.status\"\n\t\t\t\t:tiles=\"stages.paysystem.tiles\"\n\t\t\t\t:installed=\"stages.paysystem.installed\"\n\t\t\t\t:titleItems=\"stages.paysystem.titleItems\"\n\t\t\t\t:initialCollapseState=\"stages.paysystem.initialCollapseState\"\n\t\t\t\t@on-save-collapsed-option=\"saveCollapsedOption\"\n\t\t\t/>\n\t\t\t<cashbox-block\n\t\t\t\tv-if=\"editable && hasStageCashBox\"\n\t\t\t\t@on-stage-tile-collection-slider-close=\"stageRefresh($event, 'CASHBOX')\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.cashbox.status\"\n\t\t\t\t:tiles=\"stages.cashbox.tiles\"\n\t\t\t\t:installed=\"stages.cashbox.installed\"\n\t\t\t\t:titleItems=\"stages.cashbox.titleItems\"\n\t\t\t\t:initialCollapseState=\"stages.cashbox.initialCollapseState\"\n\t\t\t\t@on-save-collapsed-option=\"saveCollapsedOption\"\n\t\t\t/>\n\t\t\t<automation-block\n\t\t\t\tv-if=\"editable && hasStageAutomation\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.automation.status\"\n\t\t\t\t:stageOnOrderPaid=\"stages.automation.stageOnOrderPaid\"\n\t\t\t\t:items=\"stages.automation.items\"\n\t\t\t\t:initialCollapseState=\"stages.automation.initialCollapseState\"\n\t\t\t\t@on-save-collapsed-option=\"saveCollapsedOption\"\n\t\t\t/>\n\t\t\t<send-block\n\t\t\t\tv-if=\"editable\"\n\t\t\t\t@on-submit=\"onSend\"\n\t\t\t\t:buttonEnabled=\"sendAllowed\"\n\t\t\t\t:buttonLabel=\"submitButtonLabel\"\n\t\t\t/>\n\t\t\t<timeline-block\n\t\t\t\tv-if=\"hasStageTimeLine\"\n\t\t\t\t:timelineItems=\"stages.timeline.items\"\n\t\t\t/>\n\t\t</div>\n\t`,\n};\n","import { EventEmitter } from 'main.core.events';\nimport { Vuex } from 'ui.vue.vuex';\nimport StageBlocksList from './components/deal-receiving-payment/stage-blocks-list';\nimport EntityCreatePaymentStages from './components/crm-entity-create-payment/stage-blocks-list';\nimport StageBlocksListShipment from './components/deal-creating-shipment/stage-blocks-list';\nimport TerminalStageBlocksList from './components/deal-terminal-payment/stage-blocks-list';\nimport ComponentMixin from './component-mixin';\nimport { Loc, Runtime, userOptions as UserOptions } from 'main.core';\nimport { MixinTemplatesType } from './components/templates-type-mixin';\nimport Start from './start';\nimport { ModeDictionary } from './const/mode-dictionary';\n\nimport { SenderConfig } from 'salescenter.lib';\n\nexport default {\n\tmixins: [MixinTemplatesType, ComponentMixin],\n\tdata()\n\t{\n\t\tlet isPanelVisible = true;\n\t\tif (this.$root.$app.options.mode === ModeDictionary.terminalPayment && this.$root.$app.options.templateMode === 'view' && this.$root.$app.options.payment?.PAID === 'N')\n\t\t{\n\t\t\tisPanelVisible = false;\n\t\t}\n\n\t\treturn {\n\t\t\tactiveMenuItem: this.$root.$app.options.mode,\n\t\t\tisLoading: false,\n\t\t\tisPanelVisible,\n\t\t\tModeDictionary,\n\t\t};\n\t},\n\tcomponents: {\n\t\t'deal-receiving-payment': StageBlocksList,\n\t\t'crm-entity-create-payment': EntityCreatePaymentStages,\n\t\t'deal-creating-shipment': StageBlocksListShipment,\n\t\t'deal-terminal-payment': TerminalStageBlocksList,\n\t\t'start': Start,\n\t},\n\tmethods: {\n\t\treload(form)\n\t\t{\n\t\t\tif (this.isLoading || !this.editable)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.isLoading = true;\n\t\t\tthis.activeMenuItem = form;\n\t\t\tthis.$emit(\n\t\t\t\t'on-reload',\n\t\t\t\t{\n\t\t\t\t\tcontext: this.$root.$app.options.context,\n\t\t\t\t\torderId: this.$root.$app.orderId,\n\t\t\t\t\townerTypeId: this.$root.$app.options.ownerTypeId,\n\t\t\t\t\townerId: this.$root.$app.options.ownerId,\n\t\t\t\t\ttemplateMode: 'create',\n\t\t\t\t\tmode: this.activeMenuItem,\n\t\t\t\t\tshowModeList: this.$root.$app.options.showModeList,\n\t\t\t\t\tinitialMode: this.$root.$app.options.initialMode,\n\t\t\t\t}\n\t\t\t);\n\t\t},\n\t\tonSuccessfullyConnected()\n\t\t{\n\t\t\tthis.reload(this.activeMenuItem);\n\t\t},\n\t\tonReload()\n\t\t{\n\t\t\tthis.reload(this.activeMenuItem);\n\t\t},\n\t\tsendPaymentDeliveryForm(event)\n\t\t{\n\t\t\tif (!this.isAllowedPaymentDeliverySubmitButton)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!this.$root.$app.isPhoneConfirmed)\n\t\t\t{\n\t\t\t\tEventEmitter.subscribeOnce('BX.Salescenter.App::onPhoneConfirmed', () => this.sendPaymentDeliveryForm(event));\n\t\t\t\tthis.$root.$app.showPhoneConfirmPopup();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.$store.getters['orderCreation/isCompilationMode'])\n\t\t\t{\n\t\t\t\tthis.$root.$app.sendCompilation(event.target);\n\t\t\t}\n\t\t\telse if (this.editable)\n\t\t\t{\n\t\t\t\tthis.$root.$app.sendPayment(event.target);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.$root.$app.resendPayment(event.target);\n\t\t\t}\n\t\t},\n\t\tsendDeliveryForm(event)\n\t\t{\n\t\t\tif (!this.isAllowedDeliverySubmitButton)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.$root.$app.sendShipment(event.target);\n\t\t},\n\t\tsendTerminalPaymentForm(event)\n\t\t{\n\t\t\tif (!this.isAllowedTerminalPaymentSubmitButton)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.templateMode === 'view')\n\t\t\t{\n\t\t\t\tthis.$root.$app.updateTerminalPayment(event.target);\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.$root.$app.sendTerminalPayment(event.target);\n\t\t},\n\t\t// region menu item handlers\n\t\tspecifyCompanyContacts()\n\t\t{\n\t\t\tBX.Salescenter.Manager.openSlider(this.$root.$app.options.urlSettingsCompanyContacts, {width: 1200} );\n\t\t},\n\t\tsuggestScenario(event)\n\t\t{\n\t\t\tBX.Salescenter.Manager.openFeedbackPayOrderForm(event);\n\t\t},\n\t\thowItWorks(event)\n\t\t{\n\t\t\tif (this.mode === ModeDictionary.payment)\n\t\t\t{\n\t\t\t\tBX.Salescenter.Manager.openHowPaySmartInvoiceWorks(event);\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.mode === ModeDictionary.terminalPayment)\n\t\t\t{\n\t\t\t\tBX.Salescenter.Manager.openHowTerminalWorks(event);\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tBX.Salescenter.Manager.openHowPayDealWorks(event);\n\t\t},\n\t\topenIntegrationWindow(event)\n\t\t{\n\t\t\tBX.Salescenter.Manager.openIntegrationRequestForm(event);\n\t\t},\n\t\tfreeMessages()\n\t\t{\n\t\t\tlet senders = this.$root.$app.options.senders\n\n\t\t\tlet sender = senders.filter(item => item.code === SenderConfig.BITRIX24)\n\n\t\t\tif(sender.length > 0)\n\t\t\t{\n\t\t\t\tlet fixed = SenderConfig.openSliderFreeMessages(sender[0].connectUrl);\n\t\t\t\tfixed().then()\n\t\t\t}\n\t\t},\n\t\tonResponsibleChanged(event)\n\t\t{\n\t\t\t// it needs to be done like that and not with vue's @class attribute because is breaks BX.UI.Pinner's classes\n\t\t\tconst buttonsPanel = this.$refs['buttonsPanel'];\n\t\t\tbuttonsPanel.classList.remove('salescenter-button-panel-hidden');\n\t\t\tconst pinnerAnchor = document.querySelector('.salescenter-app-pinner-anchor');\n\t\t\tpinnerAnchor.classList.remove('salescenter-app-pinner-anchor-hidden');\n\t\t},\n\t\topenTerminalToolDisabledSlider()\n\t\t{\n\t\t\tRuntime.loadExtension('ui.info-helper').then(() => {\n\t\t\t\ttop.BX.UI.InfoHelper.show('limit_crm_terminal_off');\n\t\t\t});\n\t\t},\n\t\topenSalescanterToolDisabledSlider()\n\t\t{\n\t\t\tBX.loadExt('salescenter.tool-availability-manager').then(() => {\n\t\t\t\tBX.Salescenter.ToolAvailabilityManager.openSalescenterToolDisabledSlider();\n\t\t\t});\n\t\t},\n\t\t// endregion\n\t},\n\tcomputed: {\n\t\tmode()\n\t\t{\n\t\t\treturn this.$root.$app.options.mode;\n\t\t},\n\t\ttemplateMode()\n\t\t{\n\t\t\treturn this.$root.$app.options.templateMode;\n\t\t},\n\t\tinitialMode()\n\t\t{\n\t\t\treturn this.$root.$app.options.initialMode;\n\t\t},\n\t\tisAllowedFreeMessagesButton()\n\t\t{\n\t\t\tlet senders = this.$root.$app.options.senders\n\n\t\t\tlet sender = senders.filter(item => item.code === SenderConfig.BITRIX24)\n\n\t\t\tif(sender.length > 0)\n\t\t\t{\n\t\t\t\treturn SenderConfig.needConfigure(sender[0])\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\tisOnlyDeliveryItemVisible()\n\t\t{\n\t\t\treturn (\n\t\t\t\tthis.initialMode === ModeDictionary.delivery\n\t\t\t\t&& this.$root.$app.options.hasOwnProperty('deliveryList')\n\t\t\t\t&& this.$root.$app.options.deliveryList.hasOwnProperty('hasInstallable')\n\t\t\t\t&& this.$root.$app.options.deliveryList.hasInstallable\n\t\t\t);\n\t\t},\n\t\tisTerminalItemVisible()\n\t\t{\n\t\t\treturn this.isPaymentItemVisible && this.$root.$app.options.isTerminalAvailable;\n\t\t},\n\t\tisTerminalToolEnabled()\n\t\t{\n\t\t\treturn this.$root.$app.options.isTerminalToolEnabled;\n\t\t},\n\t\tisSalescenterToolEnabled()\n\t\t{\n\t\t\treturn this.$root.$app.options.isSalescenterToolEnabled;\n\t\t},\n\t\tisPaymentItemVisible()\n\t\t{\n\t\t\treturn (\n\t\t\t\tthis.initialMode === ModeDictionary.payment\n\t\t\t\t|| this.initialMode === ModeDictionary.paymentDelivery\n\t\t\t\t|| this.initialMode === ModeDictionary.terminalPayment\n\t\t\t);\n\t\t},\n\t\tisAllowedPaymentDeliverySubmitButton()\n\t\t{\n\t\t\tif (!this.$root.$app.hasClientContactInfo())\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tconst senders = this.$root.$app.options.senders;\n\t\t\tconst filteredSenders = senders.filter(sender => (\n\t\t\t\tsender.code === this.$root.$app.options.currentSenderCode && sender.isConnected\n\t\t\t));\n\t\t\tif (filteredSenders.length === 0)\n\t\t\t{\n\t\t\t\tthis.$store.commit('orderCreation/setIsSenderSelected', false);\n\t\t\t}\n\n\t\t\treturn this.$store.getters['orderCreation/isAllowedSubmit'];\n\t\t},\n\t\tisAllowedTerminalPaymentSubmitButton()\n\t\t{\n\t\t\treturn (\n\t\t\t\tthis.$store.getters['orderCreation/isAllowedSubmit']\n\t\t\t\t|| this.isTerminalViewModeSaveAllowed\n\t\t\t);\n\t\t},\n\t\tisTerminalViewModeSaveAllowed()\n\t\t{\n\t\t\treturn this.templateMode === 'view' && this.$root.$app.options.payment?.PAID === 'N';\n\t\t},\n\t\tisAllowedDeliverySubmitButton()\n\t\t{\n\t\t\tconst deliveryId = this.$store.getters['orderCreation/getDeliveryId'];\n\t\t\tif (!deliveryId)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif (!this.$store.getters['orderCreation/isAllowedSubmit'])\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn (deliveryId != this.$root.$app.options.emptyDeliveryServiceId);\n\t\t},\n\t\tisSuggestScenarioMenuItemVisible()\n\t\t{\n\t\t\treturn this.$root.$app.options.isBitrix24;\n\t\t},\n\t\tisRequestIntegrationMenuItemVisible()\n\t\t{\n\t\t\treturn this.$root.$app.options.isIntegrationButtonVisible;\n\t\t},\n\t\tisModeListVisible()\n\t\t{\n\t\t\treturn this.$root.$app.options.showModeList ?? true;\n\t\t},\n\t\tneedShowStoreConnection()\n\t\t{\n\t\t\treturn !this.isOrderPublicUrlAvailable && this.mode !== ModeDictionary.delivery;\n\t\t},\n\t\tisSidebarEnabled()\n\t\t{\n\t\t\treturn true; // not removing this just yet because who knows...\n\t\t},\n\t\tsendPaymentDeliveryFormButtonText()\n\t\t{\n\t\t\treturn this.editable ? Loc.getMessage('SALESCENTER_SEND') : Loc.getMessage('SALESCENTER_RESEND');\n\t\t},\n\t\ttitle()\n\t\t{\n\t\t\treturn this.$root.$app.options.title;\n\t\t},\n\t\t// classes region\n\t\tpaymentDeliveryFormSubmitButtonClass()\n\t\t{\n\t\t\treturn {'ui-btn-disabled': !this.isAllowedPaymentDeliverySubmitButton};\n\t\t},\n\t\tdeliveryFormSubmitButtonClass()\n\t\t{\n\t\t\treturn {'ui-btn-disabled': !this.isAllowedDeliverySubmitButton};\n\t\t},\n\t\tterminalPaymentFormSubmitButtonClass()\n\t\t{\n\t\t\treturn {'ui-btn-disabled': !this.isAllowedTerminalPaymentSubmitButton};\n\t\t},\n\t\tpaymentMenuItemClass()\n\t\t{\n\t\t\treturn {\n\t\t\t\t'salescenter-app-sidebar-menu-active': this.activeMenuItem === ModeDictionary.payment,\n\t\t\t};\n\t\t},\n\t\tpaymentTerminalMenuItemClass()\n\t\t{\n\t\t\treturn {\n\t\t\t\t'salescenter-app-sidebar-menu-active': this.activeMenuItem === ModeDictionary.terminalPayment,\n\t\t\t};\n\t\t},\n\t\tpaymentDeliveryMenuItemClass()\n\t\t{\n\t\t\treturn {\n\t\t\t\t'salescenter-app-sidebar-menu-active': this.activeMenuItem === ModeDictionary.paymentDelivery,\n\t\t\t};\n\t\t},\n\t\tdeliveryMenuItemClass()\n\t\t{\n\t\t\treturn {\n\t\t\t\t'salescenter-app-sidebar-menu-active': this.activeMenuItem === ModeDictionary.delivery,\n\t\t\t};\n\t\t},\n\t\t// endregion\n\t\t...Vuex.mapState({\n\t\t\tapplication: state => state.application,\n\t\t\torder: state => state.orderCreation,\n\t\t})\n\t},\n\t//language=Vue\n\ttemplate: `\n\t\t<div>\n\t\t\t<div\n\t\t\t\t:class=\"wrapperClass\"\n\t\t\t\t:style=\"wrapperStyle\"\n\t\t\t\tclass=\"salescenter-app-wrapper\"\n\t\t\t>\n\t\t\t\t<div class=\"ui-sidepanel-sidebar salescenter-app-sidebar\" v-if=\"isSidebarEnabled\">\n\t\t\t\t\t<ul class=\"ui-sidepanel-menu\">\n\t\t\t\t\t\t<template v-if=\"templateMode === 'view'\">\n\t\t\t\t\t\t\t<li class=\"ui-sidepanel-menu-item salescenter-app-sidebar-menu-active\">\n\t\t\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link\">\n\t\t\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">{{title}}</div>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t<template v-else-if=\"isModeListVisible\">\n\t\t\t\t\t\t\t<template v-if=\"isOnlyDeliveryItemVisible\">\n\t\t\t\t\t\t\t\t<li\n\t\t\t\t\t\t\t\t\t:class=\"deliveryMenuItemClass\"\n\t\t\t\t\t\t\t\t\tclass=\"ui-sidepanel-menu-item\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">\n\t\t\t\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_LEFT_CREATE_SHIPMENT_MSGVER_1')}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t\t\t<li\n\t\t\t\t\t\t\t\t\tv-if=\"isPaymentItemVisible\"\n\t\t\t\t\t\t\t\t\t@click=\"isSalescenterToolEnabled ? reload(ModeDictionary.payment) : openSalescanterToolDisabledSlider()\"\n\t\t\t\t\t\t\t\t\t:class=\"paymentMenuItemClass\"\n\t\t\t\t\t\t\t\t\tclass=\"ui-sidepanel-menu-item\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">\n\t\t\t\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_LEFT_TAKE_PAYMENT')}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</li>\n\t\n\t\t\t\t\t\t\t\t<li\n\t\t\t\t\t\t\t\t\tv-if=\"isTerminalItemVisible\"\n\t\t\t\t\t\t\t\t\t@click=\"isTerminalToolEnabled ? reload(ModeDictionary.terminalPayment) : openTerminalToolDisabledSlider()\"\n\t\t\t\t\t\t\t\t\t:class=\"paymentTerminalMenuItemClass\"\n\t\t\t\t\t\t\t\t\tclass=\"ui-sidepanel-menu-item\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link salescenter-menu-terminal-payment\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">\n\t\t\t\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_LEFT_TERMINAL_PAYMENT')}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</li>\n\t\n\t\t\t\t\t\t\t\t<li\n\t\t\t\t\t\t\t\t\tv-if=\"isPaymentItemVisible\"\n\t\t\t\t\t\t\t\t\t@click=\"isSalescenterToolEnabled ? reload(ModeDictionary.paymentDelivery) : openSalescanterToolDisabledSlider()\"\n\t\t\t\t\t\t\t\t\t:class=\"paymentDeliveryMenuItemClass\"\n\t\t\t\t\t\t\t\t\tclass=\"ui-sidepanel-menu-item\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">\n\t\t\t\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_LEFT_TAKE_PAYMENT_AND_CREATE_SHIPMENT')}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</template>\n\t\n\t\t\t\t\t\t<li class=\"ui-sidepanel-menu-item ui-sidepanel-menu-item-sm ui-sidepanel-menu-item-separate\">\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t@click=\"specifyCompanyContacts\"\n\t\t\t\t\t\t\t\tclass=\"ui-sidepanel-menu-link\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">\n\t\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_LEFT_PAYMENT_COMPANY_CONTACTS')}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li\n\t\t\t\t\t\t\tv-if=\"isSuggestScenarioMenuItemVisible\"\n\t\t\t\t\t\t\tclass=\"ui-sidepanel-menu-item ui-sidepanel-menu-item-sm\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t@click=\"suggestScenario($event)\"\n\t\t\t\t\t\t\t\tclass=\"ui-sidepanel-menu-link\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">\n\t\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_LEFT_PAYMENT_OFFER_SCRIPT')}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class=\"ui-sidepanel-menu-item ui-sidepanel-menu-item-sm\">\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t@click=\"howItWorks($event)\"\n\t\t\t\t\t\t\t\tclass=\"ui-sidepanel-menu-link\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">\n\t\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_LEFT_PAYMENT_HOW_WORKS')}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li\n\t\t\t\t\t\t\tv-if=\"isAllowedFreeMessagesButton\"\n\t\t\t\t\t\t\tclass=\"ui-sidepanel-menu-item ui-sidepanel-menu-item-sm\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t@click=\"freeMessages($event)\"\n\t\t\t\t\t\t\t\tclass=\"ui-sidepanel-menu-link\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">\n\t\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_LEFT_PAYMENT_FREE_MESSAGES')}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li\n\t\t\t\t\t\t\tv-if=\"isRequestIntegrationMenuItemVisible\"\n\t\t\t\t\t\t\tclass=\"ui-sidepanel-menu-item ui-sidepanel-menu-item-sm\">\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t@click=\"openIntegrationWindow($event)\"\n\t\t\t\t\t\t\t\tclass=\"ui-sidepanel-menu-link\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\"\n\t\t\t\t\t\t\t\t\t data-manager-openIntegrationRequestForm-params=\"sender_page:deal\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_LEFT_PAYMENT_INTEGRATION_MSGVER_3')}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"salescenter-app-right-side\">\n\t\t\t\t\t<start\n\t\t\t\t\t\tv-if=\"needShowStoreConnection && mode !== ModeDictionary.terminalPayment\"\n\t\t\t\t\t\t@on-successfully-connected=\"onSuccessfullyConnected\"\n\t\t\t\t\t>\n\t\t\t\t\t</start>\n\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t<deal-receiving-payment\n\t\t\t\t\t\t\tv-if=\"mode === ModeDictionary.paymentDelivery\"\n\t\t\t\t\t\t\t@stage-block-on-reload=\"onReload\"\n\t\t\t\t\t\t\t@stage-block-send-on-send=\"sendPaymentDeliveryForm($event)\"\n\t\t\t\t\t\t\t:sendAllowed=\"isAllowedPaymentDeliverySubmitButton\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<deal-creating-shipment\n\t\t\t\t\t\t\tv-else-if=\"mode === ModeDictionary.delivery\"\n\t\t\t\t\t\t\t@stage-block-send-on-send=\"sendDeliveryForm($event)\"\n\t\t\t\t\t\t\t:sendAllowed=\"isAllowedDeliverySubmitButton\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<crm-entity-create-payment\n\t\t\t\t\t\t\tv-if=\"mode === ModeDictionary.payment\"\n\t\t\t\t\t\t\t@stage-block-send-on-send=\"sendPaymentDeliveryForm($event)\"\n\t\t\t\t\t\t\t:sendAllowed=\"isAllowedPaymentDeliverySubmitButton\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<deal-terminal-payment\n\t\t\t\t\t\t\tv-if=\"mode === ModeDictionary.terminalPayment\"\n\t\t\t\t\t\t\t@stage-block-send-on-send=\"sendTerminalPaymentForm($event)\"\n\t\t\t\t\t\t\t@on-responsible-changed=\"onResponsibleChanged($event)\"\n\t\t\t\t\t\t\t:sendAllowed=\"isAllowedTerminalPaymentSubmitButton\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</template>\n\t\t\t\t</div>\n\t\t\t\t<template v-if=\"!(mode === 'terminal_payment' && templateMode === 'view' && !isTerminalViewModeSaveAllowed)\">\n\t\t\t\t\t<div class=\"ui-button-panel-wrapper salescenter-button-panel\" ref=\"buttonsPanel\" :class=\"{ 'salescenter-button-panel-hidden': !isPanelVisible }\">\n\t\t\t\t\t\t<div class=\"ui-button-panel\">\n\t\t\t\t\t\t\t<template v-if=\"mode === ModeDictionary.paymentDelivery || mode === ModeDictionary.payment\">\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t@click=\"sendPaymentDeliveryForm($event)\"\n\t\t\t\t\t\t\t\t\t:class=\"paymentDeliveryFormSubmitButtonClass\"\n\t\t\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-md ui-btn-success\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{{sendPaymentDeliveryFormButtonText}}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t@click=\"close\"\n\t\t\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-md ui-btn-link\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_CANCEL')}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t<template v-else-if=\"mode === 'terminal_payment'\">\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tv-if=\"editable\"\n\t\t\t\t\t\t\t\t\t@click=\"sendTerminalPaymentForm($event)\"\n\t\t\t\t\t\t\t\t\t:class=\"terminalPaymentFormSubmitButtonClass\"\n\t\t\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-md ui-btn-success\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_CREATE_TERMINAL_PAYMENT')}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tv-if=\"isTerminalViewModeSaveAllowed\"\n\t\t\t\t\t\t\t\t\t@click=\"sendTerminalPaymentForm($event)\"\n\t\t\t\t\t\t\t\t\t:class=\"terminalPaymentFormSubmitButtonClass\"\n\t\t\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-md ui-btn-success\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_SAVE')}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t@click=\"close\"\n\t\t\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-md ui-btn-link\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_CANCEL')}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t<template v-else-if=\"mode === ModeDictionary.delivery\">\n\t\t\t\t\t\t\t\t<template v-if=\"editable\">\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t@click=\"sendDeliveryForm($event)\"\n\t\t\t\t\t\t\t\t\t\t:class=\"deliveryFormSubmitButtonClass\"\n\t\t\t\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-md ui-btn-success\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_CREATE_SHIPMENT')}\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t@click=\"close\"\n\t\t\t\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-md ui-btn-link\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_CANCEL')}\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div v-if=\"this.order.errors.length > 0\" ref=\"errorBlock\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t</div>\n\t\t\t<div class=\"salescenter-app-pinner-anchor\" :class=\"{ 'salescenter-app-pinner-anchor-hidden': !isPanelVisible }\"></div>\n\t\t</div>\n\t`,\n};\n","import {VuexBuilderModel} from 'ui.vue.vuex';\n\nexport class ApplicationModel extends VuexBuilderModel\n{\n\t/**\n\t * @inheritDoc\n\t */\n\tgetName()\n\t{\n\t\treturn 'application';\n\t}\n\n\tgetState()\n\t{\n\t\treturn {\n\t\t\tpages: [],\n\t\t}\n\t}\n\n\tgetGetters()\n\t{\n\t\treturn {\n\t\t\tgetPages: (state) => () =>\n\t\t\t{\n\t\t\t\treturn state.pages;\n\t\t\t},\n\t\t}\n\t}\n\n\tgetMutations()\n\t{\n\t\treturn {\n\t\t\tsetPages: (state, payload) =>\n\t\t\t{\n\t\t\t\tif(typeof payload.pages === 'object')\n\t\t\t\t{\n\t\t\t\t\tstate.pages = payload.pages        ;\n\t\t\t\t\tthis.saveState(state);\n\t\t\t\t}\n\t\t\t},\n\t\t\tremovePage: (state, payload) =>\n\t\t\t{\n\t\t\t\tif(typeof payload.page === 'object')\n\t\t\t\t{\n\t\t\t\t\tstate.pages = state.pages.filter((page) => {\n\t\t\t\t\t\treturn !(\n\t\t\t\t\t\t\t(payload.page.id && payload.page.id > 0 && page.id === payload.page.id) ||\n\t\t\t\t\t\t\t(payload.page.landingId && payload.page.landingId > 0 && page.landingId === payload.page.landingId)\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\t\t\tthis.saveState(state);\n\t\t\t\t}\n\t\t\t},\n\t\t\taddPage: (state, payload) =>\n\t\t\t{\n\t\t\t\tif(typeof payload.page === 'object')\n\t\t\t\t{\n\t\t\t\t\tstate.pages.push(payload.page);\n\t\t\t\t\tthis.saveState(state);\n\t\t\t\t}\n\t\t\t},\n\t\t}\n\t}\n}","import {VuexBuilderModel} from 'ui.vue.vuex';\nimport {rest as Rest} from 'rest.client';\n\nexport class DocumentSelectorModel extends VuexBuilderModel\n{\n\t/**\n\t * @inheritDoc\n\t */\n\tgetName()\n\t{\n\t\treturn 'documentSelector';\n\t}\n\n\tgetActions()\n\t{\n\t\treturn {\n\t\t\taddDocument({commit, dispatch}, {document})\n\t\t\t{\n\t\t\t\tcommit('addDocument', {document});\n\t\t\t\tdispatch('setBoundDocumentId', {boundDocumentId: document.id});\n\t\t\t},\n\t\t\tsetBoundDocumentId({state, commit}, {boundDocumentId})\n\t\t\t{\n\t\t\t\tif (state.paymentId > 0)\n\t\t\t\t{\n\t\t\t\t\tRest.callMethod('crm.documentgenerator.document.bindToPayment', {\n\t\t\t\t\t\tid: boundDocumentId,\n\t\t\t\t\t\tpaymentId: state.paymentId,\n\t\t\t\t\t}).then(() => {\n\t\t\t\t\t\tcommit('setBoundDocumentId', {boundDocumentId});\n\t\t\t\t\t}).catch((response) => {\n\t\t\t\t\t\tconsole.error(response);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tcommit('setBoundDocumentId', {boundDocumentId});\n\t\t\t\t}\n\t\t\t},\n\t\t\tloadTemplates({state, commit})\n\t\t\t{\n\t\t\t\tif (Number(state.entityTypeId) <= 0 || Number(state.entityId) <= 0)\n\t\t\t\t{\n\t\t\t\t\tcommit('setTemplates', {templates: []});\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tRest.callMethod('crm.documentgenerator.template.listForItem', {\n\t\t\t\t\tentityTypeId: state.entityTypeId,\n\t\t\t\t\tentityId: state.entityId,\n\t\t\t\t}).then((response) => {\n\t\t\t\t\tif (response.answer.result.templates)\n\t\t\t\t\t{\n\t\t\t\t\t\tcommit('setTemplates', {templates: response.answer.result.templates});\n\t\t\t\t\t}\n\t\t\t\t}).catch((response) => {\n\t\t\t\t\tconsole.error(response);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\tgetState()\n\t{\n\t\treturn {\n\t\t\tentityTypeId: null,\n\t\t\tentityId: null,\n\t\t\tpaymentId: null,\n\t\t\tdocuments: [],\n\t\t\ttemplates: [],\n\t\t\tboundDocumentId: null,\n\t\t\tselectedTemplateId: null,\n\t\t}\n\t}\n\n\tgetGetters()\n\t{\n\t\treturn {\n\t\t\tgetTemplates: (state) => {\n\t\t\t\treturn state.templates;\n\t\t\t},\n\t\t\tgetDocuments: (state) => {\n\t\t\t\treturn state.documents;\n\t\t\t},\n\t\t\tgetBoundDocumentId: (state) => {\n\t\t\t\treturn state.boundDocumentId;\n\t\t\t},\n\t\t\tgetSelectedTemplateId: (state) => {\n\t\t\t\treturn state.selectedTemplateId;\n\t\t\t},\n\t\t}\n\t}\n\n\tgetMutations()\n\t{\n\t\treturn {\n\t\t\tfillState: (state, payload) => {\n\t\t\t\tstate.entityTypeId = payload.entityTypeId;\n\t\t\t\tstate.entityId = payload.entityId;\n\t\t\t\tstate.paymentId = payload.paymentId;\n\t\t\t\tstate.documents = payload.documents;\n\t\t\t\tstate.templates = payload.templates;\n\t\t\t\tstate.boundDocumentId = payload.boundDocumentId;\n\t\t\t\tstate.selectedTemplateId = payload.selectedTemplateId;\n\t\t\t},\n\t\t\tsetTemplates: (state, payload) => {\n\t\t\t\tif(typeof payload.templates === 'object')\n\t\t\t\t{\n\t\t\t\t\tstate.templates = payload.templates;\n\t\t\t\t}\n\t\t\t},\n\t\t\tsetBoundDocumentId: (state, payload) => {\n\t\t\t\tif(typeof payload.boundDocumentId === 'number')\n\t\t\t\t{\n\t\t\t\t\tstate.boundDocumentId = payload.boundDocumentId;\n\t\t\t\t}\n\t\t\t},\n\t\t\tsetSelectedTemplateId: (state, payload) => {\n\t\t\t\tif(typeof payload.selectedTemplateId === 'number')\n\t\t\t\t{\n\t\t\t\t\tstate.selectedTemplateId = payload.selectedTemplateId;\n\t\t\t\t\tstate.boundDocumentId = null;\n\t\t\t\t}\n\t\t\t},\n\t\t\taddDocument: (state, payload) => {\n\t\t\t\tif(typeof payload.document === 'object')\n\t\t\t\t{\n\t\t\t\t\tconst newDocument = payload.document;\n\t\t\t\t\tif (!newDocument.id)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tconst documents = state.documents || [];\n\t\t\t\t\tlet isUpdated = false;\n\t\t\t\t\tfor (const index in documents)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (documents[index].id === newDocument.id)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tdocuments[index] = newDocument;\n\t\t\t\t\t\t\tisUpdated = true;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (!isUpdated)\n\t\t\t\t\t{\n\t\t\t\t\t\tdocuments.unshift(newDocument);\n\t\t\t\t\t}\n\t\t\t\t\tstate.documents = documents;\n\t\t\t\t}\n\t\t\t},\n\t\t}\n\t}\n}\n","import {VuexBuilderModel} from 'ui.vue.vuex';\n\nexport class OrderCreationModel extends VuexBuilderModel\n{\n\t/**\n\t * @inheritDoc\n\t */\n\tgetName()\n\t{\n\t\treturn 'orderCreation';\n\t}\n\n\tgetState()\n\t{\n\t\treturn {\n\t\t\tcurrency: '',\n\t\t\tprocessingId: null,\n\t\t\tbasket: [],\n\t\t\tbasketVersion: 0,\n\t\t\tpropertyValues: [],\n\t\t\tdeliveryExtraServicesValues: [],\n\t\t\texpectedDelivery: null,\n\t\t\tdeliveryResponsibleId: null,\n\t\t\tpersonTypeId: null,\n\t\t\tdeliveryId: null,\n\t\t\tdelivery: null,\n\t\t\tisEnabledSubmit: false,\n\t\t\tisSenderSelected: true,\n\t\t\tisCompilationMode: false,\n\t\t\terrors: [],\n\t\t\ttotal: {\n\t\t\t\tsum: null,\n\t\t\t\tdiscount: null,\n\t\t\t\tresult: null,\n\t\t\t},\n\t\t\t/**\n\t\t\t * ID of selected pay systems available for order payment\n\t\t\t */\n\t\t\tavailablePaySystemsIds: [],\n\t\t\tpaymentResponsibleId: null,\n\t\t\tisMobileInstalledForResponsible: false,\n\t\t\tresponsiblePhoneNumbers: [],\n\t\t};\n\t}\n\n\tgetActions()\n\t{\n\t\treturn {\n\t\t\tresetBasket ({ commit })\n\t\t\t{\n\t\t\t\tcommit('clearBasket');\n\t\t\t},\n\t\t\tsetCurrency: ({ commit }, payload) =>\n\t\t\t{\n\t\t\t\tconst currency = payload || '';\n\t\t\t\tcommit('setCurrency', currency);\n\t\t\t},\n\t\t\tsetDeliveryId: ({ commit }, payload) =>\n\t\t\t{\n\t\t\t\tcommit('setDeliveryId', payload);\n\t\t\t},\n\t\t\tsetDelivery: ({ commit }, payload) =>\n\t\t\t{\n\t\t\t\tcommit('setDelivery', payload);\n\t\t\t},\n\t\t\tsetPropertyValues: ({ commit }, payload) =>\n\t\t\t{\n\t\t\t\tcommit('setPropertyValues', payload);\n\t\t\t},\n\t\t\tsetDeliveryExtraServicesValues: ({ commit }, payload) =>\n\t\t\t{\n\t\t\t\tcommit('setDeliveryExtraServicesValues', payload);\n\t\t\t},\n\t\t\tsetExpectedDelivery: ({ commit }, payload) =>\n\t\t\t{\n\t\t\t\tcommit('setExpectedDelivery', payload);\n\t\t\t},\n\t\t\tsetDeliveryResponsibleId: ({ commit }, payload) =>\n\t\t\t{\n\t\t\t\tcommit('setDeliveryResponsibleId', payload);\n\t\t\t},\n\t\t\tsetPaymentResponsibleId: ({ commit }, payload) =>\n\t\t\t{\n\t\t\t\tcommit('setPaymentResponsibleId', payload);\n\t\t\t},\n\t\t\tsetMobileInstalledForResponsible: ({ commit }, payload) =>\n\t\t\t{\n\t\t\t\tcommit('setMobileInstalledForResponsible', payload);\n\t\t\t},\n\t\t\tsetResponsiblePhoneNumbers: ({ commit }, payload) =>\n\t\t\t{\n\t\t\t\tcommit('setResponsiblePhoneNumbers', payload);\n\t\t\t},\n\t\t\tsetPersonTypeId: ({ commit }, payload) =>\n\t\t\t{\n\t\t\t\tcommit('setPersonTypeId', payload);\n\t\t\t},\n\t\t\tsetAvailablePaySystemsIds: ({ commit }, payload) =>\n\t\t\t{\n\t\t\t\tcommit('setAvailablePaySystemsIds', payload);\n\t\t\t},\n\t\t}\n\t}\n\n\tgetGetters()\n\t{\n\t\treturn {\n\t\t\tgetBasket: state => index =>\n\t\t\t{\n\t\t\t\treturn state.basket;\n\t\t\t},\n\t\t\tisAllowedSubmit: state =>\n\t\t\t{\n\t\t\t\treturn state.isEnabledSubmit && state.isSenderSelected;\n\t\t\t},\n\t\t\tisCompilationMode: state =>\n\t\t\t{\n\t\t\t\treturn state.isCompilationMode;\n\t\t\t},\n\t\t\tgetTotal: state =>\n\t\t\t{\n\t\t\t\treturn state.total;\n\t\t\t},\n\t\t\tgetDelivery: state =>\n\t\t\t{\n\t\t\t\treturn state.delivery;\n\t\t\t},\n\t\t\tgetDeliveryId: state =>\n\t\t\t{\n\t\t\t\treturn state.deliveryId;\n\t\t\t},\n\t\t\tgetPropertyValues: state =>\n\t\t\t{\n\t\t\t\treturn state.propertyValues;\n\t\t\t},\n\t\t\tgetDeliveryExtraServicesValues: state =>\n\t\t\t{\n\t\t\t\treturn state.deliveryExtraServicesValues;\n\t\t\t},\n\t\t\tgetExpectedDelivery: state =>\n\t\t\t{\n\t\t\t\treturn state.expectedDelivery;\n\t\t\t},\n\t\t\tgetDeliveryResponsibleId: state =>\n\t\t\t{\n\t\t\t\treturn state.deliveryResponsibleId;\n\t\t\t},\n\t\t\tgetPaymentResponsibleId: state =>\n\t\t\t{\n\t\t\t\treturn state.paymentResponsibleId;\n\t\t\t},\n\t\t\tisMobileInstalledForResponsible: state =>\n\t\t\t{\n\t\t\t\treturn state.isMobileInstalledForResponsible;\n\t\t\t},\n\t\t\tgetResponsiblePhoneNumbers: state =>\n\t\t\t{\n\t\t\t\treturn state.responsiblePhoneNumbers;\n\t\t\t},\n\t\t\tgetPersonTypeId: state =>\n\t\t\t{\n\t\t\t\treturn state.personTypeId;\n\t\t\t},\n\t\t\tgetAvailablePaySystemsIds: state =>\n\t\t\t{\n\t\t\t\treturn state.availablePaySystemsIds;\n\t\t\t},\n\t\t}\n\t}\n\n\tgetMutations()\n\t{\n\t\treturn {\n\t\t\tsetBasket: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.basket = payload;\n\t\t\t},\n\t\t\tsetTotal: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.total = Object.assign(state.total, payload);\n\t\t\t},\n\t\t\tclearBasket: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.basket = [];\n\t\t\t\tstate.basketVersion++ ;\n\t\t\t},\n\t\t\tsetErrors: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.errors = payload;\n\t\t\t},\n\t\t\tsetDeliveryId: (state, deliveryId) =>\n\t\t\t{\n\t\t\t\tstate.deliveryId = deliveryId;\n\t\t\t},\n\t\t\tsetDelivery: (state, delivery) =>\n\t\t\t{\n\t\t\t\tstate.delivery = delivery;\n\t\t\t},\n\t\t\tsetPropertyValues: (state, propertyValues) =>\n\t\t\t{\n\t\t\t\tstate.propertyValues = propertyValues;\n\t\t\t},\n\t\t\tsetDeliveryExtraServicesValues: (state, deliveryExtraServicesValues) =>\n\t\t\t{\n\t\t\t\tstate.deliveryExtraServicesValues = deliveryExtraServicesValues;\n\t\t\t},\n\t\t\tsetExpectedDelivery: (state, expectedDelivery) =>\n\t\t\t{\n\t\t\t\tstate.expectedDelivery = expectedDelivery;\n\t\t\t},\n\t\t\tsetDeliveryResponsibleId: (state, deliveryResponsibleId) =>\n\t\t\t{\n\t\t\t\tstate.deliveryResponsibleId = deliveryResponsibleId;\n\t\t\t},\n\t\t\tsetPaymentResponsibleId: (state, paymentResponsibleId) =>\n\t\t\t{\n\t\t\t\tstate.paymentResponsibleId = paymentResponsibleId;\n\t\t\t},\n\t\t\tsetMobileInstalledForResponsible: (state, isMobileInstalledForResponsible) =>\n\t\t\t{\n\t\t\t\tstate.isMobileInstalledForResponsible = isMobileInstalledForResponsible;\n\t\t\t},\n\t\t\tsetResponsiblePhoneNumbers: (state, responsiblePhoneNumbers) =>\n\t\t\t{\n\t\t\t\tstate.responsiblePhoneNumbers = responsiblePhoneNumbers;\n\t\t\t},\n\t\t\tclearErrors: (state) =>\n\t\t\t{\n\t\t\t\tstate.errors = [];\n\t\t\t},\n\t\t\tsetProcessingId: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.processingId = payload;\n\t\t\t},\n\t\t\tsetCurrency: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.currency = payload;\n\t\t\t},\n\t\t\tsetPersonTypeId: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.personTypeId = payload;\n\t\t\t},\n\t\t\tsetAvailablePaySystemsIds: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.availablePaySystemsIds = payload;\n\t\t\t},\n\t\t\tsetIsSenderSelected: (state, isSelected) =>\n\t\t\t{\n\t\t\t\tstate.isSenderSelected = isSelected;\n\t\t\t},\n\t\t\tenableSubmit: (state) =>\n\t\t\t{\n\t\t\t\tstate.isEnabledSubmit = true;\n\t\t\t},\n\t\t\tdisableSubmit: (state) =>\n\t\t\t{\n\t\t\t\tstate.isEnabledSubmit = false;\n\t\t\t},\n\t\t\tenableCompilationMode: (state) =>\n\t\t\t{\n\t\t\t\tstate.isCompilationMode = true;\n\t\t\t},\n\t\t\tdisableCompilationMode: (state) =>\n\t\t\t{\n\t\t\t\tstate.isCompilationMode = false;\n\t\t\t},\n\t\t}\n\t}\n}\n","import { Loc, Tag, Text, Event, ajax as Ajax } from 'main.core';\nimport { Popup } from 'main.popup';\nimport { Button, ButtonIcon, ButtonState } from 'ui.buttons';\nimport { App } from '../../app';\n\ntype MobileAppInstallPopupOptions = {\n\tsendersConfig: Array,\n\tphoneNumbers: Array,\n\tuserId: number,\n\troot: App,\n}\n\nclass MobileAppInstallPopup\n{\n\tconstructor(options: MobileAppInstallPopupOptions)\n\t{\n\t\tthis.initSenders(options.sendersConfig);\n\t\tthis.phoneNumbers = options.phoneNumbers;\n\t\tthis.userId = options.userId;\n\t\tthis.root = options.root;\n\n\t\tthis.selectedPhoneNumber = this.phoneNumbers?.[0] ?? null;\n\t\tthis.selectedSender = this.senders?.[0] ?? null;\n\n\t\t/** @type Popup  */\n\t\tthis.mainPopup = null;\n\t\t/** @type Button */\n\t\tthis.sendButton = null;\n\t\tthis.sendersMenu = null;\n\t\tthis.phoneMenu = null;\n\t}\n\n\tinitSenders(sendersData)\n\t{\n\t\tthis.sendersConfig = sendersData.find((item) => item.code === 'sms_provider');\n\t\tthis.senders = this.sendersConfig?.smsSenders;\n\t}\n\n\trender()\n\t{\n\t\tconst popupContent = this.getPopupContent();\n\n\t\tconst linkButton = new Button({\n\t\t\tid: 'copy-install-link',\n\t\t\tcolor: Button.Color.LINK,\n\t\t\tround: true,\n\t\t\ticon: ButtonIcon.COPY,\n\t\t\ttext: Loc.getMessage('SALESCENTER_TERMINAL_MOBILE_POPUP_BTN_LINK'),\n\t\t});\n\n\t\tthis.sendButton = new Button({\n\t\t\tstate: (this.selectedPhoneNumber && this.selectedSender) ? null : ButtonState.DISABLED,\n\t\t\tcolor: Button.Color.PRIMARY,\n\t\t\tround: true,\n\t\t\ttext: Loc.getMessage('SALESCENTER_TERMINAL_MOBILE_POPUP_BTN_SEND'),\n\t\t\tonclick: () => {\n\t\t\t\tthis.sendButton.setClocking();\n\t\t\t\tthis.sendSms();\n\t\t\t},\n\t\t});\n\n\t\tthis.mainPopup = new Popup({\n\t\t\tclassName: 'salescenter-popup-mobile',\n\t\t\toverlay: true,\n\t\t\tcontent: popupContent,\n\t\t\tcloseIcon: true,\n\t\t\tmaxWidth: 666,\n\t\t\tbuttons: [\n\t\t\t\tthis.sendButton,\n\t\t\t\tlinkButton,\n\t\t\t],\n\t\t\tevents: {\n\t\t\t\tonClose: () => {\n\t\t\t\t\tthis.root.closeApplication();\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\n\t\tthis.mainPopup.show();\n\n\t\tthis.bindCopyLink(linkButton);\n\n\t\tthis.bindSelectors();\n\t}\n\n\tsendSms()\n\t{\n\t\tAjax.runAction('salescenter.terminalResponsible.sendLinkToMobileApp', {\n\t\t\tdata: {\n\t\t\t\tuserId: this.userId,\n\t\t\t\tphone: this.selectedPhoneNumber,\n\t\t\t\tsenderId: this.selectedSender.id,\n\t\t\t\tentity: {\n\t\t\t\t\tentityTypeId: this.root.ownerTypeId,\n\t\t\t\t\tentityId: this.root.ownerId,\n\t\t\t\t},\n\t\t\t},\n\t\t}).then((result) => {\n\t\t\tthis.mainPopup.close();\n\t\t\tthis.root.closeApplication();\n\t\t});\n\t}\n\n\tbindCopyLink(linkButton)\n\t{\n\t\tBX.clipboard.bindCopyClick(linkButton.getContainer(), {\n\t\t\ttext: this.root.options.mobileAppLink,\n\t\t});\n\t}\n\n\tbindSelectors()\n\t{\n\t\tthis.bindSendersSelector();\n\t\tthis.bindPhoneSelector();\n\t}\n\n\tbindSendersSelector()\n\t{\n\t\tconst sendersSelector = document.getElementById('senders-selector');\n\n\t\tif (this.selectedSender)\n\t\t{\n\t\t\tEvent.bind(sendersSelector, 'click', () => {\n\t\t\t\tconst menuItems = [];\n\t\t\t\tthis.senders.forEach((sender) => {\n\t\t\t\t\tmenuItems.push({\n\t\t\t\t\t\ttext: Text.encode(sender.name),\n\t\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\t\tthis.selectedSender = sender;\n\t\t\t\t\t\t\tsendersSelector.firstChild.innerText = Text.encode(this.selectedSender.name);\n\t\t\t\t\t\t\tthis.sendersMenu?.close();\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\t\t\t\t});\n\n\t\t\t\tBX.PopupMenu.show(\n\t\t\t\t\t'sender-menu',\n\t\t\t\t\tsendersSelector,\n\t\t\t\t\tmenuItems,\n\t\t\t\t\t{\n\t\t\t\t\t\toffsetTop: 0,\n\t\t\t\t\t\toffsetLeft: 36,\n\t\t\t\t\t\tangle: { position: 'top', offset: 0 },\n\t\t\t\t\t},\n\t\t\t\t);\n\n\t\t\t\tthis.sendersMenu = BX.PopupMenu.getCurrentMenu();\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tEvent.bind(sendersSelector, 'click', () => {\n\t\t\t\tBX.SidePanel.Instance.open(\n\t\t\t\t\tthis.sendersConfig.connectUrl,\n\t\t\t\t\t{\n\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\tonClose: () => {\n\t\t\t\t\t\t\t\tthis.refresh();\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t});\n\t\t}\n\t}\n\n\tbindPhoneSelector()\n\t{\n\t\tconst phoneSelector = document.getElementById('phone-selector');\n\n\t\tif (this.selectedPhoneNumber)\n\t\t{\n\t\t\tEvent.bind(phoneSelector, 'click', () => {\n\t\t\t\tconst menuItems = [];\n\t\t\t\tthis.phoneNumbers.forEach((phoneNumber) => {\n\t\t\t\t\tmenuItems.push({\n\t\t\t\t\t\ttext: Text.encode(phoneNumber),\n\t\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\t\tthis.selectedPhoneNumber = phoneNumber;\n\t\t\t\t\t\t\tphoneSelector.firstChild.innerText = Text.encode(this.selectedPhoneNumber);\n\t\t\t\t\t\t\tthis.phoneMenu?.close();\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\t\t\t\t});\n\n\t\t\t\tBX.PopupMenu.show(\n\t\t\t\t\t'phone-menu',\n\t\t\t\t\tphoneSelector,\n\t\t\t\t\tmenuItems,\n\t\t\t\t\t{\n\t\t\t\t\t\toffsetTop: 0,\n\t\t\t\t\t\toffsetLeft: 36,\n\t\t\t\t\t\tangle: { position: 'top', offset: 0 },\n\t\t\t\t\t},\n\t\t\t\t);\n\n\t\t\t\tthis.phoneMenu = BX.PopupMenu.getCurrentMenu();\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tEvent.bind(phoneSelector, 'click', () => {\n\t\t\t\tBX.SidePanel.Instance.open(\n\t\t\t\t\t`/company/personal/user/${this.userId}/`,\n\t\t\t\t\t{\n\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\tonClose: () => {\n\t\t\t\t\t\t\t\tthis.refresh();\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t});\n\t\t}\n\t}\n\n\trefresh()\n\t{\n\t\tAjax.runAction('salescenter.terminalResponsible.refreshDataForSendingLink', {\n\t\t\tdata: {\n\t\t\t\tuserId: this.userId,\n\t\t\t},\n\t\t}).then((result) => {\n\t\t\tthis.initSenders(result.data.senders);\n\t\t\tthis.phoneNumbers = result.data.phones;\n\n\t\t\tthis.selectedPhoneNumber = this.phoneNumbers?.[0] ?? null;\n\t\t\tthis.selectedSender = this.senders?.[0] ?? null;\n\n\t\t\tthis.updateSendButtonState();\n\t\t\tthis.updateContent();\n\t\t});\n\t}\n\n\tupdateSendButtonState()\n\t{\n\t\tthis.sendButton.setDisabled(!Boolean(this.selectedPhoneNumber && this.selectedSender));\n\t}\n\n\tupdateContent()\n\t{\n\t\tthis.mainPopup.setContent(this.getPopupContent());\n\t\tthis.bindSelectors();\n\t}\n\n\tgetPopupContent()\n\t{\n\t\t// all for the sake of localization\n\t\tlet phoneAndServiceContent = '';\n\t\tif (this.selectedSender)\n\t\t{\n\t\t\tphoneAndServiceContent = Loc.getMessage(\n\t\t\t\t'SALESCENTER_TERMINAL_MOBILE_POPUP_SENDER_AND_PHONE',\n\t\t\t\t{\n\t\t\t\t\t'[main]': '<div class=\"salescenter-popup-mobile__service\">',\n\t\t\t\t\t'[/main]': '</div>',\n\t\t\t\t\t'[number]': '<div class=\"salescenter-popup-mobile__service-box\"><div class=\"salescenter-popup-mobile__service-name\">',\n\t\t\t\t\t'#NUMBER#': `\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"salescenter-popup-mobile__service-inline\" id=\"phone-selector\">\n\t\t\t\t\t\t\t<div class=\"salescenter-popup-mobile__service-value\">\n\t\t\t\t\t\t\t\t${\n\t\t\t\t\t\t\tthis.selectedPhoneNumber\n\t\t\t\t\t\t\t\t? Text.encode(this.selectedPhoneNumber)\n\t\t\t\t\t\t\t\t: Loc.getMessage('SALESCENTER_TERMINAL_MOBILE_POPUP_ADD_PHONE')\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t`,\n\t\t\t\t\t'[/number]': `\n\t\t\t\t\t\t\t${this.selectedPhoneNumber ? '<div class=\"ui-icon-set --chevron-down\"></div>' : ''}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t`,\n\t\t\t\t\t'[service]': '<div class=\"salescenter-popup-mobile__service-box\"><div class=\"salescenter-popup-mobile__service-name\">',\n\t\t\t\t\t'#SERVICE#': `\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"salescenter-popup-mobile__service-inline\" id=\"senders-selector\">\n\t\t\t\t\t\t\t<div class=\"salescenter-popup-mobile__service-value\">${Text.encode(this.selectedSender.name)}</div>\n\t\t\t\t\t`,\n\t\t\t\t\t'[/service]': `\n\t\t\t\t\t\t\t<div class=\"ui-icon-set --chevron-down\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t`,\n\t\t\t\t},\n\t\t\t);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tphoneAndServiceContent = Loc.getMessage(\n\t\t\t\t'SALESCENTER_TERMINAL_MOBILE_POPUP_SENDER_AND_PHONE_NO_SENDER',\n\t\t\t\t{\n\t\t\t\t\t'[main]': '<div class=\"salescenter-popup-mobile__service\">',\n\t\t\t\t\t'[/main]': '</div>',\n\t\t\t\t\t'[number]': '<div class=\"salescenter-popup-mobile__service-box\"><div class=\"salescenter-popup-mobile__service-name\">',\n\t\t\t\t\t'#NUMBER#': `\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"salescenter-popup-mobile__service-inline\" id=\"phone-selector\">\n\t\t\t\t\t\t\t<div class=\"salescenter-popup-mobile__service-value\">\n\t\t\t\t\t\t\t\t${\n\t\t\t\t\t\t\t\t\tthis.selectedPhoneNumber\n\t\t\t\t\t\t\t\t\t\t? Text.encode(this.selectedPhoneNumber)\n\t\t\t\t\t\t\t\t\t\t: Loc.getMessage('SALESCENTER_TERMINAL_MOBILE_POPUP_ADD_PHONE')\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t`,\n\t\t\t\t\t'[/number]': `\n\t\t\t\t\t\t\t${this.selectedPhoneNumber ? '<div class=\"ui-icon-set --chevron-down\"></div>' : ''}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t`,\n\t\t\t\t\t'[service]': '<div class=\"salescenter-popup-mobile__service-box\"><div class=\"salescenter-popup-mobile__service-inline\" id=\"senders-selector\"><div class=\"salescenter-popup-mobile__service-value\">',\n\t\t\t\t\t'[/service]': `\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"ui-icon-set --chevron-down\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t`,\n\t\t\t\t},\n\t\t\t);\n\t\t}\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"salescenter-popup-mobile__wrap\">\n\t\t\t\t<div class=\"salescenter-popup-mobile__icon-box\">\n\t\t\t\t\t<div class=\"salescenter-popup-mobile__icon\"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"salescenter-popup-mobile__content\">\n\t\t\t\t\t<div class=\"salescenter-popup-mobile__title\">${Loc.getMessage('SALESCENTER_TERMINAL_MOBILE_POPUP_TITLE')}</div>\n\t\t\t\t\t${phoneAndServiceContent}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n}\n\nexport { MobileAppInstallPopup };\n","import { ajax as Ajax, Event, Loc, Tag, Text, Type } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { Loader } from 'main.loader';\nimport { MenuManager, Popup } from 'main.popup';\nimport { rest as Rest } from 'rest.client';\nimport { Manager } from 'salescenter.manager';\nimport { Button } from 'ui.buttons';\nimport { PhoneVerify } from 'bitrix24.phoneverify';\nimport 'ui.design-tokens';\nimport 'ui.fonts.opensans';\nimport 'ui.notification';\nimport { MessageBox } from 'ui.dialogs.messagebox';\nimport { Vue } from 'ui.vue';\nimport { VuexBuilder } from 'ui.vue.vuex';\nimport Chat from './chat';\nimport { ContextDictionary } from './const/context-dictionary';\nimport './css/component.css';\nimport Deal from './deal';\nimport { ApplicationModel } from './models/application';\nimport { Backend } from 'landing.backend';\nimport { PageObject } from 'landing.pageobject';\nimport { DocumentSelectorModel } from './models/document-selector';\nimport { OrderCreationModel } from './models/ordercreation';\nimport 'ui.icon-set.actions';\nimport { MobileAppInstallPopup } from './components/deal-terminal-payment/mobile-app-install-popup';\n\nconst instances = new Map();\n\nexport class App\n{\n\tstatic getByDialogId(dialogId: string): ?App\n\t{\n\t\treturn instances.get(dialogId) || null;\n\t}\n\n\tconstructor(options = {\n\t\tdialogId: null,\n\t\tsessionId: null,\n\t\tlineId: null,\n\t\torderAddPullTag: null,\n\t\tlandingPublicationPullTag: null,\n\t\tlandingUnPublicationPullTag: null,\n\t\tisFrame: true,\n\t\tisOrderPublicUrlAvailable: false,\n\t\tisCatalogAvailable: false,\n\t\tisOrderPublicUrlExists: false,\n\t\tisWithOrdersMode: true,\n\t\tcompilation: null,\n\t\tdocumentSelector: DocumentSelectorParams|null,\n\t})\n\t{\n\t\tthis.slider = BX.SidePanel.Instance.getTopSlider();\n\t\tthis.dialogId = options.dialogId;\n\t\tthis.sessionId = parseInt(options.sessionId);\n\t\tthis.lineId = parseInt(options.lineId);\n\t\tthis.orderAddPullTag = options.orderAddPullTag;\n\t\tthis.landingPublicationPullTag = options.landingPublicationPullTag;\n\t\tthis.landingUnPublicationPullTag = options.landingUnPublicationPullTag;\n\t\tthis.paySystemList = options.paySystemList;\n\t\tthis.cashboxList = options.cashboxList;\n\t\tthis.options = options;\n\t\tthis.isProgress = false;\n\t\tthis.fillPagesTimeout = false;\n\t\tthis.disableSendButton = false;\n\t\tthis.context = '';\n\t\tthis.fillPagesQueue = [];\n\t\tthis.ownerTypeId = '';\n\t\tthis.ownerId = '';\n\t\tthis.orderId = parseInt(options.orderId);\n\t\tthis.stageOnOrderPaid = null;\n\t\tthis.stageOnDeliveryFinished = null;\n\t\tthis.sendingMethod = '';\n\t\tthis.sendingMethodDesc = {};\n\t\tthis.orderPublicUrl = '';\n\t\tthis.fileControl = options.fileControl;\n\t\tthis.currencyCode = options.currencyCode;\n\t\tthis.compilation = null;\n\t\tthis.newCompilationId = null;\n\t\tthis.assignedById = options.assignedById;\n\t\tthis.isPhoneConfirmed = options.isPhoneConfirmed;\n\n\t\tif(Type.isString(options.stageOnOrderPaid))\n\t\t{\n\t\t\tthis.stageOnOrderPaid = options.stageOnOrderPaid;\n\t\t}\n\n\t\tif(Type.isString(options.stageOnDeliveryFinished))\n\t\t{\n\t\t\tthis.stageOnDeliveryFinished = options.stageOnDeliveryFinished;\n\t\t}\n\n\t\tif(Type.isBoolean(options.isFrame))\n\t\t{\n\t\t\tthis.isFrame = options.isFrame;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.isFrame = true;\n\t\t}\n\n\t\tif(Type.isBoolean(options.isOrderPublicUrlAvailable))\n\t\t{\n\t\t\tthis.isOrderPublicUrlAvailable = options.isOrderPublicUrlAvailable;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.isOrderPublicUrlAvailable = false;\n\t\t}\n\n\t\tif(Type.isBoolean(options.isOrderPublicUrlExists))\n\t\t{\n\t\t\tthis.isOrderPublicUrlExists = options.isOrderPublicUrlExists;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.isOrderPublicUrlExists = false;\n\t\t}\n\n\t\tif(Type.isString(options.orderPublicUrl))\n\t\t{\n\t\t\tthis.orderPublicUrl = options.orderPublicUrl;\n\t\t}\n\n\t\tif(Type.isBoolean(options.isCatalogAvailable))\n\t\t{\n\t\t\tthis.isCatalogAvailable = options.isCatalogAvailable;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.isCatalogAvailable = false;\n\t\t}\n\n\t\tif(Type.isBoolean(options.isWithOrdersMode))\n\t\t{\n\t\t\tthis.isWithOrdersMode = options.isWithOrdersMode;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.isWithOrdersMode = false;\n\t\t}\n\n\t\tif(Type.isBoolean(options.disableSendButton))\n\t\t{\n\t\t\tthis.disableSendButton = options.disableSendButton;\n\t\t}\n\n\t\tif(options.ownerTypeId)\n\t\t{\n\t\t\tthis.ownerTypeId = options.ownerTypeId;\n\t\t}\n\n\t\tif(options.ownerId)\n\t\t{\n\t\t\tthis.ownerId = options.ownerId;\n\t\t}\n\n\t\tif(Type.isString(options.context) && options.context.length > 0)\n\t\t{\n\t\t\tthis.context = options.context;\n\t\t}\n\t\telse if(this.sessionId && this.dialogId)\n\t\t{\n\t\t\tthis.context = ContextDictionary.imOpenlines;\n\t\t}\n\n\t\tif(Type.isBoolean(options.isPaymentsLimitReached))\n\t\t{\n\t\t\tthis.isPaymentsLimitReached = options.isPaymentsLimitReached;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.isPaymentsLimitReached = false;\n\t\t}\n\n\t\tif(!Type.isUndefined(options.sendingMethod))\n\t\t{\n\t\t\tthis.sendingMethod = options.sendingMethod;\n\t\t}\n\t\tif(!Type.isUndefined(options.sendingMethodDesc))\n\t\t{\n\t\t\tthis.sendingMethodDesc = this.options.sendingMethodDesc;\n\t\t}\n\n\t\tif(Type.isObject(options.compilation))\n\t\t{\n\t\t\tthis.compilation = options.compilation;\n\t\t}\n\n\t\tthis.isPaymentCreationAvailable = (\n\t\t\t(this.sessionId > 0 && this.dialogId.length > 0) || (this.ownerTypeId && this.ownerId)\n\t\t);\n\t\tthis.connector = Type.isString(options.connector) ? options.connector : '';\n\n\t\tthis.isAllowedFacebookRegion = Type.isBoolean(options.isAllowedFacebookRegion) ? options.isAllowedFacebookRegion : false;\n\n\t\tif (Type.isPlainObject(options.documentSelector))\n\t\t{\n\t\t\tthis.documentSelector = options.documentSelector;\n\t\t\tthis.documentSelector.paymentId = this.options.paymentId;\n\t\t}\n\n\t\tEvent.ready(() =>\n\t\t{\n\t\t\tthis.pull = BX.PULL;\n\t\t\tthis.initPull();\n\t\t\tthis.isSiteExists = Manager.isSiteExists;\n\t\t});\n\n\t\tApp.initStore()\n\t\t\t.then((result) => this.initTemplate(result))\n\t\t\t.catch((error) => App.showError(error))\n\t\t;\n\n\t\tEventEmitter.subscribe(window.parent, 'onSendCompilationChatButtonClick', this.sendCompilation.bind(this));\n\n\t\tinstances.set(this.dialogId, this);\n\t}\n\n\tstatic initStore()\n\t{\n\t\tconst builder = new VuexBuilder();\n\n\t\treturn builder.addModel(ApplicationModel.create())\n\t\t\t.addModel(OrderCreationModel.create())\n\t\t\t.addModel(DocumentSelectorModel.create())\n\t\t\t.useNamespace(true)\n\t\t\t.build();\n\t}\n\n\tinitPull()\n\t{\n\t\tif(this.pull)\n\t\t{\n\t\t\tif(Type.isString(this.orderAddPullTag))\n\t\t\t{\n\t\t\t\tthis.pull.subscribe({\n\t\t\t\t\tmoduleId: 'salescenter',\n\t\t\t\t\tcommand: this.orderAddPullTag,\n\t\t\t\t\tcallback: (params) =>\n\t\t\t\t\t{\n\t\t\t\t\t\tif(parseInt(params.sessionId) === this.sessionId && params.orderId > 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tManager.showOrdersListAfterCreate(params.orderId);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif(Type.isString(this.landingPublicationPullTag))\n\t\t\t{\n\t\t\t\tthis.pull.subscribe({\n\t\t\t\t\tmoduleId: 'salescenter',\n\t\t\t\t\tcommand: this.landingPublicationPullTag,\n\t\t\t\t\tcallback: (params) =>\n\t\t\t\t\t{\n\t\t\t\t\t\tif(parseInt(params.landingId) > 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.fillPages();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(params.hasOwnProperty('isOrderPublicUrlAvailable') && Type.isBoolean(params.isOrderPublicUrlAvailable))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.isOrderPublicUrlAvailable = params.isOrderPublicUrlAvailable;\n\t\t\t\t\t\t\tthis.isOrderPublicUrlExists = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif(Type.isString(this.landingUnPublicationPullTag))\n\t\t\t{\n\t\t\t\tthis.pull.subscribe({\n\t\t\t\t\tmoduleId: 'salescenter',\n\t\t\t\t\tcommand: this.landingUnPublicationPullTag,\n\t\t\t\t\tcallback: (params) =>\n\t\t\t\t\t{\n\t\t\t\t\t\tif(parseInt(params.landingId) > 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.fillPages();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(params.hasOwnProperty('isOrderPublicUrlAvailable') && Type.isBoolean(params.isOrderPublicUrlAvailable))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.isOrderPublicUrlAvailable = params.isOrderPublicUrlAvailable;\n\t\t\t\t\t\t\tthis.isOrderPublicUrlExists = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\tinitTemplate(result)\n\t{\n\t\treturn new Promise((resolve) =>\n\t\t{\n\t\t\tconst context = this;\n\t\t\tthis.store = result.store;\n\n\t\t\tthis.templateEngine = Vue.create({\n\t\t\t\tel: document.getElementById('salescenter-app-root'),\n\t\t\t\tcomponents: {\n\t\t\t\t\t'chat': Chat,\n\t\t\t\t\t'deal': Deal,\n\t\t\t\t},\n\t\t\t\ttemplate:\n\t\t\t\t\tthis.isPaymentMode()\n\t\t\t\t\t\t? `<deal :key=\"componentKey\" @on-reload=\"reload\"/>`\n\t\t\t\t\t\t: `<chat :key=\"componentKey\" @on-reload=\"reload\"/>`\n\t\t\t\t\t,\n\t\t\t\tstore: this.store,\n\t\t\t\tcreated()\n\t\t\t\t{\n\t\t\t\t\tthis.$app = context;\n\t\t\t\t\tthis.$nodes = {\n\t\t\t\t\t\tfooter: document.getElementById('footer'),\n\t\t\t\t\t\tleftPanel: document.getElementById('left-panel'),\n\t\t\t\t\t\ttitle: document.getElementById('pagetitle'),\n\t\t\t\t\t\tpaymentsLimit: document.getElementById('salescenter-payment-limit-container'),\n\t\t\t\t\t\torderSelector: document.getElementById('salescenter-app-order-selector'),\n\t\t\t\t\t};\n\t\t\t\t\tthis.initOrderSelector();\n\t\t\t\t\tif (context.documentSelector)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$store.commit('documentSelector/fillState', context.documentSelector);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (this.$app.options.showCompilationModeSwitcher === 'N')\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$store.commit('orderCreation/enableCompilationMode');\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tmounted()\n\t\t\t\t{\n\t\t\t\t\tresolve();\n\t\t\t\t},\n\t\t\t\tmethods: {\n\t\t\t\t\treload(arParams)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$root.$app.getLoader().show(document.body);\n\n\t\t\t\t\t\tAjax.runComponentAction(\n\t\t\t\t\t\t\t'bitrix:salescenter.app',\n\t\t\t\t\t\t\t'getComponentResult',\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tmode: 'class',\n\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\tarParams\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t).then(function(response) {\n\t\t\t\t\t\t\tif (response.data)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.$root.$app.options = response.data;\n\t\t\t\t\t\t\t\tthis.$root.$app.orderId = this.$root.$app.options.orderId;\n\t\t\t\t\t\t\t\tthis.componentKey += 1;\n\n\t\t\t\t\t\t\t\tthis.$root.$app.getLoader().hide();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}.bind(this));\n\t\t\t\t\t},\n\t\t\t\t\tinitOrderSelector()\n\t\t\t\t\t{\n\t\t\t\t\t\ttry\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\tthis.$app.options.orderList.length < 2\n\t\t\t\t\t\t\t\t|| this.$app.options.templateMode !== 'create'\n\t\t\t\t\t\t\t\t|| !this.$app.options.orderId\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tconst orderSelectorBtn = this.$nodes.orderSelector.querySelector('.salescenter-app-order-selector-text');\n\t\t\t\t\t\t\tif (!orderSelectorBtn)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\torderSelectorBtn.innerText = Loc.getMessage('SALESCENTER_ORDER_SELECTOR_ORDER_NUM')\n\t\t\t\t\t\t\t\t.replace('#ORDER_ID#', this.$app.options.orderId);\n\n\t\t\t\t\t\t\torderSelectorBtn.setAttribute('data-hint', Loc.getMessage('SALESCENTER_ORDER_SELECTOR_TOOLTIP'));\n\n\t\t\t\t\t\t\tlet popupMenu;\n\t\t\t\t\t\t\tlet menuItems = [];\n\t\t\t\t\t\t\tthis.$app.options.orderList.map(orderId => {\n\t\t\t\t\t\t\t\tconst orderCaption = Loc.getMessage('SALESCENTER_ORDER_SELECTOR_ORDER_NUM').replace('#ORDER_ID#', orderId);\n\t\t\t\t\t\t\t\tmenuItems.push({\n\t\t\t\t\t\t\t\t\ttext: orderCaption,\n\t\t\t\t\t\t\t\t\tonclick: event => {\n\t\t\t\t\t\t\t\t\t\tpopupMenu.close();\n\t\t\t\t\t\t\t\t\t\torderSelectorBtn.innerText = orderCaption;\n\t\t\t\t\t\t\t\t\t\tthis.reload({\n\t\t\t\t\t\t\t\t\t\t\tcontext: this.$app.options.context,\n\t\t\t\t\t\t\t\t\t\t\torderId: orderId,\n\t\t\t\t\t\t\t\t\t\t\townerTypeId: this.$app.options.ownerTypeId,\n\t\t\t\t\t\t\t\t\t\t\townerId: this.$app.options.ownerId,\n\t\t\t\t\t\t\t\t\t\t\ttemplateMode: this.$app.options.templateMode,\n\t\t\t\t\t\t\t\t\t\t\tmode: this.$app.options.mode,\n\t\t\t\t\t\t\t\t\t\t\tinitialMode: this.$app.options.initialMode,\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tpopupMenu = MenuManager.create({\n\t\t\t\t\t\t\t\tid: 'deal-order-selector',\n\t\t\t\t\t\t\t\tbindElement: orderSelectorBtn,\n\t\t\t\t\t\t\t\titems: menuItems\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tthis.$nodes.orderSelector.classList.remove('is-hidden');\n\t\t\t\t\t\t\tthis.$nodes.orderSelector.addEventListener('click', e => {\n\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\tpopupMenu.show();\n\t\t\t\t\t\t\t\tBX.UI.Hint.hide();\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tBX.UI.Hint.init(this.$nodes.orderSelector);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcatch (err)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t//\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tdata() {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tcomponentKey: 0,\n\t\t\t\t\t};\n\t\t\t\t},\n\t\t\t});\n\t\t});\n\t}\n\n\tcloseApplication()\n\t{\n\t\tif(this.slider)\n\t\t{\n\t\t\tthis.slider.close();\n\t\t}\n\t}\n\n\tfillPages()\n\t{\n\t\treturn new Promise((resolve) =>\n\t\t{\n\t\t\tif(this.isProgress)\n\t\t\t{\n\t\t\t\tthis.fillPagesQueue.push(resolve);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif(this.fillPagesTimeout)\n\t\t\t\t{\n\t\t\t\t\tclearTimeout(this.fillPagesTimeout);\n\t\t\t\t}\n\t\t\t\tthis.fillPagesTimeout = setTimeout(() =>\n\t\t\t\t{\n\t\t\t\t\tthis.startProgress();\n\t\t\t\t\tRest.callMethod('salescenter.page.list', {}).then((result) => {\n\t\t\t\t\t\tthis.store.commit('application/setPages', {pages: result.answer.result.pages});\n\t\t\t\t\t\tthis.stopProgress();\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t\tthis.fillPagesQueue.forEach((item) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\titem();\n\t\t\t\t\t\t});\n\t\t\t\t\t\tthis.fillPagesQueue = [];\n\t\t\t\t\t});\n\t\t\t\t}, 100);\n\t\t\t}\n\t\t});\n\t}\n\n\tstatic showError(error)\n\t{\n\t\t// console.error(error);\n\t}\n\n\tgetLoader()\n\t{\n\t\tif(!this.loader)\n\t\t{\n\t\t\tthis.loader = new Loader({size: 200, mode: 'custom'});\n\t\t}\n\n\t\treturn this.loader;\n\t}\n\n\tshowLoader()\n\t{\n\t\tif(this.templateEngine)\n\t\t{\n\t\t\tthis.getLoader().show(this.templateEngine.$el);\n\t\t}\n\t}\n\n\thideLoader()\n\t{\n\t\tthis.getLoader().hide();\n\t}\n\n\tstartProgress(buttonEvent = null)\n\t{\n\t\tthis.isProgress = true;\n\t\tthis.templateEngine.$emit('on-start-progress');\n\t\tthis.showLoader();\n\t\tif (Type.isDomNode(buttonEvent))\n\t\t{\n\t\t\tbuttonEvent.classList.add('ui-btn-wait');\n\t\t}\n\t}\n\n\tstopProgress(buttonEvent = null)\n\t{\n\t\tthis.isProgress = false;\n\t\tthis.templateEngine.$emit('on-stop-progress');\n\t\tthis.hideLoader();\n\t\tif (Type.isDomNode(buttonEvent))\n\t\t{\n\t\t\tbuttonEvent.classList.remove('ui-btn-wait');\n\t\t}\n\t}\n\n\thidePage(page)\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tlet promise;\n\t\t\tif(page.landingId > 0)\n\t\t\t{\n\t\t\t\tpromise = Manager.hidePage(page);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tpromise = Manager.deleteUrl(page);\n\t\t\t}\n\t\t\tpromise.then(() =>\n\t\t\t{\n\t\t\t\tthis.store.commit('application/removePage', {page});\n\t\t\t\tresolve();\n\t\t\t}).catch((result) =>\n\t\t\t{\n\t\t\t\tApp.showError(result.answer.error_description);\n\t\t\t\treject(result.answer.error_description);\n\t\t\t});\n\t\t});\n\t}\n\n\tsendPage(pageId)\n\t{\n\t\tif(this.isProgress)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tif(this.disableSendButton)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tconst pages = this.store.getters['application/getPages']();\n\t\tlet page;\n\t\tfor(let index in pages)\n\t\t{\n\t\t\tif(pages.hasOwnProperty(index) && pages[index].id === pageId)\n\t\t\t{\n\t\t\t\tpage = pages[index];\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tlet source = 'other';\n\t\tif(page.landingId > 0)\n\t\t{\n\t\t\tif(parseInt(page.siteId) === parseInt(Manager.connectedSiteId))\n\t\t\t{\n\t\t\t\tsource = 'landing_store_chat';\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tsource = 'landing_other';\n\t\t\t}\n\t\t}\n\t\tif(!this.dialogId)\n\t\t{\n\t\t\tthis.slider.data.set('action', 'sendPage');\n\t\t\tthis.slider.data.set('page', page);\n\t\t\tthis.slider.data.set('pageId', pageId);\n\t\t\tif(this.context === ContextDictionary.sms)\n\t\t\t{\n\t\t\t\tthis.startProgress();\n\t\t\t\tBX.Salescenter.Manager.addAnalyticAction({\n\t\t\t\t\tanalyticsLabel: 'salescenterSendSms',\n\t\t\t\t\tcontext: this.context,\n\t\t\t\t\tsource: source,\n\t\t\t\t\ttype: page.isWebform ? 'form' : 'info',\n\t\t\t\t\tcode: page.code,\n\t\t\t\t}).then(() =>\n\t\t\t\t{\n\t\t\t\t\tthis.stopProgress();\n\t\t\t\t\tthis.closeApplication();\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.closeApplication();\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\tthis.startProgress();\n\n\t\tAjax.runAction('salescenter.page.send', {\n\t\t\tanalyticsLabel: 'salescenterSendChat',\n\t\t\tgetParameters: {\n\t\t\t\tdialogId: this.dialogId,\n\t\t\t\tcontext: this.context,\n\t\t\t\tsource: source,\n\t\t\t\ttype: page.isWebform ? 'form' : 'info',\n\t\t\t\tconnector: this.connector,\n\t\t\t\tcode: page.code,\n\t\t\t},\n\t\t\tdata: {\n\t\t\t\tid: pageId,\n\t\t\t\toptions: {\n\t\t\t\t\tdialogId: this.dialogId,\n\t\t\t\t\tsessionId: this.sessionId,\n\t\t\t\t},\n\t\t\t}\n\t\t}).then(() =>\n\t\t{\n\t\t\tthis.stopProgress();\n\t\t\tthis.closeApplication();\n\t\t}).catch((result) =>\n\t\t{\n\t\t\tApp.showError(result.errors.pop().message);\n\t\t\tthis.stopProgress();\n\t\t});\n\t}\n\n\tsendCompilation(buttonEvent = null, sendCompilationLinkToFacebook = false)\n\t{\n\t\tif (!this.isPaymentCreationAvailable)\n\t\t{\n\t\t\tthis.closeApplication();\n\t\t\treturn null;\n\t\t}\n\n\t\tif (!this.store.getters['orderCreation/isAllowedSubmit'] || this.isProgress)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tif (!this.isAllowedFacebookRegion)\n\t\t{\n\t\t\tsendCompilationLinkToFacebook = true;\n\t\t}\n\n\t\tthis.startProgress(buttonEvent);\n\n\t\tlet options = {\n\t\t\tdialogId: this.dialogId,\n\t\t\tsendingMethod: this.sendingMethod,\n\t\t\tsendingMethodDesc: this.sendingMethodDesc,\n\t\t\townerTypeId: this.ownerTypeId,\n\t\t\townerId: this.ownerId,\n\t\t\tconnector: this.connector,\n\t\t\tsessionId: this.sessionId,\n\t\t\tsendCompilationLinkToFacebook: sendCompilationLinkToFacebook,\n\t\t\tcompilationId: this.compilation ? this.compilation.ID : this.newCompilationId,\n\t\t\teditable: this.options.templateMode === 'create',\n\t\t};\n\n\t\tif (this.stageOnOrderPaid !== null)\n\t\t{\n\t\t\toptions.stageOnOrderPaid = this.stageOnOrderPaid;\n\t\t}\n\t\tif (this.stageOnDeliveryFinished !== null)\n\t\t{\n\t\t\toptions.stageOnDeliveryFinished = this.stageOnDeliveryFinished;\n\t\t}\n\n\t\tif (this.connector === 'facebook' && this.isAllowedFacebookRegion && !sendCompilationLinkToFacebook)\n\t\t{\n\t\t\tthis.sendCompilationToFacebook(buttonEvent, options)\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.sendCompilationAjaxAction(buttonEvent, options);\n\t\t}\n\t}\n\n\tsendCompilationToFacebook(buttonEvent, options)\n\t{\n\t\tAjax.runComponentAction(\n\t\t\t'bitrix:salescenter.app',\n\t\t\t'getFacebookSettingsPath',\n\t\t\t{\n\t\t\t\tmode: 'class',\n\t\t\t\tdata: {\n\t\t\t\t\tdialogId: this.dialogId,\n\t\t\t\t}\n\t\t\t}\n\t\t).then((response) => {\n\t\t\tconst facebookSettingsPath = response.data;\n\t\t\tif (facebookSettingsPath)\n\t\t\t{\n\t\t\t\tthis.stopProgress(buttonEvent);\n\t\t\t\tthis.showFacebookCatalogConnectionPopup(buttonEvent, facebookSettingsPath)\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tAjax.runAction('salescenter.compilation.sendFacebookModerationWaitingNotification', {\n\t\t\t\t\tdata: {\n\t\t\t\t\t\toptions,\n\t\t\t\t\t},\n\t\t\t\t}).then((result) => {\n\t\t\t\t\tthis.sendCompilationAjaxAction(buttonEvent, options);\n\t\t\t\t\tthis.store.dispatch('orderCreation/resetBasket');\n\t\t\t\t\tthis.closeApplication();\n\t\t\t\t\tthis.stopProgress(buttonEvent);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\tpublishShop(): void\n\t{\n\t\tif (!this.isPhoneConfirmed)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.showLoader();\n\n\t\tBackend.getInstance().action('Site::publication', {\n\t\t\tid: Manager.connectedSiteId,\n\t\t})\n\t\t\t.then(() => {\n\t\t\t\tthis.slider.reload();\n\t\t\t})\n\t\t\t.catch((data) => {\n\t\t\t\tthis.getLoader().hide();\n\n\t\t\t\tif (data.type === 'error' && !Type.isUndefined(data.result[0]))\n\t\t\t\t{\n\t\t\t\t\tconst errorCode = data.result[0].error;\n\n\t\t\t\t\tswitch (errorCode)\n\t\t\t\t\t{\n\t\t\t\t\t\tcase 'PUBLIC_SITE_REACHED': {\n\t\t\t\t\t\t\tManager.openLimitShopNumberInfoHelper();\n\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcase 'PUBLIC_SITE_REACHED_FREE': {\n\t\t\t\t\t\t\tManager.openFreeTarifInfoHelper();\n\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcase 'FREE_DOMAIN_IS_NOT_ALLOWED': {\n\t\t\t\t\t\t\tManager.openFreeDomenInfoHelper();\n\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcase 'PHONE_NOT_CONFIRMED': {\n\t\t\t\t\t\t\tthis.showPhoneConfirmPopup();\n\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcase 'EMAIL_NOT_CONFIRMED': {\n\t\t\t\t\t\t\tthis.showEmailConfirmPopup();\n\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tdefault: {\n\t\t\t\t\t\t\tMessageBox.alert(\n\t\t\t\t\t\t\t\tdata.result[0].error_description,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\tconfirmPhoneNumber()\n\t{\n\t\tif (!BX.Type.isObject(PhoneVerify))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tPhoneVerify\n\t\t\t.getInstance()\n\t\t\t.setEntityType('landing_site')\n\t\t\t.setEntityId(Manager.connectedSiteId)\n\t\t\t.startVerify({\n\t\t\t\tmandatory: false,\n\t\t\t\tcallback: (verified) => {\n\t\t\t\t\tif (verified)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.isPhoneConfirmed = true;\n\t\t\t\t\t\tEventEmitter.emit('BX.Salescenter.App::onPhoneConfirmed');\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t})\n\t\t;\n\t}\n\n\tshowPhoneConfirmPopup()\n\t{\n\t\tMessageBox.confirm(\n\t\t\tLoc.getMessage('SALESCENTER_PHONE_CONFIRMATION_POPUP_MESSAGE'),\n\t\t\tLoc.getMessage('SALESCENTER_PHONE_CONFIRMATION_POPUP_TITLE'),\n\t\t\t(messageBox) => {\n\t\t\t\tmessageBox.close();\n\t\t\t\tthis.confirmPhoneNumber();\n\t\t\t},\n\t\t\tLoc.getMessage('SALESCENTER_CONFIRMATION_POPUP_OK_CAPTION'),\n\t\t\t(messageBox) => messageBox.close(),\n\t\t\tLoc.getMessage('SALESCENTER_CONFIRMATION_POPUP_CANCEL_CAPTION'),\n\t\t);\n\t}\n\n\tshowEmailConfirmPopup()\n\t{\n\t\tMessageBox.confirm(\n\t\t\tLoc.getMessage('SALESCENTER_EMAIL_CONFIRMATION_POPUP_MESSAGE'),\n\t\t\tLoc.getMessage('SALESCENTER_EMAIL_CONFIRMATION_POPUP_TITLE'),\n\t\t\t(messageBox) => {\n\t\t\t\tmessageBox.close();\n\t\t\t\tManager.openConfirmEmailInfoHelper();\n\t\t\t},\n\t\t\tLoc.getMessage('SALESCENTER_CONFIRMATION_POPUP_OK_CAPTION'),\n\t\t\t(messageBox) => messageBox.close(),\n\t\t\tLoc.getMessage('SALESCENTER_CONFIRMATION_POPUP_CANCEL_CAPTION'),\n\t\t);\n\t}\n\n\tshowFacebookCatalogConnectionPopup(buttonEvent, facebookSettingsPath)\n\t{\n\t\tif (!this.facebookCatalogConnectionPopup)\n\t\t{\n\t\t\tthis.facebookCatalogConnectionPopup = new Popup({\n\t\t\t\tclassName: 'salescenter-app-catalog-facebook-connection-popup',\n\t\t\t\tcontent: this.getFacebookCatalogConnectionPopupContent(buttonEvent, facebookSettingsPath),\n\t\t\t\twidth: 500,\n\t\t\t\toverlay: true,\n\t\t\t\toffsetTop: 0,\n\t\t\t\toffsetLeft: 0,\n\t\t\t\tpadding: 17,\n\t\t\t\tanimation: 'fading-slide',\n\t\t\t\tangle: false,\n\t\t\t\tcloseIcon: {\n\t\t\t\t\ttop: '5px',\n\t\t\t\t\tright: '5px',\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\tthis.facebookCatalogConnectionPopup.show();\n\t}\n\n\tgetFacebookCatalogConnectionPopupContent(buttonEvent, facebookSettingsPath)\n\t{\n\t\tconst setFacebookCatalogConnectionButton = Tag.render`\n\t\t\t<button class=\"ui-btn ui-btn-md ui-btn-primary\">\n\t\t\t\t${Loc.getMessage('SALESCENTER_FACEBOOK_CATALOG_POPUP_SET_BUTTON')}\n\t\t\t</button>\n\t\t`;\n\t\tEvent.bind(setFacebookCatalogConnectionButton, 'click', this.setFacebookCatalogConnectionPopupHandler.bind(this, facebookSettingsPath));\n\n\t\tconst sendLinkToB24CompilationButton = Tag.render`\n\t\t\t<button class=\"ui-btn ui-btn-md ui-btn-light-border\">\n\t\t\t\t${Loc.getMessage('SALESCENTER_FACEBOOK_CATALOG_POPUP_SEND_B24_COMPILATION_LINK_BUTTON')}\n\t\t\t</button>\n\t\t`;\n\t\tEvent.bind(sendLinkToB24CompilationButton, 'click', this.sendLinkToB24CompilationButtonPopupHandler.bind(this, buttonEvent));\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"salescenter-app-catalog-facebook-connection-popup--container\">\n\t\t\t\t<div class=\"salescenter-app-catalog-facebook-connection-popup--title\">${Loc.getMessage('SALESCENTER_FACEBOOK_CATALOG_POPUP_TITLE_1')}</div>\n\t\t\t\t<div class=\"salescenter-app-catalog-facebook-connection-popup--button-container\">\n\t\t\t\t\t${setFacebookCatalogConnectionButton}\n\t\t\t\t\t${sendLinkToB24CompilationButton}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tsetFacebookCatalogConnectionPopupHandler(facebookSettingsPath)\n\t{\n\t\tBX.SidePanel.Instance.open(facebookSettingsPath);\n\t\tthis.facebookCatalogConnectionPopup.close();\n\t}\n\n\tsendLinkToB24CompilationButtonPopupHandler(buttonEvent)\n\t{\n\t\tthis.facebookCatalogConnectionPopup.close();\n\t\tthis.sendCompilation(buttonEvent, true);\n\t}\n\n\tsendCompilationAjaxAction(buttonEvent, options)\n\t{\n\t\tconst basketItems = this.store.getters['orderCreation/getBasket']();\n\t\tconst productIds = basketItems.map((basketItem) => {\n\t\t\treturn basketItem.skuId;\n\t\t});\n\t\tAjax.runAction('salescenter.compilation.sendCompilation', {\n\t\t\tdata: {\n\t\t\t\tproductIds,\n\t\t\t\toptions,\n\t\t\t},\n\t\t\tanalyticsLabel: 'salescenterCreateCompilation',\n\t\t}).then((result) => {\n\t\t\tthis.store.dispatch('orderCreation/resetBasket');\n\t\t\tthis.stopProgress(buttonEvent);\n\n\t\t\tif (result.data && result.data.compilation)\n\t\t\t{\n\t\t\t\tthis.slider.data.set('action', 'sendCompilation');\n\t\t\t\tthis.slider.data.set('compilation', result.data.compilation);\n\t\t\t}\n\n\t\t\tthis.closeApplication();\n\t\t\tthis.emitGlobalEvent('salescenter.app:oncompilationcreated');\n\t\t}).catch((data) => {\n\t\t\tdata.errors.forEach((error) => {\n\t\t\t\talert(error.message);\n\t\t\t});\n\t\t\tthis.stopProgress(buttonEvent);\n\t\t\tApp.showError(data);\n\t\t});\n\t}\n\n\tsendShipment(buttonEvent)\n\t{\n\t\tif (!this.isPaymentCreationAvailable)\n\t\t{\n\t\t\tthis.closeApplication();\n\t\t\treturn null;\n\t\t}\n\n\t\tif (!this.store.getters['orderCreation/isAllowedSubmit'] || this.isProgress)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tthis.startProgress(buttonEvent);\n\n\t\tlet data = {\n\t\t\townerTypeId: this.ownerTypeId,\n\t\t\townerId: this.ownerId,\n\t\t\torderId: this.orderId,\n\t\t\tdeliveryId: this.store.getters['orderCreation/getDeliveryId'],\n\t\t\tdeliveryPrice: this.store.getters['orderCreation/getDelivery'],\n\t\t\texpectedDeliveryPrice: this.store.getters['orderCreation/getExpectedDelivery'],\n\t\t\tdeliveryResponsibleId: this.store.getters['orderCreation/getDeliveryResponsibleId'],\n\t\t\tpersonTypeId: this.store.getters['orderCreation/getPersonTypeId'],\n\t\t\tshipmentPropValues: this.store.getters['orderCreation/getPropertyValues'],\n\t\t\tdeliveryExtraServicesValues: this.store.getters['orderCreation/getDeliveryExtraServicesValues'],\n\t\t};\n\n\t\tif (this.stageOnDeliveryFinished !== null)\n\t\t{\n\t\t\tdata.stageOnDeliveryFinished = this.stageOnDeliveryFinished;\n\t\t}\n\n\t\tAjax.runAction('salescenter.order.createShipment', {\n\t\t\tdata: {\n\t\t\t\tbasketItems: this.store.getters['orderCreation/getBasket'](),\n\t\t\t\toptions: data,\n\t\t\t},\n\t\t\tanalyticsLabel: 'salescenterCreateShipment',\n\t\t}).then((result) =>\n\t\t{\n\t\t\tthis.store.dispatch('orderCreation/resetBasket');\n\t\t\tthis.stopProgress(buttonEvent);\n\n\t\t\tif (result.data)\n\t\t\t{\n\t\t\t\tif (result.data.order)\n\t\t\t\t{\n\t\t\t\t\tthis.slider.data.set('order', result.data.order);\n\t\t\t\t}\n\t\t\t\tif (result.data.deal)\n\t\t\t\t{\n\t\t\t\t\tthis.slider.data.set('deal', result.data.deal);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.closeApplication();\n\t\t\tthis.emitGlobalEvent('salescenter.app:onshipmentcreated');\n\t\t}).catch((data) =>\n\t\t{\n\t\t\tdata.errors.forEach((error) => {\n\t\t\t\talert(error.message);\n\t\t\t});\n\t\t\tthis.stopProgress(buttonEvent);\n\t\t\tApp.showError(data);\n\t\t});\n\t}\n\n\tsendPayment(buttonEvent, skipPublicMessage = 'n')\n\t{\n\t\tif (!this.isPaymentCreationAvailable)\n\t\t{\n\t\t\tthis.closeApplication();\n\t\t\treturn null;\n\t\t}\n\n\t\tif (!this.store.getters['orderCreation/isAllowedSubmit'] || this.isProgress)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tthis.startProgress(buttonEvent);\n\n\t\tconst data = {\n\t\t\tdialogId: this.dialogId,\n\t\t\tsendingMethod: this.sendingMethod,\n\t\t\tsendingMethodDesc: this.sendingMethodDesc,\n\t\t\tsessionId: this.sessionId,\n\t\t\tlineId: this.lineId,\n\t\t\townerTypeId: this.ownerTypeId,\n\t\t\torderId: this.orderId,\n\t\t\townerId: this.ownerId,\n\t\t\tmode: this.options.mode,\n\t\t\tskipPublicMessage,\n\t\t\tdeliveryId: this.store.getters['orderCreation/getDeliveryId'],\n\t\t\tdeliveryPrice: this.store.getters['orderCreation/getDelivery'],\n\t\t\texpectedDeliveryPrice: this.store.getters['orderCreation/getExpectedDelivery'],\n\t\t\tdeliveryResponsibleId: this.store.getters['orderCreation/getDeliveryResponsibleId'],\n\t\t\tpersonTypeId: this.store.getters['orderCreation/getPersonTypeId'],\n\t\t\tshipmentPropValues: this.store.getters['orderCreation/getPropertyValues'],\n\t\t\tdeliveryExtraServicesValues: this.store.getters['orderCreation/getDeliveryExtraServicesValues'],\n\t\t\tavailablePaySystemsIds: this.store.getters['orderCreation/getAvailablePaySystemsIds'],\n\t\t\tconnector: this.connector,\n\t\t\tcontext: this.context,\n\t\t\tcurrency: this.currencyCode,\n\t\t\tassignedById: this.assignedById,\n\t\t};\n\n\t\tif (this.documentSelector)\n\t\t{\n\t\t\tdata.boundDocumentId = this.store.getters['documentSelector/getBoundDocumentId'];\n\t\t\tdata.selectedTemplateId = this.store.getters['documentSelector/getSelectedTemplateId'];\n\t\t}\n\n\t\tif (this.stageOnOrderPaid !== null)\n\t\t{\n\t\t\tdata.stageOnOrderPaid = this.stageOnOrderPaid;\n\t\t}\n\t\tif (this.stageOnDeliveryFinished !== null)\n\t\t{\n\t\t\tdata.stageOnDeliveryFinished = this.stageOnDeliveryFinished;\n\t\t}\n\n\t\tAjax.runAction('salescenter.order.createPayment', {\n\t\t\tdata: {\n\t\t\t\tbasketItems: this.store.getters['orderCreation/getBasket'](),\n\t\t\t\toptions: data,\n\t\t\t},\n\t\t\tanalyticsLabel: (this.context === ContextDictionary.deal) ? 'salescenterCreatePaymentSms' : 'salescenterCreatePayment',\n\t\t\tgetParameters: {\n\t\t\t\tdialogId: this.dialogId,\n\t\t\t\tcontext: this.context,\n\t\t\t\tconnector: this.connector,\n\t\t\t\tskipPublicMessage: skipPublicMessage,\n\t\t\t}\n\t\t}).then((result) =>\n\t\t{\n\t\t\tthis.store.dispatch('orderCreation/resetBasket');\n\t\t\tthis.stopProgress(buttonEvent);\n\t\t\tif (skipPublicMessage === 'y')\n\t\t\t{\n\t\t\t\tlet notify = {\n\t\t\t\t\tcontent: Loc.getMessage('SALESCENTER_ORDER_CREATE_NOTIFICATION').replace('#ORDER_ID#', result.data.order.number),\n\t\t\t\t};\n\t\t\t\tnotify.actions = [{\n\t\t\t\t\ttitle: Loc.getMessage('SALESCENTER_VIEW'),\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tclick() {\n\t\t\t\t\t\t\tManager.showOrderAdd(result.data.order.id);\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t}];\n\t\t\t\tBX.UI.Notification.Center.notify(notify);\n\t\t\t\tManager.showOrdersList({\n\t\t\t\t\torderId: result.data.order.id,\n\t\t\t\t\townerId: this.ownerId,\n\t\t\t\t\townerTypeId: this.ownerTypeId,\n\t\t\t\t\tcontext: this.context,\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.slider.data.set('action', 'sendPayment');\n\t\t\t\tthis.slider.data.set('order', result.data.order);\n\n\t\t\t\tif (result.data.deal)\n\t\t\t\t{\n\t\t\t\t\tthis.slider.data.set('deal', result.data.deal);\n\t\t\t\t}\n\n\t\t\t\tif (result.data.entity)\n\t\t\t\t{\n\t\t\t\t\tthis.slider.data.set('entity', result.data.entity);\n\t\t\t\t}\n\n\t\t\t\tthis.closeApplication();\n\t\t\t}\n\t\t\tthis.emitGlobalEvent('salescenter.app:onpaymentcreated');\n\t\t}).catch((data) =>\n\t\t{\n\n\t\t\tdata.errors.forEach((error) => {\n\t\t\t\ttop.BX.UI.Notification.Center.notify({\n\t\t\t\t\tcontent: Text.encode(error.message)\n\t\t\t\t});\n\t\t\t});\n\t\t\tthis.stopProgress(buttonEvent);\n\t\t\tApp.showError(data);\n\n\t\t\tif(this.needCloseApplication(data.errors))\n\t\t\t{\n\t\t\t\tthis.closeApplication();\n\t\t\t}\n\t\t});\n\t}\n\n\tsendTerminalPayment(buttonEvent)\n\t{\n\t\tif (!this.isPaymentCreationAvailable)\n\t\t{\n\t\t\tthis.closeApplication();\n\n\t\t\treturn null;\n\t\t}\n\n\t\tif (!this.store.getters['orderCreation/isAllowedSubmit'] || this.isProgress)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tthis.startProgress(buttonEvent);\n\n\t\tconst data = {\n\t\t\townerTypeId: this.ownerTypeId,\n\t\t\townerId: this.ownerId,\n\t\t\torderId: this.orderId,\n\t\t\tpaymentResponsibleId: this.store.getters['orderCreation/getPaymentResponsibleId'],\n\t\t\tcontext: this.context,\n\t\t\tcurrency: this.currencyCode,\n\t\t\tassignedById: this.assignedById,\n\t\t};\n\n\t\tif (this.stageOnOrderPaid !== null)\n\t\t{\n\t\t\tdata.stageOnOrderPaid = this.stageOnOrderPaid;\n\t\t}\n\n\t\tconst isMobileInstalledForResponsible = this.store.getters['orderCreation/isMobileInstalledForResponsible'];\n\n\t\tAjax.runAction('salescenter.order.createTerminalPayment', {\n\t\t\tdata: {\n\t\t\t\tbasketItems: this.store.getters['orderCreation/getBasket'](),\n\t\t\t\toptions: data,\n\t\t\t},\n\t\t\tanalyticsLabel: 'salescenterCreateTerminalPayment',\n\t\t\tgetParameters: {\n\t\t\t\tcontext: this.context,\n\t\t\t},\n\t\t}).then((result) => {\n\t\t\tthis.store.dispatch('orderCreation/resetBasket');\n\t\t\tthis.stopProgress(buttonEvent);\n\t\t\tthis.slider.data.set('action', 'sendPayment');\n\t\t\tthis.slider.data.set('order', result.data.order);\n\n\t\t\tif (result.data.deal)\n\t\t\t{\n\t\t\t\tthis.slider.data.set('deal', result.data.deal);\n\t\t\t}\n\n\t\t\tif (result.data.entity)\n\t\t\t{\n\t\t\t\tthis.slider.data.set('entity', result.data.entity);\n\t\t\t}\n\n\t\t\tif (isMobileInstalledForResponsible)\n\t\t\t{\n\t\t\t\tthis.closeApplication();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.showMobileAppInstallLinkPopup();\n\t\t\t}\n\n\t\t\tthis.emitGlobalEvent('salescenter.app:onterminalpaymentcreated');\n\t\t}).catch((data) => {\n\t\t\tdata.errors.forEach((error) => {\n\t\t\t\ttop.BX.UI.Notification.Center.notify({\n\t\t\t\t\tcontent: Text.encode(error.message),\n\t\t\t\t});\n\t\t\t});\n\t\t\tthis.stopProgress(buttonEvent);\n\t\t\tApp.showError(data);\n\n\t\t\tif (this.needCloseApplication(data.errors))\n\t\t\t{\n\t\t\t\tthis.closeApplication();\n\t\t\t}\n\t\t});\n\t}\n\n\tshowMobileAppInstallLinkPopup()\n\t{\n\t\tconst responsiblePhoneNumbers = this.store.getters['orderCreation/getResponsiblePhoneNumbers'];\n\n\t\t(new MobileAppInstallPopup({\n\t\t\tsendersConfig: this.options.senders,\n\t\t\tphoneNumbers: responsiblePhoneNumbers,\n\t\t\tuserId: this.store.getters['orderCreation/getPaymentResponsibleId'],\n\t\t\troot: this,\n\t\t})).render();\n\t}\n\n\tupdateTerminalPayment(buttonEvent)\n\t{\n\t\tif (!this.store.getters['orderCreation/isAllowedSubmit'] || this.isProgress)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tthis.startProgress(buttonEvent);\n\n\t\tconst data = {\n\t\t\tpaymentResponsibleId: this.store.getters['orderCreation/getPaymentResponsibleId'],\n\t\t};\n\n\t\tAjax.runAction('salescenter.order.updateTerminalPayment', {\n\t\t\tdata: {\n\t\t\t\tpaymentId: this.options.paymentId,\n\t\t\t\toptions: data,\n\t\t\t},\n\t\t\tanalyticsLabel: 'salescenterUpdateTerminalPayment',\n\t\t\tgetParameters: {\n\t\t\t\tcontext: this.context,\n\t\t\t},\n\t\t}).then((result) => {\n\t\t\tthis.store.dispatch('orderCreation/resetBasket');\n\t\t\tthis.stopProgress(buttonEvent);\n\t\t\tthis.slider.data.set('action', 'sendPayment');\n\t\t\tthis.slider.data.set('order', result.data.order);\n\n\t\t\tif (result.data.deal)\n\t\t\t{\n\t\t\t\tthis.slider.data.set('deal', result.data.deal);\n\t\t\t}\n\n\t\t\tif (result.data.entity)\n\t\t\t{\n\t\t\t\tthis.slider.data.set('entity', result.data.entity);\n\t\t\t}\n\n\t\t\tthis.closeApplication();\n\t\t\tthis.emitGlobalEvent('salescenter.app:onterminalpaymentupdated');\n\t\t}).catch((data) => {\n\t\t\tdata.errors.forEach((error) => {\n\t\t\t\ttop.BX.UI.Notification.Center.notify({\n\t\t\t\t\tcontent: Text.encode(error.message),\n\t\t\t\t});\n\t\t\t});\n\t\t\tthis.stopProgress(buttonEvent);\n\t\t\tApp.showError(data);\n\n\t\t\tif (this.needCloseApplication(data.errors))\n\t\t\t{\n\t\t\t\tthis.closeApplication();\n\t\t\t}\n\t\t});\n\t}\n\n\topenMobileAppPopup()\n\t{\n\t\tconst popupIconClass = this.options.currentLanguage === 'ru' ? 'salescenter-popup-qr__icon --ru' : 'salescenter-popup-qr__icon';\n\n\t\t// the mobile app popup goes here\n\t\tconst popupContent = Tag.render`\n\t\t\t<div class=\"salescenter-popup-qr__box\">\n\t\t\t\t<div class=\"salescenter-popup-qr__title\">${Loc.getMessage('SALESCENTER_TERMINAL_QR_POPUP_TITLE')}</div>\n\t\t\t\t<div class=\"salescenter-popup-qr__desc\">${Loc.getMessage('SALESCENTER_TERMINAL_QR_POPUP_DESC')}</div>\n\t\t\t\t<div class=\"salescenter-popup-qr__content\">\n\t\t\t\t\t<div class=\"salescenter-popup-qr__code\"></div>\n\t\t\t\t\t<ul class=\"salescenter-popup-qr__list\">\n\t\t\t\t\t\t<li class=\"salescenter-popup-qr__list_item\">${Loc.getMessage('SALESCENTER_TERMINAL_QR_POPUP_LIST_ITEM_1')}</li>\n\t\t\t\t\t\t<li class=\"salescenter-popup-qr__list_item\">${Loc.getMessage('SALESCENTER_TERMINAL_QR_POPUP_LIST_ITEM_2')}</li>\n\t\t\t\t\t\t<li class=\"salescenter-popup-qr__list_item\">${Loc.getMessage('SALESCENTER_TERMINAL_QR_POPUP_LIST_ITEM_3')}</li>\n\t\t\t\t\t\t<li class=\"salescenter-popup-qr__list_item\">${Loc.getMessage('SALESCENTER_TERMINAL_QR_POPUP_LIST_ITEM_4')}</li>\n\t\t\t\t\t</ul>\n\t\t\t\t\t<div class=\"salescenter-popup-qr__icon_box\">\n\t\t\t\t\t\t<div class=\"${popupIconClass}\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\t\t\n\t\t`;\n\n\t\tconst mobilePopup = new Popup({\n\t\t\tclassName: 'salescenter-popup-qr__wrap',\n\t\t\tcontent: popupContent,\n\t\t\toverlay: true,\n\t\t\tcloseIcon: true,\n\t\t\tmaxWidth: 725,\n\t\t\tautoHide: true,\n\t\t\tcacheable: false,\n\t\t\tbuttons: [\n\t\t\t\tnew Button({\n\t\t\t\t\tcolor: Button.Color.PRIMARY,\n\t\t\t\t\ttext: Loc.getMessage('SALESCENTER_JS_POPUP_CLOSE'),\n\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\tmobilePopup.close();\n\t\t\t\t\t},\n\t\t\t\t}),\n\t\t\t\tnew Button({\n\t\t\t\t\tcolor: Button.Color.LINK,\n\t\t\t\t\ttext: Loc.getMessage('SALESCENTER_TERMINAL_QR_POPUP_BUTTON_ABOUT'),\n\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\tManager.openHowTerminalWorks();\n\t\t\t\t\t},\n\t\t\t\t}),\n\t\t\t],\n\t\t});\n\n\t\tmobilePopup.show();\n\t\tthis.getQRCode();\n\t}\n\n\tgetQRCode()\n\t{\n\t\tconst qrNode = document.querySelector('.salescenter-popup-qr__code');\n\n\t\treturn new QRCode(qrNode, {\n\t\t\ttext: this.options.mobileAppLink,\n\t\t\twidth: 143,\n\t\t\theight: 143,\n\t\t});\n\t}\n\n\tneedCloseApplication(errors)\n\t{\n\t\tlet alwaysOpen = errors.filter(error => {\n\t\t\treturn error.code < 1 || error.code > 100\n\t\t}).length >= 1\n\n\t\treturn alwaysOpen === false\n\t}\n\n\tresendPayment(buttonEvent)\n\t{\n\t\tif (!this.isPaymentCreationAvailable)\n\t\t{\n\t\t\tthis.closeApplication();\n\t\t\treturn null;\n\t\t}\n\n\t\tif (!this.store.getters['orderCreation/isAllowedSubmit'] || this.isProgress)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tthis.startProgress(buttonEvent);\n\n\t\tconst options = {\n\t\t\tsendingMethod: this.sendingMethod,\n\t\t\tsendingMethodDesc: this.sendingMethodDesc,\n\t\t\tstageOnOrderPaid: this.stageOnOrderPaid,\n\t\t\townerTypeId: this.ownerTypeId,\n\t\t\townerId: this.ownerId,\n\t\t};\n\t\tif (this.documentSelector)\n\t\t{\n\t\t\toptions.boundDocumentId = this.store.getters['documentSelector/getBoundDocumentId'];\n\t\t\toptions.selectedTemplateId = this.store.getters['documentSelector/getSelectedTemplateId'];\n\t\t}\n\t\tAjax.runAction('salescenter.order.resendPayment', {\n\t\t\tdata: {\n\t\t\t\torderId: this.orderId,\n\t\t\t\tpaymentId: this.options.paymentId,\n\t\t\t\tshipmentId: this.options.shipmentId,\n\t\t\t\toptions,\n\t\t\t},\n\t\t\tgetParameters: {\n\t\t\t\tcontext: this.context,\n\t\t\t}\n\t\t}).then((result) =>\n\t\t{\n\t\t\tthis.stopProgress(buttonEvent);\n\t\t\tthis.closeApplication();\n\t\t\tthis.emitGlobalEvent('salescenter.app:onpaymentresend');\n\t\t}).catch((data) =>\n\t\t{\n\t\t\tdata.errors.forEach((error) => {\n\t\t\t\talert(error.message);\n\t\t\t});\n\t\t\tthis.stopProgress(buttonEvent);\n\t\t\tApp.showError(data);\n\t\t});\n\t}\n\thideNoPaymentSystemsBanner()\n\t{\n\t\tconst userOptionName = this.options.orderCreationOption || false;\n\t\tconst userOptionKeyName = this.options.paySystemBannerOptionName || false;\n\t\tif (userOptionName && userOptionKeyName)\n\t\t{\n\t\t\tBX.userOptions.save('salescenter', userOptionName, userOptionKeyName, 'Y');\n\t\t}\n\t}\n\tgetOrdersCount()\n\t{\n\t\tif(this.sessionId > 0)\n\t\t{\n\t\t\treturn Rest.callMethod('salescenter.order.getActiveOrdersCount', {\n\t\t\t\tsessionId: this.sessionId\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn new Promise((resolve, reject) => {});\n\t\t}\n\t}\n\n\tgetPaymentsCount()\n\t{\n\t\tif (this.sessionId > 0)\n\t\t{\n\t\t\treturn Rest.callMethod('salescenter.order.getActivePaymentsCount', {\n\t\t\t\tsessionId: this.sessionId\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn new Promise((resolve, reject) => {});\n\t\t}\n\t}\n\n\thasClientContactInfo()\n\t{\n\t\tif (this.options.sendingMethod === 'chat')\n\t\t{\n\t\t\treturn this.options.dialogId !== '';\n\t\t}\n\n\t\treturn this.options.contactPhone !== '';\n\t}\n\n\temitGlobalEvent(eventName, data)\n\t{\n\t\tEventEmitter.emit(eventName, data);\n\t\tBX.SidePanel.Instance.postMessage(this.slider, eventName, data);\n\t}\n\n\tisPaymentMode(): boolean\n\t{\n\t\treturn this.context === ContextDictionary.deal || this.context === ContextDictionary.smartInvoice || this.context === ContextDictionary.terminalList;\n\t}\n}\n\ndeclare type DocumentSelectorParams = {\n\tboundDocumentId: ?number,\n\tselectedTemplateId: ?number,\n\tdocuments: ?Document[],\n\ttemplates: ?Template[],\n\ttemplateAddUrl: ?string,\n\tprovider: ?string,\n\tvalue: ?number,\n};\n\nexport type Document = {\n\tid: number,\n\ttitle: string,\n\tdetailUrl: string,\n\tisWithStamps: boolean,\n}\n\nexport type Template = {\n\tid: number,\n\ttitle: string,\n\tdocumentCreationUrl: string,\n\tisWithStamps: boolean,\n}\n"],"names":["MixinTemplatesType","data","editable","created","$root","$on","value","TileCollectionMixins","components","Label","TileLabel","TileHintImg","TileLabelPlus","TileHintImgCaption","TileHintBackground","TileHintBackgroundCaption","methods","getCollectionTile","tiles","getCollectionTileByFilter","filter","map","Map","collection","hasOwnProperty","type","length","forEach","item","index","getType","set","hasTileOfferFromCollection","Tile","size","hasTileMoreFromCollection","getTileOfferFromCollection","result","inx","tile","getTileMoreFromCollection","getTileByIndex","openSlider","slider","AppSlider","openAppLocal","getOptionSlider","subscribe","EventTypes","AppSliderSliderClose","e","$emit","isControlTile","includes","showHint","event","popup","Hint","show","target","info","hideHint","hide","computed","width","Uninstalled","props","Array","required","mixins","template","Installed","StageMixin","statusClassMixin","status","Status","current","disabled","containerClassMixin","counterCheckedMixin","complete","onSliderClose","Cashbox","String","counter","Number","installed","Boolean","titleItems","initialCollapseState","Block","TileInstalled","TileUnInstalled","statusClass","title","Loc","getMessage","configForBlock","collapsible","checked","onItemHint","BX","Salescenter","Manager","openHowToConfigCashBox","saveCollapsedOption","option","ModeDictionary","Object","freeze","payment","delivery","paymentDelivery","terminalPayment","mounted","$app","options","templateMode","isCompilationMode","compilation","productForm","setEditable","formWrapper","$el","querySelector","appendChild","layout","refreshId","defaultCurrency","currencyCode","$store","dispatch","Type","isArray","basket","fields","push","commit","isObject","totals","ProductForm","currencySymbol","currency","iblockId","catalogIblockId","basePriceId","taxList","vatList","measures","showDiscountBlock","showProductDiscounts","showTaxBlock","showProductTaxes","totalResultLabel","mode","urlBuilderContext","urlProductBuilderContext","isCatalogPriceEditEnabled","isCatalogDiscountSetEnabled","fieldHints","hideUnselectedProperties","showCompilationModeSwitcher","compilationFormType","connector","isAllowedFacebookRegion","facebookFailProducts","FAIL_PRODUCTS","ownerId","ownerTypeId","dialogId","sessionId","isShortProductViewFormat","enableEmptyProductError","checkProductErrors","EventEmitter","Runtime","debounce","onBasketChange","onProductFormModeChange","onProductFormCompilationCreated","bind","getData","newCompilationId","compilationId","FormMode","COMPILATION","COMPILATION_READ_ONLY","processRefreshRequest","preparedBasket","isStringFilled","innerId","selectorId","setData","total","changeCompilationProducts","isNeedDisableSubmit","requestId","Text","getRandom","Ajax","runAction","orderId","basketItems","then","prop","getObject","discount","sum","get","errors","getters","productIds","basketItem","skuId","ID","isFunction","hasErrors","hintTitle","additionalContainerClasses","product","Product","openHowToSell","containerClasses","config","DeliverySelector","availableServices","onChange","payload","deliveryPrice","deliveryServiceId","relatedPropsValues","relatedServicesValues","estimatedDeliveryPrice","responsibleUser","id","onAddressFromChanged","refreshAvailableServices","onDeliveryServiceChanged","onSettingsChanged","ajax","order","deliveryId","shipmentPropValues","propertyValues","deliveryRelatedServiceValues","deliveryExtraServicesValues","deliveryResponsibleId","personTypeId","localize","Vue","getFilteredPhrases","sumTitle","productsPrice","deliveryFormatted","isDeliveryCalculated","Currency","currencyFormat","totalFormatted","excludedServiceIds","emptyDeliveryServiceId","actionData","Vuex","mapState","state","orderCreation","shipment","priceDelivery","basePriceDelivery","deliveryService","name","logo","parent","extraServices","requestProperties","canUserPerformCalls","getFormattedPrice","price","isPhoneRequestProperty","property","tags","makeCall","phoneNumber","isUndefined","window","top","phoneTo","open","hasParent","deliveryServiceLogo","deliveryServiceProfileLogo","paymentPrice","deliveryServiceName","deliveryServiceProfileName","isExtraServicesVisible","isRequestPropertiesVisible","priceDeliveryFormatted","productsPriceFormatted","paymentPriceFormatted","DeliveryVuex","isCollapsible","selectedDeliveryServiceName","ShipmentView","shipmentId","titleName","shipmentData","propValues","extraServicesValues","relatedPropsOptions","deliveryOrderPropOptions","responsibleId","assignedById","isViewTemplateMode","setTitleName","PaySystem","openHowToConfigDefaultPaySystem","ContextDictionary","deal","smartInvoice","chat","sms","imOpenlines","terminalList","ChatMessage","manager","titleTemplate","editorTemplate","editorUrl","selectedMode","UserAvatar","MessageEditor","currentSenderCode","senders","pushedToUseBitrix24Notifications","smsSenderListComponentKey","editor","url","isMessageReadOnly","context","urlSettingsCompanyContacts","openBitrix24NotificationsHelp","Automation","stageOnOrderPaid","stageOnDeliveryFinished","items","isDeliveryStageVisible","paymentStages","shipmentStages","StageList","updatePaymentStage","newStageId","stage","selected","updateShipmentStage","initStages","stages","currentValue","values","AutomationStage","create","selectedStage","isPayment","find","isHideDeliveryStage","buttonLabel","buttonEnabled","showWhatClientSeesControl","isFacebookForm","buttonClass","showSubmitCompilationLinkToFacebookButton","showWhatClientSees","openWhatClientSee","submit","submitCompilationLinkToFacebook","TimeLine","timelineItems","Item","PaymentItem","CustomItem","Payment","isCustom","Custom","DocumentSelector","templateAddUrl","model","templates","documents","getDocumentTitle","currentDocument","getCurrentDocument","withStamps","isWithStamps","hasData","document","detailUrl","documentSelector","handleDocumentClick","openSelectorMenu","openTemplatesList","bindElement","MenuManager","prepareSelectorMenuItems","closeByEsc","cacheable","closeSelectorMenu","destroy","text","onclick","boundDocumentId","templateListItem","delimiter","selectedTemplateId","handleEditDocumentClick","getDocumentById","getStubDocumentByTemplate","getTemplateById","templateId","paymentId","Uri","addParam","documentCreationUrl","_paymentId","Send","message","entityResponsible","sendingMethodDesc","orderPublicUrl","paysystem","paySystemList","isSet","getTileCollection","getTitleItems","isPaySystemCollapsed","cashbox","automation","isHidden","parseInt","deliveryList","isInstalled","isDeliveryCollapsed","cashboxList","isCashboxCollapsed","isAutomationAvailable","entityStageList","isAutomationCollapsed","timeline","getTimelineCollection","isSendAllowed","hasStageTimeLine","hasStageAutomation","hasStageCashBox","submitButtonLabel","isShowDocumentSelector","initCounter","list","TimeLineItem","stageRefresh","runComponentAction","response","refreshTilesByType","UI","Notification","Center","notify","content","onSend","onSendCompilationLinkToFacebook","changeProvider","provider","userOptions","save","text_modes","beforeUpdate","isFaded","createPinner","startFade","endFade","buttonsPanel","$refs","parentNode","Pinner","fixBottom","isFrame","fullWidth","anchorBottom","close","closeApplication","isOrderPublicUrlAvailable","wrapperClass","wrapperStyle","position","pos","offset","$nodes","footer","height","connect","loader","Loader","body","no_redirect","loadConfig","isSiteExists","isOrderPublicUrlExists","checkRecycle","openConnectedSite","publishConnectedSite","publishShop","confirmPhoneNumber","subscribeOnce","isOrderPageDeleted","isPhoneConfirmed","isVisible","openControlPanel","ComponentMixin","isShowPreview","isShowPayment","pageTitle","currentPageId","actions","frameCheckShortTimeout","frameCheckLongTimeout","isPagesOpen","isFormsOpen","showedPageIds","loadedPageIds","errorPageIds","lastAddedPages","ordersCount","paymentsCount","editedPageId","currentPageTitle","Start","NoPaymentSystemsBanner","StageBlocksList","updated","renderErrors","createLoader","fillPages","isWithOrdersMode","refreshOrdersCount","refreshPaymentsCount","openFirstPage","isPaymentsLimitReached","paymentsLimitStartNode","paymentsLimit","paymentsLimitNode","children","node","getActions","currentPage","SALESCENTER_RIGHT_ACTION_COPY_URL","copyUrl","landingId","SALESCENTER_RIGHT_ACTION_HIDE","hidePage","SALESCENTER_RIGHT_ACTION_DELETE","SALESCENTER_RIGHT_ACTION_ADD","getAddPageActions","isWebform","SALESCENTER_RIGHT_ACTION_ADD_SITE_B24","addSite","SALESCENTER_RIGHT_ACTION_ADD_CUSTOM","showAddUrlPopup","isPaymentCreationAvailable","showPaymentForm","pages","firstWebformPage","pageToOpen","page","onPageClick","setPageTitle","hideActionsPopup","isFrameDenied","startFrameCheckTimeout","onFrameError","showActionsPopup","PopupMenu","offsetLeft","offsetTop","showCompanyContacts","showAddPageActionPopup","menuId","offsetWidth","offsetHeight","angle","addSitePage","newPage","answer","editPage","editLandingPage","siteId","hideNoPaymentSystemsBanner","isPlainObject","addCustomPage","pageId","getPaymentItemTitle","SALESCENTER_LEFT_PAYMENT_ADD_2_MSGVER_1","SALESCENTER_LEFT_PAYMENT_AND_DELIVERY_MSGVER_1","SALESCENTER_DEFAULT_TITLE","showOrdersList","showPaymentsList","showOrderAdd","showCatalog","onFormsClick","openHelpDesk","openHowItWorks","isPageSelected","sendCompilationLinkToFacebook","send","skipPublicMessage","isAllowedSubmitButton","isShowStartInfo","sendCompilation","sendPayment","isActive","sendPage","innerText","clearTimeout","onFrameLoad","onSuccessfullyConnected","setTimeout","getFrameSource","setQueryParam","toString","getOrdersCount","getPaymentsCount","errorMessages","join","params","color","Alert","Color","DANGER","textCenter","util","htmlspecialchars","errorBlock","innerHTML","animated","alert","getContainer","editMenuItem","focus","saveMenuItem","oldName","addPage","analyticsLabel","application","sendButtonLabel","pagesSubmenuHeight","formsSubmenuHeight","isFrameError","isShowLoader","res","lastModified","modifiedAgo","SALESCENTER_MODIFIED","replace","disableSendButton","isNoPaymentSystemsBannerVisible","showPaySystemSettingBanner","TYPE_PHONE","TYPE_SENDER","SmsMessage","initSenders","initCurrentSenderCode","initPushedToUseBitrix24Notifications","selectedSmsSender","phone","contactEditorUrl","Error","SenderList","MessageEdit","MessageView","MessageControl","contactPhone","hintClassModifier","currentSender","sender","code","bitrix24ConnectUrlError","SenderConfig","needConfigure","getConnectionErrorText","fixer","openSliderFreeMessages","connectUrl","fixText","getConnectionErrorFixText","BITRIX24","isAvailable","toUpperCase","isConnected","usageErrors","error","getFixer","handleErrorFix","initialize","onConfigureContactPhone","messageCode","fallback","fixUrl","events","onLoad","getSlider","sliderBx","getFrameWindow","addCustomEvent","loadExt","InfoHelper","Promise","resolve","handleOnSmsSenderSelected","handlePhoneErrorFix","hendleSmsErrorBlock","openBitrix24NotificationsWorks","sendAllowed","sent","groups","getTileGroupsCollection","isViewWithoutDelivery","ret","group","fillTiles","changeContactPhone","editableMixin","ResponsibleSelector","selectedUser","responsible","isMobileInstalledForResponsible","contact","isCreateMode","contactInfo","encode","addEmployee","responsibleHeaderText","avatarStyle","photo","addEmployeeLink","getElementById","Event","openMobileAppPopup","selectorRoot","dialogOptions","entities","onResponsibleChanged","preselectedItems","undeselectedItems","tagSelector","TagSelector","multiple","deselectable","renderTo","setDeselectable","updateTags","getId","isSubmitEnabled","userId","isMobileInstalled","phones","openHowTerminalWorks","formattedSum","CurrencyCore","element","Tag","render","getPriceControl","Amount","paymentResponsible","contactName","PAID","hasProducts","isPaymentByAmount","isPanelVisible","activeMenuItem","isLoading","EntityCreatePaymentStages","StageBlocksListShipment","TerminalStageBlocksList","reload","form","showModeList","initialMode","onReload","sendPaymentDeliveryForm","isAllowedPaymentDeliverySubmitButton","showPhoneConfirmPopup","resendPayment","sendDeliveryForm","isAllowedDeliverySubmitButton","sendShipment","sendTerminalPaymentForm","isAllowedTerminalPaymentSubmitButton","updateTerminalPayment","sendTerminalPayment","specifyCompanyContacts","suggestScenario","openFeedbackPayOrderForm","howItWorks","openHowPaySmartInvoiceWorks","openHowPayDealWorks","openIntegrationWindow","openIntegrationRequestForm","freeMessages","fixed","classList","remove","pinnerAnchor","openTerminalToolDisabledSlider","loadExtension","openSalescanterToolDisabledSlider","ToolAvailabilityManager","openSalescenterToolDisabledSlider","isAllowedFreeMessagesButton","isOnlyDeliveryItemVisible","hasInstallable","isTerminalItemVisible","isPaymentItemVisible","isTerminalAvailable","isTerminalToolEnabled","isSalescenterToolEnabled","hasClientContactInfo","filteredSenders","isTerminalViewModeSaveAllowed","isSuggestScenarioMenuItemVisible","isBitrix24","isRequestIntegrationMenuItemVisible","isIntegrationButtonVisible","isModeListVisible","needShowStoreConnection","isSidebarEnabled","sendPaymentDeliveryFormButtonText","paymentDeliveryFormSubmitButtonClass","deliveryFormSubmitButtonClass","terminalPaymentFormSubmitButtonClass","paymentMenuItemClass","paymentTerminalMenuItemClass","paymentDeliveryMenuItemClass","deliveryMenuItemClass","ApplicationModel","getPages","setPages","saveState","removePage","VuexBuilderModel","DocumentSelectorModel","addDocument","setBoundDocumentId","Rest","callMethod","console","loadTemplates","entityTypeId","entityId","getTemplates","getDocuments","getBoundDocumentId","getSelectedTemplateId","fillState","setTemplates","setSelectedTemplateId","newDocument","isUpdated","unshift","OrderCreationModel","processingId","basketVersion","expectedDelivery","isEnabledSubmit","isSenderSelected","availablePaySystemsIds","paymentResponsibleId","responsiblePhoneNumbers","resetBasket","setCurrency","setDeliveryId","setDelivery","setPropertyValues","setDeliveryExtraServicesValues","setExpectedDelivery","setDeliveryResponsibleId","setPaymentResponsibleId","setMobileInstalledForResponsible","setResponsiblePhoneNumbers","setPersonTypeId","setAvailablePaySystemsIds","getBasket","isAllowedSubmit","getTotal","getDelivery","getDeliveryId","getPropertyValues","getDeliveryExtraServicesValues","getExpectedDelivery","getDeliveryResponsibleId","getPaymentResponsibleId","getResponsiblePhoneNumbers","getPersonTypeId","getAvailablePaySystemsIds","setBasket","setTotal","assign","clearBasket","setErrors","clearErrors","setProcessingId","setIsSenderSelected","isSelected","enableSubmit","disableSubmit","enableCompilationMode","disableCompilationMode","MobileAppInstallPopup","sendersConfig","phoneNumbers","root","selectedPhoneNumber","selectedSender","mainPopup","sendButton","sendersMenu","phoneMenu","sendersData","smsSenders","popupContent","getPopupContent","linkButton","Button","LINK","round","icon","ButtonIcon","COPY","ButtonState","DISABLED","PRIMARY","setClocking","sendSms","Popup","className","overlay","closeIcon","maxWidth","buttons","onClose","bindCopyLink","bindSelectors","senderId","entity","clipboard","bindCopyClick","mobileAppLink","bindSendersSelector","bindPhoneSelector","sendersSelector","menuItems","firstChild","getCurrentMenu","SidePanel","Instance","refresh","phoneSelector","updateSendButtonState","updateContent","setDisabled","setContent","phoneAndServiceContent","instances","App","lineId","orderAddPullTag","landingPublicationPullTag","landingUnPublicationPullTag","isCatalogAvailable","DocumentSelectorParams","getTopSlider","isProgress","fillPagesTimeout","fillPagesQueue","sendingMethod","fileControl","isString","isBoolean","ready","pull","PULL","initPull","initStore","initTemplate","showError","moduleId","command","callback","showOrdersListAfterCreate","store","templateEngine","el","Chat","Deal","isPaymentMode","leftPanel","orderSelector","initOrderSelector","arParams","getLoader","componentKey","orderList","orderSelectorBtn","setAttribute","popupMenu","orderCaption","addEventListener","preventDefault","init","err","startProgress","stopProgress","buttonEvent","showLoader","isDomNode","add","hideLoader","reject","promise","deleteUrl","error_description","source","connectedSiteId","addAnalyticAction","getParameters","pop","sendCompilationToFacebook","sendCompilationAjaxAction","facebookSettingsPath","showFacebookCatalogConnectionPopup","Backend","getInstance","action","errorCode","openLimitShopNumberInfoHelper","openFreeTarifInfoHelper","openFreeDomenInfoHelper","showEmailConfirmPopup","MessageBox","PhoneVerify","setEntityType","setEntityId","startVerify","mandatory","verified","emit","confirm","messageBox","openConfirmEmailInfoHelper","facebookCatalogConnectionPopup","getFacebookCatalogConnectionPopupContent","padding","animation","right","setFacebookCatalogConnectionButton","setFacebookCatalogConnectionPopupHandler","sendLinkToB24CompilationButton","sendLinkToB24CompilationButtonPopupHandler","emitGlobalEvent","expectedDeliveryPrice","number","click","needCloseApplication","showMobileAppInstallLinkPopup","popupIconClass","currentLanguage","mobilePopup","autoHide","getQRCode","qrNode","QRCode","alwaysOpen","userOptionName","orderCreationOption","userOptionKeyName","paySystemBannerOptionName","eventName","postMessage","builder","VuexBuilder","addModel","useNamespace","build"],"mappings":"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"}