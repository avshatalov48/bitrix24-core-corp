{"version":3,"file":"app.bundle.js","sources":["../src/models/application.js","../src/models/ordercreation.js","../src/config.js","../src/components/templates-type-mixin.js","../src/component.js","../src/bx-salescenter-app-add-payment-product.js","../src/components/basket-item-add.js","../src/bx-salescenter-app-add-payment.js","../src/timeline/base.js","../src/timeline/cash.js","../src/timeline/check.js","../src/timeline/check-sent.js","../src/timeline/payment.js","../src/timeline/sent.js","../src/timeline/watch.js","../src/timeline/factory.js","../src/components/sms-configure.js","../src/components/sms-alert.js","../src/components/sms-sender-list.js","../src/components/delivery-selector.js","../src/bx-salescenter-app-add-payment-by-sms-item.js","../src/components/timeline-item-content.js","../src/components/timeline-item.js","../src/components/timeline-item-payment.js","../src/components/timeline-list.js","../src/bx-salescenter-app-add-payment-by-sms.js","../src/app.js"],"sourcesContent":["import {VuexBuilderModel} from 'ui.vue.vuex';\n\nexport class ApplicationModel extends VuexBuilderModel\n{\n\t/**\n\t * @inheritDoc\n\t */\n\tgetName()\n\t{\n\t\treturn 'application';\n\t}\n\n\tgetState()\n\t{\n\t\treturn {\n\t\t\tpages: [],\n\t\t}\n\t}\n\n\tgetGetters()\n\t{\n\t\treturn {\n\t\t\tgetPages: (state) => () =>\n\t\t\t{\n\t\t\t\treturn state.pages;\n\t\t\t},\n\t\t}\n\t}\n\n\tgetMutations()\n\t{\n\t\treturn {\n\t\t\tsetPages: (state, payload) =>\n\t\t\t{\n\t\t\t\tif(typeof payload.pages === 'object')\n\t\t\t\t{\n\t\t\t\t\tstate.pages = payload.pages        ;\n\t\t\t\t\tthis.saveState(state);\n\t\t\t\t}\n\t\t\t},\n\t\t\tremovePage: (state, payload) =>\n\t\t\t{\n\t\t\t\tif(typeof payload.page === 'object')\n\t\t\t\t{\n\t\t\t\t\tstate.pages = state.pages.filter((page) => {\n\t\t\t\t\t\treturn !(\n\t\t\t\t\t\t\t(payload.page.id && payload.page.id > 0 && page.id === payload.page.id) ||\n\t\t\t\t\t\t\t(payload.page.landingId && payload.page.landingId > 0 && page.landingId === payload.page.landingId)\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\t\t\tthis.saveState(state);\n\t\t\t\t}\n\t\t\t},\n\t\t\taddPage: (state, payload) =>\n\t\t\t{\n\t\t\t\tif(typeof payload.page === 'object')\n\t\t\t\t{\n\t\t\t\t\tstate.pages.push(payload.page);\n\t\t\t\t\tthis.saveState(state);\n\t\t\t\t}\n\t\t\t},\n\t\t}\n\t}\n}","import {Vue} from 'ui.vue';\nimport {VuexBuilderModel} from 'ui.vue.vuex';\nimport \"currency\";\n\nexport class OrderCreationModel extends VuexBuilderModel\n{\n\t/**\n\t * @inheritDoc\n\t */\n\tgetName()\n\t{\n\t\treturn 'orderCreation';\n\t}\n\n\tgetState()\n\t{\n\t\treturn {\n\t\t\tcurrency: '',\n\t\t\tprocessingId: null,\n\t\t\tshowPaySystemSettingBanner: false,\n\t\t\tselectedProducts: [],\n\t\t\tbasket: [],\n\t\t\tpropertyValues: [],\n\t\t\tdeliveryExtraServicesValues: [],\n\t\t\texpectedDelivery: null,\n\t\t\tdeliveryResponsibleId: null,\n\t\t\tpersonTypeId: null,\n\t\t\tdeliveryId: null,\n\t\t\tdelivery: null,\n\t\t\terrors: [],\n\t\t\ttotal: {\n\t\t\t\tsum: null,\n\t\t\t\tdiscount: null,\n\t\t\t\tresult: null,\n\t\t\t\tresultNumeric: null,\n\t\t\t},\n\t\t}\n\t}\n\n\tstatic getBasketItemState()\n\t{\n\t\treturn {\n\t\t\tproductId: null,\n\t\t\tcode: null,\n\t\t\tname: '',\n\t\t\tsort: 0,\n\t\t\tprice: 0,\n\t\t\tbasePrice: 0,\n\t\t\tquantity: 0,\n\t\t\tshowDiscount: '',\n\t\t\tdiscount: 0,\n\t\t\tdiscountInfos: [],\n\t\t\tdiscountType: 'percent',\n\t\t\tmodule: null,\n\t\t\tmeasureCode: 0,\n\t\t\tmeasureName: '',\n\t\t\tmeasureRatio: 1,\n\t\t\ttaxRate: 0,\n\t\t\ttaxIncluded: 'N',\n\t\t\tisCustomPrice: 'N',\n\t\t\tisCreatedProduct: 'N',\n\t\t\tencodedFields: null,\n\t\t\timage: [],\n\t\t\terrors: [],\n\t\t};\n\t}\n\n\tgetActions()\n\t{\n\t\treturn {\n\t\t\trefreshBasket({ commit, dispatch, state }, payload)\n\t\t\t{\n\t\t\t\tif (this.updateTimer)\n\t\t\t\t{\n\t\t\t\t\tclearTimeout(this.updateTimer);\n\t\t\t\t}\n\n\t\t\t\tthis.updateTimer = setTimeout(() => {\n\t\t\t\t\tconst currentProcessingId = Math.random() * 100000;\n\t\t\t\t\tcommit('setProcessingId', currentProcessingId);\n\n\t\t\t\t\tBX.ajax.runAction(\n\t\t\t\t\t\t\"salescenter.api.order.refreshBasket\",\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tdata: {basketItems: state.basket}\n\t\t\t\t\t\t}\n\t\t\t\t\t)\n\t\t\t\t\t.then((result) => {\n\t\t\t\t\t\tif (currentProcessingId === state.processingId)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconst data = BX.prop.getObject(result,\"data\", {});\n\t\t\t\t\t\t\tdispatch('processRefreshRequest', {\n\t\t\t\t\t\t\t\ttotal: BX.prop.getObject(\n\t\t\t\t\t\t\t\t\tdata,\n\t\t\t\t\t\t\t\t\t\"total\",\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tsum: 0,\n\t\t\t\t\t\t\t\t\t\tdiscount: 0,\n\t\t\t\t\t\t\t\t\t\tresult: 0,\n\t\t\t\t\t\t\t\t\t\tresultNumeric: 0,\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\tbasket: BX.prop.get(data,\"items\",[])\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tif (payload && payload.onsuccess)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tpayload.onsuccess();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.catch((result) => {\n\t\t\t\t\t\tif (currentProcessingId === state.processingId)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconst data = BX.prop.getObject(result,\"data\", {});\n\t\t\t\t\t\t\tdispatch('processRefreshRequest', {\n\t\t\t\t\t\t\t\terrors: BX.prop.get(result,\"errors\", []),\n\t\t\t\t\t\t\t\tbasket: BX.prop.get(data,\"items\",[])\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tif (payload && payload.onfailure)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tpayload.onfailure();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}, 0);\n\t\t\t},\n\t\t\tprocessRefreshRequest({ commit, dispatch }, payload)\n\t\t\t{\n\t\t\t\tif (BX.type.isArray(payload.basket))\n\t\t\t\t{\n\t\t\t\t\tpayload.basket.forEach((basketItem) => {\n\t\t\t\t\t\tcommit('updateBasketItem', {\n\t\t\t\t\t\t\tindex: basketItem.sort,\n\t\t\t\t\t\t\tfields: basketItem,\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\n\t\t\t\t\tcommit('setSelectedProducts');\n\t\t\t\t}\n\n\t\t\t\tif (BX.type.isObject(payload.total))\n\t\t\t\t{\n\t\t\t\t\tcommit('setTotal', payload.total);\n\t\t\t\t}\n\n\t\t\t\tif (BX.type.isArray(payload.errors))\n\t\t\t\t{\n\t\t\t\t\tcommit('setErrors', payload.errors);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tcommit('clearErrors');\n\t\t\t\t}\n\n\t\t\t\tcommit('setProcessingId', null);\n\t\t\t},\n\t\t\tresetBasket ({ commit })\n\t\t\t{\n\t\t\t\tcommit('clearBasket');\n\t\t\t\tcommit('setTotal', {\n\t\t\t\t\tsum: null,\n\t\t\t\t\tdiscount: null,\n\t\t\t\t\tresult: null,\n\t\t\t\t\tresultNumeric: null,\n\t\t\t\t});\n\t\t\t\tcommit('addBasketItem');\n\t\t\t},\n\t\t\tdeleteBasketItem({ commit, state, dispatch }, payload)\n\t\t\t{\n\t\t\t\tcommit('deleteBasketItem', payload);\n\n\t\t\t\tif (state.basket.length > 0)\n\t\t\t\t{\n\t\t\t\t\tstate.basket.forEach((item, i) => {\n\t\t\t\t\t\tcommit('updateBasketItem', {\n\t\t\t\t\t\t\tindex: i,\n\t\t\t\t\t\t\tfields: {sort: i}\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tdispatch('refreshBasket');\n\t\t\t},\n\t\t\tremoveItem({ commit, state, dispatch }, payload)\n\t\t\t{\n\t\t\t\tcommit('deleteBasketItem', payload);\n\t\t\t\tif (state.basket.length === 0)\n\t\t\t\t{\n\t\t\t\t\tcommit('addBasketItem');\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tstate.basket.forEach((item, i) => {\n\t\t\t\t\t\tcommit('updateBasketItem', {\n\t\t\t\t\t\t\tindex: i,\n\t\t\t\t\t\t\tfields: {sort: i}\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tdispatch('refreshBasket');\n\t\t\t},\n\t\t\tchangeBasketItem: ({ commit, dispatch }, payload) =>\n\t\t\t{\n\t\t\t\tcommit('updateBasketItem', payload);\n\t\t\t\tcommit('setSelectedProducts');\n\t\t\t},\n\t\t\tsetCurrency: ({ commit }, payload) =>\n\t\t\t{\n\t\t\t\tconst currency = payload || '';\n\t\t\t\tcommit('setCurrency', currency);\n\t\t\t},\n\t\t\tsetDeliveryId: ({ commit }, payload) =>\n\t\t\t{\n\t\t\t\tcommit('setDeliveryId', payload);\n\t\t\t},\n\t\t\tsetDelivery: ({ commit }, payload) =>\n\t\t\t{\n\t\t\t\tcommit('setDelivery', payload);\n\t\t\t},\n\t\t\tsetPropertyValues: ({ commit }, payload) =>\n\t\t\t{\n\t\t\t\tcommit('setPropertyValues', payload);\n\t\t\t},\n\t\t\tsetDeliveryExtraServicesValues: ({ commit }, payload) =>\n\t\t\t{\n\t\t\t\tcommit('setDeliveryExtraServicesValues', payload);\n\t\t\t},\n\t\t\tsetExpectedDelivery: ({ commit }, payload) =>\n\t\t\t{\n\t\t\t\tcommit('setExpectedDelivery', payload);\n\t\t\t},\n\t\t\tsetDeliveryResponsibleId: ({ commit }, payload) =>\n\t\t\t{\n\t\t\t\tcommit('setDeliveryResponsibleId', payload);\n\t\t\t},\n\t\t\tsetPersonTypeId: ({ commit }, payload) =>\n\t\t\t{\n\t\t\t\tcommit('setPersonTypeId', payload);\n\t\t\t},\n\t\t}\n\t}\n\n\tgetGetters()\n\t{\n\t\treturn {\n\t\t\tgetBasket: state => index =>\n\t\t\t{\n\t\t\t\treturn state.basket;\n\t\t\t},\n\t\t\tisAllowedSubmit: state =>\n\t\t\t{\n\t\t\t\treturn state.basket.filter( basketItem => (\n\t\t\t\t\t(basketItem.module === 'catalog' && parseInt(basketItem.productId) > 0)\n\t\t\t\t\t|| (basketItem.module !== 'catalog' && BX.type.isNotEmptyString(basketItem.name) && parseFloat(basketItem.quantity) > 0)\n\t\t\t\t)).length > 0;\n\t\t\t},\n\t\t\tgetTotal: state =>\n\t\t\t{\n\t\t\t\treturn state.total;\n\t\t\t},\n\t\t\tgetDelivery: state =>\n\t\t\t{\n\t\t\t\treturn state.delivery;\n\t\t\t},\n\t\t\tgetDeliveryId: state =>\n\t\t\t{\n\t\t\t\treturn state.deliveryId;\n\t\t\t},\n\t\t\tgetPropertyValues: state =>\n\t\t\t{\n\t\t\t\treturn state.propertyValues;\n\t\t\t},\n\t\t\tgetDeliveryExtraServicesValues: state =>\n\t\t\t{\n\t\t\t\treturn state.deliveryExtraServicesValues;\n\t\t\t},\n\t\t\tgetExpectedDelivery: state =>\n\t\t\t{\n\t\t\t\treturn state.expectedDelivery;\n\t\t\t},\n\t\t\tgetDeliveryResponsibleId: state =>\n\t\t\t{\n\t\t\t\treturn state.deliveryResponsibleId;\n\t\t\t},\n\t\t\tgetPersonTypeId: state =>\n\t\t\t{\n\t\t\t\treturn state.personTypeId;\n\t\t\t},\n\t\t}\n\t}\n\n\tgetMutations()\n\t{\n\t\treturn {\n\t\t\taddBasketItem: (state, payload) =>\n\t\t\t{\n\t\t\t\tlet item = OrderCreationModel.getBasketItemState();\n\t\t\t\titem.sort = state.basket.length;\n\t\t\t\tstate.basket.push(item);\n\t\t\t},\n\t\t\tupdateBasketItem: (state, payload) =>\n\t\t\t{\n\t\t\t\tif (typeof state.basket[payload.index] === 'undefined')\n\t\t\t\t{\n\t\t\t\t\tVue.set(state.basket, payload.index, OrderCreationModel.getBasketItemState());\n\t\t\t\t}\n\n\t\t\t\tstate.basket[payload.index] = Object.assign(\n\t\t\t\t\tstate.basket[payload.index],\n\t\t\t\t\tpayload.fields\n\t\t\t\t);\n\t\t\t},\n\t\t\tclearBasket: (state) =>\n\t\t\t{\n\t\t\t\tstate.basket = [];\n\t\t\t},\n\t\t\tdeleteBasketItem: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.basket.splice(payload.index, 1);\n\t\t\t},\n\t\t\tsetSelectedProducts: (state) =>\n\t\t\t{\n\t\t\t\tstate.selectedProducts = state.basket\n\t\t\t\t\t.filter( basketItem => (basketItem.module === 'catalog' && parseInt(basketItem.productId) > 0))\n\t\t\t\t\t.map( filtered => filtered.productId);\n\t\t\t},\n\t\t\tsetTotal: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.total = Object.assign(\n\t\t\t\t\tstate.total,\n\t\t\t\t\tpayload\n\t\t\t\t);\n\t\t\t},\n\t\t\tsetErrors: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.errors = payload;\n\t\t\t},\n\t\t\tsetDeliveryId: (state, deliveryId) =>\n\t\t\t{\n\t\t\t\tstate.deliveryId = deliveryId;\n\t\t\t},\n\t\t\tsetDelivery: (state, delivery) =>\n\t\t\t{\n\t\t\t\tstate.delivery = delivery;\n\t\t\t},\n\t\t\tsetPropertyValues: (state, propertyValues) =>\n\t\t\t{\n\t\t\t\tstate.propertyValues = propertyValues;\n\t\t\t},\n\t\t\tsetDeliveryExtraServicesValues: (state, deliveryExtraServicesValues) =>\n\t\t\t{\n\t\t\t\tstate.deliveryExtraServicesValues = deliveryExtraServicesValues;\n\t\t\t},\n\t\t\tsetExpectedDelivery: (state, expectedDelivery) =>\n\t\t\t{\n\t\t\t\tstate.expectedDelivery = expectedDelivery;\n\t\t\t},\n\t\t\tsetDeliveryResponsibleId: (state, deliveryResponsibleId) =>\n\t\t\t{\n\t\t\t\tstate.deliveryResponsibleId = deliveryResponsibleId;\n\t\t\t},\n\t\t\tclearErrors: (state) =>\n\t\t\t{\n\t\t\t\tstate.errors = [];\n\t\t\t},\n\t\t\tsetProcessingId: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.processingId = payload;\n\t\t\t},\n\t\t\tsetCurrency: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.currency = payload;\n\t\t\t},\n\t\t\tsetPersonTypeId: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.personTypeId = payload;\n\t\t\t},\n\t\t\tshowBanner: (state) =>\n\t\t\t{\n\t\t\t\tstate.showPaySystemSettingBanner = true;\n\t\t\t},\n\t\t\thideBanner: (state) =>\n\t\t\t{\n\t\t\t\tstate.showPaySystemSettingBanner = false;\n\t\t\t},\n\t\t}\n\t}\n}","export const config = Object.freeze({\n\tdatabaseConfig: {\n\t\tname: 'salescenter.app',\n\t},\n\ttemplateName: 'bx-salescenter-app',\n\ttemplateAddPaymentName: 'bx-salescenter-app-add-payment',\n\ttemplateAddPaymentProductName: 'bx-salescenter-app-add-payment-product',\n\ttemplateAddPaymentBySms: 'bx-salescenter-app-add-payment-by-sms',\n\ttemplateAddPaymentBySmsItem: 'bx-salescenter-app-add-payment-by-sms-item',\n\tmoduleId: 'salescenter',\n});","let MixinTemplatesType = {\n\tdata() {\n\t\treturn {\n\t\t\teditable: true\n\t\t};\n\t},\n\tcreated(){\n\t\tthis.$root.$on(\"on-change-editable\", (value) => {\n\t\t\tthis.editable = value;\n\t\t});\n\t}\n}\n\nexport {\n\tMixinTemplatesType\n}","import {Vue} from 'ui.vue';\nimport {Vuex} from 'ui.vue.vuex';\nimport {Manager} from 'salescenter.manager';\nimport {Loader} from 'main.loader';\nimport {Type, Uri} from 'main.core';\nimport {MixinTemplatesType} from \"./components/templates-type-mixin\";\n\nimport 'popup';\nimport 'ui.buttons';\nimport 'ui.buttons.icons';\nimport 'ui.forms';\nimport 'ui.fonts.opensans';\nimport 'ui.pinner';\n\nimport {config} from './config';\n\nVue.component(config.templateName, {\n\n\tmixins:[MixinTemplatesType],\n\n\tdata()\n\t{\n\t\treturn {\n\t\t\tisShowPreview: false,\n\t\t\tisShowPayment: false,\n\t\t\tisShowPaymentBySms: false,\n\t\t\tisShowPaymentByEmail: false,\n\t\t\tisShowPaymentByCash: false,\n\t\t\tisShowPaymentByQr: false,\n\t\t\tpageTitle: '',\n\t\t\tcurrentPageId: null,\n\t\t\tactions: [],\n\t\t\tframeCheckShortTimeout: false,\n\t\t\tframeCheckLongTimeout: false,\n\t\t\tisPagesOpen: false,\n\t\t\tisFormsOpen: false,\n\t\t\tshowedPageIds: [],\n\t\t\tloadedPageIds: [],\n\t\t\terrorPageIds: [],\n\t\t\tlastAddedPages: [],\n\t\t\tordersCount: null,\n\t\t\teditedPageId: null,\n\t\t\tisOrderPublicUrlAvailable: null,\n\t\t\tcurrentPageTitle: null\n\t\t};\n\t},\n\n\tcreated()\n\t{\n\t\tthis.$root.$on(\"on-show-company-contacts\", (value) => {\n\t\t\tthis.showCompanyContacts(value);\n\t\t})\n\t},\n\n\tupdated()\n\t{\n\t\tthis.renderErrors();\n\t},\n\n\tmounted()\n\t{\n\t\tthis.createPinner();\n\n\t\tif (this.$root.$app.context === 'deal')\n\t\t{\n\t\t\tthis.showPaymentBySmsForm();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.createLoader();\n\t\t\tthis.$root.$app.fillPages().then(() =>\n\t\t\t{\n\t\t\t\tthis.refreshOrdersCount();\n\t\t\t\tthis.openFirstPage();\n\t\t\t});\n\t\t}\n\t\tthis.isOrderPublicUrlAvailable = this.$root.$app.isOrderPublicUrlAvailable;\n\t\tthis.isOrderPublicUrlExists = this.$root.$app.isOrderPublicUrlExists;\n\n\t\tif(this.$root.$app.isPaymentsLimitReached)\n\t\t{\n\t\t\tlet paymentsLimitStartNode = this.$root.$nodes.paymentsLimit;\n\t\t\tlet paymentsLimitNode = this.$refs['paymentsLimit'];\n\t\t\tfor (let node of paymentsLimitStartNode.children)\n\t\t\t{\n\t\t\t\tpaymentsLimitNode.appendChild(node);\n\t\t\t}\n\t\t}\n\n\t\tthis.movePanels();\n\t},\n\n\tmethods:\n\t{\n\t\tmovePanels()\n\t\t{\n\t\t\tlet sidepanel = this.$refs['sidebar'];\n\t\t\tlet leftPanel = this.$root.$nodes.leftPanel;\n\t\t\tif(!leftPanel)\n\t\t\t{\n\t\t\t\tleftPanel = this.$refs['leftSide'];\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t// this.$refs['leftSide'].remove();\n\t\t\t}\n\n\t\t\tif(sidepanel && leftPanel)\n\t\t\t{\n\t\t\t\t// leftPanel.appendChild(sidepanel);\n\t\t\t\t// BX.show(sidepanel);\n\n\t\t\t\tlet nav = this.$refs['sidepanelNav'];\n\t\t\t\tif(nav)\n\t\t\t\t{\n\t\t\t\t\t// leftPanel.appendChild(nav);\n\t\t\t\t\t// BX.show(nav);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tcreatePinner()\n\t\t{\n\t\t\tlet buttonsPanel = this.$refs['buttonsPanel'];\n\t\t\tif(buttonsPanel)\n\t\t\t{\n\t\t\t\tthis.$root.$el.parentNode.appendChild(buttonsPanel);\n\t\t\t\tnew BX.UI.Pinner(\n\t\t\t\t\tbuttonsPanel,\n\t\t\t\t\t{\n\t\t\t\t\t\tfixBottom: this.$root.$app.isFrame,\n\t\t\t\t\t\tfullWidth: this.$root.$app.isFrame\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t},\n\t\tgetActions()\n\t\t{\n\t\t\tlet actions = [];\n\t\t\tif(this.currentPage)\n\t\t\t{\n\t\t\t\tactions = [\n\t\t\t\t\t{text: this.localize.SALESCENTER_RIGHT_ACTION_COPY_URL, onclick: this.copyUrl},\n\t\t\t\t];\n\t\t\t\tif(this.currentPage.landingId > 0)\n\t\t\t\t{\n\t\t\t\t\tactions = [\n\t\t\t\t\t\t...actions,\n\t\t\t\t\t\t{text: this.localize.SALESCENTER_RIGHT_ACTION_HIDE, onclick: this.hidePage},\n\t\t\t\t\t];\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tactions = [\n\t\t\t\t\t\t...actions,\n\t\t\t\t\t\t{text: this.localize.SALESCENTER_RIGHT_ACTION_DELETE, onclick: this.hidePage},\n\t\t\t\t\t];\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn [\n\t\t\t\t...actions,\n\t\t\t\t{text: this.localize.SALESCENTER_RIGHT_ACTION_ADD, items: this.getAddPageActions()},\n\t\t\t];\n\t\t},\n\t\tgetAddPageActions(isWebform = false)\n\t\t{\n\t\t\treturn [\n\t\t\t\t{text: this.localize.SALESCENTER_RIGHT_ACTION_ADD_SITE_B24, onclick: () =>\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.addSite(isWebform);\n\t\t\t\t\t}},\n\t\t\t\t{text: this.localize.SALESCENTER_RIGHT_ACTION_ADD_CUSTOM, onclick: () =>\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.showAddUrlPopup({\n\t\t\t\t\t\t\tisWebform: isWebform === true ? 'Y' : null\n\t\t\t\t\t\t});\n\t\t\t\t\t}},\n\t\t\t];\n\t\t},\n\t\topenFirstPage()\n\t\t{\n\t\t\tthis.isShowPayment = false;\n\t\t\tthis.isShowPaymentBySms = false;\n\t\t\tthis.isShowPreview = true;\n\t\t\tif(this.pages && this.pages.length > 0)\n\t\t\t{\n\t\t\t\tlet firstWebformPage = false;\n\t\t\t\tlet pageToOpen = false;\n\t\t\t\tthis.pages.forEach((page) =>\n\t\t\t\t{\n\t\t\t\t\tif(!pageToOpen)\n\t\t\t\t\t{\n\t\t\t\t\t\tif(!page.isWebform)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tpageToOpen = page;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfirstWebformPage = page;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tif(!pageToOpen && firstWebformPage)\n\t\t\t\t{\n\t\t\t\t\tpageToOpen = firstWebformPage;\n\t\t\t\t}\n\t\t\t\tif(this.currentPageId !== pageToOpen.id)\n\t\t\t\t{\n\t\t\t\t\tthis.onPageClick(pageToOpen);\n\t\t\t\t\tif(pageToOpen.isWebform)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.isFormsOpen = true;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.isPagesOpen = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.currentPageId = this.pages[0].id;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.pageTitle = null;\n\t\t\t\tthis.currentPageId = null;\n\t\t\t\tthis.setPageTitle(this.pageTitle);\n\t\t\t}\n\t\t},\n\t\tonPageClick(page)\n\t\t{\n\t\t\tthis.pageTitle = page.name;\n\t\t\tthis.currentPageId = page.id;\n\t\t\tthis.hideActionsPopup();\n\t\t\tthis.isShowPayment = false;\n\t\t\tthis.isShowPaymentBySms = false;\n\t\t\tthis.isShowPreview = true;\n\t\t\tthis.setPageTitle(this.pageTitle);\n\t\t\tif(page.isFrameDenied !== true)\n\t\t\t{\n\t\t\t\tif(!this.showedPageIds.includes(page.id))\n\t\t\t\t{\n\t\t\t\t\tthis.startFrameCheckTimeout();\n\t\t\t\t\tthis.showedPageIds.push(page.id);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.onFrameError();\n\t\t\t}\n\t\t},\n\t\tshowActionsPopup({target})\n\t\t{\n\t\t\tBX.PopupMenu.show('salescenter-app-actions', target, this.getActions(), {\n\t\t\t\toffsetLeft: 0,\n\t\t\t\toffsetTop: 0,\n\t\t\t\tcloseByEsc: true,\n\t\t\t});\n\t\t},\n\t\tshowCompanyContacts({target})\n\t\t{\n\t\t\tBX.Salescenter.Manager.openSlider(this.$root.$app.options.urlSettingsCompanyContacts, {});\n\t\t},\n\t\tshowAddPageActionPopup({target}, isWebform = false)\n\t\t{\n\t\t\tlet menuId = 'salescenter-app-add-page-actions';\n\t\t\tif(isWebform)\n\t\t\t{\n\t\t\t\tmenuId += '-forms';\n\t\t\t}\n\t\t\tBX.PopupMenu.show(menuId, target, this.getAddPageActions(isWebform), {\n\t\t\t\toffsetLeft: target.offsetWidth + 20,\n\t\t\t\toffsetTop: -target.offsetHeight - 15,\n\t\t\t\tcloseByEsc: true,\n\t\t\t\tangle: {\n\t\t\t\t\tposition: 'left',\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\thideActionsPopup()\n\t\t{\n\t\t\tBX.PopupMenu.destroy('salescenter-app-actions');\n\t\t\tBX.PopupMenu.destroy('salescenter-app-add-page-actions');\n\t\t},\n\t\taddSite(isWebform = false)\n\t\t{\n\t\t\tManager.addSitePage(isWebform).then((result) =>\n\t\t\t{\n\t\t\t\tlet newPage = result.answer.result.page || false;\n\t\t\t\tthis.$root.$app.fillPages().then(() =>\n\t\t\t\t{\n\t\t\t\t\tif(newPage)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.onPageClick(newPage);\n\t\t\t\t\t\tthis.lastAddedPages.push(parseInt(newPage.id));\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.openFirstPage();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t\tthis.hideActionsPopup();\n\t\t},\n\t\tcopyUrl(event)\n\t\t{\n\t\t\tif(this.currentPage && this.currentPage.url)\n\t\t\t{\n\t\t\t\tManager.copyUrl(this.currentPage.url, event);\n\t\t\t\tthis.hideActionsPopup();\n\t\t\t}\n\t\t},\n\t\teditPage()\n\t\t{\n\t\t\tif(this.currentPage)\n\t\t\t{\n\t\t\t\tif(this.currentPage.landingId && this.currentPage.landingId > 0)\n\t\t\t\t{\n\t\t\t\t\tManager.editLandingPage(this.currentPage.landingId, this.currentPage.siteId);\n\t\t\t\t\tthis.hideActionsPopup();\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.showAddUrlPopup(this.currentPage);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\thidePage()\n\t\t{\n\t\t\tif(this.currentPage)\n\t\t\t{\n\t\t\t\tthis.$root.$app.hidePage(this.currentPage).then(() => {\n\t\t\t\t\tthis.openFirstPage();\n\t\t\t\t});\n\t\t\t\tthis.hideActionsPopup();\n\t\t\t}\n\t\t},\n\t\tshowAddUrlPopup(newPage)\n\t\t{\n\t\t\tif(!Type.isPlainObject(newPage))\n\t\t\t{\n\t\t\t\tnewPage = {};\n\t\t\t}\n\t\t\tManager.addCustomPage(newPage).then((pageId) =>\n\t\t\t{\n\t\t\t\tif(!this.isShowPreview)\n\t\t\t\t{\n\t\t\t\t\tthis.isShowPreview = false;\n\t\t\t\t}\n\t\t\t\tthis.$root.$app.fillPages().then(() => {\n\t\t\t\t\tif(pageId && (!Type.isPlainObject(newPage) || !newPage.id))\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.lastAddedPages.push(parseInt(pageId));\n\t\t\t\t\t}\n\t\t\t\t\tif(!pageId && newPage)\n\t\t\t\t\t{\n\t\t\t\t\t\tpageId = newPage.id;\n\t\t\t\t\t}\n\t\t\t\t\tif(pageId)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.pages.forEach((page) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif(parseInt(page.id) === parseInt(pageId))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.onPageClick(page);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tif(!this.isShowPayment || !this.isShowPaymentBySms)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.isShowPreview = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t\tthis.hideActionsPopup();\n\t\t},\n\t\tshowPaymentForm()\n\t\t{\n\t\t\tthis.isShowPayment = true;\n\t\t\tthis.isShowPaymentBySms = false;\n\t\t\tthis.isShowPreview = false;\n\t\t\tif(this.isOrderPublicUrlAvailable)\n\t\t\t{\n\t\t\t\tthis.setPageTitle(this.localize.SALESCENTER_LEFT_PAYMENT_ADD);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.setPageTitle(this.localize.SALESCENTER_DEFAULT_TITLE);\n\t\t\t}\n\t\t},\n\t\tshowPaymentBySmsForm()\n\t\t{\n\t\t\tthis.isShowPayment = false;\n\t\t\tthis.isShowPaymentBySms = true;\n\t\t\tthis.isShowPreview = false;\n\t\t\tthis.currentPageTitle = this.$root.$app.options.title;\n\n\t\t\tif(this.isOrderPublicUrlAvailable)\n\t\t\t{\n\t\t\t\tlet title = this.localize.SALESCENTER_LEFT_PAYMENT_BY_SMS;\n\n\t\t\t\tif(this.currentPageTitle)\n\t\t\t\t{\n\t\t\t\t\ttitle = this.currentPageTitle;\n\t\t\t\t}\n\n\t\t\t\tthis.setPageTitle(title);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.setPageTitle(this.localize.SALESCENTER_DEFAULT_TITLE);\n\t\t\t}\n\t\t},\n\t\tshowOrdersList()\n\t\t{\n\t\t\tthis.hideActionsPopup();\n\t\t\tManager.showOrdersList({\n\t\t\t\townerId: this.$root.$app.ownerId,\n\t\t\t\townerTypeId: this.$root.$app.ownerTypeId,\n\t\t\t}).then(() =>\n\t\t\t{\n\t\t\t\tthis.refreshOrdersCount();\n\t\t\t});\n\t\t},\n\t\tshowOrderAdd()\n\t\t{\n\t\t\tthis.hideActionsPopup();\n\t\t\tManager.showOrderAdd({\n\t\t\t\townerId: this.$root.$app.ownerId,\n\t\t\t\townerTypeId: this.$root.$app.ownerTypeId,\n\t\t\t}).then(() =>\n\t\t\t{\n\t\t\t\tthis.refreshOrdersCount();\n\t\t\t});\n\t\t},\n\t\tshowCatalog()\n\t\t{\n\t\t\tthis.hideActionsPopup();\n\t\t\tManager.openSlider(`/saleshub/catalog/?sessionId=${this.$root.$app.sessionId}`);\n\t\t},\n\t\tonFormsClick()\n\t\t{\n\t\t\tthis.isFormsOpen = !this.isFormsOpen;\n\t\t\tthis.hideActionsPopup();\n\t\t},\n\t\topenControlPanel()\n\t\t{\n\t\t\tManager.openControlPanel();\n\t\t\tthis.hideActionsPopup();\n\t\t},\n\t\topenHelpDesk()\n\t\t{\n\t\t\tthis.hideActionsPopup();\n\t\t\tManager.openHowItWorks();\n\t\t},\n\t\tisPageSelected(page)\n\t\t{\n\t\t\treturn (this.currentPage && this.isShowPreview && this.currentPage.id === page.id);\n\t\t},\n\t\tsend(event, skipPublicMessage = 'n')\n\t\t{\n\t\t\tif(!this.isAllowedSubmitButton)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif((this.isShowPayment || this.isShowPaymentBySms) && !this.isShowStartInfo)\n\t\t\t{\n\t\t\t\tif (this.editable)\n\t\t\t\t{\n\t\t\t\t\tthis.$root.$app.sendPayment(event.target, skipPublicMessage);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.$root.$app.resendPayment(event.target);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if(this.currentPage && this.currentPage.isActive)\n\t\t\t{\n\t\t\t\tthis.$root.$app.sendPage(this.currentPage.id);\n\t\t\t}\n\t\t},\n\t\tclose()\n\t\t{\n\t\t\tthis.$root.$app.closeApplication();\n\t\t},\n\t\tsetPageTitle(title = null)\n\t\t{\n\t\t\tif(!title)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif(this.$root.$nodes.title)\n\t\t\t{\n\t\t\t\tthis.$root.$nodes.title.innerText = title;\n\t\t\t}\n\t\t},\n\t\tonFrameError()\n\t\t{\n\t\t\tclearTimeout(this.frameCheckLongTimeout);\n\t\t\tif(this.showedPageIds.includes(this.currentPage.id))\n\t\t\t{\n\t\t\t\tthis.loadedPageIds.push(this.currentPage.id);\n\t\t\t}\n\t\t\tthis.errorPageIds.push(this.currentPage.id);\n\t\t},\n\t\tonFrameLoad(pageId)\n\t\t{\n\t\t\tclearTimeout(this.frameCheckLongTimeout);\n\t\t\tif(this.showedPageIds.includes(pageId))\n\t\t\t{\n\t\t\t\tthis.loadedPageIds.push(pageId);\n\t\t\t\tif(this.currentPage && this.currentPage.id === pageId)\n\t\t\t\t{\n\t\t\t\t\tif(this.frameCheckShortTimeout && !this.currentPage.landingId)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.onFrameError();\n\t\t\t\t\t}\n\t\t\t\t\telse if(this.errorPageIds.includes(this.currentPage.id))\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.errorPageIds = this.errorPageIds.filter((pageId) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn pageId !== this.currentPage.id;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(this.frameCheckShortTimeout && this.currentPage && this.currentPage.id === pageId && !this.currentPage.landingId)\n\t\t\t{\n\t\t\t\tthis.onFrameError();\n\t\t\t}\n\t\t},\n\t\tstartFrameCheckTimeout()\n\t\t{\n\t\t\t// this is a workaround for denied through X-Frame-Options sources\n\t\t\tif(this.frameCheckShortTimeout)\n\t\t\t{\n\t\t\t\tclearTimeout(this.frameCheckShortTimeout);\n\t\t\t\tthis.frameCheckShortTimeout = false;\n\t\t\t}\n\t\t\tthis.frameCheckShortTimeout = setTimeout(() =>\n\t\t\t{\n\t\t\t\tthis.frameCheckShortTimeout = false;\n\t\t\t}, 500);\n\n\t\t\t// to show error on long loading\n\t\t\tclearTimeout(this.frameCheckLongTimeout);\n\t\t\tthis.frameCheckLongTimeout = setTimeout(() =>\n\t\t\t{\n\t\t\t\tif(this.currentPage && this.showedPageIds.includes(this.currentPage.id) && !this.loadedPageIds.includes(this.currentPage.id))\n\t\t\t\t{\n\t\t\t\t\tthis.errorPageIds.push(this.currentPage.id);\n\t\t\t\t}\n\t\t\t}, 5000);\n\t\t},\n\t\tconnect()\n\t\t{\n\t\t\tvar loader = new BX.Loader({size: 200});\n\n\t\t\tloader.show(document.body);\n\t\t\tBX.Salescenter.Manager.connect({\n\t\t\t\tno_redirect: 'Y',\n\t\t\t\tcontext: this.$root.$app.context,\n\t\t\t}).then(() =>\n\t\t\t{\n\t\t\t\tBX.Salescenter.Manager.loadConfig().then((result) =>\n\t\t\t\t{\n\t\t\t\t\tloader.hide();\n\t\t\t\t\tif(result.isSiteExists)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$root.$app.isSiteExists = result.isSiteExists;\n\t\t\t\t\t\tthis.isSiteExists = result.isSiteExists;\n\t\t\t\t\t\tthis.$root.$app.fillPages().then(() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.isOrderPublicUrlExists = true;\n\t\t\t\t\t\t\tthis.$root.$app.isOrderPublicUrlExists = true;\n\t\t\t\t\t\t\tthis.$root.$app.orderPublicUrl = result.orderPublicUrl;\n\t\t\t\t\t\t\tthis.isOrderPublicUrlAvailable = result.isOrderPublicUrlAvailable;\n\t\t\t\t\t\t\tthis.$root.$app.isOrderPublicUrlAvailable = result.isOrderPublicUrlAvailable;\n\t\t\t\t\t\t\tif(!this.isShowPayment && !this.isShowPaymentBySms)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.openFirstPage();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif (this.isShowPaymentBySms)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tthis.showPaymentBySmsForm();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tthis.showPaymentForm();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}).catch(function()\n\t\t\t{\n\t\t\t\tloader.hide();\n\t\t\t});\n\t\t},\n\t\tcheckRecycle()\n\t\t{\n\t\t\tManager.openConnectedSite(true);\n\t\t},\n\t\topenConnectedSite()\n\t\t{\n\t\t\tManager.openConnectedSite();\n\t\t},\n\t\tgetFrameSource(page)\n\t\t{\n\t\t\tif(this.showedPageIds.includes(page.id))\n\t\t\t{\n\t\t\t\tif(page.landingId > 0)\n\t\t\t\t{\n\t\t\t\t\tif(page.isActive)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn (new Uri(page.url)).setQueryParam('theme', '').toString();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\treturn page.url;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\t\trefreshOrdersCount()\n\t\t{\n\t\t\tthis.$root.$app.getOrdersCount().then((result) =>\n\t\t\t{\n\t\t\t\tthis.ordersCount = result.answer.result || null;\n\t\t\t}).catch(() =>\n\t\t\t{\n\t\t\t\tthis.ordersCount = null;\n\t\t\t});\n\t\t},\n\t\trenderErrors()\n\t\t{\n\t\t\tif (this.isShowPayment && this.order.errors.length > 0)\n\t\t\t{\n\t\t\t\tlet errorMessages = this.order.errors.map((item) => item.message).join('<br>');\n\t\t\t\tlet params = {\n\t\t\t\t\tcolor: BX.UI.Alert.Color.DANGER,\n\t\t\t\t\ttextCenter: true,\n\t\t\t\t\ttext: BX.util.htmlspecialchars(errorMessages)\n\t\t\t\t};\n\t\t\t\tif (this.$refs.errorBlock.innerHTML.length === 0)\n\t\t\t\t{\n\t\t\t\t\tparams.animated = true;\n\t\t\t\t}\n\t\t\t\tlet alert = new BX.UI.Alert(params);\n\t\t\t\tthis.$refs.errorBlock.innerHTML = '';\n\t\t\t\tthis.$refs.errorBlock.appendChild(alert.getContainer());\n\t\t\t}\n\t\t\telse if (this.$refs.errorBlock)\n\t\t\t{\n\t\t\t\tthis.$refs.errorBlock.innerHTML = '';\n\t\t\t}\n\t\t},\n\t\teditMenuItem(event, page)\n\t\t{\n\t\t\tthis.editedPageId = page.id;\n\t\t\tsetTimeout(() =>\n\t\t\t{\n\t\t\t\tevent.target.parentNode.parentNode.querySelector('input').focus();\n\t\t\t}, 50);\n\t\t},\n\t\tsaveMenuItem(event)\n\t\t{\n\t\t\tconst pageId = this.editedPageId;\n\t\t\tconst name = event.target.value;\n\t\t\tlet oldName;\n\t\t\tthis.pages.forEach((page) =>\n\t\t\t{\n\t\t\t\tif(page.id === this.editedPageId)\n\t\t\t\t{\n\t\t\t\t\toldName = page.name\n\t\t\t\t}\n\t\t\t});\n\t\t\tif(pageId > 0 && oldName && name !== oldName && name.length > 0)\n\t\t\t{\n\t\t\t\tManager.addPage({\n\t\t\t\t\tid: pageId,\n\t\t\t\t\tname: name,\n\t\t\t\t\tanalyticsLabel: 'salescenterUpdatePageTitle',\n\t\t\t\t}).then(() =>\n\t\t\t\t{\n\t\t\t\t\tthis.$root.$app.fillPages().then(() => {\n\t\t\t\t\t\tif(this.editedPageId === this.currentPageId)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.setPageTitle(name);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.editedPageId = null;\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.editedPageId = null;\n\t\t\t}\n\t\t},\n\t\tcreateLoader()\n\t\t{\n\t\t\tconst loader = new Loader({size: 200});\n\t\t\tloader.show(this.$refs['previewLoader']);\n\t\t}\n\t},\n\n\tcomputed:\n\t{\n\t\tconfig: () => config,\n\t\tcurrentPage()\n\t\t{\n\t\t\tif(this.currentPageId > 0)\n\t\t\t{\n\t\t\t\tlet pages = this.application.pages.filter((page) =>\n\t\t\t\t{\n\t\t\t\t\treturn page.id === this.currentPageId;\n\t\t\t\t});\n\t\t\t\tif(pages.length > 0)\n\t\t\t\t{\n\t\t\t\t\treturn pages[0];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\n\t\tpagesSubmenuHeight()\n\t\t{\n\t\t\tif(this.isPagesOpen)\n\t\t\t{\n\t\t\t\treturn (this.application.pages.filter((page) =>\n\t\t\t\t{\n\t\t\t\t\treturn !page.isWebform;\n\t\t\t\t}).length * 39 + 30) + 'px';\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\treturn '0px';\n\t\t\t}\n\t\t},\n\n\t\tformsSubmenuHeight()\n\t\t{\n\t\t\tif(this.isFormsOpen)\n\t\t\t{\n\t\t\t\treturn (this.application.pages.filter((page) =>\n\t\t\t\t{\n\t\t\t\t\treturn page.isWebform;\n\t\t\t\t}).length * 39 + 30) + 'px';\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\treturn '0px';\n\t\t\t}\n\t\t},\n\n\t\tisFrameError()\n\t\t{\n\t\t\tif(this.isShowPreview && this.currentPage)\n\t\t\t{\n\t\t\t\tif(!this.currentPage.isActive)\n\t\t\t\t{\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\telse if(!this.currentPage.landingId && this.errorPageIds.includes(this.currentPage.id))\n\t\t\t\t{\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\n\t\tisShowLoader()\n\t\t{\n\t\t\treturn (\n\t\t\t\tthis.isShowPreview &&\n\t\t\t\tthis.currentPageId > 0 &&\n\t\t\t\tthis.showedPageIds.includes(this.currentPageId) &&\n\t\t\t\t!this.loadedPageIds.includes(this.currentPageId)\n\t\t\t);\n\t\t},\n\n\t\tisShowStartInfo()\n\t\t{\n\t\t\tlet res = false;\n\t\t\tif(this.isShowPreview)\n\t\t\t{\n\t\t\t\tres = (!this.pages || this.pages.length <= 0);\n\t\t\t}\n\t\t\telse if(this.isShowPayment || this.isShowPaymentBySms)\n\t\t\t{\n\t\t\t\tres = !this.isOrderPublicUrlAvailable;\n\t\t\t}\n\n\t\t\treturn res;\n\t\t},\n\n\t\tgetWrapperHeight()\n\t\t{\n\t\t\tif(\tthis.isShowPreview ||\n\t\t\t\tthis.isShowPayment ||\n\t\t\t\tthis.isShowPaymentBySms )\n\t\t\t{\n\t\t\t\tconst position = BX.pos(this.$root.$el);\n\t\t\t\tlet offset = position.top + 20;\n\t\t\t\tif(this.$root.$nodes.footer)\n\t\t\t\t{\n\t\t\t\t\toffset += BX.pos(this.$root.$nodes.footer).height;\n\t\t\t\t}\n\t\t\t\tconst buttonsPanel = this.$refs['buttonsPanel'];\n\t\t\t\tif(buttonsPanel)\n\t\t\t\t{\n\t\t\t\t\toffset += BX.pos(buttonsPanel).height;\n\t\t\t\t}\n\t\t\t\treturn 'calc(100vh - ' + offset + 'px)';\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\treturn 'auto';\n\t\t\t}\n\t\t},\n\n\t\tlastModified()\n\t\t{\n\t\t\tif(this.currentPage && this.currentPage.modifiedAgo)\n\t\t\t{\n\t\t\t\treturn this.localize.SALESCENTER_MODIFIED.replace('#AGO#', this.currentPage.modifiedAgo);\n\t\t\t}\n\n\t\t\treturn false;\n\t\t},\n\n\t\tlocalize()\n\t\t{\n\t\t\treturn Vue.getFilteredPhrases('SALESCENTER_');\n\t\t},\n\n\t\tpages()\n\t\t{\n\t\t\tthis.isOrderPublicUrlAvailable = this.$root.$app.isOrderPublicUrlAvailable;\n\t\t\treturn [...this.application.pages];\n\t\t},\n\n\t\tisAllowedSubmitButton()\n\t\t{\n\t\t\tif(this.$root.$app.disableSendButton)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif (this.isShowPreview && this.currentPage && !this.currentPage.isActive)\n\t\t\t{\n\t\t\t\treturn false\n\t\t\t}\n\t\t\tif (this.isShowPayment || this.isShowPaymentBySms)\n\t\t\t{\n\t\t\t\tif (\n\t\t\t\t\tthis.isShowPaymentBySms\n\t\t\t\t\t&& this.$root.$app.options.contactPhone === ''\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\treturn this.$store.getters['orderCreation/isAllowedSubmit'];\n\t\t\t}\n\t\t\treturn this.currentPage;\n\t\t},\n\n\t\tisOrderPageDeleted()\n\t\t{\n\t\t\treturn (this.$root.$app.isSiteExists && !this.isOrderPublicUrlExists);\n\t\t},\n\n\t\t...Vuex.mapState({\n\t\t\tapplication: state => state.application,\n\t\t\torder: state => state.orderCreation,\n\t\t})\n\t},\n\n\ttemplate: `\n\t\t<div class=\"salescenter-app-wrapper\" :style=\"{minHeight: getWrapperHeight}\">\n\t\t\t<div class=\"ui-sidepanel-sidebar salescenter-app-sidebar\" ref=\"sidebar\">\n\t\t\t\t<ul class=\"ui-sidepanel-menu\" ref=\"sidepanelMenu\" v-if=\"this.$root.$app.context !== 'deal'\">\n\t\t\t\t\t<li :class=\"{'salescenter-app-sidebar-menu-active': isPagesOpen}\" class=\"ui-sidepanel-menu-item\">\n\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link\" @click.stop.prevent=\"isPagesOpen = !isPagesOpen;\">\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">{{localize.SALESCENTER_LEFT_PAGES}}</div>\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-toggle-btn\">{{this.isPagesOpen ? this.localize.SALESCENTER_SUBMENU_CLOSE : this.localize.SALESCENTER_SUBMENU_OPEN}}</div>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t<ul class=\"ui-sidepanel-submenu\" :style=\"{height: pagesSubmenuHeight}\">\n\t\t\t\t\t\t\t<li v-for=\"page in pages\" v-if=\"!page.isWebform\" :key=\"page.id\"\n\t\t\t\t\t\t\t:class=\"{\n\t\t\t\t\t\t\t\t'ui-sidepanel-submenu-active': (currentPage && currentPage.id == page.id && isShowPreview),\n\t\t\t\t\t\t\t\t'ui-sidepanel-submenu-edit-mode': (editedPageId === page.id)\n\t\t\t\t\t\t\t}\" class=\"ui-sidepanel-submenu-item\">\n\t\t\t\t\t\t\t\t<a :title=\"page.name\" class=\"ui-sidepanel-submenu-link\" @click.stop=\"onPageClick(page)\">\n\t\t\t\t\t\t\t\t\t<input class=\"ui-sidepanel-input\" :value=\"page.name\" v-on:keyup.enter=\"saveMenuItem($event)\" @blur=\"saveMenuItem($event)\" />\n\t\t\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">{{page.name}}</div>\n\t\t\t\t\t\t\t\t\t<div v-if=\"lastAddedPages.includes(page.id)\" class=\"ui-sidepanel-badge-new\"></div>\n\t\t\t\t\t\t\t\t\t<div class=\"ui-sidepanel-edit-btn\"><span class=\"ui-sidepanel-edit-btn-icon\" @click=\"editMenuItem($event, page);\"></span></div>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li class=\"salescenter-app-helper-nav-item salescenter-app-menu-add-page\" @click.stop=\"showAddPageActionPopup($event)\">\n\t\t\t\t\t\t\t\t<span class=\"salescenter-app-helper-nav-item-text salescenter-app-helper-nav-item-add\">+</span><span class=\"salescenter-app-helper-nav-item-text\">{{localize.SALESCENTER_RIGHT_ACTION_ADD}}</span>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li v-if=\"this.$root.$app.isPaymentCreationAvailable\" :class=\"{ 'salescenter-app-sidebar-menu-active': this.isShowPayment}\" class=\"ui-sidepanel-menu-item\" @click=\"showPaymentForm\">\n\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link\">\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">{{localize.SALESCENTER_LEFT_PAYMENT_ADD}}</div>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li @click=\"showOrdersList\">\n\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link\">\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">{{localize.SALESCENTER_LEFT_ORDERS}}</div>\n\t\t\t\t\t\t\t<span class=\"ui-sidepanel-counter\" ref=\"ordersCounter\" v-show=\"ordersCount > 0\">{{ordersCount}}</span>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li @click=\"showOrderAdd\">\n\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link\">\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">{{localize.SALESCENTER_LEFT_ORDER_ADD}}</div>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li v-if=\"this.$root.$app.isCatalogAvailable\" @click=\"showCatalog\">\n\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link\">\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">{{localize.SALESCENTER_LEFT_CATALOG}}</div>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li :class=\"{'salescenter-app-sidebar-menu-active': isFormsOpen}\" class=\"ui-sidepanel-menu-item\">\n\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link\" @click.stop.prevent=\"onFormsClick();\">\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">{{localize.SALESCENTER_LEFT_FORMS_ALL}}</div>\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-toggle-btn\">{{this.isPagesOpen ? this.localize.SALESCENTER_SUBMENU_CLOSE : this.localize.SALESCENTER_SUBMENU_OPEN}}</div>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t<ul class=\"ui-sidepanel-submenu\" :style=\"{height: formsSubmenuHeight}\">\n\t\t\t\t\t\t\t<li v-for=\"page in pages\" v-if=\"page.isWebform\" :key=\"page.id\"\n\t\t\t\t\t\t\t :class=\"{\n\t\t\t\t\t\t\t\t'ui-sidepanel-submenu-active': (currentPage && currentPage.id == page.id && isShowPreview),\n\t\t\t\t\t\t\t\t'ui-sidepanel-submenu-edit-mode': (editedPageId === page.id)\n\t\t\t\t\t\t\t}\" class=\"ui-sidepanel-submenu-item\">\n\t\t\t\t\t\t\t\t<a :title=\"page.name\" class=\"ui-sidepanel-submenu-link\" @click.stop=\"onPageClick(page)\">\n\t\t\t\t\t\t\t\t\t<input class=\"ui-sidepanel-input\" :value=\"page.name\" v-on:keyup.enter=\"saveMenuItem($event)\" @blur=\"saveMenuItem($event)\" />\n\t\t\t\t\t\t\t\t\t<div v-if=\"lastAddedPages.includes(page.id)\" class=\"ui-sidepanel-badge-new\"></div>\n\t\t\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">{{page.name}}</div>\n\t\t\t\t\t\t\t\t\t<div class=\"ui-sidepanel-edit-btn\"><span class=\"ui-sidepanel-edit-btn-icon\" @click=\"editMenuItem($event, page);\"></span></div>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li class=\"salescenter-app-helper-nav-item salescenter-app-menu-add-page\" @click.stop=\"showAddPageActionPopup($event, true)\">\n\t\t\t\t\t\t\t\t<span class=\"salescenter-app-helper-nav-item-text salescenter-app-helper-nav-item-add\">+</span><span class=\"salescenter-app-helper-nav-item-text\">{{localize.SALESCENTER_RIGHT_ACTION_ADD}}</span>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t\t<ul class=\"ui-sidepanel-menu\" ref=\"sidepanelMenu\" v-if=\"this.$root.$app.context === 'deal'\">\n\t\t\t\t\t<li v-if=\"this.$root.$app.isPaymentCreationAvailable\" :class=\"{ 'salescenter-app-sidebar-menu-active': this.isShowPaymentBySms}\" class=\"ui-sidepanel-menu-item\" @click=\"showPaymentBySmsForm\">\n\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link\">\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">{{localize.SALESCENTER_LEFT_SEND_BY_SMS}}</div>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li class=\"ui-sidepanel-menu-item ui-sidepanel-menu-item-sm ui-sidepanel-menu-item-separate\">\n\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link\" v-on:click=\"showCompanyContacts(event)\">\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">{{localize.SALESCENTER_LEFT_PAYMENT_COMPANY_CONTACTS}}</div>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li class=\"ui-sidepanel-menu-item ui-sidepanel-menu-item-sm\">\n\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link\" v-on:click=\"BX.Salescenter.Manager.openFeedbackPayOrderForm(event)\">\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">{{localize.SALESCENTER_LEFT_PAYMENT_OFFER_SCRIPT}}</div>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li class=\"ui-sidepanel-menu-item ui-sidepanel-menu-item-sm\">\n\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link\" v-on:click=\"BX.Salescenter.Manager.openHowPayDealWorks(event)\">\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">{{localize.SALESCENTER_LEFT_PAYMENT_HOW_WORKS}}</div>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t\t<div class=\"salescenter-app-right-side\">\n\t\t\t\t<div class=\"salescenter-app-page-header\" v-show=\"isShowPreview && !isShowStartInfo\">\n\t\t\t\t\t<div class=\"salescenter-btn-action ui-btn ui-btn-link ui-btn-dropdown ui-btn-xs\" @click=\"showActionsPopup($event)\">{{localize.SALESCENTER_RIGHT_ACTIONS_BUTTON}}</div>\n\t\t\t\t\t<div class=\"salescenter-btn-delimiter salescenter-btn-action\"></div>\n\t\t\t\t\t<div class=\"salescenter-btn-action ui-btn ui-btn-link ui-btn-xs ui-btn-icon-edit\" @click=\"editPage\">{{localize.SALESCENTER_RIGHT_ACTION_EDIT}}</div>\n\t\t\t\t</div>\n\t\t\t\t<template v-if=\"isShowStartInfo\">\n\t\t\t\t\t<div class=\"salescenter-app-page-content salescenter-app-start-wrapper\">\n\t\t\t\t\t\t<div class=\"ui-title-1 ui-text-center ui-color-medium\" style=\"margin-bottom: 20px;\">{{localize.SALESCENTER_INFO_TEXT_TOP_2}}</div>\n\t\t\t\t\t\t<div class=\"ui-hr ui-mv-25\"></div>\n\t\t\t\t\t\t<template v-if=\"this.isOrderPublicUrlExists\">\n\t\t\t\t\t\t\t<div class=\"salescenter-title-5 ui-title-5 ui-text-center ui-color-medium\">{{localize.SALESCENTER_INFO_TEXT_BOTTOM_PUBLIC}}</div>\n\t\t\t\t\t\t\t<div style=\"padding-top: 5px;\" class=\"ui-text-center\">\n\t\t\t\t\t\t\t\t<div class=\"ui-btn ui-btn-primary ui-btn-lg\" @click=\"openConnectedSite\">{{localize.SALESCENTER_INFO_PUBLIC}}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t<template v-else-if=\"isOrderPageDeleted\">\n\t\t\t\t\t\t\t<div class=\"salescenter-title-5 ui-title-5 ui-text-center ui-color-medium\">{{localize.SALESCENTER_INFO_ORDER_PAGE_DELETED}}</div>\n\t\t\t\t\t\t\t<div style=\"padding-top: 5px;\" class=\"ui-text-center\">\n\t\t\t\t\t\t\t\t<div class=\"ui-btn ui-btn-primary ui-btn-lg\" @click=\"checkRecycle\">{{localize.SALESCENTER_CHECK_RECYCLE}}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t\t<div class=\"salescenter-title-5 ui-title-5 ui-text-center ui-color-medium\">{{localize.SALESCENTER_INFO_TEXT_BOTTOM_2}}</div>\n\t\t\t\t\t\t\t<div style=\"padding-top: 5px;\" class=\"ui-text-center\">\n\t\t\t\t\t\t\t\t<div class=\"ui-btn ui-btn-primary ui-btn-lg\" @click=\"connect\">{{localize.SALESCENTER_INFO_CREATE}}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div style=\"padding-top: 5px;\" class=\"ui-text-center\">\n\t\t\t\t\t\t\t\t<div class=\"ui-btn ui-btn-link ui-btn-lg\" @click=\"BX.Salescenter.Manager.openHowPayDealWorks(event)\">{{localize.SALESCENTER_HOW}}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t\t<template v-else-if=\"isFrameError && isShowPreview\">\n\t\t\t\t\t<div class=\"salescenter-app-page-content salescenter-app-lost\">\n\t\t\t\t\t\t<div class=\"salescenter-app-lost-block ui-title-1 ui-text-center ui-color-medium\">{{localize.SALESCENTER_ERROR_TITLE}}</div>\n\t\t\t\t\t\t<div v-if=\"currentPage.isFrameDenied === true\" class=\"salescenter-app-lost-helper ui-color-medium\">{{localize.SALESCENTER_RIGHT_FRAME_DENIED}}</div>\n\t\t\t\t\t\t<div v-else-if=\"currentPage.isActive !== true\" class=\"salescenter-app-lost-helper salescenter-app-not-active ui-color-medium\">{{localize.SALESCENTER_RIGHT_NOT_ACTIVE}}</div>\n\t\t\t\t\t\t<div v-else class=\"salescenter-app-lost-helper ui-color-medium\">{{localize.SALESCENTER_ERROR_TEXT}}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t\t<div v-show=\"isShowPreview && !isShowStartInfo && !isFrameError\" class=\"salescenter-app-page-content\">\n\t\t\t\t\t<template v-for=\"page in pages\">\n\t\t\t\t\t\t<iframe class=\"salescenter-app-demo\" v-show=\"currentPage && currentPage.id == page.id\" :src=\"getFrameSource(page)\" frameborder=\"0\" @error=\"onFrameError(page.id)\" @load=\"onFrameLoad(page.id)\" :key=\"page.id\"></iframe>\n\t\t\t\t\t</template>\n\t\t\t\t\t<div class=\"salescenter-app-demo-overlay\" :class=\"{\n\t\t\t\t\t\t'salescenter-app-demo-overlay-loading': this.isShowLoader\n\t\t\t\t\t}\">\n\t\t\t\t\t\t<div v-show=\"isShowLoader\" ref=\"previewLoader\"></div>\n\t\t\t\t\t\t<div v-if=\"lastModified\" class=\"salescenter-app-demo-overlay-modification\">{{lastModified}}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t    <template v-if=\"this.$root.$app.isPaymentsLimitReached\">\n\t\t\t        <div ref=\"paymentsLimit\" v-show=\"isShowPayment && !isShowStartInfo\"></div>\n\t\t\t\t</template>\n\t\t\t\t<template v-else>\n\t\t\t        <component v-if=\"isShowPayment && !isShowStartInfo\" :is=\"config.templateAddPaymentName\"></component>\n\t\t        </template>\n\t\t        <template v-if=\"isShowPaymentBySms && !isShowStartInfo\">\n\t\t\t        <component :is=\"config.templateAddPaymentBySms\" \n\t\t\t        @send=\"send\" \n\t\t\t        :isAllowedSubmitButton=\"isAllowedSubmitButton\"></component>\n\t\t        </template>\n\t\t\t</div>\n\t\t\t<div class=\"ui-button-panel-wrapper salescenter-button-panel\" ref=\"buttonsPanel\">\n\t\t\t\t<div class=\"ui-button-panel\">\n\t\t\t\t\t<button :class=\"{'ui-btn-disabled': !this.isAllowedSubmitButton}\" class=\"ui-btn ui-btn-md ui-btn-success\" @click=\"send($event)\" v-if=\"editable\">{{localize.SALESCENTER_SEND}}</button>\n\t\t\t\t\t<button :class=\"{'ui-btn-disabled': !this.isAllowedSubmitButton}\" class=\"ui-btn ui-btn-md ui-btn-success\" @click=\"send($event)\" v-else>{{localize.SALESCENTER_RESEND}}</button>\n\t\t\t\t\t<button class=\"ui-btn ui-btn-md ui-btn-link\" @click=\"close\">{{localize.SALESCENTER_CANCEL}}</button>\n\t\t\t\t\t<button v-if=\"isShowPayment && !isShowStartInfo && !this.$root.$app.isPaymentsLimitReached\" class=\"ui-btn ui-btn-md ui-btn-link btn-send-crm\" @click=\"send($event, 'y')\">{{localize.SALESCENTER_SAVE_ORDER}}</button>\n\t\t\t\t</div>\n\t\t\t\t<div v-if=\"this.order.errors.length > 0\" ref=\"errorBlock\"></div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n\n});","import {config} from \"./config\";\nimport {Vue} from \"ui.vue\";\nimport {PopupMenuWindow} from 'main.popup';\n\nimport \"ui.dropdown\";\nimport \"ui.common\";\nimport \"ui.alerts\";\nimport {MixinTemplatesType} from \"./components/templates-type-mixin\";\nimport {type BaseEvent, EventEmitter} from 'main.core.events';\n\nVue.component(config.templateAddPaymentProductName,\n\t{\n\t\t/**\n\t\t * @emits 'changeBasketItem' {index: number, fields: object}\n\t\t * @emits 'refreshBasket'\n\t\t * @emits 'removeItem' {index: number}\n\t\t */\n\n\t\tprops: ['basketItem', 'basketItemIndex', 'countItems', 'selectedProductIds'],\n\t\tmixins:[MixinTemplatesType],\n\t\tdata()\n\t\t{\n\t\t\treturn {\n\t\t\t\ttimer: null,\n\t\t\t\tproductSelector: null,\n\t\t\t\tisImageAdded: false,\n\t\t\t\timageControlId: null,\n\t\t\t};\n\t\t},\n\t\tcreated()\n\t\t{\n\t\t\tthis.currencySymbol = this.$root.$app.options.currencySymbol;\n\t\t\tthis.defaultMeasure = {\n\t\t\t\tname: '',\n\t\t\t\tid: null,\n\t\t\t};\n\t\t\tthis.measures = this.$root.$app.options.measures || [];\n\t\t\tif (BX.type.isArray(this.measures) && this.measures)\n\t\t\t{\n\t\t\t\tthis.measures.map((measure) => {\n\t\t\t\t\tif (measure['IS_DEFAULT'] === 'Y')\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.defaultMeasure.name = measure.SYMBOL;\n\t\t\t\t\t\tthis.defaultMeasure.code = measure.CODE;\n\n\t\t\t\t\t\tif (!this.basketItem.measureName && !this.basketItem.measureName)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.changeData({\n\t\t\t\t\t\t\t\tmeasureCode: this.defaultMeasure.code,\n\t\t\t\t\t\t\t\tmeasureName: this.defaultMeasure.name\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tEventEmitter.subscribe('onUploaderIsInited', this.onUploaderIsInitedHandler.bind(this));\n\t\t},\n\t\tmounted()\n\t\t{\n\t\t\tthis.productSelector = new BX.UI.Dropdown(\n\t\t\t\t{\n\t\t\t\t\tsearchAction: \"salescenter.api.order.searchProduct\",\n\t\t\t\t\tsearchOptions: {\n\t\t\t\t\t\trestrictedSearchIds: this.selectedProductIds\n\t\t\t\t\t},\n\t\t\t\t\tenableCreation: true,\n\t\t\t\t\tenableCreationOnBlur: false,\n\t\t\t\t\tsearchResultRenderer: null,\n\t\t\t\t\ttargetElement: this.$refs.searchProductLine,\n\t\t\t\t\titems: this.getProductSelectorItems(),\n\t\t\t\t\tmessages:\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcreationLegend: this.localize.SALESCENTER_PRODUCT_CREATE,\n\t\t\t\t\t\t\tnotFound: this.localize.SALESCENTER_PRODUCT_NOT_FOUND,\n\t\t\t\t\t\t},\n\t\t\t\t\tevents:\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tonSelect: this.selectCatalogItem.bind(this),\n\t\t\t\t\t\t\tonAdd: this.showCreationForm.bind(this),\n\t\t\t\t\t\t\tonReset: this.resetSearchForm.bind(this)\n\t\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tif (!this.basketItem.hasOwnProperty('id'))\n\t\t\t{\n\t\t\t\tthis.initDefaultFileControl();\n\t\t\t}\n\t\t},\n\t\tupdated()\n\t\t{\n\t\t\tif (this.basketItem.hasOwnProperty('fileControlJs') && !this.basketItem.productId)\n\t\t\t{\n\t\t\t\tlet fileControlJs = this.basketItem.fileControlJs;\n\t\t\t\tif (fileControlJs)\n\t\t\t\t{\n\t\t\t\t\tfileControlJs.forEach((fileControlJsItem) => {\n\t\t\t\t\t\tBX.evalGlobal(fileControlJsItem);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tdirectives:\n\t\t\t{\n\t\t\t\t'bx-search-product':\n\t\t\t\t\t{\n\t\t\t\t\t\tinserted(element, binding)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (binding.value.selector instanceof BX.UI.Dropdown)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tconst restrictedSearchIds = binding.value.restrictedIds;\n\t\t\t\t\t\t\t\tbinding.value.selector.targetElement = element;\n\t\t\t\t\t\t\t\tif (BX.type.isArray(restrictedSearchIds))\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tbinding.value.selector.searchOptions = {restrictedSearchIds};\n\t\t\t\t\t\t\t\t\tbinding.value.selector.items = binding.value.selector.items.filter(\n\t\t\t\t\t\t\t\t\t\titem => !restrictedSearchIds.includes(item.id)\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tbinding.value.selector.init()\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t},\n\n\t\tmethods:\n\t\t\t{\n\t\t\t\tonUploaderIsInitedHandler(event: BaseEvent)\n\t\t\t\t{\n\t\t\t\t\tif (this.basketItem.productId)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst [, uploader] = event.getCompatData();\n\n\t\t\t\t\tEventEmitter.subscribe(uploader, 'onFileIsUploaded', this.onFileIsUploadedHandler.bind(this));\n\t\t\t\t\tEventEmitter.subscribe(uploader, 'onFileIsDeleted', this.onFileIsDeleteHandler.bind(this));\n\t\t\t\t},\n\t\t\t\tonFileIsUploadedHandler(event: BaseEvent)\n\t\t\t\t{\n\t\t\t\t\tconst [fileId, , params, uploader] = event.getCompatData();\n\n\t\t\t\t\tif (!this.imageControlId)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.imageControlId = uploader.CID;\n\t\t\t\t\t}\n\t\t\t\t\telse if (this.imageControlId !== uploader.CID)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tlet images = this.basketItem.image,\n\t\t\t\t\t\tfile = params && params['file'] && params['file']['files'] && params['file']['files']['default']\n\t\t\t\t\t\t\t? params['file']['files']['default']\n\t\t\t\t\t\t\t: false;\n\n\t\t\t\t\tif (file)\n\t\t\t\t\t{\n\t\t\t\t\t\timages.push({\n\t\t\t\t\t\t\tfileId: fileId,\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\tname: file.name,\n\t\t\t\t\t\t\t\ttype: file.type,\n\t\t\t\t\t\t\t\ttmp_name: file.path,\n\t\t\t\t\t\t\t\tsize: file.size,\n\t\t\t\t\t\t\t\terror: null,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tlet fields = {\n\t\t\t\t\t\t\timage: images,\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tfields.isCreatedProduct = 'Y';\n\n\t\t\t\t\t\tthis.changeData(fields);\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.isImageAdded = true;\n\t\t\t\t},\n\t\t\t\tonFileIsDeleteHandler(event: BaseEvent)\n\t\t\t\t{\n\t\t\t\t\tconst [fileId] = event.getCompatData();\n\n\t\t\t\t\tlet images = this.basketItem.image;\n\t\t\t\t\timages.forEach(function (item, index, object) {\n\t\t\t\t\t\tif (item.fileId === fileId)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tobject.splice(index, 1);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tlet fields = {\n\t\t\t\t\t\timage: images,\n\t\t\t\t\t};\n\n\t\t\t\t\tthis.changeData(fields);\n\t\t\t\t},\n\t\t\t\ttoggleDiscount(value)\n\t\t\t\t{\n\t\t\t\t\tthis.changeData(\n\t\t\t\t\t\t{showDiscount: value}\n\t\t\t\t\t);\n\n\t\t\t\t\tvalue === 'Y' ? setTimeout(() => this.$refs.discountInput.focus()) : null;\n\t\t\t\t},\n\t\t\t\tchangeData(fields)\n\t\t\t\t{\n\t\t\t\t\tthis.$emit('changeBasketItem', {\n\t\t\t\t\t\tindex: this.basketItemIndex,\n\t\t\t\t\t\tfields: fields\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tisNeedRefreshAfterChanges()\n\t\t\t\t{\n\t\t\t\t\tif (this.isCreationMode)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn this.basketItem.name.length > 0\n\t\t\t\t\t\t\t&& this.basketItem.quantity > 0\n\t\t\t\t\t\t\t&& this.basketItem.price > 0\n\t\t\t\t\t}\n\n\t\t\t\t\treturn true;\n\t\t\t\t},\n\t\t\t\trefreshBasket()\n\t\t\t\t{\n\t\t\t\t\tif (this.isNeedRefreshAfterChanges())\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$emit('refreshBasket');\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tdebouncedRefresh(delay)\n\t\t\t\t{\n\t\t\t\t\tif (this.timer)\n\t\t\t\t\t{\n\t\t\t\t\t\tclearTimeout(this.timer);\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.timer = setTimeout(() => {\n\t\t\t\t\t\tthis.refreshBasket();\n\t\t\t\t\t\tthis.timer = null;\n\t\t\t\t\t}, delay);\n\t\t\t\t},\n\t\t\t\tchangeQuantity(event)\n\t\t\t\t{\n\t\t\t\t\tevent.target.value = event.target.value.replace(/[^.\\d]/g,'.');\n\t\t\t\t\tlet newQuantity = parseFloat(event.target.value);\n\t\t\t\t\tlet lastSymbol = event.target.value.substr(-1);\n\n\t\t\t\t\tif (!newQuantity || lastSymbol === '.')\n\t\t\t\t\t{\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tlet fields = this.basketItem;\n\t\t\t\t\tfields.quantity = newQuantity;\n\t\t\t\t\tthis.changeData(fields);\n\n\t\t\t\t\tthis.debouncedRefresh(300);\n\t\t\t\t},\n\t\t\t\tchangeName(event)\n\t\t\t\t{\n\t\t\t\t\tlet newName = event.target.value;\n\t\t\t\t\tlet fields = this.basketItem;\n\t\t\t\t\tfields.name = newName;\n\t\t\t\t\tthis.changeData(fields);\n\t\t\t\t\tthis.refreshBasket();\n\t\t\t\t},\n\t\t\t\tchangePrice(event)\n\t\t\t\t{\n\t\t\t\t\tevent.target.value = event.target.value.replace(/[^.,\\d]/g,'');\n\t\t\t\t\tif (event.target.value === '')\n\t\t\t\t\t{\n\t\t\t\t\t\tevent.target.value = 0;\n\t\t\t\t\t}\n\t\t\t\t\tlet lastSymbol = event.target.value.substr(-1);\n\t\t\t\t\tif (lastSymbol === ',')\n\t\t\t\t\t{\n\t\t\t\t\t\tevent.target.value = event.target.value.replace(',', \".\");\n\t\t\t\t\t}\n\t\t\t\t\tlet newPrice = parseFloat(event.target.value);\n\t\t\t\t\tif (newPrice < 0|| lastSymbol === '.' || lastSymbol === ',')\n\t\t\t\t\t{\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tlet fields = this.basketItem;\n\t\t\t\t\tfields.price = newPrice;\n\t\t\t\t\tfields.discount = 0;\n\n\t\t\t\t\tif (fields.module !== 'catalog')\n\t\t\t\t\t{\n\t\t\t\t\t\tfields.basePrice = newPrice;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tfields.isCustomPrice = 'Y';\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.changeData(fields);\n\n\t\t\t\t\tthis.refreshBasket();\n\t\t\t\t},\n\t\t\t\t/**\n\t\t\t\t *\n\t\t\t\t * @param discountType {string}\n\t\t\t\t */\n\t\t\t\tchangeDiscountType(discountType)\n\t\t\t\t{\n\t\t\t\t\tlet type = (discountType === 'currency') ? 'currency' : 'percent';\n\t\t\t\t\tlet fields = this.basketItem;\n\t\t\t\t\tfields.discountType = type;\n\t\t\t\t\tfields.price = fields.basePrice;\n\t\t\t\t\tfields.isCustomPrice = 'Y';\n\n\t\t\t\t\tthis.changeData(fields);\n\n\t\t\t\t\tthis.refreshBasket();\n\t\t\t\t},\n\t\t\t\tchangeDiscount(event)\n\t\t\t\t{\n\t\t\t\t\tlet discountValue = parseFloat(event.target.value) || 0;\n\t\t\t\t\tif (discountValue === parseFloat(this.basketItem.discount))\n\t\t\t\t\t{\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tlet fields = this.basketItem;\n\t\t\t\t\tfields.discount = discountValue;\n\t\t\t\t\tfields.price = fields.basePrice;\n\t\t\t\t\tfields.isCustomPrice = 'Y';\n\n\t\t\t\t\tthis.changeData(fields);\n\n\t\t\t\t\tthis.refreshBasket();\n\t\t\t\t},\n\t\t\t\tshowCreationForm()\n\t\t\t\t{\n\t\t\t\t\tif (!(this.productSelector instanceof BX.UI.Dropdown))\n\t\t\t\t\t\treturn true;\n\n\t\t\t\t\tconst value = this.productSelector.targetElement.value;\n\t\t\t\t\tlet fields = {\n\t\t\t\t\t\tproductId: '',\n\t\t\t\t\t\tquantity: 1,\n\t\t\t\t\t\tmodule: null,\n\t\t\t\t\t\tsort: this.basketItemIndex,\n\t\t\t\t\t\tisCreatedProduct: 'Y',\n\t\t\t\t\t\tname: value,\n\t\t\t\t\t\tisCustomPrice: 'Y',\n\t\t\t\t\t\tdiscountInfos: [],\n\t\t\t\t\t\terrors: [],\n\t\t\t\t\t};\n\n\t\t\t\t\tif (!this.isImageAdded)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.initDefaultFileControl(fields);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.changeData(fields);\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.productSelector.destroyPopupWindow();\n\t\t\t\t},\n\t\t\t\tresetSearchForm()\n\t\t\t\t{\n\t\t\t\t\tif (!(this.productSelector instanceof BX.UI.Dropdown))\n\t\t\t\t\t\treturn true;\n\n\t\t\t\t\tthis.productSelector.targetElement.value = '';\n\t\t\t\t\tthis.productSelector.updateItemsList(this.getProductSelectorItems());\n\n\t\t\t\t\tlet fields = {\n\t\t\t\t\t\tproductId: '',\n\t\t\t\t\t\tcode: null,\n\t\t\t\t\t\tmodule: null,\n\t\t\t\t\t\tname: '',\n\t\t\t\t\t\tquantity: 0,\n\t\t\t\t\t\tprice: 0,\n\t\t\t\t\t\tbasePrice: 0,\n\t\t\t\t\t\tdiscount: 0,\n\t\t\t\t\t\tdiscountInfos: [],\n\t\t\t\t\t\timage:[],\n\t\t\t\t\t\terrors:['SALE_BASKET_ITEM_NAME'],\n\t\t\t\t\t};\n\n\t\t\t\t\tthis.initDefaultFileControl(fields).then(() => {\n\t\t\t\t\t\tthis.refreshBasket();\n\t\t\t\t\t});\n\n\t\t\t\t\tthis.isImageAdded = false;\n\t\t\t\t\tthis.imageControlId = null;\n\t\t\t\t\tthis.productSelector.destroyPopupWindow();\n\t\t\t\t},\n\t\t\t\thideCreationForm()\n\t\t\t\t{\n\t\t\t\t\tif (!(this.productSelector instanceof BX.UI.Dropdown))\n\t\t\t\t\t\treturn true;\n\n\t\t\t\t\tlet fields = {\n\t\t\t\t\t\tisCreatedProduct: 'N',\n\t\t\t\t\t\tproductId: '',\n\t\t\t\t\t\tname: '',\n\t\t\t\t\t\tquantity: 0,\n\t\t\t\t\t\tprice: 0,\n\t\t\t\t\t\tbasePrice: 0,\n\t\t\t\t\t\tdiscount: 0,\n\t\t\t\t\t\tdiscountInfos: [],\n\t\t\t\t\t\timage:[],\n\t\t\t\t\t\terrors:[],\n\t\t\t\t\t};\n\n\t\t\t\t\tthis.initDefaultFileControl(fields).then(() => {\n\t\t\t\t\t\tthis.refreshBasket();\n\t\t\t\t\t});\n\n\t\t\t\t\tthis.isImageAdded = false;\n\t\t\t\t\tthis.imageControlId = null;\n\t\t\t\t},\n\t\t\t\tremoveItem()\n\t\t\t\t{\n\t\t\t\t\tthis.$emit('removeItem', {\n\t\t\t\t\t\tindex: this.basketItemIndex\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tselectCatalogItem(sender, item)\n\t\t\t\t{\n\t\t\t\t\tif (!sender instanceof BX.UI.Dropdown)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (item.id === undefined || parseInt(item.id) <= 0)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\n\t\t\t\t\tlet fields = {\n\t\t\t\t\t\tname: item.title,\n\t\t\t\t\t\tproductId: item.id,\n\t\t\t\t\t\tsort: this.basketItemIndex,\n\t\t\t\t\t\tmodule: 'catalog',\n\t\t\t\t\t\tisCustomPrice: 'N',\n\t\t\t\t\t\tdiscount: 0,\n\t\t\t\t\t\tquantity: this.basketItem.quantity > 0 ? this.basketItem.quantity : 1,\n\t\t\t\t\t\tisCreatedProduct: 'N',\n\t\t\t\t\t\timage: [],\n\t\t\t\t\t};\n\n\t\t\t\t\tif (this.basketItemIndex.productId !== item.id)\n\t\t\t\t\t{\n\t\t\t\t\t\tfields.encodedFields = null;\n\t\t\t\t\t\tfields.discount = 0;\n\t\t\t\t\t\tfields.isCustomPrice = 'N';\n\t\t\t\t\t}\n\n\t\t\t\t\tBX.ajax.runAction(\n\t\t\t\t\t\t\"salescenter.api.order.getFileControl\",\n\t\t\t\t\t\t{ data: { productId: item.id } }\n\t\t\t\t\t).then((result) => {\n\t\t\t\t\t\tlet data = BX.prop.getObject(result, \"data\", {});\n\t\t\t\t\t\tif (data.fileControl)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlet fileControl = BX.processHTML(data.fileControl);\n\t\t\t\t\t\t\tfields.fileControlHtml = fileControl['HTML'];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.changeData(fields);\n\t\t\t\t\t\tthis.$emit('refreshBasket');\n\t\t\t\t\t});\n\n\t\t\t\t\tsender.destroyPopupWindow();\n\t\t\t\t},\n\t\t\t\topenDiscountEditor(e, url)\n\t\t\t\t{\n\t\t\t\t\tif(!(window.top.BX.SidePanel && window.top.BX.SidePanel.Instance))\n\t\t\t\t\t{\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\twindow.top.BX.SidePanel.Instance.open (\n\t\t\t\t\t\tBX.util.add_url_param( url, { \"IFRAME\": \"Y\", \"IFRAME_TYPE\": \"SIDE_SLIDER\", \"publicSidePanel\": \"Y\" } ),\n\t\t\t\t\t\t{ allowChangeHistory: false }\n\t\t\t\t\t);\n\n\t\t\t\t\te.preventDefault ? e.preventDefault() : (e.returnValue = false);\n\t\t\t\t},\n\t\t\t\tisEmptyProductName()\n\t\t\t\t{\n\t\t\t\t\treturn (this.basketItem.name.length === 0);\n\t\t\t\t},\n\t\t\t\tcalculateCorrectionFactor(quantity, measureRatio)\n\t\t\t\t{\n\t\t\t\t\tlet factoredQuantity = quantity;\n\t\t\t\t\tlet factoredRatio = measureRatio;\n\t\t\t\t\tlet correctionFactor = 1;\n\n\t\t\t\t\twhile (!(Number.isInteger(factoredQuantity) && Number.isInteger(factoredRatio)))\n\t\t\t\t\t{\n\t\t\t\t\t\tcorrectionFactor *= 10;\n\t\t\t\t\t\tfactoredQuantity = quantity * correctionFactor;\n\t\t\t\t\t\tfactoredRatio = measureRatio * correctionFactor;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn correctionFactor;\n\t\t\t\t},\n\t\t\t\tincrementQuantity()\n\t\t\t\t{\n\t\t\t\t\tlet correctionFactor = this.calculateCorrectionFactor(this.basketItem.quantity, this.basketItem.measureRatio);\n\t\t\t\t\tthis.basketItem.quantity = (this.basketItem.quantity * correctionFactor + this.basketItem.measureRatio * correctionFactor) / correctionFactor;\n\t\t\t\t\tthis.changeData(this.basketItem);\n\n\t\t\t\t\tthis.refreshBasket();\n\t\t\t\t},\n\t\t\t\tdecrementQuantity()\n\t\t\t\t{\n\t\t\t\t\tif (this.basketItem.quantity > this.basketItem.measureRatio)\n\t\t\t\t\t{\n\t\t\t\t\t\tlet correctionFactor = this.calculateCorrectionFactor(this.basketItem.quantity, this.basketItem.measureRatio);\n\t\t\t\t\t\tthis.basketItem.quantity = (this.basketItem.quantity * correctionFactor - this.basketItem.measureRatio * correctionFactor) / correctionFactor;\n\t\t\t\t\t\tthis.changeData(this.basketItem);\n\n\t\t\t\t\t\tthis.refreshBasket();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tshowPopupMenu(target, array, type)\n\t\t\t\t{\n\t\t\t\t\tif (!this.editable)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tlet menuItems = [];\n\t\t\t\t\tlet setItem = (ev, param) => {\n\t\t\t\t\t\ttarget.innerHTML = ev.target.innerHTML;\n\n\t\t\t\t\t\tif(type === 'discount')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.changeDiscountType(param.options.type);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.popupMenu.close();\n\t\t\t\t\t};\n\n\t\t\t\t\tif(type === 'discount')\n\t\t\t\t\t{\n\t\t\t\t\t\tarray = [];\n\t\t\t\t\t\tarray.percent = '%';\n\t\t\t\t\t\tarray.currency = this.currencySymbol;\n\t\t\t\t\t}\n\n\t\t\t\t\tif(array)\n\t\t\t\t\t{\n\t\t\t\t\t\tfor(let item in array)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlet text = array[item];\n\n\t\t\t\t\t\t\tif(type === 'measures')\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttext = array[item].SYMBOL;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tmenuItems.push({\n\t\t\t\t\t\t\t\ttext: text,\n\t\t\t\t\t\t\t\tonclick: setItem.bind({ value: 'settswguy' }),\n\t\t\t\t\t\t\t\ttype: type === 'discount' ? item : null\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.popupMenu = new PopupMenuWindow({\n\t\t\t\t\t\tbindElement: target,\n\t\t\t\t\t\titems: menuItems\n\t\t\t\t\t});\n\n\t\t\t\t\tthis.popupMenu.show();\n\t\t\t\t},\n\t\t\t\tinitDefaultFileControl(fields = {})\n\t\t\t\t{\n\t\t\t\t\treturn this.getDefaultFileControl().then((fileControl) => {\n\n\t\t\t\t\t\tlet fileControlData = BX.processHTML(fileControl);\n\t\t\t\t\t\tfields.fileControlHtml = fileControlData['HTML'];\n\t\t\t\t\t\tfields.fileControlJs = [];\n\t\t\t\t\t\tfor (let i in fileControlData['SCRIPT'])\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (fileControlData['SCRIPT'].hasOwnProperty(i))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tfields.fileControlJs.push(fileControlData['SCRIPT'][i]['JS']);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.changeData(fields);\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tgetDefaultFileControl()\n\t\t\t\t{\n\t\t\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\t\t\tBX.ajax.runAction(\n\t\t\t\t\t\t\t\"salescenter.api.order.getFileControl\"\n\t\t\t\t\t\t).then(\n\t\t\t\t\t\t\t(result) => {\n\t\t\t\t\t\t\t\tlet data = BX.prop.getObject(result, \"data\", {'fileControl': ''});\n\t\t\t\t\t\t\t\tif (data.fileControl)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tresolve(data.fileControl);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t(error) => {\n\t\t\t\t\t\t\t\treject(new Error(error.errors.join('<br />')));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tgetProductSelectorItems()\n\t\t\t\t{\n\t\t\t\t\tlet initialProducts = this.$root.$app.options.mostPopularProducts.map((item) => {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tid: item.ID,\n\t\t\t\t\t\t\ttitle: item.NAME,\n\t\t\t\t\t\t\tmodule: 'salescenter',\n\t\t\t\t\t\t};\n\t\t\t\t\t});\n\n\t\t\t\t\tlet selectedProductIds = Array.isArray(this.selectedProductIds) ? this.selectedProductIds : [];\n\n\t\t\t\t\tlet productSelectorItems = initialProducts.filter((item) => {\n\t\t\t\t\t\treturn !item.id || !selectedProductIds.includes(item.id)\n\t\t\t\t\t});\n\n\t\t\t\t\tif (productSelectorItems.length)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn productSelectorItems;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\treturn [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttitle: '',\n\t\t\t\t\t\t\t\tsubTitle: this.localize.SALESCENTER_PRODUCT_BEFORE_SEARCH_TITLE\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\twatch: {\n\t\t\tselectedProductIds(newValue, oldValue) {\n\t\t\t\tlet newValueArray = Array.isArray(newValue) ? newValue : [];\n\t\t\t\tlet oldValueArray = Array.isArray(oldValue) ? oldValue : [];\n\n\t\t\t\tif (newValueArray.join() === oldValueArray.join())\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.productSelector.updateItemsList(this.getProductSelectorItems());\n\t\t\t}\n\t\t},\n\t\tcomputed:\n\t\t\t{\n\t\t\t\tlocalize()\n\t\t\t\t{\n\t\t\t\t\treturn Vue.getFilteredPhrases('SALESCENTER_PRODUCT_');\n\t\t\t\t},\n\t\t\t\tshowDiscount()\n\t\t\t\t{\n\t\t\t\t\treturn this.basketItem.showDiscount === 'Y';\n\t\t\t\t},\n\t\t\t\tshowPrice()\n\t\t\t\t{\n\t\t\t\t\treturn this.basketItem.discount > 0 || parseFloat(this.basketItem.price) !== parseFloat(this.basketItem.basePrice);\n\t\t\t\t},\n\t\t\t\tgetMeasureName()\n\t\t\t\t{\n\t\t\t\t\treturn this.basketItem.measureName || this.defaultMeasure.name;\n\t\t\t\t},\n\t\t\t\tgetMeasureCode()\n\t\t\t\t{\n\t\t\t\t\treturn this.basketItem.measureCode || this.defaultMeasure.code;\n\t\t\t\t},\n\t\t\t\tgetBasketFileControl()\n\t\t\t\t{\n\t\t\t\t\tlet fileControl = this.basketItem.fileControl, html = '';\n\t\t\t\t\tif (fileControl)\n\t\t\t\t\t{\n\t\t\t\t\t\tlet data = BX.processHTML(fileControl);\n\t\t\t\t\t\thtml = data['HTML'];\n\t\t\t\t\t}\n\n\t\t\t\t\treturn html;\n\t\t\t\t},\n\t\t\t\trestrictedSearchIds()\n\t\t\t\t{\n\t\t\t\t\tlet restrictedSearchIds = this.selectedProductIds;\n\t\t\t\t\tif (this.basketItem.module === 'catalog')\n\t\t\t\t\t{\n\t\t\t\t\t\trestrictedSearchIds = restrictedSearchIds.filter(id => id !== this.basketItem.productId);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn restrictedSearchIds;\n\t\t\t\t},\n\t\t\t\tisCreationMode()\n\t\t\t\t{\n\t\t\t\t\treturn this.basketItem.isCreatedProduct === 'Y';\n\t\t\t\t},\n\t\t\t\tisNotEnoughQuantity()\n\t\t\t\t{\n\t\t\t\t\treturn this.basketItem.errors.includes('SALE_BASKET_AVAILABLE_QUANTITY');\n\t\t\t\t},\n\t\t\t\thasPriceError()\n\t\t\t\t{\n\t\t\t\t\treturn this.basketItem.errors.includes('SALE_BASKET_ITEM_WRONG_PRICE');\n\t\t\t\t},\n\t\t\t\thasNameError()\n\t\t\t\t{\n\t\t\t\t\treturn this.basketItem.errors.includes('SALE_BASKET_ITEM_NAME');\n\t\t\t\t},\n\t\t\t\tproductInputWrapperClass()\n\t\t\t\t{\n\t\t\t\t\treturn {\n\t\t\t\t\t\t'ui-ctl': true,\n\t\t\t\t\t\t'ui-ctl-w100': true,\n\t\t\t\t\t\t'ui-ctl-md': true,\n\t\t\t\t\t\t'ui-ctl-after-icon': true,\n\t\t\t\t\t\t'ui-ctl-danger': this.hasNameError,\n\t\t\t\t\t};\n\n\t\t\t\t},\n\t\t\t},\n\t\ttemplate: `\n\t\t<div>\n\t\t\t<!--counters anr remover-->\n\t\t\t<div class=\"salescenter-app-counter\">{{basketItemIndex + 1}}</div>\n\t\t\t<div class=\"salescenter-app-remove\" @click=\"removeItem\" v-if=\"countItems > 1 && editable\"></div>\n\t\t\t<!--counters anr remover end-->\n\t\t\t\n\t\t\t<!--if isCreationMode-->\n\t\t\t<div class=\"salescenter-app-form-container\" v-if=\"!isCreationMode\">\n\t\t\t\t<div class=\"salescenter-app-form-row\">\n\t\t\t\t\t<!--col 1-->\n\t\t\t\t\t<div class=\"salescenter-app-form-col salescenter-app-form-col-prod\" style=\"flex:8\">\n\t\t\t\t\t\t<div class=\"salescenter-app-form-col-input\">\n\t\t\t\t\t\t\t<label class=\"salescenter-app-ctl-label-text ui-ctl-label-text\">{{localize.SALESCENTER_PRODUCT_NAME}}</label>\n\t\t\t\t\t\t\t<div :class=\"productInputWrapperClass\">\n\t\t\t\t\t\t\t\t<button class=\"ui-ctl-after ui-ctl-icon-clear\" @click=\"resetSearchForm\" v-if=\"basketItem.name.length > 0 && editable\"/>\n\t\t\t\t\t\t\t\t<!--<button class=\"ui-ctl-after ui-ctl-icon-clear\" @click=\"removeItem\" v-if=\"countItems > 1 && editable\"/>-->\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\tref=\"searchProductLine\" \n\t\t\t\t\t\t\t\t\tclass=\"ui-ctl-element ui-ctl-textbox salescenter-app-product-search\" \n\t\t\t\t\t\t\t\t\t:value=\"basketItem.name\"\n\t\t\t\t\t\t\t\t\tv-bx-search-product=\"{selector: productSelector, restrictedIds: restrictedSearchIds}\"\n\t\t\t\t\t\t\t\t\t:disabled=\"!editable\"\n\t\t\t\t\t\t\t\t\t:placeholder=\"localize.SALESCENTER_PRODUCT_NAME_PLACEHOLDER\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div v-if=\"getBasketFileControl\" class=\"salescenter-app-form-col-img\">\n\t\t\t\t\t\t\t<!-- loaded product -->\n\t\t\t\t\t\t\t<div v-html=\"getBasketFileControl\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div v-else class=\"salescenter-app-form-col-img\">\n\t\t\t\t\t\t\t<!-- selected product -->\n\t\t\t\t\t\t\t<div v-html=\"basketItem.fileControlHtml\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<!--col 1 end-->\n\n\t\t\t\t\t<!--col 2-->\n\t\t\t\t\t<div class=\"salescenter-app-form-col salescenter-app-form-col-sm\" style=\"flex:2\">\n\t\t\t\t\t\t<label class=\"salescenter-app-ctl-label-text salescenter-app-ctl-label-text-link ui-ctl-label-text\">\n\t\t\t\t\t\t\t{{localize.SALESCENTER_PRODUCT_QUANTITY.replace('#MEASURE_NAME#', ' ')}}\n\t\t\t\t\t\t\t<span @click=\"showPopupMenu($event.target, measures, 'measures')\">{{ getMeasureName }}</span>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-md ui-ctl-w100\" :class=\"isNotEnoughQuantity ? 'ui-ctl-danger' : ''\">\n\t\t\t\t\t\t\t<input \ttype=\"text\" class=\"ui-ctl-element ui-ctl-textbox\" \n\t\t\t\t\t\t\t\t\t:value=\"basketItem.quantity\"\n\t\t\t\t\t\t\t\t\t@change=\"changeQuantity\"\n\t\t\t\t\t\t\t\t\t:disabled=\"!editable\">\n\t\t\t\t\t\t\t<div class=\"salescenter-app-input-counter\" v-if=\"editable\">\n\t\t\t\t\t\t\t\t<div class=\"salescenter-app-input-counter-up\" @click=\"incrementQuantity\"></div>\n\t\t\t\t\t\t\t\t<div class=\"salescenter-app-input-counter-down\" @click=\"decrementQuantity\"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"salescenter-form-error\" v-if=\"isNotEnoughQuantity\">{{localize.SALESCENTER_PRODUCT_IS_NOT_AVAILABLE}}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<!--col 2 end-->\n\t\t\t\t\t\n\t\t\t\t\t<!--col 3-->\n\t\t\t\t\t<div class=\"salescenter-app-form-col salescenter-app-form-col-sm\" style=\"flex:2\">\n\t\t\t\t\t\t<label class=\"salescenter-app-ctl-label-text ui-ctl-label-text\">{{localize.SALESCENTER_PRODUCT_PRICE_2}}</label>\n\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-md ui-ctl-w100 salescenter-app-col-currency\" :class=\"hasPriceError ? 'ui-ctl-danger' : ''\">\n\t\t\t\t\t\t\t<input \ttype=\"text\" class=\"ui-ctl-element ui-ctl-textbox\"\n\t\t\t\t\t\t\t\t\t:value=\"basketItem.price\"\n\t\t\t\t\t\t\t\t\t@change=\"changePrice\"\n\t\t\t\t\t\t\t\t\t:disabled=\"!editable\">\n\t\t\t\t\t\t\t<div class=\"salescenter-app-col-currency-symbol\" v-html=\"currencySymbol\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<!--col 3 end-->\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t<!--show discount link-->\n\t\t\t\t<div class=\"salescenter-app-form-row\" v-if=\"editable || (!editable && showPrice)\">\n\t\t\t\t\t<div style=\"flex: 8;\"></div>\n\t\t\t\t\t<div class=\"salescenter-app-form-col salescenter-app-form-col-sm\" style=\"flex: 2;\">\n\t\t\t\t\t\t<div v-if=\"showDiscount\" class=\"salescenter-app-collapse-link-pointer-event\">{{localize.SALESCENTER_PRODUCT_DISCOUNT_PRICE_TITLE}}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"salescenter-app-form-col salescenter-app-form-col-sm\" style=\"flex:2\" v-if=\"showDiscount\">\n\t\t\t\t\t\t<div class=\"salescenter-app-collapse-link-hide\"  @click=\"toggleDiscount('N')\">{{localize.SALESCENTER_PRODUCT_DISCOUNT_TITLE}}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"salescenter-app-form-col salescenter-app-form-col-sm\" style=\"flex:2\" v-else>\n\t\t\t\t\t\t<div class=\"salescenter-app-collapse-link-show\"  @click=\"toggleDiscount('Y')\">{{localize.SALESCENTER_PRODUCT_DISCOUNT_TITLE}}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<!--show discount link end-->\n\t\t\t\t\n\t\t\t\t<!--dicount controller-->\n\t\t\t\t<div class=\"salescenter-app-form-row\" style=\"margin-bottom: 7px\" v-if=\"showDiscount\">\n\t\t\t\t\t<div class=\"salescenter-app-form-collapse-container\">\n\t\t\t\t\t\t<div class=\"salescenter-app-form-row\">\t\t\t\t\t\n\t\t\t\t\t\t\t<div class=\"salescenter-app-form-col\" style=\"flex: 8\"></div>\n\t\t\t\t\t\t\t<div class=\"salescenter-app-form-col  salescenter-app-form-col-sm\" style=\"flex:2; overflow: hidden;\">\n\t\t\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-md ui-ctl-w100 salescenter-app-col-currency\">\n\t\t\t\t\t\t\t\t\t<div class=\"ui-ctl-element ui-ctl-textbox salescenter-ui-ctl-element\" v-html=\"basketItem.basePrice\" disabled=\"true\"></div>\n\t\t\t\t\t\t\t\t\t<div class=\"salescenter-app-col-currency-symbol\" v-html=\"currencySymbol\"></div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"salescenter-app-form-col salescenter-app-form-col-sm\" style=\"flex:2; overflow: hidden;\">\n\t\t\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-after-icon ui-ctl-w100 ui-ctl-dropdown salescenter-app-col-currency\">\n\t\t\t\t\t\t\t\t\t<input \ttype=\"text\" class=\"ui-ctl-element ui-ctl-textbox\"\n\t\t\t\t\t\t\t\t\t\t\tref=\"discountInput\" \n\t\t\t\t\t\t\t\t\t\t\t:value=\"basketItem.discount\"\n\t\t\t\t\t\t\t\t\t\t\t@change=\"changeDiscount\"\n\t\t\t\t\t\t\t\t\t\t\t:disabled=\"!editable\">\n\t\t\t\t\t\t\t\t\t<div class=\"salescenter-app-col-currency-symbol salescenter-app-col-currency-symbol-link\" @click=\"showPopupMenu($event.target.firstChild, null, 'discount')\"><span v-html=\"basketItem.discountType === 'percent' ? '%' : currencySymbol\"></span></div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"salescenter-app-form-row\" style=\"margin-bottom: 0;\" v-if=\"editable\">\n\t\t\t\t\t\t\t<div class=\"salescenter-app-form-col\" v-for=\"discount in basketItem.discountInfos\"\">\n\t\t\t\t\t\t\t\t<span class=\"ui-text-4 ui-color-light\"> {{discount.name}}<a :href=\"discount.editPageUrl\" @click=\"openDiscountEditor(event, discount.editPageUrl)\">{{localize.SALESCENTER_PRODUCT_DISCOUNT_EDIT_PAGE_URL_TITLE}}</a></span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<!--dicount controller end-->\n\t\t\t\t\n\t\t\t</div>\n\t\t\t<!--endif isCreationMode-->\n\t\t\t\n\t\t\t<!--else isCreationMode-->\n\t\t\t<div class=\"salescenter-app-form-container\" v-else>\n\t\t\t\t<div class=\"salescenter-app-form-row\">\n\t\t\t\t\t<!--col 1-->\n\t\t\t\t\t<div class=\"salescenter-app-form-col salescenter-app-form-col-prod\" style=\"flex:8\">\n\t\t\t\t\t\t<div class=\"salescenter-app-form-col-input\">\n\t\t\t\t\t\t\t<label class=\"salescenter-app-ctl-label-text ui-ctl-label-text\">{{localize.SALESCENTER_PRODUCT_TITLE}}</label>\n\t\t\t\t\t\t\t<div :class=\"productInputWrapperClass\">\n\t\t\t\t\t\t\t\t<button class=\"ui-ctl-after ui-ctl-icon-clear\" @click=\"hideCreationForm\"> </button>\n\t\t\t\t\t\t\t\t<input type=\"text\" class=\"ui-ctl-element ui-ctl-textbox\" @change=\"changeName\" :value=\"basketItem.name\">\n\t\t\t\t\t\t\t\t<div class=\"ui-ctl-tag\">{{localize.SALESCENTER_PRODUCT_NEW_LABEL}}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"salescenter-app-form-col-img\">\n\t\t\t\t\t\t\t<!-- new product -->\n\t\t\t\t\t\t\t<div v-html=\"basketItem.fileControlHtml\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<!--col 1 end-->\n\t\t\t\t\t\n\t\t\t\t\t<!--col 2-->\n\t\t\t\t\t<div class=\"salescenter-app-form-col salescenter-app-form-col-sm\" style=\"flex:2\">\n\t\t\t\t\t\t<label class=\"salescenter-app-ctl-label-text salescenter-app-ctl-label-text-link ui-ctl-label-text\">\n\t\t\t\t\t\t\t{{localize.SALESCENTER_PRODUCT_QUANTITY.replace('#MEASURE_NAME#', ' ')}}\n\t\t\t\t\t\t\t<span @click=\"showPopupMenu($event.target, measures, 'measures')\">{{ getMeasureName }}</span>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-md ui-ctl-w100\">\n\t\t\t\t\t\t\t<input \ttype=\"text\" \n\t\t\t\t\t\t\t\t\tclass=\"ui-ctl-element ui-ctl-textbox\" \n\t\t\t\t\t\t\t\t\t:value=\"basketItem.quantity\" \n\t\t\t\t\t\t\t\t\t@input=\"changeQuantity\" \n\t\t\t\t\t\t\t\t\t@change=\"refreshBasket\">\n\t\t\t\t\t\t\t<div class=\"salescenter-app-input-counter\" v-if=\"editable\">\n\t\t\t\t\t\t\t\t<div class=\"salescenter-app-input-counter-up\" @click=\"incrementQuantity\"></div>\n\t\t\t\t\t\t\t\t<div class=\"salescenter-app-input-counter-down\" @click=\"decrementQuantity\"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<!--col 2 end-->\n\t\t\t\t\t\n\t\t\t\t\t<!--col 3-->\n\t\t\t\t\t<div class=\"salescenter-app-form-col salescenter-app-form-col-sm\" style=\"flex:2\">\n\t\t\t\t\t\n\t\t\t\t\t\t<label class=\"salescenter-app-ctl-label-text ui-ctl-label-text\">{{localize.SALESCENTER_PRODUCT_PRICE_2}}</label>\n\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-md ui-ctl-w100 salescenter-app-col-currency\" :class=\"hasPriceError ? 'ui-ctl-danger' : ''\">\n\t\t\t\t\t\t\t<input \ttype=\"text\" class=\"ui-ctl-element ui-ctl-textbox\"\n\t\t\t\t\t\t\t\t\t:value=\"basketItem.price\"\n\t\t\t\t\t\t\t\t\t@change=\"changePrice\"\n\t\t\t\t\t\t\t\t\t:disabled=\"!editable\">\n\t\t\t\t\t\t\t<div class=\"salescenter-app-col-currency-symbol\" v-html=\"currencySymbol\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<!--col 3 end-->\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t<!--show discount link-->\n\t\t\t\t<div class=\"salescenter-app-form-row\" v-if=\"editable || (!editable && showPrice)\">\n\t\t\t\t\t<div style=\"flex: 8;\"></div>\n\t\t\t\t\t<div class=\"salescenter-app-form-col salescenter-app-form-col-sm\" style=\"flex: 2;\">\n\t\t\t\t\t\t<div v-if=\"showDiscount\" class=\"salescenter-app-collapse-link-pointer-event\">{{localize.SALESCENTER_PRODUCT_DISCOUNT_PRICE_TITLE}}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"salescenter-app-form-col salescenter-app-form-col-sm\" style=\"flex:2\" v-if=\"showDiscount\">\n\t\t\t\t\t\t<div class=\"salescenter-app-collapse-link-hide\"  @click=\"toggleDiscount('N')\">{{localize.SALESCENTER_PRODUCT_DISCOUNT_TITLE}}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"salescenter-app-form-col salescenter-app-form-col-sm\" style=\"flex:2\" v-else>\n\t\t\t\t\t\t<div class=\"salescenter-app-collapse-link-show\"  @click=\"toggleDiscount('Y')\">{{localize.SALESCENTER_PRODUCT_DISCOUNT_TITLE}}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<!--show discount link end-->\n\t\t\t\t\n\t\t\t\t<!--dicount controller-->\n\t\t\t\t<div class=\"salescenter-app-form-row\" style=\"margin-bottom: 7px\" v-if=\"showDiscount\">\n\t\t\t\t\t<div class=\"salescenter-app-form-collapse-container\">\n\t\t\t\t\t\t<div class=\"salescenter-app-form-row\">\t\t\t\t\t\n\t\t\t\t\t\t\t<div class=\"salescenter-app-form-col\" style=\"flex: 8\"></div>\n\t\t\t\t\t\t\t<div class=\"salescenter-app-form-col  salescenter-app-form-col-sm\" style=\"flex:2; overflow: hidden;\">\n\t\t\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-md ui-ctl-w100 salescenter-app-col-currency\">\n\t\t\t\t\t\t\t\t\t<div class=\"ui-ctl-element ui-ctl-textbox salescenter-ui-ctl-element\" v-html=\"basketItem.basePrice\" disabled=\"true\"></div>\n\t\t\t\t\t\t\t\t\t<div class=\"salescenter-app-col-currency-symbol\" v-html=\"currencySymbol\"></div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"salescenter-app-form-col salescenter-app-form-col-sm\" style=\"flex:2; overflow: hidden;\">\n\t\t\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-after-icon ui-ctl-w100 ui-ctl-dropdown salescenter-app-col-currency\">\n\t\t\t\t\t\t\t\t\t<input \ttype=\"text\" class=\"ui-ctl-element ui-ctl-textbox\"\n\t\t\t\t\t\t\t\t\t\t\tref=\"discountInput\"\n\t\t\t\t\t\t\t\t\t\t\t:value=\"basketItem.discount\"\n\t\t\t\t\t\t\t\t\t\t\t@change=\"changeDiscount\"\n\t\t\t\t\t\t\t\t\t\t\t:disabled=\"!editable\">\n\t\t\t\t\t\t\t\t\t<div class=\"salescenter-app-col-currency-symbol salescenter-app-col-currency-symbol-link\" @click=\"showPopupMenu($event.target.firstChild, null, 'discount')\"><span v-html=\"basketItem.discountType === 'percent' ? '%' : currencySymbol\"></span></div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"salescenter-app-form-row\" style=\"margin-bottom: 0;\" v-if=\"editable\">\n\t\t\t\t\t\t\t<div class=\"salescenter-app-form-col\" v-for=\"discount in basketItem.discountInfos\"\">\n\t\t\t\t\t\t\t\t<span class=\"ui-text-4 ui-color-light\"> {{discount.name}} \n\t\t\t\t\t\t\t\t<a :href=\"discount.editPageUrl\" @click=\"openDiscountEditor(event, discount.editPageUrl)\">{{localize.SALESCENTER_PRODUCT_DISCOUNT_EDIT_PAGE_URL_TITLE}}</a></span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<!--dicount controller end-->\n\t\t\t</div>\n\t\t\t<!--endelse isCreationMode-->\n\t\t</div>\n\t`\n\t});","import {Vuex} from 'ui.vue.vuex';\nimport {Popup} from 'main.popup';\nimport {Loc} from 'main.core';\n\nconst BasketItemAddBlock = {\n\tprops: [],\n\tmethods:\n\t{\n\t\trefreshBasket()\n\t\t{\n\t\t\tthis.$emit('on-refresh-basket');\n\t\t},\n\t\tchangeBasketItem(item)\n\t\t{\n\t\t\tthis.$emit('on-change-basket-item', item);\n\t\t},\n\t\taddBasketItemForm()\n\t\t{\n\t\t\tthis.$emit('on-add-basket-item');\n\t\t},\n\t\tgetInternalIndexByProductId(productId)\n\t\t{\n\t\t\tlet basket = this.$store.getters['orderCreation/getBasket']();\n\t\t\treturn Object\n\t\t\t\t.keys(basket)\n\t\t\t\t.findIndex((inx) =>{\n\t\t\t\t\treturn parseInt(basket[inx].productId) === parseInt(productId)\n\t\t\t\t});\n\t\t},\n\t\tonAddBasketItem(params)\n\t\t{\n\t\t\tthis.$store.commit('orderCreation/addBasketItem');\n\t\t\tlet basketItemIndex = this.countItems-1;\n\t\t\tthis.$store.commit('orderCreation/updateBasketItem', {\n\t\t\t\tindex : basketItemIndex,\n\t\t\t\tfields : params\n\t\t\t});\n\n\t\t\tlet basketItem = this.order.basket[basketItemIndex];\n\n\t\t\tif (basketItem.id === undefined || parseInt(basketItem.id) <= 0)\n\t\t\t\treturn true;\n\n\t\t\tlet fields = {\n\t\t\t\tname: basketItem.name,\n\t\t\t\tproductId: basketItem.id,\n\t\t\t\tsort: basketItemIndex,\n\t\t\t\tmodule: 'catalog',\n\t\t\t\tquantity: basketItem.quantity > 0 ? basketItem.quantity : 1,\n\t\t\t};\n\n\t\t\tBX.ajax.runAction(\n\t\t\t\t\"salescenter.api.order.getFileControl\",\n\t\t\t\t{ data: { productId: basketItem.id } }\n\t\t\t).then((result) => {\n\t\t\t\tlet data = BX.prop.getObject(result, \"data\", {});\n\t\t\t\tif (data.fileControl)\n\t\t\t\t{\n\t\t\t\t\tlet fileControl = BX.processHTML(data.fileControl);\n\t\t\t\t\tfields.fileControlHtml = fileControl['HTML'];\n\t\t\t\t}\n\n\t\t\t\tthis.changeBasketItem({\n\t\t\t\t\tindex:  basketItemIndex,\n\t\t\t\t\tfields: fields\n\t\t\t\t});\n\t\t\t\tthis.refreshBasket();\n\t\t\t});\n\t\t},\n\t\tonUpdateBasketItem(inx, fields)\n\t\t{\n\t\t\tthis.$store.dispatch('orderCreation/changeBasketItem', {\n\t\t\t\tindex : inx,\n\t\t\t\tfields : fields\n\t\t\t});\n\t\t},\n\t\t/*\n\t\t* By default, basket collection contains a fake|empty item,\n\t\t*  that is deleted when you select items from the catalog.\n\t\t* Also, products can be added to the form and become an empty string,\n\t\t*  while stay a item of basket collection\n\t\t* */\n\t\tremoveEmptyItems()\n\t\t{\n\t\t\tlet basket = this.$store.getters['orderCreation/getBasket']();\n\t\t\tbasket.forEach((item, i)=>{\n\t\t\t\tif(\n\t\t\t\t\tbasket[i].name === ''\n\t\t\t\t\t&& basket[i].price < 1e-10\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tthis.$store.dispatch('orderCreation/deleteBasketItem', {\n\t\t\t\t\t\tindex: i\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tmodifyBasketItem(params)\n\t\t{\n\t\t\tlet productId = parseInt(params.id);\n\t\t\tif(productId > 0)\n\t\t\t{\n\t\t\t\tlet inx = this.getInternalIndexByProductId(productId);\n\t\t\t\tif(inx >= 0)\n\t\t\t\t{\n\t\t\t\t\tthis.showDialogProductExists(params);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.removeEmptyItems();\n\t\t\t\t\tthis.onAddBasketItem(params);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tshowDialogProductExists(params)\n\t\t{\n\t\t\tthis.popup = new Popup(null, null, {\n\t\t\t\tevents: {\n\t\t\t\t\tonPopupClose: () => {this.popup.destroy()}\n\t\t\t\t},\n\t\t\t\tzIndex: 4000,\n\t\t\t\tautoHide: true,\n\t\t\t\tcloseByEsc: true,\n\t\t\t\tcloseIcon: true,\n\t\t\t\ttitleBar: Loc.getMessage('SALESCENTER_PRODUCT_BLOCK_PROD_EXIST_DLG_TITLE'),\n\t\t\t\tdraggable: true,\n\t\t\t\tresizable: false,\n\t\t\t\tlightShadow: true,\n\t\t\t\tcacheable: false,\n\t\t\t\toverlay: true,\n\t\t\t\tcontent: Loc.getMessage('SALESCENTER_PRODUCT_BLOCK_PROD_EXIST_DLG_TEXT').replace('#NAME#', params.name),\n\t\t\t\tbuttons: this.getButtons(params),\n\t\t\t});\n\n\t\t\tthis.popup.show();\n\t\t},\n\t\tgetButtons(product)\n\t\t{\n\t\t\tlet buttons = [];\n\t\t\tlet params = product;\n\t\t\tbuttons.push(\n\t\t\t\tnew BX.UI.SaveButton(\n\t\t\t\t\t{\n\t\t\t\t\t\ttext : Loc.getMessage('SALESCENTER_PRODUCT_BLOCK_PROD_EXIST_DLG_OK'),\n\t\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\t\tlet productId = parseInt(params.id);\n\t\t\t\t\t\t\tlet inx = this.getInternalIndexByProductId(productId);\n\t\t\t\t\t\t\tif(inx >= 0)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlet item = this.$store.getters['orderCreation/getBasket']()[inx];\n\t\t\t\t\t\t\t\tlet fields = {\n\t\t\t\t\t\t\t\t\tquantity: parseInt(item.quantity) + 1\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\tthis.onUpdateBasketItem(inx, fields);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthis.popup.destroy();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t\t);\n\n\t\t\tbuttons.push(\n\t\t\t\tnew BX.UI.CancelButton(\n\t\t\t\t\t{\n\t\t\t\t\t\ttext : Loc.getMessage('SALESCENTER_PRODUCT_BLOCK_PROD_EXIST_DLG_NO'),\n\t\t\t\t\t\tonclick: () => {this.popup.destroy()}\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t\t);\n\t\t\treturn buttons;\n\t\t},\n\t\tshowDialogProductSearch()\n\t\t{\n\t\t\tlet funcName = 'addBasketItemFromDialogProductSearch';\n\t\t\twindow[funcName] = params => this.modifyBasketItem(params);\n\n\t\t\tlet popup = new BX.CDialog({\n\t\t\t\tcontent_url: '/bitrix/tools/sale/product_search_dialog.php?'+\n\t\t\t\t\t//todo: 'lang='+this._settings.languageId+\n\t\t\t\t\t//todo: '&LID='+this._settings.siteId+\n\t\t\t\t\t'&caller=order_edit'+\n\t\t\t\t\t'&func_name='+funcName+\n\t\t\t\t\t'&STORE_FROM_ID=0'+\n\t\t\t\t\t'&public_mode=Y',\n\t\t\t\theight: Math.max(500, window.innerHeight-400),\n\t\t\t\twidth: Math.max(800, window.innerWidth-400),\n\t\t\t\tdraggable: true,\n\t\t\t\tresizable: true,\n\t\t\t\tmin_height: 500,\n\t\t\t\tmin_width: 800,\n\t\t\t\tzIndex: 3100\n\t\t\t});\n\n\t\t\tpopup.Show();\n\t\t},\n\t},\n\tcomputed:\n\t{\n\t\tcountItems()\n\t\t{\n\t\t\treturn this.order.basket.length;\n\t\t},\n\t\t...Vuex.mapState({\n\t\t\torder: state => state.orderCreation,\n\t\t})\n\t},\n\ttemplate: `\n\t\t<div class=\"salescenter-app-form-col\" style=\"flex: 1; white-space: nowrap;\">\n\t\t\t<a class=\"salescenter-app-add-item-link\" @click=\"addBasketItemForm\">\n\t\t\t\t<slot name=\"product-add-title\"></slot>\n\t\t\t</a>\n\t\t\t<a class=\"salescenter-app-add-item-link salescenter-app-add-item-link-catalog\" @click=\"showDialogProductSearch\">\n\t\t\t\t<slot name=\"product-add-from-catalog-title\"></slot>\n\t\t\t</a>\n\t\t</div>\n\t`\n};\n\nexport {\n\tBasketItemAddBlock,\n}","import {config} from './config';\n\nimport {Vue} from 'ui.vue';\nimport {Vuex} from 'ui.vue.vuex';\nimport {Manager} from 'salescenter.manager';\nimport \"currency\";\n\nimport \"./bx-salescenter-app-add-payment-product\";\nimport {MixinTemplatesType} from \"./components/templates-type-mixin\";\nimport {BasketItemAddBlock} from \"./components/basket-item-add\";\n\nVue.component(config.templateAddPaymentName,\n{\n\tmixins:[MixinTemplatesType],\n\tcomponents: {\n\t\t'basket-item-add-block': BasketItemAddBlock,\n\t},\n\tdata()\n\t{\n\t\treturn {};\n\t},\n\tmounted()\n\t{\n\t\tif(parseInt(this.$root.$app.options.associatedEntityId)>0)\n\t\t{\n\t\t\tthis.$root.$emit(\"on-change-editable\", false);\n\t\t}\n\t},\n\tcreated()\n\t{\n\t\tthis.currencySymbol = this.$root.$app.options.currencySymbol;\n\n\t\tconst defaultCurrency = this.$root.$app.options.currencyCode || '';\n\n\t\tthis.$store.dispatch('orderCreation/setCurrency', defaultCurrency);\n\n\t\tif (BX.type.isArray(this.$root.$app.options.basket) && this.$root.$app.options.basket.length>0)\n\t\t{\n\t\t\tthis.$root.$app.options.basket.forEach((fields) => {\n\t\t\t\tthis.$store.dispatch('orderCreation/changeBasketItem', {\n\t\t\t\t\tindex : fields.sort,\n\t\t\t\t\tfields : fields\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tif (typeof (this.$root.$app.options.totals) !== \"undefined\")\n\t\t\t{\n\t\t\t\tthis.$store.commit('orderCreation/setTotal', {\n\t\t\t\t\tsum: this.$root.$app.options.totals.sum,\n\t\t\t\t\tdiscount: this.$root.$app.options.totals.discount,\n\t\t\t\t\tresult: this.$root.$app.options.totals.result,\n\t\t\t\t\tresultNumeric: parseFloat(this.$root.$app.options.totals.result),\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.addBasketItemForm();\n\n\t\t\tthis.$store.commit('orderCreation/setTotal', {\n\t\t\t\tsum: 0,\n\t\t\t\tdiscount: 0,\n\t\t\t\tresult: 0,\n\t\t\t});\n\t\t}\n\n\t\tif (this.$root.$app.options.showPaySystemSettingBanner)\n\t\t{\n\t\t\tthis.$store.commit('orderCreation/showBanner');\n\t\t}\n\t},\n\tmethods:\n\t{\n\t\trefreshBasket()\n\t\t{\n\t\t\tthis.$store.dispatch('orderCreation/refreshBasket');\n\t\t},\n\t\tchangeBasketItem(item)\n\t\t{\n\t\t\tthis.$store.dispatch('orderCreation/changeBasketItem', {\n\t\t\t\tindex: item.index,\n\t\t\t\tfields: item.fields\n\t\t\t});\n\t\t},\n\t\tremoveItem(item)\n\t\t{\n\t\t\tthis.$store.dispatch('orderCreation/removeItem', {\n\t\t\t\tindex: item.index\n\t\t\t});\n\t\t\tthis.refreshBasket();\n\t\t},\n\t\taddBasketItemForm()\n\t\t{\n\t\t\tthis.$store.commit('orderCreation/addBasketItem');\n\t\t},\n\t\thideBanner()\n\t\t{\n\t\t\tthis.$store.commit('orderCreation/hideBanner');\n\t\t\tconst userOptionName = this.$root.$app.options.orderCreationOption || false;\n\t\t\tconst userOptionKeyName = this.$root.$app.options.paySystemBannerOptionName || false;\n\t\t\tif (userOptionName && userOptionKeyName)\n\t\t\t{\n\t\t\t\tBX.userOptions.save('salescenter', userOptionName, userOptionKeyName, 'Y');\n\t\t\t}\n\t\t},\n\t\topenControlPanel()\n\t\t{\n\t\t\tManager.openControlPanel();\n\t\t},\n\t},\n\tcomputed:\n\t{\n\t\tlocalize()\n\t\t{\n\t\t\treturn Vue.getFilteredPhrases('SALESCENTER_');\n\t\t},\n\n\t\ttotal()\n\t\t{\n\t\t\treturn this.order.total;\n\t\t},\n\n\t\tcountItems()\n\t\t{\n\t\t\treturn this.order.basket.length;\n\t\t},\n\n\t\tisShowedBanner()\n\t\t{\n\t\t\treturn this.order.showPaySystemSettingBanner;\n\t\t},\n\n\t\t...Vuex.mapState({\n\t\t\torder: state => state.orderCreation,\n\t\t})\n\t},\n\ttemplate: `\n\t<div class=\"salescenter-app-payment-side\">\n\t\t<div class=\"salescenter-app-page-content\">\n\t\t\t<div v-for=\"(item, index) in order.basket\" class=\"salescenter-app-form-wrapper\" :key=\"index\">\n\t\t\t\t<${config.templateAddPaymentProductName} \n\t\t\t\t\t:basketItem=\"item\" \n\t\t\t\t\t:basketItemIndex=\"index\"  \n\t\t\t\t\t:countItems=\"countItems\"\n\t\t\t\t\t:selectedProductIds=\"order.selectedProducts\"\n\t\t\t\t\t@changeBasketItem=\"changeBasketItem\" \n\t\t\t\t\t@removeItem=\"removeItem\" \n\t\t\t\t\t@refreshBasket=\"refreshBasket\" \n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div class=\"salescenter-app-result-container\"  style=\"padding-right: 15px\">\n\t\t\t\t\n\t\t\t\t<div class=\"salescenter-app-result-grid-row salescenter-app-result-grid-total-sm\">\n\t\t\t\t\t<component :is=\"'basket-item-add-block'\" v-if=\"editable\"\n\t\t\t\t\t\tv-on:on-refresh-basket=\"refreshBasket\"\n\t\t\t\t\t\tv-on:on-add-basket-item=\"addBasketItemForm\"\n\t\t\t\t\t\tv-on:on-change-basket-item=\"changeBasketItem\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<template v-slot:product-add-title>{{localize.SALESCENTER_PRODUCT_ADD_PRODUCT}}</template>\n\t\t\t\t\t\t<template v-slot:product-add-from-catalog-title>{{localize.SALESCENTER_PRODUCT_ADD_PRODUCT_FROM_CATALOG}}</template>\n\t\t\t\t\t</component>\n\t\t\t\t\t<div class=\"salescenter-app-form-col\" style=\"flex: 1; display: flex; justify-content: flex-end; padding: 0;\">\n\t\t\t\t\t\t<div class=\"salescenter-app-result-grid-item\">{{localize.SALESCENTER_PRODUCT_TOTAL_SUM}}:</div>\n\t\t\t\t\t\t<div class=\"salescenter-app-result-grid-item salescenter-app-result-grid-item-currency\" :class=\"total.result !== total.sum ? 'salescenter-app-text-line-through' : ''\" v-html=\"total.sum\"></div>\n\t\t\t\t\t\t<div class=\"salescenter-app-result-grid-item-currency-symbol\" v-html=\"currencySymbol\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"salescenter-app-result-grid-row salescenter-app-result-grid-benefit salescenter-app-result-grid-total-sm\">\n\t\t\t\t\t<div class=\"salescenter-app-result-grid-item\">{{localize.SALESCENTER_PRODUCT_TOTAL_DISCOUNT}}:</div>\n\t\t\t\t\t<div class=\"salescenter-app-result-grid-item salescenter-app-result-grid-item-currency\" v-html=\"total.discount\"></div>\n\t\t\t\t\t<div class=\"salescenter-app-result-grid-item-currency-symbol salescenter-app-result-grid-item\" v-html=\"currencySymbol\"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"salescenter-app-result-grid-row salescenter-app-result-grid-total salescenter-app-result-grid-total-big\">\n\t\t\t\t\t<div class=\"salescenter-app-result-grid-item\">{{localize.SALESCENTER_PRODUCT_PRODUCTS_PRICE}}:</div>\n\t\t\t\t\t<div class=\"salescenter-app-result-grid-item salescenter-app-result-grid-item-currency\" v-html=\"total.result\"></div>\n\t\t\t\t\t<div class=\"salescenter-app-result-grid-item-currency-symbol\" v-html=\"currencySymbol\"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"salescenter-app-banner\"  v-if=\"isShowedBanner\">\n\t\t\t\t<div class=\"salescenter-app-banner-inner\">\n\t\t\t\t\t<div class=\"salescenter-app-banner-title\">{{localize.SALESCENTER_BANNER_TITLE}}</div>\n\t\t\t\t\t<div class=\"salescenter-app-banner-content\">\n\t\t\t\t\t\t<div class=\"salescenter-app-banner-text\">{{localize.SALESCENTER_BANNER_TEXT}}</div>\n\t\t\t\t\t\t<div class=\"salescenter-app-banner-btn-block\">\n\t\t\t\t\t\t\t<button class=\"ui-btn ui-btn-sm ui-btn-primary salescenter-app-banner-btn-connect\" @click=\"openControlPanel\">{{localize.SALESCENTER_BANNER_BTN_CONFIGURE}}</button>\n\t\t\t\t\t\t\t<button class=\"ui-btn ui-btn-sm ui-btn-link salescenter-app-banner-btn-hide\" @click=\"hideBanner\">{{localize.SALESCENTER_BANNER_BTN_HIDE}}</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"salescenter-app-banner-close\" @click=\"hideBanner\"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n`,\n});","import {Type} from 'main.core';\n\nclass Base\n{\n\tconstructor(props)\n\t{\n\t\tthis.icon = this.getIcon();\n\t\tthis.type = this.getType();\n\t\tthis.content = Type.isString(props.content) && props.content.length > 0 ? props.content : '';\n\t\tthis.disabled = Type.isBoolean(props.disabled) ? props.disabled : false;\n\t}\n\n\tgetType()\n\t{\n\t\treturn '';\n\t}\n\tgetIcon()\n\t{\n\t\treturn '';\n\t}\n}\n\nexport {\n\tBase\n}","import {Base} from './base'\n\nclass Cash extends Base\n{\n\tstatic type()\n\t{\n\t\treturn 'cash';\n\t}\n\tgetType()\n\t{\n\t\treturn Cash.type();\n\t}\n\tgetIcon()\n\t{\n\t\treturn 'cash';\n\t}\n\n}\n\nexport\n{\n\tCash\n}","import {Type} from 'main.core';\nimport {Base} from './base'\n\nclass Check extends Base\n{\n\tconstructor(props)\n\t{\n\t\tsuper(props);\n\t\tthis.url = Type.isString(props.url) && props.url.length > 0 ? props.url : '';\n\t}\n\tstatic type()\n\t{\n\t\treturn 'check';\n\t}\n\tgetType()\n\t{\n\t\treturn Check.type();\n\t}\n\tgetIcon()\n\t{\n\t\treturn 'check';\n\t}\n}\n\nexport\n{\n\tCheck\n}","import {Type} from 'main.core';\nimport {Base} from './base'\n\nclass CheckSent extends Base\n{\n\tconstructor(props)\n\t{\n\t\tsuper(props);\n\t\tthis.url = Type.isString(props.url) && props.url.length > 0 ? props.url : '';\n\t}\n\tstatic type()\n\t{\n\t\treturn 'check-sent';\n\t}\n\tgetType()\n\t{\n\t\treturn CheckSent.type();\n\t}\n\tgetIcon()\n\t{\n\t\treturn 'check-sent';\n\t}\n}\n\nexport\n{\n\tCheckSent\n}","import {Type} from 'main.core'\nimport {Base} from './base'\n\nclass Payment extends Base\n{\n\tconstructor(props)\n\t{\n\t\tsuper(props);\n\n\t\tthis.sum = typeof(props.sum) != 'undefined' ? props.sum : '0.00';//.toFixed(2)\n\t\tthis.title = Type.isString(props.title) && props.title.length > 0 ? props.title : '';\n\t\tthis.currency = Type.isString(props.currency) && props.currency.length > 0 ? props.currency : '';\n\t}\n\tstatic type()\n\t{\n\t\treturn 'payment';\n\t}\n\tgetType()\n\t{\n\t\treturn Payment.type();\n\t}\n\tgetIcon()\n\t{\n\t\treturn 'cash';\n\t}\n}\n\nexport\n{\n\tPayment\n}","import {Type} from 'main.core';\nimport {Base} from './base'\n\nclass Sent extends Base\n{\n\tconstructor(props)\n\t{\n\t\tsuper(props);\n\t\tthis.url = Type.isString(props.url) && props.url.length > 0 ? props.url : '';\n\t}\n\tstatic type()\n\t{\n\t\treturn 'sent';\n\t}\n\tgetType()\n\t{\n\t\treturn Sent.type();\n\t}\n\tgetIcon()\n\t{\n\t\treturn 'sent';\n\t}\n}\n\nexport\n{\n\tSent\n}","import {Base} from './base'\n\nclass Watch extends Base\n{\n\tstatic type()\n\t{\n\t\treturn 'watch';\n\t}\n\tgetType()\n\t{\n\t\treturn Watch.type();\n\t}\n\tgetIcon()\n\t{\n\t\treturn 'watch';\n\t}\n}\n\nexport\n{\n\tWatch\n}","import {Cash} from './cash'\nimport {Check} from './check'\nimport {CheckSent} from './check-sent'\nimport {Payment} from './payment'\nimport {Sent} from './sent'\nimport {Watch} from './watch'\n\nlet items = [\n\tCash,\n\tCheck,\n\tCheckSent,\n\tPayment,\n\tSent,\n\tWatch\n];\nclass Factory\n{\n\tstatic create(options)\n\t{\n\t\tlet item = items\n\t\t\t.filter(item => options.type === item.type())[0];\n\n\t\tif (!item)\n\t\t{\n\t\t\tthrow new Error(`Unknown field type '${options.type}'`);\n\t\t}\n\n\t\treturn new item(options);\n\t}\n}\n\nexport\n{\n\tFactory\n};","import {Manager} from 'salescenter.manager';\n\nconst SmsConfigureBlock = {\n\tprops:['config'],\n\tdata()\n\t{\n\t\treturn {\n\t\t\turl: this.config.url\n\t\t};\n\t},\n\tmethods:\n\t{\n\t\topenSlider()\n\t\t{\n\t\t\tManager.openSlider(this.url).then(() => this.onConfigure());\n\t\t},\n\n\t\tonConfigure()\n\t\t{\n\t\t\tthis.$emit('on-configure');\n\t\t}\n\n\t},\n\ttemplate: `\n\t\t<div class=\"ui-alert ui-alert-danger ui-alert-xs salescenter-app-payment-by-sms-item-container-alert\">\n\t\t\t<span class=\"ui-alert-message\">\n\t\t\t\t<slot name=\"sms-configure-text-alert\"></slot>\n\t\t\t</span>\n\t\t\t<span class=\"salescenter-app-payment-by-sms-item-container-alert-config\" @click=\"openSlider()\">\n\t\t\t\t<slot name=\"sms-configure-text-setting\"></slot>\n\t\t\t</span>\n\t\t</div>\n\t`\n};\n\nexport {\n\tSmsConfigureBlock\n}","const SmsAlertBlock = {\n\ttemplate: `\n\t\t<div class=\"ui-alert ui-alert-danger ui-alert-icon-danger salescenter-app-payment-by-sms-item-container-alert\">\n\t\t\t<span class=\"ui-alert-message\">\n\t\t\t\t<slot name=\"sms-alert-text\"></slot>\n\t\t\t</span>\t\t\t\n\t\t</div>\n\t`\n};\nexport {\n\tSmsAlertBlock\n}","import {PopupMenuWindow} from 'main.popup';\nimport {Manager} from 'salescenter.manager';\nimport {Type} from 'main.core';\nimport {Vue} from \"ui.vue\";\n\nconst SmsSenderListBlock = {\n\tprops:['list','config'],\n\tcomputed:\n\t\t{\n\t\t\tgetSenderCode()\n\t\t\t{\n\t\t\t\treturn this.config.sender.code;\n\t\t\t},\n\n\t\t\tgetConfigUrl()\n\t\t\t{\n\t\t\t\treturn this.config.url;\n\t\t\t},\n\n\t\t\tlocalize()\n\t\t\t{\n\t\t\t\treturn Vue.getFilteredPhrases('SALESCENTER_SENDER_LIST_CONTENT_');\n\t\t\t},\n\t\t},\n\tmethods:\n\t\t{\n\t\t\topenSlider()\n\t\t\t{\n\t\t\t\tManager.openSlider(this.getConfigUrl).then(() => this.onConfigure());\n\t\t\t},\n\n\t\t\tonConfigure()\n\t\t\t{\n\t\t\t\tthis.$emit('on-configure');\n\t\t\t},\n\n\t\t\tonSelectedSender(value)\n\t\t\t{\n\t\t\t\tthis.$emit('on-selected', value);\n\t\t\t},\n\n\t\t\trender(target, array)\n\t\t\t{\n\t\t\t\tlet menuItems = [];\n\t\t\t\tlet setItem = (ev) => {\n\t\t\t\t\ttarget.innerHTML = ev.target.innerHTML;\n\t\t\t\t\tthis.setCode(ev.currentTarget.getAttribute('data-item-sender-value'));\n\t\t\t\t\tthis.popupMenu.close();\n\t\t\t\t};\n\n\t\t\t\tfor(let index in array)\n\t\t\t\t{\n\t\t\t\t\tif (!array.hasOwnProperty(index))\n\t\t\t\t\t{\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tmenuItems.push({\n\t\t\t\t\t\ttext: array[index].name,\n\t\t\t\t\t\tdataset: {\n\t\t\t\t\t\t\t'itemSenderValue' : array[index].id\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonclick: setItem\n\t\t\t\t\t})\n\t\t\t\t}\n\n\t\t\t\tmenuItems.push({\n\t\t\t\t\ttext: this.localize.SALESCENTER_SENDER_LIST_CONTENT_SETTINGS,\n\t\t\t\t\tonclick: ()=>{\n\t\t\t\t\t\tthis.openSlider();\n\t\t\t\t\t\tthis.popupMenu.close();\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tthis.popupMenu = new PopupMenuWindow({\n\t\t\t\t\tbindElement: target,\n\t\t\t\t\titems: menuItems,\n\t\t\t\t});\n\n\t\t\t\tthis.popupMenu.show();\n\t\t\t},\n\n\t\t\tgetName()\n\t\t\t{\n\t\t\t\tif (Type.isArray(this.list))\n\t\t\t\t{\n\t\t\t\t\tfor (let index in this.list)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (!this.list.hasOwnProperty(index))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (this.list[index].id === this.getSenderCode)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn this.list[index].name;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn null;\n\t\t\t},\n\n\t\t\tsetCode(value)\n\t\t\t{\n\t\t\t\tif(typeof value === 'string')\n\t\t\t\t{\n\t\t\t\t\tthis.onSelectedSender(value);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.onSelectedSender(value.target.value);\n\t\t\t},\n\n\t\t\tisShow()\n\t\t\t{\n\t\t\t\treturn Type.isString(this.getName());\n\t\t\t}\n\t\t},\n\ttemplate: `\n\t\t<div v-if=\"isShow()\" class=\"salescenter-app-payment-by-sms-item-container-sms-content-info\">\n\t\t\t<slot name=\"sms-sender-list-text-send-from\"></slot>\n\t\t\t<span @click=\"render($event.target, list)\">{{getName()}}</span>\n\t\t</div>\n\t`\n};\n\nexport {\n\tSmsSenderListBlock\n}","import {Vuex} from 'ui.vue.vuex';\nimport {Vue} from 'ui.vue';\nimport {Loc} from 'main.core';\nimport DeliverySelector from 'salescenter.deliveryselector';\n\nexport default {\n\tprops: {\n\t\tconfig: {type: Object, required: true}\n\t},\n\tcomponents: {\n\t\t'delivery-selector': DeliverySelector,\n\t},\n\tmethods: {\n\t\tonChange(payload)\n\t\t{\n\t\t\tthis.$store.dispatch('orderCreation/setDelivery', payload.deliveryPrice);\n\n\t\t\tthis.$store.dispatch(\n\t\t\t\t'orderCreation/setDeliveryId',\n\t\t\t\tpayload.deliveryServiceId\n\t\t\t);\n\t\t\tthis.$store.dispatch(\n\t\t\t\t'orderCreation/setPropertyValues',\n\t\t\t\tpayload.relatedPropsValues\n\t\t\t);\n\t\t\tthis.$store.dispatch(\n\t\t\t\t'orderCreation/setDeliveryExtraServicesValues',\n\t\t\t\tpayload.relatedServicesValues\n\t\t\t);\n\t\t\tthis.$store.dispatch(\n\t\t\t\t'orderCreation/setExpectedDelivery',\n\t\t\t\tpayload.estimatedDeliveryPrice\n\t\t\t);\n\t\t\tthis.$store.dispatch(\n\t\t\t\t'orderCreation/setDeliveryResponsibleId',\n\t\t\t\tpayload.responsibleUser ? payload.responsibleUser.id : null\n\t\t\t);\n\n\t\t},\n\t\tonSettingsChanged()\n\t\t{\n\t\t\tthis.$emit('delivery-settings-changed');\n\t\t}\n\t},\n\tcreated()\n\t{\n\t\tthis.$store.dispatch('orderCreation/setPersonTypeId', this.config.personTypeId);\n\t},\n\tcomputed: {\n\t\tlocalize()\n\t\t{\n\t\t\treturn Vue.getFilteredPhrases('SALESCENTER_');\n\t\t},\n\t\tsumTitle()\n\t\t{\n\t\t\treturn Loc.getMessage('SALESCENTER_PRODUCT_PRODUCTS_PRICE');\n\t\t},\n\t\tproductsPriceFormatted()\n\t\t{\n\t\t\treturn this.order.total.result;\n\t\t},\n\t\tproductsPrice()\n\t\t{\n\t\t\treturn this.order.total.resultNumeric;\n\t\t},\n\t\tdelivery()\n\t\t{\n\t\t\treturn this.order.delivery;\n\t\t},\n\t\tdeliveryFormatted()\n\t\t{\n\t\t\tif (this.isDeliveryCalculated)\n\t\t\t{\n\t\t\t\treturn BX.Currency.currencyFormat(this.delivery, this.config.currency, false);\n\t\t\t}\n\n\t\t},\n\t\ttotal()\n\t\t{\n\t\t\tif (this.productsPrice === null || this.delivery === null)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn this.productsPrice + this.delivery;\n\t\t},\n\t\ttotalFormatted()\n\t\t{\n\t\t\treturn BX.Currency.currencyFormat(this.total, this.config.currency, false);\n\t\t},\n\t\tisDeliveryCalculated()\n\t\t{\n\t\t\treturn (this.order.delivery !== null);\n\t\t},\n\n\t\tactionData()\n\t\t{\n\t\t\treturn {\n\t\t\t\tbasketItems: this.config.basket,\n\t\t\t\toptions: {\n\t\t\t\t\tsessionId: this.config.sessionId,\n\t\t\t\t\townerTypeId: this.config.ownerTypeId,\n\t\t\t\t\townerId: this.config.ownerId,\n\t\t\t\t},\n\t\t\t};\n\t\t},\n\t\t...Vuex.mapState({\n\t\t\torder: state => state.orderCreation,\n\t\t}),\n\t},\n\ttemplate: `\n\t\t<delivery-selector\n\t\t\t:editable=\"this.config.editable\"\n\t\t\t:init-is-calculated=\"config.isExistingItem\"\t\t\n\t\t\t:init-estimated-delivery-price=\"config.expectedDeliveryPrice\"\t\t\n\t\t\t:init-entered-delivery-price=\"config.deliveryPrice\"\n\t\t\t:init-delivery-service-id=\"config.deliveryServiceId\"\n\t\t\t:init-related-services-values=\"config.relatedServicesValues\"\n\t\t\t:init-related-props-values=\"config.relatedPropsValues\"\n\t\t\t:init-responsible-id=\"config.responsibleId\"\n\t\t\t:person-type-id=\"config.personTypeId\"\n\t\t\t:action=\"'salescenter.api.order.refreshDelivery'\"\n\t\t\t:action-data=\"actionData\"\n\t\t\t:external-sum=\"productsPrice\"\n\t\t\t:external-sum-label=\"sumTitle\"\n\t\t\t:currency=\"config.currency\"\n\t\t\t:currency-symbol=\"config.currencySymbol\"\n\t\t\t@change=\"onChange\"\n\t\t\t@settings-changed=\"onSettingsChanged\"\n\t\t></delivery-selector>\n\t`\n};\n","import {config} from './config';\nimport {Vue} from 'ui.vue';\nimport {Vuex} from 'ui.vue.vuex';\nimport {Manager} from 'salescenter.manager';\nimport {Dom, Loc, Tag, ajax as Ajax} from 'main.core';\nimport {Popup} from 'main.popup';\nimport {PopupMenuWindow, PopupWindow, PopupWindowButton} from 'main.popup';\nimport 'marketplace';\nimport 'applayout';\n\nimport \"./bx-salescenter-app-add-payment-product\";\nimport {SmsConfigureBlock} from \"./components/sms-configure\";\nimport {SmsAlertBlock} from \"./components/sms-alert\";\nimport {SmsSenderListBlock} from \"./components/sms-sender-list\";\nimport DeliverySelector from \"./components/delivery-selector\";\nimport {MixinTemplatesType} from \"./components/templates-type-mixin\";\n\nlet classModule = 'salescenter-app-payment-by-sms-item';\n\nVue.component(config.templateAddPaymentBySmsItem,\n{\n\tdata()\n\t{\n\t\treturn {\n\t\t\ttype: null,\n\t\t\ttitle: null,\n\t\t\tstage: null,\n\t\t\titemData: null,\n\t\t\tset: null,\n\t\t\tinfoHover: false,\n\t\t\tsmsEditMessageMode: false,\n\t\t\tsmsSenders: null,\n\t\t\tlayout: {\n\t\t\t\tpaymentInfo: null\n\t\t\t},\n\t\t}\n\t},\n\n\t\tprops: ['data', 'index'],\n\t\tmixins:[MixinTemplatesType],\n\t\tcomponents: {\n\t\t\t'sms-configure-block': SmsConfigureBlock,\n\t\t\t'sms-alert-block': SmsAlertBlock,\n\t\t\t'sms-sender-list-block': SmsSenderListBlock,\n\t\t\t'delivery-selector': DeliverySelector,\n\t\t},\n\n\tmounted()\n\t{\n\t\tthis.layout.paymentInfo = this.paymentInfo;\n\t\tthis.loadData();\n\t},\n\n\tcomputed:\n\t{\n\t\tgetSmsSenderConfig()\n\t\t{\n\t\t\treturn {\n\t\t\t\turl: this.$root.$app.urlSettingsSmsSenders,\n\t\t\t\tphone: this.$root.$app.options.contactPhone,\n\t\t\t\tsender: {\n\t\t\t\t\tcode: this.$root.$app.sendingMethodDesc.provider\n\t\t\t\t},\n\t\t\t};\n\t\t},\n\t\tdeliverySelectorConfig()\n\t\t{\n\t\t\tlet deliveryServiceId = null;\n\t\t\tif (this.$root.$app.options.hasOwnProperty('shipmentData')\n\t\t\t\t&& this.$root.$app.options.shipmentData.hasOwnProperty('deliveryServiceId')\n\t\t\t)\n\t\t\t{\n\t\t\t\tdeliveryServiceId = this.$root.$app.options.shipmentData.deliveryServiceId;\n\t\t\t}\n\n\t\t\tlet responsibleId = null;\n\t\t\tif (this.$root.$app.options.hasOwnProperty('shipmentData')\n\t\t\t\t&& this.$root.$app.options.shipmentData.hasOwnProperty('responsibleId')\n\t\t\t)\n\t\t\t{\n\t\t\t\tresponsibleId = this.$root.$app.options.shipmentData.responsibleId;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresponsibleId = this.$root.$app.options.assignedById;\n\t\t\t}\n\n\t\t\tlet deliveryPrice = null;\n\t\t\tif (this.$root.$app.options.hasOwnProperty('shipmentData')\n\t\t\t\t&& this.$root.$app.options.shipmentData.hasOwnProperty('deliveryPrice')\n\t\t\t)\n\t\t\t{\n\t\t\t\tdeliveryPrice = this.$root.$app.options.shipmentData.deliveryPrice;\n\t\t\t}\n\n\t\t\tlet expectedDeliveryPrice = null;\n\t\t\tif (this.$root.$app.options.hasOwnProperty('shipmentData')\n\t\t\t\t&& this.$root.$app.options.shipmentData.hasOwnProperty('deliveryPrice')\n\t\t\t)\n\t\t\t{\n\t\t\t\texpectedDeliveryPrice = this.$root.$app.options.shipmentData.expectedDeliveryPrice;\n\t\t\t}\n\n\t\t\tlet relatedPropsValues = {};\n\t\t\tif (this.$root.$app.options.hasOwnProperty('orderPropertyValues')\n\t\t\t\t&& !Array.isArray(this.$root.$app.options.orderPropertyValues)\n\t\t\t)\n\t\t\t{\n\t\t\t\trelatedPropsValues = this.$root.$app.options.orderPropertyValues;\n\t\t\t}\n\n\t\t\tlet relatedServicesValues = {};\n\t\t\tif (this.$root.$app.options.hasOwnProperty('shipmentData')\n\t\t\t\t&& this.$root.$app.options.shipmentData.hasOwnProperty('extraServicesValues')\n\t\t\t\t&& !Array.isArray(this.$root.$app.options.shipmentData.extraServicesValues)\n\t\t\t)\n\t\t\t{\n\t\t\t\trelatedServicesValues = this.$root.$app.options.shipmentData.extraServicesValues;\n\t\t\t}\n\n\t\t\tlet isExistingItem = parseInt(this.$root.$app.options.associatedEntityId) > 0;\n\n\t\t\treturn {\n\t\t\t\tisExistingItem,\n\t\t\t\tpersonTypeId: this.$root.$app.options.personTypeId,\n\t\t\t\tbasket: this.order.basket,\n\t\t\t\tcurrencySymbol: this.$root.$app.options.currencySymbol,\n\t\t\t\tcurrency: this.order.currency,\n\t\t\t\townerTypeId: this.$root.$app.options.ownerTypeId,\n\t\t\t\townerId: this.$root.$app.options.ownerId,\n\t\t\t\tsessionId: this.$root.$app.options.sessionId,\n\t\t\t\trelatedPropsValues,\n\t\t\t\trelatedServicesValues,\n\t\t\t\tdeliveryServiceId,\n\t\t\t\tresponsibleId,\n\t\t\t\tdeliveryPrice,\n\t\t\t\texpectedDeliveryPrice,\n\t\t\t\teditable: this.editable,\n\t\t\t};\n\t\t},\n\t\tcountItems()\n\t\t{\n\t\t\treturn this.order.basket.length;\n\t\t},\n\n\t\tlisteners()\n\t\t{\n\t\t\treturn {\n\t\t\t\tblur: this.adjustUpdateMessage,\n\t\t\t\tkeydown: this.pressKey\n\t\t\t};\n\t\t},\n\n\t\t...Vuex.mapState({\n\t\t\torder: state => state.orderCreation\n\t\t})\n\t},\n\n\tmethods:\n\t{\n\t\tpressKey(event)\n\t\t{\n\t\t\tif(event.code === \"Enter\")\n\t\t\t{\n\t\t\t\tthis.adjustUpdateMessage();\n\t\t\t\tthis.smsEditMessageMode = false;\n\t\t\t}\n\t\t},\n\n\t\tisHasLink()\n\t\t{\n\t\t\treturn this.$root.$app.sendingMethodDesc.text.match(/#LINK#/)\n\t\t},\n\n\t\tgetSmsMessage()\n\t\t{\n\t\t\tlet link = `<span class=\"${classModule}-container-sms-content-message-link\">${this.$root.$app.orderPublicUrl}</span><sapn class=\"${classModule}-container-sms-content-message-link-ref\">xxxxx</sapn>` + ` `;\n\n\t\t\treturn this.$root.$app.sendingMethodDesc.text.replace(/#LINK#/g, link);\n\t\t},\n\n\t\tupdateMessage()\n\t\t{\n\t\t\tthis.$root.$app.sendingMethodDesc.text = this.$refs.smsMessageNode.innerText;\n\t\t},\n\n\t\tsaveSmsTemplate(smsText)\n\t\t{\n\t\t\tBX.ajax.runComponentAction(\n\t\t\t\t\"bitrix:salescenter.app\",\n\t\t\t\t\"saveSmsTemplate\",\n\t\t\t\t{\n\t\t\t\t\tmode: \"class\",\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tsmsTemplate: smsText,\n\t\t\t\t\t},\n\t\t\t\t\tanalyticsLabel: 'salescenterSmsTemplateChange'\n\t\t\t\t}\n\t\t\t);\n\t\t},\n\n\t\tadjustUpdateMessage(event)\n\t\t{\n\t\t\tthis.updateMessage();\n\n\t\t\tif(!this.isHasLink())\n\t\t\t{\n\t\t\t\tthis.showPopupHint(this.$refs.smsMessageNode, Loc.getMessage('SALESCENTER_SEND_ORDER_BY_SMS_SENDER_TEMPLATE_ERROR'), 2000);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.saveSmsTemplate(this.$root.$app.sendingMethodDesc.text);\n\t\t\t}\n\n\t\t\tif(event && event.type === 'blur')\n\t\t\t{\n\t\t\t\tthis.smsEditMessageMode = false;\n\t\t\t}\n\t\t},\n\n\t\tloadData()\n\t\t{\n\t\t\tthis.type = this.data.type;\n\t\t\tthis.title = this.data.title;\n\t\t\tthis.stage = this.data.stage;\n\t\t\tthis.set = this.data.set;\n\t\t\tthis.itemData = this.data.itemData || null;\n\n\t\t\tif (this.isTemplateBeSendSms())\n\t\t\t{\n\t\t\t\tthis.smsSenders = this.data.itemData.smsSenders;\n\t\t\t\tif (this.smsSenders)\n\t\t\t\t{\n\t\t\t\t\tthis.setProviderDefault();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tsetProviderDefault()\n\t\t{\n\t\t\tthis.$root.$app.sendingMethodDesc.provider = this.smsSenders.length !== 0 ? this.smsSenders[0].id : null;\n\t\t},\n\n\t\tisTemplateBeSendSms()\n\t\t{\n\t\t\treturn this.type === 'BEE_SEND_SMS';\n\t\t},\n\n\t\tisTemplateSelectProduct()\n\t\t{\n\t\t\treturn this.type === 'SELECT_PRODUCTS';\n\t\t},\n\n\t\tisTemplatePaySystem()\n\t\t{\n\t\t\treturn this.type === 'PAY_SYSTEM';\n\t\t},\n\n\t\tisTemplateCashBox()\n\t\t{\n\t\t\treturn this.type === 'CASHBOX';\n\t\t},\n\n\t\tisTemplateAutomationBox()\n\t\t{\n\t\t\treturn this.type === 'AUTOMATION';\n\t\t},\n\n\t\tisTemplateDeliveryBox()\n\t\t{\n\t\t\treturn this.type === 'DELIVERY';\n\t\t},\n\n\t\tisItemsSet()\n\t\t{\n\t\t\treturn this.set;\n\t\t},\n\n\t\trefreshBasket()\n\t\t{\n\t\t\tthis.$store.dispatch('orderCreation/refreshBasket');\n\t\t},\n\n\t\tchangeBasketItem(item)\n\t\t{\n\t\t\tthis.$store.dispatch('orderCreation/changeBasketItem', {\n\t\t\t\tindex: item.index,\n\t\t\t\tfields: item.fields\n\t\t\t});\n\t\t},\n\n\t\tremoveItem(item)\n\t\t{\n\t\t\tthis.$store.dispatch('orderCreation/removeItem', {\n\t\t\t\tindex: item.index\n\t\t\t});\n\t\t\tthis.refreshBasket();\n\t\t},\n\n\t\tshowItem(item, sliderOptions = {})\n\t\t{\n\t\t\tif (item.hasOwnProperty('width'))\n\t\t\t{\n\t\t\t\tsliderOptions.width = Number(item.width);\n\t\t\t}\n\n\t\t\tif (item.hasOwnProperty('type') && item.type === 'marketplace')\n\t\t\t{\n\t\t\t\tthis.showRestApplication(item, sliderOptions);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tsliderOptions['width'] = 835;\n\t\t\t\tManager.openSlider(item.link, sliderOptions).then(() => this.getAjaxData());\n\t\t\t}\n\t\t},\n\n\t\tshowRestApplication(item, sliderOptions = {})\n\t\t{\n\t\t\tif (item.hasOwnProperty('installedApp') && item.installedApp)\n\t\t\t{\n\t\t\t\tthis.openRestAppLayout(item.id, item.code);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.openMarketPlacePage(item.code, sliderOptions);\n\t\t\t}\n\t\t},\n\n\t\topenMarketPlacePage(code, sliderOptions = {})\n\t\t{\n\t\t\tlet applicationUrlTemplate = \"/marketplace/detail/#app#/\";\n\t\t\tlet url = applicationUrlTemplate.replace(\"#app#\", encodeURIComponent(code));\n\t\t\tManager.openSlider(url, sliderOptions).then(() => this.getAjaxData());\n\t\t},\n\n\t\topenRestAppLayout(applicationId, appCode)\n\t\t{\n\t\t\tBX.ajax.runComponentAction(\n\t\t\t\t\"bitrix:salescenter.app\",\n\t\t\t\t\"getRestApp\",\n\t\t\t\t{\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tcode: appCode\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t).then(function(response)\n\t\t\t{\n\t\t\t\tlet app = response.data;\n\t\t\t\tif(app.TYPE === \"A\")\n\t\t\t\t{\n\t\t\t\t\tthis.showRestApplication(appCode);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tBX.rest.AppLayout.openApplication(applicationId);\n\t\t\t\t}\n\t\t\t}.bind(this)).catch(function(response)\n\t\t\t{\n\t\t\t\tthis.restAppErrorPopup(\" \", response.errors.pop().message);\n\t\t\t}.bind(this));\n\t\t},\n\n\t\trestAppErrorPopup(title, text)\n\t\t{\n\t\t\tlet popup = new PopupWindow('rest-app-error-alert', null, {\n\t\t\t\tcloseIcon: true,\n\t\t\t\tcloseByEsc: true,\n\t\t\t\tautoHide: false,\n\t\t\t\ttitleBar: title,\n\t\t\t\tcontent: text,\n\t\t\t\tzIndex: 16000,\n\t\t\t\toverlay: {\n\t\t\t\t\tcolor: 'gray',\n\t\t\t\t\topacity: 30\n\t\t\t\t},\n\t\t\t\tbuttons: [\n\t\t\t\t\tnew PopupWindowButton({\n\t\t\t\t\t\t'id': 'close',\n\t\t\t\t\t\t'text': Loc.getMessage('SALESCENTER_JS_POPUP_CLOSE'),\n\t\t\t\t\t\t'events': {\n\t\t\t\t\t\t\t'click': function(){\n\t\t\t\t\t\t\t\tpopup.close();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t],\n\t\t\t\tevents: {\n\t\t\t\t\tonPopupClose: function() {\n\t\t\t\t\t\tthis.destroy();\n\t\t\t\t\t},\n\t\t\t\t\tonPopupDestroy: function() {\n\t\t\t\t\t\tpopup = null;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tpopup.show();\n\t\t},\n\n\t\tisAddItemClass(item)\n\t\t{\n\t\t\tif (!item.hasOwnProperty('type'))\n\t\t\t{\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\treturn !['paysystem', 'marketplace', 'delivery'].includes(item.type);\n\t\t},\n\n\t\tgetAjaxData()\n\t\t{\n\t\t\tBX.ajax.runComponentAction(\n\t\t\t\t\"bitrix:salescenter.app\",\n\t\t\t\t\"getAjaxData\",\n\t\t\t\t{\n\t\t\t\t\tmode: \"class\",\n\t\t\t\t\tdata: {\n\t\t\t\t\t\ttype: this.type,\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t).then(function(response) {\n\t\t\t\tif (response.data)\n\t\t\t\t{\n\t\t\t\t\tthis.updateTemplate(response.data);\n\t\t\t\t}\n\t\t\t}.bind(this));\n\t\t},\n\n\t\tupdateTemplate(data)\n\t\t{\n\t\t\tthis.data.itemData = data;\n\t\t\tthis.data.type = this.type;\n\n\t\t\tif (typeof this.data.itemData.isSet !== \"undefined\")\n\t\t\t{\n\t\t\t\tthis.data.set = this.data.itemData.isSet;\n\t\t\t\tthis.data.stage = this.data.itemData.isSet ? 'complete' : 'disabled';\n\t\t\t}\n\n\t\t\tif (this.isTemplatePaySystem())\n\t\t\t{\n\t\t\t\tthis.data.title = this.data.itemData.isSet\n\t\t\t\t\t? Loc.getMessage('SALESCENTER_PAYSYSTEM_SET_BLOCK_TITLE')\n\t\t\t\t\t: Loc.getMessage('SALESCENTER_PAYSYSTEM_BLOCK_TITLE');\n\t\t\t}\n\t\t\telse if (this.isTemplateCashBox())\n\t\t\t{\n\t\t\t\tthis.data.title = this.data.itemData.isSet\n\t\t\t\t\t? Loc.getMessage('SALESCENTER_CASHBOX_SET_BLOCK_TITLE')\n\t\t\t\t\t: Loc.getMessage('SALESCENTER_CASHBOX_BLOCK_TITLE');\n\t\t\t}\n\n\t\t\tthis.loadData();\n\t\t},\n\n\t\tshowPaySystemSettingsHint()\n\t\t{\n\t\t\treturn !this.isItemsSet()\n\t\t\t\t&& this.isTemplatePaySystem();\n\t\t},\n\n\t\tshowCashBoxSettingsHint()\n\t\t{\n\t\t\treturn !this.isItemsSet()\n\t\t\t\t&& this.isTemplateCashBox();\n\t\t},\n\n\t\tshowPopupHint(target, message, timer)\n\t\t{\n\t\t\tif(this.popup)\n\t\t\t{\n\t\t\t\tthis.popup.destroy();\n\t\t\t\tthis.popup = null;\n\t\t\t}\n\n\t\t\tif(!target && !message)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.popup = new Popup(null, target, {\n\t\t\t\tevents: {\n\t\t\t\t\tonPopupClose: () => {\n\t\t\t\t\t\tthis.popup.destroy();\n\t\t\t\t\t\tthis.popup = null;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tdarkMode: true,\n\t\t\t\tcontent: message,\n\t\t\t\toffsetLeft: target.offsetWidth,\n\t\t\t});\n\n\t\t\tif(timer)\n\t\t\t{\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.popup.destroy();\n\t\t\t\t\tthis.popup = null;\n\t\t\t\t}, timer);\n\t\t\t}\n\n\t\t\tthis.popup.show();\n\t\t},\n\n\t\tshowSmsMessagePopupHint(target)\n\t\t{\n\t\t\tthis.showPopupHint(target, Loc.getMessage('SALESCENTER_SMS_MESSAGE_HINT'))\n\t\t},\n\n\t\tshowSelectPopup(target, options, type)\n\t\t{\n\t\t\tif(!target)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.selectPopup = new Popup(null, target, {\n\t\t\t\tcloseByEsc: true,\n\t\t\t\tautoHide: true,\n\t\t\t\twidth: 250,\n\t\t\t\toffsetTop: 5,\n\t\t\t\tevents: {\n\t\t\t\t\tonPopupClose: () => { this.selectPopup.destroy() }\n\t\t\t\t},\n\t\t\t\tcontent: this.getSelectPopupContent(options, type)\n\t\t\t});\n\n\t\t\tthis.selectPopup.show();\n\t\t},\n\n\t\tgetSelectPopupContent(options, type)\n\t\t{\n\t\t\tif (!this.selectPopupContent)\n\t\t\t{\n\t\t\t\tthis.selectPopupContent = Tag.render`<div class=\"salescenter-app-payment-by-sms-select-popup\"></div>`;\n\n\t\t\t\tconst onClickOptionHandler = (event) => {\n\t\t\t\t\tthis.onChooseSelectOption(event, type);\n\t\t\t\t};\n\n\t\t\t\tfor (let i = 0; i < options.length; i++)\n\t\t\t\t{\n\t\t\t\t\tconst option = Tag.render`\n\t\t\t\t\t\t<div data-item-value=\"${options[i].id}\" class=\"salescenter-app-payment-by-sms-select-popup-option\" style=\"background-color:${options[i].color ? options[i].color : ''};\" onclick=\"${onClickOptionHandler.bind(this)}\">\n\t\t\t\t\t\t\t${options[i].name}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t`;\n\n\t\t\t\t\tif (options[i].colorText === 'light') {\n\t\t\t\t\t\toption.style.color = '#fff';\n\t\t\t\t\t}\n\n\t\t\t\t\tDom.append(option, this.selectPopupContent);\n\t\t\t\t}\n\t\t\t}\n\n\n\t\t\treturn this.selectPopupContent;\n\t\t},\n\n\t\tonChooseSelectOption(event, type)\n\t\t{\n\t\t\tconst currentOption = document.getElementById(type);\n\t\t\tcurrentOption.textContent = event.currentTarget.textContent;\n\t\t\tcurrentOption.style.color = event.currentTarget.style.color;\n\t\t\tcurrentOption.nextElementSibling.style.borderColor = event.currentTarget.style.color;\n\t\t\tcurrentOption.parentNode.style.background = event.currentTarget.style.backgroundColor;\n\n\t\t\tif (type === 'stageOnOrderPaid')\n\t\t\t{\n\t\t\t\tthis.$root.$app.stageOnOrderPaid = event.currentTarget.getAttribute('data-item-value')\n\t\t\t}\n\t\t\telse if (type === 'delivery')\n\t\t\t{\n\t\t\t\tthis.$root.$app.delivery = event.currentTarget.getAttribute('data-item-value')\n\t\t\t}\n\n\t\t\tthis.selectPopup.destroy();\n\t\t},\n\n\t\thidePopupHint()\n\t\t{\n\t\t\tif(this.popup)\n\t\t\t{\n\t\t\t\tthis.popup.destroy();\n\t\t\t}\n\t\t},\n\n\t\tadjustSmsEditMessageMode()\n\t\t{\n\t\t\tthis.smsEditMessageMode ?\n\t\t\t\tthis.smsEditMessageMode = false :\n\t\t\t\tthis.smsEditMessageMode = true;\n\t\t},\n\n\t\tisSmsEditMessageMode()\n\t\t{\n\t\t\treturn this.smsEditMessageMode;\n\t\t},\n\n\t\tsmsSenderConfigure()\n\t\t{\n\t\t\tAjax.runComponentAction(\"bitrix:salescenter.app\", \"getSmsSenderList\", {\n\t\t\t\t\t\tmode: \"class\"\n\t\t\t})\n\t\t\t\t.then((resolve)=>{\n\t\t\t\t\tif (BX.type.isObject(resolve.data) && Object.values(resolve.data).length > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.smsSenders = [];\n\t\t\t\t\t\tObject.values(resolve.data).forEach(\n\t\t\t\t\t\t\titem => this.smsSenders\n\t\t\t\t\t\t\t\t.push({\n\t\t\t\t\t\t\t\t\tname: item.name,\n\t\t\t\t\t\t\t\t\tid: item.id\n\t\t\t\t\t\t\t\t}));\n\n\t\t\t\t\t\tthis.setProviderDefault();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t},\n\n\t\tsmsSenderSelected(value)\n\t\t{\n\t\t\tthis.$root.$app.sendingMethodDesc.provider = value;\n\t\t},\n\n\t\thasContactPhone()\n\t\t{\n\t\t\treturn !(this.getSmsSenderConfig.phone === '');\n\t\t},\n\t\tshowCompanyContacts(e)\n\t\t{\n\t\t\tthis.$root.$emit(\"on-show-company-contacts\", e);\n\t\t},\n\t},\n\n\ttemplate: `\n\t<div class=\"${classModule}\" \n\t\t:class=\"{ \n\t\t'salescenter-app-payment-by-sms-item-current': stage === 'current', \n\t\t'salescenter-app-payment-by-sms-item-disabled': stage === 'disabled',\n\t\t'salescenter-app-payment-by-sms-item-disabled-bg': !isItemsSet() && (isTemplatePaySystem() || isTemplateCashBox())\n\t\t}\">\n\t\t<div class=\"${classModule}-counter\">\n\t\t\t<div class=\"${classModule}-counter-rounder\"></div>\n\t\t\t<div class=\"${classModule}-counter-line\"></div>\n\t\t\t<div class=\"${classModule}-counter-number\">\n\t\t\t\t<div v-if=\"stage === 'complete'\" class=\"${classModule}-counter-number-checker\"></div>\n\t\t\t\t<div class=\"${classModule}-counter-number-text\">{{ index }}</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"${classModule}-title\">\n\t\t\t<div class=\"${classModule}-title-text\">{{ title }}</div>\n\t\t\t<div v-if=\"showPaySystemSettingsHint()\" v-on:click=\"BX.Salescenter.Manager.openHowToConfigPaySystem(event)\" class=\"${classModule}-title-info\">${Loc.getMessage('SALESCENTER_PAYSYSTEM_BLOCK_SETTINGS_TITLE')}</div>\n\t\t\t<div v-if=\"showCashBoxSettingsHint()\" v-on:click=\"BX.Salescenter.Manager.openHowToConfigCashBox(event)\" class=\"${classModule}-title-info\">${Loc.getMessage('SALESCENTER_CASHBOX_BLOCK_SETTINGS_TITLE')}</div>\n\t\t\t<div v-if=\"isTemplateBeSendSms()\" v-on:click=\"showCompanyContacts(event)\" class=\"${classModule}-title-info\">${Loc.getMessage('SALESCENTER_LEFT_PAYMENT_COMPANY_CONTACTS')}</div>\n\t\t</div>\n\t\t<div class=\"${classModule}-container\" v-bind:class=\"{ 'salescenter-app-payment-by-sms-item-container-offtop': isTemplateBeSendSms() }\">\n\t\t\t<!--BEE_SEND_SMS-->\n\t\t\t<template v-if=\"isTemplateBeSendSms() && smsSenders.length === 0\">\n\t\t\t\t<component :is=\"'sms-configure-block'\"\n\t\t\t\t\t:config=\"getSmsSenderConfig\"\n\t\t\t\t\tv-on:on-configure=\"smsSenderConfigure\"\n\t\t\t\t>\n\t\t\t\t\t<template v-slot:sms-configure-text-alert>${Loc.getMessage('SALESCENTER_SEND_ORDER_BY_SMS_SENDER_NOT_CONFIGURED')}</template>\n\t\t\t\t\t<template v-slot:sms-configure-text-setting>${Loc.getMessage('SALESCENTER_PRODUCT_DISCOUNT_EDIT_PAGE_URL_TITLE')}</template>\n\t\t\t\t</component>\n\t\t\t</template>\n\t\t\t<template v-if=\"isTemplateBeSendSms() && !hasContactPhone() && smsSenders.length !== 0\">\n\t\t\t\t<component :is=\"'sms-alert-block'\">\n\t\t\t\t\t<template v-slot:sms-alert-text>${Loc.getMessage('SALESCENTER_SEND_ORDER_BY_SMS_SENDER_ALERT_PHONE_EMPTY')}</template>\n\t\t\t\t</component>\n\t\t\t</template>\n\t\t\t<div v-if=\"isTemplateBeSendSms()\" class=\"${classModule}-container-sms\">\n\t\t\t\t<div class=\"${classModule}-container-sms-user\">\n\t\t\t\t\t<div class=\"${classModule}-container-sms-user-avatar\" v-bind:style=\"[ itemData.manager.photo ? { 'background-image': 'url(' + itemData.manager.photo + ')'} : null ]\"></div>\n\t\t\t\t\t<div class=\"${classModule}-container-sms-user-name\">{{itemData.manager.name}}</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"${classModule}-container-sms-content\">\n\t\t\t\t\t<div class=\"${classModule}-container-sms-content-message\">\n\t\t\t\t\t\t<div \tv-if=\"smsEditMessageMode\"\n\t\t\t\t\t\t\t\tcontenteditable=\"true\" \n\t\t\t\t\t\t\t\tclass=\"${classModule}-container-sms-content-message-text ${classModule}-container-sms-content-message-text-edit\"\n\t\t\t\t\t\t\t\tv-on=\"listeners\"\n\t\t\t\t\t\t\t\tv-html=\"this.$root.$app.sendingMethodDesc.text\"\n\t\t\t\t\t\t\t\tref=\"smsMessageNode\">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div v-else contenteditable=\"false\" class=\"${classModule}-container-sms-content-message-text\" v-html=\"getSmsMessage()\" v-on:mouseenter=\"showSmsMessagePopupHint($event.target)\" v-on:mouseleave=\"hidePopupHint()\">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"${classModule}-container-sms-content-edit\" v-bind:class=\"{ 'salescenter-app-payment-by-sms-item-container-sms-content-save': isSmsEditMessageMode() }\" @click=\"adjustSmsEditMessageMode\"></div>\n\t\t\t\t\t</div>\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\t<component :is=\"'sms-sender-list-block'\"\n\t\t\t\t\t\t:list=\"smsSenders\"\n\t\t\t\t\t\t:config=\"getSmsSenderConfig\"\n\t\t\t\t\t\tv-on:on-configure=\"smsSenderConfigure\"\n\t\t\t\t\t\tv-on:on-selected=\"smsSenderSelected\" \n\t\t\t\t\t>\n\t\t\t\t\t\t<template v-slot:sms-sender-list-text-send-from>${Loc.getMessage('SALESCENTER_SEND_ORDER_BY_SMS_SENDER')}</template>\n\t\t\t\t\t</component>\n\t\t\t\t\t\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t\n\t\t\t<!--SELECT_PRODUCTS-->\n\t\t\t<div v-if=\"isTemplateSelectProduct()\" class=\"${classModule}-container-payment\">\n\t\t\t\t<${config.templateAddPaymentName}/>\n\t\t\t</div>\n\t\t\t\n\t\t\t<!--PAY_SYSTEM-->\n\t\t\t<div v-if=\"isTemplatePaySystem()\" class=\"${classModule}-container-payment\">\n\t\t\t\t<template v-if=\"isItemsSet()\">\n\t\t\t\t\t<div class=\"${classModule}-container-payment-inline\">\n\t\t\t\t\t\t<div v-for=\"item in itemData.items\" v-on:click=\"showItem(item, {width: 1000})\" class=\"${classModule}-container-payment-item-text\">{{item.name}}</div>\n\t\t\t\t\t\t<br><div v-on:click=\"showItem(itemData.paysystemPanel)\" class=\"${classModule}-container-payment-item-text-add\">{{itemData.paysystemPanel.name}}</div>\n\t\t\t\t\t\t<div v-if=\"itemData.paysystemForm\" v-on:click=\"showItem(itemData.paysystemForm)\" class=\"${classModule}-container-payment-item-text-add\">{{itemData.paysystemForm.name}}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t\t<template v-else>\n\t\t\t\t\t<div v-for=\"item in itemData.items\" v-on:click=\"showItem(item)\" v-bind:class=\"[isAddItemClass(item) ? '${classModule}-container-payment-item-added' : '', '${classModule}-container-payment-item']\">\n\t\t\t\t\t\t<div class=\"${classModule}-container-payment-item-contet\">\n\t\t\t\t\t\t\t<template v-if=\"item.img\">\n\t\t\t\t\t\t\t\t<div class=\"${classModule}-container-payment-item-info\" v-on:mouseenter=\"showPopupHint($event.target, item.info)\" v-on:mouseleave=\"hidePopupHint()\"></div>\n\t\t\t\t\t\t\t\t<img class=\"${classModule}-container-payment-item-img\" :src=\"item.img\">\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t<span v-else class=\"${classModule}-container-payment-item-added-text\">{{ item.name }}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t</div>\n\t\t\t\n\t\t\t<!--CASHBOX-->\n\t\t\t<div v-if=\"isTemplateCashBox()\" class=\"${classModule}-container-payment\">\n\t\t\t\t<template v-if=\"isItemsSet()\">\n\t\t\t\t\t<div class=\"${classModule}-container-payment-inline\">\n\t\t\t\t\t\t<div v-for=\"item in itemData.items\" v-on:click=\"showItem(item, {width: 1000})\" class=\"${classModule}-container-payment-item-text\">{{item.name}}</div>\n\t\t\t\t\t\t<br><div v-on:click=\"showItem(itemData.cashboxPanel)\" class=\"${classModule}-container-payment-item-text-add\">{{itemData.cashboxPanel.name}}</div>\n\t\t\t\t\t\t<div v-if=\"itemData.cashboxForm\" v-on:click=\"showItem(itemData.cashboxForm)\" class=\"${classModule}-container-payment-item-text-add\">{{itemData.cashboxForm.name}}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t\t<template v-else>\n\t\t\t\t\t<div v-for=\"item in itemData.items\" v-on:click=\"showItem(item)\" v-bind:class=\"[item.type !== 'cashbox' ? '${classModule}-container-payment-item-added' : '', '${classModule}-container-payment-item']\">\n\t\t\t\t\t\t<div class=\"${classModule}-container-payment-item-contet\">\n\t\t\t\t\t\t\t <template v-if=\"item.type === 'cashbox'\" >\n\t\t\t\t\t\t\t\t<div class=\"${classModule}-container-payment-item-info\" v-on:mouseenter=\"showPopupHint($event.target, item.info)\" v-on:mouseleave=\"hidePopupHint()\"></div>\n\t\t\t\t\t\t\t\t<img class=\"${classModule}-container-payment-item-img\" :src=\"item.img\">\n\t\t\t\t\t\t\t\t<div v-if=\"item.showTitle\" class=\"${classModule}-container-payment-item-title-text\">{{ item.name }}</div>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t<span v-else class=\"${classModule}-container-payment-item-added-text\">{{ item.name }}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t</div>\n\t\t\t\n\t\t\t<!--AUTOMATION-->\n\t\t\t<div v-if=\"isTemplateAutomationBox()\" class=\"${classModule}-container-payment\">\n\t\t\t\t<div class=\"${classModule}-container-select\">\n\t\t\t\t\t<div class=\"${classModule}-container-select-text\">${Loc.getMessage('SALESCENTER_AUTOMATION_BLOCK_TEXT')}</div>\n\t\t\t\t\t<template v-for=\"item in itemData\">\n\t\t\t\t\t\t<div v-if=\"item.selected\" class=\"${classModule}-container-select-inner\" v-bind:style=\"{background:item.color}\" v-on:click=\"showSelectPopup($event.currentTarget, itemData, 'stageOnOrderPaid')\">\n\t\t\t\t\t\t\t<div  class=\"${classModule}-container-select-item\" id=\"stageOnOrderPaid\">\n\t\t\t\t\t\t\t\t{{item.name}}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<span class=\"${classModule}-container-select-arrow\"></span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</template>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t\n\t\t\t<!--DELIVERY-->\n\t\t\t<div v-if=\"isTemplateDeliveryBox()\" class=\"${classModule}-container-payment\">\n\t\t\t\t<template v-if=\"itemData.isInstalled\">\n\t\t\t\t\t<div class=\"${classModule}-container-select\">\n\t\t\t\t\t\t<delivery-selector @delivery-settings-changed=\"getAjaxData\" :config=\"deliverySelectorConfig\"></delivery-selector>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t\t<template v-else>\n\t\t\t\t\t<div v-for=\"item in itemData.items\" v-on:click=\"showItem(item)\" v-bind:class=\"[isAddItemClass(item) ? '${classModule}-container-payment-item-added' : '', '${classModule}-container-payment-item']\">\n\t\t\t\t\t\t<div class=\"${classModule}-container-payment-item-contet\">\n\t\t\t\t\t\t\t<template v-if=\"item.img\">\n\t\t\t\t\t\t\t\t<div class=\"${classModule}-container-payment-item-info\" v-on:mouseenter=\"showPopupHint($event.target, item.info)\" v-on:mouseleave=\"hidePopupHint()\"></div>\n\t\t\t\t\t\t\t\t<div :style=\"{backgroundImage:'url('+encodeURI(item.img)+')'}\" class=\"${classModule}-container-payment-item-img-del\" :class=\"{ '${classModule}-container-payment-item-img-del-title' : item.showTitle}\"></div>\n\t\t\t\t\t\t\t\t<div v-if=\"item.showTitle\" class=\"${classModule}-container-payment-item-title-text\">{{ item.name }}</div>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t<span v-else class=\"${classModule}-container-payment-item-added-text\">{{ item.name }}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t`\n});","import {Vue} from \"ui.vue\";\n\nconst TimeLineItemContentBlock = {\n\tprops:['item'],\n\tcomputed:\n\t\t{\n\t\t\tlocalize()\n\t\t\t{\n\t\t\t\treturn Vue.getFilteredPhrases('SALESCENTER_TIMELINE_ITEM_CONTENT_');\n\t\t\t},\n\t\t},\n\ttemplate: `\n\t\t<div class=\"salescenter-app-payment-by-sms-timeline-content\">\n\t\t\t<span class=\"salescenter-app-payment-by-sms-timeline-content-text\">\n\t\t\t\t<slot name=\"timeline-content-text\"></slot>\t\t\t\t\n\t\t\t\t<a :href=\"item.url\" v-if=\"item.url\" target=\"_blank\">\n\t\t\t\t\t{{localize.SALESCENTER_TIMELINE_ITEM_CONTENT_VIEW}}\n\t\t\t\t</a>\n\t\t\t</span>\n\t\t</div>\n\t`\n};\n\nexport {\n\tTimeLineItemContentBlock,\n}","import {TimeLineItemContentBlock} from \"./timeline-item-content\";\n\nconst TimeLineItemBlock = {\n\tprops:['item'],\n\tcomponents: {\n\t\t'timeline-item-content-block': TimeLineItemContentBlock,\n\t},\n\ttemplate: `\n\t\t<div class=\"salescenter-app-payment-by-sms-timeline-item\"\n\t\t\t:class=\"{\n\t\t\t\t'salescenter-app-payment-by-sms-timeline-item-disabled' : item.disabled\n\t\t\t}\"\n\t\t>\n\t\t\t<div class=\"salescenter-app-payment-by-sms-item-counter\">\n\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-counter-line\"></div>\n\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-counter-icon \" \n\t\t\t\t\t:class=\"'salescenter-app-payment-by-sms-item-counter-icon-'+item.icon\"></div>\n\t\t\t</div>\n\t\t\t<component :is=\"'timeline-item-content-block'\" \n\t\t\t\t:item=\"item\">\n\t\t\t\t<template v-slot:timeline-content-text>{{item.content}}</template>\n\t\t\t</component>\t\n\t\t</div>\n\t`\n};\n\nexport {\n\tTimeLineItemBlock,\n}","const TimeLineItemPaymentBlock = {\n\tprops:['item'],\n\ttemplate: `\n\t\t<div class=\"salescenter-app-payment-by-sms-timeline-item salescenter-app-payment-by-sms-timeline-item-payment\"\n\t\t\t:class=\"{\n\t\t\t\t'salescenter-app-payment-by-sms-timeline-item-disabled' : item.disabled\n\t\t\t}\"\n\t\t>\n\t\t\t<div class=\"salescenter-app-payment-by-sms-item-counter\">\n\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-counter-line\"></div>\n\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-counter-icon \" \n\t\t\t\t\t:class=\"'salescenter-app-payment-by-sms-item-counter-icon-'+item.icon\"></div>\n\t\t\t</div>\n\t\t\t\n\t\t\t<div class=\"salescenter-app-payment-by-sms-timeline-content\">\n\t\t\t\t<span class=\"salescenter-app-payment-by-sms-timeline-content-price\">\n\t\t\t\t\t<span v-html=\"item.sum\"></span>\n\t\t\t\t\t<span class=\"salescenter-app-payment-by-sms-timeline-content-price-cur\" v-html=\"item.currency\"></span>\n\t\t\t\t</span>\n\t\t\t\t<span class=\"salescenter-app-payment-by-sms-timeline-content-text-strong\">\n\t\t\t\t\t{{item.title}}\n\t\t\t\t</span>\n\t\t\t\t<span class=\"salescenter-app-payment-by-sms-timeline-content-text\">\n\t\t\t\t\t{{item.content}}\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t</div>\n\t`\n};\n\nexport {\n\tTimeLineItemPaymentBlock,\n}","import {Vue} from \"ui.vue\";\nimport {TimeLineItemBlock} from \"./timeline-item\";\nimport {TimeLineItemPaymentBlock} from \"./timeline-item-payment\";\n\nconst TimeLineListBlock = {\n\tprops:['items'],\n\tcomponents: {\n\t\t'timeline-item-block': TimeLineItemBlock,\n\t\t'timeline-item-payment-block': TimeLineItemPaymentBlock,\n\t},\n\tcomputed:\n\t{\n\t\tlocalize()\n\t\t{\n\t\t\treturn Vue.getFilteredPhrases('SALESCENTER_TIMELINE_');\n\t\t},\n\t},\n\tdata()\n\t{\n\t\treturn {};\n\t},\t\n\ttemplate: `\n\t\t<div class=\"salescenter-app-payment-by-sms-timeline\">\n\t\t\t<template v-for=\"(item) in items\" >\n\t\t\t\t<component v-if=\"item.type == 'payment'\" :is=\"'timeline-item-payment-block'\" :item=\"item\"/>\n\t\t\t\t<component v-else :is=\"'timeline-item-block'\" :item=\"item\"/>\n\t\t\t</template>\n\t\t</div>\n\t`\n};\n\nexport {\n\tTimeLineListBlock,\n}","import {config} from './config';\nimport {Vue} from 'ui.vue';\nimport {Loc} from 'main.core';\nimport {Factory} from './timeline/factory';\nimport {Cash}  from './timeline/cash'\nimport {Sent} from \"./timeline/sent\";\nimport {CheckSent} from \"./timeline/check-sent\";\n\nimport './bx-salescenter-app-add-payment-by-sms-item';\nimport {TimeLineListBlock} from \"./components/timeline-list\";\nimport {MixinTemplatesType} from \"./components/templates-type-mixin\";\n\nVue.component(config.templateAddPaymentBySms,\n{\n\t/**\n\t * @emits 'send' {e: object}\n\t */\n\n\tprops: ['isAllowedSubmitButton'],\n\n\tmixins:[MixinTemplatesType],\n\n\tcomponents: {\n\t\t'timeline-list-block': TimeLineListBlock,\n\t},\n\n\tdata()\n\t{\n\t\tlet steps = [\n\t\t\t{\n\t\t\t\tsort: 100,\n\t\t\t\ttype: 'BEE_SEND_SMS',\n\t\t\t\ttitle: this.$root.$app.options.contactBlock.title,\n\t\t\t\tstage: 'complete',\n\t\t\t\titemData: this.$root.$app.options.contactBlock,\n\t\t\t},\n\t\t\t{\n\t\t\t\tsort: 200,\n\t\t\t\ttype: 'SELECT_PRODUCTS',\n\t\t\t\ttitle: Loc.getMessage('SALESCENTER_PRODUCT_BLOCK_TITLE'),\n\t\t\t\tstage: (\n\t\t\t\t\tthis.$root.$app.options.basket\n\t\t\t\t\t&& this.$root.$app.options.basket.length > 0\n\t\t\t\t)\n\t\t\t\t\t? 'complete'\n\t\t\t\t\t: 'current'\n\t\t\t},\n\t\t\t{\n\t\t\t\tsort: 300,\n\t\t\t\ttype: 'PAY_SYSTEM',\n\t\t\t\ttitle: this.$root.$app.options.paySystemList.isSet\n\t\t\t\t\t? Loc.getMessage('SALESCENTER_PAYSYSTEM_SET_BLOCK_TITLE')\n\t\t\t\t\t: Loc.getMessage('SALESCENTER_PAYSYSTEM_BLOCK_TITLE'),\n\t\t\t\tstage: this.$root.$app.options.paySystemList.isSet ? 'complete' :'disabled',\n\t\t\t\tset: this.$root.$app.options.paySystemList.isSet,\n\t\t\t\titemData: this.$root.$app.options.paySystemList,\n\t\t\t}\n\t\t];\n\n\t\tif (this.$root.$app.options.isAutomationAvailable)\n\t\t{\n\t\t\tsteps.push(\n\t\t\t\t{\n\t\t\t\t\tsort: 500,\n\t\t\t\t\ttype: 'AUTOMATION',\n\t\t\t\t\ttitle: Loc.getMessage('SALESCENTER_AUTOMATION_BLOCK_TITLE'),\n\t\t\t\t\tstage: 'complete',\n\t\t\t\t\titemData: this.$root.$app.options.dealStageList\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\tif (this.$root.$app.options.cashboxList.hasOwnProperty('items'))\n\t\t{\n\t\t\tsteps.push(\n\t\t\t\t{\n\t\t\t\t\tsort: 400,\n\t\t\t\t\ttype: 'CASHBOX',\n\t\t\t\t\ttitle: this.$root.$app.options.cashboxList.isSet\n\t\t\t\t\t\t? Loc.getMessage('SALESCENTER_CASHBOX_SET_BLOCK_TITLE')\n\t\t\t\t\t\t: Loc.getMessage('SALESCENTER_CASHBOX_BLOCK_TITLE'),\n\t\t\t\t\tstage: this.$root.$app.options.cashboxList.isSet ? 'complete' :'disabled',\n\t\t\t\t\tset: this.$root.$app.options.cashboxList.isSet,\n\t\t\t\t\titemData: this.$root.$app.options.cashboxList,\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\tif (this.$root.$app.options.deliveryList.hasOwnProperty('items'))\n\t\t{\n\t\t\tsteps.push(\n\t\t\t\t{\n\t\t\t\t\tsort: 600,\n\t\t\t\t\ttype: 'DELIVERY',\n\t\t\t\t\ttitle: Loc.getMessage('SALESCENTER_DELIVERY_BLOCK_TITLE'),\n\t\t\t\t\tstage: this.$root.$app.options.deliveryList.isInstalled ? 'complete' :'disabled',\n\t\t\t\t\tset: this.$root.$app.options.deliveryList.isInstalled,\n\t\t\t\t\titemData: this.$root.$app.options.deliveryList\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\tsteps.sort((a, b) => a.sort - b.sort);\n\n\t\treturn {\n\t\t\ttitle: Loc.getMessage('SALESCENTER_LEFT_CREATE_LINK_AND_SEND'),\n\t\t\tdata: this.$root.$app,\n\t\t\tsteps: steps,\n\t\t\ttimeline:{\n\t\t\t\titems:[{\n\t\t\t\t\tsum: '',\n\t\t\t\t\turl: '',\n\t\t\t\t\ttype: '',\n\t\t\t\t\ttitle: '',\n\t\t\t\t\tcontent: '',\n\t\t\t\t\tcurrency: '',\n\t\t\t\t\tdisabled: '',\n\t\t\t\t}]\n\t\t\t}\n\t\t}\n\t},\n\n\tcomputed:\n\t{\n\t\tconfig: () => config,\n\t\tlocalize()\n\t\t{\n\t\t\treturn Vue.getFilteredPhrases('SALESCENTER_TIMELINE_');\n\t\t},\n\t},\n\n\tcreated()\n\t{\n\t\tthis.timelineItemsInit()\n\t},\n\n\tmethods:\n\t{\n\t\ttimelineItemsInit()\n\t\t{\n\t\t\tif (BX.type.isObject(this.$root.$app.options.timeline) && Object.values(this.$root.$app.options.timeline).length > 0)\n\t\t\t{\n\t\t\t\tthis.timeline.items = [];\n\t\t\t\tObject.values(this.$root.$app.options.timeline).forEach(\n\t\t\t\t\toptions => this.timeline.items.push(Factory.create(options)));\n\t\t\t}\n\t\t},\n\t\tsend(e)\n\t\t{\n\t\t\tthis.$emit('send', e)\n\t\t},\n\t\tinitTileGrid()\n\t\t{\n\t\t\tconsole.log(\"initTileGrid\");\n\t\t}\n\t},\n\n\ttemplate: `\n\t<div class=\"salescenter-app-payment-by-sms\">\n\t\t<div class=\"salescenter-app-payment-by-sms-title\">{{ title }}</div>\n\t\t<component \n\t\t\t:is=\"config.templateAddPaymentBySmsItem\"\n\t\t\tv-for=\"(step, index) in steps\"\n\t\t\t:index=\"index + 1\"\n\t\t\t:data=\"step\"\n\t\t\t:complete=\"step.complete\"\n\t\t\t:current=\"step.current\"></component>\n\t\t\t<div :class=\"{\n\t\t\t\t'salescenter-app-payment-by-sms-item-disabled': !this.isAllowedSubmitButton\n\t\t\t\t}\" class=\"salescenter-app-payment-by-sms-item salescenter-app-payment-by-sms-item-send salescenter-app-payment-by-sms-item\">\n\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-counter\">\n\t\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-counter-rounder\"></div>\n\t\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-counter-line\"></div>\n\t\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-counter-number\"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container\">\n\t\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container-payment\">\n\t\t\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container-payment-inline\">\n\t\t\t\t\t\t\t<div class=\"ui-btn ui-btn-lg ui-btn-success ui-btn-round\" v-on:click=\"send($event)\" v-if=\"editable\">${Loc.getMessage('SALESCENTER_SEND')}</div>\n\t\t\t\t\t\t\t<div class=\"ui-btn ui-btn-lg ui-btn-success ui-btn-round\" v-on:click=\"send($event)\" v-else >${Loc.getMessage('SALESCENTER_RESEND')}</div>\n\t\t\t\t\t\t\t<div v-on:click=\"BX.Salescenter.Manager.openWhatClientSee(event)\" class=\"salescenter-app-add-item-link\">${Loc.getMessage('SALESCENTER_SEND_ORDER_BY_SMS_SENDER_TEMPLATE_WHAT_DOES_CLIENT_SEE')}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t<component :is=\"'timeline-list-block'\" :items=\"timeline.items\"/>\n\t</div>\n\t`\n});\n","import {Vue} from 'ui.vue';\nimport {VuexBuilder} from 'ui.vue.vuex';\nimport {rest as Rest} from 'rest.client';\nimport {Manager} from 'salescenter.manager';\nimport {Loader} from 'main.loader';\nimport {Type, Loc, ajax as Ajax, Event} from 'main.core';\nimport 'ui.notification';\n\nimport {ApplicationModel} from './models/application';\nimport {OrderCreationModel} from './models/ordercreation';\nimport {config} from \"./config\";\nimport './component';\nimport './component.css';\nimport './bx-salescenter-app-add-payment';\nimport './bx-salescenter-app-add-payment-by-sms';\n\nexport class App\n{\n\tconstructor(options = {\n\t\tdialogId: null,\n\t\tsessionId: null,\n\t\tlineId: null,\n\t\torderAddPullTag: null,\n\t\tlandingPublicationPullTag: null,\n\t\tlandingUnPublicationPullTag: null,\n\t\tisFrame: true,\n\t\tisOrderPublicUrlAvailable: false,\n\t\tisCatalogAvailable: false,\n\t\tisOrderPublicUrlExists: false,\n\t})\n\t{\n\t\tthis.slider = BX.SidePanel.Instance.getTopSlider();\n\t\tthis.dialogId = options.dialogId;\n\t\tthis.sessionId = parseInt(options.sessionId);\n\t\tthis.lineId = parseInt(options.lineId);\n\t\tthis.orderAddPullTag = options.orderAddPullTag;\n\t\tthis.landingPublicationPullTag = options.landingPublicationPullTag;\n\t\tthis.landingUnPublicationPullTag = options.landingUnPublicationPullTag;\n\t\tthis.paySystemList = options.paySystemList;\n\t\tthis.cashboxList = options.cashboxList;\n\t\tthis.options = options;\n\t\tthis.isProgress = false;\n\t\tthis.fillPagesTimeout = false;\n\t\tthis.disableSendButton = false;\n\t\tthis.context = '';\n\t\tthis.fillPagesQueue = [];\n\t\tthis.ownerTypeId = '';\n\t\tthis.ownerId = '';\n\t\tthis.stageOnOrderPaid = '';\n\t\tthis.sendingMethod = '';\n\t\tthis.sendingMethodDesc = {};\n\t\tthis.urlSettingsSmsSenders = options.urlSettingsSmsSenders;\n\t\tthis.orderPublicUrl = '';\n\t\tthis.fileControl = options.fileControl;\n\n\t\tif(Type.isString(options.stageOnOrderPaid))\n\t\t{\n\t\t\tthis.stageOnOrderPaid = options.stageOnOrderPaid;\n\t\t}\n\n\t\tif(Type.isBoolean(options.isFrame))\n\t\t{\n\t\t\tthis.isFrame = options.isFrame;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.isFrame = true;\n\t\t}\n\n\t\tif(Type.isBoolean(options.isOrderPublicUrlAvailable))\n\t\t{\n\t\t\tthis.isOrderPublicUrlAvailable = options.isOrderPublicUrlAvailable;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.isOrderPublicUrlAvailable = false;\n\t\t}\n\n\t\tif(Type.isBoolean(options.isOrderPublicUrlExists))\n\t\t{\n\t\t\tthis.isOrderPublicUrlExists = options.isOrderPublicUrlExists;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.isOrderPublicUrlExists = false;\n\t\t}\n\n\t\tif(Type.isString(options.orderPublicUrl))\n\t\t{\n\t\t\tthis.orderPublicUrl = options.orderPublicUrl;\n\t\t}\n\n\t\tif(Type.isBoolean(options.isCatalogAvailable))\n\t\t{\n\t\t\tthis.isCatalogAvailable = options.isCatalogAvailable;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.isCatalogAvailable = false;\n\t\t}\n\n\t\tif(Type.isBoolean(options.disableSendButton))\n\t\t{\n\t\t\tthis.disableSendButton = options.disableSendButton;\n\t\t}\n\n\t\tif(options.ownerTypeId)\n\t\t{\n\t\t\tthis.ownerTypeId = options.ownerTypeId;\n\t\t}\n\n\t\tif(options.ownerId)\n\t\t{\n\t\t\tthis.ownerId = options.ownerId;\n\t\t}\n\n\t\tif(Type.isString(options.context) && options.context.length > 0)\n\t\t{\n\t\t\tthis.context = options.context;\n\t\t}\n\t\telse if(this.sessionId && this.dialogId)\n\t\t{\n\t\t\tthis.context = 'imopenlines_app';\n\t\t}\n\n\t\tif(Type.isBoolean(options.isPaymentsLimitReached))\n\t\t{\n\t\t\tthis.isPaymentsLimitReached = options.isPaymentsLimitReached;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.isPaymentsLimitReached = false;\n\t\t}\n\n\t\tif(!Type.isUndefined(options.sendingMethod))\n\t\t{\n\t\t\tthis.sendingMethod = options.sendingMethod;\n\t\t\tthis.sendingMethodDesc = this.options.sendingMethodDesc;\n\t\t}\n\n\t\tthis.isPaymentCreationAvailable = (\n\t\t\t(this.sessionId > 0 && this.dialogId.length > 0) || (this.ownerTypeId && this.ownerId)\n\t\t);\n\t\tthis.connector = Type.isString(options.connector) ? options.connector : '';\n\n\t\tEvent.ready(() =>\n\t\t{\n\t\t\tthis.pull = BX.PULL;\n\t\t\tthis.initPull();\n\t\t\tthis.isSiteExists = Manager.isSiteExists;\n\t\t});\n\n\t\tApp.initStore()\n\t\t\t.then((result) => this.initTemplate(result))\n\t\t\t.catch((error) => App.showError(error))\n\t\t;\n\t}\n\n\tstatic initStore()\n\t{\n\t\tconst builder = new VuexBuilder();\n\n\t\treturn builder.addModel(ApplicationModel.create())\n\t\t\t.addModel(OrderCreationModel.create())\n\t\t\t.useNamespace(true)\n\t\t\t.build();\n\t}\n\n\tinitPull()\n\t{\n\t\tif(this.pull)\n\t\t{\n\t\t\tif(Type.isString(this.orderAddPullTag))\n\t\t\t{\n\t\t\t\tthis.pull.subscribe({\n\t\t\t\t\tmoduleId: config.moduleId,\n\t\t\t\t\tcommand: this.orderAddPullTag,\n\t\t\t\t\tcallback: (params) =>\n\t\t\t\t\t{\n\t\t\t\t\t\tif(parseInt(params.sessionId) === this.sessionId && params.orderId > 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tManager.showOrdersListAfterCreate(params.orderId);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif(Type.isString(this.landingPublicationPullTag))\n\t\t\t{\n\t\t\t\tthis.pull.subscribe({\n\t\t\t\t\tmoduleId: config.moduleId,\n\t\t\t\t\tcommand: this.landingPublicationPullTag,\n\t\t\t\t\tcallback: (params) =>\n\t\t\t\t\t{\n\t\t\t\t\t\tif(parseInt(params.landingId) > 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.fillPages();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(params.hasOwnProperty('isOrderPublicUrlAvailable') && Type.isBoolean(params.isOrderPublicUrlAvailable))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.isOrderPublicUrlAvailable = params.isOrderPublicUrlAvailable;\n\t\t\t\t\t\t\tthis.isOrderPublicUrlExists = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif(Type.isString(this.landingUnPublicationPullTag))\n\t\t\t{\n\t\t\t\tthis.pull.subscribe({\n\t\t\t\t\tmoduleId: config.moduleId,\n\t\t\t\t\tcommand: this.landingUnPublicationPullTag,\n\t\t\t\t\tcallback: (params) =>\n\t\t\t\t\t{\n\t\t\t\t\t\tif(parseInt(params.landingId) > 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.fillPages();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(params.hasOwnProperty('isOrderPublicUrlAvailable') && Type.isBoolean(params.isOrderPublicUrlAvailable))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.isOrderPublicUrlAvailable = params.isOrderPublicUrlAvailable;\n\t\t\t\t\t\t\tthis.isOrderPublicUrlExists = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\tinitTemplate(result)\n\t{\n\t\treturn new Promise((resolve) =>\n\t\t{\n\t\t\tconst context = this;\n\t\t\tthis.store = result.store;\n\n\t\t\tthis.templateEngine = Vue.create({\n\t\t\t\tel: document.getElementById('salescenter-app-root'),\n\t\t\t\ttemplate: `<${config.templateName}/>`,\n\t\t\t\tstore: this.store,\n\t\t\t\tcreated()\n\t\t\t\t{\n\t\t\t\t\tthis.$app = context;\n\t\t\t\t\tthis.$nodes = {\n\t\t\t\t\t\tfooter: document.getElementById('footer'),\n\t\t\t\t\t\tleftPanel: document.getElementById('left-panel'),\n\t\t\t\t\t\ttitle: document.getElementById('pagetitle'),\n\t\t\t\t\t\tpaymentsLimit: document.getElementById('salescenter-payment-limit-container'),\n\t\t\t\t\t};\n\t\t\t\t},\n\t\t\t\tmounted()\n\t\t\t\t{\n\t\t\t\t\tresolve();\n\t\t\t\t},\n\t\t\t});\n\t\t});\n\t}\n\n\tcloseApplication()\n\t{\n\t\tif(this.slider)\n\t\t{\n\t\t\tthis.slider.close();\n\t\t}\n\t}\n\n\tfillPages()\n\t{\n\t\treturn new Promise((resolve) =>\n\t\t{\n\t\t\tif(this.isProgress)\n\t\t\t{\n\t\t\t\tthis.fillPagesQueue.push(resolve);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif(this.fillPagesTimeout)\n\t\t\t\t{\n\t\t\t\t\tclearTimeout(this.fillPagesTimeout);\n\t\t\t\t}\n\t\t\t\tthis.fillPagesTimeout = setTimeout(() =>\n\t\t\t\t{\n\t\t\t\t\tthis.startProgress();\n\t\t\t\t\tRest.callMethod('salescenter.page.list', {}).then((result) => {\n\t\t\t\t\t\tthis.store.commit('application/setPages', {pages: result.answer.result.pages});\n\t\t\t\t\t\tthis.stopProgress();\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t\tthis.fillPagesQueue.forEach((item) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\titem();\n\t\t\t\t\t\t});\n\t\t\t\t\t\tthis.fillPagesQueue = [];\n\t\t\t\t\t});\n\t\t\t\t}, 100);\n\t\t\t}\n\t\t});\n\t}\n\n\tstatic showError(error)\n\t{\n\t\tconsole.error(error);\n\t}\n\n\tgetLoader()\n\t{\n\t\tif(!this.loader)\n\t\t{\n\t\t\tthis.loader = new Loader({size: 200});\n\t\t}\n\n\t\treturn this.loader;\n\t}\n\n\tshowLoader()\n\t{\n\t\tif(this.templateEngine)\n\t\t{\n\t\t\tthis.getLoader().show(this.templateEngine.$el);\n\t\t}\n\t}\n\n\thideLoader()\n\t{\n\t\tthis.getLoader().hide();\n\t}\n\n\tstartProgress(buttonEvent = null)\n\t{\n\t\tthis.isProgress = true;\n\t\tthis.showLoader();\n\t\tif (Type.isDomNode(buttonEvent))\n\t\t{\n\t\t\tbuttonEvent.classList.add('ui-btn-wait');\n\t\t}\n\t}\n\n\tstopProgress(buttonEvent = null)\n\t{\n\t\tthis.isProgress = false;\n\t\tthis.hideLoader();\n\t\tif (Type.isDomNode(buttonEvent))\n\t\t{\n\t\t\tbuttonEvent.classList.remove('ui-btn-wait');\n\t\t}\n\t}\n\n\thidePage(page)\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tlet promise;\n\t\t\tif(page.landingId > 0)\n\t\t\t{\n\t\t\t\tpromise = Manager.hidePage(page);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tpromise = Manager.deleteUrl(page);\n\t\t\t}\n\t\t\tpromise.then(() =>\n\t\t\t{\n\t\t\t\tthis.store.commit('application/removePage', {page});\n\t\t\t\tresolve();\n\t\t\t}).catch((result) =>\n\t\t\t{\n\t\t\t\tApp.showError(result.answer.error_description);\n\t\t\t\treject(result.answer.error_description);\n\t\t\t});\n\t\t});\n\t}\n\n\tsendPage(pageId)\n\t{\n\t\tif(this.isProgress)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tif(this.disableSendButton)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tconst pages = this.store.getters['application/getPages']();\n\t\tlet page;\n\t\tfor(let index in pages)\n\t\t{\n\t\t\tif(pages.hasOwnProperty(index) && pages[index].id === pageId)\n\t\t\t{\n\t\t\t\tpage = pages[index];\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tlet source = 'other';\n\t\tif(page.landingId > 0)\n\t\t{\n\t\t\tif(parseInt(page.siteId) === parseInt(Manager.connectedSiteId))\n\t\t\t{\n\t\t\t\tsource = 'landing_store_chat';\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tsource = 'landing_other';\n\t\t\t}\n\t\t}\n\t\tif(!this.dialogId)\n\t\t{\n\t\t\tthis.slider.data.set('action', 'sendPage');\n\t\t\tthis.slider.data.set('page', page);\n\t\t\tthis.slider.data.set('pageId', pageId);\n\t\t\tif(this.context === 'sms')\n\t\t\t{\n\t\t\t\tthis.startProgress();\n\t\t\t\tBX.Salescenter.Manager.addAnalyticAction({\n\t\t\t\t\tanalyticsLabel: 'salescenterSendSms',\n\t\t\t\t\tcontext: this.context,\n\t\t\t\t\tsource: source,\n\t\t\t\t\ttype: page.isWebform ? 'form' : 'info',\n\t\t\t\t\tcode: page.code,\n\t\t\t\t}).then(() =>\n\t\t\t\t{\n\t\t\t\t\tthis.stopProgress();\n\t\t\t\t\tthis.closeApplication();\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.closeApplication();\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\tthis.startProgress();\n\n\t\tAjax.runAction('salescenter.page.send', {\n\t\t\tanalyticsLabel: 'salescenterSendChat',\n\t\t\tgetParameters: {\n\t\t\t\tdialogId: this.dialogId,\n\t\t\t\tcontext: this.context,\n\t\t\t\tsource: source,\n\t\t\t\ttype: page.isWebform ? 'form' : 'info',\n\t\t\t\tconnector: this.connector,\n\t\t\t\tcode: page.code,\n\t\t\t},\n\t\t\tdata: {\n\t\t\t\tid: pageId,\n\t\t\t\toptions: {\n\t\t\t\t\tdialogId: this.dialogId,\n\t\t\t\t\tsessionId: this.sessionId,\n\t\t\t\t},\n\t\t\t}\n\t\t}).then(() =>\n\t\t{\n\t\t\tthis.stopProgress();\n\t\t\tthis.closeApplication();\n\t\t}).catch((result) =>\n\t\t{\n\t\t\tApp.showError(result.errors.pop().message);\n\t\t\tthis.stopProgress();\n\t\t});\n\t}\n\n\tsendPayment(buttonEvent, skipPublicMessage = 'n')\n\t{\n\t\tif(!this.isPaymentCreationAvailable)\n\t\t{\n\t\t\tthis.closeApplication();\n\t\t\treturn null;\n\t\t}\n\t\tconst basket = this.store.getters['orderCreation/getBasket']();\n\t\tconst deliveryId = this.store.getters['orderCreation/getDeliveryId'];\n\t\tconst delivery = this.store.getters['orderCreation/getDelivery'];\n\t\tconst total = this.store.getters['orderCreation/getTotal'];\n\t\tconst propertyValues = this.store.getters['orderCreation/getPropertyValues'];\n\t\tconst deliveryExtraServicesValues = this.store.getters['orderCreation/getDeliveryExtraServicesValues'];\n\t\tconst expectedDelivery = this.store.getters['orderCreation/getExpectedDelivery'];\n\t\tconst deliveryResponsibleId = this.store.getters['orderCreation/getDeliveryResponsibleId'];\n\t\tconst personTypeId = this.store.getters['orderCreation/getPersonTypeId'];\n\n\t\tif (!this.store.getters['orderCreation/isAllowedSubmit'] || this.isProgress)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tthis.startProgress(buttonEvent);\n\n\t\tthis.store.dispatch('orderCreation/refreshBasket', {\n\t\t\tonsuccess: () => {\n\t\t\t\tBX.ajax.runAction('salescenter.order.createPayment', {\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tbasketItems: basket,\n\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\tdialogId: this.dialogId,\n\t\t\t\t\t\t\tsendingMethod: this.sendingMethod,\n\t\t\t\t\t\t\tsendingMethodDesc: this.sendingMethodDesc,\n\t\t\t\t\t\t\tsessionId: this.sessionId,\n\t\t\t\t\t\t\tlineId: this.lineId,\n\t\t\t\t\t\t\townerTypeId: this.ownerTypeId,\n\t\t\t\t\t\t\townerId: this.ownerId,\n\t\t\t\t\t\t\tstageOnOrderPaid: this.stageOnOrderPaid,\n\t\t\t\t\t\t\tskipPublicMessage,\n\t\t\t\t\t\t\tdeliveryId: deliveryId,\n\t\t\t\t\t\t\tdeliveryPrice: delivery,\n\t\t\t\t\t\t\texpectedDeliveryPrice: expectedDelivery,\n\t\t\t\t\t\t\tdeliveryResponsibleId: deliveryResponsibleId,\n\t\t\t\t\t\t\tpersonTypeId: personTypeId,\n\t\t\t\t\t\t\tpropertyValues: propertyValues,\n\t\t\t\t\t\t\tdeliveryExtraServicesValues: deliveryExtraServicesValues,\n\t\t\t\t\t\t\tconnector: this.connector,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tanalyticsLabel: (this.context === 'deal') ? 'salescenterCreatePaymentSms' : 'salescenterCreatePayment',\n\t\t\t\t\tgetParameters: {\n\t\t\t\t\t\tdialogId: this.dialogId,\n\t\t\t\t\t\tcontext: this.context,\n\t\t\t\t\t\tconnector: this.connector,\n\t\t\t\t\t\tskipPublicMessage: skipPublicMessage,\n\t\t\t\t\t}\n\t\t\t\t}).then((result) =>\n\t\t\t\t{\n\t\t\t\t\tthis.store.dispatch('orderCreation/resetBasket');\n\t\t\t\t\tthis.stopProgress(buttonEvent);\n\t\t\t\t\tif(skipPublicMessage === 'y')\n\t\t\t\t\t{\n\t\t\t\t\t\tlet notify = {\n\t\t\t\t\t\t\tcontent: Loc.getMessage('SALESCENTER_ORDER_CREATE_NOTIFICATION').replace('#ORDER_ID#', result.data.order.number),\n\t\t\t\t\t\t};\n\t\t\t\t\t\tnotify.actions = [{\n\t\t\t\t\t\t\ttitle: Loc.getMessage('SALESCENTER_VIEW'),\n\t\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\t\tclick() {\n\t\t\t\t\t\t\t\t\tManager.showOrderAdd(result.data.order.id);\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t}];\n\t\t\t\t\t\tBX.UI.Notification.Center.notify(notify);\n\t\t\t\t\t\tManager.showOrdersList({\n\t\t\t\t\t\t\torderId: result.data.order.id,\n\t\t\t\t\t\t\townerId: this.ownerId,\n\t\t\t\t\t\t\townerTypeId: this.ownerTypeId,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.slider.data.set('action', 'sendPayment');\n\t\t\t\t\t\tthis.slider.data.set('order', result.data.order);\n\n\t\t\t\t\t\tif (result.data.deal)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.slider.data.set('deal', result.data.deal);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.closeApplication();\n\t\t\t\t\t}\n\t\t\t\t}).catch((data) =>\n\t\t\t\t{\n\t\t\t\t\tdata.errors.forEach((error) => {\n\t\t\t\t\t\talert(error.message);\n\t\t\t\t\t});\n\t\t\t\t\tthis.stopProgress(buttonEvent);\n\t\t\t\t\tApp.showError(data);\n\t\t\t\t});\n\t\t\t},\n\t\t\tonfailure: () => {\n\t\t\t\tthis.stopProgress(buttonEvent);\n\t\t\t}\n\t\t});\n\t}\n\n\tresendPayment(buttonEvent)\n\t{\n\t\tif (!this.isPaymentCreationAvailable)\n\t\t{\n\t\t\tthis.closeApplication();\n\t\t\treturn null;\n\t\t}\n\n\t\tif (!this.store.getters['orderCreation/isAllowedSubmit'] || this.isProgress)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tthis.startProgress(buttonEvent);\n\n\t\tBX.ajax.runAction('salescenter.order.resendPayment', {\n\t\t\tdata: {\n\t\t\t\torderId: this.options.associatedEntityId,\n\t\t\t\toptions: {\n\t\t\t\t\tsendingMethod: this.sendingMethod,\n\t\t\t\t\tsendingMethodDesc: this.sendingMethodDesc,\n\t\t\t\t\tstageOnOrderPaid: this.stageOnOrderPaid\n\t\t\t\t},\n\t\t\t},\n\t\t\tgetParameters: {\n\t\t\t\tcontext: this.context,\n\t\t\t}\n\t\t}).then((result) =>\n\t\t{\n\t\t\tthis.stopProgress(buttonEvent);\n\t\t\tthis.closeApplication();\n\t\t}).catch((data) =>\n\t\t{\n\t\t\tdata.errors.forEach((error) => {\n\t\t\t\talert(error.message);\n\t\t\t});\n\t\t\tthis.stopProgress(buttonEvent);\n\t\t\tApp.showError(data);\n\t\t});\n\t}\n\n\tgetOrdersCount()\n\t{\n\t\tif(this.sessionId > 0)\n\t\t{\n\t\t\treturn Rest.callMethod('salescenter.order.getActiveOrdersCount', {\n\t\t\t\tsessionId: this.sessionId\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn new Promise((resolve, reject) => {});\n\t\t}\n\t}\n}"],"names":["ApplicationModel","pages","getPages","state","setPages","payload","saveState","removePage","page","filter","id","landingId","addPage","push","VuexBuilderModel","OrderCreationModel","currency","processingId","showPaySystemSettingBanner","selectedProducts","basket","propertyValues","deliveryExtraServicesValues","expectedDelivery","deliveryResponsibleId","personTypeId","deliveryId","delivery","errors","total","sum","discount","result","resultNumeric","refreshBasket","commit","dispatch","updateTimer","clearTimeout","setTimeout","currentProcessingId","Math","random","BX","ajax","runAction","data","basketItems","then","prop","getObject","get","onsuccess","catch","onfailure","processRefreshRequest","type","isArray","forEach","basketItem","index","sort","fields","isObject","resetBasket","deleteBasketItem","length","item","i","removeItem","changeBasketItem","setCurrency","setDeliveryId","setDelivery","setPropertyValues","setDeliveryExtraServicesValues","setExpectedDelivery","setDeliveryResponsibleId","setPersonTypeId","getBasket","isAllowedSubmit","module","parseInt","productId","isNotEmptyString","name","parseFloat","quantity","getTotal","getDelivery","getDeliveryId","getPropertyValues","getDeliveryExtraServicesValues","getExpectedDelivery","getDeliveryResponsibleId","getPersonTypeId","addBasketItem","getBasketItemState","updateBasketItem","Vue","set","Object","assign","clearBasket","splice","setSelectedProducts","map","filtered","setTotal","setErrors","clearErrors","setProcessingId","showBanner","hideBanner","code","price","basePrice","showDiscount","discountInfos","discountType","measureCode","measureName","measureRatio","taxRate","taxIncluded","isCustomPrice","isCreatedProduct","encodedFields","image","config","freeze","databaseConfig","templateName","templateAddPaymentName","templateAddPaymentProductName","templateAddPaymentBySms","templateAddPaymentBySmsItem","moduleId","MixinTemplatesType","editable","created","$root","$on","value","component","mixins","isShowPreview","isShowPayment","isShowPaymentBySms","isShowPaymentByEmail","isShowPaymentByCash","isShowPaymentByQr","pageTitle","currentPageId","actions","frameCheckShortTimeout","frameCheckLongTimeout","isPagesOpen","isFormsOpen","showedPageIds","loadedPageIds","errorPageIds","lastAddedPages","ordersCount","editedPageId","isOrderPublicUrlAvailable","currentPageTitle","showCompanyContacts","updated","renderErrors","mounted","createPinner","$app","context","showPaymentBySmsForm","createLoader","fillPages","refreshOrdersCount","openFirstPage","isOrderPublicUrlExists","isPaymentsLimitReached","paymentsLimitStartNode","$nodes","paymentsLimit","paymentsLimitNode","$refs","children","node","appendChild","movePanels","methods","sidepanel","leftPanel","nav","buttonsPanel","$el","parentNode","UI","Pinner","fixBottom","isFrame","fullWidth","getActions","currentPage","text","localize","SALESCENTER_RIGHT_ACTION_COPY_URL","onclick","copyUrl","SALESCENTER_RIGHT_ACTION_HIDE","hidePage","SALESCENTER_RIGHT_ACTION_DELETE","SALESCENTER_RIGHT_ACTION_ADD","items","getAddPageActions","isWebform","SALESCENTER_RIGHT_ACTION_ADD_SITE_B24","addSite","SALESCENTER_RIGHT_ACTION_ADD_CUSTOM","showAddUrlPopup","firstWebformPage","pageToOpen","onPageClick","setPageTitle","hideActionsPopup","isFrameDenied","includes","startFrameCheckTimeout","onFrameError","showActionsPopup","target","PopupMenu","show","offsetLeft","offsetTop","closeByEsc","Salescenter","Manager","openSlider","options","urlSettingsCompanyContacts","showAddPageActionPopup","menuId","offsetWidth","offsetHeight","angle","position","destroy","addSitePage","newPage","answer","event","url","editPage","editLandingPage","siteId","Type","isPlainObject","addCustomPage","pageId","showPaymentForm","SALESCENTER_LEFT_PAYMENT_ADD","SALESCENTER_DEFAULT_TITLE","title","SALESCENTER_LEFT_PAYMENT_BY_SMS","showOrdersList","ownerId","ownerTypeId","showOrderAdd","showCatalog","sessionId","onFormsClick","openControlPanel","openHelpDesk","openHowItWorks","isPageSelected","send","skipPublicMessage","isAllowedSubmitButton","isShowStartInfo","sendPayment","resendPayment","isActive","sendPage","close","closeApplication","innerText","onFrameLoad","connect","loader","Loader","size","document","body","no_redirect","loadConfig","hide","isSiteExists","orderPublicUrl","checkRecycle","openConnectedSite","getFrameSource","Uri","setQueryParam","toString","getOrdersCount","order","errorMessages","message","join","params","color","Alert","Color","DANGER","textCenter","util","htmlspecialchars","errorBlock","innerHTML","animated","alert","getContainer","editMenuItem","querySelector","focus","saveMenuItem","oldName","analyticsLabel","computed","application","pagesSubmenuHeight","formsSubmenuHeight","isFrameError","isShowLoader","res","getWrapperHeight","pos","offset","top","footer","height","lastModified","modifiedAgo","SALESCENTER_MODIFIED","replace","getFilteredPhrases","disableSendButton","contactPhone","$store","getters","isOrderPageDeleted","Vuex","mapState","orderCreation","template","props","timer","productSelector","isImageAdded","imageControlId","currencySymbol","defaultMeasure","measures","measure","SYMBOL","CODE","changeData","EventEmitter","subscribe","onUploaderIsInitedHandler","bind","Dropdown","searchAction","searchOptions","restrictedSearchIds","selectedProductIds","enableCreation","enableCreationOnBlur","searchResultRenderer","targetElement","searchProductLine","getProductSelectorItems","messages","creationLegend","SALESCENTER_PRODUCT_CREATE","notFound","SALESCENTER_PRODUCT_NOT_FOUND","events","onSelect","selectCatalogItem","onAdd","showCreationForm","onReset","resetSearchForm","hasOwnProperty","initDefaultFileControl","fileControlJs","fileControlJsItem","evalGlobal","directives","inserted","element","binding","selector","restrictedIds","init","getCompatData","uploader","onFileIsUploadedHandler","onFileIsDeleteHandler","fileId","CID","images","file","tmp_name","path","error","object","toggleDiscount","discountInput","$emit","basketItemIndex","isNeedRefreshAfterChanges","isCreationMode","debouncedRefresh","delay","changeQuantity","newQuantity","lastSymbol","substr","changeName","newName","changePrice","newPrice","changeDiscountType","changeDiscount","discountValue","destroyPopupWindow","updateItemsList","hideCreationForm","sender","undefined","fileControl","processHTML","fileControlHtml","openDiscountEditor","e","window","SidePanel","Instance","open","add_url_param","allowChangeHistory","preventDefault","returnValue","isEmptyProductName","calculateCorrectionFactor","factoredQuantity","factoredRatio","correctionFactor","Number","isInteger","incrementQuantity","decrementQuantity","showPopupMenu","array","menuItems","setItem","ev","param","popupMenu","percent","PopupMenuWindow","bindElement","getDefaultFileControl","fileControlData","Promise","resolve","reject","Error","initialProducts","mostPopularProducts","ID","NAME","Array","productSelectorItems","subTitle","SALESCENTER_PRODUCT_BEFORE_SEARCH_TITLE","watch","newValue","oldValue","newValueArray","oldValueArray","showPrice","getMeasureName","getMeasureCode","getBasketFileControl","html","isNotEnoughQuantity","hasPriceError","hasNameError","productInputWrapperClass","BasketItemAddBlock","addBasketItemForm","getInternalIndexByProductId","keys","findIndex","inx","onAddBasketItem","countItems","onUpdateBasketItem","removeEmptyItems","modifyBasketItem","showDialogProductExists","popup","Popup","onPopupClose","zIndex","autoHide","closeIcon","titleBar","Loc","getMessage","draggable","resizable","lightShadow","cacheable","overlay","content","buttons","getButtons","product","SaveButton","CancelButton","showDialogProductSearch","funcName","CDialog","content_url","max","innerHeight","width","innerWidth","min_height","min_width","Show","components","associatedEntityId","defaultCurrency","currencyCode","totals","userOptionName","orderCreationOption","userOptionKeyName","paySystemBannerOptionName","userOptions","save","isShowedBanner","Base","icon","getIcon","getType","isString","disabled","isBoolean","Cash","Check","CheckSent","Payment","Sent","Watch","Factory","SmsConfigureBlock","onConfigure","SmsAlertBlock","SmsSenderListBlock","getSenderCode","getConfigUrl","onSelectedSender","render","setCode","currentTarget","getAttribute","dataset","SALESCENTER_SENDER_LIST_CONTENT_SETTINGS","getName","list","isShow","required","DeliverySelector","onChange","deliveryPrice","deliveryServiceId","relatedPropsValues","relatedServicesValues","estimatedDeliveryPrice","responsibleUser","onSettingsChanged","sumTitle","productsPriceFormatted","productsPrice","deliveryFormatted","isDeliveryCalculated","Currency","currencyFormat","totalFormatted","actionData","classModule","stage","itemData","infoHover","smsEditMessageMode","smsSenders","layout","paymentInfo","loadData","getSmsSenderConfig","urlSettingsSmsSenders","phone","sendingMethodDesc","provider","deliverySelectorConfig","shipmentData","responsibleId","assignedById","expectedDeliveryPrice","orderPropertyValues","extraServicesValues","isExistingItem","listeners","blur","adjustUpdateMessage","keydown","pressKey","isHasLink","match","getSmsMessage","link","updateMessage","smsMessageNode","saveSmsTemplate","smsText","runComponentAction","mode","smsTemplate","showPopupHint","isTemplateBeSendSms","setProviderDefault","isTemplateSelectProduct","isTemplatePaySystem","isTemplateCashBox","isTemplateAutomationBox","isTemplateDeliveryBox","isItemsSet","showItem","sliderOptions","showRestApplication","getAjaxData","installedApp","openRestAppLayout","openMarketPlacePage","applicationUrlTemplate","encodeURIComponent","applicationId","appCode","response","app","TYPE","rest","AppLayout","openApplication","restAppErrorPopup","pop","PopupWindow","opacity","PopupWindowButton","onPopupDestroy","isAddItemClass","updateTemplate","isSet","showPaySystemSettingsHint","showCashBoxSettingsHint","darkMode","showSmsMessagePopupHint","showSelectPopup","selectPopup","getSelectPopupContent","selectPopupContent","Tag","onClickOptionHandler","onChooseSelectOption","option","colorText","style","Dom","append","currentOption","getElementById","textContent","nextElementSibling","borderColor","background","backgroundColor","stageOnOrderPaid","hidePopupHint","adjustSmsEditMessageMode","isSmsEditMessageMode","smsSenderConfigure","Ajax","values","smsSenderSelected","hasContactPhone","TimeLineItemContentBlock","TimeLineItemBlock","TimeLineItemPaymentBlock","TimeLineListBlock","steps","contactBlock","paySystemList","isAutomationAvailable","dealStageList","cashboxList","deliveryList","isInstalled","a","b","timeline","timelineItemsInit","create","initTileGrid","console","log","App","dialogId","lineId","orderAddPullTag","landingPublicationPullTag","landingUnPublicationPullTag","isCatalogAvailable","slider","getTopSlider","isProgress","fillPagesTimeout","fillPagesQueue","sendingMethod","isUndefined","isPaymentCreationAvailable","connector","Event","ready","pull","PULL","initPull","initStore","initTemplate","showError","command","callback","orderId","showOrdersListAfterCreate","store","templateEngine","el","startProgress","Rest","callMethod","stopProgress","getLoader","buttonEvent","showLoader","isDomNode","classList","add","hideLoader","remove","promise","deleteUrl","error_description","source","connectedSiteId","addAnalyticAction","getParameters","notify","number","click","Notification","Center","deal","builder","VuexBuilder","addModel","useNamespace","build"],"mappings":"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"}