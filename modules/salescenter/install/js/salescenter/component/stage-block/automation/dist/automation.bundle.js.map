{"version":3,"file":"automation.bundle.js","sources":["../src/select-arrow.js","../src/stage-list.js"],"sourcesContent":["const SelectArrow = {\n\ttemplate: `\n\t\t\t<span class=\"salescenter-app-payment-by-sms-item-container-select-arrow\" /> \n`\n};\nexport {\n\tSelectArrow\n}","import {Text} \t\t\t\tfrom 'main.core';\nimport {Popup as MainPopup} from 'main.popup';\nimport {Dom, Tag} \t\t\tfrom 'main.core';\nimport {SelectArrow} \t\tfrom \"./select-arrow\";\n\nconst StageList = {\n\tprops: {\n\t\tstages: {\n\t\t\ttype: Array,\n\t\t\trequired: true\n\t\t},\n\t\teditable: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true\n\t\t},\n\t},\n\tcomponents:\n\t\t{\n\t\t\t'select-arrow-block'\t:\tSelectArrow,\n\t\t},\n\tcomputed:\n\t\t{\n\t\t\tclassesObject()\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\t'salescenter-app-payment-by-sms-item-container-select-inner' : true\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\tmethods:\n\t{\n\t\tstyleObject(stage)\n\t\t{\n\t\t\treturn {background:stage.color};\n\t\t},\n\n\t\tshowSelectPopup(target, options)\n\t\t{\n\t\t\tif(!target || !this.editable)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.selectPopup = new MainPopup(null, target, {\n\t\t\t\tcloseByEsc: true,\n\t\t\t\tautoHide: true,\n\t\t\t\twidth: 250,\n\t\t\t\toffsetTop: 5,\n\t\t\t\tevents: {\n\t\t\t\t\tonPopupClose: () => { this.selectPopup.destroy() }\n\t\t\t\t},\n\t\t\t\tcontent: this.getSelectPopupContent(options)\n\t\t\t});\n\n\t\t\tthis.selectPopup.show();\n\t\t},\n\n\t\tgetSelectPopupContent(options)\n\t\t{\n\t\t\tif (!this.selectPopupContent)\n\t\t\t{\n\t\t\t\tthis.selectPopupContent = Tag.render`<div class=\"salescenter-app-payment-by-sms-select-popup\"></div>`;\n\n\t\t\t\tconst onClickOptionHandler = (event) => {\n\t\t\t\t\tthis.onChooseSelectOption(event);\n\t\t\t\t};\n\n\t\t\t\tfor (let i = 0; i < options.length; i++)\n\t\t\t\t{\n\t\t\t\t\tconst option = Tag.render`\n\t\t\t\t\t\t<div data-item-value=\"${options[i].id}\" class=\"salescenter-app-payment-by-sms-select-popup-option\" style=\"background-color:${options[i].color ? options[i].color : ''};\" onclick=\"${onClickOptionHandler.bind(this)}\">\n\t\t\t\t\t\t\t${Text.encode(options[i].name)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t`;\n\n\t\t\t\t\tif (options[i].colorText === 'light') {\n\t\t\t\t\t\toption.style.color = '#fff';\n\t\t\t\t\t}\n\n\t\t\t\t\tDom.append(option, this.selectPopupContent);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn this.selectPopupContent;\n\t\t},\n\n\t\tonChooseSelectOption(event)\n\t\t{\n\t\t\tconst currentOption = this.$refs['selectedOptions'][0];\n\t\t\tcurrentOption.textContent = event.currentTarget.textContent;\n\t\t\tcurrentOption.style.color = event.currentTarget.style.color;\n\t\t\tcurrentOption.nextElementSibling.style.borderColor = event.currentTarget.style.color;\n\t\t\tcurrentOption.parentNode.style.background = event.currentTarget.style.backgroundColor;\n\n\t\t\tthis.$emit('on-choose-select-option', {data: event.currentTarget.getAttribute('data-item-value')});\n\n\t\t\tthis.selectPopup.destroy();\n\t\t}\n\t},\n\ttemplate: `\n\t\t<div class=\"salescenter-app-payment-by-sms-item-container-select\">\n\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container-select-text\">\n\t\t\t\t<slot name=\"stage-list-text\"/>\n\t\t\t</div>\n\t\t\t<template v-for=\"stage in stages\">\n\t\t\t\t<div \n\t\t\t\t\tv-if=\"stage.selected\" \n\t\t\t\t\t:class=\"classesObject\" \n\t\t\t\t\t:style=\"styleObject(stage)\" \n\t\t\t\t\tv-on:click=\"showSelectPopup($event.currentTarget, stages)\"\n\t\t\t\t>\n\t\t\t\t\t<div ref=\"selectedOptions\" class=\"salescenter-app-payment-by-sms-item-container-select-item\">{{stage.name}}</div>\n\t\t\t\t\t<select-arrow-block/>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</div>\n\t`\n};\nexport {\n\tStageList\n}\n"],"names":["SelectArrow","template","StageList","props","stages","type","Array","required","editable","Boolean","components","computed","classesObject","methods","styleObject","stage","background","color","showSelectPopup","target","options","selectPopup","MainPopup","closeByEsc","autoHide","width","offsetTop","events","onPopupClose","destroy","content","getSelectPopupContent","show","selectPopupContent","Tag","render","onClickOptionHandler","event","onChooseSelectOption","i","length","option","id","bind","Text","encode","name","colorText","style","Dom","append","currentOption","$refs","textContent","currentTarget","nextElementSibling","borderColor","parentNode","backgroundColor","$emit","data","getAttribute"],"mappings":"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"}