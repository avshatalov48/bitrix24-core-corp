{"version":3,"file":"automation.bundle.js","sources":["../src/select-arrow.js","../src/stage-list.js"],"sourcesContent":["const SelectArrow = {\n\ttemplate: `\n\t\t\t<span class=\"salescenter-app-payment-by-sms-item-container-select-arrow\" /> \n`\n};\nexport {\n\tSelectArrow\n}","import {Text} \t\t\t\tfrom 'main.core';\nimport {Popup as MainPopup} from 'main.popup';\nimport {Dom, Tag} \t\t\tfrom 'main.core';\nimport {SelectArrow} \t\tfrom \"./select-arrow\";\n\nconst StageList = {\n\tprops: {\n\t\tstages: {\n\t\t\ttype: Array,\n\t\t\trequired: true\n\t\t},\n\t\teditable: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true\n\t\t},\n\t},\n\tcomponents:\n\t\t{\n\t\t\t'select-arrow-block'\t:\tSelectArrow,\n\t\t},\n\tcomputed:\n\t\t{\n\t\t\tclassesObject()\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\t'salescenter-app-payment-by-sms-item-container-select-inner' : true\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\tmethods:\n\t{\n\t\tstyleObject(stage)\n\t\t{\n\t\t\treturn {background:stage.color};\n\t\t},\n\n\t\tshowSelectPopup(target, options)\n\t\t{\n\t\t\tif(!target || !this.editable)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.selectPopup = new MainPopup(null, target, {\n\t\t\t\tcloseByEsc: true,\n\t\t\t\tautoHide: true,\n\t\t\t\twidth: 250,\n\t\t\t\toffsetTop: 5,\n\t\t\t\tevents: {\n\t\t\t\t\tonPopupClose: () => { this.selectPopup.destroy() }\n\t\t\t\t},\n\t\t\t\tcontent: this.getSelectPopupContent(options)\n\t\t\t});\n\n\t\t\tthis.selectPopup.show();\n\t\t},\n\n\t\tgetSelectPopupContent(options)\n\t\t{\n\t\t\tif (!this.selectPopupContent)\n\t\t\t{\n\t\t\t\tthis.selectPopupContent = Tag.render`<div class=\"salescenter-app-payment-by-sms-select-popup\"></div>`;\n\n\t\t\t\tconst onClickOptionHandler = (event) => {\n\t\t\t\t\tthis.onChooseSelectOption(event);\n\t\t\t\t};\n\n\t\t\t\tfor (let i = 0; i < options.length; i++)\n\t\t\t\t{\n\t\t\t\t\tconst option = Tag.render`\n\t\t\t\t\t\t<div data-item-value=\"${options[i].id}\" class=\"salescenter-app-payment-by-sms-select-popup-option\" style=\"background-color:${options[i].color ? options[i].color : ''};\" onclick=\"${onClickOptionHandler.bind(this)}\">\n\t\t\t\t\t\t\t${Text.encode(options[i].name)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t`;\n\n\t\t\t\t\tif (options[i].colorText === 'light') {\n\t\t\t\t\t\toption.style.color = '#fff';\n\t\t\t\t\t}\n\n\t\t\t\t\tDom.append(option, this.selectPopupContent);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn this.selectPopupContent;\n\t\t},\n\n\t\tonChooseSelectOption(event)\n\t\t{\n\t\t\tconst currentOption = this.$refs['selectedOptions'][0];\n\t\t\tcurrentOption.textContent = event.currentTarget.textContent;\n\t\t\tcurrentOption.style.color = event.currentTarget.style.color;\n\t\t\tcurrentOption.nextElementSibling.style.borderColor = event.currentTarget.style.color;\n\t\t\tcurrentOption.parentNode.style.background = event.currentTarget.style.backgroundColor;\n\n\t\t\tthis.$emit('on-choose-select-option', {data: event.currentTarget.getAttribute('data-item-value')});\n\n\t\t\tthis.selectPopup.destroy();\n\t\t}\n\t},\n\ttemplate: `\n\t\t<div class=\"salescenter-app-payment-by-sms-item-container-select\">\n\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container-select-text\">\n\t\t\t\t<slot name=\"stage-list-text\"/>\n\t\t\t</div>\n\t\t\t<template v-for=\"stage in stages\">\n\t\t\t\t<div \n\t\t\t\t\tv-if=\"stage.selected\" \n\t\t\t\t\t:class=\"classesObject\" \n\t\t\t\t\t:style=\"styleObject(stage)\" \n\t\t\t\t\tv-on:click=\"showSelectPopup($event.currentTarget, stages)\"\n\t\t\t\t>\n\t\t\t\t\t<div ref=\"selectedOptions\" class=\"salescenter-app-payment-by-sms-item-container-select-item\">{{stage.name}}</div>\n\t\t\t\t\t<select-arrow-block/>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</div>\n\t`\n};\nexport {\n\tStageList\n}\n"],"names":["SelectArrow","template","StageList","props","stages","type","Array","required","editable","Boolean","components","computed","classesObject","methods","styleObject","stage","background","color","showSelectPopup","target","options","selectPopup","MainPopup","closeByEsc","autoHide","width","offsetTop","events","onPopupClose","destroy","content","getSelectPopupContent","show","selectPopupContent","Tag","render","onClickOptionHandler","event","onChooseSelectOption","i","length","option","id","bind","Text","encode","name","colorText","style","Dom","append","currentOption","$refs","textContent","currentTarget","nextElementSibling","borderColor","parentNode","backgroundColor","$emit","data","getAttribute"],"mappings":"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"}