{"version":3,"file":"sms-message.bundle.js","sources":["../src/error.js","../src/message-control.js","../src/message-edit.js","../src/message-view.js","../src/message-editor.js","../src/sender-list.js","../src/user-avatar.js"],"sourcesContent":["const Error = {\n\tprops: {\n\t\terror: {\n\t\t\ttype: Object,\n\t\t\trequired: true\n\t\t}\n\t},\n\tmethods: {\n\t\topenSlider()\n\t\t{\n\t\t\tthis.error.fixer().then(() => this.onConfigure())\n\t\t},\n\t\tonConfigure()\n\t\t{\n\t\t\tthis.$emit('on-configure');\n\t\t}\n\t},\n\ttemplate: `\n\t\t<div class=\"ui-alert ui-alert-warning ui-alert-xs ui-alert-icon-danger salescenter-app-payment-by-sms-item-container-alert\">\n\t\t\t<span class=\"ui-alert-message\">\n\t\t\t\t{{error.text}}\n\t\t\t</span>\n\t\t\t<span\n\t\t\t\tv-if=\"error.fixer && error.fixText\"\n\t\t\t\tclass=\"salescenter-app-payment-by-sms-item-container-alert-config\"\n\t\t\t\t@click=\"openSlider()\"\n\t\t\t>\n\t\t\t\t{{error.fixText}}\n\t\t\t</span>\n\t\t</div>\n\t`\n};\n\nexport {\n\tError\n}\n","const MessageControl = {\n\tprops: {\n\t\teditable: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true\n\t\t}\n\t},\n\tcomputed:\n\t{\n\t\tclassObject()\n\t\t{\n\t\t\treturn {\n\t\t\t\t'salescenter-app-payment-by-sms-item-container-sms-content-edit': true,\n\t\t\t\t'salescenter-app-payment-by-sms-item-container-sms-content-save': this.editable\n\t\t\t}\n\t\t}\n\t},\n\tmethods:\n\t{\n\t\tonSave(e)\n\t\t{\n\t\t\tthis.$emit('control-on-save', e);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div :class=\"classObject\" @click=\"onSave($event)\"></div>\n\t`\n};\n\nexport {\n\tMessageControl\n}","const MessageEdit = {\n\tprops: {\n\t\ttext: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t},\n\tcomputed:\n\t\t{\n\t\t\tclassObject()\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\t'salescenter-app-payment-by-sms-item-container-sms-content-message-text ': true,\n\t\t\t\t\t'salescenter-app-payment-by-sms-item-container-sms-content-message-text-edit': true\n\t\t\t\t}\n\t\t\t},\n\t\t},\n\tmethods:\n\t\t{\n\t\t\tupdateMessage(e)\n\t\t\t{\n\t\t\t\tthis.text = e.target.innerText;\n\t\t\t\tthis.$emit('edit-on-update-template', this.text);\n\t\t\t},\n\n\t\t\tisHasLink()\n\t\t\t{\n\t\t\t\treturn this.text.match(/#LINK#/)\n\t\t\t},\n\n\t\t\tsaveSmsTemplate(smsText)\n\t\t\t{\n\t\t\t\tBX.ajax.runComponentAction(\n\t\t\t\t\t\"bitrix:salescenter.app\",\n\t\t\t\t\t\"saveSmsTemplate\",\n\t\t\t\t\t{\n\t\t\t\t\t\tmode: \"class\",\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tsmsTemplate: smsText,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tanalyticsLabel: 'salescenterSmsTemplateChange'\n\t\t\t\t\t}\n\t\t\t\t).catch((response) => {\n\t\t\t\t\tconst errorMessage = response.errors.map(function(err){return err.message}).join(\"; \");\n\t\t\t\t\talert(errorMessage);\n\t\t\t\t});\n\t\t\t},\n\n\t\t\tadjustUpdateMessage(e)\n\t\t\t{\n\t\t\t\tthis.updateMessage(e);\n\n\t\t\t\tif(!this.isHasLink())\n\t\t\t\t{\n\t\t\t\t\tthis.showErrorHasLink(e)\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.saveSmsTemplate(this.text);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tonPressKey(e)\n\t\t\t{\n\t\t\t\tif(e.code === \"Enter\")\n\t\t\t\t{\n\n\t\t\t\t\tthis.adjustUpdateMessage(e);\n\t\t\t\t\tthis.afterPressKey(e);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tonBlur(e)\n\t\t\t{\n\t\t\t\tthis.beforeBlur();\n\t\t\t\tthis.adjustUpdateMessage(e);\n\t\t\t},\n\n\t\t\tafterPressKey(e)\n\t\t\t{\n\t\t\t\tthis.$emit('edit-on-after-press-key', e);\n\t\t\t},\n\n\t\t\tbeforeBlur(e)\n\t\t\t{\n\t\t\t\tthis.$emit('edit-on-before-blur', e);\n\t\t\t},\n\n\t\t\tshowErrorHasLink(e)\n\t\t\t{\n\t\t\t\tthis.$emit('edit-on-has-link-error', e);\n\n\t\t\t}\n\t\t},\n\ttemplate: `\n\n\t\t<div \n\t\t\tcontenteditable=\"true\"\t\n\t\t\t:class=\"classObject\"\n\t\t\t@blur=\"onBlur($event)\"\n\t\t\t@keydown=\"onPressKey($event)\"\n\t\t>{{text}}\n</div>\n\n\t`\n};\n\nexport {\n\tMessageEdit\n}","import {Text} from 'main.core';\n\nconst MessageView = {\n\tprops: {\n\t\ttext: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\torderPublicUrl: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t}\n\t},\n\tcomputed:\n\t\t{\n\t\t\tclassObject()\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\t'salescenter-app-payment-by-sms-item-container-sms-content-message-text': true,\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\tmethods:\n\t\t{\n\t\t\tonMouseenter(e)\n\t\t\t{\n\t\t\t\tthis.$emit('view-on-mouseenter', e);\n\t\t\t},\n\t\t\tonMouseleave()\n\t\t\t{\n\t\t\t\tthis.$emit('view-on-mouseleave');\n\t\t\t},\n\n\t\t\tgetSmsMessage()\n\t\t\t{\n\t\t\t\tlet link = `<span class=\"salescenter-app-payment-by-sms-item-container-sms-content-message-link\">${this.orderPublicUrl}</span><span class=\"salescenter-app-payment-by-sms-item-container-sms-content-message-link-ref\">xxxxx</span>` + ` `;\n\t\t\t\tlet text = this.text;\n\n\t\t\t\treturn Text.encode(text).replace(/#LINK#/g, link);\n\t\t\t},\n\t\t},\n\ttemplate: `\n\t\t<div \n\t\t\tv-html=\"getSmsMessage()\"\n\t\t\tcontenteditable=\"false\" \n\t\t\t:class=\"classObject\" \n\t\t\tv-on:mouseenter=\"onMouseenter($event)\" \n\t\t\tv-on:mouseleave=\"onMouseleave\"\n\t\t/>\n\t`\n};\n\nexport {\n\tMessageView\n}","import {Popup} from 'main.popup';\nimport {Loc} from 'main.core';\nimport {MessageEdit} from \"./message-edit\";\nimport {MessageView} from \"./message-view\";\nimport {MessageControl} from \"./message-control\";\n\nconst MODE_VIEW = 'view';\nconst MODE_EDIT = 'edit';\n\nconst MessageEditor = {\n\tprops: {\n\t\teditor: {\n\t\t\ttype: Object,\n\t\t\trequired: true\n\t\t},\n\t\tisReadOnly: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t}\n\t},\n\tdata()\n\t{\n\t\treturn {\n\t\t\tmode: MODE_VIEW,\n\t\t\ttext: this.editor.template,\n\t\t\thasError: false,\n\t\t\torderPublicUrl: this.editor.url,\n\t\t\tsmsEditMessageMode: false\n\t\t}\n\t},\n\tcomponents:\n\t{\n\t\t'sms-message-edit-block'\t:\tMessageEdit,\n\t\t'sms-message-view-block'\t:\tMessageView,\n\t\t'sms-message-control-block'\t:\tMessageControl,\n\t},\n\tcomputed:\n\t{\n\t\tgetMode()\n\t\t{\n\t\t\treturn this.mode;\n\t\t},\n\n\t\tsetMode(value)\n\t\t{\n\t\t\tthis.mode = value;\n\t\t},\n\t},\n\tmethods:\n\t{\n\t\tisEditable()\n\t\t{\n\t\t\treturn this.mode === MODE_EDIT && !this.isReadOnly;\n\t\t},\n\t\tresetError()\n\t\t{\n\t\t\tthis.hasError = false;\n\t\t},\n\n\t\t//region edit\n\t\tupdateTemplate(text)\n\t\t{\n\t\t\tthis.text = text;\n\t\t\tthis.$root.$app.sendingMethodDesc.text = text;\n\t\t},\n\t\tshowPopupHint(target, message, timer)\n\t\t{\n\t\t\tif(this.popup)\n\t\t\t{\n\t\t\t\tthis.popup.destroy();\n\t\t\t\tthis.popup = null;\n\t\t\t}\n\n\t\t\tif(!target && !message)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.popup = new Popup(null, target, {\n\t\t\t\tevents: {\n\t\t\t\t\tonPopupClose: () => {\n\t\t\t\t\t\tthis.popup.destroy();\n\t\t\t\t\t\tthis.popup = null;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tdarkMode: true,\n\t\t\t\tcontent: message,\n\t\t\t\toffsetLeft: target.offsetWidth,\n\t\t\t});\n\n\t\t\tif(timer)\n\t\t\t{\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.popup.destroy();\n\t\t\t\t\tthis.popup = null;\n\t\t\t\t}, timer);\n\t\t\t}\n\n\t\t\tthis.popup.show();\n\t\t},\n\t\tafterPressKey(e)\n\t\t{\n\t\t\tthis.afterSavePressKey(e);\n\t\t},\n\t\tbeforeBlur()\n\t\t{\n\t\t\tthis.hasError = false;\n\t\t},\n\t\tshowHasLinkErrorHint(e)\n\t\t{\n\t\t\tthis.hasError = true;\n\t\t},\n\t\tafterSavePressKey(e)\n\t\t{\n\t\t\tthis.reverseMode();\n\n\t\t\tif(this.hasError)\n\t\t\t{\n\t\t\t\tthis.showPopupHint(\n\t\t\t\t\te.target,\n\t\t\t\t\tLoc.getMessage('SALESCENTER_SEND_ORDER_BY_SMS_SENDER_TEMPLATE_ERROR'),\n\t\t\t\t\t2000\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tthis.resetError();\n\t\t},\n\t\t//endregion\n\n\t\t//region view\n\t\tshowSmsMessagePopupHint(e)\n\t\t{\n\t\t\tthis.showPopupHint(e.target, Loc.getMessage('SALESCENTER_SMS_MESSAGE_HINT'))\n\t\t},\n\n\t\thidePopupHint()\n\t\t{\n\t\t\tif(this.popup)\n\t\t\t{\n\t\t\t\tthis.popup.destroy();\n\t\t\t}\n\t\t},\n\t\t//endregion\n\n\t\t//region control\n\t\treverseMode()\n\t\t{\n\t\t\tthis.mode === MODE_EDIT ?\n\t\t\t\tthis.mode = MODE_VIEW :\n\t\t\t\tthis.mode = MODE_EDIT ;\n\t\t},\n\n\t\tafterSaveControl(e)\n\t\t{\n\t\t\tif(!this.hasError)\n\t\t\t{\n\t\t\t\tthis.reverseMode();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.showPopupHint(\n\t\t\t\t\te.target,\n\t\t\t\t\tLoc.getMessage('SALESCENTER_SEND_ORDER_BY_SMS_SENDER_TEMPLATE_ERROR'),\n\t\t\t\t\t2000\n\t\t\t\t);\n\t\t\t}\n\t\t},\n\t\t//endregion\n\t},\n\ttemplate: `\n\t\t<div class=\"salescenter-app-payment-by-sms-item-container-sms-content\">\n\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container-sms-content-message\">\t\n\t\t\t\t<template v-if=\"isEditable()\">\n\t\t\t\t\t<sms-message-edit-block\t\t\t\t\n\t\t\t\t\t\t:text=\"text\"\n\t\t\t\t\t\tv-on:edit-on-before-blur=\"beforeBlur\"\n\t\t\t\t\t\tv-on:edit-on-after-press-key=\"afterPressKey\"\n\t\t\t\t\t\tv-on:edit-on-update-template=\"updateTemplate\"\n\t\t\t\t\t\tv-on:edit-on-has-link-error=\"showHasLinkErrorHint\"\n\t\t\t\t\t/>\n\t\t\t\t</template> \n\t\t\t\t<template v-else>\n\t\t\t\t\t<sms-message-view-block\n\t\t\t\t\t\t:text=\"text\"\n\t\t\t\t\t\t:orderPublicUrl=\"orderPublicUrl\"\n\t\t\t\t\t\tv-on:view-on-mouseenter=\"showSmsMessagePopupHint\"\n\t\t\t\t\t\tv-on:view-on-mouseleave=\"hidePopupHint\"\n\t\t\t\t\t/>\n\t\t\t\t</template>\n\t\t\t\t<sms-message-control-block v-if=\"!isReadOnly\"\n\t\t\t\t\t:editable=\"isEditable()\"\n\t\t\t\t\tv-on:control-on-save=\"afterSaveControl\"\n\t\t\t\t/>\n\t\t\t</div>\n\t`\n};\n\nexport {\n\tMessageEditor\n}\n","import {PopupMenuWindow} from 'main.popup';\nimport {Manager} from 'salescenter.manager';\nimport {Vue} from \"ui.vue\";\n\nconst SenderList = {\n\tprops: [\n\t\t'list',\n\t\t'initSelected',\n\t\t'settingUrl'\n\t],\n\tcomputed: {\n\t\tselectedSender()\n\t\t{\n\t\t\treturn this.list.find(sender => sender.id === this.selected);\n\t\t},\n\t\tselectedSenderName()\n\t\t{\n\t\t\treturn this.selectedSender ? this.selectedSender.name : '';\n\t\t},\n\t\tlocalize()\n\t\t{\n\t\t\treturn Vue.getFilteredPhrases('SALESCENTER_SENDER_LIST_CONTENT_');\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tselected: null,\n\t\t};\n\t},\n\tcreated() {\n\t\tif (this.initSelected)\n\t\t{\n\t\t\tthis.onSelectedSender(this.initSelected);\n\t\t}\n\t\telse if (this.list && this.list.length > 0)\n\t\t{\n\t\t\tthis.onSelectedSender(this.list[0].id);\n\t\t}\n\t},\n\tmethods: {\n\t\topenSlider()\n\t\t{\n\t\t\tManager.openSlider(this.settingUrl).then(() => this.onConfigure());\n\t\t},\n\t\tonConfigure()\n\t\t{\n\t\t\tthis.$emit('on-configure');\n\t\t},\n\t\tonSelectedSender(value)\n\t\t{\n\t\t\tthis.selected = value;\n\t\t\tthis.$emit('on-selected', value);\n\t\t},\n\t\trender(target, array)\n\t\t{\n\t\t\tlet menuItems = [];\n\t\t\tlet setItem = (ev) => {\n\t\t\t\ttarget.innerHTML = ev.target.innerHTML;\n\t\t\t\tthis.onSelectedSender(ev.currentTarget.getAttribute('data-item-sender-value'));\n\t\t\t\tthis.popupMenu.close();\n\t\t\t};\n\n\t\t\tfor (let index in array)\n\t\t\t{\n\t\t\t\tif (!array.hasOwnProperty(index))\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tmenuItems.push({\n\t\t\t\t\ttext: array[index].name,\n\t\t\t\t\tdataset: {\n\t\t\t\t\t\t'itemSenderValue' : array[index].id\n\t\t\t\t\t},\n\t\t\t\t\tonclick: setItem\n\t\t\t\t})\n\t\t\t}\n\n\t\t\tmenuItems.push({\n\t\t\t\ttext: this.localize.SALESCENTER_SENDER_LIST_CONTENT_SETTINGS,\n\t\t\t\tonclick: ()=>{\n\t\t\t\t\tthis.openSlider();\n\t\t\t\t\tthis.popupMenu.close();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.popupMenu = new PopupMenuWindow({\n\t\t\t\tbindElement: target,\n\t\t\t\titems: menuItems,\n\t\t\t});\n\n\t\t\tthis.popupMenu.show();\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"salescenter-app-payment-by-sms-item-container-sms-content-info\">\n\t\t\t<slot name=\"sms-sender-list-text-send-from\"></slot>\n\t\t\t<span @click=\"render($event.target, list)\">{{selectedSenderName}}</span>\n\t\t</div>\n\t`\n};\n\nexport {\n\tSenderList\n}\n","const UserAvatar = {\n\tprops: {\n\t\tmanager: {\n\t\t\ttype: Object,\n\t\t\trequired: true\n\t\t},\n\t},\n\n\tcomputed:\n\t{\n\t\tavatarStyle()\n\t\t{\n\t\t\tlet url = this.manager.photo ? { 'background-image': 'url(' + this.manager.photo + ')'} : null ;\n\n\t\t\treturn [url];\n\t\t}\n\t},\n\n\ttemplate: `\n\t\t<div class=\"salescenter-app-payment-by-sms-item-container-sms-user\">\n\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container-sms-user-avatar\" :style=\"avatarStyle\"></div>\n\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container-sms-user-name\">{{manager.name}}</div>\n\t\t</div>\n\t`\n};\n\nexport {\n\tUserAvatar\n}"],"names":["Error","props","error","type","Object","required","methods","openSlider","fixer","then","onConfigure","$emit","template","MessageControl","editable","Boolean","computed","classObject","onSave","e","MessageEdit","text","String","updateMessage","target","innerText","isHasLink","match","saveSmsTemplate","smsText","BX","ajax","runComponentAction","mode","data","smsTemplate","analyticsLabel","catch","response","errorMessage","errors","map","err","message","join","alert","adjustUpdateMessage","showErrorHasLink","onPressKey","code","afterPressKey","onBlur","beforeBlur","MessageView","orderPublicUrl","onMouseenter","onMouseleave","getSmsMessage","link","Text","encode","replace","MODE_VIEW","MODE_EDIT","MessageEditor","editor","isReadOnly","default","hasError","url","smsEditMessageMode","components","getMode","setMode","value","isEditable","resetError","updateTemplate","$root","$app","sendingMethodDesc","showPopupHint","timer","popup","destroy","Popup","events","onPopupClose","darkMode","content","offsetLeft","offsetWidth","setTimeout","show","afterSavePressKey","showHasLinkErrorHint","reverseMode","Loc","getMessage","showSmsMessagePopupHint","hidePopupHint","afterSaveControl","SenderList","selectedSender","list","find","sender","id","selected","selectedSenderName","name","localize","Vue","getFilteredPhrases","created","initSelected","onSelectedSender","length","Manager","settingUrl","render","array","menuItems","setItem","ev","innerHTML","currentTarget","getAttribute","popupMenu","close","index","hasOwnProperty","push","dataset","onclick","SALESCENTER_SENDER_LIST_CONTENT_SETTINGS","PopupMenuWindow","bindElement","items","UserAvatar","manager","avatarStyle","photo"],"mappings":"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"}