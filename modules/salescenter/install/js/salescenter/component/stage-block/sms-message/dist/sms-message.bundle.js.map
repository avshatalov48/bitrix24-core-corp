{"version":3,"file":"sms-message.bundle.js","sources":["../src/error.js","../src/message-control.js","../src/message-edit.js","../src/message-view.js","../src/message-editor.js","../src/sender-list.js","../src/user-avatar.js"],"sourcesContent":["import {BaseEvent} from 'main.core.events';\n\nconst Error = {\n\tprops: {\n\t\terror: {\n\t\t\ttype: Object,\n\t\t\trequired: true\n\t\t}\n\t},\n\tmethods: {\n\t\topenSlider()\n\t\t{\n\t\t\tthis.error.fixer().then(() => this.onConfigure(this.error))\n\t\t},\n\t\tonConfigure(data)\n\t\t{\n\t\t\tthis.$emit('on-configure', new BaseEvent({data}));\n\t\t}\n\t},\n\ttemplate: `\n\t\t<div class=\"ui-alert ui-alert-warning ui-alert-xs ui-alert-icon-danger salescenter-app-payment-by-sms-item-container-alert\">\n\t\t\t<span class=\"ui-alert-message\">\n\t\t\t\t{{error.text}}\n\t\t\t</span>\n\t\t\t<span\n\t\t\t\tv-if=\"error.fixer && error.fixText\"\n\t\t\t\tclass=\"salescenter-app-payment-by-sms-item-container-alert-config\"\n\t\t\t\t@click=\"openSlider()\"\n\t\t\t>\n\t\t\t\t{{error.fixText}}\n\t\t\t</span>\n\t\t</div>\n\t`\n};\n\nexport {\n\tError\n}\n","const MessageControl = {\n\tprops: {\n\t\teditable: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true\n\t\t}\n\t},\n\tcomputed:\n\t{\n\t\tclassObject()\n\t\t{\n\t\t\treturn {\n\t\t\t\t'salescenter-app-payment-by-sms-item-container-sms-content-edit': true,\n\t\t\t\t'salescenter-app-payment-by-sms-item-container-sms-content-save': this.editable\n\t\t\t}\n\t\t}\n\t},\n\tmethods:\n\t{\n\t\tonSave(e)\n\t\t{\n\t\t\tthis.$emit('control-on-save', e);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div :class=\"classObject\" @click=\"onSave($event)\"></div>\n\t`\n};\n\nexport {\n\tMessageControl\n}","const MessageEdit = {\n\tprops: {\n\t\ttext: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\tselectedMode: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomputed:\n\t\t{\n\t\t\tclassObject()\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\t'salescenter-app-payment-by-sms-item-container-sms-content-message-text ': true,\n\t\t\t\t\t'salescenter-app-payment-by-sms-item-container-sms-content-message-text-edit': true\n\t\t\t\t}\n\t\t\t},\n\t\t},\n\tmethods:\n\t\t{\n\t\t\tupdateMessage(e)\n\t\t\t{\n\t\t\t\tthis.text = e.target.innerText;\n\t\t\t\tthis.$emit('edit-on-update-template', this.text);\n\t\t\t},\n\n\t\t\tisHasLink()\n\t\t\t{\n\t\t\t\treturn this.text.match(/#LINK#/)\n\t\t\t},\n\n\t\t\tsaveSmsTemplate(smsText)\n\t\t\t{\n\t\t\t\tBX.ajax.runComponentAction(\n\t\t\t\t\t\"bitrix:salescenter.app\",\n\t\t\t\t\t\"saveSmsTemplate\",\n\t\t\t\t\t{\n\t\t\t\t\t\tmode: \"class\",\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tsmsTemplate: smsText,\n\t\t\t\t\t\t\tmode: this.selectedMode,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tanalyticsLabel: 'salescenterSmsTemplateChange'\n\t\t\t\t\t}\n\t\t\t\t).catch((response) => {\n\t\t\t\t\tconst errorMessage = response.errors.map((err) => {return err.message}).join(\"; \");\n\t\t\t\t\talert(errorMessage);\n\t\t\t\t});\n\t\t\t},\n\n\t\t\tadjustUpdateMessage(e)\n\t\t\t{\n\t\t\t\tthis.updateMessage(e);\n\n\t\t\t\tif(!this.isHasLink())\n\t\t\t\t{\n\t\t\t\t\tthis.showErrorHasLink(e)\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.saveSmsTemplate(this.text);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tonPressKey(e)\n\t\t\t{\n\t\t\t\tif(e.code === \"Enter\")\n\t\t\t\t{\n\n\t\t\t\t\tthis.adjustUpdateMessage(e);\n\t\t\t\t\tthis.afterPressKey(e);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tonBlur(e)\n\t\t\t{\n\t\t\t\tthis.beforeBlur();\n\t\t\t\tthis.adjustUpdateMessage(e);\n\t\t\t},\n\n\t\t\tafterPressKey(e)\n\t\t\t{\n\t\t\t\tthis.$emit('edit-on-after-press-key', e);\n\t\t\t},\n\n\t\t\tbeforeBlur(e)\n\t\t\t{\n\t\t\t\tthis.$emit('edit-on-before-blur', e);\n\t\t\t},\n\n\t\t\tshowErrorHasLink(e)\n\t\t\t{\n\t\t\t\tthis.$emit('edit-on-has-link-error', e);\n\n\t\t\t}\n\t\t},\n\ttemplate: `\n\n\t\t<div \n\t\t\tcontenteditable=\"true\"\t\n\t\t\t:class=\"classObject\"\n\t\t\t@blur=\"onBlur($event)\"\n\t\t\t@keydown=\"onPressKey($event)\"\n\t\t>{{text}}\n</div>\n\n\t`\n};\n\nexport {\n\tMessageEdit\n}","import {Text} from 'main.core';\n\nconst MessageView = {\n\tprops: {\n\t\ttext: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\torderPublicUrl: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t}\n\t},\n\tcomputed:\n\t\t{\n\t\t\tclassObject()\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\t'salescenter-app-payment-by-sms-item-container-sms-content-message-text': true,\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\tmethods:\n\t\t{\n\t\t\tonMouseenter(e)\n\t\t\t{\n\t\t\t\tthis.$emit('view-on-mouseenter', e);\n\t\t\t},\n\t\t\tonMouseleave()\n\t\t\t{\n\t\t\t\tthis.$emit('view-on-mouseleave');\n\t\t\t},\n\n\t\t\tgetSmsMessage()\n\t\t\t{\n\t\t\t\tlet link = `<span class=\"salescenter-app-payment-by-sms-item-container-sms-content-message-link\">${this.orderPublicUrl}</span><span class=\"salescenter-app-payment-by-sms-item-container-sms-content-message-link-ref\">xxxxx</span>` + ` `;\n\t\t\t\tlet text = this.text;\n\n\t\t\t\treturn Text.encode(text).replace(/#LINK#/g, link);\n\t\t\t},\n\t\t},\n\ttemplate: `\n\t\t<div \n\t\t\tv-html=\"getSmsMessage()\"\n\t\t\tcontenteditable=\"false\" \n\t\t\t:class=\"classObject\" \n\t\t\tv-on:mouseenter=\"onMouseenter($event)\" \n\t\t\tv-on:mouseleave=\"onMouseleave\"\n\t\t/>\n\t`\n};\n\nexport {\n\tMessageView\n}","import {Popup} from 'main.popup';\nimport {Loc} from 'main.core';\nimport {MessageEdit} from \"./message-edit\";\nimport {MessageView} from \"./message-view\";\nimport {MessageControl} from \"./message-control\";\n\nconst MODE_VIEW = 'view';\nconst MODE_EDIT = 'edit';\n\nconst MessageEditor = {\n\tprops: {\n\t\teditor: {\n\t\t\ttype: Object,\n\t\t\trequired: true\n\t\t},\n\t\tisReadOnly: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tselectedMode: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata()\n\t{\n\t\treturn {\n\t\t\tmode: MODE_VIEW,\n\t\t\ttext: this.editor.template,\n\t\t\thasError: false,\n\t\t\torderPublicUrl: this.editor.url,\n\t\t\tsmsEditMessageMode: false\n\t\t}\n\t},\n\tcomponents:\n\t{\n\t\t'sms-message-edit-block'\t:\tMessageEdit,\n\t\t'sms-message-view-block'\t:\tMessageView,\n\t\t'sms-message-control-block'\t:\tMessageControl,\n\t},\n\tcomputed:\n\t{\n\t\tgetMode()\n\t\t{\n\t\t\treturn this.mode;\n\t\t},\n\n\t\tsetMode(value)\n\t\t{\n\t\t\tthis.mode = value;\n\t\t},\n\t},\n\tmethods:\n\t{\n\t\tisEditable()\n\t\t{\n\t\t\treturn this.mode === MODE_EDIT && !this.isReadOnly;\n\t\t},\n\t\tresetError()\n\t\t{\n\t\t\tthis.hasError = false;\n\t\t},\n\n\t\t//region edit\n\t\tupdateTemplate(text)\n\t\t{\n\t\t\tthis.editor.template = text;\n\t\t\tthis.$root.$app.sendingMethodDesc.text = text;\n\t\t\tthis.$root.$app.sendingMethodDesc.text_modes[this.selectedMode] = text;\n\t\t},\n\t\tshowPopupHint(target, message, timer)\n\t\t{\n\t\t\tif(this.popup)\n\t\t\t{\n\t\t\t\tthis.popup.destroy();\n\t\t\t\tthis.popup = null;\n\t\t\t}\n\n\t\t\tif(!target && !message)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.popup = new Popup(null, target, {\n\t\t\t\tevents: {\n\t\t\t\t\tonPopupClose: () => {\n\t\t\t\t\t\tthis.popup.destroy();\n\t\t\t\t\t\tthis.popup = null;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tdarkMode: true,\n\t\t\t\tcontent: message,\n\t\t\t\toffsetLeft: target.offsetWidth,\n\t\t\t});\n\n\t\t\tif(timer)\n\t\t\t{\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.popup.destroy();\n\t\t\t\t\tthis.popup = null;\n\t\t\t\t}, timer);\n\t\t\t}\n\n\t\t\tthis.popup.show();\n\t\t},\n\t\tafterPressKey(e)\n\t\t{\n\t\t\tthis.afterSavePressKey(e);\n\t\t},\n\t\tbeforeBlur()\n\t\t{\n\t\t\tthis.hasError = false;\n\t\t},\n\t\tshowHasLinkErrorHint(e)\n\t\t{\n\t\t\tthis.hasError = true;\n\t\t},\n\t\tafterSavePressKey(e)\n\t\t{\n\t\t\tthis.reverseMode();\n\n\t\t\tif(this.hasError)\n\t\t\t{\n\t\t\t\tthis.showPopupHint(\n\t\t\t\t\te.target,\n\t\t\t\t\tLoc.getMessage('SALESCENTER_SEND_ORDER_BY_SMS_SENDER_TEMPLATE_ERROR'),\n\t\t\t\t\t2000\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tthis.resetError();\n\t\t},\n\t\t//endregion\n\n\t\t//region view\n\t\tshowSmsMessagePopupHint(e)\n\t\t{\n\t\t\tthis.showPopupHint(e.target, Loc.getMessage('SALESCENTER_SMS_MESSAGE_HINT'))\n\t\t},\n\n\t\thidePopupHint()\n\t\t{\n\t\t\tif(this.popup)\n\t\t\t{\n\t\t\t\tthis.popup.destroy();\n\t\t\t}\n\t\t},\n\t\t//endregion\n\n\t\t//region control\n\t\treverseMode()\n\t\t{\n\t\t\tthis.mode === MODE_EDIT ?\n\t\t\t\tthis.mode = MODE_VIEW :\n\t\t\t\tthis.mode = MODE_EDIT ;\n\t\t},\n\n\t\tafterSaveControl(e)\n\t\t{\n\t\t\tif(!this.hasError)\n\t\t\t{\n\t\t\t\tthis.reverseMode();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.showPopupHint(\n\t\t\t\t\te.target,\n\t\t\t\t\tLoc.getMessage('SALESCENTER_SEND_ORDER_BY_SMS_SENDER_TEMPLATE_ERROR'),\n\t\t\t\t\t2000\n\t\t\t\t);\n\t\t\t}\n\t\t},\n\t\t//endregion\n\t},\n\ttemplate: `\n\t\t<div class=\"salescenter-app-payment-by-sms-item-container-sms-content\">\n\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container-sms-content-message\">\t\n\t\t\t\t<template v-if=\"isEditable()\">\n\t\t\t\t\t<sms-message-edit-block\t\t\t\t\n\t\t\t\t\t\t:text=\"editor.template\"\n\t\t\t\t\t\t:selectedMode=\"selectedMode\"\n\t\t\t\t\t\tv-on:edit-on-before-blur=\"beforeBlur\"\n\t\t\t\t\t\tv-on:edit-on-after-press-key=\"afterPressKey\"\n\t\t\t\t\t\tv-on:edit-on-update-template=\"updateTemplate\"\n\t\t\t\t\t\tv-on:edit-on-has-link-error=\"showHasLinkErrorHint\"\n\t\t\t\t\t/>\n\t\t\t\t</template> \n\t\t\t\t<template v-else>\n\t\t\t\t\t<sms-message-view-block\n\t\t\t\t\t\t:text=\"editor.template\"\n\t\t\t\t\t\t:orderPublicUrl=\"orderPublicUrl\"\n\t\t\t\t\t\tv-on:view-on-mouseenter=\"showSmsMessagePopupHint\"\n\t\t\t\t\t\tv-on:view-on-mouseleave=\"hidePopupHint\"\n\t\t\t\t\t/>\n\t\t\t\t</template>\n\t\t\t\t<sms-message-control-block v-if=\"!isReadOnly\"\n\t\t\t\t\t:editable=\"isEditable()\"\n\t\t\t\t\tv-on:control-on-save=\"afterSaveControl\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t`\n};\n\nexport {\n\tMessageEditor\n}\n","import {PopupMenuWindow} from 'main.popup';\nimport {Manager} from 'salescenter.manager';\nimport {Vue} from \"ui.vue\";\n\nconst SenderList = {\n\tprops: [\n\t\t'list',\n\t\t'initSelected',\n\t\t'settingUrl'\n\t],\n\tcomputed: {\n\t\tselectedSender()\n\t\t{\n\t\t\treturn this.list.find(sender => sender.id === this.selected);\n\t\t},\n\t\tselectedSenderName()\n\t\t{\n\t\t\treturn this.selectedSender ? this.selectedSender.name : '';\n\t\t},\n\t\tlocalize()\n\t\t{\n\t\t\treturn Vue.getFilteredPhrases('SALESCENTER_SENDER_LIST_CONTENT_');\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tselected: null,\n\t\t};\n\t},\n\tcreated() {\n\t\tif (this.initSelected)\n\t\t{\n\t\t\tthis.onSelectedSender(this.initSelected);\n\t\t}\n\t\telse if (this.list && this.list.length > 0)\n\t\t{\n\t\t\tthis.onSelectedSender(this.list[0].id);\n\t\t}\n\t},\n\tmethods: {\n\t\topenSlider()\n\t\t{\n\t\t\tManager.openSlider(this.settingUrl).then(() => this.onConfigure());\n\t\t},\n\t\tonConfigure()\n\t\t{\n\t\t\tthis.$emit('on-configure');\n\t\t},\n\t\tonSelectedSender(value)\n\t\t{\n\t\t\tthis.selected = value;\n\t\t\tthis.$emit('on-selected', value);\n\t\t},\n\t\trender(target, array)\n\t\t{\n\t\t\tlet menuItems = [];\n\t\t\tlet setItem = (ev) => {\n\t\t\t\ttarget.innerHTML = ev.target.innerHTML;\n\t\t\t\tthis.onSelectedSender(ev.currentTarget.getAttribute('data-item-sender-value'));\n\t\t\t\tthis.popupMenu.close();\n\t\t\t};\n\n\t\t\tfor (let index in array)\n\t\t\t{\n\t\t\t\tif (!array.hasOwnProperty(index))\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tmenuItems.push({\n\t\t\t\t\ttext: array[index].name,\n\t\t\t\t\tdataset: {\n\t\t\t\t\t\t'itemSenderValue' : array[index].id\n\t\t\t\t\t},\n\t\t\t\t\tonclick: setItem\n\t\t\t\t})\n\t\t\t}\n\n\t\t\tmenuItems.push({\n\t\t\t\ttext: this.localize.SALESCENTER_SENDER_LIST_CONTENT_SETTINGS,\n\t\t\t\tonclick: ()=>{\n\t\t\t\t\tthis.openSlider();\n\t\t\t\t\tthis.popupMenu.close();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.popupMenu = new PopupMenuWindow({\n\t\t\t\tbindElement: target,\n\t\t\t\titems: menuItems,\n\t\t\t});\n\n\t\t\tthis.popupMenu.show();\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"salescenter-app-payment-by-sms-item-container-sms-content-info\">\n\t\t\t<slot name=\"sms-sender-list-text-send-from\"></slot>\n\t\t\t<span @click=\"render($event.target, list)\">{{selectedSenderName}}</span>\n\t\t</div>\n\t`\n};\n\nexport {\n\tSenderList\n}\n","const UserAvatar = {\n\tprops: {\n\t\tmanager: {\n\t\t\ttype: Object,\n\t\t\trequired: true\n\t\t},\n\t},\n\n\tcomputed:\n\t{\n\t\tavatarStyle()\n\t\t{\n\t\t\tlet url = this.manager.photo ? { 'background-image': 'url(' + this.manager.photo + ')'} : null ;\n\n\t\t\treturn [url];\n\t\t}\n\t},\n\n\ttemplate: `\n\t\t<div class=\"salescenter-app-payment-by-sms-item-container-sms-user\">\n\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container-sms-user-avatar\" :style=\"avatarStyle\"></div>\n\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container-sms-user-name\">{{manager.name}}</div>\n\t\t</div>\n\t`\n};\n\nexport {\n\tUserAvatar\n}"],"names":["Error","props","error","type","Object","required","methods","openSlider","fixer","then","onConfigure","data","$emit","BaseEvent","template","MessageControl","editable","Boolean","computed","classObject","onSave","e","MessageEdit","text","String","selectedMode","updateMessage","target","innerText","isHasLink","match","saveSmsTemplate","smsText","BX","ajax","runComponentAction","mode","smsTemplate","analyticsLabel","response","errorMessage","errors","map","err","message","join","alert","adjustUpdateMessage","showErrorHasLink","onPressKey","code","afterPressKey","onBlur","beforeBlur","MessageView","orderPublicUrl","onMouseenter","onMouseleave","getSmsMessage","link","Text","encode","replace","MODE_VIEW","MODE_EDIT","MessageEditor","editor","isReadOnly","hasError","url","smsEditMessageMode","components","getMode","setMode","value","isEditable","resetError","updateTemplate","$root","$app","sendingMethodDesc","text_modes","showPopupHint","timer","popup","destroy","Popup","events","onPopupClose","darkMode","content","offsetLeft","offsetWidth","setTimeout","show","afterSavePressKey","showHasLinkErrorHint","reverseMode","Loc","getMessage","showSmsMessagePopupHint","hidePopupHint","afterSaveControl","SenderList","selectedSender","list","find","sender","id","selected","selectedSenderName","name","localize","Vue","getFilteredPhrases","created","initSelected","onSelectedSender","length","Manager","settingUrl","render","array","menuItems","setItem","ev","innerHTML","currentTarget","getAttribute","popupMenu","close","index","hasOwnProperty","push","dataset","onclick","SALESCENTER_SENDER_LIST_CONTENT_SETTINGS","PopupMenuWindow","bindElement","items","UserAvatar","manager","avatarStyle","photo"],"mappings":"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"}