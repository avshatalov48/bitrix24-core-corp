{"version":3,"file":"store-settings.bundle.js","sources":["../src/store-settings.js"],"sourcesContent":["import {Vue} from 'ui.vue';\nimport {rest as Rest} from 'rest.client';\nimport {Manager} from 'salescenter.manager';\nimport {PopupMenuWindow} from 'main.popup';\nimport {Text} from 'main.core';\n\nimport {PreviewBlock} from 'salescenter.component.store-preview';\nimport {RequisiteBlock} from 'salescenter.component.mycompany-requisite-settings';\n\nimport 'ui.design-tokens';\nimport 'ui.fonts.opensans';\nimport './store-settings.css';\n\n\nexport class StoreSettings\n{\n\tconstructor(containerId, parameters)\n\t{\n\t\tparameters = parameters || {};\n\t\tlet data = {};\n\t\tdata.companyId = BX.prop.get(parameters, \"companyId\", 0);\n\t\tdata.companyTitle = BX.prop.get(parameters, \"companyTitle\", '');\n\t\tdata.previewLang = BX.prop.get(parameters, \"previewLang\", '');\n\t\tdata.companyPhone = '';\n\t\tdata.phoneIdSelected = BX.prop.get(parameters, \"phoneIdSelected\", 0);\n\t\tdata.companyPhoneList = BX.prop.get(parameters, \"companyPhoneList\", '');\n\t\tdata.phoneValueSelected = BX.prop.get(parameters, \"phoneValueSelected\", '');\n\t\tdata.originPhoneIdSelected = BX.prop.get(parameters, \"phoneIdSelected\", 0);\n\n\t\tthis.componentName = 'bitrix:salescenter.company.contacts';\n\t\tthis.slider = BX.SidePanel.Instance.getTopSlider();\n\n\t\tconst context = this;\n\n\t\tVue.create({\n\t\t\tel: '#' + containerId,\n\t\t\tdata: data,\n\t\t\tcomponents: {\n\t\t\t\t'my-company-requisite-block': RequisiteBlock,\n\t\t\t\t'store-preview-block': PreviewBlock,\n\t\t\t},\n\t\t\tcomputed:\n\t\t\t\t{\n\t\t\t\t\tloc() {\n\t\t\t\t\t\treturn Vue.getFilteredPhrases('SC_STORE_SETTINGS_')\n\t\t\t\t\t},\n\t\t\t\t\tisNew()\n\t\t\t\t\t{\n\t\t\t\t\t\treturn (this.companyId === undefined || parseInt(this.companyId)<=0);\n\t\t\t\t\t},\n\t\t\t\t\tgetPhonesList()\n\t\t\t\t\t{\n\t\t\t\t\t\treturn BX.type.isArray(this.companyPhoneList) ? this.companyPhoneList:[];\n\t\t\t\t\t},\n\t\t\t\t\tgetSelectedPhoneId()\n\t\t\t\t\t{\n\t\t\t\t\t\treturn parseInt(this.phoneIdSelected)>0 ? this.phoneIdSelected:0;\n\t\t\t\t\t},\n\t\t\t\t\tgetSelectedPhoneValue()\n\t\t\t\t\t{\n\t\t\t\t\t\treturn this.phoneValueSelected === '' ? this.loc.SC_STORE_SETTINGS_COMPANY_PHONE_DEFAULT:this.phoneValueSelected;\n\t\t\t\t\t},\n\t\t\t\t\tgetSelectedPhoneNumber()\n\t\t\t\t\t{\n\t\t\t\t\t\tlet phones = this.getPhonesList;\n\t\t\t\t\t\tlet number = '';\n\t\t\t\t\t\tif (phones.length > 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tphones.forEach(item => {\n\t\t\t\t\t\t\t\tif(item.id === this.getSelectedPhoneId)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tnumber = item.value;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn number\n\t\t\t\t\t},\n\t\t\t\t\tgetOriginSelectedPhoneId()\n\t\t\t\t\t{\n\t\t\t\t\t\tlet phones = this.getPhonesList;\n\t\t\t\t\t\tlet id = 0;\n\t\t\t\t\t\tif (phones.length > 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tphones.forEach(item => {\n\t\t\t\t\t\t\t\tif(item.id === this.originPhoneIdSelected)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tid = item.id;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn id;\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\tcreated()\n\t\t\t{\n\t\t\t\tthis.$app = context;\n\t\t\t},\n\t\t\tmounted()\n\t\t\t{\n\t\t\t\tBX.UI.Hint.init(BX('salescenter-company-contacts-wrapper'));\n\t\t\t},\n\t\t\tmethods:\n\t\t\t\t{\n\t\t\t\t\trequisiteOpenSlider(e)\n\t\t\t\t\t{\n\t\t\t\t\t\tlet url = '/crm/company/details/'+ this.companyId +'/?init_mode=edit';\n\t\t\t\t\t\tManager.openSlider(url).then(() => this.refresh());\n\t\t\t\t\t},\n\t\t\t\t\tshowPopupMenu(e)\n\t\t\t\t\t{\n\t\t\t\t\t\tlet phoneItems = [];\n\t\t\t\t\t\tlet setItem = (ev, data) => {\n\t\t\t\t\t\t\tthis.phoneIdSelected = data.id;\n\t\t\t\t\t\t\tthis.popupMenu.close()};\n\n\t\t\t\t\t\tlet phones = this.getPhonesList;\n\n\t\t\t\t\t\tif (phones.length > 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tphoneItems.push(\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttext: this.loc.SC_STORE_SETTINGS_COMPANY_PHONE_DEFAULT,\n\t\t\t\t\t\t\t\t\tid: '0',\n\t\t\t\t\t\t\t\t\tonclick: setItem.bind(this)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tphoneItems.push(\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttext: this.loc.SC_STORE_SETTINGS_COMPANY_PHONE_DELIMETER,\n\t\t\t\t\t\t\t\t\tid: '-1',\n\t\t\t\t\t\t\t\t\tdelimiter: true,\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\tphones.forEach(item => {\n\t\t\t\t\t\t\t\tphoneItems.push(\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\ttext: Text.encode(item.value),\n\t\t\t\t\t\t\t\t\t\tid: item.id,\n\t\t\t\t\t\t\t\t\t\tonclick: setItem.bind(this)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.popupMenu = new PopupMenuWindow({\n\t\t\t\t\t\t\tbindElement: e.target,\n\t\t\t\t\t\t\tminWidth: e.target.offsetWidth,\n\t\t\t\t\t\t\titems: phoneItems\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tthis.popupMenu.show();\n\t\t\t\t\t},\n\t\t\t\t\treset()\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.companyPhoneList = [];\n\t\t\t\t\t\tthis.phoneIdSelected = 0;\n\t\t\t\t\t\tthis.companyTitle = '';\n\t\t\t\t\t},\n\t\t\t\t\trefresh()\n\t\t\t\t\t{\n\t\t\t\t\t\tRest.callMethod('crm.company.get',{\n\t\t\t\t\t\t\tid:this.companyId\n\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.then((result) => {\n\t\t\t\t\t\t\t\tlet answer = result.data();\n\n\t\t\t\t\t\t\t\tthis.reset();\n\n\t\t\t\t\t\t\t\tthis.companyTitle = BX.prop.get(answer, \"TITLE\", '');\n\n\t\t\t\t\t\t\t\tlet phones = BX.prop.get(answer, \"PHONE\", []);\n\n\t\t\t\t\t\t\t\tif (BX.type.isObject(phones) && Object.values(phones).length > 0)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tObject.values(phones).forEach(item => {\n\t\t\t\t\t\t\t\t\t\tthis.companyPhoneList.push({\n\t\t\t\t\t\t\t\t\t\t\tid: item.ID,\n\t\t\t\t\t\t\t\t\t\t\tvalue: item.VALUE\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tthis.phoneIdSelected = this.getOriginSelectedPhoneId;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\tsave()\n\t\t\t\t\t{\n\t\t\t\t\t\tif(this.isNew)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.addCompany();\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.updateCompany();\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tupdateCompany()\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$app.query(\n\t\t\t\t\t\t\t'updateCompanyContacts',\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: this.companyId,\n\t\t\t\t\t\t\t\tfields:{\n\t\t\t\t\t\t\t\t\ttitle: this.companyTitle,\n\t\t\t\t\t\t\t\t\tphoneIdSelected: this.phoneIdSelected\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t'salescenterContactsCompanyUpdate'\n\t\t\t\t\t\t)\n\t\t\t\t\t\t\t.then((response) => {\n\t\t\t\t\t\t\t\tthis.$app.closeApplication();\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.catch((result) => {\n\t\t\t\t\t\t\t\tlet errors = BX.prop.getArray(result, \"errors\", []);\n\t\t\t\t\t\t\t\tif (BX.type.isArray(errors) && errors.length > 0)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tlet error = BX.prop.get(errors[0], 'message','');\n\t\t\t\t\t\t\t\t\tManager.showNotification(error);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\taddCompany()\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$app.query(\n\t\t\t\t\t\t\t'saveCompanyContacts',\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tfields:{\n\t\t\t\t\t\t\t\t\ttitle: this.companyTitle,\n\t\t\t\t\t\t\t\t\tphone: this.companyPhone,\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t'salescenterContactsCompanyAdd'\n\t\t\t\t\t\t)\n\t\t\t\t\t\t\t.then((response) => {\n\t\t\t\t\t\t\t\tthis.$app.closeApplication();\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.catch((result) => {\n\t\t\t\t\t\t\t\tlet errors = BX.prop.getArray(result, \"errors\", []);\n\t\t\t\t\t\t\t\tif (BX.type.isArray(errors) && errors.length > 0)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tlet error = BX.prop.get(errors[0], 'message','');\n\t\t\t\t\t\t\t\t\tManager.showNotification(error);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\tclose()\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$app.closeApplication();\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\twatch:\n\t\t\t\t{\n\t\t\t\t\tphoneIdSelected()\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.phoneValueSelected = this.getSelectedPhoneNumber;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\ttemplate: `   \n\t\t\t\t<div class=\"salescenter-company-contacts-wrapper\" id=\"salescenter-company-contacts-wrapper\">\n\t\t\t\t\t<div class=\"salescenter-company-contacts-item\">\n\t\t\t\t\t\t<div class=\"salescenter-company-contacts-area\">\n\t\t\t\t\t\t\t<div class=\"salescenter-company-contacts-area-item\">\n\t\t\t\t\t\t\t\t<div class=\"ui-ctl-label-text\">\n\t\t\t\t\t\t\t\t\t{{loc.SC_STORE_SETTINGS_COMPANY_NAME}}\n\t\t\t\t\t\t\t\t\t<span class=\"ui-hint\" :data-hint=\"loc.SC_STORE_SETTINGS_COMPANY_NAME_HINT\"></span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-textbox ui-ctl-w100\">\n\t\t\t\t\t\t\t\t\t<input type=\"text\" class=\"ui-ctl-element\" name=\"name\" v-model=\"companyTitle\">\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t<div class=\"salescenter-company-contacts-area-item\">\n\t\t\t\t\t\t\t\t<div class=\"ui-ctl-label-text\">{{loc.SC_STORE_SETTINGS_COMPANY_PHONE_NUMBER}}</div>\n\t\t\t\t\t\t\t\t<template v-if=\"isNew\">\n\t\t\t\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-textbox ui-ctl-w100\">\n\t\t\t\t\t\t\t\t\t\t<input type=\"text\" class=\"ui-ctl-element\" name=\"phone\" v-model=\"companyPhone\">\n\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t\t\t\t<template v-if=\"getPhonesList.length === 0\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"salescenter-company-contacts-text\">{{loc.SC_STORE_SETTINGS_COMPANY_PHONE_EMPTY}}<a href=\"javascript:void(0)\" @click=\"requisiteOpenSlider()\">{{loc.SC_STORE_SETTINGS_COMPANY_PHONE_ADD}}</a></div>\n\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-after-icon ui-ctl-w100 ui-ctl-dropdown salescenter-company-contacts-area-item-input\" @click=\"showPopupMenu($event)\">\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"ui-ctl-element\">{{this.getSelectedPhoneValue}}</div>\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"ui-ctl-after ui-ctl-icon-angle\"></div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"salescenter-company-contacts-controls\">\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"salescenter-company-contacts-link\" @click=\"requisiteOpenSlider()\">{{loc.SC_STORE_SETTINGS_COMPANY_PHONE_ADD_SMALL}}</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<my-company-requisite-block \n\t\t\t\t\t\t\t:isNewCompany=\"isNew\"\n\t\t\t\t\t\t\t:companyId=\"companyId\"\n\t\t\t\t\t\t\tv-on:on-mycompany-requisite-settings=\"refresh\"/>\n\t\t\t\t\t\t<div class=\"salescenter-company-contacts-panel\">\n\t\t\t\t\t\t\t<button class=\"ui-btn ui-btn-md ui-btn-success\" @click=\"save\">{{loc.SC_STORE_SETTINGS_SAVE}}</button>\n\t\t\t\t\t\t\t<button class=\"ui-btn ui-btn-md ui-btn-link\" @click=\"close\">{{loc.SC_STORE_SETTINGS_CANCEL}}</button> \n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<store-preview-block :options=\"{lang: this.previewLang}\"/>\n\t\t\t</div>`,\n\t\t});\n\t}\n\n\tquery(action, data, analyticsLabel)\n\t{\n\t\tlet result;\n\t\tresult = BX.ajax.runComponentAction(this.componentName, action, {\n\t\t\tmode: 'class',\n\t\t\tdata: data,\n\t\t\tanalyticsLabel: analyticsLabel\n\t\t});\n\n\n\t\treturn result;\n\t}\n\n\tcloseApplication()\n\t{\n\t\tif(this.slider)\n\t\t{\n\t\t\tthis.slider.close();\n\t\t}\n\t}\n\n\tstatic showNotification(message)\n\t{\n\t\tif(!message)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tBX.loadExt('ui.notification').then(() =>\n\t\t{\n\t\t\tBX.UI.Notification.Center.notify({\n\t\t\t\tcontent: message\n\t\t\t});\n\t\t});\n\t}\n\n}"],"names":["StoreSettings","containerId","parameters","data","companyId","BX","prop","get","companyTitle","previewLang","companyPhone","phoneIdSelected","companyPhoneList","phoneValueSelected","originPhoneIdSelected","componentName","slider","SidePanel","Instance","getTopSlider","context","Vue","create","el","components","RequisiteBlock","PreviewBlock","computed","loc","getFilteredPhrases","isNew","undefined","parseInt","getPhonesList","type","isArray","getSelectedPhoneId","getSelectedPhoneValue","SC_STORE_SETTINGS_COMPANY_PHONE_DEFAULT","getSelectedPhoneNumber","phones","number","length","forEach","item","id","value","getOriginSelectedPhoneId","created","$app","mounted","UI","Hint","init","methods","requisiteOpenSlider","e","url","Manager","openSlider","then","refresh","showPopupMenu","phoneItems","setItem","ev","popupMenu","close","push","text","onclick","bind","SC_STORE_SETTINGS_COMPANY_PHONE_DELIMETER","delimiter","Text","encode","PopupMenuWindow","bindElement","target","minWidth","offsetWidth","items","show","reset","Rest","callMethod","result","answer","isObject","Object","values","ID","VALUE","save","addCompany","updateCompany","query","fields","title","response","closeApplication","errors","getArray","error","showNotification","phone","watch","template","action","analyticsLabel","ajax","runComponentAction","mode","message","loadExt","Notification","Center","notify","content"],"mappings":";;;;;QAcaA,aAAb;IAEC,yBAAYC,WAAZ,EAAyBC,UAAzB,EACA;IAAA;IACCA,IAAAA,UAAU,GAAGA,UAAU,IAAI,EAA3B;IACA,QAAIC,IAAI,GAAG,EAAX;IACAA,IAAAA,IAAI,CAACC,SAAL,GAAiBC,EAAE,CAACC,IAAH,CAAQC,GAAR,CAAYL,UAAZ,EAAwB,WAAxB,EAAqC,CAArC,CAAjB;IACAC,IAAAA,IAAI,CAACK,YAAL,GAAoBH,EAAE,CAACC,IAAH,CAAQC,GAAR,CAAYL,UAAZ,EAAwB,cAAxB,EAAwC,EAAxC,CAApB;IACAC,IAAAA,IAAI,CAACM,WAAL,GAAmBJ,EAAE,CAACC,IAAH,CAAQC,GAAR,CAAYL,UAAZ,EAAwB,aAAxB,EAAuC,EAAvC,CAAnB;IACAC,IAAAA,IAAI,CAACO,YAAL,GAAoB,EAApB;IACAP,IAAAA,IAAI,CAACQ,eAAL,GAAuBN,EAAE,CAACC,IAAH,CAAQC,GAAR,CAAYL,UAAZ,EAAwB,iBAAxB,EAA2C,CAA3C,CAAvB;IACAC,IAAAA,IAAI,CAACS,gBAAL,GAAwBP,EAAE,CAACC,IAAH,CAAQC,GAAR,CAAYL,UAAZ,EAAwB,kBAAxB,EAA4C,EAA5C,CAAxB;IACAC,IAAAA,IAAI,CAACU,kBAAL,GAA0BR,EAAE,CAACC,IAAH,CAAQC,GAAR,CAAYL,UAAZ,EAAwB,oBAAxB,EAA8C,EAA9C,CAA1B;IACAC,IAAAA,IAAI,CAACW,qBAAL,GAA6BT,EAAE,CAACC,IAAH,CAAQC,GAAR,CAAYL,UAAZ,EAAwB,iBAAxB,EAA2C,CAA3C,CAA7B;IAEA,SAAKa,aAAL,GAAqB,qCAArB;IACA,SAAKC,MAAL,GAAcX,EAAE,CAACY,SAAH,CAAaC,QAAb,CAAsBC,YAAtB,EAAd;IAEA,QAAMC,OAAO,GAAG,IAAhB;IAEAC,IAAAA,UAAG,CAACC,MAAJ,CAAW;IACVC,MAAAA,EAAE,EAAE,MAAMtB,WADA;IAEVE,MAAAA,IAAI,EAAEA,IAFI;IAGVqB,MAAAA,UAAU,EAAE;IACX,sCAA8BC,+DADnB;IAEX,+BAAuBC;IAFZ,OAHF;IAOVC,MAAAA,QAAQ,EACP;IACCC,QAAAA,GADD,iBACO;IACL,iBAAOP,UAAG,CAACQ,kBAAJ,CAAuB,oBAAvB,CAAP;IACA,SAHF;IAICC,QAAAA,KAJD,mBAKC;IACC,iBAAQ,KAAK1B,SAAL,KAAmB2B,SAAnB,IAAgCC,QAAQ,CAAC,KAAK5B,SAAN,CAAR,IAA0B,CAAlE;IACA,SAPF;IAQC6B,QAAAA,aARD,2BASC;IACC,iBAAO5B,EAAE,CAAC6B,IAAH,CAAQC,OAAR,CAAgB,KAAKvB,gBAArB,IAAyC,KAAKA,gBAA9C,GAA+D,EAAtE;IACA,SAXF;IAYCwB,QAAAA,kBAZD,gCAaC;IACC,iBAAOJ,QAAQ,CAAC,KAAKrB,eAAN,CAAR,GAA+B,CAA/B,GAAmC,KAAKA,eAAxC,GAAwD,CAA/D;IACA,SAfF;IAgBC0B,QAAAA,qBAhBD,mCAiBC;IACC,iBAAO,KAAKxB,kBAAL,KAA4B,EAA5B,GAAiC,KAAKe,GAAL,CAASU,uCAA1C,GAAkF,KAAKzB,kBAA9F;IACA,SAnBF;IAoBC0B,QAAAA,sBApBD,oCAqBC;IAAA;;IACC,cAAIC,MAAM,GAAG,KAAKP,aAAlB;IACA,cAAIQ,MAAM,GAAG,EAAb;;IACA,cAAID,MAAM,CAACE,MAAP,GAAgB,CAApB,EACA;IACCF,YAAAA,MAAM,CAACG,OAAP,CAAe,UAAAC,IAAI,EAAI;IACtB,kBAAGA,IAAI,CAACC,EAAL,KAAY,KAAI,CAACT,kBAApB,EACA;IACCK,gBAAAA,MAAM,GAAGG,IAAI,CAACE,KAAd;IACA;IACD,aALD;IAMA;;IACD,iBAAOL,MAAP;IACA,SAlCF;IAmCCM,QAAAA,wBAnCD,sCAoCC;IAAA;;IACC,cAAIP,MAAM,GAAG,KAAKP,aAAlB;IACA,cAAIY,EAAE,GAAG,CAAT;;IACA,cAAIL,MAAM,CAACE,MAAP,GAAgB,CAApB,EACA;IACCF,YAAAA,MAAM,CAACG,OAAP,CAAe,UAAAC,IAAI,EAAI;IACtB,kBAAGA,IAAI,CAACC,EAAL,KAAY,MAAI,CAAC/B,qBAApB,EACA;IACC+B,gBAAAA,EAAE,GAAGD,IAAI,CAACC,EAAV;IACA;IACD,aALD;IAMA;;IACD,iBAAOA,EAAP;IACA;IAjDF,OARS;IA2DVG,MAAAA,OA3DU,qBA4DV;IACC,aAAKC,IAAL,GAAY7B,OAAZ;IACA,OA9DS;IA+DV8B,MAAAA,OA/DU,qBAgEV;IACC7C,QAAAA,EAAE,CAAC8C,EAAH,CAAMC,IAAN,CAAWC,IAAX,CAAgBhD,EAAE,CAAC,sCAAD,CAAlB;IACA,OAlES;IAmEViD,MAAAA,OAAO,EACN;IACCC,QAAAA,mBADD,+BACqBC,CADrB,EAEC;IAAA;;IACC,cAAIC,GAAG,GAAG,0BAAyB,KAAKrD,SAA9B,GAAyC,kBAAnD;IACAsD,UAAAA,2BAAO,CAACC,UAAR,CAAmBF,GAAnB,EAAwBG,IAAxB,CAA6B;IAAA,mBAAM,MAAI,CAACC,OAAL,EAAN;IAAA,WAA7B;IACA,SALF;IAMCC,QAAAA,aAND,yBAMeN,CANf,EAOC;IAAA;;IACC,cAAIO,UAAU,GAAG,EAAjB;;IACA,cAAIC,OAAO,GAAG,SAAVA,OAAU,CAACC,EAAD,EAAK9D,IAAL,EAAc;IAC3B,YAAA,MAAI,CAACQ,eAAL,GAAuBR,IAAI,CAAC0C,EAA5B;;IACA,YAAA,MAAI,CAACqB,SAAL,CAAeC,KAAf;IAAuB,WAFxB;;IAIA,cAAI3B,MAAM,GAAG,KAAKP,aAAlB;;IAEA,cAAIO,MAAM,CAACE,MAAP,GAAgB,CAApB,EACA;IACCqB,YAAAA,UAAU,CAACK,IAAX,CACC;IACCC,cAAAA,IAAI,EAAE,KAAKzC,GAAL,CAASU,uCADhB;IAECO,cAAAA,EAAE,EAAE,GAFL;IAGCyB,cAAAA,OAAO,EAAEN,OAAO,CAACO,IAAR,CAAa,IAAb;IAHV,aADD;IAOAR,YAAAA,UAAU,CAACK,IAAX,CACC;IACCC,cAAAA,IAAI,EAAE,KAAKzC,GAAL,CAAS4C,yCADhB;IAEC3B,cAAAA,EAAE,EAAE,IAFL;IAGC4B,cAAAA,SAAS,EAAE;IAHZ,aADD;IAQAjC,YAAAA,MAAM,CAACG,OAAP,CAAe,UAAAC,IAAI,EAAI;IACtBmB,cAAAA,UAAU,CAACK,IAAX,CACC;IACCC,gBAAAA,IAAI,EAAEK,cAAI,CAACC,MAAL,CAAY/B,IAAI,CAACE,KAAjB,CADP;IAECD,gBAAAA,EAAE,EAAED,IAAI,CAACC,EAFV;IAGCyB,gBAAAA,OAAO,EAAEN,OAAO,CAACO,IAAR,CAAa,MAAb;IAHV,eADD;IAOA,aARD;IASA;;IAED,eAAKL,SAAL,GAAiB,IAAIU,0BAAJ,CAAoB;IACpCC,YAAAA,WAAW,EAAErB,CAAC,CAACsB,MADqB;IAEpCC,YAAAA,QAAQ,EAAEvB,CAAC,CAACsB,MAAF,CAASE,WAFiB;IAGpCC,YAAAA,KAAK,EAAElB;IAH6B,WAApB,CAAjB;IAMA,eAAKG,SAAL,CAAegB,IAAf;IACA,SAlDF;IAmDCC,QAAAA,KAnDD,mBAoDC;IACC,eAAKvE,gBAAL,GAAwB,EAAxB;IACA,eAAKD,eAAL,GAAuB,CAAvB;IACA,eAAKH,YAAL,GAAoB,EAApB;IACA,SAxDF;IAyDCqD,QAAAA,OAzDD,qBA0DC;IAAA;;IACCuB,UAAAA,gBAAI,CAACC,UAAL,CAAgB,iBAAhB,EAAkC;IACjCxC,YAAAA,EAAE,EAAC,KAAKzC;IADyB,WAAlC,EAGEwD,IAHF,CAGO,UAAC0B,MAAD,EAAY;IACjB,gBAAIC,MAAM,GAAGD,MAAM,CAACnF,IAAP,EAAb;;IAEA,YAAA,MAAI,CAACgF,KAAL;;IAEA,YAAA,MAAI,CAAC3E,YAAL,GAAoBH,EAAE,CAACC,IAAH,CAAQC,GAAR,CAAYgF,MAAZ,EAAoB,OAApB,EAA6B,EAA7B,CAApB;IAEA,gBAAI/C,MAAM,GAAGnC,EAAE,CAACC,IAAH,CAAQC,GAAR,CAAYgF,MAAZ,EAAoB,OAApB,EAA6B,EAA7B,CAAb;;IAEA,gBAAIlF,EAAE,CAAC6B,IAAH,CAAQsD,QAAR,CAAiBhD,MAAjB,KAA4BiD,MAAM,CAACC,MAAP,CAAclD,MAAd,EAAsBE,MAAtB,GAA+B,CAA/D,EACA;IACC+C,cAAAA,MAAM,CAACC,MAAP,CAAclD,MAAd,EAAsBG,OAAtB,CAA8B,UAAAC,IAAI,EAAI;IACrC,gBAAA,MAAI,CAAChC,gBAAL,CAAsBwD,IAAtB,CAA2B;IAC1BvB,kBAAAA,EAAE,EAAED,IAAI,CAAC+C,EADiB;IAE1B7C,kBAAAA,KAAK,EAAEF,IAAI,CAACgD;IAFc,iBAA3B;IAIA,eALD;IAMA;;IAED,YAAA,MAAI,CAACjF,eAAL,GAAuB,MAAI,CAACoC,wBAA5B;IACA,WAvBF;IAwBA,SAnFF;IAoFC8C,QAAAA,IApFD,kBAqFC;IACC,cAAG,KAAK/D,KAAR,EACA;IACC,iBAAKgE,UAAL;IACA,WAHD,MAKA;IACC,iBAAKC,aAAL;IACA;IACD,SA9FF;IA+FCA,QAAAA,aA/FD,2BAgGC;IAAA;;IACC,eAAK9C,IAAL,CAAU+C,KAAV,CACC,uBADD,EAEC;IACCnD,YAAAA,EAAE,EAAE,KAAKzC,SADV;IAEC6F,YAAAA,MAAM,EAAC;IACNC,cAAAA,KAAK,EAAE,KAAK1F,YADN;IAENG,cAAAA,eAAe,EAAE,KAAKA;IAFhB;IAFR,WAFD,EASC,kCATD,EAWEiD,IAXF,CAWO,UAACuC,QAAD,EAAc;IACnB,YAAA,MAAI,CAAClD,IAAL,CAAUmD,gBAAV;IACA,WAbF,WAcQ,UAACd,MAAD,EAAY;IAClB,gBAAIe,MAAM,GAAGhG,EAAE,CAACC,IAAH,CAAQgG,QAAR,CAAiBhB,MAAjB,EAAyB,QAAzB,EAAmC,EAAnC,CAAb;;IACA,gBAAIjF,EAAE,CAAC6B,IAAH,CAAQC,OAAR,CAAgBkE,MAAhB,KAA2BA,MAAM,CAAC3D,MAAP,GAAgB,CAA/C,EACA;IACC,kBAAI6D,KAAK,GAAGlG,EAAE,CAACC,IAAH,CAAQC,GAAR,CAAY8F,MAAM,CAAC,CAAD,CAAlB,EAAuB,SAAvB,EAAiC,EAAjC,CAAZ;IACA3C,cAAAA,2BAAO,CAAC8C,gBAAR,CAAyBD,KAAzB;IACA;IACD,WArBF;IAsBA,SAvHF;IAwHCT,QAAAA,UAxHD,wBAyHC;IAAA;;IACC,eAAK7C,IAAL,CAAU+C,KAAV,CACC,qBADD,EAEC;IACCC,YAAAA,MAAM,EAAC;IACNC,cAAAA,KAAK,EAAE,KAAK1F,YADN;IAENiG,cAAAA,KAAK,EAAE,KAAK/F;IAFN;IADR,WAFD,EAQC,+BARD,EAUEkD,IAVF,CAUO,UAACuC,QAAD,EAAc;IACnB,YAAA,MAAI,CAAClD,IAAL,CAAUmD,gBAAV;IACA,WAZF,WAaQ,UAACd,MAAD,EAAY;IAClB,gBAAIe,MAAM,GAAGhG,EAAE,CAACC,IAAH,CAAQgG,QAAR,CAAiBhB,MAAjB,EAAyB,QAAzB,EAAmC,EAAnC,CAAb;;IACA,gBAAIjF,EAAE,CAAC6B,IAAH,CAAQC,OAAR,CAAgBkE,MAAhB,KAA2BA,MAAM,CAAC3D,MAAP,GAAgB,CAA/C,EACA;IACC,kBAAI6D,KAAK,GAAGlG,EAAE,CAACC,IAAH,CAAQC,GAAR,CAAY8F,MAAM,CAAC,CAAD,CAAlB,EAAuB,SAAvB,EAAiC,EAAjC,CAAZ;IACA3C,cAAAA,2BAAO,CAAC8C,gBAAR,CAAyBD,KAAzB;IACA;IACD,WApBF;IAqBA,SA/IF;IAgJCpC,QAAAA,KAhJD,mBAiJC;IACC,eAAKlB,IAAL,CAAUmD,gBAAV;IACA;IAnJF,OApES;IAyNVM,MAAAA,KAAK,EACJ;IACC/F,QAAAA,eADD,6BAEC;IACC,eAAKE,kBAAL,GAA0B,KAAK0B,sBAA/B;IACA;IAJF,OA1NS;IAgOVoE,MAAAA,QAAQ;IAhOE,KAAX;IAiRA;;IArSF;IAAA;IAAA,0BAuSOC,MAvSP,EAuSezG,IAvSf,EAuSqB0G,cAvSrB,EAwSC;IACC,UAAIvB,MAAJ;IACAA,MAAAA,MAAM,GAAGjF,EAAE,CAACyG,IAAH,CAAQC,kBAAR,CAA2B,KAAKhG,aAAhC,EAA+C6F,MAA/C,EAAuD;IAC/DI,QAAAA,IAAI,EAAE,OADyD;IAE/D7G,QAAAA,IAAI,EAAEA,IAFyD;IAG/D0G,QAAAA,cAAc,EAAEA;IAH+C,OAAvD,CAAT;IAOA,aAAOvB,MAAP;IACA;IAlTF;IAAA;IAAA,uCAqTC;IACC,UAAG,KAAKtE,MAAR,EACA;IACC,aAAKA,MAAL,CAAYmD,KAAZ;IACA;IACD;IA1TF;IAAA;IAAA,qCA4TyB8C,OA5TzB,EA6TC;IACC,UAAG,CAACA,OAAJ,EACA;IACC;IACA;;IACD5G,MAAAA,EAAE,CAAC6G,OAAH,CAAW,iBAAX,EAA8BtD,IAA9B,CAAmC,YACnC;IACCvD,QAAAA,EAAE,CAAC8C,EAAH,CAAMgE,YAAN,CAAmBC,MAAnB,CAA0BC,MAA1B,CAAiC;IAChCC,UAAAA,OAAO,EAAEL;IADuB,SAAjC;IAGA,OALD;IAMA;IAxUF;IAAA;IAAA;;;;;;;;"}