{"version":3,"file":"store-settings.bundle.js","sources":["../src/store-settings.js"],"sourcesContent":["import {Vue} from 'ui.vue';\nimport {rest as Rest} from 'rest.client';\nimport {Manager} from 'salescenter.manager';\nimport {PopupMenuWindow} from 'main.popup';\nimport {Text} from 'main.core';\n\nimport {PreviewBlock} from 'salescenter.component.store-preview';\nimport {RequisiteBlock} from 'salescenter.component.mycompany-requisite-settings';\n\nimport 'ui.design-tokens';\nimport 'ui.fonts.opensans';\nimport './store-settings.css';\n\n\nexport class StoreSettings\n{\n\tconstructor(containerId, parameters)\n\t{\n\t\tparameters = parameters || {};\n\t\tlet data = {};\n\t\tdata.companyId = BX.prop.get(parameters, \"companyId\", 0);\n\t\tdata.companyTitle = BX.prop.get(parameters, \"companyTitle\", '');\n\t\tdata.previewLang = BX.prop.get(parameters, \"previewLang\", '');\n\t\tdata.companyPhone = '';\n\t\tdata.phoneIdSelected = BX.prop.get(parameters, \"phoneIdSelected\", 0);\n\t\tdata.companyPhoneList = BX.prop.get(parameters, \"companyPhoneList\", '');\n\t\tdata.phoneValueSelected = BX.prop.get(parameters, \"phoneValueSelected\", '');\n\t\tdata.originPhoneIdSelected = BX.prop.get(parameters, \"phoneIdSelected\", 0);\n\n\t\tthis.componentName = 'bitrix:salescenter.company.contacts';\n\t\tthis.slider = BX.SidePanel.Instance.getTopSlider();\n\n\t\tconst context = this;\n\n\t\tVue.create({\n\t\t\tel: '#' + containerId,\n\t\t\tdata: data,\n\t\t\tcomponents: {\n\t\t\t\t'my-company-requisite-block': RequisiteBlock,\n\t\t\t\t'store-preview-block': PreviewBlock,\n\t\t\t},\n\t\t\tcomputed:\n\t\t\t\t{\n\t\t\t\t\tloc() {\n\t\t\t\t\t\treturn Vue.getFilteredPhrases('SC_STORE_SETTINGS_')\n\t\t\t\t\t},\n\t\t\t\t\tisNew()\n\t\t\t\t\t{\n\t\t\t\t\t\treturn (this.companyId === undefined || parseInt(this.companyId)<=0);\n\t\t\t\t\t},\n\t\t\t\t\tgetPhonesList()\n\t\t\t\t\t{\n\t\t\t\t\t\treturn BX.type.isArray(this.companyPhoneList) ? this.companyPhoneList:[];\n\t\t\t\t\t},\n\t\t\t\t\tgetSelectedPhoneId()\n\t\t\t\t\t{\n\t\t\t\t\t\treturn parseInt(this.phoneIdSelected)>0 ? this.phoneIdSelected:0;\n\t\t\t\t\t},\n\t\t\t\t\tgetSelectedPhoneValue()\n\t\t\t\t\t{\n\t\t\t\t\t\treturn this.phoneValueSelected === '' ? this.loc.SC_STORE_SETTINGS_COMPANY_PHONE_DEFAULT:this.phoneValueSelected;\n\t\t\t\t\t},\n\t\t\t\t\tgetSelectedPhoneNumber()\n\t\t\t\t\t{\n\t\t\t\t\t\tlet phones = this.getPhonesList;\n\t\t\t\t\t\tlet number = '';\n\t\t\t\t\t\tif (phones.length > 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tphones.forEach(item => {\n\t\t\t\t\t\t\t\tif(item.id === this.getSelectedPhoneId)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tnumber = item.value;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn number\n\t\t\t\t\t},\n\t\t\t\t\tgetOriginSelectedPhoneId()\n\t\t\t\t\t{\n\t\t\t\t\t\tlet phones = this.getPhonesList;\n\t\t\t\t\t\tlet id = 0;\n\t\t\t\t\t\tif (phones.length > 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tphones.forEach(item => {\n\t\t\t\t\t\t\t\tif(item.id === this.originPhoneIdSelected)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tid = item.id;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn id;\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\tcreated()\n\t\t\t{\n\t\t\t\tthis.$app = context;\n\t\t\t},\n\t\t\tmounted()\n\t\t\t{\n\t\t\t\tBX.UI.Hint.init(BX('salescenter-company-contacts-wrapper'));\n\t\t\t},\n\t\t\tmethods:\n\t\t\t\t{\n\t\t\t\t\trequisiteOpenSlider(e)\n\t\t\t\t\t{\n\t\t\t\t\t\tlet url = '/crm/company/details/'+ this.companyId +'/?init_mode=edit';\n\t\t\t\t\t\tManager.openSlider(url).then(() => this.refresh());\n\t\t\t\t\t},\n\t\t\t\t\tshowPopupMenu(e)\n\t\t\t\t\t{\n\t\t\t\t\t\tlet phoneItems = [];\n\t\t\t\t\t\tlet setItem = (ev, data) => {\n\t\t\t\t\t\t\tthis.phoneIdSelected = data.id;\n\t\t\t\t\t\t\tthis.popupMenu.close()};\n\n\t\t\t\t\t\tlet phones = this.getPhonesList;\n\n\t\t\t\t\t\tif (phones.length > 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tphoneItems.push(\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttext: this.loc.SC_STORE_SETTINGS_COMPANY_PHONE_DEFAULT,\n\t\t\t\t\t\t\t\t\tid: '0',\n\t\t\t\t\t\t\t\t\tonclick: setItem.bind(this)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tphoneItems.push(\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttext: this.loc.SC_STORE_SETTINGS_COMPANY_PHONE_DELIMETER,\n\t\t\t\t\t\t\t\t\tid: '-1',\n\t\t\t\t\t\t\t\t\tdelimiter: true,\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\tphones.forEach(item => {\n\t\t\t\t\t\t\t\tphoneItems.push(\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\ttext: Text.encode(item.value),\n\t\t\t\t\t\t\t\t\t\tid: item.id,\n\t\t\t\t\t\t\t\t\t\tonclick: setItem.bind(this)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.popupMenu = new PopupMenuWindow({\n\t\t\t\t\t\t\tbindElement: e.target,\n\t\t\t\t\t\t\tminWidth: e.target.offsetWidth,\n\t\t\t\t\t\t\titems: phoneItems\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tthis.popupMenu.show();\n\t\t\t\t\t},\n\t\t\t\t\treset()\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.companyPhoneList = [];\n\t\t\t\t\t\tthis.phoneIdSelected = 0;\n\t\t\t\t\t\tthis.companyTitle = '';\n\t\t\t\t\t},\n\t\t\t\t\trefresh()\n\t\t\t\t\t{\n\t\t\t\t\t\tRest.callMethod('crm.company.get',{\n\t\t\t\t\t\t\tid:this.companyId\n\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.then((result) => {\n\t\t\t\t\t\t\t\tlet answer = result.data();\n\n\t\t\t\t\t\t\t\tthis.reset();\n\n\t\t\t\t\t\t\t\tthis.companyTitle = BX.prop.get(answer, \"TITLE\", '');\n\n\t\t\t\t\t\t\t\tlet phones = BX.prop.get(answer, \"PHONE\", []);\n\n\t\t\t\t\t\t\t\tif (BX.type.isObject(phones) && Object.values(phones).length > 0)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tObject.values(phones).forEach(item => {\n\t\t\t\t\t\t\t\t\t\tthis.companyPhoneList.push({\n\t\t\t\t\t\t\t\t\t\t\tid: item.ID,\n\t\t\t\t\t\t\t\t\t\t\tvalue: item.VALUE\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tthis.phoneIdSelected = this.getOriginSelectedPhoneId;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\tsave()\n\t\t\t\t\t{\n\t\t\t\t\t\tif(this.isNew)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.addCompany();\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.updateCompany();\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tupdateCompany()\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$app.query(\n\t\t\t\t\t\t\t'updateCompanyContacts',\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: this.companyId,\n\t\t\t\t\t\t\t\tfields:{\n\t\t\t\t\t\t\t\t\ttitle: this.companyTitle,\n\t\t\t\t\t\t\t\t\tphoneIdSelected: this.phoneIdSelected\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t'salescenterContactsCompanyUpdate'\n\t\t\t\t\t\t)\n\t\t\t\t\t\t\t.then((response) => {\n\t\t\t\t\t\t\t\tthis.$app.closeApplication();\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.catch((result) => {\n\t\t\t\t\t\t\t\tlet errors = BX.prop.getArray(result, \"errors\", []);\n\t\t\t\t\t\t\t\tif (BX.type.isArray(errors) && errors.length > 0)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tlet error = BX.prop.get(errors[0], 'message','');\n\t\t\t\t\t\t\t\t\tManager.showNotification(error);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\taddCompany()\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$app.query(\n\t\t\t\t\t\t\t'saveCompanyContacts',\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tfields:{\n\t\t\t\t\t\t\t\t\ttitle: this.companyTitle,\n\t\t\t\t\t\t\t\t\tphone: this.companyPhone,\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t'salescenterContactsCompanyAdd'\n\t\t\t\t\t\t)\n\t\t\t\t\t\t\t.then((response) => {\n\t\t\t\t\t\t\t\tthis.$app.closeApplication();\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.catch((result) => {\n\t\t\t\t\t\t\t\tlet errors = BX.prop.getArray(result, \"errors\", []);\n\t\t\t\t\t\t\t\tif (BX.type.isArray(errors) && errors.length > 0)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tlet error = BX.prop.get(errors[0], 'message','');\n\t\t\t\t\t\t\t\t\tManager.showNotification(error);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\tclose()\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$app.closeApplication();\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\twatch:\n\t\t\t\t{\n\t\t\t\t\tphoneIdSelected()\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.phoneValueSelected = this.getSelectedPhoneNumber;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\ttemplate: `   \n\t\t\t\t<div class=\"salescenter-company-contacts-wrapper\" id=\"salescenter-company-contacts-wrapper\">\n\t\t\t\t\t<div class=\"salescenter-company-contacts-item\">\n\t\t\t\t\t\t<div class=\"salescenter-company-contacts-area\">\n\t\t\t\t\t\t\t<div class=\"salescenter-company-contacts-area-item\">\n\t\t\t\t\t\t\t\t<div class=\"ui-ctl-label-text\">\n\t\t\t\t\t\t\t\t\t{{loc.SC_STORE_SETTINGS_COMPANY_NAME}}\n\t\t\t\t\t\t\t\t\t<span class=\"ui-hint\" :data-hint=\"loc.SC_STORE_SETTINGS_COMPANY_NAME_HINT\"></span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-textbox ui-ctl-w100\">\n\t\t\t\t\t\t\t\t\t<input type=\"text\" class=\"ui-ctl-element\" name=\"name\" v-model=\"companyTitle\">\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t<div class=\"salescenter-company-contacts-area-item\">\n\t\t\t\t\t\t\t\t<div class=\"ui-ctl-label-text\">{{loc.SC_STORE_SETTINGS_COMPANY_PHONE_NUMBER}}</div>\n\t\t\t\t\t\t\t\t<template v-if=\"isNew\">\n\t\t\t\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-textbox ui-ctl-w100\">\n\t\t\t\t\t\t\t\t\t\t<input type=\"text\" class=\"ui-ctl-element\" name=\"phone\" v-model=\"companyPhone\">\n\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t\t\t\t<template v-if=\"getPhonesList.length === 0\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"salescenter-company-contacts-text\">{{loc.SC_STORE_SETTINGS_COMPANY_PHONE_EMPTY}}<a href=\"javascript:void(0)\" @click=\"requisiteOpenSlider()\">{{loc.SC_STORE_SETTINGS_COMPANY_PHONE_ADD}}</a></div>\n\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-after-icon ui-ctl-w100 ui-ctl-dropdown salescenter-company-contacts-area-item-input\" @click=\"showPopupMenu($event)\">\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"ui-ctl-element\">{{this.getSelectedPhoneValue}}</div>\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"ui-ctl-after ui-ctl-icon-angle\"></div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"salescenter-company-contacts-controls\">\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"salescenter-company-contacts-link\" @click=\"requisiteOpenSlider()\">{{loc.SC_STORE_SETTINGS_COMPANY_PHONE_ADD_SMALL}}</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<my-company-requisite-block \n\t\t\t\t\t\t\t:isNewCompany=\"isNew\"\n\t\t\t\t\t\t\t:companyId=\"companyId\"\n\t\t\t\t\t\t\tv-on:on-mycompany-requisite-settings=\"refresh\"/>\n\t\t\t\t\t\t<div class=\"salescenter-company-contacts-panel\">\n\t\t\t\t\t\t\t<button class=\"ui-btn ui-btn-md ui-btn-success\" @click=\"save\">{{loc.SC_STORE_SETTINGS_SAVE}}</button>\n\t\t\t\t\t\t\t<button class=\"ui-btn ui-btn-md ui-btn-link\" @click=\"close\">{{loc.SC_STORE_SETTINGS_CANCEL}}</button> \n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<store-preview-block :options=\"{lang: this.previewLang}\"/>\n\t\t\t</div>`,\n\t\t});\n\t}\n\n\tquery(action, data, analyticsLabel)\n\t{\n\t\tlet result;\n\t\tresult = BX.ajax.runComponentAction(this.componentName, action, {\n\t\t\tmode: 'class',\n\t\t\tdata: data,\n\t\t\tanalyticsLabel: analyticsLabel\n\t\t});\n\n\n\t\treturn result;\n\t}\n\n\tcloseApplication()\n\t{\n\t\tif(this.slider)\n\t\t{\n\t\t\tthis.slider.close();\n\t\t}\n\t}\n\n\tstatic showNotification(message)\n\t{\n\t\tif(!message)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tBX.loadExt('ui.notification').then(() =>\n\t\t{\n\t\t\tBX.UI.Notification.Center.notify({\n\t\t\t\tcontent: message\n\t\t\t});\n\t\t});\n\t}\n\n}"],"names":["StoreSettings","containerId","parameters","data","companyId","BX","prop","get","companyTitle","previewLang","companyPhone","phoneIdSelected","companyPhoneList","phoneValueSelected","originPhoneIdSelected","componentName","slider","SidePanel","Instance","getTopSlider","context","Vue","create","el","components","RequisiteBlock","PreviewBlock","computed","loc","getFilteredPhrases","isNew","undefined","parseInt","getPhonesList","type","isArray","getSelectedPhoneId","getSelectedPhoneValue","SC_STORE_SETTINGS_COMPANY_PHONE_DEFAULT","getSelectedPhoneNumber","phones","number","length","forEach","item","id","value","getOriginSelectedPhoneId","created","$app","mounted","UI","Hint","init","methods","requisiteOpenSlider","e","url","Manager","openSlider","then","refresh","showPopupMenu","phoneItems","setItem","ev","popupMenu","close","push","text","onclick","bind","SC_STORE_SETTINGS_COMPANY_PHONE_DELIMETER","delimiter","Text","encode","PopupMenuWindow","bindElement","target","minWidth","offsetWidth","items","show","reset","Rest","callMethod","result","answer","isObject","Object","values","ID","VALUE","save","addCompany","updateCompany","query","fields","title","response","closeApplication","errors","getArray","error","showNotification","phone","watch","template","action","analyticsLabel","ajax","runComponentAction","mode","message","loadExt","Notification","Center","notify","content"],"mappings":"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"}