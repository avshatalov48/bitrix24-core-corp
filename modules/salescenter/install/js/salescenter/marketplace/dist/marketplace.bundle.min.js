this.BX=this.BX||{};(function(e,t,n,l,r){"use strict";var s={AppLocalSliderClose:"app-local:slider-on-close",AppSliderSliderClose:"app-slider:slider-on-close",AppUninstalledSliderClose:"app-uninstalled:slider-on-close"};var a=function(e){babelHelpers.inherits(t,e);function t(){var e;babelHelpers.classCallCheck(this,t);e=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));e.setEventNamespace("BX.Salescenter.TileSlider.AppSystem");return e}babelHelpers.createClass(t,[{key:"open",value:function e(t){var r=this;var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};n.Manager.openSlider(t.link,a).then(function(){return r.emit(s.AppLocalSliderClose,new l.BaseEvent({data:{type:t.getType()}}))})}}]);return t}(l.EventEmitter);var i=function(){function e(){babelHelpers.classCallCheck(this,e)}babelHelpers.createClass(e,[{key:"open",value:function e(t){BX.ajax.runComponentAction("bitrix:salescenter.app","getRestApp",{data:{code:t.code}}).then(function(e){var n=e.data;if(n.TYPE==="A");else{BX.rest.AppLayout.openApplication(t.id)}}.bind(this)).catch(function(e){this.errorPopup(" ",e.errors.pop().message)}.bind(this))}},{key:"errorPopup",value:function e(n,l){var r=new PopupWindow("rest-app-error-alert",null,{closeIcon:true,closeByEsc:true,autoHide:false,titleBar:n,content:l,zIndex:16e3,overlay:{color:"gray",opacity:30},buttons:[new PopupWindowButton({id:"close",text:t.Loc.getMessage("SALESCENTER_JS_POPUP_CLOSE"),events:{click:function e(){r.close()}}})],events:{onPopupClose:function e(){this.destroy()},onPopupDestroy:function e(){r=null}}});r.show()}}]);return e}();var p="/marketplace/detail/#app#/";var o=function(e){babelHelpers.inherits(t,e);function t(){var e;babelHelpers.classCallCheck(this,t);e=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));e.setEventNamespace("BX.Salescenter.Marketplace.TileSlider.AppUninstalled");return e}babelHelpers.createClass(t,[{key:"open",value:function e(t){var l=this;var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var a=p.replace("#app#",encodeURIComponent(t.code));n.Manager.openSlider(a,r).then(function(){return l.emit(s.AppUninstalledSliderClose)})}}]);return t}(l.EventEmitter);var c=function(e){babelHelpers.inherits(t,e);function t(){var e;babelHelpers.classCallCheck(this,t);e=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));e.setEventNamespace("BX.Salescenter.AppSlider");return e}babelHelpers.createClass(t,[{key:"open",value:function e(t){var n=this;var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(t.hasOwnProperty("width")){i.width=Number(t.width)}if(t.getType()===r.Marketplace.type()){this.openApp(t,i)}else{var p=new a;p.open(t,i);p.subscribe(s.AppLocalSliderClose,function(e){return n.emit(s.AppSliderSliderClose,new l.BaseEvent({data:e.data}))})}}},{key:"openApp",value:function e(t){var n=this;var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(t.isInstalled()){(new i).open(t)}else{var p=new o;p.open(t,a);p.subscribe(s.AppUninstalledSliderClose,function(){return n.emit(s.AppSliderSliderClose,new l.BaseEvent({data:{type:r.Marketplace.type()}}))})}}}]);return t}(l.EventEmitter);e.AppSlider=c;e.AppLocal=a;e.EventTypes=s;e.AppInstalled=i;e.AppUninstalled=o})(this.BX.Salescenter=this.BX.Salescenter||{},BX,BX.Salescenter,BX.Event,BX.Salescenter.Tile);
//# sourceMappingURL=marketplace.bundle.map.js