this.BX=this.BX||{};(function(e,t){"use strict";var n,a,i,l,c,s,r,o,d,u;var f=function(){function e(n){var a=this;var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{config:[],fields:[],data:[],classes:{},container:null};babelHelpers.classCallCheck(this,e);this.id=n;this.config=i.config;this.fields=i.fields;this.data=i.data;if(i.container){this.setContainer(i.container)}this.classes=new Map([["sectionContainer","salescenter-form-settings-section"],["sectionTitle","ui-title-6"],["controlContainer","salescenter-control-container"],["controlRequired","salescenter-control-required"],["controlTitle","ui-ctl-label-text"],["controlInner","ui-ctl ui-ctl-w100"],["controlAfterIcon","ui-ctl-after-icon"],["controlSelect","ui-ctl-dropdown ui-ctl-after-icon"],["controlSelectIcon","ui-ctl-after ui-ctl-icon-angle"],["controlFile","ui-ctl-file-btn ui-ctl-w33"],["controlInput","ui-ctl-element"],["controlCheckbox","ui-ctl-checkbox"],["controlCheckboxLabel","ui-ctl-label-text"]]);if(t.Type.isPlainObject(i.classes)){this.classes.forEach(function(e,n){if(t.Type.isString(i.classes[n])){a.classes[n]=i.classes[n]}})}}babelHelpers.createClass(e,[{key:"render",value:function e(){var a=this;var i=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var l="";this.config.forEach(function(e){l+=a.renderSection(e)});var c=t.Tag.render(n||(n=babelHelpers.taggedTemplateLiteral(["",""])),l);if(!t.Type.isArray(c)){c=[c]}if(t.Type.isDomNode(i)){c.forEach(function(e){i.appendChild(e)})}return c}},{key:"renderField",value:function e(n){var d="";if(!t.Type.isObject(n)){return d}if(!n.html){n.html=this.renderFieldInput(n)}if(t.Type.isDomNode(n.html)){n.input=n.html;n.html=n.html.innerHTML}else{n.input=t.Tag.render(a||(a=babelHelpers.taggedTemplateLiteral(["",""])),n.html)}var u="";var f="";if(n.hint){f=t.Tag.render(i||(i=babelHelpers.taggedTemplateLiteral(['<span class="ui-ctl-after" data-hint="','"></span>'])),t.Text.encode(n.hint))}var h="";if(n.title){h='<div class="'.concat(this.classes.get("controlTitle")," ").concat(n.required?this.classes.get("controlRequired"):"",'">').concat(t.Text.encode(n.title),"</div>")}if(n.html.indexOf('type="checkbox"')>0){u=t.Tag.render(l||(l=babelHelpers.taggedTemplateLiteral(['<label class="'," ",'">',"","","</label>"])),this.classes.get("controlInner"),this.classes.get("controlCheckbox"),n.input,n.title?'<div class="'+this.classes.get("controlCheckboxLabel")+'">'+t.Text.encode(n.title)+"</div>":"",f)}else if(n.type==="file"){var p="";if(n.addHidden===true){var g={name:n.name,type:"hidden",value:n.value};p=this.renderFieldInput(g)}u=t.Tag.render(c||(c=babelHelpers.taggedTemplateLiteral(["\n\t\t\t\t",'\n\t\t\t\t<label class="'," ",'">\n\t\t\t\t',"\n\t\t\t\t","\n\t\t\t\t</label>\n\t\t\t\t<span></span>\n\t\t\t\t","\n\t\t\t"])),h,this.classes.get("controlInner"),this.classes.get("controlFile"),n.input,n.label?'<div class="ui-ctl-label-text">'+t.Text.encode(n.label)+"</div>":"",p)}else if(n.type==="list"||n.html.indexOf("select")>0){u=t.Tag.render(s||(s=babelHelpers.taggedTemplateLiteral(["\n\t\t\t\t",'\n\t\t\t\t<div class="'," ",'">\n\t\t\t\t\t<div class="','"></div>\n\t\t\t\t\t',"\n\t\t\t\t</div>\n\t\t\t"])),h,this.classes.get("controlSelect"),this.classes.get("controlInner"),this.classes.get("controlSelectIcon"),n.input)}else{u=t.Tag.render(r||(r=babelHelpers.taggedTemplateLiteral(["\n\t\t\t\t",'\n\t\t\t\t<div class="',"",'">\n\t\t\t\t\t',"","\n\t\t\t\t</div>\n\t\t\t"])),h,this.classes.get("controlInner"),f?" "+this.classes.get("controlAfterIcon"):"",n.input,f)}d=t.Tag.render(o||(o=babelHelpers.taggedTemplateLiteral(['<div class="','">',"</div>"])),this.classes.get("controlContainer"),u);return d}},{key:"renderFieldInput",value:function e(n){var a="";var i=n.type;if(!i){i="text"}var l="";if(n.hasOwnProperty("value")){l=t.Text.encode(n.value)}else if(this.data[n.name]){l=t.Text.encode(this.data[n.name])}var c="";if(n.required===true){c=' required="required"'}var s="";if(n.attribute&&t.Type.isArray(n.attribute)){s=n.attribute.join(" ")}if(i==="text"){a='<input name="'.concat(n.name,'"\n\t\t\t\tclass="').concat(this.classes.get("controlInput"),'"\n\t\t\t\tvalue="').concat(l,'"').concat(c,'\n\t\t\t\ttype="text"\n\t\t\t\t').concat(s,">")}else if(i==="boolean"){l="Y";a='<input type="checkbox" name="'.concat(t.Text.encode(n.name),'"').concat(this.data[n.name]===l?' checked="checked"':"").concat(n.disabled?' disabled="disabled"':"").concat(c,'\n\t\t\t\tvalue="').concat(l,'" class="').concat(this.classes.get("controlInput"),'">')}else if(i==="list"){a='<select class="'.concat(this.classes.get("controlInput"),'" name="').concat(t.Text.encode(n.name),'"').concat(c,">");if(n.data&&t.Type.isArray(n.data.items)){n.data.items.forEach(function(e){a+="<option".concat(t.Type.isString(e.VALUE)?' value="'+t.Text.encode(e.VALUE)+'"':"").concat(e.SELECTED?' selected="selected"':"",">").concat(t.Text.encode(e.NAME),"</option>")})}a+="</select>"}else if(i==="hidden"){a='<input name="'.concat(t.Text.encode(n.name),'"\n\t\t\t\tvalue="').concat(l,'"\n\t\t\t\ttype="hidden">')}else if(i==="file"){var r=function e(n){var a=n.target;var i=a.value.split(/(\\|\/)/g).pop();a.parentNode.nextSibling.innerText=t.Text.encode(i)};a=t.Tag.render(d||(d=babelHelpers.taggedTemplateLiteral(['<input \n\t\t\t\tonchange="','" \n\t\t\t\tname="','"\n\t\t\t\tvalue=""\n\t\t\t\tclass="','"\n\t\t\t\ttype="file">'])),r,t.Text.encode(n.name),this.classes.get("controlInput"))}return a}},{key:"renderSection",value:function n(a){var i=this;var l=null;if(!t.Type.isObject(a)){return l}if(!t.Type.isArray(a.elements)){a.elements=[]}var c="";if(a.name){c=' id="'+this.id+"-"+a.name+'"'}l="<div".concat(c,' class="').concat(this.classes.get("sectionContainer"),'">');if(a.title){l+='<div class="'.concat(this.classes.get("sectionTitle"),'">').concat(t.Text.encode(a.title),'</div><hr class="ui-hr ui-mb-15">')}l+="</div>";l=t.Tag.render(u||(u=babelHelpers.taggedTemplateLiteral(["",""])),l);a.elements.forEach(function(n){if(t.Type.isObject(n)&&n.name){var a=e.getByName(i.fields,n.name);if(a){l.appendChild(i.renderField(a))}}});return l}},{key:"setContainer",value:function e(n){if(t.Type.isDomNode(n)){this.container=n}}},{key:"getContainer",value:function e(){var t=this.container;if(!t){t=document}return t}},{key:"getFieldInput",value:function e(t){if(!t.input){var n=this.getContainer();t.input=n.querySelector('[name="'+t.name+'"]')}return t.input}},{key:"getData",value:function e(){var n=this;var a={};var i=this.getContainer();if(i.nodeName==="FORM"){return new FormData(i)}this.fields.forEach(function(e){var i=n.getFieldInput(e);if(t.Type.isDomNode(i)){if(i.getAttribute("type")==="checkbox"){if(i.checked){a[e.name]=t.Text.decode(i.value)}}else{a[e.name]=t.Text.decode(i.value)}}});return a}}],[{key:"getByName",value:function e(n,a){var i=[];if(t.Type.isArray(n)&&t.Type.isString(a)){i=n.filter(function(e){return e.name===a});if(i.length>0){return i[0]}}return null}}]);return e}();e.Form=f})(this.BX.Salescenter=this.BX.Salescenter||{},BX);
//# sourceMappingURL=form.bundle.map.js