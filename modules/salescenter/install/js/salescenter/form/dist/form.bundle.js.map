{"version":3,"file":"form.bundle.js","sources":["../src/form.js"],"sourcesContent":["import {Tag} from 'main.core';\nimport {Type} from 'main.core';\nimport \"ui.forms\";\n\nexport class Form\n{\n\tconstructor(id, options = {\n\t\tconfig: [],\n\t\tfields: [],\n\t\tdata: [],\n\t\tclasses: {},\n\t\tcontainer: null\n\t})\n\t{\n\t\tthis.id = id;\n\t\tthis.config = options.config;\n\t\tthis.fields = options.fields;\n\t\tthis.data = options.data;\n\t\tif(options.container)\n\t\t{\n\t\t\tthis.setContainer(options.container);\n\t\t}\n\t\tthis.classes = new Map([\n\t\t\t['sectionContainer', 'salescenter-form-settings-section'],\n\t\t\t['sectionTitle', 'ui-title-6'],\n\t\t\t['controlContainer', 'salescenter-control-container'],\n\t\t\t['controlRequired', 'salescenter-control-required'],\n\t\t\t['controlTitle', 'ui-ctl-label-text'],\n\t\t\t['controlInner', 'ui-ctl ui-ctl-w100'],\n\t\t\t['controlAfterIcon', 'ui-ctl-after-icon'],\n\t\t\t['controlSelect', 'ui-ctl-dropdown ui-ctl-after-icon'],\n\t\t\t['controlSelectIcon', 'ui-ctl-after ui-ctl-icon-angle'],\n\t\t\t['controlFile', 'ui-ctl-file-btn ui-ctl-w33'],\n\t\t\t['controlInput', 'ui-ctl-element'],\n\t\t\t['controlCheckbox', 'ui-ctl-checkbox'],\n\t\t\t['controlCheckboxLabel', 'ui-ctl-label-text'],\n\t\t]);\n\n\t\tif(Type.isPlainObject(options.classes))\n\t\t{\n\t\t\tthis.classes.forEach((value, name) =>\n\t\t\t{\n\t\t\t\tif(Type.isString(options.classes[name]))\n\t\t\t\t{\n\t\t\t\t\tthis.classes[name] = options.classes[name];\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t}\n\n\tstatic getByName(collection, name)\n\t{\n\t\tlet items = [];\n\t\tif(Type.isArray(collection) && Type.isString(name))\n\t\t{\n\t\t\titems = collection.filter((item) =>\n\t\t\t{\n\t\t\t\treturn item.name === name;\n\t\t\t});\n\t\t\tif(items.length > 0)\n\t\t\t{\n\t\t\t\treturn items[0];\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t/**\n\t * @param {HTMLElement|null} nodeTo\n\t * @returns {HTMLElement[]}\n\t */\n\trender(nodeTo = null)\n\t{\n\t\tlet result = '';\n\t\tthis.config.forEach((section) =>\n\t\t{\n\t\t\tresult += this.renderSection(section);\n\t\t});\n\n\t\tlet nodes = Tag.render`${result}`;\n\t\tif(!Type.isArray(nodes))\n\t\t{\n\t\t\tnodes = [nodes];\n\t\t}\n\n\t\tif(Type.isDomNode(nodeTo))\n\t\t{\n\t\t\tnodes.forEach((node) =>\n\t\t\t{\n\t\t\t\tnodeTo.appendChild(node);\n\t\t\t})\n\t\t}\n\n\t\treturn nodes;\n\t}\n\n\t/**\n\t * @param field\n\t * @returns {HTMLElement}\n\t */\n\trenderField(field)\n\t{\n\t\tlet result = '';\n\t\tif(!Type.isObject(field))\n\t\t{\n\t\t\treturn result;\n\t\t}\n\n\t\tif(!field.html)\n\t\t{\n\t\t\tfield.html = this.renderFieldInput(field);\n\t\t}\n\n\t\tif(Type.isDomNode(field.html))\n\t\t{\n\t\t\tfield.input = field.html;\n\t\t\tfield.html = field.html.innerHTML;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tfield.input = Tag.render`${field.html}`;\n\t\t}\n\n\t\tlet label = '';\n\t\tlet hint = '';\n\t\tif(field.hint)\n\t\t{\n\t\t\thint = Tag.render`<span class=\"ui-ctl-after\" data-hint=\"${field.hint}\"></span>`;\n\t\t}\n\n\t\tlet title = '';\n\t\tif(field.title)\n\t\t{\n\t\t\ttitle = `<div class=\"${this.classes.get('controlTitle')} ${field.required ? this.classes.get('controlRequired') : ''}\">${field.title}</div>`;\n\t\t}\n\n\t\tif(field.html.indexOf('type=\"checkbox\"') > 0)\n\t\t{\n\t\t\tlabel = Tag.render`<label class=\"${this.classes.get('controlInner')} ${this.classes.get('controlCheckbox')}\">${field.input}${field.title ? '<div class=\"' + this.classes.get('controlCheckboxLabel') + '\">' + field.title + '</div>' : ''}${hint}</label>`;\n\t\t}\n\t\telse if(field.type === 'file')\n\t\t{\n\t\t\tlet hiddenFileInput = '';\n\t\t\tif(field.addHidden === true)\n\t\t\t{\n\t\t\t\tlet hiddenFileField = {\n\t\t\t\t\tname: field.name,\n\t\t\t\t\ttype: 'hidden',\n\t\t\t\t\tvalue: field.value,\n\t\t\t\t};\n\t\t\t\thiddenFileInput = this.renderFieldInput(hiddenFileField);\n\t\t\t}\n\t\t\tlabel = Tag.render`\n\t\t\t\t${title}\n\t\t\t\t<label class=\"${this.classes.get('controlInner')} ${this.classes.get('controlFile')}\">\n\t\t\t\t${field.input}\n\t\t\t\t${field.label ? '<div class=\"ui-ctl-label-text\">' + field.label + '</div>' : ''}\n\t\t\t\t</label>\n\t\t\t\t<span></span>\n\t\t\t\t${hiddenFileInput}\n\t\t\t`;\n\t\t}\n\t\telse if(field.type === 'list' || field.html.indexOf('select') > 0)\n\t\t{\n\t\t\tlabel = Tag.render`\n\t\t\t\t${title}\n\t\t\t\t<div class=\"${this.classes.get('controlSelect')} ${this.classes.get('controlInner')}\">\n\t\t\t\t\t<div class=\"${this.classes.get('controlSelectIcon')}\"></div>\n\t\t\t\t\t${field.input}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tlabel = Tag.render`\n\t\t\t\t${title}\n\t\t\t\t<div class=\"${this.classes.get('controlInner')}${hint ? ' ' + this.classes.get('controlAfterIcon') : ''}\">\n\t\t\t\t\t${field.input}${hint}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\n\t\tresult = Tag.render`<div class=\"${this.classes.get('controlContainer')}\">${label}</div>`;\n\n\t\treturn result;\n\t}\n\n\t/**\n\t * @param field\n\t * @returns {string}\n\t */\n\trenderFieldInput(field)\n\t{\n\t\tlet result = '';\n\t\tlet type = field.type;\n\t\tif(!type)\n\t\t{\n\t\t\ttype = 'text';\n\t\t}\n\n\t\tlet value = '';\n\t\tif(field.hasOwnProperty('value'))\n\t\t{\n\t\t\tvalue = field.value;\n\t\t}\n\t\telse if(this.data[field.name])\n\t\t{\n\t\t\tvalue = this.data[field.name];\n\t\t}\n\n\t\tlet required = '';\n\t\tif(field.required === true)\n\t\t{\n\t\t\trequired = ' required=\"required\"';\n\t\t}\n\n\t\tif(type === 'text')\n\t\t{\n\t\t\tresult = `<input name=\"${field.name}\"\n\t\t\t\tclass=\"${this.classes.get('controlInput')}\"\n\t\t\t\tvalue=\"${value}\"${required}\n\t\t\t\ttype=\"text\">`\n\t\t\t;\n\t\t}\n\t\telse if(type === 'boolean')\n\t\t{\n\t\t\tvalue = 'Y';\n\t\t\tresult =`<input type=\"checkbox\" name=\"${field.name}\"${this.data[field.name] === value ? ' checked=\"checked\"' : ''}${field.disabled ? ' disabled=\"disabled\"' : ''}${required}\n\t\t\t\tvalue=\"${value}\" class=\"${this.classes.get('controlInput')}\">`;\n\t\t}\n\t\telse if(type === 'list')\n\t\t{\n\t\t\tresult = `<select class=\"${this.classes.get('controlInput')}\" name=\"${field.name}\"${required}>`;\n\t\t\tif(field.data && Type.isArray(field.data.items))\n\t\t\t{\n\t\t\t\tfield.data.items.forEach((item) =>\n\t\t\t\t{\n\t\t\t\t\tresult += `<option${Type.isString(item.VALUE) ? ' value=\"' + item.VALUE + '\"' : ''}${item.SELECTED ? ' selected=\"selected\"' : ''}>${item.NAME}</option>`;\n\t\t\t\t});\n\t\t\t}\n\t\t\tresult += `</select>`;\n\t\t}\n\t\telse if(type === 'hidden')\n\t\t{\n\t\t\tresult = `<input name=\"${field.name}\"\n\t\t\t\tvalue=\"${value}\"\n\t\t\t\ttype=\"hidden\">`\n\t\t\t;\n\t\t}\n\t\telse if(type === 'file')\n\t\t{\n\t\t\tconst onFileChange = ({target}) =>\n\t\t\t{\n\t\t\t\tconst value = target.value.split(/(\\\\|\\/)/g).pop();\n\t\t\t\ttarget.parentNode.nextSibling.innerText = value;\n\t\t\t};\n\t\t\tresult = Tag.render`<input \n\t\t\t\tonchange=\"${onFileChange}\" \n\t\t\t\tname=\"${field.name}\"\n\t\t\t\tvalue=\"\"\n\t\t\t\tclass=\"${this.classes.get('controlInput')}\"\n\t\t\t\ttype=\"file\">`\n\t\t\t;\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t/**\n\t * @param section\n\t * @returns {HTMLElement}\n\t */\n\trenderSection(section)\n\t{\n\t\tlet result = null;\n\t\tif(!Type.isObject(section))\n\t\t{\n\t\t\treturn result;\n\t\t}\n\n\t\tif(!Type.isArray(section.elements))\n\t\t{\n\t\t\tsection.elements = [];\n\t\t}\n\n\t\tlet sectionId = '';\n\t\tif(section.name)\n\t\t{\n\t\t\tsectionId = ' id=\"' + this.id + '-' + section.name + '\"';\n\t\t}\n\n\t\tresult = `<div${sectionId} class=\"${this.classes.get('sectionContainer')}\">`;\n\t\tif(section.title)\n\t\t{\n\t\t\tresult += `<div class=\"${this.classes.get('sectionTitle')}\">${section.title}</div><hr class=\"ui-hr ui-mb-15\">`;\n\t\t}\n\t\tresult += `</div>`;\n\n\t\tresult = Tag.render`${result}`;\n\n\t\tsection.elements.forEach((element) =>\n\t\t{\n\t\t\tif(Type.isObject(element) && element.name)\n\t\t\t{\n\t\t\t\tlet field = Form.getByName(this.fields, element.name);\n\t\t\t\tif(field)\n\t\t\t\t{\n\t\t\t\t\tresult.appendChild(this.renderField(field));\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn result;\n\t}\n\n\t/**\n\t * @param container\n\t */\n\tsetContainer(container)\n\t{\n\t\tif(Type.isDomNode(container))\n\t\t{\n\t\t\tthis.container = container;\n\t\t}\n\t}\n\n\t/**\n\t * @returns {HTMLElement}\n\t */\n\tgetContainer()\n\t{\n\t\tlet container = this.container;\n\t\tif(!container)\n\t\t{\n\t\t\tcontainer = document;\n\t\t}\n\n\t\treturn container;\n\t}\n\n\t/**\n\t * @param field\n\t * @returns {Element | null}\n\t */\n\tgetFieldInput(field)\n\t{\n\t\tif(!field.input)\n\t\t{\n\t\t\tlet container = this.getContainer();\n\t\t\tfield.input = container.querySelector('[name=\"' + field.name + '\"]');\n\t\t}\n\n\t\treturn field.input;\n\t}\n\n\t/**\n\t * @returns {Object}\n\t */\n\tgetData()\n\t{\n\t\tlet result = {};\n\t\tvar container = this.getContainer();\n\t\tif(container.nodeName === 'FORM')\n\t\t{\n\t\t\treturn new FormData(container);\n\t\t}\n\t\tthis.fields.forEach((field) =>\n\t\t{\n\t\t\tlet input = this.getFieldInput(field);\n\t\t\tif(Type.isDomNode(input))\n\t\t\t{\n\t\t\t\tif(input.getAttribute('type') === 'checkbox')\n\t\t\t\t{\n\t\t\t\t\tif(input.checked)\n\t\t\t\t\t{\n\t\t\t\t\t\tresult[field.name] = input.value;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tresult[field.name] = input.value;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn result;\n\t}\n}\n"],"names":["Form","id","options","config","fields","data","classes","container","setContainer","Map","Type","isPlainObject","forEach","value","name","isString","nodeTo","result","section","renderSection","nodes","Tag","render","isArray","isDomNode","node","appendChild","field","isObject","html","renderFieldInput","input","innerHTML","label","hint","title","get","required","indexOf","type","hiddenFileInput","addHidden","hiddenFileField","hasOwnProperty","disabled","items","item","VALUE","SELECTED","NAME","onFileChange","target","split","pop","parentNode","nextSibling","innerText","elements","sectionId","element","getByName","renderField","document","getContainer","querySelector","nodeName","FormData","getFieldInput","getAttribute","checked","collection","filter","length"],"mappings":"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"}