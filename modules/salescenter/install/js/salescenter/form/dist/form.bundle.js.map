{"version":3,"file":"form.bundle.js","sources":["../src/form.js"],"sourcesContent":["import {Tag, Text} from 'main.core';\nimport {Type} from 'main.core';\nimport \"ui.forms\";\n\nexport class Form\n{\n\tconstructor(id, options = {\n\t\tconfig: [],\n\t\tfields: [],\n\t\tdata: [],\n\t\tclasses: {},\n\t\tcontainer: null\n\t})\n\t{\n\t\tthis.id = id;\n\t\tthis.config = options.config;\n\t\tthis.fields = options.fields;\n\t\tthis.data = options.data;\n\t\tif(options.container)\n\t\t{\n\t\t\tthis.setContainer(options.container);\n\t\t}\n\t\tthis.classes = new Map([\n\t\t\t['sectionContainer', 'salescenter-form-settings-section'],\n\t\t\t['sectionTitle', 'ui-title-6'],\n\t\t\t['controlContainer', 'salescenter-control-container'],\n\t\t\t['controlRequired', 'salescenter-control-required'],\n\t\t\t['controlTitle', 'ui-ctl-label-text'],\n\t\t\t['controlInner', 'ui-ctl ui-ctl-w100'],\n\t\t\t['controlAfterIcon', 'ui-ctl-after-icon'],\n\t\t\t['controlSelect', 'ui-ctl-dropdown ui-ctl-after-icon'],\n\t\t\t['controlSelectIcon', 'ui-ctl-after ui-ctl-icon-angle'],\n\t\t\t['controlFile', 'ui-ctl-file-btn ui-ctl-w33'],\n\t\t\t['controlInput', 'ui-ctl-element'],\n\t\t\t['controlCheckbox', 'ui-ctl-checkbox'],\n\t\t\t['controlCheckboxLabel', 'ui-ctl-label-text'],\n\t\t]);\n\n\t\tif(Type.isPlainObject(options.classes))\n\t\t{\n\t\t\tthis.classes.forEach((value, name) =>\n\t\t\t{\n\t\t\t\tif(Type.isString(options.classes[name]))\n\t\t\t\t{\n\t\t\t\t\tthis.classes[name] = options.classes[name];\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t}\n\n\tstatic getByName(collection, name)\n\t{\n\t\tlet items = [];\n\t\tif(Type.isArray(collection) && Type.isString(name))\n\t\t{\n\t\t\titems = collection.filter((item) =>\n\t\t\t{\n\t\t\t\treturn item.name === name;\n\t\t\t});\n\t\t\tif(items.length > 0)\n\t\t\t{\n\t\t\t\treturn items[0];\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t/**\n\t * @param {HTMLElement|null} nodeTo\n\t * @returns {HTMLElement[]}\n\t */\n\trender(nodeTo = null)\n\t{\n\t\tlet result = '';\n\t\tthis.config.forEach((section) =>\n\t\t{\n\t\t\tresult += this.renderSection(section);\n\t\t});\n\n\t\tlet nodes = Tag.render`${result}`;\n\t\tif(!Type.isArray(nodes))\n\t\t{\n\t\t\tnodes = [nodes];\n\t\t}\n\n\t\tif(Type.isDomNode(nodeTo))\n\t\t{\n\t\t\tnodes.forEach((node) =>\n\t\t\t{\n\t\t\t\tnodeTo.appendChild(node);\n\t\t\t})\n\t\t}\n\n\t\treturn nodes;\n\t}\n\n\t/**\n\t * @param field\n\t * @returns {HTMLElement}\n\t */\n\trenderField(field)\n\t{\n\t\tlet result = '';\n\t\tif(!Type.isObject(field))\n\t\t{\n\t\t\treturn result;\n\t\t}\n\n\t\tif(!field.html)\n\t\t{\n\t\t\tfield.html = this.renderFieldInput(field);\n\t\t}\n\n\t\tif(Type.isDomNode(field.html))\n\t\t{\n\t\t\tfield.input = field.html;\n\t\t\tfield.html = field.html.innerHTML;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tfield.input = Tag.render`${field.html}`;\n\t\t}\n\n\t\tlet label = '';\n\t\tlet hint = '';\n\t\tif(field.hint)\n\t\t{\n\t\t\thint = Tag.render`<span class=\"ui-ctl-after\" data-hint=\"${Text.encode(field.hint)}\"></span>`;\n\t\t}\n\n\t\tlet title = '';\n\t\tif(field.title)\n\t\t{\n\t\t\ttitle = `<div class=\"${this.classes.get('controlTitle')} ${field.required ? this.classes.get('controlRequired') : ''}\">${Text.encode(field.title)}</div>`;\n\t\t}\n\n\t\tif(field.html.indexOf('type=\"checkbox\"') > 0)\n\t\t{\n\t\t\tlabel = Tag.render`<label class=\"${this.classes.get('controlInner')} ${this.classes.get('controlCheckbox')}\">${field.input}${field.title ? '<div class=\"' + this.classes.get('controlCheckboxLabel') + '\">' + Text.encode(field.title) + '</div>' : ''}${hint}</label>`;\n\t\t}\n\t\telse if(field.type === 'file')\n\t\t{\n\t\t\tlet hiddenFileInput = '';\n\t\t\tif(field.addHidden === true)\n\t\t\t{\n\t\t\t\tlet hiddenFileField = {\n\t\t\t\t\tname: field.name,\n\t\t\t\t\ttype: 'hidden',\n\t\t\t\t\tvalue: field.value,\n\t\t\t\t};\n\t\t\t\thiddenFileInput = this.renderFieldInput(hiddenFileField);\n\t\t\t}\n\t\t\tlabel = Tag.render`\n\t\t\t\t${title}\n\t\t\t\t<label class=\"${this.classes.get('controlInner')} ${this.classes.get('controlFile')}\">\n\t\t\t\t${field.input}\n\t\t\t\t${field.label ? '<div class=\"ui-ctl-label-text\">' + Text.encode(field.label) + '</div>' : ''}\n\t\t\t\t</label>\n\t\t\t\t<span></span>\n\t\t\t\t${hiddenFileInput}\n\t\t\t`;\n\t\t}\n\t\telse if(field.type === 'list' || field.html.indexOf('select') > 0)\n\t\t{\n\t\t\tlabel = Tag.render`\n\t\t\t\t${title}\n\t\t\t\t<div class=\"${this.classes.get('controlSelect')} ${this.classes.get('controlInner')}\">\n\t\t\t\t\t<div class=\"${this.classes.get('controlSelectIcon')}\"></div>\n\t\t\t\t\t${field.input}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tlabel = Tag.render`\n\t\t\t\t${title}\n\t\t\t\t<div class=\"${this.classes.get('controlInner')}${hint ? ' ' + this.classes.get('controlAfterIcon') : ''}\">\n\t\t\t\t\t${field.input}${hint}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\n\t\tresult = Tag.render`<div class=\"${this.classes.get('controlContainer')}\">${label}</div>`;\n\n\t\treturn result;\n\t}\n\n\t/**\n\t * @param field\n\t * @returns {string}\n\t */\n\trenderFieldInput(field)\n\t{\n\t\tlet result = '';\n\t\tlet type = field.type;\n\t\tif(!type)\n\t\t{\n\t\t\ttype = 'text';\n\t\t}\n\n\t\tlet value = '';\n\t\tif(field.hasOwnProperty('value'))\n\t\t{\n\t\t\tvalue = Text.encode(field.value);\n\t\t}\n\t\telse if(this.data[field.name])\n\t\t{\n\t\t\tvalue = Text.encode(this.data[field.name]);\n\t\t}\n\n\t\tlet required = '';\n\t\tif(field.required === true)\n\t\t{\n\t\t\trequired = ' required=\"required\"';\n\t\t}\n\n\t\tlet attribute = '';\n\t\tif (field.attribute && Type.isArray(field.attribute))\n\t\t{\n\t\t\tattribute = field.attribute.join(' ');\n\t\t}\n\n\t\tif(type === 'text')\n\t\t{\n\t\t\tresult = `<input name=\"${field.name}\"\n\t\t\t\tclass=\"${this.classes.get('controlInput')}\"\n\t\t\t\tvalue=\"${value}\"${required}\n\t\t\t\ttype=\"text\"\n\t\t\t\t${attribute}>`\n\t\t\t;\n\t\t}\n\t\telse if(type === 'boolean')\n\t\t{\n\t\t\tvalue = 'Y';\n\t\t\tresult =`<input type=\"checkbox\" name=\"${Text.encode(field.name)}\"${this.data[field.name] === value ? ' checked=\"checked\"' : ''}${field.disabled ? ' disabled=\"disabled\"' : ''}${required}\n\t\t\t\tvalue=\"${value}\" class=\"${this.classes.get('controlInput')}\">`;\n\t\t}\n\t\telse if(type === 'list')\n\t\t{\n\t\t\tresult = `<select class=\"${this.classes.get('controlInput')}\" name=\"${Text.encode(field.name)}\"${required}>`;\n\t\t\tif(field.data && Type.isArray(field.data.items))\n\t\t\t{\n\t\t\t\tfield.data.items.forEach((item) =>\n\t\t\t\t{\n\t\t\t\t\tresult += `<option${Type.isString(item.VALUE) ? ' value=\"' + Text.encode(item.VALUE) + '\"' : ''}${item.SELECTED ? ' selected=\"selected\"' : ''}>${Text.encode(item.NAME)}</option>`;\n\t\t\t\t});\n\t\t\t}\n\t\t\tresult += `</select>`;\n\t\t}\n\t\telse if(type === 'hidden')\n\t\t{\n\t\t\tresult = `<input name=\"${Text.encode(field.name)}\"\n\t\t\t\tvalue=\"${value}\"\n\t\t\t\ttype=\"hidden\">`\n\t\t\t;\n\t\t}\n\t\telse if(type === 'file')\n\t\t{\n\t\t\tconst onFileChange = ({target}) =>\n\t\t\t{\n\t\t\t\tconst value = target.value.split(/(\\\\|\\/)/g).pop();\n\t\t\t\ttarget.parentNode.nextSibling.innerText = Text.encode(value);\n\t\t\t};\n\t\t\tresult = Tag.render`<input \n\t\t\t\tonchange=\"${onFileChange}\" \n\t\t\t\tname=\"${Text.encode(field.name)}\"\n\t\t\t\tvalue=\"\"\n\t\t\t\tclass=\"${this.classes.get('controlInput')}\"\n\t\t\t\ttype=\"file\">`\n\t\t\t;\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t/**\n\t * @param section\n\t * @returns {HTMLElement}\n\t */\n\trenderSection(section)\n\t{\n\t\tlet result = null;\n\t\tif(!Type.isObject(section))\n\t\t{\n\t\t\treturn result;\n\t\t}\n\n\t\tif(!Type.isArray(section.elements))\n\t\t{\n\t\t\tsection.elements = [];\n\t\t}\n\n\t\tlet sectionId = '';\n\t\tif(section.name)\n\t\t{\n\t\t\tsectionId = ' id=\"' + this.id + '-' + section.name + '\"';\n\t\t}\n\n\t\tresult = `<div${sectionId} class=\"${this.classes.get('sectionContainer')}\">`;\n\t\tif(section.title)\n\t\t{\n\t\t\tresult += `<div class=\"${this.classes.get('sectionTitle')}\">${Text.encode(section.title)}</div><hr class=\"ui-hr ui-mb-15\">`;\n\t\t}\n\t\tresult += `</div>`;\n\n\t\tresult = Tag.render`${result}`;\n\n\t\tsection.elements.forEach((element) =>\n\t\t{\n\t\t\tif(Type.isObject(element) && element.name)\n\t\t\t{\n\t\t\t\tlet field = Form.getByName(this.fields, element.name);\n\t\t\t\tif(field)\n\t\t\t\t{\n\t\t\t\t\tresult.appendChild(this.renderField(field));\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn result;\n\t}\n\n\t/**\n\t * @param container\n\t */\n\tsetContainer(container)\n\t{\n\t\tif(Type.isDomNode(container))\n\t\t{\n\t\t\tthis.container = container;\n\t\t}\n\t}\n\n\t/**\n\t * @returns {HTMLElement}\n\t */\n\tgetContainer()\n\t{\n\t\tlet container = this.container;\n\t\tif(!container)\n\t\t{\n\t\t\tcontainer = document;\n\t\t}\n\n\t\treturn container;\n\t}\n\n\t/**\n\t * @param field\n\t * @returns {Element | null}\n\t */\n\tgetFieldInput(field)\n\t{\n\t\tif(!field.input)\n\t\t{\n\t\t\tlet container = this.getContainer();\n\t\t\tfield.input = container.querySelector('[name=\"' + field.name + '\"]');\n\t\t}\n\n\t\treturn field.input;\n\t}\n\n\t/**\n\t * @returns {Object}\n\t */\n\tgetData()\n\t{\n\t\tlet result = {};\n\t\tvar container = this.getContainer();\n\t\tif(container.nodeName === 'FORM')\n\t\t{\n\t\t\treturn new FormData(container);\n\t\t}\n\t\tthis.fields.forEach((field) =>\n\t\t{\n\t\t\tlet input = this.getFieldInput(field);\n\t\t\tif(Type.isDomNode(input))\n\t\t\t{\n\t\t\t\tif(input.getAttribute('type') === 'checkbox')\n\t\t\t\t{\n\t\t\t\t\tif(input.checked)\n\t\t\t\t\t{\n\t\t\t\t\t\tresult[field.name] = Text.decode(input.value);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tresult[field.name] = Text.decode(input.value);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn result;\n\t}\n}\n"],"names":["Form","id","options","config","fields","data","classes","container","setContainer","Map","Type","isPlainObject","forEach","value","name","isString","nodeTo","result","section","renderSection","nodes","Tag","render","isArray","isDomNode","node","appendChild","field","isObject","html","renderFieldInput","input","innerHTML","label","hint","Text","encode","title","get","required","indexOf","type","hiddenFileInput","addHidden","hiddenFileField","hasOwnProperty","attribute","join","disabled","items","item","VALUE","SELECTED","NAME","onFileChange","target","split","pop","parentNode","nextSibling","innerText","elements","sectionId","element","getByName","renderField","document","getContainer","querySelector","nodeName","FormData","getFieldInput","getAttribute","checked","decode","collection","filter","length"],"mappings":";;;;;KAIaA,IAAb;GAEC,cAAYC,EAAZ,EAOA;KAAA;;KAAA,IAPgBC,OAOhB,uEAP0B;OACzBC,MAAM,EAAE,EADiB;OAEzBC,MAAM,EAAE,EAFiB;OAGzBC,IAAI,EAAE,EAHmB;OAIzBC,OAAO,EAAE,EAJgB;OAKzBC,SAAS,EAAE;MAEZ;KAAA;KACC,KAAKN,EAAL,GAAUA,EAAV;KACA,KAAKE,MAAL,GAAcD,OAAO,CAACC,MAAtB;KACA,KAAKC,MAAL,GAAcF,OAAO,CAACE,MAAtB;KACA,KAAKC,IAAL,GAAYH,OAAO,CAACG,IAApB;;KACA,IAAGH,OAAO,CAACK,SAAX,EACA;OACC,KAAKC,YAAL,CAAkBN,OAAO,CAACK,SAA1B;;;KAED,KAAKD,OAAL,GAAe,IAAIG,GAAJ,CAAQ,CACtB,CAAC,kBAAD,EAAqB,mCAArB,CADsB,EAEtB,CAAC,cAAD,EAAiB,YAAjB,CAFsB,EAGtB,CAAC,kBAAD,EAAqB,+BAArB,CAHsB,EAItB,CAAC,iBAAD,EAAoB,8BAApB,CAJsB,EAKtB,CAAC,cAAD,EAAiB,mBAAjB,CALsB,EAMtB,CAAC,cAAD,EAAiB,oBAAjB,CANsB,EAOtB,CAAC,kBAAD,EAAqB,mBAArB,CAPsB,EAQtB,CAAC,eAAD,EAAkB,mCAAlB,CARsB,EAStB,CAAC,mBAAD,EAAsB,gCAAtB,CATsB,EAUtB,CAAC,aAAD,EAAgB,4BAAhB,CAVsB,EAWtB,CAAC,cAAD,EAAiB,gBAAjB,CAXsB,EAYtB,CAAC,iBAAD,EAAoB,iBAApB,CAZsB,EAatB,CAAC,sBAAD,EAAyB,mBAAzB,CAbsB,CAAR,CAAf;;KAgBA,IAAGC,cAAI,CAACC,aAAL,CAAmBT,OAAO,CAACI,OAA3B,CAAH,EACA;OACC,KAAKA,OAAL,CAAaM,OAAb,CAAqB,UAACC,KAAD,EAAQC,IAAR,EACrB;SACC,IAAGJ,cAAI,CAACK,QAAL,CAAcb,OAAO,CAACI,OAAR,CAAgBQ,IAAhB,CAAd,CAAH,EACA;WACC,KAAI,CAACR,OAAL,CAAaQ,IAAb,IAAqBZ,OAAO,CAACI,OAAR,CAAgBQ,IAAhB,CAArB;;QAJF;;;;GApCH;KAAA;;;CAiEA;CACA;CACA;KAnEA,yBAqEC;OAAA;;OAAA,IADOE,MACP,uEADgB,IAChB;OACC,IAAIC,MAAM,GAAG,EAAb;OACA,KAAKd,MAAL,CAAYS,OAAZ,CAAoB,UAACM,OAAD,EACpB;SACCD,MAAM,IAAI,MAAI,CAACE,aAAL,CAAmBD,OAAnB,CAAV;QAFD;OAKA,IAAIE,KAAK,GAAGC,aAAG,CAACC,MAAP,sFAAgBL,MAAhB,CAAT;;OACA,IAAG,CAACP,cAAI,CAACa,OAAL,CAAaH,KAAb,CAAJ,EACA;SACCA,KAAK,GAAG,CAACA,KAAD,CAAR;;;OAGD,IAAGV,cAAI,CAACc,SAAL,CAAeR,MAAf,CAAH,EACA;SACCI,KAAK,CAACR,OAAN,CAAc,UAACa,IAAD,EACd;WACCT,MAAM,CAACU,WAAP,CAAmBD,IAAnB;UAFD;;;OAMD,OAAOL,KAAP;;;CAIF;CACA;CACA;;;KAhGA;KAAA,4BAiGaO,KAjGb,EAkGC;OACC,IAAIV,MAAM,GAAG,EAAb;;OACA,IAAG,CAACP,cAAI,CAACkB,QAAL,CAAcD,KAAd,CAAJ,EACA;SACC,OAAOV,MAAP;;;OAGD,IAAG,CAACU,KAAK,CAACE,IAAV,EACA;SACCF,KAAK,CAACE,IAAN,GAAa,KAAKC,gBAAL,CAAsBH,KAAtB,CAAb;;;OAGD,IAAGjB,cAAI,CAACc,SAAL,CAAeG,KAAK,CAACE,IAArB,CAAH,EACA;SACCF,KAAK,CAACI,KAAN,GAAcJ,KAAK,CAACE,IAApB;SACAF,KAAK,CAACE,IAAN,GAAaF,KAAK,CAACE,IAAN,CAAWG,SAAxB;QAHD,MAMA;SACCL,KAAK,CAACI,KAAN,GAAcV,aAAG,CAACC,MAAlB,wFAA2BK,KAAK,CAACE,IAAjC;;;OAGD,IAAII,KAAK,GAAG,EAAZ;OACA,IAAIC,IAAI,GAAG,EAAX;;OACA,IAAGP,KAAK,CAACO,IAAT,EACA;SACCA,IAAI,GAAGb,aAAG,CAACC,MAAP,2IAAsDa,cAAI,CAACC,MAAL,CAAYT,KAAK,CAACO,IAAlB,CAAtD,CAAJ;;;OAGD,IAAIG,KAAK,GAAG,EAAZ;;OACA,IAAGV,KAAK,CAACU,KAAT,EACA;SACCA,KAAK,0BAAkB,KAAK/B,OAAL,CAAagC,GAAb,CAAiB,cAAjB,CAAlB,cAAsDX,KAAK,CAACY,QAAN,GAAiB,KAAKjC,OAAL,CAAagC,GAAb,CAAiB,iBAAjB,CAAjB,GAAuD,EAA7G,gBAAoHH,cAAI,CAACC,MAAL,CAAYT,KAAK,CAACU,KAAlB,CAApH,WAAL;;;OAGD,IAAGV,KAAK,CAACE,IAAN,CAAWW,OAAX,CAAmB,iBAAnB,IAAwC,CAA3C,EACA;SACCP,KAAK,GAAGZ,aAAG,CAACC,MAAP,mIAA8B,KAAKhB,OAAL,CAAagC,GAAb,CAAiB,cAAjB,CAA9B,EAAkE,KAAKhC,OAAL,CAAagC,GAAb,CAAiB,iBAAjB,CAAlE,EAA0GX,KAAK,CAACI,KAAhH,EAAwHJ,KAAK,CAACU,KAAN,GAAc,iBAAiB,KAAK/B,OAAL,CAAagC,GAAb,CAAiB,sBAAjB,CAAjB,GAA4D,IAA5D,GAAmEH,cAAI,CAACC,MAAL,CAAYT,KAAK,CAACU,KAAlB,CAAnE,GAA8F,QAA5G,GAAuH,EAA/O,EAAoPH,IAApP,CAAL;QAFD,MAIK,IAAGP,KAAK,CAACc,IAAN,KAAe,MAAlB,EACL;SACC,IAAIC,eAAe,GAAG,EAAtB;;SACA,IAAGf,KAAK,CAACgB,SAAN,KAAoB,IAAvB,EACA;WACC,IAAIC,eAAe,GAAG;aACrB9B,IAAI,EAAEa,KAAK,CAACb,IADS;aAErB2B,IAAI,EAAE,QAFe;aAGrB5B,KAAK,EAAEc,KAAK,CAACd;YAHd;WAKA6B,eAAe,GAAG,KAAKZ,gBAAL,CAAsBc,eAAtB,CAAlB;;;SAEDX,KAAK,GAAGZ,aAAG,CAACC,MAAP,kOACFe,KADE,EAEY,KAAK/B,OAAL,CAAagC,GAAb,CAAiB,cAAjB,CAFZ,EAEgD,KAAKhC,OAAL,CAAagC,GAAb,CAAiB,aAAjB,CAFhD,EAGFX,KAAK,CAACI,KAHJ,EAIFJ,KAAK,CAACM,KAAN,GAAc,oCAAoCE,cAAI,CAACC,MAAL,CAAYT,KAAK,CAACM,KAAlB,CAApC,GAA+D,QAA7E,GAAwF,EAJtF,EAOFS,eAPE,CAAL;QAZI,MAsBA,IAAGf,KAAK,CAACc,IAAN,KAAe,MAAf,IAAyBd,KAAK,CAACE,IAAN,CAAWW,OAAX,CAAmB,QAAnB,IAA+B,CAA3D,EACL;SACCP,KAAK,GAAGZ,aAAG,CAACC,MAAP,mNACFe,KADE,EAEU,KAAK/B,OAAL,CAAagC,GAAb,CAAiB,eAAjB,CAFV,EAE+C,KAAKhC,OAAL,CAAagC,GAAb,CAAiB,cAAjB,CAF/C,EAGW,KAAKhC,OAAL,CAAagC,GAAb,CAAiB,mBAAjB,CAHX,EAIDX,KAAK,CAACI,KAJL,CAAL;QAFI,MAWL;SACCE,KAAK,GAAGZ,aAAG,CAACC,MAAP,gLACFe,KADE,EAEU,KAAK/B,OAAL,CAAagC,GAAb,CAAiB,cAAjB,CAFV,EAE6CJ,IAAI,GAAG,MAAM,KAAK5B,OAAL,CAAagC,GAAb,CAAiB,kBAAjB,CAAT,GAAgD,EAFjG,EAGDX,KAAK,CAACI,KAHL,EAGaG,IAHb,CAAL;;;OAQDjB,MAAM,GAAGI,aAAG,CAACC,MAAP,kHAA4B,KAAKhB,OAAL,CAAagC,GAAb,CAAiB,kBAAjB,CAA5B,EAAqEL,KAArE,CAAN;OAEA,OAAOhB,MAAP;;;CAIF;CACA;CACA;;;KA3LA;KAAA,iCA4LkBU,KA5LlB,EA6LC;OACC,IAAIV,MAAM,GAAG,EAAb;OACA,IAAIwB,IAAI,GAAGd,KAAK,CAACc,IAAjB;;OACA,IAAG,CAACA,IAAJ,EACA;SACCA,IAAI,GAAG,MAAP;;;OAGD,IAAI5B,KAAK,GAAG,EAAZ;;OACA,IAAGc,KAAK,CAACkB,cAAN,CAAqB,OAArB,CAAH,EACA;SACChC,KAAK,GAAGsB,cAAI,CAACC,MAAL,CAAYT,KAAK,CAACd,KAAlB,CAAR;QAFD,MAIK,IAAG,KAAKR,IAAL,CAAUsB,KAAK,CAACb,IAAhB,CAAH,EACL;SACCD,KAAK,GAAGsB,cAAI,CAACC,MAAL,CAAY,KAAK/B,IAAL,CAAUsB,KAAK,CAACb,IAAhB,CAAZ,CAAR;;;OAGD,IAAIyB,QAAQ,GAAG,EAAf;;OACA,IAAGZ,KAAK,CAACY,QAAN,KAAmB,IAAtB,EACA;SACCA,QAAQ,GAAG,sBAAX;;;OAGD,IAAIO,SAAS,GAAG,EAAhB;;OACA,IAAInB,KAAK,CAACmB,SAAN,IAAmBpC,cAAI,CAACa,OAAL,CAAaI,KAAK,CAACmB,SAAnB,CAAvB,EACA;SACCA,SAAS,GAAGnB,KAAK,CAACmB,SAAN,CAAgBC,IAAhB,CAAqB,GAArB,CAAZ;;;OAGD,IAAGN,IAAI,KAAK,MAAZ,EACA;SACCxB,MAAM,2BAAmBU,KAAK,CAACb,IAAzB,iCACI,KAAKR,OAAL,CAAagC,GAAb,CAAiB,cAAjB,CADJ,iCAEIzB,KAFJ,eAEa0B,QAFb,8CAIHO,SAJG,MAAN;QAFD,MASK,IAAGL,IAAI,KAAK,SAAZ,EACL;SACC5B,KAAK,GAAG,GAAR;SACAI,MAAM,6CAAkCkB,cAAI,CAACC,MAAL,CAAYT,KAAK,CAACb,IAAlB,CAAlC,eAA6D,KAAKT,IAAL,CAAUsB,KAAK,CAACb,IAAhB,MAA0BD,KAA1B,GAAkC,oBAAlC,GAAyD,EAAtH,SAA2Hc,KAAK,CAACqB,QAAN,GAAiB,sBAAjB,GAA0C,EAArK,SAA0KT,QAA1K,+BACI1B,KADJ,wBACqB,KAAKP,OAAL,CAAagC,GAAb,CAAiB,cAAjB,CADrB,QAAN;QAHI,MAMA,IAAGG,IAAI,KAAK,MAAZ,EACL;SACCxB,MAAM,6BAAqB,KAAKX,OAAL,CAAagC,GAAb,CAAiB,cAAjB,CAArB,uBAAgEH,cAAI,CAACC,MAAL,CAAYT,KAAK,CAACb,IAAlB,CAAhE,eAA2FyB,QAA3F,MAAN;;SACA,IAAGZ,KAAK,CAACtB,IAAN,IAAcK,cAAI,CAACa,OAAL,CAAaI,KAAK,CAACtB,IAAN,CAAW4C,KAAxB,CAAjB,EACA;WACCtB,KAAK,CAACtB,IAAN,CAAW4C,KAAX,CAAiBrC,OAAjB,CAAyB,UAACsC,IAAD,EACzB;aACCjC,MAAM,qBAAcP,cAAI,CAACK,QAAL,CAAcmC,IAAI,CAACC,KAAnB,IAA4B,aAAahB,cAAI,CAACC,MAAL,CAAYc,IAAI,CAACC,KAAjB,CAAb,GAAuC,GAAnE,GAAyE,EAAvF,SAA4FD,IAAI,CAACE,QAAL,GAAgB,sBAAhB,GAAyC,EAArI,cAA2IjB,cAAI,CAACC,MAAL,CAAYc,IAAI,CAACG,IAAjB,CAA3I,cAAN;YAFD;;;SAKDpC,MAAM,eAAN;QAVI,MAYA,IAAGwB,IAAI,KAAK,QAAZ,EACL;SACCxB,MAAM,2BAAmBkB,cAAI,CAACC,MAAL,CAAYT,KAAK,CAACb,IAAlB,CAAnB,iCACID,KADJ,iCAAN;QAFI,MAOA,IAAG4B,IAAI,KAAK,MAAZ,EACL;SACC,IAAMa,YAAY,GAAG,SAAfA,YAAe,OACrB;WAAA,IADuBC,MACvB,QADuBA,MACvB;WACC,IAAM1C,KAAK,GAAG0C,MAAM,CAAC1C,KAAP,CAAa2C,KAAb,CAAmB,UAAnB,EAA+BC,GAA/B,EAAd;WACAF,MAAM,CAACG,UAAP,CAAkBC,WAAlB,CAA8BC,SAA9B,GAA0CzB,cAAI,CAACC,MAAL,CAAYvB,KAAZ,CAA1C;UAHD;;SAKAI,MAAM,GAAGI,aAAG,CAACC,MAAP,kNACOgC,YADP,EAEGnB,cAAI,CAACC,MAAL,CAAYT,KAAK,CAACb,IAAlB,CAFH,EAII,KAAKR,OAAL,CAAagC,GAAb,CAAiB,cAAjB,CAJJ,CAAN;;;OASD,OAAOrB,MAAP;;;CAIF;CACA;CACA;;;KAnRA;KAAA,8BAoReC,OApRf,EAqRC;OAAA;;OACC,IAAID,MAAM,GAAG,IAAb;;OACA,IAAG,CAACP,cAAI,CAACkB,QAAL,CAAcV,OAAd,CAAJ,EACA;SACC,OAAOD,MAAP;;;OAGD,IAAG,CAACP,cAAI,CAACa,OAAL,CAAaL,OAAO,CAAC2C,QAArB,CAAJ,EACA;SACC3C,OAAO,CAAC2C,QAAR,GAAmB,EAAnB;;;OAGD,IAAIC,SAAS,GAAG,EAAhB;;OACA,IAAG5C,OAAO,CAACJ,IAAX,EACA;SACCgD,SAAS,GAAG,UAAU,KAAK7D,EAAf,GAAoB,GAApB,GAA0BiB,OAAO,CAACJ,IAAlC,GAAyC,GAArD;;;OAGDG,MAAM,iBAAU6C,SAAV,sBAA8B,KAAKxD,OAAL,CAAagC,GAAb,CAAiB,kBAAjB,CAA9B,QAAN;;OACA,IAAGpB,OAAO,CAACmB,KAAX,EACA;SACCpB,MAAM,2BAAmB,KAAKX,OAAL,CAAagC,GAAb,CAAiB,cAAjB,CAAnB,gBAAwDH,cAAI,CAACC,MAAL,CAAYlB,OAAO,CAACmB,KAApB,CAAxD,wCAAN;;;OAEDpB,MAAM,YAAN;OAEAA,MAAM,GAAGI,aAAG,CAACC,MAAP,0FAAgBL,MAAhB,CAAN;OAEAC,OAAO,CAAC2C,QAAR,CAAiBjD,OAAjB,CAAyB,UAACmD,OAAD,EACzB;SACC,IAAGrD,cAAI,CAACkB,QAAL,CAAcmC,OAAd,KAA0BA,OAAO,CAACjD,IAArC,EACA;WACC,IAAIa,KAAK,GAAG3B,IAAI,CAACgE,SAAL,CAAe,MAAI,CAAC5D,MAApB,EAA4B2D,OAAO,CAACjD,IAApC,CAAZ;;WACA,IAAGa,KAAH,EACA;aACCV,MAAM,CAACS,WAAP,CAAmB,MAAI,CAACuC,WAAL,CAAiBtC,KAAjB,CAAnB;;;QAPH;OAYA,OAAOV,MAAP;;;CAIF;CACA;;;KAjUA;KAAA,6BAkUcV,SAlUd,EAmUC;OACC,IAAGG,cAAI,CAACc,SAAL,CAAejB,SAAf,CAAH,EACA;SACC,KAAKA,SAAL,GAAiBA,SAAjB;;;;CAKH;CACA;;;KA5UA;KAAA,+BA8UC;OACC,IAAIA,SAAS,GAAG,KAAKA,SAArB;;OACA,IAAG,CAACA,SAAJ,EACA;SACCA,SAAS,GAAG2D,QAAZ;;;OAGD,OAAO3D,SAAP;;;CAIF;CACA;CACA;;;KA3VA;KAAA,8BA4VeoB,KA5Vf,EA6VC;OACC,IAAG,CAACA,KAAK,CAACI,KAAV,EACA;SACC,IAAIxB,SAAS,GAAG,KAAK4D,YAAL,EAAhB;SACAxC,KAAK,CAACI,KAAN,GAAcxB,SAAS,CAAC6D,aAAV,CAAwB,YAAYzC,KAAK,CAACb,IAAlB,GAAyB,IAAjD,CAAd;;;OAGD,OAAOa,KAAK,CAACI,KAAb;;;CAIF;CACA;;;KAzWA;KAAA,0BA2WC;OAAA;;OACC,IAAId,MAAM,GAAG,EAAb;OACA,IAAIV,SAAS,GAAG,KAAK4D,YAAL,EAAhB;;OACA,IAAG5D,SAAS,CAAC8D,QAAV,KAAuB,MAA1B,EACA;SACC,OAAO,IAAIC,QAAJ,CAAa/D,SAAb,CAAP;;;OAED,KAAKH,MAAL,CAAYQ,OAAZ,CAAoB,UAACe,KAAD,EACpB;SACC,IAAII,KAAK,GAAG,MAAI,CAACwC,aAAL,CAAmB5C,KAAnB,CAAZ;;SACA,IAAGjB,cAAI,CAACc,SAAL,CAAeO,KAAf,CAAH,EACA;WACC,IAAGA,KAAK,CAACyC,YAAN,CAAmB,MAAnB,MAA+B,UAAlC,EACA;aACC,IAAGzC,KAAK,CAAC0C,OAAT,EACA;eACCxD,MAAM,CAACU,KAAK,CAACb,IAAP,CAAN,GAAqBqB,cAAI,CAACuC,MAAL,CAAY3C,KAAK,CAAClB,KAAlB,CAArB;;YAJF,MAQA;aACCI,MAAM,CAACU,KAAK,CAACb,IAAP,CAAN,GAAqBqB,cAAI,CAACuC,MAAL,CAAY3C,KAAK,CAAClB,KAAlB,CAArB;;;QAdH;OAmBA,OAAOI,MAAP;;;KArYF;KAAA,0BA8CkB0D,UA9ClB,EA8C8B7D,IA9C9B,EA+CC;OACC,IAAImC,KAAK,GAAG,EAAZ;;OACA,IAAGvC,cAAI,CAACa,OAAL,CAAaoD,UAAb,KAA4BjE,cAAI,CAACK,QAAL,CAAcD,IAAd,CAA/B,EACA;SACCmC,KAAK,GAAG0B,UAAU,CAACC,MAAX,CAAkB,UAAC1B,IAAD,EAC1B;WACC,OAAOA,IAAI,CAACpC,IAAL,KAAcA,IAArB;UAFO,CAAR;;SAIA,IAAGmC,KAAK,CAAC4B,MAAN,GAAe,CAAlB,EACA;WACC,OAAO5B,KAAK,CAAC,CAAD,CAAZ;;;;OAIF,OAAO,IAAP;;;GA7DF;CAAA;;;;;;;;"}