{"version":3,"file":"deliveryselector.bundle.js","sources":["../src/properties/string.js","../src/closabledirective.js","../src/properties/address.js","../src/services/checkbox.js","../src/services/dropdown.js","../src/deliveryselector.js"],"sourcesContent":["export default {\n\tprops: {\n\t\tname: {type: String, required: true},\n\t\tinitValue: {required: false},\n\t\tsettings: {required: false},\n\t\toptions: {required: false},\n\t},\n\tcreated()\n\t{\n\t\tthis.value = this.initValue;\n\t},\n\tdata()\n\t{\n\t\treturn {\n\t\t\tvalue: null,\n\t\t}\n\t},\n\tmethods: {\n\t\tonInput(event)\n\t\t{\n\t\t\tthis.value = event.target.value;\n\n\t\t\tthis.$emit('change', this.value);\n\t\t}\n\t},\n\tcomputed: {\n\t\tisMultiline()\n\t\t{\n\t\t\treturn (this.settings && this.settings.MULTILINE === 'Y');\n\t\t}\n\t},\n\ttemplate: `\n\t\t<div class=\"ui-ctl ui-ctl-w100\">\n\t\t\t<textarea v-if=\"isMultiline\" @input=\"onInput\" :name=\"name\" class=\"ui-ctl-element salescenter-delivery-comment-textarea\" rows=\"1\">{{value}}</textarea>\n\t\t\t<input v-else @input=\"onInput\" type=\"text\" :name=\"name\" :value=\"value\" class=\"ui-ctl-element ui-ctl-textbox\" />\n\t\t</div>\t\t\t\t\t\n\t`\n};\n","let handleOutsideClick;\n\nexport default {\n\tbind (el, binding, vnode) {\n\t\thandleOutsideClick = (e) => {\n\t\t\tif (e.type === 'mousedown' && e.which !== 1)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\te.stopPropagation();\n\t\t\tconst { handler, exclude } = binding.value;\n\t\t\tlet clickedOnExcludedEl = false;\n\t\t\texclude.forEach(refName => {\n\t\t\t\tif (!clickedOnExcludedEl) {\n\t\t\t\t\tconst excludedEl = vnode.context.$refs[refName];\n\t\t\t\t\tif (excludedEl)\n\t\t\t\t\t{\n\t\t\t\t\t\tclickedOnExcludedEl = excludedEl.contains(e.target);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t/**\n\t\t\t * Click inside map wrapper\n\t\t\t */\n\t\t\tif (e.target.closest('.location-map-wrapper'))\n\t\t\t{\n\t\t\t\tclickedOnExcludedEl = true;\n\t\t\t}\n\n\t\t\tif (!el.contains(e.target) && !clickedOnExcludedEl) {\n\t\t\t\tvnode.context[handler]()\n\t\t\t}\n\t\t};\n\t\tdocument.addEventListener('mousedown', handleOutsideClick);\n\t\tdocument.addEventListener('touchstart', handleOutsideClick);\n\t},\n\n\tunbind () {\n\t\tdocument.removeEventListener('mousedown', handleOutsideClick);\n\t\tdocument.removeEventListener('touchstart', handleOutsideClick);\n\t}\n};\n","import {Vue} from 'ui.vue';\nimport ClosableDirective from '../closabledirective';\nimport {Location} from 'location.core';\nimport {State, AutocompleteFeature} from 'location.widget'\nimport 'ui.notification';\nimport '../css/address.css';\n\nexport default\n{\n\tdirectives: {\n\t\tclosable: ClosableDirective\n\t},\n\tprops: {\n\t\tname: {type: String, required: true},\n\t\tinitValue: {},\n\t\tsettings: {},\n\t\toptions: {required: false},\n\t\tisStartMarker: {type: Boolean, required: true},\n\t},\n\tdata()\n\t{\n\t\treturn {\n\t\t\tvalue: null,\n\t\t\tenterTookPlace: false,\n\t\t\trightIcon: null,\n\t\t\tisEntering: false,\n\t\t\tisLoading: false,\n\t\t\teditMode: false,\n\t\t\taddressWidgetState: null,\n\t\t\tenteredAddresses: [],\n\t\t}\n\t},\n\tmethods: {\n\t\tswitchToEditMode()\n\t\t{\n\t\t\tthis.showMap();\n\t\t\tthis.editMode = true;\n\t\t},\n\t\tclarifyAddress()\n\t\t{\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.$refs['input-node'].focus();\n\t\t\t\tthis.$refs['input-node'].click();\n\t\t\t\tthis.$refs['input-node'].click();\n\t\t\t}, 0);\n\t\t},\n\t\tclearAddress()\n\t\t{\n\t\t\tthis.addressWidget.address = null;\n\t\t\tthis.changeValue(null);\n\t\t\tthis.clarifyAddress();\n\t\t},\n\t\tonControlClicked()\n\t\t{\n\t\t\tthis.closeMap();\n\t\t},\n\t\tonControlFocus()\n\t\t{\n\t\t\tthis.enterTookPlace = true;\n\t\t\tthis.isEntering = true;\n\t\t},\n\t\tonControlBlur()\n\t\t{\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.isEntering = false;\n\t\t\t}, 200)\n\n\t\t\tthis.editMode = false;\n\n\t\t\tthis.closeMap();\n\t\t},\n\t\tchangeValue(newValue)\n\t\t{\n\t\t\tthis.value = newValue;\n\n\t\t\tthis.syncRightIcon();\n\n\t\t\tthis.$emit('change', this.value);\n\n\t\t\tif (this.onChangeCallback)\n\t\t\t{\n\t\t\t\tthis.onChangeCallback();\n\t\t\t}\n\t\t},\n\t\tsyncRightIcon()\n\t\t{\n\t\t\tif (this.$refs['input-node'].value.length === 0)\n\t\t\t{\n\t\t\t\tthis.rightIcon = 'search';\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.rightIcon = 'clear';\n\t\t\t}\n\t\t},\n\t\tbuildAddress(value)\n\t\t{\n\t\t\ttry\n\t\t\t{\n\t\t\t\treturn new BX.Location.Core.Address(JSON.parse(value));\n\t\t\t}\n\t\t\tcatch(e)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\t\t},\n\t\tisValueValid(value)\n\t\t{\n\t\t\treturn (\n\t\t\t\tvalue\n\t\t\t\t&& value.latitude\n\t\t\t\t&& value.longitude\n\t\t\t\t&& !(value.latitude === '0' && value.longitude === '0')\n\t\t\t);\n\t\t},\n\t\tgetPresetLocationsProvider()\n\t\t{\n\t\t\treturn () => {\n\t\t\t\tlet result = this.options && this.options.hasOwnProperty('defaultItems')\n\t\t\t\t\t? this.options.defaultItems.map((item) => new Location(item))\n\t\t\t\t\t: [];\n\n\t\t\t\tfor (let enteredAddress of this.enteredAddresses)\n\t\t\t\t{\n\t\t\t\t\tlet location = enteredAddress.toLocation();\n\t\t\t\t\tif (!location)\n\t\t\t\t\t{\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tlocation.name = BX.Location.Core.AddressStringConverter.convertAddressToString(\n\t\t\t\t\t\tenteredAddress,\n\t\t\t\t\t\tthis.addressWidget.addressFormat,\n\t\t\t\t\t\tBX.Location.Core.AddressStringConverter.STRATEGY_TYPE_FIELD_TYPE,\n\t\t\t\t\t\tBX.Location.Core.AddressStringConverter.CONTENT_TYPE_TEXT\n\t\t\t\t\t);\n\n\t\t\t\t\tresult.push(location);\n\t\t\t\t}\n\n\t\t\t\treturn result.filter((location, index, self) =>\n\t\t\t\t\tindex === self.findIndex((l) => (\n\t\t\t\t\t\tl.name === location.name\n\t\t\t\t\t))\n\t\t\t\t);\n\t\t\t};\n\t\t},\n\t\t/**\n\t\t * Map Feature Methods\n\t\t */\n\t\tgetMap()\n\t\t{\n\t\t\tif (!this.addressWidget)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tfor( let feature of this.addressWidget.features)\n\t\t\t{\n\t\t\t\tif(feature instanceof BX.Location.Widget.MapFeature)\n\t\t\t\t{\n\t\t\t\t\treturn feature;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\t\tshowMap()\n\t\t{\n\t\t\tlet map = this.getMap();\n\n\t\t\tif (map)\n\t\t\t{\n\t\t\t\tmap.showMap();\n\t\t\t}\n\t\t},\n\t\tcloseMap()\n\t\t{\n\t\t\tlet map = this.getMap();\n\n\t\t\tif (map)\n\t\t\t{\n\t\t\t\tmap.closeMap();\n\t\t\t}\n\t\t},\n\t},\n\tcomputed: {\n\t\taddressFormatted()\n\t\t{\n\t\t\tif(!this.value || !this.addressWidget)\n\t\t\t{\n\t\t\t\treturn '';\n\t\t\t}\n\n\t\t\tlet address = this.buildAddress(this.value);\n\t\t\tif (!address)\n\t\t\t{\n\t\t\t\treturn '';\n\t\t\t}\n\n\t\t\treturn address.toString(\n\t\t\t\tthis.addressWidget.addressFormat,\n\t\t\t\tBX.Location.Core.AddressStringConverter.STRATEGY_TYPE_FIELD_SORT\n\t\t\t);\n\t\t},\n\t\tisEditMode()\n\t\t{\n\t\t\treturn this.editMode || !this.value;\n\t\t},\n\t\twrapperClass()\n\t\t{\n\t\t\treturn {\n\t\t\t\t'ui-ctl': true,\n\t\t\t\t'ui-ctl-textbox': true,\n\t\t\t\t'ui-ctl-danger': this.needsClarification,\n\t\t\t\t'ui-ctl-w100': true,\n\t\t\t\t'ui-ctl-after-icon': true,\n\t\t\t\t'sale-address-control-top-margin-5 sale-address-control-top-margin-width-820': this.isEditMode\n\t\t\t}\n\t\t},\n\t\tmapMarkerClass()\n\t\t{\n\t\t\treturn {\n\t\t\t\t'salescenter-delivery-path-icon': true,\n\t\t\t\t'salescenter-delivery-path-icon--green': !this.isStartMarker\n\t\t\t};\n\t\t},\n\t\trightIconClass()\n\t\t{\n\t\t\treturn {\n\t\t\t\t'ui-ctl-after': true,\n\t\t\t\t'ui-ctl-icon-btn': true,\n\t\t\t\t'ui-ctl-icon-search': (this.rightIcon === 'search'),\n\t\t\t\t'ui-ctl-icon-clear': (this.rightIcon === 'clear'),\n\t\t\t\t'sale-address-control-path-input-clear': true,\n\t\t\t};\n\t\t},\n\t\tneedsClarification()\n\t\t{\n\t\t\treturn (\n\t\t\t\t!this.isEntering\n\t\t\t\t&& this.enterTookPlace\n\t\t\t\t&& !this.value\n\t\t\t\t&& this.addressWidgetState !== State.DATA_LOADING\n\t\t\t);\n\t\t},\n\t\tlocalize()\n\t\t{\n\t\t\treturn Vue.getFilteredPhrases('SALE_DELIVERY_SERVICE_SELECTOR_');\n\t\t},\n\t},\n\tmounted()\n\t{\n\t\tif (this.initValue)\n\t\t{\n\t\t\tlet initValue = null;\n\t\t\tlet address = JSON.parse(this.initValue);\n\n\t\t\tif (this.isValueValid(address))\n\t\t\t{\n\t\t\t\tinitValue = this.initValue;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t/**\n\t\t\t\t * Simulate invalid input\n\t\t\t\t */\n\t\t\t\tthis.isEntering = false;\n\t\t\t\tthis.enterTookPlace = true;\n\t\t\t}\n\n\t\t\tthis.changeValue(initValue);\n\t\t}\n\n\t\tthis.addressWidget = (new BX.Location.Widget.Factory).createAddressWidget({\n\t\t\taddress: this.initValue ? this.buildAddress(this.initValue) : null,\n\t\t\tmode: BX.Location.Core.ControlMode.edit,\n\t\t\tmapBehavior: 'manual',\n\t\t\tuseFeatures: {\n\t\t\t\tfields: false,\n\t\t\t\tmap: true,\n\t\t\t\tautocomplete: true\n\t\t\t},\n\t\t\tpopupOptions: {\n\t\t\t\toffsetLeft: 14,\n\t\t\t},\n\t\t\tpopupBindOptions: {\n\t\t\t\tforceBindPosition: true,\n\t\t\t},\n\t\t\tpresetLocationsProvider: this.getPresetLocationsProvider()\n\t\t});\n\n\t\t/**\n\t\t * Redefine native onInputKeyup\n\t\t */\n\t\tconst nativeOnInputKeyup = this.addressWidget.onInputKeyup;\n\t\tthis.addressWidget.onInputKeyup = (e: KeyboardEvent) =>\n\t\t{\n\t\t\tswitch (e.code)\n\t\t\t{\n\t\t\t\tcase 'Enter':\n\t\t\t\tcase 'NumpadEnter':\n\t\t\t\t\treturn;\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tnativeOnInputKeyup.call(this.addressWidget, e);\n\t\t};\n\n\t\t/**\n\t\t * Subscribe to widget events\n\t\t */\n\t\tthis.addressWidget.subscribeOnAddressChangedEvent((event) => {\n\t\t\tlet data = event.getData();\n\n\t\t\tthis.editMode = true;\n\n\t\t\tlet address = data.address;\n\n\t\t\tif (!this.isValueValid(address))\n\t\t\t{\n\t\t\t\tthis.changeValue(null);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.enteredAddresses.push(address);\n\t\t\t\tthis.changeValue(address.toJson());\n\t\t\t\tthis.showMap();\n\t\t\t}\n\t\t});\n\n\t\tthis.addressWidget.subscribeOnStateChangedEvent((event) => {\n\t\t\tlet data = event.getData();\n\n\t\t\tthis.addressWidgetState = data.state;\n\n\t\t\tif (data.state === State.DATA_INPUTTING)\n\t\t\t{\n\t\t\t\tthis.changeValue(null);\n\t\t\t\tthis.closeMap();\n\t\t\t}\n\t\t\telse if (data.state === State.DATA_LOADING)\n\t\t\t{\n\t\t\t\tthis.isLoading = true;\n\t\t\t}\n\t\t\telse if (data.state === State.DATA_LOADED)\n\t\t\t{\n\t\t\t\tthis.isLoading = false;\n\t\t\t}\n\t\t});\n\n\t\tthis.addressWidget.subscribeOnFeatureEvent((event) => {\n\t\t\tlet data = event.getData();\n\n\t\t\tif (data.feature instanceof AutocompleteFeature)\n\t\t\t{\n\t\t\t\tif (data.eventCode === AutocompleteFeature.searchStartedEvent)\n\t\t\t\t{\n\t\t\t\t\tthis.isLoading = true;\n\t\t\t\t}\n\t\t\t\telse if (data.eventCode === AutocompleteFeature.searchCompletedEvent)\n\t\t\t\t{\n\t\t\t\t\tthis.isLoading = false;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tthis.addressWidget.subscribeOnErrorEvent((event) => {\n\t\t\tlet data = event.getData();\n\t\t\tlet errors = data.errors;\n\t\t\tlet errorMessage = errors\n\t\t\t\t.map((error) => error.message + (error.code.length ? `${error.code}` : ''))\n\t\t\t\t.join(', ');\n\n\t\t\tthis.isLoading = false;\n\n\t\t\tBX.UI.Notification.Center.notify({\n\t\t\t\tcontent: errorMessage,\n\t\t\t});\n\t\t});\n\n\t\t/**\n\t\t * Render widget\n\t\t */\n\t\tthis.addressWidget.render({\n\t\t\tinputNode: this.$refs['input-node'],\n\t\t\tautocompleteMenuElement: this.$refs['autocomplete-menu'],\n\t\t\tmapBindElement: this.$refs['map-marker'],\n\t\t\tcontrolWrapper: this.$refs['autocomplete-menu'],\n\t\t});\n\n\t\tthis.syncRightIcon();\n\t},\n\ttemplate: `\n\t\t<div class=\"salescenter-delivery-path-control\">\n\t\t\t<div ref=\"map-marker\" :class=\"mapMarkerClass\"></div>\n\t\t\t\t<div\n\t\t\t\t\tv-closable=\"{\n\t\t\t\t\t\texclude: ['input-node'],\n\t\t\t\t\t\thandler: 'onControlBlur'\n\t\t\t\t\t}\"\n\t\t\t\t\tclass=\"ui-ctl-w100\"\n\t\t\t\t>\n\t\t\t\t\t<div :class=\"wrapperClass\">\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tv-show=\"isLoading\"\n\t\t\t\t\t\t\tclass=\"ui-ctl-after ui-ctl-icon-loader\"\n\t\t\t\t\t\t></div>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tv-show=\"isEditMode\" \n\t\t\t\t\t\t\tref=\"autocomplete-menu\"\n\t\t\t\t\t\t\tclass=\"sale-address-control-path-input-wrapper\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t@click=\"onControlClicked\"\n\t\t\t\t\t\t\t\t@focus=\"onControlFocus\"\n\t\t\t\t\t\t\t\tref=\"input-node\"\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tv-show=\"!isLoading && isEditMode\"\n\t\t\t\t\t\t\t\t@click=\"clearAddress\"\n\t\t\t\t\t\t\t\t@mouseover.stop.prevent=\"\"\n\t\t\t\t\t\t\t\t:class=\"rightIconClass\"\n\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\tv-show=\"needsClarification\"\n\t\t\t\t\t\t\t\t@mouseover.stop.prevent=\"\"\n\t\t\t\t\t\t\t\t@click=\"clarifyAddress\"\n\t\t\t\t\t\t\t\tclass=\"sale-address-control-path-input--alert\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{{localize.SALE_DELIVERY_SERVICE_SELECTOR_CLARIFY_ADDRESS}}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div v-show=\"!isEditMode\"class=\"sale-address-control-path-input-wrapper\">\n\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t@click=\"switchToEditMode\"\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tclass=\"ui-ctl-element ui-ctl-textbox sale-address-control-path-input\"\n\t\t\t\t\t\t\t\tcontenteditable=\"false\"\n\t\t\t\t\t\t\t\tv-html=\"addressFormatted\"\n\t\t\t\t\t\t\t></span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<input v-model=\"value\" :name=\"name\" type=\"hidden\" />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`\n};\n","export default {\n\tprops: {\n\t\tname: {required: false},\n\t\tinitValue: {required: false},\n\t},\n\tcreated()\n\t{\n\t\tthis.value = this.initValue;\n\t},\n\tdata()\n\t{\n\t\treturn {\n\t\t\tvalue: null\n\t\t}\n\t},\n\tmethods: {\n\t\tonChange(event)\n\t\t{\n\t\t\tthis.value =  event.target.checked ? 'Y' : '';\n\t\t\tthis.$emit('change', this.value);\n\t\t}\n\t},\n\ttemplate: `\n\t\t<label class=\"salescenter-delivery-selector salescenter-delivery-selector--hover salescenter-delivery-selector--checkbox\">\n\t\t\t<input @change=\"onChange\" :checked=\"value == 'Y' ? true : false\" type=\"checkbox\" value=\"Y\" />\n\t\t\t<span class=\"salescenter-delivery-selector-text\">{{name}}</span>\n\t\t</label>\n\t`\n};\n","import {Menu} from 'main.popup'\n\nexport default {\n\tprops: {\n\t\tname: {required: false},\n\t\tinitValue: {required: false},\n\t\toptions: {required: true, type: Array}\n\t},\n\tcreated()\n\t{\n\t\tthis.value = this.initValue;\n\t},\n\tdata()\n\t{\n\t\treturn {\n\t\t\tvalue: null\n\t\t}\n\t},\n\tmethods: {\n\t\tgetSelectedItemTitle()\n\t\t{\n\t\t\tlet selectedItem = this.getSelectedItem();\n\t\t\tif (!selectedItem || selectedItem.id === 'null')\n\t\t\t{\n\t\t\t\treturn this.name;\n\t\t\t}\n\t\t\treturn selectedItem.title;\n\t\t},\n\t\tgetSelectedItem()\n\t\t{\n\t\t\tfor (let option of this.options)\n\t\t\t{\n\t\t\t\tif (option.id === this.value)\n\t\t\t\t{\n\t\t\t\t\treturn option;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\n\t\tshowPopupMenu(e)\n\t\t{\n\t\t\tlet menuItems = [];\n\t\t\tfor (let option of this.options)\n\t\t\t{\n\t\t\t\tmenuItems.push(\n\t\t\t\t\t{\n\t\t\t\t\t\t'text': option.title,\n\t\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\t\tthis.value =  option.id;\n\t\t\t\t\t\t\tthis.$emit('change', this.value);\n\n\t\t\t\t\t\t\tthis.popupMenu.close();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tthis.popupMenu = new Menu({\n\t\t\t\tbindElement: e.target,\n\t\t\t\titems: menuItems,\n\t\t\t\tangle: true,\n\t\t\t\tcloseByEsc: true,\n\t\t\t\toffsetLeft: 40,\n\t\t\t});\n\n\t\t\tthis.popupMenu.show();\n\t\t}\n\t},\n\ttemplate: `\n\t\t<div @click=\"showPopupMenu($event)\" class=\"salescenter-delivery-selector salescenter-delivery-selector--dropdown\">\n\t\t\t<span class=\"salescenter-delivery-selector-text\">{{getSelectedItemTitle()}}</span>\n\t\t</div>\n\t`\n};\n","import {Vue} from 'ui.vue';\nimport {ajax} from 'main.core';\nimport {Manager} from 'salescenter.manager';\nimport {Ears} from 'ui.ears';\nimport StringControl from './properties/string';\nimport AddressControl from './properties/address';\nimport CheckboxService from './services/checkbox';\nimport DropdownService from './services/dropdown';\nimport Hint from 'salescenter.component.stage-block.hint';\nimport {Tag, Text} from 'main.core';\nimport {Loc} from 'main.core';\nimport 'currency';\n\nimport './css/deliveryselector.css';\n\nexport default {\n\tcomponents: {\n\t\t/**\n\t\t * Properties Control Types\n\t\t */\n\t\t'ADDRESS-control': AddressControl,\n\t\t'STRING-control': StringControl,\n\t\t/**\n\t\t * Extra Services Control Types\n\t\t */\n\t\t'checkbox-service': CheckboxService,\n\t\t'dropdown-service': DropdownService,\n\t},\n\tprops: {\n\t\tinitDeliveryServiceId: {required: false},\n\t\tinitRelatedServicesValues: {required: false},\n\t\tinitRelatedPropsValues: {required: false},\n\t\tinitRelatedPropsOptions: {required: false},\n\t\tinitResponsibleId: {default: null, required: false},\n\t\tinitEnteredDeliveryPrice: {required: false},\n\t\tpersonTypeId: {required: true},\n\t\taction: {type: String, required: true },\n\t\tactionData: {type: Object, required: true },\n\t\texternalSum: {required: true},\n\t\texternalSumLabel: {type: String, required: true},\n\t\tcurrency: {type: String, required: true},\n\t\tcurrencySymbol: {type: String, required: true},\n\t\tavailableServices: {type: Object, required: true},\n\t\texcludedServiceIds: {type: Array, required: true},\n\t},\n\tdata()\n\t{\n\t\treturn {\n\t\t\t/**\n\t\t\t * Selected Service\n\t\t\t */\n\t\t\tselectedDeliveryService: null,\n\t\t\tdeliveryServices: [],\n\n\t\t\t/**\n\t\t\t * Props\n\t\t\t */\n\t\t\trelatedProps: [],\n\t\t\trelatedPropsOfAddressType: [],\n\t\t\trelatedPropsOfOtherTypes: [],\n\t\t\trelatedPropsValues: {},\n\n\t\t\t/**\n\t\t\t * Extra Services\n\t\t\t */\n\t\t\trelatedServices: [],\n\t\t\trelatedServicesValues: {},\n\n\t\t\t/**\n\t\t\t * Prices\n\t\t\t */\n\t\t\testimatedDeliveryPrice: null,\n\t\t\tenteredDeliveryPrice: null,\n\t\t\t/**\n\t\t\t * Responsible User\n\t\t\t */\n\t\t\tresponsibleUser: null,\n\n\t\t\t/**\n\t\t\t * Processing Indicators\n\t\t\t */\n\t\t\tisCalculated: false,\n\t\t\tisCalculating: false,\n\n\t\t\tcalculateErrors: [],\n\n\t\t\trestrictionsHintPopup: null,\n\t\t};\n\t},\n\tmethods: {\n\t\tinitialize()\n\t\t{\n\t\t\tajax.runAction(\n\t\t\t\t'salescenter.deliveryselector.getinitializationdata',\n\t\t\t\t{data: {\n\t\t\t\t\t\tpersonTypeId: this.personTypeId,\n\t\t\t\t\t\tresponsibleId: this.initResponsibleId,\n\t\t\t\t\t\texcludedServiceIds: this.excludedServiceIds\n\t\t\t\t\t}}\n\t\t\t).then((result) => {\n\t\t\t\t/**\n\t\t\t\t * Delivery services\n\t\t\t\t */\n\n\t\t\t\tthis.deliveryServices = result.data.services;\n\n\t\t\t\tif (this.deliveryServices.length > 0)\n\t\t\t\t{\n\t\t\t\t\tlet initDeliveryServiceId = this.selectedDeliveryService\n\t\t\t\t\t\t? this.selectedDeliveryService.id\n\t\t\t\t\t\t: (this.initDeliveryServiceId ? this.initDeliveryServiceId : null);\n\n\t\t\t\t\tif (initDeliveryServiceId)\n\t\t\t\t\t{\n\t\t\t\t\t\tfor (let deliveryService of this.deliveryServices)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (deliveryService.id == initDeliveryServiceId)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.onDeliveryServiceChanged(deliveryService, true);\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tfor (let profile of deliveryService.profiles)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif (profile.id == initDeliveryServiceId)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tthis.onDeliveryServiceChanged(profile, true);\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t/**\n\t\t\t\t * Related props\n\t\t\t\t */\n\t\t\t\tlet relatedProps = result.data.properties;\n\n\t\t\t\t/**\n\t\t\t\t * Setting default values to related props\n\t\t\t\t */\n\t\t\t\tfor (let relatedProp of relatedProps)\n\t\t\t\t{\n\t\t\t\t\tlet initValue = null;\n\n\t\t\t\t\tif (this.initRelatedPropsValues\n\t\t\t\t\t\t&& this.initRelatedPropsValues.hasOwnProperty(relatedProp.id)\n\t\t\t\t\t)\n\t\t\t\t\t{\n\t\t\t\t\t\tinitValue = this.initRelatedPropsValues[relatedProp.id];\n\t\t\t\t\t}\n\t\t\t\t\telse if (relatedProp.initValue)\n\t\t\t\t\t{\n\t\t\t\t\t\tinitValue = relatedProp.initValue;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (initValue !== null)\n\t\t\t\t\t{\n\t\t\t\t\t\tinitValue = (typeof initValue === 'object') ? JSON.stringify(initValue) : initValue;\n\n\t\t\t\t\t\tVue.set(this.relatedPropsValues, relatedProp.id, initValue);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis.relatedProps = relatedProps;\n\t\t\t\tthis.relatedPropsOfAddressType = this.relatedProps.filter((item) => item.type === 'ADDRESS');\n\t\t\t\tthis.relatedPropsOfOtherTypes = this.relatedProps.filter((item) => item.type !== 'ADDRESS');\n\n\t\t\t\t/**\n\t\t\t\t * Related services\n\t\t\t\t */\n\t\t\t\tlet relatedServices = result.data.extraServices;\n\n\t\t\t\tfor (let relatedService of relatedServices)\n\t\t\t\t{\n\t\t\t\t\tlet initValue = null;\n\n\t\t\t\t\tif (this.initRelatedServicesValues\n\t\t\t\t\t\t&& this.initRelatedServicesValues.hasOwnProperty(relatedService.id)\n\t\t\t\t\t)\n\t\t\t\t\t{\n\t\t\t\t\t\tinitValue = this.initRelatedServicesValues[relatedService.id];\n\t\t\t\t\t}\n\t\t\t\t\telse if (relatedService.initValue)\n\t\t\t\t\t{\n\t\t\t\t\t\tinitValue = relatedService.initValue;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (initValue !== null)\n\t\t\t\t\t{\n\t\t\t\t\t\tVue.set(this.relatedServicesValues, relatedService.id, initValue);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.relatedServices = relatedServices;\n\n\t\t\t\t/**\n\t\t\t\t * Responsible\n\t\t\t\t */\n\t\t\t\tthis.responsibleUser = result.data.responsible;\n\n\t\t\t\t/**\n\t\t\t\t * Misc\n\t\t\t\t */\n\t\t\t\tthis._userPageTemplate = result.data.userPageTemplate;\n\n\t\t\t\tthis._deliverySettingsUrl = result.data.deliverySettingsUrl;\n\n\t\t\t\t/**\n\t\t\t\t *\n\t\t\t\t */\n\t\t\t\tif (this.initEnteredDeliveryPrice !== null)\n\t\t\t\t{\n\t\t\t\t\tthis.enteredDeliveryPrice = this.initEnteredDeliveryPrice;\n\t\t\t\t}\n\n\t\t\t\t(new Ears({\n\t\t\t\t\tcontainer: this.$refs['delivery-methods'],\n\t\t\t\t\tsmallSize: true,\n\t\t\t\t\tnoScrollbar: true\n\t\t\t\t})).init();\n\n\t\t\t\tthis.emitChange();\n\t\t\t\tthis.recalculateRelatedServiceAvailabilities();\n\t\t\t});\n\t\t},\n\t\tcalculate()\n\t\t{\n\t\t\tif (!this.isCalculatingAllowed)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.isCalculating = true;\n\n\t\t\tlet calculationFinallyCallback = (status, payload) =>\n\t\t\t{\n\t\t\t\tthis.isCalculating = false;\n\t\t\t\tthis.isCalculated = true;\n\t\t\t\tthis.emitChange();\n\t\t\t};\n\n\t\t\tlet actionData = Object.assign(\n\t\t\t\t{},\n\t\t\t\tthis.actionData,\n\t\t\t\t{\n\t\t\t\t\tdeliveryServiceId: this.selectedDeliveryServiceId,\n\t\t\t\t\tshipmentPropValues: this.currentRelatedPropsValues,\n\t\t\t\t\tdeliveryRelatedServiceValues: this.currentRelatedServicesValues,\n\t\t\t\t\tdeliveryResponsibleId: this.responsibleUser ? this.responsibleUser.id : null,\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tajax.runAction(this.action, {data: actionData}).then((result) => {\n\t\t\t\tlet deliveryPrice = result.data.deliveryPrice;\n\n\t\t\t\tthis.estimatedDeliveryPrice = deliveryPrice;\n\t\t\t\tthis.enteredDeliveryPrice = deliveryPrice;\n\n\t\t\t\tthis.calculateErrors = [];\n\t\t\t\tcalculationFinallyCallback();\n\t\t\t}).catch((result) => {\n\t\t\t\tthis.estimatedDeliveryPrice = null;\n\t\t\t\tthis.enteredDeliveryPrice = 0.00;\n\n\t\t\t\tthis.calculateErrors = result.errors.map((item) => item.message);\n\t\t\t\tcalculationFinallyCallback();\n\t\t\t});\n\t\t},\n\t\topenChangeResponsibleDialog(event)\n\t\t{\n\t\t\tlet self = this;\n\n\t\t\tif (typeof(this._userEditor) === 'undefined')\n\t\t\t{\n\t\t\t\tthis._userEditor = new BX.Crm.EntityEditorUserSelector();\n\n\t\t\t\tthis._userEditor.initialize(\n\t\t\t\t\t'deliverySelectorUserEditor',\n\t\t\t\t\t{\n\t\t\t\t\t\tcallback(item, type, search, bUndeleted)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tself.responsibleUser = {\n\t\t\t\t\t\t\t\tid: type.entityId,\n\t\t\t\t\t\t\t\tname: type.name,\n\t\t\t\t\t\t\t\tphoto: type.avatar,\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tself.emitChange();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tthis._userEditor.open(\n\t\t\t\tevent.target.parentElement\n\t\t\t);\n\t\t},\n\t\tonDeliveryServiceChanged(deliveryService, selfCall = false)\n\t\t{\n\t\t\tif (!this.isServiceAvailable(deliveryService) && !selfCall)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!deliveryService.parentId && deliveryService.profiles.length > 0)\n\t\t\t{\n\t\t\t\tlet firstAvailableProfile;\n\t\t\t\tfor (let profile of deliveryService.profiles)\n\t\t\t\t{\n\t\t\t\t\tif (this.isServiceAvailable(profile))\n\t\t\t\t\t{\n\t\t\t\t\t\tfirstAvailableProfile = profile;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (firstAvailableProfile)\n\t\t\t\t{\n\t\t\t\t\tthis.onDeliveryServiceChanged(firstAvailableProfile, true);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.onDeliveryServiceChanged(deliveryService.profiles[0], true);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.selectedDeliveryService = deliveryService;\n\t\t\t\tthis.emitChange();\n\t\t\t\tthis.emitServiceChanged();\n\t\t\t}\n\t\t},\n\t\tisNoDeliveryService(service)\n\t\t{\n\t\t\treturn service['code'] === 'NO_DELIVERY';\n\t\t},\n\t\tisServiceAvailable(service)\n\t\t{\n\t\t\treturn this.availableServices.hasOwnProperty(service.id);\n\t\t},\n\t\tisServiceProfitable(service)\n\t\t{\n\t\t\treturn (\n\t\t\t\tservice.hasOwnProperty('tags')\n\t\t\t\t&& Array.isArray(service.tags)\n\t\t\t\t&& service.tags.includes('profitable')\n\t\t\t);\n\t\t},\n\t\tonPropValueChanged(event, relatedProp)\n\t\t{\n\t\t\tVue.set(this.relatedPropsValues, relatedProp.id, event);\n\n\t\t\tthis.emitChange();\n\t\t\tif (relatedProp.isAddressFrom)\n\t\t\t{\n\t\t\t\tthis.emitAddressFromChanged();\n\t\t\t}\n\t\t},\n\t\tonServiceValueChanged(event, relatedService)\n\t\t{\n\t\t\tVue.set(this.relatedServicesValues, relatedService.id, event);\n\t\t\tthis.emitChange();\n\t\t},\n\t\tresponsibleUserClicked()\n\t\t{\n\t\t\tManager.openSlider(this.responsibleUserLink);\n\t\t},\n\t\temitChange()\n\t\t{\n\t\t\tthis.$emit('change', this.state);\n\t\t},\n\t\temitAddressFromChanged()\n\t\t{\n\t\t\tthis.$emit('address-from-changed');\n\t\t},\n\t\temitServiceChanged()\n\t\t{\n\t\t\tthis.$emit('delivery-service-changed');\n\t\t},\n\t\tformatMoney(value)\n\t\t{\n\t\t\treturn BX.Currency.currencyFormat(value, this.currency, false);\n\t\t},\n\t\tisNumber: function(event) {\n\t\t\tevent = (event) ? event : window.event;\n\t\t\tvar charCode = (event.which) ? event.which : event.keyCode;\n\t\t\tif ((charCode > 31 && (charCode < 48 || charCode > 57)) && charCode !== 46) {\n\t\t\t\tevent.preventDefault();\n\t\t\t} else {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\tgetPropValue(relatedProp)\n\t\t{\n\t\t\tif (!this.relatedPropsValues)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\treturn this.relatedPropsValues.hasOwnProperty(relatedProp.id) ? this.relatedPropsValues[relatedProp.id] : null;\n\t\t},\n\t\tgetPropOptions(relatedProp)\n\t\t{\n\t\t\tif (!this.initRelatedPropsOptions)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\treturn this.initRelatedPropsOptions.hasOwnProperty(relatedProp.id) ? this.initRelatedPropsOptions[relatedProp.id] : null;\n\t\t},\n\t\tgetPropName(relatedProp)\n\t\t{\n\t\t\tif (relatedProp.isAddressFrom)\n\t\t\t{\n\t\t\t\treturn Loc.getMessage('SALE_DELIVERY_SERVICE_SHIPMENT_ADDRESS_FROM_LABEL');\n\t\t\t}\n\n\t\t\tif (relatedProp.isAddressTo)\n\t\t\t{\n\t\t\t\treturn Loc.getMessage('SALE_DELIVERY_SERVICE_SHIPMENT_ADDRESS_TO_LABEL');\n\t\t\t}\n\n\t\t\treturn relatedProp.name;\n\t\t},\n\t\tgetServiceValue(relatedService)\n\t\t{\n\t\t\tif (!this.relatedServicesValues)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\treturn this.relatedServicesValues.hasOwnProperty(relatedService.id) ? this.relatedServicesValues[relatedService.id] : null;\n\t\t},\n\t\tonAddMoreClicked()\n\t\t{\n\t\t\tManager.openSlider(this._deliverySettingsUrl).then(() => {\n\t\t\t\tthis.initialize();\n\t\t\t\tthis.$emit('settings-changed');\n\t\t\t});\n\t\t},\n\t\tgetDeliveryServiceById(id)\n\t\t{\n\t\t\tfor (let deliveryService of this.deliveryServices)\n\t\t\t{\n\t\t\t\tif (deliveryService.id == id)\n\t\t\t\t{\n\t\t\t\t\treturn deliveryService;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\t\tisParentDeliveryServiceSelected(deliveryService)\n\t\t{\n\t\t\tif (!this.selectedParentDeliveryService)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn this.selectedParentDeliveryService.id == deliveryService.id;\n\t\t},\n\t\tonRestrictionsHintShow(e, profile)\n\t\t{\n\t\t\tthis.restrictionsHintPopup = new Hint.Popup();\n\t\t\tthis.restrictionsHintPopup.show(e.target, this.buildRestrictionsNode(profile));\n\n\t\t},\n\t\tisVisibleProfileRestriction(profile)\n\t\t{\n\t\t\treturn (profile.restrictions && Array.isArray(profile.restrictions) && profile.restrictions.length > 0);\n\t\t},\n\t\tbuildRestrictionsNode(profile)\n\t\t{\n\t\t\tlet restrictionsNodes = profile.restrictions.map((restriction) => `<div>${Text.encode(restriction)}</div>`);\n\n\t\t\treturn Tag.render `<div>${restrictionsNodes.join('')}</div>`;\n\t\t},\n\t\tonRestrictionsHintHide(e)\n\t\t{\n\t\t\tif (this.restrictionsHintPopup)\n\t\t\t{\n\t\t\t\tthis.restrictionsHintPopup.hide();\n\t\t\t}\n\t\t},\n\t\tisProfileSelected(profile)\n\t\t{\n\t\t\treturn (\n\t\t\t\tthis.selectedDeliveryService\n\t\t\t\t&& this.selectedDeliveryService.id == profile.id\n\t\t\t\t&& this.isServiceAvailable(profile)\n\t\t\t);\n\t\t},\n\t\tgetProfileClass(profile)\n\t\t{\n\t\t\treturn {\n\t\t\t\t'salescenter-delivery-car-item': true,\n\t\t\t\t'salescenter-delivery-car-item--selected': this.isProfileSelected(profile),\n\t\t\t\t'salescenter-delivery-car-item--disabled': !this.isServiceAvailable(profile)\n\t\t\t};\n\t\t},\n\t\tisRelatedServiceRelevant(relatedService)\n\t\t{\n\t\t\treturn relatedService.deliveryServiceIds.includes(this.selectedDeliveryServiceId);\n\t\t},\n\t\tisRelatedServiceAvailable(relatedService)\n\t\t{\n\t\t\treturn (\n\t\t\t\trelatedService.hasOwnProperty('isAvailable')\n\t\t\t\t&& relatedService.isAvailable\n\t\t\t);\n\t\t},\n\t\tgetRelatedServiceStyle(relatedService)\n\t\t{\n\t\t\treturn {\n\t\t\t\t'opacity': this.isRelatedServiceAvailable(relatedService) ? 1 : 0.5,\n\t\t\t\t'pointer-events': this.isRelatedServiceAvailable(relatedService) ? 'auto' : 'none',\n\t\t\t};\n\t\t},\n\t\tgetProfileLogoStyle(logo)\n\t\t{\n\t\t\tif (!logo)\n\t\t\t{\n\t\t\t\treturn {};\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tbackgroundImage: 'url(' + logo.src + ')',\n\t\t\t\tbackgroundSize: (logo.width < 55)\n\t\t\t\t\t? 'auto'\n\t\t\t\t\t: 'contain'\n\t\t\t};\n\t\t},\n\t\trecalculateRelatedServiceAvailabilities()\n\t\t{\n\t\t\tfor (let i = 0; i < this.relatedServices.length; i++)\n\t\t\t{\n\t\t\t\tlet relatedService = this.relatedServices[i];\n\n\t\t\t\tlet isAvailable = false;\n\t\t\t\tfor (let deliveryServiceId of relatedService.deliveryServiceIds)\n\t\t\t\t{\n\t\t\t\t\tif (this.availableServices.hasOwnProperty(deliveryServiceId))\n\t\t\t\t\t{\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tthis.availableServices[deliveryServiceId] === null\n\t\t\t\t\t\t\t|| (\n\t\t\t\t\t\t\t\tArray.isArray(this.availableServices[deliveryServiceId])\n\t\t\t\t\t\t\t\t&& this.availableServices[deliveryServiceId].includes(relatedService.id)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tisAvailable = true;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\trelatedService.isAvailable = isAvailable;\n\n\t\t\t\tVue.set(this.relatedServices, i, relatedService);\n\t\t\t}\n\t\t},\n\t},\n\tcreated()\n\t{\n\t\tthis.initialize();\n\t},\n\twatch: {\n\t\tenteredDeliveryPrice(value)\n\t\t{\n\t\t\tthis.emitChange();\n\t\t},\n\t\tareProfilesVisible(newValue, oldValue)\n\t\t{\n\t\t\tif (!oldValue && newValue)\n\t\t\t{\n\t\t\t\t//uncomment the block belowe to apply the ears plugin to profiles' section\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t(new Ears({\n\t\t\t\t\t\tcontainer: this.$refs['delivery-profiles'],\n\t\t\t\t\t\tsmallSize: true,\n\t\t\t\t\t\tnoScrollbar: true,\n\t\t\t\t\t\tclassName: 'salescenter-delivery-ears'\n\t\t\t\t\t})).init();\n\t\t\t\t}, 0);\n\t\t\t}\n\t\t},\n\t\tisSelectedDeliveryServiceAvailable(newValue, oldValue)\n\t\t{\n\t\t\tif (oldValue && !newValue)\n\t\t\t{\n\t\t\t\tthis.isCalculated = false;\n\t\t\t\tthis.estimatedDeliveryPrice = null;\n\t\t\t\tthis.enteredDeliveryPrice = 0.00;\n\t\t\t}\n\t\t},\n\t\tavailableServices(newValue)\n\t\t{\n\t\t\tthis.recalculateRelatedServiceAvailabilities();\n\t\t},\n\t},\n\tcomputed: {\n\t\tstate()\n\t\t{\n\t\t\treturn {\n\t\t\t\tdeliveryServiceId: this.selectedDeliveryServiceId,\n\t\t\t\tdeliveryServiceName: this.selectedDeliveryServiceName,\n\t\t\t\tdeliveryPrice: this.deliveryPrice,\n\t\t\t\testimatedDeliveryPrice: this.estimatedDeliveryPrice,\n\t\t\t\trelatedPropsValues: this.currentRelatedPropsValues,\n\t\t\t\trelatedServicesValues: this.currentRelatedServicesValues,\n\t\t\t\tresponsibleUser: this.responsibleUser,\n\t\t\t};\n\t\t},\n\t\tselectedDeliveryServiceId()\n\t\t{\n\t\t\treturn this.selectedDeliveryService ? this.selectedDeliveryService.id : null;\n\t\t},\n\t\tselectedDeliveryServiceName()\n\t\t{\n\t\t\tif (!this.selectedDeliveryService)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tif (this.selectedParentDeliveryService === this.selectedDeliveryService)\n\t\t\t{\n\t\t\t\treturn this.selectedDeliveryService.name;\n\t\t\t}\n\n\t\t\treturn this.selectedParentDeliveryService.name + ': ' + this.selectedDeliveryService.name;\n\t\t},\n\t\tselectedParentDeliveryService()\n\t\t{\n\t\t\tif (!this.selectedDeliveryService)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn this.selectedDeliveryService.parentId\n\t\t\t\t? this.getDeliveryServiceById(this.selectedDeliveryService.parentId)\n\t\t\t\t: this.selectedDeliveryService;\n\t\t},\n\t\tselectedNoDelivery()\n\t\t{\n\t\t\treturn this.selectedDeliveryService && this.isNoDeliveryService(this.selectedDeliveryService);\n\t\t},\n\t\tisCalculatingAllowed()\n\t\t{\n\t\t\treturn this.selectedDeliveryServiceId\n\t\t\t\t&& this.arePropValuesReady\n\t\t\t\t&& this.isSelectedDeliveryServiceAvailable\n\t\t\t\t&& !this.isCalculating;\n\t\t},\n\t\tcurrentRelatedPropsValues()\n\t\t{\n\t\t\tlet result = [];\n\n\t\t\tif (!this.selectedDeliveryServiceId)\n\t\t\t{\n\t\t\t\treturn result;\n\t\t\t}\n\n\t\t\tfor (let relatedProp of this.relatedProps)\n\t\t\t{\n\t\t\t\tif (!relatedProp.deliveryServiceIds.includes(this.selectedDeliveryServiceId))\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif (this.relatedPropsValues.hasOwnProperty(relatedProp.id))\n\t\t\t\t{\n\t\t\t\t\tresult.push(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tid: relatedProp.id,\n\t\t\t\t\t\t\tvalue: this.relatedPropsValues[relatedProp.id]\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn result;\n\t\t},\n\t\tisResponsibleUserSectionVisible()\n\t\t{\n\t\t\treturn this.responsibleUser && !this.selectedNoDelivery;\n\t\t},\n\t\tresponsibleUserLink()\n\t\t{\n\t\t\tif (!this.responsibleUser)\n\t\t\t{\n\t\t\t\treturn '';\n\t\t\t}\n\n\t\t\treturn this._userPageTemplate.replace('#user_id#', this.responsibleUser.id);\n\t\t},\n\t\tarePropValuesReady()\n\t\t{\n\t\t\tif (!this.selectedDeliveryServiceId)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tfor (let relatedProp of this.relatedProps)\n\t\t\t{\n\t\t\t\tif (!relatedProp.deliveryServiceIds.includes(this.selectedDeliveryServiceId))\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif (relatedProp.required && !this.relatedPropsValues[relatedProp.id])\n\t\t\t\t{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn true;\n\t\t},\n\t\tcurrentRelatedServicesValues()\n\t\t{\n\t\t\tlet result = [];\n\n\t\t\tif (!this.selectedDeliveryServiceId)\n\t\t\t{\n\t\t\t\treturn result;\n\t\t\t}\n\n\t\t\tfor (let relatedService of this.relatedServices)\n\t\t\t{\n\t\t\t\tif (\n\t\t\t\t\t! (\n\t\t\t\t\t\tthis.isRelatedServiceRelevant(relatedService)\n\t\t\t\t\t\t&& this.isRelatedServiceAvailable(relatedService)\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif (this.relatedServicesValues.hasOwnProperty(relatedService.id))\n\t\t\t\t{\n\t\t\t\t\tresult.push(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tid: relatedService.id,\n\t\t\t\t\t\t\tvalue: this.relatedServicesValues[relatedService.id]\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn result;\n\t\t},\n\t\ttotalPrice()\n\t\t{\n\t\t\tlet result = this.externalSum;\n\n\t\t\tif (this.deliveryPrice !== null)\n\t\t\t{\n\t\t\t\tresult += this.deliveryPrice;\n\t\t\t}\n\t\t\treturn result;\n\t\t},\n\t\ttotalPriceFormatted()\n\t\t{\n\t\t\treturn this.formatMoney(this.totalPrice);\n\t\t},\n\t\tdeliveryPrice()\n\t\t{\n\t\t\tif (!this.selectedDeliveryServiceId)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tif (this.selectedNoDelivery)\n\t\t\t{\n\t\t\t\treturn 0;\n\t\t\t}\n\n\t\t\tif (this.enteredDeliveryPrice)\n\t\t\t{\n\t\t\t\treturn +this.enteredDeliveryPrice;\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\t\tdeliveryPriceFormatted()\n\t\t{\n\t\t\treturn this.formatMoney(this.deliveryPrice);\n\t\t},\n\t\testimatedDeliveryPriceFormatted()\n\t\t{\n\t\t\treturn this.formatMoney(this.estimatedDeliveryPrice);\n\t\t},\n\t\texternalSumFormatted()\n\t\t{\n\t\t\treturn this.formatMoney(this.externalSum);\n\t\t},\n\t\tcalculateDeliveryPriceButtonClass()\n\t\t{\n\t\t\treturn {\n\t\t\t\t'ui-btn': true,\n\t\t\t\t'ui-btn-light-border': true,\n\t\t\t\t'salescenter-delivery-bottom-update-icon': true,\n\t\t\t\t'ui-btn-disabled': !this.isCalculatingAllowed,\n\t\t\t};\n\t\t},\n\t\tlocalize()\n\t\t{\n\t\t\treturn Vue.getFilteredPhrases('SALE_DELIVERY_SERVICE_SELECTOR_');\n\t\t},\n\t\textraServicesCount()\n\t\t{\n\t\t\tlet result = 0;\n\n\t\t\tfor (let relatedService of this.relatedServices)\n\t\t\t{\n\t\t\t\tif (!this.isRelatedServiceRelevant(relatedService))\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tresult++;\n\t\t\t}\n\n\t\t\treturn result;\n\t\t},\n\t\trelatedPropsOfAddressTypeCount()\n\t\t{\n\t\t\tlet result = 0;\n\n\t\t\tfor (let relatedProp of this.relatedPropsOfAddressType)\n\t\t\t{\n\t\t\t\tif (!relatedProp.deliveryServiceIds.includes(this.selectedDeliveryServiceId))\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tresult++;\n\t\t\t}\n\n\t\t\treturn result;\n\t\t},\n\t\trelatedPropsOfOtherTypeCount()\n\t\t{\n\t\t\tlet result = 0;\n\n\t\t\tfor (let relatedProp of this.relatedPropsOfOtherTypes)\n\t\t\t{\n\t\t\t\tif (!relatedProp.deliveryServiceIds.includes(this.selectedDeliveryServiceId))\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tresult++;\n\t\t\t}\n\n\t\t\treturn result;\n\t\t},\n\t\tareProfilesVisible()\n\t\t{\n\t\t\treturn (this.selectedParentDeliveryService && this.selectedParentDeliveryService.profiles.length > 0);\n\t\t},\n\t\tselectedParentServiceName()\n\t\t{\n\t\t\treturn this.selectedParentDeliveryService ? this.selectedParentDeliveryService.name : '';\n\t\t},\n\t\tselectedParentServiceProfiles()\n\t\t{\n\t\t\tif (!this.selectedParentDeliveryService)\n\t\t\t{\n\t\t\t\treturn [];\n\t\t\t}\n\n\t\t\treturn this.selectedParentDeliveryService.profiles;\n\t\t},\n\t\tisSelectedDeliveryServiceAvailable()\n\t\t{\n\t\t\treturn this.selectedDeliveryService && this.isServiceAvailable(this.selectedDeliveryService);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"salescenter-delivery\">\n\t\t\t<div class=\"salescenter-delivery-header\">\n\t\t\t\t<div class=\"salescenter-delivery-car-title--sm\">{{localize.SALE_DELIVERY_SERVICE_SELECTOR_DELIVERY_METHOD}}</div>\n\t\t\t\t<div class=\"salescenter-delivery-method\" ref=\"delivery-methods\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tv-for=\"deliveryService in deliveryServices\"\n\t\t\t\t\t\t@click=\"onDeliveryServiceChanged(deliveryService)\"\n\t\t\t\t\t\t:class=\"{\n\t\t\t\t\t\t\t'salescenter-delivery-method-item': true,\n\t\t\t\t\t\t\t'salescenter-delivery-method-item--selected': isParentDeliveryServiceSelected(deliveryService)\n\t\t\t\t\t\t}\"\n\t\t\t\t\t\t:data-role=\"isParentDeliveryServiceSelected(deliveryService) ? 'ui-ears-active' : ''\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div class=\"salescenter-delivery-method-image\">\n\t\t\t\t\t\t\t<img v-if=\"deliveryService.logo\" :src=\"deliveryService.logo.src\">\n\t\t\t\t\t\t\t<div v-else-if=\"!isNoDeliveryService(deliveryService)\" class=\"salescenter-delivery-method-image-blank\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"salescenter-delivery-method-info\">\n\t\t\t\t\t\t\t<div v-if=\"deliveryService.title\" class=\"salescenter-delivery-method-title\">{{deliveryService.title}}</div>\n\t\t\t\t\t\t\t<div v-else=\"deliveryService.title\" class=\"salescenter-delivery-method-title\"></div>\n\t\t\t\t\t\t\t<div class=\"salescenter-delivery-method-name\">{{deliveryService.name}}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div @click=\"onAddMoreClicked\" class=\"salescenter-delivery-method-item salescenter-delivery-method-item--add\">\n\t\t\t\t\t\t<div class=\"salescenter-delivery-method-image-more\"></div>\n\t\t\t\t\t\t<div class=\"salescenter-delivery-method-info\">\n\t\t\t\t\t\t\t<div class=\"salescenter-delivery-method-name\">\n\t\t\t\t\t\t\t\t{{localize.SALE_DELIVERY_SERVICE_SELECTOR_ADD_MORE}}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div v-show=\"areProfilesVisible\">\n\t\t\t\t<div class=\"salescenter-delivery-car-title--sm\">{{selectedParentServiceName}}: {{localize.SALE_DELIVERY_SERVICE_SELECTOR_SHIPPING_SERVICES}}</div>\n\t\t\t\t<div ref=\"delivery-profiles\" class=\"salescenter-delivery-car salescenter-delivery-car--ya-delivery\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tv-for=\"(profile, index) in selectedParentServiceProfiles\"\n\t\t\t\t\t\t@click=\"onDeliveryServiceChanged(profile)\"\n\t\t\t\t\t\t:class=\"getProfileClass(profile)\"\n\t\t\t\t\t\t:data-role=\"selectedDeliveryService.id == profile.id ? 'ui-ears-active' : ''\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div v-show=\"isServiceProfitable(profile)\" class=\"salescenter-delivery-car-lable\">\n\t\t\t\t\t\t\t{{localize.SALE_DELIVERY_SERVICE_SELECTOR_PROFITABLE}}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"salescenter-delivery-car-container\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclass=\"salescenter-delivery-car-image\"\n\t\t\t\t\t\t\t\t:style=\"getProfileLogoStyle(profile.logo)\"\n\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t<div class=\"salescenter-delivery-car-param\">\n\t\t\t\t\t\t\t\t<div class=\"salescenter-delivery-car-title\">\n\t\t\t\t\t\t\t\t\t{{profile.name}}\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tv-show=\"isVisibleProfileRestriction(profile)\"\n\t\t\t\t\t\t\t\t\t\t@mouseenter=\"onRestrictionsHintShow($event, profile)\"\n\t\t\t\t\t\t\t\t\t\t@mouseleave=\"onRestrictionsHintHide($event)\"\n\t\t\t\t\t\t\t\t\t\tclass=\"salescenter-delivery-car-title-info\"\n\t\t\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"salescenter-delivery-car-info\">{{profile.description}}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\t\t\t\t\t\t\t\n\t\t\t<div v-show=\"extraServicesCount > 0\" class=\"salescenter-delivery-additionally\">\n\t\t\t\t<div class=\"salescenter-delivery-additionally-options\">\n\t\t\t\t\t<component\n\t\t\t\t\t\tv-for=\"relatedService in relatedServices\"\n\t\t\t\t\t\tv-show=\"isRelatedServiceRelevant(relatedService)\"\n\t\t\t\t\t\t:is=\"relatedService.type + '-service'\"\n\t\t\t\t\t\t:key=\"relatedService.id\"\n\t\t\t\t\t\t:name=\"relatedService.name\"\n\t\t\t\t\t\t:initValue=\"getServiceValue(relatedService)\"\t\t\t\t\t\t\n\t\t\t\t\t\t:options=\"relatedService.options\"\n\t\t\t\t\t\t:style=\"getRelatedServiceStyle(relatedService)\"\n\t\t\t\t\t\t@change=\"onServiceValueChanged($event, relatedService)\"\n\t\t\t\t\t>\n\t\t\t\t\t</component>\n\t\t\t\t</div>\n\t\t\t</div>\t\t\t\n\t\t\t<div v-show=\"relatedPropsOfAddressTypeCount > 0\" class=\"salescenter-delivery-path\">\n\t\t\t\t<div\n\t\t\t\t\tv-for=\"(relatedProp, index) in relatedPropsOfAddressType\"\n\t\t\t\t\tv-show=\"relatedProp.deliveryServiceIds.includes(selectedDeliveryServiceId)\"\n\t\t\t\t\t:style=\"{'margin-bottom': '30px'}\"\n\t\t\t\t\tclass=\"salescenter-delivery-path-item\"\n\t\t\t\t>\n\t\t\t\t\t<div class=\"salescenter-delivery-path-title\">\n\t\t\t\t\t\t{{getPropName(relatedProp)}}\n\t\t\t\t\t</div>\n\t\t\t\t\t<component\n\t\t\t\t\t\t:is=\"'ADDRESS-control'\"\n\t\t\t\t\t\t:key=\"relatedProp.id\"\n\t\t\t\t\t\t:name=\"'PROPS_' + relatedProp.id\"\t\t\t\t\t\t\t\n\t\t\t\t\t\t:initValue=\"getPropValue(relatedProp)\"\n\t\t\t\t\t\t:options=\"getPropOptions(relatedProp)\"\n\t\t\t\t\t\t:isStartMarker=\"relatedProp.isAddressFrom\"\n\t\t\t\t\t\t@change=\"onPropValueChanged($event, relatedProp)\"\n\t\t\t\t\t></component>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div v-show=\"relatedPropsOfOtherTypeCount > 0\" class=\"salescenter-delivery-path --without-bg\">\n\t\t\t\t<div\n\t\t\t\t\tv-for=\"(relatedProp, index) in relatedPropsOfOtherTypes\"\n\t\t\t\t\tv-show=\"relatedProp.deliveryServiceIds.includes(selectedDeliveryServiceId)\"\n\t\t\t\t\tclass=\"salescenter-delivery-path-item\"\n\t\t\t\t\t:style=\"{'margin-bottom': '30px'}\"\n\t\t\t\t>\n\t\t\t\t\t<div class=\"salescenter-delivery-path-title-ordinary\">{{relatedProp.name}}</div>\n\t\t\t\t\t<div class=\"salescenter-delivery-path-control\">\n\t\t\t\t\t\t<component\n\t\t\t\t\t\t\t:is=\"relatedProp.type + '-control'\"\n\t\t\t\t\t\t\t:key=\"relatedProp.id\"\n\t\t\t\t\t\t\t:name=\"'PROPS_' + relatedProp.id\"\n\t\t\t\t\t\t\t:initValue=\"getPropValue(relatedProp)\"\n\t\t\t\t\t\t\t:settings=\"relatedProp.settings\"\n\t\t\t\t\t\t\t:options=\"getPropOptions(relatedProp)\"\n\t\t\t\t\t\t\t@change=\"onPropValueChanged($event, relatedProp)\"\n\t\t\t\t\t\t></component>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div v-if=\"isResponsibleUserSectionVisible\" class=\"salescenter-delivery-manager-wrapper\">\n\t\t\t\t<div class=\"ui-ctl-label-text\">{{localize.SALE_DELIVERY_SERVICE_SELECTOR_RESPONSIBLE_MANAGER}}</div>\n\t\t\t\t<div class=\"salescenter-delivery-manager\">\n\t\t\t\t\t<div class=\"salescenter-delivery-manager-avatar\" :style=\"responsibleUser.photo ? {'background-image': 'url(' + responsibleUser.photo + ')'} : {}\"></div>\n\t\t\t\t\t<div class=\"salescenter-delivery-manager-content\">\n\t\t\t\t\t\t<div @click=\"responsibleUserClicked\" class=\"salescenter-delivery-manager-name\">{{responsibleUser.name}}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div @click=\"openChangeResponsibleDialog\" class=\"salescenter-delivery-manager-edit\">{{localize.SALE_DELIVERY_SERVICE_SELECTOR_CHANGE_RESPONSIBLE}}</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t\t\t\n\t\t\t<div v-show=\"!selectedNoDelivery\">\n\t\t\t\t<template v-if=\"calculateErrors\">\n\t\t\t\t\t<div v-for=\"(error, index) in calculateErrors\" class=\"ui-alert ui-alert-danger ui-alert-icon-danger salescenter-delivery-errors-container-alert\">\n\t\t\t\t\t\t<span class=\"ui-alert-message\">{{error}}</span>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t\t<div class=\"salescenter-delivery-bottom\">\n\t\t\t\t\t<div class=\"salescenter-delivery-bottom-row\">\t\t\t\t\t\n\t\t\t\t\t\t<div class=\"salescenter-delivery-bottom-col\">\n\t\t\t\t\t\t\t<span v-show=\"!isCalculating\" @click=\"calculate\" :class=\"calculateDeliveryPriceButtonClass\">{{isCalculated ? localize.SALE_DELIVERY_SERVICE_SELECTOR_CALCULATE_UPDATE : localize.SALE_DELIVERY_SERVICE_SELECTOR_CALCULATE}}</span>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t<span v-show=\"isCalculating\" class=\"salescenter-delivery-waiter\">\n\t\t\t\t\t\t\t\t<span class=\"salescenter-delivery-waiter-alert\">{{localize.SALE_DELIVERY_SERVICE_SELECTOR_CALCULATING_LABEL}}</span>\n\t\t\t\t\t\t\t\t<span class=\"salescenter-delivery-waiter-text\">{{localize.SALE_DELIVERY_SERVICE_SELECTOR_CALCULATING_REQUEST_SENT}} {{selectedParentDeliveryService ? selectedParentDeliveryService.name : ''}}</span>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div v-show=\"isSelectedDeliveryServiceAvailable && isCalculated\" class=\"salescenter-delivery-bottom-row\">\n\t\t\t\t\t\t<div class=\"salescenter-delivery-bottom-col\"></div>\n\t\t\t\t\t\t<div class=\"salescenter-delivery-bottom-col\">\n\t\t\t\t\t\t\t<table class=\"salescenter-delivery-table-total\">\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<td>{{localize.SALE_DELIVERY_SERVICE_SELECTOR_EXPECTED_DELIVERY_PRICE}}:</td>\n\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t<span v-html=\"estimatedDeliveryPriceFormatted\"></span>&nbsp;<span v-html=\"currencySymbol\"></span>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<td>{{localize.SALE_DELIVERY_SERVICE_SELECTOR_CLIENT_DELIVERY_PRICE}}:</td>\n\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-md ui-ctl-wa salescenter-delivery-bottom-input-symbol\">\n\t\t\t\t\t\t\t\t\t\t\t<input v-model=\"enteredDeliveryPrice\" @keypress=\"isNumber($event)\" type=\"text\" class=\"ui-ctl-element ui-ctl-textbox\">\n\t\t\t\t\t\t\t\t\t\t\t<span v-html=\"currencySymbol\"></span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<td>{{externalSumLabel}}:</td>\n\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t<span v-html=\"externalSumFormatted\"></span><span class=\"salescenter-delivery-table-total-symbol\" v-html=\"currencySymbol\"></span>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<td>{{localize.SALE_DELIVERY_SERVICE_SELECTOR_DELIVERY_DELIVERY}}:</td>\n\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t<span v-show=\"deliveryPrice > 0\">\n\t\t\t\t\t\t\t\t\t\t\t<span v-html=\"deliveryPriceFormatted\"></span>&nbsp;<span v-html=\"currencySymbol\"></span>\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t<span v-show=\"!deliveryPrice\" class=\"salescenter-delivery-status salescenter-delivery-status--success\">\n\t\t\t\t\t\t\t\t\t\t\t{{localize.SALE_DELIVERY_SERVICE_SELECTOR_CLIENT_DELIVERY_PRICE_FREE}}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<tr class=\"salescenter-delivery-table-total-result\">\n\t\t\t\t\t\t\t\t\t<td>{{localize.SALE_DELIVERY_SERVICE_SELECTOR_TOTAL}}:</td>\n\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t<span v-html=\"totalPriceFormatted\"></span>\n\t\t\t\t\t\t\t\t\t\t<span class=\"salescenter-delivery-table-total-symbol\" v-html=\"currencySymbol\"></span>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`\n};\n"],"names":["props","name","type","String","required","initValue","settings","options","created","value","data","methods","onInput","event","target","$emit","computed","isMultiline","MULTILINE","template","handleOutsideClick","bind","el","binding","vnode","e","which","stopPropagation","handler","exclude","clickedOnExcludedEl","forEach","refName","excludedEl","context","$refs","contains","closest","document","addEventListener","unbind","removeEventListener","directives","closable","ClosableDirective","isStartMarker","Boolean","enterTookPlace","rightIcon","isEntering","isLoading","editMode","addressWidgetState","enteredAddresses","switchToEditMode","showMap","clarifyAddress","setTimeout","focus","click","clearAddress","addressWidget","address","changeValue","onControlClicked","closeMap","onControlFocus","onControlBlur","newValue","syncRightIcon","onChangeCallback","length","buildAddress","BX","Location","Core","Address","JSON","parse","isValueValid","latitude","longitude","getPresetLocationsProvider","result","hasOwnProperty","defaultItems","map","item","enteredAddress","location","toLocation","AddressStringConverter","convertAddressToString","addressFormat","STRATEGY_TYPE_FIELD_TYPE","CONTENT_TYPE_TEXT","push","filter","index","self","findIndex","l","getMap","features","feature","Widget","MapFeature","addressFormatted","toString","STRATEGY_TYPE_FIELD_SORT","isEditMode","wrapperClass","needsClarification","mapMarkerClass","rightIconClass","State","DATA_LOADING","localize","Vue","getFilteredPhrases","mounted","Factory","createAddressWidget","mode","ControlMode","edit","mapBehavior","useFeatures","fields","autocomplete","popupOptions","offsetLeft","popupBindOptions","forceBindPosition","presetLocationsProvider","nativeOnInputKeyup","onInputKeyup","code","call","subscribeOnAddressChangedEvent","getData","toJson","subscribeOnStateChangedEvent","state","DATA_INPUTTING","DATA_LOADED","subscribeOnFeatureEvent","AutocompleteFeature","eventCode","searchStartedEvent","searchCompletedEvent","subscribeOnErrorEvent","errors","errorMessage","error","message","join","UI","Notification","Center","notify","content","render","inputNode","autocompleteMenuElement","mapBindElement","controlWrapper","onChange","checked","Array","getSelectedItemTitle","selectedItem","getSelectedItem","id","title","option","showPopupMenu","menuItems","onclick","popupMenu","close","Menu","bindElement","items","angle","closeByEsc","show","components","AddressControl","StringControl","CheckboxService","DropdownService","initDeliveryServiceId","initRelatedServicesValues","initRelatedPropsValues","initRelatedPropsOptions","initResponsibleId","default","initEnteredDeliveryPrice","personTypeId","action","actionData","Object","externalSum","externalSumLabel","currency","currencySymbol","availableServices","excludedServiceIds","selectedDeliveryService","deliveryServices","relatedProps","relatedPropsOfAddressType","relatedPropsOfOtherTypes","relatedPropsValues","relatedServices","relatedServicesValues","estimatedDeliveryPrice","enteredDeliveryPrice","responsibleUser","isCalculated","isCalculating","calculateErrors","restrictionsHintPopup","initialize","ajax","runAction","responsibleId","then","services","deliveryService","onDeliveryServiceChanged","profiles","profile","properties","relatedProp","stringify","set","extraServices","relatedService","responsible","_userPageTemplate","userPageTemplate","_deliverySettingsUrl","deliverySettingsUrl","Ears","container","smallSize","noScrollbar","init","emitChange","recalculateRelatedServiceAvailabilities","calculate","isCalculatingAllowed","calculationFinallyCallback","status","payload","assign","deliveryServiceId","selectedDeliveryServiceId","shipmentPropValues","currentRelatedPropsValues","deliveryRelatedServiceValues","currentRelatedServicesValues","deliveryResponsibleId","deliveryPrice","catch","openChangeResponsibleDialog","_userEditor","Crm","EntityEditorUserSelector","callback","search","bUndeleted","entityId","photo","avatar","open","parentElement","selfCall","isServiceAvailable","parentId","firstAvailableProfile","emitServiceChanged","isNoDeliveryService","service","isServiceProfitable","isArray","tags","includes","onPropValueChanged","isAddressFrom","emitAddressFromChanged","onServiceValueChanged","responsibleUserClicked","Manager","openSlider","responsibleUserLink","formatMoney","Currency","currencyFormat","isNumber","window","charCode","keyCode","preventDefault","getPropValue","getPropOptions","getPropName","Loc","getMessage","isAddressTo","getServiceValue","onAddMoreClicked","getDeliveryServiceById","isParentDeliveryServiceSelected","selectedParentDeliveryService","onRestrictionsHintShow","Hint","Popup","buildRestrictionsNode","isVisibleProfileRestriction","restrictions","restrictionsNodes","restriction","Text","encode","Tag","onRestrictionsHintHide","hide","isProfileSelected","getProfileClass","isRelatedServiceRelevant","deliveryServiceIds","isRelatedServiceAvailable","isAvailable","getRelatedServiceStyle","getProfileLogoStyle","logo","backgroundImage","src","backgroundSize","width","i","watch","areProfilesVisible","oldValue","className","isSelectedDeliveryServiceAvailable","deliveryServiceName","selectedDeliveryServiceName","selectedNoDelivery","arePropValuesReady","isResponsibleUserSectionVisible","replace","totalPrice","totalPriceFormatted","deliveryPriceFormatted","estimatedDeliveryPriceFormatted","externalSumFormatted","calculateDeliveryPriceButtonClass","extraServicesCount","relatedPropsOfAddressTypeCount","relatedPropsOfOtherTypeCount","selectedParentServiceName","selectedParentServiceProfiles"],"mappings":"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"}