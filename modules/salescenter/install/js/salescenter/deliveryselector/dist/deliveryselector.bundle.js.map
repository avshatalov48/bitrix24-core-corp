{"version":3,"file":"deliveryselector.bundle.js","sources":["../src/properties/string.js","../src/closabledirective.js","../src/properties/address.js","../src/services/checkbox.js","../src/services/dropdown.js","../src/deliveryselector.js"],"sourcesContent":["export default {\n\tprops: {\n\t\tname: {type: String, required: true},\n\t\tinitValue: {required: false},\n\t\tsettings: {required: false},\n\t\toptions: {required: false},\n\t\teditable: {required: true, type: Boolean},\n\t},\n\tcreated()\n\t{\n\t\tthis.value = this.initValue;\n\t},\n\tdata()\n\t{\n\t\treturn {\n\t\t\tvalue: null,\n\t\t}\n\t},\n\tmethods: {\n\t\tonInput(event)\n\t\t{\n\t\t\tthis.value = event.target.value;\n\n\t\t\tthis.$emit('change', this.value);\n\t\t}\n\t},\n\tcomputed: {\n\t\tisMultiline()\n\t\t{\n\t\t\treturn (this.settings && this.settings.MULTILINE === 'Y');\n\t\t}\n\t},\n\ttemplate: `\n\t\t<div class=\"ui-ctl ui-ctl-w100\">\n\t\t\t<textarea v-if=\"isMultiline\" :disabled=\"!editable\" @input=\"onInput\" :name=\"name\" class=\"ui-ctl-element salescenter-delivery-comment-textarea\" rows=\"1\">{{value}}</textarea>\n\t\t\t<input v-else :disabled=\"!editable\" @input=\"onInput\" type=\"text\" :name=\"name\" :value=\"value\" class=\"ui-ctl-element ui-ctl-textbox\" />\n\t\t</div>\t\t\t\t\t\n\t`\n};\n","let handleOutsideClick;\n\nexport default {\n\tbind (el, binding, vnode) {\n\t\thandleOutsideClick = (e) => {\n\t\t\tif (e.type === 'mousedown' && e.which !== 1)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\te.stopPropagation();\n\t\t\tconst { handler, exclude } = binding.value;\n\t\t\tlet clickedOnExcludedEl = false;\n\t\t\texclude.forEach(refName => {\n\t\t\t\tif (!clickedOnExcludedEl) {\n\t\t\t\t\tconst excludedEl = vnode.context.$refs[refName];\n\t\t\t\t\tif (excludedEl)\n\t\t\t\t\t{\n\t\t\t\t\t\tclickedOnExcludedEl = excludedEl.contains(e.target);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t/**\n\t\t\t * Click inside map wrapper\n\t\t\t */\n\t\t\tif (e.target.closest('.location-map-wrapper'))\n\t\t\t{\n\t\t\t\tclickedOnExcludedEl = true;\n\t\t\t}\n\n\t\t\tif (!el.contains(e.target) && !clickedOnExcludedEl) {\n\t\t\t\tvnode.context[handler]()\n\t\t\t}\n\t\t};\n\t\tdocument.addEventListener('mousedown', handleOutsideClick);\n\t\tdocument.addEventListener('touchstart', handleOutsideClick);\n\t},\n\n\tunbind () {\n\t\tdocument.removeEventListener('mousedown', handleOutsideClick);\n\t\tdocument.removeEventListener('touchstart', handleOutsideClick);\n\t}\n};\n","import {Vue} from 'ui.vue';\nimport ClosableDirective from '../closabledirective';\nimport {Location} from 'location.core';\nimport {State, AutocompleteFeature} from 'location.widget'\nimport 'ui.notification';\nimport '../css/address.css';\n\nexport default\n{\n\tdirectives: {\n\t\tclosable: ClosableDirective\n\t},\n\tprops: {\n\t\tname: {type: String, required: true},\n\t\tinitValue: {},\n\t\tsettings: {},\n\t\toptions: {required: false},\n\t\teditable: {type: Boolean, default: true},\n\t\tisStartMarker: {type: Boolean, required: true},\n\t},\n\tdata()\n\t{\n\t\treturn {\n\t\t\tvalue: null,\n\t\t\tenterTookPlace: false,\n\t\t\trightIcon: null,\n\t\t\tisEntering: false,\n\t\t\tisLoading: false,\n\t\t\teditMode: false,\n\t\t\taddressWidgetState: null,\n\t\t\tenteredAddresses: [],\n\t\t}\n\t},\n\tmethods: {\n\t\tswitchToEditMode()\n\t\t{\n\t\t\tif (!this.editable)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.showMap();\n\t\t\tthis.editMode = true;\n\t\t},\n\t\tclarifyAddress()\n\t\t{\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.$refs['input-node'].focus();\n\t\t\t\tthis.$refs['input-node'].click();\n\t\t\t\tthis.$refs['input-node'].click();\n\t\t\t}, 0);\n\t\t},\n\t\tclearAddress()\n\t\t{\n\t\t\tif (!this.editable)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.addressWidget.address = null;\n\t\t\tthis.changeValue(null);\n\t\t\tthis.clarifyAddress();\n\t\t},\n\t\tonControlClicked()\n\t\t{\n\t\t\tthis.closeMap();\n\t\t},\n\t\tonControlFocus()\n\t\t{\n\t\t\tthis.enterTookPlace = true;\n\t\t\tthis.isEntering = true;\n\t\t},\n\t\tonControlBlur()\n\t\t{\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.isEntering = false;\n\t\t\t}, 200)\n\n\t\t\tthis.editMode = false;\n\n\t\t\tthis.closeMap();\n\t\t},\n\t\tchangeValue(newValue)\n\t\t{\n\t\t\tthis.value = newValue;\n\n\t\t\tthis.syncRightIcon();\n\n\t\t\tthis.$emit('change', this.value);\n\n\t\t\tif (this.onChangeCallback)\n\t\t\t{\n\t\t\t\tthis.onChangeCallback();\n\t\t\t}\n\t\t},\n\t\tsyncRightIcon()\n\t\t{\n\t\t\tif (this.$refs['input-node'].value.length === 0)\n\t\t\t{\n\t\t\t\tthis.rightIcon = 'search';\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.rightIcon = 'clear';\n\t\t\t}\n\t\t},\n\t\tbuildAddress(value)\n\t\t{\n\t\t\ttry\n\t\t\t{\n\t\t\t\treturn new BX.Location.Core.Address(JSON.parse(value));\n\t\t\t}\n\t\t\tcatch(e)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\t\t},\n\t\tisValueValid(value)\n\t\t{\n\t\t\treturn (\n\t\t\t\tvalue\n\t\t\t\t&& value.latitude\n\t\t\t\t&& value.longitude\n\t\t\t\t&& !(value.latitude === '0' && value.longitude === '0')\n\t\t\t);\n\t\t},\n\t\tgetPresetLocationsProvider()\n\t\t{\n\t\t\treturn () => {\n\t\t\t\tlet result = this.options && this.options.hasOwnProperty('defaultItems')\n\t\t\t\t\t? this.options.defaultItems.map((item) => new Location(item))\n\t\t\t\t\t: [];\n\n\n\t\t\t\tfor (let enteredAddress of this.enteredAddresses)\n\t\t\t\t{\n\t\t\t\t\tlet location = enteredAddress.toLocation();\n\t\t\t\t\tif (!location)\n\t\t\t\t\t{\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tlocation.name = BX.Location.Core.AddressStringConverter.convertAddressToString(\n\t\t\t\t\t\tenteredAddress,\n\t\t\t\t\t\tthis.addressWidget.addressFormat,\n\t\t\t\t\t\tBX.Location.Core.AddressStringConverter.STRATEGY_TYPE_FIELD_TYPE,\n\t\t\t\t\t\tBX.Location.Core.AddressStringConverter.CONTENT_TYPE_TEXT\n\t\t\t\t\t);\n\n\t\t\t\t\tresult.push(location);\n\t\t\t\t}\n\n\t\t\t\treturn result;\n\t\t\t};\n\t\t},\n\t\t/**\n\t\t * Map Feature Methods\n\t\t */\n\t\tgetMap()\n\t\t{\n\t\t\tif (!this.addressWidget)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tfor( let feature of this.addressWidget.features)\n\t\t\t{\n\t\t\t\tif(feature instanceof BX.Location.Widget.MapFeature)\n\t\t\t\t{\n\t\t\t\t\treturn feature;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\t\tshowMap()\n\t\t{\n\t\t\tlet map = this.getMap();\n\n\t\t\tif (map)\n\t\t\t{\n\t\t\t\tmap.showMap();\n\t\t\t}\n\t\t},\n\t\tcloseMap()\n\t\t{\n\t\t\tlet map = this.getMap();\n\n\t\t\tif (map)\n\t\t\t{\n\t\t\t\tmap.closeMap();\n\t\t\t}\n\t\t},\n\t},\n\tcomputed: {\n\t\taddressFormatted()\n\t\t{\n\t\t\tif(!this.value || !this.addressWidget)\n\t\t\t{\n\t\t\t\treturn '';\n\t\t\t}\n\n\t\t\tlet address = this.buildAddress(this.value);\n\t\t\tif (!address)\n\t\t\t{\n\t\t\t\treturn '';\n\t\t\t}\n\n\t\t\treturn address.toString(\n\t\t\t\tthis.addressWidget.addressFormat,\n\t\t\t\tBX.Location.Core.AddressStringConverter.STRATEGY_TYPE_FIELD_SORT\n\t\t\t);\n\t\t},\n\t\tisEditMode()\n\t\t{\n\t\t\treturn this.editMode || !this.value;\n\t\t},\n\t\twrapperClass()\n\t\t{\n\t\t\treturn {\n\t\t\t\t'ui-ctl': true,\n\t\t\t\t'ui-ctl-textbox': true,\n\t\t\t\t'ui-ctl-danger': this.needsClarification,\n\t\t\t\t'ui-ctl-w100': true,\n\t\t\t\t'ui-ctl-after-icon': true,\n\t\t\t\t'sale-address-control-top-margin-5 sale-address-control-top-margin-width-820': this.isEditMode\n\t\t\t}\n\t\t},\n\t\tmapMarkerClass()\n\t\t{\n\t\t\treturn {\n\t\t\t\t'salescenter-delivery-path-icon': true,\n\t\t\t\t'salescenter-delivery-path-icon--green': !this.isStartMarker\n\t\t\t};\n\t\t},\n\t\trightIconClass()\n\t\t{\n\t\t\treturn {\n\t\t\t\t'ui-ctl-after': true,\n\t\t\t\t'ui-ctl-icon-btn': true,\n\t\t\t\t'ui-ctl-icon-search': (this.rightIcon === 'search'),\n\t\t\t\t'ui-ctl-icon-clear': (this.rightIcon === 'clear'),\n\t\t\t\t'sale-address-control-path-input-clear': true,\n\t\t\t};\n\t\t},\n\t\tneedsClarification()\n\t\t{\n\t\t\treturn (\n\t\t\t\t!this.isEntering\n\t\t\t\t&& this.enterTookPlace\n\t\t\t\t&& !this.value\n\t\t\t\t&& this.addressWidgetState !== State.DATA_LOADING\n\t\t\t);\n\t\t},\n\t\tlocalize()\n\t\t{\n\t\t\treturn Vue.getFilteredPhrases('SALE_DELIVERY_SERVICE_SELECTOR_');\n\t\t},\n\t},\n\tmounted()\n\t{\n\t\tif (this.initValue)\n\t\t{\n\t\t\tlet initValue = null;\n\t\t\tlet address = JSON.parse(this.initValue);\n\n\t\t\tif (this.isValueValid(address))\n\t\t\t{\n\t\t\t\tinitValue = this.initValue;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t/**\n\t\t\t\t * Simulate invalid input\n\t\t\t\t */\n\t\t\t\tthis.isEntering = false;\n\t\t\t\tthis.enterTookPlace = true;\n\t\t\t}\n\n\t\t\tthis.changeValue(initValue);\n\t\t}\n\n\t\tthis.addressWidget = (new BX.Location.Widget.Factory).createAddressWidget({\n\t\t\taddress: this.initValue ? this.buildAddress(this.initValue) : null,\n\t\t\tmode: BX.Location.Core.ControlMode.edit,\n\t\t\tmapBehavior: 'manual',\n\t\t\tuseFeatures: {\n\t\t\t\tfields: false,\n\t\t\t\tmap: true,\n\t\t\t\tautocomplete: true\n\t\t\t},\n\t\t\tpopupOptions: {\n\t\t\t\toffsetLeft: 14,\n\t\t\t},\n\t\t\tpopupBindOptions: {\n\t\t\t\tforceBindPosition: true,\n\t\t\t},\n\t\t\tpresetLocationsProvider: this.getPresetLocationsProvider()\n\t\t});\n\n\t\t/**\n\t\t * Redefine native onInputKeyup\n\t\t */\n\t\tconst nativeOnInputKeyup = this.addressWidget.onInputKeyup;\n\t\tthis.addressWidget.onInputKeyup = (e: KeyboardEvent) =>\n\t\t{\n\t\t\tswitch (e.code)\n\t\t\t{\n\t\t\t\tcase 'Enter':\n\t\t\t\tcase 'NumpadEnter':\n\t\t\t\t\treturn;\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tnativeOnInputKeyup.call(this.addressWidget, e);\n\t\t};\n\n\t\t/**\n\t\t * Subscribe to widget events\n\t\t */\n\t\tthis.addressWidget.subscribeOnAddressChangedEvent((event) => {\n\t\t\tlet data = event.getData();\n\n\t\t\tthis.editMode = true;\n\n\t\t\tlet address = data.address;\n\t\t\tlet value = address.toJson();\n\n\t\t\tif (!this.isValueValid(address))\n\t\t\t{\n\t\t\t\tthis.changeValue(null);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.enteredAddresses.push(address);\n\t\t\t\tthis.changeValue(value);\n\t\t\t\tthis.showMap();\n\t\t\t}\n\t\t});\n\n\t\tthis.addressWidget.subscribeOnStateChangedEvent((event) => {\n\t\t\tlet data = event.getData();\n\n\t\t\tthis.addressWidgetState = data.state;\n\n\t\t\tif (data.state === State.DATA_INPUTTING)\n\t\t\t{\n\t\t\t\tthis.changeValue(null);\n\t\t\t\tthis.closeMap();\n\t\t\t}\n\t\t\telse if (data.state === State.DATA_LOADING)\n\t\t\t{\n\t\t\t\tthis.isLoading = true;\n\t\t\t}\n\t\t\telse if (data.state === State.DATA_LOADED)\n\t\t\t{\n\t\t\t\tthis.isLoading = false;\n\t\t\t}\n\t\t});\n\n\t\tthis.addressWidget.subscribeOnFeatureEvent((event) => {\n\t\t\tlet data = event.getData();\n\n\t\t\tif (data.feature instanceof AutocompleteFeature)\n\t\t\t{\n\t\t\t\tif (data.eventCode === AutocompleteFeature.searchStartedEvent)\n\t\t\t\t{\n\t\t\t\t\tthis.isLoading = true;\n\t\t\t\t}\n\t\t\t\telse if (data.eventCode === AutocompleteFeature.searchCompletedEvent)\n\t\t\t\t{\n\t\t\t\t\tthis.isLoading = false;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tthis.addressWidget.subscribeOnErrorEvent((event) => {\n\t\t\tlet data = event.getData();\n\t\t\tlet errors = data.errors;\n\t\t\tlet errorMessage = errors\n\t\t\t\t.map((error) => error.message + (error.code.length ? `${error.code}` : ''))\n\t\t\t\t.join(', ');\n\n\t\t\tthis.isLoading = false;\n\n\t\t\tBX.UI.Notification.Center.notify({\n\t\t\t\tcontent: errorMessage,\n\t\t\t});\n\t\t});\n\n\t\t/**\n\t\t * Render widget\n\t\t */\n\t\tthis.addressWidget.render({\n\t\t\tinputNode: this.$refs['input-node'],\n\t\t\tautocompleteMenuElement: this.$refs['autocomplete-menu'],\n\t\t\tmapBindElement: this.$refs['map-marker'],\n\t\t\tcontrolWrapper: this.$refs['autocomplete-menu'],\n\t\t});\n\n\t\tthis.syncRightIcon();\n\t},\n\ttemplate: `\n\t\t<div class=\"salescenter-delivery-path-control\">\n\t\t\t<div ref=\"map-marker\" :class=\"mapMarkerClass\"></div>\n\t\t\t\t<div\n\t\t\t\t\tv-closable=\"{\n\t\t\t\t\t\texclude: ['input-node'],\n\t\t\t\t\t\thandler: 'onControlBlur'\n\t\t\t\t\t}\"\n\t\t\t\t\tclass=\"ui-ctl-w100\"\n\t\t\t\t>\n\t\t\t\t\t<div :class=\"wrapperClass\">\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tv-show=\"isLoading\"\n\t\t\t\t\t\t\tclass=\"ui-ctl-after ui-ctl-icon-loader\"\n\t\t\t\t\t\t></div>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tv-show=\"isEditMode\" \n\t\t\t\t\t\t\tref=\"autocomplete-menu\"\n\t\t\t\t\t\t\tclass=\"sale-address-control-path-input-wrapper\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t@click=\"onControlClicked\"\n\t\t\t\t\t\t\t\t@focus=\"onControlFocus\"\n\t\t\t\t\t\t\t\t:disabled=\"!editable\"\n\t\t\t\t\t\t\t\tref=\"input-node\"\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tv-show=\"!isLoading && isEditMode\"\n\t\t\t\t\t\t\t\t@click=\"clearAddress\"\n\t\t\t\t\t\t\t\t@mouseover.stop.prevent=\"\"\n\t\t\t\t\t\t\t\t:class=\"rightIconClass\"\n\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\tv-show=\"needsClarification\"\n\t\t\t\t\t\t\t\t@mouseover.stop.prevent=\"\"\n\t\t\t\t\t\t\t\t@click=\"clarifyAddress\"\n\t\t\t\t\t\t\t\tclass=\"sale-address-control-path-input--alert\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{{localize.SALE_DELIVERY_SERVICE_SELECTOR_CLARIFY_ADDRESS}}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div v-show=\"!isEditMode\"class=\"sale-address-control-path-input-wrapper\">\n\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t@click=\"switchToEditMode\"\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tclass=\"ui-ctl-element ui-ctl-textbox sale-address-control-path-input\"\n\t\t\t\t\t\t\t\tcontenteditable=\"false\"\n\t\t\t\t\t\t\t\tv-html=\"addressFormatted\"\n\t\t\t\t\t\t\t></span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<input v-model=\"value\" :name=\"name\" type=\"hidden\" />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`\n};\n","export default {\n\tprops: {\n\t\tname: {required: false},\n\t\tinitValue: {required: false},\n\t\teditable: {required: true, type: Boolean},\n\t},\n\tcreated()\n\t{\n\t\tthis.value = this.initValue;\n\t},\n\tdata()\n\t{\n\t\treturn {\n\t\t\tvalue: null\n\t\t}\n\t},\n\tmethods: {\n\t\tonChange(event)\n\t\t{\n\t\t\tthis.value =  event.target.checked ? 'Y' : '';\n\t\t\tthis.$emit('change', this.value);\n\t\t}\n\t},\n\ttemplate: `\n\t\t<label class=\"salescenter-delivery-selector salescenter-delivery-selector--hover salescenter-delivery-selector--checkbox\">\n\t\t\t<input :disabled=\"!editable\" @change=\"onChange\" :checked=\"value == 'Y' ? true : false\" type=\"checkbox\" value=\"Y\" />\n\t\t\t<span class=\"salescenter-delivery-selector-text\">{{name}}</span>\n\t\t</label>\n\t`\n};\n","import {Menu} from 'main.popup'\n\nexport default {\n\tprops: {\n\t\tname: {required: false},\n\t\tinitValue: {required: false},\n\t\teditable: {required: true, type: Boolean},\n\t\toptions: {required: true, type: Array}\n\t},\n\tcreated()\n\t{\n\t\tthis.value = this.initValue;\n\t},\n\tdata()\n\t{\n\t\treturn {\n\t\t\tvalue: null\n\t\t}\n\t},\n\tmethods: {\n\t\tgetSelectedItemTitle()\n\t\t{\n\t\t\tlet selectedItem = this.getSelectedItem();\n\t\t\tif (!selectedItem || selectedItem.id === 'null')\n\t\t\t{\n\t\t\t\treturn this.name;\n\t\t\t}\n\t\t\treturn selectedItem.title;\n\t\t},\n\t\tgetSelectedItem()\n\t\t{\n\t\t\tfor (let option of this.options)\n\t\t\t{\n\t\t\t\tif (option.id === this.value)\n\t\t\t\t{\n\t\t\t\t\treturn option;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\n\t\tshowPopupMenu(e)\n\t\t{\n\t\t\tlet menuItems = [];\n\t\t\tfor (let option of this.options)\n\t\t\t{\n\t\t\t\tmenuItems.push(\n\t\t\t\t\t{\n\t\t\t\t\t\t'text': option.title,\n\t\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\t\tthis.value =  option.id;\n\t\t\t\t\t\t\tthis.$emit('change', this.value);\n\n\t\t\t\t\t\t\tthis.popupMenu.close();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tthis.popupMenu = new Menu({\n\t\t\t\tbindElement: e.target,\n\t\t\t\titems: menuItems,\n\t\t\t\tangle: true,\n\t\t\t\tcloseByEsc: true,\n\t\t\t\toffsetLeft: 40,\n\t\t\t});\n\n\t\t\tthis.popupMenu.show();\n\t\t}\n\t},\n\ttemplate: `\n\t\t<div @click=\"showPopupMenu($event)\" class=\"salescenter-delivery-selector salescenter-delivery-selector--dropdown\">\n\t\t\t<span class=\"salescenter-delivery-selector-text\">{{getSelectedItemTitle()}}</span>\n\t\t</div>\n\t`\n};\n","import {Vue} from 'ui.vue';\nimport {ajax} from 'main.core';\nimport {Manager} from 'salescenter.manager';\nimport {Ears} from 'ui.ears';\nimport StringControl from './properties/string';\nimport AddressControl from './properties/address';\nimport CheckboxService from './services/checkbox';\nimport DropdownService from './services/dropdown';\nimport Hint from 'salescenter.component.stage-block.hint';\nimport {Tag, Text} from 'main.core';\nimport 'currency';\n\nimport './css/deliveryselector.css';\n\nexport default {\n\tcomponents: {\n\t\t/**\n\t\t * Properties Control Types\n\t\t */\n\t\t'ADDRESS-control': AddressControl,\n\t\t'STRING-control': StringControl,\n\t\t/**\n\t\t * Extra Services Control Types\n\t\t */\n\t\t'checkbox-service': CheckboxService,\n\t\t'dropdown-service': DropdownService,\n\t},\n\tprops: {\n\t\tinitDeliveryServiceId: {required: false},\n\t\tinitRelatedServicesValues: {required: false},\n\t\tinitRelatedPropsValues: {required: false},\n\t\tinitRelatedPropsOptions: {required: false},\n\t\tinitResponsibleId: {default: null, required: false},\n\t\tinitEnteredDeliveryPrice: {required: false},\n\t\tinitIsCalculated: {required: false},\n\t\tpersonTypeId: {required: true},\n\t\taction: {type: String, required: true },\n\t\tactionData: {type: Object, required: true },\n\t\texternalSum: {required: true},\n\t\texternalSumLabel: {type: String, required: true},\n\t\tcurrency: {type: String, required: true},\n\t\tcurrencySymbol: {type: String, required: true},\n\t\tavailableServiceIds: {type: Array, required: true},\n\t\texcludedServiceIds: {type: Array, required: true},\n\t\teditable: {type: Boolean, required: true},\n\t},\n\tdata()\n\t{\n\t\treturn {\n\t\t\t/**\n\t\t\t * Selected Service\n\t\t\t */\n\t\t\tselectedDeliveryService: null,\n\t\t\tdeliveryServices: [],\n\n\t\t\t/**\n\t\t\t * Props\n\t\t\t */\n\t\t\trelatedProps: [],\n\t\t\trelatedPropsOfAddressType: [],\n\t\t\trelatedPropsOfOtherTypes: [],\n\t\t\trelatedPropsValues: {},\n\n\t\t\t/**\n\t\t\t * Extra Services\n\t\t\t */\n\t\t\trelatedServices: [],\n\t\t\trelatedServicesValues: {},\n\n\t\t\t/**\n\t\t\t * Prices\n\t\t\t */\n\t\t\testimatedDeliveryPrice: null,\n\t\t\tenteredDeliveryPrice: null,\n\t\t\t/**\n\t\t\t * Responsible User\n\t\t\t */\n\t\t\tresponsibleUser: null,\n\n\t\t\t/**\n\t\t\t * Processing Indicators\n\t\t\t */\n\t\t\tisCalculated: false,\n\t\t\tisCalculating: false,\n\n\t\t\tcalculateErrors: [],\n\n\t\t\trestrictionsHintPopup: null,\n\t\t};\n\t},\n\tmethods: {\n\t\tinitialize()\n\t\t{\n\t\t\tajax.runAction(\n\t\t\t\t'salescenter.deliveryselector.getinitializationdata',\n\t\t\t\t{data: {\n\t\t\t\t\t\tpersonTypeId: this.personTypeId,\n\t\t\t\t\t\tresponsibleId: this.initResponsibleId,\n\t\t\t\t\t\texcludedServiceIds: this.excludedServiceIds\n\t\t\t\t\t}}\n\t\t\t).then((result) => {\n\t\t\t\t/**\n\t\t\t\t * Delivery services\n\t\t\t\t */\n\n\t\t\t\tthis.deliveryServices = result.data.services;\n\n\t\t\t\tif (this.deliveryServices.length > 0)\n\t\t\t\t{\n\t\t\t\t\tlet initDeliveryServiceId = this.selectedDeliveryService\n\t\t\t\t\t\t? this.selectedDeliveryService.id\n\t\t\t\t\t\t: (this.initDeliveryServiceId ? this.initDeliveryServiceId : null);\n\n\t\t\t\t\tif (initDeliveryServiceId)\n\t\t\t\t\t{\n\t\t\t\t\t\tfor (let deliveryService of this.deliveryServices)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (deliveryService.id == initDeliveryServiceId)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.selectedDeliveryService = deliveryService;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tfor (let profile of deliveryService.profiles)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif (profile.id == initDeliveryServiceId)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tthis.selectedDeliveryService = profile;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t/**\n\t\t\t\t * Related props\n\t\t\t\t */\n\t\t\t\tlet relatedProps = result.data.properties;\n\n\t\t\t\t/**\n\t\t\t\t * Setting default values to related props\n\t\t\t\t */\n\t\t\t\tfor (let relatedProp of relatedProps)\n\t\t\t\t{\n\t\t\t\t\tlet initValue = null;\n\n\t\t\t\t\tif (this.initRelatedPropsValues\n\t\t\t\t\t\t&& this.initRelatedPropsValues.hasOwnProperty(relatedProp.id)\n\t\t\t\t\t)\n\t\t\t\t\t{\n\t\t\t\t\t\tinitValue = this.initRelatedPropsValues[relatedProp.id];\n\t\t\t\t\t}\n\t\t\t\t\telse if (relatedProp.initValue)\n\t\t\t\t\t{\n\t\t\t\t\t\tinitValue = relatedProp.initValue;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (initValue !== null)\n\t\t\t\t\t{\n\t\t\t\t\t\tinitValue = (typeof initValue === 'object') ? JSON.stringify(initValue) : initValue;\n\n\t\t\t\t\t\tVue.set(this.relatedPropsValues, relatedProp.id, initValue);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis.relatedProps = relatedProps;\n\t\t\t\tthis.relatedPropsOfAddressType = this.relatedProps.filter((item) => item.type === 'ADDRESS');\n\t\t\t\tthis.relatedPropsOfOtherTypes = this.relatedProps.filter((item) => item.type !== 'ADDRESS');\n\n\t\t\t\t/**\n\t\t\t\t * Related services\n\t\t\t\t */\n\t\t\t\tlet relatedServices = result.data.extraServices;\n\n\t\t\t\tfor (let relatedService of relatedServices)\n\t\t\t\t{\n\t\t\t\t\tlet initValue = null;\n\n\t\t\t\t\tif (this.initRelatedServicesValues\n\t\t\t\t\t\t&& this.initRelatedServicesValues.hasOwnProperty(relatedService.id)\n\t\t\t\t\t)\n\t\t\t\t\t{\n\t\t\t\t\t\tinitValue = this.initRelatedServicesValues[relatedService.id];\n\t\t\t\t\t}\n\t\t\t\t\telse if (relatedService.initValue)\n\t\t\t\t\t{\n\t\t\t\t\t\tinitValue = relatedService.initValue;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (initValue !== null)\n\t\t\t\t\t{\n\t\t\t\t\t\tVue.set(this.relatedServicesValues, relatedService.id, initValue);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.relatedServices = relatedServices;\n\n\t\t\t\t/**\n\t\t\t\t * Responsible\n\t\t\t\t */\n\t\t\t\tthis.responsibleUser = result.data.responsible;\n\n\t\t\t\t/**\n\t\t\t\t * Misc\n\t\t\t\t */\n\t\t\t\tthis._userPageTemplate = result.data.userPageTemplate;\n\n\t\t\t\tthis._deliverySettingsUrl = result.data.deliverySettingsUrl;\n\n\t\t\t\t/**\n\t\t\t\t *\n\t\t\t\t */\n\t\t\t\tif (this.initEnteredDeliveryPrice !== null)\n\t\t\t\t{\n\t\t\t\t\tthis.enteredDeliveryPrice = this.initEnteredDeliveryPrice;\n\t\t\t\t}\n\n\t\t\t\tif (this.initIsCalculated !== null)\n\t\t\t\t{\n\t\t\t\t\tthis.isCalculated = this.initIsCalculated;\n\t\t\t\t}\n\n\t\t\t\t(new Ears({\n\t\t\t\t\tcontainer: this.$refs['delivery-methods'],\n\t\t\t\t\tsmallSize: true,\n\t\t\t\t\tnoScrollbar: true\n\t\t\t\t})).init();\n\n\t\t\t\tthis.emitChange();\n\t\t\t});\n\t\t},\n\t\tcalculate()\n\t\t{\n\t\t\tif (!this.isCalculatingAllowed)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.isCalculating = true;\n\n\t\t\tlet calculationFinallyCallback = (status, payload) =>\n\t\t\t{\n\t\t\t\tthis.isCalculating = false;\n\t\t\t\tthis.isCalculated = true;\n\t\t\t\tthis.emitChange();\n\t\t\t};\n\n\t\t\tlet actionData = Object.assign(\n\t\t\t\t{},\n\t\t\t\tthis.actionData,\n\t\t\t\t{\n\t\t\t\t\tdeliveryServiceId: this.selectedDeliveryServiceId,\n\t\t\t\t\tshipmentPropValues: this.currentRelatedPropsValues,\n\t\t\t\t\tdeliveryRelatedServiceValues: this.currentRelatedServicesValues,\n\t\t\t\t\tdeliveryResponsibleId: this.responsibleUser ? this.responsibleUser.id : null,\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tajax.runAction(this.action, {data: actionData}).then((result) => {\n\t\t\t\tlet deliveryPrice = result.data.deliveryPrice;\n\n\t\t\t\tthis.estimatedDeliveryPrice = deliveryPrice;\n\t\t\t\tthis.enteredDeliveryPrice = deliveryPrice;\n\n\t\t\t\tthis.calculateErrors = [];\n\t\t\t\tcalculationFinallyCallback();\n\t\t\t}).catch((result) => {\n\t\t\t\tthis.estimatedDeliveryPrice = null;\n\t\t\t\tthis.enteredDeliveryPrice = 0.00;\n\n\t\t\t\tthis.calculateErrors = result.errors.map((item) => item.message);\n\t\t\t\tcalculationFinallyCallback();\n\t\t\t});\n\t\t},\n\t\topenChangeResponsibleDialog(event)\n\t\t{\n\t\t\tlet self = this;\n\n\t\t\tif (typeof(this._userEditor) === 'undefined')\n\t\t\t{\n\t\t\t\tthis._userEditor = new BX.Crm.EntityEditorUserSelector();\n\n\t\t\t\tthis._userEditor.initialize(\n\t\t\t\t\t'deliverySelectorUserEditor',\n\t\t\t\t\t{\n\t\t\t\t\t\tcallback(item, type, search, bUndeleted)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tself.responsibleUser = {\n\t\t\t\t\t\t\t\tid: type.entityId,\n\t\t\t\t\t\t\t\tname: type.name,\n\t\t\t\t\t\t\t\tphoto: type.avatar,\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tself.emitChange();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tthis._userEditor.open(\n\t\t\t\tevent.target.parentElement\n\t\t\t);\n\t\t},\n\t\tonDeliveryServiceChanged(deliveryService, selfCall = false)\n\t\t{\n\t\t\tif (!this.editable)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!this.isServiceAvailable(deliveryService) && !selfCall)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!deliveryService.parentId && deliveryService.profiles.length > 0)\n\t\t\t{\n\t\t\t\tthis.onDeliveryServiceChanged(deliveryService.profiles[0], true);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.selectedDeliveryService = deliveryService;\n\n\t\t\t\tthis.emitChange();\n\t\t\t}\n\t\t},\n\t\tisServiceAvailable(service)\n\t\t{\n\t\t\treturn this.availableServiceIds.includes(service.id);\n\t\t},\n\t\tonPropValueChanged(event, relatedProp)\n\t\t{\n\t\t\tVue.set(this.relatedPropsValues, relatedProp.id, event);\n\t\t\tthis.emitChange();\n\t\t},\n\t\tonServiceValueChanged(event, relatedService)\n\t\t{\n\t\t\tVue.set(this.relatedServicesValues, relatedService.id, event);\n\t\t\tthis.emitChange();\n\t\t},\n\t\tresponsibleUserClicked()\n\t\t{\n\t\t\tManager.openSlider(this.responsibleUserLink);\n\t\t},\n\t\temitChange()\n\t\t{\n\t\t\tthis.$emit('change', this.state);\n\t\t},\n\t\tformatMoney(value)\n\t\t{\n\t\t\treturn BX.Currency.currencyFormat(value, this.currency, false);\n\t\t},\n\t\tisNumber: function(event) {\n\t\t\tevent = (event) ? event : window.event;\n\t\t\tvar charCode = (event.which) ? event.which : event.keyCode;\n\t\t\tif ((charCode > 31 && (charCode < 48 || charCode > 57)) && charCode !== 46) {\n\t\t\t\tevent.preventDefault();\n\t\t\t} else {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\tgetPropValue(relatedProp)\n\t\t{\n\t\t\tif (!this.relatedPropsValues)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\treturn this.relatedPropsValues.hasOwnProperty(relatedProp.id) ? this.relatedPropsValues[relatedProp.id] : null;\n\t\t},\n\t\tgetPropOptions(relatedProp)\n\t\t{\n\t\t\tif (!this.initRelatedPropsOptions)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\treturn this.initRelatedPropsOptions.hasOwnProperty(relatedProp.id) ? this.initRelatedPropsOptions[relatedProp.id] : null;\n\t\t},\n\t\tgetServiceValue(relatedService)\n\t\t{\n\t\t\tif (!this.relatedServicesValues)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\treturn this.relatedServicesValues.hasOwnProperty(relatedService.id) ? this.relatedServicesValues[relatedService.id] : null;\n\t\t},\n\t\tonAddMoreClicked()\n\t\t{\n\t\t\tif (!this.editable)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tManager.openSlider(this._deliverySettingsUrl).then(() => {\n\t\t\t\tthis.initialize();\n\t\t\t\tthis.$emit('settings-changed');\n\t\t\t});\n\t\t},\n\t\tgetDeliveryServiceById(id)\n\t\t{\n\t\t\tfor (let deliveryService of this.deliveryServices)\n\t\t\t{\n\t\t\t\tif (deliveryService.id == id)\n\t\t\t\t{\n\t\t\t\t\treturn deliveryService;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\t\tisParentDeliveryServiceSelected(deliveryService)\n\t\t{\n\t\t\tif (!this.selectedParentDeliveryService)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn this.selectedParentDeliveryService.id == deliveryService.id;\n\t\t},\n\t\tonRestrictionsHintShow(e, profile)\n\t\t{\n\t\t\tthis.restrictionsHintPopup = new Hint.Popup();\n\t\t\tthis.restrictionsHintPopup.show(e.target, this.buildRestrictionsNode(profile));\n\n\t\t},\n\t\tbuildRestrictionsNode(profile)\n\t\t{\n\t\t\tlet restrictionsNodes = profile.restrictions.map((restriction) => `<div>${Text.encode(restriction)}</div>`);\n\n\t\t\treturn Tag.render `<div>${restrictionsNodes.join('')}</div>`;\n\t\t},\n\t\tonRestrictionsHintHide(e)\n\t\t{\n\t\t\tif (this.restrictionsHintPopup)\n\t\t\t{\n\t\t\t\tthis.restrictionsHintPopup.hide();\n\t\t\t}\n\t\t},\n\t},\n\tcreated()\n\t{\n\t\tthis.initialize();\n\t},\n\twatch: {\n\t\tenteredDeliveryPrice(value)\n\t\t{\n\t\t\tthis.emitChange();\n\t\t},\n\t\tareProfilesVisible(newValue, oldValue)\n\t\t{\n\t\t\tif (!oldValue && newValue)\n\t\t\t{\n\t\t\t\t//uncomment the block belowe to apply the ears plugin to profiles' section\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t(new Ears({\n\t\t\t\t\t\tcontainer: this.$refs['delivery-profiles'],\n\t\t\t\t\t\tsmallSize: true,\n\t\t\t\t\t\tnoScrollbar: true,\n\t\t\t\t\t\tclassName: 'salescenter-delivery-ears'\n\t\t\t\t\t})).init();\n\t\t\t\t}, 0);\n\t\t\t}\n\t\t}\n\t},\n\tcomputed: {\n\t\tstate()\n\t\t{\n\t\t\treturn {\n\t\t\t\tdeliveryServiceId: this.selectedDeliveryServiceId,\n\t\t\t\tdeliveryServiceName: this.selectedDeliveryServiceName,\n\t\t\t\tdeliveryPrice: this.deliveryPrice,\n\t\t\t\testimatedDeliveryPrice: this.estimatedDeliveryPrice,\n\t\t\t\trelatedPropsValues: this.currentRelatedPropsValues,\n\t\t\t\trelatedServicesValues: this.currentRelatedServicesValues,\n\t\t\t\tresponsibleUser: this.responsibleUser,\n\t\t\t};\n\t\t},\n\t\tselectedDeliveryServiceId()\n\t\t{\n\t\t\treturn this.selectedDeliveryService ? this.selectedDeliveryService.id : null;\n\t\t},\n\t\tselectedDeliveryServiceName()\n\t\t{\n\t\t\tif (!this.selectedDeliveryService)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tif (this.selectedParentDeliveryService === this.selectedDeliveryService)\n\t\t\t{\n\t\t\t\treturn this.selectedDeliveryService.name;\n\t\t\t}\n\n\t\t\treturn this.selectedParentDeliveryService.name + ': ' + this.selectedDeliveryService.name;\n\t\t},\n\t\tselectedParentDeliveryService()\n\t\t{\n\t\t\tif (!this.selectedDeliveryService)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn this.selectedDeliveryService.parentId\n\t\t\t\t? this.getDeliveryServiceById(this.selectedDeliveryService.parentId)\n\t\t\t\t: this.selectedDeliveryService;\n\t\t},\n\t\tselectedNoDelivery()\n\t\t{\n\t\t\treturn this.selectedDeliveryService && this.selectedDeliveryService['code'] === 'NO_DELIVERY';\n\t\t},\n\t\tisCalculatingAllowed()\n\t\t{\n\t\t\treturn this.selectedDeliveryServiceId\n\t\t\t\t&& this.arePropValuesReady\n\t\t\t\t&& !this.isCalculating\n\t\t\t\t&& this.editable;\n\t\t},\n\t\tcurrentRelatedPropsValues()\n\t\t{\n\t\t\tlet result = [];\n\n\t\t\tif (!this.selectedDeliveryServiceId)\n\t\t\t{\n\t\t\t\treturn result;\n\t\t\t}\n\n\t\t\tfor (let relatedProp of this.relatedProps)\n\t\t\t{\n\t\t\t\tif (!relatedProp.deliveryServiceIds.includes(this.selectedDeliveryServiceId))\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif (this.relatedPropsValues.hasOwnProperty(relatedProp.id))\n\t\t\t\t{\n\t\t\t\t\tresult.push(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tid: relatedProp.id,\n\t\t\t\t\t\t\tvalue: this.relatedPropsValues[relatedProp.id]\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn result;\n\t\t},\n\t\tisResponsibleUserSectionVisible()\n\t\t{\n\t\t\treturn this.responsibleUser && !this.selectedNoDelivery;\n\t\t},\n\t\tresponsibleUserLink()\n\t\t{\n\t\t\tif (!this.responsibleUser)\n\t\t\t{\n\t\t\t\treturn '';\n\t\t\t}\n\n\t\t\treturn this._userPageTemplate.replace('#user_id#', this.responsibleUser.id);\n\t\t},\n\t\tarePropValuesReady()\n\t\t{\n\t\t\tif (!this.selectedDeliveryServiceId)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tfor (let relatedProp of this.relatedProps)\n\t\t\t{\n\t\t\t\tif (!relatedProp.deliveryServiceIds.includes(this.selectedDeliveryServiceId))\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif (relatedProp.required && !this.relatedPropsValues[relatedProp.id])\n\t\t\t\t{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn true;\n\t\t},\n\t\tcurrentRelatedServicesValues()\n\t\t{\n\t\t\tlet result = [];\n\n\t\t\tif (!this.selectedDeliveryServiceId)\n\t\t\t{\n\t\t\t\treturn result;\n\t\t\t}\n\n\t\t\tfor (let relatedService of this.relatedServices)\n\t\t\t{\n\t\t\t\tif (!relatedService.deliveryServiceIds.includes(this.selectedDeliveryServiceId))\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif (this.relatedServicesValues.hasOwnProperty(relatedService.id))\n\t\t\t\t{\n\t\t\t\t\tresult.push(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tid: relatedService.id,\n\t\t\t\t\t\t\tvalue: this.relatedServicesValues[relatedService.id]\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn result;\n\t\t},\n\t\ttotalPrice()\n\t\t{\n\t\t\tlet result = this.externalSum;\n\n\t\t\tif (this.deliveryPrice !== null)\n\t\t\t{\n\t\t\t\tresult += this.deliveryPrice;\n\t\t\t}\n\t\t\treturn result;\n\t\t},\n\t\ttotalPriceFormatted()\n\t\t{\n\t\t\treturn this.formatMoney(this.totalPrice);\n\t\t},\n\t\tdeliveryPrice()\n\t\t{\n\t\t\tif (!this.selectedDeliveryServiceId)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tif (this.selectedNoDelivery)\n\t\t\t{\n\t\t\t\treturn 0;\n\t\t\t}\n\n\t\t\tif (this.enteredDeliveryPrice)\n\t\t\t{\n\t\t\t\treturn +this.enteredDeliveryPrice;\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\t\tdeliveryPriceFormatted()\n\t\t{\n\t\t\treturn this.formatMoney(this.deliveryPrice);\n\t\t},\n\t\testimatedDeliveryPriceFormatted()\n\t\t{\n\t\t\treturn this.formatMoney(this.estimatedDeliveryPrice);\n\t\t},\n\t\texternalSumFormatted()\n\t\t{\n\t\t\treturn this.formatMoney(this.externalSum);\n\t\t},\n\t\tcalculateDeliveryPriceButtonClass()\n\t\t{\n\t\t\treturn {\n\t\t\t\t'ui-btn': true,\n\t\t\t\t'ui-btn-light-border': true,\n\t\t\t\t'salescenter-delivery-bottom-update-icon': true,\n\t\t\t\t'ui-btn-disabled': !this.isCalculatingAllowed,\n\t\t\t};\n\t\t},\n\t\tlocalize()\n\t\t{\n\t\t\treturn Vue.getFilteredPhrases('SALE_DELIVERY_SERVICE_SELECTOR_');\n\t\t},\n\t\textraServicesCount()\n\t\t{\n\t\t\tlet result = 0;\n\n\t\t\tfor (let relatedService of this.relatedServices)\n\t\t\t{\n\t\t\t\tif (!relatedService.deliveryServiceIds.includes(this.selectedDeliveryServiceId))\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tresult++;\n\t\t\t}\n\n\t\t\treturn result;\n\t\t},\n\t\trelatedPropsOfAddressTypeCount()\n\t\t{\n\t\t\tlet result = 0;\n\n\t\t\tfor (let relatedProp of this.relatedPropsOfAddressType)\n\t\t\t{\n\t\t\t\tif (!relatedProp.deliveryServiceIds.includes(this.selectedDeliveryServiceId))\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tresult++;\n\t\t\t}\n\n\t\t\treturn result;\n\t\t},\n\t\trelatedPropsOfOtherTypeCount()\n\t\t{\n\t\t\tlet result = 0;\n\n\t\t\tfor (let relatedProp of this.relatedPropsOfOtherTypes)\n\t\t\t{\n\t\t\t\tif (!relatedProp.deliveryServiceIds.includes(this.selectedDeliveryServiceId))\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tresult++;\n\t\t\t}\n\n\t\t\treturn result;\n\t\t},\n\t\tareProfilesVisible()\n\t\t{\n\t\t\treturn (this.selectedParentDeliveryService && this.selectedParentDeliveryService.profiles.length > 0);\n\t\t},\n\t\tselectedParentServiceName()\n\t\t{\n\t\t\treturn this.selectedParentDeliveryService ? this.selectedParentDeliveryService.name : '';\n\t\t},\n\t\tselectedParentServiceProfiles()\n\t\t{\n\t\t\tif (!this.selectedParentDeliveryService)\n\t\t\t{\n\t\t\t\treturn [];\n\t\t\t}\n\n\t\t\treturn this.selectedParentDeliveryService.profiles;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"salescenter-delivery\">\n\t\t\t<div class=\"salescenter-delivery-header\">\n\t\t\t\t<div class=\"salescenter-delivery-car-title--sm\">{{localize.SALE_DELIVERY_SERVICE_SELECTOR_DELIVERY_METHOD}}</div>\n\t\t\t\t<div class=\"salescenter-delivery-method\" ref=\"delivery-methods\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tv-for=\"deliveryService in deliveryServices\"\n\t\t\t\t\t\t@click=\"onDeliveryServiceChanged(deliveryService)\"\n\t\t\t\t\t\t:class=\"{\n\t\t\t\t\t\t\t'salescenter-delivery-method-item': true,\n\t\t\t\t\t\t\t'salescenter-delivery-method-item--selected': isParentDeliveryServiceSelected(deliveryService)\n\t\t\t\t\t\t}\"\n\t\t\t\t\t\t:data-role=\"isParentDeliveryServiceSelected(deliveryService) ? 'ui-ears-active' : ''\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div class=\"salescenter-delivery-method-image\">\n\t\t\t\t\t\t\t<img :src=\"deliveryService.logo\">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"salescenter-delivery-method-info\">\n\t\t\t\t\t\t\t<div v-if=\"deliveryService.title\" class=\"salescenter-delivery-method-title\">{{deliveryService.title}}</div>\n\t\t\t\t\t\t\t<div v-else=\"deliveryService.title\" class=\"salescenter-delivery-method-title\"></div>\n\t\t\t\t\t\t\t<div class=\"salescenter-delivery-method-name\">{{deliveryService.name}}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div @click=\"onAddMoreClicked\" class=\"salescenter-delivery-method-item salescenter-delivery-method-item--add\">\n\t\t\t\t\t\t<div class=\"salescenter-delivery-method-image-more\"></div>\n\t\t\t\t\t\t<div class=\"salescenter-delivery-method-info\">\n\t\t\t\t\t\t\t<div class=\"salescenter-delivery-method-name\">\n\t\t\t\t\t\t\t\t{{localize.SALE_DELIVERY_SERVICE_SELECTOR_ADD_MORE}}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div v-show=\"areProfilesVisible\">\n\t\t\t\t<div class=\"salescenter-delivery-car-title--sm\">{{selectedParentServiceName}}: {{localize.SALE_DELIVERY_SERVICE_SELECTOR_SHIPPING_SERVICES}}</div>\n\t\t\t\t<div ref=\"delivery-profiles\" class=\"salescenter-delivery-car salescenter-delivery-car--ya-delivery\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tv-for=\"(profile, index) in selectedParentServiceProfiles\"\n\t\t\t\t\t\t@click=\"onDeliveryServiceChanged(profile)\"\n\t\t\t\t\t\t:class=\"{'salescenter-delivery-car-item': true, 'salescenter-delivery-car-item--selected': selectedDeliveryService.id == profile.id, 'salescenter-delivery-car-item--disabled': !isServiceAvailable(profile)}\"\n\t\t\t\t\t\t:data-role=\"selectedDeliveryService.id == profile.id ? 'ui-ears-active' : ''\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div v-show=\"index === 0\" class=\"salescenter-delivery-car-lable\">\n\t\t\t\t\t\t\t{{localize.SALE_DELIVERY_SERVICE_SELECTOR_PROFITABLE}}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"salescenter-delivery-car-container\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclass=\"salescenter-delivery-car-image\"\n\t\t\t\t\t\t\t\t:style=\"{ backgroundImage: 'url(' + profile.logo + ')' }\"\n\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t<div class=\"salescenter-delivery-car-param\">\n\t\t\t\t\t\t\t\t<div class=\"salescenter-delivery-car-title\">\n\t\t\t\t\t\t\t\t\t{{profile.name}}\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tv-show=\"profile.restrictions\"\n\t\t\t\t\t\t\t\t\t\t@mouseenter=\"onRestrictionsHintShow($event, profile)\"\n\t\t\t\t\t\t\t\t\t\t@mouseleave=\"onRestrictionsHintHide($event)\"\n\t\t\t\t\t\t\t\t\t\tclass=\"salescenter-delivery-car-title-info\"\n\t\t\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"salescenter-delivery-car-info\">{{profile.description}}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t\t\t\t\t\n\t\t\t<div v-show=\"extraServicesCount > 0\" class=\"salescenter-delivery-additionally\">\n\t\t\t\t<div class=\"salescenter-delivery-additionally-options\">\n\t\t\t\t\t<component\n\t\t\t\t\t\tv-for=\"relatedService in relatedServices\"\n\t\t\t\t\t\tv-show=\"relatedService.deliveryServiceIds.includes(selectedDeliveryServiceId)\"\n\t\t\t\t\t\t:is=\"relatedService.type + '-service'\"\n\t\t\t\t\t\t:key=\"relatedService.id\"\n\t\t\t\t\t\t:name=\"relatedService.name\"\n\t\t\t\t\t\t:initValue=\"getServiceValue(relatedService)\"\t\t\t\t\t\t\n\t\t\t\t\t\t:options=\"relatedService.options\"\n\t\t\t\t\t\t:editable=\"editable\"\n\t\t\t\t\t\t@change=\"onServiceValueChanged($event, relatedService)\"\n\t\t\t\t\t>\n\t\t\t\t\t</component>\n\t\t\t\t</div>\n\t\t\t</div>\t\t\t\n\t\t\t<div v-show=\"relatedPropsOfAddressTypeCount > 0\" class=\"salescenter-delivery-path\">\n\t\t\t\t<div\n\t\t\t\t\tv-for=\"(relatedProp, index) in relatedPropsOfAddressType\"\n\t\t\t\t\tv-show=\"relatedProp.deliveryServiceIds.includes(selectedDeliveryServiceId)\"\n\t\t\t\t\tclass=\"salescenter-delivery-path-item\"\n\t\t\t\t>\n\t\t\t\t\t<div class=\"salescenter-delivery-path-title\">{{relatedProp.name}}</div>\n\t\t\t\t\t<component\n\t\t\t\t\t\t:is=\"'ADDRESS-control'\"\n\t\t\t\t\t\t:key=\"relatedProp.id\"\n\t\t\t\t\t\t:name=\"'PROPS_' + relatedProp.id\"\t\t\t\t\t\t\t\n\t\t\t\t\t\t:initValue=\"getPropValue(relatedProp)\"\n\t\t\t\t\t\t:editable=\"editable\"\n\t\t\t\t\t\t:options=\"getPropOptions(relatedProp)\"\n\t\t\t\t\t\t:isStartMarker=\"index === 0\"\n\t\t\t\t\t\t@change=\"onPropValueChanged($event, relatedProp)\"\n\t\t\t\t\t></component>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t\n\t\t\t<div v-show=\"relatedPropsOfOtherTypeCount > 0\" class=\"salescenter-delivery-path\">\n\t\t\t\t<div\n\t\t\t\t\tv-for=\"(relatedProp, index) in relatedPropsOfOtherTypes\"\n\t\t\t\t\tv-show=\"relatedProp.deliveryServiceIds.includes(selectedDeliveryServiceId)\"\n\t\t\t\t\tclass=\"salescenter-delivery-path-item\"\n\t\t\t\t>\n\t\t\t\t\t<div class=\"salescenter-delivery-path-title-ordinary\">{{relatedProp.name}}</div>\n\t\t\t\t\t<div class=\"salescenter-delivery-path-control\">\n\t\t\t\t\t\t<component\n\t\t\t\t\t\t\t:is=\"relatedProp.type + '-control'\"\n\t\t\t\t\t\t\t:key=\"relatedProp.id\"\n\t\t\t\t\t\t\t:name=\"'PROPS_' + relatedProp.id\"\n\t\t\t\t\t\t\t:editable=\"editable\"\n\t\t\t\t\t\t\t:initValue=\"getPropValue(relatedProp)\"\n\t\t\t\t\t\t\t:settings=\"relatedProp.settings\"\n\t\t\t\t\t\t\t:options=\"getPropOptions(relatedProp)\"\n\t\t\t\t\t\t\t@change=\"onPropValueChanged($event, relatedProp)\"\n\t\t\t\t\t\t></component>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div v-if=\"isResponsibleUserSectionVisible\" class=\"salescenter-delivery-manager-wrapper\">\n\t\t\t\t<div class=\"ui-ctl-label-text\">{{localize.SALE_DELIVERY_SERVICE_SELECTOR_RESPONSIBLE_MANAGER}}</div>\n\t\t\t\t<div class=\"salescenter-delivery-manager\">\n\t\t\t\t\t<div class=\"salescenter-delivery-manager-avatar\" :style=\"responsibleUser.photo ? {'background-image': 'url(' + responsibleUser.photo + ')'} : {}\"></div>\n\t\t\t\t\t<div class=\"salescenter-delivery-manager-content\">\n\t\t\t\t\t\t<div @click=\"responsibleUserClicked\" class=\"salescenter-delivery-manager-name\">{{responsibleUser.name}}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div v-if=\"editable\" @click=\"openChangeResponsibleDialog\" class=\"salescenter-delivery-manager-edit\">{{localize.SALE_DELIVERY_SERVICE_SELECTOR_CHANGE_RESPONSIBLE}}</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t\t\t\n\t\t\t<div v-show=\"!selectedNoDelivery\">\n\t\t\t\t<template v-if=\"calculateErrors\">\n\t\t\t\t\t<div v-for=\"(error, index) in calculateErrors\" class=\"ui-alert ui-alert-danger ui-alert-icon-danger salescenter-delivery-errors-container-alert\">\n\t\t\t\t\t\t<span  class=\"ui-alert-message\">\n\t\t\t\t\t\t\t<span v-html=\"error\"></span>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t\t<div class=\"salescenter-delivery-bottom\">\n\t\t\t\t\t<div v-if=\"editable && selectedDeliveryService\" class=\"salescenter-delivery-bottom-row\">\t\t\t\t\t\n\t\t\t\t\t\t<div class=\"salescenter-delivery-bottom-col\">\n\t\t\t\t\t\t\t<span v-show=\"!isCalculating\" @click=\"calculate\" :class=\"calculateDeliveryPriceButtonClass\">{{isCalculated ? localize.SALE_DELIVERY_SERVICE_SELECTOR_CALCULATE_UPDATE : localize.SALE_DELIVERY_SERVICE_SELECTOR_CALCULATE}}</span>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t<span v-show=\"isCalculating\" class=\"salescenter-delivery-waiter\">\n\t\t\t\t\t\t\t\t<span class=\"salescenter-delivery-waiter-alert\">{{localize.SALE_DELIVERY_SERVICE_SELECTOR_CALCULATING_LABEL}}</span>\n\t\t\t\t\t\t\t\t<span class=\"salescenter-delivery-waiter-text\">{{localize.SALE_DELIVERY_SERVICE_SELECTOR_CALCULATING_REQUEST_SENT}} {{selectedParentDeliveryService ? selectedParentDeliveryService.name : ''}}</span>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div v-show=\"isCalculated\" class=\"salescenter-delivery-bottom-row\">\n\t\t\t\t\t\t<div class=\"salescenter-delivery-bottom-col\"></div>\n\t\t\t\t\t\t<div class=\"salescenter-delivery-bottom-col\">\n\t\t\t\t\t\t\t<table class=\"salescenter-delivery-table-total\">\n\t\t\t\t\t\t\t\t<tr v-show=\"editable\">\n\t\t\t\t\t\t\t\t\t<td>{{localize.SALE_DELIVERY_SERVICE_SELECTOR_EXPECTED_DELIVERY_PRICE}}:</td>\n\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t<span v-html=\"estimatedDeliveryPriceFormatted\"></span>&nbsp;<span v-html=\"currencySymbol\"></span>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<td>{{localize.SALE_DELIVERY_SERVICE_SELECTOR_CLIENT_DELIVERY_PRICE}}:</td>\n\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-md ui-ctl-wa salescenter-delivery-bottom-input-symbol\">\n\t\t\t\t\t\t\t\t\t\t\t<input :disabled=\"!editable\" v-model=\"enteredDeliveryPrice\" @keypress=\"isNumber($event)\" type=\"text\" class=\"ui-ctl-element ui-ctl-textbox\">\n\t\t\t\t\t\t\t\t\t\t\t<span v-html=\"currencySymbol\"></span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<td>{{externalSumLabel}}:</td>\n\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t<span v-html=\"externalSumFormatted\"></span><span class=\"salescenter-delivery-table-total-symbol\" v-html=\"currencySymbol\"></span>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<td>{{localize.SALE_DELIVERY_SERVICE_SELECTOR_DELIVERY_DELIVERY}}:</td>\n\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t<span v-show=\"deliveryPrice > 0\">\n\t\t\t\t\t\t\t\t\t\t\t<span v-html=\"deliveryPriceFormatted\"></span>&nbsp;<span v-html=\"currencySymbol\"></span>\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t<span v-show=\"!deliveryPrice\" class=\"salescenter-delivery-status salescenter-delivery-status--success\">\n\t\t\t\t\t\t\t\t\t\t\t{{localize.SALE_DELIVERY_SERVICE_SELECTOR_CLIENT_DELIVERY_PRICE_FREE}}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<tr class=\"salescenter-delivery-table-total-result\">\n\t\t\t\t\t\t\t\t\t<td>{{localize.SALE_DELIVERY_SERVICE_SELECTOR_TOTAL}}:</td>\n\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t<span v-html=\"totalPriceFormatted\"></span>\n\t\t\t\t\t\t\t\t\t\t<span class=\"salescenter-delivery-table-total-symbol\" v-html=\"currencySymbol\"></span>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`\n};\n"],"names":["props","name","type","String","required","initValue","settings","options","editable","Boolean","created","value","data","methods","onInput","event","target","$emit","computed","isMultiline","MULTILINE","template","handleOutsideClick","bind","el","binding","vnode","e","which","stopPropagation","handler","exclude","clickedOnExcludedEl","forEach","refName","excludedEl","context","$refs","contains","closest","document","addEventListener","unbind","removeEventListener","directives","closable","ClosableDirective","default","isStartMarker","enterTookPlace","rightIcon","isEntering","isLoading","editMode","addressWidgetState","enteredAddresses","switchToEditMode","showMap","clarifyAddress","setTimeout","focus","click","clearAddress","addressWidget","address","changeValue","onControlClicked","closeMap","onControlFocus","onControlBlur","newValue","syncRightIcon","onChangeCallback","length","buildAddress","BX","Location","Core","Address","JSON","parse","isValueValid","latitude","longitude","getPresetLocationsProvider","result","hasOwnProperty","defaultItems","map","item","enteredAddress","location","toLocation","AddressStringConverter","convertAddressToString","addressFormat","STRATEGY_TYPE_FIELD_TYPE","CONTENT_TYPE_TEXT","push","getMap","features","feature","Widget","MapFeature","addressFormatted","toString","STRATEGY_TYPE_FIELD_SORT","isEditMode","wrapperClass","needsClarification","mapMarkerClass","rightIconClass","State","DATA_LOADING","localize","Vue","getFilteredPhrases","mounted","Factory","createAddressWidget","mode","ControlMode","edit","mapBehavior","useFeatures","fields","autocomplete","popupOptions","offsetLeft","popupBindOptions","forceBindPosition","presetLocationsProvider","nativeOnInputKeyup","onInputKeyup","code","call","subscribeOnAddressChangedEvent","getData","toJson","subscribeOnStateChangedEvent","state","DATA_INPUTTING","DATA_LOADED","subscribeOnFeatureEvent","AutocompleteFeature","eventCode","searchStartedEvent","searchCompletedEvent","subscribeOnErrorEvent","errors","errorMessage","error","message","join","UI","Notification","Center","notify","content","render","inputNode","autocompleteMenuElement","mapBindElement","controlWrapper","onChange","checked","Array","getSelectedItemTitle","selectedItem","getSelectedItem","id","title","option","showPopupMenu","menuItems","onclick","popupMenu","close","Menu","bindElement","items","angle","closeByEsc","show","components","AddressControl","StringControl","CheckboxService","DropdownService","initDeliveryServiceId","initRelatedServicesValues","initRelatedPropsValues","initRelatedPropsOptions","initResponsibleId","initEnteredDeliveryPrice","initIsCalculated","personTypeId","action","actionData","Object","externalSum","externalSumLabel","currency","currencySymbol","availableServiceIds","excludedServiceIds","selectedDeliveryService","deliveryServices","relatedProps","relatedPropsOfAddressType","relatedPropsOfOtherTypes","relatedPropsValues","relatedServices","relatedServicesValues","estimatedDeliveryPrice","enteredDeliveryPrice","responsibleUser","isCalculated","isCalculating","calculateErrors","restrictionsHintPopup","initialize","ajax","runAction","responsibleId","then","services","deliveryService","profiles","profile","properties","relatedProp","stringify","set","filter","extraServices","relatedService","responsible","_userPageTemplate","userPageTemplate","_deliverySettingsUrl","deliverySettingsUrl","Ears","container","smallSize","noScrollbar","init","emitChange","calculate","isCalculatingAllowed","calculationFinallyCallback","status","payload","assign","deliveryServiceId","selectedDeliveryServiceId","shipmentPropValues","currentRelatedPropsValues","deliveryRelatedServiceValues","currentRelatedServicesValues","deliveryResponsibleId","deliveryPrice","catch","openChangeResponsibleDialog","self","_userEditor","Crm","EntityEditorUserSelector","callback","search","bUndeleted","entityId","photo","avatar","open","parentElement","onDeliveryServiceChanged","selfCall","isServiceAvailable","parentId","service","includes","onPropValueChanged","onServiceValueChanged","responsibleUserClicked","Manager","openSlider","responsibleUserLink","formatMoney","Currency","currencyFormat","isNumber","window","charCode","keyCode","preventDefault","getPropValue","getPropOptions","getServiceValue","onAddMoreClicked","getDeliveryServiceById","isParentDeliveryServiceSelected","selectedParentDeliveryService","onRestrictionsHintShow","Hint","Popup","buildRestrictionsNode","restrictionsNodes","restrictions","restriction","Text","encode","Tag","onRestrictionsHintHide","hide","watch","areProfilesVisible","oldValue","className","deliveryServiceName","selectedDeliveryServiceName","selectedNoDelivery","arePropValuesReady","deliveryServiceIds","isResponsibleUserSectionVisible","replace","totalPrice","totalPriceFormatted","deliveryPriceFormatted","estimatedDeliveryPriceFormatted","externalSumFormatted","calculateDeliveryPriceButtonClass","extraServicesCount","relatedPropsOfAddressTypeCount","relatedPropsOfOtherTypeCount","selectedParentServiceName","selectedParentServiceProfiles"],"mappings":"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"}