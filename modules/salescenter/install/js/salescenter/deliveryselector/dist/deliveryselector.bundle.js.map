{"version":3,"file":"deliveryselector.bundle.js","sources":["../src/properties/string.js","../src/closabledirective.js","../src/properties/address.js","../src/services/checkbox.js","../src/services/yandex-taxi-vehicle-car.js","../src/services/yandex-taxi-vehicle-truck.js","../src/services/yandex-taxi-vehicle-type.js","../src/services/customregistry.js","../src/deliveryselector.js"],"sourcesContent":["export default {\n\tprops: {\n\t\tname: {type: String, required: true},\n\t\tinitValue: {required: false},\n\t\tsettings: {required: false},\n\t\teditable: {required: true, type: Boolean},\n\t},\n\tcreated()\n\t{\n\t\tthis.value = this.initValue;\n\t},\n\tdata()\n\t{\n\t\treturn {\n\t\t\tvalue: null,\n\t\t}\n\t},\n\tmethods: {\n\t\tonInput(event)\n\t\t{\n\t\t\tthis.value = event.target.value;\n\n\t\t\tthis.$emit('change', this.value);\n\t\t}\n\t},\n\tcomputed: {\n\t\tisMultiline()\n\t\t{\n\t\t\treturn (this.settings && this.settings.MULTILINE === 'Y');\n\t\t}\n\t},\n\ttemplate: `\n\t\t<div class=\"ui-ctl ui-ctl-w100\">\n\t\t\t<textarea v-if=\"isMultiline\" :disabled=\"!editable\" @input=\"onInput\" :name=\"name\" class=\"ui-ctl-element salescenter-delivery-comment-textarea\" rows=\"1\">{{value}}</textarea>\n\t\t\t<input v-else :disabled=\"!editable\" @input=\"onInput\" type=\"text\" :name=\"name\" :value=\"value\" class=\"ui-ctl-element ui-ctl-textbox\" />\n\t\t</div>\t\t\t\t\t\n\t`\n};\n","let handleOutsideClick;\n\nexport default {\n\tbind (el, binding, vnode) {\n\t\thandleOutsideClick = (e) => {\n\t\t\te.stopPropagation();\n\t\t\tconst { handler, exclude } = binding.value;\n\t\t\tlet clickedOnExcludedEl = false;\n\t\t\texclude.forEach(refName => {\n\t\t\t\tif (!clickedOnExcludedEl) {\n\t\t\t\t\tconst excludedEl = vnode.context.$refs[refName];\n\t\t\t\t\tclickedOnExcludedEl = excludedEl.contains(e.target);\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (!el.contains(e.target) && !clickedOnExcludedEl) {\n\t\t\t\tvnode.context[handler]()\n\t\t\t}\n\t\t};\n\t\tdocument.addEventListener('click', handleOutsideClick);\n\t\tdocument.addEventListener('touchstart', handleOutsideClick);\n\t},\n\n\tunbind () {\n\t\tdocument.removeEventListener('click', handleOutsideClick);\n\t\tdocument.removeEventListener('touchstart', handleOutsideClick);\n\t}\n};\n","import ClosableDirective from '../closabledirective';\n\nimport '../css/address.css';\n\nexport default {\n\tdirectives: {\n\t\tclosable: ClosableDirective\n\t},\n\tprops: {\n\t\tname: {type: String, required: true},\n\t\tinitValue: {},\n\t\tsettings: {},\n\t\teditable: {type: Boolean, default: true},\n\t},\n\tdata()\n\t{\n\t\treturn {\n\t\t\tenterTookPlace: false,\n\t\t\tisEntering: false,\n\t\t\teditMode: false,\n\t\t\tvalue: null,\n\t\t\taddressWidgetState: null,\n\t\t}\n\t},\n\tmethods: {\n\t\tonInputClicked()\n\t\t{\n\t\t\tif (!this.editable)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.value)\n\t\t\t{\n\t\t\t\tthis.showMap();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.closeMap();\n\t\t\t}\n\t\t},\n\t\tonTextClicked()\n\t\t{\n\t\t\tif (!this.editable)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.editMode = true;\n\t\t},\n\t\tonClearClicked()\n\t\t{\n\t\t\tif (!this.editable)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.addressWidget.address = null;\n\t\t\tthis.changeValue(null);\n\t\t\tthis.closeMap();\n\t\t},\n\t\tonInputFocus()\n\t\t{\n\t\t\tthis.enterTookPlace = true;\n\t\t\tthis.isEntering = true;\n\t\t},\n\t\tonInputBlur()\n\t\t{\n\t\t\tthis.isEntering = false;\n\n\t\t\tthis.closeMap();\n\t\t},\n\t\tonInputEnterKeyDown()\n\t\t{\n\t\t\tthis.isEntering = false;\n\t\t},\n\t\tchangeValue(newValue)\n\t\t{\n\t\t\tthis.value = newValue;\n\n\t\t\tthis.$emit('change', this.value);\n\n\t\t\tif (this.onChangeCallback)\n\t\t\t{\n\t\t\t\tthis.onChangeCallback();\n\t\t\t}\n\t\t},\n\t\tbuildAddress(value)\n\t\t{\n\t\t\ttry\n\t\t\t{\n\t\t\t\treturn new BX.Location.Core.Address(JSON.parse(value));\n\t\t\t}\n\t\t\tcatch(e)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Map Feature Methods\n\t\t */\n\t\tgetMap()\n\t\t{\n\t\t\tif (!this.addressWidget)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tfor( let feature of this.addressWidget.features)\n\t\t\t{\n\t\t\t\tif(feature instanceof BX.Location.Widget.MapFeature)\n\t\t\t\t{\n\t\t\t\t\treturn feature;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\t\tshowMap()\n\t\t{\n\t\t\tlet map = this.getMap();\n\n\t\t\tif (map)\n\t\t\t{\n\t\t\t\tmap.showMap();\n\t\t\t}\n\t\t},\n\t\tcloseMap()\n\t\t{\n\t\t\tlet map = this.getMap();\n\n\t\t\tif (map)\n\t\t\t{\n\t\t\t\tmap.closeMap();\n\t\t\t}\n\n\t\t\tthis.editMode = false;\n\t\t},\n\t},\n\tcomputed: {\n\t\taddressFormatted()\n\t\t{\n\t\t\tif(!this.value || !this.addressWidget)\n\t\t\t{\n\t\t\t\treturn '';\n\t\t\t}\n\n\t\t\tlet address = this.buildAddress(this.value);\n\n\t\t\tif (!address)\n\t\t\t{\n\t\t\t\treturn '';\n\t\t\t}\n\n\t\t\treturn address.toString(\n\t\t\t\tthis.addressWidget.addressFormat,\n\t\t\t\tBX.Location.Core.AddressStringConverter.STRATEGY_TYPE_FIELD_SORT\n\t\t\t);\n\t\t},\n\t\tisEditMode()\n\t\t{\n\t\t\treturn this.editMode || !this.value;\n\t\t},\n\t\twrapperClass()\n\t\t{\n\t\t\tlet showDangerIndicator = (\n\t\t\t\t!this.isEntering\n\t\t\t\t&& this.enterTookPlace\n\t\t\t\t&& !this.value\n\t\t\t\t&& this.addressWidgetState !== BX.Location.Widget.State.DATA_LOADING\n\t\t\t);\n\n\t\t\treturn {\n\t\t\t\t'ui-ctl': true,\n\t\t\t\t'ui-ctl-textbox': true,\n\t\t\t\t'ui-ctl-danger': showDangerIndicator,\n\t\t\t\t'ui-ctl-w100': true,\n\t\t\t\t'ui-ctl-after-icon': true,\n\t\t\t\t'sale-address-control-top-margin-5': this.isEditMode\n\t\t\t}\n\t\t},\n\t},\n\tmounted()\n\t{\n\t\tif (this.initValue)\n\t\t{\n\t\t\tthis.value = this.initValue;\n\t\t}\n\n\t\tthis.addressWidget = (new BX.Location.Widget.Factory).createAddressWidget({\n\t\t\taddress: this.initValue ? this.buildAddress(this.initValue) : null,\n\t\t\tmapBehavior: 'manual',\n\t\t\tpopupBindOptions: {\n\t\t\t\tposition: 'right'\n\t\t\t},\n\t\t\tmode: BX.Location.Core.ControlMode.edit,\n\t\t\tuseFeatures: {\n\t\t\t\tfields: false,\n\t\t\t\tmap: true,\n\t\t\t\tautocomplete: true\n\t\t\t}\n\t\t});\n\n\n\t\t/**\n\t\t * Redefine native onInputKeyup\n\t\t */\n\t\tconst nativeOnInputKeyup = this.addressWidget.onInputKeyup;\n\t\tthis.addressWidget.onInputKeyup = (e: KeyboardEvent) =>\n\t\t{\n\t\t\tswitch (e.code)\n\t\t\t{\n\t\t\t\tcase 'Enter':\n\t\t\t\tcase 'NumpadEnter':\n\t\t\t\t\treturn;\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tnativeOnInputKeyup.call(this.addressWidget, e);\n\t\t};\n\n\t\t/**\n\t\t * Subscribe to widget events\n\t\t */\n\t\tthis.addressWidget.subscribeOnAddressChangedEvent((event) => {\n\t\t\tlet data = event.getData();\n\n\t\t\tthis.editMode = true;\n\n\t\t\tlet address = data.address;\n\n\t\t\tif (!address.latitude || !address.longitude)\n\t\t\t{\n\t\t\t\tthis.changeValue(null);\n\t\t\t\tthis.closeMap();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.changeValue(address.toJson());\n\t\t\t\tthis.showMap();\n\t\t\t}\n\t\t});\n\n\t\tthis.addressWidget.subscribeOnStateChangedEvent((event) => {\n\t\t\tlet data = event.getData();\n\n\t\t\tthis.addressWidgetState = data.state;\n\t\t\tif (data.state === BX.Location.Widget.State.DATA_INPUTTING)\n\t\t\t{\n\t\t\t\tthis.changeValue(null);\n\t\t\t\tthis.closeMap();\n\t\t\t}\n\t\t});\n\n\t\t/**\n\t\t * Render widget\n\t\t */\n\t\tthis.addressWidget.render({\n\t\t\tinputNode: this.$refs['input-node'],\n\t\t\tmapBindElement: this.$refs['input-node'],\n\t\t\tcontrolWrapper: this.$refs['control-wrapper'],\n\t\t});\n\t},\n\ttemplate: `\n\t\t<div\n\t\t\tv-closable=\"{\n\t\t\t\texclude: ['input-node'],\n\t\t\t\thandler: 'onInputBlur'\n\t\t\t}\"\n\t\t\tclass=\"ui-ctl-w100\"\n\t\t>\n\t\t\t<div :class=\"wrapperClass\" ref=\"control-wrapper\">\n\t\t\t\t<div\n\t\t\t\t\tv-show=\"isEditMode\"\n\t\t\t\t\t@click=\"onClearClicked\"\n\t\t\t\t\tclass=\"ui-ctl-after ui-ctl-icon-btn ui-ctl-icon-clear\"\n\t\t\t\t></div>\n\t\t\t\t<input\n\t\t\t\t\tv-show=\"isEditMode\"\n\t\t\t\t\t@click=\"onInputClicked\"\n\t\t\t\t\t@focus=\"onInputFocus\"\n\t\t\t\t\t@keydown.enter=\"onInputEnterKeyDown\"\n\t\t\t\t\t:disabled=\"!editable\"\n\t\t\t\t\tref=\"input-node\"\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t/>\n\t\t\t\t<span\n\t\t\t\t\tv-show=\"!isEditMode\"\n\t\t\t\t\t@click=\"onTextClicked\"\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tclass=\"ui-ctl-element ui-ctl-textbox sale-address-control-path-input\"\n\t\t\t\t\tcontenteditable=\"false\"\n\t\t\t\t\tv-html=\"addressFormatted\"\n\t\t\t\t></span>\n\t\t\t\t<input v-model=\"value\" :name=\"name\" type=\"hidden\" />\n\t\t\t</div>\t\t\t\t\t\n\t\t</div>\n\t`\n};\n","export default {\n\tprops: {\n\t\tname: {required: false},\n\t\tinitValue: {required: false},\n\t\teditable: {required: true, type: Boolean},\n\t},\n\tcreated()\n\t{\n\t\tthis.value = this.initValue;\n\t},\n\tdata()\n\t{\n\t\treturn {\n\t\t\tvalue: null\n\t\t}\n\t},\n\tmethods: {\n\t\tonChange(event)\n\t\t{\n\t\t\tthis.value =  event.target.checked ? 'Y' : '';\n\t\t\tthis.$emit('change', this.value);\n\t\t}\n\t},\n\ttemplate: `\n\t\t<label class=\"salescenter-delivery-selector salescenter-delivery-selector--hover salescenter-delivery-selector--checkbox\">\n\t\t\t<input :disabled=\"!editable\" @change=\"onChange\" :checked=\"value == 'Y' ? true : false\" type=\"checkbox\" value=\"Y\" />\n\t\t\t<span class=\"salescenter-delivery-selector-text\">{{name}}</span>\n\t\t</label>\n\t`\n};\n","import {Vue} from 'ui.vue';\nimport {Loc} from 'main.core';\n\nexport default {\n\ttemplate: `\n\t\t<div class=\"salescenter-delivery-car-container\">\n\t\t\t<div class=\"salescenter-delivery-car-image salescenter-delivery-car-image--car\"></div>\n\t\t\t<div class=\"salescenter-delivery-car-param\">\n\t\t\t\t<table>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>{{localize.SALE_DELIVERY_SERVICE_SELECTOR_LENGTH}}</td>\n\t\t\t\t\t\t<td>130 {{localize.SALE_DELIVERY_SERVICE_SELECTOR_LENGTH_DIMENSION_UNIT}}</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>{{localize.SALE_DELIVERY_SERVICE_SELECTOR_WIDTH}}</td>\n\t\t\t\t\t\t<td>100 {{localize.SALE_DELIVERY_SERVICE_SELECTOR_LENGTH_DIMENSION_UNIT}}</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>{{localize.SALE_DELIVERY_SERVICE_SELECTOR_HEIGHT}}</td>\n\t\t\t\t\t\t<td>50 {{localize.SALE_DELIVERY_SERVICE_SELECTOR_LENGTH_DIMENSION_UNIT}}</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>{{localize.SALE_DELIVERY_SERVICE_SELECTOR_WEIGHT}}</td>\n\t\t\t\t\t\t<td>20 {{localize.SALE_DELIVERY_SERVICE_SELECTOR_WEIGHT_UNIT}}</td>\n\t\t\t\t\t</tr>\n\t\t\t\t</table>\n\t\t\t</div>\n\t\t</div>\n\t`,\n\tcomputed: {\n\t\tlocalize() {\n\t\t\treturn Vue.getFilteredPhrases('SALE_DELIVERY_SERVICE_SELECTOR_');\n\t\t}\n\t}\n}\n","import {Vue} from 'ui.vue';\nimport {Loc} from 'main.core';\n\nexport default {\n\ttemplate: `\n\t\t<div class=\"salescenter-delivery-car-container\">\n\t\t\t<div class=\"salescenter-delivery-car-image salescenter-delivery-car-image--truck\"></div>\n\t\t\t<div class=\"salescenter-delivery-car-param\">\n\t\t\t\t<table>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>{{localize.SALE_DELIVERY_SERVICE_SELECTOR_LENGTH}}</td>\n\t\t\t\t\t\t<td>3 400 {{localize.SALE_DELIVERY_SERVICE_SELECTOR_LENGTH_DIMENSION_UNIT}}</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>{{localize.SALE_DELIVERY_SERVICE_SELECTOR_WIDTH}}</td>\n\t\t\t\t\t\t<td>1 950 {{localize.SALE_DELIVERY_SERVICE_SELECTOR_LENGTH_DIMENSION_UNIT}}</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>{{localize.SALE_DELIVERY_SERVICE_SELECTOR_HEIGHT}}</td>\n\t\t\t\t\t\t<td>1 600 {{localize.SALE_DELIVERY_SERVICE_SELECTOR_LENGTH_DIMENSION_UNIT}}</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>{{localize.SALE_DELIVERY_SERVICE_SELECTOR_WEIGHT}}</td>\n\t\t\t\t\t\t<td>2 200 {{localize.SALE_DELIVERY_SERVICE_SELECTOR_WEIGHT_UNIT}}</td>\n\t\t\t\t\t</tr>\n\t\t\t\t</table>\n\t\t\t</div>\n\t\t</div>\n\t`,\n\tcomputed: {\n\t\tlocalize() {\n\t\t\treturn Vue.getFilteredPhrases('SALE_DELIVERY_SERVICE_SELECTOR_');\n\t\t}\n\t}\n}\n","import Car from './yandex-taxi-vehicle-car';\nimport Truck from './yandex-taxi-vehicle-truck';\n\nexport default {\n\tprops: {\n\t\toptions: {type: Array, required: true},\n\t\tname: {type: String, required: true},\n\t\tinitValue: {type: String, required: false},\n\t\teditable: {required: true, type: Boolean},\n\t},\n\tdata()\n\t{\n\t\treturn {\n\t\t\tvalue: null\n\t\t};\n\t},\n\tmethods: {\n\t\tonItemClick(value)\n\t\t{\n\t\t\tif (!this.editable)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.value = value;\n\t\t\tthis.$emit('change', this.value);\n\t\t}\n\t},\n\tcomponents: {\n\t\t'express': Car,\n\t\t'cargo': Truck,\n\t},\n\tcreated()\n\t{\n\t\tthis.value = this.initValue;\n\t},\n\ttemplate: `\n\t\t<div class=\"salescenter-delivery-car\">\n\t\t\t<div v-for=\"option in options\" @click=\"onItemClick(option.id)\" :class=\"{'salescenter-delivery-car-item': true, 'salescenter-delivery-car-item--selected': option.id == value}\" >\n\t\t\t\t<div class=\"salescenter-delivery-car-title\">{{option.title}}</div>\n\t\t\t\t<component\n\t\t\t\t\t:is=\"option.code\"\n\t\t\t\t\t:key=\"option.code\"\n\t\t\t\t>\n\t\t\t\t</component>\n\t\t\t</div>\n\t\t</div>\n\t`\n};\n","import YandexTaxiVehicleType from './yandex-taxi-vehicle-type';\n\nexport default {\n\t'SERVICE_YANDEX_TAXI_VEHICLE_TYPE': YandexTaxiVehicleType,\n}\n","import {Vue} from 'ui.vue';\nimport {ajax} from 'main.core';\nimport {Manager} from 'salescenter.manager';\nimport StringControl from './properties/string';\nimport AddressControl from './properties/address';\nimport CheckboxService from './services/checkbox';\nimport customServiceRegistry from './services/customregistry';\nimport 'currency';\n\nimport './css/deliveryselector.css';\n\nexport default {\n\tcomponents: {\n\t\t/**\n\t\t * Properties Control Types\n\t\t */\n\t\t'ADDRESS-control': AddressControl,\n\t\t'STRING-control': StringControl,\n\t\t/**\n\t\t * Extra Services Control Types\n\t\t */\n\t\t'checkbox-service': CheckboxService,\n\t},\n\tprops: {\n\t\tinitDeliveryServiceId: {required: false},\n\t\tinitRelatedServicesValues: {required: false},\n\t\tinitRelatedPropsValues: {required: false},\n\t\tinitResponsibleId: {default: null, required: false},\n\t\tinitEstimatedDeliveryPrice: {required: false},\n\t\tinitEnteredDeliveryPrice: {required: false},\n\t\tinitIsCalculated: {required: false},\n\t\tpersonTypeId: {required: true},\n\t\taction: {type: String, required: true },\n\t\tactionData: {type: Object, required: true },\n\t\texternalSum: {required: true},\n\t\texternalSumLabel: {type: String, required: true},\n\t\tcurrency: {type: String, required: true},\n\t\tcurrencySymbol: {type: String, required: true},\n\t\teditable: {type: Boolean, required: true},\n\t},\n\tdata()\n\t{\n\t\treturn {\n\t\t\t/**\n\t\t\t * Selected Service\n\t\t\t */\n\t\t\tselectedDeliveryService: null,\n\t\t\tdeliveryServices: [],\n\n\t\t\t/**\n\t\t\t * Props\n\t\t\t */\n\t\t\trelatedProps: [],\n\t\t\trelatedPropsOfAddressType: [],\n\t\t\trelatedPropsOfOtherTypes: [],\n\t\t\trelatedPropsValues: {},\n\n\t\t\t/**\n\t\t\t * Extra Services\n\t\t\t */\n\t\t\trelatedServices: [],\n\t\t\trelatedServicesOfCheckboxType: [],\n\t\t\tcustomServices: [],\n\t\t\trelatedServicesValues: {},\n\n\t\t\t/**\n\t\t\t * Prices\n\t\t\t */\n\t\t\testimatedDeliveryPrice: null,\n\t\t\tenteredDeliveryPrice: null,\n\t\t\t/**\n\t\t\t * Responsible User\n\t\t\t */\n\t\t\tresponsibleUser: null,\n\n\t\t\t/**\n\t\t\t * Processing Indicators\n\t\t\t */\n\t\t\tisCalculated: false,\n\t\t\tisCalculating: false,\n\n\t\t\tcalculateErrors: [],\n\t\t};\n\t},\n\tmethods: {\n\t\tinitialize()\n\t\t{\n\t\t\tajax.runAction(\n\t\t\t\t'salescenter.deliveryselector.getinitializationdata',\n\t\t\t\t{data: {personTypeId: this.personTypeId, responsibleId: this.initResponsibleId}}\n\t\t\t).then((result) => {\n\t\t\t\t/**\n\t\t\t\t * Delivery services\n\t\t\t\t */\n\n\t\t\t\tthis.deliveryServices = result.data.services;\n\n\t\t\t\tif (this.deliveryServices.length > 0)\n\t\t\t\t{\n\t\t\t\t\tlet initDeliveryServiceId = this.selectedDeliveryService\n\t\t\t\t\t\t? this.selectedDeliveryService.id\n\t\t\t\t\t\t: (this.initDeliveryServiceId ? this.initDeliveryServiceId : null);\n\n\t\t\t\t\tif (initDeliveryServiceId)\n\t\t\t\t\t{\n\t\t\t\t\t\tfor (let deliveryService of this.deliveryServices)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (deliveryService.id == initDeliveryServiceId)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.selectedDeliveryService = deliveryService;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!this.selectedDeliveryService)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.selectedDeliveryService = this.deliveryServices[0];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t/**\n\t\t\t\t * Related props\n\t\t\t\t */\n\t\t\t\tlet relatedProps = result.data.properties;\n\n\t\t\t\t/**\n\t\t\t\t * Setting default values to related props\n\t\t\t\t */\n\t\t\t\tfor (let relatedProp of relatedProps)\n\t\t\t\t{\n\t\t\t\t\tlet initValue = null;\n\n\t\t\t\t\tif (this.initRelatedPropsValues\n\t\t\t\t\t\t&& this.initRelatedPropsValues.hasOwnProperty(relatedProp.id)\n\t\t\t\t\t)\n\t\t\t\t\t{\n\t\t\t\t\t\tinitValue = this.initRelatedPropsValues[relatedProp.id];\n\t\t\t\t\t}\n\t\t\t\t\telse if (relatedProp.initValue)\n\t\t\t\t\t{\n\t\t\t\t\t\tinitValue = relatedProp.initValue;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (initValue !== null)\n\t\t\t\t\t{\n\t\t\t\t\t\tinitValue = (typeof initValue === 'object') ? JSON.stringify(initValue) : initValue;\n\n\t\t\t\t\t\tVue.set(this.relatedPropsValues, relatedProp.id, initValue);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis.relatedProps = relatedProps;\n\t\t\t\tthis.relatedPropsOfAddressType = this.relatedProps.filter((item) => item.type === 'ADDRESS');\n\t\t\t\tthis.relatedPropsOfOtherTypes = this.relatedProps.filter((item) => item.type !== 'ADDRESS');\n\n\t\t\t\t/**\n\t\t\t\t * Related services\n\t\t\t\t */\n\t\t\t\tlet relatedServices = result.data.extraServices;\n\n\t\t\t\tfor (let relatedService of relatedServices)\n\t\t\t\t{\n\t\t\t\t\tlet initValue = null;\n\n\t\t\t\t\tif (this.initRelatedServicesValues\n\t\t\t\t\t\t&& this.initRelatedServicesValues.hasOwnProperty(relatedService.id)\n\t\t\t\t\t)\n\t\t\t\t\t{\n\t\t\t\t\t\tinitValue = this.initRelatedServicesValues[relatedService.id];\n\t\t\t\t\t}\n\t\t\t\t\telse if (relatedService.initValue)\n\t\t\t\t\t{\n\t\t\t\t\t\tinitValue = relatedService.initValue;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (initValue !== null)\n\t\t\t\t\t{\n\t\t\t\t\t\tVue.set(this.relatedServicesValues, relatedService.id, initValue);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.relatedServices = relatedServices;\n\t\t\t\tthis.relatedServicesOfCheckboxType = this.relatedServices.filter((item) => item.type === 'checkbox');\n\n\t\t\t\t/**\n\t\t\t\t * Custom extra services\n\t\t\t\t */\n\t\t\t\tfor (let component in customServiceRegistry)\n\t\t\t\t{\n\t\t\t\t\tthis.$options.components[component] = customServiceRegistry[component];\n\t\t\t\t}\n\n\t\t\t\tthis.customServices = [];\n\t\t\t\tlet registeredComponents = Object.keys(this.$options.components).filter(item => item.startsWith('SERVICE_'));\n\t\t\t\tfor (let relatedService of this.relatedServices)\n\t\t\t\t{\n\t\t\t\t\tlet componentName = 'SERVICE_' + relatedService.deliveryServiceCode + '_' + relatedService.code;\n\n\t\t\t\t\tif (registeredComponents.includes(componentName))\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.customServices.push({\n\t\t\t\t\t\t\tname: componentName,\n\t\t\t\t\t\t\tservice: relatedService\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t/**\n\t\t\t\t * Responsible\n\t\t\t\t */\n\t\t\t\tthis.responsibleUser = result.data.responsible;\n\n\t\t\t\t/**\n\t\t\t\t * Misc\n\t\t\t\t */\n\t\t\t\tthis._userPageTemplate = result.data.userPageTemplate;\n\n\t\t\t\tthis._deliverySettingsUrl = result.data.deliverySettingsUrl;\n\n\t\t\t\t/**\n\t\t\t\t *\n\t\t\t\t */\n\t\t\t\tif (this.initEstimatedDeliveryPrice !== null)\n\t\t\t\t{\n\t\t\t\t\tthis.estimatedDeliveryPrice = this.initEstimatedDeliveryPrice;\n\t\t\t\t}\n\t\t\t\tif (this.initEnteredDeliveryPrice !== null)\n\t\t\t\t{\n\t\t\t\t\tthis.enteredDeliveryPrice = this.initEnteredDeliveryPrice;\n\t\t\t\t}\n\n\t\t\t\tif (this.initIsCalculated !== null)\n\t\t\t\t{\n\t\t\t\t\tthis.isCalculated = this.initIsCalculated;\n\t\t\t\t}\n\n\t\t\t\tthis.emitChange();\n\t\t\t});\n\t\t},\n\t\tcalculate()\n\t\t{\n\t\t\tif (!this.isCalculatingAllowed)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.isCalculating = true;\n\n\t\t\tlet calculationFinallyCallback = (status, payload) =>\n\t\t\t{\n\t\t\t\tthis.isCalculating = false;\n\t\t\t\tthis.isCalculated = true;\n\t\t\t\tthis.emitChange();\n\t\t\t};\n\n\t\t\tlet actionData = Object.assign(\n\t\t\t\t{},\n\t\t\t\tthis.actionData,\n\t\t\t\t{\n\t\t\t\t\tdeliveryServiceId: this.selectedDeliveryServiceId,\n\t\t\t\t\tdeliveryRelatedPropValues: this.currentRelatedPropsValues,\n\t\t\t\t\tdeliveryRelatedServiceValues: this.currentRelatedServicesValues,\n\t\t\t\t\tdeliveryResponsibleId: this.responsibleUser ? this.responsibleUser.id : null,\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tajax.runAction(this.action, {data: actionData}).then((result) => {\n\t\t\t\tlet deliveryPrice = result.data.deliveryCalculationResult.price;\n\n\t\t\t\tthis.estimatedDeliveryPrice = deliveryPrice;\n\t\t\t\tthis.enteredDeliveryPrice = deliveryPrice;\n\n\t\t\t\tthis.calculateErrors = [];\n\t\t\t\tcalculationFinallyCallback();\n\t\t\t}).catch((result) => {\n\t\t\t\tthis.estimatedDeliveryPrice = null;\n\t\t\t\tthis.enteredDeliveryPrice = 0.00;\n\n\t\t\t\tthis.calculateErrors = result.errors.map((item) => item.message);\n\t\t\t\tcalculationFinallyCallback();\n\t\t\t});\n\t\t},\n\t\topenChangeResponsibleDialog(event)\n\t\t{\n\t\t\tlet self = this;\n\n\t\t\tif (typeof(this._userEditor) === 'undefined')\n\t\t\t{\n\t\t\t\tthis._userEditor = new BX.Crm.EntityEditorUserSelector();\n\n\t\t\t\tthis._userEditor.initialize(\n\t\t\t\t\t'deliverySelectorUserEditor',\n\t\t\t\t\t{\n\t\t\t\t\t\tcallback(item, type, search, bUndeleted)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tself.responsibleUser = {\n\t\t\t\t\t\t\t\tid: type.entityId,\n\t\t\t\t\t\t\t\tname: type.name,\n\t\t\t\t\t\t\t\tphoto: type.avatar,\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tself.emitChange();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tthis._userEditor.open(\n\t\t\t\tevent.target.parentElement\n\t\t\t);\n\t\t},\n\t\tonDeliveryServiceChanged(deliveryService)\n\t\t{\n\t\t\tif (!this.editable)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.selectedDeliveryService = deliveryService;\n\t\t\tthis.emitChange();\n\t\t},\n\t\tonPropValueChanged(event, relatedProp)\n\t\t{\n\t\t\tVue.set(this.relatedPropsValues, relatedProp.id, event);\n\t\t\tthis.emitChange();\n\t\t},\n\t\tonServiceValueChanged(event, relatedService)\n\t\t{\n\t\t\tVue.set(this.relatedServicesValues, relatedService.id, event);\n\t\t\tthis.emitChange();\n\t\t},\n\t\tresponsibleUserClicked()\n\t\t{\n\t\t\tManager.openSlider(this.responsibleUserLink);\n\t\t},\n\t\temitChange()\n\t\t{\n\t\t\tthis.$emit('change', this.state);\n\t\t},\n\t\tformatMoney(value)\n\t\t{\n\t\t\treturn BX.Currency.currencyFormat(value, this.currency, false);\n\t\t},\n\t\tisNumber: function(event) {\n\t\t\tevent = (event) ? event : window.event;\n\t\t\tvar charCode = (event.which) ? event.which : event.keyCode;\n\t\t\tif ((charCode > 31 && (charCode < 48 || charCode > 57)) && charCode !== 46) {\n\t\t\t\tevent.preventDefault();\n\t\t\t} else {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\tgetPropValue(relatedProp)\n\t\t{\n\t\t\treturn this.relatedPropsValues.hasOwnProperty(relatedProp.id) ? this.relatedPropsValues[relatedProp.id] : null;\n\t\t},\n\t\tgetServiceValue(relatedService)\n\t\t{\n\t\t\treturn this.relatedServicesValues.hasOwnProperty(relatedService.id) ? this.relatedServicesValues[relatedService.id] : null;\n\t\t},\n\t\tgetCustomServiceValue(customService)\n\t\t{\n\t\t\treturn this.relatedServicesValues.hasOwnProperty(customService.service.id) ? this.relatedServicesValues[customService.service.id] : null;\n\t\t},\n\t\tonAddMoreClicked()\n\t\t{\n\t\t\tif (!this.editable)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\tManager.openSlider(this._deliverySettingsUrl).then(() => {\n\t\t\t\tthis.initialize();\n\t\t\t\tthis.$emit('settings-changed');\n\t\t\t});\n\t\t}\n\t},\n\tcreated()\n\t{\n\t\tthis.initialize();\n\t},\n\twatch: {\n\t\tenteredDeliveryPrice(value)\n\t\t{\n\t\t\tthis.emitChange();\n\t\t}\n\t},\n\tcomputed: {\n\t\tstate()\n\t\t{\n\t\t\treturn {\n\t\t\t\tdeliveryServiceId: this.selectedDeliveryServiceId,\n\t\t\t\tdeliveryPrice: this.deliveryPrice,\n\t\t\t\testimatedDeliveryPrice: this.estimatedDeliveryPrice,\n\t\t\t\trelatedPropsValues: this.currentRelatedPropsValues,\n\t\t\t\trelatedServicesValues: this.currentRelatedServicesValues,\n\t\t\t\tresponsibleUser: this.responsibleUser,\n\t\t\t};\n\t\t},\n\t\tselectedDeliveryServiceId()\n\t\t{\n\t\t\treturn this.selectedDeliveryService ? this.selectedDeliveryService.id : null;\n\t\t},\n\t\tselectedNoDelivery()\n\t\t{\n\t\t\treturn this.selectedDeliveryService && this.selectedDeliveryService['code'] === 'NO_DELIVERY';\n\t\t},\n\t\tisCalculatingAllowed()\n\t\t{\n\t\t\treturn this.selectedDeliveryServiceId\n\t\t\t\t&& this.arePropValuesReady\n\t\t\t\t&& !this.isCalculating\n\t\t\t\t&& this.editable;\n\t\t},\n\t\tcurrentRelatedPropsValues()\n\t\t{\n\t\t\tlet result = [];\n\n\t\t\tif (!this.selectedDeliveryServiceId)\n\t\t\t{\n\t\t\t\treturn result;\n\t\t\t}\n\n\t\t\tfor (let relatedProp of this.relatedProps)\n\t\t\t{\n\t\t\t\tif (!relatedProp.deliveryServiceIds.includes(this.selectedDeliveryServiceId))\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif (this.relatedPropsValues.hasOwnProperty(relatedProp.id))\n\t\t\t\t{\n\t\t\t\t\tresult.push(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tid: relatedProp.id,\n\t\t\t\t\t\t\tvalue: this.relatedPropsValues[relatedProp.id]\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn result;\n\t\t},\n\t\tisResponsibleUserSectionVisible()\n\t\t{\n\t\t\treturn this.responsibleUser && !this.selectedNoDelivery;\n\t\t},\n\t\tresponsibleUserLink()\n\t\t{\n\t\t\tif (!this.responsibleUser)\n\t\t\t{\n\t\t\t\treturn '';\n\t\t\t}\n\n\t\t\treturn this._userPageTemplate.replace('#user_id#', this.responsibleUser.id);\n\t\t},\n\t\tarePropValuesReady()\n\t\t{\n\t\t\tif (!this.selectedDeliveryServiceId)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tfor (let relatedProp of this.relatedProps)\n\t\t\t{\n\t\t\t\tif (!relatedProp.deliveryServiceIds.includes(this.selectedDeliveryServiceId))\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif (relatedProp.required && !this.relatedPropsValues[relatedProp.id])\n\t\t\t\t{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn true;\n\t\t},\n\t\tcurrentRelatedServicesValues()\n\t\t{\n\t\t\tlet result = [];\n\n\t\t\tif (!this.selectedDeliveryServiceId)\n\t\t\t{\n\t\t\t\treturn result;\n\t\t\t}\n\n\t\t\tfor (let relatedService of this.relatedServices)\n\t\t\t{\n\t\t\t\tif (!relatedService.deliveryServiceIds.includes(this.selectedDeliveryServiceId))\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif (this.relatedServicesValues.hasOwnProperty(relatedService.id))\n\t\t\t\t{\n\t\t\t\t\tresult.push(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tid: relatedService.id,\n\t\t\t\t\t\t\tvalue: this.relatedServicesValues[relatedService.id]\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn result;\n\t\t},\n\t\ttotalPrice()\n\t\t{\n\t\t\tlet result = this.externalSum;\n\n\t\t\tif (this.deliveryPrice !== null)\n\t\t\t{\n\t\t\t\tresult += this.deliveryPrice;\n\t\t\t}\n\t\t\treturn result;\n\t\t},\n\t\ttotalPriceFormatted()\n\t\t{\n\t\t\treturn this.formatMoney(this.totalPrice);\n\t\t},\n\t\tdeliveryPrice()\n\t\t{\n\t\t\tif (!this.selectedDeliveryServiceId)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tif (this.selectedNoDelivery)\n\t\t\t{\n\t\t\t\treturn 0;\n\t\t\t}\n\n\t\t\tif (this.enteredDeliveryPrice)\n\t\t\t{\n\t\t\t\treturn +this.enteredDeliveryPrice;\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\t\tdeliveryPriceFormatted()\n\t\t{\n\t\t\treturn this.formatMoney(this.deliveryPrice);\n\t\t},\n\t\testimatedDeliveryPriceFormatted()\n\t\t{\n\t\t\treturn this.formatMoney(this.estimatedDeliveryPrice);\n\t\t},\n\t\texternalSumFormatted()\n\t\t{\n\t\t\treturn this.formatMoney(this.externalSum);\n\t\t},\n\t\tcalculateDeliveryPriceButtonClass()\n\t\t{\n\t\t\treturn {\n\t\t\t\t'ui-btn': true,\n\t\t\t\t'ui-btn-light-border': true,\n\t\t\t\t'salescenter-delivery-bottom-update-icon': true,\n\t\t\t\t'ui-btn-disabled': !this.isCalculatingAllowed,\n\t\t\t};\n\t\t},\n\t\tlocalize()\n\t\t{\n\t\t\treturn Vue.getFilteredPhrases('SALE_DELIVERY_SERVICE_SELECTOR_');\n\t\t},\n\n\t\textraServiceCheckboxesCount()\n\t\t{\n\t\t\tlet result = 0;\n\n\t\t\tfor (let relatedService of this.relatedServicesOfCheckboxType)\n\t\t\t{\n\t\t\t\tif (!relatedService.deliveryServiceIds.includes(this.selectedDeliveryServiceId))\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tresult++;\n\t\t\t}\n\n\t\t\treturn result;\n\t\t},\n\t\trelatedPropsOfAddressTypeCount()\n\t\t{\n\t\t\tlet result = 0;\n\n\t\t\tfor (let relatedProp of this.relatedPropsOfAddressType)\n\t\t\t{\n\t\t\t\tif (!relatedProp.deliveryServiceIds.includes(this.selectedDeliveryServiceId))\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tresult++;\n\t\t\t}\n\n\t\t\treturn result;\n\t\t},\n\t\trelatedPropsOfOtherTypeCount()\n\t\t{\n\t\t\tlet result = 0;\n\n\t\t\tfor (let relatedProp of this.relatedPropsOfOtherTypes)\n\t\t\t{\n\t\t\t\tif (!relatedProp.deliveryServiceIds.includes(this.selectedDeliveryServiceId))\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tresult++;\n\t\t\t}\n\n\t\t\treturn result;\n\t\t}\n\t},\n\ttemplate: `\n\t\t<div class=\"salescenter-delivery\">\n\t\t\t<div class=\"salescenter-delivery-header\">\n\t\t\t\t<span class=\"salescenter-delivery-header-method\">\n\t\t\t\t\t{{localize.SALE_DELIVERY_SERVICE_SELECTOR_DELIVERY_SERVICE}}\n\t\t\t\t</span>\n\t\t\t\t\n\t\t\t\t<div\n\t\t\t\t\tv-for=\"deliveryService in deliveryServices\"\n\t\t\t\t\t@click=\"onDeliveryServiceChanged(deliveryService)\"\n\t\t\t\t\t:class=\"{'salescenter-delivery-method-item': true, 'salescenter-delivery-method-item--selected': (selectedDeliveryService && deliveryService.id == selectedDeliveryService.id) ? true : false}\"\n\t\t\t\t>\n\t\t\t\t\t<div class=\"salescenter-delivery-method-image\">\n\t\t\t\t\t\t<img :src=\"deliveryService.logo\">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"salescenter-delivery-method-info\">\n\t\t\t\t\t\t<div v-if=\"deliveryService.title\" class=\"salescenter-delivery-method-title\">{{deliveryService.title}}</div>\n\t\t\t\t\t\t<div v-else=\"deliveryService.title\" class=\"salescenter-delivery-method-title\"></div>\n\t\t\t\t\t\t<div class=\"salescenter-delivery-method-name\">{{deliveryService.name}}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div @click=\"onAddMoreClicked\" class=\"salescenter-delivery-method-item salescenter-delivery-method-item--add\">\n\t\t\t\t\t<div class=\"salescenter-delivery-method-image-more\"></div>\n\t\t\t\t\t<div class=\"salescenter-delivery-method-info\">\n\t\t\t\t\t\t<div class=\"salescenter-delivery-method-name\">\n\t\t\t\t\t\t\t{{localize.SALE_DELIVERY_SERVICE_SELECTOR_ADD_MORE}}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t\n\t\t\t<component\n\t\t\t\tv-for=\"customService in customServices\"\n\t\t\t\tv-show=\"customService.service.deliveryServiceIds.includes(selectedDeliveryServiceId)\"\n\t\t\t\t:is=\"customService.name\"\n\t\t\t\t:key=\"customService.service.id\"\n\t\t\t\t:name=\"customService.service.name\"\n\t\t\t\t:initValue=\"getCustomServiceValue(customService)\"\n\t\t\t\t:options=\"customService.service.options\"\n\t\t\t\t:editable=\"editable\"\n\t\t\t\t@change=\"onServiceValueChanged($event, customService.service)\"\n\t\t\t>\n\t\t\t</component>\n\t\t\t\n\t\t\t<div v-show=\"extraServiceCheckboxesCount > 0\" class=\"salescenter-delivery-additionally\">\n\t\t\t\t<div class=\"salescenter-delivery-additionally-options\">\n\t\t\t\t\t<component\n\t\t\t\t\t\tv-for=\"relatedService in relatedServicesOfCheckboxType\"\n\t\t\t\t\t\tv-show=\"relatedService.deliveryServiceIds.includes(selectedDeliveryServiceId)\"\n\t\t\t\t\t\t:is=\"'checkbox-service'\"\n\t\t\t\t\t\t:key=\"relatedService.id\"\n\t\t\t\t\t\t:name=\"relatedService.name\"\n\t\t\t\t\t\t:initValue=\"getServiceValue(relatedService)\"\t\t\t\t\t\t\n\t\t\t\t\t\t:options=\"relatedService.options\"\n\t\t\t\t\t\t:editable=\"editable\"\n\t\t\t\t\t\t@change=\"onServiceValueChanged($event, relatedService)\"\n\t\t\t\t\t>\n\t\t\t\t\t</component>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div v-show=\"relatedPropsOfAddressTypeCount > 0\" class=\"salescenter-delivery-path\">\n\t\t\t\t<div\n\t\t\t\t\tv-for=\"(relatedProp, index) in relatedPropsOfAddressType\"\n\t\t\t\t\tv-show=\"relatedProp.deliveryServiceIds.includes(selectedDeliveryServiceId)\"\n\t\t\t\t\tclass=\"salescenter-delivery-path-item\"\n\t\t\t\t>\n\t\t\t\t\t<div class=\"salescenter-delivery-path-title\">{{relatedProp.name}}</div>\n\t\t\t\t\t<div class=\"salescenter-delivery-path-control\">\n\t\t\t\t\t\t<div :class=\"{'salescenter-delivery-path-icon': true, 'salescenter-delivery-path-icon--green': index > 0}\"></div>\n\t\t\t\t\t\t<component\n\t\t\t\t\t\t\t:is=\"'ADDRESS-control'\"\n\t\t\t\t\t\t\t:key=\"relatedProp.id\"\n\t\t\t\t\t\t\t:name=\"'PROPS_' + relatedProp.id\"\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t:initValue=\"getPropValue(relatedProp)\"\n\t\t\t\t\t\t\t:editable=\"editable\"\n\t\t\t\t\t\t\t@change=\"onPropValueChanged($event, relatedProp)\"\n\t\t\t\t\t\t></component>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t\n\t\t\t<div v-show=\"relatedPropsOfOtherTypeCount > 0\" class=\"salescenter-delivery-path\">\n\t\t\t\t<div\n\t\t\t\t\tv-for=\"(relatedProp, index) in relatedPropsOfOtherTypes\"\n\t\t\t\t\tv-show=\"relatedProp.deliveryServiceIds.includes(selectedDeliveryServiceId)\"\n\t\t\t\t\tclass=\"salescenter-delivery-path-item\"\n\t\t\t\t>\n\t\t\t\t\t<div class=\"salescenter-delivery-path-title-ordinary\">{{relatedProp.name}}</div>\n\t\t\t\t\t<div class=\"salescenter-delivery-path-control\">\n\t\t\t\t\t\t<component\n\t\t\t\t\t\t\t:is=\"relatedProp.type + '-control'\"\n\t\t\t\t\t\t\t:key=\"relatedProp.id\"\n\t\t\t\t\t\t\t:name=\"'PROPS_' + relatedProp.id\"\n\t\t\t\t\t\t\t:editable=\"editable\"\n\t\t\t\t\t\t\t:initValue=\"getPropValue(relatedProp)\"\n\t\t\t\t\t\t\t:settings=\"relatedProp.settings\"\n\t\t\t\t\t\t\t@change=\"onPropValueChanged($event, relatedProp)\"\n\t\t\t\t\t\t></component>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div v-if=\"isResponsibleUserSectionVisible\" class=\"salescenter-delivery-manager-wrapper\">\n\t\t\t\t<div class=\"ui-ctl-label-text\">{{localize.SALE_DELIVERY_SERVICE_SELECTOR_RESPONSIBLE_MANAGER}}</div>\n\t\t\t\t<div class=\"salescenter-delivery-manager\">\n\t\t\t\t\t<div class=\"salescenter-delivery-manager-avatar\" :style=\"responsibleUser.photo ? {'background-image': 'url(' + responsibleUser.photo + ')'} : {}\"></div>\n\t\t\t\t\t<div class=\"salescenter-delivery-manager-content\">\n\t\t\t\t\t\t<div @click=\"responsibleUserClicked\" class=\"salescenter-delivery-manager-name\">{{responsibleUser.name}}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div v-if=\"editable\" @click=\"openChangeResponsibleDialog\" class=\"salescenter-delivery-manager-edit\">{{localize.SALE_DELIVERY_SERVICE_SELECTOR_CHANGE_RESPONSIBLE}}</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t\t\t\n\t\t\t<div v-show=\"!selectedNoDelivery\">\n\t\t\t\t<template v-if=\"calculateErrors\">\n\t\t\t\t\t<div v-for=\"(error, index) in calculateErrors\" class=\"ui-alert ui-alert-danger ui-alert-icon-danger salescenter-delivery-errors-container-alert\">\n\t\t\t\t\t\t<span  class=\"ui-alert-message\">{{error}}</span>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t\t<div class=\"salescenter-delivery-bottom\">\n\t\t\t\t\t<div v-if=\"editable\" class=\"salescenter-delivery-bottom-row\">\t\t\t\t\t\n\t\t\t\t\t\t<div class=\"salescenter-delivery-bottom-col\">\n\t\t\t\t\t\t\t<span v-show=\"!isCalculating\" @click=\"calculate\" :class=\"calculateDeliveryPriceButtonClass\">{{isCalculated ? localize.SALE_DELIVERY_SERVICE_SELECTOR_CALCULATE_UPDATE : localize.SALE_DELIVERY_SERVICE_SELECTOR_CALCULATE}}</span>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t<span v-show=\"isCalculating\" class=\"salescenter-delivery-waiter\">\n\t\t\t\t\t\t\t\t<span class=\"salescenter-delivery-waiter-alert\">{{localize.SALE_DELIVERY_SERVICE_SELECTOR_CALCULATING_LABEL}}</span>\n\t\t\t\t\t\t\t\t<span class=\"salescenter-delivery-waiter-text\">{{localize.SALE_DELIVERY_SERVICE_SELECTOR_CALCULATING_REQUEST_SENT}} {{selectedDeliveryService ? selectedDeliveryService.name : ''}}</span>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div v-show=\"isCalculated\" class=\"salescenter-delivery-bottom-row\">\n\t\t\t\t\t\t<div class=\"salescenter-delivery-bottom-col\"></div>\n\t\t\t\t\t\t<div class=\"salescenter-delivery-bottom-col\">\n\t\t\t\t\t\t\t<table class=\"salescenter-delivery-table-total\">\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<td>{{localize.SALE_DELIVERY_SERVICE_SELECTOR_EXPECTED_DELIVERY_PRICE}}:</td>\n\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t<span v-html=\"estimatedDeliveryPriceFormatted\"></span>&nbsp;<span v-html=\"currencySymbol\"></span>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<td>{{localize.SALE_DELIVERY_SERVICE_SELECTOR_CLIENT_DELIVERY_PRICE}}:</td>\n\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-md ui-ctl-wa salescenter-delivery-bottom-input-symbol\">\n\t\t\t\t\t\t\t\t\t\t\t<input :disabled=\"!editable\" v-model=\"enteredDeliveryPrice\" @keypress=\"isNumber($event)\" type=\"text\" class=\"ui-ctl-element ui-ctl-textbox\">\n\t\t\t\t\t\t\t\t\t\t\t<span v-html=\"currencySymbol\"></span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<td>{{externalSumLabel}}:</td>\n\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t<span v-html=\"externalSumFormatted\"></span><span class=\"salescenter-delivery-table-total-symbol\" v-html=\"currencySymbol\"></span>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<td>{{localize.SALE_DELIVERY_SERVICE_SELECTOR_DELIVERY_DELIVERY}}:</td>\n\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t<span v-show=\"deliveryPrice > 0\">\n\t\t\t\t\t\t\t\t\t\t\t<span v-html=\"deliveryPriceFormatted\"></span>&nbsp;<span v-html=\"currencySymbol\"></span>\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t<span v-show=\"!deliveryPrice\" class=\"salescenter-delivery-status salescenter-delivery-status--success\">\n\t\t\t\t\t\t\t\t\t\t\t{{localize.SALE_DELIVERY_SERVICE_SELECTOR_CLIENT_DELIVERY_PRICE_FREE}}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<tr class=\"salescenter-delivery-table-total-result\">\n\t\t\t\t\t\t\t\t\t<td>{{localize.SALE_DELIVERY_SERVICE_SELECTOR_TOTAL}}:</td>\n\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t<span v-html=\"totalPriceFormatted\"></span>\n\t\t\t\t\t\t\t\t\t\t<span class=\"salescenter-delivery-table-total-symbol\" v-html=\"currencySymbol\"></span>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`\n};\n"],"names":["props","name","type","String","required","initValue","settings","editable","Boolean","created","value","data","methods","onInput","event","target","$emit","computed","isMultiline","MULTILINE","template","handleOutsideClick","bind","el","binding","vnode","e","stopPropagation","handler","exclude","clickedOnExcludedEl","forEach","refName","excludedEl","context","$refs","contains","document","addEventListener","unbind","removeEventListener","directives","closable","ClosableDirective","default","enterTookPlace","isEntering","editMode","addressWidgetState","onInputClicked","showMap","closeMap","onTextClicked","onClearClicked","addressWidget","address","changeValue","onInputFocus","onInputBlur","onInputEnterKeyDown","newValue","onChangeCallback","buildAddress","BX","Location","Core","Address","JSON","parse","getMap","features","feature","Widget","MapFeature","map","addressFormatted","toString","addressFormat","AddressStringConverter","STRATEGY_TYPE_FIELD_SORT","isEditMode","wrapperClass","showDangerIndicator","State","DATA_LOADING","mounted","Factory","createAddressWidget","mapBehavior","popupBindOptions","position","mode","ControlMode","edit","useFeatures","fields","autocomplete","nativeOnInputKeyup","onInputKeyup","code","call","subscribeOnAddressChangedEvent","getData","latitude","longitude","toJson","subscribeOnStateChangedEvent","state","DATA_INPUTTING","render","inputNode","mapBindElement","controlWrapper","onChange","checked","localize","Vue","getFilteredPhrases","options","Array","onItemClick","components","Car","Truck","YandexTaxiVehicleType","AddressControl","StringControl","CheckboxService","initDeliveryServiceId","initRelatedServicesValues","initRelatedPropsValues","initResponsibleId","initEstimatedDeliveryPrice","initEnteredDeliveryPrice","initIsCalculated","personTypeId","action","actionData","Object","externalSum","externalSumLabel","currency","currencySymbol","selectedDeliveryService","deliveryServices","relatedProps","relatedPropsOfAddressType","relatedPropsOfOtherTypes","relatedPropsValues","relatedServices","relatedServicesOfCheckboxType","customServices","relatedServicesValues","estimatedDeliveryPrice","enteredDeliveryPrice","responsibleUser","isCalculated","isCalculating","calculateErrors","initialize","ajax","runAction","responsibleId","then","result","services","length","id","deliveryService","properties","relatedProp","hasOwnProperty","stringify","set","filter","item","extraServices","relatedService","component","customServiceRegistry","$options","registeredComponents","keys","startsWith","componentName","deliveryServiceCode","includes","push","service","responsible","_userPageTemplate","userPageTemplate","_deliverySettingsUrl","deliverySettingsUrl","emitChange","calculate","isCalculatingAllowed","calculationFinallyCallback","status","payload","assign","deliveryServiceId","selectedDeliveryServiceId","deliveryRelatedPropValues","currentRelatedPropsValues","deliveryRelatedServiceValues","currentRelatedServicesValues","deliveryResponsibleId","deliveryPrice","deliveryCalculationResult","price","catch","errors","message","openChangeResponsibleDialog","self","_userEditor","Crm","EntityEditorUserSelector","callback","search","bUndeleted","entityId","photo","avatar","open","parentElement","onDeliveryServiceChanged","onPropValueChanged","onServiceValueChanged","responsibleUserClicked","Manager","openSlider","responsibleUserLink","formatMoney","Currency","currencyFormat","isNumber","window","charCode","which","keyCode","preventDefault","getPropValue","getServiceValue","getCustomServiceValue","customService","onAddMoreClicked","watch","selectedNoDelivery","arePropValuesReady","deliveryServiceIds","isResponsibleUserSectionVisible","replace","totalPrice","totalPriceFormatted","deliveryPriceFormatted","estimatedDeliveryPriceFormatted","externalSumFormatted","calculateDeliveryPriceButtonClass","extraServiceCheckboxesCount","relatedPropsOfAddressTypeCount","relatedPropsOfOtherTypeCount"],"mappings":"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"}