{"version":3,"file":"user-consent.bundle.js","sources":["../src/user-consent.js"],"sourcesContent":["import {EventEmitter} from 'main.core.events';\nimport {EventType} from 'sale.payment-pay.const';\n\nexport class UserConsent\n{\n\t/**\n\t * @public\n\t * @param {object} options\n\t */\n\tconstructor(options)\n\t{\n\t\tthis.options = options || {};\n\n\t\tthis.accepted = this.option('accepted', false);\n\t\tthis.container = document.getElementById(this.option('containerId'), '');\n\t\tthis.eventName = this.option('eventName', false);\n\t\tthis.callback = null;\n\n\t\tthis.subscribeToEvents();\n\t}\n\n\t/**\n\t * @private\n\t */\n\tsubscribeToEvents()\n\t{\n\t\tEventEmitter.subscribe(EventType.consent.accepted, (event) => {\n\t\t\tthis.accepted = true;\n\t\t\tif (this.callback) {\n\t\t\t\tthis.callback();\n\t\t\t}\n\t\t});\n\t\tEventEmitter.subscribe(EventType.consent.refused, (event) => {\n\t\t\tthis.accepted = false;\n\t\t\tthis.callback = null;\n\t\t});\n\t}\n\n\t/**\n\t * @public\n\t * @returns {boolean}\n\t */\n\tisAvailable()\n\t{\n\t\treturn BX.UserConsent && this.eventName;\n\t}\n\n\t/**\n\t * @public\n\t * @param callback\n\t */\n\taskUserToPerform(callback)\n\t{\n\t\tif (!this.isAvailable() || this.accepted)\n\t\t{\n\t\t\tcallback();\n\t\t\treturn;\n\t\t}\n\n\t\tthis.callback = callback;\n\t\tEventEmitter.emit(this.eventName);\n\t}\n\n\t/**\n\t * @private\n\t * @param {string} name\n\t * @param defaultValue\n\t * @returns {*}\n\t */\n\toption(name, defaultValue)\n\t{\n\t\treturn this.options.hasOwnProperty(name) ? this.options[name] : defaultValue;\n\t}\n}"],"names":["UserConsent","options","accepted","option","container","document","getElementById","eventName","callback","subscribeToEvents","EventEmitter","subscribe","EventType","consent","event","refused","BX","isAvailable","emit","name","defaultValue","hasOwnProperty"],"mappings":";;;;;KAGaA,WAAb;CAEC;CACD;CACA;CACA;CACC,uBAAYC,OAAZ,EACA;CAAA;CACC,SAAKA,OAAL,GAAeA,OAAO,IAAI,EAA1B;CAEA,SAAKC,QAAL,GAAgB,KAAKC,MAAL,CAAY,UAAZ,EAAwB,KAAxB,CAAhB;CACA,SAAKC,SAAL,GAAiBC,QAAQ,CAACC,cAAT,CAAwB,KAAKH,MAAL,CAAY,aAAZ,CAAxB,EAAoD,EAApD,CAAjB;CACA,SAAKI,SAAL,GAAiB,KAAKJ,MAAL,CAAY,WAAZ,EAAyB,KAAzB,CAAjB;CACA,SAAKK,QAAL,GAAgB,IAAhB;CAEA,SAAKC,iBAAL;CACA;CAED;CACD;CACA;;;CApBA;CAAA;CAAA,wCAsBC;CAAA;;CACCC,MAAAA,6BAAY,CAACC,SAAb,CAAuBC,+BAAS,CAACC,OAAV,CAAkBX,QAAzC,EAAmD,UAACY,KAAD,EAAW;CAC7D,QAAA,KAAI,CAACZ,QAAL,GAAgB,IAAhB;;CACA,YAAI,KAAI,CAACM,QAAT,EAAmB;CAClB,UAAA,KAAI,CAACA,QAAL;CACA;CACD,OALD;CAMAE,MAAAA,6BAAY,CAACC,SAAb,CAAuBC,+BAAS,CAACC,OAAV,CAAkBE,OAAzC,EAAkD,UAACD,KAAD,EAAW;CAC5D,QAAA,KAAI,CAACZ,QAAL,GAAgB,KAAhB;CACA,QAAA,KAAI,CAACM,QAAL,GAAgB,IAAhB;CACA,OAHD;CAIA;CAED;CACD;CACA;CACA;;CAtCA;CAAA;CAAA,kCAwCC;CACC,aAAOQ,EAAE,CAAChB,WAAH,IAAkB,KAAKO,SAA9B;CACA;CAED;CACD;CACA;CACA;;CA/CA;CAAA;CAAA,qCAgDkBC,QAhDlB,EAiDC;CACC,UAAI,CAAC,KAAKS,WAAL,EAAD,IAAuB,KAAKf,QAAhC,EACA;CACCM,QAAAA,QAAQ;CACR;CACA;;CAED,WAAKA,QAAL,GAAgBA,QAAhB;CACAE,MAAAA,6BAAY,CAACQ,IAAb,CAAkB,KAAKX,SAAvB;CACA;CAED;CACD;CACA;CACA;CACA;CACA;;CAjEA;CAAA;CAAA,2BAkEQY,IAlER,EAkEcC,YAlEd,EAmEC;CACC,aAAO,KAAKnB,OAAL,CAAaoB,cAAb,CAA4BF,IAA5B,IAAoC,KAAKlB,OAAL,CAAakB,IAAb,CAApC,GAAyDC,YAAhE;CACA;CArEF;CAAA;CAAA;;;;;;;;"}