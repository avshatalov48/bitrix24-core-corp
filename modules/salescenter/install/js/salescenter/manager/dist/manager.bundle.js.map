{"version":3,"file":"manager.bundle.js","sources":["../src/manager.js"],"sourcesContent":["import {rest as Rest} from 'rest.client';\nimport {Type, Uri, ajax as Ajax, Event} from 'main.core';\n\nimport 'clipboard';\nimport 'loadext';\nimport 'popup';\nimport 'sidepanel';\n\nimport './manager.css';\n\nexport class Manager\n{\n\tstatic sessionId = null;\n\tstatic connectedSiteId = null;\n\tstatic addUrlPopup = null;\n\tstatic addUrlResolve = null;\n\tstatic popupNode = null;\n\tstatic siteTemplateCode = null;\n\tstatic isSitePublished = null;\n\tstatic isSiteExists = null;\n\tstatic isOrderPublicUrlAvailable = null;\n\tstatic isPullInited = false;\n\tstatic connectPath = null;\n\tstatic fieldsMap = null;\n\n\tstatic init(options)\n\t{\n\t\toptions.connectedSiteId = parseInt(options.connectedSiteId);\n\t\tif(options.connectedSiteId > 0)\n\t\t{\n\t\t\tManager.connectedSiteId = options.connectedSiteId;\n\t\t}\n\t\toptions.sessionId = parseInt(options.sessionId);\n\t\tif(options.sessionId > 0)\n\t\t{\n\t\t\tManager.sessionId = options.sessionId;\n\t\t}\n\t\tif(Type.isString(options.siteTemplateCode))\n\t\t{\n\t\t\tManager.siteTemplateCode = options.siteTemplateCode;\n\t\t}\n\t\tif(Type.isString(options.connectPath))\n\t\t{\n\t\t\tManager.connectPath = options.connectPath;\n\t\t}\n\t\tif(Type.isBoolean(options.isSitePublished))\n\t\t{\n\t\t\tManager.isSitePublished = options.isSitePublished;\n\t\t}\n\t\tif(Type.isBoolean(options.isSiteExists))\n\t\t{\n\t\t\tManager.isSiteExists = options.isSiteExists;\n\t\t}\n\t\tif(Type.isBoolean(options.isOrderPublicUrlAvailable))\n\t\t{\n\t\t\tManager.isOrderPublicUrlAvailable = options.isOrderPublicUrlAvailable;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tManager.isOrderPublicUrlAvailable = false;\n\t\t}\n\n\t\tif(!Manager.isPullInited)\n\t\t{\n\t\t\tEvent.ready(Manager.initPull);\n\t\t}\n\n\t\t// the crutch to load landings dynamically\n\t\tif(!top.BX.Landing)\n\t\t{\n\t\t\ttop.BX.Landing = {\n\t\t\t\tPageObject: {},\n\t\t\t\tMain: {},\n\t\t\t}\n\t\t}\n\t}\n\n\tstatic loadConfig()\n\t{\n\t\treturn new Promise((resolve, reject) =>\n\t\t{\n\t\t\tRest.callMethod('salescenter.manager.getConfig').then((result) =>\n\t\t\t{\n\t\t\t\tManager.init(result.answer.result);\n\t\t\t\tresolve(result.answer.result);\n\t\t\t}).catch((reason) =>\n\t\t\t{\n\t\t\t\treject(reason);\n\t\t\t});\n\t\t});\n\t}\n\n\t/**\n\t * Shows slider with module description and connect button.\n\t *\n\t * @returns {Promise<any>}\n\t */\n\tstatic startConnection(params = {})\n\t{\n\t\treturn new Promise((resolve, reject) =>\n\t\t{\n\t\t\tif(!Manager.connectPath)\n\t\t\t{\n\t\t\t\treject('no connect path');\n\t\t\t}\n\n\t\t\tlet url = new Uri(Manager.connectPath);\n\t\t\tif(!Type.isPlainObject(params))\n\t\t\t{\n\t\t\t\tparams = {};\n\t\t\t}\n\t\t\tparams.analyticsLabel = 'salescenterStartConnection';\n\t\t\turl.setQueryParams(params);\n\t\t\tManager.openSlider(url.toString(), {width: 760}).then(() =>\n\t\t\t{\n\t\t\t\tresolve();\n\t\t\t}).catch((reason) =>\n\t\t\t{\n\t\t\t\treject(reason);\n\t\t\t});\n\t\t});\n\t}\n\n\t/**\n\t * Shows slider with landing template.\n\t *\n\t * @param {Object} params\n\t * @returns {Promise<any>}\n\t */\n\tstatic connect(params)\n\t{\n\t\treturn new Promise((resolve) =>\n\t\t{\n\t\t\tif(Manager.connectedSiteId > 0 && Manager.isSiteExists)\n\t\t\t{\n\t\t\t\tresolve();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tlet url = new Uri('/shop/stores/site/edit/0/');\n\t\t\t\tif(!Type.isPlainObject(params))\n\t\t\t\t{\n\t\t\t\t\tparams = {};\n\t\t\t\t}\n\t\t\t\tparams.analyticsLabel = 'salescenterConnect';\n\t\t\t\tif(Manager.siteTemplateCode)\n\t\t\t\t{\n\t\t\t\t\tparams.tpl = Manager.siteTemplateCode;\n\t\t\t\t}\n\t\t\t\turl.setQueryParams(params);\n\t\t\t\tManager.openSlider(url.toString()).then(() =>\n\t\t\t\t{\n\t\t\t\t\tresolve();\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\tstatic publicConnectedSite()\n\t{\n\t\treturn new Promise((resolve, reject) =>\n\t\t{\n\t\t\tif(Manager.connectedSiteId > 0 && !Manager.isSitePublished)\n\t\t\t{\n\t\t\t\tRest.callMethod('landing.site.publication', {id: Manager.connectedSiteId}).then((result) =>\n\t\t\t\t{\n\t\t\t\t\tManager.isSitePublished = true;\n\t\t\t\t\tManager.firePublicConnectedSiteEvent();\n\t\t\t\t\tresolve(result);\n\t\t\t\t}).catch((reason) =>\n\t\t\t\t{\n\t\t\t\t\treject(reason);\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresolve();\n\t\t\t}\n\t\t});\n\t}\n\n\tstatic firePublicConnectedSiteEvent()\n\t{\n\t\ttop.BX.onCustomEvent('Salescenter.Manager:onPublicConnectedSite', {\n\t\t\tisSitePublished: true\n\t\t});\n\t}\n\n\t/**\n\t * @returns BX.PopupWindow\n\t */\n\tstatic getPopup({id = '', title = '', text = '', buttons = []})\n\t{\n\t\tlet popup = BX.PopupWindowManager.getPopupById(id);\n\n\t\tconst content = `<div class=\"salescenter-popup\">\n\t\t\t<div class=\"salescenter-popup-title\">${title}</div>\n\t\t\t<div class=\"salescenter-popup-text\">${text}</div>\n\t\t</div>`;\n\t\tif(popup)\n\t\t{\n\t\t\tpopup.setContent(content);\n\t\t\tpopup.setButtons(buttons);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tpopup = new BX.PopupWindow(id, null, {\n\t\t\t\tzIndex: 200,\n\t\t\t\tclassName: \"salescenter-connect-popup\",\n\t\t\t\tautoHide: true,\n\t\t\t\tcloseByEsc: true,\n\t\t\t\tpadding: 0,\n\t\t\t\tcloseIcon: true,\n\t\t\t\tcontent : content,\n\t\t\t\twidth: 400,\n\t\t\t\toverlay: true,\n\t\t\t\tlightShadow: false,\n\t\t\t\tbuttons: buttons,\n\t\t\t});\n\t\t}\n\n\t\treturn popup;\n\t}\n\n\tstatic showAfterConnectPopup()\n\t{\n\t\tconst popup = Manager.getPopup({\n\t\t\tid: 'salescenter-connect-popup',\n\t\t\ttitle: BX.message('SALESCENTER_MANAGER_CONNECT_POPUP_TITLE'),\n\t\t\ttext: BX.message('SALESCENTER_MANAGER_CONNECT_POPUP_DESCRIPTION'),\n\t\t\tbuttons: [\n\t\t\t\tnew BX.PopupWindowButton({\n\t\t\t\t\ttext : BX.message('SALESCENTER_MANAGER_CONNECT_POPUP_GO_BUTTON'),\n\t\t\t\t\tclassName : \"ui-btn ui-btn-md ui-btn-primary\",\n\t\t\t\t\tevents : {\n\t\t\t\t\t\tclick : () =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tManager.openConnectedSite();\n\t\t\t\t\t\t\tpopup.close();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t],\n\t\t});\n\t\tpopup.show();\n\t}\n\n\tstatic copyUrl(url, event)\n\t{\n\t\tBX.clipboard.copy(url);\n\t\tif(event && event.target)\n\t\t{\n\t\t\tManager.showCopyLinkPopup(event.target);\n\t\t}\n\t}\n\n\tstatic showCopyLinkPopup = function(node) {\n\t\tif(Manager.popupOuterLink)\n\t\t{\n\t\t\tManager.popupOuterLink.destroy();\n\t\t\tManager.popupOuterLink = null;\n\t\t\tif(Manager.hideCopyLinkTimeout > 0)\n\t\t\t{\n\t\t\t\tclearTimeout(Manager.hideCopyLinkTimeout);\n\t\t\t\tManager.hideCopyLinkTimeout = 0;\n\t\t\t}\n\t\t\tif(Manager.destroyCopyLinkTimeout > 0)\n\t\t\t{\n\t\t\t\tclearTimeout(Manager.destroyCopyLinkTimeout);\n\t\t\t\tManager.destroyCopyLinkTimeout = 0;\n\t\t\t}\n\t\t}\n\n\t\tManager.popupOuterLink = new BX.PopupWindow('salescenter-popup-copy-link', node, {\n\t\t\tclassName: 'salescenter-popup-copy-link',\n\t\t\tdarkMode: true,\n\t\t\tcontent: BX.message('SALESCENTER_MANAGER_COPY_URL_SUCCESS'),\n\t\t\tzIndex: 5000,\n\t\t});\n\n\t\tManager.popupOuterLink.show();\n\n\t\tManager.hideCopyLinkTimeout = setTimeout(() =>\n\t\t{\n\t\t\tBX.hide(BX(Manager.popupOuterLink.uniquePopupId));\n\t\t\tManager.hideCopyLinkTimeout = 0;\n\t\t}, 2000);\n\n\t\tManager.destroyCopyLinkTimeout = setTimeout(() =>\n\t\t{\n\t\t\tManager.popupOuterLink.destroy();\n\t\t\tManager.popupOuterLink = null;\n\t\t\tManager.destroyCopyLinkTimeout = 0;\n\t\t}, 2200)\n\t};\n\n\tstatic addCustomPage(page)\n\t{\n\t\treturn new Promise((resolve) =>\n\t\t{\n\t\t\tManager.getAddUrlPopup().then((popup) => {\n\t\t\t\tManager.templateEngine.$emit('onAddUrlPopupCreate', page);\n\t\t\t\tpopup.show();\n\t\t\t});\n\t\t\tManager.addUrlResolve = resolve;\n\t\t\tManager.addingCustomPage = page;\n\t\t});\n\t}\n\n\tstatic resolveAddPopup(pageId, isSaved)\n\t{\n\t\tif(Manager.addUrlResolve && Type.isFunction(Manager.addUrlResolve))\n\t\t{\n\t\t\tManager.addUrlResolve(pageId);\n\t\t\tManager.addUrlResolve = null;\n\t\t}\n\t\tif(isSaved && pageId > 0)\n\t\t{\n\t\t\tif(Manager.addingCustomPage && Manager.addingCustomPage.id && parseInt(Manager.addingCustomPage.id) === parseInt(pageId))\n\t\t\t{\n\t\t\t\tManager.showNotification(BX.message('SALESCENTER_MANAGER_UPDATE_URL_SUCCESS'));\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tManager.showNotification(BX.message('SALESCENTER_MANAGER_ADD_URL_SUCCESS'));\n\t\t\t}\n\t\t}\n\t}\n\n\tstatic initPopupTemplate()\n\t{\n\t\treturn new Promise(resolve =>\n\t\t{\n\t\t\tBX.loadExt('salescenter.url_popup').then(() =>\n\t\t\t{\n\t\t\t\tManager.templateEngine = BX.Vue.create({\n\t\t\t\t\tel: document.createElement('div'),\n\t\t\t\t\ttemplate: '<bx-salescenter-url-popup/>',\n\t\t\t\t\tmounted()\n\t\t\t\t\t{\n\t\t\t\t\t\tManager.popupNode = this.$el;\n\t\t\t\t\t\tthis.$app = Manager;\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t}\n\n\tstatic handleAddUrlPopupAutoHide(event)\n\t{\n\t\tif(!Manager.addUrlPopup)\n\t\t{\n\t\t\treturn true;\n\t\t}\n\t\tif(event.target !== Manager.addUrlPopup.getPopupContainer() && !Manager.addUrlPopup.getPopupContainer().contains(event.target))\n\t\t{\n\t\t\tlet urlFieldsPopupWindow = null;\n\t\t\tconst urlFieldsPopupMenu = BX.PopupMenu.getMenuById('salescenter-url-fields-popup');\n\t\t\tif(urlFieldsPopupMenu)\n\t\t\t{\n\t\t\t\turlFieldsPopupWindow = urlFieldsPopupMenu.popupWindow;\n\t\t\t}\n\t\t\tif(!urlFieldsPopupWindow)\n\t\t\t{\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif(event.target.dataset['rootMenu'] === 'salescenter-url-fields-popup' || event.target.parentNode.dataset['rootMenu'] === 'salescenter-url-fields-popup')\n\t\t\t\t{\n\t\t\t\t\tif(!event.target.classList.contains('menu-popup-item-submenu') && !event.target.parentNode.classList.contains('menu-popup-item-submenu'))\n\t\t\t\t\t{\n\t\t\t\t\t\turlFieldsPopupWindow.close();\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tstatic getAddUrlPopup()\n\t{\n\t\treturn new Promise((resolve) =>\n\t\t{\n\t\t\tif(!Manager.addUrlPopup)\n\t\t\t{\n\t\t\t\tManager.initPopupTemplate().then(() =>\n\t\t\t\t{\n\t\t\t\t\tManager.addUrlPopup = new BX.PopupWindow({\n\t\t\t\t\t\tid: 'salescenter-app-add-url',\n\t\t\t\t\t\tzIndex: 200,\n\t\t\t\t\t\tautoHide: true,\n\t\t\t\t\t\tcloseByEsc: true,\n\t\t\t\t\t\tcloseIcon: true,\n\t\t\t\t\t\tpadding: 0,\n\t\t\t\t\t\tcontentPadding: 0,\n\t\t\t\t\t\tcontent : Manager.popupNode,\n\t\t\t\t\t\ttitleBar: BX.message('SALESCENTER_ACTION_ADD_CUSTOM_TITLE'),\n\t\t\t\t\t\tcontentColor: 'white',\n\t\t\t\t\t\twidth: 600,\n\t\t\t\t\t\tautoHideHandler: Manager.handleAddUrlPopupAutoHide,\n\t\t\t\t\t\tevents : {\n\t\t\t\t\t\t\tonPopupClose: () =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlet newPageId = document.getElementById('salescenter-app-add-custom-url-id');\n\t\t\t\t\t\t\t\tconst isSaved = document.getElementById('salescenter-app-add-custom-url-is-saved').value === 'y';\n\t\t\t\t\t\t\t\tif(newPageId)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tnewPageId = newPageId.value;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tnewPageId = false;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tManager.resolveAddPopup(newPageId, isSaved);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tonPopupDestroy : () =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tManager.addUrlPopup = null;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\n\t\t\t\t\tresolve(Manager.addUrlPopup);\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresolve(Manager.addUrlPopup);\n\t\t\t}\n\t\t});\n\t}\n\n\tstatic addPage(fields)\n\t{\n\t\treturn new Promise((resolve, reject) =>\n\t\t{\n\t\t\tlet method, analyticsLabel;\n\t\t\tif(fields.analyticsLabel)\n\t\t\t{\n\t\t\t\tanalyticsLabel = fields.analyticsLabel;\n\t\t\t\tdelete(fields.analyticsLabel);\n\t\t\t}\n\t\t\tif(fields.id > 0)\n\t\t\t{\n\t\t\t\tmethod = Rest.callMethod('salescenter.page.update', {\n\t\t\t\t\tid: fields.id,\n\t\t\t\t\tfields: fields,\n\t\t\t\t});\n\t\t\t\tif(!analyticsLabel)\n\t\t\t\t{\n\t\t\t\t\tanalyticsLabel = 'salescenterUpdatePage';\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tmethod = Rest.callMethod('salescenter.page.add', {\n\t\t\t\t\tfields: fields,\n\t\t\t\t});\n\t\t\t\tif(!analyticsLabel)\n\t\t\t\t{\n\t\t\t\t\tanalyticsLabel = 'salescenterAddPage';\n\t\t\t\t}\n\t\t\t}\n\t\t\tmethod.then((result) =>\n\t\t\t{\n\t\t\t\tif(result.answer.result.page)\n\t\t\t\t{\n\t\t\t\t\tlet page = result.answer.result.page;\n\t\t\t\t\tlet source = 'other';\n\t\t\t\t\tif(page.landingId > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tif(parseInt(page.siteId) === parseInt(Manager.connectedSiteId))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tsource = 'landing_store_chat';\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tsource = 'landing_other';\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tManager.addAnalyticAction({\n\t\t\t\t\t\tanalyticsLabel: analyticsLabel,\n\t\t\t\t\t\tsource: source,\n\t\t\t\t\t\ttype: page.isWebform ? 'forms' : 'info',\n\t\t\t\t\t\tcode: page.code,\n\t\t\t\t\t}).then(() =>\n\t\t\t\t\t{\n\t\t\t\t\t\tresolve(result);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tresolve(result);\n\t\t\t\t}\n\t\t\t}).catch((reason) =>\n\t\t\t{\n\t\t\t\treject(reason);\n\t\t\t})\n\t\t});\n\t}\n\n\tstatic checkUrl(url)\n\t{\n\t\treturn Rest.callMethod('salescenter.page.geturldata', {\n\t\t\turl: url\n\t\t});\n\t}\n\n\tstatic addSitePage(isWebform = false)\n\t{\n\t\treturn new Promise((resolve) =>\n\t\t{\n\t\t\tif(Manager.connectedSiteId > 0)\n\t\t\t{\n\t\t\t\tBX.loadExt('landing.master').then(() =>\n\t\t\t\t{\n\t\t\t\t\tBX.Landing.UI.Panel.URLList\n\t\t\t\t\t\t.getInstance()\n\t\t\t\t\t\t.show('landing', {siteId: Manager.connectedSiteId})\n\t\t\t\t\t\t.then((result) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tManager.addPage({\n\t\t\t\t\t\t\t\thidden: false,\n\t\t\t\t\t\t\t\tlandingId: result.id,\n\t\t\t\t\t\t\t\tisWebform: isWebform,\n\t\t\t\t\t\t\t}).then((result) =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tresolve(result);\n\t\t\t\t\t\t\t\tManager.showNotification(BX.message('SALESCENTER_MANAGER_ADD_URL_SUCCESS'));\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tManager.openSlider('/bitrix/components/bitrix/salescenter.connect/slider.php').then(() =>\n\t\t\t\t{\n\t\t\t\t\tresolve();\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\tstatic showNotification(message)\n\t{\n\t\tif(!message)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tBX.loadExt('ui.notification').then(() =>\n\t\t{\n\t\t\tBX.UI.Notification.Center.notify({\n\t\t\t\tcontent: message\n\t\t\t});\n\t\t});\n\t}\n\n\tstatic hidePage(page)\n\t{\n\t\tconst method = 'salescenter.page.hide';\n\t\tlet source = 'other';\n\t\tif(page.landingId > 0)\n\t\t{\n\t\t\tif(parseInt(page.siteId) === parseInt(Manager.connectedSiteId))\n\t\t\t{\n\t\t\t\tsource = 'landing_store_chat';\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tsource = 'landing_other';\n\t\t\t}\n\t\t}\n\t\tconst data = {\n\t\t\tid: page.id,\n\t\t\tfields: {\n\t\t\t\thidden: true,\n\t\t\t},\n\t\t\tanalyticsLabel: 'salescenterDeletePage',\n\t\t\tsource: source,\n\t\t\ttype: page.isWebform ? 'form' : 'info',\n\t\t\tcode: page.code,\n\t\t};\n\n\t\treturn new Promise((resolve, reject) =>\n\t\t{\n\t\t\tRest.callMethod(method, data).then((result) =>\n\t\t\t{\n\t\t\t\tresolve(result);\n\t\t\t\tManager.showNotification(BX.message('SALESCENTER_MANAGER_HIDE_URL_SUCCESS'));\n\t\t\t}).catch((result) =>\n\t\t\t{\n\t\t\t\treject(result);\n\t\t\t});\n\t\t});\n\t}\n\n\tstatic deleteUrl(page)\n\t{\n\t\tconst method = 'salescenter.page.delete';\n\t\tconst data = {\n\t\t\tid: page.id,\n\t\t\tanalyticsLabel: 'salescenterDeletePage',\n\t\t\tsource: 'other',\n\t\t\ttype: page.isWebform ? 'form' : 'info',\n\t\t};\n\n\t\treturn new Promise((resolve, reject) =>\n\t\t{\n\t\t\tRest.callMethod(method, data).then((result) =>\n\t\t\t{\n\t\t\t\tresolve(result);\n\t\t\t\tManager.showNotification(BX.message('SALESCENTER_MANAGER_DELETE_URL_SUCCESS'));\n\t\t\t}).catch((result) =>\n\t\t\t{\n\t\t\t\treject(result);\n\t\t\t});\n\t\t});\n\t}\n\n\tstatic editLandingPage(pageId, siteId = Manager.connectedSiteId)\n\t{\n\t\twindow.open(`/shop/stores/site/${siteId}/view/${pageId}/`, '_blank');\n\t}\n\n\tstatic openSlider(url, options)\n\t{\n\t\tif(!Type.isPlainObject(options))\n\t\t{\n\t\t\toptions = {};\n\t\t}\n\t\toptions = {...{cacheable: false, allowChangeHistory: false, events: {}}, ...options};\n\t\treturn new Promise((resolve) =>\n\t\t{\n\t\t\tif(Type.isString(url) && url.length > 1)\n\t\t\t{\n\t\t\t\toptions.events.onClose = function(event)\n\t\t\t\t{\n\t\t\t\t\tresolve(event.getSlider());\n\t\t\t\t};\n\t\t\t\tBX.SidePanel.Instance.open(url, options);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresolve();\n\t\t\t}\n\t\t});\n\t}\n\n\tstatic getOrdersListUrl(params)\n\t{\n\t\tif(!Type.isPlainObject(params))\n\t\t{\n\t\t\tparams = {};\n\t\t}\n\t\tif(Manager.sessionId > 0)\n\t\t{\n\t\t\tparams['sessionId'] = Manager.sessionId;\n\t\t}\n\t\treturn (new Uri('/saleshub/orders/')).setQueryParams(params).toString();\n\t}\n\n\tstatic showOrdersList(params)\n\t{\n\t\treturn Manager.openSlider(Manager.getOrdersListUrl(params));\n\t}\n\n\tstatic getOrderAddUrl(params)\n\t{\n\t\tif(!Type.isPlainObject(params))\n\t\t{\n\t\t\tparams = {};\n\t\t}\n\t\tif(Manager.sessionId > 0)\n\t\t{\n\t\t\tparams['sessionId'] = Manager.sessionId;\n\t\t}\n\t\treturn (new Uri('/saleshub/orders/order/')).setQueryParams(params).toString();\n\t}\n\n\tstatic showOrderAdd(params)\n\t{\n\t\treturn Manager.openSlider(Manager.getOrderAddUrl(params));\n\t}\n\n\tstatic showOrdersListAfterCreate(orderId)\n\t{\n\t\tlet ordersListUrl = Manager.getOrdersListUrl({orderId: orderId});\n\t\tlet listSlider = BX.SidePanel.Instance.getSlider(ordersListUrl);\n\t\tif(!listSlider)\n\t\t{\n\t\t\tordersListUrl = Manager.getOrdersListUrl({orderId: orderId});\n\t\t\tlistSlider = BX.SidePanel.Instance.getSlider(ordersListUrl);\n\t\t}\n\t\tlet orderAddUrl = Manager.getOrderAddUrl();\n\t\tlet addSlider = BX.SidePanel.Instance.getSlider(orderAddUrl);\n\t\tif(addSlider)\n\t\t{\n\t\t\taddSlider.destroy();\n\t\t}\n\t\tif(!listSlider)\n\t\t{\n\t\t\tManager.showOrdersList({orderId: orderId});\n\t\t}\n\t\telse\n\t\t{\n\t\t\ttop.BX.onCustomEvent(listSlider.getFrameWindow(), 'salescenter-order-create', [\n\t\t\t\t{\n\t\t\t\t\torderId: orderId\n\t\t\t\t}\n\t\t\t]);\n\t\t}\n\t}\n\n\tstatic initPull()\n\t{\n\t\tif(BX.PULL)\n\t\t{\n\t\t\tManager.isPullInited = true;\n\t\t\tBX.PULL.subscribe({\n\t\t\t\tmoduleId: 'salescenter',\n\t\t\t\tcommand: 'SETCONNECTEDSITE',\n\t\t\t\tcallback: (params) =>\n\t\t\t\t{\n\t\t\t\t\tManager.init(params);\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t}\n\n\tstatic openControlPanel()\n\t{\n\t\twindow.open('/saleshub/', '_blank');\n\t}\n\n\tstatic getFormAddUrl(formId = 0)\n\t{\n\t\treturn (new Uri(`/crm/webform/edit/${parseInt(formId)}/`)).setQueryParams({ACTIVE: 'Y', RELOAD_LIST: 'N'}).toString();\n\t}\n\n\tstatic addNewForm()\n\t{\n\t\treturn new Promise((resolve, reject) =>\n\t\t{\n\t\t\tManager.openSlider(Manager.getFormAddUrl()).then((slider) =>\n\t\t\t{\n\t\t\t\tconst formId = slider.getData().get('formId');\n\t\t\t\tif(formId > 0)\n\t\t\t\t{\n\t\t\t\t\tManager.addNewFormPage(formId).then((result) =>\n\t\t\t\t\t{\n\t\t\t\t\t\tresolve(result);\n\t\t\t\t\t}).catch((reason) =>\n\t\t\t\t\t{\n\t\t\t\t\t\treject(reason);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\tstatic addNewFormPage(formId)\n\t{\n\t\treturn new Promise((resolve, reject) =>\n\t\t{\n\t\t\tconst popupId = 'salescenter-add-new-page-popup';\n\t\t\tManager.getPopup({\n\t\t\t\tid: popupId,\n\t\t\t\ttitle: BX.message('SALESCENTER_MANAGER_NEW_PAGE_POPUP_TITLE'),\n\t\t\t\ttext: BX.message('SALESCENTER_MANAGER_NEW_PAGE_WAIT'),\n\t\t\t}).show();\n\n\t\t\tRest.callMethod('salescenter.page.addformpage', {\n\t\t\t\tformId: formId,\n\t\t\t}).then((result) =>\n\t\t\t{\n\t\t\t\tif(result.answer.result.page)\n\t\t\t\t{\n\t\t\t\t\tresolve(result.answer.result.page);\n\t\t\t\t\tlet landingId = result.answer.result.page.landingId;\n\t\t\t\t\tconst popup = Manager.getPopup({\n\t\t\t\t\t\tid: popupId,\n\t\t\t\t\t\ttitle: BX.message('SALESCENTER_MANAGER_NEW_PAGE_POPUP_TITLE'),\n\t\t\t\t\t\ttext: BX.message('SALESCENTER_MANAGER_NEW_PAGE_COMPLETE'),\n\t\t\t\t\t\tbuttons: [\n\t\t\t\t\t\t\tnew BX.PopupWindowButton({\n\t\t\t\t\t\t\t\ttext : BX.message('SALESCENTER_MANAGER_CONNECT_POPUP_GO_BUTTON'),\n\t\t\t\t\t\t\t\tclassName : \"ui-btn ui-btn-md ui-btn-primary\",\n\t\t\t\t\t\t\t\tevents : {\n\t\t\t\t\t\t\t\t\tclick : () =>\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tManager.editLandingPage(landingId);\n\t\t\t\t\t\t\t\t\t\tpopup.close();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t]\n\t\t\t\t\t});\n\t\t\t\t\tpopup.show();\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tManager.getPopup({\n\t\t\t\t\t\tid: popupId,\n\t\t\t\t\t\ttitle: BX.message('SALESCENTER_MANAGER_ERROR_POPUP'),\n\t\t\t\t\t})\n\t\t\t\t\t.show();\n\t\t\t\t\treject();\n\t\t\t\t}\n\t\t\t}).catch((error) =>\n\t\t\t{\n\t\t\t\tManager.getPopup({\n\t\t\t\t\tid: popupId,\n\t\t\t\t\ttitle: BX.message('SALESCENTER_MANAGER_ERROR_POPUP'),\n\t\t\t\t\ttext: error,\n\t\t\t\t})\n\t\t\t\t.show();\n\t\t\t\treject(error);\n\t\t\t});\n\t\t});\n\t}\n\n\tstatic openConnectedSite(isRecycle = false)\n\t{\n\t\tif(Manager.connectedSiteId > 0)\n\t\t{\n\t\t\tlet url = new Uri(`/shop/stores/site/${Manager.connectedSiteId}/`);\n\t\t\tlet params = {\n\t\t\t\tapply_filter: 'y',\n\t\t\t};\n\t\t\tif(isRecycle)\n\t\t\t{\n\t\t\t\tparams.DELETED = 'Y';\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tparams.clear_filter = 'y';\n\t\t\t}\n\t\t\turl.setQueryParams(params);\n\t\t\twindow.open(url.toString(), '_blank');\n\t\t}\n\t}\n\n\tstatic openHowItWorks(event)\n\t{\n\t\tManager.openHelper(event, 'redirect=detail&code=9289135', 'chat_connect');\n\t}\n\n\tstatic openHowSmsWorks(event)\n\t{\n\t\tManager.openHelper(event, 'redirect=detail&code=9680407', 'sms_connect');\n\t}\n\n\tstatic openHowToConfigOpenLines(event)\n\t{\n\t\tManager.openHelper(event, 'redirect=detail&code=7872935', 'openlines_connect');\n\t}\n\n\tstatic openHowToConfigPaySystem(event)\n\t{\n\t\tManager.openHelper(event, 'redirect=detail&code=9600843', 'pay_system_connect');\n\t}\n\n\tstatic openHelper(event = null, url = '', analyticsArticle = '')\n\t{\n\t\tif(event)\n\t\t{\n\t\t\tevent.preventDefault();\n\t\t}\n\t\tif(analyticsArticle)\n\t\t{\n\t\t\tManager.addAnalyticAction({\n\t\t\t\tanalyticsLabel: 'salescenterOpenHelp',\n\t\t\t\tarticle: analyticsArticle\n\t\t\t}).then(() =>\n\t\t\t{\n\t\t\t\tif(top.BX.Helper)\n\t\t\t\t{\n\t\t\t\t\ttop.BX.Helper.show(url);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\telse if(top.BX.Helper)\n\t\t{\n\t\t\ttop.BX.Helper.show(url);\n\t\t}\n\t}\n\n\tstatic openFeedbackForm(event)\n\t{\n\t\tif(event && Type.isFunction(event.preventDefault))\n\t\t{\n\t\t\tevent.preventDefault();\n\t\t}\n\t\treturn Manager.openSlider('/bitrix/components/bitrix/salescenter.feedback/slider.php', {width: 735});\n\t}\n\n\tstatic openApplication(params = {})\n\t{\n\t\tlet url = new Uri('/saleshub/app/');\n\t\tif(Type.isPlainObject(params))\n\t\t{\n\t\t\turl.setQueryParams(params);\n\t\t}\n\t\treturn new Promise((resolve, reject) =>\n\t\t{\n\t\t\tManager.openSlider(url.toString(), {width: 873}).then((slider) =>\n\t\t\t{\n\t\t\t\tresolve(slider.getData());\n\t\t\t}).catch((reason) =>\n\t\t\t{\n\t\t\t\treject(reason);\n\t\t\t});\n\t\t});\n\t}\n\n\tstatic addAnalyticAction(params)\n\t{\n\t\treturn new Promise((resolve, reject) =>\n\t\t{\n\t\t\tif(!Type.isPlainObject(params) || !params.analyticsLabel)\n\t\t\t{\n\t\t\t\treject('wrong params');\n\t\t\t}\n\t\t\tlet request = new XMLHttpRequest();\n\t\t\tlet url = new Uri('/bitrix/services/main/ajax.php');\n\t\t\turl.setQueryParams(params);\n\t\t\trequest.open('GET', url.toString());\n\t\t\trequest.onload = () =>\n\t\t\t{\n\t\t\t\tresolve();\n\t\t\t};\n\t\t\trequest.onerror = () =>\n\t\t\t{\n\t\t\t\treject();\n\t\t\t};\n\t\t\trequest.send();\n\t\t});\n\t}\n\t\n\tstatic getFieldsMap()\n\t{\n\t\treturn new Promise((resolve, reject) =>\n\t\t{\n\t\t\tif(Manager.fieldsMap !== null)\n\t\t\t{\n\t\t\t\tresolve(Manager.fieldsMap);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tAjax.runAction('salescenter.manager.getFieldsMap', {\n\t\t\t\tanalyticsLabel: 'salescenterFieldsMapLoading',\n\t\t\t}).then((response) =>\n\t\t\t{\n\t\t\t\tManager.fieldsMap = response.data.fields;\n\t\t\t\tresolve(response.data.fields);\n\t\t\t}).catch((response) =>\n\t\t\t{\n\t\t\t\treject(response.errors);\n\t\t\t});\n\t\t});\n\t}\n\n\tstatic getPageUrl(pageId, entities, context = null): ?String\n\t{\n\t\treturn new Promise((resolve, reject) =>\n\t\t{\n\t\t\tif(!Type.isInteger(pageId))\n\t\t\t{\n\t\t\t\tresolve(null);\n\t\t\t}\n\t\t\tif(!Type.isPlainObject(entities) || entities.length <= 0)\n\t\t\t{\n\t\t\t\tresolve(null);\n\t\t\t}\n\n\t\t\tAjax.runAction('salescenter.manager.getPageUrl', {\n\t\t\t\tdata: {\n\t\t\t\t\tpageId: pageId,\n\t\t\t\t\tentities: entities\n\t\t\t\t},\n\t\t\t\tanalyticsLabel: 'salescenterGetPageUrlWithParameters',\n\t\t\t\tgetParameters: {\n\t\t\t\t\tcontext: context\n\t\t\t\t}\n\t\t\t}).then((response) =>\n\t\t\t{\n\t\t\t\tresolve(response.data.pageUrl);\n\t\t\t}).catch((response) =>\n\t\t\t{\n\t\t\t\treject(response.errors);\n\t\t\t});\n\t\t});\n\t}\n}"],"names":["Manager","options","connectedSiteId","parseInt","sessionId","Type","isString","siteTemplateCode","connectPath","isBoolean","isSitePublished","isSiteExists","isOrderPublicUrlAvailable","isPullInited","Event","ready","initPull","top","BX","Landing","PageObject","Main","Promise","resolve","reject","Rest","callMethod","then","result","init","answer","catch","reason","params","url","Uri","isPlainObject","analyticsLabel","setQueryParams","openSlider","toString","width","tpl","id","firePublicConnectedSiteEvent","onCustomEvent","title","text","buttons","popup","PopupWindowManager","getPopupById","content","setContent","setButtons","PopupWindow","zIndex","className","autoHide","closeByEsc","padding","closeIcon","overlay","lightShadow","getPopup","message","PopupWindowButton","events","click","openConnectedSite","close","show","event","clipboard","copy","target","showCopyLinkPopup","page","getAddUrlPopup","templateEngine","$emit","addUrlResolve","addingCustomPage","pageId","isSaved","isFunction","showNotification","loadExt","Vue","create","el","document","createElement","template","mounted","popupNode","$el","$app","addUrlPopup","getPopupContainer","contains","urlFieldsPopupWindow","urlFieldsPopupMenu","PopupMenu","getMenuById","popupWindow","dataset","parentNode","classList","initPopupTemplate","contentPadding","titleBar","contentColor","autoHideHandler","handleAddUrlPopupAutoHide","onPopupClose","newPageId","getElementById","value","resolveAddPopup","onPopupDestroy","fields","method","source","landingId","siteId","addAnalyticAction","type","isWebform","code","UI","Panel","URLList","getInstance","addPage","hidden","Notification","Center","notify","data","window","open","cacheable","allowChangeHistory","length","onClose","getSlider","SidePanel","Instance","getOrdersListUrl","getOrderAddUrl","orderId","ordersListUrl","listSlider","orderAddUrl","addSlider","destroy","showOrdersList","getFrameWindow","PULL","subscribe","moduleId","command","callback","formId","ACTIVE","RELOAD_LIST","getFormAddUrl","slider","getData","get","addNewFormPage","popupId","editLandingPage","error","isRecycle","apply_filter","DELETED","clear_filter","openHelper","analyticsArticle","preventDefault","article","Helper","request","XMLHttpRequest","onload","onerror","send","fieldsMap","Ajax","runAction","response","errors","entities","context","isInteger","getParameters","pageUrl","node","popupOuterLink","hideCopyLinkTimeout","clearTimeout","destroyCopyLinkTimeout","darkMode","setTimeout","hide","uniquePopupId"],"mappings":"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"}