{"version":3,"file":"manager.bundle.js","sources":["../src/manager.js"],"sourcesContent":["import {rest as Rest} from 'rest.client';\nimport {Type, Uri, ajax as Ajax, Event} from 'main.core';\nimport {BaseButton} from 'ui.buttons';\n\nimport 'clipboard';\nimport 'loadext';\nimport 'popup';\nimport 'sidepanel';\n\nimport './manager.css';\n\nexport class Manager\n{\n\tstatic sessionId = null;\n\tstatic connectedSiteId = null;\n\tstatic addUrlPopup = null;\n\tstatic addUrlResolve = null;\n\tstatic popupNode = null;\n\tstatic siteTemplateCode = null;\n\tstatic isSitePublished = null;\n\tstatic isSiteExists = null;\n\tstatic isOrderPublicUrlAvailable = null;\n\tstatic isPullInited = false;\n\tstatic connectPath = null;\n\tstatic fieldsMap = null;\n\n\tstatic init(options)\n\t{\n\t\toptions.connectedSiteId = parseInt(options.connectedSiteId);\n\t\tif(options.connectedSiteId > 0)\n\t\t{\n\t\t\tManager.connectedSiteId = options.connectedSiteId;\n\t\t}\n\t\toptions.sessionId = parseInt(options.sessionId);\n\t\tif(options.sessionId > 0)\n\t\t{\n\t\t\tManager.sessionId = options.sessionId;\n\t\t}\n\t\tif(Type.isString(options.siteTemplateCode))\n\t\t{\n\t\t\tManager.siteTemplateCode = options.siteTemplateCode;\n\t\t}\n\t\tif(Type.isString(options.connectPath))\n\t\t{\n\t\t\tManager.connectPath = options.connectPath;\n\t\t}\n\t\tif(Type.isBoolean(options.isSitePublished))\n\t\t{\n\t\t\tManager.isSitePublished = options.isSitePublished;\n\t\t}\n\t\tif(Type.isBoolean(options.isSiteExists))\n\t\t{\n\t\t\tManager.isSiteExists = options.isSiteExists;\n\t\t}\n\t\tif(Type.isBoolean(options.isOrderPublicUrlAvailable))\n\t\t{\n\t\t\tManager.isOrderPublicUrlAvailable = options.isOrderPublicUrlAvailable;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tManager.isOrderPublicUrlAvailable = false;\n\t\t}\n\n\t\tif(!Manager.isPullInited)\n\t\t{\n\t\t\tEvent.ready(Manager.initPull);\n\t\t}\n\n\t\t// the crutch to load landings dynamically\n\t\tif(!top.BX.Landing)\n\t\t{\n\t\t\ttop.BX.Landing = {\n\t\t\t\tPageObject: {},\n\t\t\t\tMain: {},\n\t\t\t}\n\t\t}\n\t}\n\n\tstatic loadConfig()\n\t{\n\t\treturn new Promise((resolve, reject) =>\n\t\t{\n\t\t\tRest.callMethod('salescenter.manager.getConfig').then((result) =>\n\t\t\t{\n\t\t\t\tManager.init(result.answer.result);\n\t\t\t\tresolve(result.answer.result);\n\t\t\t}).catch((reason) =>\n\t\t\t{\n\t\t\t\treject(reason);\n\t\t\t});\n\t\t});\n\t}\n\n\t/**\n\t * Shows slider with module description and connect button.\n\t *\n\t * @returns {Promise<any>}\n\t */\n\tstatic startConnection(params = {})\n\t{\n\t\treturn new Promise((resolve, reject) =>\n\t\t{\n\t\t\tif(!Manager.connectPath)\n\t\t\t{\n\t\t\t\treject('no connect path');\n\t\t\t}\n\n\t\t\tlet url = new Uri(Manager.connectPath);\n\t\t\tif(!Type.isPlainObject(params))\n\t\t\t{\n\t\t\t\tparams = {};\n\t\t\t}\n\t\t\tparams.analyticsLabel = 'salescenterStartConnection';\n\t\t\turl.setQueryParams(params);\n\t\t\tManager.openSlider(url.toString(), {width: 760}).then(() =>\n\t\t\t{\n\t\t\t\tresolve();\n\t\t\t}).catch((reason) =>\n\t\t\t{\n\t\t\t\treject(reason);\n\t\t\t});\n\t\t});\n\t}\n\n\t/**\n\t * Shows slider with landing template.\n\t *\n\t * @param {Object} params\n\t * @returns {Promise<any>}\n\t */\n\tstatic connect(params)\n\t{\n\t\treturn new Promise((resolve) =>\n\t\t{\n\t\t\tif(Manager.connectedSiteId > 0 && Manager.isSiteExists)\n\t\t\t{\n\t\t\t\tresolve();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tlet url = new Uri('/shop/stores/site/edit/0/');\n\t\t\t\tif(!Type.isPlainObject(params))\n\t\t\t\t{\n\t\t\t\t\tparams = {};\n\t\t\t\t}\n\t\t\t\tparams.analyticsLabel = 'salescenterConnect';\n\t\t\t\tif(Manager.siteTemplateCode)\n\t\t\t\t{\n\t\t\t\t\tparams.tpl = Manager.siteTemplateCode;\n\t\t\t\t}\n\t\t\t\turl.setQueryParams(params);\n\t\t\t\tManager.openSlider(url.toString()).then(() =>\n\t\t\t\t{\n\t\t\t\t\tresolve();\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\tstatic publicConnectedSite()\n\t{\n\t\treturn new Promise((resolve, reject) =>\n\t\t{\n\t\t\tif(Manager.connectedSiteId > 0 && !Manager.isSitePublished)\n\t\t\t{\n\t\t\t\tRest.callMethod('landing.site.publication', {id: Manager.connectedSiteId}).then((result) =>\n\t\t\t\t{\n\t\t\t\t\tManager.isSitePublished = true;\n\t\t\t\t\tManager.firePublicConnectedSiteEvent();\n\t\t\t\t\tresolve(result);\n\t\t\t\t}).catch((reason) =>\n\t\t\t\t{\n\t\t\t\t\treject(reason);\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresolve();\n\t\t\t}\n\t\t});\n\t}\n\n\tstatic firePublicConnectedSiteEvent()\n\t{\n\t\ttop.BX.onCustomEvent('Salescenter.Manager:onPublicConnectedSite', {\n\t\t\tisSitePublished: true\n\t\t});\n\t}\n\n\t/**\n\t * @returns BX.PopupWindow\n\t */\n\tstatic getPopup({id = '', title = '', text = '', buttons = []})\n\t{\n\t\tlet popup = BX.PopupWindowManager.getPopupById(id);\n\n\t\tconst content = `<div class=\"salescenter-popup\">\n\t\t\t<div class=\"salescenter-popup-title\">${title}</div>\n\t\t\t<div class=\"salescenter-popup-text\">${text}</div>\n\t\t</div>`;\n\t\tif(popup)\n\t\t{\n\t\t\tpopup.setContent(content);\n\t\t\tpopup.setButtons(buttons);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tpopup = new BX.PopupWindow(id, null, {\n\t\t\t\tzIndex: 200,\n\t\t\t\tclassName: \"salescenter-connect-popup\",\n\t\t\t\tautoHide: true,\n\t\t\t\tcloseByEsc: true,\n\t\t\t\tpadding: 0,\n\t\t\t\tcloseIcon: true,\n\t\t\t\tcontent : content,\n\t\t\t\twidth: 400,\n\t\t\t\toverlay: true,\n\t\t\t\tlightShadow: false,\n\t\t\t\tbuttons: buttons,\n\t\t\t});\n\t\t}\n\n\t\treturn popup;\n\t}\n\n\tstatic showAfterConnectPopup()\n\t{\n\t\tconst popup = Manager.getPopup({\n\t\t\tid: 'salescenter-connect-popup',\n\t\t\ttitle: BX.message('SALESCENTER_MANAGER_CONNECT_POPUP_TITLE'),\n\t\t\ttext: BX.message('SALESCENTER_MANAGER_CONNECT_POPUP_DESCRIPTION'),\n\t\t\tbuttons: [\n\t\t\t\tnew BX.PopupWindowButton({\n\t\t\t\t\ttext : BX.message('SALESCENTER_MANAGER_CONNECT_POPUP_GO_BUTTON'),\n\t\t\t\t\tclassName : \"ui-btn ui-btn-md ui-btn-primary\",\n\t\t\t\t\tevents : {\n\t\t\t\t\t\tclick : () =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tManager.openConnectedSite();\n\t\t\t\t\t\t\tpopup.close();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t],\n\t\t});\n\t\tpopup.show();\n\t}\n\n\tstatic copyUrl(url, event)\n\t{\n\t\tBX.clipboard.copy(url);\n\t\tif(event && event.target)\n\t\t{\n\t\t\tManager.showCopyLinkPopup(event.target);\n\t\t}\n\t}\n\n\tstatic showCopyLinkPopup = function(node) {\n\t\tif(Manager.popupOuterLink)\n\t\t{\n\t\t\tManager.popupOuterLink.destroy();\n\t\t\tManager.popupOuterLink = null;\n\t\t\tif(Manager.hideCopyLinkTimeout > 0)\n\t\t\t{\n\t\t\t\tclearTimeout(Manager.hideCopyLinkTimeout);\n\t\t\t\tManager.hideCopyLinkTimeout = 0;\n\t\t\t}\n\t\t\tif(Manager.destroyCopyLinkTimeout > 0)\n\t\t\t{\n\t\t\t\tclearTimeout(Manager.destroyCopyLinkTimeout);\n\t\t\t\tManager.destroyCopyLinkTimeout = 0;\n\t\t\t}\n\t\t}\n\n\t\tManager.popupOuterLink = new BX.PopupWindow('salescenter-popup-copy-link', node, {\n\t\t\tclassName: 'salescenter-popup-copy-link',\n\t\t\tdarkMode: true,\n\t\t\tcontent: BX.message('SALESCENTER_MANAGER_COPY_URL_SUCCESS'),\n\t\t\tzIndex: 5000,\n\t\t});\n\n\t\tManager.popupOuterLink.show();\n\n\t\tManager.hideCopyLinkTimeout = setTimeout(() =>\n\t\t{\n\t\t\tBX.hide(BX(Manager.popupOuterLink.uniquePopupId));\n\t\t\tManager.hideCopyLinkTimeout = 0;\n\t\t}, 2000);\n\n\t\tManager.destroyCopyLinkTimeout = setTimeout(() =>\n\t\t{\n\t\t\tManager.popupOuterLink.destroy();\n\t\t\tManager.popupOuterLink = null;\n\t\t\tManager.destroyCopyLinkTimeout = 0;\n\t\t}, 2200)\n\t};\n\n\tstatic addCustomPage(page)\n\t{\n\t\treturn new Promise((resolve) =>\n\t\t{\n\t\t\tManager.getAddUrlPopup().then((popup) => {\n\t\t\t\tManager.templateEngine.$emit('onAddUrlPopupCreate', page);\n\t\t\t\tpopup.show();\n\t\t\t});\n\t\t\tManager.addUrlResolve = resolve;\n\t\t\tManager.addingCustomPage = page;\n\t\t});\n\t}\n\n\tstatic resolveAddPopup(pageId, isSaved)\n\t{\n\t\tif(Manager.addUrlResolve && Type.isFunction(Manager.addUrlResolve))\n\t\t{\n\t\t\tManager.addUrlResolve(pageId);\n\t\t\tManager.addUrlResolve = null;\n\t\t}\n\t\tif(isSaved && pageId > 0)\n\t\t{\n\t\t\tif(Manager.addingCustomPage && Manager.addingCustomPage.id && parseInt(Manager.addingCustomPage.id) === parseInt(pageId))\n\t\t\t{\n\t\t\t\tManager.showNotification(BX.message('SALESCENTER_MANAGER_UPDATE_URL_SUCCESS'));\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tManager.showNotification(BX.message('SALESCENTER_MANAGER_ADD_URL_SUCCESS'));\n\t\t\t}\n\t\t}\n\t}\n\n\tstatic initPopupTemplate()\n\t{\n\t\treturn new Promise(resolve =>\n\t\t{\n\t\t\tBX.loadExt('salescenter.url_popup').then(() =>\n\t\t\t{\n\t\t\t\tManager.templateEngine = BX.Vue.create({\n\t\t\t\t\tel: document.createElement('div'),\n\t\t\t\t\ttemplate: '<bx-salescenter-url-popup/>',\n\t\t\t\t\tmounted()\n\t\t\t\t\t{\n\t\t\t\t\t\tManager.popupNode = this.$el;\n\t\t\t\t\t\tthis.$app = Manager;\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t}\n\n\tstatic handleAddUrlPopupAutoHide(event)\n\t{\n\t\tif(!Manager.addUrlPopup)\n\t\t{\n\t\t\treturn true;\n\t\t}\n\t\tif(event.target !== Manager.addUrlPopup.getPopupContainer() && !Manager.addUrlPopup.getPopupContainer().contains(event.target))\n\t\t{\n\t\t\tlet urlFieldsPopupWindow = null;\n\t\t\tconst urlFieldsPopupMenu = BX.PopupMenu.getMenuById('salescenter-url-fields-popup');\n\t\t\tif(urlFieldsPopupMenu)\n\t\t\t{\n\t\t\t\turlFieldsPopupWindow = urlFieldsPopupMenu.popupWindow;\n\t\t\t}\n\t\t\tif(!urlFieldsPopupWindow)\n\t\t\t{\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif(event.target.dataset['rootMenu'] === 'salescenter-url-fields-popup' || event.target.parentNode.dataset['rootMenu'] === 'salescenter-url-fields-popup')\n\t\t\t\t{\n\t\t\t\t\tif(!event.target.classList.contains('menu-popup-item-submenu') && !event.target.parentNode.classList.contains('menu-popup-item-submenu'))\n\t\t\t\t\t{\n\t\t\t\t\t\turlFieldsPopupWindow.close();\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tstatic getAddUrlPopup()\n\t{\n\t\treturn new Promise((resolve) =>\n\t\t{\n\t\t\tif(!Manager.addUrlPopup)\n\t\t\t{\n\t\t\t\tManager.initPopupTemplate().then(() =>\n\t\t\t\t{\n\t\t\t\t\tManager.addUrlPopup = new BX.PopupWindow({\n\t\t\t\t\t\tid: 'salescenter-app-add-url',\n\t\t\t\t\t\tzIndex: 200,\n\t\t\t\t\t\tautoHide: true,\n\t\t\t\t\t\tcloseByEsc: true,\n\t\t\t\t\t\tcloseIcon: true,\n\t\t\t\t\t\tpadding: 0,\n\t\t\t\t\t\tcontentPadding: 0,\n\t\t\t\t\t\tcontent : Manager.popupNode,\n\t\t\t\t\t\ttitleBar: BX.message('SALESCENTER_ACTION_ADD_CUSTOM_TITLE'),\n\t\t\t\t\t\tcontentColor: 'white',\n\t\t\t\t\t\twidth: 600,\n\t\t\t\t\t\tautoHideHandler: Manager.handleAddUrlPopupAutoHide,\n\t\t\t\t\t\tevents : {\n\t\t\t\t\t\t\tonPopupClose: () =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlet newPageId = document.getElementById('salescenter-app-add-custom-url-id');\n\t\t\t\t\t\t\t\tconst isSaved = document.getElementById('salescenter-app-add-custom-url-is-saved').value === 'y';\n\t\t\t\t\t\t\t\tif(newPageId)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tnewPageId = newPageId.value;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tnewPageId = false;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tManager.resolveAddPopup(newPageId, isSaved);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tonPopupDestroy : () =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tManager.addUrlPopup = null;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\n\t\t\t\t\tresolve(Manager.addUrlPopup);\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresolve(Manager.addUrlPopup);\n\t\t\t}\n\t\t});\n\t}\n\n\tstatic addPage(fields)\n\t{\n\t\treturn new Promise((resolve, reject) =>\n\t\t{\n\t\t\tlet method, analyticsLabel;\n\t\t\tif(fields.analyticsLabel)\n\t\t\t{\n\t\t\t\tanalyticsLabel = fields.analyticsLabel;\n\t\t\t\tdelete(fields.analyticsLabel);\n\t\t\t}\n\t\t\tif(fields.id > 0)\n\t\t\t{\n\t\t\t\tmethod = Rest.callMethod('salescenter.page.update', {\n\t\t\t\t\tid: fields.id,\n\t\t\t\t\tfields: fields,\n\t\t\t\t});\n\t\t\t\tif(!analyticsLabel)\n\t\t\t\t{\n\t\t\t\t\tanalyticsLabel = 'salescenterUpdatePage';\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tmethod = Rest.callMethod('salescenter.page.add', {\n\t\t\t\t\tfields: fields,\n\t\t\t\t});\n\t\t\t\tif(!analyticsLabel)\n\t\t\t\t{\n\t\t\t\t\tanalyticsLabel = 'salescenterAddPage';\n\t\t\t\t}\n\t\t\t}\n\t\t\tmethod.then((result) =>\n\t\t\t{\n\t\t\t\tif(result.answer.result.page)\n\t\t\t\t{\n\t\t\t\t\tlet page = result.answer.result.page;\n\t\t\t\t\tlet source = 'other';\n\t\t\t\t\tif(page.landingId > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tif(parseInt(page.siteId) === parseInt(Manager.connectedSiteId))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tsource = 'landing_store_chat';\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tsource = 'landing_other';\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tManager.addAnalyticAction({\n\t\t\t\t\t\tanalyticsLabel: analyticsLabel,\n\t\t\t\t\t\tsource: source,\n\t\t\t\t\t\ttype: page.isWebform ? 'forms' : 'info',\n\t\t\t\t\t\tcode: page.code,\n\t\t\t\t\t}).then(() =>\n\t\t\t\t\t{\n\t\t\t\t\t\tresolve(result);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tresolve(result);\n\t\t\t\t}\n\t\t\t}).catch((reason) =>\n\t\t\t{\n\t\t\t\treject(reason);\n\t\t\t})\n\t\t});\n\t}\n\n\tstatic checkUrl(url)\n\t{\n\t\treturn Rest.callMethod('salescenter.page.geturldata', {\n\t\t\turl: url\n\t\t});\n\t}\n\n\tstatic addSitePage(isWebform = false)\n\t{\n\t\treturn new Promise((resolve) =>\n\t\t{\n\t\t\tconst siteId = Manager.connectedSiteId;\n\t\t\tif (siteId > 0)\n\t\t\t{\n\t\t\t\tBX.loadExt('landing.master').then(() =>\n\t\t\t\t{\n\t\t\t\t\tBX.Landing.Env.getInstance().setOptions({site_id: siteId});\n\t\t\t\t\tBX.Landing.UI.Panel.URLList\n\t\t\t\t\t\t.getInstance()\n\t\t\t\t\t\t.show('landing', {siteId: siteId})\n\t\t\t\t\t\t.then((result) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tManager.addPage({\n\t\t\t\t\t\t\t\thidden: false,\n\t\t\t\t\t\t\t\tlandingId: result.id,\n\t\t\t\t\t\t\t\tisWebform: isWebform,\n\t\t\t\t\t\t\t}).then((result) =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tresolve(result);\n\t\t\t\t\t\t\t\tManager.showNotification(BX.message('SALESCENTER_MANAGER_ADD_URL_SUCCESS'));\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tManager.openSlider('/bitrix/components/bitrix/salescenter.connect/slider.php').then(() =>\n\t\t\t\t{\n\t\t\t\t\tresolve();\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\tstatic showNotification(message)\n\t{\n\t\tif(!message)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tBX.loadExt('ui.notification').then(() =>\n\t\t{\n\t\t\tBX.UI.Notification.Center.notify({\n\t\t\t\tcontent: message\n\t\t\t});\n\t\t});\n\t}\n\n\tstatic hidePage(page)\n\t{\n\t\tconst method = 'salescenter.page.hide';\n\t\tlet source = 'other';\n\t\tif(page.landingId > 0)\n\t\t{\n\t\t\tif(parseInt(page.siteId) === parseInt(Manager.connectedSiteId))\n\t\t\t{\n\t\t\t\tsource = 'landing_store_chat';\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tsource = 'landing_other';\n\t\t\t}\n\t\t}\n\t\tconst data = {\n\t\t\tid: page.id,\n\t\t\tfields: {\n\t\t\t\thidden: true,\n\t\t\t},\n\t\t\tanalyticsLabel: 'salescenterDeletePage',\n\t\t\tsource: source,\n\t\t\ttype: page.isWebform ? 'form' : 'info',\n\t\t\tcode: page.code,\n\t\t};\n\n\t\treturn new Promise((resolve, reject) =>\n\t\t{\n\t\t\tRest.callMethod(method, data).then((result) =>\n\t\t\t{\n\t\t\t\tresolve(result);\n\t\t\t\tManager.showNotification(BX.message('SALESCENTER_MANAGER_HIDE_URL_SUCCESS'));\n\t\t\t}).catch((result) =>\n\t\t\t{\n\t\t\t\treject(result);\n\t\t\t});\n\t\t});\n\t}\n\n\tstatic deleteUrl(page)\n\t{\n\t\tconst method = 'salescenter.page.delete';\n\t\tconst data = {\n\t\t\tid: page.id,\n\t\t\tanalyticsLabel: 'salescenterDeletePage',\n\t\t\tsource: 'other',\n\t\t\ttype: page.isWebform ? 'form' : 'info',\n\t\t};\n\n\t\treturn new Promise((resolve, reject) =>\n\t\t{\n\t\t\tRest.callMethod(method, data).then((result) =>\n\t\t\t{\n\t\t\t\tresolve(result);\n\t\t\t\tManager.showNotification(BX.message('SALESCENTER_MANAGER_DELETE_URL_SUCCESS'));\n\t\t\t}).catch((result) =>\n\t\t\t{\n\t\t\t\treject(result);\n\t\t\t});\n\t\t});\n\t}\n\n\tstatic editLandingPage(pageId, siteId = Manager.connectedSiteId)\n\t{\n\t\twindow.open(`/shop/stores/site/${siteId}/view/${pageId}/`, '_blank');\n\t}\n\n\tstatic openSlider(url, options)\n\t{\n\t\tif(!Type.isPlainObject(options))\n\t\t{\n\t\t\toptions = {};\n\t\t}\n\t\toptions = {...{cacheable: false, allowChangeHistory: false, events: {}}, ...options};\n\t\treturn new Promise((resolve) =>\n\t\t{\n\t\t\tif(Type.isString(url) && url.length > 1)\n\t\t\t{\n\t\t\t\toptions.events.onClose = function(event)\n\t\t\t\t{\n\t\t\t\t\tresolve(event.getSlider());\n\t\t\t\t};\n\t\t\t\tBX.SidePanel.Instance.open(url, options);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresolve();\n\t\t\t}\n\t\t});\n\t}\n\n\tstatic getOrdersListUrl(params)\n\t{\n\t\tif(!Type.isPlainObject(params))\n\t\t{\n\t\t\tparams = {};\n\t\t}\n\t\tif(Manager.sessionId > 0)\n\t\t{\n\t\t\tparams['sessionId'] = Manager.sessionId;\n\t\t}\n\t\treturn (new Uri('/saleshub/orders/')).setQueryParams(params).toString();\n\t}\n\n\tstatic getPaymentsListUrl(params)\n\t{\n\t\tif(!Type.isPlainObject(params))\n\t\t{\n\t\t\tparams = {};\n\t\t}\n\t\tif(Manager.sessionId > 0)\n\t\t{\n\t\t\tparams['sessionId'] = Manager.sessionId;\n\t\t}\n\t\treturn (new Uri('/saleshub/payments/')).setQueryParams(params).toString();\n\t}\n\n\tstatic showOrdersList(params)\n\t{\n\t\treturn Manager.openSlider(Manager.getOrdersListUrl(params));\n\t}\n\n\tstatic showPaymentsList(params)\n\t{\n\t\treturn Manager.openSlider(Manager.getPaymentsListUrl(params));\n\t}\n\n\tstatic getOrderAddUrl(params)\n\t{\n\t\tif(!Type.isPlainObject(params))\n\t\t{\n\t\t\tparams = {};\n\t\t}\n\t\tif(Manager.sessionId > 0)\n\t\t{\n\t\t\tparams['sessionId'] = Manager.sessionId;\n\t\t}\n\t\treturn (new Uri('/saleshub/orders/order/')).setQueryParams(params).toString();\n\t}\n\n\tstatic showOrderAdd(params)\n\t{\n\t\treturn Manager.openSlider(Manager.getOrderAddUrl(params));\n\t}\n\n\tstatic showOrdersListAfterCreate(orderId)\n\t{\n\t\tlet ordersListUrl = Manager.getOrdersListUrl({orderId: orderId});\n\t\tlet listSlider = BX.SidePanel.Instance.getSlider(ordersListUrl);\n\t\tif(!listSlider)\n\t\t{\n\t\t\tordersListUrl = Manager.getOrdersListUrl({orderId: orderId});\n\t\t\tlistSlider = BX.SidePanel.Instance.getSlider(ordersListUrl);\n\t\t}\n\t\tlet orderAddUrl = Manager.getOrderAddUrl();\n\t\tlet addSlider = BX.SidePanel.Instance.getSlider(orderAddUrl);\n\t\tif(addSlider)\n\t\t{\n\t\t\taddSlider.destroy();\n\t\t}\n\t\tif(!listSlider)\n\t\t{\n\t\t\tManager.showOrdersList({orderId: orderId});\n\t\t}\n\t\telse\n\t\t{\n\t\t\ttop.BX.onCustomEvent(listSlider.getFrameWindow(), 'salescenter-order-create', [\n\t\t\t\t{\n\t\t\t\t\torderId: orderId\n\t\t\t\t}\n\t\t\t]);\n\t\t}\n\t}\n\n\tstatic initPull()\n\t{\n\t\tif(BX.PULL)\n\t\t{\n\t\t\tManager.isPullInited = true;\n\t\t\tBX.PULL.subscribe({\n\t\t\t\tmoduleId: 'salescenter',\n\t\t\t\tcommand: 'SETCONNECTEDSITE',\n\t\t\t\tcallback: (params) =>\n\t\t\t\t{\n\t\t\t\t\tManager.init(params);\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t}\n\n\tstatic openControlPanel()\n\t{\n\t\twindow.open('/saleshub/', '_blank');\n\t}\n\n\tstatic getFormAddUrl(formId = 0)\n\t{\n\t\treturn (new Uri(`/crm/webform/edit/${parseInt(formId)}/`)).setQueryParams({ACTIVE: 'Y', RELOAD_LIST: 'N'}).toString();\n\t}\n\n\tstatic addNewForm()\n\t{\n\t\treturn new Promise((resolve, reject) =>\n\t\t{\n\t\t\tManager.openSlider(Manager.getFormAddUrl()).then((slider) =>\n\t\t\t{\n\t\t\t\tconst formId = slider.getData().get('formId');\n\t\t\t\tif(formId > 0)\n\t\t\t\t{\n\t\t\t\t\tManager.addNewFormPage(formId).then((result) =>\n\t\t\t\t\t{\n\t\t\t\t\t\tresolve(result);\n\t\t\t\t\t}).catch((reason) =>\n\t\t\t\t\t{\n\t\t\t\t\t\treject(reason);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\tstatic addNewFormPage(formId)\n\t{\n\t\treturn new Promise((resolve, reject) =>\n\t\t{\n\t\t\tconst popupId = 'salescenter-add-new-page-popup';\n\t\t\tManager.getPopup({\n\t\t\t\tid: popupId,\n\t\t\t\ttitle: BX.message('SALESCENTER_MANAGER_NEW_PAGE_POPUP_TITLE'),\n\t\t\t\ttext: BX.message('SALESCENTER_MANAGER_NEW_PAGE_WAIT'),\n\t\t\t}).show();\n\n\t\t\tRest.callMethod('salescenter.page.addformpage', {\n\t\t\t\tformId: formId,\n\t\t\t}).then((result) =>\n\t\t\t{\n\t\t\t\tif(result.answer.result.page)\n\t\t\t\t{\n\t\t\t\t\tresolve(result.answer.result.page);\n\t\t\t\t\tlet landingId = result.answer.result.page.landingId;\n\t\t\t\t\tconst popup = Manager.getPopup({\n\t\t\t\t\t\tid: popupId,\n\t\t\t\t\t\ttitle: BX.message('SALESCENTER_MANAGER_NEW_PAGE_POPUP_TITLE'),\n\t\t\t\t\t\ttext: BX.message('SALESCENTER_MANAGER_NEW_PAGE_COMPLETE'),\n\t\t\t\t\t\tbuttons: [\n\t\t\t\t\t\t\tnew BX.PopupWindowButton({\n\t\t\t\t\t\t\t\ttext : BX.message('SALESCENTER_MANAGER_CONNECT_POPUP_GO_BUTTON'),\n\t\t\t\t\t\t\t\tclassName : \"ui-btn ui-btn-md ui-btn-primary\",\n\t\t\t\t\t\t\t\tevents : {\n\t\t\t\t\t\t\t\t\tclick : () =>\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tManager.editLandingPage(landingId);\n\t\t\t\t\t\t\t\t\t\tpopup.close();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t]\n\t\t\t\t\t});\n\t\t\t\t\tpopup.show();\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tManager.getPopup({\n\t\t\t\t\t\tid: popupId,\n\t\t\t\t\t\ttitle: BX.message('SALESCENTER_MANAGER_ERROR_POPUP'),\n\t\t\t\t\t})\n\t\t\t\t\t.show();\n\t\t\t\t\treject();\n\t\t\t\t}\n\t\t\t}).catch((error) =>\n\t\t\t{\n\t\t\t\tManager.getPopup({\n\t\t\t\t\tid: popupId,\n\t\t\t\t\ttitle: BX.message('SALESCENTER_MANAGER_ERROR_POPUP'),\n\t\t\t\t\ttext: error,\n\t\t\t\t})\n\t\t\t\t.show();\n\t\t\t\treject(error);\n\t\t\t});\n\t\t});\n\t}\n\n\tstatic openConnectedSite(isRecycle = false)\n\t{\n\t\tif(Manager.connectedSiteId > 0)\n\t\t{\n\t\t\tlet url = new Uri(`/shop/stores/site/${Manager.connectedSiteId}/`);\n\t\t\tlet params = {\n\t\t\t\tapply_filter: 'y',\n\t\t\t};\n\t\t\tif(isRecycle)\n\t\t\t{\n\t\t\t\tparams.DELETED = 'Y';\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tparams.clear_filter = 'y';\n\t\t\t}\n\t\t\turl.setQueryParams(params);\n\t\t\twindow.open(url.toString(), '_blank');\n\t\t}\n\t}\n\n\tstatic openHowItWorks(event)\n\t{\n\t\tManager.openHelper(event, 'redirect=detail&code=9289135', 'chat_connect');\n\t}\n\n\tstatic openHowCrmStoreWorks(event)\n\t{\n\t\tManager.openHelper(event, 'redirect=detail&code=13651476', 'crmstore_how_works');\n\t}\n\n\tstatic openHowCrmFormsWorks(event, url)\n\t{\n\t\turl = url || 'redirect=detail&code=13774372';\n\t\tManager.openHelper(event, url, 'crmforms_how_works');\n\t}\n\n\tstatic openHowSmsWorks(event)\n\t{\n\t\tManager.openHelper(event, 'redirect=detail&code=9680407', 'sms_connect');\n\t}\n\n\tstatic openHowToConfigOpenLines(event)\n\t{\n\t\tManager.openHelper(event, 'redirect=detail&code=7872935', 'openlines_connect');\n\t}\n\n\tstatic openHowToConfigDefaultPaySystem(event)\n\t{\n\t\tManager.openHelper(event, 'redirect=detail&code=10460164', 'pay_system_connect');\n\t}\n\n\tstatic openHowToConfigPaySystem(event, code)\n\t{\n\t\tManager.openHelper(event, 'redirect=detail&code=' + code, 'pay_system_connect');\n\t}\n\n\tstatic openHowToConfigCashboxPaySystem(event, code)\n\t{\n\t\tManager.openHelper(event, 'redirect=detail&code=' + code, 'pay_system_cashbox_connect');\n\t}\n\n\tstatic openHowToUseOfflineCashBox(event)\n\t{\n\t\tManager.openHelper(event, 'redirect=detail&code=11271760', 'cashbox_connect');\n\t}\n\n\tstatic openHowToConfigCashBox(event)\n\t{\n\t\tManager.openHelper(event, 'redirect=detail&code=11120562', 'cashbox_connect');\n\t}\n\n\tstatic openHowToConfigCheckboxCashBox(event)\n\t{\n\t\tManager.openHelper(event, 'redirect=detail&code=12306679', 'cashbox_connect');\n\t}\n\n\tstatic openHowToConfigBusinessRuCashBox(event)\n\t{\n\t\tManager.openHelper(event, 'redirect=detail&code=12806492', 'cashbox_connect');\n\t}\n\n\tstatic openHowToConfigRobokassaCashBox(event)\n\t{\n\t\tManager.openHelper(event, 'redirect=detail&code=12849128', 'cashbox_connect');\n\t}\n\n\tstatic openHowToSetupCheckboxCashBoxAndKeys(event)\n\t{\n\t\tManager.openHelper(event, 'redirect=detail&code=12334663', 'cashbox_connect');\n\t}\n\n\tstatic openHowToSell(event)\n\t{\n\t\tManager.openHelper(event, 'redirect=detail&code=11274792', 'crmstore_connect');\n\t}\n\n\tstatic openHowToWork(event)\n\t{\n\t\tManager.openHelper(event, 'redirect=detail&code=11553526', 'companycontacts_connect');\n\t}\n\n\tstatic openWhatClientSee(event)\n\t{\n\t\tManager.openHelper(event, 'redirect=detail&code=11278264', 'client_view');\n\t}\n\n\tstatic openHowPayDealWorks(event)\n\t{\n\t\tManager.openHelper(event, 'redirect=detail&code=11274792', 'pay_deal');\n\t}\n\n\tstatic openHowPayDynamicEntityWorks(event)\n\t{\n\t\tManager.openHelper(event, 'redirect=detail&code=11274792', 'pay_dynamic_entity');\n\t}\n\n\tstatic openHowPaySmartInvoiceWorks(event)\n\t{\n\t\tManager.openHelper(event, 'redirect=detail&code=11274792', 'pay_smart_invoice');\n\t}\n\n\tstatic openFormPagesHelp(event)\n\t{\n\t\tManager.openHelper(event, 'redirect=detail&code=9606749', 'forms');\n\t}\n\n\tstatic openCommonPagesHelp(event)\n\t{\n\t\tManager.openHelper(event, 'redirect=detail&code=9604717', 'common_pages');\n\t}\n\n\tstatic openBitrix24NotificationsHelp(event)\n\t{\n\t\tManager.openHelper(event, 'redirect=detail&code=13659402', 'bitrix24_notifications');\n\t}\n\n\tstatic openHelper(event = null, url = '', analyticsArticle = '')\n\t{\n\t\tif(event)\n\t\t{\n\t\t\tevent.preventDefault();\n\t\t}\n\t\tif(analyticsArticle)\n\t\t{\n\t\t\tManager.addAnalyticAction({\n\t\t\t\tanalyticsLabel: 'salescenterOpenHelp',\n\t\t\t\tarticle: analyticsArticle\n\t\t\t}).then(() =>\n\t\t\t{\n\t\t\t\tif(top.BX.Helper)\n\t\t\t\t{\n\t\t\t\t\ttop.BX.Helper.show(url);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\telse if(top.BX.Helper)\n\t\t{\n\t\t\ttop.BX.Helper.show(url);\n\t\t}\n\t}\n\n\tstatic openFeedbackForm(event)\n\t{\n\t\tif(event && Type.isFunction(event.preventDefault))\n\t\t{\n\t\t\tevent.preventDefault();\n\t\t}\n\t\treturn Manager.openSlider('/bitrix/components/bitrix/salescenter.feedback/slider.php', {width: 735});\n\t}\n\n\tstatic openFeedbackFormParams(event, params, options={})\n\t{\n\t\tif(event && Type.isFunction(event.preventDefault))\n\t\t{\n\t\t\tevent.preventDefault();\n\t\t}\n\n\t\tif(!Type.isPlainObject(params))\n\t\t{\n\t\t\tparams = {};\n\t\t}\n\n\t\tlet url = (new Uri('/bitrix/components/bitrix/salescenter.feedback/slider.php')).setQueryParams(params).toString();\n\t\treturn Manager.openSlider(url, options);\n\t}\n\n\tstatic openFeedbackPayOrderForm(event)\n\t{\n\t\tif(event && Type.isFunction(event.preventDefault))\n\t\t{\n\t\t\tevent.preventDefault();\n\t\t}\n\t\treturn Manager.openSlider('/bitrix/components/bitrix/salescenter.feedback/slider.php?feedback_type=pay_order', {width: 735});\n\t}\n\n\tstatic openFeedbackDeliveryOfferForm(event)\n\t{\n\t\tif(event && Type.isFunction(event.preventDefault))\n\t\t{\n\t\t\tevent.preventDefault();\n\t\t}\n\t\treturn Manager.openSlider('/bitrix/components/bitrix/salescenter.feedback/slider.php?feedback_type=delivery_offer', {width: 735});\n\t}\n\n\tstatic openIntegrationRequestForm(event)\n\t{\n\t\tlet params = Manager.#getDataSettingFromEventDomNode(event)\n\n\t\tif (event && Type.isFunction(event.preventDefault))\n\t\t{\n\t\t\tevent.preventDefault();\n\t\t}\n\n\t\tif (!Type.isPlainObject(params))\n\t\t{\n\t\t\tparams = {};\n\t\t}\n\n\t\tlet url = (new Uri('/bitrix/components/bitrix/salescenter.feedback/slider.php'));\n\n\t\turl.setQueryParams({feedback_type: 'integration_request'});\n\t\turl.setQueryParams(params);\n\n\t\treturn Manager.openSlider(url.toString(), {width: 735});\n\t}\n\n\tstatic #parseParamsDataSetting(settings): Object\n\t{\n\t\tconst result = {};\n\n\t\tif (Type.isStringFilled(settings))\n\t\t{\n\t\t\tlet fields = settings.split(',');\n\n\t\t\ttry\n\t\t\t{\n\t\t\t\tfor (let inx in fields)\n\t\t\t\t{\n\t\t\t\t\tif (!fields.hasOwnProperty(inx))\n\t\t\t\t\t{\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tlet [name, value] = fields[inx].split(':');\n\n\t\t\t\t\tif (Type.isStringFilled(name))\n\t\t\t\t\t{\n\t\t\t\t\t\tresult[name] = value;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tcatch (e) {}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tstatic #getDataSettingFromEventDomNode(event): ?Object\n\t{\n\t\tlet node = null;\n\t\tif (Type.isDomNode(event.button))\n\t\t{\n\t\t\tnode = event.button;\n\t\t}\n\t\telse if (Type.isDomNode(event.target))\n\t\t{\n\t\t\tnode = event.target;\n\t\t}\n\n\t\tif (Type.isObject(node))\n\t\t{\n\t\t\tlet dataset = node.dataset ? node.dataset : {};\n\t\t\tlet settings = dataset.hasOwnProperty('managerOpenintegrationrequestformParams') ? dataset.managerOpenintegrationrequestformParams : '';\n\n\t\t\treturn this.#parseParamsDataSetting(settings);\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tstatic openApplication(params = {})\n\t{\n\t\tlet url = new Uri('/saleshub/app/');\n\t\tif(Type.isPlainObject(params))\n\t\t{\n\t\t\turl.setQueryParams(params);\n\t\t}\n\n\t\tlet sliderOptions = params.hasOwnProperty('sliderOptions') ? params.sliderOptions : {};\n\t\tif (!sliderOptions.hasOwnProperty('width'))\n\t\t{\n\t\t\tsliderOptions.width = 1140;\n\t\t}\n\n\t\treturn new Promise((resolve, reject) =>\n\t\t{\n\t\t\tManager.openSlider(url.toString(), sliderOptions).then((slider) =>\n\t\t\t{\n\t\t\t\tresolve(slider.getData());\n\t\t\t}).catch((reason) =>\n\t\t\t{\n\n\t\t\t});\n\t\t});\n\t}\n\n\tstatic addAnalyticAction(params)\n\t{\n\t\treturn new Promise((resolve, reject) =>\n\t\t{\n\t\t\tif(!Type.isPlainObject(params) || !params.analyticsLabel)\n\t\t\t{\n\t\t\t\treject('wrong params');\n\t\t\t}\n\t\t\tparams = {...params, ...{action: 'salescenter.manager.addAnalytic', sessid: BX.bitrix_sessid()}};\n\t\t\tlet request = new XMLHttpRequest();\n\t\t\tlet url = new Uri('/bitrix/services/main/ajax.php');\n\t\t\turl.setQueryParams(params);\n\t\t\trequest.open('GET', url.toString());\n\t\t\trequest.onload = () =>\n\t\t\t{\n\t\t\t\tresolve();\n\t\t\t};\n\t\t\trequest.onerror = () =>\n\t\t\t{\n\t\t\t\treject();\n\t\t\t};\n\t\t\trequest.send();\n\t\t});\n\t}\n\n\tstatic getFieldsMap()\n\t{\n\t\treturn new Promise((resolve, reject) =>\n\t\t{\n\t\t\tif(Manager.fieldsMap !== null)\n\t\t\t{\n\t\t\t\tresolve(Manager.fieldsMap);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tAjax.runAction('salescenter.manager.getFieldsMap', {\n\t\t\t\tanalyticsLabel: 'salescenterFieldsMapLoading',\n\t\t\t}).then((response) =>\n\t\t\t{\n\t\t\t\tManager.fieldsMap = response.data.fields;\n\t\t\t\tresolve(response.data.fields);\n\t\t\t}).catch((response) =>\n\t\t\t{\n\t\t\t\treject(response.errors);\n\t\t\t});\n\t\t});\n\t}\n\n\tstatic getPageUrl(pageId, entities, context = null): ?String\n\t{\n\t\treturn new Promise((resolve, reject) =>\n\t\t{\n\t\t\tif(!Type.isInteger(pageId))\n\t\t\t{\n\t\t\t\tresolve(null);\n\t\t\t}\n\t\t\tif(!Type.isPlainObject(entities) || entities.length <= 0)\n\t\t\t{\n\t\t\t\tresolve(null);\n\t\t\t}\n\n\t\t\tAjax.runAction('salescenter.manager.getPageUrl', {\n\t\t\t\tdata: {\n\t\t\t\t\tpageId: pageId,\n\t\t\t\t\tentities: entities\n\t\t\t\t},\n\t\t\t\tanalyticsLabel: 'salescenterGetPageUrlWithParameters',\n\t\t\t\tgetParameters: {\n\t\t\t\t\tcontext: context\n\t\t\t\t}\n\t\t\t}).then((response) =>\n\t\t\t{\n\t\t\t\tresolve(response.data.pageUrl);\n\t\t\t}).catch((response) =>\n\t\t\t{\n\t\t\t\treject(response.errors);\n\t\t\t});\n\t\t});\n\t}\n}\n"],"names":["Manager","options","connectedSiteId","parseInt","sessionId","Type","isString","siteTemplateCode","connectPath","isBoolean","isSitePublished","isSiteExists","isOrderPublicUrlAvailable","isPullInited","Event","ready","initPull","top","BX","Landing","PageObject","Main","Promise","resolve","reject","Rest","callMethod","then","result","init","answer","reason","params","url","Uri","isPlainObject","analyticsLabel","setQueryParams","openSlider","toString","width","tpl","id","firePublicConnectedSiteEvent","onCustomEvent","title","text","buttons","popup","PopupWindowManager","getPopupById","content","setContent","setButtons","PopupWindow","zIndex","className","autoHide","closeByEsc","padding","closeIcon","overlay","lightShadow","getPopup","message","PopupWindowButton","events","click","openConnectedSite","close","show","event","clipboard","copy","target","showCopyLinkPopup","page","getAddUrlPopup","templateEngine","$emit","addUrlResolve","addingCustomPage","pageId","isSaved","isFunction","showNotification","loadExt","Vue","create","el","document","createElement","template","mounted","popupNode","$el","$app","addUrlPopup","getPopupContainer","contains","urlFieldsPopupWindow","urlFieldsPopupMenu","PopupMenu","getMenuById","popupWindow","dataset","parentNode","classList","initPopupTemplate","contentPadding","titleBar","contentColor","autoHideHandler","handleAddUrlPopupAutoHide","onPopupClose","newPageId","getElementById","value","resolveAddPopup","onPopupDestroy","fields","method","source","landingId","siteId","addAnalyticAction","type","isWebform","code","Env","getInstance","setOptions","site_id","UI","Panel","URLList","addPage","hidden","Notification","Center","notify","data","window","open","cacheable","allowChangeHistory","length","onClose","getSlider","SidePanel","Instance","getOrdersListUrl","getPaymentsListUrl","getOrderAddUrl","orderId","ordersListUrl","listSlider","orderAddUrl","addSlider","destroy","showOrdersList","getFrameWindow","PULL","subscribe","moduleId","command","callback","formId","ACTIVE","RELOAD_LIST","getFormAddUrl","slider","getData","get","addNewFormPage","popupId","editLandingPage","error","isRecycle","apply_filter","DELETED","clear_filter","openHelper","analyticsArticle","preventDefault","article","Helper","feedback_type","sliderOptions","hasOwnProperty","action","sessid","bitrix_sessid","request","XMLHttpRequest","onload","onerror","send","fieldsMap","Ajax","runAction","response","errors","entities","context","isInteger","getParameters","pageUrl","settings","isStringFilled","split","inx","name","e","node","isDomNode","button","isObject","managerOpenintegrationrequestformParams","popupOuterLink","hideCopyLinkTimeout","clearTimeout","destroyCopyLinkTimeout","darkMode","setTimeout","hide","uniquePopupId"],"mappings":";;;;;;;;;;;KAWaA,OAAb;GAAA;KAAA;;;GAAA;KAAA;KAAA,qBAeaC,OAfb,EAgBC;OACCA,OAAO,CAACC,eAAR,GAA0BC,QAAQ,CAACF,OAAO,CAACC,eAAT,CAAlC;;OACA,IAAGD,OAAO,CAACC,eAAR,GAA0B,CAA7B,EACA;SACCF,OAAO,CAACE,eAAR,GAA0BD,OAAO,CAACC,eAAlC;;;OAEDD,OAAO,CAACG,SAAR,GAAoBD,QAAQ,CAACF,OAAO,CAACG,SAAT,CAA5B;;OACA,IAAGH,OAAO,CAACG,SAAR,GAAoB,CAAvB,EACA;SACCJ,OAAO,CAACI,SAAR,GAAoBH,OAAO,CAACG,SAA5B;;;OAED,IAAGC,cAAI,CAACC,QAAL,CAAcL,OAAO,CAACM,gBAAtB,CAAH,EACA;SACCP,OAAO,CAACO,gBAAR,GAA2BN,OAAO,CAACM,gBAAnC;;;OAED,IAAGF,cAAI,CAACC,QAAL,CAAcL,OAAO,CAACO,WAAtB,CAAH,EACA;SACCR,OAAO,CAACQ,WAAR,GAAsBP,OAAO,CAACO,WAA9B;;;OAED,IAAGH,cAAI,CAACI,SAAL,CAAeR,OAAO,CAACS,eAAvB,CAAH,EACA;SACCV,OAAO,CAACU,eAAR,GAA0BT,OAAO,CAACS,eAAlC;;;OAED,IAAGL,cAAI,CAACI,SAAL,CAAeR,OAAO,CAACU,YAAvB,CAAH,EACA;SACCX,OAAO,CAACW,YAAR,GAAuBV,OAAO,CAACU,YAA/B;;;OAED,IAAGN,cAAI,CAACI,SAAL,CAAeR,OAAO,CAACW,yBAAvB,CAAH,EACA;SACCZ,OAAO,CAACY,yBAAR,GAAoCX,OAAO,CAACW,yBAA5C;QAFD,MAKA;SACCZ,OAAO,CAACY,yBAAR,GAAoC,KAApC;;;OAGD,IAAG,CAACZ,OAAO,CAACa,YAAZ,EACA;SACCC,eAAK,CAACC,KAAN,CAAYf,OAAO,CAACgB,QAApB;QAtCF;;;OA0CC,IAAG,CAACC,GAAG,CAACC,EAAJ,CAAOC,OAAX,EACA;SACCF,GAAG,CAACC,EAAJ,CAAOC,OAAP,GAAiB;WAChBC,UAAU,EAAE,EADI;WAEhBC,IAAI,EAAE;UAFP;;;;KA5DH;KAAA,6BAoEC;OACC,OAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EACnB;SACCC,gBAAI,CAACC,UAAL,CAAgB,+BAAhB,EAAiDC,IAAjD,CAAsD,UAACC,MAAD,EACtD;WACC5B,OAAO,CAAC6B,IAAR,CAAaD,MAAM,CAACE,MAAP,CAAcF,MAA3B;WACAL,OAAO,CAACK,MAAM,CAACE,MAAP,CAAcF,MAAf,CAAP;UAHD,WAIS,UAACG,MAAD,EACT;WACCP,MAAM,CAACO,MAAD,CAAN;UAND;QAFM,CAAP;;;CAcF;CACA;CACA;CACA;;;KAtFA;KAAA,kCAwFC;OAAA,IADuBC,MACvB,uEADgC,EAChC;OACC,OAAO,IAAIV,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EACnB;SACC,IAAG,CAACxB,OAAO,CAACQ,WAAZ,EACA;WACCgB,MAAM,CAAC,iBAAD,CAAN;;;SAGD,IAAIS,GAAG,GAAG,IAAIC,aAAJ,CAAQlC,OAAO,CAACQ,WAAhB,CAAV;;SACA,IAAG,CAACH,cAAI,CAAC8B,aAAL,CAAmBH,MAAnB,CAAJ,EACA;WACCA,MAAM,GAAG,EAAT;;;SAEDA,MAAM,CAACI,cAAP,GAAwB,4BAAxB;SACAH,GAAG,CAACI,cAAJ,CAAmBL,MAAnB;SACAhC,OAAO,CAACsC,UAAR,CAAmBL,GAAG,CAACM,QAAJ,EAAnB,EAAmC;WAACC,KAAK,EAAE;UAA3C,EAAiDb,IAAjD,CAAsD,YACtD;WACCJ,OAAO;UAFR,WAGS,UAACQ,MAAD,EACT;WACCP,MAAM,CAACO,MAAD,CAAN;UALD;QAdM,CAAP;;;CAyBF;CACA;CACA;CACA;CACA;;;KAtHA;KAAA,wBAuHgBC,MAvHhB,EAwHC;OACC,OAAO,IAAIV,OAAJ,CAAY,UAACC,OAAD,EACnB;SACC,IAAGvB,OAAO,CAACE,eAAR,GAA0B,CAA1B,IAA+BF,OAAO,CAACW,YAA1C,EACA;WACCY,OAAO;UAFR,MAKA;WACC,IAAIU,GAAG,GAAG,IAAIC,aAAJ,CAAQ,2BAAR,CAAV;;WACA,IAAG,CAAC7B,cAAI,CAAC8B,aAAL,CAAmBH,MAAnB,CAAJ,EACA;aACCA,MAAM,GAAG,EAAT;;;WAEDA,MAAM,CAACI,cAAP,GAAwB,oBAAxB;;WACA,IAAGpC,OAAO,CAACO,gBAAX,EACA;aACCyB,MAAM,CAACS,GAAP,GAAazC,OAAO,CAACO,gBAArB;;;WAED0B,GAAG,CAACI,cAAJ,CAAmBL,MAAnB;WACAhC,OAAO,CAACsC,UAAR,CAAmBL,GAAG,CAACM,QAAJ,EAAnB,EAAmCZ,IAAnC,CAAwC,YACxC;aACCJ,OAAO;YAFR;;QAnBK,CAAP;;;KAzHF;KAAA,sCAqJC;OACC,OAAO,IAAID,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EACnB;SACC,IAAGxB,OAAO,CAACE,eAAR,GAA0B,CAA1B,IAA+B,CAACF,OAAO,CAACU,eAA3C,EACA;WACCe,gBAAI,CAACC,UAAL,CAAgB,0BAAhB,EAA4C;aAACgB,EAAE,EAAE1C,OAAO,CAACE;YAAzD,EAA2EyB,IAA3E,CAAgF,UAACC,MAAD,EAChF;aACC5B,OAAO,CAACU,eAAR,GAA0B,IAA1B;aACAV,OAAO,CAAC2C,4BAAR;aACApB,OAAO,CAACK,MAAD,CAAP;YAJD,WAKS,UAACG,MAAD,EACT;aACCP,MAAM,CAACO,MAAD,CAAN;YAPD;UAFD,MAaA;WACCR,OAAO;;QAhBF,CAAP;;;KAtJF;KAAA,+CA4KC;OACCN,GAAG,CAACC,EAAJ,CAAO0B,aAAP,CAAqB,2CAArB,EAAkE;SACjElC,eAAe,EAAE;QADlB;;;CAMF;CACA;;;KApLA;KAAA,+BAsLC;OAAA,mBADiBgC,EACjB;WADiBA,EACjB,wBADsB,EACtB;6BAD0BG,KAC1B;WAD0BA,KAC1B,2BADkC,EAClC;4BADsCC,IACtC;WADsCA,IACtC,0BAD6C,EAC7C;+BADiDC,OACjD;WADiDA,OACjD,6BAD2D,EAC3D;OACC,IAAIC,QAAK,GAAG9B,EAAE,CAAC+B,kBAAH,CAAsBC,YAAtB,CAAmCR,EAAnC,CAAZ;OAEA,IAAMS,OAAO,6FAC2BN,KAD3B,iEAE0BC,IAF1B,uBAAb;;OAIA,IAAGE,QAAH,EACA;SACCA,QAAK,CAACI,UAAN,CAAiBD,OAAjB;SACAH,QAAK,CAACK,UAAN,CAAiBN,OAAjB;QAHD,MAMA;SACCC,QAAK,GAAG,IAAI9B,EAAE,CAACoC,WAAP,CAAmBZ,EAAnB,EAAuB,IAAvB,EAA6B;WACpCa,MAAM,EAAE,GAD4B;WAEpCC,SAAS,EAAE,2BAFyB;WAGpCC,QAAQ,EAAE,IAH0B;WAIpCC,UAAU,EAAE,IAJwB;WAKpCC,OAAO,EAAE,CAL2B;WAMpCC,SAAS,EAAE,IANyB;WAOpCT,OAAO,EAAGA,OAP0B;WAQpCX,KAAK,EAAE,GAR6B;WASpCqB,OAAO,EAAE,IAT2B;WAUpCC,WAAW,EAAE,KAVuB;WAWpCf,OAAO,EAAEA;UAXF,CAAR;;;OAeD,OAAOC,QAAP;;;KAnNF;KAAA,wCAuNC;OACC,IAAMA,QAAK,GAAGhD,OAAO,CAAC+D,QAAR,CAAiB;SAC9BrB,EAAE,EAAE,2BAD0B;SAE9BG,KAAK,EAAE3B,EAAE,CAAC8C,OAAH,CAAW,yCAAX,CAFuB;SAG9BlB,IAAI,EAAE5B,EAAE,CAAC8C,OAAH,CAAW,+CAAX,CAHwB;SAI9BjB,OAAO,EAAE,CACR,IAAI7B,EAAE,CAAC+C,iBAAP,CAAyB;WACxBnB,IAAI,EAAG5B,EAAE,CAAC8C,OAAH,CAAW,6CAAX,CADiB;WAExBR,SAAS,EAAG,iCAFY;WAGxBU,MAAM,EAAG;aACRC,KAAK,EAAG,iBACR;eACCnE,OAAO,CAACoE,iBAAR;eACApB,QAAK,CAACqB,KAAN;;;UAPH,CADQ;QAJI,CAAd;OAkBArB,QAAK,CAACsB,IAAN;;;KA1OF;KAAA,wBA6OgBrC,GA7OhB,EA6OqBsC,KA7OrB,EA8OC;OACCrD,EAAE,CAACsD,SAAH,CAAaC,IAAb,CAAkBxC,GAAlB;;OACA,IAAGsC,KAAK,IAAIA,KAAK,CAACG,MAAlB,EACA;SACC1E,OAAO,CAAC2E,iBAAR,CAA0BJ,KAAK,CAACG,MAAhC;;;;KAlPH;KAAA,8BA8RsBE,IA9RtB,EA+RC;OACC,OAAO,IAAItD,OAAJ,CAAY,UAACC,OAAD,EACnB;SACCvB,OAAO,CAAC6E,cAAR,GAAyBlD,IAAzB,CAA8B,UAACqB,QAAD,EAAW;WACxChD,OAAO,CAAC8E,cAAR,CAAuBC,KAAvB,CAA6B,qBAA7B,EAAoDH,IAApD;WACA5B,QAAK,CAACsB,IAAN;UAFD;SAIAtE,OAAO,CAACgF,aAAR,GAAwBzD,OAAxB;SACAvB,OAAO,CAACiF,gBAAR,GAA2BL,IAA3B;QAPM,CAAP;;;KAhSF;KAAA,gCA2SwBM,MA3SxB,EA2SgCC,OA3ShC,EA4SC;OACC,IAAGnF,OAAO,CAACgF,aAAR,IAAyB3E,cAAI,CAAC+E,UAAL,CAAgBpF,OAAO,CAACgF,aAAxB,CAA5B,EACA;SACChF,OAAO,CAACgF,aAAR,CAAsBE,MAAtB;SACAlF,OAAO,CAACgF,aAAR,GAAwB,IAAxB;;;OAED,IAAGG,OAAO,IAAID,MAAM,GAAG,CAAvB,EACA;SACC,IAAGlF,OAAO,CAACiF,gBAAR,IAA4BjF,OAAO,CAACiF,gBAAR,CAAyBvC,EAArD,IAA2DvC,QAAQ,CAACH,OAAO,CAACiF,gBAAR,CAAyBvC,EAA1B,CAAR,KAA0CvC,QAAQ,CAAC+E,MAAD,CAAhH,EACA;WACClF,OAAO,CAACqF,gBAAR,CAAyBnE,EAAE,CAAC8C,OAAH,CAAW,wCAAX,CAAzB;UAFD,MAKA;WACChE,OAAO,CAACqF,gBAAR,CAAyBnE,EAAE,CAAC8C,OAAH,CAAW,qCAAX,CAAzB;;;;;KA1TJ;KAAA,oCAgUC;OACC,OAAO,IAAI1C,OAAJ,CAAY,UAAAC,OAAO,EAC1B;SACCL,EAAE,CAACoE,OAAH,CAAW,uBAAX,EAAoC3D,IAApC,CAAyC,YACzC;WACC3B,OAAO,CAAC8E,cAAR,GAAyB5D,EAAE,CAACqE,GAAH,CAAOC,MAAP,CAAc;aACtCC,EAAE,EAAEC,QAAQ,CAACC,aAAT,CAAuB,KAAvB,CADkC;aAEtCC,QAAQ,EAAE,6BAF4B;aAGtCC,OAHsC,qBAItC;eACC7F,OAAO,CAAC8F,SAAR,GAAoB,KAAKC,GAAzB;eACA,KAAKC,IAAL,GAAYhG,OAAZ;eACAuB,OAAO;;YAPgB,CAAzB;UAFD;QAFM,CAAP;;;KAjUF;KAAA,0CAmVkCgD,KAnVlC,EAoVC;OACC,IAAG,CAACvE,OAAO,CAACiG,WAAZ,EACA;SACC,OAAO,IAAP;;;OAED,IAAG1B,KAAK,CAACG,MAAN,KAAiB1E,OAAO,CAACiG,WAAR,CAAoBC,iBAApB,EAAjB,IAA4D,CAAClG,OAAO,CAACiG,WAAR,CAAoBC,iBAApB,GAAwCC,QAAxC,CAAiD5B,KAAK,CAACG,MAAvD,CAAhE,EACA;SACC,IAAI0B,oBAAoB,GAAG,IAA3B;SACA,IAAMC,kBAAkB,GAAGnF,EAAE,CAACoF,SAAH,CAAaC,WAAb,CAAyB,8BAAzB,CAA3B;;SACA,IAAGF,kBAAH,EACA;WACCD,oBAAoB,GAAGC,kBAAkB,CAACG,WAA1C;;;SAED,IAAG,CAACJ,oBAAJ,EACA;WACC,OAAO,IAAP;UAFD,MAKA;WACC,IAAG7B,KAAK,CAACG,MAAN,CAAa+B,OAAb,CAAqB,UAArB,MAAqC,8BAArC,IAAuElC,KAAK,CAACG,MAAN,CAAagC,UAAb,CAAwBD,OAAxB,CAAgC,UAAhC,MAAgD,8BAA1H,EACA;aACC,IAAG,CAAClC,KAAK,CAACG,MAAN,CAAaiC,SAAb,CAAuBR,QAAvB,CAAgC,yBAAhC,CAAD,IAA+D,CAAC5B,KAAK,CAACG,MAAN,CAAagC,UAAb,CAAwBC,SAAxB,CAAkCR,QAAlC,CAA2C,yBAA3C,CAAnE,EACA;eACCC,oBAAoB,CAAC/B,KAArB;;;aAED,OAAO,KAAP;YAND,MASA;aACC,OAAO,IAAP;;;;;OAKH,OAAO,KAAP;;;KAtXF;KAAA,iCA0XC;OACC,OAAO,IAAI/C,OAAJ,CAAY,UAACC,OAAD,EACnB;SACC,IAAG,CAACvB,OAAO,CAACiG,WAAZ,EACA;WACCjG,OAAO,CAAC4G,iBAAR,GAA4BjF,IAA5B,CAAiC,YACjC;aACC3B,OAAO,CAACiG,WAAR,GAAsB,IAAI/E,EAAE,CAACoC,WAAP,CAAmB;eACxCZ,EAAE,EAAE,yBADoC;eAExCa,MAAM,EAAE,GAFgC;eAGxCE,QAAQ,EAAE,IAH8B;eAIxCC,UAAU,EAAE,IAJ4B;eAKxCE,SAAS,EAAE,IAL6B;eAMxCD,OAAO,EAAE,CAN+B;eAOxCkD,cAAc,EAAE,CAPwB;eAQxC1D,OAAO,EAAGnD,OAAO,CAAC8F,SARsB;eASxCgB,QAAQ,EAAE5F,EAAE,CAAC8C,OAAH,CAAW,qCAAX,CAT8B;eAUxC+C,YAAY,EAAE,OAV0B;eAWxCvE,KAAK,EAAE,GAXiC;eAYxCwE,eAAe,EAAEhH,OAAO,CAACiH,yBAZe;eAaxC/C,MAAM,EAAG;iBACRgD,YAAY,EAAE,wBACd;mBACC,IAAIC,SAAS,GAAGzB,QAAQ,CAAC0B,cAAT,CAAwB,mCAAxB,CAAhB;mBACA,IAAMjC,OAAO,GAAGO,QAAQ,CAAC0B,cAAT,CAAwB,yCAAxB,EAAmEC,KAAnE,KAA6E,GAA7F;;mBACA,IAAGF,SAAH,EACA;qBACCA,SAAS,GAAGA,SAAS,CAACE,KAAtB;oBAFD,MAKA;qBACCF,SAAS,GAAG,KAAZ;;;mBAEDnH,OAAO,CAACsH,eAAR,CAAwBH,SAAxB,EAAmChC,OAAnC;kBAbO;iBAeRoC,cAAc,EAAG,0BACjB;mBACCvH,OAAO,CAACiG,WAAR,GAAsB,IAAtB;;;cA9BmB,CAAtB;aAmCA1E,OAAO,CAACvB,OAAO,CAACiG,WAAT,CAAP;YArCD;UAFD,MA2CA;WACC1E,OAAO,CAACvB,OAAO,CAACiG,WAAT,CAAP;;QA9CK,CAAP;;;KA3XF;KAAA,wBA8agBuB,MA9ahB,EA+aC;OACC,OAAO,IAAIlG,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EACnB;SACC,IAAIiG,MAAJ,EAAYrF,cAAZ;;SACA,IAAGoF,MAAM,CAACpF,cAAV,EACA;WACCA,cAAc,GAAGoF,MAAM,CAACpF,cAAxB;WACA,OAAOoF,MAAM,CAACpF,cAAd;;;SAED,IAAGoF,MAAM,CAAC9E,EAAP,GAAY,CAAf,EACA;WACC+E,MAAM,GAAGhG,gBAAI,CAACC,UAAL,CAAgB,yBAAhB,EAA2C;aACnDgB,EAAE,EAAE8E,MAAM,CAAC9E,EADwC;aAEnD8E,MAAM,EAAEA;YAFA,CAAT;;WAIA,IAAG,CAACpF,cAAJ,EACA;aACCA,cAAc,GAAG,uBAAjB;;UARF,MAYA;WACCqF,MAAM,GAAGhG,gBAAI,CAACC,UAAL,CAAgB,sBAAhB,EAAwC;aAChD8F,MAAM,EAAEA;YADA,CAAT;;WAGA,IAAG,CAACpF,cAAJ,EACA;aACCA,cAAc,GAAG,oBAAjB;;;;SAGFqF,MAAM,CAAC9F,IAAP,CAAY,UAACC,MAAD,EACZ;WACC,IAAGA,MAAM,CAACE,MAAP,CAAcF,MAAd,CAAqBgD,IAAxB,EACA;aACC,IAAIA,IAAI,GAAGhD,MAAM,CAACE,MAAP,CAAcF,MAAd,CAAqBgD,IAAhC;aACA,IAAI8C,MAAM,GAAG,OAAb;;aACA,IAAG9C,IAAI,CAAC+C,SAAL,GAAiB,CAApB,EACA;eACC,IAAGxH,QAAQ,CAACyE,IAAI,CAACgD,MAAN,CAAR,KAA0BzH,QAAQ,CAACH,OAAO,CAACE,eAAT,CAArC,EACA;iBACCwH,MAAM,GAAG,oBAAT;gBAFD,MAKA;iBACCA,MAAM,GAAG,eAAT;;;;aAGF1H,OAAO,CAAC6H,iBAAR,CAA0B;eACzBzF,cAAc,EAAEA,cADS;eAEzBsF,MAAM,EAAEA,MAFiB;eAGzBI,IAAI,EAAElD,IAAI,CAACmD,SAAL,GAAiB,OAAjB,GAA2B,MAHR;eAIzBC,IAAI,EAAEpD,IAAI,CAACoD;cAJZ,EAKGrG,IALH,CAKQ,YACR;eACCJ,OAAO,CAACK,MAAD,CAAP;cAPD;YAfD,MA0BA;aACCL,OAAO,CAACK,MAAD,CAAP;;UA7BF,WA+BS,UAACG,MAAD,EACT;WACCP,MAAM,CAACO,MAAD,CAAN;UAjCD;QA7BM,CAAP;;;KAhbF;KAAA,yBAmfiBE,GAnfjB,EAofC;OACC,OAAOR,gBAAI,CAACC,UAAL,CAAgB,6BAAhB,EAA+C;SACrDO,GAAG,EAAEA;QADC,CAAP;;;KArfF;KAAA,8BA2fC;OAAA,IADmB8F,SACnB,uEAD+B,KAC/B;OACC,OAAO,IAAIzG,OAAJ,CAAY,UAACC,OAAD,EACnB;SACC,IAAMqG,MAAM,GAAG5H,OAAO,CAACE,eAAvB;;SACA,IAAI0H,MAAM,GAAG,CAAb,EACA;WACC1G,EAAE,CAACoE,OAAH,CAAW,gBAAX,EAA6B3D,IAA7B,CAAkC,YAClC;aACCT,EAAE,CAACC,OAAH,CAAW8G,GAAX,CAAeC,WAAf,GAA6BC,UAA7B,CAAwC;eAACC,OAAO,EAAER;cAAlD;aACA1G,EAAE,CAACC,OAAH,CAAWkH,EAAX,CAAcC,KAAd,CAAoBC,OAApB,CACEL,WADF,GAEE5D,IAFF,CAEO,SAFP,EAEkB;eAACsD,MAAM,EAAEA;cAF3B,EAGEjG,IAHF,CAGO,UAACC,MAAD,EACN;eACC5B,OAAO,CAACwI,OAAR,CAAgB;iBACfC,MAAM,EAAE,KADO;iBAEfd,SAAS,EAAE/F,MAAM,CAACc,EAFH;iBAGfqF,SAAS,EAAEA;gBAHZ,EAIGpG,IAJH,CAIQ,UAACC,MAAD,EACR;iBACCL,OAAO,CAACK,MAAD,CAAP;iBACA5B,OAAO,CAACqF,gBAAR,CAAyBnE,EAAE,CAAC8C,OAAH,CAAW,qCAAX,CAAzB;gBAPD;cALF;YAHD;UAFD,MAuBA;WACChE,OAAO,CAACsC,UAAR,CAAmB,0DAAnB,EAA+EX,IAA/E,CAAoF,YACpF;aACCJ,OAAO;YAFR;;QA3BK,CAAP;;;KA5fF;KAAA,iCA+hByByC,OA/hBzB,EAgiBC;OACC,IAAG,CAACA,OAAJ,EACA;SACC;;;OAED9C,EAAE,CAACoE,OAAH,CAAW,iBAAX,EAA8B3D,IAA9B,CAAmC,YACnC;SACCT,EAAE,CAACmH,EAAH,CAAMK,YAAN,CAAmBC,MAAnB,CAA0BC,MAA1B,CAAiC;WAChCzF,OAAO,EAAEa;UADV;QAFD;;;KAriBF;KAAA,yBA6iBiBY,IA7iBjB,EA8iBC;OACC,IAAM6C,MAAM,GAAG,uBAAf;OACA,IAAIC,MAAM,GAAG,OAAb;;OACA,IAAG9C,IAAI,CAAC+C,SAAL,GAAiB,CAApB,EACA;SACC,IAAGxH,QAAQ,CAACyE,IAAI,CAACgD,MAAN,CAAR,KAA0BzH,QAAQ,CAACH,OAAO,CAACE,eAAT,CAArC,EACA;WACCwH,MAAM,GAAG,oBAAT;UAFD,MAKA;WACCA,MAAM,GAAG,eAAT;;;;OAGF,IAAMmB,IAAI,GAAG;SACZnG,EAAE,EAAEkC,IAAI,CAAClC,EADG;SAEZ8E,MAAM,EAAE;WACPiB,MAAM,EAAE;UAHG;SAKZrG,cAAc,EAAE,uBALJ;SAMZsF,MAAM,EAAEA,MANI;SAOZI,IAAI,EAAElD,IAAI,CAACmD,SAAL,GAAiB,MAAjB,GAA0B,MAPpB;SAQZC,IAAI,EAAEpD,IAAI,CAACoD;QARZ;OAWA,OAAO,IAAI1G,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EACnB;SACCC,gBAAI,CAACC,UAAL,CAAgB+F,MAAhB,EAAwBoB,IAAxB,EAA8BlH,IAA9B,CAAmC,UAACC,MAAD,EACnC;WACCL,OAAO,CAACK,MAAD,CAAP;WACA5B,OAAO,CAACqF,gBAAR,CAAyBnE,EAAE,CAAC8C,OAAH,CAAW,sCAAX,CAAzB;UAHD,WAIS,UAACpC,MAAD,EACT;WACCJ,MAAM,CAACI,MAAD,CAAN;UAND;QAFM,CAAP;;;KAvkBF;KAAA,0BAolBkBgD,IAplBlB,EAqlBC;OACC,IAAM6C,MAAM,GAAG,yBAAf;OACA,IAAMoB,IAAI,GAAG;SACZnG,EAAE,EAAEkC,IAAI,CAAClC,EADG;SAEZN,cAAc,EAAE,uBAFJ;SAGZsF,MAAM,EAAE,OAHI;SAIZI,IAAI,EAAElD,IAAI,CAACmD,SAAL,GAAiB,MAAjB,GAA0B;QAJjC;OAOA,OAAO,IAAIzG,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EACnB;SACCC,gBAAI,CAACC,UAAL,CAAgB+F,MAAhB,EAAwBoB,IAAxB,EAA8BlH,IAA9B,CAAmC,UAACC,MAAD,EACnC;WACCL,OAAO,CAACK,MAAD,CAAP;WACA5B,OAAO,CAACqF,gBAAR,CAAyBnE,EAAE,CAAC8C,OAAH,CAAW,wCAAX,CAAzB;UAHD,WAIS,UAACpC,MAAD,EACT;WACCJ,MAAM,CAACI,MAAD,CAAN;UAND;QAFM,CAAP;;;KA9lBF;KAAA,gCA2mBwBsD,MA3mBxB,EA4mBC;OAAA,IAD+B0C,MAC/B,uEADwC5H,OAAO,CAACE,eAChD;OACC4I,MAAM,CAACC,IAAP,6BAAiCnB,MAAjC,mBAAgD1C,MAAhD,QAA2D,QAA3D;;;KA7mBF;KAAA,2BAgnBmBjD,GAhnBnB,EAgnBwBhC,OAhnBxB,EAinBC;OACC,IAAG,CAACI,cAAI,CAAC8B,aAAL,CAAmBlC,OAAnB,CAAJ,EACA;SACCA,OAAO,GAAG,EAAV;;;OAEDA,OAAO,mCAAO;SAAC+I,SAAS,EAAE,KAAZ;SAAmBC,kBAAkB,EAAE,KAAvC;SAA8C/E,MAAM,EAAE;QAA7D,GAAqEjE,OAArE,CAAP;OACA,OAAO,IAAIqB,OAAJ,CAAY,UAACC,OAAD,EACnB;SACC,IAAGlB,cAAI,CAACC,QAAL,CAAc2B,GAAd,KAAsBA,GAAG,CAACiH,MAAJ,GAAa,CAAtC,EACA;WACCjJ,OAAO,CAACiE,MAAR,CAAeiF,OAAf,GAAyB,UAAS5E,KAAT,EACzB;aACChD,OAAO,CAACgD,KAAK,CAAC6E,SAAN,EAAD,CAAP;YAFD;;WAIAlI,EAAE,CAACmI,SAAH,CAAaC,QAAb,CAAsBP,IAAtB,CAA2B9G,GAA3B,EAAgChC,OAAhC;UAND,MASA;WACCsB,OAAO;;QAZF,CAAP;;;KAvnBF;KAAA,iCAwoByBS,MAxoBzB,EAyoBC;OACC,IAAG,CAAC3B,cAAI,CAAC8B,aAAL,CAAmBH,MAAnB,CAAJ,EACA;SACCA,MAAM,GAAG,EAAT;;;OAED,IAAGhC,OAAO,CAACI,SAAR,GAAoB,CAAvB,EACA;SACC4B,MAAM,CAAC,WAAD,CAAN,GAAsBhC,OAAO,CAACI,SAA9B;;;OAED,OAAQ,IAAI8B,aAAJ,CAAQ,mBAAR,CAAD,CAA+BG,cAA/B,CAA8CL,MAA9C,EAAsDO,QAAtD,EAAP;;;KAlpBF;KAAA,mCAqpB2BP,MArpB3B,EAspBC;OACC,IAAG,CAAC3B,cAAI,CAAC8B,aAAL,CAAmBH,MAAnB,CAAJ,EACA;SACCA,MAAM,GAAG,EAAT;;;OAED,IAAGhC,OAAO,CAACI,SAAR,GAAoB,CAAvB,EACA;SACC4B,MAAM,CAAC,WAAD,CAAN,GAAsBhC,OAAO,CAACI,SAA9B;;;OAED,OAAQ,IAAI8B,aAAJ,CAAQ,qBAAR,CAAD,CAAiCG,cAAjC,CAAgDL,MAAhD,EAAwDO,QAAxD,EAAP;;;KA/pBF;KAAA,+BAkqBuBP,MAlqBvB,EAmqBC;OACC,OAAOhC,OAAO,CAACsC,UAAR,CAAmBtC,OAAO,CAACuJ,gBAAR,CAAyBvH,MAAzB,CAAnB,CAAP;;;KApqBF;KAAA,iCAuqByBA,MAvqBzB,EAwqBC;OACC,OAAOhC,OAAO,CAACsC,UAAR,CAAmBtC,OAAO,CAACwJ,kBAAR,CAA2BxH,MAA3B,CAAnB,CAAP;;;KAzqBF;KAAA,+BA4qBuBA,MA5qBvB,EA6qBC;OACC,IAAG,CAAC3B,cAAI,CAAC8B,aAAL,CAAmBH,MAAnB,CAAJ,EACA;SACCA,MAAM,GAAG,EAAT;;;OAED,IAAGhC,OAAO,CAACI,SAAR,GAAoB,CAAvB,EACA;SACC4B,MAAM,CAAC,WAAD,CAAN,GAAsBhC,OAAO,CAACI,SAA9B;;;OAED,OAAQ,IAAI8B,aAAJ,CAAQ,yBAAR,CAAD,CAAqCG,cAArC,CAAoDL,MAApD,EAA4DO,QAA5D,EAAP;;;KAtrBF;KAAA,6BAyrBqBP,MAzrBrB,EA0rBC;OACC,OAAOhC,OAAO,CAACsC,UAAR,CAAmBtC,OAAO,CAACyJ,cAAR,CAAuBzH,MAAvB,CAAnB,CAAP;;;KA3rBF;KAAA,0CA8rBkC0H,OA9rBlC,EA+rBC;OACC,IAAIC,aAAa,GAAG3J,OAAO,CAACuJ,gBAAR,CAAyB;SAACG,OAAO,EAAEA;QAAnC,CAApB;OACA,IAAIE,UAAU,GAAG1I,EAAE,CAACmI,SAAH,CAAaC,QAAb,CAAsBF,SAAtB,CAAgCO,aAAhC,CAAjB;;OACA,IAAG,CAACC,UAAJ,EACA;SACCD,aAAa,GAAG3J,OAAO,CAACuJ,gBAAR,CAAyB;WAACG,OAAO,EAAEA;UAAnC,CAAhB;SACAE,UAAU,GAAG1I,EAAE,CAACmI,SAAH,CAAaC,QAAb,CAAsBF,SAAtB,CAAgCO,aAAhC,CAAb;;;OAED,IAAIE,WAAW,GAAG7J,OAAO,CAACyJ,cAAR,EAAlB;OACA,IAAIK,SAAS,GAAG5I,EAAE,CAACmI,SAAH,CAAaC,QAAb,CAAsBF,SAAtB,CAAgCS,WAAhC,CAAhB;;OACA,IAAGC,SAAH,EACA;SACCA,SAAS,CAACC,OAAV;;;OAED,IAAG,CAACH,UAAJ,EACA;SACC5J,OAAO,CAACgK,cAAR,CAAuB;WAACN,OAAO,EAAEA;UAAjC;QAFD,MAKA;SACCzI,GAAG,CAACC,EAAJ,CAAO0B,aAAP,CAAqBgH,UAAU,CAACK,cAAX,EAArB,EAAkD,0BAAlD,EAA8E,CAC7E;WACCP,OAAO,EAAEA;UAFmE,CAA9E;;;;KAntBH;KAAA,2BA4tBC;OACC,IAAGxI,EAAE,CAACgJ,IAAN,EACA;SACClK,OAAO,CAACa,YAAR,GAAuB,IAAvB;SACAK,EAAE,CAACgJ,IAAH,CAAQC,SAAR,CAAkB;WACjBC,QAAQ,EAAE,aADO;WAEjBC,OAAO,EAAE,kBAFQ;WAGjBC,QAAQ,EAAE,kBAACtI,MAAD,EACV;aACChC,OAAO,CAAC6B,IAAR,CAAaG,MAAb;;UALF;;;;KAhuBH;KAAA,mCA4uBC;OACC8G,MAAM,CAACC,IAAP,CAAY,YAAZ,EAA0B,QAA1B;;;KA7uBF;KAAA,gCAivBC;OAAA,IADqBwB,MACrB,uEAD8B,CAC9B;OACC,OAAQ,IAAIrI,aAAJ,6BAA6B/B,QAAQ,CAACoK,MAAD,CAArC,OAAD,CAAoDlI,cAApD,CAAmE;SAACmI,MAAM,EAAE,GAAT;SAAcC,WAAW,EAAE;QAA9F,EAAoGlI,QAApG,EAAP;;;KAlvBF;KAAA,6BAsvBC;OACC,OAAO,IAAIjB,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EACnB;SACCxB,OAAO,CAACsC,UAAR,CAAmBtC,OAAO,CAAC0K,aAAR,EAAnB,EAA4C/I,IAA5C,CAAiD,UAACgJ,MAAD,EACjD;WACC,IAAMJ,MAAM,GAAGI,MAAM,CAACC,OAAP,GAAiBC,GAAjB,CAAqB,QAArB,CAAf;;WACA,IAAGN,MAAM,GAAG,CAAZ,EACA;aACCvK,OAAO,CAAC8K,cAAR,CAAuBP,MAAvB,EAA+B5I,IAA/B,CAAoC,UAACC,MAAD,EACpC;eACCL,OAAO,CAACK,MAAD,CAAP;cAFD,WAGS,UAACG,MAAD,EACT;eACCP,MAAM,CAACO,MAAD,CAAN;cALD;;UALF;QAFM,CAAP;;;KAvvBF;KAAA,+BA0wBuBwI,MA1wBvB,EA2wBC;OACC,OAAO,IAAIjJ,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EACnB;SACC,IAAMuJ,OAAO,GAAG,gCAAhB;SACA/K,OAAO,CAAC+D,QAAR,CAAiB;WAChBrB,EAAE,EAAEqI,OADY;WAEhBlI,KAAK,EAAE3B,EAAE,CAAC8C,OAAH,CAAW,0CAAX,CAFS;WAGhBlB,IAAI,EAAE5B,EAAE,CAAC8C,OAAH,CAAW,mCAAX;UAHP,EAIGM,IAJH;SAMA7C,gBAAI,CAACC,UAAL,CAAgB,8BAAhB,EAAgD;WAC/C6I,MAAM,EAAEA;UADT,EAEG5I,IAFH,CAEQ,UAACC,MAAD,EACR;WACC,IAAGA,MAAM,CAACE,MAAP,CAAcF,MAAd,CAAqBgD,IAAxB,EACA;aACCrD,OAAO,CAACK,MAAM,CAACE,MAAP,CAAcF,MAAd,CAAqBgD,IAAtB,CAAP;aACA,IAAI+C,SAAS,GAAG/F,MAAM,CAACE,MAAP,CAAcF,MAAd,CAAqBgD,IAArB,CAA0B+C,SAA1C;aACA,IAAM3E,QAAK,GAAGhD,OAAO,CAAC+D,QAAR,CAAiB;eAC9BrB,EAAE,EAAEqI,OAD0B;eAE9BlI,KAAK,EAAE3B,EAAE,CAAC8C,OAAH,CAAW,0CAAX,CAFuB;eAG9BlB,IAAI,EAAE5B,EAAE,CAAC8C,OAAH,CAAW,uCAAX,CAHwB;eAI9BjB,OAAO,EAAE,CACR,IAAI7B,EAAE,CAAC+C,iBAAP,CAAyB;iBACxBnB,IAAI,EAAG5B,EAAE,CAAC8C,OAAH,CAAW,6CAAX,CADiB;iBAExBR,SAAS,EAAG,iCAFY;iBAGxBU,MAAM,EAAG;mBACRC,KAAK,EAAG,iBACR;qBACCnE,OAAO,CAACgL,eAAR,CAAwBrD,SAAxB;qBACA3E,QAAK,CAACqB,KAAN;;;gBAPH,CADQ;cAJI,CAAd;aAkBArB,QAAK,CAACsB,IAAN;YAtBD,MAyBA;aACCtE,OAAO,CAAC+D,QAAR,CAAiB;eAChBrB,EAAE,EAAEqI,OADY;eAEhBlI,KAAK,EAAE3B,EAAE,CAAC8C,OAAH,CAAW,iCAAX;cAFR,EAICM,IAJD;aAKA9C,MAAM;;UAnCR,WAqCS,UAACyJ,KAAD,EACT;WACCjL,OAAO,CAAC+D,QAAR,CAAiB;aAChBrB,EAAE,EAAEqI,OADY;aAEhBlI,KAAK,EAAE3B,EAAE,CAAC8C,OAAH,CAAW,iCAAX,CAFS;aAGhBlB,IAAI,EAAEmI;YAHP,EAKC3G,IALD;WAMA9C,MAAM,CAACyJ,KAAD,CAAN;UA7CD;QATM,CAAP;;;KA5wBF;KAAA,oCAw0BC;OAAA,IADyBC,SACzB,uEADqC,KACrC;;OACC,IAAGlL,OAAO,CAACE,eAAR,GAA0B,CAA7B,EACA;SACC,IAAI+B,GAAG,GAAG,IAAIC,aAAJ,6BAA6BlC,OAAO,CAACE,eAArC,OAAV;SACA,IAAI8B,MAAM,GAAG;WACZmJ,YAAY,EAAE;UADf;;SAGA,IAAGD,SAAH,EACA;WACClJ,MAAM,CAACoJ,OAAP,GAAiB,GAAjB;UAFD,MAKA;WACCpJ,MAAM,CAACqJ,YAAP,GAAsB,GAAtB;;;SAEDpJ,GAAG,CAACI,cAAJ,CAAmBL,MAAnB;SACA8G,MAAM,CAACC,IAAP,CAAY9G,GAAG,CAACM,QAAJ,EAAZ,EAA4B,QAA5B;;;;KAx1BH;KAAA,+BA41BuBgC,KA51BvB,EA61BC;OACCvE,OAAO,CAACsL,UAAR,CAAmB/G,KAAnB,EAA0B,8BAA1B,EAA0D,cAA1D;;;KA91BF;KAAA,qCAi2B6BA,KAj2B7B,EAk2BC;OACCvE,OAAO,CAACsL,UAAR,CAAmB/G,KAAnB,EAA0B,+BAA1B,EAA2D,oBAA3D;;;KAn2BF;KAAA,qCAs2B6BA,KAt2B7B,EAs2BoCtC,GAt2BpC,EAu2BC;OACCA,GAAG,GAAGA,GAAG,IAAI,+BAAb;OACAjC,OAAO,CAACsL,UAAR,CAAmB/G,KAAnB,EAA0BtC,GAA1B,EAA+B,oBAA/B;;;KAz2BF;KAAA,gCA42BwBsC,KA52BxB,EA62BC;OACCvE,OAAO,CAACsL,UAAR,CAAmB/G,KAAnB,EAA0B,8BAA1B,EAA0D,aAA1D;;;KA92BF;KAAA,yCAi3BiCA,KAj3BjC,EAk3BC;OACCvE,OAAO,CAACsL,UAAR,CAAmB/G,KAAnB,EAA0B,8BAA1B,EAA0D,mBAA1D;;;KAn3BF;KAAA,gDAs3BwCA,KAt3BxC,EAu3BC;OACCvE,OAAO,CAACsL,UAAR,CAAmB/G,KAAnB,EAA0B,+BAA1B,EAA2D,oBAA3D;;;KAx3BF;KAAA,yCA23BiCA,KA33BjC,EA23BwCyD,IA33BxC,EA43BC;OACChI,OAAO,CAACsL,UAAR,CAAmB/G,KAAnB,EAA0B,0BAA0ByD,IAApD,EAA0D,oBAA1D;;;KA73BF;KAAA,gDAg4BwCzD,KAh4BxC,EAg4B+CyD,IAh4B/C,EAi4BC;OACChI,OAAO,CAACsL,UAAR,CAAmB/G,KAAnB,EAA0B,0BAA0ByD,IAApD,EAA0D,4BAA1D;;;KAl4BF;KAAA,2CAq4BmCzD,KAr4BnC,EAs4BC;OACCvE,OAAO,CAACsL,UAAR,CAAmB/G,KAAnB,EAA0B,+BAA1B,EAA2D,iBAA3D;;;KAv4BF;KAAA,uCA04B+BA,KA14B/B,EA24BC;OACCvE,OAAO,CAACsL,UAAR,CAAmB/G,KAAnB,EAA0B,+BAA1B,EAA2D,iBAA3D;;;KA54BF;KAAA,+CA+4BuCA,KA/4BvC,EAg5BC;OACCvE,OAAO,CAACsL,UAAR,CAAmB/G,KAAnB,EAA0B,+BAA1B,EAA2D,iBAA3D;;;KAj5BF;KAAA,iDAo5ByCA,KAp5BzC,EAq5BC;OACCvE,OAAO,CAACsL,UAAR,CAAmB/G,KAAnB,EAA0B,+BAA1B,EAA2D,iBAA3D;;;KAt5BF;KAAA,gDAy5BwCA,KAz5BxC,EA05BC;OACCvE,OAAO,CAACsL,UAAR,CAAmB/G,KAAnB,EAA0B,+BAA1B,EAA2D,iBAA3D;;;KA35BF;KAAA,qDA85B6CA,KA95B7C,EA+5BC;OACCvE,OAAO,CAACsL,UAAR,CAAmB/G,KAAnB,EAA0B,+BAA1B,EAA2D,iBAA3D;;;KAh6BF;KAAA,8BAm6BsBA,KAn6BtB,EAo6BC;OACCvE,OAAO,CAACsL,UAAR,CAAmB/G,KAAnB,EAA0B,+BAA1B,EAA2D,kBAA3D;;;KAr6BF;KAAA,8BAw6BsBA,KAx6BtB,EAy6BC;OACCvE,OAAO,CAACsL,UAAR,CAAmB/G,KAAnB,EAA0B,+BAA1B,EAA2D,yBAA3D;;;KA16BF;KAAA,kCA66B0BA,KA76B1B,EA86BC;OACCvE,OAAO,CAACsL,UAAR,CAAmB/G,KAAnB,EAA0B,+BAA1B,EAA2D,aAA3D;;;KA/6BF;KAAA,oCAk7B4BA,KAl7B5B,EAm7BC;OACCvE,OAAO,CAACsL,UAAR,CAAmB/G,KAAnB,EAA0B,+BAA1B,EAA2D,UAA3D;;;KAp7BF;KAAA,6CAu7BqCA,KAv7BrC,EAw7BC;OACCvE,OAAO,CAACsL,UAAR,CAAmB/G,KAAnB,EAA0B,+BAA1B,EAA2D,oBAA3D;;;KAz7BF;KAAA,4CA47BoCA,KA57BpC,EA67BC;OACCvE,OAAO,CAACsL,UAAR,CAAmB/G,KAAnB,EAA0B,+BAA1B,EAA2D,mBAA3D;;;KA97BF;KAAA,kCAi8B0BA,KAj8B1B,EAk8BC;OACCvE,OAAO,CAACsL,UAAR,CAAmB/G,KAAnB,EAA0B,8BAA1B,EAA0D,OAA1D;;;KAn8BF;KAAA,oCAs8B4BA,KAt8B5B,EAu8BC;OACCvE,OAAO,CAACsL,UAAR,CAAmB/G,KAAnB,EAA0B,8BAA1B,EAA0D,cAA1D;;;KAx8BF;KAAA,8CA28BsCA,KA38BtC,EA48BC;OACCvE,OAAO,CAACsL,UAAR,CAAmB/G,KAAnB,EAA0B,+BAA1B,EAA2D,wBAA3D;;;KA78BF;KAAA,6BAi9BC;OAAA,IADkBA,KAClB,uEAD0B,IAC1B;OAAA,IADgCtC,GAChC,uEADsC,EACtC;OAAA,IAD0CsJ,gBAC1C,uEAD6D,EAC7D;;OACC,IAAGhH,KAAH,EACA;SACCA,KAAK,CAACiH,cAAN;;;OAED,IAAGD,gBAAH,EACA;SACCvL,OAAO,CAAC6H,iBAAR,CAA0B;WACzBzF,cAAc,EAAE,qBADS;WAEzBqJ,OAAO,EAAEF;UAFV,EAGG5J,IAHH,CAGQ,YACR;WACC,IAAGV,GAAG,CAACC,EAAJ,CAAOwK,MAAV,EACA;aACCzK,GAAG,CAACC,EAAJ,CAAOwK,MAAP,CAAcpH,IAAd,CAAmBrC,GAAnB;;UAPF;QAFD,MAaK,IAAGhB,GAAG,CAACC,EAAJ,CAAOwK,MAAV,EACL;SACCzK,GAAG,CAACC,EAAJ,CAAOwK,MAAP,CAAcpH,IAAd,CAAmBrC,GAAnB;;;;KAr+BH;KAAA,iCAy+ByBsC,KAz+BzB,EA0+BC;OACC,IAAGA,KAAK,IAAIlE,cAAI,CAAC+E,UAAL,CAAgBb,KAAK,CAACiH,cAAtB,CAAZ,EACA;SACCjH,KAAK,CAACiH,cAAN;;;OAED,OAAOxL,OAAO,CAACsC,UAAR,CAAmB,2DAAnB,EAAgF;SAACE,KAAK,EAAE;QAAxF,CAAP;;;KA/+BF;KAAA,uCAk/B+B+B,KAl/B/B,EAk/BsCvC,MAl/BtC,EAm/BC;OAAA,IAD6C/B,OAC7C,uEADqD,EACrD;;OACC,IAAGsE,KAAK,IAAIlE,cAAI,CAAC+E,UAAL,CAAgBb,KAAK,CAACiH,cAAtB,CAAZ,EACA;SACCjH,KAAK,CAACiH,cAAN;;;OAGD,IAAG,CAACnL,cAAI,CAAC8B,aAAL,CAAmBH,MAAnB,CAAJ,EACA;SACCA,MAAM,GAAG,EAAT;;;OAGD,IAAIC,GAAG,GAAI,IAAIC,aAAJ,CAAQ,2DAAR,CAAD,CAAuEG,cAAvE,CAAsFL,MAAtF,EAA8FO,QAA9F,EAAV;OACA,OAAOvC,OAAO,CAACsC,UAAR,CAAmBL,GAAnB,EAAwBhC,OAAxB,CAAP;;;KA//BF;KAAA,yCAkgCiCsE,KAlgCjC,EAmgCC;OACC,IAAGA,KAAK,IAAIlE,cAAI,CAAC+E,UAAL,CAAgBb,KAAK,CAACiH,cAAtB,CAAZ,EACA;SACCjH,KAAK,CAACiH,cAAN;;;OAED,OAAOxL,OAAO,CAACsC,UAAR,CAAmB,mFAAnB,EAAwG;SAACE,KAAK,EAAE;QAAhH,CAAP;;;KAxgCF;KAAA,8CA2gCsC+B,KA3gCtC,EA4gCC;OACC,IAAGA,KAAK,IAAIlE,cAAI,CAAC+E,UAAL,CAAgBb,KAAK,CAACiH,cAAtB,CAAZ,EACA;SACCjH,KAAK,CAACiH,cAAN;;;OAED,OAAOxL,OAAO,CAACsC,UAAR,CAAmB,wFAAnB,EAA6G;SAACE,KAAK,EAAE;QAArH,CAAP;;;KAjhCF;KAAA,2CAohCmC+B,KAphCnC,EAqhCC;OACC,IAAIvC,MAAM,gCAAGhC,OAAH,EAthCCA,OAshCD,wCAAGA,OAAH,EAA2CuE,KAA3C,CAAV;;OAEA,IAAIA,KAAK,IAAIlE,cAAI,CAAC+E,UAAL,CAAgBb,KAAK,CAACiH,cAAtB,CAAb,EACA;SACCjH,KAAK,CAACiH,cAAN;;;OAGD,IAAI,CAACnL,cAAI,CAAC8B,aAAL,CAAmBH,MAAnB,CAAL,EACA;SACCA,MAAM,GAAG,EAAT;;;OAGD,IAAIC,GAAG,GAAI,IAAIC,aAAJ,CAAQ,2DAAR,CAAX;OAEAD,GAAG,CAACI,cAAJ,CAAmB;SAACsJ,aAAa,EAAE;QAAnC;OACA1J,GAAG,CAACI,cAAJ,CAAmBL,MAAnB;OAEA,OAAOhC,OAAO,CAACsC,UAAR,CAAmBL,GAAG,CAACM,QAAJ,EAAnB,EAAmC;SAACC,KAAK,EAAE;QAA3C,CAAP;;;KAviCF;KAAA,kCAimCC;OAAA,IADuBR,MACvB,uEADgC,EAChC;OACC,IAAIC,GAAG,GAAG,IAAIC,aAAJ,CAAQ,gBAAR,CAAV;;OACA,IAAG7B,cAAI,CAAC8B,aAAL,CAAmBH,MAAnB,CAAH,EACA;SACCC,GAAG,CAACI,cAAJ,CAAmBL,MAAnB;;;OAGD,IAAI4J,aAAa,GAAG5J,MAAM,CAAC6J,cAAP,CAAsB,eAAtB,IAAyC7J,MAAM,CAAC4J,aAAhD,GAAgE,EAApF;;OACA,IAAI,CAACA,aAAa,CAACC,cAAd,CAA6B,OAA7B,CAAL,EACA;SACCD,aAAa,CAACpJ,KAAd,GAAsB,IAAtB;;;OAGD,OAAO,IAAIlB,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EACnB;SACCxB,OAAO,CAACsC,UAAR,CAAmBL,GAAG,CAACM,QAAJ,EAAnB,EAAmCqJ,aAAnC,EAAkDjK,IAAlD,CAAuD,UAACgJ,MAAD,EACvD;WACCpJ,OAAO,CAACoJ,MAAM,CAACC,OAAP,EAAD,CAAP;UAFD,WAGS,UAAC7I,MAAD,EACT,EAJA;QAFM,CAAP;;;KA9mCF;KAAA,kCA0nC0BC,MA1nC1B,EA2nCC;OACC,OAAO,IAAIV,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EACnB;SACC,IAAG,CAACnB,cAAI,CAAC8B,aAAL,CAAmBH,MAAnB,CAAD,IAA+B,CAACA,MAAM,CAACI,cAA1C,EACA;WACCZ,MAAM,CAAC,cAAD,CAAN;;;SAEDQ,MAAM,mCAAOA,MAAP,GAAkB;WAAC8J,MAAM,EAAE,iCAAT;WAA4CC,MAAM,EAAE7K,EAAE,CAAC8K,aAAH;UAAtE,CAAN;SACA,IAAIC,OAAO,GAAG,IAAIC,cAAJ,EAAd;SACA,IAAIjK,GAAG,GAAG,IAAIC,aAAJ,CAAQ,gCAAR,CAAV;SACAD,GAAG,CAACI,cAAJ,CAAmBL,MAAnB;SACAiK,OAAO,CAAClD,IAAR,CAAa,KAAb,EAAoB9G,GAAG,CAACM,QAAJ,EAApB;;SACA0J,OAAO,CAACE,MAAR,GAAiB,YACjB;WACC5K,OAAO;UAFR;;SAIA0K,OAAO,CAACG,OAAR,GAAkB,YAClB;WACC5K,MAAM;UAFP;;SAIAyK,OAAO,CAACI,IAAR;QAnBM,CAAP;;;KA5nCF;KAAA,+BAopCC;OACC,OAAO,IAAI/K,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EACnB;SACC,IAAGxB,OAAO,CAACsM,SAAR,KAAsB,IAAzB,EACA;WACC/K,OAAO,CAACvB,OAAO,CAACsM,SAAT,CAAP;WACA;;;SAEDC,cAAI,CAACC,SAAL,CAAe,kCAAf,EAAmD;WAClDpK,cAAc,EAAE;UADjB,EAEGT,IAFH,CAEQ,UAAC8K,QAAD,EACR;WACCzM,OAAO,CAACsM,SAAR,GAAoBG,QAAQ,CAAC5D,IAAT,CAAcrB,MAAlC;WACAjG,OAAO,CAACkL,QAAQ,CAAC5D,IAAT,CAAcrB,MAAf,CAAP;UALD,WAMS,UAACiF,QAAD,EACT;WACCjL,MAAM,CAACiL,QAAQ,CAACC,MAAV,CAAN;UARD;QAPM,CAAP;;;KArpCF;KAAA,2BAyqCmBxH,MAzqCnB,EAyqC2ByH,QAzqC3B,EA0qCC;OAAA,IADoCC,OACpC,uEAD8C,IAC9C;OACC,OAAO,IAAItL,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EACnB;SACC,IAAG,CAACnB,cAAI,CAACwM,SAAL,CAAe3H,MAAf,CAAJ,EACA;WACC3D,OAAO,CAAC,IAAD,CAAP;;;SAED,IAAG,CAAClB,cAAI,CAAC8B,aAAL,CAAmBwK,QAAnB,CAAD,IAAiCA,QAAQ,CAACzD,MAAT,IAAmB,CAAvD,EACA;WACC3H,OAAO,CAAC,IAAD,CAAP;;;SAGDgL,cAAI,CAACC,SAAL,CAAe,gCAAf,EAAiD;WAChD3D,IAAI,EAAE;aACL3D,MAAM,EAAEA,MADH;aAELyH,QAAQ,EAAEA;YAHqC;WAKhDvK,cAAc,EAAE,qCALgC;WAMhD0K,aAAa,EAAE;aACdF,OAAO,EAAEA;;UAPX,EASGjL,IATH,CASQ,UAAC8K,QAAD,EACR;WACClL,OAAO,CAACkL,QAAQ,CAAC5D,IAAT,CAAckE,OAAf,CAAP;UAXD,WAYS,UAACN,QAAD,EACT;WACCjL,MAAM,CAACiL,QAAQ,CAACC,MAAV,CAAN;UAdD;QAXM,CAAP;;;GA3qCF;CAAA;;kCA0iCgCM,UAC/B;GACC,IAAMpL,MAAM,GAAG,EAAf;;GAEA,IAAIvB,cAAI,CAAC4M,cAAL,CAAoBD,QAApB,CAAJ,EACA;KACC,IAAIxF,MAAM,GAAGwF,QAAQ,CAACE,KAAT,CAAe,GAAf,CAAb;;KAEA,IACA;OACC,KAAK,IAAIC,GAAT,IAAgB3F,MAAhB,EACA;SACC,IAAI,CAACA,MAAM,CAACqE,cAAP,CAAsBsB,GAAtB,CAAL,EACA;WACC;;;SAGD,wBAAoB3F,MAAM,CAAC2F,GAAD,CAAN,CAAYD,KAAZ,CAAkB,GAAlB,CAApB;;aAAKE,IAAL;aAAW/F,KAAX;;SAEA,IAAIhH,cAAI,CAAC4M,cAAL,CAAoBG,IAApB,CAAJ,EACA;WACCxL,MAAM,CAACwL,IAAD,CAAN,GAAe/F,KAAf;;;MAbH,CAiBA,OAAOgG,CAAP,EAAU;;;GAGX,OAAOzL,MAAP;CACA;;0CAEsC2C,OACvC;GACC,IAAI+I,IAAI,GAAG,IAAX;;GACA,IAAIjN,cAAI,CAACkN,SAAL,CAAehJ,KAAK,CAACiJ,MAArB,CAAJ,EACA;KACCF,IAAI,GAAG/I,KAAK,CAACiJ,MAAb;IAFD,MAIK,IAAInN,cAAI,CAACkN,SAAL,CAAehJ,KAAK,CAACG,MAArB,CAAJ,EACL;KACC4I,IAAI,GAAG/I,KAAK,CAACG,MAAb;;;GAGD,IAAIrE,cAAI,CAACoN,QAAL,CAAcH,IAAd,CAAJ,EACA;KACC,IAAI7G,OAAO,GAAG6G,IAAI,CAAC7G,OAAL,GAAe6G,IAAI,CAAC7G,OAApB,GAA8B,EAA5C;KACA,IAAIuG,QAAQ,GAAGvG,OAAO,CAACoF,cAAR,CAAuB,yCAAvB,IAAoEpF,OAAO,CAACiH,uCAA5E,GAAsH,EAArI;KAEA,oCAAO,IAAP,EA1lCU1N,OA0lCV,gCAAO,IAAP,EAAoCgN,QAApC;;;GAGD,OAAO,IAAP;CACA;;6BA9lCWhN,sBAEO;6BAFPA,4BAGa;6BAHbA,wBAIS;6BAJTA,0BAKW;6BALXA,sBAMO;6BANPA,6BAOc;6BAPdA,4BAQa;6BARbA,yBASU;6BATVA,sCAUuB;6BAVvBA,yBAWU;6BAXVA,wBAYS;6BAZTA,sBAaO;6BAbPA,8BAsPe,UAASsN,IAAT,EAAe;GACzC,IAAGtN,OAAO,CAAC2N,cAAX,EACA;KACC3N,OAAO,CAAC2N,cAAR,CAAuB5D,OAAvB;KACA/J,OAAO,CAAC2N,cAAR,GAAyB,IAAzB;;KACA,IAAG3N,OAAO,CAAC4N,mBAAR,GAA8B,CAAjC,EACA;OACCC,YAAY,CAAC7N,OAAO,CAAC4N,mBAAT,CAAZ;OACA5N,OAAO,CAAC4N,mBAAR,GAA8B,CAA9B;;;KAED,IAAG5N,OAAO,CAAC8N,sBAAR,GAAiC,CAApC,EACA;OACCD,YAAY,CAAC7N,OAAO,CAAC8N,sBAAT,CAAZ;OACA9N,OAAO,CAAC8N,sBAAR,GAAiC,CAAjC;;;;GAIF9N,OAAO,CAAC2N,cAAR,GAAyB,IAAIzM,EAAE,CAACoC,WAAP,CAAmB,6BAAnB,EAAkDgK,IAAlD,EAAwD;KAChF9J,SAAS,EAAE,6BADqE;KAEhFuK,QAAQ,EAAE,IAFsE;KAGhF5K,OAAO,EAAEjC,EAAE,CAAC8C,OAAH,CAAW,sCAAX,CAHuE;KAIhFT,MAAM,EAAE;IAJgB,CAAzB;GAOAvD,OAAO,CAAC2N,cAAR,CAAuBrJ,IAAvB;GAEAtE,OAAO,CAAC4N,mBAAR,GAA8BI,UAAU,CAAC,YACzC;KACC9M,EAAE,CAAC+M,IAAH,CAAQ/M,EAAE,CAAClB,OAAO,CAAC2N,cAAR,CAAuBO,aAAxB,CAAV;KACAlO,OAAO,CAAC4N,mBAAR,GAA8B,CAA9B;IAHuC,EAIrC,IAJqC,CAAxC;GAMA5N,OAAO,CAAC8N,sBAAR,GAAiCE,UAAU,CAAC,YAC5C;KACChO,OAAO,CAAC2N,cAAR,CAAuB5D,OAAvB;KACA/J,OAAO,CAAC2N,cAAR,GAAyB,IAAzB;KACA3N,OAAO,CAAC8N,sBAAR,GAAiC,CAAjC;IAJ0C,EAKxC,IALwC,CAA3C;CAMA;;;;;;;;"}