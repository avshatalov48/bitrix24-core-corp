(function(){"use strict";BX.namespace("BX.Salescenter");BX.Salescenter.Orders={gridId:"CRM_ORDER_LIST_V12",sessionId:0};BX.Salescenter.Orders.init=function(e){if(e.sessionId>0){BX.Salescenter.Orders.sessionId=e.sessionId}if(e.gridId){BX.Salescenter.Orders.gridId=e.gridId}this.isPaymentsLimitReached=e.isPaymentsLimitReached===true;BX.Salescenter.Orders.initEvents()};BX.Salescenter.Orders.getGrid=function(){var e=BX.Main.gridManager.getById(BX.Salescenter.Orders.gridId);if(e){return e.instance}return false};BX.Salescenter.Orders.sendGridOrders=function(){if(BX.Salescenter.Orders.isPaymentsLimitReached){BX.Salescenter.Orders.showFeaturePopup()}if(BX.Salescenter.Orders.sessionId<=0){return}var e=BX.Salescenter.Orders.getGrid();if(!e){return}var r=e.getRows().getSelectedIds();if(!r||r.length===0){return}BX.ajax.runAction("salescenter.order.sendOrders",{analyticsLabel:"salescenterSendOrders",data:{orderIds:r,options:{sessionId:BX.Salescenter.Orders.sessionId}}}).then(function(e){var r=e.data.orders;if(r&&r.length>0){if(BX.SidePanel){var s=BX.SidePanel.Instance.getSliderByWindow(window);if(s){var n=BX.SidePanel.Instance.getPreviousSlider(s);if(n){n.destroy()}s.destroy()}}for(var t in r){if(r.hasOwnProperty(t)){BX.UI.Notification.Center.notify({content:BX.message("SALESCENTER_ORDER_SENT_NOTIFICATION").replace("#ORDER_ID#",r[t])})}}}})};BX.Salescenter.Orders.highlightOrder=function(e){if(e>0){var r=BX.Salescenter.Orders.getGrid();if(r){var s=r.getRows().getById(e);if(s){s.select()}}}};BX.Salescenter.Orders.initEvents=function(){top.BX.addCustomEvent(window,"salescenter-order-create",function(e){var r=BX.Salescenter.Orders.getGrid();if(r){r.reloadTable("GET",{},function(){BX.Salescenter.Orders.highlightOrder(e.orderId)})}})};BX.Salescenter.Orders.showFeaturePopup=function(){B24.licenseInfoPopup.show("salescenterPaymentsLimit",BX.message("SALESCENTER_ORDERS_LIMITS_TITLE"),BX.message("SALESCENTER_ORDERS_LIMITS_MESSAGE"),true)}})(window);
//# sourceMappingURL=script.map.js