(function(){"use strict";BX.namespace("BX.Salescenter");BX.Salescenter.Payments={gridId:"CRM_ORDER_PAYMENT_LIST_V12",sessionId:0};BX.Salescenter.Payments.init=function(e){if(e.sessionId>0){BX.Salescenter.Payments.sessionId=e.sessionId}if(e.gridId){BX.Salescenter.Payments.gridId=e.gridId}this.isPaymentsLimitReached=e.isPaymentsLimitReached===true};BX.Salescenter.Payments.getGrid=function(){var e=BX.Main.gridManager.getById(BX.Salescenter.Payments.gridId);if(e){return e.instance}return false};BX.Salescenter.Payments.sendGridPayments=function(){if(BX.Salescenter.Payments.isPaymentsLimitReached){BX.Salescenter.Payments.showFeaturePopup()}if(BX.Salescenter.Payments.sessionId<=0){return}var e=BX.Salescenter.Payments.getGrid();if(!e){return}var n=e.getRows().getSelectedIds();if(!n||n.length===0){return}BX.ajax.runAction("salescenter.order.sendPayments",{analyticsLabel:"salescenterSendPayments",data:{paymentIds:n,options:{sessionId:BX.Salescenter.Payments.sessionId}}}).then(function(e){var n=e.data.payments;if(n&&n.length>0){if(BX.SidePanel){var s=BX.SidePanel.Instance.getSliderByWindow(window);if(s){var t=BX.SidePanel.Instance.getPreviousSlider(s);if(t){t.destroy()}s.destroy()}}for(var a in n){if(n.hasOwnProperty(a)){BX.UI.Notification.Center.notify({content:BX.message("SPL_TEMPLETE_SALESCENTER_PAYMENT_SENT_NOTIFICATION").replace("#PAYMENT_ID#",n[a])})}}}})};BX.Salescenter.Payments.highlightOrder=function(e){if(e>0){var n=BX.Salescenter.Payments.getGrid();if(n){var s=n.getRows().getById(e);if(s){s.select()}}}};BX.Salescenter.Payments.showFeaturePopup=function(){B24.licenseInfoPopup.show("salescenterPaymentsLimit",BX.message("SPL_ORDERS_LIMITS_TITLE"),BX.message("SPL_ORDERS_LIMITS_MESSAGE"),true)}})(window);
//# sourceMappingURL=script.map.js