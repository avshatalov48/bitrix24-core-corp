(function(t){"use strict";function e(t,e){var r=typeof Symbol!=="undefined"&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=n(t))||e&&t&&typeof t.length==="number"){if(r)t=r;var i=0;var o=function t(){};return{s:o,n:function e(){if(i>=t.length)return{done:true};return{done:false,value:t[i++]}},e:function t(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s=true,a=false,u;return{s:function e(){r=r.call(t)},n:function t(){var e=r.next();s=e.done;return e},e:function t(e){a=true;u=e},f:function t(){try{if(!s&&r["return"]!=null)r["return"]()}finally{if(a)throw u}}}}function n(t,e){if(!t)return;if(typeof t==="string")return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor)n=t.constructor.name;if(n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(t,e)}function r(t,e){if(e==null||e>t.length)e=t.length;for(var n=0,r=new Array(e);n<e;n++){r[n]=t[n]}return r}(function(){var t=BX.namespace("BX.Salescenter.DeliveryInstallation");if(t.Wizard){return}function n(){}n.prototype.init=function(t){this.id=t.id;this.code=t.code;this.form=BX(t.formId);this.saveButton=BX(t.saveButtonId);this.confirmDeleteMessage=t.confirmDeleteMessage;this.errorMessageNode=BX(t.errorMessageId);this.buttonWaitClass="ui-btn-wait";BX.bind(this.saveButton,"click",this.onSave.bind(this));BX.bind(this.form,"submit",this.onSubmit.bind(this))};n.prototype.onSave=function(){if(BX.hasClass(this.saveButton,this.buttonWaitClass)){BX.removeClass(this.saveButton,this.buttonWaitClass)}};n.prototype["delete"]=function(t){t.preventDefault();var e=t.target;if(this.id>0&&confirm(this.confirmDeleteMessage)){BX.ajax.runComponentAction("bitrix:salescenter.delivery.wizard","delete",{data:{id:this.id,code:this.code}}).then(function(){e.classList.remove("ui-btn-wait");BX.SidePanel.Instance.close()}.bind(this),function(t){e.classList.remove("ui-btn-wait");this.showError(t.errors)}.bind(this))}else{setTimeout((function(){return BX.removeClass(e,"ui-btn-wait")}),100)}};n.prototype.onSubmit=function(t){var n=this;var r={};var i=new FormData(this.form);var o=e(i.entries()),s;try{for(o.s();!(s=o.n()).done;){var a=s.value;r[a[0]]=a[1]}}catch(t){o.e(t)}finally{o.f()}this.saveButton.classList.add("ui-btn-wait");var u=function t(){n.saveButton.classList.remove("ui-btn-wait")};var c=i.has("id")?"update":"install";BX.ajax.runComponentAction("bitrix:salescenter.delivery.wizard",c,{json:r}).then((function(t){u();BX.SidePanel.Instance.close()}))["catch"]((function(t){u();n.showError(t.errors)}));t.preventDefault()};n.prototype.showError=function(t){var e="";t.forEach((function(t){e+=t.message+"<br>"}));if(this.errorMessageNode&&e){this.errorMessageNode.parentNode.style.display="block";this.errorMessageNode.innerHTML=e}};t.Wizard=new n})()})(this.window=this.window||{});
//# sourceMappingURL=script.map.js