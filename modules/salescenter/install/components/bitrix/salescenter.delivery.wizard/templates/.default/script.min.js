(function(t){"use strict";function e(t){if(typeof Symbol==="undefined"||t[Symbol.iterator]==null){if(Array.isArray(t)||(t=n(t))){var e=0;var r=function t(){};return{s:r,n:function n(){if(e>=t.length)return{done:true};return{done:false,value:t[e++]}},e:function t(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=true,s=false,a;return{s:function e(){i=t[Symbol.iterator]()},n:function t(){var e=i.next();o=e.done;return e},e:function t(e){s=true;a=e},f:function t(){try{if(!o&&i.return!=null)i.return()}finally{if(s)throw a}}}}function n(t,e){if(!t)return;if(typeof t==="string")return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor)n=t.constructor.name;if(n==="Map"||n==="Set")return Array.from(n);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(t,e)}function r(t,e){if(e==null||e>t.length)e=t.length;for(var n=0,r=new Array(e);n<e;n++){r[n]=t[n]}return r}(function(){var t=BX.namespace("BX.Salescenter.DeliveryInstallation");if(t.Wizard){return}function n(){}n.prototype.init=function(t){this.id=t.id;this.code=t.code;this.form=BX(t.formId);this.saveButton=BX(t.saveButtonId);this.confirmDeleteMessage=t.confirmDeleteMessage;this.errorMessageNode=BX(t.errorMessageId);this.buttonWaitClass="ui-btn-wait";BX.bind(this.saveButton,"click",this.onSave.bind(this));BX.bind(this.form,"submit",this.onSubmit.bind(this))};n.prototype.onSave=function(){if(BX.hasClass(this.saveButton,this.buttonWaitClass)){BX.removeClass(this.saveButton,this.buttonWaitClass)}};n.prototype.delete=function(t){t.preventDefault();var e=t.target;if(this.id>0&&confirm(this.confirmDeleteMessage)){BX.ajax.runComponentAction("bitrix:salescenter.delivery.wizard","delete",{data:{id:this.id,code:this.code}}).then(function(){e.classList.remove("ui-btn-wait");BX.SidePanel.Instance.close()}.bind(this),function(t){e.classList.remove("ui-btn-wait");this.showError(t.errors)}.bind(this))}else{setTimeout(function(){return BX.removeClass(e,"ui-btn-wait")},100)}};n.prototype.onSubmit=function(t){var n=this;var r={};var i=new FormData(this.form);var o=e(i.entries()),s;try{for(o.s();!(s=o.n()).done;){var a=s.value;r[a[0]]=a[1]}}catch(t){o.e(t)}finally{o.f()}this.saveButton.classList.add("ui-btn-wait");var u=function t(){n.saveButton.classList.remove("ui-btn-wait")};var c=i.has("id")?"update":"install";BX.ajax.runComponentAction("bitrix:salescenter.delivery.wizard",c,{json:r}).then(function(t){u();BX.SidePanel.Instance.close()}).catch(function(t){u();n.showError(t.errors)});t.preventDefault()};n.prototype.showError=function(t){var e="";t.forEach(function(t){e+=t.message+"<br>"});if(this.errorMessageNode&&e){this.errorMessageNode.parentNode.style.display="block";this.errorMessageNode.innerHTML=e}};t.Wizard=new n})()})(this.window=this.window||{});
//# sourceMappingURL=script.map.js