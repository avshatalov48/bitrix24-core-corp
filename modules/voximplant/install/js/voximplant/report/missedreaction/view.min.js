(function(){"use strict";BX.namespace("BX.Voximplant.Report.Dashboard.Content");BX.Voximplant.Report.Dashboard.Content.MissedReaction=function(){BX.Report.VisualConstructor.Widget.Content.AmCharts4.apply(this,arguments)};BX.Voximplant.Report.Dashboard.Content.MissedReaction.prototype={__proto__:BX.Report.VisualConstructor.Widget.Content.AmCharts4.prototype,constructor:BX.Voximplant.Report.Dashboard.Content.MissedReaction,onAfterChartCreate:function(){function e(e){e.background.disabled=true;e.children.clear();var t=e.createChild(am4core.Image);t.href="data:image/svg+xml;charset=US-ASCII,%3Csvg%20viewBox%3D%220%200%2036%2036%22%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%3E%3Cdefs%3E%3Cfilter%20x%3D%22-10.9%25%22%20y%3D%22-7.8%25%22%20width%3D%22121.9%25%22%20height%3D%22121.9%25%22%20filterUnits%3D%22objectBoundingBox%22%20id%3D%22a%22%3E%3CfeOffset%20dy%3D%221%22%20in%3D%22SourceAlpha%22%20result%3D%22shadowOffsetOuter1%22/%3E%3CfeGaussianBlur%20stdDeviation%3D%221%22%20in%3D%22shadowOffsetOuter1%22%20result%3D%22shadowBlurOuter1%22/%3E%3CfeColorMatrix%20values%3D%220%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200.21131993%200%22%20in%3D%22shadowBlurOuter1%22/%3E%3C/filter%3E%3Ccircle%20id%3D%22b%22%20cx%3D%2216%22%20cy%3D%2216%22%20r%3D%2216%22/%3E%3C/defs%3E%3Cg%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%3E%3Cg%20transform%3D%22translate%282%201%29%22%3E%3Cuse%20fill%3D%22%23000%22%20filter%3D%22url%28%23a%29%22%20xlink%3Ahref%3D%22%23b%22/%3E%3Cuse%20fill%3D%22%23FFF%22%20xlink%3Ahref%3D%22%23b%22/%3E%3C/g%3E%3Cpath%20fill%3D%22%23C5C5C5%22%20d%3D%22M15.521%2011h1.5v12h-1.5zM19%2011h1.5v12H19z%22/%3E%3C/g%3E%3C/svg%3E";t.width=32;t.height=32;t.align="center";t.valign="middle"}if(this.chart.data.length>5){var t=new am4charts.XYChartScrollbar;t.id="scrollbar-box";t.height=70;this.chartWrapper.style.paddingTop="0px";this.chartWrapper.style.marginTop="-10px";t.dy=-14;t.series.push(this.chart.series._values[0]);t.scrollbarChart.series.getIndex(0).filters.clear();t.scrollbarChart.xAxes.getIndex(0).renderer.grid.template.disabled=true;t.scrollbarChart.xAxes.getIndex(0).renderer.labels.template.disabled=true;t.background.fill="#fda505";t.background.fillOpacity=.12;t.thumb.background.states.getKey("hover").properties.fill=am4core.color("#fda505");t.end=5/this.chart.data.length;this.chart.scrollbarX=t;var r=t.thumb.createChild(am4core.Rectangle);r.width=am4core.percent(100);r.height=2;r.dy=3;r.fill="#fda505";r.align="center";r.valign="bottom";e(this.chart.scrollbarX.startGrip);e(this.chart.scrollbarX.endGrip)}var a=this.chart.series.getIndex(0);var i=a.columns.template;a.mainContainer.mask=undefined;var l=i.createChild(am4charts.CircleBullet);l.circle.radius=30;l.valign="bottom";l.align="center";l.isMeasured=true;l.mouseEnabled=false;l.verticalCenter="bottom";l.interactionsEnabled=false;l.dy=-40;l.visible=false;l.states.create("hover");var n=l.createChild(am4core.Circle);n.adapter.add("radius",function(e,t){var r=t.parent;return r.circle.pixelRadius+10});var o=l.createChild(am4core.Image);o.width=60;o.height=60;o.horizontalCenter="middle";o.verticalCenter="middle";o.propertyFields.href="bullet";o.adapter.add("mask",function(e,t){var r=t.parent;return r.circle});i.events.on("transitionended",this.onColumnTransitionEnded.bind(this));i.events.on("over",this.onColumnOver.bind(this));i.events.on("out",this.onColumnOut.bind(this));i.adapter.add("tooltipHTML",this.renderBalloon.bind(this))},onColumnTransitionEnded:function(e){var t=e.target.maxHeight;var r=e.target.children.getIndex(1);if(t===0){return}if(t>60){r.visible=true}else{r.visible=false;e.target.column.cornerRadius(10,10,3,3)}},onColumnOver:function(e){var t=e.target.children.getIndex(1);var r=t.states.getKey("hover");if(t.parent.pixelHeight>70){r.properties.dy=-t.parent.pixelHeight+30;t.isHover=true}},onColumnOut:function(e){var t=e.target.children.getIndex(1);t.isHover=false},renderBalloon:function(e,t){var r=t.dataItem.dataContext.balloon;var a=r.count;var i=r.compare;var l='<div class="telephony-report-missed-reaction-modal" style="border-color:'+t.fill.hex+'">'+'<div class="telephony-report-missed-reaction-modal-title">'+BX.util.htmlspecialchars(t.dataItem.dataContext.groupingField)+"</div>"+'<div class="telephony-report-missed-reaction-modal-subtitle-secondary">'+BX.message("TELEPHONY_REPORT_MISSED_REACTION_MISSED")+"<br>"+"</div>"+'<div class="telephony-report-missed-reaction-modal-main">'+'<div class="telephony-report-missed-reaction-modal-content">'+'<div class="telephony-report-missed-reaction-modal-value">'+a["value_1"]+"</div>"+"</div>"+"</div>"+'<div class="telephony-report-missed-reaction-modal-subtitle-secondary">'+BX.message("TELEPHONY_REPORT_MISSED_REACTION_UNANSWERED")+"<br>"+"</div>"+'<div class="telephony-report-missed-reaction-modal-main">'+'<div class="telephony-report-missed-reaction-modal-content">'+'<div class="telephony-report-missed-reaction-modal-value">'+a["value_2"]+"</div>"+"</div>"+"</div>";if(a["value_3"]){l+='<div class="telephony-report-missed-reaction-modal-subtitle-secondary">'+BX.message("TELEPHONY_REPORT_MISSED_REACTION_AVG_RESPONSE_TIME")+"<br>"+"</div>"+'<div class="telephony-report-missed-reaction-modal-main">'+'<div class="telephony-report-missed-reaction-modal-content">'+'<div class="telephony-report-missed-reaction-modal-value">'+a["value_3"]+"</div>"+this.renderPercentBlock(i["value_3"],i["value_3_formatted"])+"</div>"+"</div>"}l+="</div>";return l},renderPercentBlock:function(e,t){if(e===null||e==0){return'<div style="color:grey;">&mdash;</div>'}var r="telephony-report-missed-reaction-modal-percent-value";if(e>0){r+=" red";t="+"+t}else{r+=" green";t="-"+t}return'<div class="'+r+'">'+t+"</div>"},handleItemClick:function(e){if(!e.target.hasOwnProperty("valueUrl")||!BX.type.isNotEmptyString(e.target.valueUrl)){return}if(BX.SidePanel){BX.SidePanel.Instance.open(e.target.valueUrl,{cacheable:false,loader:"voximplant:grid-loader"})}else{window.open(e.target.valueUrl)}}}})();
//# sourceMappingURL=view.map.js