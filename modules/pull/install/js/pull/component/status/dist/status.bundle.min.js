(function(t,e,s){"use strict";e.BitrixVue.component("bx-pull-component-status",{props:{canReconnect:{default:false}},data:function t(){return{status:s.PullClient.PullStatus.Online,showed:null}},created:function t(){var s=this;this.isMac=navigator.userAgent.toLowerCase().includes("macintosh");this.setStatusTimeout=null;this.hideTimeout=null;this.pullUnSubscribe=function(){};if(this.$Bitrix.PullClient.get()){this.subscribe()}this.$Bitrix.eventEmitter.subscribe(e.BitrixVue.events.pullClientChange,function(){return s.subscribe()});window.component=this},beforeDestroy:function t(){this.pullUnSubscribe()},methods:{subscribe:function t(){var e=this;this.pullUnSubscribe();this.pullUnSubscribe=this.$Bitrix.PullClient.get().subscribe({type:s.PullClient.SubscriptionType.Status,callback:function t(s){return e.statusChange(s.status)}})},reconnect:function t(){if(this.canReconnect){this.$emit("reconnect")}else{location.reload()}},statusChange:function t(e){var i=this;clearTimeout(this.setStatusTimeout);if(this.status===e){return false}var n=[s.PullClient.PullStatus.Online,s.PullClient.PullStatus.Offline,s.PullClient.PullStatus.Connecting];if(n.indexOf(e)<0){return false}var l=500;if(e===s.PullClient.PullStatus.Connecting){l=5e3}else if(e===s.PullClient.PullStatus.Offline){l=2e3}this.setStatusTimeout=setTimeout(function(){i.status=e;i.showed=true},l);return true},isMobile:function t(){return navigator.userAgent.toLowerCase().includes("android")||navigator.userAgent.toLowerCase().includes("webos")||navigator.userAgent.toLowerCase().includes("iphone")||navigator.userAgent.toLowerCase().includes("ipad")||navigator.userAgent.toLowerCase().includes("ipod")||navigator.userAgent.toLowerCase().includes("blackberry")||navigator.userAgent.toLowerCase().includes("windows phone")}},watch:{status:function t(){var e=this;clearTimeout(this.hideTimeout);if(this.status===s.PullClient.PullStatus.Online){clearTimeout(this.hideTimeout);this.hideTimeout=setTimeout(function(){return e.showed=false},4e3)}}},computed:{connectionClass:function t(){var e="";if(this.showed===true){e="bx-pull-status-show"}else if(this.showed===false){e="bx-pull-status-hide"}if(this.status===s.PullClient.PullStatus.Online){e+=" bx-pull-status-online"}else if(this.status===s.PullClient.PullStatus.Offline){e+=" bx-pull-status-offline"}else if(this.status===s.PullClient.PullStatus.Connecting){e+=" bx-pull-status-connecting"}return e},connectionText:function t(){var e="";if(this.status===s.PullClient.PullStatus.Online){e=this.localize.BX_PULL_STATUS_ONLINE}else if(this.status===s.PullClient.PullStatus.Offline){e=this.localize.BX_PULL_STATUS_OFFLINE}else if(this.status===s.PullClient.PullStatus.Connecting){e=this.localize.BX_PULL_STATUS_CONNECTING}return e},button:function t(){var e="";var s="";if(this.canReconnect){s=this.localize.BX_PULL_STATUS_BUTTON_RECONNECT}else{e=this.isMac?"&#8984;+R":"Ctrl+R";s=this.localize.BX_PULL_STATUS_BUTTON_RELOAD}return{title:s,key:e}},localize:function t(){return e.BitrixVue.getFilteredPhrases("BX_PULL_STATUS_",this)}},template:'\n\t\t<div v-if="!isMobile()" :class="[\'bx-pull-status\', connectionClass]">\n\t\t\t<div class="bx-pull-status-wrap">\n\t\t\t\t<span class="bx-pull-status-text">{{connectionText}}</span>\n\t\t\t\t<span class="bx-pull-status-button" @click="reconnect">\n\t\t\t\t\t<span class="bx-pull-status-button-title">{{button.title}}</span>\n\t\t\t\t\t<span class="bx-pull-status-button-key" v-html="button.key"></span>\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t</div>\n\t'})})(this.window=this.window||{},BX,BX);
//# sourceMappingURL=status.bundle.map.js