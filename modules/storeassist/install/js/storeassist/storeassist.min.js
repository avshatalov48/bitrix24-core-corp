BX.namespace("BX.Storeassist.Admin");BX.Storeassist.Admin={showDocumentation:function(e){if(!e)return;BX.PopupWindowManager.create("storeassistDoc",null,{autoHide:false,offsetLeft:0,offsetTop:0,overlay:false,draggable:{restrict:true},closeByEsc:true,contentColor:"white",contentNoPaddings:true,closeIcon:{right:"12px",top:"10px"},titleBar:{content:BX.create("span",{html:'<a href="'+e+'" target=_blank style="color:grey;">'+BX.message("STOREAS_OPEN_NEW_TAB")+'</a>&nbsp;&nbsp;<a href="javascript:void(0)" onclick="BX.PopupWindowManager.getCurrentPopup().close();" style="color:grey;">'+BX.message("STOREAS_CLOSE")+"</a>",style:{display:"block",padding:"14px 41px","text-align":"right","font-size":"14px"}})},content:"<div class='bx-storas-waiter'><iframe onload='BX.removeClass(this.parentNode, \"bx-storas-waiter\")' src='"+e+"?video=small' width='757px' height='700px' border='0' frameborder='0'></iframe></div>",events:{onPopupClose:function(){this.destroy()}}}).show()},toggleStep:function(e){if(!e)return;var t=document.querySelector('[data-role="step'+e+'"]');var s=document.querySelector('[data-role="container'+e+'"]');var n=document.querySelector('[data-role="toggle'+e+'"]');if(BX.hasClass(t,"close")){if(n)n.innerHTML=BX.message("STOREAS_HIDE");BX.removeClass(t,"close");BX.addClass(t,"open");s.style.opacity=0;s.style.display="block";s.style.padding=0;s.style.margin=0;s.style.height="";var i=s.offsetHeight;s.style.height=0;s.style.opacity="";s.style.display="";s.style.padding="";s.style.margin="";new BX.easing({duration:600,start:{height:0},finish:{height:i},transition:BX.easing.transitions.linear,step:function(e){s.style.height=e.height+"px"},complete:function(){}}).animate();BX.userOptions.save("storeassist","step_toggle",e,"Y")}else if(BX.hasClass(t,"open")){if(n)n.innerHTML=BX.message("STOREAS_SHOW");new BX.easing({duration:600,start:{height:s.offsetHeight},finish:{height:0},transition:BX.easing.transitions.linear,step:function(e){s.style.height=e.height+"px"},complete:function(){BX.removeClass(t,"open");BX.addClass(t,"close")}}).animate();BX.userOptions.save("storeassist","step_toggle",e,"N")}},setOption:function(e,t){if(!e)return;t=t=="Y"?"Y":"N";BX.ajax({method:"POST",dataType:"json",url:"/bitrix/tools/storeassist.php",data:{pageId:e,status:t,action:"setOption",sessid:BX.bitrix_sessid()},onsuccess:function(e){if(e.success=="Y")location.reload()}})},percentMoveInit:function(e,t){if(!e||!t)return;this.percentRuleSlider=e;this.currentPercent=t;var s=this.percentRuleSlider.parentNode.parentNode.parentNode;this.percentStatuses=BX.findChildren(s,{className:"adm-s-thermometer-block-status"},true);this.currentStatus=BX.findChild(s,{className:"active"},true,false);BX.bind(this.percentRuleSlider,"mousedown",BX.proxy(function(e){this.movePercentSlider(e)},this))},getPageX:function(e){e=e||window.event;var t=null;if(e.pageX!=null){t=e.pageX}else if(e.clientX!=null){var s=document.documentElement;var n=document.body;t=e.clientX+(s.scrollLeft||n&&n.scrollLeft||0);t-=s.clientLeft||0}return t},getXCoord:function(e){var t=e.getBoundingClientRect();var s=document.body;var n=document.documentElement;var i=window.pageXOffset||n.scrollLeft||s.scrollLeft;var r=n.clientLeft||s.clientLeft||0;var o=t.left+i-r;return Math.round(o)},movePercentSlider:function(e){this.percentRuleSlider.ondragstart=function(){return false};document.onmousemove=BX.proxy(function(e){var t=this.getPageX(e);var s=this.getXCoord(this.percentRuleSlider.parentNode);var n=t-s;if(n<0){n=0}var i=this.percentRuleSlider.parentNode.offsetWidth;if(n>i){n=i}this.newLeft=n*100/i;this.percentRuleSlider.style.left=this.newLeft+"%";BX.firstChild(this.percentRuleSlider).innerHTML=Math.round(this.newLeft)+"%";var r="red";if(this.newLeft>18&&this.newLeft<=36)r="orange";else if(this.newLeft>36&&this.newLeft<=54)r="yellow";else if(this.newLeft>54&&this.newLeft<=72)r="green";else if(this.newLeft>72&&this.newLeft<=90)r="lightgreen";else if(this.newLeft>90)r="blue";for(var o=0;o<this.percentStatuses.length;o++){if(BX.hasClass(this.percentStatuses[o],r))BX.addClass(this.percentStatuses[o],"active");else BX.removeClass(this.percentStatuses[o],"active")}},this);document.onmouseup=BX.proxy(function(){document.onmousemove=document.onmouseup=null;BX.addClass(this.percentRuleSlider,"animate");BX.firstChild(this.percentRuleSlider).innerHTML=this.currentPercent+"%";for(var e=0;e<this.percentStatuses.length;e++){BX.removeClass(this.percentStatuses[e],"active")}BX.addClass(this.currentStatus,"active");this.percentRuleSlider.style.left=this.currentPercent+"%";setTimeout(BX.proxy(function(){BX.removeClass(this.percentRuleSlider,"animate")},this),550)},this)}};
//# sourceMappingURL=storeassist.map.js