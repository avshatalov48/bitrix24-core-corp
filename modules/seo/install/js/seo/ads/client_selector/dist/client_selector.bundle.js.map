{"version":3,"file":"client_selector.bundle.js","sources":["../src/client_selector.js"],"sourcesContent":["import { Dom, Event, Loc, Tag, Type } from \"main.core\";\nimport { Loader } from \"main.loader\";\nimport \"./client_selector.css\";\n\nexport class ClientSelector\n{\n\tconstructor(container, params)\n\t{\n\t\tthis.container = container;\n\t\tthis.canAddItems = !!params.canAddItems;\n\t\tthis.canUnSelectItem = !!params.canUnSelectItem;\n\t\tthis.onNewItemCallback = params.events && Type.isFunction(params.events.onNewItem) ? params.events.onNewItem : null;\n\t\tthis.onSelectItemCallback = params.events && Type.isFunction(params.events.onSelectItem) ? params.events.onSelectItem : null;\n\t\tthis.onUnSelectItemCallback = params.events && Type.isFunction(params.events.onUnSelectItem) ? params.events.onUnSelectItem : null;\n\t\tthis.onRemoveItemCallback = params.events && Type.isFunction(params.events.onRemoveItem) ? params.events.onRemoveItem : null;\n\t\tthis.init();\n\t\tthis.setSelected(params.selected);\n\t\tthis.setItems(params.items ? params.items : {});\n\t\tthis.enabled = true;\n\t\tthis.loader = new Loader({size: 20});\n\t}\n\n\tsetSelected(item)\n\t{\n\t\tthis.selected = item;\n\t\tthis.closeMenu();\n\t\tthis.updateClientHtml();\n\t}\n\tsetItems(items)\n\t{\n\t\tthis.closeMenu();\n\t\tthis.items = items;\n\t}\n\n\tinit()\n\t{\n\t\tDom.append(this.getHtml(), this.container);\n\t\tthis.updateClientHtml();\n\t\tEvent.bind(this.container, 'click', this.onContainerClick.bind(this));\n\t}\n\n\tenable()\n\t{\n\t\tthis.enabled = true;\n\t\tlet selector = this.getSelectorNode();\n\t\tselector ? selector.classList.remove('seo-ads-client-selector-loading') : false;\n\t\tthis.loader.hide();\n\t}\n\n\tdisable()\n\t{\n\t\tthis.enabled = false;\n\t\tlet selector = this.getSelectorNode();\n\t\tselector ? selector.classList.add('seo-ads-client-selector-loading') : false;\n\t\tthis.loader.hide();\n\t\tif (selector)\n\t\t{\n\t\t\tselector.classList.add('seo-ads-client-selector-loading');\n\t\t\tlet loader = selector.getElementsByClassName('seo-ads-client-selector-loader')[0];\n\t\t\tthis.loader.show(loader);\n\t\t}\n\t}\n\n\tgetHtml()\n\t{\n\t\treturn Tag.render`\n\t\t<div class=\"seo-ads-client\">\n\t\t\t<div class=\"seo-ads-client-selector\">\n\t\t\t\t<div class=\"seo-ads-client-selector-avatar\" data-role=\"user-avatar\"></div>\n\t\t\t\t<div class=\"seo-ads-client-selector-user\">\n\t\t\t\t\t<a target=\"_top\" data-role=\"user-name user-link\" class=\"seo-ads-client-selector-user-link\" title=\"\"></a>\n\t\t\t\t</div>\n\t\t\t\t<span class=\"seo-ads-client-selector-arrow\"></span>\n\t\t\t\t<span class=\"seo-ads-client-selector-loader\"></span>\n\t\t\t</div>\n\t\t\t<div class=\"seo-ads-client-note\">\n\t\t\t${Loc.getMessage('SEO_ADS_CLIENT_NOTE')}\n\t\t\t</div>\n\t\t</div>\n\t\t`;\n\t}\n\n\tgetMenuItemHtml(item)\n\t{\n\t\tlet html =  Tag.render`<div>\n\t\t\t${item.PICTURE ? \n\t\t\t\tTag.render`<div class=\"seo-ads-client-menu-avatar\" style=\"background-image: url('${item.PICTURE}');\"></div>` :\n\t\t\t\tTag.render`<div class=\"seo-ads-client-menu-avatar\"></div>`}\n\t\t\t<span class=\"seo-ads-client-menu-popup-user\">${item.NAME}</span>\n\t\t\t<span class=\"seo-ads-client-menu-popup-shutoff\" data-role=\"client-remove\" data-client-id=\"${item.CLIENT_ID}\">${Loc.getMessage('SEO_ADS_CLIENT_DISCONNECT')}</span>\n\t\t</div>`;\n\t\treturn html.innerHTML;\n\t}\n\n\tgetRemoveConfirmPopupHtml(item)\n\t{\n\t\treturn Tag.render`<div class=\"seo-ads-client-popup\">\n\t\t\t<div class=\"seo-ads-client-popup-text\">\n\t\t\t${Loc.getMessage('SEO_ADS_CLIENT_REMOVE').replace('#NAME#', item.NAME)}\n\t\t\t</div>\n\t\t</div>`;\n\t}\n\n\tupdateClientHtml()\n\t{\n\t\tlet userAvatar = '';\n\t\tlet userName = '';\n\t\tlet userLink = '';\n\t\tlet empty = false;\n\t\tif (this.selected)\n\t\t{\n\t\t\tuserAvatar = this.selected.hasOwnProperty('PICTURE') ? this.selected.PICTURE : '';\n\t\t\tuserName = this.selected.hasOwnProperty('NAME') ? this.selected.NAME : Loc.getMessage('SEO_ADS_CLIENT_SELECTOR_UNTITLED');\n\t\t\tuserLink = this.selected.hasOwnProperty('LINK') ? this.selected.LINK : '';\n\t\t}\n\t\telse\n\t\t{\n\t\t\tuserName = Loc.getMessage('SEO_ADS_CLIENT_SELECTOR_EMPTY')\n\t\t\tempty = true;\n\t\t}\n\t\tlet selector = this.getSelectorNode();\n\n\t\tif (empty)\n\t\t{\n\t\t\tselector ? selector.classList.add('seo-ads-client-selector-empty') : false;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tselector ? selector.classList.remove('seo-ads-client-selector-empty') : false;\n\t\t}\n\t\tlet avatarNode = this.container.querySelector('[data-role=\"user-avatar\"]');\n\t\tlet nameNode = this.container.querySelector('[data-role*=\"user-name\"]');\n\t\tlet linkNode = this.container.querySelector('[data-role*=\"user-link\"]');\n\n\t\tif (userAvatar)\n\t\t\tavatarNode.style.backgroundImage = \"url('\"+userAvatar+\"')\";\n\t\telse\n\t\t\tavatarNode.style.removeProperty('background-image');\n\n\t\tnameNode.textContent = userName;\n\n\t\tif (userLink)\n\t\t\tlinkNode.setAttribute('href', userLink);\n\t\telse\n\t\t\tlinkNode.removeAttribute('href');\n\t}\n\n\tonSelectItem(item)\n\t{\n\t\tthis.setSelected(item);\n\t\tif (Type.isFunction(this.onSelectItemCallback))\n\t\t\tthis.onSelectItemCallback(item);\n\t}\n\n\tonUnSelectItem()\n\t{\n\t\tthis.setSelected(null);\n\t\tif (Type.isFunction(this.onUnSelectItemCallback))\n\t\t{\n\t\t\tthis.onUnSelectItemCallback();\n\t\t}\n\t}\n\n\tonRemoveItem(item)\n\t{\n\t\tif (Type.isFunction(this.onRemoveItemCallback))\n\t\t\tthis.onRemoveItemCallback(item);\n\t}\n\n\tonContainerClick()\n\t{\n\t\tif (!this.enabled)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tlet menuItems = [];\n\n\t\tfor (let item of this.items)\n\t\t{\n\t\t\tmenuItems.push({\n\t\t\t\thtml: this.getMenuItemHtml(item),\n\t\t\t\tclassName : \"seo-ads-client-menu menu-popup-no-icon\",\n\t\t\t\tonclick: this.onSelectItem.bind(this, item)\n\t\t\t});\n\t\t}\n\n\t\tif (this.canUnSelectItem)\n\t\t{\n\t\t\tmenuItems.push(\n\t\t\t\t{delimiter: true},\n\t\t\t\t{\n\t\t\t\t\ttext: Loc.getMessage('SEO_ADS_CLIENT_NO_ACCOUNT'),\n\t\t\t\t\tonclick: this.onUnSelectItem.bind(this)\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t\tif (this.canAddItems)\n\t\t{\n\t\t\tmenuItems.push(\n\t\t\t\t{delimiter: true},\n\t\t\t\t{\n\t\t\t\t\ttext: Loc.getMessage('SEO_ADS_CLIENT_ADD'),\n\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\tthis.closeMenu();\n\t\t\t\t\t\tif (Type.isFunction(this.onNewItemCallback))\n\t\t\t\t\t\t\tthis.onNewItemCallback();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t}\n\t\tlet selector = this.getSelectorNode();\n\n\t\tBX.PopupMenu.show(\n\t\t\t\"clientsMenuDropdown\",\n\t\t\tthis.container,\n\t\t\tmenuItems,\n\t\t\t{\n\t\t\t\toffsetTop: 0,\n\t\t\t\toffsetLeft: 42,\n\t\t\t\tangle: true,\n\t\t\t\tevents: {\n\t\t\t\t\tonPopupClose: () => {\n\t\t\t\t\t\tselector ? selector.classList.remove('seo-ads-client-selector-active') : false;\n\t\t\t\t\t\tBX.PopupMenu.destroy('clientsMenuDropdown');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t\tselector ? selector.classList.add('seo-ads-client-selector-active') : false;\n\n\t\tlet removeClientLinks = BX.PopupMenu.currentItem.popupWindow.getContentContainer().querySelectorAll('[data-role=\"client-remove\"]');\n\t\tfor (let removeClientLink of removeClientLinks) {\n\t\t\tEvent.bind(removeClientLink, \"click\", (event) => {\n\t\t\t\tevent.stopPropagation();\n\t\t\t\tlet clientId = BX.data(event.target, \"client-id\");\n\t\t\t\tthis.closeMenu();\n\t\t\t\tfor (let item of this.items) {\n\t\t\t\t\tif (item.CLIENT_ID == clientId) {\n\t\t\t\t\t\tthis.confirmRemoveItem(item);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tconfirmRemoveItem(item)\n\t{\n\t\tlet confirmPopup = new BX.PopupWindow({\n\t\t\tcontent: this.getRemoveConfirmPopupHtml(item),\n\t\t\tautoHide: true,\n\t\t\tcacheable: false,\n\t\t\tcloseIcon: true,\n\t\t\tcloseByEsc: true,\n\t\t\tbuttons: [\n\t\t\t\tnew BX.UI.Button({\n\t\t\t\t\ttext : Loc.getMessage('SEO_ADS_CLIENT_DISCONNECT'),\n\t\t\t\t\tcolor: BX.UI.Button.Color.DANGER,\n\t\t\t\t\tonclick: (event) => {\n\t\t\t\t\t\tconfirmPopup.close();\n\t\t\t\t\t\tthis.onRemoveItem(item);\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t\tnew BX.UI.Button({\n\t\t\t\t\ttext : Loc.getMessage('SEO_ADS_CLIENT_BTN_CANCEL'),\n\t\t\t\t\tcolor: BX.UI.Button.Color.LINK,\n\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\tconfirmPopup.close();\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t]\n\t\t});\n\t\tconfirmPopup.show();\n\t}\n\n\tcloseMenu()\n\t{\n\t\tif (BX.PopupMenu.currentItem) {\n\t\t\tBX.PopupMenu.currentItem.close();\n\t\t}\n\t}\n\n\tdestroy()\n\t{\n\t\tif (BX.PopupMenu.currentItem) {\n\t\t\tBX.PopupMenu.currentItem.close();\n\t\t}\n\t\tthis.container.innerHTML = '';\n\t}\n\n\tgetSelectorNode()\n\t{\n\t\tlet selector = this.container.getElementsByClassName('seo-ads-client-selector');\n\t\tif (selector)\n\t\t\tselector = selector[0];\n\n\t\treturn selector;\n\t}\n}"],"names":["ClientSelector","container","params","canAddItems","canUnSelectItem","onNewItemCallback","events","Type","isFunction","onNewItem","onSelectItemCallback","onSelectItem","onUnSelectItemCallback","onUnSelectItem","onRemoveItemCallback","onRemoveItem","init","setSelected","selected","setItems","items","enabled","loader","Loader","size","item","closeMenu","updateClientHtml","Dom","append","getHtml","Event","bind","onContainerClick","selector","getSelectorNode","classList","remove","hide","add","getElementsByClassName","show","Tag","render","Loc","getMessage","html","PICTURE","NAME","CLIENT_ID","innerHTML","replace","userAvatar","userName","userLink","empty","hasOwnProperty","LINK","avatarNode","querySelector","nameNode","linkNode","style","backgroundImage","removeProperty","textContent","setAttribute","removeAttribute","menuItems","push","getMenuItemHtml","className","onclick","delimiter","text","BX","PopupMenu","offsetTop","offsetLeft","angle","onPopupClose","destroy","removeClientLinks","currentItem","popupWindow","getContentContainer","querySelectorAll","removeClientLink","event","stopPropagation","clientId","data","target","confirmRemoveItem","confirmPopup","PopupWindow","content","getRemoveConfirmPopupHtml","autoHide","cacheable","closeIcon","closeByEsc","buttons","UI","Button","color","Color","DANGER","close"],"mappings":"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"}