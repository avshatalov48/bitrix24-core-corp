{"version":3,"file":"seoadbuilder.bundle.js","sources":["../src/seoaccount.js","../src/helper.js","../src/seoadbuilder.js","../src/seopostselector.js","../src/seoaudience.js","../src/seocrmaudience.js","../src/pageconfiguration.js"],"sourcesContent":["import { Helper } from './helper';\nimport { type AccountFields } from './types/account';\nimport {LoginFactory} from \"seo.ads.login\";\n\nexport class SeoAccount\n{\n\t_helper: Helper;\n\tconstructor(options: AccountFields): SeoAccount\n\t{\n\t\tthis.clientNode = options.clientNode;\n\t\tthis.avatarNode = options.avatarNode;\n\t\tthis.accountNode = options.accountNode;\n\t\tthis.instagramAccountNode = options.instagramAccountNode;\n\t\tthis.linkNode = options.linkNode;\n\t\tthis.provider = options.provider;\n\t\tthis.componentName = options.componentName;\n\t\tthis.signedParameters = options.signedParameters;\n\t\tthis.uiNodes = options.uiNodes;\n\t\tthis._helper = Helper.getInstance(this, []);\n\t\tthis.loaded = [];\n\n\t\tthis.clientSelector = new BX.Seo.Ads.ClientSelector(options.clientBlock, {\n\t\t\tselected: this.provider.PROFILE,\n\t\t\titems: this.provider.CLIENTS,\n\t\t\tcanAddItems: true,\n\t\t\tevents: {\n\t\t\t\tonNewItem: () => {\n\t\t\t\t\tLoginFactory.getLoginObject(this.provider).login();\n\t\t\t\t},\n\t\t\t\tonSelectItem: item => {\n\t\t\t\t\tthis.setProfile(item);\n\t\t\t\t},\n\t\t\t\tonRemoveItem: item => {\n\t\t\t\t\tthis.logout(item.CLIENT_ID);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn this;\n\t}\n\n\tlistenSeoAuth()\n\t{\n\t\tBX.addCustomEvent(\n\t\t\twindow,\n\t\t\t'seo-client-auth-result',\n\t\t\tBX.proxy(this.onSeoAuth, this)\n\t\t);\n\t}\n\n\tonSeoAuth(eventData)\n\t{\n\t\teventData.reload = false;\n\t\tthis.getProvider(eventData.clientId);\n\t}\n\n\tlogout(clientId)\n\t{\n\t\tconst analyticsLabel =\n\t\t\t!(this.provider.TYPE === \"facebook\" || this.provider.TYPE === \"instagram\")\n\t\t\t\t? {}\n\t\t\t\t: {\n\t\t\t\t\tconnect: \"FBE\",\n\t\t\t\t\taction: \"disconnect\",\n\t\t\t\t\ttype: \"disconnect\"\n\t\t\t\t}\n\t\t;\n\n\t\tthis._helper.showBlock('loading');\n\t\tthis._helper.request(\n\t\t\t'logout',\n\t\t\t{logoutClientId: clientId},\n\t\t\tprovider =>\n\t\t\t\t{\n\t\t\t\t\tthis.provider = provider;\n\t\t\t\t\tif (this.clientSelector)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.clientSelector.setSelected(this.provider.PROFILE);\n\t\t\t\t\t\tthis.clientSelector.setItems(this.provider.CLIENTS);\n\t\t\t\t\t}\n\t\t\t\t\tthis._helper.setProvider(provider);\n\t\t\t\t\tthis._helper.showBlockByAuth();\n\t\t\t\t},\n\t\t\tanalyticsLabel\n\t\t);\n\t}\n\n\tgetProvider(clientId)\n\t{\n\t\tthis.showBlock('loading');\n\t\tthis.request('getProvider', {}, provider => {\n\t\t\tthis.provider = provider;\n\n\t\t\tif (this.clientSelector)\n\t\t\t{\n\t\t\t\tif (!this.provider.PROFILE ||\n\t\t\t\t\t(clientId && clientId !== this.provider.PROFILE.CLIENT_ID)\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\t// set PROFILE equal to clientId or first record from CLIENTS:\n\t\t\t\t\tfor (let i = 0; i < this.provider.CLIENTS.length; i++)\n\t\t\t\t\t{\n\t\t\t\t\t\tlet client = this.provider.CLIENTS[i];\n\n\t\t\t\t\t\tif (!clientId || clientId.toString() === client.CLIENT_ID.toString())\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.setProfile(client);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.clientSelector.setSelected(this.provider.PROFILE);\n\t\t\t\tthis.clientSelector.setItems(this.provider.CLIENTS);\n\t\t\t}\n\t\t\tthis.showBlockByAuth();\n\t\t});\n\t}\n\n\tloadAccounts(type)\n\t{\n\t\t// this.loader.forAccount(true);\n\t\tif (this.clientSelector)\n\t\t{\n\t\t\tthis.clientSelector.disable();\n\t\t}\n\n\t\tthis._helper.request('getAccounts', {}, data => {\n\t\t\t\tif (this.clientSelector)\n\t\t\t\t{\n\t\t\t\t\tthis.clientSelector.enable();\n\t\t\t\t}\n\n\t\t\t\tthis.uiNodes.accountNotice.ad.style.display = 'none';\n\t\t\t\tif (!data.length)\n\t\t\t\t{\n\t\t\t\t\tthis.uiNodes.accountNotice.ad.style.display = 'block';\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst dropDownData = data.map(accountData => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tcaption: BX.util.htmlspecialchars(accountData.name),\n\t\t\t\t\t\tvalue: accountData.id,\n\t\t\t\t\t\tselected: accountData.id === this.accountId,\n\t\t\t\t\t\tcurrency: accountData.currency\n\t\t\t\t\t};\n\t\t\t\t}, this);\n\n\t\t\t\tthis._helper.fillDropDownControl(this.accountNode, dropDownData);\n\t\t\t\tif (dropDownData.length > 0)\n\t\t\t\t{\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tBX.fireEvent(this.accountNode, 'change');\n\t\t\t\t\t}, 150);\n\t\t\t\t}\n\t\t\t\tthis.accountNode.disabled = false\n\n\t\t\t}\n\t\t);\n\t}\n\n\tloadInstagramAccounts(type)\n\t{\n\t\tif (this.clientSelector)\n\t\t{\n\t\t\tthis.clientSelector.disable();\n\t\t}\n\n\t\tthis._helper.request('getInstagramAccounts', {}, data => {\n\t\t\t\tif (this.clientSelector)\n\t\t\t\t{\n\t\t\t\t\tthis.clientSelector.enable();\n\t\t\t\t}\n\n\t\t\t\tthis.uiNodes.accountNotice.instagram.style.display = 'none';\n\t\t\t\tif (!data.length)\n\t\t\t\t{\n\t\t\t\t\tthis.uiNodes.accountNotice.instagram.style.display = 'block';\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst dropDownData = data.map(accountData => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tcaption: BX.util.htmlspecialchars(accountData.name),\n\t\t\t\t\t\tvalue: accountData.id,\n\t\t\t\t\t\tpageId: accountData.page_id,\n\t\t\t\t\t\tactorId: accountData.actor_id\n\t\t\t\t\t};\n\t\t\t\t}, this);\n\n\t\t\t\tthis._helper.fillDropDownControl(this.instagramAccountNode, dropDownData);\n\t\t\t\tif (dropDownData.length > 0)\n\t\t\t\t{\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tBX.fireEvent(this.instagramAccountNode, 'change');\n\t\t\t\t\t}, 150);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\n\t\t\t\t}\n\n\t\t\t\tthis.instagramAccountNode.disabled = false;\n\t\t\t}\n\t\t);\n\t}\n\n\tloadSettings()\n\t{\n\t\tthis.instagramAccountNode.disabled  = true;\n\t\tthis.accountNode.disabled  = true;\n\n\t\tconst type = this.provider.TYPE;\n\t\tconst isSupportAccount = this.provider.IS_SUPPORT_ACCOUNT;\n\n\t\tif (!this.provider.PROFILE)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this.loaded.includes(type))\n\t\t{\n\t\t\tthis.loaded.push(type);\n\t\t}\n\n\t\tif (this.accountNode && isSupportAccount)\n\t\t{\n\t\t\tthis.loadAccounts();\n\t\t\tthis.loadInstagramAccounts();\n\t\t}\n\t}\n\n\tsetProfile(item)\n\t{\n\t\tthis.clientId = item && item.CLIENT_ID ? item.CLIENT_ID : null;\n\t\tthis.provider.PROFILE = item;\n\t\tthis.accountId = null;\n\t\tthis.pageId = null;\n\n\t\tif(this.clientSelector.selected)\n\t\t{\n\t\t\tthis._helper.showBlockMain();\n\t\t}\n\n\t\tthis.clientSelector.setSelected(item);\n\t}\n}","import { PopupManager } from 'main.popup';\nimport { Button } from 'ui.buttons';\nimport { SeoAccount } from './seoaccount';\nimport { Loc, Tag, Type } from \"main.core\";\n\nexport class Helper\n{\n\t_instance: Helper;\n\n\tconstructor(seoAccount: SeoAccount): Helper\n\t{\n\t\tthis.provider = seoAccount.provider;\n\t\tthis.clientId = seoAccount.clientId;\n\t\tthis.clientSelector = seoAccount.clientSelector;\n\t\tthis.clientNode = seoAccount.clientNode;\n\t\tthis.avatarNode = seoAccount.avatarNode;\n\t\tthis.linkNode = seoAccount.linkNode;\n\t\tthis.seoAccount = seoAccount;\n\t\tthis.signedParameters = seoAccount.signedParameters;\n\t\tthis.containerNode = BX('crm-ads-new-campaign');\n\n\t\tthis.mess = {\n\t\t\terrorAction: Loc.getMessage('UI_HELPER_ERROR_MSG'),\n\t\t\tdlgBtnClose: Loc.getMessage('UI_HELPER_BUTTON_CLOSE')\n\n\t\t}\n\n\t\treturn this;\n\t}\n\n\n\tsetProvider(value)\n\t{\n\t\tthis.provider = value;\n\t}\n\n\tstatic getCreated(): Helper\n\t{\n\t\tif(this._instance === undefined)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\t\treturn this._instance\n\t}\n\n\tstatic getInstance(seoAccount: SeoAccount, signedParameters): Helper\n\t{\n\t\tif(this._instance === undefined)\n\t\t{\n\t\t\tthis._instance = new Helper(seoAccount, signedParameters)\n\t\t}\n\n\t\treturn this._instance;\n\t}\n\n\trequest(action, requestData, callback, analytics)\n\t{\n\t\trequestData.action = action;\n\t\trequestData.type = this.seoAccount.provider.TYPE;\n\t\trequestData.clientId = this.seoAccount.clientId;\n\n\t\tthis.sendActionRequest(\n\t\t\taction,\n\t\t\trequestData,\n\t\t\t(response) => this.onResponse(response, callback),\n\t\t\tnull,\n\t\t\tanalytics || {}\n\t\t);\n\t}\n\n\tonResponse(response, callback)\n\t{\n\t\tif (!response.error)\n\t\t{\n\t\t\tcallback.apply(this, [response.data]);\n\t\t}\n\t}\n\n\tsendActionRequest(action, data, callbackSuccess, callbackFailure, analytics)\n\t{\n\t\tcallbackSuccess = callbackSuccess || null;\n\t\tcallbackFailure = callbackFailure || BX.proxy(this.showErrorPopup, this);\n\t\tdata = data || {};\n\t\tanalytics = analytics || {};\n\n\t\tBX.ajax.runComponentAction(\n\t\t\tthis.seoAccount.componentName,\n\t\t\taction,\n\t\t\t{\n\t\t\t\tmode: 'class',\n\t\t\t\tsignedParameters: this.signedParameters,\n\t\t\t\tdata: data,\n\t\t\t\tanalyticsLabel: analytics\n\t\t\t})\n\t\t.then(\n\t\t\tresponse => {\n\t\t\t\tconst data = response.data || {};\n\t\t\t\tif (data.error)\n\t\t\t\t{\n\t\t\t\t\tcallbackFailure.apply(this, [data]);\n\t\t\t\t}\n\t\t\t\telse if (callbackSuccess)\n\t\t\t\t{\n\t\t\t\t\tcallbackSuccess.apply(this, [data]);\n\t\t\t\t}\n\t\t\t},\n\t\t\t() => {\n\t\t\t\tconst data = { 'error': true, 'text': '' };\n\t\t\t\tcallbackFailure.apply(this, [data]);\n\t\t\t}\n\t\t);\n\t}\n\n\tshowErrorPopup(data)\n\t{\n\t\tconsole.log(data);\n\t\tconst text = data.text || this.mess.errorAction;\n\n\t\tconst popup = PopupManager.create({\n\t\t\t\tid: 'crm_ads_rtg_error',\n\t\t\t\tautoHide: true,\n\t\t\t\tlightShadow: true,\n\t\t\t\tcloseByEsc: true,\n\t\t\t\toverlay: { backgroundColor: 'black', opacity: 500 },\n\t\t\t\tevents: {\n\t\t\t\t\t'onPopupClose': this.onErrorPopupClose.bind(this)\n\t\t\t\t},\n\t\t\t\tbuttons: [\n\t\t\t\t\tnew Button({\n\t\t\t\t\t\ttext: 'close' || this.mess.dlgBtnClose,\n\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\tclick: function() {\n\t\t\t\t\t\t\t\tpopup.close();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t],\n\t\t\t}\n\t\t);\n\n\t\tpopup.setContent( `<span class=\"crm-ads-rtg-warning-popup-alert\">${text}</span>`)\n\n\t\tpopup.show();\n\t}\n\n\tonErrorPopupClose()\n\t{\n\t\tif (this.clientSelector)\n\t\t{\n\t\t\tthis.clientSelector.enable();\n\t\t}\n\t}\n\n\n\tshowBlock(blockCodes)\n\t{\n\t\tblockCodes = Type.isArray(blockCodes) ? blockCodes : [blockCodes];\n\t\tconst attributeBlock = 'data-bx-ads-block';\n\t\tconst blockNodes = [...this.containerNode.querySelectorAll('[' + attributeBlock + ']')];\n\t\tblockNodes.forEach(blockNode => {\n\t\t\tconst code = blockNode.getAttribute(attributeBlock);\n\t\t\tconst isShow = blockCodes.includes(code);\n\t\t\tblockNode.style.display = isShow ? (blockNode.dataset.flex?'flex':'block') : 'none';\n\t\t}, this);\n\t}\n\n\tshowBlockRefresh()\n\t{\n\t\tthis.showBlock(['auth', 'refresh']);\n\t}\n\n\tshowBlockLogin()\n\t{\n\t\tthis.showBlock('login');\n\n\t\tconst btn = BX('seo-ads-login-btn');\n\t\tif (btn && this.provider && this.provider.AUTH_URL)\n\t\t{\n\t\t\tbtn.setAttribute(\n\t\t\t\t'onclick',\n\t\t\t\t'BX.util.popup(\\'' + this.provider.AUTH_URL + '\\', 800, 600);'\n\t\t\t);\n\t\t}\n\t\tif (this.clientNode)\n\t\t{\n\t\t\tthis.clientNode.value = \"\";\n\t\t}\n\t}\n\n\tshowBlockMain()\n\t{\n\t\tif (this.avatarNode)\n\t\t{\n\t\t\tthis.avatarNode.style['background-image'] = 'url(' + this.provider.PROFILE.PICTURE + ')';\n\t\t}\n\t\tif (this.nameNode)\n\t\t{\n\t\t\tthis.nameNode.innerText = this.provider.PROFILE.NAME;\n\t\t}\n\t\tif (this.linkNode)\n\t\t{\n\t\t\tif (this.provider.PROFILE.LINK)\n\t\t\t{\n\t\t\t\tthis.linkNode.setAttribute('href', this.provider.PROFILE.LINK);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.linkNode.removeAttribute('href');\n\t\t\t}\n\t\t}\n\t\tif (this.clientNode)\n\t\t{\n\t\t\tthis.clientNode.value =\n\t\t\t\tthis.provider.PROFILE && this.provider.PROFILE.CLIENT_ID ?\n\t\t\t\t\tthis.provider.PROFILE.CLIENT_ID :\n\t\t\t\t\t\"\";\n\t\t}\n\n\t\tthis.showBlock(['auth', 'main']);\n\n\t\tthis.seoAccount.loadSettings();\n\t}\n\n\n\tshowBlockByAuth()\n\t{\n\t\tif (this.provider.HAS_AUTH)\n\t\t{\n\t\t\tthis.showBlockMain();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.showBlockLogin();\n\t\t}\n\t}\n\n\tfillDropDownControl(node, items)\n\t{\n\t\titems = items || [];\n\t\tnode.innerHTML = '';\n\t\titems.forEach(item => {\n\t\t\tif (!item || !item.caption)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst option =\n\t\t\t\tTag.render`<option value='${item.value}' selected='${!!item.selected}'>${item.caption}</option>`;\n\n\t\t\tif(item.currency)\n\t\t\t{\n\t\t\t\toption.dataset.currency = item.currency;\n\t\t\t}\n\n\t\t\tif(item.pageId)\n\t\t\t{\n\t\t\t\toption.dataset.pageId = item.pageId;\n\t\t\t}\n\n\t\t\tif(item.actorId)\n\t\t\t{\n\t\t\t\toption.dataset.actorId = item.actorId;\n\t\t\t}\n\n\t\t\tnode.appendChild(option);\n\t\t});\n\t}\n}","import {SeoAccount} from \"./seoaccount\";\nimport {ProductSelector} from 'catalog.product-selector';\nimport {Event, Loc, Tag, Text} from \"main.core\";\nimport {EventEmitter} from 'main.core.events';\nimport { type AdBuilderOptions } from './types/adbuilderoptions';\nimport { TagSelector } from 'ui.entity-selector';\n\nexport class SeoAdBuilder\n{\n\t_instance: SeoAdBuilder;\n\tproductSelector: ProductSelector;\n\t_DEFAULT_CURRENCY = 'RUB';\n\n\t_STAGES = {\n\t\taccountSelected: 1,\n\t\tpostSelected: 2,\n\t\tpageSelected: 3,\n\t\taudienceSelected: 4,\n\t\tbudgetSelected: 5,\n\t\ttoModeration: 6\n\t};\n\n\tconstructor(options: AdBuilderOptions)\n\t{\n\t\tif (this._instance)\n\t\t{\n\t\t\treturn this._instance;\n\t\t}\n\n\t\tthis.optionSelectedClass = 'crm-ads-new-campaign-item-option--selected';\n\t\tthis.containerId = options.containerId;\n\t\tthis.provider = options.provider;\n\t\tthis.context = options.context;\n\t\tthis.onRequest = options.onRequest;\n\t\tthis.componentName = options.componentName;\n\t\tthis.signedParameters = options.signedParameters;\n\t\tthis.postListUrl = options.postListUrl;\n\t\tthis.audienceUrl = options.audienceUrl;\n\t\tthis.crmAudienceUrl = options.crmAudienceUrl;\n\t\tthis.pageConfigurationUrl = options.pageConfigurationUrl;\n\t\tthis.mess = options.mess;\n\t\tthis.type = options.type;\n\t\tthis.iBlockId = options.iBlockId;\n\t\tthis.basePriceId = options.basePriceId;\n\t\tthis.storeExists = options.storeExists;\n\t\tthis.isCloud = options.isCloud || false;\n\n\t\tthis.clientId = options.clientId;\n\t\tthis.accountId = options.accountId;\n\t\tthis.baseCurrency = options.baseCurrency;\n\t\tthis.arrows = document.querySelectorAll(\".crm-ads-new-campaign-item-arrow\");\n\n\t\tthis.price = [];\n\t\tthis.price[this._DEFAULT_CURRENCY] = [];\n\t\tthis.price[this._DEFAULT_CURRENCY]['recommended'] = { duration: 3, value: 100 };\n\t\tthis.price[this._DEFAULT_CURRENCY]['verified'] = { duration: 3, value: 200 };\n\t\tthis.price[this._DEFAULT_CURRENCY]['boost'] = { duration: 3, value: 300 };\n\t\tthis.price[this._DEFAULT_CURRENCY]['confident'] = { duration: 5, value: 500 };\n\n\t\tthis.price['USD'] = [];\n\t\tthis.price['USD']['recommended'] = { duration: 3, value: 50 };\n\t\tthis.price['USD']['verified'] = { duration: 3, value: 100 };\n\t\tthis.price['USD']['boost'] = { duration: 3, value: 150 };\n\t\tthis.price['USD']['confident'] = { duration: 5, value: 200 };\n\n\t\tthis.price['EUR'] = [];\n\t\tthis.price['EUR']['recommended'] = { duration: 3, value: 50 };\n\t\tthis.price['EUR']['verified'] = { duration: 3, value: 100 };\n\t\tthis.price['EUR']['boost'] = { duration: 3, value: 150 };\n\t\tthis.price['EUR']['confident'] = { duration: 5, value: 200 };\n\n\t\tthis.completedStages = {};\n\t\tthis.selectedRegions = {};\n\n\t\tthis.loader = {\n\t\t\tinit: caller => {\n\t\t\t\tthis.caller = caller;\n\t\t\t},\n\n\t\t\tchange: (loaderNode, inputNode, isShow) => {\n\t\t\t\tloaderNode.style.display = isShow ? '' : 'none';\n\t\t\t\tif (inputNode)\n\t\t\t\t{\n\t\t\t\t\tinputNode.disabled = (!inputNode.options.length === 0 || isShow) ? false : true;\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tthis.init();\n\t}\n\n\tinit()\n\t{\n\t\tthis._instance = this;\n\t\tthis.initiateUINodes();\n\t\tthis.initiateAutoAudienceMode();\n\n\n\t\tfor (let i = this._STAGES.accountSelected; i <= this._STAGES.toModeration; i++)\n\t\t{\n\t\t\tthis.deActivateStage(i);\n\t\t}\n\n\t\tthis.initiateAccounts();\n\t\tthis.activateStage(this._STAGES.audienceSelected);\n\n\t\tthis.initiateSwitcher('product');\n\t\tthis.initiateSwitcher('audience');\n\t\tthis.initiateSwitcher('budget');\n\n\t\tthis.bindEvents()\n\t\tthis.buildSelector();\n\n\t\tthis.storeBlockShow(true);\n\t}\n\n\treInitAdCreator()\n\t{\n\t\tthis.adCreatorData = {};\n\t\tthis.adCreatorData.audienceConfig = {};\n\t\tthis.adCreatorData.crmAudienceConfig = {};\n\t}\n\n\tinitiateAccounts()\n\t{\n\t\tthis.seoAccount = new SeoAccount({\n\t\t\tclientNode: this.uiNodes.clientInput,\n\t\t\tprovider: this.provider,\n\t\t\tavatarNode: this.uiNodes.avatar,\n\t\t\tlinkNode: this.uiNodes.link,\n\t\t\taccountNode: this.uiNodes.account,\n\t\t\tinstagramAccountNode: this.uiNodes.instagramAccount,\n\t\t\tclientBlock: this.uiNodes.clientBlock,\n\t\t\tsignedParameters: this.signedParameters,\n\t\t\tcomponentName: this.componentName,\n\t\t\tuiNodes: this.uiNodes\n\t\t});\n\n\t\tthis.profileConfigured = false;\n\t\tif (!this.clientId && !this.provider.PROFILE)\n\t\t{ // use first client by default\n\t\t\tfor (let i = 0; i < this.provider.CLIENTS.length; i++)\n\t\t\t{\n\t\t\t\tthis.seoAccount.setProfile(this.provider.CLIENTS[i]);\n\t\t\t\tthis.profileConfigured = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tthis.loader.init(this);\n\n\t\tif (this.provider.PROFILE)\n\t\t{\n\t\t\tthis.activateStage(this._STAGES.accountSelected);\n\t\t}\n\n\t\tif(!this.profileConfigured)\n\t\t{\n\t\t\tthis.seoAccount.setProfile(this.provider.PROFILE);\n\t\t}\n\n\t\tthis.seoAccount._helper.showBlockByAuth();\n\t}\n\n\tbindEvents()\n\t{\n\t\tEvent.bind(this.uiNodes.addPost, 'click', this.openPostSlider.bind(this));\n\n\t\tthis.uiNodes.createLinks.forEach(function(createLink) {\n\t\t\tEvent.bind(createLink, 'click', BX.proxy(function() {\n\t\t\t\tif (!this.hasPostLis)\n\t\t\t\t{\n\t\t\t\t\tthis.showBlockRefresh();\n\t\t\t\t}\n\t\t\t}, this));\n\t\t}, this);\n\n\t\tEvent.bind(this.uiNodes.refreshButton, 'click', BX.proxy(function() {\n\t\t\tthis.seoAccount.getProvider();\n\t\t}, this));\n\n\t\tif (this.uiNodes.autoRemover.checker)\n\t\t{\n\t\t\tEvent.bind(this.uiNodes.autoRemover.checker, 'click', () => {\n\t\t\t\tvar autoRemover = this.uiNodes.autoRemover;\n\t\t\t\tautoRemover.select.disabled = !autoRemover.checker.checked;\n\t\t\t});\n\t\t}\n\n\t\tEvent.bind(this.uiNodes.logout, 'click', BX.proxy(function() {\n\t\t\tthis.seoAccount.logout(this.clientId);\n\t\t}, this));\n\n\t\tEvent.bind(this.uiNodes.addClientBtn, 'click', BX.proxy(function() {\n\t\t\tBX.util.popup(_this.provider.AUTH_URL, 800, 600);\n\t\t}, this));\n\n\t\tthis.arrows.forEach(arrow => {\n\t\t\t\tarrow.addEventListener('click', this.switchCollapsed);\n\t\t\t}\n\t\t);\n\n\t\tEvent.bind(this.uiNodes.account, 'change', this.checkCurrency.bind(this));\n\t\tdocument.querySelectorAll('.seo-ads-budget-item-block').forEach(div => {\n\t\t\tEvent.bind(div, 'click', this.calculateTotal.bind(this));\n\t\t});\n\n\t\tdocument.querySelectorAll('.seo-ads-audience-item-block').forEach(div => {\n\t\t\tEvent.bind(div, 'click', this.changeAudienceMode.bind(this));\n\t\t});\n\n\t\tdocument.querySelectorAll('.seo-ads-product-item-block').forEach(div => {\n\t\t\tEvent.bind(div, 'click', this.changeProductSelectionMode.bind(this));\n\t\t});\n\n\t\tEvent.bind(this.uiNodes.audienceExpert, 'click', this.showAudienceExpertModeForm.bind(this));\n\t\tEvent.bind(this.uiNodes.productExpert, 'click', this.openTargetPageSlider.bind(this));\n\n\t\tEvent.bind(this.uiNodes.addProductBtn, 'click', this.toCreateStoreSlider.bind(this));\n\t\tEvent.bind(this.uiNodes.addCurrencyBtn, 'click', this.addCurrency.bind(this));\n\t\tEvent.bind(this.uiNodes.toModerationBtn, 'click', this.sendToModeration.bind(this));\n\t}\n\n\tinitiateUINodes()\n\t{\n\t\tthis.containerNode = BX('crm-ads-new-campaign');\n\t\tBX.UI.Hint.init(this.containerNode);\n\n\t\tthis.uiNodes = {\n\t\t\t'avatar': this.containerNode.querySelector('[data-bx-ads-auth-avatar]'),\n\t\t\t'name': this.containerNode.querySelector('[data-bx-ads-auth-name]'),\n\t\t\t'link': this.containerNode.querySelector('[data-bx-ads-auth-link]'),\n\t\t\t'logout': this.containerNode.querySelector('[data-bx-ads-auth-logout]'),\n\t\t\t'clientBlock': this.containerNode.querySelector('[data-bx-ads-client]'),\n\t\t\t'clientInput': this.containerNode.querySelector('[data-bx-ads-client-input]'),\n\t\t\t'account': this.containerNode.querySelector('[data-bx-ads-account]'),\n\t\t\t'accountLoader': this.containerNode.querySelector('[data-bx-ads-account-loader]'),\n\t\t\t'instagramAccount': this.containerNode.querySelector('[data-bx-ads-instagram-account]'),\n\t\t\t'instagramAccountLoader': this.containerNode.querySelector('[data-bx-ads-instagram-account-loader]'),\n\t\t\t'errorNotFound': this.containerNode.querySelector('[data-bx-ads-post-not-found]'),\n\t\t\t'addPost': this.containerNode.querySelector('.crm-ads-new-campaign-item-post-new'),\n\t\t\t'addProductBtn': this.containerNode.querySelector('.seo-ads-add-product-btn'),\n\t\t\t'addCurrencyBtn': this.containerNode.querySelector('.seo-ads-currency-apply-btn'),\n\t\t\t'toModerationBtn': this.containerNode.querySelector('.seo-ads-to-moderation-btn'),\n\t\t\t'refreshButton': this.containerNode.querySelector('[data-bx-ads-refresh-btn]'),\n\t\t\t'currencyBlock': document.querySelector('.seo-ads-currency-block'),\n\t\t\t'audienceSummary': document.querySelector('.seo-ads-audience-summary'),\n\t\t\t'createLinks': BX.convert.nodeListToArray(\n\t\t\t\tthis.containerNode.querySelectorAll('[data-bx-ads-post-create-link]')\n\t\t\t),\n\t\t\t'accountNotice': {\n\t\t\t\t'instagram': this.containerNode.querySelector('.seo-ads-no-ad-account-instagram'),\n\t\t\t\t'ad': this.containerNode.querySelector('.seo-ads-no-ad-account'),\n\t\t\t},\n\t\t\t'audienceExpert': BX('crm-ads-new-campaign-item-expert-audience'),\n\t\t\t'productExpert': BX('crm-ads-new-campaign-item-expert-product'),\n\t\t\t'budgetExpert': BX('crm-ads-new-campaign-item-expert-budget'),\n\t\t\t'autoRemover': {\n\t\t\t\t'node': this.containerNode.querySelector('[data-bx-ads-post-auto-remove]'),\n\t\t\t\t'checker': this.containerNode.querySelector('[data-bx-ads-post-auto-remove-checker]'),\n\t\t\t\t'select': this.containerNode.querySelector('[data-bx-ads-post-auto-remove-select]')\n\t\t\t},\n\t\t\t'form': {\n\t\t\t\t'permalink': this.containerNode.querySelector('[data-bx-ads-permalink]'),\n\t\t\t\t'mediaId': this.containerNode.querySelector('[data-bx-ads-media-id]'),\n\t\t\t\t'targetUrl': this.containerNode.querySelector('[data-bx-ads-target-url]'),\n\t\t\t\t'duration': this.containerNode.querySelector('[data-bx-ads-duration]'),\n\t\t\t\t'page': this.containerNode.querySelector('[data-bx-ads-page-id]'),\n\t\t\t\t'body': this.containerNode.querySelector('[data-bx-ads-body]'),\n\t\t\t\t'adsId': this.containerNode.querySelector('[data-bx-ads-id]'),\n\t\t\t\t'pageId': this.containerNode.querySelector('[data-bx-ads-page-id]'),\n\t\t\t\t'budget': this.containerNode.querySelector('[data-bx-ads-budget]'),\n\t\t\t\t'ageFrom': this.containerNode.querySelector('[data-bx-ads-age-from]'),\n\t\t\t\t'ageTo': this.containerNode.querySelector('[data-bx-ads-age-to]'),\n\t\t\t\t'genders': this.containerNode.querySelector('[data-bx-ads-genders]'),\n\t\t\t\t'interests': this.containerNode.querySelector('[data-bx-ads-interests]'),\n\t\t\t\t'imageUrl': this.containerNode.querySelector('[data-bx-ads-image-url]'),\n\t\t\t\t'instagramAccountId': this.containerNode.querySelector('[data-bx-ads-actor-id]'),\n\t\t\t\t'segmentInclude': this.containerNode.querySelector('[data-bx-ads-segment-include]'),\n\t\t\t\t'segmentExclude': this.containerNode.querySelector('[data-bx-ads-segment-exclude]'),\n\t\t\t\t'regions': this.containerNode.querySelector('[data-bx-ads-regions]')\n\t\t\t},\n\t\t\t'adsStoreBlock': this.containerNode.querySelectorAll('.seo-ads-store'),\n\t\t\t'addClientBtn': this.containerNode.querySelector('[data-bx-ads-client-add-btn]'),\n\t\t\t'addPostBtn': this.containerNode.querySelector('[data-bx-ads-post-add]')\n\t\t};\n\t}\n\n\tinitiateSwitcher(id)\n\t{\n\t\tnew BX.UI.Switcher({\n\t\t\tnode: BX(`crm-ads-new-campaign-item-expert-${id}`),\n\t\t\tsize: \"small\"\n\t\t});\n\t}\n\n\tcheckCurrency()\n\t{\n\t\tconst account = this.uiNodes.account;\n\t\tthis.usedCurrency = account.options[account.selectedIndex].dataset.currency;\n\t\tthis.currencyExists(this.usedCurrency);\n\t}\n\n\tcalculateTotal(event)\n\t{\n\t\tif(this.checkInstagramAccount())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst target = event.target.dataset.type ? event.target : event.target.parentNode;\n\n\t\tconst type = target.dataset.type;\n\t\tconst price = this.price[this.usedCurrency][type];\n\t\tconst total = price.duration * price.value;\n\n\t\tdocument.querySelectorAll('.seo-ads-budget-total-value').forEach(element => {\n\t\t\telement.textContent = total;\n\t\t});\n\n\t\tdocument.querySelector('.seo-ads-budget-total-currency').textContent = this.usedCurrency;\n\t\tdocument.querySelector('.seo-ads-budget-total-duration').textContent = price.duration;\n\n\t\tdocument.querySelector('.seo-ads-total-budget').textContent = total;\n\t\tdocument.querySelector('.seo-ads-total-currency').textContent = this.usedCurrency;\n\t\tdocument.querySelector('.seo-ads-total-duration').textContent = price.duration;\n\n\t\tdocument.querySelector('.crm-ads-new-campaign-item-cost').style.display = 'block';\n\n\t\tdocument.querySelectorAll('.seo-ads-budget-item-block').forEach(div => {\n\t\t\tdiv.classList.remove(this.optionSelectedClass);\n\t\t});\n\n\t\ttarget.classList.add(this.optionSelectedClass);\n\n\t\tthis.uiNodes.form.budget.value = total;\n\t\tthis.uiNodes.form.duration.value = price.duration;\n\t\tthis.prepareCurrencyBlocks();\n\t\tthis.activateStage(this._STAGES.budgetSelected);\n\t}\n\n\tcheckInstagramAccount()\n\t{\n\t\tif (!this.uiNodes.instagramAccount.value)\n\t\t{\n\t\t\tthis.scrollToStage(this._STAGES.accountSelected);\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tchangeAudienceMode(event)\n\t{\n\t\tif(this.checkInstagramAccount())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst target = event.target.dataset.type ? event.target : event.target.parentNode;\n\n\t\tconst type = target.dataset.type;\n\n\t\tdocument.querySelectorAll('.seo-ads-audience-item-block').forEach(div => {\n\t\t\tdiv.classList.remove(this.optionSelectedClass);\n\t\t});\n\n\t\ttarget.classList.add(this.optionSelectedClass);\n\n\t\tswitch (type)\n\t\t{\n\t\t\tcase 'auto':\n\t\t\t\tthis.initiateAutoAudienceMode();\n\t\t\t\tbreak;\n\t\t\tcase 'crm':\n\t\t\t\tthis.showCrmAudienceExpertModeForm();\n\t\t\t\tbreak;\n\t\t\tcase 'expert':\n\t\t\t\tthis.showAudienceExpertModeForm();\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tchangeProductSelectionMode(event)\n\t{\n\t\tif(this.checkInstagramAccount())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst target = event.target.dataset.type ? event.target : event.target.parentNode;\n\n\t\tconst type = target.dataset.type;\n\t\tdocument.querySelectorAll('.seo-ads-product-item-block').forEach(div => {\n\t\t\tdiv.classList.remove(this.optionSelectedClass);\n\t\t});\n\n\t\ttarget.classList.add(this.optionSelectedClass);\n\n\t\tswitch (type)\n\t\t{\n\t\t\tcase 'auto':\n\t\t\t\tthis.storeBlockShow(true);\n\t\t\t\tbreak;\n\t\t\tcase 'expert':\n\t\t\t\tthis.openTargetPageSlider();\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tstoreBlockShow(isShown)\n\t{\n\t\tthis.uiNodes.adsStoreBlock.forEach((element) => {\n\t\t\tif(this.storeExists && element.dataset.type === 'store-not-created')\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif(!this.storeExists && element.dataset.type !== 'store-not-created')\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\n\t\t\telement.style.display = isShown?'block':'none';\n\t\t});\n\t}\n\n\tprepareCurrencyBlocks()\n\t{\n\t\tdocument.querySelectorAll('.seo-ads-current-currency').forEach(element => {\n\t\t\telement.textContent = this.usedCurrency;\n\t\t});\n\t}\n\n\tprepareCurrencyBlock(currency = this._DEFAULT_CURRENCY)\n\t{\n\t\tif (!this.price[currency])\n\t\t{\n\t\t\tfor (const key in this.price[this._DEFAULT_CURRENCY])\n\t\t\t{\n\t\t\t\tthis.convertToCurrency(\n\t\t\t\t\tkey,\n\t\t\t\t\tthis._DEFAULT_CURRENCY !== this.baseCurrency ? this.baseCurrency : currency,\n\t\t\t\t\tthis.price[this._DEFAULT_CURRENCY][key]\n\t\t\t\t);\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\tfor (const key in this.price[currency])\n\t\t{\n\t\t\tdocument.querySelector(`.seo-ads-budget-${key}-duration`).textContent = this.price[currency][key].duration;\n\t\t\tdocument.querySelector(`.seo-ads-budget-${key}-value`).textContent = this.price[currency][key].value;\n\t\t\tdocument.querySelector(`.seo-ads-budget-${key}-currency`).textContent = currency;\n\t\t}\n\t}\n\n\tconvertToCurrency(key, targetCurrency, price)\n\t{\n\t\tthis.seoAccount._helper.request('convertCurrency', {\n\t\t\t\tsourceCurrency: this.baseCurrency,\n\t\t\t\ttargetCurrency: targetCurrency,\n\t\t\t\tamount: price.value\n\t\t\t}, response => {\n\t\t\t\tconst amount = response.amount;\n\n\t\t\t\tif (!this.price[targetCurrency])\n\t\t\t\t{\n\t\t\t\t\tthis.price[targetCurrency] = [];\n\t\t\t\t}\n\n\t\t\t\tif (!this.price[targetCurrency][key])\n\t\t\t\t{\n\t\t\t\t\tthis.price[targetCurrency][key] = { duration: price.duration, value: amount };\n\t\t\t\t}\n\n\t\t\t\tif (Object.keys(this.price[targetCurrency]).length === 4)\n\t\t\t\t{\n\t\t\t\t\tthis.prepareCurrencyBlock(targetCurrency);\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t}\n\n\tcurrencyExists(currency)\n\t{\n\t\tthis.seoAccount._helper.request('checkCurrencyExists', {\n\t\t\t\tcurrency: currency\n\t\t\t}, response => {\n\t\t\t\tconst exists = response.exists;\n\n\t\t\t\tif (exists === false)\n\t\t\t\t{\n\t\t\t\t\tthis.prepareCurrencyBlocks();\n\t\t\t\t\tthis.uiNodes.currencyBlock.style.display = 'block';\n\t\t\t\t}\n\n\t\t\t\tthis.prepareCurrencyBlock(this.usedCurrency);\n\t\t\t}\n\t\t);\n\t}\n\n\taddCurrency()\n\t{\n\t\tconst count = document.querySelector('.seo-ads-currency-count');\n\t\tconst course = document.querySelector('.seo-ads-currency-course');\n\t\tif (!count.value || !course)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.seoAccount._helper.request('addCurrency', {\n\t\t\t\tnewCurrency: this.usedCurrency,\n\t\t\t\tcourse: course.value,\n\t\t\t\tamountCnt: count.value\n\t\t\t}, response => {\n\t\t\t\tconst success = response.success;\n\n\t\t\t\tif (success === false)\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.uiNodes.currencyBlock.style.display = 'none';\n\t\t\t\tdelete (this.price[this.usedCurrency]);\n\t\t\t\tthis.prepareCurrencyBlock(this.usedCurrency);\n\t\t\t}\n\t\t);\n\t}\n\n\tswitchCollapsed(event)\n\t{\n\t\tconst block = event.target.closest('.crm-ads-new-campaign-item');\n\t\tconst content = block.querySelector('.crm-ads-new-campaign-item-content');\n\n\t\tif (block.classList.contains('crm-ads-new-campaign-item--hide'))\n\t\t{\n\t\t\tblock.classList.remove('crm-ads-new-campaign-item--hide');\n\t\t\tcontent.style.height = content.scrollHeight + 'px';\n\t\t}\n\t\telse\n\t\t{\n\t\t\tblock.classList.add('crm-ads-new-campaign-item--hide');\n\t\t\tcontent.style.height = content.scrollHeight + 'px';\n\t\t\tsetTimeout(() => content.style.height = '0');\n\t\t}\n\t}\n\n\tclipTitle(title)\n\t{\n\t\tif (!title)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tconst text = title.textContent;\n\t\tconst nodeHeight = 20;\n\t\tBX.cleanNode(title);\n\n\t\tconst titleInner = BX.create(\"span\", {\n\t\t\ttext: text\n\t\t});\n\t\ttitle.appendChild(titleInner);\n\n\t\tlet a = 0;\n\t\twhile (titleInner.offsetHeight > nodeHeight && text.length > a)\n\t\t{\n\t\t\ta = a + 1;\n\t\t\ttitleInner.innerText = text.slice(0, -a) + '...';\n\t\t}\n\t}\n\n\tonPostSelected(event)\n\t{\n\t\tif (event.eventId === \"seo-ads-post-selected\" && event.data)\n\t\t{\n\t\t\tif (!event.data.media_url)\n\t\t\t{\n\t\t\t\tthis.deActivateStage(this._STAGES.postSelected);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst postItem = Tag.render` \n\t\t\t<div class=\"crm-ads-new-campaign-item-post\">\n\t\t\t   <div class=\"crm-ads-new-campaign-item-post-img\" \n\t\t\t\t\tstyle=\"background-image: url(${event.data.media_url})\">\n\t\t\t   </div>\n\t\t\t   <span class=\"crm-ads-new-campaign-item-post-text\">${Text.encode(event.data.caption||'')}</span>\n\t\t\t   <span class=\"crm-ads-new-campaign-item-post-delete\"></span>\n\t\t\t</div>\n\t\t\t`;\n\n\t\t\tconst postListNode = document.querySelector('.crm-ads-new-campaign-item-posts');\n\t\t\tconst addNewNode = document.querySelector('.crm-ads-new-campaign-item-post-new');\n\t\t\tconst previewNode = document.querySelector('.crm-ads-new-campaign-item-total-preview-img-value');\n\n\t\t\tif (addNewNode !== postListNode.firstChild)\n\t\t\t{\n\t\t\t\tpostListNode.removeChild(postListNode.firstChild);\n\t\t\t}\n\n\t\t\tpostListNode.insertBefore(postItem, postListNode.firstChild);\n\t\t\tEvent.bind(postItem.querySelector('.crm-ads-new-campaign-item-post-delete'), 'click', () => {\n\t\t\t\tpostItem.parentNode.removeChild(postItem);\n\t\t\t});\n\n\t\t\tpreviewNode.style.backgroundImage = 'url(' + event.data.media_url + ')';\n\n\t\t\tthis.postData = event.data;\n\n\t\t\tconst title = document.querySelector('.crm-ads-new-campaign-item-post-text');\n\t\t\tthis.clipTitle(title);\n\t\t\tthis.activateStage(this._STAGES.postSelected);\n\t\t}\n\t}\n\n\topenPostSlider()\n\t{\n\t\tif (this.uiNodes.instagramAccount.value)\n\t\t{\n\t\t\tthis.openSlider(this.postListUrl, {\n\t\t\t\tsessid: BX.bitrix_sessid(),\n\t\t\t\tcomponentParams: {\n\t\t\t\t\tACCOUNT_ID: this.uiNodes.instagramAccount.value,\n\t\t\t\t\tCLIENT_ID: this.uiNodes.clientInput.value,\n\t\t\t\t\tTYPE: this.provider.TYPE\n\t\t\t\t}\n\t\t\t}, this.onPostSelected);\n\t\t}\n\t}\n\n\tonTargetPageSelected(event)\n\t{\n\t\tif (event.eventId === \"seo-ads-target-post-selected\" && event.data)\n\t\t{\n\t\t\tif (!event.data.targetUrl)\n\t\t\t{\n\t\t\t\tthis.deActivateStage(this._STAGES.pageSelected);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tdocument.querySelector('.seo-ads-target-url').textContent = event.data.targetUrl;\n\t\t\tthis.uiNodes.form.targetUrl.value = event.data.targetUrl;\n\t\t\tthis.activateStage(this._STAGES.pageSelected);\n\t\t}\n\t}\n\n\tonFBAudienceConfigured(event)\n\t{\n\t\tif (event.eventId === \"seo-fb-audience-configured\" && event.data)\n\t\t{\n\t\t\tthis.reInitAdCreator();\n\t\t\tif (!event.data)\n\t\t\t{\n\t\t\t\tthis.deActivateStage(this._STAGES.audienceSelected);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.adCreatorData.audienceConfig = event.data;\n\t\t\tthis.activateStage(this._STAGES.audienceSelected);\n\n\t\t\tthis.uiNodes.audienceSummary.innerHTML = this.buildAudienceSummary();\n\t\t}\n\t}\n\n\tonCrmAudienceConfigured(event)\n\t{\n\t\tif (event.eventId === \"seo-crm-audience-configured\" && event.data)\n\t\t{\n\t\t\tthis.reInitAdCreator();\n\t\t\tif (!event.data)\n\t\t\t{\n\t\t\t\tthis.deActivateStage(this._STAGES.audienceSelected);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.adCreatorData.crmAudienceConfig = event.data;\n\t\t\tthis.activateStage(this._STAGES.audienceSelected);\n\t\t\tthis.uiNodes.audienceSummary.innerHTML = this.buildAudienceSummary();\n\t\t}\n\t}\n\n\topenTargetPageSlider()\n\t{\n\t\tif (this.uiNodes.instagramAccount.value)\n\t\t{\n\t\t\tthis.storeBlockShow(false);\n\t\t\tthis.openSlider(\n\t\t\t\tthis.pageConfigurationUrl, {\n\t\t\t\t\tsessid: BX.bitrix_sessid(),\n\t\t\t\t\ttargetUrl: this.uiNodes.form.targetUrl.value || '',\n\t\t\t\t\tcacheable: false\n\t\t\t\t},\n\t\t\t\tthis.onTargetPageSelected\n\t\t\t);\n\t\t}\n\t}\n\n\topenSlider(url, params, callback)\n\t{\n\t\tconst sliderOptions = {\n\t\t\twidth: 1150,\n\t\t\tcacheable: params.cacheable || true,\n\t\t\tallowChangeHistory: false,\n\t\t\trequestMethod: 'post',\n\t\t\trequestParams: params\n\t\t};\n\n\t\tconst eventName = BX.SidePanel.Slider.getEventFullName(\"onMessage\");\n\n\t\tBX.removeAllCustomEvents(\n\t\t\twindow,\n\t\t\teventName,\n\t\t\tcallback.bind(this)\n\t\t);\n\n\t\tBX.addCustomEvent(\n\t\t\twindow,\n\t\t\teventName,\n\t\t\tcallback.bind(this)\n\t\t);\n\n\t\tBX.SidePanel.Instance.open(\n\t\t\turl,\n\t\t\tsliderOptions\n\t\t);\n\t}\n\n\tshowAudienceExpertModeForm()\n\t{\n\t\tif (this.uiNodes.instagramAccount.value)\n\t\t{\n\t\t\tthis.openSlider(this.audienceUrl, {\n\t\t\t\tsessid: BX.bitrix_sessid(),\n\t\t\t\tcomponentParams: {\n\t\t\t\t\tACCOUNT_ID: this.uiNodes.instagramAccount.value,\n\t\t\t\t\tCLIENT_ID: this.uiNodes.clientInput.value,\n\t\t\t\t\tTYPE: this.provider.TYPE\n\t\t\t\t}\n\t\t\t}, this.onFBAudienceConfigured);\n\t\t}\n\t}\n\n\tshowCrmAudienceExpertModeForm()\n\t{\n\t\tif (this.uiNodes.instagramAccount.value)\n\t\t{\n\t\t\tthis.openSlider(this.crmAudienceUrl, {\n\t\t\t\tsessid: BX.bitrix_sessid(),\n\t\t\t\tcomponentParams: {\n\t\t\t\t\tTYPE: this.provider.TYPE\n\t\t\t\t}\n\t\t\t}, this.onCrmAudienceConfigured);\n\t\t}\n\t}\n\n\tinitiateAutoAudienceMode()\n\t{\n\n\t\t\tthis.reInitAdCreator();\n\t\t\tthis.adCreatorData.crmAudienceConfig.genders = [1,2];\n\t\t\tthis.adCreatorData.crmAudienceConfig.ageFrom = 25;\n\t\t\tthis.adCreatorData.crmAudienceConfig.ageTo = 45;\n\n\t\t\tthis.activateStage(this._STAGES.audienceSelected);\n\t\t\tthis.uiNodes.audienceSummary.innerHTML = Loc.getMessage('SEO_AD_BUILDER_AUDIENCE_MEN_WOMAN_25_45');\n\t}\n\n\tbuildAudienceSummary()\n\t{\n\t\tlet summary = ''\n\n\t\tif(this.adCreatorData.audienceConfig.genderTitles)\n\t\t{\n\t\t\tsummary += `${Loc.getMessage('SEO_AD_BUILDER_GENDER')}: ${this.adCreatorData.audienceConfig.genderTitles.join(', ')} `;\n\t\t}\n\n\t\tif(this.adCreatorData.audienceConfig.ageFrom)\n\t\t{\n\t\t\tsummary += `${this.adCreatorData.audienceConfig.ageFrom} - ${this.adCreatorData.audienceConfig.ageTo}\n\t\t\t ${Loc.getMessage('SEO_AD_BUILDER_YEARS_OLD')} <br/>`;\n\t\t}\n\n\t\tif(this.adCreatorData.audienceConfig.interests)\n\t\t{\n\t\t\tlet interests = [];\n\t\t\tthis.adCreatorData.audienceConfig.interests.forEach((interest) => {\n\t\t\t\tinterests.push(interest.name);\n\t\t\t});\n\n\t\t\tsummary += `${Loc.getMessage('SEO_AD_BUILDER_INTERESTS')}: ${interests.join(', ')}<br/>`;\n\t\t}\n\n\t\tif(this.adCreatorData.crmAudienceConfig.segmentInclude)\n\t\t{\n\t\t\tsummary += `${Loc.getMessage('SEO_AD_BUILDER_CRM_AUDIENCE')}<br/>`;\n\t\t}\n\n\t\tif(Object.keys(this.selectedRegions).length)\n\t\t{\n\t\t\tlet regions = [];\n\t\t\tfor(let code in this.selectedRegions)\n\t\t\t{\n\t\t\t\tregions.push(this.selectedRegions[code].title);\n\t\t\t}\n\n\t\t\tsummary += `${Loc.getMessage('SEO_AD_BUILDER_REGION')}: ${regions.join(', ')}<br/>`;\n\t\t}\n\n\t\treturn summary;\n\t}\n\n\tsendToModeration(event)\n\t{\n\t\tthis.uiNodes.toModerationBtn.classList.add('ui-btn-wait');\n\n\t\tconst formNode = this.uiNodes.form;\n\n\t\tif (Object.keys(this.completedStages).length < 6)\n\t\t{\n\t\t\tfor (let i = this._STAGES.accountSelected; i <= this._STAGES.toModeration; i++)\n\t\t\t{\n\t\t\t\tif (!this.completedStages[i])\n\t\t\t\t{\n\t\t\t\t\tthis.scrollToStage(i);\n\t\t\t\t\tthis.uiNodes.toModerationBtn.classList.remove('ui-btn-wait');\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.uiNodes.toModerationBtn.classList.remove('ui-btn-wait');\n\t\t\treturn;\n\t\t}\n\n\t\tconst instagramAccount = this.uiNodes.instagramAccount.options[\n\t\t\tthis.uiNodes.instagramAccount.selectedIndex\n\t\t\t].dataset;\n\n\t\tconst params = {\n\t\t\tclient_id: this.uiNodes.clientInput.value,\n\t\t\tbudget: formNode.budget.value,\n\t\t\tduration: formNode.duration.value,\n\t\t\ttargetUrl: formNode.targetUrl.value,\n\t\t\taccountId: this.uiNodes.account.value,\n\t\t\tinstagramAccountId: instagramAccount.actorId,\n\t\t\tpageId: instagramAccount.pageId,\n\t\t\tbody: this.postData.caption,\n\t\t\tmediaId: this.postData.id,\n\t\t\tpermalink: this.postData.permalink,\n\t\t\timageUrl: this.postData.media_url,\n\t\t\tcountries: this.selectedRegions,\n\t\t\tinterests: this.adCreatorData.audienceConfig.interests || [],\n\t\t\tageFrom: this.adCreatorData.audienceConfig.ageFrom || '',\n\t\t\tageTo: this.adCreatorData.audienceConfig.ageTo || '',\n\t\t\tgenders: this.adCreatorData.audienceConfig.genders || ''\n\t\t};\n\n\t\tconst form = document.getElementById('bx-sender-letter-edit')\n\t\t\t.querySelector('form');\n\n\t\tformNode.permalink.value = this.postData.permalink;\n\t\tformNode.pageId.value = params.pageId;\n\t\tformNode.body.value = this.postData.caption;\n\t\tformNode.mediaId.value = params.mediaId;\n\t\tformNode.imageUrl.value = params.imageUrl;\n\t\tformNode.instagramAccountId.value = params.instagramAccountId;\n\t\tformNode.interests.value = JSON.stringify(params.interests);\n\t\tformNode.ageFrom.value = params.ageFrom;\n\t\tformNode.ageTo.value = params.ageTo;\n\t\tformNode.genders.value = JSON.stringify(params.genders);\n\t\tformNode.regions.value = JSON.stringify(params.countries);\n\n\t\tconst include = this.adCreatorData.crmAudienceConfig.segmentInclude || [];\n\t\tconst exclude = this.adCreatorData.crmAudienceConfig.segmentExclude || [];\n\t\tfor (let i = 0; i < include.length; i++)\n\t\t{\n\t\t\tconst input = Tag.render`<input type=\"hidden\" name='SEGMENT[INCLUDE][]'>`;\n\t\t\tinput.value = include[i];\n\t\t\tform.appendChild(input);\n\t\t}\n\t\tfor (let i = 0; i < exclude.length; i++)\n\t\t{\n\t\t\tconst input = Tag.render`<input type=\"hidden\" name='SEGMENT[EXCLUDE][]'>`;\n\t\t\tinput.value = exclude[i];\n\t\t\tform.appendChild(input);\n\t\t}\n\n\t\tform.submit();\n\t}\n\n\tactivateStage(stageNum)\n\t{\n\t\tconst stage = document.querySelector(`[data-stage=\"${stageNum}\"]`);\n\t\tconst line = stage.querySelector('.crm-ads-new-campaign-item-line');\n\t\tconst number = stage.querySelector('.crm-ads-new-campaign-item-number');\n\t\tconst checker = stage.querySelector('.crm-ads-new-campaign-item-number-checker');\n\n\t\tif (line && number)\n\t\t{\n\t\t\tline.classList.remove('crm-ads-new-campaign-item--inactive');\n\t\t\tnumber.classList.remove('crm-ads-new-campaign-item--inactive');\n\t\t}\n\n\t\tif (checker)\n\t\t{\n\t\t\tchecker.style.display = 'block';\n\t\t}\n\n\t\tthis.completedStages[stageNum] = stageNum;\n\n\t\tif (Object.keys(this.completedStages).length === 5)\n\t\t{\n\t\t\tthis.activateStage(this._STAGES.toModeration);\n\t\t}\n\n\t\tif (Object.keys(this.completedStages).length < 5)\n\t\t{\n\t\t\tthis.deActivateStage(this._STAGES.toModeration);\n\t\t}\n\t}\n\n\tdeActivateStage(stageNum)\n\t{\n\t\tconst stage = document.querySelector(`[data-stage=\"${stageNum}\"]`);\n\t\tconst line = stage.querySelector('.crm-ads-new-campaign-item-line');\n\t\tconst number = stage.querySelector('.crm-ads-new-campaign-item-number');\n\t\tconst checker = stage.querySelector('.crm-ads-new-campaign-item-number-checker');\n\n\t\tif (line && number)\n\t\t{\n\t\t\tline.classList.add('crm-ads-new-campaign-item--inactive');\n\t\t\tnumber.classList.add('crm-ads-new-campaign-item--inactive');\n\t\t}\n\n\t\tif (checker)\n\t\t{\n\t\t\tchecker.style.display = 'none';\n\t\t}\n\n\t\tdelete (this.completedStages[stageNum]);\n\n\t\tif (Object.keys(this.completedStages).length < 6 && this.completedStages[this._STAGES.toModeration])\n\t\t{\n\t\t\tthis.deActivateStage(this._STAGES.toModeration);\n\t\t}\n\t}\n\n\tscrollToStage(stageNum)\n\t{\n\t\tconst stage = document.querySelector(`[data-stage=\"${stageNum}\"]`);\n\n\t\tstage.scrollIntoView({\n\t\t\tbehavior: 'smooth'\n\t\t});\n\t}\n\n\tbuildSelector()\n\t{\n\t\tconst selector = new TagSelector({\n\t\t\tid: 'seo-ads-regions',\n\t\t\tdialogOptions: {\n\t\t\t\tid: 'seo-ads-regions',\n\t\t\t\tcontext: 'SEO_ADS_REGIONS',\n\t\t\t\tdropdownMode: true,\n\t\t\t\tcompactView: true,\n\t\t\t\tshowAvatars: false,\n\t\t\t\twidth: 350,\n\t\t\t\theight: 250,\n\t\t\t\trecentTabOptions: {\n\t\t\t\t\tstub: true,\n\t\t\t\t\tstubOptions: {\n\t\t\t\t\t\ttitle: Loc.getMessage('UI_TAG_SELECTOR_START_INPUT')\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tsearchOptions: {\n\t\t\t\t\tallowCreateItem: false\n\t\t\t\t},\n\t\t\t\tevents: {\n\t\t\t\t\t'Item:onSelect': event => {\n\t\t\t\t\t\tconst data = event.data.item;\n\t\t\t\t\t\tthis.selectedRegions[data.id] = data;\n\t\t\t\t\t\tthis.uiNodes.audienceSummary.innerHTML = this.buildAudienceSummary();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tentities: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'facebook_regions',\n\t\t\t\t\t\tsearchable: true,\n\t\t\t\t\t\tdynamicSearch: true,\n\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\tclientId: this.uiNodes.clientInput.value\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t}\n\t\t});\n\n\t\tselector.renderTo(document.getElementById('seo-ads-regions'));\n\t\tselector.getDialog().getRecentTab().setVisible(false)\n\t\tconst selectorOptions = {\n\t\t\tiblockId: this.iBlockId,\n\t\t\tbasePriceId: this.basePriceId,\n\t\t\tfields: {NAME:''},\n\t\t\tfileInputId: '',\n\t\t\tconfig: {\n\t\t\t\tENABLE_SEARCH: true,\n\t\t\t\tENABLE_IMAGE_CHANGE_SAVING: true\n\t\t\t}\n\t\t};\n\n\t\tthis.productSelector = new ProductSelector('facebook-product-selector', selectorOptions);\n\n\t\tEventEmitter.subscribe('BX.Catalog.ProductSelector:onChange', this.productSelectedEvent.bind(this));\n\t}\n\n\tproductSelectedEvent(event)\n\t{\n\t\tconst fieldData = event.data.fields;\n\t\tthis.seoAccount._helper.request('getProductUrl', {\n\t\t\t\tid: fieldData.ID\n\t\t\t}, response => {\n\t\t\t\tdocument.querySelector('.seo-ads-target-url').textContent = response;\n\t\t\t\tthis.uiNodes.form.targetUrl.value = response;\n\t\t\t\tthis.activateStage(this._STAGES.pageSelected)\n\t\t\t}\n\t\t)\n\t}\n\n\ttoCreateStoreSlider()\n\t{\n\t\tif (!this.isCloud)\n\t\t{\n\t\t\tthis.openTargetPageSlider();\n\t\t\treturn;\n\t\t}\n\n\t\tconst sliderOptions = {\n\t\t\twidth: 990,\n\t\t\tcacheable: true,\n\t\t\tallowChangeHistory: false,\n\t\t\trequestMethod: 'get'\n\t\t};\n\n\t\tBX.SidePanel.Instance.open(\n\t\t\t'/shop/stores/site/edit/0/?super=Y',\n\t\t\tsliderOptions\n\t\t);\n\t}\n}","import { Helper } from './helper';\nimport { Event, Loc, Tag } from \"main.core\";\nimport {type PostSelectorOptions} from './types/postselectoroptions'\nimport {TextCrop} from 'ui.textcrop';\n\nexport class SeoPostSelector\n{\n\t_accountId: string;\n\t_clientId: string;\n\t_type: string;\n\n\tconstructor(options: PostSelectorOptions)\n\t{\n\t\tthis.helper = Helper.getCreated();\n\t\tthis.last = null;\n\t\tthis.stopLoading = false;\n\t\tthis.loadInProgress = false;\n\t\tthis._accountId = options.accountId;\n\t\tthis._clientId = options.clientId;\n\t\tthis._type = options.type;\n\t\tthis.signedParameters = options.signedParameters;\n\t\tthis.emptyBlock = document.querySelector('.seo-ads-empty-post-list-block');\n\t\tthis.listContent = document.querySelector('.crm-order-instagram-view-list');\n\t\tthis.dataContent = [];\n\t\tthis.loader = new BX.Loader({\n\t\t\ttarget: document.querySelector(\".crm-order-instagram-view\")\n\t\t});\n\t\tthis.init();\n\t}\n\n\tinit()\n\t{\n\t\tthis.hideListContentBlock();\n\t\tconst topSlider = BX.SidePanel.Instance.getTopSlider().iframe.contentDocument;\n\n\t\tconst observer = new IntersectionObserver(this.loadPostList.bind(this), {\n\t\t\troot: topSlider,\n\t\t\trootMargin: '0px',\n\t\t\tthreshold: 1.0\n\t\t});\n\n\t\tobserver.observe(this.listContent)\n\n\t\tthis.loadPostList();\n\n\t}\n\n\tloadPostList()\n\t{\n\t\tif(this.loadInProgress)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.stopLoading)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tthis.loader.show();\n\n\t\tthis.loadInProgress = true;\n\t\tconst requestData = {\n\t\t\t'clientId': this._clientId || null,\n\t\t\t'type': this._type || null,\n\t\t\t'accountId': this._accountId || null,\n\t\t\t'last': this.last\n\t\t};\n\n\t\tBX.ajax.runComponentAction('bitrix:seo.ads.builder', 'getPostList', {\n\t\t\t'mode': 'class',\n\t\t\t'signedParameters': this.signedParameters,\n\t\t\t'data': requestData\n\t\t}).then(\n\t\t\tresponse => {\n\t\t\t\tconst data = response.data || {};\n\t\t\t\tif (data.error)\n\t\t\t\t{\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.successFn.apply(this, [data]);\n\t\t\t\t}\n\t\t\t\tthis.loadInProgress = false;\n\t\t\t},\n\t\t\t() => {\n\t\t\t\tconst data = { 'error': true, 'text': '' };\n\t\t\t\tthis.loadInProgress = false;\n\t\t\t\tthis.loader.hide();\n\t\t\t}\n\t\t);\n\n\t}\n\n\tshowEmptyListBlock()\n\t{\n\t\tthis.emptyBlock.style.display = 'block';\n\t}\n\n\thideEmptyListBlock()\n\t{\n\t\tthis.emptyBlock.style.display = 'none';\n\t}\n\n\tshowListContentBlock()\n\t{\n\t\tthis.listContent.parentNode.style.display = 'block';\n\t}\n\n\thideListContentBlock()\n\t{\n\t\tthis.listContent.parentNode.style.display = 'none';\n\t}\n\n\tsuccessFn(response)\n\t{\n\t\tconst data = response.data;\n\t\tif (this.clientSelector)\n\t\t{\n\t\t\tthis.clientSelector.enable();\n\t\t}\n\n\t\tdata.postList.forEach(postListItem => {\n\t\t\t\tconst postBlock = Tag.render`\n\t\t\t\t\t<label class=\"crm-order-instagram-view-item\" id=\"instItemID_${postListItem.id}\">\n\t\t\t\t\t\t<div class=\"crm-order-instagram-view-item-detail\">\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<span class=\"crm-order-instagram-view-item-img\" style=\"background-image: url(${postListItem.media_url})\"></span>\n\t\t\t\t\t\t\t\t<span class=\"crm-order-instagram-decal-container\">\n\t\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t\t<svg width=\"67\" height=\"16\" viewBox=\"0 0 67 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t\t\t\t\t\t\t\t\t<path d=\"M48.6026 0.306715C54.4273 0.290801 60.2679 0.306716 66.1244 0.290802C63.0688 5.35159 60.0292 10.3805 56.9736 15.4413C56.9577 15.3777 56.9418 15.3299 56.9418 15.2981C56.7508 13.9931 56.5439 12.6722 56.353 11.3672C56.162 10.0782 55.971 8.78911 55.7641 7.50004C55.6845 6.95895 55.605 6.41785 55.5254 5.86085C55.5095 5.74945 55.4458 5.66988 55.3503 5.60622C54.8252 5.19245 54.3 4.77867 53.7589 4.36489C52.0879 3.05991 50.401 1.75493 48.7299 0.449946C48.6822 0.402203 48.6345 0.370374 48.5708 0.32263C48.5867 0.338545 48.5867 0.322629 48.6026 0.306715ZM56.4962 5.66988C56.8463 7.96156 57.1805 10.2532 57.5306 12.5449C57.642 12.4335 63.976 1.96182 64.0078 1.81859C61.4933 3.10765 58.9947 4.38081 56.4962 5.66988ZM62.7824 1.34115C62.7824 1.32524 62.7665 1.32524 62.7665 1.30932C62.3845 1.2775 51.6105 1.2775 51.4672 1.32524C52.9791 2.50291 54.4751 3.66466 55.971 4.82641C58.2468 3.66466 60.5066 2.50291 62.7824 1.34115Z\" fill=\"#999\"/>\n\t\t\t\t\t\t\t\t\t\t\t<path d=\"M9.46094 15.2344C8.60547 14.3984 4.79192 10.6375 2.65772 8.51853C2.49858 8.3753 2.35535 8.21616 2.21212 8.05702C1.44823 7.26129 1.03445 6.32234 0.954879 5.24016C0.859393 4.01475 1.1936 2.91666 1.95749 1.96179C2.67364 1.07058 3.59667 0.481747 4.74251 0.306688C6.66816 0.00431397 8.19594 0.672722 9.34178 2.24825C9.37361 2.28008 9.38952 2.31191 9.40544 2.34374C9.40544 2.34374 9.42135 2.35965 9.45318 2.37556C9.48501 2.32782 9.53275 2.26416 9.5805 2.21642C10.2012 1.34113 11.0128 0.752293 12.0313 0.434004C12.4769 0.290774 12.9384 0.258947 13.4 0.258947C14.0206 0.258947 14.6095 0.370347 15.1665 0.640892C16.5828 1.29338 17.49 2.37556 17.8242 3.88743C18.1425 5.31973 17.8242 6.64063 16.933 7.80238C16.7738 8.00927 16.5828 8.18433 16.3919 8.37531C14.9277 9.82352 13.4795 11.2717 12.0154 12.7199C11.1923 13.543 10.2422 14.4922 9.46094 15.2344ZM9.42135 13.818C9.51684 13.7226 9.61233 13.643 9.6919 13.5634C10.233 13.0223 10.79 12.4812 11.3311 11.9401C12.827 10.4601 14.3389 8.98005 15.8349 7.4841C15.9622 7.3727 16.0736 7.24538 16.1691 7.10215C17.0125 5.95631 17.1717 4.71498 16.6306 3.39409C15.9622 1.77081 14.1479 0.879609 12.4292 1.32521C11.5539 1.54801 10.8537 2.04136 10.3444 2.78934C10.0579 3.21903 9.8033 3.64872 9.51684 4.07841C9.48501 4.12615 9.45318 4.1739 9.42135 4.23755C9.3577 4.14207 9.30995 4.07841 9.26221 3.99884C8.99166 3.58506 8.73703 3.15537 8.46649 2.7416C7.65485 1.56393 6.19073 0.975095 4.80617 1.27747C2.60998 1.7549 1.40048 3.99883 2.13255 6.09954C2.32352 6.64063 2.64181 7.10215 3.05558 7.51593C3.81948 8.2639 4.58337 9.01188 5.33135 9.75986C6.58859 11.0012 7.84583 12.2584 9.11898 13.4997C9.21447 13.6111 9.30995 13.7066 9.42135 13.818Z\" fill=\"#999\"/>\n\t\t\t\t\t\t\t\t\t\t\t<path d=\"M41.4411 14.9002C41.282 14.8843 41.1387 14.8684 40.9796 14.8525C40.343 14.7888 39.7223 14.7093 39.0858 14.6456C38.5447 14.5819 38.0195 14.5501 37.4784 14.4705C37.2874 14.4546 37.1442 14.4865 36.9851 14.566C36.2371 14.9002 35.4414 15.1071 34.6297 15.1708C32.9269 15.2981 31.3354 14.948 29.8872 14.009C28.5504 13.1337 27.5796 11.9561 26.9749 10.476C26.7043 9.82352 26.5452 9.13921 26.4815 8.43897C26.3383 6.60881 26.7203 4.92188 27.7865 3.42593C28.9642 1.77082 30.5397 0.736386 32.529 0.35444C32.9269 0.274868 33.3407 0.227125 33.7385 0.243039C34.0727 0.258954 34.4069 0.243039 34.7411 0.274868C35.7278 0.370354 36.6668 0.656814 37.5262 1.15016C39.2927 2.13686 40.4862 3.60098 41.1069 5.54254C41.3138 6.19503 41.4093 6.86344 41.4252 7.54776C41.457 8.50263 41.2979 9.40975 40.9796 10.301C40.9478 10.3964 40.9478 10.4919 40.9478 10.5874C41.0432 11.4627 41.1387 12.338 41.2342 13.1974C41.2979 13.7066 41.3456 14.2159 41.4093 14.7411C41.4411 14.7888 41.4411 14.8366 41.4411 14.9002ZM40.3271 13.8021C40.3271 13.7544 40.3271 13.7385 40.3271 13.7226C40.2793 13.2292 40.2157 12.7518 40.1679 12.2584C40.1043 11.6537 40.0406 11.0649 39.977 10.4601C39.9611 10.3487 39.977 10.2691 40.0088 10.1577C40.4385 9.09146 40.5499 7.97745 40.4226 6.84753C40.3271 6.03589 40.0725 5.272 39.6587 4.57177C38.3219 2.1846 35.7119 0.895532 33.0065 1.29339C31.7333 1.48437 30.6193 2.00954 29.6644 2.853C27.8502 4.46036 27.0863 6.83161 27.6274 9.18695C28.0889 11.1444 29.2347 12.5926 31.0012 13.5316C31.7492 13.9294 32.5449 14.1522 33.3884 14.2159C33.8499 14.2477 34.2955 14.2477 34.757 14.2C35.505 14.1045 36.2212 13.8817 36.9055 13.5475C37.0487 13.4838 37.176 13.4679 37.3352 13.4838C37.6694 13.5316 37.9877 13.5634 38.3219 13.5952C38.7675 13.643 39.2131 13.6907 39.6587 13.7385C39.8656 13.7544 40.0884 13.7703 40.3271 13.8021Z\" fill=\"#999\"/>\n\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t\t<svg width=\"13\" height=\"14\" viewBox=\"0 0 13 14\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t\t\t\t\t\t\t\t\t<path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M6.145 8.0856L0.5 13.7847V0.5H12.5V13.7847L6.855 8.0856L6.5 7.727L6.145 8.0856Z\" stroke=\"#999\"/>\n\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<div class=\"crm-order-instagram-view-item-decs-block\">\n\t\t\t\t\t\t\t\t\t<div class=\"crm-order-instagram-view-item-decs\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"crm-order-instagram-view-item-name\">${BX.util.htmlspecialchars(postListItem.caption||'')}</span>\n\t\t\t\t\t\t\t\t\t\t<span class=\"crm-order-instagram-view-item-edit\"></span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"crm-order-instagram-view-item-checkbox-container\">\n\t\t\t\t\t\t\t\t<input class=\"crm-order-instagram-view-item-input\" \n\t\t\t\t\t\t\t\t\t\ttype=\"checkbox\" \n\t\t\t\t\t\t\t\t\t\tid=\"${postListItem.id}\" \n\t\t\t\t\t\t\t\t\t\tdata-id=\"${postListItem.id}\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div class=\"crm-order-instagram-view-item-input-title\">${Loc.getMessage('SEO_AD_BUILDER_POST_SELECTOR_SELECT')}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"crm-order-instagram-view-item-selected-icon\">\n\t\t\t\t\t\t\t<svg width=\"13\" height=\"10\" viewBox=\"0 0 13 10\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t\t\t\t\t\t<path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M4.87744 6.02868L10.9842 0L12.8322 1.85828L4.90632 9.7162L4.87744 9.68717L4.84857 9.7162L0 5.02339L1.84802 3.16511L4.87744 6.02868Z\" fill=\"white\"/>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</label>`;\n\t\t\t\tthis.listContent.appendChild(postBlock);\n\n\t\t\t\tEvent.bind(postBlock, 'click', this.selectPost.bind(this));\n\n\t\t\t\tthis.dataContent[postListItem.id] = postListItem;\n\t\t\t\tthis.showListContentBlock();\n\n\t\t\t\tconst text = new BX.UI.TextCrop({\n\t\t\t\t\trows: 3,\n\t\t\t\t\ttarget: postBlock.querySelector('.crm-order-instagram-view-item-name'),\n\t\t\t\t});\n\t\t\t\ttext.init();\n\t\t\t}\n\t\t);\n\n\t\tthis.loader.hide();\n\n\t\tif (data.last)\n\t\t{\n\t\t\tthis.last = data.last;\n\t\t\treturn;\n\t\t}\n\n\t\tif(Object.keys(this.dataContent).length === 0)\n\t\t{\n\t\t\tthis.hideListContentBlock();\n\t\t\tthis.showEmptyListBlock();\n\t\t}\n\n\t\tthis.stopLoading = true;\n\t}\n\n\tselectPost(event)\n\t{\n\t\tconst targetElement = event.target;\n\t\tconst id = targetElement.dataset.id;\n\n\t\tdocument.querySelectorAll('.crm-order-instagram-view-item-input').forEach(\n\t\t\telement => {\n\t\t\t\telement.checked = id === element.dataset.id;\n\t\t\t}\n\t\t)\n\n\t\tdocument.querySelectorAll('.crm-order-instagram-view-item').forEach(\n\t\t\telement => {\n\t\t\t\tBX.removeClass(element, \"crm-order-instagram-view-item-selected\")\n\t\t\t}\n\t\t)\n\n\t\tBX.addClass(document.querySelector('#instItemID_' + id), \"crm-order-instagram-view-item-selected\");\n\n\t\tBX.SidePanel.Instance.close();\n\n\t\tBX.SidePanel.Instance.postMessage(\n\t\t\twindow,\n\t\t\t'seo-ads-post-selected',\n\t\t\tthis.dataContent[id]\n\t\t);\n\t}\n}","import { Helper } from './helper';\nimport { Event, Loc } from \"main.core\";\nimport {type PostSelectorOptions} from './types/postselectoroptions'\nimport { TagSelector } from 'ui.entity-selector';\n\nexport class SeoAudience\n{\n\t_accountId: string;\n\t_clientId: string;\n\t_type: string;\n\n\tconstructor(options: PostSelectorOptions)\n\t{\n\t\tthis.helper = Helper.getCreated();\n\t\tthis.last = null;\n\t\tthis._accountId = options.accountId;\n\t\tthis._clientId = options.clientId;\n\t\tthis._type = options.type;\n\t\tthis.signedParameters = options.signedParameters;\n\t\tthis.emptyBlock = document.querySelector('.seo-ads-empty-post-list-block');\n\t\tthis.listContent = document.querySelector('.crm-order-instagram-view-list');\n\t\tthis.dataContent = [];\n\t\tthis.selectedInterest = {};\n\t\tthis.loader = new BX.Loader({\n\t\t\ttarget: document.querySelector(\".crm-order-instagram-view\")\n\t\t});\n\n\t\tthis.rangeInput = document.querySelector('.crm-ads-new-campaign-item-runner-value');\n\t\tthis.inputMax = BX('max');\n\t\tthis.inputMin = BX('min');\n\t\tthis.MAX_VALUE = 65;\n\t\tthis.MIN_VALUE = 13;\n\t\tthis.init();\n\t}\n\n\tinit()\n\t{\n\t\tdocument.querySelectorAll('.crm-ads-new-campaign-item-runner-input').forEach(element => {\n\t\t\tconst block = element.closest('.crm-ads-new-campaign-item-runner-block--double');\n\t\t\tif (block)\n\t\t\t{\n\t\t\t\tthis.setDoubleInputPosition();\n\t\t\t\tthis.setDoubleLabelPosition(element);\n\t\t\t\tEvent.bind(element, 'change', this.onDoubleInputRange.bind(this));\n\t\t\t\tEvent.bind(element, 'input', this.onDoubleInputRange.bind(this));\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tEvent.bind(element, 'change', this.onInputRange.bind(this));\n\t\t\t\tEvent.bind(element, 'input', this.onInputRange.bind(this));\n\t\t\t}\n\t\t});\n\t\tthis.buildSelector();\n\t}\n\n\tcheckSex()\n\t{\n\n\t}\n\n\tonInputRange(event)\n\t{\n\t\tconst label = event.target.closest('.crm-ads-new-campaign-item-runner-block').children[0].children[0];\n\t\tconst value = event.target.value;\n\n\t\tif(value < this.MIN_VALUE)\n\t\t{\n\t\t\tevent.target.value = this.MIN_VALUE;\n\t\t}\n\n\t\tlabel.textContent = event.target.value;\n\t\tthis.rangeInput.style.width = event.target.offsetWidth * event.target.value/65 +\"px\";\n\t}\n\n\tonDoubleInputRange(event)\n\t{\n\t\tthis.setDoubleLabelPosition(event.target);\n\t\tthis.setDoubleInputPosition();\n\n\t}\n\n\tsetDoubleLabelPosition (element)\n\t{\n\t\tconst value = element.value;\n\t\tconst label = element.previousElementSibling;\n\n\t\tif (value < this.MIN_VALUE)\n\t\t{\n\t\t\telement.value = this.MIN_VALUE;\n\t\t}\n\n\t\tlabel.children[0].textContent = element.value;\n\t\tlabel.style.left = (((value - this.MIN_VALUE) / (this.MAX_VALUE - this.MIN_VALUE)) * (element.offsetWidth - 70)) + 20 + 'px';\n\n\t}\n\n\tsetDoubleInputPosition()\n\t{\n\t\tconst labelMaxLeft = BX('label-max').getBoundingClientRect().left;\n\t\tconst labelMinLeft = BX('label-min').getBoundingClientRect().left;\n\n\t\tconst min = Math.min(labelMaxLeft, labelMinLeft);\n\n\t\tif (labelMaxLeft === min)\n\t\t{\n\t\t\tthis.rangeInput.style.width = ((((this.inputMin.value - this.MIN_VALUE)/ (this.MAX_VALUE - this.MIN_VALUE)) * (this.inputMin.offsetWidth - 40)) + 20)\n\t\t\t\t- ((((this.inputMax.value - this.MIN_VALUE)/ (this.MAX_VALUE - this.MIN_VALUE)) * (this.inputMax.offsetWidth - 40)) + 20) + 'px';\n\t\t\tthis.rangeInput.style.left = (((this.inputMax.value - this.MIN_VALUE)/ (this.MAX_VALUE- this.MIN_VALUE)) * (this.inputMax.offsetWidth - 40)) + 20 + 'px';\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.rangeInput.style.width = ((((this.inputMax.value - this.MIN_VALUE)/ (this.MAX_VALUE - this.MIN_VALUE)) * (this.inputMax.offsetWidth - 40)) + 20)\n\t\t\t\t- ((((this.inputMin.value - this.MIN_VALUE)/ (this.MAX_VALUE - this.MIN_VALUE)) * (this.inputMin.offsetWidth - 40)) + 20) + 'px';\n\n\t\t\tthis.rangeInput.style.left = (((this.inputMin.value - this.MIN_VALUE) / (this.MAX_VALUE - this.MIN_VALUE)) * (this.inputMin.offsetWidth - 40)) + 20 + 'px';\n\t\t}\n\t}\n\n\tbuildSelector()\n\t{\n\t\tconst selector = new TagSelector({\n\t\t\tid: 'seo-ads-interests',\n\t\t\tdialogOptions: {\n\t\t\t\tid: 'seo-ads-interests',\n\t\t\t\tcontext: 'SEO_ADS_INTERESTS',\n\t\t\t\tdropdownMode: true,\n\t\t\t\tsearchOptions: {\n\t\t\t\t\tallowCreateItem: false\n\t\t\t\t},\n\t\t\t\twidth: 350,\n\t\t\t\theight: 250,\n\t\t\t\trecentTabOptions: {\n\t\t\t\t\tstub: true,\n\t\t\t\t\tstubOptions: {\n\t\t\t\t\t\ttitle: Loc.getMessage('UI_TAG_SELECTOR_START_INPUT'),\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tevents: {\n\t\t\t\t\t'Item:onSelect': event => {\n\t\t\t\t\t\tconst data = event.data.item;\n\t\t\t\t\t\tthis.selectedInterest[data.id] = data;\n\t\t\t\t\t\tlet sum = 0;\n\n\t\t\t\t\t\tfor (let key in this.selectedInterest)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tsum += this.selectedInterest[key].customData.get('audienceSize');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tdocument.querySelector('.crm-ads-new-campaign-item-cost-value').textContent = sum;\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tentities: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'facebook_interests',\n\t\t\t\t\t\tsearchable: true,\n\t\t\t\t\t\tdynamicSearch: true,\n\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\tclientId: this._clientId\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t}\n\t\t});\n\n\t\tselector.renderTo(document.getElementById('seo-ads-interests'));\n\t}\n\n\tshowEmptyListBlock()\n\t{\n\t\tthis.emptyBlock.style.display = 'block';\n\t}\n\n\thideEmptyListBlock()\n\t{\n\t\tthis.emptyBlock.style.display = 'none';\n\t}\n\n\tshowListContentBlock()\n\t{\n\t\tthis.listContent.parentNode.style.display = 'block';\n\t}\n\n\thideListContentBlock()\n\t{\n\t\tthis.listContent.parentNode.style.display = 'none';\n\t}\n\n\tapply(applyBtn)\n\t{\n\t\tapplyBtn.classList.remove('ui-btn-wait');\n\t\tBX.SidePanel.Instance.close();\n\t\tlet genders = [];\n\t\tlet genderTitles = [];\n\n\t\tif(document.getElementById('male').checked)\n\t\t{\n\t\t\tgenders.push(1);\n\t\t\tgenderTitles.push(document.getElementById('male').parentNode.querySelector('span').innerText);\n\t\t}\n\n\t\tif(document.getElementById('female').checked)\n\t\t{\n\t\t\tgenders.push(2);\n\t\t\tgenderTitles.push(document.getElementById('female').parentNode.querySelector('span').innerText);\n\t\t}\n\n\t\tlet interests = []\n\t\tObject.entries(this.selectedInterest).forEach(entry => {\n\t\t\tconst [key, value] = entry;\n\t\t\tinterests.push({\n\t\t\t\tid: value.id,\n\t\t\t\tname: value.title,\n\t\t\t})\n\t\t});\n\n\t\tBX.SidePanel.Instance.postMessage(\n\t\t\twindow,\n\t\t\t'seo-fb-audience-configured',\n\t\t\t{\n\t\t\t\tinterests: interests,\n\t\t\t\tageFrom: Math.min(this.inputMin.value, this.inputMax.value),\n\t\t\t\tageTo: Math.max(this.inputMin.value, this.inputMax.value),\n\t\t\t\tgenderTitles: genderTitles,\n\t\t\t\tgenders: genders\n\t\t\t}\n\t\t);\n\t}\n}","export class SeoCrmAudience\n{\n\tstatic apply(applyBtn)\n\t{\n\t\tBX.SidePanel.Instance.close();\n\t\tBX.SidePanel.Instance.postMessage(\n\t\t\twindow,\n\t\t\t'seo-crm-audience-configured',\n\t\t\t{\n\t\t\t\tsegmentInclude: window.senderSegmentSelector.selectorInclude.selector.getTilesId() || [],\n\t\t\t\tsegmentExclude: window.senderSegmentSelector.selectorExclude.selector.getTilesId() || []\n\t\t\t}\n\t\t);\n\n\t\tsetTimeout(() => {\n\t\t\tapplyBtn.classList.remove('ui-btn-wait')\n\t\t}, 200)\n\t}\n}","import { Helper } from './helper';\n\nexport class PageConfiguration\n{\n\n\tconstructor()\n\t{\n\t\tthis.helper = Helper.getCreated();\n\t\tthis.targetUrlBlock = document.querySelector('.seo-ads-target-url');\n\n\t\treturn this;\n\t}\n\n\tapply(applyBtn)\n\t{\n\t\tif(!this.validateUrl(this.targetUrlBlock.value))\n\t\t{\n\t\t\tthis.removeWait(applyBtn);\n\t\t\treturn;\n\t\t}\n\n\t\tBX.SidePanel.Instance.close();\n\n\t\tBX.SidePanel.Instance.postMessage(\n\t\t\twindow,\n\t\t\t'seo-ads-target-post-selected',\n\t\t\t{\n\t\t\t\ttargetUrl: this.targetUrlBlock.value\n\t\t\t}\n\t\t);\n\t\tthis.removeWait(applyBtn);\n\t}\n\n\tremoveWait(applyBtn)\n\t{\n\t\tsetTimeout(() => {\n\t\t\tapplyBtn.classList.remove('ui-btn-wait')\n\t\t}, 200);\n\t}\n\n\tcancel()\n\t{\n\t\tBX.SidePanel.Instance.close();\n\t}\n\n\tvalidateUrl(value)\n\t{\n\t\treturn /^(?:(?:(?:https?|ftp):)?\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))(?::\\d{2,5})?(?:[/?#]\\S*)?$/i.test(value);\n\t}\n}"],"names":["SeoAccount","options","clientNode","avatarNode","accountNode","instagramAccountNode","linkNode","provider","componentName","signedParameters","uiNodes","_helper","Helper","getInstance","loaded","clientSelector","BX","Seo","Ads","ClientSelector","clientBlock","selected","PROFILE","items","CLIENTS","canAddItems","events","onNewItem","LoginFactory","getLoginObject","login","onSelectItem","item","setProfile","onRemoveItem","logout","CLIENT_ID","addCustomEvent","window","proxy","onSeoAuth","eventData","reload","getProvider","clientId","analyticsLabel","TYPE","connect","action","type","showBlock","request","logoutClientId","setSelected","setItems","setProvider","showBlockByAuth","i","length","client","toString","disable","data","enable","accountNotice","ad","style","display","dropDownData","map","accountData","caption","util","htmlspecialchars","name","value","id","accountId","currency","fillDropDownControl","setTimeout","fireEvent","disabled","instagram","pageId","page_id","actorId","actor_id","isSupportAccount","IS_SUPPORT_ACCOUNT","includes","push","loadAccounts","loadInstagramAccounts","showBlockMain","seoAccount","containerNode","mess","errorAction","Loc","getMessage","dlgBtnClose","requestData","callback","analytics","sendActionRequest","response","onResponse","error","apply","callbackSuccess","callbackFailure","showErrorPopup","ajax","runComponentAction","mode","then","console","log","text","popup","PopupManager","create","autoHide","lightShadow","closeByEsc","overlay","backgroundColor","opacity","onErrorPopupClose","bind","buttons","Button","click","close","setContent","show","blockCodes","Type","isArray","attributeBlock","blockNodes","querySelectorAll","forEach","blockNode","code","getAttribute","isShow","dataset","flex","btn","AUTH_URL","setAttribute","PICTURE","nameNode","innerText","NAME","LINK","removeAttribute","loadSettings","HAS_AUTH","showBlockLogin","node","innerHTML","option","Tag","render","appendChild","_instance","undefined","SeoAdBuilder","accountSelected","postSelected","pageSelected","audienceSelected","budgetSelected","toModeration","optionSelectedClass","containerId","context","onRequest","postListUrl","audienceUrl","crmAudienceUrl","pageConfigurationUrl","iBlockId","basePriceId","storeExists","isCloud","baseCurrency","arrows","document","price","_DEFAULT_CURRENCY","duration","completedStages","selectedRegions","loader","init","caller","change","loaderNode","inputNode","initiateUINodes","initiateAutoAudienceMode","_STAGES","deActivateStage","initiateAccounts","activateStage","initiateSwitcher","bindEvents","buildSelector","storeBlockShow","adCreatorData","audienceConfig","crmAudienceConfig","clientInput","avatar","link","account","instagramAccount","profileConfigured","Event","addPost","openPostSlider","createLinks","createLink","hasPostLis","showBlockRefresh","refreshButton","autoRemover","checker","select","checked","addClientBtn","_this","arrow","addEventListener","switchCollapsed","checkCurrency","div","calculateTotal","changeAudienceMode","changeProductSelectionMode","audienceExpert","showAudienceExpertModeForm","productExpert","openTargetPageSlider","addProductBtn","toCreateStoreSlider","addCurrencyBtn","addCurrency","toModerationBtn","sendToModeration","UI","Hint","querySelector","convert","nodeListToArray","Switcher","size","usedCurrency","selectedIndex","currencyExists","event","checkInstagramAccount","target","parentNode","total","element","textContent","classList","remove","add","form","budget","prepareCurrencyBlocks","scrollToStage","showCrmAudienceExpertModeForm","isShown","adsStoreBlock","key","convertToCurrency","targetCurrency","sourceCurrency","amount","Object","keys","prepareCurrencyBlock","exists","currencyBlock","count","course","newCurrency","amountCnt","success","block","closest","content","contains","height","scrollHeight","title","nodeHeight","cleanNode","titleInner","a","offsetHeight","slice","eventId","media_url","postItem","Text","encode","postListNode","addNewNode","previewNode","firstChild","removeChild","insertBefore","backgroundImage","postData","clipTitle","openSlider","sessid","bitrix_sessid","componentParams","ACCOUNT_ID","onPostSelected","targetUrl","reInitAdCreator","audienceSummary","buildAudienceSummary","cacheable","onTargetPageSelected","url","params","sliderOptions","width","allowChangeHistory","requestMethod","requestParams","eventName","SidePanel","Slider","getEventFullName","removeAllCustomEvents","Instance","open","onFBAudienceConfigured","onCrmAudienceConfigured","genders","ageFrom","ageTo","summary","genderTitles","join","interests","interest","segmentInclude","regions","formNode","client_id","instagramAccountId","body","mediaId","permalink","imageUrl","countries","getElementById","JSON","stringify","include","exclude","segmentExclude","input","submit","stageNum","stage","line","number","scrollIntoView","behavior","selector","TagSelector","dialogOptions","dropdownMode","compactView","showAvatars","recentTabOptions","stub","stubOptions","searchOptions","allowCreateItem","entities","searchable","dynamicSearch","renderTo","getDialog","getRecentTab","setVisible","selectorOptions","iblockId","fields","fileInputId","config","ENABLE_SEARCH","ENABLE_IMAGE_CHANGE_SAVING","productSelector","ProductSelector","EventEmitter","subscribe","productSelectedEvent","fieldData","ID","SeoPostSelector","helper","getCreated","last","stopLoading","loadInProgress","_accountId","_clientId","_type","emptyBlock","listContent","dataContent","Loader","hideListContentBlock","topSlider","getTopSlider","iframe","contentDocument","observer","IntersectionObserver","loadPostList","root","rootMargin","threshold","observe","successFn","hide","postList","postListItem","postBlock","selectPost","showListContentBlock","TextCrop","rows","showEmptyListBlock","targetElement","removeClass","addClass","postMessage","SeoAudience","selectedInterest","rangeInput","inputMax","inputMin","MAX_VALUE","MIN_VALUE","setDoubleInputPosition","setDoubleLabelPosition","onDoubleInputRange","onInputRange","label","children","offsetWidth","previousElementSibling","left","labelMaxLeft","getBoundingClientRect","labelMinLeft","min","Math","sum","customData","get","applyBtn","entries","entry","max","SeoCrmAudience","senderSegmentSelector","selectorInclude","getTilesId","selectorExclude","PageConfiguration","targetUrlBlock","validateUrl","removeWait","test"],"mappings":"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"}