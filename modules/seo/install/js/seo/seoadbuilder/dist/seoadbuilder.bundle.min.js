this.BX=this.BX||{};(function(e,t,i,a,n,s){"use strict";var o=function(){function e(t){var i=this;babelHelpers.classCallCheck(this,e);this.clientNode=t.clientNode;this.avatarNode=t.avatarNode;this.accountNode=t.accountNode;this.instagramAccountNode=t.instagramAccountNode;this.linkNode=t.linkNode;this.provider=t.provider;this.componentName=t.componentName;this.signedParameters=t.signedParameters;this.uiNodes=t.uiNodes;this._helper=c.getInstance(this,[]);this.loaded=[];this.clientSelector=new BX.Seo.Ads.ClientSelector(t.clientBlock,{selected:this.provider.PROFILE,items:this.provider.CLIENTS,canAddItems:true,events:{onNewItem:function e(){BX.util.popup(i.provider.AUTH_URL,800,600)},onSelectItem:function e(t){i.setProfile(t)},onRemoveItem:function e(t){i.logout(t.CLIENT_ID)}}});return this}babelHelpers.createClass(e,[{key:"listenSeoAuth",value:function e(){BX.addCustomEvent(window,"seo-client-auth-result",BX.proxy(this.onSeoAuth,this))}},{key:"onSeoAuth",value:function e(t){t.reload=false;this.getProvider(t.clientId)}},{key:"logout",value:function e(t){var i=this;this._helper.showBlock("loading");this._helper.request("logout",{logoutClientId:t},function(e){i.provider=e;if(i.clientSelector){i.clientSelector.setSelected(i.provider.PROFILE);i.clientSelector.setItems(i.provider.CLIENTS)}i._helper.setProvider(e);i._helper.showBlockByAuth()})}},{key:"getProvider",value:function e(t){var i=this;this.showBlock("loading");this.request("getProvider",{},function(e){i.provider=e;if(i.clientSelector){if(!i.provider.PROFILE||t&&t!==i.provider.PROFILE.CLIENT_ID){for(var a=0;a<i.provider.CLIENTS.length;a++){var n=i.provider.CLIENTS[a];if(!t||t.toString()===n.CLIENT_ID.toString()){i.setProfile(n);break}}}i.clientSelector.setSelected(i.provider.PROFILE);i.clientSelector.setItems(i.provider.CLIENTS)}i.showBlockByAuth()})}},{key:"loadAccounts",value:function e(t){var i=this;if(this.clientSelector){this.clientSelector.disable()}this._helper.request("getAccounts",{},function(e){if(i.clientSelector){i.clientSelector.enable()}i.uiNodes.accountNotice.ad.style.display="none";if(!e.length){i.uiNodes.accountNotice.ad.style.display="block";return}var t=e.map(function(e){return{caption:e.name,value:e.id,selected:e.id===i.accountId,currency:e.currency}},i);i._helper.fillDropDownControl(i.accountNode,t);if(t.length>0){setTimeout(function(){BX.fireEvent(i.accountNode,"change")},150)}i.accountNode.disabled=false})}},{key:"loadInstagramAccounts",value:function e(t){var i=this;if(this.clientSelector){this.clientSelector.disable()}this._helper.request("getInstagramAccounts",{},function(e){if(i.clientSelector){i.clientSelector.enable()}i.uiNodes.accountNotice.instagram.style.display="none";if(!e.length){i.uiNodes.accountNotice.instagram.style.display="block";return}var t=e.map(function(e){return{caption:e.name,value:e.id,pageId:e.page_id,actorId:e.actor_id}},i);i._helper.fillDropDownControl(i.instagramAccountNode,t);if(t.length>0){setTimeout(function(){BX.fireEvent(i.instagramAccountNode,"change")},150)}i.instagramAccountNode.disabled=false})}},{key:"loadSettings",value:function e(){this.instagramAccountNode.disabled=true;this.accountNode.disabled=true;var t=this.provider.TYPE;var i=this.provider.IS_SUPPORT_ACCOUNT;if(!this.provider.PROFILE){return}if(!this.loaded.includes(t)){this.loaded.push(t)}if(this.accountNode&&i){this.loadAccounts();this.loadInstagramAccounts()}}},{key:"setProfile",value:function e(t){this.clientId=t&&t.CLIENT_ID?t.CLIENT_ID:null;this.provider.PROFILE=t;this.accountId=null;this.pageId=null;if(this.clientSelector.selected){this._helper.showBlockMain()}this.clientSelector.setSelected(t)}}]);return e}();function r(){var e=babelHelpers.taggedTemplateLiteral(["<option value='","' selected='","'>","</option>"]);r=function t(){return e};return e}var c=function(){function e(t){babelHelpers.classCallCheck(this,e);this.provider=t.provider;this.clientId=t.clientId;this.clientSelector=t.clientSelector;this.clientNode=t.clientNode;this.avatarNode=t.avatarNode;this.linkNode=t.linkNode;this.seoAccount=t;this.signedParameters=t.signedParameters;this.containerNode=BX("crm-ads-new-campaign");this.mess={errorAction:s.Loc.getMessage("UI_HELPER_ERROR_MSG"),dlgBtnClose:s.Loc.getMessage("UI_HELPER_BUTTON_CLOSE")};return this}babelHelpers.createClass(e,[{key:"setProvider",value:function e(t){this.provider=t}},{key:"request",value:function e(t,i,a){i.action=t;i.type=this.seoAccount.provider.TYPE;i.clientId=this.seoAccount.clientId;this.sendActionRequest(t,i,function(e){this.onResponse(e,a)})}},{key:"onResponse",value:function e(t,i){if(!t.error){i.apply(this,[t.data])}}},{key:"sendActionRequest",value:function e(t,i,a,n){var s=this;a=a||null;n=n||BX.proxy(this.showErrorPopup,this);i=i||{};BX.ajax.runComponentAction(this.seoAccount.componentName,t,{mode:"class",signedParameters:this.signedParameters,data:i}).then(function(e){var t=e.data||{};if(t.error){n.apply(s,[t])}else if(a){a.apply(s,[t])}},function(){var e={error:true,text:""};n.apply(s,[e])})}},{key:"showErrorPopup",value:function e(a){console.log(a);var n=a.text||this.mess.errorAction;var s=t.PopupManager.create({id:"crm_ads_rtg_error",autoHide:true,lightShadow:true,closeByEsc:true,overlay:{backgroundColor:"black",opacity:500},events:{onPopupClose:this.onErrorPopupClose.bind(this)},buttons:[new i.Button({text:"close"||this.mess.dlgBtnClose,events:{click:function e(){s.close()}}})]});s.setContent('<span class="crm-ads-rtg-warning-popup-alert">'.concat(n,"</span>"));s.show()}},{key:"onErrorPopupClose",value:function e(){if(this.clientSelector){this.clientSelector.enable()}}},{key:"showBlock",value:function e(t){t=s.Type.isArray(t)?t:[t];var i="data-bx-ads-block";var a=babelHelpers.toConsumableArray(this.containerNode.querySelectorAll("["+i+"]"));a.forEach(function(e){var a=e.getAttribute(i);var n=t.includes(a);e.style.display=n?e.dataset.flex?"flex":"block":"none"},this)}},{key:"showBlockRefresh",value:function e(){this.showBlock(["auth","refresh"])}},{key:"showBlockLogin",value:function e(){this.showBlock("login");var t=BX("seo-ads-login-btn");if(t&&this.provider&&this.provider.AUTH_URL){t.setAttribute("onclick","BX.util.popup('"+this.provider.AUTH_URL+"', 800, 600);")}if(this.clientNode){this.clientNode.value=""}}},{key:"showBlockMain",value:function e(){if(this.avatarNode){this.avatarNode.style["background-image"]="url("+this.provider.PROFILE.PICTURE+")"}if(this.nameNode){this.nameNode.innerText=this.provider.PROFILE.NAME}if(this.linkNode){if(this.provider.PROFILE.LINK){this.linkNode.setAttribute("href",this.provider.PROFILE.LINK)}else{this.linkNode.removeAttribute("href")}}if(this.clientNode){this.clientNode.value=this.provider.PROFILE&&this.provider.PROFILE.CLIENT_ID?this.provider.PROFILE.CLIENT_ID:""}this.showBlock(["auth","main"]);this.seoAccount.loadSettings()}},{key:"showBlockByAuth",value:function e(){if(this.provider.HAS_AUTH){this.showBlockMain()}else{this.showBlockLogin()}}},{key:"fillDropDownControl",value:function e(t,i){i=i||[];t.innerHTML="";i.forEach(function(e){if(!e||!e.caption){return}var i=s.Tag.render(r(),e.value,!!e.selected,e.caption);if(e.currency){i.dataset.currency=e.currency}if(e.pageId){i.dataset.pageId=e.pageId}if(e.actorId){i.dataset.actorId=e.actorId}t.appendChild(i)})}}],[{key:"getCreated",value:function e(){if(this._instance===undefined){return null}return this._instance}},{key:"getInstance",value:function t(i,a){if(this._instance===undefined){this._instance=new e(i,a)}return this._instance}}]);return e}();function d(){var e=babelHelpers.taggedTemplateLiteral(["<input type=\"hidden\" name='SEGMENT[EXCLUDE][]'>"]);d=function t(){return e};return e}function l(){var e=babelHelpers.taggedTemplateLiteral(["<input type=\"hidden\" name='SEGMENT[INCLUDE][]'>"]);l=function t(){return e};return e}function u(){var e=babelHelpers.taggedTemplateLiteral([' \n\t\t\t<div class="crm-ads-new-campaign-item-post">\n\t\t\t   <div class="crm-ads-new-campaign-item-post-img" \n\t\t\t\t\tstyle="background-image: url(',')">\n\t\t\t   </div>\n\t\t\t   <span class="crm-ads-new-campaign-item-post-text">','</span>\n\t\t\t   <span class="crm-ads-new-campaign-item-post-delete"></span>\n\t\t\t</div>\n\t\t\t']);u=function t(){return e};return e}var h=function(){function e(t){var i=this;babelHelpers.classCallCheck(this,e);babelHelpers.defineProperty(this,"_DEFAULT_CURRENCY","RUB");babelHelpers.defineProperty(this,"_STAGES",{accountSelected:1,postSelected:2,pageSelected:3,audienceSelected:4,budgetSelected:5,toModeration:6});if(this._instance){return this._instance}this.optionSelectedClass="crm-ads-new-campaign-item-option--selected";this.containerId=t.containerId;this.provider=t.provider;this.context=t.context;this.onRequest=t.onRequest;this.componentName=t.componentName;this.signedParameters=t.signedParameters;this.postListUrl=t.postListUrl;this.audienceUrl=t.audienceUrl;this.crmAudienceUrl=t.crmAudienceUrl;this.pageConfigurationUrl=t.pageConfigurationUrl;this.mess=t.mess;this.type=t.type;this.iBlockId=t.iBlockId;this.basePriceId=t.basePriceId;this.storeExists=t.storeExists;this.isCloud=t.isCloud||false;this.clientId=t.clientId;this.accountId=t.accountId;this.baseCurrency=t.baseCurrency;this.arrows=document.querySelectorAll(".crm-ads-new-campaign-item-arrow");this.price=[];this.price[this._DEFAULT_CURRENCY]=[];this.price[this._DEFAULT_CURRENCY]["recommended"]={duration:3,value:100};this.price[this._DEFAULT_CURRENCY]["verified"]={duration:3,value:200};this.price[this._DEFAULT_CURRENCY]["boost"]={duration:3,value:300};this.price[this._DEFAULT_CURRENCY]["confident"]={duration:5,value:500};this.price["USD"]=[];this.price["USD"]["recommended"]={duration:3,value:50};this.price["USD"]["verified"]={duration:3,value:100};this.price["USD"]["boost"]={duration:3,value:150};this.price["USD"]["confident"]={duration:5,value:200};this.price["EUR"]=[];this.price["EUR"]["recommended"]={duration:3,value:50};this.price["EUR"]["verified"]={duration:3,value:100};this.price["EUR"]["boost"]={duration:3,value:150};this.price["EUR"]["confident"]={duration:5,value:200};this.completedStages={};this.selectedRegions={};this.loader={init:function e(t){i.caller=t},change:function e(t,i,a){t.style.display=a?"":"none";if(i){i.disabled=!i.options.length===0||a?false:true}}};this.init()}babelHelpers.createClass(e,[{key:"init",value:function e(){this._instance=this;this.initiateUINodes();this.initiateAutoAudienceMode();for(var t=this._STAGES.accountSelected;t<=this._STAGES.toModeration;t++){this.deActivateStage(t)}this.initiateAccounts();this.activateStage(this._STAGES.audienceSelected);this.initiateSwitcher("product");this.initiateSwitcher("audience");this.initiateSwitcher("budget");this.bindEvents();this.buildSelector();this.storeBlockShow(true)}},{key:"reInitAdCreator",value:function e(){this.adCreatorData={};this.adCreatorData.audienceConfig={};this.adCreatorData.crmAudienceConfig={}}},{key:"initiateAccounts",value:function e(){this.seoAccount=new o({clientNode:this.uiNodes.clientInput,provider:this.provider,avatarNode:this.uiNodes.avatar,linkNode:this.uiNodes.link,accountNode:this.uiNodes.account,instagramAccountNode:this.uiNodes.instagramAccount,clientBlock:this.uiNodes.clientBlock,signedParameters:this.signedParameters,componentName:this.componentName,uiNodes:this.uiNodes});this.profileConfigured=false;if(!this.clientId&&!this.provider.PROFILE){for(var t=0;t<this.provider.CLIENTS.length;t++){this.seoAccount.setProfile(this.provider.CLIENTS[t]);this.profileConfigured=true;break}}this.loader.init(this);if(this.provider.PROFILE){this.activateStage(this._STAGES.accountSelected)}if(!this.profileConfigured){this.seoAccount.setProfile(this.provider.PROFILE)}this.seoAccount._helper.showBlockByAuth()}},{key:"bindEvents",value:function e(){var t=this;s.Event.bind(this.uiNodes.addPost,"click",this.openPostSlider.bind(this));this.uiNodes.createLinks.forEach(function(e){s.Event.bind(e,"click",BX.proxy(function(){if(!this.hasPostLis){this.showBlockRefresh()}},this))},this);s.Event.bind(this.uiNodes.refreshButton,"click",BX.proxy(function(){this.seoAccount.getProvider()},this));if(this.uiNodes.autoRemover.checker){s.Event.bind(this.uiNodes.autoRemover.checker,"click",function(){var e=t.uiNodes.autoRemover;e.select.disabled=!e.checker.checked})}s.Event.bind(this.uiNodes.logout,"click",BX.proxy(function(){this.seoAccount.logout(this.clientId)},this));s.Event.bind(this.uiNodes.addClientBtn,"click",BX.proxy(function(){BX.util.popup(_this.provider.AUTH_URL,800,600)},this));this.arrows.forEach(function(e){e.addEventListener("click",t.switchCollapsed)});s.Event.bind(this.uiNodes.account,"change",this.checkCurrency.bind(this));document.querySelectorAll(".seo-ads-budget-item-block").forEach(function(e){s.Event.bind(e,"click",t.calculateTotal.bind(t))});document.querySelectorAll(".seo-ads-audience-item-block").forEach(function(e){s.Event.bind(e,"click",t.changeAudienceMode.bind(t))});document.querySelectorAll(".seo-ads-product-item-block").forEach(function(e){s.Event.bind(e,"click",t.changeProductSelectionMode.bind(t))});s.Event.bind(this.uiNodes.audienceExpert,"click",this.showAudienceExpertModeForm.bind(this));s.Event.bind(this.uiNodes.productExpert,"click",this.openTargetPageSlider.bind(this));s.Event.bind(this.uiNodes.addProductBtn,"click",this.toCreateStoreSlider.bind(this));s.Event.bind(this.uiNodes.addCurrencyBtn,"click",this.addCurrency.bind(this));s.Event.bind(this.uiNodes.toModerationBtn,"click",this.sendToModeration.bind(this))}},{key:"initiateUINodes",value:function e(){this.containerNode=BX("crm-ads-new-campaign");BX.UI.Hint.init(this.containerNode);this.uiNodes={avatar:this.containerNode.querySelector("[data-bx-ads-auth-avatar]"),name:this.containerNode.querySelector("[data-bx-ads-auth-name]"),link:this.containerNode.querySelector("[data-bx-ads-auth-link]"),logout:this.containerNode.querySelector("[data-bx-ads-auth-logout]"),clientBlock:this.containerNode.querySelector("[data-bx-ads-client]"),clientInput:this.containerNode.querySelector("[data-bx-ads-client-input]"),account:this.containerNode.querySelector("[data-bx-ads-account]"),accountLoader:this.containerNode.querySelector("[data-bx-ads-account-loader]"),instagramAccount:this.containerNode.querySelector("[data-bx-ads-instagram-account]"),instagramAccountLoader:this.containerNode.querySelector("[data-bx-ads-instagram-account-loader]"),errorNotFound:this.containerNode.querySelector("[data-bx-ads-post-not-found]"),addPost:this.containerNode.querySelector(".crm-ads-new-campaign-item-post-new"),addProductBtn:this.containerNode.querySelector(".seo-ads-add-product-btn"),addCurrencyBtn:this.containerNode.querySelector(".seo-ads-currency-apply-btn"),toModerationBtn:this.containerNode.querySelector(".seo-ads-to-moderation-btn"),refreshButton:this.containerNode.querySelector("[data-bx-ads-refresh-btn]"),currencyBlock:document.querySelector(".seo-ads-currency-block"),audienceSummary:document.querySelector(".seo-ads-audience-summary"),createLinks:BX.convert.nodeListToArray(this.containerNode.querySelectorAll("[data-bx-ads-post-create-link]")),accountNotice:{instagram:this.containerNode.querySelector(".seo-ads-no-ad-account-instagram"),ad:this.containerNode.querySelector(".seo-ads-no-ad-account")},audienceExpert:BX("crm-ads-new-campaign-item-expert-audience"),productExpert:BX("crm-ads-new-campaign-item-expert-product"),budgetExpert:BX("crm-ads-new-campaign-item-expert-budget"),autoRemover:{node:this.containerNode.querySelector("[data-bx-ads-post-auto-remove]"),checker:this.containerNode.querySelector("[data-bx-ads-post-auto-remove-checker]"),select:this.containerNode.querySelector("[data-bx-ads-post-auto-remove-select]")},form:{permalink:this.containerNode.querySelector("[data-bx-ads-permalink]"),mediaId:this.containerNode.querySelector("[data-bx-ads-media-id]"),targetUrl:this.containerNode.querySelector("[data-bx-ads-target-url]"),duration:this.containerNode.querySelector("[data-bx-ads-duration]"),page:this.containerNode.querySelector("[data-bx-ads-page-id]"),body:this.containerNode.querySelector("[data-bx-ads-body]"),adsId:this.containerNode.querySelector("[data-bx-ads-id]"),pageId:this.containerNode.querySelector("[data-bx-ads-page-id]"),budget:this.containerNode.querySelector("[data-bx-ads-budget]"),ageFrom:this.containerNode.querySelector("[data-bx-ads-age-from]"),ageTo:this.containerNode.querySelector("[data-bx-ads-age-to]"),genders:this.containerNode.querySelector("[data-bx-ads-genders]"),interests:this.containerNode.querySelector("[data-bx-ads-interests]"),imageUrl:this.containerNode.querySelector("[data-bx-ads-image-url]"),instagramAccountId:this.containerNode.querySelector("[data-bx-ads-actor-id]"),segmentInclude:this.containerNode.querySelector("[data-bx-ads-segment-include]"),segmentExclude:this.containerNode.querySelector("[data-bx-ads-segment-exclude]"),regions:this.containerNode.querySelector("[data-bx-ads-regions]")},adsStoreBlock:this.containerNode.querySelectorAll(".seo-ads-store"),addClientBtn:this.containerNode.querySelector("[data-bx-ads-client-add-btn]"),addPostBtn:this.containerNode.querySelector("[data-bx-ads-post-add]")}}},{key:"initiateSwitcher",value:function e(t){new BX.UI.Switcher({node:BX("crm-ads-new-campaign-item-expert-".concat(t)),size:"small"})}},{key:"checkCurrency",value:function e(){var t=this.uiNodes.account;this.usedCurrency=t.options[t.selectedIndex].dataset.currency;this.currencyExists(this.usedCurrency)}},{key:"calculateTotal",value:function e(t){var i=this;if(this.checkInstagramAccount()){return}var a=t.target.dataset.type?t.target:t.target.parentNode;var n=a.dataset.type;var s=this.price[this.usedCurrency][n];var o=s.duration*s.value;document.querySelectorAll(".seo-ads-budget-total-value").forEach(function(e){e.textContent=o});document.querySelector(".seo-ads-budget-total-currency").textContent=this.usedCurrency;document.querySelector(".seo-ads-budget-total-duration").textContent=s.duration;document.querySelector(".seo-ads-total-budget").textContent=o;document.querySelector(".seo-ads-total-currency").textContent=this.usedCurrency;document.querySelector(".seo-ads-total-duration").textContent=s.duration;document.querySelector(".crm-ads-new-campaign-item-cost").style.display="block";document.querySelectorAll(".seo-ads-budget-item-block").forEach(function(e){e.classList.remove(i.optionSelectedClass)});a.classList.add(this.optionSelectedClass);this.uiNodes.form.budget.value=o;this.uiNodes.form.duration.value=s.duration;this.prepareCurrencyBlocks();this.activateStage(this._STAGES.budgetSelected)}},{key:"checkInstagramAccount",value:function e(){if(!this.uiNodes.instagramAccount.value){this.scrollToStage(this._STAGES.accountSelected);return true}return false}},{key:"changeAudienceMode",value:function e(t){var i=this;if(this.checkInstagramAccount()){return}var a=t.target.dataset.type?t.target:t.target.parentNode;var n=a.dataset.type;document.querySelectorAll(".seo-ads-audience-item-block").forEach(function(e){e.classList.remove(i.optionSelectedClass)});a.classList.add(this.optionSelectedClass);switch(n){case"auto":this.initiateAutoAudienceMode();break;case"crm":this.showCrmAudienceExpertModeForm();break;case"expert":this.showAudienceExpertModeForm();break}}},{key:"changeProductSelectionMode",value:function e(t){var i=this;if(this.checkInstagramAccount()){return}var a=t.target.dataset.type?t.target:t.target.parentNode;var n=a.dataset.type;document.querySelectorAll(".seo-ads-product-item-block").forEach(function(e){e.classList.remove(i.optionSelectedClass)});a.classList.add(this.optionSelectedClass);switch(n){case"auto":this.storeBlockShow(true);break;case"expert":this.openTargetPageSlider();break}}},{key:"storeBlockShow",value:function e(t){var i=this;this.uiNodes.adsStoreBlock.forEach(function(e){if(i.storeExists&&e.dataset.type==="store-not-created"){return}if(!i.storeExists&&e.dataset.type!=="store-not-created"){return}e.style.display=t?"block":"none"})}},{key:"prepareCurrencyBlocks",value:function e(){var t=this;document.querySelectorAll(".seo-ads-current-currency").forEach(function(e){e.textContent=t.usedCurrency})}},{key:"prepareCurrencyBlock",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this._DEFAULT_CURRENCY;if(!this.price[t]){for(var i in this.price[this._DEFAULT_CURRENCY]){this.convertToCurrency(i,this._DEFAULT_CURRENCY!==this.baseCurrency?this.baseCurrency:t,this.price[this._DEFAULT_CURRENCY][i])}return}for(var a in this.price[t]){document.querySelector(".seo-ads-budget-".concat(a,"-duration")).textContent=this.price[t][a].duration;document.querySelector(".seo-ads-budget-".concat(a,"-value")).textContent=this.price[t][a].value;document.querySelector(".seo-ads-budget-".concat(a,"-currency")).textContent=t}}},{key:"convertToCurrency",value:function e(t,i,a){var n=this;this.seoAccount._helper.request("convertCurrency",{sourceCurrency:this.baseCurrency,targetCurrency:i,amount:a.value},function(e){var s=e.amount;if(!n.price[i]){n.price[i]=[]}if(!n.price[i][t]){n.price[i][t]={duration:a.duration,value:s}}if(Object.keys(n.price[i]).length===4){n.prepareCurrencyBlock(i)}})}},{key:"currencyExists",value:function e(t){var i=this;this.seoAccount._helper.request("checkCurrencyExists",{currency:t},function(e){var t=e.exists;if(t===false){i.prepareCurrencyBlocks();i.uiNodes.currencyBlock.style.display="block"}i.prepareCurrencyBlock(i.usedCurrency)})}},{key:"addCurrency",value:function e(){var t=this;var i=document.querySelector(".seo-ads-currency-count");var a=document.querySelector(".seo-ads-currency-course");if(!i.value||!a){return}this.seoAccount._helper.request("addCurrency",{newCurrency:this.usedCurrency,course:a.value,amountCnt:i.value},function(e){var i=e.success;if(i===false){return}t.uiNodes.currencyBlock.style.display="none";delete t.price[t.usedCurrency];t.prepareCurrencyBlock(t.usedCurrency)})}},{key:"switchCollapsed",value:function e(t){var i=t.target.closest(".crm-ads-new-campaign-item");var a=i.querySelector(".crm-ads-new-campaign-item-content");if(i.classList.contains("crm-ads-new-campaign-item--hide")){i.classList.remove("crm-ads-new-campaign-item--hide");a.style.height=a.scrollHeight+"px"}else{i.classList.add("crm-ads-new-campaign-item--hide");a.style.height=a.scrollHeight+"px";setTimeout(function(){return a.style.height="0"})}}},{key:"clipTitle",value:function e(t){if(!t){return}var i=t.textContent;var a=20;BX.cleanNode(t);var n=BX.create("span",{text:i});t.appendChild(n);var s=0;while(n.offsetHeight>a&&i.length>s){s=s+1;n.innerText=i.slice(0,-s)+"..."}}},{key:"onPostSelected",value:function e(t){if(t.eventId==="seo-ads-post-selected"&&t.data){if(!t.data.media_url){this.deActivateStage(this._STAGES.postSelected);return}var i=s.Tag.render(u(),t.data.media_url,t.data.caption||"");var a=document.querySelector(".crm-ads-new-campaign-item-posts");var n=document.querySelector(".crm-ads-new-campaign-item-post-new");var o=document.querySelector(".crm-ads-new-campaign-item-total-preview-img-value");if(n!==a.firstChild){a.removeChild(a.firstChild)}a.insertBefore(i,a.firstChild);s.Event.bind(i.querySelector(".crm-ads-new-campaign-item-post-delete"),"click",function(){i.parentNode.removeChild(i)});o.style.backgroundImage="url("+t.data.media_url+")";this.postData=t.data;var r=document.querySelector(".crm-ads-new-campaign-item-post-text");this.clipTitle(r);this.activateStage(this._STAGES.postSelected)}}},{key:"openPostSlider",value:function e(){if(this.uiNodes.instagramAccount.value){this.openSlider(this.postListUrl,{sessid:BX.bitrix_sessid(),componentParams:{ACCOUNT_ID:this.uiNodes.instagramAccount.value,CLIENT_ID:this.uiNodes.clientInput.value,TYPE:this.provider.TYPE}},this.onPostSelected)}}},{key:"onTargetPageSelected",value:function e(t){if(t.eventId==="seo-ads-target-post-selected"&&t.data){if(!t.data.targetUrl){this.deActivateStage(this._STAGES.pageSelected);return}document.querySelector(".seo-ads-target-url").textContent=t.data.targetUrl;this.uiNodes.form.targetUrl.value=t.data.targetUrl;this.activateStage(this._STAGES.pageSelected)}}},{key:"onFBAudienceConfigured",value:function e(t){if(t.eventId==="seo-fb-audience-configured"&&t.data){this.reInitAdCreator();if(!t.data){this.deActivateStage(this._STAGES.audienceSelected);return}this.adCreatorData.audienceConfig=t.data;this.activateStage(this._STAGES.audienceSelected);this.uiNodes.audienceSummary.innerHTML=this.buildAudienceSummary()}}},{key:"onCrmAudienceConfigured",value:function e(t){if(t.eventId==="seo-crm-audience-configured"&&t.data){this.reInitAdCreator();if(!t.data){this.deActivateStage(this._STAGES.audienceSelected);return}this.adCreatorData.crmAudienceConfig=t.data;this.activateStage(this._STAGES.audienceSelected);this.uiNodes.audienceSummary.innerHTML=this.buildAudienceSummary()}}},{key:"openTargetPageSlider",value:function e(){if(this.uiNodes.instagramAccount.value){this.storeBlockShow(false);this.openSlider(this.pageConfigurationUrl,{sessid:BX.bitrix_sessid(),targetUrl:this.uiNodes.form.targetUrl.value||"",cacheable:false},this.onTargetPageSelected)}}},{key:"openSlider",value:function e(t,i,a){var n;var s={width:990,cacheable:(n=i.cacheable)!==null&&n!==void 0?n:true,allowChangeHistory:false,requestMethod:"post",requestParams:i};var o=BX.SidePanel.Slider.getEventFullName("onMessage");BX.removeAllCustomEvents(window,o,a.bind(this));BX.addCustomEvent(window,o,a.bind(this));BX.SidePanel.Instance.open(t,s)}},{key:"showAudienceExpertModeForm",value:function e(){if(this.uiNodes.instagramAccount.value){this.openSlider(this.audienceUrl,{sessid:BX.bitrix_sessid(),componentParams:{ACCOUNT_ID:this.uiNodes.instagramAccount.value,CLIENT_ID:this.uiNodes.clientInput.value,TYPE:this.provider.TYPE}},this.onFBAudienceConfigured)}}},{key:"showCrmAudienceExpertModeForm",value:function e(){if(this.uiNodes.instagramAccount.value){this.openSlider(this.crmAudienceUrl,{sessid:BX.bitrix_sessid(),componentParams:{TYPE:this.provider.TYPE}},this.onCrmAudienceConfigured)}}},{key:"initiateAutoAudienceMode",value:function e(){this.reInitAdCreator();this.adCreatorData.crmAudienceConfig.genders=[1,2];this.adCreatorData.crmAudienceConfig.ageFrom=25;this.adCreatorData.crmAudienceConfig.ageTo=45;this.activateStage(this._STAGES.audienceSelected);this.uiNodes.audienceSummary.innerHTML=s.Loc.getMessage("SEO_AD_BUILDER_AUDIENCE_MEN_WOMAN_25_45")}},{key:"buildAudienceSummary",value:function e(){var t="";if(this.adCreatorData.audienceConfig.genderTitles){t+="".concat(s.Loc.getMessage("SEO_AD_BUILDER_GENDER"),": ").concat(this.adCreatorData.audienceConfig.genderTitles.join(", ")," ")}if(this.adCreatorData.audienceConfig.ageFrom){t+="".concat(this.adCreatorData.audienceConfig.ageFrom," - ").concat(this.adCreatorData.audienceConfig.ageTo,"\n\t\t\t ").concat(s.Loc.getMessage("SEO_AD_BUILDER_YEARS_OLD")," <br/>")}if(this.adCreatorData.audienceConfig.interests){var i=[];this.adCreatorData.audienceConfig.interests.forEach(function(e){i.push(e.name)});t+="".concat(s.Loc.getMessage("SEO_AD_BUILDER_INTERESTS"),": ").concat(i.join(", "),"<br/>")}if(this.adCreatorData.crmAudienceConfig.segmentInclude){t+="".concat(s.Loc.getMessage("SEO_AD_BUILDER_CRM_AUDIENCE"),"<br/>")}if(Object.keys(this.selectedRegions).length){var a=[];for(var n in this.selectedRegions){a.push(this.selectedRegions[n].title)}t+="".concat(s.Loc.getMessage("SEO_AD_BUILDER_REGION"),": ").concat(a.join(", "),"<br/>")}return t}},{key:"sendToModeration",value:function e(t){this.uiNodes.toModerationBtn.classList.add("ui-btn-wait");var i=this.uiNodes.form;if(Object.keys(this.completedStages).length<6){for(var a=this._STAGES.accountSelected;a<=this._STAGES.toModeration;a++){if(!this.completedStages[a]){this.scrollToStage(a);this.uiNodes.toModerationBtn.classList.remove("ui-btn-wait");return}}this.uiNodes.toModerationBtn.classList.remove("ui-btn-wait");return}var n=this.uiNodes.instagramAccount.options[this.uiNodes.instagramAccount.selectedIndex].dataset;var o={client_id:this.uiNodes.clientInput.value,budget:i.budget.value,duration:i.duration.value,targetUrl:i.targetUrl.value,accountId:this.uiNodes.account.value,instagramAccountId:n.actorId,pageId:n.pageId,body:this.postData.caption,mediaId:this.postData.id,permalink:this.postData.permalink,imageUrl:this.postData.media_url,countries:Object.keys(this.selectedRegions),interests:this.adCreatorData.audienceConfig.interests||[],ageFrom:this.adCreatorData.audienceConfig.ageFrom||"",ageTo:this.adCreatorData.audienceConfig.ageTo||"",genders:this.adCreatorData.audienceConfig.genders||""};var r=document.getElementById("bx-sender-letter-edit").querySelector("form");i.permalink.value=this.postData.permalink;i.pageId.value=o.pageId;i.body.value=this.postData.caption;i.mediaId.value=o.mediaId;i.imageUrl.value=o.imageUrl;i.instagramAccountId.value=o.instagramAccountId;i.interests.value=JSON.stringify(o.interests);i.ageFrom.value=o.ageFrom;i.ageTo.value=o.ageTo;i.genders.value=JSON.stringify(o.genders);i.regions.value=JSON.stringify(o.countries);var c=this.adCreatorData.crmAudienceConfig.segmentInclude||[];var u=this.adCreatorData.crmAudienceConfig.segmentExclude||[];for(var h=0;h<c.length;h++){var p=s.Tag.render(l());p.value=c[h];r.appendChild(p)}for(var m=0;m<u.length;m++){var g=s.Tag.render(d());g.value=u[m];r.appendChild(g)}r.submit()}},{key:"activateStage",value:function e(t){var i=document.querySelector('[data-stage="'.concat(t,'"]'));var a=i.querySelector(".crm-ads-new-campaign-item-line");var n=i.querySelector(".crm-ads-new-campaign-item-number");var s=i.querySelector(".crm-ads-new-campaign-item-number-checker");if(a&&n){a.classList.remove("crm-ads-new-campaign-item--inactive");n.classList.remove("crm-ads-new-campaign-item--inactive")}if(s){s.style.display="block"}this.completedStages[t]=t;if(Object.keys(this.completedStages).length===5){this.activateStage(this._STAGES.toModeration)}if(Object.keys(this.completedStages).length<5){this.deActivateStage(this._STAGES.toModeration)}}},{key:"deActivateStage",value:function e(t){var i=document.querySelector('[data-stage="'.concat(t,'"]'));var a=i.querySelector(".crm-ads-new-campaign-item-line");var n=i.querySelector(".crm-ads-new-campaign-item-number");var s=i.querySelector(".crm-ads-new-campaign-item-number-checker");if(a&&n){a.classList.add("crm-ads-new-campaign-item--inactive");n.classList.add("crm-ads-new-campaign-item--inactive")}if(s){s.style.display="none"}delete this.completedStages[t];if(Object.keys(this.completedStages).length<6&&this.completedStages[this._STAGES.toModeration]){this.deActivateStage(this._STAGES.toModeration)}}},{key:"scrollToStage",value:function e(t){var i=document.querySelector('[data-stage="'.concat(t,'"]'));i.scrollIntoView({behavior:"smooth"})}},{key:"buildSelector",value:function e(){var t=this;var i=new BX.UI.EntitySelector.TagSelector({id:"seo-ads-regions",dialogOptions:{id:"seo-ads-regions",context:"SEO_ADS_REGIONS",tabs:[{id:"custom-region-tab",visible:true,title:s.Loc.getMessage("SEO_AD_BUILDER_REGION"),stub:true,stubOptions:{title:s.Loc.getMessage("UI_TAG_SELECTOR_START_INPUT"),arrow:true}}],searchOptions:{allowCreateItem:false},events:{"Item:onSelect":function e(i){var a=i.data.item;t.selectedRegions[a.id]=a;t.uiNodes.audienceSummary.innerHTML=t.buildAudienceSummary()}},entities:[{id:"facebook_regions",searchable:true,dynamicSearch:true,options:{clientId:this.uiNodes.clientInput.value}}]}});i.renderTo(document.getElementById("seo-ads-regions"));i.getDialog().getRecentTab().setVisible(false);var o={iblockId:this.iBlockId,basePriceId:this.basePriceId,fileInputId:"",config:{ENABLE_SEARCH:true,ENABLE_IMAGE_CHANGE_SAVING:true}};this.productSelector=new a.ProductSelector("facebook-product-selector",o);n.EventEmitter.subscribe("BX.Catalog.ProductSelector:onChange",this.productSelectedEvent.bind(this))}},{key:"productSelectedEvent",value:function e(t){var i=this;var a=t.data.fields;this.seoAccount._helper.request("getProductUrl",{id:a.ID},function(e){document.querySelector(".seo-ads-target-url").textContent=e;i.uiNodes.form.targetUrl.value=e;i.activateStage(i._STAGES.pageSelected)})}},{key:"toCreateStoreSlider",value:function e(){if(!this.isCloud){this.openTargetPageSlider();return}var t={width:990,cacheable:true,allowChangeHistory:false,requestMethod:"get"};BX.SidePanel.Instance.open("/shop/stores/site/edit/0/?super=Y",t)}}]);return e}();function p(){var e=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t\t<div class="crm-order-instagram-view-item">\n\t\t\t\t\t\t<input class="crm-order-instagram-view-item-input" \n\t\t\t\t\t\t\ttype="checkbox" \n\t\t\t\t\t\t\tid="','" \n\t\t\t\t\t\t\tdata-id="','"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t<label class="crm-order-instagram-view-item-detail"\n\t\t\t\t\t\t \tfor="','"\n\t\t\t\t\t\t \t>\n\t\t\t\t\t\t\t <span class="crm-order-instagram-view-item-img" \n\t\t\t\t\t\t\t style="background-image: url(',')"></span>\n\t\t\t\t\t\t\t <div class="crm-order-instagram-view-item-decs-block">\n\t\t\t\t\t\t\t\t  <div class="crm-order-instagram-view-item-decs">\n\t\t\t\t\t\t\t\t\t   <span class="crm-order-instagram-view-item-name">\n\t\t\t\t\t\t\t\t\t   ','\n\t\t\t\t\t\t\t\t\t   </span>\n\t\t\t\t\t\t\t\t\t   <span class="crm-order-instagram-view-item-edit"></span>\n\t\t\t\t\t\t\t\t  </div>\n\t\t\t\t\t\t\t </div>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</div>']);p=function t(){return e};return e}var m=function(){function e(t){babelHelpers.classCallCheck(this,e);this.helper=c.getCreated();this.last=null;this.stopLoading=false;this.loadInProgress=false;this._accountId=t.accountId;this._clientId=t.clientId;this._type=t.type;this.signedParameters=t.signedParameters;this.emptyBlock=document.querySelector(".seo-ads-empty-post-list-block");this.listContent=document.querySelector(".crm-order-instagram-view-list");this.dataContent=[];this.loader=new BX.Loader({target:document.querySelector(".crm-order-instagram-view")});this.init()}babelHelpers.createClass(e,[{key:"init",value:function e(){this.hideListContentBlock();var t=BX.SidePanel.Instance.getTopSlider().iframe.contentDocument;var i=new IntersectionObserver(this.loadPostList.bind(this),{root:t,rootMargin:"0px",threshold:1});i.observe(this.listContent);this.loadPostList()}},{key:"loadPostList",value:function e(){var t=this;if(this.loadInProgress){return}if(this.stopLoading){return}this.loader.show();this.loadInProgress=true;var i={clientId:this._clientId||null,type:this._type||null,accountId:this._accountId||null,last:this.last};BX.ajax.runComponentAction("bitrix:seo.ads.builder","getPostList",{mode:"class",signedParameters:this.signedParameters,data:i}).then(function(e){var i=e.data||{};if(i.error);else{t.successFn.apply(t,[i])}t.loadInProgress=false},function(){t.loadInProgress=false;t.loader.hide()})}},{key:"showEmptyListBlock",value:function e(){this.emptyBlock.style.display="block"}},{key:"hideEmptyListBlock",value:function e(){this.emptyBlock.style.display="none"}},{key:"showListContentBlock",value:function e(){this.listContent.parentNode.style.display="block"}},{key:"hideListContentBlock",value:function e(){this.listContent.parentNode.style.display="none"}},{key:"successFn",value:function e(t){var i=this;var a=t.data;if(this.clientSelector){this.clientSelector.enable()}a.postList.forEach(function(e){var t=s.Tag.render(p(),e.id,e.id,e.id,e.media_url,e.caption||"");i.listContent.appendChild(t);s.Event.bind(t,"click",i.selectPost.bind(i));i.dataContent[e.id]=e;i.showListContentBlock()});this.loader.hide();if(a.last){this.last=a.last;return}if(Object.keys(this.dataContent).length===0){this.hideListContentBlock();this.showEmptyListBlock()}this.stopLoading=true}},{key:"selectPost",value:function e(t){var i=t.target;var a=i.dataset.id;document.querySelectorAll(".crm-order-instagram-view-item-input").forEach(function(e){e.checked=a===e.dataset.id});BX.SidePanel.Instance.close();BX.SidePanel.Instance.postMessage(window,"seo-ads-post-selected",this.dataContent[a])}}]);return e}();var g=function(){function e(t){babelHelpers.classCallCheck(this,e);this.helper=c.getCreated();this.last=null;this._accountId=t.accountId;this._clientId=t.clientId;this._type=t.type;this.signedParameters=t.signedParameters;this.emptyBlock=document.querySelector(".seo-ads-empty-post-list-block");this.listContent=document.querySelector(".crm-order-instagram-view-list");this.dataContent=[];this.selectedInterest={};this.loader=new BX.Loader({target:document.querySelector(".crm-order-instagram-view")});this.rangeInput=document.querySelector(".crm-ads-new-campaign-item-runner-value");this.inputMax=BX("max");this.inputMin=BX("min");this.MAX_VALUE=65;this.MIN_VALUE=13;this.init()}babelHelpers.createClass(e,[{key:"init",value:function e(){var t=this;document.querySelectorAll(".crm-ads-new-campaign-item-runner-input").forEach(function(e){var i=e.closest(".crm-ads-new-campaign-item-runner-block--double");if(i){t.setDoubleInputPosition();t.setDoubleLabelPosition(e);s.Event.bind(e,"change",t.onDoubleInputRange.bind(t));s.Event.bind(e,"input",t.onDoubleInputRange.bind(t))}else{s.Event.bind(e,"change",t.onInputRange.bind(t));s.Event.bind(e,"input",t.onInputRange.bind(t))}});this.buildSelector()}},{key:"checkSex",value:function e(){}},{key:"onInputRange",value:function e(t){var i=t.target.closest(".crm-ads-new-campaign-item-runner-block").children[0].children[0];var a=t.target.value;if(a<this.MIN_VALUE){t.target.value=this.MIN_VALUE}i.textContent=t.target.value;this.rangeInput.style.width=t.target.offsetWidth*t.target.value/65+"px"}},{key:"onDoubleInputRange",value:function e(t){this.setDoubleLabelPosition(t.target);this.setDoubleInputPosition()}},{key:"setDoubleLabelPosition",value:function e(t){var i=t.value;var a=t.previousElementSibling;if(i<this.MIN_VALUE){t.value=this.MIN_VALUE}a.children[0].textContent=t.value;a.style.left=(i-this.MIN_VALUE)/(this.MAX_VALUE-this.MIN_VALUE)*(t.offsetWidth-70)+20+"px"}},{key:"setDoubleInputPosition",value:function e(){var t=BX("label-max").getBoundingClientRect().left;var i=BX("label-min").getBoundingClientRect().left;var a=Math.min(t,i);if(t===a){this.rangeInput.style.width=(this.inputMin.value-this.MIN_VALUE)/(this.MAX_VALUE-this.MIN_VALUE)*(this.inputMin.offsetWidth-40)+20-((this.inputMax.value-this.MIN_VALUE)/(this.MAX_VALUE-this.MIN_VALUE)*(this.inputMax.offsetWidth-40)+20)+"px";this.rangeInput.style.left=(this.inputMax.value-this.MIN_VALUE)/(this.MAX_VALUE-this.MIN_VALUE)*(this.inputMax.offsetWidth-40)+20+"px"}else{this.rangeInput.style.width=(this.inputMax.value-this.MIN_VALUE)/(this.MAX_VALUE-this.MIN_VALUE)*(this.inputMax.offsetWidth-40)+20-((this.inputMin.value-this.MIN_VALUE)/(this.MAX_VALUE-this.MIN_VALUE)*(this.inputMin.offsetWidth-40)+20)+"px";this.rangeInput.style.left=(this.inputMin.value-this.MIN_VALUE)/(this.MAX_VALUE-this.MIN_VALUE)*(this.inputMin.offsetWidth-40)+20+"px"}}},{key:"buildSelector",value:function e(){var t=this;var i=new BX.UI.EntitySelector.TagSelector({id:"seo-ads-interests",dialogOptions:{id:"seo-ads-interests",context:"SEO_ADS_INTERESTS",searchOptions:{allowCreateItem:false},recentTabOptions:{stub:true,stubOptions:{title:s.Loc.getMessage("UI_TAG_SELECTOR_START_INPUT"),arrow:true}},events:{"Item:onSelect":function e(i){var a=i.data.item;t.selectedInterest[a.id]=a;var n=0;for(var s in t.selectedInterest){n+=t.selectedInterest[s].customData.get("audienceSize")}document.querySelector(".crm-ads-new-campaign-item-cost-value").textContent=n;return}},entities:[{id:"facebook_interests",searchable:true,dynamicSearch:true,options:{clientId:this._clientId}}]}});i.renderTo(document.getElementById("seo-ads-interests"))}},{key:"showEmptyListBlock",value:function e(){this.emptyBlock.style.display="block"}},{key:"hideEmptyListBlock",value:function e(){this.emptyBlock.style.display="none"}},{key:"showListContentBlock",value:function e(){this.listContent.parentNode.style.display="block"}},{key:"hideListContentBlock",value:function e(){this.listContent.parentNode.style.display="none"}},{key:"apply",value:function e(){var t=document.getElementById("ui-button-panel-apply");BX.SidePanel.Instance.close();var i=[];var a=[];if(document.getElementById("male").checked){i.push(1);a.push(document.getElementById("male").parentNode.querySelector("span").innerText)}if(document.getElementById("female").checked){i.push(2);a.push(document.getElementById("female").parentNode.querySelector("span").innerText)}var n=[];Object.entries(this.selectedInterest).forEach(function(e){var t=babelHelpers.slicedToArray(e,2),i=t[0],a=t[1];n.push({id:a.id,name:a.title})});BX.SidePanel.Instance.postMessage(window,"seo-fb-audience-configured",{interests:n,ageFrom:this.inputMin.value,ageTo:this.inputMax.value,genderTitles:a,genders:i});document.getElementById("ui-button-panel-apply").classList.remove("ui-btn-wait")}}]);return e}();var v=function(){function e(){babelHelpers.classCallCheck(this,e)}babelHelpers.createClass(e,null,[{key:"apply",value:function e(t){BX.SidePanel.Instance.close();BX.SidePanel.Instance.postMessage(window,"seo-crm-audience-configured",{segmentInclude:window.senderSegmentSelector.selectorInclude.selector.getTilesId()||[],segmentExclude:window.senderSegmentSelector.selectorExclude.selector.getTilesId()||[]});setTimeout(function(){t.classList.remove("ui-btn-wait")},200)}}]);return e}();var f=function(){function e(){babelHelpers.classCallCheck(this,e);this.helper=c.getCreated();this.targetUrlBlock=document.querySelector(".seo-ads-target-url");return this}babelHelpers.createClass(e,[{key:"apply",value:function e(t){if(!this.validateUrl(this.targetUrlBlock.value)){this.removeWait(t);return}BX.SidePanel.Instance.close();BX.SidePanel.Instance.postMessage(window,"seo-ads-target-post-selected",{targetUrl:this.targetUrlBlock.value});this.removeWait(t)}},{key:"removeWait",value:function e(t){setTimeout(function(){t.classList.remove("ui-btn-wait")},200)}},{key:"cancel",value:function e(){BX.SidePanel.Instance.close()}},{key:"validateUrl",value:function e(t){return/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:[/?#]\S*)?$/i.test(t)}}]);return e}();e.Helper=c;e.SeoAccount=o;e.SeoPostSelector=m;e.SeoAudience=g;e.SeoCrmAudience=v;e.PageConfiguration=f;e.SeoAdBuilder=h})(this.BX.Seo=this.BX.Seo||{},BX.Main,BX.UI,BX.Catalog,BX.Event,BX);
//# sourceMappingURL=seoadbuilder.bundle.map.js