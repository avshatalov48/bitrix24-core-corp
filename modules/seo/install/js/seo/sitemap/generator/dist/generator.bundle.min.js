this.BX=this.BX||{};this.BX.Seo=this.BX.Seo||{};(function(e,s,t){"use strict";let a=e=>e,i,l,o;var r=babelHelpers.classPrivateFieldLooseKey("statusContainer");var d=babelHelpers.classPrivateFieldLooseKey("jobs");var n=babelHelpers.classPrivateFieldLooseKey("do");var b=babelHelpers.classPrivateFieldLooseKey("finish");var c=babelHelpers.classPrivateFieldLooseKey("printStatus");var S=babelHelpers.classPrivateFieldLooseKey("printError");var p=babelHelpers.classPrivateFieldLooseKey("getStatusNode");class v extends t.EventEmitter{constructor(e){super();Object.defineProperty(this,p,{value:f});Object.defineProperty(this,S,{value:P});Object.defineProperty(this,c,{value:T});Object.defineProperty(this,b,{value:h});Object.defineProperty(this,n,{value:u});Object.defineProperty(this,r,{writable:true,value:void 0});Object.defineProperty(this,d,{writable:true,value:[]});babelHelpers.classPrivateFieldLooseBase(this,r)[r]=e;s.Dom.clean(babelHelpers.classPrivateFieldLooseBase(this,r)[r])}add(e,t){if(e>0&&!babelHelpers.classPrivateFieldLooseBase(this,d)[d].find((s=>s.id===e))){const l=document.getElementById(v.STATUS_CLASS+"-"+e);const o=l||s.Tag.render(i||(i=a`
					<div id="${0}-${0}" class="${0}"></div>
				`),v.STATUS_CLASS,e,v.STATUS_CLASS);s.Dom.append(o,babelHelpers.classPrivateFieldLooseBase(this,r)[r]);const b={id:e,statusNode:o,step:v.START_STEP,status:v.START_STATUS,statusMessage:"",formattedStatusMessage:""};if(t){Object.assign(b,t)}babelHelpers.classPrivateFieldLooseBase(this,d)[d].push(b);if(b.formattedStatusMessage){b.status!=="E"?babelHelpers.classPrivateFieldLooseBase(this,c)[c](b.id,b.formattedStatusMessage):babelHelpers.classPrivateFieldLooseBase(this,S)[S](b.id,b.formattedStatusMessage)}babelHelpers.classPrivateFieldLooseBase(this,n)[n](e)}}}function u(e){this.emit("onBeforeDo",e);s.ajax.runAction("seo.api.sitemap.job.do",{data:{sitemapId:e}}).then((s=>{this.emit("onAfterDo",e);if(s&&s.status==="success"){const t=s.data;if(t.status!==v.STATUS_FINISH&&t.status!==v.STATUS_ERROR){babelHelpers.classPrivateFieldLooseBase(this,n)[n](e)}if(t.status===v.STATUS_FINISH){babelHelpers.classPrivateFieldLooseBase(this,c)[c](e,t.formattedStatusMessage);babelHelpers.classPrivateFieldLooseBase(this,b)[b](e)}else if(t.status===v.STATUS_ERROR){babelHelpers.classPrivateFieldLooseBase(this,S)[S](e,t.statusMessage||"Something went wrong")}else{babelHelpers.classPrivateFieldLooseBase(this,c)[c](e,t.formattedStatusMessage)}}else{babelHelpers.classPrivateFieldLooseBase(this,S)[S](e,s.error||"Something went wrong")}})).catch((s=>{const t=s.errors.pop();babelHelpers.classPrivateFieldLooseBase(this,S)[S](e,t?t.message:"Something went wrong")}))}function h(e){babelHelpers.classPrivateFieldLooseBase(this,d)[d]=babelHelpers.classPrivateFieldLooseBase(this,d)[d].filter((s=>s.id!==e));this.emit("onFinish",e)}function T(e,t){const i=babelHelpers.classPrivateFieldLooseBase(this,p)[p](e);const o=s.Tag.render(l||(l=a`<div>${0}</div>`),t);s.Dom.clean(i);s.Dom.append(o,i)}function P(e,t){const i=babelHelpers.classPrivateFieldLooseBase(this,p)[p](e);const l=s.Tag.render(o||(o=a`<div>${0}</div>`),t);s.Dom.clean(i);s.Dom.append(l,i)}function f(e){const s=babelHelpers.classPrivateFieldLooseBase(this,d)[d].find((s=>s.id===e));return s?s.statusNode:null}v.STATUS_REGISTER="R";v.STATUS_FINISH="F";v.STATUS_ERROR="E";v.START_STATUS=v.STATUS_REGISTER;v.START_STEP=0;v.STATUS_CLASS="sitemap-status";e.Generator=v})(this.BX.Seo.Sitemap=this.BX.Seo.Sitemap||{},BX,BX.Event);
//# sourceMappingURL=generator.bundle.map.js