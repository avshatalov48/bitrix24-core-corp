{"version":3,"file":"group-privacy.bundle.js","sources":["../src/group-privacy.js"],"sourcesContent":["import { Dom, Event, Loc, Tag } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { Popup } from 'main.popup';\nimport './group-privacy.css';\n\ntype Params = {\n\tbindElement: HTMLElement,\n\tprivacyCode: 'open' | 'closed' | 'secret',\n}\n\nexport class GroupPrivacy extends EventEmitter\n{\n\t#popup: Popup;\n\t#contentNode: HTMLElement;\n\t#privacyCode: string;\n\n\tconstructor(params: Params)\n\t{\n\t\tsuper();\n\n\t\tthis.setEventNamespace('BX.Socialnetwork.Spaces.Settings.Group.Privacy');\n\n\t\tthis.#privacyCode = params.privacyCode;\n\t}\n\n\tshow(bindElement)\n\t{\n\t\tthis.#getPopup(bindElement).show();\n\t}\n\n\t#getPopup(bindElement: HTMLElement): Popup\n\t{\n\t\tthis.#popup ??= this.#createPopup(bindElement);\n\t\treturn this.#popup;\n\t}\n\n\t#createPopup(bindElement: HTMLElement): Popup\n\t{\n\t\tconst popup = new Popup(\n\t\t\t{\n\t\t\t\tid: 'sn-post-form',\n\t\t\t\tbindElement,\n\t\t\t\tcontent: this.#renderContent(this.#privacyCode),\n\t\t\t\tautoHide: true,\n\t\t\t\tangle: false,\n\t\t\t\twidth: 343,\n\t\t\t\tcloseIcon: false,\n\t\t\t\tcloseByEsc: true,\n\t\t\t\toverlay: true,\n\t\t\t\tpadding: 0,\n\t\t\t\tanimation: 'fading-slide',\n\t\t\t},\n\t\t);\n\n\t\tpopup.subscribe('onShow', () => this.emit('onShow'));\n\t\tpopup.subscribe('onAfterClose', () => this.emit('onAfterClose'));\n\n\t\treturn popup;\n\t}\n\n\t#renderContent(privacyCode: 'open' | 'closed' | 'secret'): HTMLElement\n\t{\n\t\tconst openActiveClass = privacyCode === 'open' ? '--active' : '';\n\t\tconst closedActiveClass = privacyCode === 'closed' ? '--active' : '';\n\t\tconst secretActiveClass = privacyCode === 'secret' ? '--active' : '';\n\n\t\tconst openId = 'spaces-group-privacy-open';\n\t\tconst closedId = 'spaces-group-privacy-closed';\n\t\tconst secretId = 'spaces-group-privacy-secret';\n\n\t\tthis.#contentNode = Tag.render`\n\t\t\t<div class=\"sn-spaces__popup-menu\">\n\t\t\t\t<div data-id=\"${openId}\" class=\"sn-spaces__popup-menu_item ${openActiveClass}\">\n\t\t\t\t\t<div class=\"sn-spaces__popup-menu_item-icon --open-spaces\"></div>\n\t\t\t\t\t<div class=\"sn-spaces__popup-menu_item-info\">\n\t\t\t\t\t\t<div class=\"sn-spaces__popup-menu_item-name\">\n\t\t\t\t\t\t\t${Loc.getMessage('SN_SPACES_GROUP_PRIVACY_OPEN')}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"sn-spaces__popup-menu_item-description\">\n\t\t\t\t\t\t\t${Loc.getMessage('SN_SPACES_GROUP_PRIVACY_OPEN_DESC')}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div data-id=\"${closedId}\" class=\"sn-spaces__popup-menu_item ${closedActiveClass}\">\n\t\t\t\t\t<div class=\"sn-spaces__popup-menu_item-icon --closed-spaces\"></div>\n\t\t\t\t\t<div class=\"sn-spaces__popup-menu_item-info\">\n\t\t\t\t\t\t<div class=\"sn-spaces__popup-menu_item-name\">\n\t\t\t\t\t\t\t${Loc.getMessage('SN_SPACES_GROUP_PRIVACY_CLOSED')}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"sn-spaces__popup-menu_item-description\">\n\t\t\t\t\t\t\t${Loc.getMessage('SN_SPACES_GROUP_PRIVACY_CLOSED_DESC')}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div data-id=\"${secretId}\" class=\"sn-spaces__popup-menu_item ${secretActiveClass}\">\n\t\t\t\t\t<div class=\"sn-spaces__popup-menu_item-icon --secret-spaces\"></div>\n\t\t\t\t\t<div class=\"sn-spaces__popup-menu_item-info\">\n\t\t\t\t\t\t<div class=\"sn-spaces__popup-menu_item-name\">\n\t\t\t\t\t\t\t${Loc.getMessage('SN_SPACES_GROUP_PRIVACY_SECRET')}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"sn-spaces__popup-menu_item-description\">\n\t\t\t\t\t\t\t${Loc.getMessage('SN_SPACES_GROUP_PRIVACY_SECRET_DESC')}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"sn-spaces__popup-menu_hint\">\n\t\t\t\t\t${Loc.getMessage('SN_SPACES_GROUP_PRIVACY_PROMPT')}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\tEvent.bind(\n\t\t\tthis.#contentNode.querySelector(`[data-id='${openId}']`),\n\t\t\t'click',\n\t\t\t() => this.#changePrivacy('open'),\n\t\t);\n\t\tEvent.bind(\n\t\t\tthis.#contentNode.querySelector(`[data-id='${closedId}']`),\n\t\t\t'click',\n\t\t\t() => this.#changePrivacy('closed'),\n\t\t);\n\t\tEvent.bind(\n\t\t\tthis.#contentNode.querySelector(`[data-id='${secretId}']`),\n\t\t\t'click',\n\t\t\t() => this.#changePrivacy('secret'),\n\t\t);\n\n\t\treturn this.#contentNode;\n\t}\n\n\t#changePrivacy(privacyCode: 'open' | 'closed' | 'secret')\n\t{\n\t\tthis.setPrivacy(privacyCode);\n\n\t\tthis.emit('changePrivacy', this.#privacyCode);\n\n\t\tthis.#popup.close();\n\t}\n\n\tsetPrivacy(privacyCode: 'open' | 'closed' | 'secret')\n\t{\n\t\tthis.#privacyCode = privacyCode;\n\n\t\tif (this.#contentNode)\n\t\t{\n\t\t\tDom.removeClass(this.#contentNode.querySelector('.--active'), '--active');\n\n\t\t\tconst node = this.#contentNode.querySelector(`[data-id='spaces-group-privacy-${privacyCode}']`);\n\t\t\tDom.addClass(node, '--active');\n\t\t}\n\t}\n\n\tgetLabel(): string\n\t{\n\t\treturn Loc.getMessage(`SN_SPACES_GROUP_PRIVACY_${this.#privacyCode.toUpperCase()}`);\n\t}\n}\n"],"names":["GroupPrivacy","EventEmitter","constructor","params","setEventNamespace","privacyCode","show","bindElement","setPrivacy","Dom","removeClass","querySelector","node","addClass","getLabel","Loc","getMessage","toUpperCase","popup","Popup","id","content","autoHide","angle","width","closeIcon","closeByEsc","overlay","padding","animation","subscribe","emit","openActiveClass","closedActiveClass","secretActiveClass","openId","closedId","secretId","Tag","render","Event","bind","close"],"mappings":"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"}