(function(){var e=window.BX;if(e.CommentAux){return}e.CommentAux={postEventTypeList:["BLOG_POST","FORUM_TOPIC","TASK","TIMEMAN_ENTRY","TIMEMAN_REPORT","LOG_ENTRY","PHOTO_ALBUM","PHOTO_PHOTO","WIKI","LISTS_NEW_ELEMENT","CALENDAR_EVENT","INTRANET_NEW_USER","BITRIX24_NEW_USER"],commentEventTypeList:["BLOG_COMMENT","FORUM_POST","LOG_COMMENT"],typesList:{share:"share",createentity:"createentity",createtask:"createtask",fileversion:"fileversion",taskinfo:"taskinfo"}};e.onCustomEvent("BX.CommentAux.initialize",[]);e.CommentAux.init=function(t){e.RenderParts.init(t)};e.CommentAux.isSourcePost=function(t){return e.util.in_array(t,this.postEventTypeList)};e.CommentAux.isSourceComment=function(t){return e.util.in_array(t,this.commentEventTypeList)};e.CommentAux.getTypesList=function(){return Object.values(this.typesList)};e.CommentAux.getLiveTypesList=function(){return[this.typesList.createentity,this.typesList.createtask,this.typesList.fileversion,this.typesList.taskinfo]};e.CommentAux.getLiveText=function(t,s){var i="";if(t.toLowerCase()===this.typesList.share){if(typeof s=="object"&&s.length>0){i=e.message(s.length==1?"SONET_COMMENTAUX_JS_SHARE_TEXT":"SONET_COMMENTAUX_JS_SHARE_TEXT_1");i=i.replace("#SHARE_LIST#",this.getShareList(s))}}else if(t.toLowerCase()===this.typesList.createentity){if(e.type.isNotEmptyObject(s)&&e.type.isNotEmptyString(s.entityType)&&!e.type.isUndefined(s.entityId)&&parseInt(s.entityId)>0&&e.type.isNotEmptyString(s.entityName)&&e.type.isNotEmptyString(s.sourceEntityType)&&!e.type.isUndefined(s.sourceEntityId)&&parseInt(s.sourceEntityId)>0){var n=this.renderEntity({ENTITY_TYPE:s.entityType,NAME:s.entityName,LINK:e.type.isNotEmptyString(s.entityUrl)?s.entityUrl:"",VISIBILITY:this.getEntityVisibility(s)});var r="";var E=!e.RenderParts.mobile?'<a target="_blank" href="'+(e.type.isNotEmptyString(s.sourceEntityLink)?s.sourceEntityLink:"")+'">':"";if(this.isSourcePost(s.sourceEntityType)){r=(e.type.isNotEmptyString(s.sourceEntityType)?s.sourceEntityType:"BLOG_POST")+(e.type.isNotEmptyString(s.suffix)?"_"+s.suffix:"");i=e.message("SONET_COMMENTAUX_JS_CREATEENTITY_POST_"+r).replace("#ENTITY_CREATED#",this.getEntityCreatedMessage(s.entityType)).replace("#ENTITY_NAME#",n).replace("#A_BEGIN#",E).replace("#A_END#",!e.RenderParts.mobile?"</a>":"")}else if(this.isSourceComment(s.sourceEntityType)){r=e.type.isNotEmptyString(s.sourceEntityType)?s.sourceEntityType+(e.type.isNotEmptyString(s.suffix)?"_"+s.suffix:""):"BLOG_COMMENT";i=e.message("SONET_COMMENTAUX_JS_CREATEENTITY_COMMENT_"+r).replace("#ENTITY_CREATED#",this.getEntityCreatedMessage(s.entityType)).replace("#ENTITY_NAME#",n).replace("#A_BEGIN#",E).replace("#A_END#",!e.RenderParts.mobile?"</a>":"")}}}else if(t.toLowerCase()===this.typesList.createtask){if(e.type.isNotEmptyObject(s)&&!e.type.isUndefined(s.taskId)&&parseInt(s.taskId)>0&&e.type.isNotEmptyString(s.taskName)&&e.type.isNotEmptyString(s.sourceEntityType)&&!e.type.isUndefined(s.sourceEntityId)&&parseInt(s.sourceEntityId)>0){var a=this.renderEntity({ENTITY_TYPE:"task",NAME:s.taskName,LINK:e.type.isNotEmptyString(s.taskUrl)?s.taskUrl:"",VISIBILITY:{userId:typeof s.taskResponsibleId!="undefined"&&parseInt(s.taskResponsibleId)>0?parseInt(s.taskResponsibleId):0}});if(this.isSourcePost(s.sourceEntityType)){i=e.message("SONET_COMMENTAUX_JS_CREATETASK_POST_"+(e.type.isNotEmptyString(s.sourceEntityType)?s.sourceEntityType:"BLOG_POST")+(e.type.isNotEmptyString(s.suffix)?"_"+s.suffix:"")).replace("#TASK_NAME#",a).replace("#A_BEGIN#",!e.RenderParts.mobile?'<a target="_blank" href="'+(e.type.isNotEmptyString(s.sourceEntityLink)?s.sourceEntityLink:"")+'">':"").replace("#A_END#",!e.RenderParts.mobile?"</a>":"")}else if(this.isSourceComment(s.sourceEntityType)){i=e.message("SONET_COMMENTAUX_JS_CREATETASK_COMMENT_"+(e.type.isNotEmptyString(s.sourceEntityType)?s.sourceEntityType+(e.type.isNotEmptyString(s.suffix)?"_"+s.suffix:""):"BLOG_COMMENT")).replace("#TASK_NAME#",a).replace("#A_BEGIN#",!e.RenderParts.mobile?'<a target="_blank" href="'+(e.type.isNotEmptyString(s.sourceEntityLink)?s.sourceEntityLink:"")+'">':"").replace("#A_END#",!e.RenderParts.mobile?"</a>":"")}}}else if(t.toLowerCase()===this.typesList.fileversion){var T=typeof s=="object"&&typeof s.isEnabledKeepVersion!="undefined"&&s.isEnabledKeepVersion?"SONET_COMMENTAUX_JS_FILEVERSION_TEXT":"SONET_COMMENTAUX_JS_HEAD_FILEVERSION_TEXT";var o=typeof s=="object"&&e.type.isNotEmptyString(s.userGender)?s.userGender:"";i=e.message(T+(o.length>0?"_"+o:""))}return i};e.CommentAux.getShareList=function(e){var t="";var s=[];if(typeof e=="object"&&e.length>0){var i;for(i=0;i<e.length;i++){if(e.hasOwnProperty(i)){s.push(this.renderEntity(e[i]))}}t=s.join(", ")}return t};e.CommentAux.renderEntity=function(t){var s="";if(typeof t=="object"&&t.ENTITY_TYPE!="undefined"){switch(t.ENTITY_TYPE.toUpperCase()){case"U":s=e.RenderParts.getNodeU(t);break;case"UA":s=e.RenderParts.getNodeUA();break;case"SG":s=e.RenderParts.getNodeSG(t);break;case"DR":s=e.RenderParts.getNodeDR(t);break;case"TASK":s=e.RenderParts.getNodeTask(t);break;case"BLOG_POST":s=e.RenderParts.getNodePost(t);break;case"CALENDAR_EVENT":s=e.RenderParts.getNodeCalendarEvent(t);break;default:}var i=e.create("div",{children:[s]});s=i.innerHTML;e.cleanNode(i,true)}return s};e.CommentAux.getEntityCreatedMessage=function(t){var s="";if(!e.type.isNotEmptyString(t)){return s}switch(t){case"TASK":s=e.message("SONET_COMMENTAUX_JS_CREATEENTITY_ENTITY_CREATED_TASK");break;case"BLOG_POST":s=e.message("SONET_COMMENTAUX_JS_CREATEENTITY_ENTITY_CREATED_BLOG_POST");break;case"CALENDAR_EVENT":s=e.message("SONET_COMMENTAUX_JS_CREATEENTITY_ENTITY_CREATED_CALENDAR_EVENT");break;default:}return s};e.CommentAux.getEntityTypeName=function(t){var s="";if(!e.type.isNotEmptyString(t)){return s}switch(t){case"TASK":s=e.message("SONET_COMMENTAUX_CREATEENTITY_ENTITY_TASK");break;default:}return s};e.CommentAux.getEntityVisibility=function(t){var s={};if(t.entityType.toUpperCase()==="TASK"){s.userId=typeof t.taskResponsibleId!="undefined"&&parseInt(t.taskResponsibleId)>0?parseInt(t.taskResponsibleId):0}else if(t.entityType.toUpperCase()==="BLOG_POST"){s.available=e.type.isArray(t.socNetPermissions)&&(t.socNetPermissions.indexOf("G2")>-1||t.socNetPermissions.indexOf("UA")>-1||t.socNetPermissions.indexOf("U"+e.message("USER_ID"))>-1||t.socNetPermissions.indexOf("US"+e.message("USER_ID"))>-1)}else if(t.entityType.toUpperCase()==="CALENDAR_EVENT"){s.available=e.type.isArray(t.attendees)&&t.attendees.indexOf(e.message("USER_ID"))>-1}return s}})();
//# sourceMappingURL=socialnetwork.commentaux.map.js