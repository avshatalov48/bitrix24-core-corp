(function(){var e=window.BX;if(e.CommentAux){return}e.CommentAux={postEventTypeList:["BLOG_POST","FORUM_TOPIC","TASK","TIMEMAN_ENTRY","TIMEMAN_REPORT","LOG_ENTRY","PHOTO_ALBUM","PHOTO_PHOTO","WIKI","LISTS_NEW_ELEMENT","CALENDAR_EVENT","INTRANET_NEW_USER","BITRIX24_NEW_USER"],commentEventTypeList:["BLOG_COMMENT","FORUM_POST","LOG_COMMENT"]};e.onCustomEvent("BX.CommentAux.initialize",[]);e.CommentAux.init=function(t){e.RenderParts.init(t)};e.CommentAux.isSourcePost=function(t){return e.util.in_array(t,this.postEventTypeList)};e.CommentAux.isSourceComment=function(t){return e.util.in_array(t,this.commentEventTypeList)};e.CommentAux.getLiveText=function(t,i){var s="";if(t==="share"){if(typeof i=="object"&&i.length>0){s=e.message(i.length==1?"SONET_COMMENTAUX_JS_SHARE_TEXT":"SONET_COMMENTAUX_JS_SHARE_TEXT_1");s=s.replace("#SHARE_LIST#",this.getShareList(i))}}else if(t==="createentity"){if(e.type.isNotEmptyObject(i)&&e.type.isNotEmptyString(i.entityType)&&typeof i.entityId!="undefined"&&parseInt(i.entityId)>0&&e.type.isNotEmptyString(i.entityName)&&e.type.isNotEmptyString(i.sourceEntityType)&&typeof i.sourceEntityId!="undefined"&&parseInt(i.sourceEntityId)>0){var n=this.renderEntity({ENTITY_TYPE:i.entityType,NAME:i.entityName,LINK:e.type.isNotEmptyString(i.entityUrl)?i.entityUrl:"",VISIBILITY:this.getEntityVisibility(i)});var r="";var E=!e.RenderParts.mobile?'<a target="_blank" href="'+(e.type.isNotEmptyString(i.sourceEntityLink)?i.sourceEntityLink:"")+'">':"";if(this.isSourcePost(i.sourceEntityType)){r=(e.type.isNotEmptyString(i.sourceEntityType)?i.sourceEntityType:"BLOG_POST")+(e.type.isNotEmptyString(i.suffix)?"_"+i.suffix:"");s=e.message("SONET_COMMENTAUX_JS_CREATEENTITY_POST_"+r).replace("#ENTITY_CREATED#",this.getEntityCreatedMessage(i.entityType)).replace("#ENTITY_NAME#",n).replace("#A_BEGIN#",E).replace("#A_END#",!e.RenderParts.mobile?"</a>":"")}else if(this.isSourceComment(i.sourceEntityType)){r=e.type.isNotEmptyString(i.sourceEntityType)?i.sourceEntityType+(e.type.isNotEmptyString(i.suffix)?"_"+i.suffix:""):"BLOG_COMMENT";s=e.message("SONET_COMMENTAUX_JS_CREATEENTITY_COMMENT_"+r).replace("#ENTITY_CREATED#",this.getEntityCreatedMessage(i.entityType)).replace("#ENTITY_NAME#",n).replace("#A_BEGIN#",E).replace("#A_END#",!e.RenderParts.mobile?"</a>":"")}}}else if(t==="createtask"){if(e.type.isNotEmptyObject(i)&&typeof i.taskId!="undefined"&&parseInt(i.taskId)>0&&e.type.isNotEmptyString(i.taskName)&&e.type.isNotEmptyString(i.sourceEntityType)&&typeof i.sourceEntityId!="undefined"&&parseInt(i.sourceEntityId)>0){var T=this.renderEntity({ENTITY_TYPE:"task",NAME:i.taskName,LINK:e.type.isNotEmptyString(i.taskUrl)?i.taskUrl:"",VISIBILITY:{userId:typeof i.taskResponsibleId!="undefined"&&parseInt(i.taskResponsibleId)>0?parseInt(i.taskResponsibleId):0}});if(this.isSourcePost(i.sourceEntityType)){s=e.message("SONET_COMMENTAUX_JS_CREATETASK_POST_"+(e.type.isNotEmptyString(i.sourceEntityType)?i.sourceEntityType:"BLOG_POST")+(e.type.isNotEmptyString(i.suffix)?"_"+i.suffix:"")).replace("#TASK_NAME#",T).replace("#A_BEGIN#",!e.RenderParts.mobile?'<a target="_blank" href="'+(e.type.isNotEmptyString(i.sourceEntityLink)?i.sourceEntityLink:"")+'">':"").replace("#A_END#",!e.RenderParts.mobile?"</a>":"")}else if(this.isSourceComment(i.sourceEntityType)){s=e.message("SONET_COMMENTAUX_JS_CREATETASK_COMMENT_"+(e.type.isNotEmptyString(i.sourceEntityType)?i.sourceEntityType+(e.type.isNotEmptyString(i.suffix)?"_"+i.suffix:""):"BLOG_COMMENT")).replace("#TASK_NAME#",T).replace("#A_BEGIN#",!e.RenderParts.mobile?'<a target="_blank" href="'+(e.type.isNotEmptyString(i.sourceEntityLink)?i.sourceEntityLink:"")+'">':"").replace("#A_END#",!e.RenderParts.mobile?"</a>":"")}}}else if(t==="fileversion"){var a=typeof i=="object"&&typeof i.isEnabledKeepVersion!="undefined"&&i.isEnabledKeepVersion?"SONET_COMMENTAUX_JS_FILEVERSION_TEXT":"SONET_COMMENTAUX_JS_HEAD_FILEVERSION_TEXT";var o=typeof i=="object"&&typeof i.userGender!="undefined"?i.userGender:"";s=e.message(a+(o.length>0?"_"+o:""))}return s};e.CommentAux.getShareList=function(e){var t="";var i=[];if(typeof e=="object"&&e.length>0){var s;for(s=0;s<e.length;s++){if(e.hasOwnProperty(s)){i.push(this.renderEntity(e[s]))}}t=i.join(", ")}return t};e.CommentAux.renderEntity=function(t){var i="";if(typeof t=="object"&&t.ENTITY_TYPE!="undefined"){switch(t.ENTITY_TYPE.toUpperCase()){case"U":i=e.RenderParts.getNodeU(t);break;case"UA":i=e.RenderParts.getNodeUA();break;case"SG":i=e.RenderParts.getNodeSG(t);break;case"DR":i=e.RenderParts.getNodeDR(t);break;case"TASK":i=e.RenderParts.getNodeTask(t);break;case"BLOG_POST":i=e.RenderParts.getNodePost(t);break;case"CALENDAR_EVENT":i=e.RenderParts.getNodeCalendarEvent(t);break;default:}var s=e.create("div",{children:[i]});i=s.innerHTML;e.cleanNode(s,true)}return i};e.CommentAux.getEntityCreatedMessage=function(t){var i="";if(!e.type.isNotEmptyString(t)){return i}switch(t){case"TASK":i=e.message("SONET_COMMENTAUX_JS_CREATEENTITY_ENTITY_CREATED_TASK");break;case"BLOG_POST":i=e.message("SONET_COMMENTAUX_JS_CREATEENTITY_ENTITY_CREATED_BLOG_POST");break;case"CALENDAR_EVENT":i=e.message("SONET_COMMENTAUX_JS_CREATEENTITY_ENTITY_CREATED_CALENDAR_EVENT");break;default:}return i};e.CommentAux.getEntityTypeName=function(t){var i="";if(!e.type.isNotEmptyString(t)){return i}switch(t){case"TASK":i=e.message("SONET_COMMENTAUX_CREATEENTITY_ENTITY_TASK");break;default:}return i};e.CommentAux.getEntityVisibility=function(t){var i={};if(t.entityType.toUpperCase()==="TASK"){i.userId=typeof t.taskResponsibleId!="undefined"&&parseInt(t.taskResponsibleId)>0?parseInt(t.taskResponsibleId):0}else if(t.entityType.toUpperCase()==="BLOG_POST"){i.available=e.type.isArray(t.socNetPermissions)&&(t.socNetPermissions.indexOf("G2")>-1||t.socNetPermissions.indexOf("UA")>-1||t.socNetPermissions.indexOf("U"+e.message("USER_ID"))>-1||t.socNetPermissions.indexOf("US"+e.message("USER_ID"))>-1)}else if(t.entityType.toUpperCase()==="CALENDAR_EVENT"){i.available=e.type.isArray(t.attendees)&&t.attendees.indexOf(e.message("USER_ID"))>-1}return i}})();
//# sourceMappingURL=socialnetwork.commentaux.map.js