{"version":3,"file":"common.bundle.js","sources":["../src/waiter.js","../src/sonetgroupmenu.js","../src/common.js","../src/widget.js","../src/workgroupwidget.js","../src/index.js"],"sourcesContent":["import {Type} from 'main.core';\n\nexport class Waiter\n{\n\tstatic instance = null;\n\n\tstatic getInstance()\n\t{\n\t\tif (Type.isNull(Waiter.instance))\n\t\t{\n\t\t\tWaiter.instance = new Waiter();\n\t\t}\n\n\t\treturn Waiter.instance;\n\t}\n\n\tconstructor()\n\t{\n\t\tthis.waitTimeout = null;\n\t\tthis.waitPopup = null;\n\n\t}\n\n\tshow(timeout)\n\t{\n\t\tif (timeout !== 0)\n\t\t{\n\t\t\treturn (this.waitTimeout = setTimeout(() => {\n\t\t\t\tthis.show(0);\n\t\t\t}, 50));\n\t\t}\n\n\t\tif (!this.waitPopup)\n\t\t{\n\t\t\tthis.waitPopup = new BX.PopupWindow('sonet_common_wait_popup', window, {\n\t\t\t\tautoHide: true,\n\t\t\t\tlightShadow: true,\n\t\t\t\tzIndex: 2,\n\t\t\t\tcontent: BX.create('DIV', {\n\t\t\t\t\tprops: {\n\t\t\t\t\t\tclassName: 'sonet-wait-cont'\n\t\t\t\t\t},\n\t\t\t\t\tchildren: [\n\t\t\t\t\t\tBX.create('DIV', {\n\t\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\t\tclassName: 'sonet-wait-icon'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}),\n\t\t\t\t\t\tBX.create('DIV', {\n\t\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\t\tclassName: 'sonet-wait-text'\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\thtml: BX.message('SONET_EXT_COMMON_WAIT')\n\t\t\t\t\t\t})\n\t\t\t\t\t]\n\t\t\t\t})\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.waitPopup.setBindElement(window);\n\t\t}\n\n\t\tthis.waitPopup.show();\n\t}\n\n\thide()\n\t{\n\t\tif (this.waitTimeout)\n\t\t{\n\t\t\tclearTimeout(this.waitTimeout);\n\t\t\tthis.waitTimeout = null;\n\t\t}\n\n\t\tif (this.waitPopup)\n\t\t{\n\t\t\tthis.waitPopup.close();\n\t\t}\n\t}\n}\n","import {Type, Loc} from 'main.core';\n\nexport class SonetGroupMenu\n{\n\tstatic instance = null;\n\n\tconstructor()\n\t{\n\t\tthis.menuPopup = null;\n\t\tthis.menuItem = null;\n\t\tthis.favoritesValue = null;\n\t}\n\n\tstatic getInstance()\n\t{\n\t\tif (Type.isNull(this.instance))\n\t\t{\n\t\t\tthis.instance = new SonetGroupMenu();\n\n\t\t\tBX.addCustomEvent('SidePanel.Slider:onClose', () => {\n\t\t\t\tif (this.instance.menuPopup)\n\t\t\t\t{\n\t\t\t\t\tthis.instance.menuPopup.close();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tBX.addCustomEvent('BX.Socialnetwork.WorkgroupMenuIcon:onSetFavorites', (params) => {\n\t\t\t\tthis.getInstance().setItemTitle(params.value);\n\t\t\t});\n\t\t}\n\n\t\treturn this.instance;\n\t}\n\n\tsetItemTitle(value)\n\t{\n\t\tif (!Type.isDomNode(this.menuItem))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.menuItem.innerHTML = (value ? Loc.getMessage('SONET_EXT_COMMON_GROUP_MENU_FAVORITES_REMOVE') : Loc.getMessage('SONET_EXT_COMMON_GROUP_MENU_FAVORITES_ADD'));\n\t}\n}\n","import {Type, Loc, Dom, ajax} from 'main.core';\nimport {Popup, MenuManager} from 'main.popup'\n\nimport {Waiter} from './waiter.js';\nimport {SonetGroupMenu} from './sonetgroupmenu.js';\n\nexport class Common\n{\n\tstatic showRecallJoinRequestPopup(params)\n\t{\n\t\tif (\n\t\t\tparseInt(params.RELATION_ID) <= 0\n\t\t\t|| !Type.isStringFilled(params.URL_REJECT_OUTGOING_REQUEST)\n\t\t)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tlet recallText = Loc.getMessage('SONET_EXT_COMMON_RECALL_JOIN_POPUP_TEXT');\n\t\tlet recallButtonTitle = Loc.getMessage('SONET_EXT_COMMON_RECALL_JOIN_POPUP_BUTTON');\n\n\t\tif (Type.isUndefined(params.SCRUM) && !!params.SCRUM)\n\t\t{\n\t\t\trecallText = Loc.getMessage('SONET_EXT_COMMON_RECALL_JOIN_POPUP_TEXT_SCRUM');\n\t\t\trecallButtonTitle = Loc.getMessage('SONET_EXT_COMMON_RECALL_JOIN_POPUP_BUTTON_SCRUM');\n\t\t}\n\t\telse if (Type.isUndefined(params.PROJECT) && !!params.PROJECT)\n\t\t{\n\t\t\trecallText = Loc.getMessage('SONET_EXT_COMMON_RECALL_JOIN_POPUP_TEXT_PROJECT');\n\t\t\trecallButtonTitle = Loc.getMessage('SONET_EXT_COMMON_RECALL_JOIN_POPUP_BUTTON_PROJECT');\n\t\t}\n\t\tconst isProject = (!Type.isUndefined(params.PROJECT) ? !!params.PROJECT : false);\n\n\t\tconst successPopup = new Popup('bx-group-join-successfull-request-popup', window, {\n\t\t\twidth: 420,\n\t\t\tautoHide: true,\n\t\t\tlightShadow: false,\n\t\t\tzIndex: 1000,\n\t\t\toverlay: true,\n\t\t\tcontent: Dom.create('DIV', {\n\t\t\t\tchildren: [\n\t\t\t\t\tDom.create('DIV', {\n\t\t\t\t\t\ttext: Loc.getMessage('SONET_EXT_COMMON_RECALL_JOIN_POPUP_TITLE'),\n\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\tclassName: 'sonet-group-join-successfull-request-popup-title',\n\t\t\t\t\t\t}\n\t\t\t\t\t}),\n\t\t\t\t\tDom.create('DIV', {\n\t\t\t\t\t\ttext: recallText,\n\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\tclassName: 'sonet-group-join-successfull-request-popup-text',\n\t\t\t\t\t\t}\n\t\t\t\t\t}),\n\t\t\t\t\tDom.create('DIV', {\n\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\tclassName: 'sonet-ui-btn-cont sonet-ui-btn-cont-center'\n\t\t\t\t\t\t},\n\t\t\t\t\t\tchildren: [\n\t\t\t\t\t\t\tDom.create('DIV', {\n\t\t\t\t\t\t\t\tchildren: [\n\t\t\t\t\t\t\t\t\tDom.create('BUTTON', {\n\t\t\t\t\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\t\t\t\t\tclassName: 'ui-btn ui-btn-md ui-btn-danger',\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\t\t\t\t\tclick: (event) => {\n\n\t\t\t\t\t\t\t\t\t\t\t\tconst _currentTarget = event.currentTarget;\n\t\t\t\t\t\t\t\t\t\t\t\tconst errorNode = document.getElementById('bx-group-delete-request-error');\n\t\t\t\t\t\t\t\t\t\t\t\tthis.hideError(errorNode);\n\t\t\t\t\t\t\t\t\t\t\t\tthis.showButtonWait(_currentTarget);\n\n\t\t\t\t\t\t\t\t\t\t\t\tajax({\n\t\t\t\t\t\t\t\t\t\t\t\t\turl: params.URL_REJECT_OUTGOING_REQUEST,\n\t\t\t\t\t\t\t\t\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\t\t\t\t\t\t\t\t\tdataType: 'json',\n\t\t\t\t\t\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\taction: 'reject',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmax_count: 1,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tchecked_0: 'Y',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype_0: 'INVITE_GROUP',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tid_0: params.RELATION_ID,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype: 'out',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tajax_request: 'Y',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsessid: Loc.getMessage('bitrix_sessid'),\n\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\tonsuccess: (deleteResponseData) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.hideButtonWait(_currentTarget);\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tType.isStringFilled(deleteResponseData.MESSAGE)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t&& deleteResponseData.MESSAGE === 'SUCCESS'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsuccessPopup.destroy();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (Type.isStringFilled(params.URL_GROUPS_LIST))\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttop.location.href = params.URL_GROUPS_LIST;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\telse if (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tType.isStringFilled(deleteResponseData.MESSAGE)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t&& deleteResponseData.MESSAGE === 'ERROR'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t&& Type.isStringFilled(deleteResponseData.ERROR_MESSAGE)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.showError(deleteResponseData.ERROR_MESSAGE, errorNode);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\tonfailure: () => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.showError(Loc.getMessage('SONET_EXT_COMMON_AJAX_ERROR'), errorNode);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.hideButtonWait(_currentTarget);\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\ttext: recallButtonTitle,\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t}),\n\t\t\tcloseByEsc: true,\n\t\t\tcloseIcon: true,\n\t\t});\n\n\t\tsuccessPopup.show();\n\t}\n\n\tstatic showGroupMenuPopup(params)\n\t{\n\t\tlet bindElement = params.bindElement;\n\t\tif (Type.isStringFilled(bindElement))\n\t\t{\n\t\t\tbindElement = document.getElementById(bindElement);\n\t\t}\n\n\t\tconst currentUserId = parseInt(Loc.getMessage('USER_ID'));\n\t\tconst sonetGroupMenu = SonetGroupMenu.getInstance();\n\n\t\tif (bindElement.tagName === 'BUTTON')\n\t\t{\n\t\t\tbindElement.classList.add('ui-btn-active');\n\t\t}\n\n\t\tconst menu = [];\n\t\tlet itemTitle = '';\n\n\t\tif (currentUserId > 0)\n\t\t{\n\t\t\tmenu.push({\n\t\t\t\ttext: (!!sonetGroupMenu.favoritesValue ? Loc.getMessage('SONET_EXT_COMMON_GROUP_MENU_FAVORITES_REMOVE') : Loc.getMessage('SONET_EXT_COMMON_GROUP_MENU_FAVORITES_ADD')),\n\t\t\t\ttitle: (!!sonetGroupMenu.favoritesValue ? Loc.getMessage('SONET_EXT_COMMON_GROUP_MENU_FAVORITES_REMOVE') : Loc.getMessage('SONET_EXT_COMMON_GROUP_MENU_FAVORITES_ADD')),\n\t\t\t\tid: 'set-group-favorite',\n\t\t\t\tonclick: () => {\n\n\t\t\t\t\tconst favoritesValue = sonetGroupMenu.favoritesValue;\n\n\t\t\t\t\tsonetGroupMenu.setItemTitle(!favoritesValue);\n\t\t\t\t\tsonetGroupMenu.favoritesValue = !favoritesValue;\n\n\t\t\t\t\tthis.setFavoritesAjax({\n\t\t\t\t\t\tgroupId: params.groupId,\n\t\t\t\t\t\tfavoritesValue: favoritesValue,\n\t\t\t\t\t\tcallback: {\n\t\t\t\t\t\t\tsuccess: (data) => {\n\n\t\t\t\t\t\t\t\tBX.onCustomEvent(window, 'BX.Socialnetwork.WorkgroupFavorites:onSet', [{\n\t\t\t\t\t\t\t\t\tid: params.groupId,\n\t\t\t\t\t\t\t\t\tname: data.NAME,\n\t\t\t\t\t\t\t\t\turl: data.URL,\n\t\t\t\t\t\t\t\t\textranet: (!Type.isUndefined(data.EXTRANET) ? data.EXTRANET : 'N'),\n\t\t\t\t\t\t\t\t}, !favoritesValue]);\n\n\t\t\t\t\t\t\t\tBX.onCustomEvent(window, 'BX.Socialnetwork.WorkgroupMenu:onSetFavorites', [{\n\t\t\t\t\t\t\t\t\tgroupId: params.groupId,\n\t\t\t\t\t\t\t\t\tvalue: !favoritesValue,\n\t\t\t\t\t\t\t\t}]);\n\n\t\t\t\t\t\t\t\twindow.top.BX.SidePanel.Instance.postMessageAll(window, 'sonetGroupEvent', {\n\t\t\t\t\t\t\t\t\tcode: 'afterSetFavorites',\n\t\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\t\tgroupId: data.ID,\n\t\t\t\t\t\t\t\t\t\tvalue: (data.RESULT === 'Y')\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tfailure: () => {\n\t\t\t\t\t\t\t\tsonetGroupMenu.favoritesValue = favoritesValue;\n\t\t\t\t\t\t\t\tsonetGroupMenu.setItemTitle(favoritesValue);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (params.perms.canInitiate)\n\t\t\t{\n\t\t\t\titemTitle = Loc.getMessage('SONET_EXT_COMMON_GROUP_MENU_REQU');\n\t\t\t\tif (!!params.isScrumProject)\n\t\t\t\t{\n\t\t\t\t\titemTitle = Loc.getMessage('SONET_EXT_COMMON_GROUP_MENU_REQU_SCRUM');\n\t\t\t\t}\n\t\t\t\telse if (!!params.isProject)\n\t\t\t\t{\n\t\t\t\t\titemTitle = Loc.getMessage('SONET_EXT_COMMON_GROUP_MENU_REQU_PROJECT');\n\t\t\t\t}\n\t\t\t\tmenu.push({\n\t\t\t\t\ttext: itemTitle,\n\t\t\t\t\ttitle: itemTitle,\n\t\t\t\t\thref: params.urls.requestUser,\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (params.perms.canModify)\n\t\t\t{\n\t\t\t\titemTitle = Loc.getMessage('SONET_EXT_COMMON_GROUP_MENU_EDIT');\n\t\t\t\tif (!!params.isScrumProject)\n\t\t\t\t{\n\t\t\t\t\titemTitle = Loc.getMessage('SONET_EXT_COMMON_GROUP_MENU_EDIT_SCRUM');\n\t\t\t\t}\n\t\t\t\telse if (!!params.isProject)\n\t\t\t\t{\n\t\t\t\t\titemTitle = Loc.getMessage('SONET_EXT_COMMON_GROUP_MENU_EDIT_PROJECT');\n\t\t\t\t}\n\t\t\t\tmenu.push({\n\t\t\t\t\ttext: itemTitle,\n\t\t\t\t\ttitle: itemTitle,\n\t\t\t\t\thref: params.urls.edit,\n\t\t\t\t});\n\n\t\t\t\tif (!params.hideArchiveLinks)\n\t\t\t\t{\n\t\t\t\t\tconst featuresItem = {\n\t\t\t\t\t\ttext: Loc.getMessage('SONET_EXT_COMMON_GROUP_MENU_FEAT'),\n\t\t\t\t\t\ttitle: Loc.getMessage('SONET_EXT_COMMON_GROUP_MENU_FEAT'),\n\t\t\t\t\t};\n\n\t\t\t\t\tif (params.editFeaturesAllowed)\n\t\t\t\t\t{\n\t\t\t\t\t\tfeaturesItem.href = params.urls.features;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tfeaturesItem.onclick = () => {\n\t\t\t\t\t\t\tB24.licenseInfoPopup.show(\n\t\t\t\t\t\t\t\t'sonetGroupFeatures',\n\t\t\t\t\t\t\t\tLoc.getMessage('SONET_EXT_COMMON_B24_SONET_GROUP_FEATURES_TITLE'),\n\t\t\t\t\t\t\t\t`<span>${Loc.getMessage('SONET_EXT_COMMON_B24_SONET_GROUP_FEATURES_TEXT')}</span>`,\n\t\t\t\t\t\t\t\ttrue\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\tmenu.push(featuresItem);\n\t\t\t\t}\n\n\t\t\t\titemTitle = Loc.getMessage('SONET_EXT_COMMON_GROUP_MENU_DELETE');\n\t\t\t\tif (!!params.isScrumProject)\n\t\t\t\t{\n\t\t\t\t\titemTitle = Loc.getMessage('SONET_EXT_COMMON_GROUP_MENU_DELETE_SCRUM');\n\t\t\t\t}\n\t\t\t\telse if (!!params.isProject)\n\t\t\t\t{\n\t\t\t\t\titemTitle = Loc.getMessage('SONET_EXT_COMMON_GROUP_MENU_DELETE_PROJECT');\n\t\t\t\t}\n\t\t\t\tmenu.push({\n\t\t\t\t\ttext: itemTitle,\n\t\t\t\t\ttitle: itemTitle,\n\t\t\t\t\thref: params.urls.delete,\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tmenu.push({\n\t\t\t\ttext: (params.perms.canModerate ? Loc.getMessage('SONET_EXT_COMMON_GROUP_MENU_MEMBERS_EDIT') : Loc.getMessage('SONET_EXT_COMMON_GROUP_MENU_MEMBERS_VIEW')),\n\t\t\t\ttitle: (params.perms.canModerate ? Loc.getMessage('SONET_EXT_COMMON_GROUP_MENU_MEMBERS_EDIT') : Loc.getMessage('SONET_EXT_COMMON_GROUP_MENU_MEMBERS_VIEW')),\n\t\t\t\thref: params.urls.members,\n\t\t\t});\n\n\t\t\tif (params.perms.canInitiate)\n\t\t\t{\n\t\t\t\tif (params.perms.canProcessRequestsIn)\n\t\t\t\t{\n\t\t\t\t\tmenu.push({\n\t\t\t\t\t\ttext: Loc.getMessage('SONET_EXT_COMMON_GROUP_MENU_REQ_IN'),\n\t\t\t\t\t\ttitle: Loc.getMessage('SONET_EXT_COMMON_GROUP_MENU_REQ_IN'),\n\t\t\t\t\t\thref: params.urls.requests,\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\titemTitle = Loc.getMessage('SONET_EXT_COMMON_GROUP_MENU_REQ_OUT');\n\t\t\t\tif (!!params.isScrumProject)\n\t\t\t\t{\n\t\t\t\t\titemTitle = Loc.getMessage('SONET_EXT_COMMON_GROUP_MENU_REQ_OUT_SCRUM');\n\t\t\t\t}\n\t\t\t\telse if (!!params.isProject)\n\t\t\t\t{\n\t\t\t\t\titemTitle = Loc.getMessage('SONET_EXT_COMMON_GROUP_MENU_REQ_OUT_PROJECT');\n\t\t\t\t}\n\t\t\t\tmenu.push({\n\t\t\t\t\ttext: itemTitle,\n\t\t\t\t\ttitle: itemTitle,\n\t\t\t\t\thref: params.urls.requestsOut,\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (params.perms.canModify)\n\t\t\t{\n\t\t\t\titemTitle = Loc.getMessage('SONET_EXT_COMMON_GROUP_MENU_COPY');\n\t\t\t\tif (!!params.isScrumProject)\n\t\t\t\t{\n\t\t\t\t\titemTitle = Loc.getMessage('SONET_EXT_COMMON_GROUP_MENU_COPY_SCRUM');\n\t\t\t\t}\n\t\t\t\telse if (!!params.isProject)\n\t\t\t\t{\n\t\t\t\t\titemTitle = Loc.getMessage('SONET_EXT_COMMON_GROUP_MENU_COPY_PROJECT');\n\t\t\t\t}\n\t\t\t\tconst copyGroupItem = {\n\t\t\t\t\ttext: itemTitle,\n\t\t\t\t\ttitle: itemTitle,\n\t\t\t\t}\n\t\t\t\tif (params.copyFeatureAllowed)\n\t\t\t\t{\n\t\t\t\t\tcopyGroupItem.href = params.urls.copy;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tcopyGroupItem.onclick = () => {\n\t\t\t\t\t\tif (!!params.isProject)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tBX.UI.InfoHelper.show('limit_task_copy_project', {\n\t\t\t\t\t\t\t\tisLimit: true,\n\t\t\t\t\t\t\t\tlimitAnalyticsLabels: {\n\t\t\t\t\t\t\t\t\tmodule: 'socialnetwork',\n\t\t\t\t\t\t\t\t\tsource: 'projectCardActions'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tBX.UI.InfoHelper.show('limit_task_copy_group', {\n\t\t\t\t\t\t\t\tisLimit: true,\n\t\t\t\t\t\t\t\tlimitAnalyticsLabels: {\n\t\t\t\t\t\t\t\t\tmodule: 'socialnetwork',\n\t\t\t\t\t\t\t\t\tsource: 'projectCardActions'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\tif (!params.isScrumProject) // todo remove after scrum copy will done\n\t\t\t\t{\n\t\t\t\t\tmenu.push(copyGroupItem);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\t(\n\t\t\t\t\t!Type.isStringFilled(params.userRole)\n\t\t\t\t\t|| (\n\t\t\t\t\t\tparams.userRole === Loc.getMessage('USER_TO_GROUP_ROLE_REQUEST')\n\t\t\t\t\t\t&& params.initiatedByType === Loc.getMessage('USER_TO_GROUP_INITIATED_BY_GROUP')\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t\t&& !params.hideArchiveLinks\n\t\t\t)\n\t\t\t{\n\t\t\t\titemTitle = Loc.getMessage('SONET_EXT_COMMON_GROUP_MENU_JOIN');\n\t\t\t\tif (!!params.isScrumProject)\n\t\t\t\t{\n\t\t\t\t\titemTitle = Loc.getMessage('SONET_EXT_COMMON_GROUP_MENU_JOIN_SCRUM');\n\t\t\t\t}\n\t\t\t\telse if (!!params.isProject)\n\t\t\t\t{\n\t\t\t\t\titemTitle = Loc.getMessage('SONET_EXT_COMMON_GROUP_MENU_JOIN_PROJECT');\n\t\t\t\t}\n\t\t\t\tconst userRequestItem = {\n\t\t\t\t\ttext: itemTitle,\n\t\t\t\t\ttitle: itemTitle,\n\t\t\t\t};\n\n\t\t\t\tif (!!params.isOpened)\n\t\t\t\t{\n\t\t\t\t\tuserRequestItem.onclick = () => {\n\t\t\t\t\t\tthis.sendJoinRequest(params);\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tuserRequestItem.href = params.urls.userRequestGroup;\n\t\t\t\t}\n\t\t\t\tmenu.push(userRequestItem);\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\t(\n\t\t\t\t\tType.isBoolean(params.perms.canLeave)\n\t\t\t\t\t&& params.perms.canLeave\n\t\t\t\t)\n\t\t\t\t||\n\t\t\t\t(\n\t\t\t\t\t!Type.isBoolean(params.perms.canLeave)\n\t\t\t\t\t&& params.userIsMember\n\t\t\t\t\t&& !params.userIsAutoMember\n\t\t\t\t\t&& params.userRole !== Loc.getMessage('USER_TO_GROUP_ROLE_OWNER')\n\t\t\t\t)\n\t\t\t)\n\t\t\t{\n\t\t\t\titemTitle = Loc.getMessage('SONET_EXT_COMMON_GROUP_MENU_EXIT');\n\t\t\t\tif (!!params.isScrumProject)\n\t\t\t\t{\n\t\t\t\t\titemTitle = Loc.getMessage('SONET_EXT_COMMON_GROUP_MENU_EXIT_SCRUM');\n\t\t\t\t}\n\t\t\t\telse if (!!params.isProject)\n\t\t\t\t{\n\t\t\t\t\titemTitle = Loc.getMessage('SONET_EXT_COMMON_GROUP_MENU_EXIT_PROJECT');\n\t\t\t\t}\n\t\t\t\tmenu.push({\n\t\t\t\t\ttext: itemTitle,\n\t\t\t\t\ttitle: itemTitle,\n\t\t\t\t\thref: params.urls.userLeaveGroup\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (params.canPickTheme)\n\t\t\t{\n\t\t\t\tmenu.push({\n\t\t\t\t\ttext: Loc.getMessage('SONET_EXT_COMMON_GROUP_MENU_THEME_DIALOG'),\n\t\t\t\t\ttitle: Loc.getMessage('SONET_EXT_COMMON_GROUP_MENU_THEME_DIALOG'),\n\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\tBX.Intranet.Bitrix24.ThemePicker.Singleton.showDialog(false);\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tconst popup = MenuManager.create('group-profile-menu', bindElement, menu, {\n\t\t\toffsetTop: 5,\n\t\t\toffsetLeft : (bindElement.offsetWidth - 18),\n\t\t\tangle : true,\n\t\t\tevents : {\n\t\t\t\tonPopupClose: () => {\n\t\t\t\t\tif (bindElement.tagName === 'BUTTON')\n\t\t\t\t\t{\n\t\t\t\t\t\tbindElement.classList.remove('ui-btn-active');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tconst item = popup.getMenuItem('set-group-favorite');\n\t\tif (item)\n\t\t{\n\t\t\tsonetGroupMenu.menuItem = item.layout.text;\n\t\t}\n\n\t\tpopup.popupWindow.show();\n\t\tsonetGroupMenu.menuPopup = popup;\n\t}\n\n\tstatic sendJoinRequest(params)\n\t{\n\t\tWaiter.getInstance().show();\n\n\t\tif (\n\t\t\tSonetGroupMenu.getInstance()\n\t\t\t&& SonetGroupMenu.getInstance().menuPopup\n\t\t)\n\t\t{\n\t\t\tSonetGroupMenu.getInstance().menuPopup.close();\n\t\t}\n\n\t\tajax({\n\t\t\turl: params.urls.userRequestGroup,\n\t\t\tmethod: 'POST',\n\t\t\tdataType: 'json',\n\t\t\tdata: {\n\t\t\t\tgroupID: params.groupId,\n\t\t\t\tMESSAGE: '',\n\t\t\t\tajax_request: 'Y',\n\t\t\t\tsave: 'Y',\n\t\t\t\tsessid: Loc.getMessage('bitrix_sessid'),\n\t\t\t},\n\t\t\tonsuccess: (responseData) => {\n\t\t\t\tWaiter.getInstance().hide();\n\t\t\t\tif (\n\t\t\t\t\tType.isStringFilled(responseData.MESSAGE)\n\t\t\t\t\t&& responseData.MESSAGE === 'SUCCESS'\n\t\t\t\t\t&& Type.isStringFilled(responseData.URL)\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tBX.onCustomEvent(window.top, 'sonetGroupEvent', [ {\n\t\t\t\t\t\tcode: 'afterJoinRequestSend',\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tgroupId: params.groupId\n\t\t\t\t\t\t}\n\t\t\t\t\t} ]);\n\t\t\t\t\ttop.location.href = responseData.URL;\n\t\t\t\t}\n\t\t\t},\n\t\t\tonfailure: () => {\n\t\t\t\tWaiter.getInstance().hide();\n\t\t\t},\n\t\t});\n\t}\n\n\tstatic setFavoritesAjax(params)\n\t{\n\t\tajax.runAction('socialnetwork.api.workgroup.setFavorites', {\n\t\t\tdata: {\n\t\t\t\tparams: {\n\t\t\t\t\tgroupId: params.groupId,\n\t\t\t\t\tvalue: (params.favoritesValue === false ? 'Y' : 'N'),\n\t\t\t\t\tgetAdditionalResultData: true,\n\t\t\t\t}\n\t\t\t},\n\t\t\tanalyticsLabel: {\n\t\t\t\tb24statAction: (params.favoritesValue ? 'removeFavSonetGroup' : 'addFavSonetGroup')\n\t\t\t}\n\t\t}).then((response) => {\n\t\t\tparams.callback.success(response.data);\n\t\t}).catch((response) => {\n\t\t\tparams.callback.failure({\n\t\t\t\tERROR: response.errors[0].message,\n\t\t\t});\n\t\t});\n\t}\n\n\tstatic showButtonWait(buttonNode)\n\t{\n\t\tif (Type.isStringFilled(buttonNode))\n\t\t{\n\t\t\tbuttonNode = document.getElementById(buttonNode);\n\t\t}\n\n\t\tif (!Type.isDomNode(buttonNode))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tbuttonNode.classList.add('ui-btn-clock');\n\t\tbuttonNode.disabled = true;\n\t\tbuttonNode.style.cursor = 'auto';\n\n\t}\n\n\tstatic hideButtonWait(buttonNode)\n\t{\n\t\tif (Type.isStringFilled(buttonNode))\n\t\t{\n\t\t\tbuttonNode = document.getElementById(buttonNode);\n\t\t}\n\n\t\tif (!Type.isDomNode(buttonNode))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tbuttonNode.classList.remove('ui-btn-clock');\n\t\tbuttonNode.disabled = false;\n\t\tbuttonNode.style.cursor = 'cursor';\n\t}\n\n\tstatic showError(errorText, errorNode)\n\t{\n\t\tif (Type.isStringFilled(errorNode))\n\t\t{\n\t\t\terrorNode = document.getElementById(errorNode);\n\t\t}\n\n\t\tif (!Type.isDomNode(errorNode))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\terrorNode.innerHTML = errorText;\n\t\terrorNode.classList.remove('sonet-ui-form-error-block-invisible');\n\t}\n\n\tstatic hideError(errorNode)\n\t{\n\t\tif (Type.isStringFilled(errorNode))\n\t\t{\n\t\t\terrorNode = document.getElementById(errorNode);\n\t\t}\n\n\t\tif (!Type.isDomNode(errorNode))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\terrorNode.classList.add('sonet-ui-form-error-block-invisible');\n\t}\n\n\tstatic reload()\n\t{\n\t\tif (top !== window) // current page in slider\n\t\t{\n\t\t\tif (!Type.isUndefined(top.BX.SidePanel))\n\t\t\t{\n\t\t\t\ttop.BX.SidePanel.Instance.getSliderByWindow(window).showLoader();\n\t\t\t}\n\t\t\twindow.location.reload();\n\t\t}\n\t\telse if (\n\t\t\t!Type.isUndefined(top.BX.SidePanel)\n\t\t\t&& top.BX.SidePanel.Instance.isOpen()\n\t\t) // there's an open slider\n\t\t{\n\t\t\ttop.location.href = top.BX.SidePanel.Instance.getPageUrl();\n\t\t}\n\t\telse\n\t\t{\n\t\t\ttop.location.reload();\n\t\t}\n\t}\n\n\tstatic reloadBlock(params)\n\t{\n\t\tif (\n\t\t\t!Type.isPlainObject(params)\n\t\t\t|| !Type.isStringFilled(params.blockId)\n\t\t\t|| !document.getElementById(params.blockId)\n\t\t)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tlet url = '';\n\n\t\tif (\n\t\t\t!Type.isUndefined(top.BX.SidePanel)\n\t\t\t&& top.BX.SidePanel.Instance.isOpen()\n\t\t) // there's an open slider\n\t\t{\n\t\t\turl = top.BX.SidePanel.Instance.getPageUrl();\n\t\t}\n\t\telse\n\t\t{\n\t\t\turl = window.location.href;\n\t\t}\n\n\t\tajax.promise({\n\t\t\turl: url,\n\t\t\tmethod: 'POST',\n\t\t\tdataType: 'json',\n\t\t\tdata: {\n\t\t\t\tBLOCK_RELOAD: 'Y',\n\t\t\t\tBLOCK_ID: params.blockId\n\t\t\t}\n\t\t}).then((data) => {\n\t\t\tif (!Type.isUndefined(data.CONTENT))\n\t\t\t{\n\t\t\t\tdocument.getElementById(params.blockId).innerHTML = data.CONTENT;\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tajax.processRequestData(data.CONTENT, {\n\t\t\t\t\t\tdataType: 'HTML'\n\t\t\t\t\t});\n\t\t\t\t}, 0);\n\t\t\t}\n\t\t});\n\t}\n\n\tstatic closeGroupCardMenu(node)\n\t{\n\t\tif (!node)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst doc = node.ownerDocument;\n\t\tconst win = doc.defaultView || doc.parentWindow;\n\n\t\tif (\n\t\t\t!win\n\t\t\t|| Type.isUndefined(win.BX.Socialnetwork.UIGroupMenu)\n\t\t\t|| !win.BX.Socialnetwork.UIGroupMenu.getInstance().menuPopup\n\t\t)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\twin.BX.Socialnetwork.UIGroupMenu.getInstance().menuPopup.close();\n\t}\n\n}\n\n","import {Type} from 'main.core';\n\nexport class Widget\n{\n\tconstructor()\n\t{\n\t\tthis.widget = null;\n\t}\n\n\tshow(targetNode: HTMLElement)\n\t{\n\t\tif (this.widget)\n\t\t{\n\t\t\tif (this.widget.isShown())\n\t\t\t{\n\t\t\t\tthis.widget.close();\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tconst data = this.getData({\n\t\t\ttargetNode: targetNode,\n\t\t});\n\n\t\tif (Type.isNull(data))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.widget = this.getWidget({\n\t\t\ttargetNode: targetNode,\n\t\t\tdata: data,\n\t\t});\n\n\t\tif (this.widget)\n\t\t{\n\t\t\tthis.widget.show();\n\t\t}\n\t}\n\n\thide()\n\t{\n\t\tif (\n\t\t\tthis.widget\n\t\t\t&& this.widget.isShown()\n\t\t)\n\t\t{\n\t\t\tthis.widget.close();\n\t\t}\n\t}\n\n\tgetData(params)\n\t{\n\t\treturn {};\n\t}\n\n\tgetWidget(params)\n\t{\n\t\treturn null;\n\t}\n}\n","import {Type, Tag, Loc, Event} from 'main.core';\nimport {PopupComponentsMaker} from 'ui.popupcomponentsmaker';\n\nimport {Widget} from './widget';\n\nexport class WorkgroupWidget extends Widget\n{\n\tconstructor(params) {\n\t\tsuper();\n\n\t\tthis.groupId = (!Type.isUndefined(params.groupId) ? parseInt(params.groupId) : 0);\n\t\tthis.avatarPath = (Type.isStringFilled(params.avatarPath) ? params.avatarPath : '');\n\t\tthis.avatarType = (Type.isStringFilled(params.avatarType) ? params.avatarType : '');\n\t\tthis.projectTypeCode = (Type.isStringFilled(params.projectTypeCode) ? params.projectTypeCode : '');\n\t\tthis.urls = (Type.isPlainObject(params.urls) ? params.urls : {});\n\t\tthis.perms = (Type.isPlainObject(params.perms) ? params.perms : {});\n\t}\n\n\tgetData(params)\n\t{\n\t\tlet data = null;\n\n\t\tconst targetNode = params.targetNode;\n\t\tif (!Type.isDomNode(targetNode))\n\t\t{\n\t\t\treturn data;\n\t\t}\n\n\t\tdata = targetNode.getAttribute('data-workgroup');\n\t\ttry\n\t\t{\n\t\t\tdata = JSON.parse(data);\n\t\t}\n\t\tcatch (err)\n\t\t{\n\t\t\tdata = null;\n\t\t}\n\n\t\treturn data;\n\t}\n\n\tgetWidget(params)\n\t{\n\t\tconst targetNode = (Type.isDomNode(params.targetNode) ? params.targetNode : null);\n\t\tif (!targetNode)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tconst data = (Type.isPlainObject(params.data) ? params.data : {});\n\n\t\treturn new PopupComponentsMaker({\n\t\t\ttarget: targetNode,\n\t\t\tcontent: [\n\t\t\t\t{\n\t\t\t\t\thtml: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\thtml: this.renderAbout(data)\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\thtml: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\thtml: this.renderMembers(data),\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\thtml: this.renderRoles(data),\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t]\n\t\t});\n\t}\n\n\trenderAbout()\n\t{\n\t\tlet avatar = '<i></i>';\n\t\tif (Type.isStringFilled(this.avatarPath))\n\t\t{\n\t\t\tavatar = `<i style=\"background: #fff url('${this.avatarPath}') no-repeat; background-size: cover;\"></i>`;\n\t\t}\n\n\t\tlet title = '';\n\t\tlet description = '';\n\n\t\tswitch (this.projectTypeCode.toLowerCase())\n\t\t{\n\t\t\tcase 'project':\n\t\t\t\ttitle = Loc.getMessage('SONET_EXT_COMMON_WORKGROUP_WIDGET_ABOUT_TITLE_PROJECT');\n\t\t\t\tdescription = Loc.getMessage('SONET_EXT_COMMON_WORKGROUP_WIDGET_ABOUT_DESCRIPTION_PROJECT');\n\t\t\t\tbreak;\n\t\t\tcase 'scrum':\n\t\t\t\ttitle = Loc.getMessage('SONET_EXT_COMMON_WORKGROUP_WIDGET_ABOUT_TITLE_SCRUM');\n\t\t\t\tdescription = Loc.getMessage('SONET_EXT_COMMON_WORKGROUP_WIDGET_ABOUT_DESCRIPTION_SCRUM');\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\ttitle = Loc.getMessage('SONET_EXT_COMMON_WORKGROUP_WIDGET_ABOUT_TITLE_GROUP');\n\t\t\t\tdescription = Loc.getMessage('SONET_EXT_COMMON_WORKGROUP_WIDGET_ABOUT_DESCRIPTION_GROUP');\n\t\t}\n\n\t\tconst classList = [\n\t\t\t'sonet-common-widget-avatar',\n\t\t];\n\t\tif (\n\t\t\t!Type.isStringFilled(this.avatarPath)\n\t\t\t&& Type.isStringFilled(this.avatarType)\n\t\t)\n\t\t{\n\t\t\tclassList.push('sonet-common-workgroup-avatar');\n\t\t\tclassList.push(`--${this.avatarType}`);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tclassList.push('ui-icon');\n\t\t\tclassList.push('ui-icon-common-user-group');\n\t\t}\n\n\t\tconst node = Tag.render`\n\t\t\t<div class=\"sonet-common-widget-item\">\n\t\t\t\t<div class=\"sonet-common-widget-item-container\">\n\t\t\t\t\t<div class=\"${classList.join(' ')}\">${avatar}</div>\n\t\t\t\t\t<div class=\"sonet-common-widget-item-content\">\n\t\t\t\t\t\t<div class=\"sonet-common-widget-item-title\">${title}</div>\n\t\t\t\t\t\t<div class=\"sonet-common-widget-item-description\">${description}</div>\t\t\t\t\t\t\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\tEvent.bind(node, 'click', () => {\n\t\t\tif (!Type.isStringFilled(this.urls.card))\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tBX.SidePanel.Instance.open(this.urls.card, {\n\t\t\t\twidth: 900,\n\t\t\t\tloader: 'group-card-loader',\n\t\t\t});\n\n\t\t\tthis.hide();\n\t\t});\n\n\t\treturn node;\n\t}\n\n\trenderMembers()\n\t{\n\t\tconst node = Tag.render`\n\t\t\t<div class=\"sonet-common-widget-item\">\n\t\t\t\t<div class=\"sonet-common-widget-item-container\">\n\t\t\t\t\t<div class=\"sonet-common-widget-icon ui-icon ui-icon-common-light-company\"><i></i></div>\n\t\t\t\t\t<div class=\"sonet-common-widget-item-content\">\n\t\t\t\t\t\t<div class=\"sonet-common-widget-item-title\">${Loc.getMessage('SONET_EXT_COMMON_WORKGROUP_WIDGET_MEMBERS_TITLE')}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\tEvent.bind(node, 'click', () => {\n\t\t\tif (!Type.isStringFilled(this.urls.members))\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tBX.SidePanel.Instance.open(this.urls.members, {\n\t\t\t\twidth: 1200,\n\t\t\t\tloader: 'group-users-loader'\n\t\t\t});\n\n\t\t\tthis.hide();\n\t\t});\n\n\t\treturn node;\n\t}\n\n\trenderRoles()\n\t{\n\t\tconst canOpen = (\n\t\t\tType.isBoolean(this.perms.canModify)\n\t\t\t&& this.perms.canModify\n\t\t);\n\n\t\tconst hint = (!canOpen ? `data-hint=\"${Loc.getMessage('SONET_EXT_COMMON_WORKGROUP_WIDGET_ROLES_TITLE_NO_PERMISSIONS')}\" data-hint-no-icon` : '');\n\n\t\tconst node = Tag.render`\n\t\t\t<div class=\"sonet-common-widget-item\" ${hint}>\n\t\t\t\t<div class=\"sonet-common-widget-item-container\">\n\t\t\t\t\t<div class=\"sonet-common-widget-icon ui-icon ui-icon-service-light-roles-rights\"><i></i></div>\n\t\t\t\t\t<div class=\"sonet-common-widget-item-content\">\n\t\t\t\t\t\t<div class=\"sonet-common-widget-item-title\">${Loc.getMessage('SONET_EXT_COMMON_WORKGROUP_WIDGET_ROLES_TITLE')}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\tEvent.bind(node, 'click', () => {\n\n\t\t\tif (\n\t\t\t\t!canOpen\n\t\t\t\t|| !Type.isStringFilled(this.urls.features)\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tBX.SidePanel.Instance.open(this.urls.features, {\n\t\t\t\twidth: 800,\n\t\t\t\tloader: 'group-features-loader'\n\t\t\t});\n\n\t\t\tthis.hide();\n\t\t});\n\n\t\treturn node;\n\t}\n}\n","import {Common} from './common.js';\nimport {Waiter} from './waiter.js';\nimport {SonetGroupMenu} from './sonetgroupmenu.js';\nimport {WorkgroupWidget} from './workgroupwidget.js';\n\nexport {\n\tCommon,\n\tWaiter,\n\tSonetGroupMenu,\n\tWorkgroupWidget,\n}\n\n/** @deprecated use BX.Socialnetwork.UI.Common */\nBX.SocialnetworkUICommon = Common;\n\n/** @deprecated use BX.Socialnetwork.UI.Waiter */\nBX.SocialnetworkUICommon.Waiter = Waiter;\n\n/** @deprecated use BX.Socialnetwork.UI.GroupMenu */\nBX.SocialnetworkUICommon.SonetGroupMenu = SonetGroupMenu;\n\n/** @deprecated use BX.Socialnetwork.UI.WorkgroupWidget */\nBX.Socialnetwork.UIWorkgroupWidget = WorkgroupWidget"],"names":["Waiter","Type","isNull","instance","waitTimeout","waitPopup","timeout","setTimeout","show","BX","PopupWindow","window","autoHide","lightShadow","zIndex","content","create","props","className","children","html","message","setBindElement","clearTimeout","close","SonetGroupMenu","menuPopup","menuItem","favoritesValue","value","isDomNode","innerHTML","Loc","getMessage","addCustomEvent","params","getInstance","setItemTitle","Common","parseInt","RELATION_ID","isStringFilled","URL_REJECT_OUTGOING_REQUEST","recallText","recallButtonTitle","isUndefined","SCRUM","PROJECT","isProject","successPopup","Popup","width","overlay","Dom","text","events","click","event","_currentTarget","currentTarget","errorNode","document","getElementById","hideError","showButtonWait","ajax","url","method","dataType","data","action","max_count","checked_0","type_0","id_0","type","ajax_request","sessid","onsuccess","deleteResponseData","hideButtonWait","MESSAGE","destroy","URL_GROUPS_LIST","top","location","href","ERROR_MESSAGE","showError","onfailure","closeByEsc","closeIcon","bindElement","currentUserId","sonetGroupMenu","tagName","classList","add","menu","itemTitle","push","title","id","onclick","setFavoritesAjax","groupId","callback","success","onCustomEvent","name","NAME","URL","extranet","EXTRANET","SidePanel","Instance","postMessageAll","code","ID","RESULT","failure","perms","canInitiate","isScrumProject","urls","requestUser","canModify","edit","hideArchiveLinks","featuresItem","editFeaturesAllowed","features","B24","licenseInfoPopup","canModerate","members","canProcessRequestsIn","requests","requestsOut","copyGroupItem","copyFeatureAllowed","copy","UI","InfoHelper","isLimit","limitAnalyticsLabels","module","source","userRole","initiatedByType","userRequestItem","isOpened","sendJoinRequest","userRequestGroup","isBoolean","canLeave","userIsMember","userIsAutoMember","userLeaveGroup","canPickTheme","Intranet","Bitrix24","ThemePicker","Singleton","showDialog","popup","MenuManager","offsetTop","offsetLeft","offsetWidth","angle","onPopupClose","remove","item","getMenuItem","layout","popupWindow","groupID","save","responseData","hide","runAction","getAdditionalResultData","analyticsLabel","b24statAction","then","response","ERROR","errors","buttonNode","disabled","style","cursor","errorText","getSliderByWindow","showLoader","reload","isOpen","getPageUrl","isPlainObject","blockId","promise","BLOCK_RELOAD","BLOCK_ID","CONTENT","processRequestData","node","doc","ownerDocument","win","defaultView","parentWindow","Socialnetwork","UIGroupMenu","Widget","widget","targetNode","isShown","getData","getWidget","WorkgroupWidget","avatarPath","avatarType","projectTypeCode","getAttribute","JSON","parse","err","PopupComponentsMaker","target","renderAbout","renderMembers","renderRoles","avatar","description","toLowerCase","Tag","render","join","Event","bind","card","open","loader","canOpen","hint","SocialnetworkUICommon","UIWorkgroupWidget"],"mappings":"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"}