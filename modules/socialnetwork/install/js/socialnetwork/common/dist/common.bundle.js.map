{"version":3,"file":"common.bundle.js","sources":["../src/waiter.js","../src/sonetgroupmenu.js","../src/recalljoinrequest.js","../src/common.js","../src/widget.js","../src/workgroupwidget.js","../src/index.js"],"sourcesContent":["import {Type} from 'main.core';\n\nexport class Waiter\n{\n\tstatic instance = null;\n\n\tstatic getInstance()\n\t{\n\t\tif (Type.isNull(Waiter.instance))\n\t\t{\n\t\t\tWaiter.instance = new Waiter();\n\t\t}\n\n\t\treturn Waiter.instance;\n\t}\n\n\tconstructor()\n\t{\n\t\tthis.waitTimeout = null;\n\t\tthis.waitPopup = null;\n\n\t}\n\n\tshow(timeout)\n\t{\n\t\tif (timeout !== 0)\n\t\t{\n\t\t\treturn (this.waitTimeout = setTimeout(() => {\n\t\t\t\tthis.show(0);\n\t\t\t}, 50));\n\t\t}\n\n\t\tif (!this.waitPopup)\n\t\t{\n\t\t\tthis.waitPopup = new BX.PopupWindow('sonet_common_wait_popup', window, {\n\t\t\t\tautoHide: true,\n\t\t\t\tlightShadow: true,\n\t\t\t\tzIndex: 2,\n\t\t\t\tcontent: BX.create('DIV', {\n\t\t\t\t\tprops: {\n\t\t\t\t\t\tclassName: 'sonet-wait-cont'\n\t\t\t\t\t},\n\t\t\t\t\tchildren: [\n\t\t\t\t\t\tBX.create('DIV', {\n\t\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\t\tclassName: 'sonet-wait-icon'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}),\n\t\t\t\t\t\tBX.create('DIV', {\n\t\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\t\tclassName: 'sonet-wait-text'\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\thtml: BX.message('SONET_EXT_COMMON_WAIT')\n\t\t\t\t\t\t})\n\t\t\t\t\t]\n\t\t\t\t})\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.waitPopup.setBindElement(window);\n\t\t}\n\n\t\tthis.waitPopup.show();\n\t}\n\n\thide()\n\t{\n\t\tif (this.waitTimeout)\n\t\t{\n\t\t\tclearTimeout(this.waitTimeout);\n\t\t\tthis.waitTimeout = null;\n\t\t}\n\n\t\tif (this.waitPopup)\n\t\t{\n\t\t\tthis.waitPopup.close();\n\t\t}\n\t}\n}\n","import {Type, Loc} from 'main.core';\n\nexport class SonetGroupMenu\n{\n\tstatic instance = null;\n\n\tconstructor()\n\t{\n\t\tthis.menuPopup = null;\n\t\tthis.menuItem = null;\n\t\tthis.favoritesValue = null;\n\t}\n\n\tstatic getInstance()\n\t{\n\t\tif (Type.isNull(this.instance))\n\t\t{\n\t\t\tthis.instance = new SonetGroupMenu();\n\n\t\t\tBX.addCustomEvent('SidePanel.Slider:onClose', () => {\n\t\t\t\tif (this.instance.menuPopup)\n\t\t\t\t{\n\t\t\t\t\tthis.instance.menuPopup.close();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tBX.addCustomEvent('BX.Socialnetwork.WorkgroupMenuIcon:onSetFavorites', (params) => {\n\t\t\t\tthis.getInstance().setItemTitle(params.value);\n\t\t\t});\n\t\t}\n\n\t\treturn this.instance;\n\t}\n\n\tsetItemTitle(value)\n\t{\n\t\tif (!Type.isDomNode(this.menuItem))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.menuItem.innerHTML = (value ? Loc.getMessage('SONET_EXT_COMMON_GROUP_MENU_FAVORITES_REMOVE') : Loc.getMessage('SONET_EXT_COMMON_GROUP_MENU_FAVORITES_ADD'));\n\t}\n}\n","import {Type, Loc, Dom, ajax} from 'main.core';\nimport {Popup} from 'main.popup';\nimport {Button} from 'ui.buttons';\nimport {Waiter} from \"./waiter\";\n\nexport class RecallJoinRequest\n{\n\tconstructor(params)\n\t{\n\t\tthis.successPopup = null;\n\n\t\tthis.groupId = !Type.isUndefined(params.GROUP_ID) ? Number(params.GROUP_ID) : 0;\n\t\tthis.relationId = !Type.isUndefined(params.RELATION_ID) ? Number(params.RELATION_ID) : 0;\n\n\t\tthis.urls = {\n\t\t\trejectOutgoingRequest: Type.isStringFilled(params.URL_REJECT_OUTGOING_REQUEST) ? params.URL_REJECT_OUTGOING_REQUEST : '',\n\t\t\tgroupsList: Type.isStringFilled(params.URL_GROUPS_LIST) ? params.URL_GROUPS_LIST : '',\n\t\t};\n\t\tthis.project = Type.isBoolean(params.PROJECT) ? params.PROJECT : false;\n\t\tthis.scrum = Type.isBoolean(params.SCRUM) ? params.SCRUM : false;\n\t}\n\n\tshowPopup()\n\t{\n\t\tif (\n\t\t\tthis.relationId <= 0\n\t\t\t|| !Type.isStringFilled(this.urls.rejectOutgoingRequest)\n\t\t)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tlet recallTitle = Loc.getMessage('SONET_EXT_COMMON_RECALL_JOIN_POPUP_TITLE2');\n\t\tlet recallText = Loc.getMessage('SONET_EXT_COMMON_RECALL_JOIN_POPUP_TEXT2');\n\n\t\tif (this.scrum)\n\t\t{\n\t\t\trecallTitle = Loc.getMessage('SONET_EXT_COMMON_RECALL_JOIN_POPUP_TITLE2_SCRUM');\n\t\t\trecallText = Loc.getMessage('SONET_EXT_COMMON_RECALL_JOIN_POPUP_TEXT2_SCRUM');\n\t\t}\n\t\telse if (this.project)\n\t\t{\n\t\t\trecallTitle = Loc.getMessage('SONET_EXT_COMMON_RECALL_JOIN_POPUP_TITLE2_PROJECT');\n\t\t\trecallText = Loc.getMessage('SONET_EXT_COMMON_RECALL_JOIN_POPUP_TEXT2_PROJECT');\n\t\t}\n\n\t\tthis.successPopup = new Popup('bx-group-join-successfull-request-popup', window, {\n\t\t\twidth: 420,\n\t\t\tautoHide: false,\n\t\t\tlightShadow: false,\n\t\t\tzIndex: 1000,\n\t\t\toverlay: true,\n\t\t\tcachable: false,\n\t\t\tcontent: Dom.create('DIV', {\n\t\t\t\tchildren: [\n\t\t\t\t\tDom.create('DIV', {\n\t\t\t\t\t\ttext: recallTitle,\n\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\tclassName: 'sonet-group-join-successfull-request-popup-title',\n\t\t\t\t\t\t}\n\t\t\t\t\t}),\n\t\t\t\t\tDom.create('DIV', {\n\t\t\t\t\t\ttext: recallText,\n\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\tclassName: 'sonet-group-join-successfull-request-popup-text',\n\t\t\t\t\t\t}\n\t\t\t\t\t}),\n\t\t\t\t]\n\t\t\t}),\n\t\t\tbuttons: [\n\t\t\t\tnew Button({\n\t\t\t\t\tsize: Button.Size.MEDIUM,\n\t\t\t\t\ttext: Loc.getMessage('SONET_EXT_COMMON_RECALL_JOIN_POPUP_CLOSE_BUTTON'),\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tclick: (button) => {\n\t\t\t\t\t\t\tthis.onClose(button.getContainer());\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t}),\n\t\t\t\tnew Button({\n\t\t\t\t\tsize: Button.Size.MEDIUM,\n\t\t\t\t\tcolor: Button.Color.LINK,\n\t\t\t\t\ttext: Loc.getMessage('SONET_EXT_COMMON_RECALL_JOIN_POPUP_CANCEL_BUTTON'),\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tclick: (button) => {\n\t\t\t\t\t\t\tthis.onCancelRequest(button.getContainer());\n\t\t\t\t\t\t},\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t],\n\t\t\tcloseByEsc: false,\n\t\t\tcloseIcon: false,\n\t\t});\n\n\t\tthis.successPopup.show();\n\t}\n\n\tonClose(button)\n\t{\n\t\tif (\n\t\t\tthis.groupId <= 0\n\t\t\t|| !Type.isDomNode(button)\n\t\t)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tRecallJoinRequest.showButtonWait(button);\n\n\t\tajax.runAction('socialnetwork.api.usertogroup.setHideRequestPopup', {\n\t\t\tdata: {\n\t\t\t\tgroupId: this.groupId,\n\t\t\t}\n\t\t}).then((response) => {\n\t\t\tRecallJoinRequest.hideButtonWait(button);\n\t\t\tthis.successPopup.close();\n\t\t}, () => {\n\t\t\tRecallJoinRequest.hideButtonWait(button);\n\t\t});\n\t}\n\n\tonCancelRequest(button)\n\t{\n\t\tif (\n\t\t\tthis.groupId <= 0\n\t\t\t|| !Type.isDomNode(button)\n\t\t)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst errorNode = document.getElementById('bx-group-delete-request-error');\n\n\t\tRecallJoinRequest.hideError(errorNode);\n\t\tRecallJoinRequest.showButtonWait(button);\n\n\t\tajax.runAction('socialnetwork.api.usertogroup.cancelIncomingRequest', {\n\t\t\tdata: {\n\t\t\t\tgroupId: this.groupId,\n\t\t\t\tuserId: parseInt(Loc.getMessage('USER_ID')),\n\t\t\t},\n\t\t}).then((response) => {\n\n\t\t\tRecallJoinRequest.hideButtonWait(button);\n\n\t\t\tthis.successPopup.destroy();\n\t\t\tif (Type.isStringFilled(this.urls.groupsList))\n\t\t\t{\n\t\t\t\ttop.location.href = this.urls.groupsList;\n\t\t\t}\n\n\t\t\tthis.reload();\n\t\t}).catch((response) => {\n\t\t\tRecallJoinRequest.showError(Loc.getMessage('SONET_EXT_COMMON_AJAX_ERROR'), errorNode);\n//\t\t\tRecallJoinRequest.showError(deleteResponseData.ERROR_MESSAGE, errorNode);\n\t\t\tRecallJoinRequest.hideButtonWait(button);\n\t\t});\n\t}\n\n\tstatic showButtonWait(buttonNode)\n\t{\n\t\tif (Type.isStringFilled(buttonNode))\n\t\t{\n\t\t\tbuttonNode = document.getElementById(buttonNode);\n\t\t}\n\n\t\tif (!Type.isDomNode(buttonNode))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tbuttonNode.classList.add('ui-btn-clock');\n\t\tbuttonNode.disabled = true;\n\t\tbuttonNode.style.cursor = 'auto';\n\t}\n\n\tstatic hideButtonWait(buttonNode)\n\t{\n\t\tif (Type.isStringFilled(buttonNode))\n\t\t{\n\t\t\tbuttonNode = document.getElementById(buttonNode);\n\t\t}\n\n\t\tif (!Type.isDomNode(buttonNode))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tbuttonNode.classList.remove('ui-btn-clock');\n\t\tbuttonNode.disabled = false;\n\t\tbuttonNode.style.cursor = 'cursor';\n\t}\n\n\tstatic showError(errorText, errorNode)\n\t{\n\t\tif (Type.isStringFilled(errorNode))\n\t\t{\n\t\t\terrorNode = document.getElementById(errorNode);\n\t\t}\n\n\t\tif (!Type.isDomNode(errorNode))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\terrorNode.innerHTML = errorText;\n\t\terrorNode.classList.remove('sonet-ui-form-error-block-invisible');\n\t}\n\n\tstatic hideError(errorNode)\n\t{\n\t\tif (Type.isStringFilled(errorNode))\n\t\t{\n\t\t\terrorNode = document.getElementById(errorNode);\n\t\t}\n\n\t\tif (!Type.isDomNode(errorNode))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\terrorNode.classList.add('sonet-ui-form-error-block-invisible');\n\t}\n}\n","import {Type, Loc, ajax} from 'main.core';\nimport {MenuManager} from 'main.popup'\n\nimport {Waiter} from './waiter.js';\nimport {SonetGroupMenu} from './sonetgroupmenu.js';\nimport {RecallJoinRequest} from './recalljoinrequest.js';\n\nclass Common\n{\n\tstatic showGroupMenuPopup(params)\n\t{\n\t\tlet bindElement = params.bindElement;\n\t\tif (Type.isStringFilled(bindElement))\n\t\t{\n\t\t\tbindElement = document.getElementById(bindElement);\n\t\t}\n\n\t\tconst currentUserId = parseInt(Loc.getMessage('USER_ID'));\n\t\tconst sonetGroupMenu = SonetGroupMenu.getInstance();\n\n\t\tif (bindElement.tagName === 'BUTTON')\n\t\t{\n\t\t\tbindElement.classList.add('ui-btn-active');\n\t\t}\n\n\t\tconst menu = [];\n\t\tlet itemTitle = '';\n\n\t\tif (currentUserId > 0)\n\t\t{\n\t\t\tmenu.push({\n\t\t\t\ttext: (!!sonetGroupMenu.favoritesValue ? Loc.getMessage('SONET_EXT_COMMON_GROUP_MENU_FAVORITES_REMOVE') : Loc.getMessage('SONET_EXT_COMMON_GROUP_MENU_FAVORITES_ADD')),\n\t\t\t\ttitle: (!!sonetGroupMenu.favoritesValue ? Loc.getMessage('SONET_EXT_COMMON_GROUP_MENU_FAVORITES_REMOVE') : Loc.getMessage('SONET_EXT_COMMON_GROUP_MENU_FAVORITES_ADD')),\n\t\t\t\tid: 'set-group-favorite',\n\t\t\t\tonclick: () => {\n\n\t\t\t\t\tconst favoritesValue = sonetGroupMenu.favoritesValue;\n\n\t\t\t\t\tsonetGroupMenu.setItemTitle(!favoritesValue);\n\t\t\t\t\tsonetGroupMenu.favoritesValue = !favoritesValue;\n\n\t\t\t\t\tthis.setFavoritesAjax({\n\t\t\t\t\t\tgroupId: params.groupId,\n\t\t\t\t\t\tfavoritesValue: favoritesValue,\n\t\t\t\t\t\tcallback: {\n\t\t\t\t\t\t\tsuccess: (data) => {\n\n\t\t\t\t\t\t\t\tBX.onCustomEvent(window, 'BX.Socialnetwork.WorkgroupFavorites:onSet', [{\n\t\t\t\t\t\t\t\t\tid: params.groupId,\n\t\t\t\t\t\t\t\t\tname: data.NAME,\n\t\t\t\t\t\t\t\t\turl: data.URL,\n\t\t\t\t\t\t\t\t\textranet: (!Type.isUndefined(data.EXTRANET) ? data.EXTRANET : 'N'),\n\t\t\t\t\t\t\t\t}, !favoritesValue]);\n\n\t\t\t\t\t\t\t\tBX.onCustomEvent(window, 'BX.Socialnetwork.WorkgroupMenu:onSetFavorites', [{\n\t\t\t\t\t\t\t\t\tgroupId: params.groupId,\n\t\t\t\t\t\t\t\t\tvalue: !favoritesValue,\n\t\t\t\t\t\t\t\t}]);\n\n\t\t\t\t\t\t\t\twindow.top.BX.SidePanel.Instance.postMessageAll(window, 'sonetGroupEvent', {\n\t\t\t\t\t\t\t\t\tcode: 'afterSetFavorites',\n\t\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\t\tgroupId: data.ID,\n\t\t\t\t\t\t\t\t\t\tvalue: (data.RESULT === 'Y')\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tfailure: () => {\n\t\t\t\t\t\t\t\tsonetGroupMenu.favoritesValue = favoritesValue;\n\t\t\t\t\t\t\t\tsonetGroupMenu.setItemTitle(favoritesValue);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (params.perms.canInitiate)\n\t\t\t{\n\t\t\t\titemTitle = Loc.getMessage('SONET_EXT_COMMON_GROUP_MENU_REQU');\n\t\t\t\tif (!!params.isScrumProject)\n\t\t\t\t{\n\t\t\t\t\titemTitle = Loc.getMessage('SONET_EXT_COMMON_GROUP_MENU_REQU_SCRUM');\n\t\t\t\t}\n\t\t\t\telse if (!!params.isProject)\n\t\t\t\t{\n\t\t\t\t\titemTitle = Loc.getMessage('SONET_EXT_COMMON_GROUP_MENU_REQU_PROJECT');\n\t\t\t\t}\n\t\t\t\tmenu.push({\n\t\t\t\t\ttext: itemTitle,\n\t\t\t\t\ttitle: itemTitle,\n\t\t\t\t\thref: params.urls.requestUser,\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (params.perms.canModify)\n\t\t\t{\n\t\t\t\titemTitle = Loc.getMessage('SONET_EXT_COMMON_GROUP_MENU_EDIT');\n\t\t\t\tif (!!params.isScrumProject)\n\t\t\t\t{\n\t\t\t\t\titemTitle = Loc.getMessage('SONET_EXT_COMMON_GROUP_MENU_EDIT_SCRUM');\n\t\t\t\t}\n\t\t\t\telse if (!!params.isProject)\n\t\t\t\t{\n\t\t\t\t\titemTitle = Loc.getMessage('SONET_EXT_COMMON_GROUP_MENU_EDIT_PROJECT');\n\t\t\t\t}\n\t\t\t\tmenu.push({\n\t\t\t\t\ttext: itemTitle,\n\t\t\t\t\ttitle: itemTitle,\n\t\t\t\t\thref: params.urls.edit,\n\t\t\t\t});\n\n\t\t\t\tif (!params.hideArchiveLinks)\n\t\t\t\t{\n\t\t\t\t\tconst featuresItem = {\n\t\t\t\t\t\ttext: Loc.getMessage('SONET_EXT_COMMON_GROUP_MENU_FEAT'),\n\t\t\t\t\t\ttitle: Loc.getMessage('SONET_EXT_COMMON_GROUP_MENU_FEAT'),\n\t\t\t\t\t};\n\n\t\t\t\t\tif (params.editFeaturesAllowed)\n\t\t\t\t\t{\n\t\t\t\t\t\tfeaturesItem.href = params.urls.features;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tfeaturesItem.onclick = () => {\n\t\t\t\t\t\t\tB24.licenseInfoPopup.show(\n\t\t\t\t\t\t\t\t'sonetGroupFeatures',\n\t\t\t\t\t\t\t\tLoc.getMessage('SONET_EXT_COMMON_B24_SONET_GROUP_FEATURES_TITLE'),\n\t\t\t\t\t\t\t\t`<span>${Loc.getMessage('SONET_EXT_COMMON_B24_SONET_GROUP_FEATURES_TEXT')}</span>`,\n\t\t\t\t\t\t\t\ttrue\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\tmenu.push(featuresItem);\n\t\t\t\t}\n\n\t\t\t\titemTitle = Loc.getMessage('SONET_EXT_COMMON_GROUP_MENU_DELETE');\n\t\t\t\tif (!!params.isScrumProject)\n\t\t\t\t{\n\t\t\t\t\titemTitle = Loc.getMessage('SONET_EXT_COMMON_GROUP_MENU_DELETE_SCRUM');\n\t\t\t\t}\n\t\t\t\telse if (!!params.isProject)\n\t\t\t\t{\n\t\t\t\t\titemTitle = Loc.getMessage('SONET_EXT_COMMON_GROUP_MENU_DELETE_PROJECT');\n\t\t\t\t}\n\t\t\t\tmenu.push({\n\t\t\t\t\ttext: itemTitle,\n\t\t\t\t\ttitle: itemTitle,\n\t\t\t\t\thref: params.urls.delete,\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tmenu.push({\n\t\t\t\ttext: (params.perms.canModerate ? Loc.getMessage('SONET_EXT_COMMON_GROUP_MENU_MEMBERS_EDIT') : Loc.getMessage('SONET_EXT_COMMON_GROUP_MENU_MEMBERS_VIEW')),\n\t\t\t\ttitle: (params.perms.canModerate ? Loc.getMessage('SONET_EXT_COMMON_GROUP_MENU_MEMBERS_EDIT') : Loc.getMessage('SONET_EXT_COMMON_GROUP_MENU_MEMBERS_VIEW')),\n\t\t\t\thref: params.urls.members,\n\t\t\t});\n\n\t\t\tif (params.perms.canInitiate)\n\t\t\t{\n\t\t\t\tif (params.perms.canProcessRequestsIn)\n\t\t\t\t{\n\t\t\t\t\tmenu.push({\n\t\t\t\t\t\ttext: Loc.getMessage('SONET_EXT_COMMON_GROUP_MENU_REQ_IN'),\n\t\t\t\t\t\ttitle: Loc.getMessage('SONET_EXT_COMMON_GROUP_MENU_REQ_IN'),\n\t\t\t\t\t\thref: params.urls.requests,\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\titemTitle = Loc.getMessage('SONET_EXT_COMMON_GROUP_MENU_REQ_OUT');\n\t\t\t\tif (!!params.isScrumProject)\n\t\t\t\t{\n\t\t\t\t\titemTitle = Loc.getMessage('SONET_EXT_COMMON_GROUP_MENU_REQ_OUT_SCRUM');\n\t\t\t\t}\n\t\t\t\telse if (!!params.isProject)\n\t\t\t\t{\n\t\t\t\t\titemTitle = Loc.getMessage('SONET_EXT_COMMON_GROUP_MENU_REQ_OUT_PROJECT');\n\t\t\t\t}\n\t\t\t\tmenu.push({\n\t\t\t\t\ttext: itemTitle,\n\t\t\t\t\ttitle: itemTitle,\n\t\t\t\t\thref: params.urls.requestsOut,\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (params.perms.canModify)\n\t\t\t{\n\t\t\t\titemTitle = Loc.getMessage('SONET_EXT_COMMON_GROUP_MENU_COPY');\n\t\t\t\tif (!!params.isScrumProject)\n\t\t\t\t{\n\t\t\t\t\titemTitle = Loc.getMessage('SONET_EXT_COMMON_GROUP_MENU_COPY_SCRUM');\n\t\t\t\t}\n\t\t\t\telse if (!!params.isProject)\n\t\t\t\t{\n\t\t\t\t\titemTitle = Loc.getMessage('SONET_EXT_COMMON_GROUP_MENU_COPY_PROJECT');\n\t\t\t\t}\n\t\t\t\tconst copyGroupItem = {\n\t\t\t\t\ttext: itemTitle,\n\t\t\t\t\ttitle: itemTitle,\n\t\t\t\t}\n\t\t\t\tif (params.copyFeatureAllowed)\n\t\t\t\t{\n\t\t\t\t\tcopyGroupItem.href = params.urls.copy;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tcopyGroupItem.onclick = () => {\n\t\t\t\t\t\tif (!!params.isProject)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tBX.UI.InfoHelper.show('limit_task_copy_project', {\n\t\t\t\t\t\t\t\tisLimit: true,\n\t\t\t\t\t\t\t\tlimitAnalyticsLabels: {\n\t\t\t\t\t\t\t\t\tmodule: 'socialnetwork',\n\t\t\t\t\t\t\t\t\tsource: 'projectCardActions'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tBX.UI.InfoHelper.show('limit_task_copy_group', {\n\t\t\t\t\t\t\t\tisLimit: true,\n\t\t\t\t\t\t\t\tlimitAnalyticsLabels: {\n\t\t\t\t\t\t\t\t\tmodule: 'socialnetwork',\n\t\t\t\t\t\t\t\t\tsource: 'projectCardActions'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\tif (!params.isScrumProject) // todo remove after scrum copy will done\n\t\t\t\t{\n\t\t\t\t\tmenu.push(copyGroupItem);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\t(\n\t\t\t\t\t!Type.isStringFilled(params.userRole)\n\t\t\t\t\t|| (\n\t\t\t\t\t\tparams.userRole === Loc.getMessage('USER_TO_GROUP_ROLE_REQUEST')\n\t\t\t\t\t\t&& params.initiatedByType === Loc.getMessage('USER_TO_GROUP_INITIATED_BY_GROUP')\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t\t&& !params.hideArchiveLinks\n\t\t\t)\n\t\t\t{\n\t\t\t\titemTitle = Loc.getMessage('SONET_EXT_COMMON_GROUP_MENU_JOIN');\n\t\t\t\tif (!!params.isScrumProject)\n\t\t\t\t{\n\t\t\t\t\titemTitle = Loc.getMessage('SONET_EXT_COMMON_GROUP_MENU_JOIN_SCRUM');\n\t\t\t\t}\n\t\t\t\telse if (!!params.isProject)\n\t\t\t\t{\n\t\t\t\t\titemTitle = Loc.getMessage('SONET_EXT_COMMON_GROUP_MENU_JOIN_PROJECT');\n\t\t\t\t}\n\t\t\t\tconst userRequestItem = {\n\t\t\t\t\ttext: itemTitle,\n\t\t\t\t\ttitle: itemTitle,\n\t\t\t\t};\n\n\t\t\t\tif (!!params.isOpened)\n\t\t\t\t{\n\t\t\t\t\tuserRequestItem.onclick = () => {\n\t\t\t\t\t\tthis.sendJoinRequest(params);\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tuserRequestItem.href = params.urls.userRequestGroup;\n\t\t\t\t}\n\t\t\t\tmenu.push(userRequestItem);\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\tType.isStringFilled(params.userRole)\n\t\t\t\t&& params.userRole === Loc.getMessage('USER_TO_GROUP_ROLE_REQUEST')\n\t\t\t\t&& params.initiatedByType === Loc.getMessage('USER_TO_GROUP_INITIATED_BY_USER')\n\t\t\t\t&& parseInt(params.initiatedByUserId) === currentUserId\n\t\t\t)\n\t\t\t{\n\t\t\t\titemTitle = Loc.getMessage('SONET_EXT_COMMON_GROUP_MENU_DELETE_REQUEST');\n\n\t\t\t\tmenu.push({\n\t\t\t\t\ttext: itemTitle,\n\t\t\t\t\ttitle: itemTitle,\n\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\tthis.cancelIncomingRequest(params);\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\t(\n\t\t\t\t\tType.isBoolean(params.perms.canLeave)\n\t\t\t\t\t&& params.perms.canLeave\n\t\t\t\t)\n\t\t\t\t||\n\t\t\t\t(\n\t\t\t\t\t!Type.isBoolean(params.perms.canLeave)\n\t\t\t\t\t&& params.userIsMember\n\t\t\t\t\t&& !params.userIsAutoMember\n\t\t\t\t\t&& params.userRole !== Loc.getMessage('USER_TO_GROUP_ROLE_OWNER')\n\t\t\t\t)\n\t\t\t)\n\t\t\t{\n\t\t\t\titemTitle = Loc.getMessage('SONET_EXT_COMMON_GROUP_MENU_EXIT');\n\t\t\t\tif (!!params.isScrumProject)\n\t\t\t\t{\n\t\t\t\t\titemTitle = Loc.getMessage('SONET_EXT_COMMON_GROUP_MENU_EXIT_SCRUM');\n\t\t\t\t}\n\t\t\t\telse if (!!params.isProject)\n\t\t\t\t{\n\t\t\t\t\titemTitle = Loc.getMessage('SONET_EXT_COMMON_GROUP_MENU_EXIT_PROJECT');\n\t\t\t\t}\n\t\t\t\tmenu.push({\n\t\t\t\t\ttext: itemTitle,\n\t\t\t\t\ttitle: itemTitle,\n\t\t\t\t\thref: params.urls.userLeaveGroup\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (params.canPickTheme)\n\t\t\t{\n\t\t\t\tmenu.push({\n\t\t\t\t\ttext: Loc.getMessage('SONET_EXT_COMMON_GROUP_MENU_THEME_DIALOG'),\n\t\t\t\t\ttitle: Loc.getMessage('SONET_EXT_COMMON_GROUP_MENU_THEME_DIALOG'),\n\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\tBX.Intranet.Bitrix24.ThemePicker.Singleton.showDialog(false);\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tconst popup = MenuManager.create('group-profile-menu', bindElement, menu, {\n\t\t\toffsetTop: 5,\n\t\t\toffsetLeft : (bindElement.offsetWidth - 18),\n\t\t\tangle : true,\n\t\t\tevents : {\n\t\t\t\tonPopupClose: () => {\n\t\t\t\t\tif (bindElement.tagName === 'BUTTON')\n\t\t\t\t\t{\n\t\t\t\t\t\tbindElement.classList.remove('ui-btn-active');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tconst item = popup.getMenuItem('set-group-favorite');\n\t\tif (item)\n\t\t{\n\t\t\tsonetGroupMenu.menuItem = item.layout.text;\n\t\t}\n\n\t\tpopup.popupWindow.show();\n\t\tsonetGroupMenu.menuPopup = popup;\n\t}\n\n\tstatic sendJoinRequest(params)\n\t{\n\t\tWaiter.getInstance().show();\n\n\t\tif (\n\t\t\tSonetGroupMenu.getInstance()\n\t\t\t&& SonetGroupMenu.getInstance().menuPopup\n\t\t)\n\t\t{\n\t\t\tSonetGroupMenu.getInstance().menuPopup.close();\n\t\t}\n\n\t\tajax({\n\t\t\turl: params.urls.userRequestGroup,\n\t\t\tmethod: 'POST',\n\t\t\tdataType: 'json',\n\t\t\tdata: {\n\t\t\t\tgroupID: params.groupId,\n\t\t\t\tMESSAGE: '',\n\t\t\t\tajax_request: 'Y',\n\t\t\t\tsave: 'Y',\n\t\t\t\tsessid: Loc.getMessage('bitrix_sessid'),\n\t\t\t},\n\t\t\tonsuccess: (responseData) => {\n\t\t\t\tWaiter.getInstance().hide();\n\t\t\t\tif (\n\t\t\t\t\tType.isStringFilled(responseData.MESSAGE)\n\t\t\t\t\t&& responseData.MESSAGE === 'SUCCESS'\n\t\t\t\t\t&& Type.isStringFilled(responseData.URL)\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tBX.onCustomEvent(window.top, 'sonetGroupEvent', [ {\n\t\t\t\t\t\tcode: 'afterJoinRequestSend',\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tgroupId: params.groupId\n\t\t\t\t\t\t}\n\t\t\t\t\t} ]);\n\t\t\t\t\ttop.location.href = responseData.URL;\n\t\t\t\t}\n\t\t\t},\n\t\t\tonfailure: () => {\n\t\t\t\tWaiter.getInstance().hide();\n\t\t\t},\n\t\t});\n\t}\n\n\tstatic cancelIncomingRequest(params)\n\t{\n\t\tWaiter.getInstance().show();\n\n\t\tif (\n\t\t\tSonetGroupMenu.getInstance()\n\t\t\t&& SonetGroupMenu.getInstance().menuPopup\n\t\t)\n\t\t{\n\t\t\tSonetGroupMenu.getInstance().menuPopup.close();\n\t\t}\n\n\t\tajax.runAction('socialnetwork.api.usertogroup.cancelIncomingRequest', {\n\t\t\tdata: {\n\t\t\t\tgroupId: params.groupId,\n\t\t\t\tuserId: parseInt(Loc.getMessage('USER_ID')),\n\t\t\t},\n\t\t}).then((response) => {\n\t\t\tWaiter.getInstance().hide();\n\n\t\t\twindow.top.BX.SidePanel.Instance.postMessageAll(window, 'sonetGroupEvent', {\n\t\t\t\tcode: 'afterIncomingRequestCancel',\n\t\t\t\tdata: {\n\t\t\t\t\tgroupId: params.groupId,\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.reload();\n\t\t}).catch((response) => {\n\t\t\tWaiter.getInstance().hide();\n\t\t});\n\t}\n\n\tstatic setFavoritesAjax(params)\n\t{\n\t\tajax.runAction('socialnetwork.api.workgroup.setFavorites', {\n\t\t\tdata: {\n\t\t\t\tparams: {\n\t\t\t\t\tgroupId: params.groupId,\n\t\t\t\t\tvalue: (params.favoritesValue === false ? 'Y' : 'N'),\n\t\t\t\t\tgetAdditionalResultData: true,\n\t\t\t\t}\n\t\t\t},\n\t\t\tanalyticsLabel: {\n\t\t\t\tb24statAction: (params.favoritesValue ? 'removeFavSonetGroup' : 'addFavSonetGroup')\n\t\t\t}\n\t\t}).then((response) => {\n\t\t\tparams.callback.success(response.data);\n\t\t}).catch((response) => {\n\t\t\tparams.callback.failure({\n\t\t\t\tERROR: response.errors[0].message,\n\t\t\t});\n\t\t});\n\t}\n\n\tstatic reload()\n\t{\n\t\tif (top !== window) // current page in slider\n\t\t{\n\t\t\tif (!Type.isUndefined(top.BX.SidePanel))\n\t\t\t{\n\t\t\t\ttop.BX.SidePanel.Instance.getSliderByWindow(window).showLoader();\n\t\t\t}\n\t\t\twindow.location.reload();\n\t\t}\n\t\telse if (\n\t\t\t!Type.isUndefined(top.BX.SidePanel)\n\t\t\t&& top.BX.SidePanel.Instance.isOpen()\n\t\t) // there's an open slider\n\t\t{\n\t\t\ttop.location.href = top.BX.SidePanel.Instance.getPageUrl();\n\t\t}\n\t\telse\n\t\t{\n\t\t\ttop.location.reload();\n\t\t}\n\t}\n\n\tstatic reloadBlock(params)\n\t{\n\t\tif (\n\t\t\t!Type.isPlainObject(params)\n\t\t\t|| !Type.isStringFilled(params.blockId)\n\t\t\t|| !document.getElementById(params.blockId)\n\t\t)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tlet url = '';\n\n\t\tif (\n\t\t\t!Type.isUndefined(top.BX.SidePanel)\n\t\t\t&& top.BX.SidePanel.Instance.isOpen()\n\t\t) // there's an open slider\n\t\t{\n\t\t\turl = top.BX.SidePanel.Instance.getPageUrl();\n\t\t}\n\t\telse\n\t\t{\n\t\t\turl = window.location.href;\n\t\t}\n\n\t\tajax.promise({\n\t\t\turl: url,\n\t\t\tmethod: 'POST',\n\t\t\tdataType: 'json',\n\t\t\tdata: {\n\t\t\t\tBLOCK_RELOAD: 'Y',\n\t\t\t\tBLOCK_ID: params.blockId\n\t\t\t}\n\t\t}).then((data) => {\n\t\t\tif (!Type.isUndefined(data.CONTENT))\n\t\t\t{\n\t\t\t\tdocument.getElementById(params.blockId).innerHTML = data.CONTENT;\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tajax.processRequestData(data.CONTENT, {\n\t\t\t\t\t\tdataType: 'HTML'\n\t\t\t\t\t});\n\t\t\t\t}, 0);\n\t\t\t}\n\t\t});\n\t}\n\n\tstatic closeGroupCardMenu(node)\n\t{\n\t\tif (!node)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst doc = node.ownerDocument;\n\t\tconst win = doc.defaultView || doc.parentWindow;\n\n\t\tif (\n\t\t\t!win\n\t\t\t|| Type.isUndefined(win.BX.Socialnetwork.UIGroupMenu)\n\t\t\t|| !win.BX.Socialnetwork.UIGroupMenu.getInstance().menuPopup\n\t\t)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\twin.BX.Socialnetwork.UIGroupMenu.getInstance().menuPopup.close();\n\t}\n\n\tstatic showError = RecallJoinRequest.showError;\n\tstatic hideError = RecallJoinRequest.hideError;\n\tstatic showButtonWait = RecallJoinRequest.showButtonWait;\n\tstatic hideButtonWait = RecallJoinRequest.hideButtonWait;\n}\n\nexport {\n\tCommon,\n\tRecallJoinRequest,\n}\n\n","import {Type} from 'main.core';\n\nexport class Widget\n{\n\tconstructor()\n\t{\n\t\tthis.widget = null;\n\t}\n\n\tshow(targetNode: HTMLElement)\n\t{\n\t\tif (this.widget)\n\t\t{\n\t\t\tif (this.widget.isShown())\n\t\t\t{\n\t\t\t\tthis.widget.close();\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tconst data = this.getData({\n\t\t\ttargetNode: targetNode,\n\t\t});\n\n\t\tif (Type.isNull(data))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.widget = this.getWidget({\n\t\t\ttargetNode: targetNode,\n\t\t\tdata: data,\n\t\t});\n\n\t\tif (this.widget)\n\t\t{\n\t\t\tthis.widget.show();\n\t\t}\n\t}\n\n\thide()\n\t{\n\t\tif (\n\t\t\tthis.widget\n\t\t\t&& this.widget.isShown()\n\t\t)\n\t\t{\n\t\t\tthis.widget.close();\n\t\t}\n\t}\n\n\tgetData(params)\n\t{\n\t\treturn {};\n\t}\n\n\tgetWidget(params)\n\t{\n\t\treturn null;\n\t}\n}\n","import {Type, Tag, Loc, Event} from 'main.core';\nimport {PopupComponentsMaker} from 'ui.popupcomponentsmaker';\n\nimport {Widget} from './widget';\n\nexport class WorkgroupWidget extends Widget\n{\n\tconstructor(params) {\n\t\tsuper();\n\n\t\tthis.groupId = (!Type.isUndefined(params.groupId) ? parseInt(params.groupId) : 0);\n\t\tthis.avatarPath = (Type.isStringFilled(params.avatarPath) ? params.avatarPath : '');\n\t\tthis.avatarType = (Type.isStringFilled(params.avatarType) ? params.avatarType : '');\n\t\tthis.projectTypeCode = (Type.isStringFilled(params.projectTypeCode) ? params.projectTypeCode : '');\n\t\tthis.urls = (Type.isPlainObject(params.urls) ? params.urls : {});\n\t\tthis.perms = (Type.isPlainObject(params.perms) ? params.perms : {});\n\t}\n\n\tgetData(params)\n\t{\n\t\tlet data = null;\n\n\t\tconst targetNode = params.targetNode;\n\t\tif (!Type.isDomNode(targetNode))\n\t\t{\n\t\t\treturn data;\n\t\t}\n\n\t\tdata = targetNode.getAttribute('data-workgroup');\n\t\ttry\n\t\t{\n\t\t\tdata = JSON.parse(data);\n\t\t}\n\t\tcatch (err)\n\t\t{\n\t\t\tdata = null;\n\t\t}\n\n\t\treturn data;\n\t}\n\n\tgetWidget(params)\n\t{\n\t\tconst targetNode = (Type.isDomNode(params.targetNode) ? params.targetNode : null);\n\t\tif (!targetNode)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tconst data = (Type.isPlainObject(params.data) ? params.data : {});\n\n\t\treturn new PopupComponentsMaker({\n\t\t\ttarget: targetNode,\n\t\t\tcontent: [\n\t\t\t\t{\n\t\t\t\t\thtml: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\thtml: this.renderAbout(data)\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\thtml: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\thtml: this.renderMembers(data),\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\thtml: this.renderRoles(data),\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t]\n\t\t});\n\t}\n\n\trenderAbout()\n\t{\n\t\tlet avatar = '<i></i>';\n\t\tif (Type.isStringFilled(this.avatarPath))\n\t\t{\n\t\t\tavatar = `<i style=\"background: #fff url('${encodeURI(this.avatarPath)}') no-repeat; background-size: cover;\"></i>`;\n\t\t}\n\n\t\tlet title = '';\n\t\tlet description = '';\n\n\t\tswitch (this.projectTypeCode.toLowerCase())\n\t\t{\n\t\t\tcase 'project':\n\t\t\t\ttitle = Loc.getMessage('SONET_EXT_COMMON_WORKGROUP_WIDGET_ABOUT_TITLE_PROJECT');\n\t\t\t\tdescription = Loc.getMessage('SONET_EXT_COMMON_WORKGROUP_WIDGET_ABOUT_DESCRIPTION_PROJECT');\n\t\t\t\tbreak;\n\t\t\tcase 'scrum':\n\t\t\t\ttitle = Loc.getMessage('SONET_EXT_COMMON_WORKGROUP_WIDGET_ABOUT_TITLE_SCRUM');\n\t\t\t\tdescription = Loc.getMessage('SONET_EXT_COMMON_WORKGROUP_WIDGET_ABOUT_DESCRIPTION_SCRUM');\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\ttitle = Loc.getMessage('SONET_EXT_COMMON_WORKGROUP_WIDGET_ABOUT_TITLE_GROUP');\n\t\t\t\tdescription = Loc.getMessage('SONET_EXT_COMMON_WORKGROUP_WIDGET_ABOUT_DESCRIPTION_GROUP');\n\t\t}\n\n\t\tconst classList = [\n\t\t\t'sonet-common-widget-avatar',\n\t\t];\n\t\tif (\n\t\t\t!Type.isStringFilled(this.avatarPath)\n\t\t\t&& Type.isStringFilled(this.avatarType)\n\t\t)\n\t\t{\n\t\t\tclassList.push('sonet-common-workgroup-avatar');\n\t\t\tclassList.push(`--${this.avatarType}`);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tclassList.push('ui-icon');\n\t\t\tclassList.push('ui-icon-common-user-group');\n\t\t}\n\n\t\tconst node = Tag.render`\n\t\t\t<div class=\"sonet-common-widget-item\">\n\t\t\t\t<div class=\"sonet-common-widget-item-container\">\n\t\t\t\t\t<div class=\"${classList.join(' ')}\">${avatar}</div>\n\t\t\t\t\t<div class=\"sonet-common-widget-item-content\">\n\t\t\t\t\t\t<div class=\"sonet-common-widget-item-title\">${title}</div>\n\t\t\t\t\t\t<div class=\"sonet-common-widget-item-description\">${description}</div>\t\t\t\t\t\t\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\tEvent.bind(node, 'click', () => {\n\t\t\tif (!Type.isStringFilled(this.urls.card))\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tBX.SidePanel.Instance.open(this.urls.card, {\n\t\t\t\twidth: 900,\n\t\t\t\tloader: 'socialnetwork:group-card',\n\t\t\t});\n\n\t\t\tthis.hide();\n\t\t});\n\n\t\treturn node;\n\t}\n\n\trenderMembers()\n\t{\n\t\tconst node = Tag.render`\n\t\t\t<div class=\"sonet-common-widget-item\">\n\t\t\t\t<div class=\"sonet-common-widget-item-container\">\n\t\t\t\t\t<div class=\"sonet-common-widget-icon ui-icon ui-icon-common-light-company\"><i></i></div>\n\t\t\t\t\t<div class=\"sonet-common-widget-item-content\">\n\t\t\t\t\t\t<div class=\"sonet-common-widget-item-title\">${Loc.getMessage('SONET_EXT_COMMON_WORKGROUP_WIDGET_MEMBERS_TITLE')}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\tEvent.bind(node, 'click', () => {\n\t\t\tif (!Type.isStringFilled(this.urls.members))\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tBX.SidePanel.Instance.open(this.urls.members, {\n\t\t\t\twidth: 1200,\n\t\t\t\tloader: 'group-users-loader'\n\t\t\t});\n\n\t\t\tthis.hide();\n\t\t});\n\n\t\treturn node;\n\t}\n\n\trenderRoles()\n\t{\n\t\tconst canOpen = (\n\t\t\tType.isBoolean(this.perms.canModify)\n\t\t\t&& this.perms.canModify\n\t\t);\n\n\t\tconst hint = (!canOpen ? `data-hint=\"${Loc.getMessage('SONET_EXT_COMMON_WORKGROUP_WIDGET_ROLES_TITLE_NO_PERMISSIONS')}\" data-hint-no-icon` : '');\n\n\t\tconst node = Tag.render`\n\t\t\t<div class=\"sonet-common-widget-item\" ${hint}>\n\t\t\t\t<div class=\"sonet-common-widget-item-container\">\n\t\t\t\t\t<div class=\"sonet-common-widget-icon ui-icon ui-icon-service-light-roles-rights\"><i></i></div>\n\t\t\t\t\t<div class=\"sonet-common-widget-item-content\">\n\t\t\t\t\t\t<div class=\"sonet-common-widget-item-title\">${Loc.getMessage('SONET_EXT_COMMON_WORKGROUP_WIDGET_ROLES_TITLE')}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\tEvent.bind(node, 'click', () => {\n\n\t\t\tif (\n\t\t\t\t!canOpen\n\t\t\t\t|| !Type.isStringFilled(this.urls.features)\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tBX.SidePanel.Instance.open(this.urls.features, {\n\t\t\t\twidth: 800,\n\t\t\t\tloader: 'group-features-loader'\n\t\t\t});\n\n\t\t\tthis.hide();\n\t\t});\n\n\t\treturn node;\n\t}\n}\n","import {Common} from './common.js';\nimport {Waiter} from './waiter.js';\nimport {SonetGroupMenu} from './sonetgroupmenu.js';\nimport {WorkgroupWidget} from './workgroupwidget.js';\nimport {RecallJoinRequest} from './recalljoinrequest.js';\n\nexport {\n\tCommon,\n\tWaiter,\n\tSonetGroupMenu,\n\tWorkgroupWidget,\n\tRecallJoinRequest,\n}\n\n/** @deprecated use BX.Socialnetwork.UI.Common */\nBX.SocialnetworkUICommon = Common;\n\n/** @deprecated use BX.Socialnetwork.UI.Waiter */\nBX.SocialnetworkUICommon.Waiter = Waiter;\n\n/** @deprecated use BX.Socialnetwork.UI.GroupMenu */\nBX.SocialnetworkUICommon.SonetGroupMenu = SonetGroupMenu;\n\n/** @deprecated use BX.Socialnetwork.UI.WorkgroupWidget */\nBX.Socialnetwork.UIWorkgroupWidget = WorkgroupWidget;\n"],"names":["Waiter","Type","isNull","instance","waitTimeout","waitPopup","timeout","setTimeout","show","BX","PopupWindow","window","autoHide","lightShadow","zIndex","content","create","props","className","children","html","message","setBindElement","clearTimeout","close","SonetGroupMenu","menuPopup","menuItem","favoritesValue","value","isDomNode","innerHTML","Loc","getMessage","addCustomEvent","params","getInstance","setItemTitle","RecallJoinRequest","successPopup","groupId","isUndefined","GROUP_ID","Number","relationId","RELATION_ID","urls","rejectOutgoingRequest","isStringFilled","URL_REJECT_OUTGOING_REQUEST","groupsList","URL_GROUPS_LIST","project","isBoolean","PROJECT","scrum","SCRUM","recallTitle","recallText","Popup","width","overlay","cachable","Dom","text","buttons","Button","size","Size","MEDIUM","events","click","button","onClose","getContainer","color","Color","LINK","onCancelRequest","closeByEsc","closeIcon","showButtonWait","ajax","runAction","data","then","response","hideButtonWait","errorNode","document","getElementById","hideError","userId","parseInt","destroy","top","location","href","reload","showError","buttonNode","classList","add","disabled","style","cursor","remove","errorText","Common","bindElement","currentUserId","sonetGroupMenu","tagName","menu","itemTitle","push","title","id","onclick","setFavoritesAjax","callback","success","onCustomEvent","name","NAME","url","URL","extranet","EXTRANET","SidePanel","Instance","postMessageAll","code","ID","RESULT","failure","perms","canInitiate","isScrumProject","isProject","requestUser","canModify","edit","hideArchiveLinks","featuresItem","editFeaturesAllowed","features","B24","licenseInfoPopup","canModerate","members","canProcessRequestsIn","requests","requestsOut","copyGroupItem","copyFeatureAllowed","copy","UI","InfoHelper","isLimit","limitAnalyticsLabels","module","source","userRole","initiatedByType","userRequestItem","isOpened","sendJoinRequest","userRequestGroup","initiatedByUserId","cancelIncomingRequest","canLeave","userIsMember","userIsAutoMember","userLeaveGroup","canPickTheme","Intranet","Bitrix24","ThemePicker","Singleton","showDialog","popup","MenuManager","offsetTop","offsetLeft","offsetWidth","angle","onPopupClose","item","getMenuItem","layout","popupWindow","method","dataType","groupID","MESSAGE","ajax_request","save","sessid","onsuccess","responseData","hide","onfailure","getAdditionalResultData","analyticsLabel","b24statAction","ERROR","errors","getSliderByWindow","showLoader","isOpen","getPageUrl","isPlainObject","blockId","promise","BLOCK_RELOAD","BLOCK_ID","CONTENT","processRequestData","node","doc","ownerDocument","win","defaultView","parentWindow","Socialnetwork","UIGroupMenu","Widget","widget","targetNode","isShown","getData","getWidget","WorkgroupWidget","avatarPath","avatarType","projectTypeCode","getAttribute","JSON","parse","err","PopupComponentsMaker","target","renderAbout","renderMembers","renderRoles","avatar","encodeURI","description","toLowerCase","Tag","render","join","Event","bind","card","open","loader","canOpen","hint","SocialnetworkUICommon","UIWorkgroupWidget"],"mappings":"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"}