{"version":3,"file":"sonet-entity-selector.bundle.js","sources":["../src/footer.js"],"sourcesContent":["import { Type, Tag, Loc, Runtime, Dom, Validation } from 'main.core';\nimport { EventEmitter, BaseEvent } from 'main.core.events';\nimport { DefaultFooter } from 'ui.entity-selector';\nimport type { Dialog, TabOptions } from 'ui.entity-selector';\n\nexport default class Footer extends DefaultFooter\n{\n\tconstructor(dialog: Dialog, options: { [option: string]: any })\n\t{\n\t\tsuper(dialog, options);\n\n\t\tthis.handleDialogDestroy = this.handleDialogDestroy.bind(this);\n\t\tthis.handleSliderMessage = this.handleSliderMessage.bind(this);\n\n\t\tthis.bindEvents();\n\t}\n\n\tgetContent(): HTMLElement | HTMLElement[] | string | null\n\t{\n\t\treturn this.cache.remember('content', () => {\n\t\t\tconst inviteEmployeeLink = this.getOption('inviteEmployeeLink');\n\t\t\tconst inviteGuestLink = this.getOption('inviteGuestLink');\n\n\t\t\tif (inviteEmployeeLink && inviteGuestLink)\n\t\t\t{\n\t\t\t\tconst phrase =\n\t\t\t\t\tTag.render`<div>${Loc.getMessage('SOCNET_ENTITY_SELECTOR_INVITE_EMPLOYEE_OR_GUEST')}</div>`\n\t\t\t\t;\n\n\t\t\t\tconst employee = phrase.querySelector('employee');\n\t\t\t\tconst guest = phrase.querySelector('guest');\n\t\t\t\tconst spans = Array.from(phrase.querySelectorAll('span'));\n\n\t\t\t\tphrase.replaceChild(\n\t\t\t\t\tTag.render`\n\t\t\t\t\t\t<span \n\t\t\t\t\t\t\tclass=\"ui-selector-footer-link ui-selector-footer-link-add\" \n\t\t\t\t\t\t\tonclick=\"${this.handleInviteEmployeeClick.bind(this)}\">${\n\t\t\t\t\t\t\temployee.innerHTML\n\t\t\t\t\t\t}</span>\n\t\t\t\t\t`,\n\t\t\t\t\temployee\n\t\t\t\t);\n\n\t\t\t\tconst guestLink = Tag.render`\n\t\t\t\t\t<span \n\t\t\t\t\t\tclass=\"ui-selector-footer-link\" \n\t\t\t\t\t\tonclick=\"${this.handleInviteGuestClick.bind(this)}\">${\n\t\t\t\t\t\tguest.innerHTML\n\t\t\t\t\t}</span>\n\t\t\t\t`;\n\n\t\t\t\tphrase.replaceChild(guestLink, guest);\n\t\t\t\tthis.createHint(guestLink);\n\n\t\t\t\tspans.forEach(span => {\n\t\t\t\t\tphrase.replaceChild(\n\t\t\t\t\t\tTag.render`<span class=\"ui-selector-footer-conjunction\">${span.innerHTML}</span>`,\n\t\t\t\t\t\tspan\n\t\t\t\t\t);\n\t\t\t\t});\n\n\t\t\t\t// Get rid of the outer <div>\n\t\t\t\tconst fragment = document.createDocumentFragment();\n\t\t\t\tArray.from(phrase.childNodes).forEach(element => {\n\t\t\t\t\tfragment.appendChild(element);\n\t\t\t\t});\n\n\t\t\t\treturn fragment;\n\t\t\t}\n\t\t\telse if (inviteEmployeeLink)\n\t\t\t{\n\t\t\t\treturn Tag.render`\n\t\t\t\t\t<span \n\t\t\t\t\t\tclass=\"ui-selector-footer-link ui-selector-footer-link-add\" \n\t\t\t\t\t\tonclick=\"${this.handleInviteEmployeeClick.bind(this)}\">${\n\t\t\t\t\t\tLoc.getMessage('SOCNET_ENTITY_SELECTOR_INVITE_EMPLOYEE')\n\t\t\t\t\t}</span>\n\t\t\t\t`;\n\t\t\t}\n\t\t\telse if (inviteGuestLink)\n\t\t\t{\n\t\t\t\tconst guestLink = Tag.render`\n\t\t\t\t\t<span class=\"ui-selector-footer-link ui-selector-footer-link-add\" \n\t\t\t\t\t\tonclick=\"${this.handleInviteGuestClick.bind(this)}\">${\n\t\t\t\t\t\tLoc.getMessage('SOCNET_ENTITY_SELECTOR_INVITE_GUEST')\n\t\t\t\t\t}</span>\n\t\t\t\t`;\n\n\t\t\t\tthis.createHint(guestLink);\n\n\t\t\t\treturn guestLink;\n\t\t\t}\n\n\t\t\treturn null;\n\t\t});\n\t}\n\n\tcreateHint(link: HTMLElement): void\n\t{\n\t\tRuntime.loadExtension('ui.hint').then(() => {\n\t\t\tconst hint = BX.UI.Hint.createInstance();\n\t\t\tconst node = hint.createNode(Loc.getMessage('SOCNET_ENTITY_SELECTOR_INVITED_GUEST_HINT'));\n\t\t\tDom.insertAfter(node, link);\n\t\t});\n\t}\n\n\thandleInviteEmployeeClick(): void\n\t{\n\t\tconst inviteEmployeeLink = this.getOption('inviteEmployeeLink');\n\n\t\tif (Type.isStringFilled(inviteEmployeeLink))\n\t\t{\n\t\t\tconst entity = this.getDialog().getEntity('user');\n\t\t\tconst userOptions = entity.getOptions() || {};\n\n\t\t\tBX.SidePanel.Instance.open(\n\t\t\t\tinviteEmployeeLink,\n\t\t\t\t{\n\t\t\t\t\tallowChangeHistory: false,\n\t\t\t\t\tcacheable: false,\n\t\t\t\t\trequestMethod: 'post',\n\t\t\t\t\trequestParams: {\n\t\t\t\t\t\tcomponentParams: JSON.stringify({\n\t\t\t\t\t\t\t'USER_OPTIONS': userOptions\n\t\t\t\t\t\t})\n\t\t\t\t\t},\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tentitySelectorId: this.getDialog().getId()\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t}\n\n\thandleInviteGuestClick(): void\n\t{\n\t\tconst inviteGuestLink = this.getOption('inviteGuestLink');\n\n\t\tif (Type.isStringFilled(inviteGuestLink))\n\t\t{\n\t\t\tconst entity = this.getDialog().getEntity('user');\n\t\t\tconst userOptions = entity.getOptions() || {};\n\n\t\t\tconst rows = [];\n\t\t\tconst searchQuery = this.getDialog().getTagSelectorQuery();\n\t\t\tif (Validation.isEmail(searchQuery))\n\t\t\t{\n\t\t\t\trows.push({ 'email': searchQuery });\n\t\t\t}\n\n\t\t\tBX.SidePanel.Instance.open(\n\t\t\t\tinviteGuestLink,\n\t\t\t\t{\n\t\t\t\t\twidth: 1200,\n\t\t\t\t\tallowChangeHistory: false,\n\t\t\t\t\tcacheable: false,\n\t\t\t\t\trequestMethod: 'post',\n\t\t\t\t\trequestParams: {\n\t\t\t\t\t\tcomponentParams: JSON.stringify({\n\t\t\t\t\t\t\t'USER_OPTIONS': userOptions,\n\t\t\t\t\t\t\t'ROWS': rows\n\t\t\t\t\t\t})\n\t\t\t\t\t},\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tentitySelectorId: this.getDialog().getId()\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t}\n\n\tbindEvents(): void\n\t{\n\t\tthis.getDialog().subscribe('onDestroy', this.handleDialogDestroy);\n\t\tEventEmitter.subscribe('SidePanel.Slider:onMessage', this.handleSliderMessage);\n\t}\n\n\tunbindEvents(): void\n\t{\n\t\tthis.getDialog().unsubscribe('onDestroy', this.handleDialogDestroy);\n\t\tEventEmitter.unsubscribe('SidePanel.Slider:onMessage', this.handleSliderMessage);\n\t}\n\n\thandleDialogDestroy(): void\n\t{\n\t\tthis.unbindEvents();\n\t}\n\n\thandleSliderMessage(event: BaseEvent): void\n\t{\n\t\tconst [messageEvent] = event.getData();\n\t\tconst slider = messageEvent.getSender();\n\n\t\tif (slider.getData().get('entitySelectorId') !== this.getDialog().getId())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (\n\t\t\tmessageEvent.getEventId() === 'BX.Intranet.Invitation:onAdd' ||\n\t\t\tmessageEvent.getEventId() === 'BX.Intranet.Invitation.Guest:onAdd'\n\t\t)\n\t\t{\n\t\t\tconst { users } = messageEvent.getData();\n\t\t\tthis.addUsers(users);\n\t\t}\n\t}\n\n\taddUsers(users: Array): void\n\t{\n\t\tif (!Type.isArrayFilled(users))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tlet tab = this.getDialog().getRecentTab() || this.getDialog().getTab('invited-users');\n\t\tif (!tab)\n\t\t{\n\t\t\ttab = this.getDialog().addTab(this.createTab());\n\t\t}\n\n\t\tusers.forEach(user => {\n\t\t\tif (!Type.isPlainObject(user))\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst item = this.getDialog().addItem(\n\t\t\t\tObject.assign({}, user, { tabs: tab.getId(), sort: 2 })\n\t\t\t);\n\n\t\t\tif (item)\n\t\t\t{\n\t\t\t\titem.select();\n\t\t\t}\n\t\t});\n\n\t\tthis.getDialog().selectTab(tab.getId());\n\t}\n\n\tcreateTab(): TabOptions\n\t{\n\t\tconst icon =\n\t\t\t'data:image/svg+xml;charset=US-ASCII,%3Csvg%20width%3D%2223%22%20height%3D%2223%22%20' +\n\t\t\t'fill%3D%22none%22%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%3E%3Cpath%20fill-rule%3D%22evenodd' +\n\t\t\t'%22%20clip-rule%3D%22evenodd%22%20d%3D%22M11.447%202.984a8.447%208.447%200%20100%2016.893%208.447%2' +\n\t\t\t'08.447%200%20000-16.893zM5.785%2016.273c-.02.018-.116.09-.234.177a7.706%207.706%200%2001-1.846-5.02' +\n\t\t\t'c0-.36.025-.717.073-1.069.442.573.927%201.347%201.094%201.579.272.379.575.75.84%201.136.444.648.91%' +\n\t\t\t'201.534.673%202.34-.102.346-.328.627-.6.857zm8.92-6.27s.402%201.575%202.122%201.444c.544-.04.509%20' +\n\t\t\t'1.414.162%202.015-.43.743-.318%201.627-.725%202.37-.256.467-.69.814-1.035%201.213-.43.501-.913.984-' +\n\t\t\t'1.631.922-.474-.04-.67-.565-.763-.939-.23-.928-.39-2.828-.39-2.828s-.668-1.443-2.177-1.003c-1.509.' +\n\t\t\t'44-1.816-.728-1.859-1.84-.102-2.742%202.204-3.032%202.472-2.984.383.069%201.507.262%201.79.418.956' +\n\t\t\t'.528%201.935-.2%201.858-.585-.077-.385-2.453-.939-3.296-.999-.843-.06-.92.24-1.151-.014-.187-.205-' +\n\t\t\t'.015-.53.116-.703.93-1.225%202.48-1.522%203.791-2.16.02-.01.051-.08.087-.184a7.72%207.72%200%20012.' +\n\t\t\t'846%201.81%207.719%207.719%200%20011.894%203.091c-.28.165.277-.057-1.185.283-1.462.34-2.926.673-2.9' +\n\t\t\t'26.673z%22%20fill%3D%22%23ABB1B8%22/%3E%3C/svg%3E'\n\t\t;\n\n\t\treturn {\n\t\t\tid: 'invited-users',\n\t\t\ttitle: Loc.getMessage('SOCNET_ENTITY_SELECTOR_INVITED_USERS_TAB_TITLE'),\n\t\t\tbgColor: {\n\t\t\t\tselected: '#f7a700',\n\t\t\t\tselectedHovered:  '#faac09',\n\t\t\t},\n\t\t\ticon: {\n\t\t\t\t//default: '/bitrix/js/socialnetwork/entity-selector/src/images/invited-users-tab-icon.svg',\n\t\t\t\t//selected: '/bitrix/js/socialnetwork/entity-selector/src/images/invited-users-tab-icon-selected.svg'\n\t\t\t\tdefault: icon,\n\t\t\t\tselected: icon.replace(/ABB1B8/g, 'fff'),\n\t\t\t}\n\t\t};\n\t}\n}"],"names":["Footer","dialog","options","handleDialogDestroy","bind","handleSliderMessage","bindEvents","cache","remember","inviteEmployeeLink","getOption","inviteGuestLink","phrase","Tag","render","Loc","getMessage","employee","querySelector","guest","spans","Array","from","querySelectorAll","replaceChild","handleInviteEmployeeClick","innerHTML","guestLink","handleInviteGuestClick","createHint","forEach","span","fragment","document","createDocumentFragment","childNodes","element","appendChild","link","Runtime","loadExtension","then","hint","BX","UI","Hint","createInstance","node","createNode","Dom","insertAfter","Type","isStringFilled","entity","getDialog","getEntity","userOptions","getOptions","SidePanel","Instance","open","allowChangeHistory","cacheable","requestMethod","requestParams","componentParams","JSON","stringify","data","entitySelectorId","getId","rows","searchQuery","getTagSelectorQuery","Validation","isEmail","push","width","subscribe","EventEmitter","unsubscribe","unbindEvents","event","getData","messageEvent","slider","getSender","get","getEventId","users","addUsers","isArrayFilled","tab","getRecentTab","getTab","addTab","createTab","user","isPlainObject","item","addItem","Object","assign","tabs","sort","select","selectTab","icon","id","title","bgColor","selected","selectedHovered","default","replace","DefaultFooter"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;KAKqBA;;;CAEpB,kBAAYC,MAAZ,EAA4BC,OAA5B,EACA;CAAA;;CAAA;CACC,wGAAMD,MAAN,EAAcC,OAAd;CAEA,UAAKC,mBAAL,GAA2B,MAAKA,mBAAL,CAAyBC,IAAzB,2CAA3B;CACA,UAAKC,mBAAL,GAA2B,MAAKA,mBAAL,CAAyBD,IAAzB,2CAA3B;;CAEA,UAAKE,UAAL;;CAND;CAOC;;;;kCAGD;CAAA;;CACC,aAAO,KAAKC,KAAL,CAAWC,QAAX,CAAoB,SAApB,EAA+B,YAAM;CAC3C,YAAMC,kBAAkB,GAAG,MAAI,CAACC,SAAL,CAAe,oBAAf,CAA3B;;CACA,YAAMC,eAAe,GAAG,MAAI,CAACD,SAAL,CAAe,iBAAf,CAAxB;;CAEA,YAAID,kBAAkB,IAAIE,eAA1B,EACA;CACC,cAAMC,MAAM,GACXC,aAAG,CAACC,MADO,oBACOC,aAAG,CAACC,UAAJ,CAAe,iDAAf,CADP,CAAZ;CAIA,cAAMC,QAAQ,GAAGL,MAAM,CAACM,aAAP,CAAqB,UAArB,CAAjB;CACA,cAAMC,KAAK,GAAGP,MAAM,CAACM,aAAP,CAAqB,OAArB,CAAd;CACA,cAAME,KAAK,GAAGC,KAAK,CAACC,IAAN,CAAWV,MAAM,CAACW,gBAAP,CAAwB,MAAxB,CAAX,CAAd;CAEAX,UAAAA,MAAM,CAACY,YAAP,CACCX,aAAG,CAACC,MADL,qBAIc,MAAI,CAACW,yBAAL,CAA+BrB,IAA/B,CAAoC,MAApC,CAJd,EAKGa,QAAQ,CAACS,SALZ,GAQCT,QARD;CAWA,cAAMU,SAAS,GAAGd,aAAG,CAACC,MAAP,qBAGF,MAAI,CAACc,sBAAL,CAA4BxB,IAA5B,CAAiC,MAAjC,CAHE,EAIbe,KAAK,CAACO,SAJO,CAAf;CAQAd,UAAAA,MAAM,CAACY,YAAP,CAAoBG,SAApB,EAA+BR,KAA/B;;CACA,UAAA,MAAI,CAACU,UAAL,CAAgBF,SAAhB;;CAEAP,UAAAA,KAAK,CAACU,OAAN,CAAc,UAAAC,IAAI,EAAI;CACrBnB,YAAAA,MAAM,CAACY,YAAP,CACCX,aAAG,CAACC,MADL,qBAC2DiB,IAAI,CAACL,SADhE,GAECK,IAFD;CAIA,WALD,EA/BD;;CAuCC,cAAMC,QAAQ,GAAGC,QAAQ,CAACC,sBAAT,EAAjB;CACAb,UAAAA,KAAK,CAACC,IAAN,CAAWV,MAAM,CAACuB,UAAlB,EAA8BL,OAA9B,CAAsC,UAAAM,OAAO,EAAI;CAChDJ,YAAAA,QAAQ,CAACK,WAAT,CAAqBD,OAArB;CACA,WAFD;CAIA,iBAAOJ,QAAP;CACA,SA9CD,MA+CK,IAAIvB,kBAAJ,EACL;CACC,iBAAOI,aAAG,CAACC,MAAX,qBAGa,MAAI,CAACW,yBAAL,CAA+BrB,IAA/B,CAAoC,MAApC,CAHb,EAIEW,aAAG,CAACC,UAAJ,CAAe,wCAAf,CAJF;CAOA,SATI,MAUA,IAAIL,eAAJ,EACL;CACC,cAAMgB,UAAS,GAAGd,aAAG,CAACC,MAAP,qBAEF,MAAI,CAACc,sBAAL,CAA4BxB,IAA5B,CAAiC,MAAjC,CAFE,EAGbW,aAAG,CAACC,UAAJ,CAAe,qCAAf,CAHa,CAAf;;CAOA,UAAA,MAAI,CAACa,UAAL,CAAgBF,UAAhB;;CAEA,iBAAOA,UAAP;CACA;;CAED,eAAO,IAAP;CACA,OA5EM,CAAP;CA6EA;;;gCAEUW,MACX;CACCC,MAAAA,iBAAO,CAACC,aAAR,CAAsB,SAAtB,EAAiCC,IAAjC,CAAsC,YAAM;CAC3C,YAAMC,IAAI,GAAGC,EAAE,CAACC,EAAH,CAAMC,IAAN,CAAWC,cAAX,EAAb;CACA,YAAMC,IAAI,GAAGL,IAAI,CAACM,UAAL,CAAgBjC,aAAG,CAACC,UAAJ,CAAe,2CAAf,CAAhB,CAAb;CACAiC,QAAAA,aAAG,CAACC,WAAJ,CAAgBH,IAAhB,EAAsBT,IAAtB;CACA,OAJD;CAKA;;;iDAGD;CACC,UAAM7B,kBAAkB,GAAG,KAAKC,SAAL,CAAe,oBAAf,CAA3B;;CAEA,UAAIyC,cAAI,CAACC,cAAL,CAAoB3C,kBAApB,CAAJ,EACA;CACC,YAAM4C,MAAM,GAAG,KAAKC,SAAL,GAAiBC,SAAjB,CAA2B,MAA3B,CAAf;CACA,YAAMC,WAAW,GAAGH,MAAM,CAACI,UAAP,MAAuB,EAA3C;CAEAd,QAAAA,EAAE,CAACe,SAAH,CAAaC,QAAb,CAAsBC,IAAtB,CACCnD,kBADD,EAEC;CACCoD,UAAAA,kBAAkB,EAAE,KADrB;CAECC,UAAAA,SAAS,EAAE,KAFZ;CAGCC,UAAAA,aAAa,EAAE,MAHhB;CAICC,UAAAA,aAAa,EAAE;CACdC,YAAAA,eAAe,EAAEC,IAAI,CAACC,SAAL,CAAe;CAC/B,8BAAgBX;CADe,aAAf;CADH,WAJhB;CASCY,UAAAA,IAAI,EAAE;CACLC,YAAAA,gBAAgB,EAAE,KAAKf,SAAL,GAAiBgB,KAAjB;CADb;CATP,SAFD;CAgBA;CACD;;;8CAGD;CACC,UAAM3D,eAAe,GAAG,KAAKD,SAAL,CAAe,iBAAf,CAAxB;;CAEA,UAAIyC,cAAI,CAACC,cAAL,CAAoBzC,eAApB,CAAJ,EACA;CACC,YAAM0C,MAAM,GAAG,KAAKC,SAAL,GAAiBC,SAAjB,CAA2B,MAA3B,CAAf;CACA,YAAMC,WAAW,GAAGH,MAAM,CAACI,UAAP,MAAuB,EAA3C;CAEA,YAAMc,IAAI,GAAG,EAAb;CACA,YAAMC,WAAW,GAAG,KAAKlB,SAAL,GAAiBmB,mBAAjB,EAApB;;CACA,YAAIC,oBAAU,CAACC,OAAX,CAAmBH,WAAnB,CAAJ,EACA;CACCD,UAAAA,IAAI,CAACK,IAAL,CAAU;CAAE,qBAASJ;CAAX,WAAV;CACA;;CAED7B,QAAAA,EAAE,CAACe,SAAH,CAAaC,QAAb,CAAsBC,IAAtB,CACCjD,eADD,EAEC;CACCkE,UAAAA,KAAK,EAAE,IADR;CAEChB,UAAAA,kBAAkB,EAAE,KAFrB;CAGCC,UAAAA,SAAS,EAAE,KAHZ;CAICC,UAAAA,aAAa,EAAE,MAJhB;CAKCC,UAAAA,aAAa,EAAE;CACdC,YAAAA,eAAe,EAAEC,IAAI,CAACC,SAAL,CAAe;CAC/B,8BAAgBX,WADe;CAE/B,sBAAQe;CAFuB,aAAf;CADH,WALhB;CAWCH,UAAAA,IAAI,EAAE;CACLC,YAAAA,gBAAgB,EAAE,KAAKf,SAAL,GAAiBgB,KAAjB;CADb;CAXP,SAFD;CAkBA;CACD;;;kCAGD;CACC,WAAKhB,SAAL,GAAiBwB,SAAjB,CAA2B,WAA3B,EAAwC,KAAK3E,mBAA7C;CACA4E,MAAAA,6BAAY,CAACD,SAAb,CAAuB,4BAAvB,EAAqD,KAAKzE,mBAA1D;CACA;;;oCAGD;CACC,WAAKiD,SAAL,GAAiB0B,WAAjB,CAA6B,WAA7B,EAA0C,KAAK7E,mBAA/C;CACA4E,MAAAA,6BAAY,CAACC,WAAb,CAAyB,4BAAzB,EAAuD,KAAK3E,mBAA5D;CACA;;;2CAGD;CACC,WAAK4E,YAAL;CACA;;;yCAEmBC,OACpB;CAAA,2BACwBA,KAAK,CAACC,OAAN,EADxB;CAAA;CAAA,UACQC,YADR;;CAEC,UAAMC,MAAM,GAAGD,YAAY,CAACE,SAAb,EAAf;;CAEA,UAAID,MAAM,CAACF,OAAP,GAAiBI,GAAjB,CAAqB,kBAArB,MAA6C,KAAKjC,SAAL,GAAiBgB,KAAjB,EAAjD,EACA;CACC;CACA;;CAED,UACCc,YAAY,CAACI,UAAb,OAA8B,8BAA9B,IACAJ,YAAY,CAACI,UAAb,OAA8B,oCAF/B,EAIA;CAAA,oCACmBJ,YAAY,CAACD,OAAb,EADnB;CAAA,YACSM,KADT,yBACSA,KADT;;CAEC,aAAKC,QAAL,CAAcD,KAAd;CACA;CACD;;;8BAEQA,OACT;CAAA;;CACC,UAAI,CAACtC,cAAI,CAACwC,aAAL,CAAmBF,KAAnB,CAAL,EACA;CACC;CACA;;CAED,UAAIG,GAAG,GAAG,KAAKtC,SAAL,GAAiBuC,YAAjB,MAAmC,KAAKvC,SAAL,GAAiBwC,MAAjB,CAAwB,eAAxB,CAA7C;;CACA,UAAI,CAACF,GAAL,EACA;CACCA,QAAAA,GAAG,GAAG,KAAKtC,SAAL,GAAiByC,MAAjB,CAAwB,KAAKC,SAAL,EAAxB,CAAN;CACA;;CAEDP,MAAAA,KAAK,CAAC3D,OAAN,CAAc,UAAAmE,IAAI,EAAI;CACrB,YAAI,CAAC9C,cAAI,CAAC+C,aAAL,CAAmBD,IAAnB,CAAL,EACA;CACC;CACA;;CAED,YAAME,IAAI,GAAG,MAAI,CAAC7C,SAAL,GAAiB8C,OAAjB,CACZC,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBL,IAAlB,EAAwB;CAAEM,UAAAA,IAAI,EAAEX,GAAG,CAACtB,KAAJ,EAAR;CAAqBkC,UAAAA,IAAI,EAAE;CAA3B,SAAxB,CADY,CAAb;;CAIA,YAAIL,IAAJ,EACA;CACCA,UAAAA,IAAI,CAACM,MAAL;CACA;CACD,OAdD;CAgBA,WAAKnD,SAAL,GAAiBoD,SAAjB,CAA2Bd,GAAG,CAACtB,KAAJ,EAA3B;CACA;;;iCAGD;CACC,UAAMqC,IAAI,GACT,yFACA,mGADA,GAEA,qGAFA,GAGA,qGAHA,GAIA,qGAJA,GAKA,qGALA,GAMA,qGANA,GAOA,oGAPA,GAQA,oGARA,GASA,oGATA,GAUA,qGAVA,GAWA,qGAXA,GAYA,mDAbD;CAgBA,aAAO;CACNC,QAAAA,EAAE,EAAE,eADE;CAENC,QAAAA,KAAK,EAAE9F,aAAG,CAACC,UAAJ,CAAe,gDAAf,CAFD;CAGN8F,QAAAA,OAAO,EAAE;CACRC,UAAAA,QAAQ,EAAE,SADF;CAERC,UAAAA,eAAe,EAAG;CAFV,SAHH;CAONL,QAAAA,IAAI,EAAE;CACL;CACA;CACAM,UAAAA,OAAO,EAAEN,IAHJ;CAILI,UAAAA,QAAQ,EAAEJ,IAAI,CAACO,OAAL,CAAa,SAAb,EAAwB,KAAxB;CAJL;CAPA,OAAP;CAcA;;;GA5QkCC;;;;;;;;"}