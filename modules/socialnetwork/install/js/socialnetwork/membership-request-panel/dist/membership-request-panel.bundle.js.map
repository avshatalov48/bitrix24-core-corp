{"version":3,"file":"membership-request-panel.bundle.js","sources":["../src/members-list.js","../src/pull.requests.js","../src/membership-request-panel.js"],"sourcesContent":["import { ajax, AjaxError, AjaxResponse, Dom, Event, Tag, Text, Type } from 'main.core';\nimport { Popup } from 'main.popup';\nimport { Loader } from 'main.loader';\nimport { Member } from './membership-request-panel';\n\ntype Params = {\n\tgroupId: number,\n\tbindElement: HTMLElement,\n\tpathToUser: string,\n}\n\nexport class MembersList\n{\n\t#popup: Popup;\n\t#loader: Loader;\n\t#groupId: number;\n\t#pathToUser: string;\n\t#pageNum: number;\n\n\t#listMembers: Set;\n\n\tconstructor(params: Params)\n\t{\n\t\tthis.#groupId = Type.isInteger(parseInt(params.groupId, 10)) ? parseInt(params.groupId, 10) : 0;\n\n\t\tthis.#popup = this.#createPopup(params.bindElement);\n\t\tthis.#pathToUser = params.pathToUser;\n\n\t\tthis.#listMembers = new Set();\n\n\t\tthis.#pageNum = 1;\n\t}\n\n\tshow()\n\t{\n\t\tthis.#popup.toggle();\n\t}\n\n\t#createPopup(bindElement: HTMLElement): Popup\n\t{\n\t\tconst popup = new Popup({\n\t\t\tid: 'sn-mrp-members-popup',\n\t\t\tclassName: 'sn-mrp-members-popup',\n\t\t\tbindElement: bindElement,\n\t\t\tautoHide: true,\n\t\t\tcloseByEsc: true,\n\t\t\tcontent: this.#renderPopupContent(),\n\t\t\tevents: {\n\t\t\t\tonAfterPopupShow: () => {\n\t\t\t\t\tconst popupContainer = popup.getContentContainer();\n\t\t\t\t\tconst listContainer = popupContainer.querySelector('.sn-mrp-members-popup-content');\n\t\t\t\t\tconst list = popupContainer.querySelector('.sn-mrp-members-popup-inner');\n\n\t\t\t\t\tthis.#bindPopupScroll(list);\n\n\t\t\t\t\tthis.#showLoader(listContainer);\n\n\t\t\t\t\t// eslint-disable-next-line promise/catch-or-return\n\t\t\t\t\tthis.#appendMembers(list).then(() => {\n\t\t\t\t\t\tthis.#destroyLoader();\n\t\t\t\t\t\tthis.#bindPopupScroll(list);\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\n\t\treturn popup;\n\t}\n\n\t#appendMembers(list: HTMLElement): Promise\n\t{\n\t\t// eslint-disable-next-line promise/catch-or-return\n\t\treturn this.#getList()\n\t\t\t.then((listMembers: Array<Member>) => {\n\t\t\t\tlistMembers.forEach((member: Member) => {\n\t\t\t\t\tthis.#listMembers.add(member);\n\t\t\t\t\tDom.append(this.#renderMember(member), list);\n\t\t\t\t});\n\t\t\t})\n\t\t;\n\t}\n\n\t#renderPopupContent(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"sn-mrp-members-popup-container\">\n\t\t\t\t<div class=\"sn-mrp-members-popup-content\">\n\t\t\t\t\t<div class=\"sn-mrp-members-popup-content-box\">\n\t\t\t\t\t\t<div class=\"sn-mrp-members-popup-inner\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\t#renderMember(member: Member): HTMLElement\n\t{\n\t\tlet photoIcon = '<i></i>';\n\t\tif (member.photo)\n\t\t{\n\t\t\tphotoIcon = `<i style=\"background-image: url('${encodeURI(member.photo)}')\"></i>`;\n\t\t}\n\n\t\treturn Tag.render`\n\t\t\t<a\n\t\t\t\tclass=\"sn-mrp-members-popup-item\"\n\t\t\t\thref=\"${Text.encode(this.#pathToUser.replace('#user_id#', member.id))}\"\n\t\t\t\tdata-id=\"sn-mrp-members-popup-item-${member.id}\"\n\t\t\t>\n\t\t\t\t<span class=\"sn-mrp-members-popup-avatar-new\">\n\t\t\t\t\t<div class=\"ui-icon ui-icon-common-user sn-mrp-members-popup-avatar-img\">\n\t\t\t\t\t\t${photoIcon}\n\t\t\t\t\t</div>\n\t\t\t\t\t<span></span>\n\t\t\t\t</span>\n\t\t\t\t<span class=\"sn-mrp-members-popup-name\">\n\t\t\t\t\t${Text.encode(member.name)}\n\t\t\t\t</span>\n\t\t\t</a>\n\t\t`;\n\t}\n\n\t#bindPopupScroll(list: HTMLElement)\n\t{\n\t\tEvent.bind(list, 'scroll', () => {\n\t\t\tif (list.scrollTop > (list.scrollHeight - list.offsetHeight) / 1.5)\n\t\t\t{\n\t\t\t\tthis.#appendMembers(list);\n\n\t\t\t\tEvent.unbindAll(list, 'scroll');\n\t\t\t}\n\t\t});\n\t}\n\n\t#showLoader(target: HTMLElement)\n\t{\n\t\tthis.#loader = new Loader({\n\t\t\ttarget: target,\n\t\t\tsize: 40,\n\t\t});\n\n\t\tthis.#loader.show();\n\t}\n\n\t#destroyLoader()\n\t{\n\t\tthis.#loader.destroy();\n\t}\n\n\t#getList(): Promise\n\t{\n\t\treturn new Promise((resolve) => {\n\t\t\tajax.runAction('socialnetwork.api.workgroup.getListIncomingUsers', {\n\t\t\t\tdata: {\n\t\t\t\t\tgroupId: this.#groupId,\n\t\t\t\t\tpageNum: this.#pageNum,\n\t\t\t\t},\n\t\t\t})\n\t\t\t\t.then((response: AjaxResponse) => {\n\t\t\t\t\tthis.#pageNum++;\n\t\t\t\t\tresolve(response.data);\n\t\t\t\t})\n\t\t\t\t.catch((error: AjaxError) => {\n\t\t\t\t\tthis.#consoleError('getList', error);\n\t\t\t\t})\n\t\t\t;\n\t\t});\n\t}\n\n\t#consoleError(action: string, error: AjaxError)\n\t{\n\t\t// eslint-disable-next-line no-console\n\t\tconsole.error(`MembershipRequestPanel.MembersList: ${action} error`, error);\n\t}\n}\n","import { EventEmitter } from 'main.core.events';\n\nexport class PullRequests extends EventEmitter\n{\n\t#groupId: number;\n\n\tconstructor(groupId: number)\n\t{\n\t\tsuper();\n\n\t\tthis.setEventNamespace('BX.Socialnetwork.MRP.PullRequests');\n\n\t\tthis.#groupId = groupId;\n\t}\n\n\tgetModuleId(): string\n\t{\n\t\treturn 'socialnetwork';\n\t}\n\n\tgetMap(): Object\n\t{\n\t\treturn {\n\t\t\tworkgroup_user_add: this.#update.bind(this),\n\t\t\tworkgroup_user_delete: this.#update.bind(this),\n\t\t\tworkgroup_user_update: this.#update.bind(this),\n\t\t};\n\t}\n\n\t#update(data): void\n\t{\n\t\tif (parseInt(data.params.GROUP_ID, 10) === this.#groupId)\n\t\t{\n\t\t\tthis.emit('update');\n\t\t}\n\t}\n}\n","import { ajax, AjaxError, AjaxResponse, Dom, Loc, Tag, Type, Uri, Text, Event } from 'main.core';\nimport { PULL as Pull } from 'pull.client';\nimport { MembersList } from './members-list';\nimport { PullRequests } from './pull.requests';\n\nimport './css/panel.css';\n\ntype Params = {\n\tgroupId: number,\n\tpathToUser: string,\n\tpathToUsers: string,\n}\n\ntype Data = {\n\tlistAwaitingMembers: Array<Member>,\n\tcounters: {\n\t\tworkgroup_requests_out: number,\n\t\tworkgroup_requests_in: number,\n\t},\n}\n\nexport type Member = {\n\tid: number,\n\tname: string,\n\tphoto: string,\n}\n\nexport class MembershipRequestPanel\n{\n\t#sidePanelManager: BX.SidePanel.Manager;\n\n\t#groupId: number;\n\t#pathToUser: string;\n\t#pathToUsers: string;\n\n\t#waiting: boolean;\n\n\t#membersList: MembersList;\n\n\t#container: HTMLElement;\n\t#node: HTMLElement;\n\n\tconstructor(params: Params)\n\t{\n\t\tthis.#sidePanelManager = BX.SidePanel.Instance;\n\n\t\tthis.#groupId = Type.isInteger(parseInt(params.groupId, 10)) ? parseInt(params.groupId, 10) : 0;\n\n\t\tthis.#pathToUser = params.pathToUser;\n\t\tthis.#pathToUsers = params.pathToUsers;\n\n\t\tthis.#waiting = false;\n\n\t\tthis.#node = null;\n\n\t\tthis.#subscribeToPull();\n\t}\n\n\trenderTo(container: HTMLElement)\n\t{\n\t\tif (!Type.isDomNode(container))\n\t\t{\n\t\t\tthrow new Error('BX.Socialnetwork.Spaces.MembershipRequestPanel: HTMLElement for render not found');\n\t\t}\n\n\t\tthis.#container = container;\n\n\t\tthis.#render(this.#container, this.#getData());\n\t}\n\n\t#subscribeToPull()\n\t{\n\t\tconst pullRequests = new PullRequests(this.#groupId);\n\t\tpullRequests.subscribe('update', this.#update.bind(this));\n\n\t\tPull.subscribe(pullRequests);\n\t}\n\n\t#getData(): Promise\n\t{\n\t\treturn ajax.runAction('socialnetwork.api.workgroup.get', {\n\t\t\tdata: {\n\t\t\t\tparams: {\n\t\t\t\t\tselect: [\n\t\t\t\t\t\t'LIST_OF_MEMBERS_AWAITING_INVITE',\n\t\t\t\t\t\t'COUNTERS',\n\t\t\t\t\t],\n\t\t\t\t\tgroupId: this.#groupId,\n\t\t\t\t},\n\t\t\t},\n\t\t})\n\t\t\t.then((response: AjaxResponse) => {\n\t\t\t\treturn {\n\t\t\t\t\tlistAwaitingMembers: response.data.LIST_OF_MEMBERS_AWAITING_INVITE,\n\t\t\t\t\tcounters: response.data.COUNTERS,\n\t\t\t\t};\n\t\t\t})\n\t\t\t.catch((error: AjaxError) => {\n\t\t\t\tthis.#consoleError('getData', error);\n\t\t\t})\n\t\t;\n\t}\n\n\t#update()\n\t{\n\t\tthis.#membersList = null;\n\n\t\tthis.#render(this.#container, this.#getData());\n\t}\n\n\t#render(container: HTMLElement, dataPromise: Promise): void\n\t{\n\t\t// eslint-disable-next-line promise/catch-or-return\n\t\tdataPromise\n\t\t\t.then((data: Data) => {\n\t\t\t\tDom.clean(container);\n\n\t\t\t\tconst listAwaitingMembers = data.listAwaitingMembers;\n\t\t\t\tif (listAwaitingMembers.length > 0)\n\t\t\t\t{\n\t\t\t\t\tif (listAwaitingMembers.length > 1)\n\t\t\t\t\t{\n\t\t\t\t\t\tconst amountRequests = parseInt(data.counters.workgroup_requests_in, 10);\n\n\t\t\t\t\t\tDom.append(\n\t\t\t\t\t\t\tthis.#renderMultipleRequest(amountRequests, listAwaitingMembers),\n\t\t\t\t\t\t\tcontainer,\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tDom.append(\n\t\t\t\t\t\t\tthis.#renderSingleRequest(listAwaitingMembers[0]),\n\t\t\t\t\t\t\tcontainer,\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t;\n\t}\n\n\t#remove()\n\t{\n\t\tDom.remove(this.#node);\n\t}\n\n\t#renderSingleRequest(member: Member): HTMLElement\n\t{\n\t\tconst acceptId = 'sn-mrp-single-accept-btn';\n\t\tconst rejectId = 'sn-mrp-single-reject-btn';\n\n\t\tthis.#node = Tag.render`\n\t\t\t<div class=\"sn-spaces__warning\">\n\t\t\t\t<div class=\"sn-spaces__warning-icon\">\n\t\t\t\t\t${this.#renderPhoto(member.photo)}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"sn-spaces__warning-info\">\n\t\t\t\t\t<div class=\"sn-spaces__warning-info_count\">1</div>\n\t\t\t\t\t<div class=\"sn-spaces__warning-info_text\">\n\t\t\t\t\t\t${\n\t\t\t\t\t\t\tLoc.getMessage('SN_MRP_SINGLE_LABEL')\n\t\t\t\t\t\t\t\t.replace('#id#', 'sn-mrp-member-profile-link')\n\t\t\t\t\t\t\t\t.replace('#class#', 'sn-spaces__warning-info_link')\n\t\t\t\t\t\t\t\t.replace('#path#', Text.encode(this.#pathToUser.replace('#user_id#', member.id)))\n\t\t\t\t\t\t\t\t.replace('#name#', Text.encode(member.name))\n\t\t\t\t\t\t}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"sn-spaces__warning-btns\">\n\t\t\t\t\t<button\n\t\t\t\t\t\tdata-id=\"${acceptId}\"\n\t\t\t\t\t\tclass=\"ui-btn ui-btn-xs ui-btn-success ui-btn-no-caps ui-btn-round\"\n\t\t\t\t\t>\n\t\t\t\t\t\t${Loc.getMessage('SN_MRP_SINGLE_ACCEPT_BTN')}\n\t\t\t\t\t</button>\n\t\t\t\t\t<button\n\t\t\t\t\t\tdata-id=\"${rejectId}\"\n\t\t\t\t\t\tclass=\"ui-btn ui-btn-xs ui-btn-light ui-btn-no-caps ui-btn-round\"\n\t\t\t\t\t>\n\t\t\t\t\t\t${Loc.getMessage('SN_MRP_SINGLE_REJECT_BTN')}\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\tconst acceptBtn = this.#node.querySelector(`[data-id='${acceptId}']`);\n\t\tEvent.bind(\n\t\t\tacceptBtn,\n\t\t\t'click',\n\t\t\tthis.#acceptIncomingRequest.bind(this, acceptBtn, [member.id]),\n\t\t);\n\n\t\tconst rejectBtn = this.#node.querySelector(`[data-id='${rejectId}']`);\n\t\tEvent.bind(\n\t\t\trejectBtn,\n\t\t\t'click',\n\t\t\tthis.#rejectIncomingRequest.bind(this, rejectBtn, [member.id]),\n\t\t);\n\n\t\treturn this.#node;\n\t}\n\n\t#renderMultipleRequest(amountRequests: number, listAwaitingMembers: Array<Member>): HTMLElement\n\t{\n\t\tconst visibleAmount = 5;\n\t\tconst invisibleAmount = amountRequests - visibleAmount;\n\n\t\tconst members = listAwaitingMembers.slice(0, visibleAmount);\n\n\t\tconst photosId = 'sn-mrp-multiple-photos';\n\t\tconst acceptId = 'sn-mrp-multiple-accept-btn';\n\t\tconst rejectId = 'sn-mrp-multiple-reject-btn';\n\n\t\tthis.#node = Tag.render`\n\t\t\t<div class=\"sn-spaces__warning\">\n\t\t\t\t<div\n\t\t\t\t\tdata-id=\"${photosId}\"\n\t\t\t\t\tclass=\"sn-spaces__warning-icon\"\n\t\t\t\t\tstyle=\"cursor: pointer;\"\n\t\t\t\t>\n\t\t\t\t\t${members.map((member: Member) => {\n\t\t\t\t\t\treturn this.#renderPhoto(member.photo);\n\t\t\t\t\t})}\n\t\t\t\t\t<div\n\t\t\t\t\t\tstyle=\"${invisibleAmount > 0 ? '' : 'display: none;'}\"\n\t\t\t\t\t\tclass=\"sn-spaces__warning-icon_element --count\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<span class=\"sn-spaces__warning-icon_element-plus\">+</span>\n\t\t\t\t\t\t<span class=\"sn-spaces__warning-icon_element-number\">${invisibleAmount}</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"sn-spaces__warning-info\">\n\t\t\t\t\t<div class=\"sn-spaces__warning-info_count\">\n\t\t\t\t\t\t${parseInt(amountRequests, 10)}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"sn-spaces__warning-info_text\">\n\t\t\t\t\t\t${Loc.getMessage('SN_MRP_MULTIPLE_LABEL')}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"sn-spaces__warning-btns\">\n\t\t\t\t\t<button\n\t\t\t\t\t\tdata-id=\"${acceptId}\"\n\t\t\t\t\t\tclass=\"ui-btn ui-btn-xs ui-btn-success ui-btn-no-caps ui-btn-round\"\n\t\t\t\t\t>\n\t\t\t\t\t\t${Loc.getMessage('SN_MRP_MULTIPLE_ACCEPT_BTN')}\n\t\t\t\t\t</button>\n\t\t\t\t\t<button\n\t\t\t\t\t\tdata-id=\"${rejectId}\"\n\t\t\t\t\t\tclass=\"ui-btn ui-btn-xs ui-btn-light ui-btn-no-caps ui-btn-round\"\n\t\t\t\t\t>\n\t\t\t\t\t\t${Loc.getMessage('SN_MRP_MULTIPLE_REJECT_BTN')}\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\tconst photosList = this.#node.querySelector(`[data-id='${photosId}']`);\n\t\tEvent.bind(\n\t\t\tphotosList,\n\t\t\t'click',\n\t\t\t() => this.#showMembers(photosList),\n\t\t);\n\n\t\tconst acceptBtn = this.#node.querySelector(`[data-id='${acceptId}']`);\n\t\tEvent.bind(\n\t\t\tacceptBtn,\n\t\t\t'click',\n\t\t\t() => {\n\t\t\t\tthis.#acceptIncomingRequest(\n\t\t\t\t\tacceptBtn,\n\t\t\t\t\tlistAwaitingMembers.map((member: Member) => {\n\t\t\t\t\t\treturn member.id;\n\t\t\t\t\t}),\n\t\t\t\t);\n\t\t\t},\n\t\t);\n\n\t\tconst rejectBtn = this.#node.querySelector(`[data-id='${rejectId}']`);\n\t\tEvent.bind(\n\t\t\trejectBtn,\n\t\t\t'click',\n\t\t\tthis.#openGroupUsers.bind(this, 'in'),\n\t\t);\n\n\t\treturn this.#node;\n\t}\n\n\t#renderPhoto(photo: string): HTMLElement\n\t{\n\t\tif (photo)\n\t\t{\n\t\t\treturn Tag.render`\n\t\t\t\t<div\n\t\t\t\t\tclass=\"sn-spaces__warning-icon_element\"\n\t\t\t\t\tstyle=\"background-image: url('${encodeURI(photo)}');\"\n\t\t\t\t></div>\n\t\t\t`;\n\t\t}\n\n\t\treturn Tag.render`<div class=\"sn-spaces__warning-icon_element ui-icon ui-icon-common-user ui-icon-xs\"><i></i></div>`;\n\t}\n\n\t#showMembers(bindElement: HTMLElement)\n\t{\n\t\tif (!this.#membersList)\n\t\t{\n\t\t\tthis.#membersList = new MembersList({\n\t\t\t\tgroupId: this.#groupId,\n\t\t\t\tbindElement,\n\t\t\t\tpathToUser: this.#pathToUser,\n\t\t\t});\n\t\t}\n\n\t\tthis.#membersList.show();\n\t}\n\n\t#acceptIncomingRequest(btn: HTMLElement, userIds: Array): void\n\t{\n\t\tif (this.#isWaiting())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.#activateWaiting(btn);\n\n\t\tajax.runAction('socialnetwork.api.workgroup.acceptIncomingRequest', {\n\t\t\tdata: {\n\t\t\t\tgroupId: this.#groupId,\n\t\t\t\tuserIds: userIds,\n\t\t\t},\n\t\t})\n\t\t\t.then((response: AjaxResponse) => {\n\t\t\t\tthis.#remove();\n\n\t\t\t\tthis.#deactivateWaiting(btn);\n\t\t\t})\n\t\t\t.catch((error: AjaxError) => {\n\t\t\t\tthis.#consoleError('acceptIncomingRequest', error);\n\n\t\t\t\tthis.#deactivateWaiting(btn);\n\t\t\t})\n\t\t;\n\t}\n\n\t#rejectIncomingRequest(btn: HTMLElement, userIds: Array): void\n\t{\n\t\tif (this.#isWaiting())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.#activateWaiting(btn);\n\n\t\tajax.runAction('socialnetwork.api.workgroup.rejectIncomingRequest', {\n\t\t\tdata: {\n\t\t\t\tgroupId: this.#groupId,\n\t\t\t\tuserIds: userIds,\n\t\t\t},\n\t\t})\n\t\t\t.then((response: AjaxResponse) => {\n\t\t\t\tthis.#remove();\n\n\t\t\t\tthis.#deactivateWaiting(btn);\n\t\t\t})\n\t\t\t.catch((error: AjaxError) => {\n\t\t\t\tthis.#consoleError('acceptIncomingRequest', error);\n\n\t\t\t\tthis.#deactivateWaiting(btn);\n\t\t\t})\n\t\t;\n\t}\n\n\t#openGroupUsers(mode: 'all' | 'in' | 'out'): void\n\t{\n\t\tconst availableModes = {\n\t\t\tall: 'members',\n\t\t\tin: 'requests_in',\n\t\t\tout: 'requests_out',\n\t\t};\n\n\t\tconst uri = new Uri(this.#pathToUsers);\n\t\turi.setQueryParams({\n\t\t\tmode: availableModes[mode],\n\t\t});\n\n\t\tthis.#sidePanelManager.open(uri.toString(), {\n\t\t\twidth: 1200,\n\t\t\tcacheable: false,\n\t\t\tloader: 'group-users-loader',\n\t\t});\n\t}\n\n\t#isWaiting(): boolean\n\t{\n\t\treturn this.#waiting;\n\t}\n\n\t#activateWaiting(btn: HTMLElement): void\n\t{\n\t\tthis.#waiting = true;\n\n\t\tDom.addClass(btn, 'ui-btn-wait');\n\t}\n\n\t#deactivateWaiting(btn: HTMLElement): void\n\t{\n\t\tthis.#waiting = false;\n\n\t\tDom.removeClass(btn, 'ui-btn-wait');\n\t}\n\n\t#consoleError(action: string, error: AjaxError)\n\t{\n\t\t// eslint-disable-next-line no-console\n\t\tconsole.error(`MembershipRequestPanel: ${action} error`, error);\n\t}\n}\n"],"names":["MembersList","params","Type","isInteger","parseInt","groupId","bindElement","pathToUser","Set","toggle","popup","Popup","id","className","autoHide","closeByEsc","content","events","onAfterPopupShow","popupContainer","getContentContainer","listContainer","querySelector","list","then","listMembers","forEach","member","add","Dom","append","Tag","render","photoIcon","photo","encodeURI","Text","encode","replace","name","Event","bind","scrollTop","scrollHeight","offsetHeight","unbindAll","target","Loader","size","show","destroy","Promise","resolve","ajax","runAction","data","pageNum","response","error","action","console","PullRequests","_classPrivateMethodInitSpec","_classPrivateFieldInitSpec","setEventNamespace","workgroup_user_add","_classPrivateMethodGet","workgroup_user_delete","workgroup_user_update","EventEmitter","GROUP_ID","emit","MembershipRequestPanel","BX","SidePanel","Instance","pathToUsers","container","isDomNode","Error","pullRequests","subscribe","Pull","select","listAwaitingMembers","LIST_OF_MEMBERS_AWAITING_INVITE","counters","COUNTERS","dataPromise","clean","length","amountRequests","workgroup_requests_in","remove","acceptId","rejectId","Loc","getMessage","acceptBtn","rejectBtn","visibleAmount","invisibleAmount","members","slice","photosId","map","photosList","btn","userIds","mode","availableModes","all","out","uri","Uri","setQueryParams","open","toString","width","cacheable","loader","addClass","removeClass"],"mappings":"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"}