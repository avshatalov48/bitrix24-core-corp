(function(){var e=window.BX;if(e.CommentAux){return}e.CommentAux={};e.CommentAux.init=function(t){e.RenderParts.init(t)};e.CommentAux.getLiveText=function(t,n){var r="";if(t=="share"){if(typeof n=="object"&&n.length>0){r=e.message(n.length==1?"SONET_COMMENTAUX_JS_SHARE_TEXT":"SONET_COMMENTAUX_JS_SHARE_TEXT_1");r=r.replace("#SHARE_LIST#",this.getShareList(n))}}else if(t=="createtask"){if(typeof n=="object"&&typeof n.taskId!="undefined"&&parseInt(n.taskId)>0&&typeof n.taskName!="undefined"&&n.taskName.length>0&&typeof n.sourceEntityType!="undefined"&&n.sourceEntityType.length>0&&typeof n.sourceEntityId!="undefined"&&parseInt(n.sourceEntityId)>0){var s=this.renderEntity({ENTITY_TYPE:"task",NAME:n.taskName,LINK:"",VISIBILITY:{userId:typeof n.taskResponsibleId!="undefined"&&parseInt(n.taskResponsibleId)>0?parseInt(n.taskResponsibleId):0}});if(n.sourceEntityType=="BLOG_POST"){r=e.message("SONET_COMMENTAUX_JS_CREATETASK_BLOG_POST").replace("#TASK_NAME#",s)}else if(n.sourceEntityType=="BLOG_COMMENT"||n.sourceEntityType=="FORUM_POST"||n.sourceEntityType=="LOG_COMMENT"){var i=this.renderEntity({ENTITY_TYPE:"createTaskSourceComment",SOURCE_ENTITY_TYPE:typeof n.sourceEntityType!="undefined"?n.sourceEntityType+(e.type.isNotEmptyString(n.suffix)?"_"+n.suffix:""):"",LINK:typeof n.sourceEntityLink!="undefined"?n.sourceEntityLink:""});r=e.message("SONET_COMMENTAUX_JS_CREATETASK_BLOG_COMMENT").replace("#TASK_NAME#",s).replace("#COMMENT_LINK#",i)}}}else if(t=="fileversion"){var a=typeof n=="object"&&typeof n.isEnabledKeepVersion!="undefined"&&n.isEnabledKeepVersion?"SONET_COMMENTAUX_JS_FILEVERSION_TEXT":"SONET_COMMENTAUX_JS_HEAD_FILEVERSION_TEXT";var o=typeof n=="object"&&typeof n.userGender!="undefined"?n.userGender:"";r=e.message(a+(o.length>0?"_"+o:""))}return r};e.CommentAux.getShareList=function(e){var t="";var n=[];if(typeof e=="object"&&e.length>0){var r;for(r=0;r<e.length;r++){if(e.hasOwnProperty(r)){n.push(this.renderEntity(e[r]))}}t=n.join(", ")}return t};e.CommentAux.renderEntity=function(t){var n="";if(typeof t=="object"&&t.ENTITY_TYPE!="undefined"){switch(t.ENTITY_TYPE){case"U":n=e.RenderParts.getNodeU(t);break;case"UA":n=e.RenderParts.getNodeUA();break;case"SG":n=e.RenderParts.getNodeSG(t);break;case"DR":n=e.RenderParts.getNodeDR(t);break;case"task":n=e.RenderParts.getNodeTask(t);break;case"createTaskSourceComment":n=e.RenderParts.getNodeCreateTaskSourceComment(t);break;default:}var r=e.create("div",{children:[n]});n=r.innerHTML;e.cleanNode(r,true)}return n}})();