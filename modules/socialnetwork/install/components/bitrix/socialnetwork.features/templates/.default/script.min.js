(function(){if(!!BX.BXSF){return}BX.BXSF={iframe:false,errorBlock:null};BX.BXSF.init=function(e){if(typeof e!="undefined"){if(typeof e.iframe!="undefined"){this.iframe=!!e.iframe}if(BX.type.isNotEmptyString(e.errorBlockName)&&BX(e.errorBlockName)){this.errorBlock=BX(e.errorBlockName)}}BX.bind(BX("sonet_group_features_form_button_cancel"),"click",function(e){if(BX.SidePanel.Instance.getSliderByWindow(window)){BX.SidePanel.Instance.close()}else{var t=e.currentTarget.getAttribute("bx-url");if(BX.type.isNotEmptyString(t)){window.location=t}}e.preventDefault()});var t=BX.findChildren(BX("sonet-features-form"),{className:"sn-features-row"},true);if(t&&BX("sonet_group_features_form_button_submit")){BX.bind(BX("sonet_group_features_form_button_submit"),"click",BX.delegate(function(e){BX.BXSF.submitForm();e.preventDefault()},this))}var o=null;t=BX.findChildren(BX("sonet-features-form"),{className:"settings-right-enable-checkbox"},true);for(var r=0;r<t.length;r++){BX.bind(t[r],"click",BX.delegate(function(e){var t=e.currentTarget;o=t.getAttribute("bx-feature");if(BX.type.isNotEmptyString(o)){BX.BXSF.toggleInternalBlock(t.checked,o)}},this))}};BX.BXSF.toggleInternalBlock=function(e,t){var o=BX(t+"_body");if(o){BX.toggle(o)}var r=BX(t+"_block");if(r){BX.toggle(r)}o=BX(t+"_lbl");if(o){o.innerHTML=BX.message("sonetF_"+t+(e?"_on":"_off"))}};BX.BXSF.submitForm=function(){if(!BX("sonet-features-form")){return}BX.SocialnetworkUICommon.hideError(this.errorBlock);BX.SocialnetworkUICommon.showButtonWait(BX("sonet_group_features_form_button_submit"));var e=BX("sonet-features-form").getAttribute("action");if(document.forms["sonet-features-form"].elements.SONET_GROUP_ID&&parseInt(document.forms["sonet-features-form"].elements.SONET_GROUP_ID.value)>0){e=BX.util.add_url_param(e,{b24statAction:"featuresSonetGroup"})}BX.ajax.submitAjax(document.forms["sonet-features-form"],{url:e,method:"POST",dataType:"json",onsuccess:BX.delegate(function(e){BX.SocialnetworkUICommon.hideButtonWait(BX("sonet_group_features_form_button_submit"));if(!BX.type.isNotEmptyString(e.MESSAGE)){return}if(e.MESSAGE=="SUCCESS"&&BX.type.isNotEmptyString(e.URL)){if(this.iframe){BX.SidePanel.Instance.close()}top.location.href=e.URL}else if(e.MESSAGE=="ERROR"&&BX.type.isNotEmptyString(e.ERROR_MESSAGE)){BX.SocialnetworkUICommon.showError(e.ERROR_MESSAGE,this.errorBlock)}},this),onfailure:BX.delegate(function(e){BX.SocialnetworkUICommon.hideButtonWait(BX("sonet_group_features_form_button_submit"));BX.SocialnetworkUICommon.showError(BX.message("SONET_C4_T_ERROR"),this.errorBlock)},this)})}})();
//# sourceMappingURL=script.map.js