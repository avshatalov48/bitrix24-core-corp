(function(){if(!!window.__blogEditComment)return;window.checkForQuote=function(e,i,t,n){if(window.mplCheckForQuote)mplCheckForQuote(e,i,t,n)};window.__blogLinkEntity=function(e,i){if(!!window["UC"]&&!!window["UC"]["f"+i]){window["UC"]["f"+i].linkEntity(e);var t=window["UC"]["f"+i].eventNode;if(BX(t)&&!t.hasOwnProperty("__blogLinkEntity")){t["__blogLinkEntity"]=true;BX.addCustomEvent(t,"OnUCFormBeforeShow",function(i){var t=i&&i.id&&i.id[0]?i.id[0]:null;if(t&&e[t]){BX.show(BX("blg-comment-"+e[n][1]))}})}for(var n in e){if(e.hasOwnProperty(n)){var o=window["UC"][n].reply.bind(window["UC"][n]);BX.bind(BX("blog-post-addc-add-"+e[n][1]),"click",o);var r=BX("blg-post-"+e[n][1]);if(BX.DD&&!r.hasAttribute("dropzone")){var a=new BX.DD.dropFiles(r);a.replyHandler=o;a.dragEnterHandler=function(e){BX.removeCustomEvent(this,"dragEnter",this.dragEnterHandler);this.replyHandler(e)}.bind(a);BX.addCustomEvent(a,"dragEnter",a.dragEnterHandler);BX.addCustomEvent(a,"dragLeave",function(){BX.addCustomEvent(this,"dragEnter",this.dragEnterHandler)}.bind(a))}}}}};window.__blogEditComment=function(e,i){var t={messageBBCode:top["text"+e],messageFields:{arImages:top["arComFiles"+e],arDocs:top["arComDocs"+e],arFiles:top["arComFilesUf"+e],arDFiles:top["arComDFiles"+e],UrlPreview:top["UrlPreview"+e]}};BX.onCustomEvent(window,"OnUCAfterRecordEdit",["BLOG_"+i,e,t,"EDIT"])};window.__blogOnUCFormClear=function(e){LHEPostForm.reinitDataBefore(e.editorId)};window.__blogOnUCFormAfterShow=function(e,i,t){t=!!t?t:{};BX.onCustomEvent(window,"OnBeforeSocialnetworkCommentShowedUp",["socialnetwork_blog"]);var n={ENTITY_XML_ID:e.id[0],ENTITY_TYPE:e.entitiesId[e.id[0]][0],ENTITY_ID:e.entitiesId[e.id[0]][1],parentId:e.id[1],comment_post_id:e.entitiesId[e.id[0]][1],edit_id:e.id[1],act:e.id[1]>0?"edit":"add",logId:e.entitiesId[e.id[0]][2]};for(var o in n){if(!e.form[o])e.form.appendChild(BX.create("INPUT",{attrs:{name:o,type:"hidden"}}));e.form[o].value=n[o]}e.form.action=SBPC.actionUrl.replace(/#source_post_id#/,n["comment_post_id"]);var r=BX("captcha");if(!!r){BX.ajax.getCaptcha(function(e){BX("captcha_word").value="";BX("captcha_code").value=e["captcha_sid"];BX("captcha").src="/bitrix/tools/captcha.php?captcha_code="+e["captcha_sid"];BX("captcha").style.display=""})}onLightEditorShow(i,t)};window.__blogOnUCFormSubmit=function(e,i){i["decode"]="Y"};window.__blogOnUCAfterRecordAdd=function(e,i){if(i.errorMessage&&i.errorMessage.length>0){return}if(BX("blg-post-inform-"+e.substr(5))){var t=BX.findChild(BX("blg-post-inform-"+e.substr(5)),{tag:"span",className:"feed-inform-follow"},true);if(t){var n=t.getAttribute("data-follow")=="Y"?"Y":"N";if(n=="N"){BX.findChild(t,{tagName:"a"}).innerHTML=BX.message("sonetBPFollowY");t.setAttribute("data-follow","Y")}}}};window.onLightEditorShow=function(e,i){var t={};if(i["arFiles"]){var n={},o,r;for(var a=0;a<i["arFiles"].length;a++){o=BX.findChild(BX("wdif-doc-"+i["arFiles"][a]),{className:"feed-com-file-name"},true);r=BX.findChild(BX("wdif-doc-"+i["arFiles"][a]),{className:"feed-con-file-size"},true);n["F"+a]={FILE_ID:i["arFiles"][a],FILE_NAME:o?o.innerHTML:"noname",FILE_SIZE:r?r.innerHTML:"unknown",CONTENT_TYPE:"notimage/xyz"}}t["UF_BLOG_COMMENT_DOC"]={USER_TYPE_ID:"file",FIELD_NAME:"UF_BLOG_COMMENT_DOC[]",VALUE:n}}if(i["arDocs"])t["UF_BLOG_COMMENT_FILE"]={USER_TYPE_ID:"webdav_element",FIELD_NAME:"UF_BLOG_COMMENT_FILE[]",VALUE:BX.clone(i["arDocs"])};if(i["arDFiles"])t["UF_BLOG_COMMENT_FILE"]={USER_TYPE_ID:"disk_file",FIELD_NAME:"UF_BLOG_COMMENT_FILE[]",VALUE:BX.clone(i["arDFiles"])};if(i["UrlPreview"])t["UF_BLOG_COMMENT_URL_PRV"]={USER_TYPE_ID:"url_preview",FIELD_NAME:"UF_BLOG_COMMENT_URL_PRV",VALUE:BX.clone(i["UrlPreview"])};LHEPostForm.reinitData(SBPC.editorId,e,t);if(i["arImages"]){var d,l=LHEPostForm.getHandler(SBPC.editorId),s="";for(var m in i["arImages"]){if(i["arImages"].hasOwnProperty(m)){d={id:i["arImages"][m]["id"],element_id:i["arImages"][m]["id"],element_name:i["arImages"][m]["name"],element_size:0,element_content_type:i["arImages"][m]["type"],element_url:i["arImages"][m]["src"],element_thumbnail:i["arImages"][m]["thumbnail"],element_image:i["arImages"][m]["src"],parser:"postimage",storage:"bfile"};var _=l.checkFile(d.id,"common",d,true)}}}};BX.SocialnetworkBlogPostComment={};BX.SocialnetworkBlogPostComment.registerViewAreaList=function(e){if(typeof e=="undefined"||typeof e.containerId=="undefined"||typeof e.className=="undefined"){return}if(BX(e.containerId)){var i=BX.findChildren(BX(e.containerId),{tag:"div",className:e.className},true),t=null;for(var n=0,o=i.length;n<o;n++){if(i[n].id.length>0){t=null;if(BX.type.isNotEmptyString(e.fullContentClassName)){t=BX.findChild(i[n],{className:e.fullContentClassName})}BX.UserContentView.registerViewArea(i[n].id,t?t:null)}}}}})(window);
//# sourceMappingURL=script.map.js