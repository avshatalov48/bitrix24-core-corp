{"version":3,"file":"script.js","sources":["src/toolbar.js","src/actionmanager.js","src/manager.js"],"sourcesContent":["import {Type} from 'main.core';\nimport {Popup, MenuManager} from 'main.popup';\n\nexport default class Toolbar\n{\n\tconstructor(\n\t\tparams: {\n\t\t\tid: string,\n\t\t\tmenuButtonId: string,\n\t\t\tmenuItems: object,\n\t\t}\n\t)\n\t{\n\t\tthis.id = params.id;\n\t\tthis.menuItems = params.menuItems;\n\t\tthis.componentName = params.componentName;\n\n\t\tif (Type.isStringFilled(params.menuButtonId))\n\t\t{\n\t\t\tconst menuButton = document.getElementById(params.menuButtonId);\n\t\t\tif (menuButton)\n\t\t\t{\n\t\t\t\tmenuButton.addEventListener('click', (e) => {\n\t\t\t\t\tthis.menuButtonClick(e.currentTarget);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\tgetId()\n\t{\n\t\treturn this._id;\n\t}\n\n\tgetSetting(name, defaultval)\n\t{\n\t\treturn this._settings.getParam(name, defaultval);\n\t}\n\n\n\tmenuButtonClick(bindNode)\n\t{\n\t\tthis.openMenu(bindNode);\n\t}\n\n\topenMenu(bindNode)\n\t{\n\t\tif (this.menuOpened)\n\t\t{\n\t\t\tthis.closeMenu();\n\t\t\treturn;\n\t\t}\n\n\t\tif (!Type.isArray(this.menuItems))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst menuItems = [];\n\n\t\tthis.menuItems.forEach((item) =>\n\t\t{\n\t\t\tif (\n\t\t\t\t!Type.isUndefined(item.SEPARATOR)\n\t\t\t\t&& item.SEPARATOR\n\t\t\t)\n\t\t\t{\n\t\t\t\tmenuItems.push({\n\t\t\t\t\tSEPARATOR: true,\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!Type.isStringFilled(item.TYPE))\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tmenuItems.push({\n\t\t\t\ttext: (Type.isStringFilled(item.TITLE) ? item.TITLE : ''),\n\t\t\t\tonclick: (Type.isStringFilled(item.LINK) ? `window.location.href = \"${item.LINK}\"; return false;` : ''),\n\t\t\t});\n\t\t});\n\n\n\t\tthis.menuId = `${this.id.toLowerCase()}_menu`;\n\n\t\tPopup.show(\n\t\t\tthis.menuId,\n\t\t\tbindNode,\n\t\t\tmenuItems,\n\t\t\t{\n\t\t\t\tautoHide: true,\n\t\t\t\tcloseByEsc: true,\n\t\t\t\toffsetTop: 0,\n\t\t\t\toffsetLeft: 0,\n\t\t\t\tevents: {\n\t\t\t\t\tonPopupShow: this.onPopupShow.bind(this),\n\t\t\t\t\tonPopupClose: this.onPopupClose.bind(this),\n\t\t\t\t\tonPopupDestroy: this.onPopupDestroy.bind(this),\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t\tthis.menuPopup = MenuManager.currentItem;\n\t}\n\n\tcloseMenu()\n\t{\n\t\tif (\n\t\t\t!this.menuPopup\n\t\t\t|| !this.menuPopup.popupWindow\n\t\t)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.menuPopup.popupWindow.destroy();\n\t}\n\n\tonPopupShow()\n\t{\n\t\tthis.menuOpened = true;\n\t}\n\n\tonPopupClose()\n\t{\n\t\tthis.closeMenu();\n\t}\n\n\tonPopupDestroy()\n\t{\n\t\tthis.menuOpened = false;\n\t\tthis.menuPopup = null;\n\n\t\tif (!Type.isUndefined(MenuManager.Data[this.menuId]))\n\t\t{\n\t\t\tdelete(MenuManager.Data[this.menuId]);\n\t\t}\n\t}\n}\n","import {ajax, Type, Loc, Tag} from 'main.core';\nimport {PopupManager} from 'main.popup';\nimport {SendButton, CancelButton} from 'ui.buttons';\n\nimport Manager from './manager'\n\nexport default class ActionManager\n{\n\tconstructor(\n\t\tparams: {\n\t\t\tparent: Manager,\n\t\t}\n\t)\n\t{\n\t\tthis.parent = params.parent;\n\t\tthis.componentName = (Type.isStringFilled(this.parent.componentName) ? this.parent.componentName : '');\n\t\tthis.signedParameters = (Type.isStringFilled(this.parent.signedParameters) ? this.parent.signedParameters : '');\n\t\tthis.gridId = (Type.isStringFilled(this.parent.gridId) ? this.parent.gridId : '');\n\t\tthis.useSlider = (Type.isBoolean(this.parent.useSlider) ? this.parent.useSlider : false);\n\t}\n\n\tviewProfile(params)\n\t{\n\t\tconst userId = parseInt(!Type.isUndefined(params.userId) ? params.userId : 0);\n\t\tlet pathToUser = (Type.isStringFilled(params.pathToUser) ? params.pathToUser : '');\n\n\t\tif (\n\t\t\tuserId <= 0\n\t\t\t|| !Type.isStringFilled(pathToUser)\n\t\t)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tpathToUser = pathToUser.replace('#ID#', userId)\n\t\t\t.replace('#USER_ID#', userId)\n\t\t\t.replace('#user_id#', userId);\n\n\t\tif (this.useSlider)\n\t\t{\n\t\t\tBX.SidePanel.Instance.open(\n\t\t\t\tpathToUser,\n\t\t\t\t{\n\t\t\t\t\tcacheable: false,\n\t\t\t\t\tallowChangeHistory: true,\n\t\t\t\t\tcontentClassName: 'bitrix24-profile-slider-content',\n\t\t\t\t\tloader: 'intranet:profile',\n\t\t\t\t\twidth: 1100,\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t\telse\n\t\t{\n\t\t\twindow.location.href = pathToUser;\n\t\t}\n\t}\n\n\tact(\n\t\tparams: {\n\t\t\taction: string,\n\t\t\tuserId: number,\n\t\t}\n\t)\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\treturn ajax.runComponentAction(this.componentName, 'act', {\n\t\t\t\tmode: 'class',\n\t\t\t\tsignedParameters: this.signedParameters,\n\t\t\t\tdata: {\n\t\t\t\t\taction: params.action,\n\t\t\t\t\tfields: {\n\t\t\t\t\t\tuserId: params.userId,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t}).then((response) => {\n\t\t\t\tif (response.data.success)\n\t\t\t\t{\n\t\t\t\t\tthis.processActionSuccess(params);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.processActionFailure(params);\n\t\t\t\t}\n\t\t\t\tresolve(response);\n\t\t\t}, (response) => {\n\n\t\t\t\tif (response.errors)\n\t\t\t\t{\n\t\t\t\t\tthis.processActionFailure(params, response.errors[0].message);\n\t\t\t\t}\n\t\t\t\treject(response);\n\t\t\t});\n\t\t});\n\t}\n\n\tprocessActionSuccess(\n\t\tparams: {\n\t\t\taction: string,\n\t\t\tuserId: number,\n\t\t}\n\t)\n\t{\n\t\tlet eventCode = null;\n\n\t\tswitch (params.action)\n\t\t{\n\t\t\tcase 'exclude':\n\t\t\t\teventCode = 'afterUserExclude';\n\t\t\t\tbreak;\n\t\t\tcase 'setOwner':\n\t\t\t\teventCode = 'afterOwnerSet';\n\t\t\t\tbreak;\n\t\t\tcase 'setScrumMaster':\n\t\t\t\teventCode = 'afterSetScrumMaster';\n\t\t\t\tbreak;\n\t\t\tcase 'setModerator':\n\t\t\t\teventCode = 'afterModeratorAdd';\n\t\t\t\tbreak;\n\t\t\tcase 'removeModerator':\n\t\t\t\teventCode = 'afterModeratorRemove';\n\t\t\t\tbreak;\n\t\t\tcase 'acceptIncomingRequest':\n\t\t\tcase 'rejectIncomingRequest':\n\t\t\t\teventCode = 'afterRequestDelete';\n\t\t\t\tbreak;\n\t\t\tcase 'deleteOutgoingRequest':\n\t\t\t\teventCode = 'afterRequestOutDelete';\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t}\n\n\t\tif (\n\t\t\teventCode\n\t\t\t&& top.BX.SidePanel\n\t\t\t&& window !== top.window\n\t\t)\n\t\t{\n\t\t\ttop.BX.SidePanel.Instance.postMessageAll(window, 'sonetGroupEvent', {\n\t\t\t\tcode: eventCode,\n\t\t\t});\n\t\t}\n\n\t\tif (params.action === 'reinvite')\n\t\t{\n\t\t\tBX.UI.Notification.Center.notify({\n\t\t\t\tcontent: Loc.getMessage('SOCIALNETWORK_GROUP_USER_LIST_ACTION_REINVITE_SUCCESS'),\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.parent.reload();\n\t\t}\n\t}\n\n\tprocessActionFailure(\n\t\tparams: {\n\t\t\taction: string,\n\t\t\tuserId: number,\n\t\t\tevent: PointerEvent,\n\t\t},\n\t\terrorMessage: ?string\n\t)\n\t{\n\t\tif (!Type.isStringFilled(errorMessage))\n\t\t{\n\t\t\terrorMessage = Loc.getMessage('SOCIALNETWORK_GROUP_USER_LIST_ACTION_FAILURE');\n\t\t}\n\n\t\tBX.UI.Notification.Center.notify({\n\t\t\tcontent: errorMessage,\n\t\t});\n\t}\n\n\tdisconnectDepartment(params)\n\t{\n\t\tconst id = parseInt(!Type.isUndefined(params.id) ? params.id : 0);\n\n\t\tif (id <= 0)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tajax.runComponentAction(this.componentName, 'disconnectDepartment', {\n\t\t\tmode: 'class',\n\t\t\tsignedParameters: this.signedParameters,\n\t\t\tdata: {\n\t\t\t\tfields: {\n\t\t\t\t\tid: id,\n\t\t\t\t},\n\t\t\t},\n\t\t}).then((response) => {\n\t\t\tif (response.data.success)\n\t\t\t{\n\t\t\t\tif (\n\t\t\t\t\ttop.BX.SidePanel\n\t\t\t\t\t&& window !== top.window\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\ttop.BX.SidePanel.Instance.postMessageAll(window, 'sonetGroupEvent', {\n\t\t\t\t\t\tcode: 'afterDeptUnconnect',\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tthis.parent.reload();\n\t\t\t}\n\t\t});\n\t}\n\n\tgroupDelete()\n\t{\n\t\tconst buttons = [\n\t\t\tnew SendButton({\n\t\t\t\ttext: Loc.getMessage('SOCIALNETWORK_GROUP_USER_LIST_GROUP_ACTION_BUTTON_DELETE'),\n\t\t\t\tevents: {\n\t\t\t\t\tclick: () => {\n\t\t\t\t\t\tPopupManager.getCurrentPopup().destroy();\n\n\t\t\t\t\t\tconst gridInstance = BX.Main.gridManager.getInstanceById(this.gridId);\n\t\t\t\t\t\tif (!gridInstance)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst data = {\n\t\t\t\t\t\t\tID: gridInstance.getRows().getSelectedIds(),\n\t\t\t\t\t\t\tapply_filter: 'Y',\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tdata[gridInstance.getActionKey()] = 'delete';\n\t\t\t\t\t\tdata[gridInstance.getForAllKey()] = 'N';\n\n\t\t\t\t\t\tgridInstance.reloadTable('POST', data);\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t}),\n\t\t\tnew CancelButton({\n\t\t\t\tevents: {\n\t\t\t\t\tclick: () => {\n\t\t\t\t\t\tPopupManager.getCurrentPopup().destroy();\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t})\n\t\t];\n\n\t\tconst confirmPopup = PopupManager.create({\n\t\t\tid: 'bx-sgul-group-delete-confirm',\n\t\t\tautoHide: false,\n\t\t\tcloseByEsc: true,\n\t\t\tbuttons: buttons,\n\t\t\tevents: {\n\t\t\t\tonPopupClose: (popup) => {\n\t\t\t\t\tpopup.destroy();\n\t\t\t\t},\n\t\t\t},\n\t\t\tcontent: Tag.render`<div>${Loc.getMessage('SOCIALNETWORK_GROUP_USER_LIST_GROUP_ACTION_CONFIRM_TEXT')}</div>`,\n\t\t\tpadding: 20,\n\t\t});\n\n\t\tconfirmPopup.show();\n\t}\n}\n","import {Type} from 'main.core';\nimport {EventEmitter, BaseEvent} from 'main.core.events';\nimport Toolbar from './toolbar';\nimport ActionManager from './actionmanager';\n\nexport default class Manager\n{\n\tstatic repo = new Map();\n\n\tstatic getById(id)\n\t{\n\t\treturn Manager.repo.get(id);\n\t}\n\n\tconstructor(\n\t\tparams: {\n\t\t\tid: string,\n\t\t\tgridId: string,\n\t\t\tfilterId: string,\n\t\t\tdefaultFilterPresetId: string,\n\t\t\tdefaultCounter: string,\n\t\t\tgridContainerId: string,\n\t\t\tcomponentName: string,\n\t\t\tsignedParameters: string,\n\t\t\tuseSlider: boolean,\n\t\t\ttoolbar: {\n\t\t\t\tid: string,\n\t\t\t\tmenuButtonId: string,\n\t\t\t\tmenuItems: object,\n\t\t\t},\n\t\t\turls: {\n\t\t\t\tusers: string,\n\t\t\t\trequests: string,\n\t\t\t\trequestsOut: string,\n\t\t\t},\n\t\t}\n\t)\n\t{\n\t\tthis.id = params.id;\n\t\tthis.componentName = params.componentName;\n\t\tthis.signedParameters = params.signedParameters;\n\t\tthis.useSlider = params.useSlider;\n\t\tthis.gridId = params.gridId;\n\t\tthis.filterId = (Type.isStringFilled(params.filterId) ? params.filterId : null);\n\t\tthis.defaultFilterPresetId = (\n\t\t\tType.isStringFilled(params.defaultFilterPresetId)\n\t\t\t&& ![ 'requests_in', 'requests_out' ].includes(params.defaultFilterPresetId)\n\t\t\t\t? params.defaultFilterPresetId\n\t\t\t\t: 'tmp_filter'\n\t\t);\n\t\tthis.defaultCounter = (Type.isStringFilled(params.defaultCounter) ? params.defaultCounter : '');\n\t\tthis.gridContainer = (Type.isStringFilled(params.gridContainerId) ? document.getElementById(params.gridContainerId) : null);\n\t\tthis.urls = params.urls;\n\n\t\tparams.toolbar.componentName = this.componentName;\n\t\tthis.toolbarInstance = new Toolbar(params.toolbar);\n\t\tthis.actionManagerInstance = new ActionManager({\n\t\t\tparent: this,\n\t\t});\n\n\t\tManager.repo.set(this.id, this);\n\n\t\tthis.init();\n\t}\n\n\tinit()\n\t{\n\t\tthis.initEvents();\n\t}\n\n\tinitEvents()\n\t{\n\t\tif (this.gridContainer)\n\t\t{\n\t\t\tthis.gridContainer.addEventListener('click', this.processClickEvent.bind(this));\n\t\t}\n\n\t\tEventEmitter.subscribe('SidePanel.Slider:onMessage', (event: BaseEvent) => {\n\n\t\t\tconst [ sliderEvent ] = event.getCompatData();\n\n\t\t\tif (\n\t\t\t\tsliderEvent.getEventId() === 'sonetGroupEvent'\n\t\t\t\t&& !Type.isUndefined(sliderEvent.data)\n\t\t\t\t&& Type.isStringFilled(sliderEvent.data.code)\n\t\t\t\t&& sliderEvent.data.code === 'afterInvite'\n\t\t\t)\n\t\t\t{\n\t\t\t\tthis.reload();\n\t\t\t}\n\t\t});\n\n\t\tEventEmitter.subscribe('Socialnetwork.Toolbar:onItem', (event: BaseEvent) => {\n\t\t\tconst data = event.getData();\n\n\t\t\tif (data.counter)\n\t\t\t{\n\t\t\t\tif (\n\t\t\t\t\tdata.counter.filter\n\t\t\t\t\t&& data.counter.filterPresetId\n\t\t\t\t\t&& data.counter.filter.filterManager\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tconst filterApi = data.counter.filter.getFilter().getApi();\n\t\t\t\t\tconst filterManager = data.counter.filter.filterManager;\n\n\t\t\t\t\tfilterApi.setFilter({\n\t\t\t\t\t\tpreset_id: (\n\t\t\t\t\t\t\tfilterManager.getPreset().getCurrentPresetId() === data.counter.filterPresetId\n\t\t\t\t\t\t\t\t? this.defaultFilterPresetId\n\t\t\t\t\t\t\t\t: data.counter.filterPresetId\n\t\t\t\t\t\t),\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse if (Type.isStringFilled(data.counter.type))\n\t\t\t\t{\n\t\t\t\t\tlet url = '';\n\n\t\t\t\t\tif (data.counter.type === this.defaultCounter)\n\t\t\t\t\t{\n\t\t\t\t\t\turl = this.urls.users;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tswitch (data.counter.type)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcase 'workgroup_requests_in':\n\t\t\t\t\t\t\t\turl = this.urls.requests;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 'workgroup_requests_out':\n\t\t\t\t\t\t\t\turl = this.urls.requestsOut;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (Type.isStringFilled(url))\n\t\t\t\t\t{\n\t\t\t\t\t\twindow.location = url.replace('#group_id#', this.g);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tconst filterInstance = BX.Main.filterManager.getById(this.filterId);\n\t\tif (filterInstance)\n\t\t{\n\t\t\tconst filterEmitter = filterInstance.getEmitter();\n\t\t\tconst filterApi = filterInstance.getApi();\n\n\t\t\tfilterEmitter.subscribe('init', (event) => {\n\t\t\t\tconst { field } = event.getData();\n\t\t\t\tif (field.id === 'INITIATED_BY_TYPE')\n\t\t\t\t{\n\t\t\t\t\tfield.subscribe('change', () => {\n\n\t\t\t\t\t\tif (Type.isStringFilled(field.getValue()))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconst filterFieldsValues = filterInstance.getFilterFieldsValues();\n\n\t\t\t\t\t\t\tif (Type.isStringFilled(filterFieldsValues.INITIATED_BY_TYPE))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif (JSON.stringify(Object.values(filterFieldsValues.ROLE)) === JSON.stringify([ 'Z' ]))\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tfilterFieldsValues.ROLE = { 0: 'Z' };\n\t\t\t\t\t\t\t\tfilterApi.setFields(filterFieldsValues);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tEventEmitter.subscribe('BX.Grid.SettingsWindow:save', (event: BaseEvent) => {\n\t\t\t\tconst [ settingsWindow ] = event.getData();\n\t\t\t\tif (!settingsWindow || !settingsWindow.parent || settingsWindow.parent.getId() !== this.gridId)\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tfilterApi.setFilter({\n\t\t\t\t\tpreset_id: this.defaultFilterPresetId,\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}\n\n\treload()\n\t{\n\t\tconst gridInstance = BX.Main.gridManager.getInstanceById(this.gridId);\n\t\tif (!gridInstance)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tgridInstance.reloadTable('POST', {\n\t\t\tapply_filter: 'Y',\n\t\t});\n\t}\n\n\tprocessClickEvent(e)\n\t{\n\t\tconst targetNode = e.target;\n\n\t\tif (!targetNode.classList.contains('sonet-group-user-grid-action'))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst action = targetNode.getAttribute('data-bx-action');\n\n\t\tif (action === 'disconnectDepartment')\n\t\t{\n\t\t\tconst departmentId = Number(targetNode.getAttribute('data-bx-department'));\n\t\t\tif (departmentId > 0)\n\t\t\t{\n\t\t\t\tthis.getActionManager().disconnectDepartment({\n\t\t\t\t\tid: departmentId,\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\tlet userId = targetNode.getAttribute('data-bx-user-id');\n\n\t\tif (\n\t\t\t!Type.isStringFilled(action)\n\t\t\t|| !Type.isStringFilled(userId)\n\t\t)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tuserId = parseInt(userId);\n\t\tif (userId <= 0)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\ttargetNode.classList.add('--inactive');\n\n\t\tthis.actionManagerInstance.act({\n\t\t\taction: action,\n\t\t\tuserId: userId,\n\t\t}).then(() => {\n\t\t\ttargetNode.classList.remove('--inactive');\n\t\t}, () => {\n\t\t\ttargetNode.classList.remove('--inactive');\n\t\t});\n\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\t}\n\n\tgetActionManager()\n\t{\n\t\treturn this.actionManagerInstance;\n\t}\n\n}\n"],"names":["Toolbar","params","id","menuItems","componentName","Type","isStringFilled","menuButtonId","menuButton","document","getElementById","addEventListener","e","menuButtonClick","currentTarget","_id","name","defaultval","_settings","getParam","bindNode","openMenu","menuOpened","closeMenu","isArray","forEach","item","isUndefined","SEPARATOR","push","TYPE","text","TITLE","onclick","LINK","menuId","toLowerCase","Popup","show","autoHide","closeByEsc","offsetTop","offsetLeft","events","onPopupShow","bind","onPopupClose","onPopupDestroy","menuPopup","MenuManager","currentItem","popupWindow","destroy","Data","ActionManager","parent","signedParameters","gridId","useSlider","isBoolean","userId","parseInt","pathToUser","replace","BX","SidePanel","Instance","open","cacheable","allowChangeHistory","contentClassName","loader","width","window","location","href","Promise","resolve","reject","ajax","runComponentAction","mode","data","action","fields","then","response","success","processActionSuccess","processActionFailure","errors","message","eventCode","top","postMessageAll","code","UI","Notification","Center","notify","content","Loc","getMessage","reload","errorMessage","buttons","SendButton","click","PopupManager","getCurrentPopup","gridInstance","Main","gridManager","getInstanceById","ID","getRows","getSelectedIds","apply_filter","getActionKey","getForAllKey","reloadTable","CancelButton","confirmPopup","create","popup","Tag","render","padding","Manager","repo","get","filterId","defaultFilterPresetId","includes","defaultCounter","gridContainer","gridContainerId","urls","toolbar","toolbarInstance","actionManagerInstance","set","init","initEvents","processClickEvent","EventEmitter","subscribe","event","getCompatData","sliderEvent","getEventId","getData","counter","filter","filterPresetId","filterManager","filterApi","getFilter","getApi","setFilter","preset_id","getPreset","getCurrentPresetId","type","url","users","requests","requestsOut","g","filterInstance","getById","filterEmitter","getEmitter","field","getValue","filterFieldsValues","getFilterFieldsValues","INITIATED_BY_TYPE","JSON","stringify","Object","values","ROLE","setFields","settingsWindow","getId","targetNode","target","classList","contains","getAttribute","departmentId","Number","getActionManager","disconnectDepartment","add","act","remove","preventDefault","stopPropagation","Map"],"mappings":"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"}