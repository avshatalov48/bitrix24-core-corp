window["__logCommentsListRedefine"]=function(e,t,a,n){if(window["UC"]&&!!window["UC"][e]){BX.addCustomEvent(window["UC"][e],"OnUCListWasBuilt",function(t,a,s){if(BX(s)&&s.hasChildNodes){var i=s.firstChild,o;do{if(BX(i)&&i["getAttribute"]){o=i.getAttribute("id").replace("record-"+e+"-","").replace("-cover","");BX.onCustomEvent(window,"OnUCAddEntitiesCorrespondence",[e+"-"+o,[n,top["arLogCom"+n+o]]])}}while(i=i.nextSibling)}})}if(!!window.mplCheckForQuote)BX.bind(BX(t),"mouseup",function(t){mplCheckForQuote(t,this,e,a)})};window["__logBuildRating"]=function(e,t,a){var n="";a=!!a?a:Math.floor(Math.random()*1e5)+1;if(BX.message("sonetLShowRating")=="Y"&&!!e["RATING_TYPE_ID"]>0&&e["RATING_ENTITY_ID"]>0&&(BX.message("sonetLRatingType")=="like"&&!!window["RatingLike"]||BX.message("sonetLRatingType")=="standart_text"&&!!window["Rating"])){if(BX.message("sonetLRatingType")=="like"){var s=e["RATING_USER_VOTE_VALUE"]>0?" bx-you-like":"",i=e["RATING_USER_VOTE_VALUE"]>0?BX.message("sonetLTextLikeN"):BX.message("sonetLTextLikeY"),o=null;if(!!t["ALLOW_VOTE"]&&!!t["ALLOW_VOTE"]["RESULT"])o=BX.create("span",{props:{className:"bx-ilike-text"},html:i});n=BX.create("span",{attrs:{id:"sonet-rating-"+e["RATING_TYPE_ID"]+"-"+e["RATING_ENTITY_ID"]+"-"+a},props:{className:"sonet-log-comment-like rating_vote_text"},children:[BX.create("span",{props:{className:"ilike-light"},children:[BX.create("span",{props:{id:"bx-ilike-button-"+e["RATING_TYPE_ID"]+"-"+e["RATING_ENTITY_ID"]+"-"+a,className:"bx-ilike-button"},children:[BX.create("span",{props:{className:"bx-ilike-right-wrap"+s},children:[BX.create("span",{props:{className:"bx-ilike-right"},html:e["RATING_TOTAL_POSITIVE_VOTES"]})]}),BX.create("span",{props:{className:"bx-ilike-left-wrap"},children:[o]})]}),BX.create("span",{props:{id:"bx-ilike-popup-cont-"+e["RATING_TYPE_ID"]+"-"+e["RATING_ENTITY_ID"]+"-"+a,className:"bx-ilike-wrap-block"},style:{display:"none"},children:[BX.create("span",{props:{className:"bx-ilike-popup"},children:[BX.create("span",{props:{className:"bx-ilike-wait"}})]})]})]})]})}else if(BX.message("sonetLRatingType")=="standart_text"){n=BX.create("span",{attrs:{id:"sonet-rating-"+e["RATING_TYPE_ID"]+"-"+e["RATING_ENTITY_ID"]+"-"+a},props:{className:"sonet-log-comment-like rating_vote_text"},children:[BX.create("span",{props:{className:"bx-rating"+(!t["ALLOW_VOTE"]["RESULT"]?" bx-rating-disabled":"")+(e["RATING_USER_VOTE_VALUE"]!=0?" bx-rating-active":""),id:"bx-rating-"+e["RATING_TYPE_ID"]+"-"+e["RATING_ENTITY_ID"]+"-"+a,title:!t["ALLOW_VOTE"]["RESULT"]?t["ERROR_MSG"]:""},children:[BX.create("span",{props:{className:"bx-rating-absolute"},children:[BX.create("span",{props:{className:"bx-rating-question"},html:!t["ALLOW_VOTE"]["RESULT"]?BX.message("sonetLTextDenied"):BX.message("sonetLTextAvailable")}),BX.create("span",{props:{className:"bx-rating-yes "+(e["RATING_USER_VOTE_VALUE"]>0?"  bx-rating-yes-active":""),title:e["RATING_USER_VOTE_VALUE"]>0?BX.message("sonetLTextCancel"):BX.message("sonetLTextPlus")},children:[BX.create("a",{props:{className:"bx-rating-yes-count",href:"#like"},html:""+parseInt(e["RATING_TOTAL_POSITIVE_VOTES"])}),BX.create("a",{props:{className:"bx-rating-yes-text",href:"#like"},html:BX.message("sonetLTextRatingY")})]}),BX.create("span",{props:{className:"bx-rating-separator"},html:"/"}),BX.create("span",{props:{className:"bx-rating-no "+(e["RATING_USER_VOTE_VALUE"]<0?"  bx-rating-no-active":""),title:e["RATING_USER_VOTE_VALUE"]<0?BX.message("sonetLTextCancel"):BX.message("sonetLTextMinus")},children:[BX.create("a",{props:{className:"bx-rating-no-count",href:"#dislike"},html:""+parseInt(e["RATING_TOTAL_NEGATIVE_VOTES"])}),BX.create("a",{props:{className:"bx-rating-no-text",href:"#dislike"},html:BX.message("sonetLTextRatingN")})]})]})]}),BX.create("span",{props:{id:"bx-rating-popup-cont-"+e["RATING_TYPE_ID"]+"-"+e["RATING_ENTITY_ID"]+"-"+a+"-plus"},style:{display:"none"},children:[BX.create("span",{props:{className:"bx-ilike-popup  bx-rating-popup"},children:[BX.create("span",{props:{className:"bx-ilike-wait"}})]})]}),BX.create("span",{props:{id:"bx-rating-popup-cont-"+e["RATING_TYPE_ID"]+"-"+e["RATING_ENTITY_ID"]+"-"+a+"-minus"},style:{display:"none"},children:[BX.create("span",{props:{className:"bx-ilike-popup  bx-rating-popup"},children:[BX.create("span",{props:{className:"bx-ilike-wait"}})]})]})]})}}if(!!n){n=BX.create("span",{children:[n]});n=n.innerHTML+'<script>window["#OBJ#"].Set("#ID#", "#RATING_TYPE_ID#", #RATING_ENTITY_ID#, "#ALLOW_VOTE#", BX.message("sonetLCurrentUserID"), #TEMPLATE#, "light", BX.message("sonetLPathToUser"));<\/script>'.replace("#OBJ#",BX.message("sonetLRatingType")=="like"?"RatingLike":"Rating").replace("#ID#",e["RATING_TYPE_ID"]+"-"+e["RATING_ENTITY_ID"]+"-"+a).replace("#RATING_TYPE_ID#",e["RATING_TYPE_ID"]).replace("#RATING_ENTITY_ID#",e["RATING_ENTITY_ID"]).replace("#ALLOW_VOTE#",!!t["ALLOW_VOTE"]&&!!t["ALLOW_VOTE"]["RESULT"]?"Y":"N").replace("#TEMPLATE#",BX.message("sonetLRatingType")=="like"?'{LIKE_Y:BX.message("sonetLTextLikeN"),LIKE_N:BX.message("sonetLTextLikeY"),LIKE_D:BX.message("sonetLTextLikeD")}':'{PLUS:BX.message("sonetLTextPlus"),MINUS:BX.message("sonetLTextMinus"),CANCEL:BX.message("sonetLTextCancel")}')}return n};window["__logShowCommentForm"]=function(e){if(!!window["UC"][e])window["UC"][e].reply()};function __logShowHiddenDestination(e,t,a){BX.ajax.runAction("socialnetwork.api.livefeed.logentry.getHiddenDestinations",{data:{params:{logId:e,createdById:t,pathToUser:BX.message("sonetLPathToUser"),pathToWorkgroup:BX.message("sonetLPathToGroup"),pathToDepartment:BX.message("sonetLPathToDepartment"),nameTemplate:BX.message("sonetLNameTemplate"),showLogin:BX.message("sonetLShowLogin")}}}).then(function(e){var t=e.data.destinationList;if(!BX.type.isNotEmptyObject(t)){return}if(BX(a)){var n=a.parentNode;n.removeChild(a);var s="";for(var i in t){if(!t.hasOwnProperty(i)){continue}if(BX.type.isNotEmptyString(t[i]["TITLE"])){n.appendChild(BX.create("SPAN",{html:", "}));if(BX.type.isNotEmptyString(t[i]["CRM_PREFIX"])){n.appendChild(BX.create("SPAN",{props:{className:"feed-add-post-destination-prefix"},html:t[i]["CRM_PREFIX"]+":&nbsp;"}))}if(BX.type.isNotEmptyString(t[i]["URL"])){n.appendChild(BX.create("A",{props:{className:"feed-add-post-destination-new"+(BX.type.isNotEmptyString(t[i]["IS_EXTRANET"])&&t[i]["IS_EXTRANET"]=="Y"?" feed-post-user-name-extranet":""),href:t[i]["URL"]},html:t[i]["TITLE"]}))}else{n.appendChild(BX.create("SPAN",{props:{className:"feed-add-post-destination-new"+(BX.type.isNotEmptyString(t[i]["IS_EXTRANET"])&&t[i]["IS_EXTRANET"]=="Y"?" feed-post-user-name-extranet":"")},html:t[i]["TITLE"]}))}}}if(typeof e.data["hiddenDestinationsCount"]!="undefined"&&parseInt(e.data["hiddenDestinationsCount"])>0){e.data["hiddenDestinationsCount"]=parseInt(e.data["hiddenDestinationsCount"]);var o=e.data["hiddenDestinationsCount"]%100>10&&e.data["hiddenDestinationsCount"]%100<20?5:e.data["hiddenDestinationsCount"]%10;n.appendChild(BX.create("SPAN",{html:"&nbsp;"+BX.message("sonetLDestinationHidden"+o).replace("#COUNT#",e.data["hiddenDestinationsCount"])}))}}},function(e){})}function __logSetFollow(e){var t=BX("log_entry_follow_"+e).getAttribute("data-follow")=="Y"?"Y":"N",a=t=="Y"?"N":"Y",n=BX("log_entry_follow_"+e);if(n){BX.findChild(n,{tagName:"a"}).innerHTML=BX.message("sonetLFollow"+a);n.setAttribute("data-follow",a)}BX.ajax.runAction("socialnetwork.api.livefeed.changeFollow",{data:{logId:e,value:a},analyticsLabel:{b24statAction:a=="Y"?"setFollow":"setUnfollow"}}).then(function(e){if(!e.data.success&&n){BX.findChild(n,{tagName:"a"}).innerHTML=BX.message("sonetLFollow"+t);n.setAttribute("data-follow",t)}},function(e){if(n){BX.findChild(n,{tagName:"a"}).innerHTML=BX.message("sonetLFollow"+t);n.setAttribute("data-follow",t)}});return false}function __logRefreshEntry(e){var t=e.node!==undefined?BX(e.node):false;var a=e.logId!==undefined?parseInt(e.logId):0;if(!t||a<=0||BX.message("sonetLEPath")===undefined){return}BX.ajax({url:BX.message("sonetLEPath").replace("#log_id#",a),method:"POST",dataType:"json",data:{log_id:a,action:"get_entry"},onsuccess:function(e){if(e["ENTRY_HTML"]!==undefined){BX.cleanNode(t);t.innerHTML=e["ENTRY_HTML"];var a=BX.processHTML(t.innerHTML,true);var n=a.SCRIPT;BX.ajax.processScripts(n,true)}},onfailure:function(e){}});return false}window.__logEditComment=function(e,t,a){BX.ajax.runAction("socialnetwork.api.livefeed.comment.getsource",{data:{params:{postId:a,commentId:t}}}).then(function(t){var n=t.data;var s={messageBBCode:n.message,messageFields:{arFiles:BX.type.isNotEmptyObject(n.UF.UF_SONET_COM_FILE)?n.UF.UF_SONET_COM_FILE.VALUE:[]}};if(BX.type.isNotEmptyObject(n.UF.UF_SONET_COM_DOC)&&BX.type.isNotEmptyString(n.UF.UF_SONET_COM_DOC.USER_TYPE_ID)){if(n.UF.UF_SONET_COM_DOC.USER_TYPE_ID=="webdav_element"){s.messageFields.arDocs=n.UF.UF_SONET_COM_DOC.VALUE}else if(n.UF.UF_SONET_COM_DOC.USER_TYPE_ID=="disk_file"){s.messageFields.arDFiles=n.UF.UF_SONET_COM_DOC.VALUE}}window.UC[window.SLEC.formKey].entitiesCorrespondence[e+"-"+n.sourceId]=[a,n.id];BX.onCustomEvent(window,"OnUCAfterRecordEdit",[e,n.sourceId,s,"EDIT"])},function(){})};(function(){BX.SocialnetworkLogEntry={};BX.SocialnetworkLogEntry.registerViewAreaList=function(e){if(typeof e=="undefined"||typeof e.containerId=="undefined"||typeof e.className=="undefined"){return}if(BX(e.containerId)){var t=BX.findChildren(BX(e.containerId),{tag:"div",className:e.className},true),a=null;for(var n=0,s=t.length;n<s;n++){if(t[n].id.length>0){a=null;if(BX.type.isNotEmptyString(e.fullContentClassName)){a=BX.findChild(t[n],{className:e.fullContentClassName})}BX.UserContentView.registerViewArea(t[n].id,a?a:null)}}}}})();
//# sourceMappingURL=scripts.map.js