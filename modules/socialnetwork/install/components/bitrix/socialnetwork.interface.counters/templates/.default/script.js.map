{"version":3,"file":"script.js","sources":["src/counters-helper.js","src/counters-item.js","src/entry.js"],"sourcesContent":["import {EventEmitter} from 'main.core.events';\n\nclass Filter\n{\n\tconstructor(options)\n\t{\n\t\tthis.filterId = options.filterId;\n\t\tthis.filterManager = BX.Main.filterManager.getById(this.filterId);\n\n\t\tthis.bindEvents();\n\t\tsetTimeout(this.updateFields.bind(this), 100);\n\t}\n\n\tbindEvents()\n\t{\n\t\tEventEmitter.subscribe('BX.Main.Filter:apply', this.onFilterApply.bind(this));\n\t}\n\n\tonFilterApply()\n\t{\n\t\tthis.updateFields();\n\t}\n\n\tupdateFields()\n\t{\n\t\tconst filterManager = this.getFilter();\n\t\tif (!filterManager)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.presetId = filterManager.getPreset().getCurrentPresetId();\n\t}\n\n\tisFilteredByPresetId(presetId)\n\t{\n\t\treturn (presetId === this.presetId);\n\t}\n\n\tgetFilter()\n\t{\n\t\treturn this.filterManager;\n\t}\n}\n\nexport {\n\tFilter\n}","import { Tag, Event, Type } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\n\nexport default class CountersItem\n{\n\tconstructor(options)\n\t{\n\t\tthis.count = options.count;\n\t\tthis.name = options.name;\n\t\tthis.type = options.type;\n\t\tthis.color = options.color;\n\t\tthis.filterPresetId = options.filterPresetId;\n\t\tthis.filter = options.filter;\n\t\tthis.activeByDefault = !!options.activeByDefault;\n\n\t\tthis.$container = null;\n\t\tthis.$remove = null;\n\t\tthis.$counter = null;\n\n\t\tthis.bindEvents();\n\t}\n\n\tbindEvents()\n\t{\n\t\tEventEmitter.subscribe('BX.Socialnetwork.Interface.Counters:active', (param) => {\n\t\t\tthis !== param.data ? this.unActive() : null;\n\t\t});\n\t}\n\n\tgetCounter()\n\t{\n\t\tif (!this.$counter)\n\t\t{\n\t\t\tconst count = this.count > 99 ? '99+' : this.count;\n\t\t\tthis.$counter = Tag.render`\n\t\t\t\t<div class=\"sonet-counters--item-num ${this.getCounterColor()}\">\n\t\t\t\t\t<div class=\"sonet-counters--item-num-text --stop --without-animate\">${count}</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\n\t\treturn this.$counter;\n\t}\n\n\tgetCounterColor()\n\t{\n\t\tif (!this.color)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\treturn `--${this.color}`;\n\t}\n\n\tanimateCounter(start, value)\n\t{\n\t\tif (start > 99 && value > 99)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tvalue > 99\n\t\t\t? value = 99\n\t\t\t: null;\n\n\t\tif (start > 99)\n\t\t{\n\t\t\tstart = 99;\n\t\t}\n\n\t\tlet duration = start - value;\n\t\tif (duration < 0)\n\t\t{\n\t\t\tduration = duration * -1;\n\t\t}\n\n\t\tthis.$counter.innerHTML = '';\n\t\tthis.getCounter().classList.remove('--update');\n\t\tthis.getCounter().classList.remove('--update-multi');\n\n\t\tif (duration > 5)\n\t\t{\n\t\t\tsetTimeout(()=> {\n\t\t\t\tthis.getCounter().style.animationDuration = (duration * 50) + 'ms';\n\t\t\t\tthis.getCounter().classList.add('--update-multi');\n\t\t\t});\n\t\t}\n\t\tconst timer = setInterval(()=> {\n\t\t\tvalue < start\n\t\t\t\t? start--\n\t\t\t\t: start++;\n\n\t\t\tconst node = Tag.render`\n\t\t\t\t<div class=\"sonet-counters--item-num-text ${value < start ? '--decrement' : ''}\">${start}</div>\n\t\t\t`;\n\n\t\t\tif (start === value)\n\t\t\t{\n\t\t\t\tnode.classList.add('--stop');\n\n\t\t\t\tif (duration < 5)\n\t\t\t\t{\n\t\t\t\t\tthis.getCounter().classList.add('--update');\n\t\t\t\t}\n\n\t\t\t\tclearInterval(timer);\n\t\t\t\tstart === 0 ? this.fade() : this.unFade();\n\t\t\t}\n\n\t\t\tif (start !== value)\n\t\t\t{\n\t\t\t\tEvent.bind(node, 'animationend', ()=> {\n\t\t\t\t\tnode.parentNode.removeChild(node);\n\t\t\t\t});\n\t\t\t}\n\t\t\tthis.$counter.appendChild(node);\n\t\t}, 50);\n\t}\n\n\tupdateCount(param: number)\n\t{\n\t\tif (this.count === param)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.animateCounter(this.count, param);\n\n\t\tthis.count = param;\n\t}\n\n\tgetRemove()\n\t{\n\t\tif (!this.$remove)\n\t\t{\n\t\t\tthis.$remove = Tag.render`\n\t\t\t\t<div class=\"sonet-counters--item-remove\"></div>\n\t\t\t`;\n\t\t}\n\n\t\treturn this.$remove;\n\t}\n\n\tfade()\n\t{\n\t\tthis.getContainer().classList.add('--fade');\n\t}\n\n\tunFade()\n\t{\n\t\tthis.getContainer().classList.remove('--fade');\n\t}\n\n\tactive(node: HTMLElement)\n\t{\n\t\tconst targetNode = Type.isDomNode(node) ? node : this.getContainer();\n\t\ttargetNode.classList.add('--hover');\n\t\tEventEmitter.emit('BX.Socialnetwork.Interface.Counters:active', this);\n\t}\n\n\tunActive(node: HTMLElement)\n\t{\n\t\tconst targetNode = Type.isDomNode(node) ? node : this.getContainer();\n\t\ttargetNode.classList.remove('--hover');\n\t\tEventEmitter.emit('BX.Socialnetwork.Interface.Counters:unActive', this);\n\t}\n\n\tadjustClick()\n\t{\n\t\tEventEmitter.emit('Socialnetwork.Toolbar:onItem', {\n\t\t\tcounter: this,\n\t\t});\n\n\t\tthis.$container.classList.contains('--hover')\n\t\t\t? this.unActive()\n\t\t\t: this.active()\n\t\t;\n\t}\n\n\tgetContainer(): HTMLElement\n\t{\n\t\tif (!this.$container)\n\t\t{\n\t\t\tthis.$container = Tag.render`\n\t\t\t\t<div class=\"sonet-counters--item ${Number(this.count) === 0 ? ' --fade' : ''}\">\n\t\t\t\t\t<div class=\"sonet-counters--item-wrapper\">\n\t\t\t\t\t\t${this.getCounter()}\n\t\t\t\t\t\t<div class=\"sonet-counters--item-title\">${this.name}</div>\n\t\t\t\t\t\t${this.getRemove()}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\n\t\t\tif (\n\t\t\t\tthis.filter.isFilteredByPresetId(this.filterPresetId)\n\t\t\t\t|| this.activeByDefault\n\t\t\t)\n\t\t\t{\n\t\t\t\tthis.active(this.$container);\n\t\t\t}\n\n\t\t\tEvent.bind(this.$container, 'click', this.adjustClick.bind(this));\n\t\t}\n\n\t\treturn this.$container;\n\t}\n}","import {Dom, Tag} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\nimport {PULL as Pull} from 'pull.client';\n\nimport {Filter} from './counters-helper';\nimport CountersItem from './counters-item';\n\nimport './style.css'\n\nexport class Counters\n{\n\tstatic get counterTypes()\n\t{\n\t\treturn {\n\t\t\tworkgroup_detail: [\n\t\t\t\t'workgroup_requests_in',\n\t\t\t\t'workgroup_requests_out',\n\t\t\t],\n\t\t};\n\t}\n\n\tstatic updateTimeout = false;\n\tstatic needUpdate = false;\n\n\tstatic timeoutTTL = 5000;\n\n\tconstructor(options)\n\t{\n\t\tthis.userId = options.userId;\n\t\tthis.targetUserId = options.targetUserId;\n\t\tthis.entityType = options.entityType || '';\n\t\tthis.entityId = parseInt(options.entityId || 0);\n\t\tthis.role = options.role;\n\t\tthis.entityTitle = options.entityTitle || '';\n\t\tthis.counters = options.counters;\n\t\tthis.initialCounterTypes = options.counterTypes;\n\t\tthis.renderTo = options.renderTo;\n\n\t\tthis.signedParameters = options.signedParameters;\n\t\tthis.initialCounter = options.initialCounter || '';\n\n\t\tthis.$other = {\n\t\t\tcropped: null,\n\t\t\tlayout: null\n\t\t};\n\t\tthis.$entityHead = null;\n\n\t\tthis.filter = new Filter({\n\t\t\tfilterId: options.filterId,\n\t\t});\n\n\t\tthis.bindEvents();\n\t\tthis.setData(this.counters);\n\n\t\tthis.initPull();\n\t}\n\n\tisWorkgroupList()\n\t{\n\t\treturn false;\n\t}\n\n\tinitPull()\n\t{\n\t\tPull.subscribe({\n\t\t\tmoduleId: 'socialnetwork',\n\t\t\tcallback: data => this.processPullEvent(data),\n\t\t});\n\n\t}\n\n\textendWatch()\n\t{\n\t\tif (this.isWorkgroupList())\n\t\t{\n\t\t\tlet tagId = 'WORKGROUP_LIST';\n\n\t\t\tBX.PULL.extendWatch(tagId, true);\n\t\t\tsetTimeout(() => this.extendWatch(), 29 * 60 * 1000);\n\t\t}\n\t}\n\n\tprocessPullEvent(data)\n\t{\n\t\tconst eventHandlers = {\n\t\t\tuser_counter: this.onUserCounter.bind(this),\n\t\t};\n\t\tconst has = Object.prototype.hasOwnProperty;\n\t\tconst {command, params} = data;\n\t\tif (has.call(eventHandlers, command))\n\t\t{\n\t\t\tconst method = eventHandlers[command];\n\t\t\tif (method)\n\t\t\t{\n\t\t\t\tmethod.apply(this, [params]);\n\t\t\t}\n\t\t}\n\t}\n\n\tbindEvents()\n\t{\n\t\tEventEmitter.subscribe('BX.Main.Filter:apply', this.onFilterApply.bind(this));\n\t}\n\n\tonFilterApply()\n\t{\n\t\tthis.filter.updateFields();\n\n\t\tObject.values(this.counterItems).forEach((counter) => {\n\t\t\tif (counter)\n\t\t\t{\n\t\t\t\tthis.filter.isFilteredByPresetId(counter.filterPresetId)\n\t\t\t\t\t? counter.active()\n\t\t\t\t\t: counter.unActive()\n\t\t\t\t;\n\t\t\t}\n\t\t});\n\t}\n\n\tonUserCounter(data)\n\t{\n\t\tconst has = Object.prototype.hasOwnProperty;\n\n\t\tif (this.entityType === 'workgroup_detail')\n\t\t{\n\t\t\tif (\n\t\t\t\t!has.call(data, 'workgroupId')\n\t\t\t\t|| !has.call(data, 'values')\n\t\t\t\t|| this.entityId !== parseInt(data.workgroupId)\n\t\t\t\t|| this.userId !== Number(data.userId)\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tObject.entries(data.values).forEach(([type, value]) => {\n\t\t\t\tif (this.counterItems[type])\n\t\t\t\t{\n\t\t\t\t\tthis.counterItems[type].updateCount(value);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tgetCounterItem(param: Object): Object\n\t{\n\t\treturn new CountersItem({\n\t\t\tcount: param.count,\n\t\t\tname: param.name,\n\t\t\ttype: param.type,\n\t\t\tcolor: param.color,\n\t\t\tfilterPresetId: param.filterPresetId,\n\t\t\tactiveByDefault: (param.type === this.initialCounter),\n\t\t\tfilter: this.filter,\n\t\t});\n\t}\n\n\tsetData(counters)\n\t{\n\t\tthis.counterItems = {};\n\n\t\tconst availableTypes = [\n\t\t\t...Counters.counterTypes.workgroup_detail,\n\t\t];\n\n\t\tObject.entries(counters).forEach(([type, data]) => {\n\t\t\tif (!availableTypes.includes(type))\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.counterItems[type] = this.getCounterItem({\n\t\t\t\ttype,\n\t\t\t\tname: data.TITLE,\n\t\t\t\tcount: Number(data.VALUE),\n\t\t\t\tcolor: data.STYLE,\n\t\t\t\tfilterPresetId: data.FILTER_PRESET_ID,\n\t\t\t});\n\t\t});\n\t}\n\n\tisCroppedBlock(node: HTMLElement)\n\t{\n\t\tif (node)\n\t\t{\n\t\t\treturn node.classList.contains('--cropp');\n\t\t}\n\t}\n\n\tgetContainer()\n\t{\n\t\tconst content = [];\n\t\tObject.values(this.counterItems).forEach(counter => content.push(counter.getContainer()));\n\n\t\tthis.$entityHead = Tag.render`\n\t\t\t<div class=\"sonet-counters--group-head\">\n\t\t\t\t${this.entityTitle}\n\t\t\t</div>\n\t\t`;\n\n\t\tthis.$element = Tag.render`\n\t\t\t<div class=\"sonet-counters sonet-counters--scope\">\n\t\t\t\t<div class=\"sonet-counters--group\">\n\t\t\t\t\t${this.$entityHead}\n\t\t\t\t\t<div class=\"sonet-counters--group-content\">${content}</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\treturn this.$element;\n\t}\n\n\trender()\n\t{\n\t\tconst node = this.getContainer();\n\t\tconst fakeNode = node.cloneNode(true);\n\t\tfakeNode.classList.add('sonet-counters');\n\t\tfakeNode.style.position = 'fixed';\n\t\tfakeNode.style.opacity = '0';\n\t\tfakeNode.style.width = 'auto';\n\t\tfakeNode.style.pointerEvents = 'none';\n\t\tdocument.body.appendChild(fakeNode);\n\t\tthis.nodeWidth = fakeNode.offsetWidth;\n\t\tdocument.body.removeChild(fakeNode);\n\n\t\tDom.replace(this.renderTo.firstChild, node);\n\t}\n}"],"names":["Filter","options","filterId","filterManager","BX","Main","getById","bindEvents","setTimeout","updateFields","bind","EventEmitter","subscribe","onFilterApply","getFilter","presetId","getPreset","getCurrentPresetId","CountersItem","count","name","type","color","filterPresetId","filter","activeByDefault","$container","$remove","$counter","param","data","unActive","Tag","render","getCounterColor","start","value","duration","innerHTML","getCounter","classList","remove","style","animationDuration","add","timer","setInterval","node","clearInterval","fade","unFade","Event","parentNode","removeChild","appendChild","animateCounter","getContainer","targetNode","Type","isDomNode","emit","counter","contains","active","Number","getRemove","isFilteredByPresetId","adjustClick","Counters","workgroup_detail","userId","targetUserId","entityType","entityId","parseInt","role","entityTitle","counters","initialCounterTypes","counterTypes","renderTo","signedParameters","initialCounter","$other","cropped","layout","$entityHead","setData","initPull","Pull","moduleId","callback","processPullEvent","isWorkgroupList","tagId","PULL","extendWatch","eventHandlers","user_counter","onUserCounter","has","Object","prototype","hasOwnProperty","command","params","call","method","apply","values","counterItems","forEach","workgroupId","entries","updateCount","availableTypes","includes","getCounterItem","TITLE","VALUE","STYLE","FILTER_PRESET_ID","content","push","$element","fakeNode","cloneNode","position","opacity","width","pointerEvents","document","body","nodeWidth","offsetWidth","Dom","replace","firstChild"],"mappings":"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"}