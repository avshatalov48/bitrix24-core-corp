{"version":3,"file":"script.js","sources":["src/pull-requests.js","src/menu-ajax.js","src/user-selector/create-chat-footer.js","src/user-selector/user-selector.js","src/chat.js","src/invite.js","src/logo.js","src/menu-router.js","src/settings-elements/chat-action.js","src/settings-elements/follow.js","src/settings-elements/group-privacy.js","src/settings-elements/info.js","src/settings-elements/members.js","src/settings-elements/pin.js","src/settings-elements/roles.js","src/group-settings.js","src/user-settings.js","src/settings.js","src/video-call.js","src/menu.js"],"sourcesContent":["import { EventEmitter } from 'main.core.events';\n\nexport class PullRequests extends EventEmitter\n{\n\t#groupId: number;\n\n\tconstructor(groupId: number)\n\t{\n\t\tsuper();\n\n\t\tthis.setEventNamespace('BX.Socialnetwork.Spaces.Menu.PullRequests');\n\n\t\tthis.#groupId = parseInt(groupId, 10);\n\t}\n\n\tgetModuleId(): string\n\t{\n\t\treturn 'socialnetwork';\n\t}\n\n\tgetMap(): Object\n\t{\n\t\treturn {\n\t\t\tworkgroup_user_add: this.#update.bind(this),\n\t\t\tworkgroup_user_delete: this.#update.bind(this),\n\t\t\tworkgroup_user_update: this.#update.bind(this),\n\t\t};\n\t}\n\n\t#update(data): void\n\t{\n\t\tif (parseInt(data.params.GROUP_ID, 10) === this.#groupId)\n\t\t{\n\t\t\tthis.emit('update');\n\t\t}\n\t}\n}\n","export class MenuAjax\n{\n\tstatic getGroupData(groupId: number): Promise\n\t{\n\t\treturn BX.ajax.runAction('socialnetwork.api.workgroup.get', {\n\t\t\t\tdata: {\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tselect: [\n\t\t\t\t\t\t\t'ACTIONS',\n\t\t\t\t\t\t\t'NUMBER_OF_MEMBERS',\n\t\t\t\t\t\t\t'LIST_OF_MEMBERS',\n\t\t\t\t\t\t\t'GROUP_MEMBERS_LIST',\n\t\t\t\t\t\t\t'PRIVACY_TYPE',\n\t\t\t\t\t\t\t'PIN',\n\t\t\t\t\t\t\t'USER_DATA',\n\t\t\t\t\t\t\t'COUNTERS',\n\t\t\t\t\t\t],\n\t\t\t\t\t\tgroupId,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t})\n\t\t\t.then((response) => {\n\t\t\t\treturn {\n\t\t\t\t\tname: response.data.NAME,\n\t\t\t\t\tisPin: response.data.IS_PIN,\n\t\t\t\t\tprivacyCode: response.data.PRIVACY_CODE,\n\t\t\t\t\tisSubscribed: response.data.USER_DATA?.IS_SUBSCRIBED,\n\t\t\t\t\tnumberOfMembers: response.data.NUMBER_OF_MEMBERS,\n\t\t\t\t\tlistOfMembers: response.data.LIST_OF_MEMBERS,\n\t\t\t\t\tgroupMembersList: response.data.GROUP_MEMBERS_LIST,\n\t\t\t\t\tactions: {\n\t\t\t\t\t\tcanEdit: response.data.ACTIONS?.EDIT,\n\t\t\t\t\t\tcanInvite: response.data.ACTIONS?.INVITE,\n\t\t\t\t\t},\n\t\t\t\t\tcounters: response.data.COUNTERS,\n\t\t\t\t};\n\t\t\t})\n\t\t\t.catch((error) => console.log(error));\n\t}\n\n\tstatic inviteUsers(spaceId: number, users: number[]): Promise\n\t{\n\t\treturn BX.ajax.runAction('socialnetwork.api.workgroup.updateInvitedUsers', {\n\t\t\tdata: {\n\t\t\t\tspaceId,\n\t\t\t\tusers: [0, ...users],\n\t\t\t},\n\t\t});\n\t}\n}\n","import { Tag, Loc, Runtime } from 'main.core';\nimport { DefaultFooter } from 'ui.entity-selector';\nimport type { Dialog } from 'ui.entity-selector';\nimport { Button, ButtonColor, ButtonSize } from 'ui.buttons';\n\nexport default class CreateChatFooter extends DefaultFooter\n{\n\t#buttons: {\n\t\tcreateChatButton: Button,\n\t\tcancelButton: Button,\n\t};\n\n\tconstructor(dialog: Dialog, options: { [option: string]: any })\n\t{\n\t\tsuper(dialog, options);\n\n\t\tthis.#buttons = {\n\t\t\tcreateChatButton: null,\n\t\t\tcancelButton: null,\n\t\t};\n\n\t\tthis.handleDialogDestroy = this.handleDialogDestroy.bind(this);\n\t\tthis.handleSelectedItemsUpdated = this.handleSelectedItemsUpdated.bind(this);\n\n\t\tthis.bindEvents();\n\t}\n\n\tgetContent(): HTMLElement\n\t{\n\t\tthis.options.containerClass = 'sn-ui-selector-footer-create-chat';\n\n\t\treturn Tag.render`\n\t\t\t<div>\n\t\t\t\t${this.renderCreateChatButton()}\n\t\t\t\t${this.renderCancelButton()}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\trenderCreateChatButton(): HTMLElement\n\t{\n\t\tthis.#buttons.createChatButton = new Button({\n\t\t\ttext: Loc.getMessage('SOCNET_ENTITY_SELECTOR_CREATE'),\n\t\t\tround: true,\n\t\t\tcolor: ButtonColor.PRIMARY,\n\t\t\tsize: ButtonSize.SMALL,\n\t\t\tevents: {\n\t\t\t\tclick: this.createChatButtonClickHandler.bind(this),\n\t\t\t},\n\t\t});\n\n\t\tthis.#buttons.createChatButton.setDisabled(true);\n\n\t\treturn this.#buttons.createChatButton.getContainer();\n\t}\n\n\tcreateChatButtonClickHandler(): void\n\t{\n\t\tconst userIds = this.getDialog().getSelectedItems().map((item) => item.getId());\n\n\t\tthis.#buttons.createChatButton.setWaiting(true);\n\t\tthis.createChatAction(userIds).then(async (response) => {\n\t\t\tconst chatId = 'chat' + response.data;\n\n\t\t\tconst { Messenger } = await Runtime.loadExtension('im.public.iframe');\n\t\t\tMessenger.openChat(chatId);\n\n\t\t\tthis.#buttons.createChatButton.setWaiting(false);\n\t\t\tthis.getDialog().deselectAll();\n\t\t\tthis.getDialog().hide();\n\t\t});\n\t}\n\n\tcreateChatAction(userIds): Promise\n\t{\n\t\treturn BX.ajax.runAction('socialnetwork.api.chat.create', {\n\t\t\tdata: {\n\t\t\t\tuserIds,\n\t\t\t},\n\t\t});\n\t}\n\n\trenderCancelButton(): HTMLElement\n\t{\n\t\tthis.#buttons.cancelButton = new Button({\n\t\t\ttext: Loc.getMessage('SOCNET_ENTITY_SELECTOR_CANCEL'),\n\t\t\tround: true,\n\t\t\tcolor: ButtonColor.LIGHT_BORDER,\n\t\t\tsize: ButtonSize.SMALL,\n\t\t\tevents: {\n\t\t\t\tclick: this.cancelButtonClickHandler.bind(this),\n\t\t\t},\n\t\t});\n\n\t\treturn this.#buttons.cancelButton.getContainer();\n\t}\n\n\tcancelButtonClickHandler(): void\n\t{\n\t\tthis.getDialog().hide();\n\t}\n\n\tbindEvents(): void\n\t{\n\t\tthis.getDialog().subscribe('onDestroy', this.handleDialogDestroy);\n\t\tthis.getDialog().subscribe('Item:onSelect', this.handleSelectedItemsUpdated);\n\t\tthis.getDialog().subscribe('Item:onDeselect', this.handleSelectedItemsUpdated);\n\t}\n\n\tunbindEvents(): void\n\t{\n\t\tthis.getDialog().unsubscribe('onDestroy', this.handleDialogDestroy);\n\t\tthis.getDialog().unsubscribe('Item:onSelect', this.handleSelectedItemsUpdated);\n\t\tthis.getDialog().unsubscribe('Item:onDeselect', this.handleSelectedItemsUpdated);\n\t}\n\n\thandleSelectedItemsUpdated(): void\n\t{\n\t\tif (!this.#buttons.createChatButton)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.#buttons.createChatButton.setDisabled(this.getDialog().getSelectedItems().length === 0);\n\t}\n\n\thandleDialogDestroy(): void\n\t{\n\t\tthis.unbindEvents();\n\t}\n}","import { Loc, Tag, Dom } from 'main.core';\nimport { Dialog, BaseHeader } from 'ui.entity-selector';\nimport { EventEmitter } from 'main.core.events';\nimport CreateChatFooter from './create-chat-footer';\n\nexport class UserSelector extends EventEmitter\n{\n\t#bindElement: HTMLElement;\n\t#title: string;\n\t#preselectedItems: any[];\n\t#onClose: function;\n\t#onLoad: function;\n\t#groupId: number;\n\t#createChat: boolean;\n\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\n\t\tthis.setEventNamespace('SocialNetwork.Spaces.UserSelector');\n\n\t\tthis.#bindElement = options.bindElement;\n\n\t\tthis.#title = options.title;\n\n\t\tthis.#preselectedItems = options.preselectedItems ?? [];\n\n\t\tthis.#onClose = options.onClose ?? (() => {});\n\t\tthis.#onLoad = options.onLoad ?? (() => {});\n\n\t\tthis.#groupId = options.groupId ?? 0;\n\t\tthis.#createChat = options.createChat ?? false;\n\t}\n\n\tgetDialog()\n\t{\n\t\tif (!this.dialog)\n\t\t{\n\t\t\tconst title = this.#title;\n\n\t\t\tclass UserSelectorDialogHeader extends BaseHeader\n\t\t\t{\n\t\t\t\trender(): HTMLElement\n\t\t\t\t{\n\t\t\t\t\treturn Tag.render`\n\t\t\t\t\t\t<div class=\"sn-spaces__entity-dialog-header\">${title}</div>\n\t\t\t\t\t`;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.dialog = new Dialog({\n\t\t\t\ttargetNode: this.#bindElement,\n\t\t\t\twidth: 400,\n\t\t\t\tdropdownMode: true,\n\t\t\t\theader: UserSelectorDialogHeader,\n\t\t\t\tenableSearch: true,\n\t\t\t\tcontext: 'socialnetwork.spaces',\n\t\t\t\tpreselectedItems: this.#preselectedItems,\n\t\t\t\tentities: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'user',\n\t\t\t\t\t\tsubstituteEntityId: this.#createChat ? 'project-user' : null,\n\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\tfooterInviteIntranetOnly: true,\n\t\t\t\t\t\t\tshowInvitationFooter: !this.#createChat,\n\t\t\t\t\t\t\tprojectId: this.#groupId,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\tsearchTabOptions: this.#createChat && {\n\t\t\t\t\tstubOptions: {\n\t\t\t\t\t\ttitle: Loc.getMessage('SN_SPACES_USER_SELECTOR_SEARCH_TAB_EMPTY_TITLE'),\n\t\t\t\t\t\tsubtitle: Loc.getMessage('SN_SPACES_USER_SELECTOR_SEARCH_TAB_EMPTY_TEXT'),\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tevents: {\n\t\t\t\t\tonHide: this.#onClose,\n\t\t\t\t\tonLoad: this.#onLoad,\n\t\t\t\t\t'SearchTab:onLoad': this.#onLoad,\n\t\t\t\t},\n\t\t\t});\n\n\t\t\tif (this.#createChat)\n\t\t\t{\n\t\t\t\tthis.dialog.setFooter(CreateChatFooter);\n\t\t\t}\n\n\t\t\tthis.#bindSliderEvents();\n\t\t}\n\n\t\treturn this.dialog;\n\t}\n\n\treload()\n\t{\n\t\tthis.dialog.loadState = 'UNSENT';\n\t\tthis.dialog.load();\n\t}\n\n\t#bindSliderEvents()\n\t{\n\t\tEventEmitter.subscribe('SidePanel.Slider:onOpenStart', (event) => {\n\t\t\tconst slider = event.target;\n\n\t\t\tif (this.#getImBar())\n\t\t\t{\n\t\t\t\tDom.style(this.#getImBar(), 'zIndex', slider.getZindex());\n\t\t\t}\n\t\t});\n\n\t\tEventEmitter.subscribe('SidePanel.Slider:onBeforeCloseComplete', (event) => {\n\t\t\tconst slider = event.target;\n\n\t\t\tif (this.#isInviteSlider(slider) && this.#getImBar())\n\t\t\t{\n\t\t\t\tDom.style(this.#getImBar(), 'zIndex', '');\n\t\t\t}\n\t\t});\n\t}\n\n\t#isInviteSlider(slider)\n\t{\n\t\treturn slider.options.data?.entitySelectorId === this.dialog.getId();\n\t}\n\n\t#getImBar()\n\t{\n\t\treturn document.getElementById('bx-im-bar');\n\t}\n}\n","import { ajax, Loc } from 'main.core';\nimport { Messenger } from 'im.public';\nimport { UserSelector } from './user-selector/user-selector';\n\ntype Params = {\n\tentityType: 'group' | 'user',\n\tentityId: number,\n\tgroupMembersList: any,\n}\n\nexport class Chat\n{\n\t#entityType: 'group' | 'user';\n\t#entityId: number;\n\t#groupMembersList: any;\n\n\tconstructor(params: Params)\n\t{\n\t\tthis.#entityType = params.entityType;\n\t\tthis.#entityId = params.entityId;\n\t\tthis.#groupMembersList = params.groupMembersList;\n\t}\n\n\tstartVideoCall()\n\t{\n\t\t// eslint-disable-next-line promise/catch-or-return\n\t\tajax.runAction('intranet.controlbutton.getVideoCallChat', {\n\t\t\tdata: {\n\t\t\t\tentityType: this.#entityType === 'group' ? 'workgroup' : 'user',\n\t\t\t\tentityId: this.#entityId,\n\t\t\t},\n\t\t\tanalyticsLabel: {\n\t\t\t\tentity: this.#entityType,\n\t\t\t},\n\t\t}).then((response) => {\n\t\t\tif (response.data)\n\t\t\t{\n\t\t\t\tMessenger.startVideoCall(`chat${response.data}`, true);\n\t\t\t}\n\n\t\t\tthis.chatLockCounter = 0;\n\t\t}, (response) => {\n\t\t\tif (\n\t\t\t\tresponse.errors[0].code === 'lock_error'\n\t\t\t\t&& this.chatLockCounter < 4\n\t\t\t)\n\t\t\t{\n\t\t\t\tthis.chatLockCounter++;\n\t\t\t\tthis.startVideoCall();\n\t\t\t}\n\t\t});\n\t}\n\n\topenChat()\n\t{\n\t\t// eslint-disable-next-line promise/catch-or-return\n\t\tajax.runAction('intranet.controlbutton.getChat', {\n\t\t\tdata: {\n\t\t\t\tentityType: this.#entityType === 'group' ? 'workgroup' : 'user',\n\t\t\t\tentityId: this.#entityId,\n\t\t\t},\n\t\t\tanalyticsLabel: {\n\t\t\t\tentity: this.#entityType,\n\t\t\t},\n\t\t}).then((response) => {\n\t\t\tif (response.data)\n\t\t\t{\n\t\t\t\tMessenger.openChat(`chat${parseInt(response.data, 10)}`);\n\t\t\t}\n\n\t\t\tthis.chatLockCounter = 0;\n\t\t}, (response) => {\n\t\t\tif (response.errors[0].code === 'lock_error' && this.chatLockCounter < 4)\n\t\t\t{\n\t\t\t\tthis.chatLockCounter++;\n\t\t\t\tthis.openChat();\n\t\t\t}\n\t\t});\n\t}\n\n\tcreateChat(node)\n\t{\n\t\tthis.getDialog(node).show();\n\t}\n\n\tgetDialog(node)\n\t{\n\t\tif (!this.userSelector)\n\t\t{\n\t\t\tthis.userSelector = new UserSelector({\n\t\t\t\tbindElement: node,\n\t\t\t\tcreateChat: true,\n\t\t\t\ttitle: Loc.getMessage('SN_SPACES_CREATE_CHAT'),\n\t\t\t\tonLoad: this.#updateMemberNodes.bind(this),\n\t\t\t\tgroupId: this.#entityId,\n\t\t\t});\n\t\t}\n\n\t\treturn this.userSelector.getDialog();\n\t}\n\n\tupdate(groupDataPromise)\n\t{\n\t\tgroupDataPromise.then((response) => {\n\t\t\tthis.#groupMembersList = response.groupMembersList;\n\n\t\t\tthis.userSelector?.reload();\n\t\t});\n\t}\n\n\t#updateMemberNodes()\n\t{\n\t\tconst membersIds = this.#groupMembersList\n\t\t\t.filter((user) => user.isMember)\n\t\t\t.map((item) => parseInt(item.id))\n\t\t;\n\n\t\tthis.getDialog().getItems().forEach((item) => {\n\t\t\tconst isHidden = !membersIds.includes(item.getId());\n\t\t\titem.setHidden(isHidden);\n\n\t\t\tif (isHidden && item.isSelected())\n\t\t\t{\n\t\t\t\titem.deselect();\n\t\t\t}\n\t\t});\n\t}\n}\n","import { Loc } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { UserSelector } from './user-selector/user-selector';\n\nexport class Invite extends EventEmitter\n{\n\t#node: HTMLElement;\n\t#invitedUsers: number[];\n\t#cannotInvite: number[];\n\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\n\t\tthis.setEventNamespace('SocialNetwork.Spaces.Invite');\n\n\t\tthis.#node = options.node;\n\t\tthis.#invitedUsers = this.#prepareInvited(options.groupMembersList);\n\t\tthis.#cannotInvite = this.#prepareCannotInvite(options.groupMembersList);\n\t}\n\n\tshow(): void\n\t{\n\t\tthis.getDialog().show();\n\t}\n\n\tclose(): void\n\t{\n\t\tthis.getDialog().hide();\n\t}\n\n\t#onClose()\n\t{\n\t\tconst users = [...this.dialog.getSelectedItems()].map((item) => item.id);\n\t\tif (!this.#arraysAreEqual(users, this.#invitedUsers))\n\t\t{\n\t\t\tthis.#invitedUsers = users;\n\t\t\tthis.emit('usersSelected', this.#invitedUsers);\n\t\t}\n\t\tthis.emit('onClose');\n\t}\n\n\t#arraysAreEqual(arr1, arr2)\n\t{\n\t\treturn [...arr1].sort().toString() === [...arr2].sort().toString();\n\t}\n\n\tisShown(): boolean\n\t{\n\t\tthis.getDialogPopup().isShown();\n\t}\n\n\tgetDialogPopup()\n\t{\n\t\treturn this.getDialog().getPopup();\n\t}\n\n\tgetDialog()\n\t{\n\t\tif (!this.dialog)\n\t\t{\n\t\t\tconst userSelector = new UserSelector({\n\t\t\t\tbindElement: this.#node,\n\t\t\t\ttitle: Loc.getMessage('SN_SPACES_MENU_SPACE_INVITE_MEMBERS'),\n\t\t\t\tpreselectedItems: this.#prepareItems(),\n\t\t\t\tonClose: this.#onClose.bind(this),\n\t\t\t\tonLoad: this.#updateCannotInviteNodes.bind(this),\n\t\t\t});\n\n\t\t\tthis.dialog = userSelector.getDialog();\n\n\t\t\tthis.dialog.getPopup().setAngle({\n\t\t\t\tposition: 'top',\n\t\t\t\toffset: this.#node.offsetWidth + parseInt(getComputedStyle(this.#node).marginLeft),\n\t\t\t});\n\t\t}\n\n\t\treturn this.dialog;\n\t}\n\n\tupdate(groupDataPromise)\n\t{\n\t\tgroupDataPromise.then((response) => {\n\t\t\tthis.#invitedUsers = this.#prepareInvited(response.groupMembersList);\n\t\t\tthis.#cannotInvite = this.#prepareCannotInvite(response.groupMembersList);\n\n\t\t\tthis.#updateCannotInviteNodes();\n\t\t});\n\t}\n\n\t#updateCannotInviteNodes()\n\t{\n\t\tthis.dialog?.getItems().forEach((item) => {\n\t\t\tconst isNotInInvited = !this.#invitedUsers.includes(item.getId());\n\t\t\tconst isHidden = this.#cannotInvite.includes(item.getId());\n\t\t\titem.setHidden(isHidden);\n\n\t\t\tif ((isHidden || isNotInInvited) && item.isSelected())\n\t\t\t{\n\t\t\t\titem.deselect();\n\t\t\t}\n\t\t});\n\t}\n\n\t#prepareInvited(users): number[]\n\t{\n\t\treturn users\n\t\t\t.filter((user) => user.invited)\n\t\t\t.map((user) => parseInt(user.id));\n\t}\n\n\t#prepareCannotInvite(users): number[]\n\t{\n\t\treturn users\n\t\t\t.filter((user) => !user.invited)\n\t\t\t.map((user) => parseInt(user.id));\n\t}\n\n\t#prepareItems()\n\t{\n\t\treturn this.#invitedUsers.map((userId) => ['user', parseInt(userId)]);\n\t}\n}","import { Tag } from 'main.core';\n\nexport type LogoData = {\n\ttype: string,\n\tid: string,\n}\n\nexport class Logo\n{\n\t#logo: LogoData;\n\n\tconstructor(logo: LogoData)\n\t{\n\t\tthis.#logo = logo;\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tconst iconClass = this.#getIconClass();\n\t\tconst iconStyle = this.#getIconStyle();\n\n\t\treturn Tag.render`<i class=\"${iconClass}\" style=\"${iconStyle}\"></i>`;\n\t}\n\n\tgetClass(): string\n\t{\n\t\tlet result = '';\n\n\t\tif (this.#logo.type === 'icon')\n\t\t{\n\t\t\tif (this.#logo.id.length > 0)\n\t\t\t{\n\t\t\t\tresult = `sonet-common-workgroup-avatar --${this.#logo.id}`;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresult = 'ui-icon-common-user-group ui-icon';\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t#getIconStyle(): string\n\t{\n\t\tlet result = '';\n\t\tif (this.#logo.type === 'image')\n\t\t{\n\t\t\tresult = `background-image: url(${this.#logo.id}); background-size: cover`;\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t#getIconClass(): string\n\t{\n\t\treturn this.#logo.type === 'image' ? 'sn-spaces__list-item_img' : '';\n\t}\n}","import { Uri } from 'main.core';\n\ntype Params = {\n\tpathToFeatures?: string,\n\tpathToUsers?: string,\n\tpathToInvite?: string,\n}\n\nexport class MenuRouter\n{\n\t#pathToFeatures: string;\n\t#pathToUsers: string;\n\t#pathToInvite: string;\n\n\t#sidePanelManager: BX.SidePanel.Manager;\n\n\tconstructor(params: Params)\n\t{\n\t\tthis.#sidePanelManager = BX.SidePanel.Instance;\n\n\t\tthis.#pathToFeatures = params.pathToFeatures;\n\t\tthis.#pathToUsers = params.pathToUsers;\n\t\tthis.#pathToInvite = params.pathToInvite;\n\t}\n\n\topenGroupFeatures()\n\t{\n\t\tthis.#sidePanelManager.open(this.#pathToFeatures, {\n\t\t\twidth: 800,\n\t\t\tloader: 'group-features-loader',\n\t\t});\n\t}\n\n\topenGroupUsers(mode: 'all' | 'in' | 'out')\n\t{\n\t\tconst availableModes = {\n\t\t\tall: 'members',\n\t\t\tin: 'requests_in',\n\t\t\tout: 'requests_out',\n\t\t};\n\n\t\tconst uri = new Uri(this.#pathToUsers);\n\t\turi.setQueryParams({\n\t\t\tmode: availableModes[mode],\n\t\t});\n\n\t\tthis.#sidePanelManager.open(uri.toString(), {\n\t\t\twidth: 1200,\n\t\t\tcacheable: false,\n\t\t\tloader: 'group-users-loader',\n\t\t});\n\t}\n\n\topenGroupInvite()\n\t{\n\t\tthis.#sidePanelManager.open(this.#pathToInvite, {\n\t\t\twidth: 950,\n\t\t\tloader: 'group-invite-loader',\n\t\t});\n\t}\n}\n","import { Event, Loc, Tag } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\n\nexport class ChatAction extends EventEmitter\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\n\t\tthis.setEventNamespace('BX.Socialnetwork.Spaces.Settings.ChatAction');\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tconst videoCallId = 'spaces-settings-video-call';\n\t\tconst openChatId = 'spaces-settings-open-chat';\n\t\tconst createChatId = 'spaces-settings-create-chat';\n\n\t\tconst node = Tag.render`\n\t\t\t<div class=\"sn-spaces__popup-communication\">\n\t\t\t\t<div\n\t\t\t\t\tdata-id=\"${videoCallId}\"\n\t\t\t\t\tclass=\"sn-spaces__popup-communication-item\"\n\t\t\t\t>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"ui-icon-set --video-1\"\n\t\t\t\t\t\tstyle=\"--ui-icon-set__icon-size: 26px;\"\n\t\t\t\t\t></div>\n\t\t\t\t\t<div class=\"sn-spaces__popup-communication-item_text\">\n\t\t\t\t\t\t${Loc.getMessage('SN_SPACES_MENU_CHAT_VIDEO_CALL_HD')}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tdata-id=\"${openChatId}\"\n\t\t\t\t\tclass=\"sn-spaces__popup-communication-item\"\n\t\t\t\t>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"ui-icon-set --chat-1\"\n\t\t\t\t\t\tstyle=\"--ui-icon-set__icon-size: 26px;\"\n\t\t\t\t\t></div>\n\t\t\t\t\t<div class=\"sn-spaces__popup-communication-item_text\">\n\t\t\t\t\t\t${Loc.getMessage('SN_SPACES_MENU_CHAT_OPEN')}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tdata-id=\"${createChatId}\"\n\t\t\t\t\tclass=\"sn-spaces__popup-communication-item\"\n\t\t\t\t>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"ui-icon-set --add-chat\"\n\t\t\t\t\t\tstyle=\"--ui-icon-set__icon-size: 26px;\"\n\t\t\t\t\t></div>\n\t\t\t\t\t<div class=\"sn-spaces__popup-communication-item_text\">\n\t\t\t\t\t\t${Loc.getMessage('SN_SPACES_MENU_CHAT_CREATE')}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\tEvent.bind(\n\t\t\tnode.querySelector(`[data-id='${videoCallId}']`),\n\t\t\t'click',\n\t\t\t() => this.emit('videoCall'),\n\t\t);\n\n\t\tEvent.bind(\n\t\t\tnode.querySelector(`[data-id='${openChatId}']`),\n\t\t\t'click',\n\t\t\t() => this.emit('openChat'),\n\t\t);\n\n\t\tEvent.bind(\n\t\t\tnode.querySelector(`[data-id='${createChatId}']`),\n\t\t\t'click',\n\t\t\t() => this.emit('createChat'),\n\t\t);\n\n\t\treturn node;\n\t}\n}\n","import { Dom, Event, Loc, Tag } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\n\ntype Params = {\n\tfollow: boolean,\n}\n\nexport class Follow extends EventEmitter\n{\n\t#follow: boolean;\n\t#disabled: boolean;\n\t#node: HTMLElement;\n\n\tconstructor(params: Params)\n\t{\n\t\tsuper();\n\n\t\tthis.setEventNamespace('BX.Socialnetwork.Spaces.Settings.Follow');\n\n\t\tthis.#follow = params.follow;\n\t\tthis.#disabled = false;\n\n\t\tthis.#bindEvents();\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tconst followId = 'spaces-settings-follow';\n\n\t\tconst iconClass = this.#follow ? '--sound-on' : '--sound-off';\n\n\t\tthis.#node = Tag.render`\n\t\t\t<div\n\t\t\t\tdata-id=\"${followId}\"\n\t\t\t\tclass=\"sn-spaces__popup-item --mini\"\n\t\t\t>\n\t\t\t\t<div class=\"sn-spaces__popup-icon-round\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"ui-icon-set ${iconClass}\"\n\t\t\t\t\t\tstyle=\"--ui-icon-set__icon-size: 22px;\"\n\t\t\t\t\t></div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"sn-spaces__popup-icon-round-name\">\n\t\t\t\t\t${this.#getLabel(this.#follow)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\tEvent.bind(this.#node, 'click', this.#toggle.bind(this));\n\n\t\treturn this.#node;\n\t}\n\n\tunDisable()\n\t{\n\t\tthis.#disabled = false;\n\t}\n\n\t#toggle()\n\t{\n\t\tif (this.#disabled)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.#disabled = true;\n\n\t\tthis.#follow = !this.#follow;\n\n\t\tthis.emit('update', this.#follow);\n\n\t\tthis.#changeIcon(this.#follow);\n\n\t\tthis.#changeLabel(this.#follow);\n\t}\n\n\t#changeIcon(follow: boolean)\n\t{\n\t\tconst iconNode = this.#node.querySelector('.ui-icon-set');\n\t\tif (follow)\n\t\t{\n\t\t\tDom.removeClass(iconNode, '--sound-off');\n\t\t\tDom.addClass(iconNode, '--sound-on');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.removeClass(iconNode, '--sound-on');\n\t\t\tDom.addClass(iconNode, '--sound-off');\n\t\t}\n\t}\n\n\t#changeLabel(follow: boolean)\n\t{\n\t\tconst nameNode = this.#node.querySelector('.sn-spaces__popup-icon-round-name');\n\t\tnameNode.textContent = this.#getLabel(follow);\n\t}\n\n\t#getLabel(follow: boolean): string\n\t{\n\t\treturn follow\n\t\t\t? Loc.getMessage('SN_SPACES_MENU_FOLLOW_N')\n\t\t\t: Loc.getMessage('SN_SPACES_MENU_FOLLOW_Y')\n\t\t;\n\t}\n\n\t#bindEvents(): void\n\t{\n\t\tEventEmitter.subscribe('followChanged', function(event) {\n\t\t\tthis.#follow = event.data.isFollowed;\n\t\t\tthis.#changeLabel(this.#follow);\n\t\t\tthis.#changeIcon(this.#follow);\n\t\t}.bind(this));\n\t}\n}","import { Dom, Event, Loc, Tag } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { Popup } from 'main.popup';\n\ntype Params = {\n\tbindElement: HTMLElement,\n\tprivacyCode: 'open' | 'closed' | 'secret',\n}\n\nexport class GroupPrivacy extends EventEmitter\n{\n\t#popup: Popup;\n\t#contentNode: HTMLElement;\n\t#privacyCode: string;\n\n\tconstructor(params: Params)\n\t{\n\t\tsuper();\n\n\t\tthis.setEventNamespace('BX.Socialnetwork.Spaces.Settings.Group.Privacy');\n\n\t\tthis.#privacyCode = params.privacyCode;\n\n\t\tthis.#createPopup(params.bindElement);\n\t}\n\n\tshow()\n\t{\n\t\tif (this.#popup.isShown())\n\t\t{\n\t\t\tthis.#popup.close();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.#popup.show();\n\t\t}\n\t}\n\n\t#createPopup(bindElement: HTMLElement)\n\t{\n\t\tthis.#popup = new Popup(\n\t\t\t{\n\t\t\t\tid: 'sn-post-form',\n\t\t\t\tbindElement: bindElement,\n\t\t\t\tcontent: this.#renderContent(this.#privacyCode),\n\t\t\t\tautoHide: true,\n\t\t\t\tangle: false,\n\t\t\t\twidth: 343,\n\t\t\t\tcloseIcon: false,\n\t\t\t\tcloseByEsc: true,\n\t\t\t\toverlay: true,\n\t\t\t\tpadding: 12,\n\t\t\t\tanimation: 'fading-slide',\n\t\t\t},\n\t\t);\n\n\t\tthis.#popup.subscribe('onShow', () => this.emit('onShow'));\n\t\tthis.#popup.subscribe('onAfterClose', () => this.emit('onAfterClose'));\n\t}\n\n\t#renderContent(privacyCode: 'open' | 'closed' | 'secret'): HTMLElement\n\t{\n\t\tconst openActiveClass = privacyCode === 'open' ? '--active' : '';\n\t\tconst closedActiveClass = privacyCode === 'closed' ? '--active' : '';\n\t\tconst secretActiveClass = privacyCode === 'secret' ? '--active' : '';\n\n\t\tconst openId = 'spaces-group-privacy-open';\n\t\tconst closedId = 'spaces-group-privacy-closed';\n\t\tconst secretId = 'spaces-group-privacy-secret';\n\n\t\tthis.#contentNode = Tag.render`\n\t\t\t<div class=\"sn-spaces__popup-menu\">\n\t\t\t\t<div data-id=\"${openId}\" class=\"sn-spaces__popup-menu_item ${openActiveClass}\">\n\t\t\t\t\t<div class=\"sn-spaces__popup-menu_item-icon --open-spaces\"></div>\n\t\t\t\t\t<div class=\"sn-spaces__popup-menu_item-info\">\n\t\t\t\t\t\t<div class=\"sn-spaces__popup-menu_item-name\">\n\t\t\t\t\t\t\t${Loc.getMessage('SN_SPACES_MENU_INFO_VS_OPEN')}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"sn-spaces__popup-menu_item-description\">\n\t\t\t\t\t\t\t${Loc.getMessage('SN_SPACES_MENU_INFO_VS_OPEN_DESC')}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div data-id=\"${closedId}\" class=\"sn-spaces__popup-menu_item ${closedActiveClass}\">\n\t\t\t\t\t<div class=\"sn-spaces__popup-menu_item-icon --closed-spaces\"></div>\n\t\t\t\t\t<div class=\"sn-spaces__popup-menu_item-info\">\n\t\t\t\t\t\t<div class=\"sn-spaces__popup-menu_item-name\">\n\t\t\t\t\t\t\t${Loc.getMessage('SN_SPACES_MENU_INFO_VS_CLOSED')}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"sn-spaces__popup-menu_item-description\">\n\t\t\t\t\t\t\t${Loc.getMessage('SN_SPACES_MENU_INFO_VS_CLOSED_DESC')}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div data-id=\"${secretId}\" class=\"sn-spaces__popup-menu_item ${secretActiveClass}\">\n\t\t\t\t\t<div class=\"sn-spaces__popup-menu_item-icon --secret-spaces\"></div>\n\t\t\t\t\t<div class=\"sn-spaces__popup-menu_item-info\">\n\t\t\t\t\t\t<div class=\"sn-spaces__popup-menu_item-name\">\n\t\t\t\t\t\t\t${Loc.getMessage('SN_SPACES_MENU_INFO_VS_SECRET')}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"sn-spaces__popup-menu_item-description\">\n\t\t\t\t\t\t\t${Loc.getMessage('SN_SPACES_MENU_INFO_VS_SECRET_DESC')}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"sn-spaces__popup-menu_hint\">\n\t\t\t\t\t${Loc.getMessage('SN_SPACES_MENU_INFO_VS_PROMPT')}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\tEvent.bind(\n\t\t\tthis.#contentNode.querySelector(`[data-id='${openId}']`),\n\t\t\t'click',\n\t\t\t() => this.#changePrivacy('open'),\n\t\t);\n\t\tEvent.bind(\n\t\t\tthis.#contentNode.querySelector(`[data-id='${closedId}']`),\n\t\t\t'click',\n\t\t\t() => this.#changePrivacy('closed'),\n\t\t);\n\t\tEvent.bind(\n\t\t\tthis.#contentNode.querySelector(`[data-id='${secretId}']`),\n\t\t\t'click',\n\t\t\t() => this.#changePrivacy('secret'),\n\t\t);\n\n\t\treturn this.#contentNode;\n\t}\n\n\t#changePrivacy(privacyCode: 'open' | 'closed' | 'secret')\n\t{\n\t\tthis.#privacyCode = privacyCode;\n\n\t\tDom.removeClass(this.#contentNode.querySelector('.--active'), '--active');\n\n\t\tconst node = this.#contentNode.querySelector(`[data-id='spaces-group-privacy-${privacyCode}']`);\n\t\tDom.addClass(node, '--active');\n\n\t\tthis.emit('changePrivacy', this.#privacyCode);\n\n\t\tthis.#popup.close();\n\t}\n}\n","import { Dom, Event, Loc, Tag, Text } from 'main.core';\nimport { BaseEvent, EventEmitter } from 'main.core.events';\nimport { Perms } from '../group-settings';\nimport { Logo } from '../logo';\nimport { GroupPrivacy } from './group-privacy';\n\ntype Params = {\n\ttitle: number,\n\tlogo: Logo,\n\tprivacyCode: string,\n\tactions: Perms,\n}\n\nexport class Info extends EventEmitter\n{\n\t#title: string;\n\t#logo: Logo;\n\t#privacyCode: string;\n\t#privacyPopup: ?GroupPrivacy;\n\t#actions: Perms;\n\n\t#node: HTMLElement;\n\t#titleNode: HTMLElement;\n\t#editNode: HTMLElement;\n\n\tconstructor(params: Params)\n\t{\n\t\tsuper();\n\n\t\tthis.setEventNamespace('BX.Socialnetwork.Spaces.Settings.Info');\n\n\t\tthis.#title = params.title;\n\t\tthis.#logo = params.logo;\n\t\tthis.#privacyCode = params.privacyCode;\n\t\tthis.#actions = params.actions;\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tconst moreBtnId = 'spaces-settings-space-info-btn';\n\n\t\tthis.#node = Tag.render`\n\t\t\t<div class=\"sn-spaces__popup-item --main\">\n\t\t\t\t<div class=\"sn-spaces__popup-settings_logo\">\n\t\t\t\t\t<div class=\"sn-spaces__list-item_icon ${this.#logo.getClass()}\">\n\t\t\t\t\t\t${this.#logo.render()}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"sn-spaces__popup-settings_info\">\n\t\t\t\t\t${this.#renderTitle()}\n\t\t\t\t\t${this.#renderEdit()}\n\t\t\t\t\t${this.#renderPrivacy()}\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tstyle=\"display: none;\"\n\t\t\t\t\tdata-id=\"${moreBtnId}\"\n\t\t\t\t\tclass=\"ui-popupcomponentmaker__btn --large --border sn-spaces__popup-settings_btn\"\n\t\t\t\t>${Loc.getMessage('SN_SPACES_MENU_INFO_MORE_BTN')}</div>\n\t\t\t</div>\n\t\t`;\n\n\t\tEvent.bind(\n\t\t\tthis.#node.querySelector(`[data-id='${moreBtnId}']`),\n\t\t\t'click',\n\t\t\t() => this.emit('more'),\n\t\t);\n\n\t\treturn this.#node;\n\t}\n\n\t#showPrivacy(event)\n\t{\n\t\tif (!this.#privacyPopup)\n\t\t{\n\t\t\tthis.#privacyPopup = new GroupPrivacy({\n\t\t\t\tbindElement: event.target,\n\t\t\t\tprivacyCode: this.#privacyCode,\n\t\t\t});\n\n\t\t\tthis.#privacyPopup.subscribe('onShow', () => this.emit('setAutoHide', false));\n\t\t\tthis.#privacyPopup.subscribe('onAfterClose', () => this.emit('setAutoHide', true));\n\t\t\tthis.#privacyPopup.subscribe('changePrivacy', this.#changePrivacy.bind(this));\n\t\t}\n\n\t\tthis.#privacyPopup.show();\n\t}\n\n\t#startEditTitle()\n\t{\n\t\tDom.addClass(this.#titleNode, '--hidden');\n\t\tDom.removeClass(this.#editNode, '--hidden');\n\n\t\tconst input = this.#editNode.querySelector('input');\n\n\t\tinput.focus();\n\t\tinput.setSelectionRange(input.value.length, input.value.length);\n\t}\n\n\t#stopEditTitle()\n\t{\n\t\tDom.addClass(this.#editNode, '--hidden');\n\t\tDom.removeClass(this.#titleNode, '--hidden');\n\t}\n\n\t#setTitle(value: string)\n\t{\n\t\tthis.#title = value;\n\n\t\tconst node = this.#titleNode.querySelector('.sn-spaces__popup-settings_name');\n\t\tnode.textContent = Text.encode(this.#title);\n\t}\n\n\t#renderTitle(): HTMLElement\n\t{\n\t\tthis.#titleNode = Tag.render`\n\t\t\t<div class=\"sn-spaces__popup-settings_title\">\n\t\t\t\t<div\n\t\t\t\t\tdata-id=\"spaces-settings-space-info-name\"\n\t\t\t\t\tclass=\"sn-spaces__popup-settings_name\"\n\t\t\t\t>\n\t\t\t\t\t${Text.encode(this.#title)}\n\t\t\t\t</div>\n\t\t\t\t${this.#actions.canEdit ? this.#renderPencilIcon() : ''}\n\t\t\t</div>\n\t\t`;\n\n\t\treturn this.#titleNode;\n\t}\n\n\t#renderEdit(): HTMLElement\n\t{\n\t\tconst uiClasses = 'ui-ctl ui-ctl-textbox ui-ctl--w100 ui-ctl--transp '\n\t\t\t+ 'ui-ctl-no-border ui-ctl-xs ui-ctl-no-padding';\n\n\t\tthis.#editNode = Tag.render`\n\t\t\t<div\n\t\t\t\tdata-id=\"spaces-settings-space-info-edit\"\n\t\t\t\tclass=\"sn-spaces__popup-settings_title --hidden\"\n\t\t\t>\n\t\t\t\t<div class=\"${uiClasses}\">\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tclass=\"ui-ctl-element sn-spaces__popup-settings_name-input\"\n\t\t\t\t\t\tvalue=\"${Text.encode(this.#title)}\"\n\t\t\t\t\t>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\tconst input = this.#editNode.querySelector('input');\n\n\t\tEvent.bind(input, 'keydown', (event: KeyboardEvent) => {\n\t\t\tif (event.key === 'Escape' || event.key === 'Enter')\n\t\t\t{\n\t\t\t\tinput.blur();\n\n\t\t\t\tevent.stopImmediatePropagation();\n\t\t\t}\n\t\t});\n\n\t\tEvent.bind(input, 'blur', () => {\n\t\t\tif (this.#title !== input.value)\n\t\t\t{\n\t\t\t\tthis.#setTitle(input.value);\n\n\t\t\t\tthis.emit('changeTitle', this.#title);\n\t\t\t}\n\n\t\t\tthis.#stopEditTitle();\n\t\t});\n\n\t\treturn this.#editNode;\n\t}\n\n\t#renderPrivacy(): HTMLElement\n\t{\n\t\tconst node = Tag.render`\n\t\t\t<div\n\t\t\t\tdata-id=\"spaces-settings-space-info-privacy\"\n\t\t\t\tclass=\"sn-spaces__popup-settings_select-private\"\n\t\t\t>\n\t\t\t\t<div class=\"sn-spaces__popup-settings_select-private-text\">\n\t\t\t\t\t${this.#getPrivateLabel(this.#privacyCode)}\n\t\t\t\t</div>\n\t\t\t\t${this.#actions.canEdit ? this.#renderPrivacyIcon() : ''}\n\t\t\t</div>\n\t\t`;\n\n\t\tif (this.#actions.canEdit)\n\t\t{\n\t\t\tEvent.bind(node, 'click', this.#showPrivacy.bind(this));\n\t\t}\n\n\t\treturn node;\n\t}\n\n\t#renderPencilIcon(): HTMLElement\n\t{\n\t\tconst node = Tag.render`\n\t\t\t<div\n\t\t\t\tdata-id=\"spaces-settings-space-info-title-edit\" \n\t\t\t\tclass=\"ui-icon-set --pencil-40\"\n\t\t\t\tstyle=\"--ui-icon-set__icon-size: 18px;\"\n\t\t\t></div>\n\t\t`;\n\n\t\tEvent.bind(node, 'click', this.#startEditTitle.bind(this));\n\n\t\treturn node;\n\t}\n\n\t#renderPrivacyIcon(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div\n\t\t\t\tclass=\"ui-icon-set --chevron-down\"\n\t\t\t\tstyle=\"--ui-icon-set__icon-size: 14px;\"\n\t\t\t></div>\n\t\t`;\n\t}\n\n\t#getPrivateLabel(privacyCode: 'open' | 'closed' | 'secret'): string\n\t{\n\t\treturn Loc.getMessage(`SN_SPACES_MENU_INFO_VS_${privacyCode.toUpperCase()}`);\n\t}\n\n\t#changePrivacy(baseEvent: BaseEvent)\n\t{\n\t\tconst privacyCode: 'open' | 'closed' | 'secret' = baseEvent.getData();\n\n\t\tthis.#node\n\t\t\t.querySelector('.sn-spaces__popup-settings_select-private-text')\n\t\t\t.textContent = this.#getPrivateLabel(privacyCode)\n\t\t;\n\n\t\tthis.emit('changePrivacy', privacyCode);\n\t}\n}\n","import { Event, Loc, Tag } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { Perms } from '../group-settings';\n\ntype Params = {\n\tamount: number,\n\tlist: Array<Member>,\n\tcounters: { [key: string]: number },\n\tactions: Perms,\n}\n\nexport type Member = {\n\tid: number,\n\tisAutoMember: boolean,\n\tisModerator: boolean,\n\tisOwner: boolean,\n\tisScrumMaster: boolean,\n\tphoto: string,\n}\n\ntype GroupedMembers = {\n\towner: Member,\n\tmoderators: Array<Member>,\n\tusers: Array<Member>,\n}\n\nexport class Members extends EventEmitter\n{\n\t#amount: number;\n\t#list: Array<Member>;\n\t#counters: { [key: string]: number };\n\t#actions: Perms;\n\n\tconstructor(params: Params)\n\t{\n\t\tsuper();\n\n\t\tthis.setEventNamespace('BX.Socialnetwork.Spaces.Settings.Members');\n\n\t\tthis.#amount = params.amount;\n\t\tthis.#list = params.list;\n\t\tthis.#counters = params.counters;\n\t\tthis.#actions = params.actions;\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tconst inviteBtnId = 'spaces-settings-create-members-btn';\n\n\t\tconst node = Tag.render`\n\t\t\t<div class=\"sn-spaces__popup-item_expandable\">\n\t\t\t\t<div class=\"sn-spaces__popup-item --expandable\">\n\t\t\t\t\t<div class=\"sn-spaces__popup-item_icon-block\">\n\t\t\t\t\t\t<div class=\"sn-spaces__popup-item_icon\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclass=\"ui-icon-set --persons-3\"\n\t\t\t\t\t\t\t\tstyle=\"--ui-icon-set__icon-size: 27px;\"\n\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"sn-spaces__popup-item_main-info\">\n\t\t\t\t\t\t<div class=\"sn-spaces__popup-item_members\">\n\t\t\t\t\t\t\t<div class=\"sn-spaces__popup-item_members-info\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('SN_SPACES_MENU_MEMBERS_LABEL')}: ${parseInt(this.#amount, 10)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t${this.#canInvite() ? this.#renderInviteBtn(inviteBtnId) : ''}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t${this.#renderList()}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t${this.#canInvite() && this.#hasCounters() ? this.#renderCounters() : ''}\n\t\t\t</div>\n\t\t`;\n\n\t\tconst inviteNode = node.querySelector(`[data-id='${inviteBtnId}']`);\n\n\t\tEvent.bind(\n\t\t\tnode.querySelector('.--expandable'),\n\t\t\t'click',\n\t\t\t(event) => {\n\t\t\t\tif (!inviteNode || !event.target.isEqualNode(inviteNode))\n\t\t\t\t{\n\t\t\t\t\tthis.emit('showUsers', 'all');\n\t\t\t\t}\n\t\t\t},\n\t\t);\n\n\t\treturn node;\n\t}\n\n\t#renderInviteBtn(inviteBtnId: string): HTMLElement\n\t{\n\t\tconst node = Tag.render`\n\t\t\t<div \n\t\t\t\tdata-id=\"${inviteBtnId}\" \n\t\t\t\tclass=\"ui-popupcomponentmaker__btn --border sn----spaces__popup-settings_btn\"\n\t\t\t>\n\t\t\t\t${Loc.getMessage('SN_SPACES_MENU_MEMBERS_INVITE_BTN')}\n\t\t\t</div>\n\t\t`;\n\n\t\tEvent.bind(node, 'click', () => this.emit('invite'));\n\n\t\treturn node;\n\t}\n\n\t#renderList(): HTMLElement\n\t{\n\t\tconst groupedMembers = this.#prepareList();\n\n\t\tconst visibleAmount = 3;\n\t\tconst moderators = groupedMembers.moderators.slice(0, visibleAmount);\n\t\tconst users = groupedMembers.users.slice(0, visibleAmount);\n\n\t\tconst amount = this.#amount - (1 + moderators.length + users.length);\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"sn-spaces__popup-item_lists\">\n\t\t\t\t<div class=\"sn-spaces__popup-item_list\">\n\t\t\t\t\t${this.#renderOwner(groupedMembers.owner)}\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tclass=\"sn-spaces__popup-item_list\"\n\t\t\t\t\tstyle=\"${moderators.length > 0 ? '' : 'display: none;'}\"\n\t\t\t\t>\n\t\t\t\t\t${moderators.map((member: Member) => {\n\t\t\t\t\t\treturn this.#renderModerator(member);\n\t\t\t\t\t})}\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tclass=\"sn-spaces__popup-item_list\"\n\t\t\t\t\tstyle=\"${users.length > 0 ? '' : 'display: none;'}\"\n\t\t\t\t>\n\t\t\t\t\t${users.map((member: Member) => {\n\t\t\t\t\t\treturn this.#renderUser(member);\n\t\t\t\t\t})}\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tclass=\"sn-spaces__popup-item_list-quantity\"\n\t\t\t\t\tstyle=\"${amount > 0 ? '' : 'display: none;'}\"\n\t\t\t\t>+${amount}</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\t#renderCounters(): HTMLElement\n\t{\n\t\tconst outCounter = parseInt(this.#counters.workgroup_requests_out, 10);\n\t\tconst inCounter = parseInt(this.#counters.workgroup_requests_in, 10);\n\n\t\tconst outId = 'spaces-settings-members-counter-out';\n\t\tconst inId = 'spaces-settings-members-counter-in';\n\n\t\tconst renderOut = () => {\n\t\t\tif (!this.#hasOutCounters())\n\t\t\t{\n\t\t\t\treturn '';\n\t\t\t}\n\n\t\t\treturn Tag.render`\n\t\t\t\t<div data-id=\"${outId}\" class=\"sn-spaces__popup-item --primary\">\n\t\t\t\t\t<div class=\"sn-spaces__popup-item_counter\">${outCounter}</div>\n\t\t\t\t\t<span class=\"\">${Loc.getMessage('SN_SPACES_MENU_MEMBERS_GREEN_LABEL')}</span>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"ui-icon-set --chevron-right\"\n\t\t\t\t\t\tstyle=\"--ui-icon-set__icon-size: 14px;\"\n\t\t\t\t\t></div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t};\n\n\t\tconst renderIn = () => {\n\t\t\tif (!this.#hasInCounters())\n\t\t\t{\n\t\t\t\treturn '';\n\t\t\t}\n\n\t\t\treturn Tag.render`\n\t\t\t\t<div data-id=\"${inId}\" class=\"sn-spaces__popup-item --warning\">\n\t\t\t\t\t<div class=\"sn-spaces__popup-item_counter\">${inCounter}</div>\n\t\t\t\t\t<span class=\"\">${Loc.getMessage('SN_SPACES_MENU_MEMBERS_RED_LABEL')}</span>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"ui-icon-set --chevron-right\"\n\t\t\t\t\t\tstyle=\"--ui-icon-set__icon-size: 14px;\"\n\t\t\t\t\t></div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t};\n\n\t\tconst node = Tag.render`\n\t\t\t<div>\n\t\t\t\t${renderOut()}\n\t\t\t\t${renderIn()}\n\t\t\t</div>\n\t\t`;\n\n\t\tEvent.bind(\n\t\t\tnode.querySelector(`[data-id='${outId}']`),\n\t\t\t'click',\n\t\t\t() => this.emit('showUsers', 'out'),\n\t\t);\n\n\t\tEvent.bind(\n\t\t\tnode.querySelector(`[data-id='${inId}']`),\n\t\t\t'click',\n\t\t\t() => this.emit('showUsers', 'in'),\n\t\t);\n\n\t\treturn node;\n\t}\n\n\t#renderOwner(member: Member): HTMLElement\n\t{\n\t\tconst crownIconSrc = '/bitrix/components/bitrix/socialnetwork.spaces.menu/'\n\t\t\t+ 'templates/.default/images/sn-spaces__popup-icon_super-admin.svg'\n\t\t;\n\n\t\tconst uiClasses = member.photo ? '' : 'ui-icon ui-icon-common-user ui-icon-xs';\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"sn-spaces__popup-item_list-item --super-admin ${uiClasses}\">\n\t\t\t\t${this.#renderAvatar(member.photo)}\n\t\t\t\t<img src=\"${crownIconSrc}\" class=\"sn-spaces__popup-icon_svg\" alt=\"crown\">\n\t\t\t</div>\n\t\t`;\n\t}\n\n\t#renderModerator(member: Member): HTMLElement\n\t{\n\t\tconst crownIconSrc = '/bitrix/components/bitrix/socialnetwork.spaces.menu/'\n\t\t\t+ 'templates/.default/images/sn-spaces__popup-icon_admin.svg'\n\t\t;\n\n\t\tconst uiClasses = member.photo ? '' : 'ui-icon ui-icon-common-user ui-icon-xs';\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"sn-spaces__popup-item_list-item --admin ${uiClasses}\">\n\t\t\t\t${this.#renderAvatar(member.photo)}\n\t\t\t\t<img src=\"${crownIconSrc}\" class=\"sn-spaces__popup-icon_svg\" alt=\"crown\">\n\t\t\t</div>\n\t\t`;\n\t}\n\n\t#renderUser(member: Member): HTMLElement\n\t{\n\t\tconst uiClasses = member.photo ? '' : 'ui-icon ui-icon-common-user ui-icon-xs';\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"sn-spaces__popup-item_list-item ${uiClasses}\">\n\t\t\t\t${this.#renderAvatar(member.photo)}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\t#renderAvatar(photo: string): HTMLElement\n\t{\n\t\tif (photo)\n\t\t{\n\t\t\treturn Tag.render`\n\t\t\t\t<i\n\t\t\t\t\tclass=\"sn-spaces__popup-item_list-item-img\"\n\t\t\t\t\tstyle=\"background-image: url('${encodeURI(photo)}');\"\n\t\t\t\t></i>\n\t\t\t`;\n\t\t}\n\n\t\treturn Tag.render`<i></i>`;\n\t}\n\n\t#prepareList(): GroupedMembers\n\t{\n\t\tconst members = {\n\t\t\towner: null,\n\t\t\tmoderators: [],\n\t\t\tusers: [],\n\t\t};\n\n\t\tthis.#list.forEach((member: Member) => {\n\t\t\tif (member.isOwner)\n\t\t\t{\n\t\t\t\tmembers.owner = member;\n\t\t\t}\n\t\t\telse if (member.isModerator)\n\t\t\t{\n\t\t\t\tmembers.moderators.push(member);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tmembers.users.push(member);\n\t\t\t}\n\t\t});\n\n\t\treturn members;\n\t}\n\n\t#canInvite(): boolean\n\t{\n\t\treturn this.#actions.canEdit || this.#actions.canInvite;\n\t}\n\n\t#hasCounters(): boolean\n\t{\n\t\tconst outCounter = parseInt(this.#counters.workgroup_requests_out, 10);\n\t\tconst inCounter = parseInt(this.#counters.workgroup_requests_in, 10);\n\n\t\treturn outCounter > 0 || inCounter > 0;\n\t}\n\n\t#hasOutCounters(): boolean\n\t{\n\t\treturn parseInt(this.#counters.workgroup_requests_out, 10) > 0;\n\t}\n\n\t#hasInCounters(): boolean\n\t{\n\t\treturn parseInt(this.#counters.workgroup_requests_in, 10) > 0;\n\t}\n}\n","import { Dom, Event, Loc, Tag } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\n\ntype Params = {\n\tpin: boolean,\n}\n\nexport class Pin extends EventEmitter\n{\n\t#pin: boolean;\n\t#disabled: boolean;\n\t#node: HTMLElement;\n\n\tconstructor(params: Params)\n\t{\n\t\tsuper();\n\n\t\tthis.setEventNamespace('BX.Socialnetwork.Spaces.Settings.Pin');\n\n\t\tthis.#pin = params.pin;\n\t\tthis.#disabled = false;\n\n\t\tthis.#bindEvents();\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tconst pinId = 'spaces-settings-pin';\n\n\t\tconst iconClass = this.#pin ? '--pin-2' : '--pin-1';\n\n\t\tthis.#node = Tag.render`\n\t\t\t<div\n\t\t\t\tdata-id=\"${pinId}\"\n\t\t\t\tclass=\"sn-spaces__popup-item --mini\"\n\t\t\t>\n\t\t\t\t<div class=\"sn-spaces__popup-icon-round\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"ui-icon-set ${iconClass}\"\n\t\t\t\t\t\tstyle=\"--ui-icon-set__icon-size: 22px;\"\n\t\t\t\t\t></div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"sn-spaces__popup-icon-round-name\">\n\t\t\t\t\t${this.#getLabel(this.#pin)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\tEvent.bind(this.#node, 'click', this.#toggle.bind(this));\n\n\t\treturn this.#node;\n\t}\n\n\tunDisable()\n\t{\n\t\tthis.#disabled = false;\n\t}\n\n\t#toggle()\n\t{\n\t\tif (this.#disabled)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.#disabled = true;\n\n\t\tthis.#pin = !this.#pin;\n\n\t\tthis.emit('update', this.#pin);\n\n\t\tthis.#changeIcon(this.#pin);\n\n\t\tthis.#changeLabel(this.#pin);\n\t}\n\n\t#changeIcon(pin: boolean)\n\t{\n\t\tconst iconNode = this.#node.querySelector('.ui-icon-set');\n\t\tif (pin)\n\t\t{\n\t\t\tDom.removeClass(iconNode, '--pin-1');\n\t\t\tDom.addClass(iconNode, '--pin-2');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.removeClass(iconNode, '--pin-2');\n\t\t\tDom.addClass(iconNode, '--pin-1');\n\t\t}\n\t}\n\n\t#changeLabel(pin: boolean)\n\t{\n\t\tconst nameNode = this.#node.querySelector('.sn-spaces__popup-icon-round-name');\n\t\tnameNode.textContent = this.#getLabel(pin);\n\t}\n\n\t#getLabel(pin: boolean): string\n\t{\n\t\treturn pin\n\t\t\t? Loc.getMessage('SN_SPACES_MENU_PIN_N')\n\t\t\t: Loc.getMessage('SN_SPACES_MENU_PIN_Y')\n\t\t;\n\t}\n\n\t#bindEvents(): void\n\t{\n\t\tEventEmitter.subscribe('pinChanged', function(event) {\n\t\t\tthis.#pin = event.data.isPinned;\n\t\t\tthis.#changeLabel(this.#pin);\n\t\t\tthis.#changeIcon(this.#pin);\n\t\t}.bind(this));\n\t}\n}","import { Event, Loc, Tag } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\n\nexport class Roles extends EventEmitter\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\n\t\tthis.setEventNamespace('BX.Socialnetwork.Spaces.Settings.Roles');\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tconst rolesId = 'spaces-settings-roles';\n\n\t\tconst node = Tag.render`\n\t\t\t<div\n\t\t\t\tdata-id=\"${rolesId}\"\n\t\t\t\tclass=\"sn-spaces__popup-item --mini Roles&Rights\"\n\t\t\t>\n\t\t\t\t<div class=\"sn-spaces__popup-icon-round\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"ui-icon-set --crown-1\"\n\t\t\t\t\t\tstyle=\"--ui-icon-set__icon-size: 22px;\"\n\t\t\t\t\t></div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"sn-spaces__popup-icon-round-name\">\n\t\t\t\t\t${Loc.getMessage('SN_SPACES_MENU_ROLES')}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\tEvent.bind(node, 'click', () => this.emit('click'));\n\n\t\treturn node;\n\t}\n}\n","import { ajax, AjaxError, AjaxResponse, Cache } from 'main.core';\nimport { MenuAjax } from './menu-ajax';\nimport { BaseEvent } from 'main.core.events';\nimport { PopupComponentsMaker } from 'ui.popupcomponentsmaker';\nimport { Chat } from './chat';\nimport { Logo } from './logo';\nimport { MenuRouter } from './menu-router';\nimport { ChatAction } from './settings-elements/chat-action';\nimport { Follow } from './settings-elements/follow';\nimport { Info } from './settings-elements/info';\nimport { Member, Members } from './settings-elements/members';\nimport { Pin } from './settings-elements/pin';\nimport { Roles } from './settings-elements/roles';\n\nimport type { LogoData } from './logo';\n\ntype Params = {\n\tbindElement: HTMLElement,\n\tgroupId: number,\n\tlogo: LogoData,\n\tchat: Chat,\n\trouter: MenuRouter,\n}\n\ntype GroupData = {\n\tname: string,\n\tisPin: boolean,\n\tprivacyCode: string,\n\tisSubscribed: boolean,\n\tnumberOfMembers: number,\n\tlistOfMembers: Array<Member>,\n\tactions: Perms,\n\tcounters: { [key: string]: number },\n}\n\nexport type Perms = {\n\tcanEdit: boolean,\n\tcanInvite: boolean,\n}\n\nexport class GroupSettings\n{\n\t#cache = new Cache.MemoryCache();\n\n\t#menu: PopupComponentsMaker;\n\n\t#layout = {\n\t\tmembers: null,\n\t};\n\n\tconstructor(params: Params)\n\t{\n\t\tthis.#setParams(params);\n\n\t\tthis.#menu = this.#createMenu();\n\t}\n\n\tshow()\n\t{\n\t\tif (this.#menu.isShown())\n\t\t{\n\t\t\tthis.#menu.close();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.#menu.show();\n\t\t}\n\t}\n\n\t#setParams(params: Params)\n\t{\n\t\tthis.#cache.set('params', params);\n\t}\n\n\t#getParam(param: string): any\n\t{\n\t\treturn this.#cache.get('params')[param];\n\t}\n\n\t#createMenu(): PopupComponentsMaker\n\t{\n\t\tconst groupDataPromise = MenuAjax.getGroupData(this.#getParam('groupId'));\n\n\t\treturn new PopupComponentsMaker({\n\t\t\tid: 'spaces-settings-menu',\n\t\t\ttarget: this.#getParam('bindElement'),\n\t\t\tcontent: [\n\t\t\t\t{\n\t\t\t\t\thtml: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\thtml: this.#renderInfo(groupDataPromise),\n\t\t\t\t\t\t\tbackgroundColor: '#fafafa',\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\thtml: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\thtml: this.#renderChat(),\n\t\t\t\t\t\t\twithoutBackground: true,\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\thtml: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\thtml: this.#renderMembers(groupDataPromise),\n\t\t\t\t\t\t\twithoutBackground: true,\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\thtml: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\thtml: this.#renderFollow(groupDataPromise),\n\t\t\t\t\t\t\tbackgroundColor: '#fafafa',\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\thtml: this.#renderPin(groupDataPromise),\n\t\t\t\t\t\t\tbackgroundColor: '#fafafa',\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\thtml: this.#renderRoles(),\n\t\t\t\t\t\t\tbackgroundColor: '#fafafa',\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t],\n\t\t});\n\t}\n\n\t#renderInfo(groupDataPromise: Promise): Promise\n\t{\n\t\treturn new Promise((resolve) => {\n\t\t\t// eslint-disable-next-line promise/catch-or-return\n\t\t\tgroupDataPromise\n\t\t\t\t.then((groupData: GroupData) => {\n\t\t\t\t\tconst info = new Info({\n\t\t\t\t\t\ttitle: groupData.name,\n\t\t\t\t\t\tlogo: new Logo(this.#getParam('logo')),\n\t\t\t\t\t\tprivacyCode: groupData.privacyCode,\n\t\t\t\t\t\tactions: groupData.actions,\n\t\t\t\t\t});\n\t\t\t\t\tinfo.subscribe('changePrivacy', this.#changePrivacy.bind(this));\n\t\t\t\t\tinfo.subscribe('changeTitle', this.#changeTitle.bind(this));\n\t\t\t\t\tinfo.subscribe('setAutoHide', (baseEvent: BaseEvent) => {\n\t\t\t\t\t\tthis.#menu.getPopup().setAutoHide(baseEvent.getData());\n\t\t\t\t\t});\n\t\t\t\t\tinfo.subscribe('more', () => {\n\t\t\t\t\t\tconsole.log('more');\n\t\t\t\t\t});\n\n\t\t\t\t\tresolve(info.render());\n\t\t\t\t})\n\t\t\t;\n\t\t});\n\t}\n\n\t#renderChat(): HTMLElement\n\t{\n\t\tconst chat = new ChatAction();\n\n\t\tchat.subscribe('videoCall', () => {\n\t\t\tthis.#menu.close();\n\t\t\tthis.#getParam('chat').startVideoCall();\n\t\t});\n\t\tchat.subscribe('openChat', () => {\n\t\t\tthis.#menu.close();\n\t\t\tthis.#getParam('chat').openChat();\n\t\t});\n\t\tchat.subscribe('createChat', () => {\n\t\t\tthis.#menu.close();\n\t\t\tthis.#getParam('chat').createChat(this.#getParam('bindElement'));\n\t\t});\n\n\t\treturn chat.render();\n\t}\n\n\tupdate(groupDataPromise: Promise)\n\t{\n\t\tthis.#renderMembers(groupDataPromise);\n\t}\n\n\t#renderMembers(groupDataPromise: Promise): Promise\n\t{\n\t\treturn new Promise((resolve) => {\n\t\t\t// eslint-disable-next-line promise/catch-or-return\n\t\t\tgroupDataPromise\n\t\t\t\t.then((groupData: GroupData) => {\n\t\t\t\t\tconst members = new Members({\n\t\t\t\t\t\tamount: groupData.numberOfMembers,\n\t\t\t\t\t\tlist: groupData.listOfMembers,\n\t\t\t\t\t\tcounters: groupData.counters,\n\t\t\t\t\t\tactions: groupData.actions,\n\t\t\t\t\t});\n\t\t\t\t\tmembers.subscribe('showUsers', (baseEvent: BaseEvent<'all' | 'in' | 'out'>) => {\n\t\t\t\t\t\tthis.#menu.close();\n\t\t\t\t\t\tthis.#getParam('router').openGroupUsers(baseEvent.getData());\n\t\t\t\t\t});\n\t\t\t\t\tmembers.subscribe('invite', () => {\n\t\t\t\t\t\tthis.#menu.close();\n\t\t\t\t\t\tthis.#getParam('router').openGroupInvite();\n\t\t\t\t\t});\n\n\t\t\t\t\tconst layoutMembers = members.render();\n\t\t\t\t\tif (this.#layout.members)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.#layout.members.replaceWith(layoutMembers);\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.#layout.members = layoutMembers;\n\n\t\t\t\t\tresolve(this.#layout.members);\n\t\t\t\t})\n\t\t\t;\n\t\t});\n\t}\n\n\t#renderFollow(groupDataPromise: Promise): Promise\n\t{\n\t\treturn new Promise((resolve) => {\n\t\t\t// eslint-disable-next-line promise/catch-or-return\n\t\t\tgroupDataPromise\n\t\t\t\t.then((groupData: GroupData) => {\n\t\t\t\t\tconst follow = new Follow({\n\t\t\t\t\t\tfollow: groupData.isSubscribed,\n\t\t\t\t\t});\n\n\t\t\t\t\tfollow.subscribe('update', (baseEvent: BaseEvent) => {\n\t\t\t\t\t\tthis.#changeSubscribe(\n\t\t\t\t\t\t\tthis.#getParam('groupId'),\n\t\t\t\t\t\t\tbaseEvent.getData() === true ? 'Y' : 'N',\n\t\t\t\t\t\t\tfollow,\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\n\t\t\t\t\tresolve(follow.render());\n\t\t\t\t})\n\t\t\t;\n\t\t});\n\t}\n\n\t#renderPin(groupDataPromise: Promise): Promise\n\t{\n\t\treturn new Promise((resolve) => {\n\t\t\t// eslint-disable-next-line promise/catch-or-return\n\t\t\tgroupDataPromise\n\t\t\t\t.then((groupData: GroupData) => {\n\t\t\t\t\tconst pin = new Pin({\n\t\t\t\t\t\tpin: groupData.isPin,\n\t\t\t\t\t});\n\n\t\t\t\t\tpin.subscribe('update', (baseEvent: BaseEvent) => {\n\t\t\t\t\t\tthis.#changePin(\n\t\t\t\t\t\t\tthis.#getParam('groupId'),\n\t\t\t\t\t\t\tbaseEvent.getData() === true ? 'pin' : 'unpin',\n\t\t\t\t\t\t\tpin,\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\n\t\t\t\t\tresolve(pin.render());\n\t\t\t\t})\n\t\t\t;\n\t\t});\n\t}\n\n\t#renderRoles(): HTMLElement\n\t{\n\t\tconst roles = new Roles();\n\n\t\troles.subscribe('click', () => {\n\t\t\tthis.#menu.close();\n\t\t\tthis.#getParam('router').openGroupFeatures();\n\t\t});\n\n\t\treturn roles.render();\n\t}\n\n\t#changeSubscribe(groupId: number, value: 'Y' | 'N', follow: Follow)\n\t{\n\t\t// eslint-disable-next-line promise/catch-or-return\n\t\tajax.runAction('socialnetwork.api.workgroup.setSubscription', {\n\t\t\tdata: {\n\t\t\t\tparams: {\n\t\t\t\t\tgroupId,\n\t\t\t\t\tvalue,\n\t\t\t\t},\n\t\t\t},\n\t\t})\n\t\t\t.then((response: AjaxResponse) => {\n\t\t\t\tfollow.unDisable();\n\t\t\t})\n\t\t\t.catch((error: AjaxError) => {\n\t\t\t\tfollow.unDisable();\n\n\t\t\t\tthis.#consoleError('changeSubscribe', error);\n\t\t\t})\n\t\t;\n\t}\n\n\t#changePin(groupId: number, action: 'pin' | 'unpin', pin: Pin)\n\t{\n\t\t// eslint-disable-next-line promise/catch-or-return\n\t\tajax.runAction('socialnetwork.api.workgroup.changePin', {\n\t\t\tdata: {\n\t\t\t\tgroupIdList: [groupId],\n\t\t\t\taction: action,\n\t\t\t},\n\t\t})\n\t\t\t.then((response: AjaxResponse) => {\n\t\t\t\tpin.unDisable();\n\t\t\t})\n\t\t\t.catch((error: AjaxError) => {\n\t\t\t\tpin.unDisable();\n\n\t\t\t\tthis.#consoleError('changePin', error);\n\t\t\t})\n\t\t;\n\t}\n\n\t#changePrivacy(baseEvent: BaseEvent)\n\t{\n\t\tconst privacyCode: 'open' | 'closed' | 'secret' = baseEvent.getData();\n\n\t\tconst fields = {};\n\t\tif (privacyCode === 'open')\n\t\t{\n\t\t\tfields.VISIBLE = 'Y';\n\t\t\tfields.OPENED = 'Y';\n\t\t\tfields.EXTERNAL = 'N';\n\t\t}\n\n\t\tif (privacyCode === 'closed')\n\t\t{\n\t\t\tfields.VISIBLE = 'Y';\n\t\t\tfields.OPENED = 'N';\n\t\t\tfields.EXTERNAL = 'N';\n\t\t}\n\n\t\tif (privacyCode === 'secret')\n\t\t{\n\t\t\tfields.VISIBLE = 'N';\n\t\t\tfields.OPENED = 'N';\n\t\t\tfields.EXTERNAL = 'N';\n\t\t}\n\n\t\t// eslint-disable-next-line promise/catch-or-return\n\t\tajax.runAction('socialnetwork.api.workgroup.update', {\n\t\t\tdata: {\n\t\t\t\tgroupId: this.#getParam('groupId'),\n\t\t\t\tfields: fields,\n\t\t\t},\n\t\t})\n\t\t\t.then((response: AjaxResponse) => {})\n\t\t\t.catch((error: AjaxError) => {\n\t\t\t\tthis.#consoleError('changePrivacy', error);\n\t\t\t})\n\t\t;\n\t}\n\n\t#changeTitle(baseEvent: BaseEvent)\n\t{\n\t\t// eslint-disable-next-line promise/catch-or-return\n\t\tajax.runAction('socialnetwork.api.workgroup.update', {\n\t\t\tdata: {\n\t\t\t\tgroupId: this.#getParam('groupId'),\n\t\t\t\tfields: {\n\t\t\t\t\tNAME: baseEvent.getData(),\n\t\t\t\t},\n\t\t\t},\n\t\t})\n\t\t\t.then((response: AjaxResponse) => {})\n\t\t\t.catch((error: AjaxError) => {\n\t\t\t\tthis.#consoleError('changeTitle', error);\n\t\t\t})\n\t\t;\n\t}\n\n\t#consoleError(action: string, error: AjaxError)\n\t{\n\t\t// eslint-disable-next-line no-console\n\t\tconsole.error(`GroupSettings: ${action} error`, error);\n\t}\n}","import { Cache } from 'main.core';\nimport { PopupComponentsMaker } from 'ui.popupcomponentsmaker';\n\ntype Params = {\n\tbindElement: HTMLElement,\n\tuserId: number,\n}\n\nexport class UserSettings\n{\n\t#cache = new Cache.MemoryCache();\n\n\t#menu: PopupComponentsMaker;\n\n\tconstructor(params: Params)\n\t{\n\t\tthis.#setParams(params);\n\t}\n\n\tshow()\n\t{\n\n\t}\n\n\t#setParams(params: Params)\n\t{\n\t\tthis.#cache.set('params', params);\n\t}\n\n\t#getParam(param: string): any\n\t{\n\t\treturn this.#cache.get('params')[param];\n\t}\n}\n","import { Cache } from 'main.core';\nimport { Chat } from './chat';\nimport { GroupSettings } from './group-settings';\nimport { MenuRouter } from './menu-router';\nimport { UserSettings } from './user-settings';\n\nimport type { LogoData } from './logo';\n\ntype Params = {\n\tbindElement: HTMLElement,\n\ttype: 'group' | 'user',\n\tentityId: number,\n\tlogo?: LogoData,\n\tchat: Chat,\n\trouter: MenuRouter,\n}\n\nimport './css/settings.css';\n\nexport class Settings\n{\n\t#cache = new Cache.MemoryCache();\n\n\t#settings: UserSettings | GroupSettings;\n\n\tconstructor(params: Params)\n\t{\n\t\tthis.#setParams(params);\n\t}\n\n\tshow(): void\n\t{\n\t\tif (!this.#settings)\n\t\t{\n\t\t\tif (this.#getParam('type') === 'user')\n\t\t\t{\n\t\t\t\tthis.#settings = new UserSettings({\n\t\t\t\t\tbindElement: this.#getParam('bindElement'),\n\t\t\t\t\tuserId: this.#getParam('entityId'),\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.#settings = new GroupSettings({\n\t\t\t\t\tbindElement: this.#getParam('bindElement'),\n\t\t\t\t\tgroupId: this.#getParam('entityId'),\n\t\t\t\t\tlogo: this.#getParam('logo'),\n\t\t\t\t\tchat: this.#getParam('chat'),\n\t\t\t\t\trouter: this.#getParam('router'),\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tthis.#settings.show();\n\t}\n\n\tupdate(groupDataPromise: Promise)\n\t{\n\t\tthis.#settings?.update(groupDataPromise);\n\t}\n\n\t#setParams(params: Params)\n\t{\n\t\tthis.#cache.set('params', params);\n\t}\n\n\t#getParam(param: string): any\n\t{\n\t\treturn this.#cache.get('params')[param];\n\t}\n}\n","import { Dom, Loc } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { Menu } from 'main.popup';\n\ntype Params = {\n\tbindElement: HTMLElement,\n}\n\nexport class VideoCall extends EventEmitter\n{\n\t#menu: Menu;\n\n\tconstructor(params: Params)\n\t{\n\t\tsuper();\n\n\t\tthis.setEventNamespace('BX.Socialnetwork.Spaces.VideoCall');\n\n\t\tthis.#menu = this.#createMenu(params.bindElement);\n\t}\n\n\tshow(): void\n\t{\n\t\tthis.#menu.toggle();\n\t}\n\n\t#createMenu(bindElement: HTMLElement): Menu\n\t{\n\t\tconst menu = new Menu({\n\t\t\tid: 'spaces-video-call-menu',\n\t\t\tbindElement,\n\t\t\tcloseByEsc: true,\n\t\t\tangle: {\n\t\t\t\tposition: 'top',\n\t\t\t\toffset: 31,\n\t\t\t},\n\t\t});\n\n\t\tmenu.addMenuItem({\n\t\t\tdataset: { id: 'spaces-menu-video-call-hd' },\n\t\t\ttext: Loc.getMessage('SN_SPACES_MENU_VIDEO_CALL_HD'),\n\t\t\tclassName: 'sn-spaces-menu-video-call-hd-icon',\n\t\t\tonclick: () => {\n\t\t\t\tthis.emit('hd');\n\t\t\t\tmenu.close();\n\t\t\t},\n\t\t});\n\n\t\tmenu.addMenuItem({\n\t\t\tdelimiter: true,\n\t\t});\n\n\t\tmenu.addMenuItem({\n\t\t\tdataset: { id: 'spaces-menu-video-call-chat' },\n\t\t\ttext: Loc.getMessage('SN_SPACES_MENU_VIDEO_CALL_CHAT'),\n\t\t\tclassName: 'sn-spaces-menu-video-call-chat-icon',\n\t\t\tonclick: () => {\n\t\t\t\tthis.emit('chat');\n\t\t\t\tmenu.close();\n\t\t\t},\n\t\t});\n\n\t\tmenu.addMenuItem({\n\t\t\tdataset: { id: 'spaces-menu-create-chat' },\n\t\t\ttext: Loc.getMessage('SN_SPACES_MENU_CREATE_CHAT'),\n\t\t\tclassName: 'sn-spaces-menu-create-chat-icon',\n\t\t\tonclick: () => {\n\t\t\t\tthis.emit('createChat');\n\t\t\t\tmenu.close();\n\t\t\t},\n\t\t});\n\n\t\treturn menu;\n\t}\n}\n","import { Loc, Dom, Type, Tag, Event, Cache, Runtime } from 'main.core';\nimport { PULL as Pull } from 'pull.client';\nimport { Meetings } from 'tasks.scrum.meetings';\nimport { Methodology } from 'tasks.scrum.methodology';\nimport { Guide } from 'ui.tour';\nimport { PullRequests } from './pull-requests';\nimport { MenuAjax } from './menu-ajax';\nimport { Chat } from './chat';\nimport { Invite } from './invite';\nimport { Logo } from './logo';\nimport { MenuRouter } from './menu-router';\nimport { Settings } from './settings';\nimport { VideoCall } from './video-call';\n\nimport type { LogoData } from './logo';\n\nimport './css/menu.css';\n\ntype Params = {\n\ttype: 'group' | 'user',\n\tentityId: number,\n\tgroupMembersList: any,\n\tlogo?: LogoData,\n\tpathToFeatures?: string,\n\tpathToUsers?: string,\n\tpathToInvite?: string,\n\tpathToScrumTeamSpeed?: string,\n\tpathToScrumBurnDown?: string,\n\tpathToGroupTasksTask?: string,\n\tcanInvite: boolean,\n\tisNew?: boolean,\n};\n\nexport class Menu\n{\n\t#cache = new Cache.MemoryCache();\n\n\t#videoCall: ?VideoCall;\n\t#scrumMeetings: ?Meetings;\n\t#scrumMethodology: ?Methodology;\n\t#invite: ?Invite;\n\t#inviteNode: HTMLElement;\n\t#settings: ?Settings;\n\n\t#chat: Chat;\n\t#router: MenuRouter;\n\t#discussionAhaMomentShown = false;\n\n\t#groupInvitedList: any = [];\n\n\tconstructor(params: Params)\n\t{\n\t\tthis.#setParams(params);\n\n\t\tthis.#initServices(params);\n\n\t\tthis.#subscribeToPull();\n\t}\n\n\t#subscribeToPull()\n\t{\n\t\tconst pullRequests = new PullRequests(this.#getParam('entityId'));\n\t\tpullRequests.subscribe('update', this.#update.bind(this));\n\n\t\tPull.subscribe(pullRequests);\n\t}\n\n\t#update()\n\t{\n\t\tconst groupDataPromise = MenuAjax.getGroupData(this.#getParam('entityId'));\n\t\tthis.#settings?.update(groupDataPromise);\n\t\tthis.#getInvite().update(groupDataPromise);\n\t\tthis.#chat.update(groupDataPromise);\n\t}\n\n\trenderLogoTo(container: HTMLElement)\n\t{\n\t\tif (!Type.isDomNode(container))\n\t\t{\n\t\t\tthrow new Error('BX.Socialnetwork.Spaces.Menu: HTMLElement for space not found');\n\t\t}\n\n\t\tconst logo = new Logo(this.#getParam('logo'));\n\n\t\tconst logoClass = logo.getClass();\n\t\tif (logoClass)\n\t\t{\n\t\t\tDom.addClass(container, logoClass);\n\t\t}\n\n\t\tDom.append(\n\t\t\tlogo.render(),\n\t\t\tcontainer,\n\t\t);\n\t}\n\n\trenderUserLogoTo(container: HTMLElement)\n\t{\n\t\tif (!Type.isDomNode(container))\n\t\t{\n\t\t\tthrow new Error('BX.Socialnetwork.Spaces.Menu: HTMLElement for space not found');\n\t\t}\n\n\t\tDom.addClass(\n\t\t\tcontainer,\n\t\t\t[\n\t\t\t\t'sonet-common-workgroup-avatar',\n\t\t\t\t'--common-space',\n\t\t\t],\n\t\t);\n\n\t\tDom.append(Tag.render`<i></i>`, container);\n\t}\n\n\trenderToolbarTo(container: HTMLElement)\n\t{\n\t\tDom.append(this.#renderVideoCall(), container);\n\n\t\tif (this.#getParam('canInvite'))\n\t\t{\n\t\t\tDom.append(this.#renderInvite(), container);\n\t\t}\n\n\t\tDom.append(this.#renderSettings(), container);\n\t}\n\n\trenderScrumToolbarTo(container: HTMLElement)\n\t{\n\t\tDom.append(this.#renderScrumVideoCall(), container);\n\t\tDom.append(this.#renderScrumElements(), container);\n\n\t\tif (this.#getParam('canInvite'))\n\t\t{\n\t\t\tDom.append(this.#renderInvite(), container);\n\t\t}\n\n\t\tDom.append(this.#renderSettings(), container);\n\t}\n\n\trenderUserToolbarTo(container: HTMLElement)\n\t{\n\t\tDom.append(this.#renderUserVideoCall(), container);\n\t\tDom.append(this.#renderUserSettings(), container);\n\t}\n\n\t#setParams(params: Params)\n\t{\n\t\tthis.#cache.set('params', params);\n\n\t\tif (params.groupMembersList)\n\t\t{\n\t\t\tthis.#groupInvitedList = params.groupMembersList\n\t\t\t\t.filter((user) => user.invited)\n\t\t\t\t.map((user) => parseInt(user.id, 10))\n\t\t\t;\n\t\t}\n\t}\n\n\t#initServices(params: Params)\n\t{\n\t\tthis.#chat = new Chat({\n\t\t\tentityType: this.#getParam('type'),\n\t\t\tentityId: this.#getParam('entityId'),\n\t\t\tgroupMembersList: this.#getParam('groupMembersList'),\n\t\t});\n\n\t\tthis.#router = new MenuRouter({\n\t\t\tpathToFeatures: params.pathToFeatures,\n\t\t\tpathToUsers: params.pathToUsers,\n\t\t\tpathToInvite: params.pathToInvite,\n\t\t});\n\t}\n\n\t#getParam(param: string): any\n\t{\n\t\treturn this.#cache.get('params')[param];\n\t}\n\n\t#renderVideoCall(): HTMLElement\n\t{\n\t\tconst { node, chevronDown } = Tag.render`\n\t\t\t<div\n\t\t\t\tref=\"node\"\n\t\t\t\tdata-id=\"spaces-video-call-menu\"\n\t\t\t\tclass=\"sn-spaces__menu-toolbar_btn\"\n\t\t\t>\n\t\t\t\t<div class=\"ui-icon-set --video-1\"></div>\n\t\t\t\t<div\n\t\t\t\t\tref=\"chevronDown\"\n\t\t\t\t\tclass=\"ui-icon-set --chevron-down\"\n\t\t\t\t\tstyle=\"--ui-icon-set__icon-size: 14px;\"\n\t\t\t\t></div>\n\t\t\t</div>\n\t\t`;\n\n\t\tEvent.bind(node, 'click', this.#videoCallClick.bind(this, chevronDown));\n\n\t\treturn node;\n\t}\n\n\t#renderScrumVideoCall(): HTMLElement\n\t{\n\t\tconst node = Tag.render`\n\t\t\t<div data-id=\"spaces-scrum-video-call-menu\" class=\"sn-spaces__menu-toolbar_btn\">\n\t\t\t\t<div class=\"ui-icon-set --video-1\"></div>\n\t\t\t\t<div class=\"ui-icon-set --chevron-down\" style=\"--ui-icon-set__icon-size: 14px;\"></div>\n\t\t\t</div>\n\t\t`;\n\n\t\tEvent.bind(node, 'click', this.#scrumVideoCallClick.bind(this));\n\n\t\treturn node;\n\t}\n\n\t#renderScrumElements(): HTMLElement\n\t{\n\t\tconst node = Tag.render`\n\t\t\t<div data-id=\"spaces-scrum-elements-menu\" class=\"sn-spaces__menu-toolbar_btn\">\n\t\t\t\t<div class=\"ui-icon-set --elements\"></div>\n\t\t\t</div>\n\t\t`;\n\n\t\tEvent.bind(node, 'click', this.#scrumElementsClick.bind(this));\n\n\t\treturn node;\n\t}\n\n\t#renderUserVideoCall(): HTMLElement\n\t{\n\t\tconst node = Tag.render`\n\t\t\t<div data-id=\"spaces-video-call-menu\" class=\"sn-spaces__menu-toolbar_btn\">\n\t\t\t\t<div class=\"ui-icon-set --video-1\"></div>\n\t\t\t\t<div class=\"ui-icon-set --chevron-down\" style=\"--ui-icon-set__icon-size: 14px;\"></div>\n\t\t\t</div>\n\t\t`;\n\n\t\tEvent.bind(node, 'click', this.#userVideoCallClick.bind(this));\n\n\t\treturn node;\n\t}\n\n\t#renderInvite(): HTMLElement\n\t{\n\t\tif (!this.#inviteNode)\n\t\t{\n\t\t\tthis.#inviteNode = Tag.render`\n\t\t\t\t<div data-id=\"spaces-invite-menu\" class=\"sn-spaces__menu-toolbar_btn\">\n\t\t\t\t\t<div class=\"ui-icon-set --person-plus\"></div>\n\t\t\t\t</div>\n\t\t\t`;\n\n\t\t\tEvent.bind(this.#inviteNode, 'click', this.#inviteClick.bind(this));\n\n\t\t\tif (this.#getParam('isNew'))\n\t\t\t{\n\t\t\t\tsetTimeout(() => this.#showSpotlight(this.#inviteNode), 500);\n\t\t\t}\n\t\t}\n\n\t\treturn this.#inviteNode;\n\t}\n\n\t#renderSettings(): HTMLElement\n\t{\n\t\tconst node = Tag.render`\n\t\t\t<div data-id=\"spaces-settings-menu\" class=\"sn-spaces__menu-toolbar_btn\">\n\t\t\t\t<div class=\"ui-icon-set --more\"></div>\n\t\t\t</div>\n\t\t`;\n\n\t\tEvent.bind(node, 'click', this.#settingsClick.bind(this));\n\n\t\treturn node;\n\t}\n\n\t#renderUserSettings(): HTMLElement\n\t{\n\t\tconst node = Tag.render`\n\t\t\t<div data-id=\"spaces-settings-menu\" class=\"sn-spaces__menu-toolbar_btn\">\n\t\t\t\t<div class=\"ui-icon-set --more\"></div>\n\t\t\t</div>\n\t\t`;\n\n\t\tEvent.bind(node, 'click', this.#userSettingsClick.bind(this));\n\n\t\treturn node;\n\t}\n\n\t#videoCallClick(bindElement: HTMLElement)\n\t{\n\t\tif (!this.#videoCall)\n\t\t{\n\t\t\tthis.#videoCall = new VideoCall({\n\t\t\t\tbindElement: bindElement,\n\t\t\t});\n\t\t\tthis.#videoCall.subscribe('hd', () => {\n\t\t\t\tthis.#chat.startVideoCall();\n\t\t\t});\n\t\t\tthis.#videoCall.subscribe('chat', () => {\n\t\t\t\tthis.#chat.openChat();\n\t\t\t});\n\t\t\tthis.#videoCall.subscribe('createChat', () => {\n\t\t\t\tthis.#chat.createChat(bindElement);\n\t\t\t});\n\t\t}\n\n\t\tthis.#videoCall.show();\n\t}\n\n\t#scrumVideoCallClick(event)\n\t{\n\t\tif (!this.#scrumMeetings)\n\t\t{\n\t\t\tthis.#scrumMeetings = new Meetings({\n\t\t\t\tgroupId: this.#getParam('entityId'),\n\t\t\t});\n\t\t}\n\n\t\tthis.#scrumMeetings.showMenu(event.target);\n\t}\n\n\t#scrumElementsClick(event)\n\t{\n\t\tif (!this.#scrumMethodology)\n\t\t{\n\t\t\tthis.#scrumMethodology = new Methodology({\n\t\t\t\tgroupId: this.#getParam('entityId'),\n\t\t\t\tteamSpeedPath: this.#getParam('pathToScrumTeamSpeed'),\n\t\t\t\tburnDownPath: this.#getParam('pathToScrumBurnDown'),\n\t\t\t\tpathToTask: this.#getParam('pathToGroupTasksTask'),\n\t\t\t});\n\t\t}\n\n\t\tthis.#scrumMethodology.showMenu(event.target);\n\t}\n\n\t#userVideoCallClick(event)\n\t{\n\n\t}\n\n\t#inviteClick()\n\t{\n\t\tconst invite = this.#getInvite();\n\n\t\tif (invite.isShown())\n\t\t{\n\t\t\tinvite.close();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tinvite.show();\n\t\t}\n\t}\n\n\t#getInvite(): Invite\n\t{\n\t\tif (!this.#invite)\n\t\t{\n\t\t\tthis.#invite = new Invite({\n\t\t\t\tnode: this.#inviteNode,\n\t\t\t\tgroupMembersList: this.#getParam('groupMembersList'),\n\t\t\t});\n\n\t\t\tthis.#invite.subscribe('onClose', this.#onInviteClose.bind(this));\n\t\t\tthis.#invite.subscribe('usersSelected', this.#onUsersSelected.bind(this));\n\t\t}\n\n\t\treturn this.#invite;\n\t}\n\n\t#onUsersSelected(event)\n\t{\n\t\tconst users = event.data;\n\t\tthis.#inviteUsers(users);\n\t}\n\n\t#onInviteClose()\n\t{\n\t\tif (this.#getParam('isNew') && !this.#discussionAhaMomentShown)\n\t\t{\n\t\t\tconst startDiscussionButton = document.querySelector('[data-id=spaces-discussions-add-main-btn]');\n\t\t\tif (!startDiscussionButton)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.#showSpotlight(startDiscussionButton, {\n\t\t\t\ttitle: Loc.getMessage('SN_SPACES_DISCUSSION_AHA_MOMENT_TITLE'),\n\t\t\t\ttext: Loc.getMessage('SN_SPACES_DISCUSSION_AHA_MOMENT_TEXT'),\n\t\t\t});\n\n\t\t\tthis.#discussionAhaMomentShown = true;\n\t\t}\n\t}\n\n\t#showSpotlight(node, ahaMoment = null)\n\t{\n\t\tRuntime.loadExtension('spotlight').then(() => {\n\t\t\tconst spotlight = new BX.SpotLight({\n\t\t\t\ttargetElement: node,\n\t\t\t\ttargetVertex: 'middle-center',\n\t\t\t});\n\n\t\t\tDom.addClass(node, '--active');\n\t\t\tspotlight.bindEvents({\n\t\t\t\tonTargetEnter: () => {\n\t\t\t\t\tDom.removeClass(node, '--active');\n\t\t\t\t\tspotlight.close();\n\t\t\t\t},\n\t\t\t});\n\n\t\t\tspotlight.setColor('#2fc6f6');\n\t\t\tspotlight.show();\n\n\t\t\tif (ahaMoment)\n\t\t\t{\n\t\t\t\tthis.#showAhaMoment(node, {\n\t\t\t\t\ttitle: ahaMoment.title,\n\t\t\t\t\ttext: ahaMoment.text,\n\t\t\t\t\tspotlight,\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\tasync #showAhaMoment(node, params)\n\t{\n\t\tconst { Guide } = await Runtime.loadExtension('ui.tour');\n\n\t\tconst guide = new Guide({\n\t\t\tsimpleMode: true,\n\t\t\tonEvents: true,\n\t\t\tsteps: [\n\t\t\t\t{\n\t\t\t\t\ttarget: node,\n\t\t\t\t\ttitle: params.title,\n\t\t\t\t\ttext: params.text,\n\t\t\t\t\tposition: 'bottom',\n\t\t\t\t\tcondition: {\n\t\t\t\t\t\ttop: true,\n\t\t\t\t\t\tbottom: false,\n\t\t\t\t\t\tcolor: 'primary',\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t],\n\t\t});\n\n\t\tguide.showNextStep();\n\n\t\tconst guidePopup = guide.getPopup();\n\t\tguidePopup.setWidth(380);\n\t\tguidePopup.getContentContainer().style.paddingRight = getComputedStyle(guidePopup.closeIcon)['width'];\n\t\tguidePopup.setAngle({ offset: node.offsetWidth / 2 - 5 });\n\t\tguidePopup.subscribe('onClose', () => params.spotlight.close());\n\t\tguidePopup.setAutoHide(true);\n\t}\n\n\t#inviteUsers(users)\n\t{\n\t\tconst invited = users.filter((userId) => !this.#groupInvitedList.includes(userId));\n\t\tconst removed = this.#groupInvitedList.filter((userId) => !users.includes(userId));\n\t\tthis.#groupInvitedList = users;\n\n\t\t// eslint-disable-next-line promise/catch-or-return\n\t\tMenuAjax.inviteUsers(this.#getParam('entityId'), users).then(\n\t\t\t() => {\n\t\t\t\tBX.UI.Notification.Center.notify({\n\t\t\t\t\tcontent: this.#getInvitationMessage(invited, removed),\n\t\t\t\t});\n\t\t\t},\n\t\t\t(error) => console.log(error),\n\t\t);\n\t}\n\n\t#getInvitationMessage(invited, removed)\n\t{\n\t\tconst hasInvited = invited.length > 0;\n\t\tconst hasRemoved = removed.length > 0;\n\n\t\tif (hasInvited && !hasRemoved)\n\t\t{\n\t\t\treturn Loc.getMessage('SN_SPACES_INVITATIONS_SENT');\n\t\t}\n\n\t\tif (!hasInvited && hasRemoved)\n\t\t{\n\t\t\treturn Loc.getMessage('SN_SPACES_INVITATIONS_REMOVED');\n\t\t}\n\n\t\tif (hasInvited && hasRemoved)\n\t\t{\n\t\t\treturn Loc.getMessage('SN_SPACES_INVITATIONS_CHANGED');\n\t\t}\n\n\t\treturn Loc.getMessage('SN_SPACES_INVITATIONS_SENT');\n\t}\n\n\t#settingsClick(event)\n\t{\n\t\tif (!this.#settings)\n\t\t{\n\t\t\tthis.#settings = new Settings({\n\t\t\t\tbindElement: event.target,\n\t\t\t\ttype: this.#getParam('type'),\n\t\t\t\tentityId: this.#getParam('entityId'),\n\t\t\t\tlogo: this.#getParam('logo'),\n\t\t\t\tchat: this.#chat,\n\t\t\t\trouter: this.#router,\n\t\t\t});\n\t\t}\n\n\t\tthis.#settings.show();\n\t}\n\n\t#userSettingsClick(event)\n\t{\n\n\t}\n}\n"],"names":["PullRequests","groupId","setEventNamespace","parseInt","workgroup_user_add","bind","workgroup_user_delete","workgroup_user_update","EventEmitter","data","params","GROUP_ID","emit","MenuAjax","BX","ajax","runAction","select","then","response","name","NAME","isPin","IS_PIN","privacyCode","PRIVACY_CODE","isSubscribed","USER_DATA","IS_SUBSCRIBED","numberOfMembers","NUMBER_OF_MEMBERS","listOfMembers","LIST_OF_MEMBERS","groupMembersList","GROUP_MEMBERS_LIST","actions","canEdit","ACTIONS","EDIT","canInvite","INVITE","counters","COUNTERS","error","console","log","spaceId","users","CreateChatFooter","dialog","options","_classPrivateFieldInitSpec","createChatButton","cancelButton","handleDialogDestroy","handleSelectedItemsUpdated","bindEvents","containerClass","Tag","render","renderCreateChatButton","renderCancelButton","Button","text","Loc","getMessage","round","color","ButtonColor","PRIMARY","size","ButtonSize","SMALL","events","click","createChatButtonClickHandler","setDisabled","getContainer","userIds","getDialog","getSelectedItems","map","item","getId","setWaiting","createChatAction","chatId","Runtime","loadExtension","Messenger","openChat","deselectAll","hide","LIGHT_BORDER","cancelButtonClickHandler","subscribe","unsubscribe","length","unbindEvents","DefaultFooter","UserSelector","_classPrivateMethodInitSpec","bindElement","title","preselectedItems","onClose","onLoad","createChat","UserSelectorDialogHeader","BaseHeader","Dialog","targetNode","width","dropdownMode","header","enableSearch","context","entities","id","substituteEntityId","footerInviteIntranetOnly","showInvitationFooter","projectId","searchTabOptions","stubOptions","subtitle","onHide","setFooter","_classPrivateMethodGet","loadState","load","event","slider","target","Dom","style","getZindex","entitySelectorId","document","getElementById","Chat","entityType","entityId","analyticsLabel","entity","startVideoCall","chatLockCounter","errors","code","node","show","userSelector","groupDataPromise","reload","membersIds","filter","user","isMember","getItems","forEach","isHidden","includes","setHidden","isSelected","deselect","Invite","getDialogPopup","isShown","getPopup","setAngle","position","offset","offsetWidth","getComputedStyle","marginLeft","arr1","arr2","sort","toString","isNotInInvited","invited","userId","Logo","logo","iconClass","iconStyle","result","type","MenuRouter","SidePanel","Instance","pathToFeatures","pathToUsers","pathToInvite","open","loader","mode","availableModes","all","out","uri","Uri","setQueryParams","cacheable","ChatAction","videoCallId","openChatId","createChatId","Event","querySelector","Follow","follow","followId","iconNode","removeClass","addClass","nameNode","textContent","isFollowed","GroupPrivacy","close","Popup","content","autoHide","angle","closeIcon","closeByEsc","overlay","padding","animation","openActiveClass","closedActiveClass","secretActiveClass","openId","closedId","secretId","Info","moreBtnId","getClass","input","focus","setSelectionRange","value","Text","encode","uiClasses","key","blur","stopImmediatePropagation","toUpperCase","baseEvent","getData","Members","amount","list","inviteBtnId","inviteNode","isEqualNode","groupedMembers","visibleAmount","moderators","slice","owner","member","outCounter","workgroup_requests_out","inCounter","workgroup_requests_in","outId","inId","renderOut","renderIn","crownIconSrc","photo","encodeURI","members","isOwner","isModerator","push","Pin","pin","pinId","isPinned","Roles","rolesId","GroupSettings","Cache","MemoryCache","set","param","get","getGroupData","PopupComponentsMaker","html","backgroundColor","withoutBackground","Promise","resolve","groupData","info","setAutoHide","chat","openGroupUsers","openGroupInvite","layoutMembers","replaceWith","roles","openGroupFeatures","unDisable","action","groupIdList","fields","VISIBLE","OPENED","EXTERNAL","UserSettings","Settings","router","update","VideoCall","toggle","menu","Menu","addMenuItem","dataset","className","onclick","delimiter","container","Type","isDomNode","Error","logoClass","append","pullRequests","Pull","chevronDown","setTimeout","Meetings","showMenu","Methodology","teamSpeedPath","burnDownPath","pathToTask","invite","startDiscussionButton","ahaMoment","spotlight","SpotLight","targetElement","targetVertex","onTargetEnter","setColor","Guide","guide","simpleMode","onEvents","steps","condition","top","bottom","showNextStep","guidePopup","setWidth","getContentContainer","paddingRight","removed","inviteUsers","UI","Notification","Center","notify","hasInvited","hasRemoved"],"mappings":";;;;;;;;;AAAA,CAAgD;CAAA;AAEhD,KAAaA,YAAY;GAAA;GAIxB,sBAAYC,OAAe,EAC3B;KAAA;KAAA;KACC;KAAQ;KAAA;OAAA;OAAA;;KAER,MAAKC,iBAAiB,CAAC,2CAA2C,CAAC;KAEnE,uFAAgBC,QAAQ,CAACF,OAAO,EAAE,EAAE,CAAC;KAAC;;GACtC;KAAA;KAAA,8BAGD;OACC,OAAO,eAAe;;;KACtB;KAAA,yBAGD;OACC,OAAO;SACNG,kBAAkB,EAAE,2BAAI,qBAASC,IAAI,CAAC,IAAI,CAAC;SAC3CC,qBAAqB,EAAE,2BAAI,qBAASD,IAAI,CAAC,IAAI,CAAC;SAC9CE,qBAAqB,EAAE,2BAAI,qBAASF,IAAI,CAAC,IAAI;QAC7C;;;GACD;CAAA,EAzBgCG,6BAAY;CAkC7C,kBAPQC,IAAI,EACZ;GACC,IAAIN,QAAQ,CAACM,IAAI,CAACC,MAAM,CAACC,QAAQ,EAAE,EAAE,CAAC,uCAAK,IAAI,WAAS,EACxD;KACC,IAAI,CAACC,IAAI,CAAC,QAAQ,CAAC;;CAErB;;KCnCYC,QAAQ;GAAA;KAAA;;GAAA;KAAA;KAAA,6BAEAZ,OAAe,EACnC;OACC,OAAOa,EAAE,CAACC,IAAI,CAACC,SAAS,CAAC,iCAAiC,EAAE;SAC1DP,IAAI,EAAE;WACLC,MAAM,EAAE;aACPO,MAAM,EAAE,CACP,SAAS,EACT,mBAAmB,EACnB,iBAAiB,EACjB,oBAAoB,EACpB,cAAc,EACd,KAAK,EACL,WAAW,EACX,UAAU,CACV;aACDhB,OAAO,EAAPA;;;QAGF,CAAC,CACDiB,IAAI,CAAC,UAACC,QAAQ,EAAK;SAAA;SACnB,OAAO;WACNC,IAAI,EAAED,QAAQ,CAACV,IAAI,CAACY,IAAI;WACxBC,KAAK,EAAEH,QAAQ,CAACV,IAAI,CAACc,MAAM;WAC3BC,WAAW,EAAEL,QAAQ,CAACV,IAAI,CAACgB,YAAY;WACvCC,YAAY,2BAAEP,QAAQ,CAACV,IAAI,CAACkB,SAAS,0DAAvB,sBAAyBC,aAAa;WACpDC,eAAe,EAAEV,QAAQ,CAACV,IAAI,CAACqB,iBAAiB;WAChDC,aAAa,EAAEZ,QAAQ,CAACV,IAAI,CAACuB,eAAe;WAC5CC,gBAAgB,EAAEd,QAAQ,CAACV,IAAI,CAACyB,kBAAkB;WAClDC,OAAO,EAAE;aACRC,OAAO,2BAAEjB,QAAQ,CAACV,IAAI,CAAC4B,OAAO,0DAArB,sBAAuBC,IAAI;aACpCC,SAAS,4BAAEpB,QAAQ,CAACV,IAAI,CAAC4B,OAAO,2DAArB,uBAAuBG;YAClC;WACDC,QAAQ,EAAEtB,QAAQ,CAACV,IAAI,CAACiC;UACxB;QACD,CAAC,SACI,CAAC,UAACC,KAAK;SAAA,OAAKC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;SAAC;;;KACtC;KAAA,4BAEkBG,OAAe,EAAEC,KAAe,EACnD;OACC,OAAOjC,EAAE,CAACC,IAAI,CAACC,SAAS,CAAC,gDAAgD,EAAE;SAC1EP,IAAI,EAAE;WACLqC,OAAO,EAAPA,OAAO;WACPC,KAAK,GAAG,CAAC,wCAAKA,KAAK;;QAEpB,CAAC;;;GACF;CAAA;;;;CC/CF;CAAA;AADA,CAG6D;CAAA,IAExCC,gBAAgB;GAAA;GAOpC,0BAAYC,MAAc,EAAEC,OAAkC,EAC9D;KAAA;KAAA;KACC,8GAAMD,MAAM,EAAEC,OAAO;KAAEC;OAAA;OAAA;;KAEvB,uFAAgB;OACfC,gBAAgB,EAAE,IAAI;OACtBC,YAAY,EAAE;MACd;KAED,MAAKC,mBAAmB,GAAG,MAAKA,mBAAmB,CAACjD,IAAI,2CAAM;KAC9D,MAAKkD,0BAA0B,GAAG,MAAKA,0BAA0B,CAAClD,IAAI,2CAAM;KAE5E,MAAKmD,UAAU,EAAE;KAAC;;GAClB;KAAA;KAAA,6BAGD;OACC,IAAI,CAACN,OAAO,CAACO,cAAc,GAAG,mCAAmC;OAEjE,OAAOC,aAAG,CAACC,MAAM,+IAEb,IAAI,CAACC,sBAAsB,EAAE,EAC7B,IAAI,CAACC,kBAAkB,EAAE;;;KAG7B;KAAA,yCAGD;OACC,sCAAI,YAAUT,gBAAgB,GAAG,IAAIU,iBAAM,CAAC;SAC3CC,IAAI,EAAEC,aAAG,CAACC,UAAU,CAAC,+BAA+B,CAAC;SACrDC,KAAK,EAAE,IAAI;SACXC,KAAK,EAAEC,sBAAW,CAACC,OAAO;SAC1BC,IAAI,EAAEC,qBAAU,CAACC,KAAK;SACtBC,MAAM,EAAE;WACPC,KAAK,EAAE,IAAI,CAACC,4BAA4B,CAACtE,IAAI,CAAC,IAAI;;QAEnD,CAAC;OAEF,sCAAI,YAAU+C,gBAAgB,CAACwB,WAAW,CAAC,IAAI,CAAC;OAEhD,OAAO,sCAAI,YAAUxB,gBAAgB,CAACyB,YAAY,EAAE;;;KACpD;KAAA,+CAGD;OAAA;OACC,IAAMC,OAAO,GAAG,IAAI,CAACC,SAAS,EAAE,CAACC,gBAAgB,EAAE,CAACC,GAAG,CAAC,UAACC,IAAI;SAAA,OAAKA,IAAI,CAACC,KAAK,EAAE;SAAC;OAE/E,sCAAI,YAAU/B,gBAAgB,CAACgC,UAAU,CAAC,IAAI,CAAC;OAC/C,IAAI,CAACC,gBAAgB,CAACP,OAAO,CAAC,CAAC5D,IAAI;SAAA,kFAAC,iBAAOC,QAAQ;WAAA;WAAA;aAAA;eAAA;iBAC5CmE,MAAM,GAAG,MAAM,GAAGnE,QAAQ,CAACV,IAAI;iBAAA;iBAAA,OAET8E,iBAAO,CAACC,aAAa,CAAC,kBAAkB,CAAC;eAAA;iBAAA;iBAA7DC,SAAS,yBAATA,SAAS;iBACjBA,SAAS,CAACC,QAAQ,CAACJ,MAAM,CAAC;iBAE1B,wCAAI,YAAUlC,gBAAgB,CAACgC,UAAU,CAAC,KAAK,CAAC;iBAChD,MAAI,CAACL,SAAS,EAAE,CAACY,WAAW,EAAE;iBAC9B,MAAI,CAACZ,SAAS,EAAE,CAACa,IAAI,EAAE;eAAC;eAAA;iBAAA;;;UACxB;SAAA;WAAA;;WAAC;;;KACF;KAAA,iCAEgBd,OAAO,EACxB;OACC,OAAOhE,EAAE,CAACC,IAAI,CAACC,SAAS,CAAC,+BAA+B,EAAE;SACzDP,IAAI,EAAE;WACLqE,OAAO,EAAPA;;QAED,CAAC;;;KACF;KAAA,qCAGD;OACC,sCAAI,YAAUzB,YAAY,GAAG,IAAIS,iBAAM,CAAC;SACvCC,IAAI,EAAEC,aAAG,CAACC,UAAU,CAAC,+BAA+B,CAAC;SACrDC,KAAK,EAAE,IAAI;SACXC,KAAK,EAAEC,sBAAW,CAACyB,YAAY;SAC/BvB,IAAI,EAAEC,qBAAU,CAACC,KAAK;SACtBC,MAAM,EAAE;WACPC,KAAK,EAAE,IAAI,CAACoB,wBAAwB,CAACzF,IAAI,CAAC,IAAI;;QAE/C,CAAC;OAEF,OAAO,sCAAI,YAAUgD,YAAY,CAACwB,YAAY,EAAE;;;KAChD;KAAA,2CAGD;OACC,IAAI,CAACE,SAAS,EAAE,CAACa,IAAI,EAAE;;;KACvB;KAAA,6BAGD;OACC,IAAI,CAACb,SAAS,EAAE,CAACgB,SAAS,CAAC,WAAW,EAAE,IAAI,CAACzC,mBAAmB,CAAC;OACjE,IAAI,CAACyB,SAAS,EAAE,CAACgB,SAAS,CAAC,eAAe,EAAE,IAAI,CAACxC,0BAA0B,CAAC;OAC5E,IAAI,CAACwB,SAAS,EAAE,CAACgB,SAAS,CAAC,iBAAiB,EAAE,IAAI,CAACxC,0BAA0B,CAAC;;;KAC9E;KAAA,+BAGD;OACC,IAAI,CAACwB,SAAS,EAAE,CAACiB,WAAW,CAAC,WAAW,EAAE,IAAI,CAAC1C,mBAAmB,CAAC;OACnE,IAAI,CAACyB,SAAS,EAAE,CAACiB,WAAW,CAAC,eAAe,EAAE,IAAI,CAACzC,0BAA0B,CAAC;OAC9E,IAAI,CAACwB,SAAS,EAAE,CAACiB,WAAW,CAAC,iBAAiB,EAAE,IAAI,CAACzC,0BAA0B,CAAC;;;KAChF;KAAA,6CAGD;OACC,IAAI,CAAC,sCAAI,YAAUH,gBAAgB,EACnC;SACC;;OAGD,sCAAI,YAAUA,gBAAgB,CAACwB,WAAW,CAAC,IAAI,CAACG,SAAS,EAAE,CAACC,gBAAgB,EAAE,CAACiB,MAAM,KAAK,CAAC,CAAC;;;KAC5F;KAAA,sCAGD;OACC,IAAI,CAACC,YAAY,EAAE;;;GACnB;CAAA,EA5H4CC,+BAAa;;;;;;;ACL3D,CAGoD;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;AAEpD,KAAaC,YAAY;GAAA;GAUxB,sBAAYlD,OAAO,EACnB;KAAA;KAAA;KAAA;KACC,0GAAMA,OAAO;KAAEmD;KAAAA;KAAAA;KAAAlD;OAAA;OAAA;;KAAAA;OAAA;OAAA;;KAAAA;OAAA;OAAA;;KAAAA;OAAA;OAAA;;KAAAA;OAAA;OAAA;;KAAAA;OAAA;OAAA;;KAAAA;OAAA;OAAA;;KAEf,MAAKjD,iBAAiB,CAAC,mCAAmC,CAAC;KAE3D,2FAAoBgD,OAAO,CAACoD,WAAW;KAEvC,qFAAcpD,OAAO,CAACqD,KAAK;KAE3B,yHAAyBrD,OAAO,CAACsD,gBAAgB,yEAAI,EAAE;KAEvD,2GAAgBtD,OAAO,CAACuD,OAAO,+DAAK,YAAM,EAAE;KAC5C,yGAAevD,OAAO,CAACwD,MAAM,6DAAK,YAAM,EAAE;KAE1C,6GAAgBxD,OAAO,CAACjD,OAAO,+DAAI,CAAC;KACpC,iHAAmBiD,OAAO,CAACyD,UAAU,qEAAI,KAAK;KAAC;;GAC/C;KAAA;KAAA,4BAGD;OACC,IAAI,CAAC,IAAI,CAAC1D,MAAM,EAChB;SACC,IAAMsD,KAAK,qCAAG,IAAI,SAAO;SAAC,IAEpBK,wBAAwB;WAAA;WAAA;aAAA;aAAA;;WAAA;aAAA;aAAA,yBAG7B;eACC,OAAOlD,aAAG,CAACC,MAAM,yKAC+B4C,KAAK;;;WAErD;WAPqCM,4BAAU;SAUjD,IAAI,CAAC5D,MAAM,GAAG,IAAI6D,wBAAM,CAAC;WACxBC,UAAU,oCAAE,IAAI,eAAa;WAC7BC,KAAK,EAAE,GAAG;WACVC,YAAY,EAAE,IAAI;WAClBC,MAAM,EAAEN,wBAAwB;WAChCO,YAAY,EAAE,IAAI;WAClBC,OAAO,EAAE,sBAAsB;WAC/BZ,gBAAgB,oCAAE,IAAI,oBAAkB;WACxCa,QAAQ,EAAE,CACT;aACCC,EAAE,EAAE,MAAM;aACVC,kBAAkB,EAAE,sCAAI,iBAAe,cAAc,GAAG,IAAI;aAC5DrE,OAAO,EAAE;eACRsE,wBAAwB,EAAE,IAAI;eAC9BC,oBAAoB,EAAE,mCAAC,IAAI,cAAY;eACvCC,SAAS,oCAAE,IAAI;;YAEhB,CACD;WACDC,gBAAgB,EAAE,sCAAI,kBAAgB;aACrCC,WAAW,EAAE;eACZrB,KAAK,EAAEvC,aAAG,CAACC,UAAU,CAAC,gDAAgD,CAAC;eACvE4D,QAAQ,EAAE7D,aAAG,CAACC,UAAU,CAAC,+CAA+C;;YAEzE;WACDQ,MAAM,EAAE;aACPqD,MAAM,oCAAE,IAAI,WAAS;aACrBpB,MAAM,oCAAE,IAAI,UAAQ;aACpB,kBAAkB,oCAAE,IAAI;;UAEzB,CAAC;SAEF,sCAAI,IAAI,gBACR;WACC,IAAI,CAACzD,MAAM,CAAC8E,SAAS,CAAC/E,gBAAgB,CAAC;;SAGxCgF,6BAAI,8CAAJ,IAAI;;OAGL,OAAO,IAAI,CAAC/E,MAAM;;;KAClB;KAAA,yBAGD;OACC,IAAI,CAACA,MAAM,CAACgF,SAAS,GAAG,QAAQ;OAChC,IAAI,CAAChF,MAAM,CAACiF,IAAI,EAAE;;;GAClB;CAAA,EA5FgC1H,6BAAY;CA4H7C,8BA7BA;GAAA;GACCA,6BAAY,CAACuF,SAAS,CAAC,8BAA8B,EAAE,UAACoC,KAAK,EAAK;KACjE,IAAMC,MAAM,GAAGD,KAAK,CAACE,MAAM;KAE3B,6BAAI,MAAI,8BAAJ,MAAI,GACR;OACCC,aAAG,CAACC,KAAK,0BAAC,MAAI,8BAAJ,MAAI,GAAc,QAAQ,EAAEH,MAAM,CAACI,SAAS,EAAE,CAAC;;IAE1D,CAAC;GAEFhI,6BAAY,CAACuF,SAAS,CAAC,wCAAwC,EAAE,UAACoC,KAAK,EAAK;KAC3E,IAAMC,MAAM,GAAGD,KAAK,CAACE,MAAM;KAE3B,IAAIL,+BAAI,0CAAJ,MAAI,EAAiBI,MAAM,8BAAK,MAAI,8BAAJ,MAAI,CAAY,EACpD;OACCE,aAAG,CAACC,KAAK,0BAAC,MAAI,8BAAJ,MAAI,GAAc,QAAQ,EAAE,EAAE,CAAC;;IAE1C,CAAC;CACH;CAAC,0BAEeH,MAAM,EACtB;GAAA;GACC,OAAO,yBAAAA,MAAM,CAAClF,OAAO,CAACzC,IAAI,yDAAnB,qBAAqBgI,gBAAgB,MAAK,IAAI,CAACxF,MAAM,CAACkC,KAAK,EAAE;CACrE;CAAC,sBAGD;GACC,OAAOuD,QAAQ,CAACC,cAAc,CAAC,WAAW,CAAC;CAC5C;;;;;;AChID,CAE6D;CAAA;CAAA;CAAA;AAQ7D,KAAaC,IAAI;GAMhB,cAAYlI,MAAc,EAC1B;KAAA;KAAA2F;KAAAlD;OAAA;OAAA;;KAAAA;OAAA;OAAA;;KAAAA;OAAA;OAAA;;KACC,sCAAI,eAAezC,MAAM,CAACmI,UAAU;KACpC,sCAAI,aAAanI,MAAM,CAACoI,QAAQ;KAChC,sCAAI,qBAAqBpI,MAAM,CAACuB,gBAAgB;;GAChD;KAAA;KAAA,iCAGD;OAAA;;OAEClB,cAAI,CAACC,SAAS,CAAC,yCAAyC,EAAE;SACzDP,IAAI,EAAE;WACLoI,UAAU,EAAE,sCAAI,mBAAiB,OAAO,GAAG,WAAW,GAAG,MAAM;WAC/DC,QAAQ,oCAAE,IAAI;UACd;SACDC,cAAc,EAAE;WACfC,MAAM,oCAAE,IAAI;;QAEb,CAAC,CAAC9H,IAAI,CAAC,UAACC,QAAQ,EAAK;SACrB,IAAIA,QAAQ,CAACV,IAAI,EACjB;WACCgF,mBAAS,CAACwD,cAAc,eAAQ9H,QAAQ,CAACV,IAAI,GAAI,IAAI,CAAC;;SAGvD,KAAI,CAACyI,eAAe,GAAG,CAAC;QACxB,EAAE,UAAC/H,QAAQ,EAAK;SAChB,IACCA,QAAQ,CAACgI,MAAM,CAAC,CAAC,CAAC,CAACC,IAAI,KAAK,YAAY,IACrC,KAAI,CAACF,eAAe,GAAG,CAAC,EAE5B;WACC,KAAI,CAACA,eAAe,EAAE;WACtB,KAAI,CAACD,cAAc,EAAE;;QAEtB,CAAC;;;KACF;KAAA,2BAGD;OAAA;;OAEClI,cAAI,CAACC,SAAS,CAAC,gCAAgC,EAAE;SAChDP,IAAI,EAAE;WACLoI,UAAU,EAAE,sCAAI,mBAAiB,OAAO,GAAG,WAAW,GAAG,MAAM;WAC/DC,QAAQ,oCAAE,IAAI;UACd;SACDC,cAAc,EAAE;WACfC,MAAM,oCAAE,IAAI;;QAEb,CAAC,CAAC9H,IAAI,CAAC,UAACC,QAAQ,EAAK;SACrB,IAAIA,QAAQ,CAACV,IAAI,EACjB;WACCgF,mBAAS,CAACC,QAAQ,eAAQvF,QAAQ,CAACgB,QAAQ,CAACV,IAAI,EAAE,EAAE,CAAC,EAAG;;SAGzD,MAAI,CAACyI,eAAe,GAAG,CAAC;QACxB,EAAE,UAAC/H,QAAQ,EAAK;SAChB,IAAIA,QAAQ,CAACgI,MAAM,CAAC,CAAC,CAAC,CAACC,IAAI,KAAK,YAAY,IAAI,MAAI,CAACF,eAAe,GAAG,CAAC,EACxE;WACC,MAAI,CAACA,eAAe,EAAE;WACtB,MAAI,CAACxD,QAAQ,EAAE;;QAEhB,CAAC;;;KACF;KAAA,2BAEU2D,IAAI,EACf;OACC,IAAI,CAACtE,SAAS,CAACsE,IAAI,CAAC,CAACC,IAAI,EAAE;;;KAC3B;KAAA,0BAESD,IAAI,EACd;OACC,IAAI,CAAC,IAAI,CAACE,YAAY,EACtB;SACC,IAAI,CAACA,YAAY,GAAG,IAAInD,YAAY,CAAC;WACpCE,WAAW,EAAE+C,IAAI;WACjB1C,UAAU,EAAE,IAAI;WAChBJ,KAAK,EAAEvC,aAAG,CAACC,UAAU,CAAC,uBAAuB,CAAC;WAC9CyC,MAAM,EAAEsB,6BAAI,2CAAoB3H,IAAI,CAAC,IAAI,CAAC;WAC1CJ,OAAO,oCAAE,IAAI;UACb,CAAC;;OAGH,OAAO,IAAI,CAACsJ,YAAY,CAACxE,SAAS,EAAE;;;KACpC;KAAA,uBAEMyE,gBAAgB,EACvB;OAAA;OACCA,gBAAgB,CAACtI,IAAI,CAAC,UAACC,QAAQ,EAAK;SAAA;SACnC,wCAAI,qBAAqBA,QAAQ,CAACc,gBAAgB;SAElD,6BAAI,CAACsH,YAAY,wDAAjB,oBAAmBE,MAAM,EAAE;QAC3B,CAAC;;;GACF;CAAA;CAmBD,+BAhBA;GACC,IAAMC,UAAU,GAAG,sCAAI,qBACrBC,MAAM,CAAC,UAACC,IAAI;KAAA,OAAKA,IAAI,CAACC,QAAQ;KAAC,CAC/B5E,GAAG,CAAC,UAACC,IAAI;KAAA,OAAK/E,QAAQ,CAAC+E,IAAI,CAACoC,EAAE,CAAC;KAAC;GAGlC,IAAI,CAACvC,SAAS,EAAE,CAAC+E,QAAQ,EAAE,CAACC,OAAO,CAAC,UAAC7E,IAAI,EAAK;KAC7C,IAAM8E,QAAQ,GAAG,CAACN,UAAU,CAACO,QAAQ,CAAC/E,IAAI,CAACC,KAAK,EAAE,CAAC;KACnDD,IAAI,CAACgF,SAAS,CAACF,QAAQ,CAAC;KAExB,IAAIA,QAAQ,IAAI9E,IAAI,CAACiF,UAAU,EAAE,EACjC;OACCjF,IAAI,CAACkF,QAAQ,EAAE;;IAEhB,CAAC;CACH;;;;;;AC9HD,CAE6D;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;AAE7D,KAAaC,MAAM;GAAA;GAMlB,gBAAYnH,OAAO,EACnB;KAAA;KAAA;KACC,oGAAMA,OAAO;KAAEmD;KAAAA;KAAAA;KAAAA;KAAAA;KAAAA;KAAAlD;OAAA;OAAA;;KAAAA;OAAA;OAAA;;KAAAA;OAAA;OAAA;;KAEf,MAAKjD,iBAAiB,CAAC,6BAA6B,CAAC;KAErD,oFAAagD,OAAO,CAACmG,IAAI;KACzB,mPAA0CnG,OAAO,CAACjB,gBAAgB;KAClE,6PAA+CiB,OAAO,CAACjB,gBAAgB;KAAE;;GACzE;KAAA;KAAA,uBAGD;OACC,IAAI,CAAC8C,SAAS,EAAE,CAACuE,IAAI,EAAE;;;KACvB;KAAA,wBAGD;OACC,IAAI,CAACvE,SAAS,EAAE,CAACa,IAAI,EAAE;;;KACvB;KAAA,0BAmBD;OACC,IAAI,CAAC0E,cAAc,EAAE,CAACC,OAAO,EAAE;;;KAC/B;KAAA,iCAGD;OACC,OAAO,IAAI,CAACxF,SAAS,EAAE,CAACyF,QAAQ,EAAE;;;KAClC;KAAA,4BAGD;OACC,IAAI,CAAC,IAAI,CAACvH,MAAM,EAChB;SACC,IAAMsG,YAAY,GAAG,IAAInD,YAAY,CAAC;WACrCE,WAAW,oCAAE,IAAI,QAAM;WACvBC,KAAK,EAAEvC,aAAG,CAACC,UAAU,CAAC,qCAAqC,CAAC;WAC5DuC,gBAAgB,2BAAE,IAAI,sCAAJ,IAAI,CAAgB;WACtCC,OAAO,EAAEuB,6BAAI,yBAAU3H,IAAI,CAAC,IAAI,CAAC;WACjCqG,MAAM,EAAEsB,6BAAI,uDAA0B3H,IAAI,CAAC,IAAI;UAC/C,CAAC;SAEF,IAAI,CAAC4C,MAAM,GAAGsG,YAAY,CAACxE,SAAS,EAAE;SAEtC,IAAI,CAAC9B,MAAM,CAACuH,QAAQ,EAAE,CAACC,QAAQ,CAAC;WAC/BC,QAAQ,EAAE,KAAK;WACfC,MAAM,EAAE,sCAAI,SAAOC,WAAW,GAAGzK,QAAQ,CAAC0K,gBAAgB,mCAAC,IAAI,SAAO,CAACC,UAAU;UACjF,CAAC;;OAGH,OAAO,IAAI,CAAC7H,MAAM;;;KAClB;KAAA,uBAEMuG,gBAAgB,EACvB;OAAA;OACCA,gBAAgB,CAACtI,IAAI,CAAC,UAACC,QAAQ,EAAK;SACnC,wCAAI,0CAAiB,MAAI,0CAAJ,MAAI,EAAiBA,QAAQ,CAACc,gBAAgB;SACnE,wCAAI,0CAAiB,MAAI,oDAAJ,MAAI,EAAsBd,QAAQ,CAACc,gBAAgB;SAExE+F,+BAAI,4DAAJ,MAAI;QACJ,CAAC;;;GACF;CAAA,EApF0BxH,6BAAY;CAsHvC,qBA1FA;GACC,IAAMuC,KAAK,GAAG,+BAAI,IAAI,CAACE,MAAM,CAAC+B,gBAAgB,EAAE,EAAEC,GAAG,CAAC,UAACC,IAAI;KAAA,OAAKA,IAAI,CAACoC,EAAE;KAAC;GACxE,IAAI,0BAAC,IAAI,0CAAJ,IAAI,EAAiBvE,KAAK,oCAAE,IAAI,iBAAe,EACpD;KACC,sCAAI,iBAAiBA,KAAK;KAC1B,IAAI,CAACnC,IAAI,CAAC,eAAe,oCAAE,IAAI,iBAAe;;GAE/C,IAAI,CAACA,IAAI,CAAC,SAAS,CAAC;CACrB;CAAC,0BAEemK,IAAI,EAAEC,IAAI,EAC1B;GACC,OAAO,+BAAID,IAAI,EAAEE,IAAI,EAAE,CAACC,QAAQ,EAAE,KAAK,+BAAIF,IAAI,EAAEC,IAAI,EAAE,CAACC,QAAQ,EAAE;CACnE;CAAC,qCA8CD;GAAA;KAAA;GACC,oBAAI,CAACjI,MAAM,iDAAX,aAAa6G,QAAQ,EAAE,CAACC,OAAO,CAAC,UAAC7E,IAAI,EAAK;KACzC,IAAMiG,cAAc,GAAG,CAAC,wCAAI,iBAAelB,QAAQ,CAAC/E,IAAI,CAACC,KAAK,EAAE,CAAC;KACjE,IAAM6E,QAAQ,GAAG,wCAAI,iBAAeC,QAAQ,CAAC/E,IAAI,CAACC,KAAK,EAAE,CAAC;KAC1DD,IAAI,CAACgF,SAAS,CAACF,QAAQ,CAAC;KAExB,IAAI,CAACA,QAAQ,IAAImB,cAAc,KAAKjG,IAAI,CAACiF,UAAU,EAAE,EACrD;OACCjF,IAAI,CAACkF,QAAQ,EAAE;;IAEhB,CAAC;CACH;CAAC,0BAEerH,KAAK,EACrB;GACC,OAAOA,KAAK,CACV4G,MAAM,CAAC,UAACC,IAAI;KAAA,OAAKA,IAAI,CAACwB,OAAO;KAAC,CAC9BnG,GAAG,CAAC,UAAC2E,IAAI;KAAA,OAAKzJ,QAAQ,CAACyJ,IAAI,CAACtC,EAAE,CAAC;KAAC;CACnC;CAAC,+BAEoBvE,KAAK,EAC1B;GACC,OAAOA,KAAK,CACV4G,MAAM,CAAC,UAACC,IAAI;KAAA,OAAK,CAACA,IAAI,CAACwB,OAAO;KAAC,CAC/BnG,GAAG,CAAC,UAAC2E,IAAI;KAAA,OAAKzJ,QAAQ,CAACyJ,IAAI,CAACtC,EAAE,CAAC;KAAC;CACnC;CAAC,0BAGD;GACC,OAAO,sCAAI,iBAAerC,GAAG,CAAC,UAACoG,MAAM;KAAA,OAAK,CAAC,MAAM,EAAElL,QAAQ,CAACkL,MAAM,CAAC,CAAC;KAAC;CACtE;;;;;;;ACzHD,CAAgC;CAAA;CAAA;AAOhC,KAAaC,IAAI;GAIhB,cAAYC,IAAc,EAC1B;KAAA;KAAAlF;KAAAA;KAAAlD;OAAA;OAAA;;KACC,sCAAI,SAASoI,IAAI;;GACjB;KAAA;KAAA,yBAGD;OACC,IAAMC,SAAS,4BAAG,IAAI,sCAAJ,IAAI,CAAgB;OACtC,IAAMC,SAAS,4BAAG,IAAI,sCAAJ,IAAI,CAAgB;OAEtC,OAAO/H,aAAG,CAACC,MAAM,2HAAa6H,SAAS,EAAYC,SAAS;;;KAC5D;KAAA,2BAGD;OACC,IAAIC,MAAM,GAAG,EAAE;OAEf,IAAI,sCAAI,SAAOC,IAAI,KAAK,MAAM,EAC9B;SACC,IAAI,sCAAI,SAAOrE,EAAE,CAACrB,MAAM,GAAG,CAAC,EAC5B;WACCyF,MAAM,6CAAsC,sCAAI,SAAOpE,EAAE,CAAE;UAC3D,MAED;WACCoE,MAAM,GAAG,mCAAmC;;;OAI9C,OAAOA,MAAM;;;GACb;CAAA;CAiBD,0BAdA;GACC,IAAIA,MAAM,GAAG,EAAE;GACf,IAAI,sCAAI,SAAOC,IAAI,KAAK,OAAO,EAC/B;KACCD,MAAM,mCAA4B,sCAAI,SAAOpE,EAAE,8BAA2B;;GAG3E,OAAOoE,MAAM;CACd;CAAC,0BAGD;GACC,OAAO,sCAAI,SAAOC,IAAI,KAAK,OAAO,GAAG,0BAA0B,GAAG,EAAE;CACrE;;;;ACzDD,CAAgC;CAAA;CAAA;CAAA;AAQhC,KAAaC,UAAU;GAQtB,oBAAYlL,MAAc,EAC1B;KAAA;KAAAyC;OAAA;OAAA;;KAAAA;OAAA;OAAA;;KAAAA;OAAA;OAAA;;KAAAA;OAAA;OAAA;;KACC,sCAAI,qBAAqBrC,EAAE,CAAC+K,SAAS,CAACC,QAAQ;KAE9C,sCAAI,mBAAmBpL,MAAM,CAACqL,cAAc;KAC5C,sCAAI,gBAAgBrL,MAAM,CAACsL,WAAW;KACtC,sCAAI,iBAAiBtL,MAAM,CAACuL,YAAY;;GACxC;KAAA;KAAA,oCAGD;OACC,sCAAI,qBAAmBC,IAAI,mCAAC,IAAI,oBAAkB;SACjDlF,KAAK,EAAE,GAAG;SACVmF,MAAM,EAAE;QACR,CAAC;;;KACF;KAAA,+BAEcC,IAA0B,EACzC;OACC,IAAMC,cAAc,GAAG;SACtBC,GAAG,EAAE,SAAS;SACd,MAAI,aAAa;SACjBC,GAAG,EAAE;QACL;OAED,IAAMC,GAAG,GAAG,IAAIC,aAAG,mCAAC,IAAI,gBAAc;OACtCD,GAAG,CAACE,cAAc,CAAC;SAClBN,IAAI,EAAEC,cAAc,CAACD,IAAI;QACzB,CAAC;OAEF,sCAAI,qBAAmBF,IAAI,CAACM,GAAG,CAACtB,QAAQ,EAAE,EAAE;SAC3ClE,KAAK,EAAE,IAAI;SACX2F,SAAS,EAAE,KAAK;SAChBR,MAAM,EAAE;QACR,CAAC;;;KACF;KAAA,kCAGD;OACC,sCAAI,qBAAmBD,IAAI,mCAAC,IAAI,kBAAgB;SAC/ClF,KAAK,EAAE,GAAG;SACVmF,MAAM,EAAE;QACR,CAAC;;;GACF;CAAA;;;AC3DF,KAGaS,UAAU;GAAA;GAEtB,sBACA;KAAA;KAAA;KACC;KAEA,MAAK1M,iBAAiB,CAAC,6CAA6C,CAAC;KAAC;;GACtE;KAAA;KAAA,yBAGD;OAAA;OACC,IAAM2M,WAAW,GAAG,4BAA4B;OAChD,IAAMC,UAAU,GAAG,2BAA2B;OAC9C,IAAMC,YAAY,GAAG,6BAA6B;OAElD,IAAM1D,IAAI,GAAG3F,aAAG,CAACC,MAAM,uuCAGTkJ,WAAW,EAQnB7I,aAAG,CAACC,UAAU,CAAC,mCAAmC,CAAC,EAI3C6I,UAAU,EAQlB9I,aAAG,CAACC,UAAU,CAAC,0BAA0B,CAAC,EAIlC8I,YAAY,EAQpB/I,aAAG,CAACC,UAAU,CAAC,4BAA4B,CAAC,CAIjD;OAED+I,eAAK,CAAC3M,IAAI,CACTgJ,IAAI,CAAC4D,aAAa,qBAAcJ,WAAW,QAAK,EAChD,OAAO,EACP;SAAA,OAAM,MAAI,CAACjM,IAAI,CAAC,WAAW,CAAC;SAC5B;OAEDoM,eAAK,CAAC3M,IAAI,CACTgJ,IAAI,CAAC4D,aAAa,qBAAcH,UAAU,QAAK,EAC/C,OAAO,EACP;SAAA,OAAM,MAAI,CAAClM,IAAI,CAAC,UAAU,CAAC;SAC3B;OAEDoM,eAAK,CAAC3M,IAAI,CACTgJ,IAAI,CAAC4D,aAAa,qBAAcF,YAAY,QAAK,EACjD,OAAO,EACP;SAAA,OAAM,MAAI,CAACnM,IAAI,CAAC,YAAY,CAAC;SAC7B;OAED,OAAOyI,IAAI;;;GACX;CAAA,EA3E8B7I,6BAAY;;;;;;;ACH5C,CACgD;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;AAMhD,KAAa0M,MAAM;GAAA;GAMlB,gBAAYxM,MAAc,EAC1B;KAAA;KAAA;KACC;KAAQ2F;KAAAA;KAAAA;KAAAA;KAAAA;KAAAlD;OAAA;OAAA;;KAAAA;OAAA;OAAA;;KAAAA;OAAA;OAAA;;KAER,MAAKjD,iBAAiB,CAAC,yCAAyC,CAAC;KAEjE,sFAAeQ,MAAM,CAACyM,MAAM;KAC5B,wFAAiB,KAAK;KAEtBnF;KAAmB;;GACnB;KAAA;KAAA,yBAGD;OACC,IAAMoF,QAAQ,GAAG,wBAAwB;OAEzC,IAAM5B,SAAS,GAAG,sCAAI,aAAW,YAAY,GAAG,aAAa;OAE7D,sCAAI,WAAS9H,aAAG,CAACC,MAAM,0eAEVyJ,QAAQ,EAKI5B,SAAS,2BAK7B,IAAI,8BAAJ,IAAI,oCAAW,IAAI;OAKxBwB,eAAK,CAAC3M,IAAI,mCAAC,IAAI,YAAQ,OAAO,EAAE2H,6BAAI,qBAAS3H,IAAI,CAAC,IAAI,CAAC,CAAC;OAExD,yCAAO,IAAI;;;KACX;KAAA,4BAGD;OACC,sCAAI,aAAa,KAAK;;;GACtB;CAAA,EAjD0BG,6BAAY;CA0GvC,oBAtDA;GACC,sCAAI,IAAI,cACR;KACC;;GAGD,sCAAI,aAAa,IAAI;GAErB,sCAAI,WAAW,mCAAC,IAAI,UAAQ;GAE5B,IAAI,CAACI,IAAI,CAAC,QAAQ,oCAAE,IAAI,WAAS;GAEjCoH,6BAAI,kCAAJ,IAAI,oCAAa,IAAI;GAErBA,6BAAI,oCAAJ,IAAI,oCAAc,IAAI;CACvB;CAAC,sBAEWmF,MAAe,EAC3B;GACC,IAAME,QAAQ,GAAG,sCAAI,WAAOJ,aAAa,CAAC,cAAc,CAAC;GACzD,IAAIE,MAAM,EACV;KACC7E,aAAG,CAACgF,WAAW,CAACD,QAAQ,EAAE,aAAa,CAAC;KACxC/E,aAAG,CAACiF,QAAQ,CAACF,QAAQ,EAAE,YAAY,CAAC;IACpC,MAED;KACC/E,aAAG,CAACgF,WAAW,CAACD,QAAQ,EAAE,YAAY,CAAC;KACvC/E,aAAG,CAACiF,QAAQ,CAACF,QAAQ,EAAE,aAAa,CAAC;;CAEvC;CAAC,uBAEYF,MAAe,EAC5B;GACC,IAAMK,QAAQ,GAAG,sCAAI,WAAOP,aAAa,CAAC,mCAAmC,CAAC;GAC9EO,QAAQ,CAACC,WAAW,4BAAG,IAAI,8BAAJ,IAAI,EAAWN,MAAM,CAAC;CAC9C;CAAC,oBAESA,MAAe,EACzB;GACC,OAAOA,MAAM,GACVnJ,aAAG,CAACC,UAAU,CAAC,yBAAyB,CAAC,GACzCD,aAAG,CAACC,UAAU,CAAC,yBAAyB,CAAC;CAE7C;CAAC,wBAGD;GACCzD,6BAAY,CAACuF,SAAS,CAAC,eAAe,EAAE,UAASoC,KAAK,EAAE;KACvD,sCAAI,WAAWA,KAAK,CAAC1H,IAAI,CAACiN,UAAU;KACpC1F,6BAAI,oCAAJ,IAAI,oCAAc,IAAI;KACtBA,6BAAI,kCAAJ,IAAI,oCAAa,IAAI;IACrB,CAAC3H,IAAI,CAAC,IAAI,CAAC,CAAC;CACd;;;;;;;AChHD,CAEmC;CAAA;CAAA;CAAA;CAAA;CAAA;AAOnC,KAAasN,YAAY;GAAA;GAMxB,sBAAYjN,MAAc,EAC1B;KAAA;KAAA;KACC;KAAQ2F;KAAAA;KAAAA;KAAAlD;OAAA;OAAA;;KAAAA;OAAA;OAAA;;KAAAA;OAAA;OAAA;;KAER,MAAKjD,iBAAiB,CAAC,gDAAgD,CAAC;KAExE,2FAAoBQ,MAAM,CAACc,WAAW;KAEtCwG,iJAAkBtH,MAAM,CAAC4F,WAAW;KAAE;;GACtC;KAAA;KAAA,uBAGD;OACC,IAAI,sCAAI,UAAQiE,OAAO,EAAE,EACzB;SACC,sCAAI,UAAQqD,KAAK,EAAE;QACnB,MAED;SACC,sCAAI,UAAQtE,IAAI,EAAE;;;;GAEnB;CAAA,EA3BgC9I,6BAAY;CAsI7C,uBAzGa8F,WAAwB,EACrC;GAAA;GACC,sCAAI,UAAU,IAAIuH,gBAAK,CACtB;KACCvG,EAAE,EAAE,cAAc;KAClBhB,WAAW,EAAEA,WAAW;KACxBwH,OAAO,2BAAE,IAAI,wCAAJ,IAAI,oCAAgB,IAAI,gBAAc;KAC/CC,QAAQ,EAAE,IAAI;KACdC,KAAK,EAAE,KAAK;KACZhH,KAAK,EAAE,GAAG;KACViH,SAAS,EAAE,KAAK;KAChBC,UAAU,EAAE,IAAI;KAChBC,OAAO,EAAE,IAAI;KACbC,OAAO,EAAE,EAAE;KACXC,SAAS,EAAE;IACX,CACD;GAED,sCAAI,UAAQtI,SAAS,CAAC,QAAQ,EAAE;KAAA,OAAM,MAAI,CAACnF,IAAI,CAAC,QAAQ,CAAC;KAAC;GAC1D,sCAAI,UAAQmF,SAAS,CAAC,cAAc,EAAE;KAAA,OAAM,MAAI,CAACnF,IAAI,CAAC,cAAc,CAAC;KAAC;CACvE;CAAC,yBAEcY,WAAyC,EACxD;GAAA;GACC,IAAM8M,eAAe,GAAG9M,WAAW,KAAK,MAAM,GAAG,UAAU,GAAG,EAAE;GAChE,IAAM+M,iBAAiB,GAAG/M,WAAW,KAAK,QAAQ,GAAG,UAAU,GAAG,EAAE;GACpE,IAAMgN,iBAAiB,GAAGhN,WAAW,KAAK,QAAQ,GAAG,UAAU,GAAG,EAAE;GAEpE,IAAMiN,MAAM,GAAG,2BAA2B;GAC1C,IAAMC,QAAQ,GAAG,6BAA6B;GAC9C,IAAMC,QAAQ,GAAG,6BAA6B;GAE9C,sCAAI,gBAAgBjL,aAAG,CAACC,MAAM,okDAEZ8K,MAAM,EAAuCH,eAAe,EAIvEtK,aAAG,CAACC,UAAU,CAAC,6BAA6B,CAAC,EAG7CD,aAAG,CAACC,UAAU,CAAC,kCAAkC,CAAC,EAIvCyK,QAAQ,EAAuCH,iBAAiB,EAI3EvK,aAAG,CAACC,UAAU,CAAC,+BAA+B,CAAC,EAG/CD,aAAG,CAACC,UAAU,CAAC,oCAAoC,CAAC,EAIzC0K,QAAQ,EAAuCH,iBAAiB,EAI3ExK,aAAG,CAACC,UAAU,CAAC,+BAA+B,CAAC,EAG/CD,aAAG,CAACC,UAAU,CAAC,oCAAoC,CAAC,EAKtDD,aAAG,CAACC,UAAU,CAAC,+BAA+B,CAAC;GAKpD+I,eAAK,CAAC3M,IAAI,CACT,sCAAI,gBAAc4M,aAAa,qBAAcwB,MAAM,QAAK,EACxD,OAAO,EACP;KAAA,gCAAM,MAAI,wCAAJ,MAAI,EAAgB,MAAM;IAAC,CACjC;GACDzB,eAAK,CAAC3M,IAAI,CACT,sCAAI,gBAAc4M,aAAa,qBAAcyB,QAAQ,QAAK,EAC1D,OAAO,EACP;KAAA,gCAAM,MAAI,wCAAJ,MAAI,EAAgB,QAAQ;IAAC,CACnC;GACD1B,eAAK,CAAC3M,IAAI,CACT,sCAAI,gBAAc4M,aAAa,qBAAc0B,QAAQ,QAAK,EAC1D,OAAO,EACP;KAAA,gCAAM,MAAI,wCAAJ,MAAI,EAAgB,QAAQ;IAAC,CACnC;GAED,yCAAO,IAAI;CACZ;CAAC,yBAEcnN,WAAyC,EACxD;GACC,sCAAI,gBAAgBA,WAAW;GAE/B8G,aAAG,CAACgF,WAAW,CAAC,sCAAI,gBAAcL,aAAa,CAAC,WAAW,CAAC,EAAE,UAAU,CAAC;GAEzE,IAAM5D,IAAI,GAAG,sCAAI,gBAAc4D,aAAa,0CAAmCzL,WAAW,QAAK;GAC/F8G,aAAG,CAACiF,QAAQ,CAAClE,IAAI,EAAE,UAAU,CAAC;GAE9B,IAAI,CAACzI,IAAI,CAAC,eAAe,oCAAE,IAAI,gBAAc;GAE7C,sCAAI,UAAQgN,KAAK,EAAE;CACpB;;;;;;;AC9ID,CAI+C;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;AAS/C,KAAagB,IAAI;GAAA;GAYhB,cAAYlO,MAAc,EAC1B;KAAA;KAAA;KACC;KAAQ2F;KAAAA;KAAAA;KAAAA;KAAAA;KAAAA;KAAAA;KAAAA;KAAAA;KAAAA;KAAAA;KAAAlD;OAAA;OAAA;;KAAAA;OAAA;OAAA;;KAAAA;OAAA;OAAA;;KAAAA;OAAA;OAAA;;KAAAA;OAAA;OAAA;;KAAAA;OAAA;OAAA;;KAAAA;OAAA;OAAA;;KAAAA;OAAA;OAAA;;KAER,MAAKjD,iBAAiB,CAAC,uCAAuC,CAAC;KAE/D,uFAAcQ,MAAM,CAAC6F,KAAK;KAC1B,sFAAa7F,MAAM,CAAC6K,IAAI;KACxB,6FAAoB7K,MAAM,CAACc,WAAW;KACtC,uFAAgBd,MAAM,CAACyB,OAAO;KAAC;;GAC/B;KAAA;KAAA,yBAGD;OAAA;OACC,IAAM0M,SAAS,GAAG,gCAAgC;OAElD,sCAAI,WAASnL,aAAG,CAACC,MAAM,+nBAGoB,sCAAI,WAAOmL,QAAQ,EAAE,EAC1D,sCAAI,WAAOnL,MAAM,EAAE,2BAIpB,IAAI,oCAAJ,IAAI,4BACJ,IAAI,kCAAJ,IAAI,4BACJ,IAAI,wCAAJ,IAAI,GAIKkL,SAAS,EAElB7K,aAAG,CAACC,UAAU,CAAC,8BAA8B,CAAC;OAInD+I,eAAK,CAAC3M,IAAI,CACT,sCAAI,WAAO4M,aAAa,qBAAc4B,SAAS,QAAK,EACpD,OAAO,EACP;SAAA,OAAM,MAAI,CAACjO,IAAI,CAAC,MAAM,CAAC;SACvB;OAED,yCAAO,IAAI;;;GACX;CAAA,EAvDwBJ,6BAAY;CAgOrC,uBAvKa2H,KAAK,EAClB;GAAA;GACC,IAAI,mCAAC,IAAI,gBAAc,EACvB;KACC,sCAAI,iBAAiB,IAAIwF,YAAY,CAAC;OACrCrH,WAAW,EAAE6B,KAAK,CAACE,MAAM;OACzB7G,WAAW,oCAAE,IAAI;MACjB,CAAC;KAEF,sCAAI,iBAAeuE,SAAS,CAAC,QAAQ,EAAE;OAAA,OAAM,MAAI,CAACnF,IAAI,CAAC,aAAa,EAAE,KAAK,CAAC;OAAC;KAC7E,sCAAI,iBAAemF,SAAS,CAAC,cAAc,EAAE;OAAA,OAAM,MAAI,CAACnF,IAAI,CAAC,aAAa,EAAE,IAAI,CAAC;OAAC;KAClF,sCAAI,iBAAemF,SAAS,CAAC,eAAe,EAAEiC,6BAAI,uCAAgB3H,IAAI,CAAC,IAAI,CAAC,CAAC;;GAG9E,sCAAI,iBAAeiJ,IAAI,EAAE;CAC1B;CAAC,4BAGD;GACChB,aAAG,CAACiF,QAAQ,mCAAC,IAAI,eAAa,UAAU,CAAC;GACzCjF,aAAG,CAACgF,WAAW,mCAAC,IAAI,cAAY,UAAU,CAAC;GAE3C,IAAMyB,KAAK,GAAG,sCAAI,aAAW9B,aAAa,CAAC,OAAO,CAAC;GAEnD8B,KAAK,CAACC,KAAK,EAAE;GACbD,KAAK,CAACE,iBAAiB,CAACF,KAAK,CAACG,KAAK,CAACjJ,MAAM,EAAE8I,KAAK,CAACG,KAAK,CAACjJ,MAAM,CAAC;CAChE;CAAC,2BAGD;GACCqC,aAAG,CAACiF,QAAQ,mCAAC,IAAI,cAAY,UAAU,CAAC;GACxCjF,aAAG,CAACgF,WAAW,mCAAC,IAAI,eAAa,UAAU,CAAC;CAC7C;CAAC,oBAES4B,KAAa,EACvB;GACC,sCAAI,YAAUA,KAAK;GAEnB,IAAM7F,IAAI,GAAG,sCAAI,cAAY4D,aAAa,CAAC,iCAAiC,CAAC;GAC7E5D,IAAI,CAACoE,WAAW,GAAG0B,cAAI,CAACC,MAAM,mCAAC,IAAI,YAAQ;CAC5C;CAAC,yBAGD;GACC,sCAAI,cAAc1L,aAAG,CAACC,MAAM,iVAMvBwL,cAAI,CAACC,MAAM,mCAAC,IAAI,YAAQ,EAEzB,sCAAI,YAAUhN,OAAO,4BAAG,IAAI,8CAAJ,IAAI,IAAuB,EAAE;GAIzD,yCAAO,IAAI;CACZ;CAAC,wBAGD;GAAA;GACC,IAAMiN,SAAS,GAAG,oDAAoD,GACnE,8CAA8C;GAEjD,sCAAI,aAAa3L,aAAG,CAACC,MAAM,6bAKX0L,SAAS,EAIZF,cAAI,CAACC,MAAM,mCAAC,IAAI,YAAQ;GAMrC,IAAML,KAAK,GAAG,sCAAI,aAAW9B,aAAa,CAAC,OAAO,CAAC;GAEnDD,eAAK,CAAC3M,IAAI,CAAC0O,KAAK,EAAE,SAAS,EAAE,UAAC5G,KAAoB,EAAK;KACtD,IAAIA,KAAK,CAACmH,GAAG,KAAK,QAAQ,IAAInH,KAAK,CAACmH,GAAG,KAAK,OAAO,EACnD;OACCP,KAAK,CAACQ,IAAI,EAAE;OAEZpH,KAAK,CAACqH,wBAAwB,EAAE;;IAEjC,CAAC;GAEFxC,eAAK,CAAC3M,IAAI,CAAC0O,KAAK,EAAE,MAAM,EAAE,YAAM;KAC/B,IAAI,wCAAI,gBAAYA,KAAK,CAACG,KAAK,EAC/B;OACClH,+BAAI,8BAAJ,MAAI,EAAW+G,KAAK,CAACG,KAAK;OAE1B,MAAI,CAACtO,IAAI,CAAC,aAAa,oCAAE,MAAI,YAAQ;;KAGtCoH,+BAAI,wCAAJ,MAAI;IACJ,CAAC;GAEF,yCAAO,IAAI;CACZ;CAAC,2BAGD;GACC,IAAMqB,IAAI,GAAG3F,aAAG,CAACC,MAAM,+XAMlB,IAAI,4CAAJ,IAAI,oCAAkB,IAAI,oBAE3B,sCAAI,YAAUvB,OAAO,4BAAG,IAAI,gDAAJ,IAAI,IAAwB,EAAE,CAEzD;GAED,IAAI,sCAAI,YAAUA,OAAO,EACzB;KACC4K,eAAK,CAAC3M,IAAI,CAACgJ,IAAI,EAAE,OAAO,EAAErB,6BAAI,+BAAc3H,IAAI,CAAC,IAAI,CAAC,CAAC;;GAGxD,OAAOgJ,IAAI;CACZ;CAAC,8BAGD;GACC,IAAMA,IAAI,GAAG3F,aAAG,CAACC,MAAM,8QAMtB;GAEDqJ,eAAK,CAAC3M,IAAI,CAACgJ,IAAI,EAAE,OAAO,EAAErB,6BAAI,qCAAiB3H,IAAI,CAAC,IAAI,CAAC,CAAC;GAE1D,OAAOgJ,IAAI;CACZ;CAAC,+BAGD;GACC,OAAO3F,aAAG,CAACC,MAAM;CAMlB;CAAC,2BAEgBnC,WAAyC,EAC1D;GACC,OAAOwC,aAAG,CAACC,UAAU,kCAA2BzC,WAAW,CAACiO,WAAW,EAAE,EAAG;CAC7E;CAAC,2BAEcC,SAAoB,EACnC;GACC,IAAMlO,WAAyC,GAAGkO,SAAS,CAACC,OAAO,EAAE;GAErE,sCAAI,WACF1C,aAAa,CAAC,gDAAgD,CAAC,CAC/DQ,WAAW,4BAAG,IAAI,4CAAJ,IAAI,EAAkBjM,WAAW,CAAC;GAGlD,IAAI,CAACZ,IAAI,CAAC,eAAe,EAAEY,WAAW,CAAC;CACxC;;;;;;;AC5OD,CAE0C;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;AAwB1C,KAAaoO,OAAO;GAAA;GAOnB,iBAAYlP,MAAc,EAC1B;KAAA;KAAA;KACC;KAAQ2F;KAAAA;KAAAA;KAAAA;KAAAA;KAAAA;KAAAA;KAAAA;KAAAA;KAAAA;KAAAA;KAAAA;KAAAlD;OAAA;OAAA;;KAAAA;OAAA;OAAA;;KAAAA;OAAA;OAAA;;KAAAA;OAAA;OAAA;;KAER,MAAKjD,iBAAiB,CAAC,0CAA0C,CAAC;KAElE,sFAAeQ,MAAM,CAACmP,MAAM;KAC5B,oFAAanP,MAAM,CAACoP,IAAI;KACxB,wFAAiBpP,MAAM,CAAC+B,QAAQ;KAChC,yFAAgB/B,MAAM,CAACyB,OAAO;KAAC;;GAC/B;KAAA;KAAA,yBAGD;OAAA;OACC,IAAM4N,WAAW,GAAG,oCAAoC;OAExD,IAAM1G,IAAI,GAAG3F,aAAG,CAACC,MAAM,q2BAcfK,aAAG,CAACC,UAAU,CAAC,8BAA8B,CAAC,EAAK9D,QAAQ,mCAAC,IAAI,YAAU,EAAE,CAAC,EAE9E6H,6BAAI,gCAAJ,IAAI,6BAAgB,IAAI,4CAAJ,IAAI,EAAkB+H,WAAW,IAAI,EAAE,2BAE5D,IAAI,kCAAJ,IAAI,GAGN/H,6BAAI,gCAAJ,IAAI,8BAAiB,IAAI,oCAAJ,IAAI,CAAe,4BAAG,IAAI,0CAAJ,IAAI,IAAqB,EAAE,CAEzE;OAED,IAAMgI,UAAU,GAAG3G,IAAI,CAAC4D,aAAa,qBAAc8C,WAAW,QAAK;OAEnE/C,eAAK,CAAC3M,IAAI,CACTgJ,IAAI,CAAC4D,aAAa,CAAC,eAAe,CAAC,EACnC,OAAO,EACP,UAAC9E,KAAK,EAAK;SACV,IAAI,CAAC6H,UAAU,IAAI,CAAC7H,KAAK,CAACE,MAAM,CAAC4H,WAAW,CAACD,UAAU,CAAC,EACxD;WACC,MAAI,CAACpP,IAAI,CAAC,WAAW,EAAE,KAAK,CAAC;;QAE9B,CACD;OAED,OAAOyI,IAAI;;;GACX;CAAA,EA9D2B7I,6BAAY;CAmSxC,2BAnOiBuP,WAAmB,EACpC;GAAA;GACC,IAAM1G,IAAI,GAAG3F,aAAG,CAACC,MAAM,oQAEVoM,WAAW,EAGpB/L,aAAG,CAACC,UAAU,CAAC,mCAAmC,CAAC,CAEtD;GAED+I,eAAK,CAAC3M,IAAI,CAACgJ,IAAI,EAAE,OAAO,EAAE;KAAA,OAAM,MAAI,CAACzI,IAAI,CAAC,QAAQ,CAAC;KAAC;GAEpD,OAAOyI,IAAI;CACZ;CAAC,wBAGD;GAAA;GACC,IAAM6G,cAAc,4BAAG,IAAI,oCAAJ,IAAI,CAAe;GAE1C,IAAMC,aAAa,GAAG,CAAC;GACvB,IAAMC,UAAU,GAAGF,cAAc,CAACE,UAAU,CAACC,KAAK,CAAC,CAAC,EAAEF,aAAa,CAAC;GACpE,IAAMpN,KAAK,GAAGmN,cAAc,CAACnN,KAAK,CAACsN,KAAK,CAAC,CAAC,EAAEF,aAAa,CAAC;GAE1D,IAAMN,MAAM,GAAG,sCAAI,cAAY,CAAC,GAAGO,UAAU,CAACnK,MAAM,GAAGlD,KAAK,CAACkD,MAAM,CAAC;GAEpE,OAAOvC,aAAG,CAACC,MAAM,yoBAGZ,IAAI,oCAAJ,IAAI,EAAcuM,cAAc,CAACI,KAAK,GAI/BF,UAAU,CAACnK,MAAM,GAAG,CAAC,GAAG,EAAE,GAAG,gBAAgB,EAEpDmK,UAAU,CAACnL,GAAG,CAAC,UAACsL,MAAc,EAAK;KACpC,gCAAO,MAAI,4CAAJ,MAAI,EAAkBA,MAAM;IACnC,CAAC,EAIOxN,KAAK,CAACkD,MAAM,GAAG,CAAC,GAAG,EAAE,GAAG,gBAAgB,EAE/ClD,KAAK,CAACkC,GAAG,CAAC,UAACsL,MAAc,EAAK;KAC/B,gCAAO,MAAI,kCAAJ,MAAI,EAAaA,MAAM;IAC9B,CAAC,EAIOV,MAAM,GAAG,CAAC,GAAG,EAAE,GAAG,gBAAgB,EACxCA,MAAM;CAGb;CAAC,4BAGD;GAAA;GACC,IAAMW,UAAU,GAAGrQ,QAAQ,CAAC,sCAAI,aAAWsQ,sBAAsB,EAAE,EAAE,CAAC;GACtE,IAAMC,SAAS,GAAGvQ,QAAQ,CAAC,sCAAI,aAAWwQ,qBAAqB,EAAE,EAAE,CAAC;GAEpE,IAAMC,KAAK,GAAG,qCAAqC;GACnD,IAAMC,IAAI,GAAG,oCAAoC;GAEjD,IAAMC,SAAS,GAAG,SAAZA,SAAS,GAAS;KACvB,IAAI,0BAAC,MAAI,0CAAJ,MAAI,CAAkB,EAC3B;OACC,OAAO,EAAE;;KAGV,OAAOpN,aAAG,CAACC,MAAM,kbACAiN,KAAK,EACyBJ,UAAU,EACtCxM,aAAG,CAACC,UAAU,CAAC,oCAAoC,CAAC;IAOvE;GAED,IAAM8M,QAAQ,GAAG,SAAXA,QAAQ,GAAS;KACtB,IAAI,0BAAC,MAAI,wCAAJ,MAAI,CAAiB,EAC1B;OACC,OAAO,EAAE;;KAGV,OAAOrN,aAAG,CAACC,MAAM,kbACAkN,IAAI,EAC0BH,SAAS,EACrC1M,aAAG,CAACC,UAAU,CAAC,kCAAkC,CAAC;IAOrE;GAED,IAAMoF,IAAI,GAAG3F,aAAG,CAACC,MAAM,qJAEnBmN,SAAS,EAAE,EACXC,QAAQ,EAAE,CAEb;GAED/D,eAAK,CAAC3M,IAAI,CACTgJ,IAAI,CAAC4D,aAAa,qBAAc2D,KAAK,QAAK,EAC1C,OAAO,EACP;KAAA,OAAM,MAAI,CAAChQ,IAAI,CAAC,WAAW,EAAE,KAAK,CAAC;KACnC;GAEDoM,eAAK,CAAC3M,IAAI,CACTgJ,IAAI,CAAC4D,aAAa,qBAAc4D,IAAI,QAAK,EACzC,OAAO,EACP;KAAA,OAAM,MAAI,CAACjQ,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC;KAClC;GAED,OAAOyI,IAAI;CACZ;CAAC,uBAEYkH,MAAc,EAC3B;GACC,IAAMS,YAAY,GAAG,sDAAsD,GACxE,iEAAiE;GAGpE,IAAM3B,SAAS,GAAGkB,MAAM,CAACU,KAAK,GAAG,EAAE,GAAG,wCAAwC;GAE9E,OAAOvN,aAAG,CAACC,MAAM,8QAC4C0L,SAAS,2BAClE,IAAI,sCAAJ,IAAI,EAAekB,MAAM,CAACU,KAAK,GACrBD,YAAY;CAG3B;CAAC,2BAEgBT,MAAc,EAC/B;GACC,IAAMS,YAAY,GAAG,sDAAsD,GACxE,2DAA2D;GAG9D,IAAM3B,SAAS,GAAGkB,MAAM,CAACU,KAAK,GAAG,EAAE,GAAG,wCAAwC;GAE9E,OAAOvN,aAAG,CAACC,MAAM,wQACsC0L,SAAS,2BAC5D,IAAI,sCAAJ,IAAI,EAAekB,MAAM,CAACU,KAAK,GACrBD,YAAY;CAG3B;CAAC,sBAEWT,MAAc,EAC1B;GACC,IAAMlB,SAAS,GAAGkB,MAAM,CAACU,KAAK,GAAG,EAAE,GAAG,wCAAwC;GAE9E,OAAOvN,aAAG,CAACC,MAAM,kLAC8B0L,SAAS,2BACpD,IAAI,sCAAJ,IAAI,EAAekB,MAAM,CAACU,KAAK;CAGpC;CAAC,wBAEaA,KAAa,EAC3B;GACC,IAAIA,KAAK,EACT;KACC,OAAOvN,aAAG,CAACC,MAAM,sOAGiBuN,SAAS,CAACD,KAAK,CAAC;;GAKnD,OAAOvN,aAAG,CAACC,MAAM;CAClB;CAAC,yBAGD;GACC,IAAMwN,OAAO,GAAG;KACfb,KAAK,EAAE,IAAI;KACXF,UAAU,EAAE,EAAE;KACdrN,KAAK,EAAE;IACP;GAED,sCAAI,SAAOgH,OAAO,CAAC,UAACwG,MAAc,EAAK;KACtC,IAAIA,MAAM,CAACa,OAAO,EAClB;OACCD,OAAO,CAACb,KAAK,GAAGC,MAAM;MACtB,MACI,IAAIA,MAAM,CAACc,WAAW,EAC3B;OACCF,OAAO,CAACf,UAAU,CAACkB,IAAI,CAACf,MAAM,CAAC;MAC/B,MAED;OACCY,OAAO,CAACpO,KAAK,CAACuO,IAAI,CAACf,MAAM,CAAC;;IAE3B,CAAC;GAEF,OAAOY,OAAO;CACf;CAAC,uBAGD;GACC,OAAO,sCAAI,cAAU/O,OAAO,IAAI,sCAAI,cAAUG,SAAS;CACxD;CAAC,yBAGD;GACC,IAAMiO,UAAU,GAAGrQ,QAAQ,CAAC,sCAAI,aAAWsQ,sBAAsB,EAAE,EAAE,CAAC;GACtE,IAAMC,SAAS,GAAGvQ,QAAQ,CAAC,sCAAI,aAAWwQ,qBAAqB,EAAE,EAAE,CAAC;GAEpE,OAAOH,UAAU,GAAG,CAAC,IAAIE,SAAS,GAAG,CAAC;CACvC;CAAC,4BAGD;GACC,OAAOvQ,QAAQ,CAAC,sCAAI,aAAWsQ,sBAAsB,EAAE,EAAE,CAAC,GAAG,CAAC;CAC/D;CAAC,2BAGD;GACC,OAAOtQ,QAAQ,CAAC,sCAAI,aAAWwQ,qBAAqB,EAAE,EAAE,CAAC,GAAG,CAAC;CAC9D;;;;;;;AC5TD,CACgD;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;AAMhD,KAAaY,GAAG;GAAA;GAMf,aAAY7Q,MAAc,EAC1B;KAAA;KAAA;KACC;KAAQ2F;KAAAA;KAAAA;KAAAA;KAAAA;KAAAlD;OAAA;OAAA;;KAAAA;OAAA;OAAA;;KAAAA;OAAA;OAAA;;KAER,MAAKjD,iBAAiB,CAAC,sCAAsC,CAAC;KAE9D,mFAAYQ,MAAM,CAAC8Q,GAAG;KACtB,0FAAiB,KAAK;KAEtBxJ;KAAmB;;GACnB;KAAA;KAAA,yBAGD;OACC,IAAMyJ,KAAK,GAAG,qBAAqB;OAEnC,IAAMjG,SAAS,GAAG,sCAAI,UAAQ,SAAS,GAAG,SAAS;OAEnD,sCAAI,WAAS9H,aAAG,CAACC,MAAM,0eAEV8N,KAAK,EAKOjG,SAAS,2BAK7B,IAAI,kCAAJ,IAAI,oCAAW,IAAI;OAKxBwB,eAAK,CAAC3M,IAAI,mCAAC,IAAI,YAAQ,OAAO,EAAE2H,6BAAI,yBAAS3H,IAAI,CAAC,IAAI,CAAC,CAAC;OAExD,yCAAO,IAAI;;;KACX;KAAA,4BAGD;OACC,sCAAI,eAAa,KAAK;;;GACtB;CAAA,EAjDuBG,6BAAY;CA0GpC,sBAtDA;GACC,sCAAI,IAAI,gBACR;KACC;;GAGD,sCAAI,eAAa,IAAI;GAErB,sCAAI,QAAQ,mCAAC,IAAI,OAAK;GAEtB,IAAI,CAACI,IAAI,CAAC,QAAQ,oCAAE,IAAI,QAAM;GAE9BoH,6BAAI,sCAAJ,IAAI,oCAAa,IAAI;GAErBA,6BAAI,wCAAJ,IAAI,oCAAc,IAAI;CACvB;CAAC,wBAEWwJ,GAAY,EACxB;GACC,IAAMnE,QAAQ,GAAG,sCAAI,WAAOJ,aAAa,CAAC,cAAc,CAAC;GACzD,IAAIuE,GAAG,EACP;KACClJ,aAAG,CAACgF,WAAW,CAACD,QAAQ,EAAE,SAAS,CAAC;KACpC/E,aAAG,CAACiF,QAAQ,CAACF,QAAQ,EAAE,SAAS,CAAC;IACjC,MAED;KACC/E,aAAG,CAACgF,WAAW,CAACD,QAAQ,EAAE,SAAS,CAAC;KACpC/E,aAAG,CAACiF,QAAQ,CAACF,QAAQ,EAAE,SAAS,CAAC;;CAEnC;CAAC,yBAEYmE,GAAY,EACzB;GACC,IAAMhE,QAAQ,GAAG,sCAAI,WAAOP,aAAa,CAAC,mCAAmC,CAAC;GAC9EO,QAAQ,CAACC,WAAW,4BAAG,IAAI,kCAAJ,IAAI,EAAW+D,GAAG,CAAC;CAC3C;CAAC,sBAESA,GAAY,EACtB;GACC,OAAOA,GAAG,GACPxN,aAAG,CAACC,UAAU,CAAC,sBAAsB,CAAC,GACtCD,aAAG,CAACC,UAAU,CAAC,sBAAsB,CAAC;CAE1C;CAAC,0BAGD;GACCzD,6BAAY,CAACuF,SAAS,CAAC,YAAY,EAAE,UAASoC,KAAK,EAAE;KACpD,sCAAI,QAAQA,KAAK,CAAC1H,IAAI,CAACiR,QAAQ;KAC/B1J,6BAAI,wCAAJ,IAAI,oCAAc,IAAI;KACtBA,6BAAI,sCAAJ,IAAI,oCAAa,IAAI;IACrB,CAAC3H,IAAI,CAAC,IAAI,CAAC,CAAC;CACd;;;AChHD,KAGasR,KAAK;GAAA;GAEjB,iBACA;KAAA;KAAA;KACC;KAEA,MAAKzR,iBAAiB,CAAC,wCAAwC,CAAC;KAAC;;GACjE;KAAA;KAAA,yBAGD;OAAA;OACC,IAAM0R,OAAO,GAAG,uBAAuB;OAEvC,IAAMvI,IAAI,GAAG3F,aAAG,CAACC,MAAM,4fAEViO,OAAO,EAUf5N,aAAG,CAACC,UAAU,CAAC,sBAAsB,CAAC,CAG1C;OAED+I,eAAK,CAAC3M,IAAI,CAACgJ,IAAI,EAAE,OAAO,EAAE;SAAA,OAAM,MAAI,CAACzI,IAAI,CAAC,OAAO,CAAC;SAAC;OAEnD,OAAOyI,IAAI;;;GACX;CAAA,EAjCyB7I,6BAAY;;;;;;ACHvC,CAYkD;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;AA4BlD,KAAaqR,aAAa;GAUzB,uBAAYnR,OAAc,EAC1B;KAAA;KAAA2F;KAAAA;KAAAA;KAAAA;KAAAA;KAAAA;KAAAA;KAAAA;KAAAA;KAAAA;KAAAA;KAAAA;KAAAA;KAAAA;KAAAlD;OAAA;OAAA,OATS,IAAI2O,eAAK,CAACC,WAAW;;KAAE5O;OAAA;OAAA;;KAAAA;OAAA;OAAA,OAItB;SACTgO,OAAO,EAAE;;;KAKTnJ,6BAAI,gCAAJ,IAAI,EAAYtH,OAAM;KAEtB,sCAAI,kCAAS,IAAI,kCAAJ,IAAI;;GACjB;KAAA;KAAA,uBAGD;OACC,IAAI,sCAAI,SAAO6J,OAAO,EAAE,EACxB;SACC,sCAAI,SAAOqD,KAAK,EAAE;QAClB,MAED;SACC,sCAAI,SAAOtE,IAAI,EAAE;;;;KAElB;KAAA,uBA+GME,gBAAyB,EAChC;OACCxB,6BAAI,wCAAJ,IAAI,EAAgBwB,gBAAgB;;;GACpC;CAAA;CA0MD,qBA1TW9I,MAAc,EACzB;GACC,sCAAI,UAAQsR,GAAG,CAAC,QAAQ,EAAEtR,MAAM,CAAC;CAClC;CAAC,oBAESuR,KAAa,EACvB;GACC,OAAO,sCAAI,UAAQC,GAAG,CAAC,QAAQ,CAAC,CAACD,KAAK,CAAC;CACxC;CAAC,wBAGD;GACC,IAAMzI,gBAAgB,GAAG3I,QAAQ,CAACsR,YAAY,0BAAC,IAAI,8BAAJ,IAAI,EAAW,SAAS,EAAE;GAEzE,OAAO,IAAIC,4CAAoB,CAAC;KAC/B9K,EAAE,EAAE,sBAAsB;KAC1Be,MAAM,2BAAE,IAAI,8BAAJ,IAAI,EAAW,aAAa,CAAC;KACrCyF,OAAO,EAAE,CACR;OACCuE,IAAI,EAAE,CACL;SACCA,IAAI,2BAAE,IAAI,kCAAJ,IAAI,EAAa7I,gBAAgB,CAAC;SACxC8I,eAAe,EAAE;QACjB;MAEF,EACD;OACCD,IAAI,EAAE,CACL;SACCA,IAAI,2BAAE,IAAI,kCAAJ,IAAI,CAAc;SACxBE,iBAAiB,EAAE;QACnB;MAEF,EACD;OACCF,IAAI,EAAE,CACL;SACCA,IAAI,2BAAE,IAAI,wCAAJ,IAAI,EAAgB7I,gBAAgB,CAAC;SAC3C+I,iBAAiB,EAAE;QACnB;MAEF,EACD;OACCF,IAAI,EAAE,CACL;SACCA,IAAI,2BAAE,IAAI,sCAAJ,IAAI,EAAe7I,gBAAgB,CAAC;SAC1C8I,eAAe,EAAE;QACjB,EACD;SACCD,IAAI,2BAAE,IAAI,gCAAJ,IAAI,EAAY7I,gBAAgB,CAAC;SACvC8I,eAAe,EAAE;QACjB,EACD;SACCD,IAAI,2BAAE,IAAI,oCAAJ,IAAI,CAAe;SACzBC,eAAe,EAAE;QACjB;MAEF;IAEF,CAAC;CACH;CAAC,sBAEW9I,gBAAyB,EACrC;GAAA;GACC,OAAO,IAAIgJ,OAAO,CAAC,UAACC,OAAO,EAAK;;KAE/BjJ,gBAAgB,CACdtI,IAAI,CAAC,UAACwR,SAAoB,EAAK;OAC/B,IAAMC,IAAI,GAAG,IAAI/D,IAAI,CAAC;SACrBrI,KAAK,EAAEmM,SAAS,CAACtR,IAAI;SACrBmK,IAAI,EAAE,IAAID,IAAI,0BAAC,KAAI,8BAAJ,KAAI,EAAW,MAAM,EAAE;SACtC9J,WAAW,EAAEkR,SAAS,CAAClR,WAAW;SAClCW,OAAO,EAAEuQ,SAAS,CAACvQ;QACnB,CAAC;OACFwQ,IAAI,CAAC5M,SAAS,CAAC,eAAe,EAAEiC,8BAAI,uCAAgB3H,IAAI,CAAC,KAAI,CAAC,CAAC;OAC/DsS,IAAI,CAAC5M,SAAS,CAAC,aAAa,EAAEiC,8BAAI,+BAAc3H,IAAI,CAAC,KAAI,CAAC,CAAC;OAC3DsS,IAAI,CAAC5M,SAAS,CAAC,aAAa,EAAE,UAAC2J,SAAoB,EAAK;SACvD,uCAAI,SAAOlF,QAAQ,EAAE,CAACoI,WAAW,CAAClD,SAAS,CAACC,OAAO,EAAE,CAAC;QACtD,CAAC;OACFgD,IAAI,CAAC5M,SAAS,CAAC,MAAM,EAAE,YAAM;SAC5BnD,OAAO,CAACC,GAAG,CAAC,MAAM,CAAC;QACnB,CAAC;OAEF4P,OAAO,CAACE,IAAI,CAAChP,MAAM,EAAE,CAAC;MACtB,CAAC;IAEH,CAAC;CACH;CAAC,wBAGD;GAAA;GACC,IAAMkP,IAAI,GAAG,IAAIjG,UAAU,EAAE;GAE7BiG,IAAI,CAAC9M,SAAS,CAAC,WAAW,EAAE,YAAM;KACjC,wCAAI,SAAO6H,KAAK,EAAE;KAClB5F,+BAAI,8BAAJ,MAAI,EAAW,MAAM,EAAEiB,cAAc,EAAE;IACvC,CAAC;GACF4J,IAAI,CAAC9M,SAAS,CAAC,UAAU,EAAE,YAAM;KAChC,wCAAI,SAAO6H,KAAK,EAAE;KAClB5F,+BAAI,8BAAJ,MAAI,EAAW,MAAM,EAAEtC,QAAQ,EAAE;IACjC,CAAC;GACFmN,IAAI,CAAC9M,SAAS,CAAC,YAAY,EAAE,YAAM;KAClC,wCAAI,SAAO6H,KAAK,EAAE;KAClB5F,+BAAI,8BAAJ,MAAI,EAAW,MAAM,EAAErB,UAAU,0BAAC,MAAI,8BAAJ,MAAI,EAAW,aAAa,EAAE;IAChE,CAAC;GAEF,OAAOkM,IAAI,CAAClP,MAAM,EAAE;CACrB;CAAC,yBAOc6F,gBAAyB,EACxC;GAAA;GACC,OAAO,IAAIgJ,OAAO,CAAC,UAACC,OAAO,EAAK;;KAE/BjJ,gBAAgB,CACdtI,IAAI,CAAC,UAACwR,SAAoB,EAAK;OAC/B,IAAMvB,OAAO,GAAG,IAAIvB,OAAO,CAAC;SAC3BC,MAAM,EAAE6C,SAAS,CAAC7Q,eAAe;SACjCiO,IAAI,EAAE4C,SAAS,CAAC3Q,aAAa;SAC7BU,QAAQ,EAAEiQ,SAAS,CAACjQ,QAAQ;SAC5BN,OAAO,EAAEuQ,SAAS,CAACvQ;QACnB,CAAC;OACFgP,OAAO,CAACpL,SAAS,CAAC,WAAW,EAAE,UAAC2J,SAA0C,EAAK;SAC9E,wCAAI,SAAO9B,KAAK,EAAE;SAClB5F,+BAAI,8BAAJ,MAAI,EAAW,QAAQ,EAAE8K,cAAc,CAACpD,SAAS,CAACC,OAAO,EAAE,CAAC;QAC5D,CAAC;OACFwB,OAAO,CAACpL,SAAS,CAAC,QAAQ,EAAE,YAAM;SACjC,wCAAI,SAAO6H,KAAK,EAAE;SAClB5F,+BAAI,8BAAJ,MAAI,EAAW,QAAQ,EAAE+K,eAAe,EAAE;QAC1C,CAAC;OAEF,IAAMC,aAAa,GAAG7B,OAAO,CAACxN,MAAM,EAAE;OACtC,IAAI,wCAAI,WAASwN,OAAO,EACxB;SACC,wCAAI,WAASA,OAAO,CAAC8B,WAAW,CAACD,aAAa,CAAC;;OAGhD,wCAAI,WAAS7B,OAAO,GAAG6B,aAAa;OAEpCP,OAAO,CAAC,wCAAI,WAAStB,OAAO,CAAC;MAC7B,CAAC;IAEH,CAAC;CACH;CAAC,wBAEa3H,gBAAyB,EACvC;GAAA;GACC,OAAO,IAAIgJ,OAAO,CAAC,UAACC,OAAO,EAAK;;KAE/BjJ,gBAAgB,CACdtI,IAAI,CAAC,UAACwR,SAAoB,EAAK;OAC/B,IAAMvF,MAAM,GAAG,IAAID,MAAM,CAAC;SACzBC,MAAM,EAAEuF,SAAS,CAAChR;QAClB,CAAC;OAEFyL,MAAM,CAACpH,SAAS,CAAC,QAAQ,EAAE,UAAC2J,SAAoB,EAAK;SACpD1H,+BAAI,4CAAJ,MAAI,2BACH,MAAI,8BAAJ,MAAI,EAAW,SAAS,GACxB0H,SAAS,CAACC,OAAO,EAAE,KAAK,IAAI,GAAG,GAAG,GAAG,GAAG,EACxCxC,MAAM;QAEP,CAAC;OAEFsF,OAAO,CAACtF,MAAM,CAACxJ,MAAM,EAAE,CAAC;MACxB,CAAC;IAEH,CAAC;CACH;CAAC,qBAEU6F,gBAAyB,EACpC;GAAA;GACC,OAAO,IAAIgJ,OAAO,CAAC,UAACC,OAAO,EAAK;;KAE/BjJ,gBAAgB,CACdtI,IAAI,CAAC,UAACwR,SAAoB,EAAK;OAC/B,IAAMlB,GAAG,GAAG,IAAID,GAAG,CAAC;SACnBC,GAAG,EAAEkB,SAAS,CAACpR;QACf,CAAC;OAEFkQ,GAAG,CAACzL,SAAS,CAAC,QAAQ,EAAE,UAAC2J,SAAoB,EAAK;SACjD1H,+BAAI,gCAAJ,MAAI,2BACH,MAAI,8BAAJ,MAAI,EAAW,SAAS,GACxB0H,SAAS,CAACC,OAAO,EAAE,KAAK,IAAI,GAAG,KAAK,GAAG,OAAO,EAC9C6B,GAAG;QAEJ,CAAC;OAEFiB,OAAO,CAACjB,GAAG,CAAC7N,MAAM,EAAE,CAAC;MACrB,CAAC;IAEH,CAAC;CACH;CAAC,yBAGD;GAAA;GACC,IAAMuP,KAAK,GAAG,IAAIvB,KAAK,EAAE;GAEzBuB,KAAK,CAACnN,SAAS,CAAC,OAAO,EAAE,YAAM;KAC9B,wCAAI,SAAO6H,KAAK,EAAE;KAClB5F,+BAAI,8BAAJ,MAAI,EAAW,QAAQ,EAAEmL,iBAAiB,EAAE;IAC5C,CAAC;GAEF,OAAOD,KAAK,CAACvP,MAAM,EAAE;CACtB;CAAC,2BAEgB1D,OAAe,EAAEiP,KAAgB,EAAE/B,MAAc,EAClE;GAAA;;GAECpM,cAAI,CAACC,SAAS,CAAC,6CAA6C,EAAE;KAC7DP,IAAI,EAAE;OACLC,MAAM,EAAE;SACPT,OAAO,EAAPA,OAAO;SACPiP,KAAK,EAALA;;;IAGF,CAAC,CACAhO,IAAI,CAAC,UAACC,QAAsB,EAAK;KACjCgM,MAAM,CAACiG,SAAS,EAAE;IAClB,CAAC,SACI,CAAC,UAACzQ,KAAgB,EAAK;KAC5BwK,MAAM,CAACiG,SAAS,EAAE;KAElBpL,+BAAI,sCAAJ,MAAI,EAAe,iBAAiB,EAAErF,KAAK;IAC3C,CAAC;CAEJ;CAAC,qBAEU1C,OAAe,EAAEoT,MAAuB,EAAE7B,GAAQ,EAC7D;GAAA;;GAECzQ,cAAI,CAACC,SAAS,CAAC,uCAAuC,EAAE;KACvDP,IAAI,EAAE;OACL6S,WAAW,EAAE,CAACrT,OAAO,CAAC;OACtBoT,MAAM,EAAEA;;IAET,CAAC,CACAnS,IAAI,CAAC,UAACC,QAAsB,EAAK;KACjCqQ,GAAG,CAAC4B,SAAS,EAAE;IACf,CAAC,SACI,CAAC,UAACzQ,KAAgB,EAAK;KAC5B6O,GAAG,CAAC4B,SAAS,EAAE;KAEfpL,+BAAI,sCAAJ,MAAI,EAAe,WAAW,EAAErF,KAAK;IACrC,CAAC;CAEJ;CAAC,2BAEc+M,SAAoB,EACnC;GAAA;GACC,IAAMlO,WAAyC,GAAGkO,SAAS,CAACC,OAAO,EAAE;GAErE,IAAM4D,MAAM,GAAG,EAAE;GACjB,IAAI/R,WAAW,KAAK,MAAM,EAC1B;KACC+R,MAAM,CAACC,OAAO,GAAG,GAAG;KACpBD,MAAM,CAACE,MAAM,GAAG,GAAG;KACnBF,MAAM,CAACG,QAAQ,GAAG,GAAG;;GAGtB,IAAIlS,WAAW,KAAK,QAAQ,EAC5B;KACC+R,MAAM,CAACC,OAAO,GAAG,GAAG;KACpBD,MAAM,CAACE,MAAM,GAAG,GAAG;KACnBF,MAAM,CAACG,QAAQ,GAAG,GAAG;;GAGtB,IAAIlS,WAAW,KAAK,QAAQ,EAC5B;KACC+R,MAAM,CAACC,OAAO,GAAG,GAAG;KACpBD,MAAM,CAACE,MAAM,GAAG,GAAG;KACnBF,MAAM,CAACG,QAAQ,GAAG,GAAG;;;;GAItB3S,cAAI,CAACC,SAAS,CAAC,oCAAoC,EAAE;KACpDP,IAAI,EAAE;OACLR,OAAO,2BAAE,IAAI,8BAAJ,IAAI,EAAW,SAAS,CAAC;OAClCsT,MAAM,EAAEA;;IAET,CAAC,CACArS,IAAI,CAAC,UAACC,QAAsB,EAAK,EAAE,CAAC,SAC/B,CAAC,UAACwB,KAAgB,EAAK;KAC5BqF,+BAAI,sCAAJ,MAAI,EAAe,eAAe,EAAErF,KAAK;IACzC,CAAC;CAEJ;CAAC,uBAEY+M,SAAoB,EACjC;GAAA;;GAEC3O,cAAI,CAACC,SAAS,CAAC,oCAAoC,EAAE;KACpDP,IAAI,EAAE;OACLR,OAAO,2BAAE,IAAI,8BAAJ,IAAI,EAAW,SAAS,CAAC;OAClCsT,MAAM,EAAE;SACPlS,IAAI,EAAEqO,SAAS,CAACC,OAAO;;;IAGzB,CAAC,CACAzO,IAAI,CAAC,UAACC,QAAsB,EAAK,EAAE,CAAC,SAC/B,CAAC,UAACwB,KAAgB,EAAK;KAC5BqF,gCAAI,sCAAJ,OAAI,EAAe,aAAa,EAAErF,KAAK;IACvC,CAAC;CAEJ;CAAC,wBAEa0Q,MAAc,EAAE1Q,KAAgB,EAC9C;;GAECC,OAAO,CAACD,KAAK,0BAAmB0Q,MAAM,aAAU1Q,KAAK,CAAC;CACvD;;;;;;AC9XD,CAC+D;CAAA;CAAA;CAAA;AAO/D,KAAagR,YAAY;GAMxB,sBAAYjT,OAAc,EAC1B;KAAA;KAAA2F;KAAAA;KAAAlD;OAAA;OAAA,OALS,IAAI2O,eAAK,CAACC,WAAW;;KAAE5O;OAAA;OAAA;;KAM/B6E,6BAAI,oCAAJ,IAAI,EAAYtH,OAAM;;GACtB;KAAA;KAAA,uBAGD;;GAEC;CAAA;CAWD,uBATWA,MAAc,EACzB;GACC,sCAAI,YAAQsR,GAAG,CAAC,QAAQ,EAAEtR,MAAM,CAAC;CAClC;;;;;;AC3BD,CAiB4B;CAAA;CAAA;CAAA;AAE5B,KAAakT,QAAQ;GAMpB,kBAAYlT,OAAc,EAC1B;KAAA;KAAA2F;KAAAA;KAAAlD;OAAA;OAAA,OALS,IAAI2O,eAAK,CAACC,WAAW;;KAAE5O;OAAA;OAAA;;KAM/B6E,6BAAI,oCAAJ,IAAI,EAAYtH,OAAM;;GACtB;KAAA;KAAA,uBAGD;OACC,IAAI,mCAAC,IAAI,YAAU,EACnB;SACC,IAAIsH,6BAAI,kCAAJ,IAAI,EAAW,MAAM,MAAM,MAAM,EACrC;WACC,sCAAI,aAAa,IAAI2L,YAAY,CAAC;aACjCrN,WAAW,2BAAE,IAAI,kCAAJ,IAAI,EAAW,aAAa,CAAC;aAC1C+E,MAAM,2BAAE,IAAI,kCAAJ,IAAI,EAAW,UAAU;YACjC,CAAC;UACF,MAED;WACC,sCAAI,aAAa,IAAIwG,aAAa,CAAC;aAClCvL,WAAW,2BAAE,IAAI,kCAAJ,IAAI,EAAW,aAAa,CAAC;aAC1CrG,OAAO,2BAAE,IAAI,kCAAJ,IAAI,EAAW,UAAU,CAAC;aACnCsL,IAAI,2BAAE,IAAI,kCAAJ,IAAI,EAAW,MAAM,CAAC;aAC5BsH,IAAI,2BAAE,IAAI,kCAAJ,IAAI,EAAW,MAAM,CAAC;aAC5BgB,MAAM,2BAAE,IAAI,kCAAJ,IAAI,EAAW,QAAQ;YAC/B,CAAC;;;OAIJ,sCAAI,aAAWvK,IAAI,EAAE;;;KACrB;KAAA,uBAEME,gBAAyB,EAChC;OAAA;OACC,+DAAI,sEAAJ,sBAAgBsK,MAAM,CAACtK,gBAAgB,CAAC;;;GACxC;CAAA;CAWD,uBATW9I,MAAc,EACzB;GACC,sCAAI,YAAQsR,GAAG,CAAC,QAAQ,EAAEtR,MAAM,CAAC;CAClC;CAAC,sBAESuR,KAAa,EACvB;GACC,OAAO,sCAAI,YAAQC,GAAG,CAAC,QAAQ,CAAC,CAACD,KAAK,CAAC;CACxC;;;;;;ACrED,CAEkC;CAAA;AAMlC,KAAa8B,SAAS;GAAA;GAIrB,mBAAYrT,MAAc,EAC1B;KAAA;KAAA;KACC;KAAQ2F;KAAAlD;OAAA;OAAA;;KAER,MAAKjD,iBAAiB,CAAC,mCAAmC,CAAC;KAE3D,yOAA8BQ,MAAM,CAAC4F,WAAW;KAAE;;GAClD;KAAA;KAAA,uBAGD;OACC,sCAAI,WAAO0N,MAAM,EAAE;;;GACnB;CAAA,EAhB6BxT,6BAAY;CAkE1C,wBAhDY8F,WAAwB,EACpC;GAAA;GACC,IAAM2N,IAAI,GAAG,IAAIC,eAAI,CAAC;KACrB5M,EAAE,EAAE,wBAAwB;KAC5BhB,WAAW,EAAXA,WAAW;KACX4H,UAAU,EAAE,IAAI;KAChBF,KAAK,EAAE;OACNtD,QAAQ,EAAE,KAAK;OACfC,MAAM,EAAE;;IAET,CAAC;GAEFsJ,IAAI,CAACE,WAAW,CAAC;KAChBC,OAAO,EAAE;OAAE9M,EAAE,EAAE;MAA6B;KAC5CvD,IAAI,EAAEC,aAAG,CAACC,UAAU,CAAC,8BAA8B,CAAC;KACpDoQ,SAAS,EAAE,mCAAmC;KAC9CC,OAAO,EAAE,mBAAM;OACd,MAAI,CAAC1T,IAAI,CAAC,IAAI,CAAC;OACfqT,IAAI,CAACrG,KAAK,EAAE;;IAEb,CAAC;GAEFqG,IAAI,CAACE,WAAW,CAAC;KAChBI,SAAS,EAAE;IACX,CAAC;GAEFN,IAAI,CAACE,WAAW,CAAC;KAChBC,OAAO,EAAE;OAAE9M,EAAE,EAAE;MAA+B;KAC9CvD,IAAI,EAAEC,aAAG,CAACC,UAAU,CAAC,gCAAgC,CAAC;KACtDoQ,SAAS,EAAE,qCAAqC;KAChDC,OAAO,EAAE,mBAAM;OACd,MAAI,CAAC1T,IAAI,CAAC,MAAM,CAAC;OACjBqT,IAAI,CAACrG,KAAK,EAAE;;IAEb,CAAC;GAEFqG,IAAI,CAACE,WAAW,CAAC;KAChBC,OAAO,EAAE;OAAE9M,EAAE,EAAE;MAA2B;KAC1CvD,IAAI,EAAEC,aAAG,CAACC,UAAU,CAAC,4BAA4B,CAAC;KAClDoQ,SAAS,EAAE,iCAAiC;KAC5CC,OAAO,EAAE,mBAAM;OACd,MAAI,CAAC1T,IAAI,CAAC,YAAY,CAAC;OACvBqT,IAAI,CAACrG,KAAK,EAAE;;IAEb,CAAC;GAEF,OAAOqG,IAAI;CACZ;;;;CCxED;CAAA;CAAA;CAAA;AADA,CAgBwB;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;AAiBxB,KAAaC,IAAI;GAiBhB,cAAYxT,OAAc,EAC1B;KAAA;KAAA2F;KAAAA;KAAAA;KAAAA;KAAAA;KAAAA;KAAAA;KAAAA;KAAAA;KAAAA;KAAAA;KAAAA;KAAAA;KAAAA;KAAAA;KAAAA;KAAAA;KAAAA;KAAAA;KAAAA;KAAAA;KAAAA;KAAAA;KAAAA;KAAAA;KAAAA;KAAAlD;OAAA;OAAA,OAhBS,IAAI2O,eAAK,CAACC,WAAW;;KAAE5O;OAAA;OAAA;;KAAAA;OAAA;OAAA;;KAAAA;OAAA;OAAA;;KAAAA;OAAA;OAAA;;KAAAA;OAAA;OAAA;;KAAAA;OAAA;OAAA;;KAAAA;OAAA;OAAA;;KAAAA;OAAA;OAAA;;KAAAA;OAAA;OAAA,OAWJ;;KAAKA;OAAA;OAAA,OAER;;KAIxB6E,6BAAI,oCAAJ,IAAI,EAAYtH,OAAM;KAEtBsH,6BAAI,sCAAJ,IAAI,EAAetH,OAAM;KAEzBsH,6BAAI,4CAAJ,IAAI;;GACJ;KAAA;KAAA,6BAkBYwM,SAAsB,EACnC;OACC,IAAI,CAACC,cAAI,CAACC,SAAS,CAACF,SAAS,CAAC,EAC9B;SACC,MAAM,IAAIG,KAAK,CAAC,+DAA+D,CAAC;;OAGjF,IAAMpJ,IAAI,GAAG,IAAID,IAAI,0BAAC,IAAI,kCAAJ,IAAI,EAAW,MAAM,EAAE;OAE7C,IAAMsJ,SAAS,GAAGrJ,IAAI,CAACuD,QAAQ,EAAE;OACjC,IAAI8F,SAAS,EACb;SACCtM,aAAG,CAACiF,QAAQ,CAACiH,SAAS,EAAEI,SAAS,CAAC;;OAGnCtM,aAAG,CAACuM,MAAM,CACTtJ,IAAI,CAAC5H,MAAM,EAAE,EACb6Q,SAAS,CACT;;;KACD;KAAA,iCAEgBA,SAAsB,EACvC;OACC,IAAI,CAACC,cAAI,CAACC,SAAS,CAACF,SAAS,CAAC,EAC9B;SACC,MAAM,IAAIG,KAAK,CAAC,+DAA+D,CAAC;;OAGjFrM,aAAG,CAACiF,QAAQ,CACXiH,SAAS,EACT,CACC,+BAA+B,EAC/B,gBAAgB,CAChB,CACD;OAEDlM,aAAG,CAACuM,MAAM,CAACnR,aAAG,CAACC,MAAM,8FAAW6Q,SAAS,CAAC;;;KAC1C;KAAA,gCAEeA,SAAsB,EACtC;OACClM,aAAG,CAACuM,MAAM,0BAAC,IAAI,4CAAJ,IAAI,GAAqBL,SAAS,CAAC;OAE9C,6BAAI,IAAI,kCAAJ,IAAI,EAAW,WAAW,GAC9B;SACClM,aAAG,CAACuM,MAAM,0BAAC,IAAI,sCAAJ,IAAI,GAAkBL,SAAS,CAAC;;OAG5ClM,aAAG,CAACuM,MAAM,0BAAC,IAAI,0CAAJ,IAAI,GAAoBL,SAAS,CAAC;;;KAC7C;KAAA,qCAEoBA,SAAsB,EAC3C;OACClM,aAAG,CAACuM,MAAM,0BAAC,IAAI,sDAAJ,IAAI,GAA0BL,SAAS,CAAC;OACnDlM,aAAG,CAACuM,MAAM,0BAAC,IAAI,oDAAJ,IAAI,GAAyBL,SAAS,CAAC;OAElD,6BAAI,IAAI,kCAAJ,IAAI,EAAW,WAAW,GAC9B;SACClM,aAAG,CAACuM,MAAM,0BAAC,IAAI,sCAAJ,IAAI,GAAkBL,SAAS,CAAC;;OAG5ClM,aAAG,CAACuM,MAAM,0BAAC,IAAI,0CAAJ,IAAI,GAAoBL,SAAS,CAAC;;;KAC7C;KAAA,oCAEmBA,SAAsB,EAC1C;OACClM,aAAG,CAACuM,MAAM,0BAAC,IAAI,oDAAJ,IAAI,GAAyBL,SAAS,CAAC;OAClDlM,aAAG,CAACuM,MAAM,0BAAC,IAAI,kDAAJ,IAAI,GAAwBL,SAAS,CAAC;;;GACjD;CAAA;CAwXD,6BA3cA;GACC,IAAMM,YAAY,GAAG,IAAI9U,YAAY,0BAAC,IAAI,kCAAJ,IAAI,EAAW,UAAU,EAAE;GACjE8U,YAAY,CAAC/O,SAAS,CAAC,QAAQ,EAAEiC,6BAAI,yBAAS3H,IAAI,CAAC,IAAI,CAAC,CAAC;GAEzD0U,gBAAI,CAAChP,SAAS,CAAC+O,YAAY,CAAC;CAC7B;CAAC,sBAGD;GAAA;GACC,IAAMtL,gBAAgB,GAAG3I,QAAQ,CAACsR,YAAY,0BAAC,IAAI,kCAAJ,IAAI,EAAW,UAAU,EAAE;GAC1E,+DAAI,wEAAJ,sBAAgB2B,MAAM,CAACtK,gBAAgB,CAAC;GACxCxB,6BAAI,gCAAJ,IAAI,EAAc8L,MAAM,CAACtK,gBAAgB,CAAC;GAC1C,sCAAI,SAAOsK,MAAM,CAACtK,gBAAgB,CAAC;CACpC;CAAC,uBAwEU9I,MAAc,EACzB;GACC,sCAAI,YAAQsR,GAAG,CAAC,QAAQ,EAAEtR,MAAM,CAAC;GAEjC,IAAIA,MAAM,CAACuB,gBAAgB,EAC3B;KACC,sCAAI,qBAAqBvB,MAAM,CAACuB,gBAAgB,CAC9C0H,MAAM,CAAC,UAACC,IAAI;OAAA,OAAKA,IAAI,CAACwB,OAAO;OAAC,CAC9BnG,GAAG,CAAC,UAAC2E,IAAI;OAAA,OAAKzJ,QAAQ,CAACyJ,IAAI,CAACtC,EAAE,EAAE,EAAE,CAAC;OAAC;;CAGxC;CAAC,wBAEa5G,MAAc,EAC5B;GACC,sCAAI,SAAS,IAAIkI,IAAI,CAAC;KACrBC,UAAU,2BAAE,IAAI,kCAAJ,IAAI,EAAW,MAAM,CAAC;KAClCC,QAAQ,2BAAE,IAAI,kCAAJ,IAAI,EAAW,UAAU,CAAC;KACpC7G,gBAAgB,2BAAE,IAAI,kCAAJ,IAAI,EAAW,kBAAkB;IACnD,CAAC;GAEF,sCAAI,WAAW,IAAI2J,UAAU,CAAC;KAC7BG,cAAc,EAAErL,MAAM,CAACqL,cAAc;KACrCC,WAAW,EAAEtL,MAAM,CAACsL,WAAW;KAC/BC,YAAY,EAAEvL,MAAM,CAACuL;IACrB,CAAC;CACH;CAAC,sBAESgG,KAAa,EACvB;GACC,OAAO,sCAAI,YAAQC,GAAG,CAAC,QAAQ,CAAC,CAACD,KAAK,CAAC;CACxC;CAAC,6BAGD;GACC,WAA8BvO,aAAG,CAACC,MAAM;KAAhC0F,IAAI,QAAJA,IAAI;KAAE2L,WAAW,QAAXA,WAAW;GAezBhI,eAAK,CAAC3M,IAAI,CAACgJ,IAAI,EAAE,OAAO,EAAErB,6BAAI,qCAAiB3H,IAAI,CAAC,IAAI,EAAE2U,WAAW,CAAC,CAAC;GAEvE,OAAO3L,IAAI;CACZ;CAAC,kCAGD;GACC,IAAMA,IAAI,GAAG3F,aAAG,CAACC,MAAM,gWAKtB;GAEDqJ,eAAK,CAAC3M,IAAI,CAACgJ,IAAI,EAAE,OAAO,EAAErB,6BAAI,+CAAsB3H,IAAI,CAAC,IAAI,CAAC,CAAC;GAE/D,OAAOgJ,IAAI;CACZ;CAAC,iCAGD;GACC,IAAMA,IAAI,GAAG3F,aAAG,CAACC,MAAM,2PAItB;GAEDqJ,eAAK,CAAC3M,IAAI,CAACgJ,IAAI,EAAE,OAAO,EAAErB,6BAAI,6CAAqB3H,IAAI,CAAC,IAAI,CAAC,CAAC;GAE9D,OAAOgJ,IAAI;CACZ;CAAC,iCAGD;GACC,IAAMA,IAAI,GAAG3F,aAAG,CAACC,MAAM,0VAKtB;GAEDqJ,eAAK,CAAC3M,IAAI,CAACgJ,IAAI,EAAE,OAAO,EAAErB,6BAAI,6CAAqB3H,IAAI,CAAC,IAAI,CAAC,CAAC;GAE9D,OAAOgJ,IAAI;CACZ;CAAC,0BAGD;GAAA;GACC,IAAI,mCAAC,IAAI,cAAY,EACrB;KACC,sCAAI,eAAe3F,aAAG,CAACC,MAAM;KAM7BqJ,eAAK,CAAC3M,IAAI,mCAAC,IAAI,gBAAc,OAAO,EAAE2H,6BAAI,+BAAc3H,IAAI,CAAC,IAAI,CAAC,CAAC;KAEnE,6BAAI,IAAI,kCAAJ,IAAI,EAAW,OAAO,GAC1B;OACC4U,UAAU,CAAC;SAAA,gCAAM,KAAI,wCAAJ,KAAI,oCAAgB,KAAI;QAAa,EAAE,GAAG,CAAC;;;GAI9D,yCAAO,IAAI;CACZ;CAAC,4BAGD;GACC,IAAM5L,IAAI,GAAG3F,aAAG,CAACC,MAAM,iPAItB;GAEDqJ,eAAK,CAAC3M,IAAI,CAACgJ,IAAI,EAAE,OAAO,EAAErB,6BAAI,mCAAgB3H,IAAI,CAAC,IAAI,CAAC,CAAC;GAEzD,OAAOgJ,IAAI;CACZ;CAAC,gCAGD;GACC,IAAMA,IAAI,GAAG3F,aAAG,CAACC,MAAM,iPAItB;GAEDqJ,eAAK,CAAC3M,IAAI,CAACgJ,IAAI,EAAE,OAAO,EAAErB,6BAAI,2CAAoB3H,IAAI,CAAC,IAAI,CAAC,CAAC;GAE7D,OAAOgJ,IAAI;CACZ;CAAC,0BAEe/C,WAAwB,EACxC;GAAA;GACC,IAAI,mCAAC,IAAI,aAAW,EACpB;KACC,sCAAI,cAAc,IAAIyN,SAAS,CAAC;OAC/BzN,WAAW,EAAEA;MACb,CAAC;KACF,sCAAI,cAAYP,SAAS,CAAC,IAAI,EAAE,YAAM;OACrC,wCAAI,SAAOkD,cAAc,EAAE;MAC3B,CAAC;KACF,sCAAI,cAAYlD,SAAS,CAAC,MAAM,EAAE,YAAM;OACvC,wCAAI,SAAOL,QAAQ,EAAE;MACrB,CAAC;KACF,sCAAI,cAAYK,SAAS,CAAC,YAAY,EAAE,YAAM;OAC7C,wCAAI,SAAOY,UAAU,CAACL,WAAW,CAAC;MAClC,CAAC;;GAGH,sCAAI,cAAYgD,IAAI,EAAE;CACvB;CAAC,+BAEoBnB,KAAK,EAC1B;GACC,IAAI,mCAAC,IAAI,iBAAe,EACxB;KACC,sCAAI,kBAAkB,IAAI+M,6BAAQ,CAAC;OAClCjV,OAAO,2BAAE,IAAI,kCAAJ,IAAI,EAAW,UAAU;MAClC,CAAC;;GAGH,sCAAI,kBAAgBkV,QAAQ,CAAChN,KAAK,CAACE,MAAM,CAAC;CAC3C;CAAC,8BAEmBF,KAAK,EACzB;GACC,IAAI,mCAAC,IAAI,oBAAkB,EAC3B;KACC,sCAAI,qBAAqB,IAAIiN,mCAAW,CAAC;OACxCnV,OAAO,2BAAE,IAAI,kCAAJ,IAAI,EAAW,UAAU,CAAC;OACnCoV,aAAa,2BAAE,IAAI,kCAAJ,IAAI,EAAW,sBAAsB,CAAC;OACrDC,YAAY,2BAAE,IAAI,kCAAJ,IAAI,EAAW,qBAAqB,CAAC;OACnDC,UAAU,2BAAE,IAAI,kCAAJ,IAAI,EAAW,sBAAsB;MACjD,CAAC;;GAGH,sCAAI,qBAAmBJ,QAAQ,CAAChN,KAAK,CAACE,MAAM,CAAC;CAC9C;CAAC,8BAEmBF,KAAK,EACzB;CAEC,yBAGD;GACC,IAAMqN,MAAM,4BAAG,IAAI,gCAAJ,IAAI,CAAa;GAEhC,IAAIA,MAAM,CAACjL,OAAO,EAAE,EACpB;KACCiL,MAAM,CAAC5H,KAAK,EAAE;IACd,MAED;KACC4H,MAAM,CAAClM,IAAI,EAAE;;CAEf;CAAC,uBAGD;GACC,IAAI,mCAAC,IAAI,UAAQ,EACjB;KACC,sCAAI,WAAW,IAAIe,MAAM,CAAC;OACzBhB,IAAI,oCAAE,IAAI,cAAY;OACtBpH,gBAAgB,2BAAE,IAAI,kCAAJ,IAAI,EAAW,kBAAkB;MACnD,CAAC;KAEF,sCAAI,WAAS8D,SAAS,CAAC,SAAS,EAAEiC,6BAAI,mCAAgB3H,IAAI,CAAC,IAAI,CAAC,CAAC;KACjE,sCAAI,WAAS0F,SAAS,CAAC,eAAe,EAAEiC,6BAAI,uCAAkB3H,IAAI,CAAC,IAAI,CAAC,CAAC;;GAG1E,yCAAO,IAAI;CACZ;CAAC,2BAEgB8H,KAAK,EACtB;GACC,IAAMpF,KAAK,GAAGoF,KAAK,CAAC1H,IAAI;GACxBuH,6BAAI,oCAAJ,IAAI,EAAcjF,KAAK;CACxB;CAAC,2BAGD;GACC,IAAIiF,6BAAI,kCAAJ,IAAI,EAAW,OAAO,KAAK,mCAAC,IAAI,4BAA0B,EAC9D;KACC,IAAMyN,qBAAqB,GAAG/M,QAAQ,CAACuE,aAAa,CAAC,2CAA2C,CAAC;KACjG,IAAI,CAACwI,qBAAqB,EAC1B;OACC;;KAGDzN,6BAAI,wCAAJ,IAAI,EAAgByN,qBAAqB,EAAE;OAC1ClP,KAAK,EAAEvC,aAAG,CAACC,UAAU,CAAC,uCAAuC,CAAC;OAC9DF,IAAI,EAAEC,aAAG,CAACC,UAAU,CAAC,sCAAsC;MAC3D;KAED,sCAAI,6BAA6B,IAAI;;CAEvC;CAAC,yBAEcoF,IAAI,EACnB;GAAA;GAAA,IADqBqM,SAAS,uEAAG,IAAI;GAEpCnQ,iBAAO,CAACC,aAAa,CAAC,WAAW,CAAC,CAACtE,IAAI,CAAC,YAAM;KAC7C,IAAMyU,SAAS,GAAG,IAAI7U,EAAE,CAAC8U,SAAS,CAAC;OAClCC,aAAa,EAAExM,IAAI;OACnByM,YAAY,EAAE;MACd,CAAC;KAEFxN,aAAG,CAACiF,QAAQ,CAAClE,IAAI,EAAE,UAAU,CAAC;KAC9BsM,SAAS,CAACnS,UAAU,CAAC;OACpBuS,aAAa,EAAE,yBAAM;SACpBzN,aAAG,CAACgF,WAAW,CAACjE,IAAI,EAAE,UAAU,CAAC;SACjCsM,SAAS,CAAC/H,KAAK,EAAE;;MAElB,CAAC;KAEF+H,SAAS,CAACK,QAAQ,CAAC,SAAS,CAAC;KAC7BL,SAAS,CAACrM,IAAI,EAAE;KAEhB,IAAIoM,SAAS,EACb;OACC1N,+BAAI,wCAAJ,MAAI,EAAgBqB,IAAI,EAAE;SACzB9C,KAAK,EAAEmP,SAAS,CAACnP,KAAK;SACtBxC,IAAI,EAAE2R,SAAS,CAAC3R,IAAI;SACpB4R,SAAS,EAATA;QACA;;IAEF,CAAC;CACH;CAAC;GAAA;CAAA;CAAA;GAAA,4GAEoBtM,IAAI,EAAE3I,MAAM;KAAA;KAAA;OAAA;SAAA;WAAA;WAAA,OAER6E,iBAAO,CAACC,aAAa,CAAC,SAAS,CAAC;SAAA;WAAA;WAAhDyQ,KAAK,yBAALA,KAAK;WAEPC,KAAK,GAAG,IAAID,KAAK,CAAC;aACvBE,UAAU,EAAE,IAAI;aAChBC,QAAQ,EAAE,IAAI;aACdC,KAAK,EAAE,CACN;eACChO,MAAM,EAAEgB,IAAI;eACZ9C,KAAK,EAAE7F,MAAM,CAAC6F,KAAK;eACnBxC,IAAI,EAAErD,MAAM,CAACqD,IAAI;eACjB2G,QAAQ,EAAE,QAAQ;eAClB4L,SAAS,EAAE;iBACVC,GAAG,EAAE,IAAI;iBACTC,MAAM,EAAE,KAAK;iBACbrS,KAAK,EAAE;;cAER;YAEF,CAAC;WAEF+R,KAAK,CAACO,YAAY,EAAE;WAEdC,UAAU,GAAGR,KAAK,CAAC1L,QAAQ,EAAE;WACnCkM,UAAU,CAACC,QAAQ,CAAC,GAAG,CAAC;WACxBD,UAAU,CAACE,mBAAmB,EAAE,CAACrO,KAAK,CAACsO,YAAY,GAAGhM,gBAAgB,CAAC6L,UAAU,CAACzI,SAAS,CAAC,CAAC,OAAO,CAAC;WACrGyI,UAAU,CAACjM,QAAQ,CAAC;aAAEE,MAAM,EAAEtB,IAAI,CAACuB,WAAW,GAAG,CAAC,GAAG;YAAG,CAAC;WACzD8L,UAAU,CAAC3Q,SAAS,CAAC,SAAS,EAAE;aAAA,OAAMrF,MAAM,CAACiV,SAAS,CAAC/H,KAAK,EAAE;aAAC;WAC/D8I,UAAU,CAAC9D,WAAW,CAAC,IAAI,CAAC;SAAC;SAAA;WAAA;;;;GAAA;CAAA;CAAA,uBAGjB7P,KAAK,EAClB;GAAA;GACC,IAAMqI,OAAO,GAAGrI,KAAK,CAAC4G,MAAM,CAAC,UAAC0B,MAAM;KAAA,OAAK,CAAC,wCAAI,qBAAmBpB,QAAQ,CAACoB,MAAM,CAAC;KAAC;GAClF,IAAMyL,OAAO,GAAG,sCAAI,qBAAmBnN,MAAM,CAAC,UAAC0B,MAAM;KAAA,OAAK,CAACtI,KAAK,CAACkH,QAAQ,CAACoB,MAAM,CAAC;KAAC;GAClF,sCAAI,qBAAqBtI,KAAK;;;GAG9BlC,QAAQ,CAACkW,WAAW,0BAAC,IAAI,kCAAJ,IAAI,EAAW,UAAU,GAAGhU,KAAK,CAAC,CAAC7B,IAAI,CAC3D,YAAM;KACLJ,EAAE,CAACkW,EAAE,CAACC,YAAY,CAACC,MAAM,CAACC,MAAM,CAAC;OAChCrJ,OAAO,2BAAE,MAAI,sDAAJ,MAAI,EAAuB1C,OAAO,EAAE0L,OAAO;MACpD,CAAC;IACF,EACD,UAACnU,KAAK;KAAA,OAAKC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;KAC7B;CACF;CAAC,gCAEqByI,OAAO,EAAE0L,OAAO,EACtC;GACC,IAAMM,UAAU,GAAGhM,OAAO,CAACnF,MAAM,GAAG,CAAC;GACrC,IAAMoR,UAAU,GAAGP,OAAO,CAAC7Q,MAAM,GAAG,CAAC;GAErC,IAAImR,UAAU,IAAI,CAACC,UAAU,EAC7B;KACC,OAAOrT,aAAG,CAACC,UAAU,CAAC,4BAA4B,CAAC;;GAGpD,IAAI,CAACmT,UAAU,IAAIC,UAAU,EAC7B;KACC,OAAOrT,aAAG,CAACC,UAAU,CAAC,+BAA+B,CAAC;;GAGvD,IAAImT,UAAU,IAAIC,UAAU,EAC5B;KACC,OAAOrT,aAAG,CAACC,UAAU,CAAC,+BAA+B,CAAC;;GAGvD,OAAOD,aAAG,CAACC,UAAU,CAAC,4BAA4B,CAAC;CACpD;CAAC,yBAEckE,KAAK,EACpB;GACC,IAAI,mCAAC,IAAI,cAAU,EACnB;KACC,sCAAI,eAAa,IAAIyL,QAAQ,CAAC;OAC7BtN,WAAW,EAAE6B,KAAK,CAACE,MAAM;OACzBsD,IAAI,2BAAE,IAAI,kCAAJ,IAAI,EAAW,MAAM,CAAC;OAC5B7C,QAAQ,2BAAE,IAAI,kCAAJ,IAAI,EAAW,UAAU,CAAC;OACpCyC,IAAI,2BAAE,IAAI,kCAAJ,IAAI,EAAW,MAAM,CAAC;OAC5BsH,IAAI,oCAAE,IAAI,QAAM;OAChBgB,MAAM,oCAAE,IAAI;MACZ,CAAC;;GAGH,sCAAI,eAAWvK,IAAI,EAAE;CACtB;CAAC,6BAEkBnB,KAAK,EACxB;;;;;;;;"}