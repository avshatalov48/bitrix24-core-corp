{"version":3,"file":"script.js","sources":["src/util.js","src/confidentialityselector.js","src/scrum.js","src/avatar.js","src/themepicker.js","src/tags.js","src/typepresetselector.js","src/fields.js","src/buttons.js","src/wizard.js","src/alert.js","src/inviteselector.js","src/teamextranet.js","src/team.js","src/features.js","src/uf.js","src/index.js"],"sourcesContent":["import {Loc, Type} from 'main.core';\n\nimport {WorkgroupForm} from './index';\n\nexport class Util\n{\n\tstatic cssClass = {\n\t\tselectorActive: '--active',\n\t\tselectorDisabled: '--disabled',\n\t};\n\n\tstatic initExpandSwitches()\n\t{\n\t\tconst expandSwitchers = document.querySelectorAll('[data-role=\"socialnetwork-group-create-ex__expandable\"]');\n\n\t\texpandSwitchers.forEach((switcher) => {\n\n\t\t\tswitcher.addEventListener('click', (e) => {\n\n\t\t\t\tconst targetId = e.currentTarget.getAttribute('for');\n\t\t\t\tconst target = document.getElementById(targetId);\n\t\t\t\tconst switcherWrapper = target.firstElementChild;\n\n\t\t\t\tif (target.offsetHeight === 0)\n\t\t\t\t{\n\t\t\t\t\ttarget.style.height = switcherWrapper.offsetHeight + 'px';\n\t\t\t\t\ttarget.classList.add('--open');\n\n\t\t\t\t\tconst scrollToTarget = () => {\n\t\t\t\t\t\tlet elementRealTop = target.getBoundingClientRect().top / 100;\n\t\t\t\t\t\tlet time = 400;\n\t\t\t\t\t\tlet currentTime = 0;\n\t\t\t\t\t\tlet scrollBySvs = () => {\n\t\t\t\t\t\t\twindow.scrollBy(0, elementRealTop);\n\t\t\t\t\t\t}\n\t\t\t\t\t\twhile (currentTime <= time)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\twindow.setTimeout(scrollBySvs, currentTime, elementRealTop);\n\t\t\t\t\t\t\tcurrentTime += time / 100;\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttarget.removeEventListener('transitionend', scrollToTarget);\n\t\t\t\t\t}\n\n\t\t\t\t\tconst adjustHeight = () => {\n\t\t\t\t\t\ttarget.style.height = 'auto';\n\t\t\t\t\t\ttarget.removeEventListener('transitionend', adjustHeight);\n\t\t\t\t\t}\n\n\t\t\t\t\ttarget.addEventListener('transitionend', adjustHeight);\n\t\t\t\t\ttarget.addEventListener('transitionend', scrollToTarget);\n\t\t\t\t}\n\n\t\t\t\tif (target.offsetHeight > 0)\n\t\t\t\t{\n\t\t\t\t\ttarget.style.height = target.offsetHeight + 'px';\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\ttarget.style.removeProperty('height');\n\t\t\t\t\t\ttarget.classList.remove('--open');\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\tstatic initDropdowns()\n\t{\n\n\t\tconst dropdownAreaList = document.querySelectorAll('[data-role=\"soc-net-dropdown\"]');\n\n\t\tdropdownAreaList.forEach((dropdownArea) => {\n\n\t\t\tdropdownArea.addEventListener('click', (e) => {\n\n\t\t\t\tconst dropdownArea = e.currentTarget;\n\t\t\t\tconst dropdownItemsData = this.getDropdownItems(dropdownArea);\n\t\t\t\tconst items = [];\n\n\t\t\t\tObject.entries(dropdownItemsData).forEach(([key, value]) => {\n\t\t\t\t\titems.push({\n\t\t\t\t\t\ttext: value,\n\t\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\t\tdropdownMenu.close();\n\n\t\t\t\t\t\t\tthis.setDropdownValue(\n\t\t\t\t\t\t\t\tdropdownArea.querySelector('.ui-ctl-element'),\n\t\t\t\t\t\t\t\tvalue,\n\t\t\t\t\t\t\t\tdropdownArea\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tthis.setInputValue(\n\t\t\t\t\t\t\t\tdropdownArea.querySelector('input'),\n\t\t\t\t\t\t\t\tkey,\n\t\t\t\t\t\t\t\tdropdownArea\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\tlet neighbourDropdownArea = null;\n\t\t\t\t\t\t\tif (dropdownArea.classList.contains('--nonproject'))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tneighbourDropdownArea = dropdownArea.parentNode.querySelector('.--project');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (dropdownArea.classList.contains('--project'))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tneighbourDropdownArea = dropdownArea.parentNode.querySelector('.--nonproject');\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (Type.isDomNode(neighbourDropdownArea))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.setDropdownValue(\n\t\t\t\t\t\t\t\t\tneighbourDropdownArea.querySelector('.ui-ctl-element'),\n\t\t\t\t\t\t\t\t\tvalue,\n\t\t\t\t\t\t\t\t\tneighbourDropdownArea\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tthis.setInputValue(\n\t\t\t\t\t\t\t\t\tneighbourDropdownArea.querySelector('input'),\n\t\t\t\t\t\t\t\t\tkey,\n\t\t\t\t\t\t\t\t\tneighbourDropdownArea\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\n\t\t\t\tconst dropdownMenu = new BX.PopupMenuWindow({\n\t\t\t\t\tautoHide: true,\n\t\t\t\t\tcacheable: false,\n\t\t\t\t\tbindElement: dropdownArea,\n\t\t\t\t\twidth: dropdownArea.offsetWidth,\n\t\t\t\t\tcloseByEsc: true,\n\t\t\t\t\tanimation: 'fading-slide',\n\t\t\t\t\titems: items,\n\t\t\t\t});\n\n\t\t\t\tdropdownMenu.params.width = dropdownArea.offsetWidth;\n\t\t\t\tdropdownMenu.show();\n\t\t\t});\n\t\t});\n\t}\n\n\tstatic setDropdownValue(node, value, containerNode)\n\t{\n\t\tconst dropdownItemsData = this.getDropdownItems(containerNode);\n\t\tObject.entries(dropdownItemsData).forEach(([, itemValue]) => {\n\t\t\tif (value === itemValue)\n\t\t\t{\n\t\t\t\tnode.innerText = value;\n\t\t\t}\n\t\t});\n\t}\n\n\tstatic setInputValue(node, value, containerNode)\n\t{\n\t\tconst dropdownItemsData = this.getDropdownItems(containerNode);\n\t\tObject.entries(dropdownItemsData).forEach(([itemKey]) => {\n\t\t\tif (value === itemKey)\n\t\t\t{\n\t\t\t\tnode.value = value;\n\t\t\t}\n\t\t});\n\t}\n\n\tstatic getDropdownItems(node)\n\t{\n\t\tlet dropdownItemsData = {};\n\n\t\ttry\n\t\t{\n\t\t\tdropdownItemsData = JSON.parse(node.getAttribute('data-items'));\n\t\t}\n\t\tcatch(e)\n\t\t{\n\t\t\treturn {};\n\t\t}\n\n\t\tif (!Type.isPlainObject(dropdownItemsData))\n\t\t{\n\t\t\treturn {};\n\t\t}\n\n\t\treturn dropdownItemsData;\n\t}\n\n\tstatic recalcFormPartProject(isChecked)\n\t{\n\t\tisChecked = !!isChecked;\n\n\t\tconst projectCheckboxNode = document.getElementById('GROUP_PROJECT');\n\t\tif (projectCheckboxNode)\n\t\t{\n\t\t\tthis.setCheckedValue(projectCheckboxNode, isChecked);\n\t\t}\n\n\t\tdocument.querySelectorAll('.socialnetwork-group-create-ex__create--switch-project, .socialnetwork-group-create-ex__create--switch-nonproject').forEach((node) => {\n\t\t\tif (isChecked)\n\t\t\t{\n\t\t\t\tnode.classList.add('--project');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tnode.classList.remove('--project');\n\t\t\t}\n\t\t});\n/*\n\t\tconst submitButtonNode = document.getElementById('sonet_group_create_popup_form_button_submit');\n\t\tif (\n\t\t\tsubmitButtonNode\n\t\t\t&& submitButtonNode.getAttribute('bx-action-type') === 'create'\n\t\t)\n\t\t{\n\t\t\tsubmitButtonNode.innerHTML = (isChecked ? Loc.getMessage('SONET_GCE_T_DO_CREATE_PROJECT') : Loc.getMessage('SONET_GCE_T_DO_CREATE'));\n\t\t}\n*/\n\t\tthis.recalcNameInput();\n\t}\n\n\tstatic recalcNameInput()\n\t{\n\t\tconst inputNode = document.getElementById('GROUP_NAME_input');\n\t\tif (!inputNode)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tlet placeholderText = Loc.getMessage('SONET_GCE_T_NAME3');\n\n\t\tconst formInstance = WorkgroupForm.getInstance();\n\t\tif (Type.isPlainObject(formInstance.projectTypes[formInstance.selectedProjectType]))\n\t\t{\n\t\t\tif (\n\t\t\t\tType.isStringFilled(formInstance.projectTypes[formInstance.selectedProjectType].SCRUM_PROJECT)\n\t\t\t\t&& formInstance.projectTypes[formInstance.selectedProjectType].SCRUM_PROJECT === 'Y'\n\t\t\t)\n\t\t\t{\n\t\t\t\tplaceholderText = Loc.getMessage('SONET_GCE_T_NAME3_SCRUM');\n\t\t\t}\n\t\t\telse if (\n\t\t\t\tType.isStringFilled(formInstance.projectTypes[formInstance.selectedProjectType].PROJECT)\n\t\t\t\t&& formInstance.projectTypes[formInstance.selectedProjectType].PROJECT === 'Y'\n\t\t\t)\n\t\t\t{\n\t\t\t\tplaceholderText = Loc.getMessage('SONET_GCE_T_NAME3_PROJECT');\n\t\t\t}\n\t\t}\n\n\t\tinputNode.placeholder = placeholderText;\n\t}\n\n\tstatic setCheckedValue(node, value)\n\t{\n\t\tif (!Type.isDomNode(node))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tvalue = !!value;\n\n\t\tif (node.type === 'checkbox')\n\t\t{\n\t\t\tnode.checked = value;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tnode.value = (value ? 'Y' : 'N');\n\t\t}\n\t}\n\n\tstatic getCheckedValue(node)\n\t{\n\t\tlet result = false;\n\n\t\tif (!Type.isDomNode(node))\n\t\t{\n\t\t\treturn result;\n\t\t}\n\n\t\tif (node.type == 'hidden')\n\t\t{\n\t\t\tresult = (node.value === 'Y');\n\t\t}\n\t\telse if (node.type == 'checkbox')\n\t\t{\n\t\t\tresult = node.checked;\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tstatic unselectAllSelectorItems(container, selectorClass)\n\t{\n\t\tif (!Type.isDomNode(container))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tcontainer.querySelectorAll(`.${selectorClass}`).forEach((selector) => {\n\t\t\tselector.classList.remove(this.cssClass.selectorActive);\n\t\t});\n\t}\n\n\tstatic selectSelectorItem(node)\n\t{\n\t\tnode.classList.add(this.cssClass.selectorActive);\n\t}\n\n\tstatic disableAllSelectorItems(container, selectorClass)\n\t{\n\t\tif (!Type.isDomNode(container))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tcontainer.querySelectorAll(`.${selectorClass}`).forEach((selector) => {\n\t\t\tselector.classList.add(this.cssClass.selectorDisabled);\n\t\t});\n\t}\n\n\tstatic enableAllSelectorItems(container, selectorClass)\n\t{\n\t\tif (!Type.isDomNode(container))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tcontainer.querySelectorAll(`.${selectorClass}`).forEach((selector) => {\n\t\t\tselector.classList.remove(this.cssClass.selectorDisabled);\n\t\t});\n\t}\n\n\tstatic enableSelectorItem(node)\n\t{\n\t\tnode.classList.remove(this.cssClass.selectorDisabled);\n\t}\n\n}\n","import {Type} from 'main.core';\nimport {Util} from './util';\n\nimport {WorkgroupForm} from './index';\n\nexport class ConfidentialitySelector\n{\n\tstatic cssClass = {\n\t\tcontainer: 'socialnetwork-group-create-ex__type-confidentiality-wrapper',\n\t\tselector: 'socialnetwork-group-create-ex__group-selector',\n\t};\n\n\tconstructor()\n\t{\n\t\tlet firstItemSelected = false;\n\n\t\tConfidentialitySelector.getItems().forEach((selector) => {\n\t\t\tselector.addEventListener('click', (e) => {\n\n\t\t\t\tconst selector = e.currentTarget;\n\t\t\t\tif (selector.classList.contains(Util.cssClass.selectorDisabled))\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tUtil.unselectAllSelectorItems(ConfidentialitySelector.getContainer(), ConfidentialitySelector.cssClass.selector);\n\t\t\t\tUtil.selectSelectorItem(selector);\n\n\t\t\t\tWorkgroupForm.getInstance().recalcForm({\n\t\t\t\t\tselectedConfidentialityType: selector.getAttribute('data-bx-confidentiality-type'),\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tconst confidentialityType = selector.getAttribute('data-bx-confidentiality-type');\n\n\t\t\tif (Type.isStringFilled(WorkgroupForm.getInstance().selectedConfidentialityType))\n\t\t\t{\n\t\t\t\tif (WorkgroupForm.getInstance().selectedConfidentialityType === confidentialityType)\n\t\t\t\t{\n\t\t\t\t\tthis.selectItem(selector);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (!firstItemSelected)\n\t\t\t{\n\t\t\t\tthis.selectItem(selector);\n\t\t\t\tfirstItemSelected = true;\n\t\t\t}\n\t\t});\n\t}\n\n\tselectItem(selector: Element)\n\t{\n\t\tUtil.selectSelectorItem(selector);\n\t\tWorkgroupForm.getInstance().recalcForm({\n\t\t\tselectedConfidentialityType: selector.getAttribute('data-bx-confidentiality-type'),\n\t\t});\n\t}\n\n\tstatic getContainer()\n\t{\n\t\treturn document.querySelector(`.${this.cssClass.container}`);\n\t}\n\n\tstatic getItems()\n\t{\n\t\tconst container = this.getContainer();\n\t\tif (!container)\n\t\t{\n\t\t\treturn [];\n\t\t}\n\n\t\treturn container.querySelectorAll(`.${this.cssClass.selector}`);\n\t}\n\n\tstatic unselectAll()\n\t{\n\t\tUtil.unselectAllSelectorItems(this.getContainer(), this.cssClass.selector);\n\t}\n\n\tstatic select(accessCode)\n\t{\n\t\tthis.getItems().forEach((selector) => {\n\t\t\tif (selector.getAttribute('data-bx-confidentiality-type') !== accessCode)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tUtil.selectSelectorItem(selector);\n\t\t});\n\t}\n\n\tstatic disableAll()\n\t{\n\t\tUtil.disableAllSelectorItems(this.getContainer(), this.cssClass.selector);\n\t}\n\n\tstatic enableAll()\n\t{\n\t\tUtil.enableAllSelectorItems(this.getContainer(), this.cssClass.selector);\n\t}\n\n\tstatic enable(accessCode)\n\t{\n\t\tthis.getItems().forEach((selector) => {\n\t\t\tif (selector.getAttribute('data-bx-confidentiality-type') !== accessCode)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tUtil.enableSelectorItem(selector);\n\t\t});\n\t}\n}\n","import {Dom, Type} from 'main.core';\n\nimport {ConfidentialitySelector} from './confidentialityselector';\nimport {WorkgroupForm} from './index';\nimport {Util} from './util';\n\nexport class Scrum\n{\n\tconstructor(\n\t\tparams: {\n\t\t\tisScrumProject: boolean,\n\t\t}\n\t)\n\t{\n\t\tthis.isScrumProject = params.isScrumProject;\n\t}\n\n\tmakeAdditionalCustomizationForm()\n\t{\n\t\tif (this.isScrumProject)\n\t\t{\n\t\t\tthis.createHiddenInputs();\n\t\t\tthis.showScrumBlocks();\n\t\t\tif (!Type.isStringFilled(WorkgroupForm.getInstance().selectedConfidentialityType))\n\t\t\t{\n\t\t\t\tConfidentialitySelector.unselectAll();\n\t\t\t\tConfidentialitySelector.select('open');\n\t\t\t\tWorkgroupForm.getInstance().recalcForm({\n\t\t\t\t\tselectedConfidentialityType: 'open',\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tconst landingCheckbox = document.getElementById('GROUP_LANDING');\n\t\t\tif (landingCheckbox)\n\t\t\t{\n\t\t\t\tlandingCheckbox.disabled = true;\n\t\t\t\tlandingCheckbox.checked = false;\n\t\t\t}\n\n\t\t\tthis.toggleFeatures(true);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.removeHiddenInputs();\n\t\t\tthis.hideScrumBlocks();\n\n\t\t\tconst landingCheckbox = document.getElementById('GROUP_LANDING');\n\t\t\tif (landingCheckbox)\n\t\t\t{\n\t\t\t\tlandingCheckbox.disabled = false;\n\t\t\t}\n\n\t\t\tthis.toggleFeatures(false);\n\t\t}\n\n\t\tUtil.recalcNameInput();\n\t}\n\n\thideScrumBlocks()\n\t{\n\t\tdocument.querySelectorAll('.socialnetwork-group-create-ex__create--switch-scrum, .socialnetwork-group-create-ex__create--switch-nonscrum').forEach((scrumBlock) => {\n\t\t\tscrumBlock.classList.remove('--scrum');\n\t\t});\n\n\t\tconst moderatorsBlock = document.getElementById('expandable-moderator-block');\n\t\tif (moderatorsBlock)\n\t\t{\n\t\t\tmoderatorsBlock.classList.add('socialnetwork-group-create-ex__content-expandable');\n\t\t}\n\n\t\tconst moderatorsSwitch = document.getElementById('GROUP_MODERATORS_PROJECT_switch');\n\t\tif (moderatorsSwitch)\n\t\t{\n\t\t\tmoderatorsSwitch.classList.add('ui-ctl-file-link');\n\t\t}\n\n\t\tconst ownerBlock = document.getElementById('GROUP_OWNER_block');\n\t\tif (ownerBlock)\n\t\t{\n\t\t\townerBlock.classList.remove('--space-bottom');\n\t\t}\n \t}\n\n\tshowScrumBlocks()\n\t{\n\t\tdocument.querySelectorAll('.socialnetwork-group-create-ex__create--switch-scrum, .socialnetwork-group-create-ex__create--switch-nonscrum').forEach((scrumBlock) => {\n\t\t\tscrumBlock.classList.add('--scrum');\n\t\t});\n\n\t\tconst moderatorsBlock = document.getElementById('expandable-moderator-block');\n\t\tif (moderatorsBlock)\n\t\t{\n\t\t\tmoderatorsBlock.classList.remove('socialnetwork-group-create-ex__content-expandable');\n\t\t}\n\n\t\tconst moderatorsSwitch = document.getElementById('GROUP_MODERATORS_PROJECT_switch');\n\t\tif (moderatorsSwitch)\n\t\t{\n\t\t\tmoderatorsSwitch.classList.remove('ui-ctl-file-link');\n\t\t}\n\n\t\tconst ownerBlock = document.getElementById('GROUP_OWNER_block');\n\t\tif (ownerBlock)\n\t\t{\n\t\t\townerBlock.classList.add('--space-bottom');\n\t\t}\n\t}\n\n\tcreateHiddenInputs()\n\t{\n\t\tdocument.forms['sonet_group_create_popup_form'].appendChild(\n\t\t\tDom.create('input', {\n\t\t\t\tattrs: {\n\t\t\t\t\ttype: 'hidden',\n\t\t\t\t\tname: 'SCRUM_PROJECT',\n\t\t\t\t\tvalue: 'Y',\n\t\t\t\t}\n\t\t\t})\n\t\t);\n\t}\n\n\tremoveHiddenInputs()\n\t{\n\t\tdocument.forms['sonet_group_create_popup_form'].querySelectorAll('input[name=\"SCRUM_PROJECT\"]')\n\t\t\t.forEach((input) => {\n\t\t\t\tDom.remove(input);\n\t\t\t})\n\t\t;\n\t}\n\n\ttoggleFeatures(isScrum: boolean)\n\t{\n\t\tconst featuresNode = document.querySelector('.socialnetwork-group-create-ex__project-instruments');\n\t\tif (featuresNode)\n\t\t{\n\t\t\tfeaturesNode.querySelectorAll('input[type=\"checkbox\"][name=\"tasks_active\"], input[type=\"checkbox\"][name=\"calendar_active\"]').forEach((featuresCheckboxNode) => {\n\t\t\t\tif (isScrum)\n\t\t\t\t{\n\t\t\t\t\tfeaturesCheckboxNode.disabled = true;\n\t\t\t\t\tfeaturesCheckboxNode.checked = true;\n\n\t\t\t\t\tfeaturesCheckboxNode.parentNode.insertBefore(Dom.create('input', {\n\t\t\t\t\t\tattrs: {\n\t\t\t\t\t\t\ttype: 'hidden',\n\t\t\t\t\t\t\tname: featuresCheckboxNode.name,\n\t\t\t\t\t\t\tvalue: 'Y',\n\t\t\t\t\t\t}\n\t\t\t\t\t}), featuresCheckboxNode);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tfeaturesCheckboxNode.disabled = false;\n\n\t\t\t\t\tdocument.forms['sonet_group_create_popup_form'].querySelectorAll(`input[type=\"hidden\"][name=\"${featuresCheckboxNode.name}\"]`)\n\t\t\t\t\t\t.forEach((hiddenInput) => {\n\t\t\t\t\t\t\tDom.remove(hiddenInput);\n\t\t\t\t\t\t})\n\t\t\t\t\t;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n}\n","import { Type, Loc, Dom, ajax } from 'main.core';\nimport { BaseEvent, EventEmitter } from 'main.core.events';\nimport { Popup } from 'main.popup';\nimport { Button } from 'ui.buttons';\n\nexport class Avatar\n{\n\tstatic classList = {\n\t\thidden: '--hidden',\n\t\tselected: '--selected',\n\t};\n\n\tconstructor(\n\t\tparams: {\n\t\t\tcomponentName: string,\n\t\t\tsignedParameters: string,\n\t\t\tgroupId: number,\n\t\t}\n\t)\n\t{\n\t\tthis.confirmPopup = null;\n\n\t\tif (\n\t\t\t!Type.isStringFilled(params.componentName)\n\t\t\t|| Type.isUndefined(params.signedParameters)\n\t\t)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.componentName = params.componentName;\n\t\tthis.signedParameters = params.signedParameters;\n\t\tthis.groupId = (Type.isUndefined(params.groupId) ? parseInt(params.groupId) : 0);\n\n\t\tconst container = document.querySelector('[data-role=\"group-avatar-cont\"]');\n\t\tif (!container)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.selectorNode = container.querySelector('[data-role=\"group-avatar-selector\"]');\n\t\tthis.imageNode = container.querySelector('[data-role=\"group-avatar-image\"]');\n\t\tthis.inputNode = container.querySelector('[data-role=\"group-avatar-input\"]');\n\t\tthis.typeInputNode = container.querySelector('[data-role=\"group-avatar-type-input\"]');\n\t\tthis.removeNode = container.querySelector('[data-role=\"group-avatar-remove\"]');\n\n\t\tif (\n\t\t\t!Type.isDomNode(this.imageNode)\n\t\t\t|| !Type.isDomNode(this.inputNode)\n\t\t\t|| !Type.isDomNode(this.typeInputNode)\n\t\t\t|| !Type.isDomNode(this.removeNode)\n\t\t)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.recalc();\n\n\t\tconst avatarEditor = new BX.AvatarEditor({\n\t\t\tenableCamera: false,\n\t\t});\n\n\t\tthis.selectorNode.addEventListener('click', (e) => {\n\n\t\t\tif (\n\t\t\t\te.target.getAttribute('data-role') === 'group-avatar-remove'\n\t\t\t\t&& this.imageNode.style.backgroundImage !== ''\n\t\t\t)\n\t\t\t{\n\t\t\t\tthis.showConfirmPopup(Loc.getMessage('SONET_GCE_T_IMAGE_DELETE_CONFIRM'), this.deletePhoto.bind(this));\n\t\t\t}\n\t\t\telse if (e.target.getAttribute('data-role') === 'group-avatar-type')\n\t\t\t{\n\t\t\t\tthis.clearType();\n\t\t\t\tthis.setType(e.target.getAttribute('data-avatar-type'));\n\t\t\t}\n\t\t\telse if (e.target.getAttribute('data-role') === 'group-avatar-image')\n\t\t\t{\n\t\t\t\tavatarEditor.show('file');\n\t\t\t}\n\t\t});\n\n\t\tEventEmitter.subscribe('onApply', (event: BaseEvent) => {\n\t\t\tconst [ file ] = event.getCompatData();\n\n\t\t\tconst formData = new FormData();\n\t\t\tif (!file.name)\n\t\t\t{\n\t\t\t\tfile.name = 'tmp.png';\n\t\t\t}\n\t\t\tformData.append('newPhoto', file, file.name);\n\n\t\t\tthis.changePhoto(formData);\n\t\t});\n\t}\n\n\trecalc()\n\t{\n\t\tif (this.getFileId() <= 0)\n\t\t{\n\t\t\tthis.removeNode.classList.add(Avatar.classList.hidden);\n\t\t\tthis.imageNode.classList.remove(Avatar.classList.selected);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.removeNode.classList.remove(Avatar.classList.hidden);\n\t\t\tthis.imageNode.classList.add(Avatar.classList.selected);\n\t\t}\n\t}\n\n\tchangePhoto(formData)\n\t{\n\t\tconst loader = this.showLoader({\n\t\t\tnode: this.imageNode,\n\t\t\tloader: null,\n\t\t\tsize: 78,\n\t\t});\n\n\t\tajax.runComponentAction(this.componentName, 'loadPhoto', {\n\t\t\tsignedParameters: this.signedParameters,\n\t\t\tmode: 'ajax',\n\t\t\tdata: formData,\n\t\t}).then((response) => {\n\n\t\t\tif (\n\t\t\t\tType.isPlainObject(response.data)\n\t\t\t\t&& parseInt(response.data.fileId) > 0\n\t\t\t\t&& Type.isStringFilled(response.data.fileUri)\n\t\t\t)\n\t\t\t{\n\t\t\t\tthis.clearType();\n\t\t\t\tthis.inputNode.value = parseInt(response.data.fileId);\n\t\t\t\tthis.typeInputNode.value = '';\n\t\t\t\tthis.imageNode.style = `background-image: url('${response.data.fileUri}'); background-size: cover;`;\n\t\t\t\tthis.recalc();\n\t\t\t}\n\n\t\t\tthis.hideLoader({\n\t\t\t\tloader: loader,\n\t\t\t});\n\t\t}, (response) => {\n\t\t\tthis.hideLoader({loader: loader});\n\t\t\tthis.showErrorPopup(response[\"errors\"][0].message);\n\t\t});\n\t}\n\n\tdeletePhoto()\n\t{\n\t\tconst fileId = this.getFileId();\n\t\tif (fileId < 0)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst loader = this.showLoader({\n\t\t\tnode: this.imageNode,\n\t\t\tloader: null,\n\t\t\tsize: 78,\n\t\t});\n\n\t\tajax.runComponentAction(this.componentName, 'deletePhoto', {\n\t\t\tsignedParameters: this.signedParameters,\n\t\t\tmode: 'ajax',\n\t\t\tdata: {\n\t\t\t\tfileId: fileId,\n\t\t\t\tgroupId: this.groupId,\n\t\t\t}\n\t\t}).then((response) => {\n\n\t\t\tthis.imageNode.style = '';\n\t\t\tthis.inputNode.value = '';\n\t\t\tthis.recalc();\n\n\t\t\tthis.hideLoader({\n\t\t\t\tloader: loader,\n\t\t\t});\n\t\t}, (response) => {\n\t\t\tthis.hideLoader({\n\t\t\t\tloader: loader,\n\t\t\t});\n\t\t\tthis.showErrorPopup(response.errors[0].message);\n\t\t});\n\t}\n\n\tclearType()\n\t{\n\t\tthis.selectorNode.querySelectorAll('[data-role=\"group-avatar-type\"]').forEach((typeItemNode) => {\n\t\t\ttypeItemNode.classList.remove(Avatar.classList.selected);\n\t\t});\n\t}\n\n\tsetType(avatarType)\n\t{\n\t\tthis.inputNode.value = '';\n\t\tthis.imageNode.style = '';\n\t\tthis.typeInputNode.value = avatarType;\n\n\t\tthis.imageNode.classList.remove(Avatar.classList.selected);\n\n\t\tthis.selectorNode.querySelectorAll('[data-role=\"group-avatar-type\"]').forEach((typeItemNode) => {\n\t\t\tif (typeItemNode.getAttribute('data-avatar-type') !== avatarType)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\ttypeItemNode.classList.add(Avatar.classList.selected);\n\t\t});\n\n\n\t\tthis.recalc();\n\t}\n\n\tgetFileId()\n\t{\n\t\treturn (Type.isStringFilled(this.inputNode.value) ? parseInt(this.inputNode.value) : 0);\n\t}\n\n\tshowLoader(params)\n\t{\n\t\tlet loader = null;\n\n\t\tif (Type.isDomNode(params.node))\n\t\t{\n\t\t\tif (Type.isNull(params.loader))\n\t\t\t{\n\t\t\t\tloader = new BX.Loader({\n\t\t\t\t\ttarget: params.node,\n\t\t\t\t\tsize: params.hasOwnProperty('size') ? params.size : 40,\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tloader = params.loader;\n\t\t\t}\n\n\t\t\tloader.show();\n\t\t}\n\n\t\treturn loader;\n\t}\n\n\thideLoader(params)\n\t{\n\t\tif (!Type.isNull(params.loader))\n\t\t{\n\t\t\tparams.loader.hide();\n\t\t\tparams.loader = null;\n\t\t}\n\n\t\tif (Type.isDomNode(params.node))\n\t\t{\n\t\t\tDom.clean(params.node)\n\t\t}\n\t}\n\n\tshowErrorPopup(error)\n\t{\n\t\tif (!error)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tnew Popup('gce-image-upload-error', null, {\n\t\t\tautoHide: true,\n\t\t\tcloseByEsc: true,\n\t\t\toffsetLeft: 0,\n\t\t\toffsetTop: 0,\n\t\t\tdraggable: true,\n\t\t\tbindOnResize: false,\n\t\t\tcloseIcon: true,\n\t\t\tcontent: error,\n\t\t\tevents: {},\n\t\t\tcacheable: false,\n\t\t}).show();\n\t}\n\n\tshowConfirmPopup(text, confirmCallback)\n\t{\n\t\tthis.confirmPopup = new Popup('gce-image-delete-confirm', null, {\n\t\t\tautoHide: true,\n\t\t\tcloseByEsc: true,\n\t\t\toffsetLeft: 0,\n\t\t\toffsetTop: 0,\n\t\t\tdraggable: true,\n\t\t\tbindOnResize: false,\n\t\t\tcloseIcon: true,\n\t\t\tcontent: text,\n\t\t\tevents: {\n\t\t\t\tonPopupClose: () => {\n\t\t\t\t\tthis.confirmPopup.destroy();\n\t\t\t\t},\n\t\t\t},\n\t\t\tcacheable: false,\n\t\t\tbuttons: [\n\t\t\t\tnew Button({\n\t\t\t\t\ttext: Loc.getMessage('SONET_GCE_T_IMAGE_DELETE_CONFIRM_YES'),\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tclick: (button) => {\n\t\t\t\t\t\t\tbutton.setWaiting(true);\n\t\t\t\t\t\t\tthis.confirmPopup.close();\n\t\t\t\t\t\t\tconfirmCallback();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t\tnew Button({\n\t\t\t\t\ttext: Loc.getMessage('SONET_GCE_T_IMAGE_DELETE_CONFIRM_NO'),\n\t\t\t\t\tevents : {\n\t\t\t\t\t\tclick: () => {\n\t\t\t\t\t\t\tthis.confirmPopup.close();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t],\n\t\t});\n\t\tthis.confirmPopup.show();\n\t}\n}\n","import { Type } from 'main.core';\nimport { BaseEvent, EventEmitter } from 'main.core.events';\n\nexport class ThemePicker\n{\n\tconstructor(\n\t\tparams: {\n\t\t\tcontainer: Element,\n\t\t\ttheme: object,\n\t\t}\n\t)\n\t{\n\t\tthis.container = params.container;\n\t\tthis.theme = params.theme;\n\t\tthis.draw(this.theme);\n\n\t\tconst previewImageNode = this.getNode('image');\n\t\tif (previewImageNode)\n\t\t{\n\t\t\tpreviewImageNode.addEventListener('click', this.open);\n\t\t}\n\n\t\tconst titleNode = this.getNode('title');\n\t\tif (titleNode)\n\t\t{\n\t\t\ttitleNode.addEventListener('click', this.open);\n\t\t}\n\n\t\tconst deleteNode = this.getNode('delete');\n\t\tif (deleteNode)\n\t\t{\n\t\t\tdeleteNode.addEventListener('click', () => {\n\t\t\t\tthis.select({});\n\t\t\t});\n\t\t}\n\n\t\tEventEmitter.subscribe('Intranet.ThemePicker:onSave', (event: BaseEvent) => {\n\t\t\tconst [ data ] = event.getData();\n\t\t\tthis.select(data);\n\t\t});\n\t}\n\n\tselect(data)\n\t{\n\t\tconst theme = (Type.isPlainObject(data.theme) ? data.theme : {});\n\t\tthis.draw(theme);\n\t}\n\n\tdraw(theme)\n\t{\n\t\tconst previewImageNode = this.getNode('image');\n\t\tif (previewImageNode)\n\t\t{\n\t\t\tpreviewImageNode.style.backgroundImage = (Type.isStringFilled(theme.previewImage) ? `url('${theme.previewImage}')` : '');\n\t\t\tpreviewImageNode.style.backgroundColor = (Type.isStringFilled(theme.previewColor) ? theme.previewColor : 'transparent');\n\t\t}\n\n\t\tconst titleNode = this.getNode('title');\n\t\tif (titleNode)\n\t\t{\n\t\t\ttitleNode.innerHTML = (Type.isStringFilled(theme.title) ? theme.title : '');\n\t\t}\n\n\t\tconst inputNode = this.getNode('id');\n\t\tif (inputNode)\n\t\t{\n\t\t\tinputNode.value = (Type.isStringFilled(theme.id) ? theme.id : '');\n\t\t}\n\t}\n\n\topen(event)\n\t{\n\t\tBX.Intranet.Bitrix24.ThemePicker.Singleton.showDialog(true);\n\n\t\tevent.preventDefault();\n\t}\n\n\tgetNode(name)\n\t{\n\t\tconst result = null;\n\t\tif (!Type.isStringFilled(name))\n\t\t{\n\t\t\treturn result;\n\t\t}\n\n\t\treturn this.container.querySelector(`[bx-group-edit-theme-node=\"${name}\"]`);\n\t}\n\n\tgetContainer()\n\t{\n\t\treturn this.container;\n\t}\n}\n","import { Type, Loc } from 'main.core';\nimport { TagSelector as EntityTagSelector } from 'ui.entity-selector';\nimport { BaseEvent } from 'main.core.events';\n\nexport class Tags\n{\n\tconstructor(\n\t\tparams: {\n\t\t\tgroupId: number,\n\t\t\tcontainerNodeId: string,\n\t\t\thiddenFieldId: string,\n\t\t}\n\t)\n\t{\n\t\tconst containerNode = document.getElementById(params.containerNodeId);\n\t\tif (!containerNode)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.hiddenFieldNode = document.getElementById(params.hiddenFieldId);\n\n\t\tconst tagSelector = new EntityTagSelector({\n\t\t\taddButtonCaption: Loc.getMessage('SONET_GCE_T_TAG_ADD'),\n\t\t\taddButtonCaptionMore: Loc.getMessage('SONET_GCE_T_KEYWORDS_ADD_TAG'),\n\t\t\tdialogOptions: {\n\t\t\t\twidth: 350,\n\t\t\t\theight: 300,\n\t\t\t\toffsetLeft: 50,\n\t\t\t\tcompactView: true,\n\t\t\t\tpreload: true,\n\t\t\t\tcontext: 'PROJECT_TAG',\n\t\t\t\tsearchTabOptions: {\n\t\t\t\t\tstubOptions: {\n\t\t\t\t\t\ttitle: Loc.getMessage('SONET_GCE_T_TAG_SEARCH_FAILED'),\n\t\t\t\t\t\tsubtitle: Loc.getMessage('SONET_GCE_T_TAG_SEARCH_ADD_HINT'),\n\t\t\t\t\t\tarrow: true,\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tentities: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'project-tag',\n\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\tgroupId: params.groupId,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\tsearchOptions: {\n\t\t\t\t\tallowCreateItem: true,\n\t\t\t\t\tfooterOptions: {\n\t\t\t\t\t\tlabel: Loc.getMessage('SONET_GCE_T_TAG_SEARCH_ADD_FOOTER_LABEL'),\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tevents: {\n\t\t\t\t\t'Item:onSelect': (event) => {\n\t\t\t\t\t\tthis.recalcinputValue(event.getTarget().getSelectedItems());\n\t\t\t\t\t},\n\t\t\t\t\t'Item:onDeselect': (event) => {\n\t\t\t\t\t\tthis.recalcinputValue(event.getTarget().getSelectedItems());\n\t\t\t\t\t},\n\t\t\t\t\t'Search:onItemCreateAsync': (event: BaseEvent) => {\n\n\t\t\t\t\t\treturn new Promise((resolve) => {\n\n\t\t\t\t\t\t\tconst { searchQuery } = event.getData();\n\t\t\t\t\t\t\tconst name = searchQuery.getQuery().toLowerCase();\n\t\t\t\t\t\t\tconst dialog = event.getTarget();\n\n\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\tconst tagsList = name.split(',');\n\n\t\t\t\t\t\t\t\ttagsList.forEach((tag) => {\n\t\t\t\t\t\t\t\t\tconst item = dialog.addItem({\n\t\t\t\t\t\t\t\t\t\tid: tag,\n\t\t\t\t\t\t\t\t\t\tentityId: 'project-tag',\n\t\t\t\t\t\t\t\t\t\ttitle: tag,\n\t\t\t\t\t\t\t\t\t\ttabs: [ 'all', 'recents' ],\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\tif (item)\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\titem.select();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t\t}, 1000);\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\n\t\ttagSelector.renderTo(containerNode);\n\t}\n\n\trecalcinputValue(items)\n\t{\n\t\tif (\n\t\t\t!Type.isArray(items)\n\t\t\t|| !Type.isDomNode(this.hiddenFieldNode)\n\t\t)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst tagsList = [];\n\n\n\t\titems.forEach((item) => {\n\t\t\ttagsList.push(item.id);\n\t\t});\n\n\t\tthis.hiddenFieldNode.value = tagsList.join(',');\n\t}\n}\n","import {Type} from 'main.core';\nimport {Util} from './util';\n\nimport {WorkgroupForm} from './index';\n\nexport class TypePresetSelector\n{\n\tconstructor()\n\t{\n\t\tthis.cssClass = {\n\t\t\tcontainer: 'socialnetwork-group-create-ex__type-preset-wrapper',\n\t\t\tselector: 'socialnetwork-group-create-ex__type-preset-selector',\n\t\t};\n\n\t\tthis.container = document.querySelector(`.${this.cssClass.container}`);\n\t\tif (!this.container)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tlet firstItemSelected = false;\n\n\t\tconst selectors = this.container.querySelectorAll(`.${this.cssClass.selector}`);\n\t\tselectors.forEach((selector) => {\n\t\t\tselector.addEventListener('click', (e) => {\n\n\t\t\t\tconst selector = e.currentTarget;\n\t\t\t\tif (selector.classList.contains(Util.cssClass.selectorDisabled))\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tUtil.unselectAllSelectorItems(this.container, this.cssClass.selector);\n\t\t\t\tUtil.selectSelectorItem(selector);\n\n\t\t\t\tconst projectType = selector.getAttribute('data-bx-project-type');\n\n\t\t\t\tWorkgroupForm.getInstance().recalcForm({\n\t\t\t\t\tselectedProjectType: projectType,\n\t\t\t\t});\n\n\t\t\t\tWorkgroupForm.getInstance().wizardManager.setProjectType(projectType);\n\t\t\t});\n\n\t\t\tconst projectType = selector.getAttribute('data-bx-project-type');\n\n\t\t\tif (Type.isStringFilled(WorkgroupForm.getInstance().selectedProjectType))\n\t\t\t{\n\t\t\t\tif (WorkgroupForm.getInstance().selectedProjectType === projectType)\n\t\t\t\t{\n\t\t\t\t\tthis.selectItem(selector);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (!firstItemSelected)\n\t\t\t{\n\t\t\t\tthis.selectItem(selector);\n\t\t\t\tfirstItemSelected = true;\n\t\t\t}\n\t\t});\n\t}\n\n\tselectItem(selector: Element)\n\t{\n\t\tconst projectType = selector.getAttribute('data-bx-project-type');\n\t\tUtil.selectSelectorItem(selector);\n\t\tWorkgroupForm.getInstance().recalcForm({\n\t\t\tselectedProjectType: projectType,\n\t\t});\n\t\tWorkgroupForm.getInstance().wizardManager.setProjectType(projectType);\n\t}\n\n\n}\n","import { Type, Loc } from 'main.core';\nimport { WorkgroupForm } from './index';\n\nexport class FieldsManager\n{\n\tstatic mandatoryFieldsByStep = {\n\t\t2: [\n\t\t\t{\n\t\t\t\tid: 'GROUP_NAME_input',\n\t\t\t\ttype: 'string',\n\t\t\t\tbindNodeId: 'GROUP_NAME_input',\n\t\t\t},\n\t\t],\n\t\t4: [\n\t\t\t{\n\t\t\t\tid: 'SCRUM_MASTER_CODE',\n\t\t\t\ttype: 'string',\n\t\t\t\tbindNodeId: 'SCRUM_MASTER_CODE',\n\t\t\t\tcondition: () => {\n\t\t\t\t\treturn !!WorkgroupForm.getInstance().scrumManager.isScrumProject;\n\t\t\t\t}\n\t\t\t}\n\t\t],\n\t};\n\n\tstatic check()\n\t{\n\t\tif (WorkgroupForm.getInstance().wizardManager.stepsCount === 1)\n\t\t{\n\t\t\treturn this.checkAll();\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn this.checkStep(WorkgroupForm.getInstance().wizardManager.currentStep);\n\t\t}\n\t}\n\n\tstatic checkStep(step)\n\t{\n\t\tstep = parseInt(step);\n\n\t\tconst errorDataList = [];\n\n\t\tif (Type.isArray(this.mandatoryFieldsByStep[step]))\n\t\t{\n\t\t\tthis.mandatoryFieldsByStep[step].forEach((fieldData) => {\n\n\t\t\t\tlet fieldNode = document.getElementById(fieldData.id);\n\t\t\t\tif (!Type.isDomNode(fieldNode))\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (fieldNode.tagName.toLowerCase() !== 'input')\n\t\t\t\t{\n\t\t\t\t\tif (fieldData.type !== 'string')\n\t\t\t\t\t{\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tfieldNode = fieldNode.querySelector('input[type=\"text\"]');\n\t\t\t\t\tif (!Type.isDomNode(fieldNode))\n\t\t\t\t\t{\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfieldData.fieldNode = fieldNode;\n\n\t\t\t\tconst errorText = this.checkField(fieldData);\n\t\t\t\tif (Type.isStringFilled(errorText))\n\t\t\t\t{\n\t\t\t\t\tconst bindNode = document.getElementById(fieldData.bindNodeId)\n\t\t\t\t\terrorDataList.push({\n\t\t\t\t\t\tbindNode: (Type.isDomNode(bindNode) ? bindNode : fieldNode),\n\t\t\t\t\t\tmessage: errorText,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn errorDataList;\n\t}\n\n\tstatic checkAll()\n\t{\n\t\tlet errorDataList = [];\n\t\tObject.entries(this.mandatoryFieldsByStep).forEach((stepData) => {\n\t\t\terrorDataList = errorDataList.concat(this.checkStep(parseInt(stepData[0])));\n\t\t});\n\n\t\treturn errorDataList;\n\t}\n\n\tstatic checkField(fieldData)\n\t{\n\t\tlet errorText = '';\n\n\t\tif (\n\t\t\t!Type.isPlainObject(fieldData)\n\t\t\t&& !Type.isDomNode(fieldData.fieldNode)\n\t\t)\n\t\t{\n\t\t\treturn errorText;\n\t\t}\n\n\t\tif (Type.isFunction(fieldData.condition))\n\t\t{\n\t\t\tif (!fieldData.condition())\n\t\t\t{\n\t\t\t\treturn errorText;\n\t\t\t}\n\t\t}\n\n\t\tconst fieldNode = fieldData.fieldNode;\n\t\tconst fieldType = (Type.isStringFilled(fieldData.type) ? fieldData.type : 'string');\n\t\tswitch (fieldType)\n\t\t{\n\t\t\tcase 'string':\n\t\t\t\terrorText = (fieldNode.value.trim() === '' ? Loc.getMessage('SONET_GCE_T_STRING_FIELD_ERROR') : '');\n\t\t\t\tbreak\n\t\t\tdefault:\n\t\t\t\terrorText = '';\n\t\t}\n\n\t\treturn errorText;\n\t}\n\n\tstatic showError(errorData)\n\t{\n\t\tif (\n\t\t\t!Type.isPlainObject(errorData)\n\t\t\t|| !Type.isStringFilled(errorData.message)\n\t\t\t|| !Type.isDomNode(errorData.bindNode)\n\t\t)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tWorkgroupForm.getInstance().alertManager.showAlert(errorData.message, errorData.bindNode.parentNode);\n\t}\n}\n","import { Type } from 'main.core';\nimport { BaseEvent, EventEmitter } from 'main.core.events';\nimport { ButtonManager } from 'ui.buttons';\n\nimport { WorkgroupForm } from './index';\nimport { FieldsManager } from './fields';\n\nexport class Buttons\n{\n\tstatic cssClass = {\n\t\thidden: 'socialnetwork-group-create-ex__button-invisible',\n\t};\n\n\tconstructor()\n\t{\n\t\tthis.submitButton = document.getElementById('sonet_group_create_popup_form_button_submit');\n\t\tif (!this.submitButton)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.submitButton.addEventListener('click', (e) => {\n\n\t\t\tconst button = ButtonManager.createFromNode(e.currentTarget);\n\t\t\tif (\n\t\t\t\tbutton\n\t\t\t\t&& button.isDisabled()\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tWorkgroupForm.getInstance().alertManager.hideAllAlerts();\n\n\t\t\tconst errorDataList = FieldsManager.check().filter((errorData) => {\n\t\t\t\treturn (\n\t\t\t\t\tType.isPlainObject(errorData)\n\t\t\t\t\t&& Type.isStringFilled(errorData.message)\n\t\t\t\t\t&& Type.isDomNode(errorData.bindNode)\n\t\t\t\t);\n\t\t\t});\n\n\t\t\tif (errorDataList.length > 0)\n\t\t\t{\n\t\t\t\terrorDataList.forEach((errorData) => {\n\t\t\t\t\tFieldsManager.showError(errorData);\n\t\t\t\t});\n\t\t\t}\n\t\t\telse if (WorkgroupForm.getInstance().wizardManager.currentStep < WorkgroupForm.getInstance().wizardManager.stepsCount)\n\t\t\t{\n\t\t\t\tWorkgroupForm.getInstance().wizardManager.currentStep++;\n\t\t\t\tif (\n\t\t\t\t\tWorkgroupForm.getInstance().wizardManager.currentStep === 3\n\t\t\t\t\t&& Object.entries(WorkgroupForm.getInstance().confidentialityTypes) <= 1\n\t\t\t\t) // skip confidentiality step\n\t\t\t\t{\n\t\t\t\t\tWorkgroupForm.getInstance().wizardManager.currentStep++;\n\t\t\t\t}\n\n\t\t\t\tWorkgroupForm.getInstance().wizardManager.showCurrentStep();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tWorkgroupForm.getInstance().submitForm(e);\n\t\t\t}\n\n\t\t\treturn e.preventDefault();\n\t\t});\n\n\t\tthis.backButton = document.getElementById('sonet_group_create_popup_form_button_step_2_back');\n\t\tif (this.backButton)\n\t\t{\n\t\t\tthis.backButton.addEventListener('click', (e) => {\n\n\t\t\t\tconst button = ButtonManager.createFromNode(e.currentTarget);\n\t\t\t\tif (\n\t\t\t\t\tbutton\n\t\t\t\t\t&& button.isDisabled()\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (WorkgroupForm.getInstance().wizardManager.currentStep > 1)\n\t\t\t\t{\n\t\t\t\t\tWorkgroupForm.getInstance().wizardManager.currentStep--;\n\t\t\t\t\tif (\n\t\t\t\t\t\tWorkgroupForm.getInstance().wizardManager.currentStep === 3\n\t\t\t\t\t\t&& Object.entries(WorkgroupForm.getInstance().confidentialityTypes) <= 1\n\t\t\t\t\t) // skip confidentiality step\n\t\t\t\t\t{\n\t\t\t\t\t\tWorkgroupForm.getInstance().wizardManager.currentStep--;\n\t\t\t\t\t}\n\n\t\t\t\t\tWorkgroupForm.getInstance().wizardManager.showCurrentStep();\n\t\t\t\t}\n\n\t\t\t\treturn e.preventDefault();\n\t\t\t});\n\t\t}\n\n\t\tthis.cancelButton = document.getElementById('sonet_group_create_popup_form_button_step_2_cancel');\n\n\t\tif (this.cancelButton)\n\t\t{\n\t\t\tthis.cancelButton.addEventListener('click', (e) => {\n\n\t\t\t\tconst button = ButtonManager.createFromNode(e.currentTarget);\n\t\t\t\tif (\n\t\t\t\t\tbutton\n\t\t\t\t\t&& button.isDisabled()\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst currentSlider = BX.SidePanel.Instance.getSliderByWindow(window);\n\n\t\t\t\tif (currentSlider)\n\t\t\t\t{\n\t\t\t\t\tconst event = new BaseEvent({\n\t\t\t\t\t\tcompatData: [ currentSlider.getEvent('onClose') ],\n\t\t\t\t\t\tdata: currentSlider.getEvent('onClose'),\n\t\t\t\t\t});\n\n\t\t\t\t\tEventEmitter.emit(window.top, 'SidePanel.Slider:onClose', event);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tconst url = e.currentTarget.getAttribute('bx-url');\n\t\t\t\t\tif (Type.isStringFilled(url))\n\t\t\t\t\t{\n\t\t\t\t\t\twindow.location = url;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconst event = new BaseEvent({\n\t\t\t\t\tcompatData: [ false ],\n\t\t\t\t\tdata: false,\n\t\t\t\t});\n\n\t\t\t\tEventEmitter.emit(window.top, 'BX.Bitrix24.PageSlider:close', event);\n\n\t\t\t\tEventEmitter.emit(window.top, 'onSonetIframeCancelClick');\n\n\t\t\t\treturn e.preventDefault();\n\t\t\t})\n\t\t}\n\t}\n\n\tstatic showWaitSubmitButton(disable)\n\t{\n\t\tdisable = !!disable;\n\n\t\tconst buttonNode = document.getElementById('sonet_group_create_popup_form_button_submit');\n\t\tif (!buttonNode)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst button = ButtonManager.createFromNode(buttonNode);\n\n\t\tif (disable)\n\t\t{\n\t\t\tif (button)\n\t\t\t{\n\t\t\t\tbutton.setWaiting(true);\n\t\t\t}\n\t\t\tbuttonNode.removeEventListener('click', WorkgroupForm.getInstance().submitForm);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (button)\n\t\t\t{\n\t\t\t\tbutton.setWaiting(false);\n\t\t\t}\n\t\t\tbuttonNode.addEventListener('click', WorkgroupForm.getInstance().submitForm);\n\t\t}\n\t}\n\n\tstatic disableButton(buttonNode, disable)\n\t{\n\t\tif (!Type.isDomNode(buttonNode))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst button = ButtonManager.createFromNode(buttonNode);\n\t\tif (!button)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tbutton.setDisabled(disable);\n\t}\n\n\tstatic showButton(buttonNode)\n\t{\n\t\tif (!Type.isDomNode(buttonNode))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tbuttonNode.classList.remove(this.cssClass.hidden);\n\t}\n\n\tstatic hideButton(buttonNode)\n\t{\n\t\tif (!Type.isDomNode(buttonNode))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tbuttonNode.classList.add(this.cssClass.hidden);\n\t}\n}\n","import { Type } from 'main.core';\nimport { WorkgroupForm } from './index';\nimport { Buttons } from './buttons';\n\nexport class Wizard\n{\n\tstatic cssClass = {\n\t\tstep1Backgroud: 'socialnetwork-group-create-ex__background-gif',\n\t\tbreadcrumbsContainer: 'socialnetwork-group-create-ex__breadcrumbs',\n\t\tbreadcrumbsItem: 'socialnetwork-group-create-ex__breadcrumbs-item',\n\t\tbodyContainer: 'socialnetwork-group-create-ex__content',\n\t\tbodyItem: 'socialnetwork-group-create-ex__content-body',\n\t\tactiveBodyItem: '--active',\n\t\tactiveBreadcrumbsItem: '--active',\n\t};\n\n\tstatic getFirstStepNumber()\n\t{\n\t\treturn (Object.entries(WorkgroupForm.getInstance().projectTypes).length > 1 ? 1 : 2);\n\t}\n\n\tconstructor(\n\t\tparams: {\n\t\t\tcurrentStep: number,\n\t\t\tstepsCount: number,\n\t\t}\n\t)\n\t{\n\t\tthis.processedStep = 0;\n\t\tthis.currentStep = params.currentStep;\n\t\tthis.stepsCount = params.stepsCount;\n\n\t\tthis.step1BackgroudNode = document.querySelector(`.${Wizard.cssClass.step1Backgroud}`);\n\t\tthis.bodyContainer = document.querySelector(`.${Wizard.cssClass.bodyContainer}`);\n\t\tthis.breadcrumbsContainer = document.querySelector(`.${Wizard.cssClass.breadcrumbsContainer}`);\n\t}\n\n\tshowCurrentStep()\n\t{\n\t\tif (Type.isDomNode(this.bodyContainer))\n\t\t{\n\t\t\tthis.bodyContainer.querySelectorAll(`.${Wizard.cssClass.bodyItem}`).forEach((bodyItem) => {\n\t\t\t\tif (bodyItem.classList.contains(`--step-${this.currentStep}`))\n\t\t\t\t{\n\t\t\t\t\tbodyItem.classList.add(Wizard.cssClass.activeBodyItem)\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tbodyItem.classList.remove(Wizard.cssClass.activeBodyItem);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (Type.isDomNode(this.breadcrumbsContainer))\n\t\t{\n\t\t\tthis.breadcrumbsContainer.querySelectorAll(`.${Wizard.cssClass.breadcrumbsItem}`).forEach((breadcrumbsItem) => {\n\t\t\t\tif (breadcrumbsItem.classList.contains(`--step-${this.currentStep}`))\n\t\t\t\t{\n\t\t\t\t\tbreadcrumbsItem.classList.add(Wizard.cssClass.activeBreadcrumbsItem)\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tbreadcrumbsItem.classList.remove(Wizard.cssClass.activeBreadcrumbsItem);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (\n\t\t\tthis.currentStep === Wizard.getFirstStepNumber()\n\t\t\t|| this.currentStep <= this.processedStep + 1\n\t\t)\n\t\t{\n\t\t\tButtons.hideButton(WorkgroupForm.getInstance().buttonsInstance.backButton);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (Type.isDomNode(this.step1BackgroudNode))\n\t\t\t{\n\t\t\t\tthis.step1BackgroudNode.classList.add(`--stop`);\n\t\t\t}\n\t\t\tButtons.showButton(WorkgroupForm.getInstance().buttonsInstance.backButton);\n\t\t}\n\n\t}\n\n\tsetProjectType(projectType)\n\t{\n\t\tif (Type.isDomNode(this.step1BackgroudNode))\n\t\t{\n\t\t\t[ 'project', 'scrum', 'group' ].forEach(projectType => {\n\t\t\t\tthis.step1BackgroudNode.classList.remove(`--${projectType}`);\n\t\t\t})\n\t\t\tthis.step1BackgroudNode.classList.remove('--stop');\n\t\t\tthis.step1BackgroudNode.classList.add(`--${projectType}`);\n\t\t}\n\t}\n\n\trecalcAfterSubmit(params)\n\t{\n\t\tconst processedStep = (Type.isStringFilled(params.processedStep) ? params.processedStep : '');\n\t\tconst createdGroupId = parseInt(!Type.isUndefined(params.createdGroupId) ? params.createdGroupId : 0);\n\t\tconst tabInputNode = document.getElementById('TAB');\n\t\tconst tabGroupIdNode = document.getElementById('SONET_GROUP_ID');\n\n\t\tif (\n\t\t\t!tabInputNode\n\t\t\t|| !Type.isStringFilled(processedStep)\n\t\t\t|| createdGroupId <= 0\n\t\t)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\ttabGroupIdNode.value = createdGroupId;\n\n\t\tif (processedStep === 'create')\n\t\t{\n\t\t\tthis.processedStep = 1;\n\t\t\ttabInputNode.value = 'edit';\n\t\t}\n\t\telse if (processedStep === 'edit')\n\t\t{\n\t\t\tthis.processedStep = 3;\n\t\t\ttabInputNode.value = 'invite';\n\t\t\tthis.bodyContainer.querySelectorAll('.socialnetwork-group-create-ex__create--switch-notinviteonly').forEach((selector) => {\n\t\t\t\tselector.classList.add('--inviteonly');\n\t\t\t});\n\t\t}\n\n\t\tthis.showCurrentStep();\n\t}\n}\n","import { Type, Dom } from 'main.core';\nimport { Alert } from 'ui.alerts';\n\nexport class AlertManager\n{\n\tconstructor(\n\t\tparams: {\n\t\t\terrorContainerId: string,\n\t\t}\n\t)\n\t{\n\t\tif (!Type.isStringFilled(params.errorContainerId))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.globalErrorContainer = document.getElementById(params.errorContainerId);\n\n\t\tthis.nodeAlerts = new Map();\n\t}\n\n\tshowAlert(text, targetNode)\n\t{\n\t\tif (Type.isDomNode(targetNode))\n\t\t{\n\t\t\ttargetNode.classList.add('ui-ctl-danger');\n\t\t}\n\t\telse\n\t\t{\n\t\t\ttargetNode = this.globalErrorContainer;\n\t\t}\n\n\n\t\tconst textAlert = new Alert({\n\t\t\tcolor: Alert.Color.DANGER,\n\t\t\tanimate: true,\n\t\t});\n\n\t\tthis.nodeAlerts.set(targetNode, textAlert);\n\n\t\tsetTimeout(() => {\n\t\t\ttargetNode.parentNode.insertBefore(textAlert.getContainer(), targetNode.nextSibling);\n\t\t\ttextAlert.setText(text);\n\n\t\t\twindow.scrollTo({\n\t\t\t\ttop: Dom.getPosition(targetNode).top,\n\t\t\t\tbehavior: 'smooth',\n\t\t\t});\n\t\t}, 500);\n\n\t}\n\n\thideAllAlerts()\n\t{\n\t\tthis.nodeAlerts.forEach((textAlert, targetNode) => {\n\t\t\ttextAlert.hide();\n\n\t\t\tif (Type.isDomNode(targetNode))\n\t\t\t{\n\t\t\t\ttargetNode.classList.remove('ui-ctl-danger');\n\t\t\t}\n\t\t});\n\n\t\tthis.nodeAlerts.clear();\n\t}\n}\n","import {Type} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\n\nexport class InviteSelector\n{\n\tconstructor(\n\t\tparams: {\n\t\t\tselectorId: string,\n\t\t}\n\t)\n\t{\n\t\tthis.selectorId = params.selectorId;\n\n\t\tEventEmitter.subscribe('BX.Main.User.SelectorController:select', this.selectHandler.bind(this));\n\t\tEventEmitter.subscribe('BX.Main.User.SelectorController:unSelect', this.selectHandler.bind(this));\n\t}\n\n\tselectHandler(event)\n\t{\n\t\tconst [ eventParams ] = event.getCompatData();\n\n\t\tif (eventParams.selectorId === this.selectorId)\n\t\t{\n\t\t\tthis.showDepartmentHint({\n\t\t\t\tselectorId: eventParams.selectorId,\n\t\t\t});\n\t\t}\n\t}\n\n\tshowDepartmentHint(params)\n\t{\n\t\tif (!Type.isStringFilled(params.selectorId))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst hintNode = document.getElementById('GROUP_ADD_DEPT_HINT_block');\n\t\tif (!hintNode)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst selectorInstance = BX.UI.SelectorManager.instances[params.selectorId];\n\t\tif (Type.isUndefined(selectorInstance))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (!Type.isPlainObject(selectorInstance.itemsSelected))\n\t\t{\n\t\t\thintNode.classList.remove('visible');\n\t\t\treturn false;\n\t\t}\n\n\t\tlet departmentFound = false;\n\t\tObject.entries(selectorInstance.itemsSelected).forEach(([ itemId]) => {\n\t\t\tif (departmentFound)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (itemId.match(/DR\\d+/))\n\t\t\t{\n\t\t\t\tdepartmentFound = true;\n\t\t\t}\n\t\t});\n\n\t\tif (departmentFound)\n\t\t{\n\t\t\thintNode.classList.add('visible');\n\t\t}\n\t\telse\n\t\t{\n\t\t\thintNode.classList.remove('visible');\n\t\t}\n\n\t\treturn departmentFound;\n\t}\n\n}\n","import {Loc} from 'main.core';\nimport {PopupManager, MenuManager} from 'main.popup';\n\nexport class TeamExtranetManager\n{\n\tconstructor()\n\t{\n\t\tthis.menuId = 'sonet_group_create_popup_action_popup';\n\n\t\tconst emailsTextareaNode = document.getElementById('EMAILS');\n\t\tif (emailsTextareaNode)\n\t\t{\n\t\t\temailsTextareaNode.addEventListener('blur', (e) => {\n\t\t\t\tif (this.value === '')\n\t\t\t\t{\n\t\t\t\t\te.currentTarget.classList.remove('invite-dialog-inv-form-textarea-active');\n\t\t\t\t\te.currentTarget.value = e.currentTarget.value.replace(new RegExp(/^$/), Loc.getMessage('SONET_GCE_T_EMAILS_DESCR'));\n\t\t\t\t}\n\t\t\t});\n\n\t\t\temailsTextareaNode.addEventListener('focus', (e) => {\n\t\t\t\te.currentTarget.classList.add('invite-dialog-inv-form-textarea-active');\n\t\t\t\te.currentTarget.value = e.currentTarget.value.replace(Loc.getMessage('SONET_GCE_T_EMAILS_DESCR'), '');\n\t\t\t});\n\t\t}\n\n\t\tthis.actionLinkAdd = document.getElementById('sonet_group_create_popup_action_title_add');\n\t\tthis.actionLinkInvite = document.getElementById('sonet_group_create_popup_action_title_invite');\n\n\t\tif (this.actionLinkAdd)\n\t\t{\n\t\t\tthis.actionLinkAdd.addEventListener('click', () => {\n\t\t\t\tthis.onActionSelect('add')\n\t\t\t});\n\t\t}\n\n\t\tif (this.actionLinkInvite)\n\t\t{\n\t\t\tthis.actionLinkInvite.addEventListener('click', () => {\n\t\t\t\tthis.onActionSelect('invite')\n\t\t\t});\n\t\t}\n\t\tthis.inviteBlock1 = document.getElementById('sonet_group_create_popup_action_block_invite');\n\t\tthis.inviteBlock2 = document.getElementById('sonet_group_create_popup_action_block_invite_2');\n\t\tthis.addBlock = document.getElementById('sonet_group_create_popup_action_block_add');\n\t}\n\n\tonActionSelect(action)\n\t{\n\t\tif (action !== 'add')\n\t\t{\n\t\t\taction = 'invite';\n\t\t}\n\n\t\tthis.lastAction = action;\n\n\t\tif (action === 'invite')\n\t\t{\n\t\t\tthis.inviteBlock1.style.display = 'block';\n\t\t\tthis.inviteBlock2.style.display = 'block';\n\t\t\tthis.addBlock.style.display = 'none';\n\t\t\tthis.actionLinkInvite.classList.add('--active');\n\t\t\tthis.actionLinkAdd.classList.remove('--active');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.inviteBlock1.style.display = 'none';\n\t\t\tthis.inviteBlock2.style.display = 'none';\n\t\t\tthis.addBlock.style.display = 'block';\n\t\t\tthis.actionLinkInvite.classList.remove('--active');\n\t\t\tthis.actionLinkAdd.classList.add('--active');\n\t\t}\n\n\t\tMenuManager.destroy(this.menuId);\n\t}\n}\n","import {Type} from 'main.core';\n\nimport {WorkgroupForm} from './index';\nimport {InviteSelector} from './inviteselector';\nimport {TeamExtranetManager} from './teamextranet';\nimport {Util} from './util';\n\nexport class TeamManager\n{\n\tconstructor()\n\t{\n\t\tdocument.querySelectorAll('[data-employees-selector-id]').forEach((employeeSeectorNode) => {\n\n\t\t\tconst selectorId = employeeSeectorNode.getAttribute('data-employees-selector-id');\n\t\t\tif (Type.isStringFilled(selectorId))\n\t\t\t{\n\t\t\t\tWorkgroupForm.getInstance().arUserSelector.push(selectorId);\n\t\t\t\tnew InviteSelector({\n\t\t\t\t\tselectorId: selectorId,\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\tnew TeamExtranetManager();\n\t}\n}\n","export class FeaturesManager\n{\n\tconstructor()\n\t{\n\t\tconst containerNode = document.getElementById('additional-block-features');\n\t\tif (!containerNode)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tcontainerNode.querySelectorAll('.socialnetwork-group-create-ex__project-instruments--icon-action.--edit').forEach((editButton) => {\n\n\t\t\teditButton.addEventListener('click', (e) => {\n\n\t\t\t\tconst editButton = e.currentTarget;\n\t\t\t\tconst featureNode = editButton.closest('.socialnetwork-group-create-ex__project-instruments--item');\n\t\t\t\tif (featureNode)\n\t\t\t\t{\n\t\t\t\t\tfeatureNode.classList.add('--custom-value');\n\n\t\t\t\t\tconst inputNode = featureNode.querySelector('[data-role=\"feature-input-text\"]');\n\t\t\t\t\tconst textNode = featureNode.querySelector('[data-role=\"feature-label\"]');\n\t\t\t\t\tif (\n\t\t\t\t\t\tinputNode\n\t\t\t\t\t\t&& textNode\n\t\t\t\t\t)\n\t\t\t\t\t{\n\t\t\t\t\t\tinputNode.value = textNode.innerText;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\te.preventDefault();\n\t\t\t});\n\n\t\t});\n\n\t\tcontainerNode.querySelectorAll('.socialnetwork-group-create-ex__project-instruments--icon-action.--revert').forEach((cancelButton) => {\n\n\t\t\tcancelButton.addEventListener('click', (e) => {\n\n\t\t\t\tconst editButton = e.currentTarget;\n\t\t\t\tconst featureNode = editButton.closest('.socialnetwork-group-create-ex__project-instruments--item');\n\t\t\t\tif (featureNode)\n\t\t\t\t{\n\t\t\t\t\tfeatureNode.classList.remove('--custom-value');\n\n\t\t\t\t\tconst inputNode = featureNode.querySelector('[data-role=\"feature-input-text\"]');\n\t\t\t\t\tif (inputNode)\n\t\t\t\t\t{\n\t\t\t\t\t\tinputNode.value = '';\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\te.preventDefault();\n\t\t\t});\n\n\t\t});\n\t}\n}\n","import { Type } from 'main.core';\nimport { FieldsManager } from './fields';\n\nexport class UFManager\n{\n\tconstructor(\n\t\tparams: {\n\t\t\tmandatoryUFList: object,\n\t\t}\n\t)\n\t{\n\t\tif (\n\t\t\tType.isPlainObject(FieldsManager.mandatoryFieldsByStep)\n\t\t\t&& Type.isArray(FieldsManager.mandatoryFieldsByStep[2])\n\t\t\t&& Type.isArray(params.mandatoryUFList)\n\t\t)\n\t\t{\n\t\t\tparams.mandatoryUFList.forEach((ufData) => {\n\t\t\t\tif (\n\t\t\t\t\t!Type.isStringFilled(ufData.id)\n\t\t\t\t\t|| !Type.isStringFilled(ufData.type)\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tFieldsManager.mandatoryFieldsByStep[2].push(ufData);\n\t\t\t});\n\t\t}\n\t}\n\n}\n","import {Type, Loc, ajax, Uri} from 'main.core';\nimport {BaseEvent, EventEmitter} from 'main.core.events';\n\nimport {Scrum} from './scrum';\nimport {Avatar} from './avatar';\nimport {ThemePicker} from './themepicker';\nimport {Tags} from './tags';\nimport {Util} from './util';\nimport {TypePresetSelector} from './typepresetselector';\nimport {ConfidentialitySelector} from './confidentialityselector';\nimport {Buttons} from './buttons';\nimport {Wizard} from './wizard';\nimport {AlertManager} from './alert';\nimport {TeamManager} from './team';\nimport {FeaturesManager} from './features';\nimport {UFManager} from './uf';\n\nclass WorkgroupForm\n{\n\tstatic instance = null;\n\n\tstatic getInstance()\n\t{\n\t\treturn WorkgroupForm.instance;\n\t}\n\n\tconstructor(\n\t\tparams: {\n\t\t\tcomponentName: string,\n\t\t\tsignedParameters: string,\n\t\t\tselectedProjectType: string,\n\t\t\tselectedConfidentialityType: string,\n\t\t\tgroupId: number,\n\t\t\tisScrumProject: boolean,\n\t\t\tconfig: object,\n\t\t\tavatarUploaderId: string,\n\t\t\tthemePickerData: object,\n\t\t\tprojectOptions: object,\n\t\t\tprojectTypes: object,\n\t\t\tconfidentialityTypes: object,\n\t\t\tstepsCount: number,\n\t\t}\n\t)\n\t{\n\t\tthis.componentName = params.componentName;\n\t\tthis.signedParameters = params.signedParameters;\n\t\tthis.userSelector = '';\n\t\tthis.lastAction = 'invite';\n\t\tthis.arUserSelector = [];\n\t\tthis.animationList = {};\n\t\tthis.selectedTypeCode = false;\n\n\t\tthis.groupId = parseInt(params.groupId);\n\t\tthis.isScrumProject = params.isScrumProject;\n\t\tthis.config = params.config;\n\t\tthis.avatarUploaderId = params.avatarUploaderId;\n\t\tthis.themePickerData = params.themePickerData;\n\t\tthis.projectOptions = params.projectOptions;\n\n\t\tthis.projectTypes = params.projectTypes;\n\t\tthis.confidentialityTypes = params.confidentialityTypes;\n\t\tthis.selectedProjectType = params.selectedProjectType;\n\t\tthis.selectedConfidentialityType = params.selectedConfidentialityType;\n\n\t\tthis.scrumManager = new Scrum({\n\t\t\tisScrumProject: this.isScrumProject,\n\t\t});\n\n\t\tthis.wizardManager = new Wizard({\n\t\t\tcurrentStep: Object.entries(this.projectTypes).length > 1 ? 1 : 2,\n\t\t\tstepsCount: (params.stepsCount > 1 ? params.stepsCount : 1),\n\t\t});\n\n\t\tthis.alertManager = new AlertManager({\n\t\t\terrorContainerId: 'sonet_group_create_error_block',\n\t\t});\n\n\n\t\tWorkgroupForm.instance = this;\n\n\t\tthis.init(params);\n\t\tthis.buttonsInstance = new Buttons();\n\t}\n\n\tinit(params)\n\t{\n\t\tthis.scrumManager.makeAdditionalCustomizationForm();\n\n\t\tif (this.groupId <= 0)\n\t\t{\n\t\t\tthis.recalcForm();\n\t\t}\n\n\t\tnew Avatar({\n\t\t\tcomponentName: this.componentName,\n\t\t\tsignedParameters: this.signedParameters,\n\t\t\tgroupId: this.groupId,\n\t\t});\n\n\t\tif (\n\t\t\tType.isPlainObject(params.themePickerData)\n\t\t\t&& document.getElementById('GROUP_THEME_container')\n\t\t)\n\t\t{\n\t\t\tnew ThemePicker({\n\t\t\t\tcontainer: document.getElementById('GROUP_THEME_container'),\n\t\t\t\ttheme: params.themePickerData,\n\t\t\t});\n\t\t}\n\n\t\tif (document.getElementById('group-tags-bind-node'))\n\t\t{\n\t\t\tnew Tags({\n\t\t\t\tgroupId: this.groupId,\n\t\t\t\tcontainerNodeId: 'group-tags-bind-node',\n\t\t\t\thiddenFieldId: 'GROUP_KEYWORDS',\n\t\t\t});\n\t\t}\n\n\t\tnew TypePresetSelector();\n\t\tnew ConfidentialitySelector();\n\t\tnew TeamManager();\n\t\tnew FeaturesManager();\n\n\t\tconst groupNameNode = document.getElementById('GROUP_NAME_input');\n\t\tif (groupNameNode)\n\t\t{\n\t\t\tgroupNameNode.focus();\n\t\t}\n\n\t\tif (BX.SidePanel.Instance.getTopSlider())\n\t\t{\n\t\t\tEventEmitter.subscribe(BX.SidePanel.Instance.getTopSlider().getWindow(), 'SidePanel.Slider:onClose', (event) => {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tconst sliderInstance = event.getTarget();\n\t\t\t\t\tif (!sliderInstance)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tBX.SidePanel.Instance.destroy(sliderInstance.getUrl());\n\t\t\t\t}, 500);\n\t\t\t});\n\t\t}\n\n\t\tconst extranetCheckboxNode = document.getElementById('IS_EXTRANET_GROUP');\n\t\tif (\n\t\t\textranetCheckboxNode\n\t\t\t&& extranetCheckboxNode.type === 'checkbox'\n\t\t)\n\t\t{\n\t\t\textranetCheckboxNode.addEventListener('click', () => {\n\t\t\t\tthis.switchExtranet(extranetCheckboxNode.checked, true);\n\t\t\t});\n\t\t}\n\n\t\tconst visibleCheckboxNode = document.getElementById('GROUP_VISIBLE');\n\t\tif (\n\t\t\tvisibleCheckboxNode\n\t\t\t&& visibleCheckboxNode.type === 'checkbox'\n\t\t)\n\t\t{\n\t\t\tvisibleCheckboxNode.addEventListener('click', () => {\n\t\t\t\tthis.switchNotVisible(visibleCheckboxNode.checked);\n\t\t\t});\n\t\t}\n\n\t\tconst projectCheckboxNode = document.getElementById('GROUP_PROJECT');\n\t\tif (\n\t\t\tprojectCheckboxNode\n\t\t\t&& projectCheckboxNode.type === 'checkbox'\n\t\t)\n\t\t{\n\t\t\tprojectCheckboxNode.addEventListener('click', () => {\n\t\t\t\tUtil.recalcFormPartProject(projectCheckboxNode.checked);\n\t\t\t});\n\t\t}\n\n\t\tUtil.initExpandSwitches();\n\t\tUtil.initDropdowns();\n\n\t\tif (Type.isStringFilled(params.expandableSettingsNodeId))\n\t\t{\n\t\t\tBX.UI.Hint.init(document.getElementById(params.expandableSettingsNodeId));\n\t\t}\n\n\t\tif (this.groupId <= 0 && this.selectedProjectType === 'scrum')\n\t\t{\n\t\t\tthis.saveScrumAnalyticData();\n\t\t}\n\t}\n\n\trecalcForm(params)\n\t{\n\t\tif (Type.isPlainObject(params))\n\t\t{\n\t\t\tif (!Type.isUndefined(params.selectedProjectType))\n\t\t\t{\n\t\t\t\tthis.selectedProjectType = (Type.isStringFilled(params.selectedProjectType) ? params.selectedProjectType : '');\n\t\t\t}\n\t\t\tif (!Type.isUndefined(params.selectedConfidentialityType))\n\t\t\t{\n\t\t\t\tthis.selectedConfidentialityType = (Type.isStringFilled(params.selectedConfidentialityType) ? params.selectedConfidentialityType : '');\n\t\t\t}\n\t\t}\n\n\t\tif (this.groupId <= 0)\n\t\t{\n\t\t\tthis.scrumManager.isScrumProject = (\n\t\t\t\tType.isPlainObject(this.projectTypes[this.selectedProjectType])\n\t\t\t\t&& Type.isStringFilled(this.projectTypes[this.selectedProjectType]['SCRUM_PROJECT'])\n\t\t\t\t&& this.projectTypes[this.selectedProjectType]['SCRUM_PROJECT'] === 'Y'\n\t\t\t);\n\n\t\t\tUtil.recalcFormPartProject(\n\t\t\t\tType.isPlainObject(this.projectTypes[this.selectedProjectType])\n\t\t\t\t&& Type.isStringFilled(this.projectTypes[this.selectedProjectType].PROJECT)\n\t\t\t\t&& this.projectTypes[this.selectedProjectType].PROJECT === 'Y'\n\t\t\t);\n\t\t}\n\n\t\tthis.scrumManager.makeAdditionalCustomizationForm();\n\n\t\tif (this.groupId <= 0)\n\t\t{\n\t\t\tconst openedCheckboxNode = document.getElementById('GROUP_OPENED');\n\t\t\tif (openedCheckboxNode)\n\t\t\t{\n\t\t\t\tUtil.setCheckedValue(openedCheckboxNode, (\n\t\t\t\t\tType.isPlainObject(this.confidentialityTypes[this.selectedConfidentialityType])\n\t\t\t\t\t&& Type.isStringFilled(this.confidentialityTypes[this.selectedConfidentialityType].OPENED)\n\t\t\t\t\t&& this.confidentialityTypes[this.selectedConfidentialityType].OPENED === 'Y'\n\t\t\t\t));\n\t\t\t}\n\n\t\t\tconst visibleCheckboxNode = document.getElementById('GROUP_VISIBLE');\n\t\t\tif (visibleCheckboxNode)\n\t\t\t{\n\t\t\t\tUtil.setCheckedValue(visibleCheckboxNode, (\n\t\t\t\t\tType.isPlainObject(this.confidentialityTypes[this.selectedConfidentialityType])\n\t\t\t\t\t&& Type.isStringFilled(this.confidentialityTypes[this.selectedConfidentialityType].VISIBLE)\n\t\t\t\t\t&& this.confidentialityTypes[this.selectedConfidentialityType].VISIBLE === 'Y'\n\t\t\t\t));\n\t\t\t}\n\t\t}\n\n\t\tthis.recalcFormDependencies();\n\t};\n\n\trecalcFormDependencies()\n\t{\n\t\tconst extranetCheckboxNode = document.getElementById('IS_EXTRANET_GROUP');\n\t\tif (extranetCheckboxNode)\n\t\t{\n\t\t\tthis.switchExtranet(Util.getCheckedValue(extranetCheckboxNode, false));\n\t\t}\n\n\t\tconst visibleCheckboxNode = document.getElementById('GROUP_VISIBLE');\n\t\tconst openedCheckboxNode = document.getElementById('GROUP_OPENED');\n\t\tif (\n\t\t\tvisibleCheckboxNode\n\t\t\t&& openedCheckboxNode\n\t\t\t&& (!Util.getCheckedValue(visibleCheckboxNode))\n\t\t)\n\t\t{\n\t\t\tUtil.setCheckedValue(openedCheckboxNode, false);\n\t\t}\n\t}\n\n\tswitchExtranet(isChecked, useAnimation)\n\t{\n\t\tconst extranetBlockNode = document.getElementById('INVITE_EXTRANET_block');\n\t\tconst extranetBlockContainerNode = document.getElementById('INVITE_EXTRANET_block_container')\n\t\tif (\n\t\t\textranetBlockNode\n\t\t\t&& extranetBlockContainerNode\n\t\t)\n\t\t{\n\t\t\tif (isChecked)\n\t\t\t{\n\t\t\t\textranetBlockContainerNode.style.display = 'block';\n\t\t\t}\n\n\t\t\tthis.showHideBlock({\n\t\t\t\tcontainer: extranetBlockContainerNode,\n\t\t\t\tblock: extranetBlockNode,\n\t\t\t\tshow: isChecked,\n\t\t\t\tduration: (useAnimation ? 1000 : 0),\n\t\t\t\tcallback: {\n\t\t\t\t\tcomplete: () => {\n\t\t\t\t\t\tif (isChecked)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\textranetBlockContainerNode.classList.remove('--hidden');\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\textranetBlockContainerNode.style.display = 'none';\n\t\t\t\t\t\t\textranetBlockContainerNode.classList.add('--hidden');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tconst openedBlock = document.getElementById('GROUP_OPENED');\n\t\tif (openedBlock)\n\t\t{\n\t\t\tif (!isChecked)\n\t\t\t{\n\t\t\t\tif (openedBlock.type === 'checkbox')\n\t\t\t\t{\n\t\t\t\t\topenedBlock.disabled = false;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (openedBlock.type === 'checkbox')\n\t\t\t\t{\n\t\t\t\t\topenedBlock.disabled = true;\n\t\t\t\t\topenedBlock.checked = false;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\topenedBlock.value = 'N';\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst visibleBlock = document.getElementById('GROUP_VISIBLE');\n\t\tif (visibleBlock)\n\t\t{\n\t\t\tif (!isChecked)\n\t\t\t{\n\t\t\t\tif (visibleBlock.type == 'checkbox')\n\t\t\t\t{\n\t\t\t\t\tvisibleBlock.disabled = false;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (visibleBlock.type == 'checkbox')\n\t\t\t\t{\n\t\t\t\t\tvisibleBlock.disabled = true;\n\t\t\t\t\tvisibleBlock.checked = false;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tvisibleBlock.value = 'N';\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (isChecked)\n\t\t{\n\t\t\tConfidentialitySelector.unselectAll();\n\t\t\tConfidentialitySelector.select('secret')\n\t\t\tConfidentialitySelector.disableAll();\n\t\t\tConfidentialitySelector.enable('secret')\n\t\t}\n\t\telse\n\t\t{\n\t\t\tConfidentialitySelector.enableAll();\n\t\t}\n\t}\n\n\tswitchNotVisible(isChecked)\n\t{\n\t\tconst openedNode = document.getElementById('GROUP_OPENED')\n\t\tif (\n\t\t\topenedNode\n\t\t\t&& openedNode.type == 'checkbox'\n\t\t)\n\t\t{\n\t\t\tif (isChecked)\n\t\t\t{\n\t\t\t\topenedNode.disabled = false;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\topenedNode.disabled = true;\n\t\t\t\topenedNode.checked = false;\n\t\t\t}\n\t\t}\n\t}\n\n\tsubmitForm(e)\n\t{\n\t\tconst inviteActionNode = document.getElementById('EXTRANET_INVITE_ACTION');\n\t\tif (inviteActionNode)\n\t\t{\n\t\t\tinviteActionNode.value = this.lastAction;\n\t\t}\n\n\t\tlet actionUrl = document.getElementById('sonet_group_create_popup_form').action;\n\n\t\tif (actionUrl)\n\t\t{\n\t\t\tconst groupIdNode = document.getElementById('SONET_GROUP_ID');\n\t\t\tlet b24statAction = 'addSonetGroup';\n\n\t\t\tif (groupIdNode)\n\t\t\t{\n\t\t\t\tif (parseInt(groupIdNode.value) <= 0)\n\t\t\t\t{\n\t\t\t\t\tactionUrl = Uri.addParam(actionUrl, {\n\t\t\t\t\t\taction: 'createGroup',\n\t\t\t\t\t\tgroupType: this.selectedTypeCode,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tb24statAction = 'editSonetGroup';\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tactionUrl = Uri.addParam(actionUrl, {\n\t\t\t\tb24statAction: b24statAction,\n\t\t\t});\n\n\t\t\tconst formElements = document.forms['sonet_group_create_popup_form'].elements;\n\t\t\tif (\n\t\t\t\tformElements.GROUP_PROJECT\n\t\t\t\t&& (\n\t\t\t\t\tformElements.IS_EXTRANET_GROUP\n\t\t\t\t\t|| formElements.GROUP_OPENED\n\t\t\t\t)\n\t\t\t)\n\t\t\t{\n\t\t\t\tlet b24statType = (formElements.GROUP_PROJECT.checked ? 'project-' : 'group-');\n\t\t\t\tif (\n\t\t\t\t\tformElements.IS_EXTRANET_GROUP\n\t\t\t\t\t&& formElements.IS_EXTRANET_GROUP.checked\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tb24statType += 'external';\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tb24statType += (formElements.GROUP_OPENED.checked ? 'open' : 'closed');\n\t\t\t\t}\n\n\t\t\t\tactionUrl = Uri.addParam(actionUrl, {\n\t\t\t\t\tb24statType: b24statType,\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\tformElements.SCRUM_PROJECT\n\t\t\t\t&& b24statAction === 'addSonetGroup'\n\t\t\t)\n\t\t\t{\n\t\t\t\tactionUrl = Uri.addParam(actionUrl, {\n\t\t\t\t\tanalyticsLabel: {\n\t\t\t\t\t\tscrum: 'Y',\n\t\t\t\t\t\taction: 'scrum_create',\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tButtons.showWaitSubmitButton(true);\n\n\t\t\tajax.submitAjax(\n\t\t\t\tdocument.forms['sonet_group_create_popup_form'],\n\t\t\t\t{\n\t\t\t\t\turl: actionUrl,\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\tdataType: 'json',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tPROJECT_OPTIONS: this.projectOptions,\n\t\t\t\t\t},\n\t\t\t\t\tonsuccess: (response) => {\n\t\t\t\t\t\tif (Type.isStringFilled(response.ERROR))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconst warningText = (\n\t\t\t\t\t\t\t\tType.isStringFilled(response.WARNING)\n\t\t\t\t\t\t\t\t\t? `${response.WARNING}<br>`\n\t\t\t\t\t\t\t\t\t: ''\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\tthis.alertManager.showAlert(`${warningText}${response.ERROR}`);\n\n\t\t\t\t\t\t\tif (Type.isStringFilled(response.WIZARD_STEP_PROCESSED))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.wizardManager.recalcAfterSubmit({\n\t\t\t\t\t\t\t\t\tprocessedStep: response.WIZARD_STEP_PROCESSED.toLowerCase(),\n\t\t\t\t\t\t\t\t\tcreatedGroupId: parseInt(!Type.isUndefined(response.CREATED_GROUP_ID) ? response.CREATED_GROUP_ID : 0),\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (Type.isArray(response.USERS_ID))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tconst selectedUsers = [];\n\t\t\t\t\t\t\t\tlet j = 0;\n\n\t\t\t\t\t\t\t\tresponse.USERS_ID.forEach((currentValue) => {\n\t\t\t\t\t\t\t\t\tselectedUsers[`U${currentValue}`] = 'users';\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\tthis.arUserSelector.forEach((selectorId) => {\n\t\t\t\t\t\t\t\t\tconst selectorInstance = BX.UI.SelectorManager.instances[selectorId];\n\t\t\t\t\t\t\t\t\tif (Type.isUndefined(selectorInstance))\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tconst selectorNode = document.getElementById(`ui-tile-selector-${selectorId}`);\n\t\t\t\t\t\t\t\t\tselectorNode.querySelectorAll('.ui-tile-selector-item').forEach((node) => {\n\n\t\t\t\t\t\t\t\t\t\tconst userCode = node.getAttribute('data-bx-id');\n\t\t\t\t\t\t\t\t\t\tif (!Type.isStringFilled(userCode))\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tselectorInstance.getRenderInstance().deleteItem({\n\t\t\t\t\t\t\t\t\t\t\tentityType: 'USERS',\n\t\t\t\t\t\t\t\t\t\t\titemId: userCode,\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t});\n\n\n\t\t\t\t\t\t\t\t\tselectorInstance.itemsSelected = selectedUsers;\n\t\t\t\t\t\t\t\t\tselectorInstance.reinit();\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tButtons.showWaitSubmitButton(false);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (response.MESSAGE === 'SUCCESS')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconst currentSlider = BX.SidePanel.Instance.getSliderByWindow(window);\n\t\t\t\t\t\t\tif (currentSlider)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tconst event = new BaseEvent({\n\t\t\t\t\t\t\t\t\tcompatData: [ currentSlider.getEvent('onClose') ],\n\t\t\t\t\t\t\t\t\tdata: currentSlider.getEvent('onClose'),\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\tEventEmitter.emit(window.top, 'SidePanel.Slider:onClose', event);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (window === top.window) // not frame\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif (Type.isStringFilled(response.URL))\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttop.location.href = response.URL;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (Type.isStringFilled(response.ACTION))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlet eventData = null;\n\n\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t[ 'create', 'edit' ].includes(response.ACTION)\n\t\t\t\t\t\t\t\t\t&& !Type.isUndefined(response.GROUP)\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\teventData = {\n\t\t\t\t\t\t\t\t\t\tcode: (response.ACTION == 'create' ? 'afterCreate' : 'afterEdit'),\n\t\t\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\t\t\tgroup: response.GROUP,\n\t\t\t\t\t\t\t\t\t\t\tprojectOptions: this.projectOptions,\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse if (response.ACTION === 'invite')\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\teventData = {\n\t\t\t\t\t\t\t\t\t\tcode: 'afterInvite',\n\t\t\t\t\t\t\t\t\t\tdata: {},\n\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif (eventData)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\twindow.top.BX.SidePanel.Instance.postMessageAll(window, 'sonetGroupEvent', eventData);\n\t\t\t\t\t\t\t\t\tif (response.ACTION === 'create')\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tconst createdGroupsData = JSON.parse(response.SELECTOR_GROUPS);\n\t\t\t\t\t\t\t\t\t\tif (Type.isArray(createdGroupsData))\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\twindow.top.BX.SidePanel.Instance.postMessageAll(window, 'BX.Socialnetwork.Workgroup:onAdd', { projects: createdGroupsData });\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tif (currentSlider)\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tBX.SidePanel.Instance.close(false, () => {\n\t\t\t\t\t\t\t\t\t\t\tBX.SidePanel.Instance.destroy(currentSlider.getUrl());\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\tresponse.ACTION == 'create'\n\t\t\t\t\t\t\t\t\t\t&& Type.isStringFilled(response.URL)\n\t\t\t\t\t\t\t\t\t\t&& (\n\t\t\t\t\t\t\t\t\t\t\t!Type.isStringFilled(this.config.refresh)\n\t\t\t\t\t\t\t\t\t\t\t|| this.config.refresh === 'Y'\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tlet bindingFound = false;\n\n\t\t\t\t\t\t\t\t\t\tBX.SidePanel.Instance.anchorRules.find((rule) => {\n\t\t\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\t\t\tbindingFound\n\t\t\t\t\t\t\t\t\t\t\t\t|| !Type.isArray(rule.condition)\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\trule.condition.forEach((condition) => {\n\t\t\t\t\t\t\t\t\t\t\t\tif (bindingFound)\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (response.URL.match(condition))\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\tbindingFound = true;\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t});\n\n\n\t\t\t\t\t\t\t\t\t\tif (bindingFound)\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tBX.SidePanel.Instance.open(\n\t\t\t\t\t\t\t\t\t\t\t\tresponse.URL\n\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\ttop.window.location.href = response.URL;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tonfailure: (errorData) => {\n\t\t\t\t\t\tButtons.showWaitSubmitButton(false);\n\t\t\t\t\t\tthis.alertManager.showAlert(Loc.getMessage('SONET_GCE_T_AJAX_ERROR'));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\te.preventDefault();\n\t}\n\n\tsaveScrumAnalyticData()\n\t{\n\t\tconst actionUrl = document.getElementById('sonet_group_create_popup_form').action;\n\n\t\tconst source = new Uri(actionUrl).getQueryParam('source');\n\t\tconst availableSources = new Set([\n\t\t\t'guide_adv',\n\t\t\t'guide_direct',\n\t\t\t'guide_portal'\n\t\t]);\n\t\tif (availableSources.has(source))\n\t\t{\n\t\t\tajax.runAction(\n\t\t\t\t'bitrix:tasks.scrum.info.saveScrumStart',\n\t\t\t\t{\n\t\t\t\t\tdata: {},\n\t\t\t\t\tanalyticsLabel: {\n\t\t\t\t\t\tscrum: 'Y',\n\t\t\t\t\t\taction: 'scrum_start',\n\t\t\t\t\t\tsource: source\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t}\n\n\tshowHideBlock(params)\n\t{\n\t\tif (!Type.isPlainObject(params))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tconst containerNode = params.container;\n\t\tconst blockNode = params.block;\n\t\tconst show = !!params.show;\n\n\t\tif (\n\t\t\t!Type.isDomNode(containerNode)\n\t\t\t|| !Type.isDomNode(blockNode)\n\t\t)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tif (\n\t\t\t!Type.isUndefined(this.animationList[blockNode.id])\n\t\t\t&& !Type.isNull(this.animationList[blockNode.id])\n\t\t)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.animationList[blockNode.id] = null;\n\n\t\tconst maxHeight = parseInt(blockNode.offsetHeight);\n\t\tconst duration = (!Type.isUndefined(params.duration) && parseInt(params.duration) > 0 ? parseInt(params.duration) : 0);\n\n\t\tif (show)\n\t\t{\n\t\t\tcontainerNode.style.display = 'block';\n\t\t}\n\n\t\tif (duration > 0)\n\t\t{\n\t\t\tif (Type.isStringFilled(blockNode.id))\n\t\t\t{\n\t\t\t\tthis.animationList[blockNode.id] = true;\n\t\t\t}\n\n\t\t\tBX.delegate((new BX.easing({\n\t\t\t\tduration: duration,\n\t\t\t\tstart: {\n\t\t\t\t\theight: (show ? 0 : maxHeight),\n\t\t\t\t\topacity: (show ? 0 : 100),\n\t\t\t\t},\n\t\t\t\tfinish: {\n\t\t\t\t\theight: (show ? maxHeight : 0),\n\t\t\t\t\topacity: (show ? 100 : 0),\n\t\t\t\t},\n\t\t\t\ttransition: BX.easing.makeEaseOut(BX.easing.transitions.quart),\n\t\t\t\tstep: (state) => {\n\t\t\t\t\tcontainerNode.style.maxHeight = `${state.height}px`;\n\t\t\t\t\tcontainerNode.style.opacity = state.opacity / 100;\n\t\t\t\t},\n\t\t\t\tcomplete: () => {\n\t\t\t\t\tif (Type.isStringFilled(blockNode.id))\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.animationList[blockNode.id] = null;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (\n\t\t\t\t\t\t!Type.isUndefined(params.callback)\n\t\t\t\t\t\t&& Type.isFunction(params.callback.complete)\n\t\t\t\t\t)\n\t\t\t\t\t{\n\t\t\t\t\t\tcontainerNode.style.maxHeight = '';\n\t\t\t\t\t\tcontainerNode.style.opacity = '';\n\t\t\t\t\t\tparams.callback.complete();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t})).animate(), this);\n\n\t\t}\n\t\telse\n\t\t{\n\t\t\tparams.callback.complete();\n\t\t}\n\n\t\treturn true;\n\t}\n}\n\nexport {\n\tWorkgroupForm,\n\tUFManager as WorkgroupFormUFManager,\n}\n"],"names":["Util","expandSwitchers","document","querySelectorAll","forEach","switcher","addEventListener","e","targetId","currentTarget","getAttribute","target","getElementById","switcherWrapper","firstElementChild","offsetHeight","style","height","classList","add","scrollToTarget","elementRealTop","getBoundingClientRect","top","time","currentTime","scrollBySvs","window","scrollBy","setTimeout","removeEventListener","adjustHeight","removeProperty","remove","dropdownAreaList","dropdownArea","dropdownItemsData","getDropdownItems","items","Object","entries","key","value","push","text","onclick","dropdownMenu","close","setDropdownValue","querySelector","setInputValue","neighbourDropdownArea","contains","parentNode","Type","isDomNode","BX","PopupMenuWindow","autoHide","cacheable","bindElement","width","offsetWidth","closeByEsc","animation","params","show","node","containerNode","itemValue","innerText","itemKey","JSON","parse","isPlainObject","isChecked","projectCheckboxNode","setCheckedValue","recalcNameInput","inputNode","placeholderText","Loc","getMessage","formInstance","WorkgroupForm","getInstance","projectTypes","selectedProjectType","isStringFilled","SCRUM_PROJECT","PROJECT","placeholder","type","checked","result","container","selectorClass","selector","cssClass","selectorActive","selectorDisabled","ConfidentialitySelector","firstItemSelected","getItems","unselectAllSelectorItems","getContainer","selectSelectorItem","recalcForm","selectedConfidentialityType","confidentialityType","selectItem","accessCode","disableAllSelectorItems","enableAllSelectorItems","enableSelectorItem","Scrum","isScrumProject","createHiddenInputs","showScrumBlocks","unselectAll","select","landingCheckbox","disabled","toggleFeatures","removeHiddenInputs","hideScrumBlocks","scrumBlock","moderatorsBlock","moderatorsSwitch","ownerBlock","forms","appendChild","Dom","create","attrs","name","input","isScrum","featuresNode","featuresCheckboxNode","insertBefore","hiddenInput","Avatar","confirmPopup","componentName","isUndefined","signedParameters","groupId","parseInt","selectorNode","imageNode","typeInputNode","removeNode","recalc","avatarEditor","AvatarEditor","enableCamera","backgroundImage","showConfirmPopup","deletePhoto","bind","clearType","setType","EventEmitter","subscribe","event","getCompatData","file","formData","FormData","append","changePhoto","getFileId","hidden","selected","loader","showLoader","size","ajax","runComponentAction","mode","data","then","response","fileId","fileUri","hideLoader","showErrorPopup","message","errors","typeItemNode","avatarType","isNull","Loader","hasOwnProperty","hide","clean","error","Popup","offsetLeft","offsetTop","draggable","bindOnResize","closeIcon","content","events","confirmCallback","onPopupClose","destroy","buttons","Button","click","button","setWaiting","ThemePicker","theme","draw","previewImageNode","getNode","open","titleNode","deleteNode","getData","previewImage","backgroundColor","previewColor","innerHTML","title","id","Intranet","Bitrix24","Singleton","showDialog","preventDefault","Tags","containerNodeId","hiddenFieldNode","hiddenFieldId","tagSelector","EntityTagSelector","addButtonCaption","addButtonCaptionMore","dialogOptions","compactView","preload","context","searchTabOptions","stubOptions","subtitle","arrow","entities","options","searchOptions","allowCreateItem","footerOptions","label","recalcinputValue","getTarget","getSelectedItems","Promise","resolve","searchQuery","getQuery","toLowerCase","dialog","tagsList","split","tag","item","addItem","entityId","tabs","renderTo","isArray","join","TypePresetSelector","selectors","projectType","wizardManager","setProjectType","FieldsManager","stepsCount","checkAll","checkStep","currentStep","step","errorDataList","mandatoryFieldsByStep","fieldData","fieldNode","tagName","errorText","checkField","bindNode","bindNodeId","stepData","concat","isFunction","condition","fieldType","trim","errorData","alertManager","showAlert","scrumManager","Buttons","submitButton","ButtonManager","createFromNode","isDisabled","hideAllAlerts","check","filter","length","showError","confidentialityTypes","showCurrentStep","submitForm","backButton","cancelButton","currentSlider","SidePanel","Instance","getSliderByWindow","BaseEvent","compatData","getEvent","emit","url","location","disable","buttonNode","setDisabled","Wizard","processedStep","step1BackgroudNode","step1Backgroud","bodyContainer","breadcrumbsContainer","bodyItem","activeBodyItem","breadcrumbsItem","activeBreadcrumbsItem","getFirstStepNumber","hideButton","buttonsInstance","showButton","createdGroupId","tabInputNode","tabGroupIdNode","AlertManager","errorContainerId","globalErrorContainer","nodeAlerts","Map","targetNode","textAlert","Alert","color","Color","DANGER","animate","set","nextSibling","setText","scrollTo","getPosition","behavior","clear","InviteSelector","selectorId","selectHandler","eventParams","showDepartmentHint","hintNode","selectorInstance","UI","SelectorManager","instances","itemsSelected","departmentFound","itemId","match","TeamExtranetManager","menuId","emailsTextareaNode","replace","RegExp","actionLinkAdd","actionLinkInvite","onActionSelect","inviteBlock1","inviteBlock2","addBlock","action","lastAction","display","MenuManager","TeamManager","employeeSeectorNode","arUserSelector","FeaturesManager","editButton","featureNode","closest","textNode","UFManager","mandatoryUFList","ufData","instance","userSelector","animationList","selectedTypeCode","config","avatarUploaderId","themePickerData","projectOptions","init","makeAdditionalCustomizationForm","groupNameNode","focus","getTopSlider","getWindow","sliderInstance","getUrl","extranetCheckboxNode","switchExtranet","visibleCheckboxNode","switchNotVisible","recalcFormPartProject","initExpandSwitches","initDropdowns","expandableSettingsNodeId","Hint","saveScrumAnalyticData","openedCheckboxNode","OPENED","VISIBLE","recalcFormDependencies","getCheckedValue","useAnimation","extranetBlockNode","extranetBlockContainerNode","showHideBlock","block","duration","callback","complete","openedBlock","visibleBlock","disableAll","enable","enableAll","openedNode","inviteActionNode","actionUrl","groupIdNode","b24statAction","Uri","addParam","groupType","formElements","elements","GROUP_PROJECT","IS_EXTRANET_GROUP","GROUP_OPENED","b24statType","analyticsLabel","scrum","showWaitSubmitButton","submitAjax","method","dataType","PROJECT_OPTIONS","onsuccess","ERROR","warningText","WARNING","WIZARD_STEP_PROCESSED","recalcAfterSubmit","CREATED_GROUP_ID","USERS_ID","selectedUsers","currentValue","userCode","getRenderInstance","deleteItem","entityType","reinit","MESSAGE","URL","href","ACTION","eventData","includes","GROUP","code","group","postMessageAll","createdGroupsData","SELECTOR_GROUPS","projects","refresh","bindingFound","anchorRules","find","rule","onfailure","source","getQueryParam","availableSources","Set","has","runAction","blockNode","maxHeight","delegate","easing","start","opacity","finish","transition","makeEaseOut","transitions","quart","state"],"mappings":"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"}