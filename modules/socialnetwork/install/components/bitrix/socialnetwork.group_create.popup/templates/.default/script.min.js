(function(){if(!!BX.SGCP){return}BX.SGCP={bInit:{},popup:null,params:{},pathToCreate:{},pathToEdit:{},pathToInvite:{}};BX.SGCP.Init=function(t){if(t){if(!t.NAME||t.NAME.length<=0){return}if(BX.SGCP.bInit[t.NAME]){return}BX.SGCP.params[t.NAME]=t;BX.SGCP.pathToCreate[t.NAME]=t.pathToCreate?t.pathToCreate+(t.pathToCreate.indexOf("?")==-1?"?":"&")+"IFRAME=Y&POPUP=Y&SONET=Y":"";BX.SGCP.pathToEdit[t.NAME]=t.pathToEdit?t.pathToEdit+(t.pathToEdit.indexOf("?")==-1?"?":"&")+"IFRAME=Y&POPUP=Y&SONET=Y":"";BX.SGCP.pathToInvite[t.NAME]=t.pathToInvite?t.pathToInvite+(t.pathToInvite.indexOf("?")==-1?"?":"&")+"IFRAME=Y&POPUP=Y&SONET=Y":"";BX.message(t["MESS"]);BX.SGCP.bInit[t.NAME]=true;BX.addCustomEvent("onSonetIframeCancelClick",function(){BX.SGCP.destroyPopup()});BX.addCustomEvent("onSonetIframeSuccess",function(){BX.SGCP.destroyPopup()})}};BX.SGCP.ShowForm=function(t,e,o){if(typeof e==="undefined"||e.length<=0){return BX.PreventDefault(o)}if(BX.SGCP.popup){BX.SGCP.popup.destroy()}var n=null;var p="";switch(t){case"create":n=BX.SGCP.pathToCreate[e];p=BX.message("SONET_SGCP_T_DO_CREATE_"+e);break;case"edit":n=BX.SGCP.pathToEdit[e];p=BX.message("SONET_SGCP_T_DO_EDIT_"+e);break;case"invite":n=BX.SGCP.pathToInvite[e];p=BX.message("SONET_SGCP_T_DO_INVITE_"+e);break;default:n=null}if(n&&n.length>0){var i=t==="invite"?"width:450px;height:230px":"width:600px;height: 650px";BX.SGCP.popup=new BX.PopupWindow("BXSGCP",null,{autoHide:false,zIndex:0,offsetLeft:0,offsetTop:0,overlay:true,lightShadow:true,draggable:{restrict:true},closeByEsc:true,titleBar:p,contentColor:"white",contentNoPaddings:true,closeIcon:{right:"12px",top:"10px"},buttons:[],content:'<div style="'+i+'"></div>',events:{onAfterPopupShow:function(){this.setContent('<div style="'+i+'">'+BX.message("SONET_SGCP_LOADING_"+e)+"</div>");BX.ajax.post(n,{lang:BX.message("LANGUAGE_ID"),site_id:BX.message("SITE_ID")||"",arParams:BX.SGCP.params[e]},BX.delegate(function(t){this.setContent(t);if(BX.SGCP.popup){setTimeout(function(){BX.SGCP.popup.adjustPosition()},100)}},this))},onPopupClose:function(){BX.SGCP.onPopupClose()}}});BX.SGCP.popup.params.zIndex=BX.WindowManager?BX.WindowManager.GetZIndex():0;BX.SGCP.popup.show()}BX.PreventDefault(o)};BX.SGCP.onPopupClose=function(){if(typeof BX.SocNetLogDestination!="undefined"){if(BX.SocNetLogDestination.popupWindow!=null){BX.SocNetLogDestination.popupWindow.close()}if(BX.SocNetLogDestination.popupSearchWindow!=null){BX.SocNetLogDestination.popupSearchWindow.close()}}};BX.SGCP.destroyPopup=function(){BX.SGCP.onPopupClose();if(BX.SGCP.popup!=null){BX.SGCP.popup.destroy()}}})();