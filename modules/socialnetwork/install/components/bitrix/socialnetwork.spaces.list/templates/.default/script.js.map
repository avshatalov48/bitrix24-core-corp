{"version":3,"file":"script.js","sources":["src/store/add-form-store.js","src/api/client.js","src/api/load/recent-service.js","src/const/mode.js","src/const/filter-mode.js","src/const/space.js","src/store/helper.js","src/store/main-store.js","src/store/store.js","src/util/link-manager.js","src/const/spaces-list-state.js","src/const/event.js","src/components/popup/base-popup.js","src/components/popup-menu/popup-menu-option.js","src/components/popup-menu/popup-menu-button.js","src/components/popup-menu/popup-menu-content.js","src/components/popup-menu/popup-menu.js","src/components/header/recent-header.js","src/api/load/search-service.js","src/components/header/search-header.js","src/components/context-menu/items/context-item.js","src/components/context-menu/items/pin.js","src/components/context-menu/items/follow.js","src/components/context-menu/items/open.js","src/components/context-menu/context-menu.js","src/components/context-menu/context-menu-collection.js","src/util/date-formatter.js","src/components/space/avatar.js","src/components/space/space-content.js","src/components/popup-short-space/popup-short-space.js","src/components/space/space.js","src/const/keyboard-codes.js","src/components/space-add-form/space-add-form.js","src/components/space-list/space-list-add-button.js","src/components/loader/loader.js","src/components/space-list/space-list.js","src/api/load/recent-search-service.js","src/components/collapsed-mode-toggle-block/collapsed-mode-toggle-block.js","src/components/base-component.js","src/pull/pull-requests.js","src/list.js"],"sourcesContent":["export const AddFormStore = {\n\tstate(): Object\n\t{\n\t\treturn {\n\t\t\tavatarColors: [],\n\t\t\tavatarColor: '29AD49',\n\t\t};\n\t},\n\tactions:\n\t\t{\n\t\t\tsetAvatarColors: (store, colors) => {\n\t\t\t\tstore.commit('setAvatarColors', colors);\n\t\t\t},\n\t\t\tsetAvatarColor: (store, color) => {\n\t\t\t\tstore.commit('setAvatarColor', color);\n\t\t\t},\n\t\t},\n\tmutations:\n\t\t{\n\t\t\tsetAvatarColors: (state, colors) => {\n\t\t\t\tstate.avatarColors = colors;\n\t\t\t},\n\t\t\tsetAvatarColor: (state, color) => {\n\t\t\t\tstate.avatarColor = color;\n\t\t\t},\n\t\t},\n\tgetters:\n\t\t{\n\t\t\tavatarColors: (state) => {\n\t\t\t\treturn state.avatarColors;\n\t\t\t},\n\t\t\tpreviousAvatarColor: (state) => {\n\t\t\t\treturn state.avatarColor;\n\t\t\t},\n\t\t},\n};\n","import { ajax } from 'main.core';\n\nexport type LoadSpacesFields = {\n\tloadedSpacesCount: number,\n\tmode: string,\n\tsearchString: string,\n};\n\nexport type ReloadSpacesFields = {\n\tmode: string,\n\tselectedSpaceId: number,\n};\n\nexport type SearchSpacesFields = {\n\tloadedSpacesCount: number,\n\tsearchString: string,\n};\n\nexport class Client\n{\n\tstatic async loadSpaces(data: LoadSpacesFields): Promise\n\t{\n\t\tconst componentName = 'bitrix:socialnetwork.spaces.list';\n\t\tconst actionName = 'loadSpaces';\n\n\t\tconst response = await ajax.runComponentAction(componentName, actionName, {\n\t\t\tmode: 'class',\n\t\t\tdata,\n\t\t});\n\n\t\treturn response.data;\n\t}\n\n\tstatic async reloadSpaces(data: LoadSpacesFields): Promise\n\t{\n\t\tconst componentName = 'bitrix:socialnetwork.spaces.list';\n\t\tconst actionName = 'reloadSpaces';\n\n\t\tconst response = await ajax.runComponentAction(componentName, actionName, {\n\t\t\tmode: 'class',\n\t\t\tdata,\n\t\t});\n\n\t\treturn response.data;\n\t}\n\n\tstatic async searchSpaces(data: SearchSpacesFields): Promise\n\t{\n\t\tconst componentName = 'bitrix:socialnetwork.spaces.list';\n\t\tconst actionName = 'searchSpaces';\n\n\t\tconst response = await ajax.runComponentAction(componentName, actionName, {\n\t\t\tmode: 'class',\n\t\t\tdata,\n\t\t});\n\n\t\treturn response.data;\n\t}\n\n\tstatic async loadRecentSearchSpaces(): Promise\n\t{\n\t\tconst componentName = 'bitrix:socialnetwork.spaces.list';\n\t\tconst actionName = 'loadRecentSearchSpaces';\n\n\t\tconst response = await ajax.runComponentAction(componentName, actionName, { mode: 'class' });\n\n\t\treturn response.data;\n\t}\n\n\tstatic async addSpaceToRecentSearch(spaceId: number): Promise\n\t{\n\t\tconst componentName = 'bitrix:socialnetwork.spaces.list';\n\t\tconst actionName = 'addSpaceToRecentSearch';\n\n\t\tconst response = await ajax.runComponentAction(componentName, actionName, {\n\t\t\tmode: 'class',\n\t\t\tdata: {\n\t\t\t\tspaceId,\n\t\t\t},\n\t\t});\n\n\t\treturn response.data;\n\t}\n\n\tstatic async loadSpaceData(spaceId: number): Promise\n\t{\n\t\tconst componentName = 'bitrix:socialnetwork.spaces.list';\n\t\tconst actionName = 'loadSpaceData';\n\n\t\tconst response = await ajax.runComponentAction(componentName, actionName, {\n\t\t\tmode: 'class',\n\t\t\tdata: {\n\t\t\t\tspaceId,\n\t\t\t},\n\t\t});\n\n\t\treturn response.data;\n\t}\n}\n","import { Client } from '../client';\nimport { LoadServiceInterface } from './load-service-interface';\nimport { ReloadServiceInterface } from './reload-service-interface';\nimport type { LoadSpacesFields, ReloadSpacesFields } from '../client';\n\nexport type LoadRecentSpacesRequestFields = {\n\tloadedSpacesCount: number,\n\tfilterMode: string,\n};\n\nexport type ReloadRecentSpacesRequestFields = {\n\tfilterMode: string,\n\tselectedSpaceId: number,\n};\n\nexport class RecentService implements LoadServiceInterface, ReloadServiceInterface\n{\n\tstatic instance = null;\n\t#selectedSpaceId: number;\n\thasMoreSpacesToLoad: boolean = true;\n\n\tstatic getInstance(): RecentService\n\t{\n\t\tif (!this.instance)\n\t\t{\n\t\t\tthis.instance = new this();\n\t\t}\n\n\t\treturn this.instance;\n\t}\n\n\tsetSelectedSpaceId(selectedSpaceId: number)\n\t{\n\t\tthis.#selectedSpaceId = selectedSpaceId;\n\t}\n\n\tgetSelectedSpaceId(): number\n\t{\n\t\treturn this.#selectedSpaceId;\n\t}\n\n\tasync loadSpaces(data: LoadRecentSpacesRequestFields): Promise\n\t{\n\t\tconst fields: LoadSpacesFields = {};\n\t\tfields.loadedSpacesCount = data.loadedSpacesCount;\n\t\tfields.mode = data.filterMode;\n\t\tfields.searchString = '';\n\n\t\tconst result = await Client.loadSpaces(fields);\n\n\t\tthis.hasMoreSpacesToLoad = result.hasMoreSpacesToLoad;\n\n\t\treturn result;\n\t}\n\n\tcanLoadSpaces(): boolean\n\t{\n\t\treturn this.hasMoreSpacesToLoad;\n\t}\n\n\tasync reloadSpaces(data: ReloadRecentSpacesRequestFields): Promise\n\t{\n\t\tconst fields: ReloadSpacesFields = {};\n\t\tfields.mode = data.filterMode;\n\t\tfields.selectedSpaceId = this.#selectedSpaceId;\n\n\t\tconst result = await Client.reloadSpaces(fields);\n\t\tthis.hasMoreSpacesToLoad = result.hasMoreSpacesToLoad;\n\n\t\treturn result;\n\t}\n}\n","export const Modes = Object.freeze({\n\trecent: 'recent',\n\trecentSearch: 'recentSearch',\n\tsearch: 'search',\n});\n","export const FilterModeTypes = Object.freeze({\n\tmy: 'my',\n\tother: 'other',\n\tall: 'all',\n});\n\nexport const FilterModes = Object.freeze([\n\t{\n\t\ttype: FilterModeTypes.my,\n\t\tnameMessageId: 'SOCIALNETWORK_SPACES_LIST_FILTER_MODE_MY_TITLE',\n\t\tdescriptionMessageId: 'SOCIALNETWORK_SPACES_LIST_FILTER_MODE_MY_DESCRIPTION',\n\t},\n\t{\n\t\ttype: FilterModeTypes.other,\n\t\tnameMessageId: 'SOCIALNETWORK_SPACES_LIST_FILTER_MODE_OTHER_TITLE',\n\t\tdescriptionMessageId: 'SOCIALNETWORK_SPACES_LIST_FILTER_MODE_OTHER_DESCRIPTION',\n\t},\n\t{\n\t\ttype: FilterModeTypes.all,\n\t\tnameMessageId: 'SOCIALNETWORK_SPACES_LIST_FILTER_MODE_ALL_TITLE',\n\t\tdescriptionMessageId: 'SOCIALNETWORK_SPACES_LIST_FILTER_MODE_ALL_DESCRIPTION',\n\t},\n]);\n","export const SpaceViewModeTypes = Object.freeze({\n\topen: 'open',\n\tclosed: 'closed',\n\tsecret: 'secret',\n});\n\nexport const SpaceViewModes = Object.freeze([\n\t{\n\t\ttype: SpaceViewModeTypes.open,\n\t\tnameMessageId: 'SOCIALNETWORK_SPACES_LIST_SPACE_VIEW_MODE_OPEN_TITLE',\n\t\tdescriptionMessageId: 'SOCIALNETWORK_SPACES_LIST_SPACE_VIEW_MODE_OPEN_DESCRIPTION',\n\t},\n\t{\n\t\ttype: SpaceViewModeTypes.closed,\n\t\tnameMessageId: 'SOCIALNETWORK_SPACES_LIST_SPACE_VIEW_MODE_CLOSED_TITLE',\n\t\tdescriptionMessageId: 'SOCIALNETWORK_SPACES_LIST_SPACE_VIEW_MODE_CLOSED_DESCRIPTION',\n\t},\n\t{\n\t\ttype: SpaceViewModeTypes.secret,\n\t\tnameMessageId: 'SOCIALNETWORK_SPACES_LIST_SPACE_VIEW_MODE_SECRET_TITLE',\n\t\tdescriptionMessageId: 'SOCIALNETWORK_SPACES_LIST_SPACE_VIEW_MODE_SECRET_DESCRIPTION',\n\t},\n]);\n\nexport const SpaceUserRoles = Object.freeze({\n\tnonMember: 'nonMember',\n\tapplicant: 'applicant',\n\tinvited: 'invited',\n\tmember: 'member',\n});\n","import type { SpaceModel } from '../model/space-model';\nimport type { InvitationModel } from '../model/invitation-model';\nimport { RecentService } from '../api/load/recent-service';\nimport { Modes } from '../const/mode';\nimport { FilterModeTypes } from '../const/filter-mode';\nimport { SpaceUserRoles } from '../const/space';\n\nexport class Helper\n{\n\tstatic instance = null;\n\tstatic getInstance(): Helper\n\t{\n\t\tif (!this.instance)\n\t\t{\n\t\t\tthis.instance = new this();\n\t\t}\n\n\t\treturn this.instance;\n\t}\n\n\tbuildSpaces(spaces): SpaceModel[]\n\t{\n\t\treturn spaces.map((spaceData) => ({\n\t\t\tid: parseInt(spaceData.id, 10),\n\t\t\tname: spaceData.name,\n\t\t\tisPinned: spaceData.isPinned,\n\t\t\tisSelected: RecentService.getInstance().getSelectedSpaceId() === parseInt(spaceData.id, 10),\n\t\t\tdateActivity: new Date(parseInt(spaceData.dateActivityTimestamp, 10) * 1000),\n\t\t\tdateActivityTimestamp: spaceData.dateActivityTimestamp * 1000,\n\t\t\tlastActivityDescription: spaceData.lastActivityDescription,\n\t\t\tavatar: spaceData.avatar,\n\t\t\tvisibilityType: spaceData.visibilityType,\n\t\t\tcounter: parseInt(spaceData.counter, 10),\n\t\t\tlastSearchDate: new Date(parseInt(spaceData.lastSearchDateTimestamp, 10) * 1000),\n\t\t\tlastSearchDateTimestamp: spaceData.lastSearchDateTimestamp * 1000,\n\t\t\tuserRole: spaceData.userRole,\n\t\t\tfollow: spaceData.follow,\n\t\t}));\n\t}\n\n\tbuildInvitations(invitations): InvitationModel[]\n\t{\n\t\treturn invitations.map((invitationData) => ({\n\t\t\tspaceId: parseInt(invitationData.spaceId, 10),\n\t\t\tmessage: invitationData.message,\n\t\t\tinvitationDateTimestamp: invitationData.invitationDateTimestamp * 1000,\n\t\t\tinvitationDate: new Date(parseInt(invitationData.invitationDateTimestamp, 10) * 1000),\n\t\t}));\n\t}\n\n\tgetStringCapitalized(string: string): string\n\t{\n\t\treturn string[0].toUpperCase() + string.slice(1);\n\t}\n\n\tgetModelNameByListViewMode(mode: string): string\n\t{\n\t\tlet result = `${mode}ListSpaceIds`;\n\t\tif (mode === Modes.search)\n\t\t{\n\t\t\tresult = 'searchResultFromServerSpaceIds';\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tdoSpaceUserRoleFitsFilterMode(userRole: string, filterMode: string): boolean\n\t{\n\t\tif ([SpaceUserRoles.nonMember, SpaceUserRoles.applicant].includes(userRole) && filterMode === FilterModeTypes.my)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tif (userRole === SpaceUserRoles.member && filterMode === FilterModeTypes.other)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\treturn userRole !== SpaceUserRoles.invited;\n\t}\n}","import { Helper } from './helper';\nimport { FilterModeTypes } from '../const/filter-mode';\n\nimport type { SpaceModel } from '../model/space-model';\nimport type { InvitationModel } from '../model/invitation-model';\n\nexport const MainStore = {\n\tstate(): Object\n\t{\n\t\treturn {\n\t\t\tspaces: new Map(),\n\t\t\trecentListSpaceIds: new Set(),\n\t\t\tsearchResultFromServerSpaceIds: new Set(),\n\t\t\tsearchResultFromLoadedSpaceIds: new Set(),\n\t\t\tinvitations: new Map(),\n\t\t\tinvitationSpaceIds: new Set(),\n\t\t\trecentSearchListSpaceIds: new Set(),\n\t\t\tselectedFilterModeType: '',\n\t\t\tspacesListState: '',\n\t\t\tcanCreateGroup: false,\n\t\t};\n\t},\n\tactions:\n\t\t{\n\t\t\tsetSpaces: (store, spaces) => {\n\t\t\t\tstore.commit('setSpaces', Helper.getInstance().buildSpaces(spaces));\n\t\t\t},\n\t\t\tsetInvitations: (store, invitations) => {\n\t\t\t\tstore.commit('setInvitations', Helper.getInstance().buildInvitations(invitations));\n\t\t\t},\n\t\t\tsetCanCreateGroup: (store, canCreateGroup) => {\n\t\t\t\tstore.commit('setCanCreateGroup', canCreateGroup);\n\t\t\t},\n\t\t\tsetRecentSpaceIds: (store, spaceIds) => {\n\t\t\t\tstore.commit('setRecentListSpaceIds', spaceIds);\n\t\t\t},\n\t\t\tsetInvitationSpaceIds: (store, spacesIds) => {\n\t\t\t\tstore.commit('setInvitationSpaceIds', spacesIds);\n\t\t\t},\n\t\t\tsetRecentSearchSpaceIds: (store, spaceIds) => {\n\t\t\t\tstore.commit('setRecentSearchListSpaceIds', spaceIds);\n\t\t\t},\n\t\t\taddSpaces: (store, spaces) => {\n\t\t\t\tstore.commit('addSpaces', Helper.getInstance().buildSpaces(spaces));\n\t\t\t},\n\t\t\tsetSelectedFilterModeType: (store, selectedFilterModeType) => {\n\t\t\t\tstore.commit('setSelectedFilterModeType', selectedFilterModeType);\n\t\t\t},\n\t\t\tsetSpacesListState: (store, spacesListState) => {\n\t\t\t\tstore.commit('setSpacesListState', spacesListState);\n\t\t\t},\n\t\t\tsetLocalSearchResult: (store, spaceIds) => {\n\t\t\t\tstore.commit('setSearchResultFromLoadedSpaceIds', spaceIds);\n\t\t\t},\n\t\t\tclearSpacesViewByMode: (store, mode) => {\n\t\t\t\tconst storeHelper = Helper.getInstance();\n\t\t\t\tconst modelName = storeHelper.getModelNameByListViewMode(mode);\n\t\t\t\tconst modelNameCapitalized = storeHelper.getStringCapitalized(modelName);\n\n\t\t\t\tstore.commit(`set${modelNameCapitalized}`, []);\n\t\t\t},\n\t\t\taddSpacesToView: (store, data) => {\n\t\t\t\tconst storeHelper = Helper.getInstance();\n\n\t\t\t\tconst changedModel = storeHelper.getModelNameByListViewMode(data.mode);\n\t\t\t\tconst changedModelCapitalized = storeHelper.getStringCapitalized(changedModel);\n\n\t\t\t\tconst spaces = storeHelper.buildSpaces(data.spaces);\n\t\t\t\tconst addedSpaceIds = spaces.map((space) => space.id);\n\t\t\t\tconst newSpaceIds = [...store.state[changedModel], ...addedSpaceIds];\n\n\t\t\t\tstore.commit(`set${changedModelCapitalized}`, newSpaceIds);\n\t\t\t\tstore.commit('addSpaces', spaces);\n\t\t\t},\n\t\t\tpinSpace: (store, data) => {\n\t\t\t\tstore.commit('pinSpace', data);\n\t\t\t},\n\t\t\tchangeUserRole: (store, data) => {\n\t\t\t\tstore.commit('changeUserRole', data);\n\t\t\t},\n\t\t\tdeleteInvitationFromStore: (store, data) => {\n\t\t\t\tconst spaceId = data.spaceId;\n\t\t\t\tstore.commit('deleteInvitationBySpaceId', spaceId);\n\t\t\t},\n\t\t\tdeleteSpaceFromStore: (store, data) => {\n\t\t\t\tconst spaceId = data.spaceId;\n\t\t\t\tstore.commit('deleteSpaceById', spaceId);\n\t\t\t},\n\t\t\tupdateCounters: (store, data) => {\n\t\t\t\tconst userId = data.userId;\n\t\t\t\tconst total = data.total;\n\n\t\t\t\tBX.ready(() => {\n\t\t\t\t\tif (BX.getClass('BX.Intranet.LeftMenu'))\n\t\t\t\t\t{\n\t\t\t\t\t\tdata.spaces.forEach((space) => {\n\t\t\t\t\t\t\tif (space.id === 0)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tconst leftMenuCounters = {\n\t\t\t\t\t\t\t\t\tspaces: total,\n\t\t\t\t\t\t\t\t\tsonet_total: space.metrics.countersLiveFeedTotal,\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tBX.Intranet.LeftMenu.updateCounters(leftMenuCounters, false);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tdata.spaces.forEach((space) => {\n\t\t\t\t\tstore.commit('updateCounter', {\n\t\t\t\t\t\tuserId,\n\t\t\t\t\t\tspaceId: space.id,\n\t\t\t\t\t\tcounter: space.total,\n\t\t\t\t\t\ttasksTotal: space.metrics.countersTasksTotal,\n\t\t\t\t\t\tcalendarTotal: space.metrics.countersCalendarTotal,\n\t\t\t\t\t\tworkGroupTotal: space.metrics.countersWorkGroupRequestTotal,\n\t\t\t\t\t\tlifeFeedTotal: space.metrics.countersLiveFeedTotal,\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t},\n\t\t\tupdateSpaceData: (store, data) => {\n\t\t\t\tif (data.space && data.isInvitation)\n\t\t\t\t{\n\t\t\t\t\tstore.commit('addInvitations', Helper.getInstance().buildInvitations([data.invitation]));\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tstore.commit('deleteInvitationBySpaceId', data.spaceId);\n\t\t\t\t}\n\n\t\t\t\tif (data.space)\n\t\t\t\t{\n\t\t\t\t\tconst helper = Helper.getInstance();\n\t\t\t\t\tconst space: SpaceModel = helper.buildSpaces([data.space]).pop();\n\t\t\t\t\tconst lastRecentSpace: SpaceModel = store.getters.recentSpaces[store.getters.recentSpaces.length - 1];\n\n\t\t\t\t\tstore.commit('addSpaces', [space]);\n\n\t\t\t\t\tconst doDateActivityFits = lastRecentSpace.dateActivity < space.dateActivity;\n\t\t\t\t\tconst doUserRoleFitsFilterMode = helper.doSpaceUserRoleFitsFilterMode(\n\t\t\t\t\t\tspace.userRole,\n\t\t\t\t\t\tstore.state.selectedFilterModeType,\n\t\t\t\t\t);\n\n\t\t\t\t\tif (doDateActivityFits && doUserRoleFitsFilterMode)\n\t\t\t\t\t{\n\t\t\t\t\t\tstore.commit('addRecentListSpaceId', space.id);\n\t\t\t\t\t}\n\t\t\t\t\telse if (!doUserRoleFitsFilterMode)\n\t\t\t\t\t{\n\t\t\t\t\t\tstore.commit('removeRecentListSpaceId', space.id);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tstore.commit('deleteSpaceById', data.spaceId);\n\t\t\t\t}\n\t\t\t},\n\t\t},\n\tmutations:\n\t\t{\n\t\t\tsetSpaces: (state, spaces) => {\n\t\t\t\tstate.spaces.clear();\n\t\t\t\tspaces.forEach((space) => state.spaces.set(space.id, space));\n\t\t\t},\n\t\t\taddSpaces: (state, spaces) => {\n\t\t\t\tspaces.forEach((space) => state.spaces.set(space.id, space));\n\t\t\t},\n\t\t\tsetRecentListSpaceIds: (state, spaceIds) => {\n\t\t\t\t// eslint-disable-next-line no-param-reassign\n\t\t\t\tstate.recentListSpaceIds = new Set(spaceIds);\n\t\t\t},\n\t\t\taddRecentListSpaceId: (state, spaceId) => {\n\t\t\t\tstate.recentListSpaceIds.add(spaceId);\n\t\t\t},\n\t\t\tremoveRecentListSpaceId: (state, spaceId) => {\n\t\t\t\tstate.recentListSpaceIds.delete(spaceId);\n\t\t\t},\n\t\t\tsetInvitations: (state, invitations) => {\n\t\t\t\tstate.invitations.clear();\n\t\t\t\tinvitations.forEach((invitation) => state.invitations.set(invitation.spaceId, invitation));\n\t\t\t},\n\t\t\tsetInvitationSpaceIds: (state, spaceIds) => {\n\t\t\t\t// eslint-disable-next-line no-param-reassign\n\t\t\t\tstate.invitationSpaceIds = new Set(spaceIds);\n\t\t\t},\n\t\t\taddInvitations: (state, invitations) => {\n\t\t\t\tinvitations.forEach((invitation) => {\n\t\t\t\t\tstate.invitationSpaceIds.add(invitation.spaceId);\n\t\t\t\t\tstate.invitations.set(invitation.spaceId, invitation);\n\t\t\t\t});\n\t\t\t},\n\t\t\tsetCanCreateGroup: (state, canCreateGroup) => {\n\t\t\t\t// eslint-disable-next-line no-param-reassign\n\t\t\t\tstate.canCreateGroup = canCreateGroup;\n\t\t\t},\n\t\t\tsetSearchResultFromServerSpaceIds: (state, spaceIds) => {\n\t\t\t\t// eslint-disable-next-line no-param-reassign\n\t\t\t\tstate.searchResultFromServerSpaceIds = new Set(spaceIds);\n\t\t\t},\n\t\t\tsetSearchResultFromLoadedSpaceIds: (state, spaceIds) => {\n\t\t\t\t// eslint-disable-next-line no-param-reassign\n\t\t\t\tstate.searchResultFromLoadedSpaceIds = new Set(spaceIds);\n\t\t\t},\n\t\t\tsetRecentSearchListSpaceIds: (state, spaceIds) => {\n\t\t\t\t// eslint-disable-next-line no-param-reassign\n\t\t\t\tstate.recentSearchListSpaceIds = new Set(spaceIds);\n\t\t\t},\n\t\t\tsetSelectedFilterModeType: (state, selectedFilterModeType) => {\n\t\t\t\t// eslint-disable-next-line no-param-reassign\n\t\t\t\tstate.selectedFilterModeType = selectedFilterModeType;\n\t\t\t},\n\t\t\tsetSpacesListState: (state, spacesListState) => {\n\t\t\t\t// eslint-disable-next-line no-param-reassign\n\t\t\t\tstate.spacesListState = spacesListState;\n\t\t\t},\n\t\t\tpinSpace: (state, data) => {\n\t\t\t\tconst space: SpaceModel = state.spaces.get(data.spaceId);\n\t\t\t\tspace.isPinned = data.isPinned;\n\t\t\t\tstate.spaces.set(space.id, space);\n\t\t\t},\n\t\t\tchangeUserRole: (state, data) => {\n\t\t\t\tconst space: SpaceModel = state.spaces.get(data.spaceId);\n\t\t\t\tspace.userRole = data.userRole;\n\t\t\t},\n\t\t\tdeleteSpaceById: (state, spaceId: number) => {\n\t\t\t\tstate.spaces.delete(spaceId);\n\t\t\t\tstate.recentListSpaceIds.delete(spaceId);\n\t\t\t\tstate.searchResultFromServerSpaceIds.delete(spaceId);\n\t\t\t\tstate.searchResultFromLoadedSpaceIds.delete(spaceId);\n\t\t\t\tstate.recentSearchListSpaceIds.delete(spaceId);\n\t\t\t},\n\t\t\tdeleteInvitationBySpaceId: (state, spaceId: number) => {\n\t\t\t\tstate.invitations.delete(spaceId);\n\t\t\t\tstate.invitationSpaceIds.delete(spaceId);\n\t\t\t},\n\t\t\tupdateCounter: (state, data) => {\n\t\t\t\tconst userId = data.userId;\n\t\t\t\tconst spaceId = data.spaceId;\n\t\t\t\tconst counter = data.counter;\n\t\t\t\tconst tasksTotal = data.tasksTotal;\n\t\t\t\tconst calendarTotal = data.calendarTotal;\n\t\t\t\tconst workGroupTotal = data.workGroupTotal;\n\t\t\t\tconst discussionsTotal = data.lifeFeedTotal;\n\n\t\t\t\tconst space: SpaceModel = state.spaces.get(spaceId) ?? {};\n\t\t\t\tspace.counter = counter;\n\n\t\t\t\tBX.ready(() => {\n\t\t\t\t\tconst menu = (spaceId == 0)\n\t\t\t\t\t\t? BX.Main.interfaceButtonsManager.getById(`spaces_user_menu_${userId}`)\n\t\t\t\t\t\t: BX.Main.interfaceButtonsManager.getById(`spaces_group_menu_${spaceId}`);\n\n\t\t\t\t\tif (menu)\n\t\t\t\t\t{\n\t\t\t\t\t\tconst btn = `spaces_top_menu_${userId}_${spaceId}`;\n\t\t\t\t\t\tconst tasksBtn = `${btn}_tasks`;\n\t\t\t\t\t\tconst calendarBtn = `${btn}_calendar`;\n\t\t\t\t\t\tconst discussionBtn = `${btn}_discussions`;\n\n\t\t\t\t\t\tmenu.updateCounter(tasksBtn, tasksTotal);\n\t\t\t\t\t\tmenu.updateCounter(calendarBtn, calendarTotal);\n\t\t\t\t\t\tmenu.updateCounter(discussionBtn, discussionsTotal);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t},\n\tgetters:\n\t\t{\n\t\t\tspaces: (state) => {\n\t\t\t\treturn [...state.spaces.values()];\n\t\t\t},\n\t\t\tinvitations: (state) => {\n\t\t\t\treturn [...state.invitations.values()];\n\t\t\t},\n\t\t\tspaceInvitations: (state, getters) => {\n\t\t\t\tconst spacesMap = state.spaces;\n\t\t\t\tconst invitations = getters.invitations;\n\n\t\t\t\treturn invitations.map((invitation: InvitationModel) => {\n\t\t\t\t\tconst space: SpaceModel = spacesMap.get(invitation.spaceId);\n\t\t\t\t\tconst spaceInvitationFields = {\n\t\t\t\t\t\tdateActivity: invitation.invitationDate,\n\t\t\t\t\t\tlastActivityDescription: invitation.message,\n\t\t\t\t\t\tcounter: 1,\n\t\t\t\t\t};\n\n\t\t\t\t\treturn { ...space, ...spaceInvitationFields };\n\t\t\t\t}).sort((a: SpaceModel, b: SpaceModel) => {\n\t\t\t\t\treturn b.dateActivity - a.dateActivity;\n\t\t\t\t});\n\t\t\t},\n\t\t\tcanCreateGroup: (state) => {\n\t\t\t\treturn state.canCreateGroup;\n\t\t\t},\n\t\t\tspacesListState: (state) => {\n\t\t\t\treturn state.spacesListState;\n\t\t\t},\n\t\t\trecentSpacesUnordered: (state, getters) => {\n\t\t\t\tconst spaces = getters.spaces;\n\t\t\t\tconst unsortedRecentSpaces = spaces.filter((space: SpaceModel) => {\n\t\t\t\t\treturn state.recentListSpaceIds.has(space.id) && !state.invitationSpaceIds.has(space.id);\n\t\t\t\t});\n\n\t\t\t\treturn unsortedRecentSpaces.sort((a: SpaceModel, b: SpaceModel) => {\n\t\t\t\t\treturn b.dateActivity - a.dateActivity;\n\t\t\t\t});\n\t\t\t},\n\t\t\tpinnedSpacesFromRecent: (state, getters): Array => {\n\t\t\t\treturn getters.recentSpacesUnordered.filter((space: SpaceModel) => space.isPinned);\n\t\t\t},\n\t\t\tcommonSpaceFromRecent: (state, getters): SpaceModel | undefined => {\n\t\t\t\treturn getters.recentSpacesUnordered.find((space: SpaceModel) => space.id === 0);\n\t\t\t},\n\t\t\tselectedSpaceFromRecent: (state, getters): SpaceModel | undefined => {\n\t\t\t\treturn getters.recentSpacesUnordered.find((space: SpaceModel) => space.isSelected && !space.isPinned);\n\t\t\t},\n\t\t\totherSpacesFromRecent: (state, getters): Array => {\n\t\t\t\treturn getters.recentSpacesUnordered.filter((space: SpaceModel) => {\n\t\t\t\t\treturn space.id !== getters.commonSpaceFromRecent.id && !space.isSelected && !space.isPinned;\n\t\t\t\t});\n\t\t\t},\n\t\t\trecentSpaces: (state, getters): Array => {\n\t\t\t\tconst result = [];\n\t\t\t\tif (state.selectedFilterModeType === FilterModeTypes.my)\n\t\t\t\t{\n\t\t\t\t\tresult.push(...getters.pinnedSpacesFromRecent);\n\t\t\t\t}\n\n\t\t\t\tif (getters.commonSpaceFromRecent && state.selectedFilterModeType !== FilterModeTypes.other)\n\t\t\t\t{\n\t\t\t\t\tresult.push(getters.commonSpaceFromRecent);\n\t\t\t\t}\n\n\t\t\t\tif (getters.selectedSpaceFromRecent && getters.selectedSpaceFromRecent.id !== getters.commonSpaceFromRecent.id)\n\t\t\t\t{\n\t\t\t\t\tresult.push(getters.selectedSpaceFromRecent);\n\t\t\t\t}\n\n\t\t\t\tresult.push(...getters.otherSpacesFromRecent);\n\n\t\t\t\treturn result;\n\t\t\t},\n\t\t\tsearchSpaces: (state, getters) => {\n\t\t\t\tconst spaces = getters.spaces;\n\t\t\t\tconst searchResultIds = new Set([\n\t\t\t\t\t...state.searchResultFromLoadedSpaceIds,\n\t\t\t\t\t...state.searchResultFromServerSpaceIds,\n\t\t\t\t]);\n\n\t\t\t\treturn spaces.filter((space: SpaceModel) => searchResultIds.has(space.id));\n\t\t\t},\n\t\t\tspacesLoadedByCurrentSearchQueryCount: (state) => {\n\t\t\t\treturn state.searchResultFromServerSpaceIds.size;\n\t\t\t},\n\t\t\trecentSearchSpaces: (state, getters) => {\n\t\t\t\tconst unsortedRecentSearchSpaces = getters.spaces.filter((space: SpaceModel) => {\n\t\t\t\t\treturn state.recentSearchListSpaceIds.has(space.id);\n\t\t\t\t});\n\n\t\t\t\treturn unsortedRecentSearchSpaces.sort((a: SpaceModel, b: SpaceModel) => {\n\t\t\t\t\treturn b.lastSearchDate - a.lastSearchDate;\n\t\t\t\t});\n\t\t\t},\n\t\t\trecentSpacesCountForLoad: (state, getters) => {\n\t\t\t\t// Do this subtraction because of selected space and common space.\n\t\t\t\t// They are selected bypassing the sorting\n\t\t\t\treturn getters.recentSpaces.length - 2;\n\t\t\t},\n\t\t\trecentSearchSpacesCountForLoad: (state, getters) => {\n\t\t\t\treturn getters.recentSearchSpaces.length;\n\t\t\t},\n\t\t\tsearchSpacesCountForLoad: (state, getters) => {\n\t\t\t\treturn getters.spacesLoadedByCurrentSearchQueryCount;\n\t\t\t},\n\t\t},\n};\n","import { createStore } from 'ui.vue3.vuex';\nimport { AddFormStore } from './add-form-store';\nimport { MainStore } from './main-store';\n\nexport const Store = createStore({\n\tmodules: {\n\t\taddForm: AddFormStore,\n\t\tmain: MainStore,\n\t},\n});\n","export class LinkManager\n{\n\tstatic groupPath = '';\n\tstatic commonSpacePath = '';\n\n\tstatic getSpaceLink(spaceId: number): string\n\t{\n\t\tlet path = LinkManager.commonSpacePath;\n\t\tif (spaceId > 0)\n\t\t{\n\t\t\tpath = LinkManager.groupPath.replace('#group_id#', spaceId);\n\t\t}\n\n\t\treturn path;\n\t}\n}\n","export const SpacesListStates = Object.freeze({\n\tdefault: 'default',\n\tcollapsed: 'collapsed',\n\texpanded: 'expanded',\n});\n","export const EventTypes = Object.freeze({\n\tshowLoader: 'socialnetwork:spacesList:showLoader',\n\thideLoader: 'socialnetwork:spacesList:hideLoader',\n\ttryToLoadSpacesIfHasNoScrollbar: 'socialnetwork:spacesList:tryToLoadSpacesIfHasNoScrollbar',\n\tspaceListScroll: 'socialnetwork:spacesList:onScroll',\n\tspaceListShown: 'socialnetwork:spacesList:onShown',\n\tshowUpperSpaceAddForm: 'socialnetwork:spacesList:showUpperSpaceAddForm',\n\tshowBtnToggleBlock: 'socialnetwork:spacesList:showBtnToggleBlock',\n\thideSpaceAddForm: 'socialnetwork:spacesList:hideSpaceAddForm',\n\tupdateCounters: 'socialnetwork:spacesList:updateCounters',\n\tchangeSpace: 'socialnetwork:spacesList:changeSpace',\n\tchangeUserRole: 'socialnetwork:spacesList:changeUserRole',\n\tchangeSubscription: 'socialnetwork:spacesList:changeSubscription',\n\tpinChanged: 'socialnetwork:spacesList:pinChanged',\n\tchangeSpaceListState: 'socialnetwork:spacesList:changeSpaceListState',\n});\n","import { Popup, PopupManager } from 'main.popup';\nimport { Type } from 'main.core';\n\nconst POPUP_CONTAINER_PREFIX = '#popup-window-content-';\n// @vue/component\nexport const BasePopup = {\n\tname: 'BasePopup',\n\tprops: {\n\t\tid: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tconfig: {\n\t\t\ttype: Object,\n\t\t\trequired: false,\n\t\t\tdefault(): Object {\n\t\t\t\treturn {};\n\t\t\t},\n\t\t},\n\t},\n\temits: ['close'],\n\tcomputed: {\n\t\tpopupContainer(): string\n\t\t{\n\t\t\treturn `${POPUP_CONTAINER_PREFIX}${this.id}`;\n\t\t},\n\t},\n\tcreated()\n\t{\n\t\tthis.instance = this.getPopupInstance();\n\t\tthis.instance.show();\n\t},\n\tmounted()\n\t{\n\t\tthis.instance.adjustPosition({\n\t\t\tforceBindPosition: true,\n\t\t\tposition: this.getPopupConfig().bindOptions.position,\n\t\t});\n\t},\n\tbeforeUnmount()\n\t{\n\t\tif (!this.instance)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.closePopup();\n\t},\n\tmethods: {\n\t\tgetPopupInstance(): Popup\n\t\t{\n\t\t\tif (!this.instance)\n\t\t\t{\n\t\t\t\tPopupManager.getPopupById(this.id)?.destroy();\n\t\t\t\tthis.instance = new Popup(this.getPopupConfig());\n\t\t\t}\n\n\t\t\treturn this.instance;\n\t\t},\n\t\tgetDefaultConfig(): Object\n\t\t{\n\t\t\treturn {\n\t\t\t\tid: this.id,\n\t\t\t\tclassName: 'ui-test-popup',\n\t\t\t\tautoHide: true,\n\t\t\t\tanimation: 'fading-slide',\n\t\t\t\tbindOptions: {\n\t\t\t\t\tposition: 'bottom',\n\t\t\t\t},\n\t\t\t\tcacheable: false,\n\t\t\t\tevents: {\n\t\t\t\t\tonPopupClose: this.closePopup.bind(this),\n\t\t\t\t},\n\t\t\t};\n\t\t},\n\t\tgetPopupConfig(): Object\n\t\t{\n\t\t\tconst defaultConfig = this.getDefaultConfig();\n\t\t\tconst modifiedOptions = {};\n\n\t\t\tconst defaultClassName = defaultConfig.className;\n\t\t\tif (this.config.className)\n\t\t\t{\n\t\t\t\tmodifiedOptions.className = `${defaultClassName} ${this.config.className}`;\n\t\t\t}\n\n\t\t\tconst offsetTop = this.config.offsetTop ?? defaultConfig.offsetTop;\n\t\t\t// adjust for default popup margin for shadow\n\t\t\tif (this.config.bindOptions?.position === 'top' && Type.isNumber(this.config.offsetTop))\n\t\t\t{\n\t\t\t\tmodifiedOptions.offsetTop = offsetTop - 10;\n\t\t\t}\n\n\t\t\treturn { ...defaultConfig, ...this.config, ...modifiedOptions };\n\t\t},\n\t\tclosePopup()\n\t\t{\n\t\t\tthis.$emit('close');\n\t\t\tthis.instance.destroy();\n\t\t\tthis.instance = null;\n\t\t},\n\t\tenableAutoHide()\n\t\t{\n\t\t\tthis.getPopupInstance().setAutoHide(true);\n\t\t},\n\t\tdisableAutoHide()\n\t\t{\n\t\t\tthis.getPopupInstance().setAutoHide(false);\n\t\t},\n\t\tadjustPosition()\n\t\t{\n\t\t\tthis.getPopupInstance().adjustPosition({\n\t\t\t\tforceBindPosition: true,\n\t\t\t\tposition: this.getPopupConfig().bindOptions.position,\n\t\t\t});\n\t\t},\n\t},\n\ttemplate: `\n\t\t<Teleport :to=\"popupContainer\">\n\t\t\t<slot\n\t\t\t\t:adjustPosition=\"adjustPosition\"\n\t\t\t\t:enableAutoHide=\"enableAutoHide\"\n\t\t\t\t:disableAutoHide=\"disableAutoHide\"\n\t\t\t></slot>\n\t\t</Teleport>\n\t`,\n};\n","// @vue/component\n\nexport const PopupMenuOption = {\n\tprops: {\n\t\toption: {\n\t\t\ttype: Object,\n\t\t\tdefault: () => {},\n\t\t},\n\t\tisSelected: Boolean,\n\t},\n\temits: ['changeSelectedOption'],\n\tcomputed: {\n\t\tactive(): string\n\t\t{\n\t\t\treturn this.isSelected ? '--active' : '';\n\t\t},\n\t\ticonClass(): string\n\t\t{\n\t\t\treturn `--${this.option.type}-spaces`;\n\t\t},\n\t\tdataId(): string\n\t\t{\n\t\t\treturn `spaces-list-popup-menu-option-${this.option.type}`;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div\n\t\t\t@click=\"this.$emit('changeSelectedOption', option.type)\"\n\t\t\tclass=\"sn-spaces__popup-menu_item\"\n\t\t\t:class=\"active\"\n\t\t\t:data-id=\"dataId\"\n\t\t>\n\t\t\t<div class=\"sn-spaces__popup-menu_item-icon\" :class=\"iconClass\"/>\n\t\t\t<div class=\"sn-spaces__popup-menu_item-info\">\n\t\t\t\t<div class=\"sn-spaces__popup-menu_item-name\">{{ option.name }}</div>\n\t\t\t\t<div class=\"sn-spaces__popup-menu_item-description\">{{ option.description }}</div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { Type } from 'main.core';\n\n// @vue/component\nexport const PopupMenuButton = {\n\tprops: {\n\t\tconfig: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\temits: ['popupMenuButtonClick'],\n\tcomputed: {\n\t\tdoShowIcon(): boolean\n\t\t{\n\t\t\treturn Type.isStringFilled(this.config.class);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div\n\t\t\tclass=\"sn-spaces__popup-menu_item sn-spaces__popup-menu_item-btn\"\n\t\t\tdata-id=\"spaces-popup-menu-button\"\n\t\t\t@click=\"this.$emit('popupMenuButtonClick')\"\n\t\t>\n\t\t\t<div v-if=\"doShowIcon\" class=\"ui-icon-set\" :class=\"config.class\"></div>\n\t\t\t{{config.text}}\n\t\t</div>\n\t`,\n};\n","import { PopupMenuOption } from './popup-menu-option';\nimport { PopupMenuButton } from './popup-menu-button';\n// @vue/component\nexport const PopupMenuContent = {\n\tname: 'ModePopupContent',\n\tcomponents: {\n\t\tPopupMenuOption,\n\t\tPopupMenuButton,\n\t},\n\tprops: {\n\t\toptions: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tselectedOption: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t},\n\t\thint: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t},\n\t\tbutton: {\n\t\t\ttype: Object,\n\t\t\trequired: false,\n\t\t\tdefault: () => {},\n\t\t},\n\t},\n\temits: ['closePopup', 'changeSelectedOption', 'popupMenuButtonClick'],\n\tcomputed: {\n\t\tdoShowHint(): boolean\n\t\t{\n\t\t\treturn this.hint.length > 0;\n\t\t},\n\t\tdoShowButton(): boolean\n\t\t{\n\t\t\treturn this.button?.text?.length > 0;\n\t\t},\n\t},\n\tmethods: {\n\t\tonChangeSelectedOption(newSelectedOption)\n\t\t{\n\t\t\tthis.$emit('closePopup');\n\t\t\tthis.$emit('changeSelectedOption', newSelectedOption);\n\t\t},\n\t\tonPopupMenuButtonClick()\n\t\t{\n\t\t\tthis.$emit('closePopup');\n\t\t\tthis.$emit('popupMenuButtonClick');\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"sn-spaces__popup-menu\">\n\t\t\t<PopupMenuOption\n\t\t\t\tv-for=\"option in options\"\n\t\t\t\t:option=\"option\"\n\t\t\t\t:key=\"option.type\"\n\t\t\t\t:isSelected=\"option.type === this.selectedOption\"\n\t\t\t\t@changeSelectedOption=\"onChangeSelectedOption\"\n\t\t\t/>\n\t\t\t<PopupMenuButton\n\t\t\t\tv-if=\"doShowButton\"\n\t\t\t\t:config=\"button\"\n\t\t\t\t@popupMenuButtonClick=\"onPopupMenuButtonClick\"\n\t\t\t/>\n\t\t\t<div v-if=\"doShowHint\" class=\"sn-spaces__popup-menu_hint\">\n\t\t\t\t{{hint}}\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","// @vue/component\nimport { BasePopup } from '../popup/base-popup';\nimport { PopupMenuContent } from './popup-menu-content';\n\nconst POPUP_ID = 'socialnetwork-spaces-list-mode-popup';\n\nexport const PopupMenu = {\n\tcomponents: { BasePopup, PopupMenuContent },\n\tprops: {\n\t\tbindElement: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tcontext: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\toptions: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tselectedOption: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t},\n\t\tbutton: {\n\t\t\ttype: Object,\n\t\t\trequired: false,\n\t\t\tdefault: () => {},\n\t\t},\n\t\thint: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t},\n\t},\n\tcomputed: {\n\t\tPOPUP_ID(): string {\n\t\t\treturn `${POPUP_ID}-${this.context}`;\n\t\t},\n\t\tconfig(): Object {\n\t\t\treturn {\n\t\t\t\tclassName: 'ui-test-popup',\n\t\t\t\twidth: 343,\n\t\t\t\tcloseIcon: false,\n\t\t\t\tcloseByEsc: true,\n\t\t\t\toverlay: true,\n\t\t\t\tpadding: 12,\n\t\t\t\tanimation: 'fading-slide',\n\t\t\t\tbindElement: this.bindElement,\n\t\t\t};\n\t\t},\n\t},\n\temits: ['close', 'changeSelectedOption', 'popupMenuButtonClick'],\n\tmethods: {\n\t\tonChangeSelectedOption(newSelectedOption)\n\t\t{\n\t\t\tthis.$emit('changeSelectedOption', newSelectedOption);\n\t\t},\n\t\tonPopupMenuButtonClick()\n\t\t{\n\t\t\tthis.$emit('popupMenuButtonClick');\n\t\t},\n\t},\n\ttemplate: `\n\t\t<BasePopup\n\t\t\t:config=\"config\"\n\t\t\t@close=\"$emit('close')\"\n\t\t\tv-slot=\"{enableAutoHide, disableAutoHide}\"\n\t\t\t:id=\"POPUP_ID\"\n\t\t>\n\t\t\t<PopupMenuContent\n\t\t\t\t:options=\"options\"\n\t\t\t\t:selectedOption=\"selectedOption\"\n\t\t\t\t:hint=\"hint\"\n\t\t\t\t@closePopup=\"$emit('close')\"\n\t\t\t\t@enableAutoHide=\"enableAutoHide\"\n\t\t\t\t@disableAutoHide=\"disableAutoHide\"\n\t\t\t\t@changeSelectedOption=\"onChangeSelectedOption\"\n\t\t\t\t@popupMenuButtonClick=\"onPopupMenuButtonClick\"\n\t\t\t\t:button=\"button\"\n\t\t\t/>\n\t\t</BasePopup>\n\t`,\n};\n","import { EventTypes } from '../../const/event';\nimport { FilterModes } from '../../const/filter-mode';\nimport { PopupMenu } from '../popup-menu/popup-menu';\nimport { Modes } from '../../const/mode';\nimport { RecentService } from '../../api/load/recent-service';\n\n// @vue/component\nexport const RecentHeader = {\n\tcomponents: {\n\t\tPopupMenu,\n\t},\n\tprops: {\n\t\tcanCreateGroup: Boolean,\n\t},\n\temits: ['changeMode'],\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tshowModePopup: false,\n\t\t\tisSpaceListScrolled: false,\n\t\t\tfilterModes: FilterModes,\n\t\t};\n\t},\n\tcomputed: {\n\t\tscrollClass(): string\n\t\t{\n\t\t\treturn this.isSpaceListScrolled ? '--scroll-content' : '';\n\t\t},\n\t\tselectedFilterModeType(): string\n\t\t{\n\t\t\treturn this.$store.state.main.selectedFilterModeType;\n\t\t},\n\t\ttitle(): string\n\t\t{\n\t\t\tconst selectedType = this.selectedFilterModeType;\n\t\t\tconst selectedMode = this.filterModes.find((mode) => mode.type === selectedType);\n\n\t\t\treturn selectedMode ? this.loc(selectedMode.nameMessageId) : this.loc('SOCIALNETWORK_SPACES_TITLE');\n\t\t},\n\t\tselectFilterModeButtonIconModifier(): string\n\t\t{\n\t\t\treturn `--${this.selectedFilterModeType}`;\n\t\t},\n\t\tpopupMenuOptions(): Array\n\t\t{\n\t\t\treturn this.filterModes.map((filterMode) => ({\n\t\t\t\ttype: filterMode.type,\n\t\t\t\tname: this.loc(filterMode.nameMessageId),\n\t\t\t\tdescription: this.loc(filterMode.descriptionMessageId),\n\t\t\t}));\n\t\t},\n\t\tpopupMenuButton(): Object\n\t\t{\n\t\t\tif (!this.canCreateGroup)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\ttext: this.loc('SOCIALNETWORK_SPACES_LIST_MODE_POPUP_NEW_SPACE_BUTTON'),\n\t\t\t\tclass: '--plus-30',\n\t\t\t};\n\t\t},\n\t},\n\tcreated()\n\t{\n\t\tthis.$bitrix.eventEmitter.subscribe(EventTypes.spaceListScroll, this.handleListChanges);\n\t\tthis.$bitrix.eventEmitter.subscribe(EventTypes.spaceListShown, this.handleListChanges);\n\t},\n\tbeforeUnmount()\n\t{\n\t\tthis.$bitrix.eventEmitter.unsubscribe(EventTypes.spaceListScroll, this.handleListChanges);\n\t\tthis.$bitrix.eventEmitter.unsubscribe(EventTypes.spaceListShown, this.handleListChanges);\n\t},\n\tmethods: {\n\t\tloc(phraseCode): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode);\n\t\t},\n\t\topenPopup()\n\t\t{\n\t\t\tthis.showModePopup = true;\n\t\t},\n\t\thandleListChanges(event)\n\t\t{\n\t\t\tconst isSpaceListScrolled = event.data.isSpaceListScrolled;\n\t\t\tconst mode = event.data.mode;\n\t\t\tif (mode === Modes.recent)\n\t\t\t{\n\t\t\t\tthis.isSpaceListScrolled = isSpaceListScrolled;\n\t\t\t}\n\t\t},\n\t\tenableSearch()\n\t\t{\n\t\t\tthis.$emit('changeMode', Modes.recentSearch);\n\t\t},\n\t\tasync onChangeSelectedFilterMode(filterMode)\n\t\t{\n\t\t\tif (this.selectedFilterModeType !== filterMode)\n\t\t\t{\n\t\t\t\tconst recentService = RecentService.getInstance();\n\n\t\t\t\tthis.$bitrix.eventEmitter.emit(EventTypes.showLoader, Modes.recent);\n\t\t\t\tconst result = await recentService.reloadSpaces({\n\t\t\t\t\tfilterMode,\n\t\t\t\t});\n\t\t\t\tthis.$store.dispatch('setSelectedFilterModeType', filterMode);\n\t\t\t\tthis.$store.dispatch('clearSpacesViewByMode', Modes.recent);\n\t\t\t\tthis.$store.dispatch('addSpacesToView', { mode: Modes.recent, spaces: result.spaces });\n\t\t\t\tthis.$bitrix.eventEmitter.emit(EventTypes.hideLoader, Modes.recent);\n\t\t\t}\n\t\t},\n\t\tonCreateSpaceButtonClick()\n\t\t{\n\t\t\tthis.$bitrix.eventEmitter.emit(EventTypes.showUpperSpaceAddForm);\n\t\t},\n\t\tshowBtnArrow()\n\t\t{\n\t\t\tthis.$bitrix.eventEmitter.emit(EventTypes.showBtnToggleBlock);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div \n\t\t\tclass=\"sn-spaces__list-header\" \n\t\t\t:class=\"scrollClass\"\n\t\t\t@mouseenter=\"showBtnArrow\"\n\t\t>\n\t\t\t<div\n\t\t\t\t@click=\"openPopup\"\n\t\t\t\tclass=\"sn-spaces__list-header_name\"\n\t\t\t\tref=\"spaces-list-header-name\"\n\t\t\t\tdata-id=\"spaces-header-title\"\n\t\t\t>\n\t\t\t\t<div class=\"sn-spaces__list-header_name-block\">\n\t\t\t\t\t<div class=\"sn-spaces__list-header_title\">\n\t\t\t\t\t\t{{ title }}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"ui-icon-set --chevron-down\" style='--ui-icon-set__icon-size: 15px;'>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"sn-spaces__list-header_btn-spaces\" :class=\"selectFilterModeButtonIconModifier\"></div>\n\t\t\t</div>\n\t\t\t<PopupMenu\n\t\t\t\t:options=\"popupMenuOptions\"\n\t\t\t\tcontext=\"space-recent-header\"\n\t\t\t\t:bind-element=\"$refs['spaces-list-header-name'] || {}\"\n\t\t\t\t:selectedOption=\"selectedFilterModeType\"\n\t\t\t\t:hint=\"loc('SOCIALNETWORK_SPACES_LIST_MODE_POPUP_BOTTOM_DESCRIPTION')\"\n\t\t\t\t@changeSelectedOption=\"onChangeSelectedFilterMode\"\n\t\t\t\t@popupMenuButtonClick=\"onCreateSpaceButtonClick\"\n\t\t\t\tv-if=\"showModePopup\"\n\t\t\t\t@close=\"showModePopup = false\"\n\t\t\t\t:button=\"popupMenuButton\"\n\t\t\t/>\n\t\t\t<button\n\t\t\t\tclass=\"ui-btn ui-btn-light ui-btn-round ui-btn-xs sn-spaces__list-header_btn-search\"\n\t\t\t\t@click=\"enableSearch\"\n\t\t\t\tdata-id=\"spaces-search-button\"\n\t\t\t>\n\t\t\t\t<div class=\"ui-icon-set --search-2\"></div>\n\t\t\t</button>\n\t\t\t<button\n\t\t\t\tv-if=\"canCreateGroup\"\n\t\t\t\tclass=\"ui-btn ui-btn-light ui-btn-round ui-btn-xs sn-spaces__list-header_btn-add\"\n\t\t\t\t@click=\"onCreateSpaceButtonClick\"\n\t\t\t\tdata-id=\"spaces-header-add-space-button\"\n\t\t\t>\n\t\t\t\t<div class=\"ui-icon-set --plus-30\"></div>\n\t\t\t</button>\n\t\t</div>\n\t`,\n};\n","import { LoadServiceInterface } from './load-service-interface';\nimport { ReloadServiceInterface } from './reload-service-interface';\nimport { Client } from '../client';\nimport { LoadRecentSpacesRequestFields } from './recent-service';\nimport { FilterModeTypes } from '../../const/filter-mode';\n\nimport type { SearchSpacesFields } from '../client';\n\nconst MINIMUM_QUERY_LENGTH_FOR_LOAD = 3;\n\nexport class SearchService implements LoadServiceInterface, ReloadServiceInterface\n{\n\tstatic instance = null;\n\thasMoreSpacesToLoad: boolean = true;\n\tsearchString: string = '';\n\n\tstatic getInstance(): SearchService\n\t{\n\t\tif (!this.instance)\n\t\t{\n\t\t\tthis.instance = new this();\n\t\t}\n\n\t\treturn this.instance;\n\t}\n\n\tasync loadSpaces(data: LoadRecentSpacesRequestFields): Promise\n\t{\n\t\tconst fields: SearchSpacesFields = {};\n\t\tfields.loadedSpacesCount = data.loadedSpacesCount;\n\t\tfields.mode = FilterModeTypes.all;\n\t\tfields.searchString = this.searchString;\n\n\t\tconst result = await Client.searchSpaces(fields);\n\n\t\tthis.hasMoreSpacesToLoad = result.hasMoreSpacesToLoad;\n\n\t\treturn result;\n\t}\n\n\tcanLoadSpaces(): boolean\n\t{\n\t\treturn this.hasMoreSpacesToLoad && this.searchString.length >= MINIMUM_QUERY_LENGTH_FOR_LOAD;\n\t}\n}\n","import { Modes } from '../../const/mode';\nimport { EventTypes } from '../../const/event';\nimport { Runtime } from 'main.core';\nimport { mapGetters } from 'ui.vue3.vuex';\nimport { SearchService } from '../../api/load/search-service';\n\nimport type { SpaceModel } from '../../model/space-model';\n\nexport const SearchHeader = {\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tsearchQuery: '',\n\t\t\tisSpaceListScrolled: false,\n\t\t};\n\t},\n\tcreated()\n\t{\n\t\tthis.startSearchDebounced = Runtime.debounce(this.startSearch, 500, this);\n\t\tthis.$bitrix.eventEmitter.subscribe(EventTypes.spaceListScroll, this.handleListChanges);\n\t\tthis.$bitrix.eventEmitter.subscribe(EventTypes.spaceListShown, this.handleListChanges);\n\t},\n\tbeforeUnmount()\n\t{\n\t\tthis.$bitrix.eventEmitter.unsubscribe(EventTypes.spaceListScroll, this.handleListChanges);\n\t\tthis.$bitrix.eventEmitter.unsubscribe(EventTypes.spaceListShown, this.handleListChanges);\n\t},\n\tcomputed: {\n\t\t...mapGetters({\n\t\t\tspaces: 'spaces',\n\t\t}),\n\t\tscrollClass(): string\n\t\t{\n\t\t\treturn this.isSpaceListScrolled ? '--scroll-content' : '';\n\t\t},\n\t},\n\tmethods: {\n\t\tloc(message: string): string\n\t\t{\n\t\t\treturn this.$bitrix.Loc.getMessage(message);\n\t\t},\n\t\tcloseSearch()\n\t\t{\n\t\t\tthis.searchQuery = '';\n\t\t\tthis.$emit('changeMode', Modes.recent);\n\t\t},\n\t\thandleListChanges(event)\n\t\t{\n\t\t\tconst isSpaceListScrolled = event.data.isSpaceListScrolled;\n\t\t\tconst mode = event.data.mode;\n\t\t\tif ([Modes.search, Modes.recentSearch].includes(mode))\n\t\t\t{\n\t\t\t\tthis.isSpaceListScrolled = isSpaceListScrolled;\n\t\t\t}\n\t\t},\n\t\tonInputChange()\n\t\t{\n\t\t\tSearchService.getInstance().searchString = this.searchQuery;\n\t\t\tif (this.searchQuery.length === 0)\n\t\t\t{\n\t\t\t\tthis.$emit('changeMode', Modes.recentSearch);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.startSearchDebounced();\n\t\t\t}\n\t\t},\n\t\tstartSearch()\n\t\t{\n\t\t\tif (this.searchQuery.length > 0)\n\t\t\t{\n\t\t\t\tSearchService.getInstance().hasMoreSpacesToLoad = true;\n\t\t\t\tthis.$store.dispatch('clearSpacesViewByMode', Modes.search);\n\n\t\t\t\tconst searchResult = this.spaces.filter((space: SpaceModel) => {\n\t\t\t\t\treturn space.name.toLowerCase().includes(this.searchQuery.toLowerCase());\n\t\t\t\t});\n\n\t\t\t\tconst spaceIds = searchResult.map((space: SpaceModel) => space.id);\n\t\t\t\tthis.$store.dispatch('setLocalSearchResult', spaceIds);\n\t\t\t\tthis.$emit('changeMode', Modes.search);\n\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.$bitrix.eventEmitter.emit(EventTypes.tryToLoadSpacesIfHasNoScrollbar, Modes.search);\n\t\t\t\t}, 80);\n\t\t\t}\n\t\t},\n\t},\n\tmounted()\n\t{\n\t\tthis.$refs.input.focus();\n\t},\n\ttemplate: `\n\t\t<div class=\"sn-spaces__list-header\" :class=\"scrollClass\">\n\t\t\t<div class=\"sn-spaces__search ui-ctl ui-ctl-textbox ui-ctl-after-icon ui-ctl-w100 ui-ctl-sm\">\n\t\t\t\t<input\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t:placeholder=\"loc('SOCIALNETWORK_SPACES_LIST_SEARCH_INPUT_PLACEHOLDER')\"\n\t\t\t\t\tv-model.trim=\"searchQuery\"\n\t\t\t\t\tref=\"input\"\n\t\t\t\t\t@input=\"onInputChange\"\n\t\t\t\t\tdata-id=\"spaces-search-input\"\n\t\t\t\t>\n\t\t\t\t<button\n\t\t\t\t\tclass=\"sn-spaces__search-clear ui-ctl-after\"\n\t\t\t\t\t@click=\"closeSearch\"\n\t\t\t\t\tdata-id=\"spaces-close-search-button\"\n\t\t\t\t>\n\t\t\t\t\t<div class=\"ui-icon-set --cross-circle-70\"></div>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { EventEmitter } from 'main.core.events';\n\ntype Options = {\n\tmessage: string,\n\tspaceId: number,\n}\nexport class ContextItem\n{\n\tspaceId: number;\n\tmessage: string;\n\temitter: EventEmitter;\n\n\tconstructor(options: Options)\n\t{\n\t\tthis.message = options.message;\n\t\tthis.spaceId = options.spaceId;\n\t\tthis.emitter = new EventEmitter();\n\t}\n\n\tgetEmitter(): EventEmitter\n\t{\n\t\treturn this.emitter;\n\t}\n}","import { ajax } from 'main.core';\nimport { BaseEvent } from 'main.core.events';\nimport { MenuItem } from 'main.popup';\nimport { ContextItem } from './context-item';\nimport {EventTypes} from \"../../../const/event\";\n\nexport class Pin extends ContextItem\n{\n\tstatic ID = 'pinner';\n\n\tcreate(): JSON\n\t{\n\t\treturn {\n\t\t\ttext: this.message,\n\t\t\tonclick: (event, menuItem: MenuItem) => {\n\t\t\t\tthis.#switch().then(result => {\n\t\t\t\t\tmenuItem.getMenuWindow().close();\n\t\t\t\t\tconst resultMessage = result.data.message;\n\t\t\t\t\tconst resultMode = result.data.mode;\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tmenuItem.setText(resultMessage);\n\t\t\t\t\t}, 800);\n\t\t\t\t\tthis.#flush(resultMode);\n\t\t\t\t});\n\t\t\t},\n\t\t};\n\t}\n\n\t#switch(): Promise\n\t{\n\t\treturn ajax.runAction('socialnetwork.api.livefeed.spaces.switcher.pin', {\n\t\t\tdata: {\n\t\t\t\tswitcher: {\n\t\t\t\t\ttype: Pin.ID,\n\t\t\t\t\tspaceId: this.spaceId,\n\t\t\t\t},\n\t\t\t\tspace: this.spaceId,\n\t\t\t},\n\t\t});\n\t}\n\n\t#flush(resultMode: string): void\n\t{\n\t\tthis.getEmitter().emit(EventTypes.pinChanged, {\n\t\t\tspaceId: this.spaceId,\n\t\t\tisPinned: resultMode === 'Y',\n\t\t});\n\t}\n}","import { ajax } from 'main.core';\nimport { MenuItem } from 'main.popup';\nimport { ContextItem } from './context-item';\n\nexport class Follow extends ContextItem\n{\n\tstatic ID = 'follow';\n\tcreate(): JSON\n\t{\n\t\treturn {\n\t\t\ttext: this.message,\n\t\t\tonclick: (event, menuItem: MenuItem) => {\n\t\t\t\tthis.#switch().then(result => {\n\t\t\t\t\tmenuItem.getMenuWindow().close();\n\t\t\t\t\tconst resultMessage = result.data.message;\n\t\t\t\t\tconst resultMode = result.data.mode;\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tmenuItem.setText(resultMessage);\n\t\t\t\t\t}, 800);\n\t\t\t\t\tthis.#flush(resultMode);\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\t}\n\n\t#switch(): Promise\n\t{\n\t\treturn ajax.runAction('socialnetwork.api.livefeed.spaces.switcher.follow', {\n\t\t\tdata: {\n\t\t\t\tswitcher: {\n\t\t\t\t\ttype: Follow.ID,\n\t\t\t\t\tspaceId: this.spaceId\n\t\t\t\t},\n\t\t\t\tspace: this.spaceId,\n\t\t\t}\n\t\t});\n\t}\n\n\t#flush(resultMode: string): void\n\t{\n\t\tthis.getEmitter().emit('followChanged', {\n\t\t\tspaceId: this.spaceId,\n\t\t\tisFollowed: resultMode === 'Y',\n\t\t});\n\t}\n}","import { ContextItem } from './context-item';\n\nexport class Open extends ContextItem\n{\n\tpath: string;\n\n\tcreate(): JSON\n\t{\n\t\treturn {\n\t\t\ttext: this.message,\n\t\t\thref: this.path,\n\t\t}\n\t}\n\n\tsetPath(path: string): Open\n\t{\n\t\tthis.path = path;\n\t\treturn this;\n\t}\n}","import { Menu, MenuManager } from 'main.popup';\nimport { ContextMenuCollection } from './context-menu-collection';\nimport { Pin } from './items/pin';\nimport { Follow } from './items/follow';\nimport { Open } from './items/open';\n\ntype Options = {\n\tspaceId: number,\n\tbindElement: HTMLElement,\n\tpath: string,\n\tisSelected: boolean,\n\tpinMessage: string,\n\tfollowMessage: string,\n\topenMessage: string,\n}\n\nexport class ContextMenu\n{\n\tspaceId: number;\n\tbindElement: HTMLElement;\n\tpath: string;\n\tisSelected: boolean;\n\tpinMessage: string;\n\tfollowMessage: string;\n\topenMessage: string;\n\n\tcollection: ContextMenuCollection\n\tmenu: Menu;\n\n\tstatic ID = 'space-context-menu-';\n\n\tconstructor(options: Options)\n\t{\n\t\tthis.spaceId = options.spaceId;\n\t\tthis.bindElement = options.bindElement;\n\t\tthis.path = options.path;\n\t\tthis.isSelected = options.isSelected;\n\t\tthis.pinMessage = options.pinMessage;\n\t\tthis.followMessage = options.followMessage;\n\t\tthis.openMessage = options.openMessage;\n\n\t\tthis.#init();\n\t}\n\n\tcreateMenu(): void\n\t{\n\t\tconst id = ContextMenu.ID + this.spaceId;\n\t\tthis.menu = MenuManager.create({\n\t\t\tid: id,\n\t\t\tcloseByEsc: true,\n\t\t\tbindElement: this.bindElement,\n\t\t\titems: this.getItems(),\n\t\t})\n\t}\n\n\ttoggle(): void\n\t{\n\t\tthis.collection.destroy();\n\t\tthis.createMenu();\n\t\tthis.menu.toggle();\n\t}\n\n\tgetSpaceId(): number\n\t{\n\t\treturn this.spaceId;\n\t}\n\n\tgetItems(): JSON[]\n\t{\n\t\tconst items = [];\n\t\tif (!this.isSelected)\n\t\t{\n\t\t\tconst open = new Open({\n\t\t\t\tspaceId: this.spaceId,\n\t\t\t\tmessage: this.openMessage,\n\t\t\t});\n\n\t\t\titems.push(open.setPath(this.path).create());\n\t\t}\n\n\t\tconst pin = new Pin({\n\t\t\tspaceId: this.spaceId,\n\t\t\tmessage: this.pinMessage,\n\t\t});\n\n\t\titems.push(pin.create())\n\n\t\tconst follow = new Follow({\n\t\t\tspaceId: this.spaceId,\n\t\t\tmessage: this.followMessage,\n\t\t});\n\n\t\titems.push(follow.create());\n\n\t\treturn items;\n\t}\n\n\t#init(): void\n\t{\n\t\tthis.collection = ContextMenuCollection.getInstance();\n\t\tthis.collection.add(this);\n\t}\n}","import { MenuManager } from 'main.popup';\nimport { ContextMenu } from './context-menu';\n\nexport class ContextMenuCollection\n{\n\tstatic items = [];\n\tstatic instance = null;\n\n\tstatic getInstance(): ContextMenuCollection\n\t{\n\t\tif (ContextMenuCollection.instance === null)\n\t\t{\n\t\t\tContextMenuCollection.instance = new this();\n\t\t}\n\n\t\treturn ContextMenuCollection.instance;\n\t}\n\n\tadd(menu: ContextMenu)\n\t{\n\t\tif (!this.has(menu))\n\t\t{\n\t\t\tContextMenuCollection.items.push(menu);\n\t\t}\n\t}\n\n\thas(menu: ContextMenu): boolean\n\t{\n\t\tContextMenuCollection.items.forEach((item: ContextMenu) => {\n\t\t\tif (item.getSpaceId() === menu.getSpaceId())\n\t\t\t{\n\t\t\t\treturn true;\n\t\t\t}\n\t\t})\n\n\t\treturn false;\n\t}\n\n\tdestroy(): void\n\t{\n\t\tContextMenuCollection.items.forEach((item: ContextMenu) => {\n\t\t\tconst menu = MenuManager.getMenuById(ContextMenu.ID + item.getSpaceId());\n\t\t\tmenu?.destroy();\n\t\t});\n\t}\n}","import { DateTimeFormat } from 'main.date';\n\nexport class DateFormatter\n{\n\t#date: Date;\n\t#currentDate: Date;\n\tstatic formatDate(timestamp: number): string\n\t{\n\t\treturn new DateFormatter(new Date(timestamp)).formatDate();\n\t}\n\n\tconstructor(date: Date)\n\t{\n\t\tthis.#date = date;\n\t\tthis.#currentDate = new Date();\n\t}\n\n\tformatDate(): string\n\t{\n\t\tlet format = '';\n\n\t\tif (this.#isToday())\n\t\t{\n\t\t\tformat = DateTimeFormat.getFormat('SHORT_TIME_FORMAT');\n\t\t}\n\t\telse if (this.#isCurrentWeek())\n\t\t{\n\t\t\tformat = 'D';\n\t\t}\n\t\telse if (this.#isCurrentYear())\n\t\t{\n\t\t\tformat = DateTimeFormat.getFormat('DAY_SHORT_MONTH_FORMAT');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tformat = DateTimeFormat.getFormat('MEDIUM_DATE_FORMAT');\n\t\t}\n\n\t\treturn DateTimeFormat.format(format, this.#date.getTime() / 1000);\n\t}\n\n\t#isToday(): boolean\n\t{\n\t\treturn this.#date.toLocaleDateString() === this.#currentDate.toLocaleDateString();\n\t}\n\n\t#isCurrentWeek(): boolean\n\t{\n\t\tconst currentWeekNumber = parseInt(DateTimeFormat.format('W', this.#currentDate), 10);\n\t\tconst weekNumber = parseInt(DateTimeFormat.format('W', this.#date), 10);\n\n\t\treturn this.#isCurrentYear() && weekNumber === currentWeekNumber;\n\t}\n\n\t#isCurrentYear(): boolean\n\t{\n\t\treturn this.#date.getFullYear() === this.#currentDate.getFullYear();\n\t}\n}\n","// @vue/component\nimport type { AvatarModel } from '../../model/avatar-model';\n\nexport const Avatar = {\n\tprops: {\n\t\tavatar: {\n\t\t\ttype: Object,\n\t\t\tdefault: () => {},\n\t\t},\n\t\tisSecret: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t\tisInvitation: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tsecretSpaceImage: '/bitrix/components/bitrix/socialnetwork.spaces.list/templates/.default/images/socialnetwork-spaces_icon_close-spase.svg',\n\t\t};\n\t},\n\tcomputed: {\n\t\tavatarModel(): AvatarModel\n\t\t{\n\t\t\treturn this.avatar;\n\t\t},\n\t\tavatarClass(): string\n\t\t{\n\t\t\tlet result = '';\n\t\t\tif (this.avatarModel.type === 'icon')\n\t\t\t{\n\t\t\t\tif (this.avatarModel.id.length > 0)\n\t\t\t\t{\n\t\t\t\t\tresult = `sonet-common-workgroup-avatar --${this.avatarModel.id}`;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tresult = 'ui-icon-common-user-group ui-icon';\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn result;\n\t\t},\n\t\ticonStyle(): string\n\t\t{\n\t\t\tlet result = '';\n\t\t\tif (this.avatarModel.type === 'image')\n\t\t\t{\n\t\t\t\tresult = `background-image: url(${this.avatarModel.id});`;\n\t\t\t}\n\n\t\t\treturn result;\n\t\t},\n\t\ticonClass(): string\n\t\t{\n\t\t\treturn this.avatarModel.type === 'image' ? 'sn-spaces__list-item_img' : '';\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"sn-spaces__list-item_icon\" :class=\"avatarClass\">\n\t\t\t<i :style=\"iconStyle\" :class=\"iconClass\"/>\n\t\t\t<div v-if=\"isInvitation\" class=\"sn-spaces__list-item_invitation-icon\">\n\t\t\t\t<div class=\"ui-icon-set --mail\" style=\"--ui-icon-set__icon-size: 18px;\"></div>\n\t\t\t</div>\n\t\t\t<div class=\"sn-spaces__list-item_icon-close\" v-if=\"isSecret\"/>\n\t\t</div>\n\t`,\n};\n","import { DateFormatter } from '../../util/date-formatter';\nimport { SpaceViewModeTypes, SpaceViewModes, SpaceUserRoles } from '../../const/space';\nimport { Avatar } from './avatar';\nimport { Modes } from '../../const/mode';\nimport { ajax } from 'main.core';\nimport { Helper } from '../../store/helper';\nimport { BaseEvent } from 'main.core.events';\n\nimport type { SpaceModel } from '../../model/space-model';\n\n// @vue/component\nexport const SpaceContent = {\n\tcomponents: {\n\t\tAvatar,\n\t},\n\tprops: {\n\t\tspace: {\n\t\t\ttype: Object,\n\t\t\tdefault: () => {},\n\t\t},\n\t\tmode: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tisInvitation: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tshowAvatar: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tmodes: Modes,\n\t\t\tspaceUserRoles: SpaceUserRoles,\n\t\t\tdoShowSuccessButton: false,\n\t\t};\n\t},\n\tcomputed: {\n\t\tspaceModel(): SpaceModel\n\t\t{\n\t\t\treturn this.space;\n\t\t},\n\t\tdoShowCounter(): boolean\n\t\t{\n\t\t\treturn this.spaceModel.counter\n\t\t\t\t&& this.spaceModel.counter > 0\n\t\t\t\t&& this.mode === this.modes.recent\n\t\t\t\t&& !this.isApplicantButtonsShown\n\t\t\t;\n\t\t},\n\t\tdoShowPin(): boolean\n\t\t{\n\t\t\treturn this.spaceModel.isPinned\n\t\t\t\t&& this.mode === this.modes.recent\n\t\t\t\t&& !this.isApplicantButtonsShown\n\t\t\t;\n\t\t},\n\t\tisApplicantButtonsShown(): boolean\n\t\t{\n\t\t\treturn this.doShowJoinButton || this.doShowPendingButton || this.doShowSuccessButton;\n\t\t},\n\t\tdoShowJoinButton(): boolean\n\t\t{\n\t\t\treturn this.spaceModel.userRole === this.spaceUserRoles.nonMember && this.mode === this.modes.recent;\n\t\t},\n\t\tdoShowPendingButton(): boolean\n\t\t{\n\t\t\treturn this.spaceModel.userRole === this.spaceUserRoles.applicant && this.mode === this.modes.recent;\n\t\t},\n\t\tisFollowing(): boolean\n\t\t{\n\t\t\treturn this.spaceModel.userRole !== this.spaceUserRoles.member || this.spaceModel.follow;\n\t\t},\n\t\tspaceDescription(): string\n\t\t{\n\t\t\tconst doShowSpaceVisibilityType = this.isApplicantButtonsShown\n\t\t\t\t|| !this.spaceModel.lastActivityDescription\n\t\t\t\t|| this.spaceModel.lastActivityDescription.length === 0\n\t\t\t;\n\n\t\t\treturn doShowSpaceVisibilityType ? this.getVisibilityTypeName() : this.spaceModel.lastActivityDescription;\n\t\t},\n\t\tisCommon(): boolean\n\t\t{\n\t\t\treturn this.spaceModel.id === 0;\n\t\t},\n\t},\n\tcreated()\n\t{\n\t\tthis.$bitrix.eventEmitter.subscribe(`onSpaceUpdate_${this.spaceModel.id}`, this.onSpaceUpdate.bind(this));\n\t},\n\tbeforeUnmount()\n\t{\n\t\tthis.$bitrix.eventEmitter.unsubscribe(`onSpaceUpdate_${this.spaceModel.id}`, this.onSpaceUpdate.bind(this));\n\t},\n\tmethods: {\n\t\tloc(message: string): string\n\t\t{\n\t\t\treturn this.$bitrix.Loc.getMessage(message);\n\t\t},\n\t\tgetVisibilityTypeName(): string\n\t\t{\n\t\t\tif (this.isCommon)\n\t\t\t{\n\t\t\t\treturn '';\n\t\t\t}\n\n\t\t\tconst spaceViewModeNameMessageId = SpaceViewModes.find((spaceViewMode) => {\n\t\t\t\treturn spaceViewMode.type === this.spaceModel.visibilityType;\n\t\t\t})?.nameMessageId;\n\n\t\t\treturn this.loc(spaceViewModeNameMessageId);\n\t\t},\n\t\tformatDate(timestamp: number): string\n\t\t{\n\t\t\treturn DateFormatter.formatDate(timestamp);\n\t\t},\n\t\tisSecretSpace(visibilityType: string): boolean\n\t\t{\n\t\t\treturn visibilityType === SpaceViewModeTypes.secret;\n\t\t},\n\t\tformatCounter(counter: number): string\n\t\t{\n\t\t\tif (counter > 99)\n\t\t\t{\n\t\t\t\treturn '99+';\n\t\t\t}\n\n\t\t\tif (counter === 0)\n\t\t\t{\n\t\t\t\treturn '';\n\t\t\t}\n\n\t\t\treturn counter.toString();\n\t\t},\n\t\tcounterClass(follow: boolean): string\n\t\t{\n\t\t\treturn follow ? 'sn-spaces__list-item_counter' : 'sn-spaces__list-item_counter --mute';\n\t\t},\n\t\tshowSuccessButton()\n\t\t{\n\t\t\tthis.doShowSuccessButton = true;\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.doShowSuccessButton = false;\n\t\t\t}, 1000);\n\t\t},\n\t\tonSpaceUpdate(event: BaseEvent)\n\t\t{\n\t\t\tif (this.mode === this.modes.recent)\n\t\t\t{\n\t\t\t\tconst spaceData = event.data;\n\t\t\t\tconst helper = Helper.getInstance();\n\t\t\t\tconst space: SpaceModel = helper.buildSpaces([spaceData]).pop();\n\n\t\t\t\tconst wasUserApplicant = this.spaceModel.userRole === this.spaceUserRoles.applicant;\n\t\t\t\tconst isUserMember = space.userRole === this.spaceUserRoles.member;\n\n\t\t\t\tif (wasUserApplicant && isUserMember)\n\t\t\t\t{\n\t\t\t\t\tthis.showSuccessButton();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tasync onJoinButtonClick(event)\n\t\t{\n\t\t\tevent.preventDefault();\n\t\t\tawait ajax.runAction('socialnetwork.api.userToGroup.join', {\n\t\t\t\tdata: {\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tgroupId: this.spaceModel.id,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t}).then((response) => {\n\t\t\t\tconst confirmationNeeded = response.data.confirmationNeeded;\n\t\t\t\tlet userRole = this.spaceUserRoles.member;\n\t\t\t\tif (confirmationNeeded)\n\t\t\t\t{\n\t\t\t\t\tuserRole = this.spaceUserRoles.applicant;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.showSuccessButton();\n\t\t\t\t}\n\t\t\t\tthis.$store.dispatch('changeUserRole', {\n\t\t\t\t\tspaceId: this.spaceModel.id,\n\t\t\t\t\tuserRole,\n\t\t\t\t});\n\t\t\t}, (error) => {\n\t\t\t\tconsole.log(error);\n\t\t\t});\n\t\t},\n\t\tonPendingButtonClick(event)\n\t\t{\n\t\t\tevent.preventDefault();\n\t\t},\n\t\tonAcceptedButtonClick(event)\n\t\t{\n\t\t\tevent.preventDefault();\n\t\t},\n\t\tasync acceptInvitationButtonClickHandler(event)\n\t\t{\n\t\t\tevent.preventDefault();\n\t\t\tawait ajax.runAction('socialnetwork.api.userToGroup.acceptOutgoingRequest', {\n\t\t\t\tdata: {\n\t\t\t\t\tgroupId: this.spaceModel.id,\n\t\t\t\t},\n\t\t\t}).then((response) => {\n\t\t\t\tconst isSuccess = response.data;\n\t\t\t\tif (isSuccess)\n\t\t\t\t{\n\t\t\t\t\tthis.$store.dispatch('changeUserRole', {\n\t\t\t\t\t\tspaceId: this.spaceModel.id,\n\t\t\t\t\t\tuserRole: this.spaceUserRoles.member,\n\t\t\t\t\t});\n\t\t\t\t\tthis.$store.dispatch('deleteInvitationFromStore', {\n\t\t\t\t\t\tspaceId: this.spaceModel.id,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}, (error) => {\n\t\t\t\tconsole.log(error);\n\t\t\t});\n\t\t},\n\t\tasync declineInvitationButtonClickHandler(event)\n\t\t{\n\t\t\tevent.preventDefault();\n\t\t\tawait ajax.runAction('socialnetwork.api.userToGroup.rejectOutgoingRequest', {\n\t\t\t\tdata: {\n\t\t\t\t\tgroupId: this.spaceModel.id,\n\t\t\t\t},\n\t\t\t}).then((response) => {\n\t\t\t\tconst isSuccess = response.data;\n\t\t\t\tif (isSuccess)\n\t\t\t\t{\n\t\t\t\t\tthis.$store.dispatch('deleteInvitationFromStore', {\n\t\t\t\t\t\tspaceId: this.spaceModel.id,\n\t\t\t\t\t});\n\t\t\t\t\tif (this.isSecretSpace(this.spaceModel.visibilityType))\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$store.dispatch('deleteSpaceFromStore', {\n\t\t\t\t\t\t\tspaceId: this.spaceModel.id,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$store.dispatch('changeUserRole', {\n\t\t\t\t\t\t\tspaceId: this.spaceModel.id,\n\t\t\t\t\t\t\tuserRole: this.spaceUserRoles.nonMember,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, (error) => {\n\t\t\t\tconsole.log(error);\n\t\t\t});\n\t\t},\n\t},\n\ttemplate: `\n\t\t<Avatar\n\t\t\tv-if=\"showAvatar\"\n\t\t\t:avatar=\"spaceModel.avatar\"\n\t\t\t:isSecret=\"isSecretSpace(spaceModel.visibilityType)\"\n\t\t\t:isInvitation=\"isInvitation\"\n\t\t/>\n\t\t<div class=\"sn-spaces__list-item_info\">\n\t\t\t<div class=\"sn-spaces__list-item_title\" :title=\"spaceModel.name\">\n\t\t\t\t<div class=\"sn-spaces__list-item_name\">{{spaceModel.name}}</div>\n\t\t\t\t<div\n\t\t\t\t\tv-if=\"!isFollowing\"\n\t\t\t\t\tclass=\"sn-spaces__list-item_mute ui-icon-set --sound-off\"\n\t\t\t\t\tstyle=\"--ui-icon-set__icon-size: 18px;\"\n\t\t\t\t\tdata-id=\"spaces-list-element-mute-icon\"\n\t\t\t\t></div>\n\t\t\t</div>\n\t\t\t<div class=\"sn-spaces__list-item_description\" data-id=\"spaces-list-element-description\">\n\t\t\t\t{{spaceDescription}}\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"sn-spaces__list-item_details\">\n\t\t\t<div class=\"sn-spaces__list-item_time\" data-id=\"spaces-list-element-activity-date\">\n\t\t\t\t{{formatDate(spaceModel.dateActivity.getTime())}}\n\t\t\t</div>\n\t\t\t<div class=\"sn-spaces__list-item_changes\">\n\t\t\t\t<div\n\t\t\t\t\tv-if=\"doShowPin\"\n\t\t\t\t\tclass=\"ui-icon-set --pin-1\"\n\t\t\t\t\tstyle='--ui-icon-set__icon-size: 18px;'\n\t\t\t\t/>\n\t\t\t\t<div\n\t\t\t\t\tv-if=\"doShowCounter\"\n\t\t\t\t\t:class=\"counterClass(isFollowing)\"\n\t\t\t\t\tdata-id=\"spaces-list-element-counter\"\n\t\t\t\t>\n\t\t\t\t\t{{formatCounter(spaceModel.counter)}}\n\t\t\t\t</div>\n\t\t\t\t<button\n\t\t\t\t\tv-if=\"doShowJoinButton\"\n\t\t\t\t\tclass=\"ui-btn ui-btn-xs ui-btn-success ui-btn-no-caps ui-btn-round sn-spaces__list-item_btn-event\"\n\t\t\t\t\t@click=\"onJoinButtonClick\"\n\t\t\t\t\tdata-id=\"spaces-list-element-join-button\"\n\t\t\t\t>\n\t\t\t\t\t{{loc('SOCIALNETWORK_SPACES_LIST_JOIN_SPACE_BUTTON')}}\n\t\t\t\t</button>\n\t\t\t\t<button\n\t\t\t\t\tv-if=\"doShowPendingButton\"\n\t\t\t\t\tclass=\"ui-btn ui-btn-xs ui-btn-primary ui-btn-no-caps ui-btn-round sn-spaces__list-item_btn-event\"\n\t\t\t\t\t@click=\"onPendingButtonClick\"\n\t\t\t\t\tdata-id=\"spaces-list-element-pending-button\"\n\t\t\t\t>\n\t\t\t\t\t<div class=\"ui-icon-set --mail-out\" style='--ui-icon-set__icon-color: white;'></div>\n\t\t\t\t</button>\n\t\t\t\t<button\n\t\t\t\t\tv-if=\"doShowSuccessButton\"\n\t\t\t\t\tclass=\"ui-btn ui-btn-xs ui-btn-primary ui-btn-no-caps ui-btn-round sn-spaces__list-item_btn-event\"\n\t\t\t\t\t@click=\"onAcceptedButtonClick\"\n\t\t\t\t\tdata-id=\"spaces-list-element-success-button\"\n\t\t\t\t>\n\t\t\t\t\t<div class=\"ui-icon-set --check\" style='--ui-icon-set__icon-color: white;'></div>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t\t<div v-if=\"isInvitation\" class=\"sn-spaces__list-item_btns\">\n\t\t\t<button\n\t\t\t\tclass=\"ui-btn ui-btn-sm ui-btn-success ui-btn-no-caps ui-btn-round\"\n\t\t\t\t@click=\"acceptInvitationButtonClickHandler\"\n\t\t\t\tdata-id=\"spaces-list-element-accept-invitation-button\"\n\t\t\t>\n\t\t\t\t{{loc('SOCIALNETWORK_SPACES_LIST_ACCEPT_INVITATION_BUTTON')}}\n\t\t\t</button>\n\t\t\t<button\n\t\t\t\tclass=\"ui-btn ui-btn-sm ui-btn-light-border ui-btn-no-caps ui-btn-round\"\n\t\t\t\t@click=\"declineInvitationButtonClickHandler\"\n\t\t\t\tdata-id=\"spaces-list-element-decline-invitation-button\"\n\t\t\t>\n\t\t\t\t{{loc('SOCIALNETWORK_SPACES_LIST_DECLINE_INVITATION_BUTTON')}}\n\t\t\t</button>\n\t\t</div>\n\t`,\n};\n","// @vue/component\nimport { Modes } from '../../const/mode';\nimport type { SpaceModel } from '../../model/space-model';\nimport { BasePopup } from '../popup/base-popup';\nimport { SpaceContent } from '../space/space-content';\n\nconst POPUP_ID = 'sn-spaces__short';\n\nexport const PopupShortSpace = {\n\tcomponents: {\n\t\tBasePopup,\n\t\tSpaceContent,\n\t},\n\temits: ['closeSpacePopup'],\n\tprops: {\n\t\tbindElement: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tcontext: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\toptions: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tspace: {\n\t\t\ttype: Object,\n\t\t\tdefault: () => {},\n\t\t},\n\t\tmode: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tlink: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tisInvitation: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tmodes: Modes,\n\t\t};\n\t},\n\tcomputed: {\n\t\tPOPUP_ID(): string {\n\t\t\treturn `${POPUP_ID}-${this.context}`;\n\t\t},\n\t\tconfig(): Object {\n\t\t\treturn {\n\t\t\t\tclassName: 'sn-spaces__list-popup',\n\t\t\t\twidth: 293,\n\t\t\t\theight: this.heightPopup,\n\t\t\t\tcloseIcon: false,\n\t\t\t\tcloseByEsc: true,\n\t\t\t\toverlay: false,\n\t\t\t\tpadding: 0,\n\t\t\t\tanimation: 'fading-slide',\n\t\t\t\toffsetLeft: this.options.left,\n\t\t\t\toffsetTop: -70,\n\t\t\t\tbindOptions: {\n\t\t\t\t\tposition: 'bottom',\n\t\t\t\t},\n\t\t\t\tbindElement: this.bindElement,\n\t\t\t};\n\t\t},\n\t\tclassModifiers(): string\n\t\t{\n\t\t\tconst classModifiers = [];\n\n\t\t\tif (this.isInvitation)\n\t\t\t{\n\t\t\t\tclassModifiers.push('--invitation');\n\t\t\t}\n\n\t\t\treturn classModifiers.join(' ');\n\t\t},\n\t\tspaceModel(): SpaceModel\n\t\t{\n\t\t\treturn this.space;\n\t\t},\n\t\theightPopup(): number\n\t\t{\n\t\t\treturn this.isInvitation ? 115 : 70;\n\t\t},\n\t},\n\tmethods: {\n\t\tclosePopupShortSpace() {\n\t\t\tthis.$emit('closeSpacePopup');\n\t\t},\n\t},\n\ttemplate: `\n\t\t<BasePopup\n\t\t\t:config=\"config\"\n\t\t\t:id=\"POPUP_ID\"\n\t\t>\n\t\t\t<a\n\t\t\t\t:href=\"link\"\n\t\t\t\tref=\"popup-content\"\n\t\t\t\tclass=\"sn-spaces__popup-list_collapsed-mode\"\n\t\t\t\t@mouseleave=\"closePopupShortSpace\"\n\t\t\t>\n\t\t\t\t<div \n\t\t\t\t\tclass=\"sn-spaces__popup-list-item\"\n\t\t\t\t\t:class=\"classModifiers\"\n\t\t\t\t>\n\t\t\t\t\t<SpaceContent \n\t\t\t\t\t\t:space=\"space\" \n\t\t\t\t\t\t:mode=\"mode\"\n\t\t\t\t\t\t:is-invitation=\"isInvitation\"\n\t\t\t\t\t\t:showAvatar=\"false\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</a>\n\t\t</BasePopup>\n\t`,\n};\n","import { Event } from 'main.core';\nimport { SpacesListStates } from '../../const/spaces-list-state';\nimport { LinkManager } from '../../util/link-manager';\nimport { Client } from '../../api/client';\nimport { SpaceUserRoles } from '../../const/space';\nimport { Modes } from '../../const/mode';\nimport { PopupShortSpace } from '../popup-short-space/popup-short-space';\nimport { ContextMenu } from '../context-menu/context-menu';\nimport { SpaceContent } from './space-content';\n\nimport type { SpaceModel } from '../../model/space-model';\n\n// @vue/component\nexport const Space = {\n\tcomponents: {\n\t\tPopupShortSpace,\n\t\tSpaceContent,\n\t},\n\tprops: {\n\t\tspace: {\n\t\t\ttype: Object,\n\t\t\tdefault: () => {},\n\t\t},\n\t\tmode: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tisInvitation: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tmodes: Modes,\n\t\t\tspaceUserRoles: SpaceUserRoles,\n\t\t\tshowModePopup: false,\n\t\t};\n\t},\n\tcomputed: {\n\t\tpopupShortSpaceOptions(): Object\n\t\t{\n\t\t\treturn {\n\t\t\t\tleft: this.widthItem,\n\t\t\t};\n\t\t},\n\t\tclassModifiers(): string\n\t\t{\n\t\t\tconst isRecentMode = this.mode === this.modes.recent;\n\t\t\tconst classModifiers = [];\n\t\t\tif (this.spaceModel.isSelected && isRecentMode)\n\t\t\t{\n\t\t\t\tclassModifiers.push('--active');\n\t\t\t}\n\n\t\t\tif (this.isInvitation)\n\t\t\t{\n\t\t\t\tclassModifiers.push('--invitation');\n\t\t\t}\n\n\t\t\treturn classModifiers.join(' ');\n\t\t},\n\t\tlink(): string\n\t\t{\n\t\t\treturn LinkManager.getSpaceLink(this.spaceModel.id);\n\t\t},\n\t\tspaceModel(): SpaceModel\n\t\t{\n\t\t\treturn this.space;\n\t\t},\n\t\twidthItem(): number\n\t\t{\n\t\t\treturn this.$refs.link.getBoundingClientRect().width;\n\t\t},\n\t\tisCommon(): boolean\n\t\t{\n\t\t\treturn this.spaceModel.id === 0;\n\t\t},\n\t},\n\tmethods: {\n\t\tloc(message: string): string\n\t\t{\n\t\t\treturn this.$bitrix.Loc.getMessage(message);\n\t\t},\n\t\tgetPinMessage(): string\n\t\t{\n\t\t\treturn this.spaceModel.isPinned\n\t\t\t\t? this.loc('SOCIALNETWORK_SPACES_LIST_SPACE_UNPIN')\n\t\t\t\t: this.loc('SOCIALNETWORK_SPACES_LIST_SPACE_PIN')\n\t\t\t;\n\t\t},\n\t\tgetFollowMessage(): string\n\t\t{\n\t\t\treturn this.spaceModel.follow\n\t\t\t\t? this.loc('SOCIALNETWORK_SPACES_LIST_SPACE_UNFOLLOW')\n\t\t\t\t: this.loc('SOCIALNETWORK_SPACES_LIST_SPACE_FOLLOW')\n\t\t\t;\n\t\t},\n\t\tgetOpenMessage(): string\n\t\t{\n\t\t\treturn this.loc('SOCIALNETWORK_SPACES_LIST_SPACE_OPEN');\n\t\t},\n\t\tasync onSpaceClick()\n\t\t{\n\t\t\tif ([Modes.recentSearch, Modes.search].includes(this.mode))\n\t\t\t{\n\t\t\t\tawait Client.addSpaceToRecentSearch(this.spaceModel.id);\n\t\t\t}\n\t\t},\n\t\tasync onSpaceContextMenuClick(event: PointerEvent)\n\t\t{\n\t\t\tevent.preventDefault();\n\t\t\tif (this.isCommon || this.spaceModel.userRole !== SpaceUserRoles.member)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst menu = new ContextMenu({\n\t\t\t\tspaceId: this.spaceModel.id,\n\t\t\t\tbindElement: event.currentTarget,\n\t\t\t\tpath: this.link,\n\t\t\t\tisSelected: this.spaceModel.isSelected,\n\t\t\t\tpinMessage: this.getPinMessage(),\n\t\t\t\tfollowMessage: this.getFollowMessage(),\n\t\t\t\topenMessage: this.getOpenMessage(),\n\t\t\t});\n\t\t\tmenu.toggle();\n\t\t},\n\t\topenPopup()\n\t\t{\n\t\t\tif (this.$store.getters.spacesListState === SpacesListStates.collapsed)\n\t\t\t{\n\t\t\t\tthis.showModePopup = true;\n\t\t\t}\n\t\t},\n\t\tclosePopup()\n\t\t{\n\t\t\tif (this.$store.getters.spacesListState === SpacesListStates.collapsed)\n\t\t\t{\n\t\t\t\tconst bindElement = this.$refs.link;\n\t\t\t\tconst popupContainer = this.$refs['popup-item'].$refs['popup-content'];\n\t\t\t\tlet hoverElement = null;\n\n\t\t\t\tEvent.bind(document, 'mouseover', (event) => {\n\t\t\t\t\thoverElement = event.target;\n\t\t\t\t});\n\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tif (!bindElement.contains(hoverElement) && !popupContainer.contains(hoverElement))\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.showModePopup = false;\n\t\t\t\t\t}\n\t\t\t\t}, 100);\n\t\t\t}\n\t\t},\n\t},\n\ttemplate: `\n\t\t<a\n\t\t\tref=\"link\"\n\t\t\t:href=\"link\"\n\t\t\tclass=\"sn-spaces__list-item\"\n\t\t\t:class=\"classModifiers\"\n\t\t\tdata-id=\"spaces-list-element\"\n\t\t\t@click=\"onSpaceClick\"\n\t\t\t@contextmenu=\"onSpaceContextMenuClick\"\n\t\t\t@mouseenter=\"openPopup\"\n\t\t\t@mouseleave=\"closePopup\"\n\t\t>\n\t\t\t<PopupShortSpace\n\t\t\t\tref=\"popup-item\"\n\t\t\t\t:options=\"popupShortSpaceOptions\"\n\t\t\t\t:space=\"space\"\n\t\t\t\t:mode=\"mode\"\n\t\t\t\t:link=\"link\"\n\t\t\t\t:is-invitation=\"isInvitation\"\n\t\t\t\tcontext=\"popup-short-space\"\n\t\t\t\t:bind-element=\"$refs['link'] || {}\"\n\t\t\t\tv-if=\"showModePopup\"\n\t\t\t\t@close=\"showModePopup = false\"\n\t\t\t\t@closeSpacePopup=\"closePopup\"\n\t\t\t/>\n\t\t\t<SpaceContent \n\t\t\t\t:space=\"space\" \n\t\t\t\t:mode=\"mode\"\n\t\t\t\t:is-invitation=\"isInvitation\"\n\t\t\t/>\n\t\t</a>\n\t`,\n};\n","export const KeyboardCodes = Object.freeze({\n\tenter: 13,\n});","import { BaseEvent } from 'main.core.events';\nimport { mapGetters } from 'ui.vue3.vuex';\nimport { EventTypes } from '../../const/event';\nimport { KeyboardCodes } from '../../const/keyboard-codes';\nimport { Modes } from '../../const/mode';\nimport { SpaceViewModeTypes, SpaceViewModes } from '../../const/space';\nimport { LinkManager } from '../../util/link-manager';\nimport { PopupMenu } from '../popup-menu/popup-menu';\nimport { Editor as AvatarEditor } from 'ui.avatar-editor';\nimport { Type, Event, ajax, Dom } from 'main.core';\n\n// @vue/component\nexport const SpaceAddForm = {\n\tcomponents: {\n\t\tPopupMenu,\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tmodes: Modes,\n\t\t\tspaceViewModes: SpaceViewModes,\n\t\t\tspaceViewModeTypes: SpaceViewModeTypes,\n\t\t\tspaceData: {\n\t\t\t\tname: '',\n\t\t\t\tviewMode: SpaceViewModeTypes.open,\n\t\t\t\timage: null,\n\t\t\t},\n\t\t\tisFocusedOnNameInput: false,\n\t\t\tshowViewModePopup: false,\n\t\t\twasCreateGroupRequestSent: false,\n\t\t\tdoShowNameAlreadyExistsError: false,\n\t\t\tavatarColor: '',\n\t\t};\n\t},\n\tcomputed: {\n\t\t...mapGetters({\n\t\t\tavatarColors: 'avatarColors',\n\t\t\tpreviousAvatarColor: 'previousAvatarColor',\n\t\t}),\n\t\tisDataValidated(): boolean\n\t\t{\n\t\t\treturn this.spaceData.name.length > 0 && !this.doShowNameAlreadyExistsError;\n\t\t},\n\t\tconfirmButtonClass(): string\n\t\t{\n\t\t\treturn this.isDataValidated && !this.wasCreateGroupRequestSent ? '' : '--disabled';\n\t\t},\n\t\tpopupMenuOptions(): Array\n\t\t{\n\t\t\treturn this.spaceViewModes.map((spaceViewMode) => ({\n\t\t\t\ttype: spaceViewMode.type,\n\t\t\t\tname: this.loc(spaceViewMode.nameMessageId),\n\t\t\t\tdescription: this.loc(spaceViewMode.descriptionMessageId),\n\t\t\t}));\n\t\t},\n\t\tselectedViewModeOptionName(): string\n\t\t{\n\t\t\treturn this.loc(`SOCIALNETWORK_SPACES_LIST_SPACE_VIEW_MODE_${this.spaceData.viewMode.toUpperCase()}_TITLE`);\n\t\t},\n\t\tnameInputModifier(): string\n\t\t{\n\t\t\treturn this.doShowNameAlreadyExistsError ? 'sn-spaces__list-add-item_input-error' : '';\n\t\t},\n\t\tisNameInputReadOnly(): boolean\n\t\t{\n\t\t\treturn this.wasCreateGroupRequestSent;\n\t\t},\n\t},\n\tmounted()\n\t{\n\t\tthis.$refs.spaceAddFormNameInput.focus();\n\t\tEvent.bind(document, 'mouseup', this.handleAutoHide);\n\t\tEvent.bind(document, 'keydown', this.handleKeyDown);\n\t\tthis.$bitrix.eventEmitter.subscribe(EventTypes.showUpperSpaceAddForm, this.chooseRandomAvatarColor);\n\t\tthis.chooseRandomAvatarColor();\n\t},\n\tunmounted()\n\t{\n\t\tEvent.unbind(document, 'mouseup', this.handleAutoHide);\n\t\tEvent.unbind(document, 'keydown', this.handleKeyDown);\n\t\tthis.$bitrix.eventEmitter.unsubscribe(EventTypes.showUpperSpaceAddForm, this.chooseRandomAvatarColor);\n\t},\n\tmethods: {\n\t\tloc(message: string): string\n\t\t{\n\t\t\treturn this.$bitrix.Loc.getMessage(message);\n\t\t},\n\t\topenViewModePopup()\n\t\t{\n\t\t\tthis.showViewModePopup = true;\n\t\t},\n\t\tonChangeSelectedOption(newOption)\n\t\t{\n\t\t\tthis.spaceData.viewMode = newOption;\n\t\t},\n\t\tchooseSpaceImage()\n\t\t{\n\t\t\tconst avatarEditor = this.getAvatarEditor();\n\t\t\tavatarEditor.show('file');\n\t\t},\n\t\tgetAvatarEditor(): AvatarEditor\n\t\t{\n\t\t\tif (!this.avatarEditor)\n\t\t\t{\n\t\t\t\tthis.avatarEditor = new AvatarEditor({\n\t\t\t\t\tenableCamera: false,\n\t\t\t\t});\n\t\t\t\tthis.avatarEditor.subscribe('onApply', (event: BaseEvent) => {\n\t\t\t\t\tconst [file] = event.getCompatData();\n\t\t\t\t\tfile.name ??= 'tmp.png';\n\n\t\t\t\t\tthis.spaceData.image = file;\n\t\t\t\t\tthis.$refs.groupImage.src = URL.createObjectURL(file);\n\n\t\t\t\t\tDom.style(this.$refs.groupImageContainer, 'background', 'none');\n\t\t\t\t\tDom.style(this.$refs.groupImage, 'background', 'none');\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn this.avatarEditor;\n\t\t},\n\t\tonAddSpaceClickHandler()\n\t\t{\n\t\t\tthis.addSpace();\n\t\t},\n\t\tchooseRandomAvatarColor(): void\n\t\t{\n\t\t\tif (this.spaceData.image !== null)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!Type.isArrayFilled(this.avatarColors))\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst colors = this.avatarColors.filter((color) => color !== this.previousAvatarColor);\n\t\t\tthis.avatarColor = colors[Math.floor(Math.random() * colors.length)];\n\t\t\tDom.style(this.$refs.groupImageContainer, 'backgroundColor', `#${this.avatarColor}`);\n\t\t\tthis.$store.dispatch('setAvatarColor', this.avatarColor);\n\t\t},\n\t\taddSpace()\n\t\t{\n\t\t\tthis.spaceData.name = this.spaceData.name.trim();\n\t\t\tif (this.spaceData.name.length === 0)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst formData = new FormData();\n\t\t\tformData.append('groupName', this.spaceData.name);\n\t\t\tformData.append('viewMode', this.spaceData.viewMode);\n\t\t\tif (this.spaceData.image !== null)\n\t\t\t{\n\t\t\t\tformData.append('groupImage', this.spaceData.image, this.spaceData.image.name);\n\t\t\t}\n\t\t\tformData.append('avatarColor', this.avatarColor);\n\n\t\t\tthis.wasCreateGroupRequestSent = true;\n\t\t\tajax.runAction('socialnetwork.api.workgroup.createGroup', {\n\t\t\t\tdata: formData,\n\t\t\t}).then((response) => {\n\t\t\t\tlocation.href = `${LinkManager.getSpaceLink(response.data.groupId)}?empty-state=enabled`;\n\t\t\t}, (errorResponse) => {\n\t\t\t\terrorResponse.errors.forEach((error) => {\n\t\t\t\t\tif (error.code === 'ERROR_GROUP_NAME_EXISTS')\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.doShowNameAlreadyExistsError = true;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tthis.wasCreateGroupRequestSent = false;\n\t\t\t\tconsole.log(errorResponse);\n\t\t\t});\n\t\t},\n\t\thandleAutoHide(event)\n\t\t{\n\t\t\tif (this.shouldHideForm(event))\n\t\t\t{\n\t\t\t\tthis.$bitrix.eventEmitter.emit(EventTypes.hideSpaceAddForm);\n\t\t\t}\n\t\t},\n\t\thandleKeyDown(event)\n\t\t{\n\t\t\tif (\n\t\t\t\tthis.isFocusedOnNameInput\n\t\t\t\t&& event.keyCode === KeyboardCodes.enter\n\t\t\t\t&& this.isDataValidated\n\t\t\t\t&& !this.wasCreateGroupRequestSent\n\t\t\t)\n\t\t\t{\n\t\t\t\tthis.addSpace();\n\t\t\t}\n\t\t},\n\t\tshouldHideForm(event): boolean\n\t\t{\n\t\t\tconst notVisible = this.$refs.spaceAddForm.offsetHeight === 0;\n\t\t\tif (notVisible)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tconst clickOnSpace = event.target.closest('.sn-spaces__list-item') !== null;\n\t\t\tconst clickOnSelf = this.$refs.spaceAddForm.contains(event.target);\n\t\t\tconst avatarPopupShown = this.avatarEditor?.popup?.isShown();\n\t\t\tconst viewModePopupShown = this.showViewModePopup;\n\t\t\tconst anyPopupShown = avatarPopupShown || viewModePopupShown;\n\n\t\t\treturn !clickOnSelf && !clickOnSpace && !anyPopupShown && !this.formDataChanged();\n\t\t},\n\t\tformDataChanged(): boolean\n\t\t{\n\t\t\tconst isNameFilled = this.spaceData.name !== '';\n\t\t\tconst isViewModeChanged = this.spaceData.viewMode !== SpaceViewModeTypes.open;\n\t\t\tconst isImageChosen = this.$refs.groupImage.src !== '';\n\n\t\t\treturn isNameFilled || isViewModeChanged || isImageChosen;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"sn-spaces__list-item --add-active --error\" ref=\"spaceAddForm\" data-id=\"spaces-list-add-space-form\">\n\t\t\t<div class=\"sn-spaces__list-item_add\">\n\t\t\t\t<div class=\"sn-spaces__list-item_icon\" ref=\"groupImageContainer\">\n\t\t\t\t\t<img\n\t\t\t\t\t\talt=\"\" class=\"spaces-list-add-space-image\"\n\t\t\t\t\t\t@click=\"chooseSpaceImage()\"\n\t\t\t\t\t\tref=\"groupImage\"\n\t\t\t\t\t\tdata-id=\"spaces-list-add-space-image\"\n\t\t\t\t\t>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"sn-spaces__list-item_info\">\n\t\t\t\t\t<div class=\"ui-ctl ui-ctl-textbox ui-ctl-w100 ui-ctl-xs ui-ctl-no-padding ui-ctl-no-border\">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tv-model=\"spaceData.name\"\n\t\t\t\t\t\t\ttype=\"text\" class=\"ui-ctl-element\"\n\t\t\t\t\t\t\t:placeholder=\"loc('SOCIALNETWORK_SPACES_LIST_ADD_SPACE_FORM_NAME_PLACEHOLDER')\"\n\t\t\t\t\t\t\tref=\"spaceAddFormNameInput\"\n\t\t\t\t\t\t\tdata-id=\"spaces-list-add-space-name-input\"\n\t\t\t\t\t\t\t@focus=\"isFocusedOnNameInput=true\"\n\t\t\t\t\t\t\t@blur=\"isFocusedOnNameInput=false\"\n\t\t\t\t\t\t\t:class=\"nameInputModifier\"\n\t\t\t\t\t\t\t@input=\"doShowNameAlreadyExistsError=false\"\n\t\t\t\t\t\t\t:readonly=\"isNameInputReadOnly\"\n\t\t\t\t\t\t>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div @click=\"openViewModePopup\" ref=\"privacySelector\" class=\"sn-spaces__list-item_select-private\">\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclass=\"sn-spaces__list-item_select-private-text\"\n\t\t\t\t\t\t\tdata-id=\"spaces-list-add-space-view-mode\"\n\t\t\t\t\t\t>{{selectedViewModeOptionName}}</div>\n\t\t\t\t\t\t<div class=\"ui-icon-set --chevron-down\" style=\"--ui-icon-set__icon-size: 14px;\"></div>\n\t\t\t\t\t\t<PopupMenu\n\t\t\t\t\t\t\tv-if=\"showViewModePopup\"\n\t\t\t\t\t\t\t:options=\"popupMenuOptions\"\n\t\t\t\t\t\t\tcontext=\"space-add-form\"\n\t\t\t\t\t\t\t:bind-element=\"this.$refs.privacySelector || {}\"\n\t\t\t\t\t\t\t:hint=\"loc('SOCIALNETWORK_SPACES_LIST_SPACE_VIEW_MODE_HINT')\"\n\t\t\t\t\t\t\t:selectedOption=\"this.spaceData.viewMode\"\n\t\t\t\t\t\t\t@close=\"showViewModePopup = false\"\n\t\t\t\t\t\t\t@changeSelectedOption=\"onChangeSelectedOption\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"sn-spaces__list-item_details\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"ui-icon-set --circle-check sn-spaces__list-item_save-btn\" :class=\"confirmButtonClass\"\n\t\t\t\t\t\t@click=\"onAddSpaceClickHandler()\"\n\t\t\t\t\t\tdata-id=\"spaces-list-add-space-create-button\"\n\t\t\t\t\t></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div v-show=\"doShowNameAlreadyExistsError\" class=\"sn-spaces__list-item_error\">\n\t\t\t\t{{loc('SOCIALNETWORK_SPACES_LIST_NAME_ALREADY_EXISTS_ERROR')}}\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","// @vue/component\nexport const SpaceListAddButton = {\n\tmethods: {\n\t\tloc(message: string): string\n\t\t{\n\t\t\treturn this.$bitrix.Loc.getMessage(message);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"sn-spaces__list-item --add-btn\">\n\t\t\t<div class=\"sn-spaces__list-item_icon\">\n\t\t\t</div>\n\t\t\t<div class=\"sn-spaces__list-item_info\">\n\t\t\t\t<div class=\"sn-spaces__list-item_title\">\n\t\t\t\t\t{{loc('SOCIALNETWORK_SPACES_LIST_ADD_SPACE_ITEM_TITLE')}}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"sn-spaces__list-item_description\">\n\t\t\t\t\t{{loc('SOCIALNETWORK_SPACES_LIST_ADD_SPACE_ITEM_DESCRIPTION')}}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { Loader as BaseLoader } from 'main.loader';\n\nexport const Loader = {\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tloader: null,\n\t\t};\n\t},\n\tprops: {\n\t\tconfig: {\n\t\t\ttype: Object,\n\t\t\trequired: false,\n\t\t\tdefault(): Object {\n\t\t\t\treturn {};\n\t\t\t},\n\t\t},\n\t},\n\tmounted()\n\t{\n\t\tthis.getLoaderInstance().show();\n\t},\n\tbeforeUnmount()\n\t{\n\t\tif (!this.instance)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.destroyLoader();\n\t},\n\tmethods: {\n\t\tgetLoaderInstance(): BaseLoader\n\t\t{\n\t\t\tif (!this.instance)\n\t\t\t{\n\t\t\t\tthis.instance = new BaseLoader(this.getLoaderConfig());\n\t\t\t}\n\n\t\t\treturn this.instance;\n\t\t},\n\t\tgetDefaultConfig(): Object\n\t\t{\n\t\t\treturn {\n\t\t\t\ttarget: this.$refs.root,\n\t\t\t\tsize: 110,\n\t\t\t\tcolor: '#2fc6f6',\n\t\t\t\toffset: {\n\t\t\t\t\tleft: '0px',\n\t\t\t\t\ttop: '0px',\n\t\t\t\t},\n\t\t\t\tmode: 'absolute',\n\t\t\t};\n\t\t},\n\t\tgetLoaderConfig(): Object\n\t\t{\n\t\t\tconst defaultConfig = this.getDefaultConfig();\n\n\t\t\treturn { ...defaultConfig, ...this.config };\n\t\t},\n\t\tdestroyLoader()\n\t\t{\n\t\t\tthis.instance.destroy();\n\t\t\tthis.instance = null;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div ref=\"root\" style=\"position: relative\">\n\t\t</div>\n\t`,\n};\n","import { SpacesListStates } from '../../const/spaces-list-state';\nimport { ContextMenuCollection } from '../context-menu/context-menu-collection';\nimport { Space } from '../space/space';\nimport { SpaceAddForm } from '../space-add-form/space-add-form';\nimport { LoadServiceInterface } from '../../api/load/load-service-interface';\nimport { SpaceListAddButton } from './space-list-add-button';\nimport { EventTypes } from '../../const/event';\nimport { Loader } from '../loader/loader';\nimport { Modes } from '../../const/mode';\nimport { BaseEvent } from 'main.core.events';\n\n// @vue/component\n\nconst PAGINATION_OFFSET = 20;\n\nexport const SpaceList = {\n\tcomponents: {\n\t\tSpace,\n\t\tLoader,\n\t\tSpaceListAddButton,\n\t\tSpaceAddForm,\n\t},\n\temits: ['isSpaceAddFormShown'],\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tisScrollLoading: false,\n\t\t\tisLoading: false,\n\t\t\tmodes: Modes,\n\t\t\tdoShowLowerSpaceAddForm: false,\n\t\t\tdoShowUpperSpaceAddForm: false,\n\t\t\tskeletonItemsAmount: 25,\n\t\t};\n\t},\n\tprops: {\n\t\tmode: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tspaces: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t\tdefault: [],\n\t\t},\n\t\tspaceInvitations: {\n\t\t\ttype: Array,\n\t\t\trequired: false,\n\t\t\tdefault: [],\n\t\t},\n\t\tcanCreateGroup: Boolean,\n\t\tspacesCountForLoad: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\tserviceInstance: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tsubtitle: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t},\n\t\tisShown: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcreated()\n\t{\n\t\tthis.$bitrix.eventEmitter.subscribe(\n\t\t\tEventTypes.tryToLoadSpacesIfHasNoScrollbar,\n\t\t\tthis.tryToLoadSpacesIfHasNoScrollbarHandler,\n\t\t);\n\t\tthis.$bitrix.eventEmitter.subscribe(EventTypes.showLoader, this.showLoaderHandler);\n\t\tthis.$bitrix.eventEmitter.subscribe(EventTypes.hideLoader, this.hideLoaderHandler);\n\t\tthis.$bitrix.eventEmitter.subscribe(EventTypes.showUpperSpaceAddForm, this.showUpperSpaceAddFormHandler);\n\t\tthis.$bitrix.eventEmitter.subscribe(EventTypes.hideSpaceAddForm, this.hideSpaceAddFormHandler);\n\t},\n\tbeforeUnmount()\n\t{\n\t\tthis.$bitrix.eventEmitter.unsubscribe(\n\t\t\tEventTypes.tryToLoadSpacesIfHasNoScrollbar,\n\t\t\tthis.tryToLoadSpacesIfHasNoScrollbarHandler,\n\t\t);\n\t\tthis.$bitrix.eventEmitter.unsubscribe(EventTypes.showLoader, this.showLoaderHandler);\n\t\tthis.$bitrix.eventEmitter.unsubscribe(EventTypes.hideLoader, this.hideLoaderHandler);\n\t\tthis.$bitrix.eventEmitter.unsubscribe(EventTypes.showUpperSpaceAddForm, this.showUpperSpaceAddFormHandler);\n\t\tthis.$bitrix.eventEmitter.unsubscribe(EventTypes.hideSpaceAddForm, this.hideSpaceAddFormHandler);\n\t},\n\tcomputed: {\n\t\tservice(): LoadServiceInterface\n\t\t{\n\t\t\treturn this.serviceInstance;\n\t\t},\n\t\thasScrollbar(): boolean\n\t\t{\n\t\t\treturn this.$refs.list.scrollHeight > this.$refs.list.clientHeight;\n\t\t},\n\t\tloadingClass(): string\n\t\t{\n\t\t\treturn this.isLoading ? '--loading' : '';\n\t\t},\n\t\tfilterMode(): string\n\t\t{\n\t\t\treturn this.$store.state.main.selectedFilterModeType;\n\t\t},\n\t\tdoShowSubtitle(): boolean\n\t\t{\n\t\t\treturn this.subtitle.length > 0;\n\t\t},\n\t\tdoShowSpaceListAddButton(): boolean\n\t\t{\n\t\t\treturn this.canCreateGroup\n\t\t\t\t&& this.mode === this.modes.recent\n\t\t\t\t&& this.spaces.length <= 5\n\t\t\t\t&& !this.isSpaceAddFormShown\n\t\t\t;\n\t\t},\n\t\tdoShowInvitations(): boolean\n\t\t{\n\t\t\treturn this.mode === this.modes.recent && this.spaceInvitations.length > 0;\n\t\t},\n\t\tisSpaceAddFormShown(): boolean\n\t\t{\n\t\t\treturn this.doShowLowerSpaceAddForm || this.doShowUpperSpaceAddForm;\n\t\t},\n\t\tlistState(): string\n\t\t{\n\t\t\treturn this.$store.getters.spacesListState;\n\t\t},\n\t},\n\twatch: {\n\t\tfilterMode()\n\t\t{\n\t\t\tthis.scrollToTop();\n\t\t\tthis.isLoading = false;\n\t\t},\n\t\tisShown()\n\t\t{\n\t\t\tif (this.isShown === true)\n\t\t\t{\n\t\t\t\tconst isSpaceListScrolled = this.$refs.list.scrollTop > 0;\n\t\t\t\tthis.$bitrix.eventEmitter.emit(EventTypes.spaceListShown, { isSpaceListScrolled, mode: this.mode });\n\t\t\t}\n\t\t},\n\t\tdoShowUpperSpaceAddForm()\n\t\t{\n\t\t\tif (this.doShowUpperSpaceAddForm === true)\n\t\t\t{\n\t\t\t\tthis.doShowLowerSpaceAddForm = false;\n\t\t\t}\n\t\t},\n\t\tisSpaceAddFormShown()\n\t\t{\n\t\t\tthis.$emit('isSpaceAddFormShown', this.isSpaceAddFormShown);\n\t\t},\n\t},\n\tmethods: {\n\t\ttryToLoadSpacesIfHasNoScrollbarHandler(event: BaseEvent)\n\t\t{\n\t\t\tconst mode = event.data;\n\t\t\tif (this.isProperMode(mode) && !this.hasScrollbar && this.service.canLoadSpaces())\n\t\t\t{\n\t\t\t\tthis.loadSpaces();\n\t\t\t}\n\t\t},\n\t\tshowLoaderHandler(event: BaseEvent)\n\t\t{\n\t\t\tconst mode = event.data;\n\t\t\tif (this.isProperMode(mode))\n\t\t\t{\n\t\t\t\tthis.isLoading = true;\n\t\t\t}\n\t\t},\n\t\thideLoaderHandler(event: BaseEvent)\n\t\t{\n\t\t\tconst mode = event.data;\n\t\t\tif (this.isProperMode(mode))\n\t\t\t{\n\t\t\t\tthis.isLoading = false;\n\t\t\t}\n\t\t},\n\t\tshowUpperSpaceAddFormHandler()\n\t\t{\n\t\t\tif (this.mode === this.modes.recent)\n\t\t\t{\n\t\t\t\tthis.doShowUpperSpaceAddForm = true;\n\t\t\t}\n\t\t},\n\t\tshowLowerSpaceAddForm()\n\t\t{\n\t\t\tthis.doShowLowerSpaceAddForm = true;\n\t\t},\n\t\thideSpaceAddFormHandler()\n\t\t{\n\t\t\tthis.doShowLowerSpaceAddForm = false;\n\t\t\tthis.doShowUpperSpaceAddForm = false;\n\n\t\t\tif (this.listState === SpacesListStates.expanded)\n\t\t\t{\n\t\t\t\tthis.$bitrix.eventEmitter.emit(EventTypes.changeSpaceListState, SpacesListStates.collapsed);\n\t\t\t}\n\t\t},\n\t\tisProperMode(mode: string): boolean\n\t\t{\n\t\t\treturn this.mode === mode;\n\t\t},\n\t\tscrollToTop()\n\t\t{\n\t\t\tthis.$refs.list.scrollTop = 0;\n\t\t},\n\t\tonScroll(event)\n\t\t{\n\t\t\tconst target = event.target;\n\t\t\tconst isSpaceListScrolled = target.scrollTop > 0;\n\t\t\tthis.$bitrix.eventEmitter.emit(EventTypes.spaceListScroll, { isSpaceListScrolled, mode: this.mode });\n\n\t\t\tconst listRemainingSpace = target.scrollHeight - target.offsetHeight;\n\t\t\tconst listScroll = target.scrollTop;\n\n\t\t\tconst isScrolledToBottom = listScroll > (listRemainingSpace - PAGINATION_OFFSET);\n\n\t\t\tif (!this.isScrollLoading && this.service.canLoadSpaces() && isScrolledToBottom)\n\t\t\t{\n\t\t\t\tthis.loadSpaces();\n\t\t\t}\n\n\t\t\tContextMenuCollection.getInstance().destroy();\n\t\t},\n\t\tloadSpaces()\n\t\t{\n\t\t\tthis.isScrollLoading = true;\n\t\t\tthis.service.loadSpaces({\n\t\t\t\tloadedSpacesCount: this.spacesCountForLoad,\n\t\t\t\tfilterMode: this.filterMode,\n\t\t\t}).then((result) => {\n\t\t\t\tthis.$store.dispatch('addSpacesToView', { mode: this.mode, spaces: result.spaces });\n\t\t\t\tthis.isScrollLoading = false;\n\t\t\t}).catch(() => {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.isScrollLoading = false;\n\t\t\t\t}, 5000);\n\t\t\t});\n\t\t},\n\t},\n\ttemplate: `\n\t\t<span>\n\t\t\t<Loader v-if=\"isLoading\" :config=\"{offset: {left: '0px', top: '40vh'}}\"/>\n\t\t\t<div\n\t\t\t\t@scroll=\"onScroll\"\n\t\t\t\tclass=\"sn-spaces__list-content\"\n\t\t\t\t:class=\"loadingClass\"\n\t\t\t\tref=\"list\"\n\t\t\t\tdata-id=\"spaces-list-content\"\n\t\t\t>\n\t\t\t\t<div v-show=\"doShowSubtitle\" class=\"sn-spaces__list-subtitle\">\n\t\t\t\t\t{{subtitle}}\n\t\t\t\t</div>\n\t\t\t\t<SpaceAddForm v-if=\"doShowUpperSpaceAddForm\"/>\n\t\t\t\t<div class=\"sn-spaces__list-item_invitation\" v-if=\"doShowInvitations\">\n\t\t\t\t\t<Space\n\t\t\t\t\t\tv-for=\"spaceInvitation in spaceInvitations\"\n\t\t\t\t\t\t:key=\"spaceInvitation.id\"\n\t\t\t\t\t\t:space=\"spaceInvitation\"\n\t\t\t\t\t\t:mode=\"mode\"\n\t\t\t\t\t\t:isInvitation=\"true\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<Space \n\t\t\t\t\tv-for=\"space in spaces\"\n\t\t\t\t\t:key=\"space.id\"\n\t\t\t\t\t:space=\"space\"\n\t\t\t\t\t:mode=\"mode\"/>\n\t\t\t\t<SpaceListAddButton\n\t\t\t\t\tv-if=\"doShowSpaceListAddButton\"\n\t\t\t\t\t@click=\"showLowerSpaceAddForm\"\n\t\t\t\t\tdata-id=\"spaces-list-add-space-button\"\n\t\t\t\t/>\n\t\t\t\t<SpaceAddForm v-if=\"doShowLowerSpaceAddForm\"/>\n\t\t\t\t<span v-show=\"isScrollLoading\">\n\t\t\t\t\t<div v-for=\"index in skeletonItemsAmount\" :key=\"index\" class=\"sn-spaces__list-skeleton-item\"></div>\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t</span>\n\t`,\n};\n","import { LoadServiceInterface } from './load-service-interface';\nimport { Client } from '../client';\n\nexport class RecentSearchService implements LoadServiceInterface\n{\n\tstatic instance = null;\n\thasMoreSpacesToLoad: boolean = false;\n\n\tstatic getInstance(): RecentSearchService\n\t{\n\t\tif (!this.instance)\n\t\t{\n\t\t\tthis.instance = new this();\n\t\t}\n\n\t\treturn this.instance;\n\t}\n\n\tasync loadSpaces(): Promise\n\t{\n\t\treturn Client.loadRecentSearchSpaces();\n\t}\n\n\tcanLoadSpaces(): boolean\n\t{\n\t\treturn false;\n\t}\n}\n","import { Dom, ajax } from 'main.core';\nimport { EventTypes } from '../../const/event';\nimport { SpacesListStates } from '../../const/spaces-list-state';\n\n// @vue/component\n\nconst MAX_QUANTITY_SHOW_BTN_TOGGLE_BLOCK = 3;\n\nexport const CollapsedModeToggleBlock = {\n\tname: 'ToggleBlock',\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tdataSpacesContent: document.getElementById('sn-spaces__content'),\n\t\t\tcounterImpressionsBtnShowToggleBlock: 0,\n\t\t\tshowBtnShowToggleBlock: false,\n\t\t};\n\t},\n\tcreated()\n\t{\n\t\tthis.$bitrix.eventEmitter.subscribe(EventTypes.showBtnToggleBlock, this.showBtnToggleBlockHandler);\n\t},\n\tbeforeUnmount()\n\t{\n\t\tthis.$bitrix.eventEmitter.unsubscribe(EventTypes.showBtnToggleBlock, this.showBtnToggleBlockHandler);\n\t},\n\tcomputed: {\n\t\tisShowHintBtn(): boolean\n\t\t{\n\t\t\treturn !(this.counterImpressionsBtnShowToggleBlock > MAX_QUANTITY_SHOW_BTN_TOGGLE_BLOCK);\n\t\t},\n\t\tbtnClassName(): string\n\t\t{\n\t\t\treturn this.showBtnShowToggleBlock ? '' : '--hide';\n\t\t},\n\t},\n\tmounted() {\n\t\tif (localStorage.counterImpressionsBtnShowToggleBlock)\n\t\t{\n\t\t\tthis.counterImpressionsBtnShowToggleBlock = localStorage.counterImpressionsBtnShowToggleBlock;\n\t\t}\n\t},\n\tmethods: {\n\t\tshowBtnToggleBlockHandler()\n\t\t{\n\t\t\tif (this.isShowHintBtn && !this.showBtnShowToggleBlock)\n\t\t\t{\n\t\t\t\tthis.showBtnShowToggleBlock = true;\n\t\t\t}\n\t\t},\n\t\thideBtnToggleBlockHandler()\n\t\t{\n\t\t\tthis.showBtnShowToggleBlock = false;\n\t\t},\n\t\thideHintBtn()\n\t\t{\n\t\t\tlocalStorage.counterImpressionsBtnShowToggleBlock = ++this.counterImpressionsBtnShowToggleBlock;\n\t\t\tthis.showBtnShowToggleBlock = false;\n\t\t},\n\t\ttoggleList()\n\t\t{\n\t\t\tthis.showBtnShowToggleBlock = false;\n\n\t\t\tif (this.$store.getters.spacesListState === SpacesListStates.collapsed)\n\t\t\t{\n\t\t\t\tthis.$bitrix.eventEmitter.emit(EventTypes.changeSpaceListState, SpacesListStates.default);\n\t\t\t\tthis.saveState(SpacesListStates.default);\n\t\t\t\tDom.removeClass(this.dataSpacesContent, '--list-collapsed-mode');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.$bitrix.eventEmitter.emit(EventTypes.changeSpaceListState, SpacesListStates.collapsed);\n\t\t\t\tthis.saveState(SpacesListStates.collapsed);\n\t\t\t\tDom.addClass(this.dataSpacesContent, '--list-collapsed-mode');\n\t\t\t}\n\t\t},\n\t\tsaveState(state: string)\n\t\t{\n\t\t\tajax.runAction('socialnetwork.api.space.saveListSate', {\n\t\t\t\tdata: { spacesListState: state },\n\t\t\t});\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"sn-spaces__toggle-block\">\n\t\t\t<div class=\"sn-spaces__toggle-image\"></div>\n\t\t\t<div \n\t\t\t\tclass=\"sn-spaces__toggle-wrapper\"\n\t\t\t\t@click=\"toggleList\"\n\t\t\t>\n\t\t\t\t<div \n\t\t\t\t\tref=\"toggle-btn\"\n\t\t\t\t\tclass=\"sn-spaces__toggle-btn\" \n\t\t\t\t\tid=\"sn-spaces__toggle-btn\"\n\t\t\t\t\tdata-id=\"sn-spaces__toggle-btn\"\n\t\t\t\t>\n\t\t\t\t\t<div class=\"ui-icon-set --chevron-left\" style=\"--ui-icon-set__icon-size: 15px;\"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div\n\t\t\t\tclass=\"sn-spaces__btn-show-toggle-block\"\n\t\t\t\t:class=\"btnClassName\"\n\t\t\t\tdata-id=\"sn-spaces__btn-hint_show-toggle-block\"\n\t\t\t\tv-if=\"isShowHintBtn\"\n\t\t\t\t@click=\"hideHintBtn\"\n\t\t\t\t@mouseleave=\"hideBtnToggleBlockHandler\"\n\t\t\t>\n\t\t\t\t<div class=\"ui-icon-set --chevron-left\" style=\"--ui-icon-set__icon-size: 15px;\"></div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { SpacesListStates } from '../const/spaces-list-state';\nimport { EventTypes } from '../const/event';\nimport { Modes } from '../const/mode';\nimport { RecentHeader } from './header/recent-header';\nimport { SearchHeader } from './header/search-header';\nimport { SpaceList } from './space-list/space-list';\nimport { mapGetters } from 'ui.vue3.vuex';\nimport { RecentService } from '../api/load/recent-service';\nimport { RecentSearchService } from '../api/load/recent-search-service';\nimport { SearchService } from '../api/load/search-service';\nimport { CollapsedModeToggleBlock } from './collapsed-mode-toggle-block/collapsed-mode-toggle-block';\nimport { Dom } from 'main.core';\n\n// @vue/component\nexport const BaseComponent = {\n\tcomponents: {\n\t\tRecentHeader,\n\t\tSpaceList,\n\t\tSearchHeader,\n\t\tCollapsedModeToggleBlock,\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tmode: 'recent',\n\t\t\tmodes: Modes,\n\t\t\tlistNode: document.getElementById('sn-spaces-list'),\n\t\t\tisSpaceAddFormShownInRecentList: false,\n\t\t};\n\t},\n\tcomputed: {\n\t\t...mapGetters({\n\t\t\trecentSpaces: 'recentSpaces',\n\t\t\trecentSpacesCountForLoad: 'recentSpacesCountForLoad',\n\t\t\trecentSearchSpaces: 'recentSearchSpaces',\n\t\t\trecentSearchSpacesCountForLoad: 'recentSearchSpacesCountForLoad',\n\t\t\tsearchSpaces: 'searchSpaces',\n\t\t\tsearchSpacesCountForLoad: 'searchSpacesCountForLoad',\n\t\t\tspacesLoadedByCurrentSearchQueryCount: 'spacesLoadedByCurrentSearchQueryCount',\n\t\t\tcanCreateGroup: 'canCreateGroup',\n\t\t\tspaceInvitations: 'spaceInvitations',\n\t\t}),\n\t\tdoExpandCollapsedList(): boolean\n\t\t{\n\t\t\tconst isCollapsedState = this.$store.getters.spacesListState === SpacesListStates.collapsed;\n\t\t\tconst isSearchMode = [this.modes.search, this.modes.recentSearch].includes(this.mode);\n\n\t\t\treturn isCollapsedState && (isSearchMode || this.isSpaceAddFormShownInRecentList);\n\t\t},\n\t\tdoCollapseExpandedList(): boolean\n\t\t{\n\t\t\tconst isExpandedState = this.$store.getters.spacesListState === SpacesListStates.expanded;\n\t\t\tconst isRecentMode = this.modes.recent === this.mode;\n\n\t\t\treturn isExpandedState && isRecentMode && !this.isSpaceAddFormShownInRecentList;\n\t\t},\n\t},\n\twatch: {\n\t\tdoExpandCollapsedList()\n\t\t{\n\t\t\tif (this.doExpandCollapsedList)\n\t\t\t{\n\t\t\t\tthis.changeSpaceListState(SpacesListStates.expanded);\n\t\t\t}\n\t\t},\n\t\tdoCollapseExpandedList()\n\t\t{\n\t\t\tif (this.doCollapseExpandedList)\n\t\t\t{\n\t\t\t\tthis.changeSpaceListState(SpacesListStates.collapsed);\n\t\t\t}\n\t\t},\n\t},\n\tcreated()\n\t{\n\t\tthis.$bitrix.eventEmitter.subscribe(EventTypes.changeSpaceListState, this.changeSpaceListStateHandler);\n\t},\n\tbeforeUnmount()\n\t{\n\t\tthis.$bitrix.eventEmitter.unsubscribe(EventTypes.changeSpaceListState, this.changeSpaceListStateHandler);\n\t},\n\tmethods: {\n\t\tloc(message: string): string\n\t\t{\n\t\t\treturn this.$bitrix.Loc.getMessage(message);\n\t\t},\n\t\tsetMode(mode)\n\t\t{\n\t\t\tthis.mode = mode;\n\t\t},\n\t\tgetRecentService(): RecentService\n\t\t{\n\t\t\treturn RecentService.getInstance();\n\t\t},\n\t\tgetRecentSearchService(): RecentSearchService\n\t\t{\n\t\t\treturn RecentSearchService.getInstance();\n\t\t},\n\t\tgetSearchService(): SearchService\n\t\t{\n\t\t\treturn SearchService.getInstance();\n\t\t},\n\t\tchangeSpaceListStateHandler(event)\n\t\t{\n\t\t\tconst state = event.data;\n\n\t\t\tthis.changeSpaceListState(state);\n\t\t},\n\t\tchangeSpaceListState(state)\n\t\t{\n\t\t\tif (state === SpacesListStates.expanded && !Dom.hasClass(this.listNode, '--fixed'))\n\t\t\t{\n\t\t\t\tDom.addClass(this.listNode, '--fixed');\n\t\t\t}\n\t\t\telse if (Dom.hasClass(this.listNode, '--fixed'))\n\t\t\t{\n\t\t\t\tDom.removeClass(this.listNode, '--fixed');\n\t\t\t}\n\n\t\t\tthis.$store.dispatch('setSpacesListState', state);\n\t\t},\n\t\tisSpaceAddFormShownHandler(isSpaceAddFormShown: boolean)\n\t\t{\n\t\t\tthis.isSpaceAddFormShownInRecentList = isSpaceAddFormShown;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"sn-spaces__list-wrapper\">\n\t\t\t<RecentHeader\n\t\t\t\tv-if=\"mode === modes.recent\"\n\t\t\t\t:canCreateGroup=\"canCreateGroup\"\n\t\t\t\t@changeMode=\"setMode\"\n\t\t\t/>\n\t\t\t<SearchHeader\n\t\t\t\tv-if=\"mode === modes.search || mode === modes.recentSearch\"\n\t\t\t\t@changeMode=\"setMode\"\n\t\t\t/>\n\t\t\t<SpaceList\n\t\t\t\tv-show=\"mode === modes.recent\"\n\t\t\t\t@isSpaceAddFormShown=\"isSpaceAddFormShownHandler\"\n\t\t\t\t:isShown=\"mode === modes.recent\"\n\t\t\t\t:mode=\"modes.recent\"\n\t\t\t\t:spaces=\"recentSpaces\"\n\t\t\t\t:spaceInvitations=\"spaceInvitations\"\n\t\t\t\t:canCreateGroup=\"canCreateGroup\"\n\t\t\t\t:spacesCountForLoad=\"recentSpacesCountForLoad\"\n\t\t\t\t:serviceInstance=\"getRecentService()\"\n\t\t\t/>\n\t\t\t<SpaceList\n\t\t\t\tv-show=\"mode === modes.recentSearch\"\n\t\t\t\t:isShown=\"mode === modes.recentSearch\"\n\t\t\t\t:mode=\"modes.recentSearch\"\n\t\t\t\t:spaces=\"recentSearchSpaces\"\n\t\t\t\t:canCreateGroup=\"canCreateGroup\"\n\t\t\t\t:spacesCountForLoad=\"recentSearchSpacesCountForLoad\"\n\t\t\t\t:serviceInstance=\"getRecentSearchService()\"\n\t\t\t\t:subtitle=\"loc('SOCIALNETWORK_SPACES_LIST_RECENT_SEARCH_LIST_TITLE')\"\n\t\t\t/>\n\t\t\t<SpaceList\n\t\t\t\tv-show=\"mode === modes.search\"\n\t\t\t\t:isShown=\"mode === modes.search\"\n\t\t\t\t:mode=\"modes.search\"\n\t\t\t\t:spaces=\"searchSpaces\"\n\t\t\t\t:canCreateGroup=\"canCreateGroup\"\n\t\t\t\t:spacesCountForLoad=\"searchSpacesCountForLoad\"\n\t\t\t\t:serviceInstance=\"getSearchService()\"\n\t\t\t\t:subtitle=\"loc('SOCIALNETWORK_SPACES_LIST_SEARCH_LIST_TITLE')\"\n\t\t\t/>\n\t\t</div>\n\t\t<CollapsedModeToggleBlock />\n\t`,\n};\n","import { EventEmitter } from 'main.core.events';\nimport { EventTypes } from '../const/event';\n\nexport class PullRequests extends EventEmitter\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\n\t\tthis.setEventNamespace('BX.Socialnetwork.Spaces.List.PullRequests');\n\t}\n\n\tgetModuleId(): string\n\t{\n\t\treturn 'socialnetwork';\n\t}\n\n\tgetMap(): Object\n\t{\n\t\treturn {\n\t\t\tworkgroup_pin_changed: this.#pinChanged.bind(this),\n\t\t\tuser_spaces_counter: this.#updateCounters.bind(this),\n\t\t\tworkgroup_update: this.#onChangeSpace.bind(this),\n\t\t\tspace_user_role_change: this.#onChangeUserRole.bind(this),\n\t\t\tworkgroup_subscribe_changed: this.#onChangeSubscription.bind(this),\n\t\t};\n\t}\n\n\t#pinChanged(data): void\n\t{\n\t\tthis.emit(EventTypes.pinChanged, {\n\t\t\tspaceId: data.GROUP_ID,\n\t\t\tisPinned: data.ACTION === 'pin',\n\t\t});\n\t}\n\n\t#updateCounters(data): void\n\t{\n\t\tthis.emit(EventTypes.updateCounters, data);\n\t}\n\n\t#onChangeSpace(data): void\n\t{\n\t\tconst params = data.params;\n\t\tthis.emit(EventTypes.changeSpace, {\n\t\t\tspaceId: params.GROUP_ID,\n\t\t});\n\t}\n\n\t#onChangeUserRole(data): void\n\t{\n\t\tthis.emit(EventTypes.changeUserRole, {\n\t\t\tspaceId: data.GROUP_ID,\n\t\t\tuserId: data.USER_ID,\n\t\t});\n\t}\n\n\t#onChangeSubscription(data): void\n\t{\n\t\tthis.emit(EventTypes.changeSubscription, {\n\t\t\tspaceId: data.GROUP_ID,\n\t\t\tuserId: data.USER_ID,\n\t\t});\n\t}\n}","import { Store } from './store/store';\nimport { LinkManager } from './util/link-manager';\nimport { BitrixVue, VueCreateAppResult } from 'ui.vue3';\nimport { BaseComponent } from './components/base-component';\nimport { RecentService } from './api/load/recent-service';\nimport { PullRequests } from './pull/pull-requests';\nimport { EventTypes } from './const/event';\nimport { Modes } from './const/mode';\nimport { RecentSearchService } from './api/load/recent-search-service';\nimport { BaseEvent } from 'main.core.events';\nimport { PULL as Pull } from 'pull.client';\n\nimport type { SpaceModel } from './model/space-model';\nimport type { InvitationModel } from './model/invitation-model';\nimport { Client } from './api/client';\n\ntype ListOptions = {\n\trecentSpaceIds: number[],\n\tspaces: SpaceModel[],\n\tinvitationSpaceIds: number[],\n\tinvitations: InvitationModel[],\n\tavatarColors: string[],\n\tselectedSpaceId: number,\n\tpathToUserSpace: string,\n\tpathToGroupSpace: string,\n\tfilterMode: string,\n\tspacesListMode: string,\n\tcanCreateGroup: boolean,\n\tcurrentUserId: number,\n};\n\nexport class List\n{\n\t#initialOptions:ListOptions;\n\t#target: HTMLElement;\n\t#application: VueCreateAppResult;\n\n\tconstructor(options: ListOptions)\n\t{\n\t\tthis.#initialOptions = options;\n\t}\n\n\tcreate(target: HTMLElement)\n\t{\n\t\tthis.#target = target;\n\t\tthis.#initLinkManager();\n\t\tthis.#initServices();\n\t\tthis.#createApplication();\n\t}\n\n\t#initLinkManager()\n\t{\n\t\tLinkManager.groupPath = this.#initialOptions.pathToGroupSpace;\n\t\tLinkManager.commonSpacePath = this.#initialOptions.pathToUserSpace;\n\t}\n\n\t#initServices()\n\t{\n\t\tRecentService.getInstance().setSelectedSpaceId(parseInt(this.#initialOptions.selectedSpaceId, 10));\n\t}\n\n\t#createApplication()\n\t{\n\t\tconst recentSpaceIds = this.#initialOptions.recentSpaceIds;\n\t\tconst invitationSpaceIds = this.#initialOptions.invitationSpaceIds;\n\t\tconst invitations = this.#initialOptions.invitations;\n\t\tconst spaces = this.#initialOptions.spaces;\n\t\tconst avatarColors = this.#initialOptions.avatarColors;\n\t\tconst selectedFilterModeType = this.#initialOptions.filterMode;\n\t\tconst spacesListState = this.#initialOptions.spacesListMode;\n\t\tconst canCreateGroup = this.#initialOptions.canCreateGroup;\n\t\tconst currentUserId = this.#initialOptions.currentUserId;\n\n\t\tthis.#application = BitrixVue.createApp(\n\t\t\t{\n\t\t\t\tname: 'SpacesList',\n\t\t\t\tprops: {\n\t\t\t\t\tinitialSpaces: Array,\n\t\t\t\t\tselectedFilterModeType: String,\n\t\t\t\t\tspacesListState: String,\n\t\t\t\t\tcanCreateGroup: Boolean,\n\t\t\t\t\trecentSpaceIds: Array,\n\t\t\t\t\tinvitations: Array,\n\t\t\t\t\tinvitationSpaceIds: Array,\n\t\t\t\t},\n\t\t\t\tcomponents: {\n\t\t\t\t\tBaseComponent,\n\t\t\t\t},\n\t\t\t\tmethods: {\n\t\t\t\t\tcastArrayValuesToInt(array: Array): Array\n\t\t\t\t\t{\n\t\t\t\t\t\treturn array.map((value) => parseInt(value, 10));\n\t\t\t\t\t},\n\t\t\t\t\tsubscribeToPull()\n\t\t\t\t\t{\n\t\t\t\t\t\tconst pullRequests = new PullRequests();\n\t\t\t\t\t\tpullRequests.subscribe(EventTypes.pinChanged, this.pinChangedHandler);\n\t\t\t\t\t\tpullRequests.subscribe(EventTypes.updateCounters, this.updateCountersHandler);\n\t\t\t\t\t\tpullRequests.subscribe(EventTypes.changeSpace, this.updateSpaceData);\n\t\t\t\t\t\tpullRequests.subscribe(EventTypes.changeUserRole, this.updateSpaceUserData);\n\t\t\t\t\t\tpullRequests.subscribe(EventTypes.changeSubscription, this.updateSpaceUserData);\n\t\t\t\t\t\tPull.subscribe(pullRequests);\n\t\t\t\t\t},\n\t\t\t\t\tpinChangedHandler(event)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.pinSpace(event.getData().spaceId, event.getData().isPinned);\n\t\t\t\t\t},\n\t\t\t\t\tpinSpace(spaceId, isPinned)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$store.dispatch('pinSpace', { spaceId, isPinned });\n\t\t\t\t\t},\n\t\t\t\t\tupdateCountersHandler(event: BaseEvent)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (event.data.userId && parseInt(event.data.userId, 10) === currentUserId)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.$store.dispatch('updateCounters', event.data);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tasync updateSpaceData(event: BaseEvent)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (event.data.spaceId)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconst requestData = await Client.loadSpaceData(event.data.spaceId);\n\t\t\t\t\t\t\tthis.$store.dispatch('updateSpaceData', requestData);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tasync updateSpaceUserData(event: BaseEvent)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (event.data.userId && parseInt(event.data.userId, 10) === currentUserId)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconst requestData = await Client.loadSpaceData(event.data.spaceId);\n\t\t\t\t\t\t\tif (requestData.space)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.$bitrix.eventEmitter.emit(`onSpaceUpdate_${requestData.space.id}`, requestData.space);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthis.$store.dispatch('updateSpaceData', requestData);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tbeforeCreate(): void\n\t\t\t\t{\n\t\t\t\t\tthis.$bitrix.Application.set(this);\n\t\t\t\t},\n\t\t\t\tcreated()\n\t\t\t\t{\n\t\t\t\t\tthis.$store.dispatch('setSpaces', this.initialSpaces);\n\t\t\t\t\tthis.$store.dispatch('setRecentSpaceIds', this.castArrayValuesToInt(this.recentSpaceIds));\n\t\t\t\t\tthis.$store.dispatch('setInvitationSpaceIds', this.castArrayValuesToInt(this.invitationSpaceIds));\n\t\t\t\t\tthis.$store.dispatch('setInvitations', this.invitations);\n\t\t\t\t\tthis.$store.dispatch('setAvatarColors', avatarColors);\n\n\t\t\t\t\tthis.$store.dispatch('setSelectedFilterModeType', this.selectedFilterModeType);\n\t\t\t\t\tthis.$store.dispatch('setSpacesListState', this.spacesListState);\n\n\t\t\t\t\tthis.$store.dispatch('setCanCreateGroup', this.canCreateGroup);\n\t\t\t\t\tthis.subscribeToPull();\n\t\t\t\t},\n\t\t\t\tmounted()\n\t\t\t\t{\n\t\t\t\t\tthis.$bitrix.eventEmitter.emit(EventTypes.showLoader, Modes.recentSearch);\n\t\t\t\t\tRecentSearchService.getInstance().loadSpaces().then((result) => {\n\t\t\t\t\t\tthis.$store.dispatch('addSpacesToView', { mode: Modes.recentSearch, spaces: result });\n\t\t\t\t\t\tthis.$bitrix.eventEmitter.emit(EventTypes.hideLoader, Modes.recentSearch);\n\t\t\t\t\t}).catch(() => {});\n\t\t\t\t},\n\t\t\t\ttemplate: `\n\t\t\t\t\t<BaseComponent/>\n\t\t\t\t`,\n\t\t\t},\n\t\t\t{\n\t\t\t\tinitialSpaces: spaces,\n\t\t\t\tselectedFilterModeType,\n\t\t\t\tspacesListState,\n\t\t\t\tcanCreateGroup,\n\t\t\t\trecentSpaceIds,\n\t\t\t\tinvitationSpaceIds,\n\t\t\t\tinvitations,\n\t\t\t},\n\t\t);\n\t\tthis.#application.use(Store);\n\t\tthis.#application.mount(this.#target);\n\t}\n}\n"],"names":["AddFormStore","state","avatarColors","avatarColor","actions","setAvatarColors","store","colors","commit","setAvatarColor","color","mutations","getters","previousAvatarColor","Client","loadSpaces","data","componentName","actionName","response","ajax","runComponentAction","mode","reloadSpaces","searchSpaces","loadRecentSearchSpaces","addSpaceToRecentSearch","spaceId","loadSpaceData","RecentService","hasMoreSpacesToLoad","getInstance","instance","setSelectedSpaceId","selectedSpaceId","getSelectedSpaceId","fields","loadedSpacesCount","filterMode","searchString","result","canLoadSpaces","Modes","Object","freeze","recent","recentSearch","search","FilterModeTypes","my","other","all","FilterModes","type","nameMessageId","descriptionMessageId","SpaceViewModeTypes","open","closed","secret","SpaceViewModes","SpaceUserRoles","nonMember","applicant","invited","member","Helper","buildSpaces","spaces","map","spaceData","id","parseInt","name","isPinned","isSelected","dateActivity","Date","dateActivityTimestamp","lastActivityDescription","avatar","visibilityType","counter","lastSearchDate","lastSearchDateTimestamp","userRole","follow","buildInvitations","invitations","invitationData","message","invitationDateTimestamp","invitationDate","getStringCapitalized","string","toUpperCase","slice","getModelNameByListViewMode","doSpaceUserRoleFitsFilterMode","includes","MainStore","Map","recentListSpaceIds","Set","searchResultFromServerSpaceIds","searchResultFromLoadedSpaceIds","invitationSpaceIds","recentSearchListSpaceIds","selectedFilterModeType","spacesListState","canCreateGroup","setSpaces","setInvitations","setCanCreateGroup","setRecentSpaceIds","spaceIds","setInvitationSpaceIds","spacesIds","setRecentSearchSpaceIds","addSpaces","setSelectedFilterModeType","setSpacesListState","setLocalSearchResult","clearSpacesViewByMode","storeHelper","modelName","modelNameCapitalized","addSpacesToView","changedModel","changedModelCapitalized","addedSpaceIds","space","newSpaceIds","pinSpace","changeUserRole","deleteInvitationFromStore","deleteSpaceFromStore","updateCounters","userId","total","BX","ready","getClass","forEach","leftMenuCounters","sonet_total","metrics","countersLiveFeedTotal","Intranet","LeftMenu","tasksTotal","countersTasksTotal","calendarTotal","countersCalendarTotal","workGroupTotal","countersWorkGroupRequestTotal","lifeFeedTotal","updateSpaceData","isInvitation","invitation","helper","pop","lastRecentSpace","recentSpaces","length","doDateActivityFits","doUserRoleFitsFilterMode","clear","set","setRecentListSpaceIds","addRecentListSpaceId","add","removeRecentListSpaceId","delete","addInvitations","setSearchResultFromServerSpaceIds","setSearchResultFromLoadedSpaceIds","setRecentSearchListSpaceIds","get","deleteSpaceById","deleteInvitationBySpaceId","updateCounter","discussionsTotal","menu","Main","interfaceButtonsManager","getById","btn","tasksBtn","calendarBtn","discussionBtn","values","spaceInvitations","spacesMap","spaceInvitationFields","sort","a","b","recentSpacesUnordered","unsortedRecentSpaces","filter","has","pinnedSpacesFromRecent","commonSpaceFromRecent","find","selectedSpaceFromRecent","otherSpacesFromRecent","push","searchResultIds","spacesLoadedByCurrentSearchQueryCount","size","recentSearchSpaces","unsortedRecentSearchSpaces","recentSpacesCountForLoad","recentSearchSpacesCountForLoad","searchSpacesCountForLoad","Store","createStore","modules","addForm","main","LinkManager","getSpaceLink","path","commonSpacePath","groupPath","replace","SpacesListStates","default","collapsed","expanded","EventTypes","showLoader","hideLoader","tryToLoadSpacesIfHasNoScrollbar","spaceListScroll","spaceListShown","showUpperSpaceAddForm","showBtnToggleBlock","hideSpaceAddForm","changeSpace","changeSubscription","pinChanged","changeSpaceListState","POPUP_CONTAINER_PREFIX","BasePopup","props","String","required","config","emits","computed","popupContainer","created","getPopupInstance","show","mounted","adjustPosition","forceBindPosition","position","getPopupConfig","bindOptions","beforeUnmount","closePopup","methods","PopupManager","getPopupById","destroy","Popup","getDefaultConfig","className","autoHide","animation","cacheable","events","onPopupClose","bind","defaultConfig","modifiedOptions","defaultClassName","offsetTop","Type","isNumber","$emit","enableAutoHide","setAutoHide","disableAutoHide","template","PopupMenuOption","option","Boolean","active","iconClass","dataId","PopupMenuButton","doShowIcon","isStringFilled","class","PopupMenuContent","components","options","Array","selectedOption","hint","button","doShowHint","doShowButton","text","onChangeSelectedOption","newSelectedOption","onPopupMenuButtonClick","POPUP_ID","PopupMenu","bindElement","context","width","closeIcon","closeByEsc","overlay","padding","RecentHeader","showModePopup","isSpaceListScrolled","filterModes","scrollClass","$store","title","selectedType","selectedMode","loc","selectFilterModeButtonIconModifier","popupMenuOptions","description","popupMenuButton","$bitrix","eventEmitter","subscribe","handleListChanges","unsubscribe","phraseCode","$Bitrix","Loc","getMessage","openPopup","event","enableSearch","onChangeSelectedFilterMode","recentService","emit","dispatch","onCreateSpaceButtonClick","showBtnArrow","MINIMUM_QUERY_LENGTH_FOR_LOAD","SearchService","SearchHeader","searchQuery","startSearchDebounced","Runtime","debounce","startSearch","mapGetters","closeSearch","onInputChange","searchResult","toLowerCase","setTimeout","$refs","input","focus","ContextItem","constructor","emitter","EventEmitter","getEmitter","Pin","create","onclick","menuItem","then","getMenuWindow","close","resultMessage","resultMode","setText","runAction","switcher","ID","Follow","isFollowed","Open","href","setPath","ContextMenu","pinMessage","followMessage","openMessage","createMenu","MenuManager","items","getItems","toggle","collection","getSpaceId","pin","ContextMenuCollection","item","getMenuById","DateFormatter","formatDate","timestamp","date","format","DateTimeFormat","getFormat","getTime","toLocaleDateString","currentWeekNumber","weekNumber","getFullYear","Avatar","isSecret","secretSpaceImage","avatarModel","avatarClass","iconStyle","SpaceContent","showAvatar","modes","spaceUserRoles","doShowSuccessButton","spaceModel","doShowCounter","isApplicantButtonsShown","doShowPin","doShowJoinButton","doShowPendingButton","isFollowing","spaceDescription","doShowSpaceVisibilityType","getVisibilityTypeName","isCommon","onSpaceUpdate","spaceViewModeNameMessageId","spaceViewMode","isSecretSpace","formatCounter","toString","counterClass","showSuccessButton","wasUserApplicant","isUserMember","onJoinButtonClick","preventDefault","params","groupId","confirmationNeeded","error","console","log","onPendingButtonClick","onAcceptedButtonClick","acceptInvitationButtonClickHandler","isSuccess","declineInvitationButtonClickHandler","PopupShortSpace","link","height","heightPopup","offsetLeft","left","classModifiers","join","closePopupShortSpace","Space","popupShortSpaceOptions","widthItem","isRecentMode","getBoundingClientRect","getPinMessage","getFollowMessage","getOpenMessage","onSpaceClick","onSpaceContextMenuClick","currentTarget","hoverElement","Event","document","target","contains","KeyboardCodes","enter","SpaceAddForm","spaceViewModes","spaceViewModeTypes","viewMode","image","isFocusedOnNameInput","showViewModePopup","wasCreateGroupRequestSent","doShowNameAlreadyExistsError","isDataValidated","confirmButtonClass","selectedViewModeOptionName","nameInputModifier","isNameInputReadOnly","spaceAddFormNameInput","handleAutoHide","handleKeyDown","chooseRandomAvatarColor","unmounted","unbind","openViewModePopup","newOption","chooseSpaceImage","avatarEditor","getAvatarEditor","AvatarEditor","enableCamera","file","getCompatData","groupImage","src","URL","createObjectURL","Dom","style","groupImageContainer","onAddSpaceClickHandler","addSpace","isArrayFilled","Math","floor","random","trim","formData","FormData","append","location","errorResponse","errors","code","shouldHideForm","keyCode","notVisible","spaceAddForm","offsetHeight","clickOnSpace","closest","clickOnSelf","avatarPopupShown","popup","isShown","viewModePopupShown","anyPopupShown","formDataChanged","isNameFilled","isViewModeChanged","isImageChosen","SpaceListAddButton","Loader","loader","getLoaderInstance","destroyLoader","BaseLoader","getLoaderConfig","root","offset","top","PAGINATION_OFFSET","SpaceList","isScrollLoading","isLoading","doShowLowerSpaceAddForm","doShowUpperSpaceAddForm","skeletonItemsAmount","spacesCountForLoad","Number","serviceInstance","subtitle","tryToLoadSpacesIfHasNoScrollbarHandler","showLoaderHandler","hideLoaderHandler","showUpperSpaceAddFormHandler","hideSpaceAddFormHandler","service","hasScrollbar","list","scrollHeight","clientHeight","loadingClass","doShowSubtitle","doShowSpaceListAddButton","isSpaceAddFormShown","doShowInvitations","listState","watch","scrollToTop","scrollTop","isProperMode","showLowerSpaceAddForm","onScroll","listRemainingSpace","listScroll","isScrolledToBottom","catch","RecentSearchService","MAX_QUANTITY_SHOW_BTN_TOGGLE_BLOCK","CollapsedModeToggleBlock","dataSpacesContent","getElementById","counterImpressionsBtnShowToggleBlock","showBtnShowToggleBlock","showBtnToggleBlockHandler","isShowHintBtn","btnClassName","localStorage","hideBtnToggleBlockHandler","hideHintBtn","toggleList","saveState","removeClass","addClass","BaseComponent","listNode","isSpaceAddFormShownInRecentList","doExpandCollapsedList","isCollapsedState","isSearchMode","doCollapseExpandedList","isExpandedState","changeSpaceListStateHandler","setMode","getRecentService","getRecentSearchService","getSearchService","hasClass","isSpaceAddFormShownHandler","PullRequests","setEventNamespace","getModuleId","getMap","workgroup_pin_changed","user_spaces_counter","workgroup_update","space_user_role_change","workgroup_subscribe_changed","GROUP_ID","ACTION","USER_ID","List","pathToGroupSpace","pathToUserSpace","recentSpaceIds","spacesListMode","currentUserId","BitrixVue","createApp","initialSpaces","castArrayValuesToInt","array","value","subscribeToPull","pullRequests","pinChangedHandler","updateCountersHandler","updateSpaceUserData","Pull","getData","requestData","beforeCreate","Application","use","mount"],"mappings":"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"}