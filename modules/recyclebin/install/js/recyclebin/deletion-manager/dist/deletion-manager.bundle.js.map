{"version":3,"file":"deletion-manager.bundle.js","sources":["../src/panel.js","../src/state.js","../src/progress.js","../src/deletion-manager.js"],"sourcesContent":["import { Dom, Loc, Tag, Text, Type } from 'main.core';\nimport { ProgressBar, ProgressBarOptions } from 'ui.progressbar';\nimport { Messages } from './deletion-manager';\nimport 'ui.design-tokens';\n\ntype Params = {\n\tentityIds: number[];\n\tcontainerId: string;\n\tonAfterTextClick?: Function;\n\tmessages: Messages;\n};\n\nexport class Panel\n{\n\t#entityIds: number[] = [];\n\t#containerId: string;\n\t#progressBar: ProgressBar;\n\t#wrapper: ?HTMLElement;\n\t#messages: Messages;\n\n\tconstructor(params: Params)\n\t{\n\t\tconst { entityIds, containerId, onAfterTextClick, messages } = params;\n\t\tthis.#entityIds = entityIds;\n\t\tthis.#containerId = containerId;\n\t\tthis.#messages = messages;\n\n\t\tconst options = this.#getProgressBarOptions();\n\t\tif (Type.isFunction(onAfterTextClick))\n\t\t{\n\t\t\toptions.clickAfterCallback = onAfterTextClick;\n\t\t}\n\n\t\tthis.#progressBar = new ProgressBar(options);\n\t}\n\n\t#getProgressBarOptions(): ProgressBarOptions\n\t{\n\t\tconst options = {\n\t\t\tvalue: 0,\n\t\t\tmaxValue: 0,\n\t\t\tstatusType: ProgressBar.Status.COUNTER,\n\t\t\ttextBefore: Loc.getMessage(this.#messages.textBefore),\n\t\t\ttextAfter: Loc.getMessage(this.#messages.textAfter),\n\t\t\tcolorBar: '#ebcd2c',\n\t\t\tcolorTrack: '#f2e59e',\n\t\t};\n\n\t\tif (Type.isArrayFilled(this.#entityIds))\n\t\t{\n\t\t\toptions.maxValue = this.#entityIds.length;\n\t\t}\n\n\t\treturn options;\n\t}\n\n\trender(): void\n\t{\n\t\tDom.append(this.#getWrapperElement(), this.#getContainerElement());\n\n\t\tthis.#progressBar.renderTo(this.#wrapper);\n\t}\n\n\t#getWrapperElement(): HTMLElement\n\t{\n\t\tif (!this.#wrapper)\n\t\t{\n\t\t\tthis.#wrapper = Tag.render`<div class=\"recyclebin-list-grid-panel\"></div>`;\n\t\t}\n\n\t\treturn this.#wrapper;\n\t}\n\n\tsetProgress(value: number, maxValue: ?number = null): Panel\n\t{\n\t\tif (maxValue !== null)\n\t\t{\n\t\t\tthis.#progressBar.setMaxValue(maxValue);\n\t\t}\n\n\t\tthis.#progressBar.update(value);\n\n\t\treturn this;\n\t}\n\n\tshowResult(errors: []): Panel\n\t{\n\t\tlet textBefore = '';\n\n\t\tconst successCount = this.#progressBar.getValue() - errors.length;\n\n\t\tif (successCount > 0)\n\t\t{\n\t\t\ttextBefore += Loc.getMessage(\n\t\t\t\tthis.#messages.successCount,\n\t\t\t\t{ '#COUNT#': successCount },\n\t\t\t);\n\t\t}\n\n\t\tconst failedCount = errors.length;\n\n\t\tif (failedCount > 0)\n\t\t{\n\t\t\tif (textBefore !== '')\n\t\t\t{\n\t\t\t\ttextBefore += '. ';\n\t\t\t}\n\n\t\t\ttextBefore += Loc.getMessage(\n\t\t\t\tthis.#messages.failedCount,\n\t\t\t\t{ '#COUNT#': failedCount },\n\t\t\t);\n\n\t\t\tthis.#showErrors(errors);\n\t\t}\n\n\t\tthis.#progressBar\n\t\t\t.setTextBefore(textBefore)\n\t\t\t.setClickAfterCallback(() => this.close())\n\t\t\t.setTextAfter(Loc.getMessage('RECYCLEBIN_DM_PROGRESSBAR_CLOSE'))\n\t\t;\n\n\t\treturn this;\n\t}\n\n\t#showErrors(errors: []): void\n\t{\n\t\terrors.forEach((error) => {\n\t\t\tDom.append(this.#createErrorElement(error), this.#wrapper);\n\t\t});\n\t}\n\n\t#createErrorElement(error: Object): HTMLElement\n\t{\n\t\tconst { title } = error.customData.info;\n\t\tconst { message } = error;\n\n\t\treturn Tag.render`<div class=\"recyclebin-list-grid-panel-row\">${Text.encode(title)}: ${Text.encode(message)}</div>`;\n\t}\n\n\tclose(force: boolean = false): void\n\t{\n\t\tthis.hide();\n\n\t\tif (force)\n\t\t{\n\t\t\tthis.remove();\n\n\t\t\treturn;\n\t\t}\n\n\t\tsetTimeout(() => this.remove(), 400);\n\t}\n\n\tremove(): void\n\t{\n\t\tDom.remove(this.#wrapper);\n\t}\n\n\thide(): void\n\t{\n\t\tDom.addClass(this.#wrapper, '--hidden');\n\t}\n\n\t#getContainerElement(): HTMLElement\n\t{\n\t\treturn document.getElementById(this.#containerId);\n\t}\n}\n","export const State = {\n\tintermediate: 0,\n\trunning: 1,\n\tcompleted: 2,\n\tstopped: 3,\n\terror: 4,\n};\n","import { ajax as Ajax, Runtime, Type } from 'main.core';\nimport { BaseEvent, EventEmitter } from 'main.core.events';\nimport { Panel } from './panel';\nimport { State } from './state';\n\ntype Settings = {\n\taction: string;\n\tpanel: Panel;\n\temitter: EventEmitter;\n\tparams?: Params;\n\ttimeout?: number;\n}\n\ntype Params = {\n\tentityIds?: number[];\n\tmoduleId?: string;\n}\n\nexport class Progress\n{\n\t#id: string;\n\t#settings: Settings;\n\t#params: Params;\n\t#requestIsRunning: boolean;\n\t#state: number;\n\t#errors = [];\n\t#processedItemCount: number;\n\t#totalItemCount: number;\n\temitter: EventEmitter;\n\t#panel: Panel;\n\t#action: string;\n\n\tconstructor(id: string, settings: Settings)\n\t{\n\t\tthis.#id = id;\n\t\tthis.#settings = settings;\n\t\tthis.#action = settings.action;\n\t\tthis.#panel = settings.panel;\n\t\tthis.emitter = settings.emitter;\n\t\tthis.#params = settings.params ?? {};\n\n\t\tthis.startRequest = this.startRequest.bind(this);\n\t\tthis.closePanel = this.closePanel.bind(this);\n\t\tthis.onRequestSuccess = this.onRequestSuccess.bind(this);\n\t\tthis.onRequestFailure = this.onRequestFailure.bind(this);\n\t}\n\n\tsetParams(params: Params): Progress\n\t{\n\t\tthis.#params = Runtime.merge(this.#params, params);\n\n\t\treturn this;\n\t}\n\n\trun(): Progress\n\t{\n\t\tif (this.#state === State.stopped)\n\t\t{\n\t\t\tthis.#state = State.intermediate;\n\t\t}\n\n\t\tthis.startRequest();\n\t}\n\n\tstartRequest(): void\n\t{\n\t\tif (this.#state === State.stopped)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.#requestIsRunning)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.#requestIsRunning = true;\n\t\tthis.#state = State.running;\n\n\t\tconst data = {\n\t\t\tparams: Type.isPlainObject(this.#params) ? this.#params : {},\n\t\t};\n\n\t\tAjax.runAction(\n\t\t\tthis.#action,\n\t\t\t{\n\t\t\t\tdata,\n\t\t\t},\n\t\t).then(\n\t\t\t(result) => this.onRequestSuccess(result.data ?? {}),\n\t\t\t(result) => this.onRequestFailure(result.data ?? {}),\n\t\t).catch((error) => {\n\t\t\tconsole.error(error);\n\t\t});\n\t}\n\n\tonRequestSuccess(result): void\n\t{\n\t\tthis.#requestIsRunning = false;\n\t\tif (this.#state === State.stopped)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst { status, errors, processedItems, totalItems } = result;\n\t\tif (status === 'ERROR')\n\t\t{\n\t\t\tthis.#state = State.error;\n\t\t}\n\t\telse if (status === 'COMPLETED')\n\t\t{\n\t\t\tthis.#state = State.completed;\n\t\t}\n\n\t\tif (this.#state === State.error)\n\t\t{\n\t\t\tconsole.error(this.#errors);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.#processedItemCount = processedItems ?? 0;\n\t\t\tthis.#totalItemCount = totalItems ?? 0;\n\t\t}\n\n\t\tif (Type.isArrayFilled(errors))\n\t\t{\n\t\t\tthis.#errors = [...this.#errors, ...errors];\n\t\t}\n\n\t\tthis.refresh();\n\t\tif (this.#state === State.running)\n\t\t{\n\t\t\tsetTimeout(this.startRequest, this.getTimeout());\n\t\t}\n\t\telse if (this.#state === State.completed && !Type.isArrayFilled(this.#errors))\n\t\t{\n\t\t\tsetTimeout(this.closePanel, this.getTimeout());\n\t\t}\n\n\t\tthis.emitStateChange();\n\t}\n\n\tonRequestFailure(data): void\n\t{\n\t\tthis.#requestIsRunning = false;\n\n\t\tthis.#state = State.error;\n\n\t\tthis.refresh();\n\n\t\tthis.emitStateChange();\n\t}\n\n\temitStateChange(): void\n\t{\n\t\tthis.emitter.emit('ON_AUTORUN_PROCESS_STATE_CHANGE', new BaseEvent({\n\t\t\tdata: {\n\t\t\t\tstate: this.#state,\n\t\t\t\tprocessedItemCount: this.#processedItemCount,\n\t\t\t\ttotalItemCount: this.#totalItemCount,\n\t\t\t\terrors: this.#errors,\n\t\t\t},\n\t\t}));\n\t}\n\n\trefresh(): void\n\t{\n\t\tif (this.#state === State.running)\n\t\t{\n\t\t\tthis.#panel.setProgress(this.#processedItemCount, this.#totalItemCount);\n\t\t}\n\t\telse if (this.#state === State.completed)\n\t\t{\n\t\t\tthis.#panel\n\t\t\t\t.setProgress(this.#processedItemCount, this.#totalItemCount)\n\t\t\t\t.showResult(this.#errors)\n\t\t\t;\n\t\t}\n\t\telse if (this.#state === State.stopped)\n\t\t{\n\t\t\tthis.closePanel();\n\t\t}\n\t}\n\n\tgetTimeout(): number\n\t{\n\t\tconst DEFAULT_TIMEOUT = 2000;\n\n\t\treturn Type.isNumber(this.#settings.timeout) ? this.#settings.timeout : DEFAULT_TIMEOUT;\n\t}\n\n\treset(): void\n\t{\n\t\tthis.#errors = [];\n\t\tthis.#processedItemCount = 0;\n\t\tthis.#totalItemCount = 0;\n\n\t\tthis.refresh();\n\t}\n\n\tclosePanel(): void\n\t{\n\t\tthis.#panel.close();\n\t}\n}\n","import { ajax as Ajax, Cache, Dom, Loc, Type } from 'main.core';\nimport { MemoryCache } from 'main.core.cache';\nimport { EventEmitter } from 'main.core.events';\nimport { Panel } from './panel';\nimport { Progress } from './progress';\nimport { State } from './state';\nimport './css/style.css';\n\ntype Settings = {\n\tmoduleId: string;\n\tcontainerId: string;\n}\n\nexport type Messages = {\n\ttextBefore: string;\n\ttextAfter: string;\n\tsuccessCount: string;\n\tfailedCount: string;\n}\n\n/**\n * @memberOf BX.Recyclebin\n */\nexport class DeletionManager\n{\n\tstatic items: MemoryCache = new Cache.MemoryCache();\n\tid: string = null;\n\t#isRunning: boolean = false;\n\t#entityIds: number[] = [];\n\t#hasLayout: boolean;\n\t#progress: Progress;\n\t#panel: Panel = null;\n\t#settings: Settings;\n\t#operationHash: ?string;\n\t#messages: Messages;\n\t#action: string;\n\temitter: EventEmitter;\n\n\tstatic getInstance(id: string, settings: Settings): DeletionManager\n\t{\n\t\tif (!DeletionManager.items.has(id))\n\t\t{\n\t\t\tconst instance = new DeletionManager(id, settings);\n\t\t\tDeletionManager.items.set(id, instance);\n\t\t}\n\n\t\treturn DeletionManager.items.get(id);\n\t}\n\n\tconstructor(id: string, settings)\n\t{\n\t\tthis.id = id;\n\t\tthis.#settings = settings;\n\n\t\tthis.emitter = new EventEmitter();\n\t\tthis.emitter.setEventNamespace('Recyclebin.DeletionManager');\n\n\t\tthis.progressChangeHandler = this.progressChangeHandler.bind(this);\n\t}\n\n\tsetMessages(messages: Messages): void\n\t{\n\t\tthis.#messages = messages;\n\t}\n\n\t#setAction(action: string): void\n\t{\n\t\tthis.#action = action;\n\t}\n\n\tgetId(): string\n\t{\n\t\treturn this.id;\n\t}\n\n\tsetEntityIds(entityIds: number[]): DeletionManager\n\t{\n\t\tthis.#entityIds = entityIds;\n\n\t\treturn this;\n\t}\n\n\texecuteRestore(): void\n\t{\n\t\tif (this.isRunning())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.#setAction('restore');\n\n\t\tthis.layout();\n\t\tthis.run();\n\t}\n\n\texecuteDelete(): void\n\t{\n\t\tif (this.isRunning())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tBX.Recyclebin\n\t\t\t.confirm(\n\t\t\t\tLoc.getMessage('RECYCLEBIN_DM_CONFIRM_REMOVE_TITLE'),\n\t\t\t\tnull,\n\t\t\t\t{\n\t\t\t\t\tbuttonSet: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttext: Loc.getMessage('RECYCLEBIN_DM_CONFIRM_REMOVE_YES'),\n\t\t\t\t\t\t\ttype: 'green',\n\t\t\t\t\t\t\tcode: 'continue',\n\t\t\t\t\t\t\tdefault: true,\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t)\n\t\t\t.then(() => {\n\t\t\t\tthis.#setAction('delete');\n\t\t\t\tthis.layout();\n\t\t\t\tthis.run();\n\t\t\t})\n\t\t;\n\t}\n\n\tisRunning(): boolean\n\t{\n\t\treturn this.#isRunning;\n\t}\n\n\tlayout(): void\n\t{\n\t\tif (this.#hasLayout)\n\t\t{\n\t\t\tthis.clearLayout();\n\t\t}\n\n\t\tthis.#getPanel().render();\n\n\t\tthis.#hasLayout = true;\n\t}\n\n\trun(): void\n\t{\n\t\tif (this.#isRunning)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.#progress?.reset();\n\n\t\tthis.#isRunning = true;\n\n\t\tthis.enableGridFilter(false);\n\n\t\tconst params = {\n\t\t\tgridId: this.id,\n\t\t};\n\n\t\tif (Type.isArrayFilled(this.#entityIds))\n\t\t{\n\t\t\tparams.entityIds = this.#entityIds;\n\t\t}\n\n\t\tAjax.runAction(\n\t\t\tthis.#getPrepareActionPath(),\n\t\t\t{\n\t\t\t\tdata: {\n\t\t\t\t\tparams,\n\t\t\t\t},\n\t\t\t},\n\t\t).then((response) => {\n\t\t\tconst { data: { hash } } = response;\n\n\t\t\tif (!Type.isStringFilled(hash))\n\t\t\t{\n\t\t\t\tthis.reset();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.#operationHash = hash;\n\t\t\tthis.#getProgress()\n\t\t\t\t.setParams({ hash })\n\t\t\t\t.run()\n\t\t\t;\n\n\t\t\tthis.emitter.subscribe('ON_AUTORUN_PROCESS_STATE_CHANGE', this.progressChangeHandler);\n\t\t}).catch((error) => {\n\t\t\tconsole.error(error);\n\t\t});\n\t}\n\n\t#getPrepareActionPath(): string\n\t{\n\t\tconst path = 'recyclebin.api.DeletionManager';\n\t\tconst action = this.#action;\n\n\t\tif (action === 'delete')\n\t\t{\n\t\t\treturn `${path}.prepareDeletion`;\n\t\t}\n\n\t\tif (action === 'restore')\n\t\t{\n\t\t\treturn `${path}.prepareRestore`;\n\t\t}\n\n\t\tthrow new Error(`Unknown action: ${action}`);\n\t}\n\n\t#getProcessActionPath(): string\n\t{\n\t\tconst path = 'recyclebin.api.DeletionManager';\n\t\tconst action = this.#action;\n\n\t\tif (action === 'delete')\n\t\t{\n\t\t\treturn `${path}.processDeletion`;\n\t\t}\n\n\t\tif (action === 'restore')\n\t\t{\n\t\t\treturn `${path}.processRestore`;\n\t\t}\n\n\t\tthrow new Error(`Unknown action: ${action}`);\n\t}\n\n\tgetCancelActionPath(): string\n\t{\n\t\tconst path = 'recyclebin.api.DeletionManager';\n\t\tconst action = this.#action;\n\n\t\tif (action === 'delete')\n\t\t{\n\t\t\treturn `${path}.cancelDeletion`;\n\t\t}\n\n\t\tif (action === 'restore')\n\t\t{\n\t\t\treturn `${path}.cancelRestore`;\n\t\t}\n\n\t\tthrow new Error(`Unknown action: ${action}`);\n\t}\n\n\tgetOperationHash(): ?string\n\t{\n\t\treturn this.#operationHash;\n\t}\n\n\treset(clearLayout: boolean = true): void\n\t{\n\t\tthis.#operationHash = null;\n\t\tthis.#isRunning = false;\n\n\t\tthis.emitter.unsubscribe('ON_AUTORUN_PROCESS_STATE_CHANGE', this.progressChangeHandler);\n\n\t\tif (this.#hasLayout && clearLayout)\n\t\t{\n\t\t\twindow.setTimeout(this.clearLayout.bind(this), 2000);\n\t\t}\n\n\t\tthis.enableGridFilter(true);\n\t\tBX.Main.gridManager.reload(this.getId());\n\t}\n\n\tclearLayout(): void\n\t{\n\t\tthis.#panel.close(true);\n\n\t\tthis.#panel = null;\n\t\tthis.#progress = null;\n\n\t\tthis.#hasLayout = false;\n\t}\n\n\tcancel(): void\n\t{\n\t\tconst hash = this.getOperationHash();\n\n\t\tAjax.runAction(\n\t\t\tthis.getCancelActionPath(),\n\t\t\t{\n\t\t\t\tdata: {\n\t\t\t\t\tparams: {\n\t\t\t\t\t\thash,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t).then(() => {\n\t\t\tthis.clearLayout();\n\t\t}).catch((error) => {\n\t\t\tconsole.error(error);\n\t\t});\n\n\t\tthis.#getPanel().hide();\n\t}\n\n\tprogressChangeHandler({ data })\n\t{\n\t\tconst { state, errors } = data;\n\n\t\tif (state === State.completed || state === State.stopped)\n\t\t{\n\t\t\tthis.reset(!Type.isArrayFilled(errors));\n\t\t}\n\t}\n\n\t#getProgress(): Progress\n\t{\n\t\tif (!this.#progress)\n\t\t{\n\t\t\tthis.#progress = new Progress(this.id, {\n\t\t\t\taction: this.#getProcessActionPath(),\n\t\t\t\tpanel: this.#getPanel(),\n\t\t\t\temitter: this.emitter,\n\t\t\t\tparams: {\n\t\t\t\t\tmoduleId: this.#settings.moduleId,\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\treturn this.#progress;\n\t}\n\n\t#getPanel(): Panel\n\t{\n\t\tif (!this.#panel)\n\t\t{\n\t\t\tconst params = {\n\t\t\t\tentityIds: this.#entityIds,\n\t\t\t\tcontainerId: this.#settings.containerId,\n\t\t\t\tonAfterTextClick: this.cancel.bind(this),\n\t\t\t\tmessages: this.#messages ?? [],\n\t\t\t};\n\t\t\tthis.#panel = new Panel(params);\n\t\t}\n\n\t\treturn this.#panel;\n\t}\n\n\tresetEntityIds(): void\n\t{\n\t\tthis.#entityIds = [];\n\t}\n\n\tenableGridFilter(enable: boolean): void\n\t{\n\t\tconst container = document.getElementById(`${this.id}_search_container`);\n\t\tif (!container)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst className = 'main-ui-disable';\n\t\tif (enable)\n\t\t{\n\t\t\tDom.removeClass(container, className);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.addClass(container, className);\n\t\t}\n\t}\n}\n"],"names":["Panel","params","entityIds","containerId","onAfterTextClick","messages","options","Type","isFunction","clickAfterCallback","ProgressBar","Dom","append","renderTo","value","maxValue","setMaxValue","update","errors","textBefore","successCount","getValue","length","Loc","getMessage","failedCount","setTextBefore","setClickAfterCallback","close","setTextAfter","force","hide","remove","setTimeout","addClass","statusType","Status","COUNTER","textAfter","colorBar","colorTrack","isArrayFilled","Tag","render","forEach","error","title","customData","info","message","Text","encode","document","getElementById","State","intermediate","running","completed","stopped","Progress","id","settings","_classPrivateFieldInitSpec","action","panel","emitter","startRequest","bind","closePanel","onRequestSuccess","onRequestFailure","Runtime","merge","data","isPlainObject","Ajax","runAction","then","result","console","status","processedItems","totalItems","refresh","getTimeout","emitStateChange","emit","BaseEvent","state","processedItemCount","totalItemCount","setProgress","showResult","DEFAULT_TIMEOUT","isNumber","timeout","DeletionManager","items","has","instance","set","get","_classPrivateMethodInitSpec","EventEmitter","setEventNamespace","progressChangeHandler","isRunning","_classPrivateMethodGet","layout","run","BX","Recyclebin","confirm","buttonSet","text","type","code","clearLayout","reset","enableGridFilter","gridId","response","hash","isStringFilled","setParams","subscribe","path","Error","unsubscribe","window","Main","gridManager","reload","getId","getOperationHash","getCancelActionPath","enable","container","className","removeClass","moduleId","cancel","Cache","MemoryCache"],"mappings":"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"}