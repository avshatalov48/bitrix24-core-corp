this.BX=this.BX||{};this.BX.Catalog=this.BX.Catalog||{};(function(e,t,n,o,a,l,r){"use strict";function s(e,t){i(e,t);t.add(e)}function i(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function c(e,t,n){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return n}var u=new WeakSet;var p=function(){function e(){babelHelpers.classCallCheck(this,e);s(this,u)}babelHelpers.createClass(e,[{key:"inventoryManagementAnalyticsFromLanding",value:function e(){var t=this;var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};this.sendAnalyticsLabel(n).then((function(){t.unRegisterOnProlog()}))}},{key:"sendAnalyticsLabel",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var n=c(this,u,E).call(this,t);return l.ajax.runAction("catalog.analytics.sendAnalyticsLabel",{analyticsLabel:n,data:{}})}},{key:"unRegisterOnProlog",value:function e(){return l.ajax.runAction("catalog.config.unRegisterOnProlog")}},{key:"inventoryManagementEnabled",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var n=c(this,u,E).call(this,t);return l.ajax.runAction("catalog.config.inventoryManagementYAndResetQuantity",{analyticsLabel:n,data:{preset:t.preset}})}},{key:"inventoryManagementEnableWithResetDocuments",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return l.ajax.runAction("catalog.config.inventoryManagementYAndResetQuantityWithDocuments",{analyticsLabel:c(this,u,E).call(this,t),data:{preset:t.preset}}).then((function(e){top.BX.onCustomEvent("CatalogWarehouseMasterClear:resetDocuments");return e}))}},{key:"inventoryManagementEnableWithoutReset",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return l.ajax.runAction("catalog.config.inventoryManagementY",{analyticsLabel:c(this,u,E).call(this,t),data:{preset:t.preset}})}},{key:"inventoryManagementDisabled",value:function e(){return l.ajax.runAction("catalog.config.inventoryManagementN",{})}},{key:"inventoryManagementInstallPreset",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return l.ajax.runAction("catalog.config.inventoryManagementInstallPreset",{data:{preset:t.preset}})}}]);return e}();function E(){var e;var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var n={iME:"inventoryManagementEnabled"+"_"+((e=t.preset)===null||e===void 0?void 0:e.sort().join("_"))};if(l.Type.isStringFilled(t.inventoryManagementSource)){n.inventoryManagementSource=t.inventoryManagementSource}return n}var d=Object.freeze({popup:{enable:"BX:Sale:StoreMaster:EventType:popup:enable",enableWithoutReset:"BX:Sale:StoreMaster:EventType:popup:enableWithoutReset",enableWithResetDocuments:"BX:Sale:StoreMaster:EventType:popup:enableWithResetDocuments",disable:"BX:Sale:StoreMaster:EventType:popup:disable",disableCancel:"BX:Sale:StoreMaster:EventType:popup:disable:cancel",confirm:"BX:Sale:StoreMaster:EventType:popup:confirm",confirmCancel:"BX:Sale:StoreMaster:EventType:popup:confirm:cancel"}});var h;var g=function(){function e(){babelHelpers.classCallCheck(this,e)}babelHelpers.createClass(e,[{key:"popup",value:function e(){var e=new r.Popup(null,null,{events:{onPopupClose:function t(){e.destroy()}},content:this.getContent(),maxWidth:500,overlay:true,buttons:[new a.Button({text:l.Loc.getMessage("CAT_WAREHOUSE_MASTER_CLEAR_CLOSE"),color:a.Button.Color.PRIMARY,onclick:function t(){e.close()}})]});e.show()}},{key:"getContent",value:function e(){return l.Tag.render(h||(h=babelHelpers.taggedTemplateLiteral(["\n\t\t\t\t\t<div class='catalog-warehouse-master-clear-popup-content'>\n\t\t\t\t\t\t<h3>",'</h3>\n\t\t\t\t\t\t<div class="catalog-warehouse-master-clear-popup-text">',"\n\t\t\t\t\t</div>\n\t\t\t\t"])),l.Loc.getMessage("CAT_WAREHOUSE_MASTER_STORE_USE_10"),l.Text.encode(l.Loc.getMessage("CAT_WAREHOUSE_MASTER_STORE_USE_9")))}}]);return e}();var v;var S=function(){function e(){babelHelpers.classCallCheck(this,e)}babelHelpers.createClass(e,[{key:"popup",value:function e(){this.disablePopup()}},{key:"disablePopup",value:function e(){var t=new r.Popup(null,null,{events:{onPopupClose:function e(){t.destroy()}},content:this.getDisablePopupContent(),maxWidth:500,overlay:true,buttons:[new a.Button({text:l.Loc.getMessage("CAT_WAREHOUSE_MASTER_STORE_USE_6"),color:a.Button.Color.PRIMARY,onclick:function e(){t.close();o.EventEmitter.emit(d.popup.disable,{})}}),new BX.UI.Button({text:l.Loc.getMessage("CAT_WAREHOUSE_MASTER_STORE_USE_1"),color:BX.UI.Button.Color.LINK,onclick:function e(){t.close();o.EventEmitter.emit(d.popup.disableCancel,{})}})]});t.show()}},{key:"getDisablePopupContent",value:function e(){return l.Tag.render(v||(v=babelHelpers.taggedTemplateLiteral(["\n\t\t\t\t\t<div class='catalog-warehouse-master-clear-popup-content'>\n\t\t\t\t\t\t<h3>",'</h3>\n\t\t\t\t\t\t<div class="catalog-warehouse-master-clear-popup-text">',"\n\t\t\t\t\t\t<br>","<div>\n\t\t\t\t\t</div>\n\t\t\t\t"])),l.Loc.getMessage("CAT_WAREHOUSE_MASTER_CLEAR_DISABLE_POPUP_TITLE"),l.Text.encode(l.Loc.getMessage("CAT_WAREHOUSE_MASTER_STORE_USE_7")),l.Text.encode(l.Loc.getMessage("CAT_WAREHOUSE_MASTER_STORE_USE_8")))}}]);return e}();var _;function T(e,t){f(e,t);t.add(e)}function f(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function C(e,t,n){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return n}var A=new WeakSet;var b=new WeakSet;var R=function(){function e(){babelHelpers.classCallCheck(this,e);T(this,b);T(this,A)}babelHelpers.createClass(e,[{key:"popup",value:function t(){var a=this;l.ajax.runAction("catalog.config.checkEnablingConditions",{}).then((function(t){var l=t.data;if(l.includes(e.QUANTITY_INCONSISTENCY_EXISTS)&&l.includes(e.CONDUCTED_DOCUMENTS_EXIST)){a.quantityInconsistencyPopup()}else if(l.includes(e.QUANTITY_INCONSISTENCY_EXISTS)){(new n.DialogClearing).popup()}else if(l.includes(e.CONDUCTED_DOCUMENTS_EXIST)){a.conductedDocumentsPopup()}else{o.EventEmitter.emit(d.popup.enable,{})}}))}},{key:"quantityInconsistencyPopup",value:function e(){var t=new r.Popup({events:{onPopupClose:function e(){t.destroy()}},content:C(this,b,M).call(this,l.Loc.getMessage("CAT_WAREHOUSE_MASTER_STORE_USE_ENABLE_CLEAR_CONFIRM")),maxWidth:500,overlay:true,closeIcon:true,closeByEsc:true,buttons:[new a.Button({text:l.Loc.getMessage("CAT_WAREHOUSE_MASTER_STORE_USE_ENABLE_WITH_RESET"),color:a.Button.Color.PRIMARY,onclick:function e(){t.close();o.EventEmitter.emit(d.popup.enableWithResetDocuments,{})}}),new BX.UI.Button({text:l.Loc.getMessage("CAT_WAREHOUSE_MASTER_STORE_USE_ENABLE_EASY"),color:BX.UI.Button.Color.LINK,onclick:function e(){t.close();o.EventEmitter.emit(d.popup.enableWithoutReset,{})}})]});t.show()}},{key:"conductedDocumentsPopup",value:function e(){var t=new r.Popup({events:{onPopupClose:function e(){t.destroy()}},content:C(this,b,M).call(this,l.Loc.getMessage("CAT_WAREHOUSE_MASTER_STORE_USE_ENABLE_CONFIRM")),maxWidth:500,overlay:true,closeIcon:true,closeByEsc:true,buttons:[new a.Button({text:l.Loc.getMessage("CAT_WAREHOUSE_MASTER_STORE_USE_ENABLE_EASY"),color:a.Button.Color.PRIMARY,onclick:function e(){t.close();o.EventEmitter.emit(d.popup.enableWithoutReset,{})}}),new BX.UI.Button({text:l.Loc.getMessage("CAT_WAREHOUSE_MASTER_STORE_USE_ENABLE_WITH_RESET"),color:BX.UI.Button.Color.LINK,onclick:function e(){t.close();o.EventEmitter.emit(d.popup.enableWithResetDocuments,{})}})]});t.show()}}]);return e}();function y(){return 15992592}function M(e){var t=this;var n=l.Tag.render(_||(_=babelHelpers.taggedTemplateLiteral(["\n\t\t\t<div class='catalog-warehouse-master-clear-popup-content'>\n\t\t\t\t<h3>",'</h3>\n\t\t\t\t<div class="catalog-warehouse-master-clear-popup-text">\n\t\t\t\t\t<span>',"</span> <a href='#' class=\"catalog-warehouse-master-clear-popup-hint\">","</a>\n\t\t\t\t<div>\n\t\t\t</div>\n\t\t"])),l.Loc.getMessage("CAT_WAREHOUSE_MASTER_STORE_USE_ENABLE_TITLE"),e,l.Loc.getMessage("CAT_WAREHOUSE_MASTER_STORE_USE_ENABLE_LINK_TITLE"));n.querySelector(".catalog-warehouse-master-clear-popup-hint").addEventListener("click",(function(e){e.preventDefault();if(top.BX.Helper){top.BX.Helper.show("redirect=detail&code=".concat(C(t,A,y).call(t)))}}));return n}babelHelpers.defineProperty(R,"QUANTITY_INCONSISTENCY_EXISTS","QUANTITY_INCONSISTENCY_EXISTS");babelHelpers.defineProperty(R,"CONDUCTED_DOCUMENTS_EXIST","CONDUCTED_DOCUMENTS_EXIST");var m;var O=function(){function e(){babelHelpers.classCallCheck(this,e)}babelHelpers.createClass(e,[{key:"popup",value:function e(){var e=new r.Popup(null,null,{events:{onPopupClose:function t(){e.destroy()}},content:this.getContent(),maxWidth:500,overlay:true,buttons:[new a.Button({text:l.Loc.getMessage("CAT_WAREHOUSE_MASTER_STORE_USE_2"),color:a.Button.Color.PRIMARY,onclick:function t(){e.close();o.EventEmitter.emit(d.popup.enable,{})}}),new BX.UI.Button({text:l.Loc.getMessage("CAT_WAREHOUSE_MASTER_STORE_USE_1"),color:BX.UI.Button.Color.LINK,onclick:function t(){e.close();o.EventEmitter.emit(d.popup.confirmCancel,{})}})]});e.show()}},{key:"getContent",value:function e(){return l.Tag.render(m||(m=babelHelpers.taggedTemplateLiteral(["\n\t\t\t\t\t<div class='catalog-warehouse-master-clear-popup-content'>\n\t\t\t\t\t\t<h3>",'</h3>\n\t\t\t\t\t\t<div class="catalog-warehouse-master-clear-popup-text">',"\n\t\t\t\t\t\t<br>","<div>\n\t\t\t\t\t</div>\n\t\t\t\t"])),l.Loc.getMessage("CAT_WAREHOUSE_MASTER_STORE_USE_3"),l.Text.encode(l.Loc.getMessage("CAT_WAREHOUSE_MASTER_STORE_USE_4")),l.Text.encode(l.Loc.getMessage("CAT_WAREHOUSE_MASTER_STORE_USE_5")))}}]);return e}();var U,L;var B=function(){function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};babelHelpers.classCallCheck(this,e);this.text=t.text||"";this.helpArticleId=t.helpArticleId||""}babelHelpers.createClass(e,[{key:"popup",value:function e(){var e=new r.Popup(null,null,{events:{onPopupClose:function t(){return e.destroy()}},content:this.getContent(),maxWidth:500,overlay:true,buttons:[new a.Button({text:l.Loc.getMessage("CAT_WAREHOUSE_MASTER_CLEAR_CLOSE"),color:a.Button.Color.PRIMARY,onclick:function t(){return e.close()}})]});e.show()}},{key:"showHelp",value:function e(t){if(top.BX.Helper){top.BX.Helper.show("redirect=detail&code="+this.helpArticleId);t.preventDefault()}}},{key:"getHelpLink",value:function e(){var t=l.Tag.render(U||(U=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<a href="#" class="ui-link ui-link-dashed documents-grid-link">\n\t\t\t\t',"\n\t\t\t</a>\n\t\t"])),l.Text.encode(l.Loc.getMessage("CAT_WAREHOUSE_MASTER_STORE_DETAILS")));t.addEventListener("click",this.showHelp.bind(this));return t}},{key:"getContent",value:function e(){return l.Tag.render(L||(L=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="catalog-warehouse-master-clear-popup-content">\n\t\t\t\t<h3>\n\t\t\t\t\t','\n\t\t\t\t</h3>\t\n\t\t\t\t<div class="catalog-warehouse-master-clear-popup-text">\n\t\t\t\t\t'," \n\t\t\t\t\t","\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t"])),l.Loc.getMessage("CAT_WAREHOUSE_MASTER_STORE_USE_10"),l.Text.encode(this.text),this.helpArticleId?this.getHelpLink():"")}}]);return e}();var w=function(){function e(){babelHelpers.classCallCheck(this,e)}babelHelpers.createClass(e,[{key:"open",value:function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};n=l.Type.isPlainObject(n)?n:{};return new Promise((function(e){var o=n.hasOwnProperty("data")?n.data:{};var a=n.hasOwnProperty("events")?n.events:{};a.onClose=a.hasOwnProperty("onClose")?a.onClose:function(t){return e(t.getSlider())};t=BX.util.add_url_param(t,{analyticsLabel:"inventoryManagementEnabled_openSlider"});if(l.Type.isString(t)&&t.length>1){BX.SidePanel.Instance.open(t,{cacheable:false,allowChangeHistory:false,events:a,data:o,width:1130})}else{e()}}))}}]);return e}();var H=function(){function e(){babelHelpers.classCallCheck(this,e)}babelHelpers.createClass(e,[{key:"show",value:function e(t,n,o){var a=this;if(this.popup){this.popup.destroy();this.popup=null}if(!t&&!n){return}this.popup=new r.Popup(null,t,{events:{onPopupClose:function e(){a.popup.destroy();a.popup=null}},darkMode:true,content:n,offsetLeft:t.offsetWidth});if(o){setTimeout((function(){a.popup.destroy();a.popup=null}),o)}this.popup.show()}},{key:"hide",value:function e(){if(this.popup){this.popup.destroy()}}}]);return e}();var I=function(){function e(){babelHelpers.classCallCheck(this,e)}babelHelpers.createClass(e,null,[{key:"reloadGridAction",value:function e(){document.location.reload()}},{key:"openWarehousePanel",value:function t(n){(new w).open(n,{data:{closeSliderOnDone:false}}).then((function(){e.reloadGridAction()}))}}]);return e}();e.Controller=p;e.EventType=d;e.DialogOneC=g;e.DialogEnable=R;e.DialogDisable=S;e.DialogClearing=O;e.DialogError=B;e.Slider=w;e.Popup=H;e.ProductGridMenu=I})(this.BX.Catalog.StoreUse=this.BX.Catalog.StoreUse||{},BX,BX.Catalog.StoreUse,BX.Event,BX.UI,BX,BX.Main);
//# sourceMappingURL=store-use.bundle.map.js