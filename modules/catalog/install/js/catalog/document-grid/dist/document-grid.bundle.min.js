this.BX=this.BX||{};(function(e,t,o,n,i){"use strict";var r=function(){function e(t){babelHelpers.classCallCheck(this,e);this.gridId=t.gridId;this.filterId=t.filterId;this.grid=BX.Main.gridManager.getInstanceById(this.gridId);this.isConductDisabled=t.isConductDisabled;this.masterSliderUrl=t.masterSliderUrl}babelHelpers.createClass(e,[{key:"getSelectedIds",value:function e(){return this.grid.getRows().getSelectedIds()}},{key:"deleteDocument",value:function e(i){var r=this;var c=new o.Popup({id:"catalog_delete_document_popup",titleBar:t.Loc.getMessage("DOCUMENT_GRID_DOCUMENT_DELETE_TITLE"),content:t.Loc.getMessage("DOCUMENT_GRID_DOCUMENT_DELETE_CONTENT"),buttons:[new n.Button({text:t.Loc.getMessage("DOCUMENT_GRID_CONTINUE"),color:n.ButtonColor.SUCCESS,onclick:function e(o,n){t.ajax.runAction("catalog.document.deleteList",{data:{documentIds:[i]}}).then((function(e){c.destroy();r.grid.reload()})).catch((function(e){if(e.errors){BX.UI.Notification.Center.notify({content:e.errors[0].message})}c.destroy()}))}}),new n.Button({text:t.Loc.getMessage("DOCUMENT_GRID_CANCEL"),color:n.ButtonColor.DANGER,onclick:function e(t,o){c.destroy()}})]});c.show()}},{key:"conductDocument",value:function e(i){var r=this;var c=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";if(this.isConductDisabled){this.openStoreMasterSlider();return}var a={data:{documentIds:[i]}};if(c!==""){a.analyticsLabel={documentType:c}}var s=new o.Popup({id:"catalog_delete_document_popup",titleBar:t.Loc.getMessage("DOCUMENT_GRID_DOCUMENT_CONDUCT_TITLE"),content:t.Loc.getMessage("DOCUMENT_GRID_DOCUMENT_CONDUCT_CONTENT"),buttons:[new n.Button({text:t.Loc.getMessage("DOCUMENT_GRID_CONTINUE"),color:n.ButtonColor.SUCCESS,onclick:function e(o,n){t.ajax.runAction("catalog.document.conductList",a).then((function(e){s.destroy();r.grid.reload()})).catch((function(e){if(e.errors){BX.UI.Notification.Center.notify({content:e.errors[0].message})}s.destroy()}))}}),new n.Button({text:t.Loc.getMessage("DOCUMENT_GRID_CANCEL"),color:n.ButtonColor.DANGER,onclick:function e(t,o){s.destroy()}})]});s.show()}},{key:"cancelDocument",value:function e(i){var r=this;var c=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";if(this.isConductDisabled){this.openStoreMasterSlider();return}var a={data:{documentIds:[i]}};if(c!==""){a.analyticsLabel={documentType:c}}var s=new o.Popup({id:"catalog_delete_document_popup",titleBar:t.Loc.getMessage("DOCUMENT_GRID_DOCUMENT_CANCEL_TITLE"),content:t.Loc.getMessage("DOCUMENT_GRID_DOCUMENT_CANCEL_CONTENT"),buttons:[new n.Button({text:t.Loc.getMessage("DOCUMENT_GRID_CONTINUE"),color:n.ButtonColor.SUCCESS,onclick:function e(o,n){t.ajax.runAction("catalog.document.cancelList",a).then((function(e){s.destroy();r.grid.reload()})).catch((function(e){if(e.errors){BX.UI.Notification.Center.notify({content:e.errors[0].message})}s.destroy()}))}}),new n.Button({text:t.Loc.getMessage("DOCUMENT_GRID_CANCEL"),color:n.ButtonColor.DANGER,onclick:function e(t,o){s.destroy()}})]});s.show()}},{key:"deleteSelectedDocuments",value:function e(){var o=this;var n=this.getSelectedIds();t.ajax.runAction("catalog.document.deleteList",{data:{documentIds:n}}).then((function(e){o.grid.reload()})).catch((function(e){if(e.errors){e.errors.forEach((function(e){if(e.message){BX.UI.Notification.Center.notify({content:e.message})}}))}o.grid.reload()}))}},{key:"conductSelectedDocuments",value:function e(){var o=this;if(this.isConductDisabled){this.openStoreMasterSlider();return}var n=this.getSelectedIds();t.ajax.runAction("catalog.document.conductList",{data:{documentIds:n}}).then((function(e){o.grid.reload()})).catch((function(e){if(e.errors){e.errors.forEach((function(e){if(e.message){BX.UI.Notification.Center.notify({content:e.message})}}))}o.grid.reload()}))}},{key:"cancelSelectedDocuments",value:function e(){var o=this;if(this.isConductDisabled){this.openStoreMasterSlider();return}var n=this.getSelectedIds();t.ajax.runAction("catalog.document.cancelList",{data:{documentIds:n}}).then((function(e){o.grid.reload()})).catch((function(e){if(e.errors){e.errors.forEach((function(e){if(e.message){BX.UI.Notification.Center.notify({content:e.message})}}))}o.grid.reload()}))}},{key:"processApplyButtonClick",value:function e(){var t=this.grid.getActionsPanel().getValues();var o=t["action_button_"+this.gridId];if(o==="conduct"){this.conductSelectedDocuments()}if(o==="cancel"){this.cancelSelectedDocuments()}}},{key:"applyFilter",value:function e(t){var o=BX.Main.filterManager.getById(this.filterId);if(!o){return}o.getApi().extendFilter(t)}},{key:"openHowToStart",value:function e(){if(top.BX.Helper){top.BX.Helper.show("redirect=detail&code=14566618");event.preventDefault()}}},{key:"openHowToTransfer",value:function e(){if(top.BX.Helper){top.BX.Helper.show("redirect=detail&code=14566610");event.preventDefault()}}},{key:"openHowToControlGoodsMovement",value:function e(){if(top.BX.Helper){top.BX.Helper.show("redirect=detail&code=14566670");event.preventDefault()}}},{key:"openHowToAccountForLosses",value:function e(){if(top.BX.Helper){top.BX.Helper.show("redirect=detail&code=14566652");event.preventDefault()}}},{key:"openStoreMasterSlider",value:function e(){(new i.Slider).open(this.masterSliderUrl,{data:{openGridOnDone:false},events:{onCloseComplete:function e(t){var o=t.getSlider();if(!o){return}if(o.getData().get("isInventoryManagementEnabled")){document.location.reload()}}}})}}]);return e}();e.DocumentGridManager=r})(this.BX.Catalog=this.BX.Catalog||{},BX,BX.Main,BX.UI,BX.Catalog.StoreUse);
//# sourceMappingURL=document-grid.bundle.map.js