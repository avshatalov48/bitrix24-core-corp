this.BX=this.BX||{};(function(e,t,n,o,a){"use strict";var i=function(){function e(t){babelHelpers.classCallCheck(this,e);this.gridId=t.gridId;this.filterId=t.filterId;this.grid=BX.Main.gridManager.getInstanceById(this.gridId);this.isConductDisabled=t.isConductDisabled;this.masterSliderUrl=t.masterSliderUrl;this.inventoryManagementSource=t.inventoryManagementSource}babelHelpers.createClass(e,[{key:"getSelectedIds",value:function e(){return this.grid.getRows().getSelectedIds()}},{key:"deleteDocument",value:function e(a){var i=this;var r=new n.Popup({id:"catalog_delete_document_popup",titleBar:t.Loc.getMessage("DOCUMENT_GRID_DOCUMENT_DELETE_TITLE"),content:t.Loc.getMessage("DOCUMENT_GRID_DOCUMENT_DELETE_CONTENT"),buttons:[new o.Button({text:t.Loc.getMessage("DOCUMENT_GRID_CONTINUE"),color:o.ButtonColor.SUCCESS,onclick:function e(n,o){n.setDisabled();t.ajax.runAction("catalog.document.deleteList",{data:{documentIds:[a]},analyticsLabel:{inventoryManagementSource:i.inventoryManagementSource}}).then((function(e){r.destroy();i.grid.reload()}))["catch"]((function(e){if(e.errors){BX.UI.Notification.Center.notify({content:e.errors[0].message})}r.destroy()}))}}),new o.Button({text:t.Loc.getMessage("DOCUMENT_GRID_CANCEL"),color:o.ButtonColor.DANGER,onclick:function e(t,n){r.destroy()}})]});r.show()}},{key:"conductDocument",value:function e(a){var i=this;var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";if(this.isConductDisabled){this.openStoreMasterSlider();return}var c={data:{documentIds:[a]}};if(r!==""){c.analyticsLabel={documentType:r}}c.analyticsLabel.inventoryManagementSource=this.inventoryManagementSource;c.analyticsLabel.mode="single";var s=new n.Popup({id:"catalog_delete_document_popup",titleBar:t.Loc.getMessage("DOCUMENT_GRID_DOCUMENT_CONDUCT_TITLE"),content:t.Loc.getMessage("DOCUMENT_GRID_DOCUMENT_CONDUCT_CONTENT"),buttons:[new o.Button({text:t.Loc.getMessage("DOCUMENT_GRID_CONTINUE"),color:o.ButtonColor.SUCCESS,onclick:function e(n,o){n.setDisabled();t.ajax.runAction("catalog.document.conductList",c).then((function(e){s.destroy();i.grid.reload()}))["catch"]((function(e){if(e.errors){BX.UI.Notification.Center.notify({content:e.errors[0].message})}s.destroy()}))}}),new o.Button({text:t.Loc.getMessage("DOCUMENT_GRID_CANCEL"),color:o.ButtonColor.DANGER,onclick:function e(t,n){s.destroy()}})]});s.show()}},{key:"cancelDocument",value:function e(a){var i=this;var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";if(this.isConductDisabled){this.openStoreMasterSlider();return}var c={data:{documentIds:[a]}};if(r!==""){c.analyticsLabel={documentType:r}}c.analyticsLabel.mode="single";c.analyticsLabel.inventoryManagementSource=this.inventoryManagementSource;var s=new n.Popup({id:"catalog_delete_document_popup",titleBar:t.Loc.getMessage("DOCUMENT_GRID_DOCUMENT_CANCEL_TITLE"),content:t.Loc.getMessage("DOCUMENT_GRID_DOCUMENT_CANCEL_CONTENT"),buttons:[new o.Button({text:t.Loc.getMessage("DOCUMENT_GRID_CONTINUE"),color:o.ButtonColor.SUCCESS,onclick:function e(n,o){n.setDisabled();t.ajax.runAction("catalog.document.cancelList",c).then((function(e){s.destroy();i.grid.reload()}))["catch"]((function(e){if(e.errors){BX.UI.Notification.Center.notify({content:e.errors[0].message})}s.destroy()}))}}),new o.Button({text:t.Loc.getMessage("DOCUMENT_GRID_CANCEL"),color:o.ButtonColor.DANGER,onclick:function e(t,n){s.destroy()}})]});s.show()}},{key:"deleteSelectedDocuments",value:function e(){var n=this;var o=this.getSelectedIds();t.ajax.runAction("catalog.document.deleteList",{data:{documentIds:o},analyticsLabel:{inventoryManagementSource:this.inventoryManagementSource}}).then((function(e){n.grid.reload()}))["catch"]((function(e){if(e.errors){e.errors.forEach((function(e){if(e.message){BX.UI.Notification.Center.notify({content:e.message})}}))}n.grid.reload()}))}},{key:"conductSelectedDocuments",value:function e(){var n=this;if(this.isConductDisabled){this.openStoreMasterSlider();return}var o=this.getSelectedIds();t.ajax.runAction("catalog.document.conductList",{data:{documentIds:o},analyticsLabel:{mode:"list",inventoryManagementSource:this.inventoryManagementSource}}).then((function(e){n.grid.reload()}))["catch"]((function(e){if(e.errors){e.errors.forEach((function(e){if(e.message){BX.UI.Notification.Center.notify({content:e.message})}}))}n.grid.reload()}))}},{key:"cancelSelectedDocuments",value:function e(){var n=this;if(this.isConductDisabled){this.openStoreMasterSlider();return}var o=this.getSelectedIds();t.ajax.runAction("catalog.document.cancelList",{data:{documentIds:o},analyticsLabel:{mode:"list",inventoryManagementSource:this.inventoryManagementSource}}).then((function(e){n.grid.reload()}))["catch"]((function(e){if(e.errors){e.errors.forEach((function(e){if(e.message){BX.UI.Notification.Center.notify({content:e.message})}}))}n.grid.reload()}))}},{key:"processApplyButtonClick",value:function e(){var t=this.grid.getActionsPanel().getValues();var n=t["action_button_"+this.gridId];if(n==="conduct"){this.conductSelectedDocuments()}if(n==="cancel"){this.cancelSelectedDocuments()}}},{key:"applyFilter",value:function e(t){var n=BX.Main.filterManager.getById(this.filterId);if(!n){return}n.getApi().extendFilter(t)}},{key:"openHowToStart",value:function e(){if(top.BX.Helper){top.BX.Helper.show("redirect=detail&code=14566618");event.preventDefault()}}},{key:"openHowToTransfer",value:function e(){if(top.BX.Helper){top.BX.Helper.show("redirect=detail&code=14566610");event.preventDefault()}}},{key:"openHowToControlGoodsMovement",value:function e(){if(top.BX.Helper){top.BX.Helper.show("redirect=detail&code=14566670");event.preventDefault()}}},{key:"openHowToAccountForLosses",value:function e(){if(top.BX.Helper){top.BX.Helper.show("redirect=detail&code=14566652");event.preventDefault()}}},{key:"openStoreMasterSlider",value:function e(){(new a.Slider).open(this.masterSliderUrl,{data:{openGridOnDone:false},events:{onCloseComplete:function e(t){var n=t.getSlider();if(!n){return}if(n.getData().get("isInventoryManagementEnabled")){document.location.reload()}}}})}}]);return e}();e.DocumentGridManager=i})(this.BX.Catalog=this.BX.Catalog||{},BX,BX.Main,BX.UI,BX.Catalog.StoreUse);
//# sourceMappingURL=document-grid.bundle.map.js