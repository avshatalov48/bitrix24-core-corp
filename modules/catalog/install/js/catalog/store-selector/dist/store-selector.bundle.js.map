{"version":3,"file":"store-selector.bundle.js","sources":["../src/store-search-input.js","../src/store-selector.js"],"sourcesContent":["import {ajax, Browser, Cache, Dom, Event, Loc, Tag, Text, Type} from 'main.core';\nimport {Dialog} from 'ui.entity-selector';\nimport './component.css';\nimport {StoreSelector} from 'catalog.store-selector';\nimport 'ui.notification';\n\nexport class StoreSearchInput\n{\n\tselector: StoreSelector;\n\tcache = new Cache.MemoryCache();\n\n\tconstructor(id, options = {})\n\t{\n\t\tthis.id = id || Text.getRandom();\n\t\tthis.selector = options.selector;\n\t\tif (!(this.selector instanceof StoreSelector))\n\t\t{\n\t\t\tthrow new Error('Store selector instance not found.');\n\t\t}\n\n\t\tthis.isEnabledDetailLink = options.isEnabledDetailLink;\n\t\tthis.inputName = options.inputName || '';\n\t}\n\n\tgetId()\n\t{\n\t\treturn this.id;\n\t}\n\n\ttoggleIcon(icon, value)\n\t{\n\t\tif (Type.isDomNode(icon))\n\t\t{\n\t\t\tDom.style(icon, 'display', value);\n\t\t}\n\t}\n\n\tgetNameBlock(): HTMLElement\n\t{\n\t\treturn this.cache.remember('nameBlock', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"ui-ctl ui-ctl-textbox ui-ctl-w100\">\n\t\t\t\t\t${this.getNameInput()}\n\t\t\t\t\t${this.getHiddenNameInput()}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetNameInput(): HTMLInputElement\n\t{\n\t\treturn this.cache.remember('nameInput', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<input type=\"text\"\n\t\t\t\t\tclass=\"ui-ctl-element ui-ctl-textbox\"\n\t\t\t\t\tautocomplete=\"off\"\n\t\t\t\t\tvalue=\"${Text.encode(this.selector.getStoreTitle())}\"\n\t\t\t\t\tplaceholder=\"${Text.encode(this.getPlaceholder())}\"\n\t\t\t\t\ttitle=\"${Text.encode(this.selector.getStoreTitle())}\"\n\t\t\t\t\tonchange=\"${this.handleNameInputHiddenChange.bind(this)}\"\n\t\t\t\t>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetHiddenNameInput(): HTMLInputElement\n\t{\n\t\treturn this.cache.remember('hiddenNameInput', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<input\n\t\t\t\t \ttype=\"hidden\"\n\t\t\t\t\tname=\"${Text.encode(this.inputName)}\"\n\t\t\t\t\tvalue=\"${Text.encode(this.selector.getStoreTitle())}\"\n\t\t\t\t>\n\t\t\t`;\n\t\t});\n\t}\n\n\thandleNameInputHiddenChange(event: UIEvent)\n\t{\n\t\tthis.getHiddenNameInput().value = event.target.value;\n\t}\n\n\tgetClearIcon(): HTMLElement\n\t{\n\t\treturn this.cache.remember('closeIcon', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<button\n\t\t\t\t\tclass=\"ui-ctl-after ui-ctl-icon-clear\"\n\t\t\t\t\tonclick=\"${this.handleClearIconClick.bind(this)}\"\n\t\t\t\t></button>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetArrowIcon(): HTMLElement\n\t{\n\t\treturn this.cache.remember('arrowIcon', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<a\n\t\t\t\t\thref=\"${this.selector.getDetailPath()}\"\n\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\tclass=\"ui-ctl-after ui-ctl-icon-forward\"\n\t\t\t\t></button>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetSearchIcon(): HTMLElement\n\t{\n\t\treturn this.cache.remember('searchIcon', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<button\n\t\t\t\t\tclass=\"ui-ctl-after ui-ctl-icon-search\"\n\t\t\t\t\tonclick=\"${this.handleSearchIconClick.bind(this)}\"\n\t\t\t\t></button>\n\t\t\t`;\n\t\t});\n\t}\n\n\tclearInputCache()\n\t{\n\t\tthis.cache.delete('dialog');\n\t\tthis.cache.delete('nameBlock');\n\t\tthis.cache.delete('nameInput');\n\t\tthis.cache.delete('hiddenNameInput');\n\t}\n\n\tclearDialogCache()\n\t{\n\t\tthis.cache.delete('dialog');\n\t}\n\n\tlayout(): HTMLElement\n\t{\n\t\tthis.clearInputCache();\n\t\tconst block = Tag.render`<div class=\"ui-ctl ui-ctl-w100 ui-ctl-after-icon\"></div>`;\n\n\t\tblock.appendChild(this.getSearchIcon());\n\t\tthis.toggleIcon(this.getSearchIcon(), 'none');\n\n\t\tblock.appendChild(this.getClearIcon());\n\t\tthis.toggleIcon(this.getClearIcon(), 'none');\n\n\t\tif (this.showDetailLink() && Type.isStringFilled(this.selector.getStoreTitle()))\n\t\t{\n\t\t\tthis.toggleIcon(this.getArrowIcon(), 'block');\n\t\t\tblock.appendChild(this.getArrowIcon());\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.toggleIcon(this.getSearchIcon(), 'block');\n\t\t}\n\n\t\tEvent.bind(this.getNameInput(), 'click', this.handleNameInputClick.bind(this));\n\t\tEvent.bind(this.getNameInput(), 'input', this.handleNameInput.bind(this));\n\t\tEvent.bind(this.getNameInput(), 'blur', this.handleNameInputBlur.bind(this));\n\t\tEvent.bind(this.getNameInput(), 'keydown', this.handleNameInputKeyDown.bind(this));\n\n\t\tblock.appendChild(this.getNameBlock());\n\t\treturn block;\n\t}\n\n\thandleNameInputClick(event: UIEvent)\n\t{\n\t\tthis.searchInDialog(event.target.value);\n\t\tthis.handleIconsSwitchingOnNameInput(event);\n\t}\n\n\thandleNameInput(event: UIEvent)\n\t{\n\t\tthis.searchInDialog(event.target.value);\n\t\tthis.handleIconsSwitchingOnNameInput(event);\n\t}\n\n\tshowDetailLink(): string\n\t{\n\t\treturn this.isEnabledDetailLink;\n\t}\n\n\tgetDialog(): ?Dialog\n\t{\n\t\treturn this.cache.remember('dialog', () => {\n\t\t\tconst params = {\n\t\t\t\tid: this.id + '_store',\n\t\t\t\theight: 300,\n\t\t\t\tcontext: 'catalog-store',\n\t\t\t\ttargetNode: this.getNameInput(),\n\t\t\t\tenableSearch: false,\n\t\t\t\tmultiple: false,\n\t\t\t\tdropdownMode: true,\n\t\t\t\tsearchTabOptions: {\n\t\t\t\t\tstub: true,\n\t\t\t\t\tstubOptions: {\n\t\t\t\t\t\ttitle: Tag.message`${'CATALOG_STORE_SELECTOR_IS_EMPTY_TITLE'}`,\n\t\t\t\t\t\tsubtitle: Tag.message`${'CATALOG_STORE_SELECTOR_IS_EMPTY_SUBTITLE'}`,\n\t\t\t\t\t\tarrow: true\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tevents: {\n\t\t\t\t\t'Item:onSelect': this.onStoreSelect.bind(this),\n\t\t\t\t\t'onSearch': this.onSearch.bind(this),\n\t\t\t\t\t'Search:onItemCreateAsync': this.createStore.bind(this),\n\t\t\t\t},\n\t\t\t\tentities: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'store',\n\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\tproductId: this.selector.getProductId(),\n\t\t\t\t\t\t},\n\t\t\t\t\t\tsearchFields: [\n\t\t\t\t\t\t\t{ name: 'subtitle', type: 'string', system: true, searchable: false },\n\t\t\t\t\t\t],\n\t\t\t\t\t\tdynamicLoad: true,\n\t\t\t\t\t\tdynamicSearch: true,\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\tsearchOptions: {\n\t\t\t\t\tallowCreateItem: true\n\t\t\t\t},\n\t\t\t};\n\n\t\t\treturn new Dialog(params);\n\t\t});\n\t}\n\n\thandleNameInputKeyDown(event: KeyboardEvent): void\n\t{\n\t\tconst dialog = this.getDialog();\n\t\tif (event.key === 'Enter' && dialog.getActiveTab() === dialog.getSearchTab())\n\t\t{\n\t\t\t// prevent a form submit\n\t\t\tevent.preventDefault();\n\n\t\t\tif ((Browser.isMac() && event.metaKey) || event.ctrlKey)\n\t\t\t{\n\t\t\t\tdialog.getSearchTab().getFooter().createItem();\n\t\t\t}\n\t\t}\n\t}\n\n\thandleIconsSwitchingOnNameInput(event: UIEvent): void\n\t{\n\t\tthis.toggleIcon(this.getArrowIcon(), 'none');\n\n\t\tif (Type.isStringFilled(event.target.value))\n\t\t{\n\t\t\tthis.toggleIcon(this.getClearIcon(), 'block');\n\t\t\tthis.toggleIcon(this.getSearchIcon(), 'none');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.toggleIcon(this.getClearIcon(), 'none');\n\t\t\tthis.toggleIcon(this.getSearchIcon(), 'block');\n\t\t}\n\t}\n\n\thandleClearIconClick(event: UIEvent)\n\t{\n\t\tthis.selector.onClear();\n\n\t\tevent.stopPropagation();\n\t\tevent.preventDefault();\n\t}\n\n\tfocusName()\n\t{\n\t\trequestAnimationFrame(() => this.getNameInput().focus());\n\t}\n\n\tsearchInDialog(searchQuery: string = '')\n\t{\n\t\tconst dialog = this.getDialog();\n\t\tif (dialog)\n\t\t{\n\t\t\tdialog.show();\n\t\t\tdialog.search(searchQuery);\n\t\t}\n\t}\n\n\thandleShowSearchDialog(event: UIEvent)\n\t{\n\t\tthis.searchInDialog(event.target.value);\n\t}\n\n\thandleNameInputBlur(event: UIEvent)\n\t{\n\t\t// timeout to toggle clear icon handler while cursor is inside of name input\n\t\tsetTimeout(() => {\n\t\t\tthis.toggleIcon(this.getClearIcon(), 'none');\n\n\t\t\tif (this.showDetailLink() && Type.isStringFilled(this.selector.getStoreTitle()))\n\t\t\t{\n\t\t\t\tthis.toggleIcon(this.getSearchIcon(), 'none');\n\t\t\t\tthis.toggleIcon(this.getArrowIcon(), 'block');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.toggleIcon(this.getArrowIcon(), 'none');\n\t\t\t\tthis.toggleIcon(this.getSearchIcon(), 'block');\n\t\t\t}\n\t\t}, 200);\n\t}\n\n\thandleSearchIconClick(event: UIEvent)\n\t{\n\t\tthis.searchInDialog();\n\t\tthis.focusName();\n\n\t\tevent.stopPropagation();\n\t\tevent.preventDefault();\n\t}\n\n\tonSearch(event)\n\t{\n\t\tconst { query } = event.getData();\n\t\tif (query === '' || query === this.selector.getStoreTitle())\n\t\t{\n\t\t\tevent.target?.searchTab?.getFooter()?.hide();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tevent.target?.searchTab?.getFooter()?.show();\n\t\t}\n\t}\n\n\tonStoreSelect(event)\n\t{\n\t\tconst item = event.getData().item;\n\t\titem.getDialog().getTargetNode().value = item.getTitle();\n\n\t\tif (this.selector)\n\t\t{\n\t\t\tthis.selector.onStoreSelect(item.getId(), item.getTitle());\n\t\t}\n\t\tthis.toggleIcon(this.getSearchIcon(), 'none');\n\t\tthis.selector.clearLayout();\n\t\tthis.selector.layout();\n\n\t\tthis.cache.delete('dialog');\n\t}\n\n\tcreateStore(event): Promise\n\t{\n\t\tconst {searchQuery} = event.getData();\n\t\tconst name = searchQuery.getQuery();\n\n\t\treturn new Promise(\n\t\t\t(resolve, reject) => {\n\t\t\t\tif (!Type.isStringFilled(name))\n\t\t\t\t{\n\t\t\t\t\treject();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst dialog: Dialog = event.getTarget();\n\t\t\t\tdialog.showLoader();\n\t\t\t\tajax.runAction(\n\t\t\t\t\t\t'catalog.storeSelector.createStore',\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tjson: {name}\n\t\t\t\t\t\t}\n\t\t\t\t\t)\n\t\t\t\t\t.then(response => {\n\t\t\t\t\t\tdialog.hideLoader();\n\t\t\t\t\t\tconst id = Text.toInteger(response.data.id);\n\t\t\t\t\t\tconst item = dialog.addItem({\n\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\tentityId: 'store',\n\t\t\t\t\t\t\ttitle: name,\n\t\t\t\t\t\t\ttabs: dialog.getRecentTab().getId(),\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif (item)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\titem.select();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tdialog.hide();\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t})\n\t\t\t\t\t.catch(() => reject())\n\t\t\t\t;\n\t\t\t});\n\t}\n\n\tgetPlaceholder(): string\n\t{\n\t\treturn Loc.getMessage('CATALOG_STORE_SELECTOR_BEFORE_SEARCH_TITLE');\n\t}\n}\n","import {Cache, Dom, Event, Extension, Loc, Tag, Text, Type} from 'main.core';\nimport 'ui.forms';\nimport 'ui.notification';\nimport {EventEmitter} from 'main.core.events';\nimport {StoreSearchInput} from \"./store-search-input\";\nimport './component.css';\nimport {ProductModel} from \"catalog.product-model\";\n\nconst instances = new Map();\n\nexport class StoreSelector extends EventEmitter\n{\n\tstatic MODE_VIEW = 'view';\n\tstatic MODE_EDIT = 'edit';\n\tstatic INPUT_FIELD_TITLE = 'STORE_TITLE';\n\tstatic INPUT_FIELD_ID = 'STORE_ID';\n\n\tmode: StoreSelector.MODE_EDIT | StoreSelector.MODE_VIEW = StoreSelector.MODE_EDIT;\n\tproductId: number = null;\n\tcache = new Cache.MemoryCache();\n\tsearchInput: ?StoreSearchInput;\n\n\t#storeInfo: Map = new Map();\n\n\tstatic getById(id: string): ?StoreSelector\n\t{\n\t\treturn instances.get(id) || null;\n\t}\n\n\tconstructor(id, options = {})\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Catalog.StoreSelector');\n\n\t\tthis.id = id || Text.getRandom();\n\t\toptions.inputFieldTitle = options.inputFieldTitle || StoreSelector.INPUT_FIELD_TITLE;\n\t\toptions.inputFieldId = options.inputFieldId || StoreSelector.INPUT_FIELD_ID;\n\t\tthis.options = options || {};\n\n\t\tthis.setMode(options.mode);\n\n\t\tif (options.model instanceof ProductModel && options.model.getField(options.inputFieldId) > 0)\n\t\t{\n\t\t\tthis.#storeInfo.set('id', options.model.getField(options.inputFieldId));\n\t\t\tconst name =\n\t\t\t\tType.isStringFilled(options.model.getField(options.inputFieldTitle))\n\t\t\t\t\t? options.model.getField(options.inputFieldTitle)\n\t\t\t\t\t: ''\n\t\t\t;\n\n\t\t\tthis.setProductId(options.model.getSkuId());\n\t\t\tthis.#storeInfo.set('title', name);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tconst settingsCollection = Extension.getSettings('catalog.store-selector');\n\n\t\t\tthis.#storeInfo.set('id', settingsCollection.get('defaultStoreId'));\n\t\t\tthis.#storeInfo.set('title', settingsCollection.get('defaultStoreName'));\n\t\t}\n\n\t\tthis.searchInput = new StoreSearchInput(this.id, {\n\t\t\tselector: this,\n\t\t\tinputName: this.options.inputFieldTitle,\n\t\t});\n\n\t\t// this.setDetailPath(this.getConfig('DETAIL_PATH'));\n\t\tthis.layout();\n\n\t\tinstances.set(this.id, this);\n\t}\n\n\tsetMode(mode: StoreSelector.MODE_VIEW | StoreSelector.MODE_EDIT): void\n\t{\n\t\tif (!Type.isNil(mode))\n\t\t{\n\t\t\tthis.mode = mode === StoreSelector.MODE_VIEW ? StoreSelector.MODE_VIEW : StoreSelector.MODE_EDIT;\n\t\t}\n\t}\n\n\tsetProductId(productId: number): void\n\t{\n\t\tproductId = Text.toNumber(productId);\n\t\tif (productId > 0)\n\t\t{\n\t\t\tthis.productId = productId;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.productId = null;\n\t\t}\n\n\t\tthis.searchInput?.clearDialogCache();\n\t}\n\n\tisViewMode(): boolean\n\t{\n\t\treturn this.mode === StoreSelector.MODE_VIEW;\n\t}\n\n\tisSaveable(): boolean\n\t{\n\t\treturn !this.isViewMode() && this.isSaveable();\n\t}\n\n\tgetId(): string\n\t{\n\t\treturn this.id;\n\t}\n\n\tgetProductId(): ?number\n\t{\n\t\treturn this.productId;\n\t}\n\n\tgetConfig(name, defaultValue)\n\t{\n\t\treturn BX.prop.get(this.options.config, name, defaultValue);\n\t}\n\n\tgetDetailPath(): string\n\t{\n\t\treturn this.getConfig('detailPath', '');\n\t}\n\n\tgetWrapper(): HTMLElement\n\t{\n\t\tif (!this.wrapper)\n\t\t{\n\t\t\tthis.wrapper = document.getElementById(this.id);\n\t\t}\n\n\t\treturn this.wrapper;\n\t}\n\n\trenderTo(node)\n\t{\n\t\tthis.clearLayout();\n\t\tthis.wrapper = node;\n\t\tthis.layout();\n\t}\n\n\tlayout()\n\t{\n\t\tconst wrapper = this.getWrapper();\n\t\tif (!wrapper)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.defineWrapperClass(wrapper);\n\t\tconst block = Tag.render`<div class=\"catalog-store-field-inner\"></div>`;\n\t\twrapper.appendChild(block);\n\t\tblock.appendChild(this.layoutNameBlock());\n\t}\n\n\tfocusName(): this\n\t{\n\t\tif (this.searchInput)\n\t\t{\n\t\t\tthis.searchInput.focusName();\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tonClear()\n\t{\n\t\tthis.clearState();\n\t\tthis.clearLayout();\n\t\tthis.layout();\n\t\tthis.searchInput.searchInDialog();\n\t\tthis.focusName();\n\n\t\tthis.emit('onClear', {\n\t\t\tselectorId: this.getId(),\n\t\t\trowId: this.getRowId()\n\t\t});\n\t}\n\n\tclearState(): void\n\t{\n\t\tthis.#storeInfo.clear();\n\t}\n\n\tclearLayout(): void\n\t{\n\t\tconst wrapper = this.getWrapper();\n\t\tif (wrapper)\n\t\t{\n\t\t\twrapper.innerHTML = '';\n\t\t}\n\t}\n\n\tunsubscribeEvents()\n\t{\n\t}\n\n\tdefineWrapperClass(wrapper)\n\t{\n\t\tif (this.isViewMode())\n\t\t{\n\t\t\tDom.addClass(wrapper, 'catalog-store-view');\n\t\t\tDom.removeClass(wrapper, 'catalog-store-edit');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.addClass(wrapper, 'catalog-store-edit');\n\t\t\tDom.removeClass(wrapper, 'catalog-store-view');\n\t\t}\n\t}\n\n\tgetViewHtml(): HTMLElement\n\t{\n\t\tconst storeTitle = Text.encode(this.getStoreTitle());\n\t\tconst titlePlaceholder = Loc.getMessage('CATALOG_STORE_SELECTOR_VIEW_NAME_TITLE');\n\n\t\tif (this.getDetailPath())\n\t\t{\n\t\t\treturn Tag.render`\n\t\t\t\t<a href=\"${this.getDetailPath()}\" title=\"${titlePlaceholder}\">${storeTitle}</a>\n\t\t\t`;\n\t\t}\n\n\t\treturn Tag.render`<span title=\"${titlePlaceholder}\">${storeTitle}</span>`;\n\n\t}\n\n\tlayoutNameBlock(): HTMLElement\n\t{\n\t\tconst block = Tag.render`<div class=\"catalog-store-field-input\"></div>`;\n\n\t\tif (this.isViewMode())\n\t\t{\n\t\t\tblock.appendChild(this.getViewHtml());\n\t\t}\n\t\telse\n\t\t{\n\t\t\tblock.appendChild(this.searchInput.layout());\n\t\t}\n\n\t\treturn block;\n\t}\n\n\tgetStoreTitle()\n\t{\n\t\treturn this.#storeInfo.get('title') || '';\n\t}\n\n\tgetStoreId()\n\t{\n\t\treturn this.#storeInfo.get('id') || '';\n\t}\n\n\tonStoreSelect(storeId, storeTitle)\n\t{\n\t\tif (storeTitle === '')\n\t\t{\n\t\t\tstoreTitle = Loc.getMessage('CATALOG_STORE_SELECTOR_EMPTY_STORE_TITLE');\n\t\t}\n\t\tthis.#storeInfo.set('id', storeId);\n\t\tthis.#storeInfo.set('title', storeTitle);\n\t\tthis.clearLayout();\n\t\tthis.layout();\n\n\t\tthis.emit('onChange', {\n\t\t\tselectorId: this.id,\n\t\t\trowId: this.getRowId(),\n\t\t\tfields: [\n\t\t\t\t{\n\t\t\t\t\tNAME: this.options.inputFieldId,\n\t\t\t\t\tVALUE: storeId,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tNAME: this.options.inputFieldTitle,\n\t\t\t\t\tVALUE: storeTitle,\n\t\t\t\t},\n\t\t\t],\n\t\t});\n\t}\n\n\tgetRowId(): string\n\t{\n\t\treturn this.getConfig('ROW_ID');\n\t}\n}\n"],"names":["StoreSearchInput","id","options","Cache","MemoryCache","Text","getRandom","selector","StoreSelector","Error","isEnabledDetailLink","inputName","icon","value","Type","isDomNode","Dom","style","cache","remember","Tag","render","getNameInput","getHiddenNameInput","encode","getStoreTitle","getPlaceholder","handleNameInputHiddenChange","bind","event","target","handleClearIconClick","getDetailPath","handleSearchIconClick","delete","clearInputCache","block","appendChild","getSearchIcon","toggleIcon","getClearIcon","showDetailLink","isStringFilled","getArrowIcon","Event","handleNameInputClick","handleNameInput","handleNameInputBlur","handleNameInputKeyDown","getNameBlock","searchInDialog","handleIconsSwitchingOnNameInput","params","height","context","targetNode","enableSearch","multiple","dropdownMode","searchTabOptions","stub","stubOptions","title","message","subtitle","arrow","events","onStoreSelect","onSearch","createStore","entities","productId","getProductId","searchFields","name","type","system","searchable","dynamicLoad","dynamicSearch","searchOptions","allowCreateItem","Dialog","dialog","getDialog","key","getActiveTab","getSearchTab","preventDefault","Browser","isMac","metaKey","ctrlKey","getFooter","createItem","onClear","stopPropagation","requestAnimationFrame","focus","searchQuery","show","search","setTimeout","focusName","getData","query","searchTab","hide","item","getTargetNode","getTitle","getId","clearLayout","layout","getQuery","Promise","resolve","reject","getTarget","showLoader","ajax","runAction","json","then","response","hideLoader","toInteger","data","addItem","entityId","tabs","getRecentTab","select","catch","Loc","getMessage","instances","Map","get","MODE_EDIT","setEventNamespace","inputFieldTitle","INPUT_FIELD_TITLE","inputFieldId","INPUT_FIELD_ID","setMode","mode","model","ProductModel","getField","set","setProductId","getSkuId","settingsCollection","Extension","getSettings","searchInput","isNil","MODE_VIEW","toNumber","clearDialogCache","isViewMode","isSaveable","defaultValue","BX","prop","config","getConfig","wrapper","document","getElementById","node","getWrapper","defineWrapperClass","layoutNameBlock","clearState","emit","selectorId","rowId","getRowId","clear","innerHTML","addClass","removeClass","storeTitle","titlePlaceholder","getViewHtml","storeId","fields","NAME","VALUE","EventEmitter"],"mappings":"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"}