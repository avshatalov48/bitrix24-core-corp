this.BX=this.BX||{};this.BX.Catalog=this.BX.Catalog||{};(function(e,t,i,n,a,r,s,o,l){"use strict";function d(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function u(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?d(Object(i),!0).forEach((function(t){babelHelpers.defineProperty(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):d(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var c=function(){function e(t,i){babelHelpers.classCallCheck(this,e);this.id=o.Type.isStringFilled(t)?t:o.Text.getRandom();this.settings=o.Type.isObjectLike(i)?i:{};this.container=this.settings.container;if(!this.container){throw"Error: Could not find container."}this.serviceUrl=this.settings.serviceUrl||"";if(!o.Type.isStringFilled(this.serviceUrl)){throw"Error. Could not find service url."}this.tabId=this.settings.tabId||"";if(!o.Type.isStringFilled(this.tabId)){throw"Error: Could not find tab id."}this.params=o.Type.isObjectLike(this.settings.componentData)?this.settings.componentData:{};this.isRequestRunning=false;this.loaded=false}babelHelpers.createClass(e,[{key:"isLoaded",value:function e(){return this.loaded}},{key:"load",value:function e(){if(!this.isLoaded()){this.startRequest(u(u({},this.params),{TABID:this.tabId}))}}},{key:"startRequest",value:function e(t){if(this.isRequestRunning){return false}this.isRequestRunning=true;BX.ajax({url:this.serviceUrl,method:"POST",dataType:"html",data:{LOADERID:this.id,PARAMS:t},onsuccess:this.onRequestSuccess.bind(this),onfailure:this.onRequestFailure.bind(this)});return true}},{key:"onRequestSuccess",value:function e(t){this.isRequestRunning=false;this.container.innerHTML=t;this.loaded=true}},{key:"onRequestFailure",value:function e(){this.isRequestRunning=false;this.loaded=true}}]);return e}();function h(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function p(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?h(Object(i),!0).forEach((function(t){babelHelpers.defineProperty(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):h(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var g=function(){function e(t,i){babelHelpers.classCallCheck(this,e);this.id=o.Type.isStringFilled(t)?t:o.Text.getRandom();this.settings=o.Type.isObjectLike(i)?i:{};this.data=o.Type.isObjectLike(this.settings.data)?this.settings.data:{};this.manager=i.manager||null;this.container=this.settings.container;this.menuContainer=this.settings.menuContainer;this.active=o.Type.isBoolean(this.data.active)?this.data.active:false;this.enabled=o.Type.isBoolean(this.data.enabled)?this.data.enabled:true;o.Event.bind(this.menuContainer.querySelector("a.catalog-entity-section-tab-link"),"click",this.onMenuClick.bind(this));this.loader=null;if(o.Type.isObjectLike(this.data.loader)){this.loader=new c(this.id,p(p({},this.data.loader),{tabId:this.id,container:this.container}))}}babelHelpers.createClass(e,[{key:"isEnabled",value:function e(){return this.enabled}},{key:"isActive",value:function e(){return this.active}},{key:"setActive",value:function e(t){t=!!t;if(this.isActive()===t){return}this.active=t;if(this.isActive()){this.showTab()}else{this.hideTab()}}},{key:"showTab",value:function e(){var t=this;o.Dom.addClass(this.container,"catalog-entity-section-tab-content-show");o.Dom.removeClass(this.container,"catalog-entity-section-tab-content-hide");o.Dom.addClass(this.menuContainer,"catalog-entity-section-tab-current");this.container.style.display="";this.container.style.position="absolute";this.container.style.top=0;this.container.style.left=0;this.container.style.width="100%";new BX.easing({duration:350,start:{opacity:0,translateX:100},finish:{opacity:100,translateX:0},transition:BX.easing.makeEaseOut(BX.easing.transitions.quart),step:function e(i){t.container.style.opacity=i.opacity/100;t.container.style.transform="translateX("+i.translateX+"%)"},complete:function e(){o.Dom.removeClass(t.container,"catalog-entity-section-tab-content-show");t.container.style.cssText="";o.Event.EventEmitter.emit(window,"onEntityDetailsTabShow",[t])}}).animate()}},{key:"hideTab",value:function e(){var t=this;o.Dom.addClass(this.container,"catalog-entity-section-tab-content-hide");o.Dom.removeClass(this.container,"catalog-entity-section-tab-content-show");o.Dom.removeClass(this.menuContainer,"catalog-entity-section-tab-current");new BX.easing({duration:350,start:{opacity:100},finish:{opacity:0},transition:BX.easing.makeEaseOut(BX.easing.transitions.quart),step:function e(i){t.container.style.opacity=i.opacity/100},complete:function e(){t.container.style.display="none";t.container.style.transform="translateX(100%)";t.container.style.opacity=0}}).animate()}},{key:"onMenuClick",value:function e(t){if(this.isEnabled()){if(this.loader&&!this.loader.isLoaded()){this.loader.load()}this.manager.selectItem(this)}t.preventDefault()}}]);return e}();var f=function(){function e(t,i){var n=this;babelHelpers.classCallCheck(this,e);this.id=o.Type.isStringFilled(t)?t:o.Text.getRandom();this.settings=o.Type.isObjectLike(i)?i:{};this.container=this.settings.container;this.menuContainer=this.settings.menuContainer;this.items=[];if(o.Type.isArray(this.settings.data)){this.settings.data.forEach((function(e){n.items.push(new g(e.id,{manager:n,data:e,container:n.container.querySelector('[data-tab-id="'+e.id+'"]'),menuContainer:n.menuContainer.querySelector('[data-tab-id="'+e.id+'"]')}))}))}r.EventEmitter.subscribe("BX.Catalog.EntityCard.TabManager:onOpenTab",(function(e){var t=e.data.tabId;var i=n.findItemById(t);if(i){n.selectItem(i)}}))}babelHelpers.createClass(e,[{key:"findItemById",value:function e(t){return this.items.find((function(e){return e.id===t}))||null}},{key:"selectItem",value:function e(t){r.EventEmitter.emit("BX.Catalog.EntityCard.TabManager:onSelectItem",{tabId:t.id});this.items.forEach((function(e){return e.setActive(e===t)}))}}]);return e}();var m,b,y,v,E,_;var I=function(e){babelHelpers.inherits(t,e);function t(e,i){var n;babelHelpers.classCallCheck(this,t);n=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));n.initialize(e,i);n.innerWrapper=null;return n}babelHelpers.createClass(t,[{key:"getContentWrapper",value:function e(){return this.innerWrapper}},{key:"layout",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};if(this._hasLayout){return}this.ensureWrapperCreated({classNames:["catalog-entity-editor-content-block-field-iblock-section"]});this.adjustWrapper();if(this.isNeedToDisplay()){this._wrapper.appendChild(this.createTitleNode(this.getTitle()));if(this._mode===BX.UI.EntityEditorMode.edit){this.drawEditMode()}else{this.drawViewMode()}if(this.isContextMenuEnabled()){this._wrapper.appendChild(this.createContextMenuButton())}}this.registerLayout(t);this._hasLayout=true}},{key:"drawEditMode",value:function e(){this.defaultInput=o.Tag.render(m||(m=babelHelpers.taggedTemplateLiteral(['<input type="hidden" name="','[]" value="0">'])),this.getName());this._wrapper.appendChild(this.defaultInput);this.innerWrapper=o.Tag.render(b||(b=babelHelpers.taggedTemplateLiteral(['<div class="ui-entity-editor-content-block"></div>'])));this._wrapper.appendChild(this.innerWrapper);o.ajax.runComponentAction("bitrix:catalog.productcard.iblocksectionfield","lazyLoad",{mode:"ajax",data:{iblockId:this.getIblockId(),productId:this.getProductId(),selectedSectionIds:this.getValue()}}).then(this.renderFromResponse.bind(this))["catch"]((function(e){throw new Error(e.errors.join("\n"))}))}},{key:"renderFromResponse",value:function e(t){if(!this._wrapper){return}o.Runtime.html(this.innerWrapper,t.data.html,{callback:this.initEntitySelector.bind(this)})}},{key:"initEntitySelector",value:function e(){r.EventEmitter.subscribe(r.EventEmitter.GLOBAL_TARGET,"Item:onSelect",this.markAsChanged.bind(this));r.EventEmitter.subscribe(r.EventEmitter.GLOBAL_TARGET,"Item:onDeselect",this.markAsChanged.bind(this))}},{key:"changeDisplay",value:function e(t,i){if(!t){return}t.style.display=i?"":"none"}},{key:"markAsChanged",value:function e(i){babelHelpers.get(babelHelpers.getPrototypeOf(t.prototype),"markAsChanged",this).call(this);r.EventEmitter.emit(this.getEditor(),"IblockSectionField:onChange",[this].concat(babelHelpers.toConsumableArray(i.getData())))}},{key:"drawViewMode",value:function e(){if(this.hasNoSections()){this.innerWrapper=o.Tag.render(y||(y=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="ui-entity-editor-content-block">\n\t\t\t\t\t',"\n\t\t\t\t</div>\n\t\t\t"])),o.Loc.getMessage("CATALOG_ENTITY_CARD_EMPTY_SECTION"));o.Dom.addClass(this._wrapper,"ui-entity-editor-content-block-click-empty")}else{var t=[];this.getSections().forEach((function(e){var i="";if(o.Type.isStringFilled(e.PICTURE)){i=o.Tag.render(v||(v=babelHelpers.taggedTemplateLiteral(['<span class="ui-tile-selector-item-picture" style="background-image: url(\'',"');\"></span>"])),o.Text.encode(e.PICTURE))}t.push(o.Tag.render(E||(E=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t\t<span class="ui-tile-selector-item ui-tile-selector-item-readonly-yes">\n\t\t\t\t\t\t','\n\t\t\t\t\t\t<span data-role="tile-item-name">',"</span>\n\t\t\t\t\t</span>\n\t\t\t\t"])),i,o.Text.encode(e.NAME)))}));this.innerWrapper=o.Tag.render(_||(_=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="ui-entity-editor-content-block">\n\t\t\t\t\t<span class="ui-tile-selector-selector-wrap readonly">\n\t\t\t\t\t\t',"\n\t\t\t\t\t</span>\n\t\t\t\t</div>"])),t)}this._wrapper.appendChild(this.innerWrapper)}},{key:"getSections",value:function e(){return this._model.getField("IBLOCK_SECTION_DATA",{})}},{key:"getIblockId",value:function e(){return this._model.getField("IBLOCK_ID",0)}},{key:"getProductId",value:function e(){return this._model.getField("ID",0)}},{key:"hasNoSections",value:function e(){var t=this.getValue();return t.length===0||t.length===1&&(t.includes("0")||t.includes(0))}},{key:"doClearLayout",value:function e(t){if(this.defaultInput){o.Dom.clean(this.defaultInput);this.defaultInput=null}if(this.innerWrapper){o.Dom.clean(this.innerWrapper);this.innerWrapper=null}this._hasLayout=false}},{key:"getModeSwitchType",value:function e(t){var i=BX.UI.EntityEditorModeSwitchType.common;if(t===BX.UI.EntityEditorMode.edit){i|=BX.UI.EntityEditorModeSwitchType.button|BX.UI.EntityEditorModeSwitchType.content}return i}}]);return t}(BX.UI.EntityEditorField);var C,T,k,B,S,D,A,H,O,L,P,U,w,X,M,R,N,F;function G(e,t){x(e,t);t.add(e)}function x(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function j(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var Y=new WeakSet;var V=new WeakSet;var W=new WeakSet;var q=new WeakSet;var z=function(e){babelHelpers.inherits(t,e);function t(e,i){var n;babelHelpers.classCallCheck(this,t);n=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));G(babelHelpers.assertThisInitialized(n),q);G(babelHelpers.assertThisInitialized(n),W);G(babelHelpers.assertThisInitialized(n),V);G(babelHelpers.assertThisInitialized(n),Y);babelHelpers.defineProperty(babelHelpers.assertThisInitialized(n),"getValue",(function(){return BX.UI.EntityEditorBoolean.superclass.getValue.apply(this)}));babelHelpers.defineProperty(babelHelpers.assertThisInitialized(n),"hasContentToDisplay",(function(){return true}));babelHelpers.defineProperty(babelHelpers.assertThisInitialized(n),"doPrepareContextMenuItems",(function(e){if(this.isShownSymbolicCode){e.push({value:"hide_symbolic_code",text:o.Loc.getMessage("CATALOG_ENTITY_CARD_HIDE_SYMBOLIC_CODE")})}else{e.push({value:"show_symbolic_code",text:o.Loc.getMessage("CATALOG_ENTITY_CARD_SHOW_SYMBOLIC_CODE")})}}));n.initialize(e,i);n.isShownSymbolicCode=n.getSchemeShowCodeState()==="true";n.allowToGenerateCode=n._editor.isNew();return n}babelHelpers.createClass(t,[{key:"getSchemeShowCodeState",value:function e(){return BX.prop.get(this.getSchemeElement()._options,"showCode")}},{key:"setSchemeShowCodeState",value:function e(t){this.getSchemeElement()._options["showCode"]=t}},{key:"processContextMenuCommand",value:function e(i,n){babelHelpers.get(babelHelpers.getPrototypeOf(t.prototype),"processContextMenuCommand",this).call(this,i,n);var a=document.getElementById("code_container");var r=document.getElementById("name_code_marker");if(n==="hide_symbolic_code"){this.isShownSymbolicCode=false;this.allowToGenerateCode=this._editor.isNew();if(this._mode===BX.UI.EntityEditorMode.edit){var s=document.getElementById("code_text");var l=document.getElementById("code_state_button");s.readOnly=this.allowToGenerateCode;if(this.allowToGenerateCode){s.className="ui-ctl-element ui-ctl-element-symbol-code-input-disabled";l.className="ui-ctl-before ui-ctl-icon-chain"}else{s.className="ui-ctl-element";l.className="ui-ctl-before ui-ctl-icon-unchain"}a.className="name-code-container name-code-container-hidden";o.Dom.removeClass(this._innerWrapper,"ui-entity-editor-content-block--code");o.Dom.addClass(this._innerWrapper,"ui-entity-editor-content-block--no-code");r.style.display="inline"}else{this.refreshLayout()}this.setSchemeShowCodeState(false);this._parent.processChildControlSchemeChange(this)}else if(n==="show_symbolic_code"){this.isShownSymbolicCode=true;if(this._mode===BX.UI.EntityEditorMode.edit){a.className="name-code-container";o.Dom.removeClass(this._innerWrapper,"ui-entity-editor-content-block--no-code");o.Dom.addClass(this._innerWrapper,"ui-entity-editor-content-block--code");r.style.display="none"}else{this.refreshLayout()}this.setSchemeShowCodeState(true);this._parent.processChildControlSchemeChange(this)}}},{key:"createTitleMarker",value:function e(){if(this._mode===BX.UI.EntityEditorMode.view){return null}var t=this.isShownSymbolicCode?"none":"inline";if(this._mode===BX.UI.EntityEditorMode.edit){return o.Tag.render(C||(C=babelHelpers.taggedTemplateLiteral(['<span id="name_code_marker" style="color: rgb(255, 0, 0); display: ',';">*</span>'])),t)}}},{key:"layout",value:function e(t){if(this._hasLayout){return}this.ensureWrapperCreated({classNames:["ui-entity-editor-field-multitext"]});this.adjustWrapper();if(!this.isNeedToDisplay()){this.registerLayout(t);this._hasLayout=true;return}var i=this.getTitle();var n=this.getValue();this._inputValue=n;this._innerWrapper=null;if(this.isDragEnabled()){o.Dom.append(this.createDragButton(),this._wrapper)}o.Dom.append(this.createTitleNode(i),this._wrapper);if(this._mode===BX.UI.EntityEditorMode.edit){this._inputContainer=o.Tag.render(T||(T=babelHelpers.taggedTemplateLiteral(["<div></div>"])));for(var a in n){o.Dom.append(this.createSingleInput(n[a],a),this._inputContainer)}this._innerWrapper=o.Tag.render(k||(k=babelHelpers.taggedTemplateLiteral(['<div class="ui-entity-editor-content-block">',"</div>"])),this._inputContainer);if(this.isShownSymbolicCode){o.Dom.addClass(this._innerWrapper,"ui-entity-editor-content-block--code")}else{o.Dom.addClass(this._innerWrapper,"ui-entity-editor-content-block--no-code")}}else{this._innerWrapper=o.Tag.render(B||(B=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="ui-entity-editor-content-block">',"</div>\n\t\t\t"])),this.getViewInnerLayout())}o.Dom.append(this._innerWrapper,this._wrapper);if(this.isContextMenuEnabled()){o.Dom.append(this.createContextMenuButton(),this._wrapper)}if(this.isDragEnabled()){this.initializeDragDropAbilities()}this.registerLayout(t);this._hasLayout=true}},{key:"validate",value:function e(t){if(this._mode!==BX.UI.EntityEditorMode.edit){throw"BX.UI.EntityEditorMultiText. Invalid validation context"}if(!this.isEditable()){return true}this.clearError();if(this.hasValidators()){return this.executeValidators(t)}var i=false;if(this._inputContainer){var n=document.getElementById("name_text");if(BX.util.trim(n.value)===""){i=true;o.Dom.addClass(n.parentNode,"ui-ctl-danger")}else{o.Dom.removeClass(n.parentNode,"ui-ctl-danger")}}var a=!this.isRequired()||!i;if(!a){t.addError(BX.UI.EntityValidationError.create({field:this}));this.showRequiredFieldError(this._input)}return a}},{key:"showError",value:function e(t,i){if(!this._errorContainer){this._errorContainer=o.Tag.render(S||(S=babelHelpers.taggedTemplateLiteral(['<div class="ui-entity-editor-field-error-text"></div>'])))}this._errorContainer.innerHTML=BX.util.htmlspecialchars(t);if(this._wrapper){o.Dom.append(this._errorContainer,this._wrapper)}this._hasError=true}},{key:"createSingleInput",value:function e(t,i){var n=o.Tag.render(D||(D=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div id="','_container"></div>\n\t\t'])),i.toLowerCase());var a=o.Tag.render(A||(A=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="ui-ctl ui-ctl-w100 ui-ctl-textbox"></div>\n\t\t'])));var r;if(this.getLineCount()>1){r=o.Tag.render(H||(H=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<textarea\n\t\t\t\t\tclass="ui-ctl-element ui-entity-editor-field-textarea"\n\t\t\t\t\tname="','"\n\t\t\t\t\tid="','"\n\t\t\t\t\trows="','">',"</textarea>\n\t\t\t"])),i,i.toLowerCase()+"_text",this.getLineCount(),BX.util.htmlspecialchars(t)||"")}else{r=o.Tag.render(O||(O=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<input\n\t\t\t\t\tclass="ui-ctl-element"\n\t\t\t\t\tname="','"\n\t\t\t\t\tid="','"\n\t\t\t\t\ttype="text"\n\t\t\t\t\tvalue="','"/>\n\t\t\t'])),i,i.toLowerCase()+"_text",BX.util.htmlspecialchars(t)||"")}o.Event.bind(r,"input",j(this,V,Q).bind(this,i));if(i==="CODE"){if(!this.isShownSymbolicCode){o.Dom.addClass(n,"name-code-container-hidden")}if(this.allowToGenerateCode===true){o.Dom.addClass(r,"ui-ctl-element-symbol-code-input-disabled");o.Dom.attr(r,"readonly",this.allowToGenerateCode)}o.Dom.addClass(a,"ui-ctl-ext-before-icon");o.Dom.addClass(n,"name-code-container");var s=this.allowToGenerateCode?"chain":"unchain";var l=o.Tag.render(L||(L=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<button name="','" class="ui-ctl-before ui-ctl-icon-','" id="code_state_button"></button>\n\t\t\t'])),i,s);o.Event.bind(l,"click",j(this,q,J).bind(this));o.Dom.append(l,a)}var d=j(this,Y,K).call(this,i);o.Dom.append(d,n);o.Dom.append(r,a);o.Dom.append(a,n);return n}},{key:"getViewInnerLayout",value:function e(){var t=o.Tag.render(P||(P=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="ui-entity-editor-content-block-text"></div>\n\t\t'])));var i=this.getValue();if(!this.isShownSymbolicCode){o.Dom.append(o.Tag.render(U||(U=babelHelpers.taggedTemplateLiteral(["<p>","</p>"])),BX.util.htmlspecialchars(i.NAME)),t);return t}o.Dom.append(o.Tag.render(w||(w=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="ui-entity-editor-symbol-code-label">\n\t\t\t\t',"\n\t\t\t</div>\n\t\t"])),o.Loc.getMessage("CATALOG_ENTITY_CARD_NAME")),t);o.Dom.append(o.Tag.render(X||(X=babelHelpers.taggedTemplateLiteral(["<p>","</p>"])),BX.util.htmlspecialchars(i.NAME)),t);o.Dom.addClass(t,"ui-entity-editor-symbol-code");var n=i.CODE===""?o.Loc.getMessage("UI_ENTITY_EDITOR_FIELD_EMPTY"):i.CODE;var a=this.allowToGenerateCode?"ui-entity-editor-symbol-code-value-chain":"ui-entity-editor-symbol-code-value-unchain";o.Dom.append(o.Tag.render(M||(M=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="ui-entity-editor-symbol-code-box">\n\t\t\t\t<div class="ui-entity-editor-symbol-code-label">\n\t\t\t\t\t','\n\t\t\t\t</div>\n\t\t\t\t<div class="ui-entity-editor-symbol-code-value ','">\n\t\t\t\t\t',"\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t"])),o.Loc.getMessage("CATALOG_ENTITY_CARD_SYMBOLIC_CODE"),a,BX.util.htmlspecialchars(n)),t);return t}}]);return t}(BX.UI.EntityEditorMultiText);function K(e){var t=o.Tag.render(R||(R=babelHelpers.taggedTemplateLiteral(['<label class="ui-entity-editor-block-title"></label>'])));var i;if(e==="CODE"){i=o.Tag.render(N||(N=babelHelpers.taggedTemplateLiteral(["<span>","</span>"])),o.Loc.getMessage("CATALOG_ENTITY_CARD_SYMBOLIC_CODE"));o.Dom.append(i,t);o.Dom.append(j(this,W,Z).call(this),t)}else{i=o.Tag.render(F||(F=babelHelpers.taggedTemplateLiteral(["\n\t\t\t\t<span>\n\t\t\t\t\t",'\n\t\t\t\t\t<span style="color: rgb(255, 0, 0);">*</span>\n\t\t\t\t</span>\n\t\t\t'])),o.Loc.getMessage("CATALOG_ENTITY_CARD_NAME"));o.Dom.append(i,t)}return t}function Q(e){this._changeHandler();if(this.allowToGenerateCode&&e==="NAME"){var t=document.getElementById("code_text");var i=document.getElementById("name_text");t.value=BX.translit(i.value,null)}}function Z(){return BX.UI.Hint.createNode(o.Loc.getMessage("CATALOG_ENTITY_CARD_SYMBOLIC_CODE_HINT"))}function J(){var e=document.getElementById("code_text");var t=document.getElementById("name_text");var i=document.getElementById("code_state_button");this.allowToGenerateCode=!this.allowToGenerateCode;e.readOnly=this.allowToGenerateCode;if(this.allowToGenerateCode){e.className="ui-ctl-element ui-ctl-element-symbol-code-input-disabled";i.className="ui-ctl-before ui-ctl-icon-chain";e.value=BX.translit(t.value,null)}else{e.className="ui-ctl-element";i.className="ui-ctl-before ui-ctl-icon-unchain";var n=document.getElementById("name_text");var a=BX.translit(n.value,null);if(e.value!==a){this.markAsChanged()}e.value=a}}var $=function(){function e(){var t=this;babelHelpers.classCallCheck(this,e);r.EventEmitter.subscribe("BX.UI.EntityEditorControlFactory:onInitialize",(function(e){var i=e.getCompatData(),n=babelHelpers.slicedToArray(i,2),a=n[1];a.methods["entityCard"]=t.factory.bind(t)}))}babelHelpers.createClass(e,[{key:"factory",value:function e(t,i,n){if(t==="iblock_section"){return new I(i,n)}else if(t==="name-code"){return new z(i,n)}return null}}]);return e}();function ee(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function te(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(i),!0).forEach((function(t){babelHelpers.defineProperty(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ee(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var ie="PROPERTY_";var ne="properties";var ae=function(e){babelHelpers.inherits(t,e);function t(e){var i;var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};babelHelpers.classCallCheck(this,t);i=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));babelHelpers.defineProperty(babelHelpers.assertThisInitialized(i),"onChangeHandler",i.handleChange.bind(babelHelpers.assertThisInitialized(i)));i.initialize(e,n);i.isRequesting=false;i.clearServiceFields();r.EventEmitter.subscribe(i._editor,"IblockSectionField:onChange",i.onChangeHandler);return i}babelHelpers.createClass(t,[{key:"clearServiceFields",value:function e(){this.lastDataHash=null;this.initialElements=null;this.deletedControls={};this.deletedAvailableSchemes={}}},{key:"handleChange",value:function e(t){var i=this;var n=t.getData();n.shift();var a=JSON.stringify(n);if(this.lastDataHash===null||this.lastDataHash!==a){this.lastDataHash=a;clearTimeout(this.timeout);this.timeout=setTimeout((function(){i.refreshLinkedProperties(n)}),50)}}},{key:"refreshLinkedProperties",value:function e(t){var i=this;if(this.isRequesting){return}this.isRequesting=true;o.ajax.runComponentAction(this._editor._settings.ajaxData.COMPONENT_NAME,"refreshLinkedProperties",{mode:"class",signedParameters:this._editor._settings.ajaxData.SIGNED_PARAMETERS,data:{sectionIds:t}}).then((function(e){var t=i.getAllCurrentProperties();if(i.initialElements===null){i.initialElements=babelHelpers.toConsumableArray(t)}e.data.ENTITY_FIELDS.forEach((function(e){if(!t.includes(e.name)){i.addProperty(e,{layout:{forceDisplay:true},mode:BX.UI.EntityEditorMode.edit})}}));var n=e.data.ENTITY_FIELDS.map((function(e){return e.name}));t.forEach((function(e){if(!n.includes(e)){i.removeProperty(e)}}));i._editor.commitSchemeChanges();i.isRequesting=false}))["catch"]((function(e){i.isRequesting=false}))}},{key:"getAllCurrentProperties",value:function e(){var t=this._editor.getAllControls().filter((function(e){return e.getName().indexOf(ie)===0})).map((function(e){return e.getName()}));var i=this._editor.getAvailableSchemeElements().filter((function(e){return e.getName().indexOf(ie)===0})).map((function(e){return e.getName()}));return[].concat(babelHelpers.toConsumableArray(t),babelHelpers.toConsumableArray(i))}},{key:"addProperty",value:function e(t){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(t.name in this.deletedControls){this.restoreDeletedProperty(this.deletedControls[t.name],i)}else if(t.name in this.deletedAvailableSchemes){this.restoreDeletedAvailableProperty(this.deletedAvailableSchemes[t.name],i)}else{this.createProperty(t,i)}}},{key:"restoreDeletedProperty",value:function e(t){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var n=i.mode||t._mode;t._mode=n;t.getParent().addChild(t,te(te({},i),{},{enableSaving:false}));if(n===BX.UI.EntityEditorMode.edit){this._editor.registerActiveControl(t)}else if(n===BX.UI.EntityEditorMode.view){this._editor.unregisterActiveControl(t)}}},{key:"restoreDeletedAvailableProperty",value:function e(t){this._editor.addAvailableSchemeElement(t)}},{key:"createProperty",value:function e(t){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var n=this._editor.getSchemeElementByName(ne);var a=BX.UI.EntitySchemeElement.create(t);n._elements.push(a);var r=i.mode||BX.UI.EntityEditorMode.edit;var s=this._editor.createControl(a.getType(),a.getName(),{schemeElement:a,model:this._model,parent:this,mode:r});if(!s){return}var o=this._editor.getControlById(ne);o.addChild(s,te(te({},i),{},{enableSaving:false}));return s}},{key:"removeProperty",value:function e(t){var i=this._editor.getControlByIdRecursive(t);if(i){this.deletedControls[i.getName()]=i;i.getParent().removeChild(i,{enableSaving:false});this._editor.removeAvailableSchemeElement(i.getSchemeElement());this._editor.unregisterActiveControl(i)}else{var n=this._editor.getAvailableSchemeElementByName(t);if(n){this.deletedAvailableSchemes[n.getName()]=n;this._editor.removeAvailableSchemeElement(n)}}}},{key:"rollback",value:function e(){var i=this;babelHelpers.get(babelHelpers.getPrototypeOf(t.prototype),"rollback",this).call(this);if(this.initialElements===null){return}var n=this.getAllCurrentProperties();n.forEach((function(e){if(!i.initialElements.includes(e)){i.removeProperty(e)}}));this.initialElements.forEach((function(e){if(!n.includes(e)){i.addProperty({name:e},{layout:{forceDisplay:false},mode:BX.UI.EntityEditorMode.view})}}));this._editor.commitSchemeChanges();this.clearServiceFields()}}]);return t}(BX.UI.EntityEditorController);function re(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function se(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?re(Object(i),!0).forEach((function(t){babelHelpers.defineProperty(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):re(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var oe=function(e){babelHelpers.inherits(t,e);function t(e,i){var n;babelHelpers.classCallCheck(this,t);n=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));babelHelpers.defineProperty(babelHelpers.assertThisInitialized(n),"areaHeight",null);n.initialize(e,i);return n}babelHelpers.createClass(t,[{key:"doInitialize",value:function e(){babelHelpers.get(babelHelpers.getPrototypeOf(t.prototype),"doInitialize",this).call(this);r.EventEmitter.subscribe("Grid::thereEditedRows",this.markAsChangedHandler.bind(this));r.EventEmitter.subscribe("Grid::noEditedRows",this.checkEditorToolbar.bind(this));r.EventEmitter.subscribe("Grid::updated",this.checkEditorToolbar.bind(this));r.EventEmitter.subscribe("Grid::beforeRequest",this.onBeforeGridRequest.bind(this));r.EventEmitter.subscribe("onAjaxSuccess",this.ajaxSuccessHandler.bind(this));r.EventEmitter.subscribe("BX.UI.EntityEditorIncludedArea:onBeforeLoad",this.onBeforeIncludedAreaLoaded.bind(this));r.EventEmitter.subscribe("BX.UI.EntityEditorIncludedArea:onAfterLoad",this.onAfterIncludedAreaLoaded.bind(this));this.subscribeToFormSubmit()}},{key:"onBeforeIncludedAreaLoaded",value:function e(t){if(o.Type.isNumber(this.areaHeight)){o.Dom.style(this.getVariationGridLoader(),"height",this.areaHeight+"px")}}},{key:"onAfterIncludedAreaLoaded",value:function e(t){o.Dom.style(this.getVariationGridLoader(),"height","");this.areaHeight=null}},{key:"getVariationGridLoader",value:function e(){var t=this.getGridControl();if(t){var i=t.getWrapper();if(i){return i.querySelector(".ui-entity-editor-included-area-container-loader")}}return null}},{key:"rollback",value:function e(){babelHelpers.get(babelHelpers.getPrototypeOf(t.prototype),"rollback",this).call(this);this.checkEditorToolbar();this.unsubscribeGridEvents();BX.Main.gridManager.destroy(this.getGridId())}},{key:"onAfterSave",value:function e(){if(this.isChanged()||this._editor.isChanged()){this.setGridControlCache(null);r.EventEmitter.emit("onAfterVariationGridSave",{gridId:this.getGridId()})}this.subscribeToFormSubmit();babelHelpers.get(babelHelpers.getPrototypeOf(t.prototype),"onAfterSave",this).call(this)}},{key:"setGridControlCache",value:function e(t){var i=this.getGridControl();if(i){i._loadedHtml=t}}},{key:"onBeforeSubmit",value:function e(){this.unsubscribeGridEvents()}},{key:"getVariationGridComponent",value:function e(){return o.Reflection.getClass("BX.Catalog.VariationGrid.Instance")}},{key:"unsubscribeGridEvents",value:function e(){var t,i,n;var a=this.getVariationGridComponent();if(a){a.destroy()}var s=(t=this.getGrid())===null||t===void 0?void 0:(i=t.getSettingsWindow())===null||i===void 0?void 0:i.getPopup();if(s){r.EventEmitter.emit(this.getGrid().getSettingsWindow().getPopup(),"onDestroy")}r.EventEmitter.unsubscribeAll("BX.Main.grid:paramsUpdated");(n=this.getGrid())===null||n===void 0?void 0:n.destroy()}},{key:"ajaxSuccessHandler",value:function e(t){var i=t.getCompatData(),n=babelHelpers.slicedToArray(i,2),a=n[1];if(a.url.indexOf(this.getReloadUrl())===0){this.setGridControlCache(null)}}},{key:"subscribeToFormSubmit",value:function e(){r.EventEmitter.subscribe(this._editor._ajaxForm,"onBeforeSubmit",this.onBeforeSubmitForm.bind(this))}},{key:"markAsChangedHandler",value:function e(){if(!this._editor.isNew()){this.markAsChanged()}}},{key:"checkEditorToolbar",value:function e(){this._isChanged=false;if(this._editor.getActiveControlCount()>0){this._editor.showToolPanel()}else{this._editor.hideToolPanel()}if(this._editor._toolPanel){this._editor._toolPanel.clearErrors()}}},{key:"getGridControl",value:function e(){return this._editor.getControlById("variation_grid")}},{key:"onBeforeGridRequest",value:function e(t){var i=t.getCompatData(),n=babelHelpers.slicedToArray(i,2),a=n[0],r=n[1];if(!a||!a.parent||a.parent.getId()!==this.getGridId()){return}r.sessid=BX.bitrix_sessid();r.method="POST";r.url=this.getReloadUrl();r.data=se(se({},r.data),{},{signedParameters:this.getSignedParameters()});this.unsubscribeGridEvents()}},{key:"getReloadUrl",value:function e(){return this.getConfigStringParam("reloadUrl","")}},{key:"getSignedParameters",value:function e(){return this.getConfigStringParam("signedParameters","")}},{key:"getGridId",value:function e(){return this.getConfigStringParam("gridId","")}},{key:"getGrid",value:function e(){if(!o.Reflection.getClass("BX.Main.gridManager.getInstanceById")){return null}return BX.Main.gridManager.getInstanceById(this.getGridId())}},{key:"onBeforeSubmitForm",value:function e(t){var i=t.getCompatData(),n=babelHelpers.slicedToArray(i,2),a=n[1];var r=this.getGrid();if(!r){return}var s=this.getGridId();var l=r.getRows().getEditSelectedValues();var d=r.getParam("COPY_ITEMS_MAP",{});for(var u in l){if(!l.hasOwnProperty(u)){continue}for(var c in l[u]){if(!l[u].hasOwnProperty(c)){continue}if(c.includes("SKU_GRID_CATALOG_GROUP")||c.includes("SKU_GRID_PURCHASING")){for(var h in l[u][c]){if(l[u][c].hasOwnProperty(h)){l[u][h]=l[u][c][h]}}}else if(c.includes("[EDIT_HTML]")){var p=c.replace("[EDIT_HTML]","");if(p.endsWith("_custom")){if("bxu_files[]"in l[u][c]){l[u][c].isFile=true;delete l[u][c]["bxu_files[]"]}if(l[u][c].isFile){for(var g in l[u][c]){if(l[u][c].hasOwnProperty(g)){var f=new RegExp(/([0-9A-Za-z_]+?(_n\d+)*)\[([A-Za-z_]+)\]/);if(f.test(g)){var m=void 0,b=void 0;var y=g.match(f);var v=babelHelpers.slicedToArray(y,4);m=v[1];b=v[3];if(m&&b){l[u][c][m]=l[u][c][m]||{};l[u][c][m][b]=l[u][c][g];delete l[u][c][g]}}}}}}l[u][p]=l[u][c];delete l[u][c]}}if(!o.Type.isNil(d[u])){l[u]["COPY_SKU_ID"]=d[u]}}if(!o.Type.isPlainObject(a.options)){a.options={}}if(!o.Type.isPlainObject(a.options.data)){a.options.data={}}a.options.data[s]=l;this.areaHeight=this.getGridControl().getWrapper().offsetHeight;BX.Main.gridManager.destroy(this.getGridId())}}]);return t}(BX.UI.EntityEditorController);var le=function(e){babelHelpers.inherits(t,e);function t(e,i){var n;babelHelpers.classCallCheck(this,t);n=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));n.initialize(e,i);r.EventEmitter.subscribe("onAddGoogleMapPoint",n.markAsChanged.bind(babelHelpers.assertThisInitialized(n)));return n}babelHelpers.createClass(t,[{key:"rollback",value:function e(){babelHelpers.get(babelHelpers.getPrototypeOf(t.prototype),"rollback",this).call(this);if(this._isChanged){this._isChanged=false}}}]);return t}(BX.UI.EntityEditorController);var de=function(e){babelHelpers.inherits(t,e);function t(e,i){var n;babelHelpers.classCallCheck(this,t);n=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));n.initialize(e,i);r.EventEmitter.subscribe("onChangeEmployee",n.markAsChanged.bind(babelHelpers.assertThisInitialized(n)));return n}babelHelpers.createClass(t,[{key:"rollback",value:function e(){babelHelpers.get(babelHelpers.getPrototypeOf(t.prototype),"rollback",this).call(this);if(this._isChanged){this._isChanged=false}}}]);return t}(BX.UI.EntityEditorController);var ue=function(e){babelHelpers.inherits(t,e);function t(e,i){var n;babelHelpers.classCallCheck(this,t);n=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));n.initialize(e,i);return n}babelHelpers.createClass(t,[{key:"rollback",value:function e(){babelHelpers.get(babelHelpers.getPrototypeOf(t.prototype),"rollback",this).call(this);if(this._isChanged){this._isChanged=false}r.EventEmitter.unsubscribeAll("BX.Main.User.SelectorController::open")}},{key:"onBeforeSubmit",value:function e(){babelHelpers.get(babelHelpers.getPrototypeOf(t.prototype),"onBeforeSubmit",this).call(this);r.EventEmitter.unsubscribeAll("BX.Main.User.SelectorController::open")}}]);return t}(BX.UI.EntityEditorController);function ce(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function he(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(i),!0).forEach((function(t){babelHelpers.defineProperty(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ce(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var pe=function(e){babelHelpers.inherits(t,e);function t(e,i){var n;babelHelpers.classCallCheck(this,t);n=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));babelHelpers.defineProperty(babelHelpers.assertThisInitialized(n),"fieldAddHandler",n.handleFieldAdd.bind(babelHelpers.assertThisInitialized(n)));babelHelpers.defineProperty(babelHelpers.assertThisInitialized(n),"fieldUpdateHandler",n.handleFieldUpdate.bind(babelHelpers.assertThisInitialized(n)));n.initialize(e,i);r.EventEmitter.subscribe(n._editor,"BX.UI.EntityEditor:onFieldCreate",n.fieldAddHandler);r.EventEmitter.subscribe(n._editor,"BX.UI.EntityEditor:onFieldModify",n.fieldUpdateHandler);return n}babelHelpers.createClass(t,[{key:"handleFieldAdd",value:function e(t){var i=this;var n=t.getCompatData(),a=babelHelpers.slicedToArray(n,2),r=a[0],s=a[1];var l=this.getFieldsForm(s);o.ajax.runComponentAction(this._editor._settings.ajaxData.COMPONENT_NAME,"addProperty",{mode:"class",signedParameters:this._editor._settings.ajaxData.SIGNED_PARAMETERS,data:l}).then((function(e){var t=e.data.PROPERTY_FIELDS;if(!t){return}var n=e.data.ADDITIONAL_VALUES;if(n){var a=i._editor._model;for(var o=0,l=Object.entries(n);o<l.length;o++){var d=babelHelpers.slicedToArray(l[o],2),u=d[0],c=d[1];a.setField(u,c)}}var h=BX.UI.EntityEditorMode.view;if(r instanceof BX.UI.EntityEditorSection){h=r.getMode()}var p=i.createProperty(t,r.getName(),{layout:{notifyIfNotDisplayed:true,forceDisplay:s.showAlways},mode:h});p.toggleOptionFlag(s.showAlways);i._editor.saveSchemeChanges();i.isRequesting=false}))["catch"]((function(e){i.isRequesting=false}))}},{key:"handleFieldUpdate",value:function e(t){var i=this;var n=t.getCompatData(),a=babelHelpers.slicedToArray(n,2),r=a[0],s=a[1];if(!(s.field instanceof BX.UI.EntityEditorControl)){return}var l=s.field;s.CODE=l.getId();var d=this.getFieldsForm(s);var u=l.getSchemeElement();u._isRequired=s.mandatory;o.ajax.runComponentAction(this._editor._settings.ajaxData.COMPONENT_NAME,"updateProperty",{mode:"class",signedParameters:this._editor._settings.ajaxData.SIGNED_PARAMETERS,data:d}).then((function(e){var t;var n=e===null||e===void 0?void 0:(t=e.data)===null||t===void 0?void 0:t.PROPERTY_FIELDS;if(l instanceof BX.UI.EntityEditorDatetime||l instanceof BX.UI.EntityEditorMultiDatetime){var a=l.getSchemeElement().getData();var o=n===null||n===void 0?void 0:n.data;if(o){a.enableTime=o.enableTime;a.dateViewFormat=o.dateViewFormat;l.refreshLayout()}}var d=null;var u=null;if(s.multiple===true){if(l instanceof BX.UI.EntityEditorText){d="multitext"}else if(l instanceof BX.UI.EntityEditorList){d="multilist"}else if(l instanceof BX.UI.EntityEditorDatetime){d="multidatetime"}else if(l instanceof BX.UI.EntityEditorNumber){d="multinumber"}}else{if(l instanceof BX.UI.EntityEditorMultiList){d="list"}else if(l instanceof BX.UI.EntityEditorMultiDatetime){d="datetime"}else if(l instanceof BX.UI.EntityEditorMultiNumber){d="number"}else if(l instanceof BX.UI.EntityEditorMultiText){d="text"}}u=l.getSchemeElement();if((l instanceof BX.UI.EntityEditorList||l instanceof BX.UI.EntityEditorMultiList)&&n){u=BX.UI.EntitySchemeElement.create(n);d=n.type}if(d){var c=r.getChildIndex(l);var h=i._editor.createControl(d,s.CODE,{schemeElement:u,model:r._model,parent:r,mode:r.getMode()});r.addChild(h,{index:c,layout:{forceDisplay:true},enableSaving:false});l._schemeElement=null;r.removeChild(l,{enableSaving:false})}i.isRequesting=false}))["catch"]((function(e){i.isRequesting=false}))}},{key:"getFieldsForm",value:function e(t){var i=this;var n=new FormData;var a={NAME:t.label,MULTIPLE:t.multiple?"Y":"N",IS_REQUIRED:t.mandatory?"Y":"N",IS_PUBLIC:t.isPublic?"Y":"N",PROPERTY_TYPE:"S",CODE:t.CODE||""};switch(t.typeId){case"integer":case"double":a.PROPERTY_TYPE="N";break;case"list":case"multilist":a.PROPERTY_TYPE="L";(t.enumeration||[]).forEach((function(e,t){n.append(i.getFormFieldName("VALUES]["+t+"][SORT"),e.SORT);n.append(i.getFormFieldName("VALUES]["+t+"][VALUE"),e.VALUE);n.append(i.getFormFieldName("VALUES]["+t+"][ID"),e.ID)}));break;case"directory":a.USER_TYPE="directory";(t.enumeration||[]).forEach((function(e,t){n.append(i.getFormFieldName("VALUES]["+t+"][SORT"),e.SORT);n.append(i.getFormFieldName("VALUES]["+t+"][VALUE"),e.VALUE.value);n.append(i.getFormFieldName("VALUES]["+t+"][XML_ID"),e.XML_ID);n.append(i.getFormFieldName("VALUES]["+t+"][FILE_ID"),e.FILE_ID);n.append("FILES["+e.SORT+"]",e.VALUE.file)}));break;case"boolean":a.PROPERTY_TYPE="L";n.append(this.getFormFieldName("VALUES][0][VALUE"),"Y");a.LIST_TYPE="C";break;case"money":a.USER_TYPE="Money";break;case"address":a.USER_TYPE="map_google";break;case"datetime":case"multidatetime":a.USER_TYPE=t.enableTime===true?"DateTime":"Date";break;case"file":a.USER_TYPE="DiskFile";break}for(var r=0,s=Object.entries(a);r<s.length;r++){var o=babelHelpers.slicedToArray(s[r],2),l=o[0],d=o[1];n.append(this.getFormFieldName(l),d)}return n}},{key:"getFormFieldName",value:function e(t){return"fields["+t+"]"}},{key:"createProperty",value:function e(t,i){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var a=this._editor.getSchemeElementByName(i);if(!a){return}var r=BX.UI.EntitySchemeElement.create(t);a._elements.push(r);var s=n.mode||BX.UI.EntityEditorMode.edit;var o=this._editor.createControl(r.getType(),r.getName(),{schemeElement:r,model:this._model,parent:this,mode:s});if(!o){return}var l=this._editor.getControlById(i);l.addChild(o,he(he({},n),{},{enableSaving:false}));return o}}]);return t}(BX.UI.EntityEditorController);var ge=function(){function e(){var t=this;babelHelpers.classCallCheck(this,e);r.EventEmitter.subscribe("BX.UI.EntityEditorControllerFactory:onInitialize",(function(e){var i=e.getCompatData(),n=babelHelpers.slicedToArray(i,2),a=n[1];a.methods["entityCard"]=t.factory.bind(t)}))}babelHelpers.createClass(e,[{key:"factory",value:function e(t,i,n){if(t==="field_configurator"){return new pe(i,n)}if(t==="iblock_section"){return new ae(i,n)}if(t==="variation_grid"){return new oe(i,n)}if(t==="google_map"){return new le(i,n)}if(t==="employee"){return new de(i,n)}if(t==="binding_to_crm_element"){return new ue(i,n)}return null}}]);return e}();var fe,me,be,ye,ve;var Ee=function(e){babelHelpers.inherits(t,e);function t(){var e;var i;babelHelpers.classCallCheck(this,t);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++){a[r]=arguments[r]}i=babelHelpers.possibleConstructorReturn(this,(e=babelHelpers.getPrototypeOf(t)).call.apply(e,[this].concat(a)));babelHelpers.defineProperty(babelHelpers.assertThisInitialized(i),"fileChanged",false);return i}babelHelpers.createClass(t,[{key:"layout",value:function e(){if(this._hasLayout){return}this._wrapper=o.Tag.render(fe||(fe=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="ui-ctl ui-ctl-textbox ui-ctl-w100 ui-ctl-row"></div>\n\t\t\t'])));this._fileInput=o.Tag.render(me||(me=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<input class="input-image-hidden" value="','" type="file" accept="image/*">\n\t\t\t'])),BX.prop.getString(this._data,"FILE_ID",""));o.Event.bind(this._fileInput,"change",this.onFileLoaderChange.bind(this));var t=BX.prop.getString(this._data,"IMAGE_SRC","");this._wrapper.appendChild(o.Tag.render(be||(be=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<label class="catalog-dictionary-item ','">\n\t\t\t\t<img src="','" alt="">\n\t\t\t\t',"\n\t\t\t</label>\n\t\t\t"])),t===""?"catalog-dictionary-item-empty":"",t,this._fileInput));var i=o.Text.encode(BX.prop.getString(this._data,"TEXT",""));this._labelInput=o.Tag.render(ye||(ye=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<input \n\t\t\t\t\tclass="ui-ctl-element" \n\t\t\t\t\tvalue="','"\n\t\t\t\t\tplaceholder="','"\n\t\t\t\t>\n\t\t\t'])),i,BX.message("CATALOG_ENTITY_CARD_NEW_FIELD_ITEM_PLACEHOLDER"));this._wrapper.appendChild(this._labelInput);var n=o.Tag.render(ve||(ve=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="ui-entity-editor-content-remove-block"></div>\n\t\t\t'])));o.Event.bind(n,"click",this.onDeleteButtonClick.bind(this));this._wrapper.appendChild(n);var a=BX.prop.getElementNode(this._settings,"anchor");if(a){this._container.insertBefore(this._wrapper,a)}else{this._container.appendChild(this._wrapper)}this._hasLayout=true}},{key:"onFileLoaderChange",value:function e(t){var i=t.target;if(i.files&&i.files[0]){var n=new FileReader;n.onload=function(e){i.parentNode.querySelector("img").src=e.target.result};this.fileChanged=true;n.readAsDataURL(i.files[0]);i.parentNode.classList.remove("catalog-dictionary-item-empty")}}},{key:"isFileChanged",value:function e(){return this.fileChanged}},{key:"prepareData",value:function e(){var t=this._labelInput?BX.util.trim(this._labelInput.value):"";var i=this._fileInput&&this._fileInput.files&&this._fileInput.files[0]?this._fileInput.files[0]:{};var n={VALUE:{value:t,file:i},XML_ID:"",FILE_ID:""};var a=BX.prop.getString(this._data,"ID","");if(BX.type.isNotEmptyString(a)){n["XML_ID"]=a;n["FILE_ID"]=BX.prop.getString(this._data,"FILE_ID","")}return n}}],[{key:"create",value:function e(t,i){var n=new this;n.initialize(t,i);return n}}]);return t}(BX.UI.EntityEditorUserFieldListItem);var _e,Ie,Ce,Te,ke,Be,Se,De;var Ae=function(e){babelHelpers.inherits(t,e);babelHelpers.createClass(t,null,[{key:"create",value:function e(t,i){var n=new this;n.initialize(t,i);return n}}]);function t(){var e;babelHelpers.classCallCheck(this,t);e=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));e._enumItems=[];return e}babelHelpers.createClass(t,[{key:"layoutInternal",value:function e(){this._wrapper.appendChild(this.getInputContainer());if(this._typeId==="list"||this._typeId==="multilist"||this._typeId==="directory"){this._wrapper.appendChild(o.Tag.render(_e||(_e=babelHelpers.taggedTemplateLiteral(['<hr class="ui-entity-editor-line">']))));this._wrapper.appendChild(this.getEnumerationContainer())}this._wrapper.appendChild(this.getOptionContainer());this._wrapper.appendChild(this.getErrorContainer());o.Dom.append(o.Tag.render(Ie||(Ie=babelHelpers.taggedTemplateLiteral(['<hr class="ui-entity-editor-line">']))),this._wrapper);this._wrapper.appendChild(this.getButtonContainer())}},{key:"getOptionContainer",value:function e(){var t=this._field===null;this._optionWrapper=o.Tag.render(Ce||(Ce=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="ui-entity-editor-content-block"></div>\n\t\t'])));if(this._typeId==="datetime"||this._typeId==="multidatetime"){this._isTimeEnabledCheckBox=this.getIsTimeEnabledCheckBox()}if(this._typeId!=="boolean"&&this._enableMandatoryControl){this._isRequiredCheckBox=this.getIsRequiredCheckBox()}if(this.isAllowedMultipleCheckBox()){this._isMultipleCheckBox=this.getMultipleCheckBox()}this._isPublic=this.getIsPublicCheckBox();this._showAlwaysCheckBox=this.createOption({caption:BX.message("UI_ENTITY_EDITOR_SHOW_ALWAYS"),helpUrl:"https://helpdesk.bitrix24.ru/open/7046149/",helpCode:"9627471"});this._showAlwaysCheckBox.checked=t?BX.prop.getBoolean(this._settings,"showAlways",true):this._field.checkOptionFlag(BX.UI.EntityEditorControlOptions.showAlways);if(!this.isAllowedShowAlwaysCheckBox()){o.Dom.style(this._showAlwaysCheckBox.closest("div.ui-ctl-checkbox"),"display","none")}return this._optionWrapper}},{key:"isAllowedMultipleCheckBox",value:function e(){var t,i,n,a,r,s;var o=this===null||this===void 0?void 0:(t=this._field)===null||t===void 0?void 0:(i=t.getSchemeElement())===null||i===void 0?void 0:(n=i._settings)===null||n===void 0?void 0:n.isEnabledOfferTree;var l=this===null||this===void 0?void 0:(a=this._field)===null||a===void 0?void 0:(r=a.getSchemeElement())===null||r===void 0?void 0:(s=r._settings)===null||s===void 0?void 0:s.multiple;return!o||l}},{key:"isAllowedShowAlwaysCheckBox",value:function e(){return true}},{key:"getInputTitle",value:function e(){var t=this._editor.getUserFieldManager();return this._field?this._field.getTitle():t.getDefaultFieldLabel(this._typeId)}},{key:"getErrorContainer",value:function e(){this._errorContainer=o.Tag.render(Te||(Te=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="ui-entity-editor-content-block"></div>\n\t\t'])));return this._errorContainer}},{key:"getEnumerationContainer",value:function e(){var t=this;var i=o.Tag.render(ke||(ke=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="ui-entity-editor-content-block">\n\t\t\t\t<div class="ui-entity-editor-block-title">\n\t\t\t\t\t<span class="ui-entity-editor-block-title-text">',"</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t"])),BX.message("UI_ENTITY_EDITOR_UF_ENUM_ITEMS"));this._enumItemContainer=o.Tag.render(Be||(Be=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="ui-entity-editor-content-block"></div>\n\t\t\t'])));o.Dom.append(this._enumItemContainer,i);var n=o.Tag.render(Se||(Se=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="ui-entity-card-content-add-field">\n\t\t\t\t\t',"\n\t\t\t\t</div>\n\t\t\t"])),BX.message("UI_ENTITY_EDITOR_ADD"));o.Event.bind(n,"click",this.onEnumerationItemAddButtonClick.bind(this));o.Dom.append(o.Tag.render(De||(De=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="ui-entity-editor-content-block-add-field">\n\t\t\t\t\t',"\n\t\t\t\t</div>\n\t\t\t"])),n),i);if(this._field){this._field.getItems().forEach((function(e){if(e.VALUE!==""){t.createEnumerationItem({VALUE:e.NAME,FILE_ID:e.IMAGE||null,IMAGE_SRC:e.IMAGE_SRC||"",TEXT:e.TEXT||"",ID:e.VALUE})}}))}var a=this.createEnumerationItem();a.focus();this.initItemClickHandlers();return i}},{key:"onEnumerationItemAddButtonClick",value:function e(){this.unbindItemClickHandlers();this.createEnumerationItem().focus();this.bindLastItemClickHandler()}},{key:"onEnumerationItemClick",value:function e(){this.unbindItemClickHandlers();this.createEnumerationItem();this.bindLastItemClickHandler()}},{key:"initItemClickHandlers",value:function e(){this.unbindItemClickHandlers();this.bindLastItemClickHandler()}},{key:"unbindItemClickHandlers",value:function e(){this._enumItems.forEach((function(e){return o.Event.unbindAll(e._labelInput,"click")}))}},{key:"bindLastItemClickHandler",value:function e(){var t=this._enumItems[this._enumItems.length-1];if(t){o.Event.bindOnce(t._labelInput,"click",this.onEnumerationItemClick.bind(this))}}},{key:"createEnumerationItem",value:function e(t){var i=null;if(this._typeId==="directory"){i=Ee.create("",{configurator:this,container:this._enumItemContainer,data:t})}else{i=BX.UI.EntityEditorUserFieldListItem.create("",{configurator:this,container:this._enumItemContainer,data:t})}this._enumItems.push(i);i.layout();return i}},{key:"removeEnumerationItem",value:function e(t){for(var i=0,n=this._enumItems.length;i<n;i++){if(this._enumItems[i]===t){this._enumItems[i].clearLayout();this._enumItems.splice(i,1);this.initItemClickHandlers();break}}}},{key:"prepareSaveParams",value:function e(i){var n=babelHelpers.get(babelHelpers.getPrototypeOf(t.prototype),"prepareSaveParams",this).call(this,this,arguments);if(this._typeId==="list"||this._typeId==="multilist"){n["enumeration"]=[];var a=[];this._enumItems.forEach((function(e){if(!(e instanceof BX.UI.EntityEditorUserFieldListItem)){return}var t=e.prepareData();if(!t){return}var i=BX.util.hashCode(t["VALUE"]);if(BX.util.in_array(i,a)){return}a.push(i);if(o.Type.isNil(t["ID"])){t["ID"]=o.Text.getRandom()}t["SORT"]=(n["enumeration"].length+1)*100;n["enumeration"].push(t)}))}if(this._typeId==="directory"){n["enumeration"]=[];this._enumItems.forEach((function(e){if(!(e instanceof Ee)){return}var t=e.prepareData();if(!t){return}t["SORT"]=(n["enumeration"].length+1)*100;n["enumeration"].push(t)}))}else if(this._typeId==="datetime"||this._typeId==="multidatetime"){n["enableTime"]=this._isTimeEnabledCheckBox.checked}if(this._field){if(this._isMultipleCheckBox){n["multiple"]=this._isMultipleCheckBox.checked}}else{if(this._typeId==="boolean"){n["multiple"]=false}else if(this._isMultipleCheckBox){n["multiple"]=this._isMultipleCheckBox.checked}}if(this._isPublic){n["isPublic"]=this._isPublic.checked}return n}},{key:"getMultipleCheckBox",value:function e(){var t=this.createOption({caption:BX.message("UI_ENTITY_EDITOR_UF_MULTIPLE_FIELD")});if(this._field instanceof BX.UI.EntityEditorMultiText||this._field instanceof BX.UI.EntityEditorMultiNumber||this._field instanceof BX.UI.EntityEditorMultiList||this._field instanceof BX.UI.EntityEditorMultiDatetime||this._field instanceof BX.UI.EntityEditorMultiMoney||this._field instanceof BX.UI.EntityEditorCustom&&this._field.getSchemeElement()._settings.multiple){t.checked=true}return t}},{key:"onSaveButtonClick",value:function e(){if(this._isLocked){return}if(this._mandatoryConfigurator){if(this._mandatoryConfigurator.isChanged()){this._mandatoryConfigurator.acceptChanges()}this._mandatoryConfigurator.close()}var t=this.prepareSaveParams();if(this._field instanceof BX.UI.EntityEditorCustom){this._field.getSchemeElement().mergeSettings({multiple:t.multiple});var i=["edit","view"];for(var n=0;n<i.length;n++){var a=BX.prop.getString(this._field.getSchemeElement().getData(),i[n]+"List",null);var r=BX.prop.getObject(this._field.getModel().getData(),a,null);if(r!==null){var s=t.multiple?r.MULTIPLE:r.SINGLE;var l=BX.prop.getString(this._field.getSchemeElement().getData(),i[n],null);if(BX.prop.getString(this._field.getModel().getData(),l,null)!==null){this._field.getModel().setField(l,s);this._field.getModel().setInitFieldValue(l,s);if(i[n]==="view"){if(s===""){o.Dom.clean(this._field.getContentWrapper());this._field.getContentWrapper().appendChild(BX.create("div",{props:{className:"ui-entity-editor-content-block-text"},text:BX.message("UI_ENTITY_EDITOR_FIELD_EMPTY")}))}else{this._field.getContentWrapper().innerHTML=s}}}}}}BX.onCustomEvent(this,"onSave",[this,t])}},{key:"getIsRequiredCheckBox",value:function e(){var t;if(this._mandatoryConfigurator){t=this.createOption({caption:this._mandatoryConfigurator.getTitle()+":",labelSettings:{props:{className:"ui-entity-new-field-addiction-label"}},containerSettings:{style:{alignItems:"center"}},elements:this._mandatoryConfigurator.getButton().prepareLayout()});t.checked=this._field&&this._field.isRequired()||this._mandatoryConfigurator.isCustomized();this._mandatoryConfigurator.setSwitchCheckBox(t);this._mandatoryConfigurator.setLabel(t.nextSibling);this._mandatoryConfigurator.setEnabled(t.checked);this._mandatoryConfigurator.adjust()}else{t=this.createOption({caption:BX.message("UI_ENTITY_EDITOR_UF_REQUIRED_FIELD")});t.checked=this._field&&this._field.isRequired()}return t}},{key:"getIsTimeEnabledCheckBox",value:function e(){var t=this.createOption({caption:BX.message("UI_ENTITY_EDITOR_UF_ENABLE_TIME")});t.checked=this._field&&this._field.isTimeEnabled();return t}},{key:"getIsPublicCheckBox",value:function e(){var t=this.createOption({caption:BX.message("CATALOG_ENTITY_EDITOR_IS_PUBLIC_PROPERTY")});if(!this._field){t.checked=true}else{t.checked=this._field.getSchemeElement()&&BX.prop.get(this._field.getSchemeElement().getData(),"isPublic",true)}return t}}]);return t}(BX.UI.EntityEditorFieldConfigurator);o.Reflection.namespace("BX.Catalog").IblockFieldConfigurator=Ae;var He=function(e){babelHelpers.inherits(t,e);function t(){babelHelpers.classCallCheck(this,t);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}babelHelpers.createClass(t,[{key:"createFieldConfigurator",value:function e(t,i){if(!BX.type.isPlainObject(t)){throw"IblockFieldConfigurationManager: The 'params' argument must be object."}return this.getSimpleFieldConfigurator(t,i)}},{key:"getSimpleFieldConfigurator",value:function e(t,i){var n="";var a=BX.prop.get(t,"field",null);if(a){n=a.getType();a.setVisible(false);if(!BX.prop.get(a.getSchemeElement().getData(),"isProductProperty",false)){return this._fieldConfigurator=BX.UI.EntityEditorFieldConfigurator.create("",{editor:this._editor,schemeElement:null,model:i._model,mode:BX.UI.EntityEditorMode.edit,parent:i,typeId:n,field:a,mandatoryConfigurator:null})}else if(BX.prop.get(a.getSchemeElement().getData(),"userType",false)){n=BX.prop.getString(a.getSchemeElement().getData(),"userType")}}else{n=BX.prop.get(t,"typeId",BX.UI.EntityUserFieldType.string)}this._fieldConfigurator=Ae.create("",{editor:this._editor,schemeElement:null,model:i._model,mode:BX.UI.EntityEditorMode.edit,parent:i,typeId:n,field:a,mandatoryConfigurator:null});return this._fieldConfigurator}},{key:"isCreationEnabled",value:function e(){return true}},{key:"getCreationPageUrl",value:function e(t){return this.creationPageUrl}},{key:"openCreationPageUrl",value:function e(t){BX.SidePanel.Instance.open(this.getCreationPageUrl(t),{allowChangeHistory:false,cacheable:false})}},{key:"setCreationPageUrl",value:function e(t){return this.creationPageUrl=t}},{key:"getTypeInfos",value:function e(){var t=[];t.push({name:"string",title:BX.message("UI_ENTITY_EDITOR_UF_STRING_TITLE"),legend:BX.message("UI_ENTITY_EDITOR_UF_STRING_LEGEND")});t.push({name:"list",title:BX.message("UI_ENTITY_EDITOR_UF_ENUM_TITLE"),legend:BX.message("UI_ENTITY_EDITOR_UF_ENUM_LEGEND")});t.push({name:"datetime",title:BX.message("UI_ENTITY_EDITOR_UF_DATETIME_TITLE"),legend:BX.message("UI_ENTITY_EDITOR_UF_DATETIME_LEGEND")});t.push({name:"address",title:BX.message("UI_ENTITY_EDITOR_UF_ADDRESS_TITLE"),legend:BX.message("UI_ENTITY_EDITOR_UF_ADDRESS_LEGEND")});t.push({name:"money",title:BX.message("UI_ENTITY_EDITOR_UF_MONEY_TITLE"),legend:BX.message("UI_ENTITY_EDITOR_UF_MONEY_LEGEND")});t.push({name:"boolean",title:BX.message("UI_ENTITY_EDITOR_BOOLEAN_TITLE"),legend:BX.message("UI_ENTITY_EDITOR_UF_BOOLEAN_LEGEND")});t.push({name:"double",title:BX.message("UI_ENTITY_EDITOR_UF_DOUBLE_TITLE"),legend:BX.message("UI_ENTITY_EDITOR_UF_DOUBLE_LEGEND")});t.push({name:"directory",title:BX.message("CATALOG_ENTITY_CARD_DICTIONARY_TITLE"),legend:BX.message("CATALOG_ENTITY_CARD_DICTIONARY_LEGEND")});t.push({name:"custom",title:BX.message("UI_ENTITY_EDITOR_UF_CUSTOM_TITLE"),legend:BX.message("UI_ENTITY_EDITOR_UF_CUSTOM_LEGEND")});return t}}],[{key:"create",value:function e(t,i){var n=new this;n.initialize(t,i);return n}}]);return t}(BX.UI.EntityConfigurationManager);var Oe,Le,Pe,Ue,we;var Xe=function(e){babelHelpers.inherits(t,e);function t(){babelHelpers.classCallCheck(this,t);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}babelHelpers.createClass(t,[{key:"appendEnumerationSettings",value:function e(){var t=this;if(this._typeId==="list"||this._typeId==="multilist"){o.Dom.append(o.Tag.render(Oe||(Oe=babelHelpers.taggedTemplateLiteral(['<hr class="ui-entity-editor-line">']))),this._wrapper);var i=o.Tag.render(Le||(Le=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="ui-entity-editor-content-block">\n\t\t\t\t\t<div class="ui-entity-editor-block-title">\n\t\t\t\t\t\t<span class="ui-entity-editor-block-title-text">',"</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t"])),BX.message("UI_ENTITY_EDITOR_UF_ENUM_ITEMS"));o.Dom.append(i,this._wrapper);this._enumItemContainer=o.Tag.render(Pe||(Pe=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t\t<div class="ui-entity-editor-content-block"></div>\n\t\t\t\t'])));o.Dom.append(this._enumItemContainer,i);var n=o.Tag.render(Ue||(Ue=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t\t<div class="ui-entity-card-content-add-field">\n\t\t\t\t\t\t',"\n\t\t\t\t\t</div>\n\t\t\t\t"])),BX.message("UI_ENTITY_EDITOR_ADD"));o.Event.bind(n,"click",this.onEnumerationItemAddButtonClick.bind(this));o.Dom.append(o.Tag.render(we||(we=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t\t<div class="ui-entity-editor-content-block-add-field">\n\t\t\t\t\t\t',"\n\t\t\t\t\t</div>\n\t\t\t\t"])),n),i);if(this._field){this._field.getItems().forEach((function(e){if(e.VALUE!==""){t.createEnumerationItem({VALUE:e.NAME,ID:e.VALUE})}}))}this.createEnumerationItem();this.initItemFocusHandlers()}}},{key:"onEnumerationItemAddButtonClick",value:function e(){this.unbindItemFocusHandlers();this.createEnumerationItem().focus();this.bindLastItemFocusHandler()}},{key:"onEnumerationItemFocus",value:function e(){this.unbindItemFocusHandlers();this.createEnumerationItem();this.bindLastItemFocusHandler()}},{key:"initItemFocusHandlers",value:function e(){this.unbindItemFocusHandlers();this.bindLastItemFocusHandler()}},{key:"unbindItemFocusHandlers",value:function e(){this._enumItems.forEach((function(e){return o.Event.unbindAll(e._labelInput,"focus")}))}},{key:"bindLastItemFocusHandler",value:function e(){var t=this._enumItems[this._enumItems.length-1];if(t){o.Event.bindOnce(t._labelInput,"focus",this.onEnumerationItemFocus.bind(this))}}},{key:"createEnumerationItem",value:function e(t){var i=BX.UI.EntityEditorUserFieldListItem.create("",{configurator:this,container:this._enumItemContainer,data:t});this._enumItems.push(i);i.layout();return i}},{key:"removeEnumerationItem",value:function e(t){for(var i=0,n=this._enumItems.length;i<n;i++){if(this._enumItems[i]===t){this._enumItems[i].clearLayout();this._enumItems.splice(i,1);this.initItemFocusHandlers();break}}}},{key:"prepareSaveParams",value:function e(i){var n=babelHelpers.get(babelHelpers.getPrototypeOf(t.prototype),"prepareSaveParams",this).call(this,this,arguments);if(this._typeId==="list"||this._typeId==="multilist"){n["enumeration"]=[];var a=[];this._enumItems.forEach((function(e){if(!(e instanceof BX.UI.EntityEditorUserFieldListItem)){return}var t=e.prepareData();if(!t){return}var i=BX.util.hashCode(t["VALUE"]);if(BX.util.in_array(i,a)){return}a.push(i);t["SORT"]=(n["enumeration"].length+1)*100;n["enumeration"].push(t)}))}else if(this._typeId==="datetime"||this._typeId==="multidatetime"){n["enableTime"]=this._isTimeEnabledCheckBox.checked}return n}},{key:"getMultipleCheckBox",value:function e(){var t=this.createOption({caption:BX.message("UI_ENTITY_EDITOR_UF_MULTIPLE_FIELD")});if(this._field instanceof BX.UI.EntityEditorMultiText||this._field instanceof BX.UI.EntityEditorMultiNumber||this._field instanceof BX.UI.EntityEditorMultiList||this._field instanceof BX.UI.EntityEditorMultiDatetime){t.checked=true}return t}},{key:"getIsRequiredCheckBox",value:function e(){var t=null;if(this._typeId!=="boolean"){if(this._enableMandatoryControl){if(this._mandatoryConfigurator){t=this.createOption({caption:this._mandatoryConfigurator.getTitle()+":",labelSettings:{props:{className:"ui-entity-new-field-addiction-label"}},containerSettings:{style:{alignItems:"center"}},elements:this._mandatoryConfigurator.getButton().prepareLayout()});t.checked=this._field&&this._field.isRequired()||this._mandatoryConfigurator.isCustomized();this._mandatoryConfigurator.setSwitchCheckBox(t);this._mandatoryConfigurator.setLabel(t.nextSibling);this._mandatoryConfigurator.setEnabled(t.checked);this._mandatoryConfigurator.adjust()}else{t=this.createOption({caption:BX.message("UI_ENTITY_EDITOR_UF_REQUIRED_FIELD")});t.checked=this._field&&this._field.isRequired()}}}return t}},{key:"getIsTimeEnabledCheckBox",value:function e(){var t=null;if(this._typeId==="datetime"||this._typeId==="multidatetime"){t=this.createOption({caption:BX.message("UI_ENTITY_EDITOR_UF_ENABLE_TIME")});t.checked=this._field&&this._field.isTimeEnabled()}return t}}],[{key:"create",value:function e(t,i){var n=new this;n.initialize(t,i);return n}}]);return t}(BX.UI.EntityEditorFieldConfigurator);var Me=function(e){babelHelpers.inherits(t,e);function t(){babelHelpers.classCallCheck(this,t);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}babelHelpers.createClass(t,[{key:"createFieldConfigurator",value:function e(t,i){if(!o.Type.isPlainObject(t)){throw"GridFieldConfigurationManager: The 'params' argument must be object."}return this.getSimpleFieldConfigurator(t,i)}},{key:"getSimpleFieldConfigurator",value:function e(t,i){var n="";var a=BX.prop.get(t,"field",null);if(a){n=a.getType();a.setVisible(false);if(!BX.prop.get(a.getSchemeElement().getData(),"isProductProperty",false)){return this._fieldConfigurator=BX.UI.EntityEditorFieldConfigurator.create("",{editor:this._editor,schemeElement:null,model:i._model,mode:BX.UI.EntityEditorMode.edit,parent:i,typeId:n,field:a,mandatoryConfigurator:null})}}else{n=BX.prop.get(t,"typeId",BX.UI.EntityUserFieldType.string)}this._fieldConfigurator=Xe.create("",{editor:this._editor,schemeElement:null,model:i._model,mode:BX.UI.EntityEditorMode.edit,parent:i,typeId:n,field:a,mandatoryConfigurator:null});return this._fieldConfigurator}},{key:"isSelectionEnabled",value:function e(){return false}},{key:"isCreationEnabled",value:function e(){return false}},{key:"hasExternalForm",value:function e(t){return true}},{key:"getCreationPageUrl",value:function e(t){var i=this.getTypeInfos().filter((function(e){return e.name===t}));if(i.length>0){return this.creationPageUrl.replace("#PROPERTY_TYPE#",t)}}},{key:"openCreationPageUrl",value:function e(t){var i=this;var n=function e(){return i.openCreationPageSlider(i.getCreationPageUrl(t))};var a=o.Reflection.getClass("BX.Catalog.VariationGrid.Instance");if(a){a.askToLossGridData(n,null,{message:o.Loc.getMessage("CATALOG_ENTITY_CARD_UNSAVED_DATA_MESSAGE")})}else{n()}}},{key:"openCreationPageSlider",value:function e(t){if(o.Type.isStringFilled(t)){BX.SidePanel.Instance.open(t,{width:550,allowChangeHistory:false,cacheable:false})}}},{key:"setCreationPageUrl",value:function e(t){return this.creationPageUrl=t}},{key:"getTypeInfos",value:function e(){return[{name:"list",title:BX.message("CATALOG_ENTITY_CARD_LIST_TITLE"),legend:BX.message("CATALOG_ENTITY_CARD_LIST_LEGEND")},{name:"directory",title:BX.message("CATALOG_ENTITY_CARD_DICTIONARY_TITLE"),legend:BX.message("CATALOG_ENTITY_CARD_DICTIONARY_LEGEND")}]}}],[{key:"create",value:function e(t,i){var n=new this;n.initialize(t,i);return n}}]);return t}(BX.UI.EntityConfigurationManager);var Re;var Ne=function(){function e(t){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};babelHelpers.classCallCheck(this,e);this.id=o.Type.isStringFilled(t)?t:o.Text.getRandom();this.entityId=o.Text.toInteger(i.entityId)||0;this.settings=i;this.container=document.getElementById(i.containerId);this.initializeTabManager();this.checkFadeOverlay()}babelHelpers.createClass(e,[{key:"initializeTabManager",value:function e(){return new f(this.id,{container:document.getElementById(this.settings.tabContainerId),menuContainer:document.getElementById(this.settings.tabMenuContainerId),data:this.settings.tabs||[]})}},{key:"checkFadeOverlay",value:function e(){if(this.entityId<=0){this.overlay=o.Tag.render(Re||(Re=babelHelpers.taggedTemplateLiteral(['<div class="catalog-entity-overlay"></div>'])));o.Dom.append(this.overlay,this.container);if(window===window.top){this.overlay.style.position="absolute";this.overlay.style.top=this.overlay.style.left=this.overlay.style.right="-15px"}}}}]);return e}();var Fe,Ge,xe,je,Ye,Ve,We;var qe=function(e){babelHelpers.inherits(t,e);function t(e){var i;var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};babelHelpers.classCallCheck(this,t);i=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e,n));babelHelpers.defineProperty(babelHelpers.assertThisInitialized(i),"stackWithOffset",null);i.cardSettings=n.cardSettings||[];i.feedbackUrl=n.feedbackUrl||"";i.variationGridId=n.variationGridId;i.productStoreGridId=n.productStoreGridId||null;i.settingsButtonId=n.settingsButtonId;i.createDocumentButtonId=n.createDocumentButtonId;i.createDocumentButtonMenuPopupItems=n.createDocumentButtonMenuPopupItems;i.componentName=n.componentName||null;i.componentSignedParams=n.componentSignedParams||null;i.isSimpleProduct=n.isSimpleProduct||false;i.registerFieldsFactory();i.registerControllersFactory();i.registerEvents();i.bindCardSettingsButton();i.bindCreateDocumentButtonMenu();r.EventEmitter.subscribe("SidePanel.Slider:onMessage",i.onSliderMessage.bind(babelHelpers.assertThisInitialized(i)));r.EventEmitter.subscribe("BX.UI.EntityEditorSection:onLayout",i.onSectionLayout.bind(babelHelpers.assertThisInitialized(i)));r.EventEmitter.subscribe("Grid::updated",i.onGridUpdatedHandler.bind(babelHelpers.assertThisInitialized(i)));return i}babelHelpers.createClass(t,[{key:"getEntityType",value:function e(){return"Entity"}},{key:"getCardSetting",value:function e(t){return this.cardSettings.filter((function(e){return e.id===t}))[0]}},{key:"isCardSettingEnabled",value:function e(t){var i=this.getCardSetting(t);return i&&i.checked}},{key:"bindCardSettingsButton",value:function e(){var t=this.getSettingsButton();if(t){o.Event.bind(t.getContainer(),"click",this.showCardSettingsPopup.bind(this))}}},{key:"getSettingsButton",value:function e(){return BX.UI.ButtonManager.getByUniqid(this.settingsButtonId)}},{key:"registerFieldsFactory",value:function e(){return new $}},{key:"onGridUpdatedHandler",value:function e(t){var i=t.getCompatData(),n=babelHelpers.slicedToArray(i,1),a=n[0];if(a&&a.getId()===this.getVariationGridId()){this.updateSettingsCheckboxState()}}},{key:"onSectionLayout",value:function e(){}},{key:"getProductStoreGridId",value:function e(){return this.productStoreGridId}},{key:"getProductStoreGridComponent",value:function e(){return o.Reflection.getClass("BX.Catalog.ProductStoreGridManager.Instance")}},{key:"reloadProductStoreGrid",value:function e(){var t=this.getProductStoreGridComponent();if(t){if(this.getProductStoreGridId()&&this.getProductStoreGridId()===t.getGridId()){t.reloadGrid()}}}},{key:"getVariationGridComponent",value:function e(){return o.Reflection.getClass("BX.Catalog.VariationGrid.Instance")}},{key:"reloadVariationGrid",value:function e(){var t=this.getVariationGridComponent();if(t){t.reloadGrid()}}},{key:"getVariationGridId",value:function e(){return this.variationGridId}},{key:"getVariationGrid",value:function e(){if(!o.Reflection.getClass("BX.Main.gridManager.getInstanceById")){return null}return BX.Main.gridManager.getInstanceById(this.getVariationGridId())}},{key:"registerControllersFactory",value:function e(){return new ge}},{key:"registerEvents",value:function e(){r.EventEmitter.subscribe("BX.UI.EntityConfigurationManager:onInitialize",this.onConfigurationManagerInit.bind(this));r.EventEmitter.subscribe("BX.UI.EntityEditor:onCancel",this.removeFileHiddenInputs.bind(this));r.EventEmitter.subscribe("BX.UI.EntityEditor:onInit",this.onEditorInitHandler.bind(this));r.EventEmitter.subscribe("BX.UI.EntityEditorAjax:onSubmit",this.onEditorAjaxSubmit.bind(this));r.EventEmitter.subscribe("onEntityCreate",this.onEntityCreateHandler.bind(this));r.EventEmitter.subscribe("onEntityUpdate",this.onEntityUpdateHandler.bind(this));r.EventEmitter.subscribe("onAttachFiles",this.onAttachFilesHandler.bind(this));r.EventEmitter.subscribe("BX.Main.Popup:onClose",this.onFileEditorCloseHandler.bind(this));r.EventEmitter.subscribe("onAfterVariationGridSave",this.onAfterVariationGridSave.bind(this))}},{key:"onAfterVariationGridSave",value:function e(t){var i=t.getData();if(i.gridId===this.getVariationGridId()){this.reloadProductStoreGrid()}}},{key:"onAttachFilesHandler",value:function e(t){var i=this.getEditorInstance();if(!i){return}var n=t.getCompatData(),a=babelHelpers.slicedToArray(n,3),r=a[2];if(r&&o.Type.isDomNode(r.fileInput)){var s=r.fileInput.closest("[data-cid]");if(o.Type.isDomNode(s)){var l=s.getAttribute("data-cid");var d=i.getControlByIdRecursive(l);if(d){d.markAsChanged()}}}}},{key:"onFileEditorCloseHandler",value:function e(t){var i=t.getCompatData(),n=babelHelpers.slicedToArray(i,1),a=n[0];if(a&&a.getId()==="popupFM"&&a.onApplyFlag){this.showNotification(o.Loc.getMessage("CATALOG_ENTITY_CARD_FILE_CLOSE_NOTIFICATION"),{autoHideDelay:5e3})}}},{key:"onEditorInitHandler",value:function e(t){var i=t.getCompatData(),n=babelHelpers.slicedToArray(i,2),a=n[0],r=n[1];if(a&&!r.entityId){var s=a.getControlByIdRecursive("NAME");if(s){requestAnimationFrame((function(){s.focus()}))}}}},{key:"getEditorInstance",value:function e(){if(o.Reflection.getClass("BX.UI.EntityEditor")){return BX.UI.EntityEditor.getDefault()}return null}},{key:"onEditorAjaxSubmit",value:function e(t){var i=t.getCompatData(),n=babelHelpers.slicedToArray(i,2),a=n[0],r=n[1];var s=a["NAME-CODE"].NAME||"";this.changePageTitle(s);if(r.data){if(o.Type.isBoolean(r.data.IS_SIMPLE_PRODUCT)){this.isSimpleProduct=r.data.IS_SIMPLE_PRODUCT}}if(r.status==="success"){this.removeFileHiddenInputs()}}},{key:"onEntityCreateHandler",value:function e(t){var i=t.getCompatData(),n=babelHelpers.slicedToArray(i,1),a=n[0];this.postSliderMessage("onCreate",a)}},{key:"onEntityUpdateHandler",value:function e(t){var i=t.getCompatData(),n=babelHelpers.slicedToArray(i,1),a=n[0];this.postSliderMessage("onUpdate",a)}},{key:"postSliderMessage",value:function e(t,i){BX.SidePanel.Instance.postMessage(window,"Catalog.".concat(this.getEntityType(),"Card::").concat(t),i)}},{key:"changePageTitle",value:function e(t){var i=document.getElementById("pagetitle");if(o.Type.isDomNode(i)){i.innerText=t}document.title=t;if(BX.getClass("BX.SidePanel.Instance.updateBrowserTitle")){BX.SidePanel.Instance.updateBrowserTitle()}}},{key:"removeFileHiddenInputs",value:function e(){document.querySelectorAll('form>input[type="hidden"]').forEach((function(e){var t=e.getAttribute("name");var i=document.querySelector('form>input[name="'.concat(t,'_del"]'));if(i){o.Dom.remove(e);o.Dom.remove(i)}}))}},{key:"onConfigurationManagerInit",value:function e(t){var i=t.getCompatData(),n=babelHelpers.slicedToArray(i,2),a=n[1];if(!a.type||a.type==="editor"){a.configurationFieldManager=this.initializeIblockFieldConfigurationManager(a)}if(a.id==="variation_grid"){a.configurationFieldManager=this.initializeVariationPropertyConfigurationManager(a)}}},{key:"initializeIblockFieldConfigurationManager",value:function e(t){var i=He.create(this.id,t);i.setCreationPageUrl(this.settings.creationPropertyUrl);return i}},{key:"initializeVariationPropertyConfigurationManager",value:function e(t){var i=Me.create(this.id,t);i.setCreationPageUrl(this.settings.creationVariationPropertyUrl);return i}},{key:"showNotification",value:function e(t,i){i=i||{};if(BX.GetWindowScrollPos().scrollTop<=10){i.stack=this.getStackWithOffset()}BX.UI.Notification.Center.notify({content:t,stack:i.stack||null,position:"top-right",width:"auto",category:i.category||null,autoHideDelay:i.autoHideDelay||3e3})}},{key:"getStackWithOffset",value:function e(){if(this.stackWithOffset===null){this.stackWithOffset=new BX.UI.Notification.Stack(BX.mergeEx({},BX.UI.Notification.Center.getStackDefaults(),{id:"top-right-with-offset",position:"top-right-with-offset",offsetY:74}))}return this.stackWithOffset}},{key:"openFeedbackPanel",value:function e(){if(!o.Reflection.getClass("BX.SidePanel.Instance")||!o.Type.isStringFilled(this.feedbackUrl)){return}BX.SidePanel.Instance.open(this.feedbackUrl,{cacheable:false,allowChangeHistory:false,width:580})}},{key:"bindCreateDocumentButtonMenu",value:function e(){var t=this.getCreateDocumentButtonMenu();if(t){o.Event.bind(t.getContainer(),"click",this.showCreateDocumentPopup.bind(this))}}},{key:"getCreateDocumentButtonMenu",value:function e(){var t=BX.UI.ButtonManager.getByUniqid(this.createDocumentButtonId);if(t){return BX.UI.ButtonManager.getByUniqid(this.createDocumentButtonId).getMenuButton()}return null}},{key:"getCreateDocumentPopup",value:function e(){if(!this.createDocumentPopup){this.createDocumentPopup=new s.Popup(this.id+"-create-document",this.getCreateDocumentButtonMenu().getContainer(),{autoHide:true,draggable:false,offsetLeft:0,offsetTop:0,angle:{position:"top",offset:43},noAllPaddings:true,bindOptions:{forceBindPosition:true},closeByEsc:true,content:this.getCreateDocumentMenuContent()})}return this.createDocumentPopup}},{key:"showCreateDocumentPopup",value:function e(){this.getCreateDocumentPopup().show()}},{key:"getCreateDocumentMenuContent",value:function e(){var t=o.Tag.render(Fe||(Fe=babelHelpers.taggedTemplateLiteral(['<div class="menu-popup"></div>'])));var i=o.Tag.render(Ge||(Ge=babelHelpers.taggedTemplateLiteral(['<div class="menu-popup-items"></div>'])));t.appendChild(i);this.createDocumentButtonMenuPopupItems.forEach((function(e){i.appendChild(o.Tag.render(xe||(xe=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<a class="menu-popup-item menu-popup-item-no-icon" href="','">\n\t\t\t\t\t<span class="menu-popup-item-text">',"</span>\n\t\t\t\t</a>\n\t\t\t"])),e.link,e.text))}));return t}},{key:"getCardSettingsPopup",value:function e(){if(!this.settingsPopup){this.settingsPopup=new s.Popup(this.id,this.getSettingsButton().getContainer(),{autoHide:true,draggable:false,offsetLeft:0,offsetTop:0,angle:{position:"top",offset:43},noAllPaddings:true,bindOptions:{forceBindPosition:true},closeByEsc:true,content:this.prepareCardSettingsContent()})}return this.settingsPopup}},{key:"showCardSettingsPopup",value:function e(){var t=this;var i=function e(){return t.getCardSettingsPopup().show()};var n=o.Reflection.getClass("BX.Catalog.VariationGrid.Instance");if(n){n.askToLossGridData(i)}else{i()}}},{key:"prepareCardSettingsContent",value:function e(){var t=this;var i=o.Tag.render(je||(je=babelHelpers.taggedTemplateLiteral(["\n\t\t\t<div class='ui-entity-editor-popup-create-field-list'></div>\n\t\t"])));this.cardSettings.map((function(e){i.append(t.getSettingItem(e))}));return i}},{key:"getSettingItem",value:function e(t){var i,n=this;var a=o.Tag.render(Ye||(Ye=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<input type="checkbox">\n\t\t'])));a.checked=t.checked;a.disabled=(i=t.disabled)!==null&&i!==void 0?i:false;a.dataset.settingId=t.id;var r=o.Type.isStringFilled(t.hint)?o.Tag.render(Ve||(Ve=babelHelpers.taggedTemplateLiteral(['<span class="catalog-entity-setting-hint" data-hint="','"></span>'])),t.hint):"";var s=o.Tag.render(We||(We=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<label class="ui-ctl-block ui-entity-editor-popup-create-field-item ui-ctl-w100">\n\t\t\t\t\t<div class="ui-ctl-w10" style="text-align: center">','</div>\n\t\t\t\t\t<div class="ui-ctl-w75">\n\t\t\t\t\t\t<span class="ui-entity-editor-popup-create-field-item-title ','">',"",'</span>\n\t\t\t\t\t\t<span class="ui-entity-editor-popup-create-field-item-desc">',"</span>\n\t\t\t\t\t</div>\n\t\t\t\t</label>\n\t\t\t"])),a,t.disabled?"catalog-entity-disabled-setting":"",t.title,r,t.desc);BX.UI.Hint.init(s);if(t.id==="SLIDER"){o.Event.bind(s,"change",(function(e){(new l.Slider).open(t.url,{}).then((function(){n.reloadGrid();n.getCardSettingsPopup().close()}))}))}else{o.Event.bind(s,"change",this.setProductCardSetting.bind(this))}return s}},{key:"setProductCardSetting",value:function e(t){var i=this.getCardSetting(t.target.dataset.settingId);if(!i){return}var n=t.target.checked;if(i.action==="grid"){this.requestGridSettings(i,n)}else{this.requestCardSettings(i,n)}}},{key:"onSliderMessage",value:function e(t){var i=t.getCompatData(),n=babelHelpers.slicedToArray(i,1),a=n[0];if(a.getEventId()==="Catalog.VariationCard::onCreate"||a.getEventId()==="Catalog.VariationCard::onUpdate"){this.reloadVariationGrid()}}},{key:"reloadGrid",value:function e(){document.location.reload()}},{key:"requestGridSettings",value:function e(t,i){var n=this;if(!this.getVariationGrid());var a=[];var r=this.getVariationGrid().getRows().getHeadFirstChild().getCells();Array.from(r).forEach((function(e){if("name"in e.dataset){a.push(e.dataset.name)}}));BX.ajax.runComponentAction(this.componentName,"setGridSetting",{mode:"class",data:{signedParameters:this.componentSignedParams,settingId:t.id,selected:i,currentHeaders:a}}).then((function(){var e=null;t.checked=i;n.reloadVariationGrid();n.postSliderMessage("onUpdate",{});n.getCardSettingsPopup().close();if(t.id==="WAREHOUSE"){n.reloadGrid();e=i?o.Loc.getMessage("CATALOG_ENTITY_CARD_WAREHOUSE_ENABLED"):o.Loc.getMessage("CATALOG_ENTITY_CARD_WAREHOUSE_DISABLED")}else{e=i?o.Loc.getMessage("CATALOG_ENTITY_CARD_SETTING_ENABLED"):o.Loc.getMessage("CATALOG_ENTITY_CARD_SETTING_DISABLED");e=e.replace("#NAME#",t.title)}n.showNotification(e,{category:"popup-settings"})}))}},{key:"requestCardSettings",value:function e(t,i){var n=this;BX.ajax.runComponentAction(this.componentName,"setCardSetting",{mode:"class",data:{signedParameters:this.componentSignedParams,settingId:t.id,selected:i}}).then((function(){t.checked=i;if(t.id==="CATALOG_PARAMETERS"){var e=n.getEditorInstance().getControlByIdRecursive("catalog_parameters");if(e){e.refreshLayout()}}n.getCardSettingsPopup().close();var a=i?o.Loc.getMessage("CATALOG_ENTITY_CARD_SETTING_ENABLED"):o.Loc.getMessage("CATALOG_ENTITY_CARD_SETTING_DISABLED");n.showNotification(a.replace("#NAME#",t.title),{category:"popup-settings"})}))}},{key:"updateSettingsCheckboxState",value:function e(){var t=this;var i=this.getCardSettingsPopup().getContentContainer();this.cardSettings.filter((function(e){return e.action==="grid"&&o.Type.isArray(e.columns)})).forEach((function(e){var n=true;e.columns.forEach((function(e){if(!t.getVariationGrid().getColumnHeaderCellByName(e)){n=false}}));var a=i.querySelector('input[data-setting-id="'+e.id+'"]');if(o.Type.isDomNode(a)){a.checked=n}}))}}]);return t}(Ne);e.EntityCard=qe;e.BaseCard=Ne})(this.BX.Catalog.EntityCard=this.BX.Catalog.EntityCard||{},BX,BX,BX,BX,BX.Event,BX.Main,BX,BX.Catalog.StoreUse);
//# sourceMappingURL=entity-card.bundle.map.js