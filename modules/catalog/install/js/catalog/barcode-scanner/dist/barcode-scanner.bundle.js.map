{"version":3,"file":"barcode-scanner.bundle.js","sources":["../src/barcode-scanner.js"],"sourcesContent":["import {ajax, Type} from 'main.core';\nimport {BaseEvent, EventEmitter} from 'main.core.events';\n\nconst barcodeScannerPool = new Map();\n\nexport class BarcodeScanner\n{\n\tconstructor()\n\t{\n\t\tthis.pool = [];\n\t\tEventEmitter.subscribe('onPullEvent-catalog', this.onPullEvent.bind(this));\n\t}\n\n\tstatic open(id = 'default')\n\t{\n\t\tif (!barcodeScannerPool.has(id))\n\t\t{\n\t\t\tconst scanner = new BarcodeScanner();\n\t\t\tbarcodeScannerPool.set(id, scanner);\n\t\t}\n\n\t\tajax.runAction(\n\t\t\t'catalog.barcodescanner.sendMobilePush',\n\t\t\t{data: {id: id}}\n\t\t);\n\t}\n\n\tonPullEvent(event: BaseEvent)\n\t{\n\t\tconst data = event.getData();\n\t\tconst command = data[0];\n\t\tconst params = Type.isObjectLike(data[1]) ? data[1] : {};\n\n\t\tswitch(command)\n\t\t{\n\t\t\tcase 'HandleBarcodeScanned':\n\t\t\t\tif (params.hasOwnProperty('id'))\n\t\t\t\t{\n\t\t\t\t\tconst scanner = barcodeScannerPool.has(params.id);\n\t\t\t\t\tif (scanner)\n\t\t\t\t\t{\n\t\t\t\t\t\tEventEmitter.emit('BarcodeScanner::onScanEmit', params)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t}\n}\n"],"names":["barcodeScannerPool","Map","BarcodeScanner","pool","EventEmitter","subscribe","onPullEvent","bind","event","data","getData","command","params","Type","isObjectLike","hasOwnProperty","scanner","has","id","emit","set","ajax","runAction"],"mappings":";;;;CAGA,IAAMA,kBAAkB,GAAG,IAAIC,GAAJ,EAA3B;AAEA,KAAaC,cAAb;CAEC,4BACA;CAAA;CACC,SAAKC,IAAL,GAAY,EAAZ;CACAC,IAAAA,6BAAY,CAACC,SAAb,CAAuB,qBAAvB,EAA8C,KAAKC,WAAL,CAAiBC,IAAjB,CAAsB,IAAtB,CAA9C;CACA;;CANF;CAAA;CAAA,gCAsBaC,KAtBb,EAuBC;CACC,UAAMC,IAAI,GAAGD,KAAK,CAACE,OAAN,EAAb;CACA,UAAMC,OAAO,GAAGF,IAAI,CAAC,CAAD,CAApB;CACA,UAAMG,MAAM,GAAGC,cAAI,CAACC,YAAL,CAAkBL,IAAI,CAAC,CAAD,CAAtB,IAA6BA,IAAI,CAAC,CAAD,CAAjC,GAAuC,EAAtD;;CAEA,cAAOE,OAAP;CAEC,aAAK,sBAAL;CACC,cAAIC,MAAM,CAACG,cAAP,CAAsB,IAAtB,CAAJ,EACA;CACC,gBAAMC,OAAO,GAAGhB,kBAAkB,CAACiB,GAAnB,CAAuBL,MAAM,CAACM,EAA9B,CAAhB;;CACA,gBAAIF,OAAJ,EACA;CACCZ,cAAAA,6BAAY,CAACe,IAAb,CAAkB,4BAAlB,EAAgDP,MAAhD;CACA;CACD;;CACD;CAXF;CAaA;CAzCF;CAAA;CAAA,2BASC;CAAA,UADYM,EACZ,uEADiB,SACjB;;CACC,UAAI,CAAClB,kBAAkB,CAACiB,GAAnB,CAAuBC,EAAvB,CAAL,EACA;CACC,YAAMF,OAAO,GAAG,IAAId,cAAJ,EAAhB;CACAF,QAAAA,kBAAkB,CAACoB,GAAnB,CAAuBF,EAAvB,EAA2BF,OAA3B;CACA;;CAEDK,MAAAA,cAAI,CAACC,SAAL,CACC,uCADD,EAEC;CAACb,QAAAA,IAAI,EAAE;CAACS,UAAAA,EAAE,EAAEA;CAAL;CAAP,OAFD;CAIA;CApBF;CAAA;CAAA;;;;;;;;"}