{"version":3,"file":"productset.bundle.js","sources":["../src/footer.js","../src/const.js","../src/productsetfield.js","../src/field-factory.js"],"sourcesContent":["import {DefaultFooter, Dialog, Item} from 'ui.entity-selector';\nimport {Dom, Loc, Tag, Event} from 'main.core';\n\nexport class Footer extends DefaultFooter\n{\n\tconstructor(dialog: Dialog, options: { [option: string]: any })\n\t{\n\t\tsuper(dialog, options);\n\n\t\tthis.selectAllButton = Tag.render`<div class=\"ui-selector-footer-link ui-selector-search-footer-label--hide\">${Loc.getMessage('ENTITY_EDITOR_PRODUCT_SET_ALL_SELECT_LABEL')}</div>`;\n\t\tEvent.bind(this.selectAllButton, 'click', this.selectAll.bind(this));\n\t\tthis.deselectAllButton = Tag.render`<div class=\"ui-selector-footer-link ui-selector-search-footer-label--hide\">${Loc.getMessage('ENTITY_EDITOR_PRODUCT_SET_ALL_DESELECT_LABEL')}</div>`;\n\t\tEvent.bind(this.deselectAllButton, 'click', this.deselectAll.bind(this));\n\n\t\tthis.getDialog().subscribe('Item:onSelect', this.onItemStatusChange.bind(this));\n\t\tthis.getDialog().subscribe('Item:onDeselect', this.onItemStatusChange.bind(this));\n\n\t\tthis.getDialog().subscribe('onLoad', this.toggleSelectButtons.bind(this));\n\t}\n\n\tgetContent(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"ui-selector-search-footer-box\">\n\t\t\t\t${this.selectAllButton}\n\t\t\t\t${this.deselectAllButton}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\ttoggleSelectButtons(): void\n\t{\n\t\tif (this.getAmountSelectedItems() === this.getAmountItems())\n\t\t{\n\t\t\tif (Dom.hasClass(this.deselectAllButton, 'ui-selector-search-footer-label--hide'))\n\t\t\t{\n\t\t\t\tDom.addClass(this.selectAllButton, 'ui-selector-search-footer-label--hide');\n\t\t\t\tDom.removeClass(this.deselectAllButton, 'ui-selector-search-footer-label--hide');\n\t\t\t}\n\t\t}\n\t\telse if (Dom.hasClass(this.selectAllButton, 'ui-selector-search-footer-label--hide'))\n\t\t{\n\t\t\tDom.addClass(this.deselectAllButton, 'ui-selector-search-footer-label--hide');\n\t\t\tDom.removeClass(this.selectAllButton, 'ui-selector-search-footer-label--hide');\n\t\t}\n\t}\n\n\tselectAll(): void\n\t{\n\t\tif (this.getAmountSelectedItems() === this.getAmountItems())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst activeTab = this.getDialog().getActiveTab();\n\t\tif (activeTab)\n\t\t{\n\t\t\tlet children = activeTab.getRootNode().getChildren();\n\t\t\tif (children.items.length > 0)\n\t\t\t{\n\t\t\t\tchildren.forEach((child) => {\n\t\t\t\t\tchild.getItem().select();\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis\n\t\t\t\t.getDialog()\n\t\t\t\t.getItems()\n\t\t\t\t.forEach((item: Item) => {\n\t\t\t\t\titem.select();\n\t\t\t\t})\n\t\t\t;\n\t\t}\n\t}\n\n\tdeselectAll(): void\n\t{\n\t\tthis\n\t\t\t.getDialog()\n\t\t\t.getSelectedItems()\n\t\t\t.forEach((item: Item) => {\n\t\t\t\titem.deselect();\n\t\t\t})\n\t\t;\n\t}\n\n\tonItemStatusChange(): void\n\t{\n\t\tthis.toggleSelectButtons();\n\t}\n\n\tgetAmountSelectedItems(): number\n\t{\n\t\tlet amount = 0;\n\n\t\tconst activeTab = this.getDialog().getActiveTab();\n\t\tif (activeTab)\n\t\t{\n\t\t\tamount = activeTab.getRootNode().getChildren().items.filter(item => item.item.isSelected()).length;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tamount = this.getDialog().getSelectedItems().length;\n\t\t}\n\n\t\treturn amount;\n\t}\n\n\tgetAmountItems(): number\n\t{\n\t\tlet amount = 0;\n\n\t\tconst activeTab = this.getDialog().getActiveTab();\n\t\tif (activeTab)\n\t\t{\n\t\t\tamount = activeTab.getRootNode().getChildren().items.length;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tamount = this.getDialog().getItems().length;\n\t\t}\n\n\t\treturn amount;\n\t}\n}","export const Const = Object.freeze({\n\tTYPE: {\n\t\tPRODUCT: 'PRODUCT',\n\t},\n\tENTITY_ID: {\n\t\tPRODUCT_VARIATION: 'agent-contractor-product-variation',\n\t}\n});","import {Loc, Tag} from 'main.core';\nimport {TagSelector} from \"ui.entity-selector\";\nimport {BaseEvent} from \"main.core.events\";\nimport {Footer} from \"./footer\";\nimport {Const} from \"./const\";\n\nexport class ProductSetField extends BX.UI.EntityEditorField\n{\n\tconstructor(id, settings)\n\t{\n\t\tsuper();\n\t\tthis.initialize(id, settings);\n\n\t\tthis._input = null;\n\t\tthis._inputWrapper = null;\n\t\tthis.innerWrapper = null;\n\t\tthis.entityList = null;\n\t\tthis.tagSelector = null;\n\t}\n\n\tgetContentWrapper()\n\t{\n\t\treturn this.innerWrapper;\n\t}\n\n\tlayout(options = {})\n\t{\n\t\tif (this._hasLayout)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tthis.ensureWrapperCreated({});\n\t\tthis.adjustWrapper();\n\n\t\tlet title = this.getTitle();\n\t\tif (this.isDragEnabled())\n\t\t{\n\t\t\tthis._wrapper.appendChild(this.createDragButton());\n\t\t}\n\n\t\tthis._wrapper.appendChild(this.createTitleNode(title));\n\n\t\tlet name = this.getName();\n\t\tlet value = this.getValue();\n\n\t\tif (!this.entityList)\n\t\t{\n\t\t\tthis.entityList = this.getEntityListFromModel();\n\t\t}\n\n\t\tthis._inputWrapper = Tag.render`<div></div>`;\n\t\tthis._wrapper.appendChild(this._inputWrapper);\n\n\t\tlet inputValue = '';\n\t\tif (value.length > 0)\n\t\t{\n\t\t\tinputValue = JSON.stringify(value);\n\t\t}\n\n\t\tthis._input = Tag.render`<input name=\"${name}\" type=\"hidden\" value=\"\"/>`;\n\t\tthis._input.value = inputValue;\n\n\t\tthis._wrapper.appendChild(this._input);\n\n\t\tthis.innerWrapper = Tag.render`<div class=\"ui-entity-editor-content-block\"></div>`;\n\t\tthis._wrapper.appendChild(this.innerWrapper);\n\n\t\tif (this._mode === BX.UI.EntityEditorMode.edit)\n\t\t{\n\t\t\tthis.getProductSelector(this.entityList);\n\t\t\tthis.tagSelector.setReadonly(false);\n\t\t\tthis.tagSelector.renderTo(this.innerWrapper);\n\n\t\t\tif (BX.UI.EntityEditorModeOptions.check(this._modeOptions, BX.UI.EntityEditorModeOptions.individual))\n\t\t\t{\n\t\t\t\tthis.tagSelector.getDialog().show();\n\t\t\t}\n\t\t}\n\t\telse // if(this._mode === BX.UI.EntityEditorMode.view)\n\t\t{\n\t\t\tif (this.hasContentToDisplay())\n\t\t\t{\n\t\t\t\tthis.getProductSelector(this.entityList, true);\n\t\t\t\tthis.tagSelector.setReadonly(true);\n\t\t\t\tthis.tagSelector.renderTo(this.innerWrapper);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tconst viewModeDisplay = Tag.render`<div class=\"ui-entity-editor-content-block-text\">${Loc.getMessage('ENTITY_EDITOR_PRODUCT_SET_NOT_FILLED')}</div>`;\n\t\t\t\tthis.innerWrapper.appendChild(viewModeDisplay);\n\t\t\t}\n\t\t}\n\n\t\tif (this.isContextMenuEnabled())\n\t\t{\n\t\t\tthis._wrapper.appendChild(this.createContextMenuButton());\n\t\t}\n\n\t\tif (this.isDragEnabled())\n\t\t{\n\t\t\tthis.initializeDragDropAbilities();\n\t\t}\n\n\t\tthis.registerLayout(options);\n\t\tthis._hasLayout = true;\n\t}\n\n\tgetProductSelector(value)\n\t{\n\t\tconst iblockId = this.getIBlockIdFromModel();\n\n\t\tif (!this.tagSelector)\n\t\t{\n\t\t\tthis.tagSelector = new TagSelector({\n\t\t\t\ttextBoxWidth: '100%',\n\t\t\t\tmultiple: true,\n\t\t\t\tdialogOptions: {\n\t\t\t\t\tcontext: 'catalog_document_productset',\n\t\t\t\t\tentities: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tid: Const.ENTITY_ID.PRODUCT_VARIATION,\n\t\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\t\tiblockId: iblockId,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t\tsearchOptions: {\n\t\t\t\t\t\tallowCreateItem: false,\n\t\t\t\t\t},\n\t\t\t\t\tevents: {\n\t\t\t\t\t\t'Item:onSelect': (event) => {\n\t\t\t\t\t\t\tthis.handleUserSelectorChanges(event);\n\t\t\t\t\t\t\tthis._changeHandler();\n\t\t\t\t\t\t},\n\t\t\t\t\t\t'Item:onDeselect': (event) => {\n\t\t\t\t\t\t\tthis.handleUserSelectorChanges(event);\n\t\t\t\t\t\t\tthis._changeHandler();\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tfooter: Footer,\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\tif (this.tagSelector.getDialog() && value.length > 0)\n\t\t{\n\t\t\tconst dialog = this.tagSelector.getDialog();\n\n\t\t\tvalue.forEach((item) => {\n\t\t\t\tdialog.addItem({\n\t\t\t\t\tid: item.PRODUCT_ID,\n\t\t\t\t\ttitle: item.PRODUCT_NAME,\n\t\t\t\t\tavatar: item.IMAGE,\n\t\t\t\t\tselected: true,\n\t\t\t\t\tentityId: Const.ENTITY_ID.PRODUCT_VARIATION,\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\treturn this.tagSelector;\n\t}\n\n\thandleUserSelectorChanges(event: BaseEvent)\n\t{\n\t\tthis.entityList = [];\n\t\tconst values = [];\n\n\t\tconst selectedItems = event.getTarget().getSelectedItems();\n\t\tselectedItems.forEach((item) => {\n\t\t\tvalues.push({\n\t\t\t\tPRODUCT_ID: item.getId(),\n\t\t\t\tPRODUCT_TYPE: Const.TYPE.PRODUCT,\n\t\t\t});\n\n\t\t\tthis.entityList.push({\n\t\t\t\tPRODUCT_ID: item.getId(),\n\t\t\t\tPRODUCT_TYPE: Const.TYPE.PRODUCT,\n\t\t\t\tPRODUCT_NAME: item.getTitle(),\n\t\t\t});\n\t\t});\n\n\t\tthis._input.value = JSON.stringify(values);\n\t}\n\n\tvalidate(result)\n\t{\n\t\tif(!(this._mode === BX.UI.EntityEditorMode.edit && this._input))\n\t\t{\n\t\t\tthrow \"BX.Catalog.Entity-editor.Field.ProductSet. Invalid validation context\";\n\t\t}\n\n\t\tthis.clearError();\n\n\t\tif(this.hasValidators())\n\t\t{\n\t\t\treturn this.executeValidators(result);\n\t\t}\n\n\t\tlet isValid = !(this.isRequired() || this.isRequiredByAttribute()) || BX.util.trim(this._input.value) !== \"\";\n\t\tif (!isValid)\n\t\t{\n\t\t\tresult.addError(BX.UI.EntityValidationError.create({ field: this }));\n\t\t\tthis.showRequiredFieldError(this._input);\n\t\t}\n\t\treturn isValid;\n\t}\n\n\thasValue()\n\t{\n\t\tif (this.getValue().length === 0)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\treturn super.hasValue();\n\t}\n\n\tgetModeSwitchType(mode)\n\t{\n\t\tlet result = BX.UI.EntityEditorModeSwitchType.common;\n\n\t\tif (mode === BX.UI.EntityEditorMode.edit)\n\t\t{\n\t\t\tresult |= BX.UI.EntityEditorModeSwitchType.button | BX.UI.EntityEditorModeSwitchType.content;\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tgetIBlockIdFromModel()\n\t{\n\t\treturn this._model.getSchemeField(this._schemeElement, 'iblockId', 0);\n\t}\n\n\tgetEntityListFromModel()\n\t{\n\t\treturn this._model.getSchemeField(this._schemeElement, 'entityList', []);\n\t}\n\n\trollback()\n\t{\n\t\tthis.entityList = this.getEntityListFromModel();\n\t}\n\n\tstatic create(id, settings)\n\t{\n\t\tlet self = new this(id, settings);\n\t\tself.initialize(id, settings);\n\t\treturn self;\n\t}\n}","import {EventEmitter} from \"main.core.events\";\nimport type {BaseEvent} from \"main.core.events\";\nimport {ProductSetField} from \"./productset\";\n\nexport class ProductSetFieldFactory\n{\n\tconstructor(entityEditorControlFactory = 'BX.UI.EntityEditorControlFactory')\n\t{\n\t\tEventEmitter.subscribe(entityEditorControlFactory + ':onInitialize', (event: BaseEvent) => {\n\t\t\tconst [, eventArgs] = event.getCompatData();\n\t\t\teventArgs.methods['productSet'] = this.factory.bind(this);\n\t\t});\n\t}\n\n\tfactory(type, controlId, settings)\n\t{\n\t\tif (type === 'productSet')\n\t\t{\n\t\t\treturn ProductSetField.create(controlId, settings);\n\t\t}\n\n\t\treturn null;\n\t}\n}"],"names":["Footer","DefaultFooter","constructor","dialog","options","selectAllButton","Tag","render","Loc","getMessage","Event","bind","selectAll","deselectAllButton","deselectAll","getDialog","subscribe","onItemStatusChange","toggleSelectButtons","getContent","getAmountSelectedItems","getAmountItems","Dom","hasClass","addClass","removeClass","activeTab","getActiveTab","children","getRootNode","getChildren","items","length","forEach","child","getItem","select","getItems","item","getSelectedItems","deselect","amount","filter","isSelected","Const","Object","freeze","TYPE","PRODUCT","ENTITY_ID","PRODUCT_VARIATION","ProductSetField","BX","UI","EntityEditorField","id","settings","initialize","_input","_inputWrapper","innerWrapper","entityList","tagSelector","getContentWrapper","layout","_hasLayout","ensureWrapperCreated","adjustWrapper","title","getTitle","isDragEnabled","_wrapper","appendChild","createDragButton","createTitleNode","name","getName","value","getValue","getEntityListFromModel","inputValue","JSON","stringify","_mode","EntityEditorMode","edit","getProductSelector","setReadonly","renderTo","EntityEditorModeOptions","check","_modeOptions","individual","show","hasContentToDisplay","viewModeDisplay","isContextMenuEnabled","createContextMenuButton","initializeDragDropAbilities","registerLayout","iblockId","getIBlockIdFromModel","TagSelector","textBoxWidth","multiple","dialogOptions","context","entities","searchOptions","allowCreateItem","events","event","handleUserSelectorChanges","_changeHandler","footer","addItem","PRODUCT_ID","PRODUCT_NAME","avatar","IMAGE","selected","entityId","values","selectedItems","getTarget","push","getId","PRODUCT_TYPE","validate","result","clearError","hasValidators","executeValidators","isValid","isRequired","isRequiredByAttribute","util","trim","addError","EntityValidationError","create","field","showRequiredFieldError","hasValue","getModeSwitchType","mode","EntityEditorModeSwitchType","common","button","content","_model","getSchemeField","_schemeElement","rollback","self","ProductSetFieldFactory","entityEditorControlFactory","EventEmitter","eventArgs","getCompatData","methods","factory","type","controlId"],"mappings":"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"}