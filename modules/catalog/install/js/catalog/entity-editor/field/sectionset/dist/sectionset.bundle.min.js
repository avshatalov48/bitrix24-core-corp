this.BX=this.BX||{};this.BX.Catalog=this.BX.Catalog||{};this.BX.Catalog.EntityEditor=this.BX.Catalog.EntityEditor||{};(function(t,e,i,o){"use strict";const s=Object.freeze({TYPE:{SECTION:"SECTION"},ENTITY_ID:{SECTION:"agent-contractor-section"}});class n extends i.ProductSetField{constructor(t,e){super(t,e);this.initialize(t,e);this._input=null;this._inputWrapper=null;this.innerWrapper=null;this.entityList=null;this.tagSelector=null}getProductSelector(t){const o=this.getIBlockIdFromModel();if(!this.tagSelector){this.tagSelector=new e.TagSelector({textBoxWidth:"100%",multiple:true,dialogOptions:{context:"catalog_document_sectionset",entities:[{id:s.ENTITY_ID.SECTION,options:{iblockId:o}}],searchOptions:{allowCreateItem:false},events:{"Item:onSelect":t=>{this.handleUserSelectorChanges(t);this._changeHandler()},"Item:onDeselect":t=>{this.handleUserSelectorChanges(t);this._changeHandler()}},footer:i.Footer}})}if(this.tagSelector.getDialog()&&t.length>0){const e=this.tagSelector.getDialog();t.forEach((t=>{e.addItem({id:t.PRODUCT_ID,title:t.PRODUCT_NAME,avatar:t.IMAGE,selected:true,entityId:s.ENTITY_ID.SECTION})}))}return this.tagSelector}handleUserSelectorChanges(t){this.entityList=[];const e=[];const i=t.getTarget().getSelectedItems();i.forEach((t=>{e.push({PRODUCT_ID:t.getId(),PRODUCT_TYPE:s.TYPE.SECTION});this.entityList.push({PRODUCT_ID:t.getId(),PRODUCT_TYPE:s.TYPE.SECTION,PRODUCT_NAME:t.getTitle()})}));this._input.value=JSON.stringify(e)}static create(t,e){const i=new this(t,e);i.initialize(t,e);return i}}class l{constructor(t="BX.UI.EntityEditorControlFactory"){o.EventEmitter.subscribe(`${t}:onInitialize`,(t=>{const[,e]=t.getCompatData();e.methods.sectionSet=this.factory.bind(this)}))}factory(t,e,i){if(t==="sectionSet"){return n.create(e,i)}return null}}t.SectionSetField=n;t.SectionSetFieldFactory=l})(this.BX.Catalog.EntityEditor.Field=this.BX.Catalog.EntityEditor.Field||{},BX.UI.EntitySelector,BX.Catalog.EntityEditor.Field,BX.Event);
//# sourceMappingURL=sectionset.bundle.map.js