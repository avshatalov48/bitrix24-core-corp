{"version":3,"file":"sku-tree.bundle.js","sources":["../src/sku-property.js","../src/sku-tree.js"],"sourcesContent":["import {Dom, Tag, Text, Type} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\nimport {SkuTree} from 'catalog.sku-tree';\n\nexport default class SkuProperty\n{\n\tparent: ?SkuTree;\n\n\tskuSelectHandler = this.handleSkuSelect.bind(this);\n\n\tconstructor(options)\n\t{\n\t\tthis.parent = options.parent || null;\n\t\tif (!this.parent)\n\t\t{\n\t\t\tthrow new Error('Parent is not defined.');\n\t\t}\n\n\t\tthis.property = options.property || {};\n\t\tthis.offers = options.offers || [];\n\t\tthis.existingValues = options.existingValues || [];\n\t\tthis.nodeDescriptions = [];\n\t\tthis.hideUnselected = options.hideUnselected;\n\t}\n\n\tgetId()\n\t{\n\t\treturn this.property.ID;\n\t}\n\n\tgetSelectedSkuId()\n\t{\n\t\treturn this.parent.getSelectedSkuId();\n\t}\n\n\thasSkuValues()\n\t{\n\t\treturn this.property.VALUES.length;\n\t}\n\n\trenderPictureSku(propertyValue, uniqueId)\n\t{\n\t\tconst propertyName = Type.isStringFilled(propertyValue.NAME) ? Text.encode(propertyValue.NAME) : '';\n\n\t\tlet nameNode = '';\n\t\tif (Type.isStringFilled(propertyName))\n\t\t{\n\t\t\tnameNode = Tag.render`<span class=\"ui-ctl-label-text\">${propertyName}</span>`;\n\t\t}\n\n\t\tlet iconNode = '';\n\t\tif (propertyValue.PICT && propertyValue.PICT.SRC)\n\t\t{\n\t\t\tconst style = \"background-image: url('\" + propertyValue.PICT.SRC + \"');\";\n\t\t\ticonNode = Tag.render`<span class=\"ui-ctl-label-img\" style=\"${style}\"></span>`;\n\t\t}\n\t\telse if (nameNode)\n\t\t{\n\t\t\tnameNode.style.paddingLeft = '0';\n\t\t}\n\t\telse\n\t\t{\n\t\t\tnameNode = Tag.render`<span class=\"ui-ctl-label-text\">-</span>`;\n\t\t}\n\n\t\tconst titleItem =\n\t\t\tthis.parent.isShortView && Type.isStringFilled(this.property.NAME)\n\t\t\t\t? Text.encode(this.property.NAME)\n\t\t\t\t: propertyName\n\t\t;\n\n\t\treturn Tag.render`\n\t\t\t<label \tclass=\"ui-ctl ui-ctl-radio-selector\"\n\t\t\t\t\tonclick=\"${this.skuSelectHandler}\"\n\t\t\t\t\ttitle=\"${titleItem}\"\n\t\t\t\t\tdata-property-id=\"${this.getId()}\"\n\t\t\t\t\tdata-property-value=\"${propertyValue.ID}\">\n\t\t\t\t<input type=\"radio\"\n\t\t\t\t\tdisabled=\"${!this.parent.isSelectable()}\"\n\t\t\t\t\tname=\"property-${this.getSelectedSkuId()}-${this.getId()}-${uniqueId}\"\n\t\t\t\t\tclass=\"ui-ctl-element\">\n\t\t\t\t<span class=\"ui-ctl-inner\">\n\t\t\t\t\t${iconNode}\n\t\t\t\t\t${nameNode}\n\t\t\t\t</span>\n\t\t\t</label>\n\t\t`;\n\t}\n\n\trenderTextSku(propertyValue, uniqueId)\n\t{\n\t\tconst propertyName = Type.isStringFilled(propertyValue.NAME) ? Text.encode(propertyValue.NAME) : '-';\n\t\tconst titleItem =\n\t\t\tthis.parent.isShortView && Type.isStringFilled(this.property.NAME)\n\t\t\t\t? Text.encode(this.property.NAME)\n\t\t\t\t: propertyName\n\t\t;\n\n\t\treturn Tag.render`\n\t\t\t<label \tclass=\"ui-ctl ui-ctl-radio-selector\"\n\t\t\t\t\tonclick=\"${this.skuSelectHandler}\"\n\t\t\t\t\ttitle=\"${titleItem}\"\n\t\t\t\t\tdata-property-id=\"${this.getId()}\"\n\t\t\t\t\tdata-property-value=\"${propertyValue.ID}\">\n\t\t\t\t<input type=\"radio\"\n\t\t\t\t\tdisabled=\"${!this.parent.isSelectable()}\"\n\t\t\t\t\tname=\"property-${this.getSelectedSkuId()}-${this.getId()}-${uniqueId}\"\n\t\t\t\t\tclass=\"ui-ctl-element\">\n\t\t\t\t<span class=\"ui-ctl-inner\">\n\t\t\t\t\t<span class=\"ui-ctl-label-text\">${propertyName}</span>\n\t\t\t\t</span>\n\t\t\t</label>\n\t\t`;\n\t}\n\n\tlayout()\n\t{\n\t\tif (!this.hasSkuValues())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.skuList = this.renderProperties();\n\t\tthis.toggleSkuPropertyValues();\n\n\t\tconst title = !this.parent.isShortView\n\t\t\t? Tag.render`<div class=\"product-item-detail-info-container-title\">${Text.encode(this.property.NAME)}</div>`\n\t\t\t: ''\n\t\t;\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"product-item-detail-info-container\">\n\t\t\t\t${title}\n\t\t\t\t<div class=\"product-item-scu-container\">\n\t\t\t\t\t${this.skuList}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\trenderProperties()\n\t{\n\t\tconst skuList = Tag.render`<div class=\"product-item-scu-list ui-ctl-spacing-right\"></div>`;\n\n\t\tthis.property.VALUES.forEach((propertyValue) => {\n\t\t\tlet propertyValueId = propertyValue.ID;\n\t\t\tlet node;\n\t\t\tlet uniqueId = Text.getRandom();\n\n\t\t\tif (!propertyValueId || this.existingValues.includes(propertyValueId))\n\t\t\t{\n\t\t\t\tif (this.property.SHOW_MODE === 'PICT')\n\t\t\t\t{\n\t\t\t\t\tDom.addClass(skuList, 'product-item-scu-list--pick-color');\n\t\t\t\t\tnode = this.renderPictureSku(propertyValue, uniqueId);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tDom.addClass(skuList, 'product-item-scu-list--pick-size');\n\t\t\t\t\tnode = this.renderTextSku(propertyValue, uniqueId);\n\t\t\t\t}\n\n\t\t\t\tthis.nodeDescriptions.push({propertyValueId, node});\n\t\t\t\tskuList.appendChild(node);\n\t\t\t}\n\t\t});\n\n\t\treturn skuList;\n\t}\n\n\ttoggleSkuPropertyValues()\n\t{\n\t\tconst selectedSkuProperty = this.parent.getSelectedSkuProperty(this.getId());\n\t\tconst activeSkuProperties = this.parent.getActiveSkuProperties(this.getId());\n\n\t\tthis.nodeDescriptions.forEach((item) => {\n\t\t\tlet id = Text.toNumber(item.propertyValueId);\n\t\t\tlet input = item.node.querySelector('input[type=\"radio\"]');\n\n\t\t\tif (selectedSkuProperty === id)\n\t\t\t{\n\t\t\t\tinput.checked = true;\n\t\t\t\tDom.addClass(item.node, 'selected');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tinput.checked = false;\n\t\t\t\tDom.removeClass(item.node, 'selected');\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\t(this.hideUnselected && selectedSkuProperty !== id)\n\t\t\t\t|| !activeSkuProperties.includes(item.propertyValueId)\n\t\t\t)\n\t\t\t{\n\t\t\t\tDom.style(item.node, {display: 'none'});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tDom.style(item.node, {display: null});\n\t\t\t}\n\t\t});\n\t}\n\n\thandleSkuSelect(event)\n\t{\n\t\tevent.stopPropagation();\n\n\t\tconst selectedSkuProperty = event.target.closest('[data-property-id]');\n\t\tif (!this.parent.isSelectable() || Dom.hasClass(selectedSkuProperty, 'selected'))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst propertyId = Text.toNumber(selectedSkuProperty.getAttribute('data-property-id'));\n\t\tconst propertyValue = Text.toNumber(selectedSkuProperty.getAttribute('data-property-value'));\n\t\tthis.parent.setSelectedProperty(propertyId, propertyValue);\n\n\t\tthis.parent.getSelectedSku().then((selectedSkuData) => {\n\t\t\tEventEmitter.emit('SkuProperty::onChange', [selectedSkuData, this.property]);\n\t\t\tif (this.parent)\n\t\t\t{\n\t\t\t\tthis.parent.emit('SkuProperty::onChange', [selectedSkuData, this.property]);\n\t\t\t}\n\t\t});\n\n\t\tthis.parent.toggleSkuProperties();\n\t}\n}\n","import {Tag, Type, Text, Dom, ajax} from 'main.core';\nimport 'ui.design-tokens';\nimport './sku-tree.css';\nimport SkuProperty from './sku-property';\nimport {EventEmitter} from 'main.core.events';\nimport 'ui.forms';\nimport 'ui.buttons';\n\nconst iblockSkuProperties = new Map();\nconst iblockSkuList = new Map();\nconst propertyPromises = new Map();\n\nexport class SkuTree extends EventEmitter\n{\n\tselectedValues = {};\n\n\tstatic DEFAULT_IBLOCK_ID = 0;\n\n\tconstructor(options)\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Catalog.SkuTree');\n\n\t\tthis.id = Text.getRandom();\n\t\tthis.skuTree = options.skuTree || {};\n\n\t\tthis.productId = this.skuTree?.PRODUCT_ID;\n\n\t\tthis.skuTreeOffers = this.skuTree.OFFERS || [];\n\n\t\tif (!Type.isNil(options.skuTree.OFFERS_JSON) && !Type.isArrayFilled(this.skuTreeOffers))\n\t\t{\n\t\t\tthis.skuTreeOffers = JSON.parse(this.skuTree.OFFERS_JSON);\n\t\t}\n\n\t\tthis.iblockId = this.skuTree.IBLOCK_ID || SkuTree.DEFAULT_IBLOCK_ID;\n\t\tif (!iblockSkuProperties.has(this.iblockId))\n\t\t{\n\t\t\tif (Type.isObject(this.skuTree.OFFERS_PROP))\n\t\t\t{\n\t\t\t\tiblockSkuProperties.set(this.iblockId, this.skuTree.OFFERS_PROP);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tiblockSkuProperties.set(this.iblockId, {});\n\t\t\t\tconst promise = new Promise((resolve) => {\n\t\t\t\t\tajax\n\t\t\t\t\t\t.runAction(\t'catalog.skuTree.getIblockProperties', {\n\t\t\t\t\t\t\tjson:{\n\t\t\t\t\t\t\t\tiblockId: this.iblockId\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.then((result) => {\n\t\t\t\t\t\t\tiblockSkuProperties.set(this.iblockId, result.data);\n\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t\tpropertyPromises.delete(SkuTree.#getIblockPropertiesRequestName(this.iblockId));\n\t\t\t\t\t\t});\n\t\t\t\t});\n\n\t\t\t\tpropertyPromises.set(SkuTree.#getIblockPropertiesRequestName(this.iblockId), promise);\n\t\t\t}\n\t\t}\n\n\t\tthis.selectable = (options.selectable !== false);\n\t\tthis.isShortView = (options.isShortView === true);\n\t\tthis.hideUnselected = (options.hideUnselected === true);\n\n\t\tif (this.hasSku())\n\t\t{\n\t\t\tthis.selectedValues = this.skuTree.SELECTED_VALUES || {...this.skuTreeOffers[0].TREE};\n\t\t}\n\n\t\tthis.existingValues = this.skuTree.EXISTING_VALUES || {};\n\t\tif (!Type.isNil(options.skuTree.EXISTING_VALUES_JSON) && Type.isNil(options.skuTree.EXISTING_VALUES))\n\t\t{\n\t\t\tthis.existingValues = JSON.parse(options.skuTree.EXISTING_VALUES_JSON);\n\t\t}\n\n\t\tfor (const key in this.existingValues)\n\t\t{\n\t\t\tif (this.existingValues[key].length === 1 && this.existingValues[key][0] === 0)\n\t\t\t{\n\t\t\t\tdelete this.existingValues[key];\n\t\t\t}\n\t\t}\n\t}\n\n\tstatic #getIblockPropertiesRequestName(iblockId: number): string\n\t{\n\t\treturn 'IblockPropertiesRequest_' + iblockId;\n\t}\n\n\tgetProperties(): {}\n\t{\n\t\treturn iblockSkuProperties.get(this.iblockId);\n\t}\n\n\tisSelectable(): boolean\n\t{\n\t\treturn this.selectable;\n\t}\n\n\tgetSelectedValues(): {}\n\t{\n\t\treturn this.selectedValues;\n\t}\n\n\tsetSelectedProperty(propertyId, propertyValue)\n\t{\n\t\tthis.selectedValues[propertyId] = Text.toNumber(propertyValue);\n\n\t\tconst remainingProperties = this.getRemainingProperties(propertyId);\n\t\tif (remainingProperties.length)\n\t\t{\n\t\t\tfor (const remainingPropertyId of remainingProperties)\n\t\t\t{\n\t\t\t\tconst filterProperties = this.getFilterProperties(remainingPropertyId);\n\t\t\t\tconst skuItems = this.filterSku(filterProperties);\n\n\t\t\t\tif (skuItems.length)\n\t\t\t\t{\n\t\t\t\t\tlet found = false;\n\t\t\t\t\tfor (const sku of skuItems)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (sku.TREE[remainingPropertyId] === this.selectedValues[remainingPropertyId])\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfound = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!found)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.selectedValues[remainingPropertyId] = skuItems[0].TREE[remainingPropertyId];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tgetRemainingProperties(propertyId): []\n\t{\n\t\tconst filter = [];\n\t\tlet found = false;\n\n\t\tfor (const prop of Object.values(this.getProperties()))\n\t\t{\n\t\t\tif (prop.ID === propertyId)\n\t\t\t{\n\t\t\t\tfound = true;\n\t\t\t}\n\t\t\telse if (found)\n\t\t\t{\n\t\t\t\tfilter.push(prop.ID);\n\t\t\t}\n\t\t}\n\n\t\treturn filter;\n\t}\n\n\thasSku(): boolean\n\t{\n\t\treturn Type.isArrayFilled(this.skuTreeOffers);\n\t}\n\n\thasSkuProps(): boolean\n\t{\n\t\treturn Object.values(this.getProperties()).length > 0;\n\t}\n\n\tgetSelectedSkuId(): ?number\n\t{\n\t\tif (!this.hasSku())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst item = this.skuTreeOffers.filter(item => {\n\t\t\treturn JSON.stringify(item.TREE) === JSON.stringify(this.selectedValues);\n\t\t})[0]\n\n\t\treturn item?.ID;\n\t}\n\n\tgetSelectedSku(): Promise\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst skuId = this.getSelectedSkuId();\n\n\t\t\tif (skuId <= 0)\n\t\t\t{\n\t\t\t\treject();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (iblockSkuList.has(skuId))\n\t\t\t{\n\t\t\t\tconst skuData = iblockSkuList.get(skuId);\n\t\t\t\tresolve(skuData);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (propertyPromises.has(SkuTree.#getSkuRequestName(skuId)))\n\t\t\t\t{\n\t\t\t\t\tpropertyPromises\n\t\t\t\t\t\t.get(SkuTree.#getSkuRequestName(skuId))\n\t\t\t\t\t\t.then((skuFields) => {\n\t\t\t\t\t\t\tresolve(skuFields);\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tconst skuRequest = ajax\n\t\t\t\t\t\t.runAction(\t'catalog.skuTree.getSku', {\n\t\t\t\t\t\t\tjson: {\tskuId }\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.then((result) => {\n\t\t\t\t\t\t\tconst skuData = result.data;\n\t\t\t\t\t\t\tiblockSkuList.set(skuId, skuData);\n\t\t\t\t\t\t\tresolve(skuData);\n\n\t\t\t\t\t\t\tpropertyPromises.delete(SkuTree.#getSkuRequestName(skuId), skuRequest);\n\t\t\t\t\t\t});\n\n\t\t\t\t\tpropertyPromises.set(SkuTree.#getSkuRequestName(skuId), skuRequest)\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tstatic #getSkuRequestName(skuId: number): string\n\t{\n\t\treturn 'SkuFieldsRequest_' + skuId;\n\t}\n\n\tgetActiveSkuProperties(propertyId): {}\n\t{\n\t\tconst activeSkuProperties = [];\n\t\tconst filterProperties = this.getFilterProperties(propertyId);\n\n\t\tthis.filterSku(filterProperties)\n\t\t\t.forEach(item => {\n\t\t\t\tif (!activeSkuProperties.includes(item.TREE[propertyId]))\n\t\t\t\t{\n\t\t\t\t\tactiveSkuProperties.push(item.TREE[propertyId]);\n\t\t\t\t}\n\t\t\t})\n\t\t;\n\n\t\treturn activeSkuProperties;\n\t}\n\n\tgetFilterProperties(propertyId): []\n\t{\n\t\tconst filter = [];\n\n\t\tfor (const prop of Object.values(this.getProperties()))\n\t\t{\n\t\t\tif (prop.ID === propertyId)\n\t\t\t{\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tfilter.push(prop.ID);\n\t\t}\n\n\t\treturn filter;\n\t}\n\n\tfilterSku(filter): []\n\t{\n\t\tif (filter.length === 0)\n\t\t{\n\t\t\treturn this.skuTreeOffers;\n\t\t}\n\n\t\tconst selectedValues = this.getSelectedValues();\n\n\t\treturn this.skuTreeOffers.filter(sku => {\n\t\t\tfor (const propertyId of filter)\n\t\t\t{\n\t\t\t\tif (sku.TREE[propertyId] !== selectedValues[propertyId])\n\t\t\t\t{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn true;\n\t\t});\n\t}\n\n\tgetSelectedSkuProperty(propertyId)\n\t{\n\t\treturn Text.toNumber(this.selectedValues[propertyId]);\n\t}\n\n\tlayout(): HTMLElement\n\t{\n\t\tconst container = Tag.render`<div class=\"product-item-scu-wrapper\" id=\"${this.id}\"></div>`;\n\n\t\tif (this.isShortView)\n\t\t{\n\t\t\tDom.addClass(container, '--short-format');\n\t\t}\n\n\t\tthis.skuProperties = [];\n\t\tif (this.hasSku())\n\t\t{\n\t\t\tnew Promise(\n\t\t\t\t(resolve) => {\n\t\t\t\t\tif (propertyPromises.has(SkuTree.#getIblockPropertiesRequestName(this.iblockId)))\n\t\t\t\t\t{\n\t\t\t\t\t\tpropertyPromises\n\t\t\t\t\t\t\t.get(SkuTree.#getIblockPropertiesRequestName(this.iblockId))\n\t\t\t\t\t\t\t.then(resolve);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.then(() => {\n\t\t\t\t\tif (!this.hasSkuProps())\n\t\t\t\t\t{\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst skuProperties = this.getProperties();\n\t\t\t\t\tfor (const i in skuProperties)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (skuProperties.hasOwnProperty(i) && !Type.isNil(this.existingValues[i]))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconst skuProperty = new SkuProperty({\n\t\t\t\t\t\t\t\tparent: this,\n\t\t\t\t\t\t\t\tproperty: skuProperties[i],\n\t\t\t\t\t\t\t\texistingValues:\n\t\t\t\t\t\t\t\t\tType.isArray(this.existingValues[i])\n\t\t\t\t\t\t\t\t\t\t? this.existingValues[i]\n\t\t\t\t\t\t\t\t\t\t:\tObject.values(this.existingValues[i])\n\t\t\t\t\t\t\t\t,\n\t\t\t\t\t\t\t\toffers: this.skuTreeOffers,\n\t\t\t\t\t\t\t\thideUnselected: this.hideUnselected,\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tDom.append(skuProperty.layout(), container);\n\t\t\t\t\t\t\tthis.skuProperties.push(skuProperty);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t}\n\n\t\treturn container;\n\t}\n\n\ttoggleSkuProperties()\n\t{\n\t\tthis.skuProperties.forEach(property => property.toggleSkuPropertyValues());\n\t}\n}"],"names":["SkuProperty","options","handleSkuSelect","bind","parent","Error","property","offers","existingValues","nodeDescriptions","hideUnselected","ID","getSelectedSkuId","VALUES","length","propertyValue","uniqueId","propertyName","Type","isStringFilled","NAME","Text","encode","nameNode","Tag","render","iconNode","PICT","SRC","style","paddingLeft","titleItem","isShortView","skuSelectHandler","getId","isSelectable","hasSkuValues","skuList","renderProperties","toggleSkuPropertyValues","title","forEach","propertyValueId","node","getRandom","includes","SHOW_MODE","Dom","addClass","renderPictureSku","renderTextSku","push","appendChild","selectedSkuProperty","getSelectedSkuProperty","activeSkuProperties","getActiveSkuProperties","item","id","toNumber","input","querySelector","checked","removeClass","display","event","stopPropagation","target","closest","hasClass","propertyId","getAttribute","setSelectedProperty","getSelectedSku","then","selectedSkuData","EventEmitter","emit","toggleSkuProperties","iblockSkuProperties","Map","iblockSkuList","propertyPromises","SkuTree","setEventNamespace","skuTree","productId","PRODUCT_ID","skuTreeOffers","OFFERS","isNil","OFFERS_JSON","isArrayFilled","JSON","parse","iblockId","IBLOCK_ID","DEFAULT_IBLOCK_ID","has","isObject","OFFERS_PROP","set","promise","Promise","resolve","ajax","runAction","json","result","data","selectable","hasSku","selectedValues","SELECTED_VALUES","TREE","EXISTING_VALUES","EXISTING_VALUES_JSON","key","get","remainingProperties","getRemainingProperties","remainingPropertyId","filterProperties","getFilterProperties","skuItems","filterSku","found","sku","filter","Object","values","getProperties","prop","stringify","reject","skuId","skuData","skuFields","skuRequest","getSelectedValues","container","skuProperties","hasSkuProps","i","hasOwnProperty","skuProperty","isArray","append","layout"],"mappings":"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"}