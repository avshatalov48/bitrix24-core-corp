this.BX=this.BX||{};(function(t,e,n,o,a){"use strict";class i extends BX.UI.EntityEditorController{constructor(t,e){super();this.initialize(t,e)}onAfterSave(){super.onAfterSave();window.top.BX.onCustomEvent("AgentContract:onDocumentSave");let t=BX.SidePanel.Instance.getOpenSliders();t.forEach((t=>{t.getWindow().BX.onCustomEvent("AgentContract:onDocumentSave")}))}}class r{constructor(t){e.EventEmitter.subscribe(t+":onInitialize",(t=>{const[,e]=t.getCompatData();e.methods["agent_contract"]=this.factory.bind(this)}))}factory(t,e,n){if(t==="agent_contract"){return new i(e,n)}return null}}class s extends BX.UI.EntityModel{constructor(t,e){super();this.initialize(t,e)}isCaptionEditable(){return true}getCaption(){var t=this.getField("TITLE");return BX.type.isString(t)?t:""}setCaption(t){this.setField("TITLE",t)}prepareCaptionData(t){t["TITLE"]=this.getField("TITLE","")}}class c{constructor(){e.EventEmitter.subscribe("BX.UI.EntityEditorModelFactory:onInitialize",(t=>{const[,e]=t.getCompatData();e.methods["agent_contract"]=this.factory.bind(this)}))}factory(t,e,n){if(t==="agent_contract"){return new s(e,n)}return null}}class l{constructor(t={}){this.grid=t.grid||null;BX.addCustomEvent("AgentContract:onDocumentSave",(()=>{var t;(t=this.grid)==null?void 0:t.reload()}));BX.SidePanel.Instance.bindAnchors({rules:[{condition:[new RegExp("/agent_contract/details/[0-9]+/"),new RegExp("/bitrix/admin/cat_agent_contract.php\\?ID=([0-9]+)")],options:{allowChangeHistory:false,cacheable:false,width:650}}]})}delete(t){let e=new o.Popup({id:"catalog_agent_contract_list_delete_popup",titleBar:n.Loc.getMessage("CATALOG_AGENT_CONTRACT_TITLE_DELETE_TITLE"),content:n.Loc.getMessage("CATALOG_AGENT_CONTRACT_TITLE_DELETE_CONTENT"),buttons:[new a.Button({text:n.Loc.getMessage("CATALOG_AGENT_CONTRACT_BUTTON_CONTINUE"),color:a.ButtonColor.SUCCESS,onclick:(o,a)=>{o.setDisabled();n.ajax.runAction("catalog.agentcontract.entity.delete",{data:{id:t}}).then((t=>{var n;e.destroy();(n=this.grid)==null?void 0:n.reload()})).catch((t=>{if(t.errors){BX.UI.Notification.Center.notify({content:BX.util.htmlspecialchars(t.errors[0].message)})}e.destroy()}))}}),new a.Button({text:n.Loc.getMessage("CATALOG_AGENT_CONTRACT_BUTTON_CANCEL"),color:a.ButtonColor.DANGER,onclick:(t,n)=>{e.destroy()}})]});e.show()}deleteList(){let t=this.grid.getRows().getSelectedIds();n.ajax.runAction("catalog.agentcontract.entity.deleteList",{data:{ids:t}}).then((t=>{var e;(e=this.grid)==null?void 0:e.reload()})).catch((t=>{var e;if(t.errors){t.errors.forEach((t=>{if(t.message){BX.UI.Notification.Center.notify({content:BX.util.htmlspecialchars(t.message)})}}))}(e=this.grid)==null?void 0:e.reload()}))}}t.ControllersFactory=r;t.ModelFactory=c;t.GridActions=l})(this.BX.Catalog=this.BX.Catalog||{},BX.Event,BX,BX.Main,BX.UI);
//# sourceMappingURL=agent-contract.bundle.map.js