this.BX=this.BX||{};(function(t,e,n,i){"use strict";class a extends BX.UI.EntityEditorController{constructor(t,e){super();this.initialize(t,e)}onAfterSave(){super.onAfterSave();window.top.BX.onCustomEvent("AgentContract:onDocumentSave");let t=BX.SidePanel.Instance.getOpenSliders();t.forEach((t=>{t.getWindow().BX.onCustomEvent("AgentContract:onDocumentSave")}))}}class o{constructor(t){e.EventEmitter.subscribe(t+":onInitialize",(t=>{const[,e]=t.getCompatData();e.methods["agent_contract"]=this.factory.bind(this)}))}factory(t,e,n){if(t==="agent_contract"){return new a(e,n)}return null}}class r extends BX.UI.EntityModel{constructor(t,e){super();this.initialize(t,e)}isCaptionEditable(){return true}getCaption(){var t=this.getField("TITLE");return BX.type.isString(t)?t:""}setCaption(t){this.setField("TITLE",t)}prepareCaptionData(t){t["TITLE"]=this.getField("TITLE","")}}class s{constructor(){e.EventEmitter.subscribe("BX.UI.EntityEditorModelFactory:onInitialize",(t=>{const[,e]=t.getCompatData();e.methods["agent_contract"]=this.factory.bind(this)}))}factory(t,e,n){if(t==="agent_contract"){return new r(e,n)}return null}}class c{constructor(t={}){this.grid=t.grid||null;BX.addCustomEvent("AgentContract:onDocumentSave",(()=>{var t;(t=this.grid)==null?void 0:t.reload()}));BX.SidePanel.Instance.bindAnchors({rules:[{condition:[new RegExp("/agent_contract/details/[0-9]+/"),new RegExp("/bitrix/admin/cat_agent_contract.php\\?ID=([0-9]+)")],options:{allowChangeHistory:false,cacheable:false,width:650}}]})}delete(t){i.MessageBox.confirm(n.Loc.getMessage("CATALOG_AGENT_CONTRACT_TITLE_DELETE_CONTENT"),((e,i)=>{i.setWaiting();n.ajax.runAction("catalog.agentcontract.entity.delete",{data:{id:t}}).then((()=>{var t;e.close();(t=this.grid)==null?void 0:t.reload()})).catch((t=>{if(t.errors){BX.UI.Notification.Center.notify({content:BX.util.htmlspecialchars(t.errors[0].message)})}e.close()}))}),n.Loc.getMessage("CATALOG_AGENT_CONTRACT_BUTTON_CONFIRM"),(t=>t.close()),n.Loc.getMessage("CATALOG_AGENT_CONTRACT_BUTTON_BACK"))}deleteList(){let t=this.grid.getRows().getSelectedIds();n.ajax.runAction("catalog.agentcontract.entity.deleteList",{data:{ids:t}}).then((t=>{var e;(e=this.grid)==null?void 0:e.reload()})).catch((t=>{var e;if(t.errors){t.errors.forEach((t=>{if(t.message){BX.UI.Notification.Center.notify({content:BX.util.htmlspecialchars(t.message)})}}))}(e=this.grid)==null?void 0:e.reload()}))}}t.ControllersFactory=o;t.ModelFactory=s;t.GridActions=c})(this.BX.Catalog=this.BX.Catalog||{},BX.Event,BX,BX.UI.Dialogs);
//# sourceMappingURL=agent-contract.bundle.map.js