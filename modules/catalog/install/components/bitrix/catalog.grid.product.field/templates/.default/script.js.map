{"version":3,"file":"script.js","sources":["script.es6.js"],"sourcesContent":["import { Dom, Reflection } from 'main.core';\nimport type { BaseEvent } from 'main.core.events';\nimport { EventEmitter } from 'main.core.events';\nimport { ProductSelector } from 'catalog.product-selector';\n\nconst instances = new Map();\n\nclass ProductField\n{\n\tstatic EDIT_CLASS = 'catalog-grid-product-field-edit';\n\tstatic PRODUCT_MODE = 'product';\n\tstatic SKU_MODE = 'sku';\n\n\tonSelectEditHandler = this.onSelectEdit.bind(this);\n\tonCancelEditHandler = this.onCancelEdit.bind(this);\n\tonBeforeGridRequestHandler = this.onBeforeGridRequest.bind(this);\n\tonUnsubscribeEventsHandler = this.unsubscribeEvents.bind(this);\n\tonSkuLoadedHandler = this.onSkuLoaded.bind(this);\n\tonGridUpdateHandler = this.onGridUpdate.bind(this);\n\n\tstatic getById(id: string): ?ProductField\n\t{\n\t\treturn instances.get(id) || null;\n\t}\n\n\tconstructor(id, settings = {})\n\t{\n\t\tthis.selector = new ProductSelector(id, settings);\n\t\tthis.columnName = settings.columnName || 'CATALOG_PRODUCT';\n\t\tthis.componentName = settings.componentName || '';\n\t\tthis.signedParameters = settings.signedParameters || '';\n\t\tthis.rowIdMask = settings.rowIdMask || '#ID#';\n\n\t\tthis.subscribeEvents();\n\n\t\tinstances.set(id, this);\n\t}\n\n\tsubscribeEvents()\n\t{\n\t\tEventEmitter.incrementMaxListeners('Grid::thereEditedRows', 1);\n\t\tEventEmitter.incrementMaxListeners('Grid::noEditedRows', 1);\n\t\tEventEmitter.incrementMaxListeners('Grid::beforeRequest', 1);\n\t\tEventEmitter.incrementMaxListeners('Grid::updated', 1);\n\n\t\tEventEmitter.subscribe('Grid::thereEditedRows', this.onSelectEditHandler);\n\t\tEventEmitter.subscribe('Grid::noEditedRows', this.onCancelEditHandler);\n\t\tEventEmitter.subscribe('Grid::beforeRequest', this.onBeforeGridRequestHandler);\n\t\tEventEmitter.subscribe('Grid::updated', this.onGridUpdateHandler);\n\t\tEventEmitter.subscribe('BX.Catalog.SkuTree::onSkuLoaded', this.onSkuLoadedHandler);\n\t\tEventEmitter.subscribeOnce(this.selector, 'onBeforeChange', this.onUnsubscribeEventsHandler);\n\t}\n\n\tunsubscribeEvents()\n\t{\n\t\tEventEmitter.unsubscribe('Grid::thereEditedRows', this.onSelectEditHandler);\n\t\tEventEmitter.unsubscribe('Grid::noEditedRows', this.onCancelEditHandler);\n\t\tEventEmitter.unsubscribe('Grid::beforeRequest', this.onBeforeGridRequestHandler);\n\t\tEventEmitter.unsubscribe('Grid::updated', this.onUnsubscribeEventsHandler);\n\t\tEventEmitter.unsubscribe('BX.Catalog.SkuTree::onSkuLoaded', this.onSkuLoadedHandler);\n\t\tthis.selector.unsubscribeEvents();\n\t}\n\n\tonSkuLoaded(event): void\n\t{\n\t\tconst currentRowElement = document.getElementById(event.data.id).closest('.main-grid-row.main-grid-row-body');\n\n\t\tif (\n\t\t\t!currentRowElement\n\t\t\t|| !currentRowElement.querySelectorAll('.main-grid-fixed-column')\n\t\t\t|| currentRowElement.style.height\n\t\t)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst inlineElementList = [...currentRowElement.querySelectorAll('.main-grid-cell')];\n\n\t\tif (inlineElementList.length === 0)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst maxColumnsHeight = Math.max(...(inlineElementList.map((cell) => parseInt(Dom.style(cell, 'height'), 10))));\n\n\t\tif (!maxColumnsHeight)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tDom.style(currentRowElement, 'height', `${maxColumnsHeight}px`);\n\t}\n\n\tonGridUpdate()\n\t{\n\t\tsetTimeout(() => {\n\t\t\tdocument.querySelectorAll('.main-grid-row.main-grid-row-body').forEach(currentRowElement => {\n\t\t\t\tif (currentRowElement.style.height)\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst inlineElements = [...currentRowElement.querySelectorAll('.main-grid-cell')];\n\n\t\t\t\tif (inlineElements.length === 0)\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst maxColumnsHeight = Math.max(...(inlineElements.map((cell) => parseInt(Dom.style(cell, 'height'), 10))));\n\n\t\t\t\tif (!maxColumnsHeight)\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tDom.style(currentRowElement, 'height', `${maxColumnsHeight}px`);\n\t\t\t});\n\t\t}, 0);\n\n\t\tthis.onUnsubscribeEventsHandler();\n\t}\n\n\tgetSelector(): ProductSelector\n\t{\n\t\treturn this.selector;\n\t}\n\n\tonBeforeGridRequest(event: BaseEvent)\n\t{\n\t\tconst wrapper = this.getSelector().getWrapper();\n\t\tif (!wrapper)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst [, gridData] = event.getData();\n\t\tconst submitData = BX.prop.get(gridData, 'data', {});\n\t\tif (!submitData.FIELDS)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tlet productId = this.getSelector().getModel().getProductId();\n\t\tproductId = this.rowIdMask.replace('#ID#', productId);\n\n\t\tsubmitData.FIELDS[productId] = submitData.FIELDS[productId] || {};\n\n\t\tconst imageInputContainer = wrapper.querySelector('.ui-image-input-container');\n\t\tif (imageInputContainer)\n\t\t{\n\t\t\tconst inputs = imageInputContainer.querySelectorAll('input');\n\t\t\tconst values = {};\n\t\t\tconst newFilesRegExp = new RegExp(/([0-9A-Za-z_]+?(_n\\d+)*)\\[([A-Za-z_]+)\\]/);\n\t\t\tfor (let inputItem of inputs)\n\t\t\t{\n\t\t\t\tif (newFilesRegExp.test(inputItem.name))\n\t\t\t\t{\n\t\t\t\t\tlet [, fileCounter, code, fileSetting] = inputItem.name.match(newFilesRegExp);\n\t\t\t\t\tif (fileCounter && fileSetting)\n\t\t\t\t\t{\n\t\t\t\t\t\tvalues[fileCounter] = values[fileCounter] || {};\n\t\t\t\t\t\tvalues[fileCounter][fileSetting] = inputItem.value;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tvalues[inputItem.name] = inputItem.value;\n\t\t\t\t}\n\t\t\t}\n\t\t\tsubmitData.FIELDS[productId] = submitData.FIELDS[productId] || {};\n\t\t\tif (Object.keys(values).length > 0)\n\t\t\t{\n\t\t\t\tsubmitData.FIELDS[productId]['MORE_PHOTO'] = values;\n\t\t\t}\n\t\t}\n\n\t\tconst productNameInput = wrapper.querySelector('input[name=\"NAME\"]');\n\t\tif (productNameInput)\n\t\t{\n\t\t\tsubmitData.FIELDS[productId]['NAME'] = productNameInput.value;\n\t\t}\n\t}\n\n\tonCancelEdit()\n\t{\n\t\tthis.getSelector().setMode(BX.Catalog.ProductSelector.MODE_VIEW);\n\t\tthis.getSelector().clearLayout();\n\t\tthis.getSelector().layout();\n\n\t\tconst grid = BX.Main.gridManager.getInstanceById(this.getSelector().getConfig('GRID_ID'));\n\t\tif (!grid)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst row = grid.getRows().getById(this.selector.getConfig('ROW_ID'));\n\t\tif (!row)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst cell = row.getCellById(this.columnName);\n\t\tif (cell)\n\t\t{\n\t\t\tDom.removeClass(row.getContentContainer(cell), ProductField.EDIT_CLASS);\n\t\t}\n\t}\n\n\tonSelectEdit()\n\t{\n\t\tif (!this.getSelector().getConfig('GRID_ID', null))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst grid = BX.Main.gridManager.getInstanceById(this.getSelector().getConfig('GRID_ID'));\n\t\tif (!grid)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst row = grid.getRows().getById(this.selector.getConfig('ROW_ID'));\n\t\tif (row && row.isEdit())\n\t\t{\n\t\t\tthis.getSelector().setMode(BX.Catalog.ProductSelector.MODE_EDIT);\n\t\t\tthis.getSelector().clearLayout();\n\t\t\tthis.getSelector().layout();\n\n\t\t\tconst cell = row.getCellById(this.columnName);\n\t\t\tif (cell)\n\t\t\t{\n\t\t\t\tDom.addClass(row.getContentContainer(cell), ProductField.EDIT_CLASS);\n\t\t\t}\n\t\t}\n\t}\n}\n\nReflection.namespace('BX.Catalog.Grid').ProductField = ProductField;\n"],"names":["instances","Map","ProductField","id","get","settings","onSelectEdit","bind","onCancelEdit","onBeforeGridRequest","unsubscribeEvents","onSkuLoaded","onGridUpdate","selector","ProductSelector","columnName","componentName","signedParameters","rowIdMask","subscribeEvents","set","EventEmitter","incrementMaxListeners","subscribe","onSelectEditHandler","onCancelEditHandler","onBeforeGridRequestHandler","onGridUpdateHandler","onSkuLoadedHandler","subscribeOnce","onUnsubscribeEventsHandler","unsubscribe","event","currentRowElement","document","getElementById","data","closest","querySelectorAll","style","height","inlineElementList","length","maxColumnsHeight","Math","max","map","cell","parseInt","Dom","setTimeout","forEach","inlineElements","wrapper","getSelector","getWrapper","getData","gridData","submitData","BX","prop","FIELDS","productId","getModel","getProductId","replace","imageInputContainer","querySelector","inputs","values","newFilesRegExp","RegExp","inputItem","test","name","match","fileCounter","code","fileSetting","value","Object","keys","productNameInput","setMode","Catalog","MODE_VIEW","clearLayout","layout","grid","Main","gridManager","getInstanceById","getConfig","row","getRows","getById","getCellById","removeClass","getContentContainer","EDIT_CLASS","isEdit","MODE_EDIT","addClass","Reflection","namespace"],"mappings":";;;;;;;AAAA,CAKA,IAAMA,SAAS,GAAG,IAAIC,GAAG,EAAE;CAAC,IAEtBC,YAAY;GAAA;KAAA;KAAA,wBAaFC,EAAU,EACzB;OACC,OAAOH,SAAS,CAACI,GAAG,CAACD,EAAE,CAAC,IAAI,IAAI;;;GAGjC,sBAAYA,EAAE,EACd;KAAA,IADgBE,QAAQ,uEAAG,EAAE;KAAA;KAAA,yDAZP,IAAI,CAACC,YAAY,CAACC,IAAI,CAAC,IAAI,CAAC;KAAA,yDAC5B,IAAI,CAACC,YAAY,CAACD,IAAI,CAAC,IAAI,CAAC;KAAA,gEACrB,IAAI,CAACE,mBAAmB,CAACF,IAAI,CAAC,IAAI,CAAC;KAAA,gEACnC,IAAI,CAACG,iBAAiB,CAACH,IAAI,CAAC,IAAI,CAAC;KAAA,wDACzC,IAAI,CAACI,WAAW,CAACJ,IAAI,CAAC,IAAI,CAAC;KAAA,yDAC1B,IAAI,CAACK,YAAY,CAACL,IAAI,CAAC,IAAI,CAAC;KASjD,IAAI,CAACM,QAAQ,GAAG,IAAIC,uCAAe,CAACX,EAAE,EAAEE,QAAQ,CAAC;KACjD,IAAI,CAACU,UAAU,GAAGV,QAAQ,CAACU,UAAU,IAAI,iBAAiB;KAC1D,IAAI,CAACC,aAAa,GAAGX,QAAQ,CAACW,aAAa,IAAI,EAAE;KACjD,IAAI,CAACC,gBAAgB,GAAGZ,QAAQ,CAACY,gBAAgB,IAAI,EAAE;KACvD,IAAI,CAACC,SAAS,GAAGb,QAAQ,CAACa,SAAS,IAAI,MAAM;KAE7C,IAAI,CAACC,eAAe,EAAE;KAEtBnB,SAAS,CAACoB,GAAG,CAACjB,EAAE,EAAE,IAAI,CAAC;;GACvB;KAAA;KAAA,kCAGD;OACCkB,6BAAY,CAACC,qBAAqB,CAAC,uBAAuB,EAAE,CAAC,CAAC;OAC9DD,6BAAY,CAACC,qBAAqB,CAAC,oBAAoB,EAAE,CAAC,CAAC;OAC3DD,6BAAY,CAACC,qBAAqB,CAAC,qBAAqB,EAAE,CAAC,CAAC;OAC5DD,6BAAY,CAACC,qBAAqB,CAAC,eAAe,EAAE,CAAC,CAAC;OAEtDD,6BAAY,CAACE,SAAS,CAAC,uBAAuB,EAAE,IAAI,CAACC,mBAAmB,CAAC;OACzEH,6BAAY,CAACE,SAAS,CAAC,oBAAoB,EAAE,IAAI,CAACE,mBAAmB,CAAC;OACtEJ,6BAAY,CAACE,SAAS,CAAC,qBAAqB,EAAE,IAAI,CAACG,0BAA0B,CAAC;OAC9EL,6BAAY,CAACE,SAAS,CAAC,eAAe,EAAE,IAAI,CAACI,mBAAmB,CAAC;OACjEN,6BAAY,CAACE,SAAS,CAAC,iCAAiC,EAAE,IAAI,CAACK,kBAAkB,CAAC;OAClFP,6BAAY,CAACQ,aAAa,CAAC,IAAI,CAAChB,QAAQ,EAAE,gBAAgB,EAAE,IAAI,CAACiB,0BAA0B,CAAC;;;KAC5F;KAAA,oCAGD;OACCT,6BAAY,CAACU,WAAW,CAAC,uBAAuB,EAAE,IAAI,CAACP,mBAAmB,CAAC;OAC3EH,6BAAY,CAACU,WAAW,CAAC,oBAAoB,EAAE,IAAI,CAACN,mBAAmB,CAAC;OACxEJ,6BAAY,CAACU,WAAW,CAAC,qBAAqB,EAAE,IAAI,CAACL,0BAA0B,CAAC;OAChFL,6BAAY,CAACU,WAAW,CAAC,eAAe,EAAE,IAAI,CAACD,0BAA0B,CAAC;OAC1ET,6BAAY,CAACU,WAAW,CAAC,iCAAiC,EAAE,IAAI,CAACH,kBAAkB,CAAC;OACpF,IAAI,CAACf,QAAQ,CAACH,iBAAiB,EAAE;;;KACjC;KAAA,4BAEWsB,KAAK,EACjB;OACC,IAAMC,iBAAiB,GAAGC,QAAQ,CAACC,cAAc,CAACH,KAAK,CAACI,IAAI,CAACjC,EAAE,CAAC,CAACkC,OAAO,CAAC,mCAAmC,CAAC;OAE7G,IACC,CAACJ,iBAAiB,IACf,CAACA,iBAAiB,CAACK,gBAAgB,CAAC,yBAAyB,CAAC,IAC9DL,iBAAiB,CAACM,KAAK,CAACC,MAAM,EAElC;SACC;;OAGD,IAAMC,iBAAiB,kCAAOR,iBAAiB,CAACK,gBAAgB,CAAC,iBAAiB,CAAC,CAAC;OAEpF,IAAIG,iBAAiB,CAACC,MAAM,KAAK,CAAC,EAClC;SACC;;OAGD,IAAMC,gBAAgB,GAAGC,IAAI,CAACC,GAAG,OAARD,IAAI,iCAASH,iBAAiB,CAACK,GAAG,CAAC,UAACC,IAAI;SAAA,OAAKC,QAAQ,CAACC,aAAG,CAACV,KAAK,CAACQ,IAAI,EAAE,QAAQ,CAAC,EAAE,EAAE,CAAC;SAAC,EAAE;OAEhH,IAAI,CAACJ,gBAAgB,EACrB;SACC;;OAGDM,aAAG,CAACV,KAAK,CAACN,iBAAiB,EAAE,QAAQ,YAAKU,gBAAgB,QAAK;;;KAC/D;KAAA,+BAGD;OACCO,UAAU,CAAC,YAAM;SAChBhB,QAAQ,CAACI,gBAAgB,CAAC,mCAAmC,CAAC,CAACa,OAAO,CAAC,UAAAlB,iBAAiB,EAAI;WAC3F,IAAIA,iBAAiB,CAACM,KAAK,CAACC,MAAM,EAClC;aACC;;WAGD,IAAMY,cAAc,kCAAOnB,iBAAiB,CAACK,gBAAgB,CAAC,iBAAiB,CAAC,CAAC;WAEjF,IAAIc,cAAc,CAACV,MAAM,KAAK,CAAC,EAC/B;aACC;;WAGD,IAAMC,gBAAgB,GAAGC,IAAI,CAACC,GAAG,OAARD,IAAI,iCAASQ,cAAc,CAACN,GAAG,CAAC,UAACC,IAAI;aAAA,OAAKC,QAAQ,CAACC,aAAG,CAACV,KAAK,CAACQ,IAAI,EAAE,QAAQ,CAAC,EAAE,EAAE,CAAC;aAAC,EAAE;WAE7G,IAAI,CAACJ,gBAAgB,EACrB;aACC;;WAGDM,aAAG,CAACV,KAAK,CAACN,iBAAiB,EAAE,QAAQ,YAAKU,gBAAgB,QAAK;UAC/D,CAAC;QACF,EAAE,CAAC,CAAC;OAEL,IAAI,CAACb,0BAA0B,EAAE;;;KACjC;KAAA,8BAGD;OACC,OAAO,IAAI,CAACjB,QAAQ;;;KACpB;KAAA,oCAEmBmB,KAAgB,EACpC;OACC,IAAMqB,OAAO,GAAG,IAAI,CAACC,WAAW,EAAE,CAACC,UAAU,EAAE;OAC/C,IAAI,CAACF,OAAO,EACZ;SACC;;OAGD,qBAAqBrB,KAAK,CAACwB,OAAO,EAAE;SAAA;SAA3BC,QAAQ;OACjB,IAAMC,UAAU,GAAGC,EAAE,CAACC,IAAI,CAACxD,GAAG,CAACqD,QAAQ,EAAE,MAAM,EAAE,EAAE,CAAC;OACpD,IAAI,CAACC,UAAU,CAACG,MAAM,EACtB;SACC;;OAGD,IAAIC,SAAS,GAAG,IAAI,CAACR,WAAW,EAAE,CAACS,QAAQ,EAAE,CAACC,YAAY,EAAE;OAC5DF,SAAS,GAAG,IAAI,CAAC5C,SAAS,CAAC+C,OAAO,CAAC,MAAM,EAAEH,SAAS,CAAC;OAErDJ,UAAU,CAACG,MAAM,CAACC,SAAS,CAAC,GAAGJ,UAAU,CAACG,MAAM,CAACC,SAAS,CAAC,IAAI,EAAE;OAEjE,IAAMI,mBAAmB,GAAGb,OAAO,CAACc,aAAa,CAAC,2BAA2B,CAAC;OAC9E,IAAID,mBAAmB,EACvB;SACC,IAAME,MAAM,GAAGF,mBAAmB,CAAC5B,gBAAgB,CAAC,OAAO,CAAC;SAC5D,IAAM+B,MAAM,GAAG,EAAE;SACjB,IAAMC,cAAc,GAAG,IAAIC,MAAM,CAAC,0CAA0C,CAAC;SAAC,2CACxDH,MAAM;WAAA;SAAA;WAA5B,oDACA;aAAA,IADSI,SAAS;aAEjB,IAAIF,cAAc,CAACG,IAAI,CAACD,SAAS,CAACE,IAAI,CAAC,EACvC;eACC,4BAAyCF,SAAS,CAACE,IAAI,CAACC,KAAK,CAACL,cAAc,CAAC;iBAAA;iBAAtEM,WAAW;iBAAEC,IAAI;iBAAEC,WAAW;eACrC,IAAIF,WAAW,IAAIE,WAAW,EAC9B;iBACCT,MAAM,CAACO,WAAW,CAAC,GAAGP,MAAM,CAACO,WAAW,CAAC,IAAI,EAAE;iBAC/CP,MAAM,CAACO,WAAW,CAAC,CAACE,WAAW,CAAC,GAAGN,SAAS,CAACO,KAAK;;cAEnD,MAED;eACCV,MAAM,CAACG,SAAS,CAACE,IAAI,CAAC,GAAGF,SAAS,CAACO,KAAK;;;;WAEzC;;WAAA;;SACDrB,UAAU,CAACG,MAAM,CAACC,SAAS,CAAC,GAAGJ,UAAU,CAACG,MAAM,CAACC,SAAS,CAAC,IAAI,EAAE;SACjE,IAAIkB,MAAM,CAACC,IAAI,CAACZ,MAAM,CAAC,CAAC3B,MAAM,GAAG,CAAC,EAClC;WACCgB,UAAU,CAACG,MAAM,CAACC,SAAS,CAAC,CAAC,YAAY,CAAC,GAAGO,MAAM;;;OAIrD,IAAMa,gBAAgB,GAAG7B,OAAO,CAACc,aAAa,CAAC,oBAAoB,CAAC;OACpE,IAAIe,gBAAgB,EACpB;SACCxB,UAAU,CAACG,MAAM,CAACC,SAAS,CAAC,CAAC,MAAM,CAAC,GAAGoB,gBAAgB,CAACH,KAAK;;;;KAE9D;KAAA,+BAGD;OACC,IAAI,CAACzB,WAAW,EAAE,CAAC6B,OAAO,CAACxB,EAAE,CAACyB,OAAO,CAACtE,eAAe,CAACuE,SAAS,CAAC;OAChE,IAAI,CAAC/B,WAAW,EAAE,CAACgC,WAAW,EAAE;OAChC,IAAI,CAAChC,WAAW,EAAE,CAACiC,MAAM,EAAE;OAE3B,IAAMC,IAAI,GAAG7B,EAAE,CAAC8B,IAAI,CAACC,WAAW,CAACC,eAAe,CAAC,IAAI,CAACrC,WAAW,EAAE,CAACsC,SAAS,CAAC,SAAS,CAAC,CAAC;OACzF,IAAI,CAACJ,IAAI,EACT;SACC;;OAGD,IAAMK,GAAG,GAAGL,IAAI,CAACM,OAAO,EAAE,CAACC,OAAO,CAAC,IAAI,CAAClF,QAAQ,CAAC+E,SAAS,CAAC,QAAQ,CAAC,CAAC;OACrE,IAAI,CAACC,GAAG,EACR;SACC;;OAGD,IAAM9C,IAAI,GAAG8C,GAAG,CAACG,WAAW,CAAC,IAAI,CAACjF,UAAU,CAAC;OAC7C,IAAIgC,IAAI,EACR;SACCE,aAAG,CAACgD,WAAW,CAACJ,GAAG,CAACK,mBAAmB,CAACnD,IAAI,CAAC,EAAE7C,YAAY,CAACiG,UAAU,CAAC;;;;KAExE;KAAA,+BAGD;OACC,IAAI,CAAC,IAAI,CAAC7C,WAAW,EAAE,CAACsC,SAAS,CAAC,SAAS,EAAE,IAAI,CAAC,EAClD;SACC;;OAGD,IAAMJ,IAAI,GAAG7B,EAAE,CAAC8B,IAAI,CAACC,WAAW,CAACC,eAAe,CAAC,IAAI,CAACrC,WAAW,EAAE,CAACsC,SAAS,CAAC,SAAS,CAAC,CAAC;OACzF,IAAI,CAACJ,IAAI,EACT;SACC;;OAGD,IAAMK,GAAG,GAAGL,IAAI,CAACM,OAAO,EAAE,CAACC,OAAO,CAAC,IAAI,CAAClF,QAAQ,CAAC+E,SAAS,CAAC,QAAQ,CAAC,CAAC;OACrE,IAAIC,GAAG,IAAIA,GAAG,CAACO,MAAM,EAAE,EACvB;SACC,IAAI,CAAC9C,WAAW,EAAE,CAAC6B,OAAO,CAACxB,EAAE,CAACyB,OAAO,CAACtE,eAAe,CAACuF,SAAS,CAAC;SAChE,IAAI,CAAC/C,WAAW,EAAE,CAACgC,WAAW,EAAE;SAChC,IAAI,CAAChC,WAAW,EAAE,CAACiC,MAAM,EAAE;SAE3B,IAAMxC,IAAI,GAAG8C,GAAG,CAACG,WAAW,CAAC,IAAI,CAACjF,UAAU,CAAC;SAC7C,IAAIgC,IAAI,EACR;WACCE,aAAG,CAACqD,QAAQ,CAACT,GAAG,CAACK,mBAAmB,CAACnD,IAAI,CAAC,EAAE7C,YAAY,CAACiG,UAAU,CAAC;;;;;GAGtE;CAAA;CAAA,4BApOIjG,YAAY,gBAEG,iCAAiC;CAAA,4BAFhDA,YAAY,kBAGK,SAAS;CAAA,4BAH1BA,YAAY,cAIC,KAAK;AAmOxBqG,qBAAU,CAACC,SAAS,CAAC,iBAAiB,CAAC,CAACtG,YAAY,GAAGA,YAAY;;;;"}