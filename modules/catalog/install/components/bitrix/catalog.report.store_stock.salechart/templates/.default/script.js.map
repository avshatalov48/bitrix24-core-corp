{"version":3,"file":"script.js","sources":["script.es6.js"],"sourcesContent":["// @flow\n\nimport \"currency\";\nimport {Loc, Reflection, Tag} from \"main.core\";\nimport {StoreStockChart} from \"catalog.store-chart\";\n\ntype TProps = {\n\tchartProps: Object,\n\twidgetId: string,\n\tboardId: string,\n\tdetailSliderUrl: string | null,\n};\n\nclass StoreStockChartManager\n{\n\t#storeStockChart: BX.Catalog.StoreStockChart;\n\tdetailSliderUrl: string | null;\n\n\t#boardId: string;\n\t#board: Object;\n\t#widgetId: string;\n\t#widget: Object;\n\n\tconstructor(props: TProps)\n\t{\n\t\tif (props.chartProps.detailSliderUrl)\n\t\t{\n\t\t\tthis.detailSliderUrl = props.chartProps.detailSliderUrl;\n\t\t\tprops.chartProps.onChartClick = this.openDetailSlider.bind(this);\n\t\t}\n\t\tthis.#widgetId = props.widgetId;\n\t\tthis.#boardId = props.boardId;\n\t\tthis.#board = BX.VisualConstructor.BoardRepository.getBoard(this.#boardId);\n\t\tthis.#widget = this.#board.dashboard.getWidget(this.#widgetId);\n\t\tthis.#storeStockChart = new BX.Catalog.StoreStockChart(props.chartProps);\n\t\tthis.updateWidgetTitle();\n\t}\n\n\topenDetailSlider()\n\t{\n\t\tBX.SidePanel.Instance.open(this.detailSliderUrl, {\n\t\t\tcacheable: false,\n\t\t\tallowChangeTitle: false,\n\t\t\tallowChangeHistory: false,\n\t\t});\n\t}\n\n\tupdateWidgetTitle()\n\t{\n\n\t\tBX.clean(this.#widget.layout.titleContainer);\n\n\t\tthis.#widget.layout.titleContainer.appendChild(Tag.render`\n\t\t<div class=\"chart-header\">\n\t\t\t<div>${this.#widget.config.title}</div>\n\t\t\t${this.#storeStockChart.getHelpdeskButton('15503856')}\n\t\t</div>\n\t\t`);\n\n\t\tthis.#widget.layout.titleContainer.style.width = '100%';\n\t}\n}\n\nReflection.namespace('BX.Catalog.Report').StoreStockChartManager = StoreStockChartManager;"],"names":["StoreStockChartManager","props","chartProps","detailSliderUrl","onChartClick","openDetailSlider","bind","widgetId","boardId","BX","VisualConstructor","BoardRepository","getBoard","dashboard","getWidget","Catalog","StoreStockChart","updateWidgetTitle","SidePanel","Instance","open","cacheable","allowChangeTitle","allowChangeHistory","clean","layout","titleContainer","appendChild","Tag","render","config","title","getHelpdeskButton","style","width","Reflection","namespace"],"mappings":";;;;;;;;;;;;;;;;;;;KAaMA;GAUL,gCAAYC,KAAZ,EACA;KAAA;;KAAA;OAAA;OAAA;;;KAAA;OAAA;OAAA;;;KAAA;OAAA;OAAA;;;KAAA;OAAA;OAAA;;;KAAA;OAAA;OAAA;;;KACC,IAAIA,KAAK,CAACC,UAAN,CAAiBC,eAArB,EACA;OACC,KAAKA,eAAL,GAAuBF,KAAK,CAACC,UAAN,CAAiBC,eAAxC;OACAF,KAAK,CAACC,UAAN,CAAiBE,YAAjB,GAAgC,KAAKC,gBAAL,CAAsBC,IAAtB,CAA2B,IAA3B,CAAhC;;;KAED,mDAAiBL,KAAK,CAACM,QAAvB;KACA,kDAAgBN,KAAK,CAACO,OAAtB;KACA,gDAAcC,EAAE,CAACC,iBAAH,CAAqBC,eAArB,CAAqCC,QAArC,mCAA8C,IAA9C,YAAd;KACA,iDAAe,gDAAYC,SAAZ,CAAsBC,SAAtB,mCAAgC,IAAhC,aAAf;KACA,0DAAwB,IAAIL,EAAE,CAACM,OAAH,CAAWC,eAAf,CAA+Bf,KAAK,CAACC,UAArC,CAAxB;KACA,KAAKe,iBAAL;;;;;wCAID;OACCR,EAAE,CAACS,SAAH,CAAaC,QAAb,CAAsBC,IAAtB,CAA2B,KAAKjB,eAAhC,EAAiD;SAChDkB,SAAS,EAAE,KADqC;SAEhDC,gBAAgB,EAAE,KAF8B;SAGhDC,kBAAkB,EAAE;QAHrB;;;;yCAQD;OAECd,EAAE,CAACe,KAAH,CAAS,iDAAaC,MAAb,CAAoBC,cAA7B;OAEA,iDAAaD,MAAb,CAAoBC,cAApB,CAAmCC,WAAnC,CAA+CC,aAAG,CAACC,MAAnD,yKAEQ,iDAAaC,MAAb,CAAoBC,KAF5B,EAGG,0DAAsBC,iBAAtB,CAAwC,UAAxC,CAHH;OAOA,iDAAaP,MAAb,CAAoBC,cAApB,CAAmCO,KAAnC,CAAyCC,KAAzC,GAAiD,MAAjD;;;;;;AAIFC,qBAAU,CAACC,SAAX,CAAqB,mBAArB,EAA0CpC,sBAA1C,GAAmEA,sBAAnE;;;;"}