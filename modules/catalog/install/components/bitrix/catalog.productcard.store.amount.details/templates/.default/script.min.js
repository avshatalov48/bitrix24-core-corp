(function(t,e,i,n){"use strict";function r(t,e){a(t,e);e.add(t)}function a(t,e){if(e.has(t)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function o(t,e,i){if(!e.has(t)){throw new TypeError("attempted to get private field on non-instance")}return i}var d=new WeakSet;var l=new WeakSet;var s=function(){function t(e){babelHelpers.classCallCheck(this,t);r(this,l);r(this,d);this.gridId=e.gridId;this.productId=e.productId;this.allowPurchasingPrice=e.allowPurchasingPrice;this.onFilterApplyHandler=this.onFilterApply.bind(this);i.EventEmitter.subscribe("BX.Main.Filter:apply",this.onFilterApplyHandler);if(!this.allowPurchasingPrice){o(this,l,u).call(this);i.EventEmitter.subscribe("Grid::updated",o(this,l,u).bind(this))}}babelHelpers.createClass(t,[{key:"getGridId",value:function t(){return this.gridId}},{key:"getProductId",value:function t(){return this.productId}},{key:"onFilterApply",value:function t(e){var i=this;var n=e.getCompatData(),r=babelHelpers.slicedToArray(n,1),a=r[0];if(a!==this.getGridId()){return}BX.ajax.runComponentAction("bitrix:catalog.productcard.store.amount.details","updateTotalData",{mode:"class",data:{productId:this.getProductId()}}).then((function(t){var e;var n=t===null||t===void 0?void 0:(e=t.data)===null||e===void 0?void 0:e.TOTAL_DATA;if(!n){return}var r=document.getElementById(i.getGridId()+"_total_quantity_available");if(r){r.innerHTML=n.QUANTITY_AVAILABLE}var a=document.getElementById(i.getGridId()+"_total_quantity_reserved");if(a){a.innerHTML=n.QUANTITY_RESERVED}var o=document.getElementById(i.getGridId()+"_total_quantity_common");if(o){o.innerHTML=n.QUANTITY_COMMON}var d=document.getElementById(i.getGridId()+"_total_price");if(d){d.innerHTML=n.PRICE}}))}}]);return t}();function c(){if(!e.Reflection.getClass("BX.Main.gridManager.getInstanceById")){throw Error("Cannot find grid")}return BX.Main.gridManager.getInstanceById(this.getGridId())}function u(){o(this,d,c).call(this).getContainer().querySelectorAll("purchasing-price").forEach((function(t){var i=new n.AccessDeniedInput({hint:e.Loc.getMessage("CATALOG_PRODUCTCARD_STORE_AMOUNT_DETAILS_PURCHASING_PRICE_HINT"),isReadOnly:true});i.renderTo(t)}))}e.Reflection.namespace("BX.Catalog").StoreAmountDetails=s})(this.window=this.window||{},BX,BX.Event,BX.Catalog);
//# sourceMappingURL=script.map.js