{"version":3,"file":"script.js","sources":["script.es6.js"],"sourcesContent":["// @flow\n\nimport { Loc, Reflection, Tag, Uri } from 'main.core';\n\ntype Options = {\n\tproductListSliderUrl: string,\n\tproductListSliderFilter: Object,\n\tgridId: string,\n};\n\nclass StoreProfitGrid\n{\n\t#productListSliderUrl: string;\n\t#productListSliderFilter: Object;\n\n\tconstructor(options: Options)\n\t{\n\t\tthis.#productListSliderUrl = options.productListSliderUrl;\n\t\tthis.#productListSliderFilter = options.productListSliderFilter;\n\n\t\tthis.updateWidgetTitleInterval = setInterval(this.updateWidgetTitle.bind(this), 50);\n\t}\n\n\topenStoreProductListGrid(storeId: ?number)\n\t{\n\t\tconst url = Uri.addParam(this.#productListSliderUrl, { storeId });\n\t\tBX.SidePanel.Instance.open(\n\t\t\turl,\n\t\t\t{\n\t\t\t\trequestMethod: 'post',\n\t\t\t\trequestParams: {\n\t\t\t\t\tfilter: this.#productListSliderFilter,\n\t\t\t\t\topenedFromReport: true,\n\t\t\t\t},\n\t\t\t\tcacheable: false,\n\t\t\t},\n\t\t);\n\t}\n\n\tupdateWidgetTitle()\n\t{\n\t\tconst dashboardElement = document.querySelector('.amcharts-main-div')?.parentElement?.parentElement?.parentElement?.parentElement;\n\t\tif (!dashboardElement)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst titleElement = dashboardElement.querySelector('.report-visualconstructor-dashboard-widget-head-wrapper > .report-visualconstructor-dashboard-widget-title-container');\n\t\tdocument.querySelector('.report-visualconstructor-dashboard-widget-head-wrapper').appendChild(Tag.render`\n\t\t\t<div class=\"chart-header\">\n\t\t\t\t${titleElement}\n\t\t\t\t<div onclick='top.BX.Helper.show(\"redirect=detail&code=18502626\")' class=\"how-it-works-guide-link\">${Loc.getMessage('STORE_CHART_HINT_TITLE')}</div>\n\t\t\t</div>\n\t\t`);\n\t\tclearInterval(this.updateWidgetTitleInterval);\n\t}\n}\n\nReflection.namespace('BX.Catalog.Report.StoreProfit').StoreGrid = StoreProfitGrid;\n"],"names":["StoreProfitGrid","options","productListSliderUrl","productListSliderFilter","updateWidgetTitleInterval","setInterval","updateWidgetTitle","bind","storeId","url","Uri","addParam","BX","SidePanel","Instance","open","requestMethod","requestParams","filter","openedFromReport","cacheable","dashboardElement","document","querySelector","parentElement","titleElement","appendChild","Tag","render","Loc","getMessage","clearInterval","Reflection","namespace","StoreGrid"],"mappings":";;;;;;;AAEA,CAAsD;CAAA;CAAA,IAQhDA,eAAe;GAKpB,yBAAYC,OAAgB,EAC5B;KAAA;KAAA;OAAA;OAAA;;KAAA;OAAA;OAAA;;KACC,sCAAI,yBAAyBA,OAAO,CAACC,oBAAoB;KACzD,sCAAI,4BAA4BD,OAAO,CAACE,uBAAuB;KAE/D,IAAI,CAACC,yBAAyB,GAAGC,WAAW,CAAC,IAAI,CAACC,iBAAiB,CAACC,IAAI,CAAC,IAAI,CAAC,EAAE,EAAE,CAAC;;GACnF;KAAA;KAAA,yCAEwBC,OAAgB,EACzC;OACC,IAAMC,GAAG,GAAGC,aAAG,CAACC,QAAQ,mCAAC,IAAI,0BAAwB;SAAEH,OAAO,EAAPA;QAAS,CAAC;OACjEI,EAAE,CAACC,SAAS,CAACC,QAAQ,CAACC,IAAI,CACzBN,GAAG,EACH;SACCO,aAAa,EAAE,MAAM;SACrBC,aAAa,EAAE;WACdC,MAAM,oCAAE,IAAI,2BAAyB;WACrCC,gBAAgB,EAAE;UAClB;SACDC,SAAS,EAAE;QACX,CACD;;;KACD;KAAA,oCAGD;OAAA;OACC,IAAMC,gBAAgB,4BAAGC,QAAQ,CAACC,aAAa,CAAC,oBAAoB,CAAC,oFAA5C,sBAA8CC,aAAa,qFAA3D,uBAA6DA,aAAa,qFAA1E,uBAA4EA,aAAa,2DAAzF,uBAA2FA,aAAa;OACjI,IAAI,CAACH,gBAAgB,EACrB;SACC;;OAGD,IAAMI,YAAY,GAAGJ,gBAAgB,CAACE,aAAa,CAAC,sHAAsH,CAAC;OAC3KD,QAAQ,CAACC,aAAa,CAAC,yDAAyD,CAAC,CAACG,WAAW,CAACC,aAAG,CAACC,MAAM,mRAEpGH,YAAY,EACuFI,aAAG,CAACC,UAAU,CAAC,wBAAwB,CAAC,EAE7I;OACFC,aAAa,CAAC,IAAI,CAAC3B,yBAAyB,CAAC;;;GAC7C;CAAA;AAGF4B,qBAAU,CAACC,SAAS,CAAC,+BAA+B,CAAC,CAACC,SAAS,GAAGlC,eAAe;;;;"}