(function(){BX.namespace("BX.ImConnector");BX.ImConnector.Notifications={showTermsOfService:function(){return new Promise(function(n){BX.ajax.runComponentAction("bitrix:imconnector.notifications","getTermsOfService",{mode:"class"}).then(function(t){var o=new BX.PopupWindow({titleBar:t.data.title,content:t.data.html,closeIcon:true,width:600,height:700,buttons:[new BX.PopupWindowButton({text:t.data.okButton,className:"popup-window-button-accept",events:{click:function(){o.close();n()}}}),new BX.PopupWindowButtonLink({text:BX.message("JS_CORE_WINDOW_CANCEL"),className:"popup-window-button-link-cancel",events:{click:function(){o.close()}}})]});o.show()})})},onConnectButtonClick:function(n){this.showTermsOfService().then(function(){return BX.ajax.runComponentAction("bitrix:imconnector.notifications","saveTermsOfServiceAgreement",{mode:"class"})}).then(function(){n.form.submit()})},onSaveSettingsButtonClick:function(n){BX.addClass(n,"ui-bnt-wait");BX.ajax.runComponentAction("bitrix:imconnector.notifications","saveSettings",{mode:"class",data:new FormData(BX("settings-form"))}).then(function(t){BX.removeClass(n,"ui-bnt-wait")}).catch(function(t){BX.removeClass(n,"ui-bnt-wait");console.error(t.errors)})}}})();
//# sourceMappingURL=script.map.js