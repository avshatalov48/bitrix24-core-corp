AmCharts.AmSerialChart=AmCharts.Class({inherits:AmCharts.AmRectangularChart,construct:function(){AmCharts.AmSerialChart.base.construct.call(this);this.createEvents("changed");this.columnSpacing=5;this.columnSpacing3D=0;this.columnWidth=.8;this.updateScrollbar=!0;var t=new AmCharts.CategoryAxis;t.chart=this;this.categoryAxis=t;this.chartType="serial";this.zoomOutOnDataUpdate=!0;this.skipZoom=!1;this.minSelectedTime=0},initChart:function(){AmCharts.AmSerialChart.base.initChart.call(this);this.updateCategoryAxis(this.categoryAxis,this.rotate,"categoryAxis");this.dataChanged&&(this.updateData(),this.dataChanged=!1,this.dispatchDataUpdated=!0);var t=this.chartCursor;t&&t.updateData();var t=this.countColumns(),i=this.graphs,e;for(e=0;e<i.length;e++)i[e].columnCount=t;this.updateScrollbar=!0;this.drawChart();this.autoMargins&&!this.marginsUpdated&&(this.marginsUpdated=!0,this.measureMargins())},validateData:function(t){this.marginsUpdated=!1;this.zoomOutOnDataUpdate&&!t&&(this.endTime=this.end=this.startTime=this.start=NaN);AmCharts.AmSerialChart.base.validateData.call(this)},drawChart:function(){AmCharts.AmSerialChart.base.drawChart.call(this);var t=this.chartData;if(AmCharts.ifArray(t)){var i=this.chartScrollbar;i&&i.draw();if(0<this.realWidth&&0<this.realHeight){var t=t.length-1,e,i=this.categoryAxis;if(i.parseDates&&!i.equalSpacing){if(i=this.startTime,e=this.endTime,isNaN(i)||isNaN(e))i=this.firstTime,e=this.lastTime}else if(i=this.start,e=this.end,isNaN(i)||isNaN(e))i=0,e=t;this.endTime=this.startTime=this.end=this.start=void 0;this.zoom(i,e)}}else this.cleanChart();this.dispDUpd();this.chartCreated=!0},cleanChart:function(){AmCharts.callMethod("destroy",[this.valueAxes,this.graphs,this.categoryAxis,this.chartScrollbar,this.chartCursor])},updateCategoryAxis:function(t,i,e){t.id=e;t.rotate=i;t.axisRenderer=AmCharts.RecAxis;t.guideFillRenderer=AmCharts.RecFill;t.axisItemRenderer=AmCharts.RecItem;t.setOrientation(!this.rotate);t.x=this.marginLeftReal;t.y=this.marginTopReal;t.dx=this.dx;t.dy=this.dy;t.width=this.plotAreaWidth-1;t.height=this.plotAreaHeight-1;t.viW=this.plotAreaWidth-1;t.viH=this.plotAreaHeight-1;t.viX=this.marginLeftReal;t.viY=this.marginTopReal;t.marginsChanged=!0},updateValueAxes:function(){AmCharts.AmSerialChart.base.updateValueAxes.call(this);var t=this.valueAxes,i;for(i=0;i<t.length;i++){var e=t[i],s=this.rotate;e.rotate=s;e.setOrientation(s);s=this.categoryAxis;if(!s.startOnAxis||s.parseDates)e.expandMinMax=!0}},updateData:function(){this.parseData();var t=this.graphs,i,e=this.chartData;for(i=0;i<t.length;i++)t[i].data=e;0<e.length&&(this.firstTime=this.getStartTime(e[0].time),this.lastTime=this.getEndTime(e[e.length-1].time))},getStartTime:function(t){var i=this.categoryAxis;return AmCharts.resetDateToMin(new Date(t),i.minPeriod,1,i.firstDayOfWeek).getTime()},getEndTime:function(t){var i=AmCharts.extractPeriod(this.categoryAxis.minPeriod);return AmCharts.changeDate(new Date(t),i.period,i.count,!0).getTime()-1},updateMargins:function(){AmCharts.AmSerialChart.base.updateMargins.call(this);var t=this.chartScrollbar;t&&(this.getScrollbarPosition(t,this.rotate,this.categoryAxis.position),this.adjustMargins(t,this.rotate))},updateScrollbars:function(){this.updateChartScrollbar(this.chartScrollbar,this.rotate)},zoom:function(t,i){var e=this.categoryAxis;e.parseDates&&!e.equalSpacing?this.timeZoom(t,i):this.indexZoom(t,i)},timeZoom:function(t,i){var e=this.maxSelectedTime;isNaN(e)||(i!=this.endTime&&i-t>e&&(t=i-e,this.updateScrollbar=!0),t!=this.startTime&&i-t>e&&(i=t+e,this.updateScrollbar=!0));var s=this.minSelectedTime;if(0<s&&i-t<s){var a=Math.round(t+(i-t)/2),s=Math.round(s/2);t=a-s;i=a+s}var h=this.chartData,a=this.categoryAxis;if(AmCharts.ifArray(h)&&(t!=this.startTime||i!=this.endTime)){var r=a.minDuration(),s=this.firstTime,o=this.lastTime;t||(t=s,isNaN(e)||(t=o-e));i||(i=o);t>o&&(t=o);i<s&&(i=s);t<s&&(t=s);i>o&&(i=o);i<t&&(i=t+r);i-t<r/5&&(i<o?i=t+r/5:t=i-r/5);this.startTime=t;this.endTime=i;e=h.length-1;r=this.getClosestIndex(h,"time",t,!0,0,e);h=this.getClosestIndex(h,"time",i,!1,r,e);a.timeZoom(t,i);a.zoom(r,h);this.start=AmCharts.fitToBounds(r,0,e);this.end=AmCharts.fitToBounds(h,0,e);this.zoomAxesAndGraphs();this.zoomScrollbar();t!=s||i!=o?this.showZB(!0):this.showZB(!1);this.updateColumnsDepth();this.dispatchTimeZoomEvent()}},indexZoom:function(t,i){var e=this.maxSelectedSeries;isNaN(e)||(i!=this.end&&i-t>e&&(t=i-e,this.updateScrollbar=!0),t!=this.start&&i-t>e&&(i=t+e,this.updateScrollbar=!0));if(t!=this.start||i!=this.end){var s=this.chartData.length-1;isNaN(t)&&(t=0,isNaN(e)||(t=s-e));isNaN(i)&&(i=s);i<t&&(i=t);i>s&&(i=s);t>s&&(t=s-1);0>t&&(t=0);this.start=t;this.end=i;this.categoryAxis.zoom(t,i);this.zoomAxesAndGraphs();this.zoomScrollbar();0!==t||i!=this.chartData.length-1?this.showZB(!0):this.showZB(!1);this.updateColumnsDepth();this.dispatchIndexZoomEvent()}},updateGraphs:function(){AmCharts.AmSerialChart.base.updateGraphs.call(this);var t=this.graphs,i;for(i=0;i<t.length;i++){var e=t[i];e.columnWidthReal=this.columnWidth;e.categoryAxis=this.categoryAxis}},updateColumnsDepth:function(){var t,i=this.graphs,e;AmCharts.remove(this.columnsSet);this.columnsArray=[];for(t=0;t<i.length;t++){e=i[t];var s=e.columnsArray;if(s){var a;for(a=0;a<s.length;a++)this.columnsArray.push(s[a])}}this.columnsArray.sort(this.compareDepth);if(0<this.columnsArray.length){i=this.container.set();this.columnSet.push(i);for(t=0;t<this.columnsArray.length;t++)i.push(this.columnsArray[t].column.set);e&&i.translate(e.x,e.y);this.columnsSet=i}},compareDepth:function(t,i){return t.depth>i.depth?1:-1},zoomScrollbar:function(){var t=this.chartScrollbar,i=this.categoryAxis;t&&this.updateScrollbar&&(i.parseDates&&!i.equalSpacing?t.timeZoom(this.startTime,this.endTime):t.zoom(this.start,this.end),this.updateScrollbar=!0)},updateTrendLines:function(){var t=this.trendLines,i;for(i=0;i<t.length;i++){var e=t[i];e.chart=this;e.valueAxis||(e.valueAxis=this.valueAxes[0]);e.categoryAxis=this.categoryAxis}},zoomAxesAndGraphs:function(){if(!this.scrollbarOnly){var t=this.valueAxes,i;for(i=0;i<t.length;i++)t[i].zoom(this.start,this.end);t=this.graphs;for(i=0;i<t.length;i++)t[i].zoom(this.start,this.end);this.zoomTrendLines();(i=this.chartCursor)&&i.zoom(this.start,this.end,this.startTime,this.endTime)}},countColumns:function(){var t=0,i=this.valueAxes.length,e=this.graphs.length,s,a,h=!1,r,o;for(o=0;o<i;o++){a=this.valueAxes[o];var n=a.stackType;if("100%"==n||"regular"==n)for(h=!1,r=0;r<e;r++)s=this.graphs[r],s.hidden||s.valueAxis!=a||"column"!=s.type||(!h&&s.stackable&&(t++,h=!0),!s.stackable&&s.clustered&&t++,s.columnIndex=t-1,s.clustered||(s.columnIndex=0));if("none"==n||"3d"==n)for(r=0;r<e;r++)s=this.graphs[r],!s.hidden&&s.valueAxis==a&&"column"==s.type&&s.clustered&&(s.columnIndex=t,t++);if("3d"==n){for(o=0;o<e;o++)s=this.graphs[o],s.depthCount=t;t=1}}return t},parseData:function(){AmCharts.AmSerialChart.base.parseData.call(this);this.parseSerialData()},getCategoryIndexByValue:function(t){var i=this.chartData,e,s;for(s=0;s<i.length;s++)i[s].category==t&&(e=s);return e},handleCursorChange:function(t){this.updateLegendValues(t.index)},handleCursorZoom:function(t){this.updateScrollbar=!0;this.zoom(t.start,t.end)},handleScrollbarZoom:function(t){this.updateScrollbar=!1;this.zoom(t.start,t.end)},dispatchTimeZoomEvent:function(){if(this.prevStartTime!=this.startTime||this.prevEndTime!=this.endTime){var t={type:"zoomed"};t.startDate=new Date(this.startTime);t.endDate=new Date(this.endTime);t.startIndex=this.start;t.endIndex=this.end;this.startIndex=this.start;this.endIndex=this.end;this.startDate=t.startDate;this.endDate=t.endDate;this.prevStartTime=this.startTime;this.prevEndTime=this.endTime;var i=this.categoryAxis,e=AmCharts.extractPeriod(i.minPeriod).period,i=i.dateFormatsObject[e];t.startValue=AmCharts.formatDate(t.startDate,i);t.endValue=AmCharts.formatDate(t.endDate,i);t.chart=this;t.target=this;this.fire(t.type,t)}},dispatchIndexZoomEvent:function(){if(this.prevStartIndex!=this.start||this.prevEndIndex!=this.end){this.startIndex=this.start;this.endIndex=this.end;var t=this.chartData;if(AmCharts.ifArray(t)&&!isNaN(this.start)&&!isNaN(this.end)){var i={chart:this,target:this,type:"zoomed"};i.startIndex=this.start;i.endIndex=this.end;i.startValue=t[this.start].category;i.endValue=t[this.end].category;this.categoryAxis.parseDates&&(this.startTime=t[this.start].time,this.endTime=t[this.end].time,i.startDate=new Date(this.startTime),i.endDate=new Date(this.endTime));this.prevStartIndex=this.start;this.prevEndIndex=this.end;this.fire(i.type,i)}}},updateLegendValues:function(t){var i=this.graphs,e;for(e=0;e<i.length;e++){var s=i[e];isNaN(t)?s.currentDataItem=void 0:s.currentDataItem=this.chartData[t].axes[s.valueAxis.id].graphs[s.id]}this.legend&&this.legend.updateValues()},getClosestIndex:function(t,i,e,s,a,h){0>a&&(a=0);h>t.length-1&&(h=t.length-1);var r=a+Math.round((h-a)/2),o=t[r][i];if(1>=h-a){if(s)return a;s=t[h][i];return Math.abs(t[a][i]-e)<Math.abs(s-e)?a:h}return e==o?r:e<o?this.getClosestIndex(t,i,e,s,a,r):this.getClosestIndex(t,i,e,s,r,h)},zoomToIndexes:function(t,i){this.updateScrollbar=!0;var e=this.chartData;if(e){var s=e.length;0<s&&(0>t&&(t=0),i>s-1&&(i=s-1),s=this.categoryAxis,s.parseDates&&!s.equalSpacing?this.zoom(e[t].time,this.getEndTime(e[i].time)):this.zoom(t,i))}},zoomToDates:function(t,i){this.updateScrollbar=!0;var e=this.chartData;if(this.categoryAxis.equalSpacing){var s=this.getClosestIndex(e,"time",t.getTime(),!0,0,e.length),e=this.getClosestIndex(e,"time",i.getTime(),!1,0,e.length);this.zoom(s,e)}else this.zoom(t.getTime(),i.getTime())},zoomToCategoryValues:function(t,i){this.updateScrollbar=!0;this.zoom(this.getCategoryIndexByValue(t),this.getCategoryIndexByValue(i))},formatPeriodString:function(t,i){if(i){var e=["value","open","low","high","close"],s="value open low high close average sum count".split(" "),a=i.valueAxis,h=this.chartData,r=i.numberFormatter;r||(r=this.numberFormatter);for(var o=0;o<e.length;o++){for(var n=e[o],d=0,l=0,m,c,u,g,p,f=0,A=0,C,x,D,v,T,y=this.start;y<=this.end;y++){var b=h[y];if(b&&(b=b.axes[a.id].graphs[i.id])){if(b.values){var N=b.values[n];if(!isNaN(N)){isNaN(m)&&(m=N);c=N;if(isNaN(u)||u>N)u=N;if(isNaN(g)||g<N)g=N;d+=N;l++;p=d/l}}if(b.percents&&(b=b.percents[n],!isNaN(b))){isNaN(C)&&(C=b);x=b;if(isNaN(D)||D>b)D=b;if(isNaN(v)||v<b)v=b;f+=b;A++;T=f/A}}}f={open:C,close:x,high:v,low:D,average:T,sum:f,count:A};t=AmCharts.formatValue(t,{open:m,close:c,high:g,low:u,average:p,sum:d,count:l},s,r,n+"\\.",this.usePrefixes,this.prefixesOfSmallNumbers,this.prefixesOfBigNumbers);t=AmCharts.formatValue(t,f,s,this.percentFormatter,"percents\\."+n+"\\.")}}return t},formatString:function(t,i){var e=i.graph;if(-1!=t.indexOf("[[category]]")){var s=i.serialDataItem.category;if(this.categoryAxis.parseDates){var a=this.balloonDateFormat,h=this.chartCursor;h&&(a=h.categoryBalloonDateFormat);-1!=t.indexOf("[[category]]")&&(a=AmCharts.formatDate(s,a),-1!=a.indexOf("fff")&&(a=AmCharts.formatMilliseconds(a,s)),s=a)}t=t.replace(/\[\[category\]\]/g,String(s))}e=e.numberFormatter;e||(e=this.numberFormatter);s=i.graph.valueAxis;(a=s.duration)&&!isNaN(i.values.value)&&(s=AmCharts.formatDuration(i.values.value,a,"",s.durationUnits,s.maxInterval,e),t=t.replace(RegExp("\\[\\[value\\]\\]","g"),s));s="value open low high close total".split(" ");a=this.percentFormatter;t=AmCharts.formatValue(t,i.percents,s,a,"percents\\.");t=AmCharts.formatValue(t,i.values,s,e,"",this.usePrefixes,this.prefixesOfSmallNumbers,this.prefixesOfBigNumbers);t=AmCharts.formatValue(t,i.values,["percents"],a);-1!=t.indexOf("[[")&&(t=AmCharts.formatDataContextValue(t,i.dataContext));return t=AmCharts.AmSerialChart.base.formatString.call(this,t,i)},addChartScrollbar:function(t){AmCharts.callMethod("destroy",[this.chartScrollbar]);t&&(t.chart=this,this.listenTo(t,"zoomed",this.handleScrollbarZoom));this.rotate?void 0===t.width&&(t.width=t.scrollbarHeight):void 0===t.height&&(t.height=t.scrollbarHeight);this.chartScrollbar=t},removeChartScrollbar:function(){AmCharts.callMethod("destroy",[this.chartScrollbar]);this.chartScrollbar=null},handleReleaseOutside:function(t){AmCharts.AmSerialChart.base.handleReleaseOutside.call(this,t);AmCharts.callMethod("handleReleaseOutside",[this.chartScrollbar])}});AmCharts.Cuboid=AmCharts.Class({construct:function(t,i,e,s,a,h,r,o,n,d,l,m,c,u){this.set=t.set();this.container=t;this.h=Math.round(e);this.w=Math.round(i);this.dx=s;this.dy=a;this.colors=h;this.alpha=r;this.bwidth=o;this.bcolor=n;this.balpha=d;this.colors=h;this.dashLength=u;c?0>i&&0===l&&(l=180):0>e&&270==l&&(l=90);this.gradientRotation=l;0===s&&0===a&&(this.cornerRadius=m);this.draw()},draw:function(){var t=this.set;t.clear();var i=this.container,e=this.w,s=this.h,a=this.dx,h=this.dy,r=this.colors,o=this.alpha,n=this.bwidth,d=this.bcolor,l=this.balpha,m=this.gradientRotation,c=this.cornerRadius,u=this.dashLength,g=r,p=r;"object"==typeof r&&(g=r[0],p=r[r.length-1]);var f,A,C,x,D,v,T,y,b;if(0<a||0<h)T=p,p=AmCharts.adjustLuminosity(g,-.2),p=AmCharts.adjustLuminosity(g,-.2),f=AmCharts.polygon(i,[0,a,e+a,e,0],[0,h,h,0,0],p,o,0,0,0,m),0<l&&(b=AmCharts.line(i,[0,a,e+a],[0,h,h],d,l,n,u)),A=AmCharts.polygon(i,[0,0,e,e,0],[0,s,s,0,0],p,o,0,0,0,0,m),A.translate(a,h),0<l&&(C=AmCharts.line(i,[a,a],[h,h+s],d,1,n,u)),x=AmCharts.polygon(i,[0,0,a,a,0],[0,s,s+h,h,0],p,o,0,0,0,m),D=AmCharts.polygon(i,[e,e,e+a,e+a,e],[0,s,s+h,h,0],p,o,0,0,0,m),0<l&&(v=AmCharts.line(i,[e,e+a,e+a,e],[0,h,s+h,s],d,l,n,u)),p=AmCharts.adjustLuminosity(T,.2),T=AmCharts.polygon(i,[0,a,e+a,e,0],[s,s+h,s+h,s,s],p,o,0,0,0,m),0<l&&(y=AmCharts.line(i,[0,a,e+a],[s,s+h,s+h],d,l,n,u));1>Math.abs(s)&&(s=0);1>Math.abs(e)&&(e=0);i=0===s?AmCharts.line(i,[0,e],[0,0],d,l,n,u):0===e?AmCharts.line(i,[0,0],[0,s],d,l,n,u):0<c?AmCharts.rect(i,e,s,r,o,n,d,l,c,m,u):AmCharts.polygon(i,[0,0,e,e,0],[0,s,s,0,0],r,o,n,d,l,m,!1,u);s=0>s?[f,b,A,C,x,D,v,T,y,i]:[T,y,A,C,x,D,f,b,v,i];for(f=0;f<s.length;f++)(A=s[f])&&t.push(A)},width:function(t){this.w=t;this.draw()},height:function(t){this.h=t;this.draw()},animateHeight:function(t,i){var e=this;e.easing=i;e.totalFrames=1e3*t/AmCharts.updateRate;e.rh=e.h;e.frame=0;e.height(1);setTimeout(function(){e.updateHeight.call(e)},AmCharts.updateRate)},updateHeight:function(){var t=this;t.frame++;var i=t.totalFrames;t.frame<=i&&(i=t.easing(0,t.frame,1,t.rh-1,i),t.height(i),setTimeout(function(){t.updateHeight.call(t)},AmCharts.updateRate))},animateWidth:function(t,i){var e=this;e.easing=i;e.totalFrames=1e3*t/AmCharts.updateRate;e.rw=e.w;e.frame=0;e.width(1);setTimeout(function(){e.updateWidth.call(e)},AmCharts.updateRate)},updateWidth:function(){var t=this;t.frame++;var i=t.totalFrames;t.frame<=i&&(i=t.easing(0,t.frame,1,t.rw-1,i),t.width(i),setTimeout(function(){t.updateWidth.call(t)},AmCharts.updateRate))}});AmCharts.CategoryAxis=AmCharts.Class({inherits:AmCharts.AxisBase,construct:function(){AmCharts.CategoryAxis.base.construct.call(this);this.minPeriod="DD";this.equalSpacing=this.parseDates=!1;this.position="bottom";this.startOnAxis=!1;this.firstDayOfWeek=1;this.gridPosition="middle";this.markPeriodChange=this.boldPeriodBeginning=!0;this.safeDistance=30;this.centerLabelOnFullPeriod=!0;this.periods=[{period:"ss",count:1},{period:"ss",count:5},{period:"ss",count:10},{period:"ss",count:30},{period:"mm",count:1},{period:"mm",count:5},{period:"mm",count:10},{period:"mm",count:30},{period:"hh",count:1},{period:"hh",count:3},{period:"hh",count:6},{period:"hh",count:12},{period:"DD",count:1},{period:"DD",count:2},{period:"DD",count:3},{period:"DD",count:4},{period:"DD",count:5},{period:"WW",count:1},{period:"MM",count:1},{period:"MM",count:2},{period:"MM",count:3},{period:"MM",count:6},{period:"YYYY",count:1},{period:"YYYY",count:2},{period:"YYYY",count:5},{period:"YYYY",count:10},{period:"YYYY",count:50},{period:"YYYY",count:100}];this.dateFormats=[{period:"fff",format:"JJ:NN:SS"},{period:"ss",format:"JJ:NN:SS"},{period:"mm",format:"JJ:NN"},{period:"hh",format:"JJ:NN"},{period:"DD",format:"MMM DD"},{period:"WW",format:"MMM DD"},{period:"MM",format:"MMM"},{period:"YYYY",format:"YYYY"}];this.nextPeriod={};this.nextPeriod.fff="ss";this.nextPeriod.ss="mm";this.nextPeriod.mm="hh";this.nextPeriod.hh="DD";this.nextPeriod.DD="MM";this.nextPeriod.MM="YYYY"},draw:function(){AmCharts.CategoryAxis.base.draw.call(this);this.generateDFObject();var t=this.chart.chartData;this.data=t;if(AmCharts.ifArray(t)){var i,e=this.chart,s=this.start,a=this.labelFrequency,h=0;i=this.end-s+1;var r=this.gridCount,o=this.showFirstLabel,n=this.showLastLabel,d,l="",m=AmCharts.extractPeriod(this.minPeriod);d=AmCharts.getPeriodDuration(m.period,m.count);var c,u,g,p,f;c=this.rotate;var A=this.firstDayOfWeek,C=this.boldPeriodBeginning,t=AmCharts.resetDateToMin(new Date(t[t.length-1].time+1.05*d),this.minPeriod,1,A).getTime(),x;this.endTime>t&&(this.endTime=t);x=this.minorGridEnabled;var D,t=this.gridAlpha,v;if(this.parseDates&&!this.equalSpacing){this.timeDifference=this.endTime-this.startTime;s=this.choosePeriod(0);a=s.period;c=s.count;u=AmCharts.getPeriodDuration(a,c);u<d&&(a=m.period,c=m.count,u=d);g=a;"WW"==g&&(g="DD");this.stepWidth=this.getStepWidth(this.timeDifference);var r=Math.ceil(this.timeDifference/u)+5,T=l=AmCharts.resetDateToMin(new Date(this.startTime-u),a,c,A).getTime();g==a&&1==c&&this.centerLabelOnFullPeriod&&(p=u*this.stepWidth);this.cellWidth=d*this.stepWidth;i=Math.round(l/u);s=-1;i/2==Math.round(i/2)&&(s=-2,l-=u);var y=e.firstTime,b=0;x&&1<c&&(D=this.chooseMinorFrequency(c),v=AmCharts.getPeriodDuration(a,D));if(0<this.gridCount)for(i=s;i<=r;i++){m=y+u*(i+Math.floor((T-y)/u))-b;m=AmCharts.resetDateToMin(new Date(m),a,c,A).getTime();"MM"==a&&(x=(m-l)/u,1.5<=(m-l)/u&&(m-=(x-1)*u,b+=u));d=(m-this.startTime)*this.stepWidth;f=!1;this.nextPeriod[g]&&(f=this.checkPeriodChange(this.nextPeriod[g],1,m,l));x=!1;f&&this.markPeriodChange?(l=this.dateFormatsObject[this.nextPeriod[g]],x=!0):l=this.dateFormatsObject[g];C||(x=!1);l=AmCharts.formatDate(new Date(m),l);if(i==s&&!o||i==r&&!n)l=" ";this.labelFunction&&(l=this.labelFunction(l,new Date(m),this));l=new this.axisItemRenderer(this,d,l,!1,p,0,!1,x);this.pushAxisItem(l);l=m;if(!isNaN(D))for(d=1;d<c;d+=D)this.gridAlpha=this.minorGridAlpha,x=m+v*d,x=AmCharts.resetDateToMin(new Date(x),a,D,A).getTime(),x=new this.axisItemRenderer(this,(x-this.startTime)*this.stepWidth),this.pushAxisItem(x);this.gridAlpha=t}}else if(!this.parseDates){if(this.cellWidth=this.getStepWidth(i),i<r&&(r=i),h+=this.start,this.stepWidth=this.getStepWidth(i),0<r)for(C=Math.floor(i/r),D=this.chooseMinorFrequency(C),d=h,d/2==Math.round(d/2)&&d--,0>d&&(d=0),r=0,i=d;i<=this.end+2;i++){A=!1;0<=i&&i<this.data.length?(g=this.data[i],l=g.category,A=g.forceShow):l="";if(x&&!isNaN(D))if(i/D==Math.round(i/D)||A)i/C==Math.round(i/C)||A||(this.gridAlpha=this.minorGridAlpha,l=void 0);else continue;else if(i/C!=Math.round(i/C)&&!A)continue;d=this.getCoordinate(i-h);A=0;"start"==this.gridPosition&&(d-=this.cellWidth/2,A=this.cellWidth/2);if(i==s&&!o||i==this.end&&!n)l=void 0;Math.round(r/a)!=r/a&&(l=void 0);r++;T=this.cellWidth;c&&(T=NaN);this.labelFunction&&g&&(l=this.labelFunction(l,g,this));l=AmCharts.fixNewLines(l);l=new this.axisItemRenderer(this,d,l,!0,T,A,void 0,!1,A);this.pushAxisItem(l);this.gridAlpha=t}}else if(this.parseDates&&this.equalSpacing){h=this.start;this.startTime=this.data[this.start].time;this.endTime=this.data[this.end].time;this.timeDifference=this.endTime-this.startTime;s=this.choosePeriod(0);a=s.period;c=s.count;u=AmCharts.getPeriodDuration(a,c);u<d&&(a=m.period,c=m.count,u=d);g=a;"WW"==g&&(g="DD");this.stepWidth=this.getStepWidth(i);r=Math.ceil(this.timeDifference/u)+1;l=AmCharts.resetDateToMin(new Date(this.startTime-u),a,c,A).getTime();this.cellWidth=this.getStepWidth(i);i=Math.round(l/u);s=-1;i/2==Math.round(i/2)&&(s=-2,l-=u);d=this.start;d/2==Math.round(d/2)&&d--;0>d&&(d=0);p=this.end+2;p>=this.data.length&&(p=this.data.length);v=!1;v=!o;this.previousPos=-1e3;20<this.labelRotation&&(this.safeDistance=5);u=d;if(this.data[d].time!=AmCharts.resetDateToMin(new Date(this.data[d].time),a,c,A).getTime())for(A=0,y=l,i=d;i<p;i++)m=this.data[i].time,this.checkPeriodChange(a,c,m,y)&&(A++,2<=A&&(u=i,i=p),y=m);x&&1<c&&(D=this.chooseMinorFrequency(c),AmCharts.getPeriodDuration(a,D));for(i=d;i<p;i++)if(m=this.data[i].time,this.checkPeriodChange(a,c,m,l)&&i>=u){d=this.getCoordinate(i-this.start);f=!1;this.nextPeriod[g]&&(f=this.checkPeriodChange(this.nextPeriod[g],1,m,l));x=!1;f&&this.markPeriodChange?(l=this.dateFormatsObject[this.nextPeriod[g]],x=!0):l=this.dateFormatsObject[g];l=AmCharts.formatDate(new Date(m),l);if(i==s&&!o||i==r&&!n)l=" ";v?v=!1:(C||(x=!1),d-this.previousPos>this.safeDistance*Math.cos(this.labelRotation*Math.PI/180)&&(this.labelFunction&&(l=this.labelFunction(l,new Date(m),this)),l=new this.axisItemRenderer(this,d,l,void 0,void 0,void 0,void 0,x),A=l.graphics(),this.pushAxisItem(l),A=A.getBBox().width,AmCharts.isModern||(A-=d),this.previousPos=d+A));l=m}else isNaN(D)||(this.checkPeriodChange(a,D,m,T)&&(this.gridAlpha=this.minorGridAlpha,d=this.getCoordinate(i-this.start),x=new this.axisItemRenderer(this,d),this.pushAxisItem(x),T=m),this.gridAlpha=t)}for(i=0;i<this.data.length;i++)if(o=this.data[i])n=this.parseDates&&!this.equalSpacing?Math.round((o.time-this.startTime)*this.stepWidth+this.cellWidth/2):this.getCoordinate(i-h),o.x[this.id]=n;o=this.guides.length;for(i=0;i<o;i++)n=this.guides[i],C=C=C=t=s=NaN,D=n.above,n.toCategory&&(C=e.getCategoryIndexByValue(n.toCategory),isNaN(C)||(s=this.getCoordinate(C-h),l=new this.axisItemRenderer(this,s,"",!0,NaN,NaN,n),this.pushAxisItem(l,D))),n.category&&(C=e.getCategoryIndexByValue(n.category),isNaN(C)||(t=this.getCoordinate(C-h),C=(s-t)/2,l=new this.axisItemRenderer(this,t,n.label,!0,NaN,C,n),this.pushAxisItem(l,D))),n.toDate&&(this.equalSpacing?(C=e.getClosestIndex(this.data,"time",n.toDate.getTime(),!1,0,this.data.length-1),isNaN(C)||(s=this.getCoordinate(C-h))):s=(n.toDate.getTime()-this.startTime)*this.stepWidth,l=new this.axisItemRenderer(this,s,"",!0,NaN,NaN,n),this.pushAxisItem(l,D)),n.date&&(this.equalSpacing?(C=e.getClosestIndex(this.data,"time",n.date.getTime(),!1,0,this.data.length-1),isNaN(C)||(t=this.getCoordinate(C-h))):t=(n.date.getTime()-this.startTime)*this.stepWidth,C=(s-t)/2,l="H"==this.orientation?new this.axisItemRenderer(this,t,n.label,!1,2*C,NaN,n):new this.axisItemRenderer(this,t,n.label,!1,NaN,C,n),this.pushAxisItem(l,D)),s=new this.guideFillRenderer(this,t,s,n),t=s.graphics(),this.pushAxisItem(s,D),n.graphics=t,t.index=i,n.balloonText&&this.addEventListeners(t,n)}this.axisCreated=!0;e=this.x;h=this.y;this.set.translate(e,h);this.labelsSet.translate(e,h);this.positionTitle();(e=this.axisLine.set)&&e.toFront()},chooseMinorFrequency:function(t){for(var i=10;0<i;i--)if(t/i==Math.round(t/i))return t/i},choosePeriod:function(t){var i=AmCharts.getPeriodDuration(this.periods[t].period,this.periods[t].count),e=Math.ceil(this.timeDifference/i),s=this.periods;return this.timeDifference<i&&0<t?s[t-1]:e<=this.gridCount?s[t]:t+1<s.length?this.choosePeriod(t+1):s[t]},getStepWidth:function(t){var i;this.startOnAxis?(i=this.axisWidth/(t-1),1==t&&(i=this.axisWidth)):i=this.axisWidth/t;return i},getCoordinate:function(t){t*=this.stepWidth;this.startOnAxis||(t+=this.stepWidth/2);return Math.round(t)},timeZoom:function(t,i){this.startTime=t;this.endTime=i},minDuration:function(){var t=AmCharts.extractPeriod(this.minPeriod);return AmCharts.getPeriodDuration(t.period,t.count)},checkPeriodChange:function(t,i,e,s){e=new Date(e);var a=new Date(s),h=this.firstDayOfWeek;s=i;"DD"==t&&(i=1);e=AmCharts.resetDateToMin(e,t,i,h).getTime();i=AmCharts.resetDateToMin(a,t,i,h).getTime();return"DD"==t&&e-i<=AmCharts.getPeriodDuration(t,s)?!1:e!=i?!0:!1},generateDFObject:function(){this.dateFormatsObject={};var t;for(t=0;t<this.dateFormats.length;t++){var i=this.dateFormats[t];this.dateFormatsObject[i.period]=i.format}},xToIndex:function(t){var i=this.data,e=this.chart,s=e.rotate,a=this.stepWidth;this.parseDates&&!this.equalSpacing?(t=this.startTime+Math.round(t/a)-this.minDuration()/2,e=e.getClosestIndex(i,"time",t,!1,this.start,this.end+1)):(this.startOnAxis||(t-=a/2),e=this.start+Math.round(t/a));var e=AmCharts.fitToBounds(e,0,i.length-1),h;i[e]&&(h=i[e].x[this.id]);s?h>this.height+1&&e--:h>this.width+1&&e--;0>h&&e++;return e=AmCharts.fitToBounds(e,0,i.length-1)},dateToCoordinate:function(t){return this.parseDates&&!this.equalSpacing?(t.getTime()-this.startTime)*this.stepWidth:this.parseDates&&this.equalSpacing?(t=this.chart.getClosestIndex(this.data,"time",t.getTime(),!1,0,this.data.length-1),this.getCoordinate(t-this.start)):NaN},categoryToCoordinate:function(t){return this.chart?(t=this.chart.getCategoryIndexByValue(t),this.getCoordinate(t-this.start)):NaN},coordinateToDate:function(t){return this.equalSpacing?(t=this.xToIndex(t),new Date(this.data[t].time)):new Date(this.startTime+t/this.stepWidth)}});
//# sourceMappingURL=serial.map.js