{"version":3,"file":"core_canvas.min.js","sources":["core_canvas.js"],"names":["window","BX","E","FormToArray","form","data","i","ii","_data","n","elements","length","files","el","disabled","type","toLowerCase","push","name","value","size","checked","j","options","selected","current","p","indexOf","substring","rest","pp","filesCount","roughSize","CanvasEditor","id","this","previewSize","width","height","minWidth","minHeight","dialogName","canvas","Canvas","addCustomEvent","delegate","params","changeCoeff","props","style","parseInt","replace","cover","pos","getCanvas","parentNode","cover1","ratio","coeff","cnv","UploaderUtils","scaleImage","hasAttribute","setAttribute","getAttribute","removeAttribute","setProps","top","Math","ceil","left","right","cover2","paddingTop","paddingBottom","paddingLeft","paddingRight","adjust","destin","padding","max","bottom","popup","prototype","onApply","apply","onCustomEvent","orig","onCancel","onDelete","showEditor","template","res","GetWindowInnerSize","innerWidth","innerHeight","editorNode","create","attrs","className","display","html","util","htmlspecialchars","message","join","func","replaceChild","bind","proxy","rotate","flip","crop","proxy_context","blackAndWhite","poster","close","removeCustomEvent","func3","PopupWindowManager","autoHide","lightShadow","closeIcon","closeByEsc","zIndex","content","overlay","events","onPopupClose","reset","buttons","PopupWindowButton","text","click","func2","copyCanvas","innerHTML","defer_proxy","toUpperCase","tagName","focus","show","adjustPosition","copy","replaceCanvas","ctx","init","getVisFromReal","prop","c","getRealFromVis","setStyles","styles","recalcCoeff","getContext","initDnD","clearRect","drawImage","node","posterPopup","PopupWindow","offsetTop","offsetLeft","defaultOptions","popupOverlayZindex","popupZindex","bindOptions","position","destroy","onPopupDestroy","msg","posterApply","setAngle","forceBindPosition","min","fillStyle","fillRect","strokeStyle","border","strokeRect","textAlign","textBaseline","font","fillText","frame","getImageData","v","putImageData","verticaly","save","scale","translate","restore","clockwise","turn","tmpCanvas","rad","PI","resize","_imageDropped","url","x","y","drawBorder","img","load","ratioX","ratioY","lineWidth","document","body","removeChild","src","appendChild","DD","isDomNode","cnvDD","dropFiles","supported","ajax","FormData","isSupported","preventDefault","e","fixEventPageXY","dt","dataTransfer","pageX","pageY","types","contains","getData","file","reader","FileReader","onload","target","result","readAsDataURL","cropParams","button","addClass","cropBox","mousedown","layerX","layerY","offsetX","offsetY","mousemove","borderLeft","borderRight","borderTop","borderBottom","mouseup","PreventDefault","clear","removeClass","unbind","_position","isNaN"],"mappings":"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"}