(function(e){if(BX.admin)return;BX.admin={__border_style:"solid 1px #777f8c",__bg_style:"#777f8c",__border_dx:0,__border_min_height:12,__border_menu_timeout:500,__borders_last_comp_pos:{},__borders:null,dynamic_mode:false,dynamic_mode_show_borders:false,timer:null,createComponentBorder:function(){BX.admin.__borders={};BX.admin.__borders.cont=document.body.appendChild(BX.create("DIV",{style:{display:"none",height:"0px",width:"0px"}}));BX.admin.__borders.top=BX.admin.__borders.cont.appendChild(BX.create("DIV",{style:{position:"absolute",height:"1px",fontSize:"1px",overflow:"hidden",zIndex:990,background:BX.admin.__bg_style}}));BX.admin.__borders.right=BX.admin.__borders.cont.appendChild(BX.create("DIV",{style:{position:"absolute",width:"1px",fontSize:"1px",overflow:"hidden",zIndex:990,background:BX.admin.__bg_style}}));BX.admin.__borders.bottom=BX.admin.__borders.cont.appendChild(BX.create("DIV",{style:{position:"absolute",height:"1px",fontSize:"1px",overflow:"hidden",zIndex:990,background:BX.admin.__bg_style}}));BX.admin.__borders.left=BX.admin.__borders.cont.appendChild(BX.create("DIV",{style:{position:"absolute",width:"1px",fontSize:"1px",overflow:"hidden",zIndex:990,background:BX.admin.__bg_style}}))},__borders_adjust:function(){var e=BX.pos(this),t=BX.admin.__border_dx;var n=BX.browser.IsIE()&&!BX.browser.IsDoctype()?2:0;BX.adjust(BX.admin.__borders.top,{style:{top:e.top-t-n+"px",left:e.left-t-n+"px",width:e.width+t*2+"px"}});BX.adjust(BX.admin.__borders.right,{style:{top:e.top-t-n+"px",left:e.right+t-1-n+"px",height:e.height+t*2+"px"}});BX.adjust(BX.admin.__borders.bottom,{style:{top:e.bottom+t-n+"px",left:e.left-t-n+"px",width:e.width+t*2+"px"}});BX.adjust(BX.admin.__borders.left,{style:{top:e.top-t-n+"px",left:e.left-t-n+"px",height:e.height+t*2+"px"}});BX.admin.__borders_last_comp_pos=e},setComponentBorder:function(t){if(!BX.isReady)return BX.ready(function(){BX.admin.setComponentBorder(t)});if(null==BX.admin.__borders)BX.admin.createComponentBorder();t=BX(t);if(!t)return;if(t.children.length>0){var n=t.firstChild,i=null,a=0;while(n){if(BX.type.isElementNode(n)&&n.tagName.toUpperCase()!="SCRIPT"){a++;if(a>1||!BX.is_relative(n)&&!BX.is_float(n)){a=-1;break}i=n}n=n.nextSibling}if(a==1&&i){if(t.OPENER){t.OPENER.setParent(i)}t=i}}if(BX.admin.dynamic_mode){BX.addCustomEvent(e,"onDynamicModeChange",BX.delegate(BX.admin.__empty_comp_onmodechange,t))}BX.admin.__empty_comp_onmodechange.apply(t,[!BX.admin.dynamic_mode||BX.admin.dynamic_mode_show_borders]);BX.bind(t,"mouseover",BX.admin.__borders_show);BX.bind(t,"mouseout",BX.admin.__borders_hide);if(t.OPENER&&t.OPENER.defaultAction){t.title=BX.message("ADMIN_INCLAREA_DBLCLICK")+" - "+t.OPENER.defaultActionTitle;BX.bind(t,"dblclick",BX.admin.__borders_dblclick)}},removeComponentBorder:function(e){e=BX(e);if(!e)return;BX.unbind(e,"mouseover",BX.admin.__borders_show);BX.unbind(e,"mouseout",BX.admin.__borders_hide);if(e.bx_msover){BX.admin.__borders_hide.apply(e)}},__empty_comp_onmodechange:function(e){if(this.offsetHeight<=BX.admin.__border_min_height){if(e){if(BX.browser.IsIE()&&!BX.browser.IsDoctype())this.style.height=BX.admin.__border_min_height+"px";else this.style.minHeight=BX.admin.__border_min_height+"px";BX.addClass(this,"bx-context-toolbar-empty-area")}else{if(BX.browser.IsIE()&&!BX.browser.IsDoctype())this.style.height=null;else this.style.minHeight=null;BX.removeClass(this,"bx-context-toolbar-empty-area")}}},__borders_dblclick:function(e){if((!BX.admin.dynamic_mode||BX.admin.dynamic_mode_show_borders)&&this.OPENER&&this.OPENER.defaultAction){this.OPENER.executeDefaultAction();return BX.PreventDefault(e)}return true},__borders_show:function(t){t=t||e.event;var n=BX.is_relative(this)?this.parentNode:this;if(BX.admin.dynamic_mode&&!BX.admin.dynamic_mode_show_borders){if(n.title){n._title=n.title;n.title=""}return}if(n._title){n.title=n._title}if(!BX.admin.__borders_adjusted){BX.admin.__borders.cont.style.display="block";BX.admin.__borders_adjust.apply(this);BX.admin.__borders_adjusted=true}this.bx_msover=true;if(this.OPENER){if(this.bxtimer)clearTimeout(this.bxtimer);this.bxtimer=setTimeout(BX.proxy(BX.admin.__borders_menu_show,this),this.OPENER.timeout||BX.admin.__border_menu_timeout);this.OPENER.setHoverHoutEvents(BX.proxy(BX.admin.__borders_show,this),BX.proxy(BX.admin.__borders_hide,this))}},__borders_menu_show:function(){if(this.bx_msover&&this.OPENER){this.OPENER.UnHide()}},__borders_hide:function(){if(BX.admin.dynamic_mode&&!BX.admin.dynamic_mode_show_borders)return;if(this.OPENER&&this.OPENER.isMenuVisible()){setTimeout(BX.admin.__borders_hide,3*BX.admin.__border_menu_timeout);return}BX.admin.__borders.cont.style.display="none";BX.admin.__borders_adjusted=false;this.bx_msover=false;if(this.OPENER){var e=BX.admin.__get_hide_timeout(this.OPENER);if(this.bxtimer)clearTimeout(this.bxtimer);this.bxtimer=setTimeout(BX.proxy(BX.admin.__borders_menu_hide,this),e)}},__borders_menu_hide:function(e){if(!this.bx_msover&&this.OPENER){this.OPENER.Hide()}},__get_hide_timeout:function(e){var t=BX.admin.__border_menu_timeout;return t}};BX.admin.panel={state:{fixed:false,collapsed:false},DIV:null,BACKDIV:null,BACKFRAME:null,NOTIFY:null,buttons:[],Init:function(){var t;BX.admin.panel.DIV=BX("bx-panel");if(BX.admin.panel.DIV){BX.setUnselectable(BX.admin.panel.DIV);t=BX("bx-panel-toggle");if(t){t.onclick=function(t){BX.admin.toggle.toggleStatus();t=t||e.event;BX.PreventDefault(t)}}t=BX("bx-panel-toggle-icon");if(t){BX.bind(t,"mousedown",BX.proxy(BX.admin.toggle.start,BX.admin.toggle));BX.bind(t,"click",BX.PreventDefault)}t=BX("bx-panel-hider");if(t){BX.admin.panel.DIV.ondblclick=BX("bx-panel-expander").onclick=t.onclick=BX.admin.panel.Collapse;BX("bx-panel-tabs").ondblclick=BX.PreventDefault;var n=BX("bx-panel-switcher");if(n)n.ondblclick=BX.PreventDefault}t=BX("bx-panel-pin");if(t){BX.bind(t,"click",function(){var e=BX.hasClass(this,"bx-panel-pin-fixed");if(e)BX.removeClass(this,"bx-panel-pin-fixed");else BX.addClass(this,"bx-panel-pin-fixed");BX.userOptions.save("admin_panel","settings","fix",e?"off":"on")});BX.bind(t,"click",BX.admin.panel.Fix);if(BX.admin.panel.state.fixed)BX.admin.panel.Fix()}for(var i=0,a=BX.admin.panel.buttons.length;i<a;i++){var o=BX(BX.admin.panel.buttons[i]["ID"]);if(o){if(BX.admin.panel.buttons[i].HOVER_CSS){o.bx_hover_class=BX.admin.panel.buttons[i].HOVER_CSS;if(BX.admin.panel.buttons[i].ACTIVE_CSS)o.bx_active_class=BX.admin.panel.buttons[i].ACTIVE_CSS;BX.bind(o,"mouseover",BX.admin.panel.__btn_hover);BX.bind(o,"mouseout",BX.admin.panel.__btn_hout);BX.bind(o,"mousedown",BX.admin.panel.__btn_down)}if(BX.admin.panel.buttons[i].MENU){var s=new BX.COpener({DIV:o,ATTACH:o.parentNode.parentNode,MENU:BX.admin.panel.buttons[i].MENU,TYPE:"click"});BX.addCustomEvent(s,"onOpenerMenuOpen",BX.delegate(BX.admin.panel.__btn_menuopen,o));BX.addCustomEvent(s,"onOpenerMenuClose",BX.delegate(BX.admin.panel.__btn_menuclose,o))}if(BX.admin.panel.buttons[i].HINT){var d=BX.admin.panel.buttons[i].HINT.TARGET?o.parentNode.parentNode:o;if(BX.admin.panel.buttons[i].HINT.ID){BX.hint(d,BX.admin.panel.buttons[i].HINT.TITLE,BX.admin.panel.buttons[i].HINT.TEXT,BX.admin.panel.buttons[i].HINT.ID)}else{d.BXHINT=new BX.CHint({parent:d,hint:BX.admin.panel.buttons[i].HINT.TEXT,title:BX.admin.panel.buttons[i].HINT.TITLE,id:BX.admin.panel.buttons[i].HINT.ID})}}o.ondblclick=BX.PreventDefault;if(BX.browser.IsIE())o.setAttribute("hideFocus","hidefocus")}}}t=null},__view_mode_toggle:function(t){var n=BX("bx-panel-toggle");var i=BX("bx-panel-toggle-caption-mode");if(n.className=="bx-panel-toggle-on"){n.className="bx-panel-toggle-off";i.innerHTML=BX.message("ADMIN_SHOW_MODE_OFF");BX.admin.dynamic_mode_show_borders=false;n.href=n.href.replace("bitrix_include_areas=N","bitrix_include_areas=Y")}else{n.className="bx-panel-toggle-on";i.innerHTML=BX.message("ADMIN_SHOW_MODE_ON");BX.admin.dynamic_mode_show_borders=true;n.href=n.href.replace("bitrix_include_areas=Y","bitrix_include_areas=N")}if(null!=this.BXHINT)this.BXHINT.Destroy();this.BXHINT=new BX.CHint({parent:this,title:BX.message("AMDIN_SHOW_MODE_TITLE"),hint:BX.admin.dynamic_mode_show_borders?BX.message("ADMIN_SHOW_MODE_ON_HINT"):BX.message("ADMIN_SHOW_MODE_OFF_HINT"),showOnce:true,preventHide:true,show_timeout:0,hide_timeout:2e3});BX.userOptions.save("admin_panel","settings","edit",BX.admin.dynamic_mode_show_borders?"on":"off");BX.onCustomEvent(e,"onDynamicModeChange",[BX.admin.dynamic_mode_show_borders]);return BX.eventReturnFalse(t)},__btn_hover:function(){this.bx_hover=true;if(!BX.admin.panel._menu_open)BX.addClass(this.parentNode.parentNode,this.bx_hover_class)},__btn_hout:function(){this.bx_hover=false;if(!BX.admin.panel._menu_open)BX.removeClass(this.parentNode.parentNode,this.bx_hover_class);BX.admin.panel.__btn_inactive.apply(this)},__btn_down:function(){BX.admin.panel.__btn_active.apply(this)},__btn_up:function(){BX.unbind(document,"mouseup",BX.proxy(BX.admin.panel.__btn_up,this));BX.admin.panel.__btn_inactive.apply(this)},__btn_active:function(){this.bx_active=true;if(!BX.admin.panel._menu_open)BX.addClass(this.parentNode.parentNode,this.bx_active_class)},__btn_inactive:function(){this.bx_active=false;if(!BX.admin.panel._menu_open)BX.removeClass(this.parentNode.parentNode,this.bx_active_class)},__btn_menuopen:function(){if(this.bx_hover)BX.admin.panel.__btn_hover.apply(this);if(this.bx_active)BX.admin.panel.__btn_active.apply(this);BX.admin.panel._menu_open=true},__btn_menuclose:function(){BX.admin.panel._menu_open=false;if(!this.bx_hover)BX.admin.panel.__btn_hout.apply(this);BX.admin.panel.__btn_inactive.apply(this)},RegisterButton:function(e){BX.admin.panel.buttons[BX.admin.panel.buttons.length]=e},Collapse:function(t){t=t||e.event;BX.admin.panel.state.collapsed=!(BX.admin.panel.DIV.className.indexOf("bx-panel-folded")>-1);var n=BX.admin.panel.DIV.offsetHeight;var i=BX("bx-panel-hider",true);var a=BX("bx-panel-expander",true);var o=BX("bx-panel-toggle");if(BX.admin.panel.state.collapsed){BX.admin.toggle.unset();BX("bx-panel-userinfo").insertBefore(o.parentNode.removeChild(o),a);BX.addClass(BX.admin.panel.DIV,"bx-panel-folded")}else{BX.admin.toggle.unset();BX("bx-panel-switcher").insertBefore(o.parentNode.removeChild(o),i);BX.removeClass(BX.admin.panel.DIV,"bx-panel-folded")}var s=BX.admin.panel.DIV.offsetHeight-n;BX.userOptions.save("admin_panel","settings","collapsed",BX.admin.panel.state.collapsed?"on":"off");BX.admin.panel.__adjustBackDiv();BX.onCustomEvent("onTopPanelCollapse",[BX.admin.panel.state.collapsed,s]);return BX.PreventDefault(t)},isFixed:function(){return BX.admin.panel.DIV.className.indexOf("bx-panel-fixed")>-1},Fix:function(){if(null==BX.admin.panel.BACKDIV)BX.admin.panel.BACKDIV=BX("bx-panel-back");var e=BX.admin.panel.isFixed();var t=BX.browser.IsIE();if(t){try{BX.admin.panel.DIV.style.removeExpression("top")}catch(e){t=false}}if(e){BX.removeClass(BX.admin.panel.DIV,t?"bx-panel-fixed-ie":"bx-panel-fixed");BX.admin.panel.BACKDIV.style.display="none";if(t){BX.admin.panel.DIV.style.cssText="position: static !important;";if(BX.admin.panel.BACKFRAME)BX.admin.panel.BACKFRAME.style.visibility="hidden"}}else{if(t){try{BX.admin.panel.DIV.style.setExpression("top","0")}catch(e){t=false}}if(t)BX.admin.panel.DIV.style.cssText="";BX.addClass(BX.admin.panel.DIV,t?"bx-panel-fixed-ie":"bx-panel-fixed");if(t){if(document.body.currentStyle.backgroundImage=="none"){document.body.style.backgroundImage="url(/bitrix/images/1.gif)";document.body.style.backgroundAttachment="fixed";document.body.style.backgroundRepeat="no-repeat"}BX.admin.panel.DIV.style.setExpression("top","eval((document.documentElement && document.documentElement.scrollTop) ? document.documentElement.scrollTop : document.body.scrollTop)");BX.admin.panel.DIV.style.setExpression("left","eval((document.documentElement && document.documentElement.scrollLeft) ? document.documentElement.scrollLeft : document.body.scrollLeft)");BX.admin.panel.DIV.style.setExpression("width","eval((document.documentElement && document.documentElement.clientWidth) ? document.documentElement.clientWidth : document.body.clientWidth)")}BX.admin.panel.__adjustBackDiv();BX.admin.panel.BACKDIV.style.display="block";if(t){if(BX.admin.panel.BACKFRAME)BX.admin.panel.BACKFRAME.style.visibility="visible";else BX.admin.panel.CreateFrame()}}BX.onCustomEvent("onTopPanelFix",[!e])},__adjustBackDiv:function(){if(BX.admin.panel.BACKDIV){var e=BX.admin.panel.DIV.offsetHeight+"px";BX.admin.panel.BACKDIV.style.height=e;var t=BX("bx-panel-frame");if(BX.admin.panel.BACKFRAME)BX.admin.panel.BACKFRAME.style.height=e}},CreateFrame:function(){BX.admin.panel.BACKFRAME=document.body.appendChild(BX.create("IFRAME",{props:{id:"bx-panel-frame"},style:{position:"absolute",overflow:"hidden",zIndex:parseInt(BX.admin.panel.DIV.currentStyle.zIndex)-1,height:BX.admin.panel.DIV.offsetHeight+"px"}}));BX.admin.panel.BACKFRAME.style.setExpression("top","eval(document.body.scrollTop)");BX.admin.panel.BACKFRAME.style.setExpression("left","eval(document.body.scrollLeft)");BX.admin.panel.BACKFRAME.style.setExpression("width","eval(document.body.clientWidth)")},Notify:function(e){if(!BX.isReady){var t=arguments;BX.ready(function(){BX.admin.panel.Notify.apply(this,t)});return}if(!BX.admin.panel.DIV)return;if(null==BX.admin.panel.NOTIFY){BX.admin.panel.NOTIFY=BX.admin.panel.DIV.appendChild(BX.create("DIV",{props:{className:"adm-warning-block"},html:'<span class="adm-warning-text">'+(e||"&nbsp;")+'</span><span onclick="BX.admin.panel.hideNotify(this.parentNode)" class="adm-warning-close"></span>'}))}BX.removeClass(BX.admin.panel.NOTIFY,"adm-warning-animate");BX.admin.panel.__adjustBackDiv()},hideNotify:function(e){e=BX.type.isDomNode(e)?e:this;if(!!e&&!!e.parentNode&&!!e.parentNode.parentNode){e.style.height=e.offsetHeight+"px";setTimeout(function(){BX.addClass(e,"adm-warning-animate")},50)}if(BX.type.isDomNode(e)&&e.getAttribute("data-ajax")=="Y"){var t=parseInt(e.getAttribute("data-id"));if(t>0){BX.ajax({url:"/bitrix/admin/admin_notify.php",method:"POST",dataType:"json",data:{ID:t,sessid:BX.bitrix_sessid()}})}}BX.defer(BX.admin.panel.__adjustBackDiv,this)();setTimeout(BX.proxy(BX.admin.panel.__adjustBackDiv,this),310)}};BX.admin.toggle={icon:null,indicator:null,toggle:null,caption:null,pageX:0,initIconPos:0,initIndicatorPos:0,minLeft:-3,maxLeft:17,unset:function(){this.icon=this.indicator=this.toggle=this.caption=null},start:function(t){t=t||e.event;if(!this._init()||!t)return;BX.fixEventPageX(t);this.pageX=t.pageX;this.initIconPos=parseInt(BX.style(this.icon,"left"));this.initIndicatorPos=BX.hasClass(this.toggle,"bx-panel-toggle-on")?-270:-290;BX.removeClass(this.toggle,"bx-panel-toggle-animate");BX.bind(document,"mousemove",BX.proxy(this._onMouseMove,this));BX.bind(document,"mouseup",BX.proxy(this._onMouseUp,this));document.body.onselectstart=BX.False;document.body.ondragstart=BX.False;document.body.style.MozUserSelect="none"},_init:function(){if(this.toggle)return true;this.toggle=BX("bx-panel-toggle");this.icon=BX("bx-panel-toggle-icon");this.indicator=BX("bx-panel-toggle-indicator");this.caption=BX("bx-panel-toggle-caption-mode");return this.toggle&&this.icon&&this.indicator&&this.caption},_onMouseMove:function(t){t=t||e.event;BX.fixEventPageX(t);this._moveToggle(t.pageX-this.pageX)},_onMouseUp:function(){var e=parseInt(BX.style(this.icon,"left"));if(this.initIconPos==e){this.toggleStatus()}else{var t=this.minLeft+Math.floor((this.maxLeft-this.minLeft)/2);if(e>=t){BX.addClass(this.toggle,"bx-panel-toggle-on bx-panel-toggle-animate");BX.removeClass(this.toggle,"bx-panel-toggle-off");this._changePosition(true)}else{BX.addClass(this.toggle,"bx-panel-toggle-off bx-panel-toggle-animate");BX.removeClass(this.toggle,"bx-panel-toggle-on");this._changePosition(false)}}this.icon.style.cssText="";this.indicator.style.cssText="";BX.unbind(document,"mousemove",BX.proxy(this._onMouseMove,this));BX.unbind(document,"mouseup",BX.proxy(this._onMouseUp,this));document.body.onselectstart=null;document.body.ondragstart=null;document.body.style.MozUserSelect=""},_changePosition:function(t){var n=this.caption.childNodes[0];if(t&&n.id=="bx-panel-toggle-caption-mode-on"||!t&&n.id=="bx-panel-toggle-caption-mode-off")return;this.caption.appendChild(this.caption.removeChild(n));if(BX.admin.dynamic_mode){if(t){BX.admin.dynamic_mode_show_borders=true;this.toggle.href=this.toggle.href.replace("bitrix_include_areas=Y","bitrix_include_areas=N")}else{BX.admin.dynamic_mode_show_borders=false;this.toggle.href=this.toggle.href.replace("bitrix_include_areas=N","bitrix_include_areas=Y")}if(null!=BX.admin.panel.BXHINT)BX.admin.panel.BXHINT.Destroy();BX.admin.panel.BXHINT=new BX.CHint({parent:this.toggle,title:BX.message("AMDIN_SHOW_MODE_TITLE"),hint:BX.admin.dynamic_mode_show_borders?BX.message("ADMIN_SHOW_MODE_ON_HINT"):BX.message("ADMIN_SHOW_MODE_OFF_HINT"),showOnce:true,preventHide:true,show_timeout:0,hide_timeout:2e3});BX.userOptions.save("admin_panel","settings","edit",BX.admin.dynamic_mode_show_borders?"on":"off");BX.onCustomEvent(e,"onDynamicModeChange",[BX.admin.dynamic_mode_show_borders])}else{BX.reload(this.toggle.href)}},_moveToggle:function(e){var t=this.initIconPos+e;t=Math.min(this.maxLeft,Math.max(t,this.minLeft));this.icon.style.cssText="left:"+t+"px !important";this.indicator.style.cssText="background-position: "+(this.initIndicatorPos+t-this.initIconPos)+"px -1751px !important"},toggleStatus:function(){if(!this._init())return;if(BX.hasClass(this.toggle,"bx-panel-toggle-off")){BX.addClass(this.toggle,"bx-panel-toggle-on bx-panel-toggle-animate");BX.removeClass(this.toggle,"bx-panel-toggle-off");this._changePosition(true)}else{BX.addClass(this.toggle,"bx-panel-toggle-off bx-panel-toggle-animate");BX.removeClass(this.toggle,"bx-panel-toggle-on");this._changePosition(false)}}};BX.admin.moreButton={buttonContainer:null,menu:null,buttonSpan:null,buttons:[],groupsMenu:{},moreButtonSize:64,moreButton:null,lastVisibleButton:-1,init:function(e){this.params=e||{};this.buttonContainer=BX("bx-panel-buttons-inner");if(this.buttonContainer&&this.buttonContainer.childNodes&&this.buttonContainer.childNodes.length>0){setTimeout(BX.proxy(this.__init,this),0);BX.ready(function(){BX.admin.moreButton.__init();BX.admin.moreButton.recal()})}else{BX.ready(function(){BX.admin.moreButton.buttonContainer=BX("bx-panel-buttons-inner");BX.admin.moreButton.__init()})}},__init:function(){if(this.moreButton){return}this.buttons=BX.findChildren(this.buttonContainer,{tagName:"span"});for(var t=0,n=BX.admin.panel.buttons.length;t<n;t++){var i=BX.admin.panel.buttons[t];if(typeof i.GROUP_ID=="underfined"||i.SKIP&&i.SKIP===true)continue;if(!BX.type.isArray(this.groupsMenu[i.GROUP_ID])){this.groupsMenu[i.GROUP_ID]=[]}i.TEXT=this.getButtonTitle(i);this.groupsMenu[i.GROUP_ID].push(i)}this.moreButton=BX.create("span",{props:{className:"bx-panel-button-group"},children:[BX.create("span",{props:{className:"bx-panel-button bx-panel-button-more"},children:[BX.create("span",{props:{className:"bx-panel-button-inner"},children:[this.buttonSpan=BX.create("span",{props:{bx_hover_class:"bx-panel-button-hover",bx_active_class:"bx-panel-button-active"},events:{mouseover:BX.admin.panel.__btn_hover,mouseout:BX.admin.panel.__btn_hout,mousedown:BX.admin.panel.__btn_down,click:BX.proxy(this.onButtonClick,this),dblclick:BX.PreventDefault},html:'<span class="bx-panel-button-icon bx-panel-more-button-icon"></span>'+'<span class="bx-panel-button-text">'+this.params.buttonTitle+'&nbsp;<span class="bx-panel-button-arrow"></span></span>'})]})]})]});this.menu=new BX.COpener({DIV:this.buttonSpan,ATTACH:this.buttonSpan.parentNode.parentNode,MENU:[],TYPE:"click"});BX.addCustomEvent(this.menu,"onOpenerMenuOpen",BX.delegate(BX.admin.panel.__btn_menuopen,this.buttonSpan));BX.addCustomEvent(this.menu,"onOpenerMenuClose",BX.delegate(BX.admin.panel.__btn_menuclose,this.buttonSpan));BX.bind(e,"resize",BX.proxy(this.recal,this));BX.bind(e,"orientationchange",BX.proxy(this.recal,this));BX.addCustomEvent("onTopPanelCollapse",BX.proxy(this.recal,this));this.recal()},recal:function(){if(this.moreButton.parentNode){this.moreButton.parentNode.removeChild(this.moreButton)}this.menu.Close();this.lastVisibleButton=-1;var e=this.buttons[0];var t=this.buttons[this.buttons.length-1];if(e.offsetTop==t.offsetTop){return}for(var n=this.buttons.length-1;n>=0;n--){var i=this.buttons[n];if(i.offsetTop==e.offsetTop&&this.getFreeSpace(i)>=this.moreButtonSize){this.lastVisibleButton=n;this.buttonContainer.insertBefore(this.moreButton,this.buttons[n+1]);break}}},getButtonTitle:function(e){if(BX.type.isNotEmptyString(e.TEXT)){return e.TEXT}else if(e.HINT&&BX.type.isNotEmptyString(e.HINT.TITLE)){return e.HINT.TITLE}else if(BX.type.isArray(e.MENU)&&e.MENU.length>0){var t=null;for(var n=0;n<e.MENU.length;n++){if(e.MENU[n].DEFAULT){t=e.MENU[n];break}}return t?t.TEXT:e.MENU[0].TEXT}return e.ID},getFreeSpace:function(e){var t=e.offsetWidth+parseInt(BX.style(e,"marginRight"));return e.offsetParent.offsetWidth-e.offsetLeft-t},onButtonClick:function(){var e=[];for(var t=this.lastVisibleButton+1;t<this.buttons.length;t++){var n=this.buttons[t];var i=n.getAttribute("data-group-id");if(BX.type.isNotEmptyString(i)&&BX.type.isArray(this.groupsMenu[i])){if(e.length>0){e.push({SEPARATOR:true})}BX.util.array_merge(e,this.groupsMenu[i])}}this.menu.SetMenu(e)}};BX.admin.startMenuRecent=function(e){BX.ajax.get("/bitrix/admin/get_start_menu.php",{mode:"save_recent",url:e["LINK"],text:e["TEXT"],title:e["TITLE"],icon:e["GLOBAL_ICON"],sessid:BX.bitrix_sessid()})};BX.admin.startMenuFavAdd=function(t){e.location.href="/bitrix/admin/favorite_edit.php?lang="+BX.message("LANGUAGE_ID")+"&name="+BX.util.urlencode(document.title)+"&addurl="+BX.util.urlencode(e.location.href)+"&encoded=Y"+(!!t?"&back_url_pub="+BX.util.urlencode(t):"")};BX.ready(function(){BX.admin.panel.Init()})})(window);
//# sourceMappingURL=core_admin.map.js