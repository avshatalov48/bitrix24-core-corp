{"version":3,"file":"main.core.minimal.bundle.js","sources":["../../src/internal/get-tag.js","../../src/lib/type.js","../../src/lib/reflection.js","../../src/lib/text.js","../../src/lib/event/aliases.js","../../src/lib/event/registry.js","../../src/lib/event/fetch-supported-listener-options.js","../../src/lib/event/bind.js","../../src/lib/event/unbind.js","../../src/lib/event/unbind-all.js","../../src/lib/event/bind-once.js","../../src/lib/runtime/debug.js","../../src/lib/runtime/loadextension/internal/fetch-extension-settings.js","../../src/lib/runtime/loadextension/load.extension.entity.js","../../src/lib/runtime/loadextension/lib/load.extension.constants.js","../../src/lib/runtime/loadextension/lib/load.extension.utils.js","../../src/lib/runtime/loadextension/load.extension.js","../../src/lib/runtime/clone.js","../../src/lib/runtime/merge.js","../../src/lib/runtime/create-comparator.js","../../src/lib/runtime.js","../../src/lib/base-error.js","../../src/lib/event/base-event.js","../../src/lib/event/event-emitter/eventstore.js","../../src/lib/event/event-emitter/warningstore.js","../../src/lib/event/event-emitter.js","../../src/lib/event/ready.js","../../src/lib/event.js","../../src/internal/encode-attribute-value.js","../../src/internal/decode-attribute-value.js","../../src/internal/get-page-scroll.js","../../src/lib/dom.js","../../src/lib/browser.js","../../src/lib/http/cookie.js","../../src/lib/http/internal/convert-object-to-form-data.js","../../src/lib/http/data.js","../../src/lib/http.js","../../src/lib/loc/message.js","../../src/lib/loc.js","../../src/lib/tag/render.js","../../src/lib/tag.js","../../src/lib/uri/parse-url.js","../../src/lib/uri/build-query-string.js","../../src/lib/uri/prepare-param-value.js","../../src/lib/uri.js","../../src/lib/validation.js","../../src/lib/cache/base-cache.js","../../src/lib/cache/memory-cache.js","../../src/lib/cache/storage/ls-storage.js","../../src/lib/cache/local-storage-cache.js","../../src/lib/cache.js","../../src/internal/get-element.js","../../src/internal/get-window.js","../../src/core-compatibility.js","../src/main.core.minimal.js"],"sourcesContent":["/**\n * Gets object.toString result\n * @param value\n * @return {string}\n */\nexport default function getTag(value: any)\n{\n\treturn Object.prototype.toString.call(value);\n}","import getTag from '../internal/get-tag';\n\nconst objectCtorString = Function.prototype.toString.call(Object);\n\n/**\n * @memberOf BX\n */\nexport default class Type\n{\n\t/**\n\t * Checks that value is string\n\t * @param value\n\t * @return {boolean}\n\t */\n\tstatic isString(value: any): boolean\n\t{\n\t\treturn typeof value === 'string';\n\t}\n\n\t/**\n\t * Returns true if a value is not empty string\n\t * @param value\n\t * @returns {boolean}\n\t */\n\tstatic isStringFilled(value: any): boolean\n\t{\n\t\treturn this.isString(value) && value !== '';\n\t}\n\n\t/**\n\t * Checks that value is function\n\t * @param value\n\t * @return {boolean}\n\t */\n\tstatic isFunction(value: any): boolean\n\t{\n\t\treturn typeof value === 'function';\n\t}\n\n\t/**\n\t * Checks that value is object\n\t * @param value\n\t * @return {boolean}\n\t */\n\tstatic isObject(value: any): boolean\n\t{\n\t\treturn !!value && (typeof value === 'object' || typeof value === 'function');\n\t}\n\n\t/**\n\t * Checks that value is object like\n\t * @param value\n\t * @return {boolean}\n\t */\n\tstatic isObjectLike(value: any): boolean\n\t{\n\t\treturn !!value && typeof value === 'object';\n\t}\n\n\t/**\n\t * Checks that value is plain object\n\t * @param value\n\t * @return {boolean}\n\t */\n\tstatic isPlainObject(value: any): boolean\n\t{\n\t\tif (!Type.isObjectLike(value) || getTag(value) !== '[object Object]')\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tconst proto = Object.getPrototypeOf(value);\n\t\tif (proto === null)\n\t\t{\n\t\t\treturn true;\n\t\t}\n\n\t\tconst ctor = proto.hasOwnProperty('constructor') && proto.constructor;\n\n\t\treturn (\n\t\t\ttypeof ctor === 'function' &&\n\t\t\tFunction.prototype.toString.call(ctor) === objectCtorString\n\t\t);\n\t}\n\n\t/**\n\t * Checks that value is boolean\n\t * @param value\n\t * @return {boolean}\n\t */\n\tstatic isBoolean(value: any): boolean\n\t{\n\t\treturn value === true || value === false;\n\t}\n\n\t/**\n\t * Checks that value is number\n\t * @param value\n\t * @return {boolean}\n\t */\n\tstatic isNumber(value: any): boolean\n\t{\n\t\treturn !Number.isNaN(value) && typeof value === 'number';\n\t}\n\n\t/**\n\t * Checks that value is integer\n\t * @param value\n\t * @return {boolean}\n\t */\n\tstatic isInteger(value: any): boolean\n\t{\n\t\treturn Type.isNumber(value) && (value % 1) === 0;\n\t}\n\n\t/**\n\t * Checks that value is float\n\t * @param value\n\t * @return {boolean}\n\t */\n\tstatic isFloat(value: any): boolean\n\t{\n\t\treturn Type.isNumber(value) && !Type.isInteger(value);\n\t}\n\n\t/**\n\t * Checks that value is nil\n\t * @param value\n\t * @return {boolean}\n\t */\n\tstatic isNil(value: any): boolean\n\t{\n\t\treturn value === null || value === undefined;\n\t}\n\n\t/**\n\t * Checks that value is array\n\t * @param value\n\t * @return {boolean}\n\t */\n\tstatic isArray(value: any): boolean\n\t{\n\t\treturn !Type.isNil(value) && Array.isArray(value);\n\t}\n\n\t/**\n\t * Returns true if a value is an array and it has at least one element\n\t * @param value\n\t * @returns {boolean}\n\t */\n\tstatic isArrayFilled(value: any): boolean\n\t{\n\t\treturn this.isArray(value) && value.length > 0;\n\t}\n\n\t/**\n\t * Checks that value is array like\n\t * @param value\n\t * @return {boolean}\n\t */\n\tstatic isArrayLike(value: any): boolean\n\t{\n\t\treturn (\n\t\t\t!Type.isNil(value)\n\t\t\t&& !Type.isFunction(value)\n\t\t\t&& value.length > -1\n\t\t\t&& value.length <= Number.MAX_SAFE_INTEGER\n\t\t);\n\t}\n\n\t/**\n\t * Checks that value is Date\n\t * @param value\n\t * @return {boolean}\n\t */\n\tstatic isDate(value: any): boolean\n\t{\n\t\treturn Type.isObjectLike(value) && getTag(value) === '[object Date]';\n\t}\n\n\t/**\n\t * Checks that is DOM node\n\t * @param value\n\t * @return {boolean}\n\t */\n\tstatic isDomNode(value: any): boolean\n\t{\n\t\treturn Type.isObjectLike(value) && !Type.isPlainObject(value) && 'nodeType' in value;\n\t}\n\n\t/**\n\t * Checks that value is element node\n\t * @param value\n\t * @return {boolean}\n\t */\n\tstatic isElementNode(value: any): boolean\n\t{\n\t\treturn Type.isDomNode(value) && value.nodeType === Node.ELEMENT_NODE;\n\t}\n\n\t/**\n\t * Checks that value is text node\n\t * @param value\n\t * @return {boolean}\n\t */\n\tstatic isTextNode(value: any): boolean\n\t{\n\t\treturn Type.isDomNode(value) && value.nodeType === Node.TEXT_NODE;\n\t}\n\n\t/**\n\t * Checks that value is Map\n\t * @param value\n\t * @return {boolean}\n\t */\n\tstatic isMap(value: any): boolean\n\t{\n\t\treturn Type.isObjectLike(value) && getTag(value) === '[object Map]';\n\t}\n\n\t/**\n\t * Checks that value is Set\n\t * @param value\n\t * @return {boolean}\n\t */\n\tstatic isSet(value: any): boolean\n\t{\n\t\treturn Type.isObjectLike(value) && getTag(value) === '[object Set]';\n\t}\n\n\t/**\n\t * Checks that value is WeakMap\n\t * @param value\n\t * @return {boolean}\n\t */\n\tstatic isWeakMap(value: any): boolean\n\t{\n\t\treturn Type.isObjectLike(value) && getTag(value) === '[object WeakMap]';\n\t}\n\n\t/**\n\t * Checks that value is WeakSet\n\t * @param value\n\t * @return {boolean}\n\t */\n\tstatic isWeakSet(value: any): boolean\n\t{\n\t\treturn Type.isObjectLike(value) && getTag(value) === '[object WeakSet]';\n\t}\n\n\t/**\n\t * Checks that value is prototype\n\t * @param value\n\t * @return {boolean}\n\t */\n\tstatic isPrototype(value: any): boolean\n\t{\n\t\treturn (\n\t\t\t(((typeof (value && value.constructor) === 'function') && value.constructor.prototype) || Object.prototype) === value\n\t\t);\n\t}\n\n\t/**\n\t * Checks that value is regexp\n\t * @param value\n\t * @return {boolean}\n\t */\n\tstatic isRegExp(value: any): boolean\n\t{\n\t\treturn Type.isObjectLike(value) && getTag(value) === '[object RegExp]';\n\t}\n\n\t/**\n\t * Checks that value is null\n\t * @param value\n\t * @return {boolean}\n\t */\n\tstatic isNull(value: any): boolean\n\t{\n\t\treturn value === null;\n\t}\n\n\t/**\n\t * Checks that value is undefined\n\t * @param value\n\t * @return {boolean}\n\t */\n\tstatic isUndefined(value: any): boolean\n\t{\n\t\treturn typeof value === 'undefined';\n\t}\n\n\t/**\n\t * Checks that value is ArrayBuffer\n\t * @param value\n\t * @return {boolean}\n\t */\n\tstatic isArrayBuffer(value: any): boolean\n\t{\n\t\treturn Type.isObjectLike(value) && getTag(value) === '[object ArrayBuffer]';\n\t}\n\n\t/**\n\t * Checks that value is typed array\n\t * @param value\n\t * @return {boolean}\n\t */\n\tstatic isTypedArray(value: any): boolean\n\t{\n\t\tconst regExpTypedTag = (\n\t\t\t/^\\[object (?:Float(?:32|64)|(?:Int|Uint)(?:8|16|32)|Uint8Clamped)]$/\n\t\t);\n\t\treturn Type.isObjectLike(value) && regExpTypedTag.test(getTag(value));\n\t}\n\n\t/**\n\t * Checks that value is Blob\n\t * @param value\n\t * @return {boolean}\n\t */\n\tstatic isBlob(value: any): boolean\n\t{\n\t\treturn (\n\t\t\tType.isObjectLike(value)\n\t\t\t&& Type.isNumber(value.size)\n\t\t\t&& Type.isString(value.type)\n\t\t\t&& Type.isFunction(value.slice)\n\t\t);\n\t}\n\n\t/**\n\t * Checks that value is File\n\t * @param value\n\t * @return {boolean}\n\t */\n\tstatic isFile(value: any): boolean\n\t{\n\t\treturn (\n\t\t\tType.isBlob(value)\n\t\t\t&& Type.isObjectLike(value.lastModifiedDate)\n\t\t\t&& Type.isNumber(value.lastModified)\n\t\t\t&& Type.isString(value.name)\n\t\t);\n\t}\n\n\t/**\n\t * Checks that value is FormData\n\t * @param value\n\t * @return {boolean}\n\t */\n\tstatic isFormData(value: any)\n\t{\n\t\treturn value instanceof FormData;\n\t}\n}","import Type from './type';\n\n/**\n * @memberOf BX\n */\nexport default class Reflection\n{\n\t/**\n\t * Gets link to function by function name\n\t * @param className\n\t * @return {?Function}\n\t */\n\tstatic getClass(className: string | Function): Function | null\n\t{\n\t\tif (Type.isString(className) && !!className)\n\t\t{\n\t\t\tlet classFn = null;\n\t\t\tlet currentNamespace = window;\n\t\t\tconst namespaces = className.split('.');\n\n\t\t\tfor (let i = 0; i < namespaces.length; i += 1)\n\t\t\t{\n\t\t\t\tconst namespace = namespaces[i];\n\n\t\t\t\tif (!currentNamespace[namespace])\n\t\t\t\t{\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\tcurrentNamespace = currentNamespace[namespace];\n\t\t\t\tclassFn = currentNamespace;\n\t\t\t}\n\n\t\t\treturn classFn;\n\t\t}\n\n\t\tif (Type.isFunction(className))\n\t\t{\n\t\t\treturn className;\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t/**\n\t * Creates a namespace or returns a link to a previously created one\n\t * @param {String} namespaceName\n\t * @return {Object<string, any> | Function | null}\n\t */\n\tstatic namespace(namespaceName: string): {[key: string]: any} | Function\n\t{\n\t\tlet parts = namespaceName.split('.');\n\t\tlet parent = window.BX;\n\n\t\tif (parts[0] === 'BX')\n\t\t{\n\t\t\tparts = parts.slice(1);\n\t\t}\n\n\t\tfor (let i = 0; i < parts.length; i += 1)\n\t\t{\n\t\t\tif (Type.isUndefined(parent[parts[i]]))\n\t\t\t{\n\t\t\t\tparent[parts[i]] = {};\n\t\t\t}\n\n\t\t\tparent = parent[parts[i]];\n\t\t}\n\n\t\treturn parent;\n\t}\n}","import Type from './type';\n\nconst reEscape = /[&<>'\"]/g;\nconst reUnescape = /&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34);/g;\n\nconst escapeEntities = {\n\t'&': '&amp;',\n\t'<': '&lt;',\n\t'>': '&gt;',\n\t\"'\": '&#39;',\n\t'\"': '&quot;',\n};\n\nconst unescapeEntities = {\n\t'&amp;': '&',\n\t'&#38;': '&',\n\t'&lt;': '<',\n\t'&#60;': '<',\n\t'&gt;': '>',\n\t'&#62;': '>',\n\t'&apos;': \"'\",\n\t'&#39;': \"'\",\n\t'&quot;': '\"',\n\t'&#34;': '\"',\n};\n\n/**\n * @memberOf BX\n */\nexport default class Text\n{\n\t/**\n\t * Encodes all unsafe entities\n\t * @param {string} value\n\t * @return {string}\n\t */\n\tstatic encode(value: string): string\n\t{\n\t\tif (Type.isString(value))\n\t\t{\n\t\t\treturn value.replace(reEscape, item => escapeEntities[item]);\n\t\t}\n\n\t\treturn value;\n\t}\n\n\t/**\n\t * Decodes all encoded entities\n\t * @param {string} value\n\t * @return {string}\n\t */\n\tstatic decode(value: string): string\n\t{\n\t\tif (Type.isString(value))\n\t\t{\n\t\t\treturn value.replace(reUnescape, item => unescapeEntities[item]);\n\t\t}\n\n\t\treturn value;\n\t}\n\n\tstatic getRandom(length = 8)\n\t{\n\t\t// eslint-disable-next-line\n\t\treturn [...Array(length)].map(() => (~~(Math.random() * 36)).toString(36)).join('');\n\t}\n\n\tstatic toNumber(value: any): number\n\t{\n\t\tconst parsedValue = Number.parseFloat(value);\n\n\t\tif (Type.isNumber(parsedValue))\n\t\t{\n\t\t\treturn parsedValue;\n\t\t}\n\n\t\treturn 0;\n\t}\n\n\tstatic toInteger(value: any): number\n\t{\n\t\treturn Text.toNumber(Number.parseInt(value, 10));\n\t}\n\n\tstatic toBoolean(value: any, trueValues = []): boolean\n\t{\n\t\tconst transformedValue = Type.isString(value) ? value.toLowerCase() : value;\n\t\treturn ['true', 'y', '1', 1, true, ...trueValues].includes(transformedValue);\n\t}\n\n\tstatic toCamelCase(str: string)\n\t{\n\t\tif (!Type.isStringFilled(str))\n\t\t{\n\t\t\treturn str;\n\t\t}\n\n\t\tconst regex = /[-_\\s]+(.)?/g;\n\t\tif (!regex.test(str))\n\t\t{\n\t\t\treturn str.match(/^[A-Z]+$/) ? str.toLowerCase() : str[0].toLowerCase() + str.slice(1);\n\t\t}\n\n\t\tstr = str.toLowerCase();\n\t\tstr = str.replace(regex, function(match, letter) {\n\t\t\treturn letter ? letter.toUpperCase() : '';\n\t\t});\n\n\t\treturn str[0].toLowerCase() + str.substr(1);\n\t}\n\n\tstatic toPascalCase(str: string)\n\t{\n\t\tif (!Type.isStringFilled(str))\n\t\t{\n\t\t\treturn str;\n\t\t}\n\n\t\treturn this.capitalize(this.toCamelCase(str));\n\t}\n\n\tstatic toKebabCase(str: string)\n\t{\n\t\tif (!Type.isStringFilled(str))\n\t\t{\n\t\t\treturn str;\n\t\t}\n\n\t\tconst matches = str.match(/[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g);\n\t\tif (!matches)\n\t\t{\n\t\t\treturn str;\n\t\t}\n\n\t\treturn matches.map(x => x.toLowerCase()).join('-');\n\t}\n\n\tstatic capitalize(str: string)\n\t{\n\t\tif (!Type.isStringFilled(str))\n\t\t{\n\t\t\treturn str;\n\t\t}\n\n\t\treturn str[0].toUpperCase() + str.substr(1);\n\t}\n}","const aliases = {\n\tmousewheel: [\n\t\t'DOMMouseScroll',\n\t],\n\tbxchange: [\n\t\t'change',\n\t\t'cut',\n\t\t'paste',\n\t\t'drop',\n\t\t'keyup',\n\t],\n\tanimationend: [\n\t\t'animationend',\n\t\t'oAnimationEnd',\n\t\t'webkitAnimationEnd',\n\t\t'MSAnimationEnd',\n\t],\n\ttransitionend: [\n\t\t'webkitTransitionEnd',\n\t\t'otransitionend',\n\t\t'oTransitionEnd',\n\t\t'msTransitionEnd',\n\t\t'transitionend',\n\t],\n\tfullscreenchange: [\n\t\t'fullscreenchange',\n\t\t'webkitfullscreenchange',\n\t\t'mozfullscreenchange',\n\t\t'MSFullscreenChange',\n\t],\n\tfullscreenerror: [\n\t\t'fullscreenerror',\n\t\t'webkitfullscreenerror',\n\t\t'mozfullscreenerror',\n\t\t'MSFullscreenError',\n\t],\n};\n\nexport default aliases;","import Type from '../type';\n\nexport class Registry\n{\n\tregistry: WeakMap = new WeakMap();\n\n\tset(target: Element, event: string, listener: Function)\n\t{\n\t\tconst events = this.get(target);\n\n\t\tif (!Type.isSet(events[event]))\n\t\t{\n\t\t\tevents[event] = new Set();\n\t\t}\n\n\t\tevents[event].add(listener);\n\n\t\tthis.registry.set(target, events);\n\t}\n\n\tget(target: Element): {[event: string]: Set<Function>}\n\t{\n\t\treturn this.registry.get(target) || {};\n\t}\n\n\thas(target: Element, event?: string, listener?: Function): boolean\n\t{\n\t\tif (event && listener)\n\t\t{\n\t\t\treturn (\n\t\t\t\tthis.registry.has(target)\n\t\t\t\t&& this.registry.get(target)[event].has(listener)\n\t\t\t);\n\t\t}\n\n\t\treturn this.registry.has(target);\n\t}\n\n\tdelete(target: Element, event?: string, listener?: Function)\n\t{\n\t\tif (!Type.isDomNode(target))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (Type.isString(event) && Type.isFunction(listener))\n\t\t{\n\t\t\tconst events = this.registry.get(target);\n\n\t\t\tif (Type.isPlainObject(events) && Type.isSet(events[event]))\n\t\t\t{\n\t\t\t\tevents[event].delete(listener);\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (Type.isString(event))\n\t\t{\n\t\t\tconst events = this.registry.get(target);\n\n\t\t\tif (Type.isPlainObject(events) && Type.isSet(events[event]))\n\t\t\t{\n\t\t\t\tevents[event] = new Set();\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\tthis.registry.delete(target);\n\t}\n}\n\nexport default new Registry();","import Type from '../type';\n\nfunction isOptionSupported(name)\n{\n\tlet isSupported = false;\n\n\ttry {\n\t\tconst options = Object.defineProperty({}, name, {\n\t\t\tget() {\n\t\t\t\tisSupported = true;\n\t\t\t\treturn undefined;\n\t\t\t},\n\t\t});\n\n\t\twindow.addEventListener('test', null, options);\n\t}\n\t// eslint-disable-next-line\n\tcatch (err) {}\n\n\treturn isSupported;\n}\n\nexport default function fetchSupportedListenerOptions(\n\toptions?: T<{\n\t\tcapture?: boolean,\n\t\tonce?: boolean,\n\t\tpassive?: boolean,\n\t}>,\n): ?T\n{\n\tif (!Type.isPlainObject(options))\n\t{\n\t\treturn options;\n\t}\n\n\treturn Object\n\t\t.keys(options)\n\t\t.reduce((acc, name) => {\n\t\t\tif (isOptionSupported(name))\n\t\t\t{\n\t\t\t\tacc[name] = options[name];\n\t\t\t}\n\n\t\t\treturn acc;\n\t\t}, {});\n}","import Type from '../type';\nimport aliases from './aliases';\nimport registry from './registry';\nimport fetchSupportedListenerOptions from './fetch-supported-listener-options';\n\nexport default function bind(\n\ttarget: Element,\n\teventName: string,\n\thandler: (event: Event) => void,\n\toptions?: {\n\t\tcapture?: boolean,\n\t\tonce?: boolean,\n\t\tpassive?: boolean,\n\t},\n): void\n{\n\tif (\n\t\t!Type.isObject(target)\n\t\t|| !Type.isFunction(target.addEventListener)\n\t)\n\t{\n\t\treturn;\n\t}\n\n\tconst listenerOptions = fetchSupportedListenerOptions(options);\n\n\tif (eventName in aliases)\n\t{\n\t\taliases[eventName].forEach((key) => {\n\t\t\ttarget.addEventListener(key, handler, listenerOptions);\n\t\t\tregistry.set(target, eventName, handler);\n\t\t});\n\n\t\treturn;\n\t}\n\n\ttarget.addEventListener(eventName, handler, listenerOptions);\n\tregistry.set(target, eventName, handler);\n}","import Type from '../type';\nimport aliases from './aliases';\nimport registry from './registry';\nimport fetchSupportedListenerOptions from './fetch-supported-listener-options';\n\nexport default function unbind(\n\ttarget: Element,\n\teventName: string,\n\thandler: Function,\n\toptions?: {\n\t\tcapture?: boolean,\n\t\tonce?: boolean,\n\t\tpassive?: boolean,\n\t},\n): void\n{\n\tif (\n\t\t!Type.isObject(target)\n\t\t|| !Type.isFunction(target.removeEventListener)\n\t)\n\t{\n\t\treturn;\n\t}\n\n\tconst listenerOptions = fetchSupportedListenerOptions(options);\n\n\tif (eventName in aliases)\n\t{\n\t\taliases[eventName].forEach((key) => {\n\t\t\ttarget.removeEventListener(key, handler, listenerOptions);\n\t\t\tregistry.delete(target, key, handler);\n\t\t});\n\n\t\treturn;\n\t}\n\n\ttarget.removeEventListener(eventName, handler, listenerOptions);\n\tregistry.delete(target, eventName, handler);\n}","import Type from '../type';\nimport unbind from './unbind';\nimport registry from './registry';\n\nexport default function unbindAll(target: any, eventName?: string): void\n{\n\tconst events = registry.get(target);\n\n\tObject.keys(events).forEach((currentEvent) => {\n\t\tevents[currentEvent].forEach((handler) => {\n\t\t\tif (!Type.isString(eventName) || eventName === currentEvent)\n\t\t\t{\n\t\t\t\tunbind(target, currentEvent, handler);\n\t\t\t}\n\t\t});\n\t});\n}","import bind from './bind';\nimport unbind from './unbind';\n\nexport default function bindOnce(\n\ttarget: Element,\n\teventName: string,\n\thandler: (event: Event) => void,\n\toptions?: {\n\t\tcapture?: boolean,\n\t\tonce?: boolean,\n\t\tpassive?: boolean,\n\t},\n): void\n{\n\tconst once = function once(...args) {\n\t\tunbind(target, eventName, once, options);\n\t\thandler(...args);\n\t};\n\n\tbind(target, eventName, once, options);\n}","import Type from '../type';\n\n// eslint-disable-next-line\nexport let debugState = true;\n\nexport function enableDebug()\n{\n\tdebugState = true;\n}\n\nexport function disableDebug()\n{\n\tdebugState = false;\n}\n\nexport function isDebugEnabled()\n{\n\treturn debugState;\n}\n\nexport default function debug(...args: any)\n{\n\tif (\n\t\tisDebugEnabled()\n\t\t&& Type.isObject(window.console)\n\t)\n\t{\n\t\tif (Type.isFunction(window.console.log))\n\t\t{\n\t\t\twindow.console.log('BX.debug: ', args.length > 0 ? args : args[0]);\n\n\t\t\tif (args[0] instanceof Error && args[0].stack)\n\t\t\t{\n\t\t\t\twindow.console.log('BX.debug error stack trace', args[0].stack);\n\t\t\t}\n\t\t}\n\n\t\tif (Type.isFunction(window.console.trace))\n\t\t{\n\t\t\t// eslint-disable-next-line\n\t\t\tconsole.trace();\n\t\t}\n\t}\n}","import Type from '../../../type';\n\ntype SettingsEntry = {extension: string, script: string};\n\nexport default function fetchExtensionSettings(html: string): Array<SettingsEntry>\n{\n\tif (Type.isStringFilled(html))\n\t{\n\t\tconst scripts = html.match(/<script type=\"extension\\/settings\" \\b[^>]*>([\\s\\S]*?)<\\/script>/g);\n\t\tif (Type.isArrayFilled(scripts))\n\t\t{\n\t\t\treturn scripts.map((script) => {\n\t\t\t\tconst [, extension] = script.match(/data-extension=\"(.[a-z0-9_.-]+)\"/);\n\t\t\t\treturn {\n\t\t\t\t\textension,\n\t\t\t\t\tscript,\n\t\t\t\t};\n\t\t\t});\n\t\t}\n\t}\n\n\treturn [];\n}","import type {ExtensionOptions, State} from './type/load.extension.types';\n\nimport {\n\tloadAll,\n\tinlineScripts,\n\texternalStyles,\n\texternalScripts,\n} from './lib/load.extension.utils';\n\nimport Type from '../../type';\nimport Reflection from '../../reflection';\nimport fetchExtensionSettings from './internal/fetch-extension-settings';\n\nexport default class Extension\n{\n\tname: string;\n\tstate: State;\n\tinlineScripts: Array<string>;\n\texternalScripts: Array<string>;\n\texternalStyles: Array<string>;\n\tloadPromise: Promise<Extension>;\n\tconfig: {[key: string]: string};\n\n\tconstructor(options: ExtensionOptions)\n\t{\n\t\tthis.config = options.config || {};\n\t\tthis.name = options.extension;\n\t\tthis.state = 'scheduled';\n\n\t\t// eslint-disable-next-line\n\t\tconst result = BX.processHTML(options.html || '');\n\t\tthis.inlineScripts = result.SCRIPT.reduce(inlineScripts, []);\n\t\tthis.externalScripts = result.SCRIPT.reduce(externalScripts, []);\n\t\tthis.externalStyles = result.STYLE.reduce(externalStyles, []);\n\t\tthis.settingsScripts = fetchExtensionSettings(result.HTML);\n\t}\n\n\tload(): Promise<Extension>\n\t{\n\t\tif (this.state === 'error')\n\t\t{\n\t\t\tthis.loadPromise = this.loadPromise || Promise.resolve(this);\n\t\t\tconsole.warn('Extension', this.name, 'not found');\n\t\t}\n\n\t\tif (!this.loadPromise && this.state)\n\t\t{\n\t\t\tthis.state = 'load';\n\t\t\tthis.settingsScripts.forEach((entry) => {\n\t\t\t\tconst isLoaded = !!document.querySelector(\n\t\t\t\t\t`script[data-extension=\"${entry.extension}\"]`,\n\t\t\t\t);\n\t\t\t\tif (!isLoaded)\n\t\t\t\t{\n\t\t\t\t\tdocument.body.insertAdjacentHTML('beforeend', entry.script);\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.inlineScripts.forEach(BX.evalGlobal);\n\n\t\t\tthis.loadPromise = Promise\n\t\t\t\t.all([\n\t\t\t\t\tloadAll(this.externalScripts),\n\t\t\t\t\tloadAll(this.externalStyles),\n\t\t\t\t])\n\t\t\t\t.then(() => {\n\t\t\t\t\tthis.state = 'loaded';\n\n\t\t\t\t\tif (Type.isPlainObject(this.config) && this.config.namespace)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn Reflection.getClass(this.config.namespace);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn window;\n\t\t\t\t});\n\t\t}\n\n\t\treturn this.loadPromise;\n\t}\n}","import type Extension from '../load.extension.entity';\n\nexport const initialized: {[name: string]: Extension} = {};\nexport const ajaxController: string = 'main.bitrix.main.controller.loadext.getextensions';\nexport const Status: {[key: string]: string} = {\n\tSCHEDULED: 'scheduled',\n\tLOAD: 'load',\n\tLOADED: 'loaded',\n\tERROR: 'error',\n};","import Type from '../../../type';\n\nimport Extension from '../load.extension.entity';\nimport {initialized, ajaxController} from './load.extension.constants';\nimport type {JsItem, Response} from '../type/load.extension.types';\n\nexport function makeIterable(value: any): Array<any>\n{\n\treturn Type.isArray(value) ? value : [value];\n}\n\nexport function isInitialized(extension: string): boolean\n{\n\treturn extension in initialized;\n}\n\nexport function getInitialized(extension: string): Extension\n{\n\treturn initialized[extension];\n}\n\nexport function isAllInitialized(extensions: Array<string>): boolean\n{\n\treturn extensions.every(isInitialized);\n}\n\nexport function loadExtensions(extensions: Array<Extension>): Promise<Array<Extension>>\n{\n\treturn Promise.all(extensions.map(item => item.load()));\n}\n\nexport function mergeExports(exports: Array<Object>): {[key: string]: any}\n{\n\treturn exports.reduce((acc, currentExports) => {\n\t\tif (Type.isObject(currentExports))\n\t\t{\n\t\t\treturn {...currentExports};\n\t\t}\n\n\t\treturn currentExports;\n\t}, {});\n}\n\nexport function inlineScripts(acc: Array<string>, item: JsItem)\n{\n\tif (item.isInternal)\n\t{\n\t\tacc.push(item.JS);\n\t}\n\n\treturn acc;\n}\n\nexport function externalScripts(acc: Array<string>, item: JsItem)\n{\n\tif (!item.isInternal)\n\t{\n\t\tacc.push(item.JS);\n\t}\n\n\treturn acc;\n}\n\nexport function externalStyles(acc: Array<string>, item: ?string)\n{\n\tif (Type.isString(item) && item !== '')\n\t{\n\t\tacc.push(item);\n\t}\n\n\treturn acc;\n}\n\nexport function request(options: {extension: Array<string>}): Promise<any>\n{\n\treturn new Promise((resolve) => {\n\t\t// eslint-disable-next-line\n\t\tBX.ajax.runAction(ajaxController, {data: options}).then(resolve);\n\t});\n}\n\nexport function prepareExtensions(response: Response)\n{\n\tif (response.status !== 'success')\n\t{\n\t\tresponse.errors.map(console.warn);\n\t\treturn [];\n\t}\n\n\treturn response.data.map((item) => {\n\t\tconst initializedExtension = (\n\t\t\tgetInitialized(item.extension)\n\t\t);\n\n\t\tif (initializedExtension)\n\t\t{\n\t\t\treturn initializedExtension;\n\t\t}\n\n\t\tinitialized[item.extension] = new Extension(item);\n\n\t\treturn initialized[item.extension];\n\t});\n}\n\nexport function loadAll(items: Array<string>): Promise<void>\n{\n\tconst itemsList = makeIterable(items);\n\n\tif (!itemsList.length)\n\t{\n\t\treturn Promise.resolve();\n\t}\n\n\treturn new Promise((resolve) => {\n\t\t// eslint-disable-next-line\n\t\tBX.load(itemsList, resolve);\n\t});\n}","import * as utils from './lib/load.extension.utils';\nimport type Extension from './load.extension.entity';\n\ntype names = string | Array<string>;\ntype result = Promise<Array<Extension>>;\n\n/**\n * Loads extensions asynchronously\n * @param {string|Array<string>} extension\n * @return {Promise<Array<Extension>>}\n */\nexport default function loadExtension(extension: names): result\n{\n\tconst extensions = utils.makeIterable(extension);\n\tconst isAllInitialized = utils.isAllInitialized(extensions);\n\n\tif (isAllInitialized)\n\t{\n\t\tconst initializedExtensions = extensions.map(utils.getInitialized);\n\t\treturn utils.loadExtensions(initializedExtensions)\n\t\t\t.then(utils.mergeExports);\n\t}\n\n\treturn utils.request({extension: extensions})\n\t\t.then(utils.prepareExtensions)\n\t\t.then(utils.loadExtensions)\n\t\t.then(utils.mergeExports);\n}","import Type from '../type';\nimport getTag from '../../internal/get-tag';\n\nconst cloneableTags = [\n\t'[object Object]',\n\t'[object Array]',\n\t'[object RegExp]',\n\t'[object Arguments]',\n\t'[object Date]',\n\t'[object Error]',\n\t'[object Map]',\n\t'[object Set]',\n\t'[object ArrayBuffer]',\n\t'[object DataView]',\n\t'[object Float32Array]',\n\t'[object Float64Array]',\n\t'[object Int8Array]',\n\t'[object Int16Array]',\n\t'[object Int32Array]',\n\t'[object Uint8Array]',\n\t'[object Uint16Array]',\n\t'[object Uint32Array]',\n\t'[object Uint8ClampedArray]',\n];\n\nfunction isCloneable(value: any): boolean %checks\n{\n\tconst isCloneableValue = Type.isObjectLike(value)\n\t\t&& cloneableTags.includes(getTag(value));\n\n\treturn isCloneableValue || Type.isDomNode(value);\n}\n\nexport function internalClone(value: any, map: WeakMap<any, any>): any\n{\n\tif (map.has(value))\n\t{\n\t\treturn map.get(value);\n\t}\n\n\tif (isCloneable(value))\n\t{\n\t\tif (Type.isArray(value))\n\t\t{\n\t\t\tconst cloned = Array.from(value);\n\n\t\t\tmap.set(value, cloned);\n\n\t\t\tvalue.forEach((item, index) => {\n\t\t\t\tcloned[index] = internalClone(item, map);\n\t\t\t});\n\n\t\t\treturn map.get(value);\n\t\t}\n\n\t\tif (Type.isDomNode(value))\n\t\t{\n\t\t\treturn value.cloneNode(true);\n\t\t}\n\n\t\tif (Type.isMap(value))\n\t\t{\n\t\t\tconst result = new Map();\n\n\t\t\tmap.set(value, result);\n\n\t\t\tvalue.forEach((item, key) => {\n\t\t\t\tresult.set(\n\t\t\t\t\tinternalClone(key, map),\n\t\t\t\t\tinternalClone(item, map)\n\t\t\t\t);\n\t\t\t});\n\n\t\t\treturn result;\n\t\t}\n\n\t\tif (Type.isSet(value))\n\t\t{\n\t\t\tconst result = new Set();\n\n\t\t\tmap.set(value, result);\n\n\t\t\tvalue.forEach((item) => {\n\t\t\t\tresult.add(internalClone(item, map));\n\t\t\t});\n\n\t\t\treturn result;\n\t\t}\n\n\t\tif (Type.isDate(value))\n\t\t{\n\t\t\treturn new Date(value);\n\t\t}\n\n\t\tif (Type.isRegExp(value))\n\t\t{\n\t\t\tconst regExpFlags = /\\w*$/;\n\t\t\tconst flags = regExpFlags.exec(value);\n\n\t\t\tlet result = new RegExp(value.source);\n\n\t\t\tif (flags && Type.isArray(flags))\n\t\t\t{\n\t\t\t\tresult = new RegExp(value.source, flags[0]);\n\t\t\t}\n\n\t\t\tresult.lastIndex = value.lastIndex;\n\n\t\t\treturn result;\n\t\t}\n\n\t\tconst proto = Object.getPrototypeOf(value);\n\t\tconst result = Object.assign(Object.create(proto), value);\n\n\t\tmap.set(value, result);\n\n\t\tObject.keys(value).forEach((key) => {\n\t\t\tresult[key] = internalClone(value[key], map);\n\t\t});\n\n\t\treturn result;\n\t}\n\n\treturn value;\n}\n\n/**\n * Clones any cloneable object\n * @param value\n * @return {*}\n */\nexport default function clone(value: any): any\n{\n\treturn internalClone(value, new WeakMap());\n}","import Type from '../type';\n\nexport default function merge(current, target)\n{\n\treturn Object.entries(target).reduce((acc, [key, value]) => {\n\t\tif (\n\t\t\t!Type.isDomNode(acc[key])\n\t\t\t&& Type.isObjectLike(acc[key])\n\t\t\t&& Type.isObjectLike(value)\n\t\t)\n\t\t{\n\t\t\tacc[key] = merge(acc[key], value);\n\t\t\treturn acc;\n\t\t}\n\n\t\tacc[key] = value;\n\t\treturn acc;\n\t}, current);\n}","import Type from '../type';\n\nexport default function createComparator(fields, orders = [])\n{\n\treturn (a, b) => {\n\t\tconst field = fields[0];\n\t\tconst order = orders[0] || 'asc';\n\n\t\tif (Type.isUndefined(field))\n\t\t{\n\t\t\treturn 0;\n\t\t}\n\n\t\tlet valueA = a[field];\n\t\tlet valueB = b[field];\n\n\t\tif (Type.isString(valueA) && Type.isString(valueB))\n\t\t{\n\t\t\tvalueA = valueA.toLowerCase();\n\t\t\tvalueB = valueB.toLowerCase();\n\t\t}\n\n\t\tif (valueA < valueB)\n\t\t{\n\t\t\treturn order === 'asc' ? -1 : 1;\n\t\t}\n\n\t\tif (valueA > valueB)\n\t\t{\n\t\t\treturn order === 'asc' ? 1 : -1;\n\t\t}\n\n\t\treturn createComparator(fields.slice(1), orders.slice(1))(a, b);\n\t};\n}","import Type from './type';\nimport debug from './runtime/debug';\nimport loadExtension from './runtime/loadextension/load.extension';\nimport clone from './runtime/clone';\nimport {\n\texternalScripts,\n\texternalStyles,\n\tinlineScripts,\n\tloadAll,\n} from './runtime/loadextension/lib/load.extension.utils';\nimport merge from './runtime/merge';\nimport createComparator from './runtime/create-comparator';\n\n/**\n * @memberOf BX\n */\nexport default class Runtime\n{\n\tstatic debug = debug;\n\tstatic loadExtension = loadExtension;\n\tstatic clone = clone;\n\n\tstatic debounce(func: Function, wait: number = 0, context = null): Function\n\t{\n\t\tlet timeoutId;\n\n\t\treturn function debounced(...args)\n\t\t{\n\t\t\tif (Type.isNumber(timeoutId))\n\t\t\t{\n\t\t\t\tclearTimeout(timeoutId);\n\t\t\t}\n\n\t\t\ttimeoutId = setTimeout(() => {\n\t\t\t\tfunc.apply((context || this), args);\n\t\t\t}, wait);\n\t\t};\n\t}\n\n\tstatic throttle(func: Function, wait: number = 0, context = null): Function\n\t{\n\t\tlet timer = 0;\n\t\tlet invoke;\n\n\t\treturn function wrapper(...args)\n\t\t{\n\t\t\tinvoke = true;\n\n\t\t\tif (!timer)\n\t\t\t{\n\t\t\t\tconst q = function q()\n\t\t\t\t{\n\t\t\t\t\tif (invoke)\n\t\t\t\t\t{\n\t\t\t\t\t\tfunc.apply((context || this), args);\n\t\t\t\t\t\tinvoke = false;\n\t\t\t\t\t\ttimer = setTimeout(q, wait);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\ttimer = null;\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tq();\n\t\t\t}\n\t\t};\n\t}\n\n\tstatic html(node: HTMLElement, html, params = {}): Promise | string\n\t{\n\t\tif (Type.isNil(html) && Type.isDomNode(node))\n\t\t{\n\t\t\treturn node.innerHTML;\n\t\t}\n\n\t\t// eslint-disable-next-line\n\t\tconst parsedHtml = BX.processHTML(html);\n\t\tconst externalCss = parsedHtml.STYLE.reduce(externalStyles, []);\n\t\tconst externalJs = parsedHtml.SCRIPT.reduce(externalScripts, []);\n\t\tconst inlineJs = parsedHtml.SCRIPT.reduce(inlineScripts, []);\n\n\t\tif (Type.isDomNode(node))\n\t\t{\n\t\t\tif (params.htmlFirst || (!externalJs.length && !externalCss.length))\n\t\t\t{\n\t\t\t\tnode.innerHTML = parsedHtml.HTML;\n\t\t\t}\n\t\t}\n\n\t\treturn Promise\n\t\t\t.all([\n\t\t\t\tloadAll(externalJs),\n\t\t\t\tloadAll(externalCss),\n\t\t\t])\n\t\t\t.then(() => {\n\t\t\t\tif (Type.isDomNode(node) && (externalJs.length > 0 || externalCss.length > 0))\n\t\t\t\t{\n\t\t\t\t\tnode.innerHTML = parsedHtml.HTML;\n\t\t\t\t}\n\n\t\t\t\t// eslint-disable-next-line\n\t\t\t\tinlineJs.forEach(script => BX.evalGlobal(script));\n\n\t\t\t\tif (Type.isFunction(params.callback))\n\t\t\t\t{\n\t\t\t\t\tparams.callback();\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\t/**\n\t * Merges objects or arrays\n\t * @param targets\n\t * @return {any}\n\t */\n\tstatic merge(...targets)\n\t{\n\t\tif (Type.isArray(targets[0]))\n\t\t{\n\t\t\ttargets.unshift([]);\n\t\t}\n\t\telse if (Type.isObject(targets[0]))\n\t\t{\n\t\t\ttargets.unshift({});\n\t\t}\n\n\t\treturn targets.reduce((acc, item) => {\n\t\t\treturn merge(acc, item);\n\t\t}, targets[0]);\n\t}\n\n\tstatic orderBy(\n\t\tcollection: Array<{[key: string]: any}> | {[key: string]: {[key: string]: any}},\n\t\tfields: Array<string> = [],\n\t\torders: Array<string> = [],\n\t)\n\t{\n\t\tconst comparator = createComparator(fields, orders);\n\t\treturn Object.values(collection).sort(comparator);\n\t}\n\n\tstatic destroy(target, errorMessage = 'Object is destroyed')\n\t{\n\t\tif (Type.isObject(target))\n\t\t{\n\t\t\tconst onPropertyAccess = () => {\n\t\t\t\tthrow new Error(errorMessage);\n\t\t\t};\n\t\t\tconst ownProperties = Object.keys(target);\n\t\t\tconst prototypeProperties = (() => {\n\t\t\t\tconst targetPrototype = Object.getPrototypeOf(target);\n\t\t\t\tif (Type.isObject(targetPrototype))\n\t\t\t\t{\n\t\t\t\t\treturn Object.getOwnPropertyNames(targetPrototype);\n\t\t\t\t}\n\n\t\t\t\treturn [];\n\t\t\t})();\n\n\t\t\tconst uniquePropertiesList = [\n\t\t\t\t...new Set([...ownProperties, ...prototypeProperties]),\n\t\t\t];\n\n\t\t\tuniquePropertiesList\n\t\t\t\t.filter((name) => {\n\t\t\t\t\tconst descriptor = Object.getOwnPropertyDescriptor(target, name);\n\t\t\t\t\treturn (\n\t\t\t\t\t\t!/__(.+)__/.test(name)\n\t\t\t\t\t\t&& (\n\t\t\t\t\t\t\t!Type.isObject(descriptor)\n\t\t\t\t\t\t\t|| descriptor.configurable === true\n\t\t\t\t\t\t)\n\t\t\t\t\t);\n\t\t\t\t})\n\t\t\t\t.forEach((name) => {\n\t\t\t\t\tObject.defineProperty(target, name, {\n\t\t\t\t\t\tget: onPropertyAccess,\n\t\t\t\t\t\tset: onPropertyAccess,\n\t\t\t\t\t\tconfigurable: false,\n\t\t\t\t\t});\n\t\t\t\t});\n\n\t\t\tObject.setPrototypeOf(target, null);\n\t\t}\n\t}\n}","import Type from './type';\n\nconst isError = Symbol.for('BX.BaseError.isError');\n\n/**\n * @memberOf BX\n */\nexport default class BaseError\n{\n\tconstructor(message?: string, code?: string, customData?: any)\n\t{\n\t\tthis[isError] = true;\n\t\tthis.message = '';\n\t\tthis.code = null;\n\t\tthis.customData = null;\n\n\t\tthis.setMessage(message);\n\t\tthis.setCode(code);\n\t\tthis.setCustomData(customData);\n\t}\n\n\t/**\n\t * Returns a brief description of the error\n\t * @returns {string}\n\t */\n\tgetMessage(): string\n\t{\n\t\treturn this.message;\n\t}\n\n\t/**\n\t * Sets a message of the error\n\t * @param {string} message\n\t * @returns {this}\n\t */\n\tsetMessage(message: string): this\n\t{\n\t\tif (Type.isString(message))\n\t\t{\n\t\t\tthis.message = message;\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Returns a code of the error\n\t * @returns {?string}\n\t */\n\tgetCode(): string\n\t{\n\t\treturn this.code;\n\t}\n\n\t/**\n\t * Sets a code of the error\n\t * @param {string} code\n\t * @returns {this}\n\t */\n\tsetCode(code: string): this\n\t{\n\t\tif (Type.isStringFilled(code) || code === null)\n\t\t{\n\t\t\tthis.code = code;\n\t\t}\n\n\t\treturn this;\n\t}\n\n\n\t/**\n\t * Returns custom data of the error\n\t * @returns {null|*}\n\t */\n\tgetCustomData(): any\n\t{\n\t\treturn this.customData;\n\t}\n\n\t/**\n\t * Sets custom data of the error\n\t * @returns {this}\n\t */\n\tsetCustomData(customData: any): this\n\t{\n\t\tif (!Type.isUndefined(customData))\n\t\t{\n\t\t\tthis.customData = customData;\n\t\t}\n\n\t\treturn this;\n\t}\n\n\ttoString()\n\t{\n\t\tconst code = this.getCode();\n\t\tconst message = this.getMessage();\n\n\t\tif (!Type.isStringFilled(code) && !Type.isStringFilled(message))\n\t\t{\n\t\t\treturn '';\n\t\t}\n\t\telse if (!Type.isStringFilled(code))\n\t\t{\n\t\t\treturn `Error: ${message}`;\n\t\t}\n\t\telse if (!Type.isStringFilled(message))\n\t\t{\n\t\t\treturn code;\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn `${code}: ${message}`;\n\t\t}\n\t}\n\n\t/**\n\t * Returns true if the object is an instance of BaseError\n\t * @param error\n\t * @returns {boolean}\n\t */\n\tstatic isError(error: BaseError)\n\t{\n\t\treturn Type.isObject(error) && error[isError] === true;\n\t}\n}","import Type from '../type';\nimport BaseError from \"../base-error\";\n/**\n * Implements base event object interface\n */\nexport default class BaseEvent\n{\n\tconstructor(\n\t\toptions: {\n\t\t\tdata?: any,\n\t\t\tcompatData?: Array\n\t\t} = {\n\t\t\tdata: {},\n\t\t},\n\t)\n\t{\n\t\tthis.type = '';\n\t\tthis.data = null;\n\t\tthis.target = null;\n\t\tthis.compatData = null;\n\t\tthis.defaultPrevented = false;\n\t\tthis.immediatePropagationStopped = false;\n\t\tthis.errors = [];\n\n\t\tthis.setData(options.data);\n\t\tthis.setCompatData(options.compatData);\n\t}\n\n\tstatic create(options): this\n\t{\n\t\treturn new this(options);\n\t}\n\n\t/**\n\t * Returns the name of the event\n\t * @returns {string}\n\t */\n\tgetType(): string\n\t{\n\t\treturn this.type;\n\t}\n\n\t/**\n\t *\n\t * @param {string} type\n\t */\n\tsetType(type: string): this\n\t{\n\t\tif (Type.isStringFilled(type))\n\t\t{\n\t\t\tthis.type = type;\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Returns an event data\n\t */\n\tgetData()\n\t{\n\t\treturn this.data;\n\t}\n\n\t/**\n\t * Sets an event data\n\t * @param data\n\t */\n\tsetData(data: any): this\n\t{\n\t\tif (!Type.isUndefined(data))\n\t\t{\n\t\t\tthis.data = data;\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Returns arguments for BX.addCustomEvent handlers (deprecated).\n\t * @returns {array | null}\n\t */\n\tgetCompatData(): Array | null\n\t{\n\t\treturn this.compatData;\n\t}\n\n\t/**\n\t * Sets arguments for BX.addCustomEvent handlers (deprecated)\n\t * @param data\n\t */\n\tsetCompatData(data: Array): this\n\t{\n\t\tif (Type.isArrayLike(data))\n\t\t{\n\t\t\tthis.compatData = data;\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Sets a event target\n\t * @param target\n\t */\n\tsetTarget(target): this\n\t{\n\t\tthis.target = target;\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Returns a event target\n\t */\n\tgetTarget(): any\n\t{\n\t\treturn this.target;\n\t}\n\n\t/**\n\t * Returns an array of event errors\n\t * @returns {[]}\n\t */\n\tgetErrors(): Array<BaseError>\n\t{\n\t\treturn this.errors;\n\t}\n\n\t/**\n\t * Adds an error of the event.\n\t * Event listeners can prevent emitter's default action and set the reason of this behavior.\n\t * @param error\n\t */\n\tsetError(error: BaseError)\n\t{\n\t\tif (BaseError.isError(error))\n\t\t{\n\t\t\tthis.errors.push(error);\n\t\t}\n\t}\n\n\t/**\n\t * Prevents default action\n\t */\n\tpreventDefault()\n\t{\n\t\tthis.defaultPrevented = true;\n\t}\n\n\t/**\n\t * Checks that is default action prevented\n\t * @return {boolean}\n\t */\n\tisDefaultPrevented(): boolean\n\t{\n\t\treturn this.defaultPrevented;\n\t}\n\n\t/**\n\t * Stops event immediate propagation\n\t */\n\tstopImmediatePropagation()\n\t{\n\t\tthis.immediatePropagationStopped = true;\n\t}\n\n\t/**\n\t * Checks that is immediate propagation stopped\n\t * @return {boolean}\n\t */\n\tisImmediatePropagationStopped(): boolean\n\t{\n\t\treturn this.immediatePropagationStopped;\n\t}\n}","import Type from \"../../type\";\n\nexport default class EventStore\n{\n\tconstructor(options: { defaultMaxListeners?: number } = {})\n\t{\n\t\tthis.defaultMaxListeners = Type.isNumber(options.defaultMaxListeners) ? options.defaultMaxListeners : 10;\n\t\tthis.eventStore = new WeakMap();\n\t}\n\n\tadd(target: Object, options: { maxListeners?: number } = {})\n\t{\n\t\tconst record = this.getRecordScheme();\n\t\tif (Type.isNumber(options.maxListeners))\n\t\t{\n\t\t\trecord.maxListeners = options.maxListeners;\n\t\t}\n\n\t\tthis.eventStore.set(target, record);\n\n\t\treturn record;\n\t}\n\n\tget(target: Object)\n\t{\n\t\treturn this.eventStore.get(target);\n\t}\n\n\tgetOrAdd(target: Object, options: { maxListeners?: number } = {})\n\t{\n\t\treturn this.get(target) || this.add(target, options);\n\t}\n\n\tdelete(context: any)\n\t{\n\t\tthis.eventStore.delete(context);\n\t}\n\n\tgetRecordScheme()\n\t{\n\t\treturn {\n\t\t\teventsMap: new Map(),\n\t\t\tonceMap: new Map(),\n\t\t\tmaxListeners: this.getDefaultMaxListeners(),\n\t\t\teventsMaxListeners: new Map(),\n\t\t};\n\t}\n\n\tgetDefaultMaxListeners()\n\t{\n\t\treturn this.defaultMaxListeners;\n\t}\n}\n\n","import Type from \"../../type\";\nimport Runtime from \"../../runtime\";\n\nexport default class WarningStore\n{\n\tconstructor()\n\t{\n\t\tthis.warnings = new Map();\n\t\tthis.printDelayed = Runtime.debounce(this.print.bind(this), 500);\n\t}\n\n\tadd(target, eventName, listeners)\n\t{\n\t\tlet contextWarnings = this.warnings.get(target);\n\t\tif (!contextWarnings)\n\t\t{\n\t\t\tcontextWarnings = Object.create(null);\n\t\t\tthis.warnings.set(target, contextWarnings);\n\t\t}\n\n\t\tif (!contextWarnings[eventName])\n\t\t{\n\t\t\tcontextWarnings[eventName] = {};\n\t\t}\n\n\t\tcontextWarnings[eventName].size = listeners.size;\n\t\tif (!Type.isArray(contextWarnings[eventName].errors))\n\t\t{\n\t\t\tcontextWarnings[eventName].errors = [];\n\t\t}\n\n\t\tcontextWarnings[eventName].errors.push(new Error());\n\t}\n\n\tprint()\n\t{\n\t\tfor (let [target, warnings] of this.warnings)\n\t\t{\n\t\t\tfor (let eventName in warnings)\n\t\t\t{\n\t\t\t\tconsole.groupCollapsed(\n\t\t\t\t\t'Possible BX.Event.EventEmitter memory leak detected. ' +\n\t\t\t\t\twarnings[eventName].size + ' \"' + eventName + '\" listeners added. ' +\n\t\t\t\t\t'Use emitter.setMaxListeners() to increase limit.'\n\t\t\t\t);\n\t\t\t\tconsole.dir(warnings[eventName].errors);\n\t\t\t\tconsole.groupEnd();\n\t\t\t}\n\t\t}\n\n\t\tthis.clear();\n\t}\n\n\tclear()\n\t{\n\t\tthis.warnings.clear();\n\t}\n\n\tprintDelayed()\n\t{\n\t}\n}","import Type from '../type';\nimport Runtime from '../runtime';\nimport BaseEvent from './base-event';\nimport EventStore from './event-emitter/eventstore';\nimport WarningStore from './event-emitter/warningstore';\n\nconst eventStore = new EventStore({ defaultMaxListeners: 10 });\nconst warningStore = new WarningStore();\nconst aliasStore = new Map();\n\nconst globalTarget = {\n\tGLOBAL_TARGET: 'GLOBAL_TARGET' // this key only for debugging purposes\n};\neventStore.add(globalTarget, { maxListeners: 25 });\n\nconst isEmitterProperty = Symbol.for('BX.Event.EventEmitter.isEmitter');\nconst namespaceProperty = Symbol('namespaceProperty');\nconst targetProperty = Symbol('targetProperty');\n\nexport default class EventEmitter\n{\n\tstatic GLOBAL_TARGET = globalTarget;\n\tstatic DEFAULT_MAX_LISTENERS = eventStore.getDefaultMaxListeners();\n\n\t/** @private */\n\tstatic sequenceValue = 1;\n\n\tconstructor(...args)\n\t{\n\t\tthis[targetProperty] = null;\n\t\tthis[namespaceProperty] = null;\n\t\tthis[isEmitterProperty] = true;\n\n\t\tlet target = this;\n\t\tif (Object.getPrototypeOf(this) === EventEmitter.prototype && args.length > 0) //new EventEmitter(obj) case\n\t\t{\n\t\t\tif (!Type.isObject(args[0]))\n\t\t\t{\n\t\t\t\tthrow new TypeError(`The \"target\" argument must be an object.`);\n\t\t\t}\n\n\t\t\ttarget = args[0];\n\n\t\t\tthis.setEventNamespace(args[1]);\n\t\t}\n\n\t\tthis[targetProperty] = target;\n\n\t\tsetTimeout(() => {\n\t\t\tif (this.getEventNamespace() === null)\n\t\t\t{\n\t\t\t\tconsole.warn(\n\t\t\t\t\t'The instance of BX.Event.EventEmitter is supposed to have an event namespace. ' +\n\t\t\t\t\t'Use emitter.setEventNamespace() to make events more unique.'\n\t\t\t\t);\n\t\t\t}\n\t\t}, 500);\n\t}\n\n\t/**\n\t * Makes a target observable\n\t * @param {object} target\n\t * @param {string} namespace\n\t */\n\tstatic makeObservable(target: Object, namespace: string): void\n\t{\n\t\tif (!Type.isObject(target))\n\t\t{\n\t\t\tthrow new TypeError('The \"target\" argument must be an object.');\n\t\t}\n\n\t\tif (!Type.isStringFilled(namespace))\n\t\t{\n\t\t\tthrow new TypeError('The \"namespace\" must be an non-empty string.');\n\t\t}\n\n\t\tif (EventEmitter.isEventEmitter(target))\n\t\t{\n\t\t\tthrow new TypeError('The \"target\" is an event emitter already.');\n\t\t}\n\n\t\tconst targetProto = Object.getPrototypeOf(target);\n\t\tconst emitter = new EventEmitter();\n\t\temitter.setEventNamespace(namespace);\n\n\t\tObject.setPrototypeOf(emitter, targetProto);\n\t\tObject.setPrototypeOf(target, emitter);\n\n\t\tObject.getOwnPropertyNames(EventEmitter.prototype).forEach(method => {\n\n\t\t\tif (['constructor'].includes(method))\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\temitter[method] = function(...args) {\n\t\t\t\treturn EventEmitter.prototype[method].apply(target, args);\n\t\t\t}\n\t\t});\n\t}\n\n\tsetEventNamespace(namespace)\n\t{\n\t\tif (Type.isStringFilled(namespace))\n\t\t{\n\t\t\tthis[namespaceProperty] = namespace;\n\t\t}\n\t}\n\n\tgetEventNamespace()\n\t{\n\t\treturn this[namespaceProperty];\n\t}\n\n\t/**\n\t * Subscribes listener on specified global event\n\t * @param {object} target\n\t * @param {string} eventName\n\t * @param {Function<BaseEvent>} listener\n\t * @param {object} options\n\t */\n\tstatic subscribe(\n\t\ttarget: Object,\n\t\teventName: string,\n\t\tlistener: (event: BaseEvent) => void,\n\t\toptions?: {\n\t\t\tcompatMode?: boolean,\n\t\t\tuseGlobalNaming?: boolean\n\t\t}\n\t): void\n\t{\n\t\tif (Type.isString(target))\n\t\t{\n\t\t\toptions = listener;\n\t\t\tlistener = eventName;\n\t\t\teventName = target;\n\t\t\ttarget = this.GLOBAL_TARGET;\n\t\t}\n\n\t\tif (!Type.isObject(target))\n\t\t{\n\t\t\tthrow new TypeError(`The \"target\" argument must be an object.`);\n\t\t}\n\n\t\teventName = this.normalizeEventName(eventName);\n\t\tif (!Type.isStringFilled(eventName))\n\t\t{\n\t\t\tthrow new TypeError(`The \"eventName\" argument must be a string.`);\n\t\t}\n\n\t\tif (!Type.isFunction(listener))\n\t\t{\n\t\t\tthrow new TypeError(`The \"listener\" argument must be of type Function. Received type ${typeof listener}.`);\n\t\t}\n\n\t\toptions = Type.isPlainObject(options) ? options : {};\n\t\tconst fullEventName = this.resolveEventName(eventName, target, options.useGlobalNaming === true);\n\t\tconst { eventsMap, onceMap } = eventStore.getOrAdd(target);\n\t\tconst onceListeners = onceMap.get(fullEventName);\n\t\tlet listeners = eventsMap.get(fullEventName);\n\n\t\tif ((listeners && listeners.has(listener)) || (onceListeners && onceListeners.has(listener)))\n\t\t{\n\t\t\tconsole.error(`You cannot subscribe the same \"${fullEventName}\" event listener twice.`);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (listeners)\n\t\t\t{\n\t\t\t\tlisteners.set(\n\t\t\t\t\tlistener,\n\t\t\t\t\t{\n\t\t\t\t\t\tlistener,\n\t\t\t\t\t\toptions,\n\t\t\t\t\t\tsort: this.getNextSequenceValue()\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tlisteners = new Map([[\n\t\t\t\t\tlistener,\n\t\t\t\t\t{\n\t\t\t\t\t\tlistener,\n\t\t\t\t\t\toptions,\n\t\t\t\t\t\tsort: this.getNextSequenceValue()\n\t\t\t\t\t}\n\t\t\t\t]]);\n\n\t\t\t\teventsMap.set(fullEventName, listeners);\n\t\t\t}\n\t\t}\n\n\t\tconst maxListeners = this.getMaxListeners(target, eventName);\n\t\tif (listeners.size > maxListeners)\n\t\t{\n\t\t\twarningStore.add(target, fullEventName, listeners);\n\t\t\twarningStore.printDelayed();\n\t\t}\n\t}\n\n\t/**\n\t * Subscribes a listener on a specified event\n\t * @param {string} eventName\n\t * @param {Function<BaseEvent>} listener\n\t * @return {this}\n\t */\n\tsubscribe(eventName: string, listener: (event: BaseEvent) => void): this\n\t{\n\t\tEventEmitter.subscribe(this, eventName, listener);\n\n\t\treturn this;\n\t}\n\n\t/**\n\t *\n\t * @param {object} options\n\t * @param {object} [aliases]\n\t * @param {boolean} [compatMode=false]\n\t */\n\tsubscribeFromOptions(\n\t\toptions: { [eventName: string]: Function },\n\t\taliases?: { [alias: string]: { eventName: string, namespace: string } },\n\t\tcompatMode?: boolean\n\t)\n\t{\n\t\tif (!Type.isPlainObject(options))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\taliases = Type.isPlainObject(aliases) ? EventEmitter.normalizeAliases(aliases) : {};\n\n\t\tObject.keys(options).forEach((eventName) => {\n\n\t\t\tconst listener = options[eventName];\n\t\t\tif (!Type.isFunction(listener))\n\t\t\t{\n\t\t\t\tthrow new TypeError(`The \"listener\" argument must be of type Function. Received type ${typeof listener}.`);\n\t\t\t}\n\n\t\t\teventName = EventEmitter.normalizeEventName(eventName);\n\n\t\t\tif (aliases[eventName])\n\t\t\t{\n\t\t\t\tconst { eventName: actualName } = aliases[eventName];\n\t\t\t\tEventEmitter.subscribe(this, actualName, listener, { compatMode: compatMode !== false });\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tEventEmitter.subscribe(this, eventName, listener, { compatMode: compatMode === true });\n\t\t\t}\n\t\t})\n\t}\n\n\t/**\n\t * Subscribes a listener that is called at\n\t * most once for a specified event.\n\t * @param {object} target\n\t * @param {string} eventName\n\t * @param {Function<BaseEvent>} listener\n\t */\n\tstatic subscribeOnce(\n\t\ttarget: Object,\n\t\teventName: string,\n\t\tlistener: (event: BaseEvent) => void\n\t): void\n\t{\n\t\tif (Type.isString(target))\n\t\t{\n\t\t\tlistener = eventName;\n\t\t\teventName = target;\n\t\t\ttarget = this.GLOBAL_TARGET;\n\t\t}\n\n\t\tif (!Type.isObject(target))\n\t\t{\n\t\t\tthrow new TypeError(`The \"target\" argument must be an object.`);\n\t\t}\n\n\t\teventName = this.normalizeEventName(eventName);\n\t\tif (!Type.isStringFilled(eventName))\n\t\t{\n\t\t\tthrow new TypeError(`The \"eventName\" argument must be a string.`);\n\t\t}\n\n\t\tif (!Type.isFunction(listener))\n\t\t{\n\t\t\tthrow new TypeError(`The \"listener\" argument must be of type Function. Received type ${typeof listener}.`);\n\t\t}\n\n\t\tconst fullEventName = this.resolveEventName(eventName, target);\n\t\tconst { eventsMap, onceMap } = eventStore.getOrAdd(target);\n\t\tconst listeners = eventsMap.get(fullEventName);\n\t\tlet onceListeners = onceMap.get(fullEventName);\n\n\t\tif ((listeners && listeners.has(listener)) || (onceListeners && onceListeners.has(listener)))\n\t\t{\n\t\t\tconsole.error(`You cannot subscribe the same \"${fullEventName}\" event listener twice.`);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tconst once = (...args) => {\n\t\t\t\tthis.unsubscribe(target, eventName, once);\n\t\t\t\tonceListeners.delete(listener);\n\t\t\t\tlistener(...args);\n\t\t\t};\n\n\t\t\tif (onceListeners)\n\t\t\t{\n\t\t\t\tonceListeners.set(listener, once);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tonceListeners = new Map([[listener, once]]);\n\t\t\t\tonceMap.set(fullEventName, onceListeners);\n\t\t\t}\n\n\t\t\tthis.subscribe(target, eventName, once);\n\t\t}\n\t}\n\n\t/**\n\t * Subscribes a listener that is called at most once for a specified event.\n\t * @param {string} eventName\n\t * @param {Function<BaseEvent>} listener\n\t * @return {this}\n\t */\n\tsubscribeOnce(eventName: string, listener: (event: BaseEvent) => void): this\n\t{\n\t\tEventEmitter.subscribeOnce(this, eventName, listener);\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Unsubscribes an event listener\n\t * @param {object} target\n\t * @param {string} eventName\n\t * @param {Function<BaseEvent>} listener\n\t * @param options\n\t */\n\tstatic unsubscribe(\n\t\ttarget: Object,\n\t\teventName: string,\n\t\tlistener: (event: BaseEvent) => void,\n\t\toptions?: {\n\t\t\tuseGlobalNaming?: boolean\n\t\t}\n\t): void\n\t{\n\t\tif (Type.isString(target))\n\t\t{\n\t\t\tlistener = eventName;\n\t\t\teventName = target;\n\t\t\ttarget = this.GLOBAL_TARGET;\n\t\t}\n\n\t\teventName = this.normalizeEventName(eventName);\n\t\tif (!Type.isStringFilled(eventName))\n\t\t{\n\t\t\tthrow new TypeError(`The \"eventName\" argument must be a string.`);\n\t\t}\n\n\t\tif (!Type.isFunction(listener))\n\t\t{\n\t\t\tthrow new TypeError(\n\t\t\t\t`The \"listener\" argument must be of type Function. Received type ${typeof event}.`\n\t\t\t);\n\t\t}\n\n\t\toptions = Type.isPlainObject(options) ? options : {};\n\n\t\tconst fullEventName = this.resolveEventName(eventName, target, options.useGlobalNaming === true);\n\t\tconst targetInfo = eventStore.get(target);\n\t\tconst listeners = targetInfo && targetInfo.eventsMap.get(fullEventName);\n\t\tconst onceListeners = targetInfo && targetInfo.onceMap.get(fullEventName);\n\n\t\tif (listeners)\n\t\t{\n\t\t\tlisteners.delete(listener);\n\t\t}\n\n\t\tif (onceListeners)\n\t\t{\n\t\t\tconst once = onceListeners.get(listener);\n\t\t\tif (once)\n\t\t\t{\n\t\t\t\tonceListeners.delete(listener);\n\t\t\t\tlisteners.delete(once);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Unsubscribes an event listener\n\t * @param {string} eventName\n\t * @param {Function<BaseEvent>} listener\n\t * @return {this}\n\t */\n\tunsubscribe(eventName: string, listener: (event: BaseEvent) => void): this\n\t{\n\t\tEventEmitter.unsubscribe(this, eventName, listener);\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Unsubscribes all event listeners\n\t * @param {object} target\n\t * @param {string} eventName\n\t * @param options\n\t */\n\tstatic unsubscribeAll(\n\t\ttarget: Object,\n\t\teventName?: string,\n\t\toptions?: {\n\t\t\tuseGlobalNaming?: boolean\n\t\t}\n\t): void\n\t{\n\t\tif (Type.isString(target))\n\t\t{\n\t\t\teventName = target;\n\t\t\ttarget = this.GLOBAL_TARGET;\n\t\t}\n\n\t\tif (Type.isStringFilled(eventName))\n\t\t{\n\t\t\tconst targetInfo = eventStore.get(target);\n\t\t\tif (targetInfo)\n\t\t\t{\n\t\t\t\toptions = Type.isPlainObject(options) ? options : {};\n\t\t\t\tconst fullEventName = this.resolveEventName(eventName, target, options.useGlobalNaming === true);\n\t\t\t\ttargetInfo.eventsMap.delete(fullEventName);\n\t\t\t\ttargetInfo.onceMap.delete(fullEventName)\n\t\t\t}\n\t\t}\n\t\telse if (Type.isNil(eventName))\n\t\t{\n\t\t\tif (target === this.GLOBAL_TARGET)\n\t\t\t{\n\t\t\t\tconsole.error('You cannot unsubscribe all global listeners.');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\teventStore.delete(target);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Unsubscribes all event listeners\n\t * @param {string} [eventName]\n\t */\n\tunsubscribeAll(eventName?: string): void\n\t{\n\t\tEventEmitter.unsubscribeAll(this, eventName);\n\t}\n\n\t/**\n\t *\n\t * @param {object} target\n\t * @param {string} eventName\n\t * @param {BaseEvent | any} event\n\t * @param {object} options\n\t * @returns {Array}\n\t */\n\tstatic emit(\n\t\ttarget: Object,\n\t\teventName: string,\n\t\tevent?: BaseEvent | {[key: string]: any},\n\t\toptions?: {\n\t\t\tcloneData?: boolean,\n\t\t\tthisArg?: Object,\n\t\t\tuseGlobalNaming?: boolean\n\t\t}\n\t): this\n\t{\n\t\tif (Type.isString(target))\n\t\t{\n\t\t\toptions = event;\n\t\t\tevent = eventName;\n\t\t\teventName = target;\n\t\t\ttarget = this.GLOBAL_TARGET;\n\t\t}\n\n\t\tif (!Type.isObject(target))\n\t\t{\n\t\t\tthrow new TypeError(`The \"target\" argument must be an object.`);\n\t\t}\n\n\t\teventName = this.normalizeEventName(eventName);\n\t\tif (!Type.isStringFilled(eventName))\n\t\t{\n\t\t\tthrow new TypeError(`The \"eventName\" argument must be a string.`);\n\t\t}\n\n\t\toptions = Type.isPlainObject(options) ? options : {};\n\n\t\tconst fullEventName = this.resolveEventName(eventName, target, options.useGlobalNaming === true);\n\t\tconst globalEvents = eventStore.get(this.GLOBAL_TARGET);\n\t\tconst globalListeners = (globalEvents && globalEvents.eventsMap.get(fullEventName)) || new Map();\n\n\t\tlet targetListeners = new Set();\n\t\tif (target !== this.GLOBAL_TARGET)\n\t\t{\n\t\t\tconst targetEvents = eventStore.get(target);\n\t\t\ttargetListeners = (targetEvents && targetEvents.eventsMap.get(fullEventName)) || new Map();\n\t\t}\n\n\t\tconst listeners = [...globalListeners.values(), ...targetListeners.values()];\n\t\tlisteners.sort(function(a, b) {\n\t\t\treturn a.sort - b.sort;\n\t\t});\n\n\t\tconst preparedEvent = this.prepareEvent(target, fullEventName, event);\n\t\tconst result = [];\n\n\t\tfor (let i = 0; i < listeners.length; i++)\n\t\t{\n\t\t\tif (preparedEvent.isImmediatePropagationStopped())\n\t\t\t{\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tconst { listener, options: listenerOptions } = listeners[i];\n\n\t\t\t//A previous listener could remove a current listener.\n\t\t\tif (globalListeners.has(listener) || targetListeners.has(listener))\n\t\t\t{\n\t\t\t\tlet listenerResult;\n\t\t\t\tif (listenerOptions.compatMode)\n\t\t\t\t{\n\t\t\t\t\tlet params = [];\n\t\t\t\t\tconst compatData = preparedEvent.getCompatData();\n\t\t\t\t\tif (compatData !== null)\n\t\t\t\t\t{\n\t\t\t\t\t\tparams = options.cloneData === true ? Runtime.clone(compatData) : compatData\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tparams = [preparedEvent];\n\t\t\t\t\t}\n\n\t\t\t\t\tconst context = Type.isUndefined(options.thisArg) ? target : options.thisArg;\n\t\t\t\t\tlistenerResult = listener.apply(context, params);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tlistenerResult =\n\t\t\t\t\t\tType.isUndefined(options.thisArg)\n\t\t\t\t\t\t\t? listener(preparedEvent)\n\t\t\t\t\t\t\t: listener.call(options.thisArg, preparedEvent)\n\t\t\t\t\t;\n\t\t\t\t}\n\n\t\t\t\tresult.push(listenerResult);\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t/**\n\t * Emits specified event with specified event object\n\t * @param {string} eventName\n\t * @param {BaseEvent | any} event\n\t * @return {this}\n\t */\n\temit(eventName: string, event?: BaseEvent | {[key: string]: any}): this\n\t{\n\t\tEventEmitter.emit(this, eventName, event);\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Emits global event and returns a promise that is resolved when\n\t * all promise returned from event handlers are resolved,\n\t * or rejected when at least one of the returned promise is rejected.\n\t * Importantly. You can return any value from synchronous handlers, not just promise\n\t * @param {object} target\n\t * @param {string} eventName\n\t * @param {BaseEvent | any} event\n\t * @return {Promise<Array>}\n\t */\n\tstatic emitAsync(target: Object, eventName: string, event?: BaseEvent | {[key: string]: any}): Promise<Array>\n\t{\n\t\tif (Type.isString(target))\n\t\t{\n\t\t\tevent = eventName;\n\t\t\teventName = target;\n\t\t\ttarget = this.GLOBAL_TARGET;\n\t\t}\n\n\t\treturn Promise.all(this.emit(target, eventName, event));\n\t}\n\n\t/**\n\t * Emits event and returns a promise that is resolved when\n\t * all promise returned from event handlers are resolved,\n\t * or rejected when at least one of the returned promise is rejected.\n\t * Importantly. You can return any value from synchronous handlers, not just promise\n\t * @param {string} eventName\n\t * @param {BaseEvent|any} event\n\t * @return {Promise<Array>}\n\t */\n\temitAsync(eventName: string, event?: BaseEvent | {[key: string]: any}): Promise<Array>\n\t{\n\t\treturn EventEmitter.emitAsync(this, eventName, event);\n\t}\n\n\t/**\n\t * @private\n\t * @param {object} target\n\t * @param {string} eventName\n\t * @param {BaseEvent|any} event\n\t * @returns {BaseEvent}\n\t */\n\tstatic prepareEvent(\n\t\ttarget: Object,\n\t\teventName: string,\n\t\tevent?: BaseEvent | {[key: string]: any},\n\t): BaseEvent\n\t{\n\t\tlet preparedEvent = event;\n\t\tif (!(event instanceof BaseEvent))\n\t\t{\n\t\t\tpreparedEvent = new BaseEvent();\n\t\t\tpreparedEvent.setData(event);\n\t\t}\n\n\t\tpreparedEvent.setTarget(this.isEventEmitter(target) ? target[targetProperty] : target);\n\t\tpreparedEvent.setType(eventName);\n\n\t\treturn preparedEvent;\n\t}\n\n\t/**\n\t * @private\n\t * @returns {number}\n\t */\n\tstatic getNextSequenceValue(): number\n\t{\n\t\treturn this.sequenceValue++;\n\t}\n\n\t/**\n\t * Sets max global events listeners count\n\t * Event.EventEmitter.setMaxListeners(10) - sets the default value for all events (global target)\n\t * Event.EventEmitter.setMaxListeners(\"onClose\", 10) - sets the value for onClose event (global target)\n\t * Event.EventEmitter.setMaxListeners(obj, 10) - sets the default value for all events (obj target)\n\t * Event.EventEmitter.setMaxListeners(obj, \"onClose\", 10); - sets the value for onClose event (obj target)\n\t * @return {void}\n\t * @param args\n\t */\n\tstatic setMaxListeners(...args): void\n\t{\n\t\tlet target = this.GLOBAL_TARGET;\n\t\tlet eventName = null;\n\t\tlet count = undefined;\n\n\t\tif (args.length === 1)\n\t\t{\n\t\t\tcount = args[0];\n\t\t}\n\t\telse if (args.length === 2)\n\t\t{\n\t\t\tif (Type.isString(args[0]))\n\t\t\t{\n\t\t\t\t[eventName, count] = args;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t[target, count] = args;\n\t\t\t}\n\t\t}\n\t\telse if (args.length >= 3)\n\t\t{\n\t\t\t[target, eventName, count] = args;\n\t\t}\n\n\t\tif (!Type.isObject(target))\n\t\t{\n\t\t\tthrow new TypeError(`The \"target\" argument must be an object.`);\n\t\t}\n\n\t\tif (eventName !== null && !Type.isStringFilled(eventName))\n\t\t{\n\t\t\tthrow new TypeError(`The \"eventName\" argument must be a string.`);\n\t\t}\n\n\t\tif (!Type.isNumber(count) || count < 0)\n\t\t{\n\t\t\tthrow new TypeError(\n\t\t\t\t`The value of \"count\" is out of range. It must be a non-negative number. Received ${count}.`\n\t\t\t);\n\t\t}\n\n\t\tconst targetInfo = eventStore.getOrAdd(target);\n\t\tif (Type.isStringFilled(eventName))\n\t\t{\n\t\t\tconst fullEventName = this.resolveEventName(eventName, target);\n\t\t\ttargetInfo.eventsMaxListeners.set(fullEventName, count);\n\t\t}\n\t\telse\n\t\t{\n\t\t\ttargetInfo.maxListeners = count;\n\t\t}\n\t}\n\n\t/**\n\t * Sets max events listeners count\n\t * this.setMaxListeners(10) - sets the default value for all events\n\t * this.setMaxListeners(\"onClose\", 10) sets the value for onClose event\n\t * @return {this}\n\t * @param args\n\t */\n\tsetMaxListeners(...args): this\n\t{\n\t\tEventEmitter.setMaxListeners(this, ...args);\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Returns max event listeners count\n\t * @param {object} target\n\t * @param {string} [eventName]\n\t * @returns {number}\n\t */\n\tstatic getMaxListeners(target: Object, eventName?: string): number\n\t{\n\t\tif (Type.isString(target))\n\t\t{\n\t\t\teventName = target;\n\t\t\ttarget = this.GLOBAL_TARGET;\n\t\t}\n\t\telse if (Type.isNil(target))\n\t\t{\n\t\t\ttarget = this.GLOBAL_TARGET;\n\t\t}\n\n\t\tif (!Type.isObject(target))\n\t\t{\n\t\t\tthrow new TypeError(`The \"target\" argument must be an object.`);\n\t\t}\n\n\t\tconst targetInfo = eventStore.get(target);\n\t\tif (targetInfo)\n\t\t{\n\t\t\tlet maxListeners = targetInfo.maxListeners;\n\t\t\tif (Type.isStringFilled(eventName))\n\t\t\t{\n\t\t\t\tconst fullEventName = this.resolveEventName(eventName, target);\n\t\t\t\tmaxListeners = targetInfo.eventsMaxListeners.get(fullEventName) || maxListeners;\n\t\t\t}\n\n\t\t\treturn maxListeners;\n\t\t}\n\n\t\treturn this.DEFAULT_MAX_LISTENERS;\n\t}\n\n\t/**\n\t * Returns max event listeners count\n\t * @param {string} [eventName]\n\t * @returns {number}\n\t */\n\tgetMaxListeners(eventName?: string): number\n\t{\n\t\treturn EventEmitter.getMaxListeners(this, eventName);\n\t}\n\n\t/**\n\t * Adds or subtracts max listeners count\n\t * Event.EventEmitter.addMaxListeners() - adds one max listener for all events of global target\n\t * Event.EventEmitter.addMaxListeners(3) - adds three max listeners for all events of global target\n\t * Event.EventEmitter.addMaxListeners(-1) - subtracts one max listener for all events of global target\n\t * Event.EventEmitter.addMaxListeners('onClose') - adds one max listener for onClose event of global target\n\t * Event.EventEmitter.addMaxListeners('onClose', 2) - adds two max listeners for onClose event of global target\n\t * Event.EventEmitter.addMaxListeners('onClose', -1) - subtracts one max listener for onClose event of global target\n\t *\n\t * Event.EventEmitter.addMaxListeners(obj) - adds one max listener for all events of 'obj' target\n\t * Event.EventEmitter.addMaxListeners(obj, 3) - adds three max listeners for all events of 'obj' target\n\t * Event.EventEmitter.addMaxListeners(obj, -1) - subtracts one max listener for all events of 'obj' target\n\t * Event.EventEmitter.addMaxListeners(obj, 'onClose') - adds one max listener for onClose event of 'obj' target\n\t * Event.EventEmitter.addMaxListeners(obj, 'onClose', 2) - adds two max listeners for onClose event of 'obj' target\n\t * Event.EventEmitter.addMaxListeners(obj, 'onClose', -1) - subtracts one max listener for onClose event of 'obj' target\n\t * @param args\n\t * @returns {number}\n\t */\n\tstatic addMaxListeners(...args)\n\t{\n\t\tconst [target, eventName, increment] = this.destructMaxListenersArgs(...args);\n\t\tconst maxListeners = Math.max(this.getMaxListeners(target, eventName) + increment, 0);\n\t\tif (Type.isStringFilled(eventName))\n\t\t{\n\t\t\tEventEmitter.setMaxListeners(target, eventName, maxListeners);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tEventEmitter.setMaxListeners(target, maxListeners);\n\t\t}\n\n\t\treturn maxListeners;\n\t}\n\n\t/**\n\t * Increases max listeners count\n\t *\n\t * Event.EventEmitter.incrementMaxListeners() - adds one max listener for all events of global target\n\t * Event.EventEmitter.incrementMaxListeners(3) - adds three max listeners for all events of global target\n\t * Event.EventEmitter.incrementMaxListeners('onClose') - adds one max listener for onClose event of global target\n\t * Event.EventEmitter.incrementMaxListeners('onClose', 2) - adds two max listeners for onClose event of global target\n\t *\n\t * Event.EventEmitter.incrementMaxListeners(obj) - adds one max listener for all events of 'obj' target\n\t * Event.EventEmitter.incrementMaxListeners(obj, 3) - adds three max listeners for all events of 'obj' target\n\t * Event.EventEmitter.incrementMaxListeners(obj, 'onClose') - adds one max listener for onClose event of 'obj' target\n\t * Event.EventEmitter.incrementMaxListeners(obj, 'onClose', 2) - adds two max listeners for onClose event of 'obj' target\n\t */\n\tstatic incrementMaxListeners(...args): number\n\t{\n\t\tconst [target, eventName, increment] = this.destructMaxListenersArgs(...args);\n\n\t\treturn this.addMaxListeners(target, eventName, Math.abs(increment));\n\t}\n\n\t/**\n\t * Increases max listeners count\n\t * this.incrementMaxListeners() - adds one max listener for all events\n\t * this.incrementMaxListeners(3) - adds three max listeners for all events\n\t * this.incrementMaxListeners('onClose') - adds one max listener for onClose event\n\t * this.incrementMaxListeners('onClose', 2) - adds two max listeners for onClose event\n\t */\n\tincrementMaxListeners(...args): number\n\t{\n\t\treturn EventEmitter.incrementMaxListeners(this, ...args);\n\t}\n\n\t/**\n\t * Decreases max listeners count\n\t *\n\t * Event.EventEmitter.decrementMaxListeners() - subtracts one max listener for all events of global target\n\t * Event.EventEmitter.decrementMaxListeners(3) - subtracts three max listeners for all events of global target\n\t * Event.EventEmitter.decrementMaxListeners('onClose') - subtracts one max listener for onClose event of global target\n\t * Event.EventEmitter.decrementMaxListeners('onClose', 2) - subtracts two max listeners for onClose event of global target\n\t *\n\t * Event.EventEmitter.decrementMaxListeners(obj) - subtracts one max listener for all events of 'obj' target\n\t * Event.EventEmitter.decrementMaxListeners(obj, 3) - subtracts three max listeners for all events of 'obj' target\n\t * Event.EventEmitter.decrementMaxListeners(obj, 'onClose') - subtracts one max listener for onClose event of 'obj' target\n\t * Event.EventEmitter.decrementMaxListeners(obj, 'onClose', 2) - subtracts two max listeners for onClose event of 'obj' target\n\t */\n\tstatic decrementMaxListeners(...args): number\n\t{\n\t\tconst [target, eventName, increment] = this.destructMaxListenersArgs(...args);\n\n\t\treturn this.addMaxListeners(target, eventName, -Math.abs(increment));\n\t}\n\n\t/**\n\t * Increases max listeners count\n\t * this.decrementMaxListeners() - subtracts one max listener for all events\n\t * this.decrementMaxListeners(3) - subtracts three max listeners for all events\n\t * this.decrementMaxListeners('onClose') - subtracts one max listener for onClose event\n\t * this.decrementMaxListeners('onClose', 2) - subtracts two max listeners for onClose event\n\t */\n\tdecrementMaxListeners(...args): number\n\t{\n\t\treturn EventEmitter.decrementMaxListeners(this, ...args);\n\t}\n\n\t/**\n\t * @private\n\t * @param {Array} args\n\t * @returns Array\n\t */\n\tstatic destructMaxListenersArgs(...args)\n\t{\n\t\tlet eventName = null;\n\t\tlet increment = 1;\n\t\tlet target = this.GLOBAL_TARGET;\n\n\t\tif (args.length === 1)\n\t\t{\n\t\t\tif (Type.isNumber(args[0]))\n\t\t\t{\n\t\t\t\tincrement = args[0];\n\t\t\t}\n\t\t\telse if (Type.isString(args[0]))\n\t\t\t{\n\t\t\t\teventName = args[0];\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\ttarget = args[0];\n\t\t\t}\n\t\t}\n\t\telse if (args.length === 2)\n\t\t{\n\t\t\tif (Type.isString(args[0]))\n\t\t\t{\n\t\t\t\t[eventName, increment] = args;\n\t\t\t}\n\t\t\telse if (Type.isString(args[1]))\n\t\t\t{\n\t\t\t\t[target, eventName] = args;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t[target, increment] = args;\n\t\t\t}\n\t\t}\n\t\telse if (args.length >= 3)\n\t\t{\n\t\t\t[target, eventName, increment] = args;\n\t\t}\n\n\t\tif (!Type.isObject(target))\n\t\t{\n\t\t\tthrow new TypeError(`The \"target\" argument must be an object.`);\n\t\t}\n\n\t\tif (eventName !== null && !Type.isStringFilled(eventName))\n\t\t{\n\t\t\tthrow new TypeError(`The \"eventName\" argument must be a string.`);\n\t\t}\n\n\t\tif (!Type.isNumber(increment))\n\t\t{\n\t\t\tthrow new TypeError(`The value of \"increment\" must be a number.`);\n\t\t}\n\n\t\treturn [target, eventName, increment];\n\t}\n\n\t/**\n\t * Gets listeners list for a specified event\n\t * @param {object} target\n\t * @param {string} eventName\n\t */\n\tstatic getListeners(target: Object, eventName: string): Function[]\n\t{\n\t\tif (Type.isString(target))\n\t\t{\n\t\t\teventName = target;\n\t\t\ttarget = this.GLOBAL_TARGET;\n\t\t}\n\n\t\tif (!Type.isObject(target))\n\t\t{\n\t\t\tthrow new TypeError(`The \"target\" argument must be an object.`);\n\t\t}\n\n\t\teventName = this.normalizeEventName(eventName);\n\t\tif (!Type.isStringFilled(eventName))\n\t\t{\n\t\t\tthrow new TypeError(`The \"eventName\" argument must be a string.`);\n\t\t}\n\n\t\tconst targetInfo = eventStore.get(target);\n\t\tif (!targetInfo)\n\t\t{\n\t\t\treturn new Map();\n\t\t}\n\n\t\tconst fullEventName = this.resolveEventName(eventName, target);\n\t\treturn targetInfo.eventsMap.get(fullEventName) || new Map();\n\t}\n\n\t/**\n\t * Gets listeners list for specified event\n\t * @param {string} eventName\n\t */\n\tgetListeners(eventName: string): Function[]\n\t{\n\t\treturn EventEmitter.getListeners(this, eventName);\n\t}\n\n\t/**\n\t * Returns a full event name with namespace\n\t * @param {string} eventName\n\t * @returns {string}\n\t */\n\tgetFullEventName(eventName: string)\n\t{\n\t\tif (!Type.isStringFilled(eventName))\n\t\t{\n\t\t\tthrow new TypeError(`The \"eventName\" argument must be a string.`);\n\t\t}\n\n\t\treturn EventEmitter.makeFullEventName(this.getEventNamespace(), eventName);\n\t}\n\n\t/**\n\t * Registers aliases (old event names for BX.onCustomEvent)\n\t * @param aliases\n\t */\n\tstatic registerAliases(aliases: { [alias: string]: { eventName: string, namespace: string } })\n\t{\n\t\taliases = this.normalizeAliases(aliases);\n\n\t\tObject.keys(aliases).forEach((alias) => {\n\t\t\taliasStore.set(alias, {\n\t\t\t\teventName: aliases[alias].eventName,\n\t\t\t\tnamespace: aliases[alias].namespace\n\t\t\t});\n\t\t});\n\n\t\tEventEmitter.mergeEventAliases(aliases);\n\t}\n\n\t/**\n\t * @private\n\t * @param aliases\n\t */\n\tstatic normalizeAliases(aliases: { [alias: string]: { eventName: string, namespace: string } })\n\t{\n\t\tif (!Type.isPlainObject(aliases))\n\t\t{\n\t\t\tthrow new TypeError(`The \"aliases\" argument must be an object.`);\n\t\t}\n\n\t\tconst result = Object.create(null);\n\t\tfor (let alias in aliases)\n\t\t{\n\t\t\tif (!Type.isStringFilled(alias))\n\t\t\t{\n\t\t\t\tthrow new TypeError(`The alias must be an non-empty string.`);\n\t\t\t}\n\n\t\t\tconst options = aliases[alias];\n\t\t\tif (!options || !Type.isStringFilled(options.eventName) || !Type.isStringFilled(options.namespace))\n\t\t\t{\n\t\t\t\tthrow new TypeError(`The alias options must set the \"eventName\" and the \"namespace\".`);\n\t\t\t}\n\n\t\t\talias = this.normalizeEventName(alias);\n\n\t\t\tresult[alias] = {\n\t\t\t\teventName: options.eventName,\n\t\t\t\tnamespace: options.namespace\n\t\t\t};\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t/**\n\t * @private\n\t */\n\tstatic mergeEventAliases(aliases)\n\t{\n\t\tconst globalEvents = eventStore.get(this.GLOBAL_TARGET);\n\t\tif (!globalEvents)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tObject.keys(aliases).forEach((alias) => {\n\t\t\tconst options = aliases[alias];\n\t\t\talias = this.normalizeEventName(alias);\n\t\t\tconst fullEventName = this.makeFullEventName(options.namespace, options.eventName);\n\n\t\t\tconst aliasListeners = globalEvents.eventsMap.get(alias);\n\t\t\tif (aliasListeners)\n\t\t\t{\n\t\t\t\tconst listeners = globalEvents.eventsMap.get(fullEventName) || new Map();\n\t\t\t\tglobalEvents.eventsMap.set(fullEventName, new Map([...listeners, ...aliasListeners]));\n\t\t\t\tglobalEvents.eventsMap.delete(alias);\n\t\t\t}\n\n\t\t\tconst aliasOnceListeners = globalEvents.onceMap.get(alias);\n\t\t\tif (aliasOnceListeners)\n\t\t\t{\n\t\t\t\tconst onceListeners = globalEvents.onceMap.get(fullEventName) || new Map();\n\t\t\t\tglobalEvents.onceMap.set(fullEventName, new Map([...onceListeners, ...aliasOnceListeners]));\n\t\t\t\tglobalEvents.onceMap.delete(alias);\n\t\t\t}\n\n\t\t\tconst aliasMaxListeners = globalEvents.eventsMaxListeners.get(alias);\n\t\t\tif (aliasMaxListeners)\n\t\t\t{\n\t\t\t\tconst eventMaxListeners = globalEvents.eventsMaxListeners.get(fullEventName) || 0;\n\t\t\t\tglobalEvents.eventsMaxListeners.set(fullEventName, Math.max(eventMaxListeners, aliasMaxListeners));\n\t\t\t\tglobalEvents.eventsMaxListeners.delete(alias);\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Returns true if the target is an instance of Event.EventEmitter\n\t * @param {object} target\n\t * @returns {boolean}\n\t */\n\tstatic isEventEmitter(target: Object)\n\t{\n\t\treturn Type.isObject(target) && target[isEmitterProperty] === true;\n\t}\n\n\t/**\n\t * @private\n\t * @param {string} eventName\n\t * @returns {string}\n\t */\n\tstatic normalizeEventName(eventName: string)\n\t{\n\t\tif (!Type.isStringFilled(eventName))\n\t\t{\n\t\t\treturn '';\n\t\t}\n\n\t\treturn eventName.toLowerCase();\n\t}\n\n\t/**\n\t * @private\n\t * @param eventName\n\t * @param target\n\t * @param useGlobalNaming\n\t * @returns {string}\n\t */\n\tstatic resolveEventName(eventName: string, target: Object, useGlobalNaming: boolean = false)\n\t{\n\t\teventName = this.normalizeEventName(eventName);\n\t\tif (!Type.isStringFilled(eventName))\n\t\t{\n\t\t\treturn '';\n\t\t}\n\n\t\tif (this.isEventEmitter(target) && useGlobalNaming !== true)\n\t\t{\n\t\t\tif (target.getEventNamespace() !== null && eventName.includes('.'))\n\t\t\t{\n\t\t\t\tconsole.warn(`Possible the wrong event name \"${eventName}\".`);\n\t\t\t}\n\n\t\t\teventName = target.getFullEventName(eventName);\n\t\t}\n\t\telse if (aliasStore.has(eventName))\n\t\t{\n\t\t\tconst { namespace, eventName: actualEventName } = aliasStore.get(eventName);\n\t\t\teventName = this.makeFullEventName(namespace, actualEventName);\n\t\t}\n\n\t\treturn eventName;\n\t}\n\n\t/**\n\t * @private\n\t * @param {string} namespace\n\t * @param {string} eventName\n\t * @returns {string}\n\t */\n\tstatic makeFullEventName(namespace: string, eventName: string)\n\t{\n\t\tconst fullName = Type.isStringFilled(namespace) ? `${namespace}:${eventName}` : eventName;\n\n\t\treturn Type.isStringFilled(fullName) ? fullName.toLowerCase() : '';\n\t}\n}","import Type from '../type';\n\nlet stack: Array<Function> = [];\n/**\n * For compatibility only\n * @type {boolean}\n */\n// eslint-disable-next-line\nexport let isReady = false;\n\nexport default function ready(handler: () => void)\n{\n\tswitch (document.readyState)\n\t{\n\t\tcase 'loading':\n\t\t\tstack.push(handler);\n\t\t\tbreak;\n\t\tcase 'interactive':\n\t\tcase 'complete':\n\t\t\tif (Type.isFunction(handler))\n\t\t\t{\n\t\t\t\thandler();\n\t\t\t}\n\n\t\t\tisReady = true;\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tbreak;\n\t}\n}\n\ndocument.addEventListener('readystatechange', () => {\n\tif (!isReady)\n\t{\n\t\tstack.forEach(ready);\n\t\tstack = [];\n\t}\n});","import bind from './event/bind';\nimport unbind from './event/unbind';\nimport unbindAll from './event/unbind-all';\nimport bindOnce from './event/bind-once';\nimport EventEmitter from './event/event-emitter';\nimport BaseEvent from './event/base-event';\nimport ready from './event/ready';\n\n/**\n * @memberOf BX\n */\nexport default class Event\n{\n\tstatic bind: bind = bind;\n\tstatic bindOnce: bindOnce = bindOnce;\n\tstatic unbind: unbind = unbind;\n\tstatic unbindAll: unbindAll = unbindAll;\n\tstatic ready: ready = ready;\n\n\t/**\n\t * @deprecated use import { EventEmitter } from 'main.core.events'\n\t */\n\tstatic EventEmitter: EventEmitter = EventEmitter;\n\t/**\n\t * @deprecated use import { BaseEvent } from 'main.core.events'\n\t */\n\tstatic BaseEvent: BaseEvent = BaseEvent;\n\n}","import Type from '../lib/type';\nimport Text from '../lib/text';\n\nexport default function encodeAttributeValue(value: any)\n{\n\tif (Type.isPlainObject(value) || Type.isArray(value))\n\t{\n\t\treturn JSON.stringify(value);\n\t}\n\n\treturn Text.encode(Text.decode(value));\n}","import Type from '../lib/type';\nimport Text from '../lib/text';\n\nexport default function decodeAttributeValue(value: any)\n{\n\tif (Type.isString(value))\n\t{\n\t\tconst decodedValue = Text.decode(value);\n\t\tlet result;\n\n\t\ttry\n\t\t{\n\t\t\tresult = JSON.parse(decodedValue);\n\t\t}\n\t\tcatch (e)\n\t\t{\n\t\t\tresult = decodedValue;\n\t\t}\n\n\t\tif (result === decodedValue)\n\t\t{\n\t\t\tif (/^[\\d.]+[.]?\\d+$/.test(result))\n\t\t\t{\n\t\t\t\treturn Number(result);\n\t\t\t}\n\t\t}\n\n\t\tif (result === 'true' || result === 'false')\n\t\t{\n\t\t\treturn Boolean(result);\n\t\t}\n\n\t\treturn result;\n\t}\n\n\treturn value;\n}","export default function getPageScroll(): {scrollTop: number, scrollLeft: number}\n{\n\tconst {documentElement, body} = document;\n\n\tconst scrollTop = Math.max(\n\t\t(window.pageYOffset || 0),\n\t\t(documentElement ? documentElement.scrollTop : 0),\n\t\t(body ? body.scrollTop : 0),\n\t);\n\n\tconst scrollLeft = Math.max(\n\t\t(window.pageXOffset || 0),\n\t\t(documentElement ? documentElement.scrollLeft : 0),\n\t\t(body ? body.scrollLeft : 0),\n\t);\n\n\treturn {scrollTop, scrollLeft};\n}","import Type from './type';\nimport Event from './event';\nimport encodeAttributeValue from '../internal/encode-attribute-value';\nimport decodeAttributeValue from '../internal/decode-attribute-value';\nimport getPageScroll from '../internal/get-page-scroll';\n\n/**\n * @memberOf BX\n */\nexport default class Dom\n{\n\t/**\n\t * Replaces old html element to new html element\n\t * @param oldElement\n\t * @param newElement\n\t */\n\tstatic replace(oldElement: ?HTMLElement, newElement: ?HTMLElement)\n\t{\n\t\tif (Type.isDomNode(oldElement) && Type.isDomNode(newElement))\n\t\t{\n\t\t\tif (Type.isDomNode(oldElement.parentNode))\n\t\t\t{\n\t\t\t\toldElement.parentNode.replaceChild(newElement, oldElement);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Removes element\n\t * @param element\n\t */\n\tstatic remove(element: ?HTMLElement)\n\t{\n\t\tif (Type.isDomNode(element) && Type.isDomNode(element.parentNode))\n\t\t{\n\t\t\telement.parentNode.removeChild(element);\n\t\t}\n\t}\n\n\t/**\n\t * Cleans element\n\t * @param element\n\t */\n\tstatic clean(element: HTMLElement | string)\n\t{\n\t\tif (Type.isDomNode(element))\n\t\t{\n\t\t\twhile (element.childNodes.length > 0)\n\t\t\t{\n\t\t\t\telement.removeChild(element.firstChild);\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (Type.isString(element))\n\t\t{\n\t\t\tDom.clean(document.getElementById(element));\n\t\t}\n\t}\n\n\t/**\n\t * Inserts element before target element\n\t * @param current\n\t * @param target\n\t */\n\tstatic insertBefore(current: ?HTMLElement, target: ?HTMLElement)\n\t{\n\t\tif (Type.isDomNode(current) && Type.isDomNode(target))\n\t\t{\n\t\t\tif (Type.isDomNode(target.parentNode))\n\t\t\t{\n\t\t\t\ttarget.parentNode.insertBefore(current, target);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Inserts element after target element\n\t * @param current\n\t * @param target\n\t */\n\tstatic insertAfter(current: ?HTMLElement, target: ?HTMLElement)\n\t{\n\t\tif (Type.isDomNode(current) && Type.isDomNode(target))\n\t\t{\n\t\t\tif (Type.isDomNode(target.parentNode))\n\t\t\t{\n\t\t\t\tconst parent = target.parentNode;\n\n\t\t\t\tif (Type.isDomNode(target.nextSibling))\n\t\t\t\t{\n\t\t\t\t\tparent.insertBefore(current, target.nextSibling);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tparent.appendChild(current);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Appends element to target element\n\t * @param current\n\t * @param target\n\t */\n\tstatic append(current: ?HTMLElement, target: ?HTMLElement)\n\t{\n\t\tif (Type.isDomNode(current) && Type.isDomNode(target))\n\t\t{\n\t\t\ttarget.appendChild(current);\n\t\t}\n\t}\n\n\t/**\n\t * Prepends element to target element\n\t * @param current\n\t * @param target\n\t */\n\tstatic prepend(current: ?HTMLElement, target: ?HTMLElement)\n\t{\n\t\tif (Type.isDomNode(current) && Type.isDomNode(target))\n\t\t{\n\t\t\tif (Type.isDomNode(target.firstChild))\n\t\t\t{\n\t\t\t\ttarget.insertBefore(current, target.firstChild);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tDom.append(current, target);\n\t\t}\n\t}\n\n\t/**\n\t * Checks that element contains class name or class names\n\t * @param element\n\t * @param className\n\t * @return {Boolean}\n\t */\n\tstatic hasClass(element: any, className: string | Array<string>): boolean\n\t{\n\t\tif (Type.isElementNode(element))\n\t\t{\n\t\t\tif (Type.isString(className))\n\t\t\t{\n\t\t\t\tconst preparedClassName = className.trim();\n\n\t\t\t\tif (preparedClassName.length > 0)\n\t\t\t\t{\n\t\t\t\t\tif (preparedClassName.includes(' '))\n\t\t\t\t\t{\n\t\t\t\t\t\treturn preparedClassName.split(' ')\n\t\t\t\t\t\t\t.every(name => Dom.hasClass(element, name));\n\t\t\t\t\t}\n\n\t\t\t\t\tif ('classList' in element)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn element.classList.contains(preparedClassName);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (\n\t\t\t\t\t\tType.isObject(element.className)\n\t\t\t\t\t\t&& Type.isString(element.className.baseVal)\n\t\t\t\t\t)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn element.getAttribute('class').split(' ')\n\t\t\t\t\t\t\t.some(name => name === preparedClassName);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (Type.isArray(className) && className.length > 0)\n\t\t\t{\n\t\t\t\treturn className.every(name => Dom.hasClass(element, name));\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t * Adds class name\n\t * @param element\n\t * @param className\n\t */\n\tstatic addClass(element: any, className: string | Array<string>)\n\t{\n\t\tif (Type.isElementNode(element))\n\t\t{\n\t\t\tif (Type.isString(className))\n\t\t\t{\n\t\t\t\tconst preparedClassName = className.trim();\n\n\t\t\t\tif (preparedClassName.length > 0)\n\t\t\t\t{\n\t\t\t\t\tif (preparedClassName.includes(' '))\n\t\t\t\t\t{\n\t\t\t\t\t\tDom.addClass(element, preparedClassName.split(' '));\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif ('classList' in element)\n\t\t\t\t\t{\n\t\t\t\t\t\telement.classList.add(preparedClassName);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (\n\t\t\t\t\t\tType.isObject(element.className)\n\t\t\t\t\t\t&& Type.isString(element.className.baseVal)\n\t\t\t\t\t)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (element.className.baseVal === '')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\telement.className.baseVal = preparedClassName;\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst names = element.className.baseVal.split(' ');\n\n\t\t\t\t\t\tif (!names.includes(preparedClassName))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tnames.push(preparedClassName);\n\t\t\t\t\t\t\telement.className.baseVal = names.join(' ').trim();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (Type.isArray(className))\n\t\t\t{\n\t\t\t\tclassName.forEach(name => Dom.addClass(element, name));\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Removes class name\n\t * @param element\n\t * @param className\n\t */\n\tstatic removeClass(element: any, className: string | Array<string>)\n\t{\n\t\tif (Type.isElementNode(element))\n\t\t{\n\t\t\tif (Type.isString(className))\n\t\t\t{\n\t\t\t\tconst preparedClassName = className.trim();\n\n\t\t\t\tif (preparedClassName.length > 0)\n\t\t\t\t{\n\t\t\t\t\tif (preparedClassName.includes(' '))\n\t\t\t\t\t{\n\t\t\t\t\t\tDom.removeClass(element, preparedClassName.split(' '));\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif ('classList' in element)\n\t\t\t\t\t{\n\t\t\t\t\t\telement.classList.remove(preparedClassName);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (\n\t\t\t\t\t\tType.isObject(element.className)\n\t\t\t\t\t\t&& Type.isString(element.className.baseVal)\n\t\t\t\t\t)\n\t\t\t\t\t{\n\t\t\t\t\t\tconst names = element.className.baseVal.split(' ')\n\t\t\t\t\t\t\t.filter(name => name !== preparedClassName);\n\n\t\t\t\t\t\telement.className.baseVal = names.join(' ');\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (Type.isArray(className))\n\t\t\t{\n\t\t\t\tclassName.forEach(name => Dom.removeClass(element, name));\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Toggles class name\n\t * @param element\n\t * @param className\n\t */\n\tstatic toggleClass(element: any, className: string | Array<string>)\n\t{\n\t\tif (Type.isElementNode(element))\n\t\t{\n\t\t\tif (Type.isString(className))\n\t\t\t{\n\t\t\t\tconst preparedClassName = className.trim();\n\n\t\t\t\tif (preparedClassName.length > 0)\n\t\t\t\t{\n\t\t\t\t\tif (preparedClassName.includes(' '))\n\t\t\t\t\t{\n\t\t\t\t\t\tDom.toggleClass(element, preparedClassName.split(' '));\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\telement.classList.toggle(preparedClassName);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (Type.isArray(className))\n\t\t\t{\n\t\t\t\tclassName.forEach(name => Dom.toggleClass(element, name));\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Styles element\n\t */\n\tstatic style(\n\t\telement: ?HTMLElement,\n\t\tprop: ?string | {[key: string]: any},\n\t\tvalue?: any,\n\t): ?string | number | Element\n\t{\n\t\tif (Type.isElementNode(element))\n\t\t{\n\t\t\tif (Type.isNull(prop))\n\t\t\t{\n\t\t\t\telement.removeAttribute('style');\n\t\t\t\treturn element;\n\t\t\t}\n\n\t\t\tif (Type.isPlainObject(prop))\n\t\t\t{\n\t\t\t\tObject.entries(prop).forEach((item) => {\n\t\t\t\t\tconst [currentKey, currentValue] = item;\n\t\t\t\t\tDom.style(element, currentKey, currentValue);\n\t\t\t\t});\n\n\t\t\t\treturn element;\n\t\t\t}\n\n\t\t\tif (Type.isString(prop))\n\t\t\t{\n\t\t\t\tif (Type.isUndefined(value)\n\t\t\t\t\t&& element.nodeType !== Node.DOCUMENT_NODE)\n\t\t\t\t{\n\t\t\t\t\tconst computedStyle = getComputedStyle(element);\n\n\t\t\t\t\tif (prop in computedStyle)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn computedStyle[prop];\n\t\t\t\t\t}\n\n\t\t\t\t\treturn computedStyle.getPropertyValue(prop);\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\tType.isNull(value)\n\t\t\t\t\t|| value === ''\n\t\t\t\t\t|| value === 'null'\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\t// eslint-disable-next-line\n\t\t\t\t\telement.style[prop] = '';\n\t\t\t\t\treturn element;\n\t\t\t\t}\n\n\t\t\t\tif (Type.isString(value) || Type.isNumber(value))\n\t\t\t\t{\n\t\t\t\t\t// eslint-disable-next-line\n\t\t\t\t\telement.style[prop] = value;\n\t\t\t\t\treturn element;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t/**\n\t * Adjusts element\n\t * @param target\n\t * @param data\n\t * @return {*}\n\t */\n\tstatic adjust(\n\t\ttarget: HTMLElement | HTMLDocument,\n\t\tdata: Object = {},\n\t): HTMLElement | HTMLBodyElement\n\t{\n\t\tif (!target.nodeType)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tlet element = target;\n\n\t\tif (target.nodeType === Node.DOCUMENT_NODE)\n\t\t{\n\t\t\telement = target.body;\n\t\t}\n\n\t\tif (Type.isPlainObject(data))\n\t\t{\n\t\t\tif (Type.isPlainObject(data.attrs))\n\t\t\t{\n\t\t\t\tObject.keys(data.attrs).forEach((key) => {\n\t\t\t\t\tif (key === 'class' || key.toLowerCase() === 'classname')\n\t\t\t\t\t{\n\t\t\t\t\t\telement.className = data.attrs[key];\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// eslint-disable-next-line\n\t\t\t\t\tif (data.attrs[key] == '')\n\t\t\t\t\t{\n\t\t\t\t\t\telement.removeAttribute(key);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\telement.setAttribute(key, data.attrs[key]);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (Type.isPlainObject(data.style))\n\t\t\t{\n\t\t\t\tDom.style(element, data.style);\n\t\t\t}\n\n\t\t\tif (Type.isPlainObject(data.props))\n\t\t\t{\n\t\t\t\tObject.keys(data.props).forEach((key) => {\n\t\t\t\t\telement[key] = data.props[key];\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (Type.isPlainObject(data.events))\n\t\t\t{\n\t\t\t\tObject.keys(data.events).forEach((key) => {\n\t\t\t\t\tEvent.bind(element, key, data.events[key]);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (Type.isPlainObject(data.dataset))\n\t\t\t{\n\t\t\t\tObject.keys(data.dataset).forEach((key) => {\n\t\t\t\t\telement.dataset[key] = data.dataset[key];\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (Type.isString(data.children))\n\t\t\t{\n\t\t\t\tdata.children = [data.children];\n\t\t\t}\n\n\t\t\tif (Type.isArray(data.children) && data.children.length > 0)\n\t\t\t{\n\t\t\t\tdata.children.forEach((item) => {\n\t\t\t\t\tif (Type.isDomNode(item))\n\t\t\t\t\t{\n\t\t\t\t\t\tDom.append(item, element);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (Type.isString(item))\n\t\t\t\t\t{\n\t\t\t\t\t\telement.innerHTML += item;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\treturn element;\n\t\t\t}\n\n\t\t\tif ('text' in data && !Type.isNil(data.text))\n\t\t\t{\n\t\t\t\telement.innerText = data.text;\n\t\t\t\treturn element;\n\t\t\t}\n\n\t\t\tif ('html' in data && !Type.isNil(data.html))\n\t\t\t{\n\t\t\t\telement.innerHTML = data.html;\n\t\t\t}\n\t\t}\n\n\t\treturn element;\n\t}\n\n\t/**\n\t * Creates element\n\t * @param tag\n\t * @param data\n\t * @param context\n\t * @return {HTMLElement|HTMLBodyElement}\n\t */\n\tstatic create(\n\t\ttag: string | {[key: string]: any},\n\t\tdata?: Object = {},\n\t\tcontext: HTMLDocument = document,\n\t)\n\t{\n\t\tlet tagName = tag;\n\t\tlet options = data;\n\n\t\tif (Type.isObjectLike(tag))\n\t\t{\n\t\t\toptions = tag;\n\t\t\ttagName = tag.tag;\n\t\t}\n\n\t\treturn Dom.adjust(context.createElement(tagName), options);\n\t}\n\n\t/**\n\t * Shows element\n\t * @param element\n\t */\n\tstatic show(element: ?HTMLElement)\n\t{\n\t\tif (Type.isDomNode(element))\n\t\t{\n\t\t\t// eslint-disable-next-line\n\t\t\telement.hidden = false;\n\t\t}\n\t}\n\n\t/**\n\t * Hides element\n\t * @param element\n\t */\n\tstatic hide(element: ?HTMLElement)\n\t{\n\t\tif (Type.isDomNode(element))\n\t\t{\n\t\t\t// eslint-disable-next-line\n\t\t\telement.hidden = true;\n\t\t}\n\t}\n\n\t/**\n\t * Checks that element is shown\n\t * @param element\n\t * @return {*|boolean}\n\t */\n\tstatic isShown(element: ?HTMLElement)\n\t{\n\t\treturn (\n\t\t\tType.isDomNode(element)\n\t\t\t&& !element.hidden\n\t\t\t&& element.style.getPropertyValue('display') !== 'none'\n\t\t);\n\t}\n\n\t/**\n\t * Toggles element visibility\n\t * @param element\n\t */\n\tstatic toggle(element: HTMLElement)\n\t{\n\t\tif (Type.isDomNode(element))\n\t\t{\n\t\t\tif (Dom.isShown(element))\n\t\t\t{\n\t\t\t\tDom.hide(element);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tDom.show(element);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Gets element position relative page\n\t * @param {HTMLElement} element\n\t * @return {DOMRect}\n\t */\n\tstatic getPosition(element: HTMLElement): DOMRect\n\t{\n\t\tif (Type.isDomNode(element))\n\t\t{\n\t\t\tconst elementRect = element.getBoundingClientRect();\n\t\t\tconst {scrollLeft, scrollTop} = getPageScroll();\n\n\t\t\treturn new DOMRect(\n\t\t\t\t(elementRect.left + scrollLeft),\n\t\t\t\t(elementRect.top + scrollTop),\n\t\t\t\telementRect.width,\n\t\t\t\telementRect.height,\n\t\t\t);\n\t\t}\n\n\t\treturn new DOMRect();\n\t}\n\n\t/**\n\t * Gets element position relative specified element position\n\t * @param {HTMLElement} element\n\t * @param {HTMLElement} relationElement\n\t * @return {DOMRect}\n\t */\n\tstatic getRelativePosition(element: HTMLElement, relationElement: HTMLElement): DOMRect\n\t{\n\t\tif (Type.isDomNode(element) && Type.isDomNode(relationElement))\n\t\t{\n\t\t\tconst elementPosition = Dom.getPosition(element);\n\t\t\tconst relationElementPosition = Dom.getPosition(relationElement);\n\n\t\t\treturn new DOMRect(\n\t\t\t\telementPosition.left - relationElementPosition.left,\n\t\t\t\telementPosition.top - relationElementPosition.top,\n\t\t\t\telementPosition.width,\n\t\t\t\telementPosition.height,\n\t\t\t);\n\t\t}\n\n\t\treturn new DOMRect();\n\t}\n\n\tstatic attr(\n\t\telement: ?HTMLElement,\n\t\tattr: string | {[key: string]: any},\n\t\tvalue?: any,\n\t)\n\t{\n\t\tif (Type.isElementNode(element))\n\t\t{\n\t\t\tif (Type.isString(attr))\n\t\t\t{\n\t\t\t\tif (!Type.isNil(value))\n\t\t\t\t{\n\t\t\t\t\treturn element.setAttribute(attr, encodeAttributeValue(value));\n\t\t\t\t}\n\n\t\t\t\tif (Type.isNull(value))\n\t\t\t\t{\n\t\t\t\t\treturn element.removeAttribute(attr);\n\t\t\t\t}\n\n\t\t\t\treturn decodeAttributeValue(element.getAttribute(attr));\n\t\t\t}\n\n\t\t\tif (Type.isPlainObject(attr))\n\t\t\t{\n\t\t\t\treturn Object.entries(attr).forEach(([attrKey, attrValue]) => {\n\t\t\t\t\tDom.attr(element, attrKey, attrValue);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n}","import Type from './type';\nimport Dom from './dom';\n\nconst UA = navigator.userAgent.toLowerCase();\n\n/**\n * @memberOf BX\n */\nexport default class Browser\n{\n\tstatic isOpera()\n\t{\n\t\treturn UA.includes('opera');\n\t}\n\n\tstatic isIE()\n\t{\n\t\treturn ('attachEvent' in document) && !Browser.isOpera();\n\t}\n\n\tstatic isIE6()\n\t{\n\t\treturn UA.includes('msie 6');\n\t}\n\n\tstatic isIE7()\n\t{\n\t\treturn UA.includes('msie 7');\n\t}\n\n\tstatic isIE8()\n\t{\n\t\treturn UA.includes('msie 8');\n\t}\n\n\tstatic isIE9()\n\t{\n\t\treturn ('documentMode' in document) && document.documentMode >= 9;\n\t}\n\n\tstatic isIE10()\n\t{\n\t\treturn ('documentMode' in document) && document.documentMode >= 10;\n\t}\n\n\tstatic isSafari()\n\t{\n\t\treturn UA.includes('webkit');\n\t}\n\n\tstatic isFirefox()\n\t{\n\t\treturn UA.includes('firefox');\n\t}\n\n\tstatic isChrome()\n\t{\n\t\treturn UA.includes('chrome');\n\t}\n\n\tstatic detectIEVersion()\n\t{\n\t\tif (Browser.isOpera() || Browser.isSafari() || Browser.isFirefox() || Browser.isChrome())\n\t\t{\n\t\t\treturn -1;\n\t\t}\n\n\t\tlet rv = -1;\n\n\t\tif (\n\t\t\t!!(window.MSStream)\n\t\t\t&& !(window.ActiveXObject)\n\t\t\t&& ('ActiveXObject' in window)\n\t\t)\n\t\t{\n\t\t\trv = 11;\n\t\t}\n\t\telse if (Browser.isIE10())\n\t\t{\n\t\t\trv = 10;\n\t\t}\n\t\telse if (Browser.isIE9())\n\t\t{\n\t\t\trv = 9;\n\t\t}\n\t\telse if (Browser.isIE())\n\t\t{\n\t\t\trv = 8;\n\t\t}\n\n\t\tif (rv === -1 || rv === 8)\n\t\t{\n\t\t\tif (navigator.appName === 'Microsoft Internet Explorer')\n\t\t\t{\n\t\t\t\tconst re = new RegExp('MSIE ([0-9]+[.0-9]*)');\n\t\t\t\tconst res = navigator.userAgent.match(re);\n\n\t\t\t\tif (Type.isArrayLike(res) && res.length > 0)\n\t\t\t\t{\n\t\t\t\t\trv = parseFloat(res[1]);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (navigator.appName === 'Netscape')\n\t\t\t{\n\t\t\t\t// Alternative check for IE 11\n\t\t\t\trv = 11;\n\t\t\t\tconst re = new RegExp('Trident/.*rv:([0-9]+[.0-9]*)');\n\n\t\t\t\tif (re.exec(navigator.userAgent) != null)\n\t\t\t\t{\n\t\t\t\t\tconst res = navigator.userAgent.match(re);\n\n\t\t\t\t\tif (Type.isArrayLike(res) && res.length > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\trv = parseFloat(res[1]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn rv;\n\t}\n\n\tstatic isIE11()\n\t{\n\t\treturn Browser.detectIEVersion() >= 11;\n\t}\n\n\tstatic isMac()\n\t{\n\t\treturn UA.includes('macintosh');\n\t}\n\n\tstatic isAndroid()\n\t{\n\t\treturn UA.includes('android');\n\t}\n\n\tstatic isIPad()\n\t{\n\t\treturn UA.includes('ipad;');\n\t}\n\n\tstatic isIPhone()\n\t{\n\t\treturn UA.includes('iphone;');\n\t}\n\n\tstatic isIOS()\n\t{\n\t\treturn Browser.isIPad() || Browser.isIPhone();\n\t}\n\n\tstatic isMobile()\n\t{\n\t\treturn (\n\t\t\tBrowser.isIPhone()\n\t\t\t|| Browser.isIPad()\n\t\t\t|| Browser.isAndroid()\n\t\t\t|| UA.includes('mobile')\n\t\t\t|| UA.includes('touch')\n\t\t);\n\t}\n\n\tstatic isRetina()\n\t{\n\t\treturn window.devicePixelRatio && window.devicePixelRatio >= 2;\n\t}\n\n\tstatic isDoctype(target: any)\n\t{\n\t\tconst doc = target || document;\n\n\t\tif (doc.compatMode)\n\t\t{\n\t\t\treturn (doc.compatMode === 'CSS1Compat');\n\t\t}\n\n\t\treturn (doc.documentElement && doc.documentElement.clientHeight);\n\t}\n\n\tstatic isLocalStorageSupported()\n\t{\n\t\ttry\n\t\t{\n\t\t\tlocalStorage.setItem('test', 'test');\n\t\t\tlocalStorage.removeItem('test');\n\t\t\treturn true;\n\t\t}\n\t\tcatch (e)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tstatic addGlobalClass()\n\t{\n\t\tlet globalClass = 'bx-core';\n\n\t\tif (Dom.hasClass(document.documentElement, globalClass))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (Browser.isIOS())\n\t\t{\n\t\t\tglobalClass += ' bx-ios';\n\t\t}\n\t\telse if (Browser.isMac())\n\t\t{\n\t\t\tglobalClass += ' bx-mac';\n\t\t}\n\t\telse if (Browser.isAndroid())\n\t\t{\n\t\t\tglobalClass += ' bx-android';\n\t\t}\n\n\t\tglobalClass += (Browser.isMobile() ? ' bx-touch' : ' bx-no-touch');\n\t\tglobalClass += (Browser.isRetina() ? ' bx-retina' : ' bx-no-retina');\n\n\t\tlet ieVersion = -1;\n\n\t\tif (/AppleWebKit/.test(navigator.userAgent))\n\t\t{\n\t\t\tglobalClass += ' bx-chrome';\n\t\t}\n\t\telse if (Browser.detectIEVersion() > 0)\n\t\t{\n\t\t\tieVersion = Browser.detectIEVersion();\n\t\t\tglobalClass += ` bx-ie bx-ie${ieVersion}`;\n\n\t\t\tif (ieVersion > 7 && ieVersion < 10 && !Browser.isDoctype())\n\t\t\t{\n\t\t\t\tglobalClass += ' bx-quirks';\n\t\t\t}\n\t\t}\n\t\telse if (/Opera/.test(navigator.userAgent))\n\t\t{\n\t\t\tglobalClass += ' bx-opera';\n\t\t}\n\t\telse if (/Gecko/.test(navigator.userAgent))\n\t\t{\n\t\t\tglobalClass += ' bx-firefox';\n\t\t}\n\n\t\tDom.addClass(document.documentElement, globalClass);\n\t}\n\n\tstatic detectAndroidVersion()\n\t{\n\t\tconst re = new RegExp('Android ([0-9]+[.0-9]*)');\n\n\t\tif (re.exec(navigator.userAgent) != null)\n\t\t{\n\t\t\tconst res = navigator.userAgent.match(re);\n\n\t\t\tif (Type.isArrayLike(res) && res.length > 0)\n\t\t\t{\n\t\t\t\treturn parseFloat(res[1]);\n\t\t\t}\n\t\t}\n\n\t\treturn 0;\n\t}\n\n\tstatic isPropertySupported(jsProperty: any, returnCSSName: any)\n\t{\n\t\tif (jsProperty === '')\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tfunction getCssName(propertyName)\n\t\t{\n\t\t\treturn propertyName.replace(/([A-Z])/g, (...args) => `-${args[1].toLowerCase()}`);\n\t\t}\n\n\t\tfunction getJsName(cssName)\n\t\t{\n\t\t\tconst reg = /(\\\\-([a-z]))/g;\n\n\t\t\tif (reg.test(cssName))\n\t\t\t{\n\t\t\t\treturn cssName.replace(reg, (...args) => args[2].toUpperCase());\n\t\t\t}\n\n\t\t\treturn cssName;\n\t\t}\n\n\t\tconst property = jsProperty.includes('-') ? getJsName(jsProperty) : jsProperty;\n\t\tconst bReturnCSSName = !!returnCSSName;\n\t\tconst ucProperty = property.charAt(0).toUpperCase() + property.slice(1);\n\t\tconst props = ['Webkit', 'Moz', 'O', 'ms'].join(`${ucProperty} `);\n\t\tconst properties = `${property} ${props} ${ucProperty}`.split(' ');\n\n\t\tconst obj = document.body || document.documentElement;\n\n\t\tfor (let i = 0; i < properties.length; i += 1)\n\t\t{\n\t\t\tconst prop = properties[i];\n\n\t\t\tif (obj && 'style' in obj && prop in obj.style)\n\t\t\t{\n\t\t\t\tconst lowerProp = prop.substr(0, prop.length - property.length).toLowerCase();\n\t\t\t\tconst prefix = prop === property ? '' : `-${lowerProp}-`;\n\t\t\t\treturn bReturnCSSName ? prefix + getCssName(property) : prop;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tstatic addGlobalFeatures(features: any)\n\t{\n\t\tif (!Type.isArray(features))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst classNames = [];\n\n\t\tfor (let i = 0; i < features.length; i += 1)\n\t\t{\n\t\t\tconst support = !!Browser.isPropertySupported(features[i]);\n\t\t\tclassNames.push(`bx-${(support ? '' : 'no-')}${features[i].toLowerCase()}`);\n\t\t}\n\n\t\tDom.addClass(document.documentElement, classNames.join(' '));\n\t}\n}","import Type from '../type';\n\nexport default class Cookie\n{\n\t/**\n\t * Gets cookies list for current domain\n\t * @return {object}\n\t */\n\tstatic getList(): {[key: string]: string}\n\t{\n\t\treturn document.cookie\n\t\t\t.split(';')\n\t\t\t.map(item => item.split('='))\n\t\t\t.map(item => item.map(subItem => subItem.trim()))\n\t\t\t.reduce((acc, item) => {\n\t\t\t\tconst [key, value] = item;\n\t\t\t\tacc[decodeURIComponent(key)] = (\n\t\t\t\t\tdecodeURIComponent(value)\n\t\t\t\t);\n\t\t\t\treturn acc;\n\t\t\t}, {});\n\t}\n\n\t/**\n\t * Gets cookie value\n\t * @param {string} name\n\t * @return {*}\n\t */\n\tstatic get(name)\n\t{\n\t\tconst cookiesList = Cookie.getList();\n\n\t\tif (name in cookiesList)\n\t\t{\n\t\t\treturn cookiesList[name];\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\t/**\n\t * Sets cookie\n\t * @param {string} name\n\t * @param {*} value\n\t * @param {object} [options]\n\t */\n\tstatic set(name, value, options = {})\n\t{\n\t\tconst attributes = {\n\t\t\texpires: '',\n\t\t\t...options,\n\t\t};\n\n\t\tif (Type.isNumber(attributes.expires))\n\t\t{\n\t\t\tconst now = (+new Date());\n\t\t\tconst days = attributes.expires;\n\t\t\tconst dayInMs = 864e+5;\n\t\t\tattributes.expires = new Date(now + days * dayInMs);\n\t\t}\n\n\t\tif (Type.isDate(attributes.expires))\n\t\t{\n\t\t\tattributes.expires = attributes.expires.toUTCString();\n\t\t}\n\n\t\tconst safeName = decodeURIComponent(String(name))\n\t\t\t.replace(/%(23|24|26|2B|5E|60|7C)/g, decodeURIComponent)\n\t\t\t.replace(/[()]/g, escape);\n\n\t\tconst safeValue = encodeURIComponent(String(value))\n\t\t\t.replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g, decodeURIComponent);\n\n\t\tconst stringifiedAttributes = Object.keys(attributes)\n\t\t\t.reduce((acc, key) => {\n\t\t\t\tconst attributeValue = attributes[key];\n\n\t\t\t\tif (!attributeValue)\n\t\t\t\t{\n\t\t\t\t\treturn acc;\n\t\t\t\t}\n\n\t\t\t\tif (attributeValue === true)\n\t\t\t\t{\n\t\t\t\t\treturn `${acc}; ${key}`;\n\t\t\t\t}\n\n\t\t\t\t/**\n\t\t\t\t * Considers RFC 6265 section 5.2:\n\t\t\t\t * ...\n\t\t\t\t * 3. If the remaining unparsed-attributes contains a %x3B (';')\n\t\t\t\t * character:\n\t\t\t\t * Consume the characters of the unparsed-attributes up to,\n\t\t\t\t * not including, the first %x3B (';') character.\n\t\t\t\t */\n\t\t\t\treturn `${acc}; ${key}=${attributeValue.split(';')[0]}`;\n\t\t\t}, '');\n\n\t\tdocument.cookie = `${safeName}=${safeValue}${stringifiedAttributes}`;\n\t}\n\n\t/**\n\t * Removes cookie\n\t * @param {string} name\n\t * @param {object} [options]\n\t */\n\tstatic remove(name, options = {})\n\t{\n\t\tCookie.set(name, '', {...options, expires: -1});\n\t}\n}","import Type from '../../type';\n\nexport default function objectToFormData(\n\tsource: {[key: string]: any},\n\tformData: FormData = new FormData(),\n\tpre = null,\n)\n{\n\tif (Type.isUndefined(source))\n\t{\n\t\treturn formData;\n\t}\n\n\tif (Type.isNull(source))\n\t{\n\t\tformData.append(pre, '');\n\t}\n\telse if (Type.isArray(source))\n\t{\n\t\tif (!source.length)\n\t\t{\n\t\t\tconst key = `${pre}[]`;\n\t\t\tformData.append(key, '');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tsource.forEach((value, index) => {\n\t\t\t\tconst key = `${pre}[${index}]`;\n\t\t\t\tobjectToFormData(value, formData, key);\n\t\t\t});\n\t\t}\n\t}\n\telse if (Type.isDate(source))\n\t{\n\t\tformData.append(pre, source.toISOString());\n\t}\n\telse if (Type.isObject(source) && !Type.isFile(source) && !Type.isBlob(source))\n\t{\n\t\tObject.keys(source).forEach((property) => {\n\t\t\tconst value = source[property];\n\t\t\tlet preparedProperty = property;\n\n\t\t\tif (Type.isArray(value))\n\t\t\t{\n\t\t\t\twhile (property.length > 2 && property.lastIndexOf('[]') === property.length - 2)\n\t\t\t\t{\n\t\t\t\t\tpreparedProperty = property.substring(0, property.length - 2);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst key = pre ? `${pre}[${preparedProperty}]` : preparedProperty;\n\t\t\tobjectToFormData(value, formData, key);\n\t\t});\n\t}\n\telse\n\t{\n\t\tformData.append(pre, source);\n\t}\n\n\treturn formData;\n}","import objectToFormData from './internal/convert-object-to-form-data';\n\nexport default class Data\n{\n\t/**\n\t * Converts object to FormData\n\t * @param source\n\t * @return {FormData}\n\t */\n\tstatic convertObjectToFormData(source: {[key: string]: any}): FormData\n\t{\n\t\treturn objectToFormData(source);\n\t}\n}","import Cookie from './http/cookie';\nimport Data from './http/data';\n\n/**\n * @memberOf BX\n */\nexport default class Http\n{\n\tstatic Cookie = Cookie;\n\tstatic Data = Data;\n}","import Type from '../type';\nimport Runtime from '../runtime';\nimport EventEmitter from '../event/event-emitter';\nimport BaseEvent from '../event/base-event';\n\ntype messageParam = string | {[key: string]: string | number};\n\nexport default function message(value: messageParam): string | boolean | void\n{\n\tif (Type.isString(value))\n\t{\n\t\tif (Type.isNil(message[value]))\n\t\t{\n\t\t\t// eslint-disable-next-line\n\t\t\tEventEmitter.emit('onBXMessageNotFound', new BaseEvent({ compatData: [value] }));\n\n\t\t\tif (Type.isNil(message[value]))\n\t\t\t{\n\t\t\t\tRuntime.debug(`message undefined: ${value}`);\n\t\t\t\tmessage[value] = '';\n\t\t\t}\n\t\t}\n\t}\n\n\tif (Type.isPlainObject(value))\n\t{\n\t\tObject.keys(value).forEach((key) => {\n\t\t\tmessage[key] = value[key];\n\t\t});\n\t}\n\n\treturn message[value];\n}\n\nif (\n\t!Type.isNil(window.BX)\n\t&& Type.isFunction(window.BX.message)\n)\n{\n\tObject.keys(window.BX.message).forEach((key) => {\n\t\tmessage({[key]: window.BX.message[key]});\n\t});\n}","import Type from './type';\nimport message from './loc/message';\n\n/**\n * Implements interface for works with language messages\n * @memberOf BX\n */\nexport default class Loc\n{\n\t/**\n\t * Gets message by id\n\t * @param {string} messageId\n\t * @return {?string}\n\t */\n\tstatic getMessage(messageId: string): ?string\n\t{\n\t\treturn message(messageId);\n\t}\n\n\t/**\n\t * Sets message or messages\n\t * @param {string | Object<string, string>} id\n\t * @param {string} [value]\n\t */\n\tstatic setMessage(id: string | {[key: string]: string}, value?: string)\n\t{\n\t\tif (Type.isString(id) && Type.isString(value))\n\t\t{\n\t\t\tmessage({[id]: value});\n\t\t}\n\n\t\tif (Type.isObject(id))\n\t\t{\n\t\t\tmessage(id);\n\t\t}\n\t}\n}","import Type from '../type';\nimport Dom from '../dom';\nimport Event from '../event';\n\ntype renderResult = HTMLDocument | HTMLElement | Element;\n\nconst handlers = new Map();\nconst children = new Map();\nconst getUid = (() => {\n\tlet incremental = 0;\n\treturn () => {\n\t\tincremental += 1;\n\t\treturn incremental;\n\t};\n})();\n\nfunction bindAll(element, handlersMap: Map)\n{\n\thandlersMap.forEach((handler, key) => {\n\t\tconst currentElement = element.querySelector(`[${key}]`);\n\n\t\tif (currentElement)\n\t\t{\n\t\t\tcurrentElement.removeAttribute(key);\n\t\t\tconst event = key.replace(/-(.*)/, '');\n\t\t\tEvent.bind(currentElement, event, handler);\n\t\t\thandlers.delete(key);\n\t\t}\n\t});\n}\n\nfunction replaceChild(element, childrenMap: Map)\n{\n\tchildrenMap.forEach((item, id) => {\n\t\tconst currentElement = element.getElementById(id);\n\n\t\tif (currentElement)\n\t\t{\n\t\t\tDom.replace(currentElement, item);\n\t\t\tchildren.delete(id);\n\t\t}\n\t});\n}\n\nexport default function render(sections: string[], ...substitutions: string[]): renderResult\n{\n\tconst eventAttrRe = /[ |\\t]on(\\w+)=\"$/;\n\tconst uselessSymbolsRe = /[\\r\\n\\t]/g;\n\n\tconst html = substitutions\n\t\t.reduce((acc, item, index) => {\n\t\t\tlet preparedAcc = acc;\n\n\t\t\t// Process event handlers\n\t\t\tconst matches = acc.match(eventAttrRe);\n\n\t\t\tif (matches && Type.isFunction(item))\n\t\t\t{\n\t\t\t\tconst eventName = matches[1].replace(/=['|\"]/, '');\n\t\t\t\tconst attrName = `${eventName}-${getUid()}`;\n\t\t\t\tconst attribute = `${attrName}=\"`;\n\t\t\t\tpreparedAcc = preparedAcc.replace(eventAttrRe, ` ${attribute}`);\n\t\t\t\thandlers.set(attrName, item);\n\t\t\t\tpreparedAcc += (\n\t\t\t\t\tsections[index + 1]\n\t\t\t\t\t\t.replace(uselessSymbolsRe, ' ')\n\t\t\t\t\t\t.replace(/  +/g, ' ')\n\t\t\t\t);\n\t\t\t\treturn preparedAcc;\n\t\t\t}\n\n\t\t\t// Process element\n\t\t\tif (Type.isDomNode(item))\n\t\t\t{\n\t\t\t\tconst childKey = `tmp___${getUid()}`;\n\t\t\t\tchildren.set(childKey, item);\n\t\t\t\tpreparedAcc += `<span id=\"${childKey}\"> </span>`;\n\t\t\t\tpreparedAcc += sections[index + 1];\n\t\t\t\treturn preparedAcc;\n\t\t\t}\n\n\t\t\t// Process array\n\t\t\tif (Type.isArray(item))\n\t\t\t{\n\t\t\t\t[...item].forEach((currentElement) => {\n\t\t\t\t\tif (Type.isDomNode(currentElement))\n\t\t\t\t\t{\n\t\t\t\t\t\tconst childKey = `tmp___${getUid()}`;\n\t\t\t\t\t\tchildren.set(childKey, currentElement);\n\t\t\t\t\t\tpreparedAcc += `<span id=\"${childKey}\"> </span>`;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tpreparedAcc += sections[index + 1];\n\n\t\t\t\treturn preparedAcc;\n\t\t\t}\n\n\t\t\treturn preparedAcc + item + sections[index + 1];\n\t\t}, sections[0]);\n\n\tconst lowercaseHtml = html.trim().toLowerCase();\n\tif (\n\t\tlowercaseHtml.startsWith('<!doctype')\n\t\t|| lowercaseHtml.startsWith('<html')\n\t)\n\t{\n\t\tconst doc = document.implementation.createHTMLDocument('');\n\t\tdoc.documentElement.innerHTML = html;\n\t\treplaceChild(doc, children);\n\t\tbindAll(doc, handlers);\n\t\thandlers.clear();\n\t\treturn doc;\n\t}\n\n\tconst parser = new DOMParser();\n\tconst parsedDocument = parser.parseFromString(html, 'text/html');\n\n\treplaceChild(parsedDocument, children);\n\tbindAll(parsedDocument, handlers);\n\n\tif (\n\t\tparsedDocument.head.children.length\n\t\t&& parsedDocument.body.children.length\n\t)\n\t{\n\t\treturn parsedDocument;\n\t}\n\n\tif (parsedDocument.body.children.length === 1)\n\t{\n\t\tconst [el] = parsedDocument.body.children;\n\t\tDom.remove(el);\n\t\treturn el;\n\t}\n\n\tif (parsedDocument.body.children.length > 1)\n\t{\n\t\treturn [...parsedDocument.body.children].map((item) => {\n\t\t\tDom.remove(item);\n\t\t\treturn item;\n\t\t});\n\t}\n\n\tif (parsedDocument.body.children.length === 0)\n\t{\n\t\tif (parsedDocument.head.children.length === 1)\n\t\t{\n\t\t\tconst [el] = parsedDocument.head.children;\n\t\t\tDom.remove(el);\n\t\t\treturn el;\n\t\t}\n\n\t\tif (parsedDocument.head.children.length > 1)\n\t\t{\n\t\t\treturn [...parsedDocument.head.children].map((item) => {\n\t\t\t\tDom.remove(item);\n\t\t\t\treturn item;\n\t\t\t});\n\t\t}\n\t}\n\n\treturn false;\n}","import Type from './type';\nimport Dom from './dom';\nimport Loc from './loc';\nimport Text from './text';\nimport render from './tag/render';\n\nfunction parseProps(sections: string[], ...substitutions: string[]): {[key: string]: string}\n{\n\treturn substitutions\n\t\t.reduce((acc, item, index) => {\n\t\t\tconst nextSectionIndex = index + 1;\n\n\t\t\tif (!Type.isPlainObject(item) && !Type.isArray(item))\n\t\t\t{\n\t\t\t\treturn acc + item + sections[nextSectionIndex];\n\t\t\t}\n\n\t\t\treturn `${acc}__s${index}${sections[nextSectionIndex]}`;\n\t\t}, sections[0])\n\t\t.replace(/[\\r\\t]/gm, '')\n\t\t.split(';\\n')\n\t\t.map(item => item.replace(/\\n/, ''))\n\t\t.reduce((acc, item) => {\n\t\t\tif (item !== '')\n\t\t\t{\n\t\t\t\tconst matches = item.match(/^[\\w-. ]+:/);\n\t\t\t\tconst splitted = item.split(/^[\\w-. ]+:/);\n\t\t\t\tconst key = matches[0].replace(':', '').trim();\n\t\t\t\tconst value = splitted[1].trim();\n\t\t\t\tconst substitutionPlaceholderExp = /^__s\\d+/;\n\n\t\t\t\tif (substitutionPlaceholderExp.test(value))\n\t\t\t\t{\n\t\t\t\t\tacc[key] = substitutions[value.replace('__s', '')];\n\t\t\t\t\treturn acc;\n\t\t\t\t}\n\n\t\t\t\tacc[key] = value;\n\t\t\t}\n\n\t\t\treturn acc;\n\t\t}, {});\n}\n\n/**\n * @memberOf BX\n */\nexport default class Tag\n{\n\t/**\n\t * Encodes all substitutions\n\t * @param sections\n\t * @param substitutions\n\t * @return {string}\n\t */\n\tstatic safe(sections: string[], ...substitutions: string[])\n\t{\n\t\treturn substitutions.reduce((acc, item, index) => (\n\t\t\tacc + Text.encode(item) + sections[index + 1]\n\t\t), sections[0]);\n\t}\n\n\t/**\n\t * Decodes all substitutions\n\t * @param sections\n\t * @param substitutions\n\t * @return {string}\n\t */\n\tstatic unsafe(sections, ...substitutions)\n\t{\n\t\treturn substitutions.reduce((acc, item, index) => (\n\t\t\tacc + Text.decode(item) + sections[index + 1]\n\t\t), sections[0]);\n\t}\n\n\t/**\n\t * Adds styles to specified element\n\t * @param {HTMLElement} element\n\t * @return {Function}\n\t */\n\tstatic style(element: HTMLElement): Function\n\t{\n\t\tif (!Type.isDomNode(element))\n\t\t{\n\t\t\tthrow new Error('element is not HTMLElement');\n\t\t}\n\n\t\treturn function styleTagHandler(...args) {\n\t\t\tDom.style(element, parseProps(...args));\n\t\t};\n\t}\n\n\t/**\n\t * Replace all messages identifiers to real messages\n\t * @param sections\n\t * @param substitutions\n\t * @return {string}\n\t */\n\tstatic message(sections: string[], ...substitutions: string[]): string\n\t{\n\t\treturn substitutions.reduce((acc, item, index) => (\n\t\t\tacc + Loc.getMessage(item) + sections[index + 1]\n\t\t), sections[0]);\n\t}\n\n\tstatic render = render;\n\n\t/**\n\t * Adds attributes to specified element\n\t * @param element\n\t * @return {Function}\n\t */\n\tstatic attrs(element: HTMLElement)\n\t{\n\t\tif (!Type.isDomNode(element))\n\t\t{\n\t\t\tthrow new Error('element is not HTMLElement');\n\t\t}\n\n\t\treturn function attrsTagHandler(...args): string {\n\t\t\tDom.attr(element, parseProps(...args));\n\t\t};\n\t}\n\n\tstatic attr = Tag.attrs;\n}","import Type from '../type';\n\nfunction getParser(format)\n{\n\tswitch (format)\n\t{\n\t\tcase 'index':\n\t\t\treturn (sourceKey, value, accumulator) => {\n\t\t\t\tconst result = /\\[(\\w*)\\]$/.exec(sourceKey);\n\t\t\t\tconst key = sourceKey.replace(/\\[\\w*\\]$/, '');\n\n\t\t\t\tif (Type.isNil(result))\n\t\t\t\t{\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (Type.isUndefined(accumulator[key]))\n\t\t\t\t{\n\t\t\t\t\taccumulator[key] = {};\n\t\t\t\t}\n\n\t\t\t\taccumulator[key][result[1]] = value;\n\t\t\t};\n\t\tcase 'bracket':\n\t\t\treturn (sourceKey, value, accumulator) => {\n\t\t\t\tconst result = /(\\[\\])$/.exec(sourceKey);\n\t\t\t\tconst key = sourceKey.replace(/\\[\\]$/, '');\n\n\t\t\t\tif (Type.isNil(result))\n\t\t\t\t{\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (Type.isUndefined(accumulator[key]))\n\t\t\t\t{\n\t\t\t\t\taccumulator[key] = [value];\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\taccumulator[key] = [].concat(accumulator[key], value);\n\t\t\t};\n\t\tdefault:\n\t\t\treturn (sourceKey, value, accumulator) => {\n\t\t\t\tconst key = sourceKey.replace(/\\[\\]$/, '');\n\t\t\t\taccumulator[key] = value;\n\t\t\t};\n\t}\n}\n\nfunction getKeyFormat(key)\n{\n\tif (/^\\w+\\[([\\w]+)\\]$/.test(key))\n\t{\n\t\treturn 'index';\n\t}\n\n\tif (/^\\w+\\[\\]$/.test(key))\n\t{\n\t\treturn 'bracket';\n\t}\n\n\treturn 'default';\n}\n\nfunction parseQuery(input)\n{\n\tif (!Type.isString(input))\n\t{\n\t\treturn {};\n\t}\n\n\tconst url = input.trim().replace(/^[?#&]/, '');\n\n\tif (!url)\n\t{\n\t\treturn {};\n\t}\n\n\treturn url.split('&')\n\t\t.reduce((acc, param) => {\n\t\t\tconst [key, value] = param.replace(/\\+/g, ' ').split('=');\n\t\t\tconst keyFormat = getKeyFormat(key);\n\t\t\tconst formatter = getParser(keyFormat);\n\t\t\tformatter(key, value, acc);\n\t\t\treturn acc;\n\t\t}, {});\n}\n\nconst urlExp = /^((\\w+):)?(\\/\\/((\\w+)?(:(\\w+))?@)?([^\\/\\?:]+)(:(\\d+))?)?(\\/?([^\\/\\?#][^\\?#]*)?)?(\\?([^#]+))?(#(\\w*))?/;\n\nexport default function parseUrl(url)\n{\n\tconst result = url.match(urlExp);\n\n\tif (Type.isArray(result))\n\t{\n\t\tconst queryParams = parseQuery(result[14]);\n\n\t\treturn {\n\t\t\tuseShort: /^\\/\\//.test(url),\n\t\t\thref: result[0] || '',\n\t\t\tschema: result[2] || '',\n\t\t\thost: result[8] || '',\n\t\t\tport: result[10] || '',\n\t\t\tpath: result[11] || '',\n\t\t\tquery: result[14] || '',\n\t\t\tqueryParams,\n\t\t\thash: result[16] || '',\n\t\t\tusername: result[5] || '',\n\t\t\tpassword: result[7] || '',\n\t\t\torigin: result[8] || '',\n\t\t};\n\t}\n\n\treturn {};\n}","import Type from '../type';\n\nexport default function buildQueryString(params = {})\n{\n\tconst queryString = Object.keys(params)\n\t\t.reduce((acc, key) => {\n\t\t\tif (Type.isArray(params[key]))\n\t\t\t{\n\t\t\t\tparams[key].forEach((paramValue) => {\n\t\t\t\t\tacc.push(`${key}[]=${paramValue}`);\n\t\t\t\t}, '');\n\t\t\t}\n\n\t\t\tif (Type.isPlainObject(params[key]))\n\t\t\t{\n\t\t\t\tObject.keys(params[key]).forEach((paramIndex) => {\n\t\t\t\t\tacc.push(`${key}[${paramIndex}]=${params[key][paramIndex]}`);\n\t\t\t\t}, '');\n\t\t\t}\n\n\t\t\tif (!Type.isObject(params[key]) && !Type.isArray(params[key]))\n\t\t\t{\n\t\t\t\tacc.push(`${key}=${params[key]}`);\n\t\t\t}\n\n\t\t\treturn acc;\n\t\t}, []).join('&');\n\n\tif (queryString.length > 0)\n\t{\n\t\treturn `?${queryString}`;\n\t}\n\n\treturn queryString;\n}","import Type from '../type';\n\nexport default function prepareParamValue(value)\n{\n\tif (Type.isArray(value))\n\t{\n\t\treturn value.map(item => String(item));\n\t}\n\n\tif (Type.isPlainObject(value))\n\t{\n\t\treturn {...value};\n\t}\n\n\treturn String(value);\n}","import parseUrl from './uri/parse-url';\nimport buildQueryString from './uri/build-query-string';\nimport prepareParamValue from './uri/prepare-param-value';\nimport Type from './type';\n\nconst map = new WeakMap();\n\n/**\n * Implements interface for works with URI\n * @memberOf BX\n */\nexport default class Uri\n{\n\tstatic addParam(url: string, params = {}): string\n\t{\n\t\treturn (new Uri(url)).setQueryParams(params).toString();\n\t}\n\n\tstatic removeParam(url: string, params: Array<string> | string): string\n\t{\n\t\tconst removableParams = Type.isArray(params) ? params : [params];\n\t\treturn (new Uri(url)).removeQueryParam(...removableParams).toString();\n\t}\n\n\tconstructor(url = '')\n\t{\n\t\tmap.set(this, parseUrl(url));\n\t}\n\n\t/**\n\t * Gets schema\n\t * @return {?string}\n\t */\n\tgetSchema()\n\t{\n\t\treturn map.get(this).schema;\n\t}\n\n\t/**\n\t * Sets schema\n\t * @param {string} schema\n\t * @return {Uri}\n\t */\n\tsetSchema(schema)\n\t{\n\t\tmap.get(this).schema = String(schema);\n\t\treturn this;\n\t}\n\n\t/**\n\t * Gets host\n\t * @return {?string}\n\t */\n\tgetHost()\n\t{\n\t\treturn map.get(this).host;\n\t}\n\n\t/**\n\t * Sets host\n\t * @param {string} host\n\t * @return {Uri}\n\t */\n\tsetHost(host)\n\t{\n\t\tmap.get(this).host = String(host);\n\t\treturn this;\n\t}\n\n\t/**\n\t * Gets port\n\t * @return {?string}\n\t */\n\tgetPort()\n\t{\n\t\treturn map.get(this).port;\n\t}\n\n\t/**\n\t * Sets port\n\t * @param {String | Number} port\n\t * @return {Uri}\n\t */\n\tsetPort(port)\n\t{\n\t\tmap.get(this).port = String(port);\n\t\treturn this;\n\t}\n\n\t/**\n\t * Gets path\n\t * @return {?string}\n\t */\n\tgetPath()\n\t{\n\t\treturn map.get(this).path;\n\t}\n\n\t/**\n\t * Sets path\n\t * @param {string} path\n\t * @return {Uri}\n\t */\n\tsetPath(path)\n\t{\n\t\tif (!/^\\//.test(path))\n\t\t{\n\t\t\tmap.get(this).path = `/${String(path)}`;\n\t\t\treturn this;\n\t\t}\n\n\t\tmap.get(this).path = String(path);\n\t\treturn this;\n\t}\n\n\t/**\n\t * Gets query\n\t * @return {?string}\n\t */\n\tgetQuery()\n\t{\n\t\treturn buildQueryString(map.get(this).queryParams);\n\t}\n\n\t/**\n\t * Gets query param value by name\n\t * @param {string} key\n\t * @return {?string}\n\t */\n\tgetQueryParam(key)\n\t{\n\t\tconst params = this.getQueryParams();\n\n\t\tif (key in params)\n\t\t{\n\t\t\treturn params[key];\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t/**\n\t * Sets query param\n\t * @param {string} key\n\t * @param [value]\n\t * @return {Uri}\n\t */\n\tsetQueryParam(key, value = '')\n\t{\n\t\tmap.get(this).queryParams[key] = prepareParamValue(value);\n\t\treturn this;\n\t}\n\n\t/**\n\t * Gets query params\n\t * @return {Object<string, any>}\n\t */\n\tgetQueryParams()\n\t{\n\t\treturn {...map.get(this).queryParams};\n\t}\n\n\t/**\n\t * Sets query params\n\t * @param {Object<string, any>} params\n\t * @return {Uri}\n\t */\n\tsetQueryParams(params = {})\n\t{\n\t\tconst currentParams = this.getQueryParams();\n\t\tconst newParams = {...currentParams, ...params};\n\n\t\tObject.keys(newParams).forEach((key) => {\n\t\t\tnewParams[key] = prepareParamValue(newParams[key]);\n\t\t});\n\n\t\tmap.get(this).queryParams = newParams;\n\t\treturn this;\n\t}\n\n\t/**\n\t * Removes query params by name\n\t * @param keys\n\t * @return {Uri}\n\t */\n\tremoveQueryParam(...keys)\n\t{\n\t\tconst currentParams = {...map.get(this).queryParams};\n\n\t\tkeys.forEach((key) => {\n\t\t\tif (key in currentParams)\n\t\t\t{\n\t\t\t\tdelete currentParams[key];\n\t\t\t}\n\t\t});\n\n\t\tmap.get(this).queryParams = currentParams;\n\t\treturn this;\n\t}\n\n\t/**\n\t * Gets fragment\n\t * @return {?string}\n\t */\n\tgetFragment()\n\t{\n\t\treturn map.get(this).hash;\n\t}\n\n\t/**\n\t * Sets fragment\n\t * @param {string} hash\n\t * @return {Uri}\n\t */\n\tsetFragment(hash)\n\t{\n\t\tmap.get(this).hash = String(hash);\n\t\treturn this;\n\t}\n\n\t/**\n\t * Serializes URI\n\t * @return {Object}\n\t */\n\tserialize()\n\t{\n\t\tconst serialized = {...map.get(this)};\n\t\tserialized.href = this.toString();\n\t\treturn serialized;\n\t}\n\n\t/**\n\t * Gets URI string\n\t * @return {string}\n\t */\n\ttoString()\n\t{\n\t\tconst data = {...map.get(this)};\n\n\t\tlet protocol = data.schema ? `${data.schema}://` : '';\n\n\t\tif (data.useShort)\n\t\t{\n\t\t\tprotocol = '//';\n\t\t}\n\n\t\tconst port = (() => {\n\t\t\tif (Type.isString(data.port) && !['', '80'].includes(data.port))\n\t\t\t{\n\t\t\t\treturn `:${data.port}`;\n\t\t\t}\n\n\t\t\treturn '';\n\t\t})();\n\n\t\tconst host = this.getHost();\n\t\tconst path = this.getPath();\n\t\tconst query = buildQueryString(data.queryParams);\n\t\tconst hash = data.hash ? `#${data.hash}` : '';\n\n\t\treturn `${host ? protocol : ''}${host}${host ? port : ''}${path}${query}${hash}`;\n\t}\n}\n","/**\n * @memberOf BX\n */\nexport default class Validation\n{\n\t/**\n\t * Checks that value is valid email\n\t * @param value\n\t * @return {boolean}\n\t */\n\tstatic isEmail(value)\n\t{\n\t\tconst exp = /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;\n\t\treturn exp.test(String(value).toLowerCase());\n\t}\n}","import Type from '../type';\n\nexport default class BaseCache\n{\n\t/**\n\t * @private\n\t */\n\tstorage: Map<string, any> = new Map();\n\n\t/**\n\t * Gets cached value or default value\n\t */\n\tget(key: string, defaultValue?: T | () => T): T\n\t{\n\t\tif (!this.storage.has(key))\n\t\t{\n\t\t\tif (Type.isFunction(defaultValue))\n\t\t\t{\n\t\t\t\treturn defaultValue();\n\t\t\t}\n\n\t\t\tif (!Type.isUndefined(defaultValue))\n\t\t\t{\n\t\t\t\treturn defaultValue;\n\t\t\t}\n\t\t}\n\n\t\treturn this.storage.get(key);\n\t}\n\n\t/**\n\t * Sets cache entry\n\t */\n\tset(key: string, value: any)\n\t{\n\t\tthis.storage.set(key, value);\n\t}\n\n\t/**\n\t * Deletes cache entry\n\t */\n\tdelete(key: string)\n\t{\n\t\tthis.storage.delete(key);\n\t}\n\n\t/**\n\t * Checks that storage contains entry with specified key\n\t */\n\thas(key: string): boolean\n\t{\n\t\treturn this.storage.has(key);\n\t}\n\n\t/**\n\t * Gets cached value if exists,\n\t */\n\tremember(key: string, defaultValue?: T | () => T): T\n\t{\n\t\tif (!this.storage.has(key))\n\t\t{\n\t\t\tif (Type.isFunction(defaultValue))\n\t\t\t{\n\t\t\t\tthis.storage.set(key, defaultValue());\n\t\t\t}\n\t\t\telse if (!Type.isUndefined(defaultValue))\n\t\t\t{\n\t\t\t\tthis.storage.set(key, defaultValue);\n\t\t\t}\n\t\t}\n\n\t\treturn this.storage.get(key);\n\t}\n\n\t/**\n\t * Gets storage size\n\t */\n\tsize(): number\n\t{\n\t\treturn this.storage.size;\n\t}\n\n\t/**\n\t * Gets storage keys\n\t */\n\tkeys(): Array<string>\n\t{\n\t\treturn [...this.storage.keys()];\n\t}\n\n\t/**\n\t * Gets storage values\n\t */\n\tvalues(): Array<any>\n\t{\n\t\treturn [...this.storage.values()];\n\t}\n}","import BaseCache from './base-cache';\nimport MemoryStorage from './storage/memory';\n\nexport default class MemoryCache extends BaseCache\n{\n\t/**\n\t * @private\n\t */\n\tstorage: MemoryStorage = new MemoryStorage();\n}","import type {ICacheStorage} from './i-cache-storage';\nimport Type from '../../type';\n\nexport default class LsStorage implements ICacheStorage\n{\n\tstackKey = 'BX.Cache.Storage.LsStorage.stack';\n\tstack = null;\n\n\t/**\n\t * @private\n\t */\n\tgetStack(): {[key: string]: any}\n\t{\n\t\tif (Type.isPlainObject(this.stack))\n\t\t{\n\t\t\treturn this.stack;\n\t\t}\n\n\t\tconst stack = localStorage.getItem(this.stackKey);\n\n\t\tif (Type.isString(stack) && stack !== '')\n\t\t{\n\t\t\tconst parsedStack = JSON.parse(stack);\n\n\t\t\tif (Type.isPlainObject(parsedStack))\n\t\t\t{\n\t\t\t\tthis.stack = parsedStack;\n\t\t\t\treturn this.stack;\n\t\t\t}\n\t\t}\n\n\t\tthis.stack = {};\n\t\treturn this.stack;\n\t}\n\n\t/**\n\t * @private\n\t */\n\tsaveStack()\n\t{\n\t\tif (Type.isPlainObject(this.stack))\n\t\t{\n\t\t\tconst preparedStack = JSON.stringify(this.stack);\n\t\t\tlocalStorage.setItem(this.stackKey, preparedStack);\n\t\t}\n\t}\n\n\tget(key: string)\n\t{\n\t\tconst stack = this.getStack();\n\t\treturn stack[key];\n\t}\n\n\tset(key: string, value: any)\n\t{\n\t\tconst stack = this.getStack();\n\t\tstack[key] = value;\n\t\tthis.saveStack();\n\t}\n\n\tdelete(key: string)\n\t{\n\t\tconst stack = this.getStack();\n\n\t\tif (key in stack)\n\t\t{\n\t\t\tdelete stack[key];\n\t\t}\n\t}\n\n\thas(key: string): boolean\n\t{\n\t\tconst stack = this.getStack();\n\t\treturn key in stack;\n\t}\n\n\tget size(): number\n\t{\n\t\tconst stack = this.getStack();\n\t\treturn Object.keys(stack).length;\n\t}\n\n\tkeys(): Array<string>\n\t{\n\t\tconst stack = this.getStack();\n\t\treturn Object.keys(stack);\n\t}\n\n\tvalues(): Array<any>\n\t{\n\t\tconst stack = this.getStack();\n\t\treturn Object.values(stack);\n\t}\n}","import BaseCache from './base-cache';\nimport LsCacheStorage from './storage/ls-storage';\n\nexport default class LocalStorageCache extends BaseCache\n{\n\t/**\n\t * @private\n\t */\n\tstorage: LsCacheStorage = new LsCacheStorage();\n}","import MemoryCache from './cache/memory-cache';\nimport LocalStorageCache from './cache/local-storage-cache';\n\n/**\n * @memberOf BX\n */\nexport default class Cache\n{\n\tstatic MemoryCache: MemoryCache = MemoryCache;\n\tstatic LocalStorageCache: LocalStorageCache = LocalStorageCache;\n}","import Type from '../lib/type';\n\nexport default function getElement(element: string | HTMLElement)\n{\n\tif (Type.isString(element))\n\t{\n\t\treturn document.getElementById(element);\n\t}\n\n\treturn element;\n}","import Type from '../lib/type';\n\nexport default function getWindow(element)\n{\n\tif (Type.isElementNode(element))\n\t{\n\t\treturn (\n\t\t\telement.ownerDocument.parentWindow\n\t\t\t|| element.ownerDocument.defaultView\n\t\t\t|| window\n\t\t);\n\t}\n\n\tif (Type.isDomNode(element))\n\t{\n\t\treturn (\n\t\t\telement.parentWindow\n\t\t\t|| element.defaultView\n\t\t\t|| window\n\t\t);\n\t}\n\n\treturn window;\n}","/* eslint-disable prefer-rest-params */\n\nimport Type from './lib/type';\nimport Reflection from './lib/reflection';\nimport Dom from './lib/dom';\nimport Browser from './lib/browser';\nimport Event from './lib/event';\nimport Http from './lib/http';\nimport Runtime from './lib/runtime';\nimport Text from './lib/text';\nimport messageFunction from './lib/loc/message';\nimport * as debugNs from './lib/runtime/debug';\nimport {isReady} from './lib/event/ready';\nimport getElement from './internal/get-element';\nimport getWindow from './internal/get-window';\nimport EventEmitter from './lib/event/event-emitter';\nimport BaseEvent from './lib/event/base-event';\n\n// BX.*\nexport const {getClass, namespace} = Reflection;\nexport const message = messageFunction;\n\n/**\n * @memberOf BX\n */\nexport const {\n\treplace,\n\tremove,\n\tclean,\n\tinsertBefore,\n\tinsertAfter,\n\tappend,\n\tprepend,\n\tstyle,\n\tadjust,\n\tcreate,\n\tisShown,\n} = Dom;\n\nexport const addClass = function addClass() {\n\tDom.addClass(...Runtime.merge([], Array.from(arguments), [getElement(arguments[0])]));\n};\n\nexport const removeClass = function removeClass() {\n\tDom.removeClass(...Runtime.merge(Array.from(arguments), [getElement(arguments[0])]));\n};\n\nexport const hasClass = function hasClass() {\n\treturn Dom.hasClass(...Runtime.merge(Array.from(arguments), [getElement(arguments[0])]));\n};\n\nexport const toggleClass = function toggleClass() {\n\tDom.toggleClass(...Runtime.merge(Array.from(arguments), [getElement(arguments[0])]));\n};\n\nexport const cleanNode = (element, removeElement = false) => {\n\tconst currentElement = getElement(element);\n\n\tif (Type.isDomNode(currentElement))\n\t{\n\t\tDom.clean(currentElement);\n\n\t\tif (removeElement)\n\t\t{\n\t\t\tDom.remove(currentElement);\n\t\t\treturn currentElement;\n\t\t}\n\t}\n\n\treturn currentElement;\n};\n\nexport const getCookie = Http.Cookie.get;\nexport const setCookie = (name, value, options = {}) => {\n\tconst attributes = {...options};\n\n\tif (Type.isNumber(attributes.expires))\n\t{\n\t\tattributes.expires /= (3600 * 24);\n\t}\n\n\tHttp.Cookie.set(name, value, attributes);\n};\n\nexport const {\n\tbind,\n\tunbind,\n\tunbindAll,\n\tbindOnce,\n\tready,\n} = Event;\n\nexport {isReady};\nexport const {\n\tdebugState: debugEnableFlag,\n\tisDebugEnabled: debugStatus,\n\tdefault: debug,\n} = debugNs;\n\nexport const debugEnable = (value) => {\n\tif (value)\n\t{\n\t\tdebugNs.enableDebug();\n\t}\n\telse\n\t{\n\t\tdebugNs.disableDebug();\n\t}\n};\n\nexport const {\n\tclone,\n\tloadExtension: loadExt,\n\tdebounce,\n\tthrottle,\n\thtml,\n} = Runtime;\n\n// BX.type\nexport const type = {\n\t...Object.getOwnPropertyNames(Type)\n\t\t.filter(key => !['name', 'length', 'prototype', 'caller', 'arguments'].includes(key))\n\t\t.reduce((acc, key) => {\n\t\t\tacc[key] = Type[key];\n\t\t\treturn acc;\n\t\t}, {}),\n\tisNotEmptyString: value => Type.isString(value) && value !== '',\n\tisNotEmptyObject: value => Type.isObjectLike(value) && Object.keys(value).length > 0,\n\tisMapKey: Type.isObject,\n\tstringToInt: (value) => {\n\t\tconst parsed = parseInt(value);\n\t\treturn !Number.isNaN(parsed) ? parsed : 0;\n\t},\n};\n\n// BX.browser\nexport const browser = {\n\tIsOpera: Browser.isOpera,\n\tIsIE: Browser.isIE,\n\tIsIE6: Browser.isIE6,\n\tIsIE7: Browser.isIE7,\n\tIsIE8: Browser.isIE8,\n\tIsIE9: Browser.isIE9,\n\tIsIE10: Browser.isIE10,\n\tIsIE11: Browser.isIE11,\n\tIsSafari: Browser.isSafari,\n\tIsFirefox: Browser.isFirefox,\n\tIsChrome: Browser.isChrome,\n\tDetectIeVersion: Browser.detectIEVersion,\n\tIsMac: Browser.isMac,\n\tIsAndroid: Browser.isAndroid,\n\tisIPad: Browser.isIPad,\n\tisIPhone: Browser.isIPhone,\n\tIsIOS: Browser.isIOS,\n\tIsMobile: Browser.isMobile,\n\tisRetina: Browser.isRetina,\n\tIsDoctype: Browser.isDoctype,\n\tSupportLocalStorage: Browser.isLocalStorageSupported,\n\taddGlobalClass: Browser.addGlobalClass,\n\tDetectAndroidVersion: Browser.detectAndroidVersion,\n\tisPropertySupported: Browser.isPropertySupported,\n\taddGlobalFeatures: Browser.addGlobalFeatures,\n};\n\n// eslint-disable-next-line\nconst ajax = window.BX ? window.BX.ajax : () => {};\nexport {ajax};\n\nexport function GetWindowScrollSize(doc = document)\n{\n\treturn {\n\t\tscrollWidth: doc.documentElement.scrollWidth,\n\t\tscrollHeight: doc.documentElement.scrollHeight,\n\t};\n}\n\nexport function GetWindowScrollPos(doc = document)\n{\n\tconst win = getWindow(doc);\n\n\treturn {\n\t\tscrollLeft: win.pageXOffset,\n\t\tscrollTop: win.pageYOffset,\n\t};\n}\n\nexport function GetWindowInnerSize(doc = document)\n{\n\tconst win = getWindow(doc);\n\treturn {innerWidth: win.innerWidth, innerHeight: win.innerHeight};\n}\n\nexport function GetWindowSize(doc = document)\n{\n\treturn {\n\t\t...GetWindowInnerSize(doc),\n\t\t...GetWindowScrollPos(doc),\n\t\t...GetWindowScrollSize(doc),\n\t};\n}\n\nexport function GetContext(node)\n{\n\treturn getWindow(node);\n}\n\nexport function pos(element, relative = false)\n{\n\tif (!element)\n\t{\n\t\treturn (new DOMRect()).toJSON();\n\t}\n\n\tif (element.ownerDocument === document && !relative)\n\t{\n\t\tconst clientRect = element.getBoundingClientRect();\n\t\tconst root = document.documentElement;\n\t\tconst {body} = document;\n\n\t\treturn {\n\t\t\ttop: Math.round(clientRect.top + (root.scrollTop || body.scrollTop)),\n\t\t\tleft: Math.round(clientRect.left + (root.scrollLeft || body.scrollLeft)),\n\t\t\twidth: Math.round(clientRect.right - clientRect.left),\n\t\t\theight: Math.round(clientRect.bottom - clientRect.top),\n\t\t\tright: Math.round(clientRect.right + (root.scrollLeft || body.scrollLeft)),\n\t\t\tbottom: Math.round(clientRect.bottom + (root.scrollTop || body.scrollTop)),\n\t\t};\n\t}\n\n\tlet x = 0;\n\tlet y = 0;\n\tconst w = element.offsetWidth;\n\tconst h = element.offsetHeight;\n\tlet first = true;\n\n\t// eslint-disable-next-line no-param-reassign\n\tfor (; element != null; element = element.offsetParent)\n\t{\n\t\tif (!first && relative && BX.is_relative(element))\n\t\t{\n\t\t\tbreak;\n\t\t}\n\n\t\tx += element.offsetLeft;\n\t\ty += element.offsetTop;\n\n\t\tif (first)\n\t\t{\n\t\t\tfirst = false;\n\t\t\t// eslint-disable-next-line no-continue\n\t\t\tcontinue;\n\t\t}\n\n\t\tx += Text.toNumber(Dom.style(element, 'border-left-width'));\n\t\ty += Text.toNumber(Dom.style(element, 'border-top-width'));\n\t}\n\n\treturn (new DOMRect(x, y, w, h)).toJSON();\n}\n\nexport function addCustomEvent(eventObject, eventName, eventHandler)\n{\n\tif (Type.isString(eventObject))\n\t{\n\t\teventHandler = eventName;\n\t\teventName = eventObject;\n\t\teventObject = EventEmitter.GLOBAL_TARGET;\n\t}\n\n\tif (eventObject === window)\n\t{\n\t\teventObject = EventEmitter.GLOBAL_TARGET;\n\t}\n\n\tif (!Type.isObject(eventObject))\n\t{\n\t\tconsole.error('The \"eventObject\" argument must be an object. Received type '+ typeof(eventObject) + '.');\n\t\treturn;\n\t}\n\n\tif (!Type.isStringFilled(eventName))\n\t{\n\t\tconsole.error('The \"eventName\" argument must be a string.');\n\t\treturn;\n\t}\n\n\tif (!Type.isFunction(eventHandler))\n\t{\n\t\tconsole.error('The \"eventHandler\" argument must be a function. Received type '+ typeof(eventHandler) + '.');\n\t\treturn;\n\t}\n\n\teventName = eventName.toLowerCase();\n\n\tEventEmitter.subscribe(eventObject, eventName, eventHandler, { compatMode: true, useGlobalNaming: true });\n}\n\nexport function onCustomEvent(eventObject, eventName, eventParams, secureParams)\n{\n\tif (Type.isString(eventObject))\n\t{\n\t\tsecureParams = eventParams;\n\t\teventParams = eventName;\n\t\teventName = eventObject;\n\t\teventObject = EventEmitter.GLOBAL_TARGET;\n\t}\n\n\tif (!Type.isObject(eventObject) || eventObject === window)\n\t{\n\t\teventObject = EventEmitter.GLOBAL_TARGET;\n\t}\n\n\tif (!eventParams)\n\t{\n\t\teventParams = [];\n\t}\n\n\teventName = eventName.toLowerCase();\n\n\tconst event = new BaseEvent();\n\tevent.setData(eventParams);\n\tevent.setCompatData(eventParams);\n\n\tEventEmitter.emit(eventObject, eventName, event, { cloneData: secureParams === true, useGlobalNaming: true });\n}\n\nexport function removeCustomEvent(eventObject, eventName, eventHandler)\n{\n\tif (Type.isString(eventObject))\n\t{\n\t\teventHandler = eventName;\n\t\teventName = eventObject;\n\t\teventObject = EventEmitter.GLOBAL_TARGET;\n\t}\n\n\tif (!Type.isFunction(eventHandler))\n\t{\n\t\tconsole.error('The \"eventHandler\" argument must be a function. Received type '+ typeof(eventHandler) + '.');\n\t\treturn;\n\t}\n\n\tif (eventObject === window)\n\t{\n\t\teventObject = EventEmitter.GLOBAL_TARGET;\n\t}\n\n\teventName = eventName.toLowerCase();\n\n\tEventEmitter.unsubscribe(eventObject, eventName, eventHandler, { useGlobalNaming: true });\n}\n\nexport function removeAllCustomEvents(eventObject, eventName)\n{\n\tif (Type.isString(eventObject))\n\t{\n\t\teventName = eventObject;\n\t\teventObject = EventEmitter.GLOBAL_TARGET;\n\t}\n\n\tif (eventObject === window)\n\t{\n\t\teventObject = EventEmitter.GLOBAL_TARGET;\n\t}\n\n\teventName = eventName.toLowerCase();\n\n\tEventEmitter.unsubscribeAll(eventObject, eventName, { useGlobalNaming: true });\n}","//import './internal/bx';\n\nimport Type from '../../src/lib/type';\nimport Reflection from '../../src/lib/reflection';\nimport Text from '../../src/lib/text';\nimport Dom from '../../src/lib/dom';\nimport Browser from '../../src/lib/browser';\nimport Event from '../../src/lib/event';\nimport Http from '../../src/lib/http';\nimport Runtime from '../../src/lib/runtime';\nimport Loc from '../../src/lib/loc';\nimport Tag from '../../src/lib/tag';\nimport Uri from '../../src/lib/uri';\nimport Validation from '../../src/lib/validation';\nimport Cache from '../../src/lib/cache';\nimport BaseError from '../../src/lib/base-error';\n\nexport {\n\tType,\n\tReflection,\n\tText,\n\tDom,\n\tBrowser,\n\tEvent,\n\tHttp,\n\tRuntime,\n\tLoc,\n\tTag,\n\tUri,\n\tValidation,\n\tCache,\n\tBaseError,\n};\n\nexport * from '../../src/core-compatibility';"],"names":["getTag","value","Object","prototype","toString","call","objectCtorString","Function","Type","isString","isObjectLike","proto","getPrototypeOf","ctor","hasOwnProperty","constructor","Number","isNaN","isNumber","isInteger","undefined","isNil","Array","isArray","length","isFunction","MAX_SAFE_INTEGER","isPlainObject","isDomNode","nodeType","Node","ELEMENT_NODE","TEXT_NODE","regExpTypedTag","test","size","type","slice","isBlob","lastModifiedDate","lastModified","name","FormData","Reflection","className","classFn","currentNamespace","window","namespaces","split","i","namespace","namespaceName","parts","parent","BX","isUndefined","reEscape","reUnescape","escapeEntities","unescapeEntities","Text","replace","item","map","Math","random","join","parsedValue","parseFloat","toNumber","parseInt","trueValues","transformedValue","toLowerCase","includes","str","isStringFilled","regex","match","letter","toUpperCase","substr","capitalize","toCamelCase","matches","x","aliases","mousewheel","bxchange","animationend","transitionend","fullscreenchange","fullscreenerror","Registry","WeakMap","target","event","listener","events","get","isSet","Set","add","registry","set","has","delete","isOptionSupported","isSupported","options","defineProperty","addEventListener","err","fetchSupportedListenerOptions","keys","reduce","acc","bind","eventName","handler","isObject","listenerOptions","forEach","key","unbind","removeEventListener","unbindAll","currentEvent","bindOnce","once","debugState","enableDebug","disableDebug","isDebugEnabled","debug","console","log","args","Error","stack","trace","fetchExtensionSettings","html","scripts","isArrayFilled","script","extension","Extension","config","state","result","processHTML","inlineScripts","SCRIPT","externalScripts","externalStyles","STYLE","settingsScripts","HTML","loadPromise","Promise","resolve","warn","entry","isLoaded","document","querySelector","body","insertAdjacentHTML","evalGlobal","all","loadAll","then","getClass","initialized","ajaxController","makeIterable","isInitialized","getInitialized","isAllInitialized","extensions","every","loadExtensions","load","mergeExports","exports","currentExports","isInternal","push","JS","request","ajax","runAction","data","prepareExtensions","response","status","errors","initializedExtension","items","itemsList","loadExtension","utils","initializedExtensions","cloneableTags","isCloneable","isCloneableValue","internalClone","cloned","from","index","cloneNode","isMap","Map","isDate","Date","isRegExp","regExpFlags","flags","exec","RegExp","source","lastIndex","assign","create","clone","merge","current","entries","createComparator","fields","orders","a","b","field","order","valueA","valueB","Runtime","func","wait","context","timeoutId","debounced","clearTimeout","setTimeout","apply","timer","invoke","wrapper","q","node","params","innerHTML","parsedHtml","externalCss","externalJs","inlineJs","htmlFirst","callback","targets","unshift","collection","comparator","values","sort","errorMessage","onPropertyAccess","ownProperties","prototypeProperties","targetPrototype","getOwnPropertyNames","uniquePropertiesList","filter","descriptor","getOwnPropertyDescriptor","configurable","setPrototypeOf","isError","Symbol","for","BaseError","message","code","customData","setMessage","setCode","setCustomData","getCode","getMessage","error","BaseEvent","compatData","defaultPrevented","immediatePropagationStopped","setData","setCompatData","isArrayLike","EventStore","defaultMaxListeners","eventStore","record","getRecordScheme","maxListeners","eventsMap","onceMap","getDefaultMaxListeners","eventsMaxListeners","WarningStore","warnings","printDelayed","debounce","print","listeners","contextWarnings","groupCollapsed","dir","groupEnd","clear","warningStore","aliasStore","globalTarget","GLOBAL_TARGET","isEmitterProperty","namespaceProperty","targetProperty","EventEmitter","TypeError","setEventNamespace","getEventNamespace","subscribe","compatMode","normalizeAliases","normalizeEventName","actualName","subscribeOnce","unsubscribe","unsubscribeAll","emit","emitAsync","setMaxListeners","getMaxListeners","incrementMaxListeners","decrementMaxListeners","getListeners","makeFullEventName","isEventEmitter","targetProto","emitter","method","fullEventName","resolveEventName","useGlobalNaming","getOrAdd","onceListeners","getNextSequenceValue","targetInfo","globalEvents","globalListeners","targetListeners","targetEvents","preparedEvent","prepareEvent","isImmediatePropagationStopped","listenerResult","getCompatData","cloneData","thisArg","setTarget","setType","sequenceValue","count","DEFAULT_MAX_LISTENERS","destructMaxListenersArgs","increment","max","addMaxListeners","abs","alias","mergeEventAliases","aliasListeners","aliasOnceListeners","aliasMaxListeners","eventMaxListeners","getFullEventName","actualEventName","fullName","isReady","ready","readyState","Event","encodeAttributeValue","JSON","stringify","encode","decode","decodeAttributeValue","decodedValue","parse","e","Boolean","getPageScroll","documentElement","scrollTop","pageYOffset","scrollLeft","pageXOffset","Dom","oldElement","newElement","parentNode","replaceChild","element","removeChild","childNodes","firstChild","clean","getElementById","insertBefore","nextSibling","appendChild","append","isElementNode","preparedClassName","trim","hasClass","classList","contains","baseVal","getAttribute","some","addClass","names","removeClass","remove","toggleClass","toggle","prop","isNull","removeAttribute","currentKey","currentValue","style","DOCUMENT_NODE","computedStyle","getComputedStyle","getPropertyValue","attrs","setAttribute","props","dataset","children","text","innerText","tag","tagName","adjust","createElement","hidden","isShown","hide","show","elementRect","getBoundingClientRect","DOMRect","left","top","width","height","relationElement","elementPosition","getPosition","relationElementPosition","attr","attrKey","attrValue","UA","navigator","userAgent","Browser","isOpera","documentMode","isSafari","isFirefox","isChrome","rv","MSStream","ActiveXObject","isIE10","isIE9","isIE","appName","re","res","detectIEVersion","isIPad","isIPhone","isAndroid","devicePixelRatio","doc","clientHeight","localStorage","setItem","removeItem","globalClass","isIOS","isMac","isMobile","isRetina","ieVersion","isDoctype","jsProperty","returnCSSName","getCssName","propertyName","getJsName","cssName","reg","property","bReturnCSSName","ucProperty","charAt","properties","obj","lowerProp","prefix","features","classNames","support","isPropertySupported","Cookie","cookie","subItem","decodeURIComponent","cookiesList","getList","attributes","expires","now","days","dayInMs","toUTCString","safeName","String","escape","safeValue","encodeURIComponent","stringifiedAttributes","attributeValue","objectToFormData","formData","pre","toISOString","isFile","preparedProperty","lastIndexOf","substring","Data","Http","Loc","messageId","id","handlers","getUid","incremental","bindAll","handlersMap","currentElement","childrenMap","render","sections","eventAttrRe","uselessSymbolsRe","substitutions","preparedAcc","attrName","attribute","childKey","lowercaseHtml","startsWith","implementation","createHTMLDocument","parser","DOMParser","parsedDocument","parseFromString","head","el","parseProps","nextSectionIndex","splitted","substitutionPlaceholderExp","Tag","styleTagHandler","attrsTagHandler","getParser","format","sourceKey","accumulator","concat","getKeyFormat","parseQuery","input","url","param","keyFormat","formatter","urlExp","parseUrl","queryParams","useShort","href","schema","host","port","path","query","hash","username","password","origin","buildQueryString","queryString","paramValue","paramIndex","prepareParamValue","Uri","setQueryParams","removableParams","removeQueryParam","getQueryParams","currentParams","newParams","serialized","protocol","getHost","getPath","Validation","exp","BaseCache","defaultValue","storage","MemoryCache","MemoryStorage","LsStorage","getItem","stackKey","parsedStack","preparedStack","getStack","saveStack","LocalStorageCache","LsCacheStorage","Cache","getElement","getWindow","ownerDocument","parentWindow","defaultView","messageFunction","insertAfter","prepend","arguments","cleanNode","removeElement","getCookie","setCookie","debugEnableFlag","debugNs","debugStatus","debugEnable","loadExt","throttle","isNotEmptyString","isNotEmptyObject","isMapKey","stringToInt","parsed","browser","IsOpera","IsIE","IsIE6","isIE6","IsIE7","isIE7","IsIE8","isIE8","IsIE9","IsIE10","IsIE11","isIE11","IsSafari","IsFirefox","IsChrome","DetectIeVersion","IsMac","IsAndroid","IsIOS","IsMobile","IsDoctype","SupportLocalStorage","isLocalStorageSupported","addGlobalClass","DetectAndroidVersion","detectAndroidVersion","addGlobalFeatures","GetWindowScrollSize","scrollWidth","scrollHeight","GetWindowScrollPos","win","GetWindowInnerSize","innerWidth","innerHeight","GetWindowSize","GetContext","pos","relative","toJSON","clientRect","root","round","right","bottom","y","w","offsetWidth","h","offsetHeight","first","offsetParent","is_relative","offsetLeft","offsetTop","addCustomEvent","eventObject","eventHandler","onCustomEvent","eventParams","secureParams","removeCustomEvent","removeAllCustomEvents"],"mappings":"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"}