!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.PhotoEditorSDK=e():t.PhotoEditorSDK=e()}("undefined"!=typeof self?self:this,function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=156)}([function(t,e,n){t.exports={default:n(176),__esModule:!0}},function(t,e,n){t.exports={default:n(193),__esModule:!0}},function(t,e,n){t.exports={default:n(178),__esModule:!0}},function(t,e,n){t.exports={default:n(181),__esModule:!0}},function(t,e,n){t.exports=n(157).default},function(t,e,n){t.exports={default:n(215),__esModule:!0}},function(t,e,n){t.exports={default:n(201),__esModule:!0}},function(t,e,n){"use strict";var r=n(6),i=n.n(r),o=n(0),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),h=n(1),f=n.n(h),p=n(4),d=(n.n(p),n(271)),v=i.a||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},y=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),a()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var _=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||f()(e)).call(this,t,v({intensity:{type:p.OptionType.NUMBER,default:1,setter:function(t){return this._stack&&this._stack.setIntensity(t),t}},dirty:{type:p.OptionType.BOOLEAN,default:!0}},n)));return r._stack=new d.a(r._options.intensity),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=c()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(u.a?u()(t,e):t.__proto__=e)}(e,p["Configurable"]),y(e,[{key:"render",value:function(t,e,n){var r=this;return this._stack.render(t,e,n).then(function(t){return r.setDirty(!1),t})}},{key:"setDirtyForRenderer",value:function(t,e){this._stack.setDirtyForRenderer(t,e)}},{key:"disposeRenderTextures",value:function(){this._stack.disposeRenderTextures()}},{key:"dispose",value:function(){this._stack.dispose()}}]),e}();_.identifier=null,_.isIdentity=!1,_.displayName=null,_.PrimitivesStack=d.a,e.a=_},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(273);n.d(e,"Brightness",function(){return r.a});var i=n(275);n.d(e,"Contrast",function(){return i.a});var o=n(277);n.d(e,"ColorMatrixPrimitive",function(){return o.a});var a=n(279);n.d(e,"Desaturation",function(){return a.a});var s=n(281);n.d(e,"DuoTone",function(){return s.a});var u=n(283);n.d(e,"Gamma",function(){return u.a});var l=n(285);n.d(e,"Glow",function(){return l.a});var c=n(287);n.d(e,"Gobblin",function(){return c.a});var h=n(289);n.d(e,"Grayscale",function(){return h.a});var f=n(146);n.d(e,"LookupTable",function(){return f.a});var p=n(292);n.d(e,"LookupTableImage",function(){return p.a});var d=n(294);n.d(e,"Saturation",function(){return d.a});var v=n(296);n.d(e,"SoftColorOverlay",function(){return v.a});var y=n(298);n.d(e,"ToneCurve",function(){return y.a});var _=n(299);n.d(e,"X400",function(){return _.a});var g=n(301);n.d(e,"ThreeDLookupTableImage",function(){return g.a})},function(t,e,n){"use strict";n.d(e,"a",function(){return f}),n.d(e,"j",function(){return p});var r=n(26),i=n(51),o=n(126),a=n(127),s=n(31),u=n(52),l=n(22),c=n(128),h=n(32);n.d(e,"b",function(){return i.a}),n.d(e,"g",function(){return o.a}),n.d(e,"k",function(){return s.a}),n.d(e,"h",function(){return a.a}),n.d(e,"d",function(){return u.a}),n.d(e,"f",function(){return r.a}),n.d(e,"i",function(){return l.a}),n.d(e,"c",function(){return h}),n.d(e,"e",function(){return c.a});var f=2e3,p=20},function(t,e){var n=t.exports={version:"2.5.3"};"number"==typeof __e&&(__e=n)},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(1),c=n.n(l),h=n(4),f=(n.n(h),function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}());var p=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||c()(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=u()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(a.a?a()(t,e):t.__proto__=e)}(e,h["Configurable"]),f(e,[{key:"update",value:function(){}},{key:"getFilter",value:function(){return this._filter}},{key:"dispose",value:function(){this._filter&&(this._filter.dispose(),this._filter=null)}}]),e}();e.a=p},function(t,e,n){var r=n(85)("wks"),i=n(65),o=n(14).Symbol,a="function"==typeof o;(t.exports=function(t){return r[t]||(r[t]=a&&o[t]||(a?o:i)("Symbol."+t))}).store=r},function(t,e,n){var r=n(14),i=n(10),o=n(37),a=n(27),s=function(t,e,n){var u,l,c,h=t&s.F,f=t&s.G,p=t&s.S,d=t&s.P,v=t&s.B,y=t&s.W,_=f?i:i[e]||(i[e]={}),g=_.prototype,m=f?r:p?r[e]:(r[e]||{}).prototype;for(u in f&&(n=e),n)(l=!h&&m&&void 0!==m[u])&&u in _||(c=l?m[u]:n[u],_[u]=f&&"function"!=typeof m[u]?n[u]:v&&l?o(c,r):y&&m[u]==c?function(t){var e=function(e,n,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(c):d&&"function"==typeof c?o(Function.call,c):c,d&&((_.virtual||(_.virtual={}))[u]=c,t&s.R&&g&&!g[u]&&a(g,u,c)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,t.exports=s},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e,n){t.exports={default:n(196),__esModule:!0}},function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n(0),i=n.n(r),o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._seed=void 0===e?t.TimeSeed():e}return o(t,[{key:"seed",value:function(e){this._seed=void 0===e?t.TimeSeed():e}},{key:"next",value:function(){var e=0|this._seed,n=e/t.SEED_DIVIDER|0,r=e%t.SEED_DIVIDER|0;return(e=t.SEED_LOW_MULTIPLY*r-t.SEED_HIGH_MULTIPLY*n)<=0&&(e+=t.MAX),-1===e&&(e=t.MAX-1),this._seed=e,e}},{key:"nextInRange",value:function(t,e){return void 0===e&&(e=t,t=0),t+this.next()%(e-t+1)}},{key:"nextBool",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.nextInRange(t+e-1)>=t}},{key:"pickNext",value:function(t){return Array.isArray(t)?t[this.next()%t.length]:null}}],[{key:"TimeSeed",value:function(){return Date.now()}}]),t}();a.MAX=2147483647,a.SEED_DIVIDER=127773,a.SEED_LOW_MULTIPLY=16807,a.SEED_HIGH_MULTIPLY=2836},function(t,e,n){"use strict";n.d(e,"a",function(){return h});var r=n(6),i=n.n(r),o=n(0),a=n.n(o),s=n(4),u=(n.n(s),i.a||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}),l=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),a()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var c=s.Math.Rectangle,h=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.top=e,this.left=n,this.bottom=r,this.right=i}return l(t,[{key:"multiply",value:function(t){this.top*=t,this.left*=t,this.bottom*=t,this.right*=t}},{key:"toObject",value:function(){return u({},this)}},{key:"equals",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Math.abs(t.top-this.top)<=e&&Math.abs(t.left-this.left)<=e&&Math.abs(t.bottom-this.bottom)<=e&&Math.abs(t.right-this.right)<=e}},{key:"scale",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments[1];return void 0===e&&(e=t),this.top*=e,this.bottom*=e,this.left*=t,this.right*=t,this}},{key:"clone",value:function(){return new t(this.top,this.left,this.bottom,this.right)}},{key:"applyToRectangle",value:function(t){return new c(t.x+this.left,t.y+this.top,t.width-this.left-this.right,t.height-this.top-this.bottom)}}],[{key:"ZERO",get:function(){return new t(0,0,0,0)}}]),t}()},function(t,e,n){var r=n(24);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e,n){"use strict";n.d(e,"a",function(){return b});var r=n(6),i=n.n(r),o=n(0),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),h=n(1),f=n.n(h),p=n(4),d=(n.n(p),n(60)),v=n(17),y=n(61),_=n(42),g=i.a||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},m=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),a()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var b=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||f()(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=c()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(u.a?u()(t,e):t.__proto__=e)}(e,d["a"]),m(e,[{key:"_calculateLayoutElements",value:function(){var t=this.serializeOptions(),e=t.attributes,n=t.imageInsets,r=t.size,i=(t.width,this.getWords().joined(1)[0]||""),o=e.fontIdentifier,a=new y.a({text:i,fontIdentifier:o});a.fitWidth(this._getTextFrame().width);var s=a.getTextMetrics().height+n.top+n.bottom;r.height=s;var u=this._getTextFrame();return[new _.a({text:i,frame:u,font:a})]}}]),e}();b.prototype.availableOptions=g({},d.a.prototype.availableOptions,{imageInsets:{type:p.OptionType.OBJECT,default:new v.a}})},function(t,e,n){"use strict";n.d(e,"a",function(){return m});var r=n(0),i=n.n(r),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(30),c=n.n(l),h=n(366),f=n.n(h),p=n(1),d=n.n(p),v=n(4),y=(n.n(v),function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}());var _=void 0;_=window.Image;var g=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||d()(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=u()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(a.a?a()(t,e):t.__proto__=e)}(e,v["Configurable"]),y(e,[{key:"loadImages",value:function(){var t,e=(t=f.a.mark(function t(e){var n,r,i;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=[],r=0;case 2:if(!(r<e.length)){t.next=10;break}return i=e[r],t.next=6,this.addImage(i.path,i.fullPath,i.image);case 6:n.push(i);case 7:r++,t.next=2;break;case 10:return t.abrupt("return",n);case 11:case"end":return t.stop()}},t,this)}),function(){var e=t.apply(this,arguments);return new c.a(function(t,n){return function r(i,o){try{var a=e[i](o),s=a.value}catch(t){return void n(t)}if(!a.done)return c.a.resolve(s).then(function(t){r("next",t)},function(t){r("throw",t)});t(s)}("next")})});return function(t){return e.apply(this,arguments)}}()},{key:"addImage",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"anonymous",i=this.getImages();return n?(i[t]={fullPath:e,image:n},c.a.resolve({fullPath:e,image:n})):new c.a(function(o,a){(n=new _).onload=function(){i[t]={fullPath:e,image:n},o({fullPath:e,image:n})},n.crossOrigin=v.Utils.getCrossOriginValue(r),n.onerror=a,n.src=e})}},{key:"getImage",value:function(t){var e=this.getImages()[t];return e?e.image:null}},{key:"getVariation",value:function(t){return this.getFonts()[t]}},{key:"addFont",value:function(t,e){return this.getFonts()[t]=e,e}}]),e}();g.prototype.availableOptions={images:{type:v.OptionType.OBJECT,default:{}},fonts:{type:v.OptionType.OBJECT,default:{}}};var m=new g},function(t,e,n){var r=n(18),i=n(111),o=n(81),a=Object.defineProperty;e.f=n(25)?Object.defineProperty:function(t,e,n){if(r(t),e=o(e,!0),r(n),i)try{return a(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){"use strict";(function(t){var r=n(6),i=n.n(r),o=n(15),a=n.n(o),s=n(36),u=n.n(s),l=n(40),c=n.n(l),h=n(0),f=n.n(h),p=n(30),d=n.n(p),v=n(70),y=n.n(v),_=n(1),g=n.n(_),m=n(50),b=n(206),w=i.a||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},x="function"==typeof c.a&&"symbol"==typeof u.a?function(t){return typeof t}:function(t){return t&&"function"==typeof c.a&&t.constructor===c.a&&t!==c.a.prototype?"symbol":typeof t},T=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),f()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function k(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return a()(t)}var C=function(){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e)}return T(e,null,[{key:"isArray",value:function(t){return"[object Array]"===Object.prototype.toString.call(t)}},{key:"isPlainObject",value:function(t){if("object"!==(void 0===t?"undefined":x(t))||!t)return!1;if("function"==typeof g.a){var e=g()(t);return e===Object.prototype||null===e}return"[object Object]"===Object.prototype.toString.call(t)}},{key:"isMobile",value:function(){if("undefined"==typeof navigator)return!1;var t=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od|ad)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}},{key:"isBrowser",value:function(){return"undefined"!=typeof window}},{key:"isNode",value:function(){return"undefined"==typeof window&&void 0!==t}},{key:"values",value:function(t){var e=[];for(var n in t)e.push(t[n]);return e}},{key:"isDOMElement",value:function(t){return"object"===("undefined"==typeof HTMLElement?"undefined":x(HTMLElement))?t instanceof HTMLElement:t&&"object"===(void 0===t?"undefined":x(t))&&null!==t&&1===t.nodeType&&"string"==typeof t.nodeName}},{key:"isTouchEvent",value:function(t){return-1!==t.type.indexOf("touch")}},{key:"resizeVectorToFit",value:function(t,e){var n=Math.min(e.x/t.x,e.y/t.y);return t.clone().multiply(n)}},{key:"resizeVectorToFill",value:function(t,e){var n=t.x/t.y;return n>e.x/e.y?e.clone().set(e.y*n,e.y):e.clone().set(e.x,e.x/n)}},{key:"isExtendable",value:function(t){return void 0!==t&&null!==t&&("object"===(void 0===t?"undefined":x(t))||"function"==typeof t)}},{key:"defaults",value:function(t){var e={};for(var n in t)e[n]=t[n];for(var r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];for(var a=0;a<i.length;a++){var s=i[a];for(var u in s)void 0===e[u]&&(e[u]=s[u])}return e}},{key:"deepMerge",value:function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.reduce(function t(n,r){if(void 0===r)return t(null,n);if(Array.isArray(r))return[].concat(k(r));if(!e.isPlainObject(r))return r;if(!e.isPlainObject(n))return w({},r);var i=w({},n);return y()(r).forEach(function(e){var o=r[e];void 0!==o&&(i[e]=t(n[e],o))}),i},t)}},{key:"deepDefaults",value:function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var o=[].concat(r).reverse();return e.deepMerge.apply(e,k(o).concat([t]))}},{key:"deepClone",value:function(t){var n={};for(var r in t)e.isExtendable(t[r])?n[r]=e.deepClone(t[r]):n[r]=t[r];return n}},{key:"getDeepProperty",value:function(t,e){if("string"==typeof e)return t[e];if(Array.isArray(e)){return e.reduce(function(t,e){return t?"function"==typeof e?function(t,e){var n=void 0;try{n=e(t)}catch(t){if(!(t instanceof TypeError))throw t}return n}(t,e):t[e]:null},t)}}},{key:"extend",value:function(t){var e={};for(var n in t)e[n]=t[n];for(var r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];for(var a=0;a<i.length;a++){var s=i[a];for(var u in s)e[u]=s[u]}return e}},{key:"clone",value:function(t){return this.extend({},t)}},{key:"createBlobURIFromDataURI",value:function(e){var n="undefined"==typeof window?t:window;if(!(n.Blob&&n.URL&&ArrayBuffer&&Uint8Array))return e;for(var r=m.a.decode(e.split(",")[1]),i=e.split(",")[0].split(":")[1].split(";")[0],o=new ArrayBuffer(r.length),a=new Uint8Array(o),s=0;s<r.length;s++)a[s]=r[s];var u=new n.Blob([o],{type:i});return n.URL.createObjectURL(u)}},{key:"getUUID",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})}},{key:"createCanvas",value:function(){return document.createElement("canvas")}},{key:"convertHtmlImageToRGBACanvas",value:function(t){var n=e.createCanvas();return n.width=t.width,n.height=t.height,n.getContext("2d").drawImage(t,0,0,t.width,t.height),n}},{key:"isPowerOfTwo",value:function(t){return 0==(t.x&t.x-1)&&0==(t.y&t.y-1)}},{key:"nextLowestPOT",value:function(t){for(var e=1;e<32;e<<=1)t|=t>>e;return t-(t>>1)}},{key:"nextHighestPOT",value:function(t){t--;for(var e=1;e<32;e<<=1)t|=t>>e;return t+1}},{key:"moveArrayItem",value:function(t,e,n){if(n>=t.length)for(var r=n-t.length;1+r--;)t.push(void 0);t.splice(n,0,t.splice(e,1)[0])}},{key:"ensureCanvasDimensions",value:function(t,e){t.width===e.x&&t.height===e.y||(t.width=e.x,t.height=e.y)}},{key:"byteArrayToString",value:function(t){return t.map(function(t){return String.fromCharCode(t)}).join("")}},{key:"clamp",value:function(t,e,n){return Math.max(e,Math.min(t,n))}},{key:"wildCardMatch",value:function(t,e){return new RegExp("^"+e.split("*").join(".*")+"$").test(t)}},{key:"flipObject",value:function(t){var e={};for(var n in t)e[t[n]]=n;return e}},{key:"cloneOptions",value:function(t){var e={};for(var n in t){var r=t[n];Array.isArray(r)?r=r.slice():r.clone&&(r=r.clone()),e[n]=r}return e}},{key:"ISODateString",value:function(t){function e(t){return t<10?"0"+t:t}return t.getUTCFullYear()+"-"+e(t.getUTCMonth()+1)+"-"+e(t.getUTCDate())+"T"+e(t.getUTCHours())+":"+e(t.getUTCMinutes())+":"+e(t.getUTCSeconds())+"Z"}},{key:"getCrossOriginValue",value:function(t){return t?"none"!==t?t:void 0:"anonymous"}},{key:"shallowEqual",value:function(t,e){if(t===e)return!0;if("object"!==(void 0===t?"undefined":x(t))||null===t||"object"!==(void 0===e?"undefined":x(e))||null===e)return!1;var n=y()(t),r=y()(e);if(n.length!==r.length)return!1;for(var i=hasOwnProperty.bind(e),o=0;o<n.length;o++)if(!i(n[o])||t[n[o]]!==e[n[o]])return!1;return!0}},{key:"enableIf",value:function(t,e){return t?e:void 0}},{key:"invariant",value:function(t,e){if(!t)throw new Error(e)}},{key:"executePromises",value:function(t){var e=t.length,n=0,r=[],i=[];return new d.a(function(o,a){var s=function(){++n>=e&&(i.length<=0?o(r):a(i))},u=function(t){r.push(t),s()},l=function(t){i.push(t),s()};t.forEach(function(t){t.then(u).catch(l)})})}}]),e}();C.Array=b.a,e.a=C}).call(e,n(49))},function(t,e,n){"use strict";n.d(e,"a",function(){return u});var r=n(0),i=n.n(r),o=n(4),a=(n.n(o),function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}());var s=o.Math.Rectangle,u=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.width=e,this.height=n}return a(t,[{key:"set",value:function(t,e){this.width=t,this.height=e}},{key:"aspect",value:function(){return this.width/this.height}},{key:"rectangle",value:function(t,e){return new s(t,e,this.width,this.height)}},{key:"clone",value:function(){return new t(this.width,this.height)}},{key:"scale",value:function(t,e){return void 0===e&&(e=t),this.width*=t,this.height*=e,this}},{key:"copy",value:function(t){return this.width=t.width,this.height=t.height,this}},{key:"fitInWidthWithOther",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new t;return this.copy(t.fitTwoInWidth(e,this,n)[0]),this}}],[{key:"fitTwoInWidth",value:function(e,n,r){var i=n.width*r.height+n.height*r.width,o=r.height*e/i,a=n.width*o,s=n.height*o;return[new t(a,s),new t(e-a,s)]}}]),t}()},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){t.exports=!n(38)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e,n){"use strict";(function(t){var r=n(15),i=n.n(r),o=n(0),a=n.n(o),s=n(199),u=n.n(s),l=n(22),c=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),a()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function h(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return i()(t)}var f=[{name:"trace",type:"trace",background:"#EEEEEE",color:"#AAAAAA"},{name:"info",type:"log",background:"#BDE5F8",color:"#00529B"},{name:"warn",type:"warn",background:"#FEEFB3",color:"#9F6000"},{name:"error",type:"error",background:"#FFBABA",color:"#D8000C"},{name:"log",type:"log",background:"#EEEEEE",color:"#1f4f6b"}],p=function(){return console&&console.group&&console.groupCollapsed&&console.groupEnd},d=new(function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"warn",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this._levels=[].concat(h(r)),this._maxLevel=this.getLevelIndexByName(n),this._consoleFuncs={trace:function(){var t,e;p()?((t=console).groupCollapsed.apply(t,arguments),console.trace(),console.groupEnd()):(e=console).trace.apply(e,arguments)}},this._levels.forEach(function(e){var n=e.name;t[n]=function(e){for(var r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];t._log.apply(t,[n,e].concat(i))}})}return c(e,[{key:"getLevelIndexByName",value:function(t){return l.a.Array.findIndex(this._levels,function(e){return e.name===t})}},{key:"getLevelObjectByName",value:function(t){return l.a.Array.find(this._levels,function(e){return e.name===t})}},{key:"canLog",value:function(t){var e=this.getLevelIndexByName(t);return!(e<0)&&e>=this._maxLevel}},{key:"setLevel",value:function(t){var e=this.getLevelIndexByName(t);e<0||(this._maxLevel=e)}},{key:"_log",value:function(e,n){for(var r=arguments.length,i=Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];var a=this.getLevelObjectByName(e);if(a&&this.canLog(e)){a.name;var s,c=a.type,f=a.background,d=a.color,v=i.filter(function(t){return void 0!==t}).map(function(t){return t.toObject?JSON.parse(u()(t.toObject())):t}),y=this._consoleFuncs[c]||console[c]?function(){var t;return(t=console)[c].apply(t,arguments)}:function(){var t;return(t=console).log.apply(t,arguments)},_=v.length,g=function(t,e){return["background: #2D7BFF; line-height: 20px; padding: 4px 0","background: #2B2B2B; color: white; line-height: 20px; padding: 4px 0","background: #2D7BFF; line-height: 20px; padding: 4px 0","background: "+t+"; color: "+e+"; line-height: 20px; padding: 4px 0; font-weight: bold","background: #2B2B2B; color: white; line-height: 20px; padding: 4px 0","background: #2D7BFF; line-height: 20px; padding: 4px 0"]}(f,d);if(!(!t||t&&t.browser)||"undefined"==typeof navigator||!navigator.userAgent.match(/Gecko|WebKit/i)||navigator.userAgent.match(/Trident/)){var m=v.length;return m<=0?void y("PhotoEditorSDK | "+n+" "):1===m&&"string"==typeof v[0]?void y("PhotoEditorSDK | "+n+" | "+v[0]):void y.apply(void 0,["PhotoEditorSDK | "+n+" | "].concat(h(v)))}if(_<=0)y.apply(void 0,["%c  %c PhotoEditorSDK %c  %c "+n+" %c %c  "].concat(h(g)));else if(1!==_||"string"!=typeof v[0])if(p())(s=console).groupCollapsed.apply(s,["%c  %c PhotoEditorSDK %c  %c "+n+" %c"].concat(h(l.a.Array.init(g)))),y.apply(void 0,h(v)),console.groupEnd();else y.apply(void 0,["%c  %c PhotoEditorSDK %c  %c "+n+" %c"].concat(h(l.a.Array.init(g)),h(v)));else y.apply(void 0,["%c  %c PhotoEditorSDK %c  %c "+n+" %c  "+v[0]+"  %c  "].concat(h(g)))}}},{key:"image",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments[1],n=new window.Image,r=function(){var e=n.width,r=n.height;t&&console.log(t),console.log("%c+","\n        font-size: 1px;\n        padding: 0px "+Math.floor(e/2)+"px;\n        line-height: "+r+"px;\n        background: url("+n.src+");\n        color: transparent;\n        background-repeat: no-repeat;\n        background-size: "+e+"px "+r+"px;")};return n.onload=r,e instanceof window.HTMLCanvasElement?n.src=e.toDataURL():e instanceof window.Image?(n=e,r()):"string"==typeof e?n.src=e:this.log(t,e),n}},{key:"texture",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments[1];if(e){var n=e.getBaseTexture(),r=n.getRenderers(),i=l.a.Array.find(r,function(t){return t&&"WebGL"===t.constructor.type}),o=n.getFrame(),a=o.width,s=o.height;if(i){var u=i.getContext(),c=n.getGLTextureForRenderer(i);this.logGlTexture(u,c,a,s,t)}else d.image(t,n.getSource())}else this.log(t,"texture: null or undefined")}},{key:"logGlTexture",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:150,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:150,i=arguments[4];t.bindTexture(t.TEXTURE_2D,e);var o=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,o),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0);var a=new Uint8Array(n*r*4);t.readPixels(0,0,n,r,t.RGBA,t.UNSIGNED_BYTE,a),t.deleteFramebuffer(o);var s=document.createElement("canvas");s.width=n,s.height=r;var u=s.getContext("2d"),l=u.createImageData(n,r);return l.data.set(a),u.putImageData(l,0,0),d.image(i,s)}}]),e}())("warn");e.a=d}).call(e,n(125))},function(t,e,n){var r=n(21),i=n(45);t.exports=n(25)?function(t,e,n){return r.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var r=n(114),i=n(79);t.exports=function(t){return r(i(t))}},function(t,e,n){t.exports={default:n(183),__esModule:!0}},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var a=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=e,this.y=n,void 0===this.x&&(this.x=0),void 0===this.y&&(this.y=0)}return o(t,[{key:"set",value:function(t,e){return this.x=t,this.y=e,this}},{key:"clone",value:function(){return new t(this.x,this.y)}},{key:"copy",value:function(t){return this.x=t.x,this.y=t.y,this}},{key:"clamp",value:function(e,n){var r=null!==e&&void 0!==e,i=null!==n&&void 0!==n;return e instanceof t||!r||(e=new t(e,e)),n instanceof t||!i||(n=new t(n,n)),r&&(this.x=Math.max(e.x,this.x),this.y=Math.max(e.y,this.y)),i&&(this.x=Math.min(n.x,this.x),this.y=Math.min(n.y,this.y)),this}},{key:"divide",value:function(e,n){return e instanceof t?(this.x/=e.x,this.y/=e.y):(this.x/=e,this.y/=void 0===n?e:n),this}},{key:"subtract",value:function(e,n){return e instanceof t?(this.x-=e.x,this.y-=e.y):(this.x-=e,this.y-=void 0===n?e:n),this}},{key:"multiply",value:function(e,n){return e instanceof t?(this.x*=e.x,this.y*=e.y):(this.x*=e,this.y*=void 0===n?e:n),this}},{key:"add",value:function(e,n){return e instanceof t?(this.x+=e.x,this.y+=e.y):(this.x+=e,this.y+=void 0===n?e:n),this}},{key:"dot",value:function(e,n){return e instanceof t?this.x*e.x+this.y*e.y:this.x*e+this.y*(void 0===n?e:n)}},{key:"equals",value:function(e,n){return e instanceof t?e.x===this.x&&e.y===this.y:e===this.x&&n===this.y}},{key:"flip",value:function(){var t=this.x;return this.x=this.y,this.y=t,this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}},{key:"floor",value:function(){return this.x=0|this.x,this.y=0|this.y,this}},{key:"abs",value:function(){return this.x=Math.abs(this.x),this.y=Math.abs(this.y),this}},{key:"len",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"min",value:function(){return Math.min(this.x,this.y)}},{key:"max",value:function(){return Math.max(this.x,this.y)}},{key:"toObject",value:function(){return{x:this.x,y:this.y}}},{key:"toString",value:function(){return"Vector2({ x: "+this.x+", y: "+this.y+" })"}},{key:"roundDecimal",value:function(t){return this.x=parseFloat(this.x.toFixed(t)),this.y=parseFloat(this.y.toFixed(t)),this}}],[{key:"fromObject",value:function(e){return new t(e.x,e.y)}},{key:"NULL",get:function(){return new t(0,0)}}]),t}();e.a=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"RenderType",function(){return r}),n.d(e,"ImageFormat",function(){return i}),n.d(e,"OptionType",function(){return o}),n.d(e,"UniformType",function(){return a}),n.d(e,"RendererType",function(){return s});var r={IMAGE:"image",DATAURL:"data-url",BUFFER:"buffer",BLOB:"blob",MSBLOB:"ms-blob"},i={PNG:"image/png",JPEG:"image/jpeg"},o={NUMBER:"number",VECTOR2:"vector2",COLOR_MATRIX:"color-matrix",COLOR:"color",ARRAY:"array",OBJECT:"object",STRING:"string",BOOLEAN:"boolean",CONFIGURABLE:"configurable",IMAGE:"image",FUNCTION:"function",TEXTURE:"texture",ALL:"*"},a={SAMPLER2D:"sampler2d",INT:"i",INT1:"1i",FLOAT:"f",FLOAT1:"1f",FLOAT2:"2f",FLOAT_VECTOR2:"2fv",FLOAT3:"3f",FLOAT4:"4f",MAT3:"mat3",MAT3FV:"mat3fv",MAT4:"mat4"},s={WEBGL:"webgl",CANVAS:"canvas"}},function(t,e,n){"use strict";(function(t){var r=n(36),i=n.n(r),o=n(40),a=n.n(o),s=n(30),u=n.n(s),l=n(0),c=n.n(l),h=n(226),f=n.n(h),p="function"==typeof a.a&&"symbol"==typeof i.a?function(t){return typeof t}:function(t){return t&&"function"==typeof a.a&&t.constructor===a.a&&t!==a.a.prototype?"symbol":typeof t},d=void 0===t?window:t,v=void 0!==u.a?u.a:function(){var t,e,n,r=Object.prototype.toString,i=void 0!==f.a?function(t){return f()(t)}:setTimeout;try{Object.defineProperty({},"x",{}),t=function(t,e,n,r){return c()(t,e,{value:n,writable:!0,configurable:!1!==r})}}catch(e){t=function(t,e,n){return t[e]=n,t}}function o(t,r){n.add(t,r),e||(e=i(n.drain))}function a(t){var e,n=void 0===t?"undefined":p(t);return null==t||"object"!=n&&"function"!=n||(e=t.then),"function"==typeof e&&e}function s(){for(var t=0;t<this.chain.length;t++)u(this,1===this.state?this.chain[t].success:this.chain[t].failure,this.chain[t]);this.chain.length=0}function u(t,e,n){var r,i;try{!1===e?n.reject(t.msg):(r=!0===e?t.msg:e.call(void 0,t.msg))===n.promise?n.reject(TypeError("Promise-chain cycle")):(i=a(r))?i.call(r,n.resolve,n.reject):n.resolve(r)}catch(t){n.reject(t)}}function l(t){var e=this;e.triggered||(e.triggered=!0,e.def&&(e=e.def),e.msg=t,e.state=2,e.chain.length>0&&o(s,e))}function h(t,e,n,r){for(var i=0;i<e.length;i++)!function(i){t.resolve(e[i]).then(function(t){n(i,t)},r)}(i)}function d(t){this.def=t,this.triggered=!1}function v(t){if("function"!=typeof t)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var e=new function(t){this.promise=t,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}(this);this.then=function(t,n){var r={success:"function"!=typeof t||t,failure:"function"==typeof n&&n};return r.promise=new this.constructor(function(t,e){if("function"!=typeof t||"function"!=typeof e)throw TypeError("Not a function");r.resolve=t,r.reject=e}),e.chain.push(r),0!==e.state&&o(s,e),r.promise},this.catch=function(t){return this.then(void 0,t)};try{t.call(void 0,function(t){(function t(e){var n,r=this;if(!r.triggered){r.triggered=!0,r.def&&(r=r.def);try{(n=a(e))?o(function(){var i=new d(r);try{n.call(e,function(){t.apply(i,arguments)},function(){l.apply(i,arguments)})}catch(t){l.call(i,t)}}):(r.msg=e,r.state=1,r.chain.length>0&&o(s,r))}catch(t){l.call(new d(r),t)}}}).call(e,t)},function(t){l.call(e,t)})}catch(t){l.call(e,t)}}n={add:function(t,e){g=new function(t,e){this.fn=t,this.self=e,this.next=void 0}(t,e),_?_.next=g:y=g,_=g,g=void 0},drain:function(){var t=y;for(y=_=e=void 0;t;)t.fn.call(t.self),t=t.next}};var y,_,g;var m=t({},"constructor",v,!1);return v.prototype=m,t(m,"__NPO__",0,!1),t(v,"resolve",function(t){return t&&"object"==(void 0===t?"undefined":p(t))&&1===t.__NPO__?t:new this(function(e,n){if("function"!=typeof e||"function"!=typeof n)throw TypeError("Not a function");e(t)})}),t(v,"reject",function(t){return new this(function(e,n){if("function"!=typeof e||"function"!=typeof n)throw TypeError("Not a function");n(t)})}),t(v,"all",function(t){var e=this;return"[object Array]"!=r.call(t)?e.reject(TypeError("Not an array")):0===t.length?e.resolve([]):new e(function(n,r){if("function"!=typeof n||"function"!=typeof r)throw TypeError("Not a function");var i=t.length,o=Array(i),a=0;h(e,t,function(t,e){o[t]=e,++a===i&&n(o)},r)})}),t(v,"race",function(t){var e=this;return"[object Array]"!=r.call(t)?e.reject(TypeError("Not an array")):new e(function(n,r){if("function"!=typeof n||"function"!=typeof r)throw TypeError("Not a function");h(e,t,function(t,e){n(e)},r)})}),v}();d.Promise=d.Promise||v,e.a=v}).call(e,n(49))},function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n(15),i=n.n(r),o=n(0),a=n.n(o),s=n(4),u=(n.n(s),function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),a()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}());function l(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return i()(t)}var c=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.words=[],e&&this.splitIntoWords(e)}return u(t,[{key:"splitIntoWords",value:function(t){return this.words=t.match(/\S+/g)||[],[].concat(l(this.words))}},{key:"get",value:function(){return[].concat(l(this.words))}},{key:"getWord",value:function(t){return this.words[t]}},{key:"set",value:function(t){return this.words=[].concat(l(t)),this}},{key:"slice",value:function(e,n){return t.fromWords(this.words.slice(e,n))}},{key:"getLowerCase",value:function(){return this.words.map(function(t){return t.toLowerCase()})}},{key:"getUpperCase",value:function(){return this.words.map(function(t){return t.toUpperCase()})}},{key:"size",value:function(){return this.words.length}},{key:"countNumberOfCharacters",value:function(){return this.words.reduce(function(t,e){return t+e.length},0)}},{key:"joined",value:function(t){var e=this,n=this.size(),r=Math.floor(n/t),i=n%t,o=0,a=0;return s.Utils.Array.range(0,t).map(function(t){o=a;var u=r+(t<i?1:0);return a=Math.min(o+u,n),s.Utils.Array.range(o,a).reduce(function(t,n){return t+(n===o?"":" ")+e.words[n]},"")})}}],[{key:"fromWords",value:function(e){var n=new t;return n.words=[].concat(l(e)),n}}]),t}()},function(t,e,n){"use strict";n.d(e,"c",function(){return f}),n.d(e,"e",function(){return p}),n.d(e,"d",function(){return d}),n.d(e,"b",function(){return y}),n.d(e,"a",function(){return _});var r=n(71),i=n.n(r),o=n(72),a=n.n(o),s=n(4),u=(n.n(s),function(){return function(t,e){if(Array.isArray(t))return t;if(i()(Object(t)))return function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var s,u=a()(t);!(r=(s=u.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&u.return&&u.return()}finally{if(i)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()),l=s.Math.Rectangle,c=s.Math.Vector2,h=function(t,e,n,r){t.drawImage(e,n.x,n.y,n.width,n.height,r.x,r.y,r.width,r.height)},f=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"source-over",i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];t.save(),t.fillStyle=n.toRGBA(),t.globalCompositeOperation=r,t.fillRect(e.x,e.y,e.width,e.height),i&&(t.strokeStyle=n.toRGBA(),t.strokeWith=1,t.strokeRect(e.x,e.y,e.width,e.height)),t.restore()},p=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:4;t.save(),t.strokeStyle=n.toRGBA(),t.lineWidth=r,t.strokeRect(e.x,e.y,e.width,e.height),t.restore()},d=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"source-over";t.save();var i=e.height/2,o=e.y+i,a=e.x+i,s=e.x+e.width;for(t.fillStyle=n.toRGBA(),t.globalCompositeOperation=r;a<s;)t.beginPath(),t.arc(a,o,i,0,2*Math.PI),t.fill(),a+=4*i;t.restore()},v=function(t,e){var n=e.applyToRectangle(t),r=t.x,i=t.y,o=t.width,a=t.height;return{corners:[l.FromDiagonalPoints(new c(0,0),new c(n.x,n.y)),l.FromDiagonalPoints(new c(0,n.y+n.height),new c(n.x,a)),l.FromDiagonalPoints(new c(n.x+n.width,n.y+n.height),new c(o,a)),l.FromDiagonalPoints(new c(n.x+n.width,0),new c(o,n.y))].map(function(t){return t.translate(r,i)}),bars:[l.FromDiagonalPoints(new c(n.x,0),new c(n.x+n.width,n.y)),l.FromDiagonalPoints(new c(0,n.y),new c(n.x,n.y+n.height)),l.FromDiagonalPoints(new c(n.x,n.y+n.height),new c(n.x+n.width,a)),l.FromDiagonalPoints(new c(n.x+n.width,n.y),new c(o,n.y+n.height))].map(function(t){return t.translate(r,i)}),center:n}},y=function(t,e,n,r){var i=e.naturalWidth||e.width,o=e.naturalHeight||e.height,a=v(new l(0,0,i,o),r),c=v(n,r);h(t,e,a.center,c.center),s.Utils.Array.zip(a.corners,c.corners).forEach(function(n){var r=u(n,2),i=r[0],o=r[1];return h(t,e,i,o)}),s.Utils.Array.zip(a.bars,c.bars).forEach(function(n){var r=u(n,2),i=r[0],o=r[1];return h(t,e,i,o)})},_=function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"source-atop";if(t.save(),r&&(t.globalAlpha=r.a),t.drawImage(e,n.x,n.y,n.width,n.height),r&&(t.globalAlpha=1),r){var o=r.clone();o.a=1,f(t,n,o,i)}t.restore()}},function(t,e,n){t.exports={default:n(159),__esModule:!0}},function(t,e,n){var r=n(64);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e){t.exports={}},function(t,e,n){t.exports={default:n(168),__esModule:!0}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(69),i=n(32),o=n(50),a=n(52),s=n(238),u=n(22),l=n(55),c=n(51),h=n(26),f=n(33),p=n(128),d=n(239),v=n(249);n.d(e,"requestAnimationFrame",function(){return v.b}),n.d(e,"cancelAnimationFrame",function(){return v.a}),n.d(e,"Engine",function(){return r.a}),n.d(e,"EventEmitter",function(){return a.a}),n.d(e,"Events",function(){return s.a}),n.d(e,"Utils",function(){return u.a}),n.d(e,"Configurable",function(){return l.a}),n.d(e,"Color",function(){return c.a}),n.d(e,"Constants",function(){return i}),n.d(e,"Log",function(){return h.a}),n.d(e,"Promise",function(){return f.a}),n.d(e,"GLUtils",function(){return p.a}),n.d(e,"Base64",function(){return o.a}),n.d(e,"LicenseChecker",function(){return d.b}),n.d(e,"FreeLicenseChecker",function(){return d.a});var y=n(138);n.d(e,"Vector2",function(){return y.Vector2}),n.d(e,"Vector3",function(){return y.Vector3}),n.d(e,"Rectangle",function(){return y.Rectangle}),n.d(e,"Matrix",function(){return y.Matrix}),n.d(e,"ColorMatrix",function(){return y.ColorMatrix}),n.d(e,"CubicBezierCurve",function(){return y.CubicBezierCurve})},function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n(2),i=n.n(r),o=n(3),a=n.n(o),s=n(1),u=n.n(s),l=n(4);n.n(l);var c=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||u()(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=a()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(i.a?i()(t,e):t.__proto__=e)}(e,l["Configurable"]),e}();c.prototype.availableOptions={text:{type:l.OptionType.STRING,default:""},frame:{type:l.OptionType.OBJECT,default:null},font:{type:l.OptionType.OBJECT,default:null}}},function(t,e,n){"use strict";n.d(e,"a",function(){return C});var r=n(6),i=n.n(r),o=n(0),a=n.n(o),s=n(5),u=n.n(s),l=n(2),c=n.n(l),h=n(3),f=n.n(h),p=n(1),d=n.n(p),v=n(4),y=(n.n(v),n(59)),_=n(34),g=n(62),m=n(107),b=n(20),w=n(16),x=i.a||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},T=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),a()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),k=function t(e,n,r){null===e&&(e=Function.prototype);var i=u()(e,n);if(void 0===i){var o=d()(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0};var C=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(t=e.__proto__||d()(e)).call.apply(t,[this].concat(r)));return o._rowType=g.a.Box,o._alignmentRandomizer=new w.a(0),o._isMaskedRandomizer=new w.a(0),o._seedPool.push(o._alignmentRandomizer),o._seedPool.push(o._isMaskedRandomizer),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=f()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(c.a?c()(t,e):t.__proto__=e)}(e,y["a"]),T(e,[{key:"getImagePaths",value:function(){return[g.a.Box.getImagePath()]}},{key:"_modifiedText",value:function(t){return k(e.prototype.__proto__||d()(e.prototype),"_modifiedText",this).call(this,t).toLowerCase()}},{key:"_modifiedLines",value:function(t){var e=new _.a;return e.set([t.reduce(function(t,e){return t+(""===t?"":"\n")+e.joined(1)[0]},"")]),[e]}},{key:"_layoutRows",value:function(t,n){var r=k(e.prototype.__proto__||d()(e.prototype),"_layoutRows",this).call(this,t,n),i=r[0];if(i&&this.getSquareLayout()){var o=i.getSize();o.height=o.width}return r}},{key:"getAlignment",value:function(){return this._alignmentRandomizer.pickNext(this.constructor.ValidAlignments||e.ValidAlignments)}},{key:"_randomLayoutRow",value:function(t,e,n,r){var i=this.getAlignment(),o=this._rowType,a=b.a.getImage(o.getImagePath());r.setAlignment(i);var s=new m.a({words:t,width:n,attributes:r,image:a,imageInsets:o.insetsForWidth(n),capInsets:o.getCapInsets(),backgroundColor:v.Color.WHITE,centerOffset:0,textScaleFactor:.7,isMasked:this._isMaskedRandomizer.nextBool()});this._rowType===g.a.Box&&(s.serverImageSmoothingFix=!0);var u=s.getSize();return this.getSquareLayout()?u.height=u.width:u.height=Math.max(u.height,u.width*o.getMinimumHeightRatio()),s}}]),e}();C.defaultFontIdentifiers=["imgly_font_galano_grotesque_bold"],C.Alignment={Left:"left",Center:"center",Right:"right"},C.ValidAlignments=[C.Alignment.Left,C.Alignment.Center,C.Alignment.Right],C.identifier="imgly_text_design_masked",C.prototype.availableOptions=x({},y.a.prototype.availableOptions,{fontIdentifiers:{type:v.OptionType.ARRAY,default:C.defaultFontIdentifiers},squareLayout:{type:v.OptionType.BOOLEAN,default:!0}})},function(t,e,n){"use strict";var r=n(160)(!0);n(110)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){var r=n(113),i=n(86);t.exports=Object.keys||function(t){return r(t,i)}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){var r=n(79);t.exports=function(t){return Object(r(t))}},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",i={encode:function(t){var e="",n=void 0,i=void 0,o=void 0,a=void 0,s=void 0,u=void 0,l=void 0,c=0;do{a=(n=t[c++])>>2,s=(3&n)<<4|(i=t[c++])>>4,u=(15&i)<<2|(o=t[c++])>>6,l=63&o,isNaN(i)?u=l=64:isNaN(o)&&(l=64),e=e+r.charAt(a)+r.charAt(s)+r.charAt(u)+r.charAt(l),n=i=o="",a=s=u=l=""}while(c<t.length);return e},decode:function(t){var e=void 0,n=void 0,i=void 0,o=void 0,a=void 0,s=void 0,u=0,l=[];if(/[^A-Za-z0-9+/=]/g.exec(t))throw new Error("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\nExpect errors in decoding.");t=t.replace(/[^A-Za-z0-9+/=]/g,"");do{e=r.indexOf(t.charAt(u++))<<2|(o=r.indexOf(t.charAt(u++)))>>4,n=(15&o)<<4|(a=r.indexOf(t.charAt(u++)))>>2,i=(3&a)<<6|(s=r.indexOf(t.charAt(u++))),l.push(e),64!==a&&l.push(n),64!==s&&l.push(i),e=n=i="",o=a=s=""}while(u<t.length);return l}};e.a=i},function(t,e,n){"use strict";var r=n(71),i=n.n(r),o=n(72),a=n.n(o),s=n(0),u=n.n(s),l=function(){return function(t,e){if(Array.isArray(t))return t;if(i()(Object(t)))return function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var s,u=a()(t);!(r=(s=u.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&u.return&&u.return()}finally{if(i)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),u()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var h=function(){function t(e,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.r=e,this.g=n,this.b=r,this.a=i}return c(t,[{key:"toRGBA",value:function(){return"rgba("+[Math.round(255*this.r),Math.round(255*this.g),Math.round(255*this.b),this.a.toFixed(2)].join(",")+")"}},{key:"set",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.a;return this.r=t,this.g=e,this.b=n,this.a=r,this}},{key:"toRGB",value:function(){return[Math.round(255*this.r),Math.round(255*this.g),Math.round(255*this.b)]}},{key:"toHex",value:function(){return"#"+[this._componentToHex(Math.round(255*this.r)),this._componentToHex(Math.round(255*this.g)),this._componentToHex(Math.round(255*this.b))].join("")}},{key:"toGLColor",value:function(){return[this.r,this.g,this.b,this.a]}},{key:"toArray",value:function(){return this.toGLColor()}},{key:"toRGBGLColor",value:function(){return[this.r,this.g,this.b]}},{key:"toHSV",value:function(){var t,e=Math.max(this.r,this.g,this.b),n=Math.min(this.r,this.g,this.b),r=void 0,i=e,o=e-n;if(t=0===e?0:o/e,e===n)r=0;else{switch(e){case this.r:r=(this.g-this.b)/o,this.g<this.b&&(r+=6);break;case this.g:r=(this.b-this.r)/o+2;break;case this.b:r=(this.r-this.g)/o+4}r/=6}return[r,t,i]}},{key:"fromHSV",value:function(e,n,r){return this.copy(t.fromHSV(e,n,r)),this}},{key:"clone",value:function(){return new t(this.r,this.g,this.b,this.a)}},{key:"add",value:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this.a+=t.a,this}},{key:"minus",value:function(t){return this.r-=t.r,this.g-=t.g,this.b-=t.b,this.a-=t.a,this}},{key:"multiplyScalar",value:function(t){return this.r*=t,this.g*=t,this.b*=t,this.a*=t,this}},{key:"divideScalar",value:function(t){return this.r/=t,this.g/=t,this.b/=t,this.a/=t,this}},{key:"clamp",value:function(t,e){return this.r=Math.min(Math.max(this.r,t),e),this.g=Math.min(Math.max(this.g,t),e),this.b=Math.min(Math.max(this.b,t),e),this.a=Math.min(Math.max(this.a,t),e),this}},{key:"mix",value:function(t,e){return this.r=(1-e)*this.r+e*t.r,this.g=(1-e)*this.g+e*t.g,this.b=(1-e)*this.b+e*t.b,this.a=(1-e)*this.a+e*t.a,this}},{key:"copy",value:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this}},{key:"equals",value:function(t){return this.r===t.r&&this.g===t.g&&this.b===t.b&&this.a===t.a}},{key:"_componentToHex",value:function(t){var e=t.toString(16);return 1===e.length?"0"+e:e}},{key:"toString",value:function(){return"Color("+this.r+", "+this.g+", "+this.b+", "+this.a+")"}}],[{key:"fromHSV",value:function(e,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=[],a=o[0],s=o[1],u=o[2],l=Math.floor(6*e),c=6*e-l,h=r*(1-n),f=r*(1-c*n),p=r*(1-(1-c)*n);switch(l%6){case 0:a=r,s=p,u=h;break;case 1:a=f,s=r,u=h;break;case 2:a=h,s=r,u=p;break;case 3:a=h,s=f,u=r;break;case 4:a=p,s=h,u=r;break;case 5:a=r,s=h,u=f}return new t(a,s,u,i)}},{key:"fromArray",value:function(e){return new t(e[0],e[1],e[2],e[3])}},{key:"fromHex",value:function(e){var n=e.match(/[0-9A-fa-f]{1,2}/g),r=l(n,3),i=r[0],o=r[1],a=r[2];return new t(parseInt(i,16)/255,parseInt(o,16)/255,parseInt(a,16)/255,1)}},{key:"TRANSPARENT",get:function(){return new t(0,0,0,0)}},{key:"WHITE",get:function(){return new t(1,1,1,1)}},{key:"BLACK",get:function(){return new t(0,0,0,1)}},{key:"RED",get:function(){return new t(1,0,0,1)}},{key:"BLUE",get:function(){return new t(0,0,1,1)}},{key:"GREEN",get:function(){return new t(0,1,0,1)}}]),t}();e.a=h},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=n(26),a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var s=12,u=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._maxListeners=s,this._events={},this._pipeDestinations=[]}return a(t,[{key:"pipeEvents",value:function(t){this._pipeDestinations.push(t)}},{key:"unpipeEvents",value:function(t){var e=this._pipeDestinations.indexOf(t);-1!==e&&this._pipeDestinations.splice(e,1)}},{key:"on",value:function(t,e){if(void 0===t)throw new Error("Invalid event type: `"+t+"`");if("function"!=typeof e)throw new TypeError;var n=this._events[t]||(this._events[t]=[]);return-1!==n.indexOf(e)?this:(n.push(e),this._maxListeners&&n.length>this._maxListeners&&(o.a.warn("EventEmitter","Possible memory leak detected, added "+n.length+" `"+t+"` listeners (current limit is "+this._maxListeners+")"),"undefined"!=typeof console&&console.trace()),this)}},{key:"once",value:function(t,e){if(void 0===t)throw new Error("Invalid event type: `"+t+"`");var n=this;return this.on(t,function r(){n.off(t,r),e.apply(null,arguments)})}},{key:"off",value:function(t){if(void 0===t)throw new Error("Invalid event type: `"+t+"`");if(0==(arguments.length<=1?0:arguments.length-1))return this._events[t]=null,this;var e=arguments.length<=1?void 0:arguments[1];if("function"!=typeof e)throw new TypeError;var n=this._events[t];if(!n||!n.length)return this;var r=n.indexOf(e);return-1===r?this:(n.splice(r,1),this)}},{key:"emit",value:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];if(void 0===t)throw new Error("Invalid event type: `"+t+"`");this._pipeDestinations.forEach(function(e){e.emit.apply(e,[t].concat(n))});var i=this._events[t];return!(!i||!i.length)&&(i.slice(0).forEach(function(t){return t.apply(null,n)}),!0)}},{key:"setMaxListeners",value:function(t){if(parseInt(t,10)!==t)throw new TypeError;this._maxListeners=t}}]),t}();e.a=u},function(t,e,n){"use strict";var r=n(15),i=n.n(r),o=n(0),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),h=n(1),f=n.n(h),p=n(9),d=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),a()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var v=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||f()(e)).call(this));return n.id=e.id++,n._onSourceLoaded=n._onSourceLoaded.bind(n),n._renderers=[],n._glTextures={},n._source=t,n._dirty=!0,n._glUnit=0,n._mipMapping=!1,n._magFilter=e.DefaultMagFilter,n._minFilter=e.DefaultMinFilter,n._repeatX=e.ClampToEdge,n._repeatY=e.ClampToEdge,n._pixelRatio=1,n._loaded=!1,n._frame=new p.h(0,0,100,100),t&&n._loadSource(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=c()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(u.a?u()(t,e):t.__proto__=e)}(e,p["d"]),d(e,[{key:"resizeTo",value:function(t){this._frame.width===t.x&&this._frame.height===t.y||(this._frame.width=t.x,this._frame.height=t.y,this._dirty=!0)}},{key:"_loadSource",value:function(){var t=this._source,e=t.complete,n="Canvas"===t.constructor.name||t.tagName&&"CANVAS"===t.tagName.toUpperCase();if(e||n)return this._onSourceLoaded();t.addEventListener("load",this._onSourceLoaded)}},{key:"_onSourceLoaded",value:function(){this._loaded=!0,this.emit("loaded"),this.update()}},{key:"_updateGLFilters",value:function(){var t=new p.k(this._source.width,this._source.height);p.i.isPowerOfTwo(t)?(p.f.info(this.constructor.name,"Mip-mapping enabled"),this._minFilter=e.TrilinearFilter,this._mipMapping=!0):(this._minFilter=e.LinearFilter,this._mipMapping=!1)}},{key:"update",value:function(){this._frame.width===this._source.width&&this._frame.height===this._source.height||(this._frame=new p.h(0,0,this._source.width,this._source.height),this._dirty=!0),this._updateGLFilters(),this.emit("update")}},{key:"getRenderers",value:function(){return[].concat(function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return i()(t)}(this._renderers))}},{key:"getGLFilter",value:function(t,e){switch(e){case"min":return this.constructor.getGLFilter(t,this._minFilter);case"mag":return this.constructor.getGLFilter(t,this._magFilter)}}},{key:"isLoaded",value:function(){return this._loaded}},{key:"setLoaded",value:function(t){this._loaded=t}},{key:"getSource",value:function(){return this._source}},{key:"setSource",value:function(t){this._source=t}},{key:"getGLTextureForRenderer",value:function(t){return this._glTextures[t.id]}},{key:"setGLTextureForRenderer",value:function(t,e){this._renderers[e.id]=e,this._glTextures[e.id]=t}},{key:"getFrame",value:function(){return this._frame}},{key:"setFrame",value:function(t){this._frame=t}},{key:"getDimensions",value:function(){return new p.k(this._frame.width,this._frame.height)}},{key:"getPixelRatio",value:function(){return this._pixelRatio}},{key:"setPixelRatio",value:function(t){this._pixelRatio=t}},{key:"getGLUnit",value:function(){return this._glUnit}},{key:"setGLUnit",value:function(t){this._glUnit=t}},{key:"setMinFilter",value:function(t){this._minFilter=t}},{key:"getMinFilter",value:function(){return this._minFilter}},{key:"setMagFilter",value:function(t){this._magFilter=t}},{key:"getMagFilter",value:function(){return this._magFilter}},{key:"setRepeatX",value:function(t){this._repeatX=t}},{key:"getRepeatX",value:function(){return this._repeatX}},{key:"setRepeatY",value:function(t){this._repeatY=t}},{key:"getRepeatY",value:function(){return this._repeatY}},{key:"getGLRepeat",value:function(t,n){switch("x"===n?this.getRepeatX():this.getRepeatY()){case e.ClampToEdge:return t.CLAMP_TO_EDGE;case e.Repeat:return t.REPEAT;case e.MirroredRepeat:return t.MIRRORED_REPEAT}}},{key:"isDirty",value:function(){return this._dirty}},{key:"setDirty",value:function(t){this._dirty=t}},{key:"disposeGLTextures",value:function(){var t=this;this._renderers.forEach(function(e){t.disposeGLTexturesForRenderer(e)})}},{key:"disposeGLTexturesForRenderer",value:function(t){this._glTextures[t.id]&&(t.getContext().deleteTexture(this._glTextures[t.id]),delete this._glTextures[t.id],this._renderers[t.id]||delete this._renderers[t.id])}},{key:"isMipMappingEnabled",value:function(){return this._mipMapping}},{key:"setMipMappingEnabled",value:function(t){this._mipMapping=t}},{key:"dispose",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.disposeGLTextures()}}],[{key:"getGLFilter",value:function(t,n){switch(n){case e.LinearFilter:return t.LINEAR;case e.NearestFilter:return t.NEAREST;case e.BilinearFilter:return t.LINEAR_MIPMAP_NEAREST;case e.TrilinearFilter:return t.LINEAR_MIPMAP_LINEAR}}}]),e}();v.NearestFilter=0,v.LinearFilter=1,v.BilinearFilter=2,v.TrilinearFilter=3,v.DefaultMagFilter=v.NearestFilter,v.DefaultMinFilter=v.LinearFilter,v.ClampToEdge=0,v.Repeat=1,v.MirroredRepeat=2,v.id=0,e.a=v},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=n(5),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),h=n(1),f=n.n(h),p=n(9),d=n(55),v=n(98),y=n(97),_=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),g=function t(e,n,r){null===e&&(e=Function.prototype);var i=a()(e,n);if(void 0===i){var o=f()(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0};var m=p.c.OptionType,b=p.c.UniformType,w=p.c.RendererType,x=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||f()(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=c()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(u.a?u()(t,e):t.__proto__=e)}(e,d["a"]),_(e,[{key:"_initOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._shaders=[],this._availableUniforms=y.a.defaultUniforms,this._attributes=y.a.defaultAttributes,this._vertexSource=y.a.defaultVertexSource,this._fragmentSource=y.a.defaultFragmentSource,this._initUniforms(),g(e.prototype.__proto__||f()(e.prototype),"_initOptions",this).call(this,t)}},{key:"_initUniforms",value:function(){for(var t in this._uniforms={},this._availableUniforms){var e=this._availableUniforms[t];this._uniforms[t]={type:e.type,value:e.default||null}}for(var n in this.availableOptions){var r=this.availableOptions[n];r.uniformType?this._uniforms["u_"+n]={type:r.uniformType,value:r.default||null}:p.f.trace(this.constructor.name,"Option `"+n+"` is missing a `uniformType`!")}}},{key:"setOption",value:function(t,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];g(e.prototype.__proto__||f()(e.prototype),"setOption",this).call(this,t,n,r);var i=n,o=this.availableOptions[t];if(o.uniformType){var a="u_"+t;switch(o.type){case m.COLOR:o.uniformType===b.FLOAT4?i=n.toGLColor():o.uniformType===b.FLOAT3&&(i=n.toRGBGLColor());break;case m.VECTOR2:i=[n.x,n.y];break;case m.COLOR_MATRIX:i=[n.a,n.b,n.c,n.d,n.f,n.g,n.h,n.i,n.k,n.l,n.m,n.n,n.p,n.q,n.r,n.s];var s=[n.e,n.j,n.o,n.t];this._uniforms[a+"_vec"]={value:s,type:b.FLOAT4}}this.setUniform(a,i)}}},{key:"setUniform",value:function(t,e){arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._uniforms[t].value=e}},{key:"setUniforms",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(var n in t)this._uniforms[n].value=t[n],e&&this.syncUniform(n)}},{key:"syncUniform",value:function(t){this._shaders.forEach(function(e){e.syncUniform(t)})}},{key:"syncUniforms",value:function(){this._shaders.forEach(function(t){t.syncUniforms()})}},{key:"getShaderForRenderer",value:function(t){var e=t.getContext(),n=this._shaders[e.id];return n||(n=new v.a(t,this._vertexSource,this._fragmentSource,this._uniforms,this._attributes),this._shaders[e.id]=n),n}},{key:"apply",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];t.isOfType(w.WEBGL)?this._applyWebGL(t,e,n,r):t.isOfType(w.CANVAS)&&this._applyCanvas(t,e,n,r)}},{key:"_applyWebGL",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=t.getContext(),o=this.getShaderForRenderer(t);t.setRenderTarget(n),r&&n.clear(),t.setShader(o);var a=t.getCurrentRenderTarget().getProjectionMatrix().toArray();o.setUniform("u_projMatrix",a),o.syncUniforms(),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,e.getTexture()),i.drawElements(i.TRIANGLES,6,i.UNSIGNED_SHORT,0)}},{key:"_applyCanvas",value:function(t,e,n){arguments.length>3&&void 0!==arguments[3]&&arguments[3];var r=e.getCanvas(),i=n.getContext();p.f.warn(this.constructor.name,"`_applyCanvas` is not implemented. Just copying image data from `inputTarget` to `outputTarget`."),i.clearRect(0,0,r.width,r.height),i.drawImage(r,0,0)}},{key:"dispose",value:function(){this._shaders.forEach(function(t){return t.dispose()}),this._shaders=[]}}]),e}();e.a=x},function(t,e,n){"use strict";var r=n(36),i=n.n(r),o=n(40),a=n.n(o),s=n(6),u=n.n(s),l=n(0),c=n.n(l),h=n(2),f=n.n(h),p=n(3),d=n.n(p),v=n(70),y=n.n(v),_=n(1),g=n.n(_),m=n(33),b=n(26),w=n(52),x=n(31),T=n(51),k=n(22),C=n(75),R=n(136),E=n(32),O="function"==typeof a.a&&"symbol"==typeof i.a?function(t){return typeof t}:function(t){return t&&"function"==typeof a.a&&t.constructor===a.a&&t!==a.a.prototype?"symbol":typeof t},A=u.a||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},S=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),c()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var F=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||g()(e)).call(this));return r.availableOptions=r.availableOptions||{},r.availableOptions=k.a.extend(r.availableOptions,n),r._onConfigurableUpdate=r._onConfigurableUpdate.bind(r),r._initOptions(t),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=d()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(f.a?f()(t,e):t.__proto__=e)}(e,w["a"]),S(e,[{key:"_buildConfigError",value:function(t){var e="";return this.constructor.name&&(e=this.constructor.name+": "),e+=t,new Error(e)}},{key:"_onOptionsChange",value:function(){}},{key:"validateSettings",value:function(){var t=this;return new m.a(function(e,n){for(var r in t.availableOptions){if(t.availableOptions[r].required&&void 0===t._options[r])return n(t._buildConfigError("Option `"+r+"` is required."))}e()})}},{key:"_initOptions",value:function(){var t,n,r,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._options={};var o=this;for(t in this.availableOptions){if(r=t.charAt(0).toUpperCase()+t.slice(1),n=this.availableOptions[t],-1===[E.OptionType.STRING,E.OptionType.NUMBER,E.OptionType.BOOLEAN,E.OptionType.OBJECT,E.OptionType.VECTOR2,E.OptionType.COLOR,E.OptionType.CONFIGURABLE,E.OptionType.COLOR_MATRIX,E.OptionType.ARRAY,E.OptionType.IMAGE,E.OptionType.FUNCTION,E.OptionType.ALL].indexOf(n.type))throw this._buildConfigError("Unknown option type: `"+n.type+"`");if(function(t,e){o["set"+r]=function(e,n,r){o.setOption(t,e,n,r)},o["get"+r]=function(){return o.getOption(t)}}(t),n.type===E.OptionType.CONFIGURABLE&&(this._options[t]=new e(void 0,n.structure||{}),this._options[t].on("update",this._onConfigurableUpdate)),!(t in i)||void 0===i[t])if(void 0!==n.default){var a=n.default;"function"==typeof n.default&&(a=n.default()),this["set"+r](a,!1,!0)}else n.type!==E.OptionType.CONFIGURABLE&&(this._options[t]=void 0)}for(t in i){if(void 0===this.availableOptions[t])throw new Error("Invalid option: "+t);void 0!==i[t]&&this["set"+(r=t.charAt(0).toUpperCase()+t.slice(1))](i[t],!1,!0)}}},{key:"set",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];for(var n in t)this.setOption(n,t[n],!1);this._onOptionsChange(),e&&this.emit("update",this,t)}},{key:"getOption",value:function(t){return this._options[t]}},{key:"hasOption",value:function(t){return!!this.availableOptions[t]}},{key:"getOptionDefault",value:function(t){var e=this.availableOptions[t];if(!e)throw new Error("Invalid option: "+t);return e.default}},{key:"resetOptions",value:function(){this.set(this.getDefaultOptions())}},{key:"getDefaultOptions",value:function(){var t={};for(var e in this.availableOptions){var n=this.availableOptions[e].default;void 0!==n&&(t[e]=n)}return t}},{key:"getOptions",value:function(){return A({},this._options)}},{key:"equals",value:function(t){var e=t.getOptions();return this.optionsEqual(e)}},{key:"optionsEqual",value:function(t){for(var e in t){var n=t[e];if(!this._optionEquals(e,n))return!1}return!0}},{key:"_optionEquals",value:function(t,e){if(void 0===this.availableOptions[t])throw new Error("Invalid option: "+t);var n=this.availableOptions[t].type,r=this._options[t];if(r===e)return!0;if(void 0===e||void 0===r)return!1;switch(n){case E.OptionType.OBJECT:return"function"==typeof r.optionsEqual?r.optionsEqual(e._options):r===e;case E.OptionType.STRING:case E.OptionType.NUMBER:case E.OptionType.BOOLEAN:case E.OptionType.FUNCTION:case"*":return r===e;case E.OptionType.VECTOR2:return r.equals(e);case E.OptionType.COLOR:case E.OptionType.COLOR_MATRIX:return e.equals(r);case E.OptionType.CONFIGURABLE:return r.optionsEqual(e);case E.OptionType.ARRAY:return this._arrayOptionEquals(t,e);case E.OptionType.IMAGE:return r.src===e.src}}},{key:"_arrayOptionEquals",value:function(t,n){var r=this._options[t];if(n.length!==r.length)return!1;for(var i=!0,o=0;o<r.length;o++){var a=r[o],s=n[o];if(a instanceof e){if(void 0===s||!a.optionsEqual(s)){i=!1;break}}else if(s!==a){i=!1;break}}return i}},{key:"serializeOptions",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y()(this._options),n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r={};return e.forEach(function(e){if(void 0===t.availableOptions[e])return b.a.warn("Trying to serialize a key that does not exist: "+e);!1!==t.availableOptions[e].serializable&&(r[e]=t.serializeOption(e,n))}),r}},{key:"serializeOption",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.availableOptions[t],r=n.type,i=this._options[t];if(!i)return i;if(!1===n.serializable)throw new Error("Option `"+t+"` is not serializable.");switch(r){case E.OptionType.STRING:case E.OptionType.NUMBER:case E.OptionType.BOOLEAN:case E.OptionType.OBJECT:case E.OptionType.FUNCTION:case E.OptionType.ALL:return i;case E.OptionType.VECTOR2:return e?i.toObject():i.clone();case E.OptionType.COLOR:case E.OptionType.COLOR_MATRIX:return e?i.toArray():i.clone();case E.OptionType.CONFIGURABLE:return i.serializeOptions(void 0,e);case E.OptionType.ARRAY:return i.slice(0);case E.OptionType.IMAGE:return e?i.src:i}}},{key:"setOption",value:function(t,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=this.availableOptions[t];if(!o)throw new Error("Invalid option: "+t);if(void 0!==o.setter&&(n=o.setter.call(this,n,i)),void 0!==o.validation&&o.validation(n),null===n||void 0===n){if(o.required)throw this._buildConfigError("Option `"+t+"` is required.");this._options[t]=n}else switch(o.type){case E.OptionType.STRING:if((void 0===n?"undefined":O(n))!==E.OptionType.STRING)throw this._buildConfigError("Option `"+t+"` has to be a string.");var a=o.available;if(void 0!==a&&-1===a.indexOf(n))throw this._buildConfigError("Invalid value for `"+t+"` (valid values are: "+o.available.join(", ")+")");this._options[t]=n;break;case E.OptionType.NUMBER:if((void 0===n?"undefined":O(n))!==E.OptionType.NUMBER)throw this._buildConfigError("Option `"+t+"` has to be a number.");this._options[t]=n;break;case E.OptionType.BOOLEAN:if((void 0===n?"undefined":O(n))!==E.OptionType.BOOLEAN)throw this._buildConfigError("Option `"+t+"` has to be a boolean.");this._options[t]=n;break;case E.OptionType.VECTOR2:if(!(n instanceof x.a||"object"===(void 0===n?"undefined":O(n))&&"x"in n&&"y"in n))throw this._buildConfigError("Option `"+t+"` has to be an instance of Vector2 or an Object holding x and y values.");n instanceof x.a?this._options[t]=n.clone():this._options[t]=x.a.fromObject(n);break;case E.OptionType.COLOR:if(!(n instanceof T.a))throw this._buildConfigError("Option `"+t+"` has to be an instance of Color.");this._options[t]=n;break;case E.OptionType.COLOR_MATRIX:if(!(n instanceof R.a))throw this._buildConfigError("Option `"+t+"` has to be an instance of ColorMatrix.");this._options[t]=n.clone();break;case E.OptionType.FUNCTION:if("function"!=typeof n)throw this._buildConfigError("Option `"+t+"` has to be a function.");this._options[t]=n;break;case E.OptionType.OBJECT:case"*":this._options[t]=n;break;case E.OptionType.IMAGE:if("string"==typeof n){var s=new C.a;s.crossOrigin=k.a.getCrossOriginValue(o.crossOrigin),s.src=n,this._options[t]=s}else{if(!(n instanceof C.a||"undefined"!=typeof HTMLImageElement&&n instanceof HTMLImageElement))throw this._buildConfigError("Option `"+t+"` has to be an Image or String.");this._options[t]=n}break;case E.OptionType.CONFIGURABLE:n instanceof e?this._options[t]=n:this._options[t].set(n);break;case E.OptionType.ARRAY:if(!(n instanceof Array))throw this._buildConfigError("Option `"+t+"` has to be an Array.");this._options[t]=n.slice(0);break;default:throw this._buildConfigError("Unknown option type: `"+o.type+"`")}r&&(this._onOptionsChange(),this.emit("update",this,function(t,e,n){return e in t?c()(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({},t,n)))}},{key:"_onConfigurableUpdate",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];this.emit.apply(this,["update"].concat(e))}},{key:"hasChanges",value:function(){var t=this.getDefaultOptions();return!this.optionsEqual(t)}}]),e}();e.a=F},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(1),c=n.n(l),h=n(4),f=(n.n(h),n(76)),p=n.n(f),d=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var v=h.Math.Vector2,y=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(t=e.__proto__||c()(e)).call.apply(t,[this].concat(i)));return a._fragmentSource=n(269),a._lastBlurRadius=null,a._lastDimensions=new v(0,0),a._blurredRenderTarget=new h.Engine.CanvasRenderTarget(100,100,1),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=u()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(a.a?a()(t,e):t.__proto__=e)}(e,h["Engine"].Filter),d(e,[{key:"_applyCanvas",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if("low"!==this._options.blurQuality){var o=e.getCanvas(),a=e.getContext(),s=n.getContext();this._lastBlurRadius===this._options.blurRadius&&s.drawImage(o,0,0);for(var u=a.getImageData(0,0,o.width,o.height),l=s.getImageData(0,0,o.width,o.height),c=this._options.blurRadius,h=this._options.delta,f=0;f<o.width;f++)for(var p=0;p<o.height;p++){var d=4*(f+p*o.width),y=0,_=0,g=0,m=0,b=0;i&&(c=i(f/o.width,p/o.height));for(var w=this._random(f,1-p/o.height),x=-30;x<=30;x++){var T=(x+w-.5)/30,k=1-Math.abs(T),C=h.x*T*c,R=h.y*T*c,E=Math.max(Math.min(f+C,o.width-1),0),O=Math.max(Math.min(p+R,o.height-1),0),A=4*(Math.round(O)*o.width+Math.round(E)),S=u.data[A+3];y+=S*u.data[A]*k,_+=S*u.data[A+1]*k,g+=S*u.data[A+2]*k,m+=S*k,b+=k}y/=b,_/=b,g/=b,m/=b,l.data[d]=y/m,l.data[d+1]=_/m,l.data[d+2]=g/m,l.data[d+3]=m}s.putImageData(l,0,0),this._lastDimensions.copy(new v(o.width,o.height))}else this._renderLQBlur(t,e,n,r)}},{key:"_renderLQBlur",value:function(t,e,n,r){var i=e.getDimensions(),o=!this._lastDimensions.equals(i);this._blurredRenderTarget.setPixelRatio(e.getPixelRatio()),this._blurredRenderTarget.resizeTo(e.getDimensions()),n.setPixelRatio(e.getPixelRatio()),n.resizeTo(e.getDimensions()),(this._lastBlurRadius!==this._options.blurRadius||o)&&(this._blurImage(e),this._lastBlurRadius=this._options.blurRadius),n.getContext().drawImage(this._blurredRenderTarget.getCanvas(),0,0),this._lastDimensions.copy(i)}},{key:"_blurImage",value:function(t){var e=t.getCanvas(),n=t.getContext(),r=new v(e.width,e.height),i=n.getImageData(0,0,e.width,e.height);p.a.stackBlurCanvasRGBA(i,0,0,e.width,e.height,this._options.blurRadius*r.min()),this._blurredRenderTarget.getContext().putImageData(i,0,0)}},{key:"_random",value:function(t,e){var n=12.9898*t+78.233*e,r=n-3.14*Math.floor(n/3.14),i=43758.5453*Math.sin(r);return i-Math.floor(i)}}]),e}();y.prototype.availableOptions={blurRadius:{type:h.OptionType.NUMBER,default:30,uniformType:h.UniformType.FLOAT},delta:{type:h.OptionType.VECTOR2,default:new v(1,1),uniformType:h.UniformType.FLOAT2},texSize:{type:h.OptionType.VECTOR2,default:new v(100,100),uniformType:h.UniformType.FLOAT2}},e.a=y},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=n(5),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),h=n(1),f=n.n(h),p=n(4),d=(n.n(p),function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}());var v=p.Math.Vector2,y=function(t){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||f()(e)).call(this,n));return r._operation=t,r._dirtiness={},r.id=p.Utils.getUUID(),r._renderTextures={},r._identitySprite=new p.Engine.Sprite,r._sprite=new p.Engine.Sprite,r._dummyImage={addEventListener:function(){},removeEventListener:function(){}},r._hitTestSprite=new p.Engine.Sprite,r._renderers=[],r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=c()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(u.a?u()(t,e):t.__proto__=e)}(e,p["Configurable"]),d(e,[{key:"applyScale",value:function(t){}},{key:"applyRotation",value:function(t){var e=this._operation.getInputDimensions(),n=180*this.getRotation()/Math.PI;n+=t,this.setRotation(n*Math.PI/180);var r=(t+360)%360*Math.PI/180,i=Math.cos(r),o=Math.sin(r),a=this._options.position.clone().subtract(.5).multiply(e),s=new v(a.x*i-a.y*o,a.x*o+a.y*i).divide(e.clone().flip());this.setPosition(new v(.5,.5).add(s))}},{key:"applyFlip",value:function(t){var e=this.getPosition().clone();switch(t){case"horizontal":e.x=1-this._options.position.x;break;case"vertical":e.y=1-this._options.position.y}this.setPosition(e)}},{key:"applyTransform",value:function(t){var e={};e.rotation=t.applyToRotation(this.getRotation()),e.position=t.applyToRelativePoint(this.getPosition()),this._options.dimensions&&(e.dimensions=t.applyToDimensions(this.getDimensions())),this.set(e,!1)}},{key:"getDisplayObject",value:function(){return this._sprite}},{key:"getHitTestDisplayObject",value:function(){return this._sprite}},{key:"_getTexture",value:function(){throw new Error("Sprite#_getTexture is abstract and not implemented in child class.")}},{key:"_prepareRenderTexture",value:function(t){if(this._renderTexture)this._renderTexture.clear();else{var e=this._getTexture();this._renderTextureContainer=new p.Engine.Container,this._renderTextureSprite=new p.Engine.Sprite(e),this._renderTextureContainer.addChild(this._renderTextureSprite),this._renderTexture=this._getRenderTexture(t.getRenderer(),e.getDimensions())}}},{key:"_rendersToRenderTexture",value:function(t){return t.getOptions().smoothDownscaling&&t.getRenderer().isOfType(p.RendererType.WEBGL)}},{key:"_optionEquals",value:function(t,n){return"type"===t||function t(e,n,r){null===e&&(e=Function.prototype);var i=a()(e,n);if(void 0===i){var o=f()(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0}(e.prototype.__proto__||f()(e.prototype),"_optionEquals",this).call(this,t,n)}},{key:"update",value:function(t,e){this._rendersToRenderTexture(t)&&(this._prepareRenderTexture(t),this._renderToRenderTexture(t)),this._updateSprite(e)}},{key:"_updateSprite",value:function(t){var e=this;[this._sprite,this._hitTestSprite].forEach(function(n){if(n.getTexture()){n.setAnchor(e._options.anchor),n.setPosition(e._options.position.clone().multiply(t)),void 0!==e._options.alpha&&n.setAlpha(e._options.alpha);var r=e._options.dimensions;r&&(r=r.clone().multiply(e._operation.getSDK().getTextureScale()),n.setWidth(r.x),n.setHeight(r.y)),n.updateTransform();var i=n.getTexture().getFrame(),o=new v(i.width,i.height);n.setPivot(e._options.pivot.clone().multiply(o)),n.setRotation(e._options.rotation),n.updateTransform()}})}},{key:"_renderToRenderTexture",value:function(t){var e=this._getTexture().getDimensions(),n=this._getRenderTexture(t.getRenderer(),e),r=e.clone();if(this._options.smoothDownscaling&&(r.x=p.Utils.nextHighestPOT(r.x),r.y=p.Utils.nextHighestPOT(r.y)),this._renderTexture.resizeTo(r),this._renderTexture.render(this._renderTextureContainer),this._options.smoothDownscaling){var i=r.clone().subtract(e.x,e.y).divide(r),o=n.getUVs().getUVs();o[0].x=o[3].x=0,o[1].x=o[2].x=1-i.x,o[0].y=o[1].y=0,o[2].y=o[3].y=1-i.y}this._sprite.setTexture(n)}},{key:"isDirtyForRenderer",value:function(t){return t.id in this._dirtiness||(this._dirtiness[t.id]=!0),this._dirtiness[t.id]}},{key:"setDirtyForRenderer",value:function(t,e){this._renderers[e.id]=e,this._dirtiness[e.id]=t}},{key:"setDirty",value:function(t){for(var e in this._dirtiness)this.setDirtyForRenderer(t,this._renderers[e])}},{key:"_getRenderTexture",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new v(100,100);return this._renderTextures[t.id]||(this._renderTextures[t.id]=new p.Engine.RenderTexture(t,e.x,e.y,1)),this._renderTextures[t.id]}},{key:"dispose",value:function(){for(var t in this._renderTextures)this._renderTextures[t].dispose()}},{key:"canBeDuplicated",value:function(){return!0}},{key:"canBeDeleted",value:function(){return!0}},{key:"canMaskCanvas",value:function(){return!1}},{key:"canAdjustPadding",value:function(){return!1}},{key:"canBeTakenToFront",value:function(){return!0}},{key:"canBeFlippedHorizontally",value:function(){return!0}}]),e}();e.a=y},function(t,e,n){"use strict";n.d(e,"a",function(){return A});var r=n(6),i=n.n(r),o=n(15),a=n.n(o),s=n(0),u=n.n(s),l=n(5),c=n.n(l),h=n(2),f=n.n(h),p=n(3),d=n.n(p),v=n(1),y=n.n(v),_=n(4),g=(n.n(_),n(59)),m=n(369),b=n(104),w=n(19),x=n(105),T=n(77),k=n(20),C=n(16),R=i.a||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},E=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),u()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),O=function t(e,n,r){null===e&&(e=Function.prototype);var i=c()(e,n);if(void 0===i){var o=y()(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0};var A=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(t=e.__proto__||y()(e)).call.apply(t,[this].concat(r)));return o.getImagePaths=function(){var t=o.getBanderoles();return t&&t.map(function(t){return t.getImagePath()})||[]},o.onImagesLoaded=function(){var t=o.getBanderoles();t&&t.forEach(function(t){var e=k.a.getImage(t.getImagePath());e?t.setImage(e):_.Log.warn("TextDesignBlocks#onImagesLoaded: Image not found '"+t.getImagePath()+"'")})},o._rowTypeLessThan3WordsRandomizer=new C.a(0),o._rowTypeMoreThan3WordsRandomizer=new C.a(0),o._banderolesRandomizer=new C.a(0),o._seedPool=[].concat(function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return a()(t)}(o._seedPool),[o._rowTypeLessThan3WordsRandomizer,o._rowTypeMoreThan3WordsRandomizer,o._banderolesRandomizer]),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=d()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(f.a?f()(t,e):t.__proto__=e)}(e,g["a"]),E(e,[{key:"_modifiedText",value:function(t){return O(e.prototype.__proto__||y()(e.prototype),"_modifiedText",this).call(this,t).toUpperCase()}},{key:"generateLayoutData",value:function(t,n){return this._options.hasMaskedText=!1,O(e.prototype.__proto__||y()(e.prototype),"generateLayoutData",this).call(this,t,n)}},{key:"_randomLayoutRow",value:function(t,e,n,r){if(t.size()<3){var i=0===this._rowTypeLessThan3WordsRandomizer.nextInRange(0,2);return this._layoutRow(t,n,r,i)}var o=this._rowTypeMoreThan3WordsRandomizer.nextInRange(0,3);switch(o){case 0:return new m.a({words:t,width:n,attributes:r,orientation:m.a.Orientations.Left});case 1:return new m.a({words:t,width:n,attributes:r,orientation:m.a.Orientations.Right});case 2:return this._layoutRow(t,n,r,!0);case 3:return new w.a({words:t,width:n,attributes:r});default:throw new Error("TextDesignBlocks#_randomLayoutRow: Invalid randomValue generated: "+o+".")}}},{key:"_layoutRow",value:function(t,e,n,r){if(this.getHasMaskedText()&&(r=!1),r){this.setHasMaskedText(!0);var i=this._banderolesRandomizer.pickNext(this.getBanderoles()),o=new x.a({words:t,width:e,attributes:new T.a({alignment:"left",fontIdentifier:i.getFontIdentifier()}),image:i.getImage(),imageInsets:i.insetsForWidth(e),capInsets:null,backgroundColor:_.Color.WHITE});return i.getNeedsImageSmoothingFix()&&(o.serverImageSmoothingFix=!0),o}return new w.a({words:t,width:e,attributes:n})}}]),e}();A.defaultFontIdentifiers=["imgly_font_campton_bold"],A.identifier="imgly_text_design_blocks",A.defaultBanderoles=[b.a.Rectangle,b.a.Small],A.prototype.availableOptions=R({},g.a.prototype.availableOptions,{fontIdentifiers:{type:_.OptionType.ARRAY,default:A.defaultFontIdentifiers},relativeLineSpacing:{type:_.OptionType.NUMBER,default:.025/3},hasMaskedText:{type:_.OptionType.BOOLEAN,default:!1},banderoles:{type:_.OptionType.ARRAY,default:A.defaultBanderoles}})},function(t,e,n){"use strict";n.d(e,"a",function(){return k});var r=n(15),i=n.n(r),o=n(0),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),h=n(362),f=n.n(h),p=n(1),d=n.n(p),v=n(4),y=(n.n(v),n(16)),_=n(17),g=n(34),m=n(365),b=n(77),w=n(19),x=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),a()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function T(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return i()(t)}var k=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||d()(e)).call(this,t));return n._relativeInsets=new _.a,n._background=null,n._fontRandomizer=new y.a(0),n._lineNumberRandomizer=new y.a(0),n._wordsPerLineRandomizer=new y.a(0),n._seedPool=[n._fontRandomizer,n._lineNumberRandomizer,n._wordsPerLineRandomizer],n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=c()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(u.a?u()(t,e):t.__proto__=e)}(e,v["Configurable"]),x(e,[{key:"seed",value:function(t){this._seedPool.forEach(function(e){return e.seed(t)})}},{key:"getImagePaths",value:function(){return[]}},{key:"onImagesLoaded",value:function(){}},{key:"getMaximumNumberOfTries",value:function(){return 10}},{key:"getMinLineCountOfRandom",value:function(){return 4}},{key:"getRandomAdditionalLinePercentage",value:function(){return.4}},{key:"_fontForRow",value:function(t,e){return this._fontRandomizer.pickNext(this.getFontIdentifiers())}},{key:"_modifiedText",value:function(t){return t.replace("\n"," ").replace("\t"," ")}},{key:"_minimumNumberOfLines",value:function(t){return Math.ceil(Math.sqrt(t.size()))}},{key:"_maximumNumberOfLines",value:function(t){return t.size()}},{key:"_calculatedNumberOfLines",value:function(t){var e=this._minimumNumberOfLines(t);if(t.size()>=this.getMinLineCountOfRandom()){var n=Math.floor(Math.max(1,e*this.getRandomAdditionalLinePercentage()));e+=this._lineNumberRandomizer.nextInRange(0,n)}return Math.min(e,this._maximumNumberOfLines(t))}},{key:"_randomizedNumberOfWordsPerLine",value:function(t,e){var n=this;if(t>e)return v.Log.warn("TextDesign#_randomizedNumberOfWordsPerLine: Invalid number of lines"),e;var r=v.Utils.Array.repeat(1,t);return v.Utils.Array.range(t,e).forEach(function(e){var i=n._wordsPerLineRandomizer.nextInRange(0,t-1);r[i]+=1}),r}},{key:"_textLines",value:function(t){var e=new g.a(t),n=this._calculatedNumberOfLines(e);return this._randomizedNumberOfWordsPerLine(n,e.size()).reduce(function(t,n){return{index:t.index+n,lines:[].concat(T(t.lines),[e.slice(t.index,Math.min(t.index+n,e.size()))])}},{index:0,lines:[]}).lines}},{key:"_validTextLines",value:function(t){var e=this._textLines(t),n=0;do{if((n=v.Utils.Array.findIndex(e,function(t){return t.countNumberOfCharacters()<3}))>=0){var r=e[n-1],i=e[n+1];(r?r.countNumberOfCharacters():f.a)<(i?i.countNumberOfCharacters():f.a)&&r?(r.words=[].concat(T(r.words),T(e[n].words)),e=[].concat(T(e.slice(0,n)),T(e.slice(n+1)))):i&&(i.words=[].concat(T(e[n].words),T(i.words)),e=[].concat(T(e.slice(0,n)),T(e.slice(n+1))))}}while(n>-1&&e.length>1);return e}},{key:"_modifiedLines",value:function(t){return t}},{key:"_getBackground",value:function(){return this._background}},{key:"generateLayoutData",value:function(t,e){var n=this._modifiedText(t),r=this._modifiedLines(this._validTextLines(n)),i=e*(1-this._relativeInsets.left-this._relativeInsets.right),o=this._layoutRows(r,i);return new m.a({text:n,relativeInsets:this._relativeInsets.clone(),relativeLineSpacing:this.getRelativeLineSpacing(),background:this._background||this._getBackground(),lines:r,rows:o,width:e})}},{key:"_layoutRows",value:function(t,e){var n=this;return t.map(function(t,r){return n._randomLayoutRow(t,r,e,new b.a({fontIdentifier:n._fontForRow(r,t)})).layout()})}},{key:"_randomLayoutRow",value:function(t,e,n,r){return new w.a({words:t,width:n,attributes:r})}}]),e}();k.defaultFontIdentifiers=[],k.identifier="text-design",k.prototype.availableOptions={fontIdentifiers:{type:v.OptionType.ARRAY,default:[]},relativeLineSpacing:{type:v.OptionType.NUMBER,default:0}}},function(t,e,n){"use strict";n.d(e,"a",function(){return y});var r=n(0),i=n.n(r),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(1),c=n.n(l),h=n(4),f=(n.n(h),n(23)),p=n(77),d=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var v=h.Math.Rectangle,y=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||c()(e)).call(this,t));return n.setSize(new f.a(n.getWidth(),0)),n.serverImageSmoothingFix=!1,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=u()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(a.a?a()(t,e):t.__proto__=e)}(e,h["Configurable"]),d(e,[{key:"_getFrame",value:function(){var t=this.getSize();return new v(0,0,t.width,t.height)}},{key:"_getTextFrame",value:function(){return this._getFrame()}},{key:"_getTextFrameForElement",value:function(t){return t.getFrame().clone()}},{key:"_calculateLayoutElements",value:function(){h.Log.warn("TextDesignRow is an abstract class.")}},{key:"_getLayoutElements",value:function(){return this._options.elements.length<=0&&this.layout(),this.getElements()}},{key:"_fontSize",value:function(t){return h.Log.warn("TextDesignRow#_fontSize not implemented. @TODO: Is it necessary?"),0}},{key:"layout",value:function(){return this.setElements(this._calculateLayoutElements()),this}},{key:"textFrame",value:function(t,e){return t.getFrame().clone()}},{key:"willRender",value:function(t){}},{key:"didRender",value:function(t){}},{key:"render",value:function(t){var e=this;t.save(),this._getLayoutElements().forEach(function(n){var r=n.serializeOptions(),i=(r.text,r.frame),o=r.font,a=e.getAttributes();o.draw(t,i.x,i.y,{textColor:a.getTextColor().toRGBA(),alignment:a.getAlignment()})}),t.restore()}}]),e}();y.prototype.availableOptions={words:{type:h.OptionType.OBJECT,default:null},width:{type:h.OptionType.NUMBER,default:100},attributes:{type:h.OptionType.CONFIGURABLE,default:new p.a},shearingAngle:{type:h.OptionType.NUMBER,default:0},elements:{type:h.OptionType.ARRAY,default:[]},size:{type:h.OptionType.OBJECT,default:null}}},function(t,e,n){"use strict";n.d(e,"a",function(){return b});var r=n(6),i=n.n(r),o=n(0),a=n.n(o),s=n(5),u=n.n(s),l=n(2),c=n.n(l),h=n(3),f=n.n(h),p=n(1),d=n.n(p),v=n(4),y=(n.n(v),n(23)),_=n(20),g=i.a||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},m=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),a()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var b=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||d()(e)).call(this,t)),r=_.a.getVariation(n.getFontIdentifier());return r||v.Log.warn("TextDesignFont: Unable to find font '"+n._fontIdentifier+"'"),n.set({fontVariation:r}),n._metrics=null,n._canvas=v.Utils.createCanvas(),n._context=n._canvas.getContext("2d"),n._isDirty=!0,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=f()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(c.a?c()(t,e):t.__proto__=e)}(e,v["Configurable"]),m(e,[{key:"_onOptionsChange",value:function(){this._isDirty=!0}},{key:"setOption",value:function(t,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];(function t(e,n,r){null===e&&(e=Function.prototype);var i=u()(e,n);if(void 0===i){var o=d()(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0})(e.prototype.__proto__||d()(e.prototype),"setOption",this).call(this,t,n,r,i),"fontIdentifier"!==t||i||this.updateFontVariation()}},{key:"updateFontVariation",value:function(){var t=_.a.getVariation(this.getFontIdentifier());return t||v.Log.warn("TextDesignFont: Unable to find font '"+this._fontIdentifier+"'"),this.setFontVariation(t),t}},{key:"setOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._options=g({},this._options,t),this._isDirty=!0}},{key:"_applyTextOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._context,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=g({},this._options,e),r=n.fontSize,i=n.fontVariation,o=n.lineHeight,a=n.textColor,s=n.alignment,u=i.serializeOptions(),l=u.fontStyle,c=u.fontWeight,h=u.fontFamily;t.font=l+" "+c+" "+r+"px/"+o+" "+h,t.fillStyle=a,t.textBaseline="alphabetic",t.textAlign=s||"left"}},{key:"getTextMetrics",value:function(){return this._metrics&&!this._isDirty||this._calculateTextMetrics(),g({},this._metrics)}},{key:"getSizeValue",value:function(){return this._metrics&&!this._isDirty||this._calculateTextMetrics(),new y.a(this._metrics.width,this._metrics.height)}},{key:"fitWidth",value:function(t){if(this.getFontVariation()){this._applyTextOptions(this._context,{fontSize:50});var e=t/this._context.measureText(this.getText()).width,n=Math.floor(50*e);return this.setFontSize(n),this._calculateTextMetrics(),this.getTextMetrics()}v.Log.warn("TextDesignFont#fitText: missing font variation")}},{key:"fitHeight",value:function(t){if(this.getFontVariation()){var e=t/this._calculateTextMetrics({fontSize:50}).height,n=Math.floor(50*e);return this.setFontSize(n),this._calculateTextMetrics(),this.getTextMetrics()}v.Log.warn("TextDesignFont#fitText: missing font variation")}},{key:"_calculateTextMetrics",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this._canvas,n=this._context,r=g({},this._options,t),i=this.getText();this._applyTextOptions(n,r);var o=Math.ceil(n.measureText(i).width),a=Math.floor(o+2*r.fontSize),s=Math.floor(3*r.fontSize);e.width=a,e.height=s;var u=Math.floor(r.fontSize),l=Math.floor(.6*s);this._applyTextOptions(n,r),n.fillText(i,u,l);var c=n.getImageData(0,0,e.width,e.height).data,h=C(c,a,s,l,this._options.excludeAccents),f=k(c,a,s,l,this._options.excludeAccents),p=o,d=h+f;return this._metrics={width:p,height:d,ascender:h,descender:f},this._isDirty=!1,g({},this._metrics)}},{key:"draw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._context,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];t.save(),this._metrics&&!this._isDirty||this._calculateTextMetrics(),this._applyTextOptions(t,r),t.fillText(this.getText(),e,n+this._metrics.ascender),i&&(E(t,e,n,this._metrics.width,this._metrics.height),R(t,n+this._metrics.ascender,e,e+this._metrics.width)),t.restore()}}]),e}(),w=function(t,e,n,r){var i=n*(4*r)+4*e;return{r:t[i],g:t[i+1],b:t[i+2],a:t[i+3]}},x=function(t){return t.a<=254},T=function(t,e,n){for(var r=!0,i=0;i<n;i++){var o=w(t,i,e,n);if(!x(o)){r=!1;break}}return r},k=function(t,e,n,r){for(var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=0,a=r+1;a<n;a++)if(T(t,a,e)){if(i)break}else o=a-r+1;return o},C=function(t,e,n,r){for(var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=0,a=r-1;a>=0;a--)if(T(t,a,e)){if(i)break}else o=r-a;return o},R=function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"red";t.save(),t.strokeStyle=i,function(t,e,n,r,i){t.beginPath(),t.moveTo(e,n),t.lineTo(r,i),t.stroke()}(t,n,e,r,e),t.restore()},E=function(t,e,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"blue";t.save(),t.strokeStyle=o,t.strokeRect(e,n,r,i),t.restore()};b.prototype.availableOptions={text:{type:v.OptionType.STRING,default:""},fontIdentifier:{type:v.OptionType.STRING,default:"imgly_font_open_sans_bold"},fontVariation:{type:v.OptionType.OBJECT,default:null},lineHeight:{type:v.OptionType.NUMBER,default:1},fontSize:{type:v.OptionType.NUMBER,default:22},textColor:{type:v.OptionType.STRING,default:"black"},strokeStyle:{type:v.OptionType.STRING,default:"black"},outlineWidth:{type:v.OptionType.NUMBER,default:0},textBaseline:{type:v.OptionType.STRING,default:"alphabetic"},excludeAccents:{type:v.OptionType.BOOLEAN,default:!1}}},function(t,e,n){"use strict";n.d(e,"a",function(){return d});var r=n(0),i=n.n(r),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(1),c=n.n(l),h=n(4),f=(n.n(h),n(17)),p=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var d=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||c()(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=u()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(a.a?a()(t,e):t.__proto__=e)}(e,h["Configurable"]),p(e,[{key:"insetsForWidth",value:function(t){return this.getRelativeInsets().clone().scale(t)}}]),e}();d.prototype.availableOptions={imagePath:{type:h.OptionType.STRING,default:""},minimumHeightRatio:{type:h.OptionType.NUMBER,default:0},sizeToFitContent:{type:h.OptionType.BOOLEAN,default:!0},capInsets:{type:h.OptionType.OBJECT,default:new f.a},relativeInsets:{type:h.OptionType.OBJECT,default:new f.a}},d.Box=new d({imagePath:"text-design/images/imgly_text_design_asset_black_background.png",relativeInsets:new f.a(.1,.1,.1,.1)}),d.Badge1=new d({imagePath:"text-design/images/imgly_text_design_asset_badge1.png",relativeInsets:new f.a(.3,.18,.2,.18)}),d.Badge2=new d({imagePath:"text-design/images/imgly_text_design_asset_badge2.png",relativeInsets:new f.a(.3,.18,.2,.18)}),d.Badge3=new d({imagePath:"text-design/images/imgly_text_design_asset_badge3.png",relativeInsets:new f.a(.3,.18,.2,.18)}),d.Badge4=new d({imagePath:"text-design/images/imgly_text_design_asset_badge4.png",relativeInsets:new f.a(.3,.18,.2,.18)}),d.SpeechBubble1=new d({imagePath:"text-design/images/imgly_text_design_asset_speech_bubble_small2.png",relativeInsets:new f.a(.04,.07,.12,.07),capInsets:new f.a(57,171,123,51)}),d.SpeechBubble2=new d({imagePath:"text-design/images/imgly_text_design_asset_speech_bubble3.png",relativeInsets:new f.a(.04,.07,.12,.07),capInsets:new f.a(6,105,87,15)}),d.SpeechBubble3=new d({imagePath:"text-design/images/imgly_text_design_asset_speech_bubble_small.png",relativeInsets:new f.a(.165664675,.2,.165664675,.2),minimumHeightRatio:.7}),d.SpeechBubble4=new d({imagePath:"text-design/images/imgly_text_design_asset_speech_bubble4.png",relativeInsets:new f.a(.124800224,.2,.291200523,.2),minimumHeightRatio:.7}),d.SpeechBubble5=new d({imagePath:"text-design/images/imgly_text_design_asset_speech_bubble5.png",relativeInsets:new f.a(.114892823,.27,.15984926,.27)}),d.Watercolor1=new d({imagePath:"text-design/images/imgly_text_design_asset_watercolor_01.png",minimumHeightRatio:.7,relativeInsets:new f.a(.2,.25,.2,.25)}),d.Watercolor2=new d({imagePath:"text-design/images/imgly_text_design_asset_watercolor_02.png",minimumHeightRatio:.7,relativeInsets:new f.a(.08,.25,.3,.25)}),d.Watercolor3=new d({imagePath:"text-design/images/imgly_text_design_asset_watercolor_03.png",minimumHeightRatio:.7,relativeInsets:new f.a(.1,.2,.15,.2)})},function(t,e){t.exports=!0},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},function(t,e,n){var r=n(21).f,i=n(28),o=n(12)("toStringTag");t.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,o)&&r(t,o,{configurable:!0,value:e})}},function(t,e,n){n(165);for(var r=n(14),i=n(27),o=n(39),a=n(12)("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),u=0;u<s.length;u++){var l=s[u],c=r[l],h=c&&c.prototype;h&&!h[a]&&i(h,a,l),o[l]=o.Array}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){"use strict";var r=n(195),i=n(214),o=n(96),a=n(100),s=n(99),u=n(134),l=n(53),c=n(135),h=n(222),f=n(74),p=n(73),d=n(223),v=n(225),y=n(98),_=n(54),g=n(229),m=n(133),b={WebGLRenderer:i.a,CanvasRenderer:r.a,WebGLFilterManager:a.a,CanvasFilterManager:o.a,DisplayObject:s.a,Container:u.a,BaseTexture:l.a,Texture:c.a,RenderTexture:h.a,WebGLRenderTarget:f.a,CanvasRenderTarget:p.a,Sprite:d.a,Shaders:v.a,Shader:y.a,Filter:_.a,Filters:g,PixelArrayImage:m.a,autoDetectRenderer:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return i.a.isSupported()?new i.a(t,e,n):new r.a(t,e,n)}};e.a=b},function(t,e,n){t.exports={default:n(204),__esModule:!0}},function(t,e,n){t.exports={default:n(207),__esModule:!0}},function(t,e,n){t.exports={default:n(209),__esModule:!0}},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=n(9),a=n(53),s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var u=function(){function t(e,n,r,i,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._width=e,this._height=n,this._pixelRatio=r,this._baseTexture=new a.a,this._canvas=i||this._createCanvas(),this._context=o||this._canvas.getContext("2d"),this._baseTexture.setSource(this._canvas),this._canvas.width=this._width*this._pixelRatio,this._canvas.height=this._height*this._pixelRatio,this._filterStack=[{renderTarget:this,filter:[]}]}return s(t,[{key:"_createCanvas",value:function(){return o.i.createCanvas()}},{key:"clear",value:function(){var t=this._context;t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,this._width*this._pixelRatio,this._height*this._pixelRatio)}},{key:"resizeTo",value:function(t){this._baseTexture.resizeTo(t),this._width!==t.x&&(this._width=t.x,this._canvas.width=this._width*this._pixelRatio),this._height!==t.y&&(this._height=t.y,this._canvas.height=this._height*this._pixelRatio)}},{key:"getCanvas",value:function(){return this._canvas}},{key:"getContext",value:function(){return this._context}},{key:"getFilterStack",value:function(){return this._filterStack}},{key:"getWidth",value:function(){return this._width}},{key:"getHeight",value:function(){return this._height}},{key:"getPixelRatio",value:function(){return this._pixelRatio}},{key:"setPixelRatio",value:function(t){this._pixelRatio=t}},{key:"getDimensions",value:function(){return new o.k(this._width,this._height)}},{key:"getBaseTexture",value:function(){return this._baseTexture}},{key:"dispose",value:function(){this._canvas=null,this._context=null}}]),t}();e.a=u},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=n(9),a=n(53),s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var u=function(){function t(e,n,r,i){var s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._renderer=e,this._gl=e.getContext(),this._width=n,this._height=r,this._frame=null,this._pixelRatio=i,this._projectionMatrix=new o.g,this._mipMapping=!1,this._baseTexture=new a.a;var u=this._baseTexture.getFrame();u.width=n,u.height=r,this._baseTexture.setPixelRatio(i),this._baseTexture.setLoaded(!0),this._framebuffer=null,this._isRoot=s,this._filterStack=[{renderTarget:this,filter:[]}],s||this._initFrameBuffer()}return s(t,[{key:"resizeTo",value:function(t){this._width=0|t.x,this._height=0|t.y,this._baseTexture.resizeTo(t),this._isRoot||this._resizeTexture(),this._baseTexture.setMinFilter(this._getMinFilter()),this._baseTexture.setMagFilter(this._getMagFilter()),this._calculateProjectionMatrix()}},{key:"_getMinFilter",value:function(){var t=a.a.DefaultMinFilter;return this._mipMapping&&(t=a.a.TrilinearFilter),t}},{key:"_getMagFilter",value:function(){return a.a.DefaultMagFilter}},{key:"_resizeTexture",value:function(){var t=this._gl,e=this._width*this._pixelRatio,n=this._height*this._pixelRatio;this._texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this._texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,e,n,0,t.RGBA,t.UNSIGNED_BYTE,null),t.bindFramebuffer(t.FRAMEBUFFER,this._framebuffer),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this._texture,0),this._baseTexture.setGLTextureForRenderer(this._texture,this._renderer),o.e.checkFramebufferStatus("WebGLRenderTarget#_initFramebuffer",t);var r=new o.k(this._width,this._height);o.i.isPowerOfTwo(r)?(o.f.info("WebGLRenderTarget","Mip-mapping enabled"),this._mipMapping=!0):this._mipMapping=!1,this._baseTexture.setMipMappingEnabled(this._mipMapping)}},{key:"activate",value:function(){var t=this._gl;t.bindFramebuffer(t.FRAMEBUFFER,this._framebuffer),this._calculateProjectionMatrix(),t.viewport(0,0,this._width*this._pixelRatio,this._height*this._pixelRatio),t.disable(t.STENCIL_TEST)}},{key:"clear",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.b.TRANSPARENT,e=this._gl;e.bindFramebuffer(e.FRAMEBUFFER,this._framebuffer),o.e.checkFramebufferStatus("WebGLRenderTarget#clear",e),e.clearColor.apply(e,t.toGLColor()),e.clear(e.COLOR_BUFFER_BIT)}},{key:"_calculateProjectionMatrix",value:function(){var t=this._projectionMatrix;t.reset();var e=this._frame||new o.h(0,0,this._width,this._height),n=e.x,r=e.y;this._isRoot?(t.a=1/this._width*2,t.d=-1/this._height*2,t.tx=-1-n*t.a,t.ty=1-r*t.d):(t.a=1/this._width*2,t.d=1/this._height*2,t.tx=-1-n*t.a,t.ty=-1-r*t.d)}},{key:"_initFrameBuffer",value:function(){var t=this._gl;this._framebuffer=t.createFramebuffer(),this._texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this._texture),t.bindFramebuffer(t.FRAMEBUFFER,this._framebuffer),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this._texture,0),this._baseTexture.setGLTextureForRenderer(this._texture,this._renderer),this.resizeTo(new o.k(this._width,this._height)),o.e.checkFramebufferStatus("WebGLRenderTarget#_initFramebuffer",t)}},{key:"getProjectionMatrix",value:function(){return this._projectionMatrix}},{key:"getTexture",value:function(){return this._texture}},{key:"getFrame",value:function(){return this._frame}},{key:"setFrame",value:function(t){this._frame=t}},{key:"getFilterStack",value:function(){return this._filterStack}},{key:"getPixelRatio",value:function(){return this._pixelRatio}},{key:"setPixelRatio",value:function(t){this._pixelRatio=t,this._isRoot||this._resizeTexture()}},{key:"getBaseTexture",value:function(){return this._baseTexture}},{key:"dispose",value:function(){var t=this._gl;this._baseTexture.disposeGLTexturesForRenderer(this._renderer),t.deleteTexture(this._texture),t.deleteFramebuffer(this._framebuffer)}}]),t}();e.a=u},function(t,e,n){"use strict";var r=void 0;r=window.Image,e.a=r},function(t,e,n){"use strict";var r=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],i=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function o(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}t.exports={stackBlurCanvasRGBA:function(t,e,n,a,s,u){if(!(isNaN(u)||u<1)){u|=0;var l,c,h,f,p,d,v,y,_,g,m,b,w,x,T,k,C,R,E,O,A,S,F,I,D,M=t.data,B=u+u+1,L=a-1,P=s-1,N=u+1,U=N*(N+1)/2,z=new o,G=z;for(h=1;h<B;h++)G=G.next=new o,h==N&&(D=G);G.next=z;var j=null,V=null;v=d=0;var W=r[u],H=i[u];for(c=0;c<s;c++){for(k=C=R=E=y=_=g=m=0,b=N*(O=M[d]),w=N*(A=M[d+1]),x=N*(S=M[d+2]),T=N*(F=M[d+3]),y+=U*O,_+=U*A,g+=U*S,m+=U*F,G=z,h=0;h<N;h++)G.r=O,G.g=A,G.b=S,G.a=F,G=G.next;for(h=1;h<N;h++)f=d+((L<h?L:h)<<2),y+=(G.r=O=M[f])*(I=N-h),_+=(G.g=A=M[f+1])*I,g+=(G.b=S=M[f+2])*I,m+=(G.a=F=M[f+3])*I,k+=O,C+=A,R+=S,E+=F,G=G.next;for(j=z,V=D,l=0;l<a;l++)M[d+3]=F=m*W>>H,0!==F?(F=255/F,M[d]=(y*W>>H)*F,M[d+1]=(_*W>>H)*F,M[d+2]=(g*W>>H)*F):M[d]=M[d+1]=M[d+2]=0,y-=b,_-=w,g-=x,m-=T,b-=j.r,w-=j.g,x-=j.b,T-=j.a,f=v+((f=l+u+1)<L?f:L)<<2,y+=k+=j.r=M[f],_+=C+=j.g=M[f+1],g+=R+=j.b=M[f+2],m+=E+=j.a=M[f+3],j=j.next,b+=O=V.r,w+=A=V.g,x+=S=V.b,T+=F=V.a,k-=O,C-=A,R-=S,E-=F,V=V.next,d+=4;v+=a}for(l=0;l<a;l++){for(C=R=E=k=_=g=m=y=0,b=N*(O=M[d=l<<2]),w=N*(A=M[d+1]),x=N*(S=M[d+2]),T=N*(F=M[d+3]),y+=U*O,_+=U*A,g+=U*S,m+=U*F,G=z,h=0;h<N;h++)G.r=O,G.g=A,G.b=S,G.a=F,G=G.next;for(p=a,h=1;h<=u;h++)d=p+l<<2,y+=(G.r=O=M[d])*(I=N-h),_+=(G.g=A=M[d+1])*I,g+=(G.b=S=M[d+2])*I,m+=(G.a=F=M[d+3])*I,k+=O,C+=A,R+=S,E+=F,G=G.next,h<P&&(p+=a);for(d=l,j=z,V=D,c=0;c<s;c++)M[3+(f=d<<2)]=F=m*W>>H,F>0?(F=255/F,M[f]=y*W>>H,M[f+1]=_*W>>H,M[f+2]=g*W>>H):M[f]=M[f+1]=M[f+2]=0,y-=b,_-=w,g-=x,m-=T,b-=j.r,w-=j.g,x-=j.b,T-=j.a,f=l+((f=c+N)<P?f:P)*a<<2,y+=k+=j.r=M[f],_+=C+=j.g=M[f+1],g+=R+=j.b=M[f+2],m+=E+=j.a=M[f+3],j=j.next,b+=O=V.r,w+=A=V.g,x+=S=V.b,T+=F=V.a,k-=O,C-=A,R-=S,E-=F,V=V.next,d+=a}}}}},function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n(2),i=n.n(r),o=n(3),a=n.n(o),s=n(1),u=n.n(s),l=n(4);n.n(l);var c=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||u()(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=a()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(i.a?i()(t,e):t.__proto__=e)}(e,l["Configurable"]),e}();c.prototype.availableOptions={tintColor:{type:l.OptionType.COLOR,default:l.Color.BLACK},textColor:{type:l.OptionType.COLOR,default:l.Color.BLACK},alignment:{type:l.OptionType.STRING,default:"left",available:["left","center","right"]},lineSpacing:{type:l.OptionType.NUMBER,default:1},fontIdentifier:{type:l.OptionType.STRING,default:"imgly_font_open_sans_bold"}}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){var r=n(24),i=n(14).document,o=r(i)&&r(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,e,n){var r=n(24);t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){var r=n(18),i=n(162),o=n(86),a=n(84)("IE_PROTO"),s=function(){},u=function(){var t,e=n(80)("iframe"),r=o.length;for(e.style.display="none",n(115).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),u=t.F;r--;)delete u.prototype[o[r]];return u()};t.exports=Object.create||function(t,e){var n;return null!==t?(s.prototype=r(t),n=new s,s.prototype=null,n[a]=t):n=u(),void 0===e?n:i(n,e)}},function(t,e,n){var r=n(78),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},function(t,e,n){var r=n(85)("keys"),i=n(65);t.exports=function(t){return r[t]||(r[t]=i(t))}},function(t,e,n){var r=n(14),i=r["__core-js_shared__"]||(r["__core-js_shared__"]={});t.exports=function(t){return i[t]||(i[t]={})}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,n){e.f=n(12)},function(t,e,n){var r=n(14),i=n(10),o=n(63),a=n(87),s=n(21).f;t.exports=function(t){var e=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==t.charAt(0)||t in e||s(e,t,{value:a.f(t)})}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){var r=n(68),i=n(45),o=n(29),a=n(81),s=n(28),u=n(111),l=Object.getOwnPropertyDescriptor;e.f=n(25)?l:function(t,e){if(t=o(t),e=a(e,!0),u)try{return l(t,e)}catch(t){}if(s(t,e))return i(!r.f.call(t,e),t[e])}},function(t,e,n){var r=n(47),i=n(12)("toStringTag"),o="Arguments"==r(function(){return arguments}());t.exports=function(t){var e,n,a;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),i))?n:o?r(e):"Object"==(a=r(e))&&"function"==typeof e.callee?"Arguments":a}},function(t,e,n){var r=n(91),i=n(12)("iterator"),o=n(39);t.exports=n(10).getIteratorMethod=function(t){if(void 0!=t)return t[i]||t["@@iterator"]||o[r(t)]}},function(t,e,n){var r,i,o,a=n(37),s=n(187),u=n(115),l=n(80),c=n(14),h=c.process,f=c.setImmediate,p=c.clearImmediate,d=c.MessageChannel,v=c.Dispatch,y=0,_={},g=function(){var t=+this;if(_.hasOwnProperty(t)){var e=_[t];delete _[t],e()}},m=function(t){g.call(t.data)};f&&p||(f=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return _[++y]=function(){s("function"==typeof t?t:Function(t),e)},r(y),y},p=function(t){delete _[t]},"process"==n(47)(h)?r=function(t){h.nextTick(a(g,t,1))}:v&&v.now?r=function(t){v.now(a(g,t,1))}:d?(o=(i=new d).port2,i.port1.onmessage=m,r=a(o.postMessage,o,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(r=function(t){c.postMessage(t+"","*")},c.addEventListener("message",m,!1)):r="onreadystatechange"in l("script")?function(t){u.appendChild(l("script")).onreadystatechange=function(){u.removeChild(this),g.call(t)}}:function(t){setTimeout(a(g,t,1),0)}),t.exports={set:f,clear:p}},function(t,e,n){"use strict";var r=n(64);t.exports.f=function(t){return new function(t){var e,n;this.promise=new t(function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r}),this.resolve=r(e),this.reject=r(n)}(t)}},function(t,e,n){var r=n(13),i=n(10),o=n(38);t.exports=function(t,e){var n=(i.Object||{})[t]||Object[t],a={};a[t]=e(n),r(r.S+r.F*o(function(){n(1)}),"Object",a)}},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=n(9),a=n(73),s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var u=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._renderer=e,this._filterStack=[{renderTarget:e.getCurrentRenderTarget(),filters:[]}],this._currentFrame=null,this._textures=[],this._textureFrame=new o.h(0,0,e.getWidth(),e.getHeight())}return s(t,[{key:"resizeTo",value:function(t){this._textureFrame.width=t.x,this._textureFrame.height=t.y,this._textures.forEach(function(e){return e.resizeTo(t)})}},{key:"pushFilters",value:function(t,e){var n=t.getBounds();this._currentFrame=n;var r=this._getOrCreateRenderTarget();this._renderer.setRenderTarget(r),this._filterStack.push({renderTarget:r,filters:e}),r.clear()}},{key:"popFilters",value:function(){var t=this._filterStack.pop(),e=t.filters,n=t.renderTarget,r=this._filterStack[this._filterStack.length-1].renderTarget;return 1===e.length?(e[0].apply(this._renderer,n,r),this._textures.push(n)):this._applyFilters(e,n,r),e}},{key:"_applyFilters",value:function(t,e,n){var r=this,i=e,o=this._getOrCreateRenderTarget(!0),a=t[t.length-1];t.forEach(function(t,e){if(t===a)t.apply(r._renderer,i,n);else{t.apply(r._renderer,i,o);var s=i;i=o,o=s}}),this._textures.push(i),this._textures.push(o)}},{key:"_getOrCreateRenderTarget",value:function(t){var e=this._textures.pop();return e||(e=new a.a(this._textureFrame.width,this._textureFrame.height,1)),t&&e.clear(),e}},{key:"setFilterStack",value:function(t){this._filterStack=t}},{key:"dispose",value:function(){}}]),t}();e.a=u},function(t,e,n){"use strict";var r=n(2),i=n.n(r),o=n(3),a=n.n(o),s=n(1),u=n.n(s),l=n(9),c=n(98);var h=l.c.UniformType,f=function(t){function e(t,n,r){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=n||e.defaultVertexSource,r=r||e.defaultFragmentSource,function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||u()(e)).call(this,t,n,r,e.defaultUniforms,e.defaultAttributes))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=a()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(i.a?i()(t,e):t.__proto__=e)}(e,c["a"]),e}();f.defaultVertexSource=n(218),f.defaultFragmentSource=n(219);var p=new l.g;f.defaultUniforms={u_image:{type:h.SAMPLER2D,value:0},u_projMatrix:{type:h.MAT3,value:p.toArray()}},f.defaultAttributes=["a_position","a_texCoord","a_color"],e.a=f},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=n(70),a=n.n(o),s=n(9),u=n(32),l=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var c=s.f,h=s.i,f=function(){function t(e,n,r,i,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._renderer=e,this._vertexSource=n,this._fragmentSource=r,this._uniforms=i||{},this._uniformLocations={},this._attributes=o||[],this._attributeLocations={},this._onContextChange=this._onContextChange.bind(this),this._renderer.on("context",this._onContextChange),this._init()}return l(t,[{key:"_init",value:function(){this._compile(),this._renderer.getContext().useProgram(this._program),this._cacheUniformLocations(),this._cacheAttributeLocations()}},{key:"_onContextChange",value:function(){this._init()}},{key:"setupBuffers",value:function(t,e){var n=this._renderer.getContext();n.bindBuffer(n.ARRAY_BUFFER,t),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e),n.vertexAttribPointer(this._attributeLocations.a_position,2,n.FLOAT,!1,s.j,0),n.vertexAttribPointer(this._attributeLocations.a_texCoord,2,n.FLOAT,!1,s.j,8),n.vertexAttribPointer(this._attributeLocations.a_color,4,n.UNSIGNED_BYTE,!0,s.j,16)}},{key:"syncUniforms",value:function(){var t=this;a()(this._uniforms).forEach(function(e){t.syncUniform(e)})}},{key:"syncUniform",value:function(t){var e=this._renderer.getContext(),n=this._uniforms[t],r=this._uniformLocations[t];switch(n.type){case u.UniformType.SAMPLER2D:e.uniform1i(r,n.value);break;case u.UniformType.INT:case u.UniformType.INT1:e.uniform1i(r,n.value);break;case u.UniformType.FLOAT:case u.UniformType.FLOAT1:e.uniform1f(r,n.value);break;case u.UniformType.FLOAT2:e.uniform2f(r,n.value[0],n.value[1]);break;case u.UniformType.FLOAT3:e.uniform3f(r,n.value[0],n.value[1],n.value[2]);break;case u.UniformType.FLOAT4:e.uniform4f(r,n.value[0],n.value[1],n.value[2],n.value[3]);break;case u.UniformType.FLOAT_VECTOR2:e.uniform2fv(r,n.value);break;case u.UniformType.MAT3:case u.UniformType.MAT3FV:e.uniformMatrix3fv(r,!1,n.value);break;case u.UniformType.MAT4:e.uniformMatrix4fv(r,!1,n.value);break;default:c.warn(this.constructor.name,"Unknown uniform type: "+n.type)}}},{key:"_cacheAttributeLocations",value:function(){var t=this,e=this._renderer.getContext();this._attributes.forEach(function(n){t._attributeLocations[n]=e.getAttribLocation(t._program,n)})}},{key:"_cacheUniformLocations",value:function(){var t=this,e=this._renderer.getContext();a()(this._uniforms).forEach(function(n){t._uniformLocations[n]=e.getUniformLocation(t._program,n)})}},{key:"_addPrecisionToSource",value:function(t){var e=this._renderer.getMaxFloatPrecision(),n="mediump";return h.isMobile()&&"highp"===e&&(n="highp"),"precision "+n+" float;\n"+t}},{key:"_compile",value:function(){var t=this._renderer.getContext(),e=this._compileShader(t.VERTEX_SHADER,this._vertexSource);this._vertexShader=e;var n=this._addPrecisionToSource(this._fragmentSource),r=this._compileShader(t.FRAGMENT_SHADER,n);this._fragmentShader=r;var i=t.createProgram();if(t.attachShader(i,e),t.attachShader(i,r),t.linkProgram(i),!t.getProgramParameter(i,t.LINK_STATUS)){var o=t.getProgramInfoLog(i);t.isContextLost()&&(o="WebGL context lost"),t.deleteProgram(i),c.error(this.constructor.name,"WebGL program linking error: "+o)}this._program=i}},{key:"_compileShader",value:function(t,e){var n=this._renderer.getContext(),r=n.createShader(t);if(n.shaderSource(r,e),n.compileShader(r),!n.getShaderParameter(r,n.COMPILE_STATUS)){var i=n.getShaderInfoLog(r);n.isContextLost()&&(i="WebGL context lost"),n.deleteShader(r),c.error(this.constructor.name,"WebGL shader compilation error: "+i)}return r}},{key:"setUniform",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._uniforms[t].value=e,n&&this.syncUniform(t)}},{key:"setUniforms",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(var n in t)this._uniforms[n].value=t[n],e&&this.syncUniform(n)}},{key:"getUniforms",value:function(){return this._uniforms}},{key:"getAttributes",value:function(){return this._attributes}},{key:"getAttributeLocations",value:function(){return this._attributeLocations}},{key:"getProgram",value:function(){return this._program}},{key:"dispose",value:function(){var t=this._renderer.getContext();t.deleteProgram(this._program),t.deleteShader(this._vertexShader),t.deleteShader(this._fragmentShader),this._uniforms=null,this._uniformLocations=null,this._attributes=null,this._attributeLocations=null,this._renderer.off("context",this._onContextChange)}}]),t}();e.a=f},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=n(9),a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._position=new o.k(0,0),this._scale=new o.k(1,1),this._pivot=new o.k(0,0),this._rotation=0,this._lastRotation=null,this._alpha=1,this._visible=!0,this._worldTransform=new o.g,this._parent=null,this._shaders=[],this._boundsNeedUpdate=!0,this._bounds=new o.h(0,0,1,1),this._localBoundsNeedUpdate=!0,this._localBounds=new o.h(0,0,1,1),this._tint=16777215,this._filterRectangle=new o.h(0,0,0,0)}return a(t,[{key:"renderWebGL",value:function(t){o.f.warn(this.constructor.name,"`renderWebGL` is abstract and not implemented in inherited class")}},{key:"renderCanvas",value:function(t){o.f.warn(this.constructor.name,"`renderCanvas` is abstract and not implemented in inherited class")}},{key:"updateTransform",value:function(){var t=this._parent?this._parent.getWorldTransform():o.g.IDENTITY,e=this._worldTransform;this._rotation!==this._lastRotation&&(this._sinRotation=Math.sin(this._rotation),this._cosRotation=Math.cos(this._rotation),this._lastRotation=this._rotation),e.a=this._cosRotation*this._scale.x,e.b=this._sinRotation*this._scale.x,e.c=-this._sinRotation*this._scale.y,e.d=this._cosRotation*this._scale.y,e.tx=this._position.x,e.ty=this._position.y,(this._pivot.x||this._pivot.y)&&(e.tx-=this._pivot.x*e.a+this._pivot.y*e.c,e.ty-=this._pivot.x*e.b+this._pivot.y*e.d),e.multiply(t),this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}},{key:"addShader",value:function(t){this._shaders.push(t)}},{key:"removeShader",value:function(t){var e=this._shaders.indexOf(t);return-1!==e&&(this._shaders.splice(e,1),!0)}},{key:"removeShaderAt",value:function(t){return!!this._shaders[t]&&(this._shaders.splice(t,1),!0)}},{key:"getBounds",value:function(){return this._bounds.clone()}},{key:"getPosition",value:function(){return this._position}},{key:"setPosition",value:function(t,e){t instanceof o.k?this._position.copy(t):this._position.set(t,e),this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}},{key:"getScale",value:function(){return this._scale}},{key:"setScale",value:function(t,e){t instanceof o.k?this._scale.copy(t):this._scale.set(t,e),this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}},{key:"getPivot",value:function(){return this._pivot}},{key:"setPivot",value:function(t,e){t instanceof o.k?this._pivot.copy(t):this._pivot.set(t,e),this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}},{key:"getRotation",value:function(){return this._rotation}},{key:"setRotation",value:function(t){this._rotation=t,this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}},{key:"getAlpha",value:function(){return this._alpha}},{key:"setAlpha",value:function(t){this._alpha=t}},{key:"getWorldAlpha",value:function(){return this._parent?this._parent.getAlpha()*this._alpha:this._alpha}},{key:"getWorldTransform",value:function(){return this._worldTransform}},{key:"getParent",value:function(){return this._parent}},{key:"setParent",value:function(t){this._parent=t}},{key:"getFilterRectangle",value:function(){return this._filterRectangle}},{key:"setFilterRectangle",value:function(t){this._filterRectangle.copy(t)}},{key:"getTint",value:function(){return this._tint}},{key:"setTint",value:function(t){this._tint=t}},{key:"isVisible",value:function(){return this._visible}},{key:"setVisible",value:function(t){this._visible=t}}]),t}();e.a=s},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=n(9),a=n(74),s=n(220),u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var l=o.c.RendererType,c=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._renderer=e,this._filterStack=[{filters:[]}],this._currentFrame=null,this._renderTargets=[],this._textureFrame=new o.h(0,0,e.getWidth(),e.getHeight()),this._onContextChange=this._onContextChange.bind(this),this._renderer.on("context",this._onContextChange),this._onContextChange()}return u(t,[{key:"resizeTo",value:function(t){this._textureFrame.width=t.x,this._textureFrame.height=t.y,this._renderTargets.forEach(function(e){return e.resizeTo(t)})}},{key:"getFilterStack",value:function(){return this._filterStack}},{key:"setFilterStack",value:function(t){this._filterStack=t}},{key:"_getOrCreateRenderTarget",value:function(t){var e=this._renderTargets.pop();return e||(e=new a.a(this._renderer,this._textureFrame.width,this._textureFrame.height,1)),e.setFrame(this._currentFrame),t&&e.clear(),e}},{key:"pushFilters",value:function(t,e){var n=t.getBounds();this._currentFrame=n;var r=t.getFilterRectangle();r.width>0&&r.height>0&&(this._currentFrame=r);var i=this._getOrCreateRenderTarget();this._renderer.setRenderTarget(i),i.clear(),this._filterStack.push({renderTarget:i,filters:e})}},{key:"popFilters",value:function(){var t=this._filterStack.pop(),e=t.filters,n=t.renderTarget,r=this._filterStack[this._filterStack.length-1].renderTarget;this._quad.map(this._textureFrame,n.getFrame());var i=e[0].getShaderForRenderer(this._renderer),o=this._quad.getVertexBuffer(),a=this._quad.getIndexBuffer(),s=this._renderer.getContext();s.bindBuffer(s.ARRAY_BUFFER,o),s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,a);var u=i.getAttributeLocations();return s.vertexAttribPointer(u.a_position,2,s.FLOAT,!1,0,0),s.vertexAttribPointer(u.a_texCoord,2,s.FLOAT,!1,0,32),s.vertexAttribPointer(u.a_color,4,s.FLOAT,!1,0,64),this._renderer.updateTexture(n.getBaseTexture(),!1),1===e.length?(e[0].apply(this._renderer,n,r),this._renderTargets.push(n)):this._applyFilters(e,n,r),e}},{key:"_applyFilters",value:function(t,e,n){var r=this,i=e,o=this._getOrCreateRenderTarget(!0);this._renderer.updateTexture(o.getBaseTexture(),!1);var a=t[t.length-1];t.forEach(function(t,e){if(t===a)t.apply(r._renderer,i,n,!0);else{t.apply(r._renderer,i,o,!0);var s=i;i=o,o=s}}),this._renderTargets.push(i),this._renderTargets.push(o)}},{key:"_onContextChange",value:function(){this._renderTargets.length=0,this._renderer.isOfType(l.WEBGL)&&(this._quad&&this._quad.dispose(),this._quad=new s.a(this._renderer))}},{key:"dispose",value:function(){this._renderer.off("context",this._onContextChange),this._quad&&this._quad.dispose(),this._renderTargets.forEach(function(t){t.dispose()})}}]),t}();e.a=c},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=n(50),a=n(102),s=n(22),u=n(103),l=n(254),c=n(255),h=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();s.a.invariant;var f=u.a.MARKERS,p=new RegExp("^data:image/jpeg;base64,","i"),d=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._buf=e,this._stream=new a.a(this._buf),this._stream.setHead(0),this._segments=this._sliceIntoSegments(this._buf),this._exifData=new c.a(this._getMarkerBuffer(f.EXIF)),this._jfifData=new l.a(this._getMarkerBuffer(f.JFIF))}return h(t,[{key:"restoreSegments",value:function(e){var n=t.fromDataURL(e);return n=this.restoreExifTagsToImageData(n),n=this.restoreJfifSegmentToImageData(n),t.toDataURL(n)}},{key:"restoreExifTagsToImageData",value:function(t){if(!this._exifData.isValid())return t;var e=this._sliceIntoSegments(t)[1][0],n=t.slice(0,e),r=t.slice(e),i=n.concat(this._exifData.getBuffer());return i=i.concat(r)}},{key:"restoreJfifSegmentToImageData",value:function(t){if(!this._jfifData.isValid())return t;var e=this._sliceIntoSegments(t),n=this._findSegment(f.JFIF,e);if(!n)return t;var r=n[0],i=n[1],o=t.slice(0,r),a=t.slice(r,i),s=t.slice(i),u=new l.a(a);return u.setDensityX(this._jfifData.getDensityX()),u.setDensityY(this._jfifData.getDensityY()),u.setUnitDensity(this._jfifData.getUnitDensity()),o.concat(a).concat(s)}},{key:"restoreExifTags",value:function(e){var n=t.fromDataURL(e),r=this.restoreExifTagsToImageData(n);return t.toDataURL(r)}},{key:"restoreJfifSegment",value:function(e){if(!this._jfifData.isValid())return e;var n=t.fromDataURL(e),r=this.restoreJfifSegmentToImageData(n);return t.toDataURL(r)}},{key:"setOrientation",value:function(t){return this._exifData.setOrientation(t)}},{key:"_findSegment",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._segments,n=0;n<e.length;n++){var r=e[n][0],i=e[n][1];if(this._stream.setHead(r),this._stream.peekInt16()===t)return[r,i]}return!1}},{key:"_getLastSegment",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._segments;return t[t.length-1]}},{key:"_getMarkerBuffer",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._segments,n=this._findSegment(t,e);if(n){var r=n[0],i=n[1];return this._buf.slice(r,i)}return!1}},{key:"_sliceIntoSegments",value:function(t){for(var e=new a.a(t),n=[];e.getHead()<t.length;){var r=e.readInt16();if(r!==f.SOI){if(r===f.SOS)break;if(!(r>=65280&&r<=65535))throw new Error("Invalid marker: 0x"+r.toString(16));var i=e.readInt16(),o=e.getHead()+i-2;n.push([e.getHead()-4,o]),e.setHead(o)}}return this._stream.setHead(0),n}},{key:"getTags",value:function(){return this._exifData.getTags()}},{key:"getTagData",value:function(){return this._exifData.getTagData()}},{key:"dispose",value:function(){this._buf=[],this._segments=[]}}],[{key:"toDataURL",value:function(t){return"data:image/jpeg;base64,"+o.a.encode(t)}},{key:"fromDataURL",value:function(t){var e=t.replace("data:image/jpeg;base64,","");return o.a.decode(e)}},{key:"isJPEG",value:function(t){return p.test(t)}},{key:"bufferIsJPEG",value:function(t){return"JFIF"===t.slice(6,10).toString()}},{key:"fromBase64String",value:function(e){var n=e.replace("data:image/jpeg;base64,","");return new t(o.a.decode(n))}}]),t}();e.a=d},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._head=0,this._buf=e}return o(t,[{key:"peekInt8",value:function(){return this._buf[this._head]}},{key:"peekInt16",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this._buf[this._head],n=this._buf[this._head+1];return t?(n<<8)+e:(e<<8)+n}},{key:"peekInt24",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this._buf[this._head],n=this._buf[this._head+1],r=this._buf[this._head+2];return t?(r<<16)+(n<<8)+e:(e<<16)+(n<<8)+r}},{key:"peekInt32",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this._buf[this._head],n=this._buf[this._head+1],r=this._buf[this._head+2],i=this._buf[this._head+3];return t?(i<<32)+(r<<16)+(n<<8)+e:(e<<32)+(n<<16)+(r<<8)+i}},{key:"writeInt8",value:function(t){this._buf[this._head]=255&t}},{key:"writeInt16",value:function(t){this._buf[this._head]=t>>8,this._buf[this._head+1]=255&t}},{key:"readInt8",value:function(){var t=this.peekInt8();return this._head+=1,t}},{key:"readInt16",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.peekInt16(t);return this._head+=2,e}},{key:"readInt24",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.peekInt24(t);return this._head+=3,e}},{key:"readInt32",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.peekInt32(t);return this._head+=4,e}},{key:"readString",value:function(t){for(var e="",n=0;n<t;n++){var r=this.readInt8();e+=String.fromCharCode(r)}return e}},{key:"getHead",value:function(){return this._head}},{key:"setHead",value:function(t){this._head=t}}]),t}();e.a=a},function(t,e,n){"use strict";e.a={MARKERS:{SOI:65496,SOS:65498,APP0:65504,APP1:65505,JFIF:65504,EXIF:65505},EXIF_TAGS:{256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"}}},function(t,e,n){"use strict";n.d(e,"a",function(){return d});var r=n(0),i=n.n(r),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(1),c=n.n(l),h=n(4),f=(n.n(h),n(17)),p=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var d=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||c()(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=u()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(a.a?a()(t,e):t.__proto__=e)}(e,h["Configurable"]),p(e,[{key:"insetsForWidth",value:function(t){return this.getRelativeInsets().clone().scale(t)}}],[{key:"Small",get:function(){return new e({imagePath:"text-design/images/imgly_text_design_asset_banderole_small.png",fontIdentifier:"imgly_font_campton_bold",relativeInsets:new f.a(.05,.2,.05,.2)})}},{key:"Rectangle",get:function(){return new e({imagePath:"text-design/images/imgly_text_design_asset_black_background.png",fontIdentifier:"imgly_font_campton_bold",relativeInsets:new f.a(.05,.05,.05,.05),needsImageSmoothingFix:!0})}},{key:"Celebrate1",get:function(){return new e({imagePath:"text-design/images/imgly_text_design_asset_celebrate_01.png",fontIdentifier:"imgly_font_rasa_500",relativeInsets:new f.a(.05,.2,.05,.2)})}},{key:"Celebrate2",get:function(){return new e({imagePath:"text-design/images/imgly_text_design_asset_celebrate_02.png",fontIdentifier:"imgly_font_rasa_500",relativeInsets:new f.a(.05,.2,.05,.2)})}}]),e}();d.prototype.availableOptions={image:{type:h.OptionType.IMAGE,default:null},imagePath:{type:h.OptionType.STRING,default:null},relativeInsets:{type:h.OptionType.OBJECT,default:new f.a},fontIdentifier:{type:h.OptionType.STRING,default:"imgly_font_open_sans_bold"},needsImageSmoothingFix:{type:h.OptionType.BOOLEAN,default:!1}}},function(t,e,n){"use strict";n.d(e,"a",function(){return x});var r=n(6),i=n.n(r),o=n(0),a=n.n(o),s=n(5),u=n.n(s),l=n(2),c=n.n(l),h=n(3),f=n.n(h),p=n(1),d=n.n(p),v=n(4),y=(n.n(v),n(17)),_=n(19),g=n(35),m=i.a||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},b=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),a()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),w=function t(e,n,r){null===e&&(e=Function.prototype);var i=u()(e,n);if(void 0===i){var o=d()(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0};var x=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||d()(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=f()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(c.a?c()(t,e):t.__proto__=e)}(e,_["a"]),b(e,[{key:"_getTextColor",value:function(){return this.getAutoAdjustTextColor()&&!this.getIsMasked()?this.getBackgroundColor().equals(v.Color.WHITE)?v.Color.BLACK:v.Color.WHITE:this.getAttributes().getTextColor().clone()}},{key:"_getTextFrame",value:function(){return this.getImageInsets().applyToRectangle(this._getFrame())}},{key:"_getTextFrameForElement",value:function(t){var n=w(e.prototype.__proto__||d()(e.prototype),"_getTextFrameForElement",this).call(this,t),r=this.getImageInsets();return(this.getIsMasked()||this.getIsUsedInInvertedLayout())&&(n.y-=r.top),n}},{key:"willRender",value:function(t){this.getAttributes().setTextColor(this._getTextColor());var e=this.getImage();if(e){var n=this.getCapInsets(),r=this._getFrame();n&&!n.equals(y.a.ZERO)?Object(g.b)(t,e,r,n):t.drawImage(e,r.x,r.y,r.width,r.height),Object(g.c)(t,r,this.getBackgroundColor(),"source-atop",!0)}(this.getIsMasked()||this.getIsUsedInInvertedLayout())&&e&&(t.save(),t.globalCompositeOperation="destination-out")}},{key:"didRender",value:function(t){w(e.prototype.__proto__||d()(e.prototype),"didRender",this).call(this,t),(this.getIsMasked()||this.getIsUsedInInvertedLayout())&&t.restore()}}]),e}();x.prototype.availableOptions=m({},_.a.prototype.availableOptions,{image:{type:v.OptionType.IMAGE,default:null},capInsets:{type:v.OptionType.OBJECT,default:new y.a},backgroundColor:{type:v.OptionType.COLOR,default:v.Color.WHITE},autoAdjustTextColor:{type:v.OptionType.BOOLEAN,default:!0},isMasked:{type:v.OptionType.BOOLEAN,default:!0},isUsedInInvertedLayout:{type:v.OptionType.BOOLEAN,default:!1}})},function(t,e,n){"use strict";n.d(e,"a",function(){return C});var r=n(6),i=n.n(r),o=n(0),a=n.n(o),s=n(5),u=n.n(s),l=n(2),c=n.n(l),h=n(3),f=n.n(h),p=n(1),d=n.n(p),v=n(4),y=(n.n(v),n(19)),_=n(61),g=n(42),m=n(23),b=n(35),w=i.a||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},x=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),a()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),T=function t(e,n,r){null===e&&(e=Function.prototype);var i=u()(e,n);if(void 0===i){var o=d()(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0};var k=v.Math.Rectangle,C=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||d()(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=f()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(c.a?c()(t,e):t.__proto__=e)}(e,y["a"]),x(e,[{key:"getImageSize",value:function(){var t=this.getLeftImage(),e=this.getRightImage(),n=this.getWords(),r=this.getAttributes().getFontIdentifier(),i=t?new m.a(t.width,t.height):new m.a,o=n.joined(1)[0];if(!o)return i;var a=new _.a({text:o,fontIdentifier:r,fontSize:50}).getSizeValue(),s=e?2:1;i.scale(s,1);var u=i.clone().fitInWidthWithOther(this._getFrame().width,a);return u.scale(1/s,1),u}},{key:"_getTextFrame",value:function(){var t=T(e.prototype.__proto__||d()(e.prototype),"_getTextFrame",this).call(this).clone(),n=this.getImageSize(),r=this.getRightImage(),i=this.getImagePosition();return r?(t.x+=n.width,t.width-=2*n.width):i===e.ImagePosition.Left&&(t.x+=n.width),t}},{key:"_calculateLayoutElements",value:function(){var t=T(e.prototype.__proto__||d()(e.prototype),"_calculateLayoutElements",this).call(this),n=this._getFrame(),r=this.getRightImage(),i=this.getImageSize(),o=this.getImagePosition(),a=this._getTextFrame(),s=this.getAttributes().getFontIdentifier(),u=new _.a({text:"stickerClock",fontIdentifier:s});u.fitWidth(this._getTextFrame().width);var l=(new k).set(n.x,n.y,i.width,i.height);if(r||o!==e.ImagePosition.Right||(l.x+=a.width),t.push(new g.a({text:"stickerClock",frame:l,font:u})),r){var c=t[0];if(c){var h=l.clone();h.translate(c.getFrame().width+h.width,0),t.push(new g.a({text:"stickerClock",frame:h,font:u}))}}return t}},{key:"render",value:function(t){var e=this._getLayoutElements(),n=this.getAttributes(),r=n.getTextColor(),i=this.getLeftImage(),o=this.getRightImage(),a=e[0],s=e[1],u=a.serializeOptions().font,l=this._getTextFrameForElement(a);if(u.draw(t,l.x,l.y,{textColor:n.getTextColor().toRGBA(),alignment:n.getAlignment()}),i){var c=s.getFrame();t.drawImage(i,c.x,c.y,c.width,c.height),Object(b.c)(t,c,r,"source-atop")}if(e.length>2){var h=e[2].getFrame().clone();t.drawImage(o,h.x,h.y,h.width,h.height),Object(b.c)(t,h,r,"source-atop")}}}]),e}();C.ImagePosition={Left:"LEFT",right:"RIGHT"},C.prototype.availableOptions=w({},y.a.prototype.availableOptions,{leftImage:{type:v.OptionType.IMAGE,default:null},rightImage:{type:v.OptionType.IMAGE,default:null},imagePosition:{type:v.OptionType.STRING,default:C.ImagePosition.Left,available:[C.ImagePosition.Left,C.ImagePosition.Right]}})},function(t,e,n){"use strict";n.d(e,"a",function(){return b});var r=n(6),i=n.n(r),o=n(0),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),h=n(1),f=n.n(h),p=n(4),d=(n.n(p),n(105)),v=n(42),y=n(61),_=(n(149),n(375)),g=i.a||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},m=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),a()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var b=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||f()(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=c()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(u.a?u()(t,e):t.__proto__=e)}(e,d["a"]),m(e,[{key:"_calculateLayoutElements",value:function(){var t=this.getWords(),e=this._getTextFrame(),n=this.getAttributes().getFontIdentifier(),r=this.getImageInsets(),i=new y.a({text:t.getWord(0),fontIdentifier:n});i.fitWidth(e.width);var o=new v.a({text:t.getWord(0),frame:e,font:i});o.setFrame(this._getTextFrameForElement(o));var a=this.getSize();return(this.getSizeToFitContent()||a.height<=1)&&(a.height=r.top+o.getFrame().height+r.bottom),a.height=Math.max(a.height,this.getMinimumHeight()),[o]}},{key:"_getTextFrameForElement",value:function(t){var e=this.getWords().getWord(0),n=this.getAttributes(),r=n.getFontIdentifier(),i=this.getImageInsets(),o=this.getImageInsets().applyToRectangle(this._getFrame()).scale(this.getTextScaleFactor()),a=new _.a({text:e,fontIdentifier:r,alignment:n.getAlignment(),lineHeight:1});a.fitInFrame(o);var s=a.getSize();o.height=s.height;var u=s.height*this.getRowScaleFactor();this.getSizeToFitContent()&&(u+=i.top+i.bottom);var l=this._getFrame(),c=n.getAlignment();if(this.getCenteredVertically())o.y=l.height/2-u/2+i.top;else switch(c){case"left":o.y=l.height-u-i.bottom;break;case"center":o.y=l.height/2-u/2+u*this.getCenterOffset(),o.x=(l.width-o.width)/2;break;case"right":o.x=l.width-o.width-i.right}return o}},{key:"render",value:function(t){var e=this;t.save(),this._getLayoutElements().forEach(function(n){var r=n.serializeOptions(),i=r.text,o=r.frame,a=e.getAttributes(),s=a.getFontIdentifier(),u=new _.a({text:i,fontIdentifier:s,alignment:a.getAlignment(),lineHeight:1,textColor:a.getTextColor().toRGBA()});o=e._getTextFrameForElement(n),u.fitInFrame(o),u.draw(t,o.x,o.y)}),t.restore()}}]),e}();b.prototype.availableOptions=g({},d.a.prototype.availableOptions,{centerOffset:{type:p.OptionType.NUMBER,default:0},sizeToFitContent:{type:p.OptionType.BOOLEAN,default:!1},textScaleFactor:{type:p.OptionType.NUMBER,default:.95},rowScaleFactor:{type:p.OptionType.NUMBER,default:1},minimumHeight:{type:p.OptionType.NUMBER,default:0},centeredVertically:{type:p.OptionType.BOOLEAN,default:!1}})},function(t,e,n){"use strict";n.d(e,"a",function(){return w});var r=n(6),i=n.n(r),o=n(0),a=n.n(o),s=n(5),u=n.n(s),l=n(2),c=n.n(l),h=n(3),f=n.n(h),p=n(1),d=n.n(p),v=n(4),y=(n.n(v),n(62)),_=n(43),g=n(16),m=i.a||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},b=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),a()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var w=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(t=e.__proto__||d()(e)).call.apply(t,[this].concat(r)));return o._possibleRowTypes=[y.a.SpeechBubble1,y.a.SpeechBubble3],o._rowTypesRandomizer=new g.a(0),o._isMaskedRandomizer=new g.a(0),o._seedPool.push(o._rowTypesRandomizer),o._seedPool.push(o._isMaskedRandomizer),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=f()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(c.a?c()(t,e):t.__proto__=e)}(e,_["a"]),b(e,[{key:"getImagePaths",value:function(){return this._possibleRowTypes.map(function(t){return t.getImagePath()})}},{key:"_rowTypes",value:function(t){return this._possibleRowTypes}},{key:"_randomLayoutRow",value:function(t,n,r,i){this._rowType=this._rowTypesRandomizer.pickNext(this._rowTypes(t)),i.setLineSpacing(.9);var o=function t(e,n,r){null===e&&(e=Function.prototype);var i=u()(e,n);if(void 0===i){var o=d()(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0}(e.prototype.__proto__||d()(e.prototype),"_randomLayoutRow",this).call(this,t,n,r,i);return o.set({textScaleFactor:1,minimumHeight:r*this._rowType.getMinimumHeightRatio(),sizeToFitContent:this._rowType.getSizeToFitContent(),centeredVertically:!0}),o}}]),e}();w.defaultFontIdentifiers=["imgly_font_panton_black_caps","imgly_font_panton_light_caps","imgly_font_panton_black_italic_caps","imgly_font_panton_light_italic_caps"],w.identifier="imgly_text_design_masked_speech_bubble",w.prototype.availableOptions=m({},_.a.prototype.availableOptions,{fontIdentifiers:{type:v.OptionType.ARRAY,default:w.defaultFontIdentifiers},squareLayout:{type:v.OptionType.BOOLEAN,default:!1},alignment:{type:v.OptionType.STRING,default:"left",available:_.a.ValidAlignments}})},function(t,e,n){"use strict";n.d(e,"a",function(){return w});var r=n(6),i=n.n(r),o=n(0),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),h=n(1),f=n.n(h),p=n(4),d=(n.n(p),n(154)),v=n(20),y=n(35),_=n(382),g=i.a||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},m=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),a()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var b=p.Math.Rectangle,w=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(t=e.__proto__||f()(e)).call.apply(t,[this].concat(r)));return o._MAX_TRIES=1e3,o._PRECISION=1e3,o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=c()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(u.a?u()(t,e):t.__proto__=e)}(e,d["a"]),m(e,[{key:"render",value:function(t,e,n,r,i){var o=this._options,a=o.imagePaths,s=o.relativeParticleSize;if(!(a.length<=0)){var u=e.width/e.height,l=new b(Math.round(n.left*this._PRECISION),Math.round(n.top*this._PRECISION*u),this._PRECISION,this._PRECISION);l.width-=l.x+Math.round(n.right*this._PRECISION),l.height-=l.y+Math.round(n.bottom*this._PRECISION*u);for(var c=[],h=0,f=0;h<this.getParticleCount()&&f<this._MAX_TRIES;){var p=s/2,d=Math.round(p*this._PRECISION),g=Math.round(p*this._PRECISION*u),m=Math.floor(this._PRECISION)-d,w=Math.floor(this._PRECISION)-g,x=i.nextInRange(d,m),T=i.nextInRange(g,w),k=new b(x-d,T-g,2*d,2*g);k.intersects(l)||this.hasCollision(c,k)||(c.push(new _.a({frame:k})),h+=1),f+=1}for(var C=0;C<c.length;C++){var R=c[C],E=i.pickNext(a),O=v.a.getImage(E),A=i.nextInRange(140,230)/255,S=e.width/this._PRECISION,F=e.height/this._PRECISION,I=R.getContentFrame();I.x*=S,I.y*=F,I.width*=S,I.height*=F;var D=r.clone();D.a=A,Object(y.a)(t,O,I,D,"source-atop")}}}},{key:"hasCollision",value:function(t,e){for(var n=0;n<t.length;n++)if(e.intersects(t[n].getFrame()))return!0;return!1}}]),e}();w.prototype.availableOptions=g({},d.a.prototype.availableOptions,{particleCount:{type:p.OptionType.NUMBER,default:50},relativeParticleSize:{type:p.OptionType.NUMBER,default:.08},imagePaths:{type:p.OptionType.ARRAY,default:[]}})},function(t,e,n){"use strict";var r=n(63),i=n(13),o=n(112),a=n(27),s=n(28),u=n(39),l=n(161),c=n(66),h=n(116),f=n(12)("iterator"),p=!([].keys&&"next"in[].keys()),d=function(){return this};t.exports=function(t,e,n,v,y,_,g){l(n,e,v);var m,b,w,x=function(t){if(!p&&t in R)return R[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},T=e+" Iterator",k="values"==y,C=!1,R=t.prototype,E=R[f]||R["@@iterator"]||y&&R[y],O=!p&&E||x(y),A=y?k?x("entries"):O:void 0,S="Array"==e&&R.entries||E;if(S&&(w=h(S.call(new t)))!==Object.prototype&&w.next&&(c(w,T,!0),r||s(w,f)||a(w,f,d)),k&&E&&"values"!==E.name&&(C=!0,O=function(){return E.call(this)}),r&&!g||!p&&!C&&R[f]||a(R,f,O),u[e]=O,u[T]=d,y)if(m={values:k?O:x("values"),keys:_?O:x("keys"),entries:A},g)for(b in m)b in R||o(R,b,m[b]);else i(i.P+i.F*(p||C),e,m);return m}},function(t,e,n){t.exports=!n(25)&&!n(38)(function(){return 7!=Object.defineProperty(n(80)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){t.exports=n(27)},function(t,e,n){var r=n(28),i=n(29),o=n(163)(!1),a=n(84)("IE_PROTO");t.exports=function(t,e){var n,s=i(t),u=0,l=[];for(n in s)n!=a&&r(s,n)&&l.push(n);for(;e.length>u;)r(s,n=e[u++])&&(~o(l,n)||l.push(n));return l}},function(t,e,n){var r=n(47);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,e,n){var r=n(14).document;t.exports=r&&r.documentElement},function(t,e,n){var r=n(28),i=n(48),o=n(84)("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),r(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},function(t,e,n){var r=n(113),i=n(86).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},function(t,e){},function(t,e,n){var r=n(18);t.exports=function(t,e,n,i){try{return i?e(r(n)[0],n[1]):e(n)}catch(e){var o=t.return;throw void 0!==o&&r(o.call(t)),e}}},function(t,e,n){var r=n(39),i=n(12)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||o[i]===t)}},function(t,e,n){var r=n(18),i=n(64),o=n(12)("species");t.exports=function(t,e){var n,a=r(t).constructor;return void 0===a||void 0==(n=r(a)[o])?e:i(n)}},function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},function(t,e,n){var r=n(18),i=n(24),o=n(94);t.exports=function(t,e){if(r(t),i(e)&&e.constructor===t)return e;var n=o.f(t);return(0,n.resolve)(e),n.promise}},function(t,e,n){var r=n(12)("iterator"),i=!1;try{var o=[7][r]();o.return=function(){i=!0},Array.from(o,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!i)return!1;var n=!1;try{var o=[7],a=o[r]();a.next=function(){return{done:n=!0}},o[r]=function(){return a},t(o)}catch(t){}return n}},function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var u,l=[],c=!1,h=-1;function f(){c&&u&&(c=!1,u.length?l=u.concat(l):h=-1,l.length&&p())}function p(){if(!c){var t=s(f);c=!0;for(var e=l.length;e;){for(u=l,l=[];++h<e;)u&&u[h].run();h=-1,e=l.length}u=null,c=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function v(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];l.push(new d(t,e)),1!==l.length||c||s(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=v,i.addListener=v,i.once=v,i.off=v,i.removeListener=v,i.removeAllListeners=v,i.emit=v,i.prependListener=v,i.prependOnceListener=v,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=n(31),a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.reset()}return a(t,[{key:"multiply",value:function(t){var e,n,r,i,o,a;return e=this.a*t.a+this.b*t.c,n=this.a*t.b+this.b*t.d,r=this.c*t.a+this.d*t.c,i=this.c*t.b+this.d*t.d,o=this.tx*t.a+this.ty*t.c+t.tx,a=this.tx*t.b+this.ty*t.d+t.ty,this.a=e,this.b=n,this.c=r,this.d=i,this.tx=o,this.ty=a,this}},{key:"applyToVector",value:function(t){var e=t,n=e.x,r=e.y;return(t=t.clone()).x=this.a*n+this.c*r+this.tx,t.y=this.b*n+this.d*r+this.tx,t}},{key:"applyInverseToVector",value:function(t){var e=1/(this.a*this.d+this.c*-this.b),n=t,r=n.x,i=n.y;return(t=t.clone()).x=this.d*e*r+-this.c*e*i+(this.ty*this.c-this.tx*this.d)*e,t.y=this.a*e*i+-this.b*e*r+(-this.ty*this.a+this.tx*this.b)*e,t}},{key:"rectangleToCoordinates",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new o.a(0,0),n=t.width*(1-e.x),r=t.width*-e.x,i=t.height*(1-e.y),a=t.height*-e.y,s=[];return s.push(new o.a(this.a*r+this.c*a+this.tx,this.d*a+this.b*r+this.ty)),s.push(new o.a(this.a*n+this.c*a+this.tx,this.d*a+this.b*n+this.ty)),s.push(new o.a(this.a*n+this.c*i+this.tx,this.d*i+this.b*n+this.ty)),s.push(new o.a(this.a*r+this.c*i+this.tx,this.d*i+this.b*r+this.ty)),s}},{key:"reset",value:function(){this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0}},{key:"toArray",value:function(){var t=[this.a,this.b,0,this.c,this.d,0,this.tx,this.ty,1];return"undefined"==typeof Float32Array?t:new Float32Array(t)}},{key:"toString",value:function(){return"Matrix({ a: "+this.a+", b: "+this.b+", c: "+this.c+", d: "+this.d+", tx: "+this.tx+", ty: "+this.ty+" })"}}],[{key:"IDENTITY",get:function(){return new t}}]),t}();e.a=s},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=n(31),a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var s=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=e,this.y=n,this.width=r,this.height=i}return a(t,[{key:"set",value:function(t,e,n,r){return this.x=t,this.y=e,this.width=n,this.height=r,this}},{key:"clone",value:function(){return new t(this.x,this.y,this.width,this.height)}},{key:"copy",value:function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}},{key:"equals",value:function(e,n,r,i){return e instanceof t?e.x===this.x&&e.y===this.y&&e.width===this.width&&e.height===this.height:e===this.x&&n===this.y&&r===this.width&&i===this.height}},{key:"translate",value:function(t,e){return t instanceof o.a&&(e=t.y,t=t.x),this.x+=t,this.y+=e,this}},{key:"scale",value:function(t,e){return t instanceof o.a?(e=t.y,t=t.x):void 0===e&&(e=t),this.width*=t,this.height*=e,this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.width=Math.round(this.width),this.height=Math.round(this.height),this}},{key:"getPosition",value:function(){return new o.a(this.x,this.y)}},{key:"getSize",value:function(){return new o.a(this.width,this.height)}},{key:"insetBy",value:function(t,e){return this.x+=t,this.y+=e,this.width-=2*t,this.height-=2*e,this}},{key:"intersects",value:function(t){var e=new o.a(this.x,this.y),n=new o.a(this.x+this.width,this.y+this.height),r=new o.a(t.x,t.y),i=new o.a(t.x+t.width,t.y+t.height);return!(r.x>n.x||e.x>i.x||i.y<e.y||n.y<r.y)}},{key:"toString",value:function(){return"Rectangle({ x: "+this.x+", y: "+this.y+", width: "+this.width+", height: "+this.height+" })"}}],[{key:"FromDiagonalPoints",value:function(e,n){var r=!1;n.x-e.x<0&&(r=!0);var i=r?n:e,o=r?e:n,a=o.x-i.x,s=o.y-i.y;return new t(i.x,i.y,a,s)}}]),t}();e.a=s},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=n(26),a=n(211);n.n(a);function s(t,e,n){return e in t?i()(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}e.a={checkFramebufferStatus:function(t,e){var n,r=e.checkFramebufferStatus(e.FRAMEBUFFER),i=(s(n={},e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,"Incomplete attachment"),s(n,e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT,"Missing attachment"),s(n,e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,"Incomplete dimensions"),s(n,e.FRAMEBUFFER_UNSUPPORTED,"Framebuffer unsupported"),n);r!==e.FRAMEBUFFER_COMPLETE&&o.a.warn(t,"Framebuffer incomplete: "+i[r])},determineGPUName:function(t){var e=null,n=null;t||(t=(n=document.createElement("canvas")).getContext("experimental-webgl")||n.getContext("webgl"));var r=t&&t.getExtension("WEBGL_debug_renderer_info");return r&&(e=t.getParameter(r.UNMASKED_RENDERER_WEBGL),n&&n.remove()),e},isGPUBlacklisted:function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!1}}},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=n(9),a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var s="undefined"!=typeof window&&window.performance&&window.performance.now?window.performance.now.bind(window.performance):n(130),u=function(){function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._context=e,this._tracking=!1;var r=this,i=function(t){"function"==typeof e[t]?n[t]=function(){for(var n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];var a=e[t];if(!r._tracking)return a.apply(e,i);var u=s(),l=a.apply(e,i),c=s()-u,h={functionName:t,arguments:i,duration:c};return r._trackedCalls.push(h),l}:n._makePropertyWrapper(t)};for(var o in e)i(o)}return a(t,[{key:"_makePropertyWrapper",value:function(t){if(-1===["_context","_trackedCalls","_tracking"].indexOf(t)){var e=this._context;this.__defineGetter__(t,function(){return e[t]}),this.__defineSetter__(t,function(n){e[t]=n})}}},{key:"startFrame",value:function(){this._tracking=!0,this._trackedCalls=[]}},{key:"endFrame",value:function(){var t="Rendering";o.f.log(t,"Frame rendering results:"),o.f.log(t,"Context calls: "+this._trackedCalls.length);var e={};this._trackedCalls.forEach(function(t){var n=t.functionName,r=t.duration;e[n]=e[n]||{totalDuration:0,calls:0},e[n].totalDuration+=r,e[n].calls++});var n=[];for(var r in e){var i=e[r];i.averageDuration=i.totalDuration/i.calls,n.push({functionName:r,data:i})}n.sort(function(t,e){return e.data.totalDuration-t.data.totalDuration}),(n=n.slice(0,3)).forEach(function(e){o.f.log(t,e.functionName+": "+e.data.calls+" calls, "+e.data.totalDuration.toFixed(2)+"ms")})}}]),t}();e.a=u},function(t,e,n){(function(e){(function(){var n,r,i;"undefined"!=typeof performance&&null!==performance&&performance.now?t.exports=function(){return performance.now()}:void 0!==e&&null!==e&&e.hrtime?(t.exports=function(){return(n()-i)/1e6},r=e.hrtime,i=(n=function(){var t;return 1e9*(t=r())[0]+t[1]})()):Date.now?(t.exports=function(){return Date.now()-i},i=Date.now()):(t.exports=function(){return(new Date).getTime()-i},i=(new Date).getTime())}).call(this)}).call(e,n(125))},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(1),c=n.n(l),h=n(9),f=n(213),p=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var d=function(t){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||c()(e)).call(this));return i._options=f.a.defaults(r,{pixelRatio:1,transparent:!1,clearColor:h.b.BLACK,debug:!1}),i.setMaxListeners(0),i._width=t||800,i._height=n||600,i._dimensions=new h.k(i._width,i._height),i._maxTextureSize=null,i._pixelRatio=i._options.pixelRatio,i._clearColor=i._options.transparent?h.b.TRANSPARENT:i._options.clearColor||h.b.BLACK,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=u()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(a.a?a()(t,e):t.__proto__=e)}(e,h["d"]),p(e,[{key:"setCanvas",value:function(t){var e=this._canvas;this._canvas=t,e!==t&&(this._createContext(),this._onBeforeContext(),this._setupContext()),this.resizeTo(new h.k(this._width,this._height))}},{key:"getCanvas",value:function(){return this._canvas}},{key:"_onBeforeContext",value:function(){}},{key:"resizeTo",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this._width=t.x*this._pixelRatio,this._height=t.y*this._pixelRatio,e&&(this._canvas.width=this._width,this._canvas.height=this._height,this._canvas.style&&(this._canvas.style.width=this._width/this._pixelRatio+"px",this._canvas.style.height=this._height/this._pixelRatio+"px")),this._dimensions=t.clone()}},{key:"_createContext",value:function(){h.f.warn(this.constructor.name,"`_createContext` is abstract and not implemented in inherited class")}},{key:"_setupContext",value:function(){h.f.warn(this.constructor.name,"`_setupContext` is abstract and not implemented in inherited class")}},{key:"render",value:function(t){h.f.warn(this.constructor.name,"`render` is abstract and not implemented in inherited class")}},{key:"getMaxDimensions",value:function(){return null}},{key:"getContext",value:function(){return this._context}},{key:"getWidth",value:function(){return this._dimensions.x}},{key:"getHeight",value:function(){return this._dimensions.y}},{key:"getDimensions",value:function(){return this._dimensions}},{key:"getPixelRatio",value:function(){return this._pixelRatio}},{key:"setPixelRatio",value:function(t){this._pixelRatio=t,this._defaultRenderTarget&&this._defaultRenderTarget.setPixelRatio(t)}},{key:"getMaxTextureSize",value:function(){return this._maxTextureSize}},{key:"getFilterManager",value:function(){return this._filterManager}},{key:"setFilterManager",value:function(t){this._filterManager=t}},{key:"isOfType",value:function(t){return this._type===t}},{key:"dispose",value:function(){h.f.warn(this.constructor.name,"`dispose` is abstract and not implemented in inherited class")}}],[{key:"isSupported",value:function(){return!0}}]),e}();e.a=d},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._renderer=e,this._onContextChange=this._onContextChange.bind(this),this._renderer.on("context",this._onContextChange)}return o(t,[{key:"_onContextChange",value:function(){}},{key:"start",value:function(){}},{key:"stop",value:function(){this.flush()}},{key:"flush",value:function(){}},{key:"dispose",value:function(){this._renderer.off("context",this._onContextChange),this._renderer=null}}]),t}();e.a=a},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var a=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.width=e,this.height=n,this.data=r}return o(t,null,[{key:"fromNodeCanvasImage",value:function(e){var n=new Canvas(e.width,e.height).getContext("2d");n.drawImage(e,0,0);var r=n.getImageData(0,0,e.width,e.height);return new t(e.width,e.height,r.data)}}]),t}();e.a=a},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=n(5),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),h=n(1),f=n.n(h),p=n(9),d=n(99),v=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var y=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(t=e.__proto__||f()(e)).call.apply(t,[this].concat(r)));return o._children=[],o._filters=[],o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=c()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(u.a?u()(t,e):t.__proto__=e)}(e,d["a"]),v(e,[{key:"addFilter",value:function(t){this._filters.push(t)}},{key:"removeFilter",value:function(t){var e=this._filters.indexOf(t);return-1!==e&&(this._filters.splice(e,1),!0)}},{key:"setFilters",value:function(t){this._filters=t}},{key:"addChild",value:function(t){var e=t.getParent();null!==e&&e.removeChild(t),t.setParent(this),this._children.push(t)}},{key:"prependChild",value:function(t){var e=t.getParent();null!==e&&e.removeChild(t),t.setParent(this),this._children.unshift(t)}},{key:"hasChild",value:function(t){return-1!==this._children.indexOf(t)}},{key:"removeChild",value:function(t){var e=this._children.indexOf(t);-1!==e?(this._children.splice(e,1),t.setParent(null)):p.f.info(this.constructor.name,"Tried to remove a child that does not exist")}},{key:"clearChildren",value:function(){this._children=[]}},{key:"renderWebGL",value:function(t){if(this._visible){var e=t.getFilterManager();this._filters&&this._filters.length&&e.pushFilters(this,this._filters),t.getCurrentObjectRenderer().start(),this._renderWebGL(t),this._children.forEach(function(e){e.renderWebGL(t)}),t.getCurrentObjectRenderer().flush(),this._filters&&this._filters.length&&e.popFilters(),t.getCurrentObjectRenderer().start()}}},{key:"_renderWebGL",value:function(t){}},{key:"renderCanvas",value:function(t){if(this._visible){var e=t.getFilterManager();this._filters&&this._filters.length&&e.pushFilters(this,this._filters),this._renderCanvas(t),this._children.forEach(function(e){e.renderCanvas(t)}),this._filters&&this._filters.length&&e.popFilters()}}},{key:"_renderCanvas",value:function(t){}},{key:"updateTransform",value:function(){(function t(e,n,r){null===e&&(e=Function.prototype);var i=a()(e,n);if(void 0===i){var o=f()(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0})(e.prototype.__proto__||f()(e.prototype),"updateTransform",this).call(this),this._children.forEach(function(t){t.updateTransform()})}},{key:"getLocalBounds",value:function(){return this._localBoundsNeedUpdate&&(this._localBoundsNeedUpdate=!1),this._localBounds.clone()}},{key:"getBounds",value:function(){return this._boundsNeedUpdate&&(this._boundsNeedUpdate=!1),this._bounds.clone()}},{key:"getChildren",value:function(){return this._children}},{key:"getFilters",value:function(){return this._filters}},{key:"dispose",value:function(){}}]),e}();e.a=y},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(1),c=n.n(l),h=n(9),f=n(53),p=n(221),d=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var v=function(t){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||c()(e)).call(this));if(!(t instanceof f.a))throw new Error("`baseTexture` should be an instance of BaseTexture");return r._uvs=new p.a,r._frame=n?n.clone():null,r._frameLocked=!!n,r._onBaseTextureLoaded=r._onBaseTextureLoaded.bind(r),r._onBaseTextureUpdated=r._onBaseTextureUpdated.bind(r),r._frame||(r._frame=new h.h(0,0,1,1)),r.setBaseTexture(t),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=u()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(a.a?a()(t,e):t.__proto__=e)}(e,h["d"]),d(e,[{key:"_onBaseTextureLoaded",value:function(){if(!this._frameLocked){var t=this._baseTexture.getFrame().clone();this.setFrame(t)}this._baseTexture.on("update",this._onBaseTextureUpdated)}},{key:"_onBaseTextureUpdated",value:function(){var t=this._baseTexture.getFrame(),e=t.width,n=t.height;this._frame.width=e,this._frame.height=n,this.emit("update")}},{key:"_updateUVs",value:function(){this._uvs.update(this._frame,this._baseTexture.getFrame())}},{key:"getBaseTexture",value:function(){return this._baseTexture}},{key:"setBaseTexture",value:function(t){if(this._baseTexture=t,this._baseTexture.isLoaded()){var e=t.getFrame(),n=e.width,r=e.height;this._frameLocked||(this._frame=new h.h(0,0,n,r)),this._onBaseTextureLoaded()}else this._baseTexture.once("loaded",this._onBaseTextureLoaded)}},{key:"getFrame",value:function(){return this._frame}},{key:"setFrame",value:function(t){this._frame=t,this._updateUVs()}},{key:"getWidth",value:function(){return this._frame.width}},{key:"getHeight",value:function(){return this._frame.height}},{key:"getUVs",value:function(){return this._uvs}},{key:"getDimensions",value:function(){return new h.k(this._frame.width,this._frame.height)}},{key:"dispose",value:function(){(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&this._baseTexture.dispose()}}],[{key:"fromImage",value:function(t){return new e(new f.a(t))}},{key:"fromCanvas",value:function(t){return new e(new f.a(t))}}]),e}();e.a=v},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=n(51),a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var s=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,h=arguments.length>10&&void 0!==arguments[10]?arguments[10]:0,f=arguments.length>11&&void 0!==arguments[11]?arguments[11]:0,p=arguments.length>12&&void 0!==arguments[12]?arguments[12]:1,d=arguments.length>13&&void 0!==arguments[13]?arguments[13]:0,v=arguments.length>14&&void 0!==arguments[14]?arguments[14]:0,y=arguments.length>15&&void 0!==arguments[15]?arguments[15]:0,_=arguments.length>16&&void 0!==arguments[16]?arguments[16]:0,g=arguments.length>17&&void 0!==arguments[17]?arguments[17]:0,m=arguments.length>18&&void 0!==arguments[18]?arguments[18]:1,b=arguments.length>19&&void 0!==arguments[19]?arguments[19]:0;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.set(e,n,r,i,o,a,s,u,l,c,h,f,p,d,v,y,_,g,m,b)}return a(t,[{key:"set",value:function(t,e,n,r,i,o,a,s,u,l,c,h,f,p,d,v,y,_,g,m){this.a=t,this.b=e,this.c=n,this.d=r,this.e=i,this.f=o,this.g=a,this.h=s,this.i=u,this.j=l,this.k=c,this.l=h,this.m=f,this.n=p,this.o=d,this.p=v,this.q=y,this.r=_,this.s=g,this.t=m}},{key:"reset",value:function(){this.a=1,this.b=0,this.c=0,this.d=0,this.e=0,this.f=0,this.g=1,this.h=0,this.i=0,this.j=0,this.k=0,this.l=0,this.m=1,this.n=0,this.o=0,this.p=0,this.q=0,this.r=0,this.s=1,this.t=0}},{key:"apply",value:function(t){var e=this.a*t.r+this.b*t.g+this.c*t.b+this.d*t.a+this.e,n=this.f*t.r+this.g*t.g+this.h*t.b+this.i*t.a+this.j,r=this.k*t.r+this.l*t.g+this.m*t.b+this.n*t.a+this.o,i=this.p*t.r+this.q*t.g+this.r*t.b+this.s*t.a+this.t;return new o.a(e,n,r,i)}},{key:"multiply",value:function(t){var e,n,r,i,o,a,s,u,l,c,h,f,p,d,v,y,_,g,m,b,w=t,x=this;return e=w.a*x.a+w.b*x.f+w.c*x.k+w.d*x.p,n=w.a*x.b+w.b*x.g+w.c*x.l+w.d*x.q,r=w.a*x.c+w.b*x.h+w.c*x.m+w.d*x.r,i=w.a*x.d+w.b*x.i+w.c*x.n+w.d*x.s,a=w.f*x.a+w.g*x.f+w.h*x.k+w.i*x.p,s=w.f*x.b+w.g*x.g+w.h*x.l+w.i*x.q,u=w.f*x.c+w.g*x.h+w.h*x.m+w.i*x.r,l=w.f*x.d+w.g*x.i+w.h*x.n+w.i*x.s,h=w.k*x.a+w.l*x.f+w.m*x.k+w.n*x.p,f=w.k*x.b+w.l*x.g+w.m*x.l+w.n*x.q,p=w.k*x.c+w.l*x.h+w.m*x.m+w.n*x.r,d=w.k*x.d+w.l*x.i+w.m*x.n+w.n*x.s,y=w.p*x.a+w.q*x.f+w.r*x.k+w.s*x.p,_=w.p*x.b+w.q*x.g+w.r*x.l+w.s*x.q,g=w.p*x.c+w.q*x.h+w.r*x.m+w.s*x.r,m=w.p*x.d+w.q*x.i+w.r*x.n+w.s*x.s,o=w.a*x.e+w.b*x.j+w.c*x.o+w.d*x.t+w.e,c=w.f*x.e+w.g*x.j+w.h*x.o+w.i*x.t+w.j,v=w.k*x.e+w.l*x.j+w.m*x.o+w.n*x.t+w.o,b=w.p*x.e+w.q*x.j+w.r*x.o+w.s*x.t+w.t,this.a=e,this.b=n,this.c=r,this.d=i,this.e=o,this.f=a,this.g=s,this.h=u,this.i=l,this.j=c,this.k=h,this.l=f,this.m=p,this.n=d,this.o=v,this.p=y,this.q=_,this.r=g,this.s=m,this.t=b,this}},{key:"clone",value:function(){var e=new t;return e.set(this.a,this.b,this.c,this.d,this.e,this.f,this.g,this.h,this.i,this.j,this.k,this.l,this.m,this.n,this.o,this.p,this.q,this.r,this.s,this.t),e}},{key:"equals",value:function(t){return this.a===t.a&&this.b===t.b&&this.c===t.c&&this.d===t.d&&this.e===t.e&&this.f===t.f&&this.g===t.g&&this.h===t.h&&this.i===t.i&&this.j===t.j&&this.k===t.k&&this.l===t.l&&this.m===t.m&&this.n===t.n&&this.o===t.o&&this.p===t.p&&this.q===t.q&&this.r===t.r&&this.s===t.s&&this.t===t.t}},{key:"getOffsets",value:function(){return[this.e,this.j,this.o,this.t]}},{key:"toString",value:function(){return"ColorMatrix( "+this.a+", "+this.b+", "+this.c+", "+this.d+", "+this.e+",\n      "+this.f+", "+this.g+", "+this.h+", "+this.i+", "+this.j+",\n      "+this.k+", "+this.l+", "+this.m+", "+this.n+", "+this.o+",\n      "+this.p+", "+this.q+", "+this.r+", "+this.s+", "+this.t+" )"}},{key:"toArray",value:function(){var t=this;return"abcdefghijklmnopqrst".split("").map(function(e){return t[e]})}}],[{key:"createBrightnessMatrix",value:function(e){var n=new t;return n.e=e,n.j=e,n.o=e,n}},{key:"createContrastMatrix",value:function(e){var n=new t,r=(1-e)/2;return n.a=n.g=n.m=e,n.e=n.j=n.o=r,n}},{key:"createSaturationMatrix",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=new t,r=1-e,i=.213*r,o=.715*r,a=.072*r;return n.a=i+e,n.b=o,n.c=a,n.f=i,n.g=o+e,n.h=a,n.k=i,n.l=o,n.m=a+e,n}},{key:"createExposureMatrix",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=Math.pow(2,e);return new t(n,0,0,0,0,0,n,0,0,0,0,0,n,0,0,0,0,0,1,0)}},{key:"createLinearMatrix",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=new t;return r.a=r.g=r.m=e,r.e=r.j=r.o=n,r}},{key:"IDENTITY",get:function(){return new t}}]),t}();e.a=s},function(t,e,n){"use strict";(function(t){var r=n(0),i=n.n(r),o=n(33),a=n(241),s=n.n(a),u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var l="undefined"!=typeof window?window:t,c=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._url=e,this._parsedUrl=s.a.parse(this._url,!0)}return u(t,[{key:"_isJSONPRequest",value:function(){var t=this._parsedUrl.query;for(var e in t){if("?"===t[e])return!0}return!1}},{key:"load",value:function(){return this._isJSONPRequest()?this._loadJSONP():this._loadJSON()}},{key:"_loadJSON",value:function(){var t=this;return new o.a(function(e,n){var r=void 0;l.XDomainRequest?((r=new l.XDomainRequest).onload=function(){var t=JSON.parse(r.responseText);e(t)},r.onerror=function(t){n(t)},r.open("GET",t._url,!0),r.send()):l.XMLHttpRequest&&((r=new XMLHttpRequest).onreadystatechange=function(t){if(4===r.readyState)if(200===r.status){var i=JSON.parse(r.responseText);e(i)}else n(new Error("HTTP Status "+r.status))},r.open("GET",t._url,!0),r.send())})}},{key:"_loadJSONP",value:function(){var t=this,e=!1,n=!1,r="pesdk"+Math.round(99999999999999*Math.random());return new o.a(function(i,o){var a=t._createJSONPNode(r);l[r]=function(r){t._removeJSONPNode(a),e||(n=!0,i(r))},l.setTimeout(function(){n||(t._removeJSONPNode(a),e=!0,o(new Error("Timeout of 5 seconds exceeded.")))},5e3)})}},{key:"_createJSONPNode",value:function(t){var e=this._buildJSONPUrl(t),n=document.querySelector("head"),r=document.createElement("script");return r.src=e,n.appendChild(r),r}},{key:"_removeJSONPNode",value:function(t){t.parentNode.removeChild(t)}},{key:"_buildJSONPUrl",value:function(t){var e=this._parsedUrl.query,n=null;for(var r in e)if("?"===e[r]){n=r;break}return delete this._parsedUrl.search,e[n]=t,s.a.format(this._parsedUrl)}}]),t}();e.a=c}).call(e,n(49))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(31),i=n(250),o=n(127),a=n(126),s=n(136),u=n(251);n.d(e,"Vector2",function(){return r.a}),n.d(e,"Vector3",function(){return i.a}),n.d(e,"Rectangle",function(){return o.a}),n.d(e,"Matrix",function(){return a.a}),n.d(e,"ColorMatrix",function(){return s.a}),n.d(e,"CubicBezierCurve",function(){return u.a})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(252);n.d(e,"ExifOrientationOperation",function(){return r.a})},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(1),c=n.n(l),h=n(32),f=n(33),p=n(26),d=n(69),v=n(55),y=n(141),_=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var g=function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||c()(e)).call(this,n,{enabled:{type:h.OptionType.BOOLEAN,default:!0,serializable:!1}}));return r._sdk=t,r._cacheEnabled=!1,r._dirtiness={},r._sprite=new d.a.Sprite,r._container=new d.a.Container,r._container.addChild(r._sprite),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=u()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(a.a?a()(t,e):t.__proto__=e)}(e,v["a"]),_(e,[{key:"_onOptionsChange",value:function(){this.setDirty(!0)}},{key:"render",value:function(t){var e=this;if(!this.getEnabled())return p.a.info(this.constructor.name,"Disabled - skipping"),f.a.resolve(t);if(!this._renderTexture){var n=this._sdk.getSprite().getTexture().getFrame();this._renderTexture=new d.a.RenderTexture(this._sdk.getRenderer(),n.width,n.height)}var r=this._sdk.getRenderer(),i=void 0,o=void 0;if(p.a.canLog("info")&&(o=new y.a(this.constructor.name,"Rendering")),this.isDirtyForRenderer(r)){this._sprite.setTexture(t);var a=this.getNewDimensions(t.getDimensions()).floor();this._renderTexture.resizeTo(a),this._renderTexture.clear(),i=this._render(t).then(function(){return e.setDirtyForRenderer(!1,r),e._renderTexture})}else p.a.info(this.constructor.name,"Rendering from cache"),i=f.a.resolve(this._renderTexture);return i.then(function(t){return o&&o.stop(),t})}},{key:"_render",value:function(t){return(this._sdk.getRenderer().isOfType(h.RendererType.WEBGL)?this._renderWebGL.bind(this):this._renderCanvas.bind(this))(t)}},{key:"_renderWebGL",value:function(t){throw new Error("Operation#_renderWebGL is abstract and not implemented in inherited class.")}},{key:"_renderCanvas",value:function(t){throw new Error("Operation#_renderCanvas is abstract and not implemented in inherited class.")}},{key:"getNewDimensions",value:function(t){return t.clone()}},{key:"onBeforeExport",value:function(){this.transform&&this._tempTransformChange&&this.transform(this._tempTransformChange),this._onBeforeExport()}},{key:"onAfterExport",value:function(){this.transform&&this._tempInverseTransformChange&&this.transform(this._tempInverseTransformChange),this._onAfterExport()}},{key:"_onBeforeExport",value:function(){}},{key:"_onAfterExport",value:function(){}},{key:"setTemporaryTransformChange",value:function(t,e){this._tempTransformChange=t,this._tempInverseTransformChange=e}},{key:"reset",value:function(){this._dirty=!0,this._glslPrograms={}}},{key:"isDirtyForRenderer",value:function(t){var e=this._dirtiness[t.id];return void 0===e||e}},{key:"setDirtyForRenderer",value:function(t,e){arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._dirtiness[e.id]=t}},{key:"setDirty",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(var n in this._dirtiness)this.setDirtyForRenderer(t,{id:n},e)}},{key:"getSDK",value:function(){return this._sdk}},{key:"getInputDimensions",value:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=this._sdk.getInputDimensions();e&&n.multiply(this._sdk.getZoom()).floor();var r=void 0;return this._sdk.getOperationsStack().forEach(function(e){r||(e!==t?n=e.getNewDimensions(n):r=!0)}),n.floor()}},{key:"clone",value:function(){return new(0,this.constructor)(this._sdk,this.serializeOptions())}},{key:"disposeRenderTextures",value:function(){this._renderTexture&&this._renderTexture.dispose(),this._renderTexture=null}},{key:"dispose",value:function(){this.disposeRenderTextures(),this._sprite.dispose()}}]),e}();g.identifier=null,e.a=g},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=n(41),a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var s="undefined"!=typeof window&&window.performance&&window.performance.now?window.performance.now.bind(window.performance):n(130),u=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._tag=e,this._name=n,this._start=s()}return a(t,[{key:"stop",value:function(){var t=s()-this._start,e=Math.round(1e3/t);o.Log.info(this._tag,this._name+" took "+t.toFixed(2)+"ms ("+e+" FPS)")}}]),t}();e.a=u},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(1),c=n.n(l),h=n(41),f=n(33),p=n(52),d=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var v=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||c()(e)).call(this));return n._onOperationUpdate=n._onOperationUpdate.bind(n),n._cacheEnabled=!0,n._stack=t,n._stack.forEach(function(t){t.on("update",n._onOperationUpdate)}),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=u()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(a.a?a()(t,e):t.__proto__=e)}(e,p["a"]),d(e,[{key:"clear",value:function(){var t=this;this.forEach(function(e){return t.remove(e)}),this._stack=[]}},{key:"hasChanges",value:function(){return this._stack.filter(function(t){return!!t}).some(function(t){return t.hasChanges()})}},{key:"_onOperationUpdate",value:function(t,e){this.emit(h.Events.OPERATION_UPDATED,t,e)}},{key:"enableCache",value:function(){this._cacheEnabled=!0}},{key:"disableCache",value:function(){this._cacheEnabled=!1}},{key:"forEach",value:function(t){return this._stack.filter(function(t){return!!t}).forEach(t)}},{key:"render",value:function(t,e){var n=this,r=e,i=this._stack.filter(function(t){return!!t}).filter(function(t){return t.getEnabled()});i.reverse();var o=i.filter(function(e){return!e.isDirtyForRenderer(t.getRenderer())})[0],a=i.indexOf(o);i.reverse();var s=0;-1!==a&&(s=i.length-a-1);for(var u=0;u<s;u++)h.Log.info(this.constructor.name,"Skipping "+i[u].constructor.name);for(var l=f.a.resolve(r),c=function(t){var e=i[t],r=void 0,o=void 0;l=l.then(function(t){return e.render(t).then(function(t){return r&&t!==r&&!n._cacheEnabled&&o.disposeRenderTextures(),r=t,o=e,t})})},p=s;p<i.length;p++)c(p);return l}},{key:"validateSettings",value:function(){return f.a.all(this._stack.filter(function(t){return!!t}).map(function(t){return t.validateSettings()}))}},{key:"setAllToDirty",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.forEach(function(e){return e.setDirty(!0,t)})}},{key:"updateDirtinessForRenderer",value:function(t){for(var e=!1,n=0;n<this._stack.length;n++){var r=this._stack[n];r&&(r.isDirtyForRenderer(t)&&(e=!0),e&&r.setDirtyForRenderer(!0,t))}}},{key:"push",value:function(t){this._stack.push(t),t.on("update",this._onOperationUpdate)}},{key:"pop",value:function(){var t=this._stack.pop();t&&(t.off("update",this._onOperationUpdate),t.dispose())}},{key:"unshift",value:function(t){this._stack.unshift(t),t.on("update",this._onOperationUpdate)}},{key:"clone",value:function(){return new e(this._stack.slice(0))}},{key:"get",value:function(t){return this._stack[t]}},{key:"getByIdentifier",value:function(t){return h.Utils.Array.find(this._stack,function(e){return e&&e.constructor.identifier===t})}},{key:"moveToTop",value:function(t){var e=h.Utils.Array.findIndex(this._stack,function(e){return e&&e.constructor.identifier===t});if(!(e<0||e===this._stack.length-1)){var n=this.getByIdentifier(t);this._stack.splice(e,1),this._stack[this._stack.length]=n}}},{key:"set",value:function(t,e){this._stack[t]&&(this._stack[t].off("update",this._onOperationUpdate),this._stack[t].dispose()),this._stack[t]=e,e.on("update",this._onOperationUpdate)}},{key:"remove",value:function(t){var e=this._stack.indexOf(t);-1!==e&&(this._stack[e]&&(this._stack[e].off("update",this._onOperationUpdate),this._stack[e].dispose()),this._stack.splice(e,1))}},{key:"removeAt",value:function(t){this._stack[t]&&(this._stack[t].off("update",this._onOperationUpdate),this._stack[t].dispose()),delete this._stack[t]}},{key:"getStack",value:function(){return this._stack}},{key:"dispose",value:function(){this.forEach(function(t){t.dispose()})}}]),e}();e.a=v},function(t,e){t.exports={name:"photoeditorsdk",version:"4.15.1",description:"The most comprehensive photo editor SDK for HTML5",repository:"http://github.com/imgly/pesdk-html5",author:"PhotoEditorSDK (img.ly GmbH) <contact@img.ly>",license:"SEE LICENSE IN LICENSE.md",bin:{},scripts:{start:"npm run watch",release:"cross-env PESDK_CLEAN=true PESDK_ASSETS=true PESDK_RELEASE=true webpack --progress --colors && cross-env npm run prerender-desktop-css && rimraf build/examples/qa-* && rimraf build/examples/ci-* && rimraf build/**/dev.*","release:production":"cross-env ENV=production npm run release && rm -rf build/examples/shared","release:test":"cross-env ENV=test PESDK_CLEAN=true PESDK_ASSETS=true webpack && npm run prerender-desktop-css","release:development":"cross-env ENV=development PESDK_CLEAN=true PESDK_ASSETS=true npm run release",lint:"eslint --ext .jsx,.js src/js","lint:test":"eslint --ext .jsx,.js test","lint:sdk":"eslint --ext .jsx,.js src/js/sdk","lint:ui":"eslint --ext .jsx,.js src/js/ui","lint:ui:react-ui":"eslint --ext .jsx,.js src/js/ui/react-ui","lint:ui:desktop-ui":"eslint --ext .jsx,.js src/js/ui/desktop-ui",build:"cross-env PESDK_CLEAN=true PESDK_ASSETS=true webpack",rebuild:"cross-env PESDK_ASSETS=true webpack --progress --color",clean:"rimraf build/* doc/* dist/*",watch:"cross-env PESDK_CLEAN=true PESDK_ASSETS=true PESDK_SERVE=true ENV=development webpack --watch --progress --colors","watch:test":"cross-env PESDK_CLEAN=true PESDK_ASSETS=true ENV=test webpack --watch --progress --colors","watch:production":"cross-env PESDK_CLEAN=true PESDK_ASSETS=true PESDK_SERVE=true webpack --watch --progress --colors",test:"npm run test:sdk && npm run test:ui:react-ui && npm run test:desktop-ui && npm run server","test:sdk":"cross-env ENV=test node_modules/.bin/mocha --require test/sdk/support/modules --require test/sdk/support/helpers test/sdk","test:ui:react-ui":'cross-env ENV=test node --stack-size=65500 node_modules/.bin/mocha --require test/sdk/support/modules --require test/react-ui/support/helpers test/shared/run-server.js "test/react-ui/*.test.js" "test/react-ui/**/*.test.js"',"test:ui:desktop-ui":'cross-env ENV=test node --stack-size=65500  node_modules/.bin/mocha --require test/desktop-ui/support/helpers test/shared/run-server.js "test/desktop-ui/*.test.js" "test/desktop-ui/**/*.test.js"',"test:server":'cross-env ENV=test node --stack-size=65500 node_modules/.bin/mocha --require test/sdk/support/modules --require test/server/support/helpers test/shared/run-server.js "test/server/*.test.js" "test/server/**/*.test.js"',"test:comparison":'cross-env ENV=test node --stack-size=65500 node_modules/.bin/mocha --require test/sdk/support/modules --require test/comparison/support/helpers "test/comparison/*.test.js" "test/comparison/**/*.test.js"',"test:webgl":"cross-env RENDERER=webgl ENV=test node_modules/.bin/mocha --require test/sdk/support/modules --require test/sdk/support/helpers test/sdk",jsdoc:"rimraf doc/photoeditorsdk && jsdoc -c config/jsdoc/jsdoc.json -r","jsdoc:server":"rimraf doc/photoeditorsdk-server && jsdoc -c config/jsdoc/jsdoc.server.json -r","render-filter-previews":"node scripts/run render-filter-previews","prerender-desktop-css":"node scripts/run render-desktop-ui-css",dist:"npm run dist:sdk && npm run dist:server","dist:sdk":"rimraf dist/photoeditorsdk && cp -r build/photoeditorsdk/ dist/photoeditorsdk && find dist/photoeditorsdk -d 2 -name '*.min.*'  | sed 'p;s/.min././' | xargs -n2 cp && npm run jsdoc","dist:server":"rimraf dist/photoeditorsdk-server && cp -r build/photoeditorsdk-server/ dist/photoeditorsdk-server && find dist/photoeditorsdk-server -d 2 -name '*.Server.min.*'  | sed 'p;s/.min././' | xargs -n2 cp  && npm run jsdoc:server"},devDependencies:{adonis:"git://github.com/imgly/adonis.git#v1.0.1",ajv:"^5.5.1","babel-core":"^6.26.3","babel-eslint":"^8.2.1","babel-loader":"^7.1.2","babel-minify-webpack-plugin":"^0.2.0","babel-plugin-external-helpers":"^6.22.0","babel-plugin-transform-adonis-hash":"^0.4.0","babel-plugin-transform-class-properties":"^6.19.0","babel-plugin-transform-es2015-classes":"^6.6.4","babel-plugin-transform-object-rest-spread":"^6.26.0","babel-plugin-transform-proto-to-assign":"^6.26.0","babel-plugin-transform-runtime":"^6.6.0","babel-preset-env":"^1.7.0","babel-preset-es2015":"^6.6.0","babel-preset-minify":"^0.2.0","babel-preset-react":"^6.5.0","babel-preset-stage-3":"^6.24.1","babel-register":"^6.26.0","babel-runtime":"^6.26.0",chai:"^3.4.0","chai-as-promised":"^5.1.0",chalk:"^2.4.1",chromedriver:"^2.37.0","circular-json-es6":"^2.0.2",classnames:"^2.1.3","clean-webpack-plugin":"^0.1.16","compass-mixins":"^0.12.8","copy-webpack-plugin":"^4.5.2","cross-env":"^5.1.1","css-loader":"^0.28.7",del:"^2.0.0",djv:"^1.2.0",eslint:"^4.16.0","eslint-config-standard":"^11.0.0","eslint-plugin-import":"^2.14.0","eslint-plugin-mocha":"^5.0.0","eslint-plugin-node":"^6.0.1","eslint-plugin-promise":"^3.7.0","eslint-plugin-react":"^7.11.1","eslint-plugin-standard":"^3.0.1",express:"^4.16.2","extract-text-webpack-plugin":"^3.0.2","html-webpack-plugin":"^3.2.0",husky:"^1.2.0",inquirer:"^0.11.4","inquirer-path":"^1.0.0-beta5","isomorphic-fetch":"^2.2.1","jaguarjs-jsdoc":"git://github.com/imgly/jaguarjs-jsdoc.git#master",jsdoc:"^3.5.5","json-loader":"^0.5.7","lint-staged":"^8.1.0",lodash:"^4.17.11",minimist:"^1.2.0",mkdirp:"^0.5.1",mocha:"^3.5.3",nightwatch:"git://github.com/imgly/nightwatch.git#feature/file-upload-and-multiple-selectors","node-sass":"^4.9.3","node-static":"^0.7.10","optimize-css-assets-webpack-plugin":"^3.2.0","performance-now":"^0.2.0",pixelmatch:"^4.0.2",pngjs:"^3.3.2","preprocess-loader":"^0.3.0","pretty-error":"^2.0.0",prompt:"^1.0.0","prop-types":"^15.6.0","raw-loader":"^0.5.1",react:"^16.4.1","react-dom":"^16.4.1",rembrandt:"^0.1.3",rimraf:"^2.6.2","sass-loader":"^6.0.6","selenium-server-standalone-jar":"3.4.0",should:"^4.3.0",sinon:"^1.17.3","sinon-chai":"^2.14.0",standard:"^9.0.2","standard-loader":"^6.0.1","stats.js":"^0.16.0","style-loader":"^0.13.1","term-img2":"^2.0.1","transform-loader":"^0.2.2","uglifyjs-webpack-plugin":"^1.2.5","vinyl-source-stream":"0.1.1",webpack:"^3.12.0","webpack-notifier":"^1.2.1"},standard:{globals:["describe","context","before","beforeEach","after","afterEach","it","expect"],parser:"babel-eslint"},dependencies:{canvas:"^2.1.0",gl:"^4.1.1",opn:"^5.3.0",request:"^2.88.0"},"lint-staged":{"*.js":["eslint --fix","git add"],"*.jsx":["eslint --fix","git add"]},husky:{hooks:{"pre-commit":"lint-staged","pre-push":"true"}}}},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(1),c=n.n(l),h=n(4),f=(n.n(h),function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}());var p=h.Math.ColorMatrix;function d(t,e,n,r,i){return(t-e)*(i-r)/(n-e)+r}var v=function(t){return(Math.max(t.r,t.g,t.b)+Math.min(t.r,t.g,t.b))/2},y=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||c()(e)).call(this));return t._fragmentSource=n(263),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=u()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(a.a?a()(t,e):t.__proto__=e)}(e,h["Engine"].Filter),f(e,[{key:"_applyCanvas",value:function(t,e,n){arguments.length>3&&void 0!==arguments[3]&&arguments[3];for(var r=e.getCanvas(),i=e.getContext(),o=n.getContext(),a=i.getImageData(0,0,r.width,r.height),s=this._options,u=s.colorMatrix,l=s.gamma,c=s.shadows,f=s.highlights,p=s.whites,y=s.blacks,_=1!==l,g=0!==c||0!==f,m=new h.Color(0,0,0,0),b=0;b<r.width*r.height;b++){var w=4*b;if(m.r=a.data[w]/255,m.g=a.data[w+1]/255,m.b=a.data[w+2]/255,_&&(m.r=Math.pow(m.r,1/Math.max(l,1e-7)),m.g=Math.pow(m.g,1/Math.max(l,1e-7)),m.b=Math.pow(m.b,1/Math.max(l,1e-7))),g){var x=v(m),T=c>=0?h.Utils.clamp(Math.pow(x,1/(c+1))+-.76*Math.pow(x,2/(c+1))-x,0,Math.max(c,1)):-h.Utils.clamp(Math.pow(x,1/(1-c))+-.76*Math.pow(x,2/(1-c))-x,0,Math.max(-c,1)),k=T*x*x,C=T-k,R=x+k+(f<0?h.Utils.clamp(1-Math.pow(1-x,1/(1-f))- -.8*Math.pow(1-x,2/(1-f))-x,-1,0):-h.Utils.clamp(1-Math.pow(1-x,1/(1+f))- -.8*Math.pow(1-x,2/(1+f))-x,-1,0));m.r=h.Utils.clamp(R*((m.r+C)/Math.max(x,1e-7)),0,1),m.g=h.Utils.clamp(R*((m.g+C)/Math.max(x,1e-7)),0,1),m.b=h.Utils.clamp(R*((m.b+C)/Math.max(x,1e-7)),0,1)}(m=u.apply(m).clamp(0,1)).r=d(m.r,0,1,y/2,1+p/2),m.g=d(m.g,0,1,y/2,1+p/2),m.b=d(m.b,0,1,y/2,1+p/2),a.data[w]=255*m.r,a.data[w+1]=255*m.g,a.data[w+2]=255*m.b}o.putImageData(a,0,0)}}]),e}();y.prototype.availableOptions={gamma:{type:h.OptionType.NUMBER,default:1,uniformType:h.UniformType.FLOAT},shadows:{type:h.OptionType.NUMBER,default:0,uniformType:h.UniformType.FLOAT},highlights:{type:h.OptionType.NUMBER,default:1,uniformType:h.UniformType.FLOAT},whites:{type:h.OptionType.NUMBER,default:0,uniformType:h.UniformType.FLOAT},blacks:{type:h.OptionType.NUMBER,default:0,uniformType:h.UniformType.FLOAT},colorMatrix:{type:h.OptionType.COLOR_MATRIX,default:new p,uniformType:h.UniformType.MAT4},colorOffset:{type:h.OptionType.ARRAY,default:[],uniformType:h.UniformType.FLOAT4}},e.a=y},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(1),c=n.n(l),h=n(4),f=(n.n(h),n(7)),p=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var d=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||c()(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=u()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(a.a?a()(t,e):t.__proto__=e)}(e,f["a"]),p(e,[{key:"render",value:function(t,e,n){return h.Promise.resolve(n)}},{key:"hasChanges",value:function(){return!1}}]),e}();d.isIdentity=!0,d.identifier="identity",e.a=d},function(t,e,n){"use strict";var r=n(5),i=n.n(r),o=n(0),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),h=n(1),f=n.n(h),p=n(4),d=(n.n(p),n(11)),v=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),a()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function y(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function g(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=c()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(u.a?u()(t,e):t.__proto__=e)}var m=function(t){function e(){var t;y(this,e);for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];var a=_(this,(t=e.__proto__||f()(e)).call.apply(t,[this].concat(i)));return a._fragmentSource=n(291),a}return g(e,p["Engine"].Filter),v(e,[{key:"_applyCanvas",value:function(t,e,n){arguments.length>3&&void 0!==arguments[3]&&arguments[3];for(var r=e.getCanvas(),i=e.getContext(),o=n.getContext(),a=i.getImageData(0,0,r.width,r.height),s=this._options.lookupTableData,u=0;u<r.width*r.height;u++){var l=4*u,c=a.data[l];a.data[l]=s[4*c];var h=a.data[l+1];a.data[l+1]=s[1+4*h];var f=a.data[l+2];a.data[l+2]=s[2+4*f]}o.putImageData(a,0,0)}}]),e}();m.prototype.availableOptions={lookupTable:{type:p.OptionType.NUMBER,default:1,uniformType:p.UniformType.INT},lookupTableData:{type:p.OptionType.ARRAY,default:[]}};var b=function(t){function e(){var t;y(this,e);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=_(this,(t=e.__proto__||f()(e)).call.apply(t,[this].concat(r)));return o._filter=new m({lookupTable:o._options.textureGLUnit}),o._textures={},o._renderers={},o}return g(e,d["a"]),v(e,[{key:"update",value:function(t){var e=t.getRenderer();e.isOfType(p.RendererType.WEBGL)?this._updateWebGLTexture(t):e.isOfType(p.RendererType.CANVAS)&&this._filter.setLookupTableData(this._options.data)}},{key:"_updateWebGLTexture",value:function(t){if(void 0===this._options.data)throw new Error("LookupTable: No data specified.");var e=new Uint8Array(this._options.data),n=t.getRenderer(),r=n.id;this._renderers[r]=n,this._textures[r]||(this._textures[r]=new p.Engine.BaseTexture);var i=this._textures[r],o=new p.Engine.PixelArrayImage(256,1,e);i.setSource(o),i.setGLUnit(this._options.textureGLUnit),n.isOfType(p.RendererType.WEBGL)&&n.updateTexture(i)}},{key:"dispose",value:function(){for(var t in function t(e,n,r){null===e&&(e=Function.prototype);var o=i()(e,n);if(void 0===o){var a=f()(e);return null===a?void 0:t(a,n,r)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(r):void 0}(e.prototype.__proto__||f()(e.prototype),"dispose",this).call(this),this._textures)this._textures[t].dispose(),delete this._textures[t];delete this._options.data}}]),e}();e.a=b},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=n(5),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),h=n(1),f=n.n(h),p=n(4),d=(n.n(p),n(353)),v=n(57),y=n(148),_=n(355),g=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),m=function t(e,n,r){null===e&&(e=Function.prototype);var i=a()(e,n);if(void 0===i){var o=f()(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0};var b=p.Math.Vector2,w=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(t=e.__proto__||f()(e)).call.apply(t,[this].concat(r)));return o._persistedPaths=[],o._outputCanvasDirty=!0,o._outputCanvas=p.Utils.createCanvas(),o._outputContext=o._outputCanvas.getContext("2d"),o._persistCanvas=p.Utils.createCanvas(),o._persistContext=o._persistCanvas.getContext("2d"),o._nextCanvas=p.Utils.createCanvas(),o._texture=p.Engine.Texture.fromCanvas(o._outputCanvas),o._sprite.setTexture(o._texture),o._onPathUpdate=o._onPathUpdate.bind(o),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=c()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(u.a?u()(t,e):t.__proto__=e)}(e,v["a"]),g(e,[{key:"applyFlip",value:function(t){this._options.paths.forEach(function(e){e.forEachControlPoint(function(e){var n=e.getPosition().clone();switch(t){case"horizontal":n.x=1-n.x;break;case"vertical":n.y=1-n.y}e.setPosition(n)}),e.setDirty(!0)}),this._reset()}},{key:"applyRotation",value:function(t){this._options.paths.forEach(function(e){e.forEachControlPoint(function(e){var n=e.getPosition().clone();90===t?(n.flip(),n.x=1-n.x):-90===t&&(n.flip(),n.y=1-n.y),e.setPosition(n)}),e.setDirty(!0)}),this._reset()}},{key:"applyTransform",value:function(t){var e=null;this._options.paths.forEach(function(n){n.forEachControlPoint(function(e){e.setPosition(t.applyToRelativePoint(e.getPosition()))});var r=n.getBrush();r!==e&&(r.setSize(t.applyToRelativeSize(r.getSize())),e=r),n.setDirty(!0)}),this._reset()}},{key:"clearCanvas",value:function(){if(this._outputCanvas){this._outputCanvasDirty=!0;var t=this._outputCanvas,e=t.width,n=t.height;this._outputContext.clearRect(0,0,e,n)}}},{key:"clearPersistCanvas",value:function(){if(this._persistCanvas){var t=this._persistCanvas,e=t.width,n=t.height;this._persistContext.clearRect(0,0,e,n)}}},{key:"serializeOptions",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=m(e.prototype.__proto__||f()(e.prototype),"serializeOptions",this).call(this,t,n);return t||(r.type="brush"),r}},{key:"serializeOption",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"paths"===t?this._options.paths.map(function(t){return t.serializeOptions(void 0,n)}):m(e.prototype.__proto__||f()(e.prototype),"serializeOption",this).call(this,t,n)}},{key:"createPath",value:function(t){var e=new d.a(this._operation,{brush:t},this._nextCanvas);return e.on("update",this._onPathUpdate),this._options.paths.push(e),this.setDirty(!0),e}},{key:"_onPathUpdate",value:function(){this._operation.setDirty(!0),this.setDirty(!0)}},{key:"_onPathPersist",value:function(t){t.renderToCanvas(this._persistCanvas),this._nextCanvas=t.getCanvas(),this._nextCanvas.getContext("2d").clearRect(0,0,this._nextCanvas.width,this._nextCanvas.height),this._persistedPaths.push(t)}},{key:"_getTexture",value:function(){return this._texture}},{key:"setDirtyForRenderer",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];m(e.prototype.__proto__||f()(e.prototype),"setDirtyForRenderer",this).call(this,t,n,r),t&&r&&(this._persistedPaths=[],this._options.paths.forEach(function(t){t.setDirty(!0)}))}},{key:"setDirty",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(var n in this._dirtiness)this.setDirtyForRenderer(t,this._renderers[n],e)}},{key:"render",value:function(t){var e=this,n=this._operation.getSDK().getRenderer();this.isDirtyForRenderer(n)&&(p.Utils.ensureCanvasDimensions(this._outputCanvas,t),p.Utils.ensureCanvasDimensions(this._persistCanvas,t),this._options.paths.forEach(function(n){n.render(t),n.getClosed()&&-1===e._persistedPaths.indexOf(n)&&e._onPathPersist(n)}),this.clearCanvas(),this._outputContext.drawImage(this._persistCanvas,0,0),this._options.paths.forEach(function(t){t.getClosed()||t.renderToCanvas(e._outputCanvas)}),this.setDirtyForRenderer(!1,n))}},{key:"update",value:function(t,n){n&&(p.Utils.ensureCanvasDimensions(this._outputCanvas,n),p.Utils.ensureCanvasDimensions(this._persistCanvas,n),this._texture.getBaseTexture().update()),this.render(n);var r=t.getRenderer();r.isOfType(p.RendererType.WEBGL)&&r.updateTexture(this._texture.getBaseTexture()),m(e.prototype.__proto__||f()(e.prototype),"update",this).call(this,t,n)}},{key:"_reset",value:function(){this._persistedPaths=[],this._operation&&this._operation.setDirty(!0),this.setDirty(!0),this.clearCanvas(),this.clearPersistCanvas()}},{key:"getCanvas",value:function(){return this._outputCanvas}},{key:"dispose",value:function(){m(e.prototype.__proto__||f()(e.prototype),"dispose",this).call(this),this._texture&&this._texture.getBaseTexture().dispose()}}]),e}();w.prototype.availableOptions={id:{type:p.OptionType.STRING,default:function(){return p.Utils.getUUID()}},position:{type:p.OptionType.VECTOR2,default:new b(0,0)},scale:{type:p.OptionType.VECTOR2,default:new b(1,1)},anchor:{type:p.OptionType.VECTOR2,default:new b(0,0)},pivot:{type:p.OptionType.VECTOR2,default:new b(0,0)},rotation:{type:p.OptionType.NUMBER,default:0},paths:{type:p.OptionType.ARRAY,default:[],setter:function(t){var e=this;return t=t.map(function(t){if(t instanceof d.a)return t;var n=t.brush,r=t.closed,i=new d.a(e._operation,{brush:n,closed:r},e._nextCanvas);return t.controlPoints.forEach(function(t){i.addControlPoint(t)}),i}),this._reset(),t}}},w.type="brush",w.Brush=y.a,w.Path=d.a,w.Brushes={RadialBrush:_.a},e.a=w},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(1),c=n.n(l),h=n(4),f=(n.n(h),function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}());var p=h.Math.Vector2,d=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(t=e.__proto__||c()(e)).call.apply(t,[this].concat(r)));return o._lastOptions={},o._lastInputDimensions=new p(0,0),o._brush=null,o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=u()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(a.a?a()(t,e):t.__proto__=e)}(e,h["Configurable"]),f(e,[{key:"getBrushImage",value:function(t){if(this._brush&&this.optionsEqual(this._lastOptions)&&t.equals(this._lastInputDimensions))return this._brush;var e=this._options,n=e.image,r=e.size;n.width=n.height=Math.ceil(r*t.min());var i=h.Utils.createCanvas();i.width=n.width,i.height=n.height;var o=i.getContext("2d");o.drawImage(n,0,0,i.width,i.height);var a=this._tintImageData(o.getImageData(0,0,i.width,i.height),i.width,i.height);return o.putImageData(a,0,0),this._lastOptions=this.serializeOptions(["size","color"]),this._brush=i,this._lastInputDimensions=t.clone(),i}},{key:"_tintImageData",value:function(t){for(var e=this._options.color,n=0;n<t.data.length;n+=4)t.data[n]+=(255*e.r-t.data[n])*e.a,t.data[n+1]+=(255*e.g-t.data[n+1])*e.a,t.data[n+2]+=(255*e.b-t.data[n+2])*e.a;return t}},{key:"clone",value:function(){return new(0,this.constructor)(this._options)}}]),e}();e.a=d,d.prototype.availableOptions={identifier:{type:h.OptionType.STRING},image:{type:h.OptionType.IMAGE},size:{type:h.OptionType.NUMBER,default:.05},color:{type:h.OptionType.COLOR,default:h.Color.RED}}},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=n(4),a=(n.n(o),n(150)),s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var u=o.Math.Vector2,l=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._text=e,this._operation=n,this._textOptions={},this.rotation=0,this._createCanvas(),this._createTexture()}return s(t,[{key:"_createCanvas",value:function(){this._canvas=o.Utils.createCanvas(),this._context=this._canvas.getContext("2d"),this._textSplitter=new a.a(this._context),this._finalCanvas=o.Utils.createCanvas(),this._finalContext=this._finalCanvas.getContext("2d")}},{key:"_createTexture",value:function(){this._texture=o.Engine.Texture.fromCanvas(this._canvas),this._finalTexture=o.Engine.Texture.fromCanvas(this._finalCanvas)}},{key:"_applyTextOptions",value:function(t,e){e.font=this._text.getFontStyle()+" "+this._text.getFontWeight()+" "+t.fontSize+'px "'+this._text.getFontFamily()+'"',e.textBaseline="top",e.textAlign=this._text.getAlignment(),e.fillStyle=this._text.getColor().toRGBA(),e.strokeStyle=this._text.getOutlineColor().toRGBA();var n=this._text.getOutlineWidth();n>0&&(e.lineWidth=n)}},{key:"_buildOutputLines",value:function(t){return this._textSplitter.setText(this._text.getText()),this._textSplitter.setMaxWidth(t),this._textSplitter.getLines()}},{key:"_renderTextLine",value:function(t,e){var n=this._text.getAlignment(),r=new u(0,e);switch(n){case"center":r.x=this._canvas.width/2;break;case"right":r.x=this._canvas.width}this._context.fillText(t,r.x,r.y),this._text.getOutlineWidth()>0&&(this._context.miterLimit=2,this._context.strokeText(t,r.x,r.y))}},{key:"update",value:function(t,e){var n=this.calculateFontStyles(t,e);if(n){var r=this._calculateText(t,n,e),i=r.dimensions,o=r.lines;this._renderText(t,i,o,n,e),this._updateFinalTexture()}}},{key:"_updateFinalTexture",value:function(){var t=this._canvas,e=t.width,n=t.height,r=this.rotation,i=Math.cos(r),o=Math.sin(r),a=new u(Math.abs(e*i)+Math.abs(n*o),Math.abs(e*o)+Math.abs(n*i));this._finalCanvas.width=a.x,this._finalCanvas.height=a.y,this._finalContext.save(),this._finalContext.translate(this._finalCanvas.width/2,this._finalCanvas.height/2),this._finalContext.rotate(r),this._finalContext.drawImage(this._canvas,-e/2,-n/2),this._finalContext.restore()}},{key:"_renderText",value:function(t,e,n,r,i){this._canvas.width=e.x,this._canvas.height=e.y,this._text.getMaxHeight()&&(this._canvas.height=Math.min(this._text.getMaxHeight()*i.y,this._canvas.height)),this._context=this._canvas.getContext("2d"),this._context.fillStyle=this._text.getBackgroundColor().toRGBA(),this._context.fillRect(0,0,e.x,e.y),this._applyTextOptions(r,this._context);for(var o=0;o<n.length;o++){var a=n[o];this._renderTextLine(a,r.topPadding+r.lineHeight*o)}}},{key:"calculateFontStyles",value:function(t,e){var n=this._text.getFontFamily(),r=this._text.getFontSize()*e.y,i=this._text.getAbsoluteTextHeight(e),o=i*this._text.getLineHeight(),a={fontFamily:n,fontSize:r,lineHeight:o,topPadding:i*(this._text.getLineHeight()-1)/2};return this._textOptions.fontFamily===n&&this._textOptions.fontSize===r&&this._textOptions.lineHeight===o||(this._textOptions=a),a}},{key:"_calculateText",value:function(t,e,n){var r=this._text.getMaxWidth()*n.x;this._applyTextOptions(e,this._context);var i=new u,o=this._text.getText().split("\n");if(void 0!==r)i.x=r,o=this._buildOutputLines(r);else for(var a=0;a<o.length;a++){var s=o[a];i.x=Math.max(i.x,this._context.measureText(s).width)}var l=e.lineHeight;return i.y=o.length*l,{dimensions:i,lines:o}}},{key:"getTexture",value:function(){return this._texture}},{key:"getFinalTexture",value:function(){return this._finalTexture}},{key:"getDimensions",value:function(t,e){var n=this.calculateFontStyles(t,e);return this._calculateText(t,n,e).dimensions}},{key:"dispose",value:function(){this._measurementElement&&document.body.removeChild(this._measurementElement),this._texture&&(this._texture.getBaseTexture().dispose(),this._texture=null),this._finalTexture&&(this._finalTexture.getBaseTexture().dispose(),this._finalTexture=null)}}]),t}();e.a=l},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._context=e,this._lastFontStyle={}}return o(t,[{key:"getLines",value:function(){for(var t=this,e=[],n=[],r=this._lines.length,i=0;i<r;i++){for(var o=this._lines[i],a=this._buildWords(o),s=a.length,u=0;u<s;u++){var l=a[u],c=n.concat(l).join("").replace(/\s+$/i,"");if(this._getWidth(c)>this._maxWidth){n.length>0&&(e.push(n.join("")),n=[l]);var h=l.replace(/\s+$/i,"");if(this._getWidth(h)>this._maxWidth){var f=this._splitWord(l);e=e.concat(f.lines),f.rest&&(n=[f.rest])}}else n.push(l)}e.push(n.join("")),n=[]}return e.map(function(e){return t._trimLine(e,t._context.textAlign)})}},{key:"_trimLine",value:function(t,e){return t}},{key:"_buildWords",value:function(t){for(var e=[],n="",r=t.length,i=0;i<r;i++){var o=t[i];n+=o," "!==o&&"-"!==o&&i!==r-1||(e.push(n),n="")}return e}},{key:"_splitWord",value:function(t){for(var e={lines:[],rest:null},n=t.length,r=[],i=0;i<n;i++){var o=t[i];this._getWidth(r.concat(o).join(""))>this._maxWidth?(r.length>0&&e.lines.push(r.join("")),r=[o]):r.push(o),i===n-1&&r.length>0&&(e.rest=r.join(""))}return e}},{key:"_fontStyleChanged",value:function(){return this._context.font!==this._lastFontStyle&&(this._lastFontStyle=this._context.font,!0)}},{key:"_getWidth",value:function(t){return this._context.measureText(t).width}},{key:"setText",value:function(t){this._text=t,this._lines=t.split("\n")}},{key:"setMaxWidth",value:function(t){this._maxWidth=t}}]),t}();e.a=a},function(t,e,n){"use strict";n.d(e,"a",function(){return T});var r=n(6),i=n.n(r),o=n(0),a=n.n(o),s=n(5),u=n.n(s),l=n(2),c=n.n(l),h=n(3),f=n.n(h),p=n(1),d=n.n(p),v=n(4),y=(n.n(v),n(58)),_=n(19),g=n(104),m=n(34),b=n(106),w=i.a||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},x=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),a()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var T=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||d()(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=f()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(c.a?c()(t,e):t.__proto__=e)}(e,y["a"]),x(e,[{key:"_fontForRow",value:function(t,e){var n=this.getFontIdentifiers();return n[t%n.length]}},{key:"_minimumNumberOfLines",value:function(t){return Math.max(Math.floor(.7*function t(e,n,r){null===e&&(e=Function.prototype);var i=u()(e,n);if(void 0===i){var o=d()(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0}(e.prototype.__proto__||d()(e.prototype),"_minimumNumberOfLines",this).call(this,t)),1)}},{key:"_maximumNumberOfLines",value:function(t){return Math.max(Math.floor(t.countNumberOfCharacters()/5),1)}},{key:"_randomLayoutRow",value:function(t,n,r,i){return this._createSingleRow(e.RowType.Single,t,r,i)}},{key:"_createSingleRow",value:function(t,n,r,i){var o=i.getFontIdentifier(),a="imgly_font_amberlight"===o||"imgly_font_handycheera_regular"===o?(new m.a).set(n.getLowerCase()):n;switch(t){case e.RowType.Single:return new _.a({words:a,width:r,attributes:i});case e.RowType.SingleImage:return new b.a({words:a,width:r,attributes:i});default:return v.Log.warn("TextDesignCelebrate#_createSingleRow: Invalid row type '"+t+"'"),null}}}]),e}();T.defaultFontIdentifiers=["imgly_font_handycheera_regular","imgly_font_rasa_regular"],T.defaultBanderoles=[g.a.Celebrate1,g.a.Celebrate2],T.identifier="imgly_text_design_celebrate",T.RowType={Single:"SINGLE",SingleImage:"SINGLE_IMAGE"},T.prototype.availableOptions=w({},y.a.prototype.availableOptions,{relativeLineSpacing:{type:v.OptionType.NUMBER,default:.01875},fontIdentifiers:{type:v.OptionType.ARRAY,default:T.defaultFontIdentifiers},banderoles:{type:v.OptionType.ARRAY,default:T.defaultBanderoles}})},function(t,e,n){"use strict";n.d(e,"a",function(){return T});var r=n(6),i=n.n(r),o=n(0),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),h=n(1),f=n.n(h),p=n(4),d=(n.n(p),n(60)),v=n(34),y=n(77),_=n(42),g=n(61),m=n(35),b=n(23),w=i.a||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},x=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),a()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var T=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(t=e.__proto__||f()(e)).call.apply(t,[this].concat(r)));return o.setSize(new b.a(o.getWidth(),o.getHeight())),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=c()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(u.a?u()(t,e):t.__proto__=e)}(e,d["a"]),x(e,[{key:"_getImageFrame",value:function(){var t=this._getTextFrame().clone(),e=this.getImage();if(this.getDrawingModeAspectFit()&&e){var n=Math.min(t.width/e.width,t.height/e.height),r=e.width*n,i=e.height*n;t.x+=(t.width-r)/2,t.y+=(t.height-i)/2,t.width=r,t.height=i}return t}},{key:"_calculateLayoutElements",value:function(){return[new _.a({text:"",frame:this._getImageFrame(),font:new g.a})]}},{key:"render",value:function(t){var e=this.getImage(),n=this._getImageFrame(),r=this.getAttributes().getTextColor();Object(m.a)(t,e,n,r)}}]),e}();T.RowImages={decorative1:"text-design/images/imgly_text_design_asset_decorative_01.png",decorative2:"text-design/images/imgly_text_design_asset_decorative_02.png",decorative3:"text-design/images/imgly_text_design_asset_decorative_05.png",decorative4:"text-design/images/imgly_text_design_asset_decorative_06.png",celebrate1:"text-design/images/imgly_text_design_asset_celebrate_03.png",celebrate2:"text-design/images/imgly_text_design_asset_celebrate_04.png",celebrate3:"text-design/images/imgly_text_design_asset_celebrate_05.png"},T.prototype.availableOptions=w({},d.a.prototype.availableOptions,{words:{type:p.OptionType.OBJECT,default:new v.a},height:{type:p.OptionType.NUMBER,default:0},image:{type:p.OptionType.IMAGE,default:null},imagePath:{type:p.OptionType.STRING,default:T.RowImages.decorative1},drawingModeAspectFit:{type:p.OptionType.BOOLEAN,default:!1},attributes:{type:p.OptionType.CONFIGURABLE,default:new y.a}})},function(t,e,n){"use strict";n.d(e,"a",function(){return C});var r=n(6),i=n.n(r),o=n(0),a=n.n(o),s=n(5),u=n.n(s),l=n(2),c=n.n(l),h=n(3),f=n.n(h),p=n(1),d=n.n(p),v=n(4),y=(n.n(v),n(59)),_=n(19),g=n(17),m=n(373),b=n(34),w=n(16),x=i.a||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},T=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),a()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),k=function t(e,n,r){null===e&&(e=Function.prototype);var i=u()(e,n);if(void 0===i){var o=d()(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0};var C=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(t=e.__proto__||d()(e)).call.apply(t,[this].concat(r)));return o._relativeInsets=new g.a(.1,.1,.1,.1),o._alreadyContainsARowWithScriptFont=!1,o._backgroundsRandomizer=new w.a(0),o._seedPool.push(o._backgroundsRandomizer),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=f()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(c.a?c()(t,e):t.__proto__=e)}(e,y["a"]),T(e,[{key:"getImagePaths",value:function(){return v.Utils.Array.flatten(m.a.Backgrounds.map(function(t){return t.getImagePaths()}))}},{key:"_getBackground",value:function(){return this._backgroundsRandomizer.pickNext(m.a.Backgrounds)}},{key:"generateLayoutData",value:function(t,n){return this._alreadyContainsARowWithScriptFont=!1,this._background=this._getBackground(),k(e.prototype.__proto__||d()(e.prototype),"generateLayoutData",this).call(this,t,n)}},{key:"_modifiedText",value:function(t){return k(e.prototype.__proto__||d()(e.prototype),"_modifiedText",this).call(this,t).toUpperCase()}},{key:"_fontForRow",value:function(t,n){var r=k(e.prototype.__proto__||d()(e.prototype),"_fontForRow",this).call(this,t,n);return"imgly_font_petit_formal_script"===r&&(this._alreadyContainsARowWithScriptFont&&(r="imgly_font_bungee_inline"),this._alreadyContainsARowWithScriptFont=!0),r}},{key:"_randomLayoutRow",value:function(t,e,n,r){var i="imgly_font_petit_formal_script"===r.getFontIdentifier();return new _.a({words:i?(new b.a).set(t.getLowerCase()):t,width:n,attributes:r})}}]),e}();C.identifier="imgly_text_design_equal_width",C.defaultFontIdentifiers=["imgly_font_ultra","imgly_font_bungee_inline","imgly_font_petit_formal_script"],C.prototype.availableOptions=x({},y.a.prototype.availableOptions,{fontIdentifiers:{type:v.OptionType.ARRAY,default:C.defaultFontIdentifiers},relativeLineSpacing:{type:v.OptionType.NUMBER,default:.025}})},function(t,e,n){"use strict";n.d(e,"a",function(){return p});var r=n(0),i=n.n(r),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(1),c=n.n(l),h=n(4),f=(n.n(h),function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}());var p=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||c()(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=u()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(a.a?a()(t,e):t.__proto__=e)}(e,h["Configurable"]),f(e,[{key:"render",value:function(t,e,n,r,i){h.Log.warn("TextDesignBackground#render: Abstract class")}}]),e}();p.prototype.availableOptions={}},function(t,e,n){"use strict";n.d(e,"a",function(){return B});var r=n(6),i=n.n(r),o=n(71),a=n.n(o),s=n(72),u=n.n(s),l=n(15),c=n.n(l),h=n(0),f=n.n(h),p=n(5),d=n.n(p),v=n(2),y=n.n(v),_=n(3),g=n.n(_),m=n(1),b=n.n(m),w=n(4),x=(n.n(w),n(59)),T=n(19),k=n(20),C=n(17),R=n(34),E=n(152),O=n(106),A=n(16),S=i.a||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},F=function(){return function(t,e){if(Array.isArray(t))return t;if(a()(Object(t)))return function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=u()(t);!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),I=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),f()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),D=function t(e,n,r){null===e&&(e=Function.prototype);var i=d()(e,n);if(void 0===i){var o=b()(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0};function M(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return c()(t)}var B=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(t=e.__proto__||b()(e)).call.apply(t,[this].concat(r)));return o._relativeInsets=new C.a(0,.3,0,.3),o._INVALID_FONTS_IF_LESS_THEN_5_CHARS=["imgly_font_montserrat_light"],o._INVALID_FONTS_IF_LESS_THEN_4_CHARS=["imgly_font_montserrat_light","imgly_font_wolesbro"],o._lineCount=0,o._decorativeRowCreated=!1,o._useImageRowRandomizer=new A.a(0),o._rowTypeRandomizer=new A.a(0),o._lineDecorativeTypeRandomizer=new A.a(0),o._seedPool.push(o._useImageRowRandomizer),o._seedPool.push(o._rowTypeRandomizer),o._seedPool.push(o._lineDecorativeTypeRandomizer),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=g()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(y.a?y()(t,e):t.__proto__=e)}(e,x["a"]),I(e,[{key:"getImagePaths",value:function(){return[].concat(M(e.DecoratorImages),M(e.RowImages))}},{key:"_fontForRow",value:function(t,e){var n=this,r=e.countNumberOfCharacters(),i=this.getFontIdentifiers();return r<4?i=i.filter(function(t){return n._INVALID_FONTS_IF_LESS_THEN_4_CHARS.indexOf(t)<0}):r<5&&(i=i.filter(function(t){return n._INVALID_FONTS_IF_LESS_THEN_5_CHARS.indexOf(t)<0})),i[t%i.length]}},{key:"_modifiedText",value:function(t){return D(e.prototype.__proto__||b()(e.prototype),"_modifiedText",this).call(this,t).toUpperCase()}},{key:"_modifiedLines",value:function(t){return this._lineCount=t.length,t}},{key:"generateLayoutData",value:function(t,n){return this._decorativeRowCreated=!1,D(e.prototype.__proto__||b()(e.prototype),"generateLayoutData",this).call(this,t,n)}},{key:"_randomLayoutRow",value:function(t,e,n,r){var i=t;switch(r.getFontIdentifier()){case"imgly_font_wolesbro":i=(new R.a).set(t.getLowerCase());break;case"imgly_font_permanent_marker":i=(new R.a).set(t.getUpperCase())}var o=this.getDecorativeRowsInTheMiddleOnly()&&(0===e||e===this._lineCount-1);if(this._useImageRowRandomizer.nextBool()||this._decorativeRowCreated||o)return new T.a({words:i,width:n,attributes:r});this._decorativeRowCreated=!0;var a=this._randomDecoratorImages(),s=F(a,2),u=s[0],l=s[1];return new O.a({words:t,width:n,attributes:r,leftImage:u,rightImage:l})}},{key:"_layoutRows",value:function(t,n){var r=D(e.prototype.__proto__||b()(e.prototype),"_layoutRows",this).call(this,t,n);if(!this.getDecorationsVisible())return r;var i=new E.a({width:n,height:25,image:k.a.getImage(this._rowTypeRandomizer.pickNext(e.RowImages))}).layout(),o=new E.a({width:n,height:25,image:k.a.getImage(this._rowTypeRandomizer.pickNext(e.RowImages))}).layout();return[i].concat(M(r),[o])}},{key:"_randomDecoratorImages",value:function(){return this._lineDecorativeTypeRandomizer.nextInRange(0,1)?e.DecoratorImages.slice(0,2).map(function(t){return k.a.getImage(t)}):e.DecoratorImages.slice(2).map(function(t){return k.a.getImage(t)})}}]),e}();B.defaultFontIdentifiers=["imgly_font_permanent_marker","imgly_font_wolesbro","imgly_font_wolesbro","imgly_font_montserrat_light"],B.identifier="imgly_text_design_sunshine",B.RowImages=[E.a.RowImages.decorative1,E.a.RowImages.decorative2,E.a.RowImages.decorative3,E.a.RowImages.decorative4],B.DecoratorImages=["text-design/images/imgly_text_design_asset_decorative_03.png","text-design/images/imgly_text_design_asset_decorative_04.png","text-design/images/imgly_text_design_asset_decorative_07.png","text-design/images/imgly_text_design_asset_decorative_08.png"],B.prototype.availableOptions=S({},x.a.prototype.availableOptions,{fontIdentifiers:{type:w.OptionType.ARRAY,default:B.defaultFontIdentifiers},relativeLineSpacing:{type:w.OptionType.NUMBER,default:.025/3*4},decorationsVisible:{type:w.OptionType.BOOLEAN,default:!0},decorativeRowsInTheMiddleOnly:{type:w.OptionType.BOOLEAN,default:!1}})},function(t,e,n){t.exports=n(4),n(261)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(158),i=n(257),o=(n.n(i),n(138)),a=n(139),s=n(69),u=n(51),l=n(140),c=n(52),h=n(22),f=n(258),p=n(142),d=n(101),v=n(75),y=n(33),_=n(55),g=n(26),m=n(259),b=n(32),w=n(50);r.a.version=n(143).version,r.a.Math=o,r.a.Operations=a,r.a.Engine=s.a,r.a.Color=u.a,r.a.Operation=l.a,r.a.EventEmitter=c.a,r.a.Utils=h.a,r.a.Env=f.a,r.a.OperationsStack=p.a,r.a.EXIF=d.a,r.a.Image=v.a,r.a.Promise=y.a,r.a.Configurable=_.a,r.a.Log=g.a,r.a.Loaders=m,r.a.RenderType=b.RenderType,r.a.ImageFormat=b.ImageFormat,r.a.OptionType=b.OptionType,r.a.RendererType=b.RendererType,r.a.UniformType=b.UniformType,r.a.Base64=w.a,r.a.UI={},e.default=r.a},function(t,e,n){"use strict";var r=n(36),i=n.n(r),o=n(40),a=n.n(o),s=n(0),u=n.n(s),l=n(2),c=n.n(l),h=n(3),f=n.n(h),p=n(30),d=n.n(p),v=n(1),y=n.n(v),_=n(41),g=n(139),m=n(142),b=n(253),w=n(101),x=(n(75),n(256)),T=n(141),k="function"==typeof a.a&&"symbol"==typeof i.a?function(t){return typeof t}:function(t){return t&&"function"==typeof a.a&&t.constructor===a.a&&t!==a.a.prototype?"symbol":typeof t},C=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),u()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function R(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var E=function(t){return F.byteArrayToString(L.decode(t))},O=_.Rectangle,A=_.Constants,S=_.Engine,F=_.Utils,I=_.EventEmitter,D=_.Events,M=_.Vector2,B=_.Log,L=_.Base64,P=_.Color,N=A.RenderType,U=A.ImageFormat,z=A.RendererType,G=function(t){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=R(this,(e.__proto__||y()(e)).call(this));i._onOperationUpdate=i._onOperationUpdate.bind(i),i._onContextRestored=i._onContextRestored.bind(i);var o=n(143).version;if(i.version=o,i[E("VG04Z1lHRndhVXRsZVdBZ2IzQjBhVzl1SUdkcGRtVnU=")]=!0,i._preferredRenderer=t,i._options=F.defaults(r,{extensions:{},renderMode:"dynamic",versionCheck:!0,displayWelcomeMessage:!0,image:null,canvas:null,transparent:!1,clearColor:P.TRANSPARENT,textureQuality:1,zoom:1,spriteScale:1,rotation:0,smoothDownscaling:!1,smoothUpscaling:!1,crossOrigin:"anonymous",logLevel:"warn",pixelRatio:"undefined"!=typeof window&&window.devicePixelRatio||1}),i._options.smoothUpscaling&&(S.BaseTexture.DefaultMagFilter=S.BaseTexture.LinearFilter),i._options.extensions=F.defaults(i._options.extensions,{operations:[],controls:[],languages:[]}),B.setLevel(i._options.logLevel),i[E("Wm5KbFpVeHBZMlZ1YzAxdlpHVT0=")]=!1,i[E("X29wdGlvbnM=")][E("bGljZW5zZQ==")]){if(!i._v())return R(i);var a=_[E("TGljZW5zZUNoZWNrZXI=")];i._l=new a(i[E("X29wdGlvbnM=")][E("bGljZW5zZQ==")]),i._cv(!0).then(function(){i._ct()}).catch(function(t){B.error(E("TGljZW5zaW5n"),t.message)})}else i[E("Wm5KbFpVeHBZMlZ1YzAxdlpHVT0=")]=!0,i._l=new(_[E("RnJlZUxpY2Vuc2VDaGVja2Vy")]);i._defaultRenderMode=i._options.renderMode,i._renderMode=i._options.renderMode,i._textureQuality=i._options.textureQuality,i._offset=new M,i._zoom=i._options.zoom,i._spriteScale=i._options.spriteScale,i._rotation=i._options.rotation,i._operations={},i._operationsStack=null,i.setOperationsStack(new m.a),i._container=new S.Container,i._sprite=new S.Sprite,i._container.addChild(i._sprite),i._inputTexture=i._options.inputTexture,i._currentInputTexture=null,i._currentTexture=null,i._resizedTexture=null,i._resizedContainer=new S.Container,i._resizedSprite=new S.Sprite,i._resizedContainer.addChild(i._resizedSprite),i._texturesToDispose=[],i.setSmoothDownscaling(i._options.smoothDownscaling),i._checkForUpdates(),i._registerOperations(),i._initRenderer();var s=i._renderer.constructor.type;return i._options.displayWelcomeMessage&&B.log("Version:",i.version+" ("+s+") - https://www.photoeditorsdk.com"),i[E("Wm5KbFpVeHBZMlZ1YzAxdlpHVT0=")]&&B.log(E("VGhlIFBob3RvRWRpdG9yIFNESyBpcyBhIGNvbW1lcmNpYWwgcHJvZHVjdC4gQmVmb3JlIGJlaW5nIGFibGUgdG8gdXNlIGl0IHdpdGhvdXQgbGltaXRhdGlvbnMsIHlvdSBuZWVkIHRvIHVubG9jayB0aGUgU0RLIHdpdGggYSBsaWNlbnNlIGZpbGUuIFlvdSBjYW4gb2J0YWluIGEgdGltZS1saW1pdGVkIGV2YWx1YXRpb24gbGljZW5zZSBieSBzdGFydGluZyBhIHRyaWFsIGF0IGh0dHBzOi8vd3d3LnBob3RvZWRpdG9yc2RrLmNvbS91c2Vycy9uZXcgb3IgeW91IGNhbiBwdXJjaGFzZSBhIGxpY2Vuc2UgYnkgcmVxdWVzdGluZyBhIHF1b3RlIGF0IGh0dHBzOi8vd3d3LnBob3RvZWRpdG9yc2RrLmNvbS9wcmljaW5nLgoKQmVjYXVzZSB5b3UgZGlkIG5vdCBzcGVjaWZ5IGEgbGljZW5zZSBmaWxlIHlldCwgdGhlIFNESyB3aWxsIG5vdyBkaXNwbGF5IGEgd2F0ZXJtYXJrIGltYWdlIG9uIHRvcCBvZiBhbnkgcGhvdG9zIHlvdSBkaXNwbGF5IG9yIGV4cG9ydCB3aXRoIGl0LiBGb3IgaW5zdHJ1Y3Rpb25zIGZvciBob3cgdG8gdW5sb2NrIHRoZSBTREssIHBsZWFzZSB2aXNpdCBodHRwczovL2RvY3MucGhvdG9lZGl0b3JzZGsuY29tL2d1aWRlcy9odG1sNS92NC9pbnRyb2R1Y3Rpb24vZ2V0dGluZ19zdGFydGVkLg==")),i._options.image&&i.setImage(i._options.image,i._options.exif),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=f()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(c.a?c()(t,e):t.__proto__=e)}(e,I),C(e,[{key:"_v",value:function(){return!!this[E("X29wdGlvbnM=")][E("bGljZW5zZQ==")]||(B.error(E("TGljZW5zaW5n"),E("Tm8gYGxpY2Vuc2VgIG9wdGlvbiBnaXZlbi4=")),B.error(E("TGljZW5zaW5n"),E("SW4gY2FzZSB5b3UgZG9uJ3QgaGF2ZSBhIGxpY2Vuc2UgeWV0LCBwbGVhc2UgY29udGFjdCBvdXIgc2FsZXMgc3RhZmYgYXQgc2FsZXNAcGhvdG9lZGl0b3JzZGsuY29tIHRvIG9idGFpbiBhIGxpY2Vuc2Ugb3IgbG9nIGluIHRvIHlvdXIgY3VzdG9tZXIgZGFzaGJvYXJkLg==")),!1)}},{key:"_ct",value:function(){this._l.exp()&&(this._l.isExp()?B.error(E("TGljZW5zaW5n"),E("WW91ciB0cmlhbCBsaWNlbnNlIGhhcyBleHBpcmVkLiBQbGVhc2UgY29udGFjdCB1cyBhdCBzYWxlc0BwaG90b2VkaXRvcnNkay5jb20gdG8gb2J0YWluIGEgbGljZW5zZS4=")):B.warn(E("TGljZW5zaW5n"),E("WW91ciB0cmlhbCBsaWNlbnNlIHdpbGwgZXhwaXJlIGluICVkIGRheXMu").replace("%d",this._l.dl())))}},{key:"_cv",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._l.c().catch(function(n){t[E("VG04Z1lHRndhVXRsZVdBZ2IzQjBhVzl1SUdkcGRtVnU=")]=!1;var r=E("SW52YWxpZCBsaWNlbnNlLg==");throw e&&(r="ELICEXP"===n.code?E("WW91ciB0cmlhbCBsaWNlbnNlIGhhcyBleHBpcmVkLiBQbGVhc2UgY29udGFjdCB1cyBhdCBzYWxlc0BwaG90b2VkaXRvcnNkay5jb20gdG8gb2J0YWluIGEgbGljZW5zZS4="):"ELICINVHOST"===n.code?E("VGhpcyBsaWNlbnNlIGlzIG5vdCB2YWxpZCBmb3IgdGhlIGhvc3RuYW1lIA==")+window.location.hostname+".":"ELICINVPLAT"===n.code?E("VGhpcyBsaWNlbnNlIGlzIG5vdCB2YWxpZCBmb3IgdGhlIGN1cnJlbnQgcGxhdGZvcm0u"):"ELICINVFMT"===n.code?E("SW52YWxpZCBsaWNlbnNlIGZvcm1hdC4gUGxlYXNlIG1ha2Ugc3VyZSB5b3UncmUgcGFzc2luZyB5b3VyIGxpY2Vuc2UgYXMgYSBzdHJpbmcsIG5vdCBhcyBgJGZvcm1hdGAu").replace("$format",k(t._options.license)):"ELICINV"===n.code?E("SW52YWxpZCBsaWNlbnNlISBQbGVhc2UgY29udGFjdCBvdXIgc2FsZXMgc3RhZmYgYXQgc3VwcG9ydEBwaG90b2VkaXRvcnNkay5jb20gdG8gb2J0YWluIGEgbGljZW5zZSBvciBsb2cgaW4gdG8geW91ciBjdXN0b21lciBkYXNoYm9hcmQu"):E("SW4gY2FzZSB5b3UgZG9uJ3QgaGF2ZSBhIGxpY2Vuc2UgeWV0LCBwbGVhc2UgY29udGFjdCBvdXIgc2FsZXMgc3RhZmYgYXQgc2FsZXNAcGhvdG9lZGl0b3JzZGsuY29tIHRvIG9idGFpbiBhIGxpY2Vuc2Ugb3IgbG9nIGluIHRvIHlvdXIgY3VzdG9tZXIgZGFzaGJvYXJkLg==")),n.message=r,new Error(n)})}},{key:"_t",value:function(){this._l.t()}},{key:"_onOperationUpdate",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];this.emit.apply(this,[D.OPERATION_UPDATED].concat(e))}},{key:"_onContextRestored",value:function(){B.warn(this.constructor.name,"Trying to re-render after WebGL context has been restored."),this.setAllOperationsToDirty(),this._operationsStack.forEach(function(t){t.disposeRenderTextures()}),this.render()}},{key:"export",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N.DATAURL,e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:U.PNG,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.8;return this._cv(!0).then(function(){return e.hasChanges()&&e._t(),e._operationsStack.forEach(function(t){t.onBeforeExport()}),new x.a(e,{renderType:t,imageFormat:n,quality:r}).export().then(function(t){return e._operationsStack.forEach(function(t){t.onAfterExport()}),d.a.resolve(t)})})}},{key:"render",value:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!this._inputTexture)throw new Error("You need to set an image before calling PhotoEditorSDK#render.");var n=this._renderer.getContext();n.startFrame&&n.startFrame();var r=void 0;B.canLog("info")&&(r=new T.a("⚡⚡⚡","Frame rendering")),B.info("⚡⚡⚡","Rendering starts");var i=this._operationsStack;return i.updateDirtinessForRenderer(this._renderer),this._prepareTexture().then(function(e){"export"===t._renderMode&&(e=t._inputTexture),t._currentTexture=e,t._sprite.setTexture(e),t._container.updateTransform()}).then(function(){return i.validateSettings()}).then(function(){return t[E("Wm5KbFpVeHBZMlZ1YzAxdlpHVT0=")]&&(i.getByIdentifier("license-watermark")?i.moveToTop("license-watermark"):t.createOperation("license-watermark")),i.render(t,t._currentTexture)}).then(function(n){switch(t._currentTexture=n,t._sprite.setTexture(t._currentTexture),t._renderMode){case"dynamic":var r=t._renderer.getDimensions().clone().divide(2).add(t._offset);t._container.setScale(t._zoom/t.getTextureScale(),t._zoom/t.getTextureScale()),t._container.setPosition(r),t._sprite.setAnchor(.5,.5),t._sprite.setScale(t._spriteScale,t._spriteScale),t._sprite.setRotation(t._rotation);break;case"export":t._container.setScale(1,1),t._container.setPosition(0,0),t._sprite.setAnchor(0,0),t._sprite.setPosition(0,0),t._sprite.setScale(t._spriteScale,t._spriteScale),t._sprite.setRotation(0)}return e&&t._renderer.render(t._container),n}).then(function(e){return r&&r.stop(),n.endFrame&&n.endFrame(),t._disposeTextures(),e})}},{key:"getTextureScale",value:function(){return Math.min(1,this._textureQuality*this._options.pixelRatio)}},{key:"_prepareTexture",value:function(){var t=this;return new d.a(function(e,n){var r=t.getTextureScale();if(1===t._textureQuality)return e(t._inputTexture);var i=t.getInputDimensions().multiply(r).floor(),o=void 0;t._resizedTexture?t._resizedTexture.getDimensions().equals(i)||(t._resizedTexture.resizeTo(i),o=!0):(t._resizedTexture=new S.RenderTexture(t._renderer,i.x,i.y),o=!0),o&&(t._resizedSprite.setScale(r,r),t._resizedSprite.setTexture(t._inputTexture),t._resizedTexture.render(t._resizedContainer)),e(t._resizedTexture)})}},{key:"_registerOperations",value:function(){for(var t in this._operations={},g){var e=g[t];this._operations[e.identifier]=e}this._operations=F.extend(this._operations,this._options.extensions.operations)}},{key:"registerOperations",value:function(t){var e=this;t.forEach(function(t){e._operations[t.identifier]=t})}},{key:"setAllOperationsToDirty",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._operationsStack.setAllToDirty(t)}},{key:"createOperation",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=this._operations[t];if(!r)throw new Error("No operation with identifier `"+t+"` found.");var i=new r(this,e);return n&&this.addOperation(i),i}},{key:"addOperation",value:function(t){this._operationsStack.push(t)}},{key:"removeOperation",value:function(t){this._operationsStack.remove(t)}},{key:"getInputDimensions",value:function(){var t=this._inputTexture.getFrame();return new M(t.width,t.height)}},{key:"getFinalDimensions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.getInputDimensions();return this._operationsStack.forEach(function(t){t.getEnabled()&&(e=t.getNewDimensions(e))}),t&&e.multiply(this._spriteScale),e.floor()}},{key:"getOutputDimensions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.getFinalDimensions(t).clone().multiply(this._zoom).floor()}},{key:"getOutputTextureDimensions",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t=this.getTextureScale(),e=this.getInputDimensions().multiply(t).floor();return this._operationsStack.forEach(function(t){e=t.getNewDimensions(e)}),e}},{key:"getCrossOrigin",value:function(){return F.getCrossOrigin(this._options.crossOrigin||"Anonymous")}},{key:"_checkForUpdates",value:function(){this._l.isENT()||(this._versionChecker=new b.a(this.version))}},{key:"_initRenderer",value:function(){var t={canvas:this._options.canvas,pixelRatio:this._options.pixelRatio,debug:this._options.debug,transparent:this._options.transparent,clearColor:this._options.clearColor},e=void 0,n=void 0;if("dynamic"===this._renderMode&&this._options.canvas){var r=this._options.canvas;e=r.width,n=r.height}else if(this._inputTexture){var i=this.getFinalDimensions();e=i.x,n=i.y}else e=1,n=1;switch(this._preferredRenderer){case z.WEBGL:this._renderer=S.autoDetectRenderer(e,n,t),this._renderer.on("context-restored",this._onContextRestored);break;case z.CANVAS:this._renderer=new S.CanvasRenderer(e,n,t),this._renderer.on("context-restored",this._onContextRestored);break;default:B.warn("PhotoEditorSDK","PhotoEditorSDK Error: Renderer `"+this._preferredRenderer+"` not supported. Falling back to automatically detected renderer."),this._renderer=S.autoDetectRenderer(e,n,t)}}},{key:"resizeTo",value:function(t){this._renderer.resizeTo(t,!0)}},{key:"reset",value:function(){this._operationsStack.clear()}},{key:"parseExif",value:function(t){if(t){var e=t.src,n=null;if(n=e,w.a.isJPEG(e)){var r=null;try{r=w.a.fromBase64String(n)}catch(t){}if(!r)return;return r}}}},{key:"_handleExifOrientation",value:function(){var t=this._exif.getTags();if(t&&t.Orientation){var e=1!==t.Orientation&&2!==t.Orientation,n=-1!==[2,4,5,7].indexOf(t.Orientation);(e||n)&&(this._exifOperation||(this._exifOperation=this.createOperation("exif-orientation")),this._exifOperation.setTags(t),this._exif.setOrientation(1))}}},{key:"hasImage",value:function(){return null!==this._image&&void 0!==this._image}},{key:"getImage",value:function(){return this._image}},{key:"disposeTexture",value:function(t){this._texturesToDispose.push(t)}},{key:"_disposeTextures",value:function(){for(var t=0;t<this._texturesToDispose.length;t++)this._texturesToDispose[t].dispose();this._texturesToDispose=[]}},{key:"setImage",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._exifOperation&&(this.removeOperation(this._exifOperation),this._exifOperation=null),this._options.image=t,this._image=t,this._exif=e||this.parseExif(t),this._exif&&this._handleExifOrientation();var r=new S.BaseTexture(this._image),i=new O(0,0,this._image.naturalWidth||this._image.width,this._image.naturalHeight||this._image.height);n&&(i.width=n.x,i.height=n.y),this._resizedTexture&&this._resizedTexture.dispose(),this._resizedTexture=null,this._inputTexture&&this.disposeTexture(this._inputTexture.getBaseTexture()),this._inputTexture=new S.Texture(r,i),this._currentTexture=this._inputTexture,this._sprite.clearTexture(!1),this._sprite.setTexture(this._inputTexture),this.setAllOperationsToDirty(!0)}},{key:"setInputTexture",value:function(t){this._inputTexture=t}},{key:"getCanvas",value:function(){return this._renderer.getCanvas()}},{key:"setCanvas",value:function(t){this._renderer.setCanvas(t)}},{key:"getSprite",value:function(){return this._sprite}},{key:"getContainer",value:function(){return this._container}},{key:"getOperationsStack",value:function(){return this._operationsStack}},{key:"setOperationsStack",value:function(t){this._operationsStack&&this._operationsStack.off(D.OPERATION_UPDATED,this._onOperationUpdate),this._operationsStack=t,this._operationsStack.on(D.OPERATION_UPDATED,this._onOperationUpdate)}},{key:"getOperations",value:function(){return this._operations}},{key:"getRenderer",value:function(){return this._renderer}},{key:"getOffset",value:function(){return this._offset}},{key:"setOffset",value:function(t,e){t instanceof M?this._offset.copy(t):this._offset.set(t,e)}},{key:"getRenderMode",value:function(){return this._renderMode}},{key:"setRenderMode",value:function(t){this._renderMode=t}},{key:"getZoom",value:function(){return this._zoom}},{key:"setZoom",value:function(t){this._zoom=t,this._container.setScale(this._zoom,this._zoom),this._container.updateTransform()}},{key:"getTextureQuality",value:function(){return"export"===this._renderMode?1:this._textureQuality}},{key:"setTextureQuality",value:function(t){t!==this._textureQuality&&this.setAllOperationsToDirty(!0),this._textureQuality=Math.min(1,t),1===this._textureQuality&&this._resizedTexture&&(this._resizedTexture.dispose(),this._resizedTexture=null)}},{key:"getSpriteScale",value:function(){return this._spriteScale}},{key:"setSpriteScale",value:function(t){this._spriteScale=t,this._sprite.setScale(t,t),this._sprite.updateTransform()}},{key:"getPixelRatio",value:function(){return this._options.pixelRatio}},{key:"getExif",value:function(){return this._exif}},{key:"getOptions",value:function(){return this._options}},{key:"getInputTexture",value:function(){return this._inputTexture}},{key:"setSmoothDownscaling",value:function(t){this._options.smoothDownscaling=t,this._sprite.setSmoothDownscaling(t),this._resizedSprite.setSmoothDownscaling(t)}},{key:"setRotation",value:function(t){this._rotation=t}},{key:"getRotation",value:function(){return this._rotation}},{key:"hasChanges",value:function(){return this.getOperationsStack().hasChanges()}},{key:"dispose",value:function(){this._operationsStack.dispose(),this._renderer.dispose(),this._exif&&this._exif.dispose(),this._resizedTexture&&this._resizedTexture.dispose()}}]),e}();e.a=G},function(t,e,n){n(44),n(67),t.exports=n(87).f("iterator")},function(t,e,n){var r=n(78),i=n(79);t.exports=function(t){return function(e,n){var o,a,s=String(i(e)),u=r(n),l=s.length;return u<0||u>=l?t?"":void 0:(o=s.charCodeAt(u))<55296||o>56319||u+1===l||(a=s.charCodeAt(u+1))<56320||a>57343?t?s.charAt(u):o:t?s.slice(u,u+2):a-56320+(o-55296<<10)+65536}}},function(t,e,n){"use strict";var r=n(82),i=n(45),o=n(66),a={};n(27)(a,n(12)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=r(a,{next:i(1,n)}),o(t,e+" Iterator")}},function(t,e,n){var r=n(21),i=n(18),o=n(46);t.exports=n(25)?Object.defineProperties:function(t,e){i(t);for(var n,a=o(e),s=a.length,u=0;s>u;)r.f(t,n=a[u++],e[n]);return t}},function(t,e,n){var r=n(29),i=n(83),o=n(164);t.exports=function(t){return function(e,n,a){var s,u=r(e),l=i(u.length),c=o(a,l);if(t&&n!=n){for(;l>c;)if((s=u[c++])!=s)return!0}else for(;l>c;c++)if((t||c in u)&&u[c]===n)return t||c||0;return!t&&-1}}},function(t,e,n){var r=n(78),i=Math.max,o=Math.min;t.exports=function(t,e){return(t=r(t))<0?i(t+e,0):o(t,e)}},function(t,e,n){"use strict";var r=n(166),i=n(167),o=n(39),a=n(29);t.exports=n(110)(Array,"Array",function(t,e){this._t=a(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,i(1)):i(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(t,e){t.exports=function(){}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){n(169),n(118),n(174),n(175),t.exports=n(10).Symbol},function(t,e,n){"use strict";var r=n(14),i=n(28),o=n(25),a=n(13),s=n(112),u=n(170).KEY,l=n(38),c=n(85),h=n(66),f=n(65),p=n(12),d=n(87),v=n(88),y=n(171),_=n(172),g=n(18),m=n(24),b=n(29),w=n(81),x=n(45),T=n(82),k=n(173),C=n(90),R=n(21),E=n(46),O=C.f,A=R.f,S=k.f,F=r.Symbol,I=r.JSON,D=I&&I.stringify,M=p("_hidden"),B=p("toPrimitive"),L={}.propertyIsEnumerable,P=c("symbol-registry"),N=c("symbols"),U=c("op-symbols"),z=Object.prototype,G="function"==typeof F,j=r.QObject,V=!j||!j.prototype||!j.prototype.findChild,W=o&&l(function(){return 7!=T(A({},"a",{get:function(){return A(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=O(z,e);r&&delete z[e],A(t,e,n),r&&t!==z&&A(z,e,r)}:A,H=function(t){var e=N[t]=T(F.prototype);return e._k=t,e},Y=G&&"symbol"==typeof F.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof F},q=function(t,e,n){return t===z&&q(U,e,n),g(t),e=w(e,!0),g(n),i(N,e)?(n.enumerable?(i(t,M)&&t[M][e]&&(t[M][e]=!1),n=T(n,{enumerable:x(0,!1)})):(i(t,M)||A(t,M,x(1,{})),t[M][e]=!0),W(t,e,n)):A(t,e,n)},Q=function(t,e){g(t);for(var n,r=y(e=b(e)),i=0,o=r.length;o>i;)q(t,n=r[i++],e[n]);return t},X=function(t){var e=L.call(this,t=w(t,!0));return!(this===z&&i(N,t)&&!i(U,t))&&(!(e||!i(this,t)||!i(N,t)||i(this,M)&&this[M][t])||e)},Z=function(t,e){if(t=b(t),e=w(e,!0),t!==z||!i(N,e)||i(U,e)){var n=O(t,e);return!n||!i(N,e)||i(t,M)&&t[M][e]||(n.enumerable=!0),n}},J=function(t){for(var e,n=S(b(t)),r=[],o=0;n.length>o;)i(N,e=n[o++])||e==M||e==u||r.push(e);return r},K=function(t){for(var e,n=t===z,r=S(n?U:b(t)),o=[],a=0;r.length>a;)!i(N,e=r[a++])||n&&!i(z,e)||o.push(N[e]);return o};G||(s((F=function(){if(this instanceof F)throw TypeError("Symbol is not a constructor!");var t=f(arguments.length>0?arguments[0]:void 0),e=function(n){this===z&&e.call(U,n),i(this,M)&&i(this[M],t)&&(this[M][t]=!1),W(this,t,x(1,n))};return o&&V&&W(z,t,{configurable:!0,set:e}),H(t)}).prototype,"toString",function(){return this._k}),C.f=Z,R.f=q,n(117).f=k.f=J,n(68).f=X,n(89).f=K,o&&!n(63)&&s(z,"propertyIsEnumerable",X,!0),d.f=function(t){return H(p(t))}),a(a.G+a.W+a.F*!G,{Symbol:F});for(var $="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),tt=0;$.length>tt;)p($[tt++]);for(var et=E(p.store),nt=0;et.length>nt;)v(et[nt++]);a(a.S+a.F*!G,"Symbol",{for:function(t){return i(P,t+="")?P[t]:P[t]=F(t)},keyFor:function(t){if(!Y(t))throw TypeError(t+" is not a symbol!");for(var e in P)if(P[e]===t)return e},useSetter:function(){V=!0},useSimple:function(){V=!1}}),a(a.S+a.F*!G,"Object",{create:function(t,e){return void 0===e?T(t):Q(T(t),e)},defineProperty:q,defineProperties:Q,getOwnPropertyDescriptor:Z,getOwnPropertyNames:J,getOwnPropertySymbols:K}),I&&a(a.S+a.F*(!G||l(function(){var t=F();return"[null]"!=D([t])||"{}"!=D({a:t})||"{}"!=D(Object(t))})),"JSON",{stringify:function(t){for(var e,n,r=[t],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=e=r[1],(m(e)||void 0!==t)&&!Y(t))return _(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!Y(e))return e}),r[1]=e,D.apply(I,r)}}),F.prototype[B]||n(27)(F.prototype,B,F.prototype.valueOf),h(F,"Symbol"),h(Math,"Math",!0),h(r.JSON,"JSON",!0)},function(t,e,n){var r=n(65)("meta"),i=n(24),o=n(28),a=n(21).f,s=0,u=Object.isExtensible||function(){return!0},l=!n(38)(function(){return u(Object.preventExtensions({}))}),c=function(t){a(t,r,{value:{i:"O"+ ++s,w:{}}})},h=t.exports={KEY:r,NEED:!1,fastKey:function(t,e){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,r)){if(!u(t))return"F";if(!e)return"E";c(t)}return t[r].i},getWeak:function(t,e){if(!o(t,r)){if(!u(t))return!0;if(!e)return!1;c(t)}return t[r].w},onFreeze:function(t){return l&&h.NEED&&u(t)&&!o(t,r)&&c(t),t}}},function(t,e,n){var r=n(46),i=n(89),o=n(68);t.exports=function(t){var e=r(t),n=i.f;if(n)for(var a,s=n(t),u=o.f,l=0;s.length>l;)u.call(t,a=s[l++])&&e.push(a);return e}},function(t,e,n){var r=n(47);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,e,n){var r=n(29),i=n(117).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return a&&"[object Window]"==o.call(t)?function(t){try{return i(t)}catch(t){return a.slice()}}(t):i(r(t))}},function(t,e,n){n(88)("asyncIterator")},function(t,e,n){n(88)("observable")},function(t,e,n){n(177);var r=n(10).Object;t.exports=function(t,e,n){return r.defineProperty(t,e,n)}},function(t,e,n){var r=n(13);r(r.S+r.F*!n(25),"Object",{defineProperty:n(21).f})},function(t,e,n){n(179),t.exports=n(10).Object.setPrototypeOf},function(t,e,n){var r=n(13);r(r.S,"Object",{setPrototypeOf:n(180).set})},function(t,e,n){var r=n(24),i=n(18),o=function(t,e){if(i(t),!r(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,r){try{(r=n(37)(Function.call,n(90).f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,n){return o(t,n),e?t.__proto__=n:r(t,n),t}}({},!1):void 0),check:o}},function(t,e,n){n(182);var r=n(10).Object;t.exports=function(t,e){return r.create(t,e)}},function(t,e,n){var r=n(13);r(r.S,"Object",{create:n(82)})},function(t,e,n){n(118),n(44),n(67),n(184),n(191),n(192),t.exports=n(10).Promise},function(t,e,n){"use strict";var r,i,o,a,s=n(63),u=n(14),l=n(37),c=n(91),h=n(13),f=n(24),p=n(64),d=n(185),v=n(186),y=n(121),_=n(93).set,g=n(188)(),m=n(94),b=n(122),w=n(123),x=u.TypeError,T=u.process,k=u.Promise,C="process"==c(T),R=function(){},E=i=m.f,O=!!function(){try{var t=k.resolve(1),e=(t.constructor={})[n(12)("species")]=function(t){t(R,R)};return(C||"function"==typeof PromiseRejectionEvent)&&t.then(R)instanceof e}catch(t){}}(),A=function(t){var e;return!(!f(t)||"function"!=typeof(e=t.then))&&e},S=function(t,e){if(!t._n){t._n=!0;var n=t._c;g(function(){for(var r=t._v,i=1==t._s,o=0,a=function(e){var n,o,a=i?e.ok:e.fail,s=e.resolve,u=e.reject,l=e.domain;try{a?(i||(2==t._h&&D(t),t._h=1),!0===a?n=r:(l&&l.enter(),n=a(r),l&&l.exit()),n===e.promise?u(x("Promise-chain cycle")):(o=A(n))?o.call(n,s,u):s(n)):u(r)}catch(t){u(t)}};n.length>o;)a(n[o++]);t._c=[],t._n=!1,e&&!t._h&&F(t)})}},F=function(t){_.call(u,function(){var e,n,r,i=t._v,o=I(t);if(o&&(e=b(function(){C?T.emit("unhandledRejection",i,t):(n=u.onunhandledrejection)?n({promise:t,reason:i}):(r=u.console)&&r.error&&r.error("Unhandled promise rejection",i)}),t._h=C||I(t)?2:1),t._a=void 0,o&&e.e)throw e.v})},I=function(t){return 1!==t._h&&0===(t._a||t._c).length},D=function(t){_.call(u,function(){var e;C?T.emit("rejectionHandled",t):(e=u.onrejectionhandled)&&e({promise:t,reason:t._v})})},M=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),S(e,!0))},B=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw x("Promise can't be resolved itself");(e=A(t))?g(function(){var r={_w:n,_d:!1};try{e.call(t,l(B,r,1),l(M,r,1))}catch(t){M.call(r,t)}}):(n._v=t,n._s=1,S(n,!1))}catch(t){M.call({_w:n,_d:!1},t)}}};O||(k=function(t){d(this,k,"Promise","_h"),p(t),r.call(this);try{t(l(B,this,1),l(M,this,1))}catch(t){M.call(this,t)}},(r=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(189)(k.prototype,{then:function(t,e){var n=E(y(this,k));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=C?T.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&S(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),o=function(){var t=new r;this.promise=t,this.resolve=l(B,t,1),this.reject=l(M,t,1)},m.f=E=function(t){return t===k||t===a?new o(t):i(t)}),h(h.G+h.W+h.F*!O,{Promise:k}),n(66)(k,"Promise"),n(190)("Promise"),a=n(10).Promise,h(h.S+h.F*!O,"Promise",{reject:function(t){var e=E(this);return(0,e.reject)(t),e.promise}}),h(h.S+h.F*(s||!O),"Promise",{resolve:function(t){return w(s&&this===a?k:this,t)}}),h(h.S+h.F*!(O&&n(124)(function(t){k.all(t).catch(R)})),"Promise",{all:function(t){var e=this,n=E(e),r=n.resolve,i=n.reject,o=b(function(){var n=[],o=0,a=1;v(t,!1,function(t){var s=o++,u=!1;n.push(void 0),a++,e.resolve(t).then(function(t){u||(u=!0,n[s]=t,--a||r(n))},i)}),--a||r(n)});return o.e&&i(o.v),n.promise},race:function(t){var e=this,n=E(e),r=n.reject,i=b(function(){v(t,!1,function(t){e.resolve(t).then(n.resolve,r)})});return i.e&&r(i.v),n.promise}})},function(t,e){t.exports=function(t,e,n,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(n+": incorrect invocation!");return t}},function(t,e,n){var r=n(37),i=n(119),o=n(120),a=n(18),s=n(83),u=n(92),l={},c={};(e=t.exports=function(t,e,n,h,f){var p,d,v,y,_=f?function(){return t}:u(t),g=r(n,h,e?2:1),m=0;if("function"!=typeof _)throw TypeError(t+" is not iterable!");if(o(_)){for(p=s(t.length);p>m;m++)if((y=e?g(a(d=t[m])[0],d[1]):g(t[m]))===l||y===c)return y}else for(v=_.call(t);!(d=v.next()).done;)if((y=i(v,g,d.value,e))===l||y===c)return y}).BREAK=l,e.RETURN=c},function(t,e){t.exports=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},function(t,e,n){var r=n(14),i=n(93).set,o=r.MutationObserver||r.WebKitMutationObserver,a=r.process,s=r.Promise,u="process"==n(47)(a);t.exports=function(){var t,e,n,l=function(){var r,i;for(u&&(r=a.domain)&&r.exit();t;){i=t.fn,t=t.next;try{i()}catch(r){throw t?n():e=void 0,r}}e=void 0,r&&r.enter()};if(u)n=function(){a.nextTick(l)};else if(!o||r.navigator&&r.navigator.standalone)if(s&&s.resolve){var c=s.resolve();n=function(){c.then(l)}}else n=function(){i.call(r,l)};else{var h=!0,f=document.createTextNode("");new o(l).observe(f,{characterData:!0}),n=function(){f.data=h=!h}}return function(r){var i={fn:r,next:void 0};e&&(e.next=i),t||(t=i,n()),e=i}}},function(t,e,n){var r=n(27);t.exports=function(t,e,n){for(var i in e)n&&t[i]?t[i]=e[i]:r(t,i,e[i]);return t}},function(t,e,n){"use strict";var r=n(14),i=n(10),o=n(21),a=n(25),s=n(12)("species");t.exports=function(t){var e="function"==typeof i[t]?i[t]:r[t];a&&e&&!e[s]&&o.f(e,s,{configurable:!0,get:function(){return this}})}},function(t,e,n){"use strict";var r=n(13),i=n(10),o=n(14),a=n(121),s=n(123);r(r.P+r.R,"Promise",{finally:function(t){var e=a(this,i.Promise||o.Promise),n="function"==typeof t;return this.then(n?function(n){return s(e,t()).then(function(){return n})}:t,n?function(n){return s(e,t()).then(function(){throw n})}:t)}})},function(t,e,n){"use strict";var r=n(13),i=n(94),o=n(122);r(r.S,"Promise",{try:function(t){var e=i.f(this),n=o(t);return(n.e?e.reject:e.resolve)(n.v),e.promise}})},function(t,e,n){n(194),t.exports=n(10).Object.getPrototypeOf},function(t,e,n){var r=n(48),i=n(116);n(95)("getPrototypeOf",function(){return function(t){return i(r(t))}})},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(1),c=n.n(l),h=n(9),f=n(129),p=n(131),d=n(73),v=n(96),y=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var _=h.c.RendererType,g=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(t=e.__proto__||c()(e)).call.apply(t,[this].concat(r)));return o._type=_.CANVAS,o.setCanvas(o._options.canvas||o._createCanvas()),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=u()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(a.a?a()(t,e):t.__proto__=e)}(e,p["a"]),y(e,[{key:"_createCanvas",value:function(){return h.i.createCanvas()}},{key:"_createContext",value:function(){var t=this._canvas.getContext("2d");return this._options.debug&&(t=new f.a(t)),this.id=t.id=e.contextId++,this._context=t,t.renderer=this,this.emit("context",t),t}},{key:"_setupContext",value:function(){var t=this._context;"imageSmoothingEnabled"in t?t.imageSmoothingEnabled=!0:["moz","webkit","ms"].forEach(function(e){t[e]&&(t[e]=!0)}),this._defaultRenderTarget=new d.a(this._width,this._height,this._pixelRatio,this._canvas,this._context),this.setRenderTarget(this._defaultRenderTarget),this._filterManager=new v.a(this)}},{key:"render",value:function(t){var e=this._renderTarget.getContext(),n=t.getParent();t.setParent(this._fakeObject),t.updateTransform(),t.setParent(n),e.setTransform(1,0,0,1,0,0),e.globalAlpha=1;var r=this._canvas,i=r.width,o=r.height;e.clearRect(0,0,i,o),0!==this._clearColor.a&&(e.save(),e.fillStyle=this._clearColor.toRGBA(),e.fillRect(0,0,i,o),e.restore()),this.renderDisplayObject(t,this._renderTarget)}},{key:"renderDisplayObject",value:function(t,e){var n=this._renderTarget;this._filterManager.setFilterStack(e.getFilterStack()),this.setRenderTarget(e),t.renderCanvas(this),this.setRenderTarget(n)}},{key:"getCurrentRenderTarget",value:function(){return this._renderTarget}},{key:"setRenderTarget",value:function(t){this._renderTarget=t}},{key:"getContext",value:function(){return this._renderTarget.getContext()}},{key:"dispose",value:function(){this._filterManager.dispose()}}]),e}();g.contextId=0,g.type="Canvas2D",e.a=g},function(t,e,n){n(44),n(197),t.exports=n(10).Array.from},function(t,e,n){"use strict";var r=n(37),i=n(13),o=n(48),a=n(119),s=n(120),u=n(83),l=n(198),c=n(92);i(i.S+i.F*!n(124)(function(t){Array.from(t)}),"Array",{from:function(t){var e,n,i,h,f=o(t),p="function"==typeof this?this:Array,d=arguments.length,v=d>1?arguments[1]:void 0,y=void 0!==v,_=0,g=c(f);if(y&&(v=r(v,d>2?arguments[2]:void 0,2)),void 0==g||p==Array&&s(g))for(n=new p(e=u(f.length));e>_;_++)l(n,_,y?v(f[_],_):f[_]);else for(h=g.call(f),n=new p;!(i=h.next()).done;_++)l(n,_,y?a(h,v,[i.value,_],!0):i.value);return n.length=_,n}})},function(t,e,n){"use strict";var r=n(21),i=n(45);t.exports=function(t,e,n){e in t?r.f(t,e,i(0,n)):t[e]=n}},function(t,e,n){t.exports={default:n(200),__esModule:!0}},function(t,e,n){var r=n(10),i=r.JSON||(r.JSON={stringify:JSON.stringify});t.exports=function(t){return i.stringify.apply(i,arguments)}},function(t,e,n){n(202),t.exports=n(10).Object.assign},function(t,e,n){var r=n(13);r(r.S+r.F,"Object",{assign:n(203)})},function(t,e,n){"use strict";var r=n(46),i=n(89),o=n(68),a=n(48),s=n(114),u=Object.assign;t.exports=!u||n(38)(function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=u({},t)[n]||Object.keys(u({},e)).join("")!=r})?function(t,e){for(var n=a(t),u=arguments.length,l=1,c=i.f,h=o.f;u>l;)for(var f,p=s(arguments[l++]),d=c?r(p).concat(c(p)):r(p),v=d.length,y=0;v>y;)h.call(p,f=d[y++])&&(n[f]=p[f]);return n}:u},function(t,e,n){n(205),t.exports=n(10).Object.keys},function(t,e,n){var r=n(48),i=n(46);n(95)("keys",function(){return function(t){return i(r(t))}})},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return o(t,null,[{key:"head",value:function(t){return t[0]}},{key:"tail",value:function(t){return t.slice(1)}},{key:"last",value:function(t){return t[t.length-1]}},{key:"init",value:function(t){return t.slice(0,t.length-1)}},{key:"remove",value:function(t,e){return t.filter(function(t,n,r){return!e(t,n,r)})}},{key:"findIndex",value:function(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return n;return-1}},{key:"find",value:function(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return t[n]}},{key:"flatten",value:function(e){return e.reduce(function(e,n){return e.concat(Array.isArray(n)?t.flatten(n):n)},[])}},{key:"range",value:function(t,e){var n=[];if(e>t)for(var r=t;r<e;r++)n.push(r);return n}},{key:"repeat",value:function(t,e){for(var n=[],r=0;r<e;r++)n[r]=t;return n}},{key:"zip",value:function(t,e){for(var n=Math.min(t.length,e.length),r=[],i=0;i<n;i++)r[i]=[t[i],e[i]];return r}}]),t}();e.a=a},function(t,e,n){n(67),n(44),t.exports=n(208)},function(t,e,n){var r=n(91),i=n(12)("iterator"),o=n(39);t.exports=n(10).isIterable=function(t){var e=Object(t);return void 0!==e[i]||"@@iterator"in e||o.hasOwnProperty(r(e))}},function(t,e,n){n(67),n(44),t.exports=n(210)},function(t,e,n){var r=n(18),i=n(92);t.exports=n(10).getIterator=function(t){var e=i(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return r(e.call(t))}},function(t,e,n){var r;!function(i,o){"use strict";var a="model",s="name",u="type",l="vendor",c="version",h="mobile",f="tablet",p={extend:function(t,e){var n={};for(var r in t)e[r]&&e[r].length%2==0?n[r]=e[r].concat(t[r]):n[r]=t[r];return n},has:function(t,e){return"string"==typeof t&&-1!==e.toLowerCase().indexOf(t.toLowerCase())},lowerize:function(t){return t.toLowerCase()},major:function(t){return"string"==typeof t?t.replace(/[^\d\.]/g,"").split(".")[0]:void 0},trim:function(t){return t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},d={rgx:function(t,e){for(var n,r,i,o,a,s,u=0;u<e.length&&!a;){var l=e[u],c=e[u+1];for(n=r=0;n<l.length&&!a;)if(a=l[n++].exec(t))for(i=0;i<c.length;i++)s=a[++r],"object"==typeof(o=c[i])&&o.length>0?2==o.length?"function"==typeof o[1]?this[o[0]]=o[1].call(this,s):this[o[0]]=o[1]:3==o.length?"function"!=typeof o[1]||o[1].exec&&o[1].test?this[o[0]]=s?s.replace(o[1],o[2]):void 0:this[o[0]]=s?o[1].call(this,s,o[2]):void 0:4==o.length&&(this[o[0]]=s?o[3].call(this,s.replace(o[1],o[2])):void 0):this[o]=s||void 0;u+=2}},str:function(t,e){for(var n in e)if("object"==typeof e[n]&&e[n].length>0){for(var r=0;r<e[n].length;r++)if(p.has(e[n][r],t))return"?"===n?void 0:n}else if(p.has(e[n],t))return"?"===n?void 0:n;return t}},v={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},y={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[s,c],[/(opios)[\/\s]+([\w\.]+)/i],[[s,"Opera Mini"],c],[/\s(opr)\/([\w\.]+)/i],[[s,"Opera"],c],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser)\/([\w\.-]+)/i],[s,c],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[s,"IE"],c],[/(edge)\/((\d+)?[\w\.]+)/i],[s,c],[/(yabrowser)\/([\w\.]+)/i],[[s,"Yandex"],c],[/(puffin)\/([\w\.]+)/i],[[s,"Puffin"],c],[/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[[s,"UCBrowser"],c],[/(comodo_dragon)\/([\w\.]+)/i],[[s,/_/g," "],c],[/(micromessenger)\/([\w\.]+)/i],[[s,"WeChat"],c],[/(QQ)\/([\d\.]+)/i],[s,c],[/m?(qqbrowser)[\/\s]?([\w\.]+)/i],[s,c],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[c,[s,"MIUI Browser"]],[/;fbav\/([\w\.]+);/i],[c,[s,"Facebook"]],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[c,[s,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[s,/(.+)/,"$1 WebView"],c],[/((?:oculus|samsung)browser)\/([\w\.]+)/i],[[s,/(.+(?:g|us))(.+)/,"$1 $2"],c],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[c,[s,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[s,c],[/(dolfin)\/([\w\.]+)/i],[[s,"Dolphin"],c],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[s,"Chrome"],c],[/(coast)\/([\w\.]+)/i],[[s,"Opera Coast"],c],[/fxios\/([\w\.-]+)/i],[c,[s,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[c,[s,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[c,s],[/webkit.+?(gsa)\/([\w\.]+).+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[[s,"GSA"],c],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[s,[c,d.str,v.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[s,c],[/(navigator|netscape)\/([\w\.-]+)/i],[[s,"Netscape"],c],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w\.-]+)/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]+)*/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[s,c]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[["architecture","amd64"]],[/(ia32(?=;))/i],[["architecture",p.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[["architecture","ia32"]],[/windows\s(ce|mobile);\sppc;/i],[["architecture","arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[["architecture",/ower/,"",p.lowerize]],[/(sun4\w)[;\)]/i],[["architecture","sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[["architecture",p.lowerize]]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[a,l,[u,f]],[/applecoremedia\/[\w\.]+ \((ipad)/],[a,[l,"Apple"],[u,f]],[/(apple\s{0,1}tv)/i],[[a,"Apple TV"],[l,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[l,a,[u,f]],[/(kf[A-z]+)\sbuild\/[\w\.]+.*silk\//i],[a,[l,"Amazon"],[u,f]],[/(sd|kf)[0349hijorstuw]+\sbuild\/[\w\.]+.*silk\//i],[[a,d.str,v.device.amazon.model],[l,"Amazon"],[u,h]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[a,l,[u,h]],[/\((ip[honed|\s\w*]+);/i],[a,[l,"Apple"],[u,h]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[l,a,[u,h]],[/\(bb10;\s(\w+)/i],[a,[l,"BlackBerry"],[u,h]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone)/i],[a,[l,"Asus"],[u,f]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[l,"Sony"],[a,"Xperia Tablet"],[u,f]],[/android.+\s([c-g]\d{4}|so[-l]\w+)\sbuild\//i],[a,[l,"Sony"],[u,h]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[l,a,[u,"console"]],[/android.+;\s(shield)\sbuild/i],[a,[l,"Nvidia"],[u,"console"]],[/(playstation\s[34portablevi]+)/i],[a,[l,"Sony"],[u,"console"]],[/(sprint\s(\w+))/i],[[l,d.str,v.device.sprint.vendor],[a,d.str,v.device.sprint.model],[u,h]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[l,a,[u,f]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i],[l,[a,/_/g," "],[u,h]],[/(nexus\s9)/i],[a,[l,"HTC"],[u,f]],[/d\/huawei([\w\s-]+)[;\)]/i,/(nexus\s6p)/i],[a,[l,"Huawei"],[u,h]],[/(microsoft);\s(lumia[\s\w]+)/i],[l,a,[u,h]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[a,[l,"Microsoft"],[u,"console"]],[/(kin\.[onetw]{3})/i],[[a,/\./g," "],[l,"Microsoft"],[u,h]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w+)*/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[a,[l,"Motorola"],[u,h]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[a,[l,"Motorola"],[u,f]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[l,p.trim],[a,p.trim],[u,"smarttv"]],[/hbbtv.+maple;(\d+)/i],[[a,/^/,"SmartTV"],[l,"Samsung"],[u,"smarttv"]],[/\(dtv[\);].+(aquos)/i],[a,[l,"Sharp"],[u,"smarttv"]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[l,"Samsung"],a,[u,f]],[/smart-tv.+(samsung)/i],[l,[u,"smarttv"],a],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[[l,"Samsung"],a,[u,h]],[/sie-(\w+)*/i],[a,[l,"Siemens"],[u,h]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[[l,"Nokia"],a,[u,h]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[a,[l,"Acer"],[u,f]],[/android.+([vl]k\-?\d{3})\s+build/i],[a,[l,"LG"],[u,f]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[l,"LG"],a,[u,f]],[/(lg) netcast\.tv/i],[l,a,[u,"smarttv"]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w+)*/i,/android.+lg(\-?[\d\w]+)\s+build/i],[a,[l,"LG"],[u,h]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[a,[l,"Lenovo"],[u,f]],[/linux;.+((jolla));/i],[l,a,[u,h]],[/((pebble))app\/[\d\.]+\s/i],[l,a,[u,"wearable"]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[l,a,[u,h]],[/crkey/i],[[a,"Chromecast"],[l,"Google"]],[/android.+;\s(glass)\s\d/i],[a,[l,"Google"],[u,"wearable"]],[/android.+;\s(pixel c)\s/i],[a,[l,"Google"],[u,f]],[/android.+;\s(pixel xl|pixel)\s/i],[a,[l,"Google"],[u,h]],[/android.+(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus|note lte)?[\s_]*(?:\d\w)?)\s+build/i,/android.+(redmi[\s\-_]*(?:note)?(?:[\s_]*[\w\s]+)?)\s+build/i],[[a,/_/g," "],[l,"Xiaomi"],[u,h]],[/android.+(mi[\s\-_]*(?:pad)?(?:[\s_]*[\w\s]+)?)\s+build/i],[[a,/_/g," "],[l,"Xiaomi"],[u,f]],[/android.+;\s(m[1-5]\snote)\sbuild/i],[a,[l,"Meizu"],[u,f]],[/android.+a000(1)\s+build/i],[a,[l,"OnePlus"],[u,h]],[/android.+[;\/]\s*(RCT[\d\w]+)\s+build/i],[a,[l,"RCA"],[u,f]],[/android.+[;\/]\s*(Venue[\d\s]*)\s+build/i],[a,[l,"Dell"],[u,f]],[/android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i],[a,[l,"Verizon"],[u,f]],[/android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(V?.*)\s+build/i],[[l,"Barnes & Noble"],a,[u,f]],[/android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i],[a,[l,"NuVision"],[u,f]],[/android.+[;\/]\s*(zte)?.+(k\d{2})\s+build/i],[[l,"ZTE"],a,[u,f]],[/android.+[;\/]\s*(gen\d{3})\s+build.*49h/i],[a,[l,"Swiss"],[u,h]],[/android.+[;\/]\s*(zur\d{3})\s+build/i],[a,[l,"Swiss"],[u,f]],[/android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i],[a,[l,"Zeki"],[u,f]],[/(android).+[;\/]\s+([YR]\d{2}x?.*)\s+build/i,/android.+[;\/]\s+(Dragon[\-\s]+Touch\s+|DT)(.+)\s+build/i],[[l,"Dragon Touch"],a,[u,f]],[/android.+[;\/]\s*(NS-?.+)\s+build/i],[a,[l,"Insignia"],[u,f]],[/android.+[;\/]\s*((NX|Next)-?.+)\s+build/i],[a,[l,"NextBook"],[u,f]],[/android.+[;\/]\s*(Xtreme\_?)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i],[[l,"Voice"],a,[u,h]],[/android.+[;\/]\s*(LVTEL\-?)?(V1[12])\s+build/i],[[l,"LvTel"],a,[u,h]],[/android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i],[a,[l,"Envizen"],[u,f]],[/android.+[;\/]\s*(Le[\s\-]+Pan)[\s\-]+(.*\b)\s+build/i],[l,a,[u,f]],[/android.+[;\/]\s*(Trio[\s\-]*.*)\s+build/i],[a,[l,"MachSpeed"],[u,f]],[/android.+[;\/]\s*(Trinity)[\-\s]*(T\d{3})\s+build/i],[l,a,[u,f]],[/android.+[;\/]\s*TU_(1491)\s+build/i],[a,[l,"Rotor"],[u,f]],[/android.+(KS(.+))\s+build/i],[a,[l,"Amazon"],[u,f]],[/android.+(Gigaset)[\s\-]+(Q.+)\s+build/i],[l,a,[u,f]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[u,p.lowerize],l,a],[/(android.+)[;\/].+build/i],[a,[l,"Generic"]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[c,[s,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[s,c],[/rv\:([\w\.]+).*(gecko)/i],[c,s]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[s,c],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s]+\w)*/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[s,[c,d.str,v.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[s,"Windows"],[c,d.str,v.os.windows.version]],[/\((bb)(10);/i],[[s,"BlackBerry"],c],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,/linux;.+(sailfish);/i],[s,c],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[s,"Symbian"],c],[/\((series40);/i],[s],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[s,"Firefox OS"],c],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[s,c],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[s,"Chromium OS"],c],[/(sunos)\s?([\w\.]+\d)*/i],[[s,"Solaris"],c],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[s,c],[/(haiku)\s(\w+)/i],[s,c],[/cfnetwork\/.+darwin/i,/ip[honead]+(?:.*os\s([\w]+)\slike\smac|;\sopera)/i],[[c,/_/g,"."],[s,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[[s,"Mac OS"],[c,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],[s,c]]},_=function(t,e){if("object"==typeof t&&(e=t,t=void 0),!(this instanceof _))return new _(t,e).getResult();var n=t||(i&&i.navigator&&i.navigator.userAgent?i.navigator.userAgent:""),r=e?p.extend(y,e):y;return this.getBrowser=function(){var t={name:void 0,version:void 0};return d.rgx.call(t,n,r.browser),t.major=p.major(t.version),t},this.getCPU=function(){var t={architecture:void 0};return d.rgx.call(t,n,r.cpu),t},this.getDevice=function(){var t={vendor:void 0,model:void 0,type:void 0};return d.rgx.call(t,n,r.device),t},this.getEngine=function(){var t={name:void 0,version:void 0};return d.rgx.call(t,n,r.engine),t},this.getOS=function(){var t={name:void 0,version:void 0};return d.rgx.call(t,n,r.os),t},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return n},this.setUA=function(t){return n=t,this},this};_.VERSION="0.7.17",_.BROWSER={NAME:s,MAJOR:"major",VERSION:c},_.CPU={ARCHITECTURE:"architecture"},_.DEVICE={MODEL:a,VENDOR:l,TYPE:u,CONSOLE:"console",MOBILE:h,SMARTTV:"smarttv",TABLET:f,WEARABLE:"wearable",EMBEDDED:"embedded"},_.ENGINE={NAME:s,VERSION:c},_.OS={NAME:s,VERSION:c},void 0!==e?(void 0!==t&&t.exports&&(e=t.exports=_),e.UAParser=_):n(212)?void 0===(r=function(){return _}.call(e,n,e,t))||(t.exports=r):i&&(i.UAParser=_);var g=i&&(i.jQuery||i.Zepto);if(void 0!==g){var m=new _;g.ua=m.getResult(),g.ua.get=function(){return m.getUA()},g.ua.set=function(t){m.setUA(t);var e=m.getResult();for(var n in e)g.ua[n]=e[n]}}}("object"==typeof window?window:this)},function(t,e){(function(e){t.exports=e}).call(e,{})},function(t,e,n){"use strict";var r={defaults:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i={};for(var o in t)i[o]=t[o];for(var a=0;a<n.length;a++){var s=n[a];for(var u in s)void 0===i[u]&&(i[u]=s[u])}return i},extend:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i={};for(var o in t)i[o]=t[o];for(var a=0;a<n.length;a++){var s=n[a];for(var u in s)i[u]=s[u]}return i}};e.a=r},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=n(5),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),h=n(1),f=n.n(h),p=n(9),d=n(131),v=n(74),y=n(132),_=n(217),g=n(97),m=n(99),b=n(100),w=n(129),x=n(133),T=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),k=function t(e,n,r){null===e&&(e=Function.prototype);var i=a()(e,n);if(void 0===i){var o=f()(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0};var C=p.c.RendererType,R=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(t=e.__proto__||f()(e)).call.apply(t,[this].concat(r)));return o._type=C.WEBGL,o._textures=[],o._fakeObject=new m.a,o._onContextLost=o._onContextLost.bind(o),o._onContextRestored=o._onContextRestored.bind(o),o.setCanvas(o._options.canvas||p.i.createCanvas()),o.shaders=o._initShaders(),o.renderers=o._initRenderers(),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=c()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(u.a?u()(t,e):t.__proto__=e)}(e,d["a"]),T(e,[{key:"_onContextLost",value:function(t){t.preventDefault(),p.f.warn(this.constructor.name,"WebGL context has been lost - trying to restore.")}},{key:"_onContextCreationError",value:function(t){t.preventDefault(),p.f.warn(this.constructor.name,"Failed to create WebGL context: "+(t.statusMessage||"Unknown error"))}},{key:"_onContextRestored",value:function(){var t=this;p.f.warn(this.constructor.name,"WebGL context has been restored. Clearing all textures."),this._textures.forEach(function(e){e.disposeGLTexturesForRenderer(t)}),this._createContext(),this._setupContext(),this.emit("context-restored")}},{key:"_onBeforeContext",value:function(){this._filterManager&&this._filterManager.dispose(),this._filterManager=new b.a(this),this._currentObjectRenderer=new y.a(this)}},{key:"setShader",value:function(t){this._currentShader=t,this._context.useProgram(t.getProgram()),this._setAttributesForShader(t)}},{key:"setCanvas",value:function(t){this._canvas&&this._removeContextEventListeners(),k(e.prototype.__proto__||f()(e.prototype),"setCanvas",this).call(this,t),this._canvas.addEventListener&&this._addContextEventListeners()}},{key:"_addContextEventListeners",value:function(){this._canvas.addEventListener("webglcontextlost",this._onContextLost),this._canvas.addEventListener("webglcontextrestored",this._onContextRestored),this._canvas.addEventListener("webglcontextcreationerror",this._onContextCreationError)}},{key:"_removeContextEventListeners",value:function(){this._canvas.removeEventListener("webglcontextlost",this._onContextLost),this._canvas.removeEventListener("webglcontextrestored",this._onContextRestored),this._canvas.removeEventListener("webglcontextcreationerror",this._onContextCreationError)}},{key:"_setAttributesForShader",value:function(t){var e=this._context,n=t.getAttributes(),r=t.getAttributeLocations();n.forEach(function(t){var n=r[t];e.enableVertexAttribArray(n)})}},{key:"_initShaders",value:function(){return{default:new g.a(this)}}},{key:"_initRenderers",value:function(){return{sprite:new _.a(this)}}},{key:"_createContext",value:function(){var t=this._canvas,n=null,r={preserveDrawingBuffer:!0};if(n=t.getContext("webgl",r)||t.getContext("experimental-webgl",r),"undefined"!=typeof window&&window.WebGLDebugUtils&&this._options.debug){n=window.WebGLDebugUtils.makeDebugContext(n,null,function(t,e){console.error("gl."+t+"("+window.WebGLDebugUtils.glFunctionArgsToString(t,e)+")")})}return this._options.debug&&(n=new w.a(n)),this.id=n.id=e.contextId++,this._context=n,n.renderer=this,this._maxTextureSize=n.getParameter(n.MAX_TEXTURE_SIZE),this.emit("context",n),n}},{key:"_setupContext",value:function(){var t=this._context;t.disable(t.DEPTH_TEST),t.disable(t.CULL_FACE),t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),this._defaultRenderTarget=new v.a(this,this._width,this._height,this._pixelRatio,!0),this.setRenderTarget(this._defaultRenderTarget),this._getMaxPrecision()}},{key:"_getMaxPrecision",value:function(){var t=this._context,e=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT);this._maxFloatPrecision=0!==e.precision?"highp":"mediump";var n=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_INT);this._maxIntPrecision=0!==n.rangeMax?"highp":"lowp"}},{key:"resizeTo",value:function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];k(e.prototype.__proto__||f()(e.prototype),"resizeTo",this).call(this,t,n),this._currentRenderTarget&&this._currentRenderTarget.resizeTo(t)}},{key:"setRenderTarget",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._defaultRenderTarget;this._currentRenderTarget=t,this._currentRenderTarget.activate()}},{key:"setObjectRenderer",value:function(t){this._currentObjectRenderer.stop(),this._currentObjectRenderer=t,this._currentObjectRenderer.start()}},{key:"render",value:function(t){this.setRenderTarget(this._defaultRenderTarget),this._defaultRenderTarget.clear(this._clearColor);var e=t.getParent();t.setParent(this._fakeObject),t.updateTransform(),t.setParent(e),this.renderDisplayObject(t,this._defaultRenderTarget)}},{key:"renderDisplayObject",value:function(t,e){this.setRenderTarget(e),this._filterManager.setFilterStack(e.getFilterStack()),t.renderWebGL(this),this._currentObjectRenderer.flush()}},{key:"clear",value:function(){var t=this._context;t.clearColor.apply(t,this._clearColor.toGLColor()),t.clear(t.COLOR_BUFFER_BIT)}},{key:"save",value:function(){return{renderTarget:this._currentRenderTarget,objectRenderer:this._currentObjectRenderer,filterStack:this._filterManager.getFilterStack()}}},{key:"restore",value:function(t){this.setRenderTarget(t.renderTarget),this._filterManager.setFilterStack(t.filterStack),this._currentObjectRenderer=t.objectRenderer}},{key:"getOrCreateGLTexture",value:function(t){var e=this._context,n=t.getGLTextureForRenderer(this);return n||(n=e.createTexture(),t.setGLTextureForRenderer(n,this),this._textures.push(t)),n}},{key:"updateTexture",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=t.getSource(),r=!!n,i=this._context,o=t.getGLUnit(),a=this.getOrCreateGLTexture(t);if(i.activeTexture(i.TEXTURE0+o),i.bindTexture(i.TEXTURE_2D,a),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),e&&r)if(n instanceof x.a)i.texImage2D(i.TEXTURE_2D,0,i.RGBA,n.width,n.height,0,i.RGBA,i.UNSIGNED_BYTE,n.data);else{var s=p.i.convertHtmlImageToRGBACanvas(n);i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,s)}t.isMipMappingEnabled()?i.generateMipmap(i.TEXTURE_2D):(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,t.getGLRepeat(i,"x")),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,t.getGLRepeat(i,"y"))),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,t.getGLFilter(i,"min")),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,t.getGLFilter(i,"mag")),i.activeTexture(i.TEXTURE0)}},{key:"getMaxDimensions",value:function(){var t=p.i.createCanvas(),e=t.getContext("webgl")||t.getContext("experimental-webgl");if(e){var n=e.getParameter(e.MAX_TEXTURE_SIZE),r=e.getExtension("WEBGL_lose_context");return r&&r.loseContext(),n}return null}},{key:"getCurrentRenderTarget",value:function(){return this._currentRenderTarget}},{key:"getCurrentObjectRenderer",value:function(){return this._currentObjectRenderer}},{key:"getMaxFloatPrecision",value:function(){return this._maxFloatPrecision}},{key:"getMaxIntPrecision",value:function(){return this._maxIntPrecision}},{key:"dispose",value:function(){var t=this;for(var e in this._filterManager.dispose(),this._currentObjectRenderer.dispose(),this._defaultRenderTarget.dispose(),this._textures.forEach(function(e){e.disposeGLTexturesForRenderer(t)}),this.shaders)this.shaders[e].dispose(),delete this.shaders[e];this._removeContextEventListeners();var n=this._context.getExtension("WEBGL_lose_context");n&&n.loseContext()}}],[{key:"isSupported",value:function(){var t=p.i.createCanvas();t.addEventListener("webglcontextcreationerror",this.prototype._onContextCreationError);var e=t.getContext("webgl")||t.getContext("experimental-webgl"),n=!!e;if(n){var r=p.e.determineGPUName(e);n&=!p.e.isGPUBlacklisted(r)}return t.removeEventListener("webglcontextcreationerror",this.prototype._onContextCreationError),n}}]),e}();R.contextId=0,R.type="WebGL",e.a=R},function(t,e,n){n(216);var r=n(10).Object;t.exports=function(t,e){return r.getOwnPropertyDescriptor(t,e)}},function(t,e,n){var r=n(29),i=n(90).f;n(95)("getOwnPropertyDescriptor",function(){return function(t,e){return i(r(t),e)}})},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=n(5),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),h=n(1),f=n.n(h),p=n(9),d=n(132),v=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var y=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(t=e.__proto__||f()(e)).call.apply(t,[this].concat(r)));o._maxBatchSize=p.a,o._vertices=new ArrayBuffer(4*p.a*p.j),o._positions=new Float32Array(o._vertices),o._colors=new Uint32Array(o._vertices),o._indices=new Uint16Array(6*p.a);for(var a=0,s=0;a<6*p.a;a+=6,s+=4)o._indices[a+0]=s+0,o._indices[a+1]=s+1,o._indices[a+2]=s+2,o._indices[a+3]=s+0,o._indices[a+4]=s+2,o._indices[a+5]=s+3;return o._shaders=[],o._sprites=[],o._currentBatchSize=0,o._currentBaseTexture=null,o._onContextChange(),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=c()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(u.a?u()(t,e):t.__proto__=e)}(e,d["a"]),v(e,[{key:"render",value:function(t){var e=t.getTexture(),n=e.getFrame(),r=e.getBaseTexture();this._currentBatchSize>=this._maxBatchSize&&(this.flush(),this._currentBaseTexture=r);var i=e.getUVs();if(i){var o=this._currentBatchSize*p.j;this._addVertexCoordinates(t,o,n),this._addTextureUVs(t,o,i),this._addColors(t,o),this._sprites[this._currentBatchSize]=t,this._currentBatchSize++}}},{key:"_addColors",value:function(t,e){var n=this._colors,r=t.getTint(),i=(r>>16)+(65280&r)+((255&r)<<16)+(255*t.getWorldAlpha()<<24);n[e+4]=n[e+9]=n[e+14]=n[e+19]=i}},{key:"_addTextureUVs",value:function(t,e,n){var r=this._positions,i=n.getUVsAt(0);r[e+2]=i.x,r[e+3]=i.y,i=n.getUVsAt(1),r[e+7]=i.x,r[e+8]=i.y,i=n.getUVsAt(2),r[e+12]=i.x,r[e+13]=i.y,i=n.getUVsAt(3),r[e+17]=i.x,r[e+18]=i.y}},{key:"_addVertexCoordinates",value:function(t,e,n){for(var r=this._positions,i=t.getWorldTransform(),o=t.getAnchor(),a=i.rectangleToCoordinates(n,o),s=0;s<4;s++)r[e+5*s]=a[s].x,r[e+5*s+1]=a[s].y}},{key:"_onContextChange",value:function(){var t=this._renderer.getContext();this._shader=this._renderer.shaders.default,this._vertexBuffer=t.createBuffer(),this._indexBuffer=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this._indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this._indices,t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this._vertexBuffer),t.bufferData(t.ARRAY_BUFFER,this._vertices,t.DYNAMIC_DRAW)}},{key:"start",value:function(){this._shader.setupBuffers(this._vertexBuffer,this._indexBuffer)}},{key:"flush",value:function(){var t=this._renderer,e=t.getContext();if(0!==this._currentBatchSize){if(this._currentBatchSize>.5*p.a)e.bufferSubData(e.ARRAY_BUFFER,0,this._vertices);else{var n=this._positions.subarray(0,this._currentBatchSize*p.j);e.bufferSubData(e.ARRAY_BUFFER,0,n)}for(var r=0,i=null,o=null,a=null,s=null,u=!1,l=null,c=0,h=0,f=this._currentBatchSize;h<f;h++){if(o=(l=this._sprites[h]).getTexture().getBaseTexture(),u=a!==(s=l.getShader()||this._shader),(i!==o||u)&&(this._renderBatch(i,r,c),c=h,r=0,i=o,u)){a=s,t.setShader(a);var d=t.getCurrentRenderTarget().getProjectionMatrix().toArray();a.setUniform("u_projMatrix",d),a.syncUniforms(),e.activeTexture(e.TEXTURE0)}r++}this._renderBatch(i,r,c),this._currentBatchSize=0,this._sprites=[]}}},{key:"_renderBatch",value:function(t,e,n){if(0!==e){var r=this._renderer,i=r.getContext(),o=t.getGLTextureForRenderer(r);o||(o=r.getOrCreateGLTexture(t)),t.isDirty()&&(r.updateTexture(t),t.setDirty(!1)),i.activeTexture(i.TEXTURE0+t.getGLUnit()),i.bindTexture(i.TEXTURE_2D,o);var a=6*e,s=6*n*2;i.drawElements(i.TRIANGLES,a,i.UNSIGNED_SHORT,s)}}},{key:"dispose",value:function(){var t=this._renderer.getContext();t.deleteBuffer(this._vertexBuffer),t.deleteBuffer(this._indexBuffer),this._vertices=null,this._positions=null,this._colors=null,this._indices=null,function t(e,n,r){null===e&&(e=Function.prototype);var i=a()(e,n);if(void 0===i){var o=f()(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0}(e.prototype.__proto__||f()(e.prototype),"dispose",this).call(this)}}]),e}();e.a=y},function(t,e){t.exports="attribute vec2 a_position;\nattribute vec2 a_texCoord;\nattribute vec4 a_color;\nvarying vec2 v_texCoord;\nvarying vec4 v_color;\nuniform mat3 u_projMatrix;\n\nvoid main() {\n  gl_Position = vec4((u_projMatrix * vec3(a_position, 1)).xy, 0, 1);\n  v_texCoord = a_texCoord;\n  v_color = vec4(a_color.rgb * a_color.a, a_color.a);\n}\n"},function(t,e){t.exports="uniform sampler2D u_image;\nvarying vec2 v_texCoord;\nvarying vec4 v_color;\n\nvoid main() {\n  gl_FragColor = texture2D(u_image, v_texCoord) * v_color;\n}\n"},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._renderer=e,this._context=this._renderer.getContext(),this._vertices=new Float32Array([0,0,100,0,100,100,0,100]),this._uvs=new Float32Array([0,0,1,0,1,1,0,1]),this._indices=new Uint16Array([0,1,2,0,3,2]),this._colors=new Float32Array([1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]),this._initBuffers(),this._uploadBuffers()}return o(t,[{key:"map",value:function(t,e){var n=e.x,r=e.y;this._uvs[2]=e.width/t.width,this._uvs[4]=this._uvs[2],this._uvs[5]=e.height/t.height,this._uvs[7]=this._uvs[5],this._vertices[0]=n,this._vertices[1]=r,this._vertices[2]=n+e.width,this._vertices[3]=r,this._vertices[4]=this._vertices[2],this._vertices[5]=r+e.height,this._vertices[6]=n,this._vertices[7]=this._vertices[5],this._uploadBuffers()}},{key:"_initBuffers",value:function(){var t=this._context;this._vertexBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this._vertexBuffer),t.bufferData(t.ARRAY_BUFFER,128,t.DYNAMIC_DRAW),this._indexBuffer=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this._indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this._indices,t.STATIC_DRAW)}},{key:"_uploadBuffers",value:function(){var t=this._context;t.bindBuffer(t.ARRAY_BUFFER,this._vertexBuffer),t.bufferSubData(t.ARRAY_BUFFER,0,this._vertices),t.bufferSubData(t.ARRAY_BUFFER,32,this._uvs),t.bufferSubData(t.ARRAY_BUFFER,64,this._colors)}},{key:"getVertexBuffer",value:function(){return this._vertexBuffer}},{key:"getIndexBuffer",value:function(){return this._indexBuffer}},{key:"dispose",value:function(){var t=this._context;t.deleteBuffer(this._vertexBuffer),t.deleteBuffer(this._indexBuffer)}}]),t}();e.a=a},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=n(9),a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._uvs=[new o.k(0,0),new o.k(1,0),new o.k(1,1),new o.k(0,1)]}return a(t,[{key:"update",value:function(t,e){var n=this._uvs[0];n.x=t.x/e.width,n.y=t.y/e.height,(n=this._uvs[1]).x=(t.x+t.width)/e.width,n.y=t.y/e.height,(n=this._uvs[2]).x=(t.x+t.width)/e.width,n.y=(t.y+t.height)/e.height,(n=this._uvs[3]).x=t.x/e.width,n.y=(t.y+t.height)/e.height}},{key:"getUVsAt",value:function(t){return this._uvs[t]}},{key:"getUVs",value:function(){return this._uvs}}]),t}();e.a=s},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(1),c=n.n(l),h=n(9),f=n(135),p=n(53),d=n(74),v=n(73),y=n(100),_=n(96),g=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var m=h.c.RendererType,b=function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||c()(e)).call(this,new p.a,new h.h(0,0,n,r)));return o._loaded=!0,o._width=n,o._height=r,o._pixelRatio=i,o._renderer=t,o._setupFilterManager(),o._setupBuffer(),o.setBaseTexture(o._renderTarget.getBaseTexture()),o._updateUVs(),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=u()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(a.a?a()(t,e):t.__proto__=e)}(e,f["a"]),g(e,[{key:"_setupFilterManager",value:function(){this._renderer.isOfType(m.WEBGL)?this._filterManager=new y.a(this._renderer):this._renderer.isOfType(m.CANVAS)&&(this._filterManager=new _.a(this._renderer)),this._filterManager.resizeTo(new h.k(this._width,this._height))}},{key:"_setupBuffer",value:function(){this._renderer.isOfType(m.WEBGL)?this._setupWebGLRenderTarget():this._renderer.isOfType(m.CANVAS)&&this._setupCanvasRenderTarget()}},{key:"_setupWebGLRenderTarget",value:function(){this._renderTarget=new d.a(this._renderer,this._width,this._height,this._pixelRatio)}},{key:"_setupCanvasRenderTarget",value:function(){this._renderTarget=new v.a(this._width,this._height,this._pixelRatio)}},{key:"clear",value:function(t){this._renderTarget.clear(t)}},{key:"resizeTo",value:function(t){this._width===t.x&&this._height===t.y||(this._width=t.x,this._height=t.y,this._frame.width=t.x,this._frame.height=t.y,this._renderTarget.resizeTo(t),this._filterManager.resizeTo(t))}},{key:"render",value:function(t){if(this._renderer.isOfType(m.WEBGL))this._renderWebGL(t);else{if(!this._renderer.isOfType(m.CANVAS))throw new Error("RenderTexture does not support rendering via "+this._renderer.constructor.name);this._renderCanvas(t)}}},{key:"_renderWebGL",value:function(t){this._renderTarget.activate(),t.getWorldTransform().reset(),t.getChildren().forEach(function(t){t.updateTransform()});var e=this._renderer.getFilterManager();this._renderer.setFilterManager(this._filterManager),this._renderer.renderDisplayObject(t,this._renderTarget),this._renderer.setFilterManager(e)}},{key:"_renderCanvas",value:function(t){t.getWorldTransform().reset(),t.getChildren().forEach(function(t){t.updateTransform()});var e=this._renderer.getFilterManager();this._renderer.setFilterManager(this._filterManager),this._renderer.renderDisplayObject(t,this._renderTarget),this._renderer.setFilterManager(e)}},{key:"getRenderTarget",value:function(){return this._renderTarget}},{key:"dispose",value:function(){this._renderTarget.dispose(),this._filterManager.dispose()}}]),e}();e.a=b},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(1),c=n.n(l),h=n(9),f=n(134),p=n(224),d=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var v=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||c()(e)).call(this));return n._onTextureUpdate=n._onTextureUpdate.bind(n),n._texture=t,n._shader=null,n._width=0,n._height=0,n._anchor=new h.k(0,0),n._canvasSmoothingEnabled=!0,n.setTexture(t),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=u()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(a.a?a()(t,e):t.__proto__=e)}(e,f["a"]),d(e,[{key:"_onTextureUpdate",value:function(){this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}},{key:"_renderWebGL",value:function(t){var e=t.save();this._smoothDownscaling&&(this._potRenderer||(this._potRenderer=new p.a),this._potRenderer.render(t,this,this._texture)),t.restore(e),t.setObjectRenderer(t.renderers.sprite),t.renderers.sprite.render(this)}},{key:"_renderCanvas",value:function(t){var e=this._worldTransform,n=this._texture.getFrame(),r=n.width,i=n.height,o=t.getCurrentRenderTarget().getPixelRatio(),a=this._anchor.x*-r|0,s=this._anchor.y*-i|0,u=t.getContext();u.setTransform(e.a,e.b,e.c,e.d,e.tx*o,e.ty*o),u.globalAlpha=this.getWorldAlpha();var l=this._texture.getBaseTexture(),c=l.getPixelRatio(),h=l.getSource();u.imageSmoothingEnabled=this._canvasSmoothingEnabled,u.drawImage(h,0,0,(h.naturalWidth||r)*c,(h.naturalHeight||i)*c,a*o,s*o,r*o,i*o)}},{key:"isAtPosition",value:function(t){var e=this._worldTransform.applyInverseToVector(t),n=this._texture.getFrame(),r=n.width,i=n.height,o=new h.k(-r,-i);o.multiply(this._anchor);var a=o.clone().add(r,i);return!(e.x<o.x||e.x>a.x||e.y<o.y||e.y>a.y)}},{key:"getLocalBounds",value:function(){if(this._localBoundsNeedUpdate){var t=this._localBounds,e=this._texture.getFrame();t.x=-e.width*this._anchor.x,t.y=-e.height*this._anchor.y,t.width=e.width,t.height=e.height,this._localBoundsNeedUpdate=!1}return this._localBounds.clone()}},{key:"getBounds",value:function(){if(this._boundsNeedUpdate){var t=this._bounds,e=this._texture.getFrame(),n=this._worldTransform,r=this._anchor,i=n.rectangleToCoordinates(e,r),o=i[0].x,a=i[0].y,s=o,u=a;i.forEach(function(t){var e=t.x,n=t.y;o=Math.min(o,e),a=Math.min(a,n),s=Math.max(s,e),u=Math.max(u,n)}),t.x=o,t.width=Math.abs(s-o),t.y=a,t.height=Math.abs(u-a),this._boundsNeedUpdate=!1}return this._bounds.clone()}},{key:"getTexture",value:function(){return this._texture}},{key:"clearTexture",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._texture&&(this._texture.off("update",this._onTextureUpdate),t&&this._texture.dispose(),this._texture=null,this._potRenderer&&(t&&this._potRenderer.dispose(),this._potRenderer=null))}},{key:"setTexture",value:function(t){t&&(this._texture&&this._texture.off("update",this._onTextureUpdate),this._potRenderer&&this._potRenderer.getRenderTexture().getBaseTexture().setDirty(!0),this._texture=t,t.getBaseTexture().isLoaded()&&this._onTextureUpdate(),t.on("update",this._onTextureUpdate))}},{key:"getShader",value:function(){return this._shader}},{key:"setShader",value:function(t){this._shader=t}},{key:"getWidth",value:function(){return this._width}},{key:"setWidth",value:function(t){this._scale.x=t/this._texture.getFrame().width,this._width=t,this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}},{key:"getHeight",value:function(){return this._height}},{key:"setHeight",value:function(t){this._scale.y=t/this._texture.getFrame().height,this._height=t,this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}},{key:"getDimensions",value:function(){return new h.k(this._width,this._height)}},{key:"getAnchor",value:function(){return this._anchor}},{key:"setAnchor",value:function(t,e){t instanceof h.k?this._anchor.copy(t):this._anchor.set(t,e),this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}},{key:"isSmoothDownscaling",value:function(){return this._smoothDownscaling}},{key:"setSmoothDownscaling",value:function(t){this._smoothDownscaling=t}},{key:"dispose",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._texture&&this._texture.off("update",this._onTextureUpdate),(t||e)&&this._texture.dispose(e),this._potRenderer&&this._potRenderer.dispose()}}]),e}();e.a=v},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=n(41),a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._container=new o.Engine.Container,this._sprite=new o.Engine.Sprite,this._container.addChild(this._sprite)}return a(t,[{key:"render",value:function(t,e,n){var r=n.getDimensions(),i=this._getNextHighestPOT(r);this._renderTexture?this._renderTexture.resizeTo(i):this._renderTexture=new o.Engine.RenderTexture(t,i.x,i.y);var a=this._renderTexture.getDimensions();this._sprite.setTexture(n),this._sprite.updateTransform(),this._renderTexture.clear(),this._renderTexture.render(this._container),this._updateSprite(t,e,r,a)}},{key:"_updateSprite",value:function(t,e,n,r){e.setTexture(this._renderTexture),this._renderTexture.setFrame(new o.Rectangle(0,0,n.x,n.y))}},{key:"_getNextHighestPOT",value:function(t){return new o.Vector2(o.Utils.nextHighestPOT(t.x),o.Utils.nextHighestPOT(t.y))}},{key:"getRenderTexture",value:function(){return this._renderTexture}},{key:"dispose",value:function(){this._renderTexture&&(this._renderTexture.dispose(),this._renderTexture=null)}}]),t}();e.a=s},function(t,e,n){"use strict";var r=n(97);e.a={TextureShader:r.a}},function(t,e,n){t.exports={default:n(227),__esModule:!0}},function(t,e,n){n(228),t.exports=n(10).setImmediate},function(t,e,n){var r=n(13),i=n(93);r(r.G+r.B,{setImmediate:i.set,clearImmediate:i.clear})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(230);n.d(e,"UnpremultiplyFilter",function(){return r.a});var i=n(232);n.d(e,"ColorOverlayFilter",function(){return i.a});var o=n(234);n.d(e,"TintFilter",function(){return o.a});var a=n(236);n.d(e,"OverlayFilter",function(){return a.a})},function(t,e,n){"use strict";var r=n(2),i=n.n(r),o=n(3),a=n.n(o),s=n(1),u=n.n(s),l=n(54);var c=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||u()(e)).call(this));return t._fragmentSource=n(231),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=a()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(i.a?i()(t,e):t.__proto__=e)}(e,l["a"]),e}();e.a=c},function(t,e){t.exports="uniform sampler2D u_image;\nvarying vec2 v_texCoord;\nvarying vec4 v_color;\n\nvoid main() {\n  vec4 color = texture2D(u_image, v_texCoord);\n  gl_FragColor = vec4(color.a > 0. ? color.rgb / color.a : vec3(0), color.a);\n}\n"},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(1),c=n.n(l),h=n(9),f=n(54),p=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var d=h.c.OptionType,v=h.c.UniformType,y=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(t=e.__proto__||c()(e)).call.apply(t,[this].concat(i)));return a._fragmentSource=n(233),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=u()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(a.a?a()(t,e):t.__proto__=e)}(e,f["a"]),p(e,[{key:"_applyCanvas",value:function(t,e,n){arguments.length>3&&void 0!==arguments[3]&&arguments[3];for(var r=e.getCanvas(),i=e.getContext(),o=n.getContext(),a=this._options.color,s=i.getImageData(0,0,r.width,r.height),u=o.getImageData(0,0,r.width,r.height),l=r.width*r.height,c=new h.b,f=new h.b,p=0;p<4*l;p+=4){c.set(s.data[p]/255,s.data[p+1]/255,s.data[p+2]/255,s.data[p+3]/255),f.set(u.data[p]/255,u.data[p+1]/255,u.data[p+2]/255,u.data[p+3]/255);var d=f.r+c.a*(c.r-f.r);u.data[p]=255*(d+c.a*(a.r-d));var v=f.g+c.a*(c.g-f.g);u.data[p+1]=255*(v+c.a*(a.g-v));var y=f.b+c.a*(c.b-f.b);u.data[p+2]=255*(y+c.a*(a.b-y))}o.putImageData(u,0,0)}}]),e}();y.prototype.availableOptions={color:{type:d.COLOR,default:h.b.WHITE,uniformType:v.FLOAT4}},e.a=y},function(t,e){t.exports="uniform sampler2D u_image;\nvarying vec2 v_texCoord;\nuniform vec4 u_color;\n\nvoid main() {\n  vec4 color = texture2D(u_image, v_texCoord);\n  gl_FragColor = vec4(mix(color.rgb, u_color.rgb, u_color.a), color.a) * color.a;\n}\n"},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(1),c=n.n(l),h=n(9),f=n(54),p=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var d=h.c.OptionType,v=h.c.UniformType,y=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(t=e.__proto__||c()(e)).call.apply(t,[this].concat(i)));return a._fragmentSource=n(235),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=u()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(a.a?a()(t,e):t.__proto__=e)}(e,f["a"]),p(e,[{key:"_applyCanvas",value:function(t,n,r){arguments.length>3&&void 0!==arguments[3]&&arguments[3];var i=n.getCanvas(),o=n.getContext(),a=r.getContext(),s=o.getImageData(0,0,i.width,i.height),u=this._options,l=u.mode,c=u.color,f=c.r,p=c.g,d=c.b,v=c.a,y=[.2125,.7154,.0721];switch(l){case e.MODES.SOLID:for(var _=0;_<i.width*i.height;_++){var g=4*_;s.data[g]+=(255*f-s.data[g])*v,s.data[g+1]+=(255*p-s.data[g+1])*v,s.data[g+2]+=(255*d-s.data[g+2])*v}break;case e.MODES.COLORIZED:for(var m=0;m<i.width*i.height;m++){var b=4*m,w=s.data[b]/255*y[0]+s.data[b+1]/255*y[1]+s.data[b+2]/255*y[2],x=new h.b(w*f,w*p,w*d);s.data[b]+=(255*x.r-s.data[b])*v,s.data[b+1]+=(255*x.g-s.data[b+1])*v,s.data[b+2]+=(255*x.b-s.data[b+2])*v}}a.putImageData(s,0,0)}}]),e}();y.MODES={NONE:0,SOLID:1,COLORIZED:2},y.prototype.availableOptions={color:{type:d.COLOR,default:h.b.WHITE,uniformType:v.FLOAT4},mode:{type:d.NUMBER,default:y.MODES.NONE,uniformType:v.INT}},e.a=y},function(t,e){t.exports="uniform sampler2D u_image;\nvarying vec2 v_texCoord;\nuniform vec4 u_color;\nuniform int u_mode;\n\nvec3 W = vec3(0.2125, 0.7154, 0.0721);\n\nvoid main() {\n  vec4 color = texture2D(u_image, v_texCoord);\n  if (u_mode == 0) {\n    gl_FragColor = color * color.a;\n  } else if (u_mode == 1) {\n    gl_FragColor = vec4(mix(color.rgb, u_color.rgb, u_color.a), color.a) * color.a;\n  } else if (u_mode == 2) {\n    float luminance = dot(color.rgb, W);\n    vec3 colorized = vec3(luminance) * u_color.rgb;\n    gl_FragColor = vec4(mix(color.rgb, colorized, u_color.a), color.a) * color.a;\n  }\n}\n"},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(1),c=n.n(l),h=n(9),f=n(54),p=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var d=h.c.OptionType,v=h.c.UniformType,y=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(t=e.__proto__||c()(e)).call.apply(t,[this].concat(i)));return a._fragmentSource=n(237),a._lastImage=null,a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=u()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(a.a?a()(t,e):t.__proto__=e)}(e,f["a"]),p(e,[{key:"_applyCanvas",value:function(t,n,r){arguments.length>3&&void 0!==arguments[3]&&arguments[3];for(var i=this._options.overlayTexture.getRenderTarget().getContext(),o=n.getCanvas(),a=n.getContext(),s=r.getContext(),u=a.getImageData(0,0,o.width,o.height),l=i.getImageData(0,0,o.width,o.height),c=this._options,f=c.blendMode,p=c.alpha,d=new h.b,v=new h.b,y=new h.b,_=0;_<o.width*o.height*4;_+=4){d.set(u.data[_]/255,u.data[_+1]/255,u.data[_+2]/255,u.data[_+3]/255),v.set(l.data[_]/255,l.data[_+1]/255,l.data[_+2]/255,l.data[_+3]/255);var g=void 0,m=void 0,b=void 0,w=void 0,x=void 0,T=void 0,k=void 0,C=void 0,R=void 0;switch(f){case e.BLEND_MODES.NORMAL:y.set(d.r+v.a*p*(v.r-d.r),d.g+v.a*p*(v.g-d.g),d.b+v.a*p*(v.b-d.b),d.a);break;case e.BLEND_MODES.OVERLAY:g=1-2*(1-d.r)*(1-v.r),m=2*d.r*v.r,b=g+(d.r<.5?1:0)*(m-g),w=1-2*(1-d.g)*(1-v.g),x=2*d.g*v.g,T=w+(d.g<.5?1:0)*(x-w),k=1-2*(1-d.b)*(1-v.b),C=2*d.b*v.b,R=k+(d.b<.5?1:0)*(C-k),y.set(d.r+v.a*p*(b-d.r),d.g+v.a*p*(T-d.g),d.b+v.a*p*(R-d.b),d.a);break;case e.BLEND_MODES.HARD_LIGHT:g=1-2*(1-v.r)*(1-d.r),m=2*v.r*d.r,b=g+(v.r<.5?1:0)*(m-g),w=1-2*(1-v.g)*(1-d.g),x=2*v.g*d.g,T=w+(v.g<.5?1:0)*(x-w),k=1-2*(1-v.b)*(1-d.b),C=2*v.b*d.b,R=k+(v.b<.5?1:0)*(C-k),y.set(d.r+v.a*p*(b-d.r),d.g+v.a*p*(T-d.g),d.b+v.a*p*(R-d.b),d.a);break;case e.BLEND_MODES.SOFT_LIGHT:g=2*d.r*(1-v.r)+(2*v.r-1)*Math.sqrt(d.r),m=2*d.r*v.r+d.r*d.r*(1-2*v.r),b=g+(v.r<.5?1:0)*(m-g),w=2*d.g*(1-v.g)+(2*v.g-1)*Math.sqrt(d.g),x=2*d.g*v.g+d.g*d.g*(1-2*v.g),T=w+(v.g<.5?1:0)*(x-w),k=2*d.b*(1-v.b)+(2*v.b-1)*Math.sqrt(d.b),C=2*d.b*v.b+d.b*d.b*(1-2*v.b),R=k+(v.b<.5?1:0)*(C-k),y.set(d.r+v.a*p*(b-d.r),d.g+v.a*p*(T-d.g),d.b+v.a*p*(R-d.b),d.a);break;case e.BLEND_MODES.MULTIPLY:b=d.r*v.r,T=d.g*v.g,R=d.b*v.b,y.set(d.r+v.a*p*(b-d.r),d.g+v.a*p*(T-d.g),d.b+v.a*p*(R-d.b),d.a);break;case e.BLEND_MODES.DARKEN:b=Math.min(d.r,v.r),T=Math.min(d.g,v.g),R=Math.min(d.b,v.b),y.set(d.r+v.a*p*(b-d.r),d.g+v.a*p*(T-d.g),d.b+v.a*p*(R-d.b),d.a);break;case e.BLEND_MODES.LIGHTEN:b=Math.max(d.r,v.r),T=Math.max(d.g,v.g),R=Math.max(d.b,v.b),y.set(d.r+v.a*p*(b-d.r),d.g+v.a*p*(T-d.g),d.b+v.a*p*(R-d.b),d.a);break;case e.BLEND_MODES.SCREEN:b=1-(1-d.r)*(1-v.r),T=1-(1-d.g)*(1-v.g),R=1-(1-d.b)*(1-v.b),y.set(d.r+v.a*p*(b-d.r),d.g+v.a*p*(T-d.g),d.b+v.a*p*(R-d.b),d.a);break;case e.BLEND_MODES.COLOR_BURN:b=Math.max(0,Math.min(1,1-(1-d.r)/Math.max(v.r,1e-6))),T=Math.max(0,Math.min(1,1-(1-d.g)/Math.max(v.g,1e-6))),R=Math.max(0,Math.min(1,1-(1-d.b)/Math.max(v.b,1e-6))),y.set(d.r+v.a*p*(b-d.r),d.g+v.a*p*(T-d.g),d.b+v.a*p*(R-d.b),d.a)}u.data[_]=255*y.r,u.data[_+1]=255*y.g,u.data[_+2]=255*y.b,u.data[_+3]=255*y.a}s.putImageData(u,0,0)}}]),e}();y.BLEND_MODES={NORMAL:0,OVERLAY:1,HARD_LIGHT:2,SOFT_LIGHT:3,MULTIPLY:4,DARKEN:5,LIGHTEN:6,SCREEN:7,COLOR_BURN:8},y.prototype.availableOptions={blendMode:{type:d.NUMBER,default:y.BLEND_MODES.NORMAL,uniformType:v.INT},overlayImage:{type:d.NUMBER,required:!0,uniformType:v.SAMPLER2D},overlayTexture:{type:d.OBJECT,required:!0},alpha:{type:d.NUMBER,default:1,uniformType:v.FLOAT}},e.a=y},function(t,e){t.exports="uniform sampler2D u_image;\nvarying vec2 v_texCoord;\nuniform sampler2D u_overlayImage;\nuniform int u_blendMode;\nuniform float u_alpha;\n\nconst float EPSILON = 0.000001;\n\nvec4 overlay(vec4 a, vec4 b) {\n    vec3 result = mix(\n          1.0 - 2.0 * (1.0 - a.rgb) * (1.0 - b.rgb),\n          2.0 * a.rgb * b.rgb,\n          vec3(a.r < 0.5, a.g < 0.5, a.b < 0.5)\n      );\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 hardLight(vec4 b, vec4 a) {\n    vec3 result = mix(\n          1.0 - 2.0 * (1.0 - a.rgb) * (1.0 - b.rgb),\n          2.0 * a.rgb * b.rgb,\n          vec3(a.r < 0.5, a.g < 0.5, a.b < 0.5)\n      );\n    return mix(b, vec4(result, b.a), u_alpha * a.a);\n}\n\nvec4 softLight(vec4 a, vec4 b) {\n    vec3 result = mix(\n          2.0 * a.rgb * (1.0 - b.rgb) + (2.0 * b.rgb - 1.0) * sqrt(a.rgb),\n          2.0 * a.rgb * b.rgb + a.rgb * a.rgb * (1.0 - 2.0 * b.rgb),\n          vec3(b.r < 0.5, b.g < 0.5, b.b < 0.5)\n      );\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 multiply(vec4 a, vec4 b) {\n    vec3 result = a.rgb * b.rgb;\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 darken(vec4 a, vec4 b) {\n    vec3 result = min(a.rgb, b.rgb);\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 lighten(vec4 a, vec4 b) {\n    vec3 result = max(a.rgb, b.rgb);\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 screen(vec4 a, vec4 b) {\n    vec3 result = 1.0 - (1.0 - a.rgb) * (1.0 - b.rgb);\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 colorBurn(vec4 a, vec4 b) {\n    vec3 result = clamp(1.0 - (1.0 - a.rgb) / max(b.rgb, EPSILON), 0.0, 1.0);\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 normal(vec4 a, vec4 b) {\n    return mix(a, vec4(b.rgb, a.a), u_alpha * b.a);\n}\n\nvoid main() {\n  vec4 color = texture2D(u_image, v_texCoord);\n  vec4 overlayColor = texture2D(u_overlayImage, v_texCoord);\n\n  vec4 resultColor;\n  if (u_blendMode == 0) {\n    resultColor = normal(color, overlayColor);\n  } else if (u_blendMode == 1) {\n    resultColor = overlay(color, overlayColor);\n  } else if (u_blendMode == 2) {\n    resultColor = hardLight(color, overlayColor);\n  } else if (u_blendMode == 3) {\n    resultColor = softLight(color, overlayColor);\n  } else if (u_blendMode == 4) {\n    resultColor = multiply(color, overlayColor);\n  } else if (u_blendMode == 5) {\n    resultColor = darken(color, overlayColor);\n  } else if (u_blendMode == 6) {\n    resultColor = lighten(color, overlayColor);\n  } else if (u_blendMode == 7) {\n    resultColor = screen(color, overlayColor);\n  } else if (u_blendMode == 8) {\n    resultColor = colorBurn(color, overlayColor);\n  }\n  gl_FragColor = vec4(resultColor.rgb * resultColor.a, resultColor.a);\n}\n"},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r={EXPORT:"export",CLOSE:"close",OPERATION_CREATED:"operation:created",OPERATION_UPDATED:"operation:updated",OPERATION_REMOVED:"operation:removed",EDITOR_READY:"editor:ready",WINDOW_RESIZE:"window:resize",ZOOM_DONE:"editor:zoom_done",HISTORY_UNDO:"history:undo",HISTORY_UPDATED:"history:update",FEATURES_DISABLED:"editor:features:disabled",FEATURES_ENABLED:"editor:features:enabled",FEATURES_UPDATED:"editor:features:updated",TRANSFORM_REAPPLY_RATIO:"transform:reapply_ratio"}},function(t,e,n){"use strict";n.d(e,"a",function(){return w});var r=n(36),i=n.n(r),o=n(40),a=n.n(o),s=n(0),u=n.n(s),l=n(30),c=n.n(l),h=n(22),f=n(240),p=n(50),d=n(137),v=n(248),y="function"==typeof a.a&&"symbol"==typeof i.a?function(t){return typeof t}:function(t){return t&&"function"==typeof a.a&&t.constructor===a.a&&t!==a.a.prototype?"symbol":typeof t},_=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),u()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function g(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var m=function(t){return h.a.byteArrayToString(p.a.decode(t))};var b=function(){function t(e){g(this,t),this._version="2.0",this._l="string"==typeof e?e.trim():e,this._e=this._parseBigInt("65537",10),this._n=this._parseBigInt("681984042382424091378806337544846672160292647422517223678775230983366046720611873368204040735766698395282492937192783016867164773742859209434481353888637963692711665138989982680829529436715362566735813634679619274059040232728883894511099669775400556584329435375723951309340934658571478665059403241851229195311069345899870108307225910988692123234379186643268583453907260879685992156955936561142314233983397819356937109343127504441076920088455337597736475086676246750168976219763398350254797168313954762459542746440628077261880980924552698138857743609502132632199713575442848784271304503226045319991689413234228439044522583790713890093165912455428688507463773064216328753265963237930998706891042679105987175588970202082466871461192706070321938250462103821558100761330890228135620208935801286878657384108721268761878694436895194628411397454202904351577771506916746612289964053490210990342857409030179406810634136188751670648983222653319056818302012063874664196648868156305696644664362171542503665321455971335955948698828939948786720193132672749776162913092000667953299803216404664087988046584107737900256954976744353601826341965438148646041640662195744770544094748295945844184507459808803114917301124088082458306086473490516969815873631",10),this._parseLicense()}return _(t,[{key:"v",value:function(){return this._sigValid()&&!this.isExp()}},{key:"_jsonValid",value:function(){try{this._decLic=JSON.parse(this._l)}catch(t){return this._decLic={},!1}return!0}},{key:"_hostnameValid",value:function(){if("undefined"==typeof window)return!0;if(!this._decLic[m("YXBwX2lkZW50aWZpZXJz")].length)return!0;var t=window.location.hostname,e=!1;return this._decLic[m("YXBwX2lkZW50aWZpZXJz")].forEach(function(n){h.a.wildCardMatch(t,n)&&(e=!0)}),e}},{key:"_platformValid",value:function(){return"HTML5"===this._decLic[m("cGxhdGZvcm0=")]}},{key:"c",value:function(){var t=this;return new c.a(function(e,n){if("string"!==y(t._l)||!t._jsonValid()){var r=new Error;return r.code="ELICINVFMT",n(r)}if(!t._sigValid()){var i=new Error;return i.code="ELICINV",n(i)}if(!t._hostnameValid()){var o=new Error;return o.code="ELICINVHOST",n(o)}if(!t._platformValid()){var a=new Error;return a.code="ELICINVPLAT",n(a)}if(t.isExp()){var s=new Error;return s.code="ELICEXP",n(s)}e()})}},{key:"isToolAllowed",value:function(t){return this._decLic[m("ZmVhdHVyZXM=")]&&-1!==this._decLic[m("ZmVhdHVyZXM=")].indexOf(t)}},{key:"t",value:function(){if(this._decLic.enterprise_license)return c.a.resolve();var t=this._decLic[m("ZG9tYWlucw==")][0]+m(m("TDNSeVlXTnJQMkZ3YVV0bGVUMD0="))+this._decLic[m("YXBpX3Rva2Vu")];return new d.a(t).load()}},{key:"isENT",value:function(){return!!this._decLic&&this._decLic[m("ZW50ZXJwcmlzZV9saWNlbnNl")]}},{key:"_sigValid",value:function(){return this._verify(this._message,this._sig)}},{key:"exp",value:function(){return!!this._decLic[m("ZXhwaXJlc19hdA==")]}},{key:"dl",value:function(){return Math.ceil((this._expAt()-Date.now())/864e5)}},{key:"isExp",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();return null!==this._decLic[m("ZXhwaXJlc19hdA==")]&&t>this._expAt()}},{key:"_expAt",value:function(){return 1e3*this._decLic[m("ZXhwaXJlc19hdA==")]}},{key:"_verify",value:function(t,e){return this._encodeMessage(t)===this._decodeSignature(e).substr(-64)}},{key:"_encodeMessage",value:function(t){return Object(v.a)(t)}},{key:"_decodeSignature",value:function(t){return t=p.a.decode(t),t=t.map(function(t){return("0"+(255&t).toString(16)).slice(-2)}).join(""),(t=this._parseBigInt(t,16)).modPowInt(this._e,this._n).toString(16)}},{key:"_parseBigInt",value:function(t,e){return new f.a(t,e)}},{key:"_parseLicense",value:function(){"string"==typeof this._l&&this._jsonValid()&&(this._sig=this._decLic[m("c2lnbmF0dXJl")]||"",delete this._decLic[m("c2lnbmF0dXJl")],this._sig=this._sig.replace(/[^A-Za-z0-9+/=]/g,""),this._message=this._l.replace(new RegExp(',"'+m("c2lnbmF0dXJl")+'":"([^"]*)"'),""))}}]),t}(),w=function(){function t(){g(this,t)}return _(t,[{key:"v",value:function(){return!0}},{key:"c",value:function(){return c.a.resolve()}},{key:"isToolAllowed",value:function(t){return!0}},{key:"t",value:function(){return c.a.resolve()}},{key:"isENT",value:function(){return!1}},{key:"exp",value:function(){return!1}},{key:"dl",value:function(){return 0}},{key:"isExp",value:function(){arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();return!1}}]),t}();e.b=b},function(t,e,n){"use strict";var r,i=i||{};function o(t,e,n){null!=t&&("number"==typeof t?this.fromNumber(t,e,n):null==e&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,e))}function a(){return new o(null)}"Microsoft Internet Explorer"==i.appName?(o.prototype.am=function(t,e,n,r,i,o){for(var a=32767&e,s=e>>15;--o>=0;){var u=32767&this[t],l=this[t++]>>15,c=s*u+l*a;i=((u=a*u+((32767&c)<<15)+n[r]+(1073741823&i))>>>30)+(c>>>15)+s*l+(i>>>30),n[r++]=1073741823&u}return i},r=30):"Netscape"!=i.appName?(o.prototype.am=function(t,e,n,r,i,o){for(;--o>=0;){var a=e*this[t++]+n[r]+i;i=Math.floor(a/67108864),n[r++]=67108863&a}return i},r=26):(o.prototype.am=function(t,e,n,r,i,o){for(var a=16383&e,s=e>>14;--o>=0;){var u=16383&this[t],l=this[t++]>>14,c=s*u+l*a;i=((u=a*u+((16383&c)<<14)+n[r]+i)>>28)+(c>>14)+s*l,n[r++]=268435455&u}return i},r=28),o.prototype.DB=r,o.prototype.DM=(1<<r)-1,o.prototype.DV=1<<r;o.prototype.FV=Math.pow(2,52),o.prototype.F1=52-r,o.prototype.F2=2*r-52;var s,u,l="0123456789abcdefghijklmnopqrstuvwxyz",c=new Array;for(s="0".charCodeAt(0),u=0;u<=9;++u)c[s++]=u;for(s="a".charCodeAt(0),u=10;u<36;++u)c[s++]=u;for(s="A".charCodeAt(0),u=10;u<36;++u)c[s++]=u;function h(t){return l.charAt(t)}function f(t,e){var n=c[t.charCodeAt(e)];return null==n?-1:n}function p(t){var e=a();return e.fromInt(t),e}function d(t){var e,n=1;return 0!=(e=t>>>16)&&(t=e,n+=16),0!=(e=t>>8)&&(t=e,n+=8),0!=(e=t>>4)&&(t=e,n+=4),0!=(e=t>>2)&&(t=e,n+=2),0!=(e=t>>1)&&(t=e,n+=1),n}function v(t){this.m=t}function y(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function _(t,e){return t&e}function g(t,e){return t|e}function m(t,e){return t^e}function b(t,e){return t&~e}function w(t){if(0==t)return-1;var e=0;return 0==(65535&t)&&(t>>=16,e+=16),0==(255&t)&&(t>>=8,e+=8),0==(15&t)&&(t>>=4,e+=4),0==(3&t)&&(t>>=2,e+=2),0==(1&t)&&++e,e}function x(t){for(var e=0;0!=t;)t&=t-1,++e;return e}function T(){}function k(t){return t}function C(t){this.r2=a(),this.q3=a(),o.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}v.prototype.convert=function(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t},v.prototype.revert=function(t){return t},v.prototype.reduce=function(t){t.divRemTo(this.m,null,t)},v.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n),this.reduce(n)},v.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},y.prototype.convert=function(t){var e=a();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(o.ZERO)>0&&this.m.subTo(e,e),e},y.prototype.revert=function(t){var e=a();return t.copyTo(e),this.reduce(e),e},y.prototype.reduce=function(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var e=0;e<this.m.t;++e){var n=32767&t[e],r=n*this.mpl+((n*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(t[n=e+this.m.t]+=this.m.am(0,r,t,e,0,this.m.t);t[n]>=t.DV;)t[n]-=t.DV,t[++n]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)},y.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n),this.reduce(n)},y.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},o.prototype.copyTo=function(t){for(var e=this.t-1;e>=0;--e)t[e]=this[e];t.t=this.t,t.s=this.s},o.prototype.fromInt=function(t){this.t=1,this.s=t<0?-1:0,t>0?this[0]=t:t<-1?this[0]=t+this.DV:this.t=0},o.prototype.fromString=function(t,e){var n;if(16==e)n=4;else if(8==e)n=3;else if(256==e)n=8;else if(2==e)n=1;else if(32==e)n=5;else{if(4!=e)return void this.fromRadix(t,e);n=2}this.t=0,this.s=0;for(var r=t.length,i=!1,a=0;--r>=0;){var s=8==n?255&t[r]:f(t,r);s<0?"-"==t.charAt(r)&&(i=!0):(i=!1,0==a?this[this.t++]=s:a+n>this.DB?(this[this.t-1]|=(s&(1<<this.DB-a)-1)<<a,this[this.t++]=s>>this.DB-a):this[this.t-1]|=s<<a,(a+=n)>=this.DB&&(a-=this.DB))}8==n&&0!=(128&t[0])&&(this.s=-1,a>0&&(this[this.t-1]|=(1<<this.DB-a)-1<<a)),this.clamp(),i&&o.ZERO.subTo(this,this)},o.prototype.clamp=function(){for(var t=this.s&this.DM;this.t>0&&this[this.t-1]==t;)--this.t},o.prototype.dlShiftTo=function(t,e){var n;for(n=this.t-1;n>=0;--n)e[n+t]=this[n];for(n=t-1;n>=0;--n)e[n]=0;e.t=this.t+t,e.s=this.s},o.prototype.drShiftTo=function(t,e){for(var n=t;n<this.t;++n)e[n-t]=this[n];e.t=Math.max(this.t-t,0),e.s=this.s},o.prototype.lShiftTo=function(t,e){var n,r=t%this.DB,i=this.DB-r,o=(1<<i)-1,a=Math.floor(t/this.DB),s=this.s<<r&this.DM;for(n=this.t-1;n>=0;--n)e[n+a+1]=this[n]>>i|s,s=(this[n]&o)<<r;for(n=a-1;n>=0;--n)e[n]=0;e[a]=s,e.t=this.t+a+1,e.s=this.s,e.clamp()},o.prototype.rShiftTo=function(t,e){e.s=this.s;var n=Math.floor(t/this.DB);if(n>=this.t)e.t=0;else{var r=t%this.DB,i=this.DB-r,o=(1<<r)-1;e[0]=this[n]>>r;for(var a=n+1;a<this.t;++a)e[a-n-1]|=(this[a]&o)<<i,e[a-n]=this[a]>>r;r>0&&(e[this.t-n-1]|=(this.s&o)<<i),e.t=this.t-n,e.clamp()}},o.prototype.subTo=function(t,e){for(var n=0,r=0,i=Math.min(t.t,this.t);n<i;)r+=this[n]-t[n],e[n++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r-=t.s;n<this.t;)r+=this[n],e[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<t.t;)r-=t[n],e[n++]=r&this.DM,r>>=this.DB;r-=t.s}e.s=r<0?-1:0,r<-1?e[n++]=this.DV+r:r>0&&(e[n++]=r),e.t=n,e.clamp()},o.prototype.multiplyTo=function(t,e){var n=this.abs(),r=t.abs(),i=n.t;for(e.t=i+r.t;--i>=0;)e[i]=0;for(i=0;i<r.t;++i)e[i+n.t]=n.am(0,r[i],e,i,0,n.t);e.s=0,e.clamp(),this.s!=t.s&&o.ZERO.subTo(e,e)},o.prototype.squareTo=function(t){for(var e=this.abs(),n=t.t=2*e.t;--n>=0;)t[n]=0;for(n=0;n<e.t-1;++n){var r=e.am(n,e[n],t,2*n,0,1);(t[n+e.t]+=e.am(n+1,2*e[n],t,2*n+1,r,e.t-n-1))>=e.DV&&(t[n+e.t]-=e.DV,t[n+e.t+1]=1)}t.t>0&&(t[t.t-1]+=e.am(n,e[n],t,2*n,0,1)),t.s=0,t.clamp()},o.prototype.divRemTo=function(t,e,n){var r=t.abs();if(!(r.t<=0)){var i=this.abs();if(i.t<r.t)return null!=e&&e.fromInt(0),void(null!=n&&this.copyTo(n));null==n&&(n=a());var s=a(),u=this.s,l=t.s,c=this.DB-d(r[r.t-1]);c>0?(r.lShiftTo(c,s),i.lShiftTo(c,n)):(r.copyTo(s),i.copyTo(n));var h=s.t,f=s[h-1];if(0!=f){var p=f*(1<<this.F1)+(h>1?s[h-2]>>this.F2:0),v=this.FV/p,y=(1<<this.F1)/p,_=1<<this.F2,g=n.t,m=g-h,b=null==e?a():e;for(s.dlShiftTo(m,b),n.compareTo(b)>=0&&(n[n.t++]=1,n.subTo(b,n)),o.ONE.dlShiftTo(h,b),b.subTo(s,s);s.t<h;)s[s.t++]=0;for(;--m>=0;){var w=n[--g]==f?this.DM:Math.floor(n[g]*v+(n[g-1]+_)*y);if((n[g]+=s.am(0,w,n,m,0,h))<w)for(s.dlShiftTo(m,b),n.subTo(b,n);n[g]<--w;)n.subTo(b,n)}null!=e&&(n.drShiftTo(h,e),u!=l&&o.ZERO.subTo(e,e)),n.t=h,n.clamp(),c>0&&n.rShiftTo(c,n),u<0&&o.ZERO.subTo(n,n)}}},o.prototype.invDigit=function(){if(this.t<1)return 0;var t=this[0];if(0==(1&t))return 0;var e=3&t;return(e=(e=(e=(e=e*(2-(15&t)*e)&15)*(2-(255&t)*e)&255)*(2-((65535&t)*e&65535))&65535)*(2-t*e%this.DV)%this.DV)>0?this.DV-e:-e},o.prototype.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},o.prototype.exp=function(t,e){if(t>4294967295||t<1)return o.ONE;var n=a(),r=a(),i=e.convert(this),s=d(t)-1;for(i.copyTo(n);--s>=0;)if(e.sqrTo(n,r),(t&1<<s)>0)e.mulTo(r,i,n);else{var u=n;n=r,r=u}return e.revert(n)},o.prototype.toString=function(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)return this.toRadix(t);e=2}var n,r=(1<<e)-1,i=!1,o="",a=this.t,s=this.DB-a*this.DB%e;if(a-- >0)for(s<this.DB&&(n=this[a]>>s)>0&&(i=!0,o=h(n));a>=0;)s<e?(n=(this[a]&(1<<s)-1)<<e-s,n|=this[--a]>>(s+=this.DB-e)):(n=this[a]>>(s-=e)&r,s<=0&&(s+=this.DB,--a)),n>0&&(i=!0),i&&(o+=h(n));return i?o:"0"},o.prototype.negate=function(){var t=a();return o.ZERO.subTo(this,t),t},o.prototype.abs=function(){return this.s<0?this.negate():this},o.prototype.compareTo=function(t){var e=this.s-t.s;if(0!=e)return e;var n=this.t;if(0!=(e=n-t.t))return this.s<0?-e:e;for(;--n>=0;)if(0!=(e=this[n]-t[n]))return e;return 0},o.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+d(this[this.t-1]^this.s&this.DM)},o.prototype.mod=function(t){var e=a();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(o.ZERO)>0&&t.subTo(e,e),e},o.prototype.modPowInt=function(t,e){var n;return n=t<256||e.isEven()?new v(e):new y(e),this.exp(t,n)},o.ZERO=p(0),o.ONE=p(1),T.prototype.convert=k,T.prototype.revert=k,T.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n)},T.prototype.sqrTo=function(t,e){t.squareTo(e)},C.prototype.convert=function(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=a();return t.copyTo(e),this.reduce(e),e},C.prototype.revert=function(t){return t},C.prototype.reduce=function(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)},C.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n),this.reduce(n)},C.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)};var R=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],E=(1<<26)/R[R.length-1];o.prototype.chunkSize=function(t){return Math.floor(Math.LN2*this.DB/Math.log(t))},o.prototype.toRadix=function(t){if(null==t&&(t=10),0==this.signum()||t<2||t>36)return"0";var e=this.chunkSize(t),n=Math.pow(t,e),r=p(n),i=a(),o=a(),s="";for(this.divRemTo(r,i,o);i.signum()>0;)s=(n+o.intValue()).toString(t).substr(1)+s,i.divRemTo(r,i,o);return o.intValue().toString(t)+s},o.prototype.fromRadix=function(t,e){this.fromInt(0),null==e&&(e=10);for(var n=this.chunkSize(e),r=Math.pow(e,n),i=!1,a=0,s=0,u=0;u<t.length;++u){var l=f(t,u);l<0?"-"==t.charAt(u)&&0==this.signum()&&(i=!0):(s=e*s+l,++a>=n&&(this.dMultiply(r),this.dAddOffset(s,0),a=0,s=0))}a>0&&(this.dMultiply(Math.pow(e,a)),this.dAddOffset(s,0)),i&&o.ZERO.subTo(this,this)},o.prototype.fromNumber=function(t,e,n){if("number"==typeof e)if(t<2)this.fromInt(1);else for(this.fromNumber(t,n),this.testBit(t-1)||this.bitwiseTo(o.ONE.shiftLeft(t-1),g,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(o.ONE.shiftLeft(t-1),this);else{var r=new Array,i=7&t;r.length=1+(t>>3),e.nextBytes(r),i>0?r[0]&=(1<<i)-1:r[0]=0,this.fromString(r,256)}},o.prototype.bitwiseTo=function(t,e,n){var r,i,o=Math.min(t.t,this.t);for(r=0;r<o;++r)n[r]=e(this[r],t[r]);if(t.t<this.t){for(i=t.s&this.DM,r=o;r<this.t;++r)n[r]=e(this[r],i);n.t=this.t}else{for(i=this.s&this.DM,r=o;r<t.t;++r)n[r]=e(i,t[r]);n.t=t.t}n.s=e(this.s,t.s),n.clamp()},o.prototype.changeBit=function(t,e){var n=o.ONE.shiftLeft(t);return this.bitwiseTo(n,e,n),n},o.prototype.addTo=function(t,e){for(var n=0,r=0,i=Math.min(t.t,this.t);n<i;)r+=this[n]+t[n],e[n++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r+=t.s;n<this.t;)r+=this[n],e[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<t.t;)r+=t[n],e[n++]=r&this.DM,r>>=this.DB;r+=t.s}e.s=r<0?-1:0,r>0?e[n++]=r:r<-1&&(e[n++]=this.DV+r),e.t=n,e.clamp()},o.prototype.dMultiply=function(t){this[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()},o.prototype.dAddOffset=function(t,e){if(0!=t){for(;this.t<=e;)this[this.t++]=0;for(this[e]+=t;this[e]>=this.DV;)this[e]-=this.DV,++e>=this.t&&(this[this.t++]=0),++this[e]}},o.prototype.multiplyLowerTo=function(t,e,n){var r,i=Math.min(this.t+t.t,e);for(n.s=0,n.t=i;i>0;)n[--i]=0;for(r=n.t-this.t;i<r;++i)n[i+this.t]=this.am(0,t[i],n,i,0,this.t);for(r=Math.min(t.t,e);i<r;++i)this.am(0,t[i],n,i,0,e-i);n.clamp()},o.prototype.multiplyUpperTo=function(t,e,n){--e;var r=n.t=this.t+t.t-e;for(n.s=0;--r>=0;)n[r]=0;for(r=Math.max(e-this.t,0);r<t.t;++r)n[this.t+r-e]=this.am(e-r,t[r],n,0,0,this.t+r-e);n.clamp(),n.drShiftTo(1,n)},o.prototype.modInt=function(t){if(t<=0)return 0;var e=this.DV%t,n=this.s<0?t-1:0;if(this.t>0)if(0==e)n=this[0]%t;else for(var r=this.t-1;r>=0;--r)n=(e*n+this[r])%t;return n},o.prototype.millerRabin=function(t){var e=this.subtract(o.ONE),n=e.getLowestSetBit();if(n<=0)return!1;var r=e.shiftRight(n);(t=t+1>>1)>R.length&&(t=R.length);for(var i=a(),s=0;s<t;++s){i.fromInt(R[Math.floor(Math.random()*R.length)]);var u=i.modPow(r,this);if(0!=u.compareTo(o.ONE)&&0!=u.compareTo(e)){for(var l=1;l++<n&&0!=u.compareTo(e);)if(0==(u=u.modPowInt(2,this)).compareTo(o.ONE))return!1;if(0!=u.compareTo(e))return!1}}return!0},o.prototype.clone=function(){var t=a();return this.copyTo(t),t},o.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},o.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},o.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},o.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},o.prototype.toByteArray=function(){var t=this.t,e=new Array;e[0]=this.s;var n,r=this.DB-t*this.DB%8,i=0;if(t-- >0)for(r<this.DB&&(n=this[t]>>r)!=(this.s&this.DM)>>r&&(e[i++]=n|this.s<<this.DB-r);t>=0;)r<8?(n=(this[t]&(1<<r)-1)<<8-r,n|=this[--t]>>(r+=this.DB-8)):(n=this[t]>>(r-=8)&255,r<=0&&(r+=this.DB,--t)),0!=(128&n)&&(n|=-256),0==i&&(128&this.s)!=(128&n)&&++i,(i>0||n!=this.s)&&(e[i++]=n);return e},o.prototype.equals=function(t){return 0==this.compareTo(t)},o.prototype.min=function(t){return this.compareTo(t)<0?this:t},o.prototype.max=function(t){return this.compareTo(t)>0?this:t},o.prototype.and=function(t){var e=a();return this.bitwiseTo(t,_,e),e},o.prototype.or=function(t){var e=a();return this.bitwiseTo(t,g,e),e},o.prototype.xor=function(t){var e=a();return this.bitwiseTo(t,m,e),e},o.prototype.andNot=function(t){var e=a();return this.bitwiseTo(t,b,e),e},o.prototype.not=function(){for(var t=a(),e=0;e<this.t;++e)t[e]=this.DM&~this[e];return t.t=this.t,t.s=~this.s,t},o.prototype.shiftLeft=function(t){var e=a();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e},o.prototype.shiftRight=function(t){var e=a();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e},o.prototype.getLowestSetBit=function(){for(var t=0;t<this.t;++t)if(0!=this[t])return t*this.DB+w(this[t]);return this.s<0?this.t*this.DB:-1},o.prototype.bitCount=function(){for(var t=0,e=this.s&this.DM,n=0;n<this.t;++n)t+=x(this[n]^e);return t},o.prototype.testBit=function(t){var e=Math.floor(t/this.DB);return e>=this.t?0!=this.s:0!=(this[e]&1<<t%this.DB)},o.prototype.setBit=function(t){return this.changeBit(t,g)},o.prototype.clearBit=function(t){return this.changeBit(t,b)},o.prototype.flipBit=function(t){return this.changeBit(t,m)},o.prototype.add=function(t){var e=a();return this.addTo(t,e),e},o.prototype.subtract=function(t){var e=a();return this.subTo(t,e),e},o.prototype.multiply=function(t){var e=a();return this.multiplyTo(t,e),e},o.prototype.divide=function(t){var e=a();return this.divRemTo(t,e,null),e},o.prototype.remainder=function(t){var e=a();return this.divRemTo(t,null,e),e},o.prototype.divideAndRemainder=function(t){var e=a(),n=a();return this.divRemTo(t,e,n),new Array(e,n)},o.prototype.modPow=function(t,e){var n,r,i=t.bitLength(),o=p(1);if(i<=0)return o;n=i<18?1:i<48?3:i<144?4:i<768?5:6,r=i<8?new v(e):e.isEven()?new C(e):new y(e);var s=new Array,u=3,l=n-1,c=(1<<n)-1;if(s[1]=r.convert(this),n>1){var h=a();for(r.sqrTo(s[1],h);u<=c;)s[u]=a(),r.mulTo(h,s[u-2],s[u]),u+=2}var f,_,g=t.t-1,m=!0,b=a();for(i=d(t[g])-1;g>=0;){for(i>=l?f=t[g]>>i-l&c:(f=(t[g]&(1<<i+1)-1)<<l-i,g>0&&(f|=t[g-1]>>this.DB+i-l)),u=n;0==(1&f);)f>>=1,--u;if((i-=u)<0&&(i+=this.DB,--g),m)s[f].copyTo(o),m=!1;else{for(;u>1;)r.sqrTo(o,b),r.sqrTo(b,o),u-=2;u>0?r.sqrTo(o,b):(_=o,o=b,b=_),r.mulTo(b,s[f],o)}for(;g>=0&&0==(t[g]&1<<i);)r.sqrTo(o,b),_=o,o=b,b=_,--i<0&&(i=this.DB-1,--g)}return r.revert(o)},o.prototype.modInverse=function(t){var e=t.isEven();if(this.isEven()&&e||0==t.signum())return o.ZERO;for(var n=t.clone(),r=this.clone(),i=p(1),a=p(0),s=p(0),u=p(1);0!=n.signum();){for(;n.isEven();)n.rShiftTo(1,n),e?(i.isEven()&&a.isEven()||(i.addTo(this,i),a.subTo(t,a)),i.rShiftTo(1,i)):a.isEven()||a.subTo(t,a),a.rShiftTo(1,a);for(;r.isEven();)r.rShiftTo(1,r),e?(s.isEven()&&u.isEven()||(s.addTo(this,s),u.subTo(t,u)),s.rShiftTo(1,s)):u.isEven()||u.subTo(t,u),u.rShiftTo(1,u);n.compareTo(r)>=0?(n.subTo(r,n),e&&i.subTo(s,i),a.subTo(u,a)):(r.subTo(n,r),e&&s.subTo(i,s),u.subTo(a,u))}return 0!=r.compareTo(o.ONE)?o.ZERO:u.compareTo(t)>=0?u.subtract(t):u.signum()<0?(u.addTo(t,u),u.signum()<0?u.add(t):u):u},o.prototype.pow=function(t){return this.exp(t,new T)},o.prototype.gcd=function(t){var e=this.s<0?this.negate():this.clone(),n=t.s<0?t.negate():t.clone();if(e.compareTo(n)<0){var r=e;e=n,n=r}var i=e.getLowestSetBit(),o=n.getLowestSetBit();if(o<0)return e;for(i<o&&(o=i),o>0&&(e.rShiftTo(o,e),n.rShiftTo(o,n));e.signum()>0;)(i=e.getLowestSetBit())>0&&e.rShiftTo(i,e),(i=n.getLowestSetBit())>0&&n.rShiftTo(i,n),e.compareTo(n)>=0?(e.subTo(n,e),e.rShiftTo(1,e)):(n.subTo(e,n),n.rShiftTo(1,n));return o>0&&n.lShiftTo(o,n),n},o.prototype.isProbablePrime=function(t){var e,n=this.abs();if(1==n.t&&n[0]<=R[R.length-1]){for(e=0;e<R.length;++e)if(n[0]==R[e])return!0;return!1}if(n.isEven())return!1;for(e=1;e<R.length;){for(var r=R[e],i=e+1;i<R.length&&r<E;)r*=R[i++];for(r=n.modInt(r);e<i;)if(r%R[e++]==0)return!1}return n.millerRabin(t)},o.prototype.square=function(){var t=a();return this.squareTo(t),t},e.a=o},function(t,e,n){"use strict";var r=n(242),i=n(244);function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}e.parse=m,e.resolve=function(t,e){return m(t,!1,!0).resolve(e)},e.resolveObject=function(t,e){return t?m(t,!1,!0).resolveObject(e):e},e.format=function(t){i.isString(t)&&(t=m(t));return t instanceof o?t.format():o.prototype.format.call(t)},e.Url=o;var a=/^([a-z0-9.+-]+:)/i,s=/:[0-9]*$/,u=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,l=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),c=["'"].concat(l),h=["%","/","?",";","#"].concat(c),f=["/","?","#"],p=/^[+a-z0-9A-Z_-]{0,63}$/,d=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,v={javascript:!0,"javascript:":!0},y={javascript:!0,"javascript:":!0},_={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},g=n(245);function m(t,e,n){if(t&&i.isObject(t)&&t instanceof o)return t;var r=new o;return r.parse(t,e,n),r}o.prototype.parse=function(t,e,n){if(!i.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var o=t.indexOf("?"),s=-1!==o&&o<t.indexOf("#")?"?":"#",l=t.split(s);l[0]=l[0].replace(/\\/g,"/");var m=t=l.join(s);if(m=m.trim(),!n&&1===t.split("#").length){var b=u.exec(m);if(b)return this.path=m,this.href=m,this.pathname=b[1],b[2]?(this.search=b[2],this.query=e?g.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var w=a.exec(m);if(w){var x=(w=w[0]).toLowerCase();this.protocol=x,m=m.substr(w.length)}if(n||w||m.match(/^\/\/[^@\/]+@[^@\/]+/)){var T="//"===m.substr(0,2);!T||w&&y[w]||(m=m.substr(2),this.slashes=!0)}if(!y[w]&&(T||w&&!_[w])){for(var k,C,R=-1,E=0;E<f.length;E++){-1!==(O=m.indexOf(f[E]))&&(-1===R||O<R)&&(R=O)}-1!==(C=-1===R?m.lastIndexOf("@"):m.lastIndexOf("@",R))&&(k=m.slice(0,C),m=m.slice(C+1),this.auth=decodeURIComponent(k)),R=-1;for(E=0;E<h.length;E++){var O;-1!==(O=m.indexOf(h[E]))&&(-1===R||O<R)&&(R=O)}-1===R&&(R=m.length),this.host=m.slice(0,R),m=m.slice(R),this.parseHost(),this.hostname=this.hostname||"";var A="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!A)for(var S=this.hostname.split(/\./),F=(E=0,S.length);E<F;E++){var I=S[E];if(I&&!I.match(p)){for(var D="",M=0,B=I.length;M<B;M++)I.charCodeAt(M)>127?D+="x":D+=I[M];if(!D.match(p)){var L=S.slice(0,E),P=S.slice(E+1),N=I.match(d);N&&(L.push(N[1]),P.unshift(N[2])),P.length&&(m="/"+P.join(".")+m),this.hostname=L.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),A||(this.hostname=r.toASCII(this.hostname));var U=this.port?":"+this.port:"",z=this.hostname||"";this.host=z+U,this.href+=this.host,A&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==m[0]&&(m="/"+m))}if(!v[x])for(E=0,F=c.length;E<F;E++){var G=c[E];if(-1!==m.indexOf(G)){var j=encodeURIComponent(G);j===G&&(j=escape(G)),m=m.split(G).join(j)}}var V=m.indexOf("#");-1!==V&&(this.hash=m.substr(V),m=m.slice(0,V));var W=m.indexOf("?");if(-1!==W?(this.search=m.substr(W),this.query=m.substr(W+1),e&&(this.query=g.parse(this.query)),m=m.slice(0,W)):e&&(this.search="",this.query={}),m&&(this.pathname=m),_[x]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){U=this.pathname||"";var H=this.search||"";this.path=U+H}return this.href=this.format(),this},o.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",r=this.hash||"",o=!1,a="";this.host?o=t+this.host:this.hostname&&(o=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&i.isObject(this.query)&&Object.keys(this.query).length&&(a=g.stringify(this.query));var s=this.search||a&&"?"+a||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||_[e])&&!1!==o?(o="//"+(o||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):o||(o=""),r&&"#"!==r.charAt(0)&&(r="#"+r),s&&"?"!==s.charAt(0)&&(s="?"+s),e+o+(n=n.replace(/[?#]/g,function(t){return encodeURIComponent(t)}))+(s=s.replace("#","%23"))+r},o.prototype.resolve=function(t){return this.resolveObject(m(t,!1,!0)).format()},o.prototype.resolveObject=function(t){if(i.isString(t)){var e=new o;e.parse(t,!1,!0),t=e}for(var n=new o,r=Object.keys(this),a=0;a<r.length;a++){var s=r[a];n[s]=this[s]}if(n.hash=t.hash,""===t.href)return n.href=n.format(),n;if(t.slashes&&!t.protocol){for(var u=Object.keys(t),l=0;l<u.length;l++){var c=u[l];"protocol"!==c&&(n[c]=t[c])}return _[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(t.protocol&&t.protocol!==n.protocol){if(!_[t.protocol]){for(var h=Object.keys(t),f=0;f<h.length;f++){var p=h[f];n[p]=t[p]}return n.href=n.format(),n}if(n.protocol=t.protocol,t.host||y[t.protocol])n.pathname=t.pathname;else{for(var d=(t.pathname||"").split("/");d.length&&!(t.host=d.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),n.pathname=d.join("/")}if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var v=n.pathname||"",g=n.search||"";n.path=v+g}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var m=n.pathname&&"/"===n.pathname.charAt(0),b=t.host||t.pathname&&"/"===t.pathname.charAt(0),w=b||m||n.host&&t.pathname,x=w,T=n.pathname&&n.pathname.split("/")||[],k=(d=t.pathname&&t.pathname.split("/")||[],n.protocol&&!_[n.protocol]);if(k&&(n.hostname="",n.port=null,n.host&&(""===T[0]?T[0]=n.host:T.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===d[0]?d[0]=t.host:d.unshift(t.host)),t.host=null),w=w&&(""===d[0]||""===T[0])),b)n.host=t.host||""===t.host?t.host:n.host,n.hostname=t.hostname||""===t.hostname?t.hostname:n.hostname,n.search=t.search,n.query=t.query,T=d;else if(d.length)T||(T=[]),T.pop(),T=T.concat(d),n.search=t.search,n.query=t.query;else if(!i.isNullOrUndefined(t.search)){if(k)n.hostname=n.host=T.shift(),(A=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=A.shift(),n.host=n.hostname=A.shift());return n.search=t.search,n.query=t.query,i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!T.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var C=T.slice(-1)[0],R=(n.host||t.host||T.length>1)&&("."===C||".."===C)||""===C,E=0,O=T.length;O>=0;O--)"."===(C=T[O])?T.splice(O,1):".."===C?(T.splice(O,1),E++):E&&(T.splice(O,1),E--);if(!w&&!x)for(;E--;E)T.unshift("..");!w||""===T[0]||T[0]&&"/"===T[0].charAt(0)||T.unshift(""),R&&"/"!==T.join("/").substr(-1)&&T.push("");var A,S=""===T[0]||T[0]&&"/"===T[0].charAt(0);k&&(n.hostname=n.host=S?"":T.length?T.shift():"",(A=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=A.shift(),n.host=n.hostname=A.shift()));return(w=w||n.host&&T.length)&&!S&&T.unshift(""),T.length?n.pathname=T.join("/"):(n.pathname=null,n.path=null),i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n},o.prototype.parseHost=function(){var t=this.host,e=s.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,e,n){(function(t,r){var i;!function(o){"object"==typeof e&&e&&e.nodeType,"object"==typeof t&&t&&t.nodeType;var a="object"==typeof r&&r;a.global!==a&&a.window!==a&&a.self;var s,u=2147483647,l=36,c=1,h=26,f=38,p=700,d=72,v=128,y="-",_=/^xn--/,g=/[^\x20-\x7E]/,m=/[\x2E\u3002\uFF0E\uFF61]/g,b={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},w=l-c,x=Math.floor,T=String.fromCharCode;function k(t){throw new RangeError(b[t])}function C(t,e){for(var n=t.length,r=[];n--;)r[n]=e(t[n]);return r}function R(t,e){var n=t.split("@"),r="";return n.length>1&&(r=n[0]+"@",t=n[1]),r+C((t=t.replace(m,".")).split("."),e).join(".")}function E(t){for(var e,n,r=[],i=0,o=t.length;i<o;)(e=t.charCodeAt(i++))>=55296&&e<=56319&&i<o?56320==(64512&(n=t.charCodeAt(i++)))?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),i--):r.push(e);return r}function O(t){return C(t,function(t){var e="";return t>65535&&(e+=T((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=T(t)}).join("")}function A(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function S(t,e,n){var r=0;for(t=n?x(t/p):t>>1,t+=x(t/e);t>w*h>>1;r+=l)t=x(t/w);return x(r+(w+1)*t/(t+f))}function F(t){var e,n,r,i,o,a,s,f,p,_,g,m=[],b=t.length,w=0,T=v,C=d;for((n=t.lastIndexOf(y))<0&&(n=0),r=0;r<n;++r)t.charCodeAt(r)>=128&&k("not-basic"),m.push(t.charCodeAt(r));for(i=n>0?n+1:0;i<b;){for(o=w,a=1,s=l;i>=b&&k("invalid-input"),((f=(g=t.charCodeAt(i++))-48<10?g-22:g-65<26?g-65:g-97<26?g-97:l)>=l||f>x((u-w)/a))&&k("overflow"),w+=f*a,!(f<(p=s<=C?c:s>=C+h?h:s-C));s+=l)a>x(u/(_=l-p))&&k("overflow"),a*=_;C=S(w-o,e=m.length+1,0==o),x(w/e)>u-T&&k("overflow"),T+=x(w/e),w%=e,m.splice(w++,0,T)}return O(m)}function I(t){var e,n,r,i,o,a,s,f,p,_,g,m,b,w,C,R=[];for(m=(t=E(t)).length,e=v,n=0,o=d,a=0;a<m;++a)(g=t[a])<128&&R.push(T(g));for(r=i=R.length,i&&R.push(y);r<m;){for(s=u,a=0;a<m;++a)(g=t[a])>=e&&g<s&&(s=g);for(s-e>x((u-n)/(b=r+1))&&k("overflow"),n+=(s-e)*b,e=s,a=0;a<m;++a)if((g=t[a])<e&&++n>u&&k("overflow"),g==e){for(f=n,p=l;!(f<(_=p<=o?c:p>=o+h?h:p-o));p+=l)C=f-_,w=l-_,R.push(T(A(_+C%w,0))),f=x(C/w);R.push(T(A(f,0))),o=S(n,b,r==i),n=0,++r}++n,++e}return R.join("")}s={version:"1.4.1",ucs2:{decode:E,encode:O},decode:F,encode:I,toASCII:function(t){return R(t,function(t){return g.test(t)?"xn--"+I(t):t})},toUnicode:function(t){return R(t,function(t){return _.test(t)?F(t.slice(4).toLowerCase()):t})}},void 0===(i=function(){return s}.call(e,n,e,t))||(t.exports=i)}()}).call(e,n(243)(t),n(49))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){"use strict";t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},function(t,e,n){"use strict";e.decode=e.parse=n(246),e.encode=e.stringify=n(247)},function(t,e,n){"use strict";function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,n,o){e=e||"&",n=n||"=";var a={};if("string"!=typeof t||0===t.length)return a;var s=/\+/g;t=t.split(e);var u=1e3;o&&"number"==typeof o.maxKeys&&(u=o.maxKeys);var l=t.length;u>0&&l>u&&(l=u);for(var c=0;c<l;++c){var h,f,p,d,v=t[c].replace(s,"%20"),y=v.indexOf(n);y>=0?(h=v.substr(0,y),f=v.substr(y+1)):(h=v,f=""),p=decodeURIComponent(h),d=decodeURIComponent(f),r(a,p)?i(a[p])?a[p].push(d):a[p]=[a[p],d]:a[p]=d}return a};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},function(t,e,n){"use strict";var r=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,n,s){return e=e||"&",n=n||"=",null===t&&(t=void 0),"object"==typeof t?o(a(t),function(a){var s=encodeURIComponent(r(a))+n;return i(t[a])?o(t[a],function(t){return s+encodeURIComponent(r(t))}).join(e):s+encodeURIComponent(r(t[a]))}).join(e):s?encodeURIComponent(r(s))+n+encodeURIComponent(r(t)):""};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function o(t,e){if(t.map)return t.map(e);for(var n=[],r=0;r<t.length;r++)n.push(e(t[r],r));return n}var a=Object.keys||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e}},function(t,e,n){"use strict";function r(t){var e=8,n=0;function r(t,e){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}function i(t,e){return t>>>e|t<<32-e}function o(t,e){return t>>>e}function a(t,e,n){return t&e^~t&n}function s(t,e,n){return t&e^t&n^e&n}function u(t){return i(t,2)^i(t,13)^i(t,22)}function l(t){return i(t,6)^i(t,11)^i(t,25)}function c(t){return i(t,7)^i(t,18)^o(t,3)}return function(t){for(var e=n?"0123456789ABCDEF":"0123456789abcdef",r="",i=0;i<4*t.length;i++)r+=e.charAt(t[i>>2]>>8*(3-i%4)+4&15)+e.charAt(t[i>>2]>>8*(3-i%4)&15);return r}(function(t,e){var n,h,f,p,d,v,y,_,g,m,b,w=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),x=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),T=new Array(64);t[e>>5]|=128<<24-e%32,t[15+(e+64>>9<<4)]=e;for(var k=0;k<t.length;k+=16){n=x[0],h=x[1],f=x[2],p=x[3],d=x[4],v=x[5],y=x[6],_=x[7];for(var C=0;C<64;C++)T[C]=C<16?t[C+k]:r(r(r(i(b=T[C-2],17)^i(b,19)^o(b,10),T[C-7]),c(T[C-15])),T[C-16]),g=r(r(r(r(_,l(d)),a(d,v,y)),w[C]),T[C]),m=r(u(n),s(n,h,f)),_=y,y=v,v=d,d=r(p,g),p=f,f=h,h=n,n=r(g,m);x[0]=r(n,x[0]),x[1]=r(h,x[1]),x[2]=r(f,x[2]),x[3]=r(p,x[3]),x[4]=r(d,x[4]),x[5]=r(v,x[5]),x[6]=r(y,x[6]),x[7]=r(_,x[7])}return x}(function(t){for(var n=Array(),r=(1<<e)-1,i=0;i<t.length*e;i+=e)n[i>>5]|=(t.charCodeAt(i/e)&r)<<24-i%32;return n}(t=function(t){t=t.replace(/\r\n/g,"\n");for(var e="",n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e+=String.fromCharCode(r):r>127&&r<2048?(e+=String.fromCharCode(r>>6|192),e+=String.fromCharCode(63&r|128)):(e+=String.fromCharCode(r>>12|224),e+=String.fromCharCode(r>>6&63|128),e+=String.fromCharCode(63&r|128))}return e}(t)),t.length*e))}n.d(e,"a",function(){return r})},function(t,e,n){"use strict";(function(t){n.d(e,"b",function(){return i}),n.d(e,"a",function(){return o});for(var r="undefined"==typeof window?t:window,i=r.requestAnimationFrame,o=r.cancelAnimationFrame,a=0,s=["ms","moz","webkit","o"],u=0;u<s.length&&!i;++u)i=r[s[u]+"RequestAnimationFrame"],o=r[s[u]+"CancelAnimationFrame"]||r[s[u]+"CancelRequestAnimationFrame"];i&&(i=i.bind(r)),o&&(o=o.bind(r)),i||(i=function(t,e){var n=(new Date).getTime(),r=Math.max(0,16-(n-a)),i=setTimeout(function(){t(n+r)},r);return a=n+r,i}),o||(o=function(t){clearTimeout(t)})}).call(e,n(49))},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var a=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=e,this.y=n,this.z=r,void 0===this.x&&(this.x=0),void 0===this.y&&(this.y=0),void 0===this.z&&(this.z=0)}return o(t,[{key:"set",value:function(t,e,n){return this.x=t,this.y=e,this.z=n,this}},{key:"clone",value:function(){return new t(this.x,this.y,this.z)}},{key:"copy",value:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}},{key:"clamp",value:function(e,n){var r=null!==e&&void 0!==e,i=null!==n&&void 0!==n;return e instanceof t||!r||(e=new t(e,e,e)),n instanceof t||!i||(n=new t(n,n,n)),r&&(this.x=Math.max(e.x,this.x),this.y=Math.max(e.y,this.y),this.z=Math.max(e.z,this.z)),i&&(this.x=Math.min(n.x,this.x),this.y=Math.min(n.y,this.y),this.z=Math.min(n.z,this.z)),this}},{key:"divide",value:function(e){return e instanceof t?(this.x/=e.x,this.y/=e.y,this.z/=e.z):(this.x/=e,this.y/=e,this.z/=e),this}},{key:"subtract",value:function(e){return e instanceof t?(this.x-=e.x,this.y-=e.y,this.z-=e.z):(this.x-=e,this.y-=e,this.z-=e),this}},{key:"multiply",value:function(e){return e instanceof t?(this.x*=e.x,this.y*=e.y,this.z*=e.z):(this.x*=e,this.y*=e,this.z*=e),this}},{key:"add",value:function(e){return e instanceof t?(this.x+=e.x,this.y+=e.y,this.z+=e.z):(this.x+=e,this.y+=e,this.z+=e),this}},{key:"equals",value:function(e){return e instanceof t?e.x===this.x&&e.y===this.y&&e.z===this.z:e===this.x&&e===this.y&&e===this.z}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}},{key:"fract",value:function(){return this.x=this.x%1,this.y=this.y%1,this.z=this.z%1,this}},{key:"toInt",value:function(){return this.x=0|this.x,this.y=0|this.y,this.z=0|this.z,this}},{key:"abs",value:function(){return this.x=Math.abs(this.x),this.y=Math.abs(this.y),this.z=Math.abs(this.z),this}},{key:"len",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"min",value:function(){return Math.min(Math.min(this.x,this.y),this.z)}},{key:"max",value:function(){return Math.max(Math.max(this.x,this.y),this.z)}},{key:"toObject",value:function(){return{x:this.x,y:this.y,z:this.z}}},{key:"toString",value:function(){return"Vector3({ x: "+this.x+", y: "+this.y+", z: "+this.z+" })"}},{key:"roundDecimal",value:function(t){return this.x=parseFloat(this.x.toFixed(t)),this.y=parseFloat(this.y.toFixed(t)),this.z=parseFloat(this.z.toFixed(t)),this}}],[{key:"fromObject",value:function(e){return new t(e.x,e.y,e.z)}},{key:"NULL",get:function(){return new t(0,0,0)}}]),t}();e.a=a},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=n(31),a=n(26),s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var u=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new o.a(0,0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new o.a(1,1),r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new o.a(2,-1),i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new o.a(2,0);!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._p0=e.clone(),this._p1=n.clone(),this._p2=r.clone(),this._p3=i.clone(),this._segments=[],this._length=-1,this._sample=[]}return s(t,[{key:"set",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new o.a(0,0),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new o.a(1,1),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new o.a(2,1),r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new o.a(2,0);this._p0=t.clone(),this._p1=e.clone(),this._p2=n.clone(),this._p3=r.clone()}},{key:"getLength",value:function(){return this._length}},{key:"calculateSegments",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,e=0,n=0,r=[],i=1/t,o=this._p0.clone(),a=1;a<=t;a++){var s=[];s.push({t:e,s:n,point:o}),e+=i,e=Math.min(e,1);var u=this.evalAt(e);n+=u.clone().subtract(o).len(),s.push({t:e,s:n,point:u}),r.push(s),o=u}return this._segments=r,this._length=n,n}},{key:"evalAt",value:function(t){t=this.normalizeParameter(t);var e=this._p0.clone().multiply(Math.pow(1-t,3)),n=this._p1.clone().multiply(3*(1-t)*(1-t)*t),r=this._p2.clone().multiply(3*(1-t)*t*t),i=this._p3.clone().multiply(t*t*t);return e.add(n).add(r).add(i)}},{key:"isInSegment",value:function(t,e){return(t=this.normalizeArcLength(t))>=e[0].s&&t<=e[1].s}},{key:"getArcLengthSegment",value:function(t){t=this.normalizeArcLength(t);for(var e=0;e<this._segments.length;e++){var n=this._segments[e];if(this.isInSegment(t,n))return n}return null}},{key:"normalizeArcLength",value:function(t){return Math.max(Math.min(this._length,t),0)}},{key:"normalizeParameter",value:function(t){return Math.max(Math.min(1,t),0)}},{key:"getParameterForArcLength",value:function(t){var e=this.normalizeArcLength(t),n=this.getArcLengthSegment(e);if(!n)return a.a.warn("CubicBezierCurve#getParameterForArcLength","Segment not found."),-1;var r=(e-n[1].s)/(n[0].s-n[1].s);return r*n[0].t+(1-r)*n[1].t}},{key:"evalAtArcLength",value:function(t){return this.evalAt(this.getParameterForArcLength(t))}},{key:"approximateAtArcLength",value:function(t){var e=this.normalizeArcLength(t),n=this.getArcLengthSegment(e);if(!n)return-1;var r=(e-n[1].s)/(n[0].s-n[1].s);return n[0].point.clone().multiply(r).add(n[1].point.clone().multiply(1-r))}},{key:"parameterSample",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,e=1/t,n=[],r=0,i=0;i<=t+1;i++)n.push(this.evalAt(r)),r+=e;return this._sample=n,[].concat(n)}},{key:"arcLengthApproxSample",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this._length/t,i=[],o=0,a=e?1:0;a<t+1;a++)i.push(this.approximateAtArcLength(o)),o+=r;return n&&i.pop(),this._sample=i,[].concat(i)}}]),t}();e.a=u},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(1),c=n.n(l),h=n(41),f=n(33),p=n(31),d=n(140),v=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var y=h.Constants.OptionType,_=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||c()(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=u()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(a.a?a()(t,e):t.__proto__=e)}(e,d["a"]),v(e,[{key:"_getRotation",value:function(){var t=0;switch(this.getTags().Orientation){case 7:case 8:t=-90;break;case 3:case 4:t=-180;break;case 5:case 6:t=90}return t}},{key:"_getFlipVertically",value:function(){var t=this.getTags().Orientation;return-1!==[5,7].indexOf(t)}},{key:"_getFlipHorizontally",value:function(){var t=this.getTags().Orientation;return-1!==[2,4].indexOf(t)}},{key:"_getFinalOptions",value:function(){return{rotation:this._getRotation(),flipVertically:this._getFlipVertically(),flipHorizontally:this._getFlipHorizontally()}}},{key:"_render",value:function(t){var e=this._getFinalOptions(),n=e.rotation%360*(Math.PI/180);this._sprite.setScale(e.flipHorizontally?-1:1,e.flipVertically?-1:1),this._sprite.setRotation(n),this._sprite.setAnchor(.5,.5),this._sprite.updateTransform();var r=this._sprite.getBounds();return this._renderTexture.resizeTo(new p.a(r.width,r.height)),this._sprite.setPosition(this._renderTexture.getDimensions().divide(2)),this._renderTexture.render(this._container),f.a.resolve()}},{key:"getNewDimensions",value:function(t){var e=this._getFinalOptions();return t=t.clone(),e.rotation%180&&t.flip(),t}},{key:"applyTo",value:function(t){var e=this._getFinalOptions(),n=h.Utils.createCanvas();90===Math.abs(e.rotation%180)?(n.width=t.height,n.height=t.width):(n.width=t.width,n.height=t.height);var r=n.getContext("2d"),i=e.rotation*Math.PI/180,o=.5*(n.width-t.width),a=.5*(n.height-t.height);return r.translate(o,a),r.translate(.5*t.width,.5*t.height),r.rotate(i),r.translate(-.5*t.width,-.5*t.height),e.flipVertically&&(r.translate(0,t.height),r.scale(1,-1)),e.flipHorizontally&&(r.translate(t.width,0),r.scale(-1,1)),r.drawImage(t,0,0),n}}]),e}();_.identifier="exif-orientation",_.prototype.availableOptions={tags:{type:y.OBJECT,default:{}}},e.a=_},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=n(41),a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var s=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._version=e,this._check()}return a(t,[{key:"_check",value:function(){var t=this;if("undefined"==typeof document)return o.Log.info(this.constructor.name,"Not in browser environment. Version check skipped.");var e=this;window.imglySDKVersionCallback=function(n){n.outdated&&o.Log.warn(t.constructor.name,"Your Version "+e._version+" is outdated. Current version is "+n.version+".")};var n=document.createElement("script");n.src="https://www.photoeditorsdk.com/version.json?sdk=html5&jsoncallback=imglySDKVersionCallback&version="+this._version,n.async=!0,document.getElementsByTagName("head")[0].appendChild(n)}}]),t}();e.a=s},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=n(102),a=n(103),s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var u=a.a.MARKERS,l=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._buf=e,this._stream=new o.a(this._buf),this._stream.setHead(0)}return s(t,[{key:"isValid",value:function(){if(this._stream.setHead(0),this._stream.readInt16()!==u.APP0)return!1;if(!(this._stream.readInt16()>=16))return!1;var t=this._stream.readString(4),e=this._stream.readInt8();return"JFIF"===t&&0===e}},{key:"setUnitDensity",value:function(t){this._stream.setHead(11),this._stream.writeInt8(t)}},{key:"setDensityX",value:function(t){this._stream.setHead(12),this._stream.writeInt16(t)}},{key:"setDensityY",value:function(t){this._stream.setHead(14),this._stream.writeInt16(t)}},{key:"getUnitDensity",value:function(){return this._stream.setHead(11),this._stream.readInt8()}},{key:"getDensityX",value:function(){return this._stream.setHead(12),this._stream.readInt16()}},{key:"getDensityY",value:function(){return this._stream.setHead(14),this._stream.readInt16()}},{key:"getBuffer",value:function(){return this._buf}}]),t}();e.a=l},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=n(102),a=n(103),s=n(22),u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var l=s.a.invariant,c=a.a.MARKERS,h=a.a.EXIF_TAGS,f=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._buf=e,this._stream=new o.a(this._buf),this._stream.setHead(0),this._parse()}return u(t,[{key:"isValid",value:function(){return this._stream.setHead(0),this._stream.readInt16()===c.EXIF&&(this._stream.readInt16()>0&&"Exif"===this._stream.readString(4))}},{key:"_parse",value:function(){if(this.isValid()){this._stream.setHead(10);var t=this._stream.getHead(),e=!1,n=this._stream.readInt16();18761===n?e=!1:19789===n?e=!0:l(!1,"Invalid TIFF data: No endian type found"),l(42===this._stream.readInt16(!e),"Invalid TIFF data: No 0x002A");var r=this._stream.readInt32(!e);l(r>=8,"Invalid TIFF data: First IFD offset < 8");var i=t+r,o=this._readTags(this._stream,t,i,e);this._tags=o.tags,this._tagData=o.tagData}}},{key:"getTags",value:function(){return this._tags}},{key:"getTagData",value:function(){return this._tagData}},{key:"setOrientation",value:function(t){if(this._tagData.Orientation){var e=this._tagData.Orientation.entryOffset;this._stream.setHead(e+8),this._stream.writeInt16(t)}}},{key:"_readTags",value:function(t,e,n,r){t.setHead(n);for(var i=t.readInt16(!r),o={},a=[],s=0;s<i;s++){var u=n+12*s+2;t.setHead(u);var l=t.readInt16(!r),c=void 0,f=void 0,p=void 0;if(h[l]){l=h[l],c=t.readInt16(!r),f=t.readInt32(!r),p=t.readInt32(!r)+e;var d=null;switch(c){case 1:case 7:if(1===f)d=t.readInt8(!r);else{d=[];for(var v=0;v<f;v++)d.push(t.readInt8(!r))}break;case 2:t.setHead(f>4?p:u+8),d=t.readString(f);break;case 3:if(t.setHead(f>2?p:u+8),1===f)d=t.readInt16(!r);else{d=[];for(var y=0;y<f;y++)d.push(t.readInt16(!r))}break;case 4:case 9:if(t.setHead(f>1?p:u+8),1===f)d=t.readInt32(!r);else{d=[];for(var _=0;_<f;_++)d.push(t.readInt32(!r))}break;case 5:case 10:if(t.setHead(p),1===f){d=t.readInt32(!r)/t.readInt32(!r)}else{d=[];for(var g=0;g<f;g++){var m=t.readInt32(!r)/t.readInt32(!r);d.push(m)}}}o[l]=d,a[l]={value:d,numValues:f,entryOffset:u,valueOffset:p,type:c}}}return{tags:o,tagData:a}}},{key:"getBuffer",value:function(){return this._buf}}]),t}();e.a=f},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(30),c=n.n(l),h=n(1),f=n.n(h),p=n(32),d=n(69),v=n(22),y=n(75),_=n(101),g=n(55),m=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var b=function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||f()(e)).call(this,n));return r._sdk=t,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=u()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(a.a?a()(t,e):t.__proto__=e)}(e,g["a"]),m(e,[{key:"export",value:function(){var t=this,e=this._options.imageFormat;return this.validateSettings().then(function(){return t._prepareSDK()}).then(function(e){var n=t._sdk.getRenderer(),r=n.getCanvas();return n.isOfType(p.RendererType.WEBGL)&&(r=t._createCanvasFromTexture(e)),t._encodeImageFormat(r)}).then(function(n){return t._restoreExifMetadata(n,e)}).then(function(e){return t._restoreSDK().then(function(){return e})})}},{key:"_restoreExifMetadata",value:function(t,e,n){if(e===p.ImageFormat.JPEG){var r=this._sdk.getImage(),i=_.a.isJPEG(r.src),o=_.a.isJPEG(t);if(i&&o){var a=this._sdk.getExif();a&&(t=a.restoreSegments(t))}}return c.a.resolve(t)}},{key:"_encodeAsDataURL",value:function(t,e,n){return v.a.isBrowser?c.a.resolve(t.toDataURL(e,n)):new c.a(function(r,i){t.toDataURL(e,n,function(t,e){t?i(t):r(e)})})}},{key:"_encodeAsHTMLImage",value:function(t,e,n){return this._encodeAsDataURL(t).then(function(t){var e=new y.a;return e.src=t,c.a.resolve(e)})}},{key:"_encodeAsBuffer",value:function(t,e,n){return v.a.isNode?e===p.ImageFormat.PNG||e===p.ImageFormat.JPEG?c.a.resolve(t.toBuffer(e,{quality:n})):c.a.reject(new Error("Unsupported imageFormat: "+e)):c.a.reject(new Error("Unsupported platform for RenderType"))}},{key:"_encodeAsMSBlob",value:function(t,e,n){return c.a.resolve(t.msToBlob())}},{key:"_encodeAsBLOB",value:function(t,e,n){return new c.a(function(r,i){t.toBlob(function(t){r(t)},e,n)})}},{key:"_encodeImageFormat",value:function(t){var e=this._options,n=e.renderType,r=e.imageFormat,i=e.quality;switch(n){case p.RenderType.IMAGE:return this._encodeAsHTMLImage(t,r,i);case p.RenderType.DATAURL:return this._encodeAsDataURL(t,r,i);case p.RenderType.BUFFER:return this._encodeAsBuffer(t,r,i);case p.RenderType.MSBLOB:return this._encodeAsMSBlob(t,r,i);case p.RenderType.BLOB:return this._encodeAsBLOB(t,r,i)}return c.a.reject(new Error("Unsupported RenderType: "+n+"!"))}},{key:"_prepareSDK",value:function(){var t=this._sdk.getRenderer();this._sdkSettings={dimensions:t.getDimensions().clone(),textureQuality:this._sdk.getTextureQuality(),pixelRatio:this._sdk.getPixelRatio(),renderMode:this._sdk.getRenderMode()},this._sdk.setRenderMode("export"),this._sdk.setTextureQuality(1);var e=t.isOfType(p.RendererType.CANVAS);t.setPixelRatio(1),t.resizeTo(this._sdk.getFinalDimensions(),e),this._sdk.setAllOperationsToDirty(!0);var n=this._sdk.getOperationsStack();return n.forEach(function(t){t.disposeRenderTextures()}),n.disableCache(),this._sdk.render()}},{key:"_restoreSDK",value:function(){this._sdk.getOperationsStack().enableCache(),this._sdk.setRenderMode(this._sdkSettings.renderMode);var t=this._sdk.getRenderer(),e=t.isOfType(p.RendererType.CANVAS);return t.setPixelRatio(this._sdkSettings.pixelRatio),t.resizeTo(this._sdkSettings.dimensions,e),this._sdk.setTextureQuality(this._sdkSettings.textureQuality),this._sdk.setAllOperationsToDirty(!0),this._sdk.render()}},{key:"_createCanvasFromTexture",value:function(t){var e=this._sdk.getRenderer(),n=this._sdk.getFinalDimensions(),r=this._sdk.getRenderer().getContext(),i=r.createFramebuffer();r.bindFramebuffer(r.FRAMEBUFFER,i);var o=t.getBaseTexture().getGLTextureForRenderer(e);r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,o,0);var a=new Uint8Array(n.x*n.y*4);r.readPixels(0,0,n.x,n.y,r.RGBA,r.UNSIGNED_BYTE,a);var s=void 0;if(this._checkPixelsForTransparency(a)){var u=new d.a.Sprite(t);u.setFilters([new d.a.Filters.UnpremultiplyFilter]);var l=new d.a.Container;l.addChild(u),(s=new d.a.RenderTexture(e,n.x,n.y)).render(l);var c=s.getBaseTexture().getGLTextureForRenderer(e);r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,c,0),r.readPixels(0,0,n.x,n.y,r.RGBA,r.UNSIGNED_BYTE,a),e.setRenderTarget(),s.dispose()}var h=v.a.createCanvas();h.width=n.x,h.height=n.y;var f=h.getContext("2d"),p=f.createImageData(n.x,n.y);return p.data.set(a),f.putImageData(p,0,0),r.deleteFramebuffer(i),h}},{key:"_checkPixelsForTransparency",value:function(t){for(var e=this._sdk.getFinalDimensions(),n=e.x*e.y*4,r=3;r<n;r+=4)if(255!==t[r])return!0;return!1}}]),e}();b.prototype.availableOptions={renderType:{type:p.OptionType.STRING,available:v.a.values(p.RenderType),default:p.RenderType.IMAGE},imageFormat:{type:p.OptionType.STRING,available:v.a.values(p.ImageFormat),default:p.ImageFormat.PNG},quality:{type:p.OptionType.NUMBER,default:.8}},e.a=b},function(t,e){String.prototype.endsWith||(String.prototype.endsWith=function(t,e){return(void 0===e||e>this.length)&&(e=this.length),this.substring(e-t.length,e)===t})},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return o(t,null,[{key:"current",value:function(){return"production"}},{key:"isTest",value:function(){return!1}},{key:"isDevelopment",value:function(){return!1}},{key:"isProduction",value:function(){return!0}}]),t}();e.a=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(260);n.d(e,"ImageLoader",function(){return r.a});var i=n(137);n.d(e,"JSONLoader",function(){return i.a})},function(t,e,n){"use strict";var r=n(71),i=n.n(r),o=n(72),a=n.n(o),s=n(30),u=n.n(s),l=function(){return function(t,e){if(Array.isArray(t))return t;if(i()(Object(t)))return function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var s,u=a()(t);!(r=(s=u.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&u.return&&u.return()}finally{if(i)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();e.a={load:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{cors:!0,value:"anonymous"};return(t.substr(0,5),u.a.resolve([t,t])).then(function(t){var r=l(t,2),i=r[0],o=r[1];return e._createAndLoadImage(i,o,n)})},_createAndLoadImage:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{cors:!0,value:"anonymous"};return new u.a(function(t,i){var o=new u.a(function(t,n){var i=new window.Image;i.addEventListener("load",function(){t(i)}),i.addEventListener("error",function(){n(new Error("Failed to load image at "+e))}),r.cors&&(i.crossOrigin=r.value),i.src=e}),a=new u.a(function(t,i){n._loadAsDataURL(e,r).then(function(e){var n=new window.Image;n.addEventListener("load",function(){t(n)}),n.src=e,n.rawSource=e}).catch(function(e){o.then(function(e){return t(e)})})});return e.endsWith(".svg")?o.then(function(e){return t(e)}):a.then(function(e){return t(e)})})},_loadAsDataURL:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{cors:!0,value:"anonymus"};return new u.a(function(n,r){var i=new XMLHttpRequest;i.onload=function(){var t=new FileReader;t.onloadend=function(){t.error&&r(t.error),n(t.result)},t.readAsDataURL(i.response)},i.open("GET",t),i.responseType="blob",i.withCredentials=e.cors&&"use-credentials"===e.value,i.send()})},loadXHR:function(t,e){return new u.a(function(n,r){var i=void 0;window.XDomainRequest?(i=new window.XDomainRequest,e&&i.overrideMimeType(e),i.onload=function(){n(i)},i.onerror=function(t){r(t)}):window.XMLHttpRequest&&(i=new window.XMLHttpRequest,e&&i.overrideMimeType(e),i.onreadystatechange=function(t){4===i.readyState&&(200===i.status?n(i):r(new Error("HTTP Status "+i.status)))}),i.open("GET",t,!0),i.send()})}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(4),i=n.n(r),o=n(262),a=n(268),s=n(270),u=n(336),l=n(337),c=n(341),h=n(344),f=n(347),p=n(348),d=n(349),v=n(352),y=n(358),_=n(388),g=n(390),m=[o.a,a.a,s.a,u.a,l.a,c.a,h.a,f.a,p.a,d.a,v.a,y.a,_.a,g.a];i.a.AllOperations=m,e.default=m},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=n(5),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),h=n(1),f=n.n(h),p=n(4),d=n.n(p),v=n(144),y=n(264),_=n(266),g=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var m=p.Math.ColorMatrix,b=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(t=e.__proto__||f()(e)).call.apply(t,[this].concat(r)));return o._clarityFilter=new y.a,o._temperatureFilter=new _.a,o._filter=new v.a,o._sprite.setFilters([o._clarityFilter,o._temperatureFilter,o._filter]),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=c()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(u.a?u()(t,e):t.__proto__=e)}(e,p["Operation"]),g(e,[{key:"_render",value:function(t){var e=t.getDimensions();e.x=1/e.x,e.y=1/e.y;var n=new m;n.multiply(m.createSaturationMatrix(-.3*this._options.clarity+1)),n.multiply(m.createContrastMatrix(.1*this._options.clarity+1)),this._clarityFilter.set({clarity:this._options.clarity,pixelDimension:e,colorMatrix:n,colorOffset:n.getOffsets()}),this._temperatureFilter.set({temperature:this._options.temperature});var r=new m;r.multiply(m.createExposureMatrix(this._options.exposure)),r.multiply(m.createSaturationMatrix(this._options.saturation+1)),r.multiply(m.createContrastMatrix((this._options.contrast>0?2*this._options.contrast:this._options.contrast)+1)),r.multiply(m.createBrightnessMatrix(this._options.brightness)),this._filter.set({gamma:this._options.gamma,shadows:this._options.shadows,highlights:this._options.highlights,whites:this._options.whites,blacks:this._options.blacks,colorMatrix:r,colorOffset:r.getOffsets()});var i=[];return 0!==this._options.clarity&&i.push(this._clarityFilter),0!==this._options.temperature&&i.push(this._temperatureFilter),i.push(this._filter),this._sprite.setFilters(i),this._renderTexture.render(this._container),p.Promise.resolve()}},{key:"dispose",value:function(){(function t(e,n,r){null===e&&(e=Function.prototype);var i=a()(e,n);if(void 0===i){var o=f()(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0})(e.prototype.__proto__||f()(e.prototype),"dispose",this).call(this),this._filter.dispose(),this._clarityFilter.dispose(),this._temperatureFilter.dispose()}}]),e}();b.identifier="adjustments",b.prototype.availableOptions={brightness:{type:p.OptionType.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},saturation:{type:p.OptionType.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},contrast:{type:p.OptionType.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},gamma:{type:p.OptionType.NUMBER,default:1,minValue:.5,midValue:1,maxValue:2},exposure:{type:p.OptionType.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},shadows:{type:p.OptionType.NUMBER,default:0,minValue:-2,midValue:0,maxValue:2},highlights:{type:p.OptionType.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},clarity:{type:p.OptionType.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},whites:{type:p.OptionType.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},blacks:{type:p.OptionType.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},temperature:{type:p.OptionType.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1}},d.a.Operations.AdjustmentsOperation=b,e.a=b},function(t,e){t.exports="precision highp float;\n\nvarying vec2 v_texCoord;\nuniform sampler2D u_image;\n\nuniform float u_gamma;\nuniform float u_shadows;\nuniform float u_highlights;\nuniform float u_whites;\nuniform float u_blacks;\n\nuniform mat4 u_colorMatrix;\nuniform vec4 u_colorOffset;\n\nconst float EPSILON = 0.0000001;\n\nfloat calculateLuminance(vec3 rgb) {\n    // This is the luminance calculation part of the RGB to HSL formular.\n    vec4 p = mix(\n        vec4(rgb.gb, 0.0, -1.0 / 3.0),\n        vec4(rgb.bg, -1.0, 2.0 / 3.0),\n        vec4(rgb.g < rgb.b)\n    );\n\n    vec4 q = mix(\n        vec4(rgb.r, p.yzx),\n        vec4(p.xyw, rgb.r),\n        vec4(rgb.r < p.x)\n    );\n\n    float croma = q.x - min(q.w, q.y);\n    float luminance = q.x - croma * 0.5;\n    return luminance;\n}\n\nvec3 map(vec3 x, float in_min, float in_max, float out_min, float out_max){\n  return (x - in_min) * (out_max - out_min) / (in_max - in_min) + out_min;\n}\n\nvoid main() {\n\n  vec4 color = clamp(texture2D(u_image, v_texCoord), 0.0, 1.0);\n  color.rgb /= max(color.a, EPSILON); // Revert premultiplied alpha\n\n  // Apply gamma\n  if (u_gamma != 1.0) {\n    color.rgb = pow(color.rgb, vec3(1.0 / max(u_gamma, EPSILON)));\n  }\n\n  // Apply shadows and highlights\n  float luminance = calculateLuminance(color.rgb);\n\n  float shadow = u_shadows >= 0.0\n    ? clamp(\n          pow(luminance, 1.0 / (u_shadows + 1.0))\n          + pow(luminance, 2.0 / (u_shadows + 1.0)) * -0.76\n          - luminance\n    , 0.0, max(u_shadows, 1.0))\n    : -clamp(\n          pow(luminance, 1.0 / (-u_shadows + 1.0))\n          + pow(luminance, 2.0 / (-u_shadows + 1.0)) * -0.76\n          - luminance\n    , 0.0, max(-u_shadows, 1.0));\n\n  float highlight = u_highlights < 0.0\n    ? clamp(\n          1.0\n          - pow(1.0 - luminance, 1.0 / (1.0 - u_highlights))\n          - pow(1.0 - luminance, 2.0 / (1.0 - u_highlights)) * -0.8\n          - luminance\n     , -1.0, 0.0)\n    : -clamp(\n          1.0\n          - pow(1.0 - luminance, 1.0 / (1.0 + u_highlights))\n          - pow(1.0 - luminance, 2.0 / (1.0 + u_highlights)) * -0.8\n          - luminance\n     , -1.0, 0.0);\n\n  // Bright color need more contrast and dark color need more brightness.\n  // This is to keep saturatation because the color information of a dark colors is lost.\n  float shadowContrast   = shadow * luminance * luminance;\n  float shadowBrightness = shadow - shadowContrast;\n\n  float offset = luminance + shadowContrast + highlight;\n  color.rgb = clamp(offset * ((color.rgb + shadowBrightness) / max(luminance, EPSILON)), 0.0, 1.0);\n  \n  // Apply Color Matrix\n  color.rgb = clamp(color * u_colorMatrix + u_colorOffset, 0.0, 1.0).rgb;\n  color.rgb = map(color.rgb, 0.0, 1.0, u_blacks / 2.0, 1.0 + u_whites / 2.0);\n  color = clamp(color, 0.0, 1.0);\n  color.rgb *= color.a; // Reset premultiplied alpha\n\n  gl_FragColor = color;\n}\n"},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(1),c=n.n(l),h=n(4),f=(n.n(h),function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}());var p=h.Math.Vector2,d=h.Math.ColorMatrix,v=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||c()(e)).call(this));return t._fragmentSource=n(265),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=u()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(a.a?a()(t,e):t.__proto__=e)}(e,h["Engine"].Filter),f(e,[{key:"_applyCanvas",value:function(t,e,n){arguments.length>3&&void 0!==arguments[3]&&arguments[3];var r=n.getContext(),i=e.getCanvas(),o=e.getContext(),a=this._options.clarity,s=this._options.colorMatrix,u=new h.Color(this._options.colorOffset[0],this._options.colorOffset[1],this._options.colorOffset[2],this._options.colorOffset[3]),l=i.width,c=i.height,f=o.getImageData(0,0,l,c),p=r.createImageData(l,c);this.canvasShader(f,p,a,s,u),r.putImageData(p,0,0)}},{key:"canvasShader",value:function(t,e,n,r,i){for(var o=function(t,e,n){return Math.min(Math.max(t,e),n)},a=function(t,e,n){var r=o((n-t)/(e-t),0,1);return r*r*(3-2*r)},s=4*t.width,u=t.data.length,l=u-1,c=t.data,f=e.data,p=new h.Color,d=function(t){return c[t=(t=t<0?0:t)>l?l:t]},v=0;v<u;v+=4){var y=d(v+0),_=d(v+1),g=d(v+2),m=d(v+3),b=(y+d(v-4-s+0)+d(v-4+0)+d(v-4+s+0)+d(v-s+0)+d(v+s+0)+d(v+4-s+0)+d(v+4+0)+d(v+4+s))/2295,w=(_+d(v-4-s+1)+d(v-4+1)+d(v-4+s+1)+d(v-s+1)+d(v+s+1)+d(v+4-s+1)+d(v+4+1)+d(v+4+s+1))/2295,x=(g+d(v-4-s+2)+d(v-4+2)+d(v-4+s+2)+d(v-s+2)+d(v+s+2)+d(v+4-s+2)+d(v+4+2)+d(v+4+s+2))/2295,T=(m+d(v-4-s+3)+d(v-4+3)+d(v-4+s+3)+d(v-s+3)+d(v+s+3)+d(v+4-s+3)+d(v+4+3)+d(v+4+s+3))/2295;m/=255;var k=o(.3*(y/=255)+.59*(_/=255)+.1*(g/=255),.111111,.999999),C=Math.min(a(1-k,0,.11),a(k,0,.11)),R=3.7*n*C,E=Math.pow(2,.27*n*C),O=o(y+o((y-b)*R,0,10),0,1)*E,A=o(_+o((_-w)*R,0,10),0,1)*E,S=o(g+o((g-x)*R,0,10),0,1)*E,F=o(m+o((m-T)*R,0,10),0,1);p.set(O,A,S,F);var I=r.apply(p).clamp(0,1);f[v+0]=255*I.r,f[v+1]=255*I.g,f[v+2]=255*I.b,f[v+3]=255*I.a}}}]),e}();v.prototype.availableOptions={clarity:{type:h.OptionType.NUMBER,default:0,uniformType:h.UniformType.FLOAT},pixelDimension:{type:h.OptionType.VECTOR2,default:new p(100,100),uniformType:h.UniformType.FLOAT2},colorMatrix:{type:h.OptionType.COLOR_MATRIX,default:new d,uniformType:h.UniformType.MAT4},colorOffset:{type:h.OptionType.ARRAY,default:[],uniformType:h.UniformType.FLOAT4}},e.a=v},function(t,e){t.exports="precision mediump float;\n\n// Input Image with config WRAP_S and WRAP_T: CLAMP_TO_EDGE\nuniform sampler2D u_image;\n\n// Size of one pixel == vec2(1.0 / u_image.width, 1.0 / u_image.height)\nuniform vec2 u_pixelDimension;\n\n// Range (-1.0 - 1.0)\nuniform float u_clarity;\n\nvarying vec2 v_texCoord;\n\nuniform mat4 u_colorMatrix;\nuniform vec4 u_colorOffset;\n\nconst float EPSILON = 0.000001;\n\nvec4 unpremultiply(vec4 col) {\n    col.rgb /= max(col.a, EPSILON);\n    return col;\n}\n\nvoid main() {\n    vec4 color = texture2D(u_image, v_texCoord);\n    color = unpremultiply(color);\n\n    // L = Left, R = Right, C = Center, T = Top, B = Bottom\n    vec4 colLB = texture2D(u_image, v_texCoord + vec2(-u_pixelDimension.x, -u_pixelDimension.y));\n    vec4 colLC = texture2D(u_image, v_texCoord + vec2(-u_pixelDimension.x,                 0.0));\n    vec4 colLT = texture2D(u_image, v_texCoord + vec2(-u_pixelDimension.x,  u_pixelDimension.y));\n\n    vec4 colCL = texture2D(u_image, v_texCoord + vec2(                0.0, -u_pixelDimension.y));\n    vec4 colCR = texture2D(u_image, v_texCoord + vec2(                0.0,  u_pixelDimension.y));\n    \n    vec4 colRB = texture2D(u_image, v_texCoord + vec2( u_pixelDimension.x, -u_pixelDimension.y));\n    vec4 colRC = texture2D(u_image, v_texCoord + vec2( u_pixelDimension.x,                 0.0));\n    vec4 colRT = texture2D(u_image, v_texCoord + vec2( u_pixelDimension.x,  u_pixelDimension.y));\n\n    vec4 mergedColor = color;\n    mergedColor.rgb += unpremultiply(colLB).rgb + unpremultiply(colLC).rgb + unpremultiply(colLT).rgb;\n    mergedColor.rgb += unpremultiply(colCL).rgb + unpremultiply(colCR).rgb;\n    mergedColor.rgb += unpremultiply(colRB).rgb + unpremultiply(colRC).rgb + unpremultiply(colRT).rgb;\n\n    mergedColor /= 9.0;\n\n    float grayValue = clamp(color.r * 0.3 + color.g * 0.59 + color.b * 0.1, 0.111111, 0.999999);\n    // 1.0 and 0.0 result in white not black, therefore we clamp\n\n    // Here we create a function that will map values below 0.1 to 0. Values above 0.2 will be mapped to 1,\n    // and for values between 0.1 and 0.2 it will produce a gradient.\n    // The funtion is mirror at 0.5, meaning values between 0.8 and 0.9 will result in a decending gradient.\n    // And values above 0.9 will be mapped to 0.\n    float frequenceFactor = min(smoothstep(1.0 - grayValue, 0.0, 0.11), smoothstep(grayValue, 0.0, 0.11));\n\n    // here we apply the high pass filter. Its strength is determined by the uniform ,\n    // and the frequence factor. That means the only the mid tones are affected by this filter.\n    // Clarity input is ranging from -1 to 1. But we want to strengthen the effect.\n    // Therefore we see this little magic number '3.7'.\n    color.rgb = clamp(color + clamp((color - mergedColor) * u_clarity * 3.7 * frequenceFactor, 0.0, 10.0), 0.0, 1.0).rgb;\n\n    // apply exposure but only to the mid tones.\n    color.rgb = color.rgb * pow(2.0, u_clarity * 0.27 * frequenceFactor);\n\n    // apply contrast and desaturation matrix\n    color.rgb = clamp(color * u_colorMatrix + u_colorOffset, 0.0, 1.0).rgb;\n\n    color.rgb *= color.a; // Premultiply alpha\n\n    gl_FragColor = clamp(color, 0.0, 1.0);\n}\n"},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(1),c=n.n(l),h=n(4),f=(n.n(h),function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}());h.Math.Vector3;var p=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||c()(e)).call(this));return t._fragmentSource=n(267),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=u()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(a.a?a()(t,e):t.__proto__=e)}(e,h["Engine"].Filter),f(e,[{key:"_applyCanvas",value:function(t,e,n){arguments.length>3&&void 0!==arguments[3]&&arguments[3];var r=n.getContext(),i=e.getCanvas(),o=e.getContext(),a=this._options.temperature,s=i.width,u=i.height,l=o.getImageData(0,0,s,u),c=r.createImageData(s,u);this.canvasShader(l,c,a),r.putImageData(c,0,0)}},{key:"canvasShader",value:function(t,e,n){for(var r,i,o,a=function(t,e,n){return t*(1-n)+e*n},s=function(t,e){return[t[0]*e[0]+t[3]*e[1]+t[6]*e[2],t[1]*e[0]+t[4]*e[1]+t[7]*e[2],t[2]*e[0]+t[5]*e[1]+t[8]*e[2]]},u=t.data.length,l=u-1,c=t.data,h=e.data,f=function(t){return c[t=(t=t<0?0:t)>l?l:t]},p=[.93,.54,0],d=[.299,.587,.114,.596,-.274,-.322,.212,-.523,.311],v=[1,.956,.621,1,-.272,-.647,1,-1.105,1.702],y=0;y<u;y+=4){var _=f(y+0)/255,g=f(y+1)/255,m=f(y+2)/255,b=f(y+3)/255,w=s(d,[_,g,m]);w.z=(r=w.z+0,i=-.5226,o=.5226,Math.min(Math.max(r,i),o));var x=s(v,w),T=[x[0]<.5?2*x[0]*p[0]:1-2*(1-x[0])*(1-p[0]),x[1]<.5?2*x[1]*p[1]:1-2*(1-x[1])*(1-p[1]),x[2]<.5?2*x[2]*p[2]:1-2*(1-x[2])*(1-p[2])];h[y+0]=255*a(x[0],T[0],n),h[y+1]=255*a(x[1],T[1],n),h[y+2]=255*a(x[2],T[2],n),h[y+3]=255*b}}}]),e}();p.prototype.availableOptions={temperature:{type:h.OptionType.NUMBER,default:0,uniformType:h.UniformType.FLOAT}},e.a=p},function(t,e){t.exports="precision mediump float;\n\n// Input Image with config WRAP_S and WRAP_T: CLAMP_TO_EDGE\nuniform sampler2D u_image;\n\n// Range (-1.0 - 1.0)\nuniform float u_temperature;\n\nconst lowp vec3 warmFilter = vec3(0.93, 0.54, 0.0);\n\nconst mediump mat3 RGBtoYIQ = mat3(0.299, 0.587, 0.114, 0.596, -0.274, -0.322, 0.212, -0.523, 0.311);\nconst mediump mat3 YIQtoRGB = mat3(1.0, 0.956, 0.621, 1.0, -0.272, -0.647, 1.0, -1.105, 1.702);\n\nconst float EPSILON = 0.0000001;\n\nvarying vec2 v_texCoord;\nvoid main() {\n  float temperature = u_temperature;\n  const float tint = 0.0;\n  vec4 source = texture2D(u_image, v_texCoord);\n\n  source.rgb /= max(source.a, EPSILON);   // Revert premultiplied alpha\n\n  vec3 yiq = RGBtoYIQ * source.rgb;\n  yiq.b = clamp(yiq.b + tint*0.5226*0.1, -0.5226, 0.5226);\n  vec3 rgb = YIQtoRGB * yiq;\n\n  vec3 processed = mix(\n    (1.0 - 2.0 * (1.0 - rgb) * (1.0 - warmFilter)),\n    (2.0 * rgb * warmFilter),\n    vec3(rgb.r < 0.5, rgb.g < 0.5, rgb.b < 0.5)\n  );\n\n  vec4 color = vec4(mix(rgb, processed, temperature), source.a);\n\n  color.rgb *= color.a;   // Premultiply alpha again\n\n  gl_FragColor = color;\n}\n"},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=n(5),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),h=n(1),f=n.n(h),p=n(4),d=n.n(p),v=n(56),y=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var _=p.Math.Vector2,g=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(t=e.__proto__||f()(e)).call.apply(t,[this].concat(r)));o._lastBlurRadius=o._options.blurRadius;var a={blurQuality:{type:p.OptionType.STRING}};return o._horizontalFilter=new v.a({},a),o._verticalFilter=new v.a({},a),o._sprite.setFilters([o._horizontalFilter,o._verticalFilter]),o._horizontalFilter.setDelta(new _(.5,.5)),o._verticalFilter.setDelta(new _(-.5,.5)),o._filter=new v.a({},a),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=c()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(u.a?u()(t,e):t.__proto__=e)}(e,p["Operation"]),y(e,[{key:"_renderWebGL",value:function(t){return this._renderBlur(t)}},{key:"_renderCanvas",value:function(t){return this._options.highQualityCanvasBlur?this._renderBlur(t):this._renderLQCanvasBlur(t)}},{key:"_renderBlur",value:function(t){var e=t.getDimensions(),n=e.min(),r={blurRadius:this._options.blurRadius*n,texSize:e,blurQuality:"high"};return this._horizontalFilter.set(r),this._verticalFilter.set(r),this._renderTexture.render(this._container),p.Promise.resolve()}},{key:"_renderLQCanvasBlur",value:function(t){var e=this._options.blurRadius,n=t.getDimensions();return this._filter.set({blurRadius:e,texSize:n,blurQuality:"low"}),this._sprite.setFilters([this._filter]),this._renderTexture.render(this._container),p.Promise.resolve()}},{key:"transform",value:function(t){var e=this.getBlurRadius(),n=t.applyToRelativeSize(e);this.set({blurRadius:n},!1)}},{key:"dispose",value:function(){(function t(e,n,r){null===e&&(e=Function.prototype);var i=a()(e,n);if(void 0===i){var o=f()(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0})(e.prototype.__proto__||f()(e.prototype),"dispose",this).call(this),this._filter.dispose(),this._verticalFilter.dispose(),this._horizontalFilter.dispose()}},{key:"hasChanges",value:function(){return!0}}]),e}();g.identifier="blur",g.prototype.availableOptions={blurRadius:{type:p.OptionType.NUMBER,default:.025},highQualityCanvasBlur:{type:p.OptionType.BOOLEAN,default:!1}},d.a.Operations.BlurOperation=g,e.a=g},function(t,e){t.exports="/*\n * Based on evanw's glfx.js tilt shift shader:\n * https://github.com/evanw/glfx.js/blob/master/src/filters/blur/tiltshift.js\n * @license\n */\n\nuniform sampler2D u_image;\nuniform float u_blurRadius;\nuniform vec2 u_delta;\nuniform vec2 u_texSize;\nvarying vec2 v_texCoord;\n\nfloat random(vec2 co)\n{\n    highp float a = 12.9898;\n    highp float b = 78.233;\n    highp float c = 43758.5453;\n    highp float dt = dot(co.xy,vec2(a,b));\n    highp float sn = mod(dt, 3.14);\n    return fract(sin(sn) * c);\n}\n\nvoid main() {\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(gl_FragCoord.xy / u_texSize.xy);\n    float radius = u_blurRadius;\n\n    const float steps = 30.0;\n\n    for (float t = -steps; t <= steps; t++) {\n        float percent = (t + offset - 0.5) / steps;\n        float weight = 1.0 - abs(percent);\n\n        // Somehow `sample` is a keyword in headless-gl\n        vec4 _sample = texture2D(u_image, v_texCoord + u_delta * percent * radius / u_texSize);\n\n        color += _sample * weight;\n        total += weight;\n    }\n\n    gl_FragColor = color / total;\n}\n"},function(t,e,n){"use strict";var r=n(6),i=n.n(r),o=n(0),a=n.n(o),s=n(5),u=n.n(s),l=n(2),c=n.n(l),h=n(3),f=n.n(h),p=n(1),d=n.n(p),v=n(4),y=n.n(v),_=n(145),g=n(8),m=n(303),b=n(7),w=i.a||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},x=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),a()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),T=function t(e,n,r){null===e&&(e=Function.prototype);var i=u()(e,n);if(void 0===i){var o=d()(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0};var k=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||d()(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=f()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(c.a?c()(t,e):t.__proto__=e)}(e,v["Operation"]),x(e,[{key:"_render",value:function(t){return this._selectedFilter.render(this._sdk,t,this._renderTexture)}},{key:"render",value:function(t){return this._selectedFilter.getDirty()&&this.setDirty(!0),!this.getEnabled()||this._selectedFilter.constructor.isIdentity?v.Promise.resolve(t):T(e.prototype.__proto__||d()(e.prototype),"render",this).call(this,t)}},{key:"setDirtyForRenderer",value:function(t,n){T(e.prototype.__proto__||d()(e.prototype),"setDirtyForRenderer",this).call(this,t,n),this._selectedFilter.setDirtyForRenderer(t,n)}},{key:"disposeRenderTextures",value:function(){T(e.prototype.__proto__||d()(e.prototype),"disposeRenderTextures",this).call(this),this._selectedFilter&&this._selectedFilter.disposeRenderTextures()}},{key:"dispose",value:function(){T(e.prototype.__proto__||d()(e.prototype),"dispose",this).call(this),this._selectedFilter&&this._selectedFilter.dispose()}},{key:"restoreSnapshot",value:function(t){var e=w({},t);if(delete e.filter,t.filter){var n=t.filter.constructor;"3d-lut"===n.identifier?this.setFilter(new n({image:t.filter.getImage(),resolution:t.filter.getResolution(),horizontalTileCount:t.filter.getHorizontalTileCount(),verticalTileCount:t.filter.getVerticalTileCount()})):"duotone"===n.identifier?this.setFilter(new n({lightColor:t.filter.getLightColor(),darkColor:t.filter.getDarkColor(),intensity:t.filter.getIntensity()})):this.setFilter(new n)}this.set(e)}},{key:"resetToDefaultFilterIntensity",value:function(){var t=this._selectedFilter&&this._selectedFilter.availableOptions,e=t&&t.intensity.default;this.setIntensity(e||1)}}]),e}();k.identifier="filter",k.prototype.availableOptions={identifier:{type:v.OptionType.STRING,default:"identity"},intensity:{type:v.OptionType.NUMBER,default:1,setter:function(t){return this._selectedFilter&&this._selectedFilter.setIntensity(t),t}},filter:{type:v.OptionType.OBJECT,default:new _.a,setter:function(t){return this._selectedFilter&&(this._selectedFilter.dispose(),this._selectedFilter=null),this._selectedFilter=t,void 0!==this._options.intensity&&this._selectedFilter.set({intensity:this._options.intensity}),t}}},k.FilterPrimitives=g,k.Filters=m,k.Filter=b.a,y.a.Operations.FilterOperation=k,e.a=k},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(1),c=n.n(l),h=n(4),f=(n.n(h),function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}());function p(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var d=function(t){function e(){p(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||c()(e)).call(this));return t._fragmentSource=n(272),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=u()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(a.a?a()(t,e):t.__proto__=e)}(e,h["Engine"].Filter),f(e,[{key:"_applyCanvas",value:function(t,e,n){arguments.length>3&&void 0!==arguments[3]&&arguments[3];var r=e.getCanvas(),i=n.getContext(),o=this._options.filteredCanvas;i.save(),i.globalAlpha=1-this._options.intensity,i.drawImage(r,0,0),i.globalAlpha=this._options.intensity,i.drawImage(o,0,0),i.restore()}}]),e}();d.prototype.availableOptions={filteredImage:{type:h.OptionType.NUMBER,default:1,uniformType:h.UniformType.INT},filteredCanvas:{type:h.OptionType.OBJECT,default:null},intensity:{type:h.OptionType.NUMBER,default:1,uniformType:h.UniformType.FLOAT}};var v=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;p(this,t),this._intensity=e,this._stack=[],this._dirtiness={},this._renderTextures={},this._container=new h.Engine.Container,this._sprite=new h.Engine.Sprite,this._container.addChild(this._sprite),this._blendFilter=new d}return f(t,[{key:"push",value:function(t){this._stack.push(t)}},{key:"clear",value:function(){this._stack=[]}},{key:"render",value:function(t,e,n){if(0===this._stack.length)return h.Promise.resolve();var r=t.getRenderer();this._sprite.setTexture(e);var i=this._renderTextures[r.id];if(!i){var o=t.getSprite().getTexture().getFrame();i=new h.Engine.RenderTexture(t.getRenderer(),o.width,o.height),this._renderTextures[r.id]=i}var a=n.getDimensions();i.resizeTo(a);var s=this.isDirtyForRenderer(r);if(s){this._stack.forEach(function(e){e.update(t)});var u=this._stack.map(function(t){return t.getFilter()});this._sprite.setFilters(u),i.render(this._container),this.setDirtyForRenderer(!1,r)}if(this._blendFilter.setIntensity(this._intensity),r.isOfType(h.RendererType.CANVAS))this._blendFilter.setFilteredCanvas(i.getRenderTarget().getCanvas());else if(r.isOfType(h.RendererType.WEBGL)){var l=i.getBaseTexture();l.setGLUnit(this._blendFilter.getFilteredImage()),r.updateTexture(l,!1)}return this._sprite.setFilters([this._blendFilter]),n.clear(h.Color.TRANSPARENT),n.render(this._container),s&&this.disposeRenderTextures(),h.Promise.resolve(n)}},{key:"setIntensity",value:function(t){this._intensity=t}},{key:"isDirtyForRenderer",value:function(t){return t.id in this._dirtiness||(this._dirtiness[t.id]=!0),this._dirtiness[t.id]}},{key:"setDirtyForRenderer",value:function(t,e){this._dirtiness[e.id]=t}},{key:"setDirty",value:function(t){for(var e in this._dirtiness)this._dirtiness[e]=t}},{key:"disposeRenderTextures",value:function(){for(var t in this._renderTextures)this._renderTextures[t].dispose(),delete this._renderTextures[t]}},{key:"dispose",value:function(){this.disposeRenderTextures(),this._stack.forEach(function(t){return t.dispose()}),this._stack=[],this._blendFilter.dispose(),this._sprite.dispose()}}]),t}();e.a=v},function(t,e){t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform sampler2D u_filteredImage;\nuniform float u_intensity;\n\nvoid main() {\n  vec4 color0 = texture2D(u_image, v_texCoord);\n  vec4 color1 = texture2D(u_filteredImage, v_texCoord);\n  gl_FragColor = mix(color0, color1, u_intensity);\n}\n"},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(1),c=n.n(l),h=n(4),f=(n.n(h),n(11)),p=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function v(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function y(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=u()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(a.a?a()(t,e):t.__proto__=e)}var _=function(t){function e(){d(this,e);var t=v(this,(e.__proto__||c()(e)).call(this));return t._fragmentSource=n(274),t}return y(e,h["Engine"].Filter),p(e,[{key:"_applyCanvas",value:function(t,e,n){arguments.length>3&&void 0!==arguments[3]&&arguments[3];var r=e.getCanvas(),i=e.getContext(),o=n.getContext(),a=i.getImageData(0,0,r.width,r.height),s=this._options.brightness;if(0!==s){s*=255;for(var u=0;u<r.width*r.height;u++){var l=4*u;a.data[l]+=s,a.data[l+1]+=s,a.data[l+2]+=s}o.putImageData(a,0,0)}}}]),e}();_.prototype.availableOptions={brightness:{type:h.OptionType.NUMBER,default:0,uniformType:h.UniformType.FLOAT}};var g=function(t){function e(){var t;d(this,e);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=v(this,(t=e.__proto__||c()(e)).call.apply(t,[this].concat(r)));return o._filter=new _,o}return y(e,f["a"]),p(e,[{key:"update",value:function(){this._filter.setBrightness(this._options.brightness)}}]),e}();g.prototype.availableOptions=_.prototype.availableOptions,e.a=g},function(t,e){t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform float u_brightness;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  gl_FragColor = vec4((texColor.rgb + vec3(u_brightness) * texColor.a), texColor.a);;\n}\n"},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(1),c=n.n(l),h=n(4),f=(n.n(h),n(11)),p=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function v(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function y(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=u()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(a.a?a()(t,e):t.__proto__=e)}var _=function(t){function e(){d(this,e);var t=v(this,(e.__proto__||c()(e)).call(this));return t._fragmentSource=n(276),t}return y(e,h["Engine"].Filter),p(e,[{key:"_applyCanvas",value:function(t,e,n){arguments.length>3&&void 0!==arguments[3]&&arguments[3];var r=e.getCanvas(),i=e.getContext(),o=n.getContext(),a=i.getImageData(0,0,r.width,r.height),s=this._options.contrast;if(1!==s){for(var u=0;u<r.width*r.height;u++){var l=4*u;a.data[l]=(a.data[l]-127)*s+127,a.data[l+1]=(a.data[l+1]-127)*s+127,a.data[l+2]=(a.data[l+2]-127)*s+127}o.putImageData(a,0,0)}}}]),e}();_.prototype.availableOptions={contrast:{type:h.OptionType.NUMBER,default:1,uniformType:h.UniformType.FLOAT}};var g=function(t){function e(){var t;d(this,e);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=v(this,(t=e.__proto__||c()(e)).call.apply(t,[this].concat(r)));return o._filter=new _,o}return y(e,f["a"]),p(e,[{key:"update",value:function(){this._filter.setContrast(this._options.contrast)}}]),e}();g.prototype.availableOptions=_.prototype.availableOptions,e.a=g},function(t,e){t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform float u_contrast;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  gl_FragColor = vec4(((texColor.rgb - vec3(0.5)) * u_contrast + vec3(0.5) * texColor.a), texColor.a);\n}\n"},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(1),c=n.n(l),h=n(4),f=(n.n(h),n(11)),p=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function v(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function y(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=u()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(a.a?a()(t,e):t.__proto__=e)}var _=h.Math.ColorMatrix,g=function(t){function e(){d(this,e);var t=v(this,(e.__proto__||c()(e)).call(this));return t._fragmentSource=n(278),t}return y(e,h["Engine"].Filter),p(e,[{key:"_applyCanvas",value:function(t,e,n){arguments.length>3&&void 0!==arguments[3]&&arguments[3];for(var r=e.getCanvas(),i=e.getContext(),o=n.getContext(),a=i.getImageData(0,0,r.width,r.height),s=this._options.colorMatrix,u=new h.Color(0,0,0,0),l=0;l<r.width*r.height;l++){var c=4*l;u.r=a.data[c]/255,u.g=a.data[c+1]/255,u.b=a.data[c+2]/255,u=s.apply(u),a.data[c]=255*u.r,a.data[c+1]=255*u.g,a.data[c+2]=255*u.b}o.putImageData(a,0,0)}}]),e}();g.prototype.availableOptions={colorMatrix:{type:h.OptionType.COLOR_MATRIX,default:new _,uniformType:h.UniformType.MAT4},colorMatrixOffset:{type:h.OptionType.ARRAY,default:[],uniformType:h.UniformType.FLOAT4}};var m=function(t){function e(){var t;d(this,e);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=v(this,(t=e.__proto__||c()(e)).call.apply(t,[this].concat(r)));return o._filter=new g,o}return y(e,f["a"]),p(e,[{key:"update",value:function(){this._filter.setColorMatrix(this._options.colorMatrix)}}]),e}();m.prototype.availableOptions=g.prototype.availableOptions,e.a=m},function(t,e){t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform mat4 u_colorMatrix;\nuniform vec4 u_colorMatrixOffset;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  gl_FragColor = texColor * u_colorMatrix + u_colorMatrixOffset;\n}\n"},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(1),c=n.n(l),h=n(4),f=(n.n(h),n(11)),p=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function v(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function y(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=u()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(a.a?a()(t,e):t.__proto__=e)}var _=function(t){function e(){d(this,e);var t=v(this,(e.__proto__||c()(e)).call(this));return t._fragmentSource=n(280),t}return y(e,h["Engine"].Filter),p(e,[{key:"_applyCanvas",value:function(t,e,n){arguments.length>3&&void 0!==arguments[3]&&arguments[3];for(var r=e.getCanvas(),i=e.getContext(),o=n.getContext(),a=i.getImageData(0,0,r.width,r.height),s=[.3,.59,.11],u=this._options.desaturation,l=0;l<r.width*r.height;l++){var c=4*l,h=s[0]*a.data[c]/255+s[1]*a.data[c+1]/255+s[2]*a.data[c+2]/255;a.data[c]+=(255*h-a.data[c])*u,a.data[c+1]+=(255*h-a.data[c+1])*u,a.data[c+2]+=(255*h-a.data[c+2])*u}o.putImageData(a,0,0)}}]),e}();_.prototype.availableOptions={desaturation:{type:h.OptionType.NUMBER,default:1,uniformType:h.UniformType.FLOAT}};var g=function(t){function e(){var t;d(this,e);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=v(this,(t=e.__proto__||c()(e)).call.apply(t,[this].concat(r)));return o._filter=new _,o}return y(e,f["a"]),p(e,[{key:"update",value:function(){this._filter.setDesaturation(this._options.desaturation)}}]),e}();g.prototype.availableOptions=_.prototype.availableOptions,e.a=g},function(t,e){t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform float u_desaturation;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  vec3 grayXfer = vec3(0.3, 0.59, 0.11);\n  vec3 gray = vec3(dot(grayXfer, texColor.xyz));\n  gl_FragColor = vec4(mix(texColor.xyz, gray, u_desaturation) * texColor.a, texColor.a);\n}\n"},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(1),c=n.n(l),h=n(4),f=(n.n(h),n(11)),p=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function v(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function y(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=u()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(a.a?a()(t,e):t.__proto__=e)}var _=function(t){function e(){d(this,e);var t=v(this,(e.__proto__||c()(e)).call(this));return t._fragmentSource=n(282),t}return y(e,h["Engine"].Filter),p(e,[{key:"_applyCanvas",value:function(t,e,n){arguments.length>3&&void 0!==arguments[3]&&arguments[3];for(var r=e.getCanvas(),i=e.getContext(),o=n.getContext(),a=i.getImageData(0,0,r.width,r.height),s=this._options,u=s.lightColor,l=s.darkColor,c=s.intensity,f=0;f<r.width*r.height;f++){var p=4*f,d=a.data[p]/255,v=a.data[p+1]/255,y=a.data[p+2]/255,_=a.data[p+3]/255,g=new h.Color(d,v,y,_),m=this._duoToneKernel(g,u,l,c);a.data[p]=255*m.r,a.data[p+1]=255*m.g,a.data[p+2]=255*m.b,a.data[p+3]=255*m.a}o.putImageData(a,0,0)}},{key:"_duoToneKernel",value:function(t,e,n,r){if(t.clone().clamp(0,1),r>0){var i=Math.max(r+1,1e-7);t.r=1-Math.pow(1-t.r,i),t.g=1-Math.pow(1-t.g,i),t.b=1-Math.pow(1-t.b,i)}else{var o=Math.max(1-r,1e-7);t.r=Math.pow(t.r,o),t.g=Math.pow(t.g,o),t.b=Math.pow(t.b,o)}var a=.2126*t.r+.7152*t.g+.0722*t.b,s=Math.min(Math.max(a,0),1),u=n.clone().mix(e,s);return u.a*=t.a,u}}]),e}();_.prototype.availableOptions={lightColor:{type:h.OptionType.COLOR,default:h.Color.RED,uniformType:h.UniformType.FLOAT4},darkColor:{type:h.OptionType.COLOR,default:h.Color.BLACK,uniformType:h.UniformType.FLOAT4},intensity:{type:h.OptionType.NUMBER,default:.5,uniformType:h.UniformType.FLOAT}};var g=function(t){function e(){var t;d(this,e);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=v(this,(t=e.__proto__||c()(e)).call.apply(t,[this].concat(r)));return o._filter=new _,o}return y(e,f["a"]),p(e,[{key:"update",value:function(){this._filter.setLightColor(this._options.lightColor),this._filter.setDarkColor(this._options.darkColor);var t=2*this._options.intensity-1;this._filter.setIntensity(t)}}]),e}();g.prototype.availableOptions=_.prototype.availableOptions,e.a=g},function(t,e){t.exports='precision highp float;\n\nuniform sampler2D u_image;\nuniform vec4 u_lightColor;\nuniform vec4 u_darkColor;\nuniform float u_intensity;\nvarying vec2 v_texCoord;\n\nconst float EPSILON = 0.0000001;\nconst vec3 GRAYSCALE_WEIGHTS = vec3(0.2126, 0.7152, 0.0722);\n\nvec4 duotoneKernel(vec4 sampledCol, vec4 light, vec4 dark, float intensity) {\n  vec4 color = clamp(sampledCol, 0.0, 1.0);\n  color.rgb /= max(color.a, EPSILON);\n  color = clamp(color, 0.0, 1.0); // necessary to get rid of all extended sRGB issues with OpenGL ES\n \n  // Apply intensity as "symmetric gamma"\n  if (intensity > 0.0) {\n    color.rgb = 1.0 - pow(1.0 - color.rgb, vec3(max(intensity + 1.0, EPSILON)));\n  } else {\n    color.rgb = pow(color.rgb, vec3(max(-intensity + 1.0, EPSILON)));\n  }\n \n  // Colorimetric (perceptual luminance-preserving) RGB to grayscale conversion\n  // https://en.wikipedia.org/wiki/Grayscale#Colorimetric_(perceptual_luminance-preserving)_conversion_to_grayscale\n  float luminance = dot(GRAYSCALE_WEIGHTS, color.rgb);\n \n  // Apply DuoTone\n  vec4 duotone = mix(dark, light, clamp(luminance, 0.0, 1.0));\n  duotone.a *= color.a;\n  \n  duotone.rgb *= duotone.a;\n\n  return duotone;\n}\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  gl_FragColor = duotoneKernel(texColor, u_lightColor, u_darkColor, u_intensity);\n}'},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(1),c=n.n(l),h=n(4),f=(n.n(h),n(11)),p=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function v(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function y(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=u()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(a.a?a()(t,e):t.__proto__=e)}var _=function(t){function e(){d(this,e);var t=v(this,(e.__proto__||c()(e)).call(this));return t._fragmentSource=n(284),t}return y(e,h["Engine"].Filter),p(e,[{key:"_applyCanvas",value:function(t,e,n){arguments.length>3&&void 0!==arguments[3]&&arguments[3];for(var r=e.getCanvas(),i=e.getContext(),o=n.getContext(),a=i.getImageData(0,0,r.width,r.height),s=this._options.gamma,u=new Float32Array(256),l=0;l<256;l++)u[l]=255*Math.pow(l/255,s.r);for(var c=new Float32Array(256),h=0;h<256;h++)c[h]=255*Math.pow(h/255,s.g);for(var f=new Float32Array(256),p=0;p<256;p++)f[p]=255*Math.pow(p/255,s.b);for(var d=0;d<r.width*r.height;d++){var v=4*d;a.data[v]=u[a.data[v]],a.data[v+1]=c[a.data[v+1]],a.data[v+2]=f[a.data[v+2]]}o.putImageData(a,0,0)}}]),e}();_.prototype.availableOptions={gamma:{type:h.OptionType.COLOR,default:h.Color.WHITE,uniformType:h.UniformType.FLOAT3}};var g=function(t){function e(){var t;d(this,e);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=v(this,(t=e.__proto__||c()(e)).call.apply(t,[this].concat(r)));return o._filter=new _,o}return y(e,f["a"]),p(e,[{key:"update",value:function(){this._filter.setGamma(this._options.gamma)}}]),e}();g.prototype.availableOptions=_.prototype.availableOptions,e.a=g},function(t,e){t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform vec3 u_gamma;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  vec3 rgb = vec3(texColor.r, texColor.g, texColor.b);\n  rgb = pow(rgb, u_gamma);\n  gl_FragColor = vec4(rgb * texColor.a, texColor.a);;\n}\n"},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(1),c=n.n(l),h=n(4),f=(n.n(h),n(11)),p=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function v(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function y(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=u()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(a.a?a()(t,e):t.__proto__=e)}var _=function(t){function e(){d(this,e);var t=v(this,(e.__proto__||c()(e)).call(this));return t._fragmentSource=n(286),t}return y(e,h["Engine"].Filter),p(e,[{key:"_applyCanvas",value:function(t,e,n){arguments.length>3&&void 0!==arguments[3]&&arguments[3];for(var r,i=e.getCanvas(),o=e.getContext(),a=n.getContext(),s=o.getImageData(0,0,i.width,i.height),u=this._options.color,l=0;l<i.width;l++)for(var c=0;c<i.height;c++){var h=4*(i.width*c+l),f=(l/i.width-.5)/.75,p=(c/i.height-.5)/.75;r=1-(f*f+p*p),r=Math.min(Math.max(r,.1),1),s.data[h]=s.data[h]*(r*u.r),s.data[h+1]=s.data[h+1]*(r*u.g),s.data[h+2]=s.data[h+2]*(r*u.b),s.data[h+3]=255}a.putImageData(s,0,0)}}]),e}();_.prototype.availableOptions={color:{type:h.OptionType.COLOR,default:h.Color.WHITE,uniformType:h.UniformType.FLOAT3}};var g=function(t){function e(){var t;d(this,e);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=v(this,(t=e.__proto__||c()(e)).call.apply(t,[this].concat(r)));return o._filter=new _,o}return y(e,f["a"]),p(e,[{key:"update",value:function(){this._filter.setColor(this._options.color)}}]),e}();g.prototype.availableOptions=_.prototype.availableOptions,e.a=g},function(t,e){t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\n\nuniform vec3 u_color;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n\n  vec2 textureCoord = v_texCoord - vec2(0.5, 0.5);\n  textureCoord /= 0.75;\n\n  float d = 1.0 - dot(textureCoord, textureCoord);\n  d = clamp(d, 0.2, 1.0);\n  vec3 newColor = texColor.rgb * d * u_color.rgb;\n  gl_FragColor = vec4(vec3(newColor) * texColor.a, texColor.a);\n}\n"},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(1),c=n.n(l),h=n(4),f=(n.n(h),n(11)),p=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function v(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function y(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=u()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(a.a?a()(t,e):t.__proto__=e)}var _=function(t){function e(){d(this,e);var t=v(this,(e.__proto__||c()(e)).call(this));return t._fragmentSource=n(288),t}return y(e,h["Engine"].Filter),p(e,[{key:"_applyCanvas",value:function(t,e,n){arguments.length>3&&void 0!==arguments[3]&&arguments[3];for(var r=e.getCanvas(),i=e.getContext(),o=n.getContext(),a=i.getImageData(0,0,r.width,r.height),s=0;s<r.width;s++)for(var u=0;u<r.height;u++){var l=4*(r.width*u+s);a.data[l+2]=.33*a.data[l+1],a.data[l]=.6*a.data[l],a.data[l+2]+=.33*a.data[l],a.data[l+1]=.7*a.data[l+1],a.data[l+3]=255}o.putImageData(a,0,0)}}]),e}(),g=function(t){function e(){var t;d(this,e);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=v(this,(t=e.__proto__||c()(e)).call.apply(t,[this].concat(r)));return o._filter=new _,o}return y(e,f["a"]),e}();e.a=g},function(t,e){t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  texColor.b = texColor.g * 0.33;\n  texColor.r = texColor.r * 0.6;\n  texColor.b += texColor.r * 0.33;\n  texColor.g = texColor.g * 0.7;\n  gl_FragColor = texColor;\n}\n"},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(1),c=n.n(l),h=n(4),f=(n.n(h),n(11)),p=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function v(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function y(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=u()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(a.a?a()(t,e):t.__proto__=e)}var _=function(t){function e(){d(this,e);var t=v(this,(e.__proto__||c()(e)).call(this));return t._fragmentSource=n(290),t}return y(e,h["Engine"].Filter),p(e,[{key:"_applyCanvas",value:function(t,e,n){arguments.length>3&&void 0!==arguments[3]&&arguments[3];for(var r=e.getCanvas(),i=e.getContext(),o=n.getContext(),a=i.getImageData(0,0,r.width,r.height),s=0;s<r.width;s++)for(var u=0;u<r.height;u++){var l=4*(r.width*u+s),c=.2125*a.data[l]+.7154*a.data[l+1]+.0721*a.data[l+2];a.data[l]=c,a.data[l+1]=c,a.data[l+2]=c}o.putImageData(a,0,0)}}]),e}(),g=function(t){function e(){var t;d(this,e);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=v(this,(t=e.__proto__||c()(e)).call.apply(t,[this].concat(r)));return o._filter=new _,o}return y(e,f["a"]),e}();e.a=g},function(t,e){t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nvec3 W = vec3(0.2125, 0.7154, 0.0721);\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float luminance = dot(texColor.rgb, W);\n  gl_FragColor = vec4(vec3(luminance) * texColor.a, texColor.a);\n}\n"},function(t,e){t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform sampler2D u_lookupTable;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float r = texture2D(u_lookupTable, vec2(texColor.r, 0.0)).r;\n  float g = texture2D(u_lookupTable, vec2(texColor.g, 0.0)).g;\n  float b = texture2D(u_lookupTable, vec2(texColor.b, 0.0)).b;\n\n  gl_FragColor = vec4(vec3(r, g, b) * texColor.a, texColor.a);\n}\n"},function(t,e,n){"use strict";var r=n(5),i=n.n(r),o=n(0),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),h=n(1),f=n.n(h),p=n(4),d=(n.n(p),n(11)),v=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),a()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function y(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function g(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=c()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(u.a?u()(t,e):t.__proto__=e)}var m=p.Math.Vector2,b=function(t){function e(){y(this,e);var t=_(this,(e.__proto__||f()(e)).call(this));return t._precomputeQuads(),t._fragmentSource=n(293),t}return g(e,p["Engine"].Filter),v(e,[{key:"_precomputeQuads",value:function(){this._quads=[];for(var t=0;t<256;t++){var e=t/255*63,n=new m;n.y=.125*(0|e)|0,n.x=(0|e)-8*n.y,this._quads.push(n)}}},{key:"_applyCanvas",value:function(t,e,n){arguments.length>3&&void 0!==arguments[3]&&arguments[3];for(var r=e.getCanvas(),i=e.getContext(),o=n.getContext(),a=this._options.lookupTableImage,s=this._createImageCanvas(a).getContext("2d"),u=i.getImageData(0,0,r.width,r.height),l=s.getImageData(0,0,a.width,a.height),c=new m,h=0;h<r.width*r.height*4;h+=4){var f=u.data[h],p=u.data[h+1],d=u.data[h+2],v=u.data[h+3]/255,y=this._quads[d];c.x=64*y.x,c.y=64*y.y,c.x+=Math.floor(f/4),c.y+=Math.floor(p/4);var _=4*(a.width*c.y+c.x)|0,g=l.data[_];g=f*(1-v)+g*v;var b=l.data[_+1];b=p*(1-v)+b*v;var w=l.data[_+2];w=d*(1-v)+w*v,u.data[h]=g,u.data[h+1]=b,u.data[h+2]=w}o.putImageData(u,0,0)}},{key:"_createImageCanvas",value:function(t){var e=p.Utils.createCanvas();return e.width=t.width,e.height=t.height,e.getContext("2d").drawImage(t,0,0),e}}]),e}();b.prototype.availableOptions={lookupTable:{type:p.OptionType.NUMBER,default:3,uniformType:p.UniformType.INT},lookupTableImage:{type:p.OptionType.IMAGE,uniformType:null}};var w=function(t){function e(){var t;y(this,e);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=_(this,(t=e.__proto__||f()(e)).call.apply(t,[this].concat(r)));return o._filter=new b,o._textures={},o}return g(e,d["a"]),v(e,[{key:"update",value:function(t){var e=t.getRenderer();e.isOfType(p.RendererType.WEBGL)?this._updateWebGLTexture(t):e.isOfType(p.RendererType.CANVAS)&&this._filter.setLookupTableImage(this._options.image)}},{key:"_updateWebGLTexture",value:function(t){var e=t.getRenderer(),n=e.id;this._textures[n]||(this._textures[n]=new p.Engine.BaseTexture);var r=this._textures[n];r.setSource(this._options.image),r.setGLUnit(3),e.updateTexture(r)}},{key:"dispose",value:function(){for(var t in function t(e,n,r){null===e&&(e=Function.prototype);var o=i()(e,n);if(void 0===o){var a=f()(e);return null===a?void 0:t(a,n,r)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(r):void 0}(e.prototype.__proto__||f()(e.prototype),"dispose",this).call(this),this._textures)delete this._textures[t]}}]),e}();w.prototype.availableOptions={image:{type:p.OptionType.IMAGE}},e.a=w},function(t,e){t.exports="/**\n * Based off of GPUImage's LookupFilter:\n * https://github.com/BradLarson/GPUImage/blob/master/framework/Source/GPUImageLookupFilter.m\n */\n\nvarying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform sampler2D u_lookupTable;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float blueColor = texColor.b * 63.0;\n\n  vec2 quad1;\n  quad1.y = floor(floor(blueColor) / 8.0);\n  quad1.x = floor(blueColor) - (quad1.y * 8.0);\n\n  vec2 quad2;\n  quad2.y = floor(ceil(blueColor) / 8.0);\n  quad2.x = ceil(blueColor) - (quad2.y * 8.0);\n\n  vec2 texCoord1;\n  texCoord1.x = (quad1.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * texColor.r);\n  texCoord1.y = (quad1.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * texColor.g);\n\n  vec2 texCoord2;\n  texCoord2.x = (quad2.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * texColor.r);\n  texCoord2.y = (quad2.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * texColor.g);\n\n  vec4 newColor1 = texture2D(u_lookupTable, texCoord1);\n  vec4 newColor2 = texture2D(u_lookupTable, texCoord2);\n\n  vec4 newColor = mix(newColor1, newColor2, fract(blueColor));\n  gl_FragColor = mix(texColor, vec4(newColor.rgb, texColor.w), texColor.a);\n}\n"},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(1),c=n.n(l),h=n(4),f=(n.n(h),n(11)),p=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function v(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function y(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=u()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(a.a?a()(t,e):t.__proto__=e)}var _=function(t){function e(){d(this,e);var t=v(this,(e.__proto__||c()(e)).call(this));return t._fragmentSource=n(295),t}return y(e,h["Engine"].Filter),p(e,[{key:"_applyCanvas",value:function(t,e,n){arguments.length>3&&void 0!==arguments[3]&&arguments[3];for(var r=e.getCanvas(),i=e.getContext(),o=n.getContext(),a=i.getImageData(0,0,r.width,r.height),s=this._options.saturation,u=0;u<r.width;u++)for(var l=0;l<r.height;l++){var c=4*(r.width*l+u),h=.2125*a.data[c]+.7154*a.data[c+1]+.0721*a.data[c+2];a.data[c]=h*(1-s)+a.data[c]*s,a.data[c+1]=h*(1-s)+a.data[c+1]*s,a.data[c+2]=h*(1-s)+a.data[c+2]*s}o.putImageData(a,0,0)}}]),e}();_.prototype.availableOptions={saturation:{type:h.OptionType.NUMBER,default:0,uniformType:h.UniformType.FLOAT}};var g=function(t){function e(){var t;d(this,e);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=v(this,(t=e.__proto__||c()(e)).call.apply(t,[this].concat(r)));return o._filter=new _,o}return y(e,f["a"]),p(e,[{key:"update",value:function(){this._filter.setSaturation(this._options.saturation)}}]),e}();g.prototype.availableOptions=_.prototype.availableOptions,e.a=g},function(t,e){t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform float u_saturation;\n\nconst vec3 luminanceWeighting = vec3(0.2125, 0.7154, 0.0721);\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float luminance = dot(texColor.rgb, luminanceWeighting);\n\n  vec3 greyScaleColor = vec3(luminance);\n\n  gl_FragColor = vec4(mix(greyScaleColor, texColor.rgb, u_saturation) * texColor.a, texColor.a);\n}\n"},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(1),c=n.n(l),h=n(4),f=(n.n(h),n(11)),p=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function v(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function y(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=u()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(a.a?a()(t,e):t.__proto__=e)}var _=function(t){function e(){d(this,e);var t=v(this,(e.__proto__||c()(e)).call(this));return t._fragmentSource=n(297),t}return y(e,h["Engine"].Filter),p(e,[{key:"_applyCanvas",value:function(t,e,n){arguments.length>3&&void 0!==arguments[3]&&arguments[3];for(var r=e.getCanvas(),i=e.getContext(),o=n.getContext(),a=i.getImageData(0,0,r.width,r.height),s=0;s<r.width;s++)for(var u=0;u<r.height;u++){var l=4*(r.width*u+s);a.data[l]=Math.max(255*this._options.color.r,a.data[l]),a.data[l+1]=Math.max(255*this._options.color.g,a.data[l+1]),a.data[l+2]=Math.max(255*this._options.color.b,a.data[l+2])}o.putImageData(a,0,0)}}]),e}();_.prototype.availableOptions={color:{type:h.OptionType.COLOR,default:h.Color.WHITE,uniformType:h.UniformType.FLOAT3}};var g=function(t){function e(){var t;d(this,e);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=v(this,(t=e.__proto__||c()(e)).call.apply(t,[this].concat(r)));return o._filter=new _,o}return y(e,f["a"]),p(e,[{key:"update",value:function(){this._filter.setColor(this._options.color)}}]),e}();g.prototype.availableOptions=_.prototype.availableOptions,e.a=g},function(t,e){t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform vec3 u_color;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  vec4 overlayVec4 = vec4(u_color, texColor.a);\n  gl_FragColor = max(overlayVec4 * texColor.a, texColor);\n}\n"},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(1),c=n.n(l),h=n(4),f=(n.n(h),n(146)),p=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var d=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(t=e.__proto__||c()(e)).call.apply(t,[this].concat(r)));return o._options.rgbControlPoints||(o._options.rgbControlPoints={red:o._options.controlPoints,green:o._options.controlPoints,blue:o._options.controlPoints}),o._updateLookupTable(),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=u()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(a.a?a()(t,e):t.__proto__=e)}(e,f["a"]),p(e,[{key:"_updateLookupTable",value:function(){var t=this._calculateSplineCurve(this._options.rgbControlPoints.red),e=this._calculateSplineCurve(this._options.rgbControlPoints.green),n=this._calculateSplineCurve(this._options.rgbControlPoints.blue);this._options.data=this._buildLookupTable(t,e,n)}},{key:"_buildLookupTable",value:function(t,e,n){for(var r=[],i=0;i<256;i++)r.push(Math.min(Math.max(i+t[i],0),255)),r.push(Math.min(Math.max(i+e[i],0),255)),r.push(Math.min(Math.max(i+n[i],0),255)),r.push(255);return r}},{key:"_calculateSplineCurve",value:function(t){t=t.sort(function(t,e){return t[0]>e[0]});var e,n=this._getSplineCurve(t),r=n[0];if(r[0]>0)for(e=0;e<r[0];e++)n.unshift([0,0]);var i=[];for(e=0;e<n.length;e++){var o=n[e],a=[o[0],o[0]],s=Math.sqrt(Math.pow(a[0]-o[0],2)+Math.pow(a[1]-o[1],2));a[1]>o[1]&&(s=-s),i.push(s)}return i}},{key:"_getSplineCurve",value:function(t){var e,n=this._secondDerivative(t),r=n.length,i=[];for(e=0;e<r;e++)i[e]=n[e];var o=[];for(e=0;e<r-1;e++)for(var a=t[e],s=t[e+1],u=a[0];u<s[0];u++){var l=(u-a[0])/(s[0]-a[0]),c=1-l,h=l,f=s[0]-a[0],p=c*a[1]+h*s[1]+f*f/6*((c*c*c-c)*i[e]+(h*h*h-h)*i[e+1]);p>255?p=255:p<0&&(p=0),o.push([u,p])}return 255===o.length&&o.push(t[t.length-1]),o}},{key:"_secondDerivative",value:function(t){var e=t.length;if(e<=0||1===e)return null;var n,r,i=[],o=[];for(i[0]=[0,1,0],n=1;n<e-1;n++){var a=t[n-1],s=t[n],u=t[n+1];i[n]=i[n]||[],i[n][0]=(s[0]-a[0])/6,i[n][1]=(u[0]-a[0])/3,i[n][2]=(u[0]-s[0])/6,o[n]=(u[1]-s[1])/(u[0]-s[0])-(s[1]-a[1])/(s[0]-a[0])}for(o[0]=0,o[e-1]=0,i[e-1]=[0,1,0],n=1;n<e;n++)r=i[1][0]/i[n-1][1],i[n][1]-=r*i[n-1][2],i[n][0]=0,o[n]-=r*o[n-1];for(n=e-2;n>0;n--)r=i[n][2]/i[n+1][1],i[n][1]-=r*i[n+1][0],i[n][2]=0,o[n]-=r*o[n+1];var l=[];for(n=0;n<e;n++)l[n]=o[n]/i[n][1];return l}}]),e}();d.prototype.availableOptions={rgbControlPoints:{type:h.OptionType.OBJECT},controlPoints:{type:h.OptionType.ARRAY,default:[]},textureGLUnit:{type:h.OptionType.NUMBER,default:1}},e.a=d},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(1),c=n.n(l),h=n(4),f=(n.n(h),n(11)),p=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function v(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function y(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=u()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(a.a?a()(t,e):t.__proto__=e)}var _=function(t){function e(){d(this,e);var t=v(this,(e.__proto__||c()(e)).call(this));return t._fragmentSource=n(300),t}return y(e,h["Engine"].Filter),p(e,[{key:"_applyCanvas",value:function(t,e,n){arguments.length>3&&void 0!==arguments[3]&&arguments[3];for(var r=e.getCanvas(),i=e.getContext(),o=n.getContext(),a=i.getImageData(0,0,r.width,r.height),s=0;s<r.width;s++)for(var u=0;u<r.height;u++){var l=4*(r.width*u+s),c=a.data[l]/255*.3+a.data[l+1]/255*.3+a.data[l+2]/255*.3;c-=.2,c=Math.max(0,Math.min(1,c)),c+=.15,c*=1.4,c*=255,a.data[l]=c,a.data[l+1]=c,a.data[l+2]=c}o.putImageData(a,0,0)}}]),e}(),g=function(t){function e(){var t;d(this,e);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=v(this,(t=e.__proto__||c()(e)).call.apply(t,[this].concat(r)));return o._filter=new _,o}return y(e,f["a"]),e}();e.a=g},function(t,e){t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float gray = texColor.r * 0.3 + texColor.g * 0.3 + texColor.b * 0.3;\n  gray -= 0.2;\n  gray = clamp(gray, 0.0, 1.0);\n  gray += 0.15;\n  gray *= 1.4;\n  gl_FragColor = vec4(vec3(gray) * texColor.a, texColor.a);\n}\n"},function(t,e,n){"use strict";var r=n(5),i=n.n(r),o=n(0),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),h=n(1),f=n.n(h),p=n(4),d=(n.n(p),n(11)),v=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),a()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function y(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function g(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=c()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(u.a?u()(t,e):t.__proto__=e)}var m=p.Math.Vector2,b=p.Math.Vector3,w=function(t){function e(){y(this,e);var t=_(this,(e.__proto__||f()(e)).call(this));return t._precomputeQuads(),t._fragmentSource=n(302),t}return g(e,p["Engine"].Filter),v(e,[{key:"_precomputeQuads",value:function(){this._quads=[];for(var t=0;t<256;t++){var e=t/255*63,n=new m;n.y=.125*(0|e)|0,n.x=(0|e)-8*n.y,this._quads.push(n)}}},{key:"_applyCanvas",value:function(t,e,n){arguments.length>3&&void 0!==arguments[3]&&arguments[3];for(var r=this._options,i=r.resolution,o=r.horizontalTileCount,a=r.verticalTileCount,s=e.getCanvas(),u=e.getContext(),l=n.getContext(),c=this._options.lookupTableImage,h=this._createImageCanvas(c).getContext("2d"),f=u.getImageData(0,0,s.width,s.height),d=h.getImageData(0,0,c.width,c.height),v=new b(i/o-1|0,i/a-1|0,o*a-1|0),y=new p.Color,_=new p.Color,g=new p.Color,w=new p.Color,x=new p.Color,T=new p.Color,k=new p.Color,C=new p.Color,R=new m,E=new m,O=function(t,e,n,r){t.r=e.r*(1-r)+n.r*r,t.g=e.g*(1-r)+n.g*r,t.b=e.b*(1-r)+n.b*r},A=function(t,e,n){var r=4*((n=.5+n|0)*i+(e=.5+e|0));t.r=d.data[r]/255,t.g=d.data[r+1]/255,t.b=d.data[r+2]/255,t.a=d.data[r+3]/255},S=new p.Color,F=new p.Color,I=function(t,e,n,r,i,o,a){O(S,e,r,o),O(F,n,i,o),O(t,S,F,a)},D=new m(i,i).divide(o,a).floor(),M=0;M<s.width*s.height*4;M+=4){y.set(f.data[M]/255,f.data[M+1]/255,f.data[M+2]/255,f.data[M+3]/255);var B=new b(y.r*v.x,y.g*v.y,y.b*v.z),L=B.clone().floor().toInt(),P=B.clone().ceil().toInt(),N=B.clone().fract();R.y=L.z/o|0,R.x=L.z-R.y*o|0,E.y=P.z/o|0,E.x=P.z-E.y*o|0,R.multiply(D),E.multiply(D),A(x,R.x+L.x,R.y+L.y),A(T,R.x+L.x,R.y+P.y),A(k,R.x+P.x,R.y+L.y),A(C,R.x+P.x,R.y+P.y),I(g,x,T,k,C,N.x,N.y),A(x,E.x+L.x,E.y+L.y),A(T,E.x+L.x,E.y+P.y),A(k,E.x+P.x,E.y+L.y),A(C,E.x+P.x,E.y+P.y),I(w,x,T,k,C,N.x,N.y),O(_,g,w,N.z),f.data[M]=Math.ceil(255*_.r),f.data[M+1]=Math.ceil(255*_.g),f.data[M+2]=Math.ceil(255*_.b)}l.putImageData(f,0,0)}},{key:"_createImageCanvas",value:function(t){var e=p.Utils.createCanvas();return e.width=t.width,e.height=t.height,e.getContext("2d").drawImage(t,0,0),e}}]),e}();w.prototype.availableOptions={lookupTable:{type:p.OptionType.NUMBER,default:3,uniformType:p.UniformType.INT},lookupTableImage:{type:p.OptionType.IMAGE,uniformType:null},resolution:{type:p.OptionType.NUMBER,default:128,uniformType:p.UniformType.FLOAT},horizontalTileCount:{type:p.OptionType.NUMBER,default:5,uniformType:p.UniformType.FLOAT},verticalTileCount:{type:p.OptionType.NUMBER,default:5,uniformType:p.UniformType.FLOAT}};var x=function(t){function e(){var t;y(this,e);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=_(this,(t=e.__proto__||f()(e)).call.apply(t,[this].concat(r)));return o._filter=new w,o._textures={},o}return g(e,d["a"]),v(e,[{key:"update",value:function(t){var e=t.getRenderer();e.isOfType(p.RendererType.WEBGL)?this._updateWebGLTexture(t):e.isOfType(p.RendererType.CANVAS)&&this._filter.setLookupTableImage(this._options.image);var n=this._options,r=n.resolution,i=n.verticalTileCount,o=n.horizontalTileCount;this._filter.set({resolution:r,verticalTileCount:i,horizontalTileCount:o})}},{key:"_updateWebGLTexture",value:function(t){var e=t.getRenderer(),n=e.id;this._textures[n]||(this._textures[n]=new p.Engine.BaseTexture);var r=this._textures[n];r.setSource(this._options.image),r.setGLUnit(3),r.setMinFilter(p.Engine.BaseTexture.NearestFilter),e.updateTexture(r)}},{key:"dispose",value:function(){for(var t in function t(e,n,r){null===e&&(e=Function.prototype);var o=i()(e,n);if(void 0===o){var a=f()(e);return null===a?void 0:t(a,n,r)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(r):void 0}(e.prototype.__proto__||f()(e.prototype),"dispose",this).call(this),this._textures)delete this._textures[t]}}]),e}();x.prototype.availableOptions={image:{type:p.OptionType.IMAGE},resolution:{type:p.OptionType.NUMBER,default:128},horizontalTileCount:{type:p.OptionType.NUMBER,default:5},verticalTileCount:{type:p.OptionType.NUMBER,default:5}},e.a=x},function(t,e){t.exports="precision highp float;\n\nuniform sampler2D u_image;\n\nuniform sampler2D u_lookupTable;\n\nuniform float u_resolution;     // Texture-Resolution, must be power of 2: 64, 128, 256, 512, 1024, 2048, 4096\nuniform float u_horizontalTileCount; // Horizontal Blue Tiles\nuniform float u_verticalTileCount; // Vertical Blue Tiles\n\nvarying vec2 v_texCoord;\n\nconst float EPSILON = 0.000001;\n\n// Try to get the exact pixel of the lut map image\nvec3 lutColor(int texPosX, int texPosY) {\n    return texture2D(u_lookupTable, (0.5 / u_resolution) + vec2(float(texPosX), float(texPosY)) / u_resolution).rgb;\n}\n\nvec3 bilinearInterpolate(vec3 cRfGf, vec3 cRfGc, vec3 cRcGf, vec3 cRcGc, float redFract, float greenFract) {\n    return mix(mix(cRfGf, cRcGf, redFract), mix(cRfGc, cRcGc, redFract), greenFract);\n}\n\nvoid main() {\n    vec4 inputColor = clamp(texture2D(u_image, v_texCoord.xy), 0.0, 1.0);\n\n    vec3 sourceColor = vec3(inputColor.rgb / max(inputColor.a, EPSILON)); \n\n    vec3 ranges = vec3(\n        floor(u_resolution / u_horizontalTileCount - 1.0),\n        floor(u_resolution / u_verticalTileCount - 1.0),\n        floor(u_horizontalTileCount * u_horizontalTileCount - 1.0)\n    );\n    \n    vec3 tmp = sourceColor * ranges;\n    ivec3 floors = ivec3(tmp);\n    ivec3 ceils = ivec3(ceil(tmp));\n    vec3 fracts = fract(tmp);\n\n    // Map tile index to tile pixel pos.\n    ivec2 pixelsPerTile = ivec2(\n        u_resolution / u_horizontalTileCount, \n        u_resolution / u_verticalTileCount\n      );\n\n    ivec2 tileFloor; // Blue tile index\n    tileFloor.y = floors.z / int(u_horizontalTileCount);\n    tileFloor.x = (floors.z - (tileFloor.y * int(u_horizontalTileCount)));\n\n    ivec2 tileCeil; // Blue tile index\n    tileCeil.y = ceils.z / int(u_horizontalTileCount);\n    tileCeil.x = (ceils.z - (tileCeil.y * int(u_horizontalTileCount)));\n    \n    tileFloor *= pixelsPerTile;\n    tileCeil *= pixelsPerTile; \n    \n    \n    // Interpolate between red and green\n    vec3 lutColorFB = bilinearInterpolate(\n        lutColor(tileFloor.x + floors.x, tileFloor.y + floors.y),\n        lutColor(tileFloor.x + floors.x, tileFloor.y + ceils.y),\n        lutColor(tileFloor.x + ceils.x,  tileFloor.y + floors.y),\n        lutColor(tileFloor.x + ceils.x,  tileFloor.y + ceils.y),\n        fracts.x, fracts.y\n    );\n    vec3 lutColorCB = bilinearInterpolate(\n        lutColor(tileCeil.x + floors.x, tileCeil.y + floors.y),\n        lutColor(tileCeil.x + floors.x, tileCeil.y + ceils.y),\n        lutColor(tileCeil.x + ceils.x,  tileCeil.y + floors.y),\n        lutColor(tileCeil.x + ceils.x,  tileCeil.y + ceils.y),\n        fracts.x, fracts.y\n    );\n\n    // Interpolate between the blue values\n    vec3 interpolation = mix(lutColorFB, lutColorCB, fracts.z);\n\n    // Round Color Values to prevent that for ex. 254.999999 is cutting to 254 instead of 255;\n    interpolation = clamp(floor(interpolation * 255. + .5) / 255., 0.0, 1.0);\n\n    gl_FragColor = vec4(interpolation.rgb * inputColor.a, inputColor.a);\n}\n"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(145);n.d(e,"IdentityFilter",function(){return r.a});var i=n(304);n.d(e,"A15Filter",function(){return i.a});var o=n(305);n.d(e,"BreezeFilter",function(){return o.a});var a=n(306);n.d(e,"BWFilter",function(){return a.a});var s=n(307);n.d(e,"BWHardFilter",function(){return s.a});var u=n(308);n.d(e,"CelsiusFilter",function(){return u.a});var l=n(309);n.d(e,"ChestFilter",function(){return l.a});var c=n(310);n.d(e,"DuoToneFilter",function(){return c.a});var h=n(311);n.d(e,"FixieFilter",function(){return h.a});var f=n(312);n.d(e,"FoodFilter",function(){return f.a});var p=n(313);n.d(e,"FridgeFilter",function(){return p.a});var d=n(314);n.d(e,"FrontFilter",function(){return d.a});var v=n(315);n.d(e,"GlamFilter",function(){return v.a});var y=n(316);n.d(e,"GobblinFilter",function(){return y.a});var _=n(317);n.d(e,"K1Filter",function(){return _.a});var g=n(318);n.d(e,"K2Filter",function(){return g.a});var m=n(319);n.d(e,"K6Filter",function(){return m.a});var b=n(320);n.d(e,"KDynamicFilter",function(){return b.a});var w=n(321);n.d(e,"LeninFilter",function(){return w.a});var x=n(322);n.d(e,"LomoFilter",function(){return x.a});var T=n(323);n.d(e,"MellowFilter",function(){return T.a});var k=n(324);n.d(e,"MetalFilter",function(){return k.a});var C=n(325);n.d(e,"MorningFilter",function(){return C.a});var R=n(326);n.d(e,"OrchidFilter",function(){return R.a});var E=n(327);n.d(e,"PolaFilter",function(){return E.a});var O=n(328);n.d(e,"Pola669Filter",function(){return O.a});var A=n(329);n.d(e,"QuoziFilter",function(){return A.a});var S=n(330);n.d(e,"SemiredFilter",function(){return S.a});var F=n(331);n.d(e,"SunnyFilter",function(){return F.a});var I=n(332);n.d(e,"TexasFilter",function(){return I.a});var D=n(333);n.d(e,"X400Filter",function(){return D.a});var M=n(334);n.d(e,"LUTFilter",function(){return M.a});var B=n(335);n.d(e,"ThreeDLUTFilter",function(){return B.a})},function(t,e,n){"use strict";var r=n(2),i=n.n(r),o=n(3),a=n.n(o),s=n(1),u=n.n(s),l=n(7),c=n(8);var h=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(t=e.__proto__||u()(e)).call.apply(t,[this].concat(r)));return o._stack.push(new c.Contrast({contrast:.63})),o._stack.push(new c.Brightness({brightness:.12})),o._stack.push(new c.ToneCurve({rgbControlPoints:{red:[[0,38],[94,94],[148,142],[175,187],[255,255]],green:[[0,0],[77,53],[171,190],[255,255]],blue:[[0,10],[48,85],[174,228],[255,255]]}})),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=a()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(i.a?i()(t,e):t.__proto__=e)}(e,l["a"]),e}();h.identifier="a15",e.a=h},function(t,e,n){"use strict";var r=n(2),i=n.n(r),o=n(3),a=n.n(o),s=n(1),u=n.n(s),l=n(7),c=n(8);var h=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(t=e.__proto__||u()(e)).call.apply(t,[this].concat(r)));return o._stack.push(new c.Desaturation({desaturation:.5})),o._stack.push(new c.ToneCurve({rgbControlPoints:{red:[[0,0],[170,170],[212,219],[234,242],[255,255]],green:[[0,0],[170,168],[234,231],[255,255]],blue:[[0,0],[170,170],[212,208],[255,255]]}})),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=a()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(i.a?i()(t,e):t.__proto__=e)}(e,l["a"]),e}();h.identifier="breeze",e.a=h},function(t,e,n){"use strict";var r=n(2),i=n.n(r),o=n(3),a=n.n(o),s=n(1),u=n.n(s),l=n(7),c=n(8);var h=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(t=e.__proto__||u()(e)).call.apply(t,[this].concat(r)));return o._stack.push(new c.Grayscale),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=a()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(i.a?i()(t,e):t.__proto__=e)}(e,l["a"]),e}();h.identifier="bw",e.a=h},function(t,e,n){"use strict";var r=n(2),i=n.n(r),o=n(3),a=n.n(o),s=n(1),u=n.n(s),l=n(7),c=n(8);var h=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(t=e.__proto__||u()(e)).call.apply(t,[this].concat(r)));return o._stack.push(new c.Grayscale),o._stack.push(new c.Contrast({contrast:1.5})),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=a()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(i.a?i()(t,e):t.__proto__=e)}(e,l["a"]),e}();h.identifier="bwhard",e.a=h},function(t,e,n){"use strict";var r=n(2),i=n.n(r),o=n(3),a=n.n(o),s=n(1),u=n.n(s),l=n(7),c=n(8);var h=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(t=e.__proto__||u()(e)).call.apply(t,[this].concat(r)));return o._stack.push(new c.ToneCurve({rgbControlPoints:{red:[[0,69],[55,110],[202,230],[255,255]],green:[[0,44],[89,93],[185,141],[255,189]],blue:[[0,76],[39,82],[218,138],[255,171]]}})),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=a()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(i.a?i()(t,e):t.__proto__=e)}(e,l["a"]),e}();h.identifier="celsius",e.a=h},function(t,e,n){"use strict";var r=n(2),i=n.n(r),o=n(3),a=n.n(o),s=n(1),u=n.n(s),l=n(7),c=n(8);var h=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(t=e.__proto__||u()(e)).call.apply(t,[this].concat(r)));return o._stack.push(new c.ToneCurve({rgbControlPoints:{red:[[0,0],[44,44],[124,143],[221,204],[255,255]],green:[[0,0],[130,127],[213,199],[255,255]],blue:[[0,0],[51,52],[219,204],[255,255]]}})),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=a()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(i.a?i()(t,e):t.__proto__=e)}(e,l["a"]),e}();h.identifier="chest",e.a=h},function(t,e,n){"use strict";var r=n(2),i=n.n(r),o=n(3),a=n.n(o),s=n(1),u=n.n(s),l=n(4),c=(n.n(l),n(7)),h=n(8);var f=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(t=e.__proto__||u()(e)).call.apply(t,[this].concat(r,[{intensity:{type:l.OptionType.NUMBER,default:.5,required:!0,setter:function(t){return this._filterPrimitive&&(this._filterPrimitive.setIntensity(t),this._stack.setIntensity(1)),this._dirty=!0,t}}}])));return o._filterPrimitive=new h.DuoTone({lightColor:o._options.lightColor||l.Color.WHITE,darkColor:o._options.darkColor||l.Color.BLACK,intensity:o._options.intensity||.5}),o._stack.push(o._filterPrimitive),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=a()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(i.a?i()(t,e):t.__proto__=e)}(e,c["a"]),e}();f.prototype.availableOptions={lightColor:{type:l.OptionType.COLOR,default:l.Color.WHITE,required:!0,setter:function(t){return this._filterPrimitive&&this._filterPrimitive.setLightColor(t),this.setDirty&&this.setDirty(!0),t}},darkColor:{type:l.OptionType.COLOR,default:l.Color.BLACK,required:!0,setter:function(t){return this._filterPrimitive&&this._filterPrimitive.setDarkColor(t),this.setDirty&&this.setDirty(!0),t}},intensity:{type:l.OptionType.NUMBER,default:.5,required:!0}},f.identifier="duotone",e.a=f},function(t,e,n){"use strict";var r=n(2),i=n.n(r),o=n(3),a=n.n(o),s=n(1),u=n.n(s),l=n(7),c=n(8);var h=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(t=e.__proto__||u()(e)).call.apply(t,[this].concat(r)));return o._stack.push(new c.ToneCurve({rgbControlPoints:{red:[[0,0],[44,28],[63,48],[128,132],[235,248],[255,255]],green:[[0,0],[20,10],[60,45],[190,209],[211,231],[255,255]],blue:[[0,31],[41,62],[150,142],[234,212],[255,224]]}})),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=a()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(i.a?i()(t,e):t.__proto__=e)}(e,l["a"]),e}();h.identifier="fixie",e.a=h},function(t,e,n){"use strict";var r=n(2),i=n.n(r),o=n(3),a=n.n(o),s=n(1),u=n.n(s),l=n(7),c=n(8);var h=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(t=e.__proto__||u()(e)).call.apply(t,[this].concat(r)));return o._stack.push(new c.Saturation({saturation:1.35})),o._stack.push(new c.Contrast({contrast:1.1})),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=a()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(i.a?i()(t,e):t.__proto__=e)}(e,l["a"]),e}();h.identifier="food",e.a=h},function(t,e,n){"use strict";var r=n(2),i=n.n(r),o=n(3),a=n.n(o),s=n(1),u=n.n(s),l=n(7),c=n(8);var h=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(t=e.__proto__||u()(e)).call.apply(t,[this].concat(r)));return o._stack.push(new c.ToneCurve({rgbControlPoints:{red:[[0,9],[21,11],[45,24],[255,220]],green:[[0,12],[21,21],[42,42],[150,150],[170,173],[255,210]],blue:[[0,28],[43,72],[128,185],[255,220]]}})),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=a()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(i.a?i()(t,e):t.__proto__=e)}(e,l["a"]),e}();h.identifier="fridge",e.a=h},function(t,e,n){"use strict";var r=n(2),i=n.n(r),o=n(3),a=n.n(o),s=n(1),u=n.n(s),l=n(7),c=n(8);var h=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(t=e.__proto__||u()(e)).call.apply(t,[this].concat(r)));return o._stack.push(new c.ToneCurve({rgbControlPoints:{red:[[0,65],[28,67],[67,113],[125,183],[187,217],[255,229]],green:[[0,52],[42,59],[104,134],[169,209],[255,240]],blue:[[0,52],[65,68],[93,104],[150,153],[255,198]]}})),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=a()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(i.a?i()(t,e):t.__proto__=e)}(e,l["a"]),e}();h.identifier="front",e.a=h},function(t,e,n){"use strict";var r=n(2),i=n.n(r),o=n(3),a=n.n(o),s=n(1),u=n.n(s),l=n(7),c=n(8);var h=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(t=e.__proto__||u()(e)).call.apply(t,[this].concat(r)));return o._stack.push(new c.Contrast({contrast:1.1})),o._stack.push(new c.ToneCurve({rgbControlPoints:{red:[[0,0],[94,74],[181,205],[255,255]],green:[[0,0],[127,127],[255,255]],blue:[[0,0],[102,73],[227,213],[255,255]]}})),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=a()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(i.a?i()(t,e):t.__proto__=e)}(e,l["a"]),e}();h.identifier="glam",e.a=h},function(t,e,n){"use strict";var r=n(2),i=n.n(r),o=n(3),a=n.n(o),s=n(1),u=n.n(s),l=n(7),c=n(8);var h=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(t=e.__proto__||u()(e)).call.apply(t,[this].concat(r)));return o._stack.push(new c.Gobblin),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=a()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(i.a?i()(t,e):t.__proto__=e)}(e,l["a"]),e}();h.identifier="gobblin",e.a=h},function(t,e,n){"use strict";var r=n(2),i=n.n(r),o=n(3),a=n.n(o),s=n(1),u=n.n(s),l=n(7),c=n(8);var h=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(t=e.__proto__||u()(e)).call.apply(t,[this].concat(r)));return o._stack.push(new c.ToneCurve({controlPoints:[[0,0],[53,32],[91,80],[176,205],[255,255]]})),o._stack.push(new c.Saturation({saturation:.9})),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=a()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(i.a?i()(t,e):t.__proto__=e)}(e,l["a"]),e}();h.identifier="k1",e.a=h},function(t,e,n){"use strict";var r=n(2),i=n.n(r),o=n(3),a=n.n(o),s=n(1),u=n.n(s),l=n(4),c=(n.n(l),n(7)),h=n(8);var f=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(t=e.__proto__||u()(e)).call.apply(t,[this].concat(r)));return o._stack.push(new h.ToneCurve({controlPoints:[[0,0],[54,33],[77,82],[94,103],[122,126],[177,193],[229,232],[255,255]]})),o._stack.push(new h.SoftColorOverlay({color:new l.Color(40/255,40/255,40/255)})),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=a()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(i.a?i()(t,e):t.__proto__=e)}(e,c["a"]),e}();f.identifier="k2",e.a=f},function(t,e,n){"use strict";var r=n(2),i=n.n(r),o=n(3),a=n.n(o),s=n(1),u=n.n(s),l=n(7),c=n(8);var h=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(t=e.__proto__||u()(e)).call.apply(t,[this].concat(r)));return o._stack.push(new c.Saturation({saturation:.5})),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=a()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(i.a?i()(t,e):t.__proto__=e)}(e,l["a"]),e}();h.identifier="k6",e.a=h},function(t,e,n){"use strict";var r=n(2),i=n.n(r),o=n(3),a=n.n(o),s=n(1),u=n.n(s),l=n(7),c=n(8);var h=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(t=e.__proto__||u()(e)).call.apply(t,[this].concat(r)));return o._stack.push(new c.ToneCurve({controlPoints:[[0,0],[17,27],[46,69],[90,112],[156,200],[203,243],[255,255]]})),o._stack.push(new c.Saturation({saturation:.7})),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=a()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(i.a?i()(t,e):t.__proto__=e)}(e,l["a"]),e}();h.identifier="kdynamic",e.a=h},function(t,e,n){"use strict";var r=n(2),i=n.n(r),o=n(3),a=n.n(o),s=n(1),u=n.n(s),l=n(7),c=n(8);var h=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(t=e.__proto__||u()(e)).call.apply(t,[this].concat(r)));return o._stack.push(new c.Desaturation({desaturation:.4})),o._stack.push(new c.ToneCurve({rgbControlPoints:{red:[[0,20],[40,20],[106,111],[129,153],[190,223],[255,255]],green:[[0,20],[40,20],[62,41],[106,108],[132,159],[203,237],[255,255]],blue:[[0,40],[40,40],[73,60],[133,160],[191,297],[203,237],[237,239],[255,255]]}})),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=a()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(i.a?i()(t,e):t.__proto__=e)}(e,l["a"]),e}();h.identifier="lenin",e.a=h},function(t,e,n){"use strict";var r=n(2),i=n.n(r),o=n(3),a=n.n(o),s=n(1),u=n.n(s),l=n(7),c=n(8);var h=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(t=e.__proto__||u()(e)).call.apply(t,[this].concat(r)));return o._stack.push(new c.ToneCurve({controlPoints:[[0,0],[87,20],[131,156],[183,205],[255,200]]})),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=a()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(i.a?i()(t,e):t.__proto__=e)}(e,l["a"]),e}();h.identifier="lomo",e.a=h},function(t,e,n){"use strict";var r=n(2),i=n.n(r),o=n(3),a=n.n(o),s=n(1),u=n.n(s),l=n(7),c=n(8);var h=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(t=e.__proto__||u()(e)).call.apply(t,[this].concat(r)));return o._stack.push(new c.ToneCurve({rgbControlPoints:{red:[[0,0],[41,84],[87,134],[255,255]],green:[[0,0],[255,216]],blue:[[0,0],[255,131]]}})),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=a()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(i.a?i()(t,e):t.__proto__=e)}(e,l["a"]),e}();h.identifier="mellow",e.a=h},function(t,e,n){"use strict";var r=n(2),i=n.n(r),o=n(3),a=n.n(o),s=n(1),u=n.n(s),l=n(4),c=(n.n(l),n(7)),h=n(8);var f=l.Math.ColorMatrix,p=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(t=e.__proto__||u()(e)).call.apply(t,[this].concat(r))),a=new f(.8158218291630716,0,0,0,-.01779810181190647,0,.8098360655737704,0,0,.0916393442622953,0,0,.4596336773932402,0,.12760574782432707,0,0,0,1,0);o._stack.push(new h.ColorMatrixPrimitive({colorMatrix:a}));var s=new l.Color(.8,.6,.9);return o._stack.push(new h.Gamma({gamma:s})),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=a()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(i.a?i()(t,e):t.__proto__=e)}(e,c["a"]),e}();p.identifier="metal",e.a=p},function(t,e,n){"use strict";var r=n(2),i=n.n(r),o=n(3),a=n.n(o),s=n(1),u=n.n(s),l=n(7),c=n(8);var h=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(t=e.__proto__||u()(e)).call.apply(t,[this].concat(r)));return o._stack.push(new c.ToneCurve({rgbControlPoints:{red:[[0,40],[255,230]],green:[[0,10],[255,225]],blue:[[0,20],[255,181]]}})),o._stack.push(new c.Glow),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=a()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(i.a?i()(t,e):t.__proto__=e)}(e,l["a"]),e}();h.identifier="morning",e.a=h},function(t,e,n){"use strict";var r=n(2),i=n.n(r),o=n(3),a=n.n(o),s=n(1),u=n.n(s),l=n(7),c=n(8);var h=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(t=e.__proto__||u()(e)).call.apply(t,[this].concat(r)));return o._stack.push(new c.ToneCurve({rgbControlPoints:{red:[[0,0],[115,130],[195,215],[255,255]],green:[[0,0],[148,153],[172,215],[255,255]],blue:[[0,46],[58,75],[178,205],[255,255]]},textureGLUnit:2})),o._stack.push(new c.ToneCurve({controlPoints:[[0,0],[117,151],[189,217],[255,255]],textureGLUnit:3})),o._stack.push(new c.Desaturation({desaturation:.65})),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=a()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(i.a?i()(t,e):t.__proto__=e)}(e,l["a"]),e}();h.identifier="orchid",e.a=h},function(t,e,n){"use strict";var r=n(2),i=n.n(r),o=n(3),a=n.n(o),s=n(1),u=n.n(s),l=n(7),c=n(8);var h=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(t=e.__proto__||u()(e)).call.apply(t,[this].concat(r)));return o._stack.push(new c.ToneCurve({rgbControlPoints:{red:[[0,0],[94,74],[181,205],[255,255]],green:[[0,0],[34,34],[99,76],[176,190],[255,255]],blue:[[0,0],[102,73],[227,213],[255,255]]}})),o._stack.push(new c.Saturation({saturation:.8})),o._stack.push(new c.Contrast({contrast:1.5})),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=a()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(i.a?i()(t,e):t.__proto__=e)}(e,l["a"]),e}();h.identifier="pola",e.a=h},function(t,e,n){"use strict";var r=n(2),i=n.n(r),o=n(3),a=n.n(o),s=n(1),u=n.n(s),l=n(7),c=n(8);var h=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(t=e.__proto__||u()(e)).call.apply(t,[this].concat(r)));return o._stack.push(new c.ToneCurve({rgbControlPoints:{red:[[0,0],[56,18],[196,209],[255,255]],green:[[0,38],[71,84],[255,255]],blue:[[0,0],[131,133],[204,211],[255,255]]}})),o._stack.push(new c.Saturation({saturation:.8})),o._stack.push(new c.Contrast({contrast:1.5})),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=a()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(i.a?i()(t,e):t.__proto__=e)}(e,l["a"]),e}();h.identifier="pola669",e.a=h},function(t,e,n){"use strict";var r=n(2),i=n.n(r),o=n(3),a=n.n(o),s=n(1),u=n.n(s),l=n(7),c=n(8);var h=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(t=e.__proto__||u()(e)).call.apply(t,[this].concat(r)));return o._stack.push(new c.Desaturation({desaturation:.65})),o._stack.push(new c.ToneCurve({rgbControlPoints:{red:[[0,50],[40,78],[118,170],[181,211],[255,255]],green:[[0,27],[28,45],[109,157],[157,195],[179,208],[206,212],[255,240]],blue:[[0,50],[12,55],[46,103],[103,162],[194,182],[241,201],[255,219]]}})),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=a()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(i.a?i()(t,e):t.__proto__=e)}(e,l["a"]),e}();h.identifier="quozi",e.a=h},function(t,e,n){"use strict";var r=n(2),i=n.n(r),o=n(3),a=n.n(o),s=n(1),u=n.n(s),l=n(7),c=n(8);var h=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(t=e.__proto__||u()(e)).call.apply(t,[this].concat(r)));return o._stack.push(new c.ToneCurve({rgbControlPoints:{red:[[0,129],[75,153],[181,227],[255,255]],green:[[0,8],[111,85],[212,158],[255,226]],blue:[[0,5],[75,22],[193,90],[255,229]]}})),o._stack.push(new c.Glow),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=a()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(i.a?i()(t,e):t.__proto__=e)}(e,l["a"]),e}();h.identifier="semired",e.a=h},function(t,e,n){"use strict";var r=n(2),i=n.n(r),o=n(3),a=n.n(o),s=n(1),u=n.n(s),l=n(7),c=n(8);var h=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(t=e.__proto__||u()(e)).call.apply(t,[this].concat(r)));return o._stack.push(new c.ToneCurve({rgbControlPoints:{red:[[0,0],[62,82],[141,154],[255,255]],green:[[0,39],[56,96],[192,176],[255,255]],blue:[[0,0],[174,99],[255,235]]},textureGLUnit:2})),o._stack.push(new c.ToneCurve({controlPoints:[[0,0],[55,20],[158,191],[255,255]],textureGLUnit:3})),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=a()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(i.a?i()(t,e):t.__proto__=e)}(e,l["a"]),e}();h.identifier="sunny",e.a=h},function(t,e,n){"use strict";var r=n(2),i=n.n(r),o=n(3),a=n.n(o),s=n(1),u=n.n(s),l=n(7),c=n(8);var h=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(t=e.__proto__||u()(e)).call.apply(t,[this].concat(r)));return o._stack.push(new c.ToneCurve({rgbControlPoints:{red:[[0,72],[89,99],[176,212],[255,237]],green:[[0,49],[255,192]],blue:[[0,72],[255,151]]}})),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=a()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(i.a?i()(t,e):t.__proto__=e)}(e,l["a"]),e}();h.identifier="texas",e.a=h},function(t,e,n){"use strict";var r=n(2),i=n.n(r),o=n(3),a=n.n(o),s=n(1),u=n.n(s),l=n(7),c=n(8);var h=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(t=e.__proto__||u()(e)).call.apply(t,[this].concat(r)));return o._stack.push(new c.X400),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=a()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(i.a?i()(t,e):t.__proto__=e)}(e,l["a"]),e}();h.identifier="x400",e.a=h},function(t,e,n){"use strict";var r=n(2),i=n.n(r),o=n(3),a=n.n(o),s=n(1),u=n.n(s),l=n(4),c=(n.n(l),n(7)),h=n(8);var f=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(t=e.__proto__||u()(e)).call.apply(t,[this].concat(r)));return o._lutPrimitive=new h.LookupTableImage({image:o._options.image}),o._stack.push(o._lutPrimitive),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=a()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(i.a?i()(t,e):t.__proto__=e)}(e,c["a"]),e}();f.prototype.availableOptions={image:{type:l.OptionType.IMAGE,required:!0,setter:function(t){return this._lutPrimitive&&this._lutPrimitive.setImage(t),this.setDirty(!0),t}}},f.identifier="lut",e.a=f},function(t,e,n){"use strict";var r=n(2),i=n.n(r),o=n(3),a=n.n(o),s=n(1),u=n.n(s),l=n(4),c=(n.n(l),n(7)),h=n(8);var f=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(t=e.__proto__||u()(e)).call.apply(t,[this].concat(r))),a=o._options,s=a.image,l=a.resolution,c=a.verticalTileCount,f=a.horizontalTileCount;return o._lutPrimitive=new h.ThreeDLookupTableImage({image:s,resolution:l,verticalTileCount:c,horizontalTileCount:f}),o._stack.push(o._lutPrimitive),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=a()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(i.a?i()(t,e):t.__proto__=e)}(e,c["a"]),e}();f.prototype.availableOptions={image:{type:l.OptionType.IMAGE,required:!0,setter:function(t){return this._lutPrimitive&&this._lutPrimitive.setImage(t),this.setDirty(!0),t}},resolution:{type:l.OptionType.NUMBER,default:128},horizontalTileCount:{type:l.OptionType.NUMBER,default:5},verticalTileCount:{type:l.OptionType.NUMBER,default:5}},f.identifier="3d-lut",e.a=f},function(t,e,n){"use strict";var r=n(36),i=n.n(r),o=n(40),a=n.n(o),s=n(0),u=n.n(s),l=n(5),c=n.n(l),h=n(2),f=n.n(h),p=n(3),d=n.n(p),v=n(1),y=n.n(v),_=n(4),g=n.n(_),m="function"==typeof a.a&&"symbol"==typeof i.a?function(t){return typeof t}:function(t){return t&&"function"==typeof a.a&&t.constructor===a.a&&t!==a.a.prototype?"symbol":typeof t},b=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),u()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var w=_.Math.Vector2,x=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(t=e.__proto__||y()(e)).call.apply(t,[this].concat(r)));return o._colorOverlayFilter=new _.Engine.Filters.ColorOverlayFilter({color:o.getTintColor()}),o._frameContainer=new _.Engine.Container,o._resetSprites(),o._options.frame&&o._createSpritesForFrame(o._options.frame),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=d()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(f.a?f()(t,e):t.__proto__=e)}(e,_["Operation"]),b(e,[{key:"_resetSprites",value:function(){this._spriteGroups={top:{},left:{},right:{},bottom:{}},this._sprites=[],this._repeatSprites={top:[],left:[],right:[],bottom:[]}}},{key:"_createSpritesForFrame",value:function(t){var e=this;if(!t)return this._disposeSprites();var n=t.imageGroups,r=t.layoutMode;this._layoutMode=r||"horizontal-inside",this._disposeSprites(),["top","left","right","bottom"].forEach(function(t){void 0!==n[t]&&["start","mid","end"].forEach(function(r){if(void 0!==n[t][r]){var i=n[t][r];"image"in i&&(i=i.image);var o=_.Engine.Texture.fromImage(i),a=new _.Engine.Sprite(o);e._spriteGroups[t][r]=a,e._sprites.push(a),e._frameContainer.addChild(a)}})})}},{key:"_render",value:function(t){var e=this._renderTexture.getDimensions();return this._options.frame&&(this._colorOverlayFilter.setColor(this.getTintColor()),this._updateSprites(t)),this._frameRenderTexture?this._frameRenderTexture.resizeTo(e):(this._frameRenderTexture=new _.Engine.RenderTexture(this._sdk.getRenderer(),e.x,e.y),this._frameSprite=new _.Engine.Sprite(this._frameRenderTexture),this._container.addChild(this._frameSprite)),this._frameSprite.setAlpha(this._options.alpha),this._options.frame&&this._options.frame.tintable?this._frameSprite.setFilters([this._colorOverlayFilter]):this._frameSprite.setFilters([]),this._frameRenderTexture.clear(),this._frameRenderTexture.render(this._frameContainer),this._renderTexture.render(this._container),_.Promise.resolve(this._renderTexture)}},{key:"_updateSprites",value:function(t){var e=t.getDimensions();this._frameWidth=Math.ceil(t.getDimensions().min()*this._options.scale),this._updateHorizontalSpriteGroup(t,"top",0),this._updateHorizontalSpriteGroup(t,"bottom",e.y-this._frameWidth),this._updateVerticalSpriteGroup(t,"left",0),this._updateVerticalSpriteGroup(t,"right",e.x-this._frameWidth)}},{key:"_updateHorizontalSpriteGroup",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=t.getDimensions(),i="vertical-inside"===this._layoutMode,o=this._spriteGroups[e].start,a=this._spriteGroups[e].mid,s=this._spriteGroups[e].end,u=0,l=0,c=void 0,h=void 0;if(o){h=(c=o.getTexture().getDimensions()).y/c.x,u=Math.floor(this._frameWidth/h);var f=new w(0,n);f.x=i?this._frameWidth:0,o.setPosition(f),o.setHeight(this._frameWidth),o.setWidth(u)}if(s){h=(c=s.getTexture().getDimensions()).y/c.x,l=Math.floor(this._frameWidth*h);var p=new w(r.x-l,n);p.x-=i?this._frameWidth:0,s.setPosition(p),s.setHeight(this._frameWidth),s.setWidth(l)}if(a){h=(c=a.getTexture().getDimensions()).y/c.x;var d=new w(u,n),v=r.x-u-l;if(i&&(d.x+=this._frameWidth,v-=2*this._frameWidth),a.setPosition(d),a.setWidth(v),a.setHeight(this._frameWidth),"repeat"===this._options.frame.imageGroups[e].mid.mode){var y=this._frameWidth/h,_=Math.ceil(v/y),g=0;if(-1!==_){var m=Math.round(v/_);a.setWidth(m),g+=m,this._ensureRepeatSpritesExist(_-1,e,a);for(var b=0;b<_-1;b++){m=Math.round((v-g)/(_-b-1));var x=this._repeatSprites[e][b],T=d.clone().add(g,0).floor();x.setPosition(T),x.setWidth(m),x.setHeight(this._frameWidth),g+=m}}}}}},{key:"_ensureRepeatSpritesExist",value:function(t,e,n){var r=this;n.getTexture().setMaxListeners(t+1);var i=this._repeatSprites[e].length;if(t>i)for(var o=t-i,a=0;a<o;a++){var s=new _.Engine.Sprite(n.getTexture());this._repeatSprites[e].push(s),this._frameContainer.addChild(s),this._sprites.push(s)}else if(t<i){this._repeatSprites[e].splice(t).forEach(function(t){var e=r._sprites.indexOf(t);-1!==e&&(r._sprites.splice(e,1),r._frameContainer.removeChild(t),t.dispose())})}}},{key:"_updateVerticalSpriteGroup",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=t.getDimensions(),i="horizontal-inside"===this._layoutMode,o=this._spriteGroups[e].start,a=this._spriteGroups[e].mid,s=this._spriteGroups[e].end,u=0,l=0,c=void 0,h=void 0;if(o){h=(c=o.getTexture().getDimensions()).y/c.x,u=Math.floor(this._frameWidth*h);var f=new w(n,0);f.y=i?this._frameWidth:0,o.setPosition(f),o.setWidth(this._frameWidth),o.setHeight(u)}if(s){h=(c=s.getTexture().getDimensions()).y/c.x,l=Math.floor(this._frameWidth*h);var p=new w(n,r.y-l);p.y-=i?this._frameWidth:0,s.setPosition(p),s.setWidth(this._frameWidth),s.setHeight(l)}if(a){h=(c=a.getTexture().getDimensions()).y/c.x;var d=new w(n,u),v=r.y-u-l;if(i&&(d.y+=this._frameWidth,v-=2*this._frameWidth),a.setPosition(d),a.setHeight(v),a.setWidth(this._frameWidth),"repeat"===this._options.frame.imageGroups[e].mid.mode){var y=this._frameWidth*h,_=Math.ceil(v/y),g=0;if(-1!==_){var m=Math.round(v/_);a.setHeight(m),g+=m,this._ensureRepeatSpritesExist(_-1,e,a);for(var b=0;b<_-1;b++){m=Math.round((v-g)/(_-b-1));var x=this._repeatSprites[e][b],T=d.clone().add(0,g).floor();x.setPosition(T),x.setHeight(m),x.setWidth(this._frameWidth),g+=m}}}}}},{key:"_disposeSprites",value:function(){var t=this;this._sprites.forEach(function(e){t._frameContainer.removeChild(e),e.getTexture().getBaseTexture().dispose(),e.dispose()}),this._resetSprites()}},{key:"dispose",value:function(){(function t(e,n,r){null===e&&(e=Function.prototype);var i=c()(e,n);if(void 0===i){var o=y()(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0})(e.prototype.__proto__||y()(e.prototype),"dispose",this).call(this),this._disposeSprites()}}],[{key:"validateFrame",value:function(t){if(t){var e=t.imageGroups,n=t.layoutMode;if("string"!=typeof t.identifier)throw new Error("Frame needs a property `identifier` of type String.");if("object"!==m(t.imageGroups))throw new Error("Frame needs a property `imageGroups` of type Object.");var r=function(t){var n=e[t],r=n.start,i=n.end,o=n.mid;if(void 0!==e[t]){if("object"!==m(e[t]))throw new Error("Frame: `imageGroups."+t+"` needs to be of type Object.");if(void 0!==r&&!(r instanceof _.Image||"undefined"!=typeof HTMLImageElement&&r instanceof HTMLImageElement))throw new Error("Frame: `imageGroups."+t+".start` needs to be of type Image.");if(void 0!==o&&!(r instanceof _.Image||"undefined"!=typeof HTMLImageElement&&r instanceof HTMLImageElement)&&"object"!==(void 0===o?"undefined":m(o)))throw new Error("Frame: `imageGroups."+t+".mid` needs to be of type Image or Object.");if(void 0!==i&&!(i instanceof _.Image||"undefined"!=typeof HTMLImageElement&&i instanceof HTMLImageElement))throw new Error("Frame: `imageGroups."+t+".end` needs to be of type Image.")}};if(void 0!==n&&-1===["vertical-inside","horizontal-inside"].indexOf(n))throw new Error("Frame: `layoutMode` must be one of vertical-inside, horizontal-inside");if("undefined"!=typeof tintable&&"boolean"!=typeof tintable)throw new Error("Frame: `tintable` needs to be of type Boolean.");r("top"),r("left"),r("right"),r("bottom")}}}]),e}();x.identifier="frame",x.prototype.availableOptions={frame:{type:_.OptionType.OBJECT,validation:x.validateFrame,setter:function(t,e){return e||this._createSpritesForFrame(t),t},default:null},alpha:{type:_.OptionType.NUMBER,default:1},tintColor:{type:_.OptionType.COLOR,default:new _.Color(1,1,1,0)},scale:{type:_.OptionType.NUMBER,default:.1}},g.a.Operations.FrameOperation=x,e.a=x},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(1),c=n.n(l),h=n(4),f=n.n(h),p=n(338),d=n(340),v=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var y=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(t=e.__proto__||c()(e)).call.apply(t,[this].concat(r)));return o._applyWatermarkFilter=function(){return o._watermarkFilter||(o._watermarkFilter=new p.a({watermarkImage:o._watermarkImage})),o._sprite.setFilters([o._watermarkFilter]),o._renderTexture.render(o._container),h.Promise.resolve()},o._loadWatermarkImage=function(){return o._watermarkImage?h.Promise.resolve():new h.Promise(function(t,e){o._watermarkImage=new h.Image,o._watermarkImage.onload=t,o._watermarkImage.src=d.a})},o._watermarkFilter=null,o._watermarkImage=null,o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=u()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(a.a?a()(t,e):t.__proto__=e)}(e,h["Operation"]),v(e,[{key:"_render",value:function(t){return this._loadWatermarkImage().then(this._applyWatermarkFilter)}}]),e}();y.identifier="license-watermark",y.prototype.availableOptions={},f.a.Operations.LicenseWatermarkOperation=y,e.a=y},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(1),c=n.n(l),h=n(4),f=(n.n(h),function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}());var p=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(t=e.__proto__||c()(e)).call.apply(t,[this].concat(i)));return a._fragmentSource=n(339),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=u()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(a.a?a()(t,e):t.__proto__=e)}(e,h["Engine"].Filter),f(e,[{key:"_applyWebGL",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=t.getContext(),o=(i.canvas,this.getShaderForRenderer(t)),a=e.getFrame();this._createWatermarkCanvas(a.width,a.height);var s=h.Engine.Texture.fromCanvas(this._watermarkCanvas),u=s.getBaseTexture();t.updateTexture(u),u.setGLUnit(1),t.setRenderTarget(n),r&&n.clear(),t.setShader(o);var l=t.getCurrentRenderTarget().getProjectionMatrix().toArray();o.setUniform("u_projMatrix",l),o.syncUniforms(),i.uniform1i(i.getUniformLocation(o.getProgram(),"u_watermarkTex"),1),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,e.getTexture()),i.activeTexture(i.TEXTURE1),i.bindTexture(i.TEXTURE_2D,u.getGLTextureForRenderer(t)),i.drawElements(i.TRIANGLES,6,i.UNSIGNED_SHORT,0),s.dispose()}},{key:"_createWatermarkCanvas",value:function(t,e){var n=this._options.watermarkImage,r=h.Utils.createCanvas();r.width=t,r.height=e;var i=r.getContext("2d"),o=void 0,a=void 0,s=void 0;t>e?(o=t/n.width,s=(e-n.height*o)/2,a=0):(o=e/n.height,s=0,a=(t-n.width*o)/2),i.drawImage(n,0,0,n.width,n.height,a,s,n.width*o,n.height*o),this._watermarkCanvas=r,this._watermarkContext=i}},{key:"_applyCanvas",value:function(t,e,n){arguments.length>3&&void 0!==arguments[3]&&arguments[3];var r=e.getCanvas(),i=e.getContext(),o=n.getContext();this._options.watermarkImage;this._createWatermarkCanvas(r.width,r.height);for(var a=i.getImageData(0,0,r.width,r.height),s=this._watermarkContext.getImageData(0,0,r.width,r.height),u=new h.Color,l=new h.Color,c=new h.Color,f=0;f<r.width*r.height*4;f+=4)u.set(a.data[f]/255,a.data[f+1]/255,a.data[f+2]/255,a.data[f+3]/255),l.set(s.data[f]/255,s.data[f+1]/255,s.data[f+2]/255,s.data[f+3]/255),l.r>.8?c.copy(u.clone().mix(l,.3)):c.copy(u),a.data[f]=255*c.r,a.data[f+1]=255*c.g,a.data[f+2]=255*c.b,a.data[f+3]=255*c.a;o.putImageData(a,0,0)}}]),e}();p.prototype.availableOptions={watermarkImage:{type:h.OptionType.OBJECT,required:!0}},e.a=p},function(t,e){t.exports="uniform sampler2D u_image;\nuniform sampler2D u_watermarkTex;\n\nvarying vec2 v_texCoord;\n\n\nvoid main() {\n  vec4 color = texture2D(u_image, v_texCoord);\n  vec4 watermarkColor = texture2D(u_watermarkTex, v_texCoord);\n\n  if (watermarkColor.r > 0.8) {\n    gl_FragColor = mix(color, watermarkColor, 0.3);\n  } else {\n    gl_FragColor = color;\n  }\n}\n"},function(t,e,n){"use strict";e.a="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAMAAADDpiTIAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MDA4NDFGODc4N0ZCMTFFOEFCRjZEQ0E4MkRCQzYyNjIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MDA4NDFGODg4N0ZCMTFFOEFCRjZEQ0E4MkRCQzYyNjIiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDowMDg0MUY4NTg3RkIxMUU4QUJGNkRDQTgyREJDNjI2MiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDowMDg0MUY4Njg3RkIxMUU4QUJGNkRDQTgyREJDNjI2MiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Ppk6b2UAAAASUExURQAAAP///8zMzDMzM2ZmZpmZmer1GSkAABunSURBVHja7F3rgt6mDlzr8v6v3O5ukqaJbQSS0GDjn+c0+9lomBkJEB8fD3tEPvbz5ocO3oPw6vgfx+aA9z56HBsBL37k+H50D8UrHz6OjYAd/42ANxvAjYC3G8BfD+0ReacB3AjYBmAj4IXPcfJQVVFQaFuQSgNYiwBW2uxTbADrEMDyA4p7RaLUABYhgP8D4i5H1xrAAgT8mvzbgWIYgLkI4D9VaGtAuQGYiAD5G4NbAxAEYAoCvmz/rkJAVQAmxoKvCGhrAIABSEeAXP/81oDiDDAfASx36NvFQAgDkIcA1kLh2U+HAKTMx1b4twlAyADTEMBUgLn9DAtAcDyYCo3HfroywAQEiFl2tgbgCEAYAuzh34lgUQaokheRnvBvE1BjAOiuNiATw79NQE0GyB9JCOgN/zYBJQIgd/+nIybcH/5tAgoEQO/hMYqAofBvDZgvANTOEAYWh1mPYwNgCQFgQ45Is8K/TcB0ARBTlaAPAY7wbxNQJgD3oevIz+3WX8+YYmtAlQDEIMAcfhI+p6WtAVUCcI8AEzWzPfyXvLQBME8A1F4ssiDA7P1Ibn5tV4PnCUBPubA9NcUafr79N9sEFArALY3flwOs4q/ceDPaGhD+aJev44Fk0Mr+ym2+2QCYIwDUSxg38iyD4T8FwK4EzHGA/BGFAKP3V7ZBZ5uAUgG4n9EyXPhTtmJtA2CGA6RBR89j5k+5g562CZggADJEG395dHaGf5uAIgfYrraoJRUQb/i3CUh/OkpAtoKQ9k1/5W6F2gBId4AmkqWGEZTOqp/domwTkOwA1fFvf8bHMv1NRb3tAqFKAFYEGKY/yShH7fWgXAcovn/+ObMNub+Mk9Q2AakOkLwAOgK83wZAnQNk91+IEf9tApAdYCsVCBD/XQoqcYAU8UdC9/XKdoHfbCs8gwAk5K9EiP82AX9NNSJhxiKATiNIEgPUF5qAX8NAGgMCiTp4I3nsv13gxTwg8usBhTVg0Azvf//35eUACGACCTx6SVnsf/mqLzQB5wEbBgEHUrTJCGog9l8JALo9QxVD2xQYoqjpf/7tGwBOIuDgo9eS2ttpu0CDzvYRgUaHSdOm//kffx0ALDJL5iJLNAHcAtRfttu1QHPBzSgGGt96gbOm/3aBvdWWthhwRvcdyWvtuAHQu+7awACl9F7RvKY+2wX2L7rdYCCFAD6MXWY2ACYB4AYDlDRROU0EZBeDx9oqnmIgiwDMjYZCoPWyNICP4cdy5D6KUTVJBLYLdADgz/oAZ3n1a6LShL+7ATAqBZrZf5OTROD1LlAO9/OjIpNKAGki8HoA0BHwfElBKgF8jJ4232nADAB80UAuAWSJwOvTgCgA5BXrGmql4QCglwOAhKJQoTPAKuED8B86fnvkt+f3//15ScDn97MQHAEMNh0acYGi9P1YtO/7UZUl8XAtgcxKWATgPnM8QwO/0SDLYIFvx9OJgfghoPjf0TQD9BMJqwHgj25c42KgU17X9UMBNGcGwjJ1II4aJZ7zvqO/xHFm14oDQBhYd0UOYCAnm4o5dzg7+L/DAAsDHZXQXgzwLM3q9IFTaH/6uGRkwT4M0DzO6vixoPzWQwEfCwOgBwNpFXXHr5VH/wEA+DDe0ZD3naOHT4uZH3OpabASbiBSmQlaw+8JRPThLMD4UkgLAzz1pVuvDRN+tIuJXIuhd5yauqTae/wIJ/xwFoCd3H05tDz5rW9GFin8cJsN2B26cxpIxrnYKQAr/HD7zSTgDaXA6lopgMHC/0gAaMFnim1sFS38cLuNAhokcInQWXRH4KY/3n7DgE3RFQpgoQD2Tf9f+3z+t//r/4+IdmwdgtxxHAAAquE5akwvGY770HaeH4jQFhoYHgC9weOie9hPA+yY/t+r9THx+cLCKRDgNhwHAKAK5nRDsNIZ+5yNGitcSeMHgFbBXK5toHbEXvM26axwHYEfAFQGc7rgHnPuTzK9XsmPA0DhV8q5DbTRf+bMv34/OAvgPxdV+JV8utamtujXMJQ+DwCVXzmY6CuX4ZMXAIC6ASCFb1+t+68DQO1XDnS4mze2uoAFcG8HKDY6ghv+Re6kcwOg9isZN/yLXEjl3g9S3GGnQwNmG/A1bqPxAqC6vYZZA+ZvxaQNACAKEISRRWw+5QVA+X0LBJT4N7mJnweA8iZ7Ajn9V0kCHwAAhpz+H8tcTC7hAKD6gUYY9VVuJXYCAKDHnmKew1pEARIAoABTDWDxbYWVwBwACBAA6kR3kSTQDQCpFzqGPIari1gAbwQB7t1UyBMYtIgF8AKgvtc+Qx7AWEYB4gGAkgUK2rCC3kKxOgAEswvHMgqwPAAwT+CuowCrA0AxD+CuowCLA4Ax47+QAiwOAELk/6UUYG0ABDYOf2cV6MO9HFwLAALtwLGQAiwNAFQCWEkBVgYAAxaAllOAlQGgmA5wLQVYGACwBLCUAngX9AsBQKgEsJQCrAsAVAe4mAJ493TVLQejpoBFXROrAFC2IWQpAgBWAO+23qotYbAO8LxtzQfw41NxLgIAbAq4mgIsCgBcAlhNARIAIEWjjEEADGpNJwJgwufiOsDFigABmXxJIQA2BTzdogZtAd2ZfAUAzveBQYymLKcArUz+99sRQAAA7ADXs4CnmP3tGgz6+woN+r5CI4ZAnpUCrlcE+BhrtvnzYo1/cTC/FMjA93DoakWAz/tfD9cznwGAHeDHsZACfM7ejquOeloxvzUFXMYCfoX+SHto+iRDGWV8C3h1k9E6AAB2gOAW8Cv2x5Rn9r3xKD4L1gJOjH02AGgxAqhXAD6/2zv1yUM9sgO8UCcpfLvJE3/CjEROAT+gGlUmG/0iAEATgMD0Kq1g/SkhgXaA9x1L50GAEW5MT4oJcgrYbFo9AwJVmj+JAhYmgAkQqOf9dF+GnALa1tT00byfTQHQDtB4hWXKtVVQUz9xYkKngOZF9WAIMGT0U6T5CQTwDQFeg/h/bglSVZHPPUKnm4Sun1c5wL5dNUFuUJOCLtcbAH/SDkt7K4FOmGIwS21aYZI1NvByG/SBaiNvAsi1AhwTehVmnw7RBB9IjyKAICtA3tAzx8xS1mwKwHaAg1PRbQWkatbPV2jkfWAOMZbpwPua9utVaYGPAvm02KkDhBD7CRyN7QDP4WnN0V06YL85O39fSmadDtsB8tXbMaXrAFVP/CkUwNAO8DwI329ng4BDB7Q98bl0HAidXBIJoAMCEjs3ZrH+JKGWZQnADoFhEiCM4GemgoydAkr7q00Q0Lifr7owK4kCsFPAJgF8h8li1sZGCokdU7h6xRTwhPYsENCoFyCo2aAJfxM7BTzHvOaQAD+cAlZ0gBeQZ00hAUJySPHTldZzgNfwNLjBfhKAooBwwX4QAVitgEa8RJlHCk4FV3SADXhqeE1AoLKk2KRdF3SALXgarID6x7xskoRyNjgBjDqetg70kQBUJhjq2lbcBybj/3QU5Qw1TQKX7lbcB2aEZzsf0GUpIE63sVNA8sGzqQMdMoDVmyZMuBWaADRl3g7+McKngKMOSBPNbt9XchgJCNZUiaFu6BSQYzZ2aJQXxKKAEPO2YjeI/iFvkoA+hwJo/t+YrHJDIy4xMoDllwNm74r9wMboqUkCsiAF+PUbeR+YBJ+FlAAZ4IdRAPI+MA4/Dd0iAYsMKBYFOBkc2QFyxjm/VjrAq1GAMxUEdoCccxi+RQLyKgoAPgp0GSj326nTCCxBATSDPkriH3EAhnxGAIwCODilgSCAy/jHoFNdCECjgOFU8GKdleufy3wtyp6IywgsQQHqnQeQD6dTjGX0GMw6DzI5rxd/ySZOYzjBKGDQy9Fy8dcJ88YEADQKGMrmZLn4R4/w3bZhHqAPAaMAehgBxM8wHfYaa1CAPIsABCf+eBTQvaazoAOMvhhOPVBDo4DuVd0FU8CvL2KM+ONRQO/x2WPVJ6otizP+eMsofT6QjuPdEFC31VCwgnCXD5Rj6ccPAfLXGuAooGdJgI7j1RAIiD/edvoOCtBj/cdjB0Pif2G80Sjg7IX4eMQzCgEOir+lcyHmkoAeD3mkNP4XA46fCvLxmGeg3RsHrjXBbaixpYJ0POhRros/3pY6kw+U41lPwDmo4bgtmQqef720n3N+kZyn455WLYs/3rZ6AwWMZ6+T4W6/q9d3ut/F23AHa5q2xPPG0ysfZgw43t+p27qED9QYzqqAu/VGqKL4412y0KAAX+JSkvbYaKAtA5QR/+VSQWfeUpT2mGiAR8s/zg9Yygd64VoGd0sHeBlL/70AFjQRuNkd5hfxOrizp+mnRNeT29oCeVDIb+Mr0x4e7veXGn9fJ9OpPjAieqWL4E0IaK/9D8GuFs6KLp6O4O/iygcPHO7Pjv8qIsAxlbzqtKcBAe2x/1HAFTQROJ/qQTlc+QrY/cFe7fiPw2CLJgIdK/4cxS/1LucMAXLMiP/VgIO1D4wCKUDl41YH1DYOofe+womAdR0tvNSEQAJqiv8E1S0UAckSgEapCcMJSFv+o00LnAhQGgF8oLSX1XsEyDEx/ldvUycCnEcAMCtgcvdlk+N/NeXq1gRy7s9FSQWbKKcjP/03vYwAU0B4qWn+Rw7tcJapU67MBkjmOMCcixtAAM99F7CbJYNeDGczZO8xJ+LZpKugFMAJ4/4BjwAteBWBpADN+OOKjgAtGfEqG8CZSgi0GVKr7V9rxMtsgGZOBaDNkAoS/8s3ITgKoKw/XqN3VGz/miNeZQRl+k6oIqwbEECV411mBClxMJAoIPaW+Iy8S6AogBP/eI3l5XL5b1kRBqIAyhz0Irnj6tFvkhDSzJBMxDMU2VXbv3J7pJM9QF3OI6jyXzwwaRRAaI63MAlXhDrkZKsmaEi/hKRU/TAIAmhiJbCWArjGfnFKP6PsYeE0AsBb/aAS2OEgIMMHMiDVXcNS5/8k0tBkpIKKmPNWpKbdfXcVZlQyaQ9tHxTBxH9OVcKUCmr4MANvhtWZcMNDQHQqaNC9MgqQeSJwb/8FSSGDU0HYlHeqCHBjmgsQQcamgibhqzsWN2nM22ePBGh+RKaCtsQX7lgcT4y/NP+b2UYgMhU0Oh+09gg0L/5s4UqIA/WZlS+0HjmhI25tPaE42UCYDzSnPnA9cubEX+1+SespgGO5D1sEdH78GwggqaYAiplcinZ7Tmrrvj5lV5SqUIwPvEgn0LqmZ/Zv7e08pyiFwYhU8BJFaF3T01r33ZX/LmLZ7HDL61DAZZzhbs+hHB94G//hytkkCPh5+uYvrHGXsibGXz3OeY4QuK3azR+Ao4CM+5yGL54w5E4zMoLUG0PgLtCa1RjFBHVL+YyESyiAfN8v4aWmVLhLSfytW0ezzYCPpxsyv+hdyiHx59Hhm00DHqvWRM+CF6nGlECNDs5aRE3FgMMbN+P7aB8YsbRrP0GQh4Fxnjb8S7RUMNCWSMyyZ8cmUkp6hn/MwB2rXaQaEv++z5OhfaS4T9aAg/nAyM1d+qT4Sx7nZvpALoz/aIdjyIfyOBch7THkf2MO9zE6wOm5d1LaI6Xxf4wOaHruneUDqTj+tuuwVyQApDbSd5wkxfF/BAQ0vNQ0zwdSefwfAIHs3BuBAm4ce4SsLQ0BmbQGk5QKOsATaWvWhQAl597ZqaBAxP9zuBZNCjk394agAHUt/z67LqDTlmGzKEBh4v8x2GkClQBW2R3Gw/Gfe9R8LQeIuSQgA++jARsA/Lnmcg5wpVSQxyelvDv+7e9HSwX7KaCRn+mrDQANglpWooBppzovf4cAnmETrMtTQNOaSeKbFXumADe3BgWMF4K/xiGCBHhaqhHHTjwObMaigDEvExokQo6/axov0TPCUQyK+R5Fjr9PyJ9BAS0j4DzSycj679VxtFSQxl6ntYdTw2kJJf7eCKL5QBl9nQYCHAmhQsffzeH6DAow9HiJFQDCiL9/bxfaQaFhCmgu1gySwHiZpS4FnMshKBTQPsyhYSOMEv8QBacFKIBd0XKQACMngEEenh9DAYY1e40YYRQDGMXeYD7QQwFtGeirCQi0AYwib7RUkFxf1SYBdo4MigGIs29gB4XE91kcd1uWQhuAwAQOTOi8b9Pcxm80g4wtAIHSDZYKipeQ2vs3TXgiaAEIVW6sJQF2f1lbBmh0iQlFAGJjBuYD1f9pAZ1/CVoAgllb8Smg89sMTV6UJ44waAq4EAVkdHqSKR57AQJAwzuHvIyBBK6tgEILQMKExVoSoJiXMZDAhRVgbAeYAE8sCpCg0pSl3ZuaLxHSBxMAmumlqA+0NHdQ4whjO0BCRFUoBYx9oYUE/rIC+i4HCGd7+PzUH0eO1x0EPB1r1ksBwSjg3+BT9L4+6oSArucAI/Sp3gfeBN83B03dHX5BgN+WAkKkgq3g+77S1unrBwT0bSlgufdlIdMBfM9n2ro8fUJgRQIIClJBKvg58e3dFzh86pxAQN+XAtb4QLZO/Cg9ctwC8NRVQNskgYh9SByGu/3BEED2GlX6Ghj3cf6cakcy86SngOkME3JDmjP0YeUOWpgAJmj01fCQMo9HXvyhD6x30LIEMMGl3zXEo08UcE/gP+d8bIc1zeM5fAKYUqprb6omEvkMLp/H/N/5/jnhKaW1XtAF7n0d4J92FGicAv6GgqllXVTwIy9r7YHAqwgA9bYsCr+13ewGUQhg2jZFekH0e9wgyirAtPV6rMbolHlTuwUC2ASQgk56+tTvgsCjukGE+8BVp74dAigEMHW3hr4l+AYIQBNAVoWK3xP8JgT4hQRQB4CK4N9DAKQKPHvDJtUYvtLZJgRMALO3bNP8ic+QLEvvJICJpQCqnvj3qAd+tVRw8stif/XNIAQwf8M+vyv2lzIrwASg838yKPQCF/tLzDMsNLPfjRIi37edBIFmH3EpSBgAnKv9uKFHt4Alp3blbDT4azf3IBDAAYBrAWvOa/Ed53xt+1I9u8VS9Wu3mCwHAFwLWNO5g32CyMsBAFYBis5ssw90jLuqZudZDAtYtUJB7wKAohJAWSv3cADoagRAqC82ZzKFA4CQASCoFrCudxv5KJHWAgCqBSxsV6dvAgCsAhQ27ZE3AQBVASrbdvGbAECYBFDauO9NAEAtApS27nwTAATTAtZ27nSWcpYCAKgC1LbvfhEAQBWguHGrs5anC60GgZaBi6/weBEAMBWgunPzewDAkEWA+t7tPhVfaEcIpgLU397wGgBAKgDA5Q1vAQCkAiDcW/0WACBWgQRgX63TBK4DAEAFEIST6m8BAKACXPVn+dgAeIUCEEavGmcpeBkAoCnAZfvK2W/lXA1cBQBoCiAwJ6vkHQAAUwDF6Van7wCAIinAXffi6W9F7wAAAa0EC9ThWueC/iIAYCAFUKiOtd6THYsAAEcBms3rdQPgyQrQbstG5S8kzqkFCACUJNB0d8Xc8fMGcA0AgCSBtq6Mc5FJrwAARBnQenXN1Ddzn+6lFQBwNvTTFcDemp/XBgDgtnCAJLDnEkuphaU+DwDlSWDfNbYz383N4EsAoDgJ7L7FmBfixhUAUKsAAzfZz0OnuPlnBQBIHcuyDHXb5HW4cQUAlCWBpmtrqdIG+tOjRQEgM6Jvmvxc2bYmQBwXAECBBWBj9A/i872BkyggID1aAACTLYA5+D/jXHiFkd8CrNAncGIS2BP87+n/+ZTZwABuXKFT6BQL8NlWvbO/vt4Q8ZxpFKAACwCAL641oa9+9+yP/NfdCv0Xq8j9G/Ia3LhAs2hp3nDzfb1RDxz4+yaF4Us1/hhoqqGAiF0SC9wX0BOi/12I8eP5N9I/nv+uzjicD0kbo1yhAN2/+jAATHrU8o4Vd4X0/yj+lkCGCz+xTaakQBvleQAQtPCfjnHFqnBI53T8HWEEzv5lFHBOjequBG8A3IWfu3LV6Rbwm6Ie1SqYVwj/VTikaGBINgDitf+eXKdfGSKet10IAIps/ZovqoXSaMMAPAAInfuLKEBssOX+t6atAGOmSqb6QIp5e/i1IF4k+le1gCwfyEHfAL8WJLW2j/3vmiMCGoRj+KUACVi5GQp+XzZ9Q8sEQoznH7REd4CBvRrzg39NAVJPANcYWOm2gO+NG9lAEM8Wk/OXQ3JGf+aGtA4AfgeC5gGB4wMTb6sljOAWuzn4DyD83NQTCQZJoOZwEYgray4MgL/BIPrfhqDWjiH93CnEEj5djxk+UOKczkMAcAGJkye7DiYzRCDQ7h5PBUDZWhjli0BubURfDgCvCeYEb2kgAO060ZJngjYALnwgJRMAfww1MjjWywLT7ZQkgCp0Yt3gK4IG3gWAjMWw5Iuk9P6Ps24A+ABAOSGKEoH25kN2ScG7koCcPJgz7bVp76EDAxsAARwoef7avPt41A5sAESIoKbJa8/m4yEM6MsAICkTlbNmV+/xg34MyMsAkLQpMutKUeqPWScGeAMgRAUpZX4N7jvtwcDbAJCzHHbdW5bjYWX6k9a84G0eMMcFStIA+zaef26o2gCw2GrvcpAmueyAoydNMXgfAML3hEiazdaQiN2LgbwOAMEu0FCK5zoC+PmXromANwBcAJBEn0WhinLhCN4HgEgXyJlOO+Hc0QkINgAco6Cp5VbKKdz+HwTv84BxLjD5VilNPHPyubv+vQCIMQGd+zA44C1jPfunMaTXLQVdDS0H0EgsAuacO+UXWoAIEzCw/YIiAPbKcE0BQBe1ju3C6yPbXbWb6wJ7hnZ0E6a6f2MTAIALNLA/uVOBWYeOtwb0Ti5L+PnDjYBZbQc2ADrX2MlG9OxMBeY1HnnpM3YBt8n7yW2SSDacbQcIaAJM4f/VjkU8ySBtB4hXCtLOgq+OpwKyHSCcCTAVfv7fjYlGEXBhIHbQkgGgzvD/2VyaR9eFaDtArFKQreyr1pnciqVsB1jkAtkRfmJzKBsImNBvZD92E2Bc9JFO48hbAAABIKPhv75boB8BWwBgTID5ZI10G7rrgtAWABQTYF7xlZGU7nJO0y4BQJgAc/h14IKWGwRsAYCoBJjDb6nsS8fuAN5ndwBMgNjv5hn9oSsEbAGoNQFHT/jt81KtCNDtAKsTQXtbhZ4Le40I2AJQDoAjI/x3P6VbAKBMQKD360fAFgAAExDo/Yy/JQ08bgEA0wCSYLTJ7X+wBQALADQ8IaWBANoCgG8CSFJ+Ta4NwBYAIBNAkoU32QKArwEkiYxzUX3aawDJj84M/0f/mcJtAEA0gGQ64rYATAEATQ1/JwK2AECYAIo14roFYKlEkLgAczsDRDEByjWsswUAQQNIefpv7oNgMIkgSQnqtgHA0ABKFWBD8rEzwEoN0Ozp10TANgB1GkAygX1bCNgCUKUBOmno7xGwM8CJAKAJvr8TAdsAlJgA5TLkbQNQ+Mg85TciYBuA2SaAtGTMeXcCwMgDykb8FAHbALy7CrENwLsRsOP/cgRsA/g+C7IN4EbANoAbAdsAbATs+L/2kW0ANwK2AXz1w4+L/z8CDADebzi4XHs84QAAAABJRU5ErkJggg=="},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=n(5),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),h=n(1),f=n.n(h),p=n(4),d=n.n(p),v=n(342),y=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var _=p.Math.Vector2,g=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(t=e.__proto__||f()(e)).call.apply(t,[this].concat(r)));o._lastBlurRadius=o._options.blurRadius,o._lastControlPoint1=o._options.controlPoint1.clone(),o._lastControlPoint2=o._options.controlPoint2.clone();var a={blurQuality:{type:p.OptionType.STRING}};return o._horizontalFilter=new v.a({},a),o._verticalFilter=new v.a({},a),o._sprite.setFilters([o._horizontalFilter,o._verticalFilter]),o._horizontalFilter.setDelta(new _(.5,.5)),o._verticalFilter.setDelta(new _(-.5,.5)),o._filter=new v.a({},a),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=c()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(u.a?u()(t,e):t.__proto__=e)}(e,p["Operation"]),y(e,[{key:"rotate",value:function(t){var e=this._options.controlPoint1,n=this._options.controlPoint2;90===t?(e.flip(),e.x=1-e.x,n.flip(),n.x=1-n.x):-90===t&&(e.flip(),e.y=1-e.y,n.flip(),n.y=1-n.y),this.set({controlPoint1:e,controlPoint2:n})}},{key:"flip",value:function(t){var e=this._options.controlPoint1,n=this._options.controlPoint2;switch(t){case"horizontal":e.x=1-e.x,n.x=1-n.x;break;case"vertical":e.y=1-e.y,n.y=1-n.y}this.set({controlPoint1:e,controlPoint2:n})}},{key:"transform",value:function(t){var e=this,n={};["controlPoint1","controlPoint2"].forEach(function(r){var i=e.getOption(r);n[r]=t.applyToRelativePoint(i)}),["blurRadius"].forEach(function(r){var i=e.getOption(r);n[r]=t.applyToRelativeSize(i)}),this.set(n,!1)}},{key:"_renderWebGL",value:function(t){return this._renderBlur(t)}},{key:"_renderCanvas",value:function(t){return this._options.highQualityCanvasBlur?this._renderBlur(t):this._renderLQCanvasBlur(t)}},{key:"_renderBlur",value:function(t){var e=t.getDimensions(),n=e.min(),r=this._options,i=r.blurRadius,o=r.controlPoint1,a=r.controlPoint2,s={blurRadius:i*n,controlPoint1:o.clone(),controlPoint2:a.clone(),texSize:e,blurQuality:"high"};return this._horizontalFilter.set(s),this._verticalFilter.set(s),this._renderTexture.render(this._container),p.Promise.resolve()}},{key:"_renderLQCanvasBlur",value:function(t){var e=t.getDimensions(),n=this._options,r=n.blurRadius,i=n.controlPoint1,o=n.controlPoint2;return this._filter.set({blurRadius:r,controlPoint1:i.clone(),controlPoint2:o.clone(),texSize:e,blurQuality:"low"}),this._sprite.setFilters([this._filter]),this._renderTexture.render(this._container),p.Promise.resolve()}},{key:"dispose",value:function(){(function t(e,n,r){null===e&&(e=Function.prototype);var i=a()(e,n);if(void 0===i){var o=f()(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0})(e.prototype.__proto__||f()(e.prototype),"dispose",this).call(this),this._filter.dispose(),this._verticalFilter.dispose(),this._horizontalFilter.dispose()}},{key:"hasChanges",value:function(){return!0}}]),e}();g.identifier="linear-focus",g.prototype.availableOptions={controlPoint1:{type:p.OptionType.VECTOR2,default:new _(0,.5)},controlPoint2:{type:p.OptionType.VECTOR2,default:new _(1,.5)},blurRadius:{type:p.OptionType.NUMBER,default:.025},highQualityCanvasBlur:{type:p.OptionType.BOOLEAN,default:!1}},d.a.Operations.LinearFocusOperation=g,e.a=g},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=n(5),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),h=n(1),f=n.n(h),p=n(4),d=(n.n(p),n(76)),v=n.n(d),y=n(56),_=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var g=p.Math.Vector2,m=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(t=e.__proto__||f()(e)).call.apply(t,[this].concat(i)));return a._fragmentSource=n(343),a._lastBlurRadius=null,a._lastControlPoint1=new g,a._lastControlPoint2=new g,a._blurFilter=new y.a,a._blurredRenderTarget=new p.Engine.CanvasRenderTarget(100,100,1),a._maskRenderTarget=new p.Engine.CanvasRenderTarget(100,100,1),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=c()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(u.a?u()(t,e):t.__proto__=e)}(e,p["Engine"].Filter),_(e,[{key:"_applyCanvas",value:function(t,e,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if("low"!==this._options.blurQuality){var o=e.getDimensions(),a=!n.getDimensions().equals(o);if(e.getBaseTexture().isDirty()||this._lastBlurRadius!==this._options.blurRadius||a){var s=new g(this._options.delta.x,this._options.delta.y);this._blurFilter.setDelta(s);var u={blurRadius:this._options.blurRadius,texSize:o},l=function(t,e,n){return Math.min(Math.max(t,e),n)},c=this._options.controlPoint2.clone().subtract(this._options.controlPoint1.clone()),h=this._options.blurRadius;this._blurFilter.set(u),this._blurFilter._applyCanvas(t,e,n,i,function(t,e){return function(t,e,n){var r=l((n-t)/(e-t),0,1);return r*r*(3-2*r)}(0,1,Math.abs(l(new g(t,e).subtract(r._options.controlPoint1).dot(c)/c.dot(c),0,1)))*h}),this._lastBlurRadius=this._options.blurRadius}}else this._renderLQBlur(t,e,n,i)}},{key:"_renderLQBlur",value:function(t,e,n){arguments.length>3&&void 0!==arguments[3]&&arguments[3];var r=e.getDimensions(),i=!this._blurredRenderTarget.getDimensions().equals(r);this._blurredRenderTarget.setPixelRatio(e.getPixelRatio()),this._blurredRenderTarget.resizeTo(e.getDimensions()),this._maskRenderTarget.setPixelRatio(e.getPixelRatio()),this._maskRenderTarget.resizeTo(e.getDimensions());var o=!this._lastControlPoint1.equals(this._options.controlPoint1)||!this._lastControlPoint2.equals(this._options.controlPoint2)||i,a=e.getBaseTexture().isDirty()||this._lastBlurRadius!==this._options.blurRadius||i;o&&(this._renderMask(),this._lastControlPoint1=this._options.controlPoint1.clone(),this._lastControlPoint2=this._options.controlPoint2.clone()),a&&(this._blurImage(e),this._lastBlurRadius=this._options.blurRadius),this._applyMask(e,n)}},{key:"_blurImage",value:function(t){var e=t.getCanvas(),n=t.getContext(),r=new g(e.width,e.height),i=n.getImageData(0,0,e.width,e.height);v.a.stackBlurCanvasRGBA(i,0,0,e.width,e.height,this._options.blurRadius*r.min()),this._blurredRenderTarget.getContext().putImageData(i,0,0)}},{key:"_renderMask",value:function(){var t=this._maskRenderTarget.getCanvas(),e=this._maskRenderTarget.getContext(),n=new g(t.width,t.height),r=this._options.controlPoint1.clone().multiply(n),i=this._options.controlPoint2.clone().multiply(n),o=e.createLinearGradient(r.x,r.y,i.x,i.y);o.addColorStop(0,"#FFFFFF"),o.addColorStop(1,"#000000"),e.fillStyle=o,e.fillRect(0,0,t.width,t.height)}},{key:"_applyMask",value:function(t,e){for(var n=e.getContext(),r=t.getCanvas(),i=t.getContext(),o=this._blurredRenderTarget.getContext(),a=this._maskRenderTarget.getContext(),s=i.getImageData(0,0,r.width,r.height),u=s.data,l=o.getImageData(0,0,r.width,r.height).data,c=a.getImageData(0,0,r.width,r.height).data,h=void 0,f=0;f<r.width*r.height*4;f+=4)h=c[f]/255,u[f]=h*u[f]+(1-h)*l[f],u[f+1]=h*u[f+1]+(1-h)*l[f+1],u[f+2]=h*u[f+2]+(1-h)*l[f+2];n.putImageData(s,0,0)}},{key:"dispose",value:function(){(function t(e,n,r){null===e&&(e=Function.prototype);var i=a()(e,n);if(void 0===i){var o=f()(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0})(e.prototype.__proto__||f()(e.prototype),"dispose",this).call(this),this._blurFilter.dispose()}}]),e}();m.prototype.availableOptions={blurRadius:{type:p.OptionType.NUMBER,default:30,uniformType:p.UniformType.FLOAT},controlPoint1:{type:p.OptionType.VECTOR2,default:new g(0,.5),uniformType:p.UniformType.FLOAT2},controlPoint2:{type:p.OptionType.VECTOR2,default:new g(1,.5),uniformType:p.UniformType.FLOAT2},delta:{type:p.OptionType.VECTOR2,default:new g(1,1),uniformType:p.UniformType.FLOAT2},texSize:{type:p.OptionType.VECTOR2,default:new g(100,100),uniformType:p.UniformType.FLOAT2}},e.a=m},function(t,e){t.exports="/*!\n * Based on evanw's glfx.js tilt shift shader:\n * https://github.com/evanw/glfx.js/blob/master/src/filters/blur/tiltshift.js\n */\n\nuniform sampler2D u_image;\nuniform float u_blurRadius;\nuniform vec2 u_controlPoint1;\nuniform vec2 u_controlPoint2;\nuniform vec2 u_delta;\nuniform vec2 u_texSize;\nvarying vec2 v_texCoord;\n\nfloat random(vec2 co)\n{\n    highp float a = 12.9898;\n    highp float b = 78.233;\n    highp float c = 43758.5453;\n    highp float dt = dot(co.xy,vec2(a,b));\n    highp float sn = mod(dt, 3.14);\n    return fract(sin(sn) * c);\n}\n\nvoid main() {\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    vec2 vector = u_controlPoint2 - u_controlPoint1;\n    float offset = random(gl_FragCoord.xy / u_texSize.xy);\n\n    float radius = smoothstep(0.0, 1.0,\n      abs(\n        clamp(dot(v_texCoord - u_controlPoint1, vector) / dot(vector, vector), 0.0, 1.0)\n      )\n    ) * u_blurRadius;\n\n    for (float t = -30.0; t <= 30.0; t++) {\n      float percent = (t + offset - 0.5) / 30.0;\n      float weight = 1.0 - abs(percent);\n      vec4 _sample = texture2D(u_image, v_texCoord + u_delta * percent * radius / u_texSize);\n\n      color += _sample * weight;\n      total += weight;\n    }\n\n    gl_FragColor = color / total;\n}\n"},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=n(5),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),h=n(1),f=n.n(h),p=n(4),d=n.n(p),v=n(345),y=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var _=p.Math.Vector2,g=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(t=e.__proto__||f()(e)).call.apply(t,[this].concat(r)));o._lastBlurRadius=o._options.blurRadius,o._lastSize=o._options.size,o._lastGradientSize=o._options.gradientSize;var a={blurQuality:{type:p.OptionType.STRING}};return o._horizontalFilter=new v.a({},a),o._verticalFilter=new v.a({},a),o._sprite.setFilters([o._horizontalFilter,o._verticalFilter]),o._horizontalFilter.setDelta(new _(.5,.5)),o._verticalFilter.setDelta(new _(-.5,.5)),o._filter=new v.a({},a),o._renderBlur.bind(o),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=c()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(u.a?u()(t,e):t.__proto__=e)}(e,p["Operation"]),y(e,[{key:"rotate",value:function(t){var e=this._options.start,n=this._options.end;90===t?(e.flip(),e.x=1-e.x,n.flip(),n.x=1-n.x):-90===t&&(e.flip(),e.y=1-e.y,n.flip(),n.y=1-n.y),this.set({start:e,end:n})}},{key:"flip",value:function(t){var e=this._options.start,n=this._options.end;switch(t){case"horizontal":e.x=1-e.x,n.x=1-n.x;break;case"vertical":e.y=1-e.y,n.y=1-n.y}this.set({start:e,end:n})}},{key:"transform",value:function(t){var e=this,n={};["start","end"].forEach(function(r){var i=e.getOption(r);n[r]=t.applyToRelativePoint(i)}),["blurRadius","size","gradientSize"].forEach(function(r){var i=e.getOption(r);n[r]=t.applyToRelativeSize(i)}),this.set(n,!1)}},{key:"_renderWebGL",value:function(t){return this._renderBlur(t)}},{key:"_renderCanvas",value:function(t){return this._options.highQualityCanvasBlur?this._renderBlur(t):this._renderLQCanvasBlur(t)}},{key:"_renderBlur",value:function(t){var e=t.getDimensions(),n=e.min(),r=this._options.start.clone(),i=this._options.end.clone(),o=this._options,a={blurRadius:o.blurRadius*n,size:o.size*n,gradientSize:o.gradientSize*n,start:r.clone().multiply(e),end:i.clone().multiply(e),texSize:e,blurQuality:"high"};return this._horizontalFilter.set(a),this._verticalFilter.set(a),this._renderTexture.render(this._container),p.Promise.resolve()}},{key:"_renderLQCanvasBlur",value:function(t){var e=t.getDimensions(),n=this._options,r=n.blurRadius,i=n.size,o=n.gradientSize,a=n.start,s=n.end;return this._filter.set({blurRadius:r,gradientSize:o,size:i,start:a.clone(),end:s.clone(),texSize:e,blurQuality:"low"}),this._sprite.setFilters([this._filter]),this._renderTexture.render(this._container),p.Promise.resolve()}},{key:"dispose",value:function(){(function t(e,n,r){null===e&&(e=Function.prototype);var i=a()(e,n);if(void 0===i){var o=f()(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0})(e.prototype.__proto__||f()(e.prototype),"dispose",this).call(this),this._filter.dispose(),this._verticalFilter.dispose(),this._horizontalFilter.dispose()}},{key:"hasChanges",value:function(){return!0}}]),e}();g.identifier="mirrored-focus",g.prototype.availableOptions={start:{type:p.OptionType.VECTOR2,default:new _(0,.5)},end:{type:p.OptionType.VECTOR2,default:new _(1,.5)},blurRadius:{type:p.OptionType.NUMBER,default:.025},size:{type:p.OptionType.NUMBER,default:.1},gradientSize:{type:p.OptionType.NUMBER,default:.1},highQualityCanvasBlur:{type:p.OptionType.BOOLEAN,default:!1}},d.a.Operations.MirroredFocusOperation=g,e.a=g},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=n(5),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),h=n(1),f=n.n(h),p=n(4),d=(n.n(p),n(76)),v=n.n(d),y=n(56),_=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var g=p.Math.Vector2,m=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(t=e.__proto__||f()(e)).call.apply(t,[this].concat(i)));return a._fragmentSource=n(346),a._lastBlurRadius=null,a._lastGradientRadius=null,a._lastStart=new g,a._lastEnd=new g,a._blurFilter=new y.a,a._blurredRenderTarget=new p.Engine.CanvasRenderTarget(100,100,1),a._maskRenderTarget=new p.Engine.CanvasRenderTarget(100,100,1),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=c()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(u.a?u()(t,e):t.__proto__=e)}(e,p["Engine"].Filter),_(e,[{key:"_applyCanvas",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if("low"!==this._options.blurQuality){var i=e.getDimensions(),o=!n.getDimensions().equals(i);if(e.getBaseTexture().isDirty()||this._lastBlurRadius!==this._options.blurRadius||o){var a=new g(this._options.delta.x,this._options.delta.y);this._blurFilter.setDelta(a);var s={blurRadius:this._options.blurRadius,texSize:i},u=function(t,e,n){var r=function(t,e,n){return Math.min(Math.max(t,e),n)}((n-t)/(e-t),0,1);return r*r*(3-2*r)},l=this._options,c=l.blurRadius,h=l.gradientSize,f=l.size,p=l.start,d=l.end,v=l.texSize,y=new g(p.y-d.y,d.x-p.x);y.divide(y.len());this._blurFilter.set(s),this._blurFilter._applyCanvas(t,e,n,r,function(t,e){return u(0,1,(Math.abs(v.clone().multiply(t,e).subtract(p).dot(y))-f)/h)*c}),this._lastBlurRadius=this._options.blurRadius}}else this._renderLQBlur(t,e,n,r)}},{key:"_renderLQBlur",value:function(t,e,n){arguments.length>3&&void 0!==arguments[3]&&arguments[3];var r=e.getDimensions(),i=!this._blurredRenderTarget.getDimensions().equals(r);this._blurredRenderTarget.setPixelRatio(e.getPixelRatio()),this._blurredRenderTarget.resizeTo(e.getDimensions()),this._maskRenderTarget.setPixelRatio(e.getPixelRatio()),this._maskRenderTarget.resizeTo(e.getDimensions());var o=!this._lastStart.equals(this._options.start)||!this._lastEnd.equals(this._options.end)||this._lastGradientRadius!==this._options.size||i,a=e.getBaseTexture().isDirty()||this._lastBlurRadius!==this._options.blurRadius||i;o&&(this._renderMask(),this._lastStart=this._options.start.clone(),this._lastEnd=this._options.end.clone(),this._lastGradientRadius=this._options.size),a&&(this._blurImage(e),this._lastBlurRadius=this._options.blurRadius),this._applyMask(e,n)}},{key:"_blurImage",value:function(t){var e=t.getCanvas(),n=t.getContext(),r=new g(e.width,e.height),i=n.getImageData(0,0,e.width,e.height);v.a.stackBlurCanvasRGBA(i,0,0,e.width,e.height,this._options.blurRadius*r.min()),this._blurredRenderTarget.getContext().putImageData(i,0,0)}},{key:"_renderMask",value:function(){var t=this._maskRenderTarget.getCanvas(),e=this._maskRenderTarget.getContext(),n=this._maskRenderTarget.getPixelRatio(),r=new g(t.width,t.height),i=this._options.size*r.min()*n,o=this._options.gradientSize*r.min()*n,a=this._options.start.clone().multiply(r),s=this._options.end.clone().multiply(r).clone().subtract(a),u=a.clone().add(s.clone().divide(2)),l=s.len(),c=s.clone().divide(l),h=u.clone().add((i+o)*c.y,-(i+o)*c.x),f=u.clone().add(-(i+o)*c.y,(i+o)*c.x),p=e.createLinearGradient(h.x,h.y,f.x,f.y),d=f.clone().subtract(h).len();p.addColorStop(0,"#000000"),p.addColorStop(o/2/d,"#FFFFFF"),p.addColorStop(1-o/2/d,"#FFFFFF"),p.addColorStop(1,"#000000"),e.fillStyle=p,e.fillRect(0,0,t.width,t.height)}},{key:"_applyMask",value:function(t,e){for(var n=e.getContext(),r=t.getCanvas(),i=t.getContext(),o=this._blurredRenderTarget.getContext(),a=this._maskRenderTarget.getContext(),s=i.getImageData(0,0,r.width,r.height),u=s.data,l=o.getImageData(0,0,r.width,r.height).data,c=a.getImageData(0,0,r.width,r.height).data,h=void 0,f=0;f<r.width*r.height*4;f+=4)h=c[f]/255,u[f]=h*u[f]+(1-h)*l[f],u[f+1]=h*u[f+1]+(1-h)*l[f+1],u[f+2]=h*u[f+2]+(1-h)*l[f+2];n.putImageData(s,0,0)}},{key:"dispose",value:function(){(function t(e,n,r){null===e&&(e=Function.prototype);var i=a()(e,n);if(void 0===i){var o=f()(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0})(e.prototype.__proto__||f()(e.prototype),"dispose",this).call(this),this._blurFilter.dispose()}}]),e}();m.prototype.availableOptions={blurRadius:{type:p.OptionType.NUMBER,default:30,uniformType:p.UniformType.FLOAT},size:{type:p.OptionType.NUMBER,default:50,uniformType:p.UniformType.FLOAT},gradientSize:{type:p.OptionType.NUMBER,default:50,uniformType:p.UniformType.FLOAT},start:{type:p.OptionType.VECTOR2,default:new g(0,.5),uniformType:p.UniformType.FLOAT2},end:{type:p.OptionType.VECTOR2,default:new g(1,.5),uniformType:p.UniformType.FLOAT2},delta:{type:p.OptionType.VECTOR2,default:new g(1,1),uniformType:p.UniformType.FLOAT2},texSize:{type:p.OptionType.VECTOR2,default:new g(100,100),uniformType:p.UniformType.FLOAT2}},e.a=m},function(t,e){t.exports="/*\n * Based on evanw's glfx.js tilt shift shader:\n * https://github.com/evanw/glfx.js/blob/master/src/filters/blur/tiltshift.js\n * @license\n */\n\nuniform sampler2D u_image;\nuniform float u_blurRadius;\nuniform float u_gradientSize;\nuniform float u_size;\nuniform vec2 u_start;\nuniform vec2 u_end;\nuniform vec2 u_delta;\nuniform vec2 u_texSize;\nvarying vec2 v_texCoord;\n\nfloat random(vec2 co)\n{\n    highp float a = 12.9898;\n    highp float b = 78.233;\n    highp float c = 43758.5453;\n    highp float dt = dot(co.xy,vec2(a,b));\n    highp float sn = mod(dt, 3.14);\n    return fract(sin(sn) * c);\n}\n\nvoid main() {\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(gl_FragCoord.xy / u_texSize.xy);\n\n    vec2 normal = normalize(vec2(u_start.y - u_end.y, u_end.x - u_start.x));\n    float radius = smoothstep(0.0, 1.0,\n      (abs(\n        dot(v_texCoord * u_texSize - u_start, normal)\n      ) - u_size) / u_gradientSize\n    ) * u_blurRadius;\n\n    for (float t = -30.0; t <= 30.0; t++) {\n        float percent = (t + offset - 0.5) / 30.0;\n        float weight = 1.0 - abs(percent);\n        vec4 _sample = texture2D(u_image, v_texCoord + u_delta * percent * radius / u_texSize);\n\n        color += _sample * weight;\n        total += weight;\n    }\n\n    gl_FragColor = color / total;\n}\n"},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(1),c=n.n(l),h=n(4),f=n.n(h),p=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var d=h.Math.Vector2,v=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||c()(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=u()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(a.a?a()(t,e):t.__proto__=e)}(e,h["Operation"]),p(e,[{key:"_render",value:function(t){var e=this._options.rotation%360*(Math.PI/180);this._sprite.setScale(this._options.flipHorizontally?-1:1,this._options.flipVertically?-1:1),this._sprite.setRotation(e),this._sprite.setAnchor(.5,.5),this._sprite.updateTransform();var n=this._sprite.getBounds();return this._renderTexture.resizeTo(new d(n.width,n.height)),this._sprite.setPosition(this._renderTexture.getDimensions().divide(2).round()),this._renderTexture.render(this._container),h.Promise.resolve()}},{key:"getNewDimensions",value:function(t){return t=t.clone(),this._options.rotation%180&&t.flip(),t}},{key:"flip",value:function(t){var e=this._options.rotation;switch(90!==e&&270!==e||(t="vertical"===t?"horizontal":"vertical"),t){case"vertical":this.setFlipVertically(!this.getFlipVertically());break;case"horizontal":this.setFlipHorizontally(!this.getFlipHorizontally())}}}]),e}();v.identifier="orientation",v.prototype.availableOptions={rotation:{type:h.OptionType.NUMBER,default:0,validation:function(t){if(t%90!=0)throw new Error("OrientationOperation: `rotation` has to be a multiple of 90.")},setter:function(t){return(t+360)%360}},flipVertically:{type:h.OptionType.BOOLEAN,default:!1},flipHorizontally:{type:h.OptionType.BOOLEAN,default:!1}},f.a.Operations.OrientationOperation=v,e.a=v},function(t,e,n){"use strict";var r=n(70),i=n.n(r),o=n(0),a=n.n(o),s=n(5),u=n.n(s),l=n(2),c=n.n(l),h=n(3),f=n.n(h),p=n(1),d=n.n(p),v=n(4),y=n.n(v),_=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),a()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),g=function t(e,n,r){null===e&&(e=Function.prototype);var i=u()(e,n);if(void 0===i){var o=d()(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0};var m=v.Engine.Filters.OverlayFilter,b=v.Math.Vector2,w=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(t=e.__proto__||d()(e)).call.apply(t,[this].concat(r)));return o._overlayTexture=v.Engine.Texture.fromImage(o._options.image),o._overlayContainer=new v.Engine.Container,o._overlaySprite=new v.Engine.Sprite,o._overlaySprite.setTexture(o._overlayTexture),o._overlaySprite.setAnchor(0,0),o._overlayContainer.addChild(o._overlaySprite),o._overlayFilter=new v.Engine.Filters.OverlayFilter({overlayImage:o._overlayTexture.getBaseTexture().getGLUnit(),overlayTexture:o._overlayTexture}),o._sprite.setFilters([o._overlayFilter]),o._renderedOverlaySprite=new v.Engine.Sprite,o._renderedOverlayContainer=new v.Engine.Container,o._renderedOverlayContainer.addChild(o._renderedOverlaySprite),o._overlayRendered=!1,o._lastInputDimensions=new b(0,0),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=f()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(c.a?c()(t,e):t.__proto__=e)}(e,v["Operation"]),_(e,[{key:"setOption",value:function(t,n){if(g(e.prototype.__proto__||d()(e.prototype),"setOption",this).call(this,t,n),"image"===t&&n&&this._sdk){var r=this._sdk.getRenderer(),i=this._overlayTexture.getBaseTexture();i.setSource(n),r.isOfType(v.RendererType.WEBGL)&&r.updateTexture(i),this._overlayRendered=!1}}},{key:"_render",value:function(t){var e=t.getDimensions(),n=this._options,r=n.image,i=n.alpha,o=n.blendMode;return r?(this._overlayRendered&&this._lastInputDimensions.equals(e)||(this._renderOverlayToRenderTexture(t),this._overlayRendered=!0,this._lastInputDimensions.copy(e)),this._overlayFilter.set({blendMode:o,overlayImage:this._overlayRenderTexture.getBaseTexture().getGLUnit(),overlayTexture:this._overlayRenderTexture,alpha:i}),this._sprite.setFilters([this._overlayFilter]),this._renderTexture.render(this._container),v.Promise.resolve(this._renderTexture)):(this._sprite.setFilters([]),this._renderTexture.render(this._container),v.Promise.resolve())}},{key:"_renderOverlayToRenderTexture",value:function(t){var e=this._sdk.getRenderer(),n=t.getDimensions();this._overlayRenderTexture||(this._overlayRenderTexture=new v.Engine.RenderTexture(e,n.x,n.y),this._renderedOverlaySprite.setTexture(this._overlayRenderTexture));var r=this._options.image,i=r.width,o=r.height,a=v.Utils.resizeVectorToFill(new b(i,o),n);this._overlaySprite.setWidth(a.x),this._overlaySprite.setHeight(a.y);var s=this._overlayRenderTexture.getBaseTexture();e.isOfType(v.RendererType.WEBGL)&&(s.setGLUnit(4),e.updateTexture(s,!1)),this._overlayRenderTexture.resizeTo(n),this._overlayRenderTexture.render(this._overlayContainer)}},{key:"dispose",value:function(){g(e.prototype.__proto__||d()(e.prototype),"dispose",this).call(this),this._overlaySprite.dispose()}}]),e}();w.identifier="overlay",w.BLEND_MODES=m.BLEND_MODES,w.prototype.availableOptions={identifier:{type:v.OptionType.STRING},image:{type:v.OptionType.IMAGE},blendMode:{type:v.OptionType.NUMBER,default:m.BLEND_MODES.MULTIPLY,available:i()(m.BLEND_MODES).map(function(t){return m.BLEND_MODES[t]})},alpha:{type:v.OptionType.NUMBER,default:1}},y.a.Operations.OverlayOperation=w,e.a=w},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=n(5),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),h=n(1),f=n.n(h),p=n(4),d=n.n(p),v=n(350),y=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var _=p.Math.Vector2,g=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(t=e.__proto__||f()(e)).call.apply(t,[this].concat(r)));o._lastBlurRadius=o._options.blurRadius,o._lastGradientRadius=o._options.gradientRadius;var a={blurQuality:{type:p.OptionType.STRING}};return o._horizontalFilter=new v.a({},a),o._verticalFilter=new v.a({},a),o._sprite.setFilters([o._horizontalFilter,o._verticalFilter]),o._horizontalFilter.setDelta(new _(.5,.5)),o._verticalFilter.setDelta(new _(-.5,.5)),o._filter=new v.a({},a),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=c()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(u.a?u()(t,e):t.__proto__=e)}(e,p["Operation"]),y(e,[{key:"rotate",value:function(t){var e=this._options.position;90===t?(e.flip(),e.x=1-e.x):-90===t&&(e.flip(),e.y=1-e.y),this.set({position:e})}},{key:"flip",value:function(t){var e=this._options.position;switch(t){case"horizontal":e.x=1-e.x;break;case"vertical":e.y=1-e.y}this.set({position:e})}},{key:"transform",value:function(t){var e=this,n={},r=this.getPosition();n.position=t.applyToRelativePoint(r),["radius","blurRadius","gradientRadius"].forEach(function(r){var i=e.getOption(r);n[r]=t.applyToRelativeSize(i)}),this.set(n,!1)}},{key:"_renderWebGL",value:function(t){return this._renderBlur(t)}},{key:"_renderCanvas",value:function(t){return this._options.highQualityCanvasBlur?this._renderBlur(t):this._renderLQCanvasBlur(t)}},{key:"_renderBlur",value:function(t){var e=t.getDimensions(),n=e.min(),r=this._options,i=r.position,o={blurRadius:r.blurRadius*n,radius:r.radius*n,gradientRadius:r.gradientRadius*n,position:i.clone().multiply(e),texSize:e,blurQuality:"high"};return this._horizontalFilter.set(o),this._verticalFilter.set(o),this._renderTexture.render(this._container),p.Promise.resolve()}},{key:"_renderLQCanvasBlur",value:function(t){var e=this._options,n=e.blurRadius,r=e.radius,i=e.gradientRadius,o=e.position,a=t.getDimensions();return this._filter.set({blurRadius:n,radius:r,gradientRadius:i,position:o,texSize:a,blurQuality:"low"}),this._sprite.setFilters([this._filter]),this._renderTexture.render(this._container),p.Promise.resolve()}},{key:"dispose",value:function(){(function t(e,n,r){null===e&&(e=Function.prototype);var i=a()(e,n);if(void 0===i){var o=f()(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0})(e.prototype.__proto__||f()(e.prototype),"dispose",this).call(this),this._filter.dispose(),this._verticalFilter.dispose(),this._horizontalFilter.dispose()}},{key:"hasChanges",value:function(){return!0}}]),e}();g.identifier="radial-focus",g.prototype.availableOptions={position:{type:p.OptionType.VECTOR2,default:new _(.5,.5)},radius:{type:p.OptionType.NUMBER,default:.25},gradientRadius:{type:p.OptionType.NUMBER,default:.125},blurRadius:{type:p.OptionType.NUMBER,default:.025},highQualityCanvasBlur:{type:p.OptionType.BOOLEAN,default:!1}},d.a.Operations.RadialFocusOperation=g,e.a=g},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=n(5),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),h=n(1),f=n.n(h),p=n(4),d=(n.n(p),n(76)),v=n.n(d),y=n(56),_=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var g=p.Math.Vector2,m=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(t=e.__proto__||f()(e)).call.apply(t,[this].concat(i)));return a._fragmentSource=n(351),a._lastBlurRadius=null,a._lastGradientRadius=null,a._lastPosition=new g,a._blurFilter=new y.a,a._blurredRenderTarget=new p.Engine.CanvasRenderTarget(100,100,1),a._maskRenderTarget=new p.Engine.CanvasRenderTarget(100,100,1),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=c()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(u.a?u()(t,e):t.__proto__=e)}(e,p["Engine"].Filter),_(e,[{key:"_applyCanvas",value:function(t,e,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if("low"!==this._options.blurQuality){var o=e.getDimensions(),a=!n.getDimensions().equals(o),s=this._options,u=s.blurRadius,l=s.position,c=s.texSize,h=s.gradientRadius;if(e.getBaseTexture().isDirty()||this._lastBlurRadius!==u||a){var f=new g(this._options.delta.x,this._options.delta.y);this._blurFilter.setDelta(f);var p={blurRadius:u,texSize:o},d=function(t,e,n){var r=function(t,e,n){return Math.min(Math.max(t,e),n)}((n-t)/(e-t),0,1);return r*r*(3-2*r)};this._blurFilter.set(p),this._blurFilter._applyCanvas(t,e,n,i,function(t,e){return d(0,1,(Math.abs(c.clone().multiply(t,e).subtract(l).len())-r._options.radius)/(2*h))*u}),this._lastBlurRadius=u}}else this._renderLQBlur(t,e,n,i)}},{key:"_renderLQBlur",value:function(t,e,n){arguments.length>3&&void 0!==arguments[3]&&arguments[3];var r=e.getDimensions(),i=!this._blurredRenderTarget.getDimensions().equals(r);this._blurredRenderTarget.setPixelRatio(e.getPixelRatio()),this._blurredRenderTarget.resizeTo(e.getDimensions()),this._maskRenderTarget.setPixelRatio(e.getPixelRatio()),this._maskRenderTarget.resizeTo(e.getDimensions());var o=!this._lastPosition.equals(this._options.position)||this._lastGradientRadius!==this._options.gradientRadius||i,a=e.getBaseTexture().isDirty()||this._lastBlurRadius!==this._options.blurRadius||i;o&&(this._renderMask(),this._lastPosition=this._options.position.clone(),this._lastGradientRadius=this._options.gradientRadius),a&&(this._blurImage(e),this._lastBlurRadius=this._options.blurRadius),this._applyMask(e,n)}},{key:"_blurImage",value:function(t){var e=t.getCanvas(),n=t.getContext(),r=new g(e.width,e.height),i=n.getImageData(0,0,e.width,e.height);v.a.stackBlurCanvasRGBA(i,0,0,e.width,e.height,this._options.blurRadius*r.min()),this._blurredRenderTarget.getContext().putImageData(i,0,0)}},{key:"_renderMask",value:function(){var t=this._maskRenderTarget.getCanvas(),e=this._maskRenderTarget.getContext(),n=new g(t.width,t.height),r=this._maskRenderTarget.getPixelRatio(),i=this._options.position.clone().multiply(n),o=this._options,a=o.radius,s=o.gradientRadius;a*=t.height,s*=t.height;var u=e.createRadialGradient(i.x,i.y,0,i.x,i.y,(a+s)*r);u.addColorStop(0,"#FFFFFF"),u.addColorStop(a/(a+s),"#FFFFFF"),u.addColorStop(1,"#000000"),e.fillStyle=u,e.fillRect(0,0,n.x,n.y)}},{key:"_applyMask",value:function(t,e){for(var n=e.getContext(),r=t.getCanvas(),i=t.getContext(),o=this._blurredRenderTarget.getContext(),a=this._maskRenderTarget.getContext(),s=i.getImageData(0,0,r.width,r.height),u=s.data,l=o.getImageData(0,0,r.width,r.height).data,c=a.getImageData(0,0,r.width,r.height).data,h=void 0,f=0;f<r.width*r.height*4;f+=4)h=c[f]/255,u[f]=h*u[f]+(1-h)*l[f],u[f+1]=h*u[f+1]+(1-h)*l[f+1],u[f+2]=h*u[f+2]+(1-h)*l[f+2];n.putImageData(s,0,0)}},{key:"dispose",value:function(){(function t(e,n,r){null===e&&(e=Function.prototype);var i=a()(e,n);if(void 0===i){var o=f()(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0})(e.prototype.__proto__||f()(e.prototype),"dispose",this).call(this),this._blurFilter.dispose()}}]),e}();m.prototype.availableOptions={blurRadius:{type:p.OptionType.NUMBER,default:30,uniformType:p.UniformType.FLOAT},radius:{type:p.OptionType.NUMBER,default:50,uniformType:p.UniformType.FLOAT},gradientRadius:{type:p.OptionType.NUMBER,default:25,uniformType:p.UniformType.FLOAT},position:{type:p.OptionType.VECTOR2,default:new g(.5,.5),uniformType:p.UniformType.FLOAT2},delta:{type:p.OptionType.VECTOR2,default:new g(1,1),uniformType:p.UniformType.FLOAT2},texSize:{type:p.OptionType.VECTOR2,default:new g(100,100),uniformType:p.UniformType.FLOAT2}},e.a=m},function(t,e){t.exports="/*\n * Based on evanw's glfx.js tilt shift shader:\n * https://github.com/evanw/glfx.js/blob/master/src/filters/blur/tiltshift.js\n * @license\n */\n\nuniform sampler2D u_image;\nuniform float u_radius;\nuniform float u_blurRadius;\nuniform float u_gradientRadius;\nuniform vec2 u_position;\nuniform vec2 u_delta;\nuniform vec2 u_texSize;\nvarying vec2 v_texCoord;\n\nconst float blurSteps = 30.0;\nconst float EPSILON = 0.000000001;\n\nfloat random(vec2 co)\n{\n    highp float a = 12.9898;\n    highp float b = 78.233;\n    highp float c = 43758.5453;\n    highp float dt = dot(co.xy,vec2(a,b));\n    highp float sn = mod(dt, 3.14);\n    return fract(sin(sn) * c);\n}\n\nvoid main() {\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    vec2 coord = v_texCoord * u_texSize;\n    vec2 diff = coord - u_position;\n    float dist = sqrt(diff.x * diff.x + diff.y * diff.y);\n\n    float blurPercentage = smoothstep( \n      0.0, 1.0,\n      (abs(dist) - u_radius) / u_gradientRadius\n    );\n\n    float radius = blurPercentage * u_blurRadius;\n    float offset = random(gl_FragCoord.xy / u_texSize.xy);\n\n    for (float t = -blurSteps; t <= blurSteps; t++) {\n        float percent = (t + offset - 0.5) / blurSteps;\n        float weight = 1.0 - abs(percent);\n        vec4 _sample = texture2D(u_image, v_texCoord + u_delta * percent * radius / u_texSize);\n\n        color += _sample * weight;\n        total += weight;\n    }\n\n    gl_FragColor = color / max(total, EPSILON);\n}\n"},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=n(5),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),h=n(1),f=n.n(h),p=n(4),d=n.n(p),v=n(147),y=n(56),_=n(356),g=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),m=function t(e,n,r){null===e&&(e=Function.prototype);var i=a()(e,n);if(void 0===i){var o=f()(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0};var b=p.Math.Vector2,w=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(t=e.__proto__||f()(e)).call.apply(t,[this].concat(r))),a=o._sdk.getRenderer();o._lastBlurRadius=null,o._blurredRenderTexture=new p.Engine.RenderTexture(a,100,100,1),o._maskRenderTexture=new p.Engine.RenderTexture(a,100,100,1),o._brushSprite=new v.a(o),o._brushSpriteContainer=new p.Engine.Container;var s=o._brushSprite.getDisplayObject();if(o._brushSpriteContainer.addChild(s),o._outputSprite=new p.Engine.Sprite,o._outputContainer=new p.Engine.Container,o._outputContainer.addChild(o._outputSprite),o._maskFilter=new _.a,a.isOfType(p.RendererType.WEBGL)){o._horizontalFilter=new y.a,o._verticalFilter=new y.a,o._sprite.setFilters([o._horizontalFilter,o._verticalFilter]),o._horizontalFilter.setDelta(new b(1,1)),o._verticalFilter.setDelta(new b(-1,1));var u=o._maskRenderTexture.getBaseTexture();u.setGLUnit(o._maskFilter.getMaskImage()),a.updateTexture(u,!1),(u=o._blurredRenderTexture.getBaseTexture()).setGLUnit(o._maskFilter.getFilterImage()),a.updateTexture(u,!1)}else a.isOfType(p.RendererType.CANVAS)&&(o._blurFilter=new y.a,o._sprite.setFilters([o._blurFilter]),o._maskFilter.setMaskCanvas(o._maskRenderTexture.getRenderTarget().getCanvas()),o._maskFilter.setFilterCanvas(o._blurredRenderTexture.getRenderTarget().getCanvas()));return o._outputSprite.setFilters([o._maskFilter]),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=c()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(u.a?u()(t,e):t.__proto__=e)}(e,p["Operation"]),g(e,[{key:"flip",value:function(t){this._brushSprite.applyFlip(t),this.setDirty(!0,!0),this._lastBlurRadius=null}},{key:"rotate",value:function(t){this._brushSprite.applyRotation(t),this.setDirty(!0,!0),this._lastBlurRadius=null}},{key:"transform",value:function(t,e){this._brushSprite.applyTransform(t,e),this.setDirty(!0,!0),this._lastBlurRadius=null}},{key:"_render",value:function(t){return this._renderBlur(t),this._renderMask(t),this._outputSprite.setTexture(t),this._renderTexture.render(this._outputContainer),p.Promise.resolve()}},{key:"_renderMask",value:function(t){var e=t.getDimensions();this._maskRenderTexture.getDimensions().equals(e)||this._maskRenderTexture.resizeTo(e),this._brushSprite.update(this._sdk,e),this._maskRenderTexture.clear(p.Color.BLACK),this._maskRenderTexture.render(this._brushSpriteContainer);var n=this._sdk.getRenderer();n.isOfType(p.RendererType.WEBGL)&&n.updateTexture(this._maskRenderTexture.getBaseTexture(),!1)}},{key:"_renderBlur",value:function(t){var e=t.getDimensions(),n=this._blurredRenderTexture.getDimensions();n.equals(e)||this._blurredRenderTexture.resizeTo(e);var r=this._options.blurRadius;if(this._lastBlurRadius!==r||!n.equals(e)){var i=this._sdk.getRenderer(),o=void 0;if(i.isOfType(p.RendererType.WEBGL))o={blurRadius:r*e.min(),texSize:e},this._horizontalFilter.set(o),this._verticalFilter.set(o);else i.isOfType(p.RendererType.CANVAS)&&(o={blurRadius:r},this._blurFilter.set(o));this._blurredRenderTexture.render(this._container),this._lastBlurRadius=r}}},{key:"getBrush",value:function(){return this._brushSprite}},{key:"createPath",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=new v.a.Brushes.RadialBrush({size:t,hardness:e,color:p.Color.WHITE}),r=this._brushSprite.createPath(n);return this._options.paths.push(r),this.setDirty(!0),r}},{key:"setDirtyForRenderer",value:function(t,n,r){m(e.prototype.__proto__||f()(e.prototype),"setDirtyForRenderer",this).call(this,t,n,r),this._brushSprite.setDirtyForRenderer(t,n,r)}},{key:"dispose",value:function(){m(e.prototype.__proto__||f()(e.prototype),"dispose",this).call(this),this._sdk.getRenderer().isOfType(p.RendererType.WEBGL)?(this._verticalFilter.dispose(),this._horizontalFilter.dispose()):this._blurFilter.dispose(),this._brushSprite.dispose(),this._maskFilter.dispose(),this._blurredRenderTexture.dispose(),this._maskRenderTexture.dispose()}},{key:"hasChanges",value:function(){return!0}}]),e}();w.identifier="selective-blur",w.prototype.availableOptions={blurRadius:{type:p.OptionType.NUMBER,default:.05},paths:{type:p.OptionType.ARRAY,default:[],setter:function(t){return this._brushSprite&&this._brushSprite.setPaths(t),t}}},d.a.Operations.SelectiveBlurOperation=w,e.a=w},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=n(5),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),h=n(1),f=n.n(h),p=n(4),d=(n.n(p),n(354)),v=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),y=function t(e,n,r){null===e&&(e=Function.prototype);var i=a()(e,n);if(void 0===i){var o=f()(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0};var _=function(t){function e(t,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||f()(e)).call(this,n));return i._operation=t,i._canvas=r||p.Utils.createCanvas(),i._context=i._canvas.getContext("2d"),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=c()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(u.a?u()(t,e):t.__proto__=e)}(e,p["Configurable"]),v(e,[{key:"serializeOption",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"controlPoints"===t?this._options.controlPoints.map(function(t){var e=t.getPosition();return n?e.toObject():e.clone()}):y(e.prototype.__proto__||f()(e.prototype),"serializeOption",this).call(this,t,n)}},{key:"_optionEquals",value:function(t,n){if("controlPoints"===t){for(var r=this._options.controlPoints,i=0,o=r.length;i<o;i++)if(!r[i].getPosition().equals(n[i]))return!1;return!0}return y(e.prototype.__proto__||f()(e.prototype),"_optionEquals",this).call(this,t,n)}},{key:"render",value:function(t){var e=this._options,n=e.controlPoints,r=e.size;if(!(n.length<2)){p.Utils.ensureCanvasDimensions(this._canvas,t),this._brush&&this._lastBrushSize===r&&t.equals(this._brushInputDimensions)||(this._brushInputDimensions=t.clone(),this._lastBrushSize=r);for(var i=void 0,o=void 0,a=void 0,s=void 0,u=0;u<n.length;u++)i=n[u-2],o=n[u-1],a=n[u],s=n[u+1],a.renderToCanvas(this._options.brush.getBrushImage(t),this._canvas,i,o,s,this.getBrush().getHardness())}}},{key:"_createBrush",value:function(t){var e=this._options,n=e.size,r=e.hardness,i=e.color,o=p.Utils.createCanvas();o.width=o.height=Math.ceil(n*t.min());var a=o.getContext("2d");if((i=i.clone()).a=1,1===o.width)a.fillStyle=i.toRGBA(),a.fillRect(0,0,1,1);else{var s=a.createRadialGradient(o.width/2,o.height/2,Math.min(o.width/2-1,o.width/2*r),o.width/2,o.height/2,o.width/2);s.addColorStop(0,i.toRGBA());var u=i.clone();u.a=0,s.addColorStop(1,u.toRGBA()),a.fillStyle=s,a.fillRect(0,0,o.width,o.height)}return o}},{key:"addControlPoint",value:function(t){var e=new d.a(this,t);this._options.controlPoints.push(e),this.emit("update",this)}},{key:"getCanvas",value:function(){return this._canvas}},{key:"setCanvas",value:function(t){this._canvas=t,this._context=t.getContext("2d")}},{key:"setDirty",value:function(){this._context.clearRect(0,0,this._canvas.width,this._canvas.height),this._options.controlPoints.forEach(function(t){t.setDirty()})}},{key:"forEachControlPoint",value:function(t){this._options.controlPoints.forEach(t)}},{key:"renderToCanvas",value:function(t){var e=t.getContext("2d");e.save(),e.globalAlpha=this._options.brush.getColor().a,e.drawImage(this._canvas,0,0),e.restore()}},{key:"getCanvasDimensions",value:function(){return this._canvasDimensions}}]),e}();_.prototype.availableOptions={id:{type:p.OptionType.STRING,default:function(){return p.Utils.getUUID()}},brush:{type:p.OptionType.OBJECT,required:!0},controlPoints:{type:p.OptionType.ARRAY,default:[]},closed:{type:p.OptionType.BOOLEAN,default:!1}},e.a=_},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=n(4),a=(n.n(o),function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}());var s=o.Math.Vector2,u=o.Math.CubicBezierCurve,l=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._path=e,this._drawnCanvases=[],this._position=n,this._smooth=r}return a(t,[{key:"getBezierCurve",value:function(t,e,n,r){if(!e)return null;var i=void 0,o=void 0;r?(i=(r.x-e.x)/this._smooth,o=(r.y-e.y)/this._smooth):(i=(n.x-e.x)/this._smooth,o=(n.y-e.y)/this._smooth);var a=void 0,s=void 0;t?(a=(n.x-t.x)/this._smooth,s=(n.y-t.y)/this._smooth):(a=(n.x-e.x)/this._smooth,s=(n.y-e.y)/this._smooth);var l=e.clone().add(a,s),c=n.clone().subtract(i,o);return new u(e,l,c,n)}},{key:"renderToCanvas",value:function(t,e,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;if(-1===this._drawnCanvases.indexOf(e)){var a=new s(e.width,e.height),u=e.getContext("2d"),l=this._position.clone().multiply(a),c=r?r.getPosition().clone().multiply(a):null,h=n?n.getPosition().clone().multiply(a):null,f=i?i.getPosition().clone().multiply(a):null,p=(l.clone().subtract(c).len(),t.width/10),d=this.getBezierCurve(h,c,l,f),v=void 0;if(d){d.calculateSegments(20);var y=d.getLength();v=d.arcLengthApproxSample(Math.ceil(y/p))}else v=[l];for(var _=0;_<v.length;_++){var g=v[_],m=.5*t.width/(2*p);m=1/(1+(m*=1-o)),u.globalAlpha=m,u.drawImage(t,g.x-t.width/2,g.y-t.height/2,t.width,t.height)}u.globalAlpha=1,this._drawnCanvases.push(e)}}},{key:"setPosition",value:function(t){this._position=t}},{key:"getPosition",value:function(){return this._position.clone()}},{key:"setDirty",value:function(){this._drawnCanvases=[]}}]),t}();e.a=l},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(1),c=n.n(l),h=n(4),f=(n.n(h),n(148)),p=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var d=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||c()(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=u()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(a.a?a()(t,e):t.__proto__=e)}(e,f["a"]),p(e,[{key:"getBrushImage",value:function(t){if(this._brush&&this.optionsEqual(this._lastOptions)&&t.equals(this._lastInputDimensions))return this._brush;var e=this._options,n=e.size,r=e.hardness,i=e.color,o=h.Utils.createCanvas();o.width=o.height=Math.ceil(n*t.min());var a=o.getContext("2d");if((i=i.clone()).a=1,1===o.width)a.fillStyle=i.toRGBA(),a.fillRect(0,0,1,1);else{var s=a.createRadialGradient(o.width/2,o.height/2,Math.min(o.width/2-1,o.width/2*r),o.width/2,o.height/2,o.width/2);s.addColorStop(0,i.toRGBA());var u=i.clone();u.a=0,s.addColorStop(1,u.toRGBA()),a.fillStyle=s,a.fillRect(0,0,o.width,o.height)}return this._lastOptions=this.serializeOptions(["size","color","hardness"]),this._brush=o,this._lastInputDimensions=t.clone(),o}}]),e}();e.a=d,d.identifier="imgly_brush_radial",d.prototype.availableOptions=h.Utils.extend(f.a.prototype.availableOptions,{hardness:{type:h.OptionType.NUMBER,default:1}})},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(1),c=n.n(l),h=n(4),f=(n.n(h),function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}());var p=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||c()(e)).call(this));return t._fragmentSource=n(357),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=u()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(a.a?a()(t,e):t.__proto__=e)}(e,h["Engine"].Filter),f(e,[{key:"_applyCanvas",value:function(t,e,n){arguments.length>3&&void 0!==arguments[3]&&arguments[3];for(var r=e.getCanvas(),i=e.getContext(),o=n.getContext(),a=this._options,s=a.maskCanvas,u=a.filterCanvas,l=s.getContext("2d"),c=u.getContext("2d"),h=l.getImageData(0,0,r.width,r.height).data,f=i.getImageData(0,0,r.width,r.height),p=f.data,d=c.getImageData(0,0,r.width,r.height).data,v=void 0,y=0;y<r.width*r.height*4;y+=4)v=h[y]/255,p[y]=v*d[y]+(1-v)*p[y],p[y+1]=v*d[y+1]+(1-v)*p[y+1],p[y+2]=v*d[y+2]+(1-v)*p[y+2];o.putImageData(f,0,0)}}]),e}();p.prototype.availableOptions={maskImage:{type:h.OptionType.NUMBER,default:1,uniformType:h.UniformType.INT},maskCanvas:{type:h.OptionType.OBJECT,default:null},filterImage:{type:h.OptionType.NUMBER,default:2,uniformType:h.UniformType.INT},filterCanvas:{type:h.OptionType.OBJECT,default:null}},e.a=p},function(t,e){t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform sampler2D u_filterImage;\nuniform sampler2D u_maskImage;\n\nvoid main() {\n  vec4 color0 = texture2D(u_image, v_texCoord);\n  vec4 color1 = texture2D(u_filterImage, v_texCoord);\n  vec4 mask = texture2D(u_maskImage, v_texCoord);\n  gl_FragColor = mix(color0, color1, mask);\n}\n"},function(t,e,n){"use strict";var r=n(6),i=n.n(r),o=n(0),a=n.n(o),s=n(5),u=n.n(s),l=n(2),c=n.n(l),h=n(3),f=n.n(h),p=n(1),d=n.n(p),v=n(4),y=n.n(v),_=n(57),g=n(359),m=n(360),b=n(147),w=n(361),x=i.a||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},T=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),a()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),k=function t(e,n,r){null===e&&(e=Function.prototype);var i=u()(e,n);if(void 0===i){var o=d()(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0};var C=v.Math.Vector2,R=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(t=e.__proto__||d()(e)).call.apply(t,[this].concat(r)));return o.setSmoothDownscaling(o._sdk.getOptions().smoothDownscaling),o._onSpriteUpdate=o._onSpriteUpdate.bind(o),o._options.sprites.slice().forEach(function(t){o.removeSprite(t),o.addSprite(t)}),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=f()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(c.a?c()(t,e):t.__proto__=e)}(e,v["Operation"]),T(e,[{key:"getSpritesOfType",value:function(t){return this._options.sprites.filter(function(e){return e instanceof t})}},{key:"rotate",value:function(t){this._options.sprites.forEach(function(e){e.applyRotation(t)})}},{key:"flip",value:function(t){this._options.sprites.forEach(function(e){e.applyFlip(t)})}},{key:"_onSpriteUpdate",value:function(t,e){this.emit("update",this),this.setDirty(!0)}},{key:"_applyRotation",value:function(t,e){this._options.sprites.forEach(function(n){return n.applyRotation(t,e)})}},{key:"transform",value:function(t){this._options.sprites.forEach(function(e){return e.applyTransform(t)})}},{key:"scale",value:function(t){this._options.sprites.forEach(function(e){return e.applyScale(t)})}},{key:"serializeOption",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"sprites"===t?this._options.sprites.map(function(t){return t.serializeOptions(void 0,n)}):k(e.prototype.__proto__||d()(e.prototype),"serializeOption",this).call(this,t,n)}},{key:"createSticker",value:function(t){return new g.a(this,t)}},{key:"createText",value:function(t){return new m.a(this,t)}},{key:"createBrush",value:function(t){return new b.a(this,t)}},{key:"createTextDesign",value:function(t){return new w.a(this,t)}},{key:"addSprite",value:function(t){this._options.sprites.push(t);var e=this.getSmoothDownscaling();t.setSmoothDownscaling&&t.setSmoothDownscaling(e),this._container.addChild(t.getDisplayObject()),this.setDirty(!0),t.on("update",this._onSpriteUpdate),this.emit("update",this,this._options.sprites)}},{key:"removeSprite",value:function(t){var e=this._options.sprites,n=e.indexOf(t);return-1!==n&&(t.off("update",this._onSpriteUpdate),this._container.removeChild(t.getDisplayObject()),e.splice(n,1),this.setDirty(!0),!0)}},{key:"_getOrientatedStageSize",value:function(){var t=this._sdk.getSprite().getTexture().getFrame(),e=this._sdk.getOperationsStack().getByIdentifier("orientation"),n=e?e.getRotation():0;return 270===n||90===n?new C(t.height,t.width):new C(t.width,t.height)}},{key:"_render",value:function(t){var e=this,n=this._container,r=this._options.sprites,i=t.getDimensions().clone().floor(),o=new v.Engine.Container;return o.addChild(this._sprite),v.Promise.all(r.map(function(t){return t.validateSettings()})).then(function(){r.forEach(function(t){return t.update(e._sdk,i)})}).then(function(){e._renderTexture.clear(),r.forEach(function(t){t.getInverted&&t.getInverted()?(e._renderTexture.render(o),e._renderTexture.render(e._renderMaskedSprite(t.getDisplayObject(),t.getColor?t.getColor():v.Color.WHITE,t.getPadding?t.getPadding():-1)),o=new v.Engine.Container):o.addChild(t.getDisplayObject())}),e._renderTexture.render(o),n.addChild(e._sprite),r.forEach(function(t){return n.addChild(t.getDisplayObject())})})}},{key:"_renderMaskedSprite",value:function(t,e,n){var r=v.Utils.createCanvas(),i=t.getWorldTransform(),o=this._getOrientatedStageSize();v.Utils.ensureCanvasDimensions(r,o);var a=r.getContext("2d");if(a.save(),a.fillStyle=e.toRGBA(),n<0)a.fillRect(0,0,o.x,o.y);else{var s=t.getWidth()/t.getScale().x,u=t.getHeight()/t.getScale().y,l=s*n;a.transform(i.a,i.b,i.c,i.d,i.tx,i.ty),a.fillRect(-l,-l,s+2*l,u+2*l)}a.restore(),a.globalCompositeOperation="destination-out",t._renderCanvas({getCurrentRenderTarget:function(){return{getPixelRatio:function(){return 1}}},getContext:function(){return a}});var c=new v.Engine.Container,h=new v.Engine.Sprite(v.Engine.Texture.fromCanvas(r));return c.addChild(h),c}},{key:"takeSpriteToFront",value:function(t){var e=this._options.sprites,n=e.indexOf(t);if(-1!==n){v.Utils.moveArrayItem(e,n,e.length-1);var r=t.getDisplayObject();this._container.removeChild(r),this._container.addChild(r),this.setDirty(!0)}}},{key:"getSpritesAtPosition",value:function(t,e){var n=this,r=[];this._options.sprites.forEach(function(t){return t.update(n._sdk,e)});var i=this._sdk.getSprite(),o=i.getWorldTransform().applyInverseToVector(t),a=i.getTexture().getFrame(),s=a.width,u=a.height,l=i.getAnchor().clone().multiply(-s,-u);o.subtract(l);for(var c=this._options.sprites.slice(0).reverse(),h=0,f=c.length;h<f;h++){var p=c[h];p.getHitTestDisplayObject().isAtPosition(o)&&r.push(p)}return r}},{key:"setDirtyForRenderer",value:function(t,n,r){k(e.prototype.__proto__||d()(e.prototype),"setDirtyForRenderer",this).call(this,t,n,r),this._options.sprites.forEach(function(e){e.setDirtyForRenderer(t,n,r)})}},{key:"dispose",value:function(){k(e.prototype.__proto__||d()(e.prototype),"dispose",this).call(this),this._options.sprites.forEach(function(t){t.dispose()})}}]),e}();R.StickerSprite=g.a,R.TextSprite=m.a,R.BrushSprite=b.a,R.TextDesignSprite=w.a,R.identifier="sprite",R.prototype.availableOptions={sprites:{type:v.OptionType.ARRAY,default:[],setter:function(t,e){var n=this;if(t=t.map(function(t,e){if(t instanceof _.a)return t;var r=x({},t);switch(delete r.type,t.type){case"text":return new m.a(n,r);case"sticker":return new g.a(n,r);case"brush":return new b.a(n,r);case"text-design":return new w.a(n,r);default:v.Log.error(n.constructor.name,"Invalid sprite type: "+t.type)}}),!e){if(this._options.sprites)this._options.sprites.slice().forEach(function(t){t.dispose(),n.removeSprite(t)});t.forEach(function(t){n.addSprite(t)})}return t}},smoothDownscaling:{type:v.OptionType.BOOLEAN,default:!1}},y.a.Operations.SpriteOperation=R,e.a=R},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=n(5),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),h=n(1),f=n.n(h),p=n(4),d=(n.n(p),n(57)),v=n(144),y=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),_=function t(e,n,r){null===e&&(e=Function.prototype);var i=a()(e,n);if(void 0===i){var o=f()(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0};var g=p.Math.Vector2,m=p.Math.ColorMatrix,b=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(t=e.__proto__||f()(e)).call.apply(t,[this].concat(r))),a=o._options.image,s=a.src||a.filePath;return o._isSVG=s&&!!s.match(/\w+\.svg(?=\?|$)/i),o._isSVG&&(o._canvas=p.Utils.createCanvas(),o._context=o._canvas.getContext("2d"),o._options.smoothDownscaling=!1),a&&o._onImageUpdate(),o._tintFilter=new p.Engine.Filters.TintFilter,o._adjustmentsFilter=new v.a,o._lastRenderedDimensions=g.NULL,o._lastRenderedInputDimensions=g.NULL,o._onOptionsChange=o._onOptionsChange.bind(o),o._options.adjustments.on("update",o._onOptionsChange),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=c()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(u.a?u()(t,e):t.__proto__=e)}(e,d["a"]),y(e,[{key:"applyScale",value:function(t){this.setDimensions(this.getDimensions().multiply(t))}},{key:"serializeOptions",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=_(e.prototype.__proto__||f()(e.prototype),"serializeOptions",this).call(this,t,n);return t||(r.type="sticker"),r}},{key:"_rendersToRenderTexture",value:function(t){return this._options.smoothDownscaling&&!this._isSVG&&t.getRenderer().isOfType(p.RendererType.WEBGL)||this._hasAdjustments()||"none"!==this._options.tintMode}},{key:"_getTexture",value:function(){return this._inputTexture}},{key:"update",value:function(t,e){var n=this._options,r=n.dimensions,i=n.image;r.equals(g.NULL)&&r.set(i.width,i.height),this._sprite.setSmoothDownscaling(!this._isSVG&&this.getSmoothDownscaling()),(!this._lastRenderedInputDimensions.equals(e)||!this._lastRenderedDimensions.equals(r)||this._lastRenderedImage!==i)&&this._isSVG&&t.getRenderer().isOfType(p.RendererType.WEBGL)&&(i.width=r.x,i.height=r.y,this._canvas.width=i.width,this._canvas.height=i.height,this._context.clearRect(0,0,i.width,i.height),this._context.drawImage(i,0,0,i.width,i.height),this._inputTexture.getBaseTexture().update()),this._rendersToRenderTexture(t)&&this._prepareRenderTexture(t);var o=[];if(this._rendersToRenderTexture(t)){if(this._hasAdjustments()){o.push(this._adjustmentsFilter);var a=this._options.adjustments,s=new m;s.multiply(m.createBrightnessMatrix(a.getBrightness())),s.multiply(m.createSaturationMatrix(a.getSaturation())),s.multiply(m.createContrastMatrix(a.getContrast())),this._adjustmentsFilter.set({colorMatrix:s})}this._options.tintMode&&"none"!==this._options.tintMode&&(o.push(this._tintFilter),this._tintFilter.set({mode:p.Engine.Filters.TintFilter.MODES[this._options.tintMode.toUpperCase()],color:this._options.tintColor})),this._renderTextureSprite.setFilters(o)}this._rendersToRenderTexture(t)?this._renderToRenderTexture(t):this._sprite.setTexture(this._inputTexture),this._updateSprite(e),this._applyFlip(),this._lastRenderedDimensions.copy(r),this._lastRenderedInputDimensions.copy(e),this._lastRenderedImage=i}},{key:"_applyFlip",value:function(){var t=this._sprite.getScale();this._options.flipVertically&&(t.y*=-1),this._options.flipHorizontally&&(t.x*=-1),this._sprite.setScale(t)}},{key:"applyFlip",value:function(t){_(e.prototype.__proto__||f()(e.prototype),"applyFlip",this).call(this,t);var n={rotation:this._options.rotation},r=-1*(n.rotation/Math.PI*180);switch(n.rotation=r*Math.PI/180,t){case"horizontal":n.flipHorizontally=!this._options.flipHorizontally,this.set(n);break;case"vertical":n.flipVertically=!this._options.flipVertically,this.set(n)}}},{key:"_hasAdjustments",value:function(){var t=this._options.adjustments;return 0!==t.getBrightness()||1!==t.getSaturation()||1!==t.getContrast()}},{key:"_onImageUpdate",value:function(){var t=this._options.image,e=this._operation.getSDK().getRenderer();this._isSVG&&e.isOfType(p.RendererType.WEBGL)&&(t=this._canvas),this._inputTexture=p.Engine.Texture.fromImage(t),this._identitySprite.setTexture(this._inputTexture),this._sprite.setTexture(this._inputTexture),this._renderTexture&&(this._renderTextureSprite.setTexture(this._inputTexture),this._renderTexture.resizeTo(this._inputTexture.getDimensions())),this.setDirty(!0)}},{key:"setOption",value:function(t,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];_(e.prototype.__proto__||f()(e.prototype),"setOption",this).call(this,t,n,r),"image"===t&&this._identitySprite&&this._onImageUpdate()}},{key:"_onOptionsChange",value:function(){var t=this._dirtiness;for(var e in t)t[e]=!0}},{key:"dispose",value:function(){_(e.prototype.__proto__||f()(e.prototype),"dispose",this).call(this),this._inputTexture&&this._inputTexture.getBaseTexture().dispose(),this._inputTexture=null,this._options.adjustments.off("updated",this._onOptionsChange)}}]),e}();b.prototype.availableOptions={id:{type:p.OptionType.STRING,default:function(){return p.Utils.getUUID()}},identifier:{type:p.OptionType.STRING,default:""},image:{type:p.OptionType.IMAGE,required:!0},position:{type:p.OptionType.VECTOR2,default:g.NULL},dimensions:{type:p.OptionType.VECTOR2,default:g.NULL},anchor:{type:p.OptionType.VECTOR2,default:new g(0,0)},pivot:{type:p.OptionType.VECTOR2,default:new g(.5,.5)},rotation:{type:p.OptionType.NUMBER,default:0},flipHorizontally:{type:p.OptionType.BOOLEAN,default:!1},flipVertically:{type:p.OptionType.BOOLEAN,default:!1},smoothDownscaling:{type:p.OptionType.BOOLEAN,default:!1},tintColor:{type:p.OptionType.COLOR,default:p.Color.WHITE},tintMode:{type:p.OptionType.STRING,default:"none",available:["none","solid","colorized"]},alpha:{type:p.OptionType.NUMBER,default:1},adjustments:{type:p.OptionType.CONFIGURABLE,structure:{brightness:{type:p.OptionType.NUMBER,default:0},saturation:{type:p.OptionType.NUMBER,default:1},contrast:{type:p.OptionType.NUMBER,default:1}}}},b.type="sticker",e.a=b},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=n(5),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),h=n(1),f=n.n(h),p=n(4),d=(n.n(p),n(57)),v=n(149),y=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),_=function t(e,n,r){null===e&&(e=Function.prototype);var i=a()(e,n);if(void 0===i){var o=f()(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0};var g=p.Math.Vector2,m=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(t=e.__proto__||f()(e)).call.apply(t,[this].concat(r)));return o._textRenderer=new v.a(o,o._operation),o._textRenderer.rotation=o.getRotation(),o._sprite.setTexture(o._textRenderer.getFinalTexture()),o._hitTestSprite.setTexture(o._textRenderer.getTexture()),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=c()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(u.a?u()(t,e):t.__proto__=e)}(e,d["a"]),y(e,[{key:"serializeOptions",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=_(e.prototype.__proto__||f()(e.prototype),"serializeOptions",this).call(this,t,n);return t||(r.type="text"),r}},{key:"getDOMStyle",value:function(t,e){var n=this.getFontSize()*e.y;return{fontWeight:this._options.fontWeight,fontSize:n+"px",fontStyle:this._options.fontStyle,fontFamily:this._options.fontFamily,lineHeight:this.getAbsoluteTextHeight(e)*this.getLineHeight()+"px",color:this._options.color.toRGBA(),backgroundColor:this._options.backgroundColor.toRGBA(),textAlign:this._options.alignment}}},{key:"getAbsoluteTextHeight",value:function(t){var e=this.getFontSize()*t.y,n=this.getTextMetrics();if(n){var r=1/n.unitsPerEm*e,i=n.ascender*r,o=n.descender*r;return i+Math.abs(o)}return e*this.getLineHeight()*1.1}},{key:"getDimensions",value:function(t,e){return this._textRenderer.getDimensions(t,e)}},{key:"applyFlip",value:function(t){_(e.prototype.__proto__||f()(e.prototype),"applyFlip",this).call(this,t);var n=this._options.rotation;switch(t){case"horizontal":n+=2*(Math.PI-n),this.setRotation(n);break;case"vertical":n+=2*(Math.PI/2-n),this.setRotation(n)}}},{key:"applyTransform",value:function(t){_(e.prototype.__proto__||f()(e.prototype),"applyTransform",this).call(this,t),this.set({fontSize:t.scaleSize(this.getFontSize(),"y"),maxWidth:t.scaleSize(this.getMaxWidth(),"x")},!1)}},{key:"applyRotation",value:function(t){_(e.prototype.__proto__||f()(e.prototype),"applyRotation",this).call(this,t);var n=(t+360)%360,r=this._operation.getInputDimensions();90!==n&&270!==n||(this.setMaxWidth(this.getMaxWidth()/r.x*r.y),this.setFontSize(this.getFontSize()/r.y*r.x))}},{key:"setOption",value:function(t,n){if("rotation"===t)return this._options.rotation=n,this._textRenderer&&(this._textRenderer.rotation=n),this._rotation=n,void this.emit("update");_(e.prototype.__proto__||f()(e.prototype),"setOption",this).call(this,t,n)}},{key:"getOption",value:function(t){return"rotation"===t?this._rotation:_(e.prototype.__proto__||f()(e.prototype),"getOption",this).call(this,t)}},{key:"getHitTestDisplayObject",value:function(){return this._hitTestSprite}},{key:"update",value:function(t,n){if(this._sprite.setVisible(this._options.visible),this._options.visible){this._textRenderer.update(t,n);var r=this._textRenderer.getFinalTexture();r.getBaseTexture().update();var i=t.getRenderer();i.isOfType(p.RendererType.WEBGL)&&i.updateTexture(r.getBaseTexture()),_(e.prototype.__proto__||f()(e.prototype),"update",this).call(this,t,n),this._sprite.setRotation(0),this._textRenderer.getTexture().getBaseTexture().update(),this._hitTestSprite.setRotation(this._rotation),this._hitTestSprite.updateTransform()}}},{key:"_getTexture",value:function(){return this._textRenderer.getFinalTexture()}},{key:"dispose",value:function(){_(e.prototype.__proto__||f()(e.prototype),"dispose",this).call(this),this._textRenderer.dispose()}},{key:"canBeFlippedHorizontally",value:function(){return!1}},{key:"canAdjustPadding",value:function(){return!1}}]),e}();m.prototype.availableOptions={id:{type:p.OptionType.STRING,default:function(){return p.Utils.getUUID()}},fontSize:{type:p.OptionType.NUMBER,default:.1},characterSpacing:{type:p.OptionType.NUMBER,default:0},lineHeight:{type:p.OptionType.NUMBER,default:1.1},fontIdentifier:{type:p.OptionType.STRING},fontFamily:{type:p.OptionType.STRING,default:"Times New Roman"},fontWeight:{type:p.OptionType.ALL,default:"normal"},fontStyle:{type:p.OptionType.STRING,default:"normal"},textMetrics:{type:p.OptionType.OBJECT,default:null},outlineWidth:{type:p.OptionType.NUMBER,default:0},outlineColor:{type:p.OptionType.COLOR,default:p.Color.BLACK},alignment:{type:p.OptionType.STRING,default:"left",available:["left","center","right"]},verticalAlignment:{type:p.OptionType.STRING,default:"top",available:["top","center","bottom"]},color:{type:p.OptionType.COLOR,default:new p.Color(1,0,0,1)},backgroundColor:{type:p.OptionType.COLOR,default:p.Color.TRANSPARENT},position:{type:p.OptionType.VECTOR2,default:new g(.5,.5)},anchor:{type:p.OptionType.VECTOR2,default:new g(0,0)},pivot:{type:p.OptionType.VECTOR2,default:new g(.5,.5)},rotation:{type:p.OptionType.NUMBER,default:0},text:{type:p.OptionType.STRING,required:!0},maxWidth:{type:p.OptionType.NUMBER,default:.5},maxHeight:{type:p.OptionType.NUMBER,default:0},visible:{type:p.OptionType.BOOLEAN,default:!0}},m.type="text",e.a=m},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=n(5),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),h=n(1),f=n.n(h),p=n(4),d=(n.n(p),n(57)),v=n(16),y=n(58),_=n(370),g=n(371),m=n(151),b=n(372),w=n(153),x=n(374),T=n(43),k=n(376),C=n(108),R=n(377),E=n(378),O=n(379),A=n(155),S=n(380),F=n(385),I=n(20),D=n(387),M=n(23),B=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),L=function t(e,n,r){null===e&&(e=Function.prototype);var i=a()(e,n);if(void 0===i){var o=f()(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0};var P=p.Math.Vector2,N=function(t){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||f()(e)).call(this,t,n));return r._renderer=new D.a,r._canvas=p.Utils.createCanvas(),r._context=r._canvas.getContext("2d"),r._texture=p.Engine.Texture.fromCanvas(r._canvas),r._sprite.setTexture(r._texture),r._aspect=1,r.getSeed()<0&&r.setSeed(v.a.TimeSeed()),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=c()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(u.a?u()(t,e):t.__proto__=e)}(e,d["a"]),B(e,[{key:"seed",value:function(t){this.setSeed(t||v.a.TimeSeed())}},{key:"_updateLayout",value:function(){var t=this.getLayout();return t?(this._renderer.createLayout(t,this.getText(),this.getSeed()),this._aspect=this._renderer.calculateAspect(),this._isLayoutDirty=!1,!0):null}},{key:"applyTransform",value:function(t){L(e.prototype.__proto__||f()(e.prototype),"applyTransform",this).call(this,t);var n={};this._options.dimensions&&(n.width=t.applyToRelativeSize(this.getWidth())),this.set(n,!1)}},{key:"applyFlip",value:function(t){L(e.prototype.__proto__||f()(e.prototype),"applyFlip",this).call(this,t);var n=this._options.rotation;switch(t){case"horizontal":n+=2*(Math.PI-n),this.setRotation(n);break;case"vertical":n+=2*(Math.PI/2-n),this.setRotation(n)}}},{key:"update",value:function(t,n){if(!this._isLayoutDirty||this._updateLayout()){var r=this.getWidth()*n.min()/t.getTextureScale(),i=r/this._aspect,o=new P(r,i);o.clamp(new P(1,1),new P(1/0,1/0)),p.Utils.ensureCanvasDimensions(this._canvas,o),this._context.clearRect(0,0,this._canvas.width,this._canvas.height),this._renderer.draw(this._context,new M.a(o.x,o.y),this.getColor(),this.getInverted()),this.setDimensions(o),this._texture.getBaseTexture().update();var a=t.getRenderer();a.isOfType(p.RendererType.WEBGL)&&a.updateTexture(this._texture.getBaseTexture()),L(e.prototype.__proto__||f()(e.prototype),"update",this).call(this,t,n)}}},{key:"_optionEquals",value:function(t,n){if("layout"===t){var r=this._options.layout;return!(!r&&n||!n&&r)&&(!(!n.constructor||!r.constructor)&&r.constructor.identifier===n.constructor.identifier)}return L(e.prototype.__proto__||f()(e.prototype),"_optionEquals",this).call(this,t,n)}},{key:"serializeOptions",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t&&this.getPadding()<0){var r=t.indexOf("padding");r>-1&&t.splice(r,1)}var i=L(e.prototype.__proto__||f()(e.prototype),"serializeOptions",this).call(this,t,n);return t||(i.type="text-design"),i}},{key:"_getTexture",value:function(){return this._texture}},{key:"canBeFlippedHorizontally",value:function(){return!1}},{key:"canBeDuplicated",value:function(){return!0}},{key:"canMaskCanvas",value:function(){return!0}},{key:"canAdjustPadding",value:function(){return!0}}]),e}();N.Layouts={TextDesignBlocks:y.a,TextDesignBlocksCondensed:_.a,TextDesignBlocksLight:g.a,TextDesignCelebrate:m.a,TextDesignCelebrateSimple:b.a,TextDesignEqualWidth:w.a,TextDesignEqualWidthFat:x.a,TextDesignMasked:T.a,TextDesignMaskedBadge:k.a,TextDesignMaskedSpeechBubble:C.a,TextDesignMaskedSpeechBubbleComic:R.a,TextDesignMultiline:E.a,TextDesignWatercolor:O.a,TextDesignSunshine:A.a,TextDesignParticles:S.a,TextDesignRotated:F.a},N.AssetManager=I.a,N.prototype.availableOptions={id:{type:p.OptionType.STRING,default:function(){return p.Utils.getUUID()}},position:{type:p.OptionType.VECTOR2,default:new P(.5,.5)},dimensions:{type:p.OptionType.VECTOR2,default:P.NULL},anchor:{type:p.OptionType.VECTOR2,default:new P(0,0)},pivot:{type:p.OptionType.VECTOR2,default:new P(.5,.5)},rotation:{type:p.OptionType.NUMBER,default:0},flipHorizontally:{type:p.OptionType.BOOLEAN,default:!1},flipVertically:{type:p.OptionType.BOOLEAN,default:!1},layout:{type:p.OptionType.OBJECT,default:null,setter:function(t){return this._isLayoutDirty=!0,t}},text:{type:p.OptionType.STRING,default:"",setter:function(t){return this._isLayoutDirty=!0,t}},color:{type:p.OptionType.COLOR,default:p.Color.BLACK},padding:{type:p.OptionType.NUMBER,default:.01,minValue:.01},width:{type:p.OptionType.NUMBER,default:.8},inverted:{type:p.OptionType.BOOLEAN,default:!1},seed:{type:p.OptionType.NUMBER,default:-1}},e.a=N},function(t,e,n){t.exports={default:n(363),__esModule:!0}},function(t,e,n){n(364),t.exports=9007199254740991},function(t,e,n){var r=n(13);r(r.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(t,e,n){"use strict";n.d(e,"a",function(){return v});var r=n(0),i=n.n(r),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(1),c=n.n(l),h=n(4),f=(n.n(h),n(17)),p=(n(60),n(23)),d=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();h.Math.Rectangle;var v=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||c()(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=u()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(a.a?a()(t,e):t.__proto__=e)}(e,h["Configurable"]),d(e,[{key:"getSize",value:function(){var t=this.getRows(),e=this.getWidth(),n=t.length-1,r=t.reduce(function(t,e){return t+e.getSize().height},0);r+=(n+1)*this.getRelativeLineSpacing()*e;var i=this.getRelativeInsets().clone().scale(e);return r+=i.top+i.bottom,new p.a(e,r)}}]),e}();v.prototype.availableOptions={text:{type:h.OptionType.STRING,default:""},lines:{type:h.OptionType.ARRAY,default:[]},relativeInsets:{type:h.OptionType.OBJECT,default:new f.a},relativeLineSpacing:{type:h.OptionType.NUMBER,default:0},rows:{type:h.OptionType.OBJECT,default:[]},background:{type:h.OptionType.OBJECT,default:null},width:{type:h.OptionType.NUMBER,default:0}}},function(t,e,n){t.exports=n(367)},function(t,e,n){var r=function(){return this}()||Function("return this")(),i=r.regeneratorRuntime&&Object.getOwnPropertyNames(r).indexOf("regeneratorRuntime")>=0,o=i&&r.regeneratorRuntime;if(r.regeneratorRuntime=void 0,t.exports=n(368),i)r.regeneratorRuntime=o;else try{delete r.regeneratorRuntime}catch(t){r.regeneratorRuntime=void 0}},function(t,e){!function(e){"use strict";var n,r=Object.prototype,i=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag",l="object"==typeof t,c=e.regeneratorRuntime;if(c)l&&(t.exports=c);else{(c=e.regeneratorRuntime=l?t.exports:{}).wrap=b;var h="suspendedStart",f="suspendedYield",p="executing",d="completed",v={},y={};y[a]=function(){return this};var _=Object.getPrototypeOf,g=_&&_(_(F([])));g&&g!==r&&i.call(g,a)&&(y=g);var m=k.prototype=x.prototype=Object.create(y);T.prototype=m.constructor=k,k.constructor=T,k[u]=T.displayName="GeneratorFunction",c.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===T||"GeneratorFunction"===(e.displayName||e.name))},c.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,k):(t.__proto__=k,u in t||(t[u]="GeneratorFunction")),t.prototype=Object.create(m),t},c.awrap=function(t){return{__await:t}},C(R.prototype),R.prototype[s]=function(){return this},c.AsyncIterator=R,c.async=function(t,e,n,r){var i=new R(b(t,e,n,r));return c.isGeneratorFunction(e)?i:i.next().then(function(t){return t.done?t.value:i.next()})},C(m),m[u]="Generator",m[a]=function(){return this},m.toString=function(){return"[object Generator]"},c.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},c.values=F,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(A),!t)for(var e in this)"t"===e.charAt(0)&&i.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=n)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,i){return s.type="throw",s.arg=t,e.next=r,i&&(e.method="next",e.arg=n),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=i.call(a,"catchLoc"),l=i.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),A(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;A(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:F(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=n),v}}}function b(t,e,n,r){var i=e&&e.prototype instanceof x?e:x,o=Object.create(i.prototype),a=new S(r||[]);return o._invoke=function(t,e,n){var r=h;return function(i,o){if(r===p)throw new Error("Generator is already running");if(r===d){if("throw"===i)throw o;return I()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=E(a,n);if(s){if(s===v)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===h)throw r=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var u=w(t,e,n);if("normal"===u.type){if(r=n.done?d:f,u.arg===v)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=d,n.method="throw",n.arg=u.arg)}}}(t,n,a),o}function w(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}function x(){}function T(){}function k(){}function C(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function R(t){var e;this._invoke=function(n,r){function o(){return new Promise(function(e,o){!function e(n,r,o,a){var s=w(t[n],t,r);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==typeof l&&i.call(l,"__await")?Promise.resolve(l.__await).then(function(t){e("next",t,o,a)},function(t){e("throw",t,o,a)}):Promise.resolve(l).then(function(t){u.value=t,o(u)},a)}a(s.arg)}(n,r,e,o)})}return e=e?e.then(o,o):o()}}function E(t,e){var r=t.iterator[e.method];if(r===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=n,E(t,e),"throw"===e.method))return v;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=w(r,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,v;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=n),e.delegate=null,v):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,v)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function F(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(i.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=n,e.done=!0,e};return o.next=o}}return{next:I}}function I(){return{value:n,done:!0}}}(function(){return this}()||Function("return this")())},function(t,e,n){"use strict";n.d(e,"a",function(){return b});var r=n(6),i=n.n(r),o=n(0),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),h=n(1),f=n.n(h),p=n(4),d=(n.n(p),n(60)),v=n(61),y=n(42),_=i.a||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},g=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),a()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var m=p.Math.Rectangle,b=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||f()(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=c()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(u.a?u()(t,e):t.__proto__=e)}(e,d["a"]),g(e,[{key:"_calculateLayoutElements",value:function(){if(this.getWords().size()<=0)return[];var t=this.serializeOptions(),n=t.orientation,r=t.width,i=t.size,o=t.relativeRowOffset,a=t.attributes.fontIdentifier,s=this.getWords().joined(3),u=n===e.Orientations.Left?[s[0],s[1],s[2]]:[s[1],s[2],s[0]],l=p.Utils.Array.range(0,2).map(function(t){return new v.a({text:u[t],fontIdentifier:a,fontSize:60})}),c=l.map(function(t){return t.getSizeValue()}),h=c[0].width>c[1].width?0:1,f=(h+1)%2;l[f].fitWidth(c[h].width),c[f]=l[f].getSizeValue();var d=(c[f].height+c[h].height)/(1-o),_=new v.a({text:u[2],fontIdentifier:a});_.fitHeight(d);var g=_.getSizeValue().width,b=c[h].width,w=r/(g+b),x=w*g,T=w*b,k=w*d,C=o*k;i.set(r,k);var R=p.Utils.Array.range(0,3).map(function(t){return new v.a({text:u[t],fontIdentifier:a})});R[0].fitWidth(T),R[1].fitWidth(T),R[2].fitWidth(x);var E=n===e.Orientations.Left?0:x,O=[E,E,n===e.Orientations.Left?T:0],A=[0,R[0].getSizeValue().height+C,0],S=R.map(function(t,e){return new m(O[e],A[e],t.getSizeValue().width,t.getSizeValue().height)});return R.map(function(t,e){return new y.a({text:u[e],font:R[e],frame:S[e]})})}}]),e}();b.Orientations={Right:"RIGHT",Left:"LEFT"},b.prototype.availableOptions=_({},d.a.prototype.availableOptions,{orientation:{type:p.OptionType.STRING,default:b.Orientations.Left,available:[b.Orientations.Right,b.Orientations.Left]},relativeRowOffset:{type:p.OptionType.NUMBER,default:.05}})},function(t,e,n){"use strict";n.d(e,"a",function(){return w});var r=n(6),i=n.n(r),o=n(0),a=n.n(o),s=n(5),u=n.n(s),l=n(2),c=n.n(l),h=n(3),f=n.n(h),p=n(1),d=n.n(p),v=n(4),y=(n.n(v),n(58)),_=n(19),g=i.a||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},m=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),a()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),b=function t(e,n,r){null===e&&(e=Function.prototype);var i=u()(e,n);if(void 0===i){var o=d()(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0};var w=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(t=e.__proto__||d()(e)).call.apply(t,[this].concat(r)));return o._exclusiveFont=null,o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=f()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(c.a?c()(t,e):t.__proto__=e)}(e,y["a"]),m(e,[{key:"generateLayoutData",value:function(t,n){return this._exclusiveFont=this._fontRandomizer.pickNext(this.getFontIdentifiers()),b(e.prototype.__proto__||d()(e.prototype),"generateLayoutData",this).call(this,t,n)}},{key:"_fontForRow",value:function(t,n){return this._exclusiveFont||b(e.prototype.__proto__||d()(e.prototype),"_fontForRow",this).call(this,t,n)}},{key:"_layoutRow",value:function(t,e,n,r){return new _.a({words:t,width:e,attributes:n})}}]),e}();w.defaultFontIdentifiers=["imgly_font_ostrich_sans_heavy","imgly_font_ostrich_sans_bold","imgly_font_ostrich_sans_black"],w.identifier="imgly_text_design_blocks_condensed",w.prototype.availableOptions=g({},y.a.prototype.availableOptions,{fontIdentifiers:{type:v.OptionType.ARRAY,default:w.defaultFontIdentifiers}})},function(t,e,n){"use strict";n.d(e,"a",function(){return g});var r=n(6),i=n.n(r),o=n(0),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),h=n(1),f=n.n(h),p=n(4),d=(n.n(p),n(58)),v=n(19),y=i.a||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),a()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var g=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||f()(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=c()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(u.a?u()(t,e):t.__proto__=e)}(e,d["a"]),_(e,[{key:"_layoutRow",value:function(t,e,n,r){return new v.a({words:t,width:e,attributes:n})}}]),e}();g.defaultFontIdentifiers=["imgly_font_summer_font_light"],g.identifier="imgly_text_design_blocks_light",g.prototype.availableOptions=y({},d.a.prototype.availableOptions,{fontIdentifiers:{type:p.OptionType.ARRAY,default:g.defaultFontIdentifiers}})},function(t,e,n){"use strict";n.d(e,"a",function(){return R});var r=n(6),i=n.n(r),o=n(15),a=n.n(o),s=n(0),u=n.n(s),l=n(5),c=n.n(l),h=n(2),f=n.n(h),p=n(3),d=n.n(p),v=n(1),y=n.n(v),_=n(4),g=(n.n(_),n(58),n(19),n(104),n(34),n(106),n(151)),m=n(152),b=n(20),w=n(16),x=i.a||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},T=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),u()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),k=function t(e,n,r){null===e&&(e=Function.prototype);var i=c()(e,n);if(void 0===i){var o=y()(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0};function C(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return a()(t)}var R=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(t=e.__proto__||y()(e)).call.apply(t,[this].concat(r)));return o.getImagePaths=function(){var t=o.getBanderoles();return[].concat(C(t&&t.map(function(t){return t.getImagePath()})||[]),C(o._celebrateTypes))},o.onImagesLoaded=function(){var t=o.getBanderoles();t&&t.forEach(function(t){var e=b.a.getImage(t.getImagePath());e?t.setImage(e):_.Log.warn("TextDesignBlocks#onImagesLoaded: Image not found '"+t.getImagePath()+"'")})},o._celebrateTypes=[m.a.RowImages.celebrate1,m.a.RowImages.celebrate2,m.a.RowImages.celebrate3],o._exclusiveFont=null,o._typeRandomizer=new w.a(0),o._useMaskedRandomizer=new w.a(0),o._seedPool.push(o._typeRandomizer),o._seedPool.push(o._useMaskedRandomizer),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=d()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(f.a?f()(t,e):t.__proto__=e)}(e,g["a"]),T(e,[{key:"_fontForRow",value:function(t,e){var n=this.getFontIdentifiers();return n[t%(n.length-1)]}},{key:"_layoutRows",value:function(t,n){var r=this._typeRandomizer.pickNext(this._celebrateTypes),i=b.a.getImage(r);i||_.Log.warn("TextDesignCelebrateSimple#_layoutRows: Image not fount '"+r+"'");var o=new m.a({width:n,height:.5*n,drawingModeAspectFit:!0,image:i}).layout(),a=k(e.prototype.__proto__||y()(e.prototype),"_layoutRows",this).call(this,t,n);return[o].concat(C(a))}},{key:"_randomLayoutRow",value:function(t,n,r,i){var o=t.countNumberOfCharacters();o<4&&i.setFontIdentifier("imgly_font_rasa_regular");var a=this._useMaskedRandomizer.nextBool(2,1);return o<13&&a&&!this.getHasMaskedText()?this._layoutRow(t,r,i,!0):k(e.prototype.__proto__||y()(e.prototype),"_randomLayoutRow",this).call(this,t,n,r,i)}}]),e}();R.identifier="imgly_text_design_celebrate_simple",R.defaultFontIdentifiers=["imgly_font_amberlight","imgly_font_rasa_regular","imgly_font_rasa_500"],R.prototype.availableOptions=x({},g.a.prototype.availableOptions,{fontIdentifiers:{type:_.OptionType.ARRAY,default:R.defaultFontIdentifiers}})},function(t,e,n){"use strict";n.d(e,"a",function(){return _});var r=n(0),i=n.n(r),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(1),c=n.n(l),h=n(4),f=(n.n(h),n(154)),p=n(20),d=n(35),v=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var y=h.Math.Rectangle,_=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||c()(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=u()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(a.a?a()(t,e):t.__proto__=e)}(e,f["a"]),v(e,[{key:"getImagePaths",value:function(){var t=this._options;return[t.topImagePath,t.bottomImagePath,t.leftImagePath,t.rightImagePath].filter(function(t){return""!==t})}},{key:"render",value:function(t,e,n,r,i){var o=n.clone().scale(e.width),a=e.rectangle(0,0),s=p.a.getImage(this.getTopImagePath()),u=p.a.getImage(this.getLeftImagePath()),l=p.a.getImage(this.getRightImagePath()),c=p.a.getImage(this.getBottomImagePath());if(s){var h=s.width/s.height,f=o.top*this.getTopImageFillRate(),v=f*h,_=a.width/2,g=new y(_-v/2,0,v,f);Object(d.a)(t,s,g,r)}if(c){var m=c.width/c.height,b=o.bottom*this.getBottomImageFillRate(),w=b*m,x=a.width/2,T=new y(x-w/2,a.height-b,w,b);Object(d.a)(t,c,T,r)}if(u){var k=u.width/u.height,C=o.left*this.getLeftImageFillRate(),R=C/k,E=a.height/2,O=new y(0,E-R/2,C,R);Object(d.a)(t,u,O,r)}if(l){var A=l.width/l.height,S=o.right*this.getRightImageFillRate(),F=S/A,I=a.height/2-F/2,D=new y(a.width-S,I,S,F);Object(d.a)(t,l,D,r)}}}]),e}();_.prototype.availableOptions={topImagePath:{type:h.OptionType.STRING,default:""},leftImagePath:{type:h.OptionType.STRING,default:""},bottomImagePath:{type:h.OptionType.STRING,default:""},rightImagePath:{type:h.OptionType.STRING,default:""},topImageFillRate:{type:h.OptionType.NUMBER,default:1},leftImageFillRate:{type:h.OptionType.NUMBER,default:1},bottomImageFillRate:{type:h.OptionType.NUMBER,default:1},rightImageFillRate:{type:h.OptionType.NUMBER,default:1}},_.Backgrounds=[new _({topImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background1_1.png",leftImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background1_2.png",rightImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background1_2.png",bottomImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background1_3.png",topImageFillRate:.8,leftImageFillRate:.6,rightImageFillRate:.6,bottomImageFillRate:.8}),new _({leftImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background2_1.png",rightImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background2_1.png",bottomImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background2_2.png",leftImageFillRate:.6,rightImageFillRate:.6,bottomImageFillRate:.6}),new _({topImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background3_1.png",bottomImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background3_2.png",topImageFillRate:.6,bottomImageFillRate:.6}),new _({topImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background4_1.png",leftImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background4_3.png",rightImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background4_3.png",bottomImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background4_2.png",topImageFillRate:.1,leftImageFillRate:.6,rightImageFillRate:.6,bottomImageFillRate:.6})]},function(t,e,n){"use strict";n.d(e,"a",function(){return g});var r=n(6),i=n.n(r),o=n(0),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),h=n(1),f=n.n(h),p=n(4),d=(n.n(p),n(153)),v=n(17),y=i.a||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),a()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var g=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(t=e.__proto__||f()(e)).call.apply(t,[this].concat(r)));return o._relativeInsets=new v.a,o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=c()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(u.a?u()(t,e):t.__proto__=e)}(e,d["a"]),_(e,[{key:"_getBackground",value:function(){return null}}]),e}();g.defaultFontIdentifiers=["imgly_font_ultra"],g.identifier="imgly_text_design_equal_width_fat",g.prototype.availableOptions=y({},d.a.prototype.availableOptions,{fontIdentifiers:{type:p.OptionType.ARRAY,default:g.defaultFontIdentifiers}})},function(t,e,n){"use strict";n.d(e,"a",function(){return x});var r=n(6),i=n.n(r),o=n(0),a=n.n(o),s=n(5),u=n.n(s),l=n(2),c=n.n(l),h=n(3),f=n.n(h),p=n(1),d=n.n(p),v=n(4),y=(n.n(v),n(20)),_=n(150),g=n(23),m=i.a||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},b=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),a()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var w=v.Math.Vector2,x=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||d()(e)).call(this,t));return n._textOptions={},n._createCanvas(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=f()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(c.a?c()(t,e):t.__proto__=e)}(e,v["Configurable"]),b(e,[{key:"_createCanvas",value:function(){this._canvas=v.Utils.createCanvas(),this._context=this._canvas.getContext("2d"),this._textSplitter=new _.a(this._context),this._finalCanvas=v.Utils.createCanvas(),this._finalContext=this._finalCanvas.getContext("2d"),this.updateFontVariation()}},{key:"setOption",value:function(t,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];(function t(e,n,r){null===e&&(e=Function.prototype);var i=u()(e,n);if(void 0===i){var o=d()(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0})(e.prototype.__proto__||d()(e.prototype),"setOption",this).call(this,t,n,r,i),"fontIdentifier"!==t||i||this.updateFontVariation()}},{key:"updateFontVariation",value:function(){var t=y.a.getVariation(this.getFontIdentifier());return t||v.Log.warn("TextDesignFont: Unable to find font '"+this._fontIdentifier+"'"),this.setFontVariation(t),t}},{key:"_applyTextOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._context,n=m({},this._options,t),r=n.fontSize,i=n.fontVariation,o=(n.lineHeight,n.textColor),a=n.alignment,s=i.serializeOptions(),u=s.fontStyle,l=s.fontWeight,c=s.fontFamily;e.font=u+" "+l+" "+r+'px "'+c+'"',e.fillStyle=o,e.textBaseline="top",e.textAlign=a||"left"}},{key:"_buildOutputLines",value:function(t){return this._textSplitter.setText(this.getText()),this._textSplitter.setMaxWidth(t),this._textSplitter.getLines()}},{key:"_renderTextLine",value:function(t,e){var n=this.getAlignment(),r=new w(0,e);switch(n){case"center":r.x=this._canvas.width/2;break;case"right":r.x=this._canvas.width}this._context.fillText(t,r.x,r.y)}},{key:"update",value:function(){var t=this.calculateFontStyles();if(t){var e=this._calculateText(t),n=e.dimensions,r=e.lines;this._dimensions=n,this._renderText(n,r,t)}}},{key:"draw",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.update(),t.drawImage(this._canvas,e,n,this._dimensions.x,this._dimensions.y)}},{key:"_renderText",value:function(t,e,n){this._canvas.width=t.x,this._canvas.height=t.y,this._context=this._canvas.getContext("2d"),this._applyTextOptions(n,this._context);for(var r=0;r<e.length;r++){var i=e[r];this._renderTextLine(i,n.topPadding+n.lineHeight*r)}}},{key:"getFontFamily",value:function(){return this.getFontVariation().getFontFamily()}},{key:"calculateFontStyles",value:function(){var t=this.getFontFamily(),e=this.getFontSize(),n=this.getAbsoluteTextHeight(),r={fontFamily:t,fontSize:e,textHeight:n,lineHeight:n*this.getLineHeight(),topPadding:n*(this.getLineHeight()-1)/2};return this._textOptions=m({},r),r}},{key:"getTextMetrics",value:function(){return this.getFontVariation().getTextMetrics()}},{key:"getAbsoluteTextHeight",value:function(){var t=this.getFontSize(),e=this.getTextMetrics();if(e){var n=1/e.unitsPerEm*t,r=e.ascender*n,i=e.descender*n;return r+Math.abs(i)}return t*this.getLineHeight()*1.1}},{key:"_calculateText",value:function(t){this._applyTextOptions(t,this._context);for(var e=new w,n=this.getText().split("\n"),r=0;r<n.length;r++){var i=n[r];e.x=Math.max(e.x,this._context.measureText(i).width)}var o=t.lineHeight;return e.y=n.length*o,{dimensions:e,lines:n}}},{key:"getDimensions",value:function(){var t=this.calculateFontStyles();return this._calculateText(t).dimensions}},{key:"fitMaxHeight",value:function(){this.update();var t=this.getDimensions();this.getText().split("\n"),this.getMaxHeight(),t.y}},{key:"fitMaxWidth",value:function(){var t=this.getDimensions().x,e=this.getMaxWidth()/t;this.setFontSize(this.getFontSize()*e),this._textOptions.fontSize=this.getFontSize()}},{key:"fitInFrame",value:function(t){this.setMaxWidth(t.width),this.setMaxHeight(t.height),this.fitMaxWidth(),this.fitMaxHeight()}},{key:"getSize",value:function(){var t=this.getDimensions();return new g.a(t.x,t.y)}}]),e}();x.prototype.availableOptions={text:{type:v.OptionType.STRING,default:""},fontIdentifier:{type:v.OptionType.STRING,default:"imgly_font_open_sans_bold"},fontVariation:{type:v.OptionType.OBJECT,default:null},lineHeight:{type:v.OptionType.NUMBER,default:1},fontSize:{type:v.OptionType.NUMBER,default:22},textColor:{type:v.OptionType.STRING,default:"black"},strokeStyle:{type:v.OptionType.STRING,default:"black"},outlineWidth:{type:v.OptionType.NUMBER,default:0},textBaseline:{type:v.OptionType.STRING,default:"alphabetic"},excludeAccents:{type:v.OptionType.BOOLEAN,default:!0},maxWidth:{type:v.OptionType.NUMBER,default:100},maxHeight:{type:v.OptionType.NUMBER,default:0},alignment:{type:v.OptionType.STRING,default:"left",available:["left","center","right"]}}},function(t,e,n){"use strict";n.d(e,"a",function(){return w});var r=n(6),i=n.n(r),o=n(0),a=n.n(o),s=n(5),u=n.n(s),l=n(2),c=n.n(l),h=n(3),f=n.n(h),p=n(1),d=n.n(p),v=n(4),y=(n.n(v),n(62)),_=n(43),g=n(16),m=i.a||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},b=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),a()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var w=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(t=e.__proto__||d()(e)).call.apply(t,[this].concat(r)));return o._possibleRowTypes=[y.a.Badge1,y.a.Badge2,y.a.Badge3,y.a.Badge4],o._rowTypesRandomizer=new g.a(0),o._isMaskedRandomizer=new g.a(0),o._seedPool.push(o._rowTypesRandomizer),o._seedPool.push(o._isMaskedRandomizer),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=f()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(c.a?c()(t,e):t.__proto__=e)}(e,_["a"]),b(e,[{key:"getImagePaths",value:function(){return this._possibleRowTypes.map(function(t){return t.getImagePath()})}},{key:"_randomLayoutRow",value:function(t,n,r,i){this._rowType=this._rowTypesRandomizer.pickNext(this._possibleRowTypes),i.setLineSpacing(.9);var o=function t(e,n,r){null===e&&(e=Function.prototype);var i=u()(e,n);if(void 0===i){var o=d()(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0}(e.prototype.__proto__||d()(e.prototype),"_randomLayoutRow",this).call(this,t,n,r,i);return o.set({textScaleFactor:.9}),o}}]),e}();w.defaultFontIdentifiers=["imgly_font_campton_bold"],w.identifier="imgly_text_design_masked_badge",w.ValidAlignments=[_.a.Alignment.Center],w.prototype.availableOptions=m({},_.a.prototype.availableOptions,{fontIdentifiers:{type:v.OptionType.ARRAY,default:w.defaultFontIdentifiers}})},function(t,e,n){"use strict";n.d(e,"a",function(){return g});var r=n(6),i=n.n(r),o=n(0),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),h=n(1),f=n.n(h),p=n(4),d=(n.n(p),n(62)),v=(n(43),n(108)),y=i.a||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),a()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var g=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(t=e.__proto__||f()(e)).call.apply(t,[this].concat(r)));return o._possibleRowTypes=[d.a.SpeechBubble2,d.a.SpeechBubble4,d.a.SpeechBubble2,d.a.SpeechBubble4,d.a.SpeechBubble5],o._possibleRowTypesForMin15=o._possibleRowTypes.slice(0,2),o._possibleRowTypesForMax14=o._possibleRowTypes.slice(2),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=c()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(u.a?u()(t,e):t.__proto__=e)}(e,v["a"]),_(e,[{key:"_rowTypes",value:function(t){return t.countNumberOfCharacters()<15?this._possibleRowTypesForMax14:this._possibleRowTypesForMin15}}]),e}();g.defaultFontIdentifiers=["imgly_font_gagalin_regular"],g.identifier="imgly_text_design_masked_speech_bubble_comic",g.prototype.availableOptions=y({},v.a.prototype.availableOptions,{fontIdentifiers:{type:p.OptionType.ARRAY,default:g.defaultFontIdentifiers}})},function(t,e,n){"use strict";n.d(e,"a",function(){return b});var r=n(6),i=n.n(r),o=n(0),a=n.n(o),s=n(5),u=n.n(s),l=n(2),c=n.n(l),h=n(3),f=n.n(h),p=n(1),d=n.n(p),v=n(4),y=(n.n(v),n(43)),_=n(107),g=i.a||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},m=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),a()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var b=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||d()(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=f()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(c.a?c()(t,e):t.__proto__=e)}(e,y["a"]),m(e,[{key:"_modifiedText",value:function(t){return function t(e,n,r){null===e&&(e=Function.prototype);var i=u()(e,n);if(void 0===i){var o=d()(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0}(e.prototype.__proto__||d()(e.prototype),"_modifiedText",this).call(this,t).toUpperCase()}},{key:"_randomLayoutRow",value:function(t,e,n,r){var i=this._alignmentRandomizer.pickNext(y.a.ValidAlignments);return r.setAlignment(i),new _.a({words:t,width:n,attributes:r,image:null,backgroundColor:v.Color.WHITE,centerOffset:0,sizeToFitContent:!0,isMasked:!1,autoAdjustTextColor:!1})}}]),e}();b.defaultFontIdentifiers=["imgly_font_abril_fatface_regular"],b.identifier="imgly_text_design_multiline",b.prototype.availableOptions=g({},y.a.prototype.availableOptions,{fontIdentifiers:{type:v.OptionType.ARRAY,default:b.defaultFontIdentifiers}})},function(t,e,n){"use strict";n.d(e,"a",function(){return y});var r=n(6),i=n.n(r),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(1),c=n.n(l),h=n(4),f=(n.n(h),n(62)),p=n(43),d=n(108),v=i.a||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};var y=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(t=e.__proto__||c()(e)).call.apply(t,[this].concat(r)));return o._possibleRowTypes=[f.a.Watercolor1,f.a.Watercolor2,f.a.Watercolor3],o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=u()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(a.a?a()(t,e):t.__proto__=e)}(e,d["a"]),e}();y.defaultFontIdentifiers=["imgly_font_permanent_marker","imgly_font_wolesbro","imgly_font_wolesbro"],y.identifier="imgly_text_design_watercolor",y.prototype.availableOptions=v({},d.a.prototype.availableOptions,{fontIdentifiers:{type:h.OptionType.ARRAY,default:y.defaultFontIdentifiers},alignment:{type:h.OptionType.STRING,default:p.a.Alignment.Center,available:p.a.ValidAlignments}})},function(t,e,n){"use strict";n.d(e,"a",function(){return R});var r=n(6),i=n.n(r),o=n(15),a=n.n(o),s=n(0),u=n.n(s),l=n(2),c=n.n(l),h=n(3),f=n.n(h),p=n(1),d=n.n(p),v=n(4),y=(n.n(v),n(20)),_=n(17),g=n(155),m=n(381),b=n(383),w=n(384),x=n(16),T=i.a||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},k=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),u()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function C(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return a()(t)}var R=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(t=e.__proto__||d()(e)).call.apply(t,[this].concat(r)));return o._relativeInsets=new _.a(.3,.3,.3,.3),o._backgroundRandomizer=new x.a(0),o._decoTypeRandomizer=new x.a(0),o._seedPool.push(o._backgroundRandomizer),o._seedPool.push(o._decoTypeRandomizer),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=f()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(c.a?c()(t,e):t.__proto__=e)}(e,g["a"]),k(e,[{key:"getImagePaths",value:function(){return[].concat(C(g.a.RowImages),C(v.Utils.Array.flatten(e.Backgrounds.map(function(t){return t.getImagePaths()}))),C(e.DecoratorImages))}},{key:"_getBackground",value:function(){return this._backgroundRandomizer.pickNext(e.Backgrounds)}},{key:"_randomDecoratorImages",value:function(){switch(this._decoTypeRandomizer.nextInRange(0,2)){case 0:return e.DecoratorImages.slice(0,2).map(function(t){return y.a.getImage(t)});case 1:case 2:return e.DecoratorImages.slice(2).map(function(t){return y.a.getImage(t)});default:return v.Log.warn("TextDesignParticles#_randomDecoratorImages: Number generated not in valid range."),e.DecoratorImages.slice(2).map(function(t){return y.a.getImage(t)})}}}]),e}();R.defaultFontIdentifiers=["imgly_font_permanent_marker","imgly_font_wolesbro","imgly_font_wolesbro","imgly_font_montserrat_light"],R.identifier="imgly_text_design_particles",R.Backgrounds=[new m.a,new b.a,new w.a],R.DecoratorImages=["text-design/images/imgly_text_design_particle_holder_01.png","text-design/images/imgly_text_design_particle_holder_02.png","text-design/images/imgly_text_design_particle_holder_03.png","text-design/images/imgly_text_design_particle_holder_04.png"],R.prototype.availableOptions=T({},g.a.prototype.availableOptions,{fontIdentifiers:{type:v.OptionType.ARRAY,default:R.defaultFontIdentifiers},decorationsVisible:{type:v.OptionType.BOOLEAN,default:!1},decorativeRowsInTheMiddleOnly:{type:v.OptionType.BOOLEAN,default:!0}})},function(t,e,n){"use strict";n.d(e,"a",function(){return y});var r=n(15),i=n.n(r),o=n(6),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),h=n(1),f=n.n(h),p=n(4),d=(n.n(p),n(109)),v=a.a||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};var y=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||f()(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=c()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(u.a?u()(t,e):t.__proto__=e)}(e,d["a"]),e}();y.Images=["text-design/images/imgly_text_design_particle_brush_01.png","text-design/images/imgly_text_design_particle_brush_02.png","text-design/images/imgly_text_design_particle_brush_03.png","text-design/images/imgly_text_design_particle_brush_04.png","text-design/images/imgly_text_design_particle_brush_05.png","text-design/images/imgly_text_design_particle_brush_06.png","text-design/images/imgly_text_design_particle_brush_07.png","text-design/images/imgly_text_design_particle_brush_08.png","text-design/images/imgly_text_design_particle_brush_09.png","text-design/images/imgly_text_design_particle_brush_10.png"],y.prototype.availableOptions=v({},d.a.prototype.availableOptions,{imagePaths:{type:p.OptionType.ARRAY,default:[].concat(function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return i()(t)}(y.Images))},relativeParticleSize:{type:p.OptionType.NUMBER,default:.12}})},function(t,e,n){"use strict";n.d(e,"a",function(){return d});var r=n(0),i=n.n(r),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(1),c=n.n(l),h=n(4),f=(n.n(h),function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}());var p=h.Math.Rectangle,d=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||c()(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=u()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(a.a?a()(t,e):t.__proto__=e)}(e,h["Configurable"]),f(e,[{key:"getContentFrame",value:function(){var t=this.getFrame().clone(),e=.1*t.width;return t.insetBy(e,e)}},{key:"intersects",value:function(t){return this.getFrame().intersects(t.getFrame())}}]),e}();d.prototype.availableOptions={frame:{type:h.OptionType.OBJECT,default:new p}}},function(t,e,n){"use strict";n.d(e,"a",function(){return y});var r=n(15),i=n.n(r),o=n(6),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),h=n(1),f=n.n(h),p=n(4),d=(n.n(p),n(109)),v=a.a||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};var y=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||f()(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=c()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(u.a?u()(t,e):t.__proto__=e)}(e,d["a"]),e}();y.Images=["text-design/images/imgly_text_design_particle_circle_01.png","text-design/images/imgly_text_design_particle_circle_02.png","text-design/images/imgly_text_design_particle_circle_03.png","text-design/images/imgly_text_design_particle_circle_04.png","text-design/images/imgly_text_design_particle_circle_05.png","text-design/images/imgly_text_design_particle_circle_06.png","text-design/images/imgly_text_design_particle_circle_07.png","text-design/images/imgly_text_design_particle_circle_08.png","text-design/images/imgly_text_design_particle_circle_09.png","text-design/images/imgly_text_design_particle_circle_10.png"],y.prototype.availableOptions=v({},d.a.prototype.availableOptions,{imagePaths:{type:p.OptionType.ARRAY,default:[].concat(function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return i()(t)}(y.Images))},relativeParticleSize:{type:p.OptionType.NUMBER,default:.12}})},function(t,e,n){"use strict";n.d(e,"a",function(){return y});var r=n(15),i=n.n(r),o=n(6),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),h=n(1),f=n.n(h),p=n(4),d=(n.n(p),n(109)),v=a.a||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};var y=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||f()(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=c()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(u.a?u()(t,e):t.__proto__=e)}(e,d["a"]),e}();y.Images=["text-design/images/imgly_text_design_particle_triangle_01.png","text-design/images/imgly_text_design_particle_triangle_02.png","text-design/images/imgly_text_design_particle_triangle_03.png","text-design/images/imgly_text_design_particle_triangle_04.png","text-design/images/imgly_text_design_particle_triangle_05.png","text-design/images/imgly_text_design_particle_triangle_06.png","text-design/images/imgly_text_design_particle_triangle_07.png","text-design/images/imgly_text_design_particle_triangle_08.png","text-design/images/imgly_text_design_particle_triangle_09.png","text-design/images/imgly_text_design_particle_triangle_10.png"],y.prototype.availableOptions=v({},d.a.prototype.availableOptions,{imagePaths:{type:p.OptionType.ARRAY,default:[].concat(function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return i()(t)}(y.Images))}})},function(t,e,n){"use strict";n.d(e,"a",function(){return C});var r=n(6),i=n.n(r),o=n(15),a=n.n(o),s=n(0),u=n.n(s),l=n(5),c=n.n(l),h=n(2),f=n.n(h),p=n(3),d=n.n(p),v=n(1),y=n.n(v),_=n(4),g=(n.n(_),n(59)),m=n(17),b=n(386),w=n(16),x=i.a||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},T=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),u()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),k=function t(e,n,r){null===e&&(e=Function.prototype);var i=c()(e,n);if(void 0===i){var o=y()(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0};var C=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(t=e.__proto__||y()(e)).call.apply(t,[this].concat(r)));return o._relativeInsets=new m.a(.1,0,0,0),o._rowTypeRandomizer=new w.a(0),o._seedPool.push(o._rowTypeRandomizer),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=d()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(f.a?f()(t,e):t.__proto__=e)}(e,g["a"]),T(e,[{key:"_modifiedText",value:function(t){return k(e.prototype.__proto__||y()(e.prototype),"_modifiedText",this).call(this,t).toUpperCase()}},{key:"_randomLayoutRow",value:function(t,n,r,i){var o=k(e.prototype.__proto__||y()(e.prototype),"_randomLayoutRow",this).call(this,t,n,r,i);return o.setShearingAngle(this.getShearingAngle()),o}},{key:"_layoutRows",value:function(t,n){var r=k(e.prototype.__proto__||y()(e.prototype),"_layoutRows",this).call(this,t,n),i=_.Utils.values(b.a.FormType),o=new b.a({width:n,height:30,type:this._rowTypeRandomizer.pickNext(i),shearingAngle:this.getShearingAngle()}).layout(),s=new b.a({width:n,height:30,type:this._rowTypeRandomizer.pickNext(i),shearingAngle:this.getShearingAngle()}).layout();return[o].concat(function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return a()(t)}(r),[s])}}]),e}();C.defaultFontIdentifiers=["imgly_font_campton_bold"],C.identifier="imgly_text_design_rotated",C.prototype.availableOptions=x({},g.a.prototype.availableOptions,{fontIdentifiers:{type:_.OptionType.ARRAY,default:C.defaultFontIdentifiers},relativeLineSpacing:{type:_.OptionType.NUMBER,default:.025/3},shearingAngle:{type:_.OptionType.NUMBER,default:-.1}})},function(t,e,n){"use strict";n.d(e,"a",function(){return w});var r=n(6),i=n.n(r),o=n(0),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),h=n(1),f=n.n(h),p=n(4),d=(n.n(p),n(42)),v=n(60),y=n(23),_=n(35),g=i.a||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},m=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),a()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var b=p.Math.Rectangle,w=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(t=e.__proto__||f()(e)).call.apply(t,[this].concat(r)));return o.setSize(new y.a(o.getWidth(),o.getHeight())),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=c()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(u.a?u()(t,e):t.__proto__=e)}(e,v["a"]),m(e,[{key:"_calculateLayoutElements",value:function(){return[new d.a({frame:this._getTextFrame()})]}},{key:"render",value:function(t){var n=this._getFrame(),r=this.getType(),i=this.getAttributes().getTextColor(),o=n.height/3,a=new b(n.x,n.y,n.width,o),s=new b(n.x,n.y+2*o,n.width,o);switch(r){case e.FormType.Rect:Object(_.c)(t,n,i);break;case e.FormType.DoubleRect:Object(_.c)(t,a,i),Object(_.c)(t,s,i);break;case e.FormType.DoubleRectFirstPunctuated:Object(_.d)(t,a,i),Object(_.c)(t,s,i);break;case e.FormType.DoubleRectSecondPunctuated:Object(_.c)(t,a,i),Object(_.d)(t,s,i)}}}]),e}();w.FormType={Rect:"RECT",DoubleRect:"DOUBLE_RECT",DoubleRectFirstPunctuated:"DOUBLE_RECT_FIRST_PUNCTUATED",DoubleRectSecondPunctuated:"DOUBLE_RECT_SECOND_PUNCTUATED"},w.prototype.availableOptions=g({},v.a.prototype.availableOptions,{height:{type:p.OptionType.NUMBER,default:100},type:{type:p.OptionType.STRING,default:w.FormType.Rect,available:p.Utils.values(w.FormType)}})},function(t,e,n){"use strict";n.d(e,"a",function(){return p});var r=n(0),i=n.n(r),o=n(4),a=(n.n(o),n(23)),s=n(105),u=n(35),l=n(16),c=n(107),h=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var f=o.Math.Rectangle,p=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._layoutData=null,this._layout=null,this._text="",this._seed=0,this._debugMode=!1,this.randomizer=new l.a}return h(t,[{key:"createLayout",value:function(t,e,n){this._layout=t,this._text=e,this._seed=n,t.seed(n),this._layoutData=t.generateLayoutData(e,1e3)}},{key:"calculateAspect",value:function(){return this._layoutData?this._layoutData.getSize().aspect():(o.Log.warn("TextDesignRenderer#calculateAspect: No layout data"),1)}},{key:"draw",value:function(t,e,n,r){var i=this,l=new a.a(1e3,1e3/e.aspect()),h=e.width/1e3,p=this._layoutData.getRelativeInsets().clone().scale(l.width),d=this._layoutData.getRelativeLineSpacing()*l.width,v=p.top;t.save(),this.randomizer.seed(this._seed);var y=this._layoutData.getBackground();y&&y.render(t,e,this._layoutData.getRelativeInsets(),r?o.Color.WHITE:n,this.randomizer),t.scale(h,h),this._layoutData.getRows().forEach(function(e){t.save();var a=e.getAttributes();if(t.transform(1,e.getShearingAngle(),0,1,p.left,v),a.setTextColor(r?o.Color.WHITE:n.clone()),a.setTintColor(r?o.Color.WHITE:n.clone()),(e instanceof s.a||e instanceof c.a)&&(e.setBackgroundColor(r?o.Color.WHITE:n.clone()),e.setIsUsedInInvertedLayout(r)),i._debugMode&&(e._debugMode=!0),e.willRender(t),e.render(t),e.didRender(t),i._debugMode){var l=e._getFrame(),h=e._getTextFrame();Object(u.e)(t,l,o.Color.GREEN),Object(u.e)(t,h,o.Color.BLUE),e._getLayoutElements().forEach(function(n){var r=n.getFrame(),i=e._getTextFrameForElement(n);Object(u.e)(t,r,new o.Color(1,1,0)),Object(u.e)(t,i,new o.Color(0,1,1))})}v+=e.getSize().height+d,t.restore()}),this._debugMode&&Object(u.e)(t,new f(0,0,l.width,l.height),o.Color.RED),t.restore()}}]),t}()},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(1),c=n.n(l),h=n(4),f=n.n(h),p=n(389),d=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var v=h.Math.Vector2,y=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||c()(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=u()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(a.a?a()(t,e):t.__proto__=e)}(e,h["Operation"]),d(e,[{key:"_render",value:function(t){this._sprite.setRotation(0);var e=t.getDimensions(),n=this._options,r=n.start,i=n.end,o=n.rotation,a=n.textureScale,s=i.clone().subtract(r).clone().divide(2),u=r.clone().add(s),l=this.calculateScale()*a,c=e.clone().multiply(l).multiply(s);return this._sprite.setAnchor(u),this._sprite.setRotation(o),this._sprite.setScale(l,l),this._sprite.setPosition(c),this._renderTexture.render(this._container),h.Promise.resolve()}},{key:"calculateScale",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._options.rotation,e=this.getInputDimensions(!1),n=new v(Math.abs(e.x*Math.cos(t))+Math.abs(e.y*Math.sin(t)),Math.abs(e.x*Math.sin(t))+Math.abs(e.y*Math.cos(t))),r=e.clone().subtract(n.clone()).divide(2).abs();return r.y>r.x?2*r.y/e.y+1:2*r.x/e.x+1}},{key:"getNewDimensions",value:function(t){var e=this._options,n=e.start,r=e.end,i=e.textureScale,o=this.calculateScale();return t.clone().multiply(i*o).multiply(r.clone().subtract(n)).round()}},{key:"flip",value:function(t){var e=this._options,n=e.start,r=e.end,i=n.clone();"horizontal"===t?(n.set(1-r.x,n.y),r.set(1-i.x,r.y)):"vertical"===t&&(n.set(n.x,1-r.y),r.set(r.x,1-i.y))}},{key:"rotate",value:function(t){for(var e=this._options,n=e.start,r=e.end,i=(t+360)%360,o=Math.floor(i/90),a=0;a<o;a++){var s=n.clone();n.set(1-r.y,s.x),r.set(1-s.y,r.x)}}},{key:"_onBeforeExport",value:function(){this._wasEnabledBeforeExport=this.getEnabled(),this.setEnabled(!0)}},{key:"_onAfterExport",value:function(){this.setEnabled(this._wasEnabledBeforeExport,!0)}}]),e}();y.identifier="transform",y.prototype.availableOptions={start:{type:h.OptionType.VECTOR2,default:new v(0,0)},end:{type:h.OptionType.VECTOR2,default:new v(1,1)},textureScale:{type:h.OptionType.NUMBER,default:1},rotation:{type:h.OptionType.NUMBER,default:0}},y.TransformChange=p.a,f.a.Operations.TransformOperation=y,e.a=y},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=n(4),a=(n.n(o),function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}());var s=o.Math.Vector2,u=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._options=n,this._oldOptions={start:e.getStart().clone(),end:e.getEnd().clone(),rotation:e.getRotation(),textureScale:e.getTextureScale()},this._inputDimensions=e.getInputDimensions(!1),this._rotationDelta=n.rotation-e.getRotation(),this._deltaCos=Math.cos(this._rotationDelta),this._deltaSin=Math.sin(this._rotationDelta),this._oldAbsoluteSize=this._oldOptions.end.clone().subtract(this._oldOptions.start).multiply(this._inputDimensions),this._newAbsoluteSize=n.end.clone().subtract(n.start).multiply(this._inputDimensions),this._absoluteStartDiff=this._oldOptions.start.clone().subtract(n.start).multiply(this._inputDimensions),this._scaleRatio=e.calculateScale(n.rotation)/e.calculateScale(),this._sizeFactor=this._newAbsoluteSize.clone().divide(this._oldAbsoluteSize),this._textureScaleFactor=this._options.textureScale/e.getTextureScale()}return a(t,[{key:"applyToRelativePoint",value:function(t){var e=this._oldOptions.start,n=this._oldOptions.end,r=e.clone().add(n.clone().subtract(e).divide(2)).multiply(this._inputDimensions),i=t.clone().multiply(this._oldAbsoluteSize).subtract(this._oldAbsoluteSize.clone().divide(2)),o=r.clone().add(i).clone().subtract(this._inputDimensions.clone().divide(2)),a=new s(o.x*this._deltaCos-o.y*this._deltaSin,o.x*this._deltaSin+o.y*this._deltaCos),u=this._inputDimensions.clone().divide(2).add(a),l=this._options.start.clone().multiply(this._inputDimensions);return u.clone().subtract(l).divide(this._newAbsoluteSize)}},{key:"applyToRelativeSize",value:function(t){return t*this._oldAbsoluteSize.min()/this._newAbsoluteSize.min()}},{key:"applyToDimensions",value:function(t){return t=t.clone().multiply(this._scaleRatio),this._options.textureScale&&t.multiply(this._textureScaleFactor),t}},{key:"scaleSize",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"y";return t/this._sizeFactor[e]}},{key:"applyToRotation",value:function(t){return(t+this._rotationDelta)%(2*Math.PI)}},{key:"invert",value:function(){var t=this._options.start.clone(),e=this._options.end.clone(),n=this._inputDimensions,r=-this._rotationDelta,i=Math.cos(r),o=Math.sin(r),a=this._oldAbsoluteSize,u=this._newAbsoluteSize,l=t.clone().subtract(e).multiply(n),c=1/this._scaleRatio,h=new s(1/this._sizeFactor.x,1/this._sizeFactor.y),f=1/this._textureScaleFactor,p=this._oldOptions;return this._oldOptions=this._options,this._options=p,this._inputDimensions=n,this._rotationDelta=r,this._deltaCos=i,this._deltaSin=o,this._oldAbsoluteSize=u,this._newAbsoluteSize=a,this._absoluteStartDiff=l,this._scaleRatio=c,this._sizeFactor=h,this._textureScaleFactor=f,this}}]),t}();e.a=u},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=n(5),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),h=n(1),f=n.n(h),p=n(4),d=n.n(p),v=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var y=p.Math.Vector2,_=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(t=e.__proto__||f()(e)).call.apply(t,[this].concat(r)));return o._watermarkSprite=new p.Engine.Sprite,o._watermarkSprite.setAnchor(.5,.5),o._container.addChild(o._watermarkSprite),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=c()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(u.a?u()(t,e):t.__proto__=e)}(e,p["Operation"]),v(e,[{key:"_render",value:function(t){this._watermarkTexture||(this._watermarkTexture=p.Engine.Texture.fromImage(this._options.image),this._watermarkSprite.setTexture(this._watermarkTexture));var e=t.getDimensions(),n=this._options.image,r=n.width,i=n.height,o=p.Utils.resizeVectorToFit(new y(r,i),e);return this._watermarkSprite.setPosition(e.clone().divide(2)),this._watermarkSprite.setWidth(o.x),this._watermarkSprite.setHeight(o.y),this._renderTexture.render(this._container),p.Promise.resolve()}},{key:"dispose",value:function(){(function t(e,n,r){null===e&&(e=Function.prototype);var i=a()(e,n);if(void 0===i){var o=f()(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0})(e.prototype.__proto__||f()(e.prototype),"dispose",this).call(this),this._watermarkSprite.dispose()}}]),e}();_.identifier="watermark",_.prototype.availableOptions={image:{type:p.OptionType.OBJECT,required:!0}},d.a.Operations.WatermarkOperation=_,e.a=_}])});
//# sourceMappingURL=photo-editor-sdk.map.js