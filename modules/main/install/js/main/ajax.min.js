function CAjaxThread(e){this.TID=e;this.httpRequest=this._CreateHttpObject();this.arAction=[]}CAjaxThread.prototype._CreateHttpObject=function(){var e=null;if(window.XMLHttpRequest){try{e=new XMLHttpRequest}catch(t){}}else if(window.ActiveXObject){try{e=new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}if(!e)try{e=new ActiveXObject("Msxml2.XMLHTTP")}catch(t){}}return e};CAjaxThread.prototype.addAction=function(e){this.arAction.push(e)};CAjaxThread.prototype.clearActions=function(){this.arAction=[]};CAjaxThread.prototype.nextAction=function(){return this.arAction.shift()};CAjaxThread.prototype.Clear=function(){this.arAction=null;this.httpRequest=null};function CAjax(){this.arThreads={};this.obTemporary=null}CAjax.prototype._PrepareData=function(e,t){var n="";if(null!=e){for(var o in e){if(n.length>0)n+="&";var i=jsAjaxUtil.urlencode(o);if(t)i=t+"["+i+"]";if(typeof e[o]=="object")n+=this._PrepareData(e[o],i);else n+=i+"="+jsAjaxUtil.urlencode(e[o])}}return n};CAjax.prototype.GetThread=function(e){return this.arThreads[e]};CAjax.prototype.InitThread=function(){while(true){var e="TID"+Math.floor(Math.random()*1e6);if(!this.arThreads[e])break}this.arThreads[e]=new CAjaxThread(e);return e};CAjax.prototype.AddAction=function(e,t){if(this.arThreads[e]){this.arThreads[e].addAction(t)}};CAjax.prototype._OnDataReady=function(e,t){if(!this.arThreads[e])return;while(obHandler=this.arThreads[e].nextAction()){obHandler(t)}};CAjax.prototype._Close=function(e){if(!this.arThreads[e])return;this.arThreads[e].Clear();this.arThreads[e]=null};CAjax.prototype._SetHandler=function(e){var t=this;function n(n){if(!n)n=window.event;if(!n)return;if(n.keyCode==27){t._Close(e);jsEvent.removeEvent(document,"keypress",this)}}function o(){if(t.bCancelled)return;if(!t.arThreads[e])return;if(!t.arThreads[e].httpRequest)return;if(t.arThreads[e].httpRequest.readyState==4){var n=t.arThreads[e].httpRequest.getResponseHeader("X-Bitrix-Ajax-Status");var o=n=="Redirect";var i=t.arThreads[e].httpRequest.responseText;jsAjaxParser.mode="implode";i=jsAjaxParser.process(i);if(!o)t._OnDataReady(e,i);t.__prepareOnload();if(jsAjaxParser.code.length>0)jsAjaxUtil.EvalPack(jsAjaxParser.code);t.__runOnload();t._Close(e)}}this.arThreads[e].httpRequest.onreadystatechange=o;jsEvent.addEvent(document,"keypress",n)};CAjax.prototype.__prepareOnload=function(){this.obTemporary=window.onload;window.onload=null};CAjax.prototype.__runOnload=function(){if(window.onload)window.onload();window.onload=this.obTemporary;this.obTemporary=null};CAjax.prototype.Send=function(e,t,n){if(!this.arThreads[e])return;if(null!=n)var o=this._PrepareData(n);else var o="";if(o.length>0){if(t.indexOf("?")==-1)t+="?"+o;else t+="&"+o}if(this.arThreads[e].httpRequest){this.arThreads[e].httpRequest.open("GET",t,true);this._SetHandler(e);return this.arThreads[e].httpRequest.send("")}};CAjax.prototype.Post=function(e,t,n){var o="";if(null!=n)o=this._PrepareData(n);if(this.arThreads[e].httpRequest){this.arThreads[e].httpRequest.open("POST",t,true);this._SetHandler(e);this.arThreads[e].httpRequest.setRequestHeader("Content-Type","application/x-www-form-urlencoded");return this.arThreads[e].httpRequest.send(o)}};function CAjaxForm(e,t,n){this.obForm=e;this.obHandler=t;this.obFrame=null;this.isFormProcessed=false;if(null==n)this.bFirst=false;else this.bFirst=n;this.__tmpFormTarget="";this.obAJAXIndicator=null;this.currentBrowserDetected="";if(window.opera)this.currentBrowserDetected="Opera";else if(navigator.userAgent){if(navigator.userAgent.indexOf("MSIE")!=-1)this.currentBrowserDetected="IE";else if(navigator.userAgent.indexOf("Firefox")!=-1)this.currentBrowserDetected="Firefox"}this.IsIE9=!!document.documentMode&&document.documentMode>=9}CAjaxForm.prototype.setProcessedFlag=function(e){if(null==e)e=true;else e=e?true:false;this.obForm.bxAjaxProcessed=e;this.isFormProcessed=e};CAjaxForm.isFormProcessed=function(e){if(e.bxAjaxProcessed)return e.bxAjaxProcessed;else return false};CAjaxForm.prototype.process=function(){var e=this;function t(){if(!e.obFrame.contentWindow.document||e.obFrame.contentWindow.document.body.innerHTML.length==0)return;if(null!=e.obHandler){e.obHandler(e.obFrame.contentWindow.document.body.innerHTML)}if(e.obFrame.contentWindow.AJAX_runExternal)e.obFrame.contentWindow.AJAX_runExternal();if(e.obFrame.contentWindow.AJAX_runGlobal)e.obFrame.contentWindow.AJAX_runGlobal();if(e.bFirst){try{e.obForm.target=e.__tmpFormTarget;e.obAJAXIndicator.parentNode.removeChild(e.obAJAXIndicator);e.obForm.bxAjaxProcessed=false}catch(t){e.obForm=null}e.obAJAXIndicator=null;if(this.currentBrowserDetected!="IE")jsEvent.removeAllEvents(e.obFrame);var n=setTimeout("document.body.removeChild(document.getElementById('"+e.obFrame.id+"'));",100);e.obFrame=null;if(window.onFormLoaded){window.onFormLoaded();window.onFormLoaded=null}}}if(this.obForm.target&&this.obForm.target.substring(0,5)=="AJAX_")return;if(this.currentBrowserDetected=="IE"){if(this.IsIE9){this.obAJAXIndicator=document.createElement("input");this.obAJAXIndicator.setAttribute("name","AJAX_CALL");this.obAJAXIndicator.setAttribute("type","hidden")}else{this.obAJAXIndicator=document.createElement('<input name="AJAX_CALL" type="hidden" />')}}else{this.obAJAXIndicator=document.createElement("INPUT");this.obAJAXIndicator.type="hidden";this.obAJAXIndicator.name="AJAX_CALL"}this.obAJAXIndicator.value="Y";this.obForm.appendChild(this.obAJAXIndicator);var n="AJAX_"+Math.round(Math.random()*1e5);if(this.currentBrowserDetected=="IE")if(this.IsIE9){this.obFrame=document.createElement("iframe");this.obFrame.setAttribute("name",n)}else{this.obFrame=document.createElement('<iframe name="'+n+'"></iframe>')}else this.obFrame=document.createElement("IFRAME");this.obFrame.style.display="none";this.obFrame.src="javascript:''";this.obFrame.id=n;this.obFrame.name=n;document.body.appendChild(this.obFrame);this.__tmpFormTarget=this.obForm.target;this.obForm.target=n;if(this.currentBrowserDetected=="IE")this.obFrame.attachEvent("onload",t);else jsEvent.addEvent(this.obFrame,"load",t);this.setProcessedFlag()};var jsAjaxParser={code:[],mode:"implode",regexp:null,regexp_src:null,process:function(e){this.code=[];if(null==this.regexp)this.regexp=/(<script([^>]*)>)([\S\s]*?)(<\/script>)/i;do{var t=e.match(this.regexp);if(null==t)break;var n=t.index;var o=t[0].length;if(n>0)this.code.push({TYPE:"STRING",DATA:e.substring(0,n)});if(typeof t[1]=="undefined"||t[1].indexOf("src=")==-1){var i=t[3];i=i.replace("<!--","");this.code.push({TYPE:"SCRIPT",DATA:i})}else{if(null==this.regexp_src)this.regexp_src=/src="([^"]*)?"/i;var r=this.regexp_src.exec(t[1]);if(null!=r&&r[1]){this.code.push({TYPE:"SCRIPT_EXT",DATA:r[1]})}}e=e.substring(n+o)}while(true);if(e.length>0){this.code.push({TYPE:"STRING",DATA:e})}if(this.mode=="implode"){e="";for(var a=0,s=this.code.length;a<s;a++){if(this.code[a].TYPE=="STRING")e+=this.code[a].DATA}return e}else return this.code}};var jsAjaxUtil={RemoveAllChild:function(e){try{while(e.childNodes.length>0){jsEvent.clearObject(e.childNodes[0]);e.removeChild(e.childNodes[0])}}catch(t){}},EvalGlobal:function(e){if(window.execScript)window.execScript(e,"javascript");else if(jsAjaxUtil.IsSafari())window.setTimeout(e,0);else window.eval(e)},arLoadedScripts:[],__isScriptLoaded:function(e){for(var t=0;t<jsAjaxUtil.arLoadedScripts.length;t++)if(jsAjaxUtil.arLoadedScripts[t]==e)return true;return false},EvalExternal:function(e){if(/\/bitrix\/js\/main\/ajax.js$/i.test(e)||/\/bitrix\/js\/main\/core\/core.js$/i.test(e))return;if(jsAjaxUtil.__isScriptLoaded(e))return;jsAjaxUtil.arLoadedScripts.push(e);var t=new CAjaxThread;t.httpRequest.open("GET",e,false);t.httpRequest.send("");var n=t.httpRequest.responseText;t.Clear();t=null;jsAjaxUtil.EvalGlobal(n)},EvalPack:function(e){for(var t=0,n=e.length;t<n;t++){if(e[t].TYPE=="SCRIPT_EXT"||e[t].TYPE=="SCRIPT_SRC")jsAjaxUtil.EvalExternal(e[t].DATA);else if(e[t].TYPE=="SCRIPT")jsAjaxUtil.EvalGlobal(e[t].DATA)}},urlencode:function(e){return escape(e).replace(new RegExp("\\+","g"),"%2B")},trim:function(e){var t,n;n=/^[ \r\n]+/g;t=e.replace(n,"");n=/[ \r\n]+$/g;t=t.replace(n,"");return t},GetWindowSize:function(){var e,t;if(self.innerHeight){e=self.innerWidth;t=self.innerHeight}else if(document.documentElement&&document.documentElement.clientHeight){e=document.documentElement.clientWidth;t=document.documentElement.clientHeight}else if(document.body){e=document.body.clientWidth;t=document.body.clientHeight}var n,o;if(self.pageYOffset){n=self.pageXOffset;o=self.pageYOffset}else if(document.documentElement&&document.documentElement.scrollTop){n=document.documentElement.scrollLeft;o=document.documentElement.scrollTop}else if(document.body){n=document.body.scrollLeft;o=document.body.scrollTop}var i,r;if(document.compatMode&&document.compatMode=="CSS1Compat"){i=document.documentElement.scrollWidth;r=document.documentElement.scrollHeight}else{if(document.body.scrollHeight>document.body.offsetHeight)r=document.body.scrollHeight;else r=document.body.offsetHeight;if(document.body.scrollWidth>document.body.offsetWidth||document.compatMode&&document.compatMode=="BackCompat"||document.documentElement&&!document.documentElement.clientWidth)i=document.body.scrollWidth;else i=document.body.offsetWidth}return{innerWidth:e,innerHeight:t,scrollLeft:n,scrollTop:o,scrollWidth:i,scrollHeight:r}},GetRealPos:function(e){if(e.getBoundingClientRect){var t=e.getBoundingClientRect();var n=jsAjaxUtil.GetWindowSize();var o={left:t.left+n.scrollLeft,top:t.top+n.scrollTop,right:t.right+n.scrollLeft,bottom:t.bottom+n.scrollTop};return o}if(!e||!e.offsetParent)return false;var i=Array();i["left"]=e.offsetLeft;i["top"]=e.offsetTop;var r=e.offsetParent;while(r&&r.tagName!="BODY"){i["left"]+=r.offsetLeft;i["top"]+=r.offsetTop;r=r.offsetParent}i["right"]=i["left"]+e.offsetWidth;i["bottom"]=i["top"]+e.offsetHeight;return i},IsIE:function(){return document.attachEvent&&!jsAjaxUtil.IsOpera()},IsOpera:function(){return navigator.userAgent.toLowerCase().indexOf("opera")!=-1},IsSafari:function(){var e=navigator.userAgent.toLowerCase();return/webkit/.test(e)},LoadData:function(e,t){if(!t)return;var n=jsAjax.InitThread();jsAjax.AddAction(n,t);jsAjax.Send(n,e);return n},PostData:function(e,t,n){if(!n)return;var o=jsAjax.InitThread();jsAjax.AddAction(o,n);jsAjax.Post(o,e,t);return o},__LoadDataToDiv:function(e,t,n,o){if(null==n)n=true;if(null==o)o=true;if(typeof t=="string"||typeof t=="object"&&t.constructor==String)var i=document.getElementById(t);else var i=t;if(!i)return;var r=Math.round(Math.random()*1e6);function a(e){if(!i)return;jsAjaxUtil.CloseLocalWaitWindow(r,i);if(n){jsAjaxUtil.RemoveAllChild(i);i.innerHTML=e}else i.innerHTML+=e}jsAjaxUtil.ShowLocalWaitWindow(r,i,o);var s=jsAjaxUtil.LoadData(e,a)},InsertDataToNode:function(e,t,n){if(null==n)n=true;jsAjaxUtil.__LoadDataToDiv(e,t,true,n)},AppendDataToNode:function(e,t,n){if(null==n)n=true;jsAjaxUtil.__LoadDataToDiv(e,t,false,n)},GetStyleValue:function(e,t){if(e.currentStyle)var n=e.currentStyle[t];else if(window.getComputedStyle)var n=document.defaultView.getComputedStyle(e,null).getPropertyValue(t);return n},ShowLocalWaitWindow:function(e,t,n){if(typeof t=="string"||typeof t=="object"&&t.constructor==String)var o=document.getElementById(t);else var o=t;if(o.getBoundingClientRect){var i=o.getBoundingClientRect();var r=jsAjaxUtil.GetWindowSize();var a={left:i.left+r.scrollLeft,top:i.top+r.scrollTop,right:i.right+r.scrollLeft,bottom:i.bottom+r.scrollTop}}else var a=jsAjaxUtil.GetRealPos(o);var s=o.id;if(!a)return;if(null==n)n=true;if(n){var d=document.body.appendChild(document.createElement("DIV"));d.id="waitshadow_"+s+"_"+e;d.className="waitwindowlocalshadow";d.style.top=a.top-5+"px";d.style.left=a.left-5+"px";d.style.height=a.bottom-a.top+10+"px";d.style.width=a.right-a.left+10+"px"}var l=document.body.appendChild(document.createElement("DIV"));l.id="wait_"+s+"_"+e;l.className="waitwindowlocal";var c=a.top+5;if(c<document.body.scrollTop)c=document.body.scrollTop+5;l.style.top=c+"px";l.style.left=a.left+5+"px";if(jsAjaxUtil.IsIE()){var u=document.createElement("IFRAME");u.src="javascript:''";u.id="waitframe_"+s+"_"+e;u.className="waitwindowlocal";u.style.width=l.offsetWidth+"px";u.style.height=l.offsetHeight+"px";u.style.left=l.style.left;u.style.top=l.style.top;document.body.appendChild(u)}function h(n){if(!n)n=window.event;if(!n)return;if(n.keyCode==27){jsAjaxUtil.CloseLocalWaitWindow(e,t);jsEvent.removeEvent(document,"keypress",h)}}jsEvent.addEvent(document,"keypress",h)},CloseLocalWaitWindow:function(e,t){if(typeof t=="string"||typeof t=="object"&&t.constructor==String)var n=document.getElementById(t);else var n=t;var o=n.id;var i=document.getElementById("waitshadow_"+o+"_"+e);if(i)document.body.removeChild(i);var r=document.getElementById("waitframe_"+o+"_"+e);if(r)document.body.removeChild(r);var a=document.getElementById("wait_"+o+"_"+e);if(a)document.body.removeChild(a)},SendForm:function(e,t){if(typeof e=="string"||typeof e=="object"&&e.constructor==String)var n=document.getElementById(e);else var n=e;if(!n.name||n.name.length<=0){n.name="AJAXFORM_"+Math.floor(Math.random()*1e6)}var o=new CAjaxForm(n,t,true);o.process();return true},InsertFormDataToNode:function(e,t,n){if(null==n)n=true;return jsAjaxUtil.__LoadFormToDiv(e,t,true,n)},AppendFormDataToNode:function(e,t,n){if(null==n)n=true;return jsAjaxUtil.__LoadFormToDiv(e,t,false,n)},__LoadFormToDiv:function(e,t,n,o){if(null==n)n=true;if(null==o)o=true;if(typeof t=="string"||typeof t=="object"&&t.constructor==String)var i=document.getElementById(t);else var i=t;if(!i)return;function r(e){if(!i)return;if(n){jsAjaxUtil.RemoveAllChild(i);i.innerHTML=e}else i.innerHTML+=e;jsAjaxUtil.CloseLocalWaitWindow(i.id,i)}jsAjaxUtil.ShowLocalWaitWindow(i.id,i,o);return jsAjaxUtil.SendForm(e,r)},UpdatePageData:function(e){if(e.TITLE)jsAjaxUtil.UpdatePageTitle(e.TITLE);if(e.NAV_CHAIN)jsAjaxUtil.UpdatePageNavChain(e.NAV_CHAIN);if(e.CSS&&e.CSS.length>0)jsAjaxUtil.UpdatePageCSS(e.CSS);if(e.SCRIPTS&&e.SCRIPTS.length>0)jsAjaxUtil.UpdatePageScripts(e.SCRIPTS)},UpdatePageScripts:function(e){for(var t=0;t<e.length;t++){jsAjaxUtil.EvalExternal(e[t])}},UpdatePageCSS:function(e){jsStyle.UnloadAll();for(var t=0;t<e.length;t++){jsStyle.Load(e[t])}},UpdatePageTitle:function(e){var t=document.getElementById("pagetitle");if(t){t.removeChild(t.firstChild);if(!t.firstChild)t.appendChild(document.createTextNode(e));else t.insertBefore(document.createTextNode(e),t.firstChild)}document.title=e},UpdatePageNavChain:function(e){var t=document.getElementById("navigation");if(t){t.innerHTML=e}},ScrollToNode:function(e){if(typeof e=="string"||typeof e=="object"&&e.constructor==String)var t=document.getElementById(e);else var t=e;if(t.scrollIntoView)t.scrollIntoView(true);else{var n=jsAjaxUtil.GetRealPos(t);window.scrollTo(n.left,n.top)}}};var jsStyle={arCSS:{},bInited:false,Init:function(){var e=document.getElementsByTagName("LINK");if(e.length>0){for(var t=0;t<e.length;t++){if(e[t].href){var n=e[t].href;var o=n.indexOf("://");if(o!=-1)n=n.substr(n.indexOf("/",o+3));e[t].bxajaxflag=false;this.arCSS[n]=e[t]}}}this.bInited=true},Load:function(e){if(!this.bInited)this.Init();if(null!=this.arCSS[e]){this.arCSS[e].disabled=false;return}var t=document.createElement("STYLE");t.type="text/css";var n=document.getElementsByTagName("HEAD")[0];n.insertBefore(t,n.firstChild);if(jsAjaxUtil.IsIE()){t.styleSheet.addImport(e)}else{var o=new CAjaxThread;o.httpRequest.onreadystatechange=null;o.httpRequest.open("GET",e,false);o.httpRequest.send("");var i=o.httpRequest.responseText;var r=e.lastIndexOf("/");if(r!=-1){var a=e.substring(0,r);i=i.replace(/url\(([^\/\\].*?)\)/gi,"url("+a+"/$1)")}o.Clear();o=null;t.appendChild(document.createTextNode(i))}},Unload:function(e){if(!this.bInited)this.Init();if(null!=this.arCSS[e]){this.arCSS[e].disabled=true}},UnloadAll:function(){if(!this.bInited)this.Init();else for(var e in this.arCSS){if(this.arCSS[e].bxajaxflag)this.Unload(e)}}};var jsEvent={objectList:[null],objectEventList:[null],__eventManager:function(e){if(!e)e=window.event;var t=true;try{if(e.srcElement)e.currentTarget=e.srcElement}catch(e){}if(this.bxEventIndex&&jsEvent.objectEventList[this.bxEventIndex]&&jsEvent.objectEventList[this.bxEventIndex][e.type]){var n=jsEvent.objectEventList[this.bxEventIndex][e.type].length;for(var o=0;o<n;o++){if(jsEvent.objectEventList[this.bxEventIndex][e.type]&&jsEvent.objectEventList[this.bxEventIndex][e.type][o]){var i=jsEvent.objectEventList[this.bxEventIndex][e.type][o](e);if("boolean"==typeof i)t=t&&i;if(!t)return false}}}return true},addEvent:function(e,t,n){if(!e.bxEventIndex){e.bxEventIndex=jsEvent.objectList.length;jsEvent.objectList[e.bxEventIndex]=e}if(!jsEvent.objectEventList[e.bxEventIndex])jsEvent.objectEventList[e.bxEventIndex]={};if(!jsEvent.objectEventList[e.bxEventIndex][t]){jsEvent.objectEventList[e.bxEventIndex][t]=[];if(e["on"+t])jsEvent.objectEventList[e.bxEventIndex][t].push(e["on"+t]);e["on"+t]=null;e["on"+t]=jsEvent.__eventManager}jsEvent.objectEventList[e.bxEventIndex][t].push(n)},removeEvent:function(e,t,n){if(e.bxEventIndex){if(jsEvent.objectEventList[e.bxEventIndex][t]){for(var o=0;o<jsEvent.objectEventList[e.bxEventIndex][t].length;o++){if(n==jsEvent.objectEventList[e.bxEventIndex][t][o]){delete jsEvent.objectEventList[e.bxEventIndex][t][o];return}}}}},removeAllHandlers:function(e,t){if(e.bxEventIndex){if(jsEvent.objectEventList[e.bxEventIndex][t]){jsEvent.objectEventList[e.bxEventIndex][t]=[]}}},removeAllEvents:function(e){if(e.bxEventIndex){if(jsEvent.objectEventList[e.bxEventIndex]){jsEvent.objectEventList[e.bxEventIndex]=[]}}},clearObject:function(e){if(e.bxEventIndex){if(jsEvent.objectEventList[e.bxEventIndex]){delete jsEvent.objectEventList[e.bxEventIndex]}if(jsEvent.objectList[e.bxEventIndex]){delete jsEvent.objectList[e.bxEventIndex]}delete e.bxEventIndex}}};var jsAjaxHistory={expected_hash:"",counter:0,bInited:false,obFrame:null,obImage:null,bHashCollision:false,obTimer:null,__hide_object:function(e){e.style.position="absolute";e.style.top="-1000px";e.style.left="-1000px";e.style.height="10px";e.style.width="10px"},init:function(e){if(jsAjaxHistory.bInited)return;jsAjaxHistory.expected_hash=window.location.hash;if(!jsAjaxHistory.expected_hash||jsAjaxHistory.expected_hash=="#")jsAjaxHistory.expected_hash="__bx_no_hash__";var t={node:e,title:window.document.title,data:document.getElementById(e).innerHTML};var n=document.getElementById("navigation");if(null!=n)t.nav_chain=n.innerHTML;jsAjaxHistoryContainer.put(jsAjaxHistory.expected_hash,t);jsAjaxHistory.obTimer=setTimeout(jsAjaxHistory.__hashListener,500);if(jsAjaxUtil.IsIE()){jsAjaxHistory.obFrame=document.createElement("IFRAME");jsAjaxHistory.__hide_object(jsAjaxHistory.obFrame);document.body.appendChild(jsAjaxHistory.obFrame);jsAjaxHistory.obFrame.contentWindow.document.open();jsAjaxHistory.obFrame.contentWindow.document.write(jsAjaxHistory.expected_hash);jsAjaxHistory.obFrame.contentWindow.document.close();jsAjaxHistory.obFrame.contentWindow.document.title=window.document.title}else if(jsAjaxUtil.IsOpera()){jsAjaxHistory.obImage=document.createElement("IMG");jsAjaxHistory.__hide_object(jsAjaxHistory.obImage);document.body.appendChild(jsAjaxHistory.obImage);jsAjaxHistory.obImage.setAttribute("src","javascript:location.href = 'javascript:jsAjaxHistory.__hashListener();';")}jsAjaxHistory.bInited=true},__hashListener:function(){if(jsAjaxHistory.obTimer){window.clearTimeout(jsAjaxHistory.obTimer);jsAjaxHistory.obTimer=null}if(null!=jsAjaxHistory.obFrame)var e=jsAjaxHistory.obFrame.contentWindow.document.body.innerText;else var e=window.location.hash;if(!e||e=="#")e="__bx_no_hash__";if(e.indexOf("#")==0)e=e.substring(1);if(e!=jsAjaxHistory.expected_hash){var t=jsAjaxHistoryContainer.get(e);if(t){document.getElementById(t.node).innerHTML=t.data;jsAjaxUtil.UpdatePageTitle(t.title);if(t.nav_chain)jsAjaxUtil.UpdatePageNavChain(t.nav_chain);jsAjaxHistory.expected_hash=e;if(null!=jsAjaxHistory.obFrame){var n=e=="__bx_no_hash__"?"":e;if(window.location.hash!=n&&window.location.hash!="#"+n)window.location.hash=n}}}jsAjaxHistory.obTimer=setTimeout(jsAjaxHistory.__hashListener,500)},put:function(e,t){var n={node:e,title:window.document.title,data:document.getElementById(e).innerHTML};var o=document.getElementById("navigation");if(o)n.nav_chain=o.innerHTML;jsAjaxHistoryContainer.put(t,n);jsAjaxHistory.expected_hash=t;window.location.hash=jsAjaxUtil.urlencode(t);if(null!=jsAjaxHistory.obFrame){jsAjaxHistory.obFrame.contentWindow.document.open();jsAjaxHistory.obFrame.contentWindow.document.write(t);jsAjaxHistory.obFrame.contentWindow.document.close();jsAjaxHistory.obFrame.contentWindow.document.title=n.title}},checkRedirectStart:function(e,t){var n=window.location.hash;if(n.substring(0,1)=="#")n=n.substring(1);if(n.substring(0,5)=="view/"){jsAjaxHistory.bHashCollision=true;document.write("<"+'div id="__ajax_hash_collision_'+t+'" style="display: none;">')}},checkRedirectFinish:function(e,t){document.write("</div>");var n=window.location.hash;if(n.substring(0,1)=="#")n=n.substring(1);jsEvent.addEvent(window,"load",function(){if(n.substring(0,5)=="view/"){var o=document.getElementById("__ajax_hash_collision_"+t);var i=o.firstChild;jsAjaxUtil.RemoveAllChild(i);o.style.display="block";if(!jsAjaxUtil.IsIE()&&!jsAjaxUtil.IsOpera()&&!jsAjaxUtil.IsSafari())n=jsAjaxHistory.urlencode(n);n+=(n.indexOf("%3F")==-1?"%3F":"%26")+e+"="+t;var r="/bitrix/tools/ajax_redirector.php?hash="+n;jsAjaxUtil.InsertDataToNode(r,i,false)}})},urlencode:function(e){if(window.encodeURIComponent)return encodeURIComponent(e);else if(window.encodeURI)return encodeURI(e);else return jsAjaxUtil.urlencode(e)}};var jsAjaxHistoryContainer={arHistory:{},put:function(e,t){this.arHistory[e]=t},get:function(e){return this.arHistory[e]}};if(![].pop){Array.prototype.pop=function(){if(this.length<=0)return false;var e=this[this.length-1];delete this[this.length-1];this.length--;return e};Array.prototype.shift=function(){if(this.length<=0)return false;var e=this.reverse();var t=e.pop();this.prototype=e.reverse();return t};Array.prototype.push=function(e){this[this.length]=e}}var jsAjax=new CAjax;
//# sourceMappingURL=ajax.map.js