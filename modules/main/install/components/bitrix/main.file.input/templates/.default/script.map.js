{"version":3,"sources":["script.js"],"names":["BX","window","repo","uploader","d","params","this","controller","controlId","button","editor","AvatarEditor","enableCamera","addCustomEvent","delegate","addFile","bind","click","init","template","message","replace","inputName","INPUT","e","debug","prototype","agent","Uploader","getInstance","id","CID","streams","uploadFormData","uploadMethod","uploadFileUrl","allowUpload","allowUploadExt","uploadMaxFilesize","showImage","sortItems","input","dropZone","parentNode","placeHolder","fields","thumb","tagName","fileEvents","onFileIsAppended","onFileIsBound","onUploadStart","onUploadProgress","onUploadDone","onUploadError","onAttachFiles","onQueueIsChanged","onFileIsInited","pack","t","mfi_mode","cid","moduleId","forceMd5","limits","mfi_sign","i","hasOwnProperty","post","data","size","length","ar1","ar2","name","values","findChildren","ii","findChild","attribute","data-bx-role","push","innerHTML","file_id","value","onAttach","inited","checkUploadControl","getItems","removeAttribute","setAttribute","files","error","n","deleteFile","getFirst","pop","acceptableL","onError","onCustomEvent","file","item","node","getItem","bindEventsHandlers","n1","proxy","parentCanvas","props","UploaderUtils","scaleImage","width","height","c","create","appendChild","getContext","drawImage","source","x","y","destin","canvas","PreventDefault","showFile","tmp_url","href","getAttribute","pointer","newInput","fileID","sessid","bitrix_sessid","ajax","v","nDelNameCompat","nDelName","indexOf","substr","type","node1","removeAllCustomEvents","unbindAll","fileId","hash","fireEvent","_deleteFile","clear","addClass","progress","Math","min","__progressBarWidth","ceil","adjust","style","text","result","removeClass","html","ext","toDataURL","toLowerCase","getFormattedSize","RegExp","util","htmlspecialchars","toUpperCase","justUploaded","remove","attr","specify","attrs","className","stream","pIndex","defaultErrorText","errorText","isArray","join","queue","items","MFInput","get"],"mappings":"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","file":"script.map.js"}