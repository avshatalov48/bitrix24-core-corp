{"version":3,"file":"mobile.js","sources":["src/mobile.js"],"sourcesContent":["import {Loc} from 'main.core';\n\nlet\n\tBX = window.BX,\n\tBXMobileApp = window.BXMobileApp;\n\nlet nodeFile = (function ()\n{\n\tlet nodeFile = function (node)\n\t{\n\t\tthis.node = node;\n\t\tthis.click = BX.delegate(this.click, this);\n\t\tthis.callback = BX.delegate(this.callback, this);\n\t\tBX.bind(this.node, \"click\", this.click);\n\n\t\tthis.isImage = (this.node.getAttribute('data-is-image') === 'yes');\n\t};\n\tnodeFile.prototype = {\n\t\tclick: function (e)\n\t\t{\n\t\t\tthis.show();\n\t\t\treturn BX.PreventDefault(e);\n\t\t},\n\t\tshow: function ()\n\t\t{\n\t\t\tconst url = this.node.getAttribute('data-url');\n\t\t\tconst description = this.node.textContent.trim();\n\n\t\t\tif (this.isImage)\n\t\t\t{\n\t\t\t\tBXMobileApp.UI.Photo.show({\n\t\t\t\t\tphotos: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\turl: url,\n\t\t\t\t\t\t\tdescription: description\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tBXMobileApp.UI.Document.open({\n\t\t\t\t\turl: url,\n\t\t\t\t\tfilename: description\n\t\t\t\t});\n\n\t\t\t}\n\t\t}\n\t};\n\treturn nodeFile;\n})();\n\nwindow.app.exec('enableCaptureKeyboard', true);\n\nBX.Mobile.Field.File = function (params)\n{\n\tthis.init(params);\n};\n\nBX.Mobile.Field.File.prototype = {\n\t__proto__: BX.Mobile.Field.prototype,\n\tbindElement: function (node)\n\t{\n\t\tlet result = null;\n\t\tif (BX(node))\n\t\t{\n\t\t\tresult = new nodeFile(node);\n\t\t}\n\t\treturn result;\n\t}\n};\n"],"names":["BX","window","BXMobileApp","nodeFile","node","click","delegate","callback","bind","isImage","getAttribute","prototype","e","show","PreventDefault","url","description","textContent","trim","UI","Photo","photos","Document","open","filename","app","exec","Mobile","Field","File","params","init","__proto__","bindElement","result"],"mappings":";;;;;;CAEA,IACCA,EAAE,GAAGC,MAAM,CAACD,EADb;CAAA,IAECE,WAAW,GAAGD,MAAM,CAACC,WAFtB;;CAIA,IAAIC,QAAQ,GAAI,YAChB;CACC,MAAIA,QAAQ,GAAG,SAAXA,QAAW,CAAUC,IAAV,EACf;CACC,SAAKA,IAAL,GAAYA,IAAZ;CACA,SAAKC,KAAL,GAAaL,EAAE,CAACM,QAAH,CAAY,KAAKD,KAAjB,EAAwB,IAAxB,CAAb;CACA,SAAKE,QAAL,GAAgBP,EAAE,CAACM,QAAH,CAAY,KAAKC,QAAjB,EAA2B,IAA3B,CAAhB;CACAP,IAAAA,EAAE,CAACQ,IAAH,CAAQ,KAAKJ,IAAb,EAAmB,OAAnB,EAA4B,KAAKC,KAAjC;CAEA,SAAKI,OAAL,GAAgB,KAAKL,IAAL,CAAUM,YAAV,CAAuB,eAAvB,MAA4C,KAA5D;CACA,GARD;;CASAP,EAAAA,QAAQ,CAACQ,SAAT,GAAqB;CACpBN,IAAAA,KAAK,EAAE,eAAUO,CAAV,EACP;CACC,WAAKC,IAAL;CACA,aAAOb,EAAE,CAACc,cAAH,CAAkBF,CAAlB,CAAP;CACA,KALmB;CAMpBC,IAAAA,IAAI,EAAE,gBACN;CACC,UAAME,GAAG,GAAG,KAAKX,IAAL,CAAUM,YAAV,CAAuB,UAAvB,CAAZ;CACA,UAAMM,WAAW,GAAG,KAAKZ,IAAL,CAAUa,WAAV,CAAsBC,IAAtB,EAApB;;CAEA,UAAI,KAAKT,OAAT,EACA;CACCP,QAAAA,WAAW,CAACiB,EAAZ,CAAeC,KAAf,CAAqBP,IAArB,CAA0B;CACzBQ,UAAAA,MAAM,EAAE,CACP;CACCN,YAAAA,GAAG,EAAEA,GADN;CAECC,YAAAA,WAAW,EAAEA;CAFd,WADO;CADiB,SAA1B;CAQA,OAVD,MAYA;CACCd,QAAAA,WAAW,CAACiB,EAAZ,CAAeG,QAAf,CAAwBC,IAAxB,CAA6B;CAC5BR,UAAAA,GAAG,EAAEA,GADuB;CAE5BS,UAAAA,QAAQ,EAAER;CAFkB,SAA7B;CAKA;CACD;CA9BmB,GAArB;CAgCA,SAAOb,QAAP;CACA,CA5Cc,EAAf;;CA8CAF,MAAM,CAACwB,GAAP,CAAWC,IAAX,CAAgB,uBAAhB,EAAyC,IAAzC;;CAEA1B,EAAE,CAAC2B,MAAH,CAAUC,KAAV,CAAgBC,IAAhB,GAAuB,UAAUC,MAAV,EACvB;CACC,OAAKC,IAAL,CAAUD,MAAV;CACA,CAHD;;CAKA9B,EAAE,CAAC2B,MAAH,CAAUC,KAAV,CAAgBC,IAAhB,CAAqBlB,SAArB,GAAiC;CAChCqB,EAAAA,SAAS,EAAEhC,EAAE,CAAC2B,MAAH,CAAUC,KAAV,CAAgBjB,SADK;CAEhCsB,EAAAA,WAAW,EAAE,qBAAU7B,IAAV,EACb;CACC,QAAI8B,MAAM,GAAG,IAAb;;CACA,QAAIlC,EAAE,CAACI,IAAD,CAAN,EACA;CACC8B,MAAAA,MAAM,GAAG,IAAI/B,QAAJ,CAAaC,IAAb,CAAT;CACA;;CACD,WAAO8B,MAAP;CACA;CAV+B,CAAjC;;;;"}