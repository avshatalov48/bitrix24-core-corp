{"version":3,"file":"mobile.js","sources":["src/mobile.js"],"sourcesContent":["import {Loc} from 'main.core';\n\nlet\n\tBX = window.BX,\n\tBXMobileApp = window.BXMobileApp;\n\nlet nodeFile = (function ()\n{\n\tlet nodeFile = function (node)\n\t{\n\t\tthis.node = node;\n\t\tthis.click = BX.delegate(this.click, this);\n\t\tthis.callback = BX.delegate(this.callback, this);\n\t\tBX.bind(this.node, \"click\", this.click);\n\n\t\tthis.isImage = (this.node.getAttribute('data-is-image') === 'yes');\n\t};\n\tnodeFile.prototype = {\n\t\tclick: function (e)\n\t\t{\n\t\t\tthis.show();\n\t\t\treturn BX.PreventDefault(e);\n\t\t},\n\t\tshow: function ()\n\t\t{\n\t\t\tlet url = this.node.getAttribute('data-url');\n\n\t\t\tif (this.isImage)\n\t\t\t{\n\t\t\t\tlet description = this.node.textContent.trim();\n\t\t\t\tBXMobileApp.UI.Photo.show({\n\t\t\t\t\t'photos': [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t'url': url,\n\t\t\t\t\t\t\t'description': description\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tBXMobileApp.UI.Document.open({\n\t\t\t\t\t'url': url\n\t\t\t\t});\n\n\t\t\t}\n\t\t}\n\t};\n\treturn nodeFile;\n})();\n\nwindow.app.exec('enableCaptureKeyboard', true);\n\nBX.Mobile.Field.File = function (params)\n{\n\tthis.init(params);\n};\n\nBX.Mobile.Field.File.prototype = {\n\t__proto__: BX.Mobile.Field.prototype,\n\tbindElement: function (node)\n\t{\n\t\tlet result = null;\n\t\tif (BX(node))\n\t\t{\n\t\t\tresult = new nodeFile(node);\n\t\t}\n\t\treturn result;\n\t}\n};"],"names":["BX","window","BXMobileApp","nodeFile","node","click","delegate","callback","bind","isImage","getAttribute","prototype","e","show","PreventDefault","url","description","textContent","trim","UI","Photo","Document","open","app","exec","Mobile","Field","File","params","init","__proto__","bindElement","result"],"mappings":";;;;;;CAEA,IACCA,EAAE,GAAGC,MAAM,CAACD,EADb;CAAA,IAECE,WAAW,GAAGD,MAAM,CAACC,WAFtB;;CAIA,IAAIC,QAAQ,GAAI,YAChB;CACC,MAAIA,QAAQ,GAAG,SAAXA,QAAW,CAAUC,IAAV,EACf;CACC,SAAKA,IAAL,GAAYA,IAAZ;CACA,SAAKC,KAAL,GAAaL,EAAE,CAACM,QAAH,CAAY,KAAKD,KAAjB,EAAwB,IAAxB,CAAb;CACA,SAAKE,QAAL,GAAgBP,EAAE,CAACM,QAAH,CAAY,KAAKC,QAAjB,EAA2B,IAA3B,CAAhB;CACAP,IAAAA,EAAE,CAACQ,IAAH,CAAQ,KAAKJ,IAAb,EAAmB,OAAnB,EAA4B,KAAKC,KAAjC;CAEA,SAAKI,OAAL,GAAgB,KAAKL,IAAL,CAAUM,YAAV,CAAuB,eAAvB,MAA4C,KAA5D;CACA,GARD;;CASAP,EAAAA,QAAQ,CAACQ,SAAT,GAAqB;CACpBN,IAAAA,KAAK,EAAE,eAAUO,CAAV,EACP;CACC,WAAKC,IAAL;CACA,aAAOb,EAAE,CAACc,cAAH,CAAkBF,CAAlB,CAAP;CACA,KALmB;CAMpBC,IAAAA,IAAI,EAAE,gBACN;CACC,UAAIE,GAAG,GAAG,KAAKX,IAAL,CAAUM,YAAV,CAAuB,UAAvB,CAAV;;CAEA,UAAI,KAAKD,OAAT,EACA;CACC,YAAIO,WAAW,GAAG,KAAKZ,IAAL,CAAUa,WAAV,CAAsBC,IAAtB,EAAlB;CACAhB,QAAAA,WAAW,CAACiB,EAAZ,CAAeC,KAAf,CAAqBP,IAArB,CAA0B;CACzB,oBAAU,CACT;CACC,mBAAOE,GADR;CAEC,2BAAeC;CAFhB,WADS;CADe,SAA1B;CAQA,OAXD,MAaA;CACCd,QAAAA,WAAW,CAACiB,EAAZ,CAAeE,QAAf,CAAwBC,IAAxB,CAA6B;CAC5B,iBAAOP;CADqB,SAA7B;CAIA;CACD;CA7BmB,GAArB;CA+BA,SAAOZ,QAAP;CACA,CA3Cc,EAAf;;CA6CAF,MAAM,CAACsB,GAAP,CAAWC,IAAX,CAAgB,uBAAhB,EAAyC,IAAzC;;CAEAxB,EAAE,CAACyB,MAAH,CAAUC,KAAV,CAAgBC,IAAhB,GAAuB,UAAUC,MAAV,EACvB;CACC,OAAKC,IAAL,CAAUD,MAAV;CACA,CAHD;;CAKA5B,EAAE,CAACyB,MAAH,CAAUC,KAAV,CAAgBC,IAAhB,CAAqBhB,SAArB,GAAiC;CAChCmB,EAAAA,SAAS,EAAE9B,EAAE,CAACyB,MAAH,CAAUC,KAAV,CAAgBf,SADK;CAEhCoB,EAAAA,WAAW,EAAE,qBAAU3B,IAAV,EACb;CACC,QAAI4B,MAAM,GAAG,IAAb;;CACA,QAAIhC,EAAE,CAACI,IAAD,CAAN,EACA;CACC4B,MAAAA,MAAM,GAAG,IAAI7B,QAAJ,CAAaC,IAAb,CAAT;CACA;;CACD,WAAO4B,MAAP;CACA;CAV+B,CAAjC;;;;"}