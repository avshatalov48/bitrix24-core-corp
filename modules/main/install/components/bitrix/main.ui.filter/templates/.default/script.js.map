{"version":3,"file":"script.js","sources":["src/blocks/date-group.js","src/blocks/main-ui-control-field.js","src/blocks/main-ui-control-field-group.js","src/blocks/main-ui-control-string.js","src/blocks/main-ui-control-textarea.js","src/blocks/main-ui-filter-field-list-item.js","src/blocks/main-ui-filter-info.js","src/blocks/main-ui-number.js","src/blocks/main-ui-search-square.js","src/blocks/number-group.js","src/blocks/sidebar-item.js","src/utils.js","src/destination-selector.js","src/field-controller.js","src/main-ui-control-custom-entity.js","src/search.js","src/settings.js","src/filter.js","src/field/field.js","src/api.js","src/fields/create-date-input-decl.js","src/fields/create-number-input-decl.js","src/fields/create-line-decl.js","src/fields/create-select-decl.js","src/fields.js","src/presets.js"],"sourcesContent":[";(function() {\n\t'use strict';\n\n\tBX.namespace('BX.Main.ui.block');\n\n\tBX.Main.ui.block['date-group'] = function(data)\n\t{\n\t\tvar group, select, deleteButton, label, dragButton;\n\n\t\tgroup = {\n\t\t\tblock: 'main-ui-control-field-group',\n\t\t\tname: 'name' ? (data.name + '_datesel') : '',\n\t\t\tmix: 'mix' in data ? data.mix : null,\n\t\t\tattrs: {\n\t\t\t\t'data-type': 'type' in data ? data.type : '',\n\t\t\t\t'data-name': 'name' in data ? data.name : '',\n\t\t\t\t'data-time': data.enableTime\n\n\t\t\t},\n\t\t\tcontent: []\n\t\t};\n\n\t\tif ('label' in data && BX.type.isNotEmptyString(data.label))\n\t\t{\n\t\t\tlabel = {\n\t\t\t\tblock: 'main-ui-control-field-label',\n\t\t\t\ttag: 'span',\n\t\t\t\tattrs: {title: data.label},\n\t\t\t\tcontent: data.label\n\t\t\t};\n\n\t\t\tgroup.content.push(label);\n\t\t}\n\n\t\tselect = {\n\t\t\tblock: 'main-ui-control-field',\n\t\t\tdragButton: false,\n\t\t\tcontent: {\n\t\t\t\tblock: 'main-ui-select',\n\t\t\t\ttabindex: 'tabindex' in data ? data.tabindex : '',\n\t\t\t\tvalue: 'value' in data ? data.value : '',\n\t\t\t\titems: 'items' in data ? data.items : '',\n\t\t\t\tname: 'name' in data ? (data.name + '_datesel') : '',\n\t\t\t\tparams: 'params' in data ? data.params : '',\n\t\t\t\tvalueDelete: false\n\t\t\t}\n\t\t};\n\n\t\tgroup.content.push(select);\n\n\t\tif ('content' in data && BX.type.isArray(data.content))\n\t\t{\n\t\t\tdata.content.forEach(function(current) {\n\t\t\t\tgroup.content.push(current);\n\t\t\t});\n\t\t}\n\n\t\tif ('content' in data &&\n\t\t\t(BX.type.isPlainObject(data.content) || BX.type.isNotEmptyString(data.content)))\n\t\t{\n\t\t\tgroup.content.push(data.content);\n\t\t}\n\n\t\tdeleteButton = {\n\t\t\tblock: 'main-ui-item-icon-container',\n\t\t\tcontent: {\n\t\t\t\tblock: 'main-ui-item-icon',\n\t\t\t\tmix: ['main-ui-delete', 'main-ui-filter-field-delete'],\n\t\t\t\ttag: 'span',\n\t\t\t\tattrs: {\n\t\t\t\t\ttitle: 'deleteTitle' in data && data.deleteTitle ? data.deleteTitle : ''\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tgroup.content.push(deleteButton);\n\n\t\tif (!('dragButton' in data) || data.dragButton !== false)\n\t\t{\n\t\t\tdragButton = {\n\t\t\t\tblock: 'main-ui-filter-icon-grab',\n\t\t\t\tmix: ['main-ui-item-icon'],\n\t\t\t\ttag: 'span',\n\t\t\t\tattrs: {\n\t\t\t\t\ttitle: 'dragTitle' in data && data.dragTitle ? data.dragTitle : ''\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tgroup.content.push(dragButton);\n\t\t}\n\n\t\treturn group;\n\t};\n})();",";(function() {\n\t'use strict';\n\n\tBX.namespace('BX.Main.ui.block');\n\n\tBX.Main.ui.block['main-ui-control-field'] = function(data)\n\t{\n\t\tvar field, deleteButton, valueDeleteButton, label, dragButton;\n\n\t\tfield = {\n\t\t\tblock: 'main-ui-control-field',\n\t\t\tmix: 'mix' in data ? data.mix : null,\n\t\t\tattrs: {\n\t\t\t\t'data-type': 'type' in data ? data.type : '',\n\t\t\t\t'data-name': 'name' in data ? data.name : ''\n\t\t\t},\n\t\t\tcontent: []\n\t\t};\n\n\t\tif ('label' in data && BX.type.isNotEmptyString(data.label))\n\t\t{\n\t\t\tlabel = {\n\t\t\t\tblock: 'main-ui-control-field-label',\n\t\t\t\ttag: 'span',\n\t\t\t\tattrs: {title: data.label},\n\t\t\t\tcontent: data.label\n\t\t\t};\n\n\t\t\tfield.content.push(label);\n\t\t}\n\n\t\tif (BX.type.isArray(data.content))\n\t\t{\n\t\t\tdata.content.forEach(function(current) {\n\t\t\t\tfield.content.push(current);\n\t\t\t});\n\t\t}\n\t\telse if (BX.type.isPlainObject(data.content) ||\n\t\t\tBX.type.isNotEmptyString(data.content))\n\t\t{\n\t\t\tfield.content.push(data.content);\n\t\t}\n\n\t\tif ('valueDelete' in data && data.valueDelete === true)\n\t\t{\n\t\t\tvalueDeleteButton = {\n\t\t\t\tblock: 'main-ui-control-value-delete',\n\t\t\t\tcontent: {\n\t\t\t\t\tblock: 'main-ui-control-value-delete-item',\n\t\t\t\t\ttag: 'span'\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tfield.content.push(valueDeleteButton);\n\t\t}\n\n\t\tif ('deleteButton' in data && data.deleteButton === true)\n\t\t{\n\t\t\tdeleteButton = {\n\t\t\t\tblock: 'main-ui-item-icon-container',\n\t\t\t\tcontent: {\n\t\t\t\t\tblock: 'main-ui-item-icon',\n\t\t\t\t\tmix: ['main-ui-delete', 'main-ui-filter-field-delete'],\n\t\t\t\t\ttag: 'span',\n\t\t\t\t\tattrs: {\n\t\t\t\t\t\ttitle: 'deleteTitle' in data && data.deleteTitle ? data.deleteTitle : ''\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tfield.content.push(deleteButton);\n\t\t}\n\n\t\tif (!('dragButton' in data) || data.dragButton !== false)\n\t\t{\n\t\t\tdragButton = {\n\t\t\t\tblock: 'main-ui-filter-icon-grab',\n\t\t\t\tmix: ['main-ui-item-icon'],\n\t\t\t\ttag: 'span',\n\t\t\t\tattrs: {\n\t\t\t\t\ttitle: 'dragTitle' in data && data.dragTitle ? data.dragTitle : ''\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tfield.content.push(dragButton);\n\t\t}\n\n\t\treturn field;\n\t};\n\n})();",";(function() {\n\t'use strict';\n\n\tBX.namespace('BX.Main.ui.block');\n\n\tBX.Main.ui.block['main-ui-control-field-group'] = function(data)\n\t{\n\t\tvar field, deleteButton, label, dragButton;\n\n\t\tfield = {\n\t\t\tblock: 'main-ui-control-field-group',\n\t\t\tmix: 'mix' in data ? data.mix : null,\n\t\t\tattrs: {\n\t\t\t\t'data-type': 'type' in data ? data.type : '',\n\t\t\t\t'data-name': 'name' in data ? data.name : ''\n\t\t\t},\n\t\t\tcontent: []\n\t\t};\n\n\t\tif ('label' in data && BX.type.isNotEmptyString(data.label))\n\t\t{\n\t\t\tlabel = {\n\t\t\t\tblock: 'main-ui-control-field-label',\n\t\t\t\ttag: 'span',\n\t\t\t\tattrs: {title: data.label},\n\t\t\t\tcontent: data.label\n\t\t\t};\n\n\t\t\tfield.content.push(label);\n\t\t}\n\n\t\tif (BX.type.isArray(data.content))\n\t\t{\n\t\t\tdata.content.forEach(function(current) {\n\t\t\t\tfield.content.push(current);\n\t\t\t});\n\t\t}\n\t\telse if (BX.type.isPlainObject(data.content) ||\n\t\t\tBX.type.isNotEmptyString(data.content))\n\t\t{\n\t\t\tfield.content.push(data.content);\n\t\t}\n\n\t\tif ('deleteButton' in data && data.deleteButton === true)\n\t\t{\n\t\t\tdeleteButton = {\n\t\t\t\tblock: 'main-ui-item-icon-container',\n\t\t\t\tcontent: {\n\t\t\t\t\tblock: 'main-ui-item-icon',\n\t\t\t\t\tmix: ['main-ui-delete', 'main-ui-filter-field-delete'],\n\t\t\t\t\ttag: 'span',\n\t\t\t\t\tattrs: {\n\t\t\t\t\t\ttitle: 'deleteTitle' in data && data.deleteTitle ? data.deleteTitle : ''\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tfield.content.push(deleteButton);\n\t\t}\n\n\t\tif (!('dragButton' in data) || data.dragButton !== false)\n\t\t{\n\t\t\tdragButton = {\n\t\t\t\tblock: 'main-ui-filter-icon-grab',\n\t\t\t\tmix: ['main-ui-item-icon'],\n\t\t\t\ttag: 'span',\n\t\t\t\tattrs: {\n\t\t\t\t\ttitle: 'dragTitle' in data && data.dragTitle ? data.dragTitle : ''\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tfield.content.push(dragButton);\n\t\t}\n\n\t\treturn field;\n\t};\n\n})();",";(function() {\n\t'use strict';\n\n\tBX.namespace('BX.Main.ui.block');\n\n\tBX.Main.ui.block['main-ui-control-string'] = function(data)\n\t{\n\t\treturn {\n\t\t\tblock: 'main-ui-control-string',\n\t\t\tmix: ['main-ui-control'],\n\t\t\ttag: 'input',\n\t\t\tattrs: {\n\t\t\t\ttype: 'type' in data ? data.type : 'text',\n\t\t\t\tname: 'name' in data ? data.name : '',\n\t\t\t\tplaceholder: 'placeholder' in data ? data.placeholder : '',\n\t\t\t\ttabindex: 'tabindex' in data ? data.tabindex : '',\n\t\t\t\tvalue: 'value' in data ? data.value : ''\n\t\t\t}\n\t\t};\n\t};\n})();",";(function() {\n\t'use strict';\n\n\tBX.namespace('BX.Main.ui.block');\n\n\tBX.Main.ui.block['main-ui-control-textarea'] = function(data)\n\t{\n\t\treturn {\n\t\t\tblock: 'main-ui-control-string',\n\t\t\tmix: ['main-ui-control main-ui-control-textarea'],\n\t\t\ttag: 'textarea',\n\t\t\tattrs: {\n\t\t\t\tname: 'name' in data ? data.name : '',\n\t\t\t\tplaceholder: 'placeholder' in data ? data.placeholder : '',\n\t\t\t\ttabindex: 'tabindex' in data ? data.tabindex : '',\n\t\t\t},\n\t\t\tcontent: 'value' in data ? data.value : '',\n\t\t};\n\t};\n})();",";(function() {\n\t'use strict';\n\n\tBX.namespace('BX.Main.ui.block');\n\n\tBX.Main.ui.block['main-ui-filter-field-list-item'] = function(data)\n\t{\n\t\tvar label = {\n\t\t\tblock: 'main-ui-select-inner-label',\n\t\t\tcontent: 'label' in data ? data.label : ''\n\t\t};\n\n\t\tvar item = {\n\t\t\tblock: 'main-ui-filter-field-list-item',\n\t\t\tmix: 'main-ui-select-inner-item',\n\t\t\tattrs: {\n\t\t\t\t'data-id': data.id,\n\t\t\t\t'data-name': data.name,\n\t\t\t\t'data-item': 'item' in data ? JSON.stringify(data.item) : {}\n\t\t\t},\n\t\t\tevents: {\n\t\t\t\tclick: 'onClick' in data ? data.onClick : ''\n\t\t\t},\n\t\t\tcontent: label\n\t\t};\n\n\t\treturn item;\n\t}\n})();",";(function() {\n\t'use strict';\n\n\tBX.namespace('BX.Main.ui.block');\n\n\tBX.Main.ui.block['main-ui-filter-info'] = function(data)\n\t{\n\t\treturn {\n\t\t\tblock: 'main-ui-filter-info',\n\t\t\ttag: 'span',\n\t\t\tcontent: data.content,\n\t\t\tattrs: {\n\t\t\t\ttitle: data.title\n\t\t\t}\n\t\t}\n\t};\n})();",";(function() {\n\t'use strict';\n\n\tBX.namespace('BX.Main.ui.block');\n\n\tBX.Main.ui.block['main-ui-number'] = function(data)\n\t{\n\t\tvar control, input, valueDelete;\n\n\t\tcontrol = {\n\t\t\tblock: 'main-ui-number',\n\t\t\tmix: ['main-ui-control'],\n\t\t\tcontent: []\n\t\t};\n\n\t\tif ('mix' in data && BX.type.isArray(data.mix))\n\t\t{\n\t\t\tdata.mix.forEach(function(current) {\n\t\t\t\tcontrol.mix.push(current);\n\t\t\t});\n\t\t}\n\n\t\tinput = {\n\t\t\tblock: 'main-ui-number-input',\n\t\t\tmix: ['main-ui-control-input'],\n\t\t\ttag: 'input',\n\t\t\tattrs: {\n\t\t\t\ttype: 'number',\n\t\t\t\tname: 'name' in data ? data.name : '',\n\t\t\t\ttabindex: 'tabindex' in data ? data.tabindex : '',\n\t\t\t\tvalue: 'value' in data ? data.value : '',\n\t\t\t\tplaceholder: 'placeholder' in data ? data.placeholder : '',\n\t\t\t\tautocomplete: 'off'\n\t\t\t}\n\t\t};\n\n\t\tcontrol.content.push(input);\n\n\t\tif ('valueDelete' in data && data.valueDelete === true)\n\t\t{\n\t\t\tvalueDelete = {\n\t\t\t\tblock: 'main-ui-control-value-delete',\n\t\t\t\tcontent: {\n\t\t\t\t\tblock: 'main-ui-control-value-delete-item',\n\t\t\t\t\ttag: 'span'\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tcontrol.content.push(valueDelete);\n\t\t}\n\n\t\treturn control;\n\t};\n})();",";(function() {\n\t'use strict';\n\n\tBX.namespace('BX.Main.ui.block');\n\n\tBX.Main.ui.block['main-ui-search-square'] = function(data)\n\t{\n\t\tvar mix = ['main-ui-filter-search-square'];\n\n\t\tif ('isPreset' in data && data.isPreset)\n\t\t{\n\t\t\tmix.push('main-ui-filter-search-square-preset');\n\t\t}\n\n\t\treturn {\n\t\t\tblock: 'main-ui-square',\n\t\t\tmix: mix,\n\t\t\tattrs: {\n\t\t\t\t'data-item': 'item' in data ? JSON.stringify(data.item) : '',\n\t\t\t\t'title': 'title' in data ? data.title : ''\n\t\t\t},\n\t\t\tcontent: [\n\t\t\t\t{\n\t\t\t\t\tblock: 'main-ui-square-item',\n\t\t\t\t\tcontent: 'name' in data ? BX.util.htmlspecialcharsback(data.name) : ''\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tblock: 'main-ui-square-delete',\n\t\t\t\t\tmix: ['main-ui-item-icon']\n\t\t\t\t}\n\t\t\t]\n\t\t}\n\t};\n})();",";(function() {\n\t'use strict';\n\n\tBX.namespace('BX.Main.ui.block');\n\n\tBX.Main.ui.block['number-group'] = function(data)\n\t{\n\t\tvar group, select, deleteButton, label, dragButton;\n\n\t\tgroup = {\n\t\t\tblock: 'main-ui-control-field-group',\n\t\t\tname: 'name' in data ? (data.name + '_numsel') : '',\n\t\t\tmix: 'mix' in data ? data.mix : null,\n\t\t\tattrs: {\n\t\t\t\t'data-type': 'type' in data ? data.type : '',\n\t\t\t\t'data-name': 'name' in data ? data.name : ''\n\t\t\t},\n\t\t\tcontent: []\n\t\t};\n\n\t\tif ('label' in data && BX.type.isNotEmptyString(data.label))\n\t\t{\n\t\t\tlabel = {\n\t\t\t\tblock: 'main-ui-control-field-label',\n\t\t\t\ttag: 'span',\n\t\t\t\tattrs: {title: data.label},\n\t\t\t\tcontent: data.label\n\t\t\t};\n\n\t\t\tgroup.content.push(label);\n\t\t}\n\n\t\tselect = {\n\t\t\tblock: 'main-ui-control-field',\n\t\t\tdragButton: false,\n\t\t\tcontent: {\n\t\t\t\tblock: 'main-ui-select',\n\t\t\t\ttabindex: 'tabindex' in data ? data.tabindex : '',\n\t\t\t\tvalue: 'value' in data ? data.value : '',\n\t\t\t\titems: 'items' in data ? data.items : '',\n\t\t\t\tname: 'name' in data ? (data.name + '_numsel') : '',\n\t\t\t\tparams: 'params' in data ? data.params : '',\n\t\t\t\tvalueDelete: false\n\t\t\t}\n\t\t};\n\n\t\tgroup.content.push(select);\n\n\t\tif ('content' in data && BX.type.isArray(data.content))\n\t\t{\n\t\t\tdata.content.forEach(function(current) {\n\t\t\t\tgroup.content.push(current);\n\t\t\t});\n\t\t}\n\n\t\tif ('content' in data &&\n\t\t\t(BX.type.isPlainObject(data.content) || BX.type.isNotEmptyString(data.content)))\n\t\t{\n\t\t\tgroup.content.push(data.content);\n\t\t}\n\n\t\tdeleteButton = {\n\t\t\tblock: 'main-ui-item-icon-container',\n\t\t\tcontent: {\n\t\t\t\tblock: 'main-ui-item-icon',\n\t\t\t\tmix: ['main-ui-delete', 'main-ui-filter-field-delete'],\n\t\t\t\ttag: 'span',\n\t\t\t\tattrs: {\n\t\t\t\t\ttitle: 'deleteTitle' in data && data.deleteTitle ? data.deleteTitle : ''\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tgroup.content.push(deleteButton);\n\n\t\tif (!('dragButton' in data) || data.dragButton !== false)\n\t\t{\n\t\t\tdragButton = {\n\t\t\t\tblock: 'main-ui-filter-icon-grab',\n\t\t\t\tmix: ['main-ui-item-icon'],\n\t\t\t\ttag: 'span',\n\t\t\t\tattrs: {\n\t\t\t\t\ttitle: 'dragTitle' in data && data.dragTitle ? data.dragTitle : ''\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tgroup.content.push(dragButton);\n\t\t}\n\n\t\treturn group;\n\t};\n})();",";(function() {\n\t'use strict';\n\n\tBX.namespace('BX.Main.ui.block');\n\n\tBX.Main.ui.block['sidebar-item'] = function(data)\n\t{\n\t\treturn {\n\t\t\tblock: 'main-ui-filter-sidebar-item' + ('pinned' in data && data.pinned ? ' main-ui-item-pin' : ''),\n\t\t\tattrs: {\n\t\t\t\t'data-id': 'id' in data ? data.id : ''\n\t\t\t},\n\t\t\tcontent: [\n\t\t\t\t{\n\t\t\t\t\tblock: 'main-ui-filter-icon-grab',\n\t\t\t\t\ttag: 'span',\n\t\t\t\t\tmix: ['main-ui-item-icon'],\n\t\t\t\t\tattrs: {\n\t\t\t\t\t\ttitle: 'dragTitle' in data && data.dragTitle ? data.dragTitle : ''\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tblock: 'main-ui-filter-sidebar-item-text-container',\n\t\t\t\t\ttag: 'span',\n\t\t\t\t\tcontent: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tblock: 'main-ui-filter-sidebar-item-input',\n\t\t\t\t\t\t\ttag: 'input',\n\t\t\t\t\t\t\tattrs: {\n\t\t\t\t\t\t\t\ttype: 'text',\n\t\t\t\t\t\t\t\tplaceholder: 'placeholder' in data ? data.placeholder : '',\n\t\t\t\t\t\t\t\tvalue: 'text' in data ? BX.util.htmlspecialchars(BX.util.htmlspecialcharsback(data.text)) : ''\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tblock: 'main-ui-filter-sidebar-item-text',\n\t\t\t\t\t\t\ttag: 'span',\n\t\t\t\t\t\t\tcontent: 'text' in data ? data.text : ''\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tblock: 'main-ui-filter-icon-pin',\n\t\t\t\t\t\t\ttag: 'span',\n\t\t\t\t\t\t\tmix: ['main-ui-item-icon'],\n\t\t\t\t\t\t\tattrs: {\n\t\t\t\t\t\t\t\ttitle: 'noEditPinTitle' in data && data.noEditPinTitle ? data.noEditPinTitle : ''\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tblock: 'main-ui-filter-icon-edit',\n\t\t\t\t\ttag: 'span',\n\t\t\t\t\tmix: ['main-ui-item-icon'],\n\t\t\t\t\tattrs: {\n\t\t\t\t\t\ttitle: 'editNameTitle' in data && data.editNameTitle ? data.editNameTitle : ''\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tblock: 'main-ui-delete',\n\t\t\t\t\ttag: 'span',\n\t\t\t\t\tmix: ['main-ui-item-icon'],\n\t\t\t\t\tattrs: {\n\t\t\t\t\t\ttitle: 'removeTitle' in data && data.removeTitle ? data.removeTitle : ''\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tblock: 'main-ui-filter-icon-pin',\n\t\t\t\t\ttag: 'span',\n\t\t\t\t\tmix: ['main-ui-item-icon'],\n\t\t\t\t\tattrs: {\n\t\t\t\t\t\ttitle: 'editPinTitle' in data && data.editPinTitle ? data.editPinTitle : ''\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tblock: 'main-ui-filter-edit-mask'\n\t\t\t\t}\n\t\t\t]\n\t\t};\n\t};\n})();",";(function() {\n\t'use strict';\n\n\tBX.namespace('BX.Filter');\n\n\n\t/**\n\t * @type {{\n\t * \t\tcache: {},\n\t * \t\tstyleForEach: BX.Filter.Utils.styleForEach,\n\t * \t\tclosestParent: BX.Filter.Utils.closestParent,\n\t * \t\tclosestChilds: BX.Filter.Utils.closestChilds,\n\t * \t\tgetNext: BX.Filter.Utils.getNext,\n\t * \t\tgetPrev: BX.Filter.Utils.getPrev,\n\t * \t\tcollectionSort: BX.Filter.Utils.collectionSort,\n\t * \t\tgetIndex: BX.Filter.Utils.getIndex,\n\t * \t\tgetByClass: BX.Filter.Utils.getByClass,\n\t * \t\tgetByTag: BX.Filter.Utils.getByTag,\n\t * \t\tgetBySelector: BX.Filter.Utils.getBySelector,\n\t * \t\trequestAnimationFrame: BX.Filter.Utils.requestAnimationFrame,\n\t * \t\tsortObject: BX.Filter.Utils.sortObject,\n\t * \t\tobjectsIsEquals: BX.Filter.Utils.objectsIsEquals,\n\t * \t\tisKey: BX.Filter.Utils.isKey\n\t * \t}}\n\t */\n\tBX.Filter.Utils = {\n\t\t/** @protected **/\n\t\tcache: {},\n\n\t\t/**\n\t\t * Sets css properties for element or elements collection\n\t\t * @param {?HTMLElement|?HTMLElement[]} collection\n\t\t * @param {object} properties\n\t\t */\n\t\tstyleForEach: function(collection, properties)\n\t\t{\n\t\t\tvar keys;\n\t\t\tproperties = BX.type.isPlainObject(properties) ? properties : null;\n\t\t\tkeys = Object.keys(properties);\n\n\t\t\t[].forEach.call((collection || []), function(current) {\n\t\t\t\tkeys.forEach(function(propKey) {\n\t\t\t\t\tBX.style(current, propKey, properties[propKey]);\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\n\n\t\t/**\n\t\t * Gets closest parent or closest parent element with class name\n\t\t * @param {HTMLElement} item\n\t\t * @param {?string} [className]\n\t\t * @return {?HTMLElement|?Node}\n\t\t */\n\t\tclosestParent: function(item, className)\n\t\t{\n\t\t\tif (item)\n\t\t\t{\n\t\t\t\tif (!className)\n\t\t\t\t{\n\t\t\t\t\treturn item.parentNode || null;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\treturn BX.findParent(\n\t\t\t\t\t\titem,\n\t\t\t\t\t\t{className: className}\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\n\t\t/**\n\t\t * Gets closest childs elements\n\t\t * @param {HTMLElement} item\n\t\t * @return {?HTMLElement}\n\t\t */\n\t\tclosestChilds: function(item)\n\t\t{\n\t\t\treturn !!item ? item.children : null;\n\t\t},\n\n\n\t\t/**\n\t\t * Gets next element\n\t\t * @param {HTMLElement} currentItem\n\t\t * @return {?HTMLElement}\n\t\t */\n\t\tgetNext: function(currentItem)\n\t\t{\n\t\t\treturn !!currentItem ? currentItem.nextElementSibling : null;\n\t\t},\n\n\n\t\t/**\n\t\t * Gets previews element\n\t\t * @param {HTMLElement} currentItem\n\t\t * @return {?HTMLElement}\n\t\t */\n\t\tgetPrev: function(currentItem)\n\t\t{\n\t\t\treturn !!currentItem ? currentItem.previousElementSibling : null\n\t\t},\n\n\n\t\t/**\n\t\t * Move current item after target item\n\t\t * @param {HTMLElement} current\n\t\t * @param {HTMLElement} target\n\t\t */\n\t\tcollectionSort: function(current, target)\n\t\t{\n\t\t\tvar root, collection, collectionLength, currentIndex, targetIndex;\n\n\t\t\tif (current && target && current !== target && current.parentNode === target.parentNode)\n\t\t\t{\n\t\t\t\troot = this.closestParent(target);\n\t\t\t\tcollection = this.closestChilds(root);\n\t\t\t\tcollectionLength = collection.length;\n\t\t\t\tcurrentIndex = this.getIndex(collection, current);\n\t\t\t\ttargetIndex = this.getIndex(collection, target);\n\n\t\t\t\tif (collectionLength === targetIndex) {\n\t\t\t\t\troot.appendChild(target);\n\t\t\t\t}\n\n\t\t\t\tif (currentIndex > targetIndex) {\n\t\t\t\t\troot.insertBefore(current, target);\n\t\t\t\t}\n\n\t\t\t\tif (currentIndex < targetIndex && collectionLength !== targetIndex)\n\t\t\t\t{\n\t\t\t\t\troot.insertBefore(current, this.getNext(target));\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\n\t\t/**\n\t\t * Gets collection item index\n\t\t * @param {Array|HTMLCollection|NodeList} collection\n\t\t * @param {*} item\n\t\t * @return {int}\n\t\t */\n\t\tgetIndex: function(collection, item)\n\t\t{\n\t\t\treturn [].indexOf.call((collection || []), item);\n\t\t},\n\n\n\t\t/**\n\t\t * Gets elements by class name\n\t\t * @param {HTMLElement|HTMLDocument} rootElement\n\t\t * @param {string} className\n\t\t * @param {boolean} [all = false]\n\t\t * @returns {?HTMLElement|?HTMLElement[]}\n\t\t */\n\t\tgetByClass: function(rootElement, className, all)\n\t\t{\n\t\t\tvar result = [];\n\n\t\t\tif (className)\n\t\t\t{\n\t\t\t\tresult = (rootElement || document.body).getElementsByClassName(className);\n\n\t\t\t\tif (!all)\n\t\t\t\t{\n\t\t\t\t\tresult = result.length ? result[0] : null;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tresult = [].slice.call(result);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn result;\n\t\t},\n\n\n\t\t/**\n\t\t * Gets element or elements by tag name\n\t\t * @param {HTMLElement|HTMLDocument} rootElement\n\t\t * @param {string} tag\n\t\t * @param {boolean} [all = false]\n\t\t * @return {?HTMLElement|?HTMLElement[]}\n\t\t */\n\t\tgetByTag: function(rootElement, tag, all)\n\t\t{\n\t\t\tvar result = [];\n\n\t\t\tif (tag)\n\t\t\t{\n\t\t\t\tresult = (rootElement || document.body).getElementsByTagName(tag);\n\n\t\t\t\tif (!all)\n\t\t\t\t{\n\t\t\t\t\tresult = result.length ? result[0] : null;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tresult = [].slice.call(result);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn result;\n\t\t},\n\n\n\t\t/**\n\t\t * Gets element or elements by css selector\n\t\t * @param {HTMLElement|HTMLDocument|Node} rootElement\n\t\t * @param {string} selector\n\t\t * @param {boolean} [all = false]\n\t\t * @return {?HTMLElement|?HTMLElement[]}\n\t\t */\n\t\tgetBySelector: function(rootElement, selector, all)\n\t\t{\n\t\t\tvar result = [];\n\n\t\t\tif (selector)\n\t\t\t{\n\t\t\t\tif (!all)\n\t\t\t\t{\n\t\t\t\t\tresult = (rootElement || document.body).querySelector(selector);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tresult = (rootElement || document.body).querySelectorAll(selector);\n\t\t\t\t\tresult = [].slice.call(result);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn result;\n\t\t},\n\n\t\trequestAnimationFrame: function()\n\t\t{\n\t\t\tvar raf = (\n\t\t\t\twindow.requestAnimationFrame ||\n\t\t\t\twindow.webkitRequestAnimationFrame ||\n\t\t\t\twindow.mozRequestAnimationFrame ||\n\t\t\t\twindow.msRequestAnimationFrame ||\n\t\t\t\twindow.oRequestAnimationFrame ||\n\t\t\t\tfunction(callback){ window.setTimeout(callback, 1000/60) }\n\t\t\t);\n\n\t\t\traf.apply(window, arguments);\n\t\t},\n\n\n\t\t/**\n\t\t * Sorts object properties\n\t\t * @param {object} input\n\t\t * @return {object}\n\t\t */\n\t\tsortObject: function(input)\n\t\t{\n\t\t\tvar output = {};\n\n\t\t\tObject.keys(input).sort().forEach(function(key) {\n\t\t\t\toutput[key] = input[key];\n\t\t\t});\n\n\t\t\treturn output;\n\t\t},\n\n\n\t\t/**\n\t\t * Compares two objects or arrays\n\t\t * @param {object} object1\n\t\t * @param {object} object2\n\t\t * @return {boolean}\n\t\t */\n\t\tobjectsIsEquals: function(object1, object2)\n\t\t{\n\t\t\treturn JSON.stringify(object1) === JSON.stringify(object2);\n\t\t},\n\n\t\tisKey: function(event, keyCode)\n\t\t{\n\t\t\tvar keyboard = {8: 'backspace', 9: 'tab', 13: 'enter', 16: 'shift', 17: 'ctrl', 18: 'alt', 27: 'escape',\n\t\t\t\t32: 'space', 37: 'leftArrow', 38: 'upArrow', 39: 'rightArrow', 40: 'downArrow', 46: 'delete',\n\t\t\t\t112: 'f1', 113: 'f2', 114: 'f3', 115: 'f4', 116: 'f5', 117: 'f6', 118: 'f7', 119: 'f8', 120: 'f9',\n\t\t\t\t121: 'f10', 122: 'f11', 123: 'f12', 65: 'a'};\n\n\t\t\tvar code = !!event ? (('keyCode' in event) ? event.keyCode : 'which' in event ? event.which : 0) : 0;\n\n\t\t\treturn code in keyboard && keyboard[code] === keyCode;\n\t\t}\n\t};\n})();",";(function() {\n\t'use strict';\n\n\tBX.namespace('BX.Filter');\n\n\tBX.Filter.DestinationSelectorManager = {\n\n\t\tfields: [],\n\t\tcontrols: {},\n\n\t\tonSelect: function(isNumeric, prefix, params)\n\t\t{\n\t\t\tif (\n\t\t\t\t!BX.type.isNotEmptyObject(params)\n\t\t\t\t|| !BX.type.isNotEmptyObject(params.item)\n\t\t\t\t|| !BX.type.isNotEmptyString(params.selectorId)\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar\n\t\t\t\tselectorId = params.selectorId,\n\t\t\t\titem = params.item;\n\n\t\t\tvar control = BX.Filter.DestinationSelectorManager.controls[selectorId];\n\t\t\tif (control)\n\t\t\t{\n\t\t\t\tvar value = item.id;\n\n\t\t\t\tif (\n\t\t\t\t\tBX.type.isNotEmptyString(isNumeric)\n\t\t\t\t\t&& isNumeric == 'Y'\n\t\t\t\t\t&& BX.type.isNotEmptyString(prefix)\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tvar re = new RegExp('^' + prefix + '(\\\\d+)$');\n\t\t\t\t\tvar found = value.match(re);\n\t\t\t\t\tif (BX.type.isArray(found))\n\t\t\t\t\t{\n\t\t\t\t\t\tvalue = found[1];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tvar eventResult = {};\n\t\t\t\t\tBX.onCustomEvent(window, 'BX.Filter.DestinationSelector:convert', [ {\n\t\t\t\t\t\tselectorId: selectorId,\n\t\t\t\t\t\tvalue: value\n\t\t\t\t\t}, eventResult ]);\n\n\t\t\t\t\tif (BX.type.isNotEmptyString(eventResult.value))\n\t\t\t\t\t{\n\t\t\t\t\t\tvalue = eventResult.value;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tcontrol.setData(BX.util.htmlspecialcharsback(item.name), value);\n\t\t\t\tcontrol.getLabelNode().value = '';\n\t\t\t\tcontrol.getLabelNode().blur();\n\t\t\t}\n\t\t},\n\n\t\tonDialogOpen: function(params)\n\t\t{\n\t\t\tif (\n\t\t\t\ttypeof params == 'undefined'\n\t\t\t\t|| !BX.type.isNotEmptyString(params.selectorId)\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar selectorId = params.selectorId;\n\n\t\t\tvar item = BX.Filter.DestinationSelector.items[selectorId];\n\t\t\tif(item)\n\t\t\t{\n\t\t\t\titem.onDialogOpen();\n\t\t\t}\n\t\t},\n\n\t\tonDialogClose: function(params)\n\t\t{\n\t\t\tif (\n\t\t\t\ttypeof params == 'undefined'\n\t\t\t\t|| !BX.type.isNotEmptyString(params.selectorId)\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar selectorId = params.selectorId;\n\n\t\t\tvar item = BX.Filter.DestinationSelector.items[selectorId];\n\t\t\tif(item)\n\t\t\t{\n\t\t\t\titem.onDialogClose();\n\t\t\t}\n\t\t}\n\t};\n\n\tBX.Filter.DestinationSelector = function ()\n\t{\n\t\tthis.id = \"\";\n\t\tthis.filterId = \"\";\n\t\tthis.settings = {};\n\t\tthis.fieldId = \"\";\n\t\tthis.control = null;\n\t\tthis.inited = null;\n\t};\n\n\tBX.Filter.DestinationSelector.items = {};\n\n\tBX.Filter.DestinationSelector.create = function(id, settings)\n\t{\n\t\tif (typeof this.items[id] != 'undefined')\n\t\t{\n\t\t\treturn this.items[id];\n\t\t}\n\n\t\tvar self = new BX.Filter.DestinationSelector(id, settings);\n\t\tself.initialize(id, settings);\n\t\tthis.items[id] = self;\n\t\tBX.onCustomEvent(window, 'BX.Filter.DestinationSelector:create', [ id ]);\n\t\treturn self;\n\t};\n\n\tBX.Filter.DestinationSelector.prototype.getSetting = function(name, defaultval)\n\t{\n\t\treturn this.settings.hasOwnProperty(name) ? this.settings[name] : defaultval;\n\t};\n\n\tBX.Filter.DestinationSelector.prototype.getSearchInput = function()\n\t{\n\t\treturn this.control ? this.control.getLabelNode() : null;\n\t};\n\n\tBX.Filter.DestinationSelector.prototype.initialize = function(id, settings)\n\t{\n\t\tthis.id = id;\n\t\tthis.settings = settings ? settings : {};\n\t\tthis.fieldId = this.getSetting(\"fieldId\", \"\");\n\t\tthis.filterId = this.getSetting(\"filterId\", \"\");\n\t\tthis.inited = false;\n\t\tthis.opened = null;\n\n\t\tvar initialValue = this.getSetting(\"initialValue\", false);\n\t\tif (!!initialValue)\n\t\t{\n\t\t\tvar initialSettings = {};\n\t\t\tinitialSettings[this.fieldId] = initialValue.itemId;\n\t\t\tinitialSettings[this.fieldId + '_label'] = initialValue.itemName;\n\n\t\t\tBX.Main.filterManager.getById(this.filterId).getApi().setFields(initialSettings);\n\t\t}\n\t\tBX.addCustomEvent(window, \"BX.Main.Filter:customEntityFocus\", BX.delegate(this.onCustomEntitySelectorOpen, this));\n\t\tBX.addCustomEvent(window, \"BX.Main.Filter:customEntityBlur\", BX.delegate(this.onCustomEntitySelectorClose, this));\n\t\tBX.addCustomEvent(window, \"BX.Main.Filter:onGetStopBlur\", BX.delegate(this.onGetStopBlur, this));\n\t\tBX.addCustomEvent(window, \"BX.Main.SelectorV2:beforeInitDialog\", BX.delegate(this.onBeforeInitDialog, this));\n\t\tBX.addCustomEvent(window, \"BX.Main.Filter:customEntityRemove\", BX.delegate(this.onCustomEntityRemove, this));\n\t};\n\n\tBX.Filter.DestinationSelector.prototype.open = function()\n\t{\n\t\tvar name = this.id;\n\n\t\tif (!this.inited)\n\t\t{\n\t\t\tvar input = this.getSearchInput();\n\t\t\tinput.id = input.name;\n\n\t\t\tBX.addCustomEvent(window, \"BX.Main.SelectorV2:afterInitDialog\", BX.delegate(function(params) {\n\t\t\t\tif (\n\t\t\t\t\ttypeof params.id != 'undefined'\n\t\t\t\t\t|| params.id != this.id\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.opened = true;\n\t\t\t}, this));\n\n\t\t\tBX.addCustomEvent(window, \"BX.UI.SelectorManager:onCreate\", BX.delegate(function(selectorId) {\n\t\t\t\tif (\n\t\t\t\t\t!BX.type.isNotEmptyString(selectorId)\n\t\t\t\t\t|| selectorId != this.id\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tBX.onCustomEvent(window, 'BX.Filter.DestinationSelector:setSelected', [ {\n\t\t\t\t\tselectorId: selectorId,\n\t\t\t\t\tcurrent: this.control.getCurrentValues()\n\t\t\t\t} ]);\n\n\t\t\t}, this));\n\n\t\t\tBX.onCustomEvent(window, 'BX.Filter.DestinationSelector:openInit', [ {\n\t\t\t\tid: this.id,\n\t\t\t\tinputId: input.id,\n\t\t\t\tcontainerId: input.id\n\t\t\t} ]);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tvar currentValue = {};\n\t\t\tcurrentValue[this.currentUser.entityId] = \"users\";\n\n\t\t\tBX.onCustomEvent(window, 'BX.Filter.DestinationSelector:open', [ {\n\t\t\t\tid: this.id,\n\t\t\t\tbindNode: this.control.getField(),\n\t\t\t\tvalue: currentValue\n\t\t\t} ]);\n\n\t\t\tthis.opened = true;\n\t\t}\n\t};\n\n\tBX.Filter.DestinationSelector.prototype.close = function()\n\t{\n\t\tif(typeof(BX.Main.selectorManagerV2.controls[this.id]) !== \"undefined\")\n\t\t{\n\t\t\tBX.Main.selectorManagerV2.controls[this.id].closeDialog();\n\t\t}\n\t};\n\n\tBX.Filter.DestinationSelector.prototype.onCustomEntitySelectorOpen = function(control)\n\t{\n\t\tvar fieldId = control.getId();\n\n\t\tif(this.fieldId !== fieldId)\n\t\t{\n\t\t\tthis.control = null;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.control = control;\n\n\t\t\tif(this.control)\n\t\t\t{\n\t\t\t\tvar current = this.control.getCurrentValues();\n\t\t\t\tthis.currentUser = {\n\t\t\t\t\tentityId: current[\"value\"]\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tBX.Filter.DestinationSelectorManager.controls[this.id] = this.control;\n\n\t\t\tif (!this.opened)\n\t\t\t{\n\t\t\t\tthis.open();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.close();\n\t\t\t}\n\t\t}\n\t};\n\n\tBX.Filter.DestinationSelector.prototype.onCustomEntitySelectorClose = function(control)\n\t{\n\t\tif(\n\t\t\tthis.fieldId === control.getId()\n\t\t\t&& this.inited === true\n\t\t\t&& this.opened === true\n\t\t)\n\t\t{\n\t\t\tthis.control = null;\n\t\t\twindow.setTimeout(BX.delegate(this.close, this), 0);\n\t\t}\n\t};\n\n\tBX.Filter.DestinationSelector.prototype.onGetStopBlur = function(event, result)\n\t{\n\t\tif (BX.findParent(event.target, { className: 'bx-lm-box'}))\n\t\t{\n\t\t\tresult.stopBlur = true;\n\t\t}\n\t};\n\n\tBX.Filter.DestinationSelector.prototype.onCustomEntityRemove = function(control)\n\t{\n\t\tif(this.fieldId === control.getId())\n\t\t{\n\t\t\tvar instance = BX.UI.SelectorManager.instances[control.getId()];\n\t\t\tif (\n\t\t\t\tinstance\n\t\t\t\t&& typeof control.hiddenInput != 'undefined'\n\t\t\t\t&& typeof control.hiddenInput.value != 'undefined'\n\t\t\t\t&& BX.type.isNotEmptyObject(instance.itemsSelected)\n\t\t\t\t&& typeof instance.itemsSelected[control.hiddenInput.value] != 'undefined'\n\t\t\t)\n\t\t\t{\n\t\t\t\tdelete instance.itemsSelected[control.hiddenInput.value];\n\t\t\t}\n\t\t}\n\t};\n\n\tBX.Filter.DestinationSelector.prototype.onBeforeInitDialog = function(params)\n\t{\n\t\tif (\n\t\t\ttypeof params.id == 'undefined'\n\t\t\t|| params.id != this.id\n\t\t)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.inited = true;\n\n\t\tif (!this.control)\n\t\t{\n\t\t\tparams.blockInit = true;\n\t\t}\n\t};\n\n\tBX.Filter.DestinationSelector.prototype.onDialogOpen = function()\n\t{\n\t\tthis.opened = true;\n\t};\n\n\tBX.Filter.DestinationSelector.prototype.onDialogClose = function()\n\t{\n\t\tthis.opened = false;\n\t};\n\n})();",";(function() {\n\t'use strict';\n\n\tBX.namespace('BX.Filter');\n\n\tBX.Filter.FieldController = function(field, parent)\n\t{\n\t\tthis.field = null;\n\t\tthis.parent = null;\n\t\tthis.type = null;\n\t\tthis.input = null;\n\t\tthis.deleteButton = null;\n\t\tthis.init(field, parent);\n\t};\n\n\tBX.Filter.FieldController.prototype = {\n\t\tinit: function(field, parent)\n\t\t{\n\t\t\tif (!BX.type.isDomNode(field))\n\t\t\t{\n\t\t\t\tthrow 'BX.Filter.FieldController.init: field isn\\'t dom node';\n\t\t\t}\n\n\t\t\tif (!(parent instanceof BX.Main.Filter))\n\t\t\t{\n\t\t\t\tthrow 'BX.Filter.FieldController.init: parent not instance of BX.Main.ui.Filter';\n\t\t\t}\n\n\t\t\tthis.field = field;\n\t\t\tthis.parent = parent;\n\t\t\tthis.bind();\n\n\t\t\tthis.isShowDelete() ? this.showDelete() : this.hideDelete();\n\t\t},\n\n\t\tisShowDelete: function()\n\t\t{\n\t\t\tvar squares = this.getSquares();\n\t\t\treturn this.getInputValue() || (BX.type.isArray(squares) && squares.length);\n\t\t},\n\n\t\tgetField: function()\n\t\t{\n\t\t\treturn this.field;\n\t\t},\n\n\t\tgetInput: function()\n\t\t{\n\t\t\tvar type, types;\n\n\t\t\tif (!BX.type.isDomNode(this.input))\n\t\t\t{\n\t\t\t\ttype = this.getType();\n\t\t\t\ttypes = this.parent.types;\n\n\t\t\t\tif (type === types.DATE)\n\t\t\t\t{\n\t\t\t\t\tthis.input = BX.Filter.Utils.getByClass(this.getField(), this.parent.settings.classDateInput);\n\t\t\t\t}\n\n\t\t\t\tif (type === types.NUMBER || type === 'number')\n\t\t\t\t{\n\t\t\t\t\tthis.input = BX.Filter.Utils.getByClass(this.getField(), this.parent.settings.classNumberInput);\n\t\t\t\t}\n\n\t\t\t\tif (type === types.STRING)\n\t\t\t\t{\n\t\t\t\t\tthis.input = BX.Filter.Utils.getByClass(this.getField(), this.parent.settings.classStringInput);\n\t\t\t\t}\n\n\t\t\t\tif (type === types.CUSTOM_ENTITY)\n\t\t\t\t{\n\t\t\t\t\tthis.input = BX.Filter.Utils.getBySelector(this.getField(), 'input[type=\"hidden\"]');\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn this.input;\n\t\t},\n\n\t\tgetDeleteButton: function()\n\t\t{\n\t\t\tif (!BX.type.isDomNode(this.deleteButton))\n\t\t\t{\n\t\t\t\tthis.deleteButton = BX.Filter.Utils.getByClass(this.getField(), this.parent.settings.classValueDelete);\n\t\t\t}\n\n\t\t\treturn this.deleteButton;\n\t\t},\n\n\t\tgetSquares: function()\n\t\t{\n\t\t\treturn BX.Filter.Utils.getByClass(this.getField(), this.parent.settings.classSquare);\n\t\t},\n\n\t\tbind: function()\n\t\t{\n\t\t\tif (this.getType() !== this.parent.types.MULTI_SELECT && this.getType() !== this.parent.types.SELECT)\n\t\t\t{\n\t\t\t\tBX.bind(this.getDeleteButton(), 'click', BX.delegate(this._onDeleteClick, this));\n\t\t\t\tBX.bind(this.getInput(), 'input', BX.delegate(this._onInput, this));\n\t\t\t}\n\t\t},\n\n\t\tclearInput: function()\n\t\t{\n\t\t\tvar input = this.getInput();\n\n\t\t\tif (BX.type.isDomNode(input))\n\t\t\t{\n\t\t\t\tinput.value = '';\n\t\t\t}\n\t\t},\n\n\t\thideDelete: function()\n\t\t{\n\t\t\tvar deleteButton = this.getDeleteButton();\n\n\t\t\tif (BX.type.isDomNode(deleteButton))\n\t\t\t{\n\t\t\t\tBX.addClass(deleteButton, this.parent.settings.classHide);\n\t\t\t}\n\t\t},\n\n\t\tshowDelete: function()\n\t\t{\n\t\t\tvar deleteButton = this.getDeleteButton();\n\n\t\t\tif (BX.type.isDomNode(deleteButton))\n\t\t\t{\n\t\t\t\tBX.removeClass(deleteButton, this.parent.settings.classHide);\n\t\t\t}\n\t\t},\n\n\t\tremoveSquares: function()\n\t\t{\n\t\t\tvar squares = this.getSquares();\n\n\t\t\tif (BX.type.isArray(squares) && squares.length)\n\t\t\t{\n\t\t\t\tsquares.forEach(function(square) {\n\t\t\t\t\tBX.remove(square);\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\n\t\t_onDeleteClick: function()\n\t\t{\n\t\t\tthis.removeSquares();\n\t\t\tthis.clearInput();\n\t\t\tthis.hideDelete();\n\t\t},\n\n\t\t_onInput: function()\n\t\t{\n\t\t\tthis.getInputValue() ? this.showDelete() : this.hideDelete();\n\t\t},\n\n\t\tgetInputValue: function()\n\t\t{\n\t\t\tvar result = '';\n\t\t\tvar input = this.getInput();\n\n\t\t\tif (BX.type.isDomNode(input))\n\t\t\t{\n\t\t\t\tresult = input.value;\n\t\t\t}\n\n\t\t\treturn result;\n\t\t},\n\n\t\tgetType: function()\n\t\t{\n\t\t\tif (!BX.type.isNotEmptyString(this.type))\n\t\t\t{\n\t\t\t\tthis.type = BX.data(this.getField(), 'type');\n\t\t\t}\n\n\t\t\treturn this.type;\n\t\t}\n\t};\n\n})();",";(function() {\n\t'use strict';\n\n\tBX.namespace('BX.Main.ui');\n\n\tBX.Main.ui.CustomEntity = function()\n\t{\n\t\tthis.field = null;\n\t\tthis.labelInput = null;\n\t\tthis.hiddenInput = null;\n\t\tthis.popupContainer = null;\n\t\tthis.inputClass = 'main-ui-control-string';\n\t\tthis.squareClass = 'main-ui-square';\n\t\tthis.multiple = null;\n\t};\n\n\n\t/**\n\t * @static\n\t * @param {HTMLElement} field\n\t * @return {boolean}\n\t */\n\tBX.Main.ui.CustomEntity.isMultiple = function(field)\n\t{\n\t\tif (!!field && !BX.hasClass(field, 'main-ui-control-entity'))\n\t\t{\n\t\t\tfield = BX.Filter.Utils.getByClass(field, 'main-ui-control-entity');\n\t\t}\n\n\t\treturn !!field && JSON.parse(BX.data(field, 'multiple'));\n\t};\n\n\n\t//noinspection JSUnusedGlobalSymbols\n\tBX.Main.ui.CustomEntity.prototype = {\n\t\tsetField: function(field)\n\t\t{\n\t\t\tif (this.field !== field)\n\t\t\t{\n\t\t\t\tthis.field = field;\n\t\t\t\tthis.reset();\n\t\t\t}\n\t\t},\n\n\t\tisMultiple: function()\n\t\t{\n\t\t\treturn BX.Main.ui.CustomEntity.isMultiple(this.getField());\n\t\t},\n\n\t\treset: function()\n\t\t{\n\t\t\tthis.labelInput = null;\n\t\t\tthis.hiddenInput = null;\n\t\t},\n\n\t\tgetField: function()\n\t\t{\n\t\t\treturn this.field;\n\t\t},\n\n\t\tgetId: function()\n\t\t{\n\t\t\tvar hiddenNode = this.getHiddenNode();\n\t\t\tvar id = null;\n\n\t\t\tif (BX.type.isDomNode(hiddenNode))\n\t\t\t{\n\t\t\t\tid = hiddenNode.name;\n\t\t\t}\n\n\t\t\treturn id;\n\t\t},\n\n\t\tgetLabelNode: function()\n\t\t{\n\t\t\tif (!BX.type.isDomNode(this.labelInput))\n\t\t\t{\n\t\t\t\tthis.labelInput = BX.Filter.Utils.getBySelector(this.getField(), '.'+this.inputClass+'[type=\"text\"]');\n\t\t\t}\n\n\t\t\treturn this.labelInput;\n\t\t},\n\n\t\tgetHiddenNode: function()\n\t\t{\n\t\t\tif (!BX.type.isDomNode(this.hiddenInput))\n\t\t\t{\n\t\t\t\tthis.hiddenInput = BX.Filter.Utils.getBySelector(this.getField(), '.'+this.inputClass+'[type=\"hidden\"]');\n\t\t\t}\n\n\t\t\treturn this.hiddenInput;\n\t\t},\n\n\t\tgetSquareByValue: function(value)\n\t\t{\n\t\t\treturn BX.Filter.Utils.getBySelector(this.getField(), [\n\t\t\t\t'[data-item*=\":'+BX.util.jsencode(value)+'}\"]',\n\t\t\t\t'[data-item*=\":\\\\\"'+BX.util.jsencode(value)+'\\\\\"}\"]'\n\t\t\t].join(', '));\n\t\t},\n\n\t\tgetSquares: function()\n\t\t{\n\t\t\treturn BX.Filter.Utils.getByClass(this.getField(), this.squareClass, true);\n\t\t},\n\n\t\tremoveSquares: function()\n\t\t{\n\t\t\tthis.getSquares().forEach(BX.remove);\n\t\t},\n\n\t\tsetSquare: function(label, value)\n\t\t{\n\t\t\tvar field = this.getField();\n\t\t\tvar squareData = {\n\t\t\t\tblock: 'main-ui-square',\n\t\t\t\tname: label,\n\t\t\t\titem: {\n\t\t\t\t\t'_label': label,\n\t\t\t\t\t'_value': value\n\t\t\t\t}\n\t\t\t};\n\t\t\tvar square = BX.decl(squareData);\n\t\t\tvar squares = this.getSquares();\n\n\t\t\tif (!squares.length)\n\t\t\t{\n\t\t\t\tBX.prepend(square, field);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tBX.insertAfter(square, squares[squares.length-1]);\n\t\t\t}\n\t\t},\n\n\t\tgetCurrentValues: function()\n\t\t{\n\t\t\tvar squares = this.getSquares();\n\t\t\tvar data, result;\n\t\t\tif(this.isMultiple())\n\t\t\t{\n\t\t\t\tresult = [];\n\t\t\t\tfor(var i = 0, length = squares.length; i < length; i++)\n\t\t\t\t{\n\t\t\t\t\ttry\n\t\t\t\t\t{\n\t\t\t\t\t\tdata = JSON.parse(BX.data(squares[i], 'item'));\n\t\t\t\t\t\tresult.push({ label: data._label, value: data._value });\n\t\t\t\t\t}\n\t\t\t\t\tcatch (ex)\n\t\t\t\t\t{\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif(squares.length === 0)\n\t\t\t\t{\n\t\t\t\t\tresult = { label: '', value: '' };\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\ttry\n\t\t\t\t\t{\n\t\t\t\t\t\tdata = JSON.parse(BX.data(squares[0], 'item'));\n\t\t\t\t\t\tresult =  { label: data._label, value: data._value };\n\t\t\t\t\t}\n\t\t\t\t\tcatch (ex)\n\t\t\t\t\t{\n\t\t\t\t\t\tresult = { label: '', value: '' };\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn result;\n\t\t},\n\n\t\tsetData: function(label, value)\n\t\t{\n\t\t\treturn this.isMultiple() ? this.setMultipleData(label, value) : this.setSingleData(label, value);\n\t\t},\n\n\t\tsetSingleData: function(label, value)\n\t\t{\n\t\t\tvar hiddenNode = this.getHiddenNode();\n\t\t\tthis.removeSquares();\n\t\t\tthis.setSquare(label, value);\n\n\t\t\tif (BX.type.isDomNode(hiddenNode))\n\t\t\t{\n\t\t\t\thiddenNode.value = value;\n\t\t\t\tBX.fireEvent(hiddenNode, 'input');\n\t\t\t}\n\t\t},\n\n\t\tsetMultipleData: function(items, value)\n\t\t{\n\t\t\tvar values = [];\n\t\t\tvar hiddenNode = this.getHiddenNode();\n\n\t\t\tif (BX.type.isArray(items))\n\t\t\t{\n\t\t\t\tthis.removeSquares();\n\n\t\t\t\tif (BX.type.isArray(items))\n\t\t\t\t{\n\t\t\t\t\titems.forEach(function(item) {\n\t\t\t\t\t\tvalues.push(item.value);\n\t\t\t\t\t\tthis.setSquare(item.label, item.value);\n\t\t\t\t\t}, this);\n\n\t\t\t\t\tif (BX.type.isDomNode(hiddenNode))\n\t\t\t\t\t{\n\t\t\t\t\t\thiddenNode.value = JSON.stringify(values);\n\t\t\t\t\t\tBX.fireEvent(hiddenNode, 'input');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!BX.type.isArray(items) && value !== null)\n\t\t\t{\n\t\t\t\tif (!this.getSquareByValue(value))\n\t\t\t\t{\n\t\t\t\t\tthis.setSquare(items, value);\n\n\t\t\t\t\tthis.getSquares().forEach(function(square) {\n\t\t\t\t\t\tvar squareData = JSON.parse(BX.data(square, 'item'));\n\t\t\t\t\t\tif (BX.type.isPlainObject(squareData))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvalues.push(squareData._value);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\thiddenNode.value = JSON.stringify(values);\n\t\t\t\t\tBX.fireEvent(hiddenNode, 'input');\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tsetPopupContainer: function(container)\n\t\t{\n\t\t\tif (BX.type.isDomNode(container))\n\t\t\t{\n\t\t\t\tthis.popupContainer = container;\n\t\t\t}\n\t\t},\n\n\t\tgetPopupContainer: function()\n\t\t{\n\t\t\treturn this.popupContainer;\n\t\t}\n\t};\n})();",";(function() {\n\t'use strict';\n\n\tBX.namespace('BX.Filter');\n\n\t/**\n\t * Filter search block class\n\t * @param parent\n\t * @constructor\n\t */\n\tBX.Filter.Search = function(parent)\n\t{\n\t\tthis.parent = null;\n\t\tthis.container = null;\n\t\tthis.input = null;\n\t\tthis.preset = null;\n\t\tthis.buttonsContainer = null;\n\t\tthis.delay = 800;\n\t\tthis.timeout = null;\n\t\tthis.init(parent);\n\t};\n\tBX.Filter.Search.prototype = {\n\t\tinit: function(parent)\n\t\t{\n\t\t\tthis.parent = parent;\n\t\t\tBX.bind(this.getInput(), 'input', BX.delegate(this._onInputWithoutDebounce, this));\n\n\t\t\tif (this.parent.getParam('ENABLE_LIVE_SEARCH'))\n\t\t\t{\n\t\t\t\tBX.bind(this.getInput(), 'input', BX.debounce(this._onInput, this.delay, this));\n\t\t\t}\n\n\t\t\tBX.bind(this.getInput(), 'keydown', BX.delegate(this._onKeyDown, this));\n\t\t\tBX.bind(this.getFindButton(), 'click', BX.delegate(this._onSearchClick, this));\n\t\t\tBX.bind(this.getContainer(), 'click', BX.delegate(this._onSearchContainerClick, this));\n\t\t\tthis.removeAutofocus();\n\t\t\tthis.firstInit = true;\n\t\t},\n\n\n\t\t/**\n\t\t * Removes autofocus attr from search input\n\t\t */\n\t\tremoveAutofocus: function()\n\t\t{\n\t\t\tvar input = this.getInput();\n\n\t\t\tif (!!input)\n\t\t\t{\n\t\t\t\tinput.blur();\n\t\t\t\tinput.autofocus = null;\n\t\t\t}\n\t\t},\n\n\n\t\tgetFindButton: function()\n\t\t{\n\t\t\tif (!BX.type.isDomNode(this.findButton))\n\t\t\t{\n\t\t\t\tthis.findButton = BX.Filter.Utils.getByClass(this.getContainer(), this.parent.settings.classSearchButton);\n\t\t\t}\n\n\t\t\treturn this.findButton;\n\t\t},\n\n\t\t_onSearchClick: function()\n\t\t{\n\t\t\tthis.apply();\n\t\t},\n\n\t\tselectSquare: function(square)\n\t\t{\n\t\t\t!!square && BX.addClass(square, this.parent.settings.classSquareSelected);\n\t\t},\n\n\t\tselectSquares: function()\n\t\t{\n\t\t\tthis.getSquares().forEach(this.selectSquare, this);\n\t\t},\n\n\t\tunselectSquare: function(square)\n\t\t{\n\t\t\t!!square && BX.removeClass(square, this.parent.settings.classSquareSelected);\n\t\t},\n\n\t\tunselectSquares: function()\n\t\t{\n\t\t\tthis.getSquares().forEach(this.unselectSquare, this);\n\t\t},\n\n\t\tremoveSquares: function()\n\t\t{\n\t\t\tthis.getSquares().forEach(this.removeSquare, this);\n\t\t},\n\n\t\tisSquaresSelected: function()\n\t\t{\n\t\t\tvar squares = this.getSquares();\n\t\t\treturn squares.length && squares.every(this.isSquareSelected, this);\n\t\t},\n\n\t\tisSquareSelected: function(square)\n\t\t{\n\t\t\treturn !!square && BX.hasClass(square, this.parent.settings.classSquareSelected);\n\t\t},\n\n\t\tgetLastSquare: function()\n\t\t{\n\t\t\tvar squares = this.getSquares();\n\t\t\treturn !!squares ? squares[squares.length-1] : null;\n\t\t},\n\n\t\tisTextSelected: function()\n\t\t{\n\t\t\tvar searchStringLength = this.getSearchString().length;\n\t\t\tvar searchInput = this.getInput();\n\t\t\tvar selectionStart = searchInput.selectionStart;\n\t\t\tvar selectionEnd = searchInput.selectionEnd;\n\n\t\t\treturn selectionStart === 0 && selectionEnd !== 0 && selectionEnd === searchStringLength;\n\t\t},\n\n\t\tisSelectionStart: function()\n\t\t{\n\t\t\tvar searchInput = this.getInput();\n\t\t\tvar selectionStart = searchInput.selectionStart;\n\t\t\tvar selectionEnd = searchInput.selectionEnd;\n\n\t\t\treturn selectionStart === 0 && selectionEnd === 0;\n\t\t},\n\n\t\tisSquareRemoveButton: function(node)\n\t\t{\n\t\t\treturn !!node && BX.hasClass(node, this.parent.settings.classSquareDelete);\n\t\t},\n\n\t\tisClearButton: function(node)\n\t\t{\n\t\t\treturn !!node && BX.hasClass(node, this.parent.settings.classClearSearchValueButton);\n\t\t},\n\n\t\tgetClearButton: function()\n\t\t{\n\t\t\treturn this.getContainer().querySelector(\".\" + this.parent.settings.classClearSearchValueButton);\n\t\t},\n\n\t\tisSearchButton: function(node)\n\t\t{\n\t\t\treturn !!node && BX.hasClass(node, this.parent.settings.classSearchButton);\n\t\t},\n\n\n\t\t/**\n\t\t * Adjust focus on search input\n\t\t */\n\t\tadjustFocus: function()\n\t\t{\n\t\t\tif (!BX.browser.IsMobile())\n\t\t\t{\n\t\t\t\tvar searchInput = this.getInput();\n\n\t\t\t\tif (document.activeElement !== searchInput && window.scrollY < BX.pos(searchInput).top)\n\t\t\t\t{\n\t\t\t\t\t//Puts cursor after last character\n\t\t\t\t\t//noinspection SillyAssignmentJS\n\t\t\t\t\tsearchInput.value = searchInput.value;\n\t\t\t\t\tsearchInput.blur();\n\t\t\t\t\tsearchInput.focus();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tfindSquareByChild: function(childNode)\n\t\t{\n\t\t\treturn BX.findParent(childNode, {className: this.parent.settings.classSquare}, true, false);\n\t\t},\n\n\t\t/**\n\t\t * @param {HTMLElement} square\n\t\t */\n\t\tgetSquareData: function(square)\n\t\t{\n\t\t\tvar rawData = BX.data(square, 'item');\n\t\t\treturn !!square && !!rawData ? JSON.parse(rawData) : null;\n\t\t},\n\n\t\t/**\n\t\t * @param {HTMLElement} square\n\t\t * @return {boolean}\n\t\t */\n\t\tisSquareControl: function(square)\n\t\t{\n\t\t\tvar squareData = this.getSquareData(square);\n\t\t\treturn !!squareData && (squareData.type === 'control' || BX.type.isArray(squareData));\n\t\t},\n\n\t\tonPresetSquareRemove: function()\n\t\t{\n\t\t\tvar Filter = this.parent;\n\t\t\tvar Preset = Filter.getPreset();\n\t\t\tvar currentPresetId = Preset.getCurrentPresetId();\n\t\t\tvar isResetToDefaultMode = Filter.getParam('RESET_TO_DEFAULT_MODE');\n\t\t\tvar isValueRequiredModeMail = Filter.getParam('VALUE_REQUIRED');\n\t\t\tvar isPinned = Preset.isPinned(currentPresetId);\n\t\t\tvar squares = this.getSquares();\n\n\t\t\tif (squares.length === 1)\n\t\t\t{\n\t\t\t\tif (isValueRequiredModeMail && isPinned)\n\t\t\t\t{\n\t\t\t\t\tthis.parent.showPopup();\n\t\t\t\t\tthis.adjustPlaceholder();\n\t\t\t\t\tthis.parent.getPreset().deactivateAllPresets();\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tif ((isResetToDefaultMode && isPinned) || !isResetToDefaultMode)\n\t\t\t\t\t{\n\t\t\t\t\t\tvar resetWithoutSearch = true;\n\t\t\t\t\t\tthis.lastPromise = Filter.resetFilter(resetWithoutSearch);\n\t\t\t\t\t\tFilter.closePopup();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (isResetToDefaultMode && !isPinned)\n\t\t\t\t{\n\t\t\t\t\tthis.lastPromise = Filter.getPreset().applyPinnedPreset();\n\t\t\t\t}\n\n\n\t\t\t}\n\n\t\t\tif (squares.length > 1)\n\t\t\t{\n\t\t\t\tvar currentPreset = Preset.getPreset(Preset.getCurrentPresetId());\n\t\t\t\tvar tmpPreset = Preset.getPreset('tmp_filter');\n\n\t\t\t\ttmpPreset.FIELDS = BX.clone(currentPreset.ADDITIONAL);\n\t\t\t\tcurrentPreset.ADDITIONAL = [];\n\t\t\t\tPreset.deactivateAllPresets();\n\t\t\t\tPreset.applyPreset('tmp_filter');\n\t\t\t\tFilter.applyFilter();\n\t\t\t}\n\t\t},\n\n\t\tonControlSquareRemove: function(square)\n\t\t{\n\t\t\tvar Filter = this.parent;\n\t\t\tvar Preset = Filter.getPreset();\n\t\t\tvar isResetToDefaultMode = Filter.getParam('RESET_TO_DEFAULT_MODE');\n\t\t\tvar isValueRequiredModeMail = Filter.getParam('VALUE_REQUIRED');\n\t\t\tvar squareData;\n\n\t\t\tif (isResetToDefaultMode && this.getSquares().length === 1)\n\t\t\t{\n\t\t\t\tif (isValueRequiredModeMail)\n\t\t\t\t{\n\t\t\t\t\tsquareData = this.getSquareData(square);\n\t\t\t\t\tFilter.clearControls(squareData);\n\n\t\t\t\t\tthis.parent.showPopup();\n\t\t\t\t\tthis.adjustPlaceholder();\n\t\t\t\t\tthis.parent.getPreset().deactivateAllPresets();\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.lastPromise = Filter.getPreset().applyPinnedPreset();\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tsquareData = this.getSquareData(square);\n\t\t\t\tFilter.clearControls(squareData);\n\t\t\t\tFilter.closePopup();\n\n\t\t\t\tif (BX.type.isArray(squareData))\n\t\t\t\t{\n\t\t\t\t\tsquareData.forEach(function(square) {\n\t\t\t\t\t\tPreset.removeAdditionalField(square.name);\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tif (BX.type.isPlainObject(squareData))\n\t\t\t\t{\n\t\t\t\t\tPreset.removeAdditionalField(squareData.name);\n\t\t\t\t}\n\n\t\t\t\tthis.apply();\n\t\t\t}\n\t\t},\n\n\t\tonValueRequiredSquareRemove: function()\n\t\t{\n\t\t\tvar Filter = this.parent;\n\t\t\tFilter.getPreset().deactivateAllPresets();\n\t\t\tFilter.showPopup();\n\t\t\tthis.adjustPlaceholder();\n\t\t},\n\n\t\t/**\n\t\t * @param {HTMLElement} square\n\t\t */\n\t\tcomplexSquareRemove: function(square)\n\t\t{\n\t\t\tvar isValueRequiredMode = this.parent.getParam('VALUE_REQUIRED_MODE');\n\t\t\tvar isPresetSquare = !this.isSquareControl(square);\n\n\t\t\tif (isValueRequiredMode)\n\t\t\t{\n\t\t\t\tthis.onValueRequiredSquareRemove();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (isPresetSquare)\n\t\t\t\t{\n\t\t\t\t\tthis.onPresetSquareRemove();\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.onControlSquareRemove(square);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.removeSquare(square);\n\t\t\tthis.adjustClearButton();\n\t\t},\n\n\t\tadjustClearButton: function()\n\t\t{\n\t\t\t!!this.getLastSquare() ? this.showClearButton() : this.hideClearButton();\n\t\t},\n\n\t\t/**\n\t\t * @param {HTMLElement} square\n\t\t */\n\t\tremoveSquare: function(square)\n\t\t{\n\t\t\t!!square && BX.remove(square);\n\t\t},\n\n\t\t_onSearchContainerClick: function(event)\n\t\t{\n\t\t\tvar Filter = this.parent;\n\n\t\t\tif (this.isClearButton(event.target))\n\t\t\t{\n\t\t\t\tif (!Filter.getParam('VALUE_REQUIRED'))\n\t\t\t\t{\n\t\t\t\t\tif (!Filter.getParam('VALUE_REQUIRED_MODE'))\n\t\t\t\t\t{\n\t\t\t\t\t\tif (Filter.getParam('RESET_TO_DEFAULT_MODE'))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.clearInput();\n\t\t\t\t\t\t\tthis.lastPromise = Filter.getPreset().applyPinnedPreset();\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tFilter.resetFilter();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tFilter.closePopup();\n\t\t\t\t\t\tthis.adjustFocus();\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.removeSquares();\n\t\t\t\t\t\tFilter.showPopup();\n\t\t\t\t\t\tthis.adjustPlaceholder();\n\t\t\t\t\t\tthis.hideClearButton();\n\t\t\t\t\t\tFilter.getPreset().deactivateAllPresets();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tvar isPinned = Filter.getPreset().isPinned(\n\t\t\t\t\t\tFilter.getPreset().getCurrentPresetId()\n\t\t\t\t\t);\n\n\t\t\t\t\tif (isPinned || Filter.getPreset().getCurrentPresetId() === 'tmp_filter')\n\t\t\t\t\t{\n\t\t\t\t\t\tvar presetData = Filter.getPreset().getPreset(\n\t\t\t\t\t\t\tFilter.getPreset().getCurrentPresetId()\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tif (presetData.ADDITIONAL.length)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tpresetData.ADDITIONAL = [];\n\t\t\t\t\t\t\tthis.lastPromise = Filter.getPreset().applyPreset(Filter.getPreset().getCurrentPresetId());\n\t\t\t\t\t\t\tthis.apply();\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.removeSquares();\n\t\t\t\t\t\t\tFilter.showPopup();\n\t\t\t\t\t\t\tthis.adjustPlaceholder();\n\t\t\t\t\t\t\tthis.hideClearButton();\n\t\t\t\t\t\t\tFilter.getPreset().deactivateAllPresets();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tif (Filter.getParam('RESET_TO_DEFAULT_MODE'))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.lastPromise = Filter.getPreset().applyPinnedPreset();\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tFilter.resetFilter();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tFilter.closePopup();\n\t\t\t\t\t\tthis.adjustFocus();\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.clearInput();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\telse if (this.isSearchButton(event.target))\n\t\t\t{\n\t\t\t\tthis.apply();\n\t\t\t\tthis.adjustFocus();\n\t\t\t}\n\n\t\t\telse if (this.isSquareRemoveButton(event.target))\n\t\t\t{\n\t\t\t\tvar square = this.findSquareByChild(event.target);\n\t\t\t\tthis.complexSquareRemove(square);\n\t\t\t\tthis.adjustFocus();\n\t\t\t}\n\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (!Filter.getPopup().isShown())\n\t\t\t\t{\n\t\t\t\t\tFilter.showPopup();\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tvar input = this.getInput();\n\t\t\t\t\tvar start = input.selectionStart;\n\t\t\t\t\tvar end = input.selectionEnd;\n\t\t\t\t\tvar searchLength = this.getSearchString().length;\n\n\t\t\t\t\tif (!(searchLength && start === 0 && end === searchLength))\n\t\t\t\t\t{\n\t\t\t\t\t\tif (Filter.getParam('VALUE_REQUIRED'))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (!this.getSquares().length)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.lastPromise = Filter.getPreset().applyPinnedPreset();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tFilter.closePopup();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tFilter.closePopup();\n\n\t\t\t\t\t\t\tif (Filter.getParam('VALUE_REQUIRED_MODE'))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tFilter.restoreRemovedPreset();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t_onKeyDown: function(event)\n\t\t{\n\t\t\tvar utils = BX.Filter.Utils;\n\t\t\tvar parent = this.parent;\n\n\t\t\tif (utils.isKey(event, 'enter'))\n\t\t\t{\n\t\t\t\tif (parent.getParam('VALUE_REQUIRED'))\n\t\t\t\t{\n\t\t\t\t\tif (!this.getSquares().length)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.parent.getPreset().applyPinnedPreset();\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.apply();\n\t\t\t\t\t\tthis.firstInit = false;\n\t\t\t\t\t\tthis.lastSearchString = this.getSearchString();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.apply();\n\t\t\t\t\tthis.firstInit = false;\n\t\t\t\t\tthis.lastSearchString = this.getSearchString();\n\t\t\t\t}\n\n\t\t\t\tparent.closePopup();\n\t\t\t}\n\n\t\t\tif (utils.isKey(event, 'tab') || utils.isKey(event, 'downArrow'))\n\t\t\t{\n\t\t\t\tparent.showPopup();\n\t\t\t\tparent.adjustFocus();\n\t\t\t\tthis.unselectSquares();\n\t\t\t}\n\n\t\t\tif (utils.isKey(event, 'upArrow'))\n\t\t\t{\n\t\t\t\tparent.closePopup();\n\n\t\t\t\tif (parent.getParam('VALUE_REQUIRED_MODE'))\n\t\t\t\t{\n\t\t\t\t\tthis.parent.restoreRemovedPreset();\n\t\t\t\t}\n\n\t\t\t\tif (parent.getParam('VALUE_REQUIRED'))\n\t\t\t\t{\n\t\t\t\t\tif (!this.getSquares().length)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.parent.getPreset().applyPinnedPreset();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (utils.isKey(event, 'a') && event.metaKey || utils.isKey(event, 'a') && event.ctrlKey)\n\t\t\t{\n\t\t\t\tthis.selectSquares();\n\t\t\t}\n\n\t\t\tif (utils.isKey(event, 'backspace') && this.isTextSelected() && this.isSquaresSelected())\n\t\t\t{\n\t\t\t\tclearTimeout(this.timeout);\n\n\t\t\t\tif (this.parent.getParam('VALUE_REQUIRED'))\n\t\t\t\t{\n\t\t\t\t\tvar isPinned = this.parent.getPreset().isPinned(\n\t\t\t\t\t\tthis.parent.getPreset().getCurrentPresetId()\n\t\t\t\t\t);\n\n\t\t\t\t\tif (isPinned)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.removeSquares();\n\t\t\t\t\t\tthis.parent.showPopup();\n\t\t\t\t\t\tthis.adjustPlaceholder();\n\t\t\t\t\t\tthis.hideClearButton();\n\t\t\t\t\t\tthis.parent.getPreset().deactivateAllPresets();\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tif (this.parent.getParam('RESET_TO_DEFAULT_MODE'))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.lastPromise = this.parent.getPreset().applyPinnedPreset();\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.parent.resetFilter();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.parent.closePopup();\n\t\t\t\t\t\tthis.adjustFocus();\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.clearInput();\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tif (this.parent.getParam('RESET_TO_DEFAULT_MODE'))\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.lastPromise = this.parent.getPreset().applyPinnedPreset();\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.lastPromise = this.parent.resetFilter();\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.parent.closePopup();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (utils.isKey(event, 'backspace') && this.isSelectionStart())\n\t\t\t{\n\t\t\t\tclearTimeout(this.timeout);\n\t\t\t\tvar square = this.getLastSquare();\n\n\t\t\t\tthis.isSquareSelected(square) ? this.complexSquareRemove(square) : this.selectSquare(square);\n\t\t\t}\n\n\t\t\tif (!utils.isKey(event, 'backspace') && !event.metaKey && this.isSquaresSelected())\n\t\t\t{\n\t\t\t\tthis.unselectSquares();\n\t\t\t}\n\t\t},\n\n\t\tgetSearchString: function()\n\t\t{\n\t\t\tvar input = this.getInput();\n\t\t\treturn !!input ? input.value : '';\n\t\t},\n\n\t\tgetSquares: function()\n\t\t{\n\t\t\treturn BX.Filter.Utils.getByClass(this.getContainer(), this.parent.settings.classSquare, true);\n\t\t},\n\n\t\tadjustPlaceholder: function()\n\t\t{\n\t\t\tif (this.parent.getParam(\"LIMITS_ENABLED\"))\n\t\t\t{\n\t\t\t\tthis.setInputPlaceholder(this.parent.getParam('MAIN_UI_FILTER__PLACEHOLDER_LIMITS_EXCEEDED'));\n\t\t\t}\n\t\t\telse if (this.parent.getParam(\"DISABLE_SEARCH\") || !this.parent.settings.get('SEARCH'))\n\t\t\t{\n\t\t\t\tthis.setInputPlaceholder(this.parent.getParam('MAIN_UI_FILTER__PLACEHOLDER'));\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.setInputPlaceholder(this.parent.getParam('MAIN_UI_FILTER__PLACEHOLDER_DEFAULT'));\n\t\t\t}\n\t\t},\n\n\t\tisResolvedRequest: function()\n\t\t{\n\t\t\treturn !this.lastPromise || !!this.lastPromise && this.lastPromise.state;\n\t\t},\n\n\t\t/**\n\t\t * Calls BX.Main.Filter.applyFilter\n\t\t * @return {BX.Promise}\n\t\t */\n\t\tapply: function()\n\t\t{\n\t\t\tif (this.isResolvedRequest())\n\t\t\t{\n\t\t\t\tthis.lastPromise = this.parent._onFindButtonClick();\n\t\t\t}\n\n\t\t\treturn this.lastPromise;\n\t\t},\n\n\t\t/**\n\t\t * Calls BX.Main.Filter.resetFilter()\n\t\t * @return {BX.Promise}\n\t\t */\n\t\treset: function()\n\t\t{\n\t\t\tif (this.isResolvedRequest())\n\t\t\t{\n\t\t\t\tthis.parent.getSearch().removePreset();\n\t\t\t\tthis.parent.getPreset().deactivateAllPresets();\n\t\t\t\tthis.parent.getPreset().resetPreset(true);\n\n\t\t\t\tthis.timeout = setTimeout(BX.delegate(function() {\n\t\t\t\t\tthis.lastPromise = this.parent.resetFilter();\n\t\t\t\t}, this), this.delay);\n\t\t\t}\n\n\t\t\treturn this.lastPromise;\n\t\t},\n\n\t\t_onInputWithoutDebounce: function()\n\t\t{\n\t\t\tclearTimeout(this.timeout);\n\n\t\t\tvar searchString = this.getSearchString();\n\t\t\tthis.lastSearchString = !!this.lastSearchString ? this.lastSearchString : searchString;\n\n\t\t\tif (searchString !== this.lastSearchString &&\n\t\t\t\t(!this.parent.isIe() || !this.firstInit))\n\t\t\t{\n\t\t\t\tif (this.parent.getParam('ENABLE_LIVE_SEARCH'))\n\t\t\t\t{\n\t\t\t\t\tthis.parent.showGridAnimation();\n\t\t\t\t\tBX.onCustomEvent(window, 'BX.Filter.Search:input', [this.parent.params.FILTER_ID, searchString]);\n\t\t\t\t}\n\n\t\t\t\tthis.parent.getPopup().isShown() && this.parent.closePopup();\n\t\t\t}\n\n\t\t\tif (searchString)\n\t\t\t{\n\t\t\t\tthis.showClearButton();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (!this.getSquares().length && this.lastSearchString !== searchString)\n\t\t\t\t{\n\t\t\t\t\tthis.hideClearButton();\n\t\t\t\t\tthis.adjustPlaceholder();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t_onInput: function()\n\t\t{\n\t\t\tvar searchString = this.getSearchString();\n\n\t\t\tif (searchString !== this.lastSearchString && (!this.parent.isIe() || !this.firstInit))\n\t\t\t{\n\t\t\t\tthis.apply();\n\t\t\t}\n\n\t\t\tthis.firstInit = false;\n\t\t\tthis.lastSearchString = searchString;\n\t\t},\n\n\t\tgetButtonsContainer: function()\n\t\t{\n\t\t\tif (!BX.type.isDomNode(this.buttonsContainer))\n\t\t\t{\n\t\t\t\tthis.buttonsContainer = BX.Filter.Utils.getByClass(this.getContainer(), this.parent.settings.classSearchButtonsContainer);\n\t\t\t}\n\n\t\t\treturn this.buttonsContainer;\n\t\t},\n\n\t\tshowClearButton: function()\n\t\t{\n\t\t\tBX.addClass(this.getButtonsContainer(), this.parent.settings.classShow);\n\t\t},\n\n\t\thideClearButton: function()\n\t\t{\n\t\t\tBX.removeClass(this.getButtonsContainer(), this.parent.settings.classShow);\n\t\t},\n\n\t\tgetInput: function()\n\t\t{\n\t\t\tvar inputId;\n\n\t\t\tif (!BX.type.isDomNode(this.input))\n\t\t\t{\n\t\t\t\tinputId = [this.parent.getParam('FILTER_ID', ''), '_search'].join('');\n\t\t\t\tthis.input = BX(inputId);\n\t\t\t}\n\n\t\t\treturn this.input;\n\t\t},\n\n\t\tgetContainer: function()\n\t\t{\n\t\t\tvar containerId;\n\n\t\t\tif (!BX.type.isDomNode(this.container))\n\t\t\t{\n\t\t\t\tcontainerId = [this.parent.getParam('FILTER_ID'), '_search_container'].join('');\n\t\t\t\tthis.container = BX(containerId);\n\t\t\t}\n\n\t\t\treturn this.container;\n\t\t},\n\n\t\tsetInputPlaceholder: function(text)\n\t\t{\n\t\t\tvar input = this.getInput();\n\t\t\tinput.placeholder = text;\n\t\t},\n\n\t\tclearInput: function()\n\t\t{\n\t\t\tvar form = this.getInput();\n\n\t\t\tif (BX.type.isDomNode(form))\n\t\t\t{\n\t\t\t\tform.value = null;\n\t\t\t}\n\t\t},\n\n\t\tclearForm: function()\n\t\t{\n\t\t\tthis.clearInput();\n\t\t\tthis.removePreset();\n\t\t},\n\n\t\tmakeSquares: function(squaresData, depth, additional)\n\t\t{\n\t\t\tvar square;\n\t\t\tvar tmpSquare = null;\n\t\t\tvar container = this.getContainer();\n\t\t\tvar result = {squares: [], moreSquares: []};\n\n\t\t\tsquaresData.forEach(function(current, index) {\n\t\t\t\tif (index < depth)\n\t\t\t\t{\n\t\t\t\t\tsquare = BX.decl(current);\n\t\t\t\t\ttmpSquare = tmpSquare || square;\n\n\t\t\t\t\tif (!additional)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (index === 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tBX.prepend(square, container);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tBX.insertAfter(square, tmpSquare);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tvar lastSquare = BX.Filter.Utils.getByClass(this.getContainer(), this.parent.settings.classSquare);\n\t\t\t\t\t\tif (lastSquare)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tBX.insertAfter(square, lastSquare);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tBX.prepend(square, container);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\ttmpSquare = square;\n\t\t\t\t\tresult.squares.push(square);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tresult.moreSquares.push({type: 'control', name: current.value, title: current.title});\n\t\t\t\t}\n\t\t\t}, this);\n\n\t\t\treturn result;\n\t\t},\n\n\t\tsquares: function(fields, depth, additional)\n\t\t{\n\t\t\tvar squaresData, moreSquares, square, squaresWidth, result;\n\t\t\tvar squares = BX.Filter.Utils.getByClass(this.getContainer(), this.parent.settings.classSquare, true);\n\n\t\t\tif (additional)\n\t\t\t{\n\t\t\t\tsquares.forEach(function(current) {\n\t\t\t\t\tvar item = BX.data(current, 'item');\n\n\t\t\t\t\tif (item)\n\t\t\t\t\t{\n\t\t\t\t\t\tBX.remove(current);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tsquares.forEach(BX.remove);\n\t\t\t}\n\n\t\t\tsquaresData = this.prepareSquaresData(fields);\n\t\t\tmoreSquares = this.makeSquares(squaresData, depth, additional);\n\t\t\tsquaresWidth = 0;\n\t\t\tresult = {squaresData: squaresData, width: 0};\n\n\t\t\tif (moreSquares.moreSquares.length)\n\t\t\t{\n\t\t\t\tsquare = {\n\t\t\t\t\tblock: 'main-ui-search-square',\n\t\t\t\t\tname: this.parent.getParam('MAIN_UI_FILTER__AND') + ' ' + this.parent.getParam('MAIN_UI_FILTER__MORE') + ' ' + moreSquares.moreSquares.length,\n\t\t\t\t\titem: moreSquares.moreSquares,\n\t\t\t\t\ttitle: moreSquares.moreSquares.map(function(curr) { return curr.title; }).join(', \\n')\n\t\t\t\t};\n\n\t\t\t\tsquare = BX.decl(square);\n\t\t\t\tmoreSquares.squares.push(square);\n\t\t\t\tBX.insertAfter(square, moreSquares.squares[moreSquares.squares.length-2]);\n\n\t\t\t\tsquaresWidth = moreSquares.squares.reduce(function(prev, curr) {\n\t\t\t\t\treturn prev + BX.width(curr) + (parseFloat(BX.style(curr, 'margin-right')) || 0);\n\t\t\t\t}, 0);\n\t\t\t}\n\n\t\t\tresult.width = squaresWidth;\n\n\t\t\treturn result;\n\t\t},\n\n\t\tsetPreset: function(presetData)\n\t\t{\n\t\t\tvar container = this.getContainer();\n\t\t\tvar square, squares;\n\t\t\tvar squaresResult;\n\n\t\t\tif (BX.type.isPlainObject(presetData))\n\t\t\t{\n\t\t\t\tsquares = BX.Filter.Utils.getByClass(container, this.parent.settings.classSquare, true);\n\t\t\t\tsquares.forEach(BX.remove);\n\n\t\t\t\tpresetData = BX.clone(presetData);\n\t\t\t\tpresetData.ADDITIONAL = presetData.ADDITIONAL || [];\n\t\t\t\tBX.onCustomEvent(window, 'BX.Filter.Search:beforeSquaresUpdate', [presetData, this]);\n\n\t\t\t\tif (presetData.ID !== 'default_filter' && presetData.ID !== 'tmp_filter')\n\t\t\t\t{\n\t\t\t\t\tsquare = BX.decl({\n\t\t\t\t\t\tblock: 'main-ui-search-square',\n\t\t\t\t\t\tname: presetData.TITLE,\n\t\t\t\t\t\tvalue: presetData.ID,\n\t\t\t\t\t\tisPreset: true\n\t\t\t\t\t});\n\n\t\t\t\t\tBX.prepend(square, container);\n\n\t\t\t\t\tif ('ADDITIONAL' in presetData && BX.type.isArray(presetData.ADDITIONAL) && presetData.ADDITIONAL.length)\n\t\t\t\t\t{\n\t\t\t\t\t\tsquaresResult = this.squares(presetData.ADDITIONAL, 1, true);\n\n\t\t\t\t\t\tif ((BX.width(container) - squaresResult.width) < 100)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tsquaresResult = this.squares(presetData.ADDITIONAL, 0, true);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tif ('ADDITIONAL' in presetData && BX.type.isArray(presetData.ADDITIONAL) && presetData.ADDITIONAL.length)\n\t\t\t\t\t{\n\t\t\t\t\t\tpresetData.ADDITIONAL.forEach(function(current, index) {\n\t\t\t\t\t\t\tif (!('ID' in current))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tcurrent.ID = 'ADDITIONAL_ID_'+index;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (!('NAME' in current))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tcurrent.NAME = 'ADDITIONAL_NAME_'+index;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (!('TYPE' in current))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tcurrent.TYPE = 'STRING';\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ('LABEL' in current && 'LABEL' in current)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tpresetData.FIELDS.push(current);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tif (BX.type.isArray(presetData.FIELDS) && presetData.FIELDS.length)\n\t\t\t\t\t{\n\t\t\t\t\t\tsquaresResult = this.squares(presetData.FIELDS, 2);\n\n\t\t\t\t\t\tif ((BX.width(container) - squaresResult.width) < 100)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tsquaresResult = this.squares(presetData.FIELDS, 1);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (squaresResult && BX.type.isArray(squaresResult.squaresData) && squaresResult.squaresData.length || (presetData.ID !== 'default_filter' && presetData.ID !== 'tmp_filter'))\n\t\t\t\t{\n\t\t\t\t\tif (this.parent.getParam(\"LIMITS_ENABLED\"))\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.setInputPlaceholder(this.parent.getParam('MAIN_UI_FILTER__PLACEHOLDER_LIMITS_EXCEEDED'));\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.setInputPlaceholder(this.parent.getParam('MAIN_UI_FILTER__PLACEHOLDER_WITH_FILTER'));\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.showClearButton();\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.adjustPlaceholder();\n\t\t\t\t}\n\n\t\t\t\tif (BX.type.isNotEmptyString(this.parent.getSearch().getInput().value))\n\t\t\t\t{\n\t\t\t\t\tthis.showClearButton();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tprepareSquaresData: function(fields)\n\t\t{\n\t\t\tvar value, tmpValues, title, control;\n\t\t\tvar result = [];\n\n\t\t\tfields = fields.filter(function(current) {\n\t\t\t\treturn (\n\t\t\t\t\t!!current\n\t\t\t\t\t&& this.parent.params.FIELDS.some(function(currentField) {\n\t\t\t\t\t\treturn current.NAME === currentField.NAME;\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t}, this);\n\n\t\t\tfields.map(function(current) {\n\t\t\t\tvalue = null;\n\n\t\t\t\tswitch (current.TYPE)\n\t\t\t\t{\n\t\t\t\t\tcase this.parent.types.DATE : {\n\t\t\t\t\t\tvalue = current.LABEL + ': ' + current.SUB_TYPE.NAME;\n\n\t\t\t\t\t\tif (current.SUB_TYPE.VALUE === this.parent.dateTypes.QUARTER &&\n\t\t\t\t\t\t\tBX.type.isNotEmptyString(current.VALUES._quarter))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvar quarter = current.QUARTERS.filter(function(curr) {\n\t\t\t\t\t\t\t\treturn curr.VALUE == current.VALUES._quarter;\n\t\t\t\t\t\t\t}).map(function(curr) {\n\t\t\t\t\t\t\t\treturn curr.NAME;\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tquarter = quarter.length ? quarter.join('') : '';\n\n\t\t\t\t\t\t\tvalue = current.LABEL + ': ' + quarter + ' ' +\n\t\t\t\t\t\t\t\tthis.parent.getParam('MAIN_UI_FILTER__QUARTER').toLocaleLowerCase() + ' ' +\n\t\t\t\t\t\t\t\tcurrent.VALUES._year;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (current.SUB_TYPE.VALUE === this.parent.dateTypes.YEAR &&\n\t\t\t\t\t\t\tBX.type.isNotEmptyString(current.VALUES._year))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvalue = current.LABEL + ': ' + current.VALUES._year;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (current.SUB_TYPE.VALUE === this.parent.dateTypes.MONTH &&\n\t\t\t\t\t\t\tBX.type.isNotEmptyString(current.VALUES._month))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvar month = current.MONTHS.filter(function(curr) {\n\t\t\t\t\t\t\t\treturn curr.VALUE == current.VALUES._month;\n\t\t\t\t\t\t\t}).map(function(curr) {\n\t\t\t\t\t\t\t\treturn curr.NAME;\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tmonth = month.length ? month.join('') : '';\n\n\t\t\t\t\t\t\tvalue = current.LABEL + ': ' + month + ' ' + current.VALUES._year;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (current.SUB_TYPE.VALUE === this.parent.dateTypes.EXACT &&\n\t\t\t\t\t\t\tBX.type.isNotEmptyString(current.VALUES._from))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvalue = current.LABEL + ': ' + current.VALUES._from;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (current.SUB_TYPE.VALUE === this.parent.dateTypes.RANGE)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (BX.type.isNotEmptyString(current.VALUES._from) && BX.type.isNotEmptyString(current.VALUES._to))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvalue = current.LABEL + ': ' + current.VALUES._from + '-' + current.VALUES._to;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (!BX.type.isNotEmptyString(current.VALUES._from) && BX.type.isNotEmptyString(current.VALUES._to))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvalue = current.LABEL + ': ' + this.parent.getParam('MAIN_UI_FILTER__BEFORE') + ' ' + current.VALUES._to;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (BX.type.isNotEmptyString(current.VALUES._from) && !BX.type.isNotEmptyString(current.VALUES._to))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvalue = current.LABEL + ': ' + this.parent.getParam('MAIN_UI_FILTER__AFTER') + ' ' + current.VALUES._from;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\n\t\t\t\t\t\tif ((current.SUB_TYPE.VALUE === this.parent.dateTypes.NEXT_DAYS ||\n\t\t\t\t\t\t\tcurrent.SUB_TYPE.VALUE === this.parent.dateTypes.PREV_DAYS) &&\n\t\t\t\t\t\t\t!BX.type.isNumber(parseInt(current.VALUES._days)))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvalue = null;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (current.SUB_TYPE.VALUE === this.parent.dateTypes.NEXT_DAYS &&\n\t\t\t\t\t\t\tBX.type.isNumber(parseInt(current.VALUES._days)))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvalue = current.LABEL + ': ' + this.parent.getParam('MAIN_UI_FILTER__DATE_NEXT_DAYS_LABEL').replace('#N#', current.VALUES._days);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (current.SUB_TYPE.VALUE === this.parent.dateTypes.PREV_DAYS &&\n\t\t\t\t\t\t\tBX.type.isNumber(parseInt(current.VALUES._days)))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvalue = current.LABEL + ': ' + this.parent.getParam('MAIN_UI_FILTER__DATE_PREV_DAYS_LABEL').replace('#N#', current.VALUES._days);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (current.SUB_TYPE.VALUE === this.parent.dateTypes.NONE)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvalue = null;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase this.parent.types.CUSTOM_DATE : {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t(BX.type.isArray(current.VALUE.days) && current.VALUE.days.length) ||\n\t\t\t\t\t\t\t(BX.type.isArray(current.VALUE.months) && current.VALUE.months.length) ||\n\t\t\t\t\t\t\t(BX.type.isArray(current.VALUE.years) && current.VALUE.years.length)\n\t\t\t\t\t\t)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvalue = current.LABEL;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase this.parent.types.SELECT : {\n\t\t\t\t\t\tif ((BX.type.isPlainObject(current.VALUE) && current.VALUE.VALUE) || current.STRICT)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvalue = current.LABEL + ': ' + current.VALUE.NAME;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase this.parent.types.MULTI_SELECT : {\n\t\t\t\t\t\tif (BX.type.isArray(current.VALUE) && current.VALUE.length)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttmpValues = [];\n\t\t\t\t\t\t\tvalue = current.LABEL + ': ';\n\t\t\t\t\t\t\tcurrent.VALUE.forEach(function(val, index) {\n\t\t\t\t\t\t\t\tif (index < 2)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttmpValues.push(val.NAME);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tvalue += tmpValues.join(', ');\n\n\t\t\t\t\t\t\tif (current.VALUE.length > 2)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttitle = [];\n\n\t\t\t\t\t\t\t\tcurrent.VALUE.forEach(function(val) {\n\t\t\t\t\t\t\t\t\ttitle.push(val.NAME);\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\tvalue = title.join(', ');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase this.parent.types.NUMBER : {\n\t\t\t\t\t\tif (current.SUB_TYPE.VALUE === 'exact')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (BX.type.isNotEmptyString(current.VALUES._from))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvalue = current.LABEL + ': ' + current.VALUES._from;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvalue = null;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (current.SUB_TYPE.VALUE === 'range')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (BX.type.isNotEmptyString(current.VALUES._from) && BX.type.isNotEmptyString(current.VALUES._to))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvalue = current.LABEL + ': ' + current.VALUES._from + '-' + current.VALUES._to;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (!BX.type.isNotEmptyString(current.VALUES._from) && BX.type.isNotEmptyString(current.VALUES._to))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvalue = current.LABEL + ': ' + this.parent.getParam('MAIN_UI_FILTER__NUMBER_LESS') + ' ' + current.VALUES._to;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (BX.type.isNotEmptyString(current.VALUES._from) && !BX.type.isNotEmptyString(current.VALUES._to))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvalue = current.LABEL + ': ' + this.parent.getParam('MAIN_UI_FILTER__NUMBER_MORE') + ' ' + current.VALUES._from;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvalue = null;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (current.SUB_TYPE.VALUE === 'more')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (BX.type.isNotEmptyString(current.VALUES._from))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvalue = current.LABEL + ': > ';\n\t\t\t\t\t\t\t\tvalue += current.VALUES._from;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (current.SUB_TYPE.VALUE === 'less')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (BX.type.isNotEmptyString(current.VALUES._to))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvalue = current.LABEL + ': < ';\n\t\t\t\t\t\t\t\tvalue += current.VALUES._to;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase this.parent.types.CUSTOM_ENTITY :\n\t\t\t\t\tcase this.parent.types.DEST_SELECTOR : {\n\t\t\t\t\t\tif (current.MULTIPLE)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvar label = !!current.VALUES._label ? current.VALUES._label : [];\n\n\t\t\t\t\t\t\tif (BX.type.isPlainObject(label))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlabel = Object.keys(label).map(function(key) {\n\t\t\t\t\t\t\t\t\treturn label[key];\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (!BX.type.isArray(label))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlabel = [ label ];\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (label.length > 0)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvalue = current.LABEL + ': ';\n\t\t\t\t\t\t\t\tvalue += label.join(', ');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (BX.type.isNotEmptyString(current.VALUES._value) &&\n\t\t\t\t\t\t\t\tBX.type.isNotEmptyString(current.VALUES._label))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvalue = current.LABEL + ': ';\n\t\t\t\t\t\t\t\tvalue += current.VALUES._label;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase this.parent.types.CUSTOM : {\n\t\t\t\t\t\tvalue = '_VALUE' in current && BX.type.isNotEmptyString(current._VALUE) ? current.LABEL : null;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tdefault : {\n\t\t\t\t\t\tif (BX.type.isNotEmptyString(current.VALUE))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvalue = current.LABEL + ': ' + current.VALUE;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (value !== null)\n\t\t\t\t{\n\t\t\t\t\tresult.push({\n\t\t\t\t\t\tblock: 'main-ui-search-square',\n\t\t\t\t\t\tname: value,\n\t\t\t\t\t\tvalue: current.NAME,\n\t\t\t\t\t\titem: {type: 'control', name: current.NAME},\n\t\t\t\t\t\ttitle: value\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}, this);\n\n\t\t\treturn result;\n\t\t},\n\n\t\tgetPreset: function()\n\t\t{\n\t\t\tvar container = this.getContainer();\n\t\t\tvar presetClass = this.parent.settings.classSquare;\n\t\t\tvar preset = null;\n\n\t\t\tif (BX.type.isDomNode(container))\n\t\t\t{\n\t\t\t\tpreset = BX.Filter.Utils.getByClass(container,presetClass);\n\t\t\t}\n\n\t\t\treturn preset;\n\t\t},\n\n\t\tremovePreset: function()\n\t\t{\n\t\t\tvar preset = this.getPreset();\n\n\t\t\tif (BX.type.isDomNode(preset))\n\t\t\t{\n\t\t\t\tBX.remove(preset);\n\n\t\t\t\tthis.adjustPlaceholder();\n\t\t\t}\n\n\t\t\tthis.hideClearButton();\n\t\t},\n\n\t\tupdatePreset: function(presetData)\n\t\t{\n\t\t\tthis.removePreset();\n\t\t\tthis.setPreset(presetData);\n\t\t}\n\t};\n\n})();",";(function() {\n\t'use strict';\n\n\tBX.namespace('BX.Filter');\n\n\t/**\n\t * Filter settings class\n\t * @param options\n\t * @param parent\n\t * @constructor\n\t */\n\tBX.Filter.Settings = function(options, parent)\n\t{\n\t\t/**\n\t\t * Field\n\t\t * @type {string}\n\t\t */\n\t\tthis.classField = 'main-ui-control-field';\n\t\tthis.classFieldGroup = 'main-ui-control-field-group';\n\t\tthis.classFieldLine = 'main-ui-filter-field-line';\n\t\tthis.classFieldDelete = 'main-ui-filter-field-delete';\n\t\tthis.classFieldLabel = 'main-ui-control-field-label';\n\t\tthis.classFieldWithLabel = 'main-ui-filter-wield-with-label';\n\t\tthis.classPresetName = 'main-ui-filter-sidebar-item-text';\n\t\tthis.classControl = 'main-ui-control';\n\t\tthis.classDateInput = 'main-ui-date-input';\n\t\tthis.classHide = 'main-ui-hide';\n\t\tthis.classNumberInput = 'main-ui-number-input';\n\t\tthis.classSelect = 'main-ui-select';\n\t\tthis.classMultiSelect = 'main-ui-multi-select';\n\t\tthis.classValueDelete = 'main-ui-control-value-delete';\n\t\tthis.classStringInput = 'main-ui-control-string';\n\t\tthis.classAddField = 'main-ui-filter-field-add-item';\n\t\tthis.classAddPresetField = 'main-ui-filter-new-filter';\n\t\tthis.classAddPresetFieldInput = 'main-ui-filter-sidebar-edit-control';\n\t\tthis.classAddPresetButton = 'main-ui-filter-add-item';\n\t\tthis.classButtonsContainer = 'main-ui-filter-field-button-container';\n\t\tthis.classSaveButton = 'main-ui-filter-save';\n\t\tthis.classCancelButton = 'main-ui-filter-cancel';\n\t\tthis.classMenuItem = 'main-ui-select-inner-item';\n\t\tthis.classMenuItemText = 'main-ui-select-inner-item-element';\n\t\tthis.classMenuMultiItemText = 'main-ui-select-inner-label';\n\t\tthis.classMenuItemChecked = 'main-ui-checked';\n\t\tthis.classSearchContainer = 'main-ui-filter-search';\n\t\tthis.classDefaultPopup = 'popup-window';\n\t\tthis.classPopupFieldList = 'main-ui-filter-popup-field-list';\n\t\tthis.classPopupFieldList1Column = 'main-ui-filter-field-list-1-column';\n\t\tthis.classPopupFieldList2Column = 'main-ui-filter-field-list-2-column';\n\t\tthis.classPopupFieldList3Column = 'main-ui-filter-field-list-3-column';\n\t\tthis.classFieldListItem = 'main-ui-filter-field-list-item';\n\t\tthis.classEditButton = 'main-ui-filter-add-edit';\n\t\tthis.classPresetEdit = 'main-ui-filter-edit';\n\t\tthis.classPresetNameEdit = 'main-ui-filter-edit-text';\n\t\tthis.classPresetDeleteButton = 'main-ui-delete';\n\t\tthis.classPresetDragButton = 'main-ui-filter-icon-grab';\n\t\tthis.classPresetEditButton = 'main-ui-filter-icon-edit';\n\t\tthis.classPresetEditInput = 'main-ui-filter-sidebar-item-input';\n\t\tthis.classPresetOndrag = 'main-ui-filter-sidebar-item-ondrag';\n\t\tthis.classSquare = 'main-ui-square';\n\t\tthis.classSquareDelete = 'main-ui-square-delete';\n\t\tthis.classSquareSelected = 'main-ui-square-selected';\n\t\tthis.classPresetsContainer = 'main-ui-filter-sidebar-item-container';\n\t\tthis.classPreset = 'main-ui-filter-sidebar-item';\n\t\tthis.classPresetCurrent = 'main-ui-filter-current-item';\n\t\tthis.classFilterContainer = 'main-ui-filter-wrapper';\n\t\tthis.classFileldControlList = 'main-ui-filter-field-container-list';\n\t\tthis.classRestoreFieldsButton = 'main-ui-filter-field-restore-items';\n\t\tthis.classClearSearchValueButton = 'main-ui-delete';\n\t\tthis.classSearchButtonsContainer = 'main-ui-item-icon-block';\n\t\tthis.classSearchButton = 'main-ui-search';\n\t\tthis.classDisabled = 'main-ui-disable';\n\t\tthis.classAnimationShow = 'main-ui-popup-show-animation';\n\t\tthis.classAnimationClose = 'main-ui-popup-close-animation';\n\t\tthis.classLimitsAnimation = 'main-ui-filter-field-limits-animate';\n\t\tthis.classSidebarControlsContainer = 'main-ui-filter-add-container';\n\t\tthis.searchContainerPostfix = '_search_container';\n\t\tthis.classPresetButtonsContainer = 'main-ui-filter-field-preset-button-container';\n\t\tthis.classFindButton = 'main-ui-filter-find';\n\t\tthis.classResetButton = 'main-ui-filter-reset';\n\t\tthis.classDefaultFilter = 'main-ui-filter-default-preset';\n\t\tthis.classRestoreButton = 'main-ui-filter-reset-link';\n\t\tthis.classPinButton = 'main-ui-filter-icon-pin';\n\t\tthis.classPopupOverlay = 'popup-window-overlay';\n\t\tthis.classPinnedPreset = 'main-ui-item-pin';\n\t\tthis.classWaitButtonClass = 'ui-btn-clock';\n\t\tthis.classForAllCheckbox = 'main-ui-filter-save-for-all';\n\t\tthis.classShow = 'main-ui-show';\n\t\tthis.classFocus = 'main-ui-focus';\n\t\tthis.classPresetField = 'main-ui-filter-preset-field';\n\t\tthis.numberPostfix = '_numsel';\n\t\tthis.datePostfix = '_datesel';\n\t\tthis.toPostfix = '_to';\n\t\tthis.fromPostfix = '_from';\n\t\tthis.daysPostfix = '_days';\n\t\tthis.monthPostfix = '_month';\n\t\tthis.quarterPostfix = '_quarter';\n\t\tthis.yearPostfix = '_year';\n\t\tthis.generalTemplateId = '';\n\t\tthis.init(options, parent);\n\t};\n\n\tBX.Filter.Settings.prototype = {\n\t\tinit: function(options, parent)\n\t\t{\n\t\t\tthis.generalTemplateId = parent.getParam('FILTER_ID') + '_GENERAL_template';\n\t\t\tthis.mergeSettings(options);\n\t\t},\n\n\t\tget: function(name, defaultValue)\n\t\t{\n\t\t\treturn (name && name in this && !BX.type.isFunction(this[name])) ? this[name] : defaultValue;\n\t\t},\n\n\t\tmergeSettings: function(options)\n\t\t{\n\t\t\tif (BX.type.isPlainObject(options))\n\t\t\t{\n\t\t\t\tObject.keys(options).forEach(function(key) {\n\t\t\t\t\tif (!BX.type.isFunction(this[key]))\n\t\t\t\t\t{\n\t\t\t\t\t\tthis[key] = options[key];\n\t\t\t\t\t}\n\t\t\t\t}, this);\n\t\t\t}\n\t\t}\n\t};\n\n})();",";(function() {\n\t'use strict';\n\n\tBX.namespace('BX.Main');\n\n\n\t/**\n\t * General filter class\n\t * @param {object} params Component params\n\t * @param {object} options Extends BX.Filter.Settings\n\t * @param {object} types Field types from Bitrix\\Main\\UI\\Filter\\Type\n\t * @param types.STRING\n\t * @param types.SELECT\n\t * @param types.DATE\n\t * @param types.CUSTOM_DATE\n\t * @param types.MULTI_SELECT\n\t * @param types.NUMBER\n\t * @param types.DEST_SELECTOR\n\t * @param types.CUSTOM_ENTITY\n\t * @param types.CHECKBOX\n\t * @param types.CUSTOM\n\t * @param types.ENTITY\n\t * @param {object} dateTypes Date field types from Bitrix\\Main\\UI\\Filter\\DateType\n\t * @param dateTypes.NONE\n\t * @param dateTypes.YESTERDAY\n\t * @param dateTypes.CURRENT_DAY\n\t * @param dateTypes.CURRENT_WEEK\n\t * @param dateTypes.CURRENT_MONTH\n\t * @param dateTypes.CURRENT_QUARTER\n\t * @param dateTypes.LAST_7_DAYS\n\t * @param dateTypes.LAST_30_DAYS\n\t * @param dateTypes.LAST_60_DAYS\n\t * @param dateTypes.LAST_90_DAYS\n\t * @param dateTypes.MONTH\n\t * @param dateTypes.QUARTER\n\t * @param dateTypes.YEAR\n\t * @param dateTypes.EXACT\n\t * @param dateTypes.LAST_WEEK\n\t * @param dateTypes.LAST_MONTH\n\t * @param dateTypes.RANGE\n\t * @param dateTypes.NEXT_DAYS\n\t * @param dateTypes.PREV_DAYS\n\t * @param dateTypes.TOMORROW\n\t * @param dateTypes.NEXT_MONTH\n\t * @param dateTypes.NEXT_WEEK\n\t * @param {object} numberTypes Number field types from Bitrix\\Main\\UI\\Filter\\NumberType\n\t */\n\tBX.Main.Filter = function(params, options, types, dateTypes, numberTypes, additionalDateTypes)\n\t{\n\t\tthis.params = params;\n\t\tthis.search = null;\n\t\tthis.popup = null;\n\t\tthis.presets = null;\n\t\tthis.fields = null;\n\t\tthis.types = types;\n\t\tthis.dateTypes = dateTypes;\n\t\tthis.additionalDateTypes = additionalDateTypes;\n\t\tthis.numberTypes = numberTypes;\n\t\tthis.settings = new BX.Filter.Settings(options, this);\n\t\tthis.filter = null;\n\t\tthis.api = null;\n\t\tthis.isAddPresetModeState = false;\n\t\tthis.firstInit = true;\n\t\tthis.emitter = new BX.Event.EventEmitter();\n\t\tthis.emitter.setEventNamespace('BX.Filter.Field');\n\t\tthis.emitter.subscribe = function(eventName, listener) {\n\t\t\tBX.Event.EventEmitter.subscribe(\n\t\t\t\tthis.emitter,\n\t\t\t\teventName.replace('BX.Filter.Field:', ''),\n\t\t\t\tlistener\n\t\t\t);\n\t\t}.bind(this);\n\n\t\tthis.init();\n\t};\n\n\t/**\n\t * Converts string to camel case\n\t * @param {string} string\n\t * @return {*}\n\t */\n\tfunction toCamelCase(string)\n\t{\n\t\tif (BX.type.isString(string))\n\t\t{\n\t\t\tstring = string.toLowerCase();\n\t\t\tstring = string.replace(/[\\-_\\s]+(.)?/g, function(match, chr) {\n\t\t\t\treturn chr ? chr.toUpperCase() : '';\n\t\t\t});\n\t\t\treturn string.substr(0, 1).toLowerCase() + string.substr(1);\n\t\t}\n\n\t\treturn string;\n\t}\n\n\t//noinspection JSUnusedGlobalSymbols\n\tBX.Main.Filter.prototype = {\n\t\tinit: function()\n\t\t{\n\t\t\tBX.bind(document, 'mousedown', BX.delegate(this._onDocumentClick, this));\n\t\t\tBX.bind(document, 'keydown', BX.delegate(this._onDocumentKeydown, this));\n\t\t\tBX.bind(window, 'load', BX.delegate(this.onWindowLoad, this));\n\t\t\tBX.addCustomEvent('Grid::ready', BX.delegate(this._onGridReady, this));\n\n\t\t\tthis.getSearch().updatePreset(this.getParam('CURRENT_PRESET'));\n\t\t},\n\n\t\tgetEmitter: function()\n\t\t{\n\t\t\treturn this.emitter;\n\t\t},\n\n\n\t\tonWindowLoad: function()\n\t\t{\n\t\t\tthis.settings.get('AUTOFOCUS') && this.adjustFocus();\n\t\t},\n\n\n\t\t/**\n\t\t * Removes apply_filter param from url\n\t\t */\n\t\tclearGet: function()\n\t\t{\n\t\t\tif ('history' in window)\n\t\t\t{\n\t\t\t\tvar url = window.location.toString();\n\t\t\t\tvar clearUrl = BX.util.remove_url_param(url, 'apply_filter');\n\t\t\t\twindow.history.replaceState(null, '', clearUrl);\n\t\t\t}\n\t\t},\n\n\n\t\t/**\n\t\t * Adjusts focus on search field\n\t\t */\n\t\tadjustFocus: function()\n\t\t{\n\t\t\tthis.getSearch().adjustFocus();\n\t\t},\n\n\t\t_onAddPresetKeydown: function(event)\n\t\t{\n\t\t\tif (BX.Filter.Utils.isKey(event, 'enter'))\n\t\t\t{\n\t\t\t\tthis._onSaveButtonClick();\n\t\t\t}\n\t\t},\n\n\t\t_onDocumentKeydown: function(event)\n\t\t{\n\t\t\tif (BX.Filter.Utils.isKey(event, 'escape'))\n\t\t\t{\n\t\t\t\tif (this.getPopup().isShown())\n\t\t\t\t{\n\t\t\t\t\tBX.onCustomEvent(window, 'BX.Main.Filter:blur', [this]);\n\t\t\t\t\tthis.closePopup();\n\n\t\t\t\t\tif (this.getParam('VALUE_REQUIRED_MODE'))\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.restoreRemovedPreset();\n\t\t\t\t\t}\n\n\t\t\t\t\tif (this.getParam('VALUE_REQUIRED'))\n\t\t\t\t\t{\n\t\t\t\t\t\tif (!this.getSearch().getSquares().length)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.getPreset().applyPinnedPreset();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\n\t\t/**\n\t\t * Gets BX.Filter.Api instance\n\t\t * @return {BX.Filter.Api}\n\t\t */\n\t\tgetApi: function()\n\t\t{\n\t\t\tif (!(this.api instanceof BX.Filter.Api))\n\t\t\t{\n\t\t\t\tthis.api = new BX.Filter.Api(this);\n\t\t\t}\n\n\t\t\treturn this.api;\n\t\t},\n\n\n\t\t/**\n\t\t * Adds sidebar item\n\t\t * @param {string} id\n\t\t * @param {string} name\n\t\t * @param {boolean} [pinned = false]\n\t\t */\n\t\taddSidebarItem: function(id, name, pinned)\n\t\t{\n\t\t\tvar Presets = this.getPreset();\n\t\t\tvar presetsContainer = Presets.getContainer();\n\t\t\tvar sidebarItem = Presets.createSidebarItem(id, name, pinned);\n\t\t\tvar preset = Presets.getPresetNodeById(id);\n\n\t\t\tif (BX.type.isDomNode(preset))\n\t\t\t{\n\t\t\t\tBX.remove(preset);\n\t\t\t\tBX.prepend(sidebarItem, presetsContainer);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tpresetsContainer && presetsContainer.insertBefore(sidebarItem, Presets.getAddPresetField());\n\t\t\t}\n\n\t\t\tBX.bind(sidebarItem, 'click', BX.delegate(Presets._onPresetClick, Presets));\n\t\t},\n\n\n\t\t/**\n\t\t * Saves user settings\n\t\t * @param {boolean} [forAll = false]\n\t\t */\n\t\tsaveUserSettings: function(forAll)\n\t\t{\n\t\t\tvar optionsParams = {'FILTER_ID': this.getParam('FILTER_ID'), 'GRID_ID': this.getParam('GRID_ID'), 'action': 'SET_FILTER_ARRAY'};\n\t\t\tvar Presets = this.getPreset();\n\t\t\tvar currentPresetId = Presets.getCurrentPresetId();\n\t\t\tvar presetsSettings = {};\n\n\t\t\tthis.params['PRESETS'] = BX.clone(this.editablePresets);\n\t\t\tpresetsSettings.current_preset = currentPresetId;\n\n\t\t\tPresets.getPresets().forEach(function(current, index) {\n\t\t\t\tvar presetId = Presets.getPresetId(current);\n\n\t\t\t\tif (presetId && presetId !== 'tmp_filter')\n\t\t\t\t{\n\t\t\t\t\tvar presetData = Presets.getPreset(presetId);\n\n\t\t\t\t\tpresetData.TITLE = BX.util.htmlspecialchars(BX.util.htmlspecialcharsback(presetData.TITLE));\n\t\t\t\t\tpresetData.SORT = index;\n\t\t\t\t\tPresets.updatePresetName(current, presetData.TITLE);\n\n\t\t\t\t\tpresetsSettings[presetId] = {\n\t\t\t\t\t\tsort: index,\n\t\t\t\t\t\tname: presetData.TITLE,\n\t\t\t\t\t\tfields: this.preparePresetSettingsFields(presetData.FIELDS),\n\t\t\t\t\t\tfor_all: (\n\t\t\t\t\t\t\t(forAll && !BX.type.isBoolean(presetData.FOR_ALL)) ||\n\t\t\t\t\t\t\t(forAll && presetData.FOR_ALL === true)\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, this);\n\n\t\t\tthis.saveOptions(presetsSettings, optionsParams, null, forAll);\n\t\t},\n\n\n\t\t/**\n\t\t * Checks is for all\n\t\t * @return {boolean}\n\t\t */\n\t\tisForAll: function(forAll)\n\t\t{\n\t\t\tvar checkbox = this.getForAllCheckbox();\n\t\t\treturn (\n\t\t\t\t(BX.type.isBoolean(forAll) && forAll) ||\n\t\t\t\t(!!checkbox && !!checkbox.checked)\n\t\t\t);\n\t\t},\n\n\n\t\t/**\n\t\t * Gets for all checkbox\n\t\t * @return {?HTMLElement}\n\t\t */\n\t\tgetForAllCheckbox: function()\n\t\t{\n\t\t\tif (!this.forAllCheckbox)\n\t\t\t{\n\t\t\t\tthis.forAllCheckbox = BX.Filter.Utils.getByClass(this.getFilter(), this.settings.classForAllCheckbox);\n\t\t\t}\n\n\t\t\treturn this.forAllCheckbox;\n\t\t},\n\n\n\t\t/**\n\t\t * Prepares preset settings fields\n\t\t * @param fields\n\t\t * @return {?object}\n\t\t */\n\t\tpreparePresetSettingsFields: function(fields)\n\t\t{\n\t\t\tvar result = {};\n\t\t\tvar valuesKeys;\n\n\t\t\t(fields || []).forEach(function(current) {\n\t\t\t\tswitch (current.TYPE)\n\t\t\t\t{\n\t\t\t\t\tcase this.types.STRING : {\n\t\t\t\t\t\tresult[current.NAME] = current.VALUE;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase this.types.TEXTAREA : {\n\t\t\t\t\t\tresult[current.NAME] = current.VALUE;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase this.types.SELECT : {\n\t\t\t\t\t\tresult[current.NAME] = 'VALUE' in current.VALUE ? current.VALUE.VALUE : '';\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase this.types.MULTI_SELECT : {\n\t\t\t\t\t\tif (BX.type.isArray(current.VALUE) && current.VALUE.length)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcurrent.VALUE.forEach(function(curr, index) {\n\t\t\t\t\t\t\t\tresult[current.NAME] = BX.type.isPlainObject(result[current.NAME]) ? result[current.NAME] : {};\n\t\t\t\t\t\t\t\tresult[current.NAME][index] = curr.VALUE;\n\t\t\t\t\t\t\t}, this);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase this.types.CHECKBOX : {\n\t\t\t\t\t\tif (BX.type.isArray(current.VALUE) && current.VALUE.length)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcurrent.VALUE.forEach(function(curr, index) {\n\t\t\t\t\t\t\t\tresult[current.NAME] = BX.type.isPlainObject(result[current.NAME]) ? result[current.NAME] : {};\n\t\t\t\t\t\t\t\tresult[current.NAME][index] = curr.VALUE;\n\t\t\t\t\t\t\t}, this);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase this.types.DATE : {\n\t\t\t\t\t\tif (BX.type.isPlainObject(current.VALUES))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvaluesKeys = Object.keys(current.VALUES);\n\t\t\t\t\t\t\tresult[current.NAME + '_datesel'] = current.SUB_TYPE.VALUE;\n\t\t\t\t\t\t\tvaluesKeys.forEach(function(curr) {\n\t\t\t\t\t\t\t\tresult[current.NAME + curr] = current.VALUES[curr];\n\t\t\t\t\t\t\t}, this);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase this.types.NUMBER : {\n\t\t\t\t\t\tif (BX.type.isPlainObject(current.VALUES))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvaluesKeys = Object.keys(current.VALUES);\n\t\t\t\t\t\t\tresult[current.NAME + '_numsel'] = current.SUB_TYPE.VALUE;\n\t\t\t\t\t\t\tvaluesKeys.forEach(function(curr) {\n\t\t\t\t\t\t\t\tresult[current.NAME + curr] = current.VALUES[curr];\n\t\t\t\t\t\t\t}, this);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase this.types.DEST_SELECTOR : {\n\t\t\t\t\t\tif (BX.type.isPlainObject(current.VALUES))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tresult[current.NAME] = current.VALUES._value;\n\t\t\t\t\t\t\tresult[current.NAME + '_label'] = current.VALUES._label;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase this.types.CUSTOM_ENTITY : {\n\t\t\t\t\t\tif (BX.type.isPlainObject(current.VALUES))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tresult[current.NAME] = current.VALUES._value;\n\t\t\t\t\t\t\tresult[current.NAME + '_label'] = current.VALUES._label;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tdefault : {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, this);\n\n\t\t\treturn result;\n\t\t},\n\n\n\t\t/**\n\t\t * Saves preset\n\t\t */\n\t\tsavePreset: function()\n\t\t{\n\t\t\tvar presetId = 'filter_' + (+new Date());\n\t\t\tvar presetName = BX.util.htmlspecialcharsback(this.getPreset().getAddPresetFieldInput().value);\n\n\t\t\tthis.updatePreset(presetId, presetName, null, true, null, null, true);\n\t\t\tthis.addSidebarItem(presetId, presetName);\n\t\t\tthis.getPreset().applyPreset(presetId);\n\t\t\tthis.getPreset().activatePreset(presetId);\n\t\t\tthis.applyFilter();\n\t\t},\n\n\n\t\t/**\n\t\t * Updates preset\n\t\t * @param {string} presetId\n\t\t * @param {?string} [presetName]\n\t\t * @param {?boolean} [reset]\n\t\t * @param {?boolean} [sort]\n\t\t * @param {?function} [beforeLoad]\n\t\t * @param {?function} [afterLoad]\n\t\t * @param {boolean} [isNew]\n\t\t * @return {BX.Promise}\n\t\t */\n\t\tupdatePreset: function(presetId, presetName, reset, sort, beforeLoad, afterLoad, isNew)\n\t\t{\n\t\t\tvar fields = this.getFilterFieldsValues();\n\t\t\tvar sourceFields = this.getPreset().getFields().map(function(curr) { return BX.data(curr, 'name'); });\n\t\t\tvar preset = this.getPreset().getCurrentPresetData();\n\t\t\tvar params = {'FILTER_ID': this.getParam('FILTER_ID'), 'GRID_ID': this.getParam('GRID_ID'), 'action': 'SET_FILTER'};\n\t\t\tvar rows, value, tmpPresetNode, tmpPresetInput, presets;\n\t\t\tvar data = {};\n\n\t\t\tdata.additional = {};\n\n\t\t\tif (presetId !== 'tmp_filter' && presetId !== 'default_filter' && !isNew)\n\t\t\t{\n\t\t\t\tvar additional = BX.type.isArray(preset.ADDITIONAL) ? preset.ADDITIONAL : [];\n\n\t\t\t\tadditional.forEach(function(field) {\n\t\t\t\t\tObject.keys(fields).forEach(function(key) {\n\t\t\t\t\t\tif (key.indexOf(field.NAME) !== -1)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tdata.additional[key] = fields[key];\n\t\t\t\t\t\t\tdelete fields[key];\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\n\t\t\trows = Object.keys(fields);\n\n\t\t\tif (!reset)\n\t\t\t{\n\t\t\t\tdata.apply_filter = 'Y';\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tdata.clear_filter = 'Y';\n\t\t\t}\n\n\t\t\tdata.save = 'Y';\n\t\t\tdata.fields = fields;\n\t\t\tdata.rows = sourceFields.join(',');\n\n\t\t\tdata.preset_id = presetId || preset.ID;\n\n\t\t\tif (BX.type.isNotEmptyString(presetName))\n\t\t\t{\n\t\t\t\tdata.name = BX.util.htmlspecialchars(presetName);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\ttmpPresetNode = this.getPreset().getPresetNodeById(data.preset_id);\n\t\t\t\ttmpPresetInput = this.getPreset().getPresetInput(tmpPresetNode);\n\n\t\t\t\tif (BX.type.isDomNode(tmpPresetInput) && BX.type.isNotEmptyString(tmpPresetInput.value))\n\t\t\t\t{\n\t\t\t\t\tdata.name = tmpPresetInput.value;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tdata.name = preset.TITLE;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ((!('sort' in data) || !BX.type.isNumber(data.sort)) && sort)\n\t\t\t{\n\t\t\t\tpresets = this.getParam('PRESETS');\n\t\t\t\tdata.sort = presets.length + 2;\n\t\t\t}\n\n\t\t\tif (!reset)\n\t\t\t{\n\t\t\t\trows.forEach(function(key) {\n\t\t\t\t\tif (BX.type.isArray(data.fields[key]))\n\t\t\t\t\t{\n\t\t\t\t\t\tvalue = data.fields[key].length ? {} : '';\n\n\t\t\t\t\t\tdata.fields[key].forEach(function(val, index) {\n\t\t\t\t\t\t\tvalue[index] = val;\n\t\t\t\t\t\t}, this);\n\n\t\t\t\t\t\tif (value || BX.type.isNumber(value) || BX.type.isBoolean(value))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tdata.fields[key] = value;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}, this);\n\t\t\t}\n\n\t\t\tif (data.preset_id === 'tmp_filter' || this.isAddPresetEnabled() || reset)\n\t\t\t{\n\t\t\t\tthis.updateParams(data);\n\t\t\t}\n\n\t\t\tif (BX.type.isFunction(beforeLoad))\n\t\t\t{\n\t\t\t\tbeforeLoad();\n\t\t\t}\n\n\t\t\tvar promise = new BX.Promise(null, this);\n\t\t\tpromise.setAutoResolve('fulfill', 0);\n\n\t\t\tpromise.then(function() {\n\t\t\t\tvar afterPromise = new BX.Promise(null, this);\n\t\t\t\tthis.saveOptions(data, params, BX.proxy(afterPromise.fulfill, afterPromise));\n\t\t\t\treturn afterPromise;\n\t\t\t})\n\t\t\t.then(function() {\n\t\t\t\t!!afterLoad && afterLoad();\n\t\t\t});\n\n\t\t\treturn promise;\n\t\t},\n\n\n\t\t/**\n\t\t * Saves fields sort\n\t\t */\n\t\tsaveFieldsSort: function()\n\t\t{\n\t\t\tvar params = {'FILTER_ID': this.getParam('FILTER_ID'), 'GRID_ID': this.getParam('GRID_ID'), 'action': 'SET_FILTER'};\n\t\t\tvar fields = this.getPreset().getFields();\n\t\t\tvar data = {};\n\n\t\t\tdata.preset_id = 'default_filter';\n\n\t\t\tif (BX.type.isArray(fields))\n\t\t\t{\n\t\t\t\tdata.rows = fields.map(function(current) {\n\t\t\t\t\treturn BX.data(current, 'name');\n\t\t\t\t});\n\t\t\t\tdata.rows = data.rows.join(',');\n\t\t\t}\n\n\t\t\tthis.updateParams(data);\n\t\t\tthis.saveOptions(data, params);\n\t\t},\n\n\n\t\t/**\n\t\t * Updates params\n\t\t * @param {object} data\n\t\t */\n\t\tupdateParams: function(data)\n\t\t{\n\t\t\tvar preset, presets;\n\t\t\tvar fields = [];\n\n\t\t\tif (BX.type.isPlainObject(data) && 'preset_id' in data)\n\t\t\t{\n\t\t\t\tpreset = this.getPreset().getPreset(data.preset_id);\n\n\t\t\t\tif (BX.type.isPlainObject(preset))\n\t\t\t\t{\n\t\t\t\t\tif ('name' in data && BX.type.isNotEmptyString(data.name))\n\t\t\t\t\t{\n\t\t\t\t\t\tpreset.TITLE = data.name;\n\t\t\t\t\t}\n\n\t\t\t\t\tif ('rows' in data && !('fields' in data))\n\t\t\t\t\t{\n\t\t\t\t\t\tdata.fields = {};\n\n\t\t\t\t\t\tdata.rows.split(',').forEach(function(curr) {\n\t\t\t\t\t\t\tdata.fields[curr] = '';\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tif ('fields' in data)\n\t\t\t\t\t{\n\t\t\t\t\t\tpreset.FIELDS = this.preparePresetFields(data.fields, data.rows);\n\t\t\t\t\t}\n\n\t\t\t\t\tif ('additional' in data && preset.ID !== 'tmp_filter')\n\t\t\t\t\t{\n\t\t\t\t\t\tpreset.ADDITIONAL = this.preparePresetFields(data.additional, data.rows);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tpresets = this.getParam('PRESETS');\n\t\t\t\t\tpreset = {\n\t\t\t\t\t\tID: data.preset_id,\n\t\t\t\t\t\tTITLE: data.name,\n\t\t\t\t\t\tSORT: (presets.length + 2),\n\t\t\t\t\t\tFIELDS: this.preparePresetFields(data.fields, data.rows)\n\t\t\t\t\t};\n\n\t\t\t\t\tpresets.push(preset);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\n\t\t/**\n\t\t * Prepares preset fields\n\t\t * @param {object[]} dataFields\n\t\t * @param rows\n\t\t * @return {object[]}\n\t\t */\n\t\tpreparePresetFields: function(dataFields, rows)\n\t\t{\n\t\t\tvar fieldKeys, field;\n\t\t\tvar fields = [];\n\n\t\t\tif (BX.type.isPlainObject(dataFields))\n\t\t\t{\n\t\t\t\trows = BX.type.isNotEmptyString(rows) ? rows.split(',') : [];\n\t\t\t\tfieldKeys = rows.length ? rows : Object.keys(dataFields);\n\t\t\t\tfieldKeys.forEach(function(current) {\n\t\t\t\t\tcurrent = current\n\t\t\t\t\t\t.replace('_datesel', '')\n\t\t\t\t\t\t.replace('_numsel', '');\n\t\t\t\t\tfield = BX.clone(this.getFieldByName(current));\n\n\t\t\t\t\tif (BX.type.isPlainObject(field))\n\t\t\t\t\t{\n\t\t\t\t\t\tif (field.TYPE === this.types.STRING)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfield.VALUE = dataFields[current];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (field.TYPE === this.types.TEXTAREA)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfield.VALUE = dataFields[current];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (field.TYPE === this.types.MULTI_SELECT)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfield.VALUE = this.prepareMultiSelectValue(dataFields[current], field.ITEMS);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (field.TYPE === this.types.SELECT || field.TYPE === this.types.CHECKBOX)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfield.VALUE = this.prepareSelectValue(dataFields[current], field.ITEMS);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (field.TYPE === this.types.DATE)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfield.SUB_TYPE = this.prepareSelectValue(dataFields[current + '_datesel'], field.SUB_TYPES);\n\n\t\t\t\t\t\t\tfield.VALUES = {\n\t\t\t\t\t\t\t\t'_from': dataFields[current + '_from'],\n\t\t\t\t\t\t\t\t'_to': dataFields[current + '_to'],\n\t\t\t\t\t\t\t\t'_days': dataFields[current + '_days'],\n\t\t\t\t\t\t\t\t'_month': dataFields[current + '_month'],\n\t\t\t\t\t\t\t\t'_quarter': dataFields[current + '_quarter'],\n\t\t\t\t\t\t\t\t'_year': dataFields[current + '_year'],\n\t\t\t\t\t\t\t\t'_allow_year': dataFields[current + '_allow_year']\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (field.TYPE === this.types.CUSTOM_DATE)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfield.VALUE = {\n\t\t\t\t\t\t\t\t'days': Object.keys(dataFields[current + '_days'] || {}).map(function(index) {\n\t\t\t\t\t\t\t\t\treturn dataFields[current + '_days'][index];\n\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t'months': Object.keys(dataFields[current + '_months'] || {}).map(function(index) {\n\t\t\t\t\t\t\t\t\treturn dataFields[current + '_months'][index];\n\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t'years': Object.keys(dataFields[current + '_years'] || {}).map(function(index) {\n\t\t\t\t\t\t\t\t\treturn dataFields[current + '_years'][index];\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (field.TYPE === this.types.NUMBER)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfield.SUB_TYPE = this.prepareSelectValue(dataFields[current + '_numsel'], field.SUB_TYPES);\n\t\t\t\t\t\t\tfield.VALUES = {\n\t\t\t\t\t\t\t\t'_from': dataFields[current + '_from'],\n\t\t\t\t\t\t\t\t'_to': dataFields[current + '_to']\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (field.TYPE === this.types.DEST_SELECTOR)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (typeof dataFields[current + '_label'] !== 'undefined')\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tfield.VALUES._label = dataFields[current + '_label'];\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (typeof dataFields[current] !== 'undefined')\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tfield.VALUES._value = dataFields[current];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (field.TYPE === this.types.CUSTOM_ENTITY)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (typeof dataFields[current + '_label'] !== 'undefined')\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tfield.VALUES._label = dataFields[current + '_label'];\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (typeof dataFields[current] !== 'undefined')\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tfield.VALUES._value = dataFields[current];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (field.TYPE === this.types.CUSTOM)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfield._VALUE = dataFields[current];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfields.push(field);\n\t\t\t\t\t}\n\t\t\t\t}, this);\n\t\t\t}\n\n\t\t\treturn fields;\n\t\t},\n\n\n\t\t/**\n\t\t * Prepares select values\n\t\t * @param value\n\t\t * @param items\n\t\t * @return {object}\n\t\t */\n\t\tprepareSelectValue: function(value, items)\n\t\t{\n\t\t\tvar result = {};\n\t\t\tvar tmpResult;\n\n\t\t\tif (BX.type.isNotEmptyString(value) && BX.type.isArray(items))\n\t\t\t{\n\t\t\t\ttmpResult = this.prepareMultiSelectValue({0: value}, items);\n\t\t\t\tresult = tmpResult.length > 0 ? tmpResult[0] : {};\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresult = items[0];\n\t\t\t}\n\n\t\t\treturn result;\n\t\t},\n\n\n\t\t/**\n\t\t * Prepares multiselect value\n\t\t * @param values\n\t\t * @param items\n\t\t * @return {Array}\n\t\t */\n\t\tprepareMultiSelectValue: function(values, items)\n\t\t{\n\t\t\tvar result = [];\n\n\t\t\tif (BX.type.isPlainObject(values) && BX.type.isArray(items))\n\t\t\t{\n\t\t\t\tvar valuesKeys = Object.keys(values);\n\t\t\t\tvar valuesValues = valuesKeys.map(function(curr) { return values[curr]; });\n\n\t\t\t\tresult = items.filter(function(current) {\n\t\t\t\t\treturn valuesValues.some(function(val) { return val === current.VALUE});\n\t\t\t\t}, this);\n\t\t\t}\n\n\t\t\treturn result;\n\t\t},\n\n\n\t\t/**\n\t\t * Get field by name\n\t\t * @param {string} name\n\t\t * @return {?object}\n\t\t */\n\t\tgetFieldByName: function(name)\n\t\t{\n\t\t\tvar fields = this.getParam('FIELDS');\n\n\t\t\tvar field = fields.find(function(current) {\n\t\t\t\treturn current.NAME === name;\n\t\t\t});\n\n\t\t\tif (field)\n\t\t\t{\n\t\t\t\treturn field;\n\t\t\t}\n\n\t\t\tvar node = this.getFieldListContainer()\n\t\t\t\t.querySelector('[data-name=\"' + name + '\"]');\n\n\t\t\tfield = BX.Filter.Field.instances.get(node);\n\n\t\t\tif (field)\n\t\t\t{\n\t\t\t\treturn field.options;\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\n\n\t\t/**\n\t\t * @private\n\t\t * @return {Promise}\n\t\t */\n\t\tconfirmSaveForAll: function()\n\t\t{\n\t\t\treturn new Promise(function(resolve) {\n\t\t\t\tvar action = {\n\t\t\t\t\tCONFIRM: true,\n\t\t\t\t\tCONFIRM_MESSAGE: this.getParam('MAIN_UI_FILTER__CONFIRM_MESSAGE_FOR_ALL'),\n\t\t\t\t\tCONFIRM_APPLY_BUTTON: this.getParam('MAIN_UI_FILTER__CONFIRM_APPLY_FOR_ALL'),\n\t\t\t\t\tCONFIRM_CANCEL_BUTTON: this.getParam('CONFIRM_CANCEL')\n\t\t\t\t};\n\t\t\t\tthis.confirmDialog(action, resolve);\n\t\t\t}.bind(this));\n\t\t},\n\n\n\t\t/**\n\t\t * Save options\n\t\t * @param {object} data\n\t\t * @param {object} [params]\n\t\t * @param {function} [callback]\n\t\t * @param {boolean} [forAll = false]\n\t\t */\n\t\tsaveOptions: function(data, params, callback, forAll)\n\t\t{\n\t\t\tparams.action = toCamelCase(params.action);\n\t\t\tparams.forAll = this.isForAll(forAll);\n\t\t\tparams.commonPresetsId = this.getParam('COMMON_PRESETS_ID');\n\t\t\tparams.apply_filter = data.apply_filter || \"N\";\n\t\t\tparams.clear_filter = data.clear_filter || \"N\";\n\t\t\tparams.with_preset = data.with_preset || \"N\";\n\t\t\tparams.save = data.save || \"N\";\n\n\t\t\tvar requestData = {\n\t\t\t\tparams: params,\n\t\t\t\tdata: data\n\t\t\t};\n\n\t\t\tdelete data.apply_filter;\n\t\t\tdelete data.save;\n\t\t\tdelete data.clear_filter;\n\t\t\tdelete data.with_preset;\n\n\t\t\tif (params.forAll && params.action === 'setFilterArray')\n\t\t\t{\n\t\t\t\treturn this.confirmSaveForAll()\n\t\t\t\t\t.then(function() {\n\t\t\t\t\t\treturn this.backend(params.action, requestData);\n\t\t\t\t\t}.bind(this))\n\t\t\t\t\t.then(function() {\n\t\t\t\t\t\tthis.disableEdit();\n\t\t\t\t\t\tthis.disableAddPreset();\n\t\t\t\t\t}.bind(this))\n\t\t\t}\n\n\t\t\treturn this.backend(params.action, requestData)\n\t\t\t\t.then(function() {\n\t\t\t\t\tBX.removeClass(this.getFindButton(), this.settings.classWaitButtonClass);\n\t\t\t\t\tBX.type.isFunction(callback) && callback();\n\t\t\t\t}.bind(this));\n\t\t},\n\n\n\t\t/**\n\t\t *\n\t\t * @param {string} action\n\t\t * @param data\n\t\t */\n\t\tbackend: function(action, data)\n\t\t{\n\t\t\treturn BX.ajax.runComponentAction(\n\t\t\t\t'bitrix:main.ui.filter',\n\t\t\t\taction,\n\t\t\t\t{\n\t\t\t\t\tmode: 'ajax',\n\t\t\t\t\tdata: data,\n\t\t\t\t\tanalyticsLabel: {\n\t\t\t\t\t\tFILTER_ID: this.getParam('FILTER_ID'),\n\t\t\t\t\t\tGRID_ID: this.getParam('GRID_ID')\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t\t},\n\n\n\t\t/**\n\t\t * Prepares event.path\n\t\t * @param event\n\t\t * @return {*}\n\t\t */\n\t\tprepareEvent: function(event)\n\t\t{\n\t\t\tvar i, x;\n\n\t\t\tif (!('path' in event) || !event.path.length)\n\t\t\t{\n\t\t\t\tevent.path = [event.target];\n\t\t\t\ti = 0;\n\n\t\t\t\twhile ((x = event.path[i++].parentNode) !== null)\n\t\t\t\t{\n\t\t\t\t\tevent.path.push(x);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn event;\n\t\t},\n\n\n\t\t/**\n\t\t * Restores removed preset values\n\t\t * VALUE_REQUIRED_MODE = true only\n\t\t */\n\t\trestoreRemovedPreset: function()\n\t\t{\n\t\t\tif (this.getParam('VALUE_REQUIRED_MODE'))\n\t\t\t{\n\t\t\t\tvar currentPreset = this.getParam('CURRENT_PRESET');\n\t\t\t\tif (BX.type.isPlainObject(currentPreset))\n\t\t\t\t{\n\t\t\t\t\tvar currentPresetId = currentPreset.ID;\n\t\t\t\t\tvar presetNode = this.getPreset().getPresetNodeById(currentPresetId);\n\t\t\t\t\tthis.getPreset().applyPreset(currentPresetId);\n\t\t\t\t\tthis.getPreset().activatePreset(presetNode);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\n\t\t/**\n\t\t * Checks that the event occurred on the scroll bar\n\t\t * @param {MouseEvent} event\n\t\t * @return {boolean}\n\t\t */\n\t\thasScrollClick: function(event)\n\t\t{\n\t\t\tvar x = 'clientX' in event ? event.clientX : 'x' in event ? event.x : 0;\n\t\t\treturn x >= document.documentElement.offsetWidth;\n\t\t},\n\n\n\t\t/**\n\t\t * Checks whether to use common presets\n\t\t * @return {boolean}\n\t\t */\n\t\tisUseCommonPresets: function()\n\t\t{\n\t\t\treturn !!this.getParam('COMMON_PRESETS_ID');\n\t\t},\n\n\n\t\t/**\n\t\t * Checks whether event is inside filter\n\t\t * @param {MouseEvent} event\n\t\t * @returns {boolean}\n\t\t */\n\t\tisInsideFilterEvent: function(event)\n\t\t{\n\t\t\tevent = this.prepareEvent(event);\n\t\t\treturn (event.path || []).some(function(current) {\n\t\t\t\treturn (\n\t\t\t\t\tBX.type.isDomNode(current) && (\n\t\t\t\t\t\tBX.hasClass(current, this.settings.classFilterContainer) ||\n\t\t\t\t\t\tBX.hasClass(current, this.settings.classSearchContainer) ||\n\t\t\t\t\t\tBX.hasClass(current, this.settings.classDefaultPopup) ||\n\t\t\t\t\t\tBX.hasClass(current, this.settings.classPopupOverlay)\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t}, this);\n\t\t},\n\n\t\t_onDocumentClick: function(event)\n\t\t{\n\t\t\tvar popup = this.getPopup();\n\n\t\t\tif (!this.isInsideFilterEvent(event) && !this.hasScrollClick(event))\n\t\t\t{\n\t\t\t\tif (popup && popup.isShown())\n\t\t\t\t{\n\t\t\t\t\tthis.closePopup();\n\n\t\t\t\t\tif (this.getParam('VALUE_REQUIRED_MODE'))\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.restoreRemovedPreset();\n\t\t\t\t\t}\n\n\t\t\t\t\tif (this.getParam('VALUE_REQUIRED'))\n\t\t\t\t\t{\n\t\t\t\t\t\tif (!this.getSearch().getSquares().length)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.getPreset().applyPinnedPreset();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tBX.onCustomEvent(window, 'BX.Main.Filter:blur', [this]);\n\t\t\t}\n\t\t},\n\n\t\t_onAddFieldClick: function(event)\n\t\t{\n\t\t\tvar popup = this.getFieldsPopup();\n\t\t\tevent.stopPropagation();\n\t\t\tevent.preventDefault();\n\n\t\t\tif (popup && !popup.isShown())\n\t\t\t{\n\t\t\t\tthis.showFieldsPopup();\n\t\t\t\tthis.syncFields();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.closeFieldListPopup();\n\t\t\t}\n\t\t},\n\n\n\t\t/**\n\t\t * Synchronizes field list in popup and filter field list\n\t\t * @param {?{cache: boolean}} [options]\n\t\t */\n\t\tsyncFields: function(options)\n\t\t{\n\t\t\tif (BX.type.isPlainObject(options))\n\t\t\t{\n\t\t\t\tif (options.cache === false)\n\t\t\t\t{\n\t\t\t\t\tthis.fieldsPopupItems = null;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar fields = this.getPreset().getFields();\n\t\t\tvar items = this.getFieldsPopupItems();\n\t\t\tvar currentId, isNeedCheck;\n\n\t\t\tif (BX.type.isArray(items) && items.length)\n\t\t\t{\n\t\t\t\titems.forEach(function(current) {\n\t\t\t\t\tcurrentId = BX.data(current, 'name').replace('_datesel', '').replace('_numsel', '');\n\t\t\t\t\tisNeedCheck = fields.some(function(field) {\n\t\t\t\t\t\treturn BX.data(field, 'name') === currentId;\n\t\t\t\t\t});\n\t\t\t\t\tif (isNeedCheck)\n\t\t\t\t\t{\n\t\t\t\t\t\tBX.addClass(current, this.settings.classMenuItemChecked);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tBX.removeClass(current, this.settings.classMenuItemChecked);\n\t\t\t\t\t}\n\t\t\t\t}, this);\n\t\t\t}\n\t\t},\n\n\n\t\t/**\n\t\t * Gets items of popup window with a list of available fields\n\t\t * @return {?HTMLElement[]}\n\t\t */\n\t\tgetFieldsPopupItems: function()\n\t\t{\n\t\t\tif (!BX.type.isArray(this.fieldsPopupItems))\n\t\t\t{\n\t\t\t\tvar popup = this.getFieldsPopup();\n\n\t\t\t\tif ('contentContainer' in popup && BX.type.isDomNode(popup.contentContainer))\n\t\t\t\t{\n\t\t\t\t\tthis.fieldsPopupItems = BX.Filter.Utils.getByClass(popup.contentContainer, this.settings.classMenuItem, true);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn this.fieldsPopupItems;\n\t\t},\n\n\n\t\t/**\n\t\t * Gets popup container class name by popup items count\n\t\t * @param {int|string} itemsCount\n\t\t * @return {string}\n\t\t */\n\t\tgetFieldListContainerClassName: function(itemsCount)\n\t\t{\n\t\t\tvar containerClass = this.settings.classPopupFieldList1Column;\n\n\t\t\tif (itemsCount > 6 && itemsCount < 12)\n\t\t\t{\n\t\t\t\tcontainerClass = this.settings.classPopupFieldList2Column;\n\t\t\t}\n\n\t\t\tif (itemsCount > 12)\n\t\t\t{\n\t\t\t\tcontainerClass = this.settings.classPopupFieldList3Column;\n\t\t\t}\n\n\t\t\treturn containerClass;\n\t\t},\n\n\n\t\t/**\n\t\t * Prepares fields declarations\n\t\t * @param {object[]} fields\n\t\t * @return {object[]}\n\t\t */\n\t\tprepareFieldsDecl: function(fields)\n\t\t{\n\t\t\treturn (fields || []).map(function(item) {\n\t\t\t\treturn {\n\t\t\t\t\tblock: 'main-ui-filter-field-list-item',\n\t\t\t\t\tlabel: 'LABEL' in item ? item.LABEL : '',\n\t\t\t\t\tid: 'ID' in item ? item.ID : '',\n\t\t\t\t\tname: 'NAME' in item ? item.NAME : '',\n\t\t\t\t\titem: item,\n\t\t\t\t\tonClick: BX.delegate(this._clickOnFieldListItem, this)\n\t\t\t\t};\n\t\t\t}, this);\n\t\t},\n\n\n\t\t/**\n\t\t * Gets lazy load field list\n\t\t * @return {BX.Promise}\n\t\t */\n\t\tgetLazyLoadFields: function()\n\t\t{\n\t\t\tvar p = new BX.Promise();\n\n\t\t\tBX.ajax({\n\t\t\t\tmethod: 'GET',\n\t\t\t\turl: this.getParam(\"LAZY_LOAD\")[\"GET_LIST\"],\n\t\t\t\tdataType: 'json',\n\t\t\t\tonsuccess: function(response) {\n\t\t\t\t\tp.fulfill(response);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn p;\n\t\t},\n\n\n\t\t/**\n\t\t * Gets fields list popup content\n\t\t * @return {BX.Promise}\n\t\t */\n\t\tgetFieldsListPopupContent: function()\n\t\t{\n\t\t\tvar p = new BX.Promise();\n\t\t\tvar fields = this.getParam('FIELDS');\n\t\t\tvar fieldsCount = BX.type.isArray(fields) ? fields.length : 0;\n\n\t\t\tif (this.getParam('LAZY_LOAD'))\n\t\t\t{\n\t\t\t\tvar callback = function(response) {\n\n\t\t\t\t\tvar containerDecl = {\n\t\t\t\t\t\tblock: this.settings.classPopupFieldList,\n\t\t\t\t\t\tmix: this.getFieldListContainerClassName(response.length),\n\t\t\t\t\t\tcontent: this.prepareFieldsDecl(response)\n\t\t\t\t\t};\n\n\t\t\t\t\tp.fulfill(BX.decl(containerDecl));\n\t\t\t\t}.bind(this);\n\n\t\t\t\tif (BX.type.isNotEmptyObject(this.getParam('LAZY_LOAD')['CONTROLLER']))\n\t\t\t\t{\n\t\t\t\t\tvar sourceComponentName = this.getParam('LAZY_LOAD')['CONTROLLER']['componentName'];\n\t\t\t\t\tvar sourceComponentSignedParameters = this.getParam('LAZY_LOAD')['CONTROLLER']['signedParameters'];\n\n\t\t\t\t\tBX.ajax.runAction(this.getParam('LAZY_LOAD')['CONTROLLER']['getList'], {\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tfilterId: this.getParam('FILTER_ID'),\n\t\t\t\t\t\t\tcomponentName: (BX.type.isNotEmptyString(sourceComponentName) ? sourceComponentName : ''),\n\t\t\t\t\t\t\tsignedParameters: (BX.type.isNotEmptyString(sourceComponentSignedParameters) ? sourceComponentSignedParameters : '')\n\t\t\t\t\t\t}\n\t\t\t\t\t}).then(function(response) {\n\t\t\t\t\t\tcallback(response.data);\n\t\t\t\t\t}.bind(this), function (response) {\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.getLazyLoadFields().then(callback);\n\t\t\t\t}\n\n\t\t\t\treturn p;\n\t\t\t}\n\n\t\t\tvar containerDecl = {\n\t\t\t\tblock: this.settings.classPopupFieldList,\n\t\t\t\tmix: this.getFieldListContainerClassName(fieldsCount),\n\t\t\t\tcontent: this.prepareFieldsDecl(fields)\n\t\t\t};\n\n\t\t\tp.fulfill(BX.decl(containerDecl));\n\t\t\treturn p;\n\t\t},\n\n\n\t\t/**\n\t\t * Gets field loader\n\t\t * @return {BX.Loader}\n\t\t */\n\t\tgetFieldLoader: function()\n\t\t{\n\t\t\tif (!this.fieldLoader)\n\t\t\t{\n\t\t\t\tthis.fieldLoader = new BX.Loader({mode: \"custom\", size: 18, offset: {left: \"5px\", top: \"5px\"}});\n\t\t\t}\n\n\t\t\treturn this.fieldLoader;\n\t\t},\n\n\t\t_clickOnFieldListItem: function(event)\n\t\t{\n\t\t\tvar target = event.target;\n\t\t\tvar data;\n\n\t\t\tif (!BX.hasClass(target, this.settings.classFieldListItem))\n\t\t\t{\n\t\t\t\ttarget = BX.findParent(target, {className: this.settings.classFieldListItem}, true, false);\n\t\t\t}\n\n\t\t\tif (BX.type.isDomNode(target))\n\t\t\t{\n\t\t\t\ttry {\n\t\t\t\t\tdata = JSON.parse(BX.data(target, 'item'));\n\t\t\t\t} catch (err) {}\n\n\t\t\t\tvar p = new BX.Promise();\n\n\t\t\t\tif (this.getParam(\"LAZY_LOAD\"))\n\t\t\t\t{\n\t\t\t\t\tthis.getFieldLoader().show(target);\n\t\t\t\t\tvar label = target.querySelector(\".main-ui-select-inner-label\");\n\n\t\t\t\t\tif (label)\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel.classList.add(\"main-ui-no-before\");\n\t\t\t\t\t}\n\n\t\t\t\t\tvar callback = function(response) {\n\t\t\t\t\t\tp.fulfill(response);\n\t\t\t\t\t\tthis.getFieldLoader().hide();\n\t\t\t\t\t\tif (label)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlabel.classList.remove(\"main-ui-no-before\");\n\t\t\t\t\t\t}\n\t\t\t\t\t}.bind(this);\n\n\t\t\t\t\tif (BX.type.isNotEmptyObject(this.getParam('LAZY_LOAD')['CONTROLLER']))\n\t\t\t\t\t{\n\t\t\t\t\t\tvar sourceComponentName = this.getParam('LAZY_LOAD')['CONTROLLER']['componentName'];\n\t\t\t\t\t\tvar sourceComponentSignedParameters = this.getParam('LAZY_LOAD')['CONTROLLER']['signedParameters'];\n\n\t\t\t\t\t\tBX.ajax.runAction(this.getParam('LAZY_LOAD')['CONTROLLER']['getField'], {\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\tfilterId: this.getParam('FILTER_ID'),\n\t\t\t\t\t\t\t\tid: data.NAME,\n\t\t\t\t\t\t\t\tcomponentName: (BX.type.isNotEmptyString(sourceComponentName) ? sourceComponentName : ''),\n\t\t\t\t\t\t\t\tsignedParameters: (BX.type.isNotEmptyString(sourceComponentSignedParameters) ? sourceComponentSignedParameters : '')\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}).then(function(response) {\n\t\t\t\t\t\t\tcallback(response.data);\n\t\t\t\t\t\t}.bind(this), function (response) {\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.getLazyLoadField(data.NAME).then(callback);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tp.fulfill(data);\n\t\t\t\t}\n\n\t\t\t\tp.then(function(response) {\n\t\t\t\t\tthis.params.FIELDS.push(response);\n\n\t\t\t\t\tif (BX.hasClass(target, this.settings.classMenuItemChecked))\n\t\t\t\t\t{\n\t\t\t\t\t\tBX.removeClass(target, this.settings.classMenuItemChecked);\n\t\t\t\t\t\tthis.getPreset().removeField(response);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tif (BX.type.isPlainObject(response))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.getPreset().addField(response);\n\t\t\t\t\t\t\tBX.addClass(target, this.settings.classMenuItemChecked);\n\n\t\t\t\t\t\t\tif (BX.type.isString(response.HTML))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvar wrap = BX.create(\"div\");\n\t\t\t\t\t\t\t\tthis.getHiddenElement().appendChild(wrap);\n\t\t\t\t\t\t\t\tBX.html(wrap, response.HTML);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.syncFields();\n\t\t\t\t}.bind(this));\n\t\t\t}\n\t\t},\n\n\n\t\tgetHiddenElement: function()\n\t\t{\n\t\t\tif (!this.hiddenElement)\n\t\t\t{\n\t\t\t\tthis.hiddenElement = BX.create(\"div\");\n\t\t\t\tdocument.body.appendChild(this.hiddenElement);\n\t\t\t}\n\n\t\t\treturn this.hiddenElement;\n\t\t},\n\n\n\t\t/**\n\t\t * Gets lazy load fields\n\t\t * @param id\n\t\t * @return {BX.Promise}\n\t\t */\n\t\tgetLazyLoadField: function(id)\n\t\t{\n\t\t\tvar p = new BX.Promise();\n\n\t\t\tBX.ajax({\n\t\t\t\tmethod: 'get',\n\t\t\t\turl: BX.util.add_url_param(this.getParam(\"LAZY_LOAD\")[\"GET_FIELD\"], {id: id}),\n\t\t\t\tdataType: 'json',\n\t\t\t\tonsuccess: function(response) {\n\t\t\t\t\tp.fulfill(response);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn p;\n\t\t},\n\n\n\t\t/**\n\t\t * Shows fields list popup\n\t\t */\n\t\tshowFieldsPopup: function()\n\t\t{\n\t\t\tvar popup = this.getFieldsPopup();\n\t\t\tthis.adjustFieldListPopupPosition();\n\t\t\tpopup.show();\n\t\t},\n\n\n\t\t/**\n\t\t * Closes fields list popup\n\t\t */\n\t\tcloseFieldListPopup: function()\n\t\t{\n\t\t\tvar popup = this.getFieldsPopup();\n\t\t\tpopup.close();\n\t\t},\n\n\n\t\t/**\n\t\t * Adjusts field list popup position\n\t\t */\n\t\tadjustFieldListPopupPosition: function()\n\t\t{\n\t\t\tvar popup = this.getFieldsPopup();\n\t\t\tvar pos = BX.pos(this.getAddField());\n\t\t\tpos.forceBindPosition = true;\n\t\t\tpopup.adjustPosition(pos);\n\t\t},\n\n\n\t\t/**\n\t\t * Gets field list popup instance\n\t\t * @return {BX.PopupWindow}\n\t\t */\n\t\tgetFieldsPopup: function()\n\t\t{\n\t\t\tvar addFiledButton = this.getAddField();\n\n\t\t\tif (!this.fieldsPopup)\n\t\t\t{\n\t\t\t\tthis.fieldsPopup = new BX.PopupWindow(\n\t\t\t\t\tthis.getParam('FILTER_ID') + '_fields_popup',\n\t\t\t\t\taddFiledButton,\n\t\t\t\t\t{\n\t\t\t\t\t\tautoHide : true,\n\t\t\t\t\t\toffsetTop : 4,\n\t\t\t\t\t\toffsetLeft : 0,\n\t\t\t\t\t\tlightShadow : true,\n\t\t\t\t\t\tcloseIcon : false,\n\t\t\t\t\t\tcloseByEsc : false,\n\t\t\t\t\t\tnoAllPaddings: true,\n\t\t\t\t\t\tzIndex: 13\n\t\t\t\t\t}\n\t\t\t\t);\n\n\t\t\t\tthis.fieldsPopupLoader = new BX.Loader({target: this.fieldsPopup.contentContainer});\n\t\t\t\tthis.fieldsPopupLoader.show();\n\t\t\t\tthis.fieldsPopup.contentContainer.style.width = \"630px\";\n\t\t\t\tthis.fieldsPopup.contentContainer.style.height = \"330px\";\n\t\t\t\tthis.getFieldsListPopupContent().then(function(res) {\n\t\t\t\t\tthis.fieldsPopup.contentContainer.removeAttribute(\"style\");\n\t\t\t\t\tthis.fieldsPopupLoader.hide();\n\t\t\t\t\tthis.fieldsPopup.setContent(res);\n\t\t\t\t\tthis.syncFields({cache: false});\n\t\t\t\t}.bind(this));\n\t\t\t}\n\n\t\t\treturn this.fieldsPopup;\n\t\t},\n\n\t\t_onAddPresetClick: function()\n\t\t{\n\t\t\tthis.enableAddPreset();\n\t\t},\n\n\n\t\t/**\n\t\t * Enables shows wait spinner for button\n\t\t * @param {HTMLElement} button\n\t\t */\n\t\tenableWaitSate: function(button)\n\t\t{\n\t\t\t!!button && BX.addClass(button, this.settings.classWaitButtonClass);\n\t\t},\n\n\n\t\t/**\n\t\t * Disables shows wait spinner for button\n\t\t * @param {HTMLElement} button\n\t\t */\n\t\tdisableWaitState: function(button)\n\t\t{\n\t\t\t!!button && BX.removeClass(button, this.settings.classWaitButtonClass);\n\t\t},\n\n\t\t_onSaveButtonClick: function()\n\t\t{\n\t\t\tvar forAll = !!this.getSaveForAllCheckbox() && this.getSaveForAllCheckbox().checked;\n\t\t\tvar input = this.getPreset().getAddPresetFieldInput();\n\t\t\tvar mask = input.parentNode.querySelector(\".main-ui-filter-edit-mask\");\n\t\t\tvar presetName;\n\n\t\t\tfunction onAnimationEnd(event)\n\t\t\t{\n\t\t\t\tif (event.animationName === \"fieldError\")\n\t\t\t\t{\n\t\t\t\t\tevent.currentTarget.removeEventListener(\"animationend\", onAnimationEnd);\n\t\t\t\t\tevent.currentTarget.removeEventListener(\"oAnimationEnd\", onAnimationEnd);\n\t\t\t\t\tevent.currentTarget.removeEventListener(\"webkitAnimationEnd\", onAnimationEnd);\n\t\t\t\t\tevent.currentTarget.classList.remove(\"main-ui-filter-error\");\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction showLengthError(mask)\n\t\t\t{\n\t\t\t\tmask.addEventListener(\"animationend\", onAnimationEnd);\n\t\t\t\tmask.addEventListener(\"oAnimationEnd\", onAnimationEnd);\n\t\t\t\tmask.addEventListener(\"webkitAnimationEnd\", onAnimationEnd);\n\t\t\t\tmask.classList.add(\"main-ui-filter-error\");\n\t\t\t\tvar promise = new BX.Promise();\n\t\t\t\tpromise.fulfill(true);\n\t\t\t\treturn promise;\n\t\t\t}\n\n\t\t\tthis.enableWaitSate(this.getFindButton());\n\n\t\t\tif (this.isAddPresetEnabled() && !forAll)\n\t\t\t{\n\t\t\t\tpresetName = input.value;\n\n\t\t\t\tif (presetName.length)\n\t\t\t\t{\n\t\t\t\t\tthis.savePreset();\n\t\t\t\t\tthis.disableAddPreset();\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tshowLengthError(mask).then(function() {\n\t\t\t\t\t\tinput.focus();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (this.isEditEnabled())\n\t\t\t{\n\t\t\t\tvar preset = this.getPreset();\n\t\t\t\tvar presetNode = preset.getPresetNodeById(preset.getCurrentPresetId());\n\t\t\t\tvar presetNameInput = preset.getPresetInput(presetNode);\n\n\t\t\t\tif (presetNameInput.value.length)\n\t\t\t\t{\n\t\t\t\t\tpreset.updateEditablePreset(preset.getCurrentPresetId());\n\t\t\t\t\tthis.saveUserSettings(forAll);\n\t\t\t\t\t!forAll && this.disableEdit();\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tvar presetMask = presetNode.querySelector(\".main-ui-filter-edit-mask\");\n\t\t\t\t\tshowLengthError(presetMask).then(function() {\n\t\t\t\t\t\tpresetNameInput.focus();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t_onCancelButtonClick: function()\n\t\t{\n\t\t\tthis.disableAddPreset();\n\t\t\tthis.getPreset().clearAddPresetFieldInput();\n\t\t\tthis.disableEdit();\n\t\t\t!!this.getSaveForAllCheckbox() && (this.getSaveForAllCheckbox().checked = null);\n\t\t},\n\n\t\t_onGridReady: function(grid)\n\t\t{\n\t\t\tif (!this.grid && grid.getContainerId() === this.getParam('GRID_ID'))\n\t\t\t{\n\t\t\t\tthis.grid = grid;\n\t\t\t}\n\t\t},\n\n\t\t_onFilterMousedown: function(event)\n\t\t{\n\t\t\tvar target = event.target;\n\n\t\t\tif (this.getFields().isDragButton(target))\n\t\t\t{\n\t\t\t\tvar inputs = BX.Filter.Utils.getByTag(target.parentNode, 'input', true);\n\n\t\t\t\t(inputs || []).forEach(function(item) {\n\t\t\t\t\tBX.fireEvent(item, 'blur');\n\t\t\t\t});\n\n\t\t\t\tBX.fireEvent(this.getFilter(), 'click');\n\t\t\t}\n\t\t},\n\n\t\t_onFilterClick: function(event)\n\t\t{\n\t\t\tvar Fields = this.getFields();\n\t\t\tvar Presets = this.getPreset();\n\t\t\tvar field;\n\n\t\t\tif (Fields.isFieldDelete(event.target))\n\t\t\t{\n\t\t\t\tfield = Fields.getField(event.target);\n\t\t\t\tPresets.removeField(field);\n\t\t\t}\n\n\t\t\tif (Fields.isFieldValueDelete(event.target))\n\t\t\t{\n\t\t\t\tfield = Fields.getField(event.target);\n\t\t\t\tFields.clearFieldValue(field);\n\t\t\t}\n\t\t},\n\n\n\t\t/**\n\t\t * Gets filter buttons container\n\t\t * @return {?HTMLElement}\n\t\t */\n\t\tgetButtonsContainer: function()\n\t\t{\n\t\t\treturn BX.Filter.Utils.getByClass(this.getFilter(), this.settings.classButtonsContainer);\n\t\t},\n\n\n\t\t/**\n\t\t * Gets save button element\n\t\t * @return {?HTMLElement}\n\t\t */\n\t\tgetSaveButton: function()\n\t\t{\n\t\t\treturn BX.Filter.Utils.getByClass(this.getFilter(), this.settings.classSaveButton);\n\t\t},\n\n\n\t\t/**\n\t\t * Gets cancel element\n\t\t * @return {?HTMLElement}\n\t\t */\n\t\tgetCancelButton: function()\n\t\t{\n\t\t\treturn BX.Filter.Utils.getByClass(this.getFilter(), this.settings.classCancelButton);\n\t\t},\n\n\n\t\t/**\n\t\t * Gets find button element\n\t\t * @return {?HTMLElement}\n\t\t */\n\t\tgetFindButton: function()\n\t\t{\n\t\t\treturn BX.Filter.Utils.getByClass(this.getFilter(), this.settings.classFindButton);\n\t\t},\n\n\n\t\t/**\n\t\t * Gets reset button element\n\t\t * @return {?HTMLElement}\n\t\t */\n\t\tgetResetButton: function()\n\t\t{\n\t\t\treturn BX.Filter.Utils.getByClass(this.getFilter(), this.settings.classResetButton);\n\t\t},\n\n\n\t\t/**\n\t\t * Gets add preset button\n\t\t * @return {?HTMLElement}\n\t\t */\n\t\tgetAddPresetButton: function()\n\t\t{\n\t\t\treturn BX.Filter.Utils.getByClass(this.getFilter(), this.settings.classAddPresetButton);\n\t\t},\n\n\n\t\t/**\n\t\t * Checks that add preset mode enabled\n\t\t * @return {boolean}\n\t\t */\n\t\tisAddPresetEnabled: function()\n\t\t{\n\t\t\treturn this.isAddPresetModeState;\n\t\t},\n\n\n\t\t/**\n\t\t * Enables add preset mode\n\t\t */\n\t\tenableAddPreset: function()\n\t\t{\n\t\t\tvar Preset = this.getPreset();\n\t\t\tvar addPresetField = Preset.getAddPresetField();\n\t\t\tvar addPresetFieldInput = Preset.getAddPresetFieldInput();\n\t\t\tvar buttonsContainer = this.getButtonsContainer();\n\n\t\t\tBX.show(addPresetField);\n\t\t\tBX.show(buttonsContainer);\n\t\t\tBX.hide(this.getPresetButtonsContainer());\n\t\t\tthis.hideForAllCheckbox();\n\n\t\t\tif (BX.type.isDomNode(addPresetFieldInput))\n\t\t\t{\n\t\t\t\taddPresetFieldInput.focus();\n\t\t\t}\n\n\t\t\tBX.addClass(this.getSidebarControlsContainer(), this.settings.classDisabled);\n\n\t\t\tthis.isAddPresetModeState = true;\n\t\t},\n\n\n\t\t/**\n\t\t * Disables add preset mode\n\t\t */\n\t\tdisableAddPreset: function()\n\t\t{\n\t\t\tvar Preset = this.getPreset();\n\t\t\tvar addPresetField = Preset.getAddPresetField();\n\t\t\tvar buttonsContainer = this.getButtonsContainer();\n\n\t\t\tBX.hide(addPresetField);\n\t\t\tBX.hide(buttonsContainer);\n\t\t\tBX.show(this.getPresetButtonsContainer());\n\t\t\tthis.showForAllCheckbox();\n\n\t\t\tPreset.getAddPresetFieldInput().value = '';\n\n\t\t\tBX.removeClass(this.getSidebarControlsContainer(), this.settings.classDisabled);\n\n\t\t\tthis.isAddPresetModeState = false;\n\t\t},\n\n\n\t\t/**\n\t\t * Gets control from field list\n\t\t * @return {?HTMLElement[]}\n\t\t */\n\t\tgetControls: function()\n\t\t{\n\t\t\tvar container = this.getFieldListContainer();\n\t\t\tvar controls = null;\n\n\t\t\tif (BX.type.isDomNode(container))\n\t\t\t{\n\t\t\t\tcontrols = BX.Filter.Utils.getByClass(container, this.settings.classControl, true);\n\t\t\t}\n\n\t\t\treturn controls;\n\t\t},\n\n\n\t\t/**\n\t\t * Gets filter fields\n\t\t * @return {?HTMLElement[]}\n\t\t */\n\t\tgetFilterFields: function()\n\t\t{\n\t\t\tvar container = this.getFieldListContainer();\n\t\t\tvar fields = [];\n\t\t\tvar groups = [];\n\n\t\t\tif (BX.type.isDomNode(container))\n\t\t\t{\n\t\t\t\tfields = BX.Filter.Utils.getByClass(container, this.settings.classField, true);\n\t\t\t\tgroups = BX.Filter.Utils.getByClass(container, this.settings.classFieldGroup, true);\n\n\t\t\t\tif (!BX.type.isArray(fields))\n\t\t\t\t{\n\t\t\t\t\tfields = [];\n\t\t\t\t}\n\n\t\t\t\tif (BX.type.isArray(groups))\n\t\t\t\t{\n\t\t\t\t\tgroups.forEach(function(current) {\n\t\t\t\t\t\tfields.push(current);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn fields;\n\t\t},\n\n\n\t\t/**\n\t\t * Gets filter fields values\n\t\t * @return {object}\n\t\t */\n\t\tgetFilterFieldsValues: function()\n\t\t{\n\t\t\tvar fields = this.getPreset().getFields();\n\t\t\tvar Search = this.getSearch();\n\t\t\tvar values = {};\n\t\t\tvar type, name;\n\n\t\t\tvalues['FIND'] = Search.getInput().value;\n\n\t\t\tif (BX.type.isArray(fields) && fields.length)\n\t\t\t{\n\t\t\t\tfields.forEach(function(current) {\n\t\t\t\t\ttype = BX.data(current, 'type');\n\t\t\t\t\tname = BX.data(current, 'name');\n\n\t\t\t\t\tswitch (type) {\n\t\t\t\t\t\tcase this.types.STRING : {\n\t\t\t\t\t\t\tthis.prepareControlStringValue(values, current);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcase this.types.TEXTAREA : {\n\t\t\t\t\t\t\tthis.prepareControlTextareaValue(values, current);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcase this.types.NUMBER : {\n\t\t\t\t\t\t\tthis.prepareControlNumberValue(values, name, current);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcase this.types.DATE : {\n\t\t\t\t\t\t\tthis.prepareControlDateValue(values, name, current);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcase this.types.CUSTOM_DATE : {\n\t\t\t\t\t\t\tthis.prepareControlCustomDateValue(values, name, current);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcase this.types.SELECT : {\n\t\t\t\t\t\t\tthis.prepareControlSelectValue(values, name, current);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcase this.types.MULTI_SELECT : {\n\t\t\t\t\t\t\tthis.prepareControlMultiselectValue(values, name, current);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcase this.types.DEST_SELECTOR : {\n\t\t\t\t\t\t\tthis.prepareControlCustomEntityValue(values, name, current);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcase this.types.CUSTOM : {\n\t\t\t\t\t\t\tthis.prepareControlCustomValue(values, name, current);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcase this.types.CUSTOM_ENTITY : {\n\t\t\t\t\t\t\tthis.prepareControlCustomEntityValue(values, name, current);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tdefault : {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}, this);\n\t\t\t}\n\n\t\t\treturn values;\n\t\t},\n\n\n\t\t/**\n\t\t * @param values\n\t\t * @param name\n\t\t * @param field\n\t\t */\n\t\tprepareControlCustomEntityValue: function(values, name, field)\n\t\t{\n\t\t\tvar squares = this.fetchSquares(field);\n\t\t\tvar squaresData = this.fetchSquaresData(squares);\n\t\t\tvar isMultiple = BX.Main.ui.CustomEntity.isMultiple(field);\n\n\t\t\tvalues[name] = '';\n\t\t\tvalues[name + '_label'] = '';\n\n\t\t\tif (isMultiple)\n\t\t\t{\n\t\t\t\tvalues[name] = [];\n\t\t\t\tvalues[name + '_label'] = [];\n\n\t\t\t\t!!squaresData && squaresData.forEach(function(item) {\n\t\t\t\t\tvalues[name].push(item._value.toString());\n\t\t\t\t\tvalues[name + '_label'].push(item._label.toString());\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (squaresData.length)\n\t\t\t\t{\n\t\t\t\t\tvalues[name] = squaresData[0]._value.toString();\n\t\t\t\t\tvalues[name + '_label'] = squaresData[0]._label.toString();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\n\t\t/**\n\t\t * @param {HTMLElement} field\n\t\t * @return {HTMLElement[]}\n\t\t */\n\t\tfetchSquares: function(field)\n\t\t{\n\t\t\treturn !!field ? BX.Filter.Utils.getByClass(field, this.settings.classSquare, true) : [];\n\t\t},\n\n\n\t\t/**\n\t\t * @param {HTMLElement[]} squares\n\t\t * @return {object[]}\n\t\t */\n\t\tfetchSquaresData: function(squares)\n\t\t{\n\t\t\treturn squares.map(function(square) {\n\t\t\t\treturn JSON.parse(BX.data(square, 'item'));\n\t\t\t}, this);\n\t\t},\n\n\n\t\t/**\n\t\t * @param {object} values\n\t\t * @param {string} name\n\t\t * @param {HTMLElement} field\n\t\t */\n\t\tprepareControlCustomValue: function(values, name, field)\n\t\t{\n\t\t\tvar stringFields = BX.Filter.Utils.getByTag(field, 'input', true);\n\n\t\t\tvalues[name] = '';\n\n\t\t\tif (BX.type.isArray(stringFields))\n\t\t\t{\n\t\t\t\tstringFields.forEach(function(current) {\n\t\t\t\t\tif (BX.type.isNotEmptyString(current.name))\n\t\t\t\t\t{\n\t\t\t\t\t\tvalues[current.name] = current.value;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\n\t\tprepareControlMultiselectValue: function(values, name, field)\n\t\t{\n\t\t\tvar select = BX.Filter.Utils.getByClass(field, this.settings.classMultiSelect);\n\t\t\tvar value = JSON.parse(BX.data(select, 'value'));\n\n\t\t\tvalues[name] = '';\n\n\t\t\tif (BX.type.isArray(value) && value.length)\n\t\t\t{\n\t\t\t\tvalues[name] = {};\n\t\t\t\tvalue.forEach(function(current, index) {\n\t\t\t\t\tvalues[name][index] = current.VALUE;\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\n\t\tprepareControlSelectValue: function(values, name, field)\n\t\t{\n\t\t\tvar select = BX.Filter.Utils.getByClass(field, this.settings.classSelect);\n\t\t\tvar value = JSON.parse(BX.data(select, 'value'));\n\n\t\t\tvalues[name] = value.VALUE;\n\t\t},\n\n\t\tprepareControlCustomDateValue: function(values, name, field)\n\t\t{\n\t\t\tvar daysControl = field.querySelector(\"[data-name=\\\"\"+name + '_days'+\"\\\"]\");\n\n\t\t\tif (daysControl)\n\t\t\t{\n\t\t\t\tvar daysValue = JSON.parse(daysControl.dataset.value);\n\n\t\t\t\tvalues[name + '_days'] = daysValue.map(function(item) {\n\t\t\t\t\treturn item.VALUE;\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tvar monthsControl = field.querySelector(\"[data-name=\\\"\"+name + '_months'+\"\\\"]\");\n\n\t\t\tif (monthsControl)\n\t\t\t{\n\t\t\t\tvar monthsValue = JSON.parse(monthsControl.dataset.value);\n\n\t\t\t\tvalues[name + '_months'] = monthsValue.map(function(item) {\n\t\t\t\t\treturn item.VALUE;\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tvar yearsControl = field.querySelector(\"[data-name=\\\"\"+name + '_years'+\"\\\"]\");\n\n\t\t\tif (yearsControl)\n\t\t\t{\n\t\t\t\tvar yearsValue = JSON.parse(yearsControl.dataset.value);\n\n\t\t\t\tvalues[name + '_years'] = yearsValue.map(function(item) {\n\t\t\t\t\treturn item.VALUE;\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\n\t\tprepareControlDateValue: function(values, name, field, withAdditional)\n\t\t{\n\t\t\tvar additionalFieldsContainer = field.querySelector('.main-ui-filter-additional-fields-container');\n\n\t\t\tif (additionalFieldsContainer && !withAdditional)\n\t\t\t{\n\t\t\t\tBX.remove(additionalFieldsContainer);\n\t\t\t}\n\n\t\t\tvar select = BX.Filter.Utils.getByClass(field, this.settings.classSelect);\n\t\t\tvar yearsSwitcher = field.querySelector(\".main-ui-select[data-name*=\\\"_allow_year\\\"]\");\n\t\t\tvar selectName = name + this.settings.datePostfix;\n\t\t\tvar fromName = name + this.settings.fromPostfix;\n\t\t\tvar toName = name + this.settings.toPostfix;\n\t\t\tvar daysName = name + this.settings.daysPostfix;\n\t\t\tvar monthName = name + this.settings.monthPostfix;\n\t\t\tvar quarterName = name + this.settings.quarterPostfix;\n\t\t\tvar yearName = name + this.settings.yearPostfix;\n\t\t\tvar yearsSwitcherName = name + \"_allow_year\";\n\t\t\tvar selectValue, stringFields, controls, controlName, yearsSwitcherValue;\n\n\t\t\tvalues[selectName] = '';\n\t\t\tvalues[fromName] = '';\n\t\t\tvalues[toName] = '';\n\t\t\tvalues[daysName] = '';\n\t\t\tvalues[monthName] = '';\n\t\t\tvalues[quarterName] = '';\n\t\t\tvalues[yearName] = '';\n\n\t\t\tvar input = field.querySelector(\".main-ui-date-input\");\n\n\t\t\tif (input && input.dataset.isValid === \"false\")\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tselectValue = JSON.parse(BX.data(select, 'value'));\n\t\t\tvalues[selectName] = selectValue.VALUE;\n\n\t\t\tif (yearsSwitcher)\n\t\t\t{\n\t\t\t\tyearsSwitcherValue = JSON.parse(BX.data(yearsSwitcher, 'value'));\n\t\t\t\tvalues[yearsSwitcherName] = yearsSwitcherValue.VALUE;\n\t\t\t}\n\n\t\t\tswitch (selectValue.VALUE) {\n\t\t\t\tcase this.dateTypes.EXACT : {\n\t\t\t\t\tstringFields = BX.Filter.Utils.getByClass(field, this.settings.classDateInput);\n\t\t\t\t\tvalues[fromName] = stringFields.value;\n\t\t\t\t\tvalues[toName] = stringFields.value;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tcase this.dateTypes.QUARTER : {\n\t\t\t\t\tcontrols = BX.Filter.Utils.getByClass(field, this.settings.classControl, true);\n\n\t\t\t\t\tif (BX.type.isArray(controls))\n\t\t\t\t\t{\n\t\t\t\t\t\tcontrols.forEach(function(current) {\n\t\t\t\t\t\t\tcontrolName = BX.data(current, 'name');\n\n\t\t\t\t\t\t\tif (controlName && controlName.indexOf('_quarter') !== -1)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvalues[quarterName] = JSON.parse(BX.data(current, 'value')).VALUE;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\tcontrolName\n\t\t\t\t\t\t\t\t&& controlName.endsWith('_year')\n\t\t\t\t\t\t\t\t&& !controlName.endsWith('_allow_year')\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvalues[yearName] = JSON.parse(BX.data(current, 'value')).VALUE;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}, this);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tcase this.dateTypes.YEAR : {\n\t\t\t\t\tcontrols = BX.Filter.Utils.getByClass(field, this.settings.classControl, true);\n\n\t\t\t\t\tif (BX.type.isArray(controls))\n\t\t\t\t\t{\n\t\t\t\t\t\tcontrols.forEach(function(current) {\n\t\t\t\t\t\t\tcontrolName = BX.data(current, 'name');\n\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\tcontrolName\n\t\t\t\t\t\t\t\t&& controlName.endsWith('_year')\n\t\t\t\t\t\t\t\t&& !controlName.endsWith('_allow_year')\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvalues[yearName] = JSON.parse(BX.data(current, 'value')).VALUE;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}, this);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tcase this.dateTypes.MONTH : {\n\t\t\t\t\tcontrols = BX.Filter.Utils.getByClass(field, this.settings.classControl, true);\n\n\t\t\t\t\tif (BX.type.isArray(controls))\n\t\t\t\t\t{\n\t\t\t\t\t\tcontrols.forEach(function(current) {\n\t\t\t\t\t\t\tcontrolName = BX.data(current, 'name');\n\n\t\t\t\t\t\t\tif (controlName && controlName.indexOf('_month') !== -1)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvalues[monthName] = JSON.parse(BX.data(current, 'value')).VALUE;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\tcontrolName\n\t\t\t\t\t\t\t\t&& controlName.endsWith('_year')\n\t\t\t\t\t\t\t\t&& !controlName.endsWith('_allow_year')\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvalues[yearName] = JSON.parse(BX.data(current, 'value')).VALUE;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}, this);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tcase this.additionalDateTypes.PREV_DAY :\n\t\t\t\tcase this.additionalDateTypes.NEXT_DAY :\n\t\t\t\tcase this.additionalDateTypes.MORE_THAN_DAYS_AGO :\n\t\t\t\tcase this.additionalDateTypes.AFTER_DAYS :\n\t\t\t\tcase this.dateTypes.NEXT_DAYS :\n\t\t\t\tcase this.dateTypes.PREV_DAYS : {\n\t\t\t\t\tvar control = BX.Filter.Utils.getByClass(field, this.settings.classNumberInput);\n\n\t\t\t\t\tif (!!control && control.name === daysName)\n\t\t\t\t\t{\n\t\t\t\t\t\tvalues[daysName] = control.value;\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tcase this.dateTypes.RANGE : {\n\t\t\t\t\tstringFields = BX.Filter.Utils.getByClass(field, this.settings.classDateInput, true);\n\t\t\t\t\tstringFields.forEach(function(current) {\n\t\t\t\t\t\tif (current.name === fromName)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvalues[fromName] = current.value;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (current.name === toName)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvalues[toName] = current.value;\n\t\t\t\t\t\t}\n\t\t\t\t\t}, this);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tcase \"CUSTOM_DATE\" : {\n\t\t\t\t\tvar customValues = {};\n\t\t\t\t\tthis.prepareControlCustomDateValue(customValues, name, field);\n\t\t\t\t\tvalues[name + '_days'] = customValues[name + '_days'];\n\t\t\t\t\tvalues[monthName] = customValues[name + '_months'];\n\t\t\t\t\tvalues[yearName] = customValues[name + '_years'];\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tdefault : {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (additionalFieldsContainer && !withAdditional)\n\t\t\t{\n\t\t\t\tBX.append(additionalFieldsContainer, field);\n\t\t\t}\n\n\t\t\tvar additionalFields = Array.from(\n\t\t\t\tfield.querySelectorAll(\n\t\t\t\t\t'.main-ui-filter-additional-fields-container > [data-type=\"DATE\"]',\n\t\t\t\t)\n\t\t\t);\n\n\t\t\tif (additionalFields)\n\t\t\t{\n\t\t\t\tadditionalFields.forEach(function(additionalField) {\n\t\t\t\t\tvar name = additionalField.dataset.name;\n\t\t\t\t\tthis.prepareControlDateValue(values, name, additionalField, true);\n\t\t\t\t}, this);\n\t\t\t}\n\t\t},\n\n\t\tprepareControlNumberValue: function(values, name, field)\n\t\t{\n\t\t\tvar stringFields = BX.Filter.Utils.getByClass(field, this.settings.classNumberInput, true);\n\t\t\tvar select = BX.Filter.Utils.getByClass(field, this.settings.classSelect);\n\t\t\tvar selectName = name + this.settings.numberPostfix;\n\t\t\tvar fromName = name + this.settings.fromPostfix;\n\t\t\tvar toName = name + this.settings.toPostfix;\n\t\t\tvar selectValue;\n\n\t\t\tvalues[fromName] = '';\n\t\t\tvalues[toName] = '';\n\n\t\t\tselectValue = JSON.parse(BX.data(select, 'value'));\n\t\t\tvalues[selectName] = selectValue.VALUE;\n\n\t\t\tstringFields.forEach(function(current) {\n\t\t\t\tif (current.name.indexOf(this.settings.fromPostfix) !== -1)\n\t\t\t\t{\n\t\t\t\t\tvalues[fromName] = current.value || '';\n\n\t\t\t\t\tif (values[selectName] === 'exact')\n\t\t\t\t\t{\n\t\t\t\t\t\tvalues[toName] = current.value || '';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (current.name.indexOf(this.settings.toPostfix) !== -1)\n\t\t\t\t{\n\t\t\t\t\tvalues[toName] = current.value || '';\n\t\t\t\t}\n\t\t\t}, this);\n\t\t},\n\n\t\tprepareControlStringValue: function(values, field)\n\t\t{\n\t\t\tvar control = BX.Filter.Utils.getByClass(field, this.settings.classStringInput);\n\t\t\tvar name;\n\n\t\t\tif (BX.type.isDomNode(control))\n\t\t\t{\n\t\t\t\tname = control.name;\n\t\t\t\tvalues[name] = control.value;\n\t\t\t}\n\t\t},\n\n\t\tprepareControlTextareaValue: function(values, field)\n\t\t{\n\t\t\tvar control = BX.Filter.Utils.getByClass(field, this.settings.classStringInput);\n\t\t\tvar name;\n\n\t\t\tif (BX.type.isDomNode(control))\n\t\t\t{\n\t\t\t\tname = control.name;\n\t\t\t\tvalues[name] = control.value;\n\t\t\t}\n\t\t},\n\n\n\t\t/**\n\t\t * Shows grid animation\n\t\t */\n\t\tshowGridAnimation: function()\n\t\t{\n\t\t\tthis.grid && this.grid.tableFade();\n\t\t},\n\n\n\t\t/**\n\t\t * Hides grid animations\n\t\t */\n\t\thideGridAnimation: function()\n\t\t{\n\t\t\tthis.grid && this.grid.tableUnfade();\n\t\t},\n\n\t\t/**\n\t\t * @private\n\t\t * @param {?Boolean} clear - is need reset filter\n\t\t * @param {?Boolean} applyPreset - is need apply preset\n\t\t * @return {String}\n\t\t */\n\t\tgetPresetId: function(clear, applyPreset)\n\t\t{\n\t\t\tvar presetId = this.getPreset().getCurrentPresetId();\n\n\t\t\tif ((!this.isEditEnabled() && !this.isAddPresetEnabled() && !applyPreset) ||\n\t\t\t\t(presetId === 'default_filter' && !clear))\n\t\t\t{\n\t\t\t\tpresetId = 'tmp_filter';\n\t\t\t}\n\n\t\t\treturn presetId;\n\t\t},\n\n\t\t/**\n\t\t * Applies filter\n\t\t * @param {?Boolean} [clear] - is need reset filter\n\t\t * @param {?Boolean} [applyPreset] - is need apply preset\n\t\t * @return {BX.Promise}\n\t\t */\n\t\tapplyFilter: function(clear, applyPreset)\n\t\t{\n\t\t\tvar presetId = this.getPresetId(clear, applyPreset);\n\t\t\tvar filterId = this.getParam('FILTER_ID');\n\t\t\tvar promise = new BX.Promise(null, this);\n\t\t\tvar Preset = this.getPreset();\n\t\t\tvar Search = this.getSearch();\n\t\t\tvar applyParams = {autoResolve: !this.grid};\n\t\t\tvar self = this;\n\n\t\t\tthis.clearGet();\n\t\t\tthis.showGridAnimation();\n\n\t\t\tvar action = clear ? \"clear\" : \"apply\";\n\n\t\t\tBX.onCustomEvent(window, 'BX.Main.Filter:beforeApply', [filterId, {action: action}, this, promise]);\n\n\t\t\tthis.updatePreset(presetId, null, clear, null).then(function() {\n\t\t\t\tSearch.updatePreset(Preset.getPreset(presetId));\n\n\t\t\t\tif (self.getParam('VALUE_REQUIRED'))\n\t\t\t\t{\n\t\t\t\t\tif (!Search.getSquares().length)\n\t\t\t\t\t{\n\t\t\t\t\t\tself.lastPromise = Preset.applyPinnedPreset();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}).then(function() {\n\t\t\t\tvar params = {apply_filter: 'Y', clear_nav: 'Y'};\n\t\t\t\tvar fulfill = BX.delegate(promise.fulfill, promise);\n\t\t\t\tvar reject = BX.delegate(promise.reject, promise);\n\t\t\t\tself.grid && self.grid.reloadTable('POST', params, fulfill, reject);\n\t\t\t\tBX.onCustomEvent(window, 'BX.Main.Filter:apply', [filterId, {action: action}, self, promise, applyParams]);\n\t\t\t\tapplyParams.autoResolve && promise.fulfill();\n\t\t\t});\n\n\t\t\treturn promise;\n\t\t},\n\n\n\t\t/**\n\t\t * Gets add field buttons\n\t\t * @return {?HTMLElement}\n\t\t */\n\t\tgetAddField: function()\n\t\t{\n\t\t\treturn BX.Filter.Utils.getByClass(this.getFilter(), this.settings.classAddField);\n\t\t},\n\n\n\t\t/**\n\t\t * Gets fields list container\n\t\t * @return {?HTMLElement}\n\t\t */\n\t\tgetFieldListContainer: function()\n\t\t{\n\t\t\treturn BX.Filter.Utils.getByClass(this.getFilter(), this.settings.classFileldControlList);\n\t\t},\n\n\n\t\t/**\n\t\t * @return {BX.Filter.Fields}\n\t\t */\n\t\tgetFields: function()\n\t\t{\n\t\t\tif (!(this.fields instanceof BX.Filter.Fields))\n\t\t\t{\n\t\t\t\tthis.fields = new BX.Filter.Fields(this);\n\t\t\t}\n\n\t\t\treturn this.fields;\n\t\t},\n\n\n\t\t/**\n\t\t * @return {BX.Filter.Presets}\n\t\t */\n\t\tgetPreset: function()\n\t\t{\n\t\t\tif (!(this.presets instanceof BX.Filter.Presets))\n\t\t\t{\n\t\t\t\tthis.presets = new BX.Filter.Presets(this);\n\t\t\t}\n\n\t\t\treturn this.presets;\n\t\t},\n\n\n\t\t/**\n\t\t * @param controlData\n\t\t * @return {*}\n\t\t */\n\t\tresetControlData: function(controlData)\n\t\t{\n\t\t\tif (BX.type.isPlainObject(controlData))\n\t\t\t{\n\t\t\t\tswitch (controlData.TYPE)\n\t\t\t\t{\n\t\t\t\t\tcase this.types.MULTI_SELECT : {\n\t\t\t\t\t\tcontrolData.VALUE = [];\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase this.types.SELECT : {\n\t\t\t\t\t\tcontrolData.VALUE = controlData.ITEMS[0];\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase this.types.DATE : {\n\t\t\t\t\t\tcontrolData.SUB_TYPE = controlData.SUB_TYPES[0];\n\t\t\t\t\t\tcontrolData.VALUES = {\n\t\t\t\t\t\t\t'_from': '',\n\t\t\t\t\t\t\t'_to': '',\n\t\t\t\t\t\t\t'_days': '',\n\t\t\t\t\t\t\t'_quarter': '',\n\t\t\t\t\t\t\t'_year': ''\n\t\t\t\t\t\t};\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase this.types.CUSTOM_DATE : {\n\t\t\t\t\t\tcontrolData.VALUES = {\n\t\t\t\t\t\t\t'days': [],\n\t\t\t\t\t\t\t'months': [],\n\t\t\t\t\t\t\t'years': []\n\t\t\t\t\t\t};\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase this.types.NUMBER : {\n\t\t\t\t\t\tcontrolData.SUB_TYPE = controlData.SUB_TYPES[0];\n\t\t\t\t\t\tcontrolData.VALUES = {\n\t\t\t\t\t\t\t'_from': '',\n\t\t\t\t\t\t\t'_to': ''\n\t\t\t\t\t\t};\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase this.types.DEST_SELECTOR : {\n\t\t\t\t\t\tcontrolData.VALUES = {\n\t\t\t\t\t\t\t'_label': '',\n\t\t\t\t\t\t\t'_value': ''\n\t\t\t\t\t\t};\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase this.types.CUSTOM_ENTITY : {\n\t\t\t\t\t\tcontrolData.VALUES = {\n\t\t\t\t\t\t\t'_label': '',\n\t\t\t\t\t\t\t'_value': ''\n\t\t\t\t\t\t};\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase this.types.CUSTOM : {\n\t\t\t\t\t\tcontrolData._VALUE = '';\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tdefault : {\n\t\t\t\t\t\tcontrolData.VALUE = '';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn controlData;\n\t\t},\n\n\n\t\tclearControl: function(name)\n\t\t{\n\t\t\tvar control = this.getPreset().getField({NAME: name});\n\t\t\tvar controlData, newControl;\n\n\t\t\tif (BX.type.isDomNode(control))\n\t\t\t{\n\t\t\t\tcontrolData = this.getFieldByName(name);\n\t\t\t\tcontrolData = this.resetControlData(controlData);\n\n\t\t\t\tnewControl = this.getPreset().createControl(controlData);\n\t\t\t\tBX.insertAfter(newControl, control);\n\t\t\t\tBX.remove(control);\n\t\t\t}\n\t\t},\n\n\t\tclearControls: function(squareData)\n\t\t{\n\t\t\tif (BX.type.isArray(squareData))\n\t\t\t{\n\t\t\t\tsquareData.forEach(function(item) {\n\t\t\t\t\t'name' in item && this.clearControl(item.name);\n\t\t\t\t}, this);\n\t\t\t}\n\n\t\t\telse if (BX.type.isPlainObject(squareData) && 'name' in squareData)\n\t\t\t{\n\t\t\t\tthis.clearControl(squareData.name);\n\t\t\t}\n\t\t},\n\n\n\t\t/**\n\t\t * Gets filter popup template\n\t\t * @return {?string}\n\t\t */\n\t\tgetTemplate: function()\n\t\t{\n\t\t\treturn BX.html(BX(this.settings.generalTemplateId));\n\t\t},\n\n\t\tisIe: function()\n\t\t{\n\t\t\tif (!BX.type.isBoolean(this.ie))\n\t\t\t{\n\t\t\t\tthis.ie = BX.hasClass(document.documentElement, 'bx-ie');\n\t\t\t}\n\n\t\t\treturn this.ie;\n\t\t},\n\n\n\t\t/**\n\t\t * Closes filter popup\n\t\t */\n\t\tclosePopup: function()\n\t\t{\n\t\t\tvar popup = this.getPopup();\n\t\t\tvar popupContainer = popup.popupContainer;\n\t\t\tvar configCloseDelay = this.settings.get('FILTER_CLOSE_DELAY');\n\t\t\tvar closeDelay;\n\n\t\t\tsetTimeout(BX.delegate(function() {\n\n\t\t\t\tif (!this.isIe())\n\t\t\t\t{\n\t\t\t\t\tBX.removeClass(popupContainer, this.settings.classAnimationShow);\n\t\t\t\t\tBX.addClass(popupContainer, this.settings.classAnimationClose);\n\n\t\t\t\t\tcloseDelay = parseFloat(BX.style(popupContainer, 'animation-duration'));\n\n\t\t\t\t\tif (BX.type.isNumber(closeDelay))\n\t\t\t\t\t{\n\t\t\t\t\t\tcloseDelay = closeDelay * 1000;\n\t\t\t\t\t}\n\n\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\tpopup.close();\n\t\t\t\t\t}, closeDelay);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tpopup.close();\n\t\t\t\t}\n\t\t\t}, this), configCloseDelay);\n\n\t\t\tif (this.getParam(\"LIMITS_ENABLED\"))\n\t\t\t{\n\t\t\t\tBX.removeClass(this.getFilter(), this.settings.classLimitsAnimation);\n\t\t\t}\n\n\t\t\tthis.closeFieldListPopup();\n\t\t\tthis.adjustFocus();\n\t\t},\n\n\n\t\t/**\n\t\t * Shows filter popup\n\t\t */\n\t\tshowPopup: function()\n\t\t{\n\t\t\tvar popup = this.getPopup();\n\t\t\tvar popupContainer;\n\n\t\t\tif (!popup.isShown())\n\t\t\t{\n\t\t\t\tthis.isOpened = true;\n\t\t\t\tvar showDelay = this.settings.get('FILTER_SHOW_DELAY');\n\n\t\t\t\tsetTimeout(BX.delegate(function() {\n\t\t\t\t\tpopup.show();\n\n\t\t\t\t\tif (!this.isIe())\n\t\t\t\t\t{\n\t\t\t\t\t\tpopupContainer = popup.popupContainer;\n\t\t\t\t\t\tBX.removeClass(popupContainer, this.settings.classAnimationClose);\n\t\t\t\t\t\tBX.addClass(popupContainer, this.settings.classAnimationShow);\n\t\t\t\t\t\tBX.onCustomEvent(window, \"BX.Main.Filter:show\", [this]);\n\t\t\t\t\t}\n\n\t\t\t\t\tvar textareas = [].slice.call(\n\t\t\t\t\t\tthis.getFieldListContainer().querySelectorAll('textarea')\n\t\t\t\t\t);\n\n\t\t\t\t\ttextareas.forEach(function(item) {\n\t\t\t\t\t\tBX.style(item, 'height', item.scrollHeight + 'px');\n\t\t\t\t\t});\n\t\t\t\t}, this), showDelay);\n\t\t\t}\n\t\t},\n\n\n\t\t/**\n\t\t * Gets save for all checkbox element\n\t\t * @return {?HTMLInputElement}\n\t\t */\n\t\tgetSaveForAllCheckbox: function()\n\t\t{\n\t\t\tif (!this.saveForAllCheckbox && !!this.getSaveForAllCheckboxContainer())\n\t\t\t{\n\t\t\t\tthis.saveForAllCheckbox = BX.Filter.Utils.getBySelector(this.getSaveForAllCheckboxContainer(), 'input[type=\"checkbox\"]');\n\t\t\t}\n\n\t\t\treturn this.saveForAllCheckbox;\n\t\t},\n\n\n\t\t/**\n\t\t * Gets save for all checkbox container\n\t\t * @return {?HTMLElement}\n\t\t */\n\t\tgetSaveForAllCheckboxContainer: function()\n\t\t{\n\t\t\tif (!this.saveForAllCheckboxContainer)\n\t\t\t{\n\t\t\t\tthis.saveForAllCheckboxContainer = BX.Filter.Utils.getByClass(this.getFilter(), this.settings.classForAllCheckbox);\n\t\t\t}\n\n\t\t\treturn this.saveForAllCheckboxContainer;\n\t\t},\n\n\n\t\t/**\n\t\t * Shows for all checkbox\n\t\t */\n\t\tshowForAllCheckbox: function()\n\t\t{\n\t\t\t!!this.getSaveForAllCheckboxContainer() &&\n\t\t\t\tBX.removeClass(this.getSaveForAllCheckboxContainer(), this.settings.classHide);\n\t\t},\n\n\n\t\t/**\n\t\t * Hides for all checkbox\n\t\t */\n\t\thideForAllCheckbox: function()\n\t\t{\n\t\t\t!!this.getSaveForAllCheckboxContainer() &&\n\t\t\t\tBX.addClass(this.getSaveForAllCheckboxContainer(), this.settings.classHide);\n\t\t},\n\n\n\t\t/**\n\t\t * Gets popup bind element\n\t\t * @return {?HTMLElement}\n\t\t */\n\t\tgetPopupBindElement: function()\n\t\t{\n\t\t\tif (!this.popupBindElement)\n\t\t\t{\n\t\t\t\tvar selector = this.settings.get('POPUP_BIND_ELEMENT_SELECTOR');\n\t\t\t\tvar result = null;\n\n\t\t\t\tif (BX.type.isNotEmptyString(selector))\n\t\t\t\t{\n\t\t\t\t\tresult = BX.Filter.Utils.getBySelector(document, selector);\n\t\t\t\t}\n\n\t\t\t\tthis.popupBindElement = !!result ? result : this.getSearch().getContainer();\n\t\t\t}\n\n\t\t\treturn this.popupBindElement;\n\t\t},\n\n\n\t\t/**\n\t\t * Gets filter popup window instance\n\t\t * @return {BX.PopupWindow}\n\t\t */\n\t\tgetPopup: function()\n\t\t{\n\t\t\tif (!(this.popup instanceof BX.PopupWindow))\n\t\t\t{\n\t\t\t\tthis.popup =  new BX.PopupWindow(\n\t\t\t\t\tthis.getParam('FILTER_ID') + this.settings.searchContainerPostfix,\n\t\t\t\t\tthis.getPopupBindElement(),\n\t\t\t\t\t{\n\t\t\t\t\t\tautoHide : false,\n\t\t\t\t\t\toffsetTop : parseInt(this.settings.get('POPUP_OFFSET_TOP')),\n\t\t\t\t\t\toffsetLeft : parseInt(this.settings.get('POPUP_OFFSET_LEFT')),\n\t\t\t\t\t\tlightShadow : true,\n\t\t\t\t\t\tcloseIcon : false,\n\t\t\t\t\t\tcloseByEsc : false,\n\t\t\t\t\t\tnoAllPaddings: true,\n\t\t\t\t\t\tzIndex: 12\n\t\t\t\t\t}\n\t\t\t\t);\n\n\t\t\t\tthis.popup.setContent(this.getTemplate());\n\t\t\t\tBX.bind(this.getFieldListContainer(), 'keydown', BX.delegate(this._onFieldsContainerKeydown, this));\n\t\t\t\tBX.bind(this.getFilter(), 'click', BX.delegate(this._onFilterClick, this));\n\t\t\t\tBX.bind(this.getAddPresetButton(), 'click', BX.delegate(this._onAddPresetClick, this));\n\t\t\t\tBX.bind(this.getPreset().getAddPresetFieldInput(), 'keydown', BX.delegate(this._onAddPresetKeydown, this));\n\t\t\t\tBX.bind(this.getPreset().getContainer(), 'keydown', BX.delegate(this._onPresetInputKeydown, this));\n\t\t\t\tBX.bind(this.getSaveButton(), 'click', BX.delegate(this._onSaveButtonClick, this));\n\t\t\t\tBX.bind(this.getCancelButton(), 'click', BX.delegate(this._onCancelButtonClick, this));\n\t\t\t\tBX.bind(this.getFindButton(), 'click', BX.delegate(this._onFindButtonClick, this));\n\t\t\t\tBX.bind(this.getResetButton(), 'click', BX.delegate(this._onResetButtonClick, this));\n\t\t\t\tBX.bind(this.getAddField(), 'click', BX.delegate(this._onAddFieldClick, this));\n\t\t\t\tBX.bind(this.getEditButton(), 'click', BX.delegate(this._onEditButtonClick, this));\n\t\t\t\tBX.bind(this.getRestoreButton(), 'click', BX.delegate(this._onRestoreButtonClick, this));\n\t\t\t\tBX.bind(this.getRestoreFieldsButton(), 'click', BX.delegate(this._onRestoreFieldsButtonClick, this));\n\t\t\t\tthis.getFilter().addEventListener('mousedown', BX.delegate(this._onFilterMousedown, this), true);\n\t\t\t\tthis.getPreset().showCurrentPresetFields();\n\t\t\t\tthis.getPreset().bindOnPresetClick();\n\t\t\t}\n\n\t\t\treturn this.popup;\n\t\t},\n\n\t\t_onRestoreFieldsButtonClick: function()\n\t\t{\n\t\t\tthis.restoreDefaultFields();\n\t\t},\n\n\n\t\t/**\n\t\t * Restores default fields list\n\t\t */\n\t\trestoreDefaultFields: function()\n\t\t{\n\t\t\tvar defaultPreset = this.getPreset().getPreset('default_filter', true);\n\t\t\tvar presets = this.getParam('PRESETS');\n\t\t\tvar currentPresetId = this.getPreset().getCurrentPresetId();\n\t\t\tvar params = {'FILTER_ID': this.getParam('FILTER_ID'), 'GRID_ID': this.getParam('GRID_ID'), 'action': 'SET_FILTER'};\n\t\t\tvar fields = defaultPreset.FIELDS.map(function(curr) { return curr.NAME; });\n\t\t\tvar rows = fields.join(',');\n\n\t\t\tpresets.forEach(function(current, index) {\n\t\t\t\tif (current.ID === 'default_filter')\n\t\t\t\t{\n\t\t\t\t\tpresets[index] = BX.clone(defaultPreset);\n\t\t\t\t}\n\t\t\t}, this);\n\n\t\t\tif (BX.type.isArray(this.editablePresets))\n\t\t\t{\n\t\t\t\tthis.editablePresets.forEach(function(current, index) {\n\t\t\t\t\tif (current.ID === 'default_filter')\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.editablePresets[index] = BX.clone(defaultPreset);\n\t\t\t\t\t}\n\t\t\t\t}, this);\n\t\t\t}\n\n\t\t\tthis.getPreset().applyPreset(currentPresetId);\n\t\t\tthis.updatePreset(currentPresetId);\n\t\t\tthis.saveOptions({preset_id: \"default_filter\", rows: rows, save: \"Y\", apply_filter: \"N\"}, params);\n\t\t},\n\n\n\t\t/**\n\t\t * Gets restore default fields button\n\t\t * @return {?HTMLElement}\n\t\t */\n\t\tgetRestoreFieldsButton: function()\n\t\t{\n\t\t\tif (!this.restoreFieldsButton)\n\t\t\t{\n\t\t\t\tthis.restoreFieldsButton = BX.Filter.Utils.getByClass(this.getFilter(), this.settings.classRestoreFieldsButton);\n\t\t\t}\n\n\t\t\treturn this.restoreFieldsButton;\n\t\t},\n\n\n\t\t/**\n\t\t * Restores filter\n\t\t */\n\t\trestoreFilter: function()\n\t\t{\n\t\t\tvar defaultPresets = this.getParam('DEFAULT_PRESETS');\n\t\t\tvar allPresets = this.getParam('PRESETS');\n\t\t\tvar isReplace = false;\n\t\t\tvar replaceIndex, applyPresetId, presetNode;\n\n\t\t\tif (BX.type.isArray(defaultPresets))\n\t\t\t{\n\t\t\t\tdefaultPresets.sort(function(a, b) {\n\t\t\t\t\treturn a.SORT < b.SORT;\n\t\t\t\t});\n\n\t\t\t\tdefaultPresets.forEach(function(defPreset) {\n\t\t\t\t\tisReplace = allPresets.some(function(current, index) {\n\t\t\t\t\t\tif (current.ID === defPreset.ID)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treplaceIndex = index;\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tif (isReplace)\n\t\t\t\t\t{\n\t\t\t\t\t\tallPresets[replaceIndex] = BX.clone(defPreset);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tallPresets.push(BX.clone(defPreset));\n\t\t\t\t\t}\n\n\t\t\t\t\tif (defPreset.ID !== 'default_filter')\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.addSidebarItem(defPreset.ID, defPreset.TITLE, defPreset.PINNED);\n\n\t\t\t\t\t\tif (defPreset.PINNED)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tapplyPresetId = defPreset.ID;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}, this);\n\t\t\t}\n\n\t\t\tthis.saveRestoreFilter();\n\t\t\tthis.disableAddPreset();\n\t\t\tthis.disableEdit();\n\n\t\t\tif (!applyPresetId)\n\t\t\t{\n\t\t\t\tapplyPresetId = \"default_filter\";\n\t\t\t}\n\n\t\t\tpresetNode = this.getPreset().getPresetNodeById(applyPresetId);\n\n\t\t\tif (presetNode)\n\t\t\t{\n\t\t\t\tBX.fireEvent(presetNode, 'click');\n\t\t\t}\n\t\t},\n\n\t\tsaveRestoreFilter: function()\n\t\t{\n\t\t\tvar params = {'FILTER_ID': this.getParam('FILTER_ID'), 'GRID_ID': this.getParam('GRID_ID'), 'action': 'RESTORE_FILTER'};\n\t\t\tvar presets = this.getParam('PRESETS');\n\t\t\tvar data = {};\n\t\t\tvar rows;\n\n\t\t\tif (BX.type.isArray(presets))\n\t\t\t{\n\t\t\t\tpresets.forEach(function(current) {\n\t\t\t\t\trows = current.FIELDS.map(function(field) {\n\t\t\t\t\t\treturn field.NAME;\n\t\t\t\t\t});\n\t\t\t\t\trows = rows.join(',');\n\t\t\t\t\tdata[current.ID] = {\n\t\t\t\t\t\tname: current.TITLE || null,\n\t\t\t\t\t\tsort: current.SORT,\n\t\t\t\t\t\tpreset_id: current.ID,\n\t\t\t\t\t\tfields:  this.prepareFields(current.FIELDS),\n\t\t\t\t\t\trows: rows,\n\t\t\t\t\t\tfor_all: current.FOR_ALL\n\t\t\t\t\t};\n\t\t\t\t}, this);\n\n\t\t\t\tthis.saveOptions(data, params);\n\t\t\t}\n\t\t},\n\n\n\t\t/**\n\t\t * Prepares fields\n\t\t * @param {object[]} fields\n\t\t * @return {object}\n\t\t */\n\t\tprepareFields: function(fields)\n\t\t{\n\t\t\tvar result = {};\n\t\t\tvar valuesKeys;\n\n\t\t\tif (BX.type.isArray(fields))\n\t\t\t{\n\t\t\t\tfields.forEach(function(current) {\n\t\t\t\t\tif (current.TYPE === this.types.SELECT)\n\t\t\t\t\t{\n\t\t\t\t\t\tresult[current.NAME] = 'VALUE' in current.VALUE ? current.VALUE.VALUE : '';\n\t\t\t\t\t}\n\n\t\t\t\t\tif (current.TYPE === this.types.MULTI_SELECT)\n\t\t\t\t\t{\n\t\t\t\t\t\tcurrent.VALUE.forEach(function(val, i) {\n\t\t\t\t\t\t\tresult[current.NAME] = result[current.NAME] || {};\n\t\t\t\t\t\t\tresult[current.NAME][i] = val.VALUE;\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tresult[current.NAME] = result[current.NAME] || '';\n\t\t\t\t\t}\n\n\t\t\t\t\tif (current.TYPE === this.types.DATE ||\n\t\t\t\t\t\tcurrent.TYPE === this.types.NUMBER)\n\t\t\t\t\t{\n\t\t\t\t\t\tvaluesKeys = Object.keys(current.VALUES);\n\n\t\t\t\t\t\tvaluesKeys.forEach(function(key) {\n\t\t\t\t\t\t\tresult[current.NAME + key] = current.VALUES[key];\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif (current.TYPE === this.types.DATE)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tresult[current.NAME + '_datesel'] = 'VALUE' in current.SUB_TYPE ?\n\t\t\t\t\t\t\t\tcurrent.SUB_TYPE.VALUE : current.SUB_TYPES[0].VALUE;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (current.TYPE === this.types.NUMBER)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tresult[current.NAME + '_numsel'] = 'VALUE' in current.SUB_TYPE ?\n\t\t\t\t\t\t\t\tcurrent.SUB_TYPE.VALUE : current.SUB_TYPES[0].VALUE;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (current.TYPE === this.types.DEST_SELECTOR)\n\t\t\t\t\t{\n\t\t\t\t\t\tresult[current.NAME + '_label'] = current.VALUES._label;\n\t\t\t\t\t\tresult[current.NAME + '_value'] = current.VALUES._value;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (current.TYPE === this.types.CUSTOM_ENTITY)\n\t\t\t\t\t{\n\t\t\t\t\t\tresult[current.NAME + '_label'] = current.VALUES._label;\n\t\t\t\t\t\tresult[current.NAME + '_value'] = current.VALUES._value;\n\t\t\t\t\t}\n\t\t\t\t}, this);\n\t\t\t}\n\n\t\t\treturn result;\n\t\t},\n\n\n\t\t/**\n\t\t * Gets restore button\n\t\t * @return {?HTMLElement}\n\t\t */\n\t\tgetRestoreButton: function()\n\t\t{\n\t\t\tif (!BX.type.isDomNode(this.restoreButton))\n\t\t\t{\n\t\t\t\tthis.restoreButton = BX.Filter.Utils.getByClass(this.getFilter(), this.settings.classRestoreButton);\n\t\t\t}\n\n\t\t\treturn this.restoreButton;\n\t\t},\n\n\t\t_onPresetInputKeydown: function(event)\n\t\t{\n\t\t\tif (BX.Filter.Utils.isKey(event, 'enter') && event.target.tagName === 'INPUT')\n\t\t\t{\n\t\t\t\tBX.fireEvent(this.getSaveButton(), 'click');\n\t\t\t}\n\t\t},\n\n\t\t_onFieldsContainerKeydown: function(event)\n\t\t{\n\t\t\tif (BX.Filter.Utils.isKey(event, 'enter') && event.target.tagName === 'INPUT')\n\t\t\t{\n\t\t\t\tBX.fireEvent(this.getFindButton(), 'click');\n\t\t\t}\n\t\t},\n\n\t\t_onFindButtonClick: function()\n\t\t{\n\t\t\tvar presets = this.getPreset();\n\t\t\tvar currentPresetId = presets.getCurrentPresetId();\n\t\t\tvar promise;\n\n\t\t\tif (\n\t\t\t\tcurrentPresetId !== 'tmp_filter'\n\t\t\t\t&& currentPresetId !== 'default_filter'\n\t\t\t\t&& !presets.isPresetValuesModified(currentPresetId)\n\t\t\t)\n\t\t\t{\n\t\t\t\tvar preset = presets.getPreset(currentPresetId);\n\t\t\t\tvar additional = presets.getAdditionalValues(currentPresetId);\n\t\t\t\tvar rows = presets.getFields().map(function(current) {\n\t\t\t\t\treturn BX.data(current, 'name');\n\t\t\t\t});\n\n\t\t\t\tpreset.ADDITIONAL = this.preparePresetFields(additional, rows);\n\t\t\t\tpreset.ADDITIONAL = preset.ADDITIONAL.filter(function(field) {\n\t\t\t\t\treturn !this.getPreset().isEmptyField(field);\n\t\t\t\t}, this);\n\n\t\t\t\tpromise = this.applyFilter(false, currentPresetId);\n\t\t\t\tthis.closePopup();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tpresets.deactivateAllPresets();\n\t\t\t\tpromise = this.applyFilter();\n\t\t\t\tthis.closePopup();\n\t\t\t}\n\n\t\t\treturn promise;\n\t\t},\n\n\t\t_onResetButtonClick: function()\n\t\t{\n\t\t\tif (this.getParam('VALUE_REQUIRED'))\n\t\t\t{\n\t\t\t\tvar preset = this.getPreset().getCurrentPresetData();\n\n\t\t\t\tif (preset.ADDITIONAL.length)\n\t\t\t\t{\n\t\t\t\t\tthis.closePopup();\n\t\t\t\t}\n\n\t\t\t\tBX.fireEvent(this.getSearch().getClearButton(), 'click');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (this.getParam('RESET_TO_DEFAULT_MODE'))\n\t\t\t\t{\n\t\t\t\t\tthis.getSearch().clearInput();\n\t\t\t\t\tthis.getPreset().applyPinnedPreset();\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.resetFilter();\n\t\t\t\t}\n\n\t\t\t\tthis.closePopup();\n\t\t\t}\n\t\t},\n\n\n\t\t/**\n\t\t * @param withoutSearch\n\t\t * @return {BX.Promise}\n\t\t */\n\t\tresetFilter: function(withoutSearch)\n\t\t{\n\t\t\tvar Search = this.getSearch();\n\t\t\tvar Presets = this.getPreset();\n\n\t\t\tif (!withoutSearch)\n\t\t\t{\n\t\t\t\tSearch.clearInput();\n\t\t\t}\n\n\t\t\tSearch.removePreset();\n\t\t\tPresets.deactivateAllPresets();\n\t\t\tPresets.resetPreset(true);\n\t\t\tSearch.hideClearButton();\n\t\t\tSearch.adjustPlaceholder();\n\t\t\treturn this.applyFilter(true, true);\n\t\t},\n\n\t\t_onEditButtonClick: function()\n\t\t{\n\t\t\tif (!this.isEditEnabled())\n\t\t\t{\n\t\t\t\tthis.enableEdit();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.disableEdit();\n\t\t\t}\n\t\t},\n\n\n\t\t/**\n\t\t * Enables fields drag and drop\n\t\t */\n\t\tenableFieldsDragAndDrop: function()\n\t\t{\n\t\t\tvar fields = this.getPreset().getFields();\n\n\t\t\tthis.fieldsList = [];\n\n\t\t\tif (BX.type.isArray(fields))\n\t\t\t{\n\t\t\t\tthis.fieldsList = fields.map(this.registerDragItem, this);\n\t\t\t}\n\t\t},\n\n\n\t\t/**\n\t\t * Register drag item\n\t\t * @param {HTMLElement} item\n\t\t * @return {HTMLElement}\n\t\t */\n\t\tregisterDragItem: function(item)\n\t\t{\n\t\t\tvar dragButton = this.getDragButton(item);\n\n\t\t\tif (dragButton)\n\t\t\t{\n\t\t\t\tdragButton.onbxdragstart = BX.delegate(this._onFieldDragStart, this);\n\t\t\t\tdragButton.onbxdragstop = BX.delegate(this._onFieldDragStop, this);\n\t\t\t\tdragButton.onbxdrag = BX.delegate(this._onFieldDrag, this);\n\t\t\t\tjsDD.registerObject(dragButton);\n\t\t\t\tjsDD.registerDest(dragButton);\n\t\t\t}\n\n\t\t\treturn item;\n\t\t},\n\n\n\t\t/**\n\t\t * Unregister drag item\n\t\t * @param {HTMLElement} item\n\t\t */\n\t\tunregisterDragItem: function(item)\n\t\t{\n\t\t\tvar dragButton = this.getDragButton(item);\n\n\t\t\tif (dragButton)\n\t\t\t{\n\t\t\t\tjsDD.unregisterObject(dragButton);\n\t\t\t\tjsDD.unregisterDest(dragButton);\n\t\t\t}\n\t\t},\n\n\t\t_onFieldDragStart: function()\n\t\t{\n\t\t\tthis.dragItem = this.getFields().getField(jsDD.current_node);\n\t\t\tthis.dragIndex = BX.Filter.Utils.getIndex(this.fieldsList, this.dragItem);\n\t\t\tthis.dragRect = this.dragItem.getBoundingClientRect();\n\t\t\tthis.offset = this.dragRect.height;\n\t\t\tthis.dragStartOffset = (jsDD.start_y - (this.dragRect.top + BX.scrollTop(window)));\n\n\t\t\tBX.Filter.Utils.styleForEach(this.fieldsList, {'transition': '100ms'});\n\t\t\tBX.addClass(this.dragItem, this.settings.classPresetOndrag);\n\t\t\tBX.bind(document, 'mousemove', BX.delegate(this._onMouseMove, this));\n\t\t},\n\n\t\t_onFieldDragStop: function()\n\t\t{\n\t\t\tBX.unbind(document, 'mousemove', BX.delegate(this._onMouseMove, this));\n\t\t\tBX.removeClass(this.dragItem, this.settings.classPresetOndrag);\n\n\t\t\tBX.Filter.Utils.styleForEach(this.fieldsList, {'transition': '', 'transform': ''});\n\t\t\tBX.Filter.Utils.collectionSort(this.dragItem, this.targetItem);\n\n\t\t\tthis.fieldsList = this.getPreset().getFields();\n\n\t\t\tthis.saveFieldsSort();\n\t\t},\n\n\t\t_onFieldDrag: function()\n\t\t{\n\t\t\tvar self = this;\n\t\t\tvar currentRect, currentMiddle;\n\n\t\t\tthis.dragOffset = (this.realY - this.dragRect.top - this.dragStartOffset);\n\t\t\tthis.sortOffset = self.realY + BX.scrollTop(window);\n\n\t\t\tBX.Filter.Utils.styleForEach([this.dragItem], {\n\t\t\t\t'transition': '0ms',\n\t\t\t\t'transform': 'translate3d(0px, '+this.dragOffset+'px, 0px)'\n\t\t\t});\n\n\t\t\tthis.fieldsList.forEach(function(current, index) {\n\t\t\t\tif (current)\n\t\t\t\t{\n\t\t\t\t\tcurrentRect = current.getBoundingClientRect();\n\t\t\t\t\tcurrentMiddle = currentRect.top + BX.scrollTop(window) + (currentRect.height / 2);\n\n\t\t\t\t\tif (index > self.dragIndex && self.sortOffset > currentMiddle &&\n\t\t\t\t\t\tcurrent.style.transform !== 'translate3d(0px, '+(-self.offset)+'px, 0px)' &&\n\t\t\t\t\t\tcurrent.style.transform !== '')\n\t\t\t\t\t{\n\t\t\t\t\t\tself.targetItem = current;\n\t\t\t\t\t\tBX.style(current, 'transform', 'translate3d(0px, '+(-self.offset)+'px, 0px)');\n\t\t\t\t\t\tBX.style(current, 'transition', '300ms');\n\t\t\t\t\t}\n\n\t\t\t\t\tif (index < self.dragIndex && self.sortOffset < currentMiddle &&\n\t\t\t\t\t\tcurrent.style.transform !== 'translate3d(0px, '+(self.offset)+'px, 0px)' &&\n\t\t\t\t\t\tcurrent.style.transform !== '')\n\t\t\t\t\t{\n\t\t\t\t\t\tself.targetItem = current;\n\t\t\t\t\t\tBX.style(current, 'transform', 'translate3d(0px, '+(self.offset)+'px, 0px)');\n\t\t\t\t\t\tBX.style(current, 'transition', '300ms');\n\t\t\t\t\t}\n\n\t\t\t\t\tif (((index < self.dragIndex && self.sortOffset > currentMiddle) ||\n\t\t\t\t\t\t(index > self.dragIndex && self.sortOffset < currentMiddle)) &&\n\t\t\t\t\t\tcurrent.style.transform !== 'translate3d(0px, 0px, 0px)')\n\t\t\t\t\t{\n\t\t\t\t\t\tif (current.style.transform !== '')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tself.targetItem = current;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tBX.style(current, 'transform', 'translate3d(0px, 0px, 0px)');\n\t\t\t\t\t\tBX.style(current, 'transition', '300ms');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\n\t\t/**\n\t\t * Disables fields drag and drop\n\t\t */\n\t\tdisableFieldsDragAndDrop: function()\n\t\t{\n\t\t\tif (BX.type.isArray(this.fieldsList) && this.fieldsList.length)\n\t\t\t{\n\t\t\t\tthis.fieldsList.map(this.unregisterDragItem, this);\n\t\t\t}\n\t\t},\n\n\n\t\t/**\n\t\t * Enables presets drag and drop\n\t\t */\n\t\tenablePresetsDragAndDrop: function()\n\t\t{\n\t\t\tvar Preset, presets, dragButton, presetId;\n\n\t\t\tPreset = this.getPreset();\n\t\t\tpresets = Preset.getPresets();\n\t\t\tthis.presetsList = [];\n\n\t\t\tif (BX.type.isArray(presets) && presets.length)\n\t\t\t{\n\t\t\t\tpresets.forEach(function(current) {\n\t\t\t\t\tpresetId = Preset.getPresetId(current);\n\n\t\t\t\t\tif (!BX.hasClass(current, this.settings.classAddPresetField) &&\n\t\t\t\t\t\tpresetId !== 'default_filter' &&\n\t\t\t\t\t\t!BX.hasClass(current, this.settings.classDefaultFilter))\n\t\t\t\t\t{\n\t\t\t\t\t\tdragButton = this.getDragButton(current);\n\t\t\t\t\t\tdragButton.onbxdragstart = BX.delegate(this._onDragStart, this);\n\t\t\t\t\t\tdragButton.onbxdragstop = BX.delegate(this._onDragStop, this);\n\t\t\t\t\t\tdragButton.onbxdrag = BX.delegate(this._onDrag, this);\n\t\t\t\t\t\tjsDD.registerObject(dragButton);\n\t\t\t\t\t\tjsDD.registerDest(dragButton);\n\t\t\t\t\t\tthis.presetsList.push(current);\n\t\t\t\t\t}\n\t\t\t\t}, this);\n\t\t\t}\n\t\t},\n\n\n\t\t/**\n\t\t * Gets drag button\n\t\t * @param {HTMLElement} presetNode\n\t\t * @return {?HTMLElement}\n\t\t */\n\t\tgetDragButton: function(presetNode)\n\t\t{\n\t\t\treturn BX.Filter.Utils.getByClass(presetNode, this.settings.classPresetDragButton);\n\t\t},\n\n\n\t\t/**\n\t\t * Disables presets drag and drop\n\t\t */\n\t\tdisablePresetsDragAndDrop: function()\n\t\t{\n\t\t\tif (BX.type.isArray(this.presetsList) && this.presetsList.length)\n\t\t\t{\n\t\t\t\tthis.presetsList.forEach(function(current) {\n\t\t\t\t\tif (!BX.hasClass(current, this.settings.classAddPresetField))\n\t\t\t\t\t{\n\t\t\t\t\t\tjsDD.unregisterObject(current);\n\t\t\t\t\t\tjsDD.unregisterDest(current);\n\t\t\t\t\t}\n\t\t\t\t}, this);\n\t\t\t}\n\t\t},\n\n\t\t_onDragStart: function()\n\t\t{\n\t\t\tthis.dragItem = this.getPreset().normalizePreset(jsDD.current_node);\n\t\t\tthis.dragIndex = BX.Filter.Utils.getIndex(this.presetsList, this.dragItem);\n\t\t\tthis.dragRect = this.dragItem.getBoundingClientRect();\n\t\t\tthis.offset = this.dragRect.height;\n\t\t\tthis.dragStartOffset = (jsDD.start_y - (this.dragRect.top + BX.scrollTop(window)));\n\n\t\t\tBX.Filter.Utils.styleForEach(this.list, {'transition': '100ms'});\n\t\t\tBX.addClass(this.dragItem, this.settings.classPresetOndrag);\n\t\t\tBX.bind(document, 'mousemove', BX.delegate(this._onMouseMove, this));\n\t\t},\n\n\t\t_onMouseMove: function(event)\n\t\t{\n\t\t\tthis.realX = event.clientX;\n\t\t\tthis.realY = event.clientY;\n\t\t},\n\n\n\t\t/**\n\t\t * Gets drag offset\n\t\t * @return {number}\n\t\t */\n\t\tgetDragOffset: function()\n\t\t{\n\t\t\treturn (jsDD.x - this.startDragOffset - this.dragRect.left);\n\t\t},\n\n\t\t_onDragStop: function()\n\t\t{\n\t\t\tvar Preset, presets;\n\n\t\t\tBX.unbind(document, 'mousemove', BX.delegate(this._onMouseMove, this));\n\t\t\tBX.removeClass(this.dragItem, this.settings.classPresetOndrag);\n\n\t\t\tBX.Filter.Utils.styleForEach(this.presetsList, {'transition': '', 'transform': ''});\n\t\t\tBX.Filter.Utils.collectionSort(this.dragItem, this.targetItem);\n\n\t\t\tPreset = this.getPreset();\n\t\t\tpresets = Preset.getPresets();\n\t\t\tthis.presetsList = [];\n\n\t\t\tif (BX.type.isArray(presets) && presets.length)\n\t\t\t{\n\t\t\t\tpresets.forEach(function(current) {\n\t\t\t\t\tif (!BX.hasClass(current, this.settings.classAddPresetField) &&\n\t\t\t\t\t\t!BX.hasClass(current, this.settings.classDefaultFilter))\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.presetsList.push(current);\n\t\t\t\t\t}\n\t\t\t\t}, this);\n\t\t\t}\n\n\t\t},\n\n\t\t_onDrag: function()\n\t\t{\n\t\t\tvar self = this;\n\t\t\tvar currentRect, currentMiddle;\n\n\t\t\tthis.dragOffset = (this.realY - this.dragRect.top - this.dragStartOffset);\n\t\t\tthis.sortOffset = self.realY + BX.scrollTop(window);\n\n\t\t\tBX.Filter.Utils.styleForEach([this.dragItem], {\n\t\t\t\t'transition': '0ms',\n\t\t\t\t'transform': 'translate3d(0px, '+this.dragOffset+'px, 0px)'\n\t\t\t});\n\n\t\t\tthis.presetsList.forEach(function(current, index) {\n\t\t\t\tif (current)\n\t\t\t\t{\n\t\t\t\t\tcurrentRect = current.getBoundingClientRect();\n\t\t\t\t\tcurrentMiddle = currentRect.top + BX.scrollTop(window) + (currentRect.height / 2);\n\n\t\t\t\t\tif (index > self.dragIndex && self.sortOffset > currentMiddle &&\n\t\t\t\t\t\tcurrent.style.transform !== 'translate3d(0px, '+(-self.offset)+'px, 0px)' &&\n\t\t\t\t\t\tcurrent.style.transform !== '')\n\t\t\t\t\t{\n\t\t\t\t\t\tself.targetItem = current;\n\t\t\t\t\t\tBX.style(current, 'transform', 'translate3d(0px, '+(-self.offset)+'px, 0px)');\n\t\t\t\t\t\tBX.style(current, 'transition', '300ms');\n\t\t\t\t\t}\n\n\t\t\t\t\tif (index < self.dragIndex && self.sortOffset < currentMiddle &&\n\t\t\t\t\t\tcurrent.style.transform !== 'translate3d(0px, '+(self.offset)+'px, 0px)' &&\n\t\t\t\t\t\tcurrent.style.transform !== '')\n\t\t\t\t\t{\n\t\t\t\t\t\tself.targetItem = current;\n\t\t\t\t\t\tBX.style(current, 'transform', 'translate3d(0px, '+(self.offset)+'px, 0px)');\n\t\t\t\t\t\tBX.style(current, 'transition', '300ms');\n\t\t\t\t\t}\n\n\t\t\t\t\tif (((index < self.dragIndex && self.sortOffset > currentMiddle) ||\n\t\t\t\t\t\t(index > self.dragIndex && self.sortOffset < currentMiddle)) &&\n\t\t\t\t\t\tcurrent.style.transform !== 'translate3d(0px, 0px, 0px)')\n\t\t\t\t\t{\n\t\t\t\t\t\tif (current.style.transform !== '')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tself.targetItem = current;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tBX.style(current, 'transform', 'translate3d(0px, 0px, 0px)');\n\t\t\t\t\t\tBX.style(current, 'transition', '300ms');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\n\t\t/**\n\t\t * Gets sidebar controls container\n\t\t * @return {?HTMLElement}\n\t\t */\n\t\tgetSidebarControlsContainer: function()\n\t\t{\n\t\t\tif (!BX.type.isDomNode(this.sidebarControlsContainer))\n\t\t\t{\n\t\t\t\tthis.sidebarControlsContainer = BX.Filter.Utils.getByClass(this.getFilter(), this.settings.classSidebarControlsContainer);\n\t\t\t}\n\n\t\t\treturn this.sidebarControlsContainer;\n\t\t},\n\n\n\t\t/**\n\t\t * Enables edit mode\n\t\t */\n\t\tenableEdit: function()\n\t\t{\n\t\t\tvar Preset = this.getPreset();\n\t\t\tvar presets = Preset.getPresets();\n\t\t\tvar presetId;\n\n\t\t\tif (BX.type.isArray(presets) && presets.length)\n\t\t\t{\n\t\t\t\tpresets.forEach(function(current) {\n\t\t\t\t\tpresetId = Preset.getPresetId(current);\n\t\t\t\t\tif (!BX.hasClass(current, this.settings.classAddPresetField) && presetId !== 'default_filter')\n\t\t\t\t\t{\n\t\t\t\t\t\tBX.addClass(current, this.settings.classPresetEdit);\n\t\t\t\t\t}\n\t\t\t\t}, this);\n\t\t\t}\n\n\t\t\tthis.enablePresetsDragAndDrop();\n\t\t\tBX.show(this.getButtonsContainer());\n\t\t\tBX.hide(this.getPresetButtonsContainer());\n\t\t\tBX.addClass(this.getSidebarControlsContainer(), this.settings.classDisabled);\n\t\t\tthis.editablePresets = BX.clone(this.getParam('PRESETS'));\n\t\t\tthis.isEditEnabledState = true;\n\t\t},\n\n\n\t\t/**\n\t\t * Disables edit mode\n\t\t */\n\t\tdisableEdit: function()\n\t\t{\n\t\t\tvar Preset = this.getPreset();\n\t\t\tvar presets = Preset.getPresets();\n\n\t\t\tif (BX.type.isArray(presets) && presets.length)\n\t\t\t{\n\t\t\t\tpresets.forEach(function(current) {\n\t\t\t\t\tif (!BX.hasClass(current, this.settings.classAddPresetField))\n\t\t\t\t\t{\n\t\t\t\t\t\tBX.removeClass(current, this.settings.classPresetEdit);\n\t\t\t\t\t\tthis.getPreset().disableEditPresetName(current);\n\t\t\t\t\t}\n\t\t\t\t}, this);\n\t\t\t}\n\n\t\t\tthis.disablePresetsDragAndDrop();\n\n\t\t\tif (!this.isAddPresetEnabled())\n\t\t\t{\n\t\t\t\tBX.style(this.getButtonsContainer(), 'display', '');\n\t\t\t}\n\n\t\t\tBX.show(this.getPresetButtonsContainer());\n\t\t\tBX.removeClass(this.getSidebarControlsContainer(), this.settings.classDisabled);\n\t\t\tthis.editablePresets = null;\n\t\t\tthis.isEditEnabledState = false;\n\t\t\tthis.applyFilter(null, true);\n\t\t},\n\n\n\t\t/**\n\t\t * Get preset buttons container\n\t\t * @return {?HTMLElement}\n\t\t */\n\t\tgetPresetButtonsContainer: function()\n\t\t{\n\t\t\tif (!BX.type.isDomNode(this.presetButtonsContainer))\n\t\t\t{\n\t\t\t\tthis.presetButtonsContainer = BX.Filter.Utils.getByClass(this.getFilter(), this.settings.classPresetButtonsContainer);\n\t\t\t}\n\n\t\t\treturn this.presetButtonsContainer;\n\t\t},\n\n\n\t\t/**\n\t\t * Checks is edit mode enabled\n\t\t * @return {boolean}\n\t\t */\n\t\tisEditEnabled: function()\n\t\t{\n\t\t\treturn this.isEditEnabledState;\n\t\t},\n\n\n\t\t/**\n\t\t * Gets edit button element\n\t\t * @return {?HTMLElement}\n\t\t */\n\t\tgetEditButton: function()\n\t\t{\n\t\t\treturn BX.Filter.Utils.getByClass(this.getFilter(), this.settings.classEditButton);\n\t\t},\n\n\n\t\t/**\n\t\t * Gets component param by param name\n\t\t * @param {string} paramName\n\t\t * @param {*} [defaultValue] - Be returns if param with paramName not set\n\t\t * @returns {*}\n\t\t */\n\t\tgetParam: function(paramName, defaultValue)\n\t\t{\n\t\t\treturn paramName in this.params ? this.params[paramName] : defaultValue;\n\t\t},\n\n\n\t\t/**\n\t\t * Gets container of filter popup\n\t\t * @returns {HTMLElement|null}\n\t\t */\n\t\tgetFilter: function()\n\t\t{\n\t\t\treturn BX.Filter.Utils.getByClass(this.getPopup().contentContainer, this.settings.classFilterContainer);\n\t\t},\n\n\n\t\t/**\n\t\t * @returns {BX.Filter.Search}\n\t\t */\n\t\tgetSearch: function()\n\t\t{\n\t\t\tif (!(this.search instanceof BX.Filter.Search))\n\t\t\t{\n\t\t\t\tthis.search = new BX.Filter.Search(this);\n\t\t\t}\n\n\t\t\treturn this.search;\n\t\t},\n\n\t\t_onRestoreButtonClick: function()\n\t\t{\n\t\t\tvar action = {\n\t\t\t\tCONFIRM: true,\n\t\t\t\tCONFIRM_MESSAGE: this.getParam('CONFIRM_MESSAGE'),\n\t\t\t\tCONFIRM_APPLY_BUTTON: this.getParam('CONFIRM_APPLY'),\n\t\t\t\tCONFIRM_CANCEL_BUTTON: this.getParam('CONFIRM_CANCEL')\n\t\t\t};\n\n\t\t\tthis.confirmDialog(action, BX.delegate(this.restoreFilter, this));\n\t\t},\n\n\n\t\t/**\n\t\t * Shows confirmation popup\n\t\t * @param {object} action - Popup properties\n\t\t * @param {boolean} action.CONFIRM - true If the user must confirm the action\n\t\t * @param {string} action.CONFIRM_MESSAGE - Message of confirm popup\n\t\t * @param {string} action.CONFIRM_APPLY_BUTTON - Text of apply button\n\t\t * @param {string} action.CONFIRM_CANCEL_BUTTON - Text of cancel button\n\t\t * @param {string} [action.CONFIRM_TITLE] - Title of confirm popup\n\t\t * @param {function} then - Callback after a successful confirmation\n\t\t * @param {function} [cancel] - callback after cancel confirmation\n\t\t */\n\t\tconfirmDialog: function(action, then, cancel)\n\t\t{\n\t\t\tif ('CONFIRM' in action && action.CONFIRM)\n\t\t\t{\n\t\t\t\tvar dialogId = this.getParam('FILTER_ID') + '-confirm-dialog';\n\t\t\t\tvar popupMessage = '<div class=\"main-ui-filter-confirm-content\">'+action.CONFIRM_MESSAGE+'</div>';\n\t\t\t\tvar popupTitle = 'CONFIRM_TITLE' in action ? action.CONFIRM_TITLE : '';\n\n\t\t\t\tvar applyButton = new BX.PopupWindowButton({\n\t\t\t\t\ttext: action.CONFIRM_APPLY_BUTTON,\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tclick: function()\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tBX.type.isFunction(then) ? then() : null;\n\t\t\t\t\t\t\tthis.popupWindow.close();\n\t\t\t\t\t\t\tthis.popupWindow.destroy();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tvar cancelButton = new BX.PopupWindowButtonLink({\n\t\t\t\t\ttext: action.CONFIRM_CANCEL_BUTTON,\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tclick: function()\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tBX.type.isFunction(cancel) ? cancel() : null;\n\t\t\t\t\t\t\tthis.popupWindow.close();\n\t\t\t\t\t\t\tthis.popupWindow.destroy();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tvar dialog = new BX.PopupWindow(\n\t\t\t\t\tdialogId,\n\t\t\t\t\tnull,\n\t\t\t\t\t{\n\t\t\t\t\t\tcontent: popupMessage,\n\t\t\t\t\t\ttitleBar: popupTitle,\n\t\t\t\t\t\tautoHide: false,\n\t\t\t\t\t\tzIndex: 9999,\n\t\t\t\t\t\toverlay: 0.4,\n\t\t\t\t\t\toffsetTop: -100,\n\t\t\t\t\t\tcloseIcon : true,\n\t\t\t\t\t\tcloseByEsc : true,\n\t\t\t\t\t\tbuttons: [applyButton, cancelButton]\n\t\t\t\t\t}\n\t\t\t\t);\n\n\t\t\t\tBX.addCustomEvent(dialog, 'onPopupClose', BX.delegate(function() {\n\t\t\t\t\t!!this.getSaveForAllCheckbox() && (this.getSaveForAllCheckbox().checked = null);\n\t\t\t\t}, this));\n\n\t\t\t\tif (!dialog.isShown())\n\t\t\t\t{\n\t\t\t\t\tdialog.show();\n\t\t\t\t\tvar popupContainer = dialog.popupContainer;\n\t\t\t\t\tBX.removeClass(popupContainer, this.settings.classAnimationShow);\n\t\t\t\t\tBX.addClass(popupContainer, this.settings.classAnimationShow);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tBX.type.isFunction(then) ? then() : null;\n\t\t\t}\n\t\t},\n\n\t\tgetInitialValue: function(name)\n\t\t{\n\t\t\tif (BX.type.isString(name))\n\t\t\t{\n\t\t\t\tvar values = this.params.INITIAL_FILTER;\n\n\t\t\t\tif (BX.type.isPlainObject(values))\n\t\t\t\t{\n\t\t\t\t\tvar filteredEntries = Object.entries(values).reduce(function(acc, item) {\n\t\t\t\t\t\tif (item[0].startsWith(name))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tacc.push(item);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn acc;\n\t\t\t\t\t}, []);\n\n\t\t\t\t\tif (filteredEntries.length === 1)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn filteredEntries[0][1];\n\t\t\t\t\t}\n\n\t\t\t\t\tif (filteredEntries.length > 1)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn filteredEntries.reduce(function(acc, item) {\n\t\t\t\t\t\t\tacc[item[0].replace(name, '')] = item[1];\n\t\t\t\t\t\t\treturn acc;\n\t\t\t\t\t\t}, {});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn '';\n\t\t},\n\n\t\tgetField: function(name)\n\t\t{\n\t\t\tvar node = this.getFieldListContainer()\n\t\t\t\t.querySelector('[data-name=\"' + name + '\"]');\n\n\t\t\treturn BX.Filter.Field.instances.get(node);\n\t\t},\n\t};\n})();\n\n\n(function() {\n\tBX.Main.filterManager = {\n\t\tdata: {},\n\n\t\tpush: function(id, instance)\n\t\t{\n\t\t\tif (BX.type.isNotEmptyString(id) && instance)\n\t\t\t{\n\t\t\t\tthis.data[id] = instance;\n\t\t\t}\n\t\t},\n\n\t\tgetById: function(id)\n\t\t{\n\t\t\tvar result = null;\n\n\t\t\tif (id in this.data)\n\t\t\t{\n\t\t\t\tresult = this.data[id];\n\t\t\t}\n\n\t\t\treturn result;\n\t\t}\n\t};\n})();","import {Event, Dom, Cache, Tag, Type} from 'main.core';\n\nconst onValueChange = Symbol('onValueChange');\n\nexport class Field extends Event.EventEmitter\n{\n\tstatic instances = new WeakMap();\n\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Filter.Field');\n\n\t\tthis.id = options.options.NAME;\n\t\tthis.parent = options.parent;\n\t\tthis.node = options.node;\n\t\tthis.options = {...options.options};\n\t\tthis.cache = new Cache.MemoryCache();\n\t\tthis[onValueChange] = this[onValueChange].bind(this);\n\n\t\tEvent.bind(this.node, 'input', this[onValueChange]);\n\t\tEvent.bind(this.node, 'change', this[onValueChange]);\n\n\t\tconst clearButtons = [\n\t\t\t...this.node.querySelectorAll('.main-ui-control-value-delete'),\n\t\t];\n\n\t\tclearButtons.forEach((button) => {\n\t\t\tbutton.addEventListener('click', () => {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis[onValueChange]();\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\n\t\tconst MO = new MutationObserver(() => {\n\t\t\tthis[onValueChange]();\n\t\t});\n\n\t\tconst selects = [\n\t\t\t...this.node.querySelectorAll('.main-ui-select'),\n\t\t];\n\n\t\tselects.forEach((select) => {\n\t\t\tMO.observe(select, {\n\t\t\t\tattributes: true,\n\t\t\t\tattributeFilter: ['data-value'],\n\t\t\t});\n\t\t});\n\n\t\tField.instances.set(this.node, this);\n\t}\n\n\tsubscribe(eventName, listener)\n\t{\n\t\tEvent.EventEmitter.subscribe(\n\t\t\tthis,\n\t\t\teventName.replace('BX.Filter.Field:', ''),\n\t\t\tlistener,\n\t\t);\n\t}\n\n\t[onValueChange]()\n\t{\n\t\tthis.emit('change', {\n\t\t\tfield: this,\n\t\t\tvalue: this.getValue(),\n\t\t});\n\t}\n\n\t/**\n\t * @private\n\t * @return {HTMLDivElement}\n\t */\n\tgetAdditionalFieldContainer(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('additionalFieldsContainer', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"main-ui-filter-additional-fields-container\"></div>\n\t\t\t`;\n\t\t});\n\t}\n\n\t/**\n\t * @private\n\t * @return {boolean}\n\t */\n\thasAdditional(): boolean\n\t{\n\t\treturn Dom.hasClass(this.node, 'main-ui-filter-field-with-additional-fields');\n\t}\n\n\taddAdditionalField(field): Field\n\t{\n\t\tif (!this.hasAdditional())\n\t\t{\n\t\t\tDom.addClass(this.node, 'main-ui-filter-field-with-additional-fields');\n\t\t\tDom.append(this.getAdditionalFieldContainer(), this.node);\n\t\t}\n\n\t\tconst preset = this.parent.getPreset();\n\t\tconst options = this.prepareFieldOptions(field);\n\t\tconst renderedField = preset.createControl(options);\n\t\tthis.appendRenderedField(renderedField);\n\n\t\treturn Field.instances.get(renderedField);\n\t}\n\n\t// eslint-disable-next-line class-methods-use-this\n\tprepareListItems(items = {})\n\t{\n\t\tif (Type.isPlainObject(items))\n\t\t{\n\t\t\treturn Object.entries(items).map(([VALUE, NAME]) => {\n\t\t\t\treturn {NAME, VALUE};\n\t\t\t});\n\t\t}\n\n\t\treturn {};\n\t}\n\n\t/**\n\t * @private\n\t * @return {object}\n\t */\n\tprepareFieldOptions(options): {[key: string]: any}\n\t{\n\t\tif (Type.isPlainObject(options))\n\t\t{\n\t\t\tconst stubs = this.parent.params.FIELDS_STUBS;\n\t\t\tconst {type = 'string'} = options;\n\t\t\tconst stub = stubs.find((item) => item.NAME === type);\n\n\t\t\tif (Type.isPlainObject(stub))\n\t\t\t{\n\t\t\t\tconst baseField = {\n\t\t\t\t\t...stub,\n\t\t\t\t\tNAME: options.id,\n\t\t\t\t\tLABEL: options.name,\n\t\t\t\t\tTYPE: type === 'checkbox' ? 'SELECT' : stub.TYPE,\n\t\t\t\t\tVALUE_REQUIRED: options.valueRequired === true,\n\t\t\t\t};\n\n\t\t\t\tif (type === 'list')\n\t\t\t\t{\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...baseField,\n\t\t\t\t\t\tITEMS: [\n\t\t\t\t\t\t\t...baseField.ITEMS,\n\t\t\t\t\t\t\tthis.prepareListItems(options.items),\n\t\t\t\t\t\t],\n\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\tisMulti: (() => {\n\t\t\t\t\t\t\t\tif (Type.isPlainObject(options.params))\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\treturn options.params === true;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t})(),\n\t\t\t\t\t\t},\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\tif (type === 'date')\n\t\t\t\t{\n\t\t\t\t\tconst subType = (() => {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tType.isPlainObject(options.value)\n\t\t\t\t\t\t\t&& Reflect.has(options.value, '_datesel')\n\t\t\t\t\t\t)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t// eslint-disable-next-line no-underscore-dangle\n\t\t\t\t\t\t\treturn options.value._datesel;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn this.parent.dateTypes.NONE;\n\t\t\t\t\t})();\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...baseField,\n\t\t\t\t\t\tSUB_TYPES: (() => {\n\t\t\t\t\t\t\tif (Type.isArray(options.exclude))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treturn baseField.SUB_TYPES.filter((item) => {\n\t\t\t\t\t\t\t\t\treturn !options.exclude.includes(item.VALUE);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn baseField.SUB_TYPES;\n\t\t\t\t\t\t})(),\n\t\t\t\t\t\tSUB_TYPE: (() => {\n\t\t\t\t\t\t\treturn baseField.SUB_TYPES.find((item) => {\n\t\t\t\t\t\t\t\treturn item.VALUE === subType;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t})(),\n\t\t\t\t\t\tVALUES: (() => {\n\t\t\t\t\t\t\tif (Type.isPlainObject(options.value))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treturn {...options.value};\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn baseField.VALUES;\n\t\t\t\t\t\t})(),\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\ttype === 'string'\n\t\t\t\t\t|| type === 'custom_date'\n\t\t\t\t\t|| type === 'number'\n\t\t\t\t\t|| type === 'checkbox'\n\t\t\t\t\t|| type === 'custom_entity'\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\treturn baseField;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn options;\n\t}\n\n\t/**\n\t * @private\n\t */\n\tappendRenderedField(field: HTMLElement)\n\t{\n\t\tif (Type.isDomNode(field))\n\t\t{\n\t\t\tconst additionalFieldsContainer = this.getAdditionalFieldContainer();\n\t\t\tDom.append(field, additionalFieldsContainer);\n\t\t}\n\t}\n\n\tgetValue(): {[key: string]: any} | string | number\n\t{\n\t\tconst allValues = this.parent.getFilterFieldsValues();\n\t\tconst {TYPE, NAME} = this.options;\n\n\t\tif (TYPE === 'DATE' || TYPE === 'NUMBER')\n\t\t{\n\t\t\treturn Object.entries(allValues).reduce((acc, [key, value]) => {\n\t\t\t\tif (key.startsWith(NAME))\n\t\t\t\t{\n\t\t\t\t\tacc[key.replace(NAME, '')] = value;\n\t\t\t\t}\n\n\t\t\t\treturn acc;\n\t\t\t}, {});\n\t\t}\n\n\t\tif (NAME in allValues)\n\t\t{\n\t\t\treturn allValues[NAME];\n\t\t}\n\n\t\treturn '';\n\t}\n\n\tsetValue(value)\n\t{\n\t\tconst {TYPE: type} = this.options;\n\n\t\tif (type === 'DATE' || type === 'NUMBER')\n\t\t{\n\t\t\tif (Type.isPlainObject(value))\n\t\t\t{\n\t\t\t\tconst container = this.parent.getFieldListContainer();\n\n\t\t\t\tObject.entries(value).forEach(([key, fieldValue]) => {\n\t\t\t\t\tconst fieldNode = container.querySelector(`[data-name=\"${this.id}\"] [data-name=\"${this.id}${key}\"], [data-name=\"${this.id}\"] [name=\"${this.id}${key}\"]`);\n\n\t\t\t\t\tif (fieldNode)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (Dom.hasClass(fieldNode, 'main-ui-select'))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconst items = Dom.attr(fieldNode, 'data-items');\n\n\t\t\t\t\t\t\tif (Type.isArray(items))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tconst item = items.find((currentItem) => currentItem.VALUE === fieldValue);\n\n\t\t\t\t\t\t\t\tif (Type.isPlainObject(item))\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tDom.attr(fieldNode, 'data-value', item);\n\n\t\t\t\t\t\t\t\t\tconst nameNode = fieldNode.querySelector('.main-ui-select-name');\n\t\t\t\t\t\t\t\t\tif (nameNode)\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tnameNode.innerText = item.NAME;\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tlet result = BX.Main.ui.Factory.get(fieldNode);\n\n\t\t\t\t\t\t\t\t\tif (!result)\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tresult = {node: fieldNode, instance: new BX.Main.ui.select(fieldNode)};\n\t\t\t\t\t\t\t\t\t\tBX.Main.ui.Factory.data.push(result);\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tif (Type.isPlainObject(result))\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tBX.onCustomEvent(window, 'UI::Select::Change', [result.instance, item]);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (fieldNode.tagName === 'INPUT')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfieldNode.value = fieldValue;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n}","import {Event, Type} from 'main.core';\n\nexport class Api\n{\n\tconstructor(parent)\n\t{\n\t\tthis.parent = parent;\n\t}\n\n\tsetFields(fields)\n\t{\n\t\tif (Type.isPlainObject(fields))\n\t\t{\n\t\t\tthis.parent.getPopup();\n\t\t\tconst preset = this.parent.getPreset();\n\t\t\tpreset.deactivateAllPresets();\n\t\t\tconst data = {preset_id: 'tmp_filter', fields};\n\t\t\tthis.parent.updateParams(data);\n\t\t\tpreset.applyPreset('tmp_filter');\n\t\t}\n\t}\n\n\tsetFilter(filter)\n\t{\n\t\tif (Type.isObject(filter))\n\t\t{\n\t\t\tthis.parent.updateParams(filter);\n\t\t\tthis.parent.getPreset().deactivateAllPresets();\n\t\t\tthis.parent.getPreset().activatePreset(filter.preset_id);\n\t\t\tthis.parent.getPreset().applyPreset(filter.preset_id);\n\n\t\t\tif (!filter.checkFields || !this.parent.getPreset().isPresetValuesModified(filter.preset_id))\n\t\t\t{\n\t\t\t\tthis.parent.applyFilter(false, filter.preset_id);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tlet newFields = {};\n\n\t\t\t\tif (Type.isPlainObject(filter.fields))\n\t\t\t\t{\n\t\t\t\t\tnewFields = Object.assign({}, filter.fields);\n\t\t\t\t}\n\n\t\t\t\tif (Type.isPlainObject(filter.additional))\n\t\t\t\t{\n\t\t\t\t\tnewFields = Object.assign({}, filter.additional);\n\t\t\t\t}\n\n\t\t\t\tthis.parent.getPreset().deactivateAllPresets();\n\t\t\t\tthis.setFields(newFields);\n\t\t\t\tthis.apply();\n\t\t\t}\n\t\t}\n\t}\n\n\n\t/**\n\t * Extends current applied filter\n\t * @param {Object.<String, *>} fields\n\t * @param {boolean} [force = false]\n\t */\n\textendFilter(fields, force = false)\n\t{\n\t\tif (Type.isObject(fields))\n\t\t{\n\t\t\tObject.keys(fields).forEach((key) => {\n\t\t\t\tif (Type.isNumber(fields[key]))\n\t\t\t\t{\n\t\t\t\t\tfields[key] = String(fields[key]);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tconst currentPresetId = this.parent.getPreset().getCurrentPresetId();\n\n\t\t\tif (\n\t\t\t\tforce\n\t\t\t\t|| currentPresetId === 'tmp_filter'\n\t\t\t\t|| currentPresetId === 'default_filter'\n\t\t\t)\n\t\t\t{\n\t\t\t\tconst newFields = Object.assign({}, this.parent.getFilterFieldsValues(), fields);\n\n\t\t\t\tthis.setFields(newFields);\n\t\t\t\tthis.apply();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst previewsAdditionalValues = this.parent.getPreset().getAdditionalValues(currentPresetId);\n\n\t\t\tif (Type.isPlainObject(previewsAdditionalValues)\n\t\t\t\t&& Object.keys(previewsAdditionalValues).length)\n\t\t\t{\n\t\t\t\tfields = Object.assign({}, previewsAdditionalValues, fields);\n\t\t\t}\n\n\t\t\tthis.setFilter({\n\t\t\t\tpreset_id: currentPresetId,\n\t\t\t\tadditional: fields,\n\t\t\t\tcheckFields: true,\n\t\t\t});\n\t\t}\n\t}\n\n\tapply()\n\t{\n\t\tif (!this.parent.isEditEnabled())\n\t\t{\n\t\t\tif (!this.parent.isEditEnabled())\n\t\t\t{\n\t\t\t\tthis.parent.applyFilter();\n\t\t\t}\n\n\t\t\tthis.parent.closePopup();\n\n\t\t\tif (this.parent.isAddPresetEnabled())\n\t\t\t{\n\t\t\t\tthis.parent.disableAddPreset();\n\t\t\t}\n\t\t}\n\t}\n\n\tgetEmitter(): Event.EventEmitter\n\t{\n\t\treturn this.parent.emitter;\n\t}\n}","export default function createDateInputDecl(options)\n{\n\treturn {\n\t\tblock: 'main-ui-control-field',\n\t\ttype: options.type,\n\t\tdragButton: false,\n\t\tcontent: {\n\t\t\tblock: 'main-ui-date',\n\t\t\tmix: ['filter-type-single'],\n\t\t\tcalendarButton: true,\n\t\t\tvalueDelete: true,\n\t\t\tplaceholder: options.placeholder,\n\t\t\tname: options.name,\n\t\t\ttabindex: options.tabindex,\n\t\t\tvalue: options.value,\n\t\t\tenableTime: options.enableTime,\n\t\t},\n\t};\n}","export default function createNumberInputDecl(options)\n{\n\treturn {\n\t\tblock: 'main-ui-control-field',\n\t\ttype: options.type,\n\t\tdragButton: false,\n\t\tcontent: {\n\t\t\tblock: 'main-ui-number',\n\t\t\tmix: ['filter-type-single'],\n\t\t\tvalueDelete: true,\n\t\t\tplaceholder: options.placeholder,\n\t\t\tname: options.name,\n\t\t\ttabindex: options.tabindex,\n\t\t\tvalue: options.value,\n\t\t},\n\t};\n}","export default function createLineDecl()\n{\n\treturn {\n\t\tblock: 'main-ui-filter-field-line',\n\t\tcontent: {\n\t\t\tblock: 'main-ui-filter-field-line-item',\n\t\t\ttag: 'span',\n\t\t},\n\t};\n}","export default function createSelectDecl(options)\n{\n\treturn {\n\t\tblock: 'main-ui-control-field',\n\t\tdragButton: false,\n\t\tcontent: {\n\t\t\tblock: 'main-ui-select',\n\t\t\ttabindex: options.tabindex,\n\t\t\tvalue: options.value,\n\t\t\titems: options.items,\n\t\t\tname: options.name,\n\t\t\tvalueDelete: false,\n\t\t},\n\t};\n}","/* eslint-disable no-underscore-dangle */\n/* eslint-disable class-methods-use-this */\nimport {Dom, Event, Runtime, Type, Text, Loc, Tag} from 'main.core';\nimport createDateInputDecl from './fields/create-date-input-decl';\nimport createNumberInputDecl from './fields/create-number-input-decl';\nimport createLineDecl from './fields/create-line-decl';\nimport createSelectDecl from './fields/create-select-decl';\nimport {Field} from './field/field';\n\nconst errorMessages = new WeakMap();\nconst errorMessagesTypes = new WeakMap();\nconst values = new WeakMap();\n\nexport class Fields\n{\n\tconstructor(parent)\n\t{\n\t\tthis.parent = null;\n\t\tthis.init(parent);\n\t}\n\n\tinit(parent)\n\t{\n\t\tthis.parent = parent;\n\t\tBX.addCustomEvent(window, 'UI::Select::change', this._onDateTypeChange.bind(this));\n\t}\n\n\tdeleteField(node)\n\t{\n\t\tDom.remove(node);\n\t}\n\n\tisFieldDelete(node)\n\t{\n\t\treturn Dom.hasClass(node, this.parent.settings.classFieldDelete);\n\t}\n\n\tisFieldValueDelete(node)\n\t{\n\t\treturn (\n\t\t\tDom.hasClass(node, this.parent.settings.classValueDelete)\n\t\t\t|| Dom.hasClass(node.parentNode, this.parent.settings.classValueDelete)\n\t\t);\n\t}\n\n\tisDragButton(node)\n\t{\n\t\treturn node && Dom.hasClass(node, this.parent.settings.classPresetDragButton);\n\t}\n\n\t/**\n\t * Clears values of filter field node\n\t * @param {HTMLElement} field\n\t */\n\tclearFieldValue(field)\n\t{\n\t\tif (field)\n\t\t{\n\t\t\tconst controls = [...field.querySelectorAll('.main-ui-control')];\n\t\t\tconst squares = [...field.querySelectorAll('.main-ui-square')];\n\n\t\t\tsquares.forEach((square) => Dom.remove(square));\n\t\t\tcontrols.forEach((control) => {\n\t\t\t\tif (Reflect.has(control, 'value'))\n\t\t\t\t{\n\t\t\t\t\tcontrol.value = '';\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tgetField(node)\n\t{\n\t\tif (Type.isDomNode(node))\n\t\t{\n\t\t\treturn node.closest('.main-ui-control-field, .main-ui-control-field-group');\n\t\t}\n\n\t\treturn null;\n\t}\n\n\trender(template, data)\n\t{\n\t\tif (Type.isString(template) && Type.isPlainObject(data))\n\t\t{\n\t\t\tconst html = Object.entries(data).reduce((acc, [key, value]) => {\n\t\t\t\treturn acc.replace(new RegExp(`{{${key}}}`, 'g'), value);\n\t\t\t}, template);\n\n\t\t\tconst wrapped = Dom.create('div', {html});\n\n\t\t\tconst fieldGroup = wrapped.querySelector('.main-ui-control-field-group');\n\t\t\tif (fieldGroup)\n\t\t\t{\n\t\t\t\treturn fieldGroup;\n\t\t\t}\n\n\t\t\tconst field = wrapped.querySelector('.main-ui-control-field');\n\t\t\tif (field)\n\t\t\t{\n\t\t\t\treturn field;\n\t\t\t}\n\n\t\t\tconst fieldLine = wrapped.querySelector('.main-ui-filter-field-line');\n\t\t\tif (fieldLine)\n\t\t\t{\n\t\t\t\treturn fieldLine;\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tcreateInputText(fieldData)\n\t{\n\t\tconst field = {\n\t\t\tblock: 'main-ui-control-field',\n\t\t\tmix: this.parent.getParam('ENABLE_LABEL') ? [this.parent.settings.classFieldWithLabel] : null,\n\t\t\tdeleteButton: true,\n\t\t\tvalueDelete: true,\n\t\t\tname: fieldData.NAME,\n\t\t\ttype: fieldData.TYPE,\n\t\t\tlabel: this.parent.getParam('ENABLE_LABEL') ? fieldData.LABEL : '',\n\t\t\tdragTitle: this.parent.getParam('MAIN_UI_FILTER__DRAG_FIELD_TITLE'),\n\t\t\tdeleteTitle: this.parent.getParam('MAIN_UI_FILTER__REMOVE_FIELD'),\n\t\t\tcontent: [\n\t\t\t\t{\n\t\t\t\t\tblock: 'main-ui-control-string',\n\t\t\t\t\tname: fieldData.NAME,\n\t\t\t\t\tplaceholder: fieldData.PLACEHOLDER || '',\n\t\t\t\t\tvalue: (Type.isString(fieldData.VALUE)\n\t\t\t\t\t\t\t|| Type.isNumber(fieldData.VALUE) ? fieldData.VALUE : ''),\n\t\t\t\t\ttabindex: fieldData.TABINDEX,\n\t\t\t\t},\n\t\t\t],\n\t\t};\n\n\t\tconst renderedField = BX.decl(field);\n\n\t\tthis.parent.getEmitter().emit(\n\t\t\t'init',\n\t\t\t{\n\t\t\t\tfield: new Field({\n\t\t\t\t\tparent: this.parent,\n\t\t\t\t\toptions: {...fieldData},\n\t\t\t\t\tnode: renderedField,\n\t\t\t\t}),\n\t\t\t},\n\t\t);\n\n\t\treturn renderedField;\n\t}\n\n\tcreateTextarea(fieldData)\n\t{\n\t\tconst field = BX.decl({\n\t\t\tblock: 'main-ui-control-field',\n\t\t\tmix: this.parent.getParam('ENABLE_LABEL') ? [this.parent.settings.classFieldWithLabel] : null,\n\t\t\tdeleteButton: true,\n\t\t\tvalueDelete: true,\n\t\t\tname: fieldData.NAME,\n\t\t\ttype: fieldData.TYPE,\n\t\t\tlabel: this.parent.getParam('ENABLE_LABEL') ? fieldData.LABEL : '',\n\t\t\tdragTitle: this.parent.getParam('MAIN_UI_FILTER__DRAG_FIELD_TITLE'),\n\t\t\tdeleteTitle: this.parent.getParam('MAIN_UI_FILTER__REMOVE_FIELD'),\n\t\t\tcontent: [\n\t\t\t\t{\n\t\t\t\t\tblock: 'main-ui-control-textarea',\n\t\t\t\t\tname: fieldData.NAME,\n\t\t\t\t\tplaceholder: fieldData.PLACEHOLDER || '',\n\t\t\t\t\tvalue: (Type.isString(fieldData.VALUE)\n\t\t\t\t\t|| Type.isNumber(fieldData.VALUE) ? fieldData.VALUE : ''),\n\t\t\t\t\ttabindex: fieldData.TABINDEX,\n\t\t\t\t},\n\t\t\t],\n\t\t});\n\n\t\tconst textarea = field.querySelector('textarea');\n\t\tconst onChange = () => {\n\t\t\tDom.style(textarea, 'height', '1px');\n\t\t\tDom.style(textarea, 'height', `${textarea.scrollHeight}px`);\n\t\t};\n\n\t\tEvent.bind(textarea, 'input', onChange);\n\t\tEvent.bind(textarea, 'change', onChange);\n\t\tEvent.bind(textarea, 'keyup', onChange);\n\t\tEvent.bind(textarea, 'cut', onChange);\n\t\tEvent.bind(textarea, 'paste', onChange);\n\n\t\tthis.parent.getEmitter().emit(\n\t\t\t'init',\n\t\t\t{\n\t\t\t\tfield: new Field({\n\t\t\t\t\tparent: this.parent,\n\t\t\t\t\toptions: {...fieldData},\n\t\t\t\t\tnode: field,\n\t\t\t\t}),\n\t\t\t},\n\t\t);\n\n\t\treturn field;\n\t}\n\n\tcreateDestSelector(fieldData)\n\t{\n\t\tlet field = {\n\t\t\tblock: 'main-ui-control-field',\n\t\t\tmix: this.parent.getParam('ENABLE_LABEL') ? [this.parent.settings.classFieldWithLabel] : null,\n\t\t\tdeleteButton: true,\n\t\t\tvalueDelete: true,\n\t\t\tname: fieldData.NAME,\n\t\t\ttype: fieldData.TYPE,\n\t\t\tlabel: this.parent.getParam('ENABLE_LABEL') ? fieldData.LABEL : '',\n\t\t\tdragTitle: this.parent.getParam('MAIN_UI_FILTER__DRAG_FIELD_TITLE'),\n\t\t\tdeleteTitle: this.parent.getParam('MAIN_UI_FILTER__REMOVE_FIELD'),\n\t\t\tcontent: {\n\t\t\t\tblock: 'main-ui-control-entity',\n\t\t\t\tmix: 'main-ui-control',\n\t\t\t\tattrs: {\n\t\t\t\t\t'data-multiple': JSON.stringify(fieldData.MULTIPLE),\n\t\t\t\t},\n\t\t\t\tcontent: [],\n\t\t\t},\n\t\t};\n\n\t\tif ('_label' in fieldData.VALUES && !!fieldData.VALUES._label)\n\t\t{\n\t\t\tif (fieldData.MULTIPLE)\n\t\t\t{\n\t\t\t\tlet label = fieldData.VALUES._label ? fieldData.VALUES._label : [];\n\n\t\t\t\tif (Type.isPlainObject(label))\n\t\t\t\t{\n\t\t\t\t\tlabel = Object.keys(label).map((key) => {\n\t\t\t\t\t\treturn label[key];\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tif (!Type.isArray(label))\n\t\t\t\t{\n\t\t\t\t\tlabel = [label];\n\t\t\t\t}\n\n\t\t\t\tlet value = fieldData.VALUES._value ? fieldData.VALUES._value : [];\n\t\t\t\tif (Type.isPlainObject(value))\n\t\t\t\t{\n\t\t\t\t\tvalue = Object.keys(value).map((key) => {\n\t\t\t\t\t\treturn value[key];\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tif (!Type.isArray(value))\n\t\t\t\t{\n\t\t\t\t\tvalue = [value];\n\t\t\t\t}\n\n\t\t\t\tlabel.forEach((currentLabel, index) => {\n\t\t\t\t\tfield.content.content.push({\n\t\t\t\t\t\tblock: 'main-ui-square',\n\t\t\t\t\t\ttag: 'span',\n\t\t\t\t\t\tname: currentLabel,\n\t\t\t\t\t\titem: {_label: currentLabel, _value: value[index]},\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tfield.content.content.push({\n\t\t\t\t\tblock: 'main-ui-square',\n\t\t\t\t\ttag: 'span',\n\t\t\t\t\tname: '_label' in fieldData.VALUES ? fieldData.VALUES._label : '',\n\t\t\t\t\titem: fieldData.VALUES,\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tfield.content.content.push(\n\t\t\t{\n\t\t\t\tblock: 'main-ui-square-search',\n\t\t\t\ttag: 'span',\n\t\t\t\tcontent: {\n\t\t\t\t\tblock: 'main-ui-control-string',\n\t\t\t\t\tname: `${fieldData.NAME}_label`,\n\t\t\t\t\ttabindex: fieldData.TABINDEX,\n\t\t\t\t\ttype: 'text',\n\t\t\t\t\tplaceholder: fieldData.PLACEHOLDER || '',\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tblock: 'main-ui-control-string',\n\t\t\t\tname: fieldData.NAME,\n\t\t\t\ttype: 'hidden',\n\t\t\t\tplaceholder: fieldData.PLACEHOLDER || '',\n\t\t\t\tvalue: '_value' in fieldData.VALUES ? fieldData.VALUES._value : '',\n\t\t\t\ttabindex: fieldData.TABINDEX,\n\t\t\t},\n\t\t);\n\n\t\tfield = BX.decl(field);\n\n\t\tconst input = BX.Filter.Utils.getBySelector(field, '.main-ui-control-string[type=\"text\"]');\n\t\tBX.addClass(input, 'main-ui-square-search-item');\n\n\t\tEvent.bind(input, 'focus', (event) => {\n\t\t\tBX.fireEvent(event.currentTarget, 'click');\n\t\t});\n\n\n\t\tEvent.bind(input, 'click', BX.proxy(this._onCustomEntityInputClick, this));\n\n\t\tif (!this.bindDocument)\n\t\t{\n\t\t\tEvent.bind(document, 'click', BX.proxy(this._onCustomEntityBlur, this));\n\t\t\tdocument.addEventListener('focus', BX.proxy(this._onDocumentFocus, this), true);\n\t\t\tthis.bindDocument = true;\n\t\t}\n\n\t\tEvent.bind(input, 'keydown', BX.proxy(this._onCustomEntityKeydown, this));\n\t\tEvent.bind(field, 'click', BX.proxy(this._onCustomEntityFieldClick, this));\n\n\n\t\tBX.ready(BX.proxy(function() {\n\t\t\tBX.Filter.DestinationSelector.create(\n\t\t\t\tfieldData.NAME,\n\t\t\t\t{\n\t\t\t\t\tfilterId: this.parent.getParam('FILTER_ID'),\n\t\t\t\t\tfieldId: fieldData.NAME,\n\t\t\t\t},\n\t\t\t);\n\t\t}, this));\n\n\t\tthis.parent.getEmitter().emit(\n\t\t\t'init',\n\t\t\t{\n\t\t\t\tfield: new Field({\n\t\t\t\t\tparent: this.parent,\n\t\t\t\t\toptions: {...fieldData},\n\t\t\t\t\tnode: field,\n\t\t\t\t}),\n\t\t\t},\n\t\t);\n\n\t\treturn field;\n\t}\n\n\tcreateCustomEntity(fieldData)\n\t{\n\t\tlet field = {\n\t\t\tblock: 'main-ui-control-field',\n\t\t\tmix: this.parent.getParam('ENABLE_LABEL') ? [this.parent.settings.classFieldWithLabel] : null,\n\t\t\tdeleteButton: true,\n\t\t\tvalueDelete: true,\n\t\t\tname: fieldData.NAME,\n\t\t\ttype: fieldData.TYPE,\n\t\t\tlabel: this.parent.getParam('ENABLE_LABEL') ? fieldData.LABEL : '',\n\t\t\tdragTitle: this.parent.getParam('MAIN_UI_FILTER__DRAG_FIELD_TITLE'),\n\t\t\tdeleteTitle: this.parent.getParam('MAIN_UI_FILTER__REMOVE_FIELD'),\n\t\t\tcontent: {\n\t\t\t\tblock: 'main-ui-control-entity',\n\t\t\t\tmix: 'main-ui-control',\n\t\t\t\tattrs: {\n\t\t\t\t\t'data-multiple': JSON.stringify(fieldData.MULTIPLE),\n\t\t\t\t},\n\t\t\t\tcontent: [],\n\t\t\t},\n\t\t};\n\n\t\tif ('_label' in fieldData.VALUES && !!fieldData.VALUES._label)\n\t\t{\n\t\t\tif (fieldData.MULTIPLE)\n\t\t\t{\n\t\t\t\tlet label = fieldData.VALUES._label ? fieldData.VALUES._label : [];\n\n\t\t\t\tif (Type.isPlainObject(label))\n\t\t\t\t{\n\t\t\t\t\tlabel = Object.keys(label).map((key) => {\n\t\t\t\t\t\treturn label[key];\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tif (!Type.isArray(label))\n\t\t\t\t{\n\t\t\t\t\tlabel = [label];\n\t\t\t\t}\n\n\t\t\t\tlet value = fieldData.VALUES._value ? fieldData.VALUES._value : [];\n\t\t\t\tif (Type.isPlainObject(value))\n\t\t\t\t{\n\t\t\t\t\tvalue = Object.keys(value).map((key) => {\n\t\t\t\t\t\treturn value[key];\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tif (!Type.isArray(value))\n\t\t\t\t{\n\t\t\t\t\tvalue = [value];\n\t\t\t\t}\n\n\t\t\t\tlabel.forEach((currentLabel, index) => {\n\t\t\t\t\tfield.content.content.push({\n\t\t\t\t\t\tblock: 'main-ui-square',\n\t\t\t\t\t\ttag: 'span',\n\t\t\t\t\t\tname: currentLabel,\n\t\t\t\t\t\titem: {_label: currentLabel, _value: value[index]},\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tfield.content.content.push({\n\t\t\t\t\tblock: 'main-ui-square',\n\t\t\t\t\ttag: 'span',\n\t\t\t\t\tname: '_label' in fieldData.VALUES ? fieldData.VALUES._label : '',\n\t\t\t\t\titem: fieldData.VALUES,\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tfield.content.content.push(\n\t\t\t{\n\t\t\t\tblock: 'main-ui-square-search',\n\t\t\t\ttag: 'span',\n\t\t\t\tcontent: {\n\t\t\t\t\tblock: 'main-ui-control-string',\n\t\t\t\t\tname: `${fieldData.NAME}_label`,\n\t\t\t\t\ttabindex: fieldData.TABINDEX,\n\t\t\t\t\ttype: 'text',\n\t\t\t\t\tplaceholder: fieldData.PLACEHOLDER || '',\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tblock: 'main-ui-control-string',\n\t\t\t\tname: fieldData.NAME,\n\t\t\t\ttype: 'hidden',\n\t\t\t\tplaceholder: fieldData.PLACEHOLDER || '',\n\t\t\t\tvalue: '_value' in fieldData.VALUES ? fieldData.VALUES._value : '',\n\t\t\t\ttabindex: fieldData.TABINDEX,\n\t\t\t},\n\t\t);\n\n\n\t\tfield = BX.decl(field);\n\t\tconst input = BX.Filter.Utils.getBySelector(field, '.main-ui-control-string[type=\"text\"]');\n\t\tBX.addClass(input, 'main-ui-square-search-item');\n\n\t\tEvent.bind(input, 'focus', BX.proxy(this._onCustomEntityInputFocus, this));\n\t\tEvent.bind(input, 'click', BX.proxy(this._onCustomEntityInputClick, this));\n\n\t\tif (!this.bindDocument)\n\t\t{\n\t\t\tEvent.bind(document, 'click', BX.proxy(this._onCustomEntityBlur, this));\n\t\t\tdocument.addEventListener('focus', BX.proxy(this._onDocumentFocus, this), true);\n\t\t\tthis.bindDocument = true;\n\t\t}\n\n\t\tEvent.bind(input, 'keydown', BX.proxy(this._onCustomEntityKeydown, this));\n\t\tEvent.bind(field, 'click', BX.proxy(this._onCustomEntityFieldClick, this));\n\n\t\tthis.parent.getEmitter().emit(\n\t\t\t'init',\n\t\t\t{\n\t\t\t\tfield: new Field({\n\t\t\t\t\tparent: this.parent,\n\t\t\t\t\toptions: {...fieldData},\n\t\t\t\t\tnode: field,\n\t\t\t\t}),\n\t\t\t},\n\t\t);\n\n\t\treturn field;\n\t}\n\n\t_onCustomEntityInputFocus(event)\n\t{\n\t\tBX.fireEvent(event.currentTarget, 'click');\n\t}\n\n\t_onCustomEntityInputClick(event)\n\t{\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tif (event.isTrusted)\n\t\t{\n\t\t\tthis.trustTimestamp = event.timeStamp;\n\t\t\tthis.notTrustTimestamp = this.notTrustTimestamp || event.timeStamp;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.notTrustTimestamp = event.timeStamp;\n\t\t}\n\n\t\tconst trustDate = new Date(this.trustTimestamp);\n\t\tconst notTrustDate = new Date(this.notTrustTimestamp);\n\t\tconst trustTime = `${trustDate.getMinutes()}:${trustDate.getSeconds()}`;\n\t\tconst notTrustTime = `${notTrustDate.getMinutes()}:${notTrustDate.getSeconds()}`;\n\n\t\tif (trustTime !== notTrustTime)\n\t\t{\n\t\t\tthis._onCustomEntityFocus(event);\n\t\t}\n\t}\n\n\t_onDocumentFocus(event)\n\t{\n\t\tconst CustomEntity = this.getCustomEntityInstance();\n\t\tconst popupContainer = CustomEntity.getPopupContainer();\n\t\tconst isOnInputField = CustomEntity.getLabelNode() === event.target;\n\t\tconst isInsidePopup = !!popupContainer && popupContainer.contains(event.target);\n\n\t\tif (!isOnInputField && !isInsidePopup)\n\t\t{\n\t\t\tthis._onCustomEntityBlur(event);\n\t\t}\n\t}\n\n\t_onCustomEntityKeydown(event)\n\t{\n\t\tconst {target, currentTarget} = event;\n\t\tconst {parentNode} = target.parentNode;\n\n\t\tconst squares = parentNode.querySelectorAll('.main-ui-square');\n\t\tconst square = squares[squares.length - 1];\n\n\t\tif (!Type.isDomNode(square))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (\n\t\t\tBX.Filter.Utils.isKey(event, 'backspace')\n\t\t\t&& currentTarget.selectionStart === 0\n\t\t)\n\t\t{\n\t\t\tif (Dom.hasClass(square, 'main-ui-square-selected'))\n\t\t\t{\n\t\t\t\tconst input = parentNode.querySelector('input[type=\"hidden\"]');\n\n\t\t\t\tif (Type.isDomNode(input))\n\t\t\t\t{\n\t\t\t\t\tinput.value = '';\n\t\t\t\t\tBX.fireEvent(input, 'input');\n\t\t\t\t}\n\n\t\t\t\tDom.remove(square);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tDom.addClass(square, 'main-ui-square-selected');\n\t\t\treturn;\n\t\t}\n\n\t\tDom.removeClass(square, 'main-ui-square-selected');\n\t}\n\n\t_onCustomEntityFieldClick({target})\n\t{\n\t\tif (Dom.hasClass(target, 'main-ui-square-delete'))\n\t\t{\n\t\t\tconst square = target.closest('.main-ui-square');\n\n\t\t\tif (Type.isDomNode(square))\n\t\t\t{\n\t\t\t\tconst CustomEntity = this.getCustomEntityInstance();\n\t\t\t\tBX.onCustomEvent(window, 'BX.Main.Filter:customEntityRemove', [CustomEntity]);\n\t\t\t\tDom.remove(square);\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\tconst input = target.querySelector('input[type=\"text\"]');\n\n\t\tif (Type.isDomNode(input))\n\t\t{\n\t\t\tBX.fireEvent(input, 'focus');\n\t\t}\n\t}\n\n\t_onCustomEntityBlur(event)\n\t{\n\t\tconst eventData = {\n\t\t\tstopBlur: false,\n\t\t};\n\n\t\tBX.onCustomEvent(window, 'BX.Main.Filter:onGetStopBlur', [event, eventData]);\n\n\t\tif (\n\t\t\ttypeof eventData.stopBlur === 'undefined'\n\t\t\t|| !eventData.stopBlur\n\t\t)\n\t\t{\n\t\t\tconst CustomEntity = this.getCustomEntityInstance();\n\t\t\tBX.onCustomEvent(window, 'BX.Main.Filter:customEntityBlur', [CustomEntity]);\n\n\t\t\tEvent.unbind(CustomEntity.getPopupContainer(), 'click', this._stopPropagation);\n\t\t\tDom.removeClass(CustomEntity.getField(), 'main-ui-focus');\n\t\t}\n\t}\n\n\t_stopPropagation(event)\n\t{\n\t\tevent.stopPropagation();\n\t}\n\n\tgetCustomEntityInstance()\n\t{\n\t\tif (!(this.customEntityInstance instanceof BX.Main.ui.CustomEntity))\n\t\t{\n\t\t\tthis.customEntityInstance = new BX.Main.ui.CustomEntity();\n\t\t}\n\n\t\treturn this.customEntityInstance;\n\t}\n\n\t_onCustomEntityFocus(event)\n\t{\n\t\tevent.stopPropagation();\n\n\t\tconst {currentTarget} = event;\n\t\tconst field = currentTarget.closest('.main-ui-control-entity');\n\n\t\tconst CustomEntity = this.getCustomEntityInstance();\n\t\tCustomEntity.setField(field);\n\t\tBX.onCustomEvent('BX.Main.Filter:customEntityFocus', [CustomEntity]);\n\n\t\tconst popupContainer = CustomEntity.getPopupContainer();\n\t\tif (Type.isElementNode(popupContainer))\n\t\t{\n\t\t\tEvent.bind(popupContainer, 'click', this._stopPropagation);\n\t\t}\n\n\t\tDom.addClass(field, 'main-ui-focus');\n\t}\n\n\tcreateCustom(fieldData)\n\t{\n\t\tconst field = BX.decl({\n\t\t\tblock: 'main-ui-control-field',\n\t\t\tmix: this.parent.getParam('ENABLE_LABEL') ? [this.parent.settings.classFieldWithLabel] : null,\n\t\t\tname: fieldData.NAME,\n\t\t\ttype: fieldData.TYPE,\n\t\t\tdeleteButton: true,\n\t\t\tlabel: this.parent.getParam('ENABLE_LABEL') ? fieldData.LABEL : '',\n\t\t\tdragTitle: this.parent.getParam('MAIN_UI_FILTER__DRAG_FIELD_TITLE'),\n\t\t\tdeleteTitle: this.parent.getParam('MAIN_UI_FILTER__REMOVE_FIELD'),\n\t\t\tcontent: {\n\t\t\t\tblock: 'main-ui-custom',\n\t\t\t\tmix: [\n\t\t\t\t\t'main-ui-control',\n\t\t\t\t\t'main-ui-custom-style',\n\t\t\t\t],\n\t\t\t\tattrs: {\n\t\t\t\t\t'data-name': fieldData.NAME,\n\t\t\t\t},\n\t\t\t\tcontent: '',\n\t\t\t},\n\t\t});\n\n\t\tif (Type.isString(fieldData.VALUE))\n\t\t{\n\t\t\tconst fieldValue = (() => {\n\t\t\t\tif (Reflect.has(fieldData, '_VALUE'))\n\t\t\t\t{\n\t\t\t\t\treturn fieldData._VALUE;\n\t\t\t\t}\n\n\t\t\t\treturn '';\n\t\t\t})();\n\n\t\t\tconst html = Text\n\t\t\t\t.decode(fieldData.VALUE)\n\t\t\t\t.replace(\n\t\t\t\t\t`name=\"${fieldData.NAME}\"`,\n\t\t\t\t\t`name=\"${fieldData.NAME}\" value=\"${fieldValue}\"`,\n\t\t\t\t);\n\n\t\t\tconst control = field.querySelector('.main-ui-custom');\n\t\t\tRuntime.html(control, html);\n\t\t}\n\n\t\tthis.parent.getEmitter().emit(\n\t\t\t'init',\n\t\t\t{\n\t\t\t\tfield: new Field({\n\t\t\t\t\tparent: this.parent,\n\t\t\t\t\toptions: {...fieldData},\n\t\t\t\t\tnode: field,\n\t\t\t\t}),\n\t\t\t},\n\t\t);\n\n\t\treturn field;\n\t}\n\n\tcreateSelect(fieldData)\n\t{\n\t\tconst field = BX.decl({\n\t\t\tblock: 'main-ui-control-field',\n\t\t\tmix: this.parent.getParam('ENABLE_LABEL') ? [this.parent.settings.classFieldWithLabel] : null,\n\t\t\tname: fieldData.NAME,\n\t\t\ttype: fieldData.TYPE,\n\t\t\tdeleteButton: true,\n\t\t\tlabel: this.parent.getParam('ENABLE_LABEL') ? fieldData.LABEL : '',\n\t\t\tdragTitle: this.parent.getParam('MAIN_UI_FILTER__DRAG_FIELD_TITLE'),\n\t\t\tdeleteTitle: this.parent.getParam('MAIN_UI_FILTER__REMOVE_FIELD'),\n\t\t\tcontent: {\n\t\t\t\tblock: this.parent.settings.classSelect,\n\t\t\t\tname: fieldData.NAME,\n\t\t\t\titems: fieldData.ITEMS,\n\t\t\t\tvalue: 'VALUE' in fieldData ? fieldData.VALUE : fieldData.ITEMS[0],\n\t\t\t\tparams: fieldData.PARAMS,\n\t\t\t\ttabindex: fieldData.TABINDEX,\n\t\t\t\tvalueDelete: false,\n\t\t\t},\n\t\t});\n\n\t\tthis.parent.getEmitter().emit(\n\t\t\t'init',\n\t\t\t{\n\t\t\t\tfield: new Field({\n\t\t\t\t\tparent: this.parent,\n\t\t\t\t\toptions: {...fieldData},\n\t\t\t\t\tnode: field,\n\t\t\t\t}),\n\t\t\t},\n\t\t);\n\n\t\treturn field;\n\t}\n\n\tcreateMultiSelect(fieldData)\n\t{\n\t\tconst field = BX.decl({\n\t\t\tblock: 'main-ui-control-field',\n\t\t\tmix: this.parent.getParam('ENABLE_LABEL') ? [this.parent.settings.classFieldWithLabel] : null,\n\t\t\tname: fieldData.NAME,\n\t\t\ttype: fieldData.TYPE,\n\t\t\tdeleteButton: true,\n\t\t\tlabel: this.parent.getParam('ENABLE_LABEL') ? fieldData.LABEL : '',\n\t\t\tdragTitle: this.parent.getParam('MAIN_UI_FILTER__DRAG_FIELD_TITLE'),\n\t\t\tdeleteTitle: this.parent.getParam('MAIN_UI_FILTER__REMOVE_FIELD'),\n\t\t\tcontent: {\n\t\t\t\tblock: 'main-ui-multi-select',\n\t\t\t\tname: fieldData.NAME,\n\t\t\t\ttabindex: 'TABINDEX' in fieldData ? fieldData.TABINDEX : '',\n\t\t\t\tplaceholder: !this.parent.getParam('ENABLE_LABEL') && 'PLACEHOLDER' in fieldData ? fieldData.PLACEHOLDER : '',\n\t\t\t\titems: 'ITEMS' in fieldData ? fieldData.ITEMS : [],\n\t\t\t\tvalue: 'VALUE' in fieldData ? fieldData.VALUE : [],\n\t\t\t\tparams: 'PARAMS' in fieldData ? fieldData.PARAMS : {isMulti: true},\n\t\t\t\tvalueDelete: true,\n\t\t\t},\n\t\t});\n\n\t\tthis.parent.getEmitter().emit(\n\t\t\t'init',\n\t\t\t{\n\t\t\t\tfield: new Field({\n\t\t\t\t\tparent: this.parent,\n\t\t\t\t\toptions: {...fieldData},\n\t\t\t\t\tnode: field,\n\t\t\t\t}),\n\t\t\t},\n\t\t);\n\n\t\treturn field;\n\t}\n\n\n\tcreateCustomDate(fieldData)\n\t{\n\t\tconst group = {\n\t\t\tblock: 'main-ui-control-field-group',\n\t\t\ttype: fieldData.TYPE,\n\t\t\tmix: this.parent.getParam('ENABLE_LABEL') ? [this.parent.settings.classFieldWithLabel, 'main-ui-filter-date-group'] : ['main-ui-filter-date-group'],\n\t\t\tlabel: this.parent.getParam('ENABLE_LABEL') ? fieldData.LABEL : '',\n\t\t\tdragTitle: this.parent.getParam('MAIN_UI_FILTER__DRAG_FIELD_TITLE'),\n\t\t\tdeleteTitle: this.parent.getParam('MAIN_UI_FILTER__REMOVE_FIELD'),\n\t\t\ttabindex: 'TABINDEX' in fieldData ? fieldData.TABINDEX : '',\n\t\t\tname: 'NAME' in fieldData ? fieldData.NAME : '',\n\t\t\tdeleteButton: true,\n\t\t\tcontent: [],\n\t\t};\n\n\t\tif (Type.isPlainObject(fieldData.VALUE.days))\n\t\t{\n\t\t\tfieldData.VALUE.days = Object.keys(fieldData.VALUE.days).map((index) => {\n\t\t\t\treturn fieldData.VALUE.days[index];\n\t\t\t});\n\t\t}\n\n\t\tconst daysValue = fieldData.DAYS.filter((item) => {\n\t\t\treturn fieldData.VALUE.days.some((value) => {\n\t\t\t\treturn value === item.VALUE;\n\t\t\t});\n\t\t});\n\n\t\tconst days = {\n\t\t\tblock: 'main-ui-control-field',\n\t\t\tmix: ['main-ui-control-custom-date'],\n\t\t\tplaceholder: fieldData.DAYS_PLACEHOLDER,\n\t\t\tdragButton: false,\n\t\t\tcontent: {\n\t\t\t\tblock: 'main-ui-multi-select',\n\t\t\t\tname: `${fieldData.NAME}_days`,\n\t\t\t\ttabindex: 'TABINDEX' in fieldData ? fieldData.TABINDEX : '',\n\t\t\t\titems: fieldData.DAYS,\n\t\t\t\tvalue: daysValue,\n\t\t\t\tparams: 'PARAMS' in fieldData ? fieldData.PARAMS : {isMulti: true},\n\t\t\t\tvalueDelete: true,\n\t\t\t\tattrs: {'data-placeholder': fieldData.DAYS_PLACEHOLDER},\n\t\t\t},\n\t\t};\n\n\n\t\tif (Type.isPlainObject(fieldData.VALUE.months))\n\t\t{\n\t\t\tfieldData.VALUE.months = Object.keys(fieldData.VALUE.months).map((index) => {\n\t\t\t\treturn fieldData.VALUE.months[index];\n\t\t\t});\n\t\t}\n\n\t\tconst monthsValue = fieldData.MONTHS.filter((item) => {\n\t\t\treturn fieldData.VALUE.months.some((value) => {\n\t\t\t\treturn value === item.VALUE;\n\t\t\t});\n\t\t});\n\n\t\tconst months = {\n\t\t\tblock: 'main-ui-control-field',\n\t\t\tmix: ['main-ui-control-custom-date'],\n\t\t\tdragButton: false,\n\t\t\tcontent: {\n\t\t\t\tblock: 'main-ui-multi-select',\n\t\t\t\tname: `${fieldData.NAME}_months`,\n\t\t\t\ttabindex: 'TABINDEX' in fieldData ? fieldData.TABINDEX : '',\n\t\t\t\titems: fieldData.MONTHS,\n\t\t\t\tvalue: monthsValue,\n\t\t\t\tparams: 'PARAMS' in fieldData ? fieldData.PARAMS : {isMulti: true},\n\t\t\t\tvalueDelete: true,\n\t\t\t\tattrs: {'data-placeholder': fieldData.MONTHS_PLACEHOLDER},\n\t\t\t},\n\t\t};\n\n\n\t\tif (Type.isPlainObject(fieldData.VALUE.years))\n\t\t{\n\t\t\tfieldData.VALUE.years = Object.keys(fieldData.VALUE.years).map((index) => {\n\t\t\t\treturn fieldData.VALUE.years[index];\n\t\t\t});\n\t\t}\n\n\t\tconst yearsValue = fieldData.YEARS.filter((item) => {\n\t\t\treturn fieldData.VALUE.years.some((value) => {\n\t\t\t\treturn value === item.VALUE;\n\t\t\t});\n\t\t});\n\n\t\tconst years = {\n\t\t\tblock: 'main-ui-control-field',\n\t\t\tmix: ['main-ui-control-custom-date'],\n\t\t\tdragButton: false,\n\t\t\tcontent: {\n\t\t\t\tblock: 'main-ui-multi-select',\n\t\t\t\tname: `${fieldData.NAME}_years`,\n\t\t\t\ttabindex: 'TABINDEX' in fieldData ? fieldData.TABINDEX : '',\n\t\t\t\titems: fieldData.YEARS,\n\t\t\t\tvalue: yearsValue,\n\t\t\t\tparams: 'PARAMS' in fieldData ? fieldData.PARAMS : {isMulti: true},\n\t\t\t\tvalueDelete: true,\n\t\t\t\tattrs: {'data-placeholder': fieldData.YEARS_PLACEHOLDER},\n\t\t\t},\n\t\t};\n\n\t\tgroup.content.push(days);\n\t\tgroup.content.push(months);\n\t\tgroup.content.push(years);\n\n\t\tconst field = BX.decl(group);\n\n\t\tthis.parent.getEmitter().emit(\n\t\t\t'init',\n\t\t\t{\n\t\t\t\tfield: new Field({\n\t\t\t\t\tparent: this.parent,\n\t\t\t\t\toptions: {...fieldData},\n\t\t\t\t\tnode: field,\n\t\t\t\t}),\n\t\t\t},\n\t\t);\n\n\t\treturn field;\n\t}\n\n\n\t_onDateTypeChange(instance, data)\n\t{\n\t\tif (this.parent.getPopup().contentContainer.contains(instance.node))\n\t\t{\n\t\t\tconst fieldData = {};\n\t\t\tlet dateGroup = null;\n\t\t\tlet label;\n\t\t\tlet controls;\n\t\t\tlet index;\n\n\t\t\tif (Type.isPlainObject(data) && Reflect.has(data, 'VALUE'))\n\t\t\t{\n\t\t\t\tconst fieldNode = instance.getNode();\n\t\t\t\tconst params = instance.getParams();\n\t\t\t\tconst {name} = fieldNode.dataset;\n\n\t\t\t\tif (\n\t\t\t\t\t!Type.isPlainObject(params)\n\t\t\t\t\t&& (name.endsWith('_datesel') || name.endsWith('_numsel')))\n\t\t\t\t{\n\t\t\t\t\tconst group = fieldNode.parentNode.parentNode;\n\t\t\t\t\tfieldData.TABINDEX = instance.getInput().getAttribute('tabindex');\n\t\t\t\t\tfieldData.SUB_TYPES = instance.getItems();\n\t\t\t\t\tfieldData.SUB_TYPE = data;\n\t\t\t\t\tfieldData.NAME = group.dataset.name;\n\t\t\t\t\tfieldData.TYPE = group.dataset.type;\n\t\t\t\t\tfieldData.VALUE_REQUIRED = group.dataset.valueRequired === 'true';\n\n\t\t\t\t\tconst presetData = this.parent.getPreset().getCurrentPresetData();\n\n\t\t\t\t\tif (Type.isArray(presetData.FIELDS))\n\t\t\t\t\t{\n\t\t\t\t\t\tlet presetField = presetData.FIELDS.find((current) => {\n\t\t\t\t\t\t\treturn current.NAME === fieldData.NAME;\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif (Type.isNil(presetField))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tpresetField = this.parent.params.FIELDS_STUBS.find((current) => {\n\t\t\t\t\t\t\t\treturn current.TYPE === fieldData.TYPE;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (!Type.isNil(presetField))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (name.endsWith('_datesel'))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tfieldData.MONTHS = presetField.MONTHS;\n\t\t\t\t\t\t\t\tfieldData.MONTH = presetField.MONTH;\n\t\t\t\t\t\t\t\tfieldData.YEARS = presetField.YEARS;\n\t\t\t\t\t\t\t\tfieldData.YEAR = presetField.YEAR;\n\t\t\t\t\t\t\t\tfieldData.QUARTERS = presetField.QUARTERS;\n\t\t\t\t\t\t\t\tfieldData.QUARTER = presetField.QUARTER;\n\t\t\t\t\t\t\t\tfieldData.ENABLE_TIME = presetField.ENABLE_TIME;\n\t\t\t\t\t\t\t\tfieldData.YEARS_SWITCHER = presetField.YEARS_SWITCHER;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tfieldData.VALUES = presetField.VALUES;\n\t\t\t\t\t\t\tfieldData.REQUIRED = presetField.REQUIRED;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (this.parent.getParam('ENABLE_LABEL'))\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel = group.querySelector('.main-ui-control-field-label');\n\t\t\t\t\t\tfieldData.LABEL = label.innerText;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (name.endsWith('_datesel'))\n\t\t\t\t\t{\n\t\t\t\t\t\tdateGroup = this.createDate(fieldData);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tdateGroup = this.createNumber(fieldData);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (Type.isArray(this.parent.fieldsList))\n\t\t\t\t\t{\n\t\t\t\t\t\tindex = this.parent.fieldsList.indexOf(group);\n\n\t\t\t\t\t\tif (index !== -1)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.parent.fieldsList[index] = dateGroup;\n\t\t\t\t\t\t\tthis.parent.registerDragItem(dateGroup);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.parent.unregisterDragItem(group);\n\n\t\t\t\t\tcontrols = [...dateGroup.querySelectorAll('.main-ui-control-field')];\n\n\t\t\t\t\tif (Type.isArray(controls) && controls.length)\n\t\t\t\t\t{\n\t\t\t\t\t\tcontrols.forEach((control) => {\n\t\t\t\t\t\t\tcontrol.FieldController = new BX.Filter.FieldController(control, this.parent);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tDom.insertAfter(dateGroup, group);\n\t\t\t\t\tDom.remove(group);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tcreateNumber(options)\n\t{\n\t\tconst {numberTypes} = this.parent;\n\t\tconst {ENABLE_LABEL} = this.parent.params;\n\t\tconst {\n\t\t\tSUB_TYPE = {},\n\t\t\tSUB_TYPES = [],\n\t\t\tTABINDEX = '',\n\t\t\tVALUES = {_from: '', _to: ''},\n\t\t\tLABEL = '',\n\t\t\tTYPE,\n\t\t} = options;\n\n\t\tconst subType = SUB_TYPE.VALUE || numberTypes.SINGLE;\n\t\tconst placeholder = SUB_TYPE.PLACEHOLDER || '';\n\t\tconst fieldName = options.NAME.replace('_numsel', '');\n\t\tconst classes = (() => {\n\t\t\tif (ENABLE_LABEL)\n\t\t\t{\n\t\t\t\treturn [\n\t\t\t\t\t'main-ui-filter-wield-with-label',\n\t\t\t\t\t'main-ui-filter-number-group',\n\t\t\t\t];\n\t\t\t}\n\n\t\t\treturn ['main-ui-filter-number-group'];\n\t\t})();\n\n\t\tconst fieldGroup = {\n\t\t\tblock: 'number-group',\n\t\t\ttype: TYPE,\n\t\t\tmix: classes,\n\t\t\tlabel: ENABLE_LABEL ? LABEL : '',\n\t\t\tdragTitle: this.parent.getParam('MAIN_UI_FILTER__DRAG_FIELD_TITLE'),\n\t\t\tdeleteTitle: this.parent.getParam('MAIN_UI_FILTER__REMOVE_FIELD'),\n\t\t\ttabindex: TABINDEX,\n\t\t\tvalue: SUB_TYPE,\n\t\t\titems: SUB_TYPES,\n\t\t\tname: fieldName,\n\t\t\tdeleteButton: true,\n\t\t\tcontent: [],\n\t\t};\n\n\t\tif (subType !== numberTypes.LESS)\n\t\t{\n\t\t\tconst from = {\n\t\t\t\tblock: 'main-ui-control-field',\n\t\t\t\ttype: TYPE,\n\t\t\t\tdragButton: false,\n\t\t\t\tcontent: {\n\t\t\t\t\tblock: 'main-ui-number',\n\t\t\t\t\tmix: ['filter-type-single'],\n\t\t\t\t\tcalendarButton: true,\n\t\t\t\t\tvalueDelete: true,\n\t\t\t\t\tplaceholder,\n\t\t\t\t\tname: `${fieldName}_from`,\n\t\t\t\t\ttabindex: TABINDEX,\n\t\t\t\t\tvalue: VALUES._from || '',\n\t\t\t\t},\n\t\t\t};\n\n\t\t\tfieldGroup.content.push(from);\n\t\t}\n\n\t\tif (subType === numberTypes.RANGE)\n\t\t{\n\t\t\tconst line = {\n\t\t\t\tblock: 'main-ui-filter-field-line',\n\t\t\t\tcontent: {\n\t\t\t\t\tblock: 'main-ui-filter-field-line-item',\n\t\t\t\t\ttag: 'span',\n\t\t\t\t},\n\t\t\t};\n\n\t\t\tfieldGroup.content.push(line);\n\t\t}\n\n\t\tif (\n\t\t\tsubType === numberTypes.RANGE\n\t\t\t|| subType === numberTypes.LESS\n\t\t)\n\t\t{\n\t\t\tconst to = {\n\t\t\t\tblock: 'main-ui-control-field',\n\t\t\t\ttype: TYPE,\n\t\t\t\tdragButton: false,\n\t\t\t\tcontent: {\n\t\t\t\t\tblock: 'main-ui-number',\n\t\t\t\t\tcalendarButton: true,\n\t\t\t\t\tvalueDelete: true,\n\t\t\t\t\tname: `${fieldName}_to`,\n\t\t\t\t\ttabindex: TABINDEX,\n\t\t\t\t\tvalue: VALUES._to || '',\n\t\t\t\t},\n\t\t\t};\n\n\t\t\tfieldGroup.content.push(to);\n\t\t}\n\n\t\tconst field = BX.decl(fieldGroup);\n\n\t\tthis.parent.getEmitter().emit(\n\t\t\t'init',\n\t\t\t{\n\t\t\t\tfield: new Field({\n\t\t\t\t\tparent: this.parent,\n\t\t\t\t\toptions: {...options},\n\t\t\t\t\tnode: field,\n\t\t\t\t}),\n\t\t\t},\n\t\t);\n\n\t\treturn field;\n\t}\n\n\tcreateDate(options)\n\t{\n\t\tconst {\n\t\t\tdateTypes,\n\t\t\tadditionalDateTypes,\n\t\t} = this.parent;\n\t\tconst {\n\t\t\tSUB_TYPE = {},\n\t\t\tSUB_TYPES = [],\n\t\t\tPLACEHOLDER = '',\n\t\t\tVALUES = {\n\t\t\t\t_from: '',\n\t\t\t\t_to: '',\n\t\t\t\t_quarter: '',\n\t\t\t\t_days: '',\n\t\t\t\t_month: '',\n\t\t\t\t_year: '',\n\t\t\t\t_allow_year: '',\n\t\t\t},\n\t\t\tTABINDEX = '',\n\t\t\tENABLE_TIME = false,\n\t\t\tLABEL = '',\n\t\t\tTYPE,\n\t\t\tVALUE_REQUIRED = false,\n\t\t\tREQUIRED = false,\n\t\t} = options;\n\t\tconst {ENABLE_LABEL} = this.parent.params;\n\n\t\tconst subType = SUB_TYPE.VALUE || dateTypes.NONE;\n\t\tconst fieldName = options.NAME.replace('_datesel', '');\n\t\tconst classes = (() => {\n\t\t\tif (ENABLE_LABEL)\n\t\t\t{\n\t\t\t\treturn [\n\t\t\t\t\t'main-ui-filter-wield-with-label',\n\t\t\t\t\t'main-ui-filter-date-group',\n\t\t\t\t];\n\t\t\t}\n\n\t\t\treturn ['main-ui-filter-date-group'];\n\t\t})();\n\n\t\tconst fieldGroup = {\n\t\t\tblock: 'date-group',\n\t\t\ttype: TYPE,\n\t\t\tmix: classes,\n\t\t\tlabel: ENABLE_LABEL ? LABEL : '',\n\t\t\tdragTitle: this.parent.getParam('MAIN_UI_FILTER__DRAG_FIELD_TITLE'),\n\t\t\tdeleteTitle: this.parent.getParam('MAIN_UI_FILTER__REMOVE_FIELD'),\n\t\t\ttabindex: TABINDEX,\n\t\t\tvalue: SUB_TYPE,\n\t\t\titems: SUB_TYPES,\n\t\t\tname: fieldName,\n\t\t\tenableTime: ENABLE_TIME,\n\t\t\tdeleteButton: true,\n\t\t\tcontent: [],\n\t\t};\n\n\t\tif (subType === dateTypes.EXACT)\n\t\t{\n\t\t\tconst fieldDecl = createDateInputDecl({\n\t\t\t\ttype: TYPE,\n\t\t\t\tname: `${fieldName.NAME}_from`,\n\t\t\t\tplaceholder: PLACEHOLDER,\n\t\t\t\ttabindex: TABINDEX,\n\t\t\t\tvalue: VALUES._from || '',\n\t\t\t\tenableTime: ENABLE_TIME,\n\t\t\t});\n\n\t\t\tfieldGroup.content.push(fieldDecl);\n\t\t}\n\n\t\tif (\n\t\t\tsubType === dateTypes.NEXT_DAYS\n\t\t\t|| subType === dateTypes.PREV_DAYS\n\t\t\t|| subType === additionalDateTypes.PREV_DAY\n\t\t\t|| subType === additionalDateTypes.NEXT_DAY\n\t\t\t|| subType === additionalDateTypes.MORE_THAN_DAYS_AGO\n\t\t\t|| subType === additionalDateTypes.AFTER_DAYS\n\t\t)\n\t\t{\n\t\t\tconst fieldDecl = createNumberInputDecl({\n\t\t\t\ttype: TYPE,\n\t\t\t\tname: `${fieldName}_days`,\n\t\t\t\ttabindex: TABINDEX,\n\t\t\t\tvalue: VALUES._days || '',\n\t\t\t\tplaceholder: PLACEHOLDER,\n\t\t\t});\n\n\t\t\tfieldGroup.content.push(fieldDecl);\n\t\t}\n\n\t\tif (subType === dateTypes.RANGE)\n\t\t{\n\t\t\tconst rangeGroup = {\n\t\t\t\tblock: 'main-ui-filter-range-group',\n\t\t\t\tcontent: [\n\t\t\t\t\tcreateDateInputDecl({\n\t\t\t\t\t\ttype: TYPE,\n\t\t\t\t\t\tname: `${fieldName}_from`,\n\t\t\t\t\t\tplaceholder: PLACEHOLDER,\n\t\t\t\t\t\ttabindex: TABINDEX,\n\t\t\t\t\t\tvalue: VALUES._from || '',\n\t\t\t\t\t\tenableTime: ENABLE_TIME,\n\t\t\t\t\t}),\n\t\t\t\t\tcreateLineDecl(),\n\t\t\t\t\tcreateDateInputDecl({\n\t\t\t\t\t\ttype: TYPE,\n\t\t\t\t\t\tname: `${fieldName}_to`,\n\t\t\t\t\t\tplaceholder: PLACEHOLDER,\n\t\t\t\t\t\ttabindex: TABINDEX,\n\t\t\t\t\t\tvalue: VALUES._to || '',\n\t\t\t\t\t\tenableTime: ENABLE_TIME,\n\t\t\t\t\t}),\n\t\t\t\t],\n\t\t\t};\n\n\t\t\tfieldGroup.content.push(rangeGroup);\n\t\t}\n\n\t\tif (subType === dateTypes.MONTH)\n\t\t{\n\t\t\tconst {MONTHS, MONTH, YEARS, YEAR} = options;\n\n\t\t\tconst monthValue = (\n\t\t\t\tMONTHS.find((item) => {\n\t\t\t\t\treturn item.VALUE === VALUES._month;\n\t\t\t\t})\n\t\t\t\t|| MONTH\n\t\t\t\t|| MONTHS[0]\n\t\t\t);\n\n\t\t\tconst yearValue = (\n\t\t\t\tYEARS.find((item) => {\n\t\t\t\t\treturn item.VALUE === VALUES._year;\n\t\t\t\t})\n\t\t\t\t|| YEAR\n\t\t\t\t|| YEARS[0]\n\t\t\t);\n\n\t\t\tfieldGroup.content.push(\n\t\t\t\tcreateSelectDecl({\n\t\t\t\t\tname: `${fieldName}_month`,\n\t\t\t\t\tvalue: monthValue,\n\t\t\t\t\titems: MONTHS,\n\t\t\t\t\ttabindex: TABINDEX,\n\t\t\t\t}),\n\t\t\t\tcreateSelectDecl({\n\t\t\t\t\tname: `${fieldName}_year`,\n\t\t\t\t\tvalue: yearValue,\n\t\t\t\t\titems: YEARS,\n\t\t\t\t\ttabindex: TABINDEX,\n\t\t\t\t}),\n\t\t\t);\n\t\t}\n\n\t\tif (subType === dateTypes.QUARTER)\n\t\t{\n\t\t\tconst {YEARS, YEAR, QUARTERS, QUARTER, PARAMS} = options;\n\n\t\t\tconst yearValue = (\n\t\t\t\tYEARS.find((item) => {\n\t\t\t\t\treturn item.VALUE === VALUES._year;\n\t\t\t\t})\n\t\t\t\t|| YEAR\n\t\t\t\t|| YEARS[0]\n\t\t\t);\n\n\t\t\tconst quarterValue = (\n\t\t\t\tQUARTERS.find((item) => {\n\t\t\t\t\treturn item.VALUE === VALUES._quarter;\n\t\t\t\t})\n\t\t\t\t|| QUARTER\n\t\t\t\t|| QUARTERS[0]\n\t\t\t);\n\n\t\t\tfieldGroup.content.push(\n\t\t\t\tcreateSelectDecl({\n\t\t\t\t\tname: `${fieldName}_year`,\n\t\t\t\t\tvalue: yearValue,\n\t\t\t\t\titems: YEARS,\n\t\t\t\t\ttabindex: TABINDEX,\n\t\t\t\t}),\n\t\t\t\tcreateSelectDecl({\n\t\t\t\t\tname: `${fieldName}_quarter`,\n\t\t\t\t\tvalue: quarterValue,\n\t\t\t\t\titems: QUARTERS,\n\t\t\t\t\ttabindex: TABINDEX,\n\t\t\t\t\tparams: PARAMS,\n\t\t\t\t}),\n\t\t\t);\n\t\t}\n\n\t\tif (subType === dateTypes.YEAR)\n\t\t{\n\t\t\tconst {YEARS, YEAR} = options;\n\n\t\t\tconst yearValue = (\n\t\t\t\tYEARS.find((item) => {\n\t\t\t\t\treturn item.VALUE === VALUES._year;\n\t\t\t\t})\n\t\t\t\t|| YEAR\n\t\t\t\t|| YEARS[0]\n\t\t\t);\n\n\t\t\tfieldGroup.content.push(\n\t\t\t\tcreateSelectDecl({\n\t\t\t\t\tname: `${fieldName}_year`,\n\t\t\t\t\tvalue: yearValue,\n\t\t\t\t\titems: YEARS,\n\t\t\t\t\ttabindex: TABINDEX,\n\t\t\t\t}),\n\t\t\t);\n\t\t}\n\n\t\tif (subType === 'CUSTOM_DATE')\n\t\t{\n\t\t\tconst customDateSubType = SUB_TYPES.find((item) => {\n\t\t\t\treturn item.VALUE === 'CUSTOM_DATE';\n\t\t\t});\n\n\t\t\tif (customDateSubType)\n\t\t\t{\n\t\t\t\tconst customDateDecl = Runtime.clone(customDateSubType.DECL);\n\n\t\t\t\tif (Type.isArray(VALUES._days))\n\t\t\t\t{\n\t\t\t\t\tcustomDateDecl.VALUE.days = VALUES._days;\n\t\t\t\t}\n\n\t\t\t\tif (Type.isArray(VALUES._month))\n\t\t\t\t{\n\t\t\t\t\tcustomDateDecl.VALUE.months = VALUES._month;\n\t\t\t\t}\n\n\t\t\t\tif (Type.isArray(VALUES._year))\n\t\t\t\t{\n\t\t\t\t\tcustomDateDecl.VALUE.years = VALUES._year;\n\t\t\t\t}\n\n\t\t\t\tcustomDateDecl.mix = customDateDecl.filter((item) => {\n\t\t\t\t\treturn item !== 'main-ui-filter-wield-with-label';\n\t\t\t\t});\n\n\t\t\t\tconst renderedField = this.createCustomDate(customDateDecl);\n\n\t\t\t\tconst buttons = [\n\t\t\t\t\t...renderedField\n\t\t\t\t\t\t.querySelectorAll('.main-ui-item-icon-container, .main-ui-filter-icon-grab'),\n\t\t\t\t];\n\n\t\t\t\tbuttons.forEach((button) => Dom.remove(button));\n\n\t\t\t\tfieldGroup.content.push(renderedField);\n\t\t\t\tfieldGroup.push('main-ui-filter-custom-date-group');\n\t\t\t}\n\t\t}\n\n\t\tif (\n\t\t\tsubType !== dateTypes.NONE\n\t\t\t&& subType !== additionalDateTypes.CUSTOM_DATE\n\t\t\t&& options.YEARS_SWITCHER\n\t\t)\n\t\t{\n\t\t\tconst YEARS_SWITCHER = Runtime.clone(options.YEARS_SWITCHER);\n\t\t\tconst {ITEMS} = YEARS_SWITCHER;\n\n\t\t\tYEARS_SWITCHER.VALUE = ITEMS.reduce((acc, item) => {\n\t\t\t\treturn item.VALUE === VALUES._allow_year ? item : acc;\n\t\t\t});\n\n\t\t\tconst renderedField = this.createSelect(YEARS_SWITCHER);\n\n\t\t\tDom.addClass(renderedField, ['main-ui-filter-year-switcher', 'main-ui-filter-with-padding']);\n\t\t\tDom.removeClass(renderedField, 'main-ui-filter-wield-with-label');\n\n\t\t\tconst buttons = [\n\t\t\t\t...renderedField\n\t\t\t\t\t.querySelectorAll('.main-ui-item-icon-container, .main-ui-filter-icon-grab'),\n\t\t\t];\n\n\t\t\tbuttons.forEach((button) => Dom.remove(button));\n\n\t\t\tconst lastIndex = fieldGroup.content.length - 1;\n\t\t\tconst lastContentItem = fieldGroup.content[lastIndex];\n\n\t\t\tif (Type.isPlainObject(lastContentItem))\n\t\t\t{\n\t\t\t\tif (!Type.isArray(lastContentItem.mix))\n\t\t\t\t{\n\t\t\t\t\tlastContentItem.mix = [];\n\t\t\t\t}\n\n\t\t\t\tlastContentItem.mix.push('main-ui-filter-remove-margin-right');\n\t\t\t}\n\n\t\t\tif (Type.isDomNode(lastContentItem))\n\t\t\t{\n\t\t\t\tDom.addClass(lastContentItem, 'main-ui-filter-remove-margin-right');\n\t\t\t}\n\n\t\t\trequestAnimationFrame(() => {\n\t\t\t\tDom.addClass(renderedField.previousElementSibling, 'main-ui-filter-remove-margin-right');\n\t\t\t});\n\n\t\t\tfieldGroup.content.push(renderedField);\n\t\t\tfieldGroup.mix.push('main-ui-filter-date-with-years-switcher');\n\t\t}\n\n\t\tconst renderedFieldGroup = BX.decl(fieldGroup);\n\t\tconst onDateChange = Runtime.debounce(this.onDateChange, 500, this);\n\n\t\tconst inputs = [\n\t\t\t...renderedFieldGroup\n\t\t\t\t.querySelectorAll('.main-ui-date-input'),\n\t\t];\n\n\t\tinputs\n\t\t\t.forEach((input) => {\n\t\t\t\tinput.addEventListener('change', onDateChange);\n\t\t\t\tinput.addEventListener('input', onDateChange);\n\n\t\t\t\tconst {parentNode} = input;\n\t\t\t\tconst clearButton = parentNode.querySelector('.main-ui-control-value-delete');\n\n\t\t\t\tif (clearButton)\n\t\t\t\t{\n\t\t\t\t\tclearButton.addEventListener('click', () => {\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tthis.onDateChange({target: input});\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\n\t\tif (VALUE_REQUIRED)\n\t\t{\n\t\t\trenderedFieldGroup.dataset.valueRequired = true;\n\n\t\t\tconst allInputs = [\n\t\t\t\t...inputs,\n\t\t\t\t...renderedFieldGroup\n\t\t\t\t\t.querySelectorAll('.main-ui-number-input'),\n\t\t\t];\n\n\t\t\tallInputs\n\t\t\t\t.forEach((input) => {\n\t\t\t\t\tinput.addEventListener('change', this.checkRequiredDateValue.bind(this));\n\t\t\t\t\tinput.addEventListener('input', this.checkRequiredDateValue.bind(this));\n\n\t\t\t\t\tconst {parentNode} = input;\n\t\t\t\t\tconst clearButton = parentNode.querySelector('.main-ui-control-value-delete');\n\n\t\t\t\t\tif (clearButton)\n\t\t\t\t\t{\n\t\t\t\t\t\tclearButton.addEventListener('click', () => {\n\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\tthis.checkRequiredDateValue({target: input});\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tEvent.bindOnce(input, 'mouseout', () => {\n\t\t\t\t\t\tthis.checkRequiredDateValue({target: input});\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t}\n\n\t\tif (REQUIRED)\n\t\t{\n\t\t\tconst removeButton = renderedFieldGroup\n\t\t\t\t.querySelector('.main-ui-filter-field-delete');\n\n\t\t\tif (removeButton)\n\t\t\t{\n\t\t\t\tBX.remove(removeButton);\n\t\t\t}\n\t\t}\n\n\t\tconst currentValues = {};\n\t\tthis.parent.prepareControlDateValue(currentValues, fieldName, renderedFieldGroup);\n\n\t\tObject.entries(currentValues).forEach(([key, value]) => {\n\t\t\tcurrentValues[key.replace(fieldName, '')] = value;\n\t\t\tdelete currentValues[key];\n\t\t});\n\n\t\tthis.parent.getEmitter().emit(\n\t\t\t'init',\n\t\t\t{\n\t\t\t\tfield: new Field({\n\t\t\t\t\tparent: this.parent,\n\t\t\t\t\toptions: {...options, VALUES: currentValues},\n\t\t\t\t\tnode: renderedFieldGroup,\n\t\t\t\t}),\n\t\t\t},\n\t\t);\n\n\t\treturn renderedFieldGroup;\n\t}\n\n\tcheckRequiredDateValue(event)\n\t{\n\t\tif (event.target.value === '')\n\t\t{\n\t\t\tthis.showError({\n\t\t\t\tid: 'valueError',\n\t\t\t\ttarget: event.target,\n\t\t\t\ttext: this.parent.params.MAIN_UI_FILTER__VALUE_REQUIRED,\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\tthis.hideError({\n\t\t\tid: 'valueError',\n\t\t\ttarget: event.target,\n\t\t});\n\t}\n\n\tonDateChange(event)\n\t{\n\t\tif (values.get(event.target) === event.target.value)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tvalues.set(event.target, event.target.value);\n\n\t\tif (event.target.value === '')\n\t\t{\n\t\t\tthis.hideError({\n\t\t\t\tid: 'formatError',\n\t\t\t\ttarget: event.target,\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\tBX.ajax\n\t\t\t.runComponentAction(\n\t\t\t\t'bitrix:main.ui.filter',\n\t\t\t\t'checkDateFormat',\n\t\t\t\t{\n\t\t\t\t\tmode: 'ajax',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tvalue: event.target.value,\n\t\t\t\t\t\tformat: BX.message('FORMAT_DATETIME'),\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t)\n\t\t\t.then((result) => {\n\t\t\t\tif (!result.data.result)\n\t\t\t\t{\n\t\t\t\t\tthis.showError({\n\t\t\t\t\t\tid: 'formatError',\n\t\t\t\t\t\ttarget: event.target,\n\t\t\t\t\t});\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.hideError({\n\t\t\t\t\tid: 'formatError',\n\t\t\t\t\ttarget: event.target,\n\t\t\t\t});\n\t\t\t});\n\t}\n\n\tshowError({id, target, text = null})\n\t{\n\t\tDom.style(target, 'border-color', '#FF5752');\n\n\t\tif (\n\t\t\terrorMessages.has(target)\n\t\t\t&& errorMessagesTypes.get(target) === id\n\t\t)\n\t\t{\n\t\t\tDom.remove(errorMessages.get(target));\n\t\t}\n\n\t\tconst {\n\t\t\tMAIN_UI_FILTER__DATE_ERROR_TITLE,\n\t\t\tMAIN_UI_FILTER__DATE_ERROR_LABEL,\n\t\t} = this.parent.params;\n\n\t\tconst errorText = text || `${MAIN_UI_FILTER__DATE_ERROR_LABEL} ${Loc.getMessage('FORMAT_DATE')}`;\n\n\t\tconst dateErrorMessage = Tag.render`\n\t\t\t<div \n\t\t\t\tclass=\"main-ui-filter-error-message\" \n\t\t\t\ttitle=\"${MAIN_UI_FILTER__DATE_ERROR_TITLE}\">\n\t\t\t\t${errorText}\n\t\t\t</div>\n\t\t`;\n\n\t\terrorMessages.set(target, dateErrorMessage);\n\t\terrorMessagesTypes.set(target, id);\n\n\t\tDom.insertAfter(dateErrorMessage, target);\n\t\tDom.attr(target, 'is-valid', 'false');\n\t}\n\n\thideError({id, target})\n\t{\n\t\tDom.style(target, 'border-color', null);\n\n\t\tif (\n\t\t\terrorMessages.has(target)\n\t\t\t&& errorMessagesTypes.get(target) === id\n\t\t)\n\t\t{\n\t\t\tDom.remove(errorMessages.get(target));\n\t\t}\n\n\t\tDom.attr(target, 'is-valid', 'true');\n\t}\n}","/* eslint-disable no-underscore-dangle */\n/* eslint-disable class-methods-use-this */\nimport {Type, Dom, Text, Runtime, Event} from 'main.core';\n\nexport class Presets\n{\n\tconstructor(parent)\n\t{\n\t\tthis.parent = null;\n\t\tthis.presets = null;\n\t\tthis.container = null;\n\t\tthis.init(parent);\n\t}\n\n\tinit(parent)\n\t{\n\t\tthis.parent = parent;\n\t}\n\n\tbindOnPresetClick()\n\t{\n\t\t(this.getPresets() || []).forEach((current) => {\n\t\t\tEvent.bind(current, 'click', BX.delegate(this._onPresetClick, this));\n\t\t});\n\t}\n\n\t/**\n\t * Gets add preset field\n\t * @return {?HTMLElement}\n\t */\n\tgetAddPresetField()\n\t{\n\t\treturn this.getContainer().querySelector('.main-ui-filter-new-filter');\n\t}\n\n\n\t/**\n\t * Gets add preset name input\n\t * @return {?HTMLInputElement}\n\t */\n\tgetAddPresetFieldInput()\n\t{\n\t\treturn this.getAddPresetField().querySelector('.main-ui-filter-sidebar-edit-control');\n\t}\n\n\n\t/**\n\t * Clears add preset input value\n\t */\n\tclearAddPresetFieldInput()\n\t{\n\t\tconst input = this.getAddPresetFieldInput();\n\n\t\tif (Type.isDomNode(input))\n\t\t{\n\t\t\tinput.value = '';\n\t\t}\n\t}\n\n\n\t/**\n\t * Finds preset node by child node\n\t * @param {?HTMLElement} node\n\t * @return {?HTMLElement}\n\t */\n\tnormalizePreset(node)\n\t{\n\t\treturn node.closest('.main-ui-filter-sidebar-item');\n\t}\n\n\n\t/**\n\t * Deactivates all presets\n\t */\n\tdeactivateAllPresets()\n\t{\n\t\tthis.getPresets().forEach((current) => {\n\t\t\tDom.removeClass(current, 'main-ui-filter-current-item');\n\t\t});\n\t}\n\n\t/**\n\t * Creates sidebar preset item\n\t * @param {string} id - Preset id\n\t * @param {string} title - Preset title\n\t * @param {boolean} [isPinned] - Pass true is preset pinned\n\t */\n\tcreateSidebarItem(id, title, isPinned)\n\t{\n\t\treturn BX.decl({\n\t\t\tblock: 'sidebar-item',\n\t\t\ttext: Text.decode(title),\n\t\t\tid,\n\t\t\tpinned: isPinned,\n\t\t\tnoEditPinTitle: this.parent.getParam('MAIN_UI_FILTER__IS_SET_AS_DEFAULT_PRESET'),\n\t\t\teditNameTitle: this.parent.getParam('MAIN_UI_FILTER__EDIT_PRESET_TITLE'),\n\t\t\tremoveTitle: this.parent.getParam('MAIN_UI_FILTER__REMOVE_PRESET'),\n\t\t\teditPinTitle: this.parent.getParam('MAIN_UI_FILTER__SET_AS_DEFAULT_PRESET'),\n\t\t\tdragTitle: this.parent.getParam('MAIN_UI_FILTER__DRAG_TITLE'),\n\t\t});\n\t}\n\n\n\t/**\n\t * Highlights preset node as active\n\t * @param {?HTMLElement|string} preset - preset node or preset id\n\t */\n\tactivatePreset(preset)\n\t{\n\t\tthis.deactivateAllPresets();\n\n\t\tconst presetNode = (() => {\n\t\t\tif (Type.isString(preset))\n\t\t\t{\n\t\t\t\treturn this.getPresetNodeById(preset);\n\t\t\t}\n\n\t\t\treturn preset;\n\t\t})();\n\n\t\tif (Type.isDomNode(presetNode))\n\t\t{\n\t\t\tDom.addClass(presetNode, 'main-ui-filter-current-item');\n\t\t}\n\t}\n\n\n\t/**\n\t * Gets preset node by preset id\n\t * @param {string} id\n\t * @return {?HTMLElement}\n\t */\n\tgetPresetNodeById(id)\n\t{\n\t\treturn this.getPresets().find((current) => {\n\t\t\treturn Dom.attr(current, 'data-id') === id;\n\t\t});\n\t}\n\n\n\t/**\n\t * Gets preset id by preset node\n\t * @param {?HTMLElement} preset\n\t */\n\tgetPresetId(preset)\n\t{\n\t\treturn Dom.attr(preset, 'data-id');\n\t}\n\n\n\t/**\n\t * Updates preset name\n\t * @param {?HTMLElement} presetNode\n\t * @param {string} name\n\t */\n\tupdatePresetName(presetNode, name)\n\t{\n\t\tif (Type.isDomNode(presetNode) && Type.isString(name) && name !== '')\n\t\t{\n\t\t\tconst nameNode = this.getPresetNameNode(presetNode);\n\n\t\t\tif (Type.isDomNode(nameNode))\n\t\t\t{\n\t\t\t\tRuntime.html(nameNode, name);\n\t\t\t}\n\t\t}\n\t}\n\n\n\t/**\n\t * Removes preset\n\t * @param {HTMLElement} presetNode\n\t * @param {string} presetId\n\t * @param {boolean} isDefault\n\t */\n\tremovePreset(presetNode, presetId, isDefault)\n\t{\n\t\tconst currentPresetId = this.getCurrentPresetId();\n\t\tlet newPresets = [];\n\t\tconst postData = {\n\t\t\tpreset_id: presetId,\n\t\t\tis_default: isDefault,\n\t\t};\n\n\t\tconst getData = {\n\t\t\tFILTER_ID: this.parent.getParam('FILTER_ID'),\n\t\t\taction: 'REMOVE_FILTER',\n\t\t};\n\n\t\tthis.parent.saveOptions(postData, getData);\n\t\tBX.remove(presetNode);\n\n\t\tif (BX.type.isArray(this.parent.params.PRESETS))\n\t\t{\n\t\t\tnewPresets = this.parent.params.PRESETS.filter((current) => {\n\t\t\t\treturn current.ID !== presetId;\n\t\t\t}, this);\n\n\t\t\tthis.parent.params.PRESETS = newPresets;\n\t\t}\n\n\t\tif (BX.type.isArray(this.parent.editablePresets))\n\t\t{\n\t\t\tnewPresets = this.parent.editablePresets.filter((current) => {\n\t\t\t\treturn current.ID !== presetId;\n\t\t\t}, this);\n\n\t\t\tthis.parent.editablePresets = newPresets;\n\t\t}\n\n\t\tif (presetId === currentPresetId)\n\t\t{\n\t\t\tthis.parent.getSearch().removePreset();\n\t\t\tthis.resetPreset();\n\t\t}\n\t}\n\n\n\t/**\n\t * Pin preset (Sets as default preset)\n\t * @param {string} presetId\n\t */\n\tpinPreset(presetId)\n\t{\n\t\tif (!BX.type.isNotEmptyString(presetId))\n\t\t{\n\t\t\tpresetId = 'default_filter';\n\t\t}\n\n\t\tconst presetNode = this.getPresetNodeById(presetId);\n\n\t\tif (this.parent.getParam('VALUE_REQUIRED_MODE'))\n\t\t{\n\t\t\tif (presetId === 'default_filter')\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tconst params = {FILTER_ID: this.parent.getParam('FILTER_ID'), GRID_ID: this.parent.getParam('GRID_ID'), action: 'PIN_PRESET'};\n\t\tconst data = {preset_id: presetId};\n\n\t\tthis.getPresets().forEach(function(current) {\n\t\t\tDom.removeClass(current, this.parent.settings.classPinnedPreset);\n\t\t}, this);\n\n\t\tBX.addClass(presetNode, this.parent.settings.classPinnedPreset);\n\n\t\tthis.parent.saveOptions(data, params);\n\t}\n\n\t_onPresetClick(event) {\n\t\tlet presetNode; let presetId; let presetData; let isDefault; let target; let settings; let\n\t\t\tparent;\n\n\t\tevent.preventDefault();\n\n\t\tparent = this.parent;\n\t\tsettings = parent.settings;\n\t\ttarget = event.target;\n\t\tpresetNode = event.currentTarget;\n\t\tpresetId = this.getPresetId(presetNode);\n\t\tpresetData = this.getPreset(presetId);\n\n\t\tif (Dom.hasClass(target, settings.classPinButton))\n\t\t{\n\t\t\tif (this.parent.isEditEnabled())\n\t\t\t{\n\t\t\t\tif (Dom.hasClass(presetNode, settings.classPinnedPreset))\n\t\t\t\t{\n\t\t\t\t\tthis.pinPreset('default_filter');\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.pinPreset(presetId);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (Dom.hasClass(target, settings.classPresetEditButton))\n\t\t{\n\t\t\tthis.enableEditPresetName(presetNode);\n\t\t}\n\n\t\tif (Dom.hasClass(target, settings.classPresetDeleteButton))\n\t\t{\n\t\t\tisDefault = 'IS_DEFAULT' in presetData ? presetData.IS_DEFAULT : false;\n\t\t\tthis.removePreset(presetNode, presetId, isDefault);\n\t\t\treturn false;\n\t\t}\n\n\t\tif (!Dom.hasClass(target, settings.classPresetDragButton)\n\t\t\t&& !Dom.hasClass(target, settings.classAddPresetFieldInput))\n\t\t{\n\t\t\tif (this.parent.isEditEnabled())\n\t\t\t{\n\t\t\t\tthis.updateEditablePreset(this.getCurrentPresetId());\n\t\t\t}\n\n\t\t\tconst currentPreset = this.getPreset(this.getCurrentPresetId());\n\t\t\tconst preset = this.getPreset(presetId);\n\t\t\tcurrentPreset.ADDITIONAL = [];\n\t\t\tpreset.ADDITIONAL = [];\n\n\t\t\tthis.activatePreset(presetNode);\n\t\t\tthis.applyPreset(presetId);\n\n\t\t\tif (!this.parent.isEditEnabled())\n\t\t\t{\n\t\t\t\tparent.applyFilter(null, true);\n\n\t\t\t\tif (event.isTrusted)\n\t\t\t\t{\n\t\t\t\t\tparent.closePopup();\n\t\t\t\t}\n\n\t\t\t\tif (parent.isAddPresetEnabled())\n\t\t\t\t{\n\t\t\t\t\tparent.disableAddPreset();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\n\t/**\n\t * Applies default preset\n\t * @return {BX.Promise}\n\t */\n\tapplyPinnedPreset()\n\t{\n\t\tconst Filter = this.parent;\n\t\tconst isPinned = this.isPinned(this.getCurrentPresetId());\n\t\tlet promise;\n\n\t\tif (this.parent.getParam('VALUE_REQUIRED')\n\t\t\t&& this.getPinnedPresetId() === 'default_filter')\n\t\t{\n\t\t\tthis.applyPreset('default_filter');\n\t\t\tthis.deactivateAllPresets();\n\t\t\tpromise = this.parent.applyFilter();\n\t\t}\n\t\telse\n\t\tif (!isPinned)\n\t\t{\n\t\t\tconst pinnedPresetId = this.getPinnedPresetId();\n\t\t\tconst pinnedPresetNode = this.getPinnedPresetNode();\n\t\t\tconst clear = false;\n\t\t\tconst applyPreset = true;\n\n\t\t\tthis.deactivateAllPresets();\n\t\t\tthis.activatePreset(pinnedPresetNode);\n\t\t\tthis.applyPreset(pinnedPresetId);\n\t\t\tpromise = Filter.applyFilter(clear, applyPreset);\n\t\t\tFilter.closePopup();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tpromise = Filter.resetFilter();\n\t\t}\n\n\n\t\treturn promise;\n\t}\n\n\n\t/**\n\t * Updates editable presets\n\t * @param {string} presetId\n\t */\n\tupdateEditablePreset(presetId)\n\t{\n\t\tconst fields = this.parent.getFilterFieldsValues();\n\t\tconst presetRows = this.getFields().map((curr) => { return BX.data(curr, 'name'); });\n\t\tconst presetFields = this.parent.preparePresetFields(fields, presetRows);\n\t\tconst preset = this.getPreset(presetId);\n\n\t\tpreset.FIELDS = presetFields;\n\t\tpreset.TITLE = this.getPresetInput(this.getPresetNodeById(presetId)).value;\n\t\tpreset.ROWS = presetRows;\n\t}\n\n\n\t/**\n\t * Gets preset input node\n\t * @param presetNode\n\t * @return {?HTMLInputElement}\n\t */\n\tgetPresetInput(presetNode)\n\t{\n\t\treturn BX.Filter.Utils.getByClass(presetNode, this.parent.settings.classPresetEditInput);\n\t}\n\n\n\t/**\n\t * Enable edit preset name\n\t * @param {HTMLElement} presetNode\n\t */\n\tenableEditPresetName(presetNode)\n\t{\n\t\tconst input = this.getPresetInput(presetNode);\n\n\t\tBX.addClass(presetNode, this.parent.settings.classPresetNameEdit);\n\t\tinput.focus();\n\t\t// noinspection SillyAssignmentJS\n\t\tinput.value = BX.util.htmlspecialcharsback(input.value);\n\t\tEvent.bind(input, 'input', BX.delegate(this._onPresetNameInput, this));\n\t}\n\n\t_onPresetNameInput(event)\n\t{\n\t\tconst Search = this.parent.getSearch();\n\t\tconst inputValue = event.currentTarget.value;\n\t\tconst presetNode = BX.findParent(event.currentTarget, {className: this.parent.settings.classPreset}, true, false);\n\t\tconst presetId = this.getPresetId(presetNode);\n\t\tconst currentPresetId = this.getCurrentPresetId();\n\t\tconst data = {ID: presetId, TITLE: inputValue};\n\n\t\tif (presetId === currentPresetId)\n\t\t{\n\t\t\tSearch.updatePreset(data);\n\t\t}\n\t}\n\n\n\t/**\n\t * Gets preset name node element\n\t * @param {HTMLElement} presetNode\n\t * @return {?HTMLElement}\n\t */\n\tgetPresetNameNode(presetNode)\n\t{\n\t\treturn BX.Filter.Utils.getByClass(presetNode, this.parent.settings.classPresetName);\n\t}\n\n\n\t/**\n\t * Disable edit name for preset\n\t * @param {HTMLElement} presetNode\n\t */\n\tdisableEditPresetName(presetNode)\n\t{\n\t\tconst input = this.getPresetInput(presetNode);\n\n\t\tDom.removeClass(presetNode, this.parent.settings.classPresetNameEdit);\n\n\t\tif (BX.type.isDomNode(input))\n\t\t{\n\t\t\tinput.blur();\n\t\t\tBX.unbind(input, 'input', BX.delegate(this._onPresetNameInput, this));\n\t\t}\n\t}\n\n\n\t/**\n\t * Gets preset object\n\t * @param {string} presetId\n\t * @param {boolean} [isDefault = false] - gets from default presets collection\n\t * @return {?object}\n\t */\n\tgetPreset(presetId, isDefault)\n\t{\n\t\tlet presets = this.parent.getParam(isDefault ? 'DEFAULT_PRESETS' : 'PRESETS', []);\n\n\t\tif (this.parent.isEditEnabled() && !isDefault)\n\t\t{\n\t\t\tpresets = this.parent.editablePresets;\n\t\t}\n\n\t\tconst filtered = presets.filter((current) => {\n\t\t\treturn current.ID === presetId;\n\t\t});\n\n\t\tif (presetId === 'tmp_filter' && !filtered.length)\n\t\t{\n\t\t\tconst tmpPreset = BX.clone(this.getPreset('default_filter'));\n\t\t\ttmpPreset.ID = 'tmp_filter';\n\t\t\tpresets.push(tmpPreset);\n\t\t\tfiltered.push(tmpPreset);\n\t\t}\n\n\t\treturn filtered.length !== 0 ? filtered[0] : null;\n\t}\n\n\n\t/**\n\t * Gets preset field by preset name (id)\n\t * @param {string} presetId\n\t * @param {string} fieldName\n\t * @return {?object}\n\t */\n\tgetPresetField(presetId, fieldName)\n\t{\n\t\tconst preset = this.getPreset(presetId);\n\t\tlet field = null;\n\n\t\tif (BX.type.isPlainObject(preset) && 'FIELDS' in preset && BX.type.isArray(preset.FIELDS))\n\t\t{\n\t\t\tfield = preset.FIELDS.filter((current) => {\n\t\t\t\treturn current.NAME === fieldName;\n\t\t\t});\n\n\t\t\tfield = field.length ? field[0] : null;\n\t\t}\n\n\t\treturn field;\n\t}\n\n\n\t/**\n\t * Applies preset by id\n\t * @param {string} presetId\n\t * @param {boolean} [noValues = false]\n\t */\n\tapplyPreset(presetId, noValues)\n\t{\n\t\tpresetId = noValues ? 'default_filter' : presetId || 'default_filter';\n\n\t\tlet preset = this.getPreset(presetId);\n\n\t\tif (presetId !== 'default_preset')\n\t\t{\n\t\t\tpreset = this.extendPreset(preset);\n\t\t}\n\n\t\tthis.parent.getSearch().updatePreset(preset);\n\t\tthis.updatePresetFields(preset, noValues);\n\t}\n\n\n\t/**\n\t * Extends preset\n\t * @param {object} preset\n\t * @return {object}\n\t */\n\textendPreset(preset)\n\t{\n\t\tconst defaultPreset = BX.clone(this.getPreset('default_filter'));\n\n\t\tif (BX.type.isPlainObject(preset))\n\t\t{\n\t\t\tpreset = BX.clone(preset);\n\t\t\tpreset.FIELDS.forEach(function(curr) {\n\t\t\t\tlet index;\n\t\t\t\tconst someField = defaultPreset.FIELDS.some((defCurr, defIndex) => {\n\t\t\t\t\tlet result = false;\n\n\t\t\t\t\tif (defCurr.NAME === curr.NAME)\n\t\t\t\t\t{\n\t\t\t\t\t\tindex = defIndex;\n\t\t\t\t\t\tresult = true;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn result;\n\t\t\t\t}, this);\n\n\t\t\t\tif (someField && index || someField && index === 0)\n\t\t\t\t{\n\t\t\t\t\tdefaultPreset.FIELDS[index] = curr;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\tif (!this.isEmptyField(curr))\n\t\t\t\t{\n\t\t\t\t\tdefaultPreset.FIELDS.push(curr);\n\t\t\t\t}\n\t\t\t}, this);\n\n\t\t\tpreset.FIELDS = defaultPreset.FIELDS;\n\t\t}\n\n\t\treturn preset;\n\t}\n\n\n\t/**\n\t * Checks field is empty\n\t * @param {object} field\n\t * @return {boolean}\n\t */\n\tisEmptyField(field)\n\t{\n\t\tlet result = true;\n\n\t\tif (field.TYPE === this.parent.types.STRING)\n\t\t{\n\t\t\tif (field.VALUE && field.VALUE.length)\n\t\t\t{\n\t\t\t\tresult = false;\n\t\t\t}\n\t\t}\n\n\t\tif (field.TYPE === this.parent.types.SELECT)\n\t\t{\n\t\t\tif (BX.type.isPlainObject(field.VALUE) && 'VALUE' in field.VALUE && field.VALUE.VALUE)\n\t\t\t{\n\t\t\t\tresult = false;\n\t\t\t}\n\t\t}\n\n\t\tif (field.TYPE === this.parent.types.MULTI_SELECT)\n\t\t{\n\t\t\tif (BX.type.isArray(field.VALUE) && field.VALUE.length)\n\t\t\t{\n\t\t\t\tresult = false;\n\t\t\t}\n\t\t}\n\n\t\tif (field.TYPE === this.parent.types.CUSTOM_DATE)\n\t\t{\n\t\t\tif (\n\t\t\t\t(BX.type.isArray(field.VALUE.days) && field.VALUE.days.length)\n\t\t\t\t|| (BX.type.isArray(field.VALUE.months) && field.VALUE.months.length)\n\t\t\t\t|| (BX.type.isArray(field.VALUE.years) && field.VALUE.years.length)\n\t\t\t)\n\t\t\t{\n\t\t\t\tresult = false;\n\t\t\t}\n\t\t}\n\n\t\tif (\n\t\t\tfield.TYPE === this.parent.types.CUSTOM_ENTITY\n\t\t\t|| field.TYPE === this.parent.types.DEST_SELECTOR\n\t\t)\n\t\t{\n\t\t\tif (BX.type.isPlainObject(field.VALUES))\n\t\t\t{\n\t\t\t\tif (BX.type.isNotEmptyString(field.VALUES._label) && BX.type.isNotEmptyString(field.VALUES._value))\n\t\t\t\t{\n\t\t\t\t\tresult = false;\n\t\t\t\t}\n\n\t\t\t\tif (BX.type.isPlainObject(field.VALUES._label)\n\t\t\t\t\t&& BX.type.isPlainObject(field.VALUES._value)\n\t\t\t\t\t&& Object.keys(field.VALUES._label).length\n\t\t\t\t\t&& Object.keys(field.VALUES._value).length)\n\t\t\t\t{\n\t\t\t\t\tresult = false;\n\t\t\t\t}\n\n\t\t\t\tif (BX.type.isArray(field.VALUES._label)\n\t\t\t\t\t&& BX.type.isArray(field.VALUES._value)\n\t\t\t\t\t&& field.VALUES._label.length\n\t\t\t\t\t&& field.VALUES._value.length)\n\t\t\t\t{\n\t\t\t\t\tresult = false;\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\t(\n\t\t\t\t\t\t(BX.type.isArray(field.VALUES._label) && field.VALUES._label.length)\n\t\t\t\t\t\t|| (BX.type.isPlainObject(field.VALUES._label) && Object.keys(field.VALUES._label).length)\n\t\t\t\t\t)\n\t\t\t\t\t&& (\n\t\t\t\t\t\t(BX.type.isArray(field.VALUES._value) && field.VALUES._value.length)\n\t\t\t\t\t\t|| (BX.type.isPlainObject(field.VALUES._value) && Object.keys(field.VALUES._value).length)\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tresult = false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (field.TYPE === this.parent.types.DATE)\n\t\t{\n\t\t\tconst datesel = '_datesel' in field.VALUES ? field.VALUES._datesel : field.SUB_TYPE.VALUE;\n\n\t\t\tif (BX.type.isPlainObject(field.VALUES)\n\t\t\t\t&& (field.VALUES._from || field.VALUES._to || field.VALUES._quarter\n\t\t\t\t|| (field.VALUES._month && !BX.type.isArray(field.VALUES._month))\n\t\t\t\t|| (field.VALUES._year && !BX.type.isArray(field.VALUES._year))\n\t\t\t\t|| (field.VALUES._days) && !BX.type.isArray(field.VALUES._days))\n\t\t\t\t|| (BX.type.isArray(field.VALUES._days) && field.VALUES._days.length)\n\t\t\t\t|| (BX.type.isArray(field.VALUES._month) && field.VALUES._month.length)\n\t\t\t\t|| (BX.type.isArray(field.VALUES._year) && field.VALUES._year.length)\n\t\t\t\t|| (\n\t\t\t\t\tdatesel === this.parent.dateTypes.CURRENT_DAY\n\t\t\t\t\t|| datesel === this.parent.dateTypes.CURRENT_WEEK\n\t\t\t\t\t|| datesel === this.parent.dateTypes.CURRENT_MONTH\n\t\t\t\t\t|| datesel === this.parent.dateTypes.CURRENT_QUARTER\n\t\t\t\t\t|| datesel === this.parent.dateTypes.LAST_7_DAYS\n\t\t\t\t\t|| datesel === this.parent.dateTypes.LAST_30_DAYS\n\t\t\t\t\t|| datesel === this.parent.dateTypes.LAST_60_DAYS\n\t\t\t\t\t|| datesel === this.parent.dateTypes.LAST_90_DAYS\n\t\t\t\t\t|| datesel === this.parent.dateTypes.LAST_WEEK\n\t\t\t\t\t|| datesel === this.parent.dateTypes.LAST_MONTH\n\t\t\t\t\t|| datesel === this.parent.dateTypes.TOMORROW\n\t\t\t\t\t|| datesel === this.parent.dateTypes.YESTERDAY\n\t\t\t\t\t|| datesel === this.parent.dateTypes.NEXT_WEEK\n\t\t\t\t\t|| datesel === this.parent.dateTypes.NEXT_MONTH\n\t\t\t\t)\n\t\t\t)\n\t\t\t{\n\t\t\t\tresult = false;\n\t\t\t}\n\t\t}\n\n\t\tif (field.TYPE === this.parent.types.NUMBER)\n\t\t{\n\t\t\tif (BX.type.isPlainObject(field.VALUES) && (field.VALUES._from || field.VALUES._to))\n\t\t\t{\n\t\t\t\tresult = false;\n\t\t\t}\n\t\t}\n\n\t\tif (field.TYPE === this.parent.types.CHECKBOX)\n\t\t{\n\t\t\tif (BX.type.isPlainObject(field.VALUE) && field.VALUE.VALUE)\n\t\t\t{\n\t\t\t\tresult = false;\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\n\t/**\n\t * Resets preset\n\t * @param {boolean} [noValues]\n\t */\n\tresetPreset(noValues)\n\t{\n\t\tthis.applyPreset('', noValues);\n\t}\n\n\n\t/**\n\t * Gets preset fields elements\n\t * @return {?HTMLElement[]}\n\t */\n\tgetFields()\n\t{\n\t\tconst container = this.parent.getFieldListContainer();\n\t\tlet fields = null;\n\n\t\tif (BX.type.isDomNode(container))\n\t\t{\n\t\t\tfields = BX.Filter.Utils.getBySelector(container.parentNode, `.${this.parent.settings.classFileldControlList} > div`, true);\n\t\t}\n\n\t\treturn fields;\n\t}\n\n\n\t/**\n\t * Gets field element by field object\n\t * @param {object} fieldData\n\t * @return {?HTMLElement}\n\t */\n\tgetField(fieldData)\n\t{\n\t\tconst fields = this.getFields();\n\t\tlet field = null;\n\t\tlet tmpName; let\n\t\t\tfiltered;\n\n\t\tif (BX.type.isArray(fields) && fields.length)\n\t\t{\n\t\t\tfiltered = fields.filter((current) => {\n\t\t\t\tif (BX.type.isDomNode(current))\n\t\t\t\t{\n\t\t\t\t\ttmpName = BX.data(current, 'name');\n\t\t\t\t}\n\t\t\t\treturn tmpName === fieldData.NAME;\n\t\t\t}, this);\n\n\t\t\tfield = filtered.length > 0 ? filtered[0] : null;\n\t\t}\n\n\t\treturn field;\n\t}\n\n\n\t/**\n\t * Removes field element by field object\n\t * @param {object} field\n\t * @param {boolean} disableSaveFieldsSort\n\t */\n\tremoveField(field, disableSaveFieldsSort)\n\t{\n\t\tlet index; let\n\t\t\tfieldName;\n\t\tdisableSaveFieldsSort = disableSaveFieldsSort || false;\n\n\t\tif (BX.type.isPlainObject(field))\n\t\t{\n\t\t\tfieldName = field.NAME;\n\t\t\tfield = this.getField(field);\n\n\t\t\tif (BX.type.isArray(this.parent.fieldsList))\n\t\t\t{\n\t\t\t\tindex = this.parent.fieldsList.indexOf(field);\n\n\t\t\t\tif (index !== -1)\n\t\t\t\t{\n\t\t\t\t\tdelete this.parent.fieldsList[index];\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.parent.unregisterDragItem(field);\n\t\t}\n\n\t\tif (BX.type.isDomNode(field))\n\t\t{\n\t\t\tfieldName = BX.data(field, 'name');\n\t\t\tthis.parent.getFields().deleteField(field);\n\t\t}\n\n\t\tif (!this.parent.isEditEnabled() && !this.parent.isAddPresetEnabled())\n\t\t{\n\t\t\tconst currentPresetId = this.getCurrentPresetId();\n\t\t\tconst currentPresetField = this.getPresetField(currentPresetId, fieldName);\n\n\t\t\tif (currentPresetField && !this.isEmptyField(currentPresetField))\n\t\t\t{\n\t\t\t\tthis.deactivateAllPresets();\n\t\t\t\tthis.parent.applyFilter();\n\t\t\t}\n\t\t}\n\n\t\tif (!disableSaveFieldsSort)\n\t\t{\n\t\t\tthis.parent.saveFieldsSort();\n\t\t}\n\t}\n\n\t/**\n\t * Removes field elements by field objects.\n\t * @param {object[]} fields\n\t */\n\tremoveFields(fields)\n\t{\n\t\tfields.forEach(function(field) {\n\t\t\tthis.removeField(field, true);\n\t\t}, this);\n\n\t\tthis.parent.saveFieldsSort();\n\t}\n\n\t/**\n\t * Adds field into filter field list by field object\n\t * @param {object} fieldData\n\t */\n\taddField(fieldData)\n\t{\n\t\tlet container; let control; let\n\t\t\tcontrols;\n\n\t\tif (BX.type.isPlainObject(fieldData))\n\t\t{\n\t\t\tcontainer = this.parent.getFieldListContainer();\n\t\t\tcontrols = this.parent.getControls();\n\t\t\tcontrol = BX.type.isArray(controls) ? controls[controls.length - 1] : null;\n\n\t\t\tif (BX.type.isDomNode(control))\n\t\t\t{\n\t\t\t\tif (control.nodeName !== 'INPUT')\n\t\t\t\t{\n\t\t\t\t\tcontrol = BX.Filter.Utils.getByTag(control, 'input');\n\t\t\t\t}\n\n\t\t\t\tif (BX.type.isDomNode(control))\n\t\t\t\t{\n\t\t\t\t\tfieldData.TABINDEX = parseInt(control.getAttribute('tabindex')) + 1;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tfieldData.TABINDEX = 2;\n\t\t\t}\n\n\t\t\tif (BX.type.isDomNode(container))\n\t\t\t{\n\t\t\t\tcontrol = this.createControl(fieldData);\n\n\t\t\t\tif (BX.type.isDomNode(control))\n\t\t\t\t{\n\t\t\t\t\tBX.append(control, container);\n\t\t\t\t\tif (BX.type.isArray(this.parent.fieldsList))\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.parent.fieldsList.push(control);\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.parent.registerDragItem(control);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (!this.parent.isEditEnabled() && !this.parent.isAddPresetEnabled())\n\t\t{\n\t\t\tconst currentPresetId = this.getCurrentPresetId();\n\t\t\tconst currentPresetField = this.getPresetField(currentPresetId, fieldData.NAME);\n\n\t\t\tif (currentPresetField && !this.isEmptyField(currentPresetField))\n\t\t\t{\n\t\t\t\tthis.parent.updatePreset('tmp_filter');\n\t\t\t\tthis.deactivateAllPresets();\n\t\t\t\tthis.parent.getSearch().updatePreset(this.getPreset('tmp_filter'));\n\t\t\t}\n\t\t}\n\n\t\tthis.parent.saveFieldsSort();\n\t}\n\n\n\t/**\n\t * Creates field control by field object\n\t * @param {object} fieldData\n\t * @return {?HTMLElement}\n\t */\n\tcreateControl(fieldData)\n\t{\n\t\tlet control;\n\n\t\tswitch (fieldData.TYPE)\n\t\t{\n\t\t\tcase this.parent.types.STRING: {\n\t\t\t\tcontrol = this.parent.getFields().createInputText(fieldData);\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase this.parent.types.TEXTAREA: {\n\t\t\t\tcontrol = this.parent.getFields().createTextarea(fieldData);\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase this.parent.types.SELECT: {\n\t\t\t\tcontrol = this.parent.getFields().createSelect(fieldData);\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase this.parent.types.MULTI_SELECT: {\n\t\t\t\tcontrol = this.parent.getFields().createMultiSelect(fieldData);\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase this.parent.types.NUMBER: {\n\t\t\t\tcontrol = this.parent.getFields().createNumber(fieldData);\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase this.parent.types.DATE: {\n\t\t\t\tcontrol = this.parent.getFields().createDate(fieldData);\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase this.parent.types.CUSTOM_DATE: {\n\t\t\t\tcontrol = this.parent.getFields().createCustomDate(fieldData);\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase this.parent.types.DEST_SELECTOR: {\n\t\t\t\tcontrol = this.parent.getFields().createDestSelector(fieldData);\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase this.parent.types.CUSTOM: {\n\t\t\t\tcontrol = this.parent.getFields().createCustom(fieldData);\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase this.parent.types.CUSTOM_ENTITY: {\n\t\t\t\tcontrol = this.parent.getFields().createCustomEntity(fieldData);\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tdefault: {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif (BX.type.isDomNode(control))\n\t\t{\n\t\t\tcontrol.dataset.name = fieldData.NAME;\n\t\t\tcontrol.FieldController = new BX.Filter.FieldController(control, this.parent);\n\n\t\t\tif (fieldData.REQUIRED)\n\t\t\t{\n\t\t\t\tconst removeButton = control.querySelector('.main-ui-filter-field-delete');\n\n\t\t\t\tif (removeButton)\n\t\t\t\t{\n\t\t\t\t\tBX.remove(removeButton);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn control;\n\t}\n\n\n\t/**\n\t * Removes not compared properties\n\t * @param {object} fields\n\t * @param {boolean} [noClean]\n\t */\n\tremoveNotCompareVariables(fields, noClean)\n\t{\n\t\tif (BX.type.isPlainObject(fields))\n\t\t{\n\t\t\tconst dateType = this.parent.dateTypes;\n\t\t\tconst {additionalDateTypes} = this.parent;\n\n\t\t\tif ('FIND' in fields)\n\t\t\t{\n\t\t\t\tdelete fields.FIND;\n\t\t\t}\n\n\t\t\tif (!noClean)\n\t\t\t{\n\t\t\t\tObject.keys(fields).forEach(function(key) {\n\t\t\t\t\tif (key.indexOf('_numsel') !== -1)\n\t\t\t\t\t{\n\t\t\t\t\t\tdelete fields[key];\n\t\t\t\t\t}\n\n\t\t\t\t\tif (key.indexOf('_datesel') !== -1)\n\t\t\t\t\t{\n\t\t\t\t\t\tconst datesel = fields[key];\n\n\t\t\t\t\t\tif (datesel === dateType.EXACT\n\t\t\t\t\t\t\t|| datesel === dateType.RANGE\n\t\t\t\t\t\t\t|| datesel === additionalDateTypes.PREV_DAY\n\t\t\t\t\t\t\t|| datesel === additionalDateTypes.NEXT_DAY\n\t\t\t\t\t\t\t|| datesel === additionalDateTypes.MORE_THAN_DAYS_AGO\n\t\t\t\t\t\t\t|| datesel === additionalDateTypes.AFTER_DAYS\n\t\t\t\t\t\t\t|| datesel === dateType.PREV_DAYS\n\t\t\t\t\t\t\t|| datesel === dateType.NEXT_DAYS\n\t\t\t\t\t\t\t|| datesel === dateType.YEAR\n\t\t\t\t\t\t\t|| datesel === dateType.MONTH\n\t\t\t\t\t\t\t|| datesel === dateType.QUARTER\n\t\t\t\t\t\t\t|| datesel === dateType.NONE\n\t\t\t\t\t\t\t|| datesel === dateType.CUSTOM_DATE)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tdelete fields[key];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tconst field = this.parent.getFieldByName(key);\n\n\t\t\t\t\tif (fields[key] === '' && (!field || !field.STRICT))\n\t\t\t\t\t{\n\t\t\t\t\t\tdelete fields[key];\n\t\t\t\t\t}\n\t\t\t\t}, this);\n\t\t\t}\n\t\t}\n\t}\n\n\n\t/**\n\t * Checks is modified preset field values\n\t * @param {string} presetId\n\t * @returns {boolean}\n\t */\n\tisPresetValuesModified(presetId)\n\t{\n\t\tconst currentPresetData = this.getPreset(presetId);\n\t\tconst presetFields = this.parent.preparePresetSettingsFields(currentPresetData.FIELDS);\n\t\tconst currentFields = this.parent.getFilterFieldsValues();\n\n\t\tthis.removeNotCompareVariables(presetFields);\n\t\tthis.removeNotCompareVariables(currentFields);\n\n\t\tconst comparedPresetFields = BX.Filter.Utils.sortObject(presetFields);\n\t\tconst comparedCurrentFields = BX.Filter.Utils.sortObject(currentFields);\n\n\t\treturn !Object.keys(comparedPresetFields).every((key) => {\n\t\t\treturn (\n\t\t\t\tcomparedPresetFields[key] === comparedCurrentFields[key]\n\t\t\t\t|| ((BX.type.isPlainObject(comparedPresetFields[key]) || BX.type.isArray(comparedPresetFields[key]))\n\t\t\t\t && BX.Filter.Utils.objectsIsEquals(comparedPresetFields[key], comparedCurrentFields[key]))\n\t\t\t);\n\t\t});\n\t}\n\n\n\t/**\n\t * Gets additional preset values\n\t * @param {string} presetId\n\t * @return {?object}\n\t */\n\tgetAdditionalValues(presetId)\n\t{\n\t\tconst currentPresetData = this.getPreset(presetId);\n\t\tconst notEmptyFields = currentPresetData.FIELDS.filter(function(field) {\n\t\t\treturn !this.isEmptyField(field);\n\t\t}, this);\n\t\tconst presetFields = this.parent.preparePresetSettingsFields(notEmptyFields);\n\t\tconst currentFields = this.parent.getFilterFieldsValues();\n\n\t\tthis.removeNotCompareVariables(presetFields, true);\n\t\tthis.removeNotCompareVariables(currentFields, true);\n\n\t\tthis.removeSameProperties(currentFields, presetFields);\n\n\t\treturn currentFields;\n\t}\n\n\n\t/**\n\t * Removes same object properties\n\t * @param {object} object1\n\t * @param {object} object2\n\t */\n\tremoveSameProperties(object1, object2)\n\t{\n\t\tif (BX.type.isPlainObject(object1) && BX.type.isPlainObject(object2))\n\t\t{\n\t\t\tObject.keys(object2).forEach((key) => {\n\t\t\t\tif (key in object1)\n\t\t\t\t{\n\t\t\t\t\tdelete object1[key];\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\n\t/**\n\t * Removes additional field by field name\n\t * @param {string} name\n\t */\n\tremoveAdditionalField(name)\n\t{\n\t\tconst preset = this.getPreset(this.getCurrentPresetId());\n\n\t\tif (BX.type.isArray(preset.ADDITIONAL))\n\t\t{\n\t\t\tpreset.ADDITIONAL = preset.ADDITIONAL.filter((field) => {\n\t\t\t\treturn field.NAME !== name;\n\t\t\t});\n\t\t}\n\t}\n\n\n\t/**\n\t * Updates preset fields list\n\t * @param {object} preset\n\t * @param {boolean} [noValues = false]\n\t */\n\tupdatePresetFields(preset, noValues)\n\t{\n\t\tlet fields; let\n\t\t\tfieldListContainer;\n\t\tconst fieldNodes = [];\n\n\t\tif (BX.type.isPlainObject(preset) && ('FIELDS' in preset))\n\t\t{\n\t\t\tfields = preset.FIELDS;\n\n\t\t\tif (BX.type.isArray(preset.ADDITIONAL))\n\t\t\t{\n\t\t\t\tpreset.ADDITIONAL\n\t\t\t\t\t.filter((field) => {\n\t\t\t\t\t\treturn this.parent.params.FIELDS.some((currentField) => {\n\t\t\t\t\t\t\treturn field.NAME === currentField.NAME;\n\t\t\t\t\t\t});\n\t\t\t\t\t})\n\t\t\t\t\t.forEach((field) => {\n\t\t\t\t\t\tlet replaced = false;\n\t\t\t\t\t\tfield.IS_PRESET_FIELD = true;\n\t\t\t\t\t\tfields.forEach((presetField, index) => {\n\t\t\t\t\t\t\tif (field.NAME === presetField.NAME)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tfields[index] = field;\n\t\t\t\t\t\t\t\treplaced = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif (!replaced)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfields.push(field);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t}\n\n\t\t\t(fields || [])\n\t\t\t\t.filter((field) => {\n\t\t\t\t\treturn this.parent.params.FIELDS.some((currentField) => {\n\t\t\t\t\t\treturn field.NAME === currentField.NAME;\n\t\t\t\t\t});\n\t\t\t\t})\n\t\t\t\t.forEach(function(fieldData, index) {\n\t\t\t\t\tfieldData.TABINDEX = index + 1;\n\t\t\t\t\tif (noValues)\n\t\t\t\t\t{\n\t\t\t\t\t\tswitch (fieldData.TYPE)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcase this.parent.types.SELECT: {\n\t\t\t\t\t\t\t\tfieldData.VALUE = fieldData.ITEMS[0];\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tcase this.parent.types.MULTI_SELECT: {\n\t\t\t\t\t\t\t\tfieldData.VALUE = [];\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tcase this.parent.types.DATE: {\n\t\t\t\t\t\t\t\tfieldData.SUB_TYPE = fieldData.SUB_TYPES[0];\n\t\t\t\t\t\t\t\tfieldData.VALUES = {\n\t\t\t\t\t\t\t\t\t_from: '',\n\t\t\t\t\t\t\t\t\t_to: '',\n\t\t\t\t\t\t\t\t\t_days: '',\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tcase this.parent.types.CUSTOM_DATE: {\n\t\t\t\t\t\t\t\tfieldData.VALUE = {\n\t\t\t\t\t\t\t\t\tdays: [],\n\t\t\t\t\t\t\t\t\tmonths: [],\n\t\t\t\t\t\t\t\t\tyears: [],\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tcase this.parent.types.NUMBER: {\n\t\t\t\t\t\t\t\tfieldData.SUB_TYPE = fieldData.SUB_TYPES[0];\n\t\t\t\t\t\t\t\tfieldData.VALUES = {\n\t\t\t\t\t\t\t\t\t_from: '',\n\t\t\t\t\t\t\t\t\t_to: '',\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tcase this.parent.types.CUSTOM_ENTITY: {\n\t\t\t\t\t\t\t\tfieldData.VALUES = {\n\t\t\t\t\t\t\t\t\t_label: '',\n\t\t\t\t\t\t\t\t\t_value: '',\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tcase this.parent.types.CUSTOM: {\n\t\t\t\t\t\t\t\tfieldData._VALUE = '';\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tdefault: {\n\t\t\t\t\t\t\t\tif ('VALUE' in fieldData)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tif (BX.type.isArray(fieldData.VALUE))\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tfieldData.VALUE = [];\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tfieldData.VALUE = '';\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tfieldNodes.push(this.createControl(fieldData));\n\t\t\t\t}, this);\n\n\t\t\tthis.parent.disableFieldsDragAndDrop();\n\t\t\tfieldListContainer = this.parent.getFieldListContainer();\n\t\t\tBX.cleanNode(fieldListContainer);\n\n\t\t\tif (fieldNodes.length)\n\t\t\t{\n\t\t\t\tfieldNodes.forEach(function(current, index) {\n\t\t\t\t\tif (BX.type.isDomNode(current))\n\t\t\t\t\t{\n\t\t\t\t\t\tif (preset.ID !== 'tmp_filter'\n\t\t\t\t\t\t\t&& preset.ID !== 'default_filter'\n\t\t\t\t\t\t\t&& !('IS_PRESET_FIELD' in fields[index])\n\t\t\t\t\t\t\t&& !this.isEmptyField(fields[index]))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tBX.addClass(current, this.parent.settings.classPresetField);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tBX.append(current, fieldListContainer);\n\n\t\t\t\t\t\tif (BX.type.isString(fields[index].HTML))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconst wrap = BX.create('div');\n\t\t\t\t\t\t\tthis.parent.getHiddenElement().appendChild(wrap);\n\t\t\t\t\t\t\tBX.html(wrap, fields[index].HTML);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}, this);\n\n\t\t\t\tthis.parent.enableFieldsDragAndDrop();\n\t\t\t}\n\t\t}\n\t}\n\n\n\t/**\n\t * Shows current preset fields\n\t */\n\tshowCurrentPresetFields()\n\t{\n\t\tconst preset = this.getCurrentPresetData();\n\t\tthis.updatePresetFields(preset);\n\t}\n\n\n\t/**\n\t * Gets current preset element\n\t * @return {?HTMLElement}\n\t */\n\tgetCurrentPreset()\n\t{\n\t\treturn BX.Filter.Utils.getByClass(this.getContainer(), this.parent.settings.classPresetCurrent);\n\t}\n\n\n\t/**\n\t * Gets current preset id\n\t * @return {*}\n\t */\n\tgetCurrentPresetId()\n\t{\n\t\tconst current = this.getCurrentPreset();\n\t\tlet currentId = null;\n\n\t\tif (BX.type.isDomNode(current))\n\t\t{\n\t\t\tcurrentId = this.getPresetId(current);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tcurrentId = 'tmp_filter';\n\t\t}\n\n\t\treturn currentId;\n\t}\n\n\n\t/**\n\t * Gets current preset data\n\t * @return {?object}\n\t */\n\tgetCurrentPresetData()\n\t{\n\t\tconst currentId = this.getCurrentPresetId();\n\t\tlet currentData = null;\n\n\t\tif (BX.type.isNotEmptyString(currentId))\n\t\t{\n\t\t\tcurrentData = this.getPreset(currentId);\n\t\t\tcurrentData = this.extendPreset(currentData);\n\t\t}\n\n\t\treturn currentData;\n\t}\n\n\n\t/**\n\t * Gets presets container element\n\t * @return {?HTMLElement}\n\t */\n\tgetContainer()\n\t{\n\t\treturn BX.Filter.Utils.getByClass(this.parent.getFilter(), this.parent.settings.classPresetsContainer);\n\t}\n\n\n\t/**\n\t * Gets preset nodes\n\t * @return {?HTMLElement[]}\n\t */\n\tgetPresets()\n\t{\n\t\treturn BX.Filter.Utils.getByClass(this.getContainer(), this.parent.settings.classPreset, true);\n\t}\n\n\n\t/**\n\t * Gets default presets elements\n\t * @return {?HTMLElement[]}\n\t */\n\tgetDefaultPresets()\n\t{\n\t\treturn BX.Filter.Utils.getByClass(this.getContainer(), this.parent.settings.classDefaultFilter, true);\n\t}\n\n\n\t/**\n\t * Gets default preset element\n\t * @return {?HTMLElement}\n\t */\n\tgetPinnedPresetNode()\n\t{\n\t\treturn BX.Filter.Utils.getByClass(this.getContainer(), this.parent.settings.classPinnedPreset);\n\t}\n\n\n\t/**\n\t * Checks preset is pinned (default)\n\t * @param presetId\n\t * @return {boolean}\n\t */\n\tisPinned(presetId)\n\t{\n\t\treturn this.getPinnedPresetId() === presetId;\n\t}\n\n\n\t/**\n\t * Gets pinned (default) preset id\n\t * @return {string}\n\t */\n\tgetPinnedPresetId()\n\t{\n\t\tconst node = this.getPinnedPresetNode();\n\t\tlet id = 'default_filter';\n\n\t\tif (node)\n\t\t{\n\t\t\tconst dataId = BX.data(node, 'id');\n\t\t\tid = dataId || id;\n\t\t}\n\n\t\treturn id;\n\t}\n}"],"names":["BX","namespace","Main","ui","block","data","group","select","deleteButton","label","dragButton","name","mix","attrs","type","enableTime","content","isNotEmptyString","tag","title","push","tabindex","value","items","params","valueDelete","isArray","forEach","current","isPlainObject","deleteTitle","dragTitle","field","valueDeleteButton","placeholder","item","id","JSON","stringify","events","click","onClick","control","input","autocomplete","isPreset","util","htmlspecialcharsback","pinned","htmlspecialchars","text","noEditPinTitle","editNameTitle","removeTitle","editPinTitle","Filter","Utils","cache","styleForEach","collection","properties","keys","Object","call","propKey","style","closestParent","className","parentNode","findParent","closestChilds","children","getNext","currentItem","nextElementSibling","getPrev","previousElementSibling","collectionSort","target","root","collectionLength","currentIndex","targetIndex","length","getIndex","appendChild","insertBefore","indexOf","getByClass","rootElement","all","result","document","body","getElementsByClassName","slice","getByTag","getElementsByTagName","getBySelector","selector","querySelector","querySelectorAll","requestAnimationFrame","raf","window","webkitRequestAnimationFrame","mozRequestAnimationFrame","msRequestAnimationFrame","oRequestAnimationFrame","callback","setTimeout","apply","arguments","sortObject","output","sort","key","objectsIsEquals","object1","object2","isKey","event","keyCode","keyboard","code","which","DestinationSelectorManager","fields","controls","onSelect","isNumeric","prefix","isNotEmptyObject","selectorId","re","RegExp","found","match","eventResult","onCustomEvent","setData","getLabelNode","blur","onDialogOpen","DestinationSelector","onDialogClose","filterId","settings","fieldId","inited","create","self","initialize","prototype","getSetting","defaultval","hasOwnProperty","getSearchInput","opened","initialValue","initialSettings","itemId","itemName","filterManager","getById","getApi","setFields","addCustomEvent","delegate","onCustomEntitySelectorOpen","onCustomEntitySelectorClose","onGetStopBlur","onBeforeInitDialog","onCustomEntityRemove","open","getCurrentValues","inputId","containerId","currentValue","currentUser","entityId","bindNode","getField","close","selectorManagerV2","closeDialog","getId","stopBlur","instance","UI","SelectorManager","instances","hiddenInput","itemsSelected","blockInit","FieldController","parent","init","isDomNode","bind","isShowDelete","showDelete","hideDelete","squares","getSquares","getInputValue","getInput","types","getType","DATE","classDateInput","NUMBER","classNumberInput","STRING","classStringInput","CUSTOM_ENTITY","getDeleteButton","classValueDelete","classSquare","MULTI_SELECT","SELECT","_onDeleteClick","_onInput","clearInput","addClass","classHide","removeClass","removeSquares","square","remove","CustomEntity","labelInput","popupContainer","inputClass","squareClass","multiple","isMultiple","hasClass","parse","setField","reset","hiddenNode","getHiddenNode","getSquareByValue","jsencode","join","setSquare","squareData","decl","prepend","insertAfter","i","_label","_value","ex","setMultipleData","setSingleData","fireEvent","values","setPopupContainer","container","getPopupContainer","Search","preset","buttonsContainer","delay","timeout","_onInputWithoutDebounce","getParam","debounce","_onKeyDown","getFindButton","_onSearchClick","getContainer","_onSearchContainerClick","removeAutofocus","firstInit","autofocus","findButton","classSearchButton","selectSquare","classSquareSelected","selectSquares","unselectSquare","unselectSquares","removeSquare","isSquaresSelected","every","isSquareSelected","getLastSquare","isTextSelected","searchStringLength","getSearchString","searchInput","selectionStart","selectionEnd","isSelectionStart","isSquareRemoveButton","node","classSquareDelete","isClearButton","classClearSearchValueButton","getClearButton","isSearchButton","adjustFocus","browser","IsMobile","activeElement","scrollY","pos","top","focus","findSquareByChild","childNode","getSquareData","rawData","isSquareControl","onPresetSquareRemove","Preset","getPreset","currentPresetId","getCurrentPresetId","isResetToDefaultMode","isValueRequiredModeMail","isPinned","showPopup","adjustPlaceholder","deactivateAllPresets","resetWithoutSearch","lastPromise","resetFilter","closePopup","applyPinnedPreset","currentPreset","tmpPreset","FIELDS","clone","ADDITIONAL","applyPreset","applyFilter","onControlSquareRemove","clearControls","removeAdditionalField","onValueRequiredSquareRemove","complexSquareRemove","isValueRequiredMode","isPresetSquare","adjustClearButton","showClearButton","hideClearButton","presetData","getPopup","isShown","start","end","searchLength","restoreRemovedPreset","utils","lastSearchString","metaKey","ctrlKey","clearTimeout","setInputPlaceholder","get","isResolvedRequest","state","_onFindButtonClick","getSearch","removePreset","resetPreset","searchString","isIe","showGridAnimation","FILTER_ID","getButtonsContainer","classSearchButtonsContainer","classShow","form","clearForm","makeSquares","squaresData","depth","additional","tmpSquare","moreSquares","index","lastSquare","squaresWidth","prepareSquaresData","width","map","curr","reduce","prev","parseFloat","setPreset","squaresResult","ID","TITLE","NAME","TYPE","tmpValues","filter","some","currentField","LABEL","SUB_TYPE","VALUE","dateTypes","QUARTER","VALUES","_quarter","quarter","QUARTERS","toLocaleLowerCase","_year","YEAR","MONTH","_month","month","MONTHS","EXACT","_from","RANGE","_to","NEXT_DAYS","PREV_DAYS","isNumber","parseInt","_days","replace","NONE","CUSTOM_DATE","days","months","years","STRICT","val","DEST_SELECTOR","MULTIPLE","CUSTOM","_VALUE","presetClass","updatePreset","Settings","options","classField","classFieldGroup","classFieldLine","classFieldDelete","classFieldLabel","classFieldWithLabel","classPresetName","classControl","classSelect","classMultiSelect","classAddField","classAddPresetField","classAddPresetFieldInput","classAddPresetButton","classButtonsContainer","classSaveButton","classCancelButton","classMenuItem","classMenuItemText","classMenuMultiItemText","classMenuItemChecked","classSearchContainer","classDefaultPopup","classPopupFieldList","classPopupFieldList1Column","classPopupFieldList2Column","classPopupFieldList3Column","classFieldListItem","classEditButton","classPresetEdit","classPresetNameEdit","classPresetDeleteButton","classPresetDragButton","classPresetEditButton","classPresetEditInput","classPresetOndrag","classPresetsContainer","classPreset","classPresetCurrent","classFilterContainer","classFileldControlList","classRestoreFieldsButton","classDisabled","classAnimationShow","classAnimationClose","classLimitsAnimation","classSidebarControlsContainer","searchContainerPostfix","classPresetButtonsContainer","classFindButton","classResetButton","classDefaultFilter","classRestoreButton","classPinButton","classPopupOverlay","classPinnedPreset","classWaitButtonClass","classForAllCheckbox","classFocus","classPresetField","numberPostfix","datePostfix","toPostfix","fromPostfix","daysPostfix","monthPostfix","quarterPostfix","yearPostfix","generalTemplateId","mergeSettings","defaultValue","isFunction","numberTypes","additionalDateTypes","search","popup","presets","api","isAddPresetModeState","emitter","Event","EventEmitter","setEventNamespace","subscribe","eventName","listener","toCamelCase","string","isString","toLowerCase","chr","toUpperCase","substr","_onDocumentClick","_onDocumentKeydown","onWindowLoad","_onGridReady","getEmitter","clearGet","url","location","toString","clearUrl","remove_url_param","history","replaceState","_onAddPresetKeydown","_onSaveButtonClick","Api","addSidebarItem","Presets","presetsContainer","sidebarItem","createSidebarItem","getPresetNodeById","getAddPresetField","_onPresetClick","saveUserSettings","forAll","optionsParams","presetsSettings","editablePresets","current_preset","getPresets","presetId","getPresetId","SORT","updatePresetName","preparePresetSettingsFields","for_all","isBoolean","FOR_ALL","saveOptions","isForAll","checkbox","getForAllCheckbox","checked","forAllCheckbox","getFilter","valuesKeys","TEXTAREA","CHECKBOX","savePreset","Date","presetName","getAddPresetFieldInput","activatePreset","beforeLoad","afterLoad","isNew","getFilterFieldsValues","sourceFields","getFields","getCurrentPresetData","rows","tmpPresetNode","tmpPresetInput","apply_filter","clear_filter","save","preset_id","getPresetInput","isAddPresetEnabled","updateParams","promise","Promise","setAutoResolve","then","afterPromise","proxy","fulfill","saveFieldsSort","split","preparePresetFields","dataFields","fieldKeys","getFieldByName","prepareMultiSelectValue","ITEMS","prepareSelectValue","SUB_TYPES","tmpResult","valuesValues","find","getFieldListContainer","Field","confirmSaveForAll","resolve","action","CONFIRM","CONFIRM_MESSAGE","CONFIRM_APPLY_BUTTON","CONFIRM_CANCEL_BUTTON","confirmDialog","commonPresetsId","with_preset","requestData","backend","disableEdit","disableAddPreset","ajax","runComponentAction","mode","analyticsLabel","GRID_ID","prepareEvent","x","path","presetNode","hasScrollClick","clientX","documentElement","offsetWidth","isUseCommonPresets","isInsideFilterEvent","_onAddFieldClick","getFieldsPopup","stopPropagation","preventDefault","showFieldsPopup","syncFields","closeFieldListPopup","fieldsPopupItems","getFieldsPopupItems","currentId","isNeedCheck","contentContainer","getFieldListContainerClassName","itemsCount","containerClass","prepareFieldsDecl","_clickOnFieldListItem","getLazyLoadFields","p","method","dataType","onsuccess","response","getFieldsListPopupContent","fieldsCount","containerDecl","sourceComponentName","sourceComponentSignedParameters","runAction","componentName","signedParameters","getFieldLoader","fieldLoader","Loader","size","offset","left","err","show","classList","add","hide","getLazyLoadField","removeField","addField","HTML","wrap","getHiddenElement","html","hiddenElement","add_url_param","adjustFieldListPopupPosition","getAddField","forceBindPosition","adjustPosition","addFiledButton","fieldsPopup","PopupWindow","autoHide","offsetTop","offsetLeft","lightShadow","closeIcon","closeByEsc","noAllPaddings","zIndex","fieldsPopupLoader","height","res","removeAttribute","setContent","_onAddPresetClick","enableAddPreset","enableWaitSate","button","disableWaitState","getSaveForAllCheckbox","mask","onAnimationEnd","animationName","currentTarget","removeEventListener","showLengthError","addEventListener","isEditEnabled","presetNameInput","updateEditablePreset","presetMask","_onCancelButtonClick","clearAddPresetFieldInput","grid","getContainerId","_onFilterMousedown","isDragButton","inputs","_onFilterClick","Fields","isFieldDelete","isFieldValueDelete","clearFieldValue","getSaveButton","getCancelButton","getResetButton","getAddPresetButton","addPresetField","addPresetFieldInput","getPresetButtonsContainer","hideForAllCheckbox","getSidebarControlsContainer","showForAllCheckbox","getControls","getFilterFields","groups","prepareControlStringValue","prepareControlTextareaValue","prepareControlNumberValue","prepareControlDateValue","prepareControlCustomDateValue","prepareControlSelectValue","prepareControlMultiselectValue","prepareControlCustomEntityValue","prepareControlCustomValue","fetchSquares","fetchSquaresData","stringFields","daysControl","daysValue","dataset","monthsControl","monthsValue","yearsControl","yearsValue","withAdditional","additionalFieldsContainer","yearsSwitcher","selectName","fromName","toName","daysName","monthName","quarterName","yearName","yearsSwitcherName","selectValue","controlName","yearsSwitcherValue","isValid","endsWith","PREV_DAY","NEXT_DAY","MORE_THAN_DAYS_AGO","AFTER_DAYS","customValues","append","additionalFields","Array","from","additionalField","tableFade","hideGridAnimation","tableUnfade","clear","applyParams","autoResolve","clear_nav","reject","reloadTable","resetControlData","controlData","clearControl","newControl","createControl","getTemplate","ie","configCloseDelay","closeDelay","isOpened","showDelay","textareas","scrollHeight","saveForAllCheckbox","getSaveForAllCheckboxContainer","saveForAllCheckboxContainer","getPopupBindElement","popupBindElement","_onFieldsContainerKeydown","_onPresetInputKeydown","_onResetButtonClick","getEditButton","_onEditButtonClick","getRestoreButton","_onRestoreButtonClick","getRestoreFieldsButton","_onRestoreFieldsButtonClick","showCurrentPresetFields","bindOnPresetClick","restoreDefaultFields","defaultPreset","restoreFieldsButton","restoreFilter","defaultPresets","allPresets","isReplace","replaceIndex","applyPresetId","a","b","defPreset","PINNED","saveRestoreFilter","prepareFields","restoreButton","tagName","isPresetValuesModified","getAdditionalValues","isEmptyField","withoutSearch","enableEdit","enableFieldsDragAndDrop","fieldsList","registerDragItem","getDragButton","onbxdragstart","_onFieldDragStart","onbxdragstop","_onFieldDragStop","onbxdrag","_onFieldDrag","jsDD","registerObject","registerDest","unregisterDragItem","unregisterObject","unregisterDest","dragItem","current_node","dragIndex","dragRect","getBoundingClientRect","dragStartOffset","start_y","scrollTop","_onMouseMove","unbind","targetItem","currentRect","currentMiddle","dragOffset","realY","sortOffset","transform","disableFieldsDragAndDrop","enablePresetsDragAndDrop","presetsList","_onDragStart","_onDragStop","_onDrag","disablePresetsDragAndDrop","normalizePreset","list","realX","clientY","getDragOffset","startDragOffset","sidebarControlsContainer","isEditEnabledState","disableEditPresetName","presetButtonsContainer","paramName","cancel","dialogId","popupMessage","popupTitle","CONFIRM_TITLE","applyButton","PopupWindowButton","popupWindow","destroy","cancelButton","PopupWindowButtonLink","dialog","titleBar","overlay","buttons","getInitialValue","INITIAL_FILTER","filteredEntries","entries","acc","startsWith","onValueChange","Symbol","Cache","MemoryCache","clearButtons","MO","MutationObserver","selects","observe","attributes","attributeFilter","set","emit","getValue","remember","Tag","render","Dom","hasAdditional","getAdditionalFieldContainer","prepareFieldOptions","renderedField","appendRenderedField","Type","stubs","FIELDS_STUBS","stub","baseField","VALUE_REQUIRED","valueRequired","prepareListItems","isMulti","subType","Reflect","has","_datesel","exclude","includes","allValues","fieldValue","fieldNode","attr","nameNode","innerText","Factory","WeakMap","isObject","checkFields","newFields","assign","force","String","previewsAdditionalValues","setFilter","createDateInputDecl","calendarButton","createNumberInputDecl","createLineDecl","createSelectDecl","errorMessages","errorMessagesTypes","_onDateTypeChange","closest","template","wrapped","fieldGroup","fieldLine","fieldData","PLACEHOLDER","TABINDEX","textarea","onChange","currentLabel","_onCustomEntityInputClick","bindDocument","_onCustomEntityBlur","_onDocumentFocus","_onCustomEntityKeydown","_onCustomEntityFieldClick","ready","_onCustomEntityInputFocus","isTrusted","trustTimestamp","timeStamp","notTrustTimestamp","trustDate","notTrustDate","trustTime","getMinutes","getSeconds","notTrustTime","_onCustomEntityFocus","getCustomEntityInstance","isOnInputField","isInsidePopup","contains","eventData","_stopPropagation","customEntityInstance","isElementNode","Text","decode","Runtime","PARAMS","DAYS","DAYS_PLACEHOLDER","MONTHS_PLACEHOLDER","YEARS","YEARS_PLACEHOLDER","dateGroup","getNode","getParams","getAttribute","getItems","presetField","isNil","ENABLE_TIME","YEARS_SWITCHER","REQUIRED","createDate","createNumber","ENABLE_LABEL","SINGLE","fieldName","classes","LESS","line","to","_allow_year","fieldDecl","rangeGroup","monthValue","yearValue","quarterValue","customDateSubType","customDateDecl","DECL","createCustomDate","createSelect","lastIndex","lastContentItem","renderedFieldGroup","onDateChange","clearButton","allInputs","checkRequiredDateValue","bindOnce","removeButton","currentValues","showError","MAIN_UI_FILTER__VALUE_REQUIRED","hideError","format","message","MAIN_UI_FILTER__DATE_ERROR_TITLE","MAIN_UI_FILTER__DATE_ERROR_LABEL","errorText","Loc","getMessage","dateErrorMessage","getPresetNameNode","isDefault","newPresets","postData","is_default","getData","PRESETS","pinPreset","enableEditPresetName","IS_DEFAULT","getPinnedPresetId","pinnedPresetId","pinnedPresetNode","getPinnedPresetNode","presetRows","presetFields","ROWS","_onPresetNameInput","inputValue","filtered","noValues","extendPreset","updatePresetFields","someField","defCurr","defIndex","datesel","CURRENT_DAY","CURRENT_WEEK","CURRENT_MONTH","CURRENT_QUARTER","LAST_7_DAYS","LAST_30_DAYS","LAST_60_DAYS","LAST_90_DAYS","LAST_WEEK","LAST_MONTH","TOMORROW","YESTERDAY","NEXT_WEEK","NEXT_MONTH","tmpName","disableSaveFieldsSort","deleteField","currentPresetField","getPresetField","nodeName","createInputText","createTextarea","createMultiSelect","createDestSelector","createCustom","createCustomEntity","noClean","dateType","FIND","currentPresetData","currentFields","removeNotCompareVariables","comparedPresetFields","comparedCurrentFields","notEmptyFields","removeSameProperties","fieldListContainer","fieldNodes","replaced","IS_PRESET_FIELD","cleanNode","getCurrentPreset","currentData","dataId"],"mappings":"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"}