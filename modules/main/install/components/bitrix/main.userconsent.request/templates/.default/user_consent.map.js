{"version":3,"file":"user_consent.min.js","sources":["user_consent.js"],"names":["UserConsentControl","params","this","caller","formNode","controlNode","inputNode","config","prototype","BX","UserConsent","msg","title","btnAccept","btnReject","loading","errTextLoad","events","save","refused","accepted","current","autoSave","isFormSubmitted","isConsentSaved","attributeControl","load","context","item","find","bind","loadAll","limit","forEach","loadFromForms","formNodes","document","getElementsByTagName","convert","nodeListToArray","controlNodes","querySelectorAll","map","createItem","filter","submitEventName","addCustomEvent","onSubmit","onClick","querySelector","JSON","parse","getAttribute","parameters","tagName","findParent","e","requestForItem","preventDefault","check","checked","saveConsent","setCurrent","requestConsent","id","sec","replace","onAccepted","onRefused","actionRequestUrl","actionUrl","onCustomEvent","submit","initPopup","popup","isInit","nodes","container","shadow","head","loader","content","textarea","buttonAccept","buttonReject","onAccept","hide","onReject","init","tmplNode","createElement","innerHTML","children","body","insertBefore","textContent","message","setTitle","text","setContent","show","isContentVisible","style","display","cache","list","stringifyKey","key","type","isString","stringify","set","data","get","push","getData","filtered","length","has","sendData","cacheHash","setTextToPopup","sendActionRequest","alert","titleBar","textTitlePos","indexOf","textTitleDotPos","substr","trim","split","Function","call","String","callback","url","window","location","href","originId","inputs","input","name","value","originatorId","apply","action","callbackSuccess","callbackFailure","sessid","bitrix_sessid","ajax","method","timeout","dataType","processData","onsuccess","proxy","error","onfailure","ready"],"mappings":"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"}