{"version":3,"file":"toloka.bundle.js","sources":["../src/autocomplete/components/element.js","../src/autocomplete/autocomplete.js","../src/toloka.js"],"sourcesContent":["const allowedAttributes = {\n\tvalue: \"data-value\",\n\tname: \"data-name\",\n\tdisabled: \"data-disabled\",\n\tclass: \"class\",\n\ttype: \"type\"\n};\n\nclass Element\n{\n\tconstructor(element, attributes = {}, i18n = {})\n\t{\n\t\tthis._node = element instanceof HTMLElement ? element : document.createElement(element);\n\t\tthis._config = { i18n };\n\n\t\tthis._setAttributes(attributes);\n\n\t\tif (attributes.textContent)\n\t\t{\n\t\t\tthis._setTextContent(attributes.textContent);\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tget()\n\t{\n\t\treturn this._node;\n\t}\n\n\tappend(element)\n\t{\n\t\tthis._node.appendChild(element);\n\t\treturn this;\n\t}\n\n\taddClass(className)\n\t{\n\t\tthis._node.classList.add(className);\n\t\treturn this;\n\t}\n\n\tremoveClass(className)\n\t{\n\t\tthis._node.classList.remove(className);\n\t\treturn this;\n\t}\n\n\ttoggleClass(className)\n\t{\n\t\tthis._node.classList.toggle(className);\n\t\treturn this;\n\t}\n\n\taddEventListener(type, callback)\n\t{\n\t\tthis._node.addEventListener(type, callback);\n\t\treturn this;\n\t}\n\n\tremoveEventListener(type, callback)\n\t{\n\t\tthis._node.removeEventListener(type, callback);\n\t\treturn this;\n\t}\n\n\tsetText(text)\n\t{\n\t\tthis._setTextContent(text);\n\t\treturn this;\n\t}\n\n\tgetHeight()\n\t{\n\t\treturn window.getComputedStyle(this._node).height;\n\t}\n\n\n\tgetWidth()\n\t{\n\t\treturn window.getComputedStyle(this._node).width;\n\t}\n\n\tsetTop(top)\n\t{\n\t\tthis._node.style.top = `${top}px`;\n\t\treturn this;\n\t}\n\n\tfocus()\n\t{\n\t\tthis._node.focus();\n\t\treturn this;\n\t}\n\n\t_setTextContent(textContent)\n\t{\n\t\tthis._node.textContent = textContent;\n\t}\n\n\t_setAttributes(attributes)\n\t{\n\t\tfor (const key in attributes)\n\t\t{\n\t\t\tif (allowedAttributes[key] && attributes[key])\n\t\t\t{\n\t\t\t\tthis._setAttribute(allowedAttributes[key], attributes[key]);\n\t\t\t}\n\t\t}\n\t}\n\n\t_setAttribute(key, value)\n\t{\n\t\tthis._node.setAttribute(key, value);\n\t}\n\n\t_getAttribute(key)\n\t{\n\t\tthis._node.getAttribute(key);\n\t}\n}\n\nexport default Element;\n","import Element from \"./components/element\";\nimport \"./css/autocomplete.css\";\nimport { Popup } from 'main.popup';\n\nconst CLASSES = {\n\tselect: \"main-ui-control\",\n\tdropdownShown: \"autocomplete-select--opened\",\n\tmultiselect: \"main-ui-multi-select\",\n\tlabel: \"main-ui-square-container\",\n\tplaceholder: \"autocomplete-placeholder\",\n\tdropdown: \"popup-select-content\",\n\toption: \"main-ui-select-inner-item\",\n\tremove: \"main-ui-item-icon main-ui-square-delete\",\n\toptionDisabled: \"autocomplete-option--disabled\",\n\tautocompleteInput: \"main-ui-control main-ui-control-string\",\n\tselectedLabel: \"main-ui-square\",\n\tselectedOption: \"autocomplete-option--selected\",\n\tplaceholderHidden: \"autocomplete-placeholder--hidden\",\n\toptionHidden: \"autocomplete-option--hidden\"\n};\n\nclass Autocomplete\n{\n\tconstructor(element, config)\n\t{\n\t\tthis._config = {\n\t\t\t...config,\n\t\t\tclassNames: {\n\t\t\t\t...CLASSES,\n\t\t\t\t...config.classNames\n\t\t\t},\n\t\t\tdisabledOptions: []\n\t\t};\n\t\tthis._state = {\n\t\t\topened: false\n\t\t};\n\t\tthis._icons = [];\n\t\tthis._holderElement = element;\n\n\t\tthis._boundHandleClick = this._handleClick.bind(this);\n\t\tthis._boundUnselectOption = this._unselectOption.bind(this);\n\t\tthis._boundSortOptions = this._sortOptions.bind(this);\n\n\t\tthis._body = new Element(document.body);\n\n\t\tthis._create(element);\n\n\t\tif (!this._config.value)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tthis._setValue();\n\t}\n\n\tsetOptions(data)\n\t{\n\t\tthis._config.options = data;\n\t\tthis._options = this._generateOptions();\n\t}\n\n\tvalue()\n\t{\n\t\treturn this._config.value;\n\t}\n\n\tremoveAutocompleteNode()\n\t{\n\t\tBX.remove(this._autocomplete.get());\n\n\t\tthis._options.map(_option => {\n\t\t\tBX.remove(_option.get());\n\t\t})\n\t}\n\n\treset()\n\t{\n\t\tthis._config.value = this._config.multiple ? [] : null;\n\t\tthis._setValue();\n\t}\n\n\t_create(_element)\n\t{\n\t\tconst element = typeof _element === \"string\" ? document.querySelector(_element) : _element;\n\n\t\tthis._parent = new Element(element);\n\n\t\tconst selector = element.querySelectorAll(\n\t\t\t`div[data-name=${element.dataset.name}]`\n\t\t)[0];\n\t\tlet selectClone = selector.cloneNode(true);\n\t\telement.removeChild(selector);\n\n\t\tthis._select = new Element(selectClone);\n\t\tthis._label = new Element(\"span\", { class: this._config.classNames.label });\n\t\tthis._optionsWrapper = new Element(\"div\", { class: this._config.classNames.dropdown });\n\n\t\tif (this._config.multiple)\n\t\t{\n\t\t\tthis._select.addClass(this._config.classNames.multiselect);\n\t\t}\n\n\t\tthis._options = this._generateOptions();\n\n\t\tthis._select.addEventListener(\"click\", this._boundHandleClick);\n\t\tthis._select.append(this._label.get());\n\n\t\tlet deleteButton = this._parent.get().parentNode.querySelectorAll('div.main-ui-control-value-delete');\n\t\tif(deleteButton.length > 0)\n\t\t{\n\t\t\tBX.bind(deleteButton[0], \"click\", this.reset.bind(this));\n\t\t\tthis._select.append(deleteButton[0]);\n\t\t}\n\n\t\tthis._parent.append(this._select.get());\n\t\tthis._placeholder = new Element(\"div\",\n\t\t\t{\n\t\t\t\tclass: this._config.classNames.placeholder,\n\t\t\t\ttextContent: this._config.placeholder\n\t\t\t}\n\t\t);\n\t\tthis._select.append(this._placeholder.get());\n\n\t\tthis._popup = new Popup({\n\t\t\tid: \"autocomplete\" + Math.random(),\n\t\t\tbindElement: _element,\n\t\t\tzIndex: 3000,\n\t\t\twidth: 515,\n\t\t\tmaxHeight: 300\n\t\t});\n\n\t\tthis._popup.setContent(this._optionsWrapper.get());\n\t}\n\n\t_generateOptions()\n\t{\n\t\tif (this._config.autocomplete && !this._autocomplete)\n\t\t{\n\t\t\tthis._autocomplete = new Element(\"input\", {\n\t\t\t\tclass: this._config.classNames.autocompleteInput,\n\t\t\t\tname: `autocomplete-${this._parent.get().dataset.name}`,\n\t\t\t\ttype: \"text\"\n\t\t\t});\n\t\t\tthis._autocomplete.addEventListener(\"input\", this._boundSortOptions);\n\n\t\t\tthis._optionsWrapper.append(this._autocomplete.get());\n\t\t}\n\n\t\treturn this._config.options.map(_option => {\n\t\t\tconst preOption =\n\t\t\t\tdocument\n\t\t\t\t\t.querySelectorAll(\n\t\t\t\t\t\t`div.${this._config.classNames.option}[data-value=\"${_option.id}\"]`\n\t\t\t\t\t);\n\t\t\tif (preOption.length > 0)\n\t\t\t{\n\t\t\t\treturn new Element(preOption[0]);\n\t\t\t}\n\n\t\t\tconst option = new Element(\"div\", {\n\t\t\t\tclass: `${this._config.classNames.option}${_option.disabled ?\n\t\t\t\t\t\" \" + this._config.classNames.optionDisabled : \"\"}`,\n\t\t\t\tvalue: _option.id,\n\t\t\t\ttextContent: _option.name,\n\t\t\t\tdisabled: _option.disabled\n\t\t\t});\n\t\t\tif (_option.disabled)\n\t\t\t{\n\t\t\t\tthis._config.disabledOptions.push(String(_option.id));\n\t\t\t}\n\t\t\tthis._optionsWrapper.append(option.get());\n\n\t\t\treturn option;\n\t\t});\n\t}\n\n\t_handleClick(event)\n\t{\n\t\tevent.stopPropagation();\n\n\t\tif (event.target.className === this._config.classNames.autocompleteInput)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._state.opened)\n\t\t{\n\t\t\tconst option = this._options.find(_option => {\n\t\t\t\tif(_option)\n\t\t\t\t{\n\t\t\t\t\treturn _option.get() === event.target;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (option !== undefined)\n\t\t\t{\n\t\t\t\tthis._setValue(option.get().getAttribute(\"data-value\"), true);\n\t\t\t}\n\n\t\t\tthis._popup.close();\n\t\t\tthis._select.removeClass(this._config.classNames.dropdownShown);\n\t\t\tthis._body.removeEventListener(\"click\", this._boundHandleClick);\n\t\t\tthis._select.addEventListener(\"click\", this._boundHandleClick);\n\n\t\t\tthis._state.opened = false;\n\t\t\treturn;\n\t\t}\n\n\t\tif (event.target.className === this._config.icon)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis._popup.show();\n\t\tthis._select.addClass(this._config.classNames.dropdownShown);\n\t\tthis._body.addEventListener(\"click\", this._boundHandleClick);\n\t\tthis._select.removeEventListener(\"click\", this._boundHandleClick);\n\n\t\tthis._state.opened = true;\n\n\t\tif (this._autocomplete)\n\t\t{\n\t\t\tthis._autocomplete.focus();\n\t\t}\n\t}\n\n\t_prepareDataValue()\n\t{\n\t\tlet dataValue = [];\n\n\t\tthis._config.options.forEach(_option => {\n\t\t\tthis._config.value.forEach(_value => {\n\t\t\t\tif(_option.id.toString() === _value)\n\t\t\t\t{\n\t\t\t\t\tdataValue.push(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tNAME: _option.name,\n\t\t\t\t\t\t\tVALUE: _option.id.toString()\n\t\t\t\t\t\t}\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t});\n\t\t})\n\n\t\tthis._parent.get().dataset.value = JSON.stringify(dataValue);\n\t\tthis._select.get().dataset.value = JSON.stringify(dataValue);\n\n\t\treturn dataValue;\n\t}\n\n\t_setValue(value, manual, unselected)\n\t{\n\t\tif (this._config.disabledOptions.indexOf(value) > -1)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tif (value && !unselected)\n\t\t{\n\t\t\tthis._config.value = this._config.multiple ? [...this._config.value || [], value] : value;\n\t\t}\n\t\tif (value && unselected)\n\t\t{\n\t\t\tthis._config.value = value;\n\t\t}\n\t\tthis._options.forEach(_option => {\n\t\t\t_option.removeClass(this._config.classNames.selectedOption);\n\t\t});\n\t\tthis._placeholder.removeClass(this._config.classNames.placeholderHidden);\n\n\t\tif (this._config.multiple)\n\t\t{\n\t\t\tconst options = this._config.value.map(_value => {\n\t\t\t\tconst option = this._config.options.find(_option => {\n\t\t\t\t\tif(_option)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn _option.id.toString() === _value;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tif (!option)\n\t\t\t\t{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tconst optionNode = this._options.find(\n\t\t\t\t\t_option => {\n\t\t\t\t\t\tif(_option)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn _option.get().getAttribute(\"data-value\") === option.id.toString();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t);\n\n\t\t\t\toptionNode.addClass(this._config.classNames.selectedOption);\n\n\t\t\t\treturn option;\n\t\t\t});\n\n\t\t\tif (options.length)\n\t\t\t{\n\t\t\t\tthis._placeholder.addClass(this._config.classNames.placeholderHidden);\n\t\t\t}\n\t\t\tthis._selectOptions(options, manual);\n\t\t\tthis._prepareDataValue();\n\t\t\treturn;\n\t\t}\n\n\t\tconst option = this._config.value ?\n\t\t\tthis._config.options.find(_option => {\n\t\t\t\t\tif (_option)\n\t\t\t\t\t{\n\t\t\t\t\t\t_option.id.toString() === this._config.value\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t) :\n\t\t\tthis._config.options[0];\n\n\t\tconst optionNode = this._options.find(\n\t\t\t_option => {\n\t\t\t\tif(_option)\n\t\t\t\t{\n\t\t\t\t\t_option.get().getAttribute(\"data-value\") === option.id.toString()\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\n\t\tthis._prepareDataValue();\n\t\tif (!this._config.value)\n\t\t{\n\t\t\tthis._label.setText(\"\");\n\t\t\treturn;\n\t\t}\n\t\toptionNode.addClass(this._config.classNames.selectedOption);\n\t\tthis._placeholder.addClass(this._config.classNames.placeholderHidden);\n\t\tthis._selectOption(option, manual);\n\t}\n\n\t_selectOption(option, manual)\n\t{\n\t\tthis._selectedOption = option;\n\n\t\tthis._label.setText(option.name);\n\n\t\tif (this._config.onChange && manual)\n\t\t{\n\t\t\tthis._config.onChange(option.id,this._prepareDataValue());\n\t\t}\n\t}\n\n\t_selectOptions(options, manual)\n\t{\n\t\tthis._label.setText(\"\");\n\n\t\tthis._icons = options.map(_option => {\n\t\t\tif(_option)\n\t\t\t{\n\t\t\t\tconst selectedLabel = new Element(\"span\", {\n\t\t\t\t\tclass: this._config.classNames.selectedLabel,\n\t\t\t\t\ttextContent: _option.name\n\t\t\t\t});\n\n\t\t\t\tconst remove = new Element(\"span\", {\n\t\t\t\t\tclass: `${this._config.classNames.remove}`,\n\t\t\t\t\tvalue: _option.id\n\t\t\t\t});\n\n\t\t\t\tremove.addEventListener(\"click\", this._boundUnselectOption);\n\n\t\t\t\tselectedLabel.append(remove.get());\n\t\t\t\tthis._label.append(selectedLabel.get());\n\n\t\t\t\treturn remove.get();\n\t\t\t}\n\t\t});\n\n\t\tif (manual)\n\t\t{\n\t\t\tthis._optionsWrapper.setTop(Number(this._select.getHeight().split(\"px\")[0]) + 5);\n\t\t}\n\n\t\tif (this._config.onChange && manual)\n\t\t{\n\t\t\tthis._config.onChange(this._config.value, this._prepareDataValue());\n\t\t}\n\t}\n\n\t_unselectOption(event)\n\t{\n\t\tconst newValue = [...this._config.value];\n\t\tconst index = newValue.indexOf(event.target.getAttribute(\"data-value\"));\n\n\t\tif (index !== -1)\n\t\t{\n\t\t\tnewValue.splice(index, 1);\n\t\t}\n\n\t\tthis._setValue(newValue, true, true);\n\t}\n\n\t_sortOptions(event)\n\t{\n\t\tthis._options.forEach(_option => {\n\t\t\tif (!_option.get().textContent.toLowerCase().startsWith(event.target.value.toLowerCase()))\n\t\t\t{\n\t\t\t\t_option.addClass(this._config.classNames.optionHidden);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t_option.removeClass(this._config.classNames.optionHidden);\n\t\t});\n\t}\n}\n\nexport default Autocomplete;\n","import Autocomplete from './autocomplete/autocomplete';\nimport { Popup } from 'main.popup';\n\nexport class Toloka\n{\n\t#page = BX.Sender.Page;\n\t#helper = BX.Sender.Helper;\n\t#context;\n\t#actionUri;\n\t#isFrame;\n\t#prettyDateFormat;\n\t#isSaved;\n\t#isRegistered;\n\t#isOutside;\n\t#mess;\n\t#letterTile;\n\t#selectorNode;\n\t#editorNode;\n\t#titleNode;\n\t#loginNode;\n\t#formNode;\n\t#oauthCodeNode;\n\t#filterNode;\n\t#filterData;\n\t#filterId;\n\t#filter;\n\t#isAvailable;\n\t#ajaxAction;\n\t#messageFields = null;\n\t#templateChangeButton;\n\t#buttonsNode;\n\t#templateNameNode;\n\t#templateTypeNode;\n\t#templateIdNode;\n\t#templateData;\n\t#REGION_BY_IP = 'REGION_BY_IP';\n\t#REGION_BY_PHONE = 'REGION_BY_PHONE';\n\n\tconstructor()\n\t{\n\t}\n\n\tstatic create(settings)\n\t{\n\t\tconst self = new Toloka();\n\t\tself.initialize(settings);\n\t\treturn self;\n\t}\n\n\tbindEvents()\n\t{\n\t\tthis._expireInNode.addEventListener('change', this.validateRequiredFields.bind(this));\n\t\tif (BX.Sender.Template && BX.Sender.Template.Selector)\n\t\t{\n\t\t\tconst selector = BX.Sender.Template.Selector;\n\t\t\tBX.addCustomEvent(selector, selector.events.templateSelect, this.onTemplateSelect.bind(this));\n\t\t\tBX.addCustomEvent(selector, selector.events.selectorClose, this.closeTemplateSelector.bind(this));\n\t\t}\n\n\t\tif(this._saveBtn)\n\t\t{\n\t\t\tBX.bind(\n\t\t\t\tthis._saveBtn,\n\t\t\t\t'click',\n\t\t\t\tthis.applyChanges.bind(this)\n\t\t\t);\n\t\t}\n\n\t\tif (this.#templateChangeButton)\n\t\t{\n\t\t\tBX.bind(this.#templateChangeButton, 'click', this.showTemplateSelector.bind(this));\n\t\t}\n\n\t\tif (this.#isSaved)\n\t\t{\n\t\t\ttop.BX.onCustomEvent(top, 'sender-letter-edit-change', [this.letterTile]);\n\t\t\tthis.#page.slider.close();\n\n\t\t\tif (this.#isOutside)\n\t\t\t{\n\t\t\t\tBX.UI.Notification.Center.notify({\n\t\t\t\t\tcontent: this.#mess.outsideSaveSuccess,\n\t\t\t\t\tautoHideDelay: 5000\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tthis.initWidget();\n\n\t\tconst filter = this.getFilter();\n\t\tfilter.getAddPresetButton().style.display = 'none';\n\n\t\tfilter.getPreset().getPresets().forEach(preset => {\n\t\t\tpreset.style.display = 'none';\n\t\t})\n\n\t\tBX.bind(filter.getResetButton(), 'click', this.reInitAddressWidget.bind(this));\n\n\t\tconst clearFilterBtn = document.querySelector('.main-ui-delete');\n\t\tBX.bind(clearFilterBtn, 'click', this.reInitAddressWidget.bind(this));\n\t}\n\n\tinitialize(params)\n\t{\n\t\tthis.#context = BX(params.containerId);\n\t\tthis.#filterData = [];\n\t\tthis.#filterData[this.#REGION_BY_IP] = {\n\t\t\tregion: []\n\t\t};\n\t\tthis.#filterData[this.#REGION_BY_PHONE] = {\n\t\t\tregion: []\n\t\t};\n\n\t\tthis.#filterId = 'toloka-filter-connector';\n\t\tthis.#filterNode = document.getElementById(`${this.#filterId}_search_container`);\n\t\tthis.#filter = this.getFilter();\n\t\tthis.#templateChangeButton = BX('SENDER_TOLOKA_BUTTON_CHANGE');\n\t\tthis.#helper.changeDisplay(this.#templateChangeButton, false);\n\n\t\tthis.#actionUri = params.actionUri;\n\t\tthis.#ajaxAction = new BX.AjaxAction(this.#actionUri);\n\t\tthis.#isFrame = params.isFrame || false;\n\t\tthis.#prettyDateFormat = params.prettyDateFormat;\n\t\tthis.#isSaved = params.isSaved || false;\n\t\tthis.#isRegistered = params.isRegistered || false;\n\t\tthis.#isOutside = params.isOutside || false;\n\t\tthis.#isAvailable = params.isAvailable || true;\n\t\tthis.#mess = params.mess;\n\t\tthis.#letterTile = params.letterTile || {};\n\t\tthis.#templateData = [];\n\t\tthis.#messageFields = this.objectKeysToLowerCase(JSON.parse(params.preset));\n\t\tthis.optionData = [];\n\n\t\tthis.prepareNodes();\n\t\tthis.buildDispatchNodes();\n\n\t\tthis._filterNode = [];\n\t\tthis._regionInput = [];\n\t\tthis._autocomplete = [];\n\t\tthis.bindEvents();\n\n\t\tthis.#helper.titleEditor.init({\n\t\t\tdataNode: this.#titleNode,\n\t\t\tdisabled: false,\n\t\t\tdefaultTitle: this.getPatternTitle(this.#mess.name)\n\t\t});\n\n\t\tthis.#page.initButtons();\n\n\t\tif (this.isMSBrowser())\n\t\t{\n\t\t\tthis.#context.classList.add('bx-sender-letter-ms-ie');\n\t\t}\n\n\t\tif (!this.#isRegistered)\n\t\t{\n\t\t\tthis.#loginNode.style = '';\n\t\t\tthis.#formNode.style = 'display:none;';\n\t\t}\n\t}\n\n\tprepareNodes()\n\t{\n\t\tthis.#selectorNode = this.#helper.getNode('template-selector', this.#context);\n\t\tthis.#editorNode = this.#helper.getNode('editor', this.#context);\n\t\tthis.#titleNode = this.#helper.getNode('title', this.#context);\n\t\tthis.#loginNode = this.#helper.getNode('login', this.#context);\n\t\tthis.#formNode = this.#helper.getNode('sender-toloka-form', this.#context);\n\t\tthis.#oauthCodeNode = this.#helper.getNode('toloka-oauth-code', this.#context);\n\n\t\tthis.#buttonsNode = this.#helper.getNode('letter-buttons', this.#context);\n\t\tthis.#templateNameNode = this.#helper.getNode('template-name', this.#editorNode);\n\t\tthis.#templateTypeNode = this.#helper.getNode('template-type', this.#editorNode);\n\t\tthis.#templateIdNode = this.#helper.getNode('template-id', this.#editorNode);\n\n\t\tthis._projectNode = document.getElementById('CONFIGURATION_PROJECT_ID');\n\t\tthis._poolNode = document.getElementById('CONFIGURATION_POOL_ID');\n\t\tthis._taskSuiteNode = document.getElementById('CONFIGURATION_TASK_SUITE_ID');\n\t\tthis._descriptionNode = document.getElementById('CONFIGURATION_DESCRIPTION');\n\t\tthis._instructionNode = document.getElementById('CONFIGURATION_INSTRUCTION');\n\t\tthis._tasksNode = document.getElementById('CONFIGURATION_TASKS');\n\t\tthis._overlapNode = document.getElementById('CONFIGURATION_OVERLAP');\n\t\tthis._adultContentNode = document.getElementById('CONFIGURATION_ADULT_CONTENT');\n\t\tthis._priceNode = document.getElementById('CONFIGURATION_PRICE');\n\t\tthis._expireInNode = document.getElementById('CONFIGURATION_EXPIRE_IN');\n\t\tthis._saveBtn = document.getElementById('ui-button-panel-save');\n\n\n\t\tthis._projectNode.parentNode.parentNode.style = 'display:none';\n\t\tthis._poolNode.parentNode.parentNode.style = 'display:none';\n\t\tthis._taskSuiteNode.parentNode.parentNode.style = 'display:none';\n\t}\n\n\treInitAddressWidget()\n\t{\n\t\tif(this._filterNode[this.#REGION_BY_IP] && this._autocomplete[this.#REGION_BY_IP])\n\t\t{\n\t\t\tthis._autocomplete[this.#REGION_BY_IP].removeAutocompleteNode();\n\t\t\tthis._autocomplete[this.#REGION_BY_IP] = null;\n\t\t}\n\n\t\tif(this._filterNode[this.#REGION_BY_PHONE] && this._autocomplete[this.#REGION_BY_PHONE])\n\t\t{\n\t\t\tthis._autocomplete[this.#REGION_BY_PHONE].removeAutocompleteNode();\n\t\t\tthis._autocomplete[this.#REGION_BY_PHONE] = null;\n\t\t}\n\n\t\tthis.initWidget();\n\t}\n\n\tinitWidget()\n\t{\n\t\tif (this.#filterNode)\n\t\t{\n\t\t\tBX.bind(\n\t\t\t\tthis.#filterNode,\n\t\t\t\t'click',\n\t\t\t\tthis.initAddressWidget.bind(this, this.#REGION_BY_IP)\n\t\t\t);\n\t\t\tBX.bind(\n\t\t\t\tthis.#filterNode,\n\t\t\t\t'click',\n\t\t\t\tthis.initAddressWidget.bind(this, this.#REGION_BY_PHONE)\n\t\t\t);\n\t\t\tBX.bind(\n\t\t\t\tthis.getFilter().getPopup().popupContainer,\n\t\t\t\t'click',\n\t\t\t\tthis.initAddressWidget.bind(this, this.#REGION_BY_IP)\n\t\t\t);\n\t\t\tBX.bind(\n\t\t\t\tthis.getFilter().getPopup().popupContainer,\n\t\t\t\t'click',\n\t\t\t\tthis.initAddressWidget.bind(this, this.#REGION_BY_PHONE)\n\t\t\t);\n\t\t}\n\t}\n\n\tinitAddressWidget(name, event)\n\t{\n\t\tif(event.target && this.getFilter().getSearch().isSquareRemoveButton(event.target))\n\t\t{\n\t\t\tthis.reInitAddressWidget();\n\t\t}\n\n\n\t\tthis._filterNode[name] = document.querySelectorAll(`.main-ui-filter-field-container-list > div[data-name=${name}]`)[0];\n\n\t\tif(!this._filterNode[name])\n\t\t{\n\t\t\tif(this._autocomplete[name])\n\t\t\t{\n\t\t\t\tthis._autocomplete[name].removeAutocompleteNode();\n\t\t\t\tthis._autocomplete[this.#REGION_BY_IP] = null;\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._autocomplete[name])\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst self = this;\n\t\tthis.optionData[name] = this.optionData[name] || [];\n\n\t\tthis._autocomplete[name] = new Autocomplete(this._filterNode[name], {\n\t\t\toptions: this.optionData[name],\n\t\t\tmultiple: true,\n\t\t\tautocomplete: true,\n\t\t\tonChange: (value, preparedValue) => {\n\t\t\t\tself.#filterData[name] = value;\n\t\t\t\tthis.#filter.getFieldByName(name).ITEMS = preparedValue;\n\t\t\t\tthis.#filter.getFieldByName(name).VALUE = preparedValue;\n\t\t\t}\n\t\t});\n\t\tthis._regionInput[name] = document.querySelectorAll(`input[data-name=autocomplete-${name}]`)[0];\n\n\t\tBX.bind(\n\t\t\tthis._regionInput[name],\n\t\t\t'keyup',\n\t\t\tthis.getLocationList.bind(this, name)\n\t\t);\n\t}\n\n\tregister()\n\t{\n\t\tconst self = this;\n\t\tthis.#ajaxAction.request({\n\t\t\taction: 'registerOAuth',\n\t\t\tonsuccess: (response) => {\n\t\t\t\tself.#loginNode.style = 'display:none;';\n\t\t\t\tself.#formNode.style = '';\n\t\t\t},\n\t\t\tdata: { 'access_code': this.#oauthCodeNode.value }\n\t\t});\n\t}\n\n\tisMSBrowser()\n\t{\n\t\treturn window.navigator.userAgent.match(/(Trident\\/|MSIE|Edge\\/)/) !== null;\n\t}\n\n\tgetPatternTitle(name)\n\t{\n\t\treturn this.#helper.replace(\n\t\t\tthis.#mess.patternTitle,\n\t\t\t{\n\t\t\t\t'name': name,\n\t\t\t\t'date': BX.date.format(this.#prettyDateFormat)\n\t\t\t}\n\t\t);\n\t}\n\n\tonTemplateSelect(template)\n\t{\n\t\tif (this.#templateNameNode)\n\t\t{\n\t\t\tthis.#templateNameNode.textContent = template.name;\n\t\t}\n\t\tif (this.#templateTypeNode)\n\t\t{\n\t\t\tthis.#templateTypeNode.value = template.type;\n\t\t}\n\t\tif (this.#templateIdNode)\n\t\t{\n\t\t\tthis.#templateIdNode.value = template.code;\n\t\t}\n\n\t\tthis.#messageFields = template.messageFields;\n\n\t\tthis.buildDispatchNodes();\n\t\tthis.#titleNode.value = this.getPatternTitle(template.name);\n\n\t\tBX.fireEvent(this.#titleNode, 'change');\n\n\t\tthis.closeTemplateSelector();\n\t\twindow.scrollTo(0, 0);\n\t}\n\n\tbuildDispatchNodes()\n\t{\n\t\tconst self = this;\n\t\tthis.#helper.getNodes('dispatch', this.#context).forEach(node => {\n\t\t\tconst code = node.getAttribute('data-code');\n\t\t\tfor(const field in self.#messageFields)\n\t\t\t{\n\t\t\t\tif(!self.#messageFields.hasOwnProperty(field))\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tconst data = self.#messageFields[field];\n\t\t\t\tif (data.code === code && node.innerHTML.length === 0)\n\t\t\t\t{\n\t\t\t\t\tnode.innerHTML = data.value;\n\t\t\t\t}\n\n\t\t\t\tself.#templateData[data.code] = data.value;\n\t\t\t}\n\t\t});\n\t}\n\n\tcloseTemplateSelector()\n\t{\n\t\tthis.changeDisplayingTemplateSelector(false);\n\t}\n\n\tshowTemplateSelector()\n\t{\n\t\tthis.changeDisplayingTemplateSelector(true);\n\t}\n\n\tchangeDisplayingTemplateSelector(isShow)\n\t{\n\t\tconst classShow = 'bx-sender-letter-show';\n\t\tconst classHide = 'bx-sender-letter-hide';\n\t\tthis.#helper.changeClass(this.#selectorNode, classShow, isShow);\n\t\tthis.#helper.changeClass(this.#selectorNode, classHide, !isShow);\n\n\t\tthis.#helper.changeClass(this.#editorNode, classShow, !isShow);\n\t\tthis.#helper.changeClass(this.#editorNode, classHide, isShow);\n\n\t\tthis.#helper.changeDisplay(this.#templateChangeButton, !isShow);\n\t\tthis.#helper.changeDisplay(this.#buttonsNode, !isShow);\n\n\t\tisShow ? this.#helper.titleEditor.disable() : this.#helper.titleEditor.enable();\n\t}\n\n\tobjectKeysToLowerCase(origObj)\n\t{\n\t\tconst self = this;\n\t\tif(origObj === null)\n\t\t{\n\t\t\treturn origObj;\n\t\t}\n\n\t\treturn Object.keys(origObj).reduce(function(newObj, key) {\n\t\t\tconst val = origObj[key];\n\t\t\tnewObj[key.toLowerCase()] = (typeof val === 'object') ? self.objectKeysToLowerCase(val) : val;\n\t\t\treturn newObj;\n\t\t}, {})\n\t}\n\n\tgetLocationList(name)\n\t{\n\t\tif (this._regionInput[name].value.length < 3)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tthis.usedWords = this.usedWords || [];\n\t\tconst value = this._regionInput[name].value;\n\n\t\tif(this.usedWords.includes(value))\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tthis.usedWords.push(value);\n\n\t\tconst self = this;\n\t\tthis.#ajaxAction.request({\n\t\t\taction: 'getGeoList',\n\t\t\tdata: {\n\t\t\t\tname: value\n\t\t\t},\n\t\t\tonsuccess: response => {\n\t\t\t\tif(!this.optionData[name])\n\t\t\t\t{\n\t\t\t\t\tthis.optionData[name] = [];\n\t\t\t\t}\n\t\t\t\tfor (const value in response)\n\t\t\t\t{\n\t\t\t\t\tconst responseData = response[value];\n\t\t\t\t\tif (typeof responseData === 'object' && 'id' in responseData)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.optionData[name].push(responseData);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (self._autocomplete[name])\n\t\t\t\t{\n\n\t\t\t\t\tthis.optionData[name] = this.optionData[name].reduce((acc, current) => {\n\t\t\t\t\t\tconst x = acc.find(item => item.id === current.id);\n\t\t\t\t\t\tif (!x) {\n\t\t\t\t\t\t\treturn acc.concat([current]);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn acc;\n\t\t\t\t\t\t}\n\t\t\t\t\t}, []);\n\t\t\t\t\tself._autocomplete[name].setOptions(this.optionData[name]);\n\t\t\t\t}\n\n\t\t\t}\n\t\t});\n\n\t}\n\n\tvalidateRequiredFields()\n\t{\n\t\tlet success = true;\n\n\t\t[\n\t\t\tthis._expireInNode,\n\t\t\tthis._priceNode,\n\t\t\tthis._tasksNode\n\t\t].every(element => {\n\t\t\tif(!this.validateField(element))\n\t\t\t{\n\t\t\t\tsuccess = false;\n\t\t\t\treturn false;\n\t\t\t}\n\t\t});\n\n\t\tif(!success)\n\t\t{\n\t\t\tthis.removeLoader();\n\t\t}\n\t\treturn success;\n\t}\n\n\tremoveLoader()\n\t{\n\t\tthis._saveBtn.classList.remove(\"ui-btn-wait\");\n\t}\n\n\tvalidateField(field)\n\t{\n\t\tif(!this._validatorPopup)\n\t\t{\n\t\t\tthis._validatorPopup = new Popup({\n\t\t\t\tid: \"sender-toloka-validator\",\n\t\t\t\tcontent: `${this.#mess.required}`,\n\t\t\t});\n\t\t}\n\n\t\tif(!field.value)\n\t\t{\n\t\t\tthis._validatorPopup.setBindElement(field);\n\t\t\tthis._validatorPopup.show();\n\t\t\tfield.classList.add(\"bx-sender-form-control-danger\");\n\t\t\tfield.scrollIntoView();\n\t\t\treturn false\n\t\t}\n\t\tthis._validatorPopup.close();\n\n\t\tfield.classList.remove(\"bx-sender-form-control-danger\");\n\t\treturn true;\n\t}\n\n\tcreateProject()\n\t{\n\t\tif(!this.validateRequiredFields())\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tconst input_key = Object.keys(this.#templateData['INPUT_VALUE'])[0];\n\t\tconst output_key = Object.keys(this.#templateData['OUTPUT_VALUE'])[0];\n\t\tthis.#ajaxAction.request({\n\t\t\taction: 'createProject',\n\t\t\tdata: {\n\t\t\t\tid: this._projectNode.value,\n\t\t\t\tname: this.#titleNode.value,\n\t\t\t\tdescription: this._descriptionNode.value,\n\t\t\t\tinstruction: this._instructionNode.value,\n\t\t\t\tinput_type: this.#templateData['INPUT_VALUE'][input_key],\n\t\t\t\tinput_identificator: input_key,\n\t\t\t\toutput_type: this.#templateData['OUTPUT_VALUE'][output_key],\n\t\t\t\toutput_identificator: output_key,\n\t\t\t\tmarkup: this.#templateData['PRESET'].template,\n\t\t\t\tscript: this.#templateData['PRESET'].js,\n\t\t\t\tstyles: this.#templateData['PRESET'].css\n\t\t\t},\n\t\t\tonsuccess: response => {\n\t\t\t\tthis._projectNode.value = response.id;\n\t\t\t\tthis.createPool(response.id);\n\t\t\t},\n\t\t\tonfailure: response => {\n\t\t\t\tthis.removeLoader();\n\t\t\t}\n\t\t});\n\t}\n\n\tcreatePool(projectId)\n\t{\n\t\tconst input_key = Object.keys(this.#templateData['INPUT_VALUE'])[0]\n\t\tthis.#ajaxAction.request({\n\t\t\taction: 'createPool',\n\t\t\tdata: {\n\t\t\t\tid: this._poolNode.value,\n\t\t\t\ttask_suite_id: this._taskSuiteNode.value,\n\t\t\t\tproject_id: projectId,\n\t\t\t\tprivate_name: this.#titleNode.value,\n\t\t\t\tpublic_description: this._descriptionNode.value,\n\t\t\t\tmay_contain_adult_content: this._adultContentNode.checked,\n\t\t\t\treward_per_assignment: this._priceNode.value,\n\t\t\t\twill_expire: this._expireInNode.value,\n\t\t\t\toverlap: this._overlapNode.value,\n\t\t\t\ttasks: this._tasksNode.value,\n\t\t\t\tidentificator: input_key,\n\t\t\t\tfilter: this.#filterData\n\t\t\t},\n\t\t\tonsuccess: response => {\n\t\t\t\tthis._poolNode.value = response.pool_id;\n\t\t\t\tthis._taskSuiteNode.value = response.id;\n\n\t\t\t\tconst form = this.#context.getElementsByTagName('form');\n\n\t\t\t\tif (form && form[0])\n\t\t\t\t{\n\t\t\t\t\tform[0].appendChild(BX.create('input', {\n\t\t\t\t\t\tattrs: {\n\t\t\t\t\t\t\ttype: \"hidden\",\n\t\t\t\t\t\t\tname: \"apply\",\n\t\t\t\t\t\t\tvalue: \"Y\"\n\t\t\t\t\t\t}\n\t\t\t\t\t}));\n\n\t\t\t\t\tform[0].submit();\n\t\t\t\t}\n\t\t\t},\n\t\t\tonfailure: response => {\n\t\t\t\tthis.removeLoader();\n\t\t\t}\n\t\t});\n\t}\n\n\tapplyChanges(event)\n\t{\n\t\tif (!this.#isAvailable)\n\t\t{\n\t\t\tBX.UI.InfoHelper.show('limit_crm_marketing_toloka');\n\t\t\treturn;\n\t\t}\n\n\t\tthis.createProject();\n\t}\n\n\tgetFilter()\n\t{\n\t\tconst filter = BX.Main.filterManager.getById(this.#filterId);\n\t\tif (!filter || !(filter instanceof BX.Main.Filter))\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\treturn filter;\n\t}\n}"],"names":["allowedAttributes","value","name","disabled","class","type","Element","element","attributes","i18n","_node","HTMLElement","document","createElement","_config","_setAttributes","textContent","_setTextContent","appendChild","className","classList","add","remove","toggle","callback","addEventListener","removeEventListener","text","window","getComputedStyle","height","width","top","style","focus","key","_setAttribute","setAttribute","getAttribute","CLASSES","select","dropdownShown","multiselect","label","placeholder","dropdown","option","optionDisabled","autocompleteInput","selectedLabel","selectedOption","placeholderHidden","optionHidden","Autocomplete","config","classNames","disabledOptions","_state","opened","_icons","_holderElement","_boundHandleClick","_handleClick","bind","_boundUnselectOption","_unselectOption","_boundSortOptions","_sortOptions","_body","body","_create","_setValue","data","options","_options","_generateOptions","BX","_autocomplete","get","map","_option","multiple","_element","querySelector","_parent","selector","querySelectorAll","dataset","selectClone","cloneNode","removeChild","_select","_label","_optionsWrapper","addClass","append","deleteButton","parentNode","length","reset","_placeholder","_popup","Popup","id","Math","random","bindElement","zIndex","maxHeight","setContent","autocomplete","preOption","push","String","event","stopPropagation","target","find","undefined","close","removeClass","icon","show","dataValue","forEach","_value","toString","NAME","VALUE","JSON","stringify","manual","unselected","indexOf","optionNode","_selectOptions","_prepareDataValue","setText","_selectOption","_selectedOption","onChange","setTop","Number","getHeight","split","newValue","index","splice","toLowerCase","startsWith","Toloka","Sender","Page","Helper","_expireInNode","validateRequiredFields","Template","Selector","addCustomEvent","events","templateSelect","onTemplateSelect","selectorClose","closeTemplateSelector","_saveBtn","applyChanges","showTemplateSelector","onCustomEvent","letterTile","slider","UI","Notification","Center","notify","content","outsideSaveSuccess","autoHideDelay","initWidget","filter","getFilter","getAddPresetButton","display","getPreset","getPresets","preset","getResetButton","reInitAddressWidget","clearFilterBtn","params","containerId","region","getElementById","changeDisplay","actionUri","AjaxAction","isFrame","prettyDateFormat","isSaved","isRegistered","isOutside","isAvailable","mess","objectKeysToLowerCase","parse","optionData","prepareNodes","buildDispatchNodes","_filterNode","_regionInput","bindEvents","titleEditor","init","dataNode","defaultTitle","getPatternTitle","initButtons","isMSBrowser","getNode","_projectNode","_poolNode","_taskSuiteNode","_descriptionNode","_instructionNode","_tasksNode","_overlapNode","_adultContentNode","_priceNode","removeAutocompleteNode","initAddressWidget","getPopup","popupContainer","getSearch","isSquareRemoveButton","self","preparedValue","getFieldByName","ITEMS","getLocationList","request","action","onsuccess","response","navigator","userAgent","match","replace","patternTitle","date","format","template","code","messageFields","fireEvent","scrollTo","getNodes","node","field","hasOwnProperty","innerHTML","changeDisplayingTemplateSelector","isShow","classShow","classHide","changeClass","disable","enable","origObj","Object","keys","reduce","newObj","val","usedWords","includes","responseData","acc","current","x","item","concat","setOptions","success","every","validateField","removeLoader","_validatorPopup","required","setBindElement","scrollIntoView","input_key","output_key","description","instruction","input_type","input_identificator","output_type","output_identificator","markup","script","js","styles","css","createPool","onfailure","projectId","task_suite_id","project_id","private_name","public_description","may_contain_adult_content","checked","reward_per_assignment","will_expire","overlap","tasks","identificator","pool_id","form","getElementsByTagName","create","attrs","submit","InfoHelper","createProject","Main","filterManager","getById","Filter","settings","initialize"],"mappings":"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"}