this.BX=this.BX||{};(function(e,t,n){"use strict";function r(){var e=babelHelpers.taggedTemplateLiteral(['<div class="sender-user-error-handler-text">\n\t\t\t',"\n\t\t\t<br>\n\t\t\t","\n\t\t\t</div>"]);r=function t(){return e};return e}var o=function(){function e(){babelHelpers.classCallCheck(this,e)}babelHelpers.createClass(e,[{key:"onError",value:function e(n,r,o,i){var a=this.getHandlers(o,i);if(a.hasOwnProperty(n)&&t.Type.isFunction(a[n])){a[n].apply(this,[r])}}},{key:"getHandlers",value:function e(t,n,r){return{WRONG_EMAIL_FROM:this.getWrongEmailFromHandler.bind(this,t,n,r),FEATURE_NOT_AVAILABLE:this.getFeatureUnavailableHandler.bind(this,t,n,r),NEED_ACCEPT_AGREEMENT:this.needAcceptAgreementHandler.bind(this,t,n,r)}}},{key:"getWrongEmailFromHandler",value:function e(n,o,i,a){var s=this;if(i){Object.assign(a,i)}this.oncloseCalbackActive=true;if(!this.wrongEmailFromPopup){this.wrongEmailFromPopup=BX.PopupWindowManager.create({id:"sender_user_error_wrongEmailFrom",autoHide:true,lightShadow:true,closeByEsc:true,overlay:{backgroundColor:"black",opacity:500},events:{onPopupClose:function e(){if(s.oncloseCalbackActive&&t.Type.isFunction(o)){o(a)}}}})}this.wrongEmailFromPopup.setContent(t.Tag.render(r(),t.Loc.getMessage("SENDER_ERROR_HANDLER_WRONG_FROM_EMAIL_TITLE"),t.Loc.getMessage("SENDER_ERROR_HANDLER_WRONG_FROM_EMAIL_MESSAGE")));this.wrongEmailFromPopup.setButtons([new BX.UI.Button({text:t.Loc.getMessage("SENDER_ERROR_HANDLER_WRONG_FROM_EMAIL_EDIT_EMAIL"),color:BX.UI.Button.Color.SUCCESS,onclick:function e(){location.href=a.editUrl;s.oncloseCalbackActive=false;s.wrongEmailFromPopup.close()}}),new BX.UI.Button({text:t.Loc.getMessage("SENDER_ERROR_HANDLER_WRONG_FROM_EMAIL_CANCEL"),color:BX.UI.Button.Color.LINK,onclick:function e(){s.wrongEmailFromPopup.close()}})]);this.wrongEmailFromPopup.show()}},{key:"getFeatureUnavailableHandler",value:function e(t,n,r,o){if(r){Object.assign(o,r)}if(BX.Sender.B24License){BX.Sender.B24License.showPopup("Ad")}n(o)}},{key:"needAcceptAgreementHandler",value:function e(r,o,i,a){if(i){Object.assign(a,i)}t.Runtime.loadExtension("sender_agreement").then(function(){n.EventEmitter.subscribe("BX.Sender.Agreement:onAccept",function(){r()});BX.Sender.Agreement.isAccepted=false;BX.Sender.Agreement.showPopup()})}}]);return e}();e.ErrorHandler=o})(this.BX.Sender=this.BX.Sender||{},BX,BX.Event);
//# sourceMappingURL=error_handler.bundle.map.js