(function(){function t(){function t(t){this.editor=t;this.listLoaded=false;this.mailblocks=this.editor.config.mailblocks;this.HandleList();this.Init()}t.prototype={Init:function(){BX.addCustomEvent(this.editor,"OnApplySiteTemplate",BX.proxy(this.OnTemplateChanged,this))},GetList:function(){return this.mailblocks},HandleList:function(){var t,e=this.GetList().items;if(e){for(t in e){if(e.hasOwnProperty(t)){e[t].key=e[t].path.replace("/",",")}}}},ReloadList:function(t){},FetchPlainListOfCategories:function(t,e,i){var s,o=t.length;for(s=0;s<o;s++){i.push({level:e,key:t[s].key,section:t[s].section});if(t[s].children&&t[s].children.length>0){this.FetchPlainListOfCategories(t[s].children,e+1,i)}}},OnTemplateChanged:function(t){this.ReloadList(false)}};function e(t){e.superclass.constructor.apply(this,arguments);this.id="mailblocks";this.mailblocks=this.editor.config.mailblocks;this.templateId=this.editor.templateId;this.title=BX.message("BXEdMailBlocksTitle");this.searchPlaceholder=BX.message("BXEdMailBlocksSearchPlaceHolder");this.uniqueId="taskbar_"+this.editor.id+"_"+this.id;this.Init()}BX.extend(e,window.BXHtmlEditor.Taskbar);e.prototype.Init=function(){this.BuildSceleton();if(this.mailblocks){this.BuildTree(this.mailblocks.groups,this.mailblocks.items)}var t=this;t.editor.phpParser.AddBxNode("mailblock_icon",{Parse:function(t){return t.code||""}})};e.prototype.GetMenuItems=function(){var t=this;var e=[{text:BX.message("RefreshTaskbar"),title:BX.message("RefreshTaskbar"),className:"",onclick:function(){t.editor.snippets.ReloadList(true);BX.PopupMenu.destroy(t.uniqueId+"_menu")}}];return e};e.prototype.HandleElementEx=function(t,e,i){this.editor.SetBxTag(e,{tag:"mailblock_icon",params:i});t.title=i.description||i.title};e.prototype.BuildTree=function(t,i){e.superclass.BuildTree.apply(this,arguments);if((!t||t.length==0)&&(!i||i.length==0)){this.pTreeCont.appendChild(BX.create("DIV",{props:{className:"bxhtmled-no-snip"},text:BX.message("BXEdSnipNoSnippets")}))}};window.BXHtmlEditor.MailBlocksControl=e;window.BXHtmlEditor.BXEditorMailBlocks=t}if(window.BXHtmlEditor&&window.BXHtmlEditor.dialogs)t();else BX.addCustomEvent(window,"OnEditorBaseControlsDefined",t)})();BX.ready(function(){function t(e,i){t.superclass.constructor.apply(this,arguments);this.id="placeholder_selector";this.title=BX.message("BXEdPlaceHolderSelectorTitle");this.action="insertHTML";this.zIndex=3008;this.placeHolderList=[];e.On("PlaceHolderSelectorListCreate",[this]);this.disabledForTextarea=false;this.arValues=[];for(var s in this.placeHolderList){var o=this.placeHolderList[s];o.value="#"+o.CODE+"#";this.arValues.push({id:o.CODE,name:o.NAME,topName:BX.message("BXEdPlaceHolderSelectorTitle"),title:o.value+" - "+o.DESC,className:"",style:"",action:"insertHTML",value:o.value})}this.Create();this.pCont.innerHTML=BX.message("BXEdPlaceHolderSelectorTitle");if(i){i.appendChild(this.GetCont())}}BX.extend(t,window.BXHtmlEditor.DropDownList);window.BXHtmlEditor.Controls["placeholder_selector"]=t});
//# sourceMappingURL=editor_mailblock.map.js