(function(){BX.namespace("BX.Sender");if(BX.Sender.CampaignList){return}var t=BX.Sender.Page;var i=BX.Sender.Helper;function e(){}e.prototype.init=function(i){this.presets=i.presets||[];this.gridId=i.gridId;this.actionUri=i.actionUri;this.pathToEdit=i.pathToEdit;this.pathToAdd=i.pathToAdd;this.mess=i.mess;this.buttonAdd=BX("SENDER_BUTTON_ADD");if(this.buttonAdd){var e=this.presets.map(function(t){var i=BX.util.htmlspecialchars(t.DESC);return{id:t.CODE,html:t.NAME+'<span data-hint="'+i+'"></span>',onclick:this.onMenuItemClick.bind(this,t)}},this);this.initMenuAdd([{id:"manually",text:this.mess.manually,onclick:t.open.bind(t,this.pathToAdd)},{delimiter:true}].concat(e))}this.ajaxAction=new BX.AjaxAction(this.actionUri);t.initButtons()};e.prototype.activate=function(t){this.doAction("activate",t)};e.prototype.deactivate=function(t){this.doAction("deactivate",t)};e.prototype.remove=function(t){this.doAction("remove",t)};e.prototype.createUsingPreset=function(t){this.doAction("createUsingPreset",null,null,{code:t})};e.prototype.removeSelected=function(){var t=BX.Main.gridManager.getById(this.gridId);if(!t||!t.instance){return}this.doAction("removeList",t.instance.getRows().getSelectedIds())};e.prototype.doAction=function(i,e,n,o){var s=this.gridId;o=o||{};o.id=e;t.changeGridLoaderShowing(s,true);var r=this;this.ajaxAction.request({action:i,onsuccess:function(i){t.reloadGrid(s);if(n){n.apply(r,[i])}},onfailure:function(){t.reloadGrid(s)},data:o})};e.prototype.onMenuItemClick=function(t){this.createUsingPreset(t.CODE);this.popupMenu.close()};e.prototype.initMenuAdd=function(t){if(this.popupMenu){this.popupMenu.show();return}this.popupMenu=BX.PopupMenu.create("sender-letter-list",this.buttonAdd,t,{autoHide:true,autoClose:true});var e=this.popupMenu.getPopupWindow().getPopupContainer();i.hint.init(e);BX.bind(this.buttonAdd,"click",this.popupMenu.show.bind(this.popupMenu))};BX.Sender.CampaignList=new e})(window);
//# sourceMappingURL=script.map.js