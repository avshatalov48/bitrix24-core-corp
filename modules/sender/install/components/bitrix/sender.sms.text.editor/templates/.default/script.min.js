(function(t){BX.namespace("BX.Sender.SMS");if(BX.Sender.SMS.TextEditor){return}var e=BX.Sender.Helper;function n(){}n.prototype.initPanelToolsButtons=function(){if(this.isAITextAvailable){const t=this.context.querySelector('[data-bx-sms-panel-tools-button="ai-text"]');t.addEventListener("click",(()=>{const t=new BX.AI.Picker({moduleId:"sender",contextId:this.AITextContextId,analyticLabel:"sender_sms_ai_text",history:true,onSelect:t=>{const e=t.data;this.input.value=this.input.value+e},onTariffRestriction:()=>{}});t.setLangSpace(BX.AI.Picker.LangSpace.text);t.text()}))}};n.prototype.init=function(t){this.context=BX(t.containerId);this.mess=t.mess;this.AITextContextId=t.AITextContextId;this.isAITextAvailable=t.isAITextAvailable==="Y";this.input=e.getNode("input",this.context);this.counter=e.getNode("counter",this.context);this.num=e.getNode("num",this.context);this.sms=e.getNode("sms",this.context);BX.bind(this.input,"bxchange",this.onChange.bind(this));BX.bind(this.input,"input",this.onChange.bind(this));this.initPanelToolsButtons();this.refresh()};n.prototype.onChange=function(){this.refresh()};n.prototype.refresh=function(){var t=this.input.value.length;var e=this.hasMultiBites();var n=e?70:160;var i=n;if(t>n){i=e?67:153}this.sms.textContent=Math.ceil(t/i);this.num.textContent=n;this.counter.textContent=t};n.prototype.hasMultiBites=function(){var t=this.input.value;if(t.length===0){return false}for(var e=0;e<t.length;e++){if(t.charCodeAt(e)>128){return true}}return false};BX.Sender.SMS.TextEditor=new n})(window);
//# sourceMappingURL=script.map.js