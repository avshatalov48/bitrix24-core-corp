(function(e){BX.namespace("BX.Sender");if(BX.Sender.Audio){return}function t(){}t.prototype.init=function(e){this.id=e.id;this.fileInputId=e.inputId;this.fileInput=BX["MFInput"]?BX.MFInput.get(e.controlId):null;this.playerNode=BX(e.playerId);this.player=BX.Fileman.PlayerManager.getPlayerById(e.playerId);this.containerNode=document.querySelector('[data-bx-field="'+this.id+'"]');this.preudoValueNode=null;if(BX.Sender.Template&&BX.Sender.Template.Selector){var t=BX.Sender.Template.Selector;BX.addCustomEvent(t,t.events.templateSelect,this.onTemplateSelect.bind(this))}if(this.fileInput){BX.addCustomEvent(this.fileInput,"onDeleteFile",this.onDeleteFile.bind(this));BX.addCustomEvent(this.fileInput,"onUploadDone",this.onUploadDone.bind(this))}if(!e.value||!e.value.length){this.hidePlayer()}else if(e.useTemplateValue){this.setValue(e.value)}};t.prototype.onTemplateSelect=function(e){e.messageFields.forEach(function(t){if(t.code!=="AUDIO_FILE"){return}this.fileInput.clear();this.setValue(e.code);this.showPlayer();this.setPlayerSource(t.value)},this)};t.prototype.onDeleteFile=function(){this.hidePlayer()};t.prototype.onUploadDone=function(e,t){this.clearValue();this.showPlayer();this.setPlayerSource(e.url)};t.prototype.setPlayerSource=function(e){if(!this.player)return;this.player.setSource(e)};t.prototype.showPlayer=function(){BX.show(this.playerNode)};t.prototype.hidePlayer=function(){BX.hide(this.playerNode)};t.prototype.setValue=function(e){if(!this.preudoValueNode){this.preudoValueNode=BX.create("input",{props:{type:"hidden",name:this.fileInputId,value:e}});BX.append(this.preudoValueNode,this.containerNode)}else{this.preudoValueNode.value=e}};t.prototype.clearValue=function(){if(this.preudoValueNode){BX.remove(this.preudoValueNode);this.preudoValueNode=null}};BX.Sender.Audio=new t})(window);
//# sourceMappingURL=script.map.js