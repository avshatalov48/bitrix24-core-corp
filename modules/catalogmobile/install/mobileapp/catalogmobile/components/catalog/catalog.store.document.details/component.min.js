(()=>{const t=t=>jn.require(t);const{CatalogStoreActivationWizard:e}=t("catalog/store/activation-wizard");const{DetailCardComponent:o}=t("layout/ui/detail-card");const{DocumentType:n}=t("catalog/store/document-type");let c="";const a=BX.componentParameters.get("payload",{});if(a.entityId){c="/shop/documents/details/#ID#/".replace("#ID#",a.entityId)}else if(a.docType){c="/shop/documents/details/0/?DOCUMENT_TYPE=#DOC_TYPE#".replace("#DOC_TYPE#",a.docType)}const s=result.card.tabs.find((t=>t.id==="main"));if(s){s.desktopUrl=c}const r=t=>{const o=t.errors.length>0?t.errors:[{message:"Could not perform action"}];const n=e.openIfNeeded(o);return{errors:o,showErrors:!n}};const i=t=>t&&t.STATUS==="Y";const l=(t,e)=>!t||result.permissions.document[t.DOC_TYPE][e]===true;const d=t=>{switch(t){case n.StoreAdjustment:return"14662772";case n.Arrival:return"14662786";default:return null}};o.create(result.card).setItemActions([{id:"conductDocument",type:"primary",title:BX.message("M_CSDD_ACTION_CONDUCT_DOCUMENT"),onClickCallback:t=>new Promise(((e,o)=>{BX.ajax.runAction("catalogmobile.StoreDocumentDetails.conduct",{json:{entityId:t.ID}}).then((t=>{e(t.data)}),(t=>{o(r(t))})).catch((t=>{o(r(t))}))})),onActiveCallback:t=>l(t,"catalog_store_document_conduct")&&!i(t)}]).renderTo(layout).setAnalyticsProvider((t=>({entity:"store-document",type:t.DOC_TYPE}))).setMenuActionsProvider(((t,e)=>{const{entityModel:o}=t;const n=[];const a=l(o,"catalog_store_document_cancel")&&i(o);if(a){n.push({id:"cancelDocument",sectionCode:"action",onItemSelected:(t,n)=>{const c={id:"cancelDocument"};e.onActionStart(c);BX.ajax.runAction("catalogmobile.StoreDocumentDetails.cancel",{json:{entityId:o.ID}}).then((t=>{e.onActionSuccess(c,t.data)}),(t=>{e.onActionFailure(c,r(t))}))},title:BX.message("M_CSDD_ACTION_CANCEL_DOCUMENT"),iconUrl:"/bitrix/mobileapp/catalogmobile/components/catalog/catalog.store.document.details/images/cancel_document.png"})}n.push({type:UI.Menu.Types.DESKTOP,showHint:false,showTopSeparator:a,data:{qrUrl:c}});const s=d(o.DOC_TYPE);if(s){n.push({type:UI.Menu.Types.HELPDESK,data:{articleCode:s}})}return n}))})();
//# sourceMappingURL=component.map.js