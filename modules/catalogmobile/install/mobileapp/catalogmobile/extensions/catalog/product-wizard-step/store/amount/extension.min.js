jn.define("catalog/product-wizard-step/store/amount",((e,t,s)=>{const{NumberType:i}=e("layout/ui/fields/number");const{SelectType:l}=e("layout/ui/fields/select");const{EntitySelectorType:n}=e("layout/ui/fields/entity-selector");const{DocumentType:o}=e("catalog/store/document-type");class a extends CatalogProductWizardStep{prepareFields(){this.clearFields();const e=this.entity.getDictionaryValues("stores");const t=e.length>0;const s=this.entity.getDictionaryValues("measures");const a=s.find((e=>e.isDefault));const E=this.getDefaultStores(e);const _=this.entity.get("DOCUMENT_TYPE");if(t){const e={AMOUNT:"",MEASURE_CODE:String(a?a.value:"")};if(_===o.Moving||_===o.Deduct){e.STORE_FROM=E}if(_===o.Arrival||_===o.StoreAdjustment||_===o.Moving){e.STORE_TO=E}this.setDefaultValues(e)}this.addCombinedField({id:"AMOUNT",type:i,title:BX.message("WIZARD_FIELD_PRODUCT_AMOUNT"),disabled:!t,placeholder:!t?BX.message("WIZARD_FIELD_ACCESS_DENIED"):null,emptyValue:!t?BX.message("WIZARD_FIELD_ACCESS_DENIED"):null,value:this.entity.get("AMOUNT"),config:{selectionOnFocus:true}},{id:"MEASURE_CODE",type:l,title:BX.message("WIZARD_FIELD_MEASURE_CODE"),disabled:!t,placeholder:!t?BX.message("WIZARD_FIELD_ACCESS_DENIED"):null,emptyValue:!t?BX.message("WIZARD_FIELD_ACCESS_DENIED"):null,value:this.entity.get("MEASURE_CODE"),required:true,showRequired:false,config:{defaultListTitle:BX.message("WIZARD_FIELD_MEASURE_CODE"),items:s}});const r=this.entity.get("STORE_FROM");if(r){this.addField("STORE_FROM",n,_===o.Moving?BX.message("WIZARD_FIELD_PRODUCT_STORE_FROM"):BX.message("WIZARD_FIELD_PRODUCT_STORE"),r?r.id:null,{disabled:!t,placeholder:!t?BX.message("WIZARD_FIELD_ACCESS_DENIED"):null,emptyValue:!t?BX.message("WIZARD_FIELD_ACCESS_DENIED"):null,config:{selectorType:EntitySelectorFactory.Type.STORE,enableCreation:this.hasPermission("catalog_store_modify"),entityList:[r],provider:{options:{useAddressAsTitle:true}}}})}const D=this.entity.get("STORE_TO");if(D){this.addField("STORE_TO",n,_===o.Moving?BX.message("WIZARD_FIELD_PRODUCT_STORE_TO"):BX.message("WIZARD_FIELD_PRODUCT_STORE"),D?D.id:null,{disabled:!t,placeholder:!t?BX.message("WIZARD_FIELD_ACCESS_DENIED"):null,emptyValue:!t?BX.message("WIZARD_FIELD_ACCESS_DENIED"):null,config:{selectorType:EntitySelectorFactory.Type.STORE,enableCreation:this.hasPermission("catalog_store_modify"),entityList:[D],provider:{options:{useAddressAsTitle:true}}}})}}getDefaultStores(e){if(e.length===0){return null}let t=e.find((e=>e.isDefault));if(t){return t}return e[0]}getNextStepButtonText(){return BX.message("WIZARD_STEP_BUTTON_FINISH_TEXT_MSGVER_1")}onChange(e,t,s){super.onChange(e,t,s);if(e==="STORE_FROM"){this.entity.set("STORE_FROM",s?s[0]:null)}else if(e==="STORE_TO"){this.entity.set("STORE_TO",s?s[0]:null)}}onMoveToNextStep(){return super.onMoveToNextStep().then((()=>{BX.postComponentEvent("onCatalogProductWizardFinish",[this.entity.getFields()])}))}}s.exports={StoreCatalogProductAmountStep:a}}));
//# sourceMappingURL=extension.map.js