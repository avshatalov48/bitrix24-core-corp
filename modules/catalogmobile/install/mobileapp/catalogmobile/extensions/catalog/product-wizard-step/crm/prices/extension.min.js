jn.define("catalog/product-wizard-step/crm/prices",((e,t,i)=>{const{Loc:s}=e("loc");const{BooleanType:n}=e("layout/ui/fields/boolean");const{MoneyType:o}=e("layout/ui/fields/money");const{NumberType:a,NumberPrecision:r}=e("layout/ui/fields/number");const{SelectType:l}=e("layout/ui/fields/select");const{BannerButton:_}=e("layout/ui/banners");class u extends CatalogProductWizardStep{prepareFields(){this.clearFields();const e=this.entity.get("DOCUMENT_CURRENCY");const t=this.entity.getDictionaryValues("inventoryControl");const i=this.entity.getDictionaryValues("taxes");const _=BX.prop.getBoolean(i,"isTaxMode",false);const u=BX.prop.getArray(i,"vatRates",[]);const R=BX.prop.getBoolean(i,"vatIncluded",false);const C=_?"":BX.prop.getNumber(i,"defaultVatId",0);const d=this.entity.getDictionaryValues("measures");const c=d.find((e=>e.isDefault));this.setDefaultValues({BASE_PRICE:{amount:"",currency:e},QUANTITY:"",MEASURE_CODE:String(c?c.value:""),VAT_ID:C,VAT_INCLUDED:R});this.addField("BASE_PRICE",o,s.getMessage("CRM_PRODUCT_WIZARD_PRICES_BASE_PRICE"),this.entity.get("BASE_PRICE"),{config:{selectionOnFocus:true}});if(!_){this.addCombinedField({id:"VAT_ID",type:l,title:s.getMessage("CRM_PRODUCT_WIZARD_PRICES_TAX_RATE"),placeholder:"0",value:this.entity.get("VAT_ID"),required:true,showRequired:false,config:{items:u}},{id:"VAT_INCLUDED",type:n,title:s.getMessage("CRM_PRODUCT_WIZARD_PRICES_TAX_INCLUDED"),value:this.entity.get("VAT_INCLUDED"),required:false})}if(t.isQuantityControlEnabled&&!t.isInventoryControlEnabled){this.addCombinedField({id:"QUANTITY",type:a,title:s.getMessage("CRM_PRODUCT_WIZARD_PRICES_QUANTITY"),placeholder:"0",value:this.entity.get("QUANTITY"),config:{selectionOnFocus:true,type:r.INTEGER}},{id:"MEASURE_CODE",type:l,title:s.getMessage("CRM_PRODUCT_WIZARD_PRICES_MEASURE"),value:this.entity.get("MEASURE_CODE"),required:true,showRequired:false,config:{defaultListTitle:s.getMessage("CRM_PRODUCT_WIZARD_PRICES_MEASURE"),items:d}})}}renderFooter(){const e=this.entity.getDictionaryValues("inventoryControl");if(e.isInventoryControlEnabled){return View({style:{marginTop:12}},_({title:s.getMessage("CRM_PRODUCT_WIZARD_PRICES_INVENTORY_CONTROL_TITLE"),description:s.getMessage("CRM_PRODUCT_WIZARD_PRICES_INVENTORY_CONTROL_BODY"),showArrow:false}))}return null}onMoveToNextStep(){return super.onMoveToNextStep().then((()=>this.entity.save())).then((()=>BX.postComponentEvent("onCatalogProductWizardFinish",[this.entity.getFields()])))}getNextStepButtonText(){return s.getMessage("WIZARD_STEP_BUTTON_FINISH_TEXT_MSGVER_1")}}i.exports={CrmProductPricesStep:u}}));
//# sourceMappingURL=extension.map.js