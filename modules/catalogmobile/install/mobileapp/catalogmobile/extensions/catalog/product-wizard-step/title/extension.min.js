jn.define("catalog/product-wizard-step/title",((e,t,o)=>{const s=e("apptheme");const{BarcodeType:i}=e("layout/ui/fields/barcode");const{StringType:n}=e("layout/ui/fields/string");const{FocusManager:r}=e("layout/ui/fields/focus-manager");const{Loc:a}=e("loc");class l extends LayoutComponent{constructor(e){super(e);this.state={sections:[]}}render(){return View({style:CatalogProductWizardStepStyles.footer.container},this.renderSections())}renderSections(){const e=this.state.sections.map((e=>e.title));return View({style:{paddingTop:20},onClick:this.showSectionSelector.bind(this)},Text({style:CatalogProductWizardStepStyles.footer.link,text:a.getMessage("WIZARD_STEP_FOOTER_BIND_TO_SECTION")}),e.length>0?Text({style:{paddingTop:8,fontSize:13,color:s.colors.base4},text:a.getMessage("WIZARD_STEP_FOOTER_SECTION_BINDINGS").replace("#SECTIONS#",e.join(", "))}):null)}showSectionSelector(){const e=EntitySelectorFactory.createByType(EntitySelectorFactory.Type.SECTION,{provider:{options:{iblockId:this.props.iblockId}},createOptions:{enableCreation:true},initSelectedIds:this.state.sections.map((e=>e.id)),events:{onClose:e=>{this.setState({sections:e});this.props.onChangeSection(e)}},widgetParams:{backdrop:{mediumPositionPercent:70,horizontalSwipeAllowed:false}},allowMultipleSelection:false});r.blurFocusedFieldIfHas().then((()=>e.show()))}}class c extends CatalogProductWizardStep{prepareFields(){this.clearFields();const e=this.entity.get("NAME","");this.addField("NAME",n,a.getMessage("WIZARD_FIELD_PRODUCT_NAME"),this.entity.get("NAME",""),{required:true,config:{selectionOnFocus:e===a.getMessage("WIZARD_FIELD_PRODUCT_NEW_NAME")}});this.addField("BARCODE",i,a.getMessage("WIZARD_FIELD_PRODUCT_BARCODE"),this.entity.get("BARCODE",""))}onMoveToNextStep(){return super.onMoveToNextStep().then((()=>this.entity.save()))}renderFooter(){return new l({onChangeSection:e=>{const t=e.map((e=>e.id));this.onChange("SECTION_ID",t.length>0?t[0]:0);this.onChange("SECTION",e.length>0?e[0]:null)},iblockId:this.entity.getIblockId()})}getNextStepButtonText(){return this.options.isFinishStep?a.getMessage("WIZARD_STEP_BUTTON_FINISH_TEXT_MSGVER_1"):super.getNextStepButtonText()}}o.exports={CatalogProductTitleStep:c}}));
//# sourceMappingURL=extension.map.js