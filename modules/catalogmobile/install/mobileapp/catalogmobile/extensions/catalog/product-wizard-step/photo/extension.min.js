jn.define("catalog/product-wizard-step/photo",((e,t,i)=>{const{FileType:o}=e("layout/ui/fields/file");class s extends CatalogProductWizardStep{constructor(e,t){super(e,t);this.isSaving=false}prepareFields(){this.clearFields();this.addField("MORE_PHOTO",o,BX.message("WIZARD_FIELD_PRODUCT_PHOTO"),this.entity.get("MORE_PHOTO",[]),{disabled:!this.hasProductEditPermission(),placeholder:BX.message("WIZARD_FIELD_ACCESS_DENIED"),emptyValue:BX.message("WIZARD_FIELD_ACCESS_DENIED"),multiple:true,config:{buttonType:"primary",mediaType:"image",controller:{entityId:"catalog-product",options:{productId:this.entity.get("ID")}}}})}onMoveToNextStep(){if(this.isSaving){return false}this.isSaving=true;return super.onMoveToNextStep().then((()=>this.waitUntilPhotosLoaded())).then((()=>this.entity.save(true))).then((()=>{this.isSaving=false}))}waitUntilPhotosLoaded(){const e=this.getMorePhotoRef();if(!e){return Promise.resolve()}return e.getValueWhileReady()}getMorePhotoRef(){if(!this.editorRef){return null}return this.editorRef.getFieldRef("MORE_PHOTO")}}i.exports={CatalogProductPhotoStep:s}}));
//# sourceMappingURL=extension.map.js