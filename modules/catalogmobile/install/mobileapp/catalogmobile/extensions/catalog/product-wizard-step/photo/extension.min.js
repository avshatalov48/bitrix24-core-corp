jn.define("catalog/product-wizard-step/photo",((e,t,o)=>{const{FileType:i}=e("layout/ui/fields/file");class r extends CatalogProductWizardStep{prepareFields(){this.clearFields();this.addField("MORE_PHOTO",i,BX.message("WIZARD_FIELD_PRODUCT_PHOTO"),this.entity.get("MORE_PHOTO",[]),{disabled:!this.hasProductEditPermission(),placeholder:BX.message("WIZARD_FIELD_ACCESS_DENIED"),emptyValue:BX.message("WIZARD_FIELD_ACCESS_DENIED"),multiple:true,config:{buttonType:"primary",mediaType:"image",controller:{entityId:"catalog-product",options:{productId:this.entity.get("ID")}}}})}onMoveToNextStep(){return super.onMoveToNextStep().then((()=>this.waitUntilPhotosLoaded())).then((()=>this.entity.save(true)))}waitUntilPhotosLoaded(){const e=this.getMorePhotoRef();if(!e){return Promise.resolve()}return e.getValueWhileReady()}getMorePhotoRef(){if(!this.editorRef){return null}return this.editorRef.getFieldRef("MORE_PHOTO")}}o.exports={CatalogProductPhotoStep:r}}));
//# sourceMappingURL=extension.map.js