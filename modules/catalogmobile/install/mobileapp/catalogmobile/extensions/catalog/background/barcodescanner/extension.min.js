(()=>{include("InAppNotifier");const e="CATALOG_BARCODE_SCANNER";const a=1e4;const t="OpenBarcodeScanner";class n{constructor(){this.barcodeNotificationId=null;this.isBarcodeNotificationVisible=false;this.isBarcodeScannerActive=false;this.handlePullEvents=this.handlePullEvents.bind(this);this.handleBarcodeScannerClosed=this.handleBarcodeScannerClosed.bind(this);BX.addCustomEvent("Catalog:BarcodeScannerComponent:onClose",this.handleBarcodeScannerClosed);BX.addCustomEvent("onPullEvent-catalog",this.handlePullEvents)}handlePullEvents(e,a,n,i){switch(e){case t:this.suggestOpenBarcodeScanner(a);break;default:break}}handleBarcodeScannerClosed(){this.isBarcodeScannerActive=false}suggestOpenBarcodeScanner(e){setTimeout((()=>{this.isBarcodeNotificationVisible=false}),a);this.setBarcodeNotificationId(e.id);if(!this.isBarcodeNotificationVisible&&!this.isBarcodeScannerActive){InAppNotifier.setHandler((()=>this.openBarcodeScanner()));InAppNotifier.showNotification({title:BX.message("CATALOG_BACKGROUND_BARCODE_SCAN_TITLE"),backgroundColor:"#E6000000",message:BX.message("CATALOG_BACKGROUND_BARCODE_SCAN_TEXT"),time:a/1e3});this.isBarcodeNotificationVisible=true}if(this.isBarcodeScannerActive){BX.postComponentEvent("CatalogBarcodeScanner::onSessionIdChanged",[e.id])}}openBarcodeScanner(){this.isBarcodeScannerActive=true;ComponentHelper.openLayout({name:"catalog:catalog.barcode.scanner",canOpenInDefault:true,object:"layout",componentParams:{ID:this.barcodeNotificationId},widgetParams:BarcodeScannerWidget.getWidgetParams()})}setBarcodeNotificationId(e){this.barcodeNotificationId=e;return this}}this.CatalogBarcodeScannerBackground=new n;this.onAppActive=()=>{const a=Application.getLastNotification();if(a&&a.hasOwnProperty("params")){let t=JSON.parse(a.params);if(t&&t.hasOwnProperty("TYPE")&&t.TYPE===e){this.CatalogBarcodeScannerBackground.setBarcodeNotificationId(t.ID||"");this.CatalogBarcodeScannerBackground.openBarcodeScanner()}}};BX.addCustomEvent("onAppActive",this.onAppActive.bind(this));this.onAppActive()})();
//# sourceMappingURL=extension.map.js