jn.define("catalog/store/product-list/services/product-selector-adapter",((e,t,s)=>{const{Loc:i}=e("loc");const{PlanRestriction:r}=e("layout/ui/plan-restriction");class o{constructor({root:e,iblockId:t,restrictedProductTypes:s,basePriceId:i,currency:r,enableCreation:o,onCreate:c,onSelect:a,isCatalogHidden:n,isOnecRestrictedByPlan:l}){this.root=e;this.iblockId=t;this.restrictedProductTypes=s;this.basePriceId=i;this.currency=r;this.enableCreation=o;this.isCatalogHidden=n;this.isOnecRestrictedByPlan=l;const C=()=>{};this.onCreate=c||C;this.onSelect=a||C}openSelector(){const e={};if(this.isCatalogHidden){e.createText=i.getMessage("CATALOG_PRODUCT_SEARCH_IN_1C");e.creatingText=i.getMessage("CATALOG_PRODUCT_SEARCH_IN_1C")}const t={};if(this.isCatalogHidden){t.startTypingWithCreationText=i.getMessage("CATALOG_PRODUCT_SEARCH_IN_1C_HINT_TEXT");t.startTypingText=i.getMessage("CATALOG_PRODUCT_SEARCH_IN_1C_HINT_TEXT");t.searchPlaceholderWithCreation=i.getMessage("CATALOG_PRODUCT_SEARCH_PLACEHOLDER");t.noResultsText=i.getMessage("CATALOG_PRODUCT_SEARCH_IN_1C_NO_RESULTS")}const s=EntitySelectorFactory.createByType(EntitySelectorFactory.Type.PRODUCT,{provider:{options:{iblockId:this.iblockId,restrictedProductTypes:this.restrictedProductTypes,basePriceId:this.basePriceId,currency:this.currency}},allowMultipleSelection:false,closeOnSelect:true,createOptions:{enableCreation:this.enableCreation,handler:e=>{s.close().then((()=>{if(this.isCatalogHidden){this.showExternalCatalogWebBackdrop()}else{this.onCreate(e)}}));return Promise.reject()},...e},searchOptions:t,events:{onWidgetClosed:e=>{if(e&&e.length&&e.length>0){const t=e[0];this.onSelect(t.id)}}},widgetParams:{backdrop:{mediumPositionPercent:70,horizontalSwipeAllowed:false}}});s.show()}showExternalCatalogWebBackdrop(){if(this.isOnecRestrictedByPlan){r.open({title:i.getMessage("CATALOG_PRODUCT_SEARCH_IN_1C")});return Promise.resolve()}qrauth.open({title:i.getMessage("CATALOG_PRODUCT_SEARCH_IN_1C"),hintText:i.getMessage("CATALOG_PRODUCT_SEARCH_IN_1C_HINT_TEXT"),redirectUrl:"/crm/"});return Promise.resolve()}}s.exports={StoreProductSelectorAdapter:o}}));
//# sourceMappingURL=extension.map.js