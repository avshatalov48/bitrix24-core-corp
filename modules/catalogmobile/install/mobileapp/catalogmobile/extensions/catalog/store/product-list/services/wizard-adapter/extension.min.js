jn.define("catalog/store/product-list/services/wizard-adapter",((t,o,e)=>{const{Random:r}=t("utils/random");const{StoreProductRow:s}=t("catalog/store/product-list/model");class i{constructor({root:t,onUpdate:o}){this.root=t;this.isFirstStep=true;const e=()=>{};this.onUpdate=o||e;this.on("onCatalogProductWizardProgress",this.upsertProductFromWizard.bind(this));this.on("onCatalogProductWizardFinish",this.upsertProductFromWizard.bind(this))}upsertProductFromWizard(t){if(!t.ID||!t.NAME||!this.root.isMounted()){return}const o=this.root.getState();const e=t.WIZARD_UNIQID;const r="catalogmobile.StoreDocumentProduct.buildProductModelFromWizard";const i={data:{fields:t,documentId:o.document.id,documentType:o.document.type}};BX.ajax.runAction(r,i).then((t=>{const o=t.data;o.justAdded=true;o.wizardId=e;const r=this.root.getItems();if(this.isFirstStep){const t=new s(o);r.push(t)}else{const t=r.find((t=>t.getField("wizardId")===e));if(t){t.setFields(o)}}this.onUpdate(r,o.id,this.isFirstStep);this.isFirstStep=false})).catch((t=>{this.isFirstStep=false;console.error(t);ErrorNotifier.showError(BX.message("CSPL_UPDATE_TAB_ERROR"))}))}openWizard(t){this.isFirstStep=true;ComponentHelper.openLayout({name:"catalog:catalog.product.wizard",componentParams:{mode:"new",type:"store",entityData:{DOCUMENT_CURRENCY:this.root.getDocumentCurrency(),DOCUMENT_TYPE:this.root.state.document?this.root.state.document.type:"",NAME:t,WIZARD_UNIQID:r.getString()}},widgetParams:{objectName:"layout",title:BX.message("CSPL_MENU_ADD_NEW_PRODUCT_TITLE"),modal:true,backdrop:{horizontalSwipeAllowed:false,bounceEnable:true,showOnTop:true}}})}on(t,o){BX.addCustomEvent(t,o);return this}}e.exports={StoreProductListWizardAdapter:i}}));
//# sourceMappingURL=extension.map.js