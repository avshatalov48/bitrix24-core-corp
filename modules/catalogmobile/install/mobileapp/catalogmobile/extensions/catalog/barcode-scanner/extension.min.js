(()=>{const e=e=>jn.require(e);const t=e("apptheme");const a="/bitrix/mobileapp/catalogmobile/extensions/catalog/barcode-scanner/";class s extends LayoutComponent{constructor(e){super(e);this.layoutWidget=null;this.successOverlay=null}render(){return View({style:{backgroundColor:t.colors.bgSecondary}},CameraView({style:{width:"100%",height:"100%",backgroundColor:t.colors.bgSecondary,borderTopLeftRadius:12,borderTopRightRadius:12},scanTypes:this.getScanTypes(),result:e=>{BX.ajax.runAction("catalog.analytics.sendAnalyticsLabel",{analyticsLabel:"catalog:barcodeScanned"});if(typeof this.props.onBarcodeScanned!=="function"){this.stopScanning();return}this.props.onBarcodeScanned(e,this)},error:e=>console.error(e),ref:e=>{this.cameraRef=e}}),this.renderSuccessOverlay())}close(){this.layoutWidget.close()}startScanning(){this.cameraRef.setScanEnabled(true)}stopScanning(){this.cameraRef.setScanEnabled(false)}showSuccessOverlay(e={}){return this.successOverlay.show(e)}hideSuccessOverlay(){return this.successOverlay.hide()}renderSuccessOverlay(){return new UI.Overlay({type:UI.Overlay.Types.SUCCESS,ref:e=>{this.successOverlay=e}})}getScanTypes(){if(this.props.hasOwnProperty("scanTypes")&&Array.isArray(this.props.scanTypes)){return this.props.scanTypes}return this.getDefaultScanTypes()}getDefaultScanTypes(){return["ean_13","pdf_417","code_39","code_93","code_128","ean_8","ean_13","upc_e","itf","aztec","data_matrix"]}setLayoutWidget(e){this.layoutWidget=e;return this}}class r{static open(e){const{widgetTitle:t,layoutProps:a}=e;const n=r.getWidgetParams();if(t){n.title=t}const o=e.parentWidget||PageManager;o.openWidget("layout",n).then((e=>{const t=new s(a);e.enableNavigationBarBorder(false);e.showComponent(t);t.setLayoutWidget(e)}))}static getWidgetParams(){return{title:BX.message("CATALOG_BARCODE_SCANNER_TITLE2"),backdrop:{mediumPositionPercent:70,horizontalSwipeAllowed:false,navigationBarColor:t.colors.bgSecondary,hideNavigationBar:true}}}}this.BarcodeScanner=s;this.BarcodeScannerWidget=r})();
//# sourceMappingURL=extension.map.js