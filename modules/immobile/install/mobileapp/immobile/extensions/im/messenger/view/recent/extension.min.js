jn.define("im/messenger/view/recent",((e,t,s)=>{const{Loc:i}=jn.require("loc");const{Runtime:n}=jn.require("runtime");const{View:o}=jn.require("im/messenger/view/base");const{EventType:r,FeatureFlag:a}=jn.require("im/messenger/const");const{MessengerParams:l}=jn.require("im/messenger/lib/params");class I extends o{constructor(e={}){e.ui=dialogList;super(e);this._isLoaderShown=false;this.loadNextPageItemId="loadNextPage";this.setCustomEvents([r.recent.createChat,r.recent.readAll,r.recent.loadNextPage]);this.subscribeEvents();this.initTopMenu();this.initSections();this.initChatCreateButton();IntranetInvite.init()}get isLoaderShown(){return this._isLoaderShown}subscribeEvents(){this.ui.on(r.recent.scroll,n.throttle(this.onScroll,50,this));if(a.list.itemWillDisplaySupported){this.ui.on(r.recent.itemWillDisplay,this.onItemWillDisplay.bind(this))}else{this.ui.on(r.recent.scroll,n.debounce(this.onScroll,50,this))}}initTopMenu(){const e=dialogs.createPopupMenu();const t=[{id:"readAll",title:i.getMessage("IMMOBILE_RECENT_VIEW_READ_ALL"),sectionCode:"general",iconName:"read"}];const s=(e,t)=>{if(e==="onItemSelected"&&t.id==="readAll"){this.emitCustomEvent(r.recent.readAll)}};e.setData(t,[{id:"general"}],s);this.setRightButtons([{type:"search",callback:this.showSearchBar.bind(this)},{type:"more",callback:()=>e.show()}])}initSections(){this.setSections([{title:"",id:"call",backgroundColor:"#ffffff",sortItemParams:{order:"desc"}},{title:"",id:"pinned",backgroundColor:"#ffffff",sortItemParams:{order:"desc"}},{title:"",id:"general",backgroundColor:"#ffffff",sortItemParams:{order:"desc"}}])}initChatCreateButton(){const e={type:"plus",callback:this.sendCreateChatEvent.bind(this),icon:"plus",animation:"hide_on_scroll",color:"#60C7EF"};this.setFloatingButton(e)}onItemWillDisplay(e){if(e.id===this.loadNextPageItemId){this.emitCustomEvent(r.recent.loadNextPage)}}onScroll(e){if(e.offset.y>=e.contentSize.height*.8){this.emitCustomEvent(r.recent.loadNextPage)}}setFloatingButton(e){this.ui.setFloatingButton(e)}setRightButtons(e){this.ui.setRightButtons(e)}setSections(e){this.ui.setSections(e)}showSearchBar(){this.ui.showSearchBar()}setItems(e){this.ui.setItems(e)}addItems(e){this.ui.addItems(e,true)}updateItems(e){this.ui.updateItems(e)}updateItem(e,t){this.ui.updateItem(e,t)}removeItem(e){this.ui.removeItem(e)}findItem(e,t){this.ui.findItem(e,t)}stopRefreshing(){this.ui.stopRefreshing()}showLoader(){const e={id:this.loadNextPageItemId,title:i.getMessage("IMMOBILE_DIALOG_LIST_ITEMS_LOADING"),type:"loading",unselectable:true,params:{disableTap:true},sectionCode:"general"};this.addItems([e]);this._isLoaderShown=true}hideLoader(){this.removeItem({id:this.loadNextPageItemId});this._isLoaderShown=false}showWelcomeScreen(){let e;if(l.get("INTRANET_INVITATION_CAN_INVITE",false)){e={upperText:i.getMessage("IMMOBILE_RECENT_VIEW_EMPTY_TEXT_1"),lowerText:i.getMessage("IMMOBILE_RECENT_VIEW_EMPTY_TEXT_INVITE"),iconName:"ws_employees",listener:()=>IntranetInvite.openRegisterSlider({originator:"im.messenger",registerUrl:l.get("INTRANET_INVITATION_REGISTER_URL",""),rootStructureSectionId:l.get("INTRANET_INVITATION_ROOT_STRUCTURE_SECTION_ID",0),adminConfirm:l.get("INTRANET_INVITATION_REGISTER_ADMIN_CONFIRM",false),disableAdminConfirm:l.get("INTRANET_INVITATION_REGISTER_ADMIN_CONFIRM_DISABLE",false),sharingMessage:l.get("INTRANET_INVITATION_REGISTER_SHARING_MESSAGE","")})}}else{e={upperText:i.getMessage("IMMOBILE_RECENT_VIEW_EMPTY_TEXT_1"),lowerText:i.getMessage("IMMOBILE_RECENT_VIEW_EMPTY_TEXT_CREATE"),iconName:"ws_employees",listener:this.sendCreateChatEvent.bind(this)}}e["startChatButton"]={text:i.getMessage("IMMOBILE_RECENT_VIEW_EMPTY_EMPTY_BUTTON"),iconName:"ws_plus"};this.ui.welcomeScreen.show(e)}hideWelcomeScreen(){this.ui.welcomeScreen.hide()}sendCreateChatEvent(){this.emitCustomEvent(r.recent.createChat)}}s.exports={RecentView:I}}));
//# sourceMappingURL=extension.map.js