{"version":3,"sources":["extension.js"],"names":["ChatUploader","init","BX","addCustomEvent","this","listener","bind","userId","componentParameters","get","languageId","database","ReactDatabase","ChatDatabaseName","storage","Application","sharedStorage","restartUploadTasks","taskId","data","fileData","executeBackgroundTaskSuccess","code","text","status","extra","executeBackgroundTaskFailure","event","startsWith","FileUploadEvents","FILE_CREATED","result","file","fileId","id","fileCommit","console","error","removeUploadTaskFromStorage","handleUploadTask","chatId","params","silentMode","messageText","info","ChatBackgroundTasks","addTask","CHAT_ID","UPLOAD_ID","MESSAGE_TEXT","SILENT_MODE","TEMPLATE_ID","FILE_TEMPLATE_ID","fileRemove","rest","callMethod","DISK_ID","eventName","eventData","log","uploadTasks","set","JSON","stringify","FileUploadAgent","FileUploader","deleteTask","getUploadTasksFromStorage","uploadActionsRaw","parse","Object","keys","length","files","values","filter","uploadTask","map","postComponentEvent","hasOwnProperty","resultData","toString","table","ChatTables","diskFileQueue","then","delete","postFileEvent","ChatUploaderEvents","DISK_MESSAGE_ADD_SUCCESS","fabric","Answers","sendCustomEvent","description","DISK_MESSAGE_ADD_FAIL"],"mappings":"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","file":"extension.map.js"}