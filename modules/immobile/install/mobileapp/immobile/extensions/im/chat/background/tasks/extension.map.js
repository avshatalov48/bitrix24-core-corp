{"version":3,"sources":["extension.js"],"names":["BackgroundTasks","constructor","this","tasks","delayedWorkerIds","userId","BX","componentParameters","get","storage","Application","sharedStorage","start","addCustomEvent","taskId","query","extra","delay","addTask","console","info","enqueue","queueType","getTaskQueueType","worker","moveToTheEnd","task","stopQueue","log","length","sending","postSuccessEvent","result","postComponentEvent","postWebEvent","postFailureEvent","code","text","status","executeRest","queries","requestTimeout","rest","callBatch","response","clearTimeout","forEach","key","hasOwnProperty","error","failedTask","getTaskByUid","deleteTask","ex","error_description","data","xhr","setTimeout","abort","currentTask","peek","isTaskAlreadySending","checkExecutionDate","push","nextExecute","date","Date","bind","restQueriesEmpty","restQueries","queryBatch","element","destroy","clearInterval","getTasksFromStorage","rawTasks","JSON","parse","removeTaskFromStorage","filter","set","stringify","foundTask","find","saveTaskToStorage","taskToSave","dateCreateTS","dateExpire","now","getTime","map","type","params","dialogId","toString","ChatBackgroundTasks"],"mappings":"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","file":"extension.map.js"}