(function(){class e{constructor(){this.values={};this.counterTypes=[];this.pushTypes=[];this.providerId="chat";this.providerTitle=BX.message("SE_CHAT_TITLE");this.providerSubtitle=""}getProviderId(){return this.providerId}getProviderTitle(){return this.providerTitle}getProviderSubtitle(){return this.providerSubtitle}getForm(){this.values=Application.storage.getObject("settings.chat",{quoteEnable:true,quoteFromRight:Application.getApiVersion()<31,historyShow:true,autoplayVideo:ChatPerformance.isAutoPlayVideoSupported(),backgroundType:e.BackgroundType.lightGray,nativeDialogEnable:false});const t=[];for(let r in e.BackgroundType){if(e.BackgroundType.hasOwnProperty(r)){t.push({value:e.BackgroundType[r],name:BX.message("SE_CHAT_BACKGROUND_COLOR_"+e.BackgroundType[r])||r})}}let r=null;if(ChatPerformance.isGestureQuoteSupported()){r=FormSection.create("quote",BX.message("SE_CHAT_QUOTE_TITLE")).addItems([FormItem.create("quoteEnable",FormItemType.SWITCH,BX.message("SE_CHAT_QUOTE_ENABLE_TITLE")).setValue(this.values.quoteEnable),FormItem.create("quoteFromRight",FormItemType.SWITCH,BX.message("SE_CHAT_QUOTE_FROM_RIGHT_TITLE")).setValue(this.values.quoteFromRight).setEnabled(!this.values.quoteFromRight||Application.getApiVersion()>=31)])}let a=null;if(Application.getPlatform()==="ios"&&Application.getApiVersion()>=43&&Application.isBeta()){a=FormSection.create("nativeDialog",BX.message("SE_CHAT_NATIVE_DIALOG_TITLE")).addItems([FormItem.create("nativeDialogEnable",FormItemType.SWITCH,BX.message("SE_CHAT_NATIVE_DIALOG_ENABLE_TITLE")).setValue(this.values.nativeDialogEnable)])}return Form.create(this.providerId,this.providerTitle).addSections([FormSection.create("history",BX.message("SE_CHAT_HISTORY_TITLE")).addItems([FormItem.create("historyShow",FormItemType.SWITCH,BX.message("SE_CHAT_HISTORY_SHOW_TITLE")).setValue(this.values.historyShow)]),r,FormSection.create("autoplay",BX.message("SE_CHAT_AUTOPLAY_TITLE")).addItems([FormItem.create("autoplayVideo",FormItemType.SWITCH,BX.message("SE_CHAT_AUTOPLAY_VIDEO_TITLE")).setValue(this.values.autoplayVideo)]),FormSection.create("background",BX.message("SE_CHAT_BACKGROUND_TITLE"),BX.message("SE_CHAT_DESC")).addItems([FormItem.create("backgroundType",FormItemType.SELECTOR,BX.message("SE_CHAT_BACKGROUND_COLOR_TITLE")).setSelectorItems(t).setValue(this.values.backgroundType)]),a])}drawForm(){const e=this.getForm();this.provider.openForm(e.compile(),e.getId())}setFormItemValue(e){let{id:t,value:r}=e;this.values[t]=r;Application.storage.setObject("settings.chat",this.values);return false}setSettingsProvider(e){this.provider=e;return true}onSettingsProviderButtonTap(e){this.drawForm();return true}onSettingsProviderValueChanged(e){this.setFormItemValue({sectionId:e.sectionCode,id:e.id,value:e.value});return true}}e.BackgroundType={lightGray:"LIGHT_GRAY",lightGreen:"LIGHT_GREEN",pink:"PINK",creamy:"CREAMY",dark:"DARK"};this.SettingsChatManager=new e;BX.addCustomEvent("onRegisterProvider",(e=>{if(Application.getApiVersion()<29||!Application.isWebComponentSupported()){return false}class t extends SettingsProvider{onButtonTap(e){super.onValueChanged(e);SettingsChatManager.setSettingsProvider(this);SettingsChatManager.onSettingsProviderButtonTap(e)}onValueChanged(e){super.onValueChanged(e);SettingsChatManager.setSettingsProvider(this);SettingsChatManager.onSettingsProviderValueChanged(e)}}e(new t(SettingsChatManager.getProviderId(),SettingsChatManager.getProviderTitle(),SettingsChatManager.getProviderSubtitle()))}))})();
//# sourceMappingURL=extension.map.js