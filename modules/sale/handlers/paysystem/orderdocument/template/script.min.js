(function(){"use strict";if(!BX.Sale)BX.Sale={};if(BX.Sale.Orderdocument)return;BX.Sale.Orderdocument={init:function(t){this.paysystemBlockNode=BX(t.paysystemBlockId);this.ajaxUrl=t.ajaxUrl;this.paymentId=t.paymentId;this.paySystemId=t.paySystemId;this.template=t.template;this.reload()},reload:function(){var t={sessid:BX.bitrix_sessid(),PAYMENT_ID:this.paymentId,PAYSYSTEM_ID:this.paySystemId,RETURN_URL:this.returnUrl,template:this.template};BX.ajax({method:"POST",dataType:"json",url:this.ajaxUrl,data:t,onsuccess:BX.proxy(function(t){if(t.status==="success"){this.updateTemplateHtml(t.template);if(t.data.hasOwnProperty("pdfUrl")){window.location.href=t.data.pdfUrl}}else if(t.status==="error"){this.showErrorTemplate(t.buyerErrors);BX.onCustomEvent("onPaySystemAjaxError",[t.buyerErrors])}},this),onfailure:BX.proxy(function(){this.showErrorTemplate();BX.onCustomEvent("onPaySystemAjaxError")},this)})},updateTemplateHtml:function(t){BX.html(this.paysystemBlockNode,t)},showErrorTemplate:function(t){var e=[BX.message("SALE_DOCUMENT_HANDLER_ERROR_MESSAGE_HEADER")];if(t){for(var s in t){if(t.hasOwnProperty(s)){e.push(t[s])}}}e.push(BX.message("SALE_DOCUMENT_HANDLER_ERROR_MESSAGE_FOOTER"));var a=BX.create("div",{props:{className:"alert alert-danger"},html:e.join("<br />")});this.paysystemBlockNode.innerHTML="";this.paysystemBlockNode.appendChild(a)}}})();
//# sourceMappingURL=script.map.js