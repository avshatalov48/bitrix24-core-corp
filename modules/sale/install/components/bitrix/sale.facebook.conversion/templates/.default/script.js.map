{"version":3,"file":"script.js","sources":["script.es6.js"],"sourcesContent":["import {Event, Loc, Reflection, Tag} from 'main.core';\nimport {LoginFactory} from 'seo.ads.login';\n\nclass SaleFacebookConversion\n{\n\tconstructor(containerId, options)\n\t{\n\t\tthis.wrapper = document.getElementById(containerId);\n\t\tthis.eventName = options.eventName;\n\t\tthis.facebookBusinessParams = options.facebookBusinessParams;\n\t\tthis.shops = options.shops;\n\t\tthis.conversionDataLabelsText = options.conversionDataLabelsText;\n\t\tthis.title = options.title;\n\n\t\tif (this.facebookBusinessParams.available)\n\t\t{\n\t\t\tthis.layout();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.layoutError();\n\t\t}\n\t}\n\n\tlayout()\n\t{\n\t\tthis.wrapper.innerHTML = '';\n\t\tthis.wrapper.appendChild(this.getTitleLayout());\n\t\tthis.wrapper.appendChild(this.getInformationLayout());\n\n\t\tif (this.facebookBusinessParams.auth && this.facebookBusinessParams.profile)\n\t\t{\n\t\t\tthis.wrapper.appendChild(this.getFacebookAuthConnectedLayout());\n\n\t\t\tif (this.shops)\n\t\t\t{\n\t\t\t\tconst shopsContainer = Tag.render`<div class=\"facebook-conversion-shops-container\"></div>`;\n\t\t\t\tfor (let shopId in this.shops)\n\t\t\t\t{\n\t\t\t\t\tconst paramsContainer = this.getParamsContainerLayout(shopId);\n\t\t\t\t\tconst switcherContainer = this.getSwitcherContainerLayout(shopId, paramsContainer);\n\t\t\t\t\tconst shopContainer = this.getShopContainerLayout(shopId, switcherContainer, paramsContainer);\n\n\t\t\t\t\tshopsContainer.appendChild(shopContainer);\n\t\t\t\t}\n\t\t\t\tthis.wrapper.appendChild(shopsContainer);\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.wrapper.appendChild(this.getFacebookAuthDisconnectedLayout());\n\t\t}\n\t}\n\n\tgetShopContainerLayout(shopId, switcherContainer, paramsContainer)\n\t{\n\t\tconst shopName = this.shops[shopId].name;\n\t\treturn Tag.render`\n\t\t\t<div>\n\t\t\t\t<div class=\"facebook-conversion-shop-container\">\n\t\t\t\t\t<div class=\"facebook-conversion-shop-name\">\n\t\t\t\t\t\t${Tag.safe`${shopName}`}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t${switcherContainer}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t${paramsContainer}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tnotify(message: string)\n\t{\n\t\tBX.UI.Notification.Center.notify({\n\t\t\tcontent: message,\n\t\t\tautoHideDelay: 5000,\n\t\t});\n\t}\n\n\tgetSwitcherContainerLayout(shopId, paramsContainer)\n\t{\n\t\tconst switcherContainer = Tag.render`<span></span>`;\n\t\tconst switcher = new BX.UI.Switcher({\n\t\t\tnode: switcherContainer,\n\t\t\tchecked: this.shops[shopId].enabled === 'Y',\n\t\t});\n\n\t\tswitcher.handlers = {\n\t\t\tchecked: this.changeShopEnabledState.bind(this, shopId, 'N', paramsContainer),\n\t\t\tunchecked: this.changeShopEnabledState.bind(this, shopId, 'Y', paramsContainer),\n\t\t};\n\n\t\treturn switcherContainer;\n\t}\n\n\tchangeShopEnabledState(shopId, state, paramsContainer)\n\t{\n\t\tthis.shops[shopId].enabled = state;\n\t\tBX.ajax.runComponentAction('bitrix:sale.facebook.conversion',\n\t\t\t'changeShopEnabledState',\n\t\t\t{\n\t\t\t\tmode: 'class',\n\t\t\t\tdata: {\n\t\t\t\t\teventName: this.eventName,\n\t\t\t\t\tshopId: shopId,\n\t\t\t\t\tenabled: state,\n\t\t\t\t},\n\t\t\t}\n\t\t).then(() => {\n\t\t\tthis.notify(Loc.getMessage('FACEBOOK_CONVERSION_SAVE_SUCCESS'));\n\t\t\tparamsContainer.style.display = state === 'Y' ? 'block' : 'none';\n\t\t}).catch(() => {\n\t\t\tthis.notify(Loc.getMessage('FACEBOOK_CONVERSION_SAVE_ERROR'));\n\t\t});\n\t}\n\n\tgetParamsContainerLayout(shopId)\n\t{\n\t\tconst params = this.shops[shopId].params;\n\t\tconst enabled = this.shops[shopId].enabled;\n\t\tconst paramsContainer = Tag.render`<div class=\"facebook-conversion-params-container\"></div>`;\n\t\tparamsContainer.style.display = enabled === 'Y' ? 'block' : 'none';\n\n\t\tfor (let paramName in params)\n\t\t{\n\t\t\tconst param = params[paramName];\n\t\t\tconst isNeedToDisableParam = paramName === 'id' || paramName === 'ids';\n\n\t\t\tconst checkbox = Tag.render`\n\t\t\t\t<input\n\t\t\t\t\tid=\"${shopId + '_' + paramName}\"\n\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t${param === 'Y' ? 'checked' : ''}\n\t\t\t\t>\n\t\t\t`;\n\t\t\tcheckbox.disabled = isNeedToDisableParam;\n\t\t\tEvent.bind(checkbox, 'change', this.onParamCheckboxChange.bind(this, shopId, paramName));\n\t\t\tparamsContainer.appendChild(Tag.render`\n\t\t\t\t<div>\n\t\t\t\t\t<label class=\"ui-ctl ui-ctl-checkbox\">\n\t\t\t\t\t\t${checkbox}\n\t\t\t\t\t\t<span class=\"ui-ctl-label-text ${isNeedToDisableParam ? 'facebook-conversion-text-disabled' : ''}\">\n\t\t\t\t\t\t\t${this.conversionDataLabelsText[paramName]}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</label>\n\t\t\t\t</div>\n\t\t\t`);\n\t\t}\n\n\t\treturn paramsContainer;\n\t}\n\n\tonParamCheckboxChange(shopId, paramName, event)\n\t{\n\t\tconst checked = event.currentTarget.checked;\n\n\t\tconst dependedParamId = event.currentTarget.dataset.dependedParamId;\n\t\tif (dependedParamId)\n\t\t{\n\t\t\tthis.changeDependedParamCheckboxState(dependedParamId, checked);\n\t\t}\n\n\t\tthis.shops[shopId].params[paramName] = checked ? 'Y' : 'N';\n\n\t\tBX.ajax.runComponentAction('bitrix:sale.facebook.conversion',\n\t\t\t'changeParamState',\n\t\t\t{\n\t\t\t\tmode: 'class',\n\t\t\t\tdata: {\n\t\t\t\t\teventName: this.eventName,\n\t\t\t\t\tshopId: shopId,\n\t\t\t\t\tparamName: paramName,\n\t\t\t\t\tstate: checked ? 'Y' : 'N',\n\t\t\t\t},\n\t\t\t}\n\t\t).then(() => {\n\t\t\tthis.notify(Loc.getMessage('FACEBOOK_CONVERSION_SAVE_SUCCESS'));\n\t\t}).catch(() => {\n\t\t\tthis.notify(Loc.getMessage('FACEBOOK_CONVERSION_SAVE_ERROR'));\n\t\t});\n\t}\n\n\tchangeDependedParamCheckboxState(dependedParamId, isCheckedRequiredCheckbox)\n\t{\n\t\tconst dependedCheckbox = document.getElementById(dependedParamId);\n\t\tif (dependedCheckbox)\n\t\t{\n\t\t\tdependedCheckbox.disabled = !isCheckedRequiredCheckbox;\n\t\t\tconst parentCheckboxNode = dependedCheckbox.parentNode;\n\t\t\tconst checkboxText = parentCheckboxNode.querySelector('.ui-ctl-label-text');\n\t\t\tcheckboxText.className =\n\t\t\t\tdependedCheckbox.disabled\n\t\t\t\t\t? 'ui-ctl-label-text facebook-conversion-text-disabled'\n\t\t\t\t\t: 'ui-ctl-label-text'\n\t\t\t;\n\t\t}\n\t}\n\n\tgetTitleLayout()\n\t{\n\t\treturn Tag.render`\n\t\t\t<p class=\"facebook-conversion-event-title\">\n\t\t\t\t${this.title}\n\t\t\t</p>\n\t\t`;\n\t}\n\n\tgetInformationLayout()\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"facebook-conversion-information-container\">\n\t\t\t\t<div class=\"facebook-conversion-logo-container\">\n\t\t\t\t\t<div class=\"facebook-conversion-logo\">\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<div class=\"facebook-conversion-description\">\n\t\t\t\t\t\t${Loc.getMessage('FACEBOOK_CONVERSION_DESCRIPTION')}\n\t\t\t\t\t</div>\n\t\t\t\t\t<ol class=\"facebook-conversion-description-list\">\n\t\t\t\t\t\t<li>${Loc.getMessage('FACEBOOK_CONVERSION_DESCRIPTION_GIVE_EVENTS')}</li>\n\t\t\t\t\t\t<li>${Loc.getMessage('FACEBOOK_CONVERSION_DESCRIPTION_GIVE_CLIENT_ACTIONS')}</li>\n\t\t\t\t\t\t<li>${Loc.getMessage('FACEBOOK_CONVERSION_DESCRIPTION_MAKE_AD_AUDIENCES')}</li>\n\t\t\t\t\t\t<li>${Loc.getMessage('FACEBOOK_CONVERSION_DESCRIPTION_SHOW_AD')}</li>\n\t\t\t\t\t</ol>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<a \n\t\t\t\t\t\t\thref=\"https://www.facebook.com/business/help/1292598407460746?id=1205376682832142\" \n\t\t\t\t\t\t\tclass=\"facebook-conversion-info\" \n\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t${Loc.getMessage('FACEBOOK_CONVERSION_DESCRIPTION_INFO')}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetFacebookAuthDisconnectedLayout()\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"facebook-conversion-auth-container-disconnected\">\n\t\t\t\t<div class=\"facebook-conversion-auth-container-connect-title\">\n\t\t\t\t\t${Loc.getMessage('FACEBOOK_CONVERSION_CONNECT_TITLE')}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"facebook-conversion-auth-connect-container\">\n\t\t\t\t\t<a\n\t\t\t\t\t\tclass=\"ui-btn ui-btn-light-border\"\n\t\t\t\t\t\tonclick=\"${this.login.bind(this)}\"\n\t\t\t\t\t>\n\t\t\t\t\t\t${Loc.getMessage('FACEBOOK_CONVERSION_CONNECT')}\n\t\t\t\t\t</a>\n\t\t\t\t\t<span class=\"facebook-conversion-auth-connect-info\">\n\t\t\t\t\t\t${Loc.getMessage('FACEBOOK_CONVERSION_CONNECT_INFO')}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tlogin()\n\t{\n\t\tLoginFactory.getLoginObject({\n\t\t\t'TYPE' : 'facebook',\n\t\t\t'ENGINE_CODE' : 'business.facebook'\n\t\t}).login();\n\t}\n\n\tgetFacebookAuthConnectedLayout()\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"facebook-conversion-auth-container-connected\">\n\t\t\t\t<div class=\"facebook-conversion-auth-social-avatar\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"facebook-conversion-auth-social-avatar-icon\"\n\t\t\t\t\t\tstyle=\"background-image: url(${Tag.safe`\n\t\t\t\t\t\t\t${this.facebookBusinessParams.profile.picture}\n\t\t\t\t\t\t`})\"\n\t\t\t\t\t>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"facebook-conversion-auth-social-user\">\n\t\t\t\t\t<a\n\t\t\t\t\t\t${\n\t\t\t\t\t\t\tthis.facebookBusinessParams.profile.url\n\t\t\t\t\t\t\t\t? 'href=\"' + Tag.safe`${this.facebookBusinessParams.profile.url}` + '\"'\n\t\t\t\t\t\t\t\t: ''\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttarget=\"_top\"\n\t\t\t\t\t\tclass=\"facebook-conversion-auth-social-user-link\"\n\t\t\t\t\t>\n\t\t\t\t\t\t${Tag.safe`${this.facebookBusinessParams.profile.name}`}\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"facebook-conversion-auth-social-disconnect\">\n\t\t\t\t\t<span\n\t\t\t\t\t\tclass=\"facebook-conversion-auth-social-disconnect-link\"\n\t\t\t\t\t\tonclick=\"${this.logout.bind(this)}\"\n\t\t\t\t\t>\n\t\t\t\t\t\t${Loc.getMessage('FACEBOOK_CONVERSION_DISCONNECT')}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tlogout()\n\t{\n\t\tBX.ajax.runComponentAction(\n\t\t\t'bitrix:sale.facebook.conversion',\n\t\t\t'logout',\n\t\t\t{\n\t\t\t\tmode: 'class',\n\t\t\t\tanalyticsLabel: {\n\t\t\t\t\tconnect: 'FBE',\n\t\t\t\t\taction: 'disconnect',\n\t\t\t\t\ttype: 'disconnect'\n\t\t\t\t}\n\t\t\t}\n\t\t).then(() => {\n\t\t\tdocument.location.reload();\n\t\t}).catch(() => {\n\t\t\tdocument.location.reload();\n\t\t});\n\t}\n\n\tlayoutError()\n\t{\n\t\tconst errorNode = Tag.render`\n\t\t\t<div class=\"ui-slider-no-access\">\n\t\t\t\t<div class=\"ui-slider-no-access-inner\">\n\t\t\t\t\t<div class=\"ui-slider-no-access-title\">\n\t\t\t\t\t\t${Loc.getMessage('FACEBOOK_CONVERSION_NOT_AVAILABLE')}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"ui-slider-no-access-img\">\n\t\t\t\t\t\t<div class=\"ui-slider-no-access-img-inner\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t\tthis.wrapper.appendChild(errorNode);\n\t}\n}\n\nReflection.namespace('BX').SaleFacebookConversion = SaleFacebookConversion;\n"],"names":["SaleFacebookConversion","containerId","options","wrapper","document","getElementById","eventName","facebookBusinessParams","shops","conversionDataLabelsText","title","available","layout","layoutError","innerHTML","appendChild","getTitleLayout","getInformationLayout","auth","profile","getFacebookAuthConnectedLayout","shopsContainer","Tag","render","shopId","paramsContainer","getParamsContainerLayout","switcherContainer","getSwitcherContainerLayout","shopContainer","getShopContainerLayout","getFacebookAuthDisconnectedLayout","shopName","name","safe","message","BX","UI","Notification","Center","notify","content","autoHideDelay","switcher","Switcher","node","checked","enabled","handlers","changeShopEnabledState","bind","unchecked","state","ajax","runComponentAction","mode","data","then","Loc","getMessage","style","display","catch","params","paramName","param","isNeedToDisableParam","checkbox","disabled","Event","onParamCheckboxChange","event","currentTarget","dependedParamId","dataset","changeDependedParamCheckboxState","isCheckedRequiredCheckbox","dependedCheckbox","parentCheckboxNode","parentNode","checkboxText","querySelector","className","login","LoginFactory","getLoginObject","picture","url","logout","analyticsLabel","connect","action","type","location","reload","errorNode","Reflection","namespace"],"mappings":"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"}