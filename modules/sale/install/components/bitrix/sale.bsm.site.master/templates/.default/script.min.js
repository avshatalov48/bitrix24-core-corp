BX.namespace("BX.Sale.BsmSiteMasterComponent");(function(){"use strict";BX.Sale.BsmSiteMasterComponent={init:function(t){this.wizardSteps=t.wizardSteps;this.formId=t.formId||"";this.formNode=BX(t.formId);this.documentRoot=t.documentRoot||"";this.siteNameNode=BX(t.siteNameId);this.docRootNode=BX(t.docRootId);this.docRootLinkNode=BX(t.docRootLinkId);this.createSiteNode=BX(t.createSiteId);this.keyNode=BX(t.keyId);this.keyButtonNode=BX(t.keyButtonId);this.keyInputBlockNode=BX(t.keyInputBlockId);this.confirmationCheckboxNode=BX(t.confirmationCheckboxId);this.nextButtonNode=document.forms[this.formId].elements[t.nextButtonId];this.prevButtonNode=document.forms[this.formId].elements[t.prevButtonId];this.cancelButtonNode=document.forms[this.formId].elements[t.cancelButtonId];this.finishButtonNode=document.forms[this.formId].elements[t.finishButtonId];this.currentStepId=t.currentStepId;this.licenseKeyRegExp=/^([A-Z0-9]{3}-[A-Z0-9]{2}-[A-Z0-9]{12,16})$/gm;if(this.currentStepId!==undefined){if(this.wizardSteps.includes(this.currentStepId)&&this.currentStepId==="Bitrix\\Sale\\BsmSiteMaster\\Steps\\SiteStep"){this.bindSiteEvents();if(this.siteNameNode){this.saleNewSiteForm(this.siteNameNode);BX.bind(this.siteNameNode,"change",BX.proxy(this.saleNewSiteForm.bind(this,this.siteNameNode),this))}}if(this.wizardSteps.includes(this.currentStepId)&&(this.currentStepId==="Bitrix\\Sale\\BsmSiteMaster\\Steps\\SiteInstructionStep"||this.currentStepId==="Bitrix\\Sale\\BsmSiteMaster\\Steps\\BackupStep")){this.bindConfirmationCheckboxEvents()}}},bindSiteEvents:function(){BX.bind(this.docRootLinkNode,"click",BX.proxy(this.setDocumentRoot,this))},bindConfirmationCheckboxEvents:function(){BX.bind(this.confirmationCheckboxNode,"change",BX.proxy(this.onConfirmationCheckbox,this))},saleNewSiteForm:function(t){var e=t.value==="new";this.createSiteNode.style.display=e?"block":"none"},setDocumentRoot:function(){if(this.documentRoot.length>=0){this.docRootNode.value=this.documentRoot;BX.fireEvent(this.docRootNode,"change")}},onConfirmationCheckbox:function(t){if(!this.nextButtonNode)return;if(t.target.checked){this.nextButtonNode.disabled=false;BX.removeClass(this.nextButtonNode,"ui-btn-disabled")}else{this.nextButtonNode.disabled=true;BX.addClass(this.nextButtonNode,"ui-btn-disabled")}}}})();
//# sourceMappingURL=script.map.js