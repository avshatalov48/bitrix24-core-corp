BX.namespace("BX.Sale.Admin.OrderAdditionalInfo");BX.Sale.Admin.OrderAdditionalInfo={choosePerson:function(e,n){window.open("/bitrix/admin/user_search.php?lang="+n+"&FN="+e+"&FC=RESPONSIBLE_ID","","scrollbars=yes,resizable=yes,width=840,height=500,top="+Math.floor((screen.height-560)/2-14)+",left="+Math.floor((screen.width-840)/2-5))},changePerson:function(){var e=BX("order_additional_info_responsible"),n=BX("RESPONSIBLE_ID").value;if(e)e.href="/bitrix/admin/user_edit.php?lang="+BX.Sale.Admin.OrderEditPage.languageId+"&ID="+n;var i={action:"changeResponsibleUser",userId:n,siteId:BX.Sale.Admin.OrderEditPage.siteId,callback:function(e){BX.Sale.Admin.OrderAdditionalInfo.setResponsible(e.RESPONSIBLE);BX.Sale.Admin.OrderAdditionalInfo.setEmpResponsible(e.EMP_RESPONSIBLE);BX.Sale.Admin.OrderAdditionalInfo.setDateResponsible(e.DATE_RESPONSIBLE)}};BX.Sale.Admin.OrderAjaxer.sendRequest(i)},setResponsible:function(e){var n=BX("order_additional_info_responsible");if(e)e=BX.util.htmlspecialchars(e);if(n)BX.html(n,e)},setEmpResponsible:function(e){var n=BX("order_additional_info_emp_responsible");if(e)e=BX.util.htmlspecialchars(e);if(n)BX.html(n,e)},setDateResponsible:function(e){var n=BX("order_additional_info_date_responsible");if(e)e=BX.util.htmlspecialchars(e);if(n)BX.html(n,e)},showCommentsDialog:function(e,n){var i=n.innerHTML.replace(new RegExp("<br>","g"),"");var t=new BX.CDialog({content:'<textarea style="width:710px;height:260px;" name="COMMENTS" id="COMMENTS">'+i+"</textarea>",title:BX.message("SALE_ORDER_ADDITIONAL_INFO_COMMENT_EDIT"),width:750,height:300,resizable:true});t.ClearButtons();t.SetButtons([{title:BX.message("SALE_ORDER_ADDITIONAL_INFO_COMMENT_SAVE"),action:function(){var t=BX("COMMENTS");if(t)i=t.value;else if(i==BX.message("SALE_ORDER_ADDITIONAL_INFO_NO_COMMENT"))i="";BX.Sale.Admin.OrderAdditionalInfo.saveComment(i,e,n);this.parentWindow.Close()}},BX.CDialog.prototype.btnCancel]);BX.addCustomEvent(t,"onWindowClose",function(e){e.DIV.parentNode.removeChild(e.DIV)});t.Show()},saveComment:function(e,n,i){BX.Sale.Admin.OrderAjaxer.sendRequest({action:"saveComments",comments:e,orderId:n,callback:function(e){if(e&&typeof e.COMMENTS!=="undefined"&&i)i.innerHTML=e.COMMENTS.replace(new RegExp("\n","g"),"<br>\n")}})}};
//# sourceMappingURL=order_additional_info.map.js