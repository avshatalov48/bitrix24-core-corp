BX.namespace("BX.Sale.Admin.PresetBasket");BX.Sale.Admin.PresetBasket=function(e){this.products=e.products;this.productsOffersSkuParams={};if(e.productsOffersSkuParams){for(var t in e.productsOffersSkuParams){if(e.productsOffersSkuParams.hasOwnProperty(t))this.setProductsOffersSkuParams(t,e.productsOffersSkuParams[t])}}BX.Sale.Admin.OrderBasket.call(this,e)};BX.Sale.Admin.PresetBasket.prototype=Object.create(BX.Sale.Admin.OrderBasketEdit.prototype);BX.Sale.Admin.PresetBasket.prototype.getFieldsUpdaters=function(){return{BASKET:{context:this,callback:this.setBasket}}};BX.Sale.Admin.OrderBasketEdit.prototype.setBasket=function(e){if(!e)return;var t,r;if(e.IBLOCKS_SKU_PARAMS)for(t in e.IBLOCKS_SKU_PARAMS)if(e.IBLOCKS_SKU_PARAMS.hasOwnProperty(t))this.setIblocksSkuParams(t,e.IBLOCKS_SKU_PARAMS[t]);if(e.IBLOCKS_SKU_PARAMS_ORDER)for(t in e.IBLOCKS_SKU_PARAMS_ORDER)if(e.IBLOCKS_SKU_PARAMS_ORDER.hasOwnProperty(t))this.setIblocksSkuParamsOrder(t,e.IBLOCKS_SKU_PARAMS_ORDER[t]);if(e.PRODUCTS_OFFERS_SKU)for(t in e.PRODUCTS_OFFERS_SKU)if(e.PRODUCTS_OFFERS_SKU.hasOwnProperty(t))this.setProductsOffersSkuParams(t,e.PRODUCTS_OFFERS_SKU[t]);if(e.PRICES_UPDATED&&e.PRICES_UPDATED.length>0){for(t in e.PRICES_UPDATED)if(e.PRICES_UPDATED.hasOwnProperty(t))this.updateProductPriceCell(e.ITEMS[t]);for(t in e.ITEMS)if(e.ITEMS.hasOwnProperty(t))this.updateProductDiscountsCell(e.ITEMS[t]);if(e.NEW_ITEM_BASKET_CODE&&e.ITEMS[e.NEW_ITEM_BASKET_CODE])this.productSet(e.ITEMS[e.NEW_ITEM_BASKET_CODE],true)}else if(e.LIGHT&&e.LIGHT=="Y"){for(t in this.products){if(!this.products.hasOwnProperty(t))continue;if(typeof e.ITEMS[t]=="undefined")this.productDelete(t)}if(e.ADDED_PRODUCTS){for(t in e.ADDED_PRODUCTS){if(e.ADDED_PRODUCTS.hasOwnProperty(t)){this.productSet(e.ITEMS[e.ADDED_PRODUCTS[t]],true);delete e.ITEMS[e.ADDED_PRODUCTS[t]]}}}if(e.ITEMS){for(t in e.ITEMS)if(e.ITEMS.hasOwnProperty(t))this.productUpdateLight(e.ITEMS[t])}}else if(e.ITEMS_ORDER&&e.ITEMS_ORDER.length){for(t in this.products)if(this.products.hasOwnProperty(t))this.productDelete(t);for(t=0,r=e.ITEMS_ORDER.length-1;t<=r;t++)this.productSet(e.ITEMS[e.ITEMS_ORDER[t]],true)}if(!e.ITEMS||!e.ITEMS_ORDER||!e.ITEMS_ORDER.length){this.showEmptyRow()}this.hideLoadingRow()};BX.Sale.Admin.PresetBasket.prototype.createFieldPrice=function(e,t,r){var s;if(typeof this.customPrices[e]=="undefined")s=t.PRICE;else s=this.customPrices[e];var i=BX.create("span",{props:{className:"formated_price",id:this.idPrefix+"sale-order-basket-product-"+e+"-formatted_price"},html:BX.Sale.Admin.OrderEditPage.currencyFormat(s),style:{whiteSpace:"nowrap"}}),a=BX.create("span",{props:{className:"default_price_product"},children:[i]}),S=BX.create("span",{text:""}),o=BX.create("div",{props:{className:"base_price",id:this.idPrefix+"sale-order-basket-product-"+e+"-base_price"},style:{display:parseFloat(t.BASE_PRICE)>0&&parseFloat(t.PRICE)!=parseFloat(t.BASE_PRICE)?"":"none"},children:[BX.create("span",{html:BX.Sale.Admin.OrderEditPage.currencyFormat(t.BASE_PRICE)})]}),E=BX.create("div",{props:{className:"base_price_title"},style:{display:t.CUSTOM_PRICE&&t.CUSTOM_PRICE=="Y"||t.NOTES?"":"none"},text:t.CUSTOM_PRICE&&t.CUSTOM_PRICE=="Y"?BX.message("SALE_ORDER_BASKET_BASE_CATALOG_PRICE"):t.NOTES}),p=BX.create("span",{props:{className:"edit_price"},children:[a,S,o,E]});return p};
//# sourceMappingURL=discount_preset_basket.map.js