BX.namespace("BX.Sale.Admin.OrderAjaxer");BX.Sale.Admin.OrderAjaxer={ajaxUrl:"/bitrix/admin/sale_order_ajax.php",sendRequest:function(e,r,a){if(!e)return;if(!r)BX.Sale.Admin.OrderEditPage.blockForm();var d=e,i=e.callback?e.callback:null;if(d.callback)delete d.callback;if(a)d=this.refreshOrderData.modifyParams(d);d.sessid=BX.bitrix_sessid();var l={timeout:60,method:"POST",dataType:"json",url:this.ajaxUrl,data:d,onsuccess:function(e){if(e){if(e.NEED_CONFIRM&&e.NEED_CONFIRM==="Y"){BX.Sale.Admin.OrderEditPage.showConfirmDialog(e.CONFIRM.TEXT,e.CONFIRM.TITLE,function(){d.confirmed="Y";l.data=d;BX.ajax(l)})}else{if(i&&typeof i==="function")i.call(null,e)}}else{BX.debug("Admin order ajaxer error! Can't receive the result.")}if(e&&e.ERROR){BX.debug("Admin order ajaxer recieved error: "+e.ERROR)}if(e&&e.WARNING){BX.debug("Admin order ajaxer recieved warning: "+e.WARNING)}if(a)BX.Sale.Admin.OrderAjaxer.refreshOrderData.callback(e);if(!r)BX.Sale.Admin.OrderEditPage.unBlockForm()},onfailure:function(e){if(!r)BX.Sale.Admin.OrderEditPage.unBlockForm();if(a)BX.Sale.Admin.OrderAjaxer.refreshOrderData.setFlag(false);BX.debug("ajax onfailure");BX.debug("status: "+e)}};BX.ajax(l)},refreshOrderData:{flag:false,callback:function(e){if(e){if(e.ERROR){BX.Sale.Admin.OrderEditPage.showDialog(e.ERROR);BX.Sale.Admin.OrderEditPage.rollBack()}if(e.ORDER_DATA){BX.Sale.Admin.OrderEditPage.resetRollbackMethods();BX.Sale.Admin.OrderEditPage.callFieldsUpdaters(e.ORDER_DATA)}}else BX.debug("Error receiving order data!");BX.Sale.Admin.OrderAjaxer.refreshOrderData.setFlag(false)},modifyParams:function(e){BX.Sale.Admin.OrderAjaxer.refreshOrderData.setFlag(true);e.formData=BX.Sale.Admin.OrderEditPage.getAllFormData();e.refreshOrderData="Y";return e},setFlag:function(e){BX.Sale.Admin.OrderAjaxer.refreshOrderData.flag=!!e},getFlag:function(){return BX.Sale.Admin.OrderAjaxer.refreshOrderData.flag}}};
//# sourceMappingURL=order_ajaxer.map.js