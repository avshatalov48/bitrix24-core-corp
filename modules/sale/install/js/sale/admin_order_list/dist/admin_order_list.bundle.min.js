this.BX=this.BX||{};(function(e){"use strict";var t=function e(){babelHelpers.classCallCheck(this,e)};var s=function(e){babelHelpers.inherits(t,e);function t(){var e;var s;babelHelpers.classCallCheck(this,t);for(var i=arguments.length,n=new Array(i),o=0;o<i;o++){n[o]=arguments[o]}s=babelHelpers.possibleConstructorReturn(this,(e=babelHelpers.getPrototypeOf(t)).call.apply(e,[this].concat(n)));babelHelpers.defineProperty(babelHelpers.assertThisInitialized(s),"dialog",null);return s}babelHelpers.createClass(t,[{key:"initialize",value:function e(t){this._settings=t?t:{};this._restEntityInfo=BX.prop.getObject(this._settings,"restEntityInfo",{});this._form=BX.prop.getElementNode(this._settings,"form");this.entityId=BX.prop.getInteger(this._restEntityInfo,"entityId",0);this.entityTypeId=BX.prop.getInteger(this._restEntityInfo,"entityTypeId",0)}},{key:"confirmToOpenNewOrder",value:function e(t,s,i){this.dialog=new BX.PopupWindow("adm-sale-order-alert-dialog",null,{autoHide:false,draggable:true,offsetLeft:0,offsetTop:0,bindOptions:{forceBindPosition:false},closeByEsc:true,closeIcon:true,titleBar:t,contentColor:"white",content:BX.create("span",{html:BX.util.htmlspecialchars(s).replace(/\n/g,"<br>\n"),style:{backgroundColor:"white"}})});var n=[new BX.PopupWindowButton({text:BX.message("SALE_O_CONTEXT_B_IS_SYNC_B24_REGISTRY_CREATE"),className:"popup-window-button-accept",events:{click:function e(){window.open(i);BX.delegate(this.onPopupClose,this);BX.Sale.AdminIntegrationOrderList.closeApplication()}}}),new BX.PopupWindowButton({text:BX.message("SALE_O_CONTEXT_B_IS_SYNC_B24_REGISTRY_CLOSE"),className:"popup-window-button-link-cancel",events:{click:function e(){BX.delegate(this.onPopupClose,this);BX.Sale.AdminIntegrationOrderList.closeApplication()}}})];this.dialog.setButtons(n);this.dialog.show()}},{key:"popup",value:function e(t,s){this.dialog=new BX.PopupWindow("adm-sale-order-alert-dialog",null,{autoHide:false,draggable:true,offsetLeft:0,offsetTop:0,bindOptions:{forceBindPosition:false},closeByEsc:true,closeIcon:true,titleBar:t,contentColor:"white",content:BX.create("span",{html:BX.util.htmlspecialchars(s).replace(/\n/g,"<br>\n"),style:{backgroundColor:"white"}})});var i=[new BX.PopupWindowButton({text:BX.message("SALE_O_CONTEXT_B_IS_SYNC_B24_REGISTRY_CLOSE"),className:"popup-window-button-link-cancel",events:{click:BX.delegate(this.onPopupClose,this)}})];this.dialog.setButtons(i);this.dialog.show()}},{key:"onPopupClose",value:function e(){this.dialog.close();this.dialog.destroy()}},{key:"getSendedOrders",value:function e(){var t=[];var s=[];s=this.getCheckedCheckBoxList(this._form);for(var i=0;i<s.length;i++){var n=BX.findParent(s[i],{tag:"TR"});if(!!n){var o=n.getElementsByTagName("span");if(!!o){for(var a=0;a<o.length;a++){if(o[a].id=="IS_SYNC_B24_"+s[i].value){if(o[a].innerText==BX.message("SALE_O_CONTEXT_B_IS_SYNC_B24_REGISTRY_SEND_YES")){t.push(s[i].value)}}}}}}return t}},{key:"getCheckedCheckBoxList",value:function e(t){var s=t.elements.length;var i=[];for(var n=0;n<s;n++){if(t.elements[n].tagName.toUpperCase()=="INPUT"&&t.elements[n].type.toUpperCase()=="CHECKBOX"&&t.elements[n].name.toUpperCase()=="ID[]"&&t.elements[n].checked==true){i.push(t.elements[n])}}return i}},{key:"sendOrdersToRestApplication",value:function e(){var t=this._form;var s=this.getCheckedCheckBoxList(this._form);if(BX("tbl_sale_order_check_all")&&t){if(s.length==0){this.popup(BX.message("SALE_O_CONTEXT_B_IS_SYNC_B24_TITLE"),BX.message("SALE_O_CONTEXT_B_IS_SYNC_B24_SELECTION_NEEDED"))}else{var i=this.getSendedOrders();if(tbl_sale_order.num_checked>3){this.popup(BX.message("SALE_O_CONTEXT_B_IS_SYNC_B24_TITLE"),BX.message("SALE_O_CONTEXT_B_IS_SYNC_B24_SELECTION_MORE_THREE"))}else if(i.length>0){this.popup(BX.message("SALE_O_CONTEXT_B_IS_SYNC_B24_TITLE"),BX.message("SALE_O_CONTEXT_B_IS_SYNC_B24_REGISTRY_SENDED")+": "+i.toString())}else{this.redirect()}}}}},{key:"getValuesCheckedCheckBox",value:function e(t){var s=this.getCheckedCheckBoxList(t);var i=[];for(var n=0;n<s.length;n++){i.push(s[n].value)}return i}},{key:"redirect",value:function e(){var t="sale_app_rest_sender.php";t=BX.Uri.addParam(t,{orderIds:this.getValuesCheckedCheckBox(this._form),entityId:this.entityId,entityTypeId:this.entityTypeId,IFRAME:"Y"});document.location.href=t}},{key:"closeApplication",value:function e(){BX24.closeApplication()}}]);return t}(t);var i=new t;var n=new s;e.AdminOrderList=i;e.AdminIntegrationOrderList=n})(this.BX.Sale=this.BX.Sale||{});
//# sourceMappingURL=admin_order_list.bundle.map.js