this.BX=this.BX||{};this.BX.Sale=this.BX.Sale||{};this.BX.Sale.Checkout=this.BX.Sale.Checkout||{};this.BX.Sale.Checkout.View=this.BX.Sale.Checkout.View||{};(function(e,t,a,n){"use strict";t.BitrixVue.component("sale-checkout-view-payment-pay_system_application",{props:["order","paySystems","config"],methods:{prepare:function e(t){var a={returnUrl:this.config.returnUrl,orderId:this.order.id,accessCode:this.order.hash,allowPaymentRedirect:true};var n=t.map(function(e){return{ID:e.id,NAME:e.name,LOGOTIP:e.picture}});return{app:{paySystems:n},paymentProcess:a}}},template:'\n\t\t<sale-payment_pay-components-application-pay_system :options="prepare(paySystems)"/>\n\t'});t.BitrixVue.component("sale-checkout-view-payment-payment_paid_application",{props:["order","payments","paySystems","check","config"],methods:{getChecksByPaymentId:function e(t){var n=[];var i=this.check;if(a.Type.isArrayFilled(i)){i.forEach(function(e){if(e.paymentId===t){n.push({status:e.status,link:e.link,id:e.id,dateFormatted:e.dateFormatted})}})}return n},getFirstPaymentPaidY:function e(){return this.payments[0]},getPaySystemById:function e(t){var a=this.paySystems.find(function(e){return e.id===t});return!!a?a:null},prepare:function e(){var t=null;var a=this.getFirstPaymentPaidY();if(a!==null){var n=this.getPaySystemById(a.paySystemId);var i=[];i.push({ID:n.id,NAME:n.name,LOGOTIP:n.picture});var r={paySystems:i,title:this.getTitle(a)};var s={sumFormatted:this.sumFormatted(a),paid:a.paid==="Y",checks:this.getChecksByPaymentId(a.id)};var p={returnUrl:this.config.returnUrl,orderId:this.order.id,accessCode:this.order.hash,allowPaymentRedirect:true,paymentId:a.id};t={app:r,payment:s,paymentProcess:p}}return t},sumFormatted:function e(t){return n.CurrencyCore.currencyFormat(t.sum,t.currency,true)},getTitle:function e(t){return this.localize.CHECKOUT_VIEW_PAYMENT_PAYMENT_INFO.replace("#DATE_INSERT#",t.dateBillFormatted).replace("#ACCOUNT_NUMBER#",t.accountNumber)}},computed:{localize:function e(){return Object.freeze(t.BitrixVue.getFilteredPhrases("CHECKOUT_VIEW_PAYMENT"))}},template:'\n\t\t<sale-payment_pay-components-application-payment :options="prepare()"/>\n\t'});t.BitrixVue.component("sale-checkout-view-payment",{props:["order","payments","paySystems","check","config"],methods:{hasPaymentPaidY:function e(){return this.getPaymentPaidY().length>0},getPaymentPaidY:function e(){var t=[];var a=this.payments;a.forEach(function(e){if(e.paid!=="N"){t.push(e)}});return t}},template:'\n\t  <div>\n\t  <template v-if="hasPaymentPaidY()">\n        <sale-checkout-view-payment-payment_paid_application :order="order" :payments="getPaymentPaidY()" :paySystems="paySystems" :check="check" :config="config"/>\n      </template>\n      <template v-else>\n        <sale-checkout-view-payment-pay_system_application :order="order" :paySystems="paySystems" :config="config"/>\n\t  </template>\n\t</div>\n\t'})})(this.BX.Sale.Checkout.View.Payment=this.BX.Sale.Checkout.View.Payment||{},BX,BX,BX.Currency);
//# sourceMappingURL=registry.bundle.map.js