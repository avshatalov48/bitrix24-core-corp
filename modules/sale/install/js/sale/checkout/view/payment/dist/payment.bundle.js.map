{"version":3,"file":"payment.bundle.js","sources":["../src/payment.js"],"sourcesContent":["import { BitrixVue } from 'ui.vue';\nimport { Component, RestMethod, EventType } from 'sale.checkout.const';\nimport { ajax } from 'main.core';\nimport { EventEmitter } from 'main.core.events'\nimport { MixinLoader } from \"sale.checkout.view.mixins\";\n\nBitrixVue.component('sale-checkout-view-payment', {\n\tprops: ['order', 'config'],\n\tmixins:[MixinLoader],\n\tmethods:\n\t\t{\n\t\t\tgetBlockHtml() {\n\n\t\t\t\tconst fields = {\n\t\t\t\t\taccessCode: this.order.hash,\n\t\t\t\t\torderId: this.order.id,\n\t\t\t\t\treturnUrl: this.config.returnUrl,\n\t\t\t\t}\n\n\t\t\t\tajax.runComponentAction(\n\t\t\t\t\tComponent.bitrixSaleOrderCheckout,\n\t\t\t\t\tRestMethod.saleEntityPaymentPay,\n\t\t\t\t\t{\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tfields: fields\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.then((response) => {\n\t\t\t\t\t\tlet html = response.data.html;\n\t\t\t\t\t\tlet wrapper = this.$refs.paymentSystemList;\n\n\t\t\t\t\t\tBX.html(wrapper, html);\n\n\t\t\t\t\t\tEventEmitter.emit(EventType.paysystem.afterInitList, {});\n\n\t\t\t\t\t\tBX.addCustomEvent('onChangePaySystems', () => {\n\n\t\t\t\t\t\t\tEventEmitter.emit(EventType.paysystem.beforeInitList, {});\n\n\t\t\t\t\t\t\tthis.getBlockHtml()\n\t\t\t\t\t\t});\n\t\t\t\t\t})\n\t\t\t}\n\t\t},\n\tmounted()\n\t{\n\t\tthis.getBlockHtml();\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<div style='position: relative;' ref=\"container\">\n\t\t\t<div ref=\"paymentSystemList\"/>\n\t\t</div>\n\t`\n});"],"names":["BitrixVue","component","props","mixins","MixinLoader","methods","getBlockHtml","fields","accessCode","order","hash","orderId","id","returnUrl","config","ajax","runComponentAction","Component","bitrixSaleOrderCheckout","RestMethod","saleEntityPaymentPay","data","then","response","html","wrapper","$refs","paymentSystemList","BX","EventEmitter","emit","EventType","paysystem","afterInitList","addCustomEvent","beforeInitList","mounted","template"],"mappings":";;;;;;AAMAA,iBAAS,CAACC,SAAV,CAAoB,4BAApB,EAAkD;CACjDC,EAAAA,KAAK,EAAE,CAAC,OAAD,EAAU,QAAV,CAD0C;CAEjDC,EAAAA,MAAM,EAAC,CAACC,qCAAD,CAF0C;CAGjDC,EAAAA,OAAO,EACN;CACCC,IAAAA,YADD,0BACgB;CAAA;;CAEd,UAAMC,MAAM,GAAG;CACdC,QAAAA,UAAU,EAAE,KAAKC,KAAL,CAAWC,IADT;CAEdC,QAAAA,OAAO,EAAE,KAAKF,KAAL,CAAWG,EAFN;CAGdC,QAAAA,SAAS,EAAE,KAAKC,MAAL,CAAYD;CAHT,OAAf;CAMAE,MAAAA,cAAI,CAACC,kBAAL,CACCC,6BAAS,CAACC,uBADX,EAECC,8BAAU,CAACC,oBAFZ,EAGC;CACCC,QAAAA,IAAI,EAAE;CACLd,UAAAA,MAAM,EAAEA;CADH;CADP,OAHD,EAQEe,IARF,CAQO,UAACC,QAAD,EAAc;CACnB,YAAIC,IAAI,GAAGD,QAAQ,CAACF,IAAT,CAAcG,IAAzB;CACA,YAAIC,OAAO,GAAG,KAAI,CAACC,KAAL,CAAWC,iBAAzB;CAEAC,QAAAA,EAAE,CAACJ,IAAH,CAAQC,OAAR,EAAiBD,IAAjB;CAEAK,QAAAA,6BAAY,CAACC,IAAb,CAAkBC,6BAAS,CAACC,SAAV,CAAoBC,aAAtC,EAAqD,EAArD;CAEAL,QAAAA,EAAE,CAACM,cAAH,CAAkB,oBAAlB,EAAwC,YAAM;CAE7CL,UAAAA,6BAAY,CAACC,IAAb,CAAkBC,6BAAS,CAACC,SAAV,CAAoBG,cAAtC,EAAsD,EAAtD;;CAEA,UAAA,KAAI,CAAC7B,YAAL;CACA,SALD;CAMA,OAtBF;CAuBA;CAhCF,GAJgD;CAsCjD8B,EAAAA,OAtCiD,qBAuCjD;CACC,SAAK9B,YAAL;CACA,GAzCgD;CA0CjD;CACA+B,EAAAA,QAAQ;CA3CyC,CAAlD;;;;"}