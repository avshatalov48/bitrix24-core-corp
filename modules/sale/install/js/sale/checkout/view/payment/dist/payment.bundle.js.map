{"version":3,"file":"payment.bundle.js","sources":["../src/payment.js"],"sourcesContent":["import { Vue } from 'ui.vue';\nimport { Component, RestMethod, EventType } from 'sale.checkout.const';\nimport { ajax, Event } from 'main.core';\nimport { MixinLoader } from \"sale.checkout.view.mixins\";\n\nVue.component('sale-checkout-view-payment', {\n\tprops: ['order', 'config'],\n\tmixins:[MixinLoader],\n\tmethods:\n\t\t{\n\t\t\tgetBlockHtml() {\n\n\t\t\t\tconst fields = {\n\t\t\t\t\taccessCode: this.order.hash,\n\t\t\t\t\torderId: this.order.id,\n\t\t\t\t\treturnUrl: this.config.returnUrl,\n\t\t\t\t}\n\n\t\t\t\tajax.runComponentAction(\n\t\t\t\t\tComponent.bitrixSaleOrderCheckout,\n\t\t\t\t\tRestMethod.saleEntityPaymentPay,\n\t\t\t\t\t{\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tfields: fields\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.then((response) => {\n\t\t\t\t\t\tlet html = response.data.html;\n\t\t\t\t\t\tlet wrapper = this.$refs.paymentSystemList;\n\n\t\t\t\t\t\tBX.html(wrapper, html);\n\n\t\t\t\t\t\tEvent.EventEmitter.emit(EventType.paysystem.afterInitList, {});\n\n\t\t\t\t\t\tBX.addCustomEvent('onChangePaySystems', () => {\n\n\t\t\t\t\t\t\tEvent.EventEmitter.emit(EventType.paysystem.beforeInitList, {});\n\n\t\t\t\t\t\t\tthis.getBlockHtml()\n\t\t\t\t\t\t});\n\t\t\t\t\t})\n\t\t\t}\n\t\t},\n\tmounted()\n\t{\n\t\tthis.getBlockHtml();\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<div style='position: relative;' ref=\"container\">\n\t\t\t<div ref=\"paymentSystemList\"/>\n\t\t</div>\n\t`\n});"],"names":["Vue","component","props","mixins","MixinLoader","methods","getBlockHtml","fields","accessCode","order","hash","orderId","id","returnUrl","config","ajax","runComponentAction","Component","bitrixSaleOrderCheckout","RestMethod","saleEntityPaymentPay","data","then","response","html","wrapper","$refs","paymentSystemList","BX","Event","EventEmitter","emit","EventType","paysystem","afterInitList","addCustomEvent","beforeInitList","mounted","template"],"mappings":";;;;;;AAKAA,WAAG,CAACC,SAAJ,CAAc,4BAAd,EAA4C;CAC3CC,EAAAA,KAAK,EAAE,CAAC,OAAD,EAAU,QAAV,CADoC;CAE3CC,EAAAA,MAAM,EAAC,CAACC,qCAAD,CAFoC;CAG3CC,EAAAA,OAAO,EACN;CACCC,IAAAA,YADD,0BACgB;CAAA;;CAEd,UAAMC,MAAM,GAAG;CACdC,QAAAA,UAAU,EAAE,KAAKC,KAAL,CAAWC,IADT;CAEdC,QAAAA,OAAO,EAAE,KAAKF,KAAL,CAAWG,EAFN;CAGdC,QAAAA,SAAS,EAAE,KAAKC,MAAL,CAAYD;CAHT,OAAf;CAMAE,MAAAA,cAAI,CAACC,kBAAL,CACCC,6BAAS,CAACC,uBADX,EAECC,8BAAU,CAACC,oBAFZ,EAGC;CACCC,QAAAA,IAAI,EAAE;CACLd,UAAAA,MAAM,EAAEA;CADH;CADP,OAHD,EAQEe,IARF,CAQO,UAACC,QAAD,EAAc;CACnB,YAAIC,IAAI,GAAGD,QAAQ,CAACF,IAAT,CAAcG,IAAzB;CACA,YAAIC,OAAO,GAAG,KAAI,CAACC,KAAL,CAAWC,iBAAzB;CAEAC,QAAAA,EAAE,CAACJ,IAAH,CAAQC,OAAR,EAAiBD,IAAjB;CAEAK,QAAAA,eAAK,CAACC,YAAN,CAAmBC,IAAnB,CAAwBC,6BAAS,CAACC,SAAV,CAAoBC,aAA5C,EAA2D,EAA3D;CAEAN,QAAAA,EAAE,CAACO,cAAH,CAAkB,oBAAlB,EAAwC,YAAM;CAE7CN,UAAAA,eAAK,CAACC,YAAN,CAAmBC,IAAnB,CAAwBC,6BAAS,CAACC,SAAV,CAAoBG,cAA5C,EAA4D,EAA5D;;CAEA,UAAA,KAAI,CAAC9B,YAAL;CACA,SALD;CAMA,OAtBF;CAuBA;CAhCF,GAJ0C;CAsC3C+B,EAAAA,OAtC2C,qBAuC3C;CACC,SAAK/B,YAAL;CACA,GAzC0C;CA0C3C;CACAgC,EAAAA,QAAQ;CA3CmC,CAA5C;;;;"}