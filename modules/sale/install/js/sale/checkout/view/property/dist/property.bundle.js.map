{"version":3,"file":"property.bundle.js","sources":["../src/input/text.js","../src/input/phone.js","../src/note-error.js","../src/list-edit.js","../src/list-view.js","../src/property.js"],"sourcesContent":["import { BitrixVue } from 'ui.vue';\r\nimport { Event } from 'main.core'\r\nimport { Property as Const, EventType} from 'sale.checkout.const';\r\n\r\nBitrixVue.component('sale-checkout-view-property-input-text', {\r\n    props: ['item', 'index', 'autocomplete'],\r\n    methods:\r\n        {\r\n            validate()\r\n            {\r\n                Event.EventEmitter.emit(EventType.property.validate, {index: this.index});\r\n            }\r\n        },\r\n    computed:\r\n        {\r\n            checkedClassObject()\r\n            {\r\n                return this.item.validated === Const.validate.unvalidated ?\r\n                    {}\r\n                    :\r\n                    {\r\n                        'is-invalid': this.item.validated === Const.validate.failure,\r\n                        'is-valid': this.item.validated === Const.validate.successful\r\n                    }\r\n            }\r\n        },\r\n    // language=Vue\r\n    template: `\r\n        <input class=\"form-control form-control-lg\" :class=\"checkedClassObject\"\r\n            @blur=\"validate\"\r\n            type=\"text\" \r\n            :placeholder=\"item.name\"\r\n            :autocomplete=\"autocomplete\"\r\n            v-model=\"item.value\"\r\n        />\r\n\t`\r\n});","import { BitrixVue } from 'ui.vue';\r\nimport { Event } from \"main.core\";\r\nimport { PhoneFilter as Filter, PhoneFormatter as Formatter} from \"ui.type\";\r\n\r\nimport {Property as Const, EventType} from 'sale.checkout.const';\r\n\r\nBitrixVue.component('sale-checkout-view-property-input-phone', {\r\n\tprops: ['item', 'index'],\r\n\tmethods:\r\n\t{\r\n\t\tvalidate()\r\n\t\t{\r\n\t\t\tEvent.EventEmitter.emit(EventType.property.validate, {index: this.index});\r\n\t\t},\r\n\t\tonKeyDown(e)\r\n\t\t{\r\n\t\t\tlet value = e.key;\r\n\t\t\t\r\n\t\t\tif (Filter.replace(value) !== '')\r\n\t\t\t{\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (['Esc', 'Delete', 'Backspace', 'Tab'].indexOf(e.key) >= 0)\r\n\t\t\t{\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (e.ctrlKey || e.metaKey)\r\n\t\t\t{\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\te.preventDefault();\r\n\t\t},\r\n\t\tonInput()\r\n\t\t{\r\n\t\t\tlet value = Formatter.formatValue(this.value);\r\n\t\t\tif (this.value !== value)\r\n\t\t\t{\r\n\t\t\t\tthis.value = value;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tcomputed:\r\n\t{\r\n\t\tcheckedClassObject()\r\n\t\t{\r\n\t\t\treturn this.item.validated === Const.validate.unvalidated ?\r\n\t\t\t\t{}\r\n\t\t\t\t:\r\n\t\t\t\t{\r\n\t\t\t\t\t'is-invalid': this.item.validated === Const.validate.failure,\r\n\t\t\t\t\t'is-valid': this.item.validated === Const.validate.successful\r\n\t\t\t\t}\r\n\t\t},\r\n\t\tvalue: {\r\n\t\t\tget ()\r\n\t\t\t{\r\n\t\t\t\treturn this.item.value;\r\n\t\t\t},\r\n\t\t\tset (newValue)\r\n\t\t\t{\r\n\t\t\t\tthis.item.value = newValue;\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n\t// language=Vue\r\n\ttemplate: `\r\n      <input class=\"form-control form-control-lg\" :class=\"checkedClassObject\"\r\n             @blur=\"validate\"\r\n             @input=\"onInput\"\r\n\t\t\t @keydown=\"onKeyDown\"\r\n             v-model=\"value\"\r\n             autocomplete=\"tel\"\r\n\t\t\t :placeholder=\"item.name\"\r\n      />\r\n\t`\r\n});","import { BitrixVue } from 'ui.vue';\r\n\r\nBitrixVue.component('sale-checkout-view-property-note_error', {\r\n    props: ['message'],\r\n    template: `\r\n        <div class=\"invalid-feedback\">\r\n            {{message}}\r\n        </div>\r\n\t`\r\n});","import { BitrixVue } from 'ui.vue';\r\nimport {Property as Const} from 'sale.checkout.const';\r\n\r\nimport './input/text'\r\nimport './input/phone'\r\nimport './note-error'\r\n\r\nBitrixVue.component('sale-checkout-view-property-list_edit', {\r\n\tprops: ['items', 'errors'],\r\n\tcomputed:\r\n\t{\r\n\t\tlocalize() {\r\n\t\t\treturn Object.freeze(\r\n\t\t\t\tBitrixVue.getFilteredPhrases('CHECKOUT_VIEW_PROPERTY_LIST_'))\r\n\t\t}\r\n\t},\r\n\tmethods:\r\n\t{\r\n\t\tgetErrorMessage(item)\r\n\t\t{\r\n\t\t\tlet error = this.errors.find(error => error.propertyId === item.id);\r\n\t\t\treturn typeof error !== 'undefined' ? error.message:null\r\n\t\t},\r\n\t\tisPhone(item)\r\n\t\t{\r\n\t\t\treturn item.type === Const.type.phone\r\n\t\t},\r\n\t\tisName(item)\r\n\t\t{\r\n\t\t\treturn item.type === Const.type.name\r\n\t\t},\r\n\t\tisEmail(item)\r\n\t\t{\r\n\t\t\treturn item.type === Const.type.email\r\n\t\t},\r\n\t\tisFailure(item)\r\n\t\t{\r\n\t\t\treturn item.validated === Const.validate.failure\r\n\t\t}\r\n\t},\r\n\t// language=Vue\r\n\ttemplate: `\r\n\t\t<div class=\"checkout-basket-section checkout-basket-section-personal-form\">\r\n\t\t\t<h2 class=\"checkout-basket-title\">{{localize.CHECKOUT_VIEW_PROPERTY_LIST_VIEW_SHIPPING_CONTACTS}}</h2>\r\n\t\t\t\t<template v-for=\"(item, index) in items\">\r\n\t\t\t\t  <div class=\"form-group\" v-if=\"isName(item)\">\r\n\t\t\t\t\t<sale-checkout-view-property-input-text :item=\"item\" :index=\"index\" :autocomplete=\"'name'\"/>\r\n\t\t\t\t\t<sale-checkout-view-property-note_error v-if=\"isFailure(item)\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t:message=\"getErrorMessage(item)\"/>\r\n\t\t\t\t  </div>\r\n\t\t\t\t</template>\r\n\t\t\t\t<template v-for=\"(item, index) in items\">\r\n\t\t\t\t  <div class=\"form-group\" v-if=\"isPhone(item)\">\r\n\t\t\t\t\t<sale-checkout-view-property-input-phone :item=\"item\" :index=\"index\"/>\r\n\t\t\t\t\t<sale-checkout-view-property-note_error v-if=\"isFailure(item)\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t:message=\"getErrorMessage(item)\"/>\r\n\t\t\t\t  </div>\r\n\t\t\t\t</template>\r\n\t\t\t\t<template v-for=\"(item, index) in items\">\r\n\t\t\t\t  <div class=\"form-group\" v-if=\"isEmail(item)\">\r\n\t\t\t\t\t<sale-checkout-view-property-input-text :item=\"item\" :index=\"index\" :autocomplete=\"'email'\" />\r\n\t\t\t\t\t<sale-checkout-view-property-note_error v-if=\"isFailure(item)\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t:message=\"getErrorMessage(item)\"/>\r\n\t\t\t\t  </div>\r\n\t\t\t\t</template>\r\n\t\r\n\t\t\t\t<template v-for=\"(item, index) in items\">\r\n\t\t\t\t  <div class=\"form-group\" v-if=\"isPhone(item) === false && isName(item) === false && isEmail(item) === false\">\r\n\t\t\t\t\t<sale-checkout-view-property-input-text :item=\"item\" :index=\"index\" :autocomplete=\"'off'\"/>\r\n\t\t\t\t\t<sale-checkout-view-property-note_error v-if=\"isFailure(item)\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t:message=\"getErrorMessage(item)\"/>\r\n\t\t\t\t  </div>\r\n\t\t\t\t</template>\r\n\t\t</div>\r\n\t`\r\n});","import { BitrixVue } from 'ui.vue';\r\nimport { Type } from 'main.core';\r\n\r\nBitrixVue.component('sale-checkout-view-property-list_view', {\r\n    props: ['items', 'number'],\r\n\tcomputed:\r\n\t{\r\n\t\tlocalize() {\r\n\t\t\treturn Object.freeze(\r\n\t\t\t\tBitrixVue.getFilteredPhrases('CHECKOUT_VIEW_PROPERTY_LIST_VIEW_'))\r\n\t\t},\r\n\t\tgetTitle()\r\n\t\t{\r\n\t\t\tlet message = this.localize.CHECKOUT_VIEW_PROPERTY_LIST_VIEW_ORDER_TITLE;\r\n\t\t\treturn message.replace('#ORDER_NUMBER#', this.number);\r\n\t\t},\r\n\t\tgetPropertiesShort()\r\n\t\t{\r\n\t\t\tconst properties = [];\r\n\t\t\t\r\n\t\t\tfor (let propertyId in this.items)\r\n\t\t\t{\r\n\t\t\t\tif (Type.isStringFilled(this.items[propertyId].value))\r\n\t\t\t\t{\r\n\t\t\t\t\tproperties.push(this.items[propertyId].value);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn properties.join(', ');\r\n\t\t}\r\n\t},\r\n    template: `\r\n\t\t<div class=\"checkout-basket-section\">\r\n\t\t<h2 class=\"checkout-basket-title\">{{localize.CHECKOUT_VIEW_PROPERTY_LIST_VIEW_SHIPPING_CONTACTS}}</h2>\r\n\t\r\n\t\t\t\t\t\t<div class=\"checkout-item-personal-order-info\">\r\n\t\t\t\t\t\t\t<div class=\"checkout-item-personal-order-payment\">\r\n<!--\t\t\t\t\t\t\t\t<div v-for=\"(item, index) in items\" :key=\"index\">{{item.name}}: <b>{{item.value}}</b></div>-->\r\n\t\t\t\t\t\t\t\t<div>{{getPropertiesShort}}</div>\r\n\t\t\t\t\t\t\t</div>\r\n<!--\t\t\t\t\t\t\t<div class=\"checkout-item-personal-order-shipping\">-->\r\n<!--\t\t\t\t\t\t\t\t<strong>{{localize.CHECKOUT_VIEW_PROPERTY_LIST_VIEW_SHIPPING_METHOD}}</strong>-->\r\n<!--\t\t\t\t\t\t\t\t<div>{{localize.CHECKOUT_VIEW_PROPERTY_LIST_VIEW_SHIPPING_METHOD_DESCRIPTION}}</div>-->\r\n<!--\t\t\t\t\t\t\t</div>-->\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\r\n\t\t</div>\r\n\t`\r\n});\r\n\r\n","import { BitrixVue } from 'ui.vue';\r\nimport { Application } from 'sale.checkout.const';\r\n\r\nimport 'sale.checkout.view.property';\r\n\r\nBitrixVue.component('sale-checkout-view-property', {\r\n    props: ['items', 'mode', 'order', 'errors'],\r\n    computed:\r\n    {\r\n        getConstMode()\r\n        {\r\n            return Application.mode\r\n        }\r\n    },\r\n    template: `\r\n\t\t<div>\r\n\t\t    <template v-if=\"mode === getConstMode.edit\">\r\n\t\t         <sale-checkout-view-property-list_edit :items=\"items\" :errors=\"errors\"/>\r\n\t\t    </template>\r\n\t\t    <template v-else>\r\n\t\t        <sale-checkout-view-property-list_view :items=\"items\" :number=\"order.accountNumber\"/>\r\n            </template>\r\n        </div>\r\n\t`\r\n});"],"names":["BitrixVue","component","props","methods","validate","Event","EventEmitter","emit","EventType","property","index","computed","checkedClassObject","item","validated","Const","unvalidated","failure","successful","template","onKeyDown","e","value","key","Filter","replace","indexOf","ctrlKey","metaKey","preventDefault","onInput","Formatter","formatValue","get","set","newValue","localize","Object","freeze","getFilteredPhrases","getErrorMessage","error","errors","find","propertyId","id","message","isPhone","type","phone","isName","name","isEmail","email","isFailure","getTitle","CHECKOUT_VIEW_PROPERTY_LIST_VIEW_ORDER_TITLE","number","getPropertiesShort","properties","items","Type","isStringFilled","push","join","getConstMode","Application","mode"],"mappings":"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"}