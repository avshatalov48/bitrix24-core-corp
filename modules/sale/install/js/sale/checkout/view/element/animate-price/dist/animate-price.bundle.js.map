{"version":3,"file":"animate-price.bundle.js","sources":["../src/animate-price.js"],"sourcesContent":["import { BitrixVue } from 'ui.vue';\nimport { Type } from 'main.core';\nimport { CurrencyCore } from 'currency.currency-core';\nimport 'sale.checkout.view.element.animate-price'\n\nBitrixVue.component('sale-checkout-view-element-animate_price', {\n\tprops: ['sum', 'currency', 'prefix'],\n\tdata()\n\t{\n\t\treturn {\n\t\t\tdisplaySum: this.sum,\n\t\t\tinterval: false,\n\t\t}\n\t},\n\tcomputed:\n\t{\n\t\tgetPrefix()\n\t\t{\n\t\t\treturn Type.isString(this.prefix) ? this.prefix:''\n\t\t},\n\t\tsumFormatted()\n\t\t{\n\t\t\treturn CurrencyCore.currencyFormat(this.displaySum, this.currency, true);\n\t\t},\n\t\tgetSum()\n\t\t{\n\t\t\treturn this.sum\n\t\t}\n\t},\n\tmethods:\n\t{\n\t\tanimated()\n\t\t{\n\t\t\tclearInterval(this.interval);\n\n\t\t\tif(this.sum !== this.displaySum)\n\t\t\t{\n\t\t\t\tthis.interval = window.setInterval(()=>\n\t\t\t\t{\n\t\t\t\t\tif(this.displaySum !== this.sum)\n\t\t\t\t\t{\n\t\t\t\t\t\tlet diff = (this.sum - this.displaySum) / 5;\n\n\t\t\t\t\t\tdiff = diff >= 0 ? Math.ceil(diff) : Math.floor(diff);\n\n\t\t\t\t\t\tif(diff > 0 && this.displaySum + diff > this.sum)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.displaySum = this.sum\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.displaySum = this.displaySum + diff\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tclearInterval(this.interval);\n\t\t\t\t\t}\n\t\t\t\t}, 10);\n\t\t\t}\n\t\t}\n\t},\n\twatch:\n\t{\n\t\tgetSum()\n\t\t{\n\t\t\tthis.animated()\n\t\t}\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<div v-html=\"getPrefix + sumFormatted\"/>\n\t`\n});"],"names":["BitrixVue","component","props","data","displaySum","sum","interval","computed","getPrefix","Type","isString","prefix","sumFormatted","CurrencyCore","currencyFormat","currency","getSum","methods","animated","clearInterval","window","setInterval","diff","Math","ceil","floor","watch","template"],"mappings":";;;;;;;AAKAA,iBAAS,CAACC,SAAV,CAAoB,0CAApB,EAAgE;CAC/DC,EAAAA,KAAK,EAAE,CAAC,KAAD,EAAQ,UAAR,EAAoB,QAApB,CADwD;CAE/DC,EAAAA,IAF+D,kBAG/D;CACC,WAAO;CACNC,MAAAA,UAAU,EAAE,KAAKC,GADX;CAENC,MAAAA,QAAQ,EAAE;CAFJ,KAAP;CAIA,GAR8D;CAS/DC,EAAAA,QAAQ,EACR;CACCC,IAAAA,SADD,uBAEC;CACC,aAAOC,cAAI,CAACC,QAAL,CAAc,KAAKC,MAAnB,IAA6B,KAAKA,MAAlC,GAAyC,EAAhD;CACA,KAJF;CAKCC,IAAAA,YALD,0BAMC;CACC,aAAOC,kCAAY,CAACC,cAAb,CAA4B,KAAKV,UAAjC,EAA6C,KAAKW,QAAlD,EAA4D,IAA5D,CAAP;CACA,KARF;CASCC,IAAAA,MATD,oBAUC;CACC,aAAO,KAAKX,GAAZ;CACA;CAZF,GAV+D;CAwB/DY,EAAAA,OAAO,EACP;CACCC,IAAAA,QADD,sBAEC;CAAA;;CACCC,MAAAA,aAAa,CAAC,KAAKb,QAAN,CAAb;;CAEA,UAAG,KAAKD,GAAL,KAAa,KAAKD,UAArB,EACA;CACC,aAAKE,QAAL,GAAgBc,MAAM,CAACC,WAAP,CAAmB,YACnC;CACC,cAAG,KAAI,CAACjB,UAAL,KAAoB,KAAI,CAACC,GAA5B,EACA;CACC,gBAAIiB,IAAI,GAAG,CAAC,KAAI,CAACjB,GAAL,GAAW,KAAI,CAACD,UAAjB,IAA+B,CAA1C;CAEAkB,YAAAA,IAAI,GAAGA,IAAI,IAAI,CAAR,GAAYC,IAAI,CAACC,IAAL,CAAUF,IAAV,CAAZ,GAA8BC,IAAI,CAACE,KAAL,CAAWH,IAAX,CAArC;;CAEA,gBAAGA,IAAI,GAAG,CAAP,IAAY,KAAI,CAAClB,UAAL,GAAkBkB,IAAlB,GAAyB,KAAI,CAACjB,GAA7C,EACA;CACC,cAAA,KAAI,CAACD,UAAL,GAAkB,KAAI,CAACC,GAAvB;CACA,aAHD,MAKA;CACC,cAAA,KAAI,CAACD,UAAL,GAAkB,KAAI,CAACA,UAAL,GAAkBkB,IAApC;CACA;CACD,WAdD,MAgBA;CACCH,YAAAA,aAAa,CAAC,KAAI,CAACb,QAAN,CAAb;CACA;CACD,SArBe,EAqBb,EArBa,CAAhB;CAsBA;CACD;CA9BF,GAzB+D;CAyD/DoB,EAAAA,KAAK,EACL;CACCV,IAAAA,MADD,oBAEC;CACC,WAAKE,QAAL;CACA;CAJF,GA1D+D;CAgE/D;CACAS,EAAAA,QAAQ;CAjEuD,CAAhE;;;;"}