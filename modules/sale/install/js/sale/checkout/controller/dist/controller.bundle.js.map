{"version":3,"file":"controller.bundle.js","sources":["../src/basket.js","../src/application.js"],"sourcesContent":["import { ajax } from 'main.core';\nimport {\n\tPool,\n\tTimer,\n\tBasket as Lib,\n\tProduct as ProductLib,\n} from 'sale.checkout.lib'\n\nimport {\n    Application as ApplicationConst,\n    RestMethod as RestMethodConst,\n    Component as ComponentConst,\n    Loader as LoaderConst,\n    Pool as PoolConst,\n} from 'sale.checkout.const';\n\nexport class Basket\n{\n    constructor()\n    {\n        this.pool = this.getPool();\n        this.timer = this.getTimer();\n\n        this.running = 'N';\n    }\n\n    /**\n     * @private\n     */\n    getPool()\n    {\n        return new Pool();\n    }\n\n    /**\n     * @private\n     */\n    getTimer()\n    {\n        return new Timer();\n    }\n\n    /**\n     * @private\n     */\n    isRunning()\n    {\n        return this.running === 'Y';\n    }\n\n    /**\n     * @private\n     */\n    setRunningY()\n    {\n        this.running = 'Y'\n    }\n\n    /**\n     * @private\n     */\n    setRunningN()\n    {\n        this.running = 'N'\n    }\n\n    /**\n     * @private\n     */\n    setStore(store)\n    {\n        this.store = store;\n        return this;\n    }\n\n    /**\n     * @private\n     */\n    setProvider(provider)\n    {\n        this.provider = provider;\n        return this;\n    }\n\n    /**\n     * @private\n     */\n    executeRestAnswer(command, result, extra)\n    {\n        return this.provider.execute(command, result, extra);\n    }\n\n    /**\n     * @private\n     */\n    getItem(index)\n    {\n        return this.store.getters['basket/get'](index);\n    }\n\n    /**\n     * @private\n     */\n    getBasket()\n    {\n        return this.store.getters['basket/getBasket'];\n    }\n\n\t/**\n\t * @private\n\t */\n\tgetBasketCollection()\n\t{\n\t\treturn this.getBasket().filter(item => item.deleted === 'N');\n\t}\n\n    /**\n     * @private\n     */\n    changeItem(product)\n    {\n        this.store.dispatch('basket/changeItem', {\n            index: product.index,\n            fields: product.fields\n        });\n    }\n\n    /**\n     * @private\n     */\n    setQuantity(index, quantity)\n    {\n        let fields = this.getItem(index);\n\n        fields.quantity = quantity;\n        fields.baseSum = this.round(fields.basePrice * fields.quantity);\n        fields.sum = this.round(fields.price * fields.quantity);\n        fields.discount.sum = this.round(fields.discount.price * fields.quantity);\n\n        this.refreshDiscount();\n        this.refreshTotal();\n\n        this.pool.add(PoolConst.action.quantity, index, {id: fields.id, value: fields.quantity});\n        this.changeItem({index, fields});\n        this.shelveCommit();\n    }\n\n    refreshDiscount()\n    {\n        let basket = this.getBasket();\n        if(basket.length > 0)\n        {\n            this.store.dispatch('basket/setDiscount', {\n                sum: basket.reduce((result, value) => result + value.discount.sum, 0),\n            });\n        }\n    }\n\n    refreshTotal()\n    {\n        let basket = this.getBasketCollection();\n        if(basket.length > 0)\n        {\n            this.store.dispatch('basket/setTotal', {\n                price: basket.reduce((result, value) => result + value.sum, 0),\n                basePrice: basket.reduce((result, value) => result + value.baseSum, 0)\n            });\n        }\n    }\n\n    /**\n     * @private\n     */\n    removeItem(product)\n    {\n        return this.store.dispatch('basket/removeItem', {\n            index: product.index\n        });\n    }\n\n    /**\n     * @private\n     */\n    round(value, precision = 10)\n    {\n        const factor = Math.pow(10, precision);\n\n        return Math.round(value * factor) / factor;\n    }\n\n    emitOnBasketChange()\n    {\n        BX.onCustomEvent('OnBasketChange');\n    }\n\n    /**\n     * @private\n     */\n    handlerOrderSuccess()\n    {\n        this.emitOnBasketChange()\n    }\n\n    /**\n     * @private\n     */\n    handlerRemoveProductSuccess()\n    {\n        this.emitOnBasketChange()\n    }\n\n    /**\n     * @private\n     */\n    handlerRestoreProductSuccess()\n    {\n        this.emitOnBasketChange()\n    }\n\n    /**\n     * @private\n     */\n    handlerRemove(event)\n    {\n        let index = event.getData().index;\n        let fields = this.getItem(index);\n\n        fields.deleted = 'Y';\n        fields.status = LoaderConst.status.wait;\n\n        this.pool.add(PoolConst.action.delete, index, {id: fields.id, fields: {value: 'Y'}});\n        this.changeItem({index, fields});\n        this.shelveCommit();\n    }\n\n    /**\n     * @private\n     */\n    handlerSuccessRemove(event)\n    {\n        let index = event.getData().index;\n\n        this.timer.create(5000, index + '_DELETE', () =>\n            this.removeItem({index})\n                .then(() =>\n                {\n                    if(this.getBasket().length === 0)\n                    {\n                        this.store.dispatch('application/setStage', {stage: ApplicationConst.stage.empty})\n                    }\n                })\n        )\n    }\n\n    /**\n     * @private\n     */\n    handlerRestore(event)\n    {\n        let index = event.getData().index;\n        let fields = this.getItem(index);\n\n        this.timer.clean({\n            index: index + '_DELETE'\n        });\n\n        fields.deleted = 'N';\n        fields.status = LoaderConst.status.wait;\n\n        //todo: send all fields ?\n        this.pool.add(PoolConst.action.restore, index, {\n            basePrice:fields.basePrice,\n            baseSum:fields.baseSum,\n            currency:fields.currency,\n            discount:fields.discount,\n            id:fields.id,\n            measureText:fields.measureText,\n            module:fields.module,\n            name:fields.name,\n            price:fields.price,\n            product:fields.product,\n            productProviderClass:fields.productProviderClass,\n            props:fields.props,\n            quantity:fields.quantity,\n            sum:fields.sum,\n        });\n        this.changeItem({index, fields});\n        this.shelveCommit();\n    }\n\n    /**\n     * @private\n     */\n    handlerChangeQuantity(event)\n    {\n        // let data = event.getData().data;\n        let index = event.getData().index;\n        let fields = this.getItem(index);\n\n        let quantity = fields.quantity;\n        let ratio = fields.product.ratio;\n        let available = fields.product.availableQuantity;\n\n        quantity = Lib.roundValue(quantity)\n        ratio = Lib.roundValue(ratio)\n\n        quantity = isNaN(quantity) ? 0:quantity\n\n        if (ratio > 0 && quantity < ratio)\n        {\n            quantity = ratio;\n        }\n\n\t\tif (ProductLib.isService(fields))\n\t\t{\n\t\t\t// for services\n\t\t\t// do nothing\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// for products\n\t\t\tif (ProductLib.isLimitedQuantity(fields))\n\t\t\t{\n\t\t\t\tif (available > 0 && quantity > available)\n\t\t\t\t{\n\t\t\t\t\tquantity = available;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n        quantity = Lib.toFixed(quantity, ratio, available)\n\n        if(fields.quantity !== quantity)\n        {\n            this.setQuantity(index, quantity)\n        }\n    }\n\n    /**\n     * @private\n     */\n    handlerQuantityPlus(event)\n    {\n        let index = event.getData().index;\n        let fields = this.getItem(index);\n        let quantity = fields.quantity;\n        let ratio = fields.product.ratio;\n        let available = fields.product.availableQuantity;\n\n        quantity = Lib.roundValue(quantity)\n        ratio = Lib.roundValue(ratio)\n\n        quantity = quantity + ratio;\n\n        if (Lib.isValueFloat(quantity))\n        {\n            quantity = Lib.roundFloatValue(quantity)\n        }\n\n        if (ProductLib.isService(fields))\n\t\t{\n\t\t\t// for services\n\t\t\t// do nothing\n\t\t}\n        else\n\t\t{\n\t\t\t// for products\n\t\t\tif (ProductLib.isLimitedQuantity(fields))\n\t\t\t{\n\t\t\t\tif (available > 0 && quantity > available)\n\t\t\t\t{\n\t\t\t\t\tquantity = available;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n        quantity = Lib.toFixed(quantity, ratio, available)\n\n        if(fields.quantity < quantity)\n        {\n            this.setQuantity(index, quantity)\n        }\n    }\n\n    /**\n     * @private\n     */\n    handlerQuantityMinus(event)\n    {\n        let index = event.getData().index;\n        let fields = this.getItem(index);\n        let quantity = fields.quantity;\n        let ratio = fields.product.ratio;\n        let available = fields.product.availableQuantity;\n\n        quantity = Lib.roundValue(quantity)\n        ratio = Lib.roundValue(ratio)\n\n        let delta = quantity = quantity - ratio;\n\n        if(Lib.isValueFloat(quantity))\n        {\n            quantity = Lib.roundFloatValue(quantity)\n\t\t\tdelta = Lib.roundFloatValue(delta)\n        }\n\n        if (ratio > 0 && quantity < ratio)\n        {\n            quantity = ratio;\n        }\n\n\t\tif (ProductLib.isService(fields))\n\t\t{\n\t\t\t// for services\n\t\t\t// do nothing\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// for products\n\t\t\tif (ProductLib.isLimitedQuantity(fields))\n\t\t\t{\n\t\t\t\tif (available > 0 && quantity > available)\n\t\t\t\t{\n\t\t\t\t\tquantity = available;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n        quantity = Lib.toFixed(quantity, ratio, available)\n\n        if(delta >= ratio)\n        {\n            this.setQuantity(index, quantity)\n        }\n    }\n\n    /**\n     * @private\n     */\n    commit()\n    {\n        return new Promise((resolve, reject) =>\n        {\n            let fields = {};\n\n            if(this.pool.isEmpty() === false)\n            {\n                fields = this.pool.get();\n                this.pool.clean();\n\n                const component = ComponentConst.bitrixSaleOrderCheckout;\n                const cmd = RestMethodConst.saleEntityRecalculateBasket;\n\n                ajax.runComponentAction(\n                    component,\n                    cmd,\n                    {\n                        data: {\n                            actions: fields\n                        },\n                        signedParameters: this.store.getters['application/getSignedParameters']\n                    }\n                )\n                .then((result) => this.executeRestAnswer(cmd, result, this.pool)\n                    .then(() => this.commit()\n                        .then(() => resolve())))\n                .catch()\n            }\n            else\n            {\n                resolve();\n            }\n        });\n    }\n\n    /**\n     * @private\n     */\n    shelveCommit(index = 'BASKET')\n    {\n        if(this.isRunning() === false)\n        {\n            this.timer.create(300, index,\n                () => {\n                    this.setRunningY();\n                    this.commit()\n                        .then(()=>this.setRunningN())\n                }\n            );\n        }\n    }\n\n    /**\n     * @private\n     */\n    getStatus()\n    {\n        return this.store.getters['basket/getStatus'];\n    }\n\n    /**\n     * @private\n     */\n    setStatusWait()\n    {\n        let app = {status: LoaderConst.status.wait};\n        return this.store.dispatch('basket/setStatus', app);\n    }\n\n    /**\n     * @private\n     */\n    setStatusNone()\n    {\n        let app = {status: LoaderConst.status.none};\n        return this.store.dispatch('basket/setStatus', app);\n    }\n\n    /**\n     * @private\n     */\n    handlerNeedRefreshY()\n    {\n        this.setNeedRefreshY();\n        this.setStatusWait();\n    }\n\n    /**\n     * @private\n     */\n    handlerNeedRefreshN()\n    {\n        this.setNeedRefreshN();\n        this.setStatusNone();\n    }\n\n    /**\n     * @private\n     */\n    setNeedRefreshY()\n    {\n        let app = {needRefresh: 'Y'};\n        return this.store.dispatch('basket/setNeedRefresh', app);\n    }\n\n    /**\n     * @private\n     */\n    setNeedRefreshN()\n    {\n        let app = {needRefresh: 'N'};\n        return this.store.dispatch('basket/setNeedRefresh', app);\n    }\n\n    /**\n     * @private\n     */\n    handlerChangeSku(event)\n    {\n        let offerId = event.getData().data[0].ID;\n\n        let index = event.getData().index;\n        let fields = this.getItem(index);\n\n        fields.status = LoaderConst.status.wait;\n\n        this.pool.add(PoolConst.action.offer, index, {id: fields.id, fields: {offerId: offerId}});\n        this.changeItem({index, fields});\n        this.shelveCommit();\n    }\n}\n","import { Runtime, ajax } from 'main.core';\nimport { EventEmitter } from 'main.core.events'\nimport { BasketRestHandler } from 'sale.checkout.provider.rest'\nimport {\n\tApplication as ApplicationConst,\n\tRestMethod as RestMethodConst,\n\tComponent as ComponentConst,\n\tConsent as ConsentConst,\n\tLoader as LoaderConst,\n\tProperty as PropertyConst,\n\tEventType\n} from 'sale.checkout.const';\n\nimport { History } from 'sale.checkout.lib';\n\nimport { Basket } from \"./basket\";\n\nexport class Application\n{\n\tconstructor(option)\n\t{\n\t\tthis.init(option)\n\t\t\t.then(() => this.initProvider())\n\t\t\t.then(() => this.iniController())\n\t\t\t.then(() => this.subscribeToEvents())\n\t\t\t.then(() => this.subscribeToStoreChanges())\n\t}\n\n\t/**\n\t * @private\n\t */\n\tinit(option)\n\t{\n\t\tthis.store = option.store;\n\t\treturn new Promise((resolve, reject) => resolve());\n\t}\n\n\t/**\n\t * @private\n\t */\n\tinitProvider()\n\t{\n\t\tthis.provider = BasketRestHandler.create({store: this.store})\n\t\treturn new Promise((resolve, reject) => resolve());\n\t}\n\n\t/**\n\t * @private\n\t */\n\tiniController()\n\t{\n\t\tthis.basket = new Basket().setStore(this.store).setProvider(this.provider);\n\t\treturn new Promise((resolve, reject) => resolve());\n\t}\n\n\t/**\n\t * @private\n\t */\n\texecuteRestAnswer(command, result, extra)\n\t{\n\t\treturn this.provider.execute(command, result, extra);\n\t}\n\n\t/**\n\t * @private\n\t */\n\tsubscribeToEvents()\n\t{\n\t\tEventEmitter.subscribe(EventType.order.success, (e)=>this.basket.handlerOrderSuccess(e));\n\n\t\tEventEmitter.subscribe(EventType.basket.removeProduct, (e)=>this.basket.handlerRemoveProductSuccess(e));\n\t\tEventEmitter.subscribe(EventType.basket.restoreProduct, (e)=>this.basket.handlerRestoreProductSuccess(e));\n\n\t\tEventEmitter.subscribe(EventType.basket.buttonRemoveProduct, Runtime.debounce((e)=>this.basket.handlerRemove(e), 500, this));\n\t\tEventEmitter.subscribe(EventType.basket.buttonPlusProduct, (e) => this.basket.handlerQuantityPlus(e));\n\t\tEventEmitter.subscribe(EventType.basket.buttonMinusProduct, (e) => this.basket.handlerQuantityMinus(e));\n\t\tEventEmitter.subscribe(EventType.basket.inputChangeQuantityProduct, (e) => this.basket.handlerChangeQuantity(e));\n\t\tEventEmitter.subscribe(EventType.basket.buttonRestoreProduct, Runtime.debounce((e) => this.basket.handlerRestore(e), 500, this));\n\t\tEventEmitter.subscribe(EventType.basket.needRefresh, (e) => this.basket.handlerNeedRefreshY(e));\n\t\tEventEmitter.subscribe(EventType.basket.refreshAfter, (e) => this.basket.handlerNeedRefreshN(e));\n\n\t\tEventEmitter.subscribe(EventType.basket.changeSku, (e) => this.basket.handlerChangeSku(e));\n\n\t\tEventEmitter.subscribe(EventType.consent.refused, () => this.handlerConsentRefused());\n\t\tEventEmitter.subscribe(EventType.consent.accepted, () => this.handlerConsentAccepted());\n\n\t\tEventEmitter.subscribe(EventType.property.validate, (e) => this.handlerValidateProperty(e));\n\n\t\tEventEmitter.subscribe(EventType.element.buttonCheckout, Runtime.debounce(() => this.handlerCheckout(), 1000, this));\n\t\tEventEmitter.subscribe(EventType.element.buttonShipping, Runtime.debounce(() => this.handlerShipping(), 1000, this));\n\n\t\tEventEmitter.subscribe(EventType.paysystem.beforeInitList, () => this.paySystemSetStatusWait());\n\t\tEventEmitter.subscribe(EventType.paysystem.afterInitList, () => this.paySystemSetStatusNone());\n\t}\n\n\t/**\n\t * @private\n\t */\n\tsubscribeToStoreChanges()\n\t{\n\t\t// this.store.subscribe((mutation, state) => {\n\t\t//\t const { payload, type } = mutation;\n\t\t//\t if (type === 'basket/setNeedRefresh')\n\t\t//\t {\n\t\t//\t \talert('@@');\n\t\t//\t \tthis.getData();\n\t\t//\t }\n\t\t// });\n\n\t\treturn new Promise((resolve, reject) => resolve());\n\t}\n\n\t/**\n\t * @private\n\t */\n\tpaySystemSetStatusWait()\n\t{\n\t\tlet paySystem = { status: LoaderConst.status.wait};\n\t\treturn this.store.dispatch('pay-system/setStatus', paySystem);\n\t}\n\n\t/**\n\t * @private\n\t */\n\tpaySystemSetStatusNone()\n\t{\n\t\tlet paySystem = { status: LoaderConst.status.none};\n\t\treturn this.store.dispatch('pay-system/setStatus', paySystem);\n\t}\n\n\t/**\n\t * @private\n\t */\n\tappSetStatusWait()\n\t{\n\t\tlet app = { status: LoaderConst.status.wait};\n\t\treturn this.store.dispatch('application/setStatus', app);\n\t}\n\n\t/**\n\t * @private\n\t */\n\tappSetStatusNone()\n\t{\n\t\tlet app = { status: LoaderConst.status.none};\n\t\treturn this.store.dispatch('application/setStatus', app);\n\t}\n\n\t/**\n\t * @private\n\t */\n\thandlerConsentAccepted()\n\t{\n\t\tthis.store.dispatch('consent/setStatus', ConsentConst.status.accepted);\n\t}\n\n\t/**\n\t * @private\n\t */\n\thandlerConsentRefused()\n\t{\n\t\tthis.store.dispatch('consent/setStatus', ConsentConst.status.refused);\n\t}\n\n\t/**\n\t * @private\n\t */\n\thandlerCheckout()\n\t{\n\t\tBX.onCustomEvent(ConsentConst.validate.submit, []);\n\n\t\tconst consent = this.store.getters['consent/get'];\n\t\tconst consentStatus = this.store.getters['consent/getStatus'];\n\t\tconst allowed = consent.id > 0 ?  consentStatus === ConsentConst.status.accepted:true;\n\n\t\tif(allowed)\n\t\t{\n\t\t\t// this.propertiesValidate();\n\t\t\t// this.propertiesIsValid() ? alert('propsSuccess'):alert('propsError')\n\n\t\t\tthis.appSetStatusWait();\n\n\t\t\tthis.saveOrder()\n\t\t\t\t.then(() => {\n\t\t\t\t\t\tthis.appSetStatusNone()\n\t\t\t\t\t\t\t.then(()=>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlet order = this.store.getters['order/getOrder'];\n\n\t\t\t\t\t\t\t\tif(order.id>0)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tconst url = History.pushState(\n\t\t\t\t\t\t\t\t\t\tthis.store.getters['application/getPathLocation'],\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\taccountNumber: order.accountNumber,\n\t\t\t\t\t\t\t\t\t\t\taccess: order.hash\n\t\t\t\t\t\t\t\t\t\t})\n\n\t\t\t\t\t\t\t\t\tthis.store.dispatch('application/setPathLocation', url);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t\t\t.catch(() => this.appSetStatusNone())\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t */\n\thandlerShipping()\n\t{\n\t\tthis.store.dispatch('application/setStage', {stage: ApplicationConst.stage.view});\n\t\t// todo\n\t\tdelete BX.UserConsent;\n\n\t\tlet order = this.store.getters['order/getOrder'];\n\t\tif(order.id>0)\n\t\t{\n\t\t\tconst component = ComponentConst.bitrixSaleOrderCheckout;\n\t\t\tconst cmd = RestMethodConst.saleEntityPaymentPay;\n\t\t\treturn ajax.runComponentAction(\n\t\t\t\tcomponent,\n\t\t\t\tcmd,\n\t\t\t\t{\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tfields: {\n\t\t\t\t\t\t\torderId: order.id,\n\t\t\t\t\t\t\taccessCode: order.hash\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tsignedParameters: this.store.getters['application/getSignedParameters']\n\t\t\t\t}\n\t\t\t)\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t */\n\tsaveOrder()\n\t{\n\t\tconst component = ComponentConst.bitrixSaleOrderCheckout;\n\t\tconst cmd = RestMethodConst.saleEntitySaveOrder;\n\t\treturn ajax.runComponentAction(\n\t\t\tcomponent,\n\t\t\tcmd,\n\t\t\t{\n\t\t\t\tdata: {\n\t\t\t\t\tfields: {\n\t\t\t\t\t\tsiteId: this.store.getters['application/getSiteId'],\n\t\t\t\t\t\tpersonTypeId: this.store.getters['application/getPersonTypeId'],\n\t\t\t\t\t\ttradingPlatformId: this.store.getters['application/getTradingPlatformId'],\n\t\t\t\t\t\tproperties: this.preparePropertyFields(\n\t\t\t\t\t\t\tthis.getPropertyList()\n\t\t\t\t\t\t),\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tsignedParameters: this.store.getters['application/getSignedParameters']\n\t\t\t}\n\t\t)\n\t\t\t.then((result) => this.executeRestAnswer(cmd, result))\n\t\t\t.catch((result) => this.executeRestAnswer(cmd, {error: result.errors}));\n\t}\n\n\t/**\n\t * @private\n\t */\n\thandlerValidateProperty(event)\n\t{\n\t\tconst property = {};\n\t\tproperty.index = event.getData().index;\n\t\tproperty.fields = this.getPropertyItem(property.index);\n\t\tthis.changeValidatedProperty(property);\n\t}\n\n\t/**\n\t * @private\n\t */\n\tgetPropertyItem(index)\n\t{\n\t\treturn this.store.getters['property/get'](index);\n\t}\n\n\t/**\n\t * @private\n\t */\n\tchangeValidatedProperty(property)\n\t{\n\t\tconst fields = property.fields;\n\t\tlet errors = this.store.getters['property/getErrors'];\n\t\tif (this.propertyDataValidate(fields))\n\t\t{\n\t\t\terrors = this.deletePropertyError(fields, errors);\n\t\t}\n\t\telse\n\t\t{\n\t\t\terrors = this.addPropertyError(fields, errors);\n\t\t}\n\t\tthis.provider.setModelPropertyError(errors);\n\t}\n\n\t/**\n\t * @private\n\t */\n\tpropertyDataValidate(fields)\n\t{\n\t\treturn !(fields.required === 'Y' && fields.value === '');\n\t}\n\n\t/**\n\t * @private\n\t */\n\tdeletePropertyError(fields, errors)\n\t{\n\t\tfor (const errorIndex in errors)\n\t\t{\n\t\t\tif (errors[errorIndex]['propertyId'] === fields.id)\n\t\t\t{\n\t\t\t\terrors.splice(errorIndex, 1);\n\t\t\t}\n\t\t}\n\t\treturn errors;\n\t}\n\n\t/**\n\t * @private\n\t */\n\taddPropertyError(fields, errors)\n\t{\n\t\tconst errorIds = errors.map(item => item.propertyId);\n\t\tif (!errorIds.includes(fields.id))\n\t\t{\n\t\t\terrors.push({propertyId: fields.id});\n\t\t}\n\t\treturn errors;\n\t}\n\n\t/**\n\t * @private\n\t */\n\tgetPropertyList()\n\t{\n\t\tconst result = [];\n\t\tlet list = this.store.getters['property/getProperty'];\n\t\ttry\n\t\t{\n\t\t\tfor (let key in list)\n\t\t\t{\n\t\t\t\tif (!list.hasOwnProperty(key))\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tresult[list[key].id] = list[key];\n\t\t\t}\n\t\t}\n\t\tcatch (e) {}\n\n\t\treturn result;\n\t}\n\n\t/**\n\t * @private\n\t */\n\tpreparePropertyFields(list)\n\t{\n\t\tlet fields = {};\n\t\tlist.forEach((property, inx)=>\n\t\t{\n\t\t\tfields[inx] = property.value\n\t\t})\n\t\treturn fields;\n\t}\n}"],"names":["Basket","pool","getPool","timer","getTimer","running","Pool","Timer","store","provider","command","result","extra","execute","index","getters","getBasket","filter","item","deleted","product","dispatch","fields","quantity","getItem","baseSum","round","basePrice","sum","price","discount","refreshDiscount","refreshTotal","add","PoolConst","action","id","value","changeItem","shelveCommit","basket","length","reduce","getBasketCollection","precision","factor","Math","pow","BX","onCustomEvent","emitOnBasketChange","event","getData","status","LoaderConst","wait","create","removeItem","then","stage","ApplicationConst","empty","clean","restore","currency","measureText","module","name","productProviderClass","props","ratio","available","availableQuantity","Lib","roundValue","isNaN","ProductLib","isService","isLimitedQuantity","toFixed","setQuantity","isValueFloat","roundFloatValue","delta","Promise","resolve","reject","isEmpty","get","component","ComponentConst","bitrixSaleOrderCheckout","cmd","RestMethodConst","saleEntityRecalculateBasket","ajax","runComponentAction","data","actions","signedParameters","executeRestAnswer","commit","isRunning","setRunningY","setRunningN","app","none","setNeedRefreshY","setStatusWait","setNeedRefreshN","setStatusNone","needRefresh","offerId","ID","offer","Application","option","init","initProvider","iniController","subscribeToEvents","subscribeToStoreChanges","BasketRestHandler","setStore","setProvider","EventEmitter","subscribe","EventType","order","success","e","handlerOrderSuccess","removeProduct","handlerRemoveProductSuccess","restoreProduct","handlerRestoreProductSuccess","buttonRemoveProduct","Runtime","debounce","handlerRemove","buttonPlusProduct","handlerQuantityPlus","buttonMinusProduct","handlerQuantityMinus","inputChangeQuantityProduct","handlerChangeQuantity","buttonRestoreProduct","handlerRestore","handlerNeedRefreshY","refreshAfter","handlerNeedRefreshN","changeSku","handlerChangeSku","consent","refused","handlerConsentRefused","accepted","handlerConsentAccepted","property","validate","handlerValidateProperty","element","buttonCheckout","handlerCheckout","buttonShipping","handlerShipping","paysystem","beforeInitList","paySystemSetStatusWait","afterInitList","paySystemSetStatusNone","paySystem","ConsentConst","submit","consentStatus","allowed","appSetStatusWait","saveOrder","appSetStatusNone","url","History","pushState","accountNumber","access","hash","view","UserConsent","saleEntityPaymentPay","orderId","accessCode","saleEntitySaveOrder","siteId","personTypeId","tradingPlatformId","properties","preparePropertyFields","getPropertyList","error","errors","getPropertyItem","changeValidatedProperty","propertyDataValidate","deletePropertyError","addPropertyError","setModelPropertyError","required","errorIndex","splice","errorIds","map","propertyId","includes","push","list","key","hasOwnProperty","forEach","inx"],"mappings":"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"}