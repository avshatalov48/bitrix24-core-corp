{"version":3,"file":"registry.bundle.js","sources":["../src/application/pay-system.js","../src/application/payment.js","../src/payment-system/payment-info/button.js","../src/payment-system/payment-info/pay-system-small-card.js","../src/payment-system/button.js","../src/payment-system/check.js","../src/payment-system/error-box.js","../src/payment-system/pay-system-row.js","../src/payment-system/pay-system-list.js","../src/payment-system/pay-system-result.js","../src/payment-system/payment-info.js","../src/payment-system/reset-panel.js","../src/payment-system/backdrop.js","../src/payment-system/popup.js"],"sourcesContent":["import { BitrixVue } from 'ui.vue';\nimport { Settings } from 'sale.payment-pay.lib';\nimport { StageType } from 'sale.payment-pay.const';\nimport { MixinMethods } from 'sale.payment-pay.mixins.application';\nimport { BackendProvider } from 'sale.payment-pay.backend-provider';\n\nBitrixVue.component('sale-payment_pay-components-application-pay_system', {\n\tprops: {\n\t\toptions: Object,\n\t},\n\tmixins: [MixinMethods],\n\tdata()\n\t{\n\t\tlet settings = new Settings(this.options);\n\n\t\treturn {\n\t\t\tstageType: StageType,\n\t\t\tstages: this.prepareParamsStages(),\n\t\t\tstage: this.setStageType(),\n\t\t\tloading: false,\n\t\t\tpaymentProcess: this.prepareParamsPaymentProcess(settings)\n\t\t};\n\t},\n\tcreated()\n\t{\n\t\tthis.initPayment();\n\t\tthis.subscribeToGlobalEvents();\n\t},\n\tmethods:\n\t{\n\t\tinitBackendProvider()\n\t\t{\n\t\t\tthis.backendProvider = new BackendProvider({\n\t\t\t\treturnUrl: this.paymentProcess.returnUrl,\n\t\t\t\torderId: this.paymentProcess.orderId,\n\t\t\t\taccessCode: this.paymentProcess.accessCode,\n\t\t\t});\n\t\t},\n\t\tprepareParamsStages()\n\t\t{\n\t\t\tlet settings = new Settings(this.options);\n\t\t\treturn {\n\t\t\t\tpaySystemList: {\n\t\t\t\t\tpaySystems: settings.get('app.paySystems', []),\n\t\t\t\t\tselectedPaySystem: null,\n\t\t\t\t\t// title: settings.get('app.title'),\n\t\t\t\t},\n\t\t\t\tpaySystemErrors: {\n\t\t\t\t\terrors: [],\n\t\t\t\t},\n\t\t\t\tpaySystemResult: {\n\t\t\t\t\thtml: null,\n\t\t\t\t\tfields: null,\n\t\t\t\t},\n\t\t\t};\n\t\t},\n\t\tsetStageType()\n\t\t{\n\t\t\treturn StageType.list;\n\t\t}\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<div class=\"salescenter-payment-pay-app\">\n\t\t\t<template v-if=\"stage === stageType.list\">\n\t\t\t\t<sale-payment_pay-components-payment_system-pay_system_list\n\t\t\t\t\t:paySystems=\"stages.paySystemList.paySystems\"\n\t\t\t\t\t:selectedPaySystem=\"stages.paySystemList.selectedPaySystem\"\n\t\t\t\t\t:loading=\"loading\"\n\t\t\t\t\t@start-payment=\"startPayment($event)\"/>\n\t\t\t</template>\n\t\t\t<template v-else>\n\t\t\t\t<!--region popup/backdrop -->\n\t\t\t\t<sale-payment_pay-components-payment_system-backdrop :paySystem=\"currentPS(stages.paySystemList.selectedPaySystem, stages.paySystemList.paySystems)\">\n\t\t\t\t\t<template v-slot:main-content>\n\t\t\t\t\t\t<template v-if=\"stage === stageType.errors\">\n\t\t\t\t\t\t\t<sale-payment_pay-components-payment_system-error_box :errors=\"stages.paySystemErrors.errors\"/>\n\t\t\t\t\t\t</template>\n\n\t\t\t\t\t\t<template v-else-if=\"stage === stageType.result\">\n\t\t\t\t\t\t\t<sale-payment_pay-components-payment_system-pay_system_result\n\t\t\t\t\t\t\t\t:html=\"stages.paySystemResult.html\"\n\t\t\t\t\t\t\t\t:fields=\"stages.paySystemResult.fields\">\n\t\t\t\t\t\t\t\t\t<template v-slot:default><sale-payment_pay-components-payment_system-reset_panel @reset=\"resetView()\"/></template>\n\t\t\t\t\t\t\t</sale-payment_pay-components-payment_system-pay_system_result>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</template>\n\t\t\t\t</sale-payment_pay-components-payment_system-backdrop>\n\t\t\t\t<!--endregion-->\n\t\t\t</template>\n\t\t</div>\n\t`,\n});\n","import { BitrixVue } from 'ui.vue';\nimport { Settings } from 'sale.payment-pay.lib';\nimport { StageType } from 'sale.payment-pay.const';\nimport { MixinMethods } from 'sale.payment-pay.mixins.application';\nimport { BackendProvider } from 'sale.payment-pay.backend-provider';\n\nBitrixVue.component('sale-payment_pay-components-application-payment', {\n\tprops: {\n\t\toptions: Object,\n\t},\n\tmixins: [MixinMethods],\n\tdata()\n\t{\n\t\tlet settings = new Settings(this.options);\n\n\t\treturn {\n\t\t\tstageType: StageType,\n\t\t\tstages: this.prepareParamsStages(),\n\t\t\tstage: this.setStageType(),\n\t\t\tloading: false,\n\t\t\tpaymentProcess: this.prepareParamsPaymentProcess(settings)\n\t\t};\n\t},\n\tcreated()\n\t{\n\t\tthis.initPayment();\n\t\tthis.subscribeToGlobalEvents();\n\t},\n\tmethods:\n\t{\n\t\tinitBackendProvider()\n\t\t{\n\t\t\tthis.backendProvider = new BackendProvider({\n\t\t\t\treturnUrl: this.paymentProcess.returnUrl,\n\t\t\t\torderId: this.paymentProcess.orderId,\n\t\t\t\taccessCode: this.paymentProcess.accessCode,\n\t\t\t});\n\t\t},\n\t\tprepareParamsStages()\n\t\t{\n\t\t\tlet settings = new Settings(this.options);\n\n\t\t\treturn {\n\t\t\t\tpaymentInfo: {\n\t\t\t\t\tpaySystem: settings.get('app.paySystems', [])[0],\n\t\t\t\t\ttitle: settings.get('app.title'),\n\t\t\t\t\tsum: settings.get('payment.sumFormatted'),\n\t\t\t\t\tpaid: settings.get('payment.paid'),\n\t\t\t\t\tchecks: settings.get('payment.checks', []),\n\t\t\t\t},\n\t\t\t\tpaySystemList:{\n\t\t\t\t\tselectedPaySystem: null\n\t\t\t\t},\n\t\t\t\tpaySystemErrors: {\n\t\t\t\t\terrors: [],\n\t\t\t\t},\n\t\t\t\tpaySystemResult: {\n\t\t\t\t\thtml: null,\n\t\t\t\t\tfields: null,\n\t\t\t\t},\n\t\t\t};\n\t\t},\n\t\tsetStageType()\n\t\t{\n\t\t\treturn StageType.paymentInfo;\n\t\t}\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<div class=\"salescenter-payment-pay-app\">\n\t\t\t<sale-payment_pay-components-payment_system-payment_info\n                v-if=\"stage === stageType.paymentInfo\"\n\t\t\t\t:paySystem=\"stages.paymentInfo.paySystem\"\n                :title=\"stages.paymentInfo.title\"\n\t\t\t\t:sum=\"stages.paymentInfo.sum\"\n\t\t\t\t:paid=\"stages.paymentInfo.paid\"\n\t\t\t\t:loading=\"loading\"\n\t\t\t\t:checks=\"stages.paymentInfo.checks\"\n                @start-payment=\"startPayment($event)\">\n\t\t\t</sale-payment_pay-components-payment_system-payment_info>\n            <sale-payment_pay-components-payment_system-error_box\n                v-if=\"stage === stageType.errors\"\n                :errors=\"stages.paySystemErrors.errors\">\n            \t<sale-payment_pay-components-payment_system-reset_panel @reset=\"resetView()\"/>\n            </sale-payment_pay-components-payment_system-error_box>\n            <sale-payment_pay-components-payment_system-pay_system_result\n                v-if=\"stage === stageType.result\"\n                :html=\"stages.paySystemResult.html\"\n                :fields=\"stages.paySystemResult.fields\">\n            \t<sale-payment_pay-components-payment_system-reset_panel @reset=\"resetView()\"/>\n            </sale-payment_pay-components-payment_system-pay_system_result>\n\t\t</div>\n\t`,\n});","import { BitrixVue } from 'ui.vue';\nimport { MixinPaymentInfoButton } from 'sale.payment-pay.mixins.payment-system';\n\nBitrixVue.component('sale-payment_pay-components-payment_system-payment_info-button', {\n\tprops:\n\t{\n\t\tloading: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t\trequired: false,\n\t\t},\n\t},\n\tmixins:[MixinPaymentInfoButton],\n\t// language=Vue\n\ttemplate: `\n\t\t<button :class=\"classes\" @click=\"onClick($event)\">\n\t\t\t<slot></slot>\n\t\t</button>\n\t`,\n});\n","import { BitrixVue } from 'ui.vue';\n\nBitrixVue.component('sale-payment_pay-components-payment_system-payment_info-pay_system_small_card', {\n\tprops: {\n\t\tlogo: String,\n\t\tname: String,\n\t},\n\ttemplate: `\n\t\t<div class=\"order-payment-operator\">\n\t\t\t<img :src=\"logo\" :alt=\"name\" v-if=\"logo\">\n\t\t\t<div class=\"order-payment-pay-system-name\" v-else>{{ name }}</div>\n\t\t</div>\n\t`,\n});","import { BitrixVue } from 'ui.vue';\nimport { MixinButton } from 'sale.payment-pay.mixins.payment-system';\n\nBitrixVue.component('sale-payment_pay-components-payment_system-button', {\n\tprops:\n\t{\n\t\tloading: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t\trequired: false,\n\t\t},\n\t},\n\tcomputed:\n\t{\n\t\tclasses()\n\t\t{\n\t\t\treturn {\n\t\t\t\t'order-payment-method-item-button': true,\n\t\t\t\t'btn': true,\n\t\t\t\t'btn-primary': true,\n\t\t\t\t'rounded-pill': true,\n\t\t\t\t'pay-mode': true,\n\t\t\t\t'order-payment-loader': this.loading,\n\t\t\t};\n\t\t},\n\t\tbuttonClasses()\n\t\t{\n\t\t\treturn {\n\t\t\t\t'loading-button-text': this.loading,\n\t\t\t};\n\t\t},\n\t},\n\tmixins:[MixinButton],\n\t// language=Vue\n\ttemplate: `\n\t\t<div :class=\"classes\" @click=\"onClick($event)\">\n\t\t\t<span :class=\"buttonClasses\"><slot></slot></span>\n\t\t</div>\n\t`,\n});\n","import { BitrixVue } from 'ui.vue';\nimport { MixinCheck } from 'sale.payment-pay.mixins.payment-system';\n\nBitrixVue.component('sale-payment_pay-components-payment_system-check', {\n\tprops:\n\t{\n\t\tstatus: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t\trequired: false,\n\t\t},\n\t\tlink: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t\trequired: false,\n\t\t},\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tmixins:[MixinCheck],\n\t// language=Vue\n\ttemplate: `\n\t\t<div class=\"mb-2\" :class=\"{'check-print': processing}\">\n\t\t\t<a :href=\"link\" target=\"_blank\" class=\"check-link\" v-if=\"downloadable\">{{ title }}</a>\n\t\t\t<span v-else>{{ title }}</span>\n\t\t</div>\n\t`,\n});","import { BitrixVue } from 'ui.vue';\n\nBitrixVue.component('sale-payment_pay-components-payment_system-error_box', {\n\tprops:\n\t{\n\t\terrors: Array\n\t},\n\tcomputed:\n\t{\n\t\tlocalize()\n\t\t{\n\t\t\treturn Object.freeze(\n\t\t\t\tBitrixVue.getFilteredPhrases('PAYMENT_PAY_PAYMENT_SYSTEM_COMPONENTS_'))\n\t\t},\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<div>\n\t\t\t<div class=\"alert alert-danger\">\n\t\t\t\t<slot name=\"errors-header\">\n\t\t\t\t\t<div>{{ localize.PAYMENT_PAY_PAYMENT_SYSTEM_COMPONENTS_8 }}</div>\n\t\t\t\t</slot>\n\t\t\t\t<slot name=\"errors-footer\">\n\t\t\t\t\t<div>{{ localize.PAYMENT_PAY_PAYMENT_SYSTEM_COMPONENTS_9 }}</div>\n\t\t\t\t</slot>\n\t\t\t</div>\n\t\t</div>\n\t`,\n});","import { BitrixVue } from 'ui.vue';\nimport { MixinPaySystemRow } from 'sale.payment-pay.mixins.payment-system';\n\nimport './button'\n\nBitrixVue.component('sale-payment_pay-components-payment_system-pay_system_row', {\n\tprops:\n\t{\n\t\tloading: Boolean,\n\t\tname: String,\n\t\tlogo: String,\n\t\tid: Number,\n\t},\n\tcomputed:\n\t{\n\t\tlocalize()\n\t\t{\n\t\t\treturn Object.freeze(\n\t\t\t\tBitrixVue.getFilteredPhrases('PAYMENT_PAY_PAYMENT_SYSTEM_COMPONENTS_'))\n\t\t},\n\t},\n\tmixins:[MixinPaySystemRow],\n\t// language=Vue\n\ttemplate: `\n\t\t<div class=\"order-pay-method-item-container pay-mode\" @click=\"onClick()\">\n\t\t\t<div class=\"order-pay-method-item-logo-block\">\n\t\t\t\t<div class=\"order-pay-method-logo\" :style=\"logoStyle\"></div>\n\t\t\t</div>\n\t\t\t<div class=\"order-pay-method-text-block\">\n\t\t\t\t<div class=\"order-pay-method-text\">{{ name }}</div>\n\t\t\t</div>\n\t\t\t<sale-payment_pay-components-payment_system-button :loading=\"loading\">{{ localize.PAYMENT_PAY_PAYMENT_SYSTEM_COMPONENTS_4 }}</sale-payment_pay-components-payment_system-button>\n\t\t</div>\n\t`,\n});\n","import { BitrixVue } from 'ui.vue';\nimport { MixinPaySystemList } from 'sale.payment-pay.mixins.payment-system';\n\nimport './pay-system-row';\n\nBitrixVue.component('sale-payment_pay-components-payment_system-pay_system_list', {\n\tprops: {\n\t\tpaySystems: {\n\t\t\ttype: Array,\n\t\t\tdefault: [],\n\t\t\trequired: false,\n\t\t},\n\t\tselectedPaySystem: {\n\t\t\ttype: Number,\n\t\t\tdefault: null,\n\t\t\trequired: false,\n\t\t},\n\t\tloading: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t\trequired: false,\n\t\t}\n\t},\n\tmixins:[MixinPaySystemList],\n\t// language=Vue\n\ttemplate: `\n\t\t<div>\n<!--\t\t\t<div class=\"page-section-title\" v-if=\"title\">{{ title }}</div>-->\n\t\t\t<div class=\"order-payment-method-list\">\n\t\t\t\t<slot>\n\t\t\t\t\t<sale-payment_pay-components-payment_system-pay_system_row\n\t\t\t\t\t\tv-for=\"paySystem in paySystems\"\n\t\t\t\t\t\t:loading=\"isItemLoading(paySystem.ID)\"\n\t\t\t\t\t\t:name=\"paySystem.NAME\"\n\t\t\t\t\t\t:logo=\"paySystem.LOGOTIP\"\n\t\t\t\t\t\t:id=\"paySystem.ID\"\n\t\t\t\t\t\t@click=\"startPayment($event)\"\n\t\t\t\t\t\t:key=\"paySystem.ID\"\n\t\t\t\t\t/>\n\t\t\t\t</slot>\n\t\t\t</div>\n<!--            <slot name=\"user-consent\"></slot>-->\n\t\t</div>\n\t`,\n});","import { BitrixVue } from 'ui.vue';\n\nBitrixVue.component('sale-payment_pay-components-payment_system-pay_system_result', {\n\tprops:\n\t{\n\t\thtml: {\n\t\t\ttype: String,\n\t\t\tdefault: null,\n\t\t\trequired: false,\n\t\t},\n\t\tfields: {\n\t\t\ttype: Object,\n\t\t\tdefault: null,\n\t\t\trequired: false,\n\t\t}\n\t},\n\tcomputed:\n\t{\n\t\tlocalize()\n\t\t{\n\t\t\treturn Object.freeze(\n\t\t\t\tBitrixVue.getFilteredPhrases('PAYMENT_PAY_PAYMENT_SYSTEM_COMPONENTS_'))\n\t\t},\n\t},\n\tmounted()\n\t{\n\t\tif (this.html)\n\t\t{\n\t\t\tBX.html(this.$refs.paySystemResultTemplate, this.html);\n\t\t}\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<div class=\"payment-mobile-change-method\">\n\t\t\t<template v-if=\"html\">\n\t\t\t\t<div ref=\"paySystemResultTemplate\"></div>\n\t\t\t</template>\n\t\t\t<template v-else>\n\t\t\t\t<div class=\"checkout-basket-section\">\n\t\t\t\t\t<div class=\"page-section-title\">{{ localize.PAYMENT_PAY_PAYMENT_SYSTEM_COMPONENTS_1 }}</div>\n\t\t\t\t\t<div class=\"checkout-basket-personal-order-info\" v-if=\"fields\">\n\t\t\t\t\t\t<div class=\"checkout-basket-personal-order-info-item\" v-if=\"fields.SUM_WITH_CURRENCY\">\n\t\t\t\t\t\t\t<span>{{ localize.PAYMENT_PAY_PAYMENT_SYSTEM_COMPONENTS_2 }}</span>\n\t\t\t\t\t\t\t<strong v-html=\"fields.SUM_WITH_CURRENCY\"></strong>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"checkout-basket-personal-order-info-item\" v-if=\"fields.PAY_SYSTEM_NAME\">\n\t\t\t\t\t\t\t<span>{{ localize.PAYMENT_PAY_PAYMENT_SYSTEM_COMPONENTS_3 }}</span>\n\t\t\t\t\t\t\t<strong>{{ fields.PAY_SYSTEM_NAME }}</strong>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</div>\n\t`,\n});\n","import { BitrixVue } from 'ui.vue';\nimport { MixinPaymentInfo } from 'sale.payment-pay.mixins.payment-system';\n\nimport './check'\nimport './payment-info/button'\nimport './payment-info/pay-system-small-card'\n\nBitrixVue.component('sale-payment_pay-components-payment_system-payment_info', {\n\tprops:\n\t{\n\t\tpaySystem: Object,\n\t\ttitle: String,\n\t\tsum: String,\n\t\tloading: Boolean,\n\t\tpaid: Boolean,\n\t\tchecks: Array,\n\t},\n\tcomputed:\n\t{\n\t\tlocalize()\n\t\t{\n\t\t\treturn Object.freeze(\n\t\t\t\tBitrixVue.getFilteredPhrases('PAYMENT_PAY_PAYMENT_SYSTEM_COMPONENTS_'))\n\t\t},\n\t\ttotalSum()\n\t\t{\n\t\t\treturn this.localize.PAYMENT_PAY_PAYMENT_SYSTEM_COMPONENTS_10.replace('#SUM#', this.sum);\n\t\t}\n\t},\n\tmixins:[MixinPaymentInfo],\n\t// language=Vue\n\ttemplate: `\n\t\t<div>\n\t\t\t<div class=\"order-payment-container\">\n\t\t\t\t<div class=\"order-payment-title\" v-if=\"title\">{{ title }}</div>\n\t\t\t\t<div class=\"order-payment-inner d-flex align-items-center justify-content-between\">\n\t\t\t\t\t<sale-payment_pay-components-payment_system-payment_info-pay_system_small_card :name=\"paySystem.NAME\" :logo=\"paySystem.LOGOTIP\"/>\n\t\t\t\t\t<div class=\"order-payment-status d-flex align-items-center\" v-if=\"paid\">\n\t\t\t\t\t\t<div class=\"order-payment-status-ok\"></div>\n\t\t\t\t\t\t<div>{{ localize.PAYMENT_PAY_PAYMENT_SYSTEM_COMPONENTS_5 }}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"order-payment-price\" v-html=\"totalSum\"></div>\n\t\t\t\t</div>\n\t\t\t\t<hr v-if=\"checks.length > 0\">\n\t\t\t\t<sale-payment_pay-components-payment_system-check\n\t\t\t\t\tv-for=\"check in checks\" :key=\"check.id\"\n\t\t\t\t\t:title=\"getCheckTitle(check)\"\n\t\t\t\t\t:link=\"check.link\"\n\t\t\t\t\t:status=\"check.status\"/>\n\t\t\t\t<div class=\"order-payment-buttons-container\" v-if=\"!paid\">\n\t\t\t\t\t<sale-payment_pay-components-payment_system-payment_info-button\n\t\t\t\t\t\t:loading=\"loading\"\n\t\t\t\t\t\t@click=\"onClick()\">\n\t\t\t\t\t\t{{ localize.PAYMENT_PAY_PAYMENT_SYSTEM_COMPONENTS_4 }}\n\t\t\t\t\t</sale-payment_pay-components-payment_system-payment_info-button>\n\t\t\t\t</div>\t\n\t\t\t</div>\n\t\t</div>\n\t`,\n});\n","import { BitrixVue } from 'ui.vue';\nimport { MixinResetPanel } from 'sale.payment-pay.mixins.payment-system';\n\nimport './button'\n\nBitrixVue.component('sale-payment_pay-components-payment_system-reset_panel', {\n\tmixins:[MixinResetPanel],\n\tcomputed:\n\t{\n\t\tlocalize()\n\t\t{\n\t\t\treturn Object.freeze(\n\t\t\t\tBitrixVue.getFilteredPhrases('PAYMENT_PAY_PAYMENT_SYSTEM_COMPONENTS_'))\n\t\t},\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<div class=\"order-payment-buttons-container\">\n\t\t\t<div class=\"order-basket-section-description py-3\">\n\t\t\t\t{{ localize.PAYMENT_PAY_PAYMENT_SYSTEM_COMPONENTS_6 }}\n\t\t\t</div>\n\t\t\t<div class=\"order-basket-section-another-payment-button\">\n\t\t\t\t<sale-payment_pay-components-payment_system-button @click=\"reset()\">\n\t\t\t\t\t{{ localize.PAYMENT_PAY_PAYMENT_SYSTEM_COMPONENTS_7 }}\n\t\t\t\t</sale-payment_pay-components-payment_system-button>\n\t\t\t</div>\n\t\t</div>\t\n\t`,\n});\n","import { BitrixVue } from 'ui.vue';\nimport { EventType } from 'sale.payment-pay.const';\nimport { EventEmitter } from 'main.core.events';\n\nBitrixVue.component('sale-payment_pay-components-payment_system-backdrop', {\n\tprops:['paySystem'],\n\tdata()\n\t{\n\t\treturn {\n\t\t\tisShow: true\n\t\t}\n\t},\n\t// language=Vue\n\tmethods:\n\t\t{\n\t\t\tclose()\n\t\t\t{\n\t\t\t\tthis.isShow = false\n\t\t\t\tEventEmitter.emit(EventType.payment.reset, {});\n\t\t\t},\n\t\t},\n\tcomputed:\n\t\t{\n\t\t\tlocalize()\n\t\t\t{\n\t\t\t\treturn Object.freeze(\n\t\t\t\t\tBitrixVue.getFilteredPhrases('PAYMENT_PAY_PAYMENT_SYSTEM_COMPONENTS_'))\n\t\t\t},\n\t\t\tgetObjectClass()\n\t\t\t{\n\t\t\t\tlet result = [\n\t\t\t\t\t'checkout-basket-item'\n\t\t\t\t];\n\t\t\t\tif(this.isShow === true)\n\t\t\t\t{\n\t\t\t\t\tresult.push('active-backdrop-open-change-sku active-popup-open')\n\t\t\t\t}\n\n\t\t\t\treturn result\n\t\t\t},\n\t\t\ttitle()\n\t\t\t{\n\t\t\t\treturn BX.util.htmlspecialchars(this.paySystem.NAME)\n\t\t\t},\n\t\t\tlogoStyle()\n\t\t\t{\n\t\t\t\tconst defaultLogo = '/bitrix/js/sale/payment-pay/images/default_logo.png';\n\t\t\t\tconst src = this.paySystem.LOGOTIP || defaultLogo;\n\n\t\t\t\treturn `background-image: url(\"${BX.util.htmlspecialchars(src)}\")`;\n\t\t\t}\n\t\t},\n\ttemplate: `\n\t\t<div :class=getObjectClass>\n\t\t\t<div class=\"checkout-basket-item-backdrop-wrapper js-backdrop-open-change-sku\">\n\t\t\t\t<div class=\"checkout-basket-item-backdrop-overlay js-backdrop-open-change-sku\"></div>\n\t\t\t\t<div class=\"checkout-basket-item-backdrop-container js-backdrop-open-change-sku\">\n\t\t\t\t\t<div class=\"checkout-basket-item-detail-header justify-content-between align-items-center\">\n\t\t\t\t\t\t<div id=\"bx_3966226736_424_7e1b8e3524755c391129a9d7e6f2d206_prebuy_swipe_btn\"\n\t\t\t\t\t\t\t class=\"checkout-basket-item-detail-swipe-btn-container\">\n\t\t\t\t\t\t\t<div class=\"checkout-basket-item-detail-swipe-btn\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"checkout-order-payment-close\" @click=\"close()\">{{ localize.PAYMENT_PAY_PAYMENT_SYSTEM_COMPONENTS_12 }}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"checkout-basket-item-backdrop-inner\">\n\t\t\t\t\t\t<div class=\"checkout-basket-item-backdrop-main\">\n\t\t\t\t\t\t\t<div class=\"checkout-order-payment-title\">\n\t\t\t\t\t\t\t\t<div class=\"checkout-basket-pay-method-item-logo-block\">\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t:style=logoStyle\n\t\t\t\t\t\t\t\t\t\tclass=\"checkout-basket-pay-method-logo\"/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"checkout-order-payment-title-text\">{{title}}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<slot name=\"main-content\"></slot>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n});\n","import { BitrixVue } from 'ui.vue';\nimport { EventType } from 'sale.payment-pay.const';\nimport { EventEmitter } from 'main.core.events';\n\nBitrixVue.component('sale-payment_pay-components-payment_system-popup', {\n\tprops:['paySystem'],\n\tdata()\n\t{\n\t\treturn {\n\t\t\tisShow: true\n\t\t}\n\t},\n\t// language=Vue\n\tmethods:\n\t{\n\t\tclose()\n\t\t{\n\t\t\tthis.isShow = false\n\t\t\tEventEmitter.emit(EventType.payment.reset, {});\n\t\t},\n\t},\n\tcomputed:\n\t{\n\t\tlocalize()\n\t\t{\n\t\t\treturn Object.freeze(\n\t\t\t\tBitrixVue.getFilteredPhrases('PAYMENT_PAY_PAYMENT_SYSTEM_COMPONENTS_'))\n\t\t},\n\t\tgetObjectClass()\n\t\t{\n\t\t\tlet result = [\n\t\t\t\t'checkout-order-payment-popup-wrap'\n\t\t\t];\n\t\t\tif(this.isShow === true)\n\t\t\t{\n\t\t\t\tresult.push('active-popup-open')\n\t\t\t}\n\n\t\t\treturn result\n\t\t},\n\t\tlogoStyle()\n\t\t{\n\t\t\tconst src = this.paySystem.LOGOTIP;\n\n\t\t\treturn `background-image: url(\"${BX.util.htmlspecialchars(src)}\")`;\n\t\t}\n\t},\n\ttemplate: `\n\t<div :class=getObjectClass>\n\t\t\t<div class=\"checkout-order-payment-popup-overlay\" @click=\"close()\"/>\n\t\t\t<div class=\"checkout-order-payment-popup\">\n\t\t\t\t<div class=\"checkout-order-payment-popup-head\">\n\t\t\t\t\t<div class=\"checkout-order-payment-close\" @click=\"close()\">{{ localize.PAYMENT_PAY_PAYMENT_SYSTEM_COMPONENTS_12 }}</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"checkout-order-payment-popup-main\">\n\t\t\t\t\t<div class=\"checkout-order-payment-title\">\n\t\t\t\t\t\t<div class=\"checkout-basket-pay-method-item-logo-block\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t:style=logoStyle\n\t\t\t\t\t\t\t\tclass=\"checkout-basket-pay-method-logo\"/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"checkout-order-payment-content\">\n\t\t\t\t\t\t<slot name=\"main-content\"></slot>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"checkout-order-payment-btn-container\">\n\t\t\t\t\t\t<button class=\"btn btn-primary rounded-pill\" @click=\"close()\">{{ localize.PAYMENT_PAY_PAYMENT_SYSTEM_COMPONENTS_13 }}</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t</div>`\n});\n"],"names":["BitrixVue","component","props","options","Object","mixins","MixinMethods","data","settings","Settings","stageType","StageType","stages","prepareParamsStages","stage","setStageType","loading","paymentProcess","prepareParamsPaymentProcess","created","initPayment","subscribeToGlobalEvents","methods","initBackendProvider","backendProvider","BackendProvider","returnUrl","orderId","accessCode","paySystemList","paySystems","get","selectedPaySystem","paySystemErrors","errors","paySystemResult","html","fields","list","template","paymentInfo","paySystem","title","sum","paid","checks","type","Boolean","required","MixinPaymentInfoButton","logo","String","name","computed","classes","buttonClasses","MixinButton","status","link","MixinCheck","Array","localize","freeze","getFilteredPhrases","id","Number","MixinPaySystemRow","MixinPaySystemList","mounted","BX","$refs","paySystemResultTemplate","totalSum","PAYMENT_PAY_PAYMENT_SYSTEM_COMPONENTS_10","replace","MixinPaymentInfo","MixinResetPanel","isShow","close","EventEmitter","emit","EventType","payment","reset","getObjectClass","result","push","util","htmlspecialchars","NAME","logoStyle","defaultLogo","src","LOGOTIP"],"mappings":"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"}