this.BX=this.BX||{};this.BX.Sale=this.BX.Sale||{};this.BX.Sale.PaymentPay=this.BX.Sale.PaymentPay||{};(function(e,t,n){"use strict";var r=function(e){babelHelpers.inherits(n,e);function n(e){var t;babelHelpers.classCallCheck(this,n);t=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(n).call(this,e));t.returnUrl=t.option("returnUrl",t.getCurrentUrl());t.orderId=t.option("orderId",null);t.paymentId=t.option("paymentId",null);t.accessCode=t.option("accessCode",null);t.paySystemId=null;t.response=null;return t}babelHelpers.createClass(n,[{key:"initiatePayment",value:function e(){var n=this;if(!this.paySystemId){throw new Error("Payment system undefined")}return new Promise(function(e,r){t.ajax.runComponentAction("bitrix:sale.order.checkout","initiatePay",{mode:"ajax",data:{fields:{paySystemId:n.paySystemId,returnUrl:n.returnUrl,orderId:n.orderId,paymentId:n.paymentId,accessCode:n.accessCode}}}).then(function(t){n.response=t;e(n)}).catch(function(t){n.response=t;e(n)})})}},{key:"getResponse",value:function e(){return this.response}},{key:"isResponseSucceed",value:function e(){return t.Type.isObject(this.response)&&this.response.status==="success"}},{key:"getPaymentGateUrl",value:function e(){if(t.Type.isObject(this.response.data)&&t.Type.isStringFilled(this.response.data.url)){return this.response.data.url}return null}},{key:"getPaymentFormHtml",value:function e(){if(t.Type.isObject(this.response.data)&&t.Type.isStringFilled(this.response.data.html)){return this.response.data.html}return null}},{key:"getCurrentUrl",value:function e(){return window.location.href}}]);return n}(n.AbstractBackendProvider);e.BackendProvider=r})(this.BX.Sale.PaymentPay.BackendProvider=this.BX.Sale.PaymentPay.BackendProvider||{},BX,BX.Sale.PaymentPay.Lib);
//# sourceMappingURL=backend-provider.bundle.map.js