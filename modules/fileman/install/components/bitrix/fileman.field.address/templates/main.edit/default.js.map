{"version":3,"file":"default.js","sources":["src/default.js"],"sourcesContent":["BX.Default.Field.Address = function (params)\n{\n\tthis.init(params);\n};\n\nBX.Default.Field.Address.prototype = {\n\tinit: function (params)\n\t{\n\t\tthis.controlId = (params['controlId'] || '');\n\t\tthis.value = (params['value'] || '');\n\t\tthis.isMultiple = (params['isMultiple'] === 'true');\n\t\tthis.nodeJs = (params['nodeJs'] || '');\n\t\tthis.fieldNameJs = (params['fieldNameJs'] || '');\n\t\tthis.fieldName = (params['fieldName'] || '');\n\t\tthis.showMap = (params['showMap'] ?? true);\n\n\t\tconst control = new BX.Fileman.UserField.Address(BX(this.controlId),\n\t\t\t{\n\t\t\t\tvalue: this.value,\n\t\t\t\tmultiple: this.isMultiple,\n\t\t\t\tshowMap: this.showMap,\n\t\t\t}\n\t\t);\n\n\t\tcontrol.nodeJs = this.nodeJs;\n\t\tcontrol.fieldNameJs = this.fieldNameJs;\n\t\tcontrol.fieldName = this.fieldName;\n\n\t\tBX.addCustomEvent(control, 'UserFieldAddress::Change', function (value)\n\t\t{\n\t\t\tlet node = BX(control.nodeJs);\n\t\t\tlet html = '';\n\t\t\tif (value.length === 0)\n\t\t\t{\n\t\t\t\tvalue = [{text: ''}];\n\t\t\t}\n\n\t\t\tfor (let i = 0; i < value.length; i++)\n\t\t\t{\n\t\t\t\tlet inputValue = value[i].text;\n\n\t\t\t\tif (!!value[i].coords)\n\t\t\t\t{\n\t\t\t\t\tinputValue += '|' + value[i].coords.join(';');\n\t\t\t\t}\n\n\t\t\t\tinputValue = BX.util.htmlspecialchars(inputValue);\n\t\t\t\thtml += `<input type=\"hidden\" name=\"${control.fieldNameJs}\" value=\"${inputValue}\" >`;\n\t\t\t}\n\n\t\t\tnode.innerHTML = html;\n\n\t\t\tBX.onCustomEvent(window, 'onCrmEntityEditorUserFieldExternalChanged', [control.fieldName]);\n\t\t});\n\t},\n};\n"],"names":["BX","Default","Field","Address","params","init","prototype","controlId","value","isMultiple","nodeJs","fieldNameJs","fieldName","showMap","control","Fileman","UserField","multiple","addCustomEvent","node","html","length","text","i","inputValue","coords","join","util","htmlspecialchars","innerHTML","onCustomEvent","window"],"mappings":";;;;;;CAAAA,EAAE,CAACC,OAAH,CAAWC,KAAX,CAAiBC,OAAjB,GAA2B,UAAUC,MAAV,EAC3B;CACC,OAAKC,IAAL,CAAUD,MAAV;CACA,CAHD;;CAKAJ,EAAE,CAACC,OAAH,CAAWC,KAAX,CAAiBC,OAAjB,CAAyBG,SAAzB,GAAqC;CACpCD,EAAAA,IAAI,EAAE,cAAUD,MAAV,EACN;CAAA;;CACC,SAAKG,SAAL,GAAkBH,MAAM,CAAC,WAAD,CAAN,IAAuB,EAAzC;CACA,SAAKI,KAAL,GAAcJ,MAAM,CAAC,OAAD,CAAN,IAAmB,EAAjC;CACA,SAAKK,UAAL,GAAmBL,MAAM,CAAC,YAAD,CAAN,KAAyB,MAA5C;CACA,SAAKM,MAAL,GAAeN,MAAM,CAAC,QAAD,CAAN,IAAoB,EAAnC;CACA,SAAKO,WAAL,GAAoBP,MAAM,CAAC,aAAD,CAAN,IAAyB,EAA7C;CACA,SAAKQ,SAAL,GAAkBR,MAAM,CAAC,WAAD,CAAN,IAAuB,EAAzC;CACA,SAAKS,OAAL,sBAAgBT,MAAM,CAAC,SAAD,CAAtB,6DAAqC,IAArC;CAEA,QAAMU,OAAO,GAAG,IAAId,EAAE,CAACe,OAAH,CAAWC,SAAX,CAAqBb,OAAzB,CAAiCH,EAAE,CAAC,KAAKO,SAAN,CAAnC,EACf;CACCC,MAAAA,KAAK,EAAE,KAAKA,KADb;CAECS,MAAAA,QAAQ,EAAE,KAAKR,UAFhB;CAGCI,MAAAA,OAAO,EAAE,KAAKA;CAHf,KADe,CAAhB;CAQAC,IAAAA,OAAO,CAACJ,MAAR,GAAiB,KAAKA,MAAtB;CACAI,IAAAA,OAAO,CAACH,WAAR,GAAsB,KAAKA,WAA3B;CACAG,IAAAA,OAAO,CAACF,SAAR,GAAoB,KAAKA,SAAzB;CAEAZ,IAAAA,EAAE,CAACkB,cAAH,CAAkBJ,OAAlB,EAA2B,0BAA3B,EAAuD,UAAUN,KAAV,EACvD;CACC,UAAIW,IAAI,GAAGnB,EAAE,CAACc,OAAO,CAACJ,MAAT,CAAb;CACA,UAAIU,IAAI,GAAG,EAAX;;CACA,UAAIZ,KAAK,CAACa,MAAN,KAAiB,CAArB,EACA;CACCb,QAAAA,KAAK,GAAG,CAAC;CAACc,UAAAA,IAAI,EAAE;CAAP,SAAD,CAAR;CACA;;CAED,WAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGf,KAAK,CAACa,MAA1B,EAAkCE,CAAC,EAAnC,EACA;CACC,YAAIC,UAAU,GAAGhB,KAAK,CAACe,CAAD,CAAL,CAASD,IAA1B;;CAEA,YAAI,CAAC,CAACd,KAAK,CAACe,CAAD,CAAL,CAASE,MAAf,EACA;CACCD,UAAAA,UAAU,IAAI,MAAMhB,KAAK,CAACe,CAAD,CAAL,CAASE,MAAT,CAAgBC,IAAhB,CAAqB,GAArB,CAApB;CACA;;CAEDF,QAAAA,UAAU,GAAGxB,EAAE,CAAC2B,IAAH,CAAQC,gBAAR,CAAyBJ,UAAzB,CAAb;CACAJ,QAAAA,IAAI,4CAAkCN,OAAO,CAACH,WAA1C,wBAAiEa,UAAjE,SAAJ;CACA;;CAEDL,MAAAA,IAAI,CAACU,SAAL,GAAiBT,IAAjB;CAEApB,MAAAA,EAAE,CAAC8B,aAAH,CAAiBC,MAAjB,EAAyB,2CAAzB,EAAsE,CAACjB,OAAO,CAACF,SAAT,CAAtE;CACA,KAzBD;CA0BA;CAjDmC,CAArC;;;;"}