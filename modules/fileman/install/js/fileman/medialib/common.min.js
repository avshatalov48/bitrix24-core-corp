function BXMLTypeSelector(e){this.oML=e.oML;this.oCallback=e.oCallback;this.Types=e.Types;this.Init()}BXMLTypeSelector.prototype={Init:function(){this.pWnd=BX.create("DIV",{props:{className:"ml-type-sel"}});this.pValCont=this.pWnd.appendChild(BX.create("DIV",{props:{className:"mlt-val-cnt"}}));this.pPopup=this.pWnd.appendChild(BX.create("DIV",{props:{className:"mlt-popup"}}));this.pPopupInner=this.pPopup.appendChild(BX.create("DIV",{props:{className:"mlt-popup-inner"}}));this.bOpen=false;if(BX.browser.IsIE()&&!BX.browser.IsDoctype()){this.pPopup.style.width="202px";this.pWnd.style.height="29px"}this.pIconCont=this.pValCont.appendChild(BX.create("DIV",{props:{className:"mlt-val-ic"}}));this.pNameCont=this.pValCont.appendChild(BX.create("DIV",{props:{className:"mlt-val-name"}}));var e=this,t,i,n,s,p=this.Types.length;for(t=0;t<p;t++){i=this.pPopupInner.appendChild(BX.create("DIV",{props:{className:"mlt-item",id:"ml_type_item_"+t}}));s=this.Types[t].type_icon;n="<table><tr><td class='mlt-ic'>"+"<img src='"+s+"' /></td>"+"<td class='mlt-title' title='"+this.Types[t].name+"'>"+bxhtmlspecialchars(this.Types[t].name)+"</td>"+"</tr></table>";i.innerHTML=n;i.onclick=function(t){e.SetType(this.id.substr("ml_type_item_".length));BX.PreventDefault(t)};i.onmouseover=function(){this.className="mlt-item mlt-item-over"};i.onmouseout=function(){this.className="mlt-item"}}this.pWnd.onclick=function(){e.ShowPopup()}},SetType:function(e,t){var i=this.Types[e];if(t!==false)this.oCallback.func.apply(this.oCallback.obj,[{typeInd:parseInt(e)}]);this.pIconCont.innerHTML="<img src='"+i.type_icon+"'/>";this.pNameCont.innerHTML=bxhtmlspecialchars(i.name);this.ShowPopup(false)},ShowPopup:function(e){if(e==this.bOpen)return;if(e!==true&&e!==false)e=!this.bOpen;if(e){this.pPopup.style.height="1px";this.pPopup.style.display="block"}var t=this,i=e?1:parseInt(this.pPopup.style.height),n=0,s=10,p=0,l=5;if(this.Interval)clearInterval(this.Interval);this.Interval=setInterval(function(){if(e){if(p==0)p=parseInt(t.pPopupInner.offsetHeight);i+=Math.round(l*n);if(i>p){i=p+2;clearInterval(t.Interval)}}else{i-=Math.round(l*n);if(i<0){t.pPopup.style.display="none";i=0;clearInterval(t.Interval)}}t.pPopup.style.height=i+"px";n++},s);this.bOpen=e;this.oML.bSubdialogOpened=e;setTimeout(function(){if(e){BX.bind(document,"keypress",BX.proxy(t.OnKeyPress,t));BX.bind(document,"mousedown",BX.proxy(t.OnMouseDown,t))}else{BX.unbind(document,"keypress",BX.proxy(t.OnKeyPress,t));BX.unbind(document,"mousedown",BX.proxy(t.OnMouseDown,t))}},100)},OnKeyPress:function(e){if(!e)e=window.event;if(e&&e.keyCode==27)this.ShowPopup(false)},OnMouseDown:function(e){if(!e)e=window.event;var t=e.target||e.srcElement;if(t.nodeType==3)t=t.parentNode;if(!BX.findParent(t,{className:"ml-type-cont"})){this.ShowPopup(false);return BX.PreventDefault(e)}}};function BXOverlay(e){this.id=e.id||"bx_trans_overlay";this.zIndex=e.zIndex||100}BXOverlay.prototype={Create:function(){this.bCreated=true;this.bShowed=false;var e=BX.GetWindowScrollSize();this.pWnd=document.body.appendChild(BX.create("DIV",{props:{id:this.id,className:"bx-trans-overlay"},style:{width:e.scrollWidth+"px",height:e.scrollHeight+"px"},events:{drag:BX.False,selectstart:BX.False}}));var t=this;window[this.id+"_resize"]=function(){t.Resize()}},Show:function(e){if(!this.bCreated)this.Create();this.bShowed=true;var t=BX.GetWindowScrollSize();this.pWnd.style.display="block";this.pWnd.style.width=t.scrollWidth+"px";this.pWnd.style.height=t.scrollHeight+"px";if(!e)e={};if(e.clickCallback){this.pWnd.onclick=function(t){var i=e.clickCallback,n=i.params||[];if(i.obj)i.func.apply(i.obj,n);else i.func(n);return BX.PreventDefault(t)}}BX.bind(window,"resize",window[this.id+"_resize"]);return this.pWnd},Hide:function(){if(!this.bShowed)return;this.bShowed=false;this.pWnd.style.display="none";BX.unbind(window,"resize",window[this.id+"_resize"]);this.pWnd.onclick=null},Resize:function(){if(this.bCreated)this.pWnd.style.width=BX.GetWindowScrollSize().scrollWidth+"px"},Remove:function(){this.Hide();if(this.pWnd.parentNode)this.pWnd.parentNode.removeChild(this.pWnd)}};window.bxhtmlspecialchars=function(e){if(!e.replace)return e;e=e.replace(/&/g,"&amp;");e=e.replace(/"/g,"&quot;");e=e.replace(/</g,"&lt;");e=e.replace(/>/g,"&gt;");return e};window.bxspcharsback=function(e){if(!(typeof e=="string"||e instanceof String))return e;e=e.replace(/\&quot;/g,'"');e=e.replace(/&#39;/g,"'");e=e.replace(/\&lt;/g,"<");e=e.replace(/\&gt;/g,">");e=e.replace(/\&#33;/g,"!");e=e.replace(/\&#36;/g,"$");e=e.replace(/\&#37;/g,"%");e=e.replace(/\&#126;/g,"~");e=e.replace(/\&nbsp;/g," ");e=e.replace(/\&#35;/g,"#");e=e.replace(/\&amp;/g,"&");return e};window.ConvertArray2Post=function(e,t){var i="",n,s;if(null!=e){for(n in e){if(i.length>0)i+="&";s=jsUtils.urlencode(n);if(t)s=t+"["+s+"]";if(typeof e[n]=="object")i+=ConvertArray2Post(e[n],s);else i+=s+"="+jsUtils.urlencode(e[n])}}return i};
//# sourceMappingURL=common.map.js