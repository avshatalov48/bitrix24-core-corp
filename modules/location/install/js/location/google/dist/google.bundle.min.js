this.BX=this.BX||{};this.BX.Location=this.BX.Location||{};(function(e,t,a){"use strict";function i(e,t,a,i){b(e,t);s(a,"set");l(e,a,i);return i}function l(e,t,a){if(t.set){t.set.call(e,a)}else{if(!t.writable){throw new TypeError("attempted to set read only private field")}t.value=a}}function r(e,t,a){b(e,t);s(a,"get");return n(e,a)}function s(e,t){if(e===undefined){throw new TypeError("attempted to "+t+" private static field before its declaration")}}function n(e,t){if(t.get){return t.get.call(e)}return t.value}function o(e,t,a){b(e,t);return a}function b(e,t){if(e!==t){throw new TypeError("Private static access of wrong provenance")}}var c=function(){function e(){babelHelpers.classCallCheck(this,e)}babelHelpers.createClass(e,null,[{key:"load",value:function t(a,l){if(r(e,e,p)===null){i(e,e,p,new Promise((function(t){BX.load([o(e,e,u).call(e,a,l)],(function(){t()}))})))}return r(e,e,p)}}]);return e}();function u(e,t){return"https://maps.googleapis.com/maps/api/js"+"?key=".concat(e)+"&libraries=places"+"&language=".concat(t)+"&region=".concat(o(this,c,d).call(this,t))}function d(e){var t={en:"US",uk:"UA",zh:"CN",ja:"JP",vi:"VN",ms:"MY",hi:"IN"};return typeof t[e]!=="undefined"?t[e]:e.toUpperCase()}var p={writable:true,value:null};function v(e,t){var a=typeof Symbol!=="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=h(e))||t&&e&&typeof e.length==="number"){if(a)e=a;var i=0;var l=function e(){};return{s:l,n:function t(){if(i>=e.length)return{done:true};return{done:false,value:e[i++]}},e:function e(t){throw t},f:l}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r=true,s=false,n;return{s:function t(){a=a.call(e)},n:function e(){var t=a.next();r=t.done;return t},e:function e(t){s=true;n=t},f:function e(){try{if(!r&&a["return"]!=null)a["return"]()}finally{if(s)throw n}}}}function h(e,t){if(!e)return;if(typeof e==="string")return f(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor)a=e.constructor.name;if(a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return f(e,t)}function f(e,t){if(t==null||t>e.length)t=e.length;for(var a=0,i=new Array(t);a<t;a++)i[a]=e[a];return i}function H(e,t){w(e,t);t.add(e)}function g(e,t,a){w(e,t);t.set(e,a)}function w(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function P(e,t,a){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return a}var m="OK";var T="ZERO_RESULTS";var y=new WeakMap;var F=new WeakMap;var I=new WeakMap;var S=new WeakMap;var G=new WeakMap;var k=new WeakSet;var z=new WeakSet;var C=new WeakSet;var L=new WeakSet;var M=function(e){babelHelpers.inherits(t,e);function t(e){var a;babelHelpers.classCallCheck(this,t);a=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e));H(babelHelpers.assertThisInitialized(a),L);H(babelHelpers.assertThisInitialized(a),C);H(babelHelpers.assertThisInitialized(a),z);H(babelHelpers.assertThisInitialized(a),k);g(babelHelpers.assertThisInitialized(a),y,{writable:true,value:void 0});g(babelHelpers.assertThisInitialized(a),F,{writable:true,value:void 0});g(babelHelpers.assertThisInitialized(a),I,{writable:true,value:void 0});g(babelHelpers.assertThisInitialized(a),S,{writable:true,value:void 0});g(babelHelpers.assertThisInitialized(a),G,{writable:true,value:5e4});babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(a),y,e.languageId);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(a),S,e.googleSource);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(a),I,e.googleSource.loaderPromise.then((function(){P(babelHelpers.assertThisInitialized(a),z,_).call(babelHelpers.assertThisInitialized(a))})));return a}babelHelpers.createClass(t,[{key:"autocomplete",value:function e(t,a){var i=this;if(t===""){return new Promise((function(e){e([])}))}return babelHelpers.classPrivateFieldGet(this,I).then((function(){return P(i,k,E).call(i,t,a)}),(function(e){return BX.debug(e)}))}}]);return t}(a.AutocompleteServiceBase);function E(e,t){var i=this;var l={input:e};if(t.biasPoint){l.location=new google.maps.LatLng(t.biasPoint.latitude,t.biasPoint.longitude);l.radius=babelHelpers.classPrivateFieldGet(this,G)}var r=a.AutocompleteCache.get(pa.code,l);if(r!==null){return Promise.resolve(P(this,C,O).call(this,r.data.result,r.data.status))}return new Promise((function(e){babelHelpers.classPrivateFieldGet(i,F).getQueryPredictions(l,(function(t,r){if(r===m||r===T){a.AutocompleteCache.set(pa.code,l,{status:r,result:t})}e(P(i,C,O).call(i,t,r))}))}))}function _(){if(typeof google==="undefined"||typeof google.maps.places.AutocompleteService==="undefined"){throw new Error("google.maps.places.AutocompleteService must be defined")}babelHelpers.classPrivateFieldSet(this,F,new google.maps.places.AutocompleteService)}function O(e,t){if(t===T){return[]}if(!e||t!==m){return false}var i=[];var l=v(e),r;try{for(l.s();!(r=l.n()).done;){var s=r.value;if(s.place_id){var n=void 0;if(s.structured_formatting&&s.structured_formatting.main_text){n=s.structured_formatting.main_text}else{n=s.description}var o=new a.Location({sourceCode:babelHelpers.classPrivateFieldGet(this,S).sourceCode,externalId:s.place_id,name:n,languageId:babelHelpers.classPrivateFieldGet(this,y)});if(s.structured_formatting&&s.structured_formatting.secondary_text){o.setFieldValue(a.LocationType.TMP_TYPE_CLARIFICATION,s.structured_formatting.secondary_text)}var b=P(this,L,W).call(this,s.types);if(b){o.setFieldValue(a.LocationType.TMP_TYPE_HINT,P(this,L,W).call(this,s.types))}i.push(o)}}}catch(e){l.e(e)}finally{l.f()}return i}function W(e){var a="";if(e.indexOf("locality")>=0){a=t.Loc.getMessage("LOCATION_GOO_AUTOCOMPLETE_TYPE_LOCALITY")}else if(e.indexOf("sublocality")>=0){a=t.Loc.getMessage("LOCATION_GOO_AUTOCOMPLETE_TYPE_SUBLOCAL")}else if(e.indexOf("store")>=0){a=t.Loc.getMessage("LOCATION_GOO_AUTOCOMPLETE_TYPE_STORE")}else if(e.indexOf("restaurant")>=0){a=t.Loc.getMessage("LOCATION_GOO_AUTOCOMPLETE_TYPE_RESTAURANT")}else if(e.indexOf("cafe")>=0){a=t.Loc.getMessage("LOCATION_GOO_AUTOCOMPLETE_TYPE_CAFE")}return a}function A(e,t){R(e,t);t.add(e)}function B(e,t,a){R(e,t);t.set(e,a)}function R(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function U(e,t,a){j(e,t);x(a,"get");return D(e,a)}function x(e,t){if(e===undefined){throw new TypeError("attempted to "+t+" private static field before its declaration")}}function j(e,t){if(e!==t){throw new TypeError("Private static access of wrong provenance")}}function D(e,t){if(t.get){return t.get.call(e)}return t.value}function N(e,t,a){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return a}var Y=new WeakMap;var V=new WeakMap;var X=new WeakMap;var K=new WeakMap;var Z=new WeakMap;var q=new WeakMap;var $=new WeakMap;var J=new WeakMap;var Q=new WeakMap;var ee=new WeakMap;var te=new WeakMap;var ae=new WeakMap;var ie=new WeakMap;var le=new WeakSet;var re=new WeakSet;var se=new WeakSet;var ne=new WeakSet;var oe=new WeakSet;var be=new WeakSet;var ce=new WeakSet;var ue=new WeakSet;var de=new WeakSet;var pe=function(e){babelHelpers.inherits(i,e);function i(e){var t;babelHelpers.classCallCheck(this,i);t=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(i).call(this,e));A(babelHelpers.assertThisInitialized(t),de);A(babelHelpers.assertThisInitialized(t),ue);A(babelHelpers.assertThisInitialized(t),ce);A(babelHelpers.assertThisInitialized(t),be);A(babelHelpers.assertThisInitialized(t),oe);A(babelHelpers.assertThisInitialized(t),ne);A(babelHelpers.assertThisInitialized(t),se);A(babelHelpers.assertThisInitialized(t),re);A(babelHelpers.assertThisInitialized(t),le);B(babelHelpers.assertThisInitialized(t),Y,{writable:true,value:void 0});B(babelHelpers.assertThisInitialized(t),V,{writable:true,value:void 0});B(babelHelpers.assertThisInitialized(t),X,{writable:true,value:void 0});B(babelHelpers.assertThisInitialized(t),K,{writable:true,value:void 0});B(babelHelpers.assertThisInitialized(t),Z,{writable:true,value:void 0});B(babelHelpers.assertThisInitialized(t),q,{writable:true,value:void 0});B(babelHelpers.assertThisInitialized(t),$,{writable:true,value:void 0});B(babelHelpers.assertThisInitialized(t),J,{writable:true,value:void 0});B(babelHelpers.assertThisInitialized(t),Q,{writable:true,value:void 0});B(babelHelpers.assertThisInitialized(t),ee,{writable:true,value:null});B(babelHelpers.assertThisInitialized(t),te,{writable:true,value:false});B(babelHelpers.assertThisInitialized(t),ae,{writable:true,value:void 0});B(babelHelpers.assertThisInitialized(t),ie,{writable:true,value:null});babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(t),Y,e.languageId);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(t),X,e.googleSource);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(t),Q,e.locationRepository||new a.LocationRepository);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(t),ae,e.changeDelay||700);return t}babelHelpers.createClass(i,[{key:"render",value:function e(t){var a=this;babelHelpers.classPrivateFieldSet(this,ie,babelHelpers.classPrivateFieldGet(this,X).loaderPromise.then((function(){N(a,de,Te).call(a,t)})));return babelHelpers.classPrivateFieldGet(this,ie)}},{key:"onLocationChangedEventSubscribe",value:function e(t){this.subscribe(U(i,i,ye),t)}},{key:"onStartChangingSubscribe",value:function e(t){this.subscribe(U(i,i,Fe),t)}},{key:"onEndChangingSubscribe",value:function e(t){this.subscribe(U(i,i,Ie),t)}},{key:"onMapViewChangedSubscribe",value:function e(t){this.subscribe(U(i,i,Se),t)}},{key:"destroy",value:function e(){t.Event.unbindAll(this);babelHelpers.classPrivateFieldSet(this,V,null);babelHelpers.classPrivateFieldSet(this,Z,null);babelHelpers.classPrivateFieldSet(this,J,null);babelHelpers.classPrivateFieldSet(this,ee,null);babelHelpers.classPrivateFieldSet(this,ie,null);babelHelpers.get(babelHelpers.getPrototypeOf(i.prototype),"destroy",this).call(this)}},{key:"loaderPromise",get:function e(){return babelHelpers.classPrivateFieldGet(this,ie)}},{key:"mode",set:function e(t){babelHelpers.classPrivateFieldSet(this,q,t);if(babelHelpers.classPrivateFieldGet(this,Z)){babelHelpers.classPrivateFieldGet(this,Z).setDraggable(t===a.ControlMode.edit)}}},{key:"zoom",get:function e(){return babelHelpers.classPrivateFieldGet(this,K)},set:function e(t){babelHelpers.classPrivateFieldSet(this,K,t);if(babelHelpers.classPrivateFieldGet(this,V)){babelHelpers.classPrivateFieldGet(this,V).setZoom(t)}}},{key:"location",set:function e(t){babelHelpers.classPrivateFieldSet(this,$,t);var a=N(this,le,ve).call(this,t);if(a){if(babelHelpers.classPrivateFieldGet(this,Z)){babelHelpers.classPrivateFieldSet(this,te,true);babelHelpers.classPrivateFieldGet(this,Z).setPosition(a);babelHelpers.classPrivateFieldSet(this,te,false)}if(babelHelpers.classPrivateFieldGet(this,V)){if(!babelHelpers.classPrivateFieldGet(this,Z).getMap()){babelHelpers.classPrivateFieldGet(this,Z).setMap(babelHelpers.classPrivateFieldGet(this,V))}babelHelpers.classPrivateFieldGet(this,V).panTo(a)}}else{if(babelHelpers.classPrivateFieldGet(this,Z)){babelHelpers.classPrivateFieldGet(this,Z).setMap(null)}}N(this,re,he).call(this)},get:function e(){return babelHelpers.classPrivateFieldGet(this,$)}},{key:"googleMap",get:function e(){return babelHelpers.classPrivateFieldGet(this,V)}}]);return i}(a.MapBase);function ve(e){if(!e){return null}if(typeof google==="undefined"||typeof google.maps==="undefined"){return null}return new google.maps.LatLng(e.latitude,e.longitude)}function he(){if(!babelHelpers.classPrivateFieldGet(this,$)){return}var e=pe.getZoomByLocation(babelHelpers.classPrivateFieldGet(this,$));if(e!==null&&e!==babelHelpers.classPrivateFieldGet(this,K)){this.zoom=e}}function fe(e){var t=this;return new Promise((function(a){babelHelpers.classPrivateFieldGet(t,J).geocode({location:e},(function(e,t){if(t==="OK"&&e[0]){a(e[0].place_id)}else if(t==="ZERO_RESULTS"){a("")}else{throw Error("Geocoder failed due to: "+t)}}))})).then((function(e){var a;if(e){a=babelHelpers.classPrivateFieldGet(t,Q).findByExternalId(e,babelHelpers.classPrivateFieldGet(t,X).sourceCode,babelHelpers.classPrivateFieldGet(t,Y))}else{a=new Promise((function(e){e(null)}))}return a}))}function He(e){if(babelHelpers.classPrivateFieldGet(this,q)===a.ControlMode.edit){this.emit(U(pe,pe,ye),{location:e})}}function ge(){if(!babelHelpers.classPrivateFieldGet(this,te)&&babelHelpers.classPrivateFieldGet(this,q)===a.ControlMode.edit){N(this,be,we).call(this,babelHelpers.classPrivateFieldGet(this,Z).getPosition())}}function we(e){var a=this;if(babelHelpers.classPrivateFieldGet(this,ee)!==null){clearTimeout(babelHelpers.classPrivateFieldGet(this,ee))}babelHelpers.classPrivateFieldSet(this,ee,setTimeout((function(){var i=t.Text.getRandom();a.emit(U(pe,pe,Fe),{requestId:i});babelHelpers.classPrivateFieldSet(a,ee,null);babelHelpers.classPrivateFieldGet(a,V).panTo(e);N(a,ce,Pe).call(a,e,i)}),babelHelpers.classPrivateFieldGet(this,ae)))}function Pe(e,t){var i=this;N(this,se,fe).call(this,e).then((function(e){i.emit(U(pe,pe,Ie),{requestId:t});N(i,ne,He).call(i,e)}))["catch"]((function(e){i.emit(U(pe,pe,Ie),{requestId:t});a.ErrorPublisher.getInstance().notify(e.errors)}))}function me(e){if(babelHelpers.classPrivateFieldGet(this,q)===a.ControlMode.edit){if(!babelHelpers.classPrivateFieldGet(this,Z).getMap){babelHelpers.classPrivateFieldGet(this,Z).setMap(babelHelpers.classPrivateFieldGet(this,V))}babelHelpers.classPrivateFieldGet(this,Z).setPosition(e);N(this,be,we).call(this,e)}}function Te(e){var t=this;babelHelpers.classPrivateFieldSet(this,q,e.mode);babelHelpers.classPrivateFieldSet(this,$,e.location||null);if(typeof google==="undefined"||typeof google.maps.Map==="undefined"){throw new Error("google.maps.Map must be defined")}var i=N(this,le,ve).call(this,babelHelpers.classPrivateFieldGet(this,$));var l={gestureHandling:"greedy",disableDefaultUI:true,zoomControl:BX.prop.getBoolean(e,"zoomControl",true),zoomControlOptions:{position:google.maps.ControlPosition.TOP_LEFT}};var r=pe.getZoomByLocation(babelHelpers.classPrivateFieldGet(this,$));if(r){l.zoom=r}if(i){l.center=i}babelHelpers.classPrivateFieldSet(this,V,new google.maps.Map(e.mapContainer,l));babelHelpers.classPrivateFieldGet(this,V).addListener("click",(function(e){N(t,ue,me).call(t,e.latLng)}));if(typeof google.maps.Marker==="undefined"){throw new Error("google.maps.Marker must be defined")}babelHelpers.classPrivateFieldSet(this,Z,new google.maps.Marker({position:i,map:babelHelpers.classPrivateFieldGet(this,V),draggable:babelHelpers.classPrivateFieldGet(this,q)===a.ControlMode.edit}));babelHelpers.classPrivateFieldGet(this,Z).addListener("position_changed",(function(){N(t,oe,ge).call(t)}));if(typeof google.maps.Geocoder==="undefined"){throw new Error("google.maps.Geocoder must be defined")}babelHelpers.classPrivateFieldSet(this,J,new google.maps.Geocoder)}var ye={writable:true,value:"onChanged"};var Fe={writable:true,value:"onStartChanging"};var Ie={writable:true,value:"onEndChanging"};var Se={writable:true,value:"onMapViewChanged"};var Ge;function ke(e,t){Ce(e,t);t.add(e)}function ze(e,t,a){Ce(e,t);t.set(e,a)}function Ce(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function Le(e,t,a){Ee(e,t);Me(a,"get");return _e(e,a)}function Me(e,t){if(e===undefined){throw new TypeError("attempted to "+t+" private static field before its declaration")}}function Ee(e,t){if(e!==t){throw new TypeError("Private static access of wrong provenance")}}function _e(e,t){if(t.get){return t.get.call(e)}return t.value}function Oe(e,t,a){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return a}var We=new WeakMap;var Ae=new WeakMap;var Be=new WeakMap;var Re=new WeakMap;var Ue=new WeakMap;var xe=new WeakMap;var je=new WeakMap;var De=new WeakMap;var Ne=new WeakMap;var Ye=new WeakMap;var Ve=new WeakMap;var Xe=new WeakMap;var Ke=new WeakMap;var Ze=new WeakMap;var qe=new WeakSet;var $e=new WeakSet;var Je=new WeakSet;var Qe=new WeakSet;var et=new WeakSet;var tt=new WeakSet;var at=new WeakSet;var it=new WeakSet;var lt=new WeakSet;var rt=new WeakSet;var st=new WeakSet;var nt=new WeakSet;var ot=function(e){babelHelpers.inherits(i,e);function i(e){var t;babelHelpers.classCallCheck(this,i);t=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(i).call(this,e));ke(babelHelpers.assertThisInitialized(t),nt);ke(babelHelpers.assertThisInitialized(t),st);ke(babelHelpers.assertThisInitialized(t),rt);ke(babelHelpers.assertThisInitialized(t),lt);ke(babelHelpers.assertThisInitialized(t),it);ke(babelHelpers.assertThisInitialized(t),at);ke(babelHelpers.assertThisInitialized(t),tt);ke(babelHelpers.assertThisInitialized(t),et);ke(babelHelpers.assertThisInitialized(t),Qe);ke(babelHelpers.assertThisInitialized(t),Je);ke(babelHelpers.assertThisInitialized(t),$e);ke(babelHelpers.assertThisInitialized(t),qe);ze(babelHelpers.assertThisInitialized(t),We,{writable:true,value:void 0});ze(babelHelpers.assertThisInitialized(t),Ae,{writable:true,value:void 0});ze(babelHelpers.assertThisInitialized(t),Be,{writable:true,value:void 0});ze(babelHelpers.assertThisInitialized(t),Re,{writable:true,value:void 0});ze(babelHelpers.assertThisInitialized(t),Ue,{writable:true,value:void 0});ze(babelHelpers.assertThisInitialized(t),xe,{writable:true,value:void 0});ze(babelHelpers.assertThisInitialized(t),je,{writable:true,value:void 0});ze(babelHelpers.assertThisInitialized(t),De,{writable:true,value:void 0});ze(babelHelpers.assertThisInitialized(t),Ne,{writable:true,value:void 0});ze(babelHelpers.assertThisInitialized(t),Ye,{writable:true,value:void 0});ze(babelHelpers.assertThisInitialized(t),Ve,{writable:true,value:null});ze(babelHelpers.assertThisInitialized(t),Xe,{writable:true,value:void 0});ze(babelHelpers.assertThisInitialized(t),Ke,{writable:true,value:null});ze(babelHelpers.assertThisInitialized(t),Ze,{writable:true,value:false});babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(t),We,e.languageId);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(t),Be,e.googleSource);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(t),Ye,e.locationRepository||new a.LocationRepository);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(t),Xe,e.changeDelay||700);return t}babelHelpers.createClass(i,[{key:"render",value:function e(t){var a=this;babelHelpers.classPrivateFieldSet(this,Ke,babelHelpers.classPrivateFieldGet(this,Be).loaderPromise.then((function(){Oe(a,nt,Pt).call(a,t)})));return babelHelpers.classPrivateFieldGet(this,Ke)}},{key:"panTo",value:function e(t,a){if(typeof google!=="undefined"&&typeof google.maps!=="undefined"&&babelHelpers.classPrivateFieldGet(this,Ae)){babelHelpers.classPrivateFieldGet(this,Ae).panTo(new google.maps.LatLng(t,a));Oe(this,$e,ct).call(this)}}},{key:"onLocationChangedEventSubscribe",value:function e(t){this.subscribe(Le(i,i,mt),t)}},{key:"onStartChangingSubscribe",value:function e(t){this.subscribe(Le(i,i,Tt),t)}},{key:"onEndChangingSubscribe",value:function e(t){this.subscribe(Le(i,i,yt),t)}},{key:"onMapViewChangedSubscribe",value:function e(t){this.subscribe(Le(i,i,Ft),t)}},{key:"destroy",value:function e(){t.Event.unbindAll(this);babelHelpers.classPrivateFieldSet(this,Ae,null);babelHelpers.classPrivateFieldSet(this,Ne,null);babelHelpers.classPrivateFieldSet(this,Ve,null);babelHelpers.classPrivateFieldSet(this,Ke,null);babelHelpers.get(babelHelpers.getPrototypeOf(i.prototype),"destroy",this).call(this)}},{key:"loaderPromise",get:function e(){return babelHelpers.classPrivateFieldGet(this,Ke)}},{key:"mode",set:function e(t){babelHelpers.classPrivateFieldSet(this,je,t)}},{key:"zoom",get:function e(){return babelHelpers.classPrivateFieldGet(this,xe)},set:function e(t){babelHelpers.classPrivateFieldSet(this,xe,t);if(babelHelpers.classPrivateFieldGet(this,Ae)){babelHelpers.classPrivateFieldGet(this,Ae).setZoom(t)}}},{key:"location",set:function e(t){babelHelpers.classPrivateFieldSet(this,De,t);var a=Oe(this,qe,bt).call(this,t);if(a&&babelHelpers.classPrivateFieldGet(this,Ae)){babelHelpers.classPrivateFieldGet(this,Ae).panTo(a)}Oe(this,$e,ct).call(this)},get:function e(){return babelHelpers.classPrivateFieldGet(this,De)}},{key:"googleMap",get:function e(){return babelHelpers.classPrivateFieldGet(this,Ae)}}]);return i}(a.MapBase);function bt(e){if(!e){return null}if(typeof google==="undefined"||typeof google.maps==="undefined"){return null}return new google.maps.LatLng(e.latitude,e.longitude)}function ct(){if(!babelHelpers.classPrivateFieldGet(this,De)){return}var e=ot.getZoomByLocation(babelHelpers.classPrivateFieldGet(this,De));if(e!==null&&e!==babelHelpers.classPrivateFieldGet(this,xe)){this.zoom=e}}function ut(e){var t=this;return new Promise((function(a){babelHelpers.classPrivateFieldGet(t,Ne).geocode({location:e},(function(e,t){if(t==="OK"&&e[0]){a(e[0].place_id)}else if(t==="ZERO_RESULTS"){a("")}else{throw Error("Geocoder failed due to: "+t)}}))})).then((function(e){var a;if(e){a=babelHelpers.classPrivateFieldGet(t,Ye).findByExternalId(e,babelHelpers.classPrivateFieldGet(t,Be).sourceCode,babelHelpers.classPrivateFieldGet(t,We))}else{a=new Promise((function(e){e(null)}))}return a}))}function dt(e){if(babelHelpers.classPrivateFieldGet(this,je)===a.ControlMode.edit){this.emit(Le(ot,ot,mt),{location:e})}}function pt(){var e=this;if(babelHelpers.classPrivateFieldGet(this,Ve)!==null){clearTimeout(babelHelpers.classPrivateFieldGet(this,Ve))}babelHelpers.classPrivateFieldSet(this,Ve,setTimeout((function(){var a=t.Text.getRandom();e.emit(Le(ot,ot,Tt),{requestId:a});babelHelpers.classPrivateFieldSet(e,Ve,null);var i=babelHelpers.classPrivateFieldGet(e,Ae).getCenter();Oe(e,tt,vt).call(e,i,a)}),babelHelpers.classPrivateFieldGet(this,Xe)))}function vt(e,t){var i=this;Oe(this,Je,ut).call(this,e).then((function(e){i.emit(Le(ot,ot,yt),{requestId:t});Oe(i,Qe,dt).call(i,e)}))["catch"]((function(e){i.emit(Le(ot,ot,yt),{requestId:t});a.ErrorPublisher.getInstance().notify(e.errors)}))}function ht(){if(babelHelpers.classPrivateFieldGet(this,Ve)!==null){clearTimeout(babelHelpers.classPrivateFieldGet(this,Ve))}}function ft(){Oe(this,rt,gt).call(this);this.emit(Le(ot,ot,Ft))}function Ht(){Oe(this,rt,gt).call(this);this.emit(Le(ot,ot,Ft))}function gt(){if(babelHelpers.classPrivateFieldGet(this,je)===a.ControlMode.edit){babelHelpers.classPrivateFieldSet(this,Ze,true);t.Dom.addClass(babelHelpers.classPrivateFieldGet(this,Re),"location-map-mobile-center-marker-up")}}function wt(){if(babelHelpers.classPrivateFieldGet(this,je)===a.ControlMode.edit){if(babelHelpers.classPrivateFieldGet(this,Ze)===false){return}var e="location-map-mobile-center-marker-up";if(t.Dom.hasClass(babelHelpers.classPrivateFieldGet(this,Re),e)){t.Dom.removeClass(babelHelpers.classPrivateFieldGet(this,Re),e)}Oe(this,et,pt).call(this);babelHelpers.classPrivateFieldSet(this,Ze,false)}}function Pt(e){var i=this;babelHelpers.classPrivateFieldSet(this,je,e.mode);babelHelpers.classPrivateFieldSet(this,De,e.location||null);if(typeof google==="undefined"||typeof google.maps.Map==="undefined"){throw new Error("google.maps.Map must be defined")}var l=Oe(this,qe,bt).call(this,babelHelpers.classPrivateFieldGet(this,De));var r={gestureHandling:"greedy",disableDefaultUI:true,zoomControl:BX.prop.getBoolean(e,"zoomControl",true),zoomControlOptions:{position:google.maps.ControlPosition.TOP_LEFT}};var s=ot.getZoomByLocation(babelHelpers.classPrivateFieldGet(this,De));if(s){r.zoom=s}if(l){r.center=l}babelHelpers.classPrivateFieldSet(this,Ae,new google.maps.Map(e.mapContainer,r));if(babelHelpers.classPrivateFieldGet(this,je)===a.ControlMode.edit){babelHelpers.classPrivateFieldSet(this,Re,t.Tag.render(Ge||(Ge=babelHelpers.taggedTemplateLiteral(['<div class="location-map-mobile-center-marker"></div>']))));babelHelpers.classPrivateFieldGet(this,Ae).getDiv().appendChild(babelHelpers.classPrivateFieldGet(this,Re))}else{babelHelpers.classPrivateFieldSet(this,Ue,new google.maps.Marker({position:l,map:babelHelpers.classPrivateFieldGet(this,Ae),draggable:false,icon:"/bitrix/js/location/css/image/marker.png"}))}babelHelpers.classPrivateFieldGet(this,Ae).addListener("dragstart",(function(){return Oe(i,it,ft).call(i)}));babelHelpers.classPrivateFieldGet(this,Ae).addListener("idle",(function(){return Oe(i,st,wt).call(i)}));babelHelpers.classPrivateFieldGet(this,Ae).addListener("drag",(function(){return Oe(i,at,ht).call(i)}));babelHelpers.classPrivateFieldGet(this,Ae).addListener("zoom_changed",(function(){return Oe(i,lt,Ht).call(i)}));if(typeof google.maps.Geocoder==="undefined"){throw new Error("google.maps.Geocoder must be defined")}babelHelpers.classPrivateFieldSet(this,Ne,new google.maps.Geocoder);if(e.searchOnRender){Oe(this,et,pt).call(this)}}var mt={writable:true,value:"onChanged"};var Tt={writable:true,value:"onStartChanging"};var yt={writable:true,value:"onEndChanging"};var Ft={writable:true,value:"onMapViewChanged"};function It(e,t){var a=typeof Symbol!=="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=St(e))||t&&e&&typeof e.length==="number"){if(a)e=a;var i=0;var l=function e(){};return{s:l,n:function t(){if(i>=e.length)return{done:true};return{done:false,value:e[i++]}},e:function e(t){throw t},f:l}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r=true,s=false,n;return{s:function t(){a=a.call(e)},n:function e(){var t=a.next();r=t.done;return t},e:function e(t){s=true;n=t},f:function e(){try{if(!r&&a["return"]!=null)a["return"]()}finally{if(s)throw n}}}}function St(e,t){if(!e)return;if(typeof e==="string")return Gt(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor)a=e.constructor.name;if(a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Gt(e,t)}function Gt(e,t){if(t==null||t>e.length)t=e.length;for(var a=0,i=new Array(t);a<t;a++)i[a]=e[a];return i}function kt(e,t){Ct(e,t);t.add(e)}function zt(e,t,a){Ct(e,t);t.set(e,a)}function Ct(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function Lt(e,t,a){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return a}var Mt=new WeakMap;var Et=new WeakMap;var _t=new WeakMap;var Ot=new WeakMap;var Wt=new WeakSet;var At=function(e){babelHelpers.inherits(t,e);function t(e){var a;babelHelpers.classCallCheck(this,t);a=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e));kt(babelHelpers.assertThisInitialized(a),Wt);zt(babelHelpers.assertThisInitialized(a),Mt,{writable:true,value:void 0});zt(babelHelpers.assertThisInitialized(a),Et,{writable:true,value:void 0});zt(babelHelpers.assertThisInitialized(a),_t,{writable:true,value:void 0});zt(babelHelpers.assertThisInitialized(a),Ot,{writable:true,value:void 0});babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(a),_t,e.googleSource);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(a),Mt,e.map);return a}babelHelpers.createClass(t,[{key:"requestPhotos",value:function e(t){var a=this;return new Promise((function(e){var i=Lt(a,Wt,Bt).call(a);if(!i){e([])}var l=Lt(a,Wt,Bt).call(a);if(!l){e([])}l.then((function(){if(t.location.sourceCode!==babelHelpers.classPrivateFieldGet(a,_t).sourceCode){e([]);return}if(t.location.externalId.length<=0){e([]);return}babelHelpers.classPrivateFieldGet(a,Et).getDetails({placeId:t.location.externalId,fields:["photos"]},(function(a,i){var l=[];if(i===google.maps.places.PlacesServiceStatus.OK){if(Array.isArray(a.photos)){var r=0;var s=It(a.photos),n;try{for(s.s();!(n=s.n()).done;){var o=n.value;l.push({url:o.getUrl(),width:o.width,height:o.height,description:Array.isArray(o.html_attributions)?o.html_attributions.join("<br>"):"",thumbnail:{url:o.getUrl({maxHeight:t.thumbnailHeight,maxWidth:t.thumbnailWidth}),width:t.thumbnailWidth,height:t.thumbnailHeight}});r++;if(t.maxPhotoCount&&r>=t.maxPhotoCount){break}}}catch(e){s.e(e)}finally{s.f()}}}e(l)}))}))}))}}]);return t}(a.PhotoServiceBase);function Bt(){var e=this;if(!babelHelpers.classPrivateFieldGet(this,Ot)){if(babelHelpers.classPrivateFieldGet(this,Mt).loaderPromise===null){return}babelHelpers.classPrivateFieldSet(this,Ot,babelHelpers.classPrivateFieldGet(this,Mt).loaderPromise.then((function(){babelHelpers.classPrivateFieldSet(e,Et,new google.maps.places.PlacesService(babelHelpers.classPrivateFieldGet(e,Mt).googleMap))})))}return babelHelpers.classPrivateFieldGet(this,Ot)}function Rt(e,t){var a=typeof Symbol!=="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=Ut(e))||t&&e&&typeof e.length==="number"){if(a)e=a;var i=0;var l=function e(){};return{s:l,n:function t(){if(i>=e.length)return{done:true};return{done:false,value:e[i++]}},e:function e(t){throw t},f:l}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r=true,s=false,n;return{s:function t(){a=a.call(e)},n:function e(){var t=a.next();r=t.done;return t},e:function e(t){s=true;n=t},f:function e(){try{if(!r&&a["return"]!=null)a["return"]()}finally{if(s)throw n}}}}function Ut(e,t){if(!e)return;if(typeof e==="string")return xt(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor)a=e.constructor.name;if(a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return xt(e,t)}function xt(e,t){if(t==null||t>e.length)t=e.length;for(var a=0,i=new Array(t);a<t;a++)i[a]=e[a];return i}function jt(e,t){Nt(e,t);t.add(e)}function Dt(e,t,a){Nt(e,t);t.set(e,a)}function Nt(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function Yt(e,t,a){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return a}var Vt=new WeakMap;var Xt=new WeakMap;var Kt=new WeakMap;var Zt=new WeakMap;var qt=new WeakSet;var $t=new WeakSet;var Jt=new WeakSet;var Qt=function(e){babelHelpers.inherits(t,e);function t(e){var a;babelHelpers.classCallCheck(this,t);a=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e));jt(babelHelpers.assertThisInitialized(a),Jt);jt(babelHelpers.assertThisInitialized(a),$t);jt(babelHelpers.assertThisInitialized(a),qt);Dt(babelHelpers.assertThisInitialized(a),Vt,{writable:true,value:void 0});Dt(babelHelpers.assertThisInitialized(a),Xt,{writable:true,value:void 0});Dt(babelHelpers.assertThisInitialized(a),Kt,{writable:true,value:void 0});Dt(babelHelpers.assertThisInitialized(a),Zt,{writable:true,value:void 0});babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(a),Vt,e.map);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(a),Zt,e.googleSource);return a}babelHelpers.createClass(t,[{key:"geocodeConcrete",value:function e(t){var a=this;return new Promise((function(e){var i=Yt(a,qt,ea).call(a);if(!i){e([]);return}i.then((function(){babelHelpers.classPrivateFieldGet(a,Xt).geocode({address:t},(function(t,i){if(i==="OK"){e(Yt(a,Jt,aa).call(a,t))}else if(i==="ZERO_RESULTS"){e([])}else{BX.debug("Geocode was not successful for the following reason: ".concat(i))}}))}))}))}}]);return t}(a.GeocodingServiceBase);function ea(){var e=this;if(!babelHelpers.classPrivateFieldGet(this,Kt)){if(babelHelpers.classPrivateFieldGet(this,Zt).loaderPromise===null){return}babelHelpers.classPrivateFieldSet(this,Kt,babelHelpers.classPrivateFieldGet(this,Zt).loaderPromise.then((function(){babelHelpers.classPrivateFieldSet(e,Xt,new google.maps.Geocoder)})))}return babelHelpers.classPrivateFieldGet(this,Kt)}function ta(e){var t={country:a.LocationType.COUNTRY,locality:a.LocationType.LOCALITY,postal_town:a.LocationType.LOCALITY,route:a.LocationType.STREET,street_address:a.LocationType.ADDRESS_LINE_1,administrative_area_level_4:a.LocationType.ADM_LEVEL_4,administrative_area_level_3:a.LocationType.ADM_LEVEL_3,administrative_area_level_2:a.LocationType.ADM_LEVEL_2,administrative_area_level_1:a.LocationType.ADM_LEVEL_1,floor:a.LocationType.FLOOR,postal_code:a.AddressType.POSTAL_CODE,room:a.LocationType.ROOM,sublocality:a.LocationType.SUB_LOCALITY,sublocality_level_1:a.LocationType.SUB_LOCALITY_LEVEL_1,sublocality_level_2:a.LocationType.SUB_LOCALITY_LEVEL_2,street_number:a.LocationType.BUILDING};var i=a.LocationType.UNKNOWN;var l=Rt(e),r;try{for(l.s();!(r=l.n()).done;){var s=r.value;if(typeof t[s]!=="undefined"){i=t[s];break}}}catch(e){l.e(e)}finally{l.f()}return i}function aa(e){var t=[];var i=Rt(e),l;try{for(i.s();!(l=i.n()).done;){var r=l.value;var s=new a.Location;s.sourceCode=babelHelpers.classPrivateFieldGet(this,Zt).sourceCode;s.languageId=babelHelpers.classPrivateFieldGet(this,Zt).languageId;s.externalId=r.place_id;s.type=Yt(this,$t,ta).call(this,r.types);s.name=r.formatted_address;s.latitude=r.geometry.location.lat();s.longitude=r.geometry.location.lng();t.push(s)}}catch(e){i.e(e)}finally{i.f()}return t}function ia(e,t,a){la(e,t);t.set(e,a)}function la(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}var ra=new WeakMap;var sa=new WeakMap;var na=new WeakMap;var oa=new WeakMap;var ba=new WeakMap;var ca=new WeakMap;var ua=new WeakMap;var da=new WeakMap;var pa=function(e){babelHelpers.inherits(i,e);function i(e){var l;babelHelpers.classCallCheck(this,i);l=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(i).call(this,e));ia(babelHelpers.assertThisInitialized(l),ra,{writable:true,value:""});ia(babelHelpers.assertThisInitialized(l),sa,{writable:true,value:""});ia(babelHelpers.assertThisInitialized(l),na,{writable:true,value:null});ia(babelHelpers.assertThisInitialized(l),oa,{writable:true,value:void 0});ia(babelHelpers.assertThisInitialized(l),ba,{writable:true,value:void 0});ia(babelHelpers.assertThisInitialized(l),ca,{writable:true,value:void 0});ia(babelHelpers.assertThisInitialized(l),ua,{writable:true,value:void 0});ia(babelHelpers.assertThisInitialized(l),da,{writable:true,value:void 0});if(!t.Type.isString(e.languageId)||e.languageId.trim()===""){throw new a.SourceCreationError("props.languageId must be a string")}babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(l),ra,e.languageId);if(!t.Type.isString(e.sourceLanguageId)||e.sourceLanguageId.trim()===""){throw new a.SourceCreationError("props.sourceLanguageId must be a string")}babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(l),sa,e.sourceLanguageId);if(!t.Type.isString(e.apiKey)||e.apiKey.trim()===""){throw new a.SourceCreationError("props.apiKey must be a string")}babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(l),na,c.load(e.apiKey,e.sourceLanguageId));babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(l),oa,new pe({googleSource:babelHelpers.assertThisInitialized(l),languageId:babelHelpers.classPrivateFieldGet(babelHelpers.assertThisInitialized(l),ra)}));babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(l),ba,new ot({googleSource:babelHelpers.assertThisInitialized(l),languageId:babelHelpers.classPrivateFieldGet(babelHelpers.assertThisInitialized(l),ra)}));babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(l),da,new M({googleSource:babelHelpers.assertThisInitialized(l),languageId:babelHelpers.classPrivateFieldGet(babelHelpers.assertThisInitialized(l),ra)}));babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(l),ca,new At({googleSource:babelHelpers.assertThisInitialized(l),map:babelHelpers.classPrivateFieldGet(babelHelpers.assertThisInitialized(l),oa)}));babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(l),ua,new Qt({googleSource:babelHelpers.assertThisInitialized(l),map:babelHelpers.classPrivateFieldGet(babelHelpers.assertThisInitialized(l),oa)}));return l}babelHelpers.createClass(i,[{key:"sourceCode",get:function e(){return i.code}},{key:"loaderPromise",get:function e(){return babelHelpers.classPrivateFieldGet(this,na)}},{key:"map",get:function e(){return babelHelpers.classPrivateFieldGet(this,oa)}},{key:"mapMobile",get:function e(){return babelHelpers.classPrivateFieldGet(this,ba)}},{key:"autocompleteService",get:function e(){return babelHelpers.classPrivateFieldGet(this,da)}},{key:"photoService",get:function e(){return babelHelpers.classPrivateFieldGet(this,ca)}},{key:"geocodingService",get:function e(){return babelHelpers.classPrivateFieldGet(this,ua)}},{key:"languageId",get:function e(){return babelHelpers.classPrivateFieldGet(this,ra)}}]);return i}(a.BaseSource);babelHelpers.defineProperty(pa,"code","GOOGLE");e.Google=pa})(this.BX.Location.Google=this.BX.Location.Google||{},BX,BX.Location.Core);
//# sourceMappingURL=google.bundle.map.js