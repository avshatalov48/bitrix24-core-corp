{"version":3,"file":"google.bundle.js","sources":["../src/loader.js","../src/autocompleteservice.js","../src/map.js","../src/mapmobile.js","../src/photoservice.js","../src/geocodingservice.js","../src/google.js"],"sourcesContent":["/**\n * Loads google source services\n */\nexport default class Loader\n{\n\tstatic #loadingPromise = null;\n\n\tstatic #createSrc(apiKey, languageId)\n\t{\n\t\treturn 'https://maps.googleapis.com/maps/api/js'\n\t\t\t+ `?key=${apiKey}`\n\t\t\t+ '&libraries=places'\n\t\t\t+ `&language=${languageId}`\n\t\t\t+ `&region=${this.#getRegion(languageId)}`;\n\t}\n\n\tstatic #getRegion(languageId: string): string\n\t{\n\t\tconst map = {\n\t\t\t'en': 'US',\n\t\t\t'uk': 'UA',\n\t\t\t'zh': 'CN',\n\t\t\t'ja': 'JP',\n\t\t\t'vi': 'VN',\n\t\t\t'ms': 'MY',\n\t\t\t'hi': 'IN'\n\t\t};\n\n\t\treturn typeof map[languageId] !== 'undefined' ? map[languageId] : languageId.toUpperCase();\n\t}\n\n\t/**\n\t * Loads google services\n\t * @param {string} apiKey\n\t * @param {string} languageId\n\t * @returns {Promise}\n\t */\n\tstatic load(apiKey: string, languageId: string): Promise\n\t{\n\t\tif (Loader.#loadingPromise === null)\n\t\t{\n\t\t\tLoader.#loadingPromise = new Promise((resolve) => {\n\n\t\t\t\tBX.load(\n\t\t\t\t\t[Loader.#createSrc(apiKey, languageId)],\n\t\t\t\t\t() => {\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t});\n\t\t}\n\n\t\treturn Loader.#loadingPromise;\n\t}\n}","/* global google */\n\nimport {Loc} from 'main.core';\nimport {\n\tLocation,\n\tAutocompleteServiceBase,\n\tAutocompleteCache,\n\tLocationType\n} from 'location.core';\nimport type { AutocompleteServiceParams } from 'location.core';\nimport { Google } from './google';\n\nconst STATUS_OK = 'OK';\nconst STATUS_ZERO_RESULTS = 'ZERO_RESULTS';\n\nexport default class AutocompleteService extends AutocompleteServiceBase\n{\n\t/** {string} */\n\t#languageId;\n\t/** {google.maps.places.AutocompleteService} */\n\t#googleAutocompleteService;\n\t/** {Promise} */\n\t#loaderPromise;\n\t/** {GoogleSource} */\n\t#googleSource;\n\t/** {number} */\n\t#biasBoundRadius = 50000;\n\n\tconstructor(props)\n\t{\n\t\tsuper(props);\n\t\tthis.#languageId = props.languageId;\n\t\tthis.#googleSource = props.googleSource;\n\t\t// Because googleSource could still be in the process of loading\n\t\tthis.#loaderPromise = props.googleSource.loaderPromise\n\t\t\t.then(() => {\n\t\t\t\tthis.#initAutocompleteService();\n\t\t\t});\n\t}\n\n\t#getPredictionPromise(query: string, params: AutocompleteServiceParams)\n\t{\n\t\tconst queryPredictionsParams = {\n\t\t\tinput: query,\n\t\t};\n\n\t\tif (params.biasPoint)\n\t\t{\n\t\t\tqueryPredictionsParams.location = new google.maps.LatLng(\n\t\t\t\tparams.biasPoint.latitude,\n\t\t\t\tparams.biasPoint.longitude\n\t\t\t);\n\t\t\tqueryPredictionsParams.radius = this.#biasBoundRadius;\n\t\t}\n\n\t\tlet cachedResult = AutocompleteCache.get(Google.code, queryPredictionsParams);\n\t\tif (cachedResult !== null)\n\t\t{\n\t\t\treturn Promise.resolve(\n\t\t\t\tthis.#convertToLocationsList(\n\t\t\t\t\tcachedResult.data.result,\n\t\t\t\t\tcachedResult.data.status\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\n\t\treturn new Promise((resolve) => {\n\t\t\t\tthis.#googleAutocompleteService.getQueryPredictions(\n\t\t\t\t\tqueryPredictionsParams,\n\t\t\t\t\t(res, status) => {\n\t\t\t\t\t\tif (status === STATUS_OK || status === STATUS_ZERO_RESULTS)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tAutocompleteCache.set(\n\t\t\t\t\t\t\t\tGoogle.code,\n\t\t\t\t\t\t\t\tqueryPredictionsParams,\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tstatus: status,\n\t\t\t\t\t\t\t\t\tresult: res,\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tresolve(\n\t\t\t\t\t\t\tthis.#convertToLocationsList(res, status)\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t);\n\t}\n\n\t/**\n\t * Returns Promise witch  will transfer locations list\n\t * @param {string} query\n\t * @param {AutocompleteServiceParams} params\n\t * @returns {Promise}\n\t */\n\tautocomplete(query: string, params: AutocompleteServiceParams): Promise<Array<Location>, Error>\n\t{\n\t\tif (query === '')\n\t\t{\n\t\t\treturn new Promise((resolve) => {\n\t\t\t\tresolve([]);\n\t\t\t});\n\t\t}\n\n\t\t// Because google.maps.places.AutocompleteService could be still in the process of loading\n\t\treturn this.#loaderPromise\n\t\t\t.then(() => {\n\t\t\t\treturn this.#getPredictionPromise(query, params);\n\t\t\t},\n\t\t\t(error) => BX.debug(error)\n\t\t);\n\t}\n\n\t#initAutocompleteService()\n\t{\n\t\tif(typeof google === 'undefined' || typeof google.maps.places.AutocompleteService === 'undefined')\n\t\t{\n\t\t\tthrow new Error('google.maps.places.AutocompleteService must be defined');\n\t\t}\n\n\t\tthis.#googleAutocompleteService = new google.maps.places.AutocompleteService();\n\t}\n\n\t#convertToLocationsList(data, status)\n\t{\n\t\tif (status === STATUS_ZERO_RESULTS)\n\t\t{\n\t\t\treturn [];\n\t\t}\n\n\t\tif (!data || status !== STATUS_OK)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tconst result = [];\n\n\t\tfor (const item of data)\n\t\t{\n\t\t\tif (item.place_id)\n\t\t\t{\n\t\t\t\tlet name;\n\n\t\t\t\tif (item.structured_formatting && item.structured_formatting.main_text)\n\t\t\t\t{\n\t\t\t\t\tname = item.structured_formatting.main_text;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tname = item.description;\n\t\t\t\t}\n\n\t\t\t\tconst location = new Location({\n\t\t\t\t\tsourceCode: this.#googleSource.sourceCode,\n\t\t\t\t\texternalId: item.place_id,\n\t\t\t\t\tname: name,\n\t\t\t\t\tlanguageId: this.#languageId\n\t\t\t\t});\n\n\t\t\t\tif (item.structured_formatting && item.structured_formatting.secondary_text)\n\t\t\t\t{\n\t\t\t\t\tlocation.setFieldValue(\n\t\t\t\t\t\tLocationType.TMP_TYPE_CLARIFICATION,\n\t\t\t\t\t\titem.structured_formatting.secondary_text\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tconst typeHint = this.#getTypeHint(item.types);\n\n\t\t\t\tif (typeHint)\n\t\t\t\t{\n\t\t\t\t\tlocation.setFieldValue(\n\t\t\t\t\t\tLocationType.TMP_TYPE_HINT,\n\t\t\t\t\t\tthis.#getTypeHint(item.types)\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tresult.push(location);\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t#getTypeHint(types: Array): String\n\t{\n\t\tlet result = '';\n\n\t\tif (types.indexOf('locality') >= 0)\n\t\t{\n\t\t\tresult = Loc.getMessage('LOCATION_GOO_AUTOCOMPLETE_TYPE_LOCALITY');\n\t\t}\n\t\telse if (types.indexOf('sublocality') >= 0)\n\t\t{\n\t\t\tresult = Loc.getMessage('LOCATION_GOO_AUTOCOMPLETE_TYPE_SUBLOCAL');\n\t\t}\n\t\telse if (types.indexOf('store') >= 0)\n\t\t{\n\t\t\tresult = Loc.getMessage('LOCATION_GOO_AUTOCOMPLETE_TYPE_STORE');\n\t\t}\n\t\telse if (types.indexOf('restaurant') >= 0)\n\t\t{\n\t\t\tresult = Loc.getMessage('LOCATION_GOO_AUTOCOMPLETE_TYPE_RESTAURANT');\n\t\t}\n\t\telse if (types.indexOf('cafe') >= 0)\n\t\t{\n\t\t\tresult = Loc.getMessage('LOCATION_GOO_AUTOCOMPLETE_TYPE_CAFE');\n\t\t}\n\n\t\treturn result;\n\t}\n}\n","import {\n\tEvent,\n\tText\n} from 'main.core';\nimport {\n\tLocation,\n\tLocationRepository,\n\tControlMode,\n\tMapBase,\n\tErrorPublisher\n} from 'location.core';\n\n/**\n * Class for the autocomplete locations and addresses inputs\n */\nexport default class Map extends MapBase\n{\n\tstatic #onChangedEvent = 'onChanged';\n\tstatic #onStartChanging = 'onStartChanging';\n\tstatic #onEndChanging = 'onEndChanging';\n\tstatic #onMapViewChanged = 'onMapViewChanged';\n\n\t/** {string} */\n\t#languageId;\n\t/** {google.maps.Map} */\n\t#googleMap;\n\t/** {GoogleSource} */\n\t#googleSource;\n\t/** {number} */\n\t#zoom;\n\t/** {google.maps.Marker} */\n\t#locationMarker;\n\t/** {ControlMode} */\n\t#mode;\n\t/** Location */\n\t#location;\n\t#geocoder;\n\t#locationRepository;\n\t#timerId = null;\n\t#isUpdating = false;\n\t#changeDelay;\n\t#loaderPromise = null;\n\n\tconstructor(props)\n\t{\n\t\tsuper(props);\n\t\tthis.#languageId = props.languageId;\n\t\tthis.#googleSource = props.googleSource;\n\t\tthis.#locationRepository = props.locationRepository || new LocationRepository();\n\t\tthis.#changeDelay = props.changeDelay || 700;\n\t}\n\n\trender(props: Object): Promise\n\t{\n\t\tthis.#loaderPromise = this.#googleSource.loaderPromise.then(() => {\n\t\t\tthis.#initGoogleMap(props);\n\t\t});\n\n\t\treturn this.#loaderPromise;\n\t}\n\n\tget loaderPromise(): Promise\n\t{\n\t\treturn this.#loaderPromise;\n\t}\n\n\tset mode(mode: string)\n\t{\n\t\tthis.#mode = mode;\n\n\t\tif (this.#locationMarker)\n\t\t{\n\t\t\tthis.#locationMarker.setDraggable(mode === ControlMode.edit);\n\t\t}\n\t}\n\n\t#convertLocationToPosition(location: ?Location): Object\n\t{\n\t\tif (!location)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tif (typeof google === 'undefined' || typeof google.maps === 'undefined')\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\treturn new google.maps.LatLng(location.latitude, location.longitude);\n\t}\n\n\t#adjustZoom(): void\n\t{\n\t\tif (!this.#location)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst zoom = Map.getZoomByLocation(this.#location);\n\t\tif (zoom !== null && zoom !== this.#zoom)\n\t\t{\n\t\t\tthis.zoom = zoom;\n\t\t}\n\t}\n\n\tget zoom(): number\n\t{\n\t\treturn this.#zoom;\n\t}\n\n\tset zoom(zoom: number): void\n\t{\n\t\tthis.#zoom = zoom;\n\n\t\tif (this.#googleMap)\n\t\t{\n\t\t\tthis.#googleMap.setZoom(zoom);\n\t\t}\n\t}\n\n\t#getPositionToLocationPromise(position): Promise\n\t{\n\t\treturn new Promise( (resolve) => {\n\t\t\tthis.#geocoder.geocode({'location': position}, (results, status)  => {\n\t\t\t\tif (status === 'OK' && results[0])\n\t\t\t\t{\n\t\t\t\t\tresolve(results[0].place_id);\n\t\t\t\t}\n\t\t\t\telse if (status === 'ZERO_RESULTS')\n\t\t\t\t{\n\t\t\t\t\tresolve('');\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthrow Error('Geocoder failed due to: ' + status);\n\t\t\t\t}\n\t\t\t});\n\t\t})\n\t\t.then((placeId) => {\n\t\t\tlet result;\n\n\t\t\tif (placeId)\n\t\t\t{\n\t\t\t\tresult = this.#locationRepository.findByExternalId(\n\t\t\t\t\tplaceId,\n\t\t\t\t\tthis.#googleSource.sourceCode,\n\t\t\t\t\tthis.#languageId\n\t\t\t\t);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresult = new Promise((resolve) => {\n\t\t\t\t\tresolve(null);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn result;\n\t\t});\n\t}\n\n\tset location(location: Location)\n\t{\n\t\tthis.#location = location;\n\n\t\tconst position = this.#convertLocationToPosition(location);\n\t\tif (position)\n\t\t{\n\t\t\tif (this.#locationMarker)\n\t\t\t{\n\t\t\t\tthis.#isUpdating = true;\n\t\t\t\tthis.#locationMarker.setPosition(position);\n\t\t\t\tthis.#isUpdating = false;\n\t\t\t}\n\n\t\t\tif (this.#googleMap)\n\t\t\t{\n\t\t\t\tif (!this.#locationMarker.getMap())\n\t\t\t\t{\n\t\t\t\t\tthis.#locationMarker.setMap(this.#googleMap);\n\t\t\t\t}\n\n\t\t\t\tthis.#googleMap.panTo(position);\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (this.#locationMarker)\n\t\t\t{\n\t\t\t\tthis.#locationMarker.setMap(null);\n\t\t\t}\n\t\t}\n\n\t\tthis.#adjustZoom();\n\t}\n\n\tget location(): Location\n\t{\n\t\treturn this.#location;\n\t}\n\n\tonLocationChangedEventSubscribe(listener: function): void\n\t{\n\t\tthis.subscribe(Map.#onChangedEvent, listener);\n\t}\n\n\tonStartChangingSubscribe(listener: function): void\n\t{\n\t\tthis.subscribe(Map.#onStartChanging, listener);\n\t}\n\n\tonEndChangingSubscribe(listener: function): void\n\t{\n\t\tthis.subscribe(Map.#onEndChanging, listener);\n\t}\n\n\tonMapViewChangedSubscribe(listener: function): void\n\t{\n\t\tthis.subscribe(Map.#onMapViewChanged, listener);\n\t}\n\n\t#emitOnLocationChangedEvent(location: ?Location)\n\t{\n\t\tif (this.#mode === ControlMode.edit)\n\t\t{\n\t\t\tthis.emit(Map.#onChangedEvent, { location: location\t});\n\t\t}\n\t}\n\n\t#onMarkerUpdatePosition()\n\t{\n\t\tif (!this.#isUpdating && this.#mode === ControlMode.edit)\n\t\t{\n\t\t\tthis.#createTimer(this.#locationMarker.getPosition());\n\t\t}\n\t}\n\n\t#createTimer(position)\n\t{\n\t\tif (this.#timerId !== null)\n\t\t{\n\t\t\tclearTimeout(this.#timerId);\n\t\t}\n\n\t\tthis.#timerId = setTimeout(\n\t\t\t() => {\n\t\t\t\tconst requestId = Text.getRandom();\n\t\t\t\tthis.emit(Map.#onStartChanging, { requestId });\n\n\t\t\t\tthis.#timerId = null;\n\t\t\t\tthis.#googleMap.panTo(position);\n\t\t\t\tthis.#fulfillOnChangedEvent(position, requestId);\n\t\t\t},\n\t\t\tthis.#changeDelay\n\t\t);\n\t}\n\n\t#fulfillOnChangedEvent(position, requestId)\n\t{\n\t\tthis.#getPositionToLocationPromise(position)\n\t\t\t.then((location) => {\n\t\t\t\tthis.emit(Map.#onEndChanging, { requestId });\n\t\t\t\tthis.#emitOnLocationChangedEvent(location);\n\t\t\t})\n\t\t\t.catch((response) => {\n\t\t\t\tthis.emit(Map.#onEndChanging, { requestId });\n\t\t\t\tErrorPublisher.getInstance().notify(response.errors);\n\t\t\t});\n\t}\n\n\t#onMapClick(position)\n\t{\n\t\tif (this.#mode === ControlMode.edit)\n\t\t{\n\t\t\tif (!this.#locationMarker.getMap)\n\t\t\t{\n\t\t\t\tthis.#locationMarker.setMap(this.#googleMap);\n\t\t\t}\n\n\t\t\tthis.#locationMarker.setPosition(position);\n\t\t\tthis.#createTimer(position);\n\t\t}\n\t}\n\n\t#initGoogleMap(props): void\n\t{\n\t\tthis.#mode = props.mode;\n\t\tthis.#location = props.location || null;\n\n\t\tif (typeof google === 'undefined' || typeof google.maps.Map === 'undefined')\n\t\t{\n\t\t\tthrow new Error('google.maps.Map must be defined');\n\t\t}\n\n\t\tconst position = this.#convertLocationToPosition(this.#location);\n\n\t\tconst mapProps = {\n\t\t\tgestureHandling: 'greedy',\n\t\t\tdisableDefaultUI: true,\n\t\t\tzoomControl: BX.prop.getBoolean(props, 'zoomControl', true),\n\t\t\tzoomControlOptions: {\n\t\t\t\tposition: google.maps.ControlPosition.TOP_LEFT\n\t\t\t}\n\t\t};\n\n\t\tconst zoom = Map.getZoomByLocation(this.#location);\n\t\tif (zoom)\n\t\t{\n\t\t\tmapProps.zoom = zoom;\n\t\t}\n\n\t\tif (position)\n\t\t{\n\t\t\tmapProps.center = position;\n\t\t}\n\n\t\tthis.#googleMap = new google.maps.Map(\n\t\t\tprops.mapContainer,\n\t\t\tmapProps\n\t\t);\n\n\t\tthis.#googleMap.addListener('click', (e) => {\n\t\t\tthis.#onMapClick(e.latLng);\n\t\t});\n\n\t\tif (typeof google.maps.Marker === 'undefined')\n\t\t{\n\t\t\tthrow new Error('google.maps.Marker must be defined');\n\t\t}\n\n\t\tthis.#locationMarker = new google.maps.Marker({\n\t\t\tposition: position,\n\t\t\tmap: this.#googleMap,\n\t\t\tdraggable: this.#mode === ControlMode.edit\n\t\t});\n\n\t\tthis.#locationMarker.addListener('position_changed', () => {\n\t\t\tthis.#onMarkerUpdatePosition();\n\t\t});\n\n\t\tif (typeof google.maps.Geocoder === 'undefined')\n\t\t{\n\t\t\tthrow new Error('google.maps.Geocoder must be defined');\n\t\t}\n\n\t\tthis.#geocoder = new google.maps.Geocoder;\n\t}\n\n\tget googleMap(): ?Object\n\t{\n\t\treturn this.#googleMap;\n\t}\n\n\tdestroy()\n\t{\n\t\tEvent.unbindAll(this);\n\t\tthis.#googleMap = null;\n\t\tthis.#locationMarker = null;\n\t\tthis.#geocoder = null;\n\t\tthis.#timerId = null;\n\t\tthis.#loaderPromise = null;\n\t\tsuper.destroy();\n\t}\n}\n","import {\n\tEvent,\n\tText,\n\tTag,\n\tDom,\n} from 'main.core';\nimport {\n\tLocation,\n\tLocationRepository,\n\tControlMode,\n\tMapBase,\n\tErrorPublisher\n} from 'location.core';\n\n/**\n * Class for the autocomplete locations and addresses inputs\n */\nexport default class Map extends MapBase\n{\n\tstatic #onChangedEvent = 'onChanged';\n\tstatic #onStartChanging = 'onStartChanging';\n\tstatic #onEndChanging = 'onEndChanging';\n\tstatic #onMapViewChanged = 'onMapViewChanged';\n\n\t/** {string} */\n\t#languageId;\n\t/** {google.maps.Map} */\n\t#googleMap;\n\t/** {GoogleSource} */\n\t#googleSource;\n\t#markerNode;\n\t/** {google.maps.Marker} */\n\t#locationMarker;\n\n\t/** {number} */\n\t#zoom;\n\t/** {ControlMode} */\n\t#mode;\n\t/** Location */\n\t#location;\n\t#geocoder;\n\t#locationRepository;\n\t#timerId = null;\n\t#changeDelay;\n\t#loaderPromise = null;\n\t#isMapChanging = false;\n\n\tconstructor(props)\n\t{\n\t\tsuper(props);\n\t\tthis.#languageId = props.languageId;\n\t\tthis.#googleSource = props.googleSource;\n\t\tthis.#locationRepository = props.locationRepository || new LocationRepository();\n\t\tthis.#changeDelay = props.changeDelay || 700;\n\t}\n\n\trender(props: Object): Promise\n\t{\n\t\tthis.#loaderPromise = this.#googleSource.loaderPromise.then(() => {\n\t\t\tthis.#initGoogleMap(props);\n\t\t});\n\n\t\treturn this.#loaderPromise;\n\t}\n\n\tget loaderPromise(): Promise\n\t{\n\t\treturn this.#loaderPromise;\n\t}\n\n\tset mode(mode: string)\n\t{\n\t\tthis.#mode = mode;\n\t}\n\n\t#convertLocationToPosition(location: ?Location): Object\n\t{\n\t\tif (!location)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tif (typeof google === 'undefined' || typeof google.maps === 'undefined')\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\treturn new google.maps.LatLng(location.latitude, location.longitude);\n\t}\n\n\t#adjustZoom(): void\n\t{\n\t\tif (!this.#location)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst zoom = Map.getZoomByLocation(this.#location);\n\t\tif (zoom !== null && zoom !== this.#zoom)\n\t\t{\n\t\t\tthis.zoom = zoom;\n\t\t}\n\t}\n\n\tget zoom(): number\n\t{\n\t\treturn this.#zoom;\n\t}\n\n\tset zoom(zoom: number): void\n\t{\n\t\tthis.#zoom = zoom;\n\n\t\tif (this.#googleMap)\n\t\t{\n\t\t\tthis.#googleMap.setZoom(zoom);\n\t\t}\n\t}\n\n\t#getPositionToLocationPromise(position): Promise\n\t{\n\t\treturn new Promise( (resolve) => {\n\t\t\tthis.#geocoder.geocode({'location': position}, (results, status)  => {\n\t\t\t\tif (status === 'OK' && results[0])\n\t\t\t\t{\n\t\t\t\t\tresolve(results[0].place_id);\n\t\t\t\t}\n\t\t\t\telse if (status === 'ZERO_RESULTS')\n\t\t\t\t{\n\t\t\t\t\tresolve('');\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthrow Error('Geocoder failed due to: ' + status);\n\t\t\t\t}\n\t\t\t});\n\t\t})\n\t\t.then((placeId) => {\n\t\t\tlet result;\n\n\t\t\tif (placeId)\n\t\t\t{\n\t\t\t\tresult = this.#locationRepository.findByExternalId(\n\t\t\t\t\tplaceId,\n\t\t\t\t\tthis.#googleSource.sourceCode,\n\t\t\t\t\tthis.#languageId\n\t\t\t\t);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresult = new Promise((resolve) => {\n\t\t\t\t\tresolve(null);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn result;\n\t\t});\n\t}\n\n\tset location(location: Location)\n\t{\n\t\tthis.#location = location;\n\t\tconst position = this.#convertLocationToPosition(location);\n\n\t\tif (position && this.#googleMap)\n\t\t{\n\t\t\tthis.#googleMap.panTo(position);\n\t\t}\n\n\t\tthis.#adjustZoom();\n\t}\n\n\tpanTo(latitude: string, longitude: string): void\n\t{\n\t\tif (\n\t\t\ttypeof google !== 'undefined'\n\t\t\t&& typeof google.maps !== 'undefined'\n\t\t\t&& this.#googleMap\n\t\t)\n\t\t{\n\t\t\tthis.#googleMap.panTo(new google.maps.LatLng(latitude, longitude));\n\n\t\t\tthis.#adjustZoom();\n\t\t}\n\t}\n\n\tget location(): Location\n\t{\n\t\treturn this.#location;\n\t}\n\n\tonLocationChangedEventSubscribe(listener: function): void\n\t{\n\t\tthis.subscribe(Map.#onChangedEvent, listener);\n\t}\n\n\tonStartChangingSubscribe(listener: function): void\n\t{\n\t\tthis.subscribe(Map.#onStartChanging, listener);\n\t}\n\n\tonEndChangingSubscribe(listener: function): void\n\t{\n\t\tthis.subscribe(Map.#onEndChanging, listener);\n\t}\n\n\tonMapViewChangedSubscribe(listener: function): void\n\t{\n\t\tthis.subscribe(Map.#onMapViewChanged, listener);\n\t}\n\n\t#emitOnLocationChangedEvent(location: ?Location)\n\t{\n\t\tif (this.#mode === ControlMode.edit)\n\t\t{\n\t\t\tthis.emit(Map.#onChangedEvent, { location: location\t});\n\t\t}\n\t}\n\n\t#createTimer()\n\t{\n\t\tif (this.#timerId !== null)\n\t\t{\n\t\t\tclearTimeout(this.#timerId);\n\t\t}\n\n\t\tthis.#timerId = setTimeout(\n\t\t\t() => {\n\t\t\t\tconst requestId = Text.getRandom();\n\t\t\t\tthis.emit(Map.#onStartChanging, { requestId });\n\n\t\t\t\tthis.#timerId = null;\n\t\t\t\tconst position = this.#googleMap.getCenter();\n\t\t\t\tthis.#fulfillOnChangedEvent(position, requestId);\n\t\t\t},\n\t\t\tthis.#changeDelay\n\t\t);\n\t}\n\n\t#fulfillOnChangedEvent(position, requestId)\n\t{\n\t\tthis.#getPositionToLocationPromise(position)\n\t\t\t.then((location) => {\n\t\t\t\tthis.emit(Map.#onEndChanging, { requestId });\n\t\t\t\tthis.#emitOnLocationChangedEvent(location);\n\t\t\t})\n\t\t\t.catch((response) => {\n\t\t\t\tthis.emit(Map.#onEndChanging, { requestId });\n\t\t\t\tErrorPublisher.getInstance().notify(response.errors);\n\t\t\t});\n\t}\n\n\t#onDrag()\n\t{\n\t\tif (this.#timerId !== null)\n\t\t{\n\t\t\tclearTimeout(this.#timerId);\n\t\t}\n\t}\n\n\t#onDragStart()\n\t{\n\t\tthis.#onMapChanging();\n\t\tthis.emit(Map.#onMapViewChanged);\n\t}\n\n\t#onZoomChanged()\n\t{\n\t\tthis.#onMapChanging();\n\t\tthis.emit(Map.#onMapViewChanged);\n\t}\n\n\t#onMapChanging()\n\t{\n\t\tif (this.#mode === ControlMode.edit)\n\t\t{\n\t\t\tthis.#isMapChanging = true;\n\n\t\t\tDom.addClass(this.#markerNode, 'location-map-mobile-center-marker-up');\n\t\t}\n\t}\n\n\t#onIdle()\n\t{\n\t\tif (this.#mode === ControlMode.edit)\n\t\t{\n\t\t\tif (this.#isMapChanging === false)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst upClass = 'location-map-mobile-center-marker-up';\n\t\t\tif (Dom.hasClass(this.#markerNode, upClass))\n\t\t\t{\n\t\t\t\tDom.removeClass(this.#markerNode, upClass);\n\t\t\t}\n\n\t\t\tthis.#createTimer();\n\t\t\tthis.#isMapChanging = false;\n\t\t}\n\t}\n\n\t#initGoogleMap(props): void\n\t{\n\t\tthis.#mode = props.mode;\n\t\tthis.#location = props.location || null;\n\n\t\tif (typeof google === 'undefined' || typeof google.maps.Map === 'undefined')\n\t\t{\n\t\t\tthrow new Error('google.maps.Map must be defined');\n\t\t}\n\n\t\tconst position = this.#convertLocationToPosition(this.#location);\n\n\t\tconst mapProps = {\n\t\t\tgestureHandling: 'greedy',\n\t\t\tdisableDefaultUI: true,\n\t\t\tzoomControl: BX.prop.getBoolean(props, 'zoomControl', true),\n\t\t\tzoomControlOptions: {\n\t\t\t\tposition: google.maps.ControlPosition.TOP_LEFT\n\t\t\t}\n\t\t};\n\n\t\tconst zoom = Map.getZoomByLocation(this.#location);\n\t\tif (zoom)\n\t\t{\n\t\t\tmapProps.zoom = zoom;\n\t\t}\n\n\t\tif (position)\n\t\t{\n\t\t\tmapProps.center = position;\n\t\t}\n\n\t\tthis.#googleMap = new google.maps.Map(\n\t\t\tprops.mapContainer,\n\t\t\tmapProps\n\t\t);\n\t\tif (this.#mode === ControlMode.edit)\n\t\t{\n\t\t\tthis.#markerNode = Tag.render`<div class=\"location-map-mobile-center-marker\"></div>`;\n\t\t\tthis.#googleMap.getDiv().appendChild(this.#markerNode);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.#locationMarker = new google.maps.Marker({\n\t\t\t\tposition: position,\n\t\t\t\tmap: this.#googleMap,\n\t\t\t\tdraggable: false,\n\t\t\t\ticon: '/bitrix/js/location/css/image/marker.png',\n\t\t\t});\n\t\t}\n\n\t\tthis.#googleMap.addListener('dragstart', () => this.#onDragStart());\n\t\tthis.#googleMap.addListener('idle', () => this.#onIdle());\n\t\tthis.#googleMap.addListener('drag', () => this.#onDrag());\n\t\tthis.#googleMap.addListener('zoom_changed', () => this.#onZoomChanged());\n\t\tif (typeof google.maps.Geocoder === 'undefined')\n\t\t{\n\t\t\tthrow new Error('google.maps.Geocoder must be defined');\n\t\t}\n\n\t\tthis.#geocoder = new google.maps.Geocoder;\n\n\t\tif (props.searchOnRender)\n\t\t{\n\t\t\tthis.#createTimer();\n\t\t}\n\t}\n\n\tget googleMap(): ?Object\n\t{\n\t\treturn this.#googleMap;\n\t}\n\n\tdestroy()\n\t{\n\t\tEvent.unbindAll(this);\n\t\tthis.#googleMap = null;\n\t\tthis.#geocoder = null;\n\t\tthis.#timerId = null;\n\t\tthis.#loaderPromise = null;\n\t\tsuper.destroy();\n\t}\n}\n","import {PhotoServiceBase, BasePhotoServiceRequestPhotosPropsType} from \"location.core\";\n\nexport default class PhotoService extends PhotoServiceBase\n{\n\t#map;\n\t#service;\n\t#googleSource;\n\t#loadingPromise;\n\n\tconstructor(props)\n\t{\n\t\tsuper(props);\n\t\tthis.#googleSource = props.googleSource;\n\t\tthis.#map = props.map;\n\t}\n\n\t#getLoaderPromise()\n\t{\n\t\tif(!this.#loadingPromise)\n\t\t{\n\t\t\t//map haven't rendered yet\t`\n\t\t\tif(this.#map.loaderPromise === null)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.#loadingPromise = this.#map.loaderPromise.then(() => {\n\t\t\t\tthis.#service = new google.maps.places.PlacesService(this.#map.googleMap);\n\t\t\t});\n\t\t}\n\n\t\treturn this.#loadingPromise;\n\t}\n\n\trequestPhotos(props: BasePhotoServiceRequestPhotosPropsType): Promise\n\t{\n\t\treturn new Promise((resolve) => {\n\n\t\t\tlet promise = this.#getLoaderPromise();\n\n\t\t\tif(!promise)\n\t\t\t{\n\t\t\t\tresolve([]);\n\t\t\t}\n\n\t\t\tlet loaderPromise = this.#getLoaderPromise();\n\n\t\t\tif(!loaderPromise)\n\t\t\t{\n\t\t\t\tresolve([]);\n\t\t\t}\n\n\t\t\tloaderPromise\n\t\t\t .then(() => {\n\t\t\t\tif(props.location.sourceCode !== this.#googleSource.sourceCode)\n\t\t\t\t{\n\t\t\t\t\tresolve([]);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif(props.location.externalId.length <= 0)\n\t\t\t\t{\n\t\t\t\t\tresolve([]);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.#service.getDetails(\n\t\t\t\t\t{\n\t\t\t\t\t\tplaceId: props.location.externalId,\n\t\t\t\t\t\tfields: ['photos']\n\t\t\t\t\t},\n\t\t\t\t\tfunction(place, status)\n\t\t\t\t\t{\n\t\t\t\t\t\tlet resultPhotos = [];\n\n\t\t\t\t\t\tif (status === google.maps.places.PlacesServiceStatus.OK)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif(Array.isArray(place.photos))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlet count = 0;\n\n\t\t\t\t\t\t\t\tfor(let gPhoto of place.photos)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tresultPhotos.push({\n\t\t\t\t\t\t\t\t\t\turl: gPhoto.getUrl(),\n\t\t\t\t\t\t\t\t\t\twidth: gPhoto.width,\n\t\t\t\t\t\t\t\t\t\theight: gPhoto.height,\n\t\t\t\t\t\t\t\t\t\tdescription: Array.isArray(gPhoto.html_attributions) ? gPhoto.html_attributions.join('<br>') : '',\n\t\t\t\t\t\t\t\t\t\tthumbnail: {\n\t\t\t\t\t\t\t\t\t\t\turl: gPhoto.getUrl({\n\t\t\t\t\t\t\t\t\t\t\t\tmaxHeight: props.thumbnailHeight,\n\t\t\t\t\t\t\t\t\t\t\t\tmaxWidth: props.thumbnailWidth\n\t\t\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\t\t\twidth: props.thumbnailWidth,\n\t\t\t\t\t\t\t\t\t\t\theight: props.thumbnailHeight\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t\tcount++;\n\n\t\t\t\t\t\t\t\t\tif(props.maxPhotoCount && count >= props.maxPhotoCount)\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tresolve(resultPhotos);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t}\n}","import {Location, AddressType, LocationType, GeocodingServiceBase} from 'location.core';\n\nexport default class GeocodingService extends GeocodingServiceBase\n{\n\t#map;\n\t#geocoder;\n\t#loadingPromise;\n\t#googleSource;\n\n\tconstructor(props)\n\t{\n\t\tsuper(props);\n\n\t\tthis.#map = props.map;\n\t\tthis.#googleSource = props.googleSource;\n\t}\n\n\t#getLoaderPromise()\n\t{\n\t\tif(!this.#loadingPromise)\n\t\t{\n\t\t\t//map haven't rendered yet\t`\n\t\t\tif(this.#googleSource.loaderPromise === null)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.#loadingPromise = this.#googleSource.loaderPromise.then(() => {\n\t\t\t\tthis.#geocoder = new google.maps.Geocoder();\n\t\t\t});\n\t\t}\n\n\t\treturn this.#loadingPromise;\n\t}\n\n\t#convertLocationType(types: Array)\n\t{\n\t\tlet typeMap = {\n\t\t\t'country': LocationType.COUNTRY,\n\t\t\t'locality': LocationType.LOCALITY,\n\t\t\t'postal_town': LocationType.LOCALITY,\n\t\t\t'route': LocationType.STREET,\n\t\t\t'street_address': LocationType.ADDRESS_LINE_1,\n\t\t\t'administrative_area_level_4': LocationType.ADM_LEVEL_4,\n\t\t\t'administrative_area_level_3': LocationType.ADM_LEVEL_3,\n\t\t\t'administrative_area_level_2': LocationType.ADM_LEVEL_2,\n\t\t\t'administrative_area_level_1': LocationType.ADM_LEVEL_1,\n\t\t\t'floor': LocationType.FLOOR,\n\t\t\t'postal_code': AddressType.POSTAL_CODE,\n\t\t\t'room': LocationType.ROOM,\n\t\t\t'sublocality': LocationType.SUB_LOCALITY,\n\t\t\t'sublocality_level_1': LocationType.SUB_LOCALITY_LEVEL_1,\n\t\t\t'sublocality_level_2': LocationType.SUB_LOCALITY_LEVEL_2,\n\t\t\t'street_number': LocationType.BUILDING\n\t\t};\n\n\t\tlet result = LocationType.UNKNOWN;\n\n\t\tfor (let item of types)\n\t\t{\n\t\t\tif(typeof typeMap[item] !== 'undefined')\n\t\t\t{\n\t\t\t\tresult = typeMap[item];\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t#convertResultToLocations(data: Array)\n\t{\n\t\tlet result = [];\n\n\t\tfor (let item of data)\n\t\t{\n\t\t\tlet location = new Location;\n\t\t\tlocation.sourceCode = this.#googleSource.sourceCode;\n\t\t\tlocation.languageId = this.#googleSource.languageId;\n\t\t\tlocation.externalId = item.place_id;\n\t\t\tlocation.type = this.#convertLocationType(item.types);\n\t\t\tlocation.name = item.formatted_address;\n\t\t\tlocation.latitude = item.geometry.location.lat();\n\t\t\tlocation.longitude = item.geometry.location.lng();\n\t\t\tresult.push(location);\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tgeocodeConcrete(addressString: string): Promise\n\t{\n\t\treturn new Promise((resolve) => {\n\n\t\t\tconst loaderPromise = this.#getLoaderPromise();\n\n\t\t\tif(!loaderPromise)\n\t\t\t{\n\t\t\t\tresolve([]);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tloaderPromise\n\t\t\t\t.then(() => {\n\t\t\t\t\tthis.#geocoder.geocode({address: addressString}, (results, status) => {\n\t\t\t\t\t\tif(status === 'OK') {\n\t\t\t\t\t\t\tresolve(this.#convertResultToLocations(results));\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(status === 'ZERO_RESULTS')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tresolve([]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tBX.debug(`Geocode was not successful for the following reason: ${status}`);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t});\n\t}\n}","import {Type} from 'main.core';\nimport {BaseSource, SourceCreationError} from 'location.core';\nimport Loader from './loader';\nimport AutocompleteService from './autocompleteservice';\nimport Map from './map';\nimport MapMobile from './mapmobile';\nimport PhotoService from './photoservice';\nimport GeocodingService from './geocodingservice';\n\nexport class Google extends BaseSource\n{\n\tstatic code = 'GOOGLE';\n\t#languageId = '';\n\t#sourceLanguageId = '';\n\t#loaderPromise = null;\n\t#map;\n\t#mapMobile;\n\t#photoService;\n\t#geocodingService;\n\t#autocompleteService;\n\n\tconstructor(props: Object)\n\t{\n\t\tsuper(props);\n\n\t\tif (!Type.isString(props.languageId) || props.languageId.trim() === '')\n\t\t{\n\t\t\tthrow new SourceCreationError('props.languageId must be a string');\n\t\t}\n\n\t\tthis.#languageId = props.languageId;\n\n\t\tif (!Type.isString(props.sourceLanguageId) || props.sourceLanguageId.trim() === '')\n\t\t{\n\t\t\tthrow new SourceCreationError('props.sourceLanguageId must be a string');\n\t\t}\n\n\t\tthis.#sourceLanguageId = props.sourceLanguageId;\n\n\t\tif (!Type.isString(props.apiKey) || props.apiKey.trim() === '')\n\t\t{\n\t\t\tthrow new SourceCreationError('props.apiKey must be a string');\n\t\t}\n\n\t\tthis.#loaderPromise = Loader.load(props.apiKey, props.sourceLanguageId);\n\n\t\tthis.#map = new Map({\n\t\t\tgoogleSource: this,\n\t\t\tlanguageId: this.#languageId,\n\t\t});\n\n\t\tthis.#mapMobile = new MapMobile({\n\t\t\tgoogleSource: this,\n\t\t\tlanguageId: this.#languageId,\n\t\t});\n\n\t\tthis.#autocompleteService = new AutocompleteService({\n\t\t\tgoogleSource: this,\n\t\t\tlanguageId: this.#languageId\n\t\t});\n\n\t\tthis.#photoService = new PhotoService({\n\t\t\tgoogleSource: this,\n\t\t\tmap: this.#map\n\t\t});\n\n\t\tthis.#geocodingService = new GeocodingService({\n\t\t\tgoogleSource: this,\n\t\t\tmap: this.#map\n\t\t});\n\t}\n\n\tget sourceCode(): string\n\t{\n\t\treturn Google.code;\n\t}\n\n\tget loaderPromise(): Promise\n\t{\n\t\treturn this.#loaderPromise;\n\t}\n\n\tget map()\n\t{\n\t\treturn this.#map;\n\t}\n\n\tget mapMobile()\n\t{\n\t\treturn this.#mapMobile;\n\t}\n\n\tget autocompleteService()\n\t{\n\t\treturn this.#autocompleteService;\n\t}\n\n\tget photoService()\n\t{\n\t\treturn this.#photoService;\n\t}\n\n\tget geocodingService()\n\t{\n\t\treturn this.#geocodingService;\n\t}\n\n\tget languageId()\n\t{\n\t\treturn this.#languageId;\n\t}\n}\n"],"names":["Loader","apiKey","languageId","Promise","resolve","BX","load","map","toUpperCase","STATUS_OK","STATUS_ZERO_RESULTS","AutocompleteService","props","googleSource","loaderPromise","then","query","params","error","debug","AutocompleteServiceBase","queryPredictionsParams","input","biasPoint","location","google","maps","LatLng","latitude","longitude","radius","cachedResult","AutocompleteCache","get","Google","code","data","result","status","getQueryPredictions","res","set","places","Error","item","place_id","name","structured_formatting","main_text","description","Location","sourceCode","externalId","secondary_text","setFieldValue","LocationType","TMP_TYPE_CLARIFICATION","typeHint","types","TMP_TYPE_HINT","push","indexOf","Loc","getMessage","Map","_classPrivateMethodInitSpec","_classPrivateFieldInitSpec","locationRepository","LocationRepository","changeDelay","_classPrivateMethodGet","listener","subscribe","Event","unbindAll","mode","setDraggable","ControlMode","edit","zoom","setZoom","position","setPosition","getMap","setMap","panTo","MapBase","getZoomByLocation","geocode","results","placeId","findByExternalId","emit","getPosition","clearTimeout","setTimeout","requestId","Text","getRandom","response","ErrorPublisher","getInstance","notify","errors","mapProps","gestureHandling","disableDefaultUI","zoomControl","prop","getBoolean","zoomControlOptions","ControlPosition","TOP_LEFT","center","mapContainer","addListener","e","latLng","Marker","draggable","Geocoder","getCenter","Dom","addClass","upClass","hasClass","removeClass","Tag","render","getDiv","appendChild","icon","searchOnRender","PhotoService","promise","length","getDetails","fields","place","resultPhotos","PlacesServiceStatus","OK","Array","isArray","photos","count","gPhoto","url","getUrl","width","height","html_attributions","join","thumbnail","maxHeight","thumbnailHeight","maxWidth","thumbnailWidth","maxPhotoCount","PhotoServiceBase","PlacesService","googleMap","GeocodingService","addressString","address","GeocodingServiceBase","typeMap","COUNTRY","LOCALITY","STREET","ADDRESS_LINE_1","ADM_LEVEL_4","ADM_LEVEL_3","ADM_LEVEL_2","ADM_LEVEL_1","FLOOR","AddressType","POSTAL_CODE","ROOM","SUB_LOCALITY","SUB_LOCALITY_LEVEL_1","SUB_LOCALITY_LEVEL_2","BUILDING","UNKNOWN","type","formatted_address","geometry","lat","lng","Type","isString","trim","SourceCreationError","sourceLanguageId","MapMobile","BaseSource"],"mappings":"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"}