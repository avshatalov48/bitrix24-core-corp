this.BX=this.BX||{};this.BX.Location=this.BX.Location||{};(function(e,t,r,n){"use strict";var a=function(){function e(t){babelHelpers.classCallCheck(this,e);l.set(this,{writable:true,value:void 0});if(typeof t.type==="undefined"){throw new Error("Field type must be defined")}babelHelpers.classPrivateFieldSet(this,l,parseInt(t.type))}babelHelpers.createClass(e,[{key:"type",get:function e(){return babelHelpers.classPrivateFieldGet(this,l)}}]);return e}();var l=new WeakMap;function i(e){if(typeof Symbol==="undefined"||e[Symbol.iterator]==null){if(Array.isArray(e)||(e=s(e))){var t=0;var r=function e(){};return{s:r,n:function r(){if(t>=e.length)return{done:true};return{done:false,value:e[t++]}},e:function e(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,a=true,l=false,i;return{s:function t(){n=e[Symbol.iterator]()},n:function e(){var t=n.next();a=t.done;return t},e:function e(t){l=true;i=t},f:function e(){try{if(!a&&n.return!=null)n.return()}finally{if(l)throw i}}}}function s(e,t){if(!e)return;if(typeof e==="string")return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor)r=e.constructor.name;if(r==="Map"||r==="Set")return Array.from(r);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(e,t)}function o(e,t){if(t==null||t>e.length)t=e.length;for(var r=0,n=new Array(t);r<t;r++){n[r]=e[r]}return n}var u=function(){function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};babelHelpers.classCallCheck(this,e);c.set(this,{writable:true,value:{}});this.fields=t.fields?t.fields:[]}babelHelpers.createClass(e,[{key:"isFieldExists",value:function e(t){return typeof babelHelpers.classPrivateFieldGet(this,c)[t]!=="undefined"}},{key:"getField",value:function e(t){return this.isFieldExists(t)?babelHelpers.classPrivateFieldGet(this,c)[t]:null}},{key:"setField",value:function e(t){if(!(t instanceof a)){throw new Error("Argument field must be instance of Field!")}babelHelpers.classPrivateFieldGet(this,c)[t.type]=t;return this}},{key:"getMaxFieldType",value:function e(){var t=Object.keys(babelHelpers.classPrivateFieldGet(this,c)).sort(function(e,t){return parseInt(e)-parseInt(t)});var r=0;if(t.length>0){r=t[t.length-1]}return r}},{key:"fields",set:function e(t){if(!Array.isArray(t)){throw new Error("Items must be array!")}var r=i(t),n;try{for(r.s();!(n=r.n()).done;){var a=n.value;this.setField(a)}}catch(e){r.e(e)}finally{r.f()}return this},get:function e(){return babelHelpers.classPrivateFieldGet(this,c)}}]);return e}();var c=new WeakMap;var b=function(e){babelHelpers.inherits(t,e);function t(e){var r;babelHelpers.classCallCheck(this,t);r=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e));f.set(babelHelpers.assertThisInitialized(r),{writable:true,value:void 0});babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(r),f,e.value||"");return r}babelHelpers.createClass(t,[{key:"value",get:function e(){return babelHelpers.classPrivateFieldGet(this,f)},set:function e(t){babelHelpers.classPrivateFieldSet(this,f,t);return this}}]);return t}(a);var f=new WeakMap;var p=function(e){babelHelpers.inherits(t,e);function t(){babelHelpers.classCallCheck(this,t);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}babelHelpers.createClass(t,[{key:"getFieldValue",value:function e(t){var r=null;if(this.isFieldExists(t)){var n=this.getField(t);if(n){r=n.value}}return r}},{key:"setFieldValue",value:function e(t,r){this.setField(new b({type:t,value:r}));return this}}]);return t}(u);var d=function(){function e(t){babelHelpers.classCallCheck(this,e);v.set(this,{writable:true,value:void 0});h.set(this,{writable:true,value:void 0});babelHelpers.classPrivateFieldSet(this,v,t.entityId);babelHelpers.classPrivateFieldSet(this,h,t.entityType)}babelHelpers.createClass(e,[{key:"entityId",get:function e(){return babelHelpers.classPrivateFieldGet(this,v)}},{key:"entityType",get:function e(){return babelHelpers.classPrivateFieldGet(this,h)}}]);return e}();var v=new WeakMap;var h=new WeakMap;function y(e){if(typeof Symbol==="undefined"||e[Symbol.iterator]==null){if(Array.isArray(e)||(e=H(e))){var t=0;var r=function e(){};return{s:r,n:function r(){if(t>=e.length)return{done:true};return{done:false,value:e[t++]}},e:function e(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,a=true,l=false,i;return{s:function t(){n=e[Symbol.iterator]()},n:function e(){var t=n.next();a=t.done;return t},e:function e(t){l=true;i=t},f:function e(){try{if(!a&&n.return!=null)n.return()}finally{if(l)throw i}}}}function H(e,t){if(!e)return;if(typeof e==="string")return g(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor)r=e.constructor.name;if(r==="Map"||r==="Set")return Array.from(r);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return g(e,t)}function g(e,t){if(t==null||t>e.length)t=e.length;for(var r=0,n=new Array(t);r<t;r++){n[r]=e[r]}return n}var w=function(){function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};babelHelpers.classCallCheck(this,e);k.set(this,{writable:true,value:[]});this.links=!!t.links?t.links:[]}babelHelpers.createClass(e,[{key:"addLink",value:function e(t){if(!(t instanceof d)){throw new Error("Argument link must be instance of Field!")}babelHelpers.classPrivateFieldGet(this,k).push(t)}},{key:"clearLinks",value:function e(){babelHelpers.classPrivateFieldSet(this,k,[])}},{key:"links",set:function e(t){if(!Array.isArray(t)){throw new Error("links must be array!")}var r=y(t),n;try{for(r.s();!(n=r.n()).done;){var a=n.value;this.addLink(a)}}catch(e){r.e(e)}finally{r.f()}},get:function e(){return babelHelpers.classPrivateFieldGet(this,k)}}]);return e}();var k=new WeakMap;var P=function(e){babelHelpers.inherits(t,e);function t(e){var r;babelHelpers.classCallCheck(this,t);r=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e));C.set(babelHelpers.assertThisInitialized(r),{writable:true,value:void 0});F.set(babelHelpers.assertThisInitialized(r),{writable:true,value:void 0});m.set(babelHelpers.assertThisInitialized(r),{writable:true,value:void 0});babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(r),C,parseInt(e.sort));babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(r),F,e.name||"");babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(r),m,e.description||"");return r}babelHelpers.createClass(t,[{key:"sort",get:function e(){return babelHelpers.classPrivateFieldGet(this,C)},set:function e(t){babelHelpers.classPrivateFieldSet(this,C,t)}},{key:"name",get:function e(){return babelHelpers.classPrivateFieldGet(this,F)},set:function e(t){babelHelpers.classPrivateFieldSet(this,F,t)}},{key:"description",get:function e(){return babelHelpers.classPrivateFieldGet(this,m)},set:function e(t){babelHelpers.classPrivateFieldSet(this,m,t)}}]);return t}(a);var C=new WeakMap;var F=new WeakMap;var m=new WeakMap;var T=function(e){babelHelpers.inherits(t,e);function t(){babelHelpers.classCallCheck(this,t);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}babelHelpers.createClass(t,[{key:"initFields",value:function e(t){var r=this;if(Array.isArray(t)){t.forEach(function(e){var t=new P(e);if(t){r.setField(t)}})}}}]);return t}(u);var S=function(){function e(r){babelHelpers.classCallCheck(this,e);E.set(this,{writable:true,value:void 0});A.set(this,{writable:true,value:void 0});I.set(this,{writable:true,value:void 0});M.set(this,{writable:true,value:void 0});O.set(this,{writable:true,value:void 0});L.set(this,{writable:true,value:void 0});_.set(this,{writable:true,value:void 0});R.set(this,{writable:true,value:void 0});if(t.Type.isUndefined(r.languageId)){throw new TypeError("LanguageId must be defined")}babelHelpers.classPrivateFieldSet(this,M,r.languageId);babelHelpers.classPrivateFieldSet(this,E,r.code||"");babelHelpers.classPrivateFieldSet(this,A,r.name||"");babelHelpers.classPrivateFieldSet(this,O,r.template||"");babelHelpers.classPrivateFieldSet(this,I,r.description||"");babelHelpers.classPrivateFieldSet(this,_,r.delimiter||", ");babelHelpers.classPrivateFieldSet(this,R,r.fieldForUnRecognized||W.UNKNOWN);babelHelpers.classPrivateFieldSet(this,L,new T);if(t.Type.isObject(r.fieldCollection)){babelHelpers.classPrivateFieldGet(this,L).initFields(r.fieldCollection)}}babelHelpers.createClass(e,[{key:"getField",value:function e(t){return babelHelpers.classPrivateFieldGet(this,L).getField(t)}},{key:"isFieldExists",value:function e(t){return babelHelpers.classPrivateFieldGet(this,L).isFieldExists(t)}},{key:"languageId",get:function e(){return babelHelpers.classPrivateFieldGet(this,M)}},{key:"name",get:function e(){return babelHelpers.classPrivateFieldGet(this,A)}},{key:"description",get:function e(){return babelHelpers.classPrivateFieldGet(this,I)}},{key:"code",get:function e(){return babelHelpers.classPrivateFieldGet(this,E)}},{key:"fieldCollection",get:function e(){return babelHelpers.classPrivateFieldGet(this,L)}},{key:"template",get:function e(){return babelHelpers.classPrivateFieldGet(this,O)},set:function e(t){babelHelpers.classPrivateFieldSet(this,O,t)}},{key:"delimiter",get:function e(){return babelHelpers.classPrivateFieldGet(this,_)},set:function e(t){babelHelpers.classPrivateFieldSet(this,_,t)}},{key:"fieldForUnRecognized",get:function e(){return babelHelpers.classPrivateFieldGet(this,R)},set:function e(t){babelHelpers.classPrivateFieldSet(this,R,t)}}]);return e}();var E=new WeakMap;var A=new WeakMap;var I=new WeakMap;var M=new WeakMap;var O=new WeakMap;var L=new WeakMap;var _=new WeakMap;var R=new WeakMap;var G=function e(){babelHelpers.classCallCheck(this,e)};babelHelpers.defineProperty(G,"UNKNOWN",0);babelHelpers.defineProperty(G,"COUNTRY",100);babelHelpers.defineProperty(G,"ADM_LEVEL_1",200);babelHelpers.defineProperty(G,"ADM_LEVEL_2",210);babelHelpers.defineProperty(G,"ADM_LEVEL_3",220);babelHelpers.defineProperty(G,"ADM_LEVEL_4",230);babelHelpers.defineProperty(G,"LOCALITY",300);babelHelpers.defineProperty(G,"SUB_LOCALITY",310);babelHelpers.defineProperty(G,"SUB_LOCALITY_LEVEL_1",320);babelHelpers.defineProperty(G,"SUB_LOCALITY_LEVEL_2",330);babelHelpers.defineProperty(G,"STREET",340);babelHelpers.defineProperty(G,"BUILDING",400);babelHelpers.defineProperty(G,"ADDRESS_LINE_1",410);babelHelpers.defineProperty(G,"FLOOR",420);babelHelpers.defineProperty(G,"ROOM",430);var W=function(e){babelHelpers.inherits(t,e);function t(){babelHelpers.classCallCheck(this,t);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}return t}(G);babelHelpers.defineProperty(W,"POSTAL_CODE",50);babelHelpers.defineProperty(W,"ADDRESS_LINE_2",600);babelHelpers.defineProperty(W,"RECIPIENT_COMPANY",700);babelHelpers.defineProperty(W,"RECIPIENT",710);babelHelpers.defineProperty(W,"PO_BOX",800);function N(e){if(typeof Symbol==="undefined"||e[Symbol.iterator]==null){if(Array.isArray(e)||(e=B(e))){var t=0;var r=function e(){};return{s:r,n:function r(){if(t>=e.length)return{done:true};return{done:false,value:e[t++]}},e:function e(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,a=true,l=false,i;return{s:function t(){n=e[Symbol.iterator]()},n:function e(){var t=n.next();a=t.done;return t},e:function e(t){l=true;i=t},f:function e(){try{if(!a&&n.return!=null)n.return()}finally{if(l)throw i}}}}function B(e,t){if(!e)return;if(typeof e==="string")return j(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor)r=e.constructor.name;if(r==="Map"||r==="Set")return Array.from(r);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return j(e,t)}function j(e,t){if(t==null||t>e.length)t=e.length;for(var r=0,n=new Array(t);r<t;r++){n[r]=e[r]}return n}var x=function(){function e(){babelHelpers.classCallCheck(this,e)}babelHelpers.createClass(e,null,[{key:"convertAddressToString",value:function t(r,n,a,l){var i;if(a===e.STRATEGY_TYPE_TEMPLATE){i=e.convertAddressToStringTemplate(r,n,l)}else if(a===e.STRATEGY_TYPE_FIELD_SORT){var s=function e(t,r){return t.sort-r.sort};i=e.convertAddressToStringByField(r,n,s,l)}else if(a===e.STRATEGY_TYPE_FIELD_TYPE){var o=function e(t,r){var n;if(t.type===0){n=1}else if(r.type===0){n=-1}else{n=t.type-r.type}return n};i=e.convertAddressToStringByField(r,n,o,l)}else{throw TypeError("Wrong strategyType")}return i}},{key:"convertAddressToStringTemplate",value:function r(n,a,l){var i=a.template;if(l===e.CONTENT_TYPE_HTML){i=i.replace(/\n/g,"<br/>")}var s=i.match(/{{[^]*?}}/gm);if(!t.Type.isArray(s)){return""}var o=N(s),u;try{for(o.s();!(u=o.n()).done;){var c=u.value;var b=c.match(/#([0-9A-Z_]*?)#/);if(!t.Type.isArray(b)||t.Type.isUndefined(b[1])){continue}if(t.Type.isUndefined(W[b[1]])){continue}var f=W[b[1]];var p=n.getFieldValue(f);if(p===null){continue}if(l===e.CONTENT_TYPE_HTML){p=t.Text.encode(p)}var d=c.replace(b[0],p);d=d.replace("{{","");d=d.replace("}}","");i=i.replace(c,d)}}catch(e){o.e(e)}finally{o.f()}i=i.replace(/({{[^]*?}})/gm,"");if(l===e.CONTENT_TYPE_HTML){i=i.replace(/(<br\/>)+/g,"<br/>")}else{i=i.replace(/(\n)+/g,"\n")}return i}},{key:"convertAddressToStringByField",value:function r(n,a,l,i){if(!(a instanceof S)){BX.debug("format must be instance of Format")}if(!(n instanceof $)){BX.debug("address must be instance of Address")}var s=a.fieldCollection;if(!s){return""}var o=Object.values(s.fields);o.sort(l);var u="";for(var c=0,b=o;c<b.length;c++){var f=b[c];var p=n.getFieldValue(f.type);if(p===null){continue}if(i===e.CONTENT_TYPE_HTML){p=t.Text.encode(p)}if(u!==""){u+=a.delimiter}u+=p}return u}}]);return e}();babelHelpers.defineProperty(x,"STRATEGY_TYPE_TEMPLATE","template");babelHelpers.defineProperty(x,"STRATEGY_TYPE_FIELD_SORT","field_sort");babelHelpers.defineProperty(x,"STRATEGY_TYPE_FIELD_TYPE","field_type");babelHelpers.defineProperty(x,"CONTENT_TYPE_HTML","html");babelHelpers.defineProperty(x,"CONTENT_TYPE_TEXT","text");function Y(e,t,r){if(e!==t){throw new TypeError("Private static access of wrong provenance")}return r}var J=function(){function e(){babelHelpers.classCallCheck(this,e)}babelHelpers.createClass(e,null,[{key:"convertJsonToAddress",value:function e(t){return new $(t)}},{key:"convertAddressToJson",value:function t(r){var n={id:r.id,languageId:r.languageId,latitude:r.latitude,longitude:r.longitude,fieldCollection:Y(e,e,V).call(e,r.fieldCollection),links:Y(e,e,D).call(e,r.links),location:null};if(r.location){n.location=JSON.parse(r.location.toJson())}return JSON.stringify(n)}}]);return e}();var D=function e(t){return t.map(function(e){return{entityId:e.entityId,entityType:e.entityType}})};var V=function e(t){var r={};Object.values(t.fields).forEach(function(e){r[e.type]=e.value});return r};function X(e){if(typeof Symbol==="undefined"||e[Symbol.iterator]==null){if(Array.isArray(e)||(e=U(e))){var t=0;var r=function e(){};return{s:r,n:function r(){if(t>=e.length)return{done:true};return{done:false,value:e[t++]}},e:function e(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,a=true,l=false,i;return{s:function t(){n=e[Symbol.iterator]()},n:function e(){var t=n.next();a=t.done;return t},e:function e(t){l=true;i=t},f:function e(){try{if(!a&&n.return!=null)n.return()}finally{if(l)throw i}}}}function U(e,t){if(!e)return;if(typeof e==="string")return z(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor)r=e.constructor.name;if(r==="Map"||r==="Set")return Array.from(r);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return z(e,t)}function z(e,t){if(t==null||t>e.length)t=e.length;for(var r=0,n=new Array(t);r<t;r++){n[r]=e[r]}return n}var $=function(){function e(r){babelHelpers.classCallCheck(this,e);q.set(this,{writable:true,value:void 0});K.set(this,{writable:true,value:void 0});Z.set(this,{writable:true,value:void 0});Q.set(this,{writable:true,value:void 0});ee.set(this,{writable:true,value:void 0});te.set(this,{writable:true,value:void 0});re.set(this,{writable:true,value:void 0});if(t.Type.isUndefined(r.languageId)){throw new TypeError("languageId must be defined")}babelHelpers.classPrivateFieldSet(this,K,r.languageId);babelHelpers.classPrivateFieldSet(this,q,r.id||0);babelHelpers.classPrivateFieldSet(this,Z,r.latitude||0);babelHelpers.classPrivateFieldSet(this,Q,r.longitude||0);babelHelpers.classPrivateFieldSet(this,ee,new p);if(t.Type.isObject(r.fieldCollection)){for(var n=0,a=Object.entries(r.fieldCollection);n<a.length;n++){var l=babelHelpers.slicedToArray(a[n],2),i=l[0],s=l[1];this.setFieldValue(i,s)}}babelHelpers.classPrivateFieldSet(this,te,new w);if(t.Type.isArray(r.links)){var o=X(r.links),u;try{for(o.s();!(u=o.n()).done;){var c=u.value;this.addLink(c.entityId,c.entityType)}}catch(e){o.e(e)}finally{o.f()}}babelHelpers.classPrivateFieldSet(this,re,null);if(r.location){if(r.location instanceof ce){babelHelpers.classPrivateFieldSet(this,re,r.location)}else if(t.Type.isObject(r.location)){babelHelpers.classPrivateFieldSet(this,re,new ce(r.location))}else{BX.debug("Wrong typeof props.location")}}}babelHelpers.createClass(e,[{key:"setFieldValue",value:function e(t,r){babelHelpers.classPrivateFieldGet(this,ee).setFieldValue(t,r)}},{key:"getFieldValue",value:function e(t){return babelHelpers.classPrivateFieldGet(this,ee).getFieldValue(t)}},{key:"isFieldExists",value:function e(t){return babelHelpers.classPrivateFieldGet(this,ee).isFieldExists(t)}},{key:"toJson",value:function e(){return J.convertAddressToJson(this)}},{key:"toString",value:function e(t,r,n){if(!(t instanceof S)){throw new TypeError("format must be instance of Format")}var a=r||x.STRATEGY_TYPE_TEMPLATE;var l=n||x.CONTENT_TYPE_HTML;var i=x.convertAddressToString(this,t,a,l);return i}},{key:"toLocation",value:function e(){var t=null;if(this.location){var r=JSON.parse(this.location.toJson());r.address=JSON.parse(this.toJson());t=new ce(r)}return t}},{key:"getType",value:function e(){return babelHelpers.classPrivateFieldGet(this,ee).getMaxFieldType()}},{key:"addLink",value:function e(t,r){babelHelpers.classPrivateFieldGet(this,te).addLink(new d({entityId:t,entityType:r}))}},{key:"clearLinks",value:function e(){babelHelpers.classPrivateFieldGet(this,te).clearLinks()}},{key:"id",get:function e(){return babelHelpers.classPrivateFieldGet(this,q)},set:function e(t){babelHelpers.classPrivateFieldSet(this,q,t)}},{key:"location",get:function e(){return babelHelpers.classPrivateFieldGet(this,re)},set:function e(t){babelHelpers.classPrivateFieldSet(this,re,t)}},{key:"languageId",get:function e(){return babelHelpers.classPrivateFieldGet(this,K)}},{key:"fieldCollection",get:function e(){return babelHelpers.classPrivateFieldGet(this,ee)}},{key:"latitude",get:function e(){return babelHelpers.classPrivateFieldGet(this,Z)},set:function e(t){babelHelpers.classPrivateFieldSet(this,Z,t)}},{key:"longitude",get:function e(){return babelHelpers.classPrivateFieldGet(this,Q)},set:function e(t){babelHelpers.classPrivateFieldSet(this,Q,t)}},{key:"links",get:function e(){return babelHelpers.classPrivateFieldGet(this,te).links}}]);return e}();var q=new WeakMap;var K=new WeakMap;var Z=new WeakMap;var Q=new WeakMap;var ee=new WeakMap;var te=new WeakMap;var re=new WeakMap;var ne=function(e){babelHelpers.inherits(t,e);function t(e){var r;babelHelpers.classCallCheck(this,t);r=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e));ae.set(babelHelpers.assertThisInitialized(r),{writable:true,value:void 0});babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(r),ae,e.value||"");return r}babelHelpers.createClass(t,[{key:"value",get:function e(){return babelHelpers.classPrivateFieldGet(this,ae)},set:function e(t){babelHelpers.classPrivateFieldSet(this,ae,t)}}]);return t}(a);var ae=new WeakMap;var le=function(e){babelHelpers.inherits(t,e);function t(){babelHelpers.classCallCheck(this,t);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}babelHelpers.createClass(t,[{key:"getFieldValue",value:function e(t){var r=null;if(this.isFieldExists(t)){var n=this.getField(t);if(n){r=n.value}}return r}},{key:"setFieldValue",value:function e(t,r){this.setField(new ne({type:t,value:r}));return this}}]);return t}(u);function ie(e,t,r){if(e!==t){throw new TypeError("Private static access of wrong provenance")}return r}var se=function(){function e(){babelHelpers.classCallCheck(this,e)}babelHelpers.createClass(e,null,[{key:"convertLocationToObject",value:function t(r){if(!(r instanceof ce)){throw new TypeError("location must be type of location")}var n={id:r.id,code:r.code,externalId:r.externalId,sourceCode:r.sourceCode,type:r.type,name:r.name,languageId:r.languageId,latitude:r.latitude,longitude:r.longitude,fieldCollection:ie(e,e,oe).call(e,r.fieldCollection),address:null};if(r.address){n.address=JSON.parse(r.address.toJson())}return n}}]);return e}();var oe=function e(t){var r={};Object.values(t.fields).forEach(function(e){r[e.type]=e.value});return r};var ue=function(){function e(){babelHelpers.classCallCheck(this,e)}babelHelpers.createClass(e,null,[{key:"convertJsonToLocation",value:function e(t){var r=babelHelpers.objectSpread({},t);if(t.address){r.address=new $(t.address)}return new ce(r)}},{key:"convertLocationToJson",value:function e(t){if(!(t instanceof ce)){throw new TypeError("location must be type of location")}var r=se.convertLocationToObject(t);return r?JSON.stringify(r):""}}]);return e}();var ce=function(){function e(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};babelHelpers.classCallCheck(this,e);be.set(this,{writable:true,value:void 0});fe.set(this,{writable:true,value:void 0});pe.set(this,{writable:true,value:void 0});de.set(this,{writable:true,value:void 0});ve.set(this,{writable:true,value:void 0});he.set(this,{writable:true,value:void 0});ye.set(this,{writable:true,value:void 0});He.set(this,{writable:true,value:void 0});ge.set(this,{writable:true,value:void 0});we.set(this,{writable:true,value:void 0});ke.set(this,{writable:true,value:void 0});babelHelpers.classPrivateFieldSet(this,be,parseInt(r.id)||0);babelHelpers.classPrivateFieldSet(this,fe,r.code||"");babelHelpers.classPrivateFieldSet(this,pe,r.externalId||"");babelHelpers.classPrivateFieldSet(this,de,r.sourceCode||"");babelHelpers.classPrivateFieldSet(this,ve,parseInt(r.type)||0);babelHelpers.classPrivateFieldSet(this,he,r.name||"");babelHelpers.classPrivateFieldSet(this,ye,r.languageId||"");babelHelpers.classPrivateFieldSet(this,He,r.latitude||"");babelHelpers.classPrivateFieldSet(this,ge,r.longitude||"");babelHelpers.classPrivateFieldSet(this,ke,new le);if(t.Type.isObject(r.fieldCollection)){for(var n=0,a=Object.entries(r.fieldCollection);n<a.length;n++){var l=babelHelpers.slicedToArray(a[n],2),i=l[0],s=l[1];this.setFieldValue(i,s)}}babelHelpers.classPrivateFieldSet(this,we,null);if(r.address){if(r.address instanceof $){babelHelpers.classPrivateFieldSet(this,we,r.address)}else if(babelHelpers.typeof(r.address)==="object"){babelHelpers.classPrivateFieldSet(this,we,new $(r.address))}else{BX.debug("Wrong typeof props.address")}}}babelHelpers.createClass(e,[{key:"toJson",value:function e(){return ue.convertLocationToJson(this)}},{key:"toAddress",value:function e(){var t=null;if(this.address){var r=JSON.parse(this.address.toJson());r.location=JSON.parse(this.toJson());t=new $(r)}return t}},{key:"setFieldValue",value:function e(t,r){babelHelpers.classPrivateFieldGet(this,ke).setFieldValue(t,r)}},{key:"getFieldValue",value:function e(t){return babelHelpers.classPrivateFieldGet(this,ke).getFieldValue(t)}},{key:"isFieldExists",value:function e(t){return babelHelpers.classPrivateFieldGet(this,ke).isFieldExists(t)}},{key:"id",get:function e(){return babelHelpers.classPrivateFieldGet(this,be)},set:function e(t){babelHelpers.classPrivateFieldSet(this,be,t)}},{key:"code",get:function e(){return babelHelpers.classPrivateFieldGet(this,fe)},set:function e(t){babelHelpers.classPrivateFieldSet(this,fe,t)}},{key:"externalId",get:function e(){return babelHelpers.classPrivateFieldGet(this,pe)},set:function e(t){babelHelpers.classPrivateFieldSet(this,pe,t)}},{key:"sourceCode",get:function e(){return babelHelpers.classPrivateFieldGet(this,de)},set:function e(t){babelHelpers.classPrivateFieldSet(this,de,t)}},{key:"type",get:function e(){return babelHelpers.classPrivateFieldGet(this,ve)},set:function e(t){babelHelpers.classPrivateFieldSet(this,ve,t)}},{key:"name",get:function e(){return babelHelpers.classPrivateFieldGet(this,he)},set:function e(t){babelHelpers.classPrivateFieldSet(this,he,t)}},{key:"languageId",get:function e(){return babelHelpers.classPrivateFieldGet(this,ye)},set:function e(t){babelHelpers.classPrivateFieldSet(this,ye,t)}},{key:"latitude",get:function e(){return babelHelpers.classPrivateFieldGet(this,He)},set:function e(t){babelHelpers.classPrivateFieldSet(this,He,t)}},{key:"longitude",get:function e(){return babelHelpers.classPrivateFieldGet(this,ge)},set:function e(t){babelHelpers.classPrivateFieldSet(this,ge,t)}},{key:"address",set:function e(t){babelHelpers.classPrivateFieldSet(this,we,t)},get:function e(){return babelHelpers.classPrivateFieldGet(this,we)}},{key:"fieldCollection",get:function e(){return babelHelpers.classPrivateFieldGet(this,ke)}}]);return e}();var be=new WeakMap;var fe=new WeakMap;var pe=new WeakMap;var de=new WeakMap;var ve=new WeakMap;var he=new WeakMap;var ye=new WeakMap;var He=new WeakMap;var ge=new WeakMap;var we=new WeakMap;var ke=new WeakMap;var Pe=function(){function e(t){babelHelpers.classCallCheck(this,e);Ce.set(this,{writable:true,value:""});if(!t.path){throw new Error("props.path must not be empty!")}babelHelpers.classPrivateFieldSet(this,Ce,t.path)}babelHelpers.createClass(e,[{key:"run",value:function e(t,r){if(!t){throw new Error("action can not be empty!")}return BX.ajax.runAction("".concat(babelHelpers.classPrivateFieldGet(this,Ce),".").concat(t),{data:r})}}]);return e}();var Ce=new WeakMap;function Fe(e){if(typeof Symbol==="undefined"||e[Symbol.iterator]==null){if(Array.isArray(e)||(e=me(e))){var t=0;var r=function e(){};return{s:r,n:function r(){if(t>=e.length)return{done:true};return{done:false,value:e[t++]}},e:function e(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,a=true,l=false,i;return{s:function t(){n=e[Symbol.iterator]()},n:function e(){var t=n.next();a=t.done;return t},e:function e(t){l=true;i=t},f:function e(){try{if(!a&&n.return!=null)n.return()}finally{if(l)throw i}}}}function me(e,t){if(!e)return;if(typeof e==="string")return Te(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor)r=e.constructor.name;if(r==="Map"||r==="Set")return Array.from(r);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Te(e,t)}function Te(e,t){if(t==null||t>e.length)t=e.length;for(var r=0,n=new Array(t);r<t;r++){n[r]=e[r]}return n}var Se=function(){function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};babelHelpers.classCallCheck(this,e);Ee.set(this,{writable:true,value:null});this._path=t.path;if(t.actionRunner&&t.actionRunner instanceof Pe){babelHelpers.classPrivateFieldSet(this,Ee,t.actionRunner)}else{babelHelpers.classPrivateFieldSet(this,Ee,new Pe({path:this._path}))}}babelHelpers.createClass(e,[{key:"processResponse",value:function e(t){if(t.status!=="success"){BX.debug("Request was not successful");var r="";if(Array.isArray(t.errors)&&t.errors.length>0){var n=Fe(t.errors),a;try{for(n.s();!(a=n.n()).done;){var l=a.value;if(typeof l.message==="string"&&l.message!==""){r+="".concat(l,"\n")}}}catch(e){n.e(e)}finally{n.f()}}throw new Error(r)}return t.data?t.data:null}},{key:"path",get:function e(){return this._path}},{key:"actionRunner",get:function e(){return babelHelpers.classPrivateFieldGet(this,Ee)}}]);return e}();var Ee=new WeakMap;function Ae(e,t,r){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return r}var Ie=function(e){babelHelpers.inherits(t,e);function t(){var e;var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};babelHelpers.classCallCheck(this,t);r.path=r.path||"location.api.location";e=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,r));Oe.add(babelHelpers.assertThisInitialized(e));Me.add(babelHelpers.assertThisInitialized(e));return e}babelHelpers.createClass(t,[{key:"findParents",value:function e(t){if(!(t instanceof ce)){throw new TypeError("location must be type of Location")}return this.actionRunner.run("findParents",{location:se.convertLocationToObject(t)}).then(this.processResponse.bind(this)).then(Ae(this,Me,Le).bind(this))}},{key:"findByExternalId",value:function e(t,r,n){if(!t||!r||!n){throw new Error("externalId and sourceCode and languageId must be defined")}return this.actionRunner.run("findByExternalId",{externalId:t,sourceCode:r,languageId:n}).then(this.processResponse.bind(this)).then(Ae(this,Oe,_e).bind(this))}},{key:"findById",value:function e(t,r){if(!t||!r){throw new Error("locationId and languageId must be defined")}return this.actionRunner.run("findById",{id:t,languageId:r}).then(this.processResponse.bind(this)).then(Ae(this,Oe,_e).bind(this))}}]);return t}(Se);var Me=new WeakSet;var Oe=new WeakSet;var Le=function e(t){var r=this;if(!Array.isArray(t)){throw new Error("Can't convert location collection data")}var n=[];t.forEach(function(e){n.push(Ae(r,Oe,_e).call(r,e))});return n};var _e=function e(t){if(!t){return null}if(babelHelpers.typeof(t)!=="object"){throw new Error("Can't convert location data")}return ue.convertJsonToLocation(t)};var Re=function(e){babelHelpers.inherits(t,e);function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};babelHelpers.classCallCheck(this,t);e.path="location.api.address";return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e))}babelHelpers.createClass(t,[{key:"findById",value:function e(t){var r=this;if(t<=0){throw new Error("addressId must be more than zero")}return this.actionRunner.run("findById",{addressId:t}).then(this.processResponse).then(function(e){var t=null;if(e){t=r.convertJsonToAddress(e)}return t})}},{key:"save",value:function e(t){var r=this;if(!t){throw new Error("address must be defined")}return this.actionRunner.run("save",{address:t}).then(this.processResponse).then(function(e){var t=null;if(babelHelpers.typeof(e)==="object"){t=r.convertJsonToAddress(e)}return t})}},{key:"convertJsonToAddress",value:function e(t){return new r.Address(t)}}]);return t}(Se);var Ge=function(e){babelHelpers.inherits(r,e);function r(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};babelHelpers.classCallCheck(this,r);e.path="location.api.format";return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(r).call(this,e))}babelHelpers.createClass(r,[{key:"findAll",value:function e(r){var n=this;if(!t.Type.isString(r)){throw new TypeError("languageId must be type of string")}return this.actionRunner.run("findAll",{languageId:r}).then(this.processResponse).then(function(e){return n.convertFormatCollection(e)})}},{key:"findByCode",value:function e(r,n){if(!t.Type.isString(r)){throw new TypeError("formatCode must be type of string")}if(!t.Type.isString(n)){throw new TypeError("languageId must be type of string")}return this.actionRunner.run("findByCode",{formatCode:r,languageId:n}).then(this.processResponse).then(this.convertFormatData)}},{key:"findDefault",value:function e(r){if(!t.Type.isString(r)){throw new TypeError("languageId must be type of string")}return this.actionRunner.run("findDefault",{languageId:r}).then(this.processResponse).then(this.convertFormatData)}},{key:"convertFormatCollection",value:function e(r){var n=this;if(!t.Type.isArray(r)){throw new TypeError("Can't convert format collection data")}var a=[];r.forEach(function(e){a.push(n.convertFormatData(e))});return a}},{key:"convertFormatData",value:function e(r){if(!t.Type.isObject(r)){throw new TypeError("Can't convert format data")}return new S(r)}}]);return r}(Se);var We=function(e){babelHelpers.inherits(t,e);function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};babelHelpers.classCallCheck(this,t);e.path="location.api.source";return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e))}babelHelpers.createClass(t,[{key:"getProps",value:function e(){return this.actionRunner.run("getProps",{}).then(this.processResponse)}}]);return t}(Se);var Ne=function(){function e(){babelHelpers.classCallCheck(this,e)}babelHelpers.createClass(e,[{key:"autocomplete",value:function e(t,r){throw new Error("Must be implemented")}}]);return e}();var Be=function(){function e(){babelHelpers.classCallCheck(this,e)}babelHelpers.createClass(e,[{key:"requestPhotos",value:function e(t){throw new Error("Must be implemented")}}]);return e}();var je=function(e){babelHelpers.inherits(t,e);function t(){var e;babelHelpers.classCallCheck(this,t);e=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));e.setEventNamespace("BX.Location.Core.MapBase");return e}babelHelpers.createClass(t,[{key:"render",value:function e(t){throw new Error("Must be implemented")}},{key:"onLocationChangedEventSubscribe",value:function e(t){throw new Error("Must be implemented")}},{key:"destroy",value:function e(){}},{key:"location",set:function e(t){throw new Error("Must be implemented")}},{key:"mode",set:function e(t){throw new Error("Must be implemented")}},{key:"zoom",set:function e(t){throw new Error("Must be implemented")}}]);return t}(n.EventEmitter);var xe=function(){function e(){babelHelpers.classCallCheck(this,e)}babelHelpers.createClass(e,[{key:"sourceCode",get:function e(){throw new Error("Must be implemented")}},{key:"map",get:function e(){throw new Error("Must be implemented")}},{key:"autocompleteService",get:function e(){throw new Error("Must be implemented")}},{key:"photoService",get:function e(){throw new Error("Must be implemented")}},{key:"geocodingService",get:function e(){throw new Error("Must be implemented")}}]);return e}();var Ye=function(){function e(){babelHelpers.classCallCheck(this,e)}babelHelpers.createClass(e,[{key:"geocode",value:function e(t){throw new Error("Must be implemented")}}]);return e}();var Je=function(){function e(){babelHelpers.classCallCheck(this,e)}babelHelpers.createClass(e,null,[{key:"isValid",value:function t(r){return r===e.edit||r===e.view}},{key:"edit",get:function e(){return"edit"}},{key:"view",get:function e(){return"view"}}]);return e}();var De=function e(){babelHelpers.classCallCheck(this,e)};babelHelpers.defineProperty(De,"POSTAL_CODE",50);babelHelpers.defineProperty(De,"ISO_3166_1_ALPHA_2",1e3);var Ve=function(e){babelHelpers.inherits(t,e);function t(){babelHelpers.classCallCheck(this,t);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}return t}(babelHelpers.wrapNativeSuper(Error));var Xe=function(e){babelHelpers.inherits(t,e);function t(){babelHelpers.classCallCheck(this,t);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}return t}(babelHelpers.wrapNativeSuper(Error));function Ue(e,t,r,n){if(e!==t){throw new TypeError("Private static access of wrong provenance")}if(r.set){r.set.call(e,n)}else{if(!r.writable){throw new TypeError("attempted to set read only private field")}r.value=n}return n}function ze(e,t,r){if(e!==t){throw new TypeError("Private static access of wrong provenance")}if(r.get){return r.get.call(e)}return r.value}var $e=function(e){babelHelpers.inherits(t,e);babelHelpers.createClass(t,null,[{key:"getInstance",value:function e(){if(ze(t,t,qe)===null){Ue(t,t,qe,new t)}return ze(t,t,qe)}}]);function t(){var e;babelHelpers.classCallCheck(this,t);e=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));e.setEventNamespace("BX.Location.Core.ErrorPublisher");return e}babelHelpers.createClass(t,[{key:"notify",value:function e(r){this.emit(ze(t,t,Ke),{errors:r})}},{key:"subscribe",value:function e(r){babelHelpers.get(babelHelpers.getPrototypeOf(t.prototype),"subscribe",this).call(this,ze(t,t,Ke),r)}}]);return t}(n.EventEmitter);var qe={writable:true,value:null};var Ke={writable:true,value:"onError"};var Ze=function(){function e(){babelHelpers.classCallCheck(this,e)}babelHelpers.createClass(e,null,[{key:"isAddressLimitReached",value:function e(){return BX.message("LOCATION_IS_ADDRESS_LIMIT_REACHED")}}]);return e}();e.Location=ce;e.Address=$;e.Format=S;e.AddressType=W;e.LocationType=G;e.LocationFieldType=De;e.LocationRepository=Ie;e.AddressRepository=Re;e.FormatRepository=Ge;e.SourceRepository=We;e.AddressStringConverter=x;e.AutocompleteServiceBase=Ne;e.PhotoServiceBase=Be;e.BaseSource=xe;e.MapBase=je;e.GeocodingServiceBase=Ye;e.ControlMode=Je;e.SourceCreationError=Ve;e.MethodNotImplemented=Xe;e.ErrorPublisher=$e;e.Limit=Ze})(this.BX.Location.Core=this.BX.Location.Core||{},BX,BX.Location.Core,BX.Event);
//# sourceMappingURL=core.bundle.map.js