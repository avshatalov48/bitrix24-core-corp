jn.define("stafftrack/shift-view",((e,t,r)=>{const{Type:s}=e("type");const{Loc:i}=e("loc");const{PureComponent:n}=e("layout/pure-component");const{BottomSheet:o}=e("bottom-sheet");const{Color:a,Component:c,Indent:d,Corner:l}=e("tokens");const{Box:h}=e("ui-system/layout/box");const{Area:u}=e("ui-system/layout/area");const{H3:g,H4:f}=e("ui-system/typography/heading");const{Text2:m,Text3:b}=e("ui-system/typography/text");const{Card:C}=e("ui-system/layout/card");const{Button:p,ButtonSize:S,ButtonDesign:y,Icon:w}=e("ui-system/form/buttons/button");const{IconView:x}=e("ui-system/blocks/icon");const{DateHelper:I}=e("stafftrack/date-helper");const{MapView:N}=e("stafftrack/map");const{ScrollViewWithMaxHeight:k}=e("stafftrack/ui");const L=60;const M=234+d.L.toNumber();const H=140+d.L.toNumber();const T=24+2*d.M.toNumber();const D=20;class V extends n{get user(){return this.props.user}get shift(){return this.props.shift}show(e=PageManager){void new o({component:this}).setParentWidget(e).setBackgroundColor(a.bgSecondary.toHex()).disableContentSwipe().setMediumPositionHeight(this.getSheetHeight()).open()}render(){return h({backgroundColor:a.bgSecondary},this.renderHeader(),this.renderContent())}renderHeader(){return u({isFirst:true,style:{flexDirection:"row"}},View({style:{flex:1}},g({text:this.user.name,color:a.base1,numberOfLines:1,ellipsize:"end"})),View({style:{paddingLeft:d.S.toNumber()}},f({text:I.formatDate(this.shift.shiftDate),color:a.base4})))}renderContent(){return u({isFirst:true},!this.shift.isNotWorkingStatus()&&this.renderBaseCard(),this.shift.isCancelStatus()&&this.renderArrowSeparator(),this.shift.isCancelOrNotWorkingStatus()&&this.renderCancelCard())}renderBaseCard(){return View({style:{paddingBottom:this.shift.isCancelStatus()?0:d.L.toNumber()}},C({border:true,testId:"stafftrack-shift-view-base-card"},this.renderBaseStatusBar(),this.renderLocation()))}renderBaseStatusBar(){return View({style:{flexDirection:"row",alignItems:"center"}},p({size:S.M,design:y.FILLED,leftIcon:w.CHECK,leftIconColor:a.baseWhiteFixed,backgroundColor:this.shift.isWorkingStatus()?a.accentMainSuccess:a.base6,style:{paddingRight:d.XL.toNumber()},testId:"stafftrack-shift-view-base-card-button"}),m({text:i.getMessage("M_STAFFTRACK_SHIFT_VIEW_START_DAY"),color:this.shift.isWorkingStatus()?a.base1:a.base3}),this.renderSeparator(),this.renderBaseCardTime())}renderBaseCardTime(){return View({style:{flexDirection:"row"}},s.isStringFilled(this.shift.getAddress())&&x({size:24,icon:w.LOCATION,color:a.accentMainPrimary}),b({text:I.formatTime(this.shift.getDateCreate()),color:a.accentMainPrimary}))}renderLocation(){return View({style:{paddingTop:d.XL.toNumber()}},new N({sendGeo:s.isStringFilled(this.shift.getAddress()),readOnly:true,location:this.shift.getLocation(),geoImageUrl:this.shift.getGeoImageUrl(),address:this.shift.getAddress()}))}renderCancelCard(){return View({style:{paddingBottom:d.L.toNumber()}},C({border:true,testId:"stafftrack-shift-view-cancel-card"},this.renderCancelStatusBar(),this.renderCancelReasonDescriptionContainer()))}renderCancelStatusBar(){return View({style:{flexDirection:"row",alignItems:"center",paddingBottom:d.XL.toNumber()}},p({size:S.M,design:y.FILLED,leftIcon:w.CROSS,leftIconColor:a.baseWhiteFixed,backgroundColor:a.accentMainWarning,testId:"stafftrack-shift-view-cancel-card-button",style:{paddingRight:d.XL.toNumber(),borderRadius:c.elementMCorner.toNumber()}}),m({text:this.shift.isNotWorkingStatus()?i.getMessage("M_STAFFTRACK_SHIFT_VIEW_NOT_WORKING_DAY"):i.getMessage("M_STAFFTRACK_SHIFT_VIEW_CANCEL_DAY"),color:a.base1}),this.renderSeparator(),b({text:I.formatTime(this.shift.getDateCancel()),color:a.accentMainWarning}))}renderCancelReasonDescriptionContainer(){return View({style:{borderColor:a.bgSeparatorPrimary.toHex(),borderRadius:l.M.toNumber(),borderWidth:1,maxHeight:76,paddingHorizontal:d.L.toNumber(),paddingVertical:d.M.toNumber()}},this.renderCancelReasonDescription())}renderCancelReasonDescription(){return new k({testId:"stafftrack-shift-view-cancel-description",style:{minHeight:20,maxHeight:60},renderContent:()=>b({text:this.shift.getCancelReason(),color:a.base2})})}renderSeparator(){return View({style:{height:1,flex:1,backgroundColor:a.bgSeparatorPrimary.toHex(),marginHorizontal:d.XL.toNumber()}})}renderArrowSeparator(){return View({style:{paddingVertical:d.M.toNumber(),alignItems:"center",justifyContent:"center"}},x({size:24,icon:w.ARROW_DOWN,color:a.base4}))}getSheetHeight(){let e=L+D;if(this.shift.isWorkingStatus()){e+=M}if(this.shift.isNotWorkingStatus()){e+=H}if(this.shift.isCancelStatus()){e+=M+T+H}return e}}r.exports={ShiftView:V}}));
//# sourceMappingURL=extension.map.js