{"version":3,"file":"extension.map.js","names":["jn","define","require","exports","module","Type","EventEmitter","ShiftAjax","DepartmentStatisticsAjax","OptionManager","SettingsManager","DateHelper","ShiftModel","PullCommandEnum","ShiftManager","constructor","super","this","setUid","mainData","usersShifts","departments","departmentMonths","pullSubscribe","BX","PULL","subscribe","moduleId","callback","data","command","prop","getString","params","getObject","SHIFT_ADD","getValue","addShiftToCache","shift","departmentIds","SHIFT_UPDATE","updateShiftCache","SHIFT_DELETE","deleteShiftFromCache","getId","emit","async","date","loadMain","setOptions","options","setEnabledBySettings","config","enabledBySettings","setGeoEnabled","isCheckInGeoEnabled","setTimemanAvailable","timemanAvailable","loadMainPromise","getCurrentDayCode","shiftDto","currentShift","add","map","department","id","getUserId","userInfo","getCachedShiftById","userId","monthCode","getMonthCode","getShiftDate","push","departmentId","shifts","statistics","find","statisticsItem","checkinCount","update","it","shiftId","result","delete","shiftToDelete","userShifts","filter","Object","keys","departmentShifts","hasUserShiftsForMonth","isNil","getCachedUserShiftsForMonth","loadUserShiftsForMonth","getDateFromMonthCode","start","Date","getFullYear","getMonth","end","usersShiftPromises","list","DATE_FROM","getDayCode","DATE_TO","USER_ID","shiftList","rawShift","hasDepartmentMonthStatistics","hasDepartmentStatistics","loadDepartmentMonthStatistics","departmentMonthsPromises","getForMonth","parseInt","loadDepartmentStatistics","departmentPromises","get","users","user"],"sources":["extension.js"],"mappings":"AAGAA,GAAGC,OAAO,0CAA0C,CAACC,EAASC,EAASC,KACtE,MAAMC,KAAEA,GAASH,EAAQ,QACzB,MAAMI,aAAEA,GAAiBJ,EAAQ,iBAEjC,MAAMK,UAAEA,EAASC,yBAAEA,GAA6BN,EAAQ,mBACxD,MAAMO,cAAEA,GAAkBP,EAAQ,2CAClC,MAAMQ,gBAAEA,GAAoBR,EAAQ,6CACpC,MAAMS,WAAEA,GAAeT,EAAQ,0BAC/B,MAAMU,WAAEA,EAAUC,gBAAEA,GAAoBX,EAAQ,0BAEhD,MAAMY,UAAqBR,EAE1BS,cAECC,QAEAC,KAAKC,OAAO,2BAEZD,KAAKE,SAAW,KAChBF,KAAKG,YAAc,CAAC,EACpBH,KAAKI,YAAc,CAAC,EACpBJ,KAAKK,iBAAmB,CAAC,EAEzBL,KAAKM,eACN,CAEAA,gBAECC,GAAGC,KAAKC,UAAU,CACjBC,SAAU,aACVC,SAAWC,IACV,MAAMC,EAAUN,GAAGO,KAAKC,UAAUH,EAAM,UAAW,IACnD,MAAMI,EAAST,GAAGO,KAAKG,UAAUL,EAAM,SAAU,CAAC,GAElD,GAAIC,IAAYjB,EAAgBsB,UAAUC,WAC1C,CACCnB,KAAKoB,gBAAgBJ,EAAOK,MAAOL,EAAOM,cAC3C,CAEA,GAAIT,IAAYjB,EAAgB2B,aAAaJ,WAC7C,CACCnB,KAAKwB,iBAAiBR,EAAOK,MAAOL,EAAOM,cAC5C,CAEA,GAAIT,IAAYjB,EAAgB6B,aAAaN,WAC7C,CACCnB,KAAK0B,qBAAqB,IAAI/B,EAAWqB,EAAOK,OAAOM,QACxD,CAEA3B,KAAK4B,KAAK,UAAU,GAGvB,CAOAC,cAAcC,GAEb,IAAK9B,KAAKE,SACV,CACCF,KAAKE,eAAiBF,KAAK+B,SAASD,GAEpCtC,EAAcwC,WAAWhC,KAAKE,SAAS+B,SACvCxC,EAAgByC,qBAAqBlC,KAAKE,SAASiC,OAAOC,mBAC1D3C,EAAgB4C,cAAcrC,KAAKE,SAASiC,OAAOG,qBACnD7C,EAAgB8C,oBAAoBvC,KAAKE,SAASiC,OAAOK,iBAC1D,CAEA,OAAOxC,KAAKE,QACb,CAOA2B,eAAeC,GAEd9B,KAAKyC,kBAAoBnD,EAAUyC,SAASrC,EAAWgD,qBAEvD,MAAM9B,KAAEA,SAAeZ,KAAKyC,gBAE5B,OAAO7B,CACR,CAQAiB,eAAec,EAAUvC,GAExBJ,KAAKE,SAAS0C,aAAeD,EAE7B,MAAM/B,KAAEA,SAAetB,EAAUuD,IAAIF,GAErC3C,KAAKoB,gBAAgBR,EAAKS,MAAOjB,EAAY0C,KAAKC,GAAeA,EAAWC,MAE5E,OAAOpC,CACR,CAEAQ,gBAAgBuB,EAAUrB,GAEzB,MAAMD,EAAQ,IAAI1B,EAAWgD,GAE7B,GAAItB,EAAM4B,cAAgBjD,KAAKE,UAAUgD,SAASF,GAClD,CACChD,KAAKE,SAAS0C,aAAeD,CAC9B,CAEA,GAAI3C,KAAKmD,mBAAmB9B,EAAMM,SAClC,CACC,MACD,CAEA,MAAMyB,EAAS/B,EAAM4B,YACrB,MAAMI,EAAY3D,EAAW4D,aAAajC,EAAMkC,gBAEhD,GAAIvD,KAAKG,YAAYiD,KAAUC,GAC/B,CACCrD,KAAKG,YAAYiD,GAAQC,GAAWG,KAAKnC,EAC1C,CAEA,IAAK,MAAMoC,KAAgBnC,EAC3B,CACC,GAAItB,KAAKI,YAAYqD,GACrB,CACCzD,KAAKI,YAAYqD,GAAcC,OAAOF,KAAKnC,EAC5C,CAEA,GAAIrB,KAAKK,iBAAiBoD,KAAgBJ,GAC1C,CACC,MAAMM,EAAa3D,KAAKK,iBAAiBoD,GAAcJ,GAEvDM,EAAWC,MAAMC,GAAmBA,EAAeT,SAAWA,IAAQU,cACvE,CACD,CACD,CAQAjC,kBAAkBc,EAAUvC,GAE3B,MAAMkB,EAAgBlB,EAAY0C,KAAKC,GAAeA,EAAWC,KAEjEhD,KAAKwB,iBAAiBmB,EAAUrB,GAEhC,MAAMV,KAAEA,SAAetB,EAAUyE,OAAOpB,EAASK,GAAIL,GAErD3C,KAAKwB,iBAAiBZ,EAAKS,MAAOC,GAElC,OAAOV,CACR,CAEAY,iBAAiBmB,EAAUrB,GAE1B,MAAMD,EAAQ,IAAI1B,EAAWgD,GAE7B,GAAI3C,KAAKE,UAAU0C,cAAgB5C,KAAKE,SAAS0C,aAAaI,KAAO3B,EAAMM,QAC3E,CACC3B,KAAKE,SAAS0C,aAAeD,CAC9B,CAEA,IAAK3C,KAAKmD,mBAAmB9B,EAAMM,SACnC,CACC,MACD,CAEA,MAAMyB,EAAS/B,EAAM4B,YACrB,MAAMI,EAAY3D,EAAW4D,aAAajC,EAAMkC,gBAEhD,GAAIvD,KAAKG,YAAYiD,KAAUC,GAC/B,CACCrD,KAAKG,YAAYiD,GAAQC,GAAarD,KAAKG,YAAYiD,GAAQC,GAAWP,KAAKkB,GAC9EA,EAAGrC,UAAYN,EAAMM,QAAUN,EAAQ2C,GAEzC,CAEA,IAAK,MAAMP,KAAgBnC,EAC3B,CACC,GAAItB,KAAKI,YAAYqD,GACrB,CACCzD,KAAKI,YAAYqD,GAAcC,OAAS1D,KAAKI,YAAYqD,GAAcC,OAAOZ,KAAKkB,GAClFA,EAAGrC,UAAYN,EAAMM,QAAUN,EAAQ2C,GAEzC,CACD,CACD,CAEAnC,kBAAkBoC,GAEjB,MAAMC,QAAe5E,EAAU6E,OAAOF,GAEtCjE,KAAK0B,qBAAqBuC,GAE1B,OAAOC,CACR,CAEAxC,qBAAqBuC,GAEpB,MAAMG,EAAgBpE,KAAKmD,mBAAmBc,GAC9C,IAAKG,EACL,CACC,MACD,CAEA,MAAMhB,EAASgB,EAAcnB,YAC7B,MAAMI,EAAY3D,EAAW4D,aAAac,EAAcb,gBAExD,GAAIvD,KAAKG,YAAYiD,KAAUC,GAC/B,CACC,MAAMgB,EAAarE,KAAKG,YAAYiD,GAAQC,GAC5CrD,KAAKG,YAAYiD,GAAQC,GAAagB,EAAWC,QAAQN,GAAOA,EAAGrC,UAAYyC,EAAczC,SAC9F,CAEA,IAAK,MAAM8B,KAAgBc,OAAOC,KAAKxE,KAAKI,aAC5C,CACC,MAAMqE,EAAmBzE,KAAKI,YAAYqD,GAAcC,OACxD1D,KAAKI,YAAYqD,GAAcC,OAASe,EAAiBH,QAAQjD,GAAUA,EAAMM,UAAYsC,GAC9F,CAEA,IAAK,MAAMR,KAAgBc,OAAOC,KAAKxE,KAAKK,kBAC5C,CACC,MAAMsD,EAAa3D,KAAKK,iBAAiBoD,GAAcJ,GAEvDM,EAAWC,MAAMC,GAAmBA,EAAeT,SAAWA,IAAQU,cACvE,CACD,CAEAX,mBAAmBc,GAElB,IAAK,MAAMb,KAAUmB,OAAOC,KAAKxE,KAAKG,aACtC,CACC,IAAK,MAAMkD,KAAakB,OAAOC,KAAKxE,KAAKG,YAAYiD,IACrD,CACC,MAAM/B,EAAQrB,KAAKG,YAAYiD,GAAQC,GAAWO,MAAMI,GAAOA,EAAGrC,UAAYsC,IAC9E,GAAI5C,EACJ,CACC,OAAOA,CACR,CACD,CACD,CAEA,IAAK,MAAMoC,KAAgBc,OAAOC,KAAKxE,KAAKI,aAC5C,CACC,MAAMiB,EAAQrB,KAAKI,YAAYqD,GAAcC,OAAOE,MAAMI,GAAOA,EAAGrC,UAAYsC,IAChF,GAAI5C,EACJ,CACC,OAAOA,CACR,CACD,CAEA,OAAO,IACR,CAEAqD,sBAAsBtB,EAAQC,GAE7B,OAAQjE,EAAKuF,MAAM3E,KAAK4E,4BAA4BxB,EAAQC,GAC7D,CAQAuB,4BAA4BxB,EAAQC,GAEnC,OAAOrD,KAAKG,YAAYiD,KAAUC,EACnC,CAQAxB,4BAA4BuB,EAAQC,GAEnCrD,KAAKG,YAAYiD,KAAY,CAAC,EAC9BpD,KAAKG,YAAYiD,GAAQC,WAAqBrD,KAAK6E,uBAAuBzB,EAAQC,GAElF,OAAOrD,KAAKG,YAAYiD,GAAQC,EACjC,CAQAxB,6BAA6BuB,EAAQC,GAEpC,MAAMvB,EAAOpC,EAAWoF,qBAAqBzB,GAC7C,MAAM0B,EAAQ,IAAIC,KAAKlD,EAAKmD,cAAenD,EAAKoD,WAAY,GAC5D,MAAMC,EAAM,IAAIH,KAAKlD,EAAKmD,cAAenD,EAAKoD,WAAa,EAAG,GAE9DlF,KAAKoF,qBAAuB,CAAC,EAC7BpF,KAAKoF,mBAAmBhC,KAAY,CAAC,EACrCpD,KAAKoF,mBAAmBhC,GAAQC,KAAe/D,EAAU+F,KAAK,CAC7DC,UAAW5F,EAAW6F,WAAWR,GACjCS,QAAS9F,EAAW6F,WAAWJ,GAC/BM,QAASrC,IAGV,MAAMxC,KAAEA,SAAeZ,KAAKoF,mBAAmBhC,GAAQC,GAEvD,OAAOzC,EAAK8E,UAAU5C,KAAK6C,GAAa,IAAIhG,EAAWgG,IACxD,CAEAC,6BAA6BnC,EAAcJ,GAE1C,OAAQjE,EAAKuF,MAAM3E,KAAKK,iBAAiBoD,MACpCrE,EAAKuF,MAAM3E,KAAKK,iBAAiBoD,GAAcJ,GAErD,CAEAwC,wBAAwBpC,GAEvB,OAAQrE,EAAKuF,MAAM3E,KAAKI,YAAYqD,GACrC,CAQA5B,mCAAmC4B,EAAcJ,GAEhDrD,KAAKK,iBAAiBoD,KAAkB,CAAC,EACzCzD,KAAKK,iBAAiBoD,GAAcJ,WAAqBrD,KAAK8F,8BAC7DrC,EACAJ,GAGD,OAAOrD,KAAKK,iBAAiBoD,GAAcJ,EAC5C,CAQAxB,oCAAoC4B,EAAcJ,GAEjDrD,KAAK+F,2BAA6B,CAAC,EACnC/F,KAAK+F,yBAAyBtC,KAAkB,CAAC,EACjDzD,KAAK+F,yBAAyBtC,GAAcJ,KAAe9D,EAAyByG,YACnFvC,EACAJ,GAGD,MAAMzC,KAAEA,SAAeZ,KAAK+F,yBAAyBtC,GAAcJ,GAEnE,OAAOzC,EAAK+C,WAAWb,KAAKe,IAAmB,CAC9CT,OAAQ6C,SAASpC,EAAeb,GAAI,IACpCc,aAAcmC,SAASpC,EAAeC,aAAc,OAEtD,CAOAjC,8BAA8B4B,GAE7BzD,KAAKI,YAAYqD,WAAwBzD,KAAKkG,yBAAyBzC,GAEvE,OAAOzD,KAAKI,YAAYqD,EACzB,CAOA5B,+BAA+B4B,GAE9BzD,KAAKmG,qBAAuB,CAAC,EAC7BnG,KAAKmG,mBAAmB1C,KAAkBlE,EAAyB6G,IAClE3C,EACA/D,EAAWgD,qBAGZ,MAAM9B,KAAEA,SAAeZ,KAAKmG,mBAAmB1C,GAE/C,MAAO,CACN4C,MAAOzF,EAAKyF,MAAMvD,KAAKwD,IAAS,IAC5BA,EACHtD,GAAIiD,SAASK,EAAKtD,GAAI,QAEvBU,OAAQ9C,EAAK8C,OAAOZ,KAAK6C,GAAa,IAAIhG,EAAWgG,KAEvD,EAGDxG,EAAOD,QAAU,CAAEW,aAAc,IAAIA,EAAgB"}