{"version":3,"file":"ifelsebranchactivity.js","sources":["src/index.js"],"sourcesContent":["import { Tag, Dom, Text, Event } from 'main.core';\nimport './css/style.css';\n\nconst SequenceActivity = window.SequenceActivity;\n\nexport class IfElseBranchActivity extends SequenceActivity\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis.Type = 'IfElseBranchActivity';\n\n\t\t// compatibility\n\t\tthis.Draw = this.#draw.bind(this);\n\t\tthis.iHead = 1;\n\t}\n\n\t#draw(wrapper)\n\t{\n\t\tconst rows = Array.from(\n\t\t\t{ length: this.iHead + this.childActivities.length * 2 },\n\t\t\t() => Tag.render`\n\t\t\t\t<tr><td align=\"center\" valign=\"center\"></td></tr>\n\t\t\t`,\n\t\t);\n\n\t\tconst titleNode = this.#renderTitle();\n\t\tthis.childsContainer = Tag.render`\n\t\t\t<table \n\t\t\t\tclass=\"seqactivitycontainer\"\n\t\t\t\tid=\"${Text.encode(this.Name)}\"\n\t\t\t\tstyle=\"height: 100%; width: 100%;\"\n\t\t\t\tborder=\"0\"\n\t\t\t\tcellpadding=\"0\"\n\t\t\t\tcellspacing=\"0\"\n\t\t\t>\n\t\t\t\t<tbody>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td align=\"center\" valign=\"center\">\n\t\t\t\t\t\t\t<div class=\"activity\" style=\"margin: 5px; text-align: center; width: 190px; height: 20px;\">\n\t\t\t\t\t\t\t\t${titleNode}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t${rows}\n\t\t\t\t</tbody>\n\t\t\t</table>\n\t\t`;\n\t\tDom.append(this.childsContainer, wrapper);\n\n\t\tthis.CreateLine(0);\n\t\tthis.childActivities.forEach((child, index) => {\n\t\t\tchild.Draw(this.childsContainer.rows[this.iHead + index * 2 + 1].cells[0]);\n\t\t\tthis.CreateLine(Text.toInteger(index) + 1);\n\t\t});\n\n\t\tthis.drawEditorComment(titleNode);\n\t}\n\n\t#renderTitle(): HTMLDivElement\n\t{\n\t\tconst activatedClass = (\n\t\t\t!this.canBeActivated || this.Activated === 'N'\n\t\t\t\t? ' --deactivated'\n\t\t\t\t: ''\n\t\t);\n\n\t\tconst { root, setting } = Tag.render`\n\t\t\t<div class=\"bizproc-designer-if-else-branch-activity-title-wrapper${activatedClass}\">\n\t\t\t\t<table style=\"width: 100%; height: 100%\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\">\n\t\t\t\t\t<tbody>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td \n\t\t\t\t\t\t\t\talign=\"center\"\n\t\t\t\t\t\t\t\ttitle=\"${Text.encode(this.Properties.Title)}\"\n\t\t\t\t\t\t\t\tstyle=\"width: 100%; font-size: 11px;\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div class=\"bizproc-designer-if-else-branch-activity-title\">\n\t\t\t\t\t\t\t\t\t${Text.encode(this.Properties.Title)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td ref=\"setting\" style=\"cursor: pointer;\">\n\t\t\t\t\t\t\t\t<div \n\t\t\t\t\t\t\t\t\tclass=\"ui-icon-set --settings-2 bizproc-designer-if-else-branch-activity-setting-icon\"\n\t\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</tbody>\n\t\t\t\t</table>\n\t\t\t</div>\n\t\t`;\n\t\tEvent.bind(root, 'dblclick', this.OnSettingsClick.bind(this));\n\t\tEvent.bind(setting, 'click', this.Settings.bind(this));\n\n\t\treturn root;\n\t}\n\n\tstatic changeConditionTypeHandler(selectElement)\n\t{\n\t\t[...selectElement.options].forEach((option) => {\n\t\t\tconst container = document.getElementById(Dom.attr(option, 'data-id'));\n\t\t\tDom.style(container, 'display', option.selected ? '' : 'none');\n\t\t});\n\t}\n}\n"],"names":["SequenceActivity","window","IfElseBranchActivity","constructor","Type","Draw","bind","iHead","changeConditionTypeHandler","selectElement","options","forEach","option","container","document","getElementById","Dom","attr","style","selected","wrapper","rows","Array","from","length","childActivities","Tag","render","titleNode","childsContainer","Text","encode","Name","append","CreateLine","child","index","cells","toInteger","drawEditorComment","activatedClass","canBeActivated","Activated","root","setting","Properties","Title","Event","OnSettingsClick","Settings"],"mappings":"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"}