this.BX=this.BX||{};this.BX.Bizproc=this.BX.Bizproc||{};(function(e,t,a){"use strict";var i,l,r,s,n,o,d,p,c,b,v,h;function g(e,t){P(e,t);t.add(e)}function u(e,t,a){P(e,t);t.set(e,a)}function P(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function f(e,t,a){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return a}var m=t.Reflection.namespace("BX.Bizproc.Activity");var H=new WeakMap;var T=new WeakMap;var F=new WeakMap;var _=new WeakMap;var w=new WeakMap;var G=new WeakMap;var y=new WeakSet;var B=new WeakSet;var D=new WeakSet;var L=new WeakSet;var E=new WeakSet;var S=new WeakSet;var k=new WeakSet;var O=function(){function e(i){var l=this;babelHelpers.classCallCheck(this,e);g(this,k);g(this,S);g(this,E);g(this,L);g(this,D);g(this,B);g(this,y);u(this,H,{writable:true,value:void 0});u(this,T,{writable:true,value:{variables:{},properties:{}}});u(this,F,{writable:true,value:void 0});u(this,_,{writable:true,value:0});u(this,w,{writable:true,value:[]});u(this,G,{writable:true,value:void 0});if(!t.Type.isPlainObject(i)){return}if(t.Type.isElementNode(i.table)){babelHelpers.classPrivateFieldSet(this,H,i.table)}if(t.Type.isPlainObject(i.conditions)){var r=String(i.conditions.variable_condition_count).split(",").map(t.Text.toInteger);r.forEach((function(e){babelHelpers.classPrivateFieldGet(l,w).push({operator:i.conditions["variable_condition_condition_"+e]||a.Operator.EQUAL,fieldId:i.conditions["variable_condition_field_"+e]||"",joiner:i.conditions["variable_condition_joiner_"+e]||0,value:i.conditions["variable_condition_value_"+e]||""})}))}if(t.Type.isPlainObject(i.variables)){babelHelpers.classPrivateFieldGet(this,T).variables=i.variables}if(t.Type.isPlainObject(i.properties)){babelHelpers.classPrivateFieldGet(this,T).properties=i.properties}babelHelpers.classPrivateFieldSet(this,F,i.documentType)}babelHelpers.createClass(e,[{key:"init",value:function e(){var a=this;var l=t.Tag.render(i||(i=babelHelpers.taggedTemplateLiteral(["<tbody></tbody>"])));babelHelpers.classPrivateFieldGet(this,w).forEach((function(e){f(a,y,C).call(a,e,l)}));t.Dom.append(f(this,S,x).call(this),l);t.Dom.append(l,babelHelpers.classPrivateFieldGet(this,H))}}]);return e}();function C(e,i){var l;var r,s;var n=new a.BpCondition({operator:e.operator||a.Operator.EQUAL,value:e.value||"",selectName:"variable_condition_condition_"+String(babelHelpers.classPrivateFieldGet(this,_)),inputName:"variable_condition_value_"+String(babelHelpers.classPrivateFieldGet(this,_)),documentType:babelHelpers.classPrivateFieldGet(this,F),useOperatorModified:false});if(babelHelpers.classPrivateFieldGet(this,_)!==0){t.Dom.append(f(this,L,W).call(this,t.Text.toInteger(e.joiner||0),n),i)}var o=f(this,B,M).call(this,e.fieldId||"",babelHelpers.classPrivateFieldGet(this,_),n);t.Dom.append(o,i);var d=e.fieldId||"";var p=(l=babelHelpers.classPrivateFieldGet(this,T).variables[d])!==null&&l!==void 0?l:babelHelpers.classPrivateFieldGet(this,T).properties[d];if(t.Type.isNil(p)){var c;d=o.getElementsByTagName("SELECT")[0].options[0].value;p=(c=babelHelpers.classPrivateFieldGet(this,T).variables[d])!==null&&c!==void 0?c:babelHelpers.classPrivateFieldGet(this,T).properties[d]}n.renderOperatorTo(p.Type,i);n.renderValueTo(p,i);babelHelpers.classPrivateFieldSet(this,_,(r=babelHelpers.classPrivateFieldGet(this,_),s=r++,r)),s}function M(e,a,i){var p=this;var c=t.Tag.render(l||(l=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<select name="variable_condition_field_','"></select>\n\t\t'])),String(a));var b=Object.keys(babelHelpers.classPrivateFieldGet(this,T).properties);if(b.length>0){var v=t.Tag.render(r||(r=babelHelpers.taggedTemplateLiteral(['<optgroup label="','"></optgroup>'])),t.Loc.getMessage("BPFC_PD_PARAMS"));b.forEach((function(a){t.Dom.append(t.Tag.render(s||(s=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t\t\t<option value="','"',">\n\t\t\t\t\t\t\t","\n\t\t\t\t\t\t</option>\n\t\t\t\t\t"])),t.Text.encode(a),e===a?" selected":"",t.Text.encode(babelHelpers.classPrivateFieldGet(p,T).properties[a].Name)),v)}));t.Dom.append(v,c)}var h=Object.keys(babelHelpers.classPrivateFieldGet(this,T).variables);if(h.length>0){var g=t.Tag.render(n||(n=babelHelpers.taggedTemplateLiteral(['<optgroup label="','"></optgroup>'])),t.Loc.getMessage("BPFC_PD_VARS"));h.forEach((function(a){t.Dom.append(t.Tag.render(o||(o=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t\t\t<option value="','"',">\n\t\t\t\t\t\t\t","\n\t\t\t\t\t\t</option>\n\t\t\t\t\t"])),t.Text.encode(a),e===a?" selected":"",t.Text.encode(babelHelpers.classPrivateFieldGet(p,T).variables[a].Name)),g)}));t.Dom.append(g,c)}t.Event.bind(c,"change",f(this,D,j).bind(this,i));return t.Tag.render(d||(d=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<tr>\n\t\t\t\t<td align="right" width="40%" class="adm-detail-content-cell-l">\n\t\t\t\t\t','\n\t\t\t\t</td>\n\t\t\t\t<td width="60%" class="adm-detail-content-cell-r">\n\t\t\t\t\t',"\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t"])),t.Loc.getMessage("BPFC_PD_FIELD")+":",c)}function j(e,t){var a,i,l;var r=t.target;var s=r.selectedOptions[0].value;var n=(a=babelHelpers.classPrivateFieldGet(this,T).properties[s])!==null&&a!==void 0?a:babelHelpers.classPrivateFieldGet(this,T).variables[s];if(!n){r.selectedIndex=0;n=babelHelpers.classPrivateFieldGet(this,T)[r.selectedOptions[0]]}e.rerenderOperator((i=n.Type)!==null&&i!==void 0?i:"string");e.rerenderValue((l=n)!==null&&l!==void 0?l:{Type:"string"})}function W(e,a){var i=babelHelpers.classPrivateFieldGet(this,_);var l=t.Tag.render(p||(p=babelHelpers.taggedTemplateLiteral(['<a href="#">',"</a>"])),t.Loc.getMessage("BPFC_PD_DELETE"));t.Event.bindOnce(l,"click",f(this,E,A).bind(this,a,i));return t.Tag.render(c||(c=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<tr>\n\t\t\t\t<td align="right" width="40%" class="adm-detail-content-cell-l">\n\t\t\t\t\t<select name="','">\n\t\t\t\t\t\t<option value="0">','</option>\n\t\t\t\t\t\t<option value="1"',">",'</option>\n\t\t\t\t\t</select>\n\t\t\t\t</td>\n\t\t\t\t<td align="right" width="60%" class="adm-detail-content-cell-r">\n\t\t\t\t\t',"\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t"])),"variable_condition_joiner_"+String(babelHelpers.classPrivateFieldGet(this,_)),t.Loc.getMessage("BPFC_PD_AND"),e===1?" selected":"",t.Loc.getMessage("BPFC_PD_OR"),l)}function A(e,t,a){a.preventDefault();var i=a.target;var l=i.closest("tbody");var r=i.parentElement;var s=r.parentElement;var n=s.rowIndex;l.deleteRow(n+1);l.deleteRow(n);e.destroy();var o=babelHelpers.classPrivateFieldGet(this,G).value.split(",");var d=o.indexOf(String(t));if(d!==-1){o.splice(d,1)}babelHelpers.classPrivateFieldGet(this,G).value=o.join(",")}function x(){babelHelpers.classPrivateFieldSet(this,G,t.Tag.render(b||(b=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<input \n\t\t\t\ttype="hidden"\n\t\t\t\tname="variable_condition_count"\n\t\t\t\tvalue="','"\n\t\t\t>\n\t\t'])),babelHelpers.toConsumableArray(Array(babelHelpers.classPrivateFieldGet(this,_))).map((function(e,t){return t})).join(",")));var e=t.Tag.render(v||(v=babelHelpers.taggedTemplateLiteral(['<a href="#">',"</a>"])),t.Loc.getMessage("BPFC_PD_ADD"));t.Event.bind(e,"click",f(this,k,X).bind(this));return t.Tag.render(h||(h=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<tr>\n\t\t\t\t<td class="adm-detail-content-cell-l"></td>\n\t\t\t\t<td class="adm-detail-content-cell-r">\n\t\t\t\t\t',"\n\t\t\t\t\t","\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t"])),babelHelpers.classPrivateFieldGet(this,G),e)}function X(e){e.preventDefault();var a=e.target;var i=a.closest("tbody");var l=a.closest("tr");t.Dom.remove(l);babelHelpers.classPrivateFieldGet(this,G).value+=","+String(babelHelpers.classPrivateFieldGet(this,_));f(this,y,C).call(this,{},i);t.Dom.append(l,i)}m.PropertyVariableCondition=O})(this.BX.Bizproc.Activity=this.BX.Bizproc.Activity||{},BX,BX.Bizproc);
//# sourceMappingURL=script.map.js