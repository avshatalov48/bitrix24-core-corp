this.BX=this.BX||{};this.BX.Bizproc=this.BX.Bizproc||{};(function(e,t,i,a){"use strict";function l(e,t){r(e,t);t.add(e)}function s(e,t,i){r(e,t);t.set(e,i)}function r(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function o(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var n=t.Reflection.namespace("BX.Bizproc.Activity");var p=new WeakMap;var c=new WeakMap;var b=new WeakMap;var v=new WeakMap;var d=new WeakMap;var u=new WeakMap;var h=new WeakMap;var m=new WeakMap;var f=new WeakSet;var w=new WeakSet;var H=function(){function e(i){babelHelpers.classCallCheck(this,e);l(this,w);l(this,f);s(this,p,{writable:true,value:void 0});s(this,c,{writable:true,value:void 0});s(this,b,{writable:true,value:null});s(this,v,{writable:true,value:void 0});s(this,d,{writable:true,value:void 0});s(this,u,{writable:true,value:void 0});s(this,h,{writable:true,value:void 0});s(this,m,{writable:true,value:false});if(!t.Type.isElementNode(i.templateNode)){throw"templateNode must be HTML Element"}babelHelpers.classPrivateFieldSet(this,p,i.templateNode);if(!t.Type.isElementNode(i.templateInput)){throw"templateInput must be HTML Input Element"}babelHelpers.classPrivateFieldSet(this,c,i.templateInput);if(!t.Type.isElementNode(i.parametersNode)){throw"parametersNode must be HTML Element"}babelHelpers.classPrivateFieldSet(this,v,i.parametersNode);var a=t.Text.toInteger(i.templateId);if(a>0){babelHelpers.classPrivateFieldSet(this,b,a)}babelHelpers.classPrivateFieldSet(this,d,t.Type.isArrayFilled(i.documentType)?i.documentType:[]);babelHelpers.classPrivateFieldSet(this,u,t.Type.isStringFilled(i.formName)?i.formName:"");babelHelpers.classPrivateFieldSet(this,h,t.Type.isPlainObject(i.propertiesDialog)?i.propertiesDialog:{});babelHelpers.classPrivateFieldSet(this,m,t.Type.isBoolean(i.isRobot)?i.isRobot:false)}babelHelpers.createClass(e,[{key:"init",value:function e(){o(this,f,y).call(this)}}]);return e}();function y(){var e=this;var t=[];if(babelHelpers.classPrivateFieldGet(this,b)){t.push(["bizproc-template",babelHelpers.classPrivateFieldGet(this,b)])}var a=new i.TagSelector({dialogOptions:{entities:[{id:"bizproc-template"}],multiple:false,dropdownMode:true,enableSearch:true,hideOnSelect:true,hideOnDeselect:false,clearSearchOnSelect:true,showAvatars:false,compactView:true,height:300,preselectedItems:t,events:{"Item:onSelect":function t(i){var a=i.getData(),l=a.item;o(e,w,g).call(e,l.getId());babelHelpers.classPrivateFieldGet(e,c).value=l.getId()},"Item:onDeselect":function t(i){o(e,w,g).call(e,-1);babelHelpers.classPrivateFieldGet(e,c).value=""}}},multiple:false});a.renderTo(babelHelpers.classPrivateFieldGet(this,p))}function g(e){var i=this;babelHelpers.classPrivateFieldGet(this,v).innerHTML="";e=t.Text.toInteger(e);if(e<=0){return}var l={site_id:t.Loc.getMessage("SITE_ID"),sessid:BX.bitrix_sessid(),document_type:babelHelpers.classPrivateFieldGet(this,d),activity:"StartWorkflowActivity",template_id:e,form_name:babelHelpers.classPrivateFieldGet(this,u),content_type:"html"};if(babelHelpers.classPrivateFieldGet(this,m)===true){l["properties_dialog"]=babelHelpers.classPrivateFieldGet(this,h);l["isRobot"]="y"}t.ajax.post("/bitrix/tools/bizproc_activity_ajax.php",l,(function(e){if(e){babelHelpers.classPrivateFieldGet(i,v).innerHTML=e}if(babelHelpers.classPrivateFieldGet(i,m)&&t.Reflection.getClass("BX.Bizproc.Automation.Designer")){var l=a.Designer.getInstance().getRobotSettingsDialog();if(l&&l.template){l.template.initRobotSettingsControls(l.robot,babelHelpers.classPrivateFieldGet(i,v))}}}))}n.StartWorkflowActivity=H})(this.BX.Bizproc.Activity=this.BX.Bizproc.Activity||{},BX,BX.UI.EntitySelector,BX.Bizproc.Automation);
//# sourceMappingURL=script.map.js