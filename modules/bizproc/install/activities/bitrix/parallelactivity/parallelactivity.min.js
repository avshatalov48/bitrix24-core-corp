ParallelActivity=function(){var e=new BizProcActivity;e.Type="ParallelActivity";e.childActivities=[];e.__parallelActivityInitType="SequenceActivity";e.allowSort=false;function i(e){return e.ctrlKey==true||e.metaKey==true}function t(e,i){const t=i.nextElementSibling;const n=i.parentNode;e.replaceWith(i);n.insertBefore(e,t)}e.copyBranch=function(i){e.createBranch(e.childActivities[i],i)};e.addBranch=function(){var i=e.childsContainer.rows[2].cells.length-1;e.createBranch(e.__parallelActivityInitType,i)};e.createBranch=function(i,t){var n;var l;var r=CreateActivity(i);r.parentActivity=e;e.childActivities.push([]);for(n=e.childActivities.length-1;n>t;n--)e.childActivities[n]=e.childActivities[n-1];e.childActivities[t]=r;for(n=0;n<e.childsContainer.rows.length;n++){l=e.childsContainer.rows[n].insertCell(t);l.align="center";l.vAlign="top"}e.DrawVLine(t);r.Draw(e.childsContainer.rows[2].cells[t]);e.RefreshDelButton()};e.delBranch=function(i){var t=this.parentNode.parentNode.ind;e.RemoveChild(e.childActivities[t])};e.DrawVLine=function(i){e.childsContainer.rows[0].className="trLine";e.childsContainer.rows[3].className="trLine";e.childsContainer.rows[1].cells[i].style.background="url(/bitrix/images/bizproc/act_line_bg.gif) 50% top repeat-y";e.childsContainer.rows[2].cells[i].style.background="url(/bitrix/images/bizproc/act_line_bg.gif) 50% top repeat-y";e.childsContainer.rows[2].cells[i].vAlign="top";var t=e.childsContainer.rows[1].cells[i];t.height="20";t.vAlign="bottom";var n=t.appendChild(document.createElement("DIV"));n.style.marginTop="14px";n.style.display="none";var l=n.appendChild(document.createElement("IMG"));l.src="/bitrix/images/bizproc/del_br.gif";l.height="14";l.width="14";l.style.cursor="pointer";l.onclick=e.delBranch;l.title=BPMESS["PARA_DEL"];if(e.allowSort){e.drawMoveElement(i,t)}};e.RefreshDelButton=function(){var i;var t=e.childActivities.length;for(i=0;i<t;i++){if(e.childActivities.length>2)e.childsContainer.rows[1].cells[i].childNodes[0].style.display="block";else e.childsContainer.rows[1].cells[i].childNodes[0].style.display="none";e.childsContainer.rows[1].cells[i].ind=i}};e.OnHideClick=function(){if(e.Properties["_DesMinimized"]=="Y"){e.Properties["_DesMinimized"]="N";e.childsContainer.style.display="table";e.hideContainer.style.display="none"}else{e.Properties["_DesMinimized"]="Y";e.childsContainer.style.display="none";e.hideContainer.style.display="block"}};e.BizProcActivityDraw=e.Draw;e.Draw=function(i){if(e.childActivities.length==0){e.childActivities=[CreateActivity(e.__parallelActivityInitType),CreateActivity(e.__parallelActivityInitType)];e.childActivities[0].parentActivity=e;e.childActivities[1].parentActivity=e}e.container=i.appendChild(document.createElement("DIV"));if(!jsUtils.IsIE())e.container.className="parallelcontainer";if(!e.activityContent){var t=_crt(1,3);t.style.fontSize="11px";t.rows[0].cells[0].style.background="url("+(e.Icon?e.Icon:"/bitrix/images/bizproc/act_icon.gif")+") 2px 2px no-repeat";t.rows[0].cells[0].style.height="24px";t.rows[0].cells[0].style.width="24px";t.rows[0].cells[1].align="left";t.rows[0].cells[1].innerHTML=HTMLEncode(e["Properties"]["Title"]);t.rows[0].cells[2].style.background="url(/bitrix/images/bizproc/add_br.gif) left center no-repeat";t.rows[0].cells[2].style.width="16px";t.rows[0].cells[2].style.cursor="pointer";t.rows[0].cells[2].title=BPMESS["PARA_ADD"];t.rows[0].cells[2].onclick=e.addBranch;e.activityContent=t}e.BizProcActivityDraw(e.container);e.activityContent=null;e.div.style.position="relative";e.div.style.top="12px";e.hideContainer=e.container.appendChild(document.createElement("DIV"));e.hideContainer.style.background="#FFFFFF";e.hideContainer.style.border="1px #CCCCCC dotted";e.hideContainer.style.width="250px";e.hideContainer.style.color="#AAAAAA";e.hideContainer.style.padding="13px 0px 3px 0px";e.hideContainer.style.cursor="pointer";e.hideContainer.innerHTML=BPMESS["PARA_MIN"];e.hideContainer.onclick=e.OnHideClick;e.childsContainer=e.container.appendChild(_crt(4,e.childActivities.length));e.childsContainer.id=e.Name;e.childsContainer.style.background="#FFFFFF";if(e.Properties["_DesMinimized"]=="Y"){e.childsContainer.style.display="none"}else{e.hideContainer.style.display="none"}for(var n in this.childActivities){if(!this.childActivities.hasOwnProperty(n))continue;e.DrawVLine(n);e.childActivities[n].Draw(e.childsContainer.rows[2].cells[n])}e.RefreshDelButton()};e.ActivityRemoveChild=e.RemoveChild;e.RemoveChild=function(i){var t,n;for(t=0;t<e.childActivities.length;t++){if(e.childActivities[t].Name==i.Name){e.ActivityRemoveChild(i);if(e.childsContainer){e.childsContainer.rows[0].deleteCell(t);e.childsContainer.rows[1].deleteCell(t);e.childsContainer.rows[2].deleteCell(t);e.childsContainer.rows[3].deleteCell(t);e.RefreshDelButton()}break}}};e.BizProcActivityRemoveResources=e.RemoveResources;e.RemoveResources=function(){e.BizProcActivityRemoveResources();if(e.container&&e.container.parentNode){e.container.parentNode.removeChild(e.container);e.container=null}};e.drawMoveElement=function(i,t){var n=t.appendChild(document.createElement("DIV"));n.className="move-thread";var l=n.appendChild(document.createElement("DIV"));l.className="to-left";l.onclick=e.moveToLeft;l.title=BPMESS["PARA_MOVE_LEFT"];var r=n.appendChild(document.createElement("DIV"));r.className="to-right";r.onclick=e.moveToRight;r.title=BPMESS["PARA_MOVE_RIGHT"]};e.moveToRight=function(t){var n=this.parentNode.parentNode.ind;if(n===e.childActivities.length){return}if(i(t)){e.copyBranch(n)}else{e.swapBranch(n,n+1)}BPTemplateIsModified=true;return false};e.moveToLeft=function(t){var n=this.parentNode.parentNode.ind;if(n===0){return}if(i(t)){e.copyBranch(n)}else{e.swapBranch(n-1,n)}BPTemplateIsModified=true;return false};e.swapBranch=function(i,n){var l=e.childActivities[i];e.childActivities[i]=e.childActivities[n];e.childActivities[n]=l;for(var r=1;r<3;r++){e.childsContainer.rows[r].cells[i].ind=n;e.childsContainer.rows[r].cells[n].ind=i;t(e.childsContainer.rows[r].cells[i],e.childsContainer.rows[r].cells[n])}};return e};
//# sourceMappingURL=parallelactivity.map.js