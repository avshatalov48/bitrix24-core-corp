ParallelActivity=function(){var i=new BizProcActivity;i.Type="ParallelActivity";i.childActivities=[];i.__parallelActivityInitType="SequenceActivity";i.addBranch=function(){var e,t,l=CreateActivity(i.__parallelActivityInitType),s=i.childsContainer.rows[2].cells.length-1;l.parentActivity=i;i.childActivities.push([]);for(e=i.childActivities.length-1;e>s;e--)i.childActivities[e]=i.childActivities[e-1];i.childActivities[s]=l;for(e=0;e<i.childsContainer.rows.length;e++){t=i.childsContainer.rows[e].insertCell(s);t.align="center";t.vAlign="top"}i.DrawVLine(s);l.Draw(i.childsContainer.rows[2].cells[s]);i.RefreshDelButton()};i.delBranch=function(e){i.RemoveChild(i.childActivities[this.ind]);var t;if(this.ind==0){t=i.childsContainer.rows[0].cells[0].appendChild(_crt(1,2));t.rows[0].cells[0].width="50%";t.rows[0].cells[1].width="50%";t.rows[0].cells[1].style.background="url(/bitrix/images/bizproc/act_line_bg.gif) 50% bottom repeat-x";t.rows[0].cells[1].style.height="2px";t=i.childsContainer.rows[3].cells[0].appendChild(_crt(1,2));t.rows[0].cells[0].width="50%";t.rows[0].cells[1].width="50%";t.rows[0].cells[1].style.background="url(/bitrix/images/bizproc/act_line_bg.gif) 50% bottom repeat-x";t.rows[0].cells[1].style.height="2px"}if(this.ind==i.childActivities.length){t=i.childsContainer.rows[0].cells[i.childActivities.length-1].appendChild(_crt(1,2));t.rows[0].cells[0].width="50%";t.rows[0].cells[1].width="50%";t.rows[0].cells[0].style.background="url(/bitrix/images/bizproc/act_line_bg.gif) 50% bottom repeat-x";t.rows[0].cells[0].style.height="2px";t=i.childsContainer.rows[3].cells[i.childActivities.length-1].appendChild(_crt(1,2));t.rows[0].cells[0].width="50%";t.rows[0].cells[1].width="50%";t.rows[0].cells[0].style.background="url(/bitrix/images/bizproc/act_line_bg.gif) 50% bottom repeat-x";t.rows[0].cells[0].style.height="2px"}};i.DrawVLine=function(e){if(e!=0&&e!=i.childActivities.length-1){i.childsContainer.rows[0].cells[e].style.height="2px";i.childsContainer.rows[0].cells[e].style.background="url(/bitrix/images/bizproc/act_line_bg.gif) 50% bottom repeat-x";i.childsContainer.rows[3].cells[e].style.background="url(/bitrix/images/bizproc/act_line_bg.gif) 50% bottom repeat-x"}i.childsContainer.rows[1].cells[e].style.background="url(/bitrix/images/bizproc/act_line_bg.gif) 50% top repeat-y";i.childsContainer.rows[2].cells[e].style.background="url(/bitrix/images/bizproc/act_line_bg.gif) 50% top repeat-y";i.childsContainer.rows[2].cells[e].vAlign="top";var t=i.childsContainer.rows[1].cells[e];t.height="20";t.vAlign="bottom";var l=t.appendChild(document.createElement("DIV"));l.style.marginTop="14px";l.style.display="none";var s=l.appendChild(document.createElement("IMG"));s.src="/bitrix/images/bizproc/del_br.gif";s.height="14";s.width="14";s.style.cursor="pointer";s.onclick=i.delBranch;s.title=BPMESS["PARA_DEL"];s.ind=e};i.RefreshDelButton=function(){var e;for(e=0;e<i.childActivities.length;e++){if(i.childActivities.length>2)i.childsContainer.rows[1].cells[e].childNodes[0].style.display="block";else i.childsContainer.rows[1].cells[e].childNodes[0].style.display="none";i.childsContainer.rows[1].cells[e].childNodes[0].childNodes[0].ind=e;if(e!=0&&e!=i.childActivities.length-1){i.childsContainer.rows[0].cells[e].style.height="2px";i.childsContainer.rows[0].cells[e].style.background="url(/bitrix/images/bizproc/act_line_bg.gif) 50% bottom repeat-x";i.childsContainer.rows[3].cells[e].style.background="url(/bitrix/images/bizproc/act_line_bg.gif) 50% bottom repeat-x"}else{i.childsContainer.rows[0].cells[e].style.background="";i.childsContainer.rows[3].cells[e].style.background=""}i.childsContainer.rows[1].cells[e].style.background="url(/bitrix/images/bizproc/act_line_bg.gif) 50% top repeat-y";i.childsContainer.rows[2].cells[e].style.background="url(/bitrix/images/bizproc/act_line_bg.gif) 50% top repeat-y"}};i.OnHideClick=function(){if(i.Properties["_DesMinimized"]=="Y"){i.Properties["_DesMinimized"]="N";i.childsContainer.style.display="table";i.hideContainer.style.display="none"}else{i.Properties["_DesMinimized"]="Y";i.childsContainer.style.display="none";i.hideContainer.style.display="block"}};i.BizProcActivityDraw=i.Draw;i.Draw=function(e){if(i.childActivities.length==0){i.childActivities=[CreateActivity(i.__parallelActivityInitType),CreateActivity(i.__parallelActivityInitType)];i.childActivities[0].parentActivity=i;i.childActivities[1].parentActivity=i}i.container=e.appendChild(document.createElement("DIV"));if(!jsUtils.IsIE())i.container.className="parallelcontainer";if(!i.activityContent){var t=_crt(1,3);t.style.fontSize="11px";t.rows[0].cells[0].style.background="url("+(i.Icon?i.Icon:"/bitrix/images/bizproc/act_icon.gif")+") 2px 2px no-repeat";t.rows[0].cells[0].style.height="24px";t.rows[0].cells[0].style.width="24px";t.rows[0].cells[1].align="left";t.rows[0].cells[1].innerHTML=HTMLEncode(i["Properties"]["Title"]);t.rows[0].cells[2].style.background="url(/bitrix/images/bizproc/add_br.gif) left center no-repeat";t.rows[0].cells[2].style.width="16px";t.rows[0].cells[2].style.cursor="pointer";t.rows[0].cells[2].title=BPMESS["PARA_ADD"];t.rows[0].cells[2].onclick=i.addBranch;i.activityContent=t}i.BizProcActivityDraw(i.container);i.activityContent=null;i.div.style.position="relative";i.div.style.top="12px";i.hideContainer=i.container.appendChild(document.createElement("DIV"));i.hideContainer.style.background="#FFFFFF";i.hideContainer.style.border="1px #CCCCCC dotted";i.hideContainer.style.width="250px";i.hideContainer.style.color="#AAAAAA";i.hideContainer.style.padding="13px 0px 3px 0px";i.hideContainer.style.cursor="pointer";i.hideContainer.innerHTML=BPMESS["PARA_MIN"];i.hideContainer.onclick=i.OnHideClick;i.childsContainer=i.container.appendChild(_crt(4,i.childActivities.length));i.childsContainer.id=i.Name;i.childsContainer.style.background="#FFFFFF";if(i.Properties["_DesMinimized"]=="Y"){i.childsContainer.style.display="none"}else{i.hideContainer.style.display="none"}var l=this.childsContainer.rows[0].cells[0].appendChild(_crt(1,2));l.rows[0].cells[0].width="50%";l.rows[0].cells[1].width="50%";l.rows[0].cells[1].style.background="url(/bitrix/images/bizproc/act_line_bg.gif) 50% bottom repeat-x";l.rows[0].cells[1].style.height="2px";l=this.childsContainer.rows[3].cells[0].appendChild(_crt(1,2));l.rows[0].cells[0].width="50%";l.rows[0].cells[1].width="50%";l.rows[0].cells[1].style.background="url(/bitrix/images/bizproc/act_line_bg.gif) 50% bottom repeat-x";l.rows[0].cells[1].style.height="2px";l=this.childsContainer.rows[0].cells[this.childActivities.length-1].appendChild(_crt(1,2));l.rows[0].cells[0].width="50%";l.rows[0].cells[1].width="50%";l.rows[0].cells[0].style.background="url(/bitrix/images/bizproc/act_line_bg.gif) 50% bottom repeat-x";l.rows[0].cells[0].style.height="2px";l=this.childsContainer.rows[3].cells[this.childActivities.length-1].appendChild(_crt(1,2));l.rows[0].cells[0].width="50%";l.rows[0].cells[1].width="50%";l.rows[0].cells[0].style.background="url(/bitrix/images/bizproc/act_line_bg.gif) 50% bottom repeat-x";l.rows[0].cells[0].style.height="2px";for(var s in this.childActivities){if(!this.childActivities.hasOwnProperty(s))continue;i.DrawVLine(s);i.childActivities[s].Draw(i.childsContainer.rows[2].cells[s])}i.RefreshDelButton()};i.ActivityRemoveChild=i.RemoveChild;i.RemoveChild=function(e){var t,l;for(t=0;t<i.childActivities.length;t++){if(i.childActivities[t].Name==e.Name){i.ActivityRemoveChild(e);if(i.childsContainer){i.childsContainer.rows[0].deleteCell(t);i.childsContainer.rows[1].deleteCell(t);i.childsContainer.rows[2].deleteCell(t);i.childsContainer.rows[3].deleteCell(t);i.RefreshDelButton()}break}}};i.BizProcActivityRemoveResources=i.RemoveResources;i.RemoveResources=function(){i.BizProcActivityRemoveResources();if(i.container&&i.container.parentNode){i.container.parentNode.removeChild(i.container);i.container=null}};return i};