(function(e,i,t,s){"use strict";let a=e=>e,l,o,n,r,d,c,v,b;var h=babelHelpers.classPrivateFieldLooseKey("sequenceHeader");var p=babelHelpers.classPrivateFieldLooseKey("sequenceContent");var y=babelHelpers.classPrivateFieldLooseKey("sequenceFooter");var u=babelHelpers.classPrivateFieldLooseKey("init");var P=babelHelpers.classPrivateFieldLooseKey("draw");var f=babelHelpers.classPrivateFieldLooseKey("reDraw");var A=babelHelpers.classPrivateFieldLooseKey("onRemoveClick");var m=babelHelpers.classPrivateFieldLooseKey("removeResources");var w=babelHelpers.classPrivateFieldLooseKey("initDragNDropHandlers");var H=babelHelpers.classPrivateFieldLooseKey("onDragging");var L=babelHelpers.classPrivateFieldLooseKey("onDrop");var B=babelHelpers.classPrivateFieldLooseKey("renderTitle");var F=babelHelpers.classPrivateFieldLooseKey("renderContent");var T=babelHelpers.classPrivateFieldLooseKey("renderChildren");var g=babelHelpers.classPrivateFieldLooseKey("resolveIcon");var C=babelHelpers.classPrivateFieldLooseKey("removeChildActivity");var D=babelHelpers.classPrivateFieldLooseKey("openChildSetting");var S=babelHelpers.classPrivateFieldLooseKey("onClickChildRow");var E=babelHelpers.classPrivateFieldLooseKey("showSequence");var N=babelHelpers.classPrivateFieldLooseKey("hideRows");var _=babelHelpers.classPrivateFieldLooseKey("drawSequenceHeader");var z=babelHelpers.classPrivateFieldLooseKey("drawSequenceContent");var O=babelHelpers.classPrivateFieldLooseKey("drawSequenceFooter");var x=babelHelpers.classPrivateFieldLooseKey("hideSequence");var j=babelHelpers.classPrivateFieldLooseKey("showAddChildMenu");var M=babelHelpers.classPrivateFieldLooseKey("getChildMenuItems");var K=babelHelpers.classPrivateFieldLooseKey("addInitializeChild");var $=babelHelpers.classPrivateFieldLooseKey("addCommandChild");var k=babelHelpers.classPrivateFieldLooseKey("addDelayChild");var I=babelHelpers.classPrivateFieldLooseKey("addFinalizeChild");class R extends window.BizProcActivity{constructor(){super();Object.defineProperty(this,I,{value:ue});Object.defineProperty(this,k,{value:ye});Object.defineProperty(this,$,{value:pe});Object.defineProperty(this,K,{value:he});Object.defineProperty(this,M,{value:be});Object.defineProperty(this,j,{value:ve});Object.defineProperty(this,x,{value:ce});Object.defineProperty(this,O,{value:de});Object.defineProperty(this,z,{value:re});Object.defineProperty(this,_,{value:ne});Object.defineProperty(this,N,{value:oe});Object.defineProperty(this,E,{value:le});Object.defineProperty(this,S,{value:ae});Object.defineProperty(this,D,{value:se});Object.defineProperty(this,C,{value:te});Object.defineProperty(this,T,{value:ee});Object.defineProperty(this,F,{value:Z});Object.defineProperty(this,B,{value:V});Object.defineProperty(this,L,{value:Q});Object.defineProperty(this,H,{value:J});Object.defineProperty(this,w,{value:Y});Object.defineProperty(this,m,{value:G});Object.defineProperty(this,A,{value:U});Object.defineProperty(this,f,{value:X});Object.defineProperty(this,P,{value:W});Object.defineProperty(this,u,{value:q});this.lastDrop=false;this.main=null;this.commandTable=null;Object.defineProperty(this,h,{writable:true,value:null});Object.defineProperty(this,p,{writable:true,value:null});Object.defineProperty(this,y,{writable:true,value:null});this.Type="StateActivity";this.Draw=babelHelpers.classPrivateFieldLooseBase(this,P)[P].bind(this);this.OnRemoveClick=babelHelpers.classPrivateFieldLooseBase(this,A)[A].bind(this);this.RemoveResources=babelHelpers.classPrivateFieldLooseBase(this,m)[m].bind(this);this.InitStateActivity=this.Init;this.Init=babelHelpers.classPrivateFieldLooseBase(this,u)[u].bind(this);this.ondragging=babelHelpers.classPrivateFieldLooseBase(this,H)[H].bind(this);this.ondrop=babelHelpers.classPrivateFieldLooseBase(this,L)[L].bind(this);this.reDraw=babelHelpers.classPrivateFieldLooseBase(this,f)[f].bind(this);this.remove=e=>{const i=e.target;const t=i.parentNode.parentNode.parentNode.parentNode.parentNode;const s=t.id;babelHelpers.classPrivateFieldLooseBase(this,C)[C](t,s)};this.settings=e=>{const i=e.target;const t=i.parentNode.parentNode.parentNode.parentNode.parentNode.id;babelHelpers.classPrivateFieldLooseBase(this,D)[D](t)};this.clickrow=e=>{const i=e.target;const t=i.parentNode.parentNode.parentNode.parentNode.parentNode.id;babelHelpers.classPrivateFieldLooseBase(this,S)[S](t)};this.HideRows=babelHelpers.classPrivateFieldLooseBase(this,N)[N].bind(this);this.SequentialShow=babelHelpers.classPrivateFieldLooseBase(this,E)[E].bind(this);this.SequentialHide=babelHelpers.classPrivateFieldLooseBase(this,x)[x].bind(this);this.AddInitialize=babelHelpers.classPrivateFieldLooseBase(this,K)[K].bind(this);this.AddCommand=babelHelpers.classPrivateFieldLooseBase(this,$)[$].bind(this);this.AddDelayActivity=babelHelpers.classPrivateFieldLooseBase(this,k)[k].bind(this);this.AddFinilize=babelHelpers.classPrivateFieldLooseBase(this,I)[I].bind(this);this.ShowAddMenu=e=>{this.menu=new PopupMenu("state_float_menu");this.menu.create(2e3);const i=e.target;babelHelpers.classPrivateFieldLooseBase(this,j)[j](i)}}}function q(e){this.InitStateActivity(e);this.childActivities.forEach((e=>{if(e.Type==="EventDrivenActivity"){const i=e.childActivities[0];e.setActivated(i.Activated);i.setCanBeActivated(e.canBeActivated)}}))}function W(e){babelHelpers.classPrivateFieldLooseBase(this,w)[w]();this.main=i.Tag.render(l||(l=a`
			<table class="bizproc-designer-state-activity-table" cellpadding="0" cellspacing="0">
				<tbody>
					<tr id="${0}">
						<td style="height: 24px; white-space: nowrap;">
							${0}
						</td>
					</tr>
					<tr>
						<td>
							${0}
						</td>
					</tr>
				</tbody>
			</table>
		`),i.Text.encode(this.Name),babelHelpers.classPrivateFieldLooseBase(this,B)[B](),babelHelpers.classPrivateFieldLooseBase(this,F)[F]());i.Dom.append(this.main,e)}function X(){const e=this.main.parentNode;i.Dom.remove(this.main);this.main=null;this.commandTable=null;babelHelpers.classPrivateFieldLooseBase(this,P)[P](e)}function U(){this.parentActivity.RemoveChild(this)}function G(){window.DragNDrop.RemoveHandler("ondragging",this.h1id);window.DragNDrop.RemoveHandler("ondrop",this.h2id);i.Dom.remove(this.main);this.h1id=null;this.h2id=null;this.main=null;this.commandTable=null}function Y(){this.lastDrop=false;if(!this.h1id){this.h1id=window.DragNDrop.AddHandler("ondragging",babelHelpers.classPrivateFieldLooseBase(this,H)[H].bind(this));this.h2id=window.DragNDrop.AddHandler("ondrop",babelHelpers.classPrivateFieldLooseBase(this,L)[L].bind(this))}}function J(e,t,s){const a=this.main;const l=i.Dom.getPosition(a);if(l.left<t&&t<l.right&&l.top<s&&s<l.bottom){this.lastDrop=a;i.Dom.style(a,"opacity",".25");return}if(this.lastDrop){i.Dom.style(a,"opacity",null);this.lastDrop=false}}function Q(){if(this.lastDrop){i.Dom.style(this.lastDrop,"opacity",null);this.lastDrop=false;if(this!==window.DragNDrop.obj&&this.parentActivity.ReplaceChild){this.parentActivity.ReplaceChild(this,window.DragNDrop.obj)}}}function V(){const{root:e,title:t,setting:s,remove:l}=i.Tag.render(o||(o=a`
			<table 
				class="bizproc-designer-state-activity-title-table${0}"
				cellpadding="0"
				cellspacing="0"
			>
				<tbody>
					<tr>
						<td ref="title">
							<div
								class="bizproc-designer-state-activity-title"
								title="${0}"
							><b>${0}</b></div>
						</td>
						<td ref='setting' style="cursor: pointer;">
							<div class="ui-icon-set --settings-4 bizproc-designer-state-activity-title-icon"></div>
						</td>
						<td ref='remove' style="cursor: pointer;">
							<div class="ui-icon-set --cross-60 bizproc-designer-state-activity-title-icon"></div>
						</td>
					</tr>
				</tbody>
			</table>
		`),this.Activated==="N"?" --deactivated":"",i.Text.encode(this.Properties.Title),i.Text.encode(this.Properties.Title));i.Event.bind(t,"mousedown",(e=>{const t=window.DragNDrop.StartDrag(e,this);t.innerHTML=this.main.innerHTML;i.Dom.style(t,"width",`${this.main.offsetWidth}px`)}));i.Event.bind(s,"click",this.OnSettingsClick);i.Event.bind(l,"click",babelHelpers.classPrivateFieldLooseBase(this,A)[A].bind(this));return e}function Z(){const{root:e,add:t}=i.Tag.render(n||(n=a`
			<table 
				class="bizproc-designer-state-activity-children-table${0}"
				cellpadding="4"
				cellspacing="0"
			>
				<tbody>
					<tr>
						<td style="font-size: 12px; text-align: left; vertical-align: center">
							<a
								ref="add"
								href="javascript:void(0)"
								style="text-decoration: none"
							>
								<span>${0}</span>
								<div 
									class="ui-icon-set --chevron-down"
									style="--ui-icon-set__icon-color: #2067b0; --ui-icon-set__icon-size: 10px"
								></div>
							</a>
						</td>
					</tr>
					${0}
				</tbody>
			</table>
		`),this.Activated==="N"?" --deactivated":"",i.Text.encode(window.BPMESS.STATEACT_ADD),babelHelpers.classPrivateFieldLooseBase(this,T)[T]());i.Event.bind(t,"click",babelHelpers.classPrivateFieldLooseBase(this,j)[j].bind(this,t));this.commandTable=e;return e}function ee(){if(this.childActivities.length<=0){return[]}const e=[];this.childActivities.forEach((t=>{let s=t.Properties.Title;let l=t.Type==="StateFinalizationActivity"?"fin":"init";let o=!t.canBeActivated||t.Activated==="N"?" --deactivated":"";if(t.Type==="EventDrivenActivity"){const e=t.childActivities[0];s=e.Properties.Title;l=e.Type==="DelayActivity"?"delay":"cmd";o=!e.canBeActivated||e.Activated==="N"?" --deactivated":""}const{iconCode:n,iconSize:d,iconColor:c}=babelHelpers.classPrivateFieldLooseBase(this.constructor,g)[g](l);const{root:v,title:b,setting:h,remove:p}=i.Tag.render(r||(r=a`
				<tr id="${0}">
					<td class="bizproc-designer-state-activity-child${0}">
						<table style="font-size: 12px; width: 100%">
							<tbody>
								<tr>
									<td style="width: 17px">
										<div
											class="ui-icon-set --${0}"
											style="
												--ui-icon-set__icon-size: ${0};
												--ui-icon-set__icon-color: ${0}
											"
										></div>
									</td>
									<td ref="title" title="${0}">
										${0}
									</td>
									<td 
										ref="setting" 
										title="${0}"
										style="width: 14px"
									>
										<div 
											class="ui-icon-set --settings-4 bizproc-designer-state-activity-child-icon"
										></div>
									</td>
									<td
										ref="remove"
										title="${0}"
										style="width: 14px"
									>
										<div 
											class="ui-icon-set --cross-60 bizproc-designer-state-activity-child-icon"
										></div>
									</td>
								</tr>
							</tbody>
						</table>
					</td>
				</tr>
			`),i.Text.encode(t.Name),o,n,d,c,i.Text.encode(window.BPMESS.STATEACT_EDITBP),i.Text.encode(s),i.Text.encode(window.BPMESS.STATEACT_SETT),i.Text.encode(window.BPMESS.STATEACT_DEL));i.Event.bind(b,"click",babelHelpers.classPrivateFieldLooseBase(this,S)[S].bind(this,t.Name));i.Event.bind(h,"click",babelHelpers.classPrivateFieldLooseBase(this,D)[D].bind(this,t.Name));i.Event.bind(p,"click",babelHelpers.classPrivateFieldLooseBase(this,C)[C].bind(this,v,t.Name));e.push(v)}));return e}function ie(e){if(e==="delay"){return{iconCode:"hourglass-sandglass",iconSize:"17px",iconColor:"rgb(42, 177, 28)"}}if(e==="cmd"){return{iconCode:"forward",iconSize:"17px",iconColor:"rgb(176, 26, 109)"}}if(e==="fin"){return{iconCode:"statefin",iconSize:"12px",iconColor:"none"}}if(e==="init"){return{iconCode:"stateinit",iconSize:"12px",iconColor:"#1a92b7"}}return{}}function te(e,t){const s=this.findChildById(t);if(s){i.Dom.remove(e);this.RemoveChild(s);this.parentActivity.DrawLines()}}function se(e){let i=this.findChildById(e);if(i){if(i.Type==="EventDrivenActivity"){i=i.childActivities[0]}i.Settings()}}function ae(e){const i=this.findChildById(e);if(i){babelHelpers.classPrivateFieldLooseBase(this,E)[E](i)}}function le(e){window.rootActivity._redrawObject=e;i.Dom.style(this.parentActivity.Table,"display","none");babelHelpers.classPrivateFieldLooseBase(this,N)[N]();babelHelpers.classPrivateFieldLooseBase(this,_)[_](e);babelHelpers.classPrivateFieldLooseBase(this,z)[z](e);babelHelpers.classPrivateFieldLooseBase(this,O)[O]();if(document.getElementById("bizprocsavebuttons")){i.Dom.style(document.getElementById("bizprocsavebuttons"),"display","none")}scroll(0,0)}function oe(){for(let e=0;e<this.parentActivity.__l.length;e++){for(let t=0;t<5;t++){i.Dom.style(this.parentActivity.__l[e][t],"display","none")}}}function ne(e){const t=e.Type==="EventDrivenActivity"?e.childActivities[0].Properties.Title:e.Properties.Title;const{root:s,link:l}=i.Tag.render(d||(d=a`
			<div style="font-size: 12px">
				<a ref="link" href="javascript:void(0)">${0}</a>
				<span> - ${0}</span>
			</div>
		`),i.Text.encode(this.Properties.Title),i.Text.encode(t));i.Event.bind(l,"click",babelHelpers.classPrivateFieldLooseBase(this,x)[x].bind(this));babelHelpers.classPrivateFieldLooseBase(this,h)[h]=s;i.Dom.append(babelHelpers.classPrivateFieldLooseBase(this,h)[h],this.parentActivity.Table.parentNode)}function re(e){babelHelpers.classPrivateFieldLooseBase(this,p)[p]=i.Tag.render(c||(c=a`<div></div>`));i.Dom.append(babelHelpers.classPrivateFieldLooseBase(this,p)[p],this.parentActivity.Table.parentNode);e.Draw(babelHelpers.classPrivateFieldLooseBase(this,p)[p])}function de(){const e=new s.Button({text:window.BPMESS.STATEACT_BACK_1,size:s.Button.Size.EXTRA_SMALL,color:s.Button.Color.LIGHT_BORDER,noCaps:true,onclick:babelHelpers.classPrivateFieldLooseBase(this,x)[x].bind(this)});babelHelpers.classPrivateFieldLooseBase(this,y)[y]=i.Tag.render(v||(v=a`<div>${0}</div>`),e.render());i.Dom.style(e.getContainer(),"margin","15px");i.Dom.append(babelHelpers.classPrivateFieldLooseBase(this,y)[y],this.parentActivity.Table.parentNode)}function ce(){i.Dom.style(this.parentActivity.Table,"display","table");i.Dom.remove(babelHelpers.classPrivateFieldLooseBase(this,h)[h]);i.Dom.remove(babelHelpers.classPrivateFieldLooseBase(this,p)[p]);i.Dom.remove(babelHelpers.classPrivateFieldLooseBase(this,y)[y]);babelHelpers.classPrivateFieldLooseBase(this,h)[h]=null;babelHelpers.classPrivateFieldLooseBase(this,p)[p]=null;babelHelpers.classPrivateFieldLooseBase(this,y)[y]=null;if(document.getElementById("bizprocsavebuttons")){i.Dom.style(document.getElementById("bizprocsavebuttons"),"display","block")}window.rootActivity._redrawObject=null;window.arWorkflowTemplate=window.rootActivity.Serialize();window.ReDraw()}function ve(e){const s=()=>{new t.Menu({bindElement:e,id:`state_float_menu-${i.Text.getRandom()}`,minWidth:277,autoHide:true,zIndexOptions:{alwaysOnTop:true},cacheable:false,items:babelHelpers.classPrivateFieldLooseBase(this,M)[M]()}).show()};if(!i.Reflection.getClass("BX.Main.Menu")){i.Runtime.loadExtension("main.popup").then((()=>s())).catch((()=>{}));return}s()}function be(){const e=(e,t)=>{const{iconCode:s,iconColor:l}=babelHelpers.classPrivateFieldLooseBase(this.constructor,g)[g](e);return i.Tag.render(b||(b=a`
				<div style="display: inline-flex; align-items: center">
					<span 
						class="ui-icon-set --${0}"
						style="
							--ui-icon-set__icon-size: 17px;
							--ui-icon-set__icon-color: ${0};
							margin-right: 5px;
						"
					></span>
					<span>${0}</span>
				</div>
			`),s,l,i.Text.encode(t))};const t=[{id:"2",html:e("cmd",window.BPMESS.STATEACT_MENU_COMMAND),onclick:(e,i)=>{i.getMenuWindow().close();babelHelpers.classPrivateFieldLooseBase(this,$)[$]();babelHelpers.classPrivateFieldLooseBase(this,f)[f]()}},{id:"3",html:e("delay",window.BPMESS.STATEACT_MENU_DELAY),onclick:(e,i)=>{i.getMenuWindow().close();babelHelpers.classPrivateFieldLooseBase(this,k)[k]();babelHelpers.classPrivateFieldLooseBase(this,f)[f]()}}];let s=false;let l=false;this.childActivities.forEach((e=>{if(e.Type==="StateInitializationActivity"){s=true}if(e.Type==="StateFinalizationActivity"){l=true}}));if(!s){t.push({id:"1",html:e("init",window.BPMESS.STATEACT_MENU_INIT_1),onclick:(e,i)=>{i.getMenuWindow().close();babelHelpers.classPrivateFieldLooseBase(this,K)[K]();babelHelpers.classPrivateFieldLooseBase(this,f)[f]()}})}if(!l){t.push({id:"5",html:e("fin",window.BPMESS.STATEACT_MENU_FIN_1),onclick:(e,i)=>{i.getMenuWindow().close();babelHelpers.classPrivateFieldLooseBase(this,I)[I]();babelHelpers.classPrivateFieldLooseBase(this,f)[f]()}})}return t}function he(){const e=this.commandTable.insertRow(1);const i=e.insertCell(-1);i.innerHTML="";const t=window.CreateActivity("StateInitializationActivity");this.childActivities.push(t);t.parentActivity=this;t.setCanBeActivated(this.getCanBeActivatedChild());babelHelpers.classPrivateFieldLooseBase(this,E)[E](t)}function pe(){const e=window.CreateActivity("EventDrivenActivity");const i=window.CreateActivity("HandleExternalEventActivity");e.childActivities.push(i);i.parentActivity=e;const t=this.commandTable.insertRow(1);const s=t.insertCell(-1);s.innerHTML="";this.childActivities.push(e);e.parentActivity=this;e.setCanBeActivated(this.getCanBeActivatedChild());i.Settings()}function ye(){const e=window.CreateActivity("EventDrivenActivity");const i=window.CreateActivity("DelayActivity");e.childActivities.push(i);i.parentActivity=e;const t=this.commandTable.insertRow(1);const s=t.insertCell(-1);s.innerHTML="";this.childActivities.push(e);e.parentActivity=this;e.setCanBeActivated(this.getCanBeActivatedChild());i.Settings()}function ue(){const e=this.commandTable.insertRow(1);const i=e.insertCell(-1);i.innerHTML="";const t=window.CreateActivity("StateFinalizationActivity");this.childActivities.push(t);t.parentActivity=this;t.setCanBeActivated(this.getCanBeActivatedChild());babelHelpers.classPrivateFieldLooseBase(this,E)[E](t)}Object.defineProperty(R,g,{value:ie});window.__StateActivityAdd=function(e,i){const t=window.rootActivity.childActivities.find((e=>e.Name===i));if(t){switch(e){case"init":t.AddInitialize();break;case"command":t.AddCommand();break;case"delay":t.AddDelayActivity();break;case"finish":t.AddFinilize();break;default:}if(BX.Type.isFunction(t.reDraw)){t.reDraw()}}};e.StateActivity=R})(this.window=this.window||{},BX,BX.Main,BX.UI);
//# sourceMappingURL=stateactivity.map.js