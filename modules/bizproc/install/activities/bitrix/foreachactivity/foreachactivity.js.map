{"version":3,"file":"foreachactivity.js","sources":["src/index.js"],"sourcesContent":["import { Dom, Tag, Text, Event } from 'main.core';\n\nconst BizProcActivity = window.BizProcActivity;\n\nexport class ForEachActivity extends BizProcActivity\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis.Type = 'ForEachActivity';\n\n\t\t// compatibility\n\t\tthis.BizProcActivityDraw = this.Draw.bind(this);\n\t\tthis.Draw = this.#draw.bind(this);\n\t\tthis.CheckFields = () => true;\n\t\tthis.OnHideClick = this.#onHideClick.bind(this);\n\t}\n\n\t#draw(wrapper)\n\t{\n\t\tif (this.childActivities.length === 0)\n\t\t{\n\t\t\tthis.childActivities = [new window.SequenceActivity()];\n\t\t\tthis.childActivities[0].parentActivity = this;\n\t\t}\n\n\t\tthis.container = Tag.render`<div class=\"parallelcontainer\"></div`;\n\t\tDom.append(this.container, wrapper);\n\t\tthis.BizProcActivityDraw(this.container);\n\t\tthis.activityContent = null;\n\n\t\tDom.style(this.div, { position: 'relative', top: '12px' });\n\n\t\tthis.hideContainer = Tag.render`\n\t\t\t<div \n\t\t\t\tstyle=\"\n\t\t\t\t\tbackground: #fff;\n\t\t\t\t\tborder: 1px #CCCCCC dashed;\n\t\t\t\t\twidth: 250px;\n\t\t\t\t\tcolor: #aaa;\n\t\t\t\t\tpadding: 13px 0 3px 0;\n\t\t\t\t\tcursor: pointer;\n\t\t\t\t\"\n\t\t\t>${Text.encode(window.BPMESS.PARA_MIN)}</div>\n\t\t`;\n\t\tEvent.bind(this.hideContainer, 'click', this.OnHideClick.bind(this));\n\t\tDom.append(this.hideContainer, this.container);\n\n\t\tthis.childsContainer = Tag.render`\n\t\t\t<table id=\"${Text.encode(this.Name)}\" width=\"100%\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\">\n\t\t\t\t<tbody>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td align=\"center\" valign=\"center\" width=\"15%\"></td>\n\t\t\t\t\t\t<td align=\"center\" valign=\"center\" width=\"70%\" style=\"border: 2px #dfdfdf dashed; padding: 10px\"></td>\n\t\t\t\t\t\t<td align=\"center\" valign=\"center\" width=\"15%\"></td>\n\t\t\t\t\t</tr>\n\t\t\t\t</tbody>\n\t\t\t</table>\n\t\t`;\n\t\tDom.append(this.childsContainer, this.container);\n\n\t\t// eslint-disable-next-line no-underscore-dangle\n\t\tif (this.Properties._DesMinimized === 'Y')\n\t\t{\n\t\t\tDom.hide(this.childsContainer);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.hide(this.hideContainer);\n\t\t}\n\n\t\tthis.childActivities[0].Draw(this.childsContainer.rows[0].cells[1]);\n\t}\n\n\t#onHideClick()\n\t{\n\t\t// eslint-disable-next-line no-underscore-dangle, @bitrix24/bitrix24-rules/no-pseudo-private\n\t\tthis.Properties._DesMinimized = this.Properties._DesMinimized === 'Y' ? 'N' : 'Y';\n\t\tDom.toggle(this.childsContainer);\n\t\tDom.toggle(this.hideContainer);\n\t}\n}\n"],"names":["BizProcActivity","window","ForEachActivity","constructor","Type","BizProcActivityDraw","Draw","bind","CheckFields","OnHideClick","wrapper","childActivities","length","SequenceActivity","parentActivity","container","Tag","render","Dom","append","activityContent","style","div","position","top","hideContainer","Text","encode","BPMESS","PARA_MIN","Event","childsContainer","Name","Properties","_DesMinimized","hide","rows","cells","toggle"],"mappings":";;;;;;;;AAAA,CAEA,MAAMA,eAAe,GAAGC,MAAM,CAACD,eAAe;CAAC;CAAA;AAE/C,CAAO,MAAME,eAAe,SAASF,eAAe,CACpD;GACCG,WAAW,GACX;KACC,KAAK,EAAE;KAAC;OAAA;;KAAA;OAAA;;KACR,IAAI,CAACC,IAAI,GAAG,iBAAiB;;;KAG7B,IAAI,CAACC,mBAAmB,GAAG,IAAI,CAACC,IAAI,CAACC,IAAI,CAAC,IAAI,CAAC;KAC/C,IAAI,CAACD,IAAI,GAAG,4CAAI,gBAAOC,IAAI,CAAC,IAAI,CAAC;KACjC,IAAI,CAACC,WAAW,GAAG,MAAM,IAAI;KAC7B,IAAI,CAACC,WAAW,GAAG,4CAAI,8BAAcF,IAAI,CAAC,IAAI,CAAC;;CAkEjD;CAAC,gBA/DMG,OAAO,EACb;GACC,IAAI,IAAI,CAACC,eAAe,CAACC,MAAM,KAAK,CAAC,EACrC;KACC,IAAI,CAACD,eAAe,GAAG,CAAC,IAAIV,MAAM,CAACY,gBAAgB,EAAE,CAAC;KACtD,IAAI,CAACF,eAAe,CAAC,CAAC,CAAC,CAACG,cAAc,GAAG,IAAI;;GAG9C,IAAI,CAACC,SAAS,GAAGC,aAAG,CAACC,MAAM,cAAC,sCAAoC,EAAC;GACjEC,aAAG,CAACC,MAAM,CAAC,IAAI,CAACJ,SAAS,EAAEL,OAAO,CAAC;GACnC,IAAI,CAACL,mBAAmB,CAAC,IAAI,CAACU,SAAS,CAAC;GACxC,IAAI,CAACK,eAAe,GAAG,IAAI;GAE3BF,aAAG,CAACG,KAAK,CAAC,IAAI,CAACC,GAAG,EAAE;KAAEC,QAAQ,EAAE,UAAU;KAAEC,GAAG,EAAE;IAAQ,CAAC;GAE1D,IAAI,CAACC,aAAa,GAAGT,aAAG,CAACC,MAAM,gBAAC;;;;;;;;;;MAU9B,CAAsC;GACxC,GADIS,cAAI,CAACC,MAAM,CAAC1B,MAAM,CAAC2B,MAAM,CAACC,QAAQ,CAAC,CACtC;GACDC,eAAK,CAACvB,IAAI,CAAC,IAAI,CAACkB,aAAa,EAAE,OAAO,EAAE,IAAI,CAAChB,WAAW,CAACF,IAAI,CAAC,IAAI,CAAC,CAAC;GACpEW,aAAG,CAACC,MAAM,CAAC,IAAI,CAACM,aAAa,EAAE,IAAI,CAACV,SAAS,CAAC;GAE9C,IAAI,CAACgB,eAAe,GAAGf,aAAG,CAACC,MAAM,gBAAC;gBACtB,CAAyB;;;;;;;;;GASrC,GATcS,cAAI,CAACC,MAAM,CAAC,IAAI,CAACK,IAAI,CAAC,CASnC;GACDd,aAAG,CAACC,MAAM,CAAC,IAAI,CAACY,eAAe,EAAE,IAAI,CAAChB,SAAS,CAAC;;;GAGhD,IAAI,IAAI,CAACkB,UAAU,CAACC,aAAa,KAAK,GAAG,EACzC;KACChB,aAAG,CAACiB,IAAI,CAAC,IAAI,CAACJ,eAAe,CAAC;IAC9B,MAED;KACCb,aAAG,CAACiB,IAAI,CAAC,IAAI,CAACV,aAAa,CAAC;;GAG7B,IAAI,CAACd,eAAe,CAAC,CAAC,CAAC,CAACL,IAAI,CAAC,IAAI,CAACyB,eAAe,CAACK,IAAI,CAAC,CAAC,CAAC,CAACC,KAAK,CAAC,CAAC,CAAC,CAAC;CACpE;CAAC,yBAGD;;GAEC,IAAI,CAACJ,UAAU,CAACC,aAAa,GAAG,IAAI,CAACD,UAAU,CAACC,aAAa,KAAK,GAAG,GAAG,GAAG,GAAG,GAAG;GACjFhB,aAAG,CAACoB,MAAM,CAAC,IAAI,CAACP,eAAe,CAAC;GAChCb,aAAG,CAACoB,MAAM,CAAC,IAAI,CAACb,aAAa,CAAC;CAC/B;;;;;;;;"}