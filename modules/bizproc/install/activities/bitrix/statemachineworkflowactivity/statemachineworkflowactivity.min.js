(function(e,t,s){"use strict";let i=e=>e,l,o,a,r,c,n,b;var d=babelHelpers.classPrivateFieldLooseKey("SPACE_BETWEEN_STATE_TITLE_AND_STATE_CHILD");var h=babelHelpers.classPrivateFieldLooseKey("CHILD_ACTIVITY_BORDER");var p=babelHelpers.classPrivateFieldLooseKey("ARROW_SIZE");var v=babelHelpers.classPrivateFieldLooseKey("ARROW_HALF_SIZE");var u=babelHelpers.classPrivateFieldLooseKey("ARROW_QUARTER_SIZE");var P=babelHelpers.classPrivateFieldLooseKey("ARROW_ONE_EIGHTH_SIZE");var f=babelHelpers.classPrivateFieldLooseKey("tableLeftPosition");var L=babelHelpers.classPrivateFieldLooseKey("tableRightPosition");var F=babelHelpers.classPrivateFieldLooseKey("linesCenter");var H=babelHelpers.classPrivateFieldLooseKey("linesLeft");var y=babelHelpers.classPrivateFieldLooseKey("linesRight");var B=babelHelpers.classPrivateFieldLooseKey("serialize");var g=babelHelpers.classPrivateFieldLooseKey("removeChild");var m=babelHelpers.classPrivateFieldLooseKey("replaceChild");var w=babelHelpers.classPrivateFieldLooseKey("removeResources");var x=babelHelpers.classPrivateFieldLooseKey("paintWholeLine");var $=babelHelpers.classPrivateFieldLooseKey("drawAllLines");var T=babelHelpers.classPrivateFieldLooseKey("removeAllLines");var A=babelHelpers.classPrivateFieldLooseKey("findTargetStateNames");var O=babelHelpers.classPrivateFieldLooseKey("drawLine");var D=babelHelpers.classPrivateFieldLooseKey("disposeLine");var S=babelHelpers.classPrivateFieldLooseKey("disposeLinesFromRightToLeft");var R=babelHelpers.classPrivateFieldLooseKey("disposeLinesFromLeftToLeftColumn2");var M=babelHelpers.classPrivateFieldLooseKey("disposeLinesFromLeftToLeftColumn1");var j=babelHelpers.classPrivateFieldLooseKey("disposeLinesFromLeftToRight");var K=babelHelpers.classPrivateFieldLooseKey("disposeArrowRightOut");var E=babelHelpers.classPrivateFieldLooseKey("disposeArrowRightIn");var _=babelHelpers.classPrivateFieldLooseKey("disposeArrowLeftOut");var I=babelHelpers.classPrivateFieldLooseKey("disposeArrowLeftIn");var z=babelHelpers.classPrivateFieldLooseKey("draw");var C=babelHelpers.classPrivateFieldLooseKey("renderAddNewStateButton");var k=babelHelpers.classPrivateFieldLooseKey("addNewState");var N=babelHelpers.classPrivateFieldLooseKey("reCheckLineStatuses");class W extends window.BizProcActivity{constructor(){super();Object.defineProperty(this,N,{value:he});Object.defineProperty(this,k,{value:de});Object.defineProperty(this,C,{value:be});Object.defineProperty(this,z,{value:ne});Object.defineProperty(this,I,{value:ce});Object.defineProperty(this,_,{value:re});Object.defineProperty(this,E,{value:ae});Object.defineProperty(this,K,{value:oe});Object.defineProperty(this,j,{value:le});Object.defineProperty(this,M,{value:ie});Object.defineProperty(this,R,{value:se});Object.defineProperty(this,S,{value:te});Object.defineProperty(this,D,{value:ee});Object.defineProperty(this,O,{value:J});Object.defineProperty(this,A,{value:q});Object.defineProperty(this,T,{value:Y});Object.defineProperty(this,$,{value:V});Object.defineProperty(this,x,{value:Q});Object.defineProperty(this,w,{value:X});Object.defineProperty(this,m,{value:U});Object.defineProperty(this,g,{value:Z});Object.defineProperty(this,B,{value:G});this.Table=null;Object.defineProperty(this,f,{writable:true,value:null});Object.defineProperty(this,L,{writable:true,value:null});this.__l=[];this.StatusArrows=[];Object.defineProperty(this,F,{writable:true,value:0});Object.defineProperty(this,H,{writable:true,value:0});Object.defineProperty(this,y,{writable:true,value:0});this.classname="StateMachineWorkflowActivity";this.SerializeStateMachineWorkflowActivity=this.Serialize;this.Serialize=babelHelpers.classPrivateFieldLooseBase(this,B)[B].bind(this);this.LineMouseOver=e=>{babelHelpers.classPrivateFieldLooseBase(this,x)[x](e.target.id,"#e00","over")};this.LineMouseOut=e=>{babelHelpers.classPrivateFieldLooseBase(this,x)[x](e.target.id,"rgb(192, 193, 195)","out")};this.DrawLines=babelHelpers.classPrivateFieldLooseBase(this,$)[$].bind(this);this.FindSetState=babelHelpers.classPrivateFieldLooseBase(this,A)[A].bind(this);this.Draw=babelHelpers.classPrivateFieldLooseBase(this,z)[z].bind(this);this.AddStatus=babelHelpers.classPrivateFieldLooseBase(this,k)[k].bind(this);this.ReCheckPosition=babelHelpers.classPrivateFieldLooseBase(this,N)[N].bind(this);this.RemoveChildStateMachine=this.RemoveChild;this.RemoveChild=babelHelpers.classPrivateFieldLooseBase(this,g)[g].bind(this);this.ReplaceChild=babelHelpers.classPrivateFieldLooseBase(this,m)[m].bind(this);this.RemoveResourcesActivity=this.RemoveResources;this.RemoveResources=babelHelpers.classPrivateFieldLooseBase(this,w)[w].bind(this)}}function G(){if(this.childActivities.length>0){this.Properties.InitialStateName=this.childActivities[0].Name}return this.SerializeStateMachineWorkflowActivity()}function Z(e){this.RemoveChildStateMachine(e);t.Dom.remove(this.Table);this.Table=null;babelHelpers.classPrivateFieldLooseBase(this,f)[f]=null;babelHelpers.classPrivateFieldLooseBase(this,L)[L]=null;babelHelpers.classPrivateFieldLooseBase(this,z)[z](this.statediv)}function U(e,t){const s=this.childActivities.indexOf(e);const i=this.childActivities.indexOf(t);if(s<0||i<0){return}this.childActivities[s]=t;this.childActivities[i]=e;window.BPTemplateIsModified=true;babelHelpers.classPrivateFieldLooseBase(this,w)[w]();babelHelpers.classPrivateFieldLooseBase(this,z)[z](this.statediv)}function X(){this.RemoveResourcesActivity();if(this.Table){t.Dom.remove(this.Table);this.Table=null}babelHelpers.classPrivateFieldLooseBase(this,f)[f]=null;babelHelpers.classPrivateFieldLooseBase(this,L)[L]=null;babelHelpers.classPrivateFieldLooseBase(this,T)[T]()}function Q(e,s,i){const l=e.slice(0,Math.max(0,e.length-2));for(let e=1;e<=3;e++){const o=document.getElementById(`${l}.${e}`);const a=t.Text.toInteger(t.Dom.style(o,"zIndex"))+(i==="over"?1e3:-1e3);t.Dom.style(o,{zIndex:a,backgroundColor:s})}}function V(){babelHelpers.classPrivateFieldLooseBase(this,T)[T]();babelHelpers.classPrivateFieldLooseBase(this,A)[A](false,this);for(const[e,t]of this.StatusArrows.entries()){const s=window.ActGetRealPos(document.getElementById(t[0]));const i=window.ActGetRealPos(document.getElementById(t[1]));if(s===false||i===false||s.left<=0||i.left<=0){continue}const{d0:l,d1:o,d2:a,d3:r,d4:c}=babelHelpers.classPrivateFieldLooseBase(this,O)[O](e,t);s.right+=babelHelpers.classPrivateFieldLooseBase(this.constructor,d)[d];s.left-=babelHelpers.classPrivateFieldLooseBase(this.constructor,d)[d];babelHelpers.classPrivateFieldLooseBase(this,D)[D]([l,o,a,r,c],s,i,t[0]);this.__l.push([l,o,a,r,c])}}function Y(){this.__l.forEach((e=>e.forEach((e=>t.Dom.remove(e)))));this.__l=[];this.StatusArrows=[];babelHelpers.classPrivateFieldLooseBase(this,F)[F]=0;babelHelpers.classPrivateFieldLooseBase(this,H)[H]=0;babelHelpers.classPrivateFieldLooseBase(this,y)[y]=0}function q(e,t){if(t.Type==="SetStateActivity"){if(Object.hasOwn(t.Properties,"TargetStateName")){this.StatusArrows.push([e,t.Properties.TargetStateName])}return}t.childActivities.forEach((s=>{babelHelpers.classPrivateFieldLooseBase(this,A)[A](t.Type==="StateActivity"?s.Name:e,s)}))}function J(e,s){const{root:o,d0:a,d4:r,d1:c,d2:n,d3:b}=t.Tag.render(l||(l=i`
			<div>
				<div 
					ref="d0"
					class="bizproc-designer-state-machine-workflow-activity-arrow-wrapper"
					style="z-index: ${0};"
				></div>
				<div
					ref="d4"
					class="bizproc-designer-state-machine-workflow-activity-arrow-wrapper"
					style="z-index: ${0};"
				></div>
				<div 
					ref="d1"
					id="${0}"
					class="bizproc-designer-state-machine-workflow-activity-horizontal-line"
					style="z-index: ${0};"
				></div>
				<div 
					ref="d2"
					id="${0}"
					class="bizproc-designer-state-machine-workflow-activity-vertical-line"
					style="z-index: ${0};"
				></div>
				<div 
					ref="d3"
					id="${0}"
					class="bizproc-designer-state-machine-workflow-activity-horizontal-line"
					style="z-index: ${0};"
				></div>
			</div>
		`),14+e*10,14+e*10,`${s[0]}-${s[1]}.1`,15+e*10,`${s[0]}-${s[1]}.2`,15+e*10,`${s[0]}-${s[1]}.3`,15+e*10);t.Event.bind(c,"mouseover",this.LineMouseOver);t.Event.bind(c,"mouseout",this.LineMouseOut);t.Event.bind(n,"mouseover",this.LineMouseOver);t.Event.bind(n,"mouseout",this.LineMouseOut);t.Event.bind(b,"mouseover",this.LineMouseOver);t.Event.bind(b,"mouseout",this.LineMouseOut);t.Dom.append(o,this.Table.parentNode);return{d0:a,d4:r,d1:c,d2:n,d3:b}}function ee(e,s,i,l){if(t.Text.toInteger(s.right)<t.Text.toInteger(i.left)){babelHelpers.classPrivateFieldLooseBase(this,S)[S](e,s,i)}else if(t.Text.toInteger(s.left)===t.Text.toInteger(i.left)){const o=document.getElementById(l).closest("[data-column]");if(o&&t.Dom.attr(o,"data-column")===2){babelHelpers.classPrivateFieldLooseBase(this,R)[R](e,s,i)}else{babelHelpers.classPrivateFieldLooseBase(this,M)[M](e,s,i)}}else{babelHelpers.classPrivateFieldLooseBase(this,j)[j](e,s,i)}}function te(e,s,i){++babelHelpers.classPrivateFieldLooseBase(this,F)[F];const l=-50+babelHelpers.classPrivateFieldLooseBase(this,F)[F]%6*6;const o=i.left-s.right;const a=-1;const[r,c,n,b,d]=e;const p=s.top+Math.floor(s.height/4);const P=i.top+Math.floor(i.height/4);const f=o/2+l;const L=2;const H=s.right+f;t.Dom.style(c,{top:`${p}px`,left:`${s.right+babelHelpers.classPrivateFieldLooseBase(this.constructor,h)[h]+1}px`,width:`${f}px`});t.Dom.style(n,{top:s.top>i.top?`${P+7}px`:`${p}px`,left:`${H}px`,height:`${s.top>i.top?s.top-i.top+L*2-9:i.top-s.top+L*2+1}px`});t.Dom.style(b,{top:`${i.top+Math.floor((i.bottom-i.top)/2)}px`,left:`${H}px`,width:`${o/2+a*l+babelHelpers.classPrivateFieldLooseBase(this.constructor,h)[h]*2+2}px`});babelHelpers.classPrivateFieldLooseBase(this,K)[K](r,s.right-babelHelpers.classPrivateFieldLooseBase(this.constructor,v)[v]+babelHelpers.classPrivateFieldLooseBase(this.constructor,h)[h]+1,p-babelHelpers.classPrivateFieldLooseBase(this.constructor,u)[u]);babelHelpers.classPrivateFieldLooseBase(this,E)[E](d,i.left-babelHelpers.classPrivateFieldLooseBase(this.constructor,v)[v]+babelHelpers.classPrivateFieldLooseBase(this.constructor,h)[h]*2,i.top+Math.floor(i.height/2)-babelHelpers.classPrivateFieldLooseBase(this.constructor,u)[u])}function se(e,s,i){++babelHelpers.classPrivateFieldLooseBase(this,y)[y];const l=-50+babelHelpers.classPrivateFieldLooseBase(this,y)[y]%10*10;const o=150;const[a,r,c,n,b]=e;const d=s.top+Math.floor(s.height/4);const p=i.top+Math.floor(i.height/4);const P=o/2+l;const f=2;t.Dom.style(r,{top:`${d}px`,left:`${s.right+babelHelpers.classPrivateFieldLooseBase(this.constructor,h)[h]*2+2}px`,width:`${P-2}px`});t.Dom.style(c,{top:s.top>i.top?`${p+7}px`:`${d+2}px`,left:`${s.right+P}px`,height:`${s.top>i.top?s.top-i.top-f*2:i.top-s.top-f*2+7}px`});t.Dom.style(n,{top:`${i.top+Math.floor((i.bottom-i.top)/2)-1}px`,left:`${i.right-babelHelpers.classPrivateFieldLooseBase(this.constructor,h)[h]*2-2}px`,width:`${P+6}px`});babelHelpers.classPrivateFieldLooseBase(this,K)[K](a,s.right-babelHelpers.classPrivateFieldLooseBase(this.constructor,v)[v]+babelHelpers.classPrivateFieldLooseBase(this.constructor,h)[h]*2,d-babelHelpers.classPrivateFieldLooseBase(this.constructor,u)[u]);babelHelpers.classPrivateFieldLooseBase(this,I)[I](b,i.right-babelHelpers.classPrivateFieldLooseBase(this.constructor,u)[u]+babelHelpers.classPrivateFieldLooseBase(this.constructor,h)[h]*2+1,i.top+Math.floor(i.height/2)-babelHelpers.classPrivateFieldLooseBase(this.constructor,u)[u])}function ie(e,s,i){++babelHelpers.classPrivateFieldLooseBase(this,H)[H];const l=-50+babelHelpers.classPrivateFieldLooseBase(this,H)[H]%10*10;const o=150;const[a,r,c,n,b]=e;const d=s.top+Math.floor(s.height/4);const p=i.top+Math.floor(i.height/4);const P=o/2-l;const f=2;t.Dom.style(r,{top:`${d}px`,left:`${s.left-P-babelHelpers.classPrivateFieldLooseBase(this.constructor,h)[h]-2}px`,width:`${P}px`});t.Dom.style(c,{top:s.top>i.top?`${p+7}px`:`${d+2}px`,left:`${s.left-o/2+l-3}px`,height:`${s.top>i.top?s.top-i.top-f*2:i.top-s.top-f*2+7}px`});t.Dom.style(n,{top:`${i.top+Math.floor((i.bottom-i.top)/2)}px`,left:`${s.left-o/2+l-1}px`,width:`${P+3}px`});babelHelpers.classPrivateFieldLooseBase(this,_)[_](a,s.left-babelHelpers.classPrivateFieldLooseBase(this.constructor,v)[v]-babelHelpers.classPrivateFieldLooseBase(this.constructor,h)[h]*2,d-babelHelpers.classPrivateFieldLooseBase(this.constructor,u)[u]);babelHelpers.classPrivateFieldLooseBase(this,E)[E](b,i.left-babelHelpers.classPrivateFieldLooseBase(this.constructor,v)[v]+babelHelpers.classPrivateFieldLooseBase(this.constructor,h)[h]*2,i.top+Math.floor(i.height/2)-babelHelpers.classPrivateFieldLooseBase(this.constructor,u)[u])}function le(e,s,i){++babelHelpers.classPrivateFieldLooseBase(this,F)[F];const l=-50+babelHelpers.classPrivateFieldLooseBase(this,F)[F]%6*6;const o=s.left-i.right;const a=-1;const[r,c,n,b,d]=e;const p=s.top+Math.floor(s.height/4);const P=i.top+Math.floor(i.height/4);const f=o/2+l;const L=2;t.Dom.style(c,{top:`${p}px`,left:`${s.left-f-babelHelpers.classPrivateFieldLooseBase(this.constructor,h)[h]-1}px`,width:`${f}px`});t.Dom.style(n,{top:s.top>i.top?`${P+7}px`:`${p+2}px`,left:`${i.right+o/2-l-babelHelpers.classPrivateFieldLooseBase(this.constructor,h)[h]*2}px`,height:`${s.top>i.top?s.top-i.top-L*2:i.top-s.top-L*2+7}px`});t.Dom.style(b,{top:`${i.top+Math.floor((i.bottom-i.top)/2)}px`,left:`${i.right-babelHelpers.classPrivateFieldLooseBase(this.constructor,h)[h]*2-2}px`,width:`${o/2+a*l+2}px`});babelHelpers.classPrivateFieldLooseBase(this,_)[_](r,s.left-babelHelpers.classPrivateFieldLooseBase(this.constructor,v)[v]-babelHelpers.classPrivateFieldLooseBase(this.constructor,h)[h]*2,p-babelHelpers.classPrivateFieldLooseBase(this.constructor,u)[u]);babelHelpers.classPrivateFieldLooseBase(this,I)[I](d,i.right-babelHelpers.classPrivateFieldLooseBase(this.constructor,u)[u]+babelHelpers.classPrivateFieldLooseBase(this.constructor,h)[h]*2+1,i.top+Math.floor(i.height/2)-babelHelpers.classPrivateFieldLooseBase(this.constructor,u)[u])}function oe(e,s,l){const a=t.Tag.render(o||(o=i`
			<div class="ui-icon-set --chevron-right bizproc-designer-state-machine-workflow-activity-arrow"></div>
		`));t.Dom.append(a,e);t.Dom.style(e,{left:`${s}px`,top:`${l}px`})}function ae(e,s,l){const o=t.Tag.render(a||(a=i`
			<div class="ui-icon-set --chevron-right bizproc-designer-state-machine-workflow-activity-arrow"></div>
		`));t.Dom.append(o,e);t.Dom.style(e,{left:`${s}px`,top:`${l}px`,backgroundColor:"white",maxWidth:"9px"})}function re(e,s,l){const o=t.Tag.render(r||(r=i`
			<div class="ui-icon-set --chevron-left bizproc-designer-state-machine-workflow-activity-arrow"></div>
		`));t.Dom.append(o,e);t.Dom.style(e,{left:`${s}px`,top:`${l}px`,maxWidth:"12px"})}function ce(e,s,l){const o=t.Tag.render(c||(c=i`
			<div 
				class="ui-icon-set --chevron-left bizproc-designer-state-machine-workflow-activity-arrow"
				style="margin-left: -10px"
			></div>
		`));t.Dom.append(o,e);t.Dom.style(e,{left:`${s}px`,top:`${l}px`,backgroundColor:"white"})}function ne(e){this.statediv=e;const s=Array.from({length:this.childActivities.length},(()=>t.Tag.render(n||(n=i`
				<tr>
					<td align="right" valign="center" data-column="1"></td>
					<td align="center" valign="center"></td>
					<td align="left" valign="center" data-column="2"></td>
				</tr>
			`))));const l=this.childActivities.length%2*2;this.Table=t.Tag.render(b||(b=i`
			<table cellpadding="0" cellspacing="0" border="0" style="width: 100%;">
				<tbody>
					${0}
					<tr>
						<td align="right" valign="center" width="350px">
							${0}
						</td>
						<td align="center" valign="center" width="150px"></td>
						<td align="left" valign="center">
							${0}
						</td>
					</tr>
				</tbody>
			</table>
		`),s,l===0?babelHelpers.classPrivateFieldLooseBase(this,C)[C]():"&nbsp",l===2?babelHelpers.classPrivateFieldLooseBase(this,C)[C]():"&nbsp");t.Dom.append(this.Table,e);this.childActivities.forEach(((e,t)=>e.Draw(this.Table.rows[t].cells[t%2*2])));babelHelpers.classPrivateFieldLooseBase(this,N)[N](true)}function be(){return new s.Button({text:window.BPMESS.STM_ADD_STATUS_1,size:s.Button.Size.EXTRA_SMALL,color:s.Button.Color.LIGHT_BORDER,noCaps:true,onclick:(e,t)=>{babelHelpers.classPrivateFieldLooseBase(this,k)[k](t,e)}}).render()}function de(e,i){e.preventDefault();const l=this.childActivities.length;const o=window.CreateActivity("StateActivity");this.childActivities.push(o);o.parentActivity=this;o.Draw(this.Table.rows[l].cells[l%2*2]);const a=this.Table.insertRow(-1);a.insertCell(-1).align="right";a.insertCell(-1).align="center";a.insertCell(-1).align="left";if(i instanceof s.Button){i.renderTo(this.Table.rows[l+1].cells[(l+1)%2*2])}else{t.Dom.append(e.target,this.Table.rows[l+1].cells[(l+1)%2*2])}o.Settings()}function he(e){if(t.Dom.style(this.Table,"display")==="none"){return}const s=t.Dom.getPosition(this.Table);if(e||babelHelpers.classPrivateFieldLooseBase(this,f)[f]!==s.left||babelHelpers.classPrivateFieldLooseBase(this,L)[L]!==s.right){babelHelpers.classPrivateFieldLooseBase(this,f)[f]=s.left;babelHelpers.classPrivateFieldLooseBase(this,L)[L]=s.right;babelHelpers.classPrivateFieldLooseBase(this,$)[$]()}setTimeout(babelHelpers.classPrivateFieldLooseBase(this,N)[N].bind(this),1e3)}Object.defineProperty(W,d,{writable:true,value:5});Object.defineProperty(W,h,{writable:true,value:1});Object.defineProperty(W,p,{writable:true,value:18});Object.defineProperty(W,v,{writable:true,value:Math.floor(babelHelpers.classPrivateFieldLooseBase(W,p)[p]/2)});Object.defineProperty(W,u,{writable:true,value:Math.floor(babelHelpers.classPrivateFieldLooseBase(W,p)[p]/4)});Object.defineProperty(W,P,{writable:true,value:Math.floor(babelHelpers.classPrivateFieldLooseBase(W,p)[p]/8)});e.StateMachineWorkflowActivity=W})(this.window=this.window||{},BX,BX.UI);
//# sourceMappingURL=statemachineworkflowactivity.map.js