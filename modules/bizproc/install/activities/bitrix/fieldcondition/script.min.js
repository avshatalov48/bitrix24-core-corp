this.BX=this.BX||{};this.BX.Bizproc=this.BX.Bizproc||{};(function(e,t,a){"use strict";var i,l,n,r,s,d,o,c,p;function v(e,t){h(e,t);t.add(e)}function b(e,t,a){h(e,t);t.set(e,a)}function h(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function u(e,t,a){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return a}var g=t.Reflection.namespace("BX.Bizproc.Activity");var f=new WeakMap;var m=new WeakMap;var P=new WeakMap;var H=new WeakMap;var F=new WeakMap;var T=new WeakMap;var _=new WeakMap;var w=new WeakSet;var y=new WeakSet;var B=new WeakSet;var G=new WeakSet;var S=new WeakSet;var E=new WeakSet;var k=new WeakSet;var D=function(){function e(i){var l=this;babelHelpers.classCallCheck(this,e);v(this,k);v(this,E);v(this,S);v(this,G);v(this,B);v(this,y);v(this,w);b(this,f,{writable:true,value:void 0});b(this,m,{writable:true,value:[]});b(this,P,{writable:true,value:{}});b(this,H,{writable:true,value:void 0});b(this,F,{writable:true,value:0});b(this,T,{writable:true,value:void 0});b(this,_,{writable:true,value:false});if(!t.Type.isPlainObject(i)){return}if(t.Type.isElementNode(i.table)){babelHelpers.classPrivateFieldSet(this,f,i.table)}if(t.Type.isPlainObject(i.conditions)){var n=String(i.conditions.field_condition_count).split(",").map(t.Text.toInteger);n.forEach((function(e){babelHelpers.classPrivateFieldGet(l,m).push({operator:i.conditions["field_condition_condition_"+e]||a.Operator.EQUAL,fieldId:i.conditions["field_condition_field_"+e]||"",joiner:i.conditions["field_condition_joiner_"+e]||0,value:i.conditions["field_condition_value_"+e]||""})}))}if(t.Type.isPlainObject(i.documentFields)){babelHelpers.classPrivateFieldSet(this,P,i.documentFields)}babelHelpers.classPrivateFieldSet(this,H,i.documentType);babelHelpers.classPrivateFieldSet(this,_,i.useOperatorModified==="Y")}babelHelpers.createClass(e,[{key:"init",value:function e(){var a=this;var l=t.Tag.render(i||(i=babelHelpers.taggedTemplateLiteral(["<tbody></tbody>"])));babelHelpers.classPrivateFieldGet(this,m).forEach((function(e){return u(a,w,L).call(a,e,l)}));t.Dom.append(u(this,E,j).call(this),l);t.Dom.append(l,babelHelpers.classPrivateFieldGet(this,f))}}]);return e}();function L(e,i){var l;var n,r;var s=new a.BpCondition({operator:e.operator||a.Operator.EQUAL,value:e.value||"",selectName:"field_condition_condition_"+String(babelHelpers.classPrivateFieldGet(this,F)),inputName:"field_condition_value_"+String(babelHelpers.classPrivateFieldGet(this,F)),documentType:babelHelpers.classPrivateFieldGet(this,H),useOperatorModified:babelHelpers.classPrivateFieldGet(this,_)});if(babelHelpers.classPrivateFieldGet(this,F)!==0){t.Dom.append(u(this,G,W).call(this,t.Text.toInteger(e.joiner||0),s),i)}var d=u(this,y,O).call(this,e.fieldId||"",babelHelpers.classPrivateFieldGet(this,F),s);t.Dom.append(d,i);var o=(l=babelHelpers.classPrivateFieldGet(this,P)[e.fieldId||""])!==null&&l!==void 0?l:babelHelpers.classPrivateFieldGet(this,P)[d.getElementsByTagName("SELECT")[0].options[0].value];s.renderOperatorTo(o.BaseType,i);s.renderValueTo(o,i);babelHelpers.classPrivateFieldSet(this,F,(n=babelHelpers.classPrivateFieldGet(this,F),r=n++,n)),r}function O(){var e=this;var a=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var i=arguments.length>1?arguments[1]:undefined;var s=arguments.length>2?arguments[2]:undefined;var d=t.Tag.render(l||(l=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<select name="field_condition_field_','"></select>\n\t\t'])),String(i));Object.keys(babelHelpers.classPrivateFieldGet(this,P)).forEach((function(i){t.Dom.append(t.Tag.render(n||(n=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t\t<option value="','"',">\n\t\t\t\t\t\t","\n\t\t\t\t\t</option>\n\t\t\t\t"])),t.Text.encode(i),a===i?" selected":"",t.Text.encode(babelHelpers.classPrivateFieldGet(e,P)[i].Name)),d)}));t.Event.bind(d,"change",u(this,B,M).bind(this,s));return t.Tag.render(r||(r=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<tr>\n\t\t\t\t<td align="right" width="40%" class="adm-detail-content-cell-l">\n\t\t\t\t\t','\n\t\t\t\t</td>\n\t\t\t\t<td width="60%" class="adm-detail-content-cell-r">\n\t\t\t\t\t',"\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t"])),t.Loc.getMessage("BPFC_PD_FIELD")+":",d)}function M(e,t){var a,i;var l=t.target;var n=l.selectedOptions[0].value;var r=babelHelpers.classPrivateFieldGet(this,P)[n];if(!r){l.selectedIndex=0;r=babelHelpers.classPrivateFieldGet(this,P)[l.selectedOptions[0]]}e.rerenderOperator((a=r.BaseType)!==null&&a!==void 0?a:"string");e.rerenderValue((i=r)!==null&&i!==void 0?i:{Type:"string"})}function W(e,a){var i=babelHelpers.classPrivateFieldGet(this,F);var l=t.Tag.render(s||(s=babelHelpers.taggedTemplateLiteral(['<a href="#">',"</a>"])),t.Loc.getMessage("BPFC_PD_DELETE"));t.Event.bindOnce(l,"click",u(this,S,C).bind(this,a,i));return t.Tag.render(d||(d=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<tr>\n\t\t\t\t<td align="right" width="40%" class="adm-detail-content-cell-l">\n\t\t\t\t\t<select name="','">\n\t\t\t\t\t\t<option value="0">','</option>\n\t\t\t\t\t\t<option value="1"',">",'</option>\n\t\t\t\t\t</select>\n\t\t\t\t</td>\n\t\t\t\t<td align="right" width="60%" class="adm-detail-content-cell-r">\n\t\t\t\t\t',"\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t"])),"field_condition_joiner_"+String(babelHelpers.classPrivateFieldGet(this,F)),t.Loc.getMessage("BPFC_PD_AND"),e===1?" selected":"",t.Loc.getMessage("BPFC_PD_OR"),l)}function C(e,t,a){a.preventDefault();var i=a.target;var l=i.closest("tbody");var n=i.parentElement;var r=n.parentElement;var s=r.rowIndex;l.deleteRow(s+1);l.deleteRow(s);e.destroy();var d=babelHelpers.classPrivateFieldGet(this,T).value.split(",");var o=d.indexOf(String(t));if(o!==-1){d.splice(o,1)}babelHelpers.classPrivateFieldGet(this,T).value=d.join(",")}function j(){babelHelpers.classPrivateFieldSet(this,T,t.Tag.render(o||(o=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<input \n\t\t\t\ttype="hidden"\n\t\t\t\tname="field_condition_count"\n\t\t\t\tvalue="','"\n\t\t\t>\n\t\t'])),babelHelpers.toConsumableArray(Array(babelHelpers.classPrivateFieldGet(this,F))).map((function(e,t){return t})).join(",")));var e=t.Tag.render(c||(c=babelHelpers.taggedTemplateLiteral(['<a href="#">',"</a>"])),t.Loc.getMessage("BPFC_PD_ADD"));t.Event.bind(e,"click",u(this,k,A).bind(this));return t.Tag.render(p||(p=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<tr>\n\t\t\t\t<td class="adm-detail-content-cell-l"></td>\n\t\t\t\t<td class="adm-detail-content-cell-r">\n\t\t\t\t\t',"\n\t\t\t\t\t","\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t"])),babelHelpers.classPrivateFieldGet(this,T),e)}function A(e){e.preventDefault();var a=e.target;var i=a.closest("tbody");var l=a.closest("tr");t.Dom.remove(l);babelHelpers.classPrivateFieldGet(this,T).value+=","+String(babelHelpers.classPrivateFieldGet(this,F));u(this,w,L).call(this,{},i);t.Dom.append(l,i)}g.FieldCondition=D})(this.BX.Bizproc.Activity=this.BX.Bizproc.Activity||{},BX,BX.Bizproc);
//# sourceMappingURL=script.map.js