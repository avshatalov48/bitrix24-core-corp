{"version":3,"file":"script.js","sources":["script.es6.js"],"sourcesContent":["import {Reflection, Tag, Type} from 'main.core';\nimport {Dialog} from 'ui.entity-selector';\nimport {Globals} from 'bizproc.globals';\n\nconst namespace = Reflection.namespace('BX.Bizproc.Activity');\n\nclass MathOperationActivity\n{\n\tisRobot: boolean;\n\tsignedDocumentType: string;\n\n\tvariables: object;\n\tconstants: object;\n\tdocumentFields: object;\n\toperations: Array<string>;\n\n\tcurrentValues: object;\n\n\tvisibilityMessages: object;\n\n\taddRowTable: HTMLDivElement | HTMLTableElement;\n\n\tgVarObjectName: string;\n\tgConstObjectName: string;\n\tdocumentObjectName: string;\n\thelperObjectName: string;\n\toperationObjectName: string;\n\n\tindexAttributeName: string;\n\n\tvariableIdName: string;\n\tparameter1IdName: string;\n\toperationIdName: string;\n\tparameter2IdName: string;\n\tresultIdName: string;\n\toperationMenuIdName: string;\n\n\toptions: Map<string, object>;\n\toptionsByGroup: Map<string, Array<string>>;\n\trowIndex: number;\n\n\tavailableTypes: Array<string>;\n\n\tconstructor(options)\n\t{\n\t\tif (Type.isPlainObject(options))\n\t\t{\n\t\t\tthis.isRobot = options.isRobot;\n\t\t\tthis.signedDocumentType = options.signedDocumentType;\n\n\t\t\tthis.variables = options.variables;\n\t\t\tthis.constants = options.constants;\n\t\t\tthis.documentFields = options.documentFields;\n\t\t\tthis.operations = options.operations;\n\n\t\t\tthis.currentValues = options.currentValues;\n\t\t\tthis.visibilityMessages = options.visibilityMessages;\n\n\t\t\tthis.addRowTable = options.addRowTable;\n\t\t}\n\t}\n\n\tinit()\n\t{\n\t\tthis.initObjectNames();\n\t\tthis.initNodeAttributeNames();\n\t\tthis.initNodeIdNames();\n\t\tthis.initAvailableOptions();\n\n\t\tthis.availableTypes = ['int', 'integer', 'double'];\n\t\tthis.rowIndex = -1;\n\n\t\tlet addCondition = this.isRobot ? 'addConditionRobot' : 'addConditionDesigner';\n\n\t\tif (Object.keys(this.currentValues).length <= 0)\n\t\t{\n\t\t\tthis[addCondition]('variable', ['parameter', '+', 'parameter']);\n\t\t}\n\t\tfor (let variableId in this.currentValues)\n\t\t{\n\t\t\tthis[addCondition](variableId, this.currentValues[variableId]);\n\t\t}\n\t}\n\n\tinitObjectNames()\n\t{\n\t\tthis.gVarObjectName = 'GlobalVar';\n\t\tthis.gConstObjectName = 'GlobalConst';\n\t\tthis.documentObjectName = 'Document';\n\t\tthis.operationObjectName = 'Operation';\n\n\t\tthis.helperObjectName = 'Default';\n\t}\n\n\tisGVariable(visibility)\n\t{\n\t\treturn visibility.startsWith(this.gVarObjectName);\n\t}\n\n\tisGConstant(visibility)\n\t{\n\t\treturn visibility.startsWith(this.gConstObjectName);\n\t}\n\n\tisDocument(visibility)\n\t{\n\t\treturn visibility.startsWith(this.documentObjectName);\n\t}\n\n\tinitNodeAttributeNames()\n\t{\n\t\tthis.indexAttributeName = 'bp_moa_index';\n\t}\n\n\tinitNodeIdNames()\n\t{\n\t\tthis.variableIdName = 'bp_moa_variable_';\n\t\tthis.parameter1IdName = 'bp_moa_common1_';\n\t\tthis.operationIdName = 'bp_moa_operation_';\n\t\tthis.parameter2IdName = 'bp_moa_common2_';\n\n\t\tthis.resultIdName = 'bp_moa_results_';\n\t\tthis.operationMenuIdName = 'bp_moa_operations_menu_';\n\t}\n\n\tinitAvailableOptions()\n\t{\n\t\tthis.options = this.getAvailableOptions();\n\t\tthis.optionsByGroup = this.getAvailableOptionsByGroup();\n\t}\n\n\tgetAvailableOptions()\n\t{\n\t\tlet options = new Map();\n\n\t\tthis.fillOptions(this.variables, options);\n\t\tthis.fillOptions(this.constants, options);\n\t\tthis.fillOptions(this.documentFields, options);\n\n\t\tlet source = this.operations;\n\t\tfor (let i in source)\n\t\t{\n\t\t\toptions.set(source[i], {\n\t\t\t\ttitle: source[i],\n\t\t\t\tgroupId: this.operationObjectName,\n\t\t\t\tvalue: source[i]\n\t\t\t});\n\t\t}\n\n\t\toptions.set('variable', {\n\t\t\ttitle: BX.message('BPMOA_CHOOSE_VARIABLE'),\n\t\t\tgroupId: this.helperObjectName,\n\t\t\tvalue: ''\n\t\t});\n\t\toptions.set('parameter', {\n\t\t\ttitle: BX.message('BPMOA_CHOOSE_PARAMETER'),\n\t\t\tgroupId: this.helperObjectName,\n\t\t\tvalue: ''\n\t\t});\n\t\toptions.set('operation', {\n\t\t\ttitle: '+',\n\t\t\tgroupId: this.helperObjectName,\n\t\t\tvalue: '+'\n\t\t});\n\n\t\treturn options;\n\t}\n\n\tfillOptions(source, options)\n\t{\n\t\tlet optionId, optionsSource;\n\t\tfor (let groupName in source)\n\t\t{\n\t\t\toptionsSource = source[groupName];\n\t\t\tif (optionsSource['children']) {\n\t\t\t\toptionsSource = optionsSource['children'];\n\t\t\t}\n\t\t\tfor (let i in optionsSource)\n\t\t\t{\n\t\t\t\toptionId = optionsSource[i]['id'];\n\t\t\t\toptions.set(optionId, this.createShortOptionProperty(optionId, optionsSource[i]));\n\t\t\t}\n\t\t}\n\t}\n\n\tcreateShortOptionProperty(id, property)\n\t{\n\t\treturn {\n\t\t\ttitle: property['customData']['title'],\n\t\t\tgroupId: property['customData']['groupId'],\n\t\t\tvalue: id\n\t\t};\n\t}\n\n\tgetAvailableOptionsByGroup()\n\t{\n\t\tlet options = new Map();\n\t\tlet items;\n\n\t\tthis.fillOptionsByGroupWithGlobals(this.variables, options, this.gVarObjectName);\n\t\tthis.fillOptionsByGroupWithGlobals(this.constants, options, this.gConstObjectName);\n\n\t\titems = [];\n\t\tfor (let i in this.documentFields) {\n\t\t\titems.push(this.documentFields[i]);\n\t\t}\n\t\toptions.set(this.documentObjectName + ':' + this.documentObjectName, items);\n\n\t\toptions.set(this.operationObjectName, this.getOperationGroupOptions());\n\n\t\treturn options;\n\t}\n\n\tfillOptionsByGroupWithGlobals(source, options, topGroupName)\n\t{\n\t\tlet key;\n\t\tfor (let subGroupName in source)\n\t\t{\n\t\t\tkey = topGroupName + ':' + subGroupName;\n\t\t\toptions.set(key, source[subGroupName]);\n\t\t}\n\t}\n\n\tgetOperationGroupOptions()\n\t{\n\t\tlet items = [];\n\t\tlet source = this.operations;\n\t\tlet me = this;\n\n\t\tfor (let i in source)\n\t\t{\n\t\t\titems.push({\n\t\t\t\ttext: source[i],\n\t\t\t\tonclick: function (event, item)\n\t\t\t\t{\n\t\t\t\t\tlet target = this.bindElement;\n\t\t\t\t\tif (target)\n\t\t\t\t\t{\n\t\t\t\t\t\ttarget.innerText = item.text;\n\t\t\t\t\t\tme.resolveHiddenInput(target, item.text, document.getElementById(\n\t\t\t\t\t\t\tme.resultIdName + target.getAttribute(me.indexAttributeName)\n\t\t\t\t\t\t));\n\t\t\t\t\t\tthis.popupWindow.close();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn items;\n\t}\n\n\taddConditionRobot(variableId, mathCondition)\n\t{\n\t\tlet properties = this.getPropertiesInfo(variableId, mathCondition);\n\n\t\tlet me = this;\n\t\tlet addRowTable = this.addRowTable;\n\t\tthis.rowIndex++;\n\n\t\tlet newRow = BX.Tag.render`<div class=\"bizproc-automation-popup-settings\"></div>`;\n\n\t\tlet rowProperties = BX.Tag.render`\n\t\t\t<div class=\"bizproc-automation-popup-settings bizproc-automation-popup-settings-text\"></div>\n\t\t`;\n\t\tlet rowInputs = BX.Tag.render`<div id=\"${this.resultIdName + this.rowIndex}\"></div>`;\n\n\t\t/* region Variable Wrapper */\n\n\t\tlet variableSpan = BX.Tag.render`\n\t\t\t<span class=\"bizproc-automation-popup-settings-link\" id=\"${this.variableIdName + this.rowIndex}\"></span>\n\t\t`;\n\t\tvariableSpan.setAttribute(this.indexAttributeName, this.rowIndex);\n\n\t\tthis.replaceTitleSelector(variableSpan, properties['variable'].title, rowInputs);\n\n\t\tBX.bind(variableSpan, 'click', function (event) {\n\t\t\tme.onFieldSelectClick(event, 'variable', me);\n\t\t});\n\t\trowProperties.appendChild(variableSpan);\n\n\t\t/* endregion */\n\n\t\trowProperties.appendChild(BX.Tag.render`<span> = </span>`);\n\n\t\tlet parameter1Span = this.getParameterSpan(\n\t\t\tthis.parameter1IdName + this.rowIndex,\n\t\t\tproperties['parameter1'].title,\n\t\t\trowInputs\n\t\t);\n\t\trowProperties.appendChild(parameter1Span);\n\n\t\t/* region Operation Wrapper*/\n\n\t\tlet operationSpan = BX.Tag.render`\n\t\t\t<span \n\t\t\t\tclass=\"bizproc-automation-popup-settings-link bizproc-automation-condition-joiner\" \n\t\t\t\tid=\"${this.operationIdName + this.rowIndex}\"\n\t\t\t></span>\n\t\t`;\n\t\toperationSpan.setAttribute(this.indexAttributeName, this.rowIndex);\n\n\t\tthis.replaceTitleSelector(operationSpan, properties['operation'].title, rowInputs);\n\n\t\tBX.bind(operationSpan, 'click', function (event) {\n\t\t\tme.onOperationSelectClick(event, me)\n\t\t});\n\t\trowProperties.appendChild(operationSpan);\n\n\t\t/* endregion */\n\n\t\tlet parameter2Span = this.getParameterSpan(\n\t\t\tthis.parameter2IdName + this.rowIndex,\n\t\t\tproperties['parameter2'].title,\n\t\t\trowInputs\n\t\t);\n\t\trowProperties.appendChild(parameter2Span);\n\n\t\tnewRow.appendChild(rowProperties);\n\t\tnewRow.appendChild(rowInputs);\n\n\t\taddRowTable.appendChild(newRow);\n\t}\n\n\tgetPropertiesInfo(variableId, mathCondition)\n\t{\n\t\tlet properties = {\n\t\t\t'variable': {value: variableId, defaultValue: 'variable'},\n\t\t\t'parameter1': {value: mathCondition[0], defaultValue: 'parameter'},\n\t\t\t'operation': {value: mathCondition[1], defaultValue: '+'},\n\t\t\t'parameter2': {value: mathCondition[2], defaultValue: 'parameter'}\n\t\t}\n\n\t\tlet infos = {};\n\t\tfor (let i in properties)\n\t\t{\n\t\t\tinfos[i] = this.getPropertyInfo(properties[i].value, properties[i].defaultValue);\n\t\t}\n\n\t\treturn infos;\n\t}\n\n\tgetPropertyInfo(item, defaultValue)\n\t{\n\t\tif (this.options.get(item) === undefined)\n\t\t{\n\t\t\titem = Number(item);\n\t\t\tif (isNaN(item))\n\t\t\t{\n\t\t\t\treturn {title: defaultValue}\n\t\t\t}\n\t\t}\n\n\t\treturn {title: item};\n\t}\n\n\tgetParameterSpan(id, title, rowInputs)\n\t{\n\t\tlet parameterSpan = BX.Tag.render`<span class=\"bizproc-automation-popup-settings-link\" id=\"${id}\"></span>`;\n\t\tparameterSpan.setAttribute(this.indexAttributeName, this.rowIndex);\n\n\t\tthis.replaceTitleSelector(parameterSpan, title, rowInputs);\n\n\t\tlet me = this;\n\t\tBX.bind(parameterSpan, 'click', function (event) {\n\t\t\tme.onFieldSelectClick(event, 'all', me);\n\t\t});\n\n\t\treturn parameterSpan;\n\t}\n\n\tonFieldSelectClick(event, type, me)\n\t{\n\t\tlet target = event.target;\n\t\tlet targetId = target.id;\n\n\t\tlet itemValue = document.getElementById(targetId + '_input').value;\n\t\tlet form = me.createFormForMenu(type, itemValue);\n\n\t\tlet popup = new BX.PopupWindow(\n\t\t\ttargetId + '_popup',\n\t\t\ttarget,\n\t\t\t{\n\t\t\t\tclassName: 'bizproc-automation-popup-set',\n\t\t\t\tautoHide: true,\n\t\t\t\tcloseByEsc: true,\n\t\t\t\toffsetTop: 5,\n\t\t\t\toverlay: {backgroundColor: 'transparent'},\n\t\t\t\tcontent: form,\n\t\t\t\tbuttons: [\n\t\t\t\t\tnew BX.PopupWindowButton({\n\t\t\t\t\t\ttext: BX.message('BIZPROC_AUTOMATION_CMP_CHOOSE'),\n\t\t\t\t\t\tclassName: \"webform-button webform-button-create\" ,\n\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\tclick: function() {\n\t\t\t\t\t\t\t\tlet formInput = form.getElementsByTagName('input')[0];\n\t\t\t\t\t\t\t\tlet rowInput = document.getElementById(\n\t\t\t\t\t\t\t\t\tme.resultIdName + target.getAttribute(me.indexAttributeName)\n\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t\tme.replaceTitleSelector(target, formInput.value, rowInput);\n\t\t\t\t\t\t\t\tpopup.close();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}),\n\t\t\t\t\tnew BX.PopupWindowButtonLink({\n\t\t\t\t\t\ttext : BX.message('BIZPROC_AUTOMATION_CMP_CANCEL'),\n\t\t\t\t\t\tclassName : \"popup-window-button-link\",\n\t\t\t\t\t\tevents : {\n\t\t\t\t\t\t\tclick: function(){\n\t\t\t\t\t\t\t\tpopup.close();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t],\n\t\t\t\tevents: {\n\t\t\t\t\tonPopupClose: function ()\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.destroy();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t\tpopup.show();\n\t}\n\n\tonOperationSelectClick(event, me)\n\t{\n\t\tlet target = event.target;\n\t\tBX.Main.MenuManager.show(\n\t\t\tme.operationMenuIdName + Math.random(),\n\t\t\ttarget,\n\t\t\tme.optionsByGroup.get(me.operationObjectName) ?? [],\n\t\t\t{\n\t\t\t\tautoHide: true,\n\t\t\t\tclassName: 'bizproc-automation-inline-selector-menu',\n\t\t\t\toverlay: {backgroundColor: 'transparent'},\n\t\t\t\tminHeight: 50,\n\t\t\t\tminWidth: 40,\n\t\t\t\tevents:\n\t\t\t\t\t{\n\t\t\t\t\t\tonPopupClose: function()\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.destroy();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t}\n\t\t);\n\t}\n\n\treplaceTitleSelector(target, itemValue, rowInputs)\n\t{\n\t\tlet item = this.options.get(itemValue);\n\t\tlet inputValue;\n\n\t\tif (target && (item !== undefined)) {\n\t\t\ttarget.innerText = item['title'];\n\t\t\tinputValue = item['value'];\n\t\t}\n\t\telse if (target && !isNaN(Number(itemValue)))\n\t\t{\n\t\t\tinputValue = Number(itemValue);\n\t\t\tif (String(target.id).startsWith(this.variableIdName) && inputValue === 0)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\ttarget.innerText = inputValue;\n\t\t}\n\t\telse {\n\t\t\treturn;\n\t\t}\n\n\t\tif (rowInputs)\n\t\t{\n\t\t\tthis.resolveHiddenInput(target, inputValue, rowInputs);\n\t\t}\n\t}\n\n\tresolveHiddenInput(source, value, target)\n\t{\n\t\tlet input = document.getElementById(source.id + '_input');\n\t\tif (input)\n\t\t{\n\t\t\tinput.name = source.id;\n\t\t\tinput.value = value;\n\n\t\t\treturn;\n\t\t}\n\n\t\tlet name = source.id;\n\t\tlet id = name + '_input';\n\n\t\ttarget.appendChild(BX.Tag.render`<input type=\"hidden\" id=\"${id}\" name=\"${name}\" value=\"${value}\">`);\n\t}\n\n\tcreateFormForMenu(type, itemValue)\n\t{\n\t\tlet me = this;\n\n\t\tlet form = Tag.render`<form class=\"bizproc-automation-popup-select-block\"></form>`;\n\n\t\tlet fieldsListWrapper = Tag.render`<div class=\"bizproc-automation-popup-settings\"></div>`;\n\t\tlet labelFieldsList = Tag.render`<div class=\"bizproc-automation-robot-settings-title\"></div>`;\n\t\tlabelFieldsList.innerText = BX.message('BPMOA_LIST_OF_VALUES');\n\n\t\tlet formInput = Tag.render`<input class=\"bizproc-automation-popup-input\" type=\"hidden\" style=\"width: 280px;\">`;\n\n\t\tlet fieldsSelectNode = Tag.render`<div class=\"bizproc-automation-popup-settings-dropdown\" readonly=\"readonly\"></div>`;\n\t\tBX.bind(fieldsSelectNode, 'click', function () {\n\t\t\tlet items = me.optionsByGroup.get(visibilitySelect.value) ?? [];\n\t\t\tlet visibilityInfo = me.getVisibilityInfoForDialog(visibilitySelect.value);\n\n\t\t\tlet dialogOptions = me.getDialogOptions(items, visibilityInfo);\n\t\t\tdialogOptions['targetNode'] = this;\n\t\t\tdialogOptions['events'] = {\n\t\t\t\t'Item:onBeforeSelect': (event) => {\n\t\t\t\t\tlet item = event.data.item;\n\t\t\t\t\tfieldsSelectNode.innerText = item.customData.get('title');\n\t\t\t\t\tformInput.value = item.id;\n\t\t\t\t},\n\t\t\t\tonHide: function(event) {\n\t\t\t\t\tevent.target.destroy();\n\t\t\t\t},\n\t\t\t\t'Search:onItemCreateAsync': (event) => {\n\t\t\t\t\treturn new Promise((resolve) => {\n\t\t\t\t\t\tlet query = event.getData().searchQuery.query;\n\t\t\t\t\t\tlet dialog = event.getTarget();\n\n\t\t\t\t\t\tme.onCreateGlobalsClick(dialog, visibilityInfo, query, me, resolve);\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t};\n\n\t\t\tlet dialog = new Dialog(dialogOptions);\n\n\t\t\tif (items.length <= 0) {\n\t\t\t\tdialog.setFooter(me.getFooter(visibilityInfo, dialog));\n\t\t\t}\n\n\t\t\tdialog.show();\n\t\t});\n\n\t\tlet visibilityWrapper = Tag.render`<div class=\"bizproc-automation-popup-settings\"></div>`;\n\t\tlet visibilitySelect = Tag.render`<select class=\"bizproc-automation-popup-settings-dropdown\"></select>`;\n\t\tBX.bind(visibilitySelect, 'change', function () {\n\t\t\tme.changeSelectForField(this.value, fieldsSelectNode, labelFieldsList, formInput);\n\t\t});\n\n\t\tlet options = this.getVisibilityNamesForSelect(type);\n\t\tfor (let groupId in options)\n\t\t{\n\t\t\tlet optionNode = Tag.render`<option value=\"${BX.util.htmlspecialchars(groupId)}\"></option>`;\n\t\t\toptionNode.innerText = options[groupId];\n\n\t\t\tvisibilitySelect.appendChild(optionNode);\n\t\t}\n\n\t\tlet item = this.options.get(itemValue);\n\n\t\tvisibilitySelect.value = item ? item['groupId'] : this.helperObjectName + ':number';\n\t\tif (visibilitySelect.selectedIndex === -1) {\n\t\t\tvisibilitySelect.selectedIndex = 0;\n\t\t}\n\t\tthis.changeSelectForField(visibilitySelect.value, fieldsSelectNode, labelFieldsList, formInput);\n\t\tif (item && item['groupId'] !== this.helperObjectName)\n\t\t{\n\t\t\tfieldsSelectNode.innerText = item['title'];\n\t\t\tformInput.value = itemValue;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tfieldsSelectNode.innerText = BX.message('BPMOA_EMPTY');\n\t\t\tformInput.value = itemValue;\n\t\t}\n\n\t\tvisibilityWrapper.appendChild(Tag.render`\n\t\t\t<div class=\"bizproc-automation-robot-settings-title\">\n\t\t\t\t${BX.util.htmlspecialchars(BX.message('BPMOA_TYPE_OF_PARAMETER'))}\n\t\t\t</div>\n\t\t`);\n\t\tvisibilityWrapper.appendChild(visibilitySelect);\n\n\t\tfieldsListWrapper.appendChild(labelFieldsList);\n\t\tfieldsListWrapper.appendChild(fieldsSelectNode);\n\t\tfieldsListWrapper.append(formInput);\n\n\t\tform.appendChild(visibilityWrapper);\n\t\tform.appendChild(fieldsListWrapper);\n\n\t\treturn form;\n\t}\n\n\tgetVisibilityInfoForDialog(visibility)\n\t{\n\t\tlet recentStubOptions = {};\n\t\tlet searchStubOptions = {};\n\t\tlet searchFooterOptions = {};\n\t\tlet mode = '';\n\t\tlet objectName = '';\n\n\t\tif (this.isGVariable(visibility))\n\t\t{\n\t\t\trecentStubOptions = {\n\t\t\t\ttitle: BX.message('BPMOA_GVARIABLE_NO_EXIST'),\n\t\t\t\tsubtitle: BX.message('BPMOA_CREATE_GVARIABLE_QUESTION'),\n\t\t\t\tarrow: true\n\t\t\t};\n\n\t\t\tsearchStubOptions = {\n\t\t\t\ttitle: BX.message('BPMOA_GVARIABLE_NOT_FOUND'),\n\t\t\t\tsubtitle: BX.message('BPMOA_CREATE_GVARIABLE_QUESTION'),\n\t\t\t\tarrow: true\n\t\t\t};\n\n\t\t\tsearchFooterOptions = {\n\t\t\t\tlabel: BX.message('BPMOA_CREATE_GVARIABLE'),\n\t\t\t};\n\n\t\t\tmode = Globals.Manager.Instance.mode.variable;\n\t\t\tobjectName = this.gVarObjectName;\n\t\t}\n\t\telse if (this.isGConstant(visibility))\n\t\t{\n\t\t\trecentStubOptions = {\n\t\t\t\ttitle: BX.message('BPMOA_GCONSTANT_NO_EXIST'),\n\t\t\t\tsubtitle: BX.message('BPMOA_CREATE_GCONSTANT_QUESTION'),\n\t\t\t\tarrow: true\n\t\t\t};\n\n\t\t\tsearchStubOptions = {\n\t\t\t\ttitle: BX.message('BPMOA_GCONSTANT_NOT_FOUND'),\n\t\t\t\tsubtitle: BX.message('BPMOA_CREATE_GCONSTANT_QUESTION'),\n\t\t\t\tarrow: true\n\t\t\t};\n\n\t\t\tsearchFooterOptions = {\n\t\t\t\tlabel: BX.message('BPMOA_CREATE_GCONSTANT')\n\t\t\t};\n\n\t\t\tmode = Globals.Manager.Instance.mode.constant;\n\t\t\tobjectName = this.gConstObjectName;\n\t\t}\n\t\telse if (this.isDocument(visibility))\n\t\t{\n\t\t\tobjectName = this.documentObjectName;\n\t\t}\n\n\t\treturn {\n\t\t\trecentStubOptions,\n\t\t\tsearchStubOptions,\n\t\t\tsearchFooterOptions,\n\t\t\tmode,\n\t\t\tobjectName,\n\t\t\tvisibility\n\t\t};\n\t}\n\n\tgetDialogOptions(items, visibilityInfo)\n\t{\n\t\tlet options = {\n\t\t\twidth: 480,\n\t\t\theight: 300,\n\t\t\tmultiple: false,\n\t\t\tdropdownMode: true,\n\t\t\tenableSearch: true,\n\t\t\tshowAvatars: false,\n\t\t\tcompactView: true,\n\t\t\titems: items,\n\t\t\ttagSelectorOptions: {\n\t\t\t\ttextBoxWidth: 400\n\t\t\t}\n\t\t};\n\n\t\tlet extraOptions = {\n\t\t\trecentTabOptions: {\n\t\t\t\tstub: true,\n\t\t\t\ticon: '',\n\t\t\t\tstubOptions: visibilityInfo.recentStubOptions\n\t\t\t},\n\t\t\tsearchTabOptions: {\n\t\t\t\tstub: true,\n\t\t\t\tstubOptions: visibilityInfo.searchStubOptions\n\t\t\t},\n\t\t\tsearchOptions: {\n\t\t\t\tallowCreateItem: true,\n\t\t\t\tfooterOptions: visibilityInfo.searchFooterOptions\n\t\t\t}\n\t\t};\n\n\t\tif (\n\t\t\tvisibilityInfo.objectName === this.gVarObjectName\n\t\t\t|| visibilityInfo.objectName === this.gConstObjectName\n\t\t)\n\t\t{\n\t\t\treturn Object.assign(options, extraOptions);\n\t\t}\n\n\t\treturn options;\n\t}\n\n\tgetFooter(visibilityInfo, dialog)\n\t{\n\t\tlet me = this;\n\t\tlet footer = Tag.render`\n\t\t\t<span class=\"ui-selector-footer-link ui-selector-footer-link-add\" style=\"border: none\">\n\t\t\t\t${BX.util.htmlspecialchars(visibilityInfo.searchFooterOptions.label)}\n\t\t\t</span>\n\t\t`;\n\n\t\tBX.bind(footer, 'click', () => {\n\t\t\tme.onCreateGlobalsClick(dialog, visibilityInfo, '', me);\n\t\t});\n\n\t\treturn footer;\n\t}\n\n\tonCreateGlobalsClick(dialog, visibilityInfo, query,  me, resolve)\n\t{\n\t\tlet visibility = visibilityInfo.visibility;\n\t\tlet additionalContext = {\n\t\t\tvisibility: visibility.slice(visibility.indexOf(':') + 1),\n\t\t\tavailableTypes: me.availableTypes\n\t\t};\n\t\tGlobals.Manager.Instance.createGlobals(visibilityInfo.mode, me.signedDocumentType, query, additionalContext)\n\t\t\t.then((slider) =>\n\t\t\t{\n\t\t\t\tlet context = {\n\t\t\t\t\t'objectName': visibilityInfo.objectName,\n\t\t\t\t\t'visibility': visibilityInfo.visibility\n\t\t\t\t};\n\t\t\t\tme.onAfterCreateGlobals(dialog, slider, context);\n\t\t\t\tif (resolve)\n\t\t\t\t{\n\t\t\t\t\tresolve();\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\tonAfterCreateGlobals(dialog, slider, context)\n\t{\n\t\tlet info = slider.getData().entries();\n\t\tlet keys = Object.keys(info);\n\t\tif (keys.length <= 0)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tlet id = keys[0];\n\t\tlet property = info[keys[0]];\n\n\t\tif (!this.availableTypes.includes(property['Type']))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tlet item = {\n\t\t\tentityId: 'bp',\n\t\t\ttabs: 'recents',\n\t\t\ttitle: property['Name'],\n\t\t\tid: '{=' + context.objectName + ':' + id + '}',\n\t\t\tcustomData: {\n\t\t\t\tgroupId: context.objectName + ':' + property['Visibility'],\n\t\t\t\tproperty: property,\n\t\t\t\ttitle: property['Name']\n\t\t\t}\n\t\t};\n\n\t\tif (item.customData.groupId === context.visibility)\n\t\t{\n\t\t\tdialog.setFooter(null);\n\t\t\tdialog.addItem(item);\n\t\t}\n\n\t\tthis.options.set(item.id, this.createShortOptionProperty(item.id, item));\n\n\t\tlet groupItems = this.optionsByGroup.get(item.customData.groupId) ?? [];\n\t\tgroupItems.push(item);\n\t\tthis.optionsByGroup.set(item.customData.groupId, groupItems);\n\t}\n\n\tchangeSelectForField(value, target, label, input)\n\t{\n\t\tif (value !== this.helperObjectName + ':number')\n\t\t{\n\t\t\ttarget.style.display = '';\n\t\t\tlabel.innerText = BX.message('BPMOA_LIST_OF_VALUES');\n\t\t\ttarget.innerText = BX.message('BPMOA_EMPTY');\n\t\t\tinput.type = 'hidden';\n\t\t\tinput.value = '';\n\n\t\t\treturn;\n\t\t}\n\n\t\tlabel.innerText = BX.message('BPMOA_INPUT_NUMBER');\n\t\ttarget.style.display = 'none';\n\t\tinput.type = 'text';\n\t\tinput.value = '0';\n\t}\n\n\tgetVisibilityNamesForSelect(type)\n\t{\n\t\tlet list = {};\n\t\tlet numberMessages = {};\n\t\tnumberMessages[this.helperObjectName] = {\n\t\t\t'number': BX.message('BPMOA_NUMBER')\n\t\t};\n\t\tlet source = Object.assign({}, this.visibilityMessages, numberMessages);\n\n\t\tfor (let topGroupName in source) {\n\t\t\tif (type === 'variable' && topGroupName !== this.gVarObjectName) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tfor (let subGroupName in source[topGroupName]) {\n\t\t\t\tlist[topGroupName + ':' + subGroupName] = source[topGroupName][subGroupName];\n\t\t\t}\n\t\t}\n\n\t\treturn list;\n\t}\n\n\taddConditionDesigner(variableId, mathCondition)\n\t{\n\t\tlet addRowTable = this.addRowTable;\n\t\tthis.rowIndex++;\n\n\t\tlet newRow;\n\t\tlet cell, select;\n\n\t\tif (!mathCondition) {\n\t\t\tmathCondition = [NaN, null, NaN];\n\t\t}\n\n\t\tnewRow = addRowTable.insertRow(-1);\n\n\t\t/* region Variable Wrapper */\n\n\t\tcell = newRow.insertCell(-1);\n\t\tcell.style.minWidth = '50px';\n\n\t\tselect = BX.Tag.render`<select name=\"${this.variableIdName + this.rowIndex}\" style=\"width: 100%;\"></select>`;\n\t\tthis.appendChildToSelectDesigner(select, 'variable');\n\n\t\tselect.value = variableId;\n\t\tif (select.selectedIndex === -1) {\n\t\t\tselect.selectedIndex = 0;\n\t\t}\n\t\tcell.appendChild(select);\n\n\t\t/* endregion*/\n\n\t\tcell = newRow.insertCell(-1);\n\t\tcell.innerText = '=';\n\n\t\tthis.appendParameterSelectDesigner(newRow, this.parameter1IdName + this.rowIndex, mathCondition[0]);\n\n\t\t/* region Operation Wrapper */\n\n\t\tcell = newRow.insertCell(-1);\n\t\tcell.style.minWidth = '45px';\n\t\tselect = BX.Tag.render`<select name=\"${this.operationIdName + this.rowIndex}\" style=\"width: 100%\"></select>`;\n\t\tfor (let i in this.operations) {\n\t\t\tselect.appendChild(BX.Tag.render`\n\t\t\t\t<option value=\"${BX.util.htmlspecialchars(this.operations[i])}\">\n\t\t\t\t\t${BX.util.htmlspecialchars(this.operations[i])}\n\t\t\t\t</option>\n\t\t\t`);\n\t\t}\n\t\tselect.value = mathCondition[1];\n\t\tif (select.selectedIndex === -1) {\n\t\t\tselect.selectedIndex = 0;\n\t\t}\n\t\tcell.appendChild(select);\n\n\t\t/* endregion */\n\n\t\tthis.appendParameterSelectDesigner(newRow, this.parameter2IdName + this.rowIndex, mathCondition[2]);\n\t}\n\n\tappendChildToSelectDesigner(select, type)\n\t{\n\t\tfor (let objectName in this.visibilityMessages)\n\t\t{\n\t\t\tif (type === 'variable' && objectName !== this.gVarObjectName) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tlet objectVisibilityMessages = this.visibilityMessages[objectName];\n\t\t\tfor (let visibility in objectVisibilityMessages)\n\t\t\t{\n\t\t\t\tlet optgroupLabel = objectVisibilityMessages[visibility];\n\t\t\t\tlet optgroup = BX.Tag.render`<optgroup label=\"${BX.util.htmlspecialchars(optgroupLabel)}\"></optgroup>`;\n\n\t\t\t\tlet groupOptions = this.optionsByGroup.get(objectName + ':' + visibility);\n\t\t\t\tif (!groupOptions){\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tlet optionNode, id, title;\n\t\t\t\tfor (let i in groupOptions)\n\t\t\t\t{\n\t\t\t\t\tlet groupOption = groupOptions[i];\n\t\t\t\t\tif (groupOption['children'])\n\t\t\t\t\t{\n\t\t\t\t\t\tfor (let j in groupOption['children'])\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tid = groupOption['children'][j].id;\n\t\t\t\t\t\t\ttitle = groupOption['children'][j].customData.title;\n\t\t\t\t\t\t\toptionNode = BX.Tag.render`\n\t\t\t\t\t\t\t\t<option value=\"${BX.util.htmlspecialchars(id)}\">\n\t\t\t\t\t\t\t\t\t${BX.util.htmlspecialchars(title)}\n\t\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t`;\n\t\t\t\t\t\t\toptgroup.appendChild(optionNode);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tid = groupOption['id'];\n\t\t\t\t\t\ttitle = groupOption['customData']['title'];\n\t\t\t\t\t\toptionNode = BX.Tag.render`\n\t\t\t\t\t\t\t<option value=\"${BX.util.htmlspecialchars(id)}\">\n\t\t\t\t\t\t\t\t${BX.util.htmlspecialchars(title)}\n\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t`;\n\t\t\t\t\t\toptgroup.appendChild(optionNode);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tselect.appendChild(optgroup);\n\t\t\t}\n\t\t}\n\t}\n\n\tchangeInputDesigner(target, value)\n\t{\n\t\tif (target.options[target.selectedIndex].value === '')\n\t\t{\n\t\t\ttarget.after(BX.Tag.render`\n\t\t\t\t<input \n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tname=\"${target.name}\"\n\t\t\t\t\tstyle=\"width: 100px; height: 27px;\" \n\t\t\t\t\tvalue=\"${isFinite(value) ? value : 0}\"\n\t\t\t\t>\n\t\t\t`);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tlet input = document.getElementsByName(target.name)[1];\n\t\t\tif (input) {\n\t\t\t\tinput.remove();\n\t\t\t}\n\t\t}\n\t}\n\n\tappendParameterSelectDesigner(newRow, id, value)\n\t{\n\t\tlet me = this;\n\t\tlet cell = newRow.insertCell(-1);\n\t\tlet select = BX.Tag.render`<select name=\"${BX.util.htmlspecialchars(id)}\" style=\"width: 100%\"></select>`;\n\t\tBX.bind(select, 'change', function (){\n\t\t\tme.changeInputDesigner(this, value);\n\t\t});\n\n\t\tselect.appendChild(BX.Tag.render`<option value=\"\">${BX.util.htmlspecialchars(BX.message('BPMOA_NUMBER'))}</option>`);\n\t\tthis.appendChildToSelectDesigner(select);\n\n\t\tselect.value = value;\n\t\tif (select.selectedIndex === -1) {\n\t\t\tselect.selectedIndex = 0;\n\t\t}\n\t\tcell.appendChild(select);\n\t\tthis.changeInputDesigner(select, value);\n\t}\n}\n\nnamespace.MathOperationActivity = MathOperationActivity;"],"names":["namespace","Reflection","MathOperationActivity","options","Type","isPlainObject","isRobot","signedDocumentType","variables","constants","documentFields","operations","currentValues","visibilityMessages","addRowTable","initObjectNames","initNodeAttributeNames","initNodeIdNames","initAvailableOptions","availableTypes","rowIndex","addCondition","Object","keys","length","variableId","gVarObjectName","gConstObjectName","documentObjectName","operationObjectName","helperObjectName","visibility","startsWith","indexAttributeName","variableIdName","parameter1IdName","operationIdName","parameter2IdName","resultIdName","operationMenuIdName","getAvailableOptions","optionsByGroup","getAvailableOptionsByGroup","Map","fillOptions","source","i","set","title","groupId","value","BX","message","optionId","optionsSource","groupName","createShortOptionProperty","id","property","items","fillOptionsByGroupWithGlobals","push","getOperationGroupOptions","topGroupName","key","subGroupName","me","text","onclick","event","item","target","bindElement","innerText","resolveHiddenInput","document","getElementById","getAttribute","popupWindow","close","mathCondition","properties","getPropertiesInfo","newRow","Tag","render","rowProperties","rowInputs","variableSpan","setAttribute","replaceTitleSelector","bind","onFieldSelectClick","appendChild","parameter1Span","getParameterSpan","operationSpan","onOperationSelectClick","parameter2Span","defaultValue","infos","getPropertyInfo","get","undefined","Number","isNaN","parameterSpan","type","targetId","itemValue","form","createFormForMenu","popup","PopupWindow","className","autoHide","closeByEsc","offsetTop","overlay","backgroundColor","content","buttons","PopupWindowButton","events","click","formInput","getElementsByTagName","rowInput","PopupWindowButtonLink","onPopupClose","destroy","show","Main","MenuManager","Math","random","minHeight","minWidth","inputValue","String","input","name","fieldsListWrapper","labelFieldsList","fieldsSelectNode","visibilitySelect","visibilityInfo","getVisibilityInfoForDialog","dialogOptions","getDialogOptions","data","customData","onHide","Promise","resolve","query","getData","searchQuery","dialog","getTarget","onCreateGlobalsClick","Dialog","setFooter","getFooter","visibilityWrapper","changeSelectForField","getVisibilityNamesForSelect","optionNode","util","htmlspecialchars","selectedIndex","append","recentStubOptions","searchStubOptions","searchFooterOptions","mode","objectName","isGVariable","subtitle","arrow","label","Globals","Manager","Instance","variable","isGConstant","constant","isDocument","width","height","multiple","dropdownMode","enableSearch","showAvatars","compactView","tagSelectorOptions","textBoxWidth","extraOptions","recentTabOptions","stub","icon","stubOptions","searchTabOptions","searchOptions","allowCreateItem","footerOptions","assign","footer","additionalContext","slice","indexOf","createGlobals","then","slider","context","onAfterCreateGlobals","info","entries","includes","entityId","tabs","addItem","groupItems","style","display","list","numberMessages","cell","select","NaN","insertRow","insertCell","appendChildToSelectDesigner","appendParameterSelectDesigner","objectVisibilityMessages","optgroupLabel","optgroup","groupOptions","groupOption","j","after","isFinite","getElementsByName","remove","changeInputDesigner"],"mappings":"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"}