{"version":3,"sources":["user_selector.js"],"names":["BX","getClass","namespace","selectors","WeakMap","UserSelector","container","config","me","this","configString","getAttribute","parseJSON","removeAttribute","type","isPlainObject","create","itemsNode","inputBoxNode","attrs","className","inputNode","props","appendChild","tagNode","data","dialogId","util","getRandomString","createValueNode","valueInputName","selected","clone","selectOne","multiple","required","additionalFields","isArray","bind","e","preventDefault","openDialog","bByFocusEvent","prepareRoles","value","parseValue","addItems","innerHTML","length","message","canUse","SocNetLogDestination","decorateNode","selector","get","set","prototype","getData","next","ajaxSent","ajax","method","dataType","url","ajax_action","sessid","bitrix_sessid","site","onsuccess","response","initDialog","i","itemsSelected","id","entityType","items","users","department","departmentRelation","bpuserroles","roles","itemsLast","last","USERS","buildDepartmentRelation","inited","destinationInput","destinationInputBox","init","name","searchInput","extranetUser","bindMainPopup","node","offsetTop","offsetLeft","bindSearchPopup","departmentSelectDisable","sendAjaxSearch","callback","select","item","addItem","closeDialog","unSelect","unsetValue","BXfpUnSelectCallback","call","formName","inputContainerName","inputName","tagInputName","tagLink1","tagLink2","delegate","BXfpOpenDialogCallback","inputBoxName","BXfpCloseDialogCallback","openSearch","closeSearch","BXfpCloseSearchCallback","useClientDatabase","destSort","DEST_SORT","allowAddUser","Object","keys","onCustomEvent","itemType","dialogGroup","groupCode","title","BXfpSearch","BXfpSearchBefore","BXfpSetLinkName","findChild","attr","data-id","toRemove","childNodes","push","itemId","deleteItem","cleanNode","cleanValue","createItemNode","text","deleteEvents","click","remove","setValue","setAttribute","params","destroy","isOpenDialog","options","children","html","events","valueNode","getValueId","htmlspecialcharsback","replace","join","newVal","pairs","split","indexOf","toString","entityId","prepareValueString","pair","matches","found","trim","match","parseInt","groups","forEach","group","fields","Bizproc","FieldType","getDocumentFields","field","window","top"],"mappings":"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","file":"user_selector.map.js"}