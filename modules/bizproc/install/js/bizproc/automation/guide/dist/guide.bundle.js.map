{"version":3,"file":"guide.bundle.js","sources":["../src/check-automation-crm.js"],"sourcesContent":["import {Guide} from \"ui.tour\";\nimport {Loc, Type} from 'main.core';\nimport {BaseEvent, EventEmitter} from 'main.core.events';\nimport {Settings} from \"bizproc.local-settings\";\n\nexport class CheckAutomationCrm\n{\n\tstatic #IS_SHOWN_SUCCESS_AUTOMATION = 'success_automation_shown';\n\tstatic #SHOW_SUCCESS_AUTOMATION = 'show_success_automation';\n\tstatic #SHOW_CHECK_AUTOMATION = 'show_check_automation';\n\n\tstatic #SHOW_HOW_CHECK_TRIIGGER = 'show_how_check_trigger';\n\tstatic #SHOW_HOW_CHECK_ROBOT = 'show_how_check_robot';\n\n\tstatic #TRIGGER_ADDED = 'is_trigger_added';\n\tstatic #ROBOT_ADDED = 'is_robot_added';\n\n\tstatic startCheckAutomationTour(documentType: string, categoryId: number)\n\t{\n\t\tif (!this.#isCorrectDocumentType(documentType) || !Type.isNumber(categoryId))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.#subscribeOnStartCheckAutomationEvents(documentType, categoryId);\n\t}\n\n\tstatic #subscribeOnStartCheckAutomationEvents(documentType: string, categoryId: number)\n\t{\n\t\tconst handlers = this.#getStartCheckAutomationHandlers();\n\t\tfor (const eventName of Object.keys(handlers))\n\t\t{\n\t\t\tEventEmitter.subscribe(eventName, handlers[eventName]);\n\t\t}\n\n\t\tconst slider = BX.SidePanel.Instance.getSliderByWindow(window);\n\t\tlet options = {};\n\t\tif (slider)\n\t\t{\n\t\t\tconst localSettings = new Settings('aut-guide-crm-check-automation');\n\t\t\tEventEmitter.subscribeOnce(slider, 'SidePanel.Slider:onCloseComplete', () => {\n\t\t\t\tfor (const eventName of Object.keys(handlers))\n\t\t\t\t{\n\t\t\t\t\tEventEmitter.unsubscribe(eventName, handlers[eventName]);\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\tlocalSettings.get(this.#SHOW_HOW_CHECK_TRIIGGER) === true\n\t\t\t\t\t|| localSettings.get(this.#SHOW_HOW_CHECK_ROBOT) === true\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tthis.#saveUserOption('document_type', documentType);\n\t\t\t\t\tthis.#saveUserOption('category_id', categoryId);\n\t\t\t\t\tthis.#saveUserOption(this.#SHOW_CHECK_AUTOMATION, 'Y');\n\t\t\t\t\toptions = Object.assign(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tdocument_type: documentType,\n\t\t\t\t\t\t\tcategory_id: categoryId,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tlocalSettings.getAll()\n\t\t\t\t\t);\n\t\t\t\t\tthis.#sendUserOption();\n\t\t\t\t}\n\n\t\t\t\tlocalSettings.deleteAll();\n\t\t\t});\n\t\t}\n\n\t\tconst targetWindow = window.top;\n\t\tconst showHowCheckAutomationGuide = () => {\n\t\t\tif (targetWindow.BX.SidePanel.Instance.getOpenSlidersCount() <= 0)\n\t\t\t{\n\t\t\t\ttargetWindow.BX.Event.EventEmitter.unsubscribe(\n\t\t\t\t\t'SidePanel.Slider:onCloseComplete', showHowCheckAutomationGuide\n\t\t\t\t);\n\n\t\t\t\ttargetWindow.BX.Runtime.loadExtension('bizproc.automation.guide')\n\t\t\t\t\t.then((exports) => {\n\t\t\t\t\t\tconst {CrmCheckAutomationGuide} = exports;\n\t\t\t\t\t\tCrmCheckAutomationGuide.showHowCheckAutomationGuide(documentType, categoryId, options);\n\t\t\t\t\t})\n\t\t\t\t;\n\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\treturn false;\n\t\t};\n\n\t\ttargetWindow.BX.Event.EventEmitter.subscribe('SidePanel.Slider:onCloseComplete', showHowCheckAutomationGuide);\n\t}\n\n\tstatic #getStartCheckAutomationHandlers(): {}\n\t{\n\t\tconst localSettings = new Settings('aut-guide-crm-check-automation');\n\t\tlocalSettings.set(this.#TRIGGER_ADDED, false);\n\t\tlocalSettings.set(this.#SHOW_HOW_CHECK_TRIIGGER, false);\n\t\tlocalSettings.set(this.#ROBOT_ADDED, false);\n\t\tlocalSettings.set(this.#SHOW_HOW_CHECK_ROBOT, false);\n\n\t\tconst handlers = {};\n\t\thandlers['BX.Bizproc.Automation:TriggerManager:trigger:add'] = () => {\n\t\t\tlocalSettings.set(this.#TRIGGER_ADDED, true);\n\t\t};\n\t\thandlers['BX.Bizproc.Automation:Template:robot:add'] = () => {\n\t\t\tlocalSettings.set(this.#ROBOT_ADDED, true);\n\t\t};\n\t\thandlers['BX.Bizproc.Component.Automation.Component:onSuccessAutomationSave'] = (event: BaseEvent) => {\n\t\t\tconst triggersCount = event.getData()['analyticsLabel']['triggers_count'];\n\t\t\tlocalSettings.set(\n\t\t\t\tthis.#SHOW_HOW_CHECK_TRIIGGER,\n\t\t\t\ttriggersCount > 0 && localSettings.get(this.#TRIGGER_ADDED) === true\n\t\t\t);\n\n\t\t\tconst robotsCount = event.getData()['analyticsLabel']['robots_count'];\n\t\t\tlocalSettings.set(\n\t\t\t\tthis.#SHOW_HOW_CHECK_ROBOT,\n\t\t\t\trobotsCount > 0 && localSettings.get(this.#ROBOT_ADDED) === true\n\t\t\t);\n\t\t\tlocalSettings.set(this.#TRIGGER_ADDED, false);\n\t\t\tlocalSettings.set(this.#ROBOT_ADDED, false);\n\t\t};\n\n\t\treturn handlers;\n\t}\n\n\tstatic showHowCheckAutomationGuide(documentType: string, categoryId: number, options: Object<string, any>): void\n\t{\n\t\tif (\n\t\t\tthis.#isSuccessAutomationStepShown(options)\n\t\t\t|| !this.#isTargetDocumentType(documentType, categoryId, options)\n\t\t\t|| this.#isNeedShowSuccessAutomationStep(options)\n\t\t\t|| this.#isNeedShowCheckAutomationStep(options)\n\t\t)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst showTriggerGuide = (options[this.#SHOW_HOW_CHECK_TRIIGGER] === true);\n\t\tconst showRobotGuide = (options[this.#SHOW_HOW_CHECK_ROBOT] === true);\n\n\t\tif (!showTriggerGuide && !showRobotGuide)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst title =\n\t\t\tshowTriggerGuide\n\t\t\t\t? Loc.getMessage('BIZPROC_JS_WOW_MOMENT_CRM_HOW_CHECK_TRIGGER_TITLE')\n\t\t\t\t: Loc.getMessage('BIZPROC_JS_WOW_MOMENT_CRM_HOW_CHECK_ROBOT_TITLE')\n\t\t;\n\t\tconst text =\n\t\t\tshowTriggerGuide\n\t\t\t\t? Loc.getMessage('BIZPROC_JS_WOW_MOMENT_CRM_HOW_CHECK_TRIGGER_TEXT')\n\t\t\t\t: Loc.getMessage('BIZPROC_JS_WOW_MOMENT_CRM_HOW_CHECK_ROBOT_TEXT')\n\t\t;\n\n\t\t// kanban or list\n\t\tconst target =\n\t\t\tdocument.querySelector('.main-kanban-item')\n\t\t\t?? document.querySelector('.main-grid-row.main-grid-row-body:not(.main-grid-not-count) .main-grid-cell.main-grid-cell-left')\n\t\t;\n\n\t\tconst guide = this.#getGuide({target, title, text});\n\t\tif (!this.#isTargetExist(guide.getCurrentStep().getTarget()))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tguide.showNextStep();\n\t}\n\n\tstatic showCheckAutomation(documentType: string, categoryId: number, options: Object<string, any>)\n\t{\n\t\tif (\n\t\t\tthis.#isSuccessAutomationStepShown(options)\n\t\t\t|| !this.#isTargetDocumentType(documentType, categoryId, options)\n\t\t\t|| this.#isNeedShowSuccessAutomationStep(options)\n\t\t\t|| !this.#isNeedShowCheckAutomationStep(options)\n\t\t)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.#saveUserOption(this.#SHOW_CHECK_AUTOMATION, 'N');\n\t\tthis.#saveUserOption(this.#SHOW_SUCCESS_AUTOMATION, 'Y');\n\t\tthis.#sendUserOption()\n\n\t\tconst guide = this.#getGuide({\n\t\t\ttarget: '[data-id=\"tab_automation\"]',\n\t\t\ttitle: Loc.getMessage('BIZPROC_JS_WOW_MOMENT_CRM_CHECK_AUTOMATION_TITLE'),\n\t\t\ttext: Loc.getMessage('BIZPROC_JS_WOW_MOMENT_CRM_CHECK_AUTOMATION_TEXT'),\n\t\t\tcondition: {top: true, bottom: false, color: 'primary'},\n\t\t});\n\n\t\tif (\n\t\t\t!this.#isTargetExist(guide.getCurrentStep().getTarget())\n\t\t\t|| guide.getCurrentStep().getTarget().offsetTop > 0\n\t\t)\n\t\t{\n\t\t\tguide.getCurrentStep().setTarget('.main-buttons-item.main-buttons-item-more-default.main-buttons-item-more.--has-menu');\n\t\t\tif (!this.#isTargetExist(guide.getCurrentStep().getTarget()))\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tguide.showNextStep();\n\t}\n\n\tstatic showSuccessAutomation(documentType: string, categoryId: number, options: Object<string, any>)\n\t{\n\t\tif (\n\t\t\tthis.#isSuccessAutomationStepShown(options)\n\t\t\t|| !this.#isTargetDocumentType(documentType, categoryId, options)\n\t\t\t|| !this.#isNeedShowSuccessAutomationStep(options)\n\t\t)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\t// success trigger or robot\n\t\tlet target =\n\t\t\tdocument.querySelector('.bizproc-automation-trigger-item.--complete')\n\t\t\t?? document.querySelector('.bizproc-automation-robot-container.--complete')\n\t\t;\n\t\tif (!this.#isTargetExist(target))\n\t\t{\n\t\t\t// trigger or robot\n\t\t\ttarget =\n\t\t\t\tdocument.querySelector('.bizproc-automation-trigger-item')\n\t\t\t\t?? document.querySelector('.bizproc-automation-robot-container')\n\t\t\t;\n\n\t\t\tif (!this.#isTargetExist(target))\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tthis.#deleteUserOption();\n\t\tthis.#saveUserOption(this.#IS_SHOWN_SUCCESS_AUTOMATION, 'Y');\n\n\t\tconst guide = this.#getGuide({\n\t\t\ttarget,\n\t\t\ttitle: Loc.getMessage('BIZPROC_JS_WOW_MOMENT_CRM_SUCCESS_AUTOMATION_TITLE'),\n\t\t\ttext: Loc.getMessage('BIZPROC_JS_WOW_MOMENT_CRM_SUCCESS_AUTOMATION_TEXT'),\n\t\t\tarticle: '6908975',\n\t\t\tposition: 'top',\n\t\t});\n\n\t\tguide.showNextStep();\n\t}\n\n\tstatic #isSuccessAutomationStepShown(options: Object<string, any>): boolean\n\t{\n\t\treturn options[this.#IS_SHOWN_SUCCESS_AUTOMATION] === 'Y';\n\t}\n\n\tstatic #isTargetDocumentType(documentType: string, categoryId: number, options: Object<string, any>): boolean\n\t{\n\t\treturn (\n\t\t\tthis.#isCorrectDocumentType(documentType)\n\t\t\t&& Type.isStringFilled(options['document_type'])\n\t\t\t&& options['document_type'] === documentType\n\t\t\t&& Number(options['category_id']) === Number(categoryId)\n\t\t);\n\t}\n\n\tstatic #isCorrectDocumentType(documentType: string): boolean\n\t{\n\t\treturn (\n\t\t\tType.isStringFilled(documentType)\n\t\t\t&& (\n\t\t\t\t['LEAD', 'DEAL', 'SMART_INVOICE', 'QUOTE', 'ORDER'].includes(documentType)\n\t\t\t\t|| documentType.startsWith('DYNAMIC_')\n\t\t\t)\n\t\t);\n\t}\n\n\tstatic #isNeedShowSuccessAutomationStep(options: Object<string, any>): boolean\n\t{\n\t\treturn options[this.#SHOW_SUCCESS_AUTOMATION] === 'Y';\n\t}\n\n\tstatic #isNeedShowCheckAutomationStep(options: Object<string, any>): boolean\n\t{\n\t\treturn options[this.#SHOW_CHECK_AUTOMATION] === 'Y';\n\t}\n\n\tstatic #saveUserOption(key, value)\n\t{\n\t\tBX.userOptions.save('bizproc.automation.guide', 'crm_check_automation', key, value, false);\n\t}\n\n\tstatic #sendUserOption()\n\t{\n\t\tBX.userOptions.send(null);\n\t}\n\n\tstatic #deleteUserOption()\n\t{\n\t\tBX.userOptions.del('bizproc.automation.guide', 'crm_check_automation');\n\t}\n\n\t// region guide\n\tstatic #getGuide(options: {\n\t\ttarget: string | Element,\n\t\ttitle: string,\n\t\ttext: string,\n\t\tposition?: string,\n\t\tcondition?: Object,\n\t\tarticle?: string,\n\t}): Guide\n\t{\n\t\treturn new Guide({\n\t\t\tsteps: [\n\t\t\t\t{\n\t\t\t\t\ttarget: options.target,\n\t\t\t\t\ttitle: options.title,\n\t\t\t\t\ttext: options.text,\n\t\t\t\t\tposition: options.position | 'bottom',\n\t\t\t\t\tcondition: Type.isPlainObject(options.condition) ? options.condition : null,\n\t\t\t\t\tarticle: options.article ?? null,\n\t\t\t\t}\n\t\t\t],\n\t\t\tonEvents: true,\n\t\t});\n\t}\n\n\tstatic #isTargetExist(target): boolean\n\t{\n\t\treturn Type.isElementNode(target);\n\t}\n\n\t// endregion\n}\n"],"names":["CheckAutomationCrm","startCheckAutomationTour","documentType","categoryId","Type","isNumber","showHowCheckAutomationGuide","options","showTriggerGuide","showRobotGuide","title","Loc","getMessage","text","target","document","querySelector","guide","getCurrentStep","getTarget","showNextStep","showCheckAutomation","condition","top","bottom","color","offsetTop","setTarget","showSuccessAutomation","article","position","handlers","eventName","Object","keys","EventEmitter","subscribe","slider","BX","SidePanel","Instance","getSliderByWindow","window","localSettings","Settings","subscribeOnce","unsubscribe","get","assign","document_type","category_id","getAll","deleteAll","targetWindow","getOpenSlidersCount","Event","Runtime","loadExtension","then","exports","CrmCheckAutomationGuide","set","event","triggersCount","getData","robotsCount","isStringFilled","Number","includes","startsWith","key","value","userOptions","save","send","del","Guide","steps","isPlainObject","onEvents","isElementNode"],"mappings":"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"}