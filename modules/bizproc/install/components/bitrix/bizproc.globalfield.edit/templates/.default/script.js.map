{"version":3,"file":"script.js","sources":["script.es6.js"],"sourcesContent":["import {Reflection, Type, Loc, Event, Tag, Runtime, Dom} from 'main.core';\nimport { MessageBox } from 'ui.dialogs.messagebox';\nimport 'bp_field_type';\nimport {Globals} from 'bizproc.globals';\n\nconst namespace = Reflection.namespace('BX.Bizproc.Component');\n\nclass GlobalFieldEditComponent\n{\n\toldProperty;\n\tdocumentType;\n\tsignedDocumentType: string;\n\tmode: string;\n\tavailableTypes: object;\n\n\tinputValueId: string;\n\n\tmultipleNode: HTMLSelectElement;\n\tsaveButtonNode: HTMLButtonElement;\n\tform: HTMLFormElement;\n\n\tslider: BX.SidePanel.Slider | null;\n\n\tsliderDict: BX.SidePanel.Dictionary | null;\n\n\tcorrespondenceModeToIdName: object;\n\n\tconstructor(options)\n\t{\n\t\tif (Type.isPlainObject(options))\n\t\t{\n\t\t\tthis.oldProperty = options.property;\n\t\t\tthis.documentType = options.documentType;\n\t\t\tthis.signedDocumentType = options.signedDocumentType;\n\t\t\tthis.mode = options.mode;\n\t\t\tthis.availableTypes = options.types;\n\n\t\t\tthis.inputValueId = options.inputValueId;\n\n\t\t\tthis.multipleNode = options.multipleNode;\n\t\t\tthis.saveButtonNode = options.saveButtonNode;\n\t\t\tthis.form = options.form;\n\n\t\t\tthis.slider = options.slider;\n\t\t}\n\t}\n\n\tinit()\n\t{\n\t\tthis.sliderDict = this.slider ? this.slider.getData() : null;\n\t\tthis.correspondenceModeToIdName =  {\n\t\t\tconstant: 'Constant',\n\t\t\tvariable: 'Variable',\n\t\t};\n\n\t\tthis.editInputValue(this.oldProperty['Type'], this.oldProperty);\n\n\n\t\tEvent.bind(this.saveButtonNode, 'click', this.saveHandler.bind(this));\n\t}\n\n\teditInputValue(type, property)\n\t{\n\t\tlet prop = Runtime.clone(property);\n\t\tconst defaultProperty = {\n\t\t\tType: type ?? 'string',\n\t\t\tMultiple: false,\n\t\t\tDefault: '',\n\t\t\tPlaceholder: Loc.getMessage('BIZPROC_GLOBALFIELD_EDIT_TMP_EMPTY'),\n\t\t};\n\n\t\tif (this.availableTypes[defaultProperty.Type] === undefined)\n\t\t{\n\t\t\tdefaultProperty.Type = Object.keys(this.availableTypes)[0];\n\t\t}\n\n\t\tif (!Type.isPlainObject(property))\n\t\t{\n\t\t\tprop = defaultProperty;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (Type.isString(property['Multiple']))\n\t\t\t{\n\t\t\t\tprop['Multiple'] = (property['Multiple'] === 'Y');\n\t\t\t}\n\t\t\tprop = {...defaultProperty, ...prop};\n\t\t}\n\n\t\tthis.multipleNode.value = prop['Multiple'] ? 'Y' : 'N';\n\n\t\tif (prop.Type === 'select' && property.Options === undefined)\n\t\t{\n\t\t\tprop.Options = this.oldProperty.Options ?? {};\n\t\t}\n\n\t\tconst control = BX.Bizproc.FieldType.renderControl(\n\t\t\tthis.documentType,\n\t\t\tprop,\n\t\t\t'VALUE',\n\t\t\tprop['Default'],\n\t\t\t'public'\n\t\t);\n\t\tcontrol.className = 'ui-ctl ui-ctl-textbox ui-ctl-w100';\n\t\tcontrol.id = this.inputValueId;\n\n\t\tconst inputValueNode = document.getElementById(this.inputValueId);\n\t\tif (inputValueNode)\n\t\t{\n\t\t\tinputValueNode.replaceWith(control);\n\t\t}\n\n\t\tif (prop.Type !== 'select' && document.getElementById('bizproc_globEditComponent'))\n\t\t{\n\t\t\tdocument.getElementById('bizproc_globEditComponent').remove();\n\t\t\tthis.oldProperty.Options = {};\n\t\t}\n\t\telse if (prop.Type === 'select' && !document.getElementById('bizproc_globEditComponent'))\n\t\t{\n\t\t\tconst wrapper = Tag.render`<div class=\"ui-ctl ui-ctl-w100\" id=\"bizproc_globEditComponent\"></div>`;\n\t\t\tconst optionControl = BX.Bizproc.FieldType.createControlOptions(\n\t\t\t\tprop,\n\t\t\t\tthis.setSelectOptionFromForm.bind(this)\n\t\t\t);\n\t\t\toptionControl.className = 'ui-form-label';\n\t\t\tDom.append(optionControl, wrapper);\n\t\t\twrapper.getElementsByTagName('textarea')[0].className = 'ui-ctl-element ui-ctl-textarea ui-ctl-resize-y ui-ctl-w100';\n\t\t\tDom.style(wrapper.getElementsByTagName('textarea')[0], 'paddingTop', '6px');\n\t\t\twrapper.getElementsByTagName('button')[0].className = 'ui-btn ui-btn-xs ui-btn-light-border';\n\n\t\t\tcontrol.before(wrapper);\n\t\t}\n\n\t\tif (prop['Type'] === 'user')\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (control.getElementsByTagName('a').length > 0)\n\t\t{\n\t\t\tconst buttonAdd = control.getElementsByTagName('a')[0];\n\t\t\tEvent.bind(buttonAdd, 'click', () => {\n\t\t\t\tconst values = document.getElementsByName('VALUE[]');\n\t\t\t\tconst value = Runtime.clone(values[values.length - 1]);\n\n\t\t\t\tif (prop['Type'] !== 'date' && prop['Type'] !== 'datetime')\n\t\t\t\t{\n\t\t\t\t\t// remove wrapper div\n\t\t\t\t\tconst parent = values[values.length - 1].parentNode;\n\t\t\t\t\tif (parent)\n\t\t\t\t\t{\n\t\t\t\t\t\tparent.remove();\n\t\t\t\t\t}\n\t\t\t\t\tDom.insertBefore(value, buttonAdd.parentNode);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tsetSelectOptionFromForm(options)\n\t{\n\t\tthis.oldProperty.Options = options;\n\n\t\tthis.editInputValue('select', {\n\t\t\tOptions: options,\n\t\t\tType: 'select',\n\t\t\tMultiple : this.multipleNode.value\n\t\t});\n\t}\n\n\tsaveHandler(): boolean\n\t{\n\t\tconst formElements = this.form.elements;\n\t\tlet id = formElements['ID'].value;\n\t\tconst property = {\n\t\t\tName: formElements['NAME'].value,\n\t\t\tDescription: formElements['DESCRIPTION'].value,\n\t\t\tType: formElements['TYPE'].value,\n\t\t\tOptions: '',\n\t\t\tDefault: this.getValues(formElements),\n\t\t\tVisibility: formElements['VISIBILITY'].value,\n\t\t\tMultiple: formElements['MULTIPLE'].value,\n\t\t\tRequired: 'N',\n\t\t\tCreatedBy: this.oldProperty['CreatedBy'] ? this.oldProperty['CreatedBy'] : null,\n\t\t\tCreatedDate: this.oldProperty['CreatedDate'] ? this.oldProperty['CreatedDate'] : null\n\t\t};\n\n\t\tif (!this.validateName(property.Name))\n\t\t{\n\t\t\treturn true;\n\t\t}\n\n\t\tif (!id)\n\t\t{\n\t\t\tconst date = new Date();\n\t\t\tid = this.correspondenceModeToIdName[this.mode] + date.getTime().toString();\n\t\t}\n\n\t\tif (this.oldProperty.Options)\n\t\t{\n\t\t\tproperty.Options = this.oldProperty.Options;\n\t\t}\n\n\t\tconst me = this;\n\t\tGlobals.Manager.Instance.upsertGlobalsAction(id, property, this.signedDocumentType, this.mode).then((response) => {\n\t\t\tif (response.data && response.data.error)\n\t\t\t{\n\t\t\t\tMessageBox.alert(\n\t\t\t\t\tresponse.data.error,\n\t\t\t\t\t() => {\n\t\t\t\t\t\tDom.removeClass(me.saveButtonNode, 'ui-btn-wait');\n\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tme.sliderDict.set(id, property);\n\t\t\t\tme.slider.close();\n\t\t\t}\n\t\t});\n\n\t\treturn true;\n\t}\n\n\tgetValues(formElements): any\n\t{\n\t\tif (formElements['VALUE'])\n\t\t{\n\t\t\treturn formElements['VALUE'].value;\n\t\t}\n\n\t\tif (formElements['VALUE[]'])\n\t\t{\n\t\t\tconst radioNodeList = formElements['VALUE[]'];\n\t\t\tconst values = [];\n\t\t\tif (Type.isElementNode(radioNodeList))\n\t\t\t{\n\t\t\t\tif (radioNodeList.tagName !== 'SELECT')\n\t\t\t\t{\n\t\t\t\t\treturn radioNodeList.value;\n\t\t\t\t}\n\n\t\t\t\tfor (const i in Object.keys(radioNodeList.selectedOptions))\n\t\t\t\t{\n\t\t\t\t\tvalues.push(radioNodeList.selectedOptions[i].value);\n\t\t\t\t}\n\n\t\t\t\treturn values;\n\t\t\t}\n\n\t\t\tfor (const i in radioNodeList)\n\t\t\t{\n\t\t\t\tif (radioNodeList.hasOwnProperty(i))\n\t\t\t\t{\n\t\t\t\t\tvalues.push(radioNodeList[i].value);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn values;\n\t\t}\n\n\t}\n\n\tvalidateName(name): boolean\n\t{\n\t\tconst me = this;\n\t\tif (!name)\n\t\t{\n\t\t\tMessageBox.alert(\n\t\t\t\tBX.Loc.getMessage('BIZPROC_GLOBALFIELD_EDIT_TMP_EMPTY_NAME'),\n\t\t\t\t() => {\n\t\t\t\t\tDom.removeClass(me.saveButtonNode, 'ui-btn-wait');\n\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t);\n\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\n\t}\n}\n\nnamespace.GlobalFieldEditComponent = GlobalFieldEditComponent;"],"names":["namespace","Reflection","GlobalFieldEditComponent","options","Type","isPlainObject","oldProperty","property","documentType","signedDocumentType","mode","availableTypes","types","inputValueId","multipleNode","saveButtonNode","form","slider","sliderDict","getData","correspondenceModeToIdName","constant","variable","editInputValue","Event","bind","saveHandler","type","prop","Runtime","clone","defaultProperty","Multiple","Default","Placeholder","Loc","getMessage","undefined","Object","keys","isString","value","Options","control","BX","Bizproc","FieldType","renderControl","className","id","inputValueNode","document","getElementById","replaceWith","remove","wrapper","Tag","render","optionControl","createControlOptions","setSelectOptionFromForm","Dom","append","getElementsByTagName","style","before","length","buttonAdd","values","getElementsByName","parent","parentNode","insertBefore","formElements","elements","Name","Description","getValues","Visibility","Required","CreatedBy","CreatedDate","validateName","date","Date","getTime","toString","me","Globals","Manager","Instance","upsertGlobalsAction","then","response","data","error","MessageBox","alert","removeClass","set","close","radioNodeList","isElementNode","tagName","i","selectedOptions","push","hasOwnProperty","name"],"mappings":"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"}