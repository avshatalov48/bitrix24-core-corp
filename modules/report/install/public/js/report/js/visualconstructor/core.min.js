(function(){"use strict";BX.namespace("BX.Report.VC");BX.Report.VC.Core={entryUrl:"/bitrix/services/main/ajax.php",moduleName:"report",currentRunningAjaxRequests:[],abortAllRunningRequests:function(){for(var t=0;t<this.currentRunningAjaxRequests.length;t++){this.currentRunningAjaxRequests[t].abort()}},ajaxGet:function(t,n,e){if(e===undefined){e="report"}BX.ajax.runAction(e+".api."+t,{data:n.urlParams||{},onrequeststart:function(t){this.currentRunningAjaxRequests.push(t);if(BX.type.isFunction(n.onrequeststart)){n.onrequeststart(t)}}.bind(this)}).then(function(t){this._successHandler(t,n)}.bind(this)).catch(function(t){if(t.errors){console.error(t.errors.map(function(t){return t.message}).join("\n"))}else{console.error(t)}})},ajaxPost:function(t,n){BX.ajax.runAction("report.api."+t,{data:n.data||{},analyticsLabel:n.analyticsLabel||undefined,onrequeststart:function(t){this.currentRunningAjaxRequests.push(t);if(BX.type.isFunction(n.onrequeststart)){n.onrequeststart(t)}}.bind(this)}).then(function(t){this._successHandler(t,n)}.bind(this)).catch(function(t){var n=t.errors;console.error(n.map(function(t){return t.message}).join("\n"))})},ajaxSubmit:function(t,n){n.data=n.data||{};n.data["formParams"]=BX.ajax.prepareForm(t).data;BX.ajax.runAction("report.api."+t.getAttribute("action"),{data:n.data||{}}).then(function(t){n.onsuccess(t)}).catch(function(t){var n=t.errors;console.error(n.map(function(t){return t.message}).join("\n"))})},_successHandler:function(t,n){if(!t.assets){n.onFullSuccess(t);return}this.loadAssets(t.assets).then(function(){if(!BX.type.isArray(t.assets["string"])){n.onFullSuccess(t);return}for(var e=0;e<t.assets["string"].length;e++){BX.html(null,t.assets["string"][e])}n.onFullSuccess(t)})},loadAssets:function(t){if(!t){t={}}if(!t["js"]){t["js"]=[]}if(!t["css"]){t["css"]=[]}return new Promise(function(n){BX.load(t["css"],function(){BX.load(t["js"],function(){n()})})})},loadJsStings:function(t,n){for(var e=0;e<t.length;e++){BX.html(null,t[e])}n()},getPopup:function(t,n,e){return new BX.PopupWindow(t,n,{closeIcon:{right:"20px",top:"10px"},titleBar:e.title,width:570,height:500,zIndex:0,offsetLeft:0,offsetTop:0,draggable:{restrict:false},overlay:{backgroundColor:"black",opacity:"80"},events:e.events||{},buttons:e.buttons||{},content:e.content||""})},getClass:function(t){if(!BX.type.isNotEmptyString(t)){return null}var n=null;var e=window;var s=t.split(".");for(var o=0;o<s.length;o++){var r=s[o];if(!e[r]){return null}e=e[r];n=e}return n},getFunction:function(t){if(!BX.type.isNotEmptyString(t)){return null}var n=window;var e=t.split(".");for(var s=0;s<e.length-1;s++){if(!n[e[s]]){return null}n=n[e[s]]}return n[e[e.length-1]]?n[e[e.length-1]].bind(n):t}};BX.Report.VC.PopupWindowManager=BX.PopupWindowManager;BX.Report.VC.PopupWindowManager.getPopups=function(){return this._popups};BX.Report.VC.PopupWindowManager.adjustPopupsPositions=function(){var t=this.getPopups();for(var n=0;n<t.length;n++){t[n].adjustPosition()}};BX.Report.VC.PopupWindowManager.closeAllPopups=function(){var t=this.getPopups();for(var n=0;n<t.length;n++){t[n].close()}};BX.Report.VC.SetFontSize=function(t){this.items=t.node;this.init()};BX.Report.VC.SetFontSize.prototype={init:function(){this.show()},adjustFontSize:function(){this.show()},getFontSize:function(t){return getComputedStyle(t).fontSize.slice(0,-2)},appendNode:function(t){var n=this.getFontSize(t);if(n){for(var e=t.parentNode.offsetWidth,s=+n;e<t.offsetWidth+40;s--){t.style.fontSize=s+"px"}}},show:function(){for(var t=0;t<this.items.length;t++){this.appendNode(this.items[t])}}}})();
//# sourceMappingURL=core.map.js