(function(){"use strict";BX.namespace("BX.Report.VisualConstructor.FieldEventHandlers");BX.Report.VisualConstructor.FieldEventHandlers.PreviewBlock=function(e){BX.Report.VisualConstructor.Field.BaseHandler.apply(this,arguments)};BX.Report.VisualConstructor.FieldEventHandlers.PreviewBlock.prototype={__proto__:BX.Report.VisualConstructor.Field.BaseHandler.prototype,constructor:BX.Report.VisualConstructor.FieldEventHandlers.PreviewBlock,process:function(){switch(this.action){case"viewTypeSelect":if(this.optionsFromEvent.mode==="reloadConfigurations"){this.reloadForm()}else if(this.optionsFromEvent.mode==="reloadWidgetPreview"){this.reloadWidgetPreview()}break;case"whatWillCalculateChange":this.whatWillCalculateFieldChangeHandler();break;case"groupByChange":this.groupByFieldChange();break;case"reloadWidgetPreview":this.reloadWidgetPreview();break}},whatWillCalculateFieldChangeHandler:function(){},groupByFieldChange:function(){},reloadWidgetPreview:function(){this.rebuildPreviewWidgetData()},reloadForm:function(){var e=BX.ajax.prepareForm(this.currentFieldObject.getForm()).data;e.viewType=this.currentFieldObject.value;BX.Report.VC.Core.ajaxPost("widget.buildForm",{data:{params:e},onFullSuccess:BX.delegate(function(e){var t=BX.findParent(this.currentFieldObject.getForm(),{className:"report-widget-configuration"}).parentNode;BX.cleanNode(t);BX.html(t,e.data)},this)})},rebuildPreviewWidgetData:function(){this.currentFieldObject.showLoader();var e=BX.ajax.prepareForm(this.currentFieldObject.getForm()).data;e.viewType=this.currentFieldObject.value;BX.Report.VC.Core.ajaxPost("widget.constructPseudoWidget",{data:{params:e},onFullSuccess:BX.delegate(function(t){this.currentFieldObject.handlerChangePseudoWidget(e.viewType,t)},this)})}}})();