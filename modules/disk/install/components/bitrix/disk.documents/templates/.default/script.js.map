{"version":3,"file":"script.js","sources":["src/utils.js","src/backend.js","src/fields/sharing.js","src/fields/externallink.js","src/grid/common-grid.js","src/options.js","src/toolbar.js","src/gridmenu/item.js","src/gridmenu/itemopen.js","src/gridmenu/itemsharesection.js","src/gridmenu/iteminternallink.js","src/gridmenu/itemexternallink.js","src/gridmenu/itemrename.js","src/gridmenu/item-sharing.js","src/gridmenu/item-delete.js","src/gridmenu/index.js","src/grid/list.js","src/grid/tile.js","src/index.js"],"sourcesContent":["import 'main.polyfill.intersectionobserver';\n\nlet intersectionObserver;\nfunction observeIntersection(entity, callback)\n{\n\tif (!intersectionObserver)\n\t{\n\t\tintersectionObserver = new IntersectionObserver(function(entries) {\n\t\t\tentries.forEach((entry) => {\n\t\t\t\tif (entry.isIntersecting)\n\t\t\t\t{\n\t\t\t\t\tintersectionObserver.unobserve(entry.target);\n\t\t\t\t\tconst observedCallback = entry.target.observedCallback;\n\t\t\t\t\tdelete entry.target.observedCallback;\n\t\t\t\t\tsetTimeout(observedCallback);\n\t\t\t\t}\n\t\t\t});\n\t\t}, {\n\t\t\tthreshold: 0\n\t\t});\n\t}\n\tentity.observedCallback = callback;\n\n\tintersectionObserver.observe(entity);\n}\n\n\nexport {\n\tobserveIntersection\n}","import {ajax, Runtime} from 'main.core';\n\nclass BackendInner {\n\tstatic idsForShared = { }\n\tstatic idsForExternalLinks = { }\n\tstatic sendForInfo = Runtime.debounce(\n\t\tfunction()\n\t\t{\n\t\t\tconst requestData = {\n\t\t\t\t'shared': BackendInner.idsForShared,\n\t\t\t\t'externalLink': BackendInner.idsForExternalLinks\n\t\t\t}\n\t\t\tBackendInner.idsForShared = {};\n\t\t\tBackendInner.idsForExternalLinks = {};\n\n\t\t\tconst request = {};\n\t\t\tfor (let action in requestData)\n\t\t\t{\n\t\t\t\tif (requestData.hasOwnProperty(action))\n\t\t\t\t{\n\t\t\t\t\tfor (let id in requestData[action])\n\t\t\t\t\t{\n\t\t\t\t\t\tif (requestData[action].hasOwnProperty(id))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\trequest[id] = (request[id] || []);\n\t\t\t\t\t\t\trequest[id].push(action);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tajax\n\t\t\t\t.runComponentAction(\n\t\t\t\t\tBackend.component,\n\t\t\t\t\t'getInfo',\n\t\t\t\t\t{\n\t\t\t\t\t\tmode: 'ajax',\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\ttrackedObjectIds: request\n\t\t\t\t\t\t},\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t\t\t.then(({data}) => {\n\t\t\t\t\tfor (let action in requestData)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (requestData.hasOwnProperty(action))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfor (let id in requestData[action])\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif (requestData[action].hasOwnProperty(id))\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\trequestData[action][id][0]({data: data[id][action]});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch(({errors}) => {\n\t\t\t\t\tfor (let action in requestData)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (requestData.hasOwnProperty(action))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfor (let id in requestData[action])\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif (requestData[action].hasOwnProperty(id))\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\trequestData[action][id][1]({errors});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t}, 500\n\t)\n}\n\nexport default class Backend\n{\n\tstatic component: string = 'bitrix:disk.documents';\n\n\tstatic getShared(id)\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tBackendInner.idsForShared[id] = [resolve, reject];\n\t\t\tBackendInner.sendForInfo();\n\t\t});\n\t}\n\n\tstatic getExternalLink(id)\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tBackendInner.idsForExternalLinks[id] = [resolve, reject];\n\t\t\tBackendInner.sendForInfo();\n\t\t});\n\t}\n\n\tstatic getMenuActions(id)\n\t{\n\t\treturn ajax\n\t\t\t.runComponentAction(\n\t\t\t\tBackend.component,\n\t\t\t\t'getMenuActions',\n\t\t\t\t{\n\t\t\t\t\tmode: 'ajax',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\ttrackedObjectId: id\n\t\t\t\t\t},\n\t\t\t\t\tanalyticsLabel: Backend.component + '.gridMenuActions',\n\t\t\t\t}\n\t\t\t);\n\t}\n\n\tstatic getMenuOpenAction(id)\n\t{\n\t\treturn ajax\n\t\t\t.runComponentAction(\n\t\t\t\tBackend.component,\n\t\t\t\t'getMenuOpenAction',\n\t\t\t\t{\n\t\t\t\t\tmode: 'ajax',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\ttrackedObjectId: id\n\t\t\t\t\t},\n\t\t\t\t\tanalyticsLabel: Backend.component + '.gridMenuOpenAction',\n\t\t\t\t}\n\t\t\t);\n\t}\n\n\tstatic renameAction(id, newName)\n\t{\n\t\treturn ajax\n\t\t\t.runAction('disk.api.trackedObject.rename', {\n\t\t\t\tdata: {\n\t\t\t\t\tobjectId: id,\n\t\t\t\t\tnewName: newName\n\t\t\t\t}\n\t\t\t});\n\t}\n}","import {Loader} from 'main.loader';\nimport {Users} from 'disk.users';\nimport {observeIntersection} from \"../utils\";\nimport Backend from '../backend';\n\nexport class Sharing\n{\n\tid: Number;\n\tloader: ?Loader;\n\tnode: Element;\n\n\tconstructor(id, node)\n\t{\n\t\tthis.id = id;\n\t\tthis.node = node;\n\t\tthis.init();\n\t\tthis.observe();\n\t}\n\n\tinit()\n\t{\n\t\tthis.actionName = 'getShared';\n\t}\n\n\tobserve() {\n\t\tobserveIntersection(this.node, () => {\n\t\t\tthis.showLoading();\n\t\t\tBackend\n\t\t\t\t[this.actionName](this.id)\n\t\t\t\t.then(({data}) => {\n\t\t\t\t\tthis.hideLoading();\n\t\t\t\t\tthis.renderData(data);\n\t\t\t\t}, ({errors}) => {\n\t\t\t\t\tthis.hideLoading();\n\t\t\t\t\tconst errorMessages = [];\n\t\t\t\t\terrors.forEach((error) => {\n\t\t\t\t\t\terrorMessages.push(error.message);\n\t\t\t\t\t});\n\t\t\t\t\tthis.node.innerHTML = 'Error! ' + errorMessages.join('<br>');\n\t\t\t\t});\n\t\t});\n\t}\n\n\tshowLoading()\n\t{\n\t\tthis.loader = (this.loader || new Loader({target: this.node, mode: 'inline', size: 20}));\n\t\tthis.loader.show();\n\t\tthis.node.dataset.bxLoading = 'Y';\n\t}\n\n\thideLoading()\n\t{\n\t\tdelete this.node.dataset.bxLoading;\n\t\tthis.loader.hide();\n\t}\n\n\trenderData(data)\n\t{\n\t\tthis.node.innerHTML = '';\n\n\t\tconst res = new Users(data, null, {\n\t\t\tplaceInGrid: true\n\t\t});\n\t\tthis.node.appendChild(res.getContainer());\n\t}\n}","import {Sharing} from './sharing';\nimport {ExternalLinkForTrackedObject} from 'disk.external-link';\n\nexport class ExternalLink extends Sharing\n{\n\tinit()\n\t{\n\t\tthis.actionName = 'getExternalLink';\n\t}\n\n\tshowLoading()\n\t{\n\t}\n\n\thideLoading()\n\t{\n\t}\n\n\trenderData(data)\n\t{\n\t\tthis.node.innerHTML = '';\n\t\tconst res = new ExternalLinkForTrackedObject(this.id, data);\n\t\tthis.node.appendChild(res.getContainer());\n\t}\n}\n","\nexport default class CommonGrid\n{\n\t/**\n\t * @type {BX.TileGrid.Grid|BX.Main.grid}\n\t */\n\tgridInstance: any = null;\n\n\tconstructor(options)\n\t{\n\t\tthis.gridInstance = options.gridInstance;\n\t}\n\n\tgetId(): string\n\t{\n\t\treturn this.gridInstance.getId();\n\t}\n\n\tisGrid(): boolean\n\t{\n\t\treturn !this.isTile();\n\t}\n\n\tisTile(): boolean\n\t{\n\t\treturn BX.TileGrid.Grid && (this.gridInstance instanceof BX.TileGrid.Grid);\n\t}\n\n\tgetContainer(): HTMLElement\n\t{\n\t\treturn this.gridInstance.getContainer();\n\t}\n\n\tfade(): void\n\t{\n\t\tif (this.isGrid())\n\t\t{\n\t\t\tthis.gridInstance.tableFade();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.gridInstance.setFadeContainer();\n\t\t\tthis.gridInstance.getLoader();\n\t\t\tthis.gridInstance.showLoader();\n\t\t}\n\t}\n\n\tunFade(): void\n\t{\n\t\tif (this.isGrid())\n\t\t{\n\t\t\tthis.gridInstance.tableUnfade();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.gridInstance.getLoader().hide();\n\t\t\tthis.gridInstance.unSetFadeContainer();\n\t\t}\n\t}\n\n\tgetActionKey(): string\n\t{\n\t\treturn ('action_button_' + this.gridInstance.getId());\n\t}\n\n\tgetSelectedIds(): Array<string>\n\t{\n\t\tif (this.isGrid())\n\t\t{\n\t\t\treturn this.gridInstance.getRows().getSelectedIds();\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn this.gridInstance.getSelectedItems().map(function (item) {\n\t\t\t\treturn item.getId();\n\t\t\t});\n\t\t}\n\t}\n\n\tgetIds(): Array<string>\n\t{\n\t\tif (this.isGrid())\n\t\t{\n\t\t\treturn this.gridInstance.getRows().getBodyChild().map(function (row) {\n\t\t\t\treturn row.getId();\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn this.gridInstance.items.map(function (item) {\n\t\t\t\treturn item.id;\n\t\t\t});\n\t\t}\n\t}\n\n\tcountItems(): number\n\t{\n\t\tif (this.isGrid())\n\t\t{\n\t\t\treturn this.gridInstance.getRows().getBodyChild().length;\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn this.gridInstance.countItems();\n\t\t}\n\t}\n\n\treload(url, data)\n\t{\n\t\tdata = data || {};\n\n\t\tif (this.isGrid())\n\t\t{\n\t\t\tvar promise = new BX.Promise();\n\t\t\tthis.gridInstance.reloadTable(\n\t\t\t\t\"POST\",\n\t\t\t\tdata,\n\t\t\t\tfunction () {\n\t\t\t\t\tpromise.fulfill();\n\t\t\t\t},\n\t\t\t\turl\n\t\t\t);\n\n\t\t\treturn promise;\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn this.gridInstance.reload(url, data);\n\t\t}\n\t}\n\n\tgetActionsMenu(itemId): BX.Main.Menu\n\t{\n\t\tif (this.isGrid())\n\t\t{\n\t\t\treturn this.gridInstance.getRows().getById(itemId).getActionsMenu();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tvar item = this.gridInstance.getItem(itemId);\n\t\t\tif (item)\n\t\t\t{\n\t\t\t\treturn item.getActionsMenu();\n\t\t\t}\n\t\t}\n\t}\n\n\tgetItemById(id)\n\t{\n\t\tif (this.isGrid())\n\t\t{\n\t\t\treturn this.gridInstance.getRows().getById(id);\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn this.gridInstance.getItem(id);\n\t\t}\n\t}\n\n\tscrollTo(id): void\n\t{\n\t\tvar contentNode;\n\t\tif (this.isGrid())\n\t\t{\n\t\t\tvar row = this.gridInstance.getRows().getById(id);\n\t\t\tif (row && row.node)\n\t\t\t{\n\t\t\t\tcontentNode = row.node;\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tvar item = this.gridInstance.getItem(id);\n\t\t\tif (row && row.node)\n\t\t\t{\n\t\t\t\tcontentNode = row.getContainer();\n\t\t\t}\n\t\t}\n\n\t\tif (contentNode)\n\t\t{\n\t\t\t(new BX.easing({\n\t\t\t\tduration: 500,\n\t\t\t\tstart: {scroll: window.pageYOffset || document.documentElement.scrollTop},\n\t\t\t\tfinish: {scroll: BX.pos(contentNode).top},\n\t\t\t\ttransition: BX.easing.makeEaseOut(BX.easing.transitions.quart),\n\t\t\t\tstep: function (state) {\n\t\t\t\t\twindow.scrollTo(0, state.scroll);\n\t\t\t\t}\n\t\t\t})).animate();\n\t\t}\n\t}\n\n\tgetActionById(id, menuItemId)\n\t{\n\t\tvar item = this.getItemById(id);\n\t\tif (item)\n\t\t{\n\t\t\tvar actions = item.getActions();\n\t\t\tfor (var i = 0; i < actions.length; i++)\n\t\t\t{\n\t\t\t\tif (actions[i].id && actions[i].id === menuItemId)\n\t\t\t\t{\n\t\t\t\t\treturn actions[i];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tremoveItemById(itemId): void\n\t{\n\t\tBX.fireEvent(document, 'click');\n\n\t\tif (this.isGrid())\n\t\t{\n\t\t\tthis.gridInstance.removeRow(itemId);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tvar item = this.gridInstance.getItem(itemId);\n\t\t\tif (item)\n\t\t\t{\n\t\t\t\t//todo here we have to remove item from server\n\t\t\t\tthis.gridInstance.removeItem(item);\n\t\t\t}\n\t\t}\n\t}\n\n\tselectItemById(itemId): void\n\t{\n\t\tvar item;\n\t\tif (this.isGrid())\n\t\t{\n\t\t\titem = this.gridInstance.getRows().getById(itemId);\n\t\t\tif (item)\n\t\t\t{\n\t\t\t\titem.select();\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\titem = this.gridInstance.getItem(itemId);\n\t\t\tif (item)\n\t\t\t{\n\t\t\t\tthis.gridInstance.selectItem(item);\n\t\t\t}\n\t\t}\n\t}\n\n\tremoveSelected(): void\n\t{\n\t\tif (this.isGrid())\n\t\t{\n\t\t\tthis.gridInstance.removeSelected();\n\t\t}\n\t\telse\n\t\t{\n\t\t\t//todo here we have to remove items from server\n\t\t}\n\t}\n\n\tsortByColumn(column): void\n\t{\n\t\tthis.gridInstance.sortByColumn(column);\n\t}\n}","import {Reflection} from \"main.core\";\nimport CommonGrid from \"./grid/common-grid\";\n\nexport class Options\n{\n\tstatic gridId: String = 'diskDocumentsGrid'; // $arParams['GRID_ID']\n\tstatic filterId: String = 'diskDocumentsFilter'; // $arParams['GRID_ID']\n\tstatic editableExt = ['doc', 'docx', 'xls', 'xlsx', 'ppt', 'pptx', 'xodt'];\n\n\tstatic getGridId()\n\t{\n\t\treturn Options.gridId;\n\t}\n\n\tstatic getCommonGrid(): CommonGrid\n\t{\n\t\tlet gridInstance;\n\t\tconst gridId = this.getGridId();\n\t\tif (Reflection.getClass('BX.Main.gridManager') && BX.Main.gridManager.getInstanceById(gridId))\n\t\t{\n\t\t\tgridInstance = BX.Main.gridManager.getInstanceById(gridId);\n\t\t}\n\t\telse if (Reflection.getClass('BX.Main.tileGridManager') && BX.Main.tileGridManager.getInstanceById(gridId))\n\t\t{\n\t\t\tgridInstance = BX.Main.tileGridManager.getInstanceById(gridId);\n\t\t}\n\n\t\treturn new CommonGrid({\n\t\t\tgridInstance: gridInstance,\n\t\t});\n\t}\n\n\tstatic setGridId(gridId: ?String)\n\t{\n\t\tOptions.gridId = gridId;\n\t}\n\n\tstatic getFilterId()\n\t{\n\t\treturn Options.filterId;\n\t}\n\n\tstatic getEditableExt()\n\t{\n\t\treturn Options.editableExt;\n\t}\n\n\tstatic setEditableExt(extensions: ?Array)\n\t{\n\t\tOptions.editableExt = extensions;\n\t}\n\n\tstatic setViewList()\n\t{\n\t\tBX.userOptions.save('disk', 'documents', 'viewMode', 'list');\n\t\tBX.userOptions.save('disk', 'documents', 'viewSize', '');\n\t\twindow.location.reload();\n\t}\n\n\tstatic setViewSmallTile()\n\t{\n\t\tBX.userOptions.save('disk', 'documents', 'viewMode', 'tile');\n\t\tBX.userOptions.save('disk', 'documents', 'viewSize', 'm');\n\t\twindow.location.reload();\n\t}\n\n\tstatic setViewBigTile()\n\t{\n\t\tBX.userOptions.save('disk', 'documents', 'viewMode', 'tile');\n\t\tBX.userOptions.save('disk', 'documents', 'viewSize', 'xl');\n\t\twindow.location.reload();\n\t}\n}","import {BaseEvent, EventEmitter} from \"main.core.events\";\nimport CommonGrid from \"./grid/common-grid\";\nimport {Options as GridOptions} from \"./options\";\nimport {Reflection} from \"main.core\";\n\nexport default class Toolbar\n{\n\tconstructor()\n\t{\n\n\t}\n\n\tstatic reloadGridAndFocus(rowId: ?number)\n\t{\n\t\tconst commonGrid = GridOptions.getCommonGrid();\n\t\tcommonGrid.reload();\n\t}\n\n\tstatic runCreating(documentType, service): void\n\t{\n\t\tif (BX.message('disk_restriction'))\n\t\t{\n\t\t\t//this.blockFeatures();\n\t\t\treturn;\n\t\t}\n\n\t\tif (service === 'l' && BX.Disk.Document.Local.Instance.isEnabled())\n\t\t{\n\t\t\tBX.Disk.Document.Local.Instance.createFile({\n\t\t\t\ttype: documentType,\n\t\t\t}).then((response) => {\n\t\t\t\tthis.reloadGridAndFocus(response.object.id);\n\t\t\t});\n\n\t\t\treturn;\n\t\t}\n\n\t\tconst createProcess = new BX.Disk.Document.CreateProcess({\n\t\t\ttypeFile: documentType,\n\t\t\tserviceCode: service,\n\t\t\tonAfterSave: (response) => {\n\t\t\t\tif (response.status === 'success')\n\t\t\t\t{\n\t\t\t\t\tthis.reloadGridAndFocus(response.object.id);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tcreateProcess.start();\n\t}\n\n\tstatic resolveServiceCode(service)\n\t{\n\t\tif (!service)\n\t\t{\n\t\t\tservice = BX.Disk.getDocumentService();\n\t\t}\n\n\t\tif (service)\n\t\t{\n\t\t\treturn service;\n\t\t}\n\n\t\tif (BX.Disk.isAvailableOnlyOffice())\n\t\t{\n\t\t\treturn 'onlyoffice';\n\t\t}\n\n\t\tBX.Disk.InformationPopups.openWindowForSelectDocumentService({});\n\n\t\treturn null;\n\t}\n\n\tstatic createDocx(service)\n\t{\n\t\tconst code = this.resolveServiceCode(service);\n\t\tif (code)\n\t\t{\n\t\t\tthis.runCreating('docx', code);\n\t\t}\n\t}\n\n\tstatic createXlsx(service)\n\t{\n\t\tconst code = this.resolveServiceCode(service);\n\t\tif (code)\n\t\t{\n\t\t\tthis.runCreating('xlsx', code);\n\t\t}\n\t}\n\n\tstatic createPptx(service)\n\t{\n\t\tconst code = this.resolveServiceCode(service);\n\t\tif (code)\n\t\t{\n\t\t\tthis.runCreating('pptx', code);\n\t\t}\n\t}\n\n\tstatic createByDefault(service)\n\t{\n\t\tconsole.log('createByDefault: ', service);\n\t\tconsole.log('try to upload just for the test');\n\t}\n}","import {BaseEvent, EventEmitter} from 'main.core.events';\nimport {Menu, MenuItem} from 'main.popup';\nimport {Loader} from 'main.loader';\n\nexport default class Item extends EventEmitter\n{\n\ttrackedObjectId: Number;\n\tobjectId: ?Number;\n\tdata: Object = {};\n\tpopupMenuItem: ?MenuItem;\n\n\tconstructor(trackedObjectId, itemData)\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('Disk:Documents:');\n\t\tthis.trackedObjectId = trackedObjectId;\n\t\tthis.data = Object.assign({}, itemData);\n\t\tthis.data['className'] = (this.data['className'] || '') + ' disk-folder-list-context-menu-item';\n\t\tif (!this.data['text'])\n\t\t{\n\t\t\tthis.data['text'] = this.data['id'];\n\t\t}\n\t\tthis.objectId = this.data['objectId'];\n\t\tdelete this.data['objectId'];\n\t}\n\n\tgetData(key:?string)\n\t{\n\t\tif (key)\n\t\t{\n\t\t\treturn this.data[key];\n\t\t}\n\t\treturn this.data;\n\t}\n\n\tshowError(errors)\n\t{\n\t\tconsole.log('errors: ', errors);\n\t}\n\n\taddPopupMenuItem(popupMenu: Menu)\n\t{\n\t\tthis.popupMenuItem = popupMenu.addMenuItem(this.data);\n\t}\n\n\tshowLoad()\n\t{\n\t\tif (this.popupMenuItem)\n\t\t{\n\t\t\tthis.loader = (this.loader || new Loader({target: this.popupMenuItem.getContainer(), size: 32}));\n\t\t\tthis.loader.show();\n\t\t}\n\t}\n\n\thideLoad()\n\t{\n\t\tif (this.loader)\n\t\t{\n\t\t\tthis.loader.hide();\n\t\t}\n\t}\n\tstatic detect(itemData)\n\t{\n\t\treturn true;\n\t}\n}\n","import {Type} from 'main.core';\nimport Item from './item';\nimport Backend from '../backend';\n\nexport default class ItemOpen extends Item\n{\n\tconstructor(objectId, itemData)\n\t{\n\t\tsuper(objectId, itemData);\n\t\tthis.data['dataset'] = (this.data['dataset'] || {});\n\t\tthis.data['dataset']['preventCloseContextMenu'] = true;\n\t\tthis.data['onclick'] = function() {\n\t\t\tif (this.data['href'])\n\t\t\t{\n\t\t\t\treturn this.open();\n\t\t\t}\n\t\t\tthis.showLoad();\n\t\t\tBackend\n\t\t\t\t.getMenuOpenAction(this.objectId)\n\t\t\t\t.then(({data}) => {\n\t\t\t\t\tthis.hideLoad();\n\t\t\t\t\tthis.data['href'] = data;\n\t\t\t\t\tthis.open();\n\t\t\t\t})\n\t\t\t\t.catch(({errors}) => {\n\t\t\t\t\tthis.hideLoad();\n\t\t\t\t\tthis.showError(errors);\n\t\t\t\t})\n\t\t}.bind(this);\n\t}\n\n\topen()\n\t{\n\t\tif (Type.isStringFilled(this.data['href']))\n\t\t{\n\t\t\tBX.SidePanel.Instance.open(this.data['href']);\n\t\t\tthis.emit('close');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.showError([{text: 'Empty href'}])\n\t\t}\n\t}\n\n\tstatic detect(itemData)\n\t{\n\t\treturn itemData['id'] === 'open';\n\t}\n}\n\n","import {Type} from 'main.core';\nimport Item from './item';\nimport 'clipboard';\n\nexport default class ItemShareSection extends Item\n{\n\tconstructor(objectId, itemData)\n\t{\n\t\tsuper(objectId, itemData);\n\t\tthis.data['dataset'] = (this.data['dataset'] || {});\n\t\tthis.data['dataset']['preventCloseContextMenu'] = true;\n\t}\n\n\tstatic detect(itemData)\n\t{\n\t\treturn itemData['id'] === 'share-section';\n\t}\n}\n\n","import {MenuItem} from 'main.popup';\nimport Item from './item';\nimport 'clipboard';\n\nexport default class ItemInternalLink extends Item\n{\n\tconstructor(trackedObjectId, itemData)\n\t{\n\t\tsuper(trackedObjectId, itemData);\n\t\tthis.data['className'] += ' disk-documents-grid-actions-copy-internal-link';\n\t\tthis.data['html'] = [\n\t\t\tthis.data.text,\n\t\t\t'<span class=\"disk-documents-grid-actions-copy-internal-link-icon\">' +\n\t\t\t\t'<span class=\"disk-documents-grid-actions-copy-internal-link-icon-inner\">' +\n\t\t\t\t'</span>' +\n\t\t\t'</span>'\n\t\t].join('');\n\t\tdelete this.data['text'];\n\n\t\tthis.data['dataset'] = (this.data['dataset'] || {});\n\t\tthis.data['dataset']['preventCloseContextMenu'] = true;\n\t\tthis.data['onclick'] = function(event, menuItem: MenuItem) {\n\t\t\tconst target = menuItem.getLayout().item;\n\t\t\ttarget.classList.add('menu-popup-item-accept', 'disk-folder-list-context-menu-item-accept-animate');\n\t\t\ttarget.style.minWidth = (target.offsetWidth) + 'px';\n\t\t\tconst textNode = target.querySelector('.menu-popup-item-text');\n\t\t\tif (textNode)\n\t\t\t{\n\t\t\t\ttextNode.textContent = this.data['dataset']['textCopied'];\n\t\t\t}\n\t\t\tBX.clipboard.copy(this.data['dataset']['internalLink']);\n\t\t}.bind(this);\n\t}\n\n\tstatic detect(itemData)\n\t{\n\t\treturn itemData['id'] === 'internalLink';\n\t}\n}\n\n","import Item from './item';\nimport {ExternalLinkForTrackedObject} from 'disk.external-link';\nexport default class ItemExternalLink extends Item\n{\n\tconstructor(objectId, itemData)\n\t{\n\t\tsuper(objectId, itemData);\n\n\t\tconst shouldBlockFeature = itemData['dataset']['shouldBlockFeature']\n\t\tconst blocker = itemData['dataset']['blocker'];\n\n\t\tthis.data['onclick'] = function() {\n\t\t\tthis.emit('close');\n\n\t\t\tif (shouldBlockFeature && blocker)\n\t\t\t{\n\t\t\t\teval(blocker);\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tExternalLinkForTrackedObject.showPopup(this.trackedObjectId);\n\t\t}.bind(this);\n\t}\n\n\tstatic detect(itemData)\n\t{\n\t\treturn itemData['id'] === 'externalLink';\n\t}\n}","import {Text} from 'main.core';\nimport {Options as GridOptions} from '../options';\nimport Item from './item';\nimport Backend from \"../backend\";\n\nexport default class ItemRename extends Item\n{\n\tbuffExtension:string = '';\n\n\tconstructor(trackedObjectId, itemData)\n\t{\n\t\tsuper(trackedObjectId, itemData);\n\n\t\tif (!this.data['onclick'])\n\t\t{\n\t\t\tthis.data['onclick'] = this.rename.bind(this);\n\t\t}\n\t}\n\n\tcutExtension(name: string): string\n\t{\n\t\tthis.buffExtension = '';\n\t\tif (name.lastIndexOf('.') > 0)\n\t\t{\n\t\t\tthis.buffExtension = name.substr(name.lastIndexOf('.'));\n\t\t\treturn name.substr(0, name.lastIndexOf('.'));\n\t\t}\n\t\treturn name;\n\t}\n\n\trestoreExtension(name: string): string\n\t{\n\t\tname += this.buffExtension;\n\t\tthis.buffExtension = '';\n\t\treturn name;\n\t}\n\n\trename()\n\t{\n\t\tconst grid = BX.Main.gridManager\n\t\t\t.getInstanceById(GridOptions.getGridId());\n\n\t\tconst row = grid\n\t\t\t.getRows()\n\t\t\t.getById(this.trackedObjectId);\n\t\trow.edit();\n\n\t\tconst editorContainer = BX.Grid.Utils.getByClass(\n\t\t\trow.getNode(), 'main-grid-editor-container', true);\n\t\tconst input = editorContainer.querySelector('input');\n\n\t\tif (input)\n\t\t{\n\t\t\tinput.value = this.cutExtension(input.value);\n\t\t\tconst onBlur = function(event) {\n\t\t\t\tonBeforeSend(event);\n\t\t\t}.bind(this);\n\n\t\t\tconst onBeforeSend = (event) => {\n\t\t\t\tevent.stopPropagation();\n\t\t\t\tevent.preventDefault();\n\t\t\t\tconst fullName = this.restoreExtension(input.value);\n\t\t\t\tBackend\n\t\t\t\t\t.renameAction(this.trackedObjectId, fullName)\n\t\t\t\t\t.then(({data: {object: {name}}}) => {\n\t\t\t\t\t\tif (fullName !== name)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\trow.getNode().querySelector('#disk_obj_' + this.trackedObjectId).innerHTML = Text.encode(name);\n\t\t\t\t\t\t\trow.editData['NAME'] = name;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\tinput.removeEventListener('blur', onBlur);\n\t\t\t\trow.getNode().querySelector('#disk_obj_' + this.trackedObjectId).innerHTML = Text.encode(fullName);\n\t\t\t\trow.editData['NAME'] = fullName;\n\n\t\t\t\trow.editCancel();\n\t\t\t};\n\n\t\t\tinput.addEventListener('keydown', function(event) {\n\t\t\t\tif(event.key === 'Enter')\n\t\t\t\t{\n\t\t\t\t\tonBeforeSend(event);\n\t\t\t\t}\n\t\t\t\telse if(event.key === 'Escape')\n\t\t\t\t{\n\t\t\t\t\tinput.removeEventListener('blur', onBlur);\n\t\t\t\t\trow.editCancel();\n\t\t\t\t}\n\t\t\t}.bind(this));\n\t\t\tinput.addEventListener('blur', onBlur);\n\t\t\tBX.focus(input);\n\t\t}\n\t}\n\n\tstatic detect(itemData)\n\t{\n\t\treturn itemData['id'] === 'rename';\n\t}\n}\n\n","import Item from './item';\nimport {LegacyPopup, SharingControlType} from \"disk.sharing-legacy-popup\";\n\nexport default class ItemSharing extends Item\n{\n\tconstructor(trackedObjectId, itemData)\n\t{\n\t\tsuper(trackedObjectId, itemData);\n\n\t\tconst object = {\n\t\t\tid: itemData['dataset']['objectId'],\n\t\t\tname: itemData['dataset']['objectName'],\n\t\t}\n\n\t\tthis.data['onclick'] = () => {\n\t\t\tthis.emit('close');\n\n\t\t\tswitch (this.data['dataset']['type'])\n\t\t\t{\n\t\t\t\tcase SharingControlType.WITH_CHANGE_RIGHTS:\n\t\t\t\t\t(new LegacyPopup()).showSharingDetailWithChangeRights({\n\t\t\t\t\t\tobject: object\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tcase SharingControlType.WITH_SHARING:\n\t\t\t\t\t(new LegacyPopup()).showSharingDetailWithChangeRights({\n\t\t\t\t\t\tobject: object\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tcase SharingControlType.WITHOUT_EDIT:\n\t\t\t\t\t(new LegacyPopup()).showSharingDetailWithoutEdit({\n\t\t\t\t\t\tobject: object\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tstatic detect(itemData)\n\t{\n\t\treturn itemData['id'] === 'sharing';\n\t}\n}\n\n","import Item from './item';\nimport { MessageBox } from 'ui.dialogs.messagebox';\nimport {Loc, ajax as Ajax} from \"main.core\";\nimport {Options as GridOptions} from \"../options\";\n\nexport default class ItemDelete extends Item\n{\n\tobject: {id: number, name: string};\n\n\tconstructor(trackedObjectId, itemData)\n\t{\n\t\tsuper(trackedObjectId, itemData);\n\t\tthis.object = {\n\t\t\tid: itemData['dataset']['objectId'],\n\t\t\tname: itemData['dataset']['objectName'],\n\t\t};\n\n\t\tthis.data['onclick'] = this.handleClick.bind(this);\n\t}\n\n\thandleClick()\n\t{\n\t\tthis.emit('close');\n\n\t\tMessageBox.show({\n\t\t\ttitle: Loc.getMessage('DISK_DOCUMENTS_ACT_DELETE_TITLE'),\n\t\t\tmessage: Loc.getMessage('DISK_DOCUMENTS_ACT_DELETE_MESSAGE', {\n\t\t\t\t'#NAME#': this.object.name,\n\t\t\t}),\n\t\t\tmodal: true,\n\t\t\tbuttons: BX.UI.Dialogs.MessageBoxButtons.OK_CANCEL,\n\t\t\tokCaption: Loc.getMessage('DISK_DOCUMENTS_ACT_DELETE_OK_BUTTON'),\n\t\t\tonOk: this.handleClickDelete.bind(this),\n\t\t});\n\t}\n\n\thandleClickDelete(): boolean\n\t{\n\t\tAjax.runAction('disk.api.commonActions.markDeleted', {\n\t\t\tanalyticsLabel: 'folder.list.dd',\n\t\t\tdata: {\n\t\t\t\tobjectId: this.object.id\n\t\t\t}\n\t\t}).then((response) => {\n\t\t\tif (response.status === 'success')\n\t\t\t{\n\t\t\t\tconst commonGrid = GridOptions.getCommonGrid();\n\t\t\t\tcommonGrid.removeItemById(this.trackedObjectId);\n\t\t\t}\n\t\t});\n\n\t\treturn true;\n\t}\n\n\tstatic detect(itemData)\n\t{\n\t\treturn itemData['id'] === 'delete';\n\t}\n}\n\n","import Item from './item';\nimport ItemOpen from './itemopen';\nimport ItemShareSection from './itemsharesection';\nimport ItemInternalLink from './iteminternallink';\nimport ItemExternalLink from './itemexternallink';\nimport ItemRename from './itemrename';\nimport ItemSharing from \"./item-sharing\";\nimport ItemDelete from \"./item-delete\";\n\nconst itemMappings = [\n\tItemOpen,\n\tItemShareSection,\n\tItemSharing,\n\tItemInternalLink,\n\tItemExternalLink,\n\tItemRename,\n\tItemDelete,\n];\n\nexport default function getMenuItem(trackedObjectId, itemData)\n{\n\tlet itemClassName = Item;\n\titemMappings.forEach((itemClass) => {\n\t\tif (itemClass.detect(itemData))\n\t\t{\n\t\t\titemClassName = itemClass;\n\t\t}\n\t});\n\n\treturn new itemClassName(trackedObjectId, itemData);\n}","import {Dom, pos} from 'main.core';\nimport {Options as GridOptions} from '../options';\nimport {BaseEvent, EventEmitter} from \"main.core.events\";\nimport Backend from \"../backend\";\nimport getMenuItem from \"../gridmenu/index\";\n\nexport default class List\n{\n\tconstructor()\n\t{\n\t\tthis.addReloadGrid();\n\t\tthis.addMenuActionLoader();\n\n\t\tthis.bindEvents();\n\t}\n\n\tbindEvents(): void\n\t{\n\t\tEventEmitter.subscribe('Disk.OnlyOffice:onSaved', this.handleDocumentSaved.bind(this));\n\t}\n\n\thandleDocumentSaved(event: BaseEvent): void\n\t{\n\t\tconst [object, documentSession] = event.getCompatData();\n\t\tconst grid = BX.Main.gridManager.getInstanceById(GridOptions.getGridId());\n\t\tconst objectNode = grid.getBody().querySelector(`span[data-object-id=\"${object.id}\"]`)\n\t\tif (!objectNode)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst row = objectNode.closest('.main-grid-row');\n\t\tif (!row || !row.dataset.id)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst rowId = row.dataset.id;\n\t\tgrid.updateRow(rowId, null, null, () => {\n\t\t\tconst rowNode = grid.getRows().getById(rowId).getNode();\n\t\t\tif (!rowNode)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tDom.addClass(rowNode, 'main-grid-row-checked');\n\t\t\tsetInterval(() => {\n\t\t\t\tDom.removeClass(rowNode, 'main-grid-row-checked');\n\t\t\t}, 8000);\n\t\t});\n\t}\n\n\taddReloadGrid()\n\t{\n\t\tBX.addCustomEvent('onPopupFileUploadClose', () => {\n\t\t\tBX.Main.gridManager\n\t\t\t\t.getInstanceById(GridOptions.getGridId())\n\t\t\t\t.reload();\n\t\t});\n\t}\n\n\taddMenuActionLoader()\n\t{\n\t\tEventEmitter.subscribe(\n\t\t\t'onPopupFirstShow',\n\t\t\tfunction({compatData: [popup]}: BaseEvent) {\n\t\t\t\tif (popup.uniquePopupId.indexOf('menu-popup-main-grid-actions-menu-') !== 0)\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst objectId = popup.uniquePopupId.replace(/^menu-popup-main-grid-actions-menu-/, '');\n\n\t\t\t\tpopup.getContentContainer().classList.add('disk-documents-animate');\n\t\t\t\tpopup.getContentContainer().style.height = 80 + 'px';\n\n\t\t\t\tBackend\n\t\t\t\t\t.getMenuActions(objectId)\n\t\t\t\t\t.then(function({data}) {\n\t\t\t\t\t\tconst row =  BX.Main.gridManager\n\t\t\t\t\t\t\t.getInstanceById(GridOptions.getGridId())\n\t\t\t\t\t\t\t.getRows()\n\t\t\t\t\t\t\t.getById(objectId);\n\t\t\t\t\t\tconst menu = row.getActionsMenu();\n\n\t\t\t\t\t\trow.actions = [];\n\t\t\t\t\t\tconst prepareActionMenu = (item, index, ar) => {\n\t\t\t\t\t\t\tif (item['items'])\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\titem['items'].forEach(prepareActionMenu)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tconst menuItem = getMenuItem(objectId, item);\n\t\t\t\t\t\t\tmenuItem.subscribe('close', () => {\n\t\t\t\t\t\t\t\trow.closeActionsMenu();\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tif (ar === data)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tmenuItem.addPopupMenuItem(menu);\n\t\t\t\t\t\t\t\trow.actions.push(menuItem.getData());\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tar[index] = menuItem.getData();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t\tpopup.getContentContainer().style.height = (data.length * 36) + 16 + 'px';\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tpopup.getContentContainer().addEventListener('transitionend', () => {\n\t\t\t\t\t\t\tpopup.getContentContainer().classList.remove('disk-documents-animate');\n\t\t\t\t\t\t\tpopup.getContentContainer().style.height = '';\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tdata.forEach(prepareActionMenu);\n\t\t\t\t\t\tif (menu)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tmenu.removeMenuItem('loader');\n\t\t\t\t\t\t}\n\t\t\t\t\t}.bind(this))\n\t\t\t\t\t.catch(function({errors})\n\t\t\t\t\t{\n\t\t\t\t\t\t//Hide Loader and show errors\n\t\t\t\t\t\tconsole.log(errors);\n\t\t\t\t\t}.bind(this));\n\t\t\t}.bind(this)\n\t\t);\n\t}\n}\n","import {Tag, Loc} from 'main.core';\nimport {Options as GridOptions} from '../options';\nimport {BaseEvent, EventEmitter} from \"main.core.events\";\nimport Backend from \"../backend\";\nimport getMenuItem from \"../gridmenu/index\";\n\nexport default class Tile\n{\n\tconstructor()\n\t{\n\t\tthis.addReloadGrid();\n\t\tthis.addMenuActionLoader();\n\t\tthis.addFilterSequence();\n\t}\n\n\taddFilterSequence()\n\t{\n\t\tEventEmitter.subscribe(\n\t\t\t'BX.Main.Filter:apply',\n\t\t\tfunction({compatData: [filterId, data, filter, promise, params]}: BaseEvent)\n\t\t\t{\n\t\t\t\tif (filterId === GridOptions.getFilterId())\n\t\t\t\t{\n\t\t\t\t\tpromise.then(function () {\n\t\t\t\t\t\tBX.Main.tileGridManager\n\t\t\t\t\t\t\t.getInstanceById(GridOptions.getGridId())\n\t\t\t\t\t\t\t.reload();\n\t\t\t\t\t}.bind(this));\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t}\n\n\taddReloadGrid()\n\t{\n\t\tBX.addCustomEvent('onPopupFileUploadClose', () => {\n\t\t\tBX.Main.tileGridManager\n\t\t\t\t.getInstanceById(GridOptions.getGridId())\n\t\t\t\t.reload();\n\t\t});\n\t}\n\n\taddMenuActionLoader()\n\t{\n\t\tEventEmitter.subscribe(\n\t\t\t'Disk:Documents:TileGrid:MenuAction:FirstShow',\n\t\t\tfunction({compatData: [row, objectId, menuPopup]}: BaseEvent) {\n\t\t\t\tBackend\n\t\t\t\t\t.getMenuActions(objectId)\n\t\t\t\t\t.then(function({data}) {\n\t\t\t\t\t\tconst menu = menuPopup;\n\t\t\t\t\t\trow.actions = [];\n\t\t\t\t\t\tconst prepareActionMenu = (item, index, ar) => {\n\t\t\t\t\t\t\tif (item['items'])\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\titem['items'].forEach(prepareActionMenu)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (item['id'] === 'rename')\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\titem['onclick'] = row.onRename.bind(row);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tconst menuItem = getMenuItem(objectId, item);\n\t\t\t\t\t\t\tmenuItem.subscribe('close', () => {\n\t\t\t\t\t\t\t\tmenu.close();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tif (ar === data)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tmenuItem.addPopupMenuItem(menu);\n\t\t\t\t\t\t\t\trow.actions.push(menuItem.getData());\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tar[index] = menuItem.getData();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdata.forEach(prepareActionMenu);\n\n\t\t\t\t\t\tif (menu)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tmenu.removeMenuItem('loader');\n\t\t\t\t\t\t}\n\t\t\t\t\t}.bind(this))\n\t\t\t\t\t.catch(function({errors})\n\t\t\t\t\t{\n\t\t\t\t\t\t//Hide Loader and show errors\n\t\t\t\t\t\tconsole.log(errors);\n\t\t\t\t\t}.bind(this));\n\t\t\t}.bind(this)\n\t\t);\n\t}\n\n\tstatic generateEmptyBlock()\n\t{\n\t\treturn Tag.render`\n\t\t<div class=\"disk-folder-list-no-data-inner\">\n\t\t\t<div class=\"disk-folder-list-no-data-inner-message\">\n\t\t\t\t${Loc.getMessage('DISK_DOCUMENTS_GRID_TILE_EMPTY_BLOCK_TITLE')}\n\t\t\t</div>\n\t\t\t<div class=\"disk-folder-list-no-data-inner-variable\">\n\t\t\t\t<div class=\"disk-folder-list-no-data-inner-create-file\" onmouseover=\"BX.onCustomEvent(window, 'onDiskUploadPopupShow', [this]);\">\n\t\t\t\t\t${Loc.getMessage('DISK_DOCUMENTS_GRID_TILE_EMPTY_BLOCK_UPLOAD')}</div>\n\t\t\t</div>\n\t\t</div>`;\n\t}\n}","import {Sharing} from './fields/sharing';\nimport {ExternalLink} from './fields/externallink';\nimport Toolbar from './toolbar';\nimport GridList from './grid/list';\nimport GridTile from './grid/tile';\nimport {Options as GridOptions, Options} from './options';\nimport {Ears} from 'ui.ears';\nimport {EventEmitter} from 'main.core.events';\nimport Backend from './backend';\n\nfunction showShared(objectId, node) {\n\tnew Sharing(objectId, node);\n}\n\nfunction showExternalLink(objectId, node) {\n\tnew ExternalLink(objectId, node);\n}\n\nconst TileGridEmptyBlockGenerator = GridTile.generateEmptyBlock;\nexport {\n\tshowExternalLink,\n\tshowShared,\n\tToolbar,\n\tOptions,\n\tTileGridEmptyBlockGenerator,\n\tBackend\n}\n\n//Template things\nBX.ready(() => {\n\tif (BX.Main.gridManager && BX.Main.gridManager\n\t\t.getInstanceById(GridOptions.getGridId()))\n\t{\n\t\tnew GridList;\n\t}\n\telse if (BX.Main.tileGridManager && BX.Main.tileGridManager\n\t\t.getInstanceById(GridOptions.getGridId()))\n\t{\n\t\tnew GridTile;\n\t}\n\telse\n\t{\n\t\tEventEmitter.subscribeOnce(EventEmitter.GLOBAL_TARGET, 'Grid::ready', ({compatData: [instance]}) => {\n\t\t\tif (instance && instance.getId() === GridOptions.getGridId())\n\t\t\t{\n\t\t\t\tnew GridList;\n\t\t\t}\n\t\t});\n\t\tEventEmitter.subscribeOnce(EventEmitter.GLOBAL_TARGET, 'BX.TileGrid.Grid:initialized', ({compatData: [instance]}) => {\n\t\t\tif (instance && instance.getId() === GridOptions.getGridId())\n\t\t\t{\n\t\t\t\tnew GridTile;\n\t\t\t}\n\t\t});\n\t}\n\n\tif (document.querySelector('#disk-documents-control-panel'))\n\t{\n\t\tconst ears = new Ears({\n\t\t\tcontainer: document.querySelector('#disk-documents-control-panel'),\n\t\t\tnoScrollbar: false,\n\t\t\tclassName: 'disk-documents-ears'\n\t\t});\n\t\tears.init();\n\t}\n\n\tconst func = (id, uploader) => {\n\t\tuploader.limits[\"uploadFileExt\"] = Options.getEditableExt().join(',');\n\t\tuploader.limits[\"uploadFile\"] = '.' + Options.getEditableExt().join(',.');\n\t\tif (uploader.fileInput)\n\t\t{\n\t\t\tuploader.fileInput.accept = uploader.limits[\"uploadFile\"];\n\t\t}\n\t}\n\tif (BX.UploaderManager && BX.UploaderManager.getById('DiskDocuments'))\n\t{\n\t\tfunc('DiskDocuments', BX.UploaderManager.getById('DiskDocuments'));\n\t}\n\telse\n\t{\n\t\tconst listener = ({compatData: [id, uploader]}) => {\n\t\t\tsetTimeout(() => {\n\t\t\t\tfunc(id, uploader)\n\t\t\t}, 200);\n\t\t\tEventEmitter.unsubscribe(EventEmitter.GLOBAL_TARGET, 'onUploaderIsInited', listener);\n\t\t};\n\t\tEventEmitter.subscribe(EventEmitter.GLOBAL_TARGET, 'onUploaderIsInited', listener);\n\t}\n});"],"names":["intersectionObserver","observeIntersection","entity","callback","IntersectionObserver","entries","forEach","entry","isIntersecting","unobserve","target","observedCallback","setTimeout","threshold","observe","BackendInner","Runtime","debounce","requestData","idsForShared","idsForExternalLinks","request","action","hasOwnProperty","id","push","ajax","runComponentAction","Backend","component","mode","data","trackedObjectIds","then","errors","Promise","resolve","reject","sendForInfo","trackedObjectId","analyticsLabel","newName","runAction","objectId","Sharing","node","init","actionName","showLoading","hideLoading","renderData","errorMessages","error","message","innerHTML","join","loader","Loader","size","show","dataset","bxLoading","hide","res","Users","placeInGrid","appendChild","getContainer","ExternalLink","ExternalLinkForTrackedObject","CommonGrid","options","gridInstance","getId","isTile","BX","TileGrid","Grid","isGrid","tableFade","setFadeContainer","getLoader","showLoader","tableUnfade","unSetFadeContainer","getRows","getSelectedIds","getSelectedItems","map","item","getBodyChild","row","items","length","countItems","url","promise","reloadTable","fulfill","reload","itemId","getById","getActionsMenu","getItem","contentNode","easing","duration","start","scroll","window","pageYOffset","document","documentElement","scrollTop","finish","pos","top","transition","makeEaseOut","transitions","quart","step","state","scrollTo","animate","menuItemId","getItemById","actions","getActions","i","fireEvent","removeRow","removeItem","select","selectItem","removeSelected","column","sortByColumn","Options","gridId","getGridId","Reflection","getClass","Main","gridManager","getInstanceById","tileGridManager","filterId","editableExt","extensions","userOptions","save","location","Toolbar","rowId","commonGrid","GridOptions","getCommonGrid","documentType","service","Disk","Document","Local","Instance","isEnabled","createFile","type","response","reloadGridAndFocus","object","createProcess","CreateProcess","typeFile","serviceCode","onAfterSave","status","getDocumentService","isAvailableOnlyOffice","InformationPopups","openWindowForSelectDocumentService","code","resolveServiceCode","runCreating","console","log","Item","itemData","setEventNamespace","Object","assign","key","popupMenu","popupMenuItem","addMenuItem","EventEmitter","ItemOpen","open","showLoad","getMenuOpenAction","hideLoad","showError","bind","Type","isStringFilled","SidePanel","emit","text","ItemShareSection","ItemInternalLink","event","menuItem","getLayout","classList","add","style","minWidth","offsetWidth","textNode","querySelector","textContent","clipboard","copy","ItemExternalLink","shouldBlockFeature","blocker","eval","showPopup","ItemRename","rename","name","buffExtension","lastIndexOf","substr","grid","edit","editorContainer","Utils","getByClass","getNode","input","value","cutExtension","onBlur","onBeforeSend","stopPropagation","preventDefault","fullName","restoreExtension","renameAction","Text","encode","editData","removeEventListener","editCancel","addEventListener","focus","ItemSharing","SharingControlType","WITH_CHANGE_RIGHTS","LegacyPopup","showSharingDetailWithChangeRights","WITH_SHARING","WITHOUT_EDIT","showSharingDetailWithoutEdit","ItemDelete","handleClick","MessageBox","title","Loc","getMessage","modal","buttons","UI","Dialogs","MessageBoxButtons","OK_CANCEL","okCaption","onOk","handleClickDelete","Ajax","removeItemById","itemMappings","getMenuItem","itemClassName","itemClass","detect","List","addReloadGrid","addMenuActionLoader","bindEvents","subscribe","handleDocumentSaved","getCompatData","documentSession","objectNode","getBody","closest","updateRow","rowNode","Dom","addClass","setInterval","removeClass","addCustomEvent","compatData","popup","uniquePopupId","indexOf","replace","getContentContainer","height","getMenuActions","menu","prepareActionMenu","index","ar","closeActionsMenu","addPopupMenuItem","getData","remove","removeMenuItem","Tile","addFilterSequence","filter","params","getFilterId","menuPopup","onRename","close","Tag","render","showShared","showExternalLink","TileGridEmptyBlockGenerator","GridTile","generateEmptyBlock","ready","GridList","subscribeOnce","GLOBAL_TARGET","instance","ears","Ears","container","noScrollbar","className","func","uploader","limits","getEditableExt","fileInput","accept","UploaderManager","listener","unsubscribe"],"mappings":"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"}