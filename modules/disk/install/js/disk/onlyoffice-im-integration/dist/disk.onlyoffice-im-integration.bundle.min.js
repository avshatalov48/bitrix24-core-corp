this.BX=this.BX||{};this.BX.Disk=this.BX.Disk||{};(function(e,t,i){"use strict";var a=function(){function e(t){babelHelpers.classCallCheck(this,e);this.options=t;this.bindEvents()}babelHelpers.createClass(e,[{key:"bindEvents",value:function e(){var t=this;window.addEventListener("message",(function(e){if(e.data.type==="selectedTemplate"){t.options.delegate.setMaxWidth(961);t.options.delegate.onDocumentCreated()}}))}},{key:"getIframeUrlForCreate",value:function e(t){var i=this;this.options.delegate.setMaxWidth(961);return new Promise((function(e,a){var n=BX.util.add_url_param("/bitrix/services/main/ajax.php",{action:"disk.api.integration.messengerCall.createDocumentInCall",typeFile:t.typeFile,callId:i.options.call.id,dialogId:i.options.dialog.id});e(n)}))}},{key:"getIframeUrl",value:function e(t){this.options.delegate.setMaxWidth(961);return new Promise((function(e,i){t.viewerItem.enableEditInsteadPreview();var a=t.viewerItem.getSliderQueryParameters();var n=BX.util.add_url_param("/bitrix/services/main/ajax.php",a);e(n)}))}},{key:"getIframeUrlForTemplates",value:function e(){var t=this;return new Promise((function(e,a){i.ajax.runAction("disk.api.integration.messengerCall.selectTemplateOrOpenExisting",{data:{callId:t.options.call.id,dialogId:t.options.dialog.id}}).then((function(i){if(i.data.document&&i.data.document.urlToEdit){t.options.delegate.setMaxWidth(961);e(i.data.document.urlToEdit)}else if(i.data.template&&i.data.template.urlToSelect){t.options.delegate.setMaxWidth(328);e(i.data.template.urlToSelect)}else{a()}}))}))}},{key:"listResumesInChat",value:function e(t){return new Promise((function(e,a){i.ajax.runAction("disk.api.integration.messengerCall.listResumesInChat",{data:{chatId:t}}).then((function(t){if(t.data){e(t.data.resumes)}else{a()}}))["catch"]((function(){a()}))}))}},{key:"onCloseIframe",value:function e(t){t.contentWindow.postMessage("closeIframe","*");return true}}]);return e}();e.CreateDocument=a})(this.BX.Disk.OnlyOfficeImIntegration=this.BX.Disk.OnlyOfficeImIntegration||{},BX.Disk.Viewer,BX);
//# sourceMappingURL=disk.onlyoffice-im-integration.bundle.map.js