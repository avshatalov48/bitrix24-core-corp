(function(){"use strict";BX.namespace("BX.Disk.Viewer");BX.Disk.Viewer.Actions=function(e){};BX.Disk.Viewer.Actions.prototype={};BX.Disk.Viewer.Actions.checkFirstRun=function(){if(!BX.Disk.getDocumentService()){BX.Disk.InformationPopups.openWindowForSelectDocumentService({});return true}return false};BX.Disk.Viewer.Actions.runActionDefaultEdit=function(e,t,i){if(BX.Disk.Viewer.Actions.checkFirstRun()){if(i.modalWindow){i.modalWindow.close()}return}i=i||{};if(BX.Disk.getDocumentService()!=="l"){BX.UI.Viewer.Instance.openByNode(e.sourceNode)}var o={objectId:t.objectId,attachedObjectId:t.attachedObjectId,name:t.name,serviceCode:BX.Disk.getDocumentService(),modalWindow:i.modalWindow};BX.Disk.Viewer.Actions.runActionEdit(o)};BX.Disk.Viewer.Actions.runActionEdit=function(e){e=e||{};console.log("runActionEdit",e);if(e.serviceCode==="l"){if(BX.Disk.Document.Local.Instance.isEnabled()){BX.Disk.Document.Local.Instance.editFile(e)}else{BX.Disk.InformationPopups.getHelpDialogToUseLocalService().show()}}else{var t=new BX.Disk.Document.EditProcess({objectId:e.objectId,attachedObjectId:e.attachedObjectId,serviceCode:e.serviceCode,modalWindow:e.modalWindow,onAfterSave:function(e){if(e.status==="success"&&BX.getClass("BX.UI.Viewer.Instance")){BX.UI.Viewer.Instance.reloadCurrentItem()}}});t.start()}};BX.Disk.Viewer.Actions.runActionCopyToMe=function(e,t){BX.Disk.showActionModal({html:BX.message("DISK_VIEWER_DESCR_PROCESS_SAVE_FILE_TO_OWN_FILES").replace("#NAME#",'<a href="#" class="bx-viewer-file-link">'+e.title+"</a>"),showLoaderIcon:true,autoHide:false});var i;if(t.attachedObjectId){i=BX.ajax.runAction("disk.attachedObject.copyTome",{analyticsLabel:"uf.copyTome",data:{attachedObjectId:t.attachedObjectId}})}else if(t.objectId){i=BX.ajax.runAction("disk.api.file.copyTome",{analyticsLabel:"folder.list.copyTome",data:{fileId:t.objectId}})}if(i){i.then(function(t){BX.Disk.showActionModal({html:BX.message("DISK_VIEWER_DESCR_SAVE_FILE_TO_OWN_FILES").replace("#NAME#",'<a target="_blank" href="'+t.data.file.extra.showInGridUri+'" class="bx-viewer-file-link">'+e.title+"</a>"),showLoaderIcon:false,autoHide:true})}.bind(this))}}})();
//# sourceMappingURL=actions.map.js