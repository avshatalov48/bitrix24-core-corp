(function(){"use strict";BX.namespace("BX.Disk.Viewer");BX.Disk.Viewer.Actions=function(e){};BX.Disk.Viewer.Actions.prototype={};BX.Disk.Viewer.Actions.checkFirstRun=function(){if(!BX.Disk.getDocumentService()){BX.Disk.InformationPopups.openWindowForSelectDocumentService({});return true}return false};BX.Disk.Viewer.Actions.runActionDefaultEdit=function(e,i,t){t=t||{};if(BX.Disk.Viewer.Actions.checkFirstRun()){if(t.modalWindow){t.modalWindow.close()}return}var n=BX.Disk.getDocumentService()==="onlyoffice";if(!n&&BX.getClass("BX.Disk.Viewer.OnlyOfficeItem")){n=e instanceof BX.Disk.Viewer.OnlyOfficeItem}if(BX.Disk.getDocumentService()!=="l"&&!n&&!BX.UI.Viewer.Instance.isOpen()){BX.UI.Viewer.Instance.openByNode(e.sourceNode)}var o={objectId:i.objectId,attachedObjectId:i.attachedObjectId,name:i.name,serviceCode:BX.Disk.getDocumentService(),modalWindow:t.modalWindow};BX.Disk.Viewer.Actions.runActionEdit(o)};BX.Disk.Viewer.Actions.runActionEdit=function(e){e=e||{};if(BX.getClass("BX.UI.Viewer.Instance")){var i=BX.UI.Viewer.Instance.actionPanel.getItemById("edit");if(i){i.changeIconClass("disk-viewer-panel-icon-"+e.serviceCode)}}BX.Disk.saveDocumentService(e.serviceCode);if(e.serviceCode==="l"){if(BX.Disk.Document.Local.Instance.isEnabled()){BX.Disk.Document.Local.Instance.editFile(e)}else{BX.Disk.InformationPopups.getHelpDialogToUseLocalService().show()}}else{var t=new BX.Disk.Document.EditProcess({objectId:e.objectId,attachedObjectId:e.attachedObjectId,serviceCode:e.serviceCode,modalWindow:e.modalWindow,onAfterSave:function(e){if(e.status==="success"&&BX.getClass("BX.UI.Viewer.Instance")){if(BX.UI.Viewer.Instance.isOpen()){BX.UI.Viewer.Instance.reloadCurrentItem()}else if(BX.Disk.getDocumentService()!=="onlyoffice"){BX.Disk.showModalWithStatusAction()}}}});t.start()}};BX.Disk.Viewer.Actions.runActionInfo=function(e,i){var t=i.objectId;if(BX.SidePanel.Instance.isOpen()&&BX.SidePanel.Instance.getTopSlider().getUrl()==="widget:file-props-"+t){BX.SidePanel.Instance.getTopSlider().close();return}BX.SidePanel.Instance.open("widget:file-props-"+t,{cacheable:false,contentCallback:function(e){var i=new BX.Promise;BX.ajax.runAction("disk.file.showProperties",{data:{fileId:t}}).then((function(t){e.getData().set("configurationFormContent",t.data.html);i.fulfill(t.data)}));return i},animationDuration:100,width:370,events:{onLoad:function(e){var i=e.getSlider();BX.html(i.layout.content,i.getData().get("configurationFormContent"))}}})};BX.Disk.Viewer.Actions.runActionCopyToMe=function(e,i){BX.Disk.showActionModal({html:BX.message("DISK_VIEWER_DESCR_PROCESS_SAVE_FILE_TO_OWN_FILES").replace("#NAME#",'<a href="#" class="bx-viewer-file-link">'+e.title+"</a>"),showLoaderIcon:true,autoHide:false});var t;if(i.attachedObjectId){t=BX.ajax.runAction("disk.attachedObject.copyTome",{analyticsLabel:"uf.copyTome",data:{attachedObjectId:i.attachedObjectId}})}else if(i.objectId){t=BX.ajax.runAction("disk.api.file.copyTome",{analyticsLabel:"folder.list.copyTome",data:{fileId:i.objectId}})}if(t){t.then(function(i){BX.Disk.showActionModal({html:BX.message("DISK_VIEWER_DESCR_SAVE_FILE_TO_OWN_FILES").replace("#NAME#",'<a target="_blank" href="'+i.data.file.extra.showInGridUri+'" class="bx-viewer-file-link">'+e.title+"</a>"),showLoaderIcon:false,autoHide:true})}.bind(this))}}})();
//# sourceMappingURL=actions.map.js