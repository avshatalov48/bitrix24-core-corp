(function(){"use strict";BX.namespace("BX.Disk.Viewer");BX.Disk.Viewer.OnlyOfficeItem=function(e){e=e||{};BX.UI.Viewer.Item.apply(this,arguments);this.objectId=e.objectId;this.attachedObjectId=e.attachedObjectId;this.versionId=e.versionId;this.openEditInsteadPreview=e.openEditInsteadPreview};BX.Disk.Viewer.OnlyOfficeItem.prototype={__proto__:BX.UI.Viewer.Item.prototype,constructor:BX.UI.Viewer.Item,setController:function(e){BX.UI.Viewer.Item.prototype.setController.apply(this,arguments);this.controller.preload=0},setPropertiesByNode:function(e){BX.UI.Viewer.Item.prototype.setPropertiesByNode.apply(this,arguments);this.objectId=e.dataset.objectId;this.attachedObjectId=e.dataset.attachedObjectId;this.versionId=e.dataset.versionId;this.openEditInsteadPreview=e.dataset.openEditInsteadPreview},loadData:function(){var e=BX.util.getRandomString(16);BX.Disk.sendTelemetryEvent({action:"start",uid:e});var t=BX.getClass("BX.Disk.OnlyOfficePromo.PromoPopup");if(t){if(BX.Disk.OnlyOfficePromo.PromoPopup.shouldBlockViewAndEdit()){BX.Disk.OnlyOfficePromo.PromoPopup.showCommonPromoForNonPaid();return new BX.Promise}}BX.SidePanel.Instance.open(BX.util.add_url_param("/bitrix/services/main/ajax.php",this.getSliderQueryParameters()),{width:"100%",cacheable:false,customLeftBoundary:30,allowChangeHistory:false,data:{documentEditor:true,uid:e}});if(t){if(BX.Disk.OnlyOfficePromo.PromoPopup.shouldShowViewPromo()){BX.Disk.OnlyOfficePromo.PromoPopup.showViewPromo()}}return new BX.Promise},getSliderQueryParameters:function(){var e="disk.api.documentService.goToPreview";var t=BX.getClass("BX.Disk.OnlyOfficePromo.PromoPopup");if(this.openEditInsteadPreview&&BX.Disk.getDocumentService()==="onlyoffice"){if(!t||!BX.Disk.OnlyOfficePromo.PromoPopup.shouldShowEditPromo()){e="disk.api.documentService.goToEditOrPreview"}}return{action:e,serviceCode:"onlyoffice",objectId:this.objectId||0,attachedObjectId:this.attachedObjectId||0,versionId:this.versionId||0}}}})();
//# sourceMappingURL=onlyoffice-item.map.js