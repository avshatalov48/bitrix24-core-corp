{"version":3,"file":"external-link.bundle.js","sources":["src/backend.js","src/input.js","src/input-extended.js","src/input-simple.js","src/input-extended-for-tracked-object.js","src/input-simple-for-tracked-object.js"],"sourcesContent":["import {ajax} from 'main.core';\n\nclass Backend\n{\n\tstatic disableExternalLink(objectId): Promise\n\t{\n\t\treturn ajax.runAction('disk.api.commonActions.disableExternalLink', {\n\t\t\tdata: {\n\t\t\t\tobjectId: objectId\n\t\t\t}\n\t\t});\n\t}\n\n\tstatic generateExternalLink(objectId): Promise\n\t{\n\t\treturn ajax.runAction('disk.api.commonActions.generateExternalLink', {\n\t\t\tdata: {\n\t\t\t\tobjectId: objectId\n\t\t\t}\n\t\t})\n\t}\n\n\tstatic getExternalLink(objectId): Promise\n\t{\n\t\treturn ajax.runAction('disk.api.commonActions.getExternalLink', {\n\t\t\tdata: {\n\t\t\t\tobjectId: objectId\n\t\t\t}\n\t\t})\n\t}\n\n\tstatic setDeathTime(externalLinkId: number, deathTimeTimestamp: number): Promise\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tajax.runAction('disk.api.externalLink.setDeathTime', {\n\t\t\t\tdata: {\n\t\t\t\t\texternalLinkId: externalLinkId,\n\t\t\t\t\tdeathTime: deathTimeTimestamp\n\t\t\t\t}\n\t\t\t}).then(resolve, reject)\n\t\t});\n\t}\n\n\tstatic revokeDeathTime(externalLinkId: number): Promise\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tajax.runAction('disk.api.externalLink.revokeDeathTime', {\n\t\t\t\tdata: {\n\t\t\t\t\texternalLinkId: externalLinkId\n\t\t\t\t}\n\t\t\t}).then(resolve, reject)\n\t\t});\n\t}\n\n\tstatic setPassword(externalLinkId: number, newPassword: string): Promise\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tajax.runAction('disk.api.externalLink.setPassword', {\n\t\t\t\tdata: {\n\t\t\t\t\texternalLinkId: externalLinkId,\n\t\t\t\t\tnewPassword: newPassword\n\t\t\t\t}\n\t\t\t}).then(resolve, reject)\n\t\t});\n\t}\n\n\tstatic revokePassword(externalLinkId: number): Promise\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tajax.runAction('disk.api.externalLink.revokePassword', {\n\t\t\t\tdata: {\n\t\t\t\t\texternalLinkId: externalLinkId\n\t\t\t\t}\n\t\t\t}).then(resolve, reject)\n\t\t});\n\t}\n\n\tstatic allowEditDocument(externalLinkId: number): Promise\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tajax.runAction('disk.api.externalLink.allowEditDocument', {\n\t\t\t\tdata: {\n\t\t\t\t\texternalLinkId: externalLinkId\n\t\t\t\t}\n\t\t\t}).then(resolve, reject)\n\t\t});\n\t}\n\n\tstatic disallowEditDocument(externalLinkId: number): Promise\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tajax.runAction('disk.api.externalLink.disallowEditDocument', {\n\t\t\t\tdata: {\n\t\t\t\t\texternalLinkId: externalLinkId\n\t\t\t\t}\n\t\t\t}).then(resolve, reject)\n\t\t});\n\t}\n}\n\nclass BackendForTrackedObject extends Backend\n{\n\tstatic disableExternalLink(objectId): Promise\n\t{\n\t\tBX.ajax.runAction('disk.api.trackedObject.disableExternalLink', {\n\t\t\tdata: {\n\t\t\t\tobjectId: objectId\n\t\t\t}\n\t\t});\n\t}\n\n\tstatic generateExternalLink(objectId): Promise\n\t{\n\t\treturn ajax.runAction('disk.api.trackedObject.generateExternalLink', {\n\t\t\tdata: {\n\t\t\t\tobjectId: objectId\n\t\t\t}\n\t\t})\n\t}\n\n\tstatic getExternalLink(objectId): Promise\n\t{\n\t\treturn ajax.runAction('disk.api.trackedObject.getExternalLink', {\n\t\t\tdata: {\n\t\t\t\tobjectId: objectId\n\t\t\t}\n\t\t})\n\t}\n}\n\nexport {\n\tBackend, BackendForTrackedObject\n}","import {Cache, Type, Dom, Text, Tag, Loc, Runtime} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\nimport 'ui.design-tokens';\nimport 'ui.fonts.opensans';\nimport 'clipboard';\nimport 'ui.switcher';\nimport 'ui.layout-form';\nimport 'main.date';\nimport {Backend} from './backend';\n\ntype exportLinkType = {\n\tid: ?number,\n\tlink: ?string,\n\thash: ?string,\n\thasPassword: ?boolean,\n\thasDeathTime: ?boolean,\n\tavailableEdit: ?boolean,\n\tcanEditDocument: ?boolean,\n\tdeathTime: ?string,\n\tdeathTimeTimestamp ?: number,\n};\n\nexport default class Input\n{\n\tcache = new Cache.MemoryCache();\n\tobjectId: Number;\n\tdata: exportLinkType = {};\n\n\tconstructor(objectId, data: ?exportLinkType)\n\t{\n\t\tthis.bindEvents();\n\t\tif (Type.isPlainObject(objectId))\n\t\t{\n\t\t\tthis.objectId = parseInt(objectId['objectId']);\n\t\t\tthis.setData(objectId, false);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.objectId = parseInt(objectId);\n\t\t\tthis.setData(data, false);\n\t\t}\n\t}\n\n\tsetData(data, fireEvent: boolean = true)\n\t{\n\t\tconsole.log('data: ', data);\n\n\t\tif (data && Type.isPlainObject(data))\n\t\t{\n\t\t\tthis.data = Object.assign(this.data, data);\n\t\t\tthis.data['id'] = this.data['id'] === null ? this.data['id'] : parseInt(this.data['id']);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.data = {\n\t\t\t\tid: null,\n\t\t\t\tlink: null,\n\t\t\t\thash: null,\n\t\t\t\thasPassword: null,\n\t\t\t\thasDeathTime: null,\n\t\t\t\tavailableEdit: null,\n\t\t\t\tcanEditDocument: null,\n\t\t\t\tdeathTime: null,\n\t\t\t\tdeathTimeTimestamp: null,\n\t\t\t};\n\t\t}\n\t\tthis.adjustData();\n\t\tEventEmitter.emit(this, 'Disk:ExternalLink:DataSet', data);\n\n\t\tif (fireEvent !== false)\n\t\t{\n\t\t\tEventEmitter.emit(EventEmitter.GLOBAL_TARGET, 'Disk:ExternalLink:HasChanged', {\n\t\t\t\tobjectId: this.objectId,\n\t\t\t\tdata: this.data,\n\t\t\t\ttarget: this\n\t\t\t});\n\t\t}\n\t}\n\n\tadjustData()\n\t{\n\t\tif (this.data.id === null)\n\t\t{\n\t\t\tthis.getSwitcher().check(false, false);\n\t\t\tthis.showUnchecked();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.getSwitcher().check(true, false);\n\t\t\tthis.showChecked();\n\n\t\t\tthis.getLinkContainer().innerHTML = Text.encode(this.data.link);\n\t\t\tthis.getLinkContainer().href = Text.encode(this.data.link);\n\n\t\t\tthis.getPasswordContainer().innerHTML = this.data.hasPassword\n\t\t\t\t? Loc.getMessage('DISK_EXTENSION_EXTERNAL_LINK_WITH_PASSWORD')\n\t\t\t\t: Loc.getMessage('DISK_EXTENSION_EXTERNAL_LINK_WITHOUT_PASSWORD');\n\n\t\t\tthis.getDeathTimeContainer().innerHTML = this.data.hasDeathTime\n\t\t\t\t? Loc.getMessage('DISK_EXTENSION_EXTERNAL_LINK_BEFORE')\n\t\t\t\t\t.replace(\n\t\t\t\t\t\t'#deathTime#',\n\t\t\t\t\t\tBX.Main.Date.format(\n\t\t\t\t\t\t\tBX.Main.Date.convertBitrixFormat(Loc.getMessage('FORMAT_DATETIME').replace(':SS', '')),\n\t\t\t\t\t\t\tnew Date(this.data.deathTimeTimestamp * 1000)\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\t: Loc.getMessage('DISK_EXTENSION_EXTERNAL_LINK_FOREVER');\n\n\t\t\tif (this.data.availableEdit === true)\n\t\t\t{\n\t\t\t\tthis.getRightsContainer().innerHTML = ', ' + (this.data.canEditDocument\n\t\t\t\t\t? Loc.getMessage('DISK_EXTENSION_EXTERNAL_LINK_RIGHTS_CAN_EDIT')\n\t\t\t\t\t: Loc.getMessage('DISK_EXTENSION_EXTERNAL_LINK_RIGHTS_CAN_READ'));\n\t\t\t\tthis.getRightsContainer().style.display = '';\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.getRightsContainer().style.display = 'none';\n\t\t\t}\n\t\t}\n\t}\n\n\tbindEvents()\n\t{\n\t\tEventEmitter.subscribe(EventEmitter.GLOBAL_TARGET, 'Disk:ExternalLink:HasChanged',\n\t\t\t({data: {objectId, data, target}}: BaseEvent) => {\n\t\t\t\tif (objectId !== this.objectId || Object.is(target, this))\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis.setData(data, false);\n\t\t\t}\n\t\t);\n\t}\n\n\tgetBackend()\n\t{\n\t\treturn Backend;\n\t}\n\n\tgetContainer()\n\t{\n\t\treturn this.cache.remember('main', () => {\n\t\t\tconst copyButton = Tag.render`<div class=\"disk-control-external-link-link-icon\"></div>`;\n\t\t\tBX.clipboard.bindCopyClick(copyButton, {text: () => { return this.data.link; }});\n\n\t\t\tconst tune = () => { return this.constructor.showPopup(this.objectId, this.data); };\n\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"disk-control-external-link-block${this.data.id !== null ? ' disk-control-external-link-block--active' : ''}\">\n\t\t\t\t\t<div class=\"disk-control-external-link\">\n\t\t\t\t\t\t<div class=\"disk-control-external-link-btn\">\n\t\t\t\t\t\t\t${this.getSwitcher().getNode()}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"disk-control-external-link-main\">\n\t\t\t\t\t\t\t<div class=\"disk-control-external-link-link-box\">\n\t\t\t\t\t\t\t\t${this.getLinkContainer()}\n\t\t\t\t\t\t\t\t${copyButton}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"disk-control-external-link-subtitle\" onclick=\"${tune}\">${this.getDeathTimeContainer()}, ${this.getPasswordContainer()}${this.getRightsContainer()}</div>\n\t\t\t\t\t\t\t<div class=\"disk-control-external-link-text\">${Loc.getMessage('DISK_EXTENSION_EXTERNAL_LINK_IS_NOT_PUBLISHED')}</div>\n\t\t\t\t\t\t\t<div class=\"disk-control-external-link-skeleton\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t`;\n\t\t});\n\t}\n\n\tgetSwitcher()\n\t{\n\t\treturn this.cache.remember('switcher', () => {\n\t\t\tconst switcherNode = document.createElement('span');\n\t\t\tswitcherNode.className = 'ui-switcher';\n\t\t\tlet switcher = new BX.UI.Switcher({\n\t\t\t\tnode: switcherNode,\n\t\t\t\tchecked: this.data.id !== null,\n\t\t\t\tinputName: 'ACTIVE',\n\t\t\t\tcolor: 'green',\n\t\t\t});\n\t\t\tswitcher.handlers = {toggled: this.toggle.bind(this, {target: switcher})};\n\n\t\t\treturn switcher;\n\t\t});\n\t}\n\n\tgetLinkContainer()\n\t{\n\t\treturn this.cache.remember('link', () => {\n\t\t\treturn Tag.render`<a href=\"${Text.encode(this.data.link)}\" class=\"disk-control-external-link-link\" target=\"_blank\">${Text.encode(this.data.link)}</a>`;\n\t\t});\n\t}\n\n\tgetRightsContainer()\n\t{\n\t\treturn this.cache.remember('rights', () => {\n\t\t\treturn document.createElement('span');\n\t\t});\n\t}\n\n\tgetDeathTimeContainer()\n\t{\n\t\treturn this.cache.remember('deathTime', () => {\n\t\t\treturn document.createElement('span');\n\t\t});\n\t}\n\n\tgetPasswordContainer()\n\t{\n\t\treturn this.cache.remember('password', () => {\n\t\t\treturn document.createElement('span');\n\t\t});\n\t}\n\n\ttoggle({target}: BaseEvent)\n\t{\n\t\tif (target.checked)\n\t\t{\n\t\t\tthis.showLoader();\n\t\t\tthis.getBackend().generateExternalLink(this.objectId)\n\t\t\t\t.then(({data: {externalLink}}) => {\n\t\t\t\t\tthis.setData(externalLink);\n\t\t\t\t\tthis.hideLoader();\n\t\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.getBackend().disableExternalLink(this.objectId);\n\t\t\tthis.setData(null);\n\t\t}\n\t}\n\n\tshowChecked()\n\t{\n\t\tconst baseClassName = this.getContainer().classList.item(0);\n\t\tconst activeClassName = [baseClassName, '--active'].join('');\n\t\tthis.getContainer().classList.add(activeClassName);\n\t}\n\n\tshowUnchecked()\n\t{\n\t\tconst baseClassName = this.getContainer().classList.item(0);\n\t\tconst activeClassName = [baseClassName, '--active'].join('');\n\t\tthis.getContainer().classList.remove(activeClassName);\n\t}\n\n\tshowLoader()\n\t{\n\t\tDom.addClass(this.getContainer(), 'disk-control-external-link-skeleton--active');\n\t}\n\n\thideLoader()\n\t{\n\t\tDom.removeClass(this.getContainer(), 'disk-control-external-link-skeleton--active');\n\t}\n\n\treload()\n\t{\n\t\tthis.showLoader();\n\t\treturn this.getBackend().getExternalLink(this.objectId)\n\t\t\t.then(({data}) => {\n\t\t\t\tthis.setData(data && data.externalLink ? data.externalLink : null);\n\t\t\t\tthis.hideLoader();\n\t\t\t});\n\t}\n}\n","import {Cache, Type, Dom, Text, Tag, Loc, Runtime} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\nimport 'main.date';\nimport Input from './input';\nimport {SaveButton, CloseButton, ButtonState} from 'ui.buttons';\nimport {Popup} from 'main.popup';\n\nexport default class InputExtended extends Input\n{\n\tconstructor(objectId, data)\n\t{\n\t\tsuper(objectId, data);\n\t}\n\n\tadjustData()\n\t{\n\t\tif (this.data.id === null)\n\t\t{\n\t\t\tthis.getSwitcher().check(false, false);\n\t\t\tthis.showUnchecked();\n\t\t\tif (this.cache.get('popup'))\n\t\t\t{\n\t\t\t\tthis.cache.get('popup').getPopupContainer().setAttribute('externalLinkIsSet', 'N');\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.getSwitcher().check(true, false);\n\t\t\tthis.showChecked();\n\n\t\t\tthis.getLinkContainer().innerHTML = Text.encode(this.data.link);\n\t\t\tthis.getLinkContainer().href = Text.encode(this.data.link);\n\n\t\t\tthis.getPasswordContainer().innerHTML = this.data.hasPassword\n\t\t\t\t? Loc.getMessage('DISK_EXTENSION_EXTERNAL_LINK_WITH_PASSWORD')\n\t\t\t\t: Loc.getMessage('DISK_EXTENSION_EXTERNAL_LINK_WITHOUT_PASSWORD');\n\n\t\t\tthis.getDeathTimeContainer().innerHTML = this.data.hasDeathTime\n\t\t\t\t? Loc.getMessage('DISK_EXTENSION_EXTERNAL_LINK_BEFORE')\n\t\t\t\t\t.replace(\n\t\t\t\t\t\t'#deathTime#',\n\t\t\t\t\t\tBX.Main.Date.format(\n\t\t\t\t\t\t\tBX.Main.Date.convertBitrixFormat(Loc.getMessage('FORMAT_DATETIME').replace(':SS', '')),\n\t\t\t\t\t\t\tnew Date(this.data.deathTimeTimestamp * 1000)\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\t: Loc.getMessage('DISK_EXTENSION_EXTERNAL_LINK_FOREVER');\n\n\t\t\tif (this.data.availableEdit === true)\n\t\t\t{\n\t\t\t\tthis.getRightsContainer().innerHTML = ', ' + (this.data.canEditDocument\n\t\t\t\t\t? Loc.getMessage('DISK_EXTENSION_EXTERNAL_LINK_RIGHTS_CAN_EDIT')\n\t\t\t\t\t: Loc.getMessage('DISK_EXTENSION_EXTERNAL_LINK_RIGHTS_CAN_READ'));\n\t\t\t\tthis.getRightsContainer().style.display = '';\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.getRightsContainer().style.display = 'none';\n\t\t\t}\n\n\t\t\tif (this.cache.get('popup'))\n\t\t\t{\n\t\t\t\tthis.cache.get('popup').getPopupContainer().setAttribute('externalLinkIsSet', 'Y');\n\t\t\t}\n\t\t}\n\t}\n\n\tgetContainer()\n\t{\n\t\treturn this.cache.remember('main', () => {\n\t\t\tconst copyButton = Tag.render`<div class=\"disk-control-external-link-link-icon\"></div>`;\n\t\t\tBX.clipboard.bindCopyClick(copyButton, {text: () => { return this.data.link; }});\n\t\t\tthis.showSettings = this.showSettings.bind(this);\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"disk-control-external-link-block${this.data.id !== null ? ' disk-control-external-link-block--active' : ''} disk-control-external-link-block--tunable\">\n\t\t\t\t\t<div class=\"disk-control-external-link\">\n\t\t\t\t\t\t<div class=\"disk-control-external-link-btn\">\n\t\t\t\t\t\t\t${this.getSwitcher().getNode()}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"disk-control-external-link-main\">\n\t\t\t\t\t\t\t<div class=\"disk-control-external-link-link-box\">\n\t\t\t\t\t\t\t\t${this.getLinkContainer()}\n\t\t\t\t\t\t\t\t${copyButton}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"disk-control-external-link-subtitle\" onclick=\"${this.showSettings}\">${this.getDeathTimeContainer()}, ${this.getPasswordContainer()}${this.getRightsContainer()}</div>\n\t\t\t\t\t\t\t<div class=\"disk-control-external-link-text\">${Loc.getMessage('DISK_EXTENSION_EXTERNAL_LINK_IS_NOT_PUBLISHED')}</div>\n\t\t\t\t\t\t\t<div class=\"disk-control-external-link-skeleton\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"disk-public-link-config\" onclick=\"${this.showSettings}\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"disk-control-external-link-settings\">\n\t\t\t\t\t\t${this.getDeathTimeSettingsContainer()}\n\t\t\t\t\t\t${this.getPasswordSettingsContainer()}\n\t\t\t\t\t\t${this.getEditSettingsContainer()}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tshowSettings()\n\t{\n\t\tthis.cache.set('settingsAreShown', 'Y');\n\t\tif (this.cache.get('popup'))\n\t\t{\n\t\t\tthis.cache.get('popup').getPopupContainer().setAttribute('settingsAreShown', 'Y');\n\t\t}\n\t}\n\n\thideSettings()\n\t{\n\t\tthis.cache.set('settingsAreShown', 'N');\n\t\tif (this.cache.get('popup'))\n\t\t{\n\t\t\tthis.cache.get('popup').getPopupContainer().setAttribute('settingsAreShown', 'N');\n\t\t}\n\t}\n\n\tgetDeathTimeSettingsContainer()\n\t{\n\t\treturn this.cache.remember('deathTimeSettings', () => {\n\t\t\tconst deathTimeSettings = Tag.render`\n\t\t\t<div class=\"ui-form-line\">\n\t\t\t\t<input type=\"checkbox\" name=\"hasDeathTime\">\n\t\t\t\t<div class=\"ui-form-row\">\n\t\t\t\t\t<label class=\"ui-ctl ui-ctl-checkbox\">\n\t\t\t\t\t\t<input type=\"checkbox\" class=\"ui-ctl-element\" name=\"enableDeathTime\">\n\t\t\t\t\t\t<div class=\"ui-ctl-label-text\">${Loc.getMessage('DISK_EXTENSION_EXTERNAL_LINK_DEATHTIME_LIMIT_CHECKBOX')}</div>\n\t\t\t\t\t</label>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"ui-form-row-inline\" name=\"deathTimeIsNotSaved\">\n\t\t\t\t\t<div class=\"ui-form-content\">\n\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-textbox ui-ctl-w25 ui-ctl-inline\">\n\t\t\t\t\t\t\t<input type=\"number\" min=\"1\" name=\"deathTimeValue\" class=\"ui-ctl-element\" value=\"10\" size=\"4\">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-after-icon ui-ctl-dropdown ui-ctl-inline ui-ctl-w50\">\n\t\t\t\t\t\t\t<div class=\"ui-ctl-after ui-ctl-icon-angle\"></div>\n\t\t\t\t\t\t\t<select class=\"ui-ctl-element\" name=\"deathTimeMeasure\">\n\t\t\t\t\t\t\t\t<option value=\"60\" selected>${Loc.getMessage('DISK_EXTENSION_EXTERNAL_LINK_MINUTES')}</option>\n\t\t\t\t\t\t\t\t<option value=\"3600\">${Loc.getMessage('DISK_EXTENSION_EXTERNAL_LINK_HOURS')}</option>\n\t\t\t\t\t\t\t\t<option value=\"86400\">${Loc.getMessage('DISK_EXTENSION_EXTERNAL_LINK_DAYS')}</option>\n\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"ui-form-row-inline\" name=\"deathTimeIsSaved\">\n\t\t\t\t\t<div class=\"ui-form-label\">\n\t\t\t\t\t\t<div class=\"ui-ctl-label-text\">${Loc.getMessage('DISK_EXTENSION_EXTERNAL_LINK_DEATHTIME_LIMIT_PREPOSITION')}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"ui-form-content\">\n\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-after-icon ui-ctl-no-border\">\n\t\t\t\t\t\t\t<div class=\"ui-ctl-element\" name=\"deathTimeParsed\">14.10.2014 16:33</div>\n\t\t\t\t\t\t\t<button name=\"deathTimeButtonUnset\" class=\"ui-ctl-after ui-ctl-icon-clear\"></button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>`;\n\n\t\t\t/*region bind settings form */\n\t\t\tconst onDeathTimeHasChanged = () => {\n\t\t\t\tif (!(this.data['id'] > 0))\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (deathTimeSettings.querySelector('input[name=enableDeathTime]').checked === true)\n\t\t\t\t{\n\t\t\t\t\tdeathTimeSettings.querySelector('input[name=deathTimeValue]').disabled = false;\n\t\t\t\t\tdeathTimeSettings.querySelector('[name=deathTimeMeasure]').disabled = false;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tdeathTimeSettings.querySelector('input[name=deathTimeValue]').disabled = true;\n\t\t\t\t\tdeathTimeSettings.querySelector('input[name=deathTimeValue]').value = '10';\n\t\t\t\t\tdeathTimeSettings.querySelector('[name=deathTimeMeasure]').disabled = true;\n\t\t\t\t\tdeathTimeSettings.querySelector('[name=deathTimeMeasure]').value = '60';\n\t\t\t\t}\n\t\t\t};\n\t\t\tdeathTimeSettings.querySelector('input[name=enableDeathTime]').addEventListener('click', () => {\n\t\t\t\tonDeathTimeHasChanged();\n\t\t\t\tdeathTimeSettings.querySelector('input[name=enableDeathTime]').dataset.changed = 'Y';\n\t\t\t\tEventEmitter.emit(this, 'Disk:ExternalLink:Settings:Change', {field: 'deathTime'});\n\t\t\t});\n\t\t\tdeathTimeSettings.querySelector('button[name=deathTimeButtonUnset]').addEventListener('click', () => {\n\t\t\t\tdeathTimeSettings.querySelector('input[name=hasDeathTime]').checked = false;\n\t\t\t\tdeathTimeSettings.querySelector('input[name=enableDeathTime]').dataset.changed = 'Y';\n\t\t\t\tEventEmitter.emit(this, 'Disk:ExternalLink:Settings:Change', {field: 'deathTime'});\n\t\t\t});\n\n\t\t\tconst adjustSettings = () => {\n\t\t\t\tif (!(this.data['id'] > 0))\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tdeathTimeSettings.querySelector('input[name=enableDeathTime]').dataset.changed = 'N';\n\t\t\t\tif (this.data['hasDeathTime'])\n\t\t\t\t{\n\t\t\t\t\tdeathTimeSettings.querySelector('input[name=hasDeathTime]').checked = true;\n\t\t\t\t\tdeathTimeSettings.querySelector('div[name=deathTimeParsed]').innerHTML = BX.Main.Date.format(\n\t\t\t\t\t\tBX.Main.Date.convertBitrixFormat(Loc.getMessage('FORMAT_DATETIME').replace(':SS', '')),\n\t\t\t\t\t\tnew Date(this.data.deathTimeTimestamp * 1000)\n\t\t\t\t\t);\n\t\t\t\t\tdeathTimeSettings.querySelector('input[name=enableDeathTime]').checked = true;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tdeathTimeSettings.querySelector('input[name=hasDeathTime]').checked = false;\n\t\t\t\t\tdeathTimeSettings.querySelector('input[name=enableDeathTime]').checked = false;\n\t\t\t\t}\n\t\t\t\tonDeathTimeHasChanged();\n\t\t\t};\n\t\t\tEventEmitter.subscribe(this, 'Disk:ExternalLink:DataSet', adjustSettings);\n\t\t\tadjustSettings();\n\t\t\t/*endregion*/\n\n\t\t\treturn deathTimeSettings;\n\t\t});\n\t}\n\n\tgetPasswordSettingsContainer()\n\t{\n\t\treturn this.cache.remember('passwordSettings', () => {\n\t\t\tconst passwordSettings = Tag.render`\n\t\t\t<div class=\"ui-form-line\">\n\t\t\t\t<input type=\"checkbox\" name=\"hasPassword\">\n\t\t\t\t<div class=\"ui-form-row\">\n\t\t\t\t\t<label class=\"ui-ctl ui-ctl-checkbox\">\n\t\t\t\t\t\t<input type=\"checkbox\" class=\"ui-ctl-element\" name=\"enablePassword\">\n\t\t\t\t\t\t<div class=\"ui-ctl-label-text\">${Loc.getMessage('DISK_EXTENSION_EXTERNAL_LINK_PASSWORD_CHECKBOX')}</div>\n\t\t\t\t\t</label>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"ui-form-row-inline\" name=\"passwordIsNotSaved\">\n\t\t\t\t\t<div class=\"ui-form-content\">\n\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-textbox ui-ctl-after-icon\">\n\t\t\t\t\t\t\t<input type=\"password\" name=\"passwordValue\" class=\"ui-ctl-element\" placeholder=\"${Loc.getMessage('DISK_EXTENSION_EXTERNAL_LINK_PASSWORD_PLACEHOLDER')}\" autocomplete=\"nope\">\n\t\t\t\t\t\t\t<button class=\"ui-ctl-after ui-ctl-icon-angle disk-external-link-setting-popup-password-show\" name=\"passwordTypeSwitcher\"></button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"ui-form-row-inline\" name=\"passwordIsSaved\">\n\t\t\t\t\t<div class=\"ui-form-content\">\n\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-disabled ui-ctl-after-icon\">\n\t\t\t\t\t\t\t<input type=\"password\" class=\"ui-ctl-element\" readonly value=\"some password\">\n\t\t\t\t\t\t\t<button name=\"passwordButtonUnset\" class=\"ui-ctl-after ui-ctl-icon-clear\"></button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t`;\n\n\t\t\t/*region bind settings form */\n\t\t\tconst passwordValue = passwordSettings.querySelector('input[name=passwordValue]');\n\n\t\t\tconst onPasswordHasChanged = () => {\n\t\t\t\tif (!(this.data['id'] > 0))\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (passwordSettings.querySelector('input[name=enablePassword]').checked === true)\n\t\t\t\t{\n\t\t\t\t\tpasswordValue.disabled = false;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tpasswordValue.disabled = true;\n\t\t\t\t\tpasswordValue.value = '';\n\t\t\t\t\tpasswordValue.type = 'password';\n\t\t\t\t}\n\t\t\t};\n\t\t\tpasswordSettings.querySelector('input[name=enablePassword]').addEventListener('click', () => {\n\t\t\t\tonPasswordHasChanged();\n\t\t\t\tpasswordSettings.querySelector('input[name=enablePassword]').dataset.changed = 'Y';\n\t\t\t\tEventEmitter.emit(this, 'Disk:ExternalLink:Settings:Change', {field: 'password'});\n\t\t\t});\n\t\t\tpasswordSettings.querySelector('button[name=passwordButtonUnset]').addEventListener('click', () => {\n\t\t\t\tpasswordSettings.querySelector('input[name=hasPassword]').checked = false;\n\t\t\t\tpasswordSettings.querySelector('input[name=enablePassword]').dataset.changed = 'Y';\n\t\t\t\tpasswordValue.value = '';\n\t\t\t\tpasswordValue.type = 'password';\n\t\t\t\tEventEmitter.emit(this, 'Disk:ExternalLink:Settings:Change', {field: 'password'});\n\t\t\t});\n\t\t\tpasswordSettings.querySelector('button[name=passwordTypeSwitcher]').addEventListener('click', () => {\n\t\t\t\tpasswordValue.type = (passwordValue.type === 'text' ? 'password' : 'text');});\n\n\t\t\tconst adjustSettings = () => {\n\t\t\t\tif (!(this.data['id'] > 0))\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tpasswordSettings.querySelector('input[name=enablePassword]').dataset.changed = 'N';\n\t\t\t\tpasswordSettings.querySelector('input[name=hasPassword]').checked = this.data['hasPassword'] === true;\n\t\t\t\tpasswordSettings.querySelector('input[name=enablePassword]').checked = this.data['hasPassword'] === true;\n\t\t\t\tonPasswordHasChanged();\n\t\t\t};\n\t\t\tEventEmitter.subscribe(this, 'Disk:ExternalLink:DataSet', adjustSettings);\n\t\t\tadjustSettings();\n\t\t\t/*endregion*/\n\n\t\t\treturn passwordSettings;\n\t\t});\n\t}\n\n\tgetEditSettingsContainer()\n\t{\n\t\treturn this.cache.remember('editSettings', () => {\n\t\t\tconst editSettings = Tag.render`\n\t\t\t<div class=\"ui-form-line\">\n\t\t\t\t<div class=\"ui-form-row\">\n\t\t\t\t\t<label class=\"ui-ctl ui-ctl-checkbox\">\n\t\t\t\t\t\t<input type=\"checkbox\" class=\"ui-ctl-element\" name=\"canEditDocument\">\n\t\t\t\t\t\t<div class=\"ui-ctl-label-text\">${Loc.getMessage('DISK_EXTENSION_EXTERNAL_LINK_ALLOW_EDITING')}</div>\n\t\t\t\t\t</label>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t`;\n\t\t\t/*region bind settings form */\n\t\t\tconst canEditDocument = editSettings.querySelector('input[name=canEditDocument]');\n\t\t\tcanEditDocument.addEventListener('click', () => {\n\t\t\t\tcanEditDocument.dataset.changed = 'Y';\n\t\t\t\tEventEmitter.emit(this, 'Disk:ExternalLink:Settings:Change', {field: 'canEditDocument'});\n\t\t\t});\n\t\t\tconst adjustSettings = () => {\n\t\t\t\tcanEditDocument.checked = (this.data['canEditDocument'] === true);\n\t\t\t\tcanEditDocument.dataset.changed = 'N';\n\t\t\t\tif (this.data['availableEdit'] !== true)\n\t\t\t\t{\n\t\t\t\t\teditSettings.style.display = 'none';\n\t\t\t\t\tcanEditDocument.disable = true;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\teditSettings.style.display = '';\n\t\t\t\t\tdelete editSettings.style.display;\n\t\t\t\t\tdelete canEditDocument.disable;\n\t\t\t\t}\n\t\t\t};\n\t\t\tEventEmitter.subscribe(this, 'Disk:ExternalLink:DataSet', adjustSettings);\n\t\t\tadjustSettings();\n\t\t\t/*endregion*/\n\n\t\t\treturn editSettings;\n\t\t})\n\t}\n\n\tsaveSettings()\n\t{\n\t\tif (!(this.data.id > 0))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst settings = this.getContainer();\n\t\t/*region DeathTime */\n\t\tif (settings.querySelector('input[name=enableDeathTime]').dataset.changed === 'Y')\n\t\t{\n\t\t\tconst deathTimer = parseInt(settings.querySelector('input[name=deathTimeValue]').value)\n\t\t\t\t* parseInt(settings.querySelector('[name=deathTimeMeasure]').value);\n\t\t\tconst enableDeathTime = (settings.querySelector('input[name=enableDeathTime]').checked === true && deathTimer > 0);\n\t\t\tif (enableDeathTime === true)\n\t\t\t{\n\t\t\t\tEventEmitter.emit(this, 'Disk:ExternalLink:Settings:Save', () => {});\n\t\t\t\tconst deathTimeTimestamp = Math.floor(Date.now() / 1000) + deathTimer;\n\t\t\t\tthis.getBackend()\n\t\t\t\t\t.setDeathTime(this.data.id, deathTimeTimestamp)\n\t\t\t\t\t.then(({data: {externalLink: {hasDeathTime, deathTimeTimestamp, deathTime}}}) => {\n\t\t\t\t\t\tthis.setData({\n\t\t\t\t\t\t\thasDeathTime: hasDeathTime,\n\t\t\t\t\t\t\tdeathTimeTimestamp: deathTimeTimestamp,\n\t\t\t\t\t\t\tdeathTime: deathTime,\n\t\t\t\t\t\t});\n\t\t\t\t\t})\n\t\t\t\t\t.finally(() => {\n\t\t\t\t\t\tEventEmitter.emit(this, 'Disk:ExternalLink:Settings:Saved', () => {});\n\t\t\t\t\t});\n\t\t\t}\n\t\t\telse if (enableDeathTime !== this.data.hasDeathTime)\n\t\t\t{\n\t\t\t\tEventEmitter.emit(this, 'Disk:ExternalLink:Settings:Save', () => {});\n\t\t\t\tthis.getBackend()\n\t\t\t\t\t.revokeDeathTime(this.data['id'])\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\tthis.setData({\n\t\t\t\t\t\t\thasDeathTime: false,\n\t\t\t\t\t\t\tdeathTimeTimestamp: null,\n\t\t\t\t\t\t\tdeathTime: null,\n\t\t\t\t\t\t});\n\t\t\t\t\t})\n\t\t\t\t\t.finally(() => {\n\t\t\t\t\t\tEventEmitter.emit(this, 'Disk:ExternalLink:Settings:Saved', () => {});\n\t\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\t/*endregion*/\n\t\t/*region Password*/\n\t\tif (settings.querySelector('input[name=enablePassword]').dataset.changed === 'Y')\n\t\t{\n\t\t\tconst passwordValue = settings.querySelector('input[name=passwordValue]').value.trim();\n\t\t\tconst enablePassword = (settings.querySelector('input[name=enablePassword]').checked === true && passwordValue.length > 0);\n\t\t\tif (enablePassword === true)\n\t\t\t{\n\t\t\t\tEventEmitter.emit(this, 'Disk:ExternalLink:Settings:Save', () => {});\n\t\t\t\tthis.getBackend()\n\t\t\t\t\t.setPassword(this.data['id'], passwordValue)\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\tthis.setData({ hasPassword: true });\n\t\t\t\t\t})\n\t\t\t\t\t.finally(() => {\n\t\t\t\t\t\tEventEmitter.emit(this, 'Disk:ExternalLink:Settings:Saved', () => {});\n\t\t\t\t\t});\n\t\t\t}\n\t\t\telse if (enablePassword !== this.data.hasPassword)\n\t\t\t{\n\t\t\t\tEventEmitter.emit(this, 'Disk:ExternalLink:Settings:Save', () => {});\n\t\t\t\tthis.getBackend()\n\t\t\t\t\t.revokePassword(this.data['id'])\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\tthis.setData({ hasPassword: false });\n\t\t\t\t\t})\n\t\t\t\t\t.finally(() => {\n\t\t\t\t\t\tEventEmitter.emit(this, 'Disk:ExternalLink:Settings:Saved', () => {});\n\t\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\t/*endregion*/\n\t\t/*region editing rights */\n\t\tconst canEditDocumentNode =settings.querySelector('input[name=canEditDocument]');\n\t\tif (canEditDocumentNode\n\t\t\t&& canEditDocumentNode.dataset.changed === 'Y'\n\t\t\t&& canEditDocumentNode.checked !== this.data.canEditDocument)\n\t\t{\n\t\t\tif (canEditDocumentNode.checked)\n\t\t\t{\n\t\t\t\tEventEmitter.emit(this, 'Disk:ExternalLink:Settings:Save', () => {});\n\t\t\t\tthis.getBackend()\n\t\t\t\t\t.allowEditDocument(this.data['id'])\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\tthis.setData({ canEditDocument: true });\n\t\t\t\t\t})\n\t\t\t\t\t.finally(() => {\n\t\t\t\t\t\tEventEmitter.emit(this, 'Disk:ExternalLink:Settings:Saved', () => {});\n\t\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tEventEmitter.emit(this, 'Disk:ExternalLink:Settings:Save', () => {});\n\t\t\t\tthis.getBackend()\n\t\t\t\t\t.disallowEditDocument(this.data['id'])\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\tthis.setData({ canEditDocument: false });\n\t\t\t\t\t})\n\t\t\t\t\t.finally(() => {\n\t\t\t\t\t\tEventEmitter.emit(this, 'Disk:ExternalLink:Settings:Saved', () => {});\n\t\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\t/*endregion*/\n\t}\n\n\tgetPopup()\n\t{\n\t\treturn this.cache.remember('popup', () => {\n\t\t\tconst popupSave = new SaveButton({\n\t\t\t\tstate: ButtonState.DISABLED,\n\t\t\t\tonclick: () => {\n\t\t\t\t\tthis.saveSettings();\n\t\t\t\t}\n\t\t\t});\n\t\t\tpopupSave.saveCounter = 0;\n\t\t\tEventEmitter.subscribe(this, 'Disk:ExternalLink:Settings:Save', () => {\n\t\t\t\tthis.cache.get('popup').getPopupContainer().setAttribute('externalLinkIsWaiting', 'Y');\n\t\t\t\tpopupSave.saveCounter++;\n\t\t\t\tpopupSave.setWaiting();\n\t\t\t});\n\t\t\tEventEmitter.subscribe(this, 'Disk:ExternalLink:Settings:Saved', () => {\n\t\t\t\tpopupSave.saveCounter--;\n\t\t\t\tif (popupSave.saveCounter <= 0)\n\t\t\t\t{\n\t\t\t\t\tthis.cache.get('popup').getPopupContainer().setAttribute('externalLinkIsWaiting', 'N');\n\t\t\t\t\tpopupSave.setDisabled(true);\n\t\t\t\t}\n\t\t\t});\n\t\t\tEventEmitter.subscribe(this, 'Disk:ExternalLink:Settings:Change', () => {\n\t\t\t\tpopupSave.setDisabled(false);\n\t\t\t});\n\t\t\tEventEmitter.subscribe(this, 'Disk:ExternalLink:DataSet', () => {\n\t\t\t\tpopupSave.setDisabled(true);\n\t\t\t});\n\n\t\t\tconst popup = new Popup({\n\t\t\t\tuniquePopupId: 'disk-external-link',\n\t\t\t\tclassName: 'disk-external-link-popup',\n\t\t\t\ttitleBar: Loc.getMessage('DISK_EXTENSION_EXTERNAL_LINK_TITLE'),\n\t\t\t\tcontent: this.getContainer(),\n\t\t\t\tautoHide: true,\n\t\t\t\tcloseIcon: true,\n\t\t\t\tcloseByEsc: true,\n\t\t\t\toverlay: true,\n\t\t\t\tcacheable: false,\n\t\t\t\tminWidth: 410,\n\t\t\t\tevents: {\n\t\t\t\t\tonClose: () => {\n\t\t\t\t\t\tthis.cache.delete('popup');\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tbuttons: [\n\t\t\t\t\tpopupSave,\n\t\t\t\t\tnew CloseButton({\n\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\tclick: function () {\n\t\t\t\t\t\t\t\tpopup.close();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t});\n\t\t\tpopup.getPopupContainer().setAttribute('externalLinkIsSet', this.data.id > 0 ? 'Y' : 'N');\n\t\t\tpopup.getPopupContainer().setAttribute('settingsAreShown', this.cache.get('settingsAreShown') === 'Y' ? 'Y' : 'N');\n\t\t\treturn popup;\n\t\t});\n\t}\n\n\tshow()\n\t{\n\t\tthis.getPopup().show();\n\t}\n}\n","import Input from './input';\nimport InputExtended from './input-extended';\n\n\nexport default class InputSimple extends Input\n{\n\tconstructor(objectId, data)\n\t{\n\t\tsuper(objectId, data);\n\t}\n\n\tstatic getExtendedInputClass()\n\t{\n\t\treturn InputExtended;\n\t}\n\n\tstatic showPopup(objectId, data = null)\n\t{\n\t\tconst className = this.getExtendedInputClass();\n\t\tconst res = new className(objectId, data);\n\n\t\tif (data === null)\n\t\t{\n\t\t\tres.reload();\n\t\t}\n\t\telse // This behaviour is appropriate for current task\n\t\t{\n\t\t\tres.showSettings();\n\t\t}\n\t\tres.show();\n\t}\n}\n","import InputExtended from \"./input-extended\";\nimport {BackendForTrackedObject} from './backend';\n\nexport default class InputExtendedForTrackedObject extends InputExtended\n{\n\tconstructor(objectId, data)\n\t{\n\t\tconsole.log('InputExtendedForTrackedObject!!!');\n\t\tsuper(objectId, data);\n\t}\n\n\tgetBackend()\n\t{\n\t\treturn BackendForTrackedObject;\n\t}\n}\n","import InputSimple from './input-simple';\nimport InputExtendedForTrackedObject from \"./input-extended-for-tracked-object\";\nimport {BackendForTrackedObject} from './backend';\n\nexport default class InputSimpleForTrackedObject extends InputSimple\n{\n\tconstructor(objectId, data)\n\t{\n\t\tsuper(objectId, data);\n\t}\n\n\tgetBackend()\n\t{\n\t\treturn BackendForTrackedObject;\n\t}\n\n\tstatic getExtendedInputClass()\n\t{\n\t\treturn InputExtendedForTrackedObject\n\t}\n}\n"],"names":["Backend","objectId","ajax","runAction","data","externalLinkId","deathTimeTimestamp","Promise","resolve","reject","deathTime","then","newPassword","BackendForTrackedObject","BX","Input","Cache","MemoryCache","bindEvents","Type","isPlainObject","parseInt","setData","fireEvent","console","log","Object","assign","id","link","hash","hasPassword","hasDeathTime","availableEdit","canEditDocument","adjustData","EventEmitter","emit","GLOBAL_TARGET","target","getSwitcher","check","showUnchecked","showChecked","getLinkContainer","innerHTML","Text","encode","href","getPasswordContainer","Loc","getMessage","getDeathTimeContainer","replace","Main","Date","format","convertBitrixFormat","getRightsContainer","style","display","subscribe","is","cache","remember","copyButton","Tag","render","clipboard","bindCopyClick","text","tune","constructor","showPopup","getNode","switcherNode","document","createElement","className","switcher","UI","Switcher","node","checked","inputName","color","handlers","toggled","toggle","bind","showLoader","getBackend","generateExternalLink","externalLink","hideLoader","disableExternalLink","baseClassName","getContainer","classList","item","activeClassName","join","add","remove","Dom","addClass","removeClass","getExternalLink","InputExtended","get","getPopupContainer","setAttribute","showSettings","getDeathTimeSettingsContainer","getPasswordSettingsContainer","getEditSettingsContainer","set","deathTimeSettings","onDeathTimeHasChanged","querySelector","disabled","value","addEventListener","dataset","changed","field","adjustSettings","passwordSettings","passwordValue","onPasswordHasChanged","type","editSettings","disable","settings","deathTimer","enableDeathTime","Math","floor","now","setDeathTime","revokeDeathTime","trim","enablePassword","length","setPassword","revokePassword","canEditDocumentNode","allowEditDocument","disallowEditDocument","popupSave","SaveButton","state","ButtonState","DISABLED","onclick","saveSettings","saveCounter","setWaiting","setDisabled","popup","Popup","uniquePopupId","titleBar","content","autoHide","closeIcon","closeByEsc","overlay","cacheable","minWidth","events","onClose","buttons","CloseButton","click","close","getPopup","show","InputSimple","getExtendedInputClass","res","reload","InputExtendedForTrackedObject","InputSimpleForTrackedObject"],"mappings":"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"}