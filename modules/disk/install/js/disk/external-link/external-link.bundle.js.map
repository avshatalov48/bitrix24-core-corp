{"version":3,"file":"external-link.bundle.js","sources":["src/backend.js","src/input.js","src/input-extended.js","src/input-simple.js","src/input-extended-for-tracked-object.js","src/input-simple-for-tracked-object.js"],"sourcesContent":["import {ajax} from 'main.core';\n\nclass Backend\n{\n\tstatic disableExternalLink(objectId): Promise\n\t{\n\t\treturn ajax.runAction('disk.api.commonActions.disableExternalLink', {\n\t\t\tdata: {\n\t\t\t\tobjectId: objectId\n\t\t\t}\n\t\t});\n\t}\n\n\tstatic generateExternalLink(objectId): Promise\n\t{\n\t\treturn ajax.runAction('disk.api.commonActions.generateExternalLink', {\n\t\t\tdata: {\n\t\t\t\tobjectId: objectId\n\t\t\t}\n\t\t})\n\t}\n\n\tstatic getExternalLink(objectId): Promise\n\t{\n\t\treturn ajax.runAction('disk.api.commonActions.getExternalLink', {\n\t\t\tdata: {\n\t\t\t\tobjectId: objectId\n\t\t\t}\n\t\t})\n\t}\n\n\tstatic setDeathTime(externalLinkId: number, deathTimeTimestamp: number): Promise\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tajax.runAction('disk.api.externalLink.setDeathTime', {\n\t\t\t\tdata: {\n\t\t\t\t\texternalLinkId: externalLinkId,\n\t\t\t\t\tdeathTime: deathTimeTimestamp\n\t\t\t\t}\n\t\t\t}).then(resolve, reject)\n\t\t});\n\t}\n\n\tstatic revokeDeathTime(externalLinkId: number): Promise\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tajax.runAction('disk.api.externalLink.revokeDeathTime', {\n\t\t\t\tdata: {\n\t\t\t\t\texternalLinkId: externalLinkId\n\t\t\t\t}\n\t\t\t}).then(resolve, reject)\n\t\t});\n\t}\n\n\tstatic setPassword(externalLinkId: number, newPassword: string): Promise\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tajax.runAction('disk.api.externalLink.setPassword', {\n\t\t\t\tdata: {\n\t\t\t\t\texternalLinkId: externalLinkId,\n\t\t\t\t\tnewPassword: newPassword\n\t\t\t\t}\n\t\t\t}).then(resolve, reject)\n\t\t});\n\t}\n\n\tstatic revokePassword(externalLinkId: number): Promise\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tajax.runAction('disk.api.externalLink.revokePassword', {\n\t\t\t\tdata: {\n\t\t\t\t\texternalLinkId: externalLinkId\n\t\t\t\t}\n\t\t\t}).then(resolve, reject)\n\t\t});\n\t}\n\n\tstatic allowEditDocument(externalLinkId: number): Promise\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tajax.runAction('disk.api.externalLink.allowEditDocument', {\n\t\t\t\tdata: {\n\t\t\t\t\texternalLinkId: externalLinkId\n\t\t\t\t}\n\t\t\t}).then(resolve, reject)\n\t\t});\n\t}\n\n\tstatic disallowEditDocument(externalLinkId: number): Promise\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tajax.runAction('disk.api.externalLink.disallowEditDocument', {\n\t\t\t\tdata: {\n\t\t\t\t\texternalLinkId: externalLinkId\n\t\t\t\t}\n\t\t\t}).then(resolve, reject)\n\t\t});\n\t}\n}\n\nclass BackendForTrackedObject extends Backend\n{\n\tstatic disableExternalLink(objectId): Promise\n\t{\n\t\tBX.ajax.runAction('disk.api.trackedObject.disableExternalLink', {\n\t\t\tdata: {\n\t\t\t\tobjectId: objectId\n\t\t\t}\n\t\t});\n\t}\n\n\tstatic generateExternalLink(objectId): Promise\n\t{\n\t\treturn ajax.runAction('disk.api.trackedObject.generateExternalLink', {\n\t\t\tdata: {\n\t\t\t\tobjectId: objectId\n\t\t\t}\n\t\t})\n\t}\n\n\tstatic getExternalLink(objectId): Promise\n\t{\n\t\treturn ajax.runAction('disk.api.trackedObject.getExternalLink', {\n\t\t\tdata: {\n\t\t\t\tobjectId: objectId\n\t\t\t}\n\t\t})\n\t}\n}\n\nexport {\n\tBackend, BackendForTrackedObject\n}","import {\n\tCache,\n\tType,\n\tDom,\n\tText,\n\tTag,\n\tLoc,\n} from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport 'ui.design-tokens';\nimport 'ui.fonts.opensans';\nimport 'clipboard';\nimport 'ui.switcher';\nimport 'ui.layout-form';\nimport 'main.date';\nimport { Backend } from './backend';\n\ntype exportLinkType = {\n\tid: ?number,\n\tlink: ?string,\n\thash: ?string,\n\thasPassword: ?boolean,\n\thasDeathTime: ?boolean,\n\tavailableEdit: ?boolean,\n\tcanEditDocument: ?boolean,\n\tdeathTime: ?string,\n\tdeathTimeTimestamp ?: number,\n};\n\nexport default class Input\n{\n\tcache = new Cache.MemoryCache();\n\tobjectId: Number;\n\tdata: exportLinkType = {};\n\n\tconstructor(objectId, data: ?exportLinkType)\n\t{\n\t\tthis.bindEvents();\n\t\tif (Type.isPlainObject(objectId))\n\t\t{\n\t\t\tthis.objectId = parseInt(objectId.objectId, 10);\n\t\t\tthis.setData(objectId, false);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.objectId = parseInt(objectId, 10);\n\t\t\tthis.setData(data, false);\n\t\t}\n\t}\n\n\tsetData(data, fireEvent: boolean = true): void\n\t{\n\t\tif (data && Type.isPlainObject(data))\n\t\t{\n\t\t\tthis.data = Object.assign(this.data, data);\n\t\t\tthis.data.id = this.data.id === null ? this.data.id : parseInt(this.data.id, 10);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.data = {\n\t\t\t\tid: null,\n\t\t\t\tlink: null,\n\t\t\t\thash: null,\n\t\t\t\thasPassword: null,\n\t\t\t\thasDeathTime: null,\n\t\t\t\tavailableEdit: null,\n\t\t\t\tcanEditDocument: null,\n\t\t\t\tdeathTime: null,\n\t\t\t\tdeathTimeTimestamp: null,\n\t\t\t};\n\t\t}\n\t\tthis.adjustData();\n\t\tEventEmitter.emit(this, 'Disk:ExternalLink:DataSet', data);\n\n\t\tif (fireEvent !== false)\n\t\t{\n\t\t\tEventEmitter.emit(EventEmitter.GLOBAL_TARGET, 'Disk:ExternalLink:HasChanged', {\n\t\t\t\tobjectId: this.objectId,\n\t\t\t\tdata: this.data,\n\t\t\t\ttarget: this,\n\t\t\t});\n\t\t}\n\t}\n\n\tadjustData(): void\n\t{\n\t\tif (this.data.id === null)\n\t\t{\n\t\t\tthis.getSwitcher().check(false, false);\n\t\t\tthis.showUnchecked();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.getSwitcher().check(true, false);\n\t\t\tthis.showChecked();\n\n\t\t\tthis.getLinkContainer().innerHTML = Text.encode(this.data.link);\n\t\t\tthis.getLinkContainer().href = Text.encode(this.data.link);\n\n\t\t\tthis.getPasswordContainer().innerHTML = this.data.hasPassword\n\t\t\t\t? Loc.getMessage('DISK_EXTENSION_EXTERNAL_LINK_WITH_PASSWORD')\n\t\t\t\t: Loc.getMessage('DISK_EXTENSION_EXTERNAL_LINK_WITHOUT_PASSWORD');\n\n\t\t\tthis.getDeathTimeContainer().innerHTML = this.data.hasDeathTime\n\t\t\t\t? Loc.getMessage('DISK_EXTENSION_EXTERNAL_LINK_BEFORE')\n\t\t\t\t\t.replace(\n\t\t\t\t\t\t'#deathTime#',\n\t\t\t\t\t\tBX.Main.Date.format(\n\t\t\t\t\t\t\tBX.Main.Date.convertBitrixFormat(Loc.getMessage('FORMAT_DATETIME').replace(':SS', '')),\n\t\t\t\t\t\t\tnew Date(this.data.deathTimeTimestamp * 1000),\n\t\t\t\t\t\t),\n\t\t\t\t\t)\n\t\t\t\t: Loc.getMessage('DISK_EXTENSION_EXTERNAL_LINK_FOREVER');\n\n\t\t\tif (this.data.availableEdit === true)\n\t\t\t{\n\t\t\t\tthis.getRightsContainer().innerHTML = `, ${this.data.canEditDocument\n\t\t\t\t\t? Loc.getMessage('DISK_EXTENSION_EXTERNAL_LINK_RIGHTS_CAN_EDIT')\n\t\t\t\t\t: Loc.getMessage('DISK_EXTENSION_EXTERNAL_LINK_RIGHTS_CAN_READ')}`;\n\n\t\t\t\tDom.style(this.getRightsContainer(), 'display', '');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tDom.style(this.getRightsContainer(), 'display', 'none');\n\t\t\t}\n\t\t}\n\t}\n\n\tbindEvents(): void\n\t{\n\t\tEventEmitter.subscribe(\n\t\t\tEventEmitter.GLOBAL_TARGET,\n\t\t\t'Disk:ExternalLink:HasChanged',\n\t\t\t({ data: { objectId, data, target } }: BaseEvent) => {\n\t\t\t\tif (objectId !== this.objectId || Object.is(target, this))\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis.setData(data, false);\n\t\t\t},\n\t\t);\n\t}\n\n\tgetBackend(): Backend\n\t{\n\t\treturn Backend;\n\t}\n\n\tgetContainer(): HTMLElement\n\t{\n\t\treturn this.cache.remember('main', () => {\n\t\t\tconst copyButton = Tag.render`<div class=\"disk-control-external-link-link-icon\"></div>`;\n\t\t\tBX.clipboard.bindCopyClick(copyButton, {\n\t\t\t\ttext: () => {\n\t\t\t\t\treturn this.data.link;\n\t\t\t\t},\n\t\t\t});\n\n\t\t\tconst tune = () => {\n\t\t\t\treturn this.constructor.showPopup(this.objectId, this.data);\n\t\t\t};\n\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"disk-control-external-link-block${this.data.id === null ? '' : ' disk-control-external-link-block--active'}\">\n\t\t\t\t\t<div class=\"disk-control-external-link\">\n\t\t\t\t\t\t<div class=\"disk-control-external-link-btn\">\n\t\t\t\t\t\t\t${this.getSwitcher().getNode()}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"disk-control-external-link-main\">\n\t\t\t\t\t\t\t<div class=\"disk-control-external-link-link-box\">\n\t\t\t\t\t\t\t\t${this.getLinkContainer()}\n\t\t\t\t\t\t\t\t${copyButton}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"disk-control-external-link-subtitle\" onclick=\"${tune}\">${this.getDeathTimeContainer()}<span>, </span>${this.getPasswordContainer()}${this.getRightsContainer()}</div>\n\t\t\t\t\t\t\t<div class=\"disk-control-external-link-text\">${Loc.getMessage('DISK_EXTENSION_EXTERNAL_LINK_IS_NOT_PUBLISHED')}</div>\n\t\t\t\t\t\t\t<div class=\"disk-control-external-link-skeleton\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetSwitcher(): HTMLElement\n\t{\n\t\treturn this.cache.remember('switcher', () => {\n\t\t\tconst switcherNode = document.createElement('span');\n\t\t\tswitcherNode.className = 'ui-switcher';\n\t\t\tconst switcher = new BX.UI.Switcher({\n\t\t\t\tnode: switcherNode,\n\t\t\t\tchecked: this.data.id !== null,\n\t\t\t\tinputName: 'ACTIVE',\n\t\t\t\tcolor: 'green',\n\t\t\t});\n\t\t\tswitcher.handlers = { toggled: this.toggle.bind(this, { target: switcher }) };\n\n\t\t\treturn switcher;\n\t\t});\n\t}\n\n\tgetLinkContainer(): HTMLElement\n\t{\n\t\treturn this.cache.remember('link', () => {\n\t\t\treturn Tag.render`<a href=\"${Text.encode(this.data.link)}\" class=\"disk-control-external-link-link\" target=\"_blank\">${Text.encode(this.data.link)}</a>`;\n\t\t});\n\t}\n\n\tgetRightsContainer(): HTMLElement\n\t{\n\t\treturn this.cache.remember('rights', () => {\n\t\t\treturn document.createElement('span');\n\t\t});\n\t}\n\n\tgetDeathTimeContainer(): HTMLElement\n\t{\n\t\treturn this.cache.remember('deathTime', () => {\n\t\t\treturn document.createElement('span');\n\t\t});\n\t}\n\n\tgetPasswordContainer(): HTMLElement\n\t{\n\t\treturn this.cache.remember('password', () => {\n\t\t\treturn document.createElement('span');\n\t\t});\n\t}\n\n\ttoggle({ target }: BaseEvent): void\n\t{\n\t\tif (target.isChecked())\n\t\t{\n\t\t\tthis.showLoader();\n\t\t\tvoid this.getBackend().generateExternalLink(this.objectId)\n\t\t\t\t.then(({ data: { externalLink } }) => {\n\t\t\t\t\tthis.setData(externalLink);\n\t\t\t\t\tthis.hideLoader();\n\t\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.getBackend().disableExternalLink(this.objectId);\n\t\t\tthis.setData(null);\n\t\t}\n\t}\n\n\tshowChecked(): void\n\t{\n\t\tconst baseClassName = this.getContainer().classList.item(0);\n\t\tconst activeClassName = [baseClassName, '--active'].join('');\n\t\tDom.addClass(this.getContainer(), activeClassName);\n\t}\n\n\tshowUnchecked(): void\n\t{\n\t\tconst baseClassName = this.getContainer().classList.item(0);\n\t\tconst activeClassName = [baseClassName, '--active'].join('');\n\t\tDom.removeClass(this.getContainer(), activeClassName);\n\t}\n\n\tshowLoader(): void\n\t{\n\t\tDom.addClass(this.getContainer(), 'disk-control-external-link-skeleton--active');\n\t}\n\n\thideLoader(): void\n\t{\n\t\tDom.removeClass(this.getContainer(), 'disk-control-external-link-skeleton--active');\n\t}\n\n\treload(): Promise<void>\n\t{\n\t\tthis.showLoader();\n\n\t\treturn this.getBackend().getExternalLink(this.objectId)\n\t\t\t.then(({ data }) => {\n\t\t\t\tthis.setData(data && data.externalLink ? data.externalLink : null);\n\t\t\t\tthis.hideLoader();\n\t\t\t});\n\t}\n}\n","import {Cache, Type, Dom, Text, Tag, Loc, Runtime} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\nimport 'main.date';\nimport Input from './input';\nimport {SaveButton, CloseButton, ButtonState} from 'ui.buttons';\nimport {Popup} from 'main.popup';\n\nexport default class InputExtended extends Input\n{\n\tconstructor(objectId, data)\n\t{\n\t\tsuper(objectId, data);\n\t}\n\n\tadjustData()\n\t{\n\t\tif (this.data.id === null)\n\t\t{\n\t\t\tthis.getSwitcher().check(false, false);\n\t\t\tthis.showUnchecked();\n\t\t\tif (this.cache.get('popup'))\n\t\t\t{\n\t\t\t\tthis.cache.get('popup').getPopupContainer().setAttribute('externalLinkIsSet', 'N');\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.getSwitcher().check(true, false);\n\t\t\tthis.showChecked();\n\n\t\t\tthis.getLinkContainer().innerHTML = Text.encode(this.data.link);\n\t\t\tthis.getLinkContainer().href = Text.encode(this.data.link);\n\n\t\t\tthis.getPasswordContainer().innerHTML = this.data.hasPassword\n\t\t\t\t? Loc.getMessage('DISK_EXTENSION_EXTERNAL_LINK_WITH_PASSWORD')\n\t\t\t\t: Loc.getMessage('DISK_EXTENSION_EXTERNAL_LINK_WITHOUT_PASSWORD');\n\n\t\t\tthis.getDeathTimeContainer().innerHTML = this.data.hasDeathTime\n\t\t\t\t? Loc.getMessage('DISK_EXTENSION_EXTERNAL_LINK_BEFORE')\n\t\t\t\t\t.replace(\n\t\t\t\t\t\t'#deathTime#',\n\t\t\t\t\t\tBX.Main.Date.format(\n\t\t\t\t\t\t\tBX.Main.Date.convertBitrixFormat(Loc.getMessage('FORMAT_DATETIME').replace(':SS', '')),\n\t\t\t\t\t\t\tnew Date(this.data.deathTimeTimestamp * 1000)\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\t: Loc.getMessage('DISK_EXTENSION_EXTERNAL_LINK_FOREVER');\n\n\t\t\tif (this.data.availableEdit === true)\n\t\t\t{\n\t\t\t\tthis.getRightsContainer().innerHTML = ', ' + (this.data.canEditDocument\n\t\t\t\t\t? Loc.getMessage('DISK_EXTENSION_EXTERNAL_LINK_RIGHTS_CAN_EDIT')\n\t\t\t\t\t: Loc.getMessage('DISK_EXTENSION_EXTERNAL_LINK_RIGHTS_CAN_READ'));\n\t\t\t\tthis.getRightsContainer().style.display = '';\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.getRightsContainer().style.display = 'none';\n\t\t\t}\n\n\t\t\tif (this.cache.get('popup'))\n\t\t\t{\n\t\t\t\tthis.cache.get('popup').getPopupContainer().setAttribute('externalLinkIsSet', 'Y');\n\t\t\t}\n\t\t}\n\t}\n\n\tgetContainer()\n\t{\n\t\treturn this.cache.remember('main', () => {\n\t\t\tconst copyButton = Tag.render`<div class=\"disk-control-external-link-link-icon\"></div>`;\n\t\t\tBX.clipboard.bindCopyClick(copyButton, {text: () => { return this.data.link; }});\n\t\t\tthis.showSettings = this.showSettings.bind(this);\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"disk-control-external-link-block${this.data.id !== null ? ' disk-control-external-link-block--active' : ''} disk-control-external-link-block--tunable\">\n\t\t\t\t\t<div class=\"disk-control-external-link\">\n\t\t\t\t\t\t<div class=\"disk-control-external-link-btn\">\n\t\t\t\t\t\t\t${this.getSwitcher().getNode()}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"disk-control-external-link-main\">\n\t\t\t\t\t\t\t<div class=\"disk-control-external-link-link-box\">\n\t\t\t\t\t\t\t\t${this.getLinkContainer()}\n\t\t\t\t\t\t\t\t${copyButton}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"disk-control-external-link-subtitle\" onclick=\"${this.showSettings}\">${this.getDeathTimeContainer()}<span>, </span>${this.getPasswordContainer()}${this.getRightsContainer()}</div>\n\t\t\t\t\t\t\t<div class=\"disk-control-external-link-text\">${Loc.getMessage('DISK_EXTENSION_EXTERNAL_LINK_IS_NOT_PUBLISHED')}</div>\n\t\t\t\t\t\t\t<div class=\"disk-control-external-link-skeleton\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"disk-public-link-config\" onclick=\"${this.showSettings}\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"disk-control-external-link-settings\">\n\t\t\t\t\t\t${this.getDeathTimeSettingsContainer()}\n\t\t\t\t\t\t${this.getPasswordSettingsContainer()}\n\t\t\t\t\t\t${this.getEditSettingsContainer()}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tshowSettings()\n\t{\n\t\tthis.cache.set('settingsAreShown', 'Y');\n\t\tif (this.cache.get('popup'))\n\t\t{\n\t\t\tthis.cache.get('popup').getPopupContainer().setAttribute('settingsAreShown', 'Y');\n\t\t}\n\t}\n\n\thideSettings()\n\t{\n\t\tthis.cache.set('settingsAreShown', 'N');\n\t\tif (this.cache.get('popup'))\n\t\t{\n\t\t\tthis.cache.get('popup').getPopupContainer().setAttribute('settingsAreShown', 'N');\n\t\t}\n\t}\n\n\tgetDeathTimeSettingsContainer()\n\t{\n\t\treturn this.cache.remember('deathTimeSettings', () => {\n\t\t\tconst deathTimeSettings = Tag.render`\n\t\t\t<div class=\"ui-form-line\">\n\t\t\t\t<input type=\"checkbox\" name=\"hasDeathTime\">\n\t\t\t\t<div class=\"ui-form-row\">\n\t\t\t\t\t<label class=\"ui-ctl ui-ctl-checkbox\">\n\t\t\t\t\t\t<input type=\"checkbox\" class=\"ui-ctl-element\" name=\"enableDeathTime\">\n\t\t\t\t\t\t<div class=\"ui-ctl-label-text\">${Loc.getMessage('DISK_EXTENSION_EXTERNAL_LINK_DEATHTIME_LIMIT_CHECKBOX')}</div>\n\t\t\t\t\t</label>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"ui-form-row-inline\" name=\"deathTimeIsNotSaved\">\n\t\t\t\t\t<div class=\"ui-form-content\">\n\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-textbox ui-ctl-w25 ui-ctl-inline\">\n\t\t\t\t\t\t\t<input type=\"number\" min=\"1\" name=\"deathTimeValue\" class=\"ui-ctl-element\" value=\"10\" size=\"4\">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-after-icon ui-ctl-dropdown ui-ctl-inline ui-ctl-w50\">\n\t\t\t\t\t\t\t<div class=\"ui-ctl-after ui-ctl-icon-angle\"></div>\n\t\t\t\t\t\t\t<select class=\"ui-ctl-element\" name=\"deathTimeMeasure\">\n\t\t\t\t\t\t\t\t<option value=\"60\" selected>${Loc.getMessage('DISK_EXTENSION_EXTERNAL_LINK_MINUTES')}</option>\n\t\t\t\t\t\t\t\t<option value=\"3600\">${Loc.getMessage('DISK_EXTENSION_EXTERNAL_LINK_HOURS')}</option>\n\t\t\t\t\t\t\t\t<option value=\"86400\">${Loc.getMessage('DISK_EXTENSION_EXTERNAL_LINK_DAYS')}</option>\n\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"ui-form-row-inline\" name=\"deathTimeIsSaved\">\n\t\t\t\t\t<div class=\"ui-form-label\">\n\t\t\t\t\t\t<div class=\"ui-ctl-label-text\">${Loc.getMessage('DISK_EXTENSION_EXTERNAL_LINK_DEATHTIME_LIMIT_PREPOSITION')}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"ui-form-content\">\n\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-after-icon ui-ctl-no-border\">\n\t\t\t\t\t\t\t<div class=\"ui-ctl-element\" name=\"deathTimeParsed\">14.10.2014 16:33</div>\n\t\t\t\t\t\t\t<button name=\"deathTimeButtonUnset\" class=\"ui-ctl-after ui-ctl-icon-clear\"></button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>`;\n\n\t\t\t/*region bind settings form */\n\t\t\tconst onDeathTimeHasChanged = () => {\n\t\t\t\tif (!(this.data['id'] > 0))\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (deathTimeSettings.querySelector('input[name=enableDeathTime]').checked === true)\n\t\t\t\t{\n\t\t\t\t\tdeathTimeSettings.querySelector('input[name=deathTimeValue]').disabled = false;\n\t\t\t\t\tdeathTimeSettings.querySelector('[name=deathTimeMeasure]').disabled = false;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tdeathTimeSettings.querySelector('input[name=deathTimeValue]').disabled = true;\n\t\t\t\t\tdeathTimeSettings.querySelector('input[name=deathTimeValue]').value = '10';\n\t\t\t\t\tdeathTimeSettings.querySelector('[name=deathTimeMeasure]').disabled = true;\n\t\t\t\t\tdeathTimeSettings.querySelector('[name=deathTimeMeasure]').value = '60';\n\t\t\t\t}\n\t\t\t};\n\t\t\tdeathTimeSettings.querySelector('input[name=enableDeathTime]').addEventListener('click', () => {\n\t\t\t\tonDeathTimeHasChanged();\n\t\t\t\tdeathTimeSettings.querySelector('input[name=enableDeathTime]').dataset.changed = 'Y';\n\t\t\t\tEventEmitter.emit(this, 'Disk:ExternalLink:Settings:Change', {field: 'deathTime'});\n\t\t\t});\n\t\t\tdeathTimeSettings.querySelector('button[name=deathTimeButtonUnset]').addEventListener('click', () => {\n\t\t\t\tdeathTimeSettings.querySelector('input[name=hasDeathTime]').checked = false;\n\t\t\t\tdeathTimeSettings.querySelector('input[name=enableDeathTime]').dataset.changed = 'Y';\n\t\t\t\tEventEmitter.emit(this, 'Disk:ExternalLink:Settings:Change', {field: 'deathTime'});\n\t\t\t});\n\n\t\t\tconst adjustSettings = () => {\n\t\t\t\tif (!(this.data['id'] > 0))\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tdeathTimeSettings.querySelector('input[name=enableDeathTime]').dataset.changed = 'N';\n\t\t\t\tif (this.data['hasDeathTime'])\n\t\t\t\t{\n\t\t\t\t\tdeathTimeSettings.querySelector('input[name=hasDeathTime]').checked = true;\n\t\t\t\t\tdeathTimeSettings.querySelector('div[name=deathTimeParsed]').innerHTML = BX.Main.Date.format(\n\t\t\t\t\t\tBX.Main.Date.convertBitrixFormat(Loc.getMessage('FORMAT_DATETIME').replace(':SS', '')),\n\t\t\t\t\t\tnew Date(this.data.deathTimeTimestamp * 1000)\n\t\t\t\t\t);\n\t\t\t\t\tdeathTimeSettings.querySelector('input[name=enableDeathTime]').checked = true;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tdeathTimeSettings.querySelector('input[name=hasDeathTime]').checked = false;\n\t\t\t\t\tdeathTimeSettings.querySelector('input[name=enableDeathTime]').checked = false;\n\t\t\t\t}\n\t\t\t\tonDeathTimeHasChanged();\n\t\t\t};\n\t\t\tEventEmitter.subscribe(this, 'Disk:ExternalLink:DataSet', adjustSettings);\n\t\t\tadjustSettings();\n\t\t\t/*endregion*/\n\n\t\t\treturn deathTimeSettings;\n\t\t});\n\t}\n\n\tgetPasswordSettingsContainer()\n\t{\n\t\treturn this.cache.remember('passwordSettings', () => {\n\t\t\tconst passwordSettings = Tag.render`\n\t\t\t<div class=\"ui-form-line\">\n\t\t\t\t<input type=\"checkbox\" name=\"hasPassword\">\n\t\t\t\t<div class=\"ui-form-row\">\n\t\t\t\t\t<label class=\"ui-ctl ui-ctl-checkbox\">\n\t\t\t\t\t\t<input type=\"checkbox\" class=\"ui-ctl-element\" name=\"enablePassword\">\n\t\t\t\t\t\t<div class=\"ui-ctl-label-text\">${Loc.getMessage('DISK_EXTENSION_EXTERNAL_LINK_PASSWORD_CHECKBOX')}</div>\n\t\t\t\t\t</label>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"ui-form-row-inline\" name=\"passwordIsNotSaved\">\n\t\t\t\t\t<div class=\"ui-form-content\">\n\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-textbox ui-ctl-after-icon\">\n\t\t\t\t\t\t\t<input type=\"password\" name=\"passwordValue\" class=\"ui-ctl-element\" placeholder=\"${Loc.getMessage('DISK_EXTENSION_EXTERNAL_LINK_PASSWORD_PLACEHOLDER')}\" autocomplete=\"nope\">\n\t\t\t\t\t\t\t<button class=\"ui-ctl-after ui-ctl-icon-angle disk-external-link-setting-popup-password-show\" name=\"passwordTypeSwitcher\"></button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"ui-form-row-inline\" name=\"passwordIsSaved\">\n\t\t\t\t\t<div class=\"ui-form-content\">\n\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-disabled ui-ctl-after-icon\">\n\t\t\t\t\t\t\t<input type=\"password\" class=\"ui-ctl-element\" readonly value=\"some password\">\n\t\t\t\t\t\t\t<button name=\"passwordButtonUnset\" class=\"ui-ctl-after ui-ctl-icon-clear\"></button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t`;\n\n\t\t\t/*region bind settings form */\n\t\t\tconst passwordValue = passwordSettings.querySelector('input[name=passwordValue]');\n\n\t\t\tconst onPasswordHasChanged = () => {\n\t\t\t\tif (!(this.data['id'] > 0))\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (passwordSettings.querySelector('input[name=enablePassword]').checked === true)\n\t\t\t\t{\n\t\t\t\t\tpasswordValue.disabled = false;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tpasswordValue.disabled = true;\n\t\t\t\t\tpasswordValue.value = '';\n\t\t\t\t\tpasswordValue.type = 'password';\n\t\t\t\t}\n\t\t\t};\n\t\t\tpasswordSettings.querySelector('input[name=enablePassword]').addEventListener('click', () => {\n\t\t\t\tonPasswordHasChanged();\n\t\t\t\tpasswordSettings.querySelector('input[name=enablePassword]').dataset.changed = 'Y';\n\t\t\t\tEventEmitter.emit(this, 'Disk:ExternalLink:Settings:Change', {field: 'password'});\n\t\t\t});\n\t\t\tpasswordSettings.querySelector('button[name=passwordButtonUnset]').addEventListener('click', () => {\n\t\t\t\tpasswordSettings.querySelector('input[name=hasPassword]').checked = false;\n\t\t\t\tpasswordSettings.querySelector('input[name=enablePassword]').dataset.changed = 'Y';\n\t\t\t\tpasswordValue.value = '';\n\t\t\t\tpasswordValue.type = 'password';\n\t\t\t\tEventEmitter.emit(this, 'Disk:ExternalLink:Settings:Change', {field: 'password'});\n\t\t\t});\n\t\t\tpasswordSettings.querySelector('button[name=passwordTypeSwitcher]').addEventListener('click', () => {\n\t\t\t\tpasswordValue.type = (passwordValue.type === 'text' ? 'password' : 'text');});\n\n\t\t\tconst adjustSettings = () => {\n\t\t\t\tif (!(this.data['id'] > 0))\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tpasswordSettings.querySelector('input[name=enablePassword]').dataset.changed = 'N';\n\t\t\t\tpasswordSettings.querySelector('input[name=hasPassword]').checked = this.data['hasPassword'] === true;\n\t\t\t\tpasswordSettings.querySelector('input[name=enablePassword]').checked = this.data['hasPassword'] === true;\n\t\t\t\tonPasswordHasChanged();\n\t\t\t};\n\t\t\tEventEmitter.subscribe(this, 'Disk:ExternalLink:DataSet', adjustSettings);\n\t\t\tadjustSettings();\n\t\t\t/*endregion*/\n\n\t\t\treturn passwordSettings;\n\t\t});\n\t}\n\n\tgetEditSettingsContainer()\n\t{\n\t\treturn this.cache.remember('editSettings', () => {\n\t\t\tconst editSettings = Tag.render`\n\t\t\t<div class=\"ui-form-line\">\n\t\t\t\t<div class=\"ui-form-row\">\n\t\t\t\t\t<label class=\"ui-ctl ui-ctl-checkbox\">\n\t\t\t\t\t\t<input type=\"checkbox\" class=\"ui-ctl-element\" name=\"canEditDocument\">\n\t\t\t\t\t\t<div class=\"ui-ctl-label-text\">${Loc.getMessage('DISK_EXTENSION_EXTERNAL_LINK_ALLOW_EDITING')}</div>\n\t\t\t\t\t</label>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t`;\n\t\t\t/*region bind settings form */\n\t\t\tconst canEditDocument = editSettings.querySelector('input[name=canEditDocument]');\n\t\t\tcanEditDocument.addEventListener('click', () => {\n\t\t\t\tcanEditDocument.dataset.changed = 'Y';\n\t\t\t\tEventEmitter.emit(this, 'Disk:ExternalLink:Settings:Change', {field: 'canEditDocument'});\n\t\t\t});\n\t\t\tconst adjustSettings = () => {\n\t\t\t\tcanEditDocument.checked = (this.data['canEditDocument'] === true);\n\t\t\t\tcanEditDocument.dataset.changed = 'N';\n\t\t\t\tif (this.data['availableEdit'] !== true)\n\t\t\t\t{\n\t\t\t\t\teditSettings.style.display = 'none';\n\t\t\t\t\tcanEditDocument.disable = true;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\teditSettings.style.display = '';\n\t\t\t\t\tdelete editSettings.style.display;\n\t\t\t\t\tdelete canEditDocument.disable;\n\t\t\t\t}\n\t\t\t};\n\t\t\tEventEmitter.subscribe(this, 'Disk:ExternalLink:DataSet', adjustSettings);\n\t\t\tadjustSettings();\n\t\t\t/*endregion*/\n\n\t\t\treturn editSettings;\n\t\t})\n\t}\n\n\tsaveSettings()\n\t{\n\t\tif (!(this.data.id > 0))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst settings = this.getContainer();\n\t\t/*region DeathTime */\n\t\tif (settings.querySelector('input[name=enableDeathTime]').dataset.changed === 'Y')\n\t\t{\n\t\t\tconst deathTimer = parseInt(settings.querySelector('input[name=deathTimeValue]').value)\n\t\t\t\t* parseInt(settings.querySelector('[name=deathTimeMeasure]').value);\n\t\t\tconst enableDeathTime = (settings.querySelector('input[name=enableDeathTime]').checked === true && deathTimer > 0);\n\t\t\tif (enableDeathTime === true)\n\t\t\t{\n\t\t\t\tEventEmitter.emit(this, 'Disk:ExternalLink:Settings:Save', () => {});\n\t\t\t\tconst deathTimeTimestamp = Math.floor(Date.now() / 1000) + deathTimer;\n\t\t\t\tthis.getBackend()\n\t\t\t\t\t.setDeathTime(this.data.id, deathTimeTimestamp)\n\t\t\t\t\t.then(({data: {externalLink: {hasDeathTime, deathTimeTimestamp, deathTime}}}) => {\n\t\t\t\t\t\tthis.setData({\n\t\t\t\t\t\t\thasDeathTime: hasDeathTime,\n\t\t\t\t\t\t\tdeathTimeTimestamp: deathTimeTimestamp,\n\t\t\t\t\t\t\tdeathTime: deathTime,\n\t\t\t\t\t\t});\n\t\t\t\t\t})\n\t\t\t\t\t.finally(() => {\n\t\t\t\t\t\tEventEmitter.emit(this, 'Disk:ExternalLink:Settings:Saved', () => {});\n\t\t\t\t\t});\n\t\t\t}\n\t\t\telse if (enableDeathTime !== this.data.hasDeathTime)\n\t\t\t{\n\t\t\t\tEventEmitter.emit(this, 'Disk:ExternalLink:Settings:Save', () => {});\n\t\t\t\tthis.getBackend()\n\t\t\t\t\t.revokeDeathTime(this.data['id'])\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\tthis.setData({\n\t\t\t\t\t\t\thasDeathTime: false,\n\t\t\t\t\t\t\tdeathTimeTimestamp: null,\n\t\t\t\t\t\t\tdeathTime: null,\n\t\t\t\t\t\t});\n\t\t\t\t\t})\n\t\t\t\t\t.finally(() => {\n\t\t\t\t\t\tEventEmitter.emit(this, 'Disk:ExternalLink:Settings:Saved', () => {});\n\t\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\t/*endregion*/\n\t\t/*region Password*/\n\t\tif (settings.querySelector('input[name=enablePassword]').dataset.changed === 'Y')\n\t\t{\n\t\t\tconst passwordValue = settings.querySelector('input[name=passwordValue]').value.trim();\n\t\t\tconst enablePassword = (settings.querySelector('input[name=enablePassword]').checked === true && passwordValue.length > 0);\n\t\t\tif (enablePassword === true)\n\t\t\t{\n\t\t\t\tEventEmitter.emit(this, 'Disk:ExternalLink:Settings:Save', () => {});\n\t\t\t\tthis.getBackend()\n\t\t\t\t\t.setPassword(this.data['id'], passwordValue)\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\tthis.setData({ hasPassword: true });\n\t\t\t\t\t})\n\t\t\t\t\t.finally(() => {\n\t\t\t\t\t\tEventEmitter.emit(this, 'Disk:ExternalLink:Settings:Saved', () => {});\n\t\t\t\t\t});\n\t\t\t}\n\t\t\telse if (enablePassword !== this.data.hasPassword)\n\t\t\t{\n\t\t\t\tEventEmitter.emit(this, 'Disk:ExternalLink:Settings:Save', () => {});\n\t\t\t\tthis.getBackend()\n\t\t\t\t\t.revokePassword(this.data['id'])\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\tthis.setData({ hasPassword: false });\n\t\t\t\t\t})\n\t\t\t\t\t.finally(() => {\n\t\t\t\t\t\tEventEmitter.emit(this, 'Disk:ExternalLink:Settings:Saved', () => {});\n\t\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\t/*endregion*/\n\t\t/*region editing rights */\n\t\tconst canEditDocumentNode =settings.querySelector('input[name=canEditDocument]');\n\t\tif (canEditDocumentNode\n\t\t\t&& canEditDocumentNode.dataset.changed === 'Y'\n\t\t\t&& canEditDocumentNode.checked !== this.data.canEditDocument)\n\t\t{\n\t\t\tif (canEditDocumentNode.checked)\n\t\t\t{\n\t\t\t\tEventEmitter.emit(this, 'Disk:ExternalLink:Settings:Save', () => {});\n\t\t\t\tthis.getBackend()\n\t\t\t\t\t.allowEditDocument(this.data['id'])\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\tthis.setData({ canEditDocument: true });\n\t\t\t\t\t})\n\t\t\t\t\t.finally(() => {\n\t\t\t\t\t\tEventEmitter.emit(this, 'Disk:ExternalLink:Settings:Saved', () => {});\n\t\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tEventEmitter.emit(this, 'Disk:ExternalLink:Settings:Save', () => {});\n\t\t\t\tthis.getBackend()\n\t\t\t\t\t.disallowEditDocument(this.data['id'])\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\tthis.setData({ canEditDocument: false });\n\t\t\t\t\t})\n\t\t\t\t\t.finally(() => {\n\t\t\t\t\t\tEventEmitter.emit(this, 'Disk:ExternalLink:Settings:Saved', () => {});\n\t\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\t/*endregion*/\n\t}\n\n\tgetPopup()\n\t{\n\t\treturn this.cache.remember('popup', () => {\n\t\t\tconst popupSave = new SaveButton({\n\t\t\t\tstate: ButtonState.DISABLED,\n\t\t\t\tonclick: () => {\n\t\t\t\t\tthis.saveSettings();\n\t\t\t\t}\n\t\t\t});\n\t\t\tpopupSave.saveCounter = 0;\n\t\t\tEventEmitter.subscribe(this, 'Disk:ExternalLink:Settings:Save', () => {\n\t\t\t\tthis.cache.get('popup').getPopupContainer().setAttribute('externalLinkIsWaiting', 'Y');\n\t\t\t\tpopupSave.saveCounter++;\n\t\t\t\tpopupSave.setWaiting();\n\t\t\t});\n\t\t\tEventEmitter.subscribe(this, 'Disk:ExternalLink:Settings:Saved', () => {\n\t\t\t\tpopupSave.saveCounter--;\n\t\t\t\tif (popupSave.saveCounter <= 0)\n\t\t\t\t{\n\t\t\t\t\tthis.cache.get('popup').getPopupContainer().setAttribute('externalLinkIsWaiting', 'N');\n\t\t\t\t\tpopupSave.setDisabled(true);\n\t\t\t\t}\n\t\t\t});\n\t\t\tEventEmitter.subscribe(this, 'Disk:ExternalLink:Settings:Change', () => {\n\t\t\t\tpopupSave.setDisabled(false);\n\t\t\t});\n\t\t\tEventEmitter.subscribe(this, 'Disk:ExternalLink:DataSet', () => {\n\t\t\t\tpopupSave.setDisabled(true);\n\t\t\t});\n\n\t\t\tconst popup = new Popup({\n\t\t\t\tuniquePopupId: 'disk-external-link',\n\t\t\t\tclassName: 'disk-external-link-popup',\n\t\t\t\ttitleBar: Loc.getMessage('DISK_EXTENSION_EXTERNAL_LINK_TITLE'),\n\t\t\t\tcontent: this.getContainer(),\n\t\t\t\tautoHide: true,\n\t\t\t\tcloseIcon: true,\n\t\t\t\tcloseByEsc: true,\n\t\t\t\toverlay: true,\n\t\t\t\tcacheable: false,\n\t\t\t\tminWidth: 410,\n\t\t\t\tevents: {\n\t\t\t\t\tonClose: () => {\n\t\t\t\t\t\tthis.cache.delete('popup');\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tbuttons: [\n\t\t\t\t\tpopupSave,\n\t\t\t\t\tnew CloseButton({\n\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\tclick: function () {\n\t\t\t\t\t\t\t\tpopup.close();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t});\n\t\t\tpopup.getPopupContainer().setAttribute('externalLinkIsSet', this.data.id > 0 ? 'Y' : 'N');\n\t\t\tpopup.getPopupContainer().setAttribute('settingsAreShown', this.cache.get('settingsAreShown') === 'Y' ? 'Y' : 'N');\n\t\t\treturn popup;\n\t\t});\n\t}\n\n\tshow()\n\t{\n\t\tthis.getPopup().show();\n\t}\n}\n","import Input from './input';\nimport InputExtended from './input-extended';\n\n\nexport default class InputSimple extends Input\n{\n\tconstructor(objectId, data)\n\t{\n\t\tsuper(objectId, data);\n\t}\n\n\tstatic getExtendedInputClass()\n\t{\n\t\treturn InputExtended;\n\t}\n\n\tstatic showPopup(objectId, data = null)\n\t{\n\t\tconst className = this.getExtendedInputClass();\n\t\tconst res = new className(objectId, data);\n\n\t\tif (data === null)\n\t\t{\n\t\t\tres.reload();\n\t\t}\n\t\telse // This behaviour is appropriate for current task\n\t\t{\n\t\t\tres.showSettings();\n\t\t}\n\t\tres.show();\n\t}\n}\n","import InputExtended from './input-extended';\nimport { BackendForTrackedObject } from './backend';\n\nexport default class InputExtendedForTrackedObject extends InputExtended\n{\n\tgetBackend(): BackendForTrackedObject\n\t{\n\t\treturn BackendForTrackedObject;\n\t}\n}\n","import InputSimple from './input-simple';\nimport InputExtendedForTrackedObject from \"./input-extended-for-tracked-object\";\nimport {BackendForTrackedObject} from './backend';\n\nexport default class InputSimpleForTrackedObject extends InputSimple\n{\n\tconstructor(objectId, data)\n\t{\n\t\tsuper(objectId, data);\n\t}\n\n\tgetBackend()\n\t{\n\t\treturn BackendForTrackedObject;\n\t}\n\n\tstatic getExtendedInputClass()\n\t{\n\t\treturn InputExtendedForTrackedObject\n\t}\n}\n"],"names":["Backend","objectId","ajax","runAction","data","externalLinkId","deathTimeTimestamp","Promise","resolve","reject","deathTime","then","newPassword","BackendForTrackedObject","BX","Input","Cache","MemoryCache","bindEvents","Type","isPlainObject","parseInt","setData","fireEvent","Object","assign","id","link","hash","hasPassword","hasDeathTime","availableEdit","canEditDocument","adjustData","EventEmitter","emit","GLOBAL_TARGET","target","getSwitcher","check","showUnchecked","showChecked","getLinkContainer","innerHTML","Text","encode","href","getPasswordContainer","Loc","getMessage","getDeathTimeContainer","replace","Main","Date","format","convertBitrixFormat","getRightsContainer","Dom","style","subscribe","is","cache","remember","copyButton","Tag","render","clipboard","bindCopyClick","text","tune","constructor","showPopup","getNode","switcherNode","document","createElement","className","switcher","UI","Switcher","node","checked","inputName","color","handlers","toggled","toggle","bind","isChecked","showLoader","getBackend","generateExternalLink","externalLink","hideLoader","disableExternalLink","baseClassName","getContainer","classList","item","activeClassName","join","addClass","removeClass","getExternalLink","InputExtended","get","getPopupContainer","setAttribute","display","showSettings","getDeathTimeSettingsContainer","getPasswordSettingsContainer","getEditSettingsContainer","set","deathTimeSettings","onDeathTimeHasChanged","querySelector","disabled","value","addEventListener","dataset","changed","field","adjustSettings","passwordSettings","passwordValue","onPasswordHasChanged","type","editSettings","disable","settings","deathTimer","enableDeathTime","Math","floor","now","setDeathTime","revokeDeathTime","trim","enablePassword","length","setPassword","revokePassword","canEditDocumentNode","allowEditDocument","disallowEditDocument","popupSave","SaveButton","state","ButtonState","DISABLED","onclick","saveSettings","saveCounter","setWaiting","setDisabled","popup","Popup","uniquePopupId","titleBar","content","autoHide","closeIcon","closeByEsc","overlay","cacheable","minWidth","events","onClose","buttons","CloseButton","click","close","getPopup","show","InputSimple","getExtendedInputClass","res","reload","InputExtendedForTrackedObject","InputSimpleForTrackedObject"],"mappings":"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"}