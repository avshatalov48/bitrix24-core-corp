this.BX=this.BX||{},function(e,t,a,i){"use strict";var s;function n(e,t){l(e,t),t.add(e)}function r(e,t,a){l(e,t),t.set(e,a)}function l(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function o(e,t,a){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return a}var d=new WeakMap,c=new WeakMap,b=new WeakMap,h=new WeakMap,p=new WeakMap,u=new WeakSet,v=new WeakSet,m=new WeakSet,f=new WeakSet,w=new WeakSet,S=function(){function e(a){babelHelpers.classCallCheck(this,e),n(this,w),n(this,f),n(this,m),n(this,v),n(this,u),r(this,d,{writable:!0,value:void 0}),r(this,c,{writable:!0,value:void 0}),r(this,b,{writable:!0,value:void 0}),r(this,h,{writable:!0,value:void 0}),r(this,p,{writable:!0,value:void 0}),babelHelpers.classPrivateFieldSet(this,c,document.getElementById(a.containerId)),babelHelpers.classPrivateFieldSet(this,b,document.getElementById(a.textNodeId)),babelHelpers.classPrivateFieldSet(this,h,a.dashboardId),babelHelpers.classPrivateFieldSet(this,p,a.marketCollectionUrl),o(this,u,B).call(this,babelHelpers.classPrivateFieldGet(this,c)),babelHelpers.classPrivateFieldGet(this,c)&&t.Event.bind(babelHelpers.classPrivateFieldGet(this,c),"click",o(this,m,E).bind(this))}return babelHelpers.createClass(e,[{key:"getDashboardEmbeddedData",value:function(e){return BX.ajax.runAction("biconnector.dashboard.getDashboardEmbeddedData",{data:{id:e}})}}]),e}();function B(e){return babelHelpers.classPrivateFieldGet(this,d)||babelHelpers.classPrivateFieldSet(this,d,new i.Dialog({id:"biconnector-superset-dashboard",multiple:!1,targetNode:e,offsetTop:14,context:"biconnector-superset-dashboard",entities:[{id:"biconnector-superset-dashboard",dynamicLoad:!0,dynamicSearch:!0}],footer:[o(this,f,H).call(this)],enableSearch:!0,dropdownMode:!0,showAvatars:!0,compactView:!1,dynamicLoad:!0,preselectedItems:[["biconnector-superset-dashboard",babelHelpers.classPrivateFieldGet(this,h)]],events:{"Item:onSelect":o(this,v,k).bind(this)}})),babelHelpers.classPrivateFieldGet(this,d)}function k(e){var i=this;return this.getDashboardEmbeddedData(e.data.item.id).then((function(t){t.data.dashboard&&(o(i,w,g).call(i,t.data.dashboard.title),a.EventEmitter.emit("BiConnector:DashboardSelector.onSelect",{item:e.data.item,dashboardId:e.data.item.id,credentials:t.data.dashboard}))})).catch((function(e){var a;e.errors&&t.Type.isStringFilled(null===(a=e.errors[0])||void 0===a?void 0:a.message)&&BX.UI.Notification.Center.notify({content:t.Text.encode(e.errors[0].message)})}))}function E(){babelHelpers.classPrivateFieldGet(this,d).show()}function H(){var e=this,a=t.Tag.render(s||(s=babelHelpers.taggedTemplateLiteral(['<span \n\t\t\tclass="ui-selector-footer-link ui-selector-footer-link-add">\n\t\t\t\t',"\n\t\t\t</span>"])),t.Loc.getMessage("SUPERSET_DASHBOARD_DETAIL_SELECTOR_FOOTER"));return t.Event.bind(a,"click",(function(){BX.SidePanel.Instance.open(babelHelpers.classPrivateFieldGet(e,p),{customLeftBoundary:0}),BX.BIConnector.ApacheSupersetAnalytics.sendAnalytics("market","market_call",{c_element:"detail_button"})})),a}function g(e){babelHelpers.classPrivateFieldGet(this,b).innerHTML=e}t.Reflection.namespace("BX.BIConnector").SupersetDashboardSelector=S}(this.BX.BIConnector=this.BX.BIConnector||{},BX,BX.Event,BX.UI.EntitySelector);
