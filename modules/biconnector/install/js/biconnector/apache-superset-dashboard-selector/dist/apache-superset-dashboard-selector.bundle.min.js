this.BX=this.BX||{},function(e,t,a,i){"use strict";var s;function n(e,t){l(e,t),t.add(e)}function r(e,t,a){l(e,t),t.set(e,a)}function l(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function o(e,t,a){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return a}var d=new WeakMap,c=new WeakMap,b=new WeakMap,h=new WeakMap,v=new WeakMap,p=new WeakMap,u=new WeakMap,m=new WeakSet,S=new WeakSet,w=new WeakSet,f=new WeakSet,E=new WeakSet,P=new WeakSet,B=new WeakSet;function H(e){return babelHelpers.classPrivateFieldGet(this,d)||babelHelpers.classPrivateFieldSet(this,d,new i.Dialog({id:"biconnector-superset-dashboard",multiple:!1,targetNode:e,offsetTop:14,context:"biconnector-superset-dashboard",entities:[{id:"biconnector-superset-dashboard",dynamicLoad:!0,dynamicSearch:!0}],footer:[o(this,E,T).call(this)],enableSearch:!0,dropdownMode:!0,showAvatars:!0,compactView:!1,dynamicLoad:!0,clearUnavailableItems:!0,preselectedItems:[["biconnector-superset-dashboard",babelHelpers.classPrivateFieldGet(this,h)]],events:{"Item:onSelect":o(this,S,F).bind(this)}})),babelHelpers.classPrivateFieldGet(this,d)}function F(e){var i=this;return a.EventEmitter.emit("BiConnector:DashboardSelector.onSelect"),new Promise((function(s,n){o(i,w,k).call(i,e.data.item.id).then((function(t){t.data.dashboard&&(o(i,P,g).call(i,t.data.dashboard.title),a.EventEmitter.emit("BiConnector:DashboardSelector.onSelectDataLoaded",{item:e.data.item,dashboardId:e.data.item.id,credentials:t.data.dashboard})),s(t)})).catch((function(e){var a;e.errors&&t.Type.isStringFilled(null===(a=e.errors[0])||void 0===a?void 0:a.message)&&BX.UI.Notification.Center.notify({content:t.Text.encode(e.errors[0].message)}),n(e)}))}))}function k(e){return BX.ajax.runAction("biconnector.dashboard.getDashboardEmbeddedData",{data:{id:e,urlParams:babelHelpers.classPrivateFieldGet(this,u)}})}function I(){babelHelpers.classPrivateFieldGet(this,d).show()}function T(){var e=this,a=t.Tag.render(s||(s=babelHelpers.taggedTemplateLiteral(['<span \n\t\t\tclass="ui-selector-footer-link ui-selector-footer-link-add">\n\t\t\t\t',"\n\t\t\t</span>"])),t.Loc.getMessage("SUPERSET_DASHBOARD_DETAIL_SELECTOR_FOOTER"));return t.Event.bind(a,"click",(function(){babelHelpers.classPrivateFieldGet(e,p)?(BX.SidePanel.Instance.open(babelHelpers.classPrivateFieldGet(e,v),{customLeftBoundary:0}),BX.BIConnector.ApacheSupersetAnalytics.sendAnalytics("market","market_call",{c_element:"detail_button"})):BX.UI.Notification.Center.notify({content:t.Loc.getMessage("SUPERSET_DASHBOARD_DETAIL_SELECTOR_FOOTER_MARKET_INSTALL_ERROR")})})),a}function g(e){babelHelpers.classPrivateFieldGet(this,b).innerHTML=t.Text.encode(e)}function C(e){var t=this,i=e.data.dashboard;return new Promise((function(e){o(t,P,g).call(t,i.title),babelHelpers.classPrivateFieldSet(t,d,null),babelHelpers.classPrivateFieldSet(t,h,i.id),o(t,m,H).call(t,babelHelpers.classPrivateFieldGet(t,c)),a.EventEmitter.emit("BiConnector:DashboardSelector.onSelectDataLoaded",{item:i,dashboardId:i.id,credentials:i}),e()}))}t.Reflection.namespace("BX.BIConnector").SupersetDashboardSelector=function e(i){babelHelpers.classCallCheck(this,e),n(this,B),n(this,P),n(this,E),n(this,f),n(this,w),n(this,S),n(this,m),r(this,d,{writable:!0,value:void 0}),r(this,c,{writable:!0,value:void 0}),r(this,b,{writable:!0,value:void 0}),r(this,h,{writable:!0,value:void 0}),r(this,v,{writable:!0,value:void 0}),r(this,p,{writable:!0,value:void 0}),r(this,u,{writable:!0,value:void 0}),babelHelpers.classPrivateFieldSet(this,c,document.getElementById(i.containerId)),babelHelpers.classPrivateFieldSet(this,b,document.getElementById(i.textNodeId)),babelHelpers.classPrivateFieldSet(this,h,i.dashboardId),babelHelpers.classPrivateFieldSet(this,v,i.marketCollectionUrl),babelHelpers.classPrivateFieldSet(this,p,i.isMarketInstalled),babelHelpers.classPrivateFieldSet(this,u,i.dashboardUrlParams),o(this,m,H).call(this,babelHelpers.classPrivateFieldGet(this,c)),babelHelpers.classPrivateFieldGet(this,c)&&(t.Event.bind(babelHelpers.classPrivateFieldGet(this,c),"click",o(this,f,I).bind(this)),a.EventEmitter.subscribe("BIConnector.DashboardManager:onCopyDashboard",o(this,B,C).bind(this)))}}(this.BX.BIConnector=this.BX.BIConnector||{},BX,BX.Event,BX.UI.EntitySelector);
//# sourceMappingURL=apache-superset-dashboard-selector.bundle.map.js