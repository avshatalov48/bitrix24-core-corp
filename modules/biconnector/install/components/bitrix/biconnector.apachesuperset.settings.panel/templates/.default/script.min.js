this.BX=this.BX||{};this.BX.BIConnector=this.BX.BIConnector||{};(function(e,t,n,a,i,r,l,s){"use strict";function o(e,t){c(e,t);t.add(e)}function c(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function u(e,t,n){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return n}var d=BX.SidePanel;var p=new WeakSet;var b=function(e){babelHelpers.inherits(n,e);function n(e,t){var a,r;var l;babelHelpers.classCallCheck(this,n);l=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(n).call(this));o(babelHelpers.assertThisInitialized(l),p);l.initialize(e,t);l.analytic=(a=(r=t.config)===null||r===void 0?void 0:r.dashboardAnalyticInfo)!==null&&a!==void 0?a:{};i.EventEmitter.subscribeOnce("BX.UI.EntityEditor:onInit",(function(e){var t=e.getData(),n=babelHelpers.slicedToArray(t,1),a=n[0];a===null||a===void 0?void 0:a._toolPanel.disableSaveButton()}));i.EventEmitter.subscribeOnce("BX.UI.EntityEditor:onControlChange",(function(e){var t=e.getData(),n=babelHelpers.slicedToArray(t,1),a=n[0];a===null||a===void 0?void 0:a._toolPanel.enableSaveButton()}));i.EventEmitter.subscribeOnce("BX.UI.EntityEditor:onCancel",(function(e){var t=e.getData(),n=babelHelpers.slicedToArray(t,2),a=n[1];a.enableCloseConfirmation=false}));i.EventEmitter.subscribeOnce("BX.UI.EntityEditor:onSave",(function(e){var t=e.getData(),n=babelHelpers.slicedToArray(t,2),a=n[1];a.enableCloseConfirmation=false}));return l}babelHelpers.createClass(n,[{key:"onAfterSave",value:function e(){var n;var a;if(l.Type.isStringFilled(this.analytic.type)){a={type:this.analytic.type.toLowerCase(),p1:t.ApacheSupersetAnalytics.buildAppIdForAnalyticRequest(this.analytic.appId),p2:this.analytic.id,c_element:"grid_menu",status:"success"}}else{a={c_element:"grid_settings",status:"success"}}t.ApacheSupersetAnalytics.sendAnalytics("edit","report_settings",a);this===null||this===void 0?void 0:(n=this._editor)===null||n===void 0?void 0:n._modeSwitch.reset();u(this,p,h).call(this);this.innerCancel()}},{key:"innerCancel",value:function e(){d.Instance.close()}}]);return n}(BX.UI.EntityEditorController);function h(){var e;var t=BX.SidePanel.Instance.getPreviousSlider(BX.SidePanel.Instance.getSliderByWindow(window));var n=t?t.getWindow():top;if(!n.BX.Main||!n.BX.Main.gridManager){return}var a=(e=n.BX.Main.gridManager.getById("biconnector_superset_dashboard_grid"))===null||e===void 0?void 0:e.instance;if(a){a.reload()}}var v;function g(e,t){var n=typeof Symbol!=="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=f(e))||t&&e&&typeof e.length==="number"){if(n)e=n;var a=0;var i=function e(){};return{s:i,n:function t(){if(a>=e.length)return{done:true};return{done:false,value:e[a++]}},e:function e(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r=true,l=false,s;return{s:function t(){n=n.call(e)},n:function e(){var t=n.next();r=t.done;return t},e:function e(t){l=true;s=t},f:function e(){try{if(!r&&n["return"]!=null)n["return"]()}finally{if(l)throw s}}}}function f(e,t){if(!e)return;if(typeof e==="string")return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor)n=e.constructor.name;if(n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y(e,t)}function y(e,t){if(t==null||t>e.length)t=e.length;for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function T(e,t){m(e,t);t.add(e)}function m(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function _(e,t,n){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return n}var E=new WeakSet;var C=new WeakSet;var I=new WeakSet;var H=function(e){babelHelpers.inherits(t,e);function t(e,n){var a;babelHelpers.classCallCheck(this,t);a=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));T(babelHelpers.assertThisInitialized(a),I);T(babelHelpers.assertThisInitialized(a),C);T(babelHelpers.assertThisInitialized(a),E);a.initialize(e,n);_(babelHelpers.assertThisInitialized(a),E,S).call(babelHelpers.assertThisInitialized(a));return a}return t}(BX.UI.EntityEditorController);function S(){var e=this;i.EventEmitter.subscribeOnce("BX.UI.EntityEditor:onInit",(function(t){var n;var a=t.getData(),i=babelHelpers.slicedToArray(a,1),r=i[0];var l=r===null||r===void 0?void 0:(n=r._controls)===null||n===void 0?void 0:n[0];if(l!==null&&l!==void 0&&l._sections&&l._sections.length>0){_(e,C,k).call(e,l._sections)}}))}function k(e){var t=g(e),n;try{for(t.s();!(n=t.n()).done;){var a=n.value;if(a.getTitle()!==""){_(this,I,N).call(this,a)}}}catch(e){t.e(e)}finally{t.f()}}function N(e){var t=e._headerContainer;if(t===null){return}var n=e.getData();var a=t.querySelector(".ui-entity-editor-header-title");if(a&&n.iconClass){var i=l.Tag.render(v||(v=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t\t<span class="\n\t\t\t\t\t\tsuperset-settings-section-icon\n\t\t\t\t\t\tui-icon-set \n\t\t\t\t\t\t','\n\t\t\t\t\t"></span>\n\t\t\t'])),n.iconClass);l.Dom.insertBefore(i,a)}}var B=function(){function e(t){var n=this;babelHelpers.classCallCheck(this,e);i.EventEmitter.subscribe("".concat(t,":onInitialize"),(function(e){var t=e.getCompatData(),a=babelHelpers.slicedToArray(t,2),i=a[1];i.methods.dashboardSettings=n.factory.bind(n)}))}babelHelpers.createClass(e,[{key:"factory",value:function e(t,n,a){switch(t){case"settingComponentController":return new b(n,a);case"iconController":return new H(n,a);default:return null}}}]);return e}();var D,L,w,O,A,F,R,P;var U=function(e){babelHelpers.inherits(t,e);function t(e,n){var a;babelHelpers.classCallCheck(this,t);a=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));a.dateSelectorBlock=null;a.toInput=null;a.startInput=null;return a}babelHelpers.createClass(t,[{key:"createTitleNode",value:function e(){return l.Tag.render(D||(D=babelHelpers.taggedTemplateLiteral(["<span></span>"])))}},{key:"layout",value:function e(n){babelHelpers.get(babelHelpers.getPrototypeOf(t.prototype),"layout",this).call(this,n);this.layoutRangeField(this.getValue()===t.RANGE_VALUE);this.layoutHint()}},{key:"onItemSelect",value:function e(n,a){this.layoutRangeField(a.value===t.RANGE_VALUE);babelHelpers.get(babelHelpers.getPrototypeOf(t.prototype),"onItemSelect",this).call(this,n,a)}},{key:"refreshLayout",value:function e(){babelHelpers.get(babelHelpers.getPrototypeOf(t.prototype),"refreshLayout",this).call(this);this.layoutRangeField(this.getModel().getField("FILTER_PERIOD")===t.RANGE_VALUE)}},{key:"layoutRangeField",value:function e(n){var a=this;if(this.dateSelectorBlock!==null){l.Dom.remove(this.dateSelectorBlock);this.dateSelectorBlock=null;this.startInput=null;this.endInput=null}if(n){l.Dom.removeClass(this._selectContainer,"ui-ctl-w100");l.Dom.addClass(this._innerWrapper,"ui-entity-editor-content-block__range");l.Dom.addClass(this._selectContainer,"ui-ctl-date-range");this.dateSelectorBlock=l.Tag.render(L||(L=babelHelpers.taggedTemplateLiteral(['<div class="ui-ctl-dropdown-range-group"></div>'])));var i=l.Text.encode(this.getModel().getField(this.getDateStartFieldName()));this.startInput=l.Tag.render(w||(w=babelHelpers.taggedTemplateLiteral(['<input class="ui-ctl-element" type="text" value="','" name="','">'])),i,this.getDateStartFieldName());l.Event.bind(this.startInput,"click",(function(){t.showCalendar(a.startInput)}));l.Event.bind(this.startInput,"change",(function(){a.onChange()}));l.Event.bind(this.startInput,"input",(function(){a.onChange()}));l.Dom.append(l.Tag.render(O||(O=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t\t<div class="ui-ctl ui-ctl-before-icon ui-ctl-datetime">\n\t\t\t\t\t\t<div class="ui-ctl-before ui-ctl-icon-calendar"></div>\n\t\t\t\t\t\t',"\n\t\t\t\t\t</div>\n\t\t\t\t"])),this.startInput),this.dateSelectorBlock);l.Dom.append(l.Tag.render(A||(A=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t\t<div class="ui-ctl-dropdown-range-line">\n\t\t\t\t\t\t<span class="ui-ctl-dropdown-range-line-item"></span>\n\t\t\t\t\t</div>\n\t\t\t\t']))),this.dateSelectorBlock);var r=l.Text.encode(this.getModel().getField(this.getDateEndFieldName()));this.endInput=l.Tag.render(F||(F=babelHelpers.taggedTemplateLiteral(['<input class="ui-ctl-element" type="text" value="','" name="','">'])),r,this.getDateEndFieldName());l.Event.bind(this.endInput,"click",(function(){t.showCalendar(a.endInput)}));l.Event.bind(this.endInput,"change",(function(){a.onChange()}));l.Event.bind(this.endInput,"input",(function(){a.onChange()}));l.Dom.append(l.Tag.render(R||(R=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t\t<div class="ui-ctl ui-ctl-before-icon ui-ctl-datetime">\n\t\t\t\t\t\t<div class="ui-ctl-before ui-ctl-icon-calendar"></div>\n\t\t\t\t\t\t',"\n\t\t\t\t\t</div>\n\t\t\t\t"])),this.endInput),this.dateSelectorBlock);l.Dom.append(this.dateSelectorBlock,this._innerWrapper)}else{l.Dom.addClass(this._selectContainer,"ui-ctl-w100");l.Dom.removeClass(this._innerWrapper,"ui-entity-editor-content-block__range");l.Dom.removeClass(this._selectContainer,"ui-ctl-date-range")}}},{key:"layoutHint",value:function e(){var t=l.Tag.render(P||(P=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="biconnector-superset-settings-panel-range__hint">\n\t\t\t\t',"\n\t\t\t</div>\n\t\t"])),this.getHintText());l.Dom.insertBefore(t,this._container)}},{key:"getHintText",value:function e(){var t='\n\t\t\t<a \n\t\t\t\tclass="biconnector-superset-settings-panel-range__hint-link"\n\t\t\t\tonclick="top.BX.Helper.show(\'redirect=detail&code=20337242&anchor=Defaultreportingperiod\')"\n\t\t\t>\n\t\t\t\t'.concat(l.Loc.getMessage("BICONNECTOR_SUPERSET_SETTINGS_COMMON_RANGE_FIELD_HINT_LINK"),"\n\t\t\t</a>\n\t\t");return l.Loc.getMessage("BICONNECTOR_SUPERSET_SETTINGS_COMMON_RANGE_FIELD_HINT").replace("#HINT_LINK#",t)}},{key:"getDateStartFieldName",value:function e(){var t;return(t=this._schemeElement.getData().dateStartFieldName)!==null&&t!==void 0?t:"DATE_FILTER_START"}},{key:"getDateEndFieldName",value:function e(){var t;return(t=this._schemeElement.getData().dateEndFieldName)!==null&&t!==void 0?t:"DATE_FILTER_END"}},{key:"save",value:function e(){babelHelpers.get(babelHelpers.getPrototypeOf(t.prototype),"save",this).call(this);this._model.setField(this.getDateStartFieldName(),null);this._model.setField(this.getDateEndFieldName(),null);if(l.Type.isDomNode(this.endInput)){this._model.setField(this.getDateEndFieldName(),this.endInput.value)}if(l.Type.isDomNode(this.startInput)){this._model.setField(this.getDateStartFieldName(),this.startInput.value)}}}],[{key:"create",value:function e(t,n){var a=new this(t,n);a.initialize(t,n);return a}},{key:"layout",value:function e(){babelHelpers.get(babelHelpers.getPrototypeOf(t),"layout",this).call(this)}},{key:"showCalendar",value:function e(t){BX.calendar.get().Close();BX.calendar({node:t,field:t,bTime:false,bSetFocus:false})}}]);return t}(BX.UI.EntityEditorList);babelHelpers.defineProperty(U,"RANGE_VALUE","range");var X=function(e){babelHelpers.inherits(t,e);function t(){babelHelpers.classCallCheck(this,t);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}babelHelpers.createClass(t,[{key:"getHintText",value:function e(){return l.Loc.getMessage("BICONNECTOR_SUPERSET_SETTINGS_DASHBOARD_RANGE_FIELD_HINT")}}]);return t}(U);var M,G,W,z,K,x,j,V,q;var Y=function(e){babelHelpers.inherits(t,e);function t(){var e;var n;babelHelpers.classCallCheck(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++){i[r]=arguments[r]}n=babelHelpers.possibleConstructorReturn(this,(e=babelHelpers.getPrototypeOf(t)).call.apply(e,[this].concat(i)));babelHelpers.defineProperty(babelHelpers.assertThisInitialized(n),"refreshKeyLock",false);return n}babelHelpers.createClass(t,[{key:"createTitleNode",value:function e(){return l.Tag.render(M||(M=babelHelpers.taggedTemplateLiteral(["<span></span>"])))}},{key:"layout",value:function e(t){this.ensureWrapperCreated({classNames:["ui-entity-editor-field-text"]});this.adjustWrapper();var n=l.Loc.getMessage("BICONNECTOR_SUPERSET_SETTINGS_COMMON_KEY_FIELD_HINT_LINK",{"#HINT_LINK#":"<link></link>"});var a=l.Tag.render(G||(G=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="biconnector-superset-settings-panel-range__hint">\n\t\t\t\t',"\n\t\t\t</div>\n\t\t"])),n);var i=l.Tag.render(W||(W=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<a class="biconnector-superset-settings-panel-range__hint-link">\n\t\t\t\t',"\n\t\t\t</a>\n\t\t"])),l.Loc.getMessage("BICONNECTOR_SUPERSET_SETTINGS_DASHBOARD_HINT_LINK"));l.Event.bind(i,"click",(function(){top.BX.Helper.show("redirect=detail&code=20337242&anchor=Encryptionkey")}));l.Dom.replace(a.querySelector("link"),i);l.Dom.insertBefore(a,this._container);this._innerWrapper=l.Tag.render(z||(z=babelHelpers.taggedTemplateLiteral(["<div class='ui-entity-editor-content-block ui-ctl-custom biconnector-superset-settings-panel-key-info-container'></div>"])));l.Dom.append(this._innerWrapper,this._wrapper);var r=l.Text.encode(this.getValue());this.keyInput=l.Tag.render(K||(K=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<input type="password" class="ui-ctl-element" readonly value="','">\n\t\t'])),r);this.eyeButton=l.Tag.render(x||(x=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<button class="ui-btn-link ui-btn">\n\t\t\t\t<span class="ui-icon-set --crossed-eye"></span>\n\t\t\t</button>\n\t\t'])));l.Event.bind(this.eyeButton,"click",this.toggleKey.bind(this));var s=l.Tag.render(j||(j=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<button class="ui-btn-link ui-btn">\n\t\t\t\t<span class="ui-icon-set --copy-plates"></span>\n\t\t\t</button>\n\t\t'])));l.Event.bind(s,"click",this.copyText.bind(this));var o=l.Tag.render(V||(V=babelHelpers.taggedTemplateLiteral(['\t\n\t\t\t<div class="ui-ctl ui-ctl__combined-input ui-ctl-w100">\n\t\t\t\t<div class="ui-ctl-icon__set ui-ctl-after">\n\t\t\t\t\t',"\n\t\t\t\t\t","\n\t\t\t\t</div>\n\t\t\t\t","\n\t\t\t</div>\n\t\t"])),this.eyeButton,s,this.keyInput);l.Dom.append(o,this._innerWrapper);this.refreshButton=l.Tag.render(q||(q=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<button class="ui-btn-primary ui-btn icon-set-element">\n\t\t\t\t\t<div class="ui-icon-set --refresh-7"></div>\n\t\t\t\t\t<div class="icon-set-element__class">\n\t\t\t\t\t\t',"\n\t\t\t\t\t</div>\n\t\t\t</button>\n\t\t"])),l.Loc.getMessage("BICONNECTOR_SUPERSET_SETTINGS_COMMON_KEY_FIELD_REFRESH_BUTTON"));l.Event.bind(this.refreshButton,"click",this.refreshKey.bind(this));l.Dom.append(this.refreshButton,this._innerWrapper);this.registerLayout(t);this._hasLayout=true}},{key:"toggleKey",value:function e(t){if(!l.Type.isDomNode(this.keyInput)){return}var n=this.eyeButton.querySelector("span");if(this.keyInput.type==="password"){this.keyInput.type="text";l.Dom.removeClass(n,"--crossed-eye");l.Dom.addClass(n,"--opened-eye")}else{this.keyInput.type="password";l.Dom.removeClass(n,"--opened-eye");l.Dom.addClass(n,"--crossed-eye")}}},{key:"copyText",value:function e(t){if(!l.Type.isDomNode(this.keyInput)){return}BX.clipboard.copy(this.getValue());r.UI.Notification.Center.notify({content:l.Loc.getMessage("BICONNECTOR_SUPERSET_SETTINGS_COMMON_KEY_COPIED"),autoHideDelay:2e3})}},{key:"refreshKey",value:function e(){var t=this;if(this.refreshKeyLock){return}this.refreshKeyLock=true;l.Dom.addClass(this.refreshButton,"ui-btn-disabled");l.ajax.runComponentAction("bitrix:biconnector.apachesuperset.setting","changeBiToken",{mode:"class"}).then((function(e){var n=e.data;if(l.Type.isStringFilled(n)){t.keyInput.value=l.Text.encode(n);r.UI.Notification.Center.notify({content:l.Loc.getMessage("BICONNECTOR_SUPERSET_SETTINGS_KEY_UPDATE_SUCCESS"),autoHideDelay:2e3})}else{r.UI.Notification.Center.notify({content:l.Loc.getMessage("BICONNECTOR_SUPERSET_SETTINGS_KEY_UPDATE_FAILED"),autoHideDelay:2e3})}t.refreshKeyLock=false;l.Dom.removeClass(t.refreshButton,"ui-btn-disabled")}))}}],[{key:"create",value:function e(t,n){var a=new this(t,n);a.initialize(t,n);return a}}]);return t}(BX.UI.EntityEditorCustom);var $,J,Q,Z,ee,te,ne;function ae(e,t,n){ie(e,t);t.set(e,n)}function ie(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}var re=new WeakMap;var le=new WeakMap;var se=function(e){babelHelpers.inherits(t,e);function t(){var e;var n;babelHelpers.classCallCheck(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++){i[r]=arguments[r]}n=babelHelpers.possibleConstructorReturn(this,(e=babelHelpers.getPrototypeOf(t)).call.apply(e,[this].concat(i)));babelHelpers.defineProperty(babelHelpers.assertThisInitialized(n),"refreshKeyLock",false);ae(babelHelpers.assertThisInitialized(n),re,{writable:true,value:void 0});ae(babelHelpers.assertThisInitialized(n),le,{writable:true,value:void 0});return n}babelHelpers.createClass(t,[{key:"initialize",value:function e(n,a){var i=this;babelHelpers.get(babelHelpers.getPrototypeOf(t.prototype),"initialize",this).call(this,n,a);babelHelpers.classPrivateFieldSet(this,re,new Set);babelHelpers.classPrivateFieldSet(this,le,new Set);this._model.getField(this.getName(),[]).forEach((function(e){e=l.Text.toNumber(e);babelHelpers.classPrivateFieldGet(i,re).add(e);babelHelpers.classPrivateFieldGet(i,le).add(e)}))}},{key:"createTitleNode",value:function e(){return l.Tag.render($||($=babelHelpers.taggedTemplateLiteral(["<span></span>"])))}},{key:"layout",value:function e(t){var n=this;this.ensureWrapperCreated({classNames:["ui-entity-editor-field-text"]});this.adjustWrapper();var a=l.Loc.getMessage("BICONNECTOR_SUPERSET_SETTINGS_NEW_DASHBOARD_NOTIFICATION_HINT_LINK",{"#HINT_LINK#":"<link></link>"});var i=l.Tag.render(J||(J=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="biconnector-superset-settings-panel-range__hint">\n\t\t\t\t',"\n\t\t\t</div>\n\t\t"])),a);var r=l.Tag.render(Q||(Q=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<a class="biconnector-superset-settings-panel-range__hint-link">\n\t\t\t\t',"\n\t\t\t</a>\n\t\t"])),l.Loc.getMessage("BICONNECTOR_SUPERSET_SETTINGS_DASHBOARD_HINT_LINK"));l.Event.bind(r,"click",(function(){top.BX.Helper.show("redirect=detail&code=20337242&anchor=UpdateNotification")}));l.Dom.replace(i.querySelector("link"),r);l.Dom.insertBefore(i,this._container);this._innerWrapper=l.Tag.render(Z||(Z=babelHelpers.taggedTemplateLiteral(["<div class='ui-entity-editor-content-block ui-ctl-custom biconnector-superset-settings-panel-key-info-container'></div>"])));l.Dom.append(this._innerWrapper,this._wrapper);var o=l.Tag.render(ee||(ee=babelHelpers.taggedTemplateLiteral(['\t\n\t\t\t<div class="ui-ctl-w100"></div>\n\t\t'])));l.Dom.append(o,this._innerWrapper);var c=[];babelHelpers.classPrivateFieldGet(this,re).forEach((function(e){c.push(["user",e])}));var u=new s.TagSelector({dialogOptions:{context:"biconnector--new-dashboard-notify",entities:[{id:"user",options:{selectMode:"usersOnly"}}],preselectedItems:c},events:{onBeforeTagAdd:function e(t){var a=t.getData(),i=a.tag;babelHelpers.classPrivateFieldGet(n,re).add(i.getId());n.onChange()},onBeforeTagRemove:function e(t){var a=t.getData(),i=a.tag;babelHelpers.classPrivateFieldGet(n,re)["delete"](i.getId());n.onChange()}}});u.renderTo(o);l.Dom.addClass(u.getOuterContainer(),"ui-ctl-element");this.registerLayout(t);this._hasLayout=true}},{key:"onChange",value:function e(){var t=this;if(babelHelpers.classPrivateFieldGet(this,le).size!==babelHelpers.classPrivateFieldGet(this,re).size){this.markAsChanged();return}this._isChanged=false;babelHelpers.classPrivateFieldGet(this,re).forEach((function(e){if(!babelHelpers.classPrivateFieldGet(t,le).has(e)){t.markAsChanged()}}))}},{key:"save",value:function e(){var t=this;var n=[];if(l.Type.isDomNode(this._innerWrapper)){var a=this._innerWrapper.querySelector(".save-block");if(l.Type.isDomNode(a)){l.Dom.remove(a)}var i=l.Tag.render(te||(te=babelHelpers.taggedTemplateLiteral(['<div class="save-block"></div>'])));babelHelpers.classPrivateFieldGet(this,re).forEach((function(e){n.push(e);l.Dom.append(l.Tag.render(ne||(ne=babelHelpers.taggedTemplateLiteral(['<input type="hidden" name="','[]" value="','">'])),t.getName(),e),i)}));l.Dom.append(i,this._innerWrapper)}this._model.setField(this.getName(),n)}}],[{key:"create",value:function e(t,n){var a=new this(t,n);a.initialize(t,n);return a}}]);return t}(BX.UI.EntityEditorCustom);var oe=function(){function e(){var t=this;var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"BX.UI.EntityEditorControlFactory";babelHelpers.classCallCheck(this,e);i.EventEmitter.subscribe(n+":onInitialize",(function(e){var n=e.getCompatData(),a=babelHelpers.slicedToArray(n,2),i=a[1];i.methods["dashboardSettings"]=t.factory.bind(t)}))}babelHelpers.createClass(e,[{key:"factory",value:function e(t,n,a){switch(t){case"timePeriod":return U.create(n,a);case"dashboardTimePeriod":return X.create(n,a);case"keyInfo":return Y.create(n,a);case"userNotificationSelector":return se.create(n,a);default:return null}}}]);return e}();var ce=function(){function e(){babelHelpers.classCallCheck(this,e)}babelHelpers.createClass(e,null,[{key:"registerFieldFactory",value:function e(t){new oe(t)}},{key:"registerControllerFactory",value:function e(t){new B(t)}}]);return e}();e.SettingsPanel=ce})(this.BX.BIConnector.ApacheSuperset=this.BX.BIConnector.ApacheSuperset||{},BX.BIConnector,BX,BX,BX.Event,BX,BX,BX.UI.EntitySelector);
//# sourceMappingURL=script.map.js