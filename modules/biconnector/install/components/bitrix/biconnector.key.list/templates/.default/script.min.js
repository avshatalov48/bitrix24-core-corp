this.BX=this.BX||{};(function(e,t,a,i){"use strict";function n(e,t){l(e,t);t.add(e)}function s(e,t,a){l(e,t);t.set(e,a)}function l(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function o(e,t,a){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return a}function r(e,t,a){c(e,t);return a}function c(e,t){if(e!==t){throw new TypeError("Private static access of wrong provenance")}}var d=new WeakMap;var u=new WeakMap;var h=new WeakMap;var f=new WeakSet;var p=new WeakSet;var b=function(){function e(t){babelHelpers.classCallCheck(this,e);n(this,p);n(this,f);s(this,d,{writable:true,value:void 0});s(this,u,{writable:true,value:void 0});s(this,h,{writable:true,value:void 0});babelHelpers.classPrivateFieldSet(this,d,t)}babelHelpers.createClass(e,[{key:"showOnboarding",value:function e(){var t=this;if(!(a.PopupWindowManager&&a.PopupWindowManager.isAnyPopupShown())){o(this,f,y).call(this).show();o(this,p,C).call(this).start();o(this,f,y).call(this).getTargetContainer().addEventListener("mouseover",(function(){o(t,f,y).call(t).close()}))}}}],[{key:"deleteRow",value:function a(i){var n=BX.Main.gridManager.getInstanceById(e.gridId);n.confirmDialog({CONFIRM:true,CONFIRM_MESSAGE:t.Loc.getMessage("CC_BBKL_ACTION_MENU_DELETE_CONF")},(function(){t.ajax.runComponentAction(e.componentName,"deleteRow",{mode:"class",data:{id:i}}).then((function(){n.removeRow(i)}))}))}},{key:"activateKey",value:function a(i,n){var s=this;t.ajax.runComponentAction(e.componentName,"activateKey",{mode:"class",data:{id:i}}).then((function(t){if(t.data===false){n.check(false,false);r(s,e,v).call(s,false)}}))["catch"]((function(){n.check(false,false);r(s,e,v).call(s,false)}))}},{key:"deactivateKey",value:function a(i,n){var s=this;t.ajax.runComponentAction("bitrix:biconnector.key.list","deactivateKey",{mode:"class",data:{id:i}}).then((function(t){if(t.data===false){n.check(true,false);r(s,e,v).call(s)}}))["catch"]((function(){n.check(true,false);r(s,e,v).call(s)}))}},{key:"copyKey",value:function e(a){var i=a.querySelector("[data-key-id]");var n=document.createElement("textarea");n.value=i.value;n.setAttribute("readonly","");n.style.position="absolute";n.style.left="-9999px";document.body.appendChild(n);n.select();try{document.execCommand("copy");BX.UI.Notification.Center.notify({content:t.Loc.getMessage("CC_BBKL_KEY_COPIED"),autoHideDelay:2e3})}catch(e){BX.UI.Notification.Center.notify({content:t.Loc.getMessage("CC_BBKL_KEY_COPY_ERROR"),autoHideDelay:2e3})}n.remove();return false}}]);return e}();function v(){BX.UI.Notification.Center.notify({content:t.Loc.getMessage("CC_BBKL_ACTIVATE_KEY_ERROR"),autoHideDelay:2e3})}function y(){if(babelHelpers.classPrivateFieldGet(this,u)){return babelHelpers.classPrivateFieldGet(this,u)}babelHelpers.classPrivateFieldSet(this,u,new BX.SpotLight({targetElement:babelHelpers.classPrivateFieldGet(this,d).bindElement,targetVertex:"middle-center",id:b.gridId,lightMode:true}));return babelHelpers.classPrivateFieldGet(this,u)}function C(){var e=this;if(babelHelpers.classPrivateFieldGet(this,h)){return babelHelpers.classPrivateFieldGet(this,h)}babelHelpers.classPrivateFieldSet(this,h,new i.Guide({simpleMode:true,onEvents:true,overlay:false,steps:[{target:babelHelpers.classPrivateFieldGet(this,d).bindElement,title:t.Loc.getMessage("CC_BBKL_KEY_ONBOARDING_TITLE"),text:t.Loc.getMessage("CC_BBKL_KEY_ONBOARDING_DESCRIPTION"),buttons:null,events:{onClose:function t(){o(e,f,y).call(e).close()},onShow:function e(){t.ajax.runComponentAction(b.componentName,"markShowOnboarding",{mode:"class"})}},article:babelHelpers.classPrivateFieldGet(this,d).article}],autoHide:true}));babelHelpers.classPrivateFieldGet(this,h).getPopup().setWidth(360);babelHelpers.classPrivateFieldGet(this,h).getPopup().setAngle({offset:babelHelpers.classPrivateFieldGet(this,d).bindElement.offsetWidth/2});babelHelpers.classPrivateFieldGet(this,h).getPopup().setAutoHide(true);return babelHelpers.classPrivateFieldGet(this,h)}babelHelpers.defineProperty(b,"gridId","biconnector_key_list");babelHelpers.defineProperty(b,"componentName","bitrix:biconnector.key.list");e.KeysGrid=b})(this.BX.BIConnector=this.BX.BIConnector||{},BX,BX.Main,BX.UI.Tour);
//# sourceMappingURL=script.map.js