jn.define("bizproc/workflow/list/item",((t,e,s)=>{const{Loc:o}=t("loc");const{Base:i}=t("layout/ui/simple-list/items/base");const{WorkflowFaces:n}=t("bizproc/workflow/faces");const{TaskButtons:r}=t("bizproc/task/buttons");const a=t("apptheme");const{mergeImmutable:l}=t("utils/object");class d extends i{constructor(t){super(t);this.styles=l(this.styles,c)}renderItemContent(){return View({style:this.styles.itemContent},this.renderHeader(),this.renderMenuIcon(),this.renderCounters(),this.renderBody())}renderMenuIcon(){return View({style:this.styles.menuContainer},ImageButton({testId:`${this.testId}_CONTEXT_MENU_BTN`,style:this.styles.menu,svg:{content:h.disabledMenu},onClick:()=>this.showMenuNotify()}))}renderCounters(){const{data:t}=this.props.item;if(t.tasks.length===0){return null}return Text({style:this.styles.tasksCounter,text:String(t.tasks.length)})}renderHeader(){const{data:t}=this.props.item;return View({testId:`${this.testId}_TYPE`,style:this.styles.header},Text({testId:`${this.testId}_TYPE_NAME`,style:this.styles.title,text:(t.typeName||"").toLocaleUpperCase(env.languageId),numberOfLines:1,ellipsize:"end"}))}renderBody(){const{data:t}=this.props.item;const e=t.tasks.length>0;return View({},this.renderItemName(),this.renderWorkflowFaces(t.id,t.faces),!e&&this.renderStatus(),e&&this.renderTaskButtons())}renderItemName(){const{data:t}=this.props.item;const e=t.tasks[0];return View({onClick:()=>{if(!e){InAppNotifier.showNotification({backgroundColor:a.colors.baseBlackFixed,message:o.getMessage("BPMOBILE_WORKFLOW_LIST_TASK_DETAIL_DEVELOPING"),code:"bp-workflow-item-detail-developing",time:3});return}void requireLazy("bizproc:task/details").then((({TaskDetails:s})=>{void s.open(this.props.layout,{taskId:e.id,title:t.typeName})}))}},Text({testId:`${this.testId}_ITEM_NAME`,text:t.itemName,style:this.styles.itemName,numberOfLines:2}))}renderWorkflowFaces(t,e){return View({style:this.styles.workflowFaces,onClick:()=>{void requireLazy("bizproc:workflow/timeline").then((({WorkflowTimeline:e})=>{void e.open(this.props.layout,{workflowId:t,taskId:this.props.item.data.tasks.at(0)?.id})}))}},new n({layout:this.props.layout,workflowId:t,faces:e}))}renderStatus(){const{data:t}=this.props.item;return View({style:this.styles.statusWrap},Text({text:o.getMessage("BPMOBILE_WORKFLOW_LIST_STATUS"),style:this.styles.statusTitle}),Text({testId:`${this.testId}_STATUS_TEXT`,text:t.statusText,style:this.styles.statusText,numberOfLines:1,ellipsize:"end"}))}renderTaskButtons(){const{data:t}=this.props.item;const e=t.tasks[0];return View({style:this.styles.taskButtons},new r({task:{...e,workflowId:t.id},isInline:true,title:t.typeName}))}showMenuNotify(){InAppNotifier.showNotification({backgroundColor:a.colors.baseBlackFixed,message:o.getMessage("BPMOBILE_WORKFLOW_LIST_ITEM_MENU_EMPTY"),code:"bp-workflow-item-menu",time:3})}}const h={menu:{content:'<svg width="21" height="5" viewBox="0 0 21 5" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4.83871 2.41935C4.83871 3.75553 3.75553 4.83871 2.41935 4.83871C1.08318 4.83871 0 3.75553 0 2.41935C0 1.08318 1.08318 0 2.41935 0C3.75553 0 4.83871 1.08318 4.83871 2.41935Z" fill="%color%"/><path d="M10.1613 4.83871C11.4975 4.83871 12.5806 3.75553 12.5806 2.41935C12.5806 1.08318 11.4975 0 10.1613 0C8.82512 0 7.74194 1.08318 7.74194 2.41935C7.74194 3.75553 8.82512 4.83871 10.1613 4.83871Z" fill="%color%"/><path d="M17.9032 4.83871C19.2394 4.83871 20.3226 3.75553 20.3226 2.41935C20.3226 1.08318 19.2394 0 17.9032 0C16.5671 0 15.4839 1.08318 15.4839 2.41935C15.4839 3.75553 16.5671 4.83871 17.9032 4.83871Z" fill="%color%"/></svg>'},disabledMenu:(()=>{const t=a.colors.base8;const e=a.colors.base7;return`\n\t\t\t\t<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">\n\t\t\t\t\t<rect x="2.3" y="2.3" width="19.4" height="19.4" rx="1.2" fill="${t}" stroke="${e}" stroke-width="1.6"/>\n\t\t\t\t</svg>\n\t\t\t`})()};const c={wrapper:{backgroundColor:a.colors.bgSecondary,paddingTop:12},item:{position:"relative",backgroundColor:a.colors.base8,borderRadius:12,paddingHorizontal:24},itemContent:{},header:{flexDirection:"column"},title:{color:a.colors.base4,fontWeight:"500",fontSize:12,height:19,marginRight:40},itemName:{marginTop:4,fontWeight:"500",fontSize:16,color:a.colors.base1,marginRight:40,marginBottom:12,lineHeightMultiple:1.1},workflowFaces:{marginVertical:8},menu:{width:24,height:24},menuContainer:{position:"absolute",top:17,right:0,width:24,height:24,justifyContent:"center",alignItems:"center"},tasksCounter:{position:"absolute",top:60,right:2,width:20,height:20,borderRadius:9,backgroundColor:a.colors.accentMainAlert,textAlign:"center",color:a.colors.baseWhiteFixed,fontSize:12,fontWeight:"500"},taskButtons:{paddingTop:7,paddingBottom:8},statusWrap:{paddingTop:12},statusTitle:{fontSize:11,height:14,fontWeight:"400",color:a.colors.base4},statusText:{fontSize:14,height:17,fontWeight:"400",color:a.colors.base1,marginBottom:8}};s.exports={WorkflowItem:d}}));
//# sourceMappingURL=item.map.js