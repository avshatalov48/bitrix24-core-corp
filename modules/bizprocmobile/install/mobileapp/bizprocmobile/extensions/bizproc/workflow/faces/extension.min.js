jn.define("bizproc/workflow/faces",((e,t,s)=>{const{Loc:n}=e("loc");const{PureComponent:r}=e("layout/pure-component");const o=e("apptheme");const{Type:i}=e("type");const{formatRoundedTime:a,roundTimeInSeconds:l}=e("bizproc/helper/duration");const{WorkflowFacesColumn:c}=e("bizproc/workflow/faces/column-view");const{WorkflowFacesTimeline:d}=e("bizproc/workflow/faces/timeline");class h extends r{get faces(){return this.props.faces}get needRenderMoreTasksIcon(){return this.faces.completedTaskCount>=3||!this.faces.workflowIsCompleted&&this.faces.completedTaskCount>=2}getDurations(){return{author:i.isNil(this.faces.time?.author)?0:this.faces.time.author,completed:i.isNil(this.faces.time?.completed)?0:this.faces.time.completed,running:i.isNil(this.faces.time?.running)?0:this.faces.time.running,done:i.isNil(this.faces.time?.done)?0:this.faces.time.done}}render(){return View({style:m.wrapper},View({style:m.facesWrapper},this.renderStick(),this.renderFirstColumn(),this.renderMoreTasksIcon(),this.renderSecondColumn(),this.needRenderMoreTasksIcon&&View({style:{width:1}}),this.renderThirdColumn()),new d({isCompleted:this.faces.workflowIsCompleted,durations:this.getDurations()}))}renderFirstColumn(){return new c({label:n.getMessage("BPMOBILE_WORKFLOW_FACES_AUTHOR"),avatars:[this.faces.author],time:this.getFormattedTime(this.getDurations().author),columnStyles:{marginLeft:9,minWidth:42,flexShrink:2}})}renderSecondColumn(){if(this.faces.completed.length===0){return this.faces.workflowIsCompleted?this.renderDoneColumn():this.renderRunningColumn()}return new c({label:n.getMessage("BPMOBILE_WORKFLOW_FACES_COMPLETED_MSGVER_1"),avatars:this.faces.completed,status:this.faces.completedSuccess?"accept":"decline",time:this.getFormattedTime(this.getDurations().completed)})}renderThirdColumn(){if(this.faces.completed.length===0){return new c({testId:`${this.testId}_EMPTY_BLOCK`,columnStyles:{minWidth:42}})}return this.faces.workflowIsCompleted?this.renderDoneColumn():this.renderRunningColumn()}renderRunningColumn(){return new c({label:n.getMessage("BPMOBILE_WORKFLOW_FACES_RUNNING_1"),status:"progress",avatars:i.isArrayFilled(this.faces.running)?this.faces.running:null,time:this.getFormattedTime(this.getDurations().running)})}renderDoneColumn(){return new c({label:n.getMessage("BPMOBILE_WORKFLOW_FACES_COMPLETED_DONE_MSGVER_1"),avatars:i.isArrayFilled(this.faces.done)?this.faces.done:null,status:i.isArrayFilled(this.faces.done)?this.faces.doneSuccess?"accept":"decline":"accept",time:this.getFormattedTime(this.getDurations().done)})}renderMoreTasksIcon(){if(!this.needRenderMoreTasksIcon){return null}return View({style:{alignSelf:"center"}},Image({style:{width:16,height:16},svg:{content:u}}))}getFormattedTime(e){return e===0?n.getMessage("BPMOBILE_WORKFLOW_FACES_EMPTY_TIME"):a(l(Number(e)))}renderStick(){return View({style:m.facesStick})}}const m={wrapper:{flexDirection:"row",alignItems:"stretch",marginTop:10,maxWidth:440,height:100},facesWrapper:{flex:1,flexDirection:"row",alignItems:"flex-start",justifyContent:"space-between",paddingTop:12.5,paddingBottom:11.5,paddingRight:10,paddingLeft:4.5,borderTopLeftRadius:6,borderBottomLeftRadius:6,borderLeftWidth:1,borderLeftColor:o.colors.base7,borderTopWidth:1,borderTopColor:o.colors.base7,borderBottomWidth:1,borderBottomColor:o.colors.base7},facesStick:{height:1,position:"absolute",top:50,left:35,right:35,backgroundColor:o.colors.base6}};const u=`\n\t\t<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">\n\t\t\t<rect y="2" width="16" height="12" rx="6" fill="${o.colors.base7}"/>\n\t\t\t<path\n\t\t\t\td="M6.60827 7.86957C6.60827 8.34981 6.21895 8.73913 5.73871 8.73913C5.25846 8.73913 4.86914 8.34981 4.86914 7.86957C4.86914 7.38932 5.25846 7 5.73871 7C6.21895 7 6.60827 7.38932 6.60827 7.86957Z"\n\t\t\t\tfill="${o.colors.base3}"\n\t\t\t/>\n\t\t\t<path\n\t\t\t\td="M9.04305 7.86957C9.04305 8.34981 8.65374 8.73913 8.17349 8.73913C7.69324 8.73913 7.30392 8.34981 7.30392 7.86957C7.30392 7.38932 7.69324 7 8.17349 7C8.65374 7 9.04305 7.38932 9.04305 7.86957Z"\n\t\t\t\tfill="${o.colors.base3}"\n\t\t\t/>\n\t\t\t<path\n\t\t\t\td="M11.4778 7.86957C11.4778 8.34981 11.0885 8.73913 10.6083 8.73913C10.128 8.73913 9.73871 8.34981 9.73871 7.86957C9.73871 7.38932 10.128 7 10.6083 7C11.0885 7 11.4778 7.38932 11.4778 7.86957Z"\n\t\t\t\tfill="${o.colors.base3}"\n\t\t\t/>\n\t\t</svg>\n\t`;s.exports={WorkflowFaces:h}}));
//# sourceMappingURL=extension.map.js