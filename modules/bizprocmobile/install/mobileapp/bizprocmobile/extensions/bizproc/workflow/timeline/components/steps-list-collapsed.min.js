jn.define("bizproc/workflow/timeline/components/steps-list-collapsed",((t,e,s)=>{const o=t("apptheme");const{animate:i,parallel:n}=t("animation");const{Counter:l}=t("bizproc/workflow/timeline/components/counter");const{StepContent:p}=t("bizproc/workflow/timeline/components/step-content");const{StepWrapper:r}=t("bizproc/workflow/timeline/components/step-wrapper");const{dots:a}=t("bizproc/workflow/timeline/icons");const{PureComponent:h}=t("layout/pure-component");const{Type:d}=t("type");const c={COLLAPSED:"collapsed",EXPANDING:"expanding",EXPANDED:"expanded"};const u=500;class S extends h{constructor(t){super(t);this.state={stepsState:c.COLLAPSED};this.stepsHeight=null;this.stepsRef=null;this.collapsedStepRef=null;this.collapsedButtonRef=null;this.collapsedButtonAnimation=null}get text(){return d.isStringFilled(this.props.text)?this.props.text:null}get textColor(){return d.isStringFilled(this.props.textColor)?this.props.textColor:o.colors.base2}get steps(){return d.isArray(this.props.steps)?this.props.steps:[]}get counterOptions(){return d.isObjectLike(this.props.counterOptions)?this.props.counterOptions:{}}render(){return View({},View({style:{flexDirection:"row"}},this.renderItems()),this.renderCollapsed())}renderCollapsed(){return View({ref:t=>{this.collapsedStepRef=t},style:{display:this.isExpanded()?"none":"flex"}},r({},l({border:{width:1,style:"solid",color:o.colors.base4},iconContent:a(),trunkColor:o.colors.base4,tailColor:o.colors.base7,backgroundColor:o.colors.bgContentPrimary,...this.counterOptions}),p({},this.renderCollapsedButton())))}renderCollapsedButton(){return View({testId:this.props.collapsedButtonTestId,style:{minWidth:139,height:22,alignSelf:"flex-start",justifyContent:"center",position:"relative",borderStyle:"solid",borderColor:o.colors.base5,borderWidth:1,borderRadius:4,paddingHorizontal:33},onTouchesBegan:()=>{if(this.collapsedButtonAnimation){this.collapsedButtonAnimation.stop();this.collapsedButtonAnimation=null}if(this.collapsedButtonRef){this.collapsedButtonAnimation=this.collapsedButtonRef.animate({duration:100,opacity:.05},(()=>{this.collapsedButtonAnimation=null}))}},onTouchesEnded:()=>{if(this.collapsedButtonAnimation){this.collapsedButtonAnimation.stop();this.collapsedButtonAnimation=null}if(this.collapsedButtonRef){this.collapsedButtonAnimation=this.collapsedButtonRef.animate({delay:100,opacity:0,duration:100},(()=>{this.collapsedButtonAnimation=null}))}},onClick:()=>this.toggleStepsState()},View({ref:t=>{this.collapsedButtonRef=t},style:{position:"absolute",left:0,right:0,top:0,bottom:0,backgroundColor:o.colors.base1,opacity:0}}),d.isStringFilled(this.text)&&Text({text:this.text,numberOfLines:1,ellipsize:"end",style:{color:o.colors.base2,textAlign:"center",fontSize:13,fontWeight:"500"}}))}renderItems(){return View({ref:t=>{this.stepsRef=t},onLayout:({height:t})=>{if(t>0){this.stepsHeight=t}},style:{position:this.isCollapsed()?"absolute":"relative",height:this.isExpanding()?0:null,width:"100%"}},...this.steps)}toggleStepsState(){if(this.isCollapsed()){const t=()=>{if(this.props.onStepsExpanding&&d.isFunction(this.props.onStepsExpanding)){this.props.onStepsExpanding()}};const e=()=>{this.setState({stepsState:c.EXPANDED});if(this.props.onStepsExpanded&&d.isFunction(this.props.onStepsExpanded)){this.props.onStepsExpanded()}};this.setState({stepsState:c.EXPANDING},(()=>{const s=n(this.showSteps.bind(this),this.hideCollapsedStep.bind(this));t();s().then(e).catch((t=>{console.error(t);e()}))}))}else{this.setState({stepsState:c.COLLAPSED})}}isExpanded(){return this.state.stepsState===c.EXPANDED}isExpanding(){return this.state.stepsState===c.EXPANDING}isCollapsed(){return this.state.stepsState===c.COLLAPSED}async showSteps(){await i(this.stepsRef,{duration:d.isNumber(this.stepsHeight)?Math.max(this.stepsHeight,u):u,height:d.isNumber(this.stepsHeight)?this.stepsHeight:device.screen.height,option:"linear"})}async hideCollapsedStep(){await i(this.collapsedStepRef,{duration:u,opacity:0,height:0,option:"linear"})}}s.exports={StepsListCollapsed:t=>new S(t)}}));
//# sourceMappingURL=steps-list-collapsed.map.js