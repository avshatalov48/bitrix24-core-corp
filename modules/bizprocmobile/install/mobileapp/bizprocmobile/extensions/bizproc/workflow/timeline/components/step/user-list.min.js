jn.define("bizproc/workflow/timeline/components/step/user-list",((e,t,s)=>{const{animate:r,parallel:i}=e("animation");const o=e("apptheme");const{check:n,cross:l}=e("bizproc/workflow/timeline/icons");const{PureComponent:a}=e("layout/pure-component");const{SafeImage:u}=e("layout/ui/safe-image");const{ReduxAvatar:c}=e("layout/ui/user/avatar");const{Type:h}=e("type");const{ProfileView:d}=e("user/profile");const p={HIDDEN:"hidden",SHOWN:"shown"};class f extends a{constructor(e){super(e);this.shouldShowUserStatus=this.getUsers().length>1;this.usersContainerRef=null;this.usersRef=null;this.state={usersState:this.props.shouldHideUsers===true?p.HIDDEN:p.SHOWN}}getUsers(){const e=h.isArray(this.props.users)?this.props.users:[];return e.filter((e=>h.isObjectLike(e)&&e.id))}get usersHeight(){return this.getUsers().length*46}render(){return View({testId:this.props.testId,ref:e=>{this.usersContainerRef=e},style:{position:"relative",height:this.isUsersHidden()?this.usersHeight:null,opacity:this.isUsersHidden()?0:null,paddingBottom:2}},View({ref:e=>{this.usersRef=e},style:{position:this.isUsersHidden()?"absolute":"relative",top:this.isUsersHidden()?-this.usersHeight:null,left:0,right:0}},...this.getUsers().map((e=>this.renderUser(e)))))}renderUser(e){return View({style:{flexDirection:"row",alignItems:"center",paddingBottom:6},onClick:()=>this.openUserProfile(e.id)},c({id:e.id}),View({style:{flex:1,flexDirection:"column",marginHorizontal:6}},View({style:{flexDirection:"row",alignItems:"center"}},Text({testId:e.testId,style:{textAlign:"center",fontSize:15,fontWeight:"400",color:o.colors.accentMainLinks},numberOfLines:1,text:e.fullName}),this.shouldShowUserStatus&&e.status&&this.renderStatus(e)),e.workPosition&&Text({style:{fontSize:13,fontWeight:"400",color:o.colors.base4},numberOfLines:1,ellipsize:"end",text:e.workPosition})))}renderStatus(e){const t=e.status===1||e.status===3;const s=e.status===2||e.status===4;if(!t&&!s){return null}const r=t?n({color:o.colors.accentMainSuccess}):l({color:o.colors.base4});return View({style:{marginLeft:8,borderRadius:4,borderStyle:"solid",borderWidth:1,borderColor:t?o.colors.accentMainSuccess:o.colors.base4}},u({style:{width:16,height:16},resizeMode:"contain",placeholder:{content:r}}))}openUserProfile(e){this.props.layout.openWidget("list",{groupStyle:true,backdrop:{bounceEnable:false,swipeAllowed:true,showOnTop:true,hideNavigationBar:false,horizontalSwipeAllowed:false}}).then((t=>d.open({userId:e,isBackdrop:true},t))).catch((e=>console.error(e)))}showUsers(){if(this.isUsersShown()){return}const e=this.getUsers().length;const t=i((()=>r(this.usersContainerRef,{duration:e*250,height:e*46,opacity:1})),(()=>r(this.usersRef,{duration:e*250,top:0})));t().then((()=>this.setState({usersState:p.SHOWN}))).catch((e=>{console.error(e);this.setState({usersState:p.SHOWN})}))}isUsersHidden(){return this.state.usersState===p.HIDDEN}isUsersShown(){return this.state.usersState===p.SHOWN}}s.exports={UserList:e=>new f(e)}}));
//# sourceMappingURL=user-list.map.js