jn.define("bizproc/task/tasks-performer/rules/rules-chain",((t,e,s)=>{const n=t("apptheme");const{Alert:o}=t("alert");const{Loc:i}=t("loc");const{clone:a}=t("utils/object");const{Type:r}=t("type");const{PureComponent:l}=t("layout/pure-component");const{InlineDelegateRule:h}=t("bizproc/task/tasks-performer/rules/inline-delegate-rule");const{InlineTaskRule:u}=t("bizproc/task/tasks-performer/rules/inline-task-rule");const{SequentialTaskRule:c}=t("bizproc/task/tasks-performer/rules/sequential-task-rule");class p extends l{constructor(t){super(t);this.state={width:null}}get tasks(){return this.props.tasks?a(this.props.tasks):[]}get notifier(){return this.props.notifier}get layout(){return this.props.layout||layout||{}}render(){return View({style:{height:42},onLayout:t=>{if(this.state.width===null){this.setState({width:t.width})}}},this.state.width&&this.renderButtons())}renderButtons(){const t=this.state.width;const e={layout:this.layout,tasks:this.tasks,onTasksCancel:this.onTasksCancel.bind(this),onTasksCompleted:this.onTasksCompleted.bind(this),onTasksDelegated:this.onTasksDelegated.bind(this),onTaskNotFoundError:this.onTaskNotFoundError.bind(this),onFinishRule:this.onFinishRule.bind(this),generateExitButton:this.#t};const s=u.isApplicable(this.tasks)?new u(e):new c(e);const n=BX.prop.getBoolean(this.props,"useInlineDelegation",true);const o=s.calculateEntryPointButtons()===1;const i=18;const a=6;const r=n?a+8*2+28+i:0;return View({style:{flexDirection:"row"}},View({style:{maxWidth:o&&n?t*.5:t-r,paddingLeft:i,paddingRight:n?a:i}},s.renderEntryPoint()),n&&View({style:{maxWidth:o?t*.5:r,paddingLeft:a,paddingRight:i}},new h({...e,compactView:!o}).renderEntryPoint()))}onTaskNotFoundError(t){this.notifier.decreaseAmountTasks(t.length)}onTasksCancel(t){this.notifier.decreaseAmountTasks(t.length).showTasksCanceledToast(t.length)}onTasksCompleted(t){this.notifier.increaseCompletedTasks(t.length).showTasksCompletedToast(t.length)}onTasksDelegated(t){this.notifier.increaseCompletedTasks(t.length).showTasksDelegatedToast(t.length)}onFinishRule(t,e,s){if(s){this.notifier.showEarlyFinishToast()}if(r.isFunction(this.props.onFinishRule)){this.props.onFinishRule(t,e)}}#t(t){return{type:"text",color:n.colors.accentMainLinks,name:i.getMessage("MBP_TASK_TASKS_PERFORMER_RULES_FINISH_RULES_BUTTON_EXIT"),callback:()=>{o.confirm(i.getMessage("MBP_TASK_TASKS_PERFORMER_RULES_FINISH_RULES_CONFIRM_TEXT"),i.getMessage("MBP_TASK_TASKS_PERFORMER_RULES_FINISH_RULES_CONFIRM_DESCRIPTION"),[{text:i.getMessage("MBP_TASK_TASKS_PERFORMER_RULES_FINISH_RULES_BUTTON_YES"),type:"default",onPress:t},{text:i.getMessage("MBP_TASK_TASKS_PERFORMER_RULES_FINISH_RULES_BUTTON_NO"),type:"default",onPress:()=>{}}])}}}}s.exports={RulesChain:p}}));
//# sourceMappingURL=rules-chain.map.js