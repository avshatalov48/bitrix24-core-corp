(function(e){if(BX.Scale.Provider)return;BX.Scale.Provider={dialogChooseWindow:null,dialogConfigsWindow:null,getList:function(){if(this.dialogChooseWindow!==null){if(this.dialogChooseWindow==="manual")BX.Scale.Provider.startManual();else this.dialogChooseWindow.Show();return}var e={operation:"get_providers_list"};var o={onsuccess:function(e){if(e&&e["RESULT"]=="OK"&&e["PROVIDERS_LIST"]){var o=0;for(var i in e["PROVIDERS_LIST"])o++;if(o>0)BX.Scale.Provider.showChooseWindow(e["PROVIDERS_LIST"]);else{BX.Scale.Provider.dialogChooseWindow="manual";BX.Scale.Provider.startManual()}}else{BX.Scale.AdminFrame.alert(BX.message("SCALE_PANEL_JS_PROVIDER_LIST_ERROR"),BX.message("SCALE_PANEL_JS_PROVIDER_ERROR"))}},onfailure:function(e,o){BX.debug({type:e,error:o})}};BX.Scale.Communicator.sendRequest(e,o,this,false);return true},startManual:function(){BX.Scale.actionsCollection.getObject("NEW_SERVER_CHAIN").start("",{HOSTNAME:BX.Scale.AdminFrame.getNewServerName()})},showChooseWindow:function(e){var o="<table><tr><td>"+BX.message("SCALE_PANEL_JS_PROVIDER")+":</td><td>"+'<select id="provider_choose_select" name="provider_choose_select">';o+='<option value="manual">'+BX.message("SCALE_PANEL_JS_PROVIDER_MANUAL")+"</option>";for(var i in e)o+='<option value="'+i+'">'+i+"</option>";o+="</select></td></tr></table>";this.dialogChooseWindow=new BX.CDialog({title:BX.message("SCALE_PANEL_JS_PROVIDER_CHOOSE"),content:o,resizable:false,height:300,width:500,buttons:[{title:BX.message("SCALE_PANEL_JS_PROVIDER_BUT_CHOOSE"),id:"admin_frame_choose_button",name:"admin_frame_choose_button",className:"adm-btn-save",action:function(){var e=BX("provider_choose_select").value;this.parentWindow.Close();if(e=="manual")BX.Scale.Provider.startManual();else BX.Scale.Provider.getConfigs(e)}},BX.CAdminDialog.btnCancel]});this.dialogChooseWindow.adjustSizeEx();this.dialogChooseWindow.Show();return true},getConfigs:function(e){var o={operation:"get_provider_configs",providerId:e};var i={onsuccess:function(o){if(o&&o["RESULT"]=="OK"&&o["PROVIDER_CONFIGS"]){BX.Scale.Provider.showConfigsWindow(e,o["PROVIDER_CONFIGS"])}else{BX.Scale.AdminFrame.alert(BX.message("SCALE_PANEL_JS_PROVIDER_CONFIGS_ERROR"),BX.message("SCALE_PANEL_JS_PROVIDER_ERROR"))}},onfailure:function(e,o){BX.debug({type:e,error:o})}};BX.Scale.Communicator.sendRequest(o,i,this,false);return true},showConfigsWindow:function(e,o){var i=0,a="",n=[];a='<form id="provider_configs_form"><table class="bx-adm-scale-provider-config-table">';for(var t in o){var r=e+"_config_"+t;a+='<tr><td><input type="radio" name="provider_configs" id="'+r+'" value="'+o[t].id+'" onclick="BX(\'provider_config_choose_but\').disabled=false;"></td>'+'<td><label for="'+r+'">'+o[t].descr+"</label></td></tr>";i++}if(i>0){a+="</tr></table></form>";n.push({title:BX.message("SCALE_PANEL_JS_PROVIDER_BUT_CHOOSE"),id:"provider_config_choose_but",name:"provider_config_choose_but",className:"adm-btn-save",action:function(){var o=BX("provider_configs_form"),i="";for(var a=o.elements.length-1;a>=0;a--){if(o.elements[a].checked){i=o.elements[a].value;break}}BX.Scale.Provider.sendOrder(e,i);this.parentWindow.Close()}})}else{a=BX.message("SCALE_PANEL_JS_PROVIDER_NO_CONFIGS")}n.push(BX.CAdminDialog.btnCancel);if(this.dialogConfigsWindow==null){this.dialogConfigsWindow=new BX.CDialog({title:BX.message("SCALE_PANEL_JS_PROVIDER_CONFIG_CHOOSE"),content:a,resizable:false,height:400,width:600,buttons:n})}else{this.dialogConfigsWindow.SetContent(a)}BX("provider_config_choose_but").disabled=true;this.dialogConfigsWindow.adjustSizeEx();this.dialogConfigsWindow.Show();return true},sendOrder:function(e,o){var i={operation:"send_order_to_provider",providerId:e,configId:o};var a={onsuccess:function(o){if(o&&o["RESULT"]=="OK"&&o["TASK_ID"]){var i=BX.message("SCALE_PANEL_JS_PROVIDER_ORDER_SUCCESS").replace("##ORDER_ID##",o["TASK_ID"]);i=i.replace("##PROVIDER_ID##",e);BX.Scale.AdminFrame.alert(i,BX.message("SCALE_PANEL_JS_PROVIDER_ORDER_SUCCESS_TITLE"))}else{BX.Scale.AdminFrame.alert(BX.message("SCALE_PANEL_JS_PROVIDER_ORDER_ERROR"),BX.message("SCALE_PANEL_JS_PROVIDER_ERROR"))}},onfailure:function(e,o){BX.debug({type:e,error:o})}};BX.Scale.Communicator.sendRequest(i,a,this,false);return true}}})(window);
//# sourceMappingURL=provider.map.js