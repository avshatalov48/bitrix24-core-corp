window.saveTimer=null;if(!window.listItemParams){window.listItemParams={isItem:{property:"BXLISTITEM"},getData:function(){if(!this.BXLISTCOUNER)this.BXLISTCOUNER=BX.findChild(this,{className:"meet-ag-block-title-num"},true);return{counter:this.BXLISTCOUNER,children:this.nextSibling}},getCounterValue:function(e,t){if(t){t=t.substring(0,t.length-6);if(t&&t.charAt(t.length-1)!="."){t+="."}}return(t||"")+e+(t?"":".")+"&nbsp;"}}}function getUserUrl(e){return window.bx_user_url_tpl.replace(/#user_id#|#id#/i,e)}function BXOnMembersListChange(){window.arMembersList=arguments[0];if(!window.meeting_owner_data)window.meeting_owner_data=window.arMembersList[window.meeting_owner];else if(!window.arMembersList[window.meeting_owner])window.arMembersList[window.meeting_owner]=window.meeting_owner_data;BX.onCustomEvent("onMeetingChangeUsersList",[]);BX.onCustomEvent("onMembersListChange",[BX.util.array_values(window.arMembersList)])}function BXSelectMembers(e){if(!window.BXMembersSelector){window.BXMembersSelector=BX.PopupWindowManager.create("members-popup",e,{offsetTop:1,autoHide:true,content:BX("USERS_selector_content")})}if(window.BXMembersSelector.popupContainer.style.display!="block"){window.BXMembersSelector.show()}}function BXSelectKeepers(e){var t=BX.util.array_values(window.arMembersList);UpdateKeepersList(t);if(!window.BXKeeperSelector){window.BXKeeperSelector=BX.PopupWindowManager.create("keepers-popup",e,{offsetTop:1,autoHide:true,content:BX("keeper_selector_content")})}if(window.BXKeeperSelector.popupContainer.style.display!="block"&&t.length>1){window.BXKeeperSelector.show()}}function meetingAction(e,t){var i={r:Math.random(),MEETING_ID:e};if(t&&t.state)i.STATE=t.state;i.sessid=BX.bitrix_sessid();BX.ajax.loadJSON("/bitrix/tools/ajax_meeting.php",i,meetingHandler)}function meetingHandler(e){switch(e.state){case"A":switchView("protocol");case"C":BX("switcher").style.display="block";break;case"P":BX("switcher").style.display="none";switchView("agenda");break}BX("meeting_state_text").innerHTML=BX.message("MEETING_STATE_"+e.state);BX("meeting_toolbar").className="meeting-toolbar toolbar-"+e.state}function switchView(e){window.current_view=e;if(e=="agenda"){BX.addClass(BX("switch_agenda",true),"meeting-tab-active");BX.removeClass(BX("switch_protocol",true),"meeting-tab-active");BX.removeClass(BX("agenda_block"),"meeting-detail-agenda-protocol-active")}else{BX.removeClass(BX("switch_agenda",true),"meeting-tab-active");BX.addClass(BX("switch_protocol",true),"meeting-tab-active");BX.addClass(BX("agenda_block"),"meeting-detail-agenda-protocol-active")}updateIndexes();if(jsDD)jsDD.refreshDestArea()}var updTimer=null;function updateIndexes(){if(updTimer)clearTimeout(updTimer);updTimer=setTimeout("updateListNumbers()",30)}function updateListNumbers(){BX.listNumber(window.listItemParams)}function saveData(){setTimeout((()=>{if(window.BXMEETINGCANEDIT){const e=document.forms.meeting_edit;if(e.MEETING_ID.value>0){e.save_type.value="BGSAVE";BX.ajax.submit(e);setTimeout((function(){e.save_type.value="SUBMIT"}),30)}}}),100)}function replaceKeys(e,t){var i,n,a,s,o=["AGENDA","AGENDA_PARENT","AGENDA_ORIGINAL","AGENDA_TYPE","AGENDA_TITLE","AGENDA_TASK","AGENDA_DEADLINE","AGENDA_SORT","AGENDA_ITEM"];var r=false;
/*@cc_on
		 @if (@_jscript_version <= 5.7)
			ie7 = true;
		/*@end
	@*/for(i in e){if(!e[i])continue;if(document.forms.meeting_edit["AGENDA["+i+"]"]){a=BX("agenda_item_"+i);if(a){a.BXINSTANCEKEY=a.BXINSTANCE.ID=e[i][0];a.BXINSTANCE.ITEM_ID=e[i][1];a.id="agenda_item_"+e[i][0];a.nextSibling.id="agenda_blocks_"+e[i][0];BX("agenda_item_comments_"+i).id="agenda_item_comments_"+e[i][0];document.forms.meeting_edit["AGENDA["+i+"]"].value=e[i][0];document.forms.meeting_edit["AGENDA_ITEM["+i+"]"].value=e[i][1];for(n=0;n<o.length;n++){if(document.forms.meeting_edit[o[n]+"["+i+"]"]){document.forms.meeting_edit[o[n]+"["+i+"]"].name=o[n]+"["+e[i][0]+"]";if(r){document.forms.meeting_edit[o[n]+"["+e[i][0]+"]"]=document.forms.meeting_edit[o[n]+"["+i+"]"]}}}document.forms.meeting_edit["AGENDA_RESPONSIBLE["+i+"][]"].name="AGENDA_RESPONSIBLE["+e[i][0]+"][]";if(r){document.forms.meeting_edit["AGENDA_RESPONSIBLE["+e[i][0]+"][]"]=document.forms.meeting_edit["AGENDA_RESPONSIBLE["+i+"][]"]}var m=t.replace("#ITEM_ID#",e[i][1]),d=BX.findChild(a,{tag:"DIV",className:"meeting-ag-info-icons"},true),l=BX.findChild(a,{tag:"A",className:"meeting-ag-block-title-text"},true),_=BX.findChild(a,{tag:"A",className:"meeting-ag-tasks-ic"},true);if(d)d.style.display="block";if(l)l.href=m;if(_)_.href=m+"#tasks";s=BX.findChildren(a.nextSibling,listItemParams.isItem);if(s&&s.length>0){for(n=0;n<s.length;n++){s[n].BXINSTANCE.INSTANCE_PARENT_ID=e[i][0];document.forms.meeting_edit["AGENDA_PARENT["+s[n].BXINSTANCEKEY+"]"].value=e[i][0]}}}}}}function replaceTasks(e){var t,i,n,a;for(t in e){a=BX("agenda_item_"+t);if(a){a.BXINSTANCE.AGENDA_TASK_CHECKED=false;if(e[t]){a.BXINSTANCE.TASKS_COUNT[0]++;a.BXINSTANCE.TASKS_COUNT[1]++;a.BXINSTANCE.TASK_ID=e[t];a.BXINSTANCE.TASK_ACCESS=true}else{a.BXINSTANCE.TASK_ID=null}if(window.currently_edited_row!=a){viewRow(a,false)}else{BX.addClass(BX("meeting_make_task_"+t),"meeting-has-task");BX("meeting_make_task_"+t).setAttribute("onclick","taskIFramePopup.tasksList=[]; taskIFramePopup.view("+e[t]+");")}n=document.forms.meeting_edit["AGENDA_TASK["+a.BXINSTANCEKEY+"]"];if(n&&n.length>1){for(i=0;i<n.length;i++){if(n[i].value!="Y"){n[i].parentNode.removeChild(n[i])}}}}}}function meetingOnTaskDeleted(e){var t=BX("meeting_task_"+e);if(t){row=BX.findParent(t,listItemParams.isItem);if(row){row.BXINSTANCE.TASK_ID=null;row.BXINSTANCE.AGENDA_TASK_CHECKED=false;if(window.currently_edited_row!=row){viewRow(row,false)}else{BX.removeClass(BX("meeting_make_task_"+i),"meeting-has-task")}}}}BX.addCustomEvent("onTaskDeleted",meetingOnTaskDeleted);
//# sourceMappingURL=script.map.js