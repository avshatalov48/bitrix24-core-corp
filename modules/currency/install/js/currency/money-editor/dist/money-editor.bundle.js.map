{"version":3,"file":"money-editor.bundle.js","sources":["../src/money-editor.js"],"sourcesContent":["// @flow\n\nimport {Reflection, Loc, Event} from 'main.core';\n\ntype MoneyEditorOptions = {\n\tinput: HTMLElement;\n\tcurrency: string;\n\tvalue: string;\n\tcallback: function;\n};\n\nexport class MoneyEditor\n{\n\tstatic currencyList = null;\n\n\tstatic defaultFormat = {\n\t\t'CURRENCY': '',\n\t\t'NAME': '',\n\t\t'FORMAT_STRING': '#',\n\t\t'DEC_POINT': '.',\n\t\t'THOUSANDS_VARIANT': null,\n\t\t'THOUSANDS_SEP': ' ',\n\t\t'DECIMALS': 2,\n\t\t'HIDE_ZERO': 'N',\n\t\t'BASE': 'N',\n\t\t'SEPARATOR': ' '\n\t};\n\n\tconstructor(options: MoneyEditorOptions = {})\n\t{\n\t\tthis.input = options.input;\n\n\t\tthis.callback = options.callback;\n\t\tthis.currency = options.currency;\n\n\t\tthis.value = options.value || '';\n\t\tthis.valueEditHandler = this.valueEdit.bind(this);\n\n\t\tEvent.ready(this.init.bind(this));\n\t}\n\n\tstatic getCurrencyFormat(currency)\n\t{\n\t\tconst list = this.getCurrencyList();\n\n\t\tif (typeof list[currency] !== 'undefined')\n\t\t{\n\t\t\treturn list[currency];\n\t\t}\n\n\t\treturn this.defaultFormat;\n\t}\n\n\tstatic getCurrencyList()\n\t{\n\t\tif(this.currencyList === null)\n\t\t{\n\t\t\tthis.currencyList = Loc.getMessage('CURRENCY');\n\t\t}\n\n\t\treturn this.currencyList;\n\t}\n\n\tinit()\n\t{\n\t\tthis.formatValue();\n\t\tEvent.bind(this.input, 'bxchange', this.valueEditHandler);\n\t\tEvent.unbind(this.input, 'change', this.valueEditHandler);\n\t}\n\n\tclean()\n\t{\n\t\tEvent.unbind(this.input, 'bxchange', this.valueEditHandler);\n\t\tthis.input = null;\n\t}\n\n\tvalueEdit(e)\n\t{\n\t\tif(!!e && e.type === 'keyup' && e.code === 'Tab')\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.formatValue();\n\t}\n\n\tsetCurrency(currency)\n\t{\n\t\tthis.value = MoneyEditor.getUnFormattedValue(this.input.value, this.currency);\n\n\t\tthis.currency = currency;\n\n\t\tthis.input.value = MoneyEditor.getFormattedValue(\n\t\t\tthis.value,\n\t\t\tthis.currency\n\t\t);\n\n\t\tthis.callValueChangeCallback();\n\t}\n\n\tformatValue()\n\t{\n\t\tconst cursorPos = BX.getCaretPosition(this.input);\n\t\tconst originalValue = this.input.value;\n\n\t\tthis.changeValue();\n\n\t\tif(originalValue.length > 0)\n\t\t{\n\t\t\tBX.setCaretPosition(this.input, cursorPos - originalValue.length + this.input.value.length);\n\t\t}\n\t}\n\n\tchangeValue()\n\t{\n\t\tthis.value = MoneyEditor.getUnFormattedValue(this.input.value, this.currency);\n\n\t\tthis.input.value = MoneyEditor.getFormattedValue(\n\t\t\tthis.value,\n\t\t\tthis.currency\n\t\t);\n\n\t\tthis.callValueChangeCallback();\n\t}\n\n\tcallValueChangeCallback()\n\t{\n\t\tif(!!this.callback)\n\t\t{\n\t\t\tthis.callback.apply(this, [this.value]);\n\t\t}\n\n\t\tBX.onCustomEvent(this, 'Currency::Editor::change', [this.value]);\n\t}\n\n\tstatic getBaseCurrencyId()\n\t{\n\t\tconst listCurrency = this.getCurrencyList();\n\t\tfor(let key in listCurrency)\n\t\t{\n\t\t\tif(!listCurrency.hasOwnProperty(key))\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif(BX.prop.getString(listCurrency[key], 'BASE', 'N') === 'Y')\n\t\t\t{\n\t\t\t\treturn key;\n\t\t\t}\n\t\t}\n\t\treturn '';\n\t}\n\n\tstatic trimTrailingZeros(formattedValue, currency)\n\t{\n\t\tformattedValue = String(formattedValue);\n\t\tconst currentFormat = this.getCurrencyFormat(currency);\n\t\tconst ch = BX.prop.getString(currentFormat, 'DEC_POINT', '');\n\n\t\treturn ch !== '' ? formattedValue.replace(new RegExp('\\\\' + ch + '0+$'), '') : formattedValue;\n\t}\n\n\tstatic escapeRegExp(text)\n\t{\n\t\ttext = String(text);\n\t\treturn text.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, '\\\\$&');\n\t}\n\n\tstatic getUnFormattedValue(formattedValue, currency)\n\t{\n\t\tformattedValue = String(formattedValue);\n\t\tconst currentFormat = this.getCurrencyFormat(currency);\n\n\t\tif (currentFormat['SEPARATOR'].length === 1)\n\t\t{\n\t\t\treturn formattedValue\n\t\t\t\t.replace(new RegExp('[' + currentFormat['SEPARATOR'] + ']', 'g'), '')\n\t\t\t\t.replace(currentFormat['DEC_POINT'], '.')\n\t\t\t\t.replace(new RegExp('[^0-9\\.]', 'g'), '');\n\t\t}\n\t\telse if(currentFormat['SEPARATOR'].length > 1)\n\t\t{\n\t\t\treturn formattedValue\n\t\t\t\t.replace(new RegExp(this.escapeRegExp(currentFormat['SEPARATOR']), 'g'), '')\n\t\t\t\t.replace(currentFormat['DEC_POINT'], '.')\n\t\t\t\t.replace(new RegExp('[^0-9\\.]', 'g'), '');\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn formattedValue.replace(currentFormat['DEC_POINT'], '.')\n\t\t\t\t.replace(new RegExp('[^0-9\\.]', 'g'), '');\n\t\t}\n\t}\n\n\tstatic getFormattedValue(baseValue, currency)\n\t{\n\t\tbaseValue = String(baseValue);\n\t\tlet valueLength = baseValue.length,\n\t\t\tformatValue = \"\",\n\t\t\tcurrentFormat = this.getCurrencyFormat(currency),\n\t\t\tregExp,\n\t\t\tdecPointPosition,\n\t\t\tcountDigit,\n\t\t\ti;\n\n\t\tif(valueLength > 0)\n\t\t{\n\t\t\tbaseValue = baseValue.replace(/^0+/, '');\n\t\t\tif(baseValue.length <= 0)\n\t\t\t{\n\t\t\t\tbaseValue = '0';\n\t\t\t}\n\t\t\telse if(baseValue.charAt(0) === '.')\n\t\t\t{\n\t\t\t\tbaseValue = '0' + baseValue;\n\t\t\t}\n\n\t\t\tvalueLength = baseValue.length;\n\t\t}\n\n\t\tif(currentFormat['SEPARATOR'] === ',' || currentFormat['SEPARATOR'] === '.')\n\t\t{\n\t\t\tregExp = new RegExp('[.,]');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tregExp = new RegExp('[' + currentFormat['DEC_POINT'] + ',.]');\n\t\t}\n\n\t\tdecPointPosition = baseValue.match(regExp);\n\n\t\tdecPointPosition = decPointPosition === null ? baseValue.length : decPointPosition.index;\n\t\tcountDigit = 0;\n\t\tfor (i = 0; i < baseValue.length; i++)\n\t\t{\n\t\t\tconst symbolPosition = baseValue.length - 1 - i;\n\t\t\tlet symbol = baseValue.charAt(symbolPosition);\n\t\t\tconst isDigit = ('0123456789'.indexOf(symbol) >= 0);\n\t\t\tif(isDigit)\n\t\t\t{\n\t\t\t\tcountDigit++;\n\t\t\t}\n\t\t\tif(symbolPosition === decPointPosition)\n\t\t\t{\n\t\t\t\tcountDigit = 0;\n\t\t\t}\n\n\t\t\tif(symbolPosition >= decPointPosition)\n\t\t\t{\n\t\t\t\tif(currentFormat['DEC_POINT'] === '.' && symbol === ',')\n\t\t\t\t{\n\t\t\t\t\tsymbol = currentFormat['DEC_POINT'];\n\t\t\t\t}\n\t\t\t\tif(currentFormat['DEC_POINT'] === ',' && symbol === '.')\n\t\t\t\t{\n\t\t\t\t\tsymbol = currentFormat['DEC_POINT'];\n\t\t\t\t}\n\n\t\t\t\tif(isDigit || (symbolPosition === decPointPosition && symbol === currentFormat['DEC_POINT']))\n\t\t\t\t{\n\t\t\t\t\tformatValue = symbol + formatValue;\n\t\t\t\t}\n\t\t\t\telse if(valueLength > symbolPosition)\n\t\t\t\t{\n\t\t\t\t\tvalueLength--;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif(isDigit)\n\t\t\t\t{\n\t\t\t\t\tformatValue = symbol + formatValue;\n\t\t\t\t}\n\t\t\t\telse if(valueLength > symbolPosition)\n\t\t\t\t{\n\t\t\t\t\tvalueLength--;\n\t\t\t\t}\n\t\t\t\tif(isDigit && countDigit % 3 === 0 && countDigit !== 0 && symbolPosition !== 0)\n\t\t\t\t{\n\t\t\t\t\tformatValue = currentFormat['SEPARATOR'] + formatValue;\n\t\t\t\t\tif(valueLength >= symbolPosition)\n\t\t\t\t\t{\n\t\t\t\t\t\tvalueLength++;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif(currentFormat['DECIMALS'] > 0)\n\t\t{\n\t\t\tdecPointPosition = formatValue.match(new RegExp('[' + currentFormat['DEC_POINT'] + ']'));\n\t\t\tdecPointPosition = decPointPosition === null ? formatValue.length : decPointPosition.index;\n\t\t\twhile(formatValue.length - 1 - decPointPosition > currentFormat['DECIMALS'])\n\t\t\t{\n\t\t\t\tif(valueLength >= formatValue.length - 1)\n\t\t\t\t{\n\t\t\t\t\tvalueLength--;\n\t\t\t\t}\n\t\t\t\tformatValue = formatValue.substr(0, formatValue.length - 1);\n\t\t\t}\n\t\t}\n\t\treturn formatValue;\n\t}\n}\n\n/** @deprecated use import { MoneyEditor } from 'currency.money-editor' */\nReflection.namespace('BX.Currency').Editor = MoneyEditor;"],"names":["MoneyEditor","options","input","callback","currency","value","valueEditHandler","valueEdit","bind","Event","ready","init","formatValue","unbind","e","type","code","getUnFormattedValue","getFormattedValue","callValueChangeCallback","cursorPos","BX","getCaretPosition","originalValue","changeValue","length","setCaretPosition","apply","onCustomEvent","list","getCurrencyList","defaultFormat","currencyList","Loc","getMessage","listCurrency","key","hasOwnProperty","prop","getString","formattedValue","String","currentFormat","getCurrencyFormat","ch","replace","RegExp","text","escapeRegExp","baseValue","valueLength","regExp","decPointPosition","countDigit","i","charAt","match","index","symbolPosition","symbol","isDigit","indexOf","substr","Reflection","namespace","Editor"],"mappings":"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"}