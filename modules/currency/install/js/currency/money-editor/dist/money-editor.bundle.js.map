{"version":3,"file":"money-editor.bundle.js","sources":["../src/money-editor.js"],"sourcesContent":["// @flow\n\nimport {Reflection, Loc, Event} from 'main.core';\n\ntype MoneyEditorOptions = {\n\tinput: HTMLElement;\n\tcurrency: string;\n\tvalue: string;\n\tcallback: function;\n};\n\nexport class MoneyEditor\n{\n\tstatic currencyList = null;\n\n\tstatic defaultFormat = {\n\t\t'CURRENCY': '',\n\t\t'NAME': '',\n\t\t'FORMAT_STRING': '#',\n\t\t'DEC_POINT': '.',\n\t\t'THOUSANDS_VARIANT': null,\n\t\t'THOUSANDS_SEP': ' ',\n\t\t'DECIMALS': 2,\n\t\t'HIDE_ZERO': 'N',\n\t\t'BASE': 'N',\n\t\t'SEPARATOR': ' '\n\t};\n\n\tconstructor(options: MoneyEditorOptions = {})\n\t{\n\t\tthis.input = options.input;\n\n\t\tthis.callback = options.callback;\n\t\tthis.currency = options.currency;\n\n\t\tthis.value = options.value || '';\n\t\tthis.valueEditHandler = this.valueEdit.bind(this);\n\n\t\tEvent.ready(this.init.bind(this));\n\t}\n\n\tstatic getCurrencyFormat(currency)\n\t{\n\t\tconst list = this.getCurrencyList();\n\n\t\tif (typeof list[currency] !== 'undefined')\n\t\t{\n\t\t\treturn list[currency];\n\t\t}\n\n\t\treturn this.defaultFormat;\n\t}\n\n\tstatic getCurrencyList()\n\t{\n\t\tif(this.currencyList === null)\n\t\t{\n\t\t\tthis.currencyList = Loc.getMessage('CURRENCY');\n\t\t}\n\n\t\treturn this.currencyList;\n\t}\n\n\tinit()\n\t{\n\t\tthis.formatValue();\n\t\tEvent.bind(this.input, 'bxchange', this.valueEditHandler);\n\t\tEvent.unbind(this.input, 'change', this.valueEditHandler);\n\t}\n\n\tclean()\n\t{\n\t\tEvent.unbind(this.input, 'bxchange', this.valueEditHandler);\n\t\tthis.input = null;\n\t}\n\n\tvalueEdit(e)\n\t{\n\t\tif(!!e && e.type === 'keyup' && e.code === 'Tab')\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.formatValue();\n\t}\n\n\tsetCurrency(currency)\n\t{\n\t\tthis.value = MoneyEditor.getUnFormattedValue(this.input.value, this.currency);\n\n\t\tthis.currency = currency;\n\n\t\tthis.input.value = MoneyEditor.getFormattedValue(\n\t\t\tthis.value,\n\t\t\tthis.currency\n\t\t);\n\n\t\tthis.callValueChangeCallback();\n\t}\n\n\tformatValue()\n\t{\n\t\tconst cursorPos = BX.getCaretPosition(this.input);\n\t\tconst originalValue = this.input.value;\n\n\t\tthis.changeValue();\n\n\t\tif(originalValue.length > 0)\n\t\t{\n\t\t\tBX.setCaretPosition(this.input, cursorPos - originalValue.length + this.input.value.length);\n\t\t}\n\t}\n\n\tchangeValue()\n\t{\n\t\tthis.value = MoneyEditor.getUnFormattedValue(this.input.value, this.currency);\n\n\t\tthis.input.value = MoneyEditor.getFormattedValue(\n\t\t\tthis.value,\n\t\t\tthis.currency\n\t\t);\n\n\t\tthis.callValueChangeCallback();\n\t}\n\n\tcallValueChangeCallback()\n\t{\n\t\tif(!!this.callback)\n\t\t{\n\t\t\tthis.callback.apply(this, [this.value]);\n\t\t}\n\n\t\tBX.onCustomEvent(this, 'Currency::Editor::change', [this.value]);\n\t}\n\n\tstatic getBaseCurrencyId()\n\t{\n\t\tconst listCurrency = this.getCurrencyList();\n\t\tfor(let key in listCurrency)\n\t\t{\n\t\t\tif(!listCurrency.hasOwnProperty(key))\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif(BX.prop.getString(listCurrency[key], 'BASE', 'N') === 'Y')\n\t\t\t{\n\t\t\t\treturn key;\n\t\t\t}\n\t\t}\n\t\treturn '';\n\t}\n\n\tstatic trimTrailingZeros(formattedValue, currency)\n\t{\n\t\tformattedValue = String(formattedValue);\n\t\tconst currentFormat = this.getCurrencyFormat(currency);\n\t\tconst ch = BX.prop.getString(currentFormat, 'DEC_POINT', '');\n\n\t\treturn ch !== '' ? formattedValue.replace(new RegExp('\\\\' + ch + '0+$'), '') : formattedValue;\n\t}\n\n\tstatic escapeRegExp(text)\n\t{\n\t\ttext = String(text);\n\t\treturn text.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, '\\\\$&');\n\t}\n\n\tstatic getUnFormattedValue(formattedValue, currency)\n\t{\n\t\tformattedValue = String(formattedValue);\n\t\tconst currentFormat = this.getCurrencyFormat(currency);\n\n\t\tif (currentFormat['SEPARATOR'].length === 1)\n\t\t{\n\t\t\treturn formattedValue\n\t\t\t\t.replace(new RegExp('[' + currentFormat['SEPARATOR'] + ']', 'g'), '')\n\t\t\t\t.replace(currentFormat['DEC_POINT'], '.')\n\t\t\t\t.replace(new RegExp('[^0-9\\.]', 'g'), '');\n\t\t}\n\t\telse if(currentFormat['SEPARATOR'].length > 1)\n\t\t{\n\t\t\treturn formattedValue\n\t\t\t\t.replace(new RegExp(this.escapeRegExp(currentFormat['SEPARATOR']), 'g'), '')\n\t\t\t\t.replace(currentFormat['DEC_POINT'], '.')\n\t\t\t\t.replace(new RegExp('[^0-9\\.]', 'g'), '');\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn formattedValue.replace(currentFormat['DEC_POINT'], '.')\n\t\t\t\t.replace(new RegExp('[^0-9\\.]', 'g'), '');\n\t\t}\n\t}\n\n\tstatic getFormattedValue(baseValue, currency)\n\t{\n\t\tbaseValue = String(baseValue);\n\t\tlet valueLength = baseValue.length,\n\t\t\tformatValue = \"\",\n\t\t\tcurrentFormat = this.getCurrencyFormat(currency),\n\t\t\tregExp,\n\t\t\tdecPointPosition,\n\t\t\tcountDigit,\n\t\t\ti;\n\n\t\tif(valueLength > 0)\n\t\t{\n\t\t\tbaseValue = baseValue.replace(/^0+/, '');\n\t\t\tif(baseValue.length <= 0)\n\t\t\t{\n\t\t\t\tbaseValue = '0';\n\t\t\t}\n\t\t\telse if(baseValue.charAt(0) === '.')\n\t\t\t{\n\t\t\t\tbaseValue = '0' + baseValue;\n\t\t\t}\n\n\t\t\tvalueLength = baseValue.length;\n\t\t}\n\n\t\tif(currentFormat['SEPARATOR'] === ',' || currentFormat['SEPARATOR'] === '.')\n\t\t{\n\t\t\tregExp = new RegExp('[.,]');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tregExp = new RegExp('[' + currentFormat['DEC_POINT'] + ',.]');\n\t\t}\n\n\t\tdecPointPosition = baseValue.match(regExp);\n\n\t\tdecPointPosition = decPointPosition === null ? baseValue.length : decPointPosition.index;\n\t\tcountDigit = 0;\n\t\tfor (i = 0; i < baseValue.length; i++)\n\t\t{\n\t\t\tconst symbolPosition = baseValue.length - 1 - i;\n\t\t\tlet symbol = baseValue.charAt(symbolPosition);\n\t\t\tconst isDigit = ('0123456789'.indexOf(symbol) >= 0);\n\t\t\tif(isDigit)\n\t\t\t{\n\t\t\t\tcountDigit++;\n\t\t\t}\n\t\t\tif(symbolPosition === decPointPosition)\n\t\t\t{\n\t\t\t\tcountDigit = 0;\n\t\t\t}\n\n\t\t\tif(symbolPosition >= decPointPosition)\n\t\t\t{\n\t\t\t\tif(currentFormat['DEC_POINT'] === '.' && symbol === ',')\n\t\t\t\t{\n\t\t\t\t\tsymbol = currentFormat['DEC_POINT'];\n\t\t\t\t}\n\t\t\t\tif(currentFormat['DEC_POINT'] === ',' && symbol === '.')\n\t\t\t\t{\n\t\t\t\t\tsymbol = currentFormat['DEC_POINT'];\n\t\t\t\t}\n\n\t\t\t\tif(isDigit || (symbolPosition === decPointPosition && symbol === currentFormat['DEC_POINT']))\n\t\t\t\t{\n\t\t\t\t\tformatValue = symbol + formatValue;\n\t\t\t\t}\n\t\t\t\telse if(valueLength > symbolPosition)\n\t\t\t\t{\n\t\t\t\t\tvalueLength--;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif(isDigit)\n\t\t\t\t{\n\t\t\t\t\tformatValue = symbol + formatValue;\n\t\t\t\t}\n\t\t\t\telse if(valueLength > symbolPosition)\n\t\t\t\t{\n\t\t\t\t\tvalueLength--;\n\t\t\t\t}\n\t\t\t\tif(isDigit && countDigit % 3 === 0 && countDigit !== 0 && symbolPosition !== 0)\n\t\t\t\t{\n\t\t\t\t\tformatValue = currentFormat['SEPARATOR'] + formatValue;\n\t\t\t\t\tif(valueLength >= symbolPosition)\n\t\t\t\t\t{\n\t\t\t\t\t\tvalueLength++;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tdecPointPosition = formatValue.match(new RegExp('[' + currentFormat['DEC_POINT'] + ']'));\n\t\tdecPointPosition = decPointPosition === null ? formatValue.length : decPointPosition.index;\n\t\tif(currentFormat['DECIMALS'] > 0)\n\t\t{\n\t\t\twhile(formatValue.length - 1 - decPointPosition > currentFormat['DECIMALS'])\n\t\t\t{\n\t\t\t\tif(valueLength >= formatValue.length - 1)\n\t\t\t\t{\n\t\t\t\t\tvalueLength--;\n\t\t\t\t}\n\t\t\t\tformatValue = formatValue.substr(0, formatValue.length - 1);\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tformatValue = formatValue.substr(0, decPointPosition);\n\t\t}\n\n\t\treturn formatValue;\n\t}\n}\n\n/** @deprecated use import { MoneyEditor } from 'currency.money-editor' */\nReflection.namespace('BX.Currency').Editor = MoneyEditor;"],"names":["MoneyEditor","options","input","callback","currency","value","valueEditHandler","valueEdit","bind","Event","ready","init","formatValue","unbind","e","type","code","getUnFormattedValue","getFormattedValue","callValueChangeCallback","cursorPos","BX","getCaretPosition","originalValue","changeValue","length","setCaretPosition","apply","onCustomEvent","list","getCurrencyList","defaultFormat","currencyList","Loc","getMessage","listCurrency","key","hasOwnProperty","prop","getString","formattedValue","String","currentFormat","getCurrencyFormat","ch","replace","RegExp","text","escapeRegExp","baseValue","valueLength","regExp","decPointPosition","countDigit","i","charAt","match","index","symbolPosition","symbol","isDigit","indexOf","substr","Reflection","namespace","Editor"],"mappings":"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"}