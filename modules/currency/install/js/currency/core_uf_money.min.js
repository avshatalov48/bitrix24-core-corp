(function(){"use strict";BX.namespace("BX.Main.UF");if(typeof BX.Main.UF.TypeMoney!=="undefined"){return}BX.Main.UF.TypeMoney=function(){};BX.extend(BX.Main.UF.TypeMoney,BX.Main.UF.BaseType);BX.Main.UF.TypeMoney.USER_TYPE_ID="money";BX.Main.UF.TypeMoney.prototype.addRow=function(e,n){var a=n.previousSibling;var r=this.getClone(a,e);a.parentNode.insertBefore(r,n)};BX.Main.UF.TypeMoney.prototype.getClone=function(e,n){var a=BX.Main.UF.TypeMoney.superclass.getClone.apply(this,arguments);var r=BX.findChildrenByClassName(a,"money-editor-currency-selector-wrap",true);var t=r[0];BX.cleanNode(t);var i=BX.findChildren(a,{tagName:/INPUT|SELECT/i},true);i[0].value="";i[1].value="";var o=BX.message("CURRENCY");var y=[];var l=null;for(var u in o){if(o.hasOwnProperty(u)){var p={NAME:o[u].NAME,VALUE:u};y.push(p);if(l===null){l=p}}}var s=new BX.Currency.MoneyInput({controlId:d,input:i[1],resultInput:i[0],currency:l.VALUE});var d=Math.random();t.appendChild(BX.decl({block:"main-ui-select",name:d,items:y,value:l,params:{fieldName:d,isMulti:false},valueDelete:false}));BX.addCustomEvent(window,"UI::Select::change",function(e,n){if(e.params.fieldName===d){var a=JSON.parse(e.node.getAttribute("data-value"));if(!!a){s.setCurrency(a.VALUE)}}});return a};BX.Main.UF.TypeMoney.prototype.focus=function(e){var n=this.getNode(e);if(!BX.isNodeInDom(n)){console.error("Node for field "+e+" is already removed from DOM")}var a=BX.findChild(n,{tagName:"INPUT",attribute:{type:"text"}},true);if(a){BX.focus(a)}};BX.Main.UF.Factory.setTypeHandler(BX.Main.UF.TypeMoney.USER_TYPE_ID,BX.Main.UF.TypeMoney)})();