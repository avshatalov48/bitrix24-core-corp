jn.define("intranet/user-mini-profile",((t,e,o)=>{const{Button:i,ButtonSize:n,ButtonDesign:s}=t("ui-system/form/buttons/button");const{Color:r,Indent:l}=t("tokens");const{Box:a}=t("ui-system/layout/box");const{Area:u}=t("ui-system/layout/area");const{Loc:c}=t("loc");const{PortalLogo:m}=t("intranet/portal-logo");const{UserMiniProfileForm:f}=t("intranet/user-mini-profile-form");const{H3:p}=t("ui-system/typography/heading");const{PureComponent:g}=t("layout/pure-component");const{BoxFooter:d}=t("ui-system/layout/dialog-footer");const{Haptics:h}=t("haptics");class I extends g{constructor(t){super(t);this.form=null;this.state={logoLoaded:false,profileLoaded:false}}componentWillUnmount(){BX.postComponentEvent("userMiniProfileClosed",null)}getProfileForm=()=>new f({ref:this.bindProfileFormRef,scrollToInput:this.scrollToInput,profileData:this.props.profileData});bindProfileFormRef=t=>{this.formRef=t};getPortalLogoView=()=>new m({portalLogo:this.props.portalLogoData});getTitle(){return p({color:r.base1,style:{alignSelf:"center",marginBottom:24},text:c.getMessage("INTRANETMOBILE_USER_MINI_PROFILE_TITLE")??""})}onContinue=()=>{this.formRef?.onContinue()};getSubmitButton(){return i({size:n.L,design:s.FILLED,text:c.getMessage("INTRANETMOBILE_USER_MINI_PROFILE_BUTTON_SUBMIT")??"",border:true,onClick:this.onSubmit,testId:"USER_MINI_PROFILE_BUTTON_SUBMIT",stretched:true,loading:this.state.isLoading})}onSubmit=()=>{this.setState({isLoading:true});this.formRef?.submitForm().then((()=>{h.notifySuccess();layout.close()})).catch((()=>{this.setState({isLoading:false})}))};renderButtons(){return d({safeArea:true,keyboardButton:{text:c.getMessage("INTRANETMOBILE_USER_MINI_PROFILE_BUTTON_CONTINUE")??"",onClick:this.onContinue}},this.getSubmitButton())}bindScrollViewRef=t=>{this.scrollViewRef=t};scrollToInput=t=>{const{y:e}=this.scrollViewRef.getPosition(t.contentFieldRef);const o=Application.getPlatform()==="ios"?e-20:e-140;this.scrollViewRef.scrollTo({y:o,animated:true})};render(){const t=`${currentDomain}/bitrix/mobileapp/intranetmobile/components/intranet/user-mini-profile/images/confetti-background.svg`;return a({footer:this.renderButtons(),withScroll:true,resizableByKeyboard:true,style:{position:"relative"},scrollProps:{ref:this.bindScrollViewRef}},Image({resizeMode:"contain",style:{width:"100%",height:127,position:"absolute"},svg:{uri:encodeURI(t)}}),u({},View({style:{paddingTop:l.XL3.toNumber()}},this.getPortalLogoView(),this.getTitle(),this.getProfileForm())))}}o.exports={UserMiniProfile:I}}));(()=>{const{UserMiniProfile:t}=jn.require("intranet/user-mini-profile");BX.onViewLoaded((()=>{const e=BX.componentParameters.get("profileDataParams",null);const o=BX.componentParameters.get("portalLogoParams",null);layout.showComponent(new t({profileData:e,portalLogoData:o}))}))})();
//# sourceMappingURL=component.map.js