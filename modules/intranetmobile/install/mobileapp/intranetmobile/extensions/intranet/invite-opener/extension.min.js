jn.define("intranet/invite-opener",((n,e,t)=>{const{isNil:r}=n("utils/type");const{Notify:i}=n("notify");const{IntranetInvite:o,IntranetInviteAnalytics:a}=n("intranet/invite");const{Alert:s}=n("alert");const{Loc:I}=n("loc");const c="INTRANET_CONTROLLER_INVITE_NO_PERMISSIONS";const d=n=>{i.showIndicatorLoading();_().then((e=>E(e,n)),(e=>l(e,n))).catch((n=>console.error(n))).finally((()=>i.hideCurrentIndicator()))};const l=(n,e)=>{const t=n.errors&&n.errors.length>0;if(t){R(n.errors,e.onInviteError)}};const E=(n,e)=>{const t=n.errors&&n.errors.length>0;if(t){R(n.errors,e.onInviteError);return}const{creatorEmailConfirmed:i}=n.data;if(!r(i)&&!i){g(e.onInviteError);return}N(n,e)};const N=(n,e)=>{const t=T(n.data,e);const r=new a({analytics:e.analytics});r.sendDrawerOpenEvent();const i=["invite",{...t,onReady:n=>{new o({analytics:r,disableAdminConfirm:t.disableAdminConfirm,adminConfirm:t.adminConfirm,registerUrl:t.link,rootStructureSectionId:t.rootStructureSectionId,onInviteSentHandler:e.onInviteSentHandler,onViewHiddenWithoutInvitingHandler:e.onViewHiddenWithoutInvitingHandler,inviteWidget:n})}}];if(e.parentLayout){e.parentLayout.openWidget(...i);return}PageManager.openWidget(...i)};const T=(n,e)=>({objectName:"inviteComponent",link:n.registerUrl??"",adminConfirm:n.adminConfirm??false,disableAdminConfirm:n.disableAdminConfirm??false,rootStructureSectionId:n.rootStructureSectionId??0,sharingMessage:n.sharingMessage??"",multipleInvite:e.multipleInvite??true});const g=n=>{s.alert(I.getMessage("INTRANET_INVITE_CONFIRM_CREATOR_EMAIL_ERROR_TITLE"),I.getMessage("INTRANET_INVITE_CONFIRM_CREATOR_EMAIL_ERROR_TEXT"));if(n){n([new Error("Portal creator email not confirmed")])}};const R=(n,e)=>{if(n[0].code===c){s.alert(I.getMessage("INTRANET_CONTROLLER_INVITE_NO_PERMISSIONS_TITLE"),I.getMessage("INTRANET_CONTROLLER_INVITE_NO_PERMISSIONS_TEXT"))}else{s.alert("",o.getAjaxErrorText(n))}if(e){e(n)}};const _=()=>BX.ajax.runAction("intranet.invite.getData");t.exports={openIntranetInviteWidget:d}}));
//# sourceMappingURL=extension.map.js