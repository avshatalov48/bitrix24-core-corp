this.BX=this.BX||{};(function(t,e,n,i,o){"use strict";const s=Object.freeze({DELIVERY:"delivery"});const r={props:{icon:{type:String,required:false,default:""},title:{type:String,required:false,default:""},hint:{type:String,required:false,default:""},subtitle:{type:String,required:false,default:""}},computed:{iconClassname(){return["crm__info-popup_icon",this.getIconModifier()]}},methods:{getIconModifier(){if(!this.isIconExist(this.icon)){return"--empty"}return`--${s[this.icon]||s[this.icon.toUpperCase()]}`},isIconExist(){if(!n.Type.isString(this.icon)){return false}return!!(s[this.icon]||s[this.icon.toUpperCase()])}},template:`\n\t\t<header class="crm__info-popup_header">\n\t\t\t\t<div\n\t\t\t\t\tv-if="icon"\n\t\t\t\t\t:class="iconClassname"\n\t\t\t\t/>\n\t\t\t\t<div class="crm__info-popup_header-right">\n\t\t\t\t\t<div class="crm__info-popup_title-container">\n\t\t\t\t\t\t<h2 class="crm__info-popup_title ui-typography-heading-h2">\n\t\t\t\t\t\t\t{{ title }}\n\t\t\t\t\t\t</h2>\n\t\t\t\t\t\t<div v-if="hint" class="crm__info-popup_hint"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div v-if="subtitle" class="crm__info-popup_subtitle">\n\t\t\t\t\t\t{{ subtitle }}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</header>\n\t`};const l={props:{type:Object,content:String,attributes:Object}};const p={extends:l,template:`\n\t\t<span>{{ content }}</span>\n\t`};const c={extends:l,computed:{opportunity(){var t;return(t=this.attributes)==null?void 0:t.opportunity},currencyId(){var t;return(t=this.attributes)==null?void 0:t.currencyId},encodedText(){if(!n.Type.isNumber(this.opportunity)||!n.Type.isStringFilled(this.currencyId)){return null}return e.CurrencyCore.currencyFormat(this.opportunity,this.currencyId,true)}},template:`\n\t\t<span\n\t\t\tv-if="encodedText"\n\t\t\tv-html="encodedText"\n\t\t></span>\n\t`};const a={extends:l,computed:{href(){var t;return(t=this.attributes)==null?void 0:t.href}},template:`\n\t\t<a :href="href">{{ content }}</a>\n\t`};const d=Object.freeze({LINK:"link",TEXT:"text",MONEY:"money",PHONE:"phone",MIXED:"mixed"});const u={extends:l,computed:{phoneNumber(){return this.attributes.phone||""},canPerformCalls(){return!!this.attributes.canPerformCalls}},methods:{makeCall(){if(typeof window.top["BXIM"]!=="undefined"&&this.canPerformCalls){window.top["BXIM"].phoneTo(this.phoneNumber)}}},template:`\n\t\t<span\n\t\t\tclass="crm__info-popup_content-table-field-link --internal"\n\t\t\t@click="makeCall"\n\t\t>\n\t\t\t{{ content }}\n\t\t</span>\n\t`};const f={components:{InfoPopupContentBlockLink:a,InfoPopupContentBlockText:p,InfoPopupContentBlockMoney:c},props:{title:{type:String,required:true,default:""},contentBlock:{type:Object,required:true,default:()=>({})}},computed:{type(){var t;return(t=this.contentBlock)==null?void 0:t.type},contentBlockComponent(){switch(this.type){case d.LINK:return a;case d.TEXT:return p;case d.MONEY:return c;case d.PHONE:return u;default:return p}}},template:`\n\t\t<li class="crm__info-popup_content-table-field">\n\t\t\t<div class="crm__info-popup_content-table-field-title">\n\t\t\t\t{{ title }}\n\t\t\t</div>\n\t\t\t<div class="crm__info-popup_content-table-field-value">\n\t\t\t\t<component\n\t\t\t\t\t:is="contentBlockComponent"\n\t\t\t\t\t:content="contentBlock.content"\n\t\t\t\t\t:attributes="contentBlock.attributes"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</li>\n\t`};const h={components:{InfoPopupContentTableField:f},props:{fields:Object},template:`\n\t\t<div class="crm__info-popup_content-table">\n\t\t\t<ul class="crm__info-popup_content-table-fields">\n\t\t\t\t<info-popup-content-table-field\n\t\t\t\t\tv-for="(field, index) in fields"\n\t\t\t\t\t:key="index"\n\t\t\t\t\t:title="field.title"\n\t\t\t\t\t:content-block="field.contentBlock"\n\t\t\t\t/>\n\t\t\t</ul>\n\t\t</div>\n\t`};const m={name:"InfoPopup",components:{InfoPopupHeader:r,InfoPopupContentTable:h},props:{header:{type:Object,required:false,default:()=>({title:"",subtitle:"",hint:""})},fields:{type:Object}},template:`\n\t\t<div class="crm__info-popup">\n\t\t\t<info-popup-header\n\t\t\t\t:title="header.title"\n\t\t\t\t:subtitle="header.subtitle"\n\t\t\t\t:hint="header.hint"\n\t\t\t\t:icon="header.icon"\n\t\t\t\t\n\t\t\t/>\n\t\t\t<body class="crm__info-popup_body">\n\t\t\t\t<info-popup-content-table\n\t\t\t\t\t:fields="fields"\n\t\t\t\t/>\n\t\t\t</body>\n\t\t</div>`};var b=babelHelpers.classPrivateFieldLooseKey("popup");class _{constructor(t={name:"InfoPopup"}){Object.defineProperty(this,b,{writable:true,value:void 0});this.id=t.id;babelHelpers.classPrivateFieldLooseBase(this,b)[b]=null;this.header=t.content.header;this.contentFields=t.content.fields}show(){const t=n.Dom.create("div");i.BitrixVue.createApp(m,{header:this.header,fields:this.contentFields}).mount(t);babelHelpers.classPrivateFieldLooseBase(this,b)[b]=new o.Popup({className:"crm__info-popup-window",content:t,width:532,noAllPaddings:true,closeByEsc:true,closeIcon:true,autoHide:true,borderRadius:10,animation:"fading-slide"});babelHelpers.classPrivateFieldLooseBase(this,b)[b].show()}hide(){if(babelHelpers.classPrivateFieldLooseBase(this,b)[b]){babelHelpers.classPrivateFieldLooseBase(this,b)[b].destroy()}}getPopup(){return babelHelpers.classPrivateFieldLooseBase(this,b)[b]}}t.InfoPopup=_})(this.BX.Crm=this.BX.Crm||{},BX.Currency,BX,BX.Vue3,BX.Main);
//# sourceMappingURL=info-popup.bundle.map.js