BX.namespace("BX.Crm");if(typeof BX.Crm.EntityEditorFieldSelector==="undefined"){BX.Crm.EntityEditorFieldSelector=BX.UI.EntityEditorFieldSelector}if(typeof BX.Crm.EntityEditorUserSelector==="undefined"){BX.Crm.EntityEditorUserSelector=BX.UI.EntityEditorUserSelector}if(typeof BX.Crm.EntityEditorCrmSelector==="undefined"){BX.Crm.EntityEditorCrmSelector=function(){this._id="";this._settings={};this._entityTypeIds=[];this._supportedItemTypes={}};BX.Crm.EntityEditorCrmSelector.prototype={initialize:function(t,e){this._id=t;this._settings=e?e:{};this._isInitialized=false;this._entityTypeIds=BX.prop.getArray(this._settings,"entityTypeIds",[]);this._supportedItemTypes=[];for(var i=0,r=this._entityTypeIds.length;i<r;i++){var n=this._entityTypeIds[i];if(n===BX.CrmEntityType.enumeration.contact){this._supportedItemTypes.push({name:"contacts",altName:"CRMCONTACT"})}else if(n===BX.CrmEntityType.enumeration.company){this._supportedItemTypes.push({name:"companies",altName:"CRMCOMPANY"})}else if(n===BX.CrmEntityType.enumeration.lead){this._supportedItemTypes.push({name:"leads",altName:"CRMLEAD"})}else if(n===BX.CrmEntityType.enumeration.deal){this._supportedItemTypes.push({name:"deals",altName:"CRMDEAL"})}}},getId:function(){return this._id},isOpened:function(){return BX.SocNetLogDestination.isOpenDialog()},open:function(t){if(this.isOpened()){return}if(this._mainWindow&&this._mainWindow===BX.SocNetLogDestination.containerWindow){return}if(!this._isInitialized){var e={};var i={};var r=[];for(var n=0,o=this._supportedItemTypes.length;n<o;n++){var s=this._supportedItemTypes[n];e[s.name]=BX.Crm.EntityEditorCrmSelector[s.name];i[s.name]=BX.Crm.EntityEditorCrmSelector[s.name+"Last"];r.push(s.altName)}i["crm"]={};var a={name:this._id,extranetUser:false,bindMainPopup:{node:t,offsetTop:"20px",offsetLeft:"20px"},callback:{select:BX.delegate(this.onSelect,this)},showSearchInput:true,departmentSelectDisable:true,items:e,itemsLast:i,itemsSelected:{},useClientDatabase:false,destSort:{},allowAddUser:false,allowSearchCrmEmailUsers:false,allowUserSearch:false,isCrmFeed:true,CrmTypes:r};if(BX.prop.getBoolean(this._settings,"enableMyCompanyOnly",false)){a["enableMyCrmCompanyOnly"]=true}BX.SocNetLogDestination.init(a);this._isInitialized=true}BX.SocNetLogDestination.openDialog(this._id,{bindNode:t});this._mainWindow=BX.SocNetLogDestination.containerWindow},close:function(){if(!this.isOpened()){return}if(this._mainWindow&&this._mainWindow===BX.SocNetLogDestination.containerWindow){BX.SocNetLogDestination.closeDialog();this._mainWindow=null}},onSelect:function(t,e,i,r,n,o){if(o!=="select"){return}var s=false;for(var a=0,d=this._supportedItemTypes.length;a<d;a++){var m=this._supportedItemTypes[a];if(m.name===e){s=true;break}}if(!s){return}var l=BX.prop.getFunction(this._settings,"callback",null);if(l){l(this,t)}}};if(typeof BX.Crm.EntityEditorCrmSelector.contacts==="undefined"){BX.Crm.EntityEditorCrmSelector.contacts={}}if(typeof BX.Crm.EntityEditorCrmSelector.contactsLast==="undefined"){BX.Crm.EntityEditorCrmSelector.contactsLast={}}if(typeof BX.Crm.EntityEditorCrmSelector.companies==="undefined"){BX.Crm.EntityEditorCrmSelector.companies={}}if(typeof BX.Crm.EntityEditorCrmSelector.companiesLast==="undefined"){BX.Crm.EntityEditorCrmSelector.companiesLast={}}if(typeof BX.Crm.EntityEditorCrmSelector.leads==="undefined"){BX.Crm.EntityEditorCrmSelector.leads={}}if(typeof BX.Crm.EntityEditorCrmSelector.leadsLast==="undefined"){BX.Crm.EntityEditorCrmSelector.leadsLast={}}if(typeof BX.Crm.EntityEditorCrmSelector.deals==="undefined"){BX.Crm.EntityEditorCrmSelector.deals={}}if(typeof BX.Crm.EntityEditorCrmSelector.dealsLast==="undefined"){BX.Crm.EntityEditorCrmSelector.dealsLast={}}BX.Crm.EntityEditorCrmSelector.items={};BX.Crm.EntityEditorCrmSelector.create=function(t,e){var i=new BX.Crm.EntityEditorCrmSelector(t,e);i.initialize(t,e);this.items[i.getId()]=i;return i}}
//# sourceMappingURL=field-selector.map.js