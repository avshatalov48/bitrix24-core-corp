{"version":3,"sources":["product-list.js"],"names":["BX","namespace","Crm","EntityProductListController","superclass","constructor","apply","this","productList","currencyId","_isManualOpportunity","_prevProductCount","_curProductCount","_editorModeChangeHandler","onEditorModeChange","bind","_editorControlChangeHandler","onEditorControlChange","extend","UI","EntityEditorController","prototype","doInitialize","Currency","setCurrencies","prop","getArray","_config","addCustomEvent","window","handleSetProductList","onTabShow","_editor","addModeChangeListener","_currencyId","_model","getField","setTimeout","delegate","opportunityControl","getOpportunityControl","addChangeAmountEditModeListener","onchangeAmountEditMode","getCurrencyId","tab","getId","handleOnTabShow","event","getData","setProductList","notifyOpportunityControl","getProductListId","getConfigStringParam","reinitializeProductList","reloadGrid","getProductList","destroy","setController","setForm","getFormElement","changeCurrencyId","getProductCount","adjustLocks","clearProductList","onAfterSave","_manualOpportunityHiddenInput","Dom","remove","removeFormFields","onBeforeSubmit","form","isManualOpportunity","findChild","tagName","attr","name","create","attrs","type","value","appendChild","isChanged","isNew","compileProductData","changeSumTotal","totals","needMarkAsChanged","enableSaveButton","adjustTotals","validate","validateSubmit","_toolPanel","disableSaveButton","productAdd","productChange","markAsChanged","productRemove","changeOffer","innerCancel","onCustomEvent","getManualOpportunityValue","popup","EditorAuxiliaryDialog","getById","close","title","messages","manualOpportunityChangeModeTitle","content","manualOpportunityChangeModeText","zIndex","overlay","buttons","id","DialogButtonType","accept","text","manualOpportunityChangeModeYes","callback","getDialog","setManualOpportunity","doAdjustTotals","cancel","manualOpportunityChangeModeNo","open","setField","currencyFormat","totalCost","enableNotification","getControlByIdRecursive","EntityEditorMoney","setHasRelatedProducts","doAdjustLocks","wasProductsInitiated","lockField","unlockField","rollback","_isChanged","sender","getMode","EntityEditorMode","edit","addControlChangeListener","removeControlChangeListener","params","getString","field","isManual","isItemOpened","manualOpportunityConfirmationTitle","manualOpportunityConfirmationText","manualOpportunityConfirmationYes","manualOpportunityConfirmationNo","actionUpdateTotalData","settings","self","initialize"],"mappings":"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","file":"product-list.map.js"}