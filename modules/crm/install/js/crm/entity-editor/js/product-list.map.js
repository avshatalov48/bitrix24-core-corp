{"version":3,"sources":["product-list.js"],"names":["BX","namespace","Crm","EntityProductListController","superclass","constructor","apply","this","productList","currencyId","_isManualOpportunity","_prevProductCount","_curProductCount","_editorModeChangeHandler","onEditorModeChange","bind","_editorControlChangeHandler","onEditorControlChange","extend","UI","EntityEditorController","prototype","doInitialize","Currency","setCurrencies","prop","getArray","_config","addCustomEvent","window","handleSetProductList","onTabShow","_editor","addModeChangeListener","_currencyId","_model","getField","setTimeout","delegate","opportunityControl","getOpportunityControl","addChangeAmountEditModeListener","onchangeAmountEditMode","getCurrencyId","tab","getId","handleOnTabShow","event","getData","setProductList","notifyOpportunityControl","getProductListId","getConfigStringParam","reinitializeProductList","reloadGrid","destroy","setController","setForm","getFormElement","changeCurrencyId","getProductCount","adjustLocks","clearProductList","onAfterSave","_manualOpportunityHiddenInput","Dom","remove","removeFormFields","onBeforeSubmit","form","isManualOpportunity","findChild","tagName","attr","name","create","attrs","type","value","appendChild","isChanged","isNew","compileProductData","changeSumTotal","totals","needMarkAsChanged","adjustTotals","_toolPanel","enableSaveButton","productAdd","productChange","disableSaveButton","markAsChanged","productRemove","changeOffer","innerCancel","onCustomEvent","getManualOpportunityValue","popup","EditorAuxiliaryDialog","getById","close","title","messages","manualOpportunityChangeModeTitle","content","manualOpportunityChangeModeText","zIndex","overlay","buttons","id","DialogButtonType","accept","text","manualOpportunityChangeModeYes","callback","getDialog","setManualOpportunity","doAdjustTotals","cancel","manualOpportunityChangeModeNo","open","setField","currencyFormat","totalCost","enableNotification","getControlByIdRecursive","EntityEditorMoney","setHasRelatedProducts","doAdjustLocks","lockField","unlockField","rollback","_isChanged","sender","getMode","EntityEditorMode","edit","addControlChangeListener","removeControlChangeListener","params","getString","field","isManual","isItemOpened","manualOpportunityConfirmationTitle","manualOpportunityConfirmationText","manualOpportunityConfirmationYes","manualOpportunityConfirmationNo","actionUpdateTotalData","settings","self","initialize"],"mappings":"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","file":"product-list.map.js"}