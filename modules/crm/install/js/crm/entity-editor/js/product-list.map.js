{"version":3,"sources":["product-list.js"],"names":["BX","namespace","Crm","EntityProductListController","superclass","constructor","apply","this","productList","currencyId","_isManualOpportunity","_prevProductCount","_curProductCount","_editorModeChangeHandler","onEditorModeChange","bind","_editorControlChangeHandler","onEditorControlChange","extend","UI","EntityEditorController","prototype","doInitialize","Currency","setCurrencies","prop","getArray","_config","addCustomEvent","window","handleSetProductList","onTabShow","_editor","addModeChangeListener","_currencyId","_model","getField","setTimeout","delegate","opportunityControl","getOpportunityControl","addChangeAmountEditModeListener","onchangeAmountEditMode","getCurrencyId","tab","getId","handleOnTabShow","event","getData","setProductList","notifyOpportunityControl","getProductListId","getConfigStringParam","reinitializeProductList","reloadGrid","getProductList","destroy","setController","setForm","getFormElement","changeCurrencyId","getProductCount","adjustLocks","clearProductList","onAfterSave","_manualOpportunityHiddenInput","Dom","remove","removeFormFields","onBeforeSubmit","form","isManualOpportunity","findChild","tagName","attr","name","create","attrs","type","value","appendChild","isChanged","isNew","compileProductData","changeSumTotal","totals","needMarkAsChanged","adjustTotals","_toolPanel","enableSaveButton","productAdd","productChange","disableSaveButton","markAsChanged","productRemove","changeOffer","innerCancel","onCustomEvent","getManualOpportunityValue","popup","EditorAuxiliaryDialog","getById","close","title","messages","manualOpportunityChangeModeTitle","content","manualOpportunityChangeModeText","zIndex","overlay","buttons","id","DialogButtonType","accept","text","manualOpportunityChangeModeYes","callback","getDialog","setManualOpportunity","doAdjustTotals","cancel","manualOpportunityChangeModeNo","open","setField","currencyFormat","totalCost","enableNotification","getControlByIdRecursive","EntityEditorMoney","setHasRelatedProducts","doAdjustLocks","wasProductsInitiated","lockField","unlockField","rollback","_isChanged","sender","getMode","EntityEditorMode","edit","addControlChangeListener","removeControlChangeListener","params","getString","field","isManual","isItemOpened","manualOpportunityConfirmationTitle","manualOpportunityConfirmationText","manualOpportunityConfirmationYes","manualOpportunityConfirmationNo","actionUpdateTotalData","settings","self","initialize"],"mappings":"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","file":"product-list.map.js"}