{"version":3,"sources":["product-list.js"],"names":["BX","namespace","Crm","EntityProductListController","superclass","constructor","apply","this","productList","currencyId","_isManualOpportunity","_prevProductCount","_curProductCount","_editorModeChangeHandler","onEditorModeChange","bind","_editorControlChangeHandler","onEditorControlChange","extend","UI","EntityEditorController","prototype","doInitialize","Currency","setCurrencies","prop","getArray","_config","addCustomEvent","window","handleSetProductList","onTabShow","delegate","onEntityProgressSave","_editor","addModeChangeListener","_currencyId","_model","getField","setTimeout","opportunityControl","getOpportunityControl","addChangeAmountEditModeListener","onchangeAmountEditMode","getCurrencyId","tab","getId","handleOnTabShow","sender","data","semantic","getString","reinitializeProductList","event","getData","setProductList","notifyOpportunityControl","getProductListId","getConfigStringParam","reloadGrid","getProductList","destroy","setController","setForm","getFormElement","changeCurrencyId","getProductCount","adjustLocks","clearProductList","onAfterSave","_manualOpportunityHiddenInput","Dom","remove","removeFormFields","onBeforeSubmit","form","isManualOpportunity","findChild","tagName","attr","name","create","attrs","type","value","appendChild","isChanged","isNew","compileProductData","changeSumTotal","totals","needMarkAsChanged","enableSaveButton","adjustTotals","validate","validateSubmit","_toolPanel","disableSaveButton","productAdd","productChange","markAsChanged","productRemove","changeOffer","innerCancel","onCustomEvent","getManualOpportunityValue","popup","EditorAuxiliaryDialog","getById","close","title","messages","manualOpportunityChangeModeTitle","content","manualOpportunityChangeModeText","zIndex","overlay","buttons","id","DialogButtonType","accept","text","manualOpportunityChangeModeYes","callback","getDialog","setManualOpportunity","doAdjustTotals","cancel","manualOpportunityChangeModeNo","open","setField","currencyFormat","totalCost","enableNotification","getControlByIdRecursive","EntityEditorMoney","setHasRelatedProducts","doAdjustLocks","wasProductsInitiated","lockField","unlockField","rollback","_isChanged","getMode","EntityEditorMode","edit","addControlChangeListener","removeControlChangeListener","params","field","isManual","isItemOpened","manualOpportunityConfirmationTitle","manualOpportunityConfirmationText","manualOpportunityConfirmationYes","manualOpportunityConfirmationNo","actionUpdateTotalData","settings","self","initialize"],"mappings":"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","file":"product-list.map.js"}