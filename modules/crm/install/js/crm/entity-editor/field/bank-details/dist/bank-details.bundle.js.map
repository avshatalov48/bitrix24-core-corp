{"version":3,"file":"bank-details.bundle.js","sources":["../src/bank-details.js"],"sourcesContent":["import {EntityEditorFieldsetField} from \"crm.entity-editor.field.fieldset\";\nimport {BaseEvent, EventEmitter} from \"main.core.events\";\nimport {Loc, Tag, Type} from \"main.core\";\n\nexport class EntityEditorBankDetailsField extends EntityEditorFieldsetField\n{\n\tgetAddButton()\n\t{\n\t\treturn Tag.render`\n\t\t<div class=\"ui-entity-editor-container-actions\">\n\t\t\t<span>${Loc.getMessage('CRM_EDITOR_REQUISITE_BANK_DETAILS_ADD_LABEL')}</span>\n\t\t\t<span class=\"ui-entity-editor-content-create-lnk\" onclick=\"${this.onAddButtonClick.bind(this)}\">${Loc.getMessage('CRM_EDITOR_REQUISITE_BANK_DETAILS_ADD_LINK_TEXT')}</span>\n\t\t</div>`;\n\t}\n\n\tonAddButtonClick()\n\t{\n\t\tthis.addEmptyValue({scrollToTop: true});\n\t}\n\n\taddEmptyValue(options)\n\t{\n\t\tlet editor = super.addEmptyValue(options);\n\t\tif (BX.prop.getBoolean(options, 'scrollToTop', false))\n\t\t{\n\t\t\tsetTimeout(() =>\n\t\t\t{\n\t\t\t\tlet container = editor.getContainer();\n\t\t\t\tif (Type.isDomNode(container))\n\t\t\t\t{\n\t\t\t\t\tlet pos = BX.pos(container);\n\t\t\t\t\tlet startPos = window.pageYOffset;\n\t\t\t\t\tlet finishPos = pos.top - 15;\n\t\t\t\t\tlet reverseDirection = startPos > finishPos;\n\t\t\t\t\tif (reverseDirection)\n\t\t\t\t\t{\n\t\t\t\t\t\tstartPos = -startPos;\n\t\t\t\t\t\tfinishPos = -finishPos;\n\t\t\t\t\t}\n\n\t\t\t\t\tnew BX.easing({\n\t\t\t\t\t\tduration: 500,\n\t\t\t\t\t\tstart: {top: startPos},\n\t\t\t\t\t\tfinish: {top: finishPos},\n\t\t\t\t\t\ttransition: BX.easing.transitions.quart,\n\t\t\t\t\t\tstep: (state) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\twindow.scrollTo(0, state.top * (reverseDirection ? -1 : 1));\n\t\t\t\t\t\t}\n\t\t\t\t\t}).animate();\n\t\t\t\t}\n\t\t\t}, 10);\n\t\t}\n\t\treturn editor;\n\t}\n}\n\nEventEmitter.subscribe('BX.UI.EntityEditorControlFactory:onInitialize', (event: BaseEvent) =>\n{\n\tlet data = event.getData();\n\tif (data[0])\n\t{\n\t\tdata[0].methods[\"bankDetails\"] = function(type, controlId, settings)\n\t\t{\n\t\t\tif (type === \"bankDetails\")\n\t\t\t{\n\t\t\t\treturn EntityEditorBankDetailsField.create(controlId, settings);\n\t\t\t}\n\t\t\treturn null;\n\t\t};\n\t}\n\tevent.setData(data);\n});"],"names":["EntityEditorBankDetailsField","Tag","render","Loc","getMessage","onAddButtonClick","bind","addEmptyValue","scrollToTop","options","editor","BX","prop","getBoolean","setTimeout","container","getContainer","Type","isDomNode","pos","startPos","window","pageYOffset","finishPos","top","reverseDirection","easing","duration","start","finish","transition","transitions","quart","step","state","scrollTo","animate","EntityEditorFieldsetField","EventEmitter","subscribe","event","data","getData","methods","type","controlId","settings","create","setData"],"mappings":";;;;;KAIaA,4BAAb;GAAA;;GAAA;KAAA;KAAA;;;GAAA;KAAA;KAAA,+BAGC;OACC,OAAOC,aAAG,CAACC,MAAX,uQAESC,aAAG,CAACC,UAAJ,CAAe,6CAAf,CAFT,EAG8D,KAAKC,gBAAL,CAAsBC,IAAtB,CAA2B,IAA3B,CAH9D,EAGmGH,aAAG,CAACC,UAAJ,CAAe,iDAAf,CAHnG;;;KAJF;KAAA,mCAYC;OACC,KAAKG,aAAL,CAAmB;SAACC,WAAW,EAAE;QAAjC;;;KAbF;KAAA,8BAgBeC,OAhBf,EAiBC;OACC,IAAIC,MAAM,2HAAuBD,OAAvB,CAAV;;OACA,IAAIE,EAAE,CAACC,IAAH,CAAQC,UAAR,CAAmBJ,OAAnB,EAA4B,aAA5B,EAA2C,KAA3C,CAAJ,EACA;SACCK,UAAU,CAAC,YACX;WACC,IAAIC,SAAS,GAAGL,MAAM,CAACM,YAAP,EAAhB;;WACA,IAAIC,cAAI,CAACC,SAAL,CAAeH,SAAf,CAAJ,EACA;aACC,IAAII,GAAG,GAAGR,EAAE,CAACQ,GAAH,CAAOJ,SAAP,CAAV;aACA,IAAIK,QAAQ,GAAGC,MAAM,CAACC,WAAtB;aACA,IAAIC,SAAS,GAAGJ,GAAG,CAACK,GAAJ,GAAU,EAA1B;aACA,IAAIC,gBAAgB,GAAGL,QAAQ,GAAGG,SAAlC;;aACA,IAAIE,gBAAJ,EACA;eACCL,QAAQ,GAAG,CAACA,QAAZ;eACAG,SAAS,GAAG,CAACA,SAAb;;;aAGD,IAAIZ,EAAE,CAACe,MAAP,CAAc;eACbC,QAAQ,EAAE,GADG;eAEbC,KAAK,EAAE;iBAACJ,GAAG,EAAEJ;gBAFA;eAGbS,MAAM,EAAE;iBAACL,GAAG,EAAED;gBAHD;eAIbO,UAAU,EAAEnB,EAAE,CAACe,MAAH,CAAUK,WAAV,CAAsBC,KAJrB;eAKbC,IAAI,EAAE,cAACC,KAAD,EACN;iBACCb,MAAM,CAACc,QAAP,CAAgB,CAAhB,EAAmBD,KAAK,CAACV,GAAN,IAAaC,gBAAgB,GAAG,CAAC,CAAJ,GAAQ,CAArC,CAAnB;;cAPF,EASGW,OATH;;UAfQ,EA0BP,EA1BO,CAAV;;;OA4BD,OAAO1B,MAAP;;;GAjDF;CAAA,EAAkD2B,yDAAlD;AAqDAC,8BAAY,CAACC,SAAb,CAAuB,+CAAvB,EAAwE,UAACC,KAAD,EACxE;GACC,IAAIC,IAAI,GAAGD,KAAK,CAACE,OAAN,EAAX;;GACA,IAAID,IAAI,CAAC,CAAD,CAAR,EACA;KACCA,IAAI,CAAC,CAAD,CAAJ,CAAQE,OAAR,CAAgB,aAAhB,IAAiC,UAASC,IAAT,EAAeC,SAAf,EAA0BC,QAA1B,EACjC;OACC,IAAIF,IAAI,KAAK,aAAb,EACA;SACC,OAAO5C,4BAA4B,CAAC+C,MAA7B,CAAoCF,SAApC,EAA+CC,QAA/C,CAAP;;;OAED,OAAO,IAAP;MAND;;;GASDN,KAAK,CAACQ,OAAN,CAAcP,IAAd;CACA,CAfD;;;;;;;;"}