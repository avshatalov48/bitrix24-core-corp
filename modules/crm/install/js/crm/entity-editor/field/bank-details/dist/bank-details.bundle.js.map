{"version":3,"file":"bank-details.bundle.js","sources":["../src/bank-details.js"],"sourcesContent":["import {EntityEditorFieldsetField} from \"crm.entity-editor.field.fieldset\";\nimport {BaseEvent, EventEmitter} from \"main.core.events\";\nimport {Loc, Tag, Type} from \"main.core\";\n\nexport class EntityEditorBankDetailsField extends EntityEditorFieldsetField\n{\n\tgetAddButton()\n\t{\n\t\treturn Tag.render`\n\t\t<div class=\"ui-entity-editor-container-actions\">\n\t\t\t<span>${Loc.getMessage('CRM_EDITOR_REQUISITE_BANK_DETAILS_ADD_LABEL')}</span><span> </span>\n\t\t\t<span class=\"ui-entity-editor-content-create-lnk\" onclick=\"${this.onAddButtonClick.bind(this)}\">${Loc.getMessage('CRM_EDITOR_REQUISITE_BANK_DETAILS_ADD_LINK_TEXT')}</span>\n\t\t</div>`;\n\t}\n\n\tonAddButtonClick()\n\t{\n\t\tthis.addEmptyValue({scrollToTop: true});\n\t}\n\n\taddEmptyValue(options)\n\t{\n\t\tlet editor = super.addEmptyValue(options);\n\t\tif (BX.prop.getBoolean(options, 'scrollToTop', false))\n\t\t{\n\t\t\tsetTimeout(() =>\n\t\t\t{\n\t\t\t\tlet container = editor.getContainer();\n\t\t\t\tif (Type.isDomNode(container))\n\t\t\t\t{\n\t\t\t\t\tlet pos = BX.pos(container);\n\t\t\t\t\tlet startPos = window.pageYOffset;\n\t\t\t\t\tlet finishPos = pos.top - 15;\n\t\t\t\t\tlet reverseDirection = startPos > finishPos;\n\t\t\t\t\tif (reverseDirection)\n\t\t\t\t\t{\n\t\t\t\t\t\tstartPos = -startPos;\n\t\t\t\t\t\tfinishPos = -finishPos;\n\t\t\t\t\t}\n\n\t\t\t\t\tnew BX.easing({\n\t\t\t\t\t\tduration: 500,\n\t\t\t\t\t\tstart: {top: startPos},\n\t\t\t\t\t\tfinish: {top: finishPos},\n\t\t\t\t\t\ttransition: BX.easing.transitions.quart,\n\t\t\t\t\t\tstep: (state) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\twindow.scrollTo(0, state.top * (reverseDirection ? -1 : 1));\n\t\t\t\t\t\t}\n\t\t\t\t\t}).animate();\n\t\t\t\t}\n\t\t\t}, 10);\n\t\t}\n\t\treturn editor;\n\t}\n\n\tgetResolverProperty()\n\t{\n\t\treturn BX.prop.getArray(this.getSchemeElement().getData(), 'resolverProperty', {});\n\t}\n\n\tprepareEntityEditorContext()\n\t{\n\t\tconst context = super.prepareEntityEditorContext();\n\n\t\tconst schemeData = this.getSchemeElement().getData();\n\t\tconst resolverProperty = BX.prop.getObject(schemeData, \"resolverProperty\", null)\n\t\tif (resolverProperty)\n\t\t{\n\t\t\tcontext[\"resolverProperty\"] = resolverProperty;\n\t\t}\n\n\t\treturn context;\n\t}\n}\n\nEventEmitter.subscribe('BX.UI.EntityEditorControlFactory:onInitialize', (event: BaseEvent) =>\n{\n\tlet data = event.getData();\n\tif (data[0])\n\t{\n\t\tdata[0].methods[\"bankDetails\"] = function(type, controlId, settings)\n\t\t{\n\t\t\tif (type === \"bankDetails\")\n\t\t\t{\n\t\t\t\treturn EntityEditorBankDetailsField.create(controlId, settings);\n\t\t\t}\n\t\t\treturn null;\n\t\t};\n\t}\n\tevent.setData(data);\n});"],"names":["EntityEditorBankDetailsField","Tag","render","Loc","getMessage","onAddButtonClick","bind","addEmptyValue","scrollToTop","options","editor","BX","prop","getBoolean","setTimeout","container","getContainer","Type","isDomNode","pos","startPos","window","pageYOffset","finishPos","top","reverseDirection","easing","duration","start","finish","transition","transitions","quart","step","state","scrollTo","animate","getArray","getSchemeElement","getData","context","schemeData","resolverProperty","getObject","EntityEditorFieldsetField","EventEmitter","subscribe","event","data","methods","type","controlId","settings","create","setData"],"mappings":"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"}