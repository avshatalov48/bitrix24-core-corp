{"version":3,"file":"bank-details.bundle.js","sources":["../src/bank-details.js"],"sourcesContent":["import {EntityEditorFieldsetField} from \"crm.entity-editor.field.fieldset\";\nimport {BaseEvent, EventEmitter} from \"main.core.events\";\nimport {Loc, Tag, Type} from \"main.core\";\n\nexport class EntityEditorBankDetailsField extends EntityEditorFieldsetField\n{\n\tgetAddButton()\n\t{\n\t\treturn Tag.render`\n\t\t<div class=\"ui-entity-editor-container-actions\">\n\t\t\t<span>${Loc.getMessage('CRM_EDITOR_REQUISITE_BANK_DETAILS_ADD_LABEL')}</span>\n\t\t\t<span class=\"ui-entity-editor-content-create-lnk\" onclick=\"${this.onAddButtonClick.bind(this)}\">${Loc.getMessage('CRM_EDITOR_REQUISITE_BANK_DETAILS_ADD_LINK_TEXT')}</span>\n\t\t</div>`;\n\t}\n\n\tonAddButtonClick()\n\t{\n\t\tthis.addEmptyValue({scrollToTop: true});\n\t}\n\n\taddEmptyValue(options)\n\t{\n\t\tlet editor = super.addEmptyValue(options);\n\t\tif (BX.prop.getBoolean(options, 'scrollToTop', false))\n\t\t{\n\t\t\tsetTimeout(() =>\n\t\t\t{\n\t\t\t\tlet container = editor.getContainer();\n\t\t\t\tif (Type.isDomNode(container))\n\t\t\t\t{\n\t\t\t\t\tlet pos = BX.pos(container);\n\t\t\t\t\tlet startPos = window.pageYOffset;\n\t\t\t\t\tlet finishPos = pos.top - 15;\n\t\t\t\t\tlet reverseDirection = startPos > finishPos;\n\t\t\t\t\tif (reverseDirection)\n\t\t\t\t\t{\n\t\t\t\t\t\tstartPos = -startPos;\n\t\t\t\t\t\tfinishPos = -finishPos;\n\t\t\t\t\t}\n\n\t\t\t\t\tnew BX.easing({\n\t\t\t\t\t\tduration: 500,\n\t\t\t\t\t\tstart: {top: startPos},\n\t\t\t\t\t\tfinish: {top: finishPos},\n\t\t\t\t\t\ttransition: BX.easing.transitions.quart,\n\t\t\t\t\t\tstep: (state) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\twindow.scrollTo(0, state.top * (reverseDirection ? -1 : 1));\n\t\t\t\t\t\t}\n\t\t\t\t\t}).animate();\n\t\t\t\t}\n\t\t\t}, 10);\n\t\t}\n\t\treturn editor;\n\t}\n}\n\nEventEmitter.subscribe('BX.UI.EntityEditorControlFactory:onInitialize', (event: BaseEvent) =>\n{\n\tlet data = event.getData();\n\tif (data[0])\n\t{\n\t\tdata[0].methods[\"bankDetails\"] = function(type, controlId, settings)\n\t\t{\n\t\t\tif (type === \"bankDetails\")\n\t\t\t{\n\t\t\t\treturn EntityEditorBankDetailsField.create(controlId, settings);\n\t\t\t}\n\t\t\treturn null;\n\t\t};\n\t}\n\tevent.setData(data);\n});"],"names":["EntityEditorBankDetailsField","Tag","render","Loc","getMessage","onAddButtonClick","bind","addEmptyValue","scrollToTop","options","editor","BX","prop","getBoolean","setTimeout","container","getContainer","Type","isDomNode","pos","startPos","window","pageYOffset","finishPos","top","reverseDirection","easing","duration","start","finish","transition","transitions","quart","step","state","scrollTo","animate","EntityEditorFieldsetField","EventEmitter","subscribe","event","data","getData","methods","type","controlId","settings","create","setData"],"mappings":";;;;;;;;;;;;;KAIaA,4BAAb;CAAA;;CAAA;CAAA;CAAA;CAAA;;CAAA;CAAA;CAAA,mCAGC;CACC,aAAOC,aAAG,CAACC,MAAX,oBAESC,aAAG,CAACC,UAAJ,CAAe,6CAAf,CAFT,EAG8D,KAAKC,gBAAL,CAAsBC,IAAtB,CAA2B,IAA3B,CAH9D,EAGmGH,aAAG,CAACC,UAAJ,CAAe,iDAAf,CAHnG;CAKA;CATF;CAAA;CAAA,uCAYC;CACC,WAAKG,aAAL,CAAmB;CAACC,QAAAA,WAAW,EAAE;CAAd,OAAnB;CACA;CAdF;CAAA;CAAA,kCAgBeC,OAhBf,EAiBC;CACC,UAAIC,MAAM,2HAAuBD,OAAvB,CAAV;;CACA,UAAIE,EAAE,CAACC,IAAH,CAAQC,UAAR,CAAmBJ,OAAnB,EAA4B,aAA5B,EAA2C,KAA3C,CAAJ,EACA;CACCK,QAAAA,UAAU,CAAC,YACX;CACC,cAAIC,SAAS,GAAGL,MAAM,CAACM,YAAP,EAAhB;;CACA,cAAIC,cAAI,CAACC,SAAL,CAAeH,SAAf,CAAJ,EACA;CACC,gBAAII,GAAG,GAAGR,EAAE,CAACQ,GAAH,CAAOJ,SAAP,CAAV;CACA,gBAAIK,QAAQ,GAAGC,MAAM,CAACC,WAAtB;CACA,gBAAIC,SAAS,GAAGJ,GAAG,CAACK,GAAJ,GAAU,EAA1B;CACA,gBAAIC,gBAAgB,GAAGL,QAAQ,GAAGG,SAAlC;;CACA,gBAAIE,gBAAJ,EACA;CACCL,cAAAA,QAAQ,GAAG,CAACA,QAAZ;CACAG,cAAAA,SAAS,GAAG,CAACA,SAAb;CACA;;CAED,gBAAIZ,EAAE,CAACe,MAAP,CAAc;CACbC,cAAAA,QAAQ,EAAE,GADG;CAEbC,cAAAA,KAAK,EAAE;CAACJ,gBAAAA,GAAG,EAAEJ;CAAN,eAFM;CAGbS,cAAAA,MAAM,EAAE;CAACL,gBAAAA,GAAG,EAAED;CAAN,eAHK;CAIbO,cAAAA,UAAU,EAAEnB,EAAE,CAACe,MAAH,CAAUK,WAAV,CAAsBC,KAJrB;CAKbC,cAAAA,IAAI,EAAE,cAACC,KAAD,EACN;CACCb,gBAAAA,MAAM,CAACc,QAAP,CAAgB,CAAhB,EAAmBD,KAAK,CAACV,GAAN,IAAaC,gBAAgB,GAAG,CAAC,CAAJ,GAAQ,CAArC,CAAnB;CACA;CARY,aAAd,EASGW,OATH;CAUA;CACD,SA1BS,EA0BP,EA1BO,CAAV;CA2BA;;CACD,aAAO1B,MAAP;CACA;CAlDF;CAAA;CAAA,EAAkD2B,yDAAlD;AAqDAC,8BAAY,CAACC,SAAb,CAAuB,+CAAvB,EAAwE,UAACC,KAAD,EACxE;CACC,MAAIC,IAAI,GAAGD,KAAK,CAACE,OAAN,EAAX;;CACA,MAAID,IAAI,CAAC,CAAD,CAAR,EACA;CACCA,IAAAA,IAAI,CAAC,CAAD,CAAJ,CAAQE,OAAR,CAAgB,aAAhB,IAAiC,UAASC,IAAT,EAAeC,SAAf,EAA0BC,QAA1B,EACjC;CACC,UAAIF,IAAI,KAAK,aAAb,EACA;CACC,eAAO5C,4BAA4B,CAAC+C,MAA7B,CAAoCF,SAApC,EAA+CC,QAA/C,CAAP;CACA;;CACD,aAAO,IAAP;CACA,KAPD;CAQA;;CACDN,EAAAA,KAAK,CAACQ,OAAN,CAAcP,IAAd;CACA,CAfD;;;;;;;;"}