{"version":3,"file":"address.bundle.js","sources":["../src/address.js"],"sourcesContent":["import {EntityEditorBaseAddressField} from \"crm.entity-editor.field.address.base\";\nimport {Event, Tag, Dom, Type} from \"main.core\";\nimport {EventEmitter} from \"main.core.events\";\n\nexport class EntityEditorAddressField extends BX.Crm.EntityEditorField\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis._field = null;\n\t\tthis._isMultiple = null;\n\t\tthis._autocompleteEnabled = false;\n\t\tthis._restrictionsCallback = null;\n\t}\n\n\tinitialize(id, settings)\n\t{\n\t\tsuper.initialize(id, settings);\n\n\t\tlet params = this._schemeElement.getData();\n\t\tthis._isMultiple = BX.prop.getBoolean(params, \"multiple\", false);\n\n\t\tthis._autocompleteEnabled = BX.prop.getBoolean(params, \"autocompleteEnabled\", false);\n\t\tif (!this._autocompleteEnabled)\n\t\t{\n\t\t\tthis._restrictionsCallback = BX.prop.getString(params, \"featureRestrictionCallback\", '');\n\t\t}\n\n\t\tsettings = Type.isPlainObject(settings) ? settings : {};\n\t\tsettings.crmCompatibilityMode = true;\n\t\tsettings.enableAutocomplete = this._autocompleteEnabled;\n\t\tsettings.hideDefaultAddressType = this._isMultiple; // hide for multiple addresses only\n\t\tsettings.showAddressTypeInViewMode = this._isMultiple; //for multiple addresses only\n\t\tsettings.addressZoneConfig = BX.prop.getObject(params, \"addressZoneConfig\", {});\n\t\tsettings.countryId = 0;\n\t\tthis._field = EntityEditorBaseAddressField.create(id, settings);\n\t\tthis._field.setMultiple(this._isMultiple);\n\t\tif (this._isMultiple)\n\t\t{\n\t\t\tthis._field.setTypesList(BX.prop.getObject(params, \"types\", {}));\n\t\t}\n\t\tEventEmitter.subscribe(this._field, 'onUpdate', this.onAddressListUpdate.bind(this));\n\t\tEventEmitter.subscribe(this._field, 'onStartLoadAddress', this.onStartLoadAddress.bind(this));\n\t\tEventEmitter.subscribe(this._field, 'onAddressLoaded', this.onAddressLoaded.bind(this));\n\t\tEventEmitter.subscribe(this._field, 'onAddressDataInputting', this.onAddressDataInputting.bind(this));\n\t\tEventEmitter.subscribe(this._field, 'onError', this.onError.bind(this));\n\n\t\tthis.initializeFromModel();\n\t}\n\n\tsetupFromModel(model, options)\n\t{\n\t\tsuper.setupFromModel(model, options);\n\t\tthis.initializeFromModel();\n\t}\n\n\tinitializeFromModel()\n\t{\n\t\tthis.setAddressList(this.getValue(this._isMultiple ? {} : \"\"));\n\t}\n\n\tsetAddressList(addressList)\n\t{\n\t\tif (this._field.setValue(addressList))\n\t\t{\n\t\t\tthis.refreshLayout();\n\t\t}\n\t}\n\n\tgetCountryId()\n\t{\n\t\treturn this._field.getCountryId();\n\t}\n\n\tsetCountryId(countryId)\n\t{\n\t\tthis._field.setCountryId(countryId);\n\t}\n\n\tlayout(options)\n\t{\n\t\tif (this._hasLayout)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.ensureWrapperCreated({classNames: [\"crm-entity-widget-content-block-field-address\"]});\n\t\tthis.adjustWrapper();\n\n\t\tif (!this.isNeedToDisplay())\n\t\t{\n\t\t\tthis.registerLayout(options);\n\t\t\tthis._hasLayout = true;\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.isDragEnabled())\n\t\t{\n\t\t\tDom.append(this.createDragButton(), this._wrapper);\n\t\t}\n\n\t\tDom.append(this.createTitleNode(this.getTitle()), this._wrapper);\n\n\t\tif (!this.hasValue() && this._mode === BX.UI.EntityEditorMode.view)\n\t\t{\n\t\t\tDom.append(\n\t\t\t\tTag.render`\n\t\t\t\t\t<div class=\"ui-entity-editor-content-block\" onclick=\"${this.onViewModeClick.bind(this)}\">\n\t\t\t\t\t\t${BX.UI.EntityEditorField.messages.isEmpty}\n\t\t\t\t\t</div>`,\n\t\t\t\tthis._wrapper\n\t\t\t);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tlet fieldContainer = this._field.layout(this._mode === BX.UI.EntityEditorMode.edit);\n\t\t\tfieldContainer.classList.add('ui-entity-editor-content-block');\n\t\t\tif (this._mode === BX.UI.EntityEditorMode.view)\n\t\t\t{\n\t\t\t\tEvent.bind(fieldContainer, 'click', this.onViewModeClick.bind(this));\n\t\t\t}\n\t\t\tDom.append(fieldContainer, this._wrapper);\n\t\t}\n\n\t\tif (this.isContextMenuEnabled())\n\t\t{\n\t\t\tthis._wrapper.appendChild(this.createContextMenuButton());\n\t\t}\n\n\t\tif (this.isDragEnabled())\n\t\t{\n\t\t\tthis.initializeDragDropAbilities();\n\t\t}\n\n\t\tthis.registerLayout(options);\n\t\tthis._hasLayout = true;\n\t}\n\n\treset()\n\t{\n\t\tsuper.reset();\n\t\tthis.initializeFromModel();\n\t}\n\n\tdoClearLayout(options)\n\t{\n\t\tif (BX.prop.getBoolean(options, \"release\", false))\n\t\t{\n\t\t\tthis._field.release();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis._field.resetView();\n\t\t}\n\t}\n\n\thasContentToDisplay()\n\t{\n\t\treturn this.hasValue();\n\t}\n\n\thasValue()\n\t{\n\t\tif (!Type.isObject(this._field))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\t\treturn this._isMultiple ?\n\t\t\t!!(this._field.getValue().filter((item) => Type.isStringFilled(item.value)).length) :\n\t\t\t!!this._field.getValue();\n\t}\n\n\tcreateTitleMarker()\n\t{\n\t\tif(this._mode === BX.Crm.EntityEditorMode.view)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tif (this._restrictionsCallback && this._restrictionsCallback.length)\n\t\t{\n\t\t\tlet lockIcon = Tag.render` <span class=\"tariff-lock\"></span>`;\n\t\t\tlockIcon.setAttribute('onclick', this._restrictionsCallback);\n\t\t\treturn lockIcon;\n\t\t}\n\n\t\treturn super.createTitleMarker();\n\t}\n\n\trollback()\n\t{\n\t\tthis.initializeFromModel();\n\t}\n\n\tsave()\n\t{\n\t\tif (this.isVirtual())\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tif (!Type.isDomNode(this._wrapper))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._isMultiple)\n\t\t{\n\t\t\tlet fieldNamePrefix = this.getName();\n\t\t\tfor (let address of this._field.getValue())\n\t\t\t{\n\t\t\t\tlet type = address.type;\n\t\t\t\tlet value = address.value;\n\t\t\t\tlet name = `${fieldNamePrefix}[${type}]`;\n\n\t\t\t\tlet node = Tag.render`<input type=\"hidden\">`;\n\t\t\t\tnode.name = name;\n\t\t\t\tnode.value = value;\n\t\t\t\tDom.append(node, this._wrapper);\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tlet address = this._field.getValue();\n\t\t\tlet node = Tag.render`<input type=\"hidden\">`;\n\t\t\tnode.name = this.getName();\n\t\t\tnode.value = (address ? address : \"\");\n\t\t\tDom.append(node, this._wrapper);\n\t\t}\n\t}\n\n\tonViewModeClick()\n\t{\n\t\tif (!this.getEditor().isReadOnly())\n\t\t{\n\t\t\tthis.switchToSingleEditMode();\n\t\t}\n\t}\n\n\tonAddressListUpdate(event)\n\t{\n\t\tthis.markAsChanged();\n\t}\n\n\tonStartLoadAddress()\n\t{\n\t\tlet toolPanel = this.getEditor()._toolPanel;\n\t\tif (toolPanel)\n\t\t{\n\t\t\ttoolPanel.setLocked(true);\n\t\t}\n\t}\n\n\tonAddressLoaded()\n\t{\n\t\tlet toolPanel = this.getEditor()._toolPanel;\n\t\tif (toolPanel)\n\t\t{\n\t\t\ttoolPanel.setLocked(false);\n\t\t}\n\t}\n\n\tonAddressDataInputting()\n\t{\n\t\t\tthis.markAsChanged();\n\t}\n\n\tonError(event)\n\t{\n\t\tconst data = event.getData();\n\t\tthis.showError(data.error);\n\n\t\tconst toolPanel = this.getEditor()._toolPanel;\n\t\tif (toolPanel)\n\t\t{\n\t\t\ttoolPanel.setLocked(false);\n\t\t}\n\t}\n\n\tstatic create(id, settings)\n\t{\n\t\tlet self = new this(id, settings);\n\t\tself.initialize(id, settings);\n\t\treturn self;\n\t}\n}\n"],"names":["EntityEditorAddressField","_field","_isMultiple","_autocompleteEnabled","_restrictionsCallback","id","settings","params","_schemeElement","getData","BX","prop","getBoolean","getString","Type","isPlainObject","crmCompatibilityMode","enableAutocomplete","hideDefaultAddressType","showAddressTypeInViewMode","addressZoneConfig","getObject","countryId","EntityEditorBaseAddressField","create","setMultiple","setTypesList","EventEmitter","subscribe","onAddressListUpdate","bind","onStartLoadAddress","onAddressLoaded","onAddressDataInputting","onError","initializeFromModel","model","options","setAddressList","getValue","addressList","setValue","refreshLayout","getCountryId","setCountryId","_hasLayout","ensureWrapperCreated","classNames","adjustWrapper","isNeedToDisplay","registerLayout","isDragEnabled","Dom","append","createDragButton","_wrapper","createTitleNode","getTitle","hasValue","_mode","UI","EntityEditorMode","view","Tag","render","onViewModeClick","EntityEditorField","messages","isEmpty","fieldContainer","layout","edit","classList","add","Event","isContextMenuEnabled","appendChild","createContextMenuButton","initializeDragDropAbilities","release","resetView","isObject","filter","item","isStringFilled","value","length","Crm","lockIcon","setAttribute","isVirtual","isDomNode","fieldNamePrefix","getName","address","type","name","node","getEditor","isReadOnly","switchToSingleEditMode","event","markAsChanged","toolPanel","_toolPanel","setLocked","data","showError","error","self","initialize"],"mappings":";;;;;;;;;;;KAIaA,wBAAb;GAAA;;GAEC,oCACA;KAAA;;KAAA;KACC;KACA,MAAKC,MAAL,GAAc,IAAd;KACA,MAAKC,WAAL,GAAmB,IAAnB;KACA,MAAKC,oBAAL,GAA4B,KAA5B;KACA,MAAKC,qBAAL,GAA6B,IAA7B;KALD;;;GAHD;KAAA;KAAA,2BAWYC,EAXZ,EAWgBC,QAXhB,EAYC;OACC,iHAAiBD,EAAjB,EAAqBC,QAArB;;OAEA,IAAIC,MAAM,GAAG,KAAKC,cAAL,CAAoBC,OAApB,EAAb;;OACA,KAAKP,WAAL,GAAmBQ,EAAE,CAACC,IAAH,CAAQC,UAAR,CAAmBL,MAAnB,EAA2B,UAA3B,EAAuC,KAAvC,CAAnB;OAEA,KAAKJ,oBAAL,GAA4BO,EAAE,CAACC,IAAH,CAAQC,UAAR,CAAmBL,MAAnB,EAA2B,qBAA3B,EAAkD,KAAlD,CAA5B;;OACA,IAAI,CAAC,KAAKJ,oBAAV,EACA;SACC,KAAKC,qBAAL,GAA6BM,EAAE,CAACC,IAAH,CAAQE,SAAR,CAAkBN,MAAlB,EAA0B,4BAA1B,EAAwD,EAAxD,CAA7B;;;OAGDD,QAAQ,GAAGQ,cAAI,CAACC,aAAL,CAAmBT,QAAnB,IAA+BA,QAA/B,GAA0C,EAArD;OACAA,QAAQ,CAACU,oBAAT,GAAgC,IAAhC;OACAV,QAAQ,CAACW,kBAAT,GAA8B,KAAKd,oBAAnC;OACAG,QAAQ,CAACY,sBAAT,GAAkC,KAAKhB,WAAvC,CAfD;;OAgBCI,QAAQ,CAACa,yBAAT,GAAqC,KAAKjB,WAA1C,CAhBD;;OAiBCI,QAAQ,CAACc,iBAAT,GAA6BV,EAAE,CAACC,IAAH,CAAQU,SAAR,CAAkBd,MAAlB,EAA0B,mBAA1B,EAA+C,EAA/C,CAA7B;OACAD,QAAQ,CAACgB,SAAT,GAAqB,CAArB;OACA,KAAKrB,MAAL,GAAcsB,gEAA4B,CAACC,MAA7B,CAAoCnB,EAApC,EAAwCC,QAAxC,CAAd;;OACA,KAAKL,MAAL,CAAYwB,WAAZ,CAAwB,KAAKvB,WAA7B;;OACA,IAAI,KAAKA,WAAT,EACA;SACC,KAAKD,MAAL,CAAYyB,YAAZ,CAAyBhB,EAAE,CAACC,IAAH,CAAQU,SAAR,CAAkBd,MAAlB,EAA0B,OAA1B,EAAmC,EAAnC,CAAzB;;;OAEDoB,6BAAY,CAACC,SAAb,CAAuB,KAAK3B,MAA5B,EAAoC,UAApC,EAAgD,KAAK4B,mBAAL,CAAyBC,IAAzB,CAA8B,IAA9B,CAAhD;OACAH,6BAAY,CAACC,SAAb,CAAuB,KAAK3B,MAA5B,EAAoC,oBAApC,EAA0D,KAAK8B,kBAAL,CAAwBD,IAAxB,CAA6B,IAA7B,CAA1D;OACAH,6BAAY,CAACC,SAAb,CAAuB,KAAK3B,MAA5B,EAAoC,iBAApC,EAAuD,KAAK+B,eAAL,CAAqBF,IAArB,CAA0B,IAA1B,CAAvD;OACAH,6BAAY,CAACC,SAAb,CAAuB,KAAK3B,MAA5B,EAAoC,wBAApC,EAA8D,KAAKgC,sBAAL,CAA4BH,IAA5B,CAAiC,IAAjC,CAA9D;OACAH,6BAAY,CAACC,SAAb,CAAuB,KAAK3B,MAA5B,EAAoC,SAApC,EAA+C,KAAKiC,OAAL,CAAaJ,IAAb,CAAkB,IAAlB,CAA/C;OAEA,KAAKK,mBAAL;;;KA3CF;KAAA,+BA8CgBC,KA9ChB,EA8CuBC,OA9CvB,EA+CC;OACC,qHAAqBD,KAArB,EAA4BC,OAA5B;OACA,KAAKF,mBAAL;;;KAjDF;KAAA,sCAqDC;OACC,KAAKG,cAAL,CAAoB,KAAKC,QAAL,CAAc,KAAKrC,WAAL,GAAmB,EAAnB,GAAwB,EAAtC,CAApB;;;KAtDF;KAAA,+BAyDgBsC,WAzDhB,EA0DC;OACC,IAAI,KAAKvC,MAAL,CAAYwC,QAAZ,CAAqBD,WAArB,CAAJ,EACA;SACC,KAAKE,aAAL;;;;KA7DH;KAAA,+BAkEC;OACC,OAAO,KAAKzC,MAAL,CAAY0C,YAAZ,EAAP;;;KAnEF;KAAA,6BAsEcrB,SAtEd,EAuEC;OACC,KAAKrB,MAAL,CAAY2C,YAAZ,CAAyBtB,SAAzB;;;KAxEF;KAAA,uBA2EQe,OA3ER,EA4EC;OACC,IAAI,KAAKQ,UAAT,EACA;SACC;;;OAGD,KAAKC,oBAAL,CAA0B;SAACC,UAAU,EAAE,CAAC,+CAAD;QAAvC;OACA,KAAKC,aAAL;;OAEA,IAAI,CAAC,KAAKC,eAAL,EAAL,EACA;SACC,KAAKC,cAAL,CAAoBb,OAApB;SACA,KAAKQ,UAAL,GAAkB,IAAlB;SACA;;;OAGD,IAAI,KAAKM,aAAL,EAAJ,EACA;SACCC,aAAG,CAACC,MAAJ,CAAW,KAAKC,gBAAL,EAAX,EAAoC,KAAKC,QAAzC;;;OAGDH,aAAG,CAACC,MAAJ,CAAW,KAAKG,eAAL,CAAqB,KAAKC,QAAL,EAArB,CAAX,EAAkD,KAAKF,QAAvD;;OAEA,IAAI,CAAC,KAAKG,QAAL,EAAD,IAAoB,KAAKC,KAAL,KAAejD,EAAE,CAACkD,EAAH,CAAMC,gBAAN,CAAuBC,IAA9D,EACA;SACCV,aAAG,CAACC,MAAJ,CACCU,aAAG,CAACC,MADL,iMAEyD,KAAKC,eAAL,CAAqBnC,IAArB,CAA0B,IAA1B,CAFzD,EAGKpB,EAAE,CAACkD,EAAH,CAAMM,iBAAN,CAAwBC,QAAxB,CAAiCC,OAHtC,GAKC,KAAKb,QALN;QAFD,MAWA;SACC,IAAIc,cAAc,GAAG,KAAKpE,MAAL,CAAYqE,MAAZ,CAAmB,KAAKX,KAAL,KAAejD,EAAE,CAACkD,EAAH,CAAMC,gBAAN,CAAuBU,IAAzD,CAArB;;SACAF,cAAc,CAACG,SAAf,CAAyBC,GAAzB,CAA6B,gCAA7B;;SACA,IAAI,KAAKd,KAAL,KAAejD,EAAE,CAACkD,EAAH,CAAMC,gBAAN,CAAuBC,IAA1C,EACA;WACCY,eAAK,CAAC5C,IAAN,CAAWuC,cAAX,EAA2B,OAA3B,EAAoC,KAAKJ,eAAL,CAAqBnC,IAArB,CAA0B,IAA1B,CAApC;;;SAEDsB,aAAG,CAACC,MAAJ,CAAWgB,cAAX,EAA2B,KAAKd,QAAhC;;;OAGD,IAAI,KAAKoB,oBAAL,EAAJ,EACA;SACC,KAAKpB,QAAL,CAAcqB,WAAd,CAA0B,KAAKC,uBAAL,EAA1B;;;OAGD,IAAI,KAAK1B,aAAL,EAAJ,EACA;SACC,KAAK2B,2BAAL;;;OAGD,KAAK5B,cAAL,CAAoBb,OAApB;OACA,KAAKQ,UAAL,GAAkB,IAAlB;;;KAnIF;KAAA,wBAuIC;OACC;OACA,KAAKV,mBAAL;;;KAzIF;KAAA,8BA4IeE,OA5If,EA6IC;OACC,IAAI3B,EAAE,CAACC,IAAH,CAAQC,UAAR,CAAmByB,OAAnB,EAA4B,SAA5B,EAAuC,KAAvC,CAAJ,EACA;SACC,KAAKpC,MAAL,CAAY8E,OAAZ;QAFD,MAKA;SACC,KAAK9E,MAAL,CAAY+E,SAAZ;;;;KApJH;KAAA,sCAyJC;OACC,OAAO,KAAKtB,QAAL,EAAP;;;KA1JF;KAAA,2BA8JC;OACC,IAAI,CAAC5C,cAAI,CAACmE,QAAL,CAAc,KAAKhF,MAAnB,CAAL,EACA;SACC,OAAO,KAAP;;;OAED,OAAO,KAAKC,WAAL,GACN,CAAC,CAAE,KAAKD,MAAL,CAAYsC,QAAZ,GAAuB2C,MAAvB,CAA8B,UAACC,IAAD;SAAA,OAAUrE,cAAI,CAACsE,cAAL,CAAoBD,IAAI,CAACE,KAAzB,CAAV;QAA9B,EAAyEC,MADtE,GAEN,CAAC,CAAC,KAAKrF,MAAL,CAAYsC,QAAZ,EAFH;;;KAnKF;KAAA,oCAyKC;OACC,IAAG,KAAKoB,KAAL,KAAejD,EAAE,CAAC6E,GAAH,CAAO1B,gBAAP,CAAwBC,IAA1C,EACA;SACC,OAAO,IAAP;;;OAGD,IAAI,KAAK1D,qBAAL,IAA8B,KAAKA,qBAAL,CAA2BkF,MAA7D,EACA;SACC,IAAIE,QAAQ,GAAGzB,aAAG,CAACC,MAAP,uHAAZ;SACAwB,QAAQ,CAACC,YAAT,CAAsB,SAAtB,EAAiC,KAAKrF,qBAAtC;SACA,OAAOoF,QAAP;;;OAGD;;;KAtLF;KAAA,2BA0LC;OACC,KAAKrD,mBAAL;;;KA3LF;KAAA,uBA+LC;OACC,IAAI,KAAKuD,SAAL,EAAJ,EACA;SACC;;;OAED,IAAI,CAAC5E,cAAI,CAAC6E,SAAL,CAAe,KAAKpC,QAApB,CAAL,EACA;SACC;;;OAGD,IAAI,KAAKrD,WAAT,EACA;SACC,IAAI0F,eAAe,GAAG,KAAKC,OAAL,EAAtB;;SADD,2CAEqB,KAAK5F,MAAL,CAAYsC,QAAZ,EAFrB;;;SAAA;WAEC,oDACA;aAAA,IADSuD,OACT;aACC,IAAIC,IAAI,GAAGD,OAAO,CAACC,IAAnB;aACA,IAAIV,KAAK,GAAGS,OAAO,CAACT,KAApB;aACA,IAAIW,IAAI,aAAMJ,eAAN,cAAyBG,IAAzB,MAAR;aAEA,IAAIE,IAAI,GAAGlC,aAAG,CAACC,MAAP,0GAAR;aACAiC,IAAI,CAACD,IAAL,GAAYA,IAAZ;aACAC,IAAI,CAACZ,KAAL,GAAaA,KAAb;aACAjC,aAAG,CAACC,MAAJ,CAAW4C,IAAX,EAAiB,KAAK1C,QAAtB;;;WAXF;;WAAA;;QADA,MAgBA;SACC,IAAIuC,QAAO,GAAG,KAAK7F,MAAL,CAAYsC,QAAZ,EAAd;;SACA,IAAI0D,KAAI,GAAGlC,aAAG,CAACC,MAAP,0GAAR;;SACAiC,KAAI,CAACD,IAAL,GAAY,KAAKH,OAAL,EAAZ;SACAI,KAAI,CAACZ,KAAL,GAAcS,QAAO,GAAGA,QAAH,GAAa,EAAlC;SACA1C,aAAG,CAACC,MAAJ,CAAW4C,KAAX,EAAiB,KAAK1C,QAAtB;;;;KA9NH;KAAA,kCAmOC;OACC,IAAI,CAAC,KAAK2C,SAAL,GAAiBC,UAAjB,EAAL,EACA;SACC,KAAKC,sBAAL;;;;KAtOH;KAAA,oCA0OqBC,KA1OrB,EA2OC;OACC,KAAKC,aAAL;;;KA5OF;KAAA,qCAgPC;OACC,IAAIC,SAAS,GAAG,KAAKL,SAAL,GAAiBM,UAAjC;;OACA,IAAID,SAAJ,EACA;SACCA,SAAS,CAACE,SAAV,CAAoB,IAApB;;;;KApPH;KAAA,kCAyPC;OACC,IAAIF,SAAS,GAAG,KAAKL,SAAL,GAAiBM,UAAjC;;OACA,IAAID,SAAJ,EACA;SACCA,SAAS,CAACE,SAAV,CAAoB,KAApB;;;;KA7PH;KAAA,yCAkQC;OACE,KAAKH,aAAL;;;KAnQH;KAAA,wBAsQSD,KAtQT,EAuQC;OACC,IAAMK,IAAI,GAAGL,KAAK,CAAC5F,OAAN,EAAb;OACA,KAAKkG,SAAL,CAAeD,IAAI,CAACE,KAApB;;OAEA,IAAML,SAAS,GAAG,KAAKL,SAAL,GAAiBM,UAAnC;;OACA,IAAID,SAAJ,EACA;SACCA,SAAS,CAACE,SAAV,CAAoB,KAApB;;;;KA9QH;KAAA,uBAkRepG,EAlRf,EAkRmBC,QAlRnB,EAmRC;OACC,IAAIuG,IAAI,GAAG,IAAI,IAAJ,CAASxG,EAAT,EAAaC,QAAb,CAAX;OACAuG,IAAI,CAACC,UAAL,CAAgBzG,EAAhB,EAAoBC,QAApB;OACA,OAAOuG,IAAP;;;GAtRF;CAAA,EAA8CnG,EAAE,CAAC6E,GAAH,CAAOrB,iBAArD;;;;;;;;"}