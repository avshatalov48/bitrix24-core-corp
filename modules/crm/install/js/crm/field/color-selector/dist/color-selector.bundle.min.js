this.BX=this.BX||{};this.BX.Crm=this.BX.Crm||{};(function(e,t,l,a,s){"use strict";var i,r,o,n;function c(e,t){b(e,t);t.add(e)}function d(e,t,l){b(e,t);t.set(e,l)}function b(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function p(e,t,l){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return l}var v={EVENT_COLORSELECTOR_VALUE_CHANGE:"crm.field.colorselector:change"};var h=new WeakMap;var u=new WeakMap;var f=new WeakMap;var m=new WeakMap;var H=new WeakMap;var P=new WeakMap;var F=new WeakMap;var g=new WeakSet;var w=new WeakSet;var C=new WeakSet;var G=new WeakSet;var E=function(){function e(l){babelHelpers.classCallCheck(this,e);c(this,G);c(this,C);c(this,w);c(this,g);d(this,h,{writable:true,value:null});d(this,u,{writable:true,value:[]});d(this,f,{writable:true,value:"default"});d(this,m,{writable:true,value:false});d(this,H,{writable:true,value:null});d(this,P,{writable:true,value:null});d(this,F,{writable:true,value:null});babelHelpers.classPrivateFieldSet(this,h,t.Type.isDomNode(l.target)?l.target:null);babelHelpers.classPrivateFieldSet(this,u,t.Type.isArrayFilled(l.colorList)?l.colorList:[]);babelHelpers.classPrivateFieldSet(this,f,t.Type.isStringFilled(l.selectedColorId)?l.selectedColorId:[]);babelHelpers.classPrivateFieldSet(this,m,l.readOnlyMode===true);this.togglePopup=this.togglePopup.bind(this);p(this,g,S).call(this)}babelHelpers.createClass(e,[{key:"togglePopup",value:function e(){if(babelHelpers.classPrivateFieldGet(this,m)){return}var t=p(this,C,y).call(this);if(t.isShown()){t.close()}else{t.show()}}},{key:"onSelectColor",value:function e(t){p(this,C,y).call(this).close();this.setValue(t);a.EventEmitter.emit(this,v.EVENT_COLORSELECTOR_VALUE_CHANGE,{value:t})}},{key:"setValue",value:function e(l){babelHelpers.classPrivateFieldSet(this,f,l);var a=p(this,w,k).call(this,babelHelpers.classPrivateFieldGet(this,f)).color;t.Dom.style(babelHelpers.classPrivateFieldGet(this,P),{backgroundColor:a});if(!babelHelpers.classPrivateFieldGet(this,F)){return}t.Dom.removeClass(babelHelpers.classPrivateFieldGet(this,F).querySelector(".--selected"),"--selected");var s=babelHelpers.classPrivateFieldGet(this,F).querySelector("#crm-field-color-selector-menu-item-".concat(l));if(s){t.Dom.addClass(s,"--selected")}}},{key:"onKeyUpHandler",value:function e(t){if(t.keyCode===13){var l;(l=babelHelpers.classPrivateFieldGet(this,H))===null||l===void 0?void 0:l.close()}}}]);return e}();function S(){var e=this;if(!babelHelpers.classPrivateFieldGet(this,h)){return}babelHelpers.classPrivateFieldSet(this,P,t.Tag.render(i||(i=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div \n\t\t\t\tclass="crm-field-color-selector ','"\n\t\t\t></div>\n\t\t'])),babelHelpers.classPrivateFieldGet(this,m)?"--readonly":""));t.Dom.append(babelHelpers.classPrivateFieldGet(this,P),babelHelpers.classPrivateFieldGet(this,h));var l=p(this,w,k).call(this,babelHelpers.classPrivateFieldGet(this,f)).color;t.Dom.style(babelHelpers.classPrivateFieldGet(this,P),{"--crm-field-color-selector-color":l});t.Event.bind(babelHelpers.classPrivateFieldGet(this,P),"click",(function(t){t.preventDefault();e.togglePopup()}))}function k(e){return babelHelpers.classPrivateFieldGet(this,u).find((function(t){return t.id===e}))}function y(){if(!babelHelpers.classPrivateFieldGet(this,H)){babelHelpers.classPrivateFieldSet(this,H,new s.Popup({id:"crm-todo-color-selector-popup-".concat(t.Text.getRandom()),autoHide:true,bindElement:babelHelpers.classPrivateFieldGet(this,h),content:p(this,G,T).call(this),closeByEsc:true,closeIcon:false,draggable:false,width:188,padding:0,angle:true,offsetLeft:6,offsetTop:14}))}return babelHelpers.classPrivateFieldGet(this,H)}function T(){var e=this;babelHelpers.classPrivateFieldSet(this,F,t.Tag.render(r||(r=babelHelpers.taggedTemplateLiteral(['<div class="crm-field-color-selector-menu-container"></div>']))));babelHelpers.classPrivateFieldGet(this,u).forEach((function(l){var a=t.Text.encode("crm-field-color-selector-menu-item-".concat(l.id));var s=t.Tag.render(o||(o=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<span \n\t\t\t\t\tid="','"\n\t\t\t\t\tclass="crm-field-color-selector-menu-item ','"\n\t\t\t\t\tonclick="','"\n\t\t\t\t>\n\t\t\t\t</span>\n\t\t\t'])),a,l.id===babelHelpers.classPrivateFieldGet(e,f)?"--selected":"",e.onSelectColor.bind(e,l.id));t.Dom.append(s,babelHelpers.classPrivateFieldGet(e,F));t.Dom.style(s,{"--crm-field-color-selector-color":l.color})}));return t.Tag.render(n||(n=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="crm-field-color-selector-popup">\n\t\t\t\t',"\n\t\t\t</div>\n\t\t"])),babelHelpers.classPrivateFieldGet(this,F))}e.ColorSelectorEvents=v;e.ColorSelector=E})(this.BX.Crm.Field=this.BX.Crm.Field||{},BX,BX,BX.Event,BX.Main);
//# sourceMappingURL=color-selector.bundle.map.js