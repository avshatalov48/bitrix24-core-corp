{"version":3,"file":"restriction.bundle.js","sources":["../src/restriction.js","../src/index.js"],"sourcesContent":["import { Reflection, Type } from 'main.core';\n\nlet instance = null;\n\nexport type Options = {\n\tisUniversalActivityScenarioEnabled: ?boolean,\n\tisLastActivityEnabled: ?boolean,\n};\n\n/**\n * @memberOf BX.CRM.Kanban\n */\nexport class Restriction\n{\n\t#options: Options;\n\n\tstatic get Instance(): Restriction\n\t{\n\t\tif ((window.top !== window) && Reflection.getClass('top.BX.CRM.Kanban.Restriction'))\n\t\t{\n\t\t\treturn window.top.BX.CRM.Kanban.Restriction;\n\t\t}\n\n\t\tif (!instance)\n\t\t{\n\t\t\tthrow new Error('Restriction must be inited before use');\n\t\t}\n\n\t\treturn instance;\n\t}\n\n\tstatic init(options: Options): void\n\t{\n\t\tif (instance)\n\t\t{\n\t\t\tconsole.warn('Attempt to re-init Restriction');\n\n\t\t\treturn;\n\t\t}\n\n\t\tinstance = new Restriction(options);\n\t}\n\n\tconstructor(options: Options)\n\t{\n\t\tif (instance)\n\t\t{\n\t\t\tthrow new Error('Restriction is a singleton, another instance exists already. Use Instance to access it');\n\t\t}\n\n\t\tthis.#options = Type.isPlainObject(options) ? options : {};\n\t}\n\n\tisSortTypeChangeAvailable(): boolean\n\t{\n\t\treturn (\n\t\t\tthis.#isUniversalActivityScenarioEnabled()\n\t\t\t&& this.#isLastActivityEnabled()\n\t\t);\n\t}\n\n\tisLastActivityInfoInKanbanItemAvailable(): boolean\n\t{\n\t\treturn (\n\t\t\tthis.#isUniversalActivityScenarioEnabled()\n\t\t\t&& this.#isLastActivityEnabled()\n\t\t);\n\t}\n\n\tisTodoActivityCreateAvailable(): boolean\n\t{\n\t\treturn this.#isUniversalActivityScenarioEnabled();\n\t}\n\n\t#isUniversalActivityScenarioEnabled(): boolean\n\t{\n\t\tif (Type.isBoolean(this.#options.isUniversalActivityScenarioEnabled))\n\t\t{\n\t\t\treturn this.#options.isUniversalActivityScenarioEnabled;\n\t\t}\n\n\t\treturn true;\n\t}\n\n\t#isLastActivityEnabled(): boolean\n\t{\n\t\tif (Type.isBoolean(this.#options.isLastActivityEnabled))\n\t\t{\n\t\t\treturn this.#options.isLastActivityEnabled;\n\t\t}\n\n\t\treturn true;\n\t}\n}\n","import { Reflection } from \"main.core\";\nimport { Restriction } from \"./restriction\";\n\nconst namespace = Reflection.namespace('BX.CRM.Kanban');\nnamespace.Restriction = Restriction;\n\nexport {\n\tRestriction,\n};\n"],"names":["instance","Restriction","Instance","window","top","Reflection","getClass","BX","CRM","Kanban","Error","init","options","console","warn","constructor","Type","isPlainObject","isSortTypeChangeAvailable","isLastActivityInfoInKanbanItemAvailable","isTodoActivityCreateAvailable","isBoolean","isUniversalActivityScenarioEnabled","isLastActivityEnabled","namespace"],"mappings":";;;;;CAEA,IAAIA,QAAQ,GAAG,IAAI;CAAC;CAAA;CAAA;CAOpB;CACA;CACA;AACA,CAAO,MAAMC,WAAW,CACxB;GAGC,WAAWC,QAAQ,GACnB;KACC,IAAKC,MAAM,CAACC,GAAG,KAAKD,MAAM,IAAKE,oBAAU,CAACC,QAAQ,CAAC,+BAA+B,CAAC,EACnF;OACC,OAAOH,MAAM,CAACC,GAAG,CAACG,EAAE,CAACC,GAAG,CAACC,MAAM,CAACR,WAAW;;KAG5C,IAAI,CAACD,QAAQ,EACb;OACC,MAAM,IAAIU,KAAK,CAAC,uCAAuC,CAAC;;KAGzD,OAAOV,QAAQ;;GAGhB,OAAOW,IAAI,CAACC,OAAgB,EAC5B;KACC,IAAIZ,QAAQ,EACZ;OACCa,OAAO,CAACC,IAAI,CAAC,gCAAgC,CAAC;OAE9C;;KAGDd,QAAQ,GAAG,IAAIC,WAAW,CAACW,OAAO,CAAC;;GAGpCG,WAAW,CAACH,OAAgB,EAC5B;KAAA;OAAA;;KAAA;OAAA;;KAAA;OAAA;OAAA;;KACC,IAAIZ,QAAQ,EACZ;OACC,MAAM,IAAIU,KAAK,CAAC,wFAAwF,CAAC;;KAG1G,4CAAI,wBAAYM,cAAI,CAACC,aAAa,CAACL,OAAO,CAAC,GAAGA,OAAO,GAAG,EAAE;;GAG3DM,yBAAyB,GACzB;KACC,OACC,4CAAI,yHACD,IAAI,mDAAyB;;GAIlCC,uCAAuC,GACvC;KACC,OACC,4CAAI,yHACD,IAAI,mDAAyB;;GAIlCC,6BAA6B,GAC7B;KACC,+CAAO,IAAI;;CAsBb;CAAC,gDAlBA;GACC,IAAIJ,cAAI,CAACK,SAAS,CAAC,4CAAI,sBAAUC,kCAAkC,CAAC,EACpE;KACC,OAAO,4CAAI,sBAAUA,kCAAkC;;GAGxD,OAAO,IAAI;CACZ;CAAC,mCAGD;GACC,IAAIN,cAAI,CAACK,SAAS,CAAC,4CAAI,sBAAUE,qBAAqB,CAAC,EACvD;KACC,OAAO,4CAAI,sBAAUA,qBAAqB;;GAG3C,OAAO,IAAI;CACZ;;CCzFD,MAAMC,SAAS,GAAGnB,oBAAU,CAACmB,SAAS,CAAC,eAAe,CAAC;CACvDA,SAAS,CAACvB,WAAW,GAAGA,WAAW;;;;;;;;"}