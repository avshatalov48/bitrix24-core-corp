{"version":3,"file":"restriction.bundle.js","sources":["../src/restriction.js","../src/index.js"],"sourcesContent":["import { Reflection, Type } from 'main.core';\n\nlet instance = null;\n\nexport type Options = {\n\tisUniversalActivityScenarioEnabled: ?boolean,\n\tisLastActivityEnabled: ?boolean,\n};\n\n/**\n * @memberOf BX.CRM.Kanban\n */\nexport class Restriction\n{\n\t#options: Options;\n\n\tstatic get Instance(): Restriction\n\t{\n\t\tif ((window.top !== window) && Reflection.getClass('top.BX.CRM.Kanban.Restriction'))\n\t\t{\n\t\t\treturn window.top.BX.CRM.Kanban.Restriction;\n\t\t}\n\n\t\tif (!instance)\n\t\t{\n\t\t\tthrow new Error('Restriction must be inited before use');\n\t\t}\n\n\t\treturn instance;\n\t}\n\n\tstatic init(options: Options): void\n\t{\n\t\tif (instance)\n\t\t{\n\t\t\tconsole.warn('Attempt to re-init Restriction');\n\n\t\t\treturn;\n\t\t}\n\n\t\tinstance = new Restriction(options);\n\t}\n\n\tconstructor(options: Options)\n\t{\n\t\tif (instance)\n\t\t{\n\t\t\tthrow new Error('Restriction is a singleton, another instance exists already. Use Instance to access it');\n\t\t}\n\n\t\tthis.#options = Type.isPlainObject(options) ? options : {};\n\t}\n\n\tisSortTypeChangeAvailable(): boolean\n\t{\n\t\treturn (\n\t\t\tthis.#isUniversalActivityScenarioEnabled()\n\t\t\t&& this.#isLastActivityEnabled()\n\t\t);\n\t}\n\n\tisLastActivityInfoInKanbanItemAvailable(): boolean\n\t{\n\t\treturn (\n\t\t\tthis.#isUniversalActivityScenarioEnabled()\n\t\t\t&& this.#isLastActivityEnabled()\n\t\t);\n\t}\n\n\tisTodoActivityCreateAvailable(): boolean\n\t{\n\t\treturn this.#isUniversalActivityScenarioEnabled();\n\t}\n\n\t#isUniversalActivityScenarioEnabled(): boolean\n\t{\n\t\tif (Type.isBoolean(this.#options.isUniversalActivityScenarioEnabled))\n\t\t{\n\t\t\treturn this.#options.isUniversalActivityScenarioEnabled;\n\t\t}\n\n\t\treturn true;\n\t}\n\n\t#isLastActivityEnabled(): boolean\n\t{\n\t\tif (Type.isBoolean(this.#options.isLastActivityEnabled))\n\t\t{\n\t\t\treturn this.#options.isLastActivityEnabled;\n\t\t}\n\n\t\treturn true;\n\t}\n}\n","import { Reflection } from \"main.core\";\nimport { Restriction } from \"./restriction\";\n\nconst namespace = Reflection.namespace('BX.CRM.Kanban');\nnamespace.Restriction = Restriction;\n\nexport {\n\tRestriction,\n};\n"],"names":["instance","Restriction","Instance","window","top","Reflection","getClass","BX","CRM","Kanban","Error","init","options","console","warn","constructor","Type","isPlainObject","isSortTypeChangeAvailable","isLastActivityInfoInKanbanItemAvailable","isTodoActivityCreateAvailable","isBoolean","isUniversalActivityScenarioEnabled","isLastActivityEnabled","namespace"],"mappings":";;;;;CAEA,IAAIA,QAAQ,GAAG,IAAf;;;;;;;;CAOA;CACA;CACA;AACA,CAAO,MAAMC,WAAN,CACP;CAGoB,aAARC,QAAQ,GACnB;CACC,QAAKC,MAAM,CAACC,GAAP,KAAeD,MAAhB,IAA2BE,oBAAU,CAACC,QAAX,CAAoB,+BAApB,CAA/B,EACA;CACC,aAAOH,MAAM,CAACC,GAAP,CAAWG,EAAX,CAAcC,GAAd,CAAkBC,MAAlB,CAAyBR,WAAhC;CACA;;CAED,QAAI,CAACD,QAAL,EACA;CACC,YAAM,IAAIU,KAAJ,CAAU,uCAAV,CAAN;CACA;;CAED,WAAOV,QAAP;CACA;;CAEU,SAAJW,IAAI,CAACC,OAAD,EACX;CACC,QAAIZ,QAAJ,EACA;CACCa,MAAAA,OAAO,CAACC,IAAR,CAAa,gCAAb;CAEA;CACA;;CAEDd,IAAAA,QAAQ,GAAG,IAAIC,WAAJ,CAAgBW,OAAhB,CAAX;CACA;;CAEDG,EAAAA,WAAW,CAACH,OAAD,EACX;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;;CACC,QAAIZ,QAAJ,EACA;CACC,YAAM,IAAIU,KAAJ,CAAU,wFAAV,CAAN;CACA;;CAED,wEAAgBM,cAAI,CAACC,aAAL,CAAmBL,OAAnB,IAA8BA,OAA9B,GAAwC,EAAxD;CACA;;CAEDM,EAAAA,yBAAyB,GACzB;CACC,WACC,qKACG,IADH,mDADD;CAIA;;CAEDC,EAAAA,uCAAuC,GACvC;CACC,WACC,qKACG,IADH,mDADD;CAIA;;CAEDC,EAAAA,6BAA6B,GAC7B;CACC,mDAAO,IAAP;CACA;;CA3DF;;iDA8DC;CACC,MAAIJ,cAAI,CAACK,SAAL,CAAe,kEAAcC,kCAA7B,CAAJ,EACA;CACC,WAAO,kEAAcA,kCAArB;CACA;;CAED,SAAO,IAAP;CACA;;oCAGD;CACC,MAAIN,cAAI,CAACK,SAAL,CAAe,kEAAcE,qBAA7B,CAAJ,EACA;CACC,WAAO,kEAAcA,qBAArB;CACA;;CAED,SAAO,IAAP;CACA;;CCzFF,MAAMC,SAAS,GAAGnB,oBAAU,CAACmB,SAAX,CAAqB,eAArB,CAAlB;CACAA,SAAS,CAACvB,WAAV,GAAwBA,WAAxB;;;;;;;;"}