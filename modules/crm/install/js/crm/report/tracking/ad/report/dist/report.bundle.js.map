{"version":3,"file":"report.bundle.js","sources":["../src/report.js"],"sourcesContent":["import './report.css';\n\nimport 'sidepanel';\nimport 'ui.progressbar';\nimport { Tag, Runtime, Event, Loc, Text } from 'main.core';\nimport { EventEmitter } from 'main.core.events'\nimport { Menu } from 'main.popup'\n\ntype Options = {\n\tsourceId: string;\n\tfrom: string;\n\tto: string;\n\tparentId: number;\n\tlevel: number;\n\tgridId: string;\n};\n\nclass Report\n{\n\tui: Object = {\n\t\tcontainer: null,\n\t\tloader: null,\n\t\tloaderText: null,\n\t\tloaderProgressBar: null,\n\t\tloaderActive: false,\n\t\tgrid: null,\n\t};\n\n\tconstructor(options)\n\t{\n\t\tthis.load(options);\n\t}\n\n\tstatic open(options: Options): Promise\n\t{\n\t\tif (window === top)\n\t\t{\n\t\t\treturn Promise.resolve(new Report(options));\n\t\t}\n\n\t\treturn top.BX.Runtime.loadExtension('crm.report.tracking.ad.report').then(() => {\n\t\t\treturn new top.BX.Crm.Report.Tracking.Ad.Report(options);\n\t\t});\n\t}\n\n\tload({sourceId, from, to, parentId = 0, level = 0, gridId}: Options)\n\t{\n\t\tthis.gridId = gridId = gridId || `crm-report-tracking-ad-l${level}`;\n\t\tthis.filter = {sourceId, from, to, parentId, level, gridId};\n\n\t\tBX.SidePanel.Instance.open(\n\t\t\t'crm:api.tracking.ad.report' + `-${sourceId}-${level}`,\n\t\t\t{\n\t\t\t\tcacheable: false,\n\t\t\t\tcontentCallback: () => {\n\t\t\t\t\tconst container = this.createUiContainer();\n\t\t\t\t\tthis.build();\n\t\t\t\t\treturn container;\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t}\n\n\tbuild ()\n\t{\n\t\tthis.showLoader();\n\t\tif (this.filter.level)\n\t\t{\n\t\t\tthis.loadGrid();\n\t\t\treturn;\n\t\t}\n\n\t\tBX.ajax.runAction(\n\t\t\t'crm.api.tracking.ad.report.build',\n\t\t\t{\n\t\t\t\tjson: {\n\t\t\t\t\t...this.filter,\n\t\t\t\t}\n\t\t\t}\n\t\t)\n\t\t\t.then(({data}) => {\n\t\t\t\tif (data.label)\n\t\t\t\t{\n\t\t\t\t\tthis.setLoaderText(data.label);\n\t\t\t\t}\n\n\t\t\t\tif (data.complete)\n\t\t\t\t{\n\t\t\t\t\tthis.loadGrid();\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.build();\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\tloadGrid ()\n\t{\n\t\tBX.ajax.runAction(\n\t\t\t'crm.api.tracking.ad.report.getGrid',\n\t\t\t{\n\t\t\t\tdata: {\n\t\t\t\t\t...this.filter,\n\t\t\t\t}\n\t\t\t}\n\t\t)\n\t\t\t.then(({data}) => {\n\t\t\t\t//container.innerHTML = data.html;\n\t\t\t\tEventEmitter.subscribe(\n\t\t\t\t\twindow,\n\t\t\t\t\t'Grid::beforeRequest',\n\t\t\t\t\tthis.onBeforeGridRequest.bind(this)\n\t\t\t\t);\n\n\t\t\t\tRuntime.html(this.getNode('grid'), data.html)\n\t\t\t\tthis.initActivators();\n\t\t\t\tthis.hideLoader();\n\t\t\t});\n\t}\n\n\tinitActivators ()\n\t{\n\t\tthis.getNodes('grid/activator').forEach((node) => {\n\t\t\tconst options = JSON.parse(node.dataset.options);\n\t\t\tEvent.bind(node, 'click', () => {\n\t\t\t\tnew Report({\n\t\t\t\t\t...this.filter,\n\t\t\t\t\tlevel: options.level,\n\t\t\t\t\tparentId: options.parentId,\n\t\t\t\t\tgridId: this.filter.gridId + '-lvl' + options.level,\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\n\t\tconst selectorTitle = this.getNode('grid/selector/title');\n\t\tconst selector = this.getNode('grid/selector');\n\t\tif (selector)\n\t\t{\n\t\t\tconst container = this.getNode('selector');\n\t\t\tif (container.children.length > 0)\n\t\t\t{\n\t\t\t\tselector.parentElement.removeChild(selector);\n\t\t\t\tselectorTitle.parentElement.removeChild(selectorTitle);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tselector.dataset.role = '';\n\t\t\tselectorTitle.dataset.role = '';\n\t\t\tcontainer.appendChild(selectorTitle);\n\t\t\tcontainer.appendChild(selector);\n\n\t\t\tEvent.bind(selector, 'click', () => {\n\t\t\t\tconst options = JSON.parse(selector.dataset.options);\n\t\t\t\tconst popup = new Menu({\n\t\t\t\t\tbindElement: selector,\n\t\t\t\t\tzIndex: 3010,\n\t\t\t\t\titems: options.items.map(item => {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\ttext: Text.encode(item.title),\n\t\t\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\t\t\tpopup.close();\n\t\t\t\t\t\t\t\tselector.textContent = item.title;\n\t\t\t\t\t\t\t\tthis.filter.parentId = item.parentId;\n\t\t\t\t\t\t\t\tthis.filter.level = item.level;\n\t\t\t\t\t\t\t\tthis.filter.sourceId = item.sourceId;\n\t\t\t\t\t\t\t\tthis.build();\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t};\n\t\t\t\t\t})\n\t\t\t\t});\n\t\t\t\tpopup.show();\n\t\t\t});\n\t\t}\n\t}\n\n\tcreateUiContainer ()\n\t{\n\t\tconst container = Tag.render`\n\t\t\t<div class=\"crm-report-tracking-panel\">\n\t\t\t\t<div class=\"crm-report-tracking-panel-title\">\n\t\t\t\t\t<div class=\"crm-report-tracking-panel-title-name\">\n\t\t\t\t\t\t<div data-role=\"title\"></div>\n\t\t\t\t\t\t<div data-role=\"selector\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"crm-report-tracking-panel-body\">\n\t\t\t\t\t<div data-role=\"loader\" class=\"crm-report-tracking-panel-loader\">\n\t\t\t\t\t\t<div data-role=\"loader/text\" class=\"crm-report-tracking-panel-loader-text\"></div>\n\t\t\t\t\t\t<div data-role=\"loader/bar\" class=\"crm-report-tracking-panel-loader-bar\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div data-role=\"grid\"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\tthis.ui.container = container;\n\t\tthis.ui.title = this.getNode('title');\n\t\tthis.ui.loader = this.getNode('loader');\n\t\tthis.ui.loaderText = this.getNode('loader/text');\n\t\tthis.ui.grid = this.getNode('grid');\n\n\t\tconst progressBar = new BX.UI.ProgressBar({\n\t\t\tvalue: 0,\n\t\t\tmaxValue: 100,\n\t\t\tstatusType: 'none',\n\t\t\tcolumn: true,\n\t\t});\n\t\tthis.getNode('loader/bar').appendChild(progressBar.getContainer());\n\t\tthis.ui.loaderProgressBar = progressBar;\n\t\tthis.setLoaderText(Loc.getMessage('CRM_REPORT_TRACKING_AD_REPORT_BUILD'));\n\n\t\tthis.setTitle(Loc.getMessage('CRM_REPORT_TRACKING_AD_REPORT_TITLE_' + this.filter.level));\n\n\t\treturn container;\n\t}\n\n\tsetLoaderText (text)\n\t{\n\t\tthis.ui.loaderProgressBar.setValue(0);\n\t\tthis.ui.loaderProgressBar.setTextBefore(text);\n\t}\n\n\tanimateLoader ()\n\t{\n\t\tif (!this.ui.loaderActive)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst progressBar = this.ui.loaderProgressBar;\n\t\tconst val = parseInt(progressBar.getValue()) + 1;\n\t\tif (val <= 95)\n\t\t{\n\t\t\tprogressBar.update(val);\n\t\t}\n\n\t\tsetTimeout(() => this.animateLoader(), 100);\n\t}\n\n\tshowLoader ()\n\t{\n\t\tif (!this.ui.loaderActive)\n\t\t{\n\t\t\tsetTimeout(() => this.animateLoader(), 100);\n\t\t}\n\n\t\tthis.ui.loaderActive = true;\n\t\tthis.ui.loader.style.display = '';\n\t}\n\n\thideLoader ()\n\t{\n\t\tconst progressBar = this.ui.loaderProgressBar;\n\t\tif (progressBar)\n\t\t{\n\t\t\tprogressBar.update(0);\n\t\t}\n\t\tthis.ui.loaderActive = false;\n\t\tthis.ui.loader.style.display = 'none';\n\t}\n\n\tsetTitle (title)\n\t{\n\t\treturn this.ui.title.textContent = title;\n\t}\n\n\tgetNode (role)\n\t{\n\t\treturn this.ui.container.querySelector(`[data-role=\"${role}\"]`);\n\t}\n\n\tgetNodes (role)\n\t{\n\t\treturn Array.from(this.ui.container.querySelectorAll(`[data-role=\"${role}\"]`));\n\t}\n\n\tonBeforeGridRequest (grid, eventArgs)\n\t{\n\t\teventArgs.sessid = BX.bitrix_sessid();\n\t\teventArgs.method = 'POST';\n\n\t\tif (!eventArgs.url)\n\t\t{\n\t\t\tconst parameters = Object.keys(this.filter).forEach(key => key + '=' + this.filter[key]);\n\t\t\teventArgs.url = '/bitrix/services/main/ajax.php?action=crm.api.tracking.ad.grid.report.get&' + parameters;\n\t\t}\n\n\t\teventArgs.data = {\n\t\t\t...eventArgs.data,\n\t\t};\n\t}\n}\n\n\nexport {Report};"],"names":["Report","options","container","loader","loaderText","loaderProgressBar","loaderActive","grid","load","sourceId","from","to","parentId","level","gridId","filter","BX","SidePanel","Instance","open","cacheable","contentCallback","createUiContainer","build","showLoader","loadGrid","ajax","runAction","json","then","data","label","setLoaderText","complete","EventEmitter","subscribe","window","onBeforeGridRequest","bind","Runtime","html","getNode","initActivators","hideLoader","getNodes","forEach","node","JSON","parse","dataset","Event","selectorTitle","selector","children","length","parentElement","removeChild","role","appendChild","popup","Menu","bindElement","zIndex","items","map","item","text","Text","encode","title","onclick","close","textContent","show","Tag","render","ui","progressBar","UI","ProgressBar","value","maxValue","statusType","column","getContainer","Loc","getMessage","setTitle","setValue","setTextBefore","val","parseInt","getValue","update","setTimeout","animateLoader","style","display","querySelector","Array","querySelectorAll","eventArgs","sessid","bitrix_sessid","method","url","parameters","Object","keys","key","top","Promise","resolve","loadExtension","Crm","Tracking","Ad"],"mappings":"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"}