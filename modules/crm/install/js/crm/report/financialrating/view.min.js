(function(){"use strict";BX.namespace("BX.Crm.Report.Dashboard.Content");BX.Crm.Report.Dashboard.Content.FinancialRating=function(){am4core.options.autoSetClassName=true;am4core.options.classNamePrefix="crm-fin-rating-";BX.Report.VisualConstructor.Widget.Content.AmCharts4.apply(this,arguments);this.chartWrapper.style.paddingTop="0";this.chartWrapper.style.marginTop="-10px"};BX.Crm.Report.Dashboard.Content.FinancialRating.prototype={__proto__:BX.Report.VisualConstructor.Widget.Content.AmCharts4.prototype,constructor:BX.Crm.Report.Dashboard.Content.FinancialRating,onAfterChartCreate:function(){var t=new am4charts.XYChartScrollbar;t.id="scrollbar-box";t.height=70;t.series.push(this.chart.series._values[0]);t.scrollbarChart.series.getIndex(0).filters.clear();t.scrollbarChart.xAxes.getIndex(0).renderer.grid.template.disabled=true;t.scrollbarChart.xAxes.getIndex(0).renderer.labels.template.disabled=true;t.background.fill="#2fc6f6";t.background.fillOpacity=.12;t.thumb.background.states.getKey("hover").properties.fill=am4core.color("#2fc6f6");if(this.chart.data.length>6){t.end=6/this.chart.data.length}this.chart.scrollbarX=t;var r=t.thumb.createChild(am4core.Rectangle);r.width=am4core.percent(100);r.height=2;r.dy=3;r.fill="#2fc6f6";r.align="center";r.valign="bottom";function a(t){t.background.disabled=true;t.children.clear();var r=t.createChild(am4core.Image);r.href="data:image/svg+xml;charset=US-ASCII,%3Csvg%20viewBox%3D%220%200%2036%2036%22%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%3E%3Cdefs%3E%3Cfilter%20x%3D%22-10.9%25%22%20y%3D%22-7.8%25%22%20width%3D%22121.9%25%22%20height%3D%22121.9%25%22%20filterUnits%3D%22objectBoundingBox%22%20id%3D%22a%22%3E%3CfeOffset%20dy%3D%221%22%20in%3D%22SourceAlpha%22%20result%3D%22shadowOffsetOuter1%22/%3E%3CfeGaussianBlur%20stdDeviation%3D%221%22%20in%3D%22shadowOffsetOuter1%22%20result%3D%22shadowBlurOuter1%22/%3E%3CfeColorMatrix%20values%3D%220%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200.21131993%200%22%20in%3D%22shadowBlurOuter1%22/%3E%3C/filter%3E%3Ccircle%20id%3D%22b%22%20cx%3D%2216%22%20cy%3D%2216%22%20r%3D%2216%22/%3E%3C/defs%3E%3Cg%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%3E%3Cg%20transform%3D%22translate%282%201%29%22%3E%3Cuse%20fill%3D%22%23000%22%20filter%3D%22url%28%23a%29%22%20xlink%3Ahref%3D%22%23b%22/%3E%3Cuse%20fill%3D%22%23FFF%22%20xlink%3Ahref%3D%22%23b%22/%3E%3C/g%3E%3Cpath%20fill%3D%22%23C5C5C5%22%20d%3D%22M15.521%2011h1.5v12h-1.5zM19%2011h1.5v12H19z%22/%3E%3C/g%3E%3C/svg%3E";r.width=32;r.height=32;r.align="center";r.valign="middle"}a(this.chart.scrollbarX.startGrip);a(this.chart.scrollbarX.endGrip);var e=this.chart.series.getIndex(0);var i=e.columns.template.createChild(am4core.Image);i.propertyFields.href="bullet";i.height=30;i.width=30;i.align="left";i.valign="top";i.dx=5;i.dy=5;e.columns.template.events.on("sizechanged",function(a){var e=a.target.width;if(e!==0&&e!=this.currentColumnWidth){this.currentColumnWidth=e;this.chart.xAxes.getIndex(0).renderer.labels.template.maxWidth=e;r.width=t.thumb.width}}.bind(this));e.columns.template.adapter.add("tooltipHTML",this.renderBalloon.bind(this))},renderBalloon:function(t,r){var a=r.dataItem.dataContext.balloon;var e=a.wonAmount>=a.wonAmountPrev?"crm-report-financial-rating-value-up":"crm-report-financial-rating-value-down";return'<div class="crm-report-financial-rating-modal" style="border-color: '+a.color+';">'+'\t\t\t<div class="crm-report-financial-rating-modal-title">'+BX.util.htmlspecialchars(a.clientTitle)+"\t\t\t</div>"+'            <div class="crm-report-financial-rating-group-values">'+'\t\t\t\t<div class="crm-report-financial-rating-modal-line">'+'\t\t\t\t\t<div class="crm-report-financial-rating-modal-value">'+a.wonAmountFormatted+"\t\t\t\t\t</div>"+"\t\t\t\t</div>"+'\t\t\t\t<div class="crm-report-financial-rating-modal-line">'+'\t\t\t\t\t<div class="crm-report-financial-rating-modal-value '+e+'">'+a.wonAmountPrevFormatted+"\t\t\t\t\t</div>"+"\t\t\t\t</div>"+"            </div>"+'            <div class="crm-report-financial-rating-group-values">'+'\t\t\t\t<div class="crm-report-financial-rating-modal-line">'+'\t\t\t\t\t<div class="crm-report-financial-rating-modal-subtitle">'+BX.message("CRM_REPORT_FINANCIAL_RATING_DEALS_AVG_AMOUNT")+"\t\t\t\t\t</div>"+'\t\t\t\t\t<div class="crm-report-financial-rating-modal-value">'+a.avgWonAvgAmountFormatted+"\t\t\t\t\t</div>"+"\t\t\t\t</div>"+'\t\t\t\t<div class="crm-report-financial-rating-modal-line">'+'\t\t\t\t\t<div class="crm-report-financial-rating-modal-subtitle">'+BX.message("CRM_REPORT_FINANCIAL_RATING_DEALS_WON_COUNT")+"\t\t\t\t\t</div>"+'\t\t\t\t\t<div class="crm-report-financial-rating-modal-inner">'+'\t\t\t\t\t<div class="crm-report-financial-rating-modal-value-box">'+this.getDealCountBlock(a.wonCount,a.totalCount)+"\t\t\t\t\t</div>"+'\t\t\t\t\t<div class="crm-report-financial-rating-modal-percent">'+this.getPercent(a.wonCount,a.totalCount)+"\t\t\t\t\t</div>"+"\t\t\t\t\t</div>"+"\t\t\t\t</div>"+" \t\t\t</div>"+"</div>"},getDealCountBlock:function(t,r){var a='<div class="crm-report-financial-rating-modal-value">'+t+"</div>";var e='<div class="crm-report-financial-rating-modal-value">'+r+"</div>";var i=BX.message("CRM_REPORT_FINANCIAL_RATING_DEALS_WON_OF");i=i.replace("#WON_COUNT#",a);i=i.replace("#TOTAL_COUNT#",e);return i},getPercent:function(t,r){var a;if(r==0){return"&mdash;"}else{a=t/r;return Math.round(a*100).toString()+"%"}}}})();
//# sourceMappingURL=view.map.js