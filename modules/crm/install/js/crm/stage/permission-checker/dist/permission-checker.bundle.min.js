this.BX=this.BX||{},this.BX.Crm=this.BX.Crm||{},function(e,s,t,i){"use strict";const o={process:null,success:"S",failure:"F",apology:"F"};var a=babelHelpers.classPrivateFieldLooseKey("stages");class r{constructor(e){Object.defineProperty(this,a,{writable:!0,value:void 0}),babelHelpers.classPrivateFieldLooseBase(this,a)[a]=e}isHasPermissionToMove(e,s){var t,i;if(e===s)return!0;const o=babelHelpers.classPrivateFieldLooseBase(this,a)[a].get(s);if(!o)return!1;if(o.isAllowedMoveToAnyStage())return!0;const r=babelHelpers.classPrivateFieldLooseBase(this,a)[a].get(e);return!!r&&(null!=(t=null==(i=r.getStagesToMove())?void 0:i.includes(s))&&t||r.isAllowedMoveToAnyStage())}isHasPermissionToMoveAtLeastOneFailureStage(e){return this.getStages().some((s=>s.isFailure()&&this.isHasPermissionToMove(e,s.getStatusId())))}isHasPermissionToMoveSuccessStage(e){return this.getStages().some((s=>s.isSuccess()&&this.isHasPermissionToMove(e,s.getStatusId())))}isHasPermissionToMoveAtLeastOneTerminationStage(e){return this.isHasPermissionToMoveSuccessStage(e)||this.isHasPermissionToMoveAtLeastOneFailureStage(e)}showMissPermissionError(){BX.UI.Notification.Center.notify({content:s.Loc.getMessage("CRM_STAGE_MISS_PERMISSION_TO_MOVE_STAGE"),autoHideDelay:2e3})}getStages(){return[...babelHelpers.classPrivateFieldLooseBase(this,a)[a].values()]}static createFromStageModels(e){const s=new Map;return e.forEach((e=>{s.set(e.getStatusId(),e)})),new r(s)}static createFromStageInfos(e){const s=[];return e.forEach((e=>{const t=o[e.semantics],a={...e};a.semantics=t,a.statusId=e.id;const r=new i.StageModel(a);s.push(r)})),r.createFromStageModels(s)}}e.PermissionChecker=r}(this.BX.Crm.Stage=this.BX.Crm.Stage||{},BX,BX,BX.Crm.Models);
//# sourceMappingURL=permission-checker.bundle.map.js