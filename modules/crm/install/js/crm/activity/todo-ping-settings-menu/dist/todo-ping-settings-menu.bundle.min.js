this.BX=this.BX||{};this.BX.Crm=this.BX.Crm||{};(function(e,s,t){"use strict";const i="menu-popup-item-accept";const l="menu-popup-item-none";const a=750;var r=babelHelpers.classPrivateFieldLooseKey("entityTypeId");var o=babelHelpers.classPrivateFieldLooseKey("settings");var n=babelHelpers.classPrivateFieldLooseKey("selectedOffsets");var b=babelHelpers.classPrivateFieldLooseKey("isLoadingMenuItem");var c=babelHelpers.classPrivateFieldLooseKey("getPintSettingsMenuItems");var d=babelHelpers.classPrivateFieldLooseKey("getMenuItemClass");var p=babelHelpers.classPrivateFieldLooseKey("isLoading");var v=babelHelpers.classPrivateFieldLooseKey("onMenuItemClick");class u{constructor(e){Object.defineProperty(this,v,{value:L});Object.defineProperty(this,p,{value:P});Object.defineProperty(this,d,{value:f});Object.defineProperty(this,c,{value:h});Object.defineProperty(this,r,{writable:true,value:null});Object.defineProperty(this,o,{writable:true,value:null});Object.defineProperty(this,n,{writable:true,value:null});Object.defineProperty(this,b,{writable:true,value:false});babelHelpers.classPrivateFieldLooseBase(this,r)[r]=e.entityTypeId;babelHelpers.classPrivateFieldLooseBase(this,o)[o]=e.settings;if(!s.Type.isStringFilled(babelHelpers.classPrivateFieldLooseBase(this,o)[o].optionName)){throw"Option name are not defined."}babelHelpers.classPrivateFieldLooseBase(this,n)[n]=babelHelpers.classPrivateFieldLooseBase(this,o)[o].currentOffsets||[];if(!s.Type.isArrayFilled(babelHelpers.classPrivateFieldLooseBase(this,o)[o].currentOffsets)){throw"Offsets are not defined."}}setSelectedValues(e){babelHelpers.classPrivateFieldLooseBase(this,n)[n]=e}getItems(){const e=[];e.push({id:"askForSetupTodoPing",text:s.Loc.getMessage("CRM_ACTIVITY_TODO_PING_SETTINGS_MENU_ITEM"),className:l,items:babelHelpers.classPrivateFieldLooseBase(this,c)[c]()});return e}}function h(){if(s.Type.isNull(babelHelpers.classPrivateFieldLooseBase(this,o)[o].offsetList)||!s.Type.isArrayFilled(babelHelpers.classPrivateFieldLooseBase(this,o)[o].offsetList)){return[]}const e=[];babelHelpers.classPrivateFieldLooseBase(this,o)[o].offsetList.forEach((s=>{e.push({id:s.id,text:s.title,className:babelHelpers.classPrivateFieldLooseBase(this,d)[d](s.offset),disabled:babelHelpers.classPrivateFieldLooseBase(this,p)[p](),onclick:babelHelpers.classPrivateFieldLooseBase(this,v)[v].bind(this,s.offset)})}));return e}function f(e){return babelHelpers.classPrivateFieldLooseBase(this,n)[n].includes(e)?i:l}function P(){return babelHelpers.classPrivateFieldLooseBase(this,b)[b]}function L(e,t,r){babelHelpers.classPrivateFieldLooseBase(this,b)[b]=true;if(babelHelpers.classPrivateFieldLooseBase(this,n)[n].includes(e)){if(babelHelpers.classPrivateFieldLooseBase(this,n)[n].length===1){BX.UI.Hint.show(r.getContainer(),"At least one item must be selected");return}babelHelpers.classPrivateFieldLooseBase(this,n)[n]=babelHelpers.classPrivateFieldLooseBase(this,n)[n].filter((s=>s!==e));s.Dom.removeClass(r.getContainer(),i);s.Dom.addClass(r.getContainer(),l)}else{babelHelpers.classPrivateFieldLooseBase(this,n)[n].push(e);s.Dom.removeClass(r.getContainer(),l);s.Dom.addClass(r.getContainer(),i)}if(babelHelpers.classPrivateFieldLooseBase(this,n)[n].length===0){throw"Offsets are not defined.";return}setTimeout((()=>{BX.userOptions.save("crm",babelHelpers.classPrivateFieldLooseBase(this,o)[o].optionName,"offsets",babelHelpers.classPrivateFieldLooseBase(this,n)[n].join(","));babelHelpers.classPrivateFieldLooseBase(this,b)[b]=false}),a)}e.TodoPingSettingsMenu=u})(this.BX.Crm.Activity=this.BX.Crm.Activity||{},BX,BX.Main);
//# sourceMappingURL=todo-ping-settings-menu.bundle.map.js