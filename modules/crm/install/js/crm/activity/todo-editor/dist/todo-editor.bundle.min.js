this.BX=this.BX||{};this.BX.Crm=this.BX.Crm||{};(function(e,t,i,s,a,r,l,n,o,c,d){"use strict";const u={props:{icon:{type:String,required:true,default:""},action:{type:Function,required:true,default:()=>{}},description:{type:String,required:false,default:""}},data(){return{popup:null}},computed:{iconClassname(){return["crm-activity__todo-editor_action-btn-icon",`--${this.icon}`]}},methods:{onMouseEnter(e){if(!this.description){return}this.popup=new i.Popup({content:this.description,bindElement:e.target,darkMode:true});setTimeout((()=>{if(!this.popup){return}this.popup.show()}),400)},onMouseLeave(){if(!this.popup||!this.description){return}this.popup.close();this.popup=null},onButtonClick(){this.action.call(this)}},template:`\n\t\t<button\n\t\t\t@mouseenter="onMouseEnter"\n\t\t\t@mouseleave="onMouseLeave"\n\t\t\t@click="onButtonClick"\n\t\t\tclass="crm-activity__todo-editor_action-btn"\n\t\t>\n\t\t\t<i :class="iconClassname"></i>\n\t\t</button>\n\t`};const h={computed:{className(){return["crm-activity__todo-editor_action-delimiter"]}},template:`\n\t\t<span :class="className">\n\t\t\t<i class="crm-activity__todo-editor_action-delimiter-icon"></i>\n\t\t</span>\n\t`};const p={props:{userId:{type:Number,required:true,default:0},userName:{type:String,required:true,default:""},imageUrl:{type:String,required:true,default:""}},data(){return{isTickFlipped:false,userAvatarUrl:this.imageUrl}},computed:{userIconClassName(){return["ui-icon","ui-icon-common-user","crm-timeline__user-icon"]},tickIconClassName(){return["crm-activity__todo-editor_action-user-selector-tick","crm-activity__todo-editor_action-user-selector-tick-icon",{"--flipped":this.isTickFlipped}]},userIconStyles(){if(!this.userAvatarUrl){return{}}return{backgroundImage:"url('"+encodeURI(s.Text.encode(this.userAvatarUrl))+"')",backgroundSize:"21px"}}},methods:{onDialogShow(e){this.isTickFlipped=true},onDialogHide(e){this.isTickFlipped=false},onSelectUser(e){const t=e.getData().item.getDialog().getSelectedItems()[0];if(t){this.userAvatarUrl=t.getAvatar();this.$Bitrix.eventEmitter.emit(v.EVENT_RESPONSIBLE_USER_CHANGE,{responsibleUserId:t.getId()})}},onDeselectUser(){setTimeout((()=>{const e=this.userSelectorDialog.getSelectedItems();if(e.length===0){this.userAvatarUrl=this.imageUrl;this.userSelectorDialog.hide();this.$Bitrix.eventEmitter.emit(v.EVENT_RESPONSIBLE_USER_CHANGE,{responsibleUserId:this.userId})}}),100)},showUserDialog(){if(this.userSelectorDialog){setTimeout((()=>{this.userSelectorDialog.show()}),5)}},resetToDefault(){this.userAvatarUrl=this.imageUrl;if(this.userSelectorDialog){const e=this.userSelectorDialog.getItem({id:this.userId,entityId:"user"});if(e){e.select(true)}}}},mounted(){this.userSelectorDialog=new r.Dialog({id:"responsible-user-selector-dialog",targetNode:this.$refs.userSelector,context:"CRM_ACTIVITY_TODO_RESPONSIBLE_USER",multiple:false,dropdownMode:true,showAvatars:true,enableSearch:true,width:450,zIndex:2500,entities:[{id:"user"}],preselectedItems:[["user",this.userId]],undeselectedItems:[["user",this.userId]],events:{onShow:this.onDialogShow,onHide:this.onDialogHide,"Item:onSelect":this.onSelectUser,"Item:onDeselect":this.onDeselectUser}})},template:`\n\t\t<div \n\t\t\tclass="crm-activity__todo-editor_responsible-user-selector"\n\t\t\tref="userSelector"\n\t\t\t@click="showUserDialog"\n\t\t>\n\t\t\t<span :class="userIconClassName">\n\t\t\t\t<i :style="userIconStyles"></i>\n\t\t\t</span>\n\t\t\t<span \n\t\t\t\t:class="tickIconClassName"\n\t\t\t\tref="tickIcon"\n\t\t\t>\n\t\t\t</span>\n\t\t</div>\n\t`};const b=126;const v={EVENT_RESPONSIBLE_USER_CHANGE:"crm:timeline:todo:responsible-user-changed"};const m={components:{TodoEditorActionBtn:u,TodoEditorActionDelimiter:h,TodoEditorResponsibleUserSelector:p},props:{onFocus:Function,onChangeDescription:Function,onSaveHotkeyPressed:Function,deadline:Date,defaultDescription:{type:String,required:false,default:""},additionalButtons:Array,popupMode:Boolean,currentUser:Object},data(){var e;return{description:this.defaultDescription,currentDeadline:(e=this.deadline)!==null&&e!==void 0?e:new Date,responsibleUserId:this.currentUser.userId,showFileUploader:false,isTextareaToLong:false}},computed:{deadlineFormatted(){const e=new o.DatetimeConverter(this.currentDeadline);return e.toDatetimeString({withDayOfWeek:true,delimiter:", "})}},watch:{description(){s.Dom.style(this.$refs.textarea,"height","auto");void this.$nextTick((()=>{const e=this.$refs.textarea.scrollHeight;s.Dom.style(this.$refs.textarea,"height",`${e}px`);if(this.popupMode===true){this.isTextareaToLong=e>b}}))}},methods:{clearDescription(){this.description="";s.Dom.style(this.$refs.textarea,"height","auto")},setDescription(e){this.description=e},onTextareaFocus(){this.onFocus()},onTextareaKeydown(e){if(e.keyCode!==13){return}const t=s.Browser.isMac()&&(e.metaKey===true||e.altKey===true);if(e.ctrlKey===true||t){this.onSaveHotkeyPressed()}},setTextareaFocused(){this.$refs.textarea.focus()},onDeadlineClick(){BX.calendar({node:this.$refs.deadline,bTime:true,bHideTime:false,bSetFocus:false,value:n.DateTimeFormat.format(o.DatetimeConverter.getSiteDateTimeFormat(),this.currentDeadline),callback:this.setDeadline.bind(this)})},setDeadline(e){this.currentDeadline=e},onResponsibleUserChange(e){const t=e.getData();if(t){this.setResponsibleUserId(t.responsibleUserId)}},setResponsibleUserId(e){this.responsibleUserId=e},resetResponsibleUserToDefault(){this.setResponsibleUserId(this.currentUser.userId);const e=this.$refs.userSelector;if(e){e.resetToDefault()}},getData(){return{description:this.description,deadline:this.currentDeadline,responsibleUserId:this.responsibleUserId}},onTextareaInput(e){this.setDescription(e.target.value);this.onChangeDescription(e.target.value)}},mounted(){this.$Bitrix.eventEmitter.subscribe(v.EVENT_RESPONSIBLE_USER_CHANGE,this.onResponsibleUserChange)},beforeUnmount(){this.$Bitrix.eventEmitter.unsubscribe(v.EVENT_RESPONSIBLE_USER_CHANGE,this.onResponsibleUserChange)},template:`\n\t\t<label class="crm-activity__todo-editor_body">\n\t\t\t<textarea\n\t\t\t\trows="1"\n\t\t\t\tref="textarea"\n\t\t\t\t@focus="onTextareaFocus"\n\t\t\t\t@keydown="onTextareaKeydown"\n\t\t\t\tclass="crm-activity__todo-editor_textarea"\n\t\t\t\t:placeholder="$Bitrix.Loc.getMessage('CRM_ACTIVITY_TODO_ADD_PLACEHOLDER')"\n\t\t\t\t@input="onTextareaInput"\n\t\t\t\t:value="description"\n\t\t\t\t:class="{ '--has-scroll': isTextareaToLong }"\n\t\t\t></textarea>\n\t\t\t<div class="crm-activity__todo-editor_tools">\n\t\t\t\t<div\n\t\t\t\t\tref="deadline"\n\t\t\t\t\t@click="onDeadlineClick"\n\t\t\t\t\tclass="crm-activity__todo-editor_deadline"\n\t\t\t\t>\n\t\t\t\t\t<span class="crm-activity__todo-editor_deadline-icon"><i></i></span>\n\t\t\t\t\t<span class="crm-activity__todo-editor_deadline-text">{{ deadlineFormatted }}</span>\n\t\t\t\t</div>\n\t\t\t\t<div class="crm-activity__todo-editor_action-btns">\n\t\t\t\t\t<TodoEditorActionBtn\n\t\t\t\t\t\tv-for="btn in additionalButtons"\n\t\t\t\t\t\t:key="btn.id"\n\t\t\t\t\t\t:icon="btn.icon"\n\t\t\t\t\t\t:description="btn.description"\n\t\t\t\t\t\t:action="btn.action"\n\t\t\t\t\t/>\n\t\t\t\t\t<TodoEditorActionDelimiter/>\n\t\t\t\t\t<TodoEditorResponsibleUserSelector\n\t\t\t\t\t\t:userId="currentUser.userId"\n\t\t\t\t\t\t:userName="currentUser.title"\n\t\t\t\t\t\t:imageUrl="currentUser.imageUrl"\n\t\t\t\t\t\tref="userSelector"\n\t\t\t\t\t\tclass="crm-activity__todo-editor_action-btn"\n\t\t\t\t\t>\n\t\t\t\t\t</TodoEditorResponsibleUserSelector>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</label>\n\t`};let f=function e(){babelHelpers.classCallCheck(this,e)};babelHelpers.defineProperty(f,"DEFAULT","default");babelHelpers.defineProperty(f,"PRIMARY","primary");function F(e,t){T(e,t);t.add(e)}function D(e,t,i){T(e,t);t.set(e,i)}function T(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function P(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}const S={ADD:"add",UPDATE:"update"};var H=new WeakMap;var g=new WeakMap;var w=new WeakMap;var y=new WeakMap;var _=new WeakMap;var I=new WeakMap;var C=new WeakMap;var k=new WeakMap;var E=new WeakMap;var G=new WeakMap;var U=new WeakMap;var A=new WeakMap;var M=new WeakMap;var B=new WeakMap;var N=new WeakMap;var W=new WeakMap;var R=new WeakMap;var O=new WeakMap;var x=new WeakMap;var L=new WeakSet;var X=new WeakSet;var $=new WeakSet;var V=new WeakSet;var q=new WeakSet;var Y=new WeakSet;var j=new WeakSet;var z=new WeakSet;var K=new WeakSet;var J=new WeakSet;var Q=new WeakSet;var Z=new WeakSet;var ee=new WeakSet;var te=new WeakSet;var ie=new WeakSet;var se=new WeakSet;var ae=new WeakSet;var re=new WeakSet;var le=new WeakSet;var ne=new WeakSet;let oe=function(){function e(t){babelHelpers.classCallCheck(this,e);F(this,ne);F(this,le);F(this,re);F(this,ae);F(this,se);F(this,ie);F(this,te);F(this,ee);F(this,Z);F(this,Q);F(this,J);F(this,K);F(this,z);F(this,j);F(this,Y);F(this,q);F(this,V);F(this,$);F(this,X);F(this,L);D(this,H,{writable:true,value:null});D(this,g,{writable:true,value:null});D(this,w,{writable:true,value:null});D(this,y,{writable:true,value:null});D(this,_,{writable:true,value:S.ADD});D(this,I,{writable:true,value:null});D(this,C,{writable:true,value:null});D(this,k,{writable:true,value:null});D(this,E,{writable:true,value:null});D(this,G,{writable:true,value:null});D(this,U,{writable:true,value:null});D(this,A,{writable:true,value:""});D(this,M,{writable:true,value:null});D(this,B,{writable:true,value:null});D(this,N,{writable:true,value:null});D(this,W,{writable:true,value:null});D(this,R,{writable:true,value:{}});D(this,O,{writable:true,value:false});D(this,x,{writable:true,value:false});if(!s.Type.isDomNode(t.container)){throw new Error("TodoEditor container must be a DOM Node")}babelHelpers.classPrivateFieldSet(this,H,t.container);babelHelpers.classPrivateFieldSet(this,A,P(this,re,we).call(this,t.borderColor)?t.borderColor:e.BorderColor.DEFAULT);s.Dom.addClass(babelHelpers.classPrivateFieldGet(this,H),P(this,le,ye).call(this));if(!s.Type.isNumber(t.ownerTypeId)){throw new Error("OwnerTypeId must be set")}babelHelpers.classPrivateFieldSet(this,I,t.ownerTypeId);if(!s.Type.isNumber(t.ownerId)){throw new Error("OwnerId must be set")}babelHelpers.classPrivateFieldSet(this,C,t.ownerId);if(!s.Type.isObject(t.currentUser)){throw new Error("Current user must be set")}babelHelpers.classPrivateFieldSet(this,k,t.currentUser);babelHelpers.classPrivateFieldSet(this,E,s.Type.isString(t.defaultDescription)?t.defaultDescription:P(this,te,Pe).call(this));babelHelpers.classPrivateFieldSet(this,G,s.Type.isDate(t.deadline)?t.deadline:null);if(!babelHelpers.classPrivateFieldGet(this,G)){this.setDefaultDeadLine(false)}babelHelpers.classPrivateFieldSet(this,B,new a.EventEmitter);babelHelpers.classPrivateFieldGet(this,B).setEventNamespace("Crm.Activity.TodoEditor");if(s.Type.isObject(t.events)){for(const e in t.events){if(s.Type.isFunction(t.events[e])){babelHelpers.classPrivateFieldGet(this,B).subscribe(e,t.events[e])}}}babelHelpers.classPrivateFieldSet(this,O,s.Type.isBoolean(t.enableCalendarSync)?t.enableCalendarSync:false);babelHelpers.classPrivateFieldSet(this,x,s.Type.isBoolean(t.popupMode)?t.popupMode:false)}babelHelpers.createClass(e,[{key:"setMode",value:function e(t){if(!Object.values(S).some((e=>e===t))){throw new Error(`Unknown TodoEditor mode ${t}`)}babelHelpers.classPrivateFieldSet(this,_,t);return this}},{key:"show",value:function e(){babelHelpers.classPrivateFieldSet(this,g,t.BitrixVue.createApp(m,{deadline:babelHelpers.classPrivateFieldGet(this,G),defaultDescription:babelHelpers.classPrivateFieldGet(this,E),onFocus:P(this,ie,Se).bind(this),onChangeDescription:P(this,se,He).bind(this),onSaveHotkeyPressed:P(this,ae,ge).bind(this),additionalButtons:P(this,L,ce).call(this),popupMode:babelHelpers.classPrivateFieldGet(this,x),currentUser:babelHelpers.classPrivateFieldGet(this,k)}));babelHelpers.classPrivateFieldSet(this,w,babelHelpers.classPrivateFieldGet(this,g).mount(babelHelpers.classPrivateFieldGet(this,H)))}},{key:"onSettingsChange",value:function e(t){this.setSettings(t);if(t!==null&&t!==void 0&&t.calendar){this.setDeadlineFromTimestamp(t["calendar"].from)}}},{key:"setSettings",value:function e(t={}){babelHelpers.classPrivateFieldSet(this,R,t)}},{key:"save",value:function e(){if(babelHelpers.classPrivateFieldGet(this,y)){return babelHelpers.classPrivateFieldGet(this,y)}babelHelpers.classPrivateFieldSet(this,y,new Promise(((e,t)=>{P(this,Y,pe).call(this).then((i=>{s.ajax.runAction(P(this,j,be).call(this),{data:i}).then(e).catch(t)}))})).catch((e=>{l.UI.Notification.Center.notify({content:e.errors[0].message,autoHideDelay:5e3});throw e})).finally((()=>{babelHelpers.classPrivateFieldSet(this,y,null)})));return babelHelpers.classPrivateFieldGet(this,y)}},{key:"getDeadline",value:function e(){var t,i;return(t=(i=babelHelpers.classPrivateFieldGet(this,w))===null||i===void 0?void 0:i.getData()["deadline"])!==null&&t!==void 0?t:null}},{key:"getDescription",value:function e(){var t,i;return(t=(i=babelHelpers.classPrivateFieldGet(this,w))===null||i===void 0?void 0:i.getData()["description"])!==null&&t!==void 0?t:""}},{key:"setParentActivityId",value:function e(t){babelHelpers.classPrivateFieldSet(this,U,t);return this}},{key:"setActivityId",value:function e(t){babelHelpers.classPrivateFieldSet(this,M,t);return this}},{key:"setDeadline",value:function e(t){const i=n.DateTimeFormat.parse(t);if(s.Type.isDate(i)){babelHelpers.classPrivateFieldGet(this,w).setDeadline(i);babelHelpers.classPrivateFieldSet(this,G,i)}return this}},{key:"setDeadlineFromTimestamp",value:function e(t){const i=new Date(t*1e3);babelHelpers.classPrivateFieldGet(this,w).setDeadline(i);babelHelpers.classPrivateFieldSet(this,G,i);return this}},{key:"setDefaultDeadLine",value:function e(t=true){let i=BX.parseDate(s.Loc.getMessage("CRM_TIMELINE_TODO_EDITOR_DEFAULT_DATETIME"));if(s.Type.isDate(i)){babelHelpers.classPrivateFieldSet(this,G,i)}else{babelHelpers.classPrivateFieldSet(this,G,new Date);babelHelpers.classPrivateFieldGet(this,G).setMinutes(0);babelHelpers.classPrivateFieldGet(this,G).setTime(babelHelpers.classPrivateFieldGet(this,G).getTime()+60*60*1e3)}if(t){babelHelpers.classPrivateFieldGet(this,w).setDeadline(babelHelpers.classPrivateFieldGet(this,G))}return this}},{key:"setFocused",value:function e(){babelHelpers.classPrivateFieldGet(this,w).setTextareaFocused()}},{key:"setDescription",value:function e(t){babelHelpers.classPrivateFieldGet(this,w).setDescription(t);return this}},{key:"clearValue",value:function e(){babelHelpers.classPrivateFieldGet(this,w).clearDescription();babelHelpers.classPrivateFieldSet(this,U,null);this.setDefaultDeadLine();babelHelpers.classPrivateFieldGet(this,w).resetResponsibleUserToDefault();s.Dom.removeClass(babelHelpers.classPrivateFieldGet(this,H),"--is-edit");if(babelHelpers.classPrivateFieldGet(this,N)){s.Dom.removeClass(babelHelpers.classPrivateFieldGet(this,N).getContainer(),"--is-displayed")}babelHelpers.classPrivateFieldSet(this,N,null);babelHelpers.classPrivateFieldSet(this,W,null);return new Promise((e=>{setTimeout(e,10)}))}},{key:"resetToDefaults",value:function e(){babelHelpers.classPrivateFieldGet(this,w).setDescription(P(this,te,Pe).call(this));this.setDefaultDeadLine();babelHelpers.classPrivateFieldGet(this,w).resetResponsibleUserToDefault();s.Dom.removeClass(babelHelpers.classPrivateFieldGet(this,H),"--is-edit");if(babelHelpers.classPrivateFieldGet(this,N)){s.Dom.removeClass(babelHelpers.classPrivateFieldGet(this,N).getContainer(),"--is-displayed")}babelHelpers.classPrivateFieldSet(this,N,null);babelHelpers.classPrivateFieldSet(this,W,null);return new Promise((e=>{setTimeout(e,10)}))}},{key:"setStorageElementIds",value:function e(t){this.initFileUploader(t)}},{key:"initFileUploader",value:function e(t=[]){if(!babelHelpers.classPrivateFieldGet(this,N)){babelHelpers.classPrivateFieldSet(this,N,new c.FileUploader({baseContainer:babelHelpers.classPrivateFieldGet(this,H),events:{"File:onRemove":e=>{babelHelpers.classPrivateFieldGet(this,B).emit("onChangeUploaderContainerSize")},onUploadStart:e=>{babelHelpers.classPrivateFieldGet(this,B).emit("onChangeUploaderContainerSize")}},ownerId:babelHelpers.classPrivateFieldGet(this,C),ownerTypeId:babelHelpers.classPrivateFieldGet(this,I),activityId:babelHelpers.classPrivateFieldGet(this,M),files:t}))}const i=babelHelpers.classPrivateFieldGet(this,N).getContainer();const a="--is-displayed";if(t&&!s.Dom.hasClass(i,a)){s.Dom.addClass(i,a)}else{s.Dom.toggleClass(i,a)}babelHelpers.classPrivateFieldGet(this,B).emit("onChangeUploaderContainerSize")}}]);return e}();function ce(){const e=[];if(babelHelpers.classPrivateFieldGet(this,O)){e.push(P(this,X,de).call(this))}e.push(P(this,q,he).call(this));return e}function de(){return{id:"settings",icon:"settings",description:s.Loc.getMessage("CRM_ACTIVITY_TODO_SETTINGS_BUTTON_HINT"),action:P(this,$,ue).bind(this)}}function ue(){if(!babelHelpers.classPrivateFieldGet(this,W)){babelHelpers.classPrivateFieldSet(this,W,new d.SettingsPopup({onSettingsChange:this.onSettingsChange.bind(this),sections:P(this,Q,Fe).call(this),settings:babelHelpers.classPrivateFieldGet(this,R)}))}if(babelHelpers.classPrivateFieldGet(this,w)){babelHelpers.classPrivateFieldGet(this,W).syncSettings(babelHelpers.classPrivateFieldGet(this,w).getData())}babelHelpers.classPrivateFieldGet(this,W).show()}function he(){return{id:"file-uploader",icon:"attach",description:s.Loc.getMessage("CRM_ACTIVITY_TODO_UPLOAD_FILE_BUTTON_HINT"),action:P(this,ne,_e).bind(this)}}function pe(){return new Promise((e=>{P(this,z,ve).call(this).then((t=>{const i=babelHelpers.classPrivateFieldGet(this,w).getData();const s={ownerTypeId:babelHelpers.classPrivateFieldGet(this,I),ownerId:babelHelpers.classPrivateFieldGet(this,C),description:i.description,responsibleId:i.responsibleUserId,deadline:n.DateTimeFormat.format(o.DatetimeConverter.getSiteDateTimeFormat(),i.deadline),parentActivityId:babelHelpers.classPrivateFieldGet(this,U),fileTokens:babelHelpers.classPrivateFieldGet(this,N)?babelHelpers.classPrivateFieldGet(this,N).getServerFileIds():[],settings:t};if(babelHelpers.classPrivateFieldGet(this,_)===S.UPDATE){s.id=babelHelpers.classPrivateFieldGet(this,M)}e(s)}))}))}function be(){return babelHelpers.classPrivateFieldGet(this,_)===S.ADD?"crm.activity.todo.add":"crm.activity.todo.update"}function ve(){if(babelHelpers.classPrivateFieldGet(this,W)){return P(this,K,me).call(this)}return P(this,J,fe).call(this)}function me(){if(babelHelpers.classPrivateFieldGet(this,w)){babelHelpers.classPrivateFieldGet(this,W).syncSettings(babelHelpers.classPrivateFieldGet(this,w).getData())}return new Promise((e=>{setTimeout((()=>{e(babelHelpers.classPrivateFieldGet(this,W).getSettings())}),0)}))}function fe(){const e=[];P(this,Q,Fe).call(this).forEach((t=>{if(!t.active){return}const i=t.params;i.id=t.id;e.push(i)}));return Promise.resolve(e)}function Fe(){const e={id:d.Ping.methods.getId(),component:d.Ping,active:true,showToggleSelector:false};const t={id:d.Calendar.methods.getId(),component:d.Calendar};if(babelHelpers.classPrivateFieldGet(this,W)){const i=babelHelpers.classPrivateFieldGet(this,W).getSettings();if(i.ping){const t=i.ping;e.params={selectedItems:t.selectedItems};e.active=true;e.showToggleSelector=false}if(i.calendar){const e=i.calendar;t.params={from:e.from,to:e.to,duration:e.duration};t.active=true}}if(!e.params){e.params=P(this,ee,Te).call(this)}if(!t.params){t.params=P(this,Z,De).call(this);t.active=false}return[e,t]}function De(){const e=this.getDeadline()||babelHelpers.classPrivateFieldGet(this,G);const t=e.getTime()/1e3;const i=3600;const s=t+i;return{from:t,duration:i,to:s}}function Te(){return{selectedItems:["at the time of the onset","in 15 minutes"]}}function Pe(){let e="CRM_ACTIVITY_TODO_NOTIFICATION_DEFAULT_TEXT";switch(babelHelpers.classPrivateFieldGet(this,I)){case BX.CrmEntityType.enumeration.deal:e="CRM_ACTIVITY_TODO_NOTIFICATION_DEFAULT_TEXT_DEAL"}return s.Loc.getMessage(e)}function Se(){s.Dom.addClass(babelHelpers.classPrivateFieldGet(this,H),"--is-edit");babelHelpers.classPrivateFieldGet(this,B).emit("onFocus")}function He(e){const t=new a.BaseEvent({data:{description:e}});babelHelpers.classPrivateFieldGet(this,B).emit("onChangeDescription",t)}function ge(){babelHelpers.classPrivateFieldGet(this,B).emit("onSaveHotkeyPressed")}function we(e){return s.Type.isString(e)&&oe.BorderColor[e.toUpperCase()]}function ye(){return`crm-activity__todo-editor --border-${babelHelpers.classPrivateFieldGet(this,A)}`}function _e(){this.initFileUploader()}babelHelpers.defineProperty(oe,"BorderColor",f);const Ie=s.Reflection.namespace("BX.Crm.Activity");Ie.TodoEditor=oe;e.TodoEditorMode=S;e.TodoEditor=oe})(this.BX.Crm.Activity=this.BX.Crm.Activity||{},BX.Vue3,BX.Main,BX,BX.Event,BX.UI.EntitySelector,BX,BX.Main,BX.Crm.Timeline,BX.Crm.Activity,BX.Crm.Activity);
//# sourceMappingURL=todo-editor.bundle.map.js