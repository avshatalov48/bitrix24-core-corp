{"version":3,"file":"adding-popup.bundle.map.js","names":["this","BX","Crm","exports","main_core","main_popup","ui_buttons","crm_activity_todoEditor","main_core_events","ui_notification","_","t","_t","_classPrivateMethodInitSpec","obj","privateSet","_checkPrivateRedeclaration","add","_classPrivateFieldInitSpec","privateMap","value","set","privateCollection","has","TypeError","_classPrivateMethodGet","receiver","fn","_entityId","WeakMap","_entityTypeId","_currentUser","_popup","_popupContainer","_todoEditor","_eventEmitter","_prepareAndShowPopup","WeakSet","_fetchNearActivity","_createPopupIfNotExists","_saveAndClose","_actualizePopupLayout","_onChangeEditorDescription","_onEditorSaveHotkeyPressed","_onChangeUploaderContainerSize","AddingPopup","entityTypeId","entityId","currentUser","params","babelHelpers","classCallCheck","writable","classPrivateFieldSet","Text","toInteger","EventEmitter","classPrivateFieldGet","setEventNamespace","Type","isPlainObject","isObject","events","eventName","isFunction","subscribe","createClass","key","show","bindElement","mode","TodoEditorMode","ADD","popup","_createPopupIfNotExists2","call","setBindElement","isShown","hasChildNodes","TodoEditor","container","ownerTypeId","ownerId","onChangeDescription","_onChangeEditorDescription2","bind","onSaveHotkeyPressed","_onEditorSaveHotkeyPressed2","onChangeUploaderContainerSize","_onChangeUploaderContainerSize2","popupMode","setButtons","SaveButton","id","color","ButtonColor","PRIMARY","size","ButtonSize","EXTRA_SMALL","round","click","_saveAndClose2","CancelButton","close","subscribeOnce","_actualizePopupLayout2","getDescription","setFocused","resetToDefaults","then","emit","activity","UPDATE","setMode","setActivityId","setDescription","description","setDeadline","deadline","isArrayFilled","storageElementIds","setStorageElementIds","_prepareAndShowPopup2","bindPopup","_fetchNearActivity2","data","console","error","Promise","resolve","reject","ajax","runAction","catch","response","UI","Notification","Center","notify","content","errors","message","autoHideDelay","isDestroyed","Tag","render","Popup","overlay","opacity","cacheable","isScrollBlock","className","closeByEsc","closeIcon","angle","offset","padding","minWidth","maxWidth","minHeight","maxHeight","saveButton","getButton","getState","setWaiting","save","finally","adjustPosition","forceBindPosition","length","setState","ButtonState","DISABLED","event","getData","Activity","Main","Event"],"sources":["adding-popup.bundle.js"],"mappings":"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"}