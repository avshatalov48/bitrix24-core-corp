{"version":3,"file":"adding-popup.bundle.map.js","names":["this","BX","Crm","exports","crm_activity_todoEditor","main_core","main_core_events","main_popup","ui_buttons","ui_notification","_","t","_t","_classPrivateMethodInitSpec","obj","privateSet","_checkPrivateRedeclaration","add","_classPrivateFieldInitSpec","privateMap","value","set","privateCollection","has","TypeError","_classPrivateMethodGet","receiver","fn","_entityId","WeakMap","_entityTypeId","_currentUser","_pingSettings","_popup","_popupContainer","_todoEditor","_eventEmitter","_prepareAndShowPopup","WeakSet","_fetchNearActivity","_createPopupIfNotExists","_saveAndClose","_actualizePopupLayout","_onChangeEditorDescription","_onEditorSaveHotkeyPressed","_onChangeUploaderContainerSize","_onFocus","AddingPopup","entityTypeId","entityId","currentUser","pingSettings","params","babelHelpers","classCallCheck","writable","classPrivateFieldSet","Text","toInteger","EventEmitter","classPrivateFieldGet","setEventNamespace","Type","isPlainObject","isObject","events","eventName","isFunction","subscribe","createClass","key","show","bindElement","mode","TodoEditorMode","ADD","popup","_createPopupIfNotExists2","call","setBindElement","isShown","hasChildNodes","TodoEditor","container","ownerTypeId","ownerId","onChangeDescription","_onChangeEditorDescription2","bind","onSaveHotkeyPressed","_onEditorSaveHotkeyPressed2","onChangeUploaderContainerSize","_onChangeUploaderContainerSize2","onFocus","_onFocus2","popupMode","setButtons","SaveButton","id","color","ButtonColor","PRIMARY","size","ButtonSize","EXTRA_SMALL","round","click","_saveAndClose2","CancelButton","close","subscribeOnce","event","target","getZIndexComponent","setZIndex","_actualizePopupLayout2","getDescription","setFocused","resetToDefaults","then","emit","activity","UPDATE","setMode","setActivityId","setDescription","description","setDeadline","deadline","isArrayFilled","storageElementIds","setStorageElementIds","_prepareAndShowPopup2","bindPopup","_fetchNearActivity2","data","console","error","Promise","resolve","reject","ajax","runAction","catch","response","UI","Notification","Center","notify","content","errors","message","autoHideDelay","isDestroyed","Tag","render","Popup","overlay","opacity","cacheable","isScrollBlock","className","closeByEsc","closeIcon","angle","offset","padding","minWidth","maxWidth","minHeight","maxHeight","saveButton","getButton","getState","setWaiting","save","finally","adjustPosition","forceBindPosition","length","setState","ButtonState","DISABLED","getData","setTimeout","Activity","Event","Main"],"sources":["adding-popup.bundle.js"],"mappings":"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"}