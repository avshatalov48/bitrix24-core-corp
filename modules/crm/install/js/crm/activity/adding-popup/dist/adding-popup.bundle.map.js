{"version":3,"file":"adding-popup.bundle.map.js","names":["this","BX","Crm","exports","crm_activity_todoEditorV2","main_core","main_core_events","main_popup","ui_buttons","ui_notification","_","t","_t","_t2","_t3","_classPrivateMethodInitSpec","obj","privateSet","_checkPrivateRedeclaration","add","_classPrivateFieldInitSpec","privateMap","value","set","privateCollection","has","TypeError","_classPrivateMethodGet","receiver","fn","_entityId","WeakMap","_entityTypeId","_currentUser","_pingSettings","_calendarSettings","_colorSettings","_popup","_popupContainer","_popupToDoEditorContainer","_todoEditor","_eventEmitter","_context","_createToDoEditor","WeakSet","_prepareAndShowPopup","_fetchNearActivity","_createPopupIfNotExists","_getPopupTitle","_getPopupParams","_saveAndClose","_actualizePopupLayout","_onEditorSaveHotkeyPressed","_onChangeUploaderContainerSize","_onFocus","AddingPopup","entityTypeId","entityId","currentUser","settings","_params","babelHelpers","classCallCheck","writable","classPrivateFieldSet","Text","toInteger","EventEmitter","classPrivateFieldGet","setEventNamespace","Type","isObject","_settings$pingSetting","_settings$calendarSet","_settings$colorSettin","pingSettings","calendarSettings","colorSettings","isPlainObject","events","eventName","isFunction","subscribe","context","createClass","key","async","show","mode","TodoEditorMode","ADD","popup","_createPopupIfNotExists2","call","isShown","hasChildNodes","_createToDoEditor2","setButtons","SaveButton","id","color","ButtonColor","PRIMARY","size","ButtonSize","EXTRA_SMALL","round","click","_saveAndClose2","bind","CancelButton","close","subscribeOnce","event","target","getZIndexComponent","setZIndex","_actualizePopupLayout2","setFocused","resetToDefaults","then","emit","todoEditorMode","activity","params","UPDATE","setMode","setActivityId","setDescription","description","setDeadline","deadline","_prepareAndShowPopup2","_babelHelpers$classPr","_babelHelpers$classPr2","_analytics$c_section","_analytics$c_sub_sect","container","ownerTypeId","ownerId","onSaveHotkeyPressed","_onEditorSaveHotkeyPressed2","onChangeUploaderContainerSize","_onChangeUploaderContainerSize2","onFocus","_onFocus2","popupMode","analytics","section","c_section","subSection","c_sub_section","defaultDescription","TodoEditorV2","_fetchNearActivity2","data","console","error","Promise","resolve","reject","ajax","runAction","responseData","catch","response","UI","Notification","Center","notify","content","errors","message","autoHideDelay","isDestroyed","Tag","render","_getPopupTitle2","Popup","_getPopupParams2","Loc","getMessage","innerWidth","window","cacheable","isScrollBlock","className","closeByEsc","closeIcon","padding","minWidth","width","Math","maxWidth","minHeight","maxHeight","overlay","opacity","saveButton","getButton","getState","setWaiting","save","finally","adjustPosition","forceBindPosition","setTimeout","Activity","Event","Main"],"sources":["adding-popup.bundle.js"],"mappings":"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"}