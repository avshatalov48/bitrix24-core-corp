{"version":3,"file":"recorder.min.js","sources":["recorder.js"],"names":["micSvg","configMicrophone","stopMediaStream","mediaStream","MediaStream","getTracks","stop","forEach","track","events","unsupported","deviceReady","deviceListReady","deviceFailure","stateChanged","states","idle","failure","recording","paused","lastFrameDate","Date","getTime","BX","CrmRecorder","config","self","this","elements","main","element","container","canvas","callbacks","nop","state","microphones","defaultMicrophone","__getDefaultMicrophone","actualDeviceList","recorder","record","audioContext","analyserNode","mediaStreamNode","frequencyData","canvasContext","mic","image","Image","loaded","onload","src","URL","createObjectURL","Blob","type","init","prototype","start","isSupported","onCustomEvent","microphonesCount","navigator","mediaDevices","enumerateDevices","then","devices","device","kind","deviceId","label","getMediaStream","pause","__setState","resume","callback","isFunction","__createLayout","__bindEvents","width","height","getContext","imageSmoothingEnabled","mozImageSmoothingEnabled","webkitImageSmoothingEnabled","getUserMedia","__getConstraints","stream","replaceStream","Recorder","addCustomEvent","__onRecorderStopped","bind","__attachAnalyser","__visualize","__updateDeviceList","catch","error","changeMicrophone","microphoneId","__setDefaultMicrophone","__detachAnalyser","dispose","disconnect","close","newState","event","oldState","create","props","className","children","appendChild","window","requestAnimationFrame","now","getByteFrequencyData","frequencyPoints","frequencyBinCount","clearRect","beginPath","barWidth","barHeight","x","middlePoint","Math","ceil","drawImage","fillStyle","i","round","fillRect","closePath","localStorage","getItem","setItem","result","audio","video","browser","IsChrome","mandatory","sourceId","exact","AudioContext","webkitAudioContext","createAnalyser","fftSize","minDecibels","maxDecibels","createMediaStreamSource","connect","Uint8Array"],"mappings":"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"}