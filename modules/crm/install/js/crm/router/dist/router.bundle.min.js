this.BX=this.BX||{};(function(e,t){"use strict";var r=null;var n=function e(){babelHelpers.classCallCheck(this,e)};babelHelpers.defineProperty(n,"KANBAN","KANBAN");babelHelpers.defineProperty(n,"LIST","LIST");var l=function(){function e(){babelHelpers.classCallCheck(this,e);babelHelpers.defineProperty(this,"defaultRootUrlTemplates",{});babelHelpers.defineProperty(this,"customRootUrlTemplates",{});babelHelpers.defineProperty(this,"currentViews",{})}babelHelpers.createClass(e,[{key:"setUrlTemplates",value:function e(r){if(t.Type.isPlainObject(r.defaultRootUrlTemplates)){this.defaultRootUrlTemplates=r.defaultRootUrlTemplates}if(t.Type.isPlainObject(r.customRootUrlTemplates)){this.customRootUrlTemplates=r.customRootUrlTemplates}return this}},{key:"setCurrentListView",value:function e(t,r){this.currentViews[t]=r;return this}},{key:"getCurrentListView",value:function e(t){return this.currentViews[t]||n.LIST}},{key:"openTypeDetail",value:function r(n,l){if(!t.Type.isPlainObject(l)){l={}}l.width=702;var i=this.getTypeDetailUrl(n);if(i){return e.openSlider(i.toString(),l)}return null}},{key:"getTemplate",value:function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;if(r>0&&this.customRootUrlTemplates.hasOwnProperty(r)){if(this.customRootUrlTemplates[r].hasOwnProperty(t)){return this.customRootUrlTemplates[r][t]}return null}return this.defaultRootUrlTemplates.hasOwnProperty(t)?this.defaultRootUrlTemplates[t]:null}},{key:"getTypeDetailUrl",value:function e(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var n=this.getTemplate("bitrix:crm.type.detail",r);if(n){return new t.Uri(n.replace("#entityTypeId#",r))}return null}},{key:"getTypeListUrl",value:function e(){var r=this.getTemplate("bitrix:crm.type.list");if(r){return new t.Uri(r)}return null}},{key:"openTypeHelpPage",value:function t(){e.openHelper(null,13315798)}},{key:"showFeatureSlider",value:function t(r,n){e.Instance.closeSettingsMenu(r,n);BX.UI.InfoHelper.show("limit_smart_process_automation")}},{key:"getItemListUrlInCurrentView",value:function e(r){var l=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var i=this.getCurrentListView(r);var a;if(i===n.KANBAN){a=this.urlTemplates["bitrix:crm.kanban"]}else{a=this.urlTemplates["bitrix:crm.item.list"]}if(a){return new t.Uri(a.replace("#entityTypeId#",r).replace("#categoryId#",l))}return null}},{key:"getKanbanUrl",value:function e(r){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var l=this.getTemplate("bitrix:crm.item.kanban",r);if(l){return new t.Uri(l.replace("#entityTypeId#",r).replace("#categoryId#",n))}return null}},{key:"getItemListUrl",value:function e(r){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var l=this.getTemplate("bitrix:crm.item.list",r);if(l){return new t.Uri(l.replace("#entityTypeId#",r).replace("#categoryId#",n))}return null}},{key:"closeSettingsMenu",value:function e(r,n){if(n&&t.Type.isFunction(n.getMenuWindow)){var l=n.getMenuWindow();if(l){l.close();return}}var i=this;if(i&&t.Type.isFunction(i.close)){i.close()}}}],[{key:"openSlider",value:function e(r,n){if(!t.Type.isPlainObject(n)){n={}}n=babelHelpers.objectSpread({},{cacheable:false,allowChangeHistory:true,events:{}},n);return new Promise(function(e){if(t.Type.isString(r)&&r.length>1){n.events.onClose=function(t){e(t.getSlider())};BX.SidePanel.Instance.open(r,n)}else{e()}})}},{key:"openHelper",value:function e(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(r&&t.Type.isFunction(r.preventDefault)){r.preventDefault()}if(top.BX.Helper&&n>0){top.BX.Helper.show("redirect=detail&code="+n)}}},{key:"Instance",get:function n(){if(window.top!==window&&t.Reflection.getClass("top.BX.Crm.Router")){return window.top.BX.Crm.Router.Instance}if(r===null){r=new e}return r}}]);return e}();e.Router=l})(this.BX.Crm=this.BX.Crm||{},BX);
//# sourceMappingURL=router.bundle.map.js