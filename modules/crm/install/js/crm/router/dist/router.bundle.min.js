this.BX=this.BX||{};(function(e,t){"use strict";function r(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function n(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){babelHelpers.defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var i=null;var l=function e(){babelHelpers.classCallCheck(this,e)};babelHelpers.defineProperty(l,"KANBAN","KANBAN");babelHelpers.defineProperty(l,"LIST","LIST");var o=function(){function e(){babelHelpers.classCallCheck(this,e);babelHelpers.defineProperty(this,"defaultRootUrlTemplates",{});babelHelpers.defineProperty(this,"customRootUrlTemplates",{});babelHelpers.defineProperty(this,"currentViews",{})}babelHelpers.createClass(e,[{key:"setUrlTemplates",value:function e(r){if(t.Type.isPlainObject(r.defaultRootUrlTemplates)){this.defaultRootUrlTemplates=r.defaultRootUrlTemplates}if(t.Type.isPlainObject(r.customRootUrlTemplates)){this.customRootUrlTemplates=r.customRootUrlTemplates}return this}},{key:"setCurrentListView",value:function e(t,r){this.currentViews[t]=r;return this}},{key:"getCurrentListView",value:function e(t){return this.currentViews[t]||l.LIST}},{key:"openTypeDetail",value:function r(n,i){if(!t.Type.isPlainObject(i)){i={}}i.width=702;var l=this.getTypeDetailUrl(n);if(l){return e.openSlider(l.toString(),i)}return null}},{key:"getTemplate",value:function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;if(r>0&&this.customRootUrlTemplates.hasOwnProperty(r)){if(this.customRootUrlTemplates[r].hasOwnProperty(t)){return this.customRootUrlTemplates[r][t]}return null}return this.defaultRootUrlTemplates.hasOwnProperty(t)?this.defaultRootUrlTemplates[t]:null}},{key:"getTypeDetailUrl",value:function e(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var n=this.getTemplate("bitrix:crm.type.detail",r);if(n){return new t.Uri(n.replace("#entityTypeId#",r))}return null}},{key:"getTypeListUrl",value:function e(){var r=this.getTemplate("bitrix:crm.type.list");if(r){return new t.Uri(r)}return null}},{key:"openTypeHelpPage",value:function t(){e.openHelper(null,13315798)}},{key:"showFeatureSlider",value:function t(r,n){e.Instance.closeSettingsMenu(r,n);BX.UI.InfoHelper.show("limit_smart_process_automation")}},{key:"getItemListUrlInCurrentView",value:function e(r){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var i=this.getCurrentListView(r);var o;if(i===l.KANBAN){o=this.getTemplate("bitrix:crm.kanban",r)}else{o=this.getTemplate("bitrix:crm.item.list",r)}if(o){return new t.Uri(o.replace("#entityTypeId#",r).replace("#categoryId#",n))}return null}},{key:"getKanbanUrl",value:function e(r){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var i=this.getTemplate("bitrix:crm.item.kanban",r);if(i){return new t.Uri(i.replace("#entityTypeId#",r).replace("#categoryId#",n))}return null}},{key:"getItemListUrl",value:function e(r){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var i=this.getTemplate("bitrix:crm.item.list",r);if(i){return new t.Uri(i.replace("#entityTypeId#",r).replace("#categoryId#",n))}return null}},{key:"openDocumentSlider",value:function t(r){return e.openSlider("/bitrix/components/bitrix/crm.document.view/slider.php?documentId="+r,{width:1060,loader:"/bitrix/components/bitrix/crm.document.view/templates/.default/images/document_view.svg"})}},{key:"openSignDocumentSlider",value:function t(r,n){return e.openSlider("/bitrix/components/bitrix/crm.signdocument.view/slider.php?documentId="+r+"&memberHash="+n,{width:1060})}},{key:"openSignDocumentModifySlider",value:function t(r){return e.openSlider("/sign/doc/0/?docId="+r+"&stepId=changePartner&noRedirect=Y")}},{key:"openCalendarEventSlider",value:function e(t,r){var n="crm-calendar-slider-"+t+"-"+Math.floor(Math.random()*1e3);return new(window.top.BX||window.BX).Calendar.SliderLoader(t,{sliderId:n,isSharing:r}).show()}},{key:"closeSettingsMenu",value:function e(r,n){if(n&&t.Type.isFunction(n.getMenuWindow)){var i=n.getMenuWindow();if(i){i.close();return}}var l=this;if(l&&t.Type.isFunction(l.close)){l.close()}}}],[{key:"openSlider",value:function e(r,i){if(!t.Type.isPlainObject(i)){i={}}i=n(n({},{cacheable:false,allowChangeHistory:true,events:{}}),i);return new Promise((function(e){if(t.Type.isString(r)&&r.length>1){i.events.onClose=function(t){e(t.getSlider())};BX.SidePanel.Instance.open(r,i)}else{e()}}))}},{key:"openHelper",value:function e(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(r&&t.Type.isFunction(r.preventDefault)){r.preventDefault()}if(top.BX.Helper&&n>0){top.BX.Helper.show("redirect=detail&code="+n)}}},{key:"Instance",get:function r(){if(window.top!==window&&t.Reflection.getClass("top.BX.Crm.Router")){return window.top.BX.Crm.Router.Instance}if(i===null){i=new e}return i}}]);return e}();e.Router=o})(this.BX.Crm=this.BX.Crm||{},BX);
//# sourceMappingURL=router.bundle.map.js