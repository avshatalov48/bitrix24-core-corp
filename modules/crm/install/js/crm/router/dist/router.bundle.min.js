this.BX=this.BX||{};(function(e,t){"use strict";var n=null;var r=function e(){babelHelpers.classCallCheck(this,e)};babelHelpers.defineProperty(r,"KANBAN","KANBAN");babelHelpers.defineProperty(r,"LIST","LIST");var l=function(){function e(){babelHelpers.classCallCheck(this,e);babelHelpers.defineProperty(this,"defaultRootUrlTemplates",{});babelHelpers.defineProperty(this,"customRootUrlTemplates",{});babelHelpers.defineProperty(this,"currentViews",{})}babelHelpers.createClass(e,[{key:"setUrlTemplates",value:function e(n){if(t.Type.isPlainObject(n.defaultRootUrlTemplates)){this.defaultRootUrlTemplates=n.defaultRootUrlTemplates}if(t.Type.isPlainObject(n.customRootUrlTemplates)){this.customRootUrlTemplates=n.customRootUrlTemplates}return this}},{key:"setCurrentListView",value:function e(t,n){this.currentViews[t]=n;return this}},{key:"getCurrentListView",value:function e(t){return this.currentViews[t]||r.LIST}},{key:"openTypeDetail",value:function n(r,l){if(!t.Type.isPlainObject(l)){l={}}l.width=702;var i=this.getTypeDetailUrl(r);if(i){return e.openSlider(i.toString(),l)}return null}},{key:"getTemplate",value:function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;if(n>0&&this.customRootUrlTemplates.hasOwnProperty(n)){if(this.customRootUrlTemplates[n].hasOwnProperty(t)){return this.customRootUrlTemplates[n][t]}return null}return this.defaultRootUrlTemplates.hasOwnProperty(t)?this.defaultRootUrlTemplates[t]:null}},{key:"getTypeDetailUrl",value:function e(){var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var r=this.getTemplate("bitrix:crm.type.detail",n);if(r){return new t.Uri(r.replace("#entityTypeId#",n))}return null}},{key:"getTypeListUrl",value:function e(){var n=this.getTemplate("bitrix:crm.type.list");if(n){return new t.Uri(n)}return null}},{key:"openTypeHelpPage",value:function t(){e.openHelper(null,13315798)}},{key:"showFeatureSlider",value:function t(n,r){e.Instance.closeSettingsMenu(n,r);BX.UI.InfoHelper.show("limit_smart_process_automation")}},{key:"getItemListUrlInCurrentView",value:function e(n){var l=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var i=this.getCurrentListView(n);var a;if(i===r.KANBAN){a=this.getTemplate("bitrix:crm.kanban",n)}else{a=this.getTemplate("bitrix:crm.item.list",n)}if(a){return new t.Uri(a.replace("#entityTypeId#",n).replace("#categoryId#",l))}return null}},{key:"getKanbanUrl",value:function e(n){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var l=this.getTemplate("bitrix:crm.item.kanban",n);if(l){return new t.Uri(l.replace("#entityTypeId#",n).replace("#categoryId#",r))}return null}},{key:"getItemListUrl",value:function e(n){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var l=this.getTemplate("bitrix:crm.item.list",n);if(l){return new t.Uri(l.replace("#entityTypeId#",n).replace("#categoryId#",r))}return null}},{key:"closeSettingsMenu",value:function e(n,r){if(r&&t.Type.isFunction(r.getMenuWindow)){var l=r.getMenuWindow();if(l){l.close();return}}var i=this;if(i&&t.Type.isFunction(i.close)){i.close()}}}],[{key:"openSlider",value:function e(n,r){if(!t.Type.isPlainObject(r)){r={}}r=babelHelpers.objectSpread({},{cacheable:false,allowChangeHistory:true,events:{}},r);return new Promise(function(e){if(t.Type.isString(n)&&n.length>1){r.events.onClose=function(t){e(t.getSlider())};BX.SidePanel.Instance.open(n,r)}else{e()}})}},{key:"openHelper",value:function e(){var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(n&&t.Type.isFunction(n.preventDefault)){n.preventDefault()}if(top.BX.Helper&&r>0){top.BX.Helper.show("redirect=detail&code="+r)}}},{key:"Instance",get:function r(){if(window.top!==window&&t.Reflection.getClass("top.BX.Crm.Router")){return window.top.BX.Crm.Router.Instance}if(n===null){n=new e}return n}}]);return e}();e.Router=l})(this.BX.Crm=this.BX.Crm||{},BX);
//# sourceMappingURL=router.bundle.map.js