this.BX=this.BX||{};(function(e,t,i){"use strict";let n=null;class r{}r.KANBAN="KANBAN";r.LIST="LIST";class l{constructor(){this.defaultRootUrlTemplates={};this.customRootUrlTemplates={};this.currentViews={}}static get Instance(){if(window.top!==window&&t.Reflection.getClass("top.BX.Crm.Router")){return window.top.BX.Crm.Router.Instance}if(n===null){n=new l}return n}setUrlTemplates(e){if(t.Type.isPlainObject(e.defaultRootUrlTemplates)){this.defaultRootUrlTemplates=e.defaultRootUrlTemplates}if(t.Type.isPlainObject(e.customRootUrlTemplates)){this.customRootUrlTemplates=e.customRootUrlTemplates}return this}setCurrentListView(e,t){this.currentViews[e]=t;return this}getCurrentListView(e){return this.currentViews[e]||r.LIST}static openSlider(e,i=null){const n=String(e);if(!t.Type.isStringFilled(n)){return Promise.resolve()}let r=t.Type.isPlainObject(i)?i:{};r={cacheable:false,allowChangeHistory:true,events:{},...r};return new Promise((e=>{r.events.onClose=t=>e(t.getSlider());BX.SidePanel.Instance.open(n,r)}))}openTypeDetail(e,i,n){const r=t.Type.isPlainObject(i)?i:{};r.width=876;r.allowChangeHistory=false;r.cacheable=false;const o=this.getTypeDetailUrl(e);if(o){if(t.Type.isPlainObject(n)){o.setQueryParams(n)}return l.openSlider(o.toString(),r)}return null}openAutomatedSolutionDetail(e=0,i={}){const n=t.Type.isPlainObject(i)?i:{};n.width=876;n.allowChangeHistory=false;n.cacheable=false;const r=this.getAutomatedSolutionDetailUrl(e);if(r){return l.openSlider(r,n)}return null}getTemplate(e,t=0){var i;if(t>0&&Object.hasOwn(this.customRootUrlTemplates,t)){var n;return(n=this.customRootUrlTemplates[t][e])!=null?n:null}return(i=this.defaultRootUrlTemplates[e])!=null?i:null}getTypeDetailUrl(e=0){const i=this.getTemplate("bitrix:crm.type.detail",e);if(i){return new t.Uri(i.replace("#entityTypeId#",e))}return null}getTypeListUrl(){const e=this.getTemplate("bitrix:crm.type.list");if(e){return new t.Uri(e)}return null}openTypeHelpPage(){l.openHelper(null,13315798)}static openHelper(e=null,i=null){if(e&&t.Type.isFunction(e.preventDefault)){e.preventDefault()}if(top.BX.Helper&&i>0){top.BX.Helper.show(`redirect=detail&code=${i}`)}}showFeatureSlider(e,i,n="limit_smart_process_automation"){l.Instance.closeSettingsMenu(e,i);if(t.Reflection.getClass("BX.UI.InfoHelper.show")){BX.UI.InfoHelper.show(n)}}getItemListUrlInCurrentView(e,i=0){const n=this.getCurrentListView(e);let l=null;if(n===r.KANBAN){l=this.getTemplate("bitrix:crm.kanban",e)}else{l=this.getTemplate("bitrix:crm.item.list",e)}if(l){return new t.Uri(l.replace("#entityTypeId#",e).replace("#categoryId#",i))}return null}getKanbanUrl(e,i=0){const n=this.getTemplate("bitrix:crm.item.kanban",e);if(n){return new t.Uri(n.replace("#entityTypeId#",e).replace("#categoryId#",i))}return null}getItemListUrl(e,i=0){const n=this.getTemplate("bitrix:crm.item.list",e);if(n){return new t.Uri(n.replace("#entityTypeId#",e).replace("#categoryId#",i))}return null}openDocumentSlider(e){return l.openSlider(`/bitrix/components/bitrix/crm.document.view/slider.php?documentId=${e}`,{width:1060,loader:"/bitrix/components/bitrix/crm.document.view/templates/.default/images/document_view.svg"})}openSignDocumentSlider(e,t){return l.openSlider(`/bitrix/components/bitrix/crm.signdocument.view/slider.php?documentId=${e}&memberHash=${t}`,{width:1060})}openSignDocumentModifySlider(e){return l.openSlider(`/sign/doc/0/?docId=${e}&stepId=changePartner&noRedirect=Y`)}openCalendarEventSlider(e,t){const i=`crm-calendar-slider-${e}-${Math.floor(Math.random()*1e3)}`;return new(window.top.BX||window.BX).Calendar.SliderLoader(e,{sliderId:i,isSharing:t}).show()}closeSettingsMenu(e,i){if(i&&t.Type.isFunction(i.getMenuWindow)){const e=i.getMenuWindow();if(e){e.close();return}}const n=this;if(n&&t.Type.isFunction(n.close)){n.close()}}closeToolbarSettingsMenuRecursively(e,t){let i=t==null?void 0:t.getMenuWindow();if(!i){return}while(i){i.close();i=i.getParentMenuWindow()}}closeSliderOrRedirect(e,i=null){var n,r;const l=(n=BX.SidePanel)==null?void 0:(r=n.Instance)==null?void 0:r.getSliderByWindow(i!=null?i:window);if(l){l.close();return}if(e instanceof t.Uri){window.location.href=e.toString()}else{window.location.href=e}}getAutomatedSolutionListUrl(){return new t.Uri("/automation/type/automated_solution/list/")}getAutomatedSolutionDetailUrl(e){let i=t.Text.toInteger(e);i=i>0?i:0;return new t.Uri(`/automation/type/automated_solution/details/${i}/`)}}e.Router=l})(this.BX.Crm=this.BX.Crm||{},BX,BX.Main);
//# sourceMappingURL=router.bundle.map.js