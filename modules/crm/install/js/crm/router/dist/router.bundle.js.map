{"version":3,"file":"router.bundle.js","sources":["../src/router.js"],"sourcesContent":["import { Reflection, Text, Type, Uri } from 'main.core';\nimport { MenuItem } from 'main.popup';\n\nimport 'sidepanel';\n\nlet instance = null;\n\nclass ListViewTypes\n{\n\tstatic KANBAN = 'KANBAN';\n\tstatic LIST = 'LIST';\n}\n\ndeclare type UrlTemplatesSettings = {\n\tdefaultRootUrlTemplates: UrlTemplates,\n\tcustomRootUrlTemplates: CustomRootUrlTemplates,\n};\n\ndeclare type UrlTemplates = Object<string, string>;\n\ndeclare type CustomRootUrlTemplates = Object<number, UrlTemplates>;\n\n/**\n * @memberOf BX.Crm\n */\nclass Router\n{\n\tdefaultRootUrlTemplates: UrlTemplates = {};\n\tcustomRootUrlTemplates: CustomRootUrlTemplates = {};\n\tcurrentViews: Object<number, string> = {};\n\n\tstatic get Instance(): Router\n\t{\n\t\tif ((window.top !== window) && Reflection.getClass('top.BX.Crm.Router'))\n\t\t{\n\t\t\treturn window.top.BX.Crm.Router.Instance;\n\t\t}\n\n\t\tif (instance === null)\n\t\t{\n\t\t\tinstance = new Router();\n\t\t}\n\n\t\treturn instance;\n\t}\n\n\t/**\n\t * @public\n\t * @param params\n\t * @return {BX.Crm.Router}\n\t */\n\tsetUrlTemplates(params: UrlTemplatesSettings): Router\n\t{\n\t\tif (Type.isPlainObject(params.defaultRootUrlTemplates))\n\t\t{\n\t\t\tthis.defaultRootUrlTemplates = params.defaultRootUrlTemplates;\n\t\t}\n\n\t\tif (Type.isPlainObject(params.customRootUrlTemplates))\n\t\t{\n\t\t\tthis.customRootUrlTemplates = params.customRootUrlTemplates;\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tsetCurrentListView(entityTypeId: number, view: string): Router\n\t{\n\t\tthis.currentViews[entityTypeId] = view;\n\n\t\treturn this;\n\t}\n\n\tgetCurrentListView(entityTypeId: number): string\n\t{\n\t\treturn this.currentViews[entityTypeId] || ListViewTypes.LIST;\n\t}\n\n\tstatic openSlider(url: string | Uri, options: ?Object = null): Promise<?BX.SidePanel.Slider>\n\t{\n\t\tconst preparedUrl = String(url);\n\t\tif (!Type.isStringFilled(preparedUrl))\n\t\t{\n\t\t\treturn Promise.resolve();\n\t\t}\n\n\t\tlet preparedOptions = Type.isPlainObject(options) ? options : {};\n\t\tpreparedOptions = { cacheable: false, allowChangeHistory: true, events: {}, ...preparedOptions };\n\n\t\treturn new Promise((resolve) => {\n\t\t\tpreparedOptions.events.onClose = (event) => resolve(event.getSlider());\n\n\t\t\tBX.SidePanel.Instance.open(preparedUrl, preparedOptions);\n\t\t});\n\t}\n\n\topenTypeDetail(typeId: number, options: ?{}, queryParams: ?{}): ?Promise<?BX.SidePanel.Slider>\n\t{\n\t\tconst preparedOptions = Type.isPlainObject(options) ? options : {};\n\n\t\tpreparedOptions.width = 876;\n\t\tpreparedOptions.allowChangeHistory = false;\n\t\tpreparedOptions.cacheable = false;\n\n\t\tconst uri = this.getTypeDetailUrl(typeId);\n\t\tif (uri)\n\t\t{\n\t\t\tif (Type.isPlainObject(queryParams))\n\t\t\t{\n\t\t\t\turi.setQueryParams(queryParams);\n\t\t\t}\n\n\t\t\treturn Router.openSlider(uri.toString(), preparedOptions);\n\t\t}\n\n\t\treturn null;\n\t}\n\n\topenAutomatedSolutionDetail(automatedSolutionId: number = 0, options: {} = {}): ?Promise<?BX.SidePanel.Slider>\n\t{\n\t\tconst preparedOptions = Type.isPlainObject(options) ? options : {};\n\n\t\tpreparedOptions.width = 876;\n\t\tpreparedOptions.allowChangeHistory = false;\n\t\tpreparedOptions.cacheable = false;\n\n\t\tconst uri = this.getAutomatedSolutionDetailUrl(automatedSolutionId);\n\t\tif (uri)\n\t\t{\n\t\t\treturn Router.openSlider(uri, preparedOptions);\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t/**\n\t * @protected\n\t * @param component\n\t * @param entityTypeId\n\t * @return {string|null}\n\t */\n\tgetTemplate(component: string, entityTypeId: number = 0): ?string\n\t{\n\t\tif ((entityTypeId > 0) && Object.hasOwn(this.customRootUrlTemplates, entityTypeId))\n\t\t{\n\t\t\treturn this.customRootUrlTemplates[entityTypeId][component] ?? null;\n\t\t}\n\n\t\treturn this.defaultRootUrlTemplates[component] ?? null;\n\t}\n\n\tgetTypeDetailUrl(entityTypeId: number = 0): ?Uri\n\t{\n\t\tconst template = this.getTemplate('bitrix:crm.type.detail', entityTypeId);\n\t\tif (template)\n\t\t{\n\t\t\treturn new Uri(template.replace('#entityTypeId#', entityTypeId));\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tgetTypeListUrl(): ?Uri\n\t{\n\t\tconst template = this.getTemplate('bitrix:crm.type.list');\n\t\tif (template)\n\t\t{\n\t\t\treturn new Uri(template);\n\t\t}\n\n\t\treturn null;\n\t}\n\n\topenTypeHelpPage()\n\t{\n\t\tRouter.openHelper(null, 13_315_798);\n\t}\n\n\tstatic openHelper(event: Event = null, code: number = null)\n\t{\n\t\tif (event && Type.isFunction(event.preventDefault))\n\t\t{\n\t\t\tevent.preventDefault();\n\t\t}\n\n\t\tif (top.BX.Helper && code > 0)\n\t\t{\n\t\t\ttop.BX.Helper.show(`redirect=detail&code=${code}`);\n\t\t}\n\t}\n\n\tshowFeatureSlider(event, item, sliderCode: string = 'limit_smart_process_automation')\n\t{\n\t\tRouter.Instance.closeSettingsMenu(event, item);\n\n\t\tif (Reflection.getClass('BX.UI.InfoHelper.show'))\n\t\t{\n\t\t\tBX.UI.InfoHelper.show(sliderCode);\n\t\t}\n\t}\n\n\t/**\n\t * For dynamic entities only.\n\t * Does not support knowledge about whether kanban available or not.\n\t *\n\t * @param entityTypeId\n\t * @param categoryId\n\t */\n\tgetItemListUrlInCurrentView(entityTypeId: number, categoryId: ?number = 0): ?Uri\n\t{\n\t\tconst currentListView = this.getCurrentListView(entityTypeId);\n\t\tlet template = null;\n\t\tif (currentListView === ListViewTypes.KANBAN)\n\t\t{\n\t\t\ttemplate = this.getTemplate('bitrix:crm.kanban', entityTypeId);\n\t\t}\n\t\telse\n\t\t{\n\t\t\ttemplate = this.getTemplate('bitrix:crm.item.list', entityTypeId);\n\t\t}\n\n\t\tif (template)\n\t\t{\n\t\t\treturn new Uri(template.replace('#entityTypeId#', entityTypeId).replace('#categoryId#', categoryId));\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t/**\n\t * For factory based entities only.\n\t * Does not support knowledge about whether kanban available or not.\n\t *\n\t * @public\n\t * @param entityTypeId\n\t * @param categoryId\n\t * @return {null|BX.Uri}\n\t */\n\tgetKanbanUrl(entityTypeId: number, categoryId: ?number = 0): ?Uri\n\t{\n\t\tconst template = this.getTemplate('bitrix:crm.item.kanban', entityTypeId);\n\t\tif (template)\n\t\t{\n\t\t\treturn new Uri(template.replace('#entityTypeId#', entityTypeId).replace('#categoryId#', categoryId));\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t/**\n\t * For factory based entities only\n\t *\n\t * @public\n\t * @param entityTypeId\n\t * @param categoryId\n\t * @return {null|BX.Uri}\n\t */\n\tgetItemListUrl(entityTypeId: number, categoryId: ?number = 0): ?Uri\n\t{\n\t\tconst template = this.getTemplate('bitrix:crm.item.list', entityTypeId);\n\t\tif (template)\n\t\t{\n\t\t\treturn new Uri(template.replace('#entityTypeId#', entityTypeId).replace('#categoryId#', categoryId));\n\t\t}\n\n\t\treturn null;\n\t}\n\n\topenDocumentSlider(documentId: number): Promise<?BX.SidePanel.Slider>\n\t{\n\t\treturn Router.openSlider(\n\t\t\t`/bitrix/components/bitrix/crm.document.view/slider.php?documentId=${documentId}`,\n\t\t\t{\n\t\t\t\twidth: 1060,\n\t\t\t\tloader: '/bitrix/components/bitrix/crm.document.view/templates/.default/images/document_view.svg',\n\t\t\t},\n\t\t);\n\t}\n\n\topenSignDocumentSlider(documentId: number, memberHash: string): Promise<?BX.SidePanel.Slider>\n\t{\n\t\t// todo make a url template\n\t\treturn Router.openSlider(\n\t\t\t`/bitrix/components/bitrix/crm.signdocument.view/slider.php?documentId=${documentId}&memberHash=${memberHash}`,\n\t\t\t{\n\t\t\t\twidth: 1060,\n\t\t\t},\n\t\t);\n\t}\n\n\topenSignDocumentModifySlider(documentId: number): Promise<?BX.SidePanel.Slider>\n\t{\n\t\treturn Router.openSlider(\n\t\t\t`/sign/doc/0/?docId=${documentId}&stepId=changePartner&noRedirect=Y`,\n\t\t\t{\n\t\t\t\twidth: 1250,\n\t\t\t},\n\t\t);\n\t}\n\n\topenCalendarEventSlider(eventId: number, isSharing: boolean): Promise<?BX.SidePanel.Slider>\n\t{\n\t\tconst sliderId = `crm-calendar-slider-${eventId}-${Math.floor(Math.random() * 1000)}`;\n\n\t\treturn new (window.top.BX || window.BX).Calendar.SliderLoader(eventId, {\n\t\t\tsliderId,\n\t\t\tisSharing,\n\t\t}).show();\n\t}\n\n\tcloseSettingsMenu(event, item)\n\t{\n\t\tif (item && Type.isFunction(item.getMenuWindow))\n\t\t{\n\t\t\tconst window = item.getMenuWindow();\n\t\t\tif (window)\n\t\t\t{\n\t\t\t\twindow.close();\n\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\t// eslint-disable-next-line unicorn/no-this-assignment\n\t\tconst menu = this;\n\t\tif (menu && Type.isFunction(menu.close))\n\t\t{\n\t\t\tmenu.close();\n\t\t}\n\t}\n\n\tcloseToolbarSettingsMenuRecursively(event: PointerEvent, menuItem: MenuItem): void\n\t{\n\t\tlet menuWindow = menuItem?.getMenuWindow();\n\t\tif (!menuWindow)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\twhile (menuWindow)\n\t\t{\n\t\t\tmenuWindow.close();\n\t\t\tmenuWindow = menuWindow.getParentMenuWindow();\n\t\t}\n\t}\n\n\tcloseSliderOrRedirect(redirectTo: string | Uri, currentWindow: ?Window = null): void\n\t{\n\t\tconst slider: ?BX.SidePanel.Slider = BX.SidePanel?.Instance?.getSliderByWindow(currentWindow ?? window);\n\t\tif (slider)\n\t\t{\n\t\t\tslider.close();\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (redirectTo instanceof Uri)\n\t\t{\n\t\t\twindow.location.href = redirectTo.toString();\n\t\t}\n\t\telse\n\t\t{\n\t\t\twindow.location.href = redirectTo;\n\t\t}\n\t}\n\n\tgetAutomatedSolutionListUrl(): ?Uri\n\t{\n\t\treturn new Uri('/automation/type/automated_solution/list/');\n\t}\n\n\tgetAutomatedSolutionDetailUrl(id: number): ?Uri\n\t{\n\t\tlet normalizedId = Text.toInteger(id);\n\t\tnormalizedId = normalizedId > 0 ? normalizedId : 0;\n\n\t\treturn new Uri(`/automation/type/automated_solution/details/${normalizedId}/`);\n\t}\n}\n\nexport {\n\tRouter,\n};\n"],"names":["instance","ListViewTypes","KANBAN","LIST","Router","defaultRootUrlTemplates","customRootUrlTemplates","currentViews","Instance","window","top","Reflection","getClass","BX","Crm","setUrlTemplates","params","Type","isPlainObject","setCurrentListView","entityTypeId","view","getCurrentListView","openSlider","url","options","preparedUrl","String","isStringFilled","Promise","resolve","preparedOptions","cacheable","allowChangeHistory","events","onClose","event","getSlider","SidePanel","open","openTypeDetail","typeId","queryParams","width","uri","getTypeDetailUrl","setQueryParams","toString","openAutomatedSolutionDetail","automatedSolutionId","getAutomatedSolutionDetailUrl","getTemplate","component","Object","hasOwn","template","Uri","replace","getTypeListUrl","openTypeHelpPage","openHelper","code","isFunction","preventDefault","Helper","show","showFeatureSlider","item","sliderCode","closeSettingsMenu","UI","InfoHelper","getItemListUrlInCurrentView","categoryId","currentListView","getKanbanUrl","getItemListUrl","openDocumentSlider","documentId","loader","openSignDocumentSlider","memberHash","openSignDocumentModifySlider","openCalendarEventSlider","eventId","isSharing","sliderId","Math","floor","random","Calendar","SliderLoader","getMenuWindow","close","menu","closeToolbarSettingsMenuRecursively","menuItem","menuWindow","getParentMenuWindow","closeSliderOrRedirect","redirectTo","currentWindow","slider","getSliderByWindow","location","href","getAutomatedSolutionListUrl","id","normalizedId","Text","toInteger"],"mappings":"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"}