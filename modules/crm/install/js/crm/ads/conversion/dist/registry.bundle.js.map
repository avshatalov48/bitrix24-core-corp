{"version":3,"file":"registry.bundle.js","sources":["../src/conversion.js","../src/facebookconversion.js","../src/deal.js","../src/form.js","../src/payment.js","../src/lead.js","../src/registry.js"],"sourcesContent":["import { Loc, Tag, Type } from 'main.core';\nimport { Layout } from \"ui.sidepanel.layout\";\n\nexport class Conversion\n{\n\tconstructor(width : number = 800)\n\t{\n\t\tthis.width = width;\n\t}\n\n\tgetSliderId() : string\n\t{\n\t\treturn '';\n\t}\n\n\tshow() : void\n\t{\n\n\t}\n}","import { Event, Loc, Runtime, Tag, Type } from 'main.core';\nimport { Layout } from \"ui.sidepanel.layout\";\nimport { LoginFactory } from 'seo.ads.login';\nimport { Conversion } from \"./conversion\";\n\nexport class FacebookConversion extends Conversion\n{\n\tconstructor(width : number = 800)\n\t{\n\t\tsuper(width);\n\t\tthis.tag = Tag.render`<div/>`;\n\t\tBX.addCustomEvent(\n\t\t\twindow,\n\t\t\t'seo-client-auth-result',\n\t\t\t(eventData) => {\n\t\t\t\teventData.reload = false;\n\t\t\t\tthis.slider?.reload();\n\t\t\t}\n\t\t);\n\t}\n\n\tgetSliderId()\n\t{\n\t\treturn this.code + ':conversion';\n\t}\n\n\tgetSliderTitle()\n\t{\n\t\tswitch (this.type)\n\t\t{\n\t\t\tcase 'facebook.form':\n\t\t\t\treturn Loc.getMessage('CRM_ADS_CONVERSION_FORM_SLIDER_TITLE');\n\t\t\tcase 'facebook.lead':\n\t\t\t\treturn Loc.getMessage('CRM_ADS_CONVERSION_LEAD_SLIDER_TITLE');\n\t\t\tcase 'facebook.deal':\n\t\t\t\treturn Loc.getMessage('CRM_ADS_CONVERSION_DEAL_SLIDER_TITLE');\n\t\t\tcase 'facebook.payment':\n\t\t\t\treturn Loc.getMessage('CRM_ADS_CONVERSION_PAYMENT_SLIDER_TITLE');\n\t\t\tdefault:\n\t\t\t\treturn '';\n\t\t}\n\t}\n\n\tnotify(message: string)\n\t{\n\t\tBX.UI.Notification.Center.notify({\n\t\t\tcontent: message\n\t\t});\n\t}\n\n\tsaveConfiguration(data)\n\t{\n\t\treturn BX.ajax.runAction('crm.ads.conversion.saveConfiguration', {\n\t\t\tdata: {\n\t\t\t\tcode: this.code,\n\t\t\t\tconfiguration: data\n\t\t\t}\n\t\t});\n\t}\n\n\tonItemEnable(id, switcher)\n\t{\n\t\tthis.data.configuration.items = Type.isArray(this.data.configuration.items) ? this.data.configuration.items : [];\n\t\tif (!this.data.configuration.items.includes(id))\n\t\t{\n\t\t\tthis.data.configuration.items.push(id);\n\t\t}\n\n\t\tthis.saveConfiguration(this.data.configuration)\n\t\t\t.then((response) => {\n\t\t\t\tif (!response.data.success)\n\t\t\t\t{\n\t\t\t\t\tswitcher.check(true,false);\n\t\t\t\t\tthis.notify(Loc.getMessage('CRM_ADS_CONVERSION_ERROR_SAVE'));\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(() => {\n\t\t\t\t\tswitcher.check(true,false);\n\t\t\t\t\tthis.notify(Loc.getMessage('CRM_ADS_CONVERSION_ERROR_SAVE'));\n\t\t\t\t}\n\t\t\t)\n\t\t;\n\t}\n\n\tonItemDisable(id, switcher)\n\t{\n\t\tthis.data.configuration.items = Type.isArray(this.data.configuration.items) ? this.data.configuration.items : [];\n\t\tfor (let i = 0; i < this.data.configuration.items.length; i++)\n\t\t{\n\t\t\tif (id == this.data.configuration.items[i])\n\t\t\t{\n\t\t\t\tthis.data.configuration.items.splice(i, 1);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tthis.saveConfiguration(this.data.configuration)\n\t\t\t.then((response) => {\n\t\t\t\tif (!response.data.success)\n\t\t\t\t{\n\t\t\t\t\tswitcher.check(true,false);\n\t\t\t\t\tthis.notify(Loc.getMessage('CRM_ADS_CONVERSION_ERROR_SAVE'));\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(() => {\n\t\t\t\t\tswitcher.check(true,false);\n\t\t\t\t\tthis.notify(Loc.getMessage('CRM_ADS_CONVERSION_ERROR_SAVE'));\n\t\t\t\t}\n\t\t\t)\n\t\t;\n\t}\n\n\tlogin()\n\t{\n\t\tLoginFactory.getLoginObject({\n\t\t\t'TYPE' : 'facebook',\n\t\t\t'ENGINE_CODE' : 'business.facebook'\n\t\t}).login();\n\t}\n\n\tloadData()\n\t{\n\t\treturn BX.ajax.runAction('crm.ads.conversion.load', {\n\t\t\tdata: {\n\t\t\t\ttype: this.code\n\t\t\t}\n\t\t});\n\t}\n\n\tlogout()\n\t{\n\t\tthis.slider?.showLoader();\n\t\treturn BX.ajax.runAction(\n\t\t\t'crm.ads.conversion.logout',\n\t\t\t{\n\t\t\t\t\tdata: {},\n\t\t\t\t\tanalyticsLabel: {\n\t\t\t\t\t\tconnect: \"FBE\",\n\t\t\t\t\t\taction: \"disconnect\",\n\t\t\t\t\t\ttype: \"disconnect\"\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t)\n\t\t\t.then(()=> {\n\t\t\t\tthis.slider?.reload();\n\t\t\t})\n\t\t\t.catch(()=>{\n\t\t\t\tthis.slider?.reload();\n\t\t\t})\n\t}\n\n\tgetContentTitle()\n\t{\n\t\treturn '';\n\t}\n\n\trender ()\n\t{\n\t\tthis.tag.innerHTML = '';\n\t\tif (this.data && this.data.available)\n\t\t{\n\t\t\tthis.tag.appendChild(Tag.render`\n\t\t\t\t<div class=\"ui-slider-section crm-ads-conversion-title-section\">\n\t\t\t\t\t<span class=\"ui-icon ui-slider-icon ui-icon-service-fb\">\n\t\t\t\t\t\t<i></i>\n\t\t\t\t\t</span>\n\t\t\t\t\t<div class=\"ui-slider-content-box\">\n\t\t\t\t\t\t<div class=\"ui-slider-paragraph-2\">\n\t\t\t\t\t\t\t${Loc.getMessage('CRM_ADS_CONVERSION_LOGIN_OPPORTUNITY_TITLE')}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<ul class=\"ui-slider-list crm-ads-conversion-features\">\n\t\t\t\t\t\t\t<li class=\"ui-slider-list-item\">\n\t\t\t\t\t\t\t\t<span class=\"ui-slider-list-text\">\n\t\t\t\t\t\t\t\t\t${Loc.getMessage('CRM_ADS_CONVERSION_LOGIN_OPPORTUNITY_TEXT_LIST_1')}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li class=\"ui-slider-list-item\">\n\t\t\t\t\t\t\t\t<span class=\"ui-slider-list-text\">\n\t\t\t\t\t\t\t\t\t${Loc.getMessage('CRM_ADS_CONVERSION_LOGIN_OPPORTUNITY_TEXT_LIST_2')}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li class=\"ui-slider-list-item\">\n\t\t\t\t\t\t\t\t<span class=\"ui-slider-list-text\">\n\t\t\t\t\t\t\t\t\t${Loc.getMessage('CRM_ADS_CONVERSION_LOGIN_OPPORTUNITY_TEXT_LIST_3')}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li class=\"ui-slider-list-item\">\n\t\t\t\t\t\t\t\t<span class=\"ui-slider-list-text\">\n\t\t\t\t\t\t\t\t\t${Loc.getMessage('CRM_ADS_CONVERSION_LOGIN_OPPORTUNITY_TEXT_LIST_4')}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t<a \n\t\t\t\t\t\t\thref=\"https://www.facebook.com/business/help/1292598407460746?id=1205376682832142\" \n\t\t\t\t\t\t\tclass=\"ui-slider-link\" \n\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t${Loc.getMessage('CRM_ADS_CONVERSION_LOGIN_LINK')}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`);\n\t\t\tif (this.data.auth && this.data.profile)\n\t\t\t{\n\t\t\t\tthis.tag.appendChild(Tag.render`\n\t\t\t\t\t<div class=\"ui-slider-section crm-ads-conversion-account-section\">\n\t\t\t\t\t\t<div class=\"crm-ads-conversion-block\">\n\t\t\t\t\t\t\t<div class=\"crm-ads-conversion-social crm-ads-conversion-social-facebook\">\n\t\t\t\t\t\t\t\t<div class=\"crm-ads-conversion-social-avatar\">\n\t\t\t\t\t\t\t\t\t<div \n\t\t\t\t\t\t\t\t\t\tclass=\"crm-ads-conversion-social-avatar-icon\" \n\t\t\t\t\t\t\t\t\t\tstyle=\"background-image: url(${Tag.safe`${this.data.profile.picture}`})\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"crm-ads-conversion-social-user\">\n\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t${this.data.profile.url ? 'href=\"' + Tag.safe`${this.data.profile.url}` + '\"' : \"\"}\n\t\t\t\t\t\t\t\t\t\ttarget=\"_top\" \n\t\t\t\t\t\t\t\t\t\tclass=\"crm-ads-conversion-social-user-link\" \n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t${Tag.safe`${this.data.profile.name}`}\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"crm-ads-conversion-social-shutoff\">\n\t\t\t\t\t\t\t\t\t<span \n\t\t\t\t\t\t\t\t\t\tclass=\"crm-ads-conversion-social-shutoff-link\" \n\t\t\t\t\t\t\t\t\t\tonclick=\"${this.logout.bind(this)}\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t${Loc.getMessage('CRM_ADS_CONVERSION_LOGOUT')}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t`);\n\n\t\t\t\tif (Type.isArray(this.data.items))\n\t\t\t\t{\n\t\t\t\t\tthis.tag.appendChild(this.data.items.reduce(\n\t\t\t\t\t\t(tag, value) => {\n\t\t\t\t\t\t\tlet itemNode = Tag.render`\n\t\t\t\t\t\t\t\t<div class=\"crm-ads-conversion-settings-block\">\n\t\t\t\t\t\t\t\t\t<div class=\"crm-ads-conversion-settings-name-block\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"crm-ads-conversion-settings-name\">${Tag.safe`${value.name}`}</span>\n\t\t\t\t\t\t\t\t\t\t<span class=\"crm-ads-conversion-settings-detail\">\n\t\t\t\t\t\t\t\t\t\t\t${Loc.getMessage('CRM_ADS_CONVERSION_DETAIL')}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"crm-ads-conversion-settings-control\">\n\t\t\t\t\t\t\t\t\t\t<span data-switcher-node=\"\"/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t`;\n\t\t\t\t\t\t\tlet switcher = new BX.UI.Switcher({\n\t\t\t\t\t\t\t\tnode: itemNode.querySelector('[data-switcher-node]'),\n\t\t\t\t\t\t\t\tchecked: value.enable,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tswitcher.handlers = {\n\t\t\t\t\t\t\t\tchecked: this.onItemDisable.bind(this,value.id,switcher),\n\t\t\t\t\t\t\t\tunchecked: this.onItemEnable.bind(this,value.id,switcher)\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\ttag.appendChild(itemNode);\n\t\t\t\t\t\t\treturn tag;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tTag.render`\n\t\t\t\t\t\t<div class=\"ui-slider-section crm-ads-conversion-settings\">\n\t\t\t\t\t\t\t<div class=\"ui-slider-heading-3\">${Tag.safe`${this.getScriptMessage()}`}</div>\n\t\t\t\t\t\t</div>`\n\t\t\t\t\t));\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.tag.appendChild(Tag.render`\n\t\t\t\t\t<div class=\"ui-slider-section\">\n\t\t\t\t\t\t<div class=\"ui-slider-content-box\">\n\t\t\t\t\t\t\t<div class=\"ui-slider-heading-3\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('CRM_ADS_CONVERSION_LOGIN_CONNECT_TITLE')}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"crm-ads-conversion-login-block\">\n\t\t\t\t\t\t\t\t<div class=\"crm-ads-conversion-login-wrapper\">\n\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\tclass=\"webform-small-button webform-small-button-transparent\"\n\t\t\t\t\t\t\t\t\t\tonclick=\"${this.login.bind(this)}\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t${Loc.getMessage('CRM_ADS_CONVERSION_LOGIN')}\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t<span class=\"crm-ads-conversion-settings-detail\">\n\t\t\t\t\t\t\t\t\t\t${Loc.getMessage('CRM_ADS_CONVERSION_LOGIN_OPPORTUNITY_TEXT_LIST_5')}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t`);\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.tag.appendChild(Tag.render`\n\t\t\t\t<div class=\"ui-slider-no-access\">\n\t\t\t\t\t<div class=\"ui-slider-no-access-inner\">\n\t\t\t\t\t\t<div class=\"ui-slider-no-access-title\">\n\t\t\t\t\t\t\t${Loc.getMessage('CRM_ADS_CONVERSION_ERROR_TITLE_SERVICE_ERROR')}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"ui-slider-no-access-subtitle\">\n\t\t\t\t\t\t\t${\n\t\t\t\t\t\t\t\tthis.errors.length > 0?\n\t\t\t\t\t\t\t\t\tthis.errors\n\t\t\t\t\t\t\t\t\t\t.reduce(\n\t\t\t\t\t\t\t\t\t\t\t(unique, value) => {\n\t\t\t\t\t\t\t\t\t\t\t\tlet item = Tag.safe`${this.getErrorMessage(value)}`;\n\t\t\t\t\t\t\t\t\t\t\t\tif (unique.includes(item))\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\tunique.push(item)\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\treturn unique;\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t[]\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t.join('<br>') : \n\t\t\t\t\t\t\t\t\tLoc.getMessage('CRM_ADS_CONVERSION_ERROR_MESSAGE_SERVICE_ERROR')\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"ui-slider-no-access-img\">\n\t\t\t\t\t\t\t<div class=\"ui-slider-no-access-img-inner\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`);\n\t\t}\n\t}\n\n\tgetErrorMessage(value)\n\t{\n\t\tif (Type.isObject(value) && value.code)\n\t\t{\n\t\t\tif (value.code === \"permissions\")\n\t\t\t{\n\t\t\t\treturn Loc.getMessage('CRM_ADS_CONVERSION_ERROR_ACCESS_DENY');\n\t\t\t}\n\n\t\t\tif (value.code === \"modules\" && value.customData)\n\t\t\t{\n\t\t\t\tswitch (value.customData.module)\n\t\t\t\t{\n\t\t\t\t\tcase \"seo\":\n\t\t\t\t\t\treturn Loc.getMessage('CRM_ADS_CONVERSION_ERROR_SEO_NOT_INSTALLED');\n\t\t\t\t\tcase \"crm\":\n\t\t\t\t\t\treturn Loc.getMessage('CRM_ADS_CONVERSION_ERROR_CRM_NOT_INSTALLED');\n\t\t\t\t\tcase \"socialservices\":\n\t\t\t\t\t\treturn Loc.getMessage('CRM_ADS_CONVERSION_ERROR_SOCIAL_NOT_INSTALLED');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn Loc.getMessage('CRM_ADS_CONVERSION_ERROR_UNKNOWN_ERROR')\n\t}\n\n\tsaveData(data)\n\t{\n\t\tif (data)\n\t\t{\n\t\t\tdata.configuration = Type.isObject(data.configuration)? data.configuration : {};\n\t\t\tthis.data = data;\n\t\t}\n\t}\n\n\tsaveErrors(errors)\n\t{\n\t\tthis.errors = Type.isArray(errors)? errors: [];\n\t}\n\n\tshow() : void\n\t{\n\t\tthis.slider = this.slider ?? (BX.SidePanel.Instance.open(this.getSliderId(),{\n\t\t\tcontentCallback: () => {\n\t\t\t\treturn Runtime.loadExtension('ui.sidepanel.layout').then(() => {\n\t\t\t\t\treturn BX.UI.SidePanel.Layout.createContent({\n\t\t\t\t\t\t\ttitle: this.getContentTitle(),\n\t\t\t\t\t\t\textensions:[ 'crm.ads.conversion', 'ui.forms','ui.switcher','seo.ads.login' ],\n\t\t\t\t\t\t\tdesign:{ section: false, margin: true },\n\t\t\t\t\t\t\tcontent: () =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treturn this.loadData()\n\t\t\t\t\t\t\t\t\t.then((response) => {\n\t\t\t\t\t\t\t\t\t\tthis.saveData(response.data);\n\t\t\t\t\t\t\t\t\t\tthis.saveErrors(response.errors);\n\t\t\t\t\t\t\t\t\t\tthis.render();\n\t\t\t\t\t\t\t\t\t\treturn this.tag;\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t.catch((response) => {\n\t\t\t\t\t\t\t\t\t\tthis.saveData(response.data);\n\t\t\t\t\t\t\t\t\t\tthis.saveErrors(response.errors);\n\t\t\t\t\t\t\t\t\t\tthis.render();\n\n\t\t\t\t\t\t\t\t\t\tif (((response.errors || [])[0] || {}).code === 100)\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tBX.UI.InfoHelper.show('crm_ad_conversion');\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\treturn this.tag;\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t},\n\t\t\ttitle: this.getSliderTitle(),\n\t\t\twidth: (this.width ?? BX.SidePanel.Instance.getTopSlider()?.getWidth() ?? 800)\n\t\t})?\n\t\t\tBX.SidePanel.Instance.getSlider(this.getSliderId()) :\n\t\t\tnull\n\t\t);\n\t}\n}","import {FacebookConversion} from \"./facebookconversion\";\nimport { Loc, Tag, Type, Event, Dom} from \"main.core\";\nimport './style.css'\n\nexport class Deal extends FacebookConversion\n{\n\tconstructor(width : number = 800)\n\t{\n\t\tsuper(width);\n\t\tthis.code = 'facebook.deal';\n\t}\n\n\tgetContentTitle()\n\t{\n\t\treturn Loc.getMessage('CRM_ADS_CONVERSION_DEAL_CONTENT_TITLE');\n\t}\n\n\tgetSliderTitle()\n\t{\n\t\treturn Loc.getMessage('CRM_ADS_CONVERSION_DEAL_SLIDER_TITLE');\n\t}\n\n\tgetScriptMessage()\n\t{\n\t\treturn Loc.getMessage('CRM_ADS_CONVERSION_DEAL_SLIDER_ITEM_TITLE');\n\t}\n}","import { FacebookConversion } from \"./facebookconversion\";\nimport { Loc, Tag, Type, Event, Dom } from \"main.core\";\nimport './style.css'\n\nexport class Form extends FacebookConversion\n{\n\tconstructor(width: number = 800)\n\t{\n\t\tsuper(width);\n\t\tthis.code = 'facebook.webform';\n\n\t}\n\n\tgetSliderTitle()\n\t{\n\t\treturn Loc.getMessage('CRM_ADS_CONVERSION_FORM_SLIDER_TITLE');\n\t}\n\n\tgetScriptMessage()\n\t{\n\t\treturn Loc.getMessage('CRM_ADS_CONVERSION_FORM_SLIDER_ITEM_TITLE');\n\t}\n\n\tgetContentTitle()\n\t{\n\t\treturn Loc.getMessage('CRM_ADS_CONVERSION_FORM_CONTENT_TITLE');\n\t}\n\n}","import {FacebookConversion} from \"./facebookconversion\";\nimport { Loc, Tag, Type, Event, Dom} from \"main.core\";\nimport './style.css'\n\nexport class Payment extends FacebookConversion\n{\n\tconstructor(width : number = 800)\n\t{\n\t\tsuper(width);\n\t\tthis.code = 'facebook.payment';\n\t}\n\n\tgetScriptMessage()\n\t{\n\t\treturn Loc.getMessage('CRM_ADS_CONVERSION_PAYMENT_SLIDER_TITLE');\n\t}\n\n\tgetSliderTitle()\n\t{\n\t\treturn Loc.getMessage('CRM_ADS_CONVERSION_PAYMENT_SLIDER_TITLE');\n\t}\n\n\tonItemEnable(id,switcher)\n\t{\n\t\tthis.onOptionClick(switcher);\n\t}\n\n\tonItemDisable(id,switcher)\n\t{\n\t\tthis.onOptionClick(switcher);\n\t}\n\n\tgetContentTitle()\n\t{\n\t\treturn Loc.getMessage('CRM_ADS_CONVERSION_PAYMENT_CONTENT_TITLE');\n\t}\n\n\tonOptionClick(switcher)\n\t{\n\t\tthis.data.configuration.enable = !(this.data.configuration.enable == 'true');\n\t\tthis.saveConfiguration(this.data.configuration)\n\t\t\t.then((response) => {\n\t\t\t\tif (!response.data.success)\n\t\t\t\t{\n\t\t\t\t\tswitcher.check(!this.data.configuration.enabled,false);\n\t\t\t\t\tthis.notify(Loc.getMessage('CRM_ADS_CONVERSION_ERROR_SAVE'));\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(() => {\n\t\t\t\t\tswitcher.check(!this.data.configuration.enabled,false);\n\t\t\t\t\tthis.notify(Loc.getMessage('CRM_ADS_CONVERSION_ERROR_SAVE'));\n\t\t\t\t}\n\t\t\t)\n\t}\n\n\tsaveData(data)\n\t{\n\t\tif (data)\n\t\t{\n\t\t\tdata.configuration = Type.isObject(data.configuration)? data.configuration : {};\n\t\t\tdata.items = [\n\t\t\t\t{\n\t\t\t\t\tid: null,\n\t\t\t\t\tname: Loc.getMessage('CRM_ADS_CONVERSION_PAYMENT_OPTION'),\n\t\t\t\t\tenable: data.configuration.enable == 'true'\n\t\t\t\t}\n\t\t\t];\n\t\t}\n\t\tsuper.saveData(data);\n\t}\n}","import {FacebookConversion} from \"./facebookconversion\";\nimport { Loc, Tag, Type, Event, Dom } from \"main.core\";\nimport './style.css'\n\nexport class Lead extends FacebookConversion\n{\n\tconstructor(width : number = 800)\n\t{\n\t\tsuper(width);\n\t\tthis.code = 'facebook.lead';\n\t}\n\n\tgetScriptMessage()\n\t{\n\t\treturn Loc.getMessage('CRM_ADS_CONVERSION_LEAD_SLIDER_TITLE');\n\t}\n\n\tgetSliderTitle()\n\t{\n\t\treturn Loc.getMessage('CRM_ADS_CONVERSION_LEAD_SLIDER_TITLE');\n\t}\n\n\tonItemEnable(id,switcher)\n\t{\n\t\tthis.onOptionClick(switcher);\n\t}\n\n\tonItemDisable(id,switcher)\n\t{\n\t\tthis.onOptionClick(switcher);\n\t}\n\n\tgetContentTitle()\n\t{\n\t\treturn Loc.getMessage('CRM_ADS_CONVERSION_LEAD_CONTENT_TITLE');\n\t}\n\n\tonOptionClick(switcher)\n\t{\n\t\tthis.data.configuration.enable = !(this.data.configuration.enable == 'true');\n\t\tthis.saveConfiguration(this.data.configuration)\n\t\t\t.then((response) => {\n\t\t\t\tif (!response.data.success)\n\t\t\t\t{\n\t\t\t\t\tswitcher.check(!this.data.configuration.enabled,false);\n\t\t\t\t\tthis.notify(Loc.getMessage('CRM_ADS_CONVERSION_ERROR_SAVE'));\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(() => {\n\t\t\t\t\tswitcher.check(!this.data.configuration.enabled,false);\n\t\t\t\t\tthis.notify(Loc.getMessage('CRM_ADS_CONVERSION_ERROR_SAVE'));\n\t\t\t\t}\n\t\t\t)\n\t}\n\t saveData(data)\n\t {\n\t \tif (data)\n\t\t{\n\t\t\tdata.configuration = Type.isObject(data.configuration)? data.configuration : {};\n\t\t\tdata.items = [\n\t\t\t\t{\n\t\t\t\t\tid: null,\n\t\t\t\t\tname: Loc.getMessage('CRM_ADS_CONVERSION_LEAD_OPTION'),\n\t\t\t\t\tenable: data.configuration.enable == 'true'\n\t\t\t\t}\n\t\t\t];\n\t\t}\n\t \tsuper.saveData(data);\n\t }\n}","import {Conversion} from \"./conversion\";\nimport {Deal} from \"./deal\";\nimport {Form} from \"./form\";\nimport {Payment} from \"./payment\";\nimport {Lead} from \"./lead\";\n\nimport 'ui.fonts.opensans';\n\nexport class Registry\n{\n\tstatic conversion(code : string) : Conversion\n\t{\n\t\tswitch (code)\n\t\t{\n\t\t\tcase 'facebook_conversion_deal':\n\t\t\t\treturn new Deal();\n\t\t\tcase 'facebook_conversion_webform':\n\t\t\t\treturn new Form();\n\t\t\tcase 'facebook_conversion_payment':\n\t\t\t\treturn new Payment();\n\t\t\tcase 'facebook_conversion_lead':\n\t\t\t\treturn new Lead();\n\t\t}\n\n\t}\n}"],"names":["Conversion","width","FacebookConversion","tag","Tag","render","BX","addCustomEvent","window","eventData","reload","slider","code","type","Loc","getMessage","message","UI","Notification","Center","notify","content","data","ajax","runAction","configuration","id","switcher","items","Type","isArray","includes","push","saveConfiguration","then","response","success","check","i","length","splice","LoginFactory","getLoginObject","login","showLoader","analyticsLabel","connect","action","innerHTML","available","appendChild","auth","profile","safe","picture","url","name","logout","bind","reduce","value","itemNode","Switcher","node","querySelector","checked","enable","handlers","onItemDisable","unchecked","onItemEnable","getScriptMessage","errors","unique","item","getErrorMessage","join","isObject","customData","module","SidePanel","Instance","open","getSliderId","contentCallback","Runtime","loadExtension","Layout","createContent","title","getContentTitle","extensions","design","section","margin","loadData","saveData","saveErrors","InfoHelper","show","getSliderTitle","getTopSlider","getWidth","getSlider","Deal","Form","Payment","onOptionClick","enabled","Lead","Registry"],"mappings":"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"}