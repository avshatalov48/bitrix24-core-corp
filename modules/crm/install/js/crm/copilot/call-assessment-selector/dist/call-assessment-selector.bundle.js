this.BX=this.BX||{},this.BX.Crm=this.BX.Crm||{},function(e,s,l,a,t){"use strict";let i,o,r=e=>e;var c=babelHelpers.classPrivateFieldLooseKey("container"),b=babelHelpers.classPrivateFieldLooseKey("titleNode"),d=babelHelpers.classPrivateFieldLooseKey("isLoading"),n=babelHelpers.classPrivateFieldLooseKey("createContainer");class v{constructor(){Object.defineProperty(this,n,{value:p}),Object.defineProperty(this,c,{writable:!0,value:void 0}),Object.defineProperty(this,b,{writable:!0,value:void 0}),Object.defineProperty(this,d,{writable:!0,value:!1}),babelHelpers.classPrivateFieldLooseBase(this,c)[c]=babelHelpers.classPrivateFieldLooseBase(this,n)[n]()}getTargetNode(){return babelHelpers.classPrivateFieldLooseBase(this,c)[c]}updateTitle(e){if(null===e){const e=a.Loc.getMessage("CRM_COPILOT_CALL_ASSESSMENT_SELECTOR_CALL_CARD_REPLACEMENT_EMPTY_STATE");return babelHelpers.classPrivateFieldLooseBase(this,b)[b].innerText=e,void(babelHelpers.classPrivateFieldLooseBase(this,b)[b].title=e)}babelHelpers.classPrivateFieldLooseBase(this,b)[b].innerText=e,babelHelpers.classPrivateFieldLooseBase(this,b)[b].title=e}setLoading(e){babelHelpers.classPrivateFieldLooseBase(this,d)[d]!==e&&(babelHelpers.classPrivateFieldLooseBase(this,d)[d]=e,a.Dom.toggleClass(babelHelpers.classPrivateFieldLooseBase(this,c)[c],"--loading"))}}function p(){const e=new t.Icon({icon:t.Actions.CHEVRON_DOWN,color:"#A8ADB4",size:16}),s=a.Loc.getMessage("CRM_COPILOT_CALL_ASSESSMENT_SELECTOR_CALL_CARD_REPLACEMENT_OVERTITLE");return babelHelpers.classPrivateFieldLooseBase(this,b)[b]=a.Tag.render(i||(i=r`<div class="crm-copilot__call-assessment-selector-title"></div>`)),a.Tag.render(o||(o=r`
			<div class="crm-copilot__call-assessment-selector">
				<div class="crm-copilot__call-assessment-selector-wrapper">
					<div class="crm-copilot__call-assessment-selector-body">
						<div class="crm-copilot__call-assessment-selector-overtitle">${0}</div>
						${0}
					</div>
					<div class="crm-copilot__call-assessment-selector-arrow">
						${0}
					</div>
				</div>
			</div>
		`),a.Text.encode(s),babelHelpers.classPrivateFieldLooseBase(this,b)[b],e.render())}var P=babelHelpers.classPrivateFieldLooseKey("currentCallAssessmentId"),u=babelHelpers.classPrivateFieldLooseKey("additionalSelectorOptions"),L=babelHelpers.classPrivateFieldLooseKey("displayStrategy"),h=babelHelpers.classPrivateFieldLooseKey("emptyScriptListTitle"),F=babelHelpers.classPrivateFieldLooseKey("container"),H=babelHelpers.classPrivateFieldLooseKey("currentSelectorItem"),B=babelHelpers.classPrivateFieldLooseKey("dialog"),y=babelHelpers.classPrivateFieldLooseKey("isDisplayLoadingState"),g=babelHelpers.classPrivateFieldLooseKey("isDisabled"),f=babelHelpers.classPrivateFieldLooseKey("toggleDialog"),m=babelHelpers.classPrivateFieldLooseKey("loading"),C=babelHelpers.classPrivateFieldLooseKey("onLoadDialog"),O=babelHelpers.classPrivateFieldLooseKey("onItemBeforeSelect"),T=babelHelpers.classPrivateFieldLooseKey("onItemBeforeDeselect"),_=babelHelpers.classPrivateFieldLooseKey("callAdditionalEvent"),S=babelHelpers.classPrivateFieldLooseKey("preventDeselectCurrentSelectorItem"),E=babelHelpers.classPrivateFieldLooseKey("doLoadCurrentSelectorItemByFirstLoad"),I=babelHelpers.classPrivateFieldLooseKey("updateCurrentSelectorItemByEvent"),j=babelHelpers.classPrivateFieldLooseKey("updateCurrentSelectorItem"),D=babelHelpers.classPrivateFieldLooseKey("adjustTitle"),K=babelHelpers.classPrivateFieldLooseKey("onPopupContainerClick");function A(){if(babelHelpers.classPrivateFieldLooseBase(this,g)[g])return;const e=this.getDialog();e.isOpen()?e.hide():e.show()}function w(e){babelHelpers.classPrivateFieldLooseBase(this,y)[y]&&babelHelpers.classPrivateFieldLooseBase(this,L)[L].setLoading(e)}function N(e){babelHelpers.classPrivateFieldLooseBase(this,E)[E](e),babelHelpers.classPrivateFieldLooseBase(this,_)[_](e,"onLoad")}function R(e){babelHelpers.classPrivateFieldLooseBase(this,I)[I](e),babelHelpers.classPrivateFieldLooseBase(this,_)[_](e,"Item:onBeforeSelect")}function M(e){babelHelpers.classPrivateFieldLooseBase(this,S)[S](e),babelHelpers.classPrivateFieldLooseBase(this,_)[_](e,"Item:onBeforeDeselect")}function X(e,s){var l,t,i;const o=null==(l=babelHelpers.classPrivateFieldLooseBase(this,u)[u])||null==(t=l.dialog)||null==(i=t.events)?void 0:i[s];a.Type.isFunction(o)&&o(e)}function k(e){const s=e.getData().item;null!==s&&(s.id===babelHelpers.classPrivateFieldLooseBase(this,P)[P]&&e.preventDefault(),e.getTarget().hide())}function x(e){if(null!==babelHelpers.classPrivateFieldLooseBase(this,H)[H])return;const s=e.getTarget();let l=null;s.getItems().forEach(e=>{e.getId()===babelHelpers.classPrivateFieldLooseBase(this,P)[P]&&(l=e)}),babelHelpers.classPrivateFieldLooseBase(this,j)[j](l)}function $(e){const s=e.getData().item;null!==s&&babelHelpers.classPrivateFieldLooseBase(this,j)[j](s)}function U(e){var s;babelHelpers.classPrivateFieldLooseBase(this,H)[H]=null!=e?e:null,babelHelpers.classPrivateFieldLooseBase(this,P)[P]=null!=(s=null==e?void 0:e.getId())?s:null,babelHelpers.classPrivateFieldLooseBase(this,D)[D]()}function V(){var e,s;const l=null!=(e=null==(s=babelHelpers.classPrivateFieldLooseBase(this,H)[H])?void 0:s.getTitle())?e:babelHelpers.classPrivateFieldLooseBase(this,h)[h];babelHelpers.classPrivateFieldLooseBase(this,L)[L].updateTitle(l)}function z(e){const{target:s}=e;var l;null===(null==s?void 0:s.closest(".ui-selector-dialog"))&&babelHelpers.classPrivateFieldLooseBase(this,L)[L].getTargetNode()!==s&&(null==(l=babelHelpers.classPrivateFieldLooseBase(this,B)[B])||l.hide())}e.CallAssessmentSelector=class{constructor(e){var s,l,t,i;Object.defineProperty(this,K,{value:z}),Object.defineProperty(this,D,{value:V}),Object.defineProperty(this,j,{value:U}),Object.defineProperty(this,I,{value:$}),Object.defineProperty(this,E,{value:x}),Object.defineProperty(this,S,{value:k}),Object.defineProperty(this,_,{value:X}),Object.defineProperty(this,T,{value:M}),Object.defineProperty(this,O,{value:R}),Object.defineProperty(this,C,{value:N}),Object.defineProperty(this,m,{value:w}),Object.defineProperty(this,f,{value:A}),Object.defineProperty(this,P,{writable:!0,value:null}),Object.defineProperty(this,u,{writable:!0,value:void 0}),Object.defineProperty(this,L,{writable:!0,value:void 0}),Object.defineProperty(this,h,{writable:!0,value:void 0}),Object.defineProperty(this,F,{writable:!0,value:void 0}),Object.defineProperty(this,H,{writable:!0,value:null}),Object.defineProperty(this,B,{writable:!0,value:null}),Object.defineProperty(this,y,{writable:!0,value:!0}),Object.defineProperty(this,g,{writable:!0,value:!1});const o=e.currentCallAssessment;a.Type.isNumber(o.id)&&o.id>0&&(babelHelpers.classPrivateFieldLooseBase(this,P)[P]=o.id),babelHelpers.classPrivateFieldLooseBase(this,u)[u]=null!=(s=e.additionalSelectorOptions)?s:{},babelHelpers.classPrivateFieldLooseBase(this,h)[h]=null!=(l=e.emptyScriptListTitle)?l:null,babelHelpers.classPrivateFieldLooseBase(this,L)[L]=null!=(t=e.displayStrategy)?t:new v,babelHelpers.classPrivateFieldLooseBase(this,L)[L].updateTitle(null!=(i=o.title)?i:babelHelpers.classPrivateFieldLooseBase(this,h)[h]),babelHelpers.classPrivateFieldLooseBase(this,F)[F]=babelHelpers.classPrivateFieldLooseBase(this,L)[L].getTargetNode(),a.Event.bind(babelHelpers.classPrivateFieldLooseBase(this,F)[F],"click",babelHelpers.classPrivateFieldLooseBase(this,f)[f].bind(this))}getCurrentCallAssessmentId(){return babelHelpers.classPrivateFieldLooseBase(this,P)[P]}setCurrentCallAssessment(e,s=!1){var l;if(e.id===babelHelpers.classPrivateFieldLooseBase(this,P)[P])return;const a=!s&&null===babelHelpers.classPrivateFieldLooseBase(this,B)[B]||this.getDialog().isLoading();if(babelHelpers.classPrivateFieldLooseBase(this,P)[P]=null!=(l=null==e?void 0:e.id)?l:null,a){var t;const s=null!=(t=null==e?void 0:e.title)?t:babelHelpers.classPrivateFieldLooseBase(this,h)[h];babelHelpers.classPrivateFieldLooseBase(this,L)[L].updateTitle(s)}else{if(!e.id)return babelHelpers.classPrivateFieldLooseBase(this,P)[P]=null,this.getDialog().deselectAll(),void babelHelpers.classPrivateFieldLooseBase(this,D)[D]();this.getDialog().getItems().forEach(s=>{s.getId()===e.id&&s.select()})}}getCurrentCallAssessmentItem(){var e,s;const l=null!=(e=null==(s=babelHelpers.classPrivateFieldLooseBase(this,H)[H])?void 0:s.getCustomData())?e:null;return null===l?null:Object.fromEntries(l)}getCurrentSelectorItem(){return babelHelpers.classPrivateFieldLooseBase(this,H)[H]}getContainer(){return babelHelpers.classPrivateFieldLooseBase(this,F)[F]}getDialog(){if(null===babelHelpers.classPrivateFieldLooseBase(this,B)[B]){var e,s,t,i;const o=babelHelpers.classPrivateFieldLooseBase(this,F)[F].closest("body"),r={...null!=(e=babelHelpers.classPrivateFieldLooseBase(this,u)[u].dialog)?e:{},targetNode:babelHelpers.classPrivateFieldLooseBase(this,F)[F],multiple:!1,dropdownMode:!0,enableSearch:!0,showAvatars:!1,preselectedItems:[["copilot_call_script",babelHelpers.classPrivateFieldLooseBase(this,P)[P]]],entities:[{id:"copilot_call_script",dynamicLoad:!0,dynamicSearch:!0}],popupOptions:{targetContainer:o,...null!=(s=babelHelpers.classPrivateFieldLooseBase(this,u)[u].popup)?s:{}},events:{...null!=(t=null==(i=babelHelpers.classPrivateFieldLooseBase(this,u)[u].dialog)?void 0:i.events)?t:{},onLoad:babelHelpers.classPrivateFieldLooseBase(this,C)[C].bind(this),"Item:onBeforeSelect":babelHelpers.classPrivateFieldLooseBase(this,O)[O].bind(this),"Item:onBeforeDeselect":babelHelpers.classPrivateFieldLooseBase(this,T)[T].bind(this),onShow:e=>{a.Event.bindOnce(o,"click",babelHelpers.classPrivateFieldLooseBase(this,K)[K].bind(this))},onHide:()=>{a.Event.unbind(o,babelHelpers.classPrivateFieldLooseBase(this,K)[K])}}};babelHelpers.classPrivateFieldLooseBase(this,B)[B]=new l.Dialog(r)}return babelHelpers.classPrivateFieldLooseBase(this,B)[B]}destroy(){var e;null==(e=babelHelpers.classPrivateFieldLooseBase(this,B)[B])||e.destroy()}close(){var e;null==(e=babelHelpers.classPrivateFieldLooseBase(this,B)[B])||e.hide()}disable(){var e;babelHelpers.classPrivateFieldLooseBase(this,g)[g]=!0;const s=null==(e=babelHelpers.classPrivateFieldLooseBase(this,L)[L])?void 0:e.getTargetNode();a.Dom.addClass(s,"--disabled"),a.Dom.style(s,{cursor:"not-allowed",opacity:".6"})}enable(){var e;babelHelpers.classPrivateFieldLooseBase(this,g)[g]=!1;const s=null==(e=babelHelpers.classPrivateFieldLooseBase(this,L)[L])?void 0:e.getTargetNode();a.Dom.removeClass(s,"--disabled"),a.Dom.style(s,{cursor:"inherit",opacity:"1"})}},e.CallCardReplacement=v}(this.BX.Crm.Copilot=this.BX.Crm.Copilot||{},BX.Event,BX.UI.EntitySelector,BX,BX.UI.IconSet);
//# sourceMappingURL=call-assessment-selector.bundle.js.map
