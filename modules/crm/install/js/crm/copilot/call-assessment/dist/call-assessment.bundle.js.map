{"version":3,"file":"call-assessment.bundle.js","sources":["../src/components/navigation/breadcrumbs.js","../src/components/navigation/button.js","../src/components/navigation/navigation.js","../src/components/common/text-editor-wrapper-component.js","../src/validator/prompt-length.js","../src/components/common/ai-disabled-in-settings.js","../src/components/page/base-page.js","../src/components/page/about-page.js","../src/components/enum/client-type.js","../src/components/page/client-page.js","../src/validator/border-accord.js","../src/components/common/pill.js","../src/components/common/help-link.js","../src/components/common/text-with-dialog.js","../src/components/page/control-page.js","../src/components/page/settings-page.js","../src/components/call-assessment.js","../src/call-assessment.js"],"sourcesContent":["import { Loc } from 'main.core';\n\nexport const BreadcrumbsEvents = {\n\titemClick: 'crm:copilot:call-assessment:breadcrumb-item-click',\n};\n\nexport const Breadcrumbs = {\n\tprops: {\n\t\tactiveTabId: {\n\t\t\ttype: String,\n\t\t},\n\t},\n\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\ttabs: this.getTabsData(),\n\t\t};\n\t},\n\n\tmethods: {\n\t\titemTitleClassList(id: string, isSoon: boolean): string[]\n\t\t{\n\t\t\treturn [\n\t\t\t\t'crm-copilot__call-assessment_breadcrumbs-item-title',\n\t\t\t\t{ '--active': id === this.activeTabId },\n\t\t\t\t{ '--soon': isSoon },\n\t\t\t];\n\t\t},\n\t\tgetTab(id: string): Object\n\t\t{\n\t\t\treturn this.getTabsData().find((tab) => tab.id === id);\n\t\t},\n\t\tgetTabsData(): Object[]\n\t\t{\n\t\t\treturn [\n\t\t\t\t{\n\t\t\t\t\tid: 'about',\n\t\t\t\t\ttitle: Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PAGE_ABOUT'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: 'client',\n\t\t\t\t\ttitle: Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PAGE_CLIENT'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: 'settings',\n\t\t\t\t\ttitle: Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PAGE_SETTINGS'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: 'control',\n\t\t\t\t\ttitle: Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PAGE_CONTROL'),\n\t\t\t\t},\n\t\t\t];\n\t\t},\n\t\temitClickEvent(itemId: string): void\n\t\t{\n\t\t\tconst tab = this.getTab(itemId);\n\n\t\t\tif (!tab.soon)\n\t\t\t{\n\t\t\t\tthis.$Bitrix.eventEmitter.emit(BreadcrumbsEvents.itemClick, { itemId });\n\t\t\t}\n\t\t},\n\t},\n\n\tcomputed: {\n\t\tsoonTitle(): string\n\t\t{\n\t\t\treturn Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_BREADCRUMBS_SOON');\n\t\t},\n\t},\n\n\ttemplate: `\n\t\t<div class=\"crm-copilot__call-assessment_breadcrumbs-wrapper\">\n\t\t\t<div\n\t\t\t\tv-for=\"(tab, index) in tabs\"\n\t\t\t\t@click=\"emitClickEvent(tab.id)\"\n\t\t\t\tclass=\"crm-copilot__call-assessment_breadcrumbs-item\"\n\t\t\t>\n\t\t\t\t<span v-if=\"tab.soon\" class=\"crm-copilot__call-assessment_breadcrumbs-soon\">\n\t\t\t\t\t{{ soonTitle }}\n\t\t\t\t</span>\n\t\t\t\t<span :class=\"itemTitleClassList(tab.id, tab.soon)\">\n\t\t\t\t\t{{ tab.title }}\n\t\t\t\t</span>\n\t\t\t\t<span \n\t\t\t\t\tv-if=\"index+1 < tabs.length\"\n\t\t\t\t\tclass=\"crm-copilot__call-assessment_breadcrumbs-divider\"\n\t\t\t\t></span>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { Loc } from 'main.core';\nimport { Button as UiButton, ButtonState } from 'ui.buttons';\n\nexport const ButtonEvents = {\n\tclick: 'crm:copilot:call-assessment:navigation-button-click',\n};\n\nexport const Button = {\n\tprops: {\n\t\tid: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tisEnabled: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t},\n\n\tmounted()\n\t{\n\t\tthis.initButton();\n\t},\n\n\twatch: {\n\t\tisEnabled(value: boolean): void\n\t\t{\n\t\t\tthis.button.setState(value ? ButtonState.ACTIVE : ButtonState.DISABLED);\n\t\t},\n\t},\n\n\tmethods: {\n\t\tinitButton(): void\n\t\t{\n\t\t\tthis.button = new UiButton({\n\t\t\t\ttext: Loc.getMessage(`CRM_COPILOT_CALL_ASSESSMENT_NAVIGATION_BUTTON_${this.id.toUpperCase()}`),\n\t\t\t\tcolor: this.buttonColor,\n\t\t\t\tround: true,\n\t\t\t\tsize: BX.UI.Button.Size.LARGE,\n\t\t\t\tonclick: () => {\n\t\t\t\t\tthis.emitClickEvent();\n\t\t\t\t},\n\t\t\t});\n\n\t\t\tif (this.isEnabled !== true)\n\t\t\t{\n\t\t\t\tthis.button.setState(ButtonState.DISABLED);\n\t\t\t}\n\n\t\t\tthis.button.setDataSet({\n\t\t\t\tid: `crm-copilot-call-assessment-buttons-${this.id.toLowerCase()}`,\n\t\t\t});\n\n\t\t\tif (this.$refs.button)\n\t\t\t{\n\t\t\t\tthis.button.renderTo(this.$refs.button);\n\t\t\t}\n\t\t},\n\t\temitClickEvent(): void\n\t\t{\n\t\t\tif (this.isEnabled)\n\t\t\t{\n\t\t\t\tthis.$Bitrix.eventEmitter.emit(ButtonEvents.click, { id: this.id });\n\t\t\t}\n\t\t},\n\t},\n\n\tcomputed: {\n\t\tbuttonColor(): string\n\t\t{\n\t\t\tif (this.id === 'continue' || this.id === 'submit' || this.id === 'close')\n\t\t\t{\n\t\t\t\treturn UiButton.Color.SUCCESS;\n\t\t\t}\n\n\t\t\tif (this.id === 'update')\n\t\t\t{\n\t\t\t\treturn UiButton.Color.LIGHT_BORDER;\n\t\t\t}\n\n\t\t\treturn UiButton.Color.LIGHT;\n\t\t},\n\t},\n\n\ttemplate: `\n\t\t<div ref=\"button\" class=\"crm-copilot-call-assessment-button\"></div>\n\t`,\n};\n","import { Loc } from 'main.core';\n\nimport 'ui.icon-set.main';\nimport { Button } from './button';\n\nconst ARTICLE_CODE = '23240682';\n\nexport const Navigation = {\n\tcomponents: {\n\t\tButton,\n\t},\n\n\tprops: {\n\t\tactiveTabId: {\n\t\t\ttype: String,\n\t\t},\n\t\tisEnabled: {\n\t\t\ttype: Boolean,\n\t\t},\n\t\treadOnly: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tshowSaveButton: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tfirstPage: 'about',\n\t\t\tlastPage: 'control',\n\t\t};\n\t},\n\n\tcomputed: {\n\t\thelp(): string\n\t\t{\n\t\t\treturn Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_NAVIGATION_HELP');\n\t\t},\n\t\tbuttons(): string[]\n\t\t{\n\t\t\treturn [\n\t\t\t\t'cancel',\n\t\t\t\t'back',\n\t\t\t\t'continue',\n\t\t\t\t'submit',\n\t\t\t\t'close',\n\t\t\t\t'update',\n\t\t\t];\n\t\t},\n\t},\n\n\tmethods: {\n\t\tshowArticle(): void\n\t\t{\n\t\t\twindow.top.BX?.Helper?.show(`redirect=detail&code=${ARTICLE_CODE}`);\n\t\t},\n\t},\n\n\ttemplate: `\n\t\t<div class=\"crm-copilot__call-assessment_navigation-container\">\n\t\t\t<div class=\"crm-copilot__call-assessment_navigation-buttons-wrapper\">\n\t\t\t\t<Button v-if=\"activeTabId !== lastPage\" id=\"continue\" :is-enabled=\"isEnabled\" />\n\t\t\t\t<Button v-if=\"activeTabId === lastPage && !readOnly\" id=\"submit\" />\n\t\t\t\t<Button v-if=\"activeTabId === lastPage && readOnly\" id=\"close\" />\n\t\t\t\t<Button v-if=\"activeTabId === firstPage\" id=\"cancel\" />\n\t\t\t\t<Button v-if=\"activeTabId !== firstPage\" id=\"back\" />\n\t\t\t</div>\n\t\t\t<div v-if=\"showSaveButton && activeTabId !== lastPage\">\n\t\t\t\t<Button id=\"update\" :is-enabled=\"isEnabled\" />\n\t\t\t</div>\n\t\t\t<div v-else class=\"crm-copilot__call-assessment_article\" @click=\"showArticle\">\n\t\t\t\t<span class=\"ui-icon-set --help\"></span>\n\t\t\t\t{{ help }}\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { Event, Runtime, Type } from 'main.core';\nimport { TextEditor, TextEditorComponent } from 'ui.text-editor';\n\nexport const TextEditorWrapperComponent = {\n\tcomponents: {\n\t\tTextEditorComponent,\n\t},\n\n\temits: [\n\t\t'change',\n\t],\n\n\tprops: {\n\t\ttextEditor: TextEditor,\n\t},\n\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\ttextEditorEvents: {\n\t\t\t\tonChange: this.emitChangeData,\n\t\t\t},\n\t\t};\n\t},\n\n\tmounted(): void\n\t{\n\t\tthis.setTextEditorHeight();\n\t\tthis.windowResizeHandler = this.windowResizeHandler.bind(this);\n\n\t\tEvent.bind(window, 'resize', this.windowResizeHandler);\n\t},\n\n\tunmounted(): void\n\t{\n\t\tEvent.unbind(window, 'resize', this.windowResizeHandler);\n\t},\n\n\tmethods: {\n\t\temitChangeData(): void\n\t\t{\n\t\t\tif (!Type.isFunction(this.onChangeDebounce))\n\t\t\t{\n\t\t\t\tthis.onChangeDebounce = Runtime.debounce(this.onChange, 100, this);\n\t\t\t}\n\n\t\t\tthis.onChangeDebounce();\n\t\t},\n\t\tonChange(): void\n\t\t{\n\t\t\tthis.$emit('change', {\n\t\t\t\tprompt: this.textEditor.getText(),\n\t\t\t});\n\t\t},\n\t\twindowResizeHandler(): void\n\t\t{\n\t\t\tthis.setTextEditorHeight();\n\t\t},\n\t\tsetTextEditorHeight(): void\n\t\t{\n\t\t\tconst editorOffsetTop = this.$el.parentNode.offsetTop;\n\n\t\t\tconst navigationClassName = '.crm-copilot__call-assessment_navigation-container';\n\t\t\tconst navigationOffsetTop = document.querySelector(navigationClassName)?.offsetTop ?? 0;\n\n\t\t\tconst textEditorContainerBottomPadding = 20;\n\t\t\tconst availableHeight = navigationOffsetTop - editorOffsetTop - textEditorContainerBottomPadding;\n\t\t\tconst minHeight = Math.round(availableHeight * 0.5);\n\t\t\tconst maxHeight = Math.round(availableHeight * 0.8);\n\n\t\t\tif (minHeight < 200)\n\t\t\t{\n\t\t\t\tthis.textEditor?.setMinHeight(maxHeight);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.textEditor?.setMinHeight(minHeight);\n\t\t\t}\n\n\t\t\tthis.textEditor?.setMaxHeight(maxHeight);\n\t\t},\n\t},\n\n\ttemplate: `\n\t\t<TextEditorComponent \n\t\t\t:events=\"textEditorEvents\"\n\t\t\t:editor-instance=\"textEditor\"\n\t\t/>\n\t`,\n};\n","import { Loc } from 'main.core';\n\nconst LENGTH_RANGE = {\n\tMIN: 100,\n\tMAX: 5000,\n};\n\nexport class PromptLength\n{\n\t#errorMessage: ?string = null;\n\n\tvalidate(prompt: string): boolean\n\t{\n\t\tif (prompt.length < LENGTH_RANGE.MIN)\n\t\t{\n\t\t\tthis.#errorMessage = Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PAGE_ABOUT_PROMPT_LENGTH_MIN_ERROR', {\n\t\t\t\t'#MIN_VALUE#': LENGTH_RANGE.MIN,\n\t\t\t});\n\n\t\t\treturn false;\n\t\t}\n\n\t\tif (prompt.length > LENGTH_RANGE.MAX)\n\t\t{\n\t\t\tthis.#errorMessage = Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PAGE_ABOUT_PROMPT_LENGTH_MAX_ERROR', {\n\t\t\t\t'#MAX_VALUE#': LENGTH_RANGE.MAX,\n\t\t\t});\n\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.#errorMessage = null;\n\n\t\treturn true;\n\t}\n\n\tgetError(): ?string\n\t{\n\t\treturn this.#errorMessage;\n\t}\n}\n","import { Loc } from 'main.core';\nimport 'ui.icon-set.main';\n\nexport const AiDisabledInSettings = {\n\tmethods: {\n\t\tshowLimitCopilotOffSlider(): void\n\t\t{\n\t\t\ttop.BX.UI?.InfoHelper?.show('limit_v2_crm_copilot_call_assessment_off');\n\t\t},\n\t},\n\n\tcomputed: {\n\t\tmessage(): string\n\t\t{\n\t\t\treturn Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_AI_DISABLED');\n\t\t},\n\t},\n\n\ttemplate: `\n\t\t<div class=\"crm-copilot__call-assessment-ai-disabled\">\n\t\t\t<span v-html=\"message\"></span>\n\t\t\t<span\n\t\t\t\t@click=\"showLimitCopilotOffSlider\"\n\t\t\t\tclass=\"ui-icon-set --help\"\n\t\t\t></span>\n\t\t</div>\n\t`,\n};\n","import { Loc, Runtime, Type } from 'main.core';\nimport { UI } from 'ui.notification';\nimport { AiDisabledInSettings } from '../common/ai-disabled-in-settings';\nimport { Breadcrumbs } from '../navigation/breadcrumbs';\n\nexport const BasePage = {\n\tcomponents: {\n\t\tBreadcrumbs,\n\t\tAiDisabledInSettings,\n\t},\n\n\tprops: {\n\t\treadOnly: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tisEnabled: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t\tisActive: {\n\t\t\ttype: Boolean,\n\t\t},\n\t\tdata: {\n\t\t\ttype: Object,\n\t\t\tdefault: {},\n\t\t},\n\t\tsettings: {\n\t\t\ttype: Object,\n\t\t\tdefault: {},\n\t\t},\n\t},\n\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tid: null, // must be defined in child class\n\t\t};\n\t},\n\n\tmethods: {\n\t\tgetId(): string\n\t\t{\n\t\t\treturn this.id;\n\t\t},\n\t\tgetData(): Object\n\t\t{\n\t\t\t// must be implement in child class\n\n\t\t\treturn {};\n\t\t},\n\t\tisReadyToMoveOn(): boolean\n\t\t{\n\t\t\treturn this.validate();\n\t\t},\n\t\tvalidate(): boolean\n\t\t{\n\t\t\t// must be implement in child class\n\n\t\t\treturn true;\n\t\t},\n\t\tonValidationFailed(): void\n\t\t{\n\t\t\tUI.Notification.Center.notify({\n\t\t\t\tcontent: Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PAGE_VALIDATION_ERROR'),\n\t\t\t\tautoHideDelay: 3000,\n\t\t\t});\n\t\t},\n\t\temitChangeData(): void\n\t\t{\n\t\t\tif (!Type.isFunction(this.onChangeDebounce))\n\t\t\t{\n\t\t\t\tthis.onChangeDebounce = Runtime.debounce(this.onChange, 100, this);\n\t\t\t}\n\n\t\t\tthis.onChangeDebounce();\n\t\t},\n\t\tonChange(): void\n\t\t{\n\t\t\tthis.$emit('onChange', {\n\t\t\t\tid: this.id,\n\t\t\t\tdata: this.getData(),\n\t\t\t});\n\t\t},\n\t\tgetBodyFieldClassList(additionalClasses: string[] = []): Array\n\t\t{\n\t\t\treturn [\n\t\t\t\t'crm-copilot__call-assessment_page-section-body-field',\n\t\t\t\t...additionalClasses,\n\t\t\t\t{ '--read-only': this.isEnabled !== true },\n\t\t\t];\n\t\t},\n\t},\n};\n","import { Loc, Type } from 'main.core';\nimport { BBCodeParser } from 'ui.bbcode.parser';\nimport { TextEditor, TextEditorComponent } from 'ui.text-editor';\nimport { TextEditorWrapperComponent } from '../common/text-editor-wrapper-component';\nimport { PromptLength as PromptLengthValidator } from './../../validator/prompt-length';\nimport { BasePage } from './base-page';\n\nexport const AboutPage = {\n\textends: BasePage,\n\n\tcomponents: {\n\t\tTextEditorComponent,\n\t\tTextEditorWrapperComponent,\n\t},\n\n\tprops: {\n\t\ttextEditor: TextEditor,\n\t},\n\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tid: 'about',\n\t\t\tparser: new BBCodeParser(),\n\t\t\tpromptLengthValidator: new PromptLengthValidator(),\n\t\t\tpromptLengthError: null,\n\t\t};\n\t},\n\n\tmethods: {\n\t\tgetData(): Object\n\t\t{\n\t\t\treturn {\n\t\t\t\tprompt: this.textEditor.getText(),\n\t\t\t};\n\t\t},\n\t\tisReadyToMoveOn(): boolean\n\t\t{\n\t\t\treturn Type.isStringFilled(this.textEditor.getText());\n\t\t},\n\t\tvalidate(): boolean\n\t\t{\n\t\t\treturn this.promptLengthValidator.validate(this.getPlainPromptText());\n\t\t},\n\t\tonValidationFailed(): void\n\t\t{\n\t\t\tthis.promptLengthError = this.promptLengthValidator.getError();\n\t\t},\n\t\tonChange(): void\n\t\t{\n\t\t\tthis.promptLengthError = null;\n\t\t\tBasePage.methods.onChange.call(this);\n\t\t},\n\t\tgetPlainPromptText(): number\n\t\t{\n\t\t\treturn this.parser.parse(this.textEditor.getText()).toPlainText().trim();\n\t\t},\n\t},\n\n\tcomputed: {\n\t\tpageTitle(): string\n\t\t{\n\t\t\treturn Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PAGE_ABOUT_TITLE');\n\t\t},\n\t\tpageDescription(): string\n\t\t{\n\t\t\treturn Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PAGE_ABOUT_DESCRIPTION');\n\t\t},\n\t},\n\n\ttemplate: `\n\t\t<div v-if=\"isActive\">\n\t\t\t<div class=\"crm-copilot__call-assessment_page-section\">\n\t\t\t\t<Breadcrumbs :active-tab-id=\"id\" />\n\t\t\t\t<header class=\"crm-copilot__call-assessment_page-section-header\">\n\t\t\t\t\t<div class=\"crm-copilot__call-assessment_page-section-header-title\">\n\t\t\t\t\t\t{{ pageTitle }}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"crm-copilot__call-assessment_page-section-header-description\">\n\t\t\t\t\t\t{{ pageDescription }}\n\t\t\t\t\t</div>\n\t\t\t\t</header>\n\t\t\t\t<div class=\"crm-copilot__call-assessment_page-section-body\">\n\t\t\t\t\t<AiDisabledInSettings v-if=\"!isEnabled\" />\n\t\t\t\t\t<div :class=\"this.getBodyFieldClassList()\">\n\t\t\t\t\t\t<TextEditorWrapperComponent\n\t\t\t\t\t\t\t:textEditor=\"textEditor\"\n\t\t\t\t\t\t\t@change=\"onChange\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div v-if=\"promptLengthError\" class=\"crm-copilot__call-assessment_page-section-body-field-error\">\n\t\t\t\t\t\t\t{{ promptLengthError }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","export const clientType = Object.freeze({\n\tnew: 1,\n\tinWork: 2,\n\treturn: 3,\n\trepeated: 4,\n});\n","import { Loc, Type } from 'main.core';\nimport { clientType as clientTypeEnum } from '../enum/client-type';\nimport { BasePage } from './base-page';\n\nexport const ClientPage = {\n\textends: BasePage,\n\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tid: 'client',\n\t\t\tactiveClientTypeIds: this.data.activeClientTypeIds ?? [],\n\t\t};\n\t},\n\n\tmethods: {\n\t\tgetData(): Object\n\t\t{\n\t\t\treturn {\n\t\t\t\tclientTypeIds: [...this.activeClientTypeIds],\n\t\t\t};\n\t\t},\n\t\tgetClientTypeClassList(clientTypeId: string): string[]\n\t\t{\n\t\t\tconst clientType = this.clientTypes.find((client) => client.id === clientTypeId);\n\n\t\t\treturn [\n\t\t\t\t'crm-copilot__call-assessment_page-section-body-field-client-type',\n\t\t\t\t`--client-${clientType.id}`,\n\t\t\t\t{ '--active': this.activeClientTypeIds.includes(clientTypeId) },\n\t\t\t\t{ '--readonly': this.readOnly },\n\t\t\t];\n\t\t},\n\t\tonClientTypeSelect(clientTypeId: string): void\n\t\t{\n\t\t\tif (this.readOnly)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.activeClientTypeIds.includes(clientTypeId))\n\t\t\t{\n\t\t\t\tconst index = this.activeClientTypeIds.indexOf(clientTypeId);\n\t\t\t\tthis.activeClientTypeIds.splice(index, 1);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.activeClientTypeIds.push(clientTypeId);\n\t\t\t}\n\n\t\t\tthis.emitChangeData();\n\t\t},\n\t\tonCheckboxClick(): boolean\n\t\t{\n\t\t\treturn !this.readOnly;\n\t\t},\n\t\tvalidate(): boolean\n\t\t{\n\t\t\treturn Type.isArrayFilled(this.activeClientTypeIds);\n\t\t},\n\t},\n\n\tcomputed: {\n\t\tpageTitle(): string\n\t\t{\n\t\t\treturn Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PAGE_CLIENT_TITLE');\n\t\t},\n\t\tpageDescription(): string\n\t\t{\n\t\t\treturn Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PAGE_CLIENT_DESCRIPTION');\n\t\t},\n\t\tclientTypes(): Array<Object>\n\t\t{\n\t\t\treturn [\n\t\t\t\t{\n\t\t\t\t\tid: clientTypeEnum.new,\n\t\t\t\t\ttitle: Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PAGE_CLIENT_TYPE_NEW_TITLE'),\n\t\t\t\t\tdescription: Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PAGE_CLIENT_TYPE_NEW_DESCRIPTION'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: clientTypeEnum.inWork,\n\t\t\t\t\ttitle: Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PAGE_CLIENT_TYPE_IN_WORK_TITLE'),\n\t\t\t\t\tdescription: Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PAGE_CLIENT_TYPE_IN_WORK_DESCRIPTION'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: clientTypeEnum.return,\n\t\t\t\t\ttitle: Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PAGE_CLIENT_TYPE_RETURN_CUSTOMER_TITLE'),\n\t\t\t\t\tdescription: Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PAGE_CLIENT_TYPE_RETURN_CUSTOMER_DESCRIPTION'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: clientTypeEnum.repeated,\n\t\t\t\t\ttitle: Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PAGE_CLIENT_TYPE_REPEATED_APPROACH_TITLE'),\n\t\t\t\t\tdescription: Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PAGE_CLIENT_TYPE_REPEATED_APPROACH_DESCRIPTION'),\n\t\t\t\t},\n\t\t\t];\n\t\t},\n\t},\n\n\ttemplate: `\n\t\t<div v-if=\"isActive\">\n\t\t\t<div class=\"crm-copilot__call-assessment_page-section\">\n\t\t\t\t<Breadcrumbs :active-tab-id=\"id\" />\n\t\t\t\t<header class=\"crm-copilot__call-assessment_page-section-header\">\n\t\t\t\t\t<div class=\"crm-copilot__call-assessment_page-section-header-title\">\n\t\t\t\t\t\t{{ pageTitle }}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"crm-copilot__call-assessment_page-section-header-description\">\n\t\t\t\t\t\t{{ pageDescription }}\n\t\t\t\t\t</div>\n\t\t\t\t</header>\n\t\t\t\t<div class=\"crm-copilot__call-assessment_page-section-body\">\n\t\t\t\t\t<AiDisabledInSettings v-if=\"!isEnabled\" />\n\t\t\t\t\t<div :class=\"this.getBodyFieldClassList()\">\n\t\t\t\t\t\t<div v-for=\"(clientType, index) in clientTypes\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t:class=getClientTypeClassList(clientType.id)\n\t\t\t\t\t\t\t\t@click=\"onClientTypeSelect(clientType.id)\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div class=\"crm-copilot__call-assessment_page-section-body-field-client-type-avatar\">\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"crm-copilot__call-assessment_page-section-body-field-client-type-info\">\n\t\t\t\t\t\t\t\t\t<div class=\"crm-copilot__call-assessment_page-section-body-field-client-type-title\">\n\t\t\t\t\t\t\t\t\t\t{{ clientType.title }}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"crm-copilot__call-assessment_page-section-body-field-client-type-description\">\n\t\t\t\t\t\t\t\t\t\t{{ clientType.description }}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t:class=\"(readOnly ? 'readonly' : '')\"\n\t\t\t\t\t\t\t\t\t:onclick=\"onCheckboxClick\"\n\t\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\t\tv-model=\"activeClientTypeIds\"\n\t\t\t\t\t\t\t\t\t:value=\"clientType.id\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<hr\n\t\t\t\t\t\t\t\tv-if=\"index + 1 < clientTypes.length\"\n\t\t\t\t\t\t\t\tclass=\"crm-copilot__call-assessment_page-section-body-field-client-type-divider\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { Loc } from 'main.core';\n\nexport class BordersAccord\n{\n\t#errorMessage: ?string = null;\n\n\tvalidate(lowBorder: number, highBorder: number): boolean\n\t{\n\t\tif (highBorder < lowBorder)\n\t\t{\n\t\t\tthis.#errorMessage = Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PAGE_CONTROL_VALIDATION_ERROR');\n\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.#errorMessage = null;\n\n\t\treturn true;\n\t}\n\n\tgetError(): ?string\n\t{\n\t\treturn this.#errorMessage;\n\t}\n}\n","import { Loc, Runtime } from 'main.core';\n\nconst DELTA = 10;\n\nexport const Pill = {\n\temits: [\n\t\t'change',\n\t],\n\n\tprops: {\n\t\tvalue: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\tadditionalClass: {\n\t\t\ttype: String,\n\t\t},\n\t},\n\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tcurrentValue: this.value,\n\t\t};\n\t},\n\n\tmethods: {\n\t\tonInlineValueKeyDown(event: KeyboardEvent): boolean\n\t\t{\n\t\t\tconst { key, code, ctrlKey, metaKey } = event;\n\n\t\t\tif (metaKey || ctrlKey)\n\t\t\t{\n\t\t\t\tconst allowedKeysWithCtrlAndMeta = ['KeyA', 'KeyZ', 'KeyC', 'KeyV', 'KeyR', 'KeyX'];\n\t\t\t\tif (!allowedKeysWithCtrlAndMeta.includes(code))\n\t\t\t\t{\n\t\t\t\t\tevent.preventDefault();\n\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tconst allowedKeys = ['ArrowLeft', 'ArrowRight', 'ArrowUp', 'ArrowDown', 'Backspace', 'Delete'];\n\t\t\tif (allowedKeys.includes(code))\n\t\t\t{\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tif (key === ' ' || Number.isNaN(Number(key)))\n\t\t\t{\n\t\t\t\tevent.preventDefault();\n\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn true;\n\t\t},\n\t\tonInlineValueChange(event: InputEvent): void\n\t\t{\n\t\t\tconst value = Number(this.$refs.input.innerText);\n\t\t\tthis.executeValueChange(value);\n\n\t\t\tthis.$nextTick(() => {\n\t\t\t\tconst range = document.createRange();\n\t\t\t\tconst selection = window.getSelection();\n\n\t\t\t\trange.selectNodeContents(this.$refs.input);\n\t\t\t\trange.collapse(false);\n\n\t\t\t\tselection.removeAllRanges();\n\t\t\t\tselection.addRange(range);\n\t\t\t\tthis.$refs.input.focus();\n\t\t\t});\n\t\t},\n\t\tonInlineValueBlur(): void\n\t\t{\n\t\t\tconst onlyNums = this.$refs.input.innerText.replaceAll(/\\D/g, '');\n\t\t\tif (onlyNums === '')\n\t\t\t{\n\t\t\t\tthis.executeValueChange(0);\n\t\t\t}\n\t\t},\n\t\tchangeValue(action: string): void\n\t\t{\n\t\t\tlet value = (action === 'plus' ? this.value + DELTA : this.value - DELTA);\n\n\t\t\tif (value % DELTA > 0)\n\t\t\t{\n\t\t\t\tvalue = Math.ceil(value / DELTA) * 10;\n\t\t\t}\n\n\t\t\tthis.executeValueChange(value);\n\t\t},\n\t\texecuteValueChange(value: number, action: ?string = null): void\n\t\t{\n\t\t\tthis.currentValue = value;\n\n\t\t\tthis.$refs.input.innerText = (\n\t\t\t\tvalue === 0\n\t\t\t\t\t? 0\n\t\t\t\t\t: this.$refs.input.innerText.replace(/^0+/, '')\n\t\t\t);\n\n\t\t\t// @todo animation will be redone\n\t\t\t// if (action)\n\t\t\t// {\n\t\t\t// \tconst target = (action === 'plus' ? this.$refs.plus : this.$refs.minus);\n\t\t\t// \tconst timeoutIdName = (action === 'plus' ? 'timeoutIdPlus' : 'timeoutIdMinus');\n\t\t\t//\n\t\t\t// \tDom.removeClass(target, '--click');\n\t\t\t// \tsetTimeout(() => {\n\t\t\t// \t\tif (Type.isNumber(this[timeoutIdName]))\n\t\t\t// \t\t{\n\t\t\t// \t\t\tclearTimeout(this[timeoutIdName]);\n\t\t\t// \t\t}\n\t\t\t// \t\tDom.addClass(target, '--click');\n\t\t\t// \t\tthis[timeoutIdName] = setTimeout(() => {\n\t\t\t// \t\t\tDom.removeClass(target, '--click');\n\t\t\t// \t\t}, 600);\n\t\t\t// \t}, 10);\n\t\t\t// }\n\n\t\t\tRuntime.debounce(\n\t\t\t\t() => {\n\t\t\t\t\tthis.$emit('change', this.currentValue);\n\t\t\t\t},\n\t\t\t\t300,\n\t\t\t\tthis,\n\t\t\t)();\n\t\t},\n\t},\n\n\tcomputed: {\n\t\ttitle(): string {\n\t\t\treturn Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PILL_TITLE');\n\t\t},\n\t\tclassList(): Array<string>\n\t\t{\n\t\t\treturn [\n\t\t\t\t'crm-copilot__call-assessment-pill',\n\t\t\t\tthis.additionalClass,\n\t\t\t];\n\t\t},\n\t\tminusButtonClassList(): Array\n\t\t{\n\t\t\treturn [\n\t\t\t\t'crm-copilot__call-assessment-pill-minus',\n\t\t\t\t{ '--disabled': this.currentValue <= 0 },\n\t\t\t];\n\t\t},\n\t\tplusButtonClassList(): Array\n\t\t{\n\t\t\treturn [\n\t\t\t\t'crm-copilot__call-assessment-pill-plus',\n\t\t\t\t{ '--disabled': this.currentValue >= 100 },\n\t\t\t];\n\t\t},\n\t},\n\n\twatch: {\n\t\tcurrentValue(value: number): void\n\t\t{\n\t\t\tif (value <= 0)\n\t\t\t{\n\t\t\t\tthis.currentValue = 0;\n\t\t\t}\n\n\t\t\tif (value >= 100)\n\t\t\t{\n\t\t\t\tthis.currentValue = 100;\n\t\t\t}\n\n\t\t\tif (Number.isNaN(value))\n\t\t\t{\n\t\t\t\tthis.currentValue = 0;\n\t\t\t}\n\n\t\t\tthis.$refs.input.innerText = this.currentValue;\n\t\t},\n\t},\n\n\ttemplate: `\n\t\t<div :class=\"classList\">\n\t\t\t<div class=\"crm-copilot__call-assessment-pill-title\" v-html=\"title\">\n\t\t\t</div>\n\t\t\t<div class=\"crm-copilot__call-assessment-pill-control\">\n\t\t\t\t<div\n\t\t\t\t\t:class=\"minusButtonClassList\"\n\t\t\t\t\t@click=\"changeValue('minus')\"\n\t\t\t\t\tref=\"minus\"\n\t\t\t\t>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"crm-copilot__call-assessment-pill-value-container\">\n\t\t\t\t\t<div \n\t\t\t\t\t\tclass=\"crm-copilot__call-assessment-pill-value\"\n\t\t\t\t\t\tcontenteditable=\"true\"\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t@keydown=\"onInlineValueKeyDown\"\n\t\t\t\t\t\t@input=\"onInlineValueChange\"\n\t\t\t\t\t\t@blur=\"onInlineValueBlur\"\n\t\t\t\t\t\tref=\"input\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{ currentValue }}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"crm-copilot__call-assessment-pill-percent\">\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\t:class=\"plusButtonClassList\"\n\t\t\t\t\t@click=\"changeValue('plus')\"\n\t\t\t\t\tref=\"plus\"\n\t\t\t\t>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { Loc } from 'main.core';\n\nexport const HelpLink = {\n\tprops: {\n\t\tarticleCode: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\n\tmethods: {\n\t\tonClick(): void\n\t\t{\n\t\t\twindow.top.BX?.Helper?.show(`redirect=detail&code=${this.articleCode}`);\n\t\t},\n\t},\n\n\ttemplate: `\n\t\t<span class=\"crm-copilot__call-assessment-help-link\" ref=\"container\" @click=\"onClick\">\n\t\t\t${Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_HELP')}\n\t\t</span>\n\t`,\n};\n","import { Event } from 'main.core';\nimport { BaseEvent } from 'main.core.events';\nimport { Dialog } from 'ui.entity-selector';\nimport { HelpLink } from './help-link';\n\nexport const TextWithDialog = {\n\tcomponents: {\n\t\tHelpLink,\n\t},\n\n\tprops: {\n\t\tid: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tcontent: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tdialogTargetId: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: null,\n\t\t},\n\t\tarticleCode: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tvalue: {\n\t\t\ttype: Number,\n\t\t},\n\t\titems: {\n\t\t\ttype: Array,\n\t\t},\n\t\ttabs: {\n\t\t\ttype: Array,\n\t\t},\n\t\tselectedItems: {\n\t\t\ttype: Array,\n\t\t},\n\t},\n\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tstatus: this.isChecked ?? false,\n\t\t\tcurrentValue: this.value ?? null,\n\t\t};\n\t},\n\n\tmounted(): void\n\t{\n\t\tthis.initDialog();\n\t},\n\n\tupdated(): void\n\t{\n\t\tthis.initDialog();\n\t},\n\n\twatch: {\n\t\tcurrentValue(value): void\n\t\t{\n\t\t\tthis.emitSelectItem(value);\n\t\t},\n\t},\n\n\tmethods: {\n\t\tinitDialog(): void\n\t\t{\n\t\t\tif (this.dialogTargetId === null)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst targetNode = document.getElementById(this.dialogTargetId);\n\n\t\t\tthis.clientSelectorDialog = new Dialog({\n\t\t\t\ttargetNode,\n\t\t\t\tcontext: `CRM_COPILOT_CALL_ASSESSMENT_DIALOG_${this.id}`,\n\t\t\t\tmultiple: false,\n\t\t\t\tdropdownMode: true,\n\t\t\t\tshowAvatars: false,\n\t\t\t\tenableSearch: false,\n\t\t\t\twidth: 450,\n\t\t\t\tzIndex: 2500,\n\t\t\t\titems: this.items ?? [],\n\t\t\t\ttabs: this.tabs ?? [],\n\t\t\t\tselectedItems: this.selectedItems ?? [],\n\t\t\t\tevents: {\n\t\t\t\t\t'Item:onSelect': (event: BaseEvent) => {\n\t\t\t\t\t\tconst { item: { id } } = event.getData();\n\t\t\t\t\t\tthis.currentValue = id;\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t});\n\n\t\t\tEvent.bind(targetNode, 'click', () => {\n\t\t\t\tthis.clientSelectorDialog.show();\n\t\t\t});\n\t\t},\n\t\temitSelectItem(itemId: number): void\n\t\t{\n\t\t\tthis.$emit('onSelectItem', itemId);\n\t\t},\n\t},\n\n\ttemplate: `\n\t\t<div>\n\t\t\t<span\n\t\t\t\tclass=\"crm-copilot__call-assessment_call_count\"\n\t\t\t\tv-html=\"content\"\n\t\t\t></span>\n\t\t\t<HelpLink :articleCode=\"articleCode\" />\n\t\t</div>\n\t`,\n};\n","import { Loc } from 'main.core';\nimport { UI } from 'ui.notification';\nimport { BordersAccord } from '../../validator/border-accord';\nimport { Pill } from '../common/pill';\nimport { TextWithDialog } from '../common/text-with-dialog';\nimport { BasePage } from './base-page';\n\nexport const ControlPage = {\n\textends: BasePage,\n\n\tcomponents: {\n\t\tTextWithDialog,\n\t\tPill,\n\t},\n\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tid: 'control',\n\t\t\tlowBorder: this.data.lowBorder,\n\t\t\thighBorder: this.data.highBorder,\n\t\t\tvalidator: new BordersAccord(),\n\t\t};\n\t},\n\n\tmethods: {\n\t\tgetData(): Object\n\t\t{\n\t\t\treturn {\n\t\t\t\tlowBorder: this.lowBorder,\n\t\t\t\thighBorder: this.highBorder,\n\t\t\t};\n\t\t},\n\t\tsetLowBorder(value: number): void\n\t\t{\n\t\t\tthis.lowBorder = value;\n\t\t},\n\t\tsetHighBorder(value: number): void\n\t\t{\n\t\t\tthis.highBorder = value;\n\t\t},\n\t\tvalidate(): boolean\n\t\t{\n\t\t\treturn this.validator.validate(this.lowBorder, this.highBorder);\n\t\t},\n\t\tonValidationFailed(): void\n\t\t{\n\t\t\tUI.Notification.Center.notify({\n\t\t\t\tcontent: this.validator.getError(),\n\t\t\t\tautoHideDelay: 3000,\n\t\t\t});\n\t\t},\n\t},\n\n\tcomputed: {\n\t\tpageTitle(): string\n\t\t{\n\t\t\treturn Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PAGE_CONTROL_TITLE');\n\t\t},\n\t\tpageDescription(): string\n\t\t{\n\t\t\treturn Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PAGE_CONTROL_DESCRIPTION');\n\t\t},\n\t},\n\n\ttemplate: `\n\t\t<div v-if=\"isActive\">\n\t\t\t<div class=\"crm-copilot__call-assessment_page-section\">\n\t\t\t\t<Breadcrumbs :active-tab-id=\"id\"/>\n\t\t\t\t<header class=\"crm-copilot__call-assessment_page-section-header\">\n\t\t\t\t\t<div class=\"crm-copilot__call-assessment_page-section-header-title\">\n\t\t\t\t\t\t{{ pageTitle }}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"crm-copilot__call-assessment_page-section-header-description\">\n\t\t\t\t\t\t{{ pageDescription }}\n\t\t\t\t\t</div>\n\t\t\t\t</header>\n\t\t\t\t<div class=\"crm-copilot__call-assessment_page-section-body\">\n\t\t\t\t\t<AiDisabledInSettings v-if=\"!isEnabled\" />\n\t\t\t\t\t<div class=\"crm-copilot__call-assessment_page-section-body-field-container\">\n\t\t\t\t\t\t<div class=\"crm-copilot__call-assessment_page-section-body-field-title --low-icon\">\n\t\t\t\t\t\t\t{{ this.$Bitrix.Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PAGE_CONTROL_LOW_BORDER_TITLE') }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"crm-copilot__call-assessment_page-section-body-field-content\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclass=\"crm-copilot__call-assessment_page-section-body-field-subtitle\"\n\t\t\t\t\t\t\t\tv-html=\"this.$Bitrix.Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PAGE_CONTROL_LOW_BORDER_DESCRIPTION')\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<Pill\n\t\t\t\t\t\t\t\tadditionalClass=\"--low\"\n\t\t\t\t\t\t\t\t:value=\"lowBorder\"\n\t\t\t\t\t\t\t\t@change=\"setLowBorder\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<div class=\"crm-copilot__call-assessment_page-section-body-field-additional\">\n\t\t\t\t\t\t\t\t{{ this.$Bitrix.Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PAGE_CONTROL_LOW_BORDER_ADDITIONAL') }}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t\n\t\t\t\t\t<div class=\"crm-copilot__call-assessment_page-section-body-field-container\">\n\t\t\t\t\t\t<div class=\"crm-copilot__call-assessment_page-section-body-field-title --high-icon\">\n\t\t\t\t\t\t\t{{ this.$Bitrix.Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PAGE_CONTROL_HIGH_BORDER_TITLE') }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"crm-copilot__call-assessment_page-section-body-field-content\">\n\t\t\t\t\t\t\t<div \n\t\t\t\t\t\t\t\tclass=\"crm-copilot__call-assessment_page-section-body-field-subtitle\"\n\t\t\t\t\t\t\t\tv-html=\"this.$Bitrix.Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PAGE_CONTROL_HIGH_BORDER_DESCRIPTION')\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<Pill\n\t\t\t\t\t\t\t\tadditionalClass=\"--high\"\n\t\t\t\t\t\t\t\t:value=\"highBorder\"\n\t\t\t\t\t\t\t\t@change=\"setHighBorder\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<div class=\"crm-copilot__call-assessment_page-section-body-field-additional\">\n\t\t\t\t\t\t\t\t{{ this.$Bitrix.Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PAGE_CONTROL_HIGH_BORDER_ADDITIONAL') }}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { Loc } from 'main.core';\nimport { InfoHelper } from 'ui.info-helper';\nimport { BasePage } from './base-page';\nimport 'ui.forms';\n\nexport const SettingsPage = {\n\textends: BasePage,\n\n\tdata(): Object\n\t{\n\t\tlet autoCheckTypeId = 0;\n\t\tif (this.settings.baas?.hasPackage)\n\t\t{\n\t\t\tautoCheckTypeId = this.data.autoCheckTypeId ?? 1;\n\t\t}\n\n\t\treturn {\n\t\t\tid: 'settings',\n\t\t\tcallTypeId: this.data.callTypeId ?? 1,\n\t\t\tautoCheckTypeId,\n\t\t};\n\t},\n\n\tmethods: {\n\t\tgetData(): Object\n\t\t{\n\t\t\treturn {\n\t\t\t\tcallTypeId: this.callTypeId,\n\t\t\t\tautoCheckTypeId: this.autoCheckTypeId,\n\t\t\t};\n\t\t},\n\t\tonAutoCheckTypeIdChange(event): void\n\t\t{\n\t\t\tif (this.isBaasHasPackage)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst { value } = event.target;\n\t\t\tif (value !== 0)\n\t\t\t{\n\t\t\t\tif (this.packageEmptySliderCode)\n\t\t\t\t{\n\t\t\t\t\tInfoHelper.show(this.packageEmptySliderCode);\n\t\t\t\t}\n\n\t\t\t\tvoid this.$nextTick(() => {\n\t\t\t\t\tthis.autoCheckTypeId = 0;\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t},\n\n\tcomputed: {\n\t\tpageTitle(): string\n\t\t{\n\t\t\treturn Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PAGE_SETTINGS_TITLE');\n\t\t},\n\t\tpageDescription(): string\n\t\t{\n\t\t\treturn Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PAGE_SETTINGS_DESCRIPTION');\n\t\t},\n\t\tpageSectionSettingsCallType(): string\n\t\t{\n\t\t\treturn Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PAGE_SETTINGS_CALL_TYPE');\n\t\t},\n\t\tpageSectionSettingsCallTypeDescription(): string\n\t\t{\n\t\t\treturn Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PAGE_SETTINGS_CALL_TYPE_DESCRIPTION');\n\t\t},\n\t\tcallTypes(): Array<Object>\n\t\t{\n\t\t\treturn [\n\t\t\t\t{\n\t\t\t\t\tid: 1,\n\t\t\t\t\ttitle: Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PAGE_SETTINGS_CALL_TYPE_ALL'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: 2,\n\t\t\t\t\ttitle: Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PAGE_SETTINGS_CALL_TYPE_INCOMING'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: 3,\n\t\t\t\t\ttitle: Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PAGE_SETTINGS_CALL_TYPE_OUTGOING'),\n\t\t\t\t},\n\t\t\t];\n\t\t},\n\t\tpageSectionSettingsCheck(): string\n\t\t{\n\t\t\treturn Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PAGE_SETTINGS_CHECK');\n\t\t},\n\t\tpageSectionSettingsCheckDescription(): string\n\t\t{\n\t\t\treturn Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PAGE_SETTINGS_CHECK_DESCRIPTION');\n\t\t},\n\t\tcheckTypes(): Array<Object>\n\t\t{\n\t\t\treturn [\n\t\t\t\t{\n\t\t\t\t\tvalue: 1,\n\t\t\t\t\ttitle: Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PAGE_SETTINGS_CHECK_FIRST_INCOMING'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tvalue: 2,\n\t\t\t\t\ttitle: Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PAGE_SETTINGS_CHECK_ALL_INCOMING'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tvalue: 3,\n\t\t\t\t\ttitle: Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PAGE_SETTINGS_CHECK_ALL_OUTGOING'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tvalue: 4,\n\t\t\t\t\ttitle: Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PAGE_SETTINGS_CHECK_ALL'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tvalue: 0,\n\t\t\t\t\ttitle: Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PAGE_SETTINGS_CHECK_DISABLED'),\n\t\t\t\t},\n\t\t\t];\n\t\t},\n\t\tisBaasAvailable(): boolean\n\t\t{\n\t\t\treturn this.settings.baas?.isAvailable ?? false;\n\t\t},\n\t\tisBaasHasPackage(): boolean\n\t\t{\n\t\t\treturn this.settings.baas?.hasPackage ?? false;\n\t\t},\n\t\tpackageEmptySliderCode(): ?string\n\t\t{\n\t\t\treturn this.settings.baas?.aiPackagesEmptySliderCode ?? null;\n\t\t},\n\t},\n\n\ttemplate: `\n\t\t<div v-if=\"isActive\">\n\t\t\t<div class=\"crm-copilot__call-assessment_page-section\">\n\t\t\t\t<Breadcrumbs :active-tab-id=\"id\" />\n\t\t\t\t<header class=\"crm-copilot__call-assessment_page-section-header\">\n\t\t\t\t\t<div class=\"crm-copilot__call-assessment_page-section-header-title\">\n\t\t\t\t\t\t{{ pageTitle }}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"crm-copilot__call-assessment_page-section-header-description\">\n\t\t\t\t\t\t{{ pageDescription }}\n\t\t\t\t\t</div>\n\t\t\t\t</header>\n\t\t\t\t\n\t\t\t\t<div class=\"crm-copilot__call-assessment_page-section-body\">\n\t\t\t\t\t<AiDisabledInSettings v-if=\"!isEnabled\" />\n\t\t\t\t\t<div :class=\"this.getBodyFieldClassList(['ui-ctl', 'ui-ctl-after-icon', 'ui-ctl-dropdown', 'ui-ctl-w100'])\">\n\t\t\t\t\t\t<label>{{ pageSectionSettingsCallType }}</label>\n\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-w100 ui-ctl-after-icon ui-ctl-dropdown\">\n\t\t\t\t\t\t\t<div class=\"ui-ctl-after ui-ctl-icon-angle\"></div>\n\t\t\t\t\t\t\t<select class=\"ui-ctl-element\" v-model=\"callTypeId\">\n\t\t\t\t\t\t\t\t<option \n\t\t\t\t\t\t\t\t\tv-for=\"callType in callTypes\"\n\t\t\t\t\t\t\t\t\t:value=\"callType.id\"\n\t\t\t\t\t\t\t\t\t:disabled=\"readOnly && callTypeId !== callType.id\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{{callType.title}}\n\t\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"crm-copilot__call-assessment_page-section-body-field-description\">\n\t\t\t\t\t\t\t{{ pageSectionSettingsCallTypeDescription }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t<div \n\t\t\t\t\tv-if=\"isBaasAvailable\"\n\t\t\t\t\tclass=\"crm-copilot__call-assessment_page-section-body\"\n\t\t\t\t>\n\t\t\t\t\t<div :class=\"this.getBodyFieldClassList(['ui-ctl', 'ui-ctl-after-icon', 'ui-ctl-dropdown', 'ui-ctl-w100'])\">\n\t\t\t\t\t\t<label>{{ pageSectionSettingsCheck }}</label>\n\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-w100 ui-ctl-after-icon ui-ctl-dropdown\">\n\t\t\t\t\t\t\t<div class=\"ui-ctl-after ui-ctl-icon-angle\"></div>\n\t\t\t\t\t\t\t<select \n\t\t\t\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t\t\t\tv-model=\"autoCheckTypeId\"\n\t\t\t\t\t\t\t\t@change=\"onAutoCheckTypeIdChange\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<option \n\t\t\t\t\t\t\t\t\tv-for=\"checkType in checkTypes\"\n\t\t\t\t\t\t\t\t\t:value=\"checkType.value\"\n\t\t\t\t\t\t\t\t\t:disabled=\"readOnly && autoCheckTypeId !== checkType.value\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{{checkType.title}}\n\t\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"crm-copilot__call-assessment_page-section-body-field-description\">\n\t\t\t\t\t\t\t{{ pageSectionSettingsCheckDescription }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { ajax as Ajax, Loc, Text, Type } from 'main.core';\nimport { QueueManager } from 'pull.queuemanager';\nimport { UI } from 'ui.notification';\nimport { TextEditor } from 'ui.text-editor';\nimport { BreadcrumbsEvents } from './navigation/breadcrumbs';\nimport { ButtonEvents } from './navigation/button';\nimport { Navigation } from './navigation/navigation';\nimport { AboutPage } from './page/about-page';\nimport type { BasePage } from './page/base-page';\nimport { ClientPage } from './page/client-page';\nimport { ControlPage } from './page/control-page';\nimport { SettingsPage } from './page/settings-page';\n\n/**\n * @see BasePage\n */\ninterface Page extends BasePage\n{\n\tgetId(): string,\n\tgetData(): Object,\n\tvalidate(): boolean,\n\tonValidationFailed(): void,\n\tisReadyToMoveOn(): boolean,\n}\n\nexport const CallAssessment = {\n\tcomponents: {\n\t\tAboutPage,\n\t\tClientPage,\n\t\tSettingsPage,\n\t\tControlPage,\n\t\tNavigation,\n\t},\n\n\tprops: {\n\t\tsettings: {\n\t\t\ttype: Object,\n\t\t\tdefault: {},\n\t\t},\n\t\tparams: {\n\t\t\ttype: Object,\n\t\t\tdefault: {},\n\t\t},\n\t\ttextEditor: TextEditor,\n\t},\n\n\tdata(): Object\n\t{\n\t\tconst { data } = this.params;\n\n\t\tlet id = null;\n\t\tif (this.settings.isCopy)\n\t\t{\n\t\t\tid = null;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tid = data?.id ?? null;\n\t\t}\n\n\t\treturn {\n\t\t\tid,\n\t\t\tpagesData: this.initPagesData(data),\n\t\t\tactivePageId: 'about',\n\t\t\ttitle: data.title ?? null,\n\t\t\tcanShowNextPage: false,\n\t\t};\n\t},\n\n\twatch: {\n\t\tactivePageId(pageId: string): void\n\t\t{\n\t\t\tthis.onPageDataChange({\n\t\t\t\tid: pageId,\n\t\t\t\tdata: this.getPageData(pageId),\n\t\t\t});\n\t\t},\n\t},\n\n\tmethods: {\n\t\tinitPagesData(data: Object): Object\n\t\t{\n\t\t\treturn {\n\t\t\t\tclient: {\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tactiveClientTypeIds: data?.clientTypeIds,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tsettings: {\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tcallTypeId: data?.callTypeId,\n\t\t\t\t\t\tautoCheckTypeId: data?.autoCheckTypeId,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tcontrol: {\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tlowBorder: data?.lowBorder ?? 0,\n\t\t\t\t\t\thighBorder: data?.highBorder ?? 100,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t};\n\t\t},\n\t\tonNavigationButtonClick({ data }): void\n\t\t{\n\t\t\tconst { id } = data;\n\t\t\tif (id === 'cancel' || id === 'close')\n\t\t\t{\n\t\t\t\tthis.closeSlider();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (id === 'back')\n\t\t\t{\n\t\t\t\tconst currentIndex = this.pagesList.indexOf(this.activePageId);\n\n\t\t\t\tif (currentIndex > 0)\n\t\t\t\t{\n\t\t\t\t\tthis.activePageId = this.pagesList[currentIndex - 1];\n\t\t\t\t}\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!this.isActivePageValid())\n\t\t\t{\n\t\t\t\tthis.onActivePageValidationFailed();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (id === 'continue')\n\t\t\t{\n\t\t\t\tconst currentIndex = this.pagesList.indexOf(this.activePageId);\n\n\t\t\t\tif (currentIndex < this.pagesList.length - 1)\n\t\t\t\t{\n\t\t\t\t\tthis.activePageId = this.pagesList[currentIndex + 1];\n\t\t\t\t}\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (id === 'submit' || id === 'update')\n\t\t\t{\n\t\t\t\tthis.sendData();\n\t\t\t}\n\t\t},\n\t\tsendData(): void\n\t\t{\n\t\t\tlet data = {\n\t\t\t\ttitle: this.title,\n\t\t\t};\n\n\t\t\tthis.pagesList.forEach((pageId: string) => {\n\t\t\t\tdata = {\n\t\t\t\t\t...data,\n\t\t\t\t\t...this.$refs[pageId]?.getData(),\n\t\t\t\t};\n\t\t\t});\n\n\t\t\tconst dataParams = {\n\t\t\t\tid: this.id,\n\t\t\t\tdata,\n\t\t\t\teventId: QueueManager.registerRandomEventId('crm-copilot-call-assessment'),\n\t\t\t};\n\n\t\t\ttop.BX.Event.EventEmitter.emit('crm:copilot:callAssessment:beforeSave', dataParams);\n\n\t\t\tAjax\n\t\t\t\t.runAction('crm.copilot.callassessment.save', { data: dataParams })\n\t\t\t\t.then(\n\t\t\t\t\t(response) => {\n\t\t\t\t\t\ttop.BX.Event.EventEmitter.emit('crm:copilot:callAssessment:save', {\n\t\t\t\t\t\t\t...dataParams,\n\t\t\t\t\t\t\tstatus: response?.status,\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif (response?.status !== 'success')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tUI.Notification.Center.notify({\n\t\t\t\t\t\t\t\tcontent: Text.encode(response.errors[0].message),\n\t\t\t\t\t\t\t\tautoHideDelay: 6000,\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.onSaveCallback();\n\t\t\t\t\t\tthis.closeSlider();\n\t\t\t\t\t},\n\t\t\t\t\t(response) => {\n\t\t\t\t\t\tconst messageCode = response.errors[0]?.code === 'AI_NOT_AVAILABLE'\n\t\t\t\t\t\t\t? 'CRM_COPILOT_CALL_ASSESSMENT_PAGE_COPILOT_ERROR'\n\t\t\t\t\t\t\t: 'CRM_COPILOT_CALL_ASSESSMENT_PAGE_SAVE_ERROR'\n\t\t\t\t\t\t;\n\n\t\t\t\t\t\tUI.Notification.Center.notify({\n\t\t\t\t\t\t\tcontent: Loc.getMessage(messageCode),\n\t\t\t\t\t\t\tautoHideDelay: 6000,\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t)\n\t\t\t\t.catch((response) => {\n\t\t\t\t\tUI.Notification.Center.notify({\n\t\t\t\t\t\tcontent: Text.encode(response.errors[0].message),\n\t\t\t\t\t\tautoHideDelay: 6000,\n\t\t\t\t\t});\n\n\t\t\t\t\tthrow response;\n\t\t\t\t})\n\t\t\t;\n\t\t},\n\t\tcloseSlider(): void\n\t\t{\n\t\t\ttop.BX.SidePanel.Instance.getSliderByWindow(window).close();\n\t\t},\n\t\tonSaveCallback(): void\n\t\t{\n\t\t\tif (Type.isFunction(this.params?.events?.onSave))\n\t\t\t{\n\t\t\t\tthis.params.events.onSave();\n\t\t\t}\n\t\t},\n\t\tsetActivePageId({ data }): void\n\t\t{\n\t\t\tconst newPageId = data.itemId;\n\t\t\tconst currentPageIndex = this.pagesList.indexOf(this.activePageId);\n\t\t\tconst newPageIndex = this.pagesList.indexOf(newPageId);\n\n\t\t\tif (currentPageIndex === newPageIndex)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (newPageIndex > currentPageIndex && !this.isActivePageValid())\n\t\t\t{\n\t\t\t\tthis.onActivePageValidationFailed();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.activePageId = newPageId;\n\t\t},\n\t\tisPageActive(id: string): boolean\n\t\t{\n\t\t\treturn this.activePageId === id;\n\t\t},\n\t\tonPageDataChange({ id: pageId, data }): void\n\t\t{\n\t\t\tthis.pagesData[pageId] = data;\n\t\t\tthis.canShowNextPage = this.isActivePageReadyToMoveOn();\n\t\t},\n\t\tgetPageData(pageId: string): Object\n\t\t{\n\t\t\tif (Type.isObjectLike(this.pagesData[pageId]))\n\t\t\t{\n\t\t\t\treturn this.pagesData[pageId].data;\n\t\t\t}\n\n\t\t\treturn {};\n\t\t},\n\t\tgetPageSettings(pageId: string): Object\n\t\t{\n\t\t\tif (pageId === 'settings')\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\tbaas: this.settings.baas ?? {},\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn {};\n\t\t},\n\t\tsetTitle(title: string): void\n\t\t{\n\t\t\tthis.title = title;\n\t\t},\n\t\tisActivePageValid(): boolean\n\t\t{\n\t\t\treturn this.getActivePage().validate();\n\t\t},\n\t\tonActivePageValidationFailed(): void\n\t\t{\n\t\t\treturn this.getActivePage().onValidationFailed();\n\t\t},\n\t\tisActivePageReadyToMoveOn(): boolean\n\t\t{\n\t\t\treturn this.getActivePage().isReadyToMoveOn();\n\t\t},\n\t\tgetActivePage(): Page\n\t\t{\n\t\t\treturn this.$refs[this.activePageId];\n\t\t},\n\t},\n\n\tcomputed: {\n\t\tpagesList(): []\n\t\t{\n\t\t\treturn [\n\t\t\t\t'about',\n\t\t\t\t'client',\n\t\t\t\t'settings',\n\t\t\t\t'control',\n\t\t\t];\n\t\t},\n\t\tisNew(): boolean\n\t\t{\n\t\t\treturn this.params.data?.id <= 0;\n\t\t},\n\t\treadOnly(): boolean\n\t\t{\n\t\t\treturn this.settings.readOnly;\n\t\t},\n\t\tisEnabled(): boolean\n\t\t{\n\t\t\treturn this.settings.isEnabled;\n\t\t},\n\t},\n\n\tmounted()\n\t{\n\t\tthis.canShowNextPage = this.isActivePageReadyToMoveOn();\n\n\t\tthis.$Bitrix.eventEmitter.subscribe(BreadcrumbsEvents.itemClick, this.setActivePageId);\n\t\tthis.$Bitrix.eventEmitter.subscribe(ButtonEvents.click, this.onNavigationButtonClick);\n\t},\n\n\tbeforeUnmount()\n\t{\n\t\tthis.$Bitrix.eventEmitter.unsubscribe(BreadcrumbsEvents.itemClick, this.setActivePageId);\n\t\tthis.$Bitrix.eventEmitter.unsubscribe(ButtonEvents.click, this.onNavigationButtonClick);\n\t},\n\n\ttemplate: `\n\t\t<div class=\"crm-copilot__call-assessment_container\">\n\t\t\t<div class=\"crm-copilot__call-assessment_page-wrapper\">\n\t\t\t\t<AboutPage \n\t\t\t\t\t:is-active=\"isPageActive('about')\"\n\t\t\t\t\t:is-enabled=\"isEnabled\"\n\t\t\t\t\t:data=\"getPageData('about')\"\n\t\t\t\t\t:text-editor=\"textEditor\"\n\t\t\t\t\t@onChange=\"onPageDataChange\"\n\t\t\t\t\tref=\"about\"\n\t\t\t\t/>\n\t\t\t\t<ClientPage \n\t\t\t\t\t:is-active=\"isPageActive('client')\"\n\t\t\t\t\t:is-enabled=\"isEnabled\"\n\t\t\t\t\t:data=\"getPageData('client')\"\n\t\t\t\t\t:read-only=\"readOnly\"\n\t\t\t\t\t@onChange=\"onPageDataChange\"\n\t\t\t\t\tref=\"client\"\n\t\t\t\t/>\n\t\t\t\t<SettingsPage\n\t\t\t\t\t:is-active=\"isPageActive('settings')\"\n\t\t\t\t\t:is-enabled=\"isEnabled\"\n\t\t\t\t\t:data=\"getPageData('settings')\"\n\t\t\t\t\t:settings=\"getPageSettings('settings')\"\n\t\t\t\t\t:read-only=\"readOnly\"\n\t\t\t\t\t@onChange=\"onPageDataChange\"\n\t\t\t\t\tref=\"settings\"\n\t\t\t\t/>\n\t\t\t\t<ControlPage\n\t\t\t\t\t:is-active=\"isPageActive('control')\"\n\t\t\t\t\t:is-enabled=\"isEnabled\"\n\t\t\t\t\t:data=\"getPageData('control')\"\n\t\t\t\t\t:read-only=\"readOnly\"\n\t\t\t\t\t@onChange=\"onPageDataChange\"\n\t\t\t\t\tref=\"control\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<Navigation \n\t\t\t\t:active-tab-id=\"activePageId\"\n\t\t\t\t:is-enabled=\"canShowNextPage\"\n\t\t\t\t:read-only=\"readOnly\"\n\t\t\t\t:show-save-button=\"!isNew && !readOnly\"\n\t\t\t/>\n\t\t</div>\n\t`,\n};\n","import { Dom, Event, Loc, Tag, Text, Type } from 'main.core';\nimport { BasicEditor } from 'ui.text-editor';\nimport { BitrixVue, VueCreateAppResult } from 'ui.vue3';\nimport { CallAssessment as CallAssessmentComponent } from './components/call-assessment';\nimport 'ui.design-tokens';\nimport './call-assessment.css';\n\ntype CallAssessmentParams = {\n\tdata: Object,\n\tconfig?: Object,\n\tevents?: Object,\n}\n\nexport class CallAssessment\n{\n\t#container: HTMLElement;\n\t#app: ?VueCreateAppResult = null;\n\t#layoutComponent: ?Object = null;\n\n\t#titleId: ?string = null;\n\t#titleEditButtonId: ?string = null;\n\n\t#titleInputContainer = null;\n\t#titleNode: ?HTMLElement = null;\n\n\t#titleInput = null;\n\t#inputEditButton = null;\n\t#title: string = null;\n\n\t#textEditor: BasicEditor = null;\n\t#isReadOnly: boolean = true;\n\t#isEnabled: boolean = true;\n\n\tconstructor(containerId: string, params: CallAssessmentParams = {})\n\t{\n\t\tthis.#container = document.getElementById(containerId);\n\n\t\tif (!Type.isDomNode(this.#container))\n\t\t{\n\t\t\tthrow new Error('container not found');\n\t\t}\n\n\t\tthis.#isReadOnly = params.config?.readOnly ?? true;\n\t\tthis.#isEnabled = params.config?.isEnabled ?? true;\n\n\t\tthis.#initTitleInlineEditing(params);\n\n\t\tthis.#app = BitrixVue.createApp(CallAssessmentComponent, {\n\t\t\ttextEditor: this.#getTextEditor(params.data, params.config ?? {}),\n\t\t\tsettings: {\n\t\t\t\treadOnly: this.#isReadOnly,\n\t\t\t\tisEnabled: this.#isEnabled,\n\t\t\t\tisCopy: params.config?.isCopy ?? false,\n\t\t\t\tbaas: params.config?.baasSettings ?? false,\n\t\t\t},\n\t\t\tparams: {\n\t\t\t\tdata: params.data,\n\t\t\t\tevents: params.events,\n\t\t\t},\n\t\t});\n\n\t\tthis.#layoutComponent = this.#app.mount(this.#container);\n\t}\n\n\t#initTitleInlineEditing(params: CallAssessmentParams): void\n\t{\n\t\tif (this.#isReadOnly)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.onTitleInlineEditingStart = this.onTitleInlineEditingStart.bind(this);\n\t\tthis.onTitleInlineEditingFinish = this.onTitleInlineEditingFinish.bind(this);\n\t\tthis.onTitleInputEnterPressed = this.onTitleInputEnterPressed.bind(this);\n\t\tthis.onTitleInputBlur = this.onTitleInputBlur.bind(this);\n\n\t\tconst { config, data } = params;\n\n\t\tconst { titleId, titleEditButtonId } = config ?? {};\n\n\t\tif (!Type.isStringFilled(titleId) || !Type.isStringFilled(titleEditButtonId))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.#titleEditButtonId = titleEditButtonId;\n\t\tthis.#titleId = titleId;\n\n\t\tif (Type.isString(data?.title))\n\t\t{\n\t\t\tthis.#title = data.title;\n\t\t}\n\n\t\tthis.#bindTitleInlineEditingStart();\n\t}\n\n\t#bindTitleInlineEditingStart(): void\n\t{\n\t\tEvent.bind(this.#getInputEditButton(), 'click', this.onTitleInlineEditingStart);\n\t}\n\n\tonTitleInlineEditingStart(): void\n\t{\n\t\tif (this.#titleInputContainer !== null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.#appendTitleInput();\n\t\tthis.#hideTitle();\n\n\t\tthis.#bindTitleInlineEditingFinish();\n\t}\n\n\t#appendTitleInput(): void\n\t{\n\t\tthis.#titleInput = Tag.render`\n\t\t\t<input value=\"${Text.encode(this.#title)}\" type=\"text\" class=\"crm-copilot__call-assessment_title-item\" />\n\t\t`;\n\n\t\tthis.#titleInputContainer = Tag.render`\n\t\t\t<div class=\"crm-copilot__call-assessment_title-wrapper\">\n\t\t\t\t${this.#titleInput}\n\t\t\t</div>\n\t\t`;\n\n\t\tDom.append(this.#titleInputContainer, this.#getTitleNode().parentNode);\n\n\t\tthis.#titleInput.focus();\n\n\t\tconst length = this.#titleInput.value.length;\n\t\tthis.#titleInput.selectionStart = length;\n\t\tthis.#titleInput.selectionEnd = length;\n\n\t\tDom.addClass(\n\t\t\tdocument.querySelector('.copilot-call-assessment-pagetitle-description'),\n\t\t\t'--title-edit',\n\t\t);\n\t}\n\n\t#hideTitle(): void\n\t{\n\t\tDom.style(this.#getTitleNode(), { display: 'none' });\n\t\tDom.style(this.#getInputEditButton(), { display: 'none' });\n\t}\n\n\t#bindTitleInlineEditingFinish(): void\n\t{\n\t\tEvent.bind(document, 'mousedown', this.onTitleInlineEditingFinish);\n\t\tEvent.bind(this.#titleInput, 'keyup', this.onTitleInputEnterPressed);\n\t\tEvent.bind(this.#titleInput, 'blur', this.onTitleInputBlur);\n\t}\n\n\tonTitleInputBlur(event: KeyboardEvent): void\n\t{\n\t\tthis.onTitleInlineEditingFinish(event, false);\n\t}\n\n\tonTitleInputEnterPressed(event: KeyboardEvent): void\n\t{\n\t\tif (event.key === 'Enter')\n\t\t{\n\t\t\tthis.onTitleInlineEditingFinish(event, false);\n\t\t}\n\t}\n\n\tonTitleInlineEditingFinish(event: InputEvent, checkTarget: boolean = true): void\n\t{\n\t\tif (this.#titleInputContainer === null || this.#titleInput === null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (\n\t\t\tcheckTarget\n\t\t\t&& (event.target === this.#titleInput || event.target === this.#getInputEditButton())\n\t\t)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst title = this.#titleInput.value;\n\t\tif (!Type.isStringFilled(title))\n\t\t{\n\t\t\tthis.#titleInput.focus();\n\n\t\t\treturn;\n\t\t}\n\n\t\tthis.#title = title;\n\t\tthis.#layoutComponent.setTitle(this.#title);\n\n\t\tEvent.unbind(document, 'mousedown', this.onTitleInlineEditingFinish);\n\t\tEvent.unbind(this.#titleInput, 'keyup', this.onTitleInputEnterPressed);\n\t\tEvent.unbind(this.#titleInput, 'blur', this.onTitleInputBlur);\n\n\t\tthis.#hideInputAndShowTitle();\n\t}\n\n\t#getInputEditButton(): HTMLElement\n\t{\n\t\tif (this.#inputEditButton === null)\n\t\t{\n\t\t\tthis.#inputEditButton = document.getElementById(this.#titleEditButtonId);\n\t\t}\n\n\t\treturn this.#inputEditButton;\n\t}\n\n\t#hideInputAndShowTitle(): void\n\t{\n\t\tconst titleNode = this.#getTitleNode();\n\t\ttitleNode.innerText = this.#title;\n\n\t\tDom.style(titleNode, { display: 'inline-block' });\n\t\tDom.style(this.#getInputEditButton(), { display: 'inline-block' });\n\t\tDom.remove(this.#titleInputContainer);\n\n\t\tthis.#titleInputContainer = null;\n\n\t\tDom.removeClass(\n\t\t\tdocument.querySelector('.copilot-call-assessment-pagetitle-description'),\n\t\t\t'--title-edit',\n\t\t);\n\t}\n\n\t#getTitleNode(): HTMLElement\n\t{\n\t\tif (this.#titleNode === null)\n\t\t{\n\t\t\tthis.#titleNode = document.getElementById(this.#titleId);\n\t\t}\n\n\t\treturn this.#titleNode;\n\t}\n\n\t#getTextEditor({ prompt: content }, { copilotSettings }): BasicEditor\n\t{\n\t\tif (this.#textEditor !== null)\n\t\t{\n\t\t\treturn this.#textEditor;\n\t\t}\n\n\t\tconst toolbar = (\n\t\t\tthis.#isReadOnly\n\t\t\t\t? []\n\t\t\t\t: [\n\t\t\t\t\t'bold', 'italic', 'underline', 'strikethrough',\n\t\t\t\t\t'|',\n\t\t\t\t\t'numbered-list', 'bulleted-list',\n\t\t\t\t\t'copilot',\n\t\t\t\t]\n\t\t);\n\n\t\tthis.#textEditor = new BasicEditor({\n\t\t\teditable: !this.#isReadOnly,\n\t\t\tremovePlugins: ['BlockToolbar'],\n\t\t\tminHeight: 250,\n\t\t\tmaxHeight: 400,\n\t\t\tcontent,\n\t\t\tplaceholder: Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PLACEHOLDER'),\n\t\t\tparagraphPlaceholder: Loc.getMessage(\n\t\t\t\tType.isPlainObject(copilotSettings)\n\t\t\t\t\t? 'CRM_COPILOT_CALL_ASSESSMENT_PLACEHOLDER_WITH_COPILOT'\n\t\t\t\t\t: null,\n\t\t\t),\n\t\t\ttoolbar,\n\t\t\tfloatingToolbar: [],\n\t\t\tcollapsingMode: false,\n\t\t\tcopilot: {\n\t\t\t\tcopilotOptions: Type.isPlainObject(copilotSettings) ? copilotSettings : null,\n\t\t\t\ttriggerBySpace: true,\n\t\t\t},\n\t\t});\n\n\t\treturn this.#textEditor;\n\t}\n}\n"],"names":["BreadcrumbsEvents","itemClick","Breadcrumbs","props","activeTabId","type","String","data","tabs","getTabsData","methods","itemTitleClassList","id","isSoon","getTab","find","tab","title","Loc","getMessage","emitClickEvent","itemId","soon","$Bitrix","eventEmitter","emit","computed","soonTitle","template","ButtonEvents","click","Button","required","isEnabled","Boolean","default","mounted","initButton","watch","value","button","setState","ButtonState","ACTIVE","DISABLED","UiButton","text","toUpperCase","color","buttonColor","round","size","BX","UI","Size","LARGE","onclick","setDataSet","toLowerCase","$refs","renderTo","Color","SUCCESS","LIGHT_BORDER","LIGHT","ARTICLE_CODE","Navigation","components","readOnly","showSaveButton","firstPage","lastPage","help","buttons","showArticle","window","top","Helper","show","TextEditorWrapperComponent","TextEditorComponent","emits","textEditor","TextEditor","textEditorEvents","onChange","emitChangeData","setTextEditorHeight","windowResizeHandler","bind","Event","unmounted","unbind","Type","isFunction","onChangeDebounce","Runtime","debounce","$emit","prompt","getText","editorOffsetTop","$el","parentNode","offsetTop","navigationClassName","navigationOffsetTop","document","querySelector","textEditorContainerBottomPadding","availableHeight","minHeight","Math","maxHeight","setMinHeight","setMaxHeight","LENGTH_RANGE","MIN","MAX","PromptLength","validate","length","getError","AiDisabledInSettings","showLimitCopilotOffSlider","InfoHelper","message","BasePage","isActive","Object","settings","getId","getData","isReadyToMoveOn","onValidationFailed","Notification","Center","notify","content","autoHideDelay","getBodyFieldClassList","additionalClasses","AboutPage","extends","parser","BBCodeParser","promptLengthValidator","PromptLengthValidator","promptLengthError","isStringFilled","getPlainPromptText","call","parse","toPlainText","trim","pageTitle","pageDescription","clientType","freeze","new","inWork","return","repeated","ClientPage","activeClientTypeIds","clientTypeIds","getClientTypeClassList","clientTypeId","clientTypes","client","includes","onClientTypeSelect","index","indexOf","splice","push","onCheckboxClick","isArrayFilled","clientTypeEnum","description","BordersAccord","lowBorder","highBorder","DELTA","Pill","Number","additionalClass","currentValue","onInlineValueKeyDown","event","key","code","ctrlKey","metaKey","allowedKeysWithCtrlAndMeta","preventDefault","allowedKeys","isNaN","onInlineValueChange","input","innerText","executeValueChange","$nextTick","range","createRange","selection","getSelection","selectNodeContents","collapse","removeAllRanges","addRange","focus","onInlineValueBlur","onlyNums","replaceAll","changeValue","action","ceil","replace","classList","minusButtonClassList","plusButtonClassList","HelpLink","articleCode","onClick","TextWithDialog","dialogTargetId","items","Array","selectedItems","status","isChecked","initDialog","updated","emitSelectItem","targetNode","getElementById","clientSelectorDialog","Dialog","context","multiple","dropdownMode","showAvatars","enableSearch","width","zIndex","events","item","ControlPage","validator","setLowBorder","setHighBorder","SettingsPage","autoCheckTypeId","baas","hasPackage","callTypeId","onAutoCheckTypeIdChange","isBaasHasPackage","target","packageEmptySliderCode","pageSectionSettingsCallType","pageSectionSettingsCallTypeDescription","callTypes","pageSectionSettingsCheck","pageSectionSettingsCheckDescription","checkTypes","isBaasAvailable","isAvailable","aiPackagesEmptySliderCode","CallAssessment","params","isCopy","pagesData","initPagesData","activePageId","canShowNextPage","pageId","onPageDataChange","getPageData","control","onNavigationButtonClick","closeSlider","currentIndex","pagesList","isActivePageValid","onActivePageValidationFailed","sendData","forEach","dataParams","eventId","QueueManager","registerRandomEventId","EventEmitter","Ajax","runAction","then","response","Text","encode","errors","onSaveCallback","messageCode","catch","SidePanel","Instance","getSliderByWindow","close","onSave","setActivePageId","newPageId","currentPageIndex","newPageIndex","isPageActive","isActivePageReadyToMoveOn","isObjectLike","getPageSettings","setTitle","getActivePage","isNew","subscribe","beforeUnmount","unsubscribe","constructor","containerId","isDomNode","Error","config","BitrixVue","createApp","CallAssessmentComponent","baasSettings","mount","onTitleInlineEditingStart","onTitleInputBlur","onTitleInlineEditingFinish","onTitleInputEnterPressed","checkTarget","titleId","titleEditButtonId","isString","Tag","render","Dom","append","selectionStart","selectionEnd","addClass","style","display","titleNode","remove","removeClass","copilotSettings","toolbar","BasicEditor","editable","removePlugins","placeholder","paragraphPlaceholder","isPlainObject","floatingToolbar","collapsingMode","copilot","copilotOptions","triggerBySpace"],"mappings":"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"}