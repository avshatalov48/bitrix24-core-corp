(function(){"use strict";function e(e){this.addressee=e.addressee;this.responders=e.responders||{};this.belongTo="b24-portal-connector";this.queue={};window.addEventListener("message",this.response.bind(this))}e.prototype={request:function(e,t,s,r){var n=Math.random();this.queue[n]={requestId:n,callback:r,action:t,data:s};this.send(e,{requestId:n,action:t,data:s||{}})},send:function(e,t){t=t||{};t.belongTo=this.belongTo;e.postMessage(JSON.stringify(t),this.addressee)},getDataFromEvent:function(e){if(!e.source){return false}if(e.origin!==this.addressee){return false}try{var t=JSON.parse(e.data)}catch(e){return false}if(t.belongTo!==this.belongTo){return false}return t},response:function(e){var t=this.getDataFromEvent(e);if(!t){return}if(t.responseId){var s=this.queue[t.responseId];if(!s||!s.callback){return}s.callback.call(this,t.data,t);return}if(t.action){var r=this.responders[t.action];if(!r){return}this.send(e.source,{responseId:t.requestId,data:r.call(this,t.data)})}}};if(!window.b24Tracker)window.b24Tracker={};b24Tracker.Connector=e})();
//# sourceMappingURL=script.map.js