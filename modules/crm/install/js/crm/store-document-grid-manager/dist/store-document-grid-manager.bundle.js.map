{"version":3,"file":"store-document-grid-manager.bundle.js","sources":["../src/document-manager.js","../src/grid-manager.js"],"sourcesContent":["import {Uri} from \"main.core\";\n\nexport class DocumentManager\n{\n\tstatic getRealizationDocumentDetailUrl(id)\n\t{\n\t\treturn new Uri('/shop/documents/details/sales_order/' + id + '/');\n\t}\n\n\tstatic openRealizationDetailDocument(id)\n\t{\n\t\tconst documentUrl = DocumentManager.getRealizationDocumentDetailUrl(id);\n\t\treturn BX.SidePanel.Instance.open(documentUrl.toString());\n\t}\n}\n","import {ajax, Loc} from 'main.core';\nimport {Popup} from 'main.popup';\nimport {Button, ButtonColor} from 'ui.buttons';\nimport {BaseEvent, EventEmitter} from \"main.core.events\";\nimport {DocumentManager} from \"./document-manager\"\n\nexport class GridManager\n{\n\tconstructor(options)\n\t{\n\t\tthis.gridId = options.gridId;\n\t\tthis.filterId = options.filterId;\n\t\tthis.grid = BX.Main.gridManager.getInstanceById(this.gridId);\n\t\tthis.isConductDisabled = options.isConductDisabled;\n\t\tthis.masterSliderUrl = options.masterSliderUrl;\n\n\t\twindow.top.BX.addCustomEvent('onEntityEditorDocumentOrderShipmentControllerDocumentSave', this.reloadGrid.bind(this));\n\t}\n\n\tgetSelectedIds()\n\t{\n\t\treturn this.grid.getRows().getSelectedIds()\n\t}\n\n\tdeleteDocument(documentId)\n\t{\n\t\tlet popup = new Popup({\n\t\t\tid: 'crm_delete_document_popup',\n\t\t\ttitleBar: Loc.getMessage('DOCUMENT_GRID_DOCUMENT_DELETE_TITLE'),\n\t\t\tcontent: Loc.getMessage('DOCUMENT_GRID_DOCUMENT_DELETE_CONTENT'),\n\t\t\tbuttons: [\n\t\t\t\tnew Button({\n\t\t\t\t\ttext:  Loc.getMessage('DOCUMENT_GRID_CONTINUE'),\n\t\t\t\t\tcolor: ButtonColor.SUCCESS,\n\t\t\t\t\tonclick: (button, event) => {\n\t\t\t\t\t\tajax.runAction(\n\t\t\t\t\t\t\t'crm.api.realizationdocument.setRealization',\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\tid: documentId,\n\t\t\t\t\t\t\t\t\tvalue: 'N',\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t).then((response) => {\n\t\t\t\t\t\t\tpopup.destroy();\n\t\t\t\t\t\t\tthis.reloadGrid();\n\t\t\t\t\t\t}).catch((response) => {\n\t\t\t\t\t\t\tif (response.errors)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tBX.UI.Notification.Center.notify({\n\t\t\t\t\t\t\t\t\tcontent: BX.util.htmlspecialchars(response.errors[0].message),\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tpopup.destroy();\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t}),\n\t\t\t\tnew Button({\n\t\t\t\t\ttext: Loc.getMessage('DOCUMENT_GRID_CANCEL'),\n\t\t\t\t\tcolor: ButtonColor.DANGER,\n\t\t\t\t\tonclick: (button, event) => {\n\t\t\t\t\t\tpopup.destroy();\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t],\n\t\t});\n\t\tpopup.show();\n\t}\n\n\tconductDocument(documentId)\n\t{\n\t\tif (this.isConductDisabled)\n\t\t{\n\t\t\tthis.openStoreMasterSlider();\n\t\t\treturn;\n\t\t}\n\t\tlet popup = new Popup({\n\t\t\tid: 'crm_delete_document_popup',\n\t\t\ttitleBar: Loc.getMessage('DOCUMENT_GRID_DOCUMENT_CONDUCT_TITLE'),\n\t\t\tcontent: Loc.getMessage('DOCUMENT_GRID_DOCUMENT_CONDUCT_CONTENT'),\n\t\t\tbuttons: [\n\t\t\t\tnew Button({\n\t\t\t\t\ttext:  Loc.getMessage('DOCUMENT_GRID_CONTINUE'),\n\t\t\t\t\tcolor: ButtonColor.SUCCESS,\n\t\t\t\t\tonclick: (button, event) => {\n\t\t\t\t\t\tajax.runAction(\n\t\t\t\t\t\t\t'crm.api.realizationdocument.setShipped',\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\tid: documentId,\n\t\t\t\t\t\t\t\t\tvalue: 'Y',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tanalyticsLabel: 'deduct',\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t).then((response) => {\n\t\t\t\t\t\t\tpopup.destroy();\n\t\t\t\t\t\t\tthis.reloadGrid();\n\t\t\t\t\t\t}).catch((response) => {\n\t\t\t\t\t\t\tif (response.errors)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tBX.UI.Notification.Center.notify({\n\t\t\t\t\t\t\t\t\tcontent: BX.util.htmlspecialchars(response.errors[0].message),\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tpopup.destroy();\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t}),\n\t\t\t\tnew Button({\n\t\t\t\t\ttext: Loc.getMessage('DOCUMENT_GRID_CANCEL'),\n\t\t\t\t\tcolor: ButtonColor.DANGER,\n\t\t\t\t\tonclick: (button, event) => {\n\t\t\t\t\t\tpopup.destroy();\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t],\n\t\t});\n\t\tpopup.show();\n\t}\n\n\tcancelDocument(documentId)\n\t{\n\t\tif (this.isConductDisabled)\n\t\t{\n\t\t\tthis.openStoreMasterSlider();\n\t\t\treturn;\n\t\t}\n\t\tlet popup = new Popup({\n\t\t\tid: 'crm_delete_document_popup',\n\t\t\ttitleBar: Loc.getMessage('DOCUMENT_GRID_DOCUMENT_CANCEL_TITLE'),\n\t\t\tcontent: Loc.getMessage('DOCUMENT_GRID_DOCUMENT_CANCEL_CONTENT'),\n\t\t\tbuttons: [\n\t\t\t\tnew Button({\n\t\t\t\t\ttext:  Loc.getMessage('DOCUMENT_GRID_CONTINUE'),\n\t\t\t\t\tcolor: ButtonColor.SUCCESS,\n\t\t\t\t\tonclick: (button, event) => {\n\t\t\t\t\t\tajax.runAction(\n\t\t\t\t\t\t\t'crm.api.realizationdocument.setShipped',\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\tid: documentId,\n\t\t\t\t\t\t\t\t\tvalue: 'N',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tanalyticsLabel: 'cancelDeduct',\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t).then((response) => {\n\t\t\t\t\t\t\tpopup.destroy();\n\t\t\t\t\t\t\tthis.reloadGrid();\n\t\t\t\t\t\t}).catch((response) => {\n\t\t\t\t\t\t\tif (response.errors)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tBX.UI.Notification.Center.notify({\n\t\t\t\t\t\t\t\t\tcontent: BX.util.htmlspecialchars(response.errors[0].message),\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tpopup.destroy();\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t}),\n\t\t\t\tnew Button({\n\t\t\t\t\ttext: Loc.getMessage('DOCUMENT_GRID_CANCEL'),\n\t\t\t\t\tcolor: ButtonColor.DANGER,\n\t\t\t\t\tonclick: (button, event) => {\n\t\t\t\t\t\tpopup.destroy();\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t],\n\t\t});\n\t\tpopup.show();\n\t}\n\n\tdeleteSelectedDocuments()\n\t{\n\t\tlet documentIds = this.getSelectedIds();\n\t\tajax.runAction(\n\t\t\t'crm.api.realizationdocument.setRealizationList',\n\t\t\t{\n\t\t\t\tdata: {\n\t\t\t\t\tids: documentIds,\n\t\t\t\t\tvalue: 'N',\n\t\t\t\t}\n\t\t\t}\n\t\t).then((response) => {\n\t\t\tthis.reloadGrid();\n\t\t}).catch((response) => {\n\t\t\tif (response.errors)\n\t\t\t{\n\t\t\t\tresponse.errors.forEach((error) => {\n\t\t\t\t\tif (error.message)\n\t\t\t\t\t{\n\t\t\t\t\t\tBX.UI.Notification.Center.notify({\n\t\t\t\t\t\t\tcontent: BX.util.htmlspecialchars(error.message),\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\tthis.reloadGrid();\n\t\t});\n\t}\n\n\tconductSelectedDocuments()\n\t{\n\t\tif (this.isConductDisabled)\n\t\t{\n\t\t\tthis.openStoreMasterSlider();\n\t\t\treturn;\n\t\t}\n\t\tlet documentIds = this.getSelectedIds();\n\t\tajax.runAction(\n\t\t\t'crm.api.realizationdocument.setShippedList',\n\t\t\t{\n\t\t\t\tdata: {\n\t\t\t\t\tids: documentIds,\n\t\t\t\t\tvalue: 'Y',\n\t\t\t\t},\n\t\t\t\tanalyticsLabel: 'deduct',\n\t\t\t}\n\t\t).then((response) => {\n\t\t\tthis.reloadGrid();\n\t\t}).catch((response) => {\n\t\t\tif (response.errors)\n\t\t\t{\n\t\t\t\tresponse.errors.forEach((error) => {\n\t\t\t\t\tif (error.message)\n\t\t\t\t\t{\n\t\t\t\t\t\tBX.UI.Notification.Center.notify({\n\t\t\t\t\t\t\tcontent: BX.util.htmlspecialchars(error.message),\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\tthis.reloadGrid();\n\t\t});\n\t}\n\n\tcancelSelectedDocuments()\n\t{\n\t\tif (this.isConductDisabled)\n\t\t{\n\t\t\tthis.openStoreMasterSlider();\n\t\t\treturn;\n\t\t}\n\t\tlet documentIds = this.getSelectedIds();\n\t\tajax.runAction(\n\t\t\t'crm.api.realizationdocument.setShippedList',\n\t\t\t{\n\t\t\t\tdata: {\n\t\t\t\t\tids: documentIds,\n\t\t\t\t\tvalue: 'N',\n\t\t\t\t},\n\t\t\t\tanalyticsLabel: 'cancelDeduct',\n\t\t\t}\n\t\t).then((response) => {\n\t\t\tthis.reloadGrid();\n\t\t}).catch((response) => {\n\t\t\tif (response.errors)\n\t\t\t{\n\t\t\t\tresponse.errors.forEach((error) => {\n\t\t\t\t\tif (error.message)\n\t\t\t\t\t{\n\t\t\t\t\t\tBX.UI.Notification.Center.notify({\n\t\t\t\t\t\t\tcontent: BX.util.htmlspecialchars(error.message),\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\tthis.reloadGrid();\n\t\t});\n\t}\n\n\tapplyFilter(options)\n\t{\n\t\tlet filterManager = BX.Main.filterManager.getById(this.filterId);\n\t\tif (!filterManager)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tfilterManager.getApi().extendFilter(options);\n\t}\n\n\tprocessApplyButtonClick()\n\t{\n\t\tlet actionValues = this.grid.getActionsPanel().getValues();\n\t\tlet selectedAction = actionValues['action_button_' + this.gridId];\n\n\t\tif (selectedAction === 'conduct')\n\t\t{\n\t\t\tthis.conductSelectedDocuments();\n\t\t}\n\t\tif (selectedAction === 'cancel')\n\t\t{\n\t\t\tthis.cancelSelectedDocuments();\n\t\t}\n\t}\n\n\topenHowToShipProducts()\n\t{\n\t\tif(top.BX.Helper)\n\t\t{\n\t\t\ttop.BX.Helper.show(\"redirect=detail&code=14640548\");\n\t\t\tevent.preventDefault();\n\t\t}\n\t}\n\n\topenStoreMasterSlider()\n\t{\n\t\tBX.SidePanel.Instance.open(\n\t\t\tthis.masterSliderUrl,\n\t\t\t{\n\t\t\t\tcacheable: false,\n\t\t\t\tdata: {\n\t\t\t\t\topenGridOnDone: false,\n\t\t\t\t},\n\t\t\t\tevents: {\n\t\t\t\t\tonCloseComplete: function(event) {\n\t\t\t\t\t\tlet slider = event.getSlider();\n\t\t\t\t\t\tif (!slider)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (slider.getData().get('isInventoryManagementEnabled'))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tdocument.location.reload();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t}\n\n\treloadGrid()\n\t{\n\t\tthis.grid.reload();\n\t}\n}\n"],"names":["DocumentManager","id","Uri","documentUrl","getRealizationDocumentDetailUrl","BX","SidePanel","Instance","open","toString","GridManager","options","gridId","filterId","grid","Main","gridManager","getInstanceById","isConductDisabled","masterSliderUrl","window","top","addCustomEvent","reloadGrid","bind","getRows","getSelectedIds","documentId","popup","Popup","titleBar","Loc","getMessage","content","buttons","Button","text","color","ButtonColor","SUCCESS","onclick","button","event","ajax","runAction","data","value","then","response","destroy","errors","UI","Notification","Center","notify","util","htmlspecialchars","message","DANGER","show","openStoreMasterSlider","analyticsLabel","documentIds","ids","forEach","error","filterManager","getById","getApi","extendFilter","actionValues","getActionsPanel","getValues","selectedAction","conductSelectedDocuments","cancelSelectedDocuments","Helper","preventDefault","cacheable","openGridOnDone","events","onCloseComplete","slider","getSlider","getData","get","document","location","reload"],"mappings":"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"}