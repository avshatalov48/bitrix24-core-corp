{"version":3,"file":"store-document-grid-manager.bundle.js","sources":["../src/document-manager.js","../src/grid-manager.js"],"sourcesContent":["import {Uri} from \"main.core\";\n\nexport class DocumentManager\n{\n\tstatic getRealizationDocumentDetailUrl(id)\n\t{\n\t\treturn new Uri('/shop/documents/details/sales_order/' + id + '/');\n\t}\n\n\tstatic openRealizationDetailDocument(id)\n\t{\n\t\tconst documentUrl = DocumentManager.getRealizationDocumentDetailUrl(id);\n\t\treturn BX.SidePanel.Instance.open(documentUrl.toString());\n\t}\n}\n","import { ajax, Dom, Event, Extension, Loc, Tag } from 'main.core';\nimport { Popup } from 'main.popup';\nimport { Button, ButtonColor } from 'ui.buttons';\nimport { BaseEvent, EventEmitter } from 'main.core.events';\nimport { DocumentManager } from './document-manager';\nimport { MessageBox } from 'ui.dialogs.messagebox';\n\nexport class GridManager\n{\n\tconstructor(options)\n\t{\n\t\tthis.gridId = options.gridId;\n\t\tthis.filterId = options.filterId;\n\t\tthis.grid = BX.Main.gridManager.getInstanceById(this.gridId);\n\t\tthis.isConductDisabled = options.isConductDisabled;\n\t\tthis.masterSliderUrl = options.masterSliderUrl;\n\t\tthis.inventoryManagementSource = options.inventoryManagementSource;\n\t\tthis.isInventoryManagementDisabled = options.isInventoryManagementDisabled;\n\t\tthis.inventoryManagementFeatureCode = options.inventoryManagementFeatureCode;\n\n\t\twindow.top.BX.addCustomEvent('onEntityEditorDocumentOrderShipmentControllerDocumentSave', this.reloadGrid.bind(this));\n\t}\n\n\tgetSelectedIds()\n\t{\n\t\treturn this.grid.getRows().getSelectedIds();\n\t}\n\n\tdeleteDocument(documentId)\n\t{\n\t\tif (this.isInventoryManagementDisabled && this.inventoryManagementFeatureCode)\n\t\t{\n\t\t\ttop.BX.UI.InfoHelper.show(this.inventoryManagementFeatureCode);\n\n\t\t\treturn;\n\t\t}\n\n\t\tMessageBox.confirm(\n\t\t\tLoc.getMessage('DOCUMENT_GRID_DOCUMENT_DELETE_CONTENT'),\n\t\t\t(messageBox, button) => {\n\t\t\t\tbutton.setWaiting();\n\t\t\t\tajax.runAction(\n\t\t\t\t\t'crm.api.realizationdocument.setRealization',\n\t\t\t\t\t{\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tid: documentId,\n\t\t\t\t\t\t\tvalue: 'N',\n\t\t\t\t\t\t},\n\t\t\t\t\t\tanalyticsLabel: {\n\t\t\t\t\t\t\taction: 'delete',\n\t\t\t\t\t\t\tinventoryManagementSource: this.inventoryManagementSource,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t).then(() => {\n\t\t\t\t\tmessageBox.close();\n\t\t\t\t\tthis.reloadGrid();\n\t\t\t\t}).catch((response) => {\n\t\t\t\t\tif (response.errors)\n\t\t\t\t\t{\n\t\t\t\t\t\tBX.UI.Notification.Center.notify({\n\t\t\t\t\t\t\tcontent: BX.util.htmlspecialchars(response.errors[0].message),\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tmessageBox.close();\n\t\t\t\t});\n\t\t\t},\n\t\t\tLoc.getMessage('DOCUMENT_GRID_DOCUMENT_DELETE_BUTTON_CONFIRM'),\n\t\t\t(messageBox) => messageBox.close(),\n\t\t\tLoc.getMessage('DOCUMENT_GRID_BUTTON_BACK'),\n\t\t);\n\t}\n\n\tconductDocument(documentId)\n\t{\n\t\tif (this.isInventoryManagementDisabled && this.inventoryManagementFeatureCode)\n\t\t{\n\t\t\ttop.BX.UI.InfoHelper.show(this.inventoryManagementFeatureCode);\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.isConductDisabled)\n\t\t{\n\t\t\tthis.openStoreMasterSlider();\n\n\t\t\treturn;\n\t\t}\n\n\t\tMessageBox.confirm(\n\t\t\tLoc.getMessage('DOCUMENT_GRID_DOCUMENT_CONDUCT_CONTENT'),\n\t\t\t(messageBox, button) => {\n\t\t\t\tbutton.setWaiting();\n\t\t\t\tajax.runAction(\n\t\t\t\t\t'crm.api.realizationdocument.setShipped',\n\t\t\t\t\t{\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tid: documentId,\n\t\t\t\t\t\t\tvalue: 'Y',\n\t\t\t\t\t\t},\n\t\t\t\t\t\tanalyticsLabel: {\n\t\t\t\t\t\t\taction: 'deduct',\n\t\t\t\t\t\t\tinventoryManagementSource: this.inventoryManagementSource,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t).then(() => {\n\t\t\t\t\tmessageBox.close();\n\t\t\t\t\tthis.reloadGrid();\n\t\t\t\t}).catch((response) => {\n\t\t\t\t\tif (response.errors)\n\t\t\t\t\t{\n\t\t\t\t\t\tBX.UI.Notification.Center.notify({\n\t\t\t\t\t\t\tcontent: BX.util.htmlspecialchars(response.errors[0].message),\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tmessageBox.close();\n\t\t\t\t});\n\t\t\t},\n\t\t\tLoc.getMessage('DOCUMENT_GRID_DOCUMENT_CONDUCT_BUTTON_CONFIRM'),\n\t\t\t(messageBox) => messageBox.close(),\n\t\t\tLoc.getMessage('DOCUMENT_GRID_BUTTON_BACK'),\n\t\t);\n\t}\n\n\tcancelDocument(documentId)\n\t{\n\t\tif (this.isInventoryManagementDisabled && this.inventoryManagementFeatureCode)\n\t\t{\n\t\t\ttop.BX.UI.InfoHelper.show(this.inventoryManagementFeatureCode);\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.isConductDisabled)\n\t\t{\n\t\t\tthis.openStoreMasterSlider();\n\n\t\t\treturn;\n\t\t}\n\n\t\tMessageBox.confirm(\n\t\t\tLoc.getMessage('DOCUMENT_GRID_DOCUMENT_CANCEL_CONTENT'),\n\t\t\t(messageBox, button) => {\n\t\t\t\tbutton.setWaiting();\n\t\t\t\tajax.runAction(\n\t\t\t\t\t'crm.api.realizationdocument.setShipped',\n\t\t\t\t\t{\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tid: documentId,\n\t\t\t\t\t\t\tvalue: 'N',\n\t\t\t\t\t\t},\n\t\t\t\t\t\tanalyticsLabel: {\n\t\t\t\t\t\t\taction: 'cancelDeduct',\n\t\t\t\t\t\t\tinventoryManagementSource: this.inventoryManagementSource,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t).then(() => {\n\t\t\t\t\tmessageBox.close();\n\t\t\t\t\tthis.reloadGrid();\n\t\t\t\t}).catch((response) => {\n\t\t\t\t\tif (response.errors)\n\t\t\t\t\t{\n\t\t\t\t\t\tBX.UI.Notification.Center.notify({\n\t\t\t\t\t\t\tcontent: BX.util.htmlspecialchars(response.errors[0].message),\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tmessageBox.close();\n\t\t\t\t});\n\t\t\t},\n\t\t\tLoc.getMessage('DOCUMENT_GRID_DOCUMENT_CANCEL_BUTTON_CONFIRM'),\n\t\t\t(messageBox) => messageBox.close(),\n\t\t\tLoc.getMessage('DOCUMENT_GRID_BUTTON_BACK'),\n\t\t);\n\t}\n\n\tdeleteSelectedDocuments()\n\t{\n\t\tconst documentIds = this.getSelectedIds();\n\t\tajax.runAction(\n\t\t\t'crm.api.realizationdocument.setRealizationList',\n\t\t\t{\n\t\t\t\tdata: {\n\t\t\t\t\tids: documentIds,\n\t\t\t\t\tvalue: 'N',\n\t\t\t\t},\n\t\t\t\tanalyticsLabel: {\n\t\t\t\t\taction: 'delete',\n\t\t\t\t\tinventoryManagementSource: this.inventoryManagementSource,\n\t\t\t\t},\n\t\t\t},\n\t\t).then((response) => {\n\t\t\tthis.reloadGrid();\n\t\t}).catch((response) => {\n\t\t\tif (response.errors)\n\t\t\t{\n\t\t\t\tresponse.errors.forEach((error) => {\n\t\t\t\t\tif (error.message)\n\t\t\t\t\t{\n\t\t\t\t\t\tBX.UI.Notification.Center.notify({\n\t\t\t\t\t\t\tcontent: BX.util.htmlspecialchars(error.message),\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\tthis.reloadGrid();\n\t\t});\n\t}\n\n\tconductSelectedDocuments()\n\t{\n\t\tif (this.isInventoryManagementDisabled && this.inventoryManagementFeatureCode)\n\t\t{\n\t\t\ttop.BX.UI.InfoHelper.show(this.inventoryManagementFeatureCode);\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.isConductDisabled)\n\t\t{\n\t\t\tthis.openStoreMasterSlider();\n\n\t\t\treturn;\n\t\t}\n\t\tconst documentIds = this.getSelectedIds();\n\t\tajax.runAction(\n\t\t\t'crm.api.realizationdocument.setShippedList',\n\t\t\t{\n\t\t\t\tdata: {\n\t\t\t\t\tids: documentIds,\n\t\t\t\t\tvalue: 'Y',\n\t\t\t\t},\n\t\t\t\tanalyticsLabel: {\n\t\t\t\t\tinventoryManagementSource: this.inventoryManagementSource,\n\t\t\t\t\taction: 'deduct',\n\t\t\t\t},\n\t\t\t},\n\t\t).then((response) => {\n\t\t\tthis.reloadGrid();\n\t\t}).catch((response) => {\n\t\t\tif (response.errors)\n\t\t\t{\n\t\t\t\tresponse.errors.forEach((error) => {\n\t\t\t\t\tif (error.message)\n\t\t\t\t\t{\n\t\t\t\t\t\tBX.UI.Notification.Center.notify({\n\t\t\t\t\t\t\tcontent: BX.util.htmlspecialchars(error.message),\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\tthis.reloadGrid();\n\t\t});\n\t}\n\n\tcancelSelectedDocuments()\n\t{\n\t\tif (this.isInventoryManagementDisabled && this.inventoryManagementFeatureCode)\n\t\t{\n\t\t\ttop.BX.UI.InfoHelper.show(this.inventoryManagementFeatureCode);\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.isConductDisabled)\n\t\t{\n\t\t\tthis.openStoreMasterSlider();\n\n\t\t\treturn;\n\t\t}\n\t\tconst documentIds = this.getSelectedIds();\n\t\tajax.runAction(\n\t\t\t'crm.api.realizationdocument.setShippedList',\n\t\t\t{\n\t\t\t\tdata: {\n\t\t\t\t\tids: documentIds,\n\t\t\t\t\tvalue: 'N',\n\t\t\t\t},\n\t\t\t\tanalyticsLabel: {\n\t\t\t\t\tinventoryManagementSource: this.inventoryManagementSource,\n\t\t\t\t\taction: 'cancelDeduct',\n\t\t\t\t},\n\t\t\t},\n\t\t).then((response) => {\n\t\t\tthis.reloadGrid();\n\t\t}).catch((response) => {\n\t\t\tif (response.errors)\n\t\t\t{\n\t\t\t\tresponse.errors.forEach((error) => {\n\t\t\t\t\tif (error.message)\n\t\t\t\t\t{\n\t\t\t\t\t\tBX.UI.Notification.Center.notify({\n\t\t\t\t\t\t\tcontent: BX.util.htmlspecialchars(error.message),\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\tthis.reloadGrid();\n\t\t});\n\t}\n\n\tapplyFilter(options)\n\t{\n\t\tconst filterManager = BX.Main.filterManager.getById(this.filterId);\n\t\tif (!filterManager)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tfilterManager.getApi().extendFilter(options);\n\t}\n\n\tprocessApplyButtonClick()\n\t{\n\t\tconst actionValues = this.grid.getActionsPanel().getValues();\n\t\tconst selectedAction = actionValues[`action_button_${this.gridId}`];\n\n\t\tif (selectedAction === 'conduct')\n\t\t{\n\t\t\tthis.conductSelectedDocuments();\n\t\t}\n\n\t\tif (selectedAction === 'cancel')\n\t\t{\n\t\t\tthis.cancelSelectedDocuments();\n\t\t}\n\t}\n\n\topenHowToShipProducts()\n\t{\n\t\tif (top.BX.Helper)\n\t\t{\n\t\t\ttop.BX.Helper.show('redirect=detail&code=14640548');\n\t\t\tevent.preventDefault();\n\t\t}\n\t}\n\n\topenStoreMasterSlider()\n\t{\n\t\tBX.SidePanel.Instance.open(\n\t\t\tthis.masterSliderUrl,\n\t\t\t{\n\t\t\t\tcacheable: false,\n\t\t\t\tdata: {\n\t\t\t\t\topenGridOnDone: false,\n\t\t\t\t},\n\t\t\t\tevents: {\n\t\t\t\t\tonCloseComplete: function(event) {\n\t\t\t\t\t\tconst slider = event.getSlider();\n\t\t\t\t\t\tif (!slider)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (slider.getData().get('isInventoryManagementEnabled'))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tdocument.location.reload();\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t);\n\t}\n\n\treloadGrid()\n\t{\n\t\tthis.grid.reload();\n\t}\n}\n"],"names":["DocumentManager","id","Uri","documentUrl","getRealizationDocumentDetailUrl","BX","SidePanel","Instance","open","toString","GridManager","options","gridId","filterId","grid","Main","gridManager","getInstanceById","isConductDisabled","masterSliderUrl","inventoryManagementSource","isInventoryManagementDisabled","inventoryManagementFeatureCode","window","top","addCustomEvent","reloadGrid","bind","getRows","getSelectedIds","documentId","UI","InfoHelper","show","MessageBox","confirm","Loc","getMessage","messageBox","button","setWaiting","ajax","runAction","data","value","analyticsLabel","action","then","close","response","errors","Notification","Center","notify","content","util","htmlspecialchars","message","openStoreMasterSlider","documentIds","ids","forEach","error","filterManager","getById","getApi","extendFilter","actionValues","getActionsPanel","getValues","selectedAction","conductSelectedDocuments","cancelSelectedDocuments","Helper","event","preventDefault","cacheable","openGridOnDone","events","onCloseComplete","slider","getSlider","getData","get","document","location","reload"],"mappings":"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"}