(function(){var e=window.BX;if(!!e.CrmUISelector){return}e.CrmUISelector={onGetEntityTypes:function(t){if(!e.type.isNotEmptyObject(t)||!e.type.isNotEmptyObject(t.selector)){return}var r=t.selector;if(r.getOption("enableCrm")!="Y"){return}if(r.getOption("enableCrmContacts")=="Y"){r.entityTypes.CONTACTS={options:{enableSearch:"Y",searchById:"Y",addTab:r.getOption("addTabCrmContacts")=="Y"?"Y":"N",onlyWithEmail:r.getOption("onlyWithEmail")=="Y"?"Y":"N",prefixType:e.type.isNotEmptyString(r.getOption("crmPrefixType"))?r.getOption("crmPrefixType"):"FULL",returnItemUrl:r.getOption("returnItemUrl")=="N"?"N":"Y",returnMultiEmail:r.getOption("returnMultiEmail")=="Y"?"Y":"N"}}}if(r.getOption("enableCrmCompanies")=="Y"){r.entityTypes.COMPANIES={options:{enableSearch:"Y",searchById:"Y",addTab:r.getOption("addTabCrmCompanies")=="Y"?"Y":"N",onlyWithEmail:r.getOption("onlyWithEmail")=="Y"?"Y":"N",onlyMy:r.getOption("onlyMyCompanies")=="Y"?"Y":"N",prefixType:e.type.isNotEmptyString(r.getOption("crmPrefixType"))?r.getOption("crmPrefixType"):"FULL",returnItemUrl:r.getOption("returnItemUrl")=="N"?"N":"Y",returnMultiEmail:r.getOption("returnMultiEmail")=="Y"?"Y":"N"}}}var i=r.getOption("enableCrmDynamics");if(i){var n=r.getOption("crmDynamicTitles")?r.getOption("crmDynamicTitles"):{};for(var s in i){if(i[s]==="Y"){var o="DYNAMICS_"+s;var a=r.getOption("addTabCrmDynamics");r.entityTypes[o]={options:{enableSearch:"Y",searchById:"Y",addTab:a&&a[s]==="Y"?"Y":"N",typeId:s,onlyWithEmail:r.getOption("onlyWithEmail")==="Y"?"Y":"N",prefixType:e.type.isNotEmptyString(r.getOption("crmPrefixType"))?r.getOption("crmPrefixType"):"FULL",returnItemUrl:r.getOption("returnItemUrl")==="N"?"N":"Y",title:n[o]?n[o]:""}}}}}if(r.getOption("enableCrmLeads")=="Y"){r.entityTypes.LEADS={options:{enableSearch:"Y",searchById:"Y",addTab:r.getOption("addTabCrmLeads")=="Y"?"Y":"N",onlyWithEmail:r.getOption("onlyWithEmail")=="Y"?"Y":"N",prefixType:e.type.isNotEmptyString(r.getOption("crmPrefixType"))?r.getOption("crmPrefixType"):"FULL",returnItemUrl:r.getOption("returnItemUrl")=="N"?"N":"Y",returnMultiEmail:r.getOption("returnMultiEmail")=="Y"?"Y":"N"}}}if(r.getOption("enableCrmDeals")=="Y"){r.entityTypes.DEALS={options:{enableSearch:"Y",searchById:"Y",addTab:r.getOption("addTabCrmDeals")=="Y"?"Y":"N",prefixType:e.type.isNotEmptyString(r.getOption("crmPrefixType"))?r.getOption("crmPrefixType"):"FULL",returnItemUrl:r.getOption("returnItemUrl")=="N"?"N":"Y"}}}if(r.getOption("enableCrmOrders")=="Y"){r.entityTypes.ORDERS={options:{enableSearch:"Y",searchById:"Y",addTab:r.getOption("addTabCrmOrders")=="Y"?"Y":"N",prefixType:e.type.isNotEmptyString(r.getOption("crmPrefixType"))?r.getOption("crmPrefixType"):"FULL",returnItemUrl:r.getOption("returnItemUrl")=="N"?"N":"Y"}}}if(r.getOption("enableCrmProducts")=="Y"){r.entityTypes.PRODUCTS={options:{enableSearch:"Y",searchById:"Y",addTab:r.getOption("addTabCrmProducts")=="Y"?"Y":"N",prefixType:e.type.isNotEmptyString(r.getOption("crmPrefixType"))?r.getOption("crmPrefixType"):"FULL",returnItemUrl:r.getOption("returnItemUrl")=="N"?"N":"Y"}}}if(r.getOption("enableCrmQuotes")=="Y"){r.entityTypes.QUOTES={options:{enableSearch:"Y",searchById:"Y",addTab:r.getOption("addTabCrmQuotes")=="Y"?"Y":"N",prefixType:e.type.isNotEmptyString(r.getOption("crmPrefixType"))?r.getOption("crmPrefixType"):"FULL",returnItemUrl:r.getOption("returnItemUrl")=="N"?"N":"Y"}}}},onSearchRequestCallbackSussess:function(t){if(!e.type.isNotEmptyObject(t)||!e.type.isNotEmptyObject(t.responseData)||!e.type.isNotEmptyObject(t.responseData.ENTITIES)||!e.type.isNotEmptyObject(t.selector)){return}var r=t.responseData,i=t.selector;var n=["CONTACTS","COMPANIES","LEADS","DEALS","ORDERS","PRODUCTS","QUOTES"],s=null;for(s in r.ENTITIES){if((n.indexOf(s)>-1||s.match(/^DYNAMICS_\d+$/))&&e.type.isNotEmptyObject(r.ENTITIES[s])&&e.type.isNotEmptyObject(r.ENTITIES[s].ITEMS)){for(var o in r.ENTITIES[s].ITEMS){if(!r.ENTITIES[s].ITEMS.hasOwnProperty(o)){continue}i.entities[s].items[o]=r.ENTITIES[s].ITEMS[o];if(e.type.isNotEmptyObject(t.eventResult)){t.eventResult.found=true;t.eventResult.itemCodeList.push(o)}}}}},onFilterDestinationSelectorConvert:function(t,r){if(!e.type.isNotEmptyObject(t)||!e.type.isNotEmptyString(t.selectorId)||!e.type.isNotEmptyString(t.value)||!e.type.isNotEmptyObject(e.Main)||!e.type.isNotEmptyObject(e.Main.selectorManagerV2)||!e.type.isObject(r)){return}var i=e.Main.selectorManagerV2.getById(t.selectorId);if(!e.type.isNotEmptyObject(i)){return}if(i.getOption("convertJson")=="Y"){var n=null,s=null;if(n=t.value.match(/CRMQUOTE(\d+)/)){s={QUOTE:[parseInt(n[1])]}}else if(n=t.value.match(/CRMPRODUCT(\d+)/)){s={PRODUCT:[parseInt(n[1])]}}else if(n=t.value.match(/CRMCOMPANY(\d+)/)){s={COMPANY:[parseInt(n[1])]}}else if(n=t.value.match(/CRMCONTACT(\d+)/)){s={CONTACT:[parseInt(n[1])]}}else if(n=t.value.match(/CRMLEAD(\d+)/)){s={LEAD:[parseInt(n[1])]}}else if(n=t.value.match(/CRMDEAL(\d+)/)){s={DEAL:[parseInt(n[1])]}}else if(n=t.value.match(/CRMDYNAMIC-(\d+)_(\d+)/)){var o="DYNAMIC_"+n[1];s={};s[o]=[parseInt(n[2])]}if(e.type.isNotEmptyObject(s)){r.value=JSON.stringify(s)}}},setFilterSelected:function(t){if(!e.type.isNotEmptyObject(t)||!e.type.isNotEmptyString(t.selectorId)||!e.type.isNotEmptyObject(e.UI.SelectorManager)||!e.type.isNotEmptyObject(e.Main)||!e.type.isNotEmptyObject(e.Main.selectorManagerV2)){return}var r=e.UI.SelectorManager.instances[t.selectorId],i=e.Main.selectorManagerV2.getById(t.selectorId);if(!e.type.isNotEmptyObject(r)||!e.type.isNotEmptyObject(i)){return}var n=i.getOption("isNumeric"),s=i.getOption("prefix"),o=i.getOption("convertJson"),a=null;if(o=="Y"&&e.type.isNotEmptyString(t.current.value)){var p=JSON.parse(t.current.value);if(e.type.isNotEmptyObject(p)){if(e.type.isArray(p.QUOTE)){for(a=0;a<p.QUOTE.length;a++){i.items.selected["CRMQUOTE"+p.QUOTE[a]]="quotes"}}if(e.type.isArray(p.ORDER)){for(a=0;a<p.ORDER.length;a++){i.items.selected["CRMORDER"+p.ORDER[a]]="orders"}}if(e.type.isArray(p.PRODUCT)){for(a=0;a<p.PRODUCT.length;a++){i.items.selected["CRMPRODUCT"+p.ORDER[a]]="products"}}if(e.type.isArray(p.DEAL)){for(a=0;a<p.DEAL.length;a++){i.items.selected["CRMDEAL"+p.DEAL[a]]="deals"}}if(e.type.isArray(p.LEAD)){for(a=0;a<p.LEAD.length;a++){i.items.selected["CRMLEAD"+p.LEAD[a]]="leads"}}if(e.type.isArray(p.CONTACT)){for(a=0;a<p.CONTACT.length;a++){i.items.selected["CRMCONTACT"+p.CONTACT[a]]="contacts"}}if(e.type.isArray(p.COMPANY)){for(a=0;a<p.COMPANY.length;a++){i.items.selected["CRMCOMPANY"+p.COMPANY[a]]="companies"}}}}else if(n=="Y"){if(s=="CRMCOMPANY"){i.items.selected[s+t.current.value]="companies"}else if(s=="CRMCONTACT"){i.items.selected[s+t.current.value]="contacts"}else if(s=="CRMLEAD"){i.items.selected[s+t.current.value]="leads"}else if(s=="CRMDEAL"){i.items.selected[s+t.current.value]="deals"}else if(s=="CRMORDER"){i.items.selected[s+t.current.value]="orders"}else if(s=="CRMPRODUCT"){i.items.selected[s+t.current.value]="products"}else if(s=="CRMQUOTE"){i.items.selected[s+t.current.value]="quotes"}}}};e.ready(function(){e.addCustomEvent("BX.Main.SelectorV2:onGetEntityTypes",e.CrmUISelector.onGetEntityTypes);e.addCustomEvent("BX.UI.Selector:onSearchRequestCallbackSussess",e.CrmUISelector.onSearchRequestCallbackSussess);e.addCustomEvent("BX.Filter.DestinationSelector:convert",e.CrmUISelector.onFilterDestinationSelectorConvert);e.addCustomEvent("BX.Filter.DestinationSelector:setSelected",e.CrmUISelector.setFilterSelected)})})();
//# sourceMappingURL=crm.selector.map.js