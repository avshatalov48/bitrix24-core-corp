(function(){var e=window.BX;if(!!e.CrmUISelector){return}e.CrmUISelector={onGetEntityTypes:function(t){if(!e.type.isNotEmptyObject(t)||!e.type.isNotEmptyObject(t.selector)){return}var r=t.selector;if(r.getOption("enableCrm")!="Y"){return}if(r.getOption("enableCrmContacts")=="Y"){r.entityTypes.CONTACTS={options:{enableSearch:"Y",searchById:"Y",addTab:r.getOption("addTabCrmContacts")=="Y"?"Y":"N",onlyWithEmail:r.getOption("onlyWithEmail")=="Y"?"Y":"N",prefixType:e.type.isNotEmptyString(r.getOption("crmPrefixType"))?r.getOption("crmPrefixType"):"FULL",returnItemUrl:r.getOption("returnItemUrl")=="N"?"N":"Y"}}}if(r.getOption("enableCrmCompanies")=="Y"){r.entityTypes.COMPANIES={options:{enableSearch:"Y",searchById:"Y",addTab:r.getOption("addTabCrmCompanies")=="Y"?"Y":"N",onlyWithEmail:r.getOption("onlyWithEmail")=="Y"?"Y":"N",onlyMy:r.getOption("onlyMyCompanies")=="Y"?"Y":"N",prefixType:e.type.isNotEmptyString(r.getOption("crmPrefixType"))?r.getOption("crmPrefixType"):"FULL",returnItemUrl:r.getOption("returnItemUrl")=="N"?"N":"Y"}}}if(r.getOption("enableCrmLeads")=="Y"){r.entityTypes.LEADS={options:{enableSearch:"Y",searchById:"Y",addTab:r.getOption("addTabCrmLeads")=="Y"?"Y":"N",onlyWithEmail:r.getOption("onlyWithEmail")=="Y"?"Y":"N",prefixType:e.type.isNotEmptyString(r.getOption("crmPrefixType"))?r.getOption("crmPrefixType"):"FULL",returnItemUrl:r.getOption("returnItemUrl")=="N"?"N":"Y"}}}if(r.getOption("enableCrmDeals")=="Y"){r.entityTypes.DEALS={options:{enableSearch:"Y",searchById:"Y",addTab:r.getOption("addTabCrmDeals")=="Y"?"Y":"N",prefixType:e.type.isNotEmptyString(r.getOption("crmPrefixType"))?r.getOption("crmPrefixType"):"FULL",returnItemUrl:r.getOption("returnItemUrl")=="N"?"N":"Y"}}}if(r.getOption("enableCrmOrders")=="Y"){r.entityTypes.ORDERS={options:{enableSearch:"Y",searchById:"Y",addTab:r.getOption("addTabCrmOrders")=="Y"?"Y":"N",prefixType:e.type.isNotEmptyString(r.getOption("crmPrefixType"))?r.getOption("crmPrefixType"):"FULL",returnItemUrl:r.getOption("returnItemUrl")=="N"?"N":"Y"}}}if(r.getOption("enableCrmProducts")=="Y"){r.entityTypes.PRODUCTS={options:{enableSearch:"Y",searchById:"Y",addTab:r.getOption("addTabCrmProducts")=="Y"?"Y":"N",prefixType:e.type.isNotEmptyString(r.getOption("crmPrefixType"))?r.getOption("crmPrefixType"):"FULL",returnItemUrl:r.getOption("returnItemUrl")=="N"?"N":"Y"}}}if(r.getOption("enableCrmQuotes")=="Y"){r.entityTypes.QUOTES={options:{enableSearch:"Y",searchById:"Y",addTab:r.getOption("addTabCrmQuotes")=="Y"?"Y":"N",prefixType:e.type.isNotEmptyString(r.getOption("crmPrefixType"))?r.getOption("crmPrefixType"):"FULL",returnItemUrl:r.getOption("returnItemUrl")=="N"?"N":"Y"}}}},onSearchRequestCallbackSussess:function(t){if(!e.type.isNotEmptyObject(t)||!e.type.isNotEmptyObject(t.responseData)||!e.type.isNotEmptyObject(t.responseData.ENTITIES)||!e.type.isNotEmptyObject(t.selector)){return}var r=t.responseData,i=t.selector;var n=["CONTACTS","COMPANIES","LEADS","DEALS","ORDERS","PRODUCTS","QUOTES"],s=null;for(var o=0;o<n.length;o++){s=[n[o]];if(e.type.isNotEmptyObject(r.ENTITIES[s])&&e.type.isNotEmptyObject(r.ENTITIES[s].ITEMS)){for(var p in r.ENTITIES[s].ITEMS){if(!r.ENTITIES[s].ITEMS.hasOwnProperty(p)){continue}i.entities[s].items[p]=r.ENTITIES[s].ITEMS[p];if(e.type.isNotEmptyObject(t.eventResult)){t.eventResult.found=true;t.eventResult.itemCodeList.push(p)}}}}},onFilterDestinationSelectorConvert:function(t,r){if(!e.type.isNotEmptyObject(t)||!e.type.isNotEmptyString(t.selectorId)||!e.type.isNotEmptyString(t.value)||!e.type.isNotEmptyObject(e.Main)||!e.type.isNotEmptyObject(e.Main.selectorManagerV2)||!e.type.isObject(r)){return}var i=e.Main.selectorManagerV2.getById(t.selectorId);if(!e.type.isNotEmptyObject(i)){return}if(i.getOption("convertJson")=="Y"){var n=null,s=null;if(n=t.value.match(/CRMQUOTE(\d+)/)){s={QUOTE:[parseInt(n[1])]}}else if(n=t.value.match(/CRMPRODUCT(\d+)/)){s={PRODUCT:[parseInt(n[1])]}}else if(n=t.value.match(/CRMCOMPANY(\d+)/)){s={COMPANY:[parseInt(n[1])]}}else if(n=t.value.match(/CRMCONTACT(\d+)/)){s={CONTACT:[parseInt(n[1])]}}else if(n=t.value.match(/CRMLEAD(\d+)/)){s={LEAD:[parseInt(n[1])]}}else if(n=t.value.match(/CRMDEAL(\d+)/)){s={DEAL:[parseInt(n[1])]}}if(e.type.isNotEmptyObject(s)){r.value=JSON.stringify(s)}}},setFilterSelected:function(t){if(!e.type.isNotEmptyObject(t)||!e.type.isNotEmptyString(t.selectorId)||!e.type.isNotEmptyObject(e.UI.SelectorManager)||!e.type.isNotEmptyObject(e.Main)||!e.type.isNotEmptyObject(e.Main.selectorManagerV2)){return}var r=e.UI.SelectorManager.instances[t.selectorId],i=e.Main.selectorManagerV2.getById(t.selectorId);if(!e.type.isNotEmptyObject(r)||!e.type.isNotEmptyObject(i)){return}var n=i.getOption("isNumeric"),s=i.getOption("prefix"),o=i.getOption("convertJson"),p=null;if(o=="Y"&&e.type.isNotEmptyString(t.current.value)){var a=JSON.parse(t.current.value);if(e.type.isNotEmptyObject(a)){if(e.type.isArray(a.QUOTE)){for(p=0;p<a.QUOTE.length;p++){i.items.selected["CRMQUOTE"+a.QUOTE[p]]="quotes"}}if(e.type.isArray(a.ORDER)){for(p=0;p<a.ORDER.length;p++){i.items.selected["CRMORDER"+a.ORDER[p]]="orders"}}if(e.type.isArray(a.PRODUCT)){for(p=0;p<a.PRODUCT.length;p++){i.items.selected["CRMPRODUCT"+a.ORDER[p]]="products"}}if(e.type.isArray(a.DEAL)){for(p=0;p<a.DEAL.length;p++){i.items.selected["CRMDEAL"+a.DEAL[p]]="deals"}}if(e.type.isArray(a.LEAD)){for(p=0;p<a.LEAD.length;p++){i.items.selected["CRMLEAD"+a.LEAD[p]]="leads"}}if(e.type.isArray(a.CONTACT)){for(p=0;p<a.CONTACT.length;p++){i.items.selected["CRMCONTACT"+a.CONTACT[p]]="contacts"}}if(e.type.isArray(a.COMPANY)){for(p=0;p<a.COMPANY.length;p++){i.items.selected["CRMCOMPANY"+a.COMPANY[p]]="companies"}}}}else if(n=="Y"){if(s=="CRMCOMPANY"){i.items.selected[s+t.current.value]="companies"}else if(s=="CRMCONTACT"){i.items.selected[s+t.current.value]="contacts"}else if(s=="CRMLEAD"){i.items.selected[s+t.current.value]="leads"}else if(s=="CRMDEAL"){i.items.selected[s+t.current.value]="deals"}else if(s=="CRMORDER"){i.items.selected[s+t.current.value]="orders"}else if(s=="CRMPRODUCT"){i.items.selected[s+t.current.value]="products"}else if(s=="CRMQUOTE"){i.items.selected[s+t.current.value]="quotes"}}}};e.ready(function(){e.addCustomEvent("BX.Main.SelectorV2:onGetEntityTypes",e.CrmUISelector.onGetEntityTypes);e.addCustomEvent("BX.UI.Selector:onSearchRequestCallbackSussess",e.CrmUISelector.onSearchRequestCallbackSussess);e.addCustomEvent("BX.Filter.DestinationSelector:convert",e.CrmUISelector.onFilterDestinationSelectorConvert);e.addCustomEvent("BX.Filter.DestinationSelector:setSelected",e.CrmUISelector.setFilterSelected)})})();
//# sourceMappingURL=crm.selector.map.js