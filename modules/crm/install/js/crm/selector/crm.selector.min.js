(function(){var e=window.BX;if(!!e.CrmUISelector){return}e.CrmUISelector={onGetEntityTypes:function(t){if(!e.type.isNotEmptyObject(t)||!e.type.isNotEmptyObject(t.selector)){return}var r=t.selector;if(r.getOption("enableCrm")!="Y"){return}if(r.getOption("enableCrmContacts")=="Y"){r.entityTypes.CONTACTS={options:{enableSearch:"Y",searchById:"Y",addTab:r.getOption("addTabCrmContacts")=="Y"?"Y":"N",onlyWithEmail:r.getOption("onlyWithEmail")=="Y"?"Y":"N",prefixType:e.type.isNotEmptyString(r.getOption("crmPrefixType"))?r.getOption("crmPrefixType"):"FULL",returnItemUrl:r.getOption("returnItemUrl")=="N"?"N":"Y",returnMultiEmail:r.getOption("returnMultiEmail")=="Y"?"Y":"N"}}}if(r.getOption("enableCrmCompanies")=="Y"){r.entityTypes.COMPANIES={options:{enableSearch:"Y",searchById:"Y",addTab:r.getOption("addTabCrmCompanies")=="Y"?"Y":"N",onlyWithEmail:r.getOption("onlyWithEmail")=="Y"?"Y":"N",onlyMy:r.getOption("onlyMyCompanies")=="Y"?"Y":"N",prefixType:e.type.isNotEmptyString(r.getOption("crmPrefixType"))?r.getOption("crmPrefixType"):"FULL",returnItemUrl:r.getOption("returnItemUrl")=="N"?"N":"Y",returnMultiEmail:r.getOption("returnMultiEmail")=="Y"?"Y":"N"}}}var i=r.getOption("enableCrmDynamics");if(i){var n=r.getOption("crmDynamicTitles")?r.getOption("crmDynamicTitles"):{};for(var o in i){if(i[o]==="Y"){var s="DYNAMICS_"+o;var p=r.getOption("addTabCrmDynamics");r.entityTypes[s]={options:{enableSearch:"Y",searchById:"Y",addTab:p&&p[o]==="Y"?"Y":"N",typeId:o,onlyWithEmail:r.getOption("onlyWithEmail")==="Y"?"Y":"N",prefixType:e.type.isNotEmptyString(r.getOption("crmPrefixType"))?r.getOption("crmPrefixType"):"FULL",returnItemUrl:r.getOption("returnItemUrl")==="N"?"N":"Y",title:n[s]?n[s]:""}}}}}if(r.getOption("enableCrmLeads")=="Y"){r.entityTypes.LEADS={options:{enableSearch:"Y",searchById:"Y",addTab:r.getOption("addTabCrmLeads")=="Y"?"Y":"N",onlyWithEmail:r.getOption("onlyWithEmail")=="Y"?"Y":"N",prefixType:e.type.isNotEmptyString(r.getOption("crmPrefixType"))?r.getOption("crmPrefixType"):"FULL",returnItemUrl:r.getOption("returnItemUrl")=="N"?"N":"Y",returnMultiEmail:r.getOption("returnMultiEmail")=="Y"?"Y":"N"}}}if(r.getOption("enableCrmDeals")=="Y"){r.entityTypes.DEALS={options:{enableSearch:"Y",searchById:"Y",addTab:r.getOption("addTabCrmDeals")=="Y"?"Y":"N",prefixType:e.type.isNotEmptyString(r.getOption("crmPrefixType"))?r.getOption("crmPrefixType"):"FULL",returnItemUrl:r.getOption("returnItemUrl")=="N"?"N":"Y"}}}if(r.getOption("enableCrmOrders")=="Y"){r.entityTypes.ORDERS={options:{enableSearch:"Y",searchById:"Y",addTab:r.getOption("addTabCrmOrders")=="Y"?"Y":"N",prefixType:e.type.isNotEmptyString(r.getOption("crmPrefixType"))?r.getOption("crmPrefixType"):"FULL",returnItemUrl:r.getOption("returnItemUrl")=="N"?"N":"Y"}}}if(r.getOption("enableCrmProducts")=="Y"){r.entityTypes.PRODUCTS={options:{enableSearch:"Y",searchById:"Y",addTab:r.getOption("addTabCrmProducts")=="Y"?"Y":"N",prefixType:e.type.isNotEmptyString(r.getOption("crmPrefixType"))?r.getOption("crmPrefixType"):"FULL",returnItemUrl:r.getOption("returnItemUrl")=="N"?"N":"Y"}}}if(r.getOption("enableCrmQuotes")=="Y"){r.entityTypes.QUOTES={options:{enableSearch:"Y",searchById:"Y",addTab:r.getOption("addTabCrmQuotes")=="Y"?"Y":"N",prefixType:e.type.isNotEmptyString(r.getOption("crmPrefixType"))?r.getOption("crmPrefixType"):"FULL",returnItemUrl:r.getOption("returnItemUrl")=="N"?"N":"Y"}}}if(r.getOption("enableCrmSmartInvoices")==="Y"){r.entityTypes.SMART_INVOICES={options:{enableSearch:"Y",searchById:"Y",addTab:r.getOption("addTabCrmSmartInvoices")==="Y"?"Y":"N",prefixType:e.type.isNotEmptyString(r.getOption("crmPrefixType"))?r.getOption("crmPrefixType"):"FULL",returnItemUrl:r.getOption("returnItemUrl")==="N"?"N":"Y"}}}},onSearchRequestCallbackSussess:function(t){if(!e.type.isNotEmptyObject(t)||!e.type.isNotEmptyObject(t.responseData)||!e.type.isNotEmptyObject(t.responseData.ENTITIES)||!e.type.isNotEmptyObject(t.selector)){return}var r=t.responseData,i=t.selector;var n=["CONTACTS","COMPANIES","LEADS","DEALS","ORDERS","PRODUCTS","QUOTES"],o=null;for(o in r.ENTITIES){if((n.indexOf(o)>-1||o.match(/^DYNAMICS_\d+$/))&&e.type.isNotEmptyObject(r.ENTITIES[o])&&e.type.isNotEmptyObject(r.ENTITIES[o].ITEMS)){for(var s in r.ENTITIES[o].ITEMS){if(!r.ENTITIES[o].ITEMS.hasOwnProperty(s)){continue}i.entities[o].items[s]=r.ENTITIES[o].ITEMS[s];if(e.type.isNotEmptyObject(t.eventResult)){t.eventResult.found=true;t.eventResult.itemCodeList.push(s)}}}}},onFilterDestinationSelectorConvert:function(t,r){if(!e.type.isNotEmptyObject(t)||!e.type.isNotEmptyString(t.selectorId)||!e.type.isNotEmptyString(t.value)||!e.type.isNotEmptyObject(e.Main)||!e.type.isNotEmptyObject(e.Main.selectorManagerV2)||!e.type.isObject(r)){return}var i=e.Main.selectorManagerV2.getById(t.selectorId);if(!e.type.isNotEmptyObject(i)){return}if(i.getOption("convertJson")=="Y"){var n=null,o=null;if(n=t.value.match(/CRMQUOTE(\d+)/)){o={QUOTE:[parseInt(n[1])]}}else if(n=t.value.match(/CRMPRODUCT(\d+)/)){o={PRODUCT:[parseInt(n[1])]}}else if(n=t.value.match(/CRMCOMPANY(\d+)/)){o={COMPANY:[parseInt(n[1])]}}else if(n=t.value.match(/CRMCONTACT(\d+)/)){o={CONTACT:[parseInt(n[1])]}}else if(n=t.value.match(/CRMLEAD(\d+)/)){o={LEAD:[parseInt(n[1])]}}else if(n=t.value.match(/CRMDEAL(\d+)/)){o={DEAL:[parseInt(n[1])]}}else if(n=t.value.match(/CRMSMART_INVOICE(\d+)/)){o={SMART_INVOICE:[parseInt(n[1])]}}else if(n=t.value.match(/CRMDYNAMIC-(\d+)_(\d+)/)){var s="DYNAMIC_"+n[1];o={};o[s]=[parseInt(n[2])]}if(e.type.isNotEmptyObject(o)){r.value=JSON.stringify(o)}}},setFilterSelected:function(t){if(!e.type.isNotEmptyObject(t)||!e.type.isNotEmptyString(t.selectorId)||!e.type.isNotEmptyObject(e.UI.SelectorManager)||!e.type.isNotEmptyObject(e.Main)||!e.type.isNotEmptyObject(e.Main.selectorManagerV2)){return}var r=e.UI.SelectorManager.instances[t.selectorId],i=e.Main.selectorManagerV2.getById(t.selectorId);if(!e.type.isNotEmptyObject(r)||!e.type.isNotEmptyObject(i)){return}var n=i.getOption("isNumeric"),o=i.getOption("prefix"),s=i.getOption("convertJson"),p=null;if(s=="Y"&&e.type.isNotEmptyString(t.current.value)){var a=JSON.parse(t.current.value);if(e.type.isNotEmptyObject(a)){if(e.type.isArray(a.QUOTE)){for(p=0;p<a.QUOTE.length;p++){i.items.selected["CRMQUOTE"+a.QUOTE[p]]="quotes"}}if(e.type.isArray(a.ORDER)){for(p=0;p<a.ORDER.length;p++){i.items.selected["CRMORDER"+a.ORDER[p]]="orders"}}if(e.type.isArray(a.PRODUCT)){for(p=0;p<a.PRODUCT.length;p++){i.items.selected["CRMPRODUCT"+a.ORDER[p]]="products"}}if(e.type.isArray(a.DEAL)){for(p=0;p<a.DEAL.length;p++){i.items.selected["CRMDEAL"+a.DEAL[p]]="deals"}}if(e.type.isArray(a.LEAD)){for(p=0;p<a.LEAD.length;p++){i.items.selected["CRMLEAD"+a.LEAD[p]]="leads"}}if(e.type.isArray(a.CONTACT)){for(p=0;p<a.CONTACT.length;p++){i.items.selected["CRMCONTACT"+a.CONTACT[p]]="contacts"}}if(e.type.isArray(a.COMPANY)){for(p=0;p<a.COMPANY.length;p++){i.items.selected["CRMCOMPANY"+a.COMPANY[p]]="companies"}}}}else if(n=="Y"){if(o=="CRMCOMPANY"){i.items.selected[o+t.current.value]="companies"}else if(o=="CRMCONTACT"){i.items.selected[o+t.current.value]="contacts"}else if(o=="CRMLEAD"){i.items.selected[o+t.current.value]="leads"}else if(o=="CRMDEAL"){i.items.selected[o+t.current.value]="deals"}else if(o=="CRMORDER"){i.items.selected[o+t.current.value]="orders"}else if(o=="CRMPRODUCT"){i.items.selected[o+t.current.value]="products"}else if(o=="CRMQUOTE"){i.items.selected[o+t.current.value]="quotes"}}}};e.ready(function(){e.addCustomEvent("BX.Main.SelectorV2:onGetEntityTypes",e.CrmUISelector.onGetEntityTypes);e.addCustomEvent("BX.UI.Selector:onSearchRequestCallbackSussess",e.CrmUISelector.onSearchRequestCallbackSussess);e.addCustomEvent("BX.Filter.DestinationSelector:convert",e.CrmUISelector.onFilterDestinationSelectorConvert);e.addCustomEvent("BX.Filter.DestinationSelector:setSelected",e.CrmUISelector.setFilterSelected)})})();
//# sourceMappingURL=crm.selector.map.js