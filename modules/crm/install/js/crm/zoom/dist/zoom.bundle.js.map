{"version":3,"file":"zoom.bundle.js","sources":["../src/zoom.js"],"sourcesContent":["import {Type, Tag, Loc, Dom, Event, Cache} from 'main.core';\nimport {BaseEvent, EventEmitter} from 'main.core.events';\nimport {Timeline} from 'ui.timeline';\nimport {Planner} from \"calendar.planner\";\nimport {Util} from \"calendar.util\";\n\n/**\n * @memberOf BX.UI.Timeline\n * @mixes EventEmitter\n */\nexport class Zoom extends Timeline.Editor\n{\n\tTITLE = 'Zoom';\n\terror = false;\n\terrorMessages = [];\n\tcache = new Cache.MemoryCache();\n\n\tconstructor(params: {\n\t\tid: string,\n\t\tcontainer: HTMLElement,\n\t\tmanager: ?BX.CrmTimelineManager,\n\t\tuserId: string\n\t})\n\t{\n\t\tsuper(params);\n\t\tthis.containerId = params.container;\n\t\tthis.manager = params.manager;\n\t\tthis.userId = +params.userId;\n\t\tthis.setEventNamespace('BX.UI.Timeline.ZoomEditor');\n\t\tDom.append(this.getFormContainer(), BX(this.containerId));\n\t\tEvent.bind(this.getDateContainer(), 'click', (e) => {this.onDateFieldClick(e)});\n\t\tEvent.bind(this.getTimeContainer(), 'click', () => {\n\t\t\tthis.onTimeSwitchClick(this.getTimeInputField())\n\t\t});\n\n\t\tEvent.bind(this.getDateContainer(), 'change', () => {this.onUpdateDateTime()});\n\t\tEvent.bind(this.getTimeContainer(), 'change', () => {this.onUpdateDateTime()});\n\t\tEvent.bind(this.getDurationInputField(), 'change', () => {this.onUpdateDateTime()});\n\t\tEvent.bind(this.getDurationTypeInputField(), 'change', () => {this.onUpdateDateTime()});\n\t}\n\n\tstatic onNotConnectedHandler(userId)\n\t{\n\t\tconst url = document.location.href;\n\t\tvar userProfileUri = '/company/personal/user/' + userId + '/social_services/';\n\t\tBX.SidePanel.Instance.open(userProfileUri, {\n\t\t\tevents: {\n\t\t\t\tallowChangeHistory: false,\n\t\t\t\tonClose: function() {\n\t\t\t\t\ttop.location.href = url;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tstatic onNotAvailableHandler()\n\t{\n\t\tBX.UI.InfoHelper.show('limit_video_conference_zoom_crm');\n\t}\n\n\tgetTitle(): string\n\t{\n\t\treturn this.TITLE;\n\t}\n\n\tgetStartDateTime(): string\n\t{\n\t\tconst ts =  BX.parseDate(this.getDateInputField().value).getTime() + this.unFormatTime(this.getTimeInputField().textContent) * 1000;\n\n\t\treturn new Date(ts);\n\t};\n\n\tgetEndDateTime(): Date\n\t{\n\t\tlet duration = +this.getDurationInputField().value;\n\t\tconst durationType = this.getDurationTypeInputField().value;\n\n\t\tif (durationType === 'h')\n\t\t{\n\t\t\tduration *= 60 * 60 * 1000;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tduration *= 60 * 1000;\n\t\t}\n\n\t\tconst endDateTime = new Date();\n\t\tendDateTime.setTime(this.getStartDateTime().getTime() + duration);\n\n\t\treturn endDateTime;\n\t};\n\n\tonUpdateDateTime(): string\n\t{\n\t\tthis.planner.updateSelector(this.getStartDateTime(), this.getEndDateTime(), false);\n\t}\n\n\tonDateFieldClick(e)\n\t{\n\t\tBX.calendar({ node: e.currentTarget, field: this.getDateInputField(), bTime: false});\n\t\treturn false;\n\t};\n\n\tonTimeSwitchClick(element)\n\t{\n\t\tif (!this.clockInstance)\n\t\t{\n\t\t\tthis.clockInstance = new BX.CClockSelector({\n\t\t\t\tstart_time: this.unFormatTime(element.textContent),\n\t\t\t\tnode: element,\n\t\t\t\tcallback: BX.doNothing\n\t\t\t});\n\t\t}\n\n\t\tthis.clockInstance.setNode(element);\n\t\tthis.clockInstance.setTime(this.unFormatTime(element.textContent));\n\t\tthis.clockInstance.setCallback((v) => {\n\t\t\telement.textContent = v;\n\t\t\tBX.fireEvent(element, 'change');\n\t\t\tthis.clockInstance.closeWnd();\n\t\t});\n\t\tthis.clockInstance.Show();\n\t};\n\n\tformatTime(date)\n\t{\n\t\tconst dateFormat = BX.date.convertBitrixFormat(BX.message('FORMAT_DATE')).replace(/:?\\s*s/, ''),\n\t\t\ttimeFormat = BX.date.convertBitrixFormat(BX.message('FORMAT_DATETIME')).replace(/:?\\s*s/, ''),\n\t\t\tstr1 = BX.date.format(dateFormat, date),\n\t\t\tstr2 = BX.date.format(timeFormat, date);\n\t\treturn BX.util.trim(str2.replace(str1, ''));\n\t}\n\n\tunFormatTime(time)\n\t{\n\t\tlet q = time.split(/[\\s:]+/);\n\t\tif (q.length == 3)\n\t\t{\n\t\t\tconst mt = q[2];\n\t\t\tif (mt == 'pm' && q[0] < 12)\n\t\t\t\tq[0] = parseInt(q[0], 10) + 12;\n\n\t\t\tif (mt == 'am' && q[0] == 12)\n\t\t\t\tq[0] = 0;\n\n\t\t}\n\t\treturn parseInt(q[0], 10) * 3600 + parseInt(q[1], 10) * 60;\n\t};\n\n\tgetDateContainer(): HTMLElement\n\t{\n\t\treturn this.cache.remember('startDateContainer', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"ui-ctl ui-ctl-sm ui-ctl-after-icon ui-ctl-date\">\n\t\t\t\t\t<div class=\"ui-ctl-after ui-ctl-icon-calendar\"></div>\n\t\t\t\t\t${this.getDateInputField()}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetDateInputField(): HTMLElement\n\t{\n\t\treturn this.cache.remember('startDateInputField', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<input type=\"text\" class=\"ui-ctl-element\">\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetTimeContainer(): HTMLElement\n\t{\n\t\treturn this.cache.remember('startTimeContainer', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"ui-ctl ui-ctl-sm ui-ctl-after-icon ui-ctl-dropdown crm-entity-stream-content-new-zoom-field-sm\">\n\t\t\t\t\t<div class=\"ui-ctl-after ui-ctl-icon-angle\"></div>\n\t\t\t\t\t${this.getTimeInputField()}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetTimeInputField(): HTMLElement\n\t{\n\t\treturn this.cache.remember('startTimeInputField', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"ui-ctl-element\">12:00</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetTitleInputField(): HTMLElement\n\t{\n\t\treturn this.cache.remember('titleInputField', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<input type=\"text\" class=\"ui-ctl-element\" value=\"${Loc.getMessage('CRM_ZOOM_NEW_CONFERENCE_TITLE_PLACEHOLDER')}\">\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetDurationInputField(): HTMLElement\n\t{\n\t\treturn this.cache.remember('durationInputField', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<input type=\"text\" class=\"ui-ctl-element\" value=\"30\">\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetDurationTypeInputField(): HTMLElement\n\t{\n\t\treturn this.cache.remember('durationTypeInputField', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<select class=\"ui-ctl-element\">\n\t\t\t\t\t<option value=\"m\">${Loc.getMessage('CRM_ZOOM_NEW_CONFERENCE_DURATION_MINUTES')}</option>\n\t\t\t\t\t<option value=\"h\">${Loc.getMessage('CRM_ZOOM_NEW_CONFERENCE_DURATION_HOURS')}</option>\n\t\t\t\t</select>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetFormContainer(): HTMLElement\n\t{\n\t\treturn this.cache.remember('formContainer', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"crm-entity-stream-content-new-zoom\">\n\t\t\t\t\t<div class=\"crm-entity-stream-content-new-zoom-inner\">\n\t\t\t\t\t\t<div class=\"crm-entity-stream-content-new-zoom-field\">\n\t\t\t\t\t\t\t<div class=\"crm-entity-stream-content-new-zoom-field-inner\">\n\t\t\t\t\t\t\t\t<label for=\"\" class=\"crm-entity-stream-content-new-zoom-field-label\">${Loc.getMessage('CRM_ZOOM_NEW_CONFERENCE_TITLE')}</label>\n\t\t\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-sm ui-ctl-w100 ui-ctl-textbox\">\n\t\t\t\t\t\t\t\t\t${this.getTitleInputField()}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"crm-entity-stream-content-new-zoom-field\">\n\t\t\t\t\t\t\t<div class=\"crm-entity-stream-content-new-zoom-field-block\">\n\t\t\t\t\t\t\t\t<label for=\"\" class=\"crm-entity-stream-content-new-zoom-field-label\">${Loc.getMessage('CRM_ZOOM_NEW_CONFERENCE_DATE_CAPTION')}</label>\n\t\t\t\t\t\t\t\t<div class=\"crm-entity-stream-content-new-zoom-field-control\">\n\t\t\t\t\t\t\t\t\t${this.getDateContainer()}\n\t\t\t\t\t\t\t\t\t${this.getTimeContainer()}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"crm-entity-stream-content-new-zoom-field-block\">\n\t\t\t\t\t\t\t\t<label for=\"\" class=\"crm-entity-stream-content-new-zoom-field-label\">${Loc.getMessage('CRM_ZOOM_NEW_CONFERENCE_DURATION_CAPTION')}</label>\n\t\t\t\t\t\t\t\t<div class=\"crm-entity-stream-content-new-zoom-field-control\">\n\t\t\t\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-sm crm-entity-stream-content-new-zoom-field-xs\">\n\t\t\t\t\t\t\t\t\t\t${this.getDurationInputField()}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-sm ui-ctl-after-icon ui-ctl-dropdown crm-entity-stream-content-new-zoom-field-sm\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"ui-ctl-after ui-ctl-icon-angle\"></div>\n\t\t\t\t\t\t\t\t\t\t${this.getDurationTypeInputField()}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<br>\n\t\t\t\t\t\t${this.renderPlanner()}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\trenderPlanner(): HTMLElement\n\t{\n\t\treturn this.cache.remember('plannerContainer', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"crm-entity-stream-content-zoom-planner-container\"></div>\n\t\t\t`;\n\t\t});\n\t}\n\n\trenderButtons(): HTMLElement\n\t{\n\t\treturn this.cache.remember('buttonsContainer', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"crm-entity-stream-content-zoom-btn-container\">\n\t\t\t\t\t${this.renderSaveButton()}\n\t\t\t\t\t${this.renderCancelButton()}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\trenderSaveButton(): HTMLElement\n\t{\n\t\treturn this.cache.remember('saveButton', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<button onclick=\"${this.save.bind(this)}\" class=\"ui-btn ui-btn-xs ui-btn-primary\">\n\t\t\t\t\t${Loc.getMessage('UI_BUTTONS_CREATE_BTN_TEXT')}\n\t\t\t\t</button>\n\t\t\t`;\n\t\t});\n\t}\n\n\trefreshStartTimeView()\n\t{\n\t\tconst currentDateTime = new Date();\n\t\tconst minutes = currentDateTime.getMinutes();\n\t\tconst divisionRemainder = minutes % 5;\n\t\tconst gap = 5;\n\n\t\tif (divisionRemainder > 0)\n\t\t{\n\t\t\t// We add 5 minutes gap to always show future time in the input.\n\t\t\t// Example: current time is 14:51. Then 51 - 1 + 5 => 14:55\n\t\t\tcurrentDateTime.setMinutes(minutes - divisionRemainder + gap);\n\t\t}\n\n\t\tthis.getDateInputField().value = BX.formatDate(currentDateTime, BX.message('FORMAT_DATE'));\n\t\tthis.getTimeInputField().innerHTML = this.formatTime(currentDateTime);\n\t}\n\n\trenderCancelButton(): Element\n\t{\n\t\treturn this.cache.remember('cancelButton', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<span onclick=\"${this.cancel.bind(this)}\" class=\"ui-btn ui-btn-xs ui-btn-light-border\">\n\t\t\t\t\t${Loc.getMessage('UI_TIMELINE_EDITOR_COMMENT_CANCEL')}\n\t\t\t\t</span>\n\t\t\t`;\n\t\t});\n\t}\n\n\trender(): Element\n\t{\n\t\tthis.refreshStartTimeView();\n\t\tthis.initPlanner();\n\t\tthis.layout.container = Tag.render`\n\t\t\t<div class=\"ui-timeline-zoom-editor\">\n\t\t\t\t${this.renderButtons()}\n\t\t\t</div>`;\n\n\t\treturn this.getContainer();\n\t}\n\n\tinitPlanner(): Element\n\t{\n\t\tthis.planner = new Planner({\n\t\t\twrap: this.renderPlanner(),\n\t\t\tshowEntryName: false,\n\t\t\tshowEntiesHeader: false,\n\t\t\tentriesListWidth: 70,\n\t\t});\n\n\t\tthis.planner.show();\n\t\tthis.loadPlannerData({\n\t\t\tcodes: [\"U\" + this.userId],\n\t\t\tfrom: Util.formatDate(this.getStartDateTime().getTime() - Util.getDayLength() * 3),\n\t\t\tto: Util.formatDate(this.getStartDateTime().getTime() + Util.getDayLength() * 10),\n\t\t});\n\t\tthis.planner.updateSelector(this.getStartDateTime(), this.getEndDateTime(), false);\n\t\tthis.planner.subscribe('onDateChange', this.handlePlannerSelectorChanges.bind(this));\n\t}\n\n\thandlePlannerSelectorChanges(event)\n\t{\n\t\tif (event instanceof BaseEvent)\n\t\t{\n\t\t\tlet data = event.getData();\n\n\t\t\tconst startDateTime = data.dateFrom;\n\t\t\tconst duration = (data.dateTo - data.dateFrom) / 1000 / 60; //duration in minutes\n\t\t\tconst durationType = this.getDurationTypeInputField().value;\n\n\t\t\tthis.getDateInputField().value = BX.formatDate(startDateTime, BX.message('FORMAT_DATE'));\n\t\t\tthis.getTimeInputField().innerHTML = this.formatTime(startDateTime);\n\n\t\t\tif (durationType === 'h' && duration % 60 === 0)\n\t\t\t{\n\t\t\t\tthis.getDurationInputField().value = duration / 60;\n\t\t\t\tthis.getDurationTypeInputField().value = 'h';\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.getDurationInputField().value = duration;\n\t\t\t\tthis.getDurationTypeInputField().value = 'm';\n\t\t\t}\n\t\t}\n\t}\n\n\tloadPlannerData(params = {})\n\t{\n\t\tthis.planner.showLoader();\n\n\t\tBX.ajax.runAction('calendar.api.calendarajax.updatePlanner', {\n\t\t\tdata: {\n\t\t\t\tcodes: params.codes || [],\n\t\t\t\tdateFrom: params.from || '',\n\t\t\t\tdateTo: params.to || '',\n\t\t\t}\n\t\t})\n\t\t\t.then((response) => {\n\t\t\t\tthis.planner.hideLoader();\n\n\t\t\t\tthis.planner.update(\n\t\t\t\t\tresponse.data.entries,\n\t\t\t\t\tresponse.data.accessibility\n\t\t\t\t);\n\t\t\t},(response) => { console.error(response.errors) }\n\t\t);\n\t}\n\n\tonFocus()\n\t{\n\t\tconst container = this.getContainer();\n\t\tif (container)\n\t\t{\n\t\t\tDom.addClass(container, \"focus\");\n\t\t}\n\t}\n\n\tsave()\n\t{\n\t\tthis.cleanError();\n\t\tDom.addClass(this.renderSaveButton(), \"ui-btn-wait\");\n\n\t\tconst entityInfo = this.manager.getOwnerInfo()\n\t\tconst entityId = entityInfo['ENTITY_ID'];\n\t\tconst entityType = entityInfo['ENTITY_TYPE_NAME'];\n\n\t\tconst dateStart = this.getDateInputField().value;\n\t\tconst timeStart = this.getTimeInputField().textContent;\n\t\tconst timestampStart = this.getStartDateTime().getTime();\n\n\t\tconst dateTimeStart = dateStart + \" \" + timeStart;\n\n\t\tconst conferenceTitle = this.getTitleInputField().value;\n\t\tconst duration = +this.getDurationInputField().value;\n\t\tconst durationType = this.getDurationTypeInputField().value;\n\n\t\tif (!Type.isString(conferenceTitle) || conferenceTitle === '')\n\t\t{\n\t\t\tthis.errorMessages.push(`${Loc.getMessage('CRM_ZOOM_ERROR_EMPTY_TITLE')}`);\n\t\t\tthis.showError();\n\t\t}\n\n\t\tif (!Type.isInteger(timestampStart) || timestampStart < Date.now())\n\t\t{\n\t\t\tthis.errorMessages.push(`${Loc.getMessage('CRM_ZOOM_ERROR_INCORRECT_DATETIME')}`);\n\t\t\tthis.showError();\n\t\t}\n\n\t\tif (!Type.isInteger(duration) || duration <= 0 || !['h','m'].includes(durationType))\n\t\t{\n\t\t\tthis.errorMessages.push(`${Loc.getMessage('CRM_ZOOM_ERROR_INCORRECT_DURATION')}`);\n\t\t\tthis.showError();\n\t\t}\n\n\t\tif (!this.error)\n\t\t{\n\t\t\tBX.ajax.runAction('crm.api.zoomUser.createConference', {\n\t\t\t\tdata: {\n\t\t\t\t\tconferenceParams: {\n\t\t\t\t\t\tconferenceTitle: conferenceTitle,\n\t\t\t\t\t\tdateTimeStart: dateTimeStart,\n\t\t\t\t\t\ttimestampStart: timestampStart,\n\t\t\t\t\t\tduration: duration,\n\t\t\t\t\t\tdurationType: durationType,\n\t\t\t\t\t},\n\t\t\t\t\tentityId: entityId,\n\t\t\t\t\tentityType: entityType,\n\t\t\t\t},\n\t\t\t\tanalyticsLabel: {}\n\t\t\t}).then(function (response) {\n\t\t\t\tDom.removeClass(this.renderSaveButton(), 'ui-btn-wait');\n\t\t\t\tthis.cancel();\n\t\t\t}.bind(this), function (response) {\n\t\t\t\tDom.removeClass(this.renderSaveButton(), 'ui-btn-wait');\n\t\t\t\tthis.errorMessages.push(`${Loc.getMessage('CRM_ZOOM_CREATE_MEETING_SERVER_RETURNS_ERROR')}`);\n\t\t\t\tthis.errorMessages.push(response.errors[0].message);\n\t\t\t\tthis.showError();\n\t\t\t\tconsole.error(response.errors);\n\t\t\t}.bind(this));\n\t\t}\n\t}\n\n\tcancel()\n\t{\n\t\tthis.refreshTitle();\n\t\tthis.refreshStartTimeView();\n\t\tthis.refreshDuration();\n\t\tthis.planner.updateSelector(this.getStartDateTime(), this.getEndDateTime(), false);\n\n\t\tthis.setVisible(false);\n\t\tthis.manager._commentEditor.setVisible(true);\n\t\tthis.manager._menuBar.setActiveItemById(\"comment\");\n\t}\n\n\tsetVisible(show: boolean): void\n\t{\n\t\tlet container = this.getContainer();\n\t\tif (!show)\n\t\t{\n\t\t\tif (container)\n\t\t\t{\n\t\t\t\tBX.hide(container);\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (!container)\n\t\t\t{\n\t\t\t\tcontainer = this.renderInside();\n\t\t\t}\n\t\t\tif (container)\n\t\t\t{\n\t\t\t\tBX.show(container);\n\t\t\t}\n\t\t\tthis.onFocus();\n\t\t}\n\t}\n\n\trenderInside(): ?Element\n\t{\n\t\tif (Type.isStringFilled(this.containerId))\n\t\t{\n\t\t\tconst container = document.querySelector(\"#\" + this.containerId);\n\t\t\tthis.render();\n\t\t\tif (Type.isElementNode(container))\n\t\t\t{\n\t\t\t\tlet node = this.layout.container.firstElementChild;\n\t\t\t\twhile (node)\n\t\t\t\t{\n\t\t\t\t\tcontainer.appendChild(node);\n\t\t\t\t\tnode = node.nextSibling;\n\t\t\t\t}\n\t\t\t\tDom.remove(this.layout.container);\n\t\t\t\tDom.addClass(container, \"ui-timeline-zoom-editor\");\n\t\t\t\tthis.layout.container = container;\n\t\t\t}\n\n\t\t}\n\t\tthis.containerId = null;\n\t\treturn this.getContainer();\n\t}\n\n\tshowError()\n\t{\n\t\tlet errorText = '';\n\n\t\tthis.errorMessages.forEach((message) => {\n\t\t\terrorText += message + \"\\n\";\n\t\t})\n\n\t\tif (!this.error && errorText !== '')\n\t\t{\n\t\t\tthis.errorElement = Tag.render`<div class=\"zoom-error-message ui-alert ui-alert-danger ui-alert-icon-danger\">\n\t\t\t\t<span class=\"ui-alert-message\">${errorText}</span>\n\t\t\t</div>`;\n\n\t\t\tDom.append(this.errorElement, this.layout.container.firstElementChild);\n\t\t\tthis.error = true;\n\t\t}\n\t\tDom.removeClass(this.renderSaveButton(), 'ui-btn-wait');\n\t}\n\n\tcleanError()\n\t{\n\t\tif (this.error)\n\t\t{\n\t\t\tif (Type.isDomNode(this.errorElement))\n\t\t\t{\n\t\t\t\tDom.remove(this.errorElement);\n\t\t\t\tthis.error = false;\n\t\t\t\tthis.errorMessages = [];\n\t\t\t}\n\t\t}\n\t}\n\n\trefreshTitle()\n\t{\n\t\tthis.getTitleInputField().value = Loc.getMessage('CRM_ZOOM_NEW_CONFERENCE_TITLE_PLACEHOLDER');\n\t}\n\n\trefreshDuration()\n\t{\n\t\tthis.getDurationInputField().value = 30;\n\t\tthis.getDurationTypeInputField().value = 'm';\n\t}\n}"],"names":["Zoom","params","Cache","MemoryCache","containerId","container","manager","userId","setEventNamespace","Dom","append","getFormContainer","BX","Event","bind","getDateContainer","e","onDateFieldClick","getTimeContainer","onTimeSwitchClick","getTimeInputField","onUpdateDateTime","getDurationInputField","getDurationTypeInputField","TITLE","ts","parseDate","getDateInputField","value","getTime","unFormatTime","textContent","Date","duration","durationType","endDateTime","setTime","getStartDateTime","planner","updateSelector","getEndDateTime","calendar","node","currentTarget","field","bTime","element","clockInstance","CClockSelector","start_time","callback","doNothing","setNode","setCallback","v","fireEvent","closeWnd","Show","date","dateFormat","convertBitrixFormat","message","replace","timeFormat","str1","format","str2","util","trim","time","q","split","length","mt","parseInt","cache","remember","Tag","render","Loc","getMessage","getTitleInputField","renderPlanner","renderSaveButton","renderCancelButton","save","currentDateTime","minutes","getMinutes","divisionRemainder","gap","setMinutes","formatDate","innerHTML","formatTime","cancel","refreshStartTimeView","initPlanner","layout","renderButtons","getContainer","Planner","wrap","showEntryName","showEntiesHeader","entriesListWidth","show","loadPlannerData","codes","from","Util","getDayLength","to","subscribe","handlePlannerSelectorChanges","event","BaseEvent","data","getData","startDateTime","dateFrom","dateTo","showLoader","ajax","runAction","then","response","hideLoader","update","entries","accessibility","console","error","errors","addClass","cleanError","entityInfo","getOwnerInfo","entityId","entityType","dateStart","timeStart","timestampStart","dateTimeStart","conferenceTitle","Type","isString","errorMessages","push","showError","isInteger","now","includes","conferenceParams","analyticsLabel","removeClass","refreshTitle","refreshDuration","setVisible","_commentEditor","_menuBar","setActiveItemById","hide","renderInside","onFocus","isStringFilled","document","querySelector","isElementNode","firstElementChild","appendChild","nextSibling","remove","errorText","forEach","errorElement","isDomNode","url","location","href","userProfileUri","SidePanel","Instance","open","events","allowChangeHistory","onClose","top","UI","InfoHelper","Timeline","Editor"],"mappings":"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"}