{"version":3,"file":"zoom.bundle.js","sources":["../src/zoom.js"],"sourcesContent":["import {Type, Tag, Loc, Dom, Event, Cache} from 'main.core';\nimport {BaseEvent, EventEmitter} from 'main.core.events';\nimport {Timeline} from 'ui.timeline';\nimport {Planner} from \"calendar.planner\";\nimport {Util} from \"calendar.util\";\n\n/**\n * @memberOf BX.UI.Timeline\n * @mixes EventEmitter\n */\nexport class Zoom extends Timeline.Editor\n{\n\tTITLE = 'Zoom';\n\terror = false;\n\terrorMessages = [];\n\tcache = new Cache.MemoryCache();\n\n\tconstructor(params: {\n\t\tid: string,\n\t\tcontainer: HTMLElement,\n\t\tmanager: ?BX.CrmTimelineManager,\n\t\tuserId: string\n\t})\n\t{\n\t\tsuper(params);\n\t\tthis.containerId = params.container;\n\t\tthis.manager = params.manager;\n\t\tthis.userId = +params.userId;\n\t\tthis.setEventNamespace('BX.UI.Timeline.ZoomEditor');\n\t\tDom.append(this.getFormContainer(), BX(this.containerId));\n\t\tEvent.bind(this.getDateContainer(), 'click', (e) => {this.onDateFieldClick(e)});\n\t\tEvent.bind(this.getTimeContainer(), 'click', () => {\n\t\t\tthis.onTimeSwitchClick(this.getTimeInputField())\n\t\t});\n\n\t\tEvent.bind(this.getDateContainer(), 'change', () => {this.onUpdateDateTime()});\n\t\tEvent.bind(this.getTimeContainer(), 'change', () => {this.onUpdateDateTime()});\n\t\tEvent.bind(this.getDurationInputField(), 'change', () => {this.onUpdateDateTime()});\n\t\tEvent.bind(this.getDurationTypeInputField(), 'change', () => {this.onUpdateDateTime()});\n\t}\n\n\tstatic onNotConnectedHandler(userId)\n\t{\n\t\tconst url = document.location.href;\n\t\tvar userProfileUri = '/company/personal/user/' + userId + '/social_services/';\n\t\tBX.SidePanel.Instance.open(userProfileUri, {\n\t\t\tevents: {\n\t\t\t\tallowChangeHistory: false,\n\t\t\t\tonClose: function() {\n\t\t\t\t\ttop.location.href = url;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tstatic onNotAvailableHandler()\n\t{\n\t\tBX.UI.InfoHelper.show('limit_video_conference_zoom_crm');\n\t}\n\n\tgetTitle(): string\n\t{\n\t\treturn this.TITLE;\n\t}\n\n\tgetStartDateTime(): string\n\t{\n\t\tconst ts =  BX.parseDate(this.getDateInputField().value).getTime() + this.unFormatTime(this.getTimeInputField().textContent) * 1000;\n\n\t\treturn new Date(ts);\n\t};\n\n\tgetEndDateTime(): Date\n\t{\n\t\tlet duration = +this.getDurationInputField().value;\n\t\tconst durationType = this.getDurationTypeInputField().value;\n\n\t\tif (durationType === 'h')\n\t\t{\n\t\t\tduration *= 60 * 60 * 1000;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tduration *= 60 * 1000;\n\t\t}\n\n\t\tconst endDateTime = new Date();\n\t\tendDateTime.setTime(this.getStartDateTime().getTime() + duration);\n\n\t\treturn endDateTime;\n\t};\n\n\tonUpdateDateTime(): string\n\t{\n\t\tthis.planner.updateSelector(this.getStartDateTime(), this.getEndDateTime(), false);\n\t}\n\n\tonDateFieldClick(e)\n\t{\n\t\tBX.calendar({ node: e.currentTarget, field: this.getDateInputField(), bTime: false});\n\t\treturn false;\n\t};\n\n\tonTimeSwitchClick(element)\n\t{\n\t\tif (!this.clockInstance)\n\t\t{\n\t\t\tthis.clockInstance = new BX.CClockSelector({\n\t\t\t\tstart_time: this.unFormatTime(element.textContent),\n\t\t\t\tnode: element,\n\t\t\t\tcallback: BX.doNothing\n\t\t\t});\n\t\t}\n\n\t\tthis.clockInstance.setNode(element);\n\t\tthis.clockInstance.setTime(this.unFormatTime(element.textContent));\n\t\tthis.clockInstance.setCallback((v) => {\n\t\t\telement.textContent = v;\n\t\t\tBX.fireEvent(element, 'change');\n\t\t\tthis.clockInstance.closeWnd();\n\t\t});\n\t\tthis.clockInstance.Show();\n\t};\n\n\tformatTime(date)\n\t{\n\t\tconst dateFormat = BX.date.convertBitrixFormat(BX.message('FORMAT_DATE')).replace(/:?\\s*s/, ''),\n\t\t\ttimeFormat = BX.date.convertBitrixFormat(BX.message('FORMAT_DATETIME')).replace(/:?\\s*s/, ''),\n\t\t\tstr1 = BX.date.format(dateFormat, date),\n\t\t\tstr2 = BX.date.format(timeFormat, date);\n\t\treturn BX.util.trim(str2.replace(str1, ''));\n\t}\n\n\tunFormatTime(time)\n\t{\n\t\tlet q = time.split(/[\\s:]+/);\n\t\tif (q.length == 3)\n\t\t{\n\t\t\tconst mt = q[2];\n\t\t\tif (mt == 'pm' && q[0] < 12)\n\t\t\t\tq[0] = parseInt(q[0], 10) + 12;\n\n\t\t\tif (mt == 'am' && q[0] == 12)\n\t\t\t\tq[0] = 0;\n\n\t\t}\n\t\treturn parseInt(q[0], 10) * 3600 + parseInt(q[1], 10) * 60;\n\t};\n\n\tgetDateContainer(): HTMLElement\n\t{\n\t\treturn this.cache.remember('startDateContainer', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"ui-ctl ui-ctl-sm ui-ctl-after-icon ui-ctl-date\">\n\t\t\t\t\t<div class=\"ui-ctl-after ui-ctl-icon-calendar\"></div>\n\t\t\t\t\t${this.getDateInputField()}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetDateInputField(): HTMLElement\n\t{\n\t\treturn this.cache.remember('startDateInputField', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<input type=\"text\" class=\"ui-ctl-element\">\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetTimeContainer(): HTMLElement\n\t{\n\t\treturn this.cache.remember('startTimeContainer', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"ui-ctl ui-ctl-sm ui-ctl-after-icon ui-ctl-dropdown crm-entity-stream-content-new-zoom-field-sm\">\n\t\t\t\t\t<div class=\"ui-ctl-after ui-ctl-icon-angle\"></div>\n\t\t\t\t\t${this.getTimeInputField()}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetTimeInputField(): HTMLElement\n\t{\n\t\treturn this.cache.remember('startTimeInputField', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"ui-ctl-element\">12:00</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetTitleInputField(): HTMLElement\n\t{\n\t\treturn this.cache.remember('titleInputField', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<input type=\"text\" class=\"ui-ctl-element\" value=\"${Loc.getMessage('CRM_ZOOM_NEW_CONFERENCE_TITLE_PLACEHOLDER')}\">\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetDurationInputField(): HTMLElement\n\t{\n\t\treturn this.cache.remember('durationInputField', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<input type=\"text\" class=\"ui-ctl-element\" value=\"30\">\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetDurationTypeInputField(): HTMLElement\n\t{\n\t\treturn this.cache.remember('durationTypeInputField', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<select class=\"ui-ctl-element\">\n\t\t\t\t\t<option value=\"m\">${Loc.getMessage('CRM_ZOOM_NEW_CONFERENCE_DURATION_MINUTES')}</option>\n\t\t\t\t\t<option value=\"h\">${Loc.getMessage('CRM_ZOOM_NEW_CONFERENCE_DURATION_HOURS')}</option>\n\t\t\t\t</select>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetFormContainer(): HTMLElement\n\t{\n\t\treturn this.cache.remember('formContainer', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"crm-entity-stream-content-new-zoom\">\n\t\t\t\t\t<div class=\"crm-entity-stream-content-new-zoom-inner\">\n\t\t\t\t\t\t<div class=\"crm-entity-stream-content-new-zoom-field\">\n\t\t\t\t\t\t\t<div class=\"crm-entity-stream-content-new-zoom-field-inner\">\n\t\t\t\t\t\t\t\t<label for=\"\" class=\"crm-entity-stream-content-new-zoom-field-label\">${Loc.getMessage('CRM_ZOOM_NEW_CONFERENCE_TITLE')}</label>\n\t\t\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-sm ui-ctl-w100 ui-ctl-textbox\">\n\t\t\t\t\t\t\t\t\t${this.getTitleInputField()}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"crm-entity-stream-content-new-zoom-field\">\n\t\t\t\t\t\t\t<div class=\"crm-entity-stream-content-new-zoom-field-block\">\n\t\t\t\t\t\t\t\t<label for=\"\" class=\"crm-entity-stream-content-new-zoom-field-label\">${Loc.getMessage('CRM_ZOOM_NEW_CONFERENCE_DATE_CAPTION')}</label>\n\t\t\t\t\t\t\t\t<div class=\"crm-entity-stream-content-new-zoom-field-control\">\n\t\t\t\t\t\t\t\t\t${this.getDateContainer()}\n\t\t\t\t\t\t\t\t\t${this.getTimeContainer()}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"crm-entity-stream-content-new-zoom-field-block\">\n\t\t\t\t\t\t\t\t<label for=\"\" class=\"crm-entity-stream-content-new-zoom-field-label\">${Loc.getMessage('CRM_ZOOM_NEW_CONFERENCE_DURATION_CAPTION')}</label>\n\t\t\t\t\t\t\t\t<div class=\"crm-entity-stream-content-new-zoom-field-control\">\n\t\t\t\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-sm crm-entity-stream-content-new-zoom-field-xs\">\n\t\t\t\t\t\t\t\t\t\t${this.getDurationInputField()}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-sm ui-ctl-after-icon ui-ctl-dropdown crm-entity-stream-content-new-zoom-field-sm\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"ui-ctl-after ui-ctl-icon-angle\"></div>\n\t\t\t\t\t\t\t\t\t\t${this.getDurationTypeInputField()}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<br>\n\t\t\t\t\t\t${this.renderPlanner()}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\trenderPlanner(): HTMLElement\n\t{\n\t\treturn this.cache.remember('plannerContainer', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"crm-entity-stream-content-zoom-planner-container\"></div>\n\t\t\t`;\n\t\t});\n\t}\n\n\trenderButtons(): HTMLElement\n\t{\n\t\treturn this.cache.remember('buttonsContainer', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"crm-entity-stream-content-zoom-btn-container\">\n\t\t\t\t\t${this.renderSaveButton()}\n\t\t\t\t\t${this.renderCancelButton()}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\trenderSaveButton(): HTMLElement\n\t{\n\t\treturn this.cache.remember('saveButton', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<button onclick=\"${this.save.bind(this)}\" class=\"ui-btn ui-btn-xs ui-btn-primary\">\n\t\t\t\t\t${Loc.getMessage('UI_BUTTONS_CREATE_BTN_TEXT')}\n\t\t\t\t</button>\n\t\t\t`;\n\t\t});\n\t}\n\n\trefreshStartTimeView()\n\t{\n\t\tconst currentDateTime = new Date();\n\t\tconst minutes = currentDateTime.getMinutes();\n\t\tconst divisionRemainder = minutes % 5;\n\t\tconst gap = 5;\n\n\t\tif (divisionRemainder > 0)\n\t\t{\n\t\t\t// We add 5 minutes gap to always show future time in the input.\n\t\t\t// Example: current time is 14:51. Then 51 - 1 + 5 => 14:55\n\t\t\tcurrentDateTime.setMinutes(minutes - divisionRemainder + gap);\n\t\t}\n\n\t\tthis.getDateInputField().value = BX.formatDate(currentDateTime, BX.message('FORMAT_DATE'));\n\t\tthis.getTimeInputField().innerHTML = this.formatTime(currentDateTime);\n\t}\n\n\trenderCancelButton(): Element\n\t{\n\t\treturn this.cache.remember('cancelButton', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<span onclick=\"${this.cancel.bind(this)}\" class=\"ui-btn ui-btn-xs ui-btn-light-border\">\n\t\t\t\t\t${Loc.getMessage('UI_TIMELINE_EDITOR_COMMENT_CANCEL')}\n\t\t\t\t</span>\n\t\t\t`;\n\t\t});\n\t}\n\n\trender(): Element\n\t{\n\t\tthis.refreshStartTimeView();\n\t\tthis.initPlanner();\n\t\tthis.layout.container = Tag.render`\n\t\t\t<div class=\"ui-timeline-zoom-editor\">\n\t\t\t\t${this.renderButtons()}\n\t\t\t</div>`;\n\n\t\treturn this.getContainer();\n\t}\n\n\tinitPlanner(): Element\n\t{\n\t\tthis.planner = new Planner({\n\t\t\twrap: this.renderPlanner(),\n\t\t\tshowEntryName: false,\n\t\t\tshowEntiesHeader: false,\n\t\t\tentriesListWidth: 70,\n\t\t});\n\n\t\tthis.planner.show();\n\t\tthis.loadPlannerData({\n\t\t\tcodes: [\"U\" + this.userId],\n\t\t\tfrom: Util.formatDate(this.getStartDateTime().getTime() - Util.getDayLength() * 3),\n\t\t\tto: Util.formatDate(this.getStartDateTime().getTime() + Util.getDayLength() * 10),\n\t\t});\n\t\tthis.planner.updateSelector(this.getStartDateTime(), this.getEndDateTime(), false);\n\t\tthis.planner.subscribe('onDateChange', this.handlePlannerSelectorChanges.bind(this));\n\t}\n\n\thandlePlannerSelectorChanges(event)\n\t{\n\t\tif (event instanceof BaseEvent)\n\t\t{\n\t\t\tlet data = event.getData();\n\n\t\t\tconst startDateTime = data.dateFrom;\n\t\t\tconst duration = (data.dateTo - data.dateFrom) / 1000 / 60; //duration in minutes\n\t\t\tconst durationType = this.getDurationTypeInputField().value;\n\n\t\t\tthis.getDateInputField().value = BX.formatDate(startDateTime, BX.message('FORMAT_DATE'));\n\t\t\tthis.getTimeInputField().innerHTML = this.formatTime(startDateTime);\n\n\t\t\tif (durationType === 'h' && duration % 60 === 0)\n\t\t\t{\n\t\t\t\tthis.getDurationInputField().value = duration / 60;\n\t\t\t\tthis.getDurationTypeInputField().value = 'h';\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.getDurationInputField().value = duration;\n\t\t\t\tthis.getDurationTypeInputField().value = 'm';\n\t\t\t}\n\t\t}\n\t}\n\n\tloadPlannerData(params = {})\n\t{\n\t\tthis.planner.showLoader();\n\n\t\tBX.ajax.runAction('calendar.api.calendarajax.updatePlanner', {\n\t\t\tdata: {\n\t\t\t\tcodes: params.codes || [],\n\t\t\t\tdateFrom: params.from || '',\n\t\t\t\tdateTo: params.to || '',\n\t\t\t}\n\t\t})\n\t\t\t.then((response) => {\n\t\t\t\tthis.planner.hideLoader();\n\n\t\t\t\tthis.planner.update(\n\t\t\t\t\tresponse.data.entries,\n\t\t\t\t\tresponse.data.accessibility\n\t\t\t\t);\n\t\t\t},(response) => { console.error(response.errors) }\n\t\t);\n\t}\n\n\tonFocus()\n\t{\n\t\tconst container = this.getContainer();\n\t\tif (container)\n\t\t{\n\t\t\tDom.addClass(container, \"focus\");\n\t\t}\n\t}\n\n\tsave()\n\t{\n\t\tthis.cleanError();\n\t\tDom.addClass(this.renderSaveButton(), \"ui-btn-wait\");\n\n\t\tconst entityInfo = this.manager.getOwnerInfo()\n\t\tconst entityId = entityInfo['ENTITY_ID'];\n\t\tconst entityType = entityInfo['ENTITY_TYPE_NAME'];\n\n\t\tconst dateStart = this.getDateInputField().value;\n\t\tconst timeStart = this.getTimeInputField().textContent;\n\t\tconst timestampStart = this.getStartDateTime().getTime();\n\n\t\tconst dateTimeStart = dateStart + \" \" + timeStart;\n\n\t\tconst conferenceTitle = this.getTitleInputField().value;\n\t\tconst duration = +this.getDurationInputField().value;\n\t\tconst durationType = this.getDurationTypeInputField().value;\n\n\t\tif (!Type.isString(conferenceTitle) || conferenceTitle === '')\n\t\t{\n\t\t\tthis.errorMessages.push(`${Loc.getMessage('CRM_ZOOM_ERROR_EMPTY_TITLE')}`);\n\t\t\tthis.showError();\n\t\t}\n\n\t\tif (!Type.isInteger(timestampStart) || timestampStart < Date.now())\n\t\t{\n\t\t\tthis.errorMessages.push(`${Loc.getMessage('CRM_ZOOM_ERROR_INCORRECT_DATETIME')}`);\n\t\t\tthis.showError();\n\t\t}\n\n\t\tif (!Type.isInteger(duration) || duration <= 0 || !['h','m'].includes(durationType))\n\t\t{\n\t\t\tthis.errorMessages.push(`${Loc.getMessage('CRM_ZOOM_ERROR_INCORRECT_DURATION')}`);\n\t\t\tthis.showError();\n\t\t}\n\n\t\tif (!this.error)\n\t\t{\n\t\t\tBX.ajax.runAction('crm.api.zoomUser.createConference', {\n\t\t\t\tdata: {\n\t\t\t\t\tconferenceParams: {\n\t\t\t\t\t\tconferenceTitle: conferenceTitle,\n\t\t\t\t\t\tdateTimeStart: dateTimeStart,\n\t\t\t\t\t\ttimestampStart: timestampStart,\n\t\t\t\t\t\tduration: duration,\n\t\t\t\t\t\tdurationType: durationType,\n\t\t\t\t\t},\n\t\t\t\t\tentityId: entityId,\n\t\t\t\t\tentityType: entityType,\n\t\t\t\t},\n\t\t\t\tanalyticsLabel: {}\n\t\t\t}).then(function (response) {\n\t\t\t\tDom.removeClass(this.renderSaveButton(), 'ui-btn-wait');\n\t\t\t\tthis.cancel();\n\t\t\t}.bind(this), function (response) {\n\t\t\t\tDom.removeClass(this.renderSaveButton(), 'ui-btn-wait');\n\t\t\t\tthis.errorMessages.push(`${Loc.getMessage('CRM_ZOOM_CREATE_MEETING_SERVER_RETURNS_ERROR')}`);\n\t\t\t\tthis.errorMessages.push(response.errors[0].message);\n\t\t\t\tthis.showError();\n\t\t\t\tconsole.error(response.errors);\n\t\t\t}.bind(this));\n\t\t}\n\t}\n\n\tcancel()\n\t{\n\t\tthis.refreshTitle();\n\t\tthis.refreshStartTimeView();\n\t\tthis.refreshDuration();\n\t\tthis.planner.updateSelector(this.getStartDateTime(), this.getEndDateTime(), false);\n\n\t\tthis.setVisible(false);\n\t\tthis.manager._commentEditor.setVisible(true);\n\t\tthis.manager._menuBar.setActiveItemById(\"comment\");\n\t}\n\n\tsetVisible(show: boolean): void\n\t{\n\t\tlet container = this.getContainer();\n\t\tif (!show)\n\t\t{\n\t\t\tif (container)\n\t\t\t{\n\t\t\t\tBX.hide(container);\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (!container)\n\t\t\t{\n\t\t\t\tcontainer = this.renderInside();\n\t\t\t}\n\t\t\tif (container)\n\t\t\t{\n\t\t\t\tBX.show(container);\n\t\t\t}\n\t\t\tthis.onFocus();\n\t\t}\n\t}\n\n\trenderInside(): ?Element\n\t{\n\t\tif (Type.isStringFilled(this.containerId))\n\t\t{\n\t\t\tconst container = document.querySelector(\"#\" + this.containerId);\n\t\t\tthis.render();\n\t\t\tif (Type.isElementNode(container))\n\t\t\t{\n\t\t\t\tlet node = this.layout.container.firstElementChild;\n\t\t\t\twhile (node)\n\t\t\t\t{\n\t\t\t\t\tcontainer.appendChild(node);\n\t\t\t\t\tnode = node.nextSibling;\n\t\t\t\t}\n\t\t\t\tDom.remove(this.layout.container);\n\t\t\t\tDom.addClass(container, \"ui-timeline-zoom-editor\");\n\t\t\t\tthis.layout.container = container;\n\t\t\t}\n\n\t\t}\n\t\tthis.containerId = null;\n\t\treturn this.getContainer();\n\t}\n\n\tshowError()\n\t{\n\t\tlet errorText = '';\n\n\t\tthis.errorMessages.forEach((message) => {\n\t\t\terrorText += message + \"\\n\";\n\t\t})\n\n\t\tif (!this.error && errorText !== '')\n\t\t{\n\t\t\tthis.errorElement = Tag.render`<div class=\"zoom-error-message ui-alert ui-alert-danger ui-alert-icon-danger\">\n\t\t\t\t<span class=\"ui-alert-message\">${errorText}</span>\n\t\t\t</div>`;\n\n\t\t\tDom.append(this.errorElement, this.layout.container.firstElementChild);\n\t\t\tthis.error = true;\n\t\t}\n\t\tDom.removeClass(this.renderSaveButton(), 'ui-btn-wait');\n\t}\n\n\tcleanError()\n\t{\n\t\tif (this.error)\n\t\t{\n\t\t\tif (Type.isDomNode(this.errorElement))\n\t\t\t{\n\t\t\t\tDom.remove(this.errorElement);\n\t\t\t\tthis.error = false;\n\t\t\t\tthis.errorMessages = [];\n\t\t\t}\n\t\t}\n\t}\n\n\trefreshTitle()\n\t{\n\t\tthis.getTitleInputField().value = Loc.getMessage('CRM_ZOOM_NEW_CONFERENCE_TITLE_PLACEHOLDER');\n\t}\n\n\trefreshDuration()\n\t{\n\t\tthis.getDurationInputField().value = 30;\n\t\tthis.getDurationTypeInputField().value = 'm';\n\t}\n}"],"names":["Zoom","params","Cache","MemoryCache","containerId","container","manager","userId","setEventNamespace","Dom","append","getFormContainer","BX","Event","bind","getDateContainer","e","onDateFieldClick","getTimeContainer","onTimeSwitchClick","getTimeInputField","onUpdateDateTime","getDurationInputField","getDurationTypeInputField","TITLE","ts","parseDate","getDateInputField","value","getTime","unFormatTime","textContent","Date","duration","durationType","endDateTime","setTime","getStartDateTime","planner","updateSelector","getEndDateTime","calendar","node","currentTarget","field","bTime","element","clockInstance","CClockSelector","start_time","callback","doNothing","setNode","setCallback","v","fireEvent","closeWnd","Show","date","dateFormat","convertBitrixFormat","message","replace","timeFormat","str1","format","str2","util","trim","time","q","split","length","mt","parseInt","cache","remember","Tag","render","Loc","getMessage","getTitleInputField","renderPlanner","renderSaveButton","renderCancelButton","save","currentDateTime","minutes","getMinutes","divisionRemainder","gap","setMinutes","formatDate","innerHTML","formatTime","cancel","refreshStartTimeView","initPlanner","layout","renderButtons","getContainer","Planner","wrap","showEntryName","showEntiesHeader","entriesListWidth","show","loadPlannerData","codes","from","Util","getDayLength","to","subscribe","handlePlannerSelectorChanges","event","BaseEvent","data","getData","startDateTime","dateFrom","dateTo","showLoader","ajax","runAction","then","response","hideLoader","update","entries","accessibility","console","error","errors","addClass","cleanError","entityInfo","getOwnerInfo","entityId","entityType","dateStart","timeStart","timestampStart","dateTimeStart","conferenceTitle","Type","isString","errorMessages","push","showError","isInteger","now","includes","conferenceParams","analyticsLabel","removeClass","refreshTitle","refreshDuration","setVisible","_commentEditor","_menuBar","setActiveItemById","hide","renderInside","onFocus","isStringFilled","document","querySelector","isElementNode","firstElementChild","appendChild","nextSibling","remove","errorText","forEach","errorElement","isDomNode","url","location","href","userProfileUri","SidePanel","Instance","open","events","allowChangeHistory","onClose","top","UI","InfoHelper","Timeline","Editor"],"mappings":"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"}