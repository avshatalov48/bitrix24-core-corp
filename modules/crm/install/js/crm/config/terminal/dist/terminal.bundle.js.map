{"version":3,"file":"terminal.bundle.js","sources":["../src/components/settings-section.js","../src/components/sms.js","../src/components/sms-provider-select.js","../src/components/sms-settings-section.js","../src/components/terminal-settings.js","../src/app.js"],"sourcesContent":["//@flow\n\nimport \"ui.switcher\";\nexport const SettingsSection = {\n\n\tdata() {\n\t\treturn {\n\t\t\tisEnabled: this.active,\n\t\t\tswitcher: null,\n\t\t};\n\t},\n\n\tmounted()\n\t{\n\t\t(new BX.UI.Switcher({\n\t\t\tnode: this.$refs.switcher,\n\t\t\tchecked: this.isEnabled,\n\t\t\thandlers: {\n\t\t\t\ttoggled: this.onSwitcherToggle.bind(this),\n\t\t\t},\n\t\t}));\n\n\t\tBX.UI.Hint.init(this.$refs.title);\n\t},\n\n\tmethods: {\n\t\tonSwitcherToggle()\n\t\t{\n\t\t\tthis.isEnabled = !this.isEnabled;\n\t\t\tthis.$emit('toggle', this.isEnabled);\n\t\t},\n\t},\n\n\tprops: {\n\t\ttitle: String,\n\t\tswitchable: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false\n\t\t},\n\t\tactive: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false\n\t\t},\n\t\thint: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t}\n\t},\n\n\t// language=Vue\n\ttemplate: `\n\t\t<div>\n\t\t\t<div class=\"ui-slider-heading-4 settings-section-header\">\n\t\t\t\t<div v-if=\"switchable\">\n\t\t\t\t\t<span ref=\"switcher\" class=\"ui-switcher\"></span>\n\t\t\t\t</div>\n\t\t\t\t<div ref=\"title\">\n\t\t\t\t\t{{ title }}\n\t\t\t\t\t<span\n\t\t\t\t\t\tv-if=\"hint !== ''\"\n\t\t\t\t\t\tclass=\"ui-hint\"\n\t\t\t\t\t\tdata-hint-html\n\t\t\t\t\t\tdata-hint-interactivity\n\t\t\t\t\t\t:data-hint=\"hint\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<span class=\"ui-hint-icon\"></span>\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t</div>\n\t\t\t<div v-if=\"isEnabled\">\n\t\t\t\t<slot></slot>\n\t\t\t</div>\n\t\t</div>\n\t`\n};\n","//@flow\n\nexport const Sms = {\n\t// language=Vue\n\ttemplate: `\n\t\t<div>\n\t\t\t<div class=\"sms-container\">\n\t\t\t\t<slot></slot>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};","//@flow\n\nimport {mapGetters, mapMutations} from \"ui.vue3.vuex\";\n\nexport const SmsProviderSelect = {\n\n\tdata() {\n\t\treturn {\n\t\t\tisListShowed: false,\n\t\t};\n\t},\n\n\tmounted() {\n\t\tdocument.addEventListener('click', () => {\n\t\t\tthis.isListShowed = false;\n\t\t});\n\t},\n\n\tmethods: {\n\t\t...mapGetters([\n\t\t\t'getServiceLink',\n\t\t\t'getActiveSmsServices',\n\t\t]),\n\n\t\t...mapMutations([\n\t\t\t'selectSMSService',\n\t\t]),\n\n\t\tswitchService(serviceId)\n\t\t{\n\t\t\tthis.isListShowed = false;\n\t\t\tthis.selectSMSService(serviceId);\n\t\t},\n\n\t\tswitchVisibility() {\n\t\t\tthis.isListShowed = !this.isListShowed;\n\t\t},\n\n\t\topenSmsServicesSlider() {\n\t\t\tconst options = {\n\t\t\t\tcacheable: false,\n\t\t\t\tallowChangeHistory: false,\n\t\t\t\trequestMethod: \"get\",\n\t\t\t\twidth: 700,\n\t\t\t\tevents: {\n\t\t\t\t\tonClose: () => {\n\t\t\t\t\t\tthis.$emit('onConnectSliderClosed');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tBX.SidePanel.Instance.open(this.getServiceLink(), options);\n\t\t},\n\t},\n\n\tcomputed: {\n\t\t...mapGetters([\n\t\t\t'getSelectedService',\n\t\t]),\n\n\t\tgetListClassname() {\n\t\t\tif (!this.isListShowed)\n\t\t\t{\n\t\t\t\treturn 'sms-provider-selector-hided-list';\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\treturn 'sms-provider-selector-list';\n\t\t\t}\n\t\t},\n\t},\n\n\t// language=Vue\n\ttemplate: `\n\t\t<div style=\"display: inline-block; vertical-align: top\">\n\t\t\t<span class=\"sms-provider-selector\" @click.stop=\"switchVisibility\">{{getSelectedService['NAME']}}</span>\n\t\t\t<ul :class=\"getListClassname\" @click.stop>\n\t\t\t\t<li v-for=\"provider in getActiveSmsServices()\" @click=\"switchService(provider['ID'])\" v-show=\"provider['ID'] !== getSelectedService['ID']\">{{ provider['NAME'] }}</li>\n\t\t\t\t<li @click=\"openSmsServicesSlider\">{{ $Bitrix.Loc.getMessage('CRM_CFG_TERMINAL_SETTINGS_SECTION_SMS_SERVICE_PROVIDER_CONNECT_MORE') }}</li>\n\t\t\t</ul>\n\t\t</div>\n\t`,\n};","//@flow\n\nimport {SettingsSection} from \"./settings-section\";\nimport {NotificationLink} from \"../types\";\nimport {Sms} from \"./sms\";\nimport {ajax, Text} from \"main.core\";\nimport {Popup} from \"main.popup\";\nimport {SmsProviderSelect} from \"./sms-provider-select\";\nimport {mapGetters, mapMutations} from \"ui.vue3.vuex\";\n\nexport const SmsSettingsSection = {\n\n\tdata() {\n\t\treturn {\n\t\t\tpopup: null,\n\t\t};\n\t},\n\n\tcomponents: {\n\t\t'SettingsSection': SettingsSection,\n\t\t'Sms': Sms,\n\t\t'SmsProviderSelect': SmsProviderSelect,\n\t\t'Notification': Notification,\n\t},\n\n\tcomputed: {\n\t\t...mapGetters([\n\t\t\t'isSmsSendingActive',\n\t\t\t'isAnyServiceEnabled',\n\t\t\t'isNotificationsEnabled',\n\t\t]),\n\n\t\tgetSectionTitle(): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage('CRM_CFG_TERMINAL_SETTINGS_SECTION_SMS_TITLE');\n\t\t},\n\n\t\tgetSectionHint(): string\n\t\t{\n\t\t\tconst replacements = {\n\t\t\t\t'#LINK_START#': `<a onclick=\"top.BX.Helper.show('redirect=detail&code=17399056')\" style=\"cursor: pointer\">`,\n\t\t\t\t'#LINK_END#': `</a>`,\n\t\t\t};\n\t\t\treturn this.$Bitrix.Loc.getMessage('CRM_CFG_TERMINAL_SETTINGS_SECTION_SMS_HINT_TEXT', replacements);\n\t\t},\n\t\tgetNotificationConnectHint(): string\n\t\t{\n\t\t\tconst replacements = {\n\t\t\t\t'#LINK_START#': `<span onclick=\"top.BX.Helper.show('redirect=detail&code=17399068')\" class=\"sms-provider-selector\">`,\n\t\t\t\t'#LINK_END#': `</span>`,\n\t\t\t};\n\t\t\treturn this.$Bitrix.Loc.getMessage('CRM_CFG_TERMINAL_SETTINGS_SECTION_SMS_SERVICE_PROVIDER_UNC_CONNECTED', replacements);\n\t\t},\n\t},\n\n\tmethods: {\n\t\t...mapMutations([\n\t\t\t'setSmsSendingActive',\n\t\t\t'updateServicesList',\n\t\t\t'updateNotificationsEnabled',\n\t\t]),\n\t\t...mapGetters([\n\t\t\t'getPaymentSlipLinkScheme',\n\t\t\t'getNotificationsLink',\n\t\t\t'getServiceLink',\n\t\t]),\n\n\t\tonServiceConnectSliderClosed()\n\t\t{\n\t\t\tajax\n\t\t\t\t.runComponentAction('bitrix:crm.config.terminal.settings', 'updateServicesList')\n\t\t\t\t.then((response) => {\n\t\t\t\t\tif (response.status === 'success')\n\t\t\t\t\t{\n\t\t\t\t\t\tconst data = response.data;\n\t\t\t\t\t\tif (data?.isUCNEnabled)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.updateNotificationsEnabled(data.isUCNEnabled);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.updateServicesList(data.activeSmsServices);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t},\n\n\t\tonSectionToggled()\n\t\t{\n\t\t\tthis.setSmsSendingActive(!this.isSmsSendingActive);\n\t\t},\n\n\t\tgetSmsMessage(): string\n\t\t{\n\t\t\tconst link = `<span class=\"sms-link-path\">${this.getPaymentSlipLinkScheme()}</span><span class=\"sms-link-plug\">xxxxx</span>` + ` `;\n\t\t\tconst text = this.$Bitrix.Loc.getMessage('CRM_CFG_TERMINAL_SETTINGS_SECTION_SMS_MESSAGE_TEMPLATE');\n\n\t\t\treturn Text.encode(text).replace(/#PAYMENT_SLIP_LINK#/g, link);\n\t\t},\n\n\t\tgetSmsProviderMessage(): string\n\t\t{\n\t\t\tconst providerSelect = `<span>Dummy SMS</span>`;\n\t\t\tconst text = this.$Bitrix.Loc.getMessage('CRM_CFG_TERMINAL_SETTINGS_SECTION_SMS_SERVICE_SELECT');\n\n\t\t\treturn Text.encode(text).replace(/#SMS_SERVICE#/g, providerSelect);\n\t\t},\n\n\t\tonSmsMouseenter(event)\n\t\t{\n\t\t\tconst target = event.target;\n\t\t\tconst message = this.$Bitrix.Loc.getMessage('CRM_CFG_TERMINAL_SETTINGS_SECTION_SMS_MESSAGE_HINT');\n\n\t\t\tif(this.popup)\n\t\t\t{\n\t\t\t\tthis.popup.destroy();\n\t\t\t\tthis.popup = null;\n\t\t\t}\n\n\t\t\tthis.popup = new Popup(null, target, {\n\t\t\t\tevents: {\n\t\t\t\t\tonPopupClose: () => {\n\t\t\t\t\t\tthis.popup.destroy();\n\t\t\t\t\t\tthis.popup = null;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tdarkMode: true,\n\t\t\t\tcontent: message,\n\t\t\t\toffsetLeft: target.offsetWidth,\n\t\t\t});\n\n\t\t\tthis.popup.show();\n\t\t},\n\n\t\tonSmsMouseleave()\n\t\t{\n\t\t\tthis.popup.destroy();\n\t\t},\n\n\t\tonNotificationsConnectLinkClick()\n\t\t{\n\t\t\t/** @var {NotificationLink} */\n\t\t\tconst notificationLink = this.getNotificationsLink();\n\t\t\tif (notificationLink === null)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (notificationLink.type === 'connect_link')\n\t\t\t{\n\t\t\t\tconst options = {\n\t\t\t\t\tcacheable: false,\n\t\t\t\t\tallowChangeHistory: false,\n\t\t\t\t\trequestMethod: \"get\",\n\t\t\t\t\twidth: 700,\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tonClose: () => {\n\t\t\t\t\t\t\tthis.onServiceConnectSliderClosed();\n\t\t\t\t\t\t},\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tBX.SidePanel.Instance.open(notificationLink.value, options);\n\t\t\t}\n\t\t\telse if (notificationLink.type === 'ui_helper')\n\t\t\t{\n\t\t\t\ttop.BX.UI.InfoHelper.show(notificationLink.value);\n\t\t\t}\n\t\t},\n\n\t\tonProviderSmsNotificationClick()\n\t\t{\n\t\t\tconst options = {\n\t\t\t\tcacheable: false,\n\t\t\t\tallowChangeHistory: false,\n\t\t\t\trequestMethod: \"get\",\n\t\t\t\twidth: 700,\n\t\t\t\tevents: {\n\t\t\t\t\tonClose: () => {\n\t\t\t\t\t\tthis.onServiceConnectSliderClosed();\n\t\t\t\t\t},\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tBX.SidePanel.Instance.open(this.getServiceLink(), options);\n\t\t},\n\t},\n\n\t// language=Vue\n\ttemplate: `\n\t\t<SettingsSection \n\t\t\t:title=\"getSectionTitle\"\n\t\t\t:switchable=\"true\"\n\t\t\tv-on:toggle=\"onSectionToggled\"\n\t\t\t:active=\"isSmsSendingActive\"\n\t\t\t:hint=\"getSectionHint\"\n\t\t>\n\t\t\t<div v-if=\"isAnyServiceEnabled\">\n\t\t\t\t<div class=\"sms-message-info\">\n\t\t\t\t\t<span class=\"sms-message-info-text\">{{ $Bitrix.Loc.getMessage('CRM_CFG_TERMINAL_SETTINGS_SECTION_SMS_INFO') }}</span>\n\t\t\t\t\t<Sms>\n\t\t\t\t\t\t<span \n\t\t\t\t\t\t\tv-html=\"getSmsMessage()\"\n\t\t\t\t\t\t\tv-on:mouseenter=\"onSmsMouseenter($event)\"\n\t\t\t\t\t\t\tv-on:mouseleave=\"onSmsMouseleave\"\n\t\t\t\t\t\t></span>\n\t\t\t\t\t</Sms>\n\t\t\t\t\t<div class=\"sms-provider-selector-block\">\n\t\t\t\t\t\t<div \n\t\t\t\t\t\t\tv-html=\"getNotificationConnectHint\"\n\t\t\t\t\t\t\tv-if=\"isNotificationsEnabled\"\n\t\t\t\t\t\t></div>\n\t\t\t\t\t\t<div v-else>\n\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('CRM_CFG_TERMINAL_SETTINGS_SECTION_SMS_SERVICE_SELECT') }}\n\t\t\t\t\t\t\t<SmsProviderSelect v-on:onConnectSliderClosed=\"onServiceConnectSliderClosed\"/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div v-else>\n\t\t\t\t<span class=\"sms-provider-empty-provider-list-text\" v-if=\"(getNotificationsLink() !== null) && (getServiceLink() !== '')\">\n\t\t\t\t\t{{ $Bitrix.Loc.getMessage('CRM_CFG_TERMINAL_SETTINGS_SECTION_SMS_ONBOARDING_TEXT') }}\n\t\t\t\t</span>\n\t\t\t\t<span class=\"sms-provider-empty-provider-list-text\" v-else-if=\"(getNotificationsLink() === null) && (getServiceLink() !== '')\">\n\t\t\t\t\t{{ $Bitrix.Loc.getMessage('CRM_CFG_TERMINAL_SETTINGS_SECTION_SMS_ONBOARDING_ONLY_SMS_SERVICES_TEXT') }}\n\t\t\t\t</span>\n\t\t\t\t<button class=\"ui-btn ui-btn-md ui-btn-primary\" @click=\"onNotificationsConnectLinkClick\" v-if=\"getNotificationsLink() !== null\">\n\t\t\t\t\t{{ $Bitrix.Loc.getMessage('CRM_CFG_TERMINAL_SETTINGS_SECTION_SMS_SERVICE_UNC_CONNECT_BTN') }}\n\t\t\t\t</button>\n\t\t\t\t\n\t\t\t\t<button class=\"ui-btn ui-btn-md ui-btn-light-border\" @click=\"onProviderSmsNotificationClick\" v-if=\"(getNotificationsLink() !== null) && (getServiceLink() !== '')\">\n\t\t\t\t\t{{ $Bitrix.Loc.getMessage('CRM_CFG_TERMINAL_SETTINGS_SECTION_SMS_SERVICE_PROVIDER_CONNECT_BTN') }}\n\t\t\t\t</button>\n\t\t\t\t<button class=\"ui-btn ui-btn-md ui-btn-primary\" @click=\"onProviderSmsNotificationClick\" v-else-if=\"(getNotificationsLink() === null) && (getServiceLink() !== '')\">\n\t\t\t\t\t{{ $Bitrix.Loc.getMessage('CRM_CFG_TERMINAL_SETTINGS_SECTION_SMS_SERVICE_PROVIDER_CONNECT_BTN') }}\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</SettingsSection>\n\t`,\n};\n","//@flow\n\nimport {SmsSettingsSection} from \"./sms-settings-section\";\nimport {mapGetters} from \"ui.vue3.vuex\";\n\nexport const TerminalSettings = {\n\tcomponents: {\n\t\t'SmsSettingsSection': SmsSettingsSection,\n\t},\n\n\tcomputed: {\n\t\t...mapGetters({\n\t\t\tisSettingsChanged: 'isChanged',\n\t\t\tisSaving: 'isSaving',\n\t\t}),\n\n\t\tbuttonsPanelClass()\n\t\t{\n\t\t\treturn {\n\t\t\t\t'ui-button-panel-wrapper': true,\n\t\t\t\t'ui-pinner': true,\n\t\t\t\t'ui-pinner-bottom': true,\n\t\t\t\t'ui-pinner-full-width': true,\n\t\t\t\t'ui-button-panel-wrapper-hide': !this.isSettingsChanged,\n\t\t\t};\n\t\t},\n\t\tsaveButtonClasses()\n\t\t{\n\t\t\treturn {\n\t\t\t\t'ui-btn': true,\n\t\t\t\t'ui-btn-success': true,\n\t\t\t\t'ui-btn-wait': this.isSaving,\n\t\t\t};\n\t\t},\n\t},\n\n\tmethods: {\n\t\tsave()\n\t\t{\n\t\t\tthis.$emit('onSave');\n\t\t},\n\t\tcancel()\n\t\t{\n\t\t\tthis.$emit('onCancel');\n\t\t},\n\t},\n\n\t// language=Vue\n\ttemplate: `\n\t\t<div class=\"settings-container\">\n\t\t\t<!-- Settings title -->\n\t\t\t<div class=\"ui-slider-heading-4\" style=\"margin-bottom: 40px\">\n\t\t\t\t{{ $Bitrix.Loc.getMessage('CRM_CFG_TERMINAL_SETTINGS_SUBTITLE_NOTIFICATION') }}\n\t\t\t</div>\n\t\t\t\n\t\t\t<!-- Settings content -->\n\t\t\t<div class=\"settings-section-list\">\n\t\t\t\t<SmsSettingsSection />\n\t\t\t</div>\n\t\t\t\n\t\t\t\n\t\t\t<!-- Save panel -->\n\t\t\t<div\n\t\t\t\t:class=\"buttonsPanelClass\"\n\t\t\t>\n\t\t\t\t<div class=\"ui-button-panel ui-button-panel-align-center\">\n\t\t\t\t\t<button\n\t\t\t\t\t\t@click=\"save\"\n\t\t\t\t\t\t:class=\"saveButtonClasses\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('CRM_CFG_TERMINAL_SETTINGS_SAVE_BTN') }}\n\t\t\t\t\t</button>\n\t\t\t\t\t<a\n\t\t\t\t\t\t@click=\"cancel\"\n\t\t\t\t\t\tclass=\"ui-btn ui-btn-link\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('CRM_CFG_TERMINAL_SETTINGS_CANCEL_BTN') }}\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`\n};\n","//@flow\n\nimport type {TerminalSettingsProps, NotificationLink, SmsService} from \"./types\";\nimport {Type, ajax} from \"main.core\";\nimport {BitrixVue, createApp, VueCreateAppResult} from \"ui.vue3\";\nimport {TerminalSettings} from \"./components/terminal-settings\";\nimport '../css/app.css';\nimport {createStore, mapGetters, mapMutations, Store} from \"ui.vue3.vuex\";\nimport \"ui.notification\";\n\ntype AppProps = {\n\trootNodeId: string,\n\tterminalSettings: TerminalSettingsProps,\n};\n\nexport class App\n{\n\t#application: VueCreateAppResult;\n\trootNode: HTMLElement;\n\tterminalSettings: TerminalSettingsProps;\n\n\n\tconstructor(props: AppProps) {\n\t\tthis.rootNode = document.getElementById(props.rootNodeId);\n\t\tthis.terminalSettings = props.terminalSettings;\n\n\t\tthis.store = this.#initStore(props.terminalSettings);\n\t}\n\n\t#initStore(terminalSettings: TerminalSettingsProps): Store\n\t{\n\t\tconst terminalSettingsStore = {\n\t\t\tstate(): Object\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\t...terminalSettings,\n\t\t\t\t\tisSaving: false,\n\t\t\t\t\tchangedValues: {},\n\t\t\t\t};\n\t\t\t},\n\n\t\t\tgetters: {\n\t\t\t\tisChanged(state): boolean\n\t\t\t\t{\n\t\t\t\t\treturn Object.keys(state.changedValues).length !== 0;\n\t\t\t\t},\n\n\t\t\t\tisSmsSendingActive(state): boolean\n\t\t\t\t{\n\t\t\t\t\tif (state.changedValues.isSmsSendingEnabled !== undefined)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn state.changedValues.isSmsSendingEnabled;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\treturn state.isSmsSendingEnabled;\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\tisAnyServiceEnabled(state): boolean\n\t\t\t\t{\n\t\t\t\t\treturn (state.activeSmsServices.length > 0 || state.isNotificationsEnabled);\n\t\t\t\t},\n\n\t\t\t\tisNotificationsEnabled(state): boolean\n\t\t\t\t{\n\t\t\t\t\treturn state.isNotificationsEnabled;\n\t\t\t\t},\n\n\t\t\t\tgetPaymentSlipLinkScheme(state): string\n\t\t\t\t{\n\t\t\t\t\treturn state.paymentSlipLinkScheme;\n\t\t\t\t},\n\n\t\t\t\tgetNotificationsLink(state): ?NotificationLink\n\t\t\t\t{\n\t\t\t\t\tif (Type.isObject(state.connectNotificationsLink))\n\t\t\t\t\t{\n\t\t\t\t\t\treturn state.connectNotificationsLink;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn null;\n\t\t\t\t},\n\n\t\t\t\tisNotificationAvailableToConnect(state): string\n\t\t\t\t{\n\t\t\t\t\treturn this.getNotificationsLink(state) !== null;\n\t\t\t\t},\n\n\t\t\t\tgetServiceLink(state): string\n\t\t\t\t{\n\t\t\t\t\tif (Type.isString(state.connectServiceLink))\n\t\t\t\t\t{\n\t\t\t\t\t\treturn state.connectServiceLink;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn '';\n\t\t\t\t},\n\n\t\t\t\tgetSelectedService(state): SmsService\n\t\t\t\t{\n\t\t\t\t\tif (Type.isString(state.changedValues.selectedServiceId))\n\t\t\t\t\t{\n\t\t\t\t\t\treturn state.activeSmsServices.find(element => element['ID'] === state.changedValues.selectedServiceId);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn state.activeSmsServices.find(element => element['SELECTED']);\n\t\t\t\t},\n\n\t\t\t\tgetActiveSmsServices(state): Array<SmsService>\n\t\t\t\t{\n\t\t\t\t\treturn state.activeSmsServices;\n\t\t\t\t},\n\n\t\t\t\tgetChangedValues(state): Object\n\t\t\t\t{\n\t\t\t\t\treturn state.changedValues;\n\t\t\t\t},\n\n\t\t\t\tisSaving(state): boolean\n\t\t\t\t{\n\t\t\t\t\treturn state.isSaving;\n\t\t\t\t},\n\t\t\t},\n\n\t\t\tmutations: {\n\t\t\t\tsetSmsSendingActive(state, value)\n\t\t\t\t{\n\t\t\t\t\tif (state.changedValues.isSmsSendingEnabled !== undefined && value === state.isSmsSendingEnabled)\n\t\t\t\t\t{\n\t\t\t\t\t\tdelete state.changedValues.isSmsSendingEnabled;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tstate.isChanged = true;\n\t\t\t\t\t\tstate.changedValues.isSmsSendingEnabled = value;\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\tselectSMSService(state, value)\n\t\t\t\t{\n\t\t\t\t\tif (state.activeSmsServices.find(element => element['SELECTED'])['ID'] === value)\n\t\t\t\t\t{\n\t\t\t\t\t\tdelete state.changedValues.selectedServiceId;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tstate.changedValues.selectedServiceId = value;\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\tsetSaving(state, value)\n\t\t\t\t{\n\t\t\t\t\tif (Type.isBoolean(value))\n\t\t\t\t\t{\n\t\t\t\t\t\tstate.isSaving = value;\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\tupdateServicesList(state, value)\n\t\t\t\t{\n\t\t\t\t\tstate.activeSmsServices = value;\n\t\t\t\t},\n\n\t\t\t\tupdateNotificationsEnabled(state, value)\n\t\t\t\t{\n\t\t\t\t\tstate.isNotificationsEnabled = value;\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\n\t\treturn createStore(terminalSettingsStore);\n\t}\n\n\tattachTemplate(): void\n\t{\n\t\tthis.#application = BitrixVue.createApp({\n\t\t\tcomponents: {\n\t\t\t\t'TerminalSettings': TerminalSettings,\n\t\t\t},\n\n\t\t\tcomputed: {\n\t\t\t\t...mapGetters([\n\t\t\t\t\t'isChanged',\n\t\t\t\t\t'isSaving',\n\t\t\t\t\t'getChangedValues',\n\t\t\t\t]),\n\t\t\t},\n\n\t\t\tmethods: {\n\t\t\t\t...mapMutations([\n\t\t\t\t\t'setSaving',\n\t\t\t\t]),\n\n\t\t\t\tonSettingsSave() {\n\t\t\t\t\tif (!this.isChanged || this.isSaving)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tthis.setSaving(true);\n\n\t\t\t\t\tajax\n\t\t\t\t\t\t.runComponentAction('bitrix:crm.config.terminal.settings', 'saveSettings', {\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\tchangedValues: this.getChangedValues,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}).then(\n\t\t\t\t\t\t\t() => {\n\t\t\t\t\t\t\t\tthis.setSaving(false);\n\t\t\t\t\t\t\t\tBX.SidePanel.Instance.close();\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t() => {\n\t\t\t\t\t\t\t\tthis.setSaving(false);\n\t\t\t\t\t\t\t\tBX.UI.Notification.Center.notify({\n\t\t\t\t\t\t\t\t\tcontent: this.$Bitrix.Loc.getMessage('CRM_CFG_TERMINAL_SETTINGS_ON_SAVE_ERROR'),\n\t\t\t\t\t\t\t\t\twidth: 350,\n\t\t\t\t\t\t\t\t\tautoHideDelay: 4000,\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t);\n\t\t\t\t},\n\n\t\t\t\tonSettingsCancel() {\n\t\t\t\t\tBX.SidePanel.Instance.close();\n\t\t\t\t},\n\t\t\t},\n\n\t\t\t//language=Vue\n\t\t\ttemplate: `\n\t\t\t\t<TerminalSettings @onSave=\"onSettingsSave\" @onCancel=\"onSettingsCancel\"/>\n\t\t\t`,\n\t\t});\n\n\t\tthis.#application.use(this.store);\n\t\tthis.#application.mount(this.rootNode);\n\t}\n}"],"names":["SettingsSection","data","isEnabled","active","switcher","mounted","BX","UI","Switcher","node","$refs","checked","handlers","toggled","onSwitcherToggle","bind","Hint","init","title","methods","$emit","props","String","switchable","type","Boolean","hint","template","Sms","SmsProviderSelect","isListShowed","document","addEventListener","mapGetters","mapMutations","switchService","serviceId","selectSMSService","switchVisibility","openSmsServicesSlider","options","cacheable","allowChangeHistory","requestMethod","width","events","onClose","SidePanel","Instance","open","getServiceLink","computed","getListClassname","SmsSettingsSection","popup","components","Notification","getSectionTitle","$Bitrix","Loc","getMessage","getSectionHint","replacements","getNotificationConnectHint","onServiceConnectSliderClosed","ajax","runComponentAction","then","response","status","isUCNEnabled","updateNotificationsEnabled","updateServicesList","activeSmsServices","onSectionToggled","setSmsSendingActive","isSmsSendingActive","getSmsMessage","link","getPaymentSlipLinkScheme","text","Text","encode","replace","getSmsProviderMessage","providerSelect","onSmsMouseenter","event","target","message","destroy","Popup","onPopupClose","darkMode","content","offsetLeft","offsetWidth","show","onSmsMouseleave","onNotificationsConnectLinkClick","notificationLink","getNotificationsLink","value","top","InfoHelper","onProviderSmsNotificationClick","TerminalSettings","isSettingsChanged","isSaving","buttonsPanelClass","saveButtonClasses","save","cancel","App","rootNode","getElementById","rootNodeId","terminalSettings","store","BitrixVue","createApp","onSettingsSave","isChanged","setSaving","changedValues","getChangedValues","close","Center","notify","autoHideDelay","onSettingsCancel","use","mount","terminalSettingsStore","state","getters","Object","keys","length","isSmsSendingEnabled","undefined","isAnyServiceEnabled","isNotificationsEnabled","paymentSlipLinkScheme","Type","isObject","connectNotificationsLink","isNotificationAvailableToConnect","isString","connectServiceLink","getSelectedService","selectedServiceId","find","element","getActiveSmsServices","mutations","isBoolean","createStore"],"mappings":"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"}