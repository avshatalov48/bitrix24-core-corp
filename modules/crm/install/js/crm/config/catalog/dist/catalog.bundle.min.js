this.BX=this.BX||{};this.BX.Crm=this.BX.Crm||{};this.BX.Crm.Config=this.BX.Crm.Config||{};(function(t,e,n,i,s,a,o,r,c,l){"use strict";var u={computed:{loc:function t(){return s.Vue.getFilteredPhrases("CRM_CFG_C_SETTINGS_")}}};function d(t,e){var n=typeof Symbol!=="undefined"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=h(t))||e&&t&&typeof t.length==="number"){if(n)t=n;var i=0;var s=function t(){};return{s:s,n:function e(){if(i>=t.length)return{done:true};return{done:false,value:t[i++]}},e:function t(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a=true,o=false,r;return{s:function e(){n=n.call(t)},n:function t(){var e=n.next();a=e.done;return e},e:function t(e){o=true;r=e},f:function t(){try{if(!a&&n["return"]!=null)n["return"]()}finally{if(o)throw r}}}}function h(t,e){if(!t)return;if(typeof t==="string")return C(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor)n=t.constructor.name;if(n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return C(t,e)}function C(t,e){if(e==null||e>t.length)e=t.length;for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var p={props:{settings:{type:Object,required:true}},data:function t(){var e={};var n=d(this.settings.scheme),i;try{for(n.s();!(i=n.n()).done;){var s=i.value;e[s.code]=this.settings.values[s.code]}}catch(t){n.e(t)}finally{n.f()}return e},methods:{onChanged:function t(){this.$emit("change",this.$data)},getWrapperClass:function t(e){return e==="option"?{"catalog-settings-editor-checkbox-content-block":true}:{"catalog-settings-editor-content-block":true}}},mounted:function t(){BX.UI.Hint.init(this.$el)},template:'\n\t\t<div>\n\t\t\t<div\n\t\t\t\tv-for="setting in settings.scheme"\n\t\t\t\t:class="getWrapperClass(setting.type)"\n\t\t\t>\n\t\t\t\t<template v-if="setting.type === \'list\'">\n\t\t\t\t\t<div class="ui-ctl-label-text">\n\t\t\t\t\t\t<label>{{setting.name}}</label>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="ui-ctl ui-ctl-after-icon ui-ctl-dropdown ui-ctl-w100">\n\t\t\t\t\t\t<div class="ui-ctl-after ui-ctl-icon-angle"></div>\n\t\t\t\t\t\t<select\n\t\t\t\t\t\t\tv-model="$data[setting.code]"\n\t\t\t\t\t\t\t@change="onChanged"\n\t\t\t\t\t\t\t:disabled="setting.disabled"\n\t\t\t\t\t\t\tclass="ui-ctl-element"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<option v-for="value in setting.values" :value="value.code">\n\t\t\t\t\t\t\t\t{{value.name}}\n\t\t\t\t\t\t\t</option>\t\t\t\t\t\t\n\t\t\t\t\t\t</select>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t\t<template v-if="setting.type === \'text\'">\n\t\t\t\t\t<div class="ui-ctl-label-text">\n\t\t\t\t\t\t<label>{{setting.name}}</label>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="ui-ctl ui-ctl-textbox ui-ctl-w100">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tv-model="$data[setting.code]"\n\t\t\t\t\t\t\t@change="onChanged"\n\t\t\t\t\t\t\t:disabled="setting.disabled"\n\t\t\t\t\t\t\ttype="text"\n\t\t\t\t\t\t\tclass="ui-ctl-element"\n\t\t\t\t\t\t>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t\t<template v-if="setting.type === \'int\'">\n\t\t\t\t\t<div class="ui-ctl-label-text">\n\t\t\t\t\t\t<label>{{setting.name}}</label>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="ui-ctl ui-ctl-textbox ui-ctl-w100">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tv-model="$data[setting.code]"\n\t\t\t\t\t\t\t@input="onChanged"\n\t\t\t\t\t\t\t:disabled="setting.disabled"\n\t\t\t\t\t\t\ttype="text"\n\t\t\t\t\t\t\tclass="ui-ctl-element"\n\t\t\t\t\t\t>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t\t<template v-if="setting.type === \'option\'">\n\t\t\t\t\t<div class="ui-ctl ui-ctl-checkbox ui-ctl-w100">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tv-model="$data[setting.code]"\n\t\t\t\t\t\t\t@change="onChanged"\n\t\t\t\t\t\t\t:id="setting.code + \'_\' + $vnode.key"\n\t\t\t\t\t\t\t:disabled="setting.disabled"\n\t\t\t\t\t\t\ttype="checkbox"\n\t\t\t\t\t\t\tclass="ui-ctl-element"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t<label\n\t\t\t\t\t\t\t:for="setting.code + \'_\' + $vnode.key"\n\t\t\t\t\t\t\tclass="ui-ctl-label-text"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{setting.name}}\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tv-if="setting.description"\n\t\t\t\t\t\t\tclass="ui-hint"\n\t\t\t\t\t\t\t:data-hint="setting.description"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span class="ui-hint-icon"></span>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t</div>\n\t\t</div>\n\t'};function g(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function f(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?g(Object(n),!0).forEach((function(e){babelHelpers.defineProperty(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var _=function(){function t(e){babelHelpers.classCallCheck(this,t);this.url="/bitrix/tools/catalog/product_settings.php";this.stepOptions={ajaxSessionID:"",maxExecutionTime:30,maxOperationCounter:10};this.finish=false;this.currentState={counter:0,operationCounter:0,errorCounter:0,lastID:0};this.ajaxParams={operation:"Y"};this.iblocks=[];this.iblockIndex=-1;this.stepOptions.ajaxSessionID="productSettings";this.currentState.counter=0;this.events=e.events;this.settings=e.settings}babelHelpers.createClass(t,[{key:"nextStep",value:function t(){for(var e in this.stepOptions){if(this.stepOptions.hasOwnProperty(e)){this.ajaxParams[e]=this.stepOptions[e]}}for(var n in this.currentState){if(this.currentState.hasOwnProperty(n)){this.ajaxParams[n]=this.currentState[n]}}this.ajaxParams.sessid=BX.bitrix_sessid();this.ajaxParams.lang=BX.message("LANGUAGE_ID");BX.ajax.loadJSON(this.url,this.ajaxParams,BX.proxy(this.nextStepResult,this))}},{key:"nextStepResult",value:function t(e){if(BX.type.isPlainObject(e)){this.currentState.lastID=e.lastID;this.stepOptions.maxOperationCounter=e.maxOperationCounter;this.currentState.operationCounter=parseInt(e.operationCounter,10);if(isNaN(this.currentState.operationCounter)){this.currentState.operationCounter=0}this.currentState.errorCounter=parseInt(e.errorCounter,10);if(isNaN(this.currentState.errorCounter)){this.currentState.errorCounter=0}if(this.events.onProgress){this.events.onProgress({allCnt:e.allCounter,doneCnt:e.allOperationCounter,currentIblockName:this.iblocks[this.iblockIndex].NAME})}if(this.finish){this.finishOperation()}else{this.checkOperation(e.finishOperation)}}}},{key:"finishOperation",value:function t(){this.currentState.operationCounter=0;this.currentState.errorCounter=0;this.currentState.lastID=0;this.finish=false;if(this.events.onComplete){this.events.onComplete()}}},{key:"startOperation",value:function t(){BX.ajax.loadJSON(this.url,f({sessid:BX.bitrix_sessid(),changeSettings:"Y"},this.settings),BX.proxy(this.changeSettingsResult,this))}},{key:"changeSettingsResult",value:function t(e){if(!BX.type.isPlainObject(e)){return}if(e.success==="Y"){this.loadIblockList()}else{this.stopOperation()}}},{key:"stopOperation",value:function t(){this.finish=true}},{key:"checkIblockIndex",value:function t(){return!(this.iblocks.length===0||this.iblockIndex<0||this.iblockIndex>=this.iblocks.length)}},{key:"loadIblockList",value:function t(){var e=this;BX.ajax.loadJSON(this.url,{sessid:BX.bitrix_sessid(),getIblock:"Y"},(function(t){if(BX.type.isArray(t)){e.iblocks=t;if(e.iblocks.length>0){e.iblockIndex=0;e.iblockReindex()}else{e.stopOperation()}}}))}},{key:"iblockReindex",value:function t(){if(this.finish||!this.checkIblockIndex()){return}this.initStep();this.nextStep()}},{key:"initStep",value:function t(){this.currentState.iblockId=this.iblocks[this.iblockIndex].ID;this.currentState.counter=this.iblocks[this.iblockIndex].COUNT;this.currentState.operationCounter=0;this.currentState.errorCounter=0;this.currentState.lastID=0}},{key:"checkOperation",value:function t(e){if(!!e){this.iblockIndex++;if(this.iblockIndex>=this.iblocks.length||this.currentState.errorCounter>0){this.finishOperation();if(this.currentState.errorCounter==0){this.finalRequest()}}else{this.initStep();this.nextStep()}}else{this.nextStep()}}},{key:"finalRequest",value:function t(){var e=[];if(this.iblocks.length>0){for(var n=0;n<this.iblocks.length;n++){e[e.length]=this.iblocks[n].ID}BX.ajax.get(this.url,{sessid:BX.bitrix_sessid(),finalRequest:"Y",iblockList:e})}}}]);return t}();var v=s.Vue.extend({mixins:[u],props:{settings:{type:Object,required:true}},data:function t(){return{currentIblockName:null,allCnt:0,doneCnt:0}},computed:{progressStyles:function t(){var e=0;if(this.allCnt>0){e=Math.round(this.doneCnt/this.allCnt*100)}return{width:e+"%"}}},created:function t(){var e=this;new _({settings:this.settings,events:{onProgress:function t(n){e.currentIblockName=n.currentIblockName;e.allCnt=n.allCnt;e.doneCnt=n.doneCnt},onComplete:function t(){e.$emit("complete")}}}).startOperation()},template:'\n\t\t<div >\n\t\t\t<div class="ui-progressbar ui-progressbar-column">\n\t\t\t\t<div style="font-weight: bold;" class="ui-progressbar-text-before">\n\t\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_PRODUCT_SETTINGS_UPDATE_TITLE}}\t\t\t\t\n\t\t\t\t</div>\n\t\t\t\t<div class="ui-progressbar-track">\n\t\t\t\t\t<div :style="progressStyles" class="ui-progressbar-bar"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="ui-progressbar-text-after">\n\t\t\t\t\t{{doneCnt}} {{loc.CRM_CFG_C_SETTINGS_OUT_OF}} {{allCnt}}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div style="color: rgb(83, 92, 105); font-size: 12px;">\n\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_PRODUCT_SETTINGS_UPDATE_WAIT}}\n\t\t\t\t<div\n\t\t\t\t\tv-show="currentIblockName"\n\t\t\t\t\tstyle="padding-top: 10px;"\n\t\t\t\t>\n\t\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_PRODUCT_SETTINGS_CURRENT_CATALOG}}: {{currentIblockName}}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t'});var S=Object.freeze({url:"/crm/configs/catalog/"});var b,T,E,m;function y(t,e){var n=typeof Symbol!=="undefined"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=P(t))||e&&t&&typeof t.length==="number"){if(n)t=n;var i=0;var s=function t(){};return{s:s,n:function e(){if(i>=t.length)return{done:true};return{done:false,value:t[i++]}},e:function t(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a=true,o=false,r;return{s:function e(){n=n.call(t)},n:function t(){var e=n.next();a=e.done;return e},e:function t(e){o=true;r=e},f:function t(){try{if(!a&&n["return"]!=null)n["return"]()}finally{if(o)throw r}}}}function P(t,e){if(!t)return;if(typeof t==="string")return R(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor)n=t.constructor.name;if(n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return R(t,e)}function R(t,e){if(e==null||e>t.length)e=t.length;for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function I(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function O(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?I(Object(n),!0).forEach((function(e){babelHelpers.defineProperty(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var k=15706692;var N=17858278;var A=s.Vue.extend({components:{reservation:p},mixins:[u],props:{initData:{type:Object,required:true}},data:function t(){return{isSaving:false,isChanged:false,currentReservationEntityCode:null,isStoreControlUsed:null,isStoreBatchUsed:false,productsCnt:null,initCostPriceCalculationMethod:null,costPriceCalculationMethod:null,isEmptyCostPriceCalculationMethod:true,isHiddenCostPriceCalculationMethodChangeWarning:true,reservationEntities:[],initDefaultQuantityTrace:null,initDefaultCanBuyZero:null,initDefaultSubscribe:null,initCheckRightsOnDecreaseStoreAmount:null,defaultQuantityTrace:null,defaultCanBuyZero:null,defaultSubscribe:null,checkRightsOnDecreaseStoreAmount:null,productCardSliderEnabled:null,isCanEnableProductCardSlider:false,isBitrix24:false,busProductCardHelpLink:"",defaultProductVatIncluded:null}},computed:{hasAccessToReservationSettings:function t(){if(this.initData.hasAccessToReservationSettings!==undefined){return this.initData.hasAccessToReservationSettings===true}return true},hasAccessToCatalogSettings:function t(){if(this.initData.hasAccessToCatalogSettings!==undefined){return this.initData.hasAccessToCatalogSettings===true}return true},isCanChangeOptionCanByZero:function t(){var e;return((e=c.Extension.getSettings("crm.config.catalog"))===null||e===void 0?void 0:e.isCanChangeOptionCanByZero)===true},costPriceCalculationMethods:function t(){var e,n;return(e=(n=c.Extension.getSettings("crm.config.catalog"))===null||n===void 0?void 0:n.costPriceCalculationMethods)!==null&&e!==void 0?e:[]},showNegativeStoreAmountPopup:function t(){var e;return((e=c.Extension.getSettings("crm.config.catalog"))===null||e===void 0?void 0:e.showNegativeStoreAmountPopup)===true},storeBalancePopupLink:function t(){var e;return(e=c.Extension.getSettings("crm.config.catalog"))===null||e===void 0?void 0:e.storeBalancePopupLink},shouldShowBatchMethodSpotlight:function t(){var e;return((e=c.Extension.getSettings("crm.config.catalog"))===null||e===void 0?void 0:e.shouldShowBatchMethodSpotlight)===true&&this.isEmptyCostPriceCalculationMethod},isReservationUsed:function t(){return this.isStoreControlUsed||this.isReservationUsageViaQuantityTrace},isCanBuyZeroInDocsVisible:function t(){return this.isStoreControlUsed&&this.isEmptyCostPriceCalculationMethod},isDefaultQuantityTraceVisible:function t(){return this.isReservationUsageViaQuantityTrace},isReservationUsageViaQuantityTrace:function t(){return!this.isStoreControlUsed&&this.initDefaultQuantityTrace},hasProductSettingsChanged:function t(){return!(this.initDefaultQuantityTrace===this.defaultQuantityTrace&&this.initDefaultCanBuyZero===this.defaultCanBuyZero&&this.initDefaultSubscribe===this.defaultSubscribe&&this.initCheckRightsOnDecreaseStoreAmount===this.checkRightsOnDecreaseStoreAmount&&this.initCostPriceCalculationMethod===this.costPriceCalculationMethod)},needProgressBarOnProductsUpdating:function t(){return this.productsCnt>500},saveButtonClasses:function t(){return{"ui-btn":true,"ui-btn-success":true,"ui-btn-wait":this.isSaving}},buttonsPanelClass:function t(){return{"ui-button-panel-wrapper":true,"ui-pinner":true,"ui-pinner-bottom":true,"ui-pinner-full-width":true,"ui-button-panel-wrapper-hide":!this.isChanged}},description:function t(){return this.isStoreControlUsed?c.Loc.getMessage("CRM_CFG_C_SETTINGS_STORE_CONTROL_ACTIVE"):c.Loc.getMessage("CRM_CFG_C_SETTINGS_STORE_CONTROL_NOT_ACTIVE")}},watch:{defaultQuantityTrace:function t(i,s){var a=this.isDefaultQuantityTraceVisible&&i===false&&s===true;if(!a){return}var o=new e.Popup(null,null,{events:{onPopupClose:function t(){return o.destroy()}},content:c.Tag.render(b||(b=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t\t<div class="catalog-settings-popup-content">\n\t\t\t\t\t\t<h3>\n\t\t\t\t\t\t\t','\n\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t<div class="catalog-settings-popup-text">\n\t\t\t\t\t\t\t',"\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t"])),c.Loc.getMessage("CRM_CFG_C_SETTINGS_TURN_OFF_QUANTITY_TRACE_TITLE"),c.Loc.getMessage("CRM_CFG_C_SETTINGS_TURN_OFF_QUANTITY_TRACE_TEXT")),maxWidth:500,overlay:true,buttons:[new n.Button({text:c.Loc.getMessage("CRM_CFG_C_SETTINGS_CLOSE"),color:n.Button.Color.PRIMARY,onclick:function t(){return o.close()}})]});o.show()}},created:function t(){this.initialize(this.initData);this.productUpdaterPopup=null;this.settingsMenu=null;var e=S.url;if(this.configCatalogSource){e+="?configCatalogSource=".concat(this.configCatalogSource)}this.slider=BX.SidePanel.Instance.getSlider(e)},methods:{markAsChanged:function t(){this.isChanged=true},onEnableProductCardCheckboxClick:function t(){if(!this.productCardSliderEnabled){this.askToEnableProductCardSlider()}this.markAsChanged()},askToEnableProductCardSlider:function t(){var e=this.isBitrix24?this.createWarningProductCardPopupForBitrix24():this.createWarningProductCardPopupForBUS();e.show()},createWarningProductCardPopupForBitrix24:function t(){var e=this;var i=this.createWarningProductCardPopup(c.Loc.getMessage("CRM_CFG_C_SETTINGS_PRODUCT_CARD_ENABLE_NEW_CARD_ASK_TEXT"),[new n.Button({text:c.Loc.getMessage("CRM_CFG_C_SETTINGS_PRODUCT_CARD_ENABLE_NEW_CARD_ASK_DISAGREE"),color:n.Button.Color.PRIMARY,onclick:function t(){e.productCardSliderEnabled=false;i.close()}}),new n.Button({text:c.Loc.getMessage("CRM_CFG_C_SETTINGS_PRODUCT_CARD_ENABLE_NEW_CARD_ASK_AGREE"),onclick:function t(){return i.close()}})],{onPopupShow:function t(){var e=document.getElementById("catalog-settings-new-productcard-popup-helpdesk");if(e){c.Event.bind(e,"click",(function(){return top.BX.Helper.show("redirect=detail&code=11657084")}))}}});return i},createWarningProductCardPopupForBUS:function t(){var e=this;var i=this.createWarningProductCardPopup(c.Loc.getMessage("CRM_CFG_C_SETTINGS_PRODUCT_CARD_ENABLE_NEW_CARD_ASK_BUS_TEXT").replace("#HELP_LINK#",this.busProductCardHelpLink),[new n.Button({text:c.Loc.getMessage("CRM_CFG_C_SETTINGS_PRODUCT_CARD_ENABLE_NEW_CARD_ASK_AGREE"),color:n.Button.Color.SUCCESS,onclick:function t(){return i.close()}}),new n.Button({text:c.Loc.getMessage("CRM_CFG_C_SETTINGS_PRODUCT_CARD_ENABLE_NEW_CARD_ASK_BUS_DISAGREE"),color:n.Button.Color.LINK,onclick:function t(){e.productCardSliderEnabled=false;i.close()}})]);return i},createWarningProductCardPopup:function t(n,i){var s=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var a={events:O({onPopupClose:function t(){return o.destroy()}},s),content:c.Tag.render(T||(T=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t\t<div class="catalog-settings-new-productcard-popup-content">\n\t\t\t\t\t\t',"\n\t\t\t\t\t</div>\n\t\t\t\t"])),n),className:"catalog-settings-new-productcard-popup",titleBar:c.Loc.getMessage("CRM_CFG_C_SETTINGS_PRODUCT_CARD_ENABLE_NEW_CARD_ASK_TITLE"),maxWidth:800,overlay:true,buttons:i};var o=new e.Popup(null,null,a);return o},openStoreControlMaster:function t(){var e=this;var n="/bitrix/components/bitrix/catalog.warehouse.master.clear/slider.php";if(this.configCatalogSource){n+="?inventoryManagementSource=".concat(this.configCatalogSource)}(new i.StoreSlider).open(n,{}).then((function(t){c.ajax.runAction("catalog.config.isUsedInventoryManagement",{}).then((function(n){if(e.isStoreControlUsed!==n.data){if(n.data===true){e.close()}else{e.refresh()}}if(t!==null&&t!==void 0&&t.getData().get("isPresetApplied")){e.showMessage(c.Loc.getMessage("CRM_CFG_C_SETTINGS_SAVED_SUCCESSFULLY"))}}))}))},refresh:function t(){var e=this;return new Promise((function(t,n){c.ajax.runComponentAction("bitrix:crm.config.catalog.settings","initialize",{mode:"class",json:{}}).then((function(n){e.initialize(n.data);t()}))["catch"]((function(t){e.showResponseErrors(t);n()}))}))},wait:function t(e){return new Promise((function(t,n){setTimeout((function(){t()}),e)}))},showResponseErrors:function t(e){this.showMessage(e.errors.map((function(t){return t.message})).join(", "))},showMessage:function t(e){top.BX.loadExt("ui.notification").then((function(){top.BX.UI.Notification.Center.notify({content:e})}))},initialize:function t(e){var n;this.isStoreControlUsed=e.isStoreControlUsed;this.isStoreBatchUsed=e.isStoreControlUsed&&e.isStoreBatchUsed;this.productsCnt=e.productsCnt;this.reservationEntities=e.reservationEntities;if(this.reservationEntities.length>0){this.currentReservationEntityCode=this.reservationEntities[0].code}this.initDefaultQuantityTrace=this.defaultQuantityTrace=e.defaultQuantityTrace;this.initDefaultCanBuyZero=this.defaultCanBuyZero=e.defaultCanBuyZero;this.initDefaultSubscribe=this.defaultSubscribe=e.defaultSubscribe;this.initCheckRightsOnDecreaseStoreAmount=this.checkRightsOnDecreaseStoreAmount=e.checkRightsOnDecreaseStoreAmount;this.initCostPriceCalculationMethod=this.costPriceCalculationMethod=e.costPriceCalculationMethod;this.defaultProductVatIncluded=e.defaultProductVatIncluded;this.productCardSliderEnabled=e.productCardSliderEnabled;this.costPriceCalculationMethod=e.costPriceCalculationMethod;this.isEmptyCostPriceCalculationMethod=!c.Type.isStringFilled(this.costPriceCalculationMethod);this.isCanEnableProductCardSlider=e.isCanEnableProductCardSlider;this.isBitrix24=e.isBitrix24;this.busProductCardHelpLink=e.busProductCardHelpLink;this.configCatalogSource=(n=this.configCatalogSource)!==null&&n!==void 0?n:e.configCatalogSource;this.isChanged=false},onReservationSettingsValuesChanged:function t(e,n){this.reservationEntities[n].settings.values=e;this.markAsChanged()},save:function t(){var i=this;if(this.isSaving){return}if(c.Type.isStringFilled(this.costPriceCalculationMethod)&&this.showNegativeStoreAmountPopup){var s=c.Loc.getMessage("CRM_CFG_C_SETTINGS_NEGATIVE_STORE_BALANCE_POPUP_TEXT",{"#STORE_BALANCE_LIST_LINK#":"<help-link></help-link>"});var a=c.Tag.render(E||(E=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t\t<div class="catalog-settings-popup-content">\n\t\t\t\t\t\t<div class="catalog-settings-popup-text">\n\t\t\t\t\t\t\t',"\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t"])),s);if(!c.Type.isUndefined(top.BX.SidePanel.Instance)&&c.Type.isStringFilled(this.storeBalancePopupLink)){var o=c.Tag.render(m||(m=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t\t\t<a href="#" class="ui-form-link">\n\t\t\t\t\t\t\t',"\n\t\t\t\t\t\t</a>\n\t\t\t\t\t"])),c.Loc.getMessage("CRM_CFG_C_SETTINGS_NEGATIVE_STORE_BALANCE_POPUP_LINK"));c.Event.bind(o,"click",(function(){top.BX.SidePanel.Instance.open("".concat(i.storeBalancePopupLink),{requestMethod:"post",cacheable:false})}));c.Dom.replace(a.querySelector("help-link"),o)}var r=new e.Popup({id:"catalog_settings_document_negative_balance_popup",content:a,buttons:[new n.Button({text:c.Loc.getMessage("CRM_CFG_C_SETTINGS_RETURN"),color:n.ButtonColor.DANGER,onclick:function t(e,n){r.destroy()}})]});r.show();return}this.isSaving=true;this.saveProductSettings().then((function(){c.ajax.runComponentAction("bitrix:crm.config.catalog.settings","save",{mode:"class",json:{values:{reservationSettings:i.makeReservationSettings(),productCardSliderEnabled:i.productCardSliderEnabled,defaultProductVatIncluded:i.defaultProductVatIncluded,checkRightsOnDecreaseStoreAmount:i.checkRightsOnDecreaseStoreAmount,costPriceCalculationMethod:i.costPriceCalculationMethod}}}).then((function(t){i.isChanged=false;i.isSaving=false;i.showMessage(c.Loc.getMessage("CRM_CFG_C_SETTINGS_SAVED_SUCCESSFULLY"));i.refresh().then((function(){return i.wait(700)})).then((function(){return i.close()}));BX.SidePanel.Instance.postMessage(window,"BX.Crm.Config.Catalog:onAfterSaveSettings")}))["catch"]((function(t){i.isChanged=false;i.isSaving=false;i.showResponseErrors(t)}))}))},saveProductSettings:function t(){var n=this;if(!this.hasProductSettingsChanged){return Promise.resolve()}var i={propsData:{settings:{default_quantity_trace:this.defaultQuantityTrace?"Y":"N",default_can_buy_zero:this.defaultCanBuyZero?"Y":"N",default_subscribe:this.defaultSubscribe?"Y":"N"}}};return new Promise((function(t){var s=new v(i).$on("complete",(function(){t();if(n.needProgressBarOnProductsUpdating){n.productUpdaterPopup.destroy()}})).$mount();if(n.needProgressBarOnProductsUpdating){n.productUpdaterPopup=new e.Popup({content:s.$el,width:310,overlay:true,padding:17,animation:"fading-slide",angle:false});n.productUpdaterPopup.show()}}))},makeReservationSettings:function t(){var e={};var n=y(this.reservationEntities),i;try{for(n.s();!(i=n.n()).done;){var s=i.value;e[s.code]=s.settings.values}}catch(t){n.e(t)}finally{n.f()}return e},cancel:function t(){this.close()},close:function t(){this.slider.close()},getReservationSettingsHint:function t(){return this.getHintContentWrapped(c.Loc.getMessage("CRM_CFG_C_SETTINGS_RESERVATION_SETTINGS_HINT"),k,"reservation")},getProductsSettingsHint:function t(){return this.getHintContent(c.Loc.getMessage("CRM_CFG_C_SETTINGS_PRODUCTS_SETTINGS_HINT"),k,"products")},getCostPriceCalculationHint:function t(){return this.getHintContent(c.Loc.getMessage("CRM_CFG_C_SETTINGS_COST_PRICE_CALCULATION_MODE_HINT"),N)},getCanBuyZeroHint:function t(){return this.getHintContent(c.Loc.getMessage("CRM_CFG_C_SETTINGS_CAN_BUY_ZERO_HINT"),k,"products")},getCanBuyZeroInDocsHint:function t(){return this.getHintContent("\n\t\t\t\t\t".concat(c.Loc.getMessage("CRM_CFG_C_SETTINGS_CAN_BUY_ZERO_IN_DOCS_HINT"),"\n\t\t\t\t\t<br/><br/>\n\t\t\t\t\t").concat(c.Loc.getMessage("CRM_CFG_C_SETTINGS_CAN_BUY_ZERO_IN_DOCS_HINT_DOC_TYPE_RESTRICTIONS"),"\n\t\t\t\t\t<br/>\n\t\t\t\t"),k,"products")},getHintContent:function t(e,n,i){return"\n\t\t\t\t".concat(e,"\n\t\t\t\t<br/>\n\t\t\t\t").concat(this.getDocumentationLink(c.Loc.getMessage("CRM_CFG_C_SETTINGS_DETAILS"),n,i),"\n\t\t\t")},getHintContentWrapped:function t(e,n,i){return this.getDocumentationLink(e,n,i)},getDocumentationLink:function t(e,n,i){var s="redirect=detail&code=".concat(n);if(!c.Type.isNil(i)){s+="#".concat(i)}return'\n\t\t\t\t<a href="javascript:void(0);" onclick="if (top.BX.Helper){top.BX.Helper.show(\''.concat(s,'\');}" class="catalog-settings-helper-link">\n\t\t\t\t\t').concat(e,"\n\t\t\t\t</a>\n\t\t\t")},getDocumentationProductBatchLink:function t(){return this.getDocumentationLink(c.Loc.getMessage("CRM_CFG_C_SETTINGS_DETAILS"),N)},changeCalculationMode:function t(){if(!this.isEmptyCostPriceCalculationMethod){return}this.isHiddenCostPriceCalculationMethodChangeWarning=false;this.markAsChanged()}},mounted:function t(){BX.UI.Hint.init(this.$el);if(this.shouldShowBatchMethodSpotlight){var e=document.querySelector(".catalog-settings-cost-price-method-selector");c.Runtime.loadExtension("spotlight").then((function(t){var n=new BX.SpotLight({id:"batch-method-tour-spotlight",targetElement:e,autoSave:true,targetVertex:"middle-center",zIndex:200,left:-420});n.show();n.container.style.pointerEvents="none";c.userOptions.save("crm.catalog-settings","tour","batch_spotlight_shown","Y");c.Event.bind(e,"click",(function(){n.close()}))}))}},template:'\n\t\t<div class="catalog-settings-wrapper">\n\t\t\t<form>\n\t\t\t\t<div class="ui-slider-section">\n\t\t\t\t\t<div class="ui-slider-content-box">\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tstyle="display: flex; align-items: center"\n\t\t\t\t\t\t\tclass="ui-slider-heading-4"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_TITLE}}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="ui-slider-inner-box">\n\t\t\t\t\t\t\t<p class="ui-slider-paragraph-2">\n\t\t\t\t\t\t\t\t{{description}}\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div v-if="hasAccessToCatalogSettings" class="catalog-settings-button-container">\n\t\t\t\t\t\t\t<template v-if="isStoreControlUsed">\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t@click="openStoreControlMaster()"\n\t\t\t\t\t\t\t\t\tclass="ui-btn ui-btn-md ui-btn-light-border ui-btn-width"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_INVENTORY_MANAGEMENT_DISABLE}}\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t@click="openStoreControlMaster()"\n\t\t\t\t\t\t\t\t\tclass="ui-btn ui-btn-success"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_TURN_INVENTORY_CONTROL_ON}}\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="catalog-settings-main-settings">\n\t\t\t\t\t<div\n\t\t\t\t\t\tv-if="isReservationUsed && hasAccessToReservationSettings"\n\t\t\t\t\t\tclass="ui-slider-section"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div class="ui-slider-heading-4">\n\t\t\t\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_RESERVATION_SETTINGS}}\n\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\tclass="ui-hint"\n\t\t\t\t\t\t\t\tdata-hint-html=""\n\t\t\t\t\t\t\t\tdata-hint-interactivity=""\n\t\t\t\t\t\t\t\t:data-hint="getReservationSettingsHint()"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<span class="ui-hint-icon"></span>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="catalog-settings-editor-content-block">\n\t\t\t\t\t\t\t<div class="ui-ctl-label-text">\n\t\t\t\t\t\t\t\t<label>{{loc.CRM_CFG_C_SETTINGS_RESERVATION_ENTITY}}</label>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="ui-ctl ui-ctl-after-icon ui-ctl-dropdown ui-ctl-disabled ui-ctl-w100">\n\t\t\t\t\t\t\t\t\x3c!--<div class="ui-ctl-after ui-ctl-icon-angle"></div>--\x3e\n\t\t\t\t\t\t\t\t<select\n\t\t\t\t\t\t\t\t\tv-model="currentReservationEntityCode"\n\t\t\t\t\t\t\t\t\tclass="ui-ctl-element"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<option\n\t\t\t\t\t\t\t\t\t\tv-for="reservationEntity in reservationEntities"\n\t\t\t\t\t\t\t\t\t\t:value="reservationEntity.code"\n\t\t\t\t\t\t\t\t\t\t:disabled="reservationEntity.code !== \'deal\'"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{{reservationEntity.name}}\n\t\t\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<reservation\n\t\t\t\t\t\t\tv-for="(reservationEntity, index) in reservationEntities"\n\t\t\t\t\t\t\tv-show="reservationEntity.code === currentReservationEntityCode"\n\t\t\t\t\t\t\t:key="reservationEntity.code"\n\t\t\t\t\t\t\t:settings="reservationEntity.settings"\n\t\t\t\t\t\t\t@change="onReservationSettingsValuesChanged($event, index)"\n\t\t\t\t\t\t></reservation>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div v-if="isStoreBatchUsed && hasAccessToCatalogSettings" class="ui-slider-section">\n\t\t\t\t\t\t<div class="ui-slider-content-box">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tstyle="display: flex; align-items: center"\n\t\t\t\t\t\t\t\tclass="ui-slider-heading-4"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_COST_PRICE_TITLE}}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="catalog-settings-editor-content-block">\n\t\t\t\t\t\t\t\t<div class="ui-ctl-label-text">\n\t\t\t\t\t\t\t\t\t<label>{{loc.CRM_CFG_C_SETTINGS_COST_PRICE_CALCULATION_MODE}}</label>\n\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\tclass="ui-hint"\n\t\t\t\t\t\t\t\t\t\tdata-hint-html=""\n\t\t\t\t\t\t\t\t\t\tdata-hint-interactivity=""\n\t\t\t\t\t\t\t\t\t\t:data-hint="getCostPriceCalculationHint()"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<span class="ui-hint-icon"></span>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div v-if="!isEmptyCostPriceCalculationMethod" class="ui-alert ui-alert-primary ui-alert-icon-info">\n\t\t\t\t\t\t\t\t\t<span class="ui-alert-message">\n\t\t\t\t\t\t\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_COST_PRICE_CHANGE_MODE_INFO}}\n\t\t\t\t\t\t\t\t\t\t<span v-html=\'getDocumentationProductBatchLink()\'></span>\n\t\t\t\t\t\t\t\t\t</span>\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div v-if="!isHiddenCostPriceCalculationMethodChangeWarning" class="ui-alert ui-alert-warning ui-alert-icon-warning">\n\t\t\t\t\t\t\t\t\t<span class="ui-alert-message">\n\t\t\t\t\t\t\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_COST_PRICE_CHANGE_MODE_WARNING}}\n\t\t\t\t\t\t\t\t\t\t<span v-html=\'getDocumentationProductBatchLink()\'></span>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div \n\t\t\t\t\t\t\t\t\tclass="ui-ctl ui-ctl-after-icon ui-ctl-dropdown ui-ctl-w100" \n\t\t\t\t\t\t\t\t\t:class=\'{"ui-ctl-disabled": !isEmptyCostPriceCalculationMethod}\'\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<div \n\t\t\t\t\t\t\t\t\t\tv-if=\'isEmptyCostPriceCalculationMethod\' \n\t\t\t\t\t\t\t\t\t\tclass="ui-ctl-after ui-ctl-icon-angle"\n\t\t\t\t\t\t\t\t\t>\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<select\n\t\t\t\t\t\t\t\t\t\tv-model="costPriceCalculationMethod"\n\t\t\t\t\t\t\t\t\t\t:disabled="!isEmptyCostPriceCalculationMethod"\n\t\t\t\t\t\t\t\t\t\t@change="changeCalculationMode"\n\t\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\t\tclass="ui-ctl-element catalog-settings-cost-price-method-selector"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<option \n\t\t\t\t\t\t\t\t\t\t\tv-if="isEmptyCostPriceCalculationMethod" \n\t\t\t\t\t\t\t\t\t\t\tvalue=\'\'\n\t\t\t\t\t\t\t\t\t\t\tdisabled \n\t\t\t\t\t\t\t\t\t\t\tselected\n\t\t\t\t\t\t\t\t\t\t\thidden\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_COST_PRICE_CHANGE_PLACEHOLDER}}\n\t\t\t\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t\t\t\t<option\n\t\t\t\t\t\t\t\t\t\t\tv-for="method in costPriceCalculationMethods"\n\t\t\t\t\t\t\t\t\t\t\t:value="method.code"\n\t\t\t\t\t\t\t\t\t\t\t:selected="method.code === costPriceCalculationMethod"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{{method.title}}\n\t\t\t\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div v-if="hasAccessToCatalogSettings" class="ui-slider-section">\n\t\t\t\t\t\t<div class="ui-slider-heading-4">\n\t\t\t\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_PRODUCTS_SETTINGS}}\n\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\tclass="ui-hint"\n\t\t\t\t\t\t\t\tdata-hint-html=""\n\t\t\t\t\t\t\t\tdata-hint-interactivity=""\n\t\t\t\t\t\t\t\t:data-hint="getProductsSettingsHint()"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<span class="ui-hint-icon"></span>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tv-if="isCanEnableProductCardSlider"\n\t\t\t\t\t\t\tclass="catalog-settings-editor-checkbox-content-block"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div class="ui-ctl ui-ctl-checkbox ui-ctl-w100">\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t@click="onEnableProductCardCheckboxClick"\n\t\t\t\t\t\t\t\t\tv-model="productCardSliderEnabled"\n\t\t\t\t\t\t\t\t\tid="product_card_slider_enabled"\n\t\t\t\t\t\t\t\t\ttype="checkbox"\n\t\t\t\t\t\t\t\t\tclass="ui-ctl-element"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<label for="product_card_slider_enabled" class="ui-ctl-label-text">\n\t\t\t\t\t\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_PRODUCT_CARD_ENABLE_NEW_CARD}}\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="catalog-settings-editor-checkbox-content-block">\n\t\t\t\t\t\t\t<div class="ui-ctl ui-ctl-checkbox ui-ctl-w100">\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\tv-model="defaultSubscribe"\n\t\t\t\t\t\t\t\t\t@click="markAsChanged"\n\t\t\t\t\t\t\t\t\tid="default_subscribe"\n\t\t\t\t\t\t\t\t\ttype="checkbox"\n\t\t\t\t\t\t\t\t\tclass="ui-ctl-element"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<label for="default_subscribe" class="ui-ctl-label-text">\n\t\t\t\t\t\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_PRODUCTS_SETTINGS_DEFAULT_SUBSCRIBE}}\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="catalog-settings-editor-checkbox-content-block">\n\t\t\t\t\t\t\t<div class="ui-ctl ui-ctl-checkbox ui-ctl-w100">\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\tv-model="defaultProductVatIncluded"\n\t\t\t\t\t\t\t\t\t@click="markAsChanged"\n\t\t\t\t\t\t\t\t\tid="default_product_vat_included"\n\t\t\t\t\t\t\t\t\ttype="checkbox"\n\t\t\t\t\t\t\t\t\tclass="ui-ctl-element"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<label for="default_product_vat_included" class="ui-ctl-label-text">\n\t\t\t\t\t\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_PRODUCT_CARD_SET_VAT_IN_PRICE_FOR_NEW_PRODUCTS}}\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tv-if="isDefaultQuantityTraceVisible"\n\t\t\t\t\t\t\tclass="catalog-settings-editor-checkbox-content-block"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div class="ui-ctl ui-ctl-checkbox ui-ctl-w100">\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\tv-model="defaultQuantityTrace"\n\t\t\t\t\t\t\t\t\t@click="markAsChanged"\n\t\t\t\t\t\t\t\t\tid="default_quantity_trace"\n\t\t\t\t\t\t\t\t\ttype="checkbox"\n\t\t\t\t\t\t\t\t\tclass="ui-ctl-element"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<label for="default_quantity_trace" class="ui-ctl-label-text">\n\t\t\t\t\t\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_PRODUCTS_DEFAULT_QUANTITY_TRACE}}\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div v-if="isCanBuyZeroInDocsVisible" class="catalog-settings-editor-checkbox-content-block">\n\t\t\t\t\t\t\t<div class="ui-ctl ui-ctl-checkbox ui-ctl-w100">\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\tv-model="checkRightsOnDecreaseStoreAmount"\n\t\t\t\t\t\t\t\t\t@click="markAsChanged"\n\t\t\t\t\t\t\t\t\ttype="checkbox"\n\t\t\t\t\t\t\t\t\tclass="ui-ctl-element"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<label class="ui-ctl-label-text">\n\t\t\t\t\t\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_PRODUCTS_SETTINGS_DEFAULT_CAN_BUY_ZERO_IN_DOCS}}\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\tclass="ui-hint"\n\t\t\t\t\t\t\t\t\tdata-hint-html=""\n\t\t\t\t\t\t\t\t\tdata-hint-interactivity=""\n\t\t\t\t\t\t\t\t\t:data-hint="getCanBuyZeroInDocsHint()"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<span class="ui-hint-icon"></span>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tv-if="isReservationUsed && isCanChangeOptionCanByZero"\n\t\t\t\t\t\t\tclass="catalog-settings-editor-checkbox-content-block"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div class="ui-ctl ui-ctl-checkbox ui-ctl-w100">\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\tv-model="defaultCanBuyZero"\n\t\t\t\t\t\t\t\t\t@click="markAsChanged"\n\t\t\t\t\t\t\t\t\tid="default_can_buy_zero"\n\t\t\t\t\t\t\t\t\ttype="checkbox"\n\t\t\t\t\t\t\t\t\tclass="ui-ctl-element"\n\t\t\t\t\t\t\t\t\t:disabled="!isCanChangeOptionCanByZero"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<label for="default_can_buy_zero" class="ui-ctl-label-text">\n\t\t\t\t\t\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_PRODUCTS_SETTINGS_DEFAULT_CAN_BUY_ZERO_V2}}\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\tclass="ui-hint"\n\t\t\t\t\t\t\t\t\tdata-hint-html=""\n\t\t\t\t\t\t\t\t\tdata-hint-interactivity=""\n\t\t\t\t\t\t\t\t\t:data-hint="getCanBuyZeroHint()"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<span class="ui-hint-icon"></span>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</form>\n\t\t\t<div\n\t\t\t\t:class="buttonsPanelClass"\n\t\t\t>\n\t\t\t\t<div class="ui-button-panel ui-button-panel-align-center ">\n\t\t\t\t\t<button\n\t\t\t\t\t\t@click="save"\n\t\t\t\t\t\t:class="saveButtonClasses"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_SAVE_BUTTON}}\n\t\t\t\t\t</button>\n\t\t\t\t\t<a\n\t\t\t\t\t\t@click="cancel"\n\t\t\t\t\t\tclass="ui-btn ui-btn-link"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_CANCEL_BUTTON}}\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div style="height: 65px;"></div>\n\t\t</div>\n\t'});function x(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function M(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?x(Object(n),!0).forEach((function(e){babelHelpers.defineProperty(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var B=function(){function t(){babelHelpers.classCallCheck(this,t)}babelHelpers.createClass(t,null,[{key:"open",value:function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var i=S.url;if(c.Type.isStringFilled(e)){i+="?configCatalogSource="+e}l.EventEmitter.subscribe("SidePanel.Slider:onMessage",(function(t){var e=t.getData(),n=babelHelpers.slicedToArray(e,1),i=n[0];if(i.eventId==="BX.Crm.Config.Catalog:onAfterSaveSettings"){l.EventEmitter.emit(window,"onCatalogSettingsSave")}}));return new Promise((function(t){return BX.SidePanel.Instance.open(i,M({width:1e3,allowChangeHistory:false,cacheable:false},n))}))}}]);return t}();t.App=A;t.Slider=B})(this.BX.Crm.Config.Catalog=this.BX.Crm.Config.Catalog||{},BX.Main,BX.UI,BX.Catalog.StoreUse,BX,BX,BX,BX.UI,BX,BX.Event);
//# sourceMappingURL=catalog.bundle.map.js