this.BX=this.BX||{};this.BX.Crm=this.BX.Crm||{};this.BX.Crm.Config=this.BX.Crm.Config||{};(function(t,e,n,i,s,a){"use strict";var r={computed:{loc:function t(){return a.Vue.getFilteredPhrases("CRM_CFG_C_SETTINGS_")}}};function o(t,e){var n=typeof Symbol!=="undefined"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=l(t))||e&&t&&typeof t.length==="number"){if(n)t=n;var i=0;var s=function t(){};return{s:s,n:function e(){if(i>=t.length)return{done:true};return{done:false,value:t[i++]}},e:function t(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a=true,r=false,o;return{s:function e(){n=n.call(t)},n:function t(){var e=n.next();a=e.done;return e},e:function t(e){r=true;o=e},f:function t(){try{if(!a&&n["return"]!=null)n["return"]()}finally{if(r)throw o}}}}function l(t,e){if(!t)return;if(typeof t==="string")return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor)n=t.constructor.name;if(n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(t,e)}function c(t,e){if(e==null||e>t.length)e=t.length;for(var n=0,i=new Array(e);n<e;n++){i[n]=t[n]}return i}var u={props:{settings:{type:Object,required:true}},data:function t(){var e={};var n=o(this.settings.scheme),i;try{for(n.s();!(i=n.n()).done;){var s=i.value;e[s.code]=this.settings.values[s.code]}}catch(t){n.e(t)}finally{n.f()}return e},methods:{onChanged:function t(){this.$emit("change",this.$data)},getWrapperClass:function t(e){return e==="option"?{"catalog-settings-editor-checkbox-content-block":true}:{"catalog-settings-editor-content-block":true}}},mounted:function t(){BX.UI.Hint.init(this.$el)},template:'\n\t\t<div>\n\t\t\t<div\n\t\t\t\tv-for="setting in settings.scheme"\n\t\t\t\t:class="getWrapperClass(setting.type)"\n\t\t\t>\n\t\t\t\t<template v-if="setting.type === \'list\'">\n\t\t\t\t\t<div class="ui-ctl-label-text">\n\t\t\t\t\t\t<label>{{setting.name}}</label>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="ui-ctl ui-ctl-after-icon ui-ctl-dropdown ui-ctl-w100">\n\t\t\t\t\t\t<div class="ui-ctl-after ui-ctl-icon-angle"></div>\n\t\t\t\t\t\t<select\n\t\t\t\t\t\t\tv-model="$data[setting.code]"\n\t\t\t\t\t\t\t@change="onChanged"\n\t\t\t\t\t\t\t:disabled="setting.disabled"\n\t\t\t\t\t\t\tclass="ui-ctl-element"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<option v-for="value in setting.values" :value="value.code">\n\t\t\t\t\t\t\t\t{{value.name}}\n\t\t\t\t\t\t\t</option>\t\t\t\t\t\t\n\t\t\t\t\t\t</select>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t\t<template v-if="setting.type === \'text\'">\n\t\t\t\t\t<div class="ui-ctl-label-text">\n\t\t\t\t\t\t<label>{{setting.name}}</label>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="ui-ctl ui-ctl-textbox ui-ctl-w100">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tv-model="$data[setting.code]"\n\t\t\t\t\t\t\t@change="onChanged"\n\t\t\t\t\t\t\t:disabled="setting.disabled"\n\t\t\t\t\t\t\ttype="text"\n\t\t\t\t\t\t\tclass="ui-ctl-element"\n\t\t\t\t\t\t>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t\t<template v-if="setting.type === \'int\'">\n\t\t\t\t\t<div class="ui-ctl-label-text">\n\t\t\t\t\t\t<label>{{setting.name}}</label>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="ui-ctl ui-ctl-textbox ui-ctl-w100">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tv-model="$data[setting.code]"\n\t\t\t\t\t\t\t@input="onChanged"\n\t\t\t\t\t\t\t:disabled="setting.disabled"\n\t\t\t\t\t\t\ttype="text"\n\t\t\t\t\t\t\tclass="ui-ctl-element"\n\t\t\t\t\t\t>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t\t<template v-if="setting.type === \'option\'">\n\t\t\t\t\t<div class="ui-ctl ui-ctl-checkbox ui-ctl-w100">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tv-model="$data[setting.code]"\n\t\t\t\t\t\t\t@change="onChanged"\n\t\t\t\t\t\t\t:id="setting.code + \'_\' + $vnode.key"\n\t\t\t\t\t\t\t:disabled="setting.disabled"\n\t\t\t\t\t\t\ttype="checkbox"\n\t\t\t\t\t\t\tclass="ui-ctl-element"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t<label\n\t\t\t\t\t\t\t:for="setting.code + \'_\' + $vnode.key"\n\t\t\t\t\t\t\tclass="ui-ctl-label-text"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{setting.name}}\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tv-if="setting.description"\n\t\t\t\t\t\t\tclass="ui-hint"\n\t\t\t\t\t\t\t:data-hint="setting.description"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span class="ui-hint-icon"></span>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t</div>\n\t\t</div>\n\t'};function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function h(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(Object(n),!0).forEach((function(e){babelHelpers.defineProperty(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var f=function(){function t(e){babelHelpers.classCallCheck(this,t);this.url="/bitrix/tools/catalog/product_settings.php";this.stepOptions={ajaxSessionID:"",maxExecutionTime:30,maxOperationCounter:10};this.finish=false;this.currentState={counter:0,operationCounter:0,errorCounter:0,lastID:0};this.ajaxParams={operation:"Y"};this.iblocks=[];this.iblockIndex=-1;this.stepOptions.ajaxSessionID="productSettings";this.currentState.counter=0;this.events=e.events;this.settings=e.settings}babelHelpers.createClass(t,[{key:"nextStep",value:function t(){for(var e in this.stepOptions){if(this.stepOptions.hasOwnProperty(e)){this.ajaxParams[e]=this.stepOptions[e]}}for(var n in this.currentState){if(this.currentState.hasOwnProperty(n)){this.ajaxParams[n]=this.currentState[n]}}this.ajaxParams.sessid=BX.bitrix_sessid();this.ajaxParams.lang=BX.message("LANGUAGE_ID");BX.ajax.loadJSON(this.url,this.ajaxParams,BX.proxy(this.nextStepResult,this))}},{key:"nextStepResult",value:function t(e){if(BX.type.isPlainObject(e)){this.currentState.lastID=e.lastID;this.stepOptions.maxOperationCounter=e.maxOperationCounter;this.currentState.operationCounter=parseInt(e.operationCounter,10);if(isNaN(this.currentState.operationCounter)){this.currentState.operationCounter=0}this.currentState.errorCounter=parseInt(e.errorCounter,10);if(isNaN(this.currentState.errorCounter)){this.currentState.errorCounter=0}if(this.events.onProgress){this.events.onProgress({allCnt:e.allCounter,doneCnt:e.allOperationCounter,currentIblockName:this.iblocks[this.iblockIndex].NAME})}if(this.finish){this.finishOperation()}else{this.checkOperation(e.finishOperation)}}}},{key:"finishOperation",value:function t(){this.currentState.operationCounter=0;this.currentState.errorCounter=0;this.currentState.lastID=0;this.finish=false;if(this.events.onComplete){this.events.onComplete()}}},{key:"startOperation",value:function t(){BX.ajax.loadJSON(this.url,h({sessid:BX.bitrix_sessid(),changeSettings:"Y"},this.settings),BX.proxy(this.changeSettingsResult,this))}},{key:"changeSettingsResult",value:function t(e){if(!BX.type.isPlainObject(e)){return}if(e.success==="Y"){this.loadIblockList()}else{this.stopOperation()}}},{key:"stopOperation",value:function t(){this.finish=true}},{key:"checkIblockIndex",value:function t(){return!(this.iblocks.length===0||this.iblockIndex<0||this.iblockIndex>=this.iblocks.length)}},{key:"loadIblockList",value:function t(){var e=this;BX.ajax.loadJSON(this.url,{sessid:BX.bitrix_sessid(),getIblock:"Y"},(function(t){if(BX.type.isArray(t)){e.iblocks=t;if(e.iblocks.length>0){e.iblockIndex=0;e.iblockReindex()}else{e.stopOperation()}}}))}},{key:"iblockReindex",value:function t(){if(this.finish||!this.checkIblockIndex()){return}this.initStep();this.nextStep()}},{key:"initStep",value:function t(){this.currentState.iblockId=this.iblocks[this.iblockIndex].ID;this.currentState.counter=this.iblocks[this.iblockIndex].COUNT;this.currentState.operationCounter=0;this.currentState.errorCounter=0;this.currentState.lastID=0}},{key:"checkOperation",value:function t(e){if(!!e){this.iblockIndex++;if(this.iblockIndex>=this.iblocks.length||this.currentState.errorCounter>0){this.finishOperation();if(this.currentState.errorCounter==0){this.finalRequest()}}else{this.initStep();this.nextStep()}}else{this.nextStep()}}},{key:"finalRequest",value:function t(){var e=[];if(this.iblocks.length>0){for(var n=0;n<this.iblocks.length;n++){e[e.length]=this.iblocks[n].ID}BX.ajax.get(this.url,{sessid:BX.bitrix_sessid(),finalRequest:"Y",iblockList:e})}}}]);return t}();var p=a.Vue.extend({mixins:[r],props:{settings:{type:Object,required:true}},data:function t(){return{currentIblockName:null,allCnt:0,doneCnt:0}},computed:{progressStyles:function t(){var e=0;if(this.allCnt>0){e=Math.round(this.doneCnt/this.allCnt*100)}return{width:e+"%"}}},created:function t(){var e=this;new f({settings:this.settings,events:{onProgress:function t(n){e.currentIblockName=n.currentIblockName;e.allCnt=n.allCnt;e.doneCnt=n.doneCnt},onComplete:function t(){e.$emit("complete")}}}).startOperation()},template:'\n\t\t<div >\n\t\t\t<div class="ui-progressbar ui-progressbar-column">\n\t\t\t\t<div style="font-weight: bold;" class="ui-progressbar-text-before">\n\t\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_PRODUCT_SETTINGS_UPDATE_TITLE}}\t\t\t\t\n\t\t\t\t</div>\n\t\t\t\t<div class="ui-progressbar-track">\n\t\t\t\t\t<div :style="progressStyles" class="ui-progressbar-bar"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="ui-progressbar-text-after">\n\t\t\t\t\t{{doneCnt}} {{loc.CRM_CFG_C_SETTINGS_OUT_OF}} {{allCnt}}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div style="color: rgb(83, 92, 105); font-size: 12px;">\n\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_PRODUCT_SETTINGS_UPDATE_WAIT}}\n\t\t\t\t<div\n\t\t\t\t\tv-show="currentIblockName"\n\t\t\t\t\tstyle="padding-top: 10px;"\n\t\t\t\t>\n\t\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_PRODUCT_SETTINGS_CURRENT_CATALOG}}: {{currentIblockName}}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t'});var g=Object.freeze({url:"/crm/configs/catalog/"});var v;function C(t,e){var n=typeof Symbol!=="undefined"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=b(t))||e&&t&&typeof t.length==="number"){if(n)t=n;var i=0;var s=function t(){};return{s:s,n:function e(){if(i>=t.length)return{done:true};return{done:false,value:t[i++]}},e:function t(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a=true,r=false,o;return{s:function e(){n=n.call(t)},n:function t(){var e=n.next();a=e.done;return e},e:function t(e){r=true;o=e},f:function t(){try{if(!a&&n["return"]!=null)n["return"]()}finally{if(r)throw o}}}}function b(t,e){if(!t)return;if(typeof t==="string")return _(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor)n=t.constructor.name;if(n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _(t,e)}function _(t,e){if(e==null||e>t.length)e=t.length;for(var n=0,i=new Array(e);n<e;n++){i[n]=t[n]}return i}var S=15706692;var T=a.Vue.extend({mixins:[r],components:{reservation:u},props:{initData:{type:Object,required:true}},data:function t(){return{isSaving:false,isChanged:false,currentReservationEntityCode:null,isStoreControlUsed:null,isCommonProductProcessingEnabled:null,productsCnt:null,reservationEntities:[],initDefaultQuantityTrace:null,initDefaultCanBuyZero:null,initDefaultSubscribe:null,defaultQuantityTrace:null,defaultCanBuyZero:null,defaultSubscribe:null,productCardSliderEnabled:null,defaultProductVatIncluded:null}},created:function t(){this.initialize(this.initData);this.productUpdaterPopup=null;this.settingsMenu=null;this.slider=BX.SidePanel.Instance.getSlider(g.url)},computed:{isReservationUsed:function t(){return this.isStoreControlUsed||this.isReservationUsageViaQuantityTrace},isCanBuyZeroInDocsVisible:function t(){return this.isStoreControlUsed},isDefaultQuantityTraceVisible:function t(){return this.isReservationUsageViaQuantityTrace},isReservationUsageViaQuantityTrace:function t(){return!this.isStoreControlUsed&&this.initDefaultQuantityTrace},hasProductSettingsChanged:function t(){return!(this.initDefaultQuantityTrace===this.defaultQuantityTrace&&this.initDefaultCanBuyZero===this.defaultCanBuyZero&&this.initDefaultSubscribe===this.defaultSubscribe)},needProgressBarOnProductsUpdating:function t(){return this.productsCnt>500},saveButtonClasses:function t(){return{"ui-btn":true,"ui-btn-success":true,"ui-btn-wait":this.isSaving}},buttonsPanelClass:function t(){return{"ui-button-panel-wrapper":true,"ui-pinner":true,"ui-pinner-bottom":true,"ui-pinner-full-width":true,"ui-button-panel-wrapper-hide":!this.isChanged}},description:function t(){return this.isStoreControlUsed?e.Loc.getMessage("CRM_CFG_C_SETTINGS_STORE_CONTROL_ACTIVE"):e.Loc.getMessage("CRM_CFG_C_SETTINGS_STORE_CONTROL_NOT_ACTIVE")}},watch:{defaultQuantityTrace:function t(s,a){var r=this.isDefaultQuantityTraceVisible&&s===false&&a===true;if(!r){return}var o=new n.Popup(null,null,{events:{onPopupClose:function t(){return o.destroy()}},content:e.Tag.render(v||(v=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t\t<div class="catalog-settings-popup-content">\n\t\t\t\t\t\t<h3>\n\t\t\t\t\t\t\t','\n\t\t\t\t\t\t</h3>\t\n\t\t\t\t\t\t<div class="catalog-settings-popup-text">\n\t\t\t\t\t\t\t',"\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t"])),e.Loc.getMessage("CRM_CFG_C_SETTINGS_TURN_OFF_QUANTITY_TRACE_TITLE"),e.Loc.getMessage("CRM_CFG_C_SETTINGS_TURN_OFF_QUANTITY_TRACE_TEXT")),maxWidth:500,overlay:true,buttons:[new i.Button({text:e.Loc.getMessage("CRM_CFG_C_SETTINGS_CLOSE"),color:i.Button.Color.PRIMARY,onclick:function t(){return o.close()}})]});o.show()}},methods:{markAsChanged:function t(){this.isChanged=true},openStoreControlMaster:function t(){var n=this;var i=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";(new s.Slider).open("/bitrix/components/bitrix/catalog.warehouse.master.clear/slider.php?mode="+i,{}).then((function(t){e.ajax.runAction("catalog.config.isUsedInventoryManagement",{}).then((function(i){if(n.isStoreControlUsed!==i.data){if(i.data===true){n.close()}else{n.refresh()}}if(t!==null&&t!==void 0&&t.getData().get("isPresetApplied")){n.showMessage(e.Loc.getMessage("CRM_CFG_C_SETTINGS_SAVED_SUCCESSFULLY"))}}))}))},refresh:function t(){var n=this;return new Promise((function(t,i){e.ajax.runComponentAction("bitrix:crm.config.catalog.settings","initialize",{mode:"class",json:{}}).then((function(e){n.initialize(e.data);t()}))["catch"]((function(t){n.showResponseErrors(t);i()}))}))},wait:function t(e){return new Promise((function(t,n){setTimeout((function(){t()}),e)}))},showResponseErrors:function t(e){this.showMessage(e.errors.map((function(t){return t.message})).join(", "))},showMessage:function t(e){top.BX.loadExt("ui.notification").then((function(){top.BX.UI.Notification.Center.notify({content:e})}))},initialize:function t(e){this.isStoreControlUsed=e.isStoreControlUsed;this.isCommonProductProcessingEnabled=e.isCommonProductProcessingEnabled;this.productsCnt=e.productsCnt;this.reservationEntities=e.reservationEntities;if(this.reservationEntities.length>0){this.currentReservationEntityCode=this.reservationEntities[0].code}this.initDefaultQuantityTrace=this.defaultQuantityTrace=e.defaultQuantityTrace;this.initDefaultCanBuyZero=this.defaultCanBuyZero=e.defaultCanBuyZero;this.initDefaultSubscribe=this.defaultSubscribe=e.defaultSubscribe;this.defaultProductVatIncluded=e.defaultProductVatIncluded;this.productCardSliderEnabled=e.productCardSliderEnabled;this.isChanged=false},onReservationSettingsValuesChanged:function t(e,n){this.reservationEntities[n].settings.values=e;this.markAsChanged()},save:function t(){var n=this;if(this.isSaving){return}this.isSaving=true;this.saveProductSettings().then((function(){e.ajax.runComponentAction("bitrix:crm.config.catalog.settings","save",{mode:"class",json:{values:{reservationSettings:n.makeReservationSettings(),productCardSliderEnabled:n.productCardSliderEnabled,defaultProductVatIncluded:n.defaultProductVatIncluded}}}).then((function(t){n.isChanged=false;n.isSaving=false;n.showMessage(e.Loc.getMessage("CRM_CFG_C_SETTINGS_SAVED_SUCCESSFULLY"));n.refresh().then((function(){return n.wait(700)})).then((function(){return n.close()}))}))["catch"]((function(t){n.isChanged=false;n.isSaving=false;n.showResponseErrors(t)}))}))},saveProductSettings:function t(){var e=this;if(!this.hasProductSettingsChanged){return Promise.resolve()}var i={propsData:{settings:{default_quantity_trace:this.defaultQuantityTrace?"Y":"N",default_can_buy_zero:this.defaultCanBuyZero?"Y":"N",default_subscribe:this.defaultSubscribe?"Y":"N"}}};return new Promise((function(t){var s=new p(i).$on("complete",(function(){t();if(e.needProgressBarOnProductsUpdating){e.productUpdaterPopup.destroy()}})).$mount();if(e.needProgressBarOnProductsUpdating){e.productUpdaterPopup=new n.Popup({content:s.$el,width:310,overlay:true,padding:17,animation:"fading-slide",angle:false});e.productUpdaterPopup.show()}}))},makeReservationSettings:function t(){var e={};var n=C(this.reservationEntities),i;try{for(n.s();!(i=n.n()).done;){var s=i.value;e[s.code]=s.settings.values}}catch(t){n.e(t)}finally{n.f()}return e},cancel:function t(){this.close()},close:function t(){this.slider.close()},getReservationSettingsHint:function t(){return this.getHintContentWrapped(e.Loc.getMessage("CRM_CFG_C_SETTINGS_RESERVATION_SETTINGS_HINT"),S,"reservation")},getProductsSettingsHint:function t(){return this.getHintContent(e.Loc.getMessage("CRM_CFG_C_SETTINGS_PRODUCTS_SETTINGS_HINT"),S,"products")},getCanBuyZeroHint:function t(){return this.getHintContent(e.Loc.getMessage("CRM_CFG_C_SETTINGS_CAN_BUY_ZERO_HINT"),S,"products")},getCanBuyZeroInDocsHint:function t(){return this.getHintContent("\n\t\t\t\t\t".concat(e.Loc.getMessage("CRM_CFG_C_SETTINGS_CAN_BUY_ZERO_IN_DOCS_HINT"),"\n\t\t\t\t\t<br/><br/>\n\t\t\t\t\t").concat(e.Loc.getMessage("CRM_CFG_C_SETTINGS_CAN_BUY_ZERO_IN_DOCS_HINT_DOC_TYPE_RESTRICTIONS"),"\n\t\t\t\t\t<br/>\n\t\t\t\t"),S,"products")},getHintContent:function t(n,i,s){return"\n\t\t\t\t".concat(n,"\n\t\t\t\t<br/>\n\t\t\t\t").concat(this.getDocumentationLink(e.Loc.getMessage("CRM_CFG_C_SETTINGS_DETAILS"),i,s),"\n\t\t\t")},getHintContentWrapped:function t(e,n,i){return this.getDocumentationLink(e,n,i)},getDocumentationLink:function t(e,n,i){return'\n\t\t\t\t<a href="javascript:void(0);" onclick="if (top.BX.Helper){top.BX.Helper.show(\'redirect=detail&code='.concat(n,"#").concat(i,'\');}" class="catalog-settings-helper-link">\n\t\t\t\t\t').concat(e,"\n\t\t\t\t</a>\n\t\t\t")},showSettingsMenu:function t(i){var s=this;this.settingsMenu=new n.Menu({bindElement:i.target,angle:true,offsetLeft:20,items:[{text:e.Loc.getMessage("CRM_CFG_C_SETTINGS_TURN_INVENTORY_CONTROL_OFF"),onclick:function t(){s.settingsMenu.destroy();s.openStoreControlMaster("disable")}}]});this.settingsMenu.show()}},mounted:function t(){BX.UI.Hint.init(this.$el)},template:'\n\t\t<div class="catalog-settings-wrapper">\n\t\t\t<form>\n\t\t\t\t<div class="ui-slider-section">\n\t\t\t\t\t<div class="ui-slider-content-box">\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tstyle="display: flex; align-items: center"\n\t\t\t\t\t\t\tclass="ui-slider-heading-4"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_TITLE}}\t\t\n\t\t\t\t\t\t\t<div v-if="isStoreControlUsed" class="catalog-settings-main-header-feedback-container">\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t@click.prevent="showSettingsMenu"\n\t\t\t\t\t\t\t\t\tclass="ui-toolbar-right-buttons"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<button class="ui-btn ui-btn-light-border ui-btn-icon-setting ui-btn-themes"></button>\n\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="ui-slider-inner-box">\n\t\t\t\t\t\t\t<p class="ui-slider-paragraph-2">\n\t\t\t\t\t\t\t\t{{description}}\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="catalog-settings-button-container">\n\t\t\t\t\t\t\t<template v-if="isStoreControlUsed">\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t@click="openStoreControlMaster(\'edit\')"\n\t\t\t\t\t\t\t\t\tclass="ui-btn ui-btn-md ui-btn-light-border ui-btn-width"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_OPEN_SETTINGS}}\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t@click="openStoreControlMaster()"\n\t\t\t\t\t\t\t\t\tclass="ui-btn ui-btn-success"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_TURN_INVENTORY_CONTROL_ON}}\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</template>\t\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="catalog-settings-main-settings">\n\t\t\t\t\t<div\n\t\t\t\t\t\tv-if="isReservationUsed"\n\t\t\t\t\t\tclass="ui-slider-section"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div class="ui-slider-heading-4">\n\t\t\t\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_RESERVATION_SETTINGS}}\n\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\tclass="ui-hint"\n\t\t\t\t\t\t\t\tdata-hint-html=""\n\t\t\t\t\t\t\t\tdata-hint-interactivity=""\n\t\t\t\t\t\t\t\t:data-hint="getReservationSettingsHint()"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<span class="ui-hint-icon"></span>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="catalog-settings-editor-content-block">\n\t\t\t\t\t\t\t<div class="ui-ctl-label-text">\n\t\t\t\t\t\t\t\t<label>{{loc.CRM_CFG_C_SETTINGS_RESERVATION_ENTITY}}</label>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="ui-ctl ui-ctl-after-icon ui-ctl-dropdown ui-ctl-disabled ui-ctl-w100">\n\t\t\t\t\t\t\t\t\x3c!--<div class="ui-ctl-after ui-ctl-icon-angle"></div>--\x3e\n\t\t\t\t\t\t\t\t<select\n\t\t\t\t\t\t\t\t\tv-model="currentReservationEntityCode"\n\t\t\t\t\t\t\t\t\tclass="ui-ctl-element"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<option\n\t\t\t\t\t\t\t\t\t\tv-for="reservationEntity in reservationEntities"\n\t\t\t\t\t\t\t\t\t\t:value="reservationEntity.code"\n\t\t\t\t\t\t\t\t\t\t:disabled="reservationEntity.code !== \'deal\'"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{{reservationEntity.name}}\n\t\t\t\t\t\t\t\t\t</option>\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<reservation\n\t\t\t\t\t\t\tv-for="(reservationEntity, index) in reservationEntities"\n\t\t\t\t\t\t\tv-show="reservationEntity.code === currentReservationEntityCode"\n\t\t\t\t\t\t\t:key="reservationEntity.code"\n\t\t\t\t\t\t\t:settings="reservationEntity.settings"\n\t\t\t\t\t\t\t@change="onReservationSettingsValuesChanged($event, index)"\n\t\t\t\t\t\t></reservation>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="ui-slider-section">\n\t\t\t\t\t\t<div class="ui-slider-heading-4">\n\t\t\t\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_PRODUCTS_SETTINGS}}\n\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\tclass="ui-hint"\n\t\t\t\t\t\t\t\tdata-hint-html=""\n\t\t\t\t\t\t\t\tdata-hint-interactivity=""\n\t\t\t\t\t\t\t\t:data-hint="getProductsSettingsHint()"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<span class="ui-hint-icon"></span>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tv-if="isCommonProductProcessingEnabled"\n\t\t\t\t\t\t\tclass="catalog-settings-editor-checkbox-content-block"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div class="ui-ctl ui-ctl-checkbox ui-ctl-w100">\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\tv-model="productCardSliderEnabled"\n\t\t\t\t\t\t\t\t\t@click="markAsChanged"\n\t\t\t\t\t\t\t\t\tid="product_card_slider_enabled"\n\t\t\t\t\t\t\t\t\ttype="checkbox"\n\t\t\t\t\t\t\t\t\tclass="ui-ctl-element"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<label for="product_card_slider_enabled" class="ui-ctl-label-text">\n\t\t\t\t\t\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_PRODUCT_CARD_ENABLE_NEW_CARD}}\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="catalog-settings-editor-checkbox-content-block">\n\t\t\t\t\t\t\t<div class="ui-ctl ui-ctl-checkbox ui-ctl-w100">\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\tv-model="defaultSubscribe"\n\t\t\t\t\t\t\t\t\t@click="markAsChanged"\n\t\t\t\t\t\t\t\t\tid="default_subscribe"\n\t\t\t\t\t\t\t\t\ttype="checkbox"\n\t\t\t\t\t\t\t\t\tclass="ui-ctl-element"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<label for="default_subscribe" class="ui-ctl-label-text">\n\t\t\t\t\t\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_PRODUCTS_SETTINGS_DEFAULT_SUBSCRIBE}}\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="catalog-settings-editor-checkbox-content-block">\n\t\t\t\t\t\t\t<div class="ui-ctl ui-ctl-checkbox ui-ctl-w100">\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\tv-model="defaultProductVatIncluded"\n\t\t\t\t\t\t\t\t\t@click="markAsChanged"\n\t\t\t\t\t\t\t\t\tid="default_product_vat_included"\n\t\t\t\t\t\t\t\t\ttype="checkbox"\n\t\t\t\t\t\t\t\t\tclass="ui-ctl-element"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<label for="default_product_vat_included" class="ui-ctl-label-text">\n\t\t\t\t\t\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_PRODUCT_CARD_SET_VAT_IN_PRICE_FOR_NEW_PRODUCTS}}\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tv-if="isDefaultQuantityTraceVisible"\n\t\t\t\t\t\t\tclass="catalog-settings-editor-checkbox-content-block"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div class="ui-ctl ui-ctl-checkbox ui-ctl-w100">\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\tv-model="defaultQuantityTrace"\n\t\t\t\t\t\t\t\t\t@click="markAsChanged"\n\t\t\t\t\t\t\t\t\tid="default_quantity_trace"\n\t\t\t\t\t\t\t\t\ttype="checkbox"\n\t\t\t\t\t\t\t\t\tclass="ui-ctl-element"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<label for="default_quantity_trace" class="ui-ctl-label-text">\n\t\t\t\t\t\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_PRODUCTS_DEFAULT_QUANTITY_TRACE}}\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div v-if="isCanBuyZeroInDocsVisible" class="catalog-settings-editor-checkbox-content-block">\n\t\t\t\t\t\t\t<div class="ui-ctl ui-ctl-checkbox ui-ctl-w100">\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t:checked="defaultCanBuyZero"\n\t\t\t\t\t\t\t\t\tdisabled="disabled"\n\t\t\t\t\t\t\t\t\ttype="checkbox"\n\t\t\t\t\t\t\t\t\tclass="ui-ctl-element"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<label class="ui-ctl-label-text">\n\t\t\t\t\t\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_PRODUCTS_SETTINGS_DEFAULT_CAN_BUY_ZERO_IN_DOCS}}\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\tclass="ui-hint"\n\t\t\t\t\t\t\t\t\tdata-hint-html=""\n\t\t\t\t\t\t\t\t\tdata-hint-interactivity=""\n\t\t\t\t\t\t\t\t\t:data-hint="getCanBuyZeroInDocsHint()"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<span class="ui-hint-icon"></span>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tv-if="isReservationUsed"\n\t\t\t\t\t\t\tclass="catalog-settings-editor-checkbox-content-block"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div class="ui-ctl ui-ctl-checkbox ui-ctl-w100">\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\tv-model="defaultCanBuyZero"\n\t\t\t\t\t\t\t\t\t@click="markAsChanged"\n\t\t\t\t\t\t\t\t\tid="default_can_buy_zero"\n\t\t\t\t\t\t\t\t\ttype="checkbox"\n\t\t\t\t\t\t\t\t\tclass="ui-ctl-element"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<label for="default_can_buy_zero" class="ui-ctl-label-text">\n\t\t\t\t\t\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_PRODUCTS_SETTINGS_DEFAULT_CAN_BUY_ZERO_V2}}\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\tclass="ui-hint"\n\t\t\t\t\t\t\t\t\tdata-hint-html=""\n\t\t\t\t\t\t\t\t\tdata-hint-interactivity=""\n\t\t\t\t\t\t\t\t\t:data-hint="getCanBuyZeroHint()"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<span class="ui-hint-icon"></span>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</form>\n\t\t\t<div\n\t\t\t\t:class="buttonsPanelClass"\n\t\t\t>\n\t\t\t\t<div class="ui-button-panel ui-button-panel-align-center ">\n\t\t\t\t\t<button\n\t\t\t\t\t\t@click="save"\n\t\t\t\t\t\t:class="saveButtonClasses"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_SAVE_BUTTON}}\t\t\t\t\t\n\t\t\t\t\t</button>\n\t\t\t\t\t<a\n\t\t\t\t\t\t@click="cancel"\n\t\t\t\t\t\tclass="ui-btn ui-btn-link"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_CANCEL_BUTTON}}\t\t\t\t\t\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div style="height: 65px;"></div>\n\t\t</div>\n\t'});function y(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function m(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?y(Object(n),!0).forEach((function(e){babelHelpers.defineProperty(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var E=function(){function t(){babelHelpers.classCallCheck(this,t)}babelHelpers.createClass(t,null,[{key:"open",value:function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return new Promise((function(t){return BX.SidePanel.Instance.open(g.url,m({width:1e3,allowChangeHistory:false,cacheable:false},e))}))}}]);return t}();t.App=T;t.Slider=E})(this.BX.Crm.Config.Catalog=this.BX.Crm.Config.Catalog||{},BX,BX.Main,BX.UI,BX.Catalog.StoreUse,BX);
//# sourceMappingURL=catalog.bundle.map.js