{"version":3,"file":"catalog.bundle.js","sources":["../src/loc.js","../src/reservation.js","../src/product-updater/updater.js","../src/product-updater/template.js","../src/const.js","../src/app.js","../src/slider.js"],"sourcesContent":["import {Vue} from 'ui.vue';\n\nexport default\n{\n\tcomputed: {\n\t\tloc()\n\t\t{\n\t\t\treturn Vue.getFilteredPhrases('CRM_CFG_C_SETTINGS_');\n\t\t}\n\t}\n}\n","export default {\n\tprops: {\n\t\tsettings: {\n\t\t\ttype: Object,\n\t\t\trequired: true\n\t\t},\n\t},\n\tdata ()\n\t{\n\t\tlet result = {};\n\n\t\tfor (const element of this.settings.scheme)\n\t\t{\n\t\t\tresult[element.code] = this.settings.values[element.code];\n\t\t}\n\n\t\treturn result;\n\t},\n\tmethods: {\n\t\tonChanged()\n\t\t{\n\t\t\tthis.$emit('change', this.$data);\n\t\t},\n\t\tgetWrapperClass(type)\n\t\t{\n\t\t\treturn (type === 'option')\n\t\t\t\t? {\n\t\t\t\t\t'catalog-settings-editor-checkbox-content-block': true,\n\t\t\t\t}\n\t\t\t\t: {\n\t\t\t\t\t'catalog-settings-editor-content-block': true,\n\t\t\t\t};\n\t\t}\n\t},\n\tmounted()\n\t{\n\t\tBX.UI.Hint.init(this.$el);\n\t},\n\ttemplate: `\n\t\t<div>\n\t\t\t<div\n\t\t\t\tv-for=\"setting in settings.scheme\"\n\t\t\t\t:class=\"getWrapperClass(setting.type)\"\n\t\t\t>\n\t\t\t\t<template v-if=\"setting.type === 'list'\">\n\t\t\t\t\t<div class=\"ui-ctl-label-text\">\n\t\t\t\t\t\t<label>{{setting.name}}</label>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"ui-ctl ui-ctl-after-icon ui-ctl-dropdown ui-ctl-w100\">\n\t\t\t\t\t\t<div class=\"ui-ctl-after ui-ctl-icon-angle\"></div>\n\t\t\t\t\t\t<select\n\t\t\t\t\t\t\tv-model=\"$data[setting.code]\"\n\t\t\t\t\t\t\t@change=\"onChanged\"\n\t\t\t\t\t\t\t:disabled=\"setting.disabled\"\n\t\t\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<option v-for=\"value in setting.values\" :value=\"value.code\">\n\t\t\t\t\t\t\t\t{{value.name}}\n\t\t\t\t\t\t\t</option>\t\t\t\t\t\t\n\t\t\t\t\t\t</select>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t\t<template v-if=\"setting.type === 'text'\">\n\t\t\t\t\t<div class=\"ui-ctl-label-text\">\n\t\t\t\t\t\t<label>{{setting.name}}</label>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"ui-ctl ui-ctl-textbox ui-ctl-w100\">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tv-model=\"$data[setting.code]\"\n\t\t\t\t\t\t\t@change=\"onChanged\"\n\t\t\t\t\t\t\t:disabled=\"setting.disabled\"\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t\t>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t\t<template v-if=\"setting.type === 'int'\">\n\t\t\t\t\t<div class=\"ui-ctl-label-text\">\n\t\t\t\t\t\t<label>{{setting.name}}</label>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"ui-ctl ui-ctl-textbox ui-ctl-w100\">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tv-model=\"$data[setting.code]\"\n\t\t\t\t\t\t\t@input=\"onChanged\"\n\t\t\t\t\t\t\t:disabled=\"setting.disabled\"\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t\t>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t\t<template v-if=\"setting.type === 'option'\">\n\t\t\t\t\t<div class=\"ui-ctl ui-ctl-checkbox ui-ctl-w100\">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tv-model=\"$data[setting.code]\"\n\t\t\t\t\t\t\t@change=\"onChanged\"\n\t\t\t\t\t\t\t:id=\"setting.code + '_' + $vnode.key\"\n\t\t\t\t\t\t\t:disabled=\"setting.disabled\"\n\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t<label\n\t\t\t\t\t\t\t:for=\"setting.code + '_' + $vnode.key\"\n\t\t\t\t\t\t\tclass=\"ui-ctl-label-text\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{setting.name}}\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tv-if=\"setting.description\"\n\t\t\t\t\t\t\tclass=\"ui-hint\"\n\t\t\t\t\t\t\t:data-hint=\"setting.description\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span class=\"ui-hint-icon\"></span>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t</div>\n\t\t</div>\n\t`\n}\n","class ProductSettingsUpdater\n{\n\tconstructor(params)\n\t{\n\t\tthis.url = '/bitrix/tools/catalog/product_settings.php';\n\t\tthis.stepOptions = {\n\t\t\tajaxSessionID: '',\n\t\t\tmaxExecutionTime: 30,\n\t\t\tmaxOperationCounter: 10,\n\t\t};\n\t\tthis.finish = false;\n\t\tthis.currentState = {\n\t\t\tcounter: 0,\n\t\t\toperationCounter: 0,\n\t\t\terrorCounter: 0,\n\t\t\tlastID: 0,\n\t\t};\n\t\tthis.ajaxParams = {\n\t\t\toperation: 'Y',\n\t\t};\n\t\tthis.iblocks = [];\n\t\tthis.iblockIndex = -1;\n\n\t\tthis.stepOptions.ajaxSessionID = 'productSettings';\n\t\tthis.currentState.counter = 0;\n\n\t\tthis.events = params.events;\n\t\tthis.settings = params.settings;\n\t}\n\n\tnextStep()\n\t{\n\t\tfor (let key in this.stepOptions)\n\t\t{\n\t\t\tif (this.stepOptions.hasOwnProperty(key))\n\t\t\t{\n\t\t\t\tthis.ajaxParams[key] = this.stepOptions[key];\n\t\t\t}\n\t\t}\n\t\tfor (let key in this.currentState)\n\t\t{\n\t\t\tif (this.currentState.hasOwnProperty(key))\n\t\t\t{\n\t\t\t\tthis.ajaxParams[key] = this.currentState[key];\n\t\t\t}\n\t\t}\n\n\t\tthis.ajaxParams.sessid = BX.bitrix_sessid();\n\t\tthis.ajaxParams.lang = BX.message('LANGUAGE_ID');\n\t\tBX.ajax.loadJSON(\n\t\t\tthis.url,\n\t\t\tthis.ajaxParams,\n\t\t\tBX.proxy(this.nextStepResult, this)\n\t\t);\n\t}\n\n\tnextStepResult(result)\n\t{\n\t\tif (BX.type.isPlainObject(result))\n\t\t{\n\t\t\tthis.currentState.lastID = result.lastID;\n\t\t\tthis.stepOptions.maxOperationCounter = result.maxOperationCounter;\n\n\t\t\tthis.currentState.operationCounter = parseInt(result.operationCounter, 10);\n\t\t\tif (isNaN(this.currentState.operationCounter))\n\t\t\t{\n\t\t\t\tthis.currentState.operationCounter = 0;\n\t\t\t}\n\n\t\t\tthis.currentState.errorCounter = parseInt(result.errorCounter, 10);\n\t\t\tif (isNaN(this.currentState.errorCounter))\n\t\t\t{\n\t\t\t\tthis.currentState.errorCounter = 0;\n\t\t\t}\n\n\t\t\tif (this.events.onProgress)\n\t\t\t{\n\t\t\t\tthis.events.onProgress({\n\t\t\t\t\tallCnt: result.allCounter,\n\t\t\t\t\tdoneCnt: result.allOperationCounter,\n\t\t\t\t\tcurrentIblockName: this.iblocks[this.iblockIndex].NAME,\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (this.finish)\n\t\t\t{\n\t\t\t\tthis.finishOperation();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.checkOperation(result.finishOperation);\n\t\t\t}\n\t\t}\n\t}\n\n\tfinishOperation()\n\t{\n\t\tthis.currentState.operationCounter = 0;\n\t\tthis.currentState.errorCounter = 0;\n\t\tthis.currentState.lastID = 0;\n\t\tthis.finish = false;\n\n\t\tif (this.events.onComplete)\n\t\t{\n\t\t\tthis.events.onComplete();\n\t\t}\n\t}\n\n\tstartOperation()\n\t{\n\t\tBX.ajax.loadJSON(\n\t\t\tthis.url,\n\t\t\t{\n\t\t\t\tsessid: BX.bitrix_sessid(),\n\t\t\t\tchangeSettings: 'Y',\n\t\t\t\t...this.settings\n\t\t\t},\n\t\t\tBX.proxy(this.changeSettingsResult, this)\n\t\t);\n\t}\n\n\tchangeSettingsResult(result)\n\t{\n\t\tif (!BX.type.isPlainObject(result))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (result.success === 'Y')\n\t\t{\n\t\t\tthis.loadIblockList();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.stopOperation();\n\t\t}\n\t}\n\n\tstopOperation()\n\t{\n\t\tthis.finish = true;\n\t}\n\n\tcheckIblockIndex()\n\t{\n\t\treturn !(\n\t\t\tthis.iblocks.length === 0\n\t\t\t|| this.iblockIndex < 0\n\t\t\t|| this.iblockIndex >= this.iblocks.length\n\t\t);\n\t}\n\n\tloadIblockList()\n\t{\n\t\tBX.ajax.loadJSON(\n\t\t\tthis.url,\n\t\t\t{\n\t\t\t\tsessid: BX.bitrix_sessid(),\n\t\t\t\tgetIblock: 'Y'\n\t\t\t},\n\t\t\t(result) => {\n\t\t\t\tif (BX.type.isArray(result))\n\t\t\t\t{\n\t\t\t\t\tthis.iblocks = result;\n\t\t\t\t\tif (this.iblocks.length > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.iblockIndex = 0;\n\t\t\t\t\t\tthis.iblockReindex();\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.stopOperation();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t}\n\n\tiblockReindex()\n\t{\n\t\tif (this.finish || !this.checkIblockIndex())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.initStep();\n\t\tthis.nextStep();\n\t}\n\n\tinitStep()\n\t{\n\t\tthis.currentState.iblockId = this.iblocks[this.iblockIndex].ID;\n\t\tthis.currentState.counter = this.iblocks[this.iblockIndex].COUNT;\n\t\tthis.currentState.operationCounter = 0;\n\t\tthis.currentState.errorCounter = 0;\n\t\tthis.currentState.lastID = 0;\n\t}\n\n\tcheckOperation(result)\n\t{\n\t\tif (!!result)\n\t\t{\n\t\t\tthis.iblockIndex++;\n\t\t\tif (this.iblockIndex >= this.iblocks.length || this.currentState.errorCounter > 0)\n\t\t\t{\n\t\t\t\tthis.finishOperation();\n\t\t\t\tif (this.currentState.errorCounter == 0)\n\t\t\t\t{\n\t\t\t\t\tthis.finalRequest();\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.initStep();\n\t\t\t\tthis.nextStep();\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.nextStep();\n\t\t}\n\t}\n\n\tfinalRequest()\n\t{\n\t\tlet iblockList = [];\n\n\t\tif (this.iblocks.length > 0)\n\t\t{\n\t\t\tfor (let i = 0; i < this.iblocks.length; i++)\n\t\t\t{\n\t\t\t\tiblockList[iblockList.length] = this.iblocks[i].ID;\n\t\t\t}\n\n\t\t\tBX.ajax.get(\n\t\t\t\tthis.url,\n\t\t\t\t{\n\t\t\t\t\tsessid: BX.bitrix_sessid(),\n\t\t\t\t\tfinalRequest: 'Y',\n\t\t\t\t\tiblockList,\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t}\n}\n\nexport {\n\tProductSettingsUpdater\n};\n","import {Vue} from 'ui.vue';\nimport {ProductSettingsUpdater} from './updater';\nimport LocMixin from '../loc';\n\nexport default Vue.extend({\n\tmixins: [LocMixin],\n\tprops: {\n\t\tsettings: {\n\t\t\ttype: Object,\n\t\t\trequired: true\n\t\t},\n\t},\n\tdata ()\n\t{\n\t\treturn {\n\t\t\tcurrentIblockName: null,\n\t\t\tallCnt: 0,\n\t\t\tdoneCnt: 0,\n\t\t};\n\t},\n\tcomputed: {\n\t\tprogressStyles()\n\t\t{\n\t\t\tlet width = 0;\n\t\t\tif (this.allCnt > 0)\n\t\t\t{\n\t\t\t\twidth = Math.round((this.doneCnt / this.allCnt) * 100);\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\twidth: width + '%'\n\t\t\t};\n\t\t}\n\t},\n\tcreated()\n\t{\n\t\t(new ProductSettingsUpdater({\n\t\t\tsettings: this.settings,\n\t\t\tevents: {\n\t\t\t\tonProgress: (data) => {\n\t\t\t\t\tthis.currentIblockName = data.currentIblockName;\n\t\t\t\t\tthis.allCnt = data.allCnt;\n\t\t\t\t\tthis.doneCnt = data.doneCnt;\n\t\t\t\t},\n\t\t\t\tonComplete: () => {\n\t\t\t\t\tthis.$emit('complete');\n\t\t\t\t},\n\t\t\t}\n\t\t})).startOperation();\n\t},\n\ttemplate: `\n\t\t<div >\n\t\t\t<div class=\"ui-progressbar ui-progressbar-column\">\n\t\t\t\t<div style=\"font-weight: bold;\" class=\"ui-progressbar-text-before\">\n\t\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_PRODUCT_SETTINGS_UPDATE_TITLE}}\t\t\t\t\n\t\t\t\t</div>\n\t\t\t\t<div class=\"ui-progressbar-track\">\n\t\t\t\t\t<div :style=\"progressStyles\" class=\"ui-progressbar-bar\"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"ui-progressbar-text-after\">\n\t\t\t\t\t{{doneCnt}} {{loc.CRM_CFG_C_SETTINGS_OUT_OF}} {{allCnt}}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div style=\"color: rgb(83, 92, 105); font-size: 12px;\">\n\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_PRODUCT_SETTINGS_UPDATE_WAIT}}\n\t\t\t\t<div\n\t\t\t\t\tv-show=\"currentIblockName\"\n\t\t\t\t\tstyle=\"padding-top: 10px;\"\n\t\t\t\t>\n\t\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_PRODUCT_SETTINGS_CURRENT_CATALOG}}: {{currentIblockName}}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`\n});\n","export const Const = Object.freeze({\n\turl: '/crm/configs/catalog/'\n});\n","import LocMixin from './loc';\nimport Reservation from './reservation';\nimport {Loc, ajax, Tag, Extension, Event} from 'main.core';\nimport {Menu, Popup} from 'main.popup';\nimport {Button} from 'ui.buttons';\nimport {Slider} from 'catalog.store-use'\nimport {Vue} from 'ui.vue';\nimport ProductUpdater from './product-updater/template';\nimport {Const} from './const';\nimport 'ui.notification';\nimport 'ui.design-tokens';\nimport '../css/app.css';\n\nconst HELP_ARTICLE_ID = 15706692;\n\nexport default Vue.extend({\n\tmixins: [LocMixin],\n\tcomponents: {\n\t\t'reservation': Reservation,\n\t},\n\tprops: {\n\t\tinitData: {\n\t\t\ttype: Object,\n\t\t\trequired: true\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\t/**\n\t\t\t * State\n\t\t\t */\n\t\t\tisSaving: false,\n\t\t\tisChanged: false,\n\t\t\tcurrentReservationEntityCode: null,\n\t\t\t/**\n\t\t\t *\n\t\t\t */\n\t\t\tisStoreControlUsed: null,\n\t\t\tproductsCnt: null,\n\t\t\t/**\n\t\t\t * Reservation settings\n\t\t\t */\n\t\t\treservationEntities: [],\n\t\t\t/**\n\t\t\t * Default products settings\n\t\t\t */\n\t\t\tinitDefaultQuantityTrace: null,\n\t\t\tinitDefaultCanBuyZero: null,\n\t\t\tinitDefaultSubscribe: null,\n\t\t\tinitCheckRightsOnDecreaseStoreAmount: null,\n\t\t\tdefaultQuantityTrace: null,\n\t\t\tdefaultCanBuyZero: null,\n\t\t\tdefaultSubscribe: null,\n\t\t\tcheckRightsOnDecreaseStoreAmount: null,\n\t\t\t/**\n\t\t\t * Product card\n\t\t\t */\n\t\t\tproductCardSliderEnabled: null,\n\t\t\tisCanEnableProductCardSlider: false,\n\t\t\tisBitrix24: false,\n\t\t\tdefaultProductVatIncluded: null,\n\t\t};\n\t},\n\tcreated()\n\t{\n\t\tthis.initialize(this.initData);\n\t\tthis.productUpdaterPopup = null;\n\t\tthis.settingsMenu = null;\n\n\t\tlet sliderUrl = Const.url;\n\t\tif (this.configCatalogSource)\n\t\t{\n\t\t\tsliderUrl += '?configCatalogSource=' + this.configCatalogSource;\n\t\t}\n\t\tthis.slider = BX.SidePanel.Instance.getSlider(sliderUrl);\n\t},\n\tcomputed: {\n\t\thasAccessToReservationSettings()\n\t\t{\n\t\t\tif (this.initData.hasAccessToReservationSettings !== undefined)\n\t\t\t{\n\t\t\t\treturn this.initData.hasAccessToReservationSettings === true;\n\t\t\t}\n\n\t\t\treturn true;\n\t\t},\n\t\thasAccessToCatalogSettings()\n\t\t{\n\t\t\tif (this.initData.hasAccessToCatalogSettings !== undefined)\n\t\t\t{\n\t\t\t\treturn this.initData.hasAccessToCatalogSettings === true;\n\t\t\t}\n\n\t\t\treturn true;\n\t\t},\n\t\tisCanChangeOptionCanByZero()\n\t\t{\n\t\t\treturn Extension.getSettings('crm.config.catalog')?.isCanChangeOptionCanByZero === true;\n\t\t},\n\t\tisReservationUsed()\n\t\t{\n\t\t\treturn (\n\t\t\t\tthis.isStoreControlUsed\n\t\t\t\t|| this.isReservationUsageViaQuantityTrace\n\t\t\t);\n\t\t},\n\t\tisCanBuyZeroInDocsVisible()\n\t\t{\n\t\t\treturn this.isStoreControlUsed;\n\t\t},\n\t\tisDefaultQuantityTraceVisible()\n\t\t{\n\t\t\treturn this.isReservationUsageViaQuantityTrace;\n\t\t},\n\t\tisReservationUsageViaQuantityTrace()\n\t\t{\n\t\t\treturn (\n\t\t\t\t!this.isStoreControlUsed\n\t\t\t\t&& this.initDefaultQuantityTrace\n\t\t\t);\n\t\t},\n\t\thasProductSettingsChanged()\n\t\t{\n\t\t\treturn !(\n\t\t\t\tthis.initDefaultQuantityTrace === this.defaultQuantityTrace\n\t\t\t\t&& this.initDefaultCanBuyZero === this.defaultCanBuyZero\n\t\t\t\t&& this.initDefaultSubscribe === this.defaultSubscribe\n\t\t\t\t&& this.initCheckRightsOnDecreaseStoreAmount === this.checkRightsOnDecreaseStoreAmount\n\t\t\t);\n\t\t},\n\t\tneedProgressBarOnProductsUpdating()\n\t\t{\n\t\t\treturn this.productsCnt > 500;\n\t\t},\n\t\tsaveButtonClasses()\n\t\t{\n\t\t\treturn {\n\t\t\t\t'ui-btn': true,\n\t\t\t\t'ui-btn-success': true,\n\t\t\t\t'ui-btn-wait': this.isSaving,\n\t\t\t};\n\t\t},\n\t\tbuttonsPanelClass()\n\t\t{\n\t\t\treturn {\n\t\t\t\t'ui-button-panel-wrapper': true,\n\t\t\t\t'ui-pinner': true,\n\t\t\t\t'ui-pinner-bottom': true,\n\t\t\t\t'ui-pinner-full-width': true,\n\t\t\t\t'ui-button-panel-wrapper-hide': !this.isChanged,\n\t\t\t};\n\t\t},\n\t\tdescription()\n\t\t{\n\t\t\treturn this.isStoreControlUsed\n\t\t\t\t? Loc.getMessage('CRM_CFG_C_SETTINGS_STORE_CONTROL_ACTIVE')\n\t\t\t\t: Loc.getMessage('CRM_CFG_C_SETTINGS_STORE_CONTROL_NOT_ACTIVE');\n\t\t}\n\t},\n\twatch: {\n\t\tdefaultQuantityTrace(newVal, oldVal)\n\t\t{\n\t\t\tconst showWarn = this.isDefaultQuantityTraceVisible && (newVal === false && oldVal === true);\n\t\t\tif (!showWarn)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst warnPopup = new Popup(null, null, {\n\t\t\t\tevents: {\n\t\t\t\t\tonPopupClose: () => warnPopup.destroy()\n\t\t\t\t},\n\t\t\t\tcontent: Tag.render`\n\t\t\t\t\t<div class=\"catalog-settings-popup-content\">\n\t\t\t\t\t\t<h3>\n\t\t\t\t\t\t\t${Loc.getMessage('CRM_CFG_C_SETTINGS_TURN_OFF_QUANTITY_TRACE_TITLE')}\n\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t<div class=\"catalog-settings-popup-text\">\n\t\t\t\t\t\t\t${Loc.getMessage('CRM_CFG_C_SETTINGS_TURN_OFF_QUANTITY_TRACE_TEXT')}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t`,\n\t\t\t\tmaxWidth: 500,\n\t\t\t\toverlay: true,\n\t\t\t\tbuttons: [\n\t\t\t\t\tnew Button({\n\t\t\t\t\t\ttext : Loc.getMessage('CRM_CFG_C_SETTINGS_CLOSE'),\n\t\t\t\t\t\tcolor: Button.Color.PRIMARY,\n\t\t\t\t\t\tonclick: () => warnPopup.close()\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t});\n\t\t\twarnPopup.show();\n\t\t},\n\t},\n\tmethods: {\n\t\tmarkAsChanged()\n\t\t{\n\t\t\tthis.isChanged = true;\n\t\t},\n\t\tonEnableProductCardCheckboxClick()\n\t\t{\n\t\t\tif (!this.productCardSliderEnabled && this.isBitrix24)\n\t\t\t{\n\t\t\t\tthis.askToEnableProductCardSlider();\n\t\t\t}\n\n\t\t\tthis.markAsChanged();\n\t\t},\n\t\taskToEnableProductCardSlider()\n\t\t{\n\t\t\tconst askPopup = new Popup(null, null, {\n\t\t\t\tevents: {\n\t\t\t\t\tonPopupClose: () => askPopup.destroy(),\n\t\t\t\t\tonPopupShow: () => {\n\t\t\t\t\t\tconst helpdeskLink = document.getElementById('catalog-settings-new-productcard-popup-helpdesk');\n\t\t\t\t\t\tif (helpdeskLink)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tEvent.bind(helpdeskLink, 'click', () => top.BX.Helper.show('redirect=detail&code=11657084'));\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tcontent: Tag.render`\n\t\t\t\t\t<div class=\"catalog-settings-new-productcard-popup-content\">\n\t\t\t\t\t\t${Loc.getMessage('CRM_CFG_C_SETTINGS_PRODUCT_CARD_ENABLE_NEW_CARD_ASK_TEXT')}\n\t\t\t\t\t</div>\n\t\t\t\t`,\n\t\t\t\tclassName: 'catalog-settings-new-productcard-popup',\n\t\t\t\ttitleBar: Loc.getMessage('CRM_CFG_C_SETTINGS_PRODUCT_CARD_ENABLE_NEW_CARD_ASK_TITLE'),\n\t\t\t\tmaxWidth: 800,\n\t\t\t\toverlay: true,\n\t\t\t\tbuttons: [\n\t\t\t\t\tnew Button({\n\t\t\t\t\t\ttext : Loc.getMessage('CRM_CFG_C_SETTINGS_PRODUCT_CARD_ENABLE_NEW_CARD_ASK_DISAGREE'),\n\t\t\t\t\t\tcolor: Button.Color.PRIMARY,\n\t\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\t\tthis.productCardSliderEnabled = false;\n\t\t\t\t\t\t\taskPopup.close();\n\t\t\t\t\t\t},\n\t\t\t\t\t}),\n\t\t\t\t\tnew Button({\n\t\t\t\t\t\ttext : Loc.getMessage('CRM_CFG_C_SETTINGS_PRODUCT_CARD_ENABLE_NEW_CARD_ASK_AGREE'),\n\t\t\t\t\t\tonclick: () => askPopup.close(),\n\t\t\t\t\t}),\n\t\t\t\t]\n\t\t\t});\n\t\t\taskPopup.show();\n\t\t},\n\t\topenStoreControlMaster(mode = '')\n\t\t{\n\t\t\tlet sliderUrl = '/bitrix/components/bitrix/catalog.warehouse.master.clear/slider.php?mode=' + mode;\n\t\t\tif (this.configCatalogSource)\n\t\t\t{\n\t\t\t\tsliderUrl += '&inventoryManagementSource=' + this.configCatalogSource;\n\t\t\t}\n\t\t\tnew Slider().open(\n\t\t\t\tsliderUrl,\n\t\t\t\t{}\n\t\t\t)\n\t\t\t\t.then((slider) => {\n\t\t\t\t\tajax.runAction('catalog.config.isUsedInventoryManagement', {})\n\t\t\t\t\t\t.then((response) => {\n\t\t\t\t\t\t\tif (this.isStoreControlUsed !== response.data)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif (response.data === true)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tthis.close();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tthis.refresh();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (slider?.getData().get('isPresetApplied'))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.showMessage(Loc.getMessage('CRM_CFG_C_SETTINGS_SAVED_SUCCESSFULLY'));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t});\n\t\t},\n\t\trefresh()\n\t\t{\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tajax.runComponentAction('bitrix:crm.config.catalog.settings', 'initialize', {\n\t\t\t\t\tmode: 'class',\n\t\t\t\t\tjson: {}\n\t\t\t\t}).then((response) => {\n\t\t\t\t\tthis.initialize(response.data);\n\t\t\t\t\tresolve();\n\t\t\t\t}).catch((response) => {\n\t\t\t\t\tthis.showResponseErrors(response);\n\t\t\t\t\treject();\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\twait(ms)\n\t\t{\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tresolve();\n\t\t\t\t}, ms);\n\t\t\t});\n\t\t},\n\t\tshowResponseErrors(response)\n\t\t{\n\t\t\tthis.showMessage(\n\t\t\t\tresponse.errors.map(error => error.message).join(', ')\n\t\t\t);\n\t\t},\n\t\tshowMessage(message)\n\t\t{\n\t\t\ttop.BX.loadExt(\"ui.notification\").then(() => {\n\t\t\t\ttop.BX.UI.Notification.Center.notify({content: message,});\n\t\t\t});\n\t\t},\n\t\tinitialize(data)\n\t\t{\n\t\t\tthis.isStoreControlUsed = data.isStoreControlUsed;\n\t\t\tthis.productsCnt = data.productsCnt;\n\n\t\t\t/**\n\t\t\t * Reservation settings\n\t\t\t */\n\t\t\tthis.reservationEntities = data.reservationEntities;\n\t\t\tif (this.reservationEntities.length > 0) {\n\t\t\t\tthis.currentReservationEntityCode = this.reservationEntities[0].code;\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * Product settings\n\t\t\t */\n\t\t\tthis.initDefaultQuantityTrace = this.defaultQuantityTrace = data.defaultQuantityTrace;\n\t\t\tthis.initDefaultCanBuyZero = this.defaultCanBuyZero = data.defaultCanBuyZero;\n\t\t\tthis.initDefaultSubscribe = this.defaultSubscribe = data.defaultSubscribe;\n\t\t\tthis.initCheckRightsOnDecreaseStoreAmount = this.checkRightsOnDecreaseStoreAmount = data.checkRightsOnDecreaseStoreAmount;\n\n\t\t\t/**\n\t\t\t * Other settings\n\t\t\t */\n\t\t\tthis.defaultProductVatIncluded = data.defaultProductVatIncluded;\n\t\t\tthis.productCardSliderEnabled = data.productCardSliderEnabled;\n\t\t\tthis.isCanEnableProductCardSlider = data.isCanEnableProductCardSlider;\n\t\t\tthis.isBitrix24 = data.isBitrix24;\n\t\t\tthis.configCatalogSource = this.configCatalogSource ?? data.configCatalogSource;\n\n\t\t\tthis.isChanged = false;\n\t\t},\n\t\tonReservationSettingsValuesChanged(values, index)\n\t\t{\n\t\t\tthis.reservationEntities[index].settings.values = values;\n\t\t\tthis.markAsChanged();\n\t\t},\n\t\tsave()\n\t\t{\n\t\t\tif (this.isSaving)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.isSaving = true;\n\n\t\t\tthis.saveProductSettings().then(() => {\n\t\t\t\tajax.runComponentAction('bitrix:crm.config.catalog.settings', 'save', {\n\t\t\t\t\tmode: 'class',\n\t\t\t\t\tjson: {\n\t\t\t\t\t\tvalues: {\n\t\t\t\t\t\t\treservationSettings: this.makeReservationSettings(),\n\t\t\t\t\t\t\tproductCardSliderEnabled: this.productCardSliderEnabled,\n\t\t\t\t\t\t\tdefaultProductVatIncluded: this.defaultProductVatIncluded,\n\t\t\t\t\t\t\tcheckRightsOnDecreaseStoreAmount: this.checkRightsOnDecreaseStoreAmount,\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}).then((response) => {\n\t\t\t\t\tthis.isChanged = false;\n\t\t\t\t\tthis.isSaving = false;\n\t\t\t\t\tthis.showMessage(Loc.getMessage('CRM_CFG_C_SETTINGS_SAVED_SUCCESSFULLY'));\n\t\t\t\t\tthis.refresh()\n\t\t\t\t\t\t.then(() => this.wait(700))\n\t\t\t\t\t\t.then(() => this.close());\n\t\t\t\t}).catch((response) => {\n\t\t\t\t\tthis.isChanged = false;\n\t\t\t\t\tthis.isSaving = false;\n\t\t\t\t\tthis.showResponseErrors(response);\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tsaveProductSettings()\n\t\t{\n\t\t\tif (!this.hasProductSettingsChanged)\n\t\t\t{\n\t\t\t\treturn Promise.resolve();\n\t\t\t}\n\n\t\t\tconst productUpdaterOptions = {\n\t\t\t\tpropsData: {\n\t\t\t\t\tsettings: {\n\t\t\t\t\t\tdefault_quantity_trace: this.defaultQuantityTrace ? 'Y' : 'N',\n\t\t\t\t\t\tdefault_can_buy_zero: this.defaultCanBuyZero ? 'Y' : 'N',\n\t\t\t\t\t\tdefault_subscribe: this.defaultSubscribe ? 'Y' : 'N',\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\n\t\t\treturn new Promise((resolve) => {\n\t\t\t\tconst productUpdater = (new ProductUpdater(productUpdaterOptions))\n\t\t\t\t\t.$on('complete', () => {\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t\tif (this.needProgressBarOnProductsUpdating)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.productUpdaterPopup.destroy();\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.$mount();\n\n\t\t\t\tif (this.needProgressBarOnProductsUpdating)\n\t\t\t\t{\n\t\t\t\t\tthis.productUpdaterPopup = new Popup({\n\t\t\t\t\t\tcontent: productUpdater.$el,\n\t\t\t\t\t\twidth: 310,\n\t\t\t\t\t\toverlay: true,\n\t\t\t\t\t\tpadding: 17,\n\t\t\t\t\t\tanimation: 'fading-slide',\n\t\t\t\t\t\tangle: false,\n\t\t\t\t\t});\n\t\t\t\t\tthis.productUpdaterPopup.show();\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tmakeReservationSettings()\n\t\t{\n\t\t\tlet result = {};\n\n\t\t\tfor (let reservationEntity of this.reservationEntities)\n\t\t\t{\n\t\t\t\tresult[reservationEntity.code] = reservationEntity.settings.values;\n\t\t\t}\n\n\t\t\treturn result;\n\t\t},\n\t\tcancel()\n\t\t{\n\t\t\tthis.close();\n\t\t},\n\t\tclose()\n\t\t{\n\t\t\tthis.slider.close();\n\t\t},\n\t\tgetReservationSettingsHint()\n\t\t{\n\t\t\treturn this.getHintContentWrapped(\n\t\t\t\tLoc.getMessage('CRM_CFG_C_SETTINGS_RESERVATION_SETTINGS_HINT'),\n\t\t\t\tHELP_ARTICLE_ID,\n\t\t\t\t'reservation'\n\t\t\t);\n\t\t},\n\t\tgetProductsSettingsHint()\n\t\t{\n\t\t\treturn this.getHintContent(\n\t\t\t\tLoc.getMessage('CRM_CFG_C_SETTINGS_PRODUCTS_SETTINGS_HINT'),\n\t\t\t\tHELP_ARTICLE_ID,\n\t\t\t\t'products'\n\t\t\t);\n\t\t},\n\t\tgetCanBuyZeroHint()\n\t\t{\n\t\t\treturn this.getHintContent(\n\t\t\t\tLoc.getMessage('CRM_CFG_C_SETTINGS_CAN_BUY_ZERO_HINT'),\n\t\t\t\tHELP_ARTICLE_ID,\n\t\t\t\t'products'\n\t\t\t);\n\t\t},\n\t\tgetCanBuyZeroInDocsHint()\n\t\t{\n\t\t\treturn this.getHintContent(\n\t\t\t\t`\n\t\t\t\t\t${Loc.getMessage('CRM_CFG_C_SETTINGS_CAN_BUY_ZERO_IN_DOCS_HINT')}\n\t\t\t\t\t<br/><br/>\n\t\t\t\t\t${Loc.getMessage('CRM_CFG_C_SETTINGS_CAN_BUY_ZERO_IN_DOCS_HINT_DOC_TYPE_RESTRICTIONS')}\n\t\t\t\t\t<br/>\n\t\t\t\t`,\n\t\t\t\tHELP_ARTICLE_ID,\n\t\t\t\t'products'\n\t\t\t);\n\t\t},\n\t\tgetHintContent(content, article, anchor)\n\t\t{\n\t\t\treturn `\n\t\t\t\t${content}\n\t\t\t\t<br/>\n\t\t\t\t${this.getDocumentationLink(Loc.getMessage('CRM_CFG_C_SETTINGS_DETAILS'), article, anchor)}\n\t\t\t`;\n\t\t},\n\t\tgetHintContentWrapped(text, article, anchor)\n\t\t{\n\t\t\treturn this.getDocumentationLink(text, article, anchor);\n\t\t},\n\t\tgetDocumentationLink(text, article, anchor)\n\t\t{\n\t\t\treturn `\n\t\t\t\t<a href=\"javascript:void(0);\" onclick=\"if (top.BX.Helper){top.BX.Helper.show('redirect=detail&code=${article}#${anchor}');}\" class=\"catalog-settings-helper-link\">\n\t\t\t\t\t${text}\n\t\t\t\t</a>\n\t\t\t`;\n\t\t},\n\t\tshowSettingsMenu(e)\n\t\t{\n\t\t\tthis.settingsMenu = new Menu({\n\t\t\t\tbindElement: e.target,\n\t\t\t\tangle: true,\n\t\t\t\toffsetLeft: 20,\n\t\t\t\titems: [{\n\t\t\t\t\ttext: Loc.getMessage('CRM_CFG_C_SETTINGS_TURN_INVENTORY_CONTROL_OFF'),\n\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\tthis.settingsMenu.destroy();\n\t\t\t\t\t\tthis.openStoreControlMaster('disable');\n\t\t\t\t\t}\n\t\t\t\t}],\n\t\t\t});\n\t\t\tthis.settingsMenu.show();\n\t\t},\n\t},\n\tmounted()\n\t{\n\t\tBX.UI.Hint.init(this.$el);\n\t},\n\ttemplate: `\n\t\t<div class=\"catalog-settings-wrapper\">\n\t\t\t<form>\n\t\t\t\t<div class=\"ui-slider-section\">\n\t\t\t\t\t<div class=\"ui-slider-content-box\">\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tstyle=\"display: flex; align-items: center\"\n\t\t\t\t\t\t\tclass=\"ui-slider-heading-4\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_TITLE}}\n\t\t\t\t\t\t\t<div v-if=\"isStoreControlUsed\" class=\"catalog-settings-main-header-feedback-container\">\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t@click.prevent=\"showSettingsMenu\"\n\t\t\t\t\t\t\t\t\tclass=\"ui-toolbar-right-buttons\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<button class=\"ui-btn ui-btn-light-border ui-btn-icon-setting ui-btn-themes\"></button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"ui-slider-inner-box\">\n\t\t\t\t\t\t\t<p class=\"ui-slider-paragraph-2\">\n\t\t\t\t\t\t\t\t{{description}}\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"catalog-settings-button-container\">\n\t\t\t\t\t\t\t<template v-if=\"isStoreControlUsed\">\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t@click=\"openStoreControlMaster('edit')\"\n\t\t\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-md ui-btn-light-border ui-btn-width\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_OPEN_SETTINGS}}\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t@click=\"openStoreControlMaster()\"\n\t\t\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-success\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_TURN_INVENTORY_CONTROL_ON}}\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"catalog-settings-main-settings\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tv-if=\"isReservationUsed && hasAccessToReservationSettings\"\n\t\t\t\t\t\tclass=\"ui-slider-section\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div class=\"ui-slider-heading-4\">\n\t\t\t\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_RESERVATION_SETTINGS}}\n\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\tclass=\"ui-hint\"\n\t\t\t\t\t\t\t\tdata-hint-html=\"\"\n\t\t\t\t\t\t\t\tdata-hint-interactivity=\"\"\n\t\t\t\t\t\t\t\t:data-hint=\"getReservationSettingsHint()\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<span class=\"ui-hint-icon\"></span>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"catalog-settings-editor-content-block\">\n\t\t\t\t\t\t\t<div class=\"ui-ctl-label-text\">\n\t\t\t\t\t\t\t\t<label>{{loc.CRM_CFG_C_SETTINGS_RESERVATION_ENTITY}}</label>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-after-icon ui-ctl-dropdown ui-ctl-disabled ui-ctl-w100\">\n\t\t\t\t\t\t\t\t<!--<div class=\"ui-ctl-after ui-ctl-icon-angle\"></div>-->\n\t\t\t\t\t\t\t\t<select\n\t\t\t\t\t\t\t\t\tv-model=\"currentReservationEntityCode\"\n\t\t\t\t\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<option\n\t\t\t\t\t\t\t\t\t\tv-for=\"reservationEntity in reservationEntities\"\n\t\t\t\t\t\t\t\t\t\t:value=\"reservationEntity.code\"\n\t\t\t\t\t\t\t\t\t\t:disabled=\"reservationEntity.code !== 'deal'\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{{reservationEntity.name}}\n\t\t\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<reservation\n\t\t\t\t\t\t\tv-for=\"(reservationEntity, index) in reservationEntities\"\n\t\t\t\t\t\t\tv-show=\"reservationEntity.code === currentReservationEntityCode\"\n\t\t\t\t\t\t\t:key=\"reservationEntity.code\"\n\t\t\t\t\t\t\t:settings=\"reservationEntity.settings\"\n\t\t\t\t\t\t\t@change=\"onReservationSettingsValuesChanged($event, index)\"\n\t\t\t\t\t\t></reservation>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div v-if=\"hasAccessToCatalogSettings\" class=\"ui-slider-section\">\n\t\t\t\t\t\t<div class=\"ui-slider-heading-4\">\n\t\t\t\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_PRODUCTS_SETTINGS}}\n\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\tclass=\"ui-hint\"\n\t\t\t\t\t\t\t\tdata-hint-html=\"\"\n\t\t\t\t\t\t\t\tdata-hint-interactivity=\"\"\n\t\t\t\t\t\t\t\t:data-hint=\"getProductsSettingsHint()\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<span class=\"ui-hint-icon\"></span>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tv-if=\"isCanEnableProductCardSlider\"\n\t\t\t\t\t\t\tclass=\"catalog-settings-editor-checkbox-content-block\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-checkbox ui-ctl-w100\">\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t@click=\"onEnableProductCardCheckboxClick\"\n\t\t\t\t\t\t\t\t\tv-model=\"productCardSliderEnabled\"\n\t\t\t\t\t\t\t\t\tid=\"product_card_slider_enabled\"\n\t\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<label for=\"product_card_slider_enabled\" class=\"ui-ctl-label-text\">\n\t\t\t\t\t\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_PRODUCT_CARD_ENABLE_NEW_CARD}}\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"catalog-settings-editor-checkbox-content-block\">\n\t\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-checkbox ui-ctl-w100\">\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\tv-model=\"defaultSubscribe\"\n\t\t\t\t\t\t\t\t\t@click=\"markAsChanged\"\n\t\t\t\t\t\t\t\t\tid=\"default_subscribe\"\n\t\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<label for=\"default_subscribe\" class=\"ui-ctl-label-text\">\n\t\t\t\t\t\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_PRODUCTS_SETTINGS_DEFAULT_SUBSCRIBE}}\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"catalog-settings-editor-checkbox-content-block\">\n\t\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-checkbox ui-ctl-w100\">\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\tv-model=\"defaultProductVatIncluded\"\n\t\t\t\t\t\t\t\t\t@click=\"markAsChanged\"\n\t\t\t\t\t\t\t\t\tid=\"default_product_vat_included\"\n\t\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<label for=\"default_product_vat_included\" class=\"ui-ctl-label-text\">\n\t\t\t\t\t\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_PRODUCT_CARD_SET_VAT_IN_PRICE_FOR_NEW_PRODUCTS}}\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tv-if=\"isDefaultQuantityTraceVisible\"\n\t\t\t\t\t\t\tclass=\"catalog-settings-editor-checkbox-content-block\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-checkbox ui-ctl-w100\">\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\tv-model=\"defaultQuantityTrace\"\n\t\t\t\t\t\t\t\t\t@click=\"markAsChanged\"\n\t\t\t\t\t\t\t\t\tid=\"default_quantity_trace\"\n\t\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<label for=\"default_quantity_trace\" class=\"ui-ctl-label-text\">\n\t\t\t\t\t\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_PRODUCTS_DEFAULT_QUANTITY_TRACE}}\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div v-if=\"isCanBuyZeroInDocsVisible\" class=\"catalog-settings-editor-checkbox-content-block\">\n\t\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-checkbox ui-ctl-w100\">\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\tv-model=\"checkRightsOnDecreaseStoreAmount\"\n\t\t\t\t\t\t\t\t\t@click=\"markAsChanged\"\n\t\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<label class=\"ui-ctl-label-text\">\n\t\t\t\t\t\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_PRODUCTS_SETTINGS_DEFAULT_CAN_BUY_ZERO_IN_DOCS}}\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\tclass=\"ui-hint\"\n\t\t\t\t\t\t\t\t\tdata-hint-html=\"\"\n\t\t\t\t\t\t\t\t\tdata-hint-interactivity=\"\"\n\t\t\t\t\t\t\t\t\t:data-hint=\"getCanBuyZeroInDocsHint()\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<span class=\"ui-hint-icon\"></span>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tv-if=\"isReservationUsed && isCanChangeOptionCanByZero\"\n\t\t\t\t\t\t\tclass=\"catalog-settings-editor-checkbox-content-block\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-checkbox ui-ctl-w100\">\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\tv-model=\"defaultCanBuyZero\"\n\t\t\t\t\t\t\t\t\t@click=\"markAsChanged\"\n\t\t\t\t\t\t\t\t\tid=\"default_can_buy_zero\"\n\t\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t\t\t\t\t:disabled=\"!isCanChangeOptionCanByZero\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<label for=\"default_can_buy_zero\" class=\"ui-ctl-label-text\">\n\t\t\t\t\t\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_PRODUCTS_SETTINGS_DEFAULT_CAN_BUY_ZERO_V2}}\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\tclass=\"ui-hint\"\n\t\t\t\t\t\t\t\t\tdata-hint-html=\"\"\n\t\t\t\t\t\t\t\t\tdata-hint-interactivity=\"\"\n\t\t\t\t\t\t\t\t\t:data-hint=\"getCanBuyZeroHint()\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<span class=\"ui-hint-icon\"></span>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</form>\n\t\t\t<div\n\t\t\t\t:class=\"buttonsPanelClass\"\n\t\t\t>\n\t\t\t\t<div class=\"ui-button-panel ui-button-panel-align-center \">\n\t\t\t\t\t<button\n\t\t\t\t\t\t@click=\"save\"\n\t\t\t\t\t\t:class=\"saveButtonClasses\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_SAVE_BUTTON}}\n\t\t\t\t\t</button>\n\t\t\t\t\t<a\n\t\t\t\t\t\t@click=\"cancel\"\n\t\t\t\t\t\tclass=\"ui-btn ui-btn-link\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_CANCEL_BUTTON}}\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div style=\"height: 65px;\"></div>\n\t\t</div>\n\t`\n})\n","import {Const} from './const';\nimport {Type} from 'main.core';\n\nexport default class Slider\n{\n\tstatic open(source = null, options = {})\n\t{\n\t\tlet url = Const.url;\n\t\tif (Type.isStringFilled(source))\n\t\t{\n\t\t\turl += '?configCatalogSource=' + source;\n\t\t}\n\t\treturn new Promise((resolve) =>\n\t\t{\n\t\t\treturn BX.SidePanel.Instance.open(\n\t\t\t\turl,\n\t\t\t\t{\n\t\t\t\t\twidth: 1000,\n\t\t\t\t\tallowChangeHistory: false,\n\t\t\t\t\tcacheable: false,\n\t\t\t\t\t...options,\n\t\t\t\t}\n\t\t\t);\n\t\t});\n\t}\n}\n"],"names":["computed","loc","Vue","getFilteredPhrases","props","settings","type","Object","required","data","result","scheme","element","code","values","methods","onChanged","$emit","$data","getWrapperClass","mounted","BX","UI","Hint","init","$el","template","ProductSettingsUpdater","params","url","stepOptions","ajaxSessionID","maxExecutionTime","maxOperationCounter","finish","currentState","counter","operationCounter","errorCounter","lastID","ajaxParams","operation","iblocks","iblockIndex","events","key","hasOwnProperty","sessid","bitrix_sessid","lang","message","ajax","loadJSON","proxy","nextStepResult","isPlainObject","parseInt","isNaN","onProgress","allCnt","allCounter","doneCnt","allOperationCounter","currentIblockName","NAME","finishOperation","checkOperation","onComplete","changeSettings","changeSettingsResult","success","loadIblockList","stopOperation","length","getIblock","isArray","iblockReindex","checkIblockIndex","initStep","nextStep","iblockId","ID","COUNT","finalRequest","iblockList","i","get","extend","mixins","LocMixin","progressStyles","width","Math","round","created","startOperation","Const","freeze","HELP_ARTICLE_ID","components","Reservation","initData","isSaving","isChanged","currentReservationEntityCode","isStoreControlUsed","productsCnt","reservationEntities","initDefaultQuantityTrace","initDefaultCanBuyZero","initDefaultSubscribe","initCheckRightsOnDecreaseStoreAmount","defaultQuantityTrace","defaultCanBuyZero","defaultSubscribe","checkRightsOnDecreaseStoreAmount","productCardSliderEnabled","isCanEnableProductCardSlider","isBitrix24","defaultProductVatIncluded","initialize","productUpdaterPopup","settingsMenu","sliderUrl","configCatalogSource","slider","SidePanel","Instance","getSlider","hasAccessToReservationSettings","undefined","hasAccessToCatalogSettings","isCanChangeOptionCanByZero","Extension","getSettings","isReservationUsed","isReservationUsageViaQuantityTrace","isCanBuyZeroInDocsVisible","isDefaultQuantityTraceVisible","hasProductSettingsChanged","needProgressBarOnProductsUpdating","saveButtonClasses","buttonsPanelClass","description","Loc","getMessage","watch","newVal","oldVal","showWarn","warnPopup","Popup","onPopupClose","destroy","content","Tag","render","maxWidth","overlay","buttons","Button","text","color","Color","PRIMARY","onclick","close","show","markAsChanged","onEnableProductCardCheckboxClick","askToEnableProductCardSlider","askPopup","onPopupShow","helpdeskLink","document","getElementById","Event","bind","top","Helper","className","titleBar","openStoreControlMaster","mode","Slider","open","then","runAction","response","refresh","getData","showMessage","Promise","resolve","reject","runComponentAction","json","showResponseErrors","wait","ms","setTimeout","errors","map","error","join","loadExt","Notification","Center","notify","onReservationSettingsValuesChanged","index","save","saveProductSettings","reservationSettings","makeReservationSettings","productUpdaterOptions","propsData","default_quantity_trace","default_can_buy_zero","default_subscribe","productUpdater","ProductUpdater","$on","$mount","padding","animation","angle","reservationEntity","cancel","getReservationSettingsHint","getHintContentWrapped","getProductsSettingsHint","getHintContent","getCanBuyZeroHint","getCanBuyZeroInDocsHint","article","anchor","getDocumentationLink","showSettingsMenu","e","Menu","bindElement","target","offsetLeft","items","source","options","Type","isStringFilled","allowChangeHistory","cacheable"],"mappings":"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"}