{"version":3,"file":"catalog.bundle.js","sources":["../src/loc.js","../src/reservation.js","../src/product-updater/updater.js","../src/product-updater/template.js","../src/const.js","../src/app.js","../src/slider.js"],"sourcesContent":["import {Vue} from 'ui.vue';\n\nexport default\n{\n\tcomputed: {\n\t\tloc()\n\t\t{\n\t\t\treturn Vue.getFilteredPhrases('CRM_CFG_C_SETTINGS_');\n\t\t}\n\t}\n}\n","export default {\n\tprops: {\n\t\tsettings: {\n\t\t\ttype: Object,\n\t\t\trequired: true\n\t\t},\n\t},\n\tdata ()\n\t{\n\t\tlet result = {};\n\n\t\tfor (const element of this.settings.scheme)\n\t\t{\n\t\t\tresult[element.code] = this.settings.values[element.code];\n\t\t}\n\n\t\treturn result;\n\t},\n\tmethods: {\n\t\tonChanged()\n\t\t{\n\t\t\tthis.$emit('change', this.$data);\n\t\t},\n\t\tgetWrapperClass(type)\n\t\t{\n\t\t\treturn (type === 'option')\n\t\t\t\t? {\n\t\t\t\t\t'catalog-settings-editor-checkbox-content-block': true,\n\t\t\t\t}\n\t\t\t\t: {\n\t\t\t\t\t'catalog-settings-editor-content-block': true,\n\t\t\t\t};\n\t\t}\n\t},\n\tmounted()\n\t{\n\t\tBX.UI.Hint.init(this.$el);\n\t},\n\ttemplate: `\n\t\t<div>\n\t\t\t<div\n\t\t\t\tv-for=\"setting in settings.scheme\"\n\t\t\t\t:class=\"getWrapperClass(setting.type)\"\n\t\t\t>\n\t\t\t\t<template v-if=\"setting.type === 'list'\">\n\t\t\t\t\t<div class=\"ui-ctl-label-text\">\n\t\t\t\t\t\t<label>{{setting.name}}</label>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"ui-ctl ui-ctl-after-icon ui-ctl-dropdown ui-ctl-w100\">\n\t\t\t\t\t\t<div class=\"ui-ctl-after ui-ctl-icon-angle\"></div>\n\t\t\t\t\t\t<select\n\t\t\t\t\t\t\tv-model=\"$data[setting.code]\"\n\t\t\t\t\t\t\t@change=\"onChanged\"\n\t\t\t\t\t\t\t:disabled=\"setting.disabled\"\n\t\t\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<option v-for=\"value in setting.values\" :value=\"value.code\">\n\t\t\t\t\t\t\t\t{{value.name}}\n\t\t\t\t\t\t\t</option>\t\t\t\t\t\t\n\t\t\t\t\t\t</select>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t\t<template v-if=\"setting.type === 'text'\">\n\t\t\t\t\t<div class=\"ui-ctl-label-text\">\n\t\t\t\t\t\t<label>{{setting.name}}</label>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"ui-ctl ui-ctl-textbox ui-ctl-w100\">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tv-model=\"$data[setting.code]\"\n\t\t\t\t\t\t\t@change=\"onChanged\"\n\t\t\t\t\t\t\t:disabled=\"setting.disabled\"\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t\t>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t\t<template v-if=\"setting.type === 'int'\">\n\t\t\t\t\t<div class=\"ui-ctl-label-text\">\n\t\t\t\t\t\t<label>{{setting.name}}</label>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"ui-ctl ui-ctl-textbox ui-ctl-w100\">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tv-model=\"$data[setting.code]\"\n\t\t\t\t\t\t\t@input=\"onChanged\"\n\t\t\t\t\t\t\t:disabled=\"setting.disabled\"\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t\t>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t\t<template v-if=\"setting.type === 'option'\">\n\t\t\t\t\t<div class=\"ui-ctl ui-ctl-checkbox ui-ctl-w100\">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tv-model=\"$data[setting.code]\"\n\t\t\t\t\t\t\t@change=\"onChanged\"\n\t\t\t\t\t\t\t:id=\"setting.code + '_' + $vnode.key\"\n\t\t\t\t\t\t\t:disabled=\"setting.disabled\"\n\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t<label\n\t\t\t\t\t\t\t:for=\"setting.code + '_' + $vnode.key\"\n\t\t\t\t\t\t\tclass=\"ui-ctl-label-text\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{setting.name}}\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tv-if=\"setting.description\"\n\t\t\t\t\t\t\tclass=\"ui-hint\"\n\t\t\t\t\t\t\t:data-hint=\"setting.description\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span class=\"ui-hint-icon\"></span>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t</div>\n\t\t</div>\n\t`\n}\n","class ProductSettingsUpdater\n{\n\tconstructor(params)\n\t{\n\t\tthis.url = '/bitrix/tools/catalog/product_settings.php';\n\t\tthis.stepOptions = {\n\t\t\tajaxSessionID: '',\n\t\t\tmaxExecutionTime: 30,\n\t\t\tmaxOperationCounter: 10\n\t\t};\n\t\tthis.finish = false;\n\t\tthis.currentState = {\n\t\t\tcounter: 0,\n\t\t\toperationCounter: 0,\n\t\t\terrorCounter: 0,\n\t\t\tlastID: 0\n\t\t};\n\t\tthis.ajaxParams = {\n\t\t\toperation: 'Y'\n\t\t};\n\t\tthis.iblocks = [];\n\t\tthis.iblockIndex = -1;\n\n\t\tthis.stepOptions.ajaxSessionID = 'productSettings';\n\t\tthis.currentState.counter = 0;\n\n\t\tthis.events = params.events;\n\t\tthis.settings = params.settings;\n\t}\n\n\tnextStep()\n\t{\n\t\tfor (let key in this.stepOptions)\n\t\t{\n\t\t\tif (this.stepOptions.hasOwnProperty(key))\n\t\t\t{\n\t\t\t\tthis.ajaxParams[key] = this.stepOptions[key];\n\t\t\t}\n\t\t}\n\t\tfor (let key in this.currentState)\n\t\t{\n\t\t\tif (this.currentState.hasOwnProperty(key))\n\t\t\t{\n\t\t\t\tthis.ajaxParams[key] = this.currentState[key];\n\t\t\t}\n\t\t}\n\n\t\tthis.ajaxParams.sessid = BX.bitrix_sessid();\n\t\tthis.ajaxParams.lang = BX.message('LANGUAGE_ID');\n\t\tBX.ajax.loadJSON(\n\t\t\tthis.url,\n\t\t\tthis.ajaxParams,\n\t\t\tBX.proxy(this.nextStepResult, this)\n\t\t);\n\t}\n\n\tnextStepResult(result)\n\t{\n\t\tif (BX.type.isPlainObject(result))\n\t\t{\n\t\t\tthis.currentState.lastID = result.lastID;\n\t\t\tthis.stepOptions.maxOperationCounter = result.maxOperationCounter;\n\n\t\t\tthis.currentState.operationCounter = parseInt(result.operationCounter, 10);\n\t\t\tif (isNaN(this.currentState.operationCounter))\n\t\t\t{\n\t\t\t\tthis.currentState.operationCounter = 0;\n\t\t\t}\n\n\t\t\tthis.currentState.errorCounter = parseInt(result.errorCounter, 10);\n\t\t\tif (isNaN(this.currentState.errorCounter))\n\t\t\t{\n\t\t\t\tthis.currentState.errorCounter = 0;\n\t\t\t}\n\n\t\t\tif (this.events.onProgress)\n\t\t\t{\n\t\t\t\tthis.events.onProgress({\n\t\t\t\t\tallCnt: result.allCounter,\n\t\t\t\t\tdoneCnt: result.allOperationCounter,\n\t\t\t\t\tcurrentIblockName: this.iblocks[this.iblockIndex].NAME,\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (this.finish)\n\t\t\t{\n\t\t\t\tthis.finishOperation();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.checkOperation(result.finishOperation);\n\t\t\t}\n\t\t}\n\t}\n\n\tfinishOperation()\n\t{\n\t\tthis.currentState.operationCounter = 0;\n\t\tthis.currentState.errorCounter = 0;\n\t\tthis.currentState.lastID = 0;\n\t\tthis.finish = false;\n\n\t\tif (this.events.onComplete)\n\t\t{\n\t\t\tthis.events.onComplete();\n\t\t}\n\t}\n\n\tstartOperation()\n\t{\n\t\tBX.ajax.loadJSON(\n\t\t\tthis.url,\n\t\t\t{\n\t\t\t\tsessid: BX.bitrix_sessid(),\n\t\t\t\tchangeSettings: 'Y',\n\t\t\t\t...this.settings\n\t\t\t},\n\t\t\tBX.proxy(this.changeSettingsResult, this)\n\t\t);\n\t}\n\n\tchangeSettingsResult(result)\n\t{\n\t\tif (!BX.type.isPlainObject(result))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (result.success === 'Y')\n\t\t{\n\t\t\tthis.loadIblockList();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.stopOperation();\n\t\t}\n\t}\n\n\tstopOperation()\n\t{\n\t\tthis.finish = true;\n\t}\n\n\tcheckIblockIndex()\n\t{\n\t\treturn !(\n\t\t\tthis.iblocks.length === 0\n\t\t\t|| this.iblockIndex < 0\n\t\t\t|| this.iblockIndex >= this.iblocks.length\n\t\t);\n\t}\n\n\tloadIblockList()\n\t{\n\t\tBX.ajax.loadJSON(\n\t\t\tthis.url,\n\t\t\t{\n\t\t\t\tsessid: BX.bitrix_sessid(),\n\t\t\t\tgetIblock: 'Y'\n\t\t\t},\n\t\t\t(result) => {\n\t\t\t\tif (BX.type.isArray(result))\n\t\t\t\t{\n\t\t\t\t\tthis.iblocks = result;\n\t\t\t\t\tif (this.iblocks.length > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.iblockIndex = 0;\n\t\t\t\t\t\tthis.iblockReindex();\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.stopOperation();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t}\n\n\tiblockReindex()\n\t{\n\t\tif (this.finish || !this.checkIblockIndex())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.initStep();\n\t\tthis.nextStep();\n\t}\n\n\tinitStep()\n\t{\n\t\tthis.currentState.iblockId = this.iblocks[this.iblockIndex].ID;\n\t\tthis.currentState.counter = this.iblocks[this.iblockIndex].COUNT;\n\t\tthis.currentState.operationCounter = 0;\n\t\tthis.currentState.errorCounter = 0;\n\t\tthis.currentState.lastID = 0;\n\t}\n\n\tcheckOperation(result)\n\t{\n\t\tif (!!result)\n\t\t{\n\t\t\tthis.iblockIndex++;\n\t\t\tif (this.iblockIndex >= this.iblocks.length || this.currentState.errorCounter > 0)\n\t\t\t{\n\t\t\t\tthis.finishOperation();\n\t\t\t\tif (this.currentState.errorCounter == 0)\n\t\t\t\t{\n\t\t\t\t\tthis.finalRequest();\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.initStep();\n\t\t\t\tthis.nextStep();\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.nextStep();\n\t\t}\n\t}\n\n\tfinalRequest()\n\t{\n\t\tlet iblockList = [];\n\n\t\tif (this.iblocks.length > 0)\n\t\t{\n\t\t\tfor (let i = 0; i < this.iblocks.length; i++)\n\t\t\t{\n\t\t\t\tiblockList[iblockList.length] = this.iblocks[i].ID;\n\t\t\t}\n\n\t\t\tBX.ajax.get(\n\t\t\t\tthis.url,\n\t\t\t\t{\n\t\t\t\t\tsessid: BX.bitrix_sessid(),\n\t\t\t\t\tfinalRequest: 'Y',\n\t\t\t\t\tiblockList,\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t}\n}\n\nexport {\n\tProductSettingsUpdater\n};\n","import {Vue} from 'ui.vue';\nimport {ProductSettingsUpdater} from './updater';\nimport LocMixin from '../loc';\n\nexport default Vue.extend({\n\tmixins: [LocMixin],\n\tprops: {\n\t\tsettings: {\n\t\t\ttype: Object,\n\t\t\trequired: true\n\t\t},\n\t},\n\tdata ()\n\t{\n\t\treturn {\n\t\t\tcurrentIblockName: null,\n\t\t\tallCnt: 0,\n\t\t\tdoneCnt: 0,\n\t\t};\n\t},\n\tcomputed: {\n\t\tprogressStyles()\n\t\t{\n\t\t\tlet width = 0;\n\t\t\tif (this.allCnt > 0)\n\t\t\t{\n\t\t\t\twidth = Math.round((this.doneCnt / this.allCnt) * 100);\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\twidth: width + '%'\n\t\t\t};\n\t\t}\n\t},\n\tcreated()\n\t{\n\t\t(new ProductSettingsUpdater({\n\t\t\tsettings: this.settings,\n\t\t\tevents: {\n\t\t\t\tonProgress: (data) => {\n\t\t\t\t\tthis.currentIblockName = data.currentIblockName;\n\t\t\t\t\tthis.allCnt = data.allCnt;\n\t\t\t\t\tthis.doneCnt = data.doneCnt;\n\t\t\t\t},\n\t\t\t\tonComplete: () => {\n\t\t\t\t\tthis.$emit('complete');\n\t\t\t\t},\n\t\t\t}\n\t\t})).startOperation();\n\t},\n\ttemplate: `\n\t\t<div >\n\t\t\t<div class=\"ui-progressbar ui-progressbar-column\">\n\t\t\t\t<div style=\"font-weight: bold;\" class=\"ui-progressbar-text-before\">\n\t\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_PRODUCT_SETTINGS_UPDATE_TITLE}}\t\t\t\t\n\t\t\t\t</div>\n\t\t\t\t<div class=\"ui-progressbar-track\">\n\t\t\t\t\t<div :style=\"progressStyles\" class=\"ui-progressbar-bar\"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"ui-progressbar-text-after\">\n\t\t\t\t\t{{doneCnt}} {{loc.CRM_CFG_C_SETTINGS_OUT_OF}} {{allCnt}}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div style=\"color: rgb(83, 92, 105); font-size: 12px;\">\n\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_PRODUCT_SETTINGS_UPDATE_WAIT}}\n\t\t\t\t<div\n\t\t\t\t\tv-show=\"currentIblockName\"\n\t\t\t\t\tstyle=\"padding-top: 10px;\"\n\t\t\t\t>\n\t\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_PRODUCT_SETTINGS_CURRENT_CATALOG}}: {{currentIblockName}}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`\n});\n","export const Const = Object.freeze({\n\turl: '/crm/configs/catalog/'\n});\n","import LocMixin from './loc';\nimport Reservation from './reservation';\nimport {Loc, ajax, Tag} from 'main.core';\nimport {Menu, Popup} from 'main.popup';\nimport {Button} from 'ui.buttons';\nimport {Slider} from 'catalog.store-use'\nimport {Vue} from 'ui.vue';\nimport ProductUpdater from './product-updater/template';\nimport {Const} from './const';\nimport 'ui.notification';\nimport '../css/app.css';\n\nconst HELP_ARTICLE_ID = 15706692;\n\nexport default Vue.extend({\n\tmixins: [LocMixin],\n\tcomponents: {\n\t\t'reservation': Reservation,\n\t},\n\tprops: {\n\t\tinitData: {\n\t\t\ttype: Object,\n\t\t\trequired: true\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\t/**\n\t\t\t * State\n\t\t\t */\n\t\t\tisSaving: false,\n\t\t\tisChanged: false,\n\t\t\tcurrentReservationEntityCode: null,\n\t\t\t/**\n\t\t\t *\n\t\t\t */\n\t\t\tisStoreControlUsed: null,\n\t\t\tisCommonProductProcessingEnabled: null,\n\t\t\tproductsCnt: null,\n\t\t\t/**\n\t\t\t * Reservation settings\n\t\t\t */\n\t\t\treservationEntities: [],\n\t\t\t/**\n\t\t\t * Default products settings\n\t\t\t */\n\t\t\tinitDefaultQuantityTrace: null,\n\t\t\tinitDefaultCanBuyZero: null,\n\t\t\tinitDefaultSubscribe: null,\n\t\t\tdefaultQuantityTrace: null,\n\t\t\tdefaultCanBuyZero: null,\n\t\t\tdefaultSubscribe: null,\n\t\t\t/**\n\t\t\t * Product card\n\t\t\t */\n\t\t\tproductCardSliderEnabled: null,\n\t\t\tdefaultProductVatIncluded: null,\n\t\t};\n\t},\n\tcreated()\n\t{\n\t\tthis.initialize(this.initData);\n\t\tthis.productUpdaterPopup = null;\n\t\tthis.settingsMenu = null;\n\t\tthis.slider = BX.SidePanel.Instance.getSlider(Const.url);\n\t},\n\tcomputed: {\n\t\tisReservationUsed()\n\t\t{\n\t\t\treturn (\n\t\t\t\tthis.isStoreControlUsed\n\t\t\t\t|| this.isReservationUsageViaQuantityTrace\n\t\t\t);\n\t\t},\n\t\tisCanBuyZeroInDocsVisible()\n\t\t{\n\t\t\treturn this.isStoreControlUsed;\n\t\t},\n\t\tisDefaultQuantityTraceVisible()\n\t\t{\n\t\t\treturn this.isReservationUsageViaQuantityTrace;\n\t\t},\n\t\tisReservationUsageViaQuantityTrace()\n\t\t{\n\t\t\treturn (\n\t\t\t\t!this.isStoreControlUsed\n\t\t\t\t&& this.initDefaultQuantityTrace\n\t\t\t);\n\t\t},\n\t\thasProductSettingsChanged()\n\t\t{\n\t\t\treturn !(\n\t\t\t\tthis.initDefaultQuantityTrace === this.defaultQuantityTrace\n\t\t\t\t&& this.initDefaultCanBuyZero === this.defaultCanBuyZero\n\t\t\t\t&& this.initDefaultSubscribe === this.defaultSubscribe\n\t\t\t);\n\t\t},\n\t\tneedProgressBarOnProductsUpdating()\n\t\t{\n\t\t\treturn this.productsCnt > 500;\n\t\t},\n\t\tsaveButtonClasses()\n\t\t{\n\t\t\treturn {\n\t\t\t\t'ui-btn': true,\n\t\t\t\t'ui-btn-success': true,\n\t\t\t\t'ui-btn-wait': this.isSaving,\n\t\t\t};\n\t\t},\n\t\tbuttonsPanelClass()\n\t\t{\n\t\t\treturn {\n\t\t\t\t'ui-button-panel-wrapper': true,\n\t\t\t\t'ui-pinner': true,\n\t\t\t\t'ui-pinner-bottom': true,\n\t\t\t\t'ui-pinner-full-width': true,\n\t\t\t\t'ui-button-panel-wrapper-hide': !this.isChanged,\n\t\t\t};\n\t\t},\n\t\tdescription()\n\t\t{\n\t\t\treturn this.isStoreControlUsed\n\t\t\t\t? Loc.getMessage('CRM_CFG_C_SETTINGS_STORE_CONTROL_ACTIVE')\n\t\t\t\t: Loc.getMessage('CRM_CFG_C_SETTINGS_STORE_CONTROL_NOT_ACTIVE');\n\t\t}\n\t},\n\twatch: {\n\t\tdefaultQuantityTrace(newVal, oldVal)\n\t\t{\n\t\t\tconst showWarn = this.isDefaultQuantityTraceVisible && (newVal === false && oldVal === true);\n\t\t\tif (!showWarn)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst warnPopup = new Popup(null, null, {\n\t\t\t\tevents: {\n\t\t\t\t\tonPopupClose: () => warnPopup.destroy()\n\t\t\t\t},\n\t\t\t\tcontent: Tag.render`\n\t\t\t\t\t<div class=\"catalog-settings-popup-content\">\n\t\t\t\t\t\t<h3>\n\t\t\t\t\t\t\t${Loc.getMessage('CRM_CFG_C_SETTINGS_TURN_OFF_QUANTITY_TRACE_TITLE')}\n\t\t\t\t\t\t</h3>\t\n\t\t\t\t\t\t<div class=\"catalog-settings-popup-text\">\n\t\t\t\t\t\t\t${Loc.getMessage('CRM_CFG_C_SETTINGS_TURN_OFF_QUANTITY_TRACE_TEXT')}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t`,\n\t\t\t\tmaxWidth: 500,\n\t\t\t\toverlay: true,\n\t\t\t\tbuttons: [\n\t\t\t\t\tnew Button({\n\t\t\t\t\t\ttext : Loc.getMessage('CRM_CFG_C_SETTINGS_CLOSE'),\n\t\t\t\t\t\tcolor: Button.Color.PRIMARY,\n\t\t\t\t\t\tonclick: () => warnPopup.close()\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t});\n\t\t\twarnPopup.show();\n\t\t},\n\t},\n\tmethods: {\n\t\tmarkAsChanged()\n\t\t{\n\t\t\tthis.isChanged = true;\n\t\t},\n\t\topenStoreControlMaster(mode = '')\n\t\t{\n\t\t\tnew Slider().open(\n\t\t\t\t'/bitrix/components/bitrix/catalog.warehouse.master.clear/slider.php?mode=' + mode,\n\t\t\t\t{}\n\t\t\t)\n\t\t\t\t.then((slider) => {\n\t\t\t\t\tajax.runAction('catalog.config.isUsedInventoryManagement', {})\n\t\t\t\t\t\t.then((response) => {\n\t\t\t\t\t\t\tif (this.isStoreControlUsed !== response.data)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif (response.data === true)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tthis.close();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tthis.refresh();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (slider?.getData().get('isPresetApplied'))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.showMessage(Loc.getMessage('CRM_CFG_C_SETTINGS_SAVED_SUCCESSFULLY'));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t});\n\t\t},\n\t\trefresh()\n\t\t{\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tajax.runComponentAction('bitrix:crm.config.catalog.settings', 'initialize', {\n\t\t\t\t\tmode: 'class',\n\t\t\t\t\tjson: {}\n\t\t\t\t}).then((response) => {\n\t\t\t\t\tthis.initialize(response.data);\n\t\t\t\t\tresolve();\n\t\t\t\t}).catch((response) => {\n\t\t\t\t\tthis.showResponseErrors(response);\n\t\t\t\t\treject();\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\twait(ms)\n\t\t{\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tresolve();\n\t\t\t\t}, ms);\n\t\t\t});\n\t\t},\n\t\tshowResponseErrors(response)\n\t\t{\n\t\t\tthis.showMessage(\n\t\t\t\tresponse.errors.map(error => error.message).join(', ')\n\t\t\t);\n\t\t},\n\t\tshowMessage(message)\n\t\t{\n\t\t\ttop.BX.loadExt(\"ui.notification\").then(() => {\n\t\t\t\ttop.BX.UI.Notification.Center.notify({content: message,});\n\t\t\t});\n\t\t},\n\t\tinitialize(data)\n\t\t{\n\t\t\tthis.isStoreControlUsed = data.isStoreControlUsed;\n\t\t\tthis.isCommonProductProcessingEnabled = data.isCommonProductProcessingEnabled;\n\t\t\tthis.productsCnt = data.productsCnt;\n\n\t\t\t/**\n\t\t\t * Reservation settings\n\t\t\t */\n\t\t\tthis.reservationEntities = data.reservationEntities;\n\t\t\tif (this.reservationEntities.length > 0) {\n\t\t\t\tthis.currentReservationEntityCode = this.reservationEntities[0].code;\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * Product settings\n\t\t\t */\n\t\t\tthis.initDefaultQuantityTrace = this.defaultQuantityTrace = data.defaultQuantityTrace;\n\t\t\tthis.initDefaultCanBuyZero = this.defaultCanBuyZero = data.defaultCanBuyZero;\n\t\t\tthis.initDefaultSubscribe = this.defaultSubscribe = data.defaultSubscribe;\n\n\t\t\t/**\n\t\t\t * Other settings\n\t\t\t */\n\t\t\tthis.defaultProductVatIncluded = data.defaultProductVatIncluded;\n\t\t\tthis.productCardSliderEnabled = data.productCardSliderEnabled;\n\n\t\t\tthis.isChanged = false;\n\t\t},\n\t\tonReservationSettingsValuesChanged(values, index)\n\t\t{\n\t\t\tthis.reservationEntities[index].settings.values = values;\n\t\t\tthis.markAsChanged();\n\t\t},\n\t\tsave()\n\t\t{\n\t\t\tif (this.isSaving)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.isSaving = true;\n\n\t\t\tthis.saveProductSettings().then(() => {\n\t\t\t\tajax.runComponentAction('bitrix:crm.config.catalog.settings', 'save', {\n\t\t\t\t\tmode: 'class',\n\t\t\t\t\tjson: {\n\t\t\t\t\t\tvalues: {\n\t\t\t\t\t\t\treservationSettings: this.makeReservationSettings(),\n\t\t\t\t\t\t\tproductCardSliderEnabled: this.productCardSliderEnabled,\n\t\t\t\t\t\t\tdefaultProductVatIncluded: this.defaultProductVatIncluded,\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}).then((response) => {\n\t\t\t\t\tthis.isChanged = false;\n\t\t\t\t\tthis.isSaving = false;\n\t\t\t\t\tthis.showMessage(Loc.getMessage('CRM_CFG_C_SETTINGS_SAVED_SUCCESSFULLY'));\n\t\t\t\t\tthis.refresh()\n\t\t\t\t\t\t.then(() => this.wait(700))\n\t\t\t\t\t\t.then(() => this.close());\n\t\t\t\t}).catch((response) => {\n\t\t\t\t\tthis.isChanged = false;\n\t\t\t\t\tthis.isSaving = false;\n\t\t\t\t\tthis.showResponseErrors(response);\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tsaveProductSettings()\n\t\t{\n\t\t\tif (!this.hasProductSettingsChanged)\n\t\t\t{\n\t\t\t\treturn Promise.resolve();\n\t\t\t}\n\n\t\t\tconst productUpdaterOptions = {\n\t\t\t\tpropsData: {\n\t\t\t\t\tsettings: {\n\t\t\t\t\t\tdefault_quantity_trace: this.defaultQuantityTrace ? 'Y' : 'N',\n\t\t\t\t\t\tdefault_can_buy_zero: this.defaultCanBuyZero ? 'Y' : 'N',\n\t\t\t\t\t\tdefault_subscribe: this.defaultSubscribe ? 'Y' : 'N',\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\n\t\t\treturn new Promise((resolve) => {\n\t\t\t\tconst productUpdater = (new ProductUpdater(productUpdaterOptions))\n\t\t\t\t\t.$on('complete', () => {\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t\tif (this.needProgressBarOnProductsUpdating)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.productUpdaterPopup.destroy();\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.$mount();\n\n\t\t\t\tif (this.needProgressBarOnProductsUpdating)\n\t\t\t\t{\n\t\t\t\t\tthis.productUpdaterPopup = new Popup({\n\t\t\t\t\t\tcontent: productUpdater.$el,\n\t\t\t\t\t\twidth: 310,\n\t\t\t\t\t\toverlay: true,\n\t\t\t\t\t\tpadding: 17,\n\t\t\t\t\t\tanimation: 'fading-slide',\n\t\t\t\t\t\tangle: false,\n\t\t\t\t\t});\n\t\t\t\t\tthis.productUpdaterPopup.show();\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tmakeReservationSettings()\n\t\t{\n\t\t\tlet result = {};\n\n\t\t\tfor (let reservationEntity of this.reservationEntities)\n\t\t\t{\n\t\t\t\tresult[reservationEntity.code] = reservationEntity.settings.values;\n\t\t\t}\n\n\t\t\treturn result;\n\t\t},\n\t\tcancel()\n\t\t{\n\t\t\tthis.close();\n\t\t},\n\t\tclose()\n\t\t{\n\t\t\tthis.slider.close();\n\t\t},\n\t\tgetReservationSettingsHint()\n\t\t{\n\t\t\treturn this.getHintContentWrapped(\n\t\t\t\tLoc.getMessage('CRM_CFG_C_SETTINGS_RESERVATION_SETTINGS_HINT'),\n\t\t\t\tHELP_ARTICLE_ID,\n\t\t\t\t'reservation'\n\t\t\t);\n\t\t},\n\t\tgetProductsSettingsHint()\n\t\t{\n\t\t\treturn this.getHintContent(\n\t\t\t\tLoc.getMessage('CRM_CFG_C_SETTINGS_PRODUCTS_SETTINGS_HINT'),\n\t\t\t\tHELP_ARTICLE_ID,\n\t\t\t\t'products'\n\t\t\t);\n\t\t},\n\t\tgetCanBuyZeroHint()\n\t\t{\n\t\t\treturn this.getHintContent(\n\t\t\t\tLoc.getMessage('CRM_CFG_C_SETTINGS_CAN_BUY_ZERO_HINT'),\n\t\t\t\tHELP_ARTICLE_ID,\n\t\t\t\t'products'\n\t\t\t);\n\t\t},\n\t\tgetCanBuyZeroInDocsHint()\n\t\t{\n\t\t\treturn this.getHintContent(\n\t\t\t\t`\n\t\t\t\t\t${Loc.getMessage('CRM_CFG_C_SETTINGS_CAN_BUY_ZERO_IN_DOCS_HINT')}\n\t\t\t\t\t<br/><br/>\n\t\t\t\t\t${Loc.getMessage('CRM_CFG_C_SETTINGS_CAN_BUY_ZERO_IN_DOCS_HINT_DOC_TYPE_RESTRICTIONS')}\n\t\t\t\t\t<br/>\n\t\t\t\t`,\n\t\t\t\tHELP_ARTICLE_ID,\n\t\t\t\t'products'\n\t\t\t);\n\t\t},\n\t\tgetHintContent(content, article, anchor)\n\t\t{\n\t\t\treturn `\n\t\t\t\t${content}\n\t\t\t\t<br/>\n\t\t\t\t${this.getDocumentationLink(Loc.getMessage('CRM_CFG_C_SETTINGS_DETAILS'), article, anchor)}\n\t\t\t`;\n\t\t},\n\t\tgetHintContentWrapped(text, article, anchor)\n\t\t{\n\t\t\treturn this.getDocumentationLink(text, article, anchor);\n\t\t},\n\t\tgetDocumentationLink(text, article, anchor)\n\t\t{\n\t\t\treturn `\n\t\t\t\t<a href=\"javascript:void(0);\" onclick=\"if (top.BX.Helper){top.BX.Helper.show('redirect=detail&code=${article}#${anchor}');}\" class=\"catalog-settings-helper-link\">\n\t\t\t\t\t${text}\n\t\t\t\t</a>\n\t\t\t`;\n\t\t},\n\t\tshowSettingsMenu(e)\n\t\t{\n\t\t\tthis.settingsMenu = new Menu({\n\t\t\t\tbindElement: e.target,\n\t\t\t\tangle: true,\n\t\t\t\toffsetLeft: 20,\n\t\t\t\titems: [{\n\t\t\t\t\ttext: Loc.getMessage('CRM_CFG_C_SETTINGS_TURN_INVENTORY_CONTROL_OFF'),\n\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\tthis.settingsMenu.destroy();\n\t\t\t\t\t\tthis.openStoreControlMaster('disable');\n\t\t\t\t\t}\n\t\t\t\t}],\n\t\t\t});\n\t\t\tthis.settingsMenu.show();\n\t\t},\n\t},\n\tmounted()\n\t{\n\t\tBX.UI.Hint.init(this.$el);\n\t},\n\ttemplate: `\n\t\t<div class=\"catalog-settings-wrapper\">\n\t\t\t<form>\n\t\t\t\t<div class=\"ui-slider-section\">\n\t\t\t\t\t<div class=\"ui-slider-content-box\">\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tstyle=\"display: flex; align-items: center\"\n\t\t\t\t\t\t\tclass=\"ui-slider-heading-4\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_TITLE}}\t\t\n\t\t\t\t\t\t\t<div v-if=\"isStoreControlUsed\" class=\"catalog-settings-main-header-feedback-container\">\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t@click.prevent=\"showSettingsMenu\"\n\t\t\t\t\t\t\t\t\tclass=\"ui-toolbar-right-buttons\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<button class=\"ui-btn ui-btn-light-border ui-btn-icon-setting ui-btn-themes\"></button>\n\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"ui-slider-inner-box\">\n\t\t\t\t\t\t\t<p class=\"ui-slider-paragraph-2\">\n\t\t\t\t\t\t\t\t{{description}}\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"catalog-settings-button-container\">\n\t\t\t\t\t\t\t<template v-if=\"isStoreControlUsed\">\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t@click=\"openStoreControlMaster('edit')\"\n\t\t\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-md ui-btn-light-border ui-btn-width\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_OPEN_SETTINGS}}\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t@click=\"openStoreControlMaster()\"\n\t\t\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-success\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_TURN_INVENTORY_CONTROL_ON}}\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</template>\t\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"catalog-settings-main-settings\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tv-if=\"isReservationUsed\"\n\t\t\t\t\t\tclass=\"ui-slider-section\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div class=\"ui-slider-heading-4\">\n\t\t\t\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_RESERVATION_SETTINGS}}\n\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\tclass=\"ui-hint\"\n\t\t\t\t\t\t\t\tdata-hint-html=\"\"\n\t\t\t\t\t\t\t\tdata-hint-interactivity=\"\"\n\t\t\t\t\t\t\t\t:data-hint=\"getReservationSettingsHint()\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<span class=\"ui-hint-icon\"></span>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"catalog-settings-editor-content-block\">\n\t\t\t\t\t\t\t<div class=\"ui-ctl-label-text\">\n\t\t\t\t\t\t\t\t<label>{{loc.CRM_CFG_C_SETTINGS_RESERVATION_ENTITY}}</label>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-after-icon ui-ctl-dropdown ui-ctl-disabled ui-ctl-w100\">\n\t\t\t\t\t\t\t\t<!--<div class=\"ui-ctl-after ui-ctl-icon-angle\"></div>-->\n\t\t\t\t\t\t\t\t<select\n\t\t\t\t\t\t\t\t\tv-model=\"currentReservationEntityCode\"\n\t\t\t\t\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<option\n\t\t\t\t\t\t\t\t\t\tv-for=\"reservationEntity in reservationEntities\"\n\t\t\t\t\t\t\t\t\t\t:value=\"reservationEntity.code\"\n\t\t\t\t\t\t\t\t\t\t:disabled=\"reservationEntity.code !== 'deal'\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{{reservationEntity.name}}\n\t\t\t\t\t\t\t\t\t</option>\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<reservation\n\t\t\t\t\t\t\tv-for=\"(reservationEntity, index) in reservationEntities\"\n\t\t\t\t\t\t\tv-show=\"reservationEntity.code === currentReservationEntityCode\"\n\t\t\t\t\t\t\t:key=\"reservationEntity.code\"\n\t\t\t\t\t\t\t:settings=\"reservationEntity.settings\"\n\t\t\t\t\t\t\t@change=\"onReservationSettingsValuesChanged($event, index)\"\n\t\t\t\t\t\t></reservation>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"ui-slider-section\">\n\t\t\t\t\t\t<div class=\"ui-slider-heading-4\">\n\t\t\t\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_PRODUCTS_SETTINGS}}\n\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\tclass=\"ui-hint\"\n\t\t\t\t\t\t\t\tdata-hint-html=\"\"\n\t\t\t\t\t\t\t\tdata-hint-interactivity=\"\"\n\t\t\t\t\t\t\t\t:data-hint=\"getProductsSettingsHint()\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<span class=\"ui-hint-icon\"></span>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tv-if=\"isCommonProductProcessingEnabled\"\n\t\t\t\t\t\t\tclass=\"catalog-settings-editor-checkbox-content-block\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-checkbox ui-ctl-w100\">\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\tv-model=\"productCardSliderEnabled\"\n\t\t\t\t\t\t\t\t\t@click=\"markAsChanged\"\n\t\t\t\t\t\t\t\t\tid=\"product_card_slider_enabled\"\n\t\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<label for=\"product_card_slider_enabled\" class=\"ui-ctl-label-text\">\n\t\t\t\t\t\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_PRODUCT_CARD_ENABLE_NEW_CARD}}\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"catalog-settings-editor-checkbox-content-block\">\n\t\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-checkbox ui-ctl-w100\">\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\tv-model=\"defaultSubscribe\"\n\t\t\t\t\t\t\t\t\t@click=\"markAsChanged\"\n\t\t\t\t\t\t\t\t\tid=\"default_subscribe\"\n\t\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<label for=\"default_subscribe\" class=\"ui-ctl-label-text\">\n\t\t\t\t\t\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_PRODUCTS_SETTINGS_DEFAULT_SUBSCRIBE}}\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"catalog-settings-editor-checkbox-content-block\">\n\t\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-checkbox ui-ctl-w100\">\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\tv-model=\"defaultProductVatIncluded\"\n\t\t\t\t\t\t\t\t\t@click=\"markAsChanged\"\n\t\t\t\t\t\t\t\t\tid=\"default_product_vat_included\"\n\t\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<label for=\"default_product_vat_included\" class=\"ui-ctl-label-text\">\n\t\t\t\t\t\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_PRODUCT_CARD_SET_VAT_IN_PRICE_FOR_NEW_PRODUCTS}}\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tv-if=\"isDefaultQuantityTraceVisible\"\n\t\t\t\t\t\t\tclass=\"catalog-settings-editor-checkbox-content-block\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-checkbox ui-ctl-w100\">\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\tv-model=\"defaultQuantityTrace\"\n\t\t\t\t\t\t\t\t\t@click=\"markAsChanged\"\n\t\t\t\t\t\t\t\t\tid=\"default_quantity_trace\"\n\t\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<label for=\"default_quantity_trace\" class=\"ui-ctl-label-text\">\n\t\t\t\t\t\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_PRODUCTS_DEFAULT_QUANTITY_TRACE}}\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div v-if=\"isCanBuyZeroInDocsVisible\" class=\"catalog-settings-editor-checkbox-content-block\">\n\t\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-checkbox ui-ctl-w100\">\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t:checked=\"defaultCanBuyZero\"\n\t\t\t\t\t\t\t\t\tdisabled=\"disabled\"\n\t\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<label class=\"ui-ctl-label-text\">\n\t\t\t\t\t\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_PRODUCTS_SETTINGS_DEFAULT_CAN_BUY_ZERO_IN_DOCS}}\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\tclass=\"ui-hint\"\n\t\t\t\t\t\t\t\t\tdata-hint-html=\"\"\n\t\t\t\t\t\t\t\t\tdata-hint-interactivity=\"\"\n\t\t\t\t\t\t\t\t\t:data-hint=\"getCanBuyZeroInDocsHint()\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<span class=\"ui-hint-icon\"></span>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tv-if=\"isReservationUsed\"\n\t\t\t\t\t\t\tclass=\"catalog-settings-editor-checkbox-content-block\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-checkbox ui-ctl-w100\">\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\tv-model=\"defaultCanBuyZero\"\n\t\t\t\t\t\t\t\t\t@click=\"markAsChanged\"\n\t\t\t\t\t\t\t\t\tid=\"default_can_buy_zero\"\n\t\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<label for=\"default_can_buy_zero\" class=\"ui-ctl-label-text\">\n\t\t\t\t\t\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_PRODUCTS_SETTINGS_DEFAULT_CAN_BUY_ZERO_V2}}\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\tclass=\"ui-hint\"\n\t\t\t\t\t\t\t\t\tdata-hint-html=\"\"\n\t\t\t\t\t\t\t\t\tdata-hint-interactivity=\"\"\n\t\t\t\t\t\t\t\t\t:data-hint=\"getCanBuyZeroHint()\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<span class=\"ui-hint-icon\"></span>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</form>\n\t\t\t<div\n\t\t\t\t:class=\"buttonsPanelClass\"\n\t\t\t>\n\t\t\t\t<div class=\"ui-button-panel ui-button-panel-align-center \">\n\t\t\t\t\t<button\n\t\t\t\t\t\t@click=\"save\"\n\t\t\t\t\t\t:class=\"saveButtonClasses\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_SAVE_BUTTON}}\t\t\t\t\t\n\t\t\t\t\t</button>\n\t\t\t\t\t<a\n\t\t\t\t\t\t@click=\"cancel\"\n\t\t\t\t\t\tclass=\"ui-btn ui-btn-link\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_CANCEL_BUTTON}}\t\t\t\t\t\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div style=\"height: 65px;\"></div>\n\t\t</div>\n\t`\n})\n","import {Const} from './const';\n\nexport default class Slider\n{\n\tstatic open(options = {})\n\t{\n\t\treturn new Promise((resolve) =>\n\t\t{\n\t\t\treturn BX.SidePanel.Instance.open(\n\t\t\t\tConst.url,\n\t\t\t\t{\n\t\t\t\t\twidth: 1000,\n\t\t\t\t\tallowChangeHistory: false,\n\t\t\t\t\tcacheable: false,\n\t\t\t\t\t...options,\n\t\t\t\t}\n\t\t\t);\n\t\t});\n\t}\n}\n"],"names":["computed","loc","Vue","getFilteredPhrases","props","settings","type","Object","required","data","result","scheme","element","code","values","methods","onChanged","$emit","$data","getWrapperClass","mounted","BX","UI","Hint","init","$el","template","ProductSettingsUpdater","params","url","stepOptions","ajaxSessionID","maxExecutionTime","maxOperationCounter","finish","currentState","counter","operationCounter","errorCounter","lastID","ajaxParams","operation","iblocks","iblockIndex","events","key","hasOwnProperty","sessid","bitrix_sessid","lang","message","ajax","loadJSON","proxy","nextStepResult","isPlainObject","parseInt","isNaN","onProgress","allCnt","allCounter","doneCnt","allOperationCounter","currentIblockName","NAME","finishOperation","checkOperation","onComplete","changeSettings","changeSettingsResult","success","loadIblockList","stopOperation","length","getIblock","isArray","iblockReindex","checkIblockIndex","initStep","nextStep","iblockId","ID","COUNT","finalRequest","iblockList","i","get","extend","mixins","LocMixin","progressStyles","width","Math","round","created","startOperation","Const","freeze","HELP_ARTICLE_ID","components","Reservation","initData","isSaving","isChanged","currentReservationEntityCode","isStoreControlUsed","isCommonProductProcessingEnabled","productsCnt","reservationEntities","initDefaultQuantityTrace","initDefaultCanBuyZero","initDefaultSubscribe","defaultQuantityTrace","defaultCanBuyZero","defaultSubscribe","productCardSliderEnabled","defaultProductVatIncluded","initialize","productUpdaterPopup","settingsMenu","slider","SidePanel","Instance","getSlider","isReservationUsed","isReservationUsageViaQuantityTrace","isCanBuyZeroInDocsVisible","isDefaultQuantityTraceVisible","hasProductSettingsChanged","needProgressBarOnProductsUpdating","saveButtonClasses","buttonsPanelClass","description","Loc","getMessage","watch","newVal","oldVal","showWarn","warnPopup","Popup","onPopupClose","destroy","content","Tag","render","maxWidth","overlay","buttons","Button","text","color","Color","PRIMARY","onclick","close","show","markAsChanged","openStoreControlMaster","mode","Slider","open","then","runAction","response","refresh","getData","showMessage","Promise","resolve","reject","runComponentAction","json","catch","showResponseErrors","wait","ms","setTimeout","errors","map","error","join","top","loadExt","Notification","Center","notify","onReservationSettingsValuesChanged","index","save","saveProductSettings","reservationSettings","makeReservationSettings","productUpdaterOptions","propsData","default_quantity_trace","default_can_buy_zero","default_subscribe","productUpdater","ProductUpdater","$on","$mount","padding","animation","angle","reservationEntity","cancel","getReservationSettingsHint","getHintContentWrapped","getProductsSettingsHint","getHintContent","getCanBuyZeroHint","getCanBuyZeroInDocsHint","article","anchor","getDocumentationLink","showSettingsMenu","e","Menu","bindElement","target","offsetLeft","items","options","allowChangeHistory","cacheable"],"mappings":";;;;;;AAEA,gBACA;CACCA,EAAAA,QAAQ,EAAE;CACTC,IAAAA,GADS,iBAET;CACC,aAAOC,UAAG,CAACC,kBAAJ,CAAuB,qBAAvB,CAAP;CACA;CAJQ;CADX,CADA;;;;;;;;ACFA,mBAAe;CACdC,EAAAA,KAAK,EAAE;CACNC,IAAAA,QAAQ,EAAE;CACTC,MAAAA,IAAI,EAAEC,MADG;CAETC,MAAAA,QAAQ,EAAE;CAFD;CADJ,GADO;CAOdC,EAAAA,IAPc,kBAQd;CACC,QAAIC,MAAM,GAAG,EAAb;;CADD,+CAGuB,KAAKL,QAAL,CAAcM,MAHrC;CAAA;;CAAA;CAGC,0DACA;CAAA,YADWC,OACX;CACCF,QAAAA,MAAM,CAACE,OAAO,CAACC,IAAT,CAAN,GAAuB,KAAKR,QAAL,CAAcS,MAAd,CAAqBF,OAAO,CAACC,IAA7B,CAAvB;CACA;CANF;CAAA;CAAA;CAAA;CAAA;;CAQC,WAAOH,MAAP;CACA,GAjBa;CAkBdK,EAAAA,OAAO,EAAE;CACRC,IAAAA,SADQ,uBAER;CACC,WAAKC,KAAL,CAAW,QAAX,EAAqB,KAAKC,KAA1B;CACA,KAJO;CAKRC,IAAAA,eALQ,2BAKQb,IALR,EAMR;CACC,aAAQA,IAAI,KAAK,QAAV,GACJ;CACD,0DAAkD;CADjD,OADI,GAIJ;CACD,iDAAyC;CADxC,OAJH;CAOA;CAdO,GAlBK;CAkCdc,EAAAA,OAlCc,qBAmCd;CACCC,IAAAA,EAAE,CAACC,EAAH,CAAMC,IAAN,CAAWC,IAAX,CAAgB,KAAKC,GAArB;CACA,GArCa;CAsCdC,EAAAA,QAAQ;CAtCM,CAAf;;KCAMC;CAEL,kCAAYC,MAAZ,EACA;CAAA;CACC,SAAKC,GAAL,GAAW,4CAAX;CACA,SAAKC,WAAL,GAAmB;CAClBC,MAAAA,aAAa,EAAE,EADG;CAElBC,MAAAA,gBAAgB,EAAE,EAFA;CAGlBC,MAAAA,mBAAmB,EAAE;CAHH,KAAnB;CAKA,SAAKC,MAAL,GAAc,KAAd;CACA,SAAKC,YAAL,GAAoB;CACnBC,MAAAA,OAAO,EAAE,CADU;CAEnBC,MAAAA,gBAAgB,EAAE,CAFC;CAGnBC,MAAAA,YAAY,EAAE,CAHK;CAInBC,MAAAA,MAAM,EAAE;CAJW,KAApB;CAMA,SAAKC,UAAL,GAAkB;CACjBC,MAAAA,SAAS,EAAE;CADM,KAAlB;CAGA,SAAKC,OAAL,GAAe,EAAf;CACA,SAAKC,WAAL,GAAmB,CAAC,CAApB;CAEA,SAAKb,WAAL,CAAiBC,aAAjB,GAAiC,iBAAjC;CACA,SAAKI,YAAL,CAAkBC,OAAlB,GAA4B,CAA5B;CAEA,SAAKQ,MAAL,GAAchB,MAAM,CAACgB,MAArB;CACA,SAAKvC,QAAL,GAAgBuB,MAAM,CAACvB,QAAvB;CACA;;;;gCAGD;CACC,WAAK,IAAIwC,GAAT,IAAgB,KAAKf,WAArB,EACA;CACC,YAAI,KAAKA,WAAL,CAAiBgB,cAAjB,CAAgCD,GAAhC,CAAJ,EACA;CACC,eAAKL,UAAL,CAAgBK,GAAhB,IAAuB,KAAKf,WAAL,CAAiBe,GAAjB,CAAvB;CACA;CACD;;CACD,WAAK,IAAIA,IAAT,IAAgB,KAAKV,YAArB,EACA;CACC,YAAI,KAAKA,YAAL,CAAkBW,cAAlB,CAAiCD,IAAjC,CAAJ,EACA;CACC,eAAKL,UAAL,CAAgBK,IAAhB,IAAuB,KAAKV,YAAL,CAAkBU,IAAlB,CAAvB;CACA;CACD;;CAED,WAAKL,UAAL,CAAgBO,MAAhB,GAAyB1B,EAAE,CAAC2B,aAAH,EAAzB;CACA,WAAKR,UAAL,CAAgBS,IAAhB,GAAuB5B,EAAE,CAAC6B,OAAH,CAAW,aAAX,CAAvB;CACA7B,MAAAA,EAAE,CAAC8B,IAAH,CAAQC,QAAR,CACC,KAAKvB,GADN,EAEC,KAAKW,UAFN,EAGCnB,EAAE,CAACgC,KAAH,CAAS,KAAKC,cAAd,EAA8B,IAA9B,CAHD;CAKA;;;oCAEc5C,QACf;CACC,UAAIW,EAAE,CAACf,IAAH,CAAQiD,aAAR,CAAsB7C,MAAtB,CAAJ,EACA;CACC,aAAKyB,YAAL,CAAkBI,MAAlB,GAA2B7B,MAAM,CAAC6B,MAAlC;CACA,aAAKT,WAAL,CAAiBG,mBAAjB,GAAuCvB,MAAM,CAACuB,mBAA9C;CAEA,aAAKE,YAAL,CAAkBE,gBAAlB,GAAqCmB,QAAQ,CAAC9C,MAAM,CAAC2B,gBAAR,EAA0B,EAA1B,CAA7C;;CACA,YAAIoB,KAAK,CAAC,KAAKtB,YAAL,CAAkBE,gBAAnB,CAAT,EACA;CACC,eAAKF,YAAL,CAAkBE,gBAAlB,GAAqC,CAArC;CACA;;CAED,aAAKF,YAAL,CAAkBG,YAAlB,GAAiCkB,QAAQ,CAAC9C,MAAM,CAAC4B,YAAR,EAAsB,EAAtB,CAAzC;;CACA,YAAImB,KAAK,CAAC,KAAKtB,YAAL,CAAkBG,YAAnB,CAAT,EACA;CACC,eAAKH,YAAL,CAAkBG,YAAlB,GAAiC,CAAjC;CACA;;CAED,YAAI,KAAKM,MAAL,CAAYc,UAAhB,EACA;CACC,eAAKd,MAAL,CAAYc,UAAZ,CAAuB;CACtBC,YAAAA,MAAM,EAAEjD,MAAM,CAACkD,UADO;CAEtBC,YAAAA,OAAO,EAAEnD,MAAM,CAACoD,mBAFM;CAGtBC,YAAAA,iBAAiB,EAAE,KAAKrB,OAAL,CAAa,KAAKC,WAAlB,EAA+BqB;CAH5B,WAAvB;CAKA;;CAED,YAAI,KAAK9B,MAAT,EACA;CACC,eAAK+B,eAAL;CACA,SAHD,MAKA;CACC,eAAKC,cAAL,CAAoBxD,MAAM,CAACuD,eAA3B;CACA;CACD;CACD;;;uCAGD;CACC,WAAK9B,YAAL,CAAkBE,gBAAlB,GAAqC,CAArC;CACA,WAAKF,YAAL,CAAkBG,YAAlB,GAAiC,CAAjC;CACA,WAAKH,YAAL,CAAkBI,MAAlB,GAA2B,CAA3B;CACA,WAAKL,MAAL,GAAc,KAAd;;CAEA,UAAI,KAAKU,MAAL,CAAYuB,UAAhB,EACA;CACC,aAAKvB,MAAL,CAAYuB,UAAZ;CACA;CACD;;;sCAGD;CACC9C,MAAAA,EAAE,CAAC8B,IAAH,CAAQC,QAAR,CACC,KAAKvB,GADN;CAGEkB,QAAAA,MAAM,EAAE1B,EAAE,CAAC2B,aAAH,EAHV;CAIEoB,QAAAA,cAAc,EAAE;CAJlB,SAKK,KAAK/D,QALV,GAOCgB,EAAE,CAACgC,KAAH,CAAS,KAAKgB,oBAAd,EAAoC,IAApC,CAPD;CASA;;;0CAEoB3D,QACrB;CACC,UAAI,CAACW,EAAE,CAACf,IAAH,CAAQiD,aAAR,CAAsB7C,MAAtB,CAAL,EACA;CACC;CACA;;CAED,UAAIA,MAAM,CAAC4D,OAAP,KAAmB,GAAvB,EACA;CACC,aAAKC,cAAL;CACA,OAHD,MAKA;CACC,aAAKC,aAAL;CACA;CACD;;;qCAGD;CACC,WAAKtC,MAAL,GAAc,IAAd;CACA;;;wCAGD;CACC,aAAO,EACN,KAAKQ,OAAL,CAAa+B,MAAb,KAAwB,CAAxB,IACG,KAAK9B,WAAL,GAAmB,CADtB,IAEG,KAAKA,WAAL,IAAoB,KAAKD,OAAL,CAAa+B,MAH9B,CAAP;CAKA;;;sCAGD;CAAA;;CACCpD,MAAAA,EAAE,CAAC8B,IAAH,CAAQC,QAAR,CACC,KAAKvB,GADN,EAEC;CACCkB,QAAAA,MAAM,EAAE1B,EAAE,CAAC2B,aAAH,EADT;CAEC0B,QAAAA,SAAS,EAAE;CAFZ,OAFD,EAMC,UAAChE,MAAD,EAAY;CACX,YAAIW,EAAE,CAACf,IAAH,CAAQqE,OAAR,CAAgBjE,MAAhB,CAAJ,EACA;CACC,UAAA,KAAI,CAACgC,OAAL,GAAehC,MAAf;;CACA,cAAI,KAAI,CAACgC,OAAL,CAAa+B,MAAb,GAAsB,CAA1B,EACA;CACC,YAAA,KAAI,CAAC9B,WAAL,GAAmB,CAAnB;;CACA,YAAA,KAAI,CAACiC,aAAL;CACA,WAJD,MAMA;CACC,YAAA,KAAI,CAACJ,aAAL;CACA;CACD;CACD,OApBF;CAsBA;;;qCAGD;CACC,UAAI,KAAKtC,MAAL,IAAe,CAAC,KAAK2C,gBAAL,EAApB,EACA;CACC;CACA;;CAED,WAAKC,QAAL;CACA,WAAKC,QAAL;CACA;;;gCAGD;CACC,WAAK5C,YAAL,CAAkB6C,QAAlB,GAA6B,KAAKtC,OAAL,CAAa,KAAKC,WAAlB,EAA+BsC,EAA5D;CACA,WAAK9C,YAAL,CAAkBC,OAAlB,GAA4B,KAAKM,OAAL,CAAa,KAAKC,WAAlB,EAA+BuC,KAA3D;CACA,WAAK/C,YAAL,CAAkBE,gBAAlB,GAAqC,CAArC;CACA,WAAKF,YAAL,CAAkBG,YAAlB,GAAiC,CAAjC;CACA,WAAKH,YAAL,CAAkBI,MAAlB,GAA2B,CAA3B;CACA;;;oCAEc7B,QACf;CACC,UAAI,CAAC,CAACA,MAAN,EACA;CACC,aAAKiC,WAAL;;CACA,YAAI,KAAKA,WAAL,IAAoB,KAAKD,OAAL,CAAa+B,MAAjC,IAA2C,KAAKtC,YAAL,CAAkBG,YAAlB,GAAiC,CAAhF,EACA;CACC,eAAK2B,eAAL;;CACA,cAAI,KAAK9B,YAAL,CAAkBG,YAAlB,IAAkC,CAAtC,EACA;CACC,iBAAK6C,YAAL;CACA;CACD,SAPD,MASA;CACC,eAAKL,QAAL;CACA,eAAKC,QAAL;CACA;CACD,OAhBD,MAkBA;CACC,aAAKA,QAAL;CACA;CACD;;;oCAGD;CACC,UAAIK,UAAU,GAAG,EAAjB;;CAEA,UAAI,KAAK1C,OAAL,CAAa+B,MAAb,GAAsB,CAA1B,EACA;CACC,aAAK,IAAIY,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAK3C,OAAL,CAAa+B,MAAjC,EAAyCY,CAAC,EAA1C,EACA;CACCD,UAAAA,UAAU,CAACA,UAAU,CAACX,MAAZ,CAAV,GAAgC,KAAK/B,OAAL,CAAa2C,CAAb,EAAgBJ,EAAhD;CACA;;CAED5D,QAAAA,EAAE,CAAC8B,IAAH,CAAQmC,GAAR,CACC,KAAKzD,GADN,EAEC;CACCkB,UAAAA,MAAM,EAAE1B,EAAE,CAAC2B,aAAH,EADT;CAECmC,UAAAA,YAAY,EAAE,GAFf;CAGCC,UAAAA,UAAU,EAAVA;CAHD,SAFD;CAQA;CACD;;;;;AC/OF,sBAAelF,UAAG,CAACqF,MAAJ,CAAW;CACzBC,EAAAA,MAAM,EAAE,CAACC,QAAD,CADiB;CAEzBrF,EAAAA,KAAK,EAAE;CACNC,IAAAA,QAAQ,EAAE;CACTC,MAAAA,IAAI,EAAEC,MADG;CAETC,MAAAA,QAAQ,EAAE;CAFD;CADJ,GAFkB;CAQzBC,EAAAA,IARyB,kBASzB;CACC,WAAO;CACNsD,MAAAA,iBAAiB,EAAE,IADb;CAENJ,MAAAA,MAAM,EAAE,CAFF;CAGNE,MAAAA,OAAO,EAAE;CAHH,KAAP;CAKA,GAfwB;CAgBzB7D,EAAAA,QAAQ,EAAE;CACT0F,IAAAA,cADS,4BAET;CACC,UAAIC,KAAK,GAAG,CAAZ;;CACA,UAAI,KAAKhC,MAAL,GAAc,CAAlB,EACA;CACCgC,QAAAA,KAAK,GAAGC,IAAI,CAACC,KAAL,CAAY,KAAKhC,OAAL,GAAe,KAAKF,MAArB,GAA+B,GAA1C,CAAR;CACA;;CAED,aAAO;CACNgC,QAAAA,KAAK,EAAEA,KAAK,GAAG;CADT,OAAP;CAGA;CAZQ,GAhBe;CA8BzBG,EAAAA,OA9ByB,qBA+BzB;CAAA;;CACE,QAAInE,sBAAJ,CAA2B;CAC3BtB,MAAAA,QAAQ,EAAE,KAAKA,QADY;CAE3BuC,MAAAA,MAAM,EAAE;CACPc,QAAAA,UAAU,EAAE,oBAACjD,IAAD,EAAU;CACrB,UAAA,KAAI,CAACsD,iBAAL,GAAyBtD,IAAI,CAACsD,iBAA9B;CACA,UAAA,KAAI,CAACJ,MAAL,GAAclD,IAAI,CAACkD,MAAnB;CACA,UAAA,KAAI,CAACE,OAAL,GAAepD,IAAI,CAACoD,OAApB;CACA,SALM;CAMPM,QAAAA,UAAU,EAAE,sBAAM;CACjB,UAAA,KAAI,CAAClD,KAAL,CAAW,UAAX;CACA;CARM;CAFmB,KAA3B,CAAD,CAYI8E,cAZJ;CAaA,GA7CwB;CA8CzBrE,EAAAA,QAAQ;CA9CiB,CAAX,CAAf;;CCJO,IAAMsE,KAAK,GAAGzF,MAAM,CAAC0F,MAAP,CAAc;CAClCpE,EAAAA,GAAG,EAAE;CAD6B,CAAd,CAAd;;;;;;;;;;;;;;;;;CCYP,IAAMqE,eAAe,GAAG,QAAxB;AAEA,WAAehG,UAAG,CAACqF,MAAJ,CAAW;CACzBC,EAAAA,MAAM,EAAE,CAACC,QAAD,CADiB;CAEzBU,EAAAA,UAAU,EAAE;CACX,mBAAeC;CADJ,GAFa;CAKzBhG,EAAAA,KAAK,EAAE;CACNiG,IAAAA,QAAQ,EAAE;CACT/F,MAAAA,IAAI,EAAEC,MADG;CAETC,MAAAA,QAAQ,EAAE;CAFD;CADJ,GALkB;CAWzBC,EAAAA,IAXyB,kBAWlB;CACN,WAAO;CACN;;;CAGA6F,MAAAA,QAAQ,EAAE,KAJJ;CAKNC,MAAAA,SAAS,EAAE,KALL;CAMNC,MAAAA,4BAA4B,EAAE,IANxB;;CAON;;;CAGAC,MAAAA,kBAAkB,EAAE,IAVd;CAWNC,MAAAA,gCAAgC,EAAE,IAX5B;CAYNC,MAAAA,WAAW,EAAE,IAZP;;CAaN;;;CAGAC,MAAAA,mBAAmB,EAAE,EAhBf;;CAiBN;;;CAGAC,MAAAA,wBAAwB,EAAE,IApBpB;CAqBNC,MAAAA,qBAAqB,EAAE,IArBjB;CAsBNC,MAAAA,oBAAoB,EAAE,IAtBhB;CAuBNC,MAAAA,oBAAoB,EAAE,IAvBhB;CAwBNC,MAAAA,iBAAiB,EAAE,IAxBb;CAyBNC,MAAAA,gBAAgB,EAAE,IAzBZ;;CA0BN;;;CAGAC,MAAAA,wBAAwB,EAAE,IA7BpB;CA8BNC,MAAAA,yBAAyB,EAAE;CA9BrB,KAAP;CAgCA,GA5CwB;CA6CzBtB,EAAAA,OA7CyB,qBA8CzB;CACC,SAAKuB,UAAL,CAAgB,KAAKhB,QAArB;CACA,SAAKiB,mBAAL,GAA2B,IAA3B;CACA,SAAKC,YAAL,GAAoB,IAApB;CACA,SAAKC,MAAL,GAAcnG,EAAE,CAACoG,SAAH,CAAaC,QAAb,CAAsBC,SAAtB,CAAgC3B,KAAK,CAACnE,GAAtC,CAAd;CACA,GAnDwB;CAoDzB7B,EAAAA,QAAQ,EAAE;CACT4H,IAAAA,iBADS,+BAET;CACC,aACC,KAAKnB,kBAAL,IACG,KAAKoB,kCAFT;CAIA,KAPQ;CAQTC,IAAAA,yBARS,uCAST;CACC,aAAO,KAAKrB,kBAAZ;CACA,KAXQ;CAYTsB,IAAAA,6BAZS,2CAaT;CACC,aAAO,KAAKF,kCAAZ;CACA,KAfQ;CAgBTA,IAAAA,kCAhBS,gDAiBT;CACC,aACC,CAAC,KAAKpB,kBAAN,IACG,KAAKI,wBAFT;CAIA,KAtBQ;CAuBTmB,IAAAA,yBAvBS,uCAwBT;CACC,aAAO,EACN,KAAKnB,wBAAL,KAAkC,KAAKG,oBAAvC,IACG,KAAKF,qBAAL,KAA+B,KAAKG,iBADvC,IAEG,KAAKF,oBAAL,KAA8B,KAAKG,gBAHhC,CAAP;CAKA,KA9BQ;CA+BTe,IAAAA,iCA/BS,+CAgCT;CACC,aAAO,KAAKtB,WAAL,GAAmB,GAA1B;CACA,KAlCQ;CAmCTuB,IAAAA,iBAnCS,+BAoCT;CACC,aAAO;CACN,kBAAU,IADJ;CAEN,0BAAkB,IAFZ;CAGN,uBAAe,KAAK5B;CAHd,OAAP;CAKA,KA1CQ;CA2CT6B,IAAAA,iBA3CS,+BA4CT;CACC,aAAO;CACN,mCAA2B,IADrB;CAEN,qBAAa,IAFP;CAGN,4BAAoB,IAHd;CAIN,gCAAwB,IAJlB;CAKN,wCAAgC,CAAC,KAAK5B;CALhC,OAAP;CAOA,KApDQ;CAqDT6B,IAAAA,WArDS,yBAsDT;CACC,aAAO,KAAK3B,kBAAL,GACJ4B,aAAG,CAACC,UAAJ,CAAe,yCAAf,CADI,GAEJD,aAAG,CAACC,UAAJ,CAAe,6CAAf,CAFH;CAGA;CA1DQ,GApDe;CAgHzBC,EAAAA,KAAK,EAAE;CACNvB,IAAAA,oBADM,gCACewB,MADf,EACuBC,MADvB,EAEN;CACC,UAAMC,QAAQ,GAAG,KAAKX,6BAAL,IAAuCS,MAAM,KAAK,KAAX,IAAoBC,MAAM,KAAK,IAAvF;;CACA,UAAI,CAACC,QAAL,EACA;CACC;CACA;;CAED,UAAMC,SAAS,GAAG,IAAIC,gBAAJ,CAAU,IAAV,EAAgB,IAAhB,EAAsB;CACvChG,QAAAA,MAAM,EAAE;CACPiG,UAAAA,YAAY,EAAE;CAAA,mBAAMF,SAAS,CAACG,OAAV,EAAN;CAAA;CADP,SAD+B;CAIvCC,QAAAA,OAAO,EAAEC,aAAG,CAACC,MAAN,oBAGFZ,aAAG,CAACC,UAAJ,CAAe,kDAAf,CAHE,EAMFD,aAAG,CAACC,UAAJ,CAAe,iDAAf,CANE,CAJgC;CAcvCY,QAAAA,QAAQ,EAAE,GAd6B;CAevCC,QAAAA,OAAO,EAAE,IAf8B;CAgBvCC,QAAAA,OAAO,EAAE,CACR,IAAIC,iBAAJ,CAAW;CACVC,UAAAA,IAAI,EAAGjB,aAAG,CAACC,UAAJ,CAAe,0BAAf,CADG;CAEViB,UAAAA,KAAK,EAAEF,iBAAM,CAACG,KAAP,CAAaC,OAFV;CAGVC,UAAAA,OAAO,EAAE;CAAA,mBAAMf,SAAS,CAACgB,KAAV,EAAN;CAAA;CAHC,SAAX,CADQ;CAhB8B,OAAtB,CAAlB;CAwBAhB,MAAAA,SAAS,CAACiB,IAAV;CACA;CAlCK,GAhHkB;CAoJzB7I,EAAAA,OAAO,EAAE;CACR8I,IAAAA,aADQ,2BAER;CACC,WAAKtD,SAAL,GAAiB,IAAjB;CACA,KAJO;CAKRuD,IAAAA,sBALQ,oCAMR;CAAA;;CAAA,UADuBC,IACvB,uEAD8B,EAC9B;CACC,UAAIC,uBAAJ,GAAaC,IAAb,CACC,8EAA8EF,IAD/E,EAEC,EAFD,EAIEG,IAJF,CAIO,UAAC1C,MAAD,EAAY;CACjBrE,QAAAA,cAAI,CAACgH,SAAL,CAAe,0CAAf,EAA2D,EAA3D,EACED,IADF,CACO,UAACE,QAAD,EAAc;CACnB,cAAI,KAAI,CAAC3D,kBAAL,KAA4B2D,QAAQ,CAAC3J,IAAzC,EACA;CACC,gBAAI2J,QAAQ,CAAC3J,IAAT,KAAkB,IAAtB,EACA;CACC,cAAA,KAAI,CAACkJ,KAAL;CACA,aAHD,MAKA;CACC,cAAA,KAAI,CAACU,OAAL;CACA;CACD;;CACD,cAAI7C,MAAJ,aAAIA,MAAJ,uBAAIA,MAAM,CAAE8C,OAAR,GAAkBhF,GAAlB,CAAsB,iBAAtB,CAAJ,EACA;CACC,YAAA,KAAI,CAACiF,WAAL,CAAiBlC,aAAG,CAACC,UAAJ,CAAe,uCAAf,CAAjB;CACA;CACD,SAjBF;CAkBA,OAvBF;CAwBA,KA/BO;CAgCR+B,IAAAA,OAhCQ,qBAiCR;CAAA;;CACC,aAAO,IAAIG,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;CACvCvH,QAAAA,cAAI,CAACwH,kBAAL,CAAwB,oCAAxB,EAA8D,YAA9D,EAA4E;CAC3EZ,UAAAA,IAAI,EAAE,OADqE;CAE3Ea,UAAAA,IAAI,EAAE;CAFqE,SAA5E,EAGGV,IAHH,CAGQ,UAACE,QAAD,EAAc;CACrB,UAAA,MAAI,CAAC/C,UAAL,CAAgB+C,QAAQ,CAAC3J,IAAzB;;CACAgK,UAAAA,OAAO;CACP,SAND,EAMGI,KANH,CAMS,UAACT,QAAD,EAAc;CACtB,UAAA,MAAI,CAACU,kBAAL,CAAwBV,QAAxB;;CACAM,UAAAA,MAAM;CACN,SATD;CAUA,OAXM,CAAP;CAYA,KA9CO;CA+CRK,IAAAA,IA/CQ,gBA+CHC,EA/CG,EAgDR;CACC,aAAO,IAAIR,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;CACvCO,QAAAA,UAAU,CAAC,YAAM;CAChBR,UAAAA,OAAO;CACP,SAFS,EAEPO,EAFO,CAAV;CAGA,OAJM,CAAP;CAKA,KAtDO;CAuDRF,IAAAA,kBAvDQ,8BAuDWV,QAvDX,EAwDR;CACC,WAAKG,WAAL,CACCH,QAAQ,CAACc,MAAT,CAAgBC,GAAhB,CAAoB,UAAAC,KAAK;CAAA,eAAIA,KAAK,CAAClI,OAAV;CAAA,OAAzB,EAA4CmI,IAA5C,CAAiD,IAAjD,CADD;CAGA,KA5DO;CA6DRd,IAAAA,WA7DQ,uBA6DIrH,OA7DJ,EA8DR;CACCoI,MAAAA,GAAG,CAACjK,EAAJ,CAAOkK,OAAP,CAAe,iBAAf,EAAkCrB,IAAlC,CAAuC,YAAM;CAC5CoB,QAAAA,GAAG,CAACjK,EAAJ,CAAOC,EAAP,CAAUkK,YAAV,CAAuBC,MAAvB,CAA8BC,MAA9B,CAAqC;CAAC3C,UAAAA,OAAO,EAAE7F;CAAV,SAArC;CACA,OAFD;CAGA,KAlEO;CAmERmE,IAAAA,UAnEQ,sBAmEG5G,IAnEH,EAoER;CACC,WAAKgG,kBAAL,GAA0BhG,IAAI,CAACgG,kBAA/B;CACA,WAAKC,gCAAL,GAAwCjG,IAAI,CAACiG,gCAA7C;CACA,WAAKC,WAAL,GAAmBlG,IAAI,CAACkG,WAAxB;CAEA;;;;CAGA,WAAKC,mBAAL,GAA2BnG,IAAI,CAACmG,mBAAhC;;CACA,UAAI,KAAKA,mBAAL,CAAyBnC,MAAzB,GAAkC,CAAtC,EAAyC;CACxC,aAAK+B,4BAAL,GAAoC,KAAKI,mBAAL,CAAyB,CAAzB,EAA4B/F,IAAhE;CACA;CAED;;;;;CAGA,WAAKgG,wBAAL,GAAgC,KAAKG,oBAAL,GAA4BvG,IAAI,CAACuG,oBAAjE;CACA,WAAKF,qBAAL,GAA6B,KAAKG,iBAAL,GAAyBxG,IAAI,CAACwG,iBAA3D;CACA,WAAKF,oBAAL,GAA4B,KAAKG,gBAAL,GAAwBzG,IAAI,CAACyG,gBAAzD;CAEA;;;;CAGA,WAAKE,yBAAL,GAAiC3G,IAAI,CAAC2G,yBAAtC;CACA,WAAKD,wBAAL,GAAgC1G,IAAI,CAAC0G,wBAArC;CAEA,WAAKZ,SAAL,GAAiB,KAAjB;CACA,KA/FO;CAgGRoF,IAAAA,kCAhGQ,8CAgG2B7K,MAhG3B,EAgGmC8K,KAhGnC,EAiGR;CACC,WAAKhF,mBAAL,CAAyBgF,KAAzB,EAAgCvL,QAAhC,CAAyCS,MAAzC,GAAkDA,MAAlD;CACA,WAAK+I,aAAL;CACA,KApGO;CAqGRgC,IAAAA,IArGQ,kBAsGR;CAAA;;CACC,UAAI,KAAKvF,QAAT,EACA;CACC;CACA;;CAED,WAAKA,QAAL,GAAgB,IAAhB;CAEA,WAAKwF,mBAAL,GAA2B5B,IAA3B,CAAgC,YAAM;CACrC/G,QAAAA,cAAI,CAACwH,kBAAL,CAAwB,oCAAxB,EAA8D,MAA9D,EAAsE;CACrEZ,UAAAA,IAAI,EAAE,OAD+D;CAErEa,UAAAA,IAAI,EAAE;CACL9J,YAAAA,MAAM,EAAE;CACPiL,cAAAA,mBAAmB,EAAE,MAAI,CAACC,uBAAL,EADd;CAEP7E,cAAAA,wBAAwB,EAAE,MAAI,CAACA,wBAFxB;CAGPC,cAAAA,yBAAyB,EAAE,MAAI,CAACA;CAHzB;CADH;CAF+D,SAAtE,EASG8C,IATH,CASQ,UAACE,QAAD,EAAc;CACrB,UAAA,MAAI,CAAC7D,SAAL,GAAiB,KAAjB;CACA,UAAA,MAAI,CAACD,QAAL,GAAgB,KAAhB;;CACA,UAAA,MAAI,CAACiE,WAAL,CAAiBlC,aAAG,CAACC,UAAJ,CAAe,uCAAf,CAAjB;;CACA,UAAA,MAAI,CAAC+B,OAAL,GACEH,IADF,CACO;CAAA,mBAAM,MAAI,CAACa,IAAL,CAAU,GAAV,CAAN;CAAA,WADP,EAEEb,IAFF,CAEO;CAAA,mBAAM,MAAI,CAACP,KAAL,EAAN;CAAA,WAFP;CAGA,SAhBD,EAgBGkB,KAhBH,CAgBS,UAACT,QAAD,EAAc;CACtB,UAAA,MAAI,CAAC7D,SAAL,GAAiB,KAAjB;CACA,UAAA,MAAI,CAACD,QAAL,GAAgB,KAAhB;;CACA,UAAA,MAAI,CAACwE,kBAAL,CAAwBV,QAAxB;CACA,SApBD;CAqBA,OAtBD;CAuBA,KArIO;CAsIR0B,IAAAA,mBAtIQ,iCAuIR;CAAA;;CACC,UAAI,CAAC,KAAK9D,yBAAV,EACA;CACC,eAAOwC,OAAO,CAACC,OAAR,EAAP;CACA;;CAED,UAAMwB,qBAAqB,GAAG;CAC7BC,QAAAA,SAAS,EAAE;CACV7L,UAAAA,QAAQ,EAAE;CACT8L,YAAAA,sBAAsB,EAAE,KAAKnF,oBAAL,GAA4B,GAA5B,GAAkC,GADjD;CAEToF,YAAAA,oBAAoB,EAAE,KAAKnF,iBAAL,GAAyB,GAAzB,GAA+B,GAF5C;CAGToF,YAAAA,iBAAiB,EAAE,KAAKnF,gBAAL,GAAwB,GAAxB,GAA8B;CAHxC;CADA;CADkB,OAA9B;CAUA,aAAO,IAAIsD,OAAJ,CAAY,UAACC,OAAD,EAAa;CAC/B,YAAM6B,cAAc,GAAI,IAAIC,cAAJ,CAAmBN,qBAAnB,CAAD,CACrBO,GADqB,CACjB,UADiB,EACL,YAAM;CACtB/B,UAAAA,OAAO;;CACP,cAAI,MAAI,CAACxC,iCAAT,EACA;CACC,YAAA,MAAI,CAACX,mBAAL,CAAyBwB,OAAzB;CACA;CACD,SAPqB,EAQrB2D,MARqB,EAAvB;;CAUA,YAAI,MAAI,CAACxE,iCAAT,EACA;CACC,UAAA,MAAI,CAACX,mBAAL,GAA2B,IAAIsB,gBAAJ,CAAU;CACpCG,YAAAA,OAAO,EAAEuD,cAAc,CAAC7K,GADY;CAEpCkE,YAAAA,KAAK,EAAE,GAF6B;CAGpCwD,YAAAA,OAAO,EAAE,IAH2B;CAIpCuD,YAAAA,OAAO,EAAE,EAJ2B;CAKpCC,YAAAA,SAAS,EAAE,cALyB;CAMpCC,YAAAA,KAAK,EAAE;CAN6B,WAAV,CAA3B;;CAQA,UAAA,MAAI,CAACtF,mBAAL,CAAyBsC,IAAzB;CACA;CACD,OAvBM,CAAP;CAwBA,KA/KO;CAgLRoC,IAAAA,uBAhLQ,qCAiLR;CACC,UAAItL,MAAM,GAAG,EAAb;;CADD,mDAG+B,KAAKkG,mBAHpC;CAAA;;CAAA;CAGC,4DACA;CAAA,cADSiG,iBACT;CACCnM,UAAAA,MAAM,CAACmM,iBAAiB,CAAChM,IAAnB,CAAN,GAAiCgM,iBAAiB,CAACxM,QAAlB,CAA2BS,MAA5D;CACA;CANF;CAAA;CAAA;CAAA;CAAA;;CAQC,aAAOJ,MAAP;CACA,KA1LO;CA2LRoM,IAAAA,MA3LQ,oBA4LR;CACC,WAAKnD,KAAL;CACA,KA9LO;CA+LRA,IAAAA,KA/LQ,mBAgMR;CACC,WAAKnC,MAAL,CAAYmC,KAAZ;CACA,KAlMO;CAmMRoD,IAAAA,0BAnMQ,wCAoMR;CACC,aAAO,KAAKC,qBAAL,CACN3E,aAAG,CAACC,UAAJ,CAAe,8CAAf,CADM,EAENpC,eAFM,EAGN,aAHM,CAAP;CAKA,KA1MO;CA2MR+G,IAAAA,uBA3MQ,qCA4MR;CACC,aAAO,KAAKC,cAAL,CACN7E,aAAG,CAACC,UAAJ,CAAe,2CAAf,CADM,EAENpC,eAFM,EAGN,UAHM,CAAP;CAKA,KAlNO;CAmNRiH,IAAAA,iBAnNQ,+BAoNR;CACC,aAAO,KAAKD,cAAL,CACN7E,aAAG,CAACC,UAAJ,CAAe,sCAAf,CADM,EAENpC,eAFM,EAGN,UAHM,CAAP;CAKA,KA1NO;CA2NRkH,IAAAA,uBA3NQ,qCA4NR;CACC,aAAO,KAAKF,cAAL,uBAEH7E,aAAG,CAACC,UAAJ,CAAe,8CAAf,CAFG,+CAIHD,aAAG,CAACC,UAAJ,CAAe,oEAAf,CAJG,kCAONpC,eAPM,EAQN,UARM,CAAP;CAUA,KAvOO;CAwORgH,IAAAA,cAxOQ,0BAwOOnE,OAxOP,EAwOgBsE,OAxOhB,EAwOyBC,MAxOzB,EAyOR;CACC,iCACGvE,OADH,sCAGG,KAAKwE,oBAAL,CAA0BlF,aAAG,CAACC,UAAJ,CAAe,4BAAf,CAA1B,EAAwE+E,OAAxE,EAAiFC,MAAjF,CAHH;CAKA,KA/OO;CAgPRN,IAAAA,qBAhPQ,iCAgPc1D,IAhPd,EAgPoB+D,OAhPpB,EAgP6BC,MAhP7B,EAiPR;CACC,aAAO,KAAKC,oBAAL,CAA0BjE,IAA1B,EAAgC+D,OAAhC,EAAyCC,MAAzC,CAAP;CACA,KAnPO;CAoPRC,IAAAA,oBApPQ,gCAoPajE,IApPb,EAoPmB+D,OApPnB,EAoP4BC,MApP5B,EAqPR;CACC,uIACsGD,OADtG,cACiHC,MADjH,uEAEIhE,IAFJ;CAKA,KA3PO;CA4PRkE,IAAAA,gBA5PQ,4BA4PSC,CA5PT,EA6PR;CAAA;;CACC,WAAKlG,YAAL,GAAoB,IAAImG,eAAJ,CAAS;CAC5BC,QAAAA,WAAW,EAAEF,CAAC,CAACG,MADa;CAE5BhB,QAAAA,KAAK,EAAE,IAFqB;CAG5BiB,QAAAA,UAAU,EAAE,EAHgB;CAI5BC,QAAAA,KAAK,EAAE,CAAC;CACPxE,UAAAA,IAAI,EAAEjB,aAAG,CAACC,UAAJ,CAAe,+CAAf,CADC;CAEPoB,UAAAA,OAAO,EAAE,mBAAM;CACd,YAAA,MAAI,CAACnC,YAAL,CAAkBuB,OAAlB;;CACA,YAAA,MAAI,CAACgB,sBAAL,CAA4B,SAA5B;CACA;CALM,SAAD;CAJqB,OAAT,CAApB;CAYA,WAAKvC,YAAL,CAAkBqC,IAAlB;CACA;CA3QO,GApJgB;CAiazBxI,EAAAA,OAjayB,qBAkazB;CACCC,IAAAA,EAAE,CAACC,EAAH,CAAMC,IAAN,CAAWC,IAAX,CAAgB,KAAKC,GAArB;CACA,GApawB;CAqazBC,EAAAA,QAAQ;CAraiB,CAAX,CAAf;;KCZqBsI;;;;;;;4BAGpB;CAAA,UADY+D,OACZ,uEADsB,EACtB;CACC,aAAO,IAAIvD,OAAJ,CAAY,UAACC,OAAD,EACnB;CACC,eAAOpJ,EAAE,CAACoG,SAAH,CAAaC,QAAb,CAAsBuC,IAAtB,CACNjE,KAAK,CAACnE,GADA;CAGL8D,UAAAA,KAAK,EAAE,IAHF;CAILqI,UAAAA,kBAAkB,EAAE,KAJf;CAKLC,UAAAA,SAAS,EAAE;CALN,WAMFF,OANE,EAAP;CASA,OAXM,CAAP;CAYA;;;;;;;;;;;;"}