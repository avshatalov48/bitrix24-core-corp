{"version":3,"file":"catalog.bundle.js","sources":["../src/loc.js","../src/reservation.js","../src/product-updater/updater.js","../src/product-updater/template.js","../src/const.js","../src/app.js","../src/slider.js"],"sourcesContent":["import {Vue} from 'ui.vue';\n\nexport default\n{\n\tcomputed: {\n\t\tloc()\n\t\t{\n\t\t\treturn Vue.getFilteredPhrases('CRM_CFG_C_SETTINGS_');\n\t\t}\n\t}\n}\n","export default {\n\tprops: {\n\t\tsettings: {\n\t\t\ttype: Object,\n\t\t\trequired: true\n\t\t},\n\t},\n\tdata ()\n\t{\n\t\tlet result = {};\n\n\t\tfor (const element of this.settings.scheme)\n\t\t{\n\t\t\tresult[element.code] = this.settings.values[element.code];\n\t\t}\n\n\t\treturn result;\n\t},\n\tmethods: {\n\t\tonChanged()\n\t\t{\n\t\t\tthis.$emit('change', this.$data);\n\t\t},\n\t\tgetWrapperClass(type)\n\t\t{\n\t\t\treturn (type === 'option')\n\t\t\t\t? {\n\t\t\t\t\t'catalog-settings-editor-checkbox-content-block': true,\n\t\t\t\t}\n\t\t\t\t: {\n\t\t\t\t\t'catalog-settings-editor-content-block': true,\n\t\t\t\t};\n\t\t}\n\t},\n\tmounted()\n\t{\n\t\tBX.UI.Hint.init(this.$el);\n\t},\n\ttemplate: `\n\t\t<div>\n\t\t\t<div\n\t\t\t\tv-for=\"setting in settings.scheme\"\n\t\t\t\t:class=\"getWrapperClass(setting.type)\"\n\t\t\t>\n\t\t\t\t<template v-if=\"setting.type === 'list'\">\n\t\t\t\t\t<div class=\"ui-ctl-label-text\">\n\t\t\t\t\t\t<label>{{setting.name}}</label>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"ui-ctl ui-ctl-after-icon ui-ctl-dropdown ui-ctl-w100\">\n\t\t\t\t\t\t<div class=\"ui-ctl-after ui-ctl-icon-angle\"></div>\n\t\t\t\t\t\t<select\n\t\t\t\t\t\t\tv-model=\"$data[setting.code]\"\n\t\t\t\t\t\t\t@change=\"onChanged\"\n\t\t\t\t\t\t\t:disabled=\"setting.disabled\"\n\t\t\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<option v-for=\"value in setting.values\" :value=\"value.code\">\n\t\t\t\t\t\t\t\t{{value.name}}\n\t\t\t\t\t\t\t</option>\t\t\t\t\t\t\n\t\t\t\t\t\t</select>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t\t<template v-if=\"setting.type === 'text'\">\n\t\t\t\t\t<div class=\"ui-ctl-label-text\">\n\t\t\t\t\t\t<label>{{setting.name}}</label>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"ui-ctl ui-ctl-textbox ui-ctl-w100\">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tv-model=\"$data[setting.code]\"\n\t\t\t\t\t\t\t@change=\"onChanged\"\n\t\t\t\t\t\t\t:disabled=\"setting.disabled\"\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t\t>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t\t<template v-if=\"setting.type === 'int'\">\n\t\t\t\t\t<div class=\"ui-ctl-label-text\">\n\t\t\t\t\t\t<label>{{setting.name}}</label>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"ui-ctl ui-ctl-textbox ui-ctl-w100\">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tv-model=\"$data[setting.code]\"\n\t\t\t\t\t\t\t@input=\"onChanged\"\n\t\t\t\t\t\t\t:disabled=\"setting.disabled\"\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t\t>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t\t<template v-if=\"setting.type === 'option'\">\n\t\t\t\t\t<div class=\"ui-ctl ui-ctl-checkbox ui-ctl-w100\">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tv-model=\"$data[setting.code]\"\n\t\t\t\t\t\t\t@change=\"onChanged\"\n\t\t\t\t\t\t\t:id=\"setting.code + '_' + $vnode.key\"\n\t\t\t\t\t\t\t:disabled=\"setting.disabled\"\n\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t<label\n\t\t\t\t\t\t\t:for=\"setting.code + '_' + $vnode.key\"\n\t\t\t\t\t\t\tclass=\"ui-ctl-label-text\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{setting.name}}\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tv-if=\"setting.description\"\n\t\t\t\t\t\t\tclass=\"ui-hint\"\n\t\t\t\t\t\t\t:data-hint=\"setting.description\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span class=\"ui-hint-icon\"></span>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t</div>\n\t\t</div>\n\t`\n}\n","class ProductSettingsUpdater\n{\n\tconstructor(params)\n\t{\n\t\tthis.url = '/bitrix/tools/catalog/product_settings.php';\n\t\tthis.stepOptions = {\n\t\t\tajaxSessionID: '',\n\t\t\tmaxExecutionTime: 30,\n\t\t\tmaxOperationCounter: 10,\n\t\t};\n\t\tthis.finish = false;\n\t\tthis.currentState = {\n\t\t\tcounter: 0,\n\t\t\toperationCounter: 0,\n\t\t\terrorCounter: 0,\n\t\t\tlastID: 0,\n\t\t};\n\t\tthis.ajaxParams = {\n\t\t\toperation: 'Y',\n\t\t};\n\t\tthis.iblocks = [];\n\t\tthis.iblockIndex = -1;\n\n\t\tthis.stepOptions.ajaxSessionID = 'productSettings';\n\t\tthis.currentState.counter = 0;\n\n\t\tthis.events = params.events;\n\t\tthis.settings = params.settings;\n\t}\n\n\tnextStep()\n\t{\n\t\tfor (let key in this.stepOptions)\n\t\t{\n\t\t\tif (this.stepOptions.hasOwnProperty(key))\n\t\t\t{\n\t\t\t\tthis.ajaxParams[key] = this.stepOptions[key];\n\t\t\t}\n\t\t}\n\t\tfor (let key in this.currentState)\n\t\t{\n\t\t\tif (this.currentState.hasOwnProperty(key))\n\t\t\t{\n\t\t\t\tthis.ajaxParams[key] = this.currentState[key];\n\t\t\t}\n\t\t}\n\n\t\tthis.ajaxParams.sessid = BX.bitrix_sessid();\n\t\tthis.ajaxParams.lang = BX.message('LANGUAGE_ID');\n\t\tBX.ajax.loadJSON(\n\t\t\tthis.url,\n\t\t\tthis.ajaxParams,\n\t\t\tBX.proxy(this.nextStepResult, this)\n\t\t);\n\t}\n\n\tnextStepResult(result)\n\t{\n\t\tif (BX.type.isPlainObject(result))\n\t\t{\n\t\t\tthis.currentState.lastID = result.lastID;\n\t\t\tthis.stepOptions.maxOperationCounter = result.maxOperationCounter;\n\n\t\t\tthis.currentState.operationCounter = parseInt(result.operationCounter, 10);\n\t\t\tif (isNaN(this.currentState.operationCounter))\n\t\t\t{\n\t\t\t\tthis.currentState.operationCounter = 0;\n\t\t\t}\n\n\t\t\tthis.currentState.errorCounter = parseInt(result.errorCounter, 10);\n\t\t\tif (isNaN(this.currentState.errorCounter))\n\t\t\t{\n\t\t\t\tthis.currentState.errorCounter = 0;\n\t\t\t}\n\n\t\t\tif (this.events.onProgress)\n\t\t\t{\n\t\t\t\tthis.events.onProgress({\n\t\t\t\t\tallCnt: result.allCounter,\n\t\t\t\t\tdoneCnt: result.allOperationCounter,\n\t\t\t\t\tcurrentIblockName: this.iblocks[this.iblockIndex].NAME,\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (this.finish)\n\t\t\t{\n\t\t\t\tthis.finishOperation();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.checkOperation(result.finishOperation);\n\t\t\t}\n\t\t}\n\t}\n\n\tfinishOperation()\n\t{\n\t\tthis.currentState.operationCounter = 0;\n\t\tthis.currentState.errorCounter = 0;\n\t\tthis.currentState.lastID = 0;\n\t\tthis.finish = false;\n\n\t\tif (this.events.onComplete)\n\t\t{\n\t\t\tthis.events.onComplete();\n\t\t}\n\t}\n\n\tstartOperation()\n\t{\n\t\tBX.ajax.loadJSON(\n\t\t\tthis.url,\n\t\t\t{\n\t\t\t\tsessid: BX.bitrix_sessid(),\n\t\t\t\tchangeSettings: 'Y',\n\t\t\t\t...this.settings\n\t\t\t},\n\t\t\tBX.proxy(this.changeSettingsResult, this)\n\t\t);\n\t}\n\n\tchangeSettingsResult(result)\n\t{\n\t\tif (!BX.type.isPlainObject(result))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (result.success === 'Y')\n\t\t{\n\t\t\tthis.loadIblockList();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.stopOperation();\n\t\t}\n\t}\n\n\tstopOperation()\n\t{\n\t\tthis.finish = true;\n\t}\n\n\tcheckIblockIndex()\n\t{\n\t\treturn !(\n\t\t\tthis.iblocks.length === 0\n\t\t\t|| this.iblockIndex < 0\n\t\t\t|| this.iblockIndex >= this.iblocks.length\n\t\t);\n\t}\n\n\tloadIblockList()\n\t{\n\t\tBX.ajax.loadJSON(\n\t\t\tthis.url,\n\t\t\t{\n\t\t\t\tsessid: BX.bitrix_sessid(),\n\t\t\t\tgetIblock: 'Y'\n\t\t\t},\n\t\t\t(result) => {\n\t\t\t\tif (BX.type.isArray(result))\n\t\t\t\t{\n\t\t\t\t\tthis.iblocks = result;\n\t\t\t\t\tif (this.iblocks.length > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.iblockIndex = 0;\n\t\t\t\t\t\tthis.iblockReindex();\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.stopOperation();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t}\n\n\tiblockReindex()\n\t{\n\t\tif (this.finish || !this.checkIblockIndex())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.initStep();\n\t\tthis.nextStep();\n\t}\n\n\tinitStep()\n\t{\n\t\tthis.currentState.iblockId = this.iblocks[this.iblockIndex].ID;\n\t\tthis.currentState.counter = this.iblocks[this.iblockIndex].COUNT;\n\t\tthis.currentState.operationCounter = 0;\n\t\tthis.currentState.errorCounter = 0;\n\t\tthis.currentState.lastID = 0;\n\t}\n\n\tcheckOperation(result)\n\t{\n\t\tif (!!result)\n\t\t{\n\t\t\tthis.iblockIndex++;\n\t\t\tif (this.iblockIndex >= this.iblocks.length || this.currentState.errorCounter > 0)\n\t\t\t{\n\t\t\t\tthis.finishOperation();\n\t\t\t\tif (this.currentState.errorCounter == 0)\n\t\t\t\t{\n\t\t\t\t\tthis.finalRequest();\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.initStep();\n\t\t\t\tthis.nextStep();\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.nextStep();\n\t\t}\n\t}\n\n\tfinalRequest()\n\t{\n\t\tlet iblockList = [];\n\n\t\tif (this.iblocks.length > 0)\n\t\t{\n\t\t\tfor (let i = 0; i < this.iblocks.length; i++)\n\t\t\t{\n\t\t\t\tiblockList[iblockList.length] = this.iblocks[i].ID;\n\t\t\t}\n\n\t\t\tBX.ajax.get(\n\t\t\t\tthis.url,\n\t\t\t\t{\n\t\t\t\t\tsessid: BX.bitrix_sessid(),\n\t\t\t\t\tfinalRequest: 'Y',\n\t\t\t\t\tiblockList,\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t}\n}\n\nexport {\n\tProductSettingsUpdater\n};\n","import {Vue} from 'ui.vue';\nimport {ProductSettingsUpdater} from './updater';\nimport LocMixin from '../loc';\n\nexport default Vue.extend({\n\tmixins: [LocMixin],\n\tprops: {\n\t\tsettings: {\n\t\t\ttype: Object,\n\t\t\trequired: true\n\t\t},\n\t},\n\tdata ()\n\t{\n\t\treturn {\n\t\t\tcurrentIblockName: null,\n\t\t\tallCnt: 0,\n\t\t\tdoneCnt: 0,\n\t\t};\n\t},\n\tcomputed: {\n\t\tprogressStyles()\n\t\t{\n\t\t\tlet width = 0;\n\t\t\tif (this.allCnt > 0)\n\t\t\t{\n\t\t\t\twidth = Math.round((this.doneCnt / this.allCnt) * 100);\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\twidth: width + '%'\n\t\t\t};\n\t\t}\n\t},\n\tcreated()\n\t{\n\t\t(new ProductSettingsUpdater({\n\t\t\tsettings: this.settings,\n\t\t\tevents: {\n\t\t\t\tonProgress: (data) => {\n\t\t\t\t\tthis.currentIblockName = data.currentIblockName;\n\t\t\t\t\tthis.allCnt = data.allCnt;\n\t\t\t\t\tthis.doneCnt = data.doneCnt;\n\t\t\t\t},\n\t\t\t\tonComplete: () => {\n\t\t\t\t\tthis.$emit('complete');\n\t\t\t\t},\n\t\t\t}\n\t\t})).startOperation();\n\t},\n\ttemplate: `\n\t\t<div >\n\t\t\t<div class=\"ui-progressbar ui-progressbar-column\">\n\t\t\t\t<div style=\"font-weight: bold;\" class=\"ui-progressbar-text-before\">\n\t\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_PRODUCT_SETTINGS_UPDATE_TITLE}}\t\t\t\t\n\t\t\t\t</div>\n\t\t\t\t<div class=\"ui-progressbar-track\">\n\t\t\t\t\t<div :style=\"progressStyles\" class=\"ui-progressbar-bar\"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"ui-progressbar-text-after\">\n\t\t\t\t\t{{doneCnt}} {{loc.CRM_CFG_C_SETTINGS_OUT_OF}} {{allCnt}}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div style=\"color: rgb(83, 92, 105); font-size: 12px;\">\n\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_PRODUCT_SETTINGS_UPDATE_WAIT}}\n\t\t\t\t<div\n\t\t\t\t\tv-show=\"currentIblockName\"\n\t\t\t\t\tstyle=\"padding-top: 10px;\"\n\t\t\t\t>\n\t\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_PRODUCT_SETTINGS_CURRENT_CATALOG}}: {{currentIblockName}}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`\n});\n","export const Const = Object.freeze({\n\turl: '/crm/configs/catalog/'\n});\n","import LocMixin from './loc';\nimport Reservation from './reservation';\nimport { Type, Loc, ajax, Tag, Extension, Event, Dom, Runtime, userOptions as UserOptions } from 'main.core';\nimport { Popup } from 'main.popup';\nimport { Button, ButtonColor } from 'ui.buttons';\nimport { StoreSlider } from 'catalog.store-use'\nimport { Vue } from 'ui.vue';\nimport ProductUpdater from './product-updater/template';\nimport { Const } from './const';\nimport 'ui.notification';\nimport 'ui.design-tokens';\nimport 'ui.alerts';\nimport '../css/app.css';\n\nconst HELP_ARTICLE_ID = 15_706_692;\nconst HELP_COST_CALCULATION_MODE_ARTICLE_ID = 17_858_278;\n\nexport default Vue.extend({\n\tcomponents: {\n\t\treservation: Reservation,\n\t},\n\tmixins: [LocMixin],\n\tprops: {\n\t\tinitData: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\t/**\n\t\t\t * State\n\t\t\t */\n\t\t\tisSaving: false,\n\t\t\tisChanged: false,\n\t\t\tcurrentReservationEntityCode: null,\n\t\t\t/**\n\t\t\t *\n\t\t\t */\n\t\t\tisStoreControlUsed: null,\n\t\t\tisStoreBatchUsed: false,\n\t\t\tproductsCnt: null,\n\t\t\tinitCostPriceCalculationMethod: null,\n\t\t\tcostPriceCalculationMethod: null,\n\t\t\tisEmptyCostPriceCalculationMethod: true,\n\t\t\tisHiddenCostPriceCalculationMethodChangeWarning: true,\n\t\t\t/**\n\t\t\t * Reservation settings\n\t\t\t */\n\t\t\treservationEntities: [],\n\t\t\t/**\n\t\t\t * Default products settings\n\t\t\t */\n\t\t\tinitDefaultQuantityTrace: null,\n\t\t\tinitDefaultCanBuyZero: null,\n\t\t\tinitDefaultSubscribe: null,\n\t\t\tinitCheckRightsOnDecreaseStoreAmount: null,\n\t\t\tdefaultQuantityTrace: null,\n\t\t\tdefaultCanBuyZero: null,\n\t\t\tdefaultSubscribe: null,\n\t\t\tcheckRightsOnDecreaseStoreAmount: null,\n\t\t\t/**\n\t\t\t * Product card\n\t\t\t */\n\t\t\tproductCardSliderEnabled: null,\n\t\t\tisCanEnableProductCardSlider: false,\n\t\t\tisBitrix24: false,\n\t\t\tbusProductCardHelpLink: '',\n\t\t\tdefaultProductVatIncluded: null,\n\t\t\tdefaultProductVatId: null,\n\t\t\tvats: [],\n\t\t};\n\t},\n\tcomputed: {\n\t\thasAccessToReservationSettings()\n\t\t{\n\t\t\tif (this.initData.hasAccessToReservationSettings !== undefined)\n\t\t\t{\n\t\t\t\treturn this.initData.hasAccessToReservationSettings === true;\n\t\t\t}\n\n\t\t\treturn true;\n\t\t},\n\t\thasAccessToCatalogSettings()\n\t\t{\n\t\t\tif (this.initData.hasAccessToCatalogSettings !== undefined)\n\t\t\t{\n\t\t\t\treturn this.initData.hasAccessToCatalogSettings === true;\n\t\t\t}\n\n\t\t\treturn true;\n\t\t},\n\t\tisCanChangeOptionCanByZero()\n\t\t{\n\t\t\treturn Extension.getSettings('crm.config.catalog')?.isCanChangeOptionCanByZero === true;\n\t\t},\n\t\tcostPriceCalculationMethods(): []\n\t\t{\n\t\t\treturn Extension.getSettings('crm.config.catalog')?.costPriceCalculationMethods ?? [];\n\t\t},\n\t\tshowNegativeStoreAmountPopup(): boolean\n\t\t{\n\t\t\treturn Extension.getSettings('crm.config.catalog')?.showNegativeStoreAmountPopup === true;\n\t\t},\n\t\tstoreBalancePopupLink(): string\n\t\t{\n\t\t\treturn Extension.getSettings('crm.config.catalog')?.storeBalancePopupLink;\n\t\t},\n\t\tshouldShowBatchMethodSpotlight(): boolean\n\t\t{\n\t\t\treturn (\n\t\t\t\tExtension.getSettings('crm.config.catalog')?.shouldShowBatchMethodSpotlight === true\n\t\t\t\t&& this.isEmptyCostPriceCalculationMethod\n\t\t\t);\n\t\t},\n\t\tisReservationUsed()\n\t\t{\n\t\t\treturn (\n\t\t\t\tthis.isStoreControlUsed\n\t\t\t\t|| this.isReservationUsageViaQuantityTrace\n\t\t\t);\n\t\t},\n\t\tisCanBuyZeroInDocsVisible()\n\t\t{\n\t\t\treturn this.isStoreControlUsed && this.isEmptyCostPriceCalculationMethod;\n\t\t},\n\t\tisDefaultQuantityTraceVisible()\n\t\t{\n\t\t\treturn this.isReservationUsageViaQuantityTrace;\n\t\t},\n\t\tisReservationUsageViaQuantityTrace()\n\t\t{\n\t\t\treturn (\n\t\t\t\t!this.isStoreControlUsed\n\t\t\t\t&& this.initDefaultQuantityTrace\n\t\t\t);\n\t\t},\n\t\thasProductSettingsChanged()\n\t\t{\n\t\t\treturn !(\n\t\t\t\tthis.initDefaultQuantityTrace === this.defaultQuantityTrace\n\t\t\t\t&& this.initDefaultCanBuyZero === this.defaultCanBuyZero\n\t\t\t\t&& this.initDefaultSubscribe === this.defaultSubscribe\n\t\t\t\t&& this.initCheckRightsOnDecreaseStoreAmount === this.checkRightsOnDecreaseStoreAmount\n\t\t\t\t&& this.initCostPriceCalculationMethod === this.costPriceCalculationMethod\n\t\t\t);\n\t\t},\n\t\tneedProgressBarOnProductsUpdating()\n\t\t{\n\t\t\treturn this.productsCnt > 500;\n\t\t},\n\t\tsaveButtonClasses()\n\t\t{\n\t\t\treturn {\n\t\t\t\t'ui-btn': true,\n\t\t\t\t'ui-btn-success': true,\n\t\t\t\t'ui-btn-wait': this.isSaving,\n\t\t\t};\n\t\t},\n\t\tbuttonsPanelClass()\n\t\t{\n\t\t\treturn {\n\t\t\t\t'ui-button-panel-wrapper': true,\n\t\t\t\t'ui-pinner': true,\n\t\t\t\t'ui-pinner-bottom': true,\n\t\t\t\t'ui-pinner-full-width': true,\n\t\t\t\t'ui-button-panel-wrapper-hide': !this.isChanged,\n\t\t\t};\n\t\t},\n\t\tdescription()\n\t\t{\n\t\t\treturn this.isStoreControlUsed\n\t\t\t\t? Loc.getMessage('CRM_CFG_C_SETTINGS_STORE_CONTROL_ACTIVE')\n\t\t\t\t: Loc.getMessage('CRM_CFG_C_SETTINGS_STORE_CONTROL_NOT_ACTIVE');\n\t\t},\n\t},\n\twatch: {\n\t\tdefaultQuantityTrace(newVal, oldVal)\n\t\t{\n\t\t\tconst showWarn = this.isDefaultQuantityTraceVisible && (newVal === false && oldVal === true);\n\t\t\tif (!showWarn)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst warnPopup = new Popup(null, null, {\n\t\t\t\tevents: {\n\t\t\t\t\tonPopupClose: () => warnPopup.destroy(),\n\t\t\t\t},\n\t\t\t\tcontent: Tag.render`\n\t\t\t\t\t<div class=\"catalog-settings-popup-content\">\n\t\t\t\t\t\t<h3>\n\t\t\t\t\t\t\t${Loc.getMessage('CRM_CFG_C_SETTINGS_TURN_OFF_QUANTITY_TRACE_TITLE')}\n\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t<div class=\"catalog-settings-popup-text\">\n\t\t\t\t\t\t\t${Loc.getMessage('CRM_CFG_C_SETTINGS_TURN_OFF_QUANTITY_TRACE_TEXT')}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t`,\n\t\t\t\tmaxWidth: 500,\n\t\t\t\toverlay: true,\n\t\t\t\tbuttons: [\n\t\t\t\t\tnew Button({\n\t\t\t\t\t\ttext: Loc.getMessage('CRM_CFG_C_SETTINGS_CLOSE'),\n\t\t\t\t\t\tcolor: Button.Color.PRIMARY,\n\t\t\t\t\t\tonclick: () => warnPopup.close(),\n\t\t\t\t\t}),\n\t\t\t\t],\n\t\t\t});\n\t\t\twarnPopup.show();\n\t\t},\n\t},\n\tcreated()\n\t{\n\t\tthis.initialize(this.initData);\n\t\tthis.productUpdaterPopup = null;\n\t\tthis.settingsMenu = null;\n\n\t\tlet sliderUrl = Const.url;\n\t\tif (this.configCatalogSource)\n\t\t{\n\t\t\tsliderUrl += `?configCatalogSource=${this.configCatalogSource}`;\n\t\t}\n\t\tthis.slider = BX.SidePanel.Instance.getSlider(sliderUrl);\n\t},\n\tmethods: {\n\t\tmarkAsChanged()\n\t\t{\n\t\t\tthis.isChanged = true;\n\t\t},\n\t\tonEnableProductCardCheckboxClick()\n\t\t{\n\t\t\tif (!this.productCardSliderEnabled)\n\t\t\t{\n\t\t\t\tthis.askToEnableProductCardSlider();\n\t\t\t}\n\n\t\t\tthis.markAsChanged();\n\t\t},\n\t\taskToEnableProductCardSlider()\n\t\t{\n\t\t\tconst askPopup =\t\t\t\tthis.isBitrix24\n\t\t\t\t? this.createWarningProductCardPopupForBitrix24()\n\t\t\t\t: this.createWarningProductCardPopupForBUS();\n\n\t\t\taskPopup.show();\n\t\t},\n\t\tcreateWarningProductCardPopupForBitrix24()\n\t\t{\n\t\t\tconst askPopup = this.createWarningProductCardPopup(\n\t\t\t\tLoc.getMessage('CRM_CFG_C_SETTINGS_PRODUCT_CARD_ENABLE_NEW_CARD_ASK_TEXT'),\n\t\t\t\t[\n\t\t\t\t\tnew Button({\n\t\t\t\t\t\ttext: Loc.getMessage('CRM_CFG_C_SETTINGS_PRODUCT_CARD_ENABLE_NEW_CARD_ASK_DISAGREE'),\n\t\t\t\t\t\tcolor: Button.Color.PRIMARY,\n\t\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\t\tthis.productCardSliderEnabled = false;\n\t\t\t\t\t\t\taskPopup.close();\n\t\t\t\t\t\t},\n\t\t\t\t\t}),\n\t\t\t\t\tnew Button({\n\t\t\t\t\t\ttext: Loc.getMessage('CRM_CFG_C_SETTINGS_PRODUCT_CARD_ENABLE_NEW_CARD_ASK_AGREE'),\n\t\t\t\t\t\tonclick: () => askPopup.close(),\n\t\t\t\t\t}),\n\t\t\t\t],\n\t\t\t\t{\n\t\t\t\t\tonPopupShow: () => {\n\t\t\t\t\t\tconst helpdeskLink = document.getElementById('catalog-settings-new-productcard-popup-helpdesk');\n\t\t\t\t\t\tif (helpdeskLink)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tEvent.bind(helpdeskLink, 'click', () => top.BX.Helper.show('redirect=detail&code=11657084'));\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t);\n\n\t\t\treturn askPopup;\n\t\t},\n\t\tcreateWarningProductCardPopupForBUS()\n\t\t{\n\t\t\tconst askPopup = this.createWarningProductCardPopup(\n\t\t\t\tLoc.getMessage('CRM_CFG_C_SETTINGS_PRODUCT_CARD_ENABLE_NEW_CARD_ASK_BUS_TEXT').replace('#HELP_LINK#', this.busProductCardHelpLink),\n\t\t\t\t[\n\t\t\t\t\tnew Button({\n\t\t\t\t\t\ttext: Loc.getMessage('CRM_CFG_C_SETTINGS_PRODUCT_CARD_ENABLE_NEW_CARD_ASK_AGREE'),\n\t\t\t\t\t\tcolor: Button.Color.SUCCESS,\n\t\t\t\t\t\tonclick: () => askPopup.close(),\n\t\t\t\t\t}),\n\t\t\t\t\tnew Button({\n\t\t\t\t\t\ttext: Loc.getMessage('CRM_CFG_C_SETTINGS_PRODUCT_CARD_ENABLE_NEW_CARD_ASK_BUS_DISAGREE'),\n\t\t\t\t\t\tcolor: Button.Color.LINK,\n\t\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\t\tthis.productCardSliderEnabled = false;\n\t\t\t\t\t\t\taskPopup.close();\n\t\t\t\t\t\t},\n\t\t\t\t\t}),\n\t\t\t\t],\n\t\t\t);\n\n\t\t\treturn askPopup;\n\t\t},\n\t\tcreateWarningProductCardPopup(contentText: string, buttons: Array, events = {})\n\t\t{\n\t\t\tconst popupParams = {\n\t\t\t\tevents: {\n\t\t\t\t\tonPopupClose: () => askPopup.destroy(),\n\t\t\t\t\t...events,\n\t\t\t\t},\n\t\t\t\tcontent: Tag.render`\n\t\t\t\t\t<div class=\"catalog-settings-new-productcard-popup-content\">\n\t\t\t\t\t\t${contentText}\n\t\t\t\t\t</div>\n\t\t\t\t`,\n\t\t\t\tclassName: 'catalog-settings-new-productcard-popup',\n\t\t\t\ttitleBar: Loc.getMessage('CRM_CFG_C_SETTINGS_PRODUCT_CARD_ENABLE_NEW_CARD_ASK_TITLE'),\n\t\t\t\tmaxWidth: 800,\n\t\t\t\toverlay: true,\n\t\t\t\tbuttons: buttons,\n\t\t\t};\n\n\t\t\tconst askPopup = new Popup(null, null, popupParams);\n\n\t\t\treturn askPopup;\n\t\t},\n\t\topenStoreControlMaster()\n\t\t{\n\t\t\tlet sliderUrl = '/bitrix/components/bitrix/catalog.warehouse.master.clear/slider.php';\n\t\t\tif (this.configCatalogSource)\n\t\t\t{\n\t\t\t\tsliderUrl += `?inventoryManagementSource=${this.configCatalogSource}`;\n\t\t\t}\n\t\t\tnew StoreSlider().open(\n\t\t\t\tsliderUrl,\n\t\t\t\t{},\n\t\t\t)\n\t\t\t\t.then((slider) => {\n\t\t\t\t\tajax.runAction('catalog.config.isUsedInventoryManagement', {})\n\t\t\t\t\t\t.then((response) => {\n\t\t\t\t\t\t\tif (this.isStoreControlUsed !== response.data)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif (response.data === true)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tthis.close();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tthis.refresh();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (slider?.getData().get('isPresetApplied'))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.showMessage(Loc.getMessage('CRM_CFG_C_SETTINGS_SAVED_SUCCESSFULLY'));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t});\n\t\t},\n\t\trefresh()\n\t\t{\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tajax.runComponentAction('bitrix:crm.config.catalog.settings', 'initialize', {\n\t\t\t\t\tmode: 'class',\n\t\t\t\t\tjson: {},\n\t\t\t\t}).then((response) => {\n\t\t\t\t\tthis.initialize(response.data);\n\t\t\t\t\tresolve();\n\t\t\t\t}).catch((response) => {\n\t\t\t\t\tthis.showResponseErrors(response);\n\t\t\t\t\treject();\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\twait(ms)\n\t\t{\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tresolve();\n\t\t\t\t}, ms);\n\t\t\t});\n\t\t},\n\t\tshowResponseErrors(response)\n\t\t{\n\t\t\tthis.showMessage(\n\t\t\t\tresponse.errors.map((error) => error.message).join(', '),\n\t\t\t);\n\t\t},\n\t\tshowMessage(message)\n\t\t{\n\t\t\ttop.BX.loadExt('ui.notification').then(() => {\n\t\t\t\ttop.BX.UI.Notification.Center.notify({ content: message });\n\t\t\t});\n\t\t},\n\t\tinitialize(data)\n\t\t{\n\t\t\tthis.isStoreControlUsed = data.isStoreControlUsed;\n\t\t\tthis.isStoreBatchUsed = data.isStoreControlUsed && data.isStoreBatchUsed;\n\t\t\tthis.productsCnt = data.productsCnt;\n\n\t\t\t/**\n\t\t\t * Reservation settings\n\t\t\t */\n\t\t\tthis.reservationEntities = data.reservationEntities;\n\t\t\tif (this.reservationEntities.length > 0)\n\t\t\t{\n\t\t\t\tthis.currentReservationEntityCode = this.reservationEntities[0].code;\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * Product settings\n\t\t\t */\n\t\t\tthis.initDefaultQuantityTrace = this.defaultQuantityTrace = data.defaultQuantityTrace;\n\t\t\tthis.initDefaultCanBuyZero = this.defaultCanBuyZero = data.defaultCanBuyZero;\n\t\t\tthis.initDefaultSubscribe = this.defaultSubscribe = data.defaultSubscribe;\n\t\t\tthis.initCheckRightsOnDecreaseStoreAmount = this.checkRightsOnDecreaseStoreAmount = data.checkRightsOnDecreaseStoreAmount;\n\t\t\tthis.initCostPriceCalculationMethod = this.costPriceCalculationMethod = data.costPriceCalculationMethod;\n\n\t\t\t/**\n\t\t\t * Other settings\n\t\t\t */\n\t\t\tthis.defaultProductVatIncluded = data.defaultProductVatIncluded;\n\t\t\tthis.vats = data.vats;\n\t\t\tthis.defaultProductVatId = data.defaultProductVatId;\n\t\t\tthis.productCardSliderEnabled = data.productCardSliderEnabled;\n\t\t\tthis.costPriceCalculationMethod = data.costPriceCalculationMethod;\n\t\t\tthis.isEmptyCostPriceCalculationMethod = !Type.isStringFilled(this.costPriceCalculationMethod);\n\t\t\tthis.isCanEnableProductCardSlider = data.isCanEnableProductCardSlider;\n\t\t\tthis.isBitrix24 = data.isBitrix24;\n\t\t\tthis.busProductCardHelpLink = data.busProductCardHelpLink;\n\t\t\tthis.configCatalogSource = this.configCatalogSource ?? data.configCatalogSource;\n\n\t\t\tthis.isChanged = false;\n\t\t},\n\t\tonReservationSettingsValuesChanged(values, index)\n\t\t{\n\t\t\tthis.reservationEntities[index].settings.values = values;\n\t\t\tthis.markAsChanged();\n\t\t},\n\t\tsave()\n\t\t{\n\t\t\tif (this.isSaving)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (Type.isStringFilled(this.costPriceCalculationMethod) && this.showNegativeStoreAmountPopup)\n\t\t\t{\n\t\t\t\tconst text = Loc.getMessage(\n\t\t\t\t\t'CRM_CFG_C_SETTINGS_NEGATIVE_STORE_BALANCE_POPUP_TEXT_MSGVER_1',\n\t\t\t\t\t{\n\t\t\t\t\t\t'#STORE_BALANCE_LIST_LINK#': '<help-link></help-link>',\n\t\t\t\t\t},\n\t\t\t\t);\n\n\t\t\t\tconst content = Tag.render`\n\t\t\t\t\t<div class=\"catalog-settings-popup-content\">\n\t\t\t\t\t\t<div class=\"catalog-settings-popup-text\">\n\t\t\t\t\t\t\t${text}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t`;\n\n\t\t\t\tif (!Type.isUndefined(top.BX.SidePanel.Instance) && Type.isStringFilled(this.storeBalancePopupLink))\n\t\t\t\t{\n\t\t\t\t\tconst balanceInfoLink = Tag.render`\n\t\t\t\t\t\t<a href=\"#\" class=\"ui-form-link\">\n\t\t\t\t\t\t\t${Loc.getMessage('CRM_CFG_C_SETTINGS_NEGATIVE_STORE_BALANCE_POPUP_LINK')}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t`;\n\n\t\t\t\t\tEvent.bind(balanceInfoLink, 'click', () => {\n\t\t\t\t\t\ttop.BX.SidePanel.Instance.open(\n\t\t\t\t\t\t\t`${this.storeBalancePopupLink}`,\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\trequestMethod: 'post',\n\t\t\t\t\t\t\t\tcacheable: false,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\n\t\t\t\t\tDom.replace(content.querySelector('help-link'), balanceInfoLink);\n\t\t\t\t}\n\n\t\t\t\tconst popup = new Popup({\n\t\t\t\t\tid: 'catalog_settings_document_negative_balance_popup',\n\t\t\t\t\tcontent,\n\t\t\t\t\tbuttons: [\n\t\t\t\t\t\tnew Button({\n\t\t\t\t\t\t\ttext: Loc.getMessage('CRM_CFG_C_SETTINGS_RETURN'),\n\t\t\t\t\t\t\tcolor: ButtonColor.DANGER,\n\t\t\t\t\t\t\tonclick: (button, event) => {\n\t\t\t\t\t\t\t\tpopup.destroy();\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t}),\n\t\t\t\t\t],\n\t\t\t\t});\n\t\t\t\tpopup.show();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.isSaving = true;\n\n\t\t\tthis.saveProductSettings().then(() => {\n\t\t\t\tajax.runComponentAction('bitrix:crm.config.catalog.settings', 'save', {\n\t\t\t\t\tmode: 'class',\n\t\t\t\t\tjson: {\n\t\t\t\t\t\tvalues: {\n\t\t\t\t\t\t\treservationSettings: this.makeReservationSettings(),\n\t\t\t\t\t\t\tproductCardSliderEnabled: this.productCardSliderEnabled,\n\t\t\t\t\t\t\tdefaultProductVatIncluded: this.defaultProductVatIncluded,\n\t\t\t\t\t\t\tdefaultProductVatId: this.defaultProductVatId,\n\t\t\t\t\t\t\tcheckRightsOnDecreaseStoreAmount: this.checkRightsOnDecreaseStoreAmount,\n\t\t\t\t\t\t\tcostPriceCalculationMethod: this.costPriceCalculationMethod,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t}).then((response) => {\n\t\t\t\t\tthis.isChanged = false;\n\t\t\t\t\tthis.isSaving = false;\n\t\t\t\t\tthis.showMessage(Loc.getMessage('CRM_CFG_C_SETTINGS_SAVED_SUCCESSFULLY'));\n\t\t\t\t\tthis.refresh()\n\t\t\t\t\t\t.then(() => this.wait(700))\n\t\t\t\t\t\t.then(() => this.close());\n\n\t\t\t\t\tBX.SidePanel.Instance.postMessage(window, 'BX.Crm.Config.Catalog:onAfterSaveSettings');\n\t\t\t\t}).catch((response) => {\n\t\t\t\t\tthis.isChanged = false;\n\t\t\t\t\tthis.isSaving = false;\n\t\t\t\t\tthis.showResponseErrors(response);\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tsaveProductSettings()\n\t\t{\n\t\t\tif (!this.hasProductSettingsChanged)\n\t\t\t{\n\t\t\t\treturn Promise.resolve();\n\t\t\t}\n\n\t\t\tconst productUpdaterOptions = {\n\t\t\t\tpropsData: {\n\t\t\t\t\tsettings: {\n\t\t\t\t\t\tdefault_quantity_trace: this.defaultQuantityTrace ? 'Y' : 'N',\n\t\t\t\t\t\tdefault_can_buy_zero: this.defaultCanBuyZero ? 'Y' : 'N',\n\t\t\t\t\t\tdefault_subscribe: this.defaultSubscribe ? 'Y' : 'N',\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t};\n\n\t\t\treturn new Promise((resolve) => {\n\t\t\t\tconst productUpdater = (new ProductUpdater(productUpdaterOptions))\n\t\t\t\t\t.$on('complete', () => {\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t\tif (this.needProgressBarOnProductsUpdating)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.productUpdaterPopup.destroy();\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.$mount();\n\n\t\t\t\tif (this.needProgressBarOnProductsUpdating)\n\t\t\t\t{\n\t\t\t\t\tthis.productUpdaterPopup = new Popup({\n\t\t\t\t\t\tcontent: productUpdater.$el,\n\t\t\t\t\t\twidth: 310,\n\t\t\t\t\t\toverlay: true,\n\t\t\t\t\t\tpadding: 17,\n\t\t\t\t\t\tanimation: 'fading-slide',\n\t\t\t\t\t\tangle: false,\n\t\t\t\t\t});\n\t\t\t\t\tthis.productUpdaterPopup.show();\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tmakeReservationSettings()\n\t\t{\n\t\t\tconst result = {};\n\n\t\t\tfor (const reservationEntity of this.reservationEntities)\n\t\t\t{\n\t\t\t\tresult[reservationEntity.code] = reservationEntity.settings.values;\n\t\t\t}\n\n\t\t\treturn result;\n\t\t},\n\t\tcancel()\n\t\t{\n\t\t\tthis.close();\n\t\t},\n\t\tclose()\n\t\t{\n\t\t\tthis.slider.close();\n\t\t},\n\t\tgetReservationSettingsHint()\n\t\t{\n\t\t\treturn this.getHintContent(\n\t\t\t\t'CRM_CFG_C_SETTINGS_RESERVATION_SETTINGS_HINT_MSGVER_1',\n\t\t\t\tHELP_ARTICLE_ID,\n\t\t\t\t'reservation',\n\t\t\t);\n\t\t},\n\t\tgetProductsSettingsHint()\n\t\t{\n\t\t\treturn this.getHintContent(\n\t\t\t\t'CRM_CFG_C_SETTINGS_PRODUCTS_SETTINGS_HINT_MSGVER_1',\n\t\t\t\tHELP_ARTICLE_ID,\n\t\t\t\t'products',\n\t\t\t);\n\t\t},\n\t\tgetCostPriceCalculationHint()\n\t\t{\n\t\t\treturn this.getHintContent(\n\t\t\t\t'CRM_CFG_C_SETTINGS_COST_PRICE_CALCULATION_MODE_HINT_MSGVER_1',\n\t\t\t\tHELP_COST_CALCULATION_MODE_ARTICLE_ID,\n\t\t\t);\n\t\t},\n\t\tgetCanBuyZeroHint()\n\t\t{\n\t\t\treturn this.getHintContent(\n\t\t\t\t'CRM_CFG_C_SETTINGS_CAN_BUY_ZERO_HINT_MSGVER_1',\n\t\t\t\tHELP_ARTICLE_ID,\n\t\t\t\t'products',\n\t\t\t);\n\t\t},\n\t\tgetDefaultVatHint()\n\t\t{\n\t\t\treturn this.getHintContent(\n\t\t\t\t'CRM_CFG_C_SETTINGS_PRODUCTS_SETTINGS_DEFAULT_VAT_HINT_MSGVER_1',\n\t\t\t\tHELP_ARTICLE_ID,\n\t\t\t\t'products',\n\t\t\t);\n\t\t},\n\t\tgetCanBuyZeroInDocsHint()\n\t\t{\n\t\t\treturn this.getHintContent(\n\t\t\t\t'CRM_CFG_C_SETTINGS_CAN_BUY_ZERO_IN_DOCS_HINT_MSGVER_1',\n\t\t\t\tHELP_ARTICLE_ID,\n\t\t\t\t'products',\n\t\t\t);\n\t\t},\n\t\tgetHintContent(contentPhraseKey, article, anchor)\n\t\t{\n\t\t\tconst { linkStart, linkEnd } = this.getDocumentationLink(article, anchor);\n\n\t\t\treturn `\n\t\t\t\t${Loc.getMessage(contentPhraseKey, {\n\t\t\t\t\t'#LINK_START#': linkStart,\n\t\t\t\t\t'#LINK_END#': linkEnd,\n\t\t\t\t})}\n\t\t\t`;\n\t\t},\n\t\tgetDocumentationLink(article, anchor)\n\t\t{\n\t\t\tlet link = `redirect=detail&code=${article}`;\n\t\t\tif (!Type.isNil(anchor))\n\t\t\t{\n\t\t\t\tlink += `#${anchor}`;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tlinkStart: `<a href=\"javascript:void(0);\" onclick=\"if (top.BX.Helper){top.BX.Helper.show('${link}');}\" class=\"catalog-settings-helper-link\">`,\n\t\t\t\tlinkEnd: '</a>',\n\t\t\t};\n\t\t},\n\t\tgetDocumentationProductBatchLink(phraseKey): string\n\t\t{\n\t\t\treturn this.getHintContent(phraseKey, HELP_COST_CALCULATION_MODE_ARTICLE_ID);\n\t\t},\n\t\tchangeCalculationMode()\n\t\t{\n\t\t\tif (!this.isEmptyCostPriceCalculationMethod)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.isHiddenCostPriceCalculationMethodChangeWarning = false;\n\t\t\tthis.markAsChanged();\n\t\t},\n\t},\n\tmounted()\n\t{\n\t\tBX.UI.Hint.init(this.$el);\n\n\t\tif (this.shouldShowBatchMethodSpotlight)\n\t\t{\n\t\t\tconst methodSelector = document.querySelector('.catalog-settings-cost-price-method-selector');\n\t\t\tRuntime.loadExtension('spotlight').then((exports) => {\n\t\t\t\tconst spotlight = new BX.SpotLight(\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'batch-method-tour-spotlight',\n\t\t\t\t\t\ttargetElement: methodSelector,\n\t\t\t\t\t\tautoSave: true,\n\t\t\t\t\t\ttargetVertex: 'middle-center',\n\t\t\t\t\t\tzIndex: 200,\n\t\t\t\t\t\tleft: -420,\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t\tspotlight.show();\n\t\t\t\tspotlight.container.style.pointerEvents = \"none\";\n\t\t\t\tUserOptions.save('crm.catalog-settings', 'tour', 'batch_spotlight_shown', 'Y');\n\t\t\t\tEvent.bind(methodSelector, 'click', () => {\n\t\t\t\t\tspotlight.close();\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t},\n\ttemplate: `\n\t\t<div class=\"catalog-settings-wrapper\">\n\t\t\t<form>\n\t\t\t\t<div class=\"ui-slider-section\">\n\t\t\t\t\t<div class=\"ui-slider-content-box\">\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tstyle=\"display: flex; align-items: center\"\n\t\t\t\t\t\t\tclass=\"ui-slider-heading-4\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_TITLE}}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"ui-slider-inner-box\">\n\t\t\t\t\t\t\t<p class=\"ui-slider-paragraph-2\">\n\t\t\t\t\t\t\t\t{{description}}\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div v-if=\"hasAccessToCatalogSettings\" class=\"catalog-settings-button-container\">\n\t\t\t\t\t\t\t<template v-if=\"isStoreControlUsed\">\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t@click=\"openStoreControlMaster()\"\n\t\t\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-md ui-btn-light-border ui-btn-width\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_INVENTORY_MANAGEMENT_DISABLE}}\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t@click=\"openStoreControlMaster()\"\n\t\t\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-success\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_TURN_INVENTORY_CONTROL_ON}}\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"catalog-settings-main-settings\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tv-if=\"isReservationUsed && hasAccessToReservationSettings\"\n\t\t\t\t\t\tclass=\"ui-slider-section\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div class=\"ui-slider-heading-4\">\n\t\t\t\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_RESERVATION_SETTINGS}}\n\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\tclass=\"ui-hint\"\n\t\t\t\t\t\t\t\tdata-hint-html=\"\"\n\t\t\t\t\t\t\t\tdata-hint-interactivity=\"\"\n\t\t\t\t\t\t\t\t:data-hint=\"getReservationSettingsHint()\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<span class=\"ui-hint-icon\"></span>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"catalog-settings-editor-content-block\">\n\t\t\t\t\t\t\t<div class=\"ui-ctl-label-text\">\n\t\t\t\t\t\t\t\t<label>{{loc.CRM_CFG_C_SETTINGS_RESERVATION_ENTITY}}</label>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-after-icon ui-ctl-dropdown ui-ctl-disabled ui-ctl-w100\">\n\t\t\t\t\t\t\t\t<!--<div class=\"ui-ctl-after ui-ctl-icon-angle\"></div>-->\n\t\t\t\t\t\t\t\t<select\n\t\t\t\t\t\t\t\t\tv-model=\"currentReservationEntityCode\"\n\t\t\t\t\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<option\n\t\t\t\t\t\t\t\t\t\tv-for=\"reservationEntity in reservationEntities\"\n\t\t\t\t\t\t\t\t\t\t:value=\"reservationEntity.code\"\n\t\t\t\t\t\t\t\t\t\t:disabled=\"reservationEntity.code !== 'deal'\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{{reservationEntity.name}}\n\t\t\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<reservation\n\t\t\t\t\t\t\tv-for=\"(reservationEntity, index) in reservationEntities\"\n\t\t\t\t\t\t\tv-show=\"reservationEntity.code === currentReservationEntityCode\"\n\t\t\t\t\t\t\t:key=\"reservationEntity.code\"\n\t\t\t\t\t\t\t:settings=\"reservationEntity.settings\"\n\t\t\t\t\t\t\t@change=\"onReservationSettingsValuesChanged($event, index)\"\n\t\t\t\t\t\t></reservation>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div v-if=\"isStoreBatchUsed && hasAccessToCatalogSettings\" class=\"ui-slider-section\">\n\t\t\t\t\t\t<div class=\"ui-slider-content-box\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tstyle=\"display: flex; align-items: center\"\n\t\t\t\t\t\t\t\tclass=\"ui-slider-heading-4\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_COST_PRICE_TITLE_MSGVER_1}}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"catalog-settings-editor-content-block\">\n\t\t\t\t\t\t\t\t<div class=\"ui-ctl-label-text\">\n\t\t\t\t\t\t\t\t\t<label>{{loc.CRM_CFG_C_SETTINGS_COST_PRICE_CALCULATION_MODE_MSGVER_1}}</label>\n\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\tclass=\"ui-hint\"\n\t\t\t\t\t\t\t\t\t\tdata-hint-html=\"\"\n\t\t\t\t\t\t\t\t\t\tdata-hint-interactivity=\"\"\n\t\t\t\t\t\t\t\t\t\t:data-hint=\"getCostPriceCalculationHint()\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<span class=\"ui-hint-icon\"></span>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div v-if=\"!isEmptyCostPriceCalculationMethod\" class=\"ui-alert ui-alert-primary ui-alert-icon-info\">\n\t\t\t\t\t\t\t\t\t<span class=\"ui-alert-message\">\n\t\t\t\t\t\t\t\t\t\t<span v-html='getDocumentationProductBatchLink(\"CRM_CFG_C_SETTINGS_COST_PRICE_CHANGE_MODE_INFO_MSGVER_2\")'></span>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div v-if=\"!isHiddenCostPriceCalculationMethodChangeWarning\" class=\"ui-alert ui-alert-warning ui-alert-icon-warning\">\n\t\t\t\t\t\t\t\t\t<span class=\"ui-alert-message\">\n\t\t\t\t\t\t\t\t\t\t<span v-html='getDocumentationProductBatchLink(\"CRM_CFG_C_SETTINGS_COST_PRICE_CHANGE_MODE_WARNING_MSGVER_2\")'></span>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div \n\t\t\t\t\t\t\t\t\tclass=\"ui-ctl ui-ctl-after-icon ui-ctl-dropdown ui-ctl-w100\" \n\t\t\t\t\t\t\t\t\t:class='{\"ui-ctl-disabled\": !isEmptyCostPriceCalculationMethod}'\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<div \n\t\t\t\t\t\t\t\t\t\tv-if='isEmptyCostPriceCalculationMethod' \n\t\t\t\t\t\t\t\t\t\tclass=\"ui-ctl-after ui-ctl-icon-angle\"\n\t\t\t\t\t\t\t\t\t>\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<select\n\t\t\t\t\t\t\t\t\t\tv-model=\"costPriceCalculationMethod\"\n\t\t\t\t\t\t\t\t\t\t:disabled=\"!isEmptyCostPriceCalculationMethod\"\n\t\t\t\t\t\t\t\t\t\t@change=\"changeCalculationMode\"\n\t\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\t\tclass=\"ui-ctl-element catalog-settings-cost-price-method-selector\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<option \n\t\t\t\t\t\t\t\t\t\t\tv-if=\"isEmptyCostPriceCalculationMethod\" \n\t\t\t\t\t\t\t\t\t\t\tvalue=''\n\t\t\t\t\t\t\t\t\t\t\tdisabled \n\t\t\t\t\t\t\t\t\t\t\tselected\n\t\t\t\t\t\t\t\t\t\t\thidden\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_COST_PRICE_CHANGE_PLACEHOLDER}}\n\t\t\t\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t\t\t\t<option\n\t\t\t\t\t\t\t\t\t\t\tv-for=\"method in costPriceCalculationMethods\"\n\t\t\t\t\t\t\t\t\t\t\t:value=\"method.code\"\n\t\t\t\t\t\t\t\t\t\t\t:selected=\"method.code === costPriceCalculationMethod\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{{method.title}}\n\t\t\t\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div v-if=\"hasAccessToCatalogSettings\" class=\"ui-slider-section\">\n\t\t\t\t\t\t<div class=\"ui-slider-heading-4\">\n\t\t\t\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_PRODUCTS_SETTINGS}}\n\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\tclass=\"ui-hint\"\n\t\t\t\t\t\t\t\tdata-hint-html=\"\"\n\t\t\t\t\t\t\t\tdata-hint-interactivity=\"\"\n\t\t\t\t\t\t\t\t:data-hint=\"getProductsSettingsHint()\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<span class=\"ui-hint-icon\"></span>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tv-if=\"isCanEnableProductCardSlider\"\n\t\t\t\t\t\t\tclass=\"catalog-settings-editor-checkbox-content-block\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-checkbox ui-ctl-w100\">\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t@click=\"onEnableProductCardCheckboxClick\"\n\t\t\t\t\t\t\t\t\tv-model=\"productCardSliderEnabled\"\n\t\t\t\t\t\t\t\t\tid=\"product_card_slider_enabled\"\n\t\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<label for=\"product_card_slider_enabled\" class=\"ui-ctl-label-text\">\n\t\t\t\t\t\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_PRODUCT_CARD_ENABLE_NEW_CARD}}\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"catalog-settings-editor-checkbox-content-block\">\n\t\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-checkbox ui-ctl-w100\">\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\tv-model=\"defaultSubscribe\"\n\t\t\t\t\t\t\t\t\t@click=\"markAsChanged\"\n\t\t\t\t\t\t\t\t\tid=\"default_subscribe\"\n\t\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<label for=\"default_subscribe\" class=\"ui-ctl-label-text\">\n\t\t\t\t\t\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_PRODUCTS_SETTINGS_DEFAULT_SUBSCRIBE}}\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tv-if=\"isDefaultQuantityTraceVisible\"\n\t\t\t\t\t\t\tclass=\"catalog-settings-editor-checkbox-content-block\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-checkbox ui-ctl-w100\">\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\tv-model=\"defaultQuantityTrace\"\n\t\t\t\t\t\t\t\t\t@click=\"markAsChanged\"\n\t\t\t\t\t\t\t\t\tid=\"default_quantity_trace\"\n\t\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<label for=\"default_quantity_trace\" class=\"ui-ctl-label-text\">\n\t\t\t\t\t\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_PRODUCTS_DEFAULT_QUANTITY_TRACE}}\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div v-if=\"isCanBuyZeroInDocsVisible\" class=\"catalog-settings-editor-checkbox-content-block\">\n\t\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-checkbox ui-ctl-w100\">\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\tv-model=\"checkRightsOnDecreaseStoreAmount\"\n\t\t\t\t\t\t\t\t\t@click=\"markAsChanged\"\n\t\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<label class=\"ui-ctl-label-text\">\n\t\t\t\t\t\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_PRODUCTS_SETTINGS_DEFAULT_CAN_BUY_ZERO_IN_DOCS}}\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\tclass=\"ui-hint\"\n\t\t\t\t\t\t\t\t\tdata-hint-html=\"\"\n\t\t\t\t\t\t\t\t\tdata-hint-interactivity=\"\"\n\t\t\t\t\t\t\t\t\t:data-hint=\"getCanBuyZeroInDocsHint()\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<span class=\"ui-hint-icon\"></span>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tv-if=\"isReservationUsed && isCanChangeOptionCanByZero\"\n\t\t\t\t\t\t\tclass=\"catalog-settings-editor-checkbox-content-block\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-checkbox ui-ctl-w100\">\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\tv-model=\"defaultCanBuyZero\"\n\t\t\t\t\t\t\t\t\t@click=\"markAsChanged\"\n\t\t\t\t\t\t\t\t\tid=\"default_can_buy_zero\"\n\t\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t\t\t\t\t:disabled=\"!isCanChangeOptionCanByZero\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<label for=\"default_can_buy_zero\" class=\"ui-ctl-label-text\">\n\t\t\t\t\t\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_PRODUCTS_SETTINGS_DEFAULT_CAN_BUY_ZERO_V2}}\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\tclass=\"ui-hint\"\n\t\t\t\t\t\t\t\t\tdata-hint-html=\"\"\n\t\t\t\t\t\t\t\t\tdata-hint-interactivity=\"\"\n\t\t\t\t\t\t\t\t\t:data-hint=\"getCanBuyZeroHint()\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<span class=\"ui-hint-icon\"></span>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"catalog-settings-editor-checkbox-content-block\">\n\t\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-checkbox ui-ctl-w100\">\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\tv-model=\"defaultProductVatIncluded\"\n\t\t\t\t\t\t\t\t\t@click=\"markAsChanged\"\n\t\t\t\t\t\t\t\t\tid=\"default_product_vat_included\"\n\t\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<label for=\"default_product_vat_included\" class=\"ui-ctl-label-text\">\n\t\t\t\t\t\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_PRODUCT_CARD_SET_VAT_IN_PRICE_FOR_NEW_PRODUCTS}}\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"catalog-settings-editor-content-block\">\n\t\t\t\t\t\t\t<div class=\"ui-ctl-label-text\">\n\t\t\t\t\t\t\t\t<label>{{loc.CRM_CFG_C_SETTINGS_PRODUCTS_SETTINGS_DEFAULT_VAT}}</label>\n\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\tclass=\"ui-hint\"\n\t\t\t\t\t\t\t\t\tdata-hint-html=\"\"\n\t\t\t\t\t\t\t\t\tdata-hint-interactivity=\"\"\n\t\t\t\t\t\t\t\t\t:data-hint=\"getDefaultVatHint()\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<span class=\"ui-hint-icon\"></span>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-after-icon ui-ctl-dropdown ui-ctl-w100\">\n\t\t\t\t\t\t\t\t<div class=\"ui-ctl-after ui-ctl-icon-angle\"></div>\n\t\t\t\t\t\t\t\t<select\n\t\t\t\t\t\t\t\t\tv-model=\"defaultProductVatId\"\n\t\t\t\t\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t\t\t\t\t@change=\"markAsChanged\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<option\n\t\t\t\t\t\t\t\t\t\tv-for=\"vat in vats\"\n\t\t\t\t\t\t\t\t\t\t:value=\"vat.ID\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{{vat.NAME}}\n\t\t\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</form>\n\t\t\t<div\n\t\t\t\t:class=\"buttonsPanelClass\"\n\t\t\t>\n\t\t\t\t<div class=\"ui-button-panel ui-button-panel-align-center \">\n\t\t\t\t\t<button\n\t\t\t\t\t\t@click=\"save\"\n\t\t\t\t\t\t:class=\"saveButtonClasses\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_SAVE_BUTTON}}\n\t\t\t\t\t</button>\n\t\t\t\t\t<a\n\t\t\t\t\t\t@click=\"cancel\"\n\t\t\t\t\t\tclass=\"ui-btn ui-btn-link\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_CANCEL_BUTTON}}\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div style=\"height: 65px;\"></div>\n\t\t</div>\n\t`,\n});\n","import {Const} from './const';\nimport {Type} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\n\nexport default class Slider\n{\n\tstatic open(source = null, options = {})\n\t{\n\t\tlet url = Const.url;\n\t\tif (Type.isStringFilled(source))\n\t\t{\n\t\t\turl += '?configCatalogSource=' + source;\n\t\t}\n\n\t\tEventEmitter.subscribe('SidePanel.Slider:onMessage', (event) => {\n\n\t\t\tconst [data] = event.getData();\n\n\t\t\tif (data.eventId === 'BX.Crm.Config.Catalog:onAfterSaveSettings')\n\t\t\t{\n\t\t\t\tEventEmitter.emit(window, 'onCatalogSettingsSave');\n\t\t\t}\n\t\t});\n\n\t\treturn new Promise((resolve) =>\n\t\t{\n\t\t\treturn BX.SidePanel.Instance.open(\n\t\t\t\turl,\n\t\t\t\t{\n\t\t\t\t\twidth: 1000,\n\t\t\t\t\tallowChangeHistory: false,\n\t\t\t\t\tcacheable: false,\n\t\t\t\t\t...options,\n\t\t\t\t}\n\t\t\t);\n\t\t});\n\t}\n}\n"],"names":["computed","loc","Vue","getFilteredPhrases","props","settings","type","Object","required","data","result","scheme","element","code","values","methods","onChanged","$emit","$data","getWrapperClass","mounted","BX","UI","Hint","init","$el","template","ProductSettingsUpdater","params","url","stepOptions","ajaxSessionID","maxExecutionTime","maxOperationCounter","finish","currentState","counter","operationCounter","errorCounter","lastID","ajaxParams","operation","iblocks","iblockIndex","events","key","hasOwnProperty","sessid","bitrix_sessid","lang","message","ajax","loadJSON","proxy","nextStepResult","isPlainObject","parseInt","isNaN","onProgress","allCnt","allCounter","doneCnt","allOperationCounter","currentIblockName","NAME","finishOperation","checkOperation","onComplete","changeSettings","changeSettingsResult","success","loadIblockList","stopOperation","length","getIblock","isArray","iblockReindex","checkIblockIndex","initStep","nextStep","iblockId","ID","COUNT","finalRequest","iblockList","i","get","extend","mixins","LocMixin","progressStyles","width","Math","round","created","startOperation","Const","freeze","HELP_ARTICLE_ID","HELP_COST_CALCULATION_MODE_ARTICLE_ID","components","reservation","Reservation","initData","isSaving","isChanged","currentReservationEntityCode","isStoreControlUsed","isStoreBatchUsed","productsCnt","initCostPriceCalculationMethod","costPriceCalculationMethod","isEmptyCostPriceCalculationMethod","isHiddenCostPriceCalculationMethodChangeWarning","reservationEntities","initDefaultQuantityTrace","initDefaultCanBuyZero","initDefaultSubscribe","initCheckRightsOnDecreaseStoreAmount","defaultQuantityTrace","defaultCanBuyZero","defaultSubscribe","checkRightsOnDecreaseStoreAmount","productCardSliderEnabled","isCanEnableProductCardSlider","isBitrix24","busProductCardHelpLink","defaultProductVatIncluded","defaultProductVatId","vats","hasAccessToReservationSettings","undefined","hasAccessToCatalogSettings","isCanChangeOptionCanByZero","Extension","getSettings","costPriceCalculationMethods","showNegativeStoreAmountPopup","storeBalancePopupLink","shouldShowBatchMethodSpotlight","isReservationUsed","isReservationUsageViaQuantityTrace","isCanBuyZeroInDocsVisible","isDefaultQuantityTraceVisible","hasProductSettingsChanged","needProgressBarOnProductsUpdating","saveButtonClasses","buttonsPanelClass","description","Loc","getMessage","watch","newVal","oldVal","showWarn","warnPopup","Popup","onPopupClose","destroy","content","Tag","render","maxWidth","overlay","buttons","Button","text","color","Color","PRIMARY","onclick","close","show","initialize","productUpdaterPopup","settingsMenu","sliderUrl","configCatalogSource","slider","SidePanel","Instance","getSlider","markAsChanged","onEnableProductCardCheckboxClick","askToEnableProductCardSlider","askPopup","createWarningProductCardPopupForBitrix24","createWarningProductCardPopupForBUS","createWarningProductCardPopup","onPopupShow","helpdeskLink","document","getElementById","Event","bind","top","Helper","replace","SUCCESS","LINK","contentText","popupParams","className","titleBar","openStoreControlMaster","StoreSlider","open","then","runAction","response","refresh","getData","showMessage","Promise","resolve","reject","runComponentAction","mode","json","showResponseErrors","wait","ms","setTimeout","errors","map","error","join","loadExt","Notification","Center","notify","Type","isStringFilled","onReservationSettingsValuesChanged","index","save","isUndefined","balanceInfoLink","requestMethod","cacheable","Dom","querySelector","popup","id","ButtonColor","DANGER","button","event","saveProductSettings","reservationSettings","makeReservationSettings","postMessage","window","productUpdaterOptions","propsData","default_quantity_trace","default_can_buy_zero","default_subscribe","productUpdater","ProductUpdater","$on","$mount","padding","animation","angle","reservationEntity","cancel","getReservationSettingsHint","getHintContent","getProductsSettingsHint","getCostPriceCalculationHint","getCanBuyZeroHint","getDefaultVatHint","getCanBuyZeroInDocsHint","contentPhraseKey","article","anchor","getDocumentationLink","linkStart","linkEnd","link","isNil","getDocumentationProductBatchLink","phraseKey","changeCalculationMode","methodSelector","Runtime","loadExtension","exports","spotlight","SpotLight","targetElement","autoSave","targetVertex","zIndex","left","container","style","pointerEvents","UserOptions","Slider","source","options","EventEmitter","subscribe","eventId","emit","allowChangeHistory"],"mappings":"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"}