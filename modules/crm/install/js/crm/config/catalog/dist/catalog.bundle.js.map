{"version":3,"file":"catalog.bundle.js","sources":["../src/loc.js","../src/reservation.js","../src/product-updater/updater.js","../src/product-updater/template.js","../src/const.js","../src/app.js","../src/slider.js"],"sourcesContent":["import {Vue} from 'ui.vue';\n\nexport default\n{\n\tcomputed: {\n\t\tloc()\n\t\t{\n\t\t\treturn Vue.getFilteredPhrases('CRM_CFG_C_SETTINGS_');\n\t\t}\n\t}\n}\n","export default {\n\tprops: {\n\t\tsettings: {\n\t\t\ttype: Object,\n\t\t\trequired: true\n\t\t},\n\t},\n\tdata ()\n\t{\n\t\tlet result = {};\n\n\t\tfor (const element of this.settings.scheme)\n\t\t{\n\t\t\tresult[element.code] = this.settings.values[element.code];\n\t\t}\n\n\t\treturn result;\n\t},\n\tmethods: {\n\t\tonChanged()\n\t\t{\n\t\t\tthis.$emit('change', this.$data);\n\t\t},\n\t\tgetWrapperClass(type)\n\t\t{\n\t\t\treturn (type === 'option')\n\t\t\t\t? {\n\t\t\t\t\t'catalog-settings-editor-checkbox-content-block': true,\n\t\t\t\t}\n\t\t\t\t: {\n\t\t\t\t\t'catalog-settings-editor-content-block': true,\n\t\t\t\t};\n\t\t}\n\t},\n\tmounted()\n\t{\n\t\tBX.UI.Hint.init(this.$el);\n\t},\n\ttemplate: `\n\t\t<div>\n\t\t\t<div\n\t\t\t\tv-for=\"setting in settings.scheme\"\n\t\t\t\t:class=\"getWrapperClass(setting.type)\"\n\t\t\t>\n\t\t\t\t<template v-if=\"setting.type === 'list'\">\n\t\t\t\t\t<div class=\"ui-ctl-label-text\">\n\t\t\t\t\t\t<label>{{setting.name}}</label>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"ui-ctl ui-ctl-after-icon ui-ctl-dropdown ui-ctl-w100\">\n\t\t\t\t\t\t<div class=\"ui-ctl-after ui-ctl-icon-angle\"></div>\n\t\t\t\t\t\t<select\n\t\t\t\t\t\t\tv-model=\"$data[setting.code]\"\n\t\t\t\t\t\t\t@change=\"onChanged\"\n\t\t\t\t\t\t\t:disabled=\"setting.disabled\"\n\t\t\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<option v-for=\"value in setting.values\" :value=\"value.code\">\n\t\t\t\t\t\t\t\t{{value.name}}\n\t\t\t\t\t\t\t</option>\t\t\t\t\t\t\n\t\t\t\t\t\t</select>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t\t<template v-if=\"setting.type === 'text'\">\n\t\t\t\t\t<div class=\"ui-ctl-label-text\">\n\t\t\t\t\t\t<label>{{setting.name}}</label>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"ui-ctl ui-ctl-textbox ui-ctl-w100\">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tv-model=\"$data[setting.code]\"\n\t\t\t\t\t\t\t@change=\"onChanged\"\n\t\t\t\t\t\t\t:disabled=\"setting.disabled\"\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t\t>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t\t<template v-if=\"setting.type === 'int'\">\n\t\t\t\t\t<div class=\"ui-ctl-label-text\">\n\t\t\t\t\t\t<label>{{setting.name}}</label>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"ui-ctl ui-ctl-textbox ui-ctl-w100\">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tv-model=\"$data[setting.code]\"\n\t\t\t\t\t\t\t@input=\"onChanged\"\n\t\t\t\t\t\t\t:disabled=\"setting.disabled\"\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t\t>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t\t<template v-if=\"setting.type === 'option'\">\n\t\t\t\t\t<div class=\"ui-ctl ui-ctl-checkbox ui-ctl-w100\">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tv-model=\"$data[setting.code]\"\n\t\t\t\t\t\t\t@change=\"onChanged\"\n\t\t\t\t\t\t\t:id=\"setting.code + '_' + $vnode.key\"\n\t\t\t\t\t\t\t:disabled=\"setting.disabled\"\n\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t<label\n\t\t\t\t\t\t\t:for=\"setting.code + '_' + $vnode.key\"\n\t\t\t\t\t\t\tclass=\"ui-ctl-label-text\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{setting.name}}\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tv-if=\"setting.description\"\n\t\t\t\t\t\t\tclass=\"ui-hint\"\n\t\t\t\t\t\t\t:data-hint=\"setting.description\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span class=\"ui-hint-icon\"></span>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t</div>\n\t\t</div>\n\t`\n}\n","class ProductSettingsUpdater\n{\n\tconstructor(params)\n\t{\n\t\tthis.url = '/bitrix/tools/catalog/product_settings.php';\n\t\tthis.stepOptions = {\n\t\t\tajaxSessionID: '',\n\t\t\tmaxExecutionTime: 30,\n\t\t\tmaxOperationCounter: 10,\n\t\t};\n\t\tthis.finish = false;\n\t\tthis.currentState = {\n\t\t\tcounter: 0,\n\t\t\toperationCounter: 0,\n\t\t\terrorCounter: 0,\n\t\t\tlastID: 0,\n\t\t};\n\t\tthis.ajaxParams = {\n\t\t\toperation: 'Y',\n\t\t};\n\t\tthis.iblocks = [];\n\t\tthis.iblockIndex = -1;\n\n\t\tthis.stepOptions.ajaxSessionID = 'productSettings';\n\t\tthis.currentState.counter = 0;\n\n\t\tthis.events = params.events;\n\t\tthis.settings = params.settings;\n\t}\n\n\tnextStep()\n\t{\n\t\tfor (let key in this.stepOptions)\n\t\t{\n\t\t\tif (this.stepOptions.hasOwnProperty(key))\n\t\t\t{\n\t\t\t\tthis.ajaxParams[key] = this.stepOptions[key];\n\t\t\t}\n\t\t}\n\t\tfor (let key in this.currentState)\n\t\t{\n\t\t\tif (this.currentState.hasOwnProperty(key))\n\t\t\t{\n\t\t\t\tthis.ajaxParams[key] = this.currentState[key];\n\t\t\t}\n\t\t}\n\n\t\tthis.ajaxParams.sessid = BX.bitrix_sessid();\n\t\tthis.ajaxParams.lang = BX.message('LANGUAGE_ID');\n\t\tBX.ajax.loadJSON(\n\t\t\tthis.url,\n\t\t\tthis.ajaxParams,\n\t\t\tBX.proxy(this.nextStepResult, this)\n\t\t);\n\t}\n\n\tnextStepResult(result)\n\t{\n\t\tif (BX.type.isPlainObject(result))\n\t\t{\n\t\t\tthis.currentState.lastID = result.lastID;\n\t\t\tthis.stepOptions.maxOperationCounter = result.maxOperationCounter;\n\n\t\t\tthis.currentState.operationCounter = parseInt(result.operationCounter, 10);\n\t\t\tif (isNaN(this.currentState.operationCounter))\n\t\t\t{\n\t\t\t\tthis.currentState.operationCounter = 0;\n\t\t\t}\n\n\t\t\tthis.currentState.errorCounter = parseInt(result.errorCounter, 10);\n\t\t\tif (isNaN(this.currentState.errorCounter))\n\t\t\t{\n\t\t\t\tthis.currentState.errorCounter = 0;\n\t\t\t}\n\n\t\t\tif (this.events.onProgress)\n\t\t\t{\n\t\t\t\tthis.events.onProgress({\n\t\t\t\t\tallCnt: result.allCounter,\n\t\t\t\t\tdoneCnt: result.allOperationCounter,\n\t\t\t\t\tcurrentIblockName: this.iblocks[this.iblockIndex].NAME,\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (this.finish)\n\t\t\t{\n\t\t\t\tthis.finishOperation();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.checkOperation(result.finishOperation);\n\t\t\t}\n\t\t}\n\t}\n\n\tfinishOperation()\n\t{\n\t\tthis.currentState.operationCounter = 0;\n\t\tthis.currentState.errorCounter = 0;\n\t\tthis.currentState.lastID = 0;\n\t\tthis.finish = false;\n\n\t\tif (this.events.onComplete)\n\t\t{\n\t\t\tthis.events.onComplete();\n\t\t}\n\t}\n\n\tstartOperation()\n\t{\n\t\tBX.ajax.loadJSON(\n\t\t\tthis.url,\n\t\t\t{\n\t\t\t\tsessid: BX.bitrix_sessid(),\n\t\t\t\tchangeSettings: 'Y',\n\t\t\t\t...this.settings\n\t\t\t},\n\t\t\tBX.proxy(this.changeSettingsResult, this)\n\t\t);\n\t}\n\n\tchangeSettingsResult(result)\n\t{\n\t\tif (!BX.type.isPlainObject(result))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (result.success === 'Y')\n\t\t{\n\t\t\tthis.loadIblockList();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.stopOperation();\n\t\t}\n\t}\n\n\tstopOperation()\n\t{\n\t\tthis.finish = true;\n\t}\n\n\tcheckIblockIndex()\n\t{\n\t\treturn !(\n\t\t\tthis.iblocks.length === 0\n\t\t\t|| this.iblockIndex < 0\n\t\t\t|| this.iblockIndex >= this.iblocks.length\n\t\t);\n\t}\n\n\tloadIblockList()\n\t{\n\t\tBX.ajax.loadJSON(\n\t\t\tthis.url,\n\t\t\t{\n\t\t\t\tsessid: BX.bitrix_sessid(),\n\t\t\t\tgetIblock: 'Y'\n\t\t\t},\n\t\t\t(result) => {\n\t\t\t\tif (BX.type.isArray(result))\n\t\t\t\t{\n\t\t\t\t\tthis.iblocks = result;\n\t\t\t\t\tif (this.iblocks.length > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.iblockIndex = 0;\n\t\t\t\t\t\tthis.iblockReindex();\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.stopOperation();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t}\n\n\tiblockReindex()\n\t{\n\t\tif (this.finish || !this.checkIblockIndex())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.initStep();\n\t\tthis.nextStep();\n\t}\n\n\tinitStep()\n\t{\n\t\tthis.currentState.iblockId = this.iblocks[this.iblockIndex].ID;\n\t\tthis.currentState.counter = this.iblocks[this.iblockIndex].COUNT;\n\t\tthis.currentState.operationCounter = 0;\n\t\tthis.currentState.errorCounter = 0;\n\t\tthis.currentState.lastID = 0;\n\t}\n\n\tcheckOperation(result)\n\t{\n\t\tif (!!result)\n\t\t{\n\t\t\tthis.iblockIndex++;\n\t\t\tif (this.iblockIndex >= this.iblocks.length || this.currentState.errorCounter > 0)\n\t\t\t{\n\t\t\t\tthis.finishOperation();\n\t\t\t\tif (this.currentState.errorCounter == 0)\n\t\t\t\t{\n\t\t\t\t\tthis.finalRequest();\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.initStep();\n\t\t\t\tthis.nextStep();\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.nextStep();\n\t\t}\n\t}\n\n\tfinalRequest()\n\t{\n\t\tlet iblockList = [];\n\n\t\tif (this.iblocks.length > 0)\n\t\t{\n\t\t\tfor (let i = 0; i < this.iblocks.length; i++)\n\t\t\t{\n\t\t\t\tiblockList[iblockList.length] = this.iblocks[i].ID;\n\t\t\t}\n\n\t\t\tBX.ajax.get(\n\t\t\t\tthis.url,\n\t\t\t\t{\n\t\t\t\t\tsessid: BX.bitrix_sessid(),\n\t\t\t\t\tfinalRequest: 'Y',\n\t\t\t\t\tiblockList,\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t}\n}\n\nexport {\n\tProductSettingsUpdater\n};\n","import {Vue} from 'ui.vue';\nimport {ProductSettingsUpdater} from './updater';\nimport LocMixin from '../loc';\n\nexport default Vue.extend({\n\tmixins: [LocMixin],\n\tprops: {\n\t\tsettings: {\n\t\t\ttype: Object,\n\t\t\trequired: true\n\t\t},\n\t},\n\tdata ()\n\t{\n\t\treturn {\n\t\t\tcurrentIblockName: null,\n\t\t\tallCnt: 0,\n\t\t\tdoneCnt: 0,\n\t\t};\n\t},\n\tcomputed: {\n\t\tprogressStyles()\n\t\t{\n\t\t\tlet width = 0;\n\t\t\tif (this.allCnt > 0)\n\t\t\t{\n\t\t\t\twidth = Math.round((this.doneCnt / this.allCnt) * 100);\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\twidth: width + '%'\n\t\t\t};\n\t\t}\n\t},\n\tcreated()\n\t{\n\t\t(new ProductSettingsUpdater({\n\t\t\tsettings: this.settings,\n\t\t\tevents: {\n\t\t\t\tonProgress: (data) => {\n\t\t\t\t\tthis.currentIblockName = data.currentIblockName;\n\t\t\t\t\tthis.allCnt = data.allCnt;\n\t\t\t\t\tthis.doneCnt = data.doneCnt;\n\t\t\t\t},\n\t\t\t\tonComplete: () => {\n\t\t\t\t\tthis.$emit('complete');\n\t\t\t\t},\n\t\t\t}\n\t\t})).startOperation();\n\t},\n\ttemplate: `\n\t\t<div >\n\t\t\t<div class=\"ui-progressbar ui-progressbar-column\">\n\t\t\t\t<div style=\"font-weight: bold;\" class=\"ui-progressbar-text-before\">\n\t\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_PRODUCT_SETTINGS_UPDATE_TITLE}}\t\t\t\t\n\t\t\t\t</div>\n\t\t\t\t<div class=\"ui-progressbar-track\">\n\t\t\t\t\t<div :style=\"progressStyles\" class=\"ui-progressbar-bar\"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"ui-progressbar-text-after\">\n\t\t\t\t\t{{doneCnt}} {{loc.CRM_CFG_C_SETTINGS_OUT_OF}} {{allCnt}}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div style=\"color: rgb(83, 92, 105); font-size: 12px;\">\n\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_PRODUCT_SETTINGS_UPDATE_WAIT}}\n\t\t\t\t<div\n\t\t\t\t\tv-show=\"currentIblockName\"\n\t\t\t\t\tstyle=\"padding-top: 10px;\"\n\t\t\t\t>\n\t\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_PRODUCT_SETTINGS_CURRENT_CATALOG}}: {{currentIblockName}}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`\n});\n","export const Const = Object.freeze({\n\turl: '/crm/configs/catalog/'\n});\n","import LocMixin from './loc';\nimport Reservation from './reservation';\nimport {Loc, ajax, Tag, Extension, Event} from 'main.core';\nimport {Menu, Popup} from 'main.popup';\nimport {Button} from 'ui.buttons';\nimport {Slider} from 'catalog.store-use'\nimport {Vue} from 'ui.vue';\nimport ProductUpdater from './product-updater/template';\nimport {Const} from './const';\nimport 'ui.notification';\nimport 'ui.design-tokens';\nimport '../css/app.css';\n\nconst HELP_ARTICLE_ID = 15706692;\n\nexport default Vue.extend({\n\tmixins: [LocMixin],\n\tcomponents: {\n\t\t'reservation': Reservation,\n\t},\n\tprops: {\n\t\tinitData: {\n\t\t\ttype: Object,\n\t\t\trequired: true\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\t/**\n\t\t\t * State\n\t\t\t */\n\t\t\tisSaving: false,\n\t\t\tisChanged: false,\n\t\t\tcurrentReservationEntityCode: null,\n\t\t\t/**\n\t\t\t *\n\t\t\t */\n\t\t\tisStoreControlUsed: null,\n\t\t\tproductsCnt: null,\n\t\t\t/**\n\t\t\t * Reservation settings\n\t\t\t */\n\t\t\treservationEntities: [],\n\t\t\t/**\n\t\t\t * Default products settings\n\t\t\t */\n\t\t\tinitDefaultQuantityTrace: null,\n\t\t\tinitDefaultCanBuyZero: null,\n\t\t\tinitDefaultSubscribe: null,\n\t\t\tinitCheckRightsOnDecreaseStoreAmount: null,\n\t\t\tdefaultQuantityTrace: null,\n\t\t\tdefaultCanBuyZero: null,\n\t\t\tdefaultSubscribe: null,\n\t\t\tcheckRightsOnDecreaseStoreAmount: null,\n\t\t\t/**\n\t\t\t * Product card\n\t\t\t */\n\t\t\tproductCardSliderEnabled: null,\n\t\t\tisCanEnableProductCardSlider: false,\n\t\t\tisBitrix24: false,\n\t\t\tbusProductCardHelpLink: '',\n\t\t\tdefaultProductVatIncluded: null,\n\t\t};\n\t},\n\tcreated()\n\t{\n\t\tthis.initialize(this.initData);\n\t\tthis.productUpdaterPopup = null;\n\t\tthis.settingsMenu = null;\n\n\t\tlet sliderUrl = Const.url;\n\t\tif (this.configCatalogSource)\n\t\t{\n\t\t\tsliderUrl += '?configCatalogSource=' + this.configCatalogSource;\n\t\t}\n\t\tthis.slider = BX.SidePanel.Instance.getSlider(sliderUrl);\n\t},\n\tcomputed: {\n\t\thasAccessToReservationSettings()\n\t\t{\n\t\t\tif (this.initData.hasAccessToReservationSettings !== undefined)\n\t\t\t{\n\t\t\t\treturn this.initData.hasAccessToReservationSettings === true;\n\t\t\t}\n\n\t\t\treturn true;\n\t\t},\n\t\thasAccessToCatalogSettings()\n\t\t{\n\t\t\tif (this.initData.hasAccessToCatalogSettings !== undefined)\n\t\t\t{\n\t\t\t\treturn this.initData.hasAccessToCatalogSettings === true;\n\t\t\t}\n\n\t\t\treturn true;\n\t\t},\n\t\tisCanChangeOptionCanByZero()\n\t\t{\n\t\t\treturn Extension.getSettings('crm.config.catalog')?.isCanChangeOptionCanByZero === true;\n\t\t},\n\t\tisReservationUsed()\n\t\t{\n\t\t\treturn (\n\t\t\t\tthis.isStoreControlUsed\n\t\t\t\t|| this.isReservationUsageViaQuantityTrace\n\t\t\t);\n\t\t},\n\t\tisCanBuyZeroInDocsVisible()\n\t\t{\n\t\t\treturn this.isStoreControlUsed;\n\t\t},\n\t\tisDefaultQuantityTraceVisible()\n\t\t{\n\t\t\treturn this.isReservationUsageViaQuantityTrace;\n\t\t},\n\t\tisReservationUsageViaQuantityTrace()\n\t\t{\n\t\t\treturn (\n\t\t\t\t!this.isStoreControlUsed\n\t\t\t\t&& this.initDefaultQuantityTrace\n\t\t\t);\n\t\t},\n\t\thasProductSettingsChanged()\n\t\t{\n\t\t\treturn !(\n\t\t\t\tthis.initDefaultQuantityTrace === this.defaultQuantityTrace\n\t\t\t\t&& this.initDefaultCanBuyZero === this.defaultCanBuyZero\n\t\t\t\t&& this.initDefaultSubscribe === this.defaultSubscribe\n\t\t\t\t&& this.initCheckRightsOnDecreaseStoreAmount === this.checkRightsOnDecreaseStoreAmount\n\t\t\t);\n\t\t},\n\t\tneedProgressBarOnProductsUpdating()\n\t\t{\n\t\t\treturn this.productsCnt > 500;\n\t\t},\n\t\tsaveButtonClasses()\n\t\t{\n\t\t\treturn {\n\t\t\t\t'ui-btn': true,\n\t\t\t\t'ui-btn-success': true,\n\t\t\t\t'ui-btn-wait': this.isSaving,\n\t\t\t};\n\t\t},\n\t\tbuttonsPanelClass()\n\t\t{\n\t\t\treturn {\n\t\t\t\t'ui-button-panel-wrapper': true,\n\t\t\t\t'ui-pinner': true,\n\t\t\t\t'ui-pinner-bottom': true,\n\t\t\t\t'ui-pinner-full-width': true,\n\t\t\t\t'ui-button-panel-wrapper-hide': !this.isChanged,\n\t\t\t};\n\t\t},\n\t\tdescription()\n\t\t{\n\t\t\treturn this.isStoreControlUsed\n\t\t\t\t? Loc.getMessage('CRM_CFG_C_SETTINGS_STORE_CONTROL_ACTIVE')\n\t\t\t\t: Loc.getMessage('CRM_CFG_C_SETTINGS_STORE_CONTROL_NOT_ACTIVE');\n\t\t}\n\t},\n\twatch: {\n\t\tdefaultQuantityTrace(newVal, oldVal)\n\t\t{\n\t\t\tconst showWarn = this.isDefaultQuantityTraceVisible && (newVal === false && oldVal === true);\n\t\t\tif (!showWarn)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst warnPopup = new Popup(null, null, {\n\t\t\t\tevents: {\n\t\t\t\t\tonPopupClose: () => warnPopup.destroy()\n\t\t\t\t},\n\t\t\t\tcontent: Tag.render`\n\t\t\t\t\t<div class=\"catalog-settings-popup-content\">\n\t\t\t\t\t\t<h3>\n\t\t\t\t\t\t\t${Loc.getMessage('CRM_CFG_C_SETTINGS_TURN_OFF_QUANTITY_TRACE_TITLE')}\n\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t<div class=\"catalog-settings-popup-text\">\n\t\t\t\t\t\t\t${Loc.getMessage('CRM_CFG_C_SETTINGS_TURN_OFF_QUANTITY_TRACE_TEXT')}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t`,\n\t\t\t\tmaxWidth: 500,\n\t\t\t\toverlay: true,\n\t\t\t\tbuttons: [\n\t\t\t\t\tnew Button({\n\t\t\t\t\t\ttext : Loc.getMessage('CRM_CFG_C_SETTINGS_CLOSE'),\n\t\t\t\t\t\tcolor: Button.Color.PRIMARY,\n\t\t\t\t\t\tonclick: () => warnPopup.close()\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t});\n\t\t\twarnPopup.show();\n\t\t},\n\t},\n\tmethods: {\n\t\tmarkAsChanged()\n\t\t{\n\t\t\tthis.isChanged = true;\n\t\t},\n\t\tonEnableProductCardCheckboxClick()\n\t\t{\n\t\t\tif (!this.productCardSliderEnabled)\n\t\t\t{\n\t\t\t\tthis.askToEnableProductCardSlider();\n\t\t\t}\n\n\t\t\tthis.markAsChanged();\n\t\t},\n\t\taskToEnableProductCardSlider()\n\t\t{\n\t\t\tconst askPopup =\n\t\t\t\tthis.isBitrix24\n\t\t\t\t\t? this.createWarningProductCardPopupForBitrix24()\n\t\t\t\t\t: this.createWarningProductCardPopupForBUS();\n\n\t\t\taskPopup.show();\n\t\t},\n\t\tcreateWarningProductCardPopupForBitrix24()\n\t\t{\n\t\t\tconst askPopup = this.createWarningProductCardPopup(\n\t\t\t\tLoc.getMessage('CRM_CFG_C_SETTINGS_PRODUCT_CARD_ENABLE_NEW_CARD_ASK_TEXT'),\n\t\t\t\t[\n\t\t\t\t\tnew Button({\n\t\t\t\t\t\ttext : Loc.getMessage('CRM_CFG_C_SETTINGS_PRODUCT_CARD_ENABLE_NEW_CARD_ASK_DISAGREE'),\n\t\t\t\t\t\tcolor: Button.Color.PRIMARY,\n\t\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\t\tthis.productCardSliderEnabled = false;\n\t\t\t\t\t\t\taskPopup.close();\n\t\t\t\t\t\t},\n\t\t\t\t\t}),\n\t\t\t\t\tnew Button({\n\t\t\t\t\t\ttext : Loc.getMessage('CRM_CFG_C_SETTINGS_PRODUCT_CARD_ENABLE_NEW_CARD_ASK_AGREE'),\n\t\t\t\t\t\tonclick: () => askPopup.close(),\n\t\t\t\t\t}),\n\t\t\t\t],\n\t\t\t\t{\n\t\t\t\t\tonPopupShow: () => {\n\t\t\t\t\t\tconst helpdeskLink = document.getElementById('catalog-settings-new-productcard-popup-helpdesk');\n\t\t\t\t\t\tif (helpdeskLink)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tEvent.bind(helpdeskLink, 'click', () => top.BX.Helper.show('redirect=detail&code=11657084'));\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t);\n\n\t\t\treturn askPopup;\n\t\t},\n\t\tcreateWarningProductCardPopupForBUS()\n\t\t{\n\t\t\tconst askPopup = this.createWarningProductCardPopup(\n\t\t\t\tLoc.getMessage('CRM_CFG_C_SETTINGS_PRODUCT_CARD_ENABLE_NEW_CARD_ASK_BUS_TEXT').replace('#HELP_LINK#', this.busProductCardHelpLink),\n\t\t\t\t[\n\t\t\t\t\tnew Button({\n\t\t\t\t\t\ttext : Loc.getMessage('CRM_CFG_C_SETTINGS_PRODUCT_CARD_ENABLE_NEW_CARD_ASK_AGREE'),\n\t\t\t\t\t\tcolor: Button.Color.SUCCESS,\n\t\t\t\t\t\tonclick: () => askPopup.close(),\n\t\t\t\t\t}),\n\t\t\t\t\tnew Button({\n\t\t\t\t\t\ttext : Loc.getMessage('CRM_CFG_C_SETTINGS_PRODUCT_CARD_ENABLE_NEW_CARD_ASK_BUS_DISAGREE'),\n\t\t\t\t\t\tcolor: Button.Color.LINK,\n\t\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\t\tthis.productCardSliderEnabled = false;\n\t\t\t\t\t\t\taskPopup.close();\n\t\t\t\t\t\t},\n\t\t\t\t\t}),\n\t\t\t\t],\n\t\t\t);\n\n\t\t\treturn askPopup;\n\t\t},\n\t\tcreateWarningProductCardPopup(contentText: string, buttons: Array, events = {})\n\t\t{\n\t\t\tconst popupParams = {\n\t\t\t\tevents: {\n\t\t\t\t\tonPopupClose: () => askPopup.destroy(),\n\t\t\t\t\t...events,\n\t\t\t\t},\n\t\t\t\tcontent: Tag.render`\n\t\t\t\t\t<div class=\"catalog-settings-new-productcard-popup-content\">\n\t\t\t\t\t\t${contentText}\n\t\t\t\t\t</div>\n\t\t\t\t`,\n\t\t\t\tclassName: 'catalog-settings-new-productcard-popup',\n\t\t\t\ttitleBar: Loc.getMessage('CRM_CFG_C_SETTINGS_PRODUCT_CARD_ENABLE_NEW_CARD_ASK_TITLE'),\n\t\t\t\tmaxWidth: 800,\n\t\t\t\toverlay: true,\n\t\t\t\tbuttons: buttons,\n\t\t\t};\n\n\t\t\tconst askPopup = new Popup(null, null, popupParams);\n\n\t\t\treturn askPopup;\n\t\t},\n\t\topenStoreControlMaster(mode = '')\n\t\t{\n\t\t\tlet sliderUrl = '/bitrix/components/bitrix/catalog.warehouse.master.clear/slider.php?mode=' + mode;\n\t\t\tif (this.configCatalogSource)\n\t\t\t{\n\t\t\t\tsliderUrl += '&inventoryManagementSource=' + this.configCatalogSource;\n\t\t\t}\n\t\t\tnew Slider().open(\n\t\t\t\tsliderUrl,\n\t\t\t\t{}\n\t\t\t)\n\t\t\t\t.then((slider) => {\n\t\t\t\t\tajax.runAction('catalog.config.isUsedInventoryManagement', {})\n\t\t\t\t\t\t.then((response) => {\n\t\t\t\t\t\t\tif (this.isStoreControlUsed !== response.data)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif (response.data === true)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tthis.close();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tthis.refresh();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (slider?.getData().get('isPresetApplied'))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.showMessage(Loc.getMessage('CRM_CFG_C_SETTINGS_SAVED_SUCCESSFULLY'));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t});\n\t\t},\n\t\trefresh()\n\t\t{\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tajax.runComponentAction('bitrix:crm.config.catalog.settings', 'initialize', {\n\t\t\t\t\tmode: 'class',\n\t\t\t\t\tjson: {}\n\t\t\t\t}).then((response) => {\n\t\t\t\t\tthis.initialize(response.data);\n\t\t\t\t\tresolve();\n\t\t\t\t}).catch((response) => {\n\t\t\t\t\tthis.showResponseErrors(response);\n\t\t\t\t\treject();\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\twait(ms)\n\t\t{\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tresolve();\n\t\t\t\t}, ms);\n\t\t\t});\n\t\t},\n\t\tshowResponseErrors(response)\n\t\t{\n\t\t\tthis.showMessage(\n\t\t\t\tresponse.errors.map(error => error.message).join(', ')\n\t\t\t);\n\t\t},\n\t\tshowMessage(message)\n\t\t{\n\t\t\ttop.BX.loadExt(\"ui.notification\").then(() => {\n\t\t\t\ttop.BX.UI.Notification.Center.notify({content: message,});\n\t\t\t});\n\t\t},\n\t\tinitialize(data)\n\t\t{\n\t\t\tthis.isStoreControlUsed = data.isStoreControlUsed;\n\t\t\tthis.productsCnt = data.productsCnt;\n\n\t\t\t/**\n\t\t\t * Reservation settings\n\t\t\t */\n\t\t\tthis.reservationEntities = data.reservationEntities;\n\t\t\tif (this.reservationEntities.length > 0) {\n\t\t\t\tthis.currentReservationEntityCode = this.reservationEntities[0].code;\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * Product settings\n\t\t\t */\n\t\t\tthis.initDefaultQuantityTrace = this.defaultQuantityTrace = data.defaultQuantityTrace;\n\t\t\tthis.initDefaultCanBuyZero = this.defaultCanBuyZero = data.defaultCanBuyZero;\n\t\t\tthis.initDefaultSubscribe = this.defaultSubscribe = data.defaultSubscribe;\n\t\t\tthis.initCheckRightsOnDecreaseStoreAmount = this.checkRightsOnDecreaseStoreAmount = data.checkRightsOnDecreaseStoreAmount;\n\n\t\t\t/**\n\t\t\t * Other settings\n\t\t\t */\n\t\t\tthis.defaultProductVatIncluded = data.defaultProductVatIncluded;\n\t\t\tthis.productCardSliderEnabled = data.productCardSliderEnabled;\n\t\t\tthis.isCanEnableProductCardSlider = data.isCanEnableProductCardSlider;\n\t\t\tthis.isBitrix24 = data.isBitrix24;\n\t\t\tthis.busProductCardHelpLink = data.busProductCardHelpLink;\n\t\t\tthis.configCatalogSource = this.configCatalogSource ?? data.configCatalogSource;\n\n\t\t\tthis.isChanged = false;\n\t\t},\n\t\tonReservationSettingsValuesChanged(values, index)\n\t\t{\n\t\t\tthis.reservationEntities[index].settings.values = values;\n\t\t\tthis.markAsChanged();\n\t\t},\n\t\tsave()\n\t\t{\n\t\t\tif (this.isSaving)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.isSaving = true;\n\n\t\t\tthis.saveProductSettings().then(() => {\n\t\t\t\tajax.runComponentAction('bitrix:crm.config.catalog.settings', 'save', {\n\t\t\t\t\tmode: 'class',\n\t\t\t\t\tjson: {\n\t\t\t\t\t\tvalues: {\n\t\t\t\t\t\t\treservationSettings: this.makeReservationSettings(),\n\t\t\t\t\t\t\tproductCardSliderEnabled: this.productCardSliderEnabled,\n\t\t\t\t\t\t\tdefaultProductVatIncluded: this.defaultProductVatIncluded,\n\t\t\t\t\t\t\tcheckRightsOnDecreaseStoreAmount: this.checkRightsOnDecreaseStoreAmount,\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}).then((response) => {\n\t\t\t\t\tthis.isChanged = false;\n\t\t\t\t\tthis.isSaving = false;\n\t\t\t\t\tthis.showMessage(Loc.getMessage('CRM_CFG_C_SETTINGS_SAVED_SUCCESSFULLY'));\n\t\t\t\t\tthis.refresh()\n\t\t\t\t\t\t.then(() => this.wait(700))\n\t\t\t\t\t\t.then(() => this.close());\n\n\t\t\t\t\tBX.SidePanel.Instance.postMessage(window, \"BX.Crm.Config.Catalog:onAfterSaveSettings\");\n\t\t\t\t}).catch((response) => {\n\t\t\t\t\tthis.isChanged = false;\n\t\t\t\t\tthis.isSaving = false;\n\t\t\t\t\tthis.showResponseErrors(response);\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tsaveProductSettings()\n\t\t{\n\t\t\tif (!this.hasProductSettingsChanged)\n\t\t\t{\n\t\t\t\treturn Promise.resolve();\n\t\t\t}\n\n\t\t\tconst productUpdaterOptions = {\n\t\t\t\tpropsData: {\n\t\t\t\t\tsettings: {\n\t\t\t\t\t\tdefault_quantity_trace: this.defaultQuantityTrace ? 'Y' : 'N',\n\t\t\t\t\t\tdefault_can_buy_zero: this.defaultCanBuyZero ? 'Y' : 'N',\n\t\t\t\t\t\tdefault_subscribe: this.defaultSubscribe ? 'Y' : 'N',\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\n\t\t\treturn new Promise((resolve) => {\n\t\t\t\tconst productUpdater = (new ProductUpdater(productUpdaterOptions))\n\t\t\t\t\t.$on('complete', () => {\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t\tif (this.needProgressBarOnProductsUpdating)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.productUpdaterPopup.destroy();\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.$mount();\n\n\t\t\t\tif (this.needProgressBarOnProductsUpdating)\n\t\t\t\t{\n\t\t\t\t\tthis.productUpdaterPopup = new Popup({\n\t\t\t\t\t\tcontent: productUpdater.$el,\n\t\t\t\t\t\twidth: 310,\n\t\t\t\t\t\toverlay: true,\n\t\t\t\t\t\tpadding: 17,\n\t\t\t\t\t\tanimation: 'fading-slide',\n\t\t\t\t\t\tangle: false,\n\t\t\t\t\t});\n\t\t\t\t\tthis.productUpdaterPopup.show();\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tmakeReservationSettings()\n\t\t{\n\t\t\tlet result = {};\n\n\t\t\tfor (let reservationEntity of this.reservationEntities)\n\t\t\t{\n\t\t\t\tresult[reservationEntity.code] = reservationEntity.settings.values;\n\t\t\t}\n\n\t\t\treturn result;\n\t\t},\n\t\tcancel()\n\t\t{\n\t\t\tthis.close();\n\t\t},\n\t\tclose()\n\t\t{\n\t\t\tthis.slider.close();\n\t\t},\n\t\tgetReservationSettingsHint()\n\t\t{\n\t\t\treturn this.getHintContentWrapped(\n\t\t\t\tLoc.getMessage('CRM_CFG_C_SETTINGS_RESERVATION_SETTINGS_HINT'),\n\t\t\t\tHELP_ARTICLE_ID,\n\t\t\t\t'reservation'\n\t\t\t);\n\t\t},\n\t\tgetProductsSettingsHint()\n\t\t{\n\t\t\treturn this.getHintContent(\n\t\t\t\tLoc.getMessage('CRM_CFG_C_SETTINGS_PRODUCTS_SETTINGS_HINT'),\n\t\t\t\tHELP_ARTICLE_ID,\n\t\t\t\t'products'\n\t\t\t);\n\t\t},\n\t\tgetCanBuyZeroHint()\n\t\t{\n\t\t\treturn this.getHintContent(\n\t\t\t\tLoc.getMessage('CRM_CFG_C_SETTINGS_CAN_BUY_ZERO_HINT'),\n\t\t\t\tHELP_ARTICLE_ID,\n\t\t\t\t'products'\n\t\t\t);\n\t\t},\n\t\tgetCanBuyZeroInDocsHint()\n\t\t{\n\t\t\treturn this.getHintContent(\n\t\t\t\t`\n\t\t\t\t\t${Loc.getMessage('CRM_CFG_C_SETTINGS_CAN_BUY_ZERO_IN_DOCS_HINT')}\n\t\t\t\t\t<br/><br/>\n\t\t\t\t\t${Loc.getMessage('CRM_CFG_C_SETTINGS_CAN_BUY_ZERO_IN_DOCS_HINT_DOC_TYPE_RESTRICTIONS')}\n\t\t\t\t\t<br/>\n\t\t\t\t`,\n\t\t\t\tHELP_ARTICLE_ID,\n\t\t\t\t'products'\n\t\t\t);\n\t\t},\n\t\tgetHintContent(content, article, anchor)\n\t\t{\n\t\t\treturn `\n\t\t\t\t${content}\n\t\t\t\t<br/>\n\t\t\t\t${this.getDocumentationLink(Loc.getMessage('CRM_CFG_C_SETTINGS_DETAILS'), article, anchor)}\n\t\t\t`;\n\t\t},\n\t\tgetHintContentWrapped(text, article, anchor)\n\t\t{\n\t\t\treturn this.getDocumentationLink(text, article, anchor);\n\t\t},\n\t\tgetDocumentationLink(text, article, anchor)\n\t\t{\n\t\t\treturn `\n\t\t\t\t<a href=\"javascript:void(0);\" onclick=\"if (top.BX.Helper){top.BX.Helper.show('redirect=detail&code=${article}#${anchor}');}\" class=\"catalog-settings-helper-link\">\n\t\t\t\t\t${text}\n\t\t\t\t</a>\n\t\t\t`;\n\t\t},\n\t\tshowSettingsMenu(e)\n\t\t{\n\t\t\tthis.settingsMenu = new Menu({\n\t\t\t\tbindElement: e.target,\n\t\t\t\tangle: true,\n\t\t\t\toffsetLeft: 20,\n\t\t\t\titems: [{\n\t\t\t\t\ttext: Loc.getMessage('CRM_CFG_C_SETTINGS_TURN_INVENTORY_CONTROL_OFF'),\n\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\tthis.settingsMenu.destroy();\n\t\t\t\t\t\tthis.openStoreControlMaster('disable');\n\t\t\t\t\t}\n\t\t\t\t}],\n\t\t\t});\n\t\t\tthis.settingsMenu.show();\n\t\t},\n\t},\n\tmounted()\n\t{\n\t\tBX.UI.Hint.init(this.$el);\n\t},\n\ttemplate: `\n\t\t<div class=\"catalog-settings-wrapper\">\n\t\t\t<form>\n\t\t\t\t<div class=\"ui-slider-section\">\n\t\t\t\t\t<div class=\"ui-slider-content-box\">\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tstyle=\"display: flex; align-items: center\"\n\t\t\t\t\t\t\tclass=\"ui-slider-heading-4\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_TITLE}}\n\t\t\t\t\t\t\t<div v-if=\"isStoreControlUsed && hasAccessToCatalogSettings\" class=\"catalog-settings-main-header-feedback-container\">\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t@click.prevent=\"showSettingsMenu\"\n\t\t\t\t\t\t\t\t\tclass=\"ui-toolbar-right-buttons\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<button class=\"ui-btn ui-btn-light-border ui-btn-icon-setting ui-btn-themes\"></button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"ui-slider-inner-box\">\n\t\t\t\t\t\t\t<p class=\"ui-slider-paragraph-2\">\n\t\t\t\t\t\t\t\t{{description}}\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div v-if=\"hasAccessToCatalogSettings\" class=\"catalog-settings-button-container\">\n\t\t\t\t\t\t\t<template v-if=\"isStoreControlUsed\">\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t@click=\"openStoreControlMaster('edit')\"\n\t\t\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-md ui-btn-light-border ui-btn-width\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_OPEN_SETTINGS}}\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t@click=\"openStoreControlMaster()\"\n\t\t\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-success\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_TURN_INVENTORY_CONTROL_ON}}\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"catalog-settings-main-settings\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tv-if=\"isReservationUsed && hasAccessToReservationSettings\"\n\t\t\t\t\t\tclass=\"ui-slider-section\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div class=\"ui-slider-heading-4\">\n\t\t\t\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_RESERVATION_SETTINGS}}\n\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\tclass=\"ui-hint\"\n\t\t\t\t\t\t\t\tdata-hint-html=\"\"\n\t\t\t\t\t\t\t\tdata-hint-interactivity=\"\"\n\t\t\t\t\t\t\t\t:data-hint=\"getReservationSettingsHint()\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<span class=\"ui-hint-icon\"></span>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"catalog-settings-editor-content-block\">\n\t\t\t\t\t\t\t<div class=\"ui-ctl-label-text\">\n\t\t\t\t\t\t\t\t<label>{{loc.CRM_CFG_C_SETTINGS_RESERVATION_ENTITY}}</label>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-after-icon ui-ctl-dropdown ui-ctl-disabled ui-ctl-w100\">\n\t\t\t\t\t\t\t\t<!--<div class=\"ui-ctl-after ui-ctl-icon-angle\"></div>-->\n\t\t\t\t\t\t\t\t<select\n\t\t\t\t\t\t\t\t\tv-model=\"currentReservationEntityCode\"\n\t\t\t\t\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<option\n\t\t\t\t\t\t\t\t\t\tv-for=\"reservationEntity in reservationEntities\"\n\t\t\t\t\t\t\t\t\t\t:value=\"reservationEntity.code\"\n\t\t\t\t\t\t\t\t\t\t:disabled=\"reservationEntity.code !== 'deal'\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{{reservationEntity.name}}\n\t\t\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<reservation\n\t\t\t\t\t\t\tv-for=\"(reservationEntity, index) in reservationEntities\"\n\t\t\t\t\t\t\tv-show=\"reservationEntity.code === currentReservationEntityCode\"\n\t\t\t\t\t\t\t:key=\"reservationEntity.code\"\n\t\t\t\t\t\t\t:settings=\"reservationEntity.settings\"\n\t\t\t\t\t\t\t@change=\"onReservationSettingsValuesChanged($event, index)\"\n\t\t\t\t\t\t></reservation>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div v-if=\"hasAccessToCatalogSettings\" class=\"ui-slider-section\">\n\t\t\t\t\t\t<div class=\"ui-slider-heading-4\">\n\t\t\t\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_PRODUCTS_SETTINGS}}\n\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\tclass=\"ui-hint\"\n\t\t\t\t\t\t\t\tdata-hint-html=\"\"\n\t\t\t\t\t\t\t\tdata-hint-interactivity=\"\"\n\t\t\t\t\t\t\t\t:data-hint=\"getProductsSettingsHint()\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<span class=\"ui-hint-icon\"></span>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tv-if=\"isCanEnableProductCardSlider\"\n\t\t\t\t\t\t\tclass=\"catalog-settings-editor-checkbox-content-block\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-checkbox ui-ctl-w100\">\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t@click=\"onEnableProductCardCheckboxClick\"\n\t\t\t\t\t\t\t\t\tv-model=\"productCardSliderEnabled\"\n\t\t\t\t\t\t\t\t\tid=\"product_card_slider_enabled\"\n\t\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<label for=\"product_card_slider_enabled\" class=\"ui-ctl-label-text\">\n\t\t\t\t\t\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_PRODUCT_CARD_ENABLE_NEW_CARD}}\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"catalog-settings-editor-checkbox-content-block\">\n\t\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-checkbox ui-ctl-w100\">\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\tv-model=\"defaultSubscribe\"\n\t\t\t\t\t\t\t\t\t@click=\"markAsChanged\"\n\t\t\t\t\t\t\t\t\tid=\"default_subscribe\"\n\t\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<label for=\"default_subscribe\" class=\"ui-ctl-label-text\">\n\t\t\t\t\t\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_PRODUCTS_SETTINGS_DEFAULT_SUBSCRIBE}}\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"catalog-settings-editor-checkbox-content-block\">\n\t\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-checkbox ui-ctl-w100\">\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\tv-model=\"defaultProductVatIncluded\"\n\t\t\t\t\t\t\t\t\t@click=\"markAsChanged\"\n\t\t\t\t\t\t\t\t\tid=\"default_product_vat_included\"\n\t\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<label for=\"default_product_vat_included\" class=\"ui-ctl-label-text\">\n\t\t\t\t\t\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_PRODUCT_CARD_SET_VAT_IN_PRICE_FOR_NEW_PRODUCTS}}\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tv-if=\"isDefaultQuantityTraceVisible\"\n\t\t\t\t\t\t\tclass=\"catalog-settings-editor-checkbox-content-block\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-checkbox ui-ctl-w100\">\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\tv-model=\"defaultQuantityTrace\"\n\t\t\t\t\t\t\t\t\t@click=\"markAsChanged\"\n\t\t\t\t\t\t\t\t\tid=\"default_quantity_trace\"\n\t\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<label for=\"default_quantity_trace\" class=\"ui-ctl-label-text\">\n\t\t\t\t\t\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_PRODUCTS_DEFAULT_QUANTITY_TRACE}}\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div v-if=\"isCanBuyZeroInDocsVisible\" class=\"catalog-settings-editor-checkbox-content-block\">\n\t\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-checkbox ui-ctl-w100\">\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\tv-model=\"checkRightsOnDecreaseStoreAmount\"\n\t\t\t\t\t\t\t\t\t@click=\"markAsChanged\"\n\t\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<label class=\"ui-ctl-label-text\">\n\t\t\t\t\t\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_PRODUCTS_SETTINGS_DEFAULT_CAN_BUY_ZERO_IN_DOCS}}\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\tclass=\"ui-hint\"\n\t\t\t\t\t\t\t\t\tdata-hint-html=\"\"\n\t\t\t\t\t\t\t\t\tdata-hint-interactivity=\"\"\n\t\t\t\t\t\t\t\t\t:data-hint=\"getCanBuyZeroInDocsHint()\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<span class=\"ui-hint-icon\"></span>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tv-if=\"isReservationUsed && isCanChangeOptionCanByZero\"\n\t\t\t\t\t\t\tclass=\"catalog-settings-editor-checkbox-content-block\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-checkbox ui-ctl-w100\">\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\tv-model=\"defaultCanBuyZero\"\n\t\t\t\t\t\t\t\t\t@click=\"markAsChanged\"\n\t\t\t\t\t\t\t\t\tid=\"default_can_buy_zero\"\n\t\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t\t\t\t\t:disabled=\"!isCanChangeOptionCanByZero\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<label for=\"default_can_buy_zero\" class=\"ui-ctl-label-text\">\n\t\t\t\t\t\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_PRODUCTS_SETTINGS_DEFAULT_CAN_BUY_ZERO_V2}}\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\tclass=\"ui-hint\"\n\t\t\t\t\t\t\t\t\tdata-hint-html=\"\"\n\t\t\t\t\t\t\t\t\tdata-hint-interactivity=\"\"\n\t\t\t\t\t\t\t\t\t:data-hint=\"getCanBuyZeroHint()\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<span class=\"ui-hint-icon\"></span>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</form>\n\t\t\t<div\n\t\t\t\t:class=\"buttonsPanelClass\"\n\t\t\t>\n\t\t\t\t<div class=\"ui-button-panel ui-button-panel-align-center \">\n\t\t\t\t\t<button\n\t\t\t\t\t\t@click=\"save\"\n\t\t\t\t\t\t:class=\"saveButtonClasses\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_SAVE_BUTTON}}\n\t\t\t\t\t</button>\n\t\t\t\t\t<a\n\t\t\t\t\t\t@click=\"cancel\"\n\t\t\t\t\t\tclass=\"ui-btn ui-btn-link\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{loc.CRM_CFG_C_SETTINGS_CANCEL_BUTTON}}\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div style=\"height: 65px;\"></div>\n\t\t</div>\n\t`\n})\n","import {Const} from './const';\nimport {Type} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\n\nexport default class Slider\n{\n\tstatic open(source = null, options = {})\n\t{\n\t\tlet url = Const.url;\n\t\tif (Type.isStringFilled(source))\n\t\t{\n\t\t\turl += '?configCatalogSource=' + source;\n\t\t}\n\n\t\tEventEmitter.subscribe('SidePanel.Slider:onMessage', (event) => {\n\n\t\t\tconst [data] = event.getData();\n\n\t\t\tif (data.eventId === 'BX.Crm.Config.Catalog:onAfterSaveSettings')\n\t\t\t{\n\t\t\t\tEventEmitter.emit(window, 'onCatalogSettingsSave');\n\t\t\t}\n\t\t});\n\n\t\treturn new Promise((resolve) =>\n\t\t{\n\t\t\treturn BX.SidePanel.Instance.open(\n\t\t\t\turl,\n\t\t\t\t{\n\t\t\t\t\twidth: 1000,\n\t\t\t\t\tallowChangeHistory: false,\n\t\t\t\t\tcacheable: false,\n\t\t\t\t\t...options,\n\t\t\t\t}\n\t\t\t);\n\t\t});\n\t}\n}\n"],"names":["computed","loc","Vue","getFilteredPhrases","props","settings","type","Object","required","data","result","scheme","element","code","values","methods","onChanged","$emit","$data","getWrapperClass","mounted","BX","UI","Hint","init","$el","template","ProductSettingsUpdater","params","url","stepOptions","ajaxSessionID","maxExecutionTime","maxOperationCounter","finish","currentState","counter","operationCounter","errorCounter","lastID","ajaxParams","operation","iblocks","iblockIndex","events","key","hasOwnProperty","sessid","bitrix_sessid","lang","message","ajax","loadJSON","proxy","nextStepResult","isPlainObject","parseInt","isNaN","onProgress","allCnt","allCounter","doneCnt","allOperationCounter","currentIblockName","NAME","finishOperation","checkOperation","onComplete","changeSettings","changeSettingsResult","success","loadIblockList","stopOperation","length","getIblock","isArray","iblockReindex","checkIblockIndex","initStep","nextStep","iblockId","ID","COUNT","finalRequest","iblockList","i","get","extend","mixins","LocMixin","progressStyles","width","Math","round","created","startOperation","Const","freeze","HELP_ARTICLE_ID","components","Reservation","initData","isSaving","isChanged","currentReservationEntityCode","isStoreControlUsed","productsCnt","reservationEntities","initDefaultQuantityTrace","initDefaultCanBuyZero","initDefaultSubscribe","initCheckRightsOnDecreaseStoreAmount","defaultQuantityTrace","defaultCanBuyZero","defaultSubscribe","checkRightsOnDecreaseStoreAmount","productCardSliderEnabled","isCanEnableProductCardSlider","isBitrix24","busProductCardHelpLink","defaultProductVatIncluded","initialize","productUpdaterPopup","settingsMenu","sliderUrl","configCatalogSource","slider","SidePanel","Instance","getSlider","hasAccessToReservationSettings","undefined","hasAccessToCatalogSettings","isCanChangeOptionCanByZero","Extension","getSettings","isReservationUsed","isReservationUsageViaQuantityTrace","isCanBuyZeroInDocsVisible","isDefaultQuantityTraceVisible","hasProductSettingsChanged","needProgressBarOnProductsUpdating","saveButtonClasses","buttonsPanelClass","description","Loc","getMessage","watch","newVal","oldVal","showWarn","warnPopup","Popup","onPopupClose","destroy","content","Tag","render","maxWidth","overlay","buttons","Button","text","color","Color","PRIMARY","onclick","close","show","markAsChanged","onEnableProductCardCheckboxClick","askToEnableProductCardSlider","askPopup","createWarningProductCardPopupForBitrix24","createWarningProductCardPopupForBUS","createWarningProductCardPopup","onPopupShow","helpdeskLink","document","getElementById","Event","bind","top","Helper","replace","SUCCESS","LINK","contentText","popupParams","className","titleBar","openStoreControlMaster","mode","Slider","open","then","runAction","response","refresh","getData","showMessage","Promise","resolve","reject","runComponentAction","json","showResponseErrors","wait","ms","setTimeout","errors","map","error","join","loadExt","Notification","Center","notify","onReservationSettingsValuesChanged","index","save","saveProductSettings","reservationSettings","makeReservationSettings","postMessage","window","productUpdaterOptions","propsData","default_quantity_trace","default_can_buy_zero","default_subscribe","productUpdater","ProductUpdater","$on","$mount","padding","animation","angle","reservationEntity","cancel","getReservationSettingsHint","getHintContentWrapped","getProductsSettingsHint","getHintContent","getCanBuyZeroHint","getCanBuyZeroInDocsHint","article","anchor","getDocumentationLink","showSettingsMenu","e","Menu","bindElement","target","offsetLeft","items","source","options","Type","isStringFilled","EventEmitter","subscribe","event","eventId","emit","allowChangeHistory","cacheable"],"mappings":"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"}