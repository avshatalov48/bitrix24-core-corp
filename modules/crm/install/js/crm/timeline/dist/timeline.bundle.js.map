{"version":3,"file":"timeline.bundle.js","sources":["../src/types.js","../src/item.js","../src/animations/fasten.js","../src/items/history.js","../src/mixins/history-item.js","../src/encourage-buy-products/product.js","../src/encourage-buy-products/component.js","../src/components/author.js","../src/notification/component.js","../src/components/delivery/delivery-service-info.js","../src/delivery-activity/component.js","../src/delivery-message/component.js","../src/delivery-calculation/component.js","../src/editor.js","../src/tools/wait-configuration-dialog.js","../src/editors/wait.js","../src/editors/sms.js","../src/editors/rest.js","../src/editors/comment.js","../src/items/scheduled.js","../src/action.js","../src/actions/activity.js","../src/actions/email.js","../src/items/history-activity.js","../src/items/document.js","../src/stream.js","../src/streams/entitychat.js","../src/tools/menubar.js","../src/tools/audio-playback-rate-selector.js","../src/tools/schedule-postpone-controller.js","../src/items/scheduled/activity.js","../src/items/scheduled/email.js","../src/items/scheduled/call.js","../src/items/scheduled/call-tracker.js","../src/items/scheduled/meeting.js","../src/items/scheduled/task.js","../src/items/scheduled/store-document.js","../src/items/scheduled/webform.js","../src/items/scheduled/wait.js","../src/items/scheduled/request.js","../src/items/scheduled/rest.js","../src/actions/openline.js","../src/items/scheduled/openline.js","../src/items/scheduled/zoom.js","../src/animations/item.js","../src/animations/shift.js","../src/animations/item-new.js","../src/streams/schedule.js","../src/items/modification.js","../src/items/conversion.js","../src/items/email.js","../src/actions/call.js","../src/items/call.js","../src/items/meeting.js","../src/items/task.js","../src/items/webform.js","../src/items/sms.js","../src/items/request.js","../src/items/openline.js","../src/items/rest.js","../src/items/visit.js","../src/items/zoom.js","../src/items/order-creation.js","../src/items/order-modification.js","../src/items/store-document-creation.js","../src/items/store-document-modification.js","../src/items/external-notice-modification.js","../src/items/external-notice-status-modification.js","../src/items/order-check.js","../src/items/final-summary-documents.js","../src/items/final-summary.js","../src/items/creation.js","../src/items/restoration.js","../src/items/relation.js","../src/items/link.js","../src/items/unlink.js","../src/items/mark.js","../src/items/comment.js","../src/items/wait.js","../src/items/sender.js","../src/items/bizproc.js","../src/items/scoring.js","../src/streams/history.js","../src/streams/fixedhistory.js","../src/animations/expand.js","../src/manager.js","../src/tools/sms-watcher.js","../src/actions/schedule-postpone.js","../src/animations/comment.js","../src/index.js"],"sourcesContent":["/** @memberof BX.Crm.Timeline.Types */\nexport const Item = {\n\tundefined: 0,\n\tactivity: 1,\n\tcreation: 2,\n\tmodification: 3,\n\tlink: 4,\n\tunlink: 5,\n\tmark: 6,\n\tcomment: 7,\n\twait: 8,\n\tbizproc: 9,\n\tconversion: 10,\n\tsender: 11,\n\tdocument: 12,\n\trestoration: 13,\n\torder: 14,\n\torderCheck: 15,\n\tscoring: 16,\n\texternalNotification: 17,\n\tfinalSummary: 18,\n\tdelivery: 19,\n\tfinalSummaryDocuments: 20,\n\tstoreDocument: 21,\n};\n\n/** @memberof BX.Crm.Timeline.Types */\nexport const Mark = {\n\tundefined: 0,\n\twaiting: 1,\n\tsuccess: 2,\n\trenew: 3,\n\tignored: 4,\n\tfailed: 5\n};\n\n/** @memberof BX.Crm.Timeline.Types */\nexport const Delivery = {\n\tundefined: 0,\n\ttaxiEstimationRequest: 1,\n\ttaxiCallRequest: 2,\n\ttaxiCancelledByManager: 3,\n\ttaxiCancelledByDriver: 4,\n\ttaxiPerformerNotFound: 5,\n\ttaxiSmsProviderIssue: 6,\n\ttaxiReturnedFinish: 7,\n\tdeliveryMessage: 101,\n\tdeliveryCalculation: 102,\n};\n\n/** @memberof BX.Crm.Timeline.Types */\nexport const Order = {\n\tencourageBuyProducts: 100,\n}\n\n/** @memberof BX.Crm.Timeline.Types */\nexport const EditorMode = {\n\tview: 1,\n\tedit: 2\n}","import {Item as ItemType} from \"./types\";\n\n/** @memberof BX.Crm.Timeline */\nexport default class Item\n{\n\tconstructor()\n\t{\n\t\tthis._id = \"\";\n\t\tthis._settings = {};\n\t\tthis._data = {};\n\t\tthis._container = null;\n\t\tthis._wrapper = null;\n\t\n\t\tthis._typeCategoryId = null;\n\t\tthis._associatedEntityData = null;\n\t\tthis._associatedEntityTypeId = null;\n\t\tthis._associatedEntityId = null;\n\t\tthis._isContextMenuShown = false;\n\t\tthis._contextMenuButton = null;\n\t\n\t\tthis._activityEditor = null;\n\t\tthis._actions = [];\n\t\tthis._actionContainer = null;\n\t\n\t\tthis._isTerminated = false;\n\t\n\t\tthis._vueComponent = null;\n\t\tthis._vueComponentMountedNode = null;\n\t}\n\n\tinitialize(id, settings)\n\t{\n\t\tthis._id = BX.type.isNotEmptyString(id) ? id : BX.util.getRandomString(4);\n\t\tthis._settings = settings ? settings : {};\n\n\t\tthis._container = this.getSetting(\"container\");\n\n\t\tif(!BX.type.isPlainObject(settings['data']))\n\t\t{\n\t\t\tthrow \"Item. A required parameter 'data' is missing.\";\n\t\t}\n\t\tthis._data = settings['data'];\n\n\t\tthis._activityEditor = this.getSetting(\"activityEditor\");\n\n\t\tthis._vueComponent = this.getSetting(\"vueComponent\");\n\n\t\tthis.doInitialize();\n\t}\n\n\tdoInitialize()\n\t{\n\t}\n\n\tgetId()\n\t{\n\t\treturn this._id;\n\t}\n\n\tgetSetting(name, defaultval)\n\t{\n\t\treturn this._settings.hasOwnProperty(name) ? this._settings[name] : defaultval;\n\t}\n\n\tgetData()\n\t{\n\t\treturn this._data;\n\t}\n\n\tsetData(data)\n\t{\n\t\tif(BX.type.isPlainObject(data))\n\t\t{\n\t\t\tthis._data = data;\n\t\t\tthis.clearCachedData();\n\t\t}\n\t}\n\n\tgetAssociatedEntityData()\n\t{\n\t\tif(this._associatedEntityData === null)\n\t\t{\n\t\t\tthis._associatedEntityData = BX.type.isPlainObject(this._data[\"ASSOCIATED_ENTITY\"])\n\t\t\t\t? this._data[\"ASSOCIATED_ENTITY\"] : {};\n\t\t}\n\n\t\treturn this._associatedEntityData;\n\t}\n\n\tgetAssociatedEntityTypeId()\n\t{\n\t\tif(this._associatedEntityTypeId === null)\n\t\t{\n\t\t\tthis._associatedEntityTypeId = BX.prop.getInteger(this._data, \"ASSOCIATED_ENTITY_TYPE_ID\", 0)\n\t\t}\n\t\treturn this._associatedEntityTypeId;\n\t}\n\n\tgetAssociatedEntityId()\n\t{\n\t\tif(this._associatedEntityId === null)\n\t\t{\n\t\t\tthis._associatedEntityId = BX.prop.getInteger(this._data, \"ASSOCIATED_ENTITY_ID\", 0)\n\t\t}\n\t\treturn this._associatedEntityId;\n\t}\n\n\tsetAssociatedEntityData(associatedEntityData)\n\t{\n\t\tif(!BX.type.isPlainObject(associatedEntityData))\n\t\t{\n\t\t\tassociatedEntityData = {};\n\t\t}\n\n\t\tthis._data[\"ASSOCIATED_ENTITY\"] = associatedEntityData;\n\t\tthis.clearCachedData();\n\t}\n\n\thasPermissions()\n\t{\n\t\tconst entityData = this.getAssociatedEntityData();\n\t\treturn BX.type.isPlainObject(entityData[\"PERMISSIONS\"]);\n\t}\n\n\tgetPermissions()\n\t{\n\t\treturn BX.prop.getObject(this.getAssociatedEntityData(), \"PERMISSIONS\", {});\n\t}\n\n\tsetPermissions(permissions)\n\t{\n\t\tif(!BX.type.isPlainObject(this._data[\"ASSOCIATED_ENTITY\"]))\n\t\t{\n\t\t\tthis._data[\"ASSOCIATED_ENTITY\"] = {};\n\t\t}\n\t\tthis._data[\"ASSOCIATED_ENTITY\"][\"PERMISSIONS\"] = permissions;\n\t\tthis.clearCachedData();\n\t}\n\n\tgetTextDataParam(name)\n\t{\n\t\treturn BX.prop.getString(this._data, name, \"\");\n\t}\n\n\tgetObjectDataParam(name)\n\t{\n\t\treturn BX.prop.getObject(this._data, name, {});\n\t}\n\n\tgetArrayDataParam(name)\n\t{\n\t\treturn BX.prop.getArray(this._data, name, []);\n\t}\n\n\tgetTypeId()\n\t{\n\t\treturn ItemType.undefined;\n\t}\n\n\tgetTypeCategoryId()\n\t{\n\t\tif(this._typeCategoryId === null)\n\t\t{\n\t\t\tthis._typeCategoryId = BX.prop.getInteger(this._data, \"TYPE_CATEGORY_ID\", 0);\n\t\t}\n\t\treturn this._typeCategoryId;\n\t}\n\n\tgetContainer()\n\t{\n\t\treturn this._container;\n\t}\n\n\tsetContainer(container)\n\t{\n\t\tthis._container = BX.type.isElementNode(container) ? container : null;\n\t}\n\n\tgetWrapper()\n\t{\n\t\treturn this._wrapper;\n\t}\n\n\taddWrapperClass(className, timeout)\n\t{\n\t\tif(!this._wrapper)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tBX.addClass(this._wrapper, className);\n\n\t\tif(BX.type.isNumber(timeout) && timeout >= 0)\n\t\t{\n\t\t\twindow.setTimeout(\n\t\t\t\tBX.delegate(\n\t\t\t\t\tfunction(){ this.removeWrapperClass(className); },\n\t\t\t\t\tthis\n\t\t\t\t),\n\t\t\t\ttimeout\n\t\t\t);\n\t\t}\n\t}\n\n\tremoveWrapperClass(className, timeout)\n\t{\n\t\tif(!this._wrapper)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tBX.removeClass(this._wrapper, className);\n\n\t\tif(BX.type.isNumber(timeout) && timeout >= 0)\n\t\t{\n\t\t\twindow.setTimeout(\n\t\t\t\tBX.delegate(\n\t\t\t\t\tfunction(){ this.addWrapperClass(className); },\n\t\t\t\t\tthis\n\t\t\t\t),\n\t\t\t\ttimeout\n\t\t\t);\n\t\t}\n\n\t}\n\n\tlayout(options)\n\t{\n\t\tif(!BX.type.isElementNode(this._container))\n\t\t{\n\t\t\tthrow \"Item. Container is not assigned.\";\n\t\t}\n\n\t\tthis.prepareLayout(options);\n\t\t//region Actions\n\t\t/**/\n\t\tthis.prepareActions();\n\t\tconst actionQty = this._actions.length;\n\t\tfor(let i = 0; i < actionQty; i++)\n\t\t{\n\t\t\tthis._actions[i].layout();\n\t\t}\n\t\tthis.showActions(actionQty > 0);\n\t\t/**/\n\t\t//endregion\n\t}\n\n\tmakeVueComponent(options, mode)\n\t{\n\t\tif (this._vueComponentMountedNode)\n\t\t{\n\t\t\treturn this._vueComponentMountedNode;\n\t\t}\n\n\t\tif (!this._vueComponent)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tconst app = new this._vueComponent(\n\t\t\t{\n\t\t\t\tpropsData: {\n\t\t\t\t\tself: this,\n\t\t\t\t\tlangMessages: Item.messages,\n\t\t\t\t\tmode: mode\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\n\t\tapp.$mount();\n\n\t\tthis._vueComponentMountedNode = app.$el;\n\t\treturn this._vueComponentMountedNode;\n\t}\n\n\tprepareLayout(options)\n\t{\n\t}\n\n\tprepareActions()\n\t{\n\t}\n\n\tshowActions(show)\n\t{\n\t}\n\n\tclearLayout()\n\t{\n\t\tthis._wrapper = BX.remove(this._wrapper);\n\t}\n\n\trefreshLayout()\n\t{\n\t\tconst anchor = this._wrapper.previousSibling;\n\t\tthis._wrapper = BX.remove(this._wrapper);\n\t\tthis._playerWrappers = {};\n\t\tthis.layout({ anchor: anchor });\n\t}\n\n\tclearCachedData()\n\t{\n\t\tthis._typeCategoryId = null;\n\t\tthis._associatedEntityData = null;\n\t\tthis._associatedEntityTypeId = null;\n\t\tthis._associatedEntityId = null;\n\t}\n\n\tisDone()\n\t{\n\t\treturn false;\n\t}\n\n\tmarkAsDone(isDone)\n\t{\n\t}\n\n\tisTerminated()\n\t{\n\t\treturn this._isTerminated;\n\t}\n\n\tmarkAsTerminated(terminated)\n\t{\n\t\tterminated = !!terminated;\n\n\t\tif(this._isTerminated === terminated)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis._isTerminated = terminated;\n\t\tif(!this._wrapper)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif(terminated)\n\t\t{\n\t\t\tBX.addClass(this._wrapper, \"crm-entity-stream-section-last\");\n\t\t}\n\t\telse\n\t\t{\n\t\t\tBX.removeClass(this._wrapper, \"crm-entity-stream-section-last\");\n\t\t}\n\t}\n\n\tview()\n\t{\n\t}\n\n\tedit()\n\t{\n\t}\n\n\tfasten()\n\t{\n\t}\n\n\tunfasten()\n\t{\n\t}\n\n\tremove()\n\t{\n\t}\n\n\tcutOffText(text, length)\n\t{\n\t\tif(!BX.type.isNumber(length))\n\t\t{\n\t\t\tlength = 0;\n\t\t}\n\n\t\tif(length <= 0 || text.length <= length)\n\t\t{\n\t\t\treturn text;\n\t\t}\n\n\t\tlet offset = length - 1;\n\t\tconst whilespaceOffset = text.substring(offset).search(/\\s/i);\n\t\tif(whilespaceOffset > 0)\n\t\t{\n\t\t\toffset += whilespaceOffset;\n\t\t}\n\t\treturn text.substring(0, offset);\n\t}\n\n\tprepareMultilineCutOffElements(text, length, clickHandler)\n\t{\n\t\tif(!BX.type.isNumber(length))\n\t\t{\n\t\t\tlength = 0;\n\t\t}\n\n\t\tif(length <= 0 || text.length <= length)\n\t\t{\n\t\t\treturn [BX.util.htmlspecialchars(text).replace(/(?:\\r\\n|\\r|\\n)/g, '<br>')];\n\t\t}\n\n\t\tlet offset = length - 1;\n\t\tconst whilespaceOffset = text.substring(offset).search(/\\s/i);\n\t\tif(whilespaceOffset > 0)\n\t\t{\n\t\t\toffset += whilespaceOffset;\n\t\t}\n\t\treturn(\n\t\t\t[\n\t\t\t\tBX.util.htmlspecialchars(text.substring(0, offset)).replace(/(?:\\r\\n|\\r|\\n)/g, '<br>') + \"&hellip;&nbsp;\" ,\n\t\t\t\tBX.create(\"A\",\n\t\t\t\t\t{\n\t\t\t\t\t\tattrs: { className: \"crm-entity-stream-content-letter-more\", href: \"#\" },\n\t\t\t\t\t\tevents: { click: clickHandler },\n\t\t\t\t\t\ttext: this.getMessage(\"details\")\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t\t]\n\t\t);\n\t}\n\n\tprepareCutOffElements(text, length, clickHandler)\n\t{\n\t\tif(!BX.type.isNumber(length))\n\t\t{\n\t\t\tlength = 0;\n\t\t}\n\n\t\tif(length <= 0 || text.length <= length)\n\t\t{\n\t\t\treturn [BX.util.htmlspecialchars(text)];\n\t\t}\n\n\t\tlet offset = length - 1;\n\t\tconst whilespaceOffset = text.substring(offset).search(/\\s/i);\n\t\tif(whilespaceOffset > 0)\n\t\t{\n\t\t\toffset += whilespaceOffset;\n\t\t}\n\t\treturn(\n\t\t\t[\n\t\t\t\tBX.util.htmlspecialchars(text.substring(0, offset)) + \"&hellip;&nbsp;\" ,\n\t\t\t\tBX.create(\"A\",\n\t\t\t\t\t{\n\t\t\t\t\t\tattrs: { className: \"crm-entity-stream-content-letter-more\", href: \"#\" },\n\t\t\t\t\t\tevents: { click: clickHandler },\n\t\t\t\t\t\ttext: this.getMessage(\"details\")\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t\t]\n\t\t);\n\t}\n\n\tprepareAuthorLayout()\n\t{\n\t\tconst authorInfo = this.getObjectDataParam(\"AUTHOR\", null);\n\t\tif(!authorInfo)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tconst showUrl = BX.prop.getString(authorInfo, \"SHOW_URL\", \"\");\n\t\tif(showUrl === \"\")\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tconst link = BX.create(\"A\",\n\t\t\t{\n\t\t\t\tattrs:\n\t\t\t\t\t{\n\t\t\t\t\t\tclassName: \"ui-icon ui-icon-common-user crm-entity-stream-content-detail-employee\",\n\t\t\t\t\t\thref: showUrl,\n\t\t\t\t\t\ttarget: \"_blank\",\n\t\t\t\t\t\ttitle: BX.prop.getString(authorInfo, \"FORMATTED_NAME\", \"\")\n\t\t\t\t\t},\n\t\t\t\tchildren: [\n\t\t\t\t\tBX.create('i', {})\n\t\t\t\t]\n\t\t\t}\n\t\t);\n\t\tconst imageUrl = BX.prop.getString(authorInfo, \"IMAGE_URL\", \"\");\n\t\tif(imageUrl !== \"\")\n\t\t{\n\t\t\tlink.children[0].style.backgroundImage = \"url('\" + imageUrl + \"')\";\n\t\t\tlink.children[0].style.backgroundSize = \"21px\";\n\t\t}\n\n\t\treturn link;\n\t}\n\n\tonActivityCreate(activity, data)\n\t{\n\t}\n\n\tisContextMenuEnabled()\n\t{\n\t\treturn false;\n\t}\n\n\tprepareContextMenuButton()\n\t{\n\t\tthis._contextMenuButton = BX.create(\"DIV\",\n\t\t\t{\n\t\t\t\tattrs: { className: \"crm-entity-stream-section-context-menu\" },\n\t\t\t\tevents: { click: BX.delegate(this.onContextMenuButtonClick, this) }\n\t\t\t}\n\t\t);\n\t\treturn this._contextMenuButton;\n\t}\n\n\tonContextMenuButtonClick(e)\n\t{\n\t\tif(!this._isContextMenuShown)\n\t\t{\n\t\t\tthis.openContextMenu();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.closeContextMenu();\n\t\t}\n\t}\n\n\topenContextMenu()\n\t{\n\t\tconst menuItems = this.prepareContextMenuItems();\n\n\t\tif (typeof IntranetExtensions !== \"undefined\")\n\t\t{\n\t\t\tmenuItems.push(IntranetExtensions);\n\t\t}\n\t\n\t\tif(menuItems.length === 0)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\n\t\tBX.PopupMenu.show(\n\t\t\tthis._id,\n\t\t\tthis._contextMenuButton,\n\t\t\tmenuItems,\n\t\t\t{\n\t\t\t\toffsetTop: 0,\n\t\t\t\toffsetLeft: 16,\n\t\t\t\tangle: { position: \"top\", offset: 0 },\n\t\t\t\tevents:\n\t\t\t\t\t{\n\t\t\t\t\t\tonPopupShow: BX.delegate(this.onContextMenuShow, this),\n\t\t\t\t\t\tonPopupClose: BX.delegate(this.onContextMenuClose, this),\n\t\t\t\t\t\tonPopupDestroy: BX.delegate(this.onContextMenuDestroy, this)\n\t\t\t\t\t}\n\t\t\t}\n\t\t);\n\t\tthis._contextMenu = BX.PopupMenu.currentItem;\n\t}\n\n\tcloseContextMenu()\n\t{\n\t\tif(this._contextMenu)\n\t\t{\n\t\t\tthis._contextMenu.close();\n\t\t}\n\t}\n\n\tprepareContextMenuItems()\n\t{\n\t\treturn [];\n\t}\n\n\tonContextMenuShow()\n\t{\n\t\tthis._isContextMenuShown = true;\n\t\tBX.addClass(this._contextMenuButton, \"active\");\n\t}\n\n\tonContextMenuClose()\n\t{\n\t\tif(this._contextMenu)\n\t\t{\n\t\t\tthis._contextMenu.popupWindow.destroy();\n\t\t}\n\t}\n\n\tonContextMenuDestroy()\n\t{\n\t\tthis._isContextMenuShown = false;\n\t\tBX.removeClass(this._contextMenuButton, \"active\");\n\t\tthis._contextMenu = null;\n\t\n\t\tif(typeof(BX.PopupMenu.Data[this._id]) !== \"undefined\")\n\t\t{\n\t\t\tdelete(BX.PopupMenu.Data[this._id]);\n\t\t}\n\t}\n\n\tgetMessage(name)\n\t{\n\t\tconst m = Item.messages;\n\t\treturn m.hasOwnProperty(name) ? m[name] : name;\n\t}\n\n\tstatic getUserTimezoneOffset()\n\t{\n\t\tif(!this.userTimezoneOffset)\n\t\t{\n\t\t\tthis.userTimezoneOffset = parseInt(BX.message(\"USER_TZ_OFFSET\"));\n\t\t\tif(isNaN(this.userTimezoneOffset))\n\t\t\t{\n\t\t\t\tthis.userTimezoneOffset = 0;\n\t\t\t}\n\t\t}\n\t\treturn this.userTimezoneOffset;\n\t}\n\t\n\tstatic userTimezoneOffset;\n\t\n\tstatic messages = {};\n}\n","/** @memberof BX.Crm.Timeline.Animation */\nexport default class Fasten\n{\n\tconstructor()\n\t{\n\t\tthis._id = \"\";\n\t\tthis._settings = {};\n\t\tthis._initialItem = null;\n\t\tthis._finalItem = null;\n\t\tthis._events = null;\n\t}\n\n\tinitialize(id, settings)\n\t{\n\t\tthis._id = BX.type.isNotEmptyString(id) ? id : BX.util.getRandomString(4);\n\t\tthis._settings = settings ? settings : {};\n\n\t\tthis._initialItem = this.getSetting(\"initialItem\");\n\t\tthis._finalItem = this.getSetting(\"finalItem\");\n\n\t\tthis._anchor = this.getSetting(\"anchor\");\n\t\tthis._events = this.getSetting(\"events\", {});\n\t}\n\n\tgetId()\n\t{\n\t\treturn this._id;\n\t}\n\n\tgetSetting(name, defaultValue)\n\t{\n\t\treturn this._settings.hasOwnProperty(name) ? this._settings[name] : defaultValue;\n\t}\n\n\taddFixedHistoryItem()\n\t{\n\t\tconst node = this._finalItem.getWrapper();\n\t\tBX.addClass(node, 'crm-entity-stream-section-animate-start');\n\t\tthis._anchor.parentNode.insertBefore(node, this._anchor.nextSibling);\n\t\tsetTimeout( BX.delegate(\n\t\t\tfunction() {\n\t\t\t\tBX.removeClass(node, 'crm-entity-stream-section-animate-start');\n\t\t\t},\n\t\t\tthis\n\t\t), 0);\n\t\tthis._finalItem.onFinishFasten();\n\t}\n\n\trun()\n\t{\n\t\tconst node = this._initialItem.getWrapper();\n\t\tthis._clone = node.cloneNode(true);\n\n\t\tBX.addClass(this._clone, 'crm-entity-stream-section-animate-start crm-entity-stream-section-top-fixed');\n\n\t\tthis._startPosition = BX.pos(node);\n\t\tthis._clone.style.position = \"absolute\";\n\t\tthis._clone.style.width = this._startPosition.width + \"px\";\n\n\t\tlet _cloneHeight = this._startPosition.height;\n\t\tconst _minHeight = 65;\n\t\tconst _sumPaddingContent = 18;\n\t\tif (_cloneHeight < _sumPaddingContent + _minHeight)\n\t\t\t_cloneHeight = _sumPaddingContent + _minHeight;\n\n\t\tthis._clone.style.height = _cloneHeight + \"px\";\n\t\tthis._clone.style.top = this._startPosition.top + \"px\";\n\t\tthis._clone.style.left = this._startPosition.left + \"px\";\n\t\tthis._clone.style.zIndex = 960;\n\n\t\tdocument.body.appendChild(this._clone);\n\n\t\tsetTimeout(\n\t\t\tBX.proxy(\n\t\t\t\tfunction (){\n\t\t\t\t\tBX.addClass(this._clone, \"crm-entity-stream-section-casper\" )\n\t\t\t\t},\n\t\t\t\tthis\n\t\t\t),\n\t\t\t0\n\t\t);\n\n\t\tthis._anchorPosition = BX.pos(this._anchor);\n\t\tconst finish = {\n\t\t\ttop: this._anchorPosition.top,\n\t\t\theight: _cloneHeight + 15,\n\t\t\topacity: 1\n\t\t};\n\n\t\tconst _difference = this._startPosition.top - this._anchorPosition.bottom;\n\t\tconst _deepHistoryLimit = 2 * (document.body.clientHeight + this._startPosition.height);\n\n\t\tif (_difference > _deepHistoryLimit)\n\t\t{\n\t\t\tfinish.top = this._startPosition.top - _deepHistoryLimit;\n\t\t\tfinish.opacity = 0;\n\t\t}\n\n\t\tlet _duration = Math.abs(finish.top - this._startPosition.top) * 2;\n\t\t_duration = (_duration < 1500) ? 1500 : _duration;\n\n\t\tconst movingEvent = new BX.easing({\n\t\t\tduration: _duration,\n\t\t\tstart: {top: this._startPosition.top, height: 0, opacity: 1},\n\t\t\tfinish: finish,\n\t\t\ttransition: BX.easing.makeEaseOut(BX.easing.transitions.quart),\n\t\t\tstep: BX.proxy(function (state) {\n\t\t\t\tthis._clone.style.top = state.top + \"px\";\n\t\t\t\tthis._clone.style.opacity = state.opacity;\n\t\t\t\tthis._anchor.style.height = state.height + \"px\";\n\t\t\t}, this),\n\t\t\tcomplete: BX.proxy(function () {\n\t\t\t\tthis.finish();\n\t\t\t}, this)\n\t\t});\n\t\tmovingEvent.animate();\n\t}\n\n\tfinish()\n\t{\n\t\tthis._anchor.style.height = 0;\n\t\tthis.addFixedHistoryItem();\n\t\tBX.remove(this._clone);\n\n\t\tif(BX.type.isFunction(this._events[\"complete\"]))\n\t\t{\n\t\t\tthis._events[\"complete\"]();\n\t\t}\n\t}\n\n\tstatic create(id, settings)\n\t{\n\t\tconst self = new Fasten();\n\t\tself.initialize(id, settings);\n\t\treturn self;\n\t}\n}\n","import Item from \"../item\";\nimport {Item as ItemType} from \"../types\";\nimport Fasten from \"../animations/fasten\";\n\n/** @memberof BX.Crm.Timeline.Items */\nexport default class History extends Item\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis._history = null;\n\t\tthis._fixedHistory = null;\n\t\tthis._typeId = null;\n\t\tthis._createdTime = null;\n\t\tthis._isFixed = false;\n\t\tthis._headerClickHandler = BX.delegate(this.onHeaderClick, this);\n\t}\n\n\tdoInitialize()\n\t{\n\t\tthis._history = this.getSetting(\"history\");\n\t\tthis._fixedHistory = this.getSetting(\"fixedHistory\");\n\t}\n\n\tgetTypeId()\n\t{\n\t\tif(this._typeId === null)\n\t\t{\n\t\t\tthis._typeId = BX.prop.getInteger(this._data, \"TYPE_ID\", ItemType.undefined);\n\t\t}\n\t\treturn this._typeId;\n\t}\n\n\tgetTitle()\n\t{\n\t\treturn \"\";\n\t}\n\n\tisContextMenuEnabled()\n\t{\n\t\treturn !(this.isReadOnly());\n\t}\n\n\tgetCreatedTimestamp()\n\t{\n\t\treturn this.getTextDataParam(\"CREATED_SERVER\");\n\t}\n\n\tgetCreatedTime()\n\t{\n\t\tif(this._createdTime === null)\n\t\t{\n\t\t\tconst time = BX.parseDate(\n\t\t\t\tthis.getCreatedTimestamp(),\n\t\t\t\tfalse,\n\t\t\t\t\"YYYY-MM-DD\",\n\t\t\t\t\"YYYY-MM-DD HH:MI:SS\"\n\t\t\t);\n\n\t\t\tthis._createdTime = new Date(time.getTime() + 1000 * Item.getUserTimezoneOffset());\n\t\t}\n\t\treturn this._createdTime;\n\t}\n\n\tgetCreatedDate()\n\t{\n\t\treturn BX.prop.extractDate(new Date(this.getCreatedTime().getTime()));\n\t}\n\n\tgetOwnerInfo()\n\t{\n\t\treturn this._history ? this._history.getOwnerInfo() : null;\n\t}\n\n\tgetOwnerTypeId()\n\t{\n\t\treturn BX.prop.getInteger(this.getOwnerInfo(), \"ENTITY_TYPE_ID\", BX.CrmEntityType.enumeration.undefined);\n\t}\n\n\tgetOwnerId()\n\t{\n\t\treturn BX.prop.getInteger(this.getOwnerInfo(), \"ENTITY_ID\", 0);\n\t}\n\n\tisReadOnly()\n\t{\n\t\treturn this._history.isReadOnly();\n\t}\n\n\tisEditable()\n\t{\n\t\treturn !this.isReadOnly();\n\t}\n\n\tisDone()\n\t{\n\t\tconst typeId = this.getTypeId();\n\t\tif(typeId === ItemType.activity)\n\t\t{\n\t\t\tconst entityData = this.getAssociatedEntityData();\n\t\t\treturn BX.CrmActivityStatus.isFinal(BX.prop.getInteger(entityData, \"STATUS\", 0));\n\t\t}\n\t\treturn false;\n\t}\n\n\tisFixed()\n\t{\n\t\treturn this._isFixed;\n\t}\n\n\tfasten(e)\n\t{\n\t\tif (this._fixedHistory._items.length >= 3)\n\t\t{\n\t\t\tif (!this.fastenLimitPopup)\n\t\t\t{\n\t\t\t\tthis.fastenLimitPopup = new BX.PopupWindow(\n\t\t\t\t\t'timeline_fasten_limit_popup_' + this._id,\n\t\t\t\t\tthis._switcher,\n\t\t\t\t\t{\n\t\t\t\t\t\tcontent: BX.message('CRM_TIMELINE_FASTEN_LIMIT_MESSAGE'),\n\t\t\t\t\t\tdarkMode: true,\n\t\t\t\t\t\tautoHide: true,\n\t\t\t\t\t\tzIndex: 990,\n\t\t\t\t\t\tangle: true,\n\t\t\t\t\t\tcloseByEsc: true,\n\t\t\t\t\t\tbindOptions: { forceBindPosition: true}\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tthis.fastenLimitPopup.show();\n\t\t\tthis.closeContextMenu();\n\t\t\treturn;\n\t\t}\n\t\tBX.ajax(\n\t\t\t{\n\t\t\t\turl: this._history._serviceUrl,\n\t\t\t\tmethod: \"POST\",\n\t\t\t\tdataType: \"json\",\n\t\t\t\tdata:\n\t\t\t\t\t{\n\t\t\t\t\t\t\"ACTION\": \"CHANGE_FASTEN_ITEM\",\n\t\t\t\t\t\t\"VALUE\": 'Y',\n\t\t\t\t\t\t\"OWNER_TYPE_ID\":  this.getOwnerTypeId(),\n\t\t\t\t\t\t\"OWNER_ID\": this.getOwnerId(),\n\t\t\t\t\t\t\"ID\": this._id\n\t\t\t\t\t},\n\t\t\t\tonsuccess: BX.delegate(this.onSuccessFasten, this)\n\t\t\t}\n\t\t);\n\n\t\tthis.closeContextMenu();\n\t}\n\n\tonSuccessFasten(result)\n\t{\n\t\tif (BX.type.isNotEmptyString(result.ERROR))\n\t\t\treturn;\n\n\t\tif (!this.isFixed())\n\t\t{\n\t\t\tthis._data.IS_FIXED = 'Y';\n\t\t\tconst fixedItem = this._fixedHistory.createItem(this._data);\n\t\t\tfixedItem._isFixed = true;\n\t\t\tthis._fixedHistory.addItem(fixedItem, 0);\n\t\t\tfixedItem.layout({ add: false });\n\t\t\tthis.refreshLayout();\n\t\t\tconst animation = Fasten.create(\n\t\t\t\t\"\",\n\t\t\t\t{\n\t\t\t\t\tinitialItem: this,\n\t\t\t\t\tfinalItem: fixedItem,\n\t\t\t\t\tanchor: this._fixedHistory._anchor\n\t\t\t\t}\n\t\t\t);\n\t\t\tanimation.run();\n\t\t}\n\n\t\tthis.closeContextMenu();\n\t}\n\n\tonFinishFasten(e)\n\t{\n\t}\n\n\tunfasten(e)\n\t{\n\t\tBX.ajax(\n\t\t\t{\n\t\t\t\turl: this._history._serviceUrl,\n\t\t\t\tmethod: \"POST\",\n\t\t\t\tdataType: \"json\",\n\t\t\t\tdata:\n\t\t\t\t\t{\n\t\t\t\t\t\t\"ACTION\": \"CHANGE_FASTEN_ITEM\",\n\t\t\t\t\t\t\"VALUE\": 'N',\n\t\t\t\t\t\t\"OWNER_TYPE_ID\": this.getOwnerTypeId(),\n\t\t\t\t\t\t\"OWNER_ID\": this.getOwnerId(),\n\t\t\t\t\t\t\"ID\": this._id\n\t\t\t\t\t},\n\t\t\t\tonsuccess: BX.delegate(this.onSuccessUnfasten, this)\n\t\t\t}\n\t\t);\n\n\t\tthis.closeContextMenu();\n\t}\n\n\tonSuccessUnfasten(result)\n\t{\n\t\tif (BX.type.isNotEmptyString(result.ERROR))\n\t\t\treturn;\n\n\t\tlet item;\n\t\tlet historyItem;\n\n\t\tif (this.isFixed())\n\t\t{\n\t\t\titem = this;\n\t\t\thistoryItem = this._history.findItemById(this._id);\n\t\t}\n\t\telse\n\t\t{\n\t\t\titem = this._fixedHistory.findItemById(this._id);\n\t\t\thistoryItem = this;\n\t\t}\n\n\t\tif (item)\n\t\t{\n\t\t\tconst index = this._fixedHistory.getItemIndex(item);\n\t\t\titem.clearAnimate();\n\t\t\tthis._fixedHistory.removeItemByIndex(index);\n\t\t\tif (historyItem)\n\t\t\t{\n\t\t\t\thistoryItem._data.IS_FIXED = 'N';\n\t\t\t\thistoryItem.refreshLayout();\n\t\t\t\tBX.LazyLoad.showImages();\n\t\t\t}\n\t\t}\n\t}\n\n\tclearAnimate()\n\t{\n\t\tif (!BX.type.isDomNode(this._wrapper))\n\t\t\treturn ;\n\n\t\tconst wrapperPosition = BX.pos(this._wrapper);\n\t\tconst hideEvent = new BX.easing({\n\t\t\tduration: 1000,\n\t\t\tstart: {height: wrapperPosition.height, opacity: 1, marginBottom: 15},\n\t\t\tfinish: {height: 0, opacity: 0, marginBottom: 0},\n\t\t\ttransition: BX.easing.makeEaseOut(BX.easing.transitions.quart),\n\t\t\tstep: BX.proxy(function (state) {\n\t\t\t\tthis._wrapper.style.height = state.height + \"px\";\n\t\t\t\tthis._wrapper.style.opacity = state.opacity;\n\t\t\t\tthis._wrapper.style.marginBottom = state.marginBottom;\n\t\t\t}, this),\n\t\t\tcomplete: BX.proxy(function () {\n\t\t\t\tthis.clearLayout();\n\t\t\t}, this)\n\t\t});\n\n\t\thideEvent.animate();\n\t}\n\n\tgetWrapperClassName()\n\t{\n\t\treturn \"\";\n\t}\n\n\tgetIconClassName()\n\t{\n\t\treturn \"crm-entity-stream-section-icon crm-entity-stream-section-icon-info\";\n\t}\n\n\tprepareContentDetails()\n\t{\n\t\treturn [];\n\t}\n\n\tprepareContent()\n\t{\n\t\tlet wrapperClassName = this.getWrapperClassName();\n\t\tif(wrapperClassName !== \"\")\n\t\t{\n\t\t\twrapperClassName = \"crm-entity-stream-section crm-entity-stream-section-history\" + \" \" + wrapperClassName;\n\t\t}\n\t\telse\n\t\t{\n\t\t\twrapperClassName = \"crm-entity-stream-section crm-entity-stream-section-history\";\n\t\t}\n\t\tconst wrapper = BX.create(\"DIV\", {attrs: {className: wrapperClassName}});\n\t\twrapper.appendChild(BX.create(\"DIV\", { attrs: { className: this.getIconClassName() } }));\n\n\t\tconst contentWrapper = BX.create(\"DIV\", {attrs: {className: \"crm-entity-stream-content-event\"}});\n\t\twrapper.appendChild(\n\t\t\tBX.create(\"DIV\",\n\t\t\t\t{ attrs: { className: \"crm-entity-stream-section-content\" }, children: [ contentWrapper ] }\n\t\t\t)\n\t\t);\n\n\t\tconst header = BX.create(\"DIV\",\n\t\t\t{\n\t\t\t\tattrs: {className: \"crm-entity-stream-content-header\"},\n\t\t\t\tchildren:\n\t\t\t\t\t[\n\t\t\t\t\t\tBX.create(\"DIV\",\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tattrs: {className: \"crm-entity-stream-content-event-title\"},\n\t\t\t\t\t\t\t\tchildren:\n\t\t\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t\t\tBX.create(\"A\",\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tattrs: {href: \"#\"},\n\t\t\t\t\t\t\t\t\t\t\t\tevents: {click: this._headerClickHandler},\n\t\t\t\t\t\t\t\t\t\t\t\ttext: this.getTitle()\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t),\n\t\t\t\t\t\tBX.create(\"SPAN\",\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tattrs: {className: \"crm-entity-stream-content-event-time\"},\n\t\t\t\t\t\t\t\ttext: this.formatTime(this.getCreatedTime())\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t)\n\t\t\t\t\t]\n\t\t\t}\n\t\t);\n\n\t\tcontentWrapper.appendChild(header);\n\n\t\tcontentWrapper.appendChild(\n\t\t\tBX.create(\"DIV\",\n\t\t\t\t{\n\t\t\t\t\tattrs: { className: \"crm-entity-stream-content-detail\" },\n\t\t\t\t\tchildren: this.prepareContentDetails()\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\n\t\t//region Author\n\t\tconst authorNode = this.prepareAuthorLayout();\n\t\tif(authorNode)\n\t\t{\n\t\t\tcontentWrapper.appendChild(authorNode);\n\t\t}\n\t\t//endregion\n\n\t\treturn wrapper;\n\t}\n\n\tprepareLayout(options)\n\t{\n\t\tconst vueComponent = this.makeVueComponent(options, 'history');\n\t\tthis._wrapper = vueComponent ? vueComponent : this.prepareContent();\n\t\tif(this._wrapper)\n\t\t{\n\t\t\tconst enableAdd = BX.type.isPlainObject(options) ? BX.prop.getBoolean(options, \"add\", true) : true;\n\t\t\tif(enableAdd)\n\t\t\t{\n\t\t\t\tconst anchor = BX.type.isPlainObject(options) && BX.type.isElementNode(options[\"anchor\"]) ? options[\"anchor\"] : null;\n\t\t\t\tif(anchor && anchor.nextSibling)\n\t\t\t\t{\n\t\t\t\t\tthis._container.insertBefore(this._wrapper,  anchor.nextSibling);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis._container.appendChild(this._wrapper);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.markAsTerminated(this._history.checkItemForTermination(this));\n\t\t}\n\t}\n\n\tonHeaderClick(e)\n\t{\n\t\tthis.view();\n\t\te.preventDefault ? e.preventDefault() : (e.returnValue = false);\n\t}\n\n\tprepareTitleLayout()\n\t{\n\t\treturn BX.create(\"SPAN\", { attrs: { className: \"crm-entity-stream-content-event-title\" }, text: this.getTitle() });\n\t}\n\n\tprepareFixedSwitcherLayout()\n\t{\n\t\tconst isFixed = (this.getTextDataParam(\"IS_FIXED\") === 'Y');\n\t\tthis._switcher = BX.create(\"span\",\n\t\t\t{\n\t\t\t\tattrs: { className: \"crm-entity-stream-section-top-fixed-btn\" },\n\t\t\t\tevents: {\n\t\t\t\t\tclick: isFixed ? BX.delegate(this.unfasten, this) : BX.delegate(this.fasten, this)\n\t\t\t\t}\n\t\t\t});\n\t\tif (isFixed)\n\t\t\tBX.addClass(this._switcher, \"crm-entity-stream-section-top-fixed-btn-active\");\n\n\t\tif (!this.isReadOnly() && !isFixed)\n\t\t{\n\t\t\tconst manager = this._history.getManager();\n\t\t\tif (!manager.isSpotlightShowed())\n\t\t\t{\n\t\t\t\tmanager.setSpotlightShowed();\n\t\t\t\tBX.addClass(this._switcher, \"crm-entity-stream-section-top-fixed-btn-spotlight\");\n\t\t\t\tconst spotlight = new BX.SpotLight({\n\t\t\t\t\ttargetElement: this._switcher,\n\t\t\t\t\ttargetVertex: \"middle-center\",\n\t\t\t\t\tlightMode: false,\n\t\t\t\t\tid: \"CRM_TIMELINE_FASTEN_SWITCHER\",\n\t\t\t\t\tzIndex: 900,\n\t\t\t\t\ttop: -3,\n\t\t\t\t\tleft: -1,\n\t\t\t\t\tautoSave: true,\n\t\t\t\t\tcontent: BX.message('CRM_TIMELINE_SPOTLIGHT_FASTEN_MESSAGE')\n\t\t\t\t});\n\t\t\t\tspotlight.show();\n\t\t\t}\n\t\t}\n\n\t\treturn this._switcher;\n\t}\n\n\tprepareHeaderLayout()\n\t{\n\t\tconst header = BX.create(\"DIV\", {attrs: {className: \"crm-entity-stream-content-header\"}});\n\t\theader.appendChild(this.prepareTitleLayout());\n\t\theader.appendChild(\n\t\t\tBX.create(\"SPAN\",\n\t\t\t\t{\n\t\t\t\t\tattrs: { className: \"crm-entity-stream-content-event-time\" },\n\t\t\t\t\ttext: this.formatTime(this.getCreatedTime())\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\n\t\treturn header;\n\t}\n\n\tonActivityCreate(activity, data)\n\t{\n\t\tthis._history.getManager().onActivityCreated(activity, data);\n\t}\n\n\tformatTime(time)\n\t{\n\t\tif (this.isFixed())\n\t\t{\n\t\t\treturn this._fixedHistory.formatTime(time);\n\t\t}\n\n\t\treturn this._history.formatTime(time);\n\t}\n\n\tstatic create(id, settings)\n\t{\n\t\tconst self = new History();\n\t\tself.initialize(id, settings);\n\t\treturn self;\n\t}\n\n\tstatic isCounterEnabled(deadline)\n\t{\n\t\tif(!BX.type.isDate(deadline))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tlet start = new Date();\n\t\tstart.setHours(0);\n\t\tstart.setMinutes(0);\n\t\tstart.setSeconds(0);\n\t\tstart.setMilliseconds(0);\n\t\tstart = start.getTime();\n\n\t\tlet end = new Date();\n\t\tend.setHours(23);\n\t\tend.setMinutes(59);\n\t\tend.setSeconds(59);\n\t\tend.setMilliseconds(999);\n\t\tend = end.getTime();\n\n\t\tconst time = deadline.getTime();\n\t\treturn time < start || (time >= start && time <= end);\n\t}\n}\n","import HistoryItem from \"../items/history\";\n\nexport default {\n\tprops: {\n\t\tself: {\n\t\t\trequired: true,\n\t\t\ttype: Object\n\t\t},\n\t\tlangMessages: {\n\t\t\trequired: false,\n\t\t\ttype: Object\n\t\t},\n\t},\n\tcomputed: {\n\t\tdata()\n\t\t{\n\t\t\treturn this.self._data;\n\t\t},\n\t\tfields()\n\t\t{\n\t\t\treturn this.data.FIELDS ? this.data.FIELDS : null;\n\t\t},\n\t\tauthor()\n\t\t{\n\t\t\treturn this.data.AUTHOR ? this.data.AUTHOR : null;\n\t\t},\n\t\tcreatedAt()\n\t\t{\n\t\t\treturn (this.self instanceof HistoryItem) ? this.self.formatTime(this.self.getCreatedTime()) : '';\n\t\t},\n\t},\n\tmethods: {\n\t\tgetLangMessage(key)\n\t\t{\n\t\t\treturn this.langMessages.hasOwnProperty(key) ? this.langMessages[key] : key;\n\t\t}\n\t}\n};\n","import {ajax, Loc} from 'main.core';\nimport 'currency';\n\nexport default {\n\tprops: {\n\t\tproduct: {\n\t\t\trequired: true,\n\t\t\ttype: Object\n\t\t},\n\t\tdealId: {\n\t\t\trequired: true,\n\t\t\ttype: Number\n\t\t},\n\t\tisAddToDealVisible: {\n\t\t\trequired: true,\n\t\t\ttype: Boolean\n\t\t},\n\t},\n\tmethods: {\n\t\taddProductToDeal()\n\t\t{\n\t\t\tif (this.product.isInDeal)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.$emit('product-adding-to-deal');\n\t\t\tthis.product.isInDeal = true;\n\n\t\t\tajax.runAction(\n\t\t\t\t'crm.timeline.encouragebuyproducts.addproducttodeal',\n\t\t\t\t{\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tdealId: this.dealId,\n\t\t\t\t\t\tproductId: this.product.offerId,\n\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\tprice: this.product.price\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t).then((result) => {\n\t\t\t\tthis.$emit('product-added-to-deal');\n\t\t\t\tthis.product.isInDeal = true;\n\t\t\t}).catch((result) => {\n\t\t\t\tthis.product.isInDeal = false;\n\t\t\t});\n\t\t},\n\t\topenDetailPage()\n\t\t{\n\t\t\tif (BX.type.isNotEmptyString(this.product.adminLink))\n\t\t\t{\n\t\t\t\tif (this.product?.slider === 'N')\n\t\t\t\t{\n\t\t\t\t\twindow.open(this.product.adminLink, '_blank');\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tBX.SidePanel.Instance.open(this.product.adminLink);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\tcomputed: {\n\t\tisBottomAreaVisible()\n\t\t{\n\t\t\treturn this.isVariationInfoVisible || this.isPriceVisible;\n\t\t},\n\t\tisVariationInfoVisible()\n\t\t{\n\t\t\treturn (\n\t\t\t\tthis.product.hasOwnProperty('variationInfo')\n\t\t\t\t&& this.product.variationInfo\n\t\t\t);\n\t\t},\n\t\tisPriceVisible()\n\t\t{\n\t\t\treturn (\n\t\t\t\tthis.product.hasOwnProperty('price')\n\t\t\t\t&& this.product.hasOwnProperty('currency')\n\t\t\t\t&& this.product.price\n\t\t\t\t&& this.product.currency\n\t\t\t);\n\t\t},\n\t\tprice()\n\t\t{\n\t\t\treturn BX.Currency.currencyFormat(this.product.price, this.product.currency, true);\n\t\t},\n\t\timageStyle()\n\t\t{\n\t\t\tif (!this.product.image)\n\t\t\t{\n\t\t\t\treturn {};\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tbackgroundImage: 'url(' + this.product.image + ')'\n\t\t\t};\n\t\t},\n\t\tbuttonText()\n\t\t{\n\t\t\treturn Loc.getMessage(\n\t\t\t\tthis.product.isInDeal\n\t\t\t\t\t? 'CRM_TIMELINE_ENCOURAGE_BUY_PRODUCTS_PRODUCT_IN_DEAL'\n\t\t\t\t\t: 'CRM_TIMELINE_ENCOURAGE_BUY_PRODUCTS_ADD_PRODUCT_TO_DEAL'\n\t\t\t);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<li\n\t\t\t:class=\"{'crm-entity-stream-advice-list-item--active': product.isInDeal}\"\n\t\t\tclass=\"crm-entity-stream-advice-list-item\"\n\t\t>\t\n\t\t\t<div class=\"crm-entity-stream-advice-list-content\">\n\t\t\t\t<div\t\n\t\t\t\t\t:style=\"imageStyle\"\n\t\t\t\t\tclass=\"crm-entity-stream-advice-list-icon\"\n\t\t\t\t>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"crm-entity-stream-advice-list-inner\">\n\t\t\t\t\t<a\n\t\t\t\t\t\t@click.prevent=\"openDetailPage\"\n\t\t\t\t\t\thref=\"#\"\n\t\t\t\t\t\tclass=\"crm-entity-stream-advice-list-name\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{product.name}}\n\t\t\t\t\t</a>\n\t\t\t\t\t<div\n\t\t\t\t\t\tv-if=\"isBottomAreaVisible\"\n\t\t\t\t\t\tclass=\"crm-entity-stream-advice-list-desc-box\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tv-if=\"isVariationInfoVisible\"\n\t\t\t\t\t\t\tclass=\"crm-entity-stream-advice-list-desc-name\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{product.variationInfo}}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tv-if=\"isPriceVisible\"\n\t\t\t\t\t\t\tv-html=\"price\"\n\t\t\t\t\t\t\tclass=\"crm-entity-stream-advice-list-desc-value\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div v-if=\"isAddToDealVisible\" class=\"crm-entity-stream-advice-list-btn-box\">\t\t\t\t\n\t\t\t\t<button\n\t\t\t\t\t@click=\"addProductToDeal\"\n\t\t\t\t\tclass=\"ui-btn ui-btn-round ui-btn-xs crm-entity-stream-advice-list-btn\"\n\t\t\t\t>\n\t\t\t\t\t{{buttonText}}\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</li>\n\t`\n}\n","import {Vue} from 'ui.vue';\nimport {BaseEvent, EventEmitter, Dom} from 'main.core.events';\nimport HistoryItemMixin from '../mixins/history-item';\nimport Product from './product';\nimport {Loc} from 'main.core';\nimport {UI} from 'ui.notification';\nimport './styles.css';\n\nexport default Vue.extend({\n\tmixins: [HistoryItemMixin],\n\tcomponents: {\n\t\t'product': Product,\n\t},\n\tdata()\n\t{\n\t\treturn {\n\t\t\tisShortList: true,\n\t\t\tshortListProductsCnt: 3,\n\t\t\tisNotificationShown: false,\n\t\t\tactiveRequestsCnt: 0,\n\t\t\tdealId: null,\n\t\t\tproducts: [],\n\t\t\tisProductsGridAvailable: false,\n\t\t};\n\t},\n\tcreated() {\n\t\tthis.products = this.data.VIEWED_PRODUCTS;\n\t\tthis.dealId = this.data.DEAL_ID;\n\t\tthis._productsGrid = null;\n\t\tthis.subscribeCustomEvents();\n\t\tBX.Crm.EntityEditor.getDefault().tapController('PRODUCT_LIST', (controller) => {\n\t\t\tthis.setProductsGrid(controller.getProductList());\n\t\t});\n\t},\n\tmethods: {\n\t\tsetProductsGrid(productsGrid)\n\t\t{\n\t\t\tthis._productsGrid = productsGrid;\n\t\t\tif (this._productsGrid)\n\t\t\t{\n\t\t\t\tthis.onProductsGridChanged();\n\t\t\t\tthis.isProductsGridAvailable = true;\n\t\t\t}\n\t\t},\n\t\tshowMore()\n\t\t{\n\t\t\tthis.isShortList = false;\n\t\t\tconst listWrap = document.querySelector('.crm-entity-stream-advice-list');\n\t\t\tlistWrap.style.maxHeight = 950 + 'px';\n\t\t},\n\t\t// region event handlers\n\t\thandleProductAddingToDeal()\n\t\t{\n\t\t\tthis.activeRequestsCnt++;\n\t\t},\n\t\thandleProductAddedToDeal()\n\t\t{\n\t\t\tif (this.activeRequestsCnt > 0)\n\t\t\t{\n\t\t\t\tthis.activeRequestsCnt--;\n\t\t\t}\n\n\t\t\tif (!(this.activeRequestsCnt === 0 && this._productsGrid))\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tBX.Crm.EntityEditor.getDefault().reload();\n\t\t\tthis._productsGrid.reloadGrid(false);\n\n\t\t\tif (!this.isNotificationShown)\n\t\t\t{\n\t\t\t\tUI.Notification.Center.notify({\n\t\t\t\t\tcontent: Loc.getMessage('CRM_TIMELINE_ENCOURAGE_BUY_PRODUCTS_PRODUCTS_ADDED_TO_DEAL'),\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tonClose: (event) => {\n\t\t\t\t\t\t\tthis.isNotificationShown = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tactions: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: Loc.getMessage('CRM_TIMELINE_ENCOURAGE_BUY_PRODUCTS_EDIT_PRODUCTS'),\n\t\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\t\tclick: (event, balloon, action) => {\n\t\t\t\t\t\t\t\t\tBX.onCustomEvent(window, 'OpenEntityDetailTab', ['tab_products']);\n\t\t\t\t\t\t\t\t\tballoon.close();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t});\n\n\t\t\t\tthis.isNotificationShown = true;\n\t\t\t}\n\t\t},\n\t\t// endregion\n\t\t// region custom events\n\t\tsubscribeCustomEvents()\n\t\t{\n\t\t\tEventEmitter.subscribe('EntityProductListController', this.onProductsGridCreated);\n\t\t\tEventEmitter.subscribe('BX.Crm.EntityEditor:onSave', this.onProductsGridChanged);\n\t\t},\n\t\tunsubscribeCustomEvents()\n\t\t{\n\t\t\tEventEmitter.unsubscribe('EntityProductListController', this.onProductsGridCreated);\n\t\t\tEventEmitter.unsubscribe('BX.Crm.EntityEditor:onSave', this.onProductsGridChanged);\n\t\t},\n\t\tonProductsGridCreated(event: BaseEvent)\n\t\t{\n\t\t\tthis.setProductsGrid(event.getData()[0]);\n\t\t},\n\t\tonProductsGridChanged(event: BaseEvent)\n\t\t{\n\t\t\tif (!this._productsGrid)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet dealOfferIds = this._productsGrid.products.map((product, index) => {\n\t\t\t\tif (!(product.hasOwnProperty('fields') && product.fields.hasOwnProperty('OFFER_ID')))\n\t\t\t\t{\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\treturn product.fields.OFFER_ID;\n\t\t\t});\n\n\t\t\tfor (const [i, product] of this.products.entries())\n\t\t\t{\n\t\t\t\tlet isInDeal = dealOfferIds.some(id => id == product.offerId);\n\n\t\t\t\tif (product.isInDeal === isInDeal)\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tVue.set(this.products, i, Object.assign({}, product, {isInDeal}));\n\t\t\t}\n\t\t},\n\t\t// endregion\n\t\tbeforeDestroy()\n\t\t{\n\t\t\tthis.unsubscribeCustomEvents();\n\t\t}\n\t},\n\tcomputed: {\n\t\tvisibleProducts()\n\t\t{\n\t\t\tlet result = [];\n\n\t\t\tlet i = 1;\n\t\t\tfor (const product of this.products)\n\t\t\t{\n\t\t\t\tif (this.isShortList && i > this.shortListProductsCnt)\n\t\t\t\t{\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tresult.push(product);\n\n\t\t\t\ti++;\n\t\t\t}\n\n\t\t\treturn result;\n\t\t},\n\t\tisShowMoreVisible()\n\t\t{\n\t\t\treturn this.isShortList && this.products.length > this.shortListProductsCnt;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"crm-entity-stream-section crm-entity-stream-section-advice\">\n\t\t\t<div class=\"crm-entity-stream-section-icon crm-entity-stream-section-icon-advice\"></div>\n\t\t\t<div class=\"crm-entity-stream-advice-content\">\n\t\t\t\t<div class=\"crm-entity-stream-advice-info\">\n\t\t\t\t\t${Loc.getMessage('CRM_TIMELINE_ENCOURAGE_BUY_PRODUCTS_LOOK_AT_CLIENT_PRODUCTS')}\n\t\t\t\t\t${Loc.getMessage('CRM_TIMELINE_ENCOURAGE_BUY_PRODUCTS_ENCOURAGE_CLIENT_BUY_PRODUCTS')}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"crm-entity-stream-advice-inner\">\n\t\t\t\t\t<h3 class=\"crm-entity-stream-advice-subtitle\">\n\t\t\t\t\t\t${Loc.getMessage('CRM_TIMELINE_ENCOURAGE_BUY_PRODUCTS_VIEWED_PRODUCTS')}\n\t\t\t\t\t</h3>\n\t\t\t\t\t<!--<ul class=\"crm-entity-stream-advice-list\">-->\n\t\t\t\t\t<transition-group class=\"crm-entity-stream-advice-list\" name=\"list\" tag=\"ul\">\t\t\t\t\t\t\n\t\t\t\t\t\t<product\n\t\t\t\t\t\t\tv-for=\"product in visibleProducts\"\n\t\t\t\t\t\t\tv-bind:key=\"product\"\n\t\t\t\t\t\t\t:product=\"product\"\n\t\t\t\t\t\t\t:dealId=\"dealId\"\n\t\t\t\t\t\t\t:isAddToDealVisible=\"isProductsGridAvailable\"\n\t\t\t\t\t\t\t@product-added-to-deal=\"handleProductAddedToDeal\"\n\t\t\t\t\t\t\t@product-adding-to-deal=\"handleProductAddingToDeal\"\n\t\t\t\t\t\t></product>\n\t\t\t\t\t</transition-group>\n\t\t\t\t\t<!--</ul>-->\n\t\t\t\t\t<a\n\t\t\t\t\t\tv-if=\"isShowMoreVisible\"\n\t\t\t\t\t\t@click.prevent=\"showMore\"\n\t\t\t\t\t\tclass=\"crm-entity-stream-advice-link\"\n\t\t\t\t\t\thref=\"#\"\n\t\t\t\t\t>\n\t\t\t\t\t\t${Loc.getMessage('CRM_TIMELINE_ENCOURAGE_BUY_PRODUCTS_SHOW_MORE')}\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`\n});\n","export default {\n\tprops: {\n\t\tauthor: {\n\t\t\trequired: true,\n\t\t\ttype: Object\n\t\t},\n\t},\n\tcomputed: {\n\t\tiStyle()\n\t\t{\n\t\t\tif (!this.author.IMAGE_URL)\n\t\t\t{\n\t\t\t\treturn {};\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\t'background-image': 'url(' + this.author.IMAGE_URL + ')',\n\t\t\t\t'background-size': '21px',\n\t\t\t};\n\t\t},\n\t},\n\ttemplate: `\n\t\t<a\n\t\t\tv-if=\"author.SHOW_URL\"\n\t\t\t:href=\"author.SHOW_URL\"\n\t\t\ttarget=\"_blank\"\n\t\t\t:title=\"author.FORMATTED_NAME\"\n\t\t\tclass=\"ui-icon ui-icon-common-user crm-entity-stream-content-detail-employee\"\n\t\t>\n\t\t\t<i :style=\"iStyle\"></i>\t\n\t\t</a>\n\t`\n};\n","import {Vue} from 'ui.vue';\nimport HistoryItemMixin from '../mixins/history-item';\nimport Author from '../components/author';\nimport {ajax, Loc} from 'main.core';\nimport {PULL} from 'pull.client';\n\nexport default Vue.extend({\n\tmixins: [HistoryItemMixin],\n\tcomponents: {\n\t\t'author': Author,\n\t},\n\tdata()\n\t{\n\t\treturn {\n\t\t\tentityData: null,\n\t\t\tmessageId: null,\n\t\t\ttext: null,\n\t\t\ttitle: null,\n\t\t\tstatus: {\n\t\t\t\tname: null,\n\t\t\t\tsemantics: null,\n\t\t\t\tdescription: null,\n\t\t\t},\n\t\t\tprovider: null,\n\t\t\tisRefreshing: false,\n\t\t};\n\t},\n\tcreated()\n\t{\n\t\tthis.entityData = this.self.getAssociatedEntityData();\n\n\t\tif (this.entityData['MESSAGE_INFO'])\n\t\t{\n\t\t\tthis.setMessageInfo(this.entityData['MESSAGE_INFO']);\n\t\t}\n\n\t\tPULL.subscribe({\n\t\t\tmoduleId: 'notifications',\n\t\t\tcommand: 'message_update',\n\t\t\tcallback: (params) => {\n\t\t\t\tif (params.message.ID == this.messageId)\n\t\t\t\t{\n\t\t\t\t\tthis.refresh();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tif (this.entityData['PULL_TAG_NAME'])\n\t\t{\n\t\t\tPULL.extendWatch(this.entityData['PULL_TAG_NAME']);\n\t\t}\n\t},\n\tmethods: {\n\t\tsetMessageInfo(messageInfo)\n\t\t{\n\t\t\tthis.messageId = messageInfo['MESSAGE']['ID'];\n\n\t\t\tif (\n\t\t\t\tmessageInfo['HISTORY_ITEMS']\n\t\t\t\t&& Array.isArray(messageInfo['HISTORY_ITEMS'])\n\t\t\t\t&& messageInfo['HISTORY_ITEMS'].length > 0\n\t\t\t\t&& messageInfo['HISTORY_ITEMS'][0]\n\t\t\t\t&& messageInfo['HISTORY_ITEMS'][0]['PROVIDER_DATA']\n\t\t\t\t&& messageInfo['HISTORY_ITEMS'][0]['PROVIDER_DATA']['DESCRIPTION']\n\t\t\t)\n\t\t\t{\n\t\t\t\tthis.provider = messageInfo['HISTORY_ITEMS'][0]['PROVIDER_DATA']['DESCRIPTION'];\n\t\t\t\tthis.title = this.provider + ' ' + Loc.getMessage('CRM_TIMELINE_NOTIFICATION_MESSAGE');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.title = this.capitalizeFirstLetter(Loc.getMessage('CRM_TIMELINE_NOTIFICATION_MESSAGE'));\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\tmessageInfo['HISTORY_ITEMS']\n\t\t\t\t&& Array.isArray(messageInfo['HISTORY_ITEMS'])\n\t\t\t\t&& messageInfo['HISTORY_ITEMS'].length > 0\n\t\t\t\t&& messageInfo['HISTORY_ITEMS'][0]\n\t\t\t\t&& messageInfo['HISTORY_ITEMS'][0]['STATUS_DATA']\n\t\t\t\t&& messageInfo['HISTORY_ITEMS'][0]['STATUS_DATA']['DESCRIPTION']\n\t\t\t)\n\t\t\t{\n\t\t\t\tthis.status.name = messageInfo['HISTORY_ITEMS'][0]['STATUS_DATA']['DESCRIPTION'];\n\t\t\t\tthis.status.semantics = messageInfo['HISTORY_ITEMS'][0]['STATUS_DATA']['SEMANTICS'];\n\t\t\t\tthis.status.description = messageInfo['HISTORY_ITEMS'][0]['ERROR_MESSAGE'];\n\t\t\t}\n\n\t\t\tthis.text = messageInfo['MESSAGE']['TEXT']\n\t\t\t\t? messageInfo['MESSAGE']['TEXT']\n\t\t\t\t: Loc.getMessage('CRM_TIMELINE_NOTIFICATION_NO_MESSAGE_TEXT_2');\n\t\t},\n\t\trefresh()\n\t\t{\n\t\t\tif (this.isRefreshing)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.isRefreshing = true;\n\n\t\t\tajax.runAction(\n\t\t\t\t'crm.timeline.notification.getmessageinfo',\n\t\t\t\t{\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tmessageId: this.messageId\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t).then((result) => {\n\t\t\t\tthis.setMessageInfo(result.data);\n\t\t\t\tthis.isRefreshing = false;\n\t\t\t}).catch((result) => {\n\t\t\t\tthis.isRefreshing = false;\n\t\t\t});\n\t\t},\n\t\tviewActivity()\n\t\t{\n\t\t\tthis.self.view();\n\t\t},\n\t\tcapitalizeFirstLetter(str, locale= navigator.language)\n\t\t{\n\t\t\treturn str.replace(/^\\p{CWU}/u, char => char.toLocaleUpperCase(locale));\n\t\t}\n\t},\n\tcomputed: {\n\t\tcommunication()\n\t\t{\n\t\t\treturn this.entityData['COMMUNICATION'] ? this.entityData['COMMUNICATION'] : null;\n\t\t},\n\t\tstatusClass()\n\t\t{\n\t\t\treturn {\n\t\t\t\t'crm-entity-stream-content-event-process': this.status.semantics === 'process',\n\t\t\t\t'crm-entity-stream-content-event-successful': this.status.semantics === 'success',\n\t\t\t\t'crm-entity-stream-content-event-missing': this.status.semantics === 'failure',\n\t\t\t\t'crm-entity-stream-content-event-error-tip': this.isStatusError,\n\t\t\t};\n\t\t},\n\t\tisStatusError()\n\t\t{\n\t\t\treturn (this.status.semantics === 'failure' && !!this.status.description);\n\t\t},\n\t\tstatusErrorDescription()\n\t\t{\n\t\t\treturn this.isStatusError ? this.status.description : '';\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"crm-entity-stream-section crm-entity-stream-section-history crm-entity-stream-section-sms\">\n\t\t\t<div class=\"crm-entity-stream-section-icon crm-entity-stream-section-icon-sms\"></div>\n\t\t\t<div class=\"crm-entity-stream-section-content\">\n\t\t\t\t<div class=\"crm-entity-stream-content-event\">\n\t\t\t\t\t<div class=\"crm-entity-stream-content-header\">\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t@click.prevent=\"viewActivity\"\n\t\t\t\t\t\t\thref=\"#\"\n\t\t\t\t\t\t\tclass=\"crm-entity-stream-content-event-title\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{title}}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tv-if=\"status\"\n\t\t\t\t\t\t\t:class=\"statusClass\"\n\t\t\t\t\t\t\t:title=\"statusErrorDescription\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{status.name}}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span class=\"crm-entity-stream-content-event-time\">{{createdAt}}</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"crm-entity-stream-content-detail\">\n\t\t\t\t\t\t<div class=\"crm-entity-stream-content-detail-sms\">\n\t\t\t\t\t\t\t<div class=\"crm-entity-stream-content-detail-sms-status\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('CRM_TIMELINE_NOTIFICATION_VIA')} \n\t\t\t\t\t\t\t\t<strong>\n\t\t\t\t\t\t\t\t\t${Loc.getMessage('CRM_TIMELINE_NOTIFICATION_BITRIX24')}\n\t\t\t\t\t\t\t\t</strong>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"crm-entity-stream-content-detail-sms-fragment\">\n\t\t\t\t\t\t\t\t<span>{{text}}</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tv-if=\"communication\"\n\t\t\t\t\t\t\tclass=\"crm-entity-stream-content-detail-contact-info\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{BX.message('CRM_TIMELINE_SMS_TO')}}\n\t\t\t\t\t\t\t<a v-if=\"communication.SHOW_URL\" :href=\"communication.SHOW_URL\">\n\t\t\t\t\t\t\t\t{{communication.TITLE}}\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t\t\t{{communication.TITLE}}\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t<span v-if=\"communication.VALUE\">{{communication.VALUE}}</span>\n\t\t\t\t\t\t\t<template v-if=\"provider\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('CRM_TIMELINE_NOTIFICATION_IN_MESSENGER')} {{provider}}\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<author v-if=\"author\" :author=\"author\"></author>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\t\n\t`\n});\n","export default {\n\tprops: {\n\t\tdeliveryService: {\n\t\t\trequired: true,\n\t\t\ttype: Object\n\t\t},\n\t},\n\tcomputed: {\n\t\tisDeliveryServiceProfile()\n\t\t{\n\t\t\treturn this.deliveryService.IS_PROFILE;\n\t\t},\n\t\tdeliveryServiceName()\n\t\t{\n\t\t\treturn this.isDeliveryServiceProfile ? this.deliveryService.PARENT_NAME : this.deliveryService.NAME;\n\t\t},\n\t\tdeliveryProfileServiceName()\n\t\t{\n\t\t\treturn this.deliveryService.NAME;\n\t\t},\n\t\tdeliveryServiceLogoBackgroundUrl()\n\t\t{\n\t\t\treturn this.isDeliveryServiceProfile ? this.deliveryService.PARENT_LOGO : this.deliveryService.LOGO;\n\n\t\t\treturn logo\n\t\t\t\t? {\n\t\t\t\t\t'background-image': 'url(' + logo + ')'\n\t\t\t\t}\n\t\t\t\t: {};\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"crm-entity-stream-content-delivery-title\">\n\t\t\t<div\n\t\t\t\tv-if=\"isDeliveryServiceProfile && deliveryService.LOGO\"\n\t\t\t\tclass=\"crm-entity-stream-content-delivery-icon\"\n\t\t\t\t:style=\"{'background-image': 'url(' + deliveryService.LOGO + ')'}\"\n\t\t\t>\n\t\t\t</div>\n\t\t\t<div class=\"crm-entity-stream-content-delivery-title-contnet\">\n\t\t\t\t<div\n\t\t\t\t\tv-if=\"deliveryServiceLogoBackgroundUrl\"\n\t\t\t\t\tclass=\"crm-entity-stream-content-delivery-title-logo\"\n\t\t\t\t\t:style=\"{'background-image': 'url(' + deliveryServiceLogoBackgroundUrl + ')'}\"\n\t\t\t\t></div>\n\t\t\t\t<div class=\"crm-entity-stream-content-delivery-title-info\">\n\t\t\t\t\t<div class=\"crm-entity-stream-content-delivery-title-name\">\n\t\t\t\t\t\t{{deliveryServiceName}}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tv-if=\"isDeliveryServiceProfile\"\n\t\t\t\t\t\tclass=\"crm-entity-stream-content-delivery-title-param\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{deliveryProfileServiceName}}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`\n};\n","import {Vue} from 'ui.vue';\nimport {ajax, Loc} from 'main.core';\nimport Author from '../components/author';\nimport DeliveryServiceInfo from '../components/delivery/delivery-service-info';\nimport {PULL} from 'pull.client';\nimport HistoryItemMixin from '../mixins/history-item';\n\nexport default Vue.extend({\n\tmixins: [HistoryItemMixin],\n\tcomponents: {\n\t\t'author': Author,\n\t\t'delivery-service-info': DeliveryServiceInfo,\n\t},\n\tprops: {\n\t\tmode: {\n\t\t\trequired: true,\n\t\t\ttype: String\n\t\t},\n\t},\n\tdata()\n\t{\n\t\treturn {\n\t\t\tentityData: null,\n\t\t\tdeliveryInfo: null,\n\t\t\tisRefreshing: false,\n\t\t\tisCreatingRequest: false,\n\t\t\tisCancellingRequest: false,\n\t\t};\n\t},\n\tmethods: {\n\t\t// region common activity methods\n\t\tcompleteActivity()\n\t\t{\n\t\t\tif(this.self.canComplete())\n\t\t\t{\n\t\t\t\tthis.self.setAsDone(!this.self.isDone());\n\t\t\t}\n\t\t},\n\t\tshowContextMenu(event)\n\t\t{\n\t\t\tlet popup = BX.PopupMenu.create(\n\t\t\t\t'taxi_activity_context_menu_' + this.self.getId(),\n\t\t\t\tevent.target,\n\t\t\t\t[\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'delete',\n\t\t\t\t\t\ttext: this.getLangMessage('menuDelete'),\n\t\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\t\tpopup.close();\n\n\t\t\t\t\t\t\tlet deletionDlgId = 'entity_timeline_deletion_' + this.self.getId() + '_confirm';\n\t\t\t\t\t\t\tlet dlg = BX.Crm.ConfirmationDialog.get(deletionDlgId);\n\n\t\t\t\t\t\t\tif (!dlg)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tdlg = BX.Crm.ConfirmationDialog.create(\n\t\t\t\t\t\t\t\t\tdeletionDlgId,\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\ttitle: this.getLangMessage('removeConfirmTitle'),\n\t\t\t\t\t\t\t\t\t\tcontent: this.getLangMessage('deliveryRemove')\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tdlg.open().then(\n\t\t\t\t\t\t\t\t(result) => {\n\t\t\t\t\t\t\t\t\tif (result.cancel)\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tthis.self.remove();\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t(result) => {},\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\t{\n\t\t\t\t\tautoHide: true,\n\t\t\t\t\toffsetTop: 0,\n\t\t\t\t\toffsetLeft: 16,\n\t\t\t\t\tangle: { position: \"top\", offset: 0 },\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tonPopupShow: () =>  BX.addClass(event.target, 'active'),\n\t\t\t\t\t\tonPopupClose: () => BX.removeClass(event.target, 'active'),\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tpopup.show();\n\t\t},\n\t\t// endregion\n\t\t// region delivery request methods\n\t\tcreateDeliveryRequest()\n\t\t{\n\t\t\tif (this.isLocked)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.isCreatingRequest = true;\n\t\t\tBX.ajax.runAction(\n\t\t\t\t'sale.deliveryrequest.create',\n\t\t\t\t{\n\t\t\t\t\tanalyticsLabel: 'saleDeliveryTaxiCall',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tshipmentIds: this.shipmentIds,\n\t\t\t\t\t\tadditional: {\n\t\t\t\t\t\t\tACTIVITY_ID: this.activityId,\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t).then((result) => {\n\t\t\t\tthis.refresh(() => {\n\t\t\t\t\tthis.isCreatingRequest = false;\n\t\t\t\t});\n\t\t\t}).catch((result) => {\n\t\t\t\tthis.isCreatingRequest = false;\n\t\t\t\tthis.showError(result.errors.map((item) => item.message).join());\n\t\t\t});\n\t\t},\n\t\tcancelDeliveryRequest()\n\t\t{\n\t\t\tif (this.isLocked || !this.deliveryRequest)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.isCancellingRequest = true;\n\t\t\tBX.ajax.runAction(\n\t\t\t\t'sale.deliveryrequest.execute',\n\t\t\t\t{\n\t\t\t\t\tdata: {\n\t\t\t\t\t\trequestId: this.deliveryRequest['ID'],\n\t\t\t\t\t\tactionType: this.deliveryService['CANCEL_ACTION_CODE'],\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.then((result) => {\n\t\t\t\t\tconst data = result.data;\n\n\t\t\t\t\tBX.ajax.runAction(\n\t\t\t\t\t\t'crm.timeline.deliveryactivity.createcanceldeliveryrequestmessage',\n\t\t\t\t\t\t{data: {\n\t\t\t\t\t\t\trequestId: this.deliveryRequest['ID'],\n\t\t\t\t\t\t\tmessage: data.message\n\t\t\t\t\t\t}}\n\t\t\t\t\t).then((result) => {\n\t\t\t\t\t\tBX.ajax.runAction(\n\t\t\t\t\t\t\t'sale.deliveryrequest.delete',\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\trequestId: this.deliveryRequest['ID'],\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.then((result) => {\n\t\t\t\t\t\t\t\tthis.refresh(() => {\n\t\t\t\t\t\t\t\t\tthis.isCancellingRequest = false;\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}).catch((result) => {\n\t\t\t\t\t\t\tthis.isCancellingRequest = false;\n\t\t\t\t\t\t\tthis.showError(result.errors.map((item) => item.message).join());\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}).catch((result) => {\n\t\t\t\t\tthis.isCancellingRequest = false;\n\t\t\t\t\tthis.showError(result.errors.map((item) => item.message).join());\n\t\t\t\t});\n\t\t},\n\t\tcheckRequestStatus()\n\t\t{\n\t\t\tBX.ajax.runAction('crm.timeline.deliveryactivity.checkrequeststatus');\n\t\t},\n\t\tstartCheckingRequestStatus()\n\t\t{\n\t\t\tclearTimeout(this._checkRequestStatusTimeoutId);\n\t\t\tthis._checkRequestStatusTimeoutId = setInterval(\n\t\t\t\t() => this.checkRequestStatus(), 30 * 1000\n\t\t\t);\n\t\t},\n\t\tstopCheckingRequestStatus()\n\t\t{\n\t\t\tclearTimeout(this._checkRequestStatusTimeoutId);\n\t\t},\n\t\t// endregion\n\t\t// region refresh methods\n\t\tsetDeliveryInfo(deliveryInfo)\n\t\t{\n\t\t\tthis.deliveryInfo = deliveryInfo;\n\t\t},\n\t\trefresh(callback = null)\n\t\t{\n\t\t\tif (this.isRefreshing)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.isRefreshing = true;\n\n\t\t\tconst finallyCallback = () => {\n\t\t\t\tthis.isRefreshing = false;\n\t\t\t\tif (callback)\n\t\t\t\t{\n\t\t\t\t\tcallback();\n\t\t\t\t}\n\t\t\t};\n\t\t\tajax.runAction(\n\t\t\t\t'crm.timeline.deliveryactivity.getdeliveryinfo',\n\t\t\t\t{\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tactivityId: this.activityId\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t).then((result) => {\n\t\t\t\tthis.setDeliveryInfo(result.data);\n\t\t\t\tfinallyCallback();\n\t\t\t}).catch((result) => {\n\t\t\t\tfinallyCallback();\n\t\t\t});\n\t\t},\n\t\tsubscribePullEvents()\n\t\t{\n\t\t\tif (this._isPullSubscribed)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tPULL.subscribe({\n\t\t\t\tmoduleId: 'crm',\n\t\t\t\tcommand: 'onOrderShipmentSave',\n\t\t\t\tcallback: (params) => {\n\t\t\t\t\tif (this.shipmentIds.some(id => id == params.FIELDS.ID))\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.refresh();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tPULL.subscribe({\n\t\t\t\tmoduleId: 'sale',\n\t\t\t\tcommand: 'onDeliveryServiceSave',\n\t\t\t\tcallback: (params) => {\n\t\t\t\t\tif (this.deliveryServiceIds.some(id => id == params.ID))\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.refresh();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tPULL.subscribe({\n\t\t\t\tmoduleId: 'sale',\n\t\t\t\tcommand: 'onDeliveryRequestUpdate',\n\t\t\t\tcallback: (params) => {\n\t\t\t\t\tif (this.deliveryRequestId == params.ID)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.refresh();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tPULL.subscribe({\n\t\t\t\tmoduleId: 'sale',\n\t\t\t\tcommand: 'onDeliveryRequestDelete',\n\t\t\t\tcallback: (params) => {\n\t\t\t\t\tif (this.deliveryRequestId == params.ID)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.refresh();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tPULL.extendWatch('SALE_DELIVERY_SERVICE');\n\t\t\tPULL.extendWatch('CRM_ENTITY_ORDER_SHIPMENT');\n\t\t\tPULL.extendWatch('SALE_DELIVERY_REQUEST');\n\n\t\t\tthis._isPullSubscribed = true;\n\t\t},\n\t\t//endregion\n\t\t// region miscellaneous\n\t\tcallPhone(phone)\n\t\t{\n\t\t\tif (this.canUseTelephony && typeof(top.BXIM)!=='undefined')\n\t\t\t{\n\t\t\t\ttop.BXIM.phoneTo(phone);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\twindow.location.href='tel:' + phone;\n\t\t\t}\n\t\t},\n\t\tisPhone(property)\n\t\t{\n\t\t\treturn (\n\t\t\t\tproperty.hasOwnProperty('TAGS')\n\t\t\t\t&& Array.isArray(property['TAGS'])\n\t\t\t\t&& property['TAGS'].includes('phone')\n\t\t\t);\n\t\t},\n\t\tshowError(message)\n\t\t{\n\t\t\tBX.loadExt('ui.notification').then(() => { BX.UI.Notification.Center.notify({content: message}); });\n\t\t},\n\t\t// endregion\n\t},\n\tcreated()\n\t{\n\t\tthis.entityData = this.self.getAssociatedEntityData();\n\t\tif (this.entityData['DELIVERY_INFO'])\n\t\t{\n\t\t\tthis.setDeliveryInfo(this.entityData['DELIVERY_INFO']);\n\t\t}\n\t\t\n\t\tthis.subscribePullEvents();\n\n\t\tthis._checkRequestStatusTimeoutId = null;\n\t\tif (this.needCheckRequestStatus)\n\t\t{\n\t\t\tthis.startCheckingRequestStatus();\n\t\t}\n\t},\n\tcomputed: {\n\t\tactivityId()\n\t\t{\n\t\t\treturn this.data.ASSOCIATED_ENTITY.ID;\n\t\t},\n\t\t// region shipments\n\t\tshipments()\n\t\t{\n\t\t\tif (\n\t\t\t\tthis.deliveryInfo\n\t\t\t\t&& this.deliveryInfo.hasOwnProperty('SHIPMENTS')\n\t\t\t\t&& Array.isArray(this.deliveryInfo['SHIPMENTS'])\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn this.deliveryInfo['SHIPMENTS'];\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\t\tshipmentIds()\n\t\t{\n\t\t\treturn this.shipments ? this.shipments.map((shipment) => shipment['ID']) : [];\n\t\t},\n\t\tshipment()\n\t\t{\n\t\t\tif (\n\t\t\t\tthis.shipments\n\t\t\t\t&& Array.isArray(this.shipments)\n\t\t\t\t&& this.shipments.length > 0\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn this.shipments[0];\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\t\texpectedDeliveryPriceFormatted()\n\t\t{\n\t\t\treturn (this.shipment && this.shipment.hasOwnProperty('BASE_PRICE_DELIVERY'))\n\t\t\t\t? this.shipment['BASE_PRICE_DELIVERY_FORMATTED']\n\t\t\t\t: this.shipment['PRICE_DELIVERY_FORMATTED'];\n\t\t},\n\t\t// endregion\n\t\t// region delivery service\n\t\tdeliveryService()\n\t\t{\n\t\t\tif (\n\t\t\t\tthis.deliveryInfo\n\t\t\t\t&& this.deliveryInfo.hasOwnProperty('DELIVERY_SERVICE')\n\t\t\t\t&& typeof this.deliveryInfo['DELIVERY_SERVICE'] === 'object'\n\t\t\t\t&& this.deliveryInfo['DELIVERY_SERVICE'] !== null\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn this.deliveryInfo['DELIVERY_SERVICE'];\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\t\tdeliveryServiceIds()\n\t\t{\n\t\t\t// @TODO\n\t\t\tif (!this.deliveryService)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn this.deliveryService.IDS;\n\t\t},\n\t\t// endregion\n\t\t// region delivery request\n\t\tdeliveryRequest()\n\t\t{\n\t\t\tif (\n\t\t\t\tthis.deliveryInfo\n\t\t\t\t&& this.deliveryInfo.hasOwnProperty('DELIVERY_REQUEST')\n\t\t\t\t&& typeof this.deliveryInfo['DELIVERY_REQUEST'] === 'object'\n\t\t\t\t&& this.deliveryInfo['DELIVERY_REQUEST'] !== null\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn this.deliveryInfo['DELIVERY_REQUEST'];\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\t\tdeliveryRequestId()\n\t\t{\n\t\t\tif (this.deliveryRequest && this.deliveryRequest.hasOwnProperty('ID'))\n\t\t\t{\n\t\t\t\treturn this.deliveryRequest['ID'];\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\t\tdeliveryRequestProperties()\n\t\t{\n\t\t\tif (\n\t\t\t\tthis.deliveryRequest\n\t\t\t\t&& this.deliveryRequest.hasOwnProperty('EXTERNAL_PROPERTIES')\n\t\t\t\t&& typeof this.deliveryRequest['EXTERNAL_PROPERTIES'] === 'object'\n\t\t\t\t&& this.deliveryRequest['EXTERNAL_PROPERTIES'] !== null\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn this.deliveryRequest['EXTERNAL_PROPERTIES'];\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\t\tdeliveryRequestStatus()\n\t\t{\n\t\t\tif (!this.deliveryRequest)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn this.deliveryRequest['EXTERNAL_STATUS'];\n\t\t},\n\t\tdeliveryRequestStatusSemantic()\n\t\t{\n\t\t\tif (!this.deliveryRequest)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn this.deliveryRequest['EXTERNAL_STATUS_SEMANTIC'];\n\t\t},\n\t\tisConnectedWithDeliveryRequest()\n\t\t{\n\t\t\treturn !!this.deliveryRequest;\n\t\t},\n\t\tneedCheckRequestStatus()\n\t\t{\n\t\t\treturn this.isConnectedWithDeliveryRequest && this.mode === 'schedule';\n\t\t},\n\t\tisSendRequestButtonVisible()\n\t\t{\n\t\t\treturn (!this.isCreatingRequest && !this.isConnectedWithDeliveryRequest);\n\t\t},\n\t\t// endregion\n\t\t//region miscellaneous\n\t\tmiscellaneous()\n\t\t{\n\t\t\tif (\n\t\t\t\tthis.deliveryInfo\n\t\t\t\t&& this.deliveryInfo.hasOwnProperty('MISCELLANEOUS')\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn this.deliveryInfo['MISCELLANEOUS'];\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\t\tcanUseTelephony()\n\t\t{\n\t\t\treturn (\n\t\t\t\tthis.miscellaneous\n\t\t\t\t&& this.miscellaneous.hasOwnProperty('CAN_USE_TELEPHONY')\n\t\t\t\t&& this.miscellaneous['CAN_USE_TELEPHONY']\n\t\t\t);\n\t\t},\n\t\ttemplate()\n\t\t{\n\t\t\tif (!this.miscellaneous || !this.miscellaneous.hasOwnProperty('TEMPLATE'))\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn this.miscellaneous['TEMPLATE'];\n\t\t},\n\t\t// endregion\n\t\t// region classes\n\t\tcancelRequestButtonStyle()\n\t\t{\n\t\t\treturn {\n\t\t\t\t'ui-btn': true,\n\t\t\t\t'ui-btn-sm': true,\n\t\t\t\t'ui-btn-light-border': true,\n\t\t\t\t'ui-btn-wait': this.isCancellingRequest\n\t\t\t};\n\t\t},\n\t\tstatusClass()\n\t\t{\n\t\t\treturn {\n\t\t\t\t'crm-entity-stream-content-event-process': this.deliveryRequestStatusSemantic === 'process',\n\t\t\t\t'crm-entity-stream-content-event-missing': this.deliveryRequestStatusSemantic === 'error',\n\t\t\t\t'crm-entity-stream-content-event-done': this.deliveryRequestStatusSemantic === 'success',\n\t\t\t};\n\t\t},\n\t\twrapperContainerClass()\n\t\t{\n\t\t\treturn {\n\t\t\t\t'crm-entity-stream-section-planned': this.mode === 'schedule'\n\t\t\t};\n\t\t},\n\t\tinnerWrapperContainerClass()\n\t\t{\n\t\t\treturn {\n\t\t\t\t'crm-entity-stream-content-event--delivery': this.mode !== 'schedule'\n\t\t\t};\n\t\t},\n\t\t// endregion\n\t\tisLocked()\n\t\t{\n\t\t\treturn this.isRefreshing || this.isCreatingRequest || this.isCancellingRequest;\n\t\t},\n\t},\n\twatch: {\n\t\tneedCheckRequestStatus: function (value)\n\t\t{\n\t\t\tif (value)\n\t\t\t{\n\t\t\t\tthis.startCheckingRequestStatus();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.stopCheckingRequestStatus();\n\t\t\t}\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div\n\t\t\tclass=\"crm-entity-stream-section crm-entity-stream-section-new\"\n\t\t\t:class=\"wrapperContainerClass\"\n\t\t>\n\t\t\t<div class=\"crm-entity-stream-section-icon crm-entity-stream-section-icon-new crm-entity-stream-section-icon-taxi\"></div>\n\t\t\t<div\n\t\t\t\tv-if=\"mode === 'schedule'\"\n\t\t\t\t@click=\"showContextMenu\"\n\t\t\t\tclass=\"crm-entity-stream-section-context-menu\"\n\t\t\t></div>\n\t\t\t<div class=\"crm-entity-stream-section-content\">\n\t\t\t\t<div\n\t\t\t\t\tclass=\"crm-entity-stream-content-event\"\n\t\t\t\t\t:class=\"innerWrapperContainerClass\"\n\t\t\t\t>\n\t\t\t\t\t<div class=\"crm-entity-stream-content-header\">\n\t\t\t\t\t\t<span class=\"crm-entity-stream-content-event-title\">\n\t\t\t\t\t\t\t${Loc.getMessage('TIMELINE_DELIVERY_TAXI_SERVICE')}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tv-if=\"deliveryRequestStatus && deliveryRequestStatusSemantic\"\n\t\t\t\t\t\t\t:class=\"statusClass\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{deliveryRequestStatus}}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span class=\"crm-entity-stream-content-event-time\">{{createdAt}}</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"crm-entity-stream-content-detail crm-entity-stream-content-delivery\">\n\t\t\t\t\t\t<div class=\"crm-entity-stream-content-delivery-row crm-entity-stream-content-delivery-row--flex\">\n\t\t\t\t\t\t\t<template v-if=\"mode === 'schedule'\">\n\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\tv-if=\"isSendRequestButtonVisible\"\n\t\t\t\t\t\t\t\t\t@click=\"createDeliveryRequest\"\n\t\t\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-sm ui-btn-primary\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t${Loc.getMessage('TIMELINE_DELIVERY_CREATE_DELIVERY_REQUEST')}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<span v-if=\"isCreatingRequest\" class=\"crm-entity-stream-content-delivery-status\">\n\t\t\t\t\t\t\t\t\t${Loc.getMessage('TIMELINE_DELIVERY_CREATING_REQUEST')}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\tv-if=\"isConnectedWithDeliveryRequest && deliveryService && deliveryService.IS_CANCELLABLE\"\n\t\t\t\t\t\t\t\t\t@click=\"cancelDeliveryRequest\"\n\t\t\t\t\t\t\t\t\t:class=\"cancelRequestButtonStyle\"\n\t\t\t\t\t\t\t\t>\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t{{deliveryService.CANCEL_ACTION_NAME}}\n\t\t\t\t\t\t\t\t</span>\t\t\t\t\t\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t<delivery-service-info\n\t\t\t\t\t\t\t\tv-if=\"deliveryService\"\n\t\t\t\t\t\t\t\t:deliveryService=\"deliveryService\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t</delivery-service-info>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"crm-entity-stream-content-delivery-row\">\n\t\t\t\t\t\t\t<table class=\"crm-entity-stream-content-delivery-order\">\n\t\t\t\t\t\t\t\t<tr v-if=\"shipment && shipment.ADDRESS_FROM_FORMATTED && shipment.ADDRESS_TO_FORMATTED\">\n\t\t\t\t\t\t\t\t\t<td colspan=\"2\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"crm-entity-stream-content-delivery-order-item\">\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"crm-entity-stream-content-delivery-order-value crm-entity-stream-content-delivery-order-value--sm\">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"crm-entity-stream-content-delivery-order-box\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"crm-entity-stream-content-delivery-order-box-label\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t${Loc.getMessage('TIMELINE_DELIVERY_TAXI_ADDRESS_FROM')}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span v-html=\"shipment.ADDRESS_FROM_FORMATTED\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"crm-entity-stream-content-delivery-order-box\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"crm-entity-stream-content-delivery-order-box-label\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t${Loc.getMessage('TIMELINE_DELIVERY_TAXI_ADDRESS_TO')}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span v-html=\"shipment.ADDRESS_TO_FORMATTED\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t<tr v-if=\"shipment\">\n\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t<div class=\"crm-entity-stream-content-delivery-order-item\">\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"crm-entity-stream-content-delivery-order-label\">\n\t\t\t\t\t\t\t\t\t\t\t\t${Loc.getMessage('TIMELINE_DELIVERY_TAXI_CLIENT_DELIVERY_PRICE')}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"crm-entity-stream-content-delivery-order-value crm-entity-stream-content-delivery-order-value--sm\">\n\t\t\t\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\t\t\t\tv-html=\"shipment.PRICE_DELIVERY_FORMATTED\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t style=\"font-size: 14px; color: #333;\"\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t<div class=\"crm-entity-stream-content-delivery-order-item\">\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"crm-entity-stream-content-delivery-order-label\">\n\t\t\t\t\t\t\t\t\t\t\t\t${Loc.getMessage('TIMELINE_DELIVERY_TAXI_EXPECTED_DELIVERY_PRICE')}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"crm-entity-stream-content-delivery-order-value crm-entity-stream-content-delivery-order-value--sm\">\n\t\t\t\t\t\t\t\t\t\t\t\t<span style=\"font-size: 14px; color: #333; opacity: .5;\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tv-html=\"expectedDeliveryPriceFormatted\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t<span v-else>\n\t\t\t\t\t\t\t\t\t\t\t\t\t${Loc.getMessage('TIMELINE_DELIVERY_TAXI_EXPECTED_PRICE_NOT_RECEIVED')}\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t<!-- Properties --->\n\t\t\t\t\t\t\t\t<tr v-for=\"property in deliveryRequestProperties\">\n\t\t\t\t\t\t\t\t\t<td colspan=\"2\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"crm-entity-stream-content-delivery-order-item\">\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"crm-entity-stream-content-delivery-order-label\">\n\t\t\t\t\t\t\t\t\t\t\t\t{{property.NAME}}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"crm-entity-stream-content-delivery-order-value crm-entity-stream-content-delivery-order-value--sm\">\n\t\t\t\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\t\t\t\tv-if=\"isPhone(property)\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t@click=\"callPhone(property.VALUE)\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"crm-entity-stream-content-delivery-link\"\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{{property.VALUE}}\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t<span v-else>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{{property.VALUE}}\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t<!-- end Properties --->\n\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div v-if=\"mode === 'schedule'\" class=\"crm-entity-stream-content-detail-planned-action\">\n\t\t\t\t\t\t<input @click=\"completeActivity\" type=\"checkbox\" class=\"crm-entity-stream-planned-apply-btn\">\n\t\t\t\t\t</div>\n\t\t\t\t\t<author v-if=\"author\" :author=\"author\">\n\t\t\t\t\t</author>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`\n});\n","import {Vue} from 'ui.vue';\nimport HistoryItemMixin from '../mixins/history-item';\nimport Author from '../components/author';\nimport DeliveryServiceInfo from '../components/delivery/delivery-service-info';\n\nexport default Vue.extend({\n\tmixins: [HistoryItemMixin],\n\tcomponents: {\n\t\t'author': Author,\n\t\t'delivery-service-info': DeliveryServiceInfo,\n\t},\n\tcomputed: {\n\t\tdeliveryService()\n\t\t{\n\t\t\tif (!this.data.FIELDS.hasOwnProperty('DELIVERY_SERVICE'))\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn this.data.FIELDS.DELIVERY_SERVICE;\n\t\t},\n\t\tmessageData()\n\t\t{\n\t\t\tif (!this.data.FIELDS.hasOwnProperty('MESSAGE_DATA'))\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn this.data.FIELDS.MESSAGE_DATA;\n\t\t},\n\t\tmessageTitle()\n\t\t{\n\t\t\tif (!this.messageData)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn this.messageData['TITLE'];\n\t\t},\n\t\tmessageDescription()\n\t\t{\n\t\t\tif (!this.messageData)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn this.messageData['DESCRIPTION'];\n\t\t},\n\t\tmessageStatus()\n\t\t{\n\t\t\tif (!this.messageData)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn this.messageData['STATUS'];\n\t\t},\n\t\tmessageStatusSemantics()\n\t\t{\n\t\t\tif (!this.messageData)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn this.messageData['STATUS_SEMANTIC'];\n\t\t},\n\t\tmessageStatusSemanticsClass()\n\t\t{\n\t\t\treturn {\n\t\t\t\t'crm-entity-stream-content-event-process': this.messageStatusSemantics === 'process',\n\t\t\t\t'crm-entity-stream-content-event-missing': this.messageStatusSemantics === 'error',\n\t\t\t\t'crm-entity-stream-content-event-done': this.messageStatusSemantics === 'success',\n\t\t\t};\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"crm-entity-stream-section crm-entity-stream-section-new\">\n\t\t\t<div class=\"crm-entity-stream-section-icon crm-entity-stream-section-icon-new crm-entity-stream-section-icon-taxi\"></div>\n\t\t\t<div class=\"crm-entity-stream-section-content\">\n\t\t\t\t<div class=\"crm-entity-stream-content-event\">\n\t\t\t\t\t<div class=\"crm-entity-stream-content-header\">\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tv-if=\"messageTitle\"\n\t\t\t\t\t\t\tclass=\"crm-entity-stream-content-event-title\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{messageTitle}}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tv-if=\"messageStatus && messageStatusSemantics\"\n\t\t\t\t\t\t\t:class=\"messageStatusSemanticsClass\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{messageStatus}}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span class=\"crm-entity-stream-content-event-time\">\n\t\t\t\t\t\t\t<span v-html=\"createdAt\">\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"crm-entity-stream-content-detail\">\n\t\t\t\t\t\t<div class=\"crm-entity-stream-content-delivery-row crm-entity-stream-content-delivery-row--flex\">\n\t\t\t\t\t\t\t<delivery-service-info\n\t\t\t\t\t\t\t\tv-if=\"deliveryService\"\n\t\t\t\t\t\t\t\t:deliveryService=\"deliveryService\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t</delivery-service-info>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tv-if=\"messageDescription\"\n\t\t\t\t\t\t\tclass=\"crm-entity-stream-content-delivery-description\"\n\t\t\t\t\t\t\tv-html=\"messageDescription\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<author v-if=\"author\" :author=\"author\">\n\t\t\t\t\t</author>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`\n});\n","import {Vue} from 'ui.vue';\nimport {Loc} from 'main.core';\nimport HistoryItemMixin from '../mixins/history-item';\nimport Author from '../components/author';\nimport DeliveryServiceInfo from '../components/delivery/delivery-service-info';\n\nexport default Vue.extend({\n\tmixins: [HistoryItemMixin],\n\tcomponents: {\n\t\t'author': Author,\n\t\t'delivery-service-info': DeliveryServiceInfo,\n\t},\n\tcomputed: {\n\t\tdeliveryService()\n\t\t{\n\t\t\tif (!this.data.FIELDS.hasOwnProperty('DELIVERY_SERVICE'))\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn this.data.FIELDS.DELIVERY_SERVICE;\n\t\t},\n\t\tmessageData()\n\t\t{\n\t\t\tif (!this.data.FIELDS.hasOwnProperty('MESSAGE_DATA'))\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn this.data.FIELDS.MESSAGE_DATA;\n\t\t},\n\t\tmessageTitle()\n\t\t{\n\t\t\tif (!this.messageData)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn this.messageData['TITLE'];\n\t\t},\n\t\tmessageDescription()\n\t\t{\n\t\t\tif (!this.messageData)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn this.messageData['DESCRIPTION'];\n\t\t},\n\t\tmessageStatus()\n\t\t{\n\t\t\tif (!this.messageData)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn this.messageData['STATUS'];\n\t\t},\n\t\tmessageStatusSemantics()\n\t\t{\n\t\t\tif (!this.messageData)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn this.messageData['STATUS_SEMANTIC'];\n\t\t},\n\t\tmessageStatusSemanticsClass()\n\t\t{\n\t\t\treturn {\n\t\t\t\t'crm-entity-stream-content-event-process': this.messageStatusSemantics === 'process',\n\t\t\t\t'crm-entity-stream-content-event-missing': this.messageStatusSemantics === 'error',\n\t\t\t\t'crm-entity-stream-content-event-done': this.messageStatusSemantics === 'success',\n\t\t\t};\n\t\t},\n\t\taddressFrom()\n\t\t{\n\t\t\tif (!this.data.FIELDS.hasOwnProperty('ADDRESS_FROM_FORMATTED'))\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn this.data.FIELDS.ADDRESS_FROM_FORMATTED;\n\t\t},\n\t\taddressTo()\n\t\t{\n\t\t\tif (!this.data.FIELDS.hasOwnProperty('ADDRESS_TO_FORMATTED'))\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn this.data.FIELDS.ADDRESS_TO_FORMATTED;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"crm-entity-stream-section crm-entity-stream-section-new\">\n\t\t\t<div class=\"crm-entity-stream-section-icon crm-entity-stream-section-icon-new crm-entity-stream-section-icon-taxi\"></div>\n\t\t\t\n\t\t\t<div class=\"crm-entity-stream-section-content\">\n\t\t\t\t<div class=\"crm-entity-stream-content-event\">\n\t\t\t\t\t<div class=\"crm-entity-stream-content-header\">\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tv-if=\"messageTitle\"\n\t\t\t\t\t\t\tclass=\"crm-entity-stream-content-event-title\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{messageTitle}}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tv-if=\"messageStatus && messageStatusSemantics\"\n\t\t\t\t\t\t\t:class=\"messageStatusSemanticsClass\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{messageStatus}}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span class=\"crm-entity-stream-content-event-time\">\n\t\t\t\t\t\t\t<span v-html=\"createdAt\">\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"crm-entity-stream-content-detail\">\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tv-html=\"messageDescription\"\n\t\t\t\t\t\t\tclass=\"crm-entity-stream-content-detail-description crm-delivery-taxi-caption\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"crm-entity-stream-content-detail-description\">\n\t\t\t\t\t\t\t<div v-if=\"addressFrom\" class=\"crm-entity-stream-content-delivery-order-box\">\n\t\t\t\t\t\t\t\t<div class=\"crm-entity-stream-content-delivery-order-box-label\">\n\t\t\t\t\t\t\t\t\t${Loc.getMessage('TIMELINE_DELIVERY_TAXI_ADDRESS_FROM')}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<span>{{addressFrom}}</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div v-if=\"addressTo\" class=\"crm-entity-stream-content-delivery-order-box\">\n\t\t\t\t\t\t\t\t<div class=\"crm-entity-stream-content-delivery-order-box-label\">\n\t\t\t\t\t\t\t\t\t${Loc.getMessage('TIMELINE_DELIVERY_TAXI_ADDRESS_TO')}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<span>{{addressTo}}</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<author v-if=\"author\" :author=\"author\">\n\t\t\t\t\t</author>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`\n});\n","import Manager from \"./manager\";\n\n/** @memberof BX.Crm.Timeline */\nexport default class Editor\n{\n\tconstructor()\n\t{\n\t\tthis._id = \"\";\n\t\tthis._settings = {};\n\t\tthis._manager = null;\n\n\t\tthis._ownerTypeId = 0;\n\t\tthis._ownerId = 0;\n\n\t\tthis._container = null;\n\t\tthis._input = null;\n\t\tthis._saveButton = null;\n\t\tthis._cancelButton = null;\n\t\tthis._ghostInput = null;\n\n\t\tthis._saveButtonHandler = BX.delegate(this.onSaveButtonClick, this);\n\t\tthis._cancelButtonHandler = BX.delegate(this.onCancelButtonClick, this);\n\t\tthis._focusHandler = BX.delegate(this.onFocus, this);\n\t\tthis._blurHandler = BX.delegate(this.onBlur, this);\n\t\tthis._keyupHandler = BX.delegate(this.resizeForm, this);\n\t\tthis._delayedKeyupHandler = BX.delegate(\n\t\t\tfunction()\n\t\t\t{\n\t\t\t\tsetTimeout(this.resizeForm.bind(this), 0);\n\t\t\t},\n\t\t\tthis\n\t\t);\n\n\t\tthis._isVisible = true;\n\t\tthis._hideButtonsOnBlur = true;\n\t}\n\n\tinitialize(id, settings)\n\t{\n\t\tthis._id = BX.type.isNotEmptyString(id) ? id : BX.util.getRandomString(4);\n\t\tthis._settings = settings ? settings : {};\n\n\t\tthis._manager = this.getSetting(\"manager\");\n\t\tif(!(this._manager instanceof Manager))\n\t\t{\n\t\t\tthrow \"Editor. Manager instance is not found.\";\n\t\t}\n\n\t\tthis._ownerTypeId = this.getSetting(\"ownerTypeId\", 0);\n\t\tthis._ownerId = this.getSetting(\"ownerId\", 0);\n\n\t\tthis._container = BX(this.getSetting(\"container\"));\n\t\tthis._input = BX(this.getSetting(\"input\"));\n\t\tthis._saveButton = BX(this.getSetting(\"button\"));\n\t\tthis._cancelButton = BX(this.getSetting(\"cancelButton\"));\n\n\t\tBX.bind(this._saveButton, \"click\", this._saveButtonHandler);\n\t\tif(this._cancelButton)\n\t\t{\n\t\t\tBX.bind(this._cancelButton, \"click\", this._cancelButtonHandler);\n\t\t}\n\n\t\tBX.bind(this._input, \"focus\", this._focusHandler);\n\t\tBX.bind(this._input, \"blur\", this._blurHandler);\n\t\tBX.bind(this._input, \"keyup\", this._keyupHandler);\n\t\tBX.bind(this._input, \"cut\", this._delayedKeyupHandler);\n\t\tBX.bind(this._input, \"paste\", this._delayedKeyupHandler);\n\n\t\tthis.doInitialize();\n\t}\n\n\tdoInitialize()\n\t{\n\t}\n\n\tgetId()\n\t{\n\t\treturn this._id;\n\t}\n\n\tgetSetting(name, defaultval)\n\t{\n\t\treturn this._settings.hasOwnProperty(name) ? this._settings[name] : defaultval;\n\t}\n\n\tsetVisible(visible)\n\t{\n\t\tvisible = !!visible;\n\t\tif(this._isVisible === visible)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis._isVisible = visible;\n\t\tthis._container.style.display = visible ? \"\" : \"none\";\n\t}\n\n\tisVisible()\n\t{\n\t\treturn this._isVisible;\n\t}\n\n\tonFocus(e)\n\t{\n\t\tBX.addClass(this._container, \"focus\");\n\t}\n\n\tonBlur(e)\n\t{\n\t\tif(!this._hideButtonsOnBlur)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif(this._input.value === \"\")\n\t\t{\n\t\t\twindow.setTimeout(\n\t\t\t\tBX.delegate(function() {\n\t\t\t\t\tBX.removeClass(this._container, \"focus\");\n\t\t\t\t\tthis._input.style.minHeight = \"\";\n\t\t\t\t}, this),\n\t\t\t\t200\n\t\t\t);\n\t\t}\n\t}\n\n\tonSaveButtonClick(e)\n\t{\n\t\tthis.save();\n\t}\n\n\tonCancelButtonClick()\n\t{\n\t\tthis.cancel();\n\t\tthis._manager.processEditingCancellation(this);\n\t}\n\n\tsave()\n\t{\n\t}\n\n\tcancel()\n\t{\n\t}\n\n\trelease()\n\t{\n\t\tif(this._ghostInput)\n\t\t{\n\t\t\tthis._ghostInput = BX.remove(this._ghostInput);\n\t\t}\n\t}\n\n\tensureGhostCreated()\n\t{\n\t\tif(this._ghostInput)\n\t\t{\n\t\t\treturn this._ghostInput;\n\t\t}\n\n\t\tthis._ghostInput = BX.create('div', {\n\t\t\tprops: { className: 'crm-entity-stream-content-new-comment-textarea-shadow' },\n\t\t\ttext: this._input.value\n\t\t});\n\n\t\tthis._ghostInput.style.width = this._input.offsetWidth + 'px';\n\t\tdocument.body.appendChild(this._ghostInput);\n\t\treturn this._ghostInput;\n\t}\n\n\tresizeForm()\n\t{\n\t\tconst ghost = this.ensureGhostCreated();\n\t\tconst computedStyle = getComputedStyle(this._input);\n\t\tconst diff = parseInt(computedStyle.paddingBottom) +\n\t\t\tparseInt(computedStyle.paddingTop) +\n\t\t\tparseInt(computedStyle.borderTopWidth) +\n\t\t\tparseInt(computedStyle.borderBottomWidth) || 0;\n\n\t\tghost.innerHTML = BX.util.htmlspecialchars(this._input.value.replace(/[\\r\\n]{1}/g, '<br>'));\n\t\tthis._input.style.minHeight = ghost.scrollHeight + diff + 'px'\n\t}\n}\n","import Wait from \"../editors/wait\";\n\n/** @memberof BX.Crm.Timeline.Tools */\nexport default class WaitConfigurationDialog\n{\n\tconstructor()\n\t{\n\t\tthis._id = \"\";\n\t\tthis._settings = {};\n\t\tthis._type = Wait.WaitingType.undefined;\n\t\tthis._duration = 0;\n\t\tthis._target = \"\";\n\t\tthis._targetDates = null;\n\t\tthis._container = null;\n\t\tthis._durationMeasureNode = null;\n\t\tthis._durationInput = null;\n\t\tthis._targetDateNode = null;\n\t\tthis._popup = null;\n\t}\n\n\tinitialize(id, settings)\n\t{\n\t\tthis._id = BX.type.isNotEmptyString(id) ? id : BX.util.getRandomString(4);\n\t\tthis._settings = settings ? settings : {};\n\t\tthis._type = BX.prop.getInteger(this._settings, \"type\", Wait.WaitingType.after);\n\t\tthis._duration = BX.prop.getInteger(this._settings, \"duration\", 1);\n\t\tthis._target = BX.prop.getString(this._settings, \"target\", \"\");\n\t\tthis._targetDates = BX.prop.getArray(this._settings, \"targetDates\", []);\n\n\t\tthis._menuId = this._id + \"_target_date_sel\";\n\t}\n\n\tgetId()\n\t{\n\t\treturn this._id;\n\t}\n\n\tgetType()\n\t{\n\t\treturn this._type;\n\t}\n\n\tsetType(type)\n\t{\n\t\tthis._type = type;\n\t}\n\n\tgetDuration()\n\t{\n\t\treturn this._duration;\n\t}\n\n\tsetDuration(duration)\n\t{\n\t\tthis._duration = duration;\n\t}\n\n\tgetTarget()\n\t{\n\t\treturn this._target;\n\t}\n\n\tsetTarget(target)\n\t{\n\t\tthis._target = target;\n\t}\n\n\tgetMessage(name)\n\t{\n\t\tconst m = WaitConfigurationDialog.messages;\n\t\treturn m.hasOwnProperty(name) ? m[name] : name;\n\t}\n\n\tgetDurationText(duration, enableNumber)\n\t{\n\t\treturn Wait.Helper.getDurationText(duration, enableNumber);\n\t}\n\n\tgetTargetDateCaption(name)\n\t{\n\t\tconst length = this._targetDates.length;\n\t\tfor(let i = 0; i < length; i++)\n\t\t{\n\t\t\tconst info = this._targetDates[i];\n\t\t\tif(info[\"name\"] === name)\n\t\t\t{\n\t\t\t\treturn info[\"caption\"];\n\t\t\t}\n\t\t}\n\n\t\treturn \"\";\n\t}\n\n\topen()\n\t{\n\t\tthis._popup = new BX.PopupWindow(\n\t\t\tthis._id,\n\t\t\tnull, //this._configSelector,\n\t\t\t{\n\t\t\t\tautoHide: true,\n\t\t\t\tdraggable: false,\n\t\t\t\tbindOptions: { forceBindPosition: false },\n\t\t\t\tcloseByEsc: true,\n\t\t\t\tzIndex: 0,\n\t\t\t\tcontent: this.prepareDialogContent(),\n\t\t\t\tevents:\n\t\t\t\t\t{\n\t\t\t\t\t\tonPopupShow: BX.delegate(this.onPopupShow, this),\n\t\t\t\t\t\tonPopupClose: BX.delegate(this.onPopupClose, this),\n\t\t\t\t\t\tonPopupDestroy: BX.delegate(this.onPopupDestroy, this)\n\t\t\t\t\t},\n\t\t\t\tbuttons:\n\t\t\t\t\t[\n\t\t\t\t\t\tnew BX.PopupWindowButton(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttext: this.getMessage(\"select\"),\n\t\t\t\t\t\t\t\tclassName: \"popup-window-button-accept\" ,\n\t\t\t\t\t\t\t\tevents: { click: BX.delegate(this.onSaveButtonClick, this) }\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t),\n\t\t\t\t\t\tnew BX.PopupWindowButtonLink(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttext : BX.message(\"JS_CORE_WINDOW_CANCEL\"),\n\t\t\t\t\t\t\t\tevents: { click: BX.delegate(this.onCancelButtonClick, this) }\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t)\n\t\t\t\t\t]\n\t\t\t}\n\t\t);\n\t\tthis._popup.show();\n\t}\n\n\tclose()\n\t{\n\t\tif(this._popup)\n\t\t{\n\t\t\tthis._popup.close();\n\t\t}\n\t}\n\n\tprepareDialogContent()\n\t{\n\t\tconst container = BX.create(\"div\", {attrs: {className: \"crm-wait-popup-select-block\"}});\n\t\tconst wrapper = BX.create(\"div\", {attrs: {className: \"crm-wait-popup-select-wrapper\"}});\n\t\tcontainer.appendChild(wrapper);\n\n\t\tthis._durationInput = BX.create(\n\t\t\t\"input\",\n\t\t\t{\n\t\t\t\tattrs: { type: \"text\", className: \"crm-wait-popup-settings-input\", value: this._duration },\n\t\t\t\tevents: { keyup: BX.delegate(this.onDurationChange, this) }\n\t\t\t}\n\t\t);\n\n\t\tthis._durationMeasureNode = BX.create(\n\t\t\t\"span\",\n\t\t\t{ attrs: { className: \"crm-wait-popup-settings-title\" }, text: this.getDurationText(this._duration, false) }\n\t\t);\n\n\t\tif(this._type === Wait.WaitingType.after)\n\t\t{\n\t\t\twrapper.appendChild(\n\t\t\t\tBX.create(\"span\", { attrs: { className: \"crm-wait-popup-settings-title\" }, text: this.getMessage(\"prefixTypeAfter\") })\n\t\t\t);\n\t\t\twrapper.appendChild(this._durationInput);\n\t\t\twrapper.appendChild(this._durationMeasureNode);\n\t\t}\n\t\telse\n\t\t{\n\t\t\twrapper.appendChild(\n\t\t\t\tBX.create(\"span\", { attrs: { className: \"crm-wait-popup-settings-title\" }, text: this.getMessage(\"prefixTypeBefore\") })\n\t\t\t);\n\t\t\twrapper.appendChild(this._durationInput);\n\t\t\twrapper.appendChild(this._durationMeasureNode);\n\t\t\twrapper.appendChild(\n\t\t\t\tBX.create(\"span\", { attrs: { className: \"crm-wait-popup-settings-title\" }, text: \" \" + this.getMessage(\"targetPrefixTypeBefore\") })\n\t\t\t);\n\n\t\t\tthis._targetDateNode = BX.create(\n\t\t\t\t\"span\",\n\t\t\t\t{\n\t\t\t\t\tattrs: { className: \"crm-automation-popup-settings-link\" },\n\t\t\t\t\ttext: this.getTargetDateCaption(this._target),\n\t\t\t\t\tevents: { click: BX.delegate(this.toggleTargetMenu, this) }\n\t\t\t\t}\n\t\t\t);\n\t\t\twrapper.appendChild(this._targetDateNode);\n\t\t}\n\t\treturn container;\n\t}\n\n\tonDurationChange()\n\t{\n\t\tlet duration = parseInt(this._durationInput.value);\n\t\tif(isNaN(duration) || duration <= 0)\n\t\t{\n\t\t\tduration = 1;\n\t\t}\n\t\tthis._duration = duration;\n\t\tthis._durationMeasureNode.innerHTML = BX.util.htmlspecialchars(this.getDurationText(duration, false));\n\n\t}\n\n\ttoggleTargetMenu()\n\t{\n\t\tif(this.isTargetMenuOpened())\n\t\t{\n\t\t\tthis.closeTargetMenu();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.openTargetMenu();\n\t\t}\n\t}\n\n\tisTargetMenuOpened()\n\t{\n\t\treturn !!BX.PopupMenu.getMenuById(this._menuId);\n\t}\n\n\topenTargetMenu()\n\t{\n\t\tconst menuItems = [];\n\t\tlet i = 0;\n\t\tconst length = this._targetDates.length;\n\t\tfor(; i < length; i++)\n\t\t{\n\t\t\tconst info = this._targetDates[i];\n\n\t\t\tmenuItems.push(\n\t\t\t\t{\n\t\t\t\t\ttext: info[\"caption\"],\n\t\t\t\t\ttitle: info[\"caption\"],\n\t\t\t\t\tvalue: info[\"name\"],\n\t\t\t\t\tonclick: BX.delegate(this.onTargetSelect, this)\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\tBX.PopupMenu.show(\n\t\t\tthis._menuId,\n\t\t\tthis._targetDateNode,\n\t\t\tmenuItems,\n\t\t\t{\n\t\t\t\tzIndex: 200,\n\t\t\t\tautoHide: true,\n\t\t\t\toffsetLeft: BX.pos(this._targetDateNode)[\"width\"] / 2,\n\t\t\t\tangle: { position: 'top', offset: 0 }\n\t\t\t}\n\t\t);\n\t}\n\n\tcloseTargetMenu()\n\t{\n\t\tBX.PopupMenu.destroy(this._menuId);\n\t}\n\n\tonPopupShow(e, item)\n\t{\n\t}\n\n\tonPopupClose()\n\t{\n\t\tif(this._popup)\n\t\t{\n\t\t\tthis._popup.destroy();\n\t\t}\n\n\t\tthis.closeTargetMenu();\n\t}\n\n\tonPopupDestroy()\n\t{\n\t\tif(this._popup)\n\t\t{\n\t\t\tthis._popup = null;\n\t\t}\n\t}\n\n\tonSaveButtonClick(e)\n\t{\n\t\tconst callback = BX.prop.getFunction(this._settings, \"onSave\", null);\n\t\tif(!callback)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst params = {type: this._type};\n\t\tparams[\"duration\"] = this._duration;\n\t\tparams[\"target\"] = this._type === Wait.WaitingType.before ? this._target : \"\";\n\t\tcallback(this, params);\n\t}\n\n\tonCancelButtonClick(e)\n\t{\n\t\tconst callback = BX.prop.getFunction(this._settings, \"onCancel\", null);\n\t\tif(callback)\n\t\t{\n\t\t\tcallback(this);\n\t\t}\n\t}\n\n\tonTargetSelect(e, item)\n\t{\n\t\tconst fieldName = BX.prop.getString(item, \"value\", \"\");\n\t\tif(fieldName !== \"\")\n\t\t{\n\t\t\tthis._target = fieldName;\n\t\t\tthis._targetDateNode.innerHTML = BX.util.htmlspecialchars(this.getTargetDateCaption(fieldName));\n\t\t}\n\n\t\tthis.closeTargetMenu();\n\t\te.preventDefault ? e.preventDefault() : (e.returnValue = false);\n\t}\n\n\tstatic create(id, settings)\n\t{\n\t\tconst self = new WaitConfigurationDialog();\n\t\tself.initialize(id, settings);\n\t\treturn self;\n\t}\n\n\tstatic messages = {};\n}\n","import Editor from \"../editor.js\";\nimport WaitConfigurationDialog from \"../tools/wait-configuration-dialog\";\n\n/** @memberof BX.Crm.Timeline.Editors */\nexport default class Wait extends Editor\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis._serviceUrl = \"\";\n\t\tthis._isRequestRunning = false;\n\t\tthis._isLocked = false;\n\n\t\tthis._hideButtonsOnBlur = false;\n\t\t//region Config\n\t\tthis._type = Wait.WaitingType.after;\n\t\tthis._duration = 1;\n\t\tthis._target = \"\";\n\t\tthis._configContainer = null;\n\t\tthis._configSelector = null;\n\t\t//endregion\n\n\t\tthis._isMenuShown = false;\n\t\tthis._menu = null;\n\t\tthis._configDialog = null;\n\t}\n\n\tdoInitialize()\n\t{\n\t\tthis._configContainer = BX(this.getSetting(\"configContainer\"));\n\t\tthis._serviceUrl = this.getSetting(\"serviceUrl\", \"\");\n\n\t\tconst config = BX.prop.getObject(this._settings, \"config\", {});\n\t\tthis._type = Wait.WaitingType.resolveTypeId(\n\t\t\tBX.prop.getString(\n\t\t\t\tconfig,\n\t\t\t\t\"type\",\n\t\t\t\tWait.WaitingType.names.after\n\t\t\t)\n\t\t);\n\t\tthis._duration = BX.prop.getInteger(config, \"duration\", 1);\n\t\tthis._target = BX.prop.getString(config, \"target\", \"\");\n\t\tthis._targetDates = BX.prop.getArray(this._settings, \"targetDates\", []);\n\t\tthis.layoutConfigurationSummary();\n\t}\n\n\tgetDurationText(duration, enableNumber)\n\t{\n\t\treturn Wait.Helper.getDurationText(duration, enableNumber);\n\t}\n\n\tgetTargetDateCaption(name)\n\t{\n\t\tlet i = 0;\n\t\tconst length = this._targetDates.length;\n\t\tfor(; i < length; i++)\n\t\t{\n\t\t\tconst info = this._targetDates[i];\n\t\t\tif(info[\"name\"] === name)\n\t\t\t{\n\t\t\t\treturn info[\"caption\"];\n\t\t\t}\n\t\t}\n\n\t\treturn \"\";\n\t}\n\n\tonSelectorClick(e)\n\t{\n\t\tif(!this._isMenuShown)\n\t\t{\n\t\t\tthis.openMenu();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.closeMenu();\n\t\t}\n\t\te.preventDefault ? e.preventDefault() : (e.returnValue = false);\n\t}\n\n\topenMenu()\n\t{\n\t\tif(this._isMenuShown)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst handler = BX.delegate(this.onMenuItemClick, this);\n\n\t\tconst menuItems =\n\t\t\t[\n\t\t\t\t{id: \"day_1\", text: this.getMessage(\"oneDay\"), onclick: handler},\n\t\t\t\t{id: \"day_2\", text: this.getMessage(\"twoDays\"), onclick: handler},\n\t\t\t\t{id: \"day_3\", text: this.getMessage(\"threeDays\"), onclick: handler},\n\t\t\t\t{id: \"week_1\", text: this.getMessage(\"oneWeek\"), onclick: handler},\n\t\t\t\t{id: \"week_2\", text: this.getMessage(\"twoWeek\"), onclick: handler},\n\t\t\t\t{id: \"week_3\", text: this.getMessage(\"threeWeeks\"), onclick: handler}\n\t\t\t];\n\n\t\tconst customMenu = {id: \"custom\", text: this.getMessage(\"custom\"), items: []};\n\t\tcustomMenu[\"items\"].push({ id: \"afterDays\", text: this.getMessage(\"afterDays\"), onclick: handler });\n\t\tif(this._targetDates.length > 0)\n\t\t{\n\t\t\tcustomMenu[\"items\"].push({ id: \"beforeDate\", text: this.getMessage(\"beforeDate\"), onclick: handler });\n\t\t}\n\t\tmenuItems.push(customMenu);\n\n\t\tBX.PopupMenu.show(\n\t\t\tthis._id,\n\t\t\tthis._configSelector,\n\t\t\tmenuItems,\n\t\t\t{\n\t\t\t\toffsetTop: 0,\n\t\t\t\toffsetLeft: 36,\n\t\t\t\tangle: { position: \"top\", offset: 0 },\n\t\t\t\tevents:\n\t\t\t\t\t{\n\t\t\t\t\t\tonPopupShow: BX.delegate(this.onMenuShow, this),\n\t\t\t\t\t\tonPopupClose: BX.delegate(this.onMenuClose, this),\n\t\t\t\t\t\tonPopupDestroy: BX.delegate(this.onMenuDestroy, this)\n\t\t\t\t\t}\n\t\t\t}\n\t\t);\n\n\t\tthis._menu = BX.PopupMenu.currentItem;\n\t}\n\n\tcloseMenu()\n\t{\n\t\tif(!this._isMenuShown)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif(this._menu)\n\t\t{\n\t\t\tthis._menu.close();\n\t\t}\n\t}\n\n\tonMenuItemClick(e, item)\n\t{\n\t\tthis.closeMenu();\n\n\t\tif(item.id === \"afterDays\" || item.id === \"beforeDate\")\n\t\t{\n\t\t\tthis.openConfigDialog(\n\t\t\t\titem.id === \"afterDays\" ? Wait.WaitingType.after : Wait.WaitingType.before\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\n\t\tconst params = {type: Wait.WaitingType.after};\n\t\tif(item.id === \"day_1\")\n\t\t{\n\t\t\tparams[\"duration\"] = 1;\n\t\t}\n\t\telse if(item.id === \"day_2\")\n\t\t{\n\t\t\tparams[\"duration\"] = 2;\n\t\t}\n\t\telse if(item.id === \"day_3\")\n\t\t{\n\t\t\tparams[\"duration\"] = 3;\n\t\t}\n\t\tif(item.id === \"week_1\")\n\t\t{\n\t\t\tparams[\"duration\"] = 7;\n\t\t}\n\t\telse if(item.id === \"week_2\")\n\t\t{\n\t\t\tparams[\"duration\"] = 14;\n\t\t}\n\t\telse if(item.id === \"week_3\")\n\t\t{\n\t\t\tparams[\"duration\"] = 21;\n\t\t}\n\t\tthis.saveConfiguration(params);\n\t}\n\n\topenConfigDialog(type)\n\t{\n\t\tif(!this._configDialog)\n\t\t{\n\t\t\tthis._configDialog = WaitConfigurationDialog.create(\n\t\t\t\t\"\",\n\t\t\t\t{\n\t\t\t\t\ttargetDates: this._targetDates,\n\t\t\t\t\tonSave: BX.delegate(this.onConfigDialogSave, this),\n\t\t\t\t\tonCancel: BX.delegate(this.onConfigDialogCancel, this)\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\tthis._configDialog.setType(type);\n\t\tthis._configDialog.setDuration(this._duration);\n\n\t\tlet target = this._target;\n\t\tif(target === \"\" && this._targetDates.length > 0)\n\t\t{\n\t\t\ttarget = this._targetDates[0][\"name\"];\n\t\t}\n\t\tthis._configDialog.setTarget(target);\n\t\tthis._configDialog.open();\n\t}\n\n\tonConfigDialogSave(sender, params)\n\t{\n\t\tthis.saveConfiguration(params);\n\t\tthis._configDialog.close();\n\t}\n\n\tonConfigDialogCancel(sender)\n\t{\n\t\tthis._configDialog.close();\n\t}\n\n\tonMenuShow()\n\t{\n\t\tthis._isMenuShown = true;\n\t}\n\n\tonMenuClose()\n\t{\n\t\tif(this._menu && this._menu.popupWindow)\n\t\t{\n\t\t\tthis._menu.popupWindow.destroy();\n\t\t}\n\t}\n\n\tonMenuDestroy()\n\t{\n\t\tthis._isMenuShown = false;\n\t\tthis._menu = null;\n\n\t\tif(typeof(BX.PopupMenu.Data[this._id]) !== \"undefined\")\n\t\t{\n\t\t\tdelete(BX.PopupMenu.Data[this._id]);\n\t\t}\n\t}\n\n\tsaveConfiguration(params)\n\t{\n\t\t//region Parse params\n\t\tthis._type = BX.prop.getInteger(params, \"type\", Wait.WaitingType.after);\n\t\tthis._duration = BX.prop.getInteger(params, \"duration\", 0);\n\t\tif(this._duration <= 0)\n\t\t{\n\t\t\tthis._duration = 1;\n\t\t}\n\t\tthis._target = this._type === Wait.WaitingType.before\n\t\t\t? BX.prop.getString(params, \"target\", \"\") : \"\";\n\t\t//endregion\n\t\t//region Save settings\n\t\tconst optionName = this._manager.getId().toLowerCase();\n\t\tBX.userOptions.save(\n\t\t\t\"crm.timeline.wait\",\n\t\t\toptionName,\n\t\t\t\"type\",\n\t\t\tthis._type === Wait.WaitingType.after ? \"after\" : \"before\"\n\t\t);\n\n\t\tBX.userOptions.save(\n\t\t\t\"crm.timeline.wait\",\n\t\t\toptionName,\n\t\t\t\"duration\",\n\t\t\tthis._duration\n\t\t);\n\n\t\tBX.userOptions.save(\n\t\t\t\"crm.timeline.wait\",\n\t\t\toptionName,\n\t\t\t\"target\",\n\t\t\tthis._target\n\t\t);\n\t\t//endregion\n\t\tthis.layoutConfigurationSummary();\n\t}\n\n\tgetSummaryHtml()\n\t{\n\t\tif(this._type === Wait.WaitingType.before)\n\t\t{\n\t\t\treturn (\n\t\t\t\tthis.getMessage(\"completionTypeBefore\")\n\t\t\t\t\t.replace(\"#DURATION#\", this.getDurationText(this._duration, true))\n\t\t\t\t\t.replace(\"#TARGET_DATE#\", this.getTargetDateCaption(this._target))\n\t\t\t);\n\t\t}\n\n\t\treturn (\n\t\t\tthis.getMessage(\"completionTypeAfter\")\n\t\t\t\t.replace(\"#DURATION#\", this.getDurationText(this._duration, true))\n\t\t);\n\t}\n\n\tgetSummaryText()\n\t{\n\t\treturn BX.util.strip_tags(this.getSummaryHtml());\n\t}\n\n\tlayoutConfigurationSummary()\n\t{\n\t\tthis._configContainer.innerHTML = this.getSummaryHtml();\n\t\tthis._configSelector = this._configContainer.querySelector(\"a\");\n\t\tif(this._configSelector)\n\t\t{\n\t\t\tBX.bind(this._configSelector, \"click\", BX.delegate(this.onSelectorClick, this));\n\t\t}\n\t}\n\n\tpostpone(id, offset, callback)\n\t{\n\t\tBX.ajax(\n\t\t\t{\n\t\t\t\turl: this._serviceUrl,\n\t\t\t\tmethod: \"POST\",\n\t\t\t\tdataType: \"json\",\n\t\t\t\tdata:\n\t\t\t\t\t{\n\t\t\t\t\t\t\"ACTION\": \"POSTPONE_WAIT\",\n\t\t\t\t\t\t\"DATA\": { \"ID\": id, \"OFFSET\": offset }\n\t\t\t\t\t},\n\t\t\t\tonsuccess: callback\n\t\t\t}\n\t\t);\n\t}\n\n\tcomplete(id, completed, callback)\n\t{\n\t\tBX.ajax(\n\t\t\t{\n\t\t\t\turl: this._serviceUrl,\n\t\t\t\tmethod: \"POST\",\n\t\t\t\tdataType: \"json\",\n\t\t\t\tdata:\n\t\t\t\t\t{\n\t\t\t\t\t\t\"ACTION\": \"COMPLETE_WAIT\",\n\t\t\t\t\t\t\"DATA\": { \"ID\": id, \"COMPLETED\": completed ? 'Y' : 'N' }\n\t\t\t\t\t},\n\t\t\t\tonsuccess: callback\n\t\t\t}\n\t\t);\n\t}\n\n\tsave()\n\t{\n\t\tif(this._isRequestRunning || this._isLocked)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tlet description = this.getSummaryText();\n\t\tconst comment = BX.util.trim(this._input.value);\n\t\tif(comment !== \"\")\n\t\t{\n\t\t\tdescription += \"\\n\" + comment;\n\t\t}\n\n\t\tconst data =\n\t\t\t{\n\t\t\t\tID: 0,\n\t\t\t\ttypeId: this._type,\n\t\t\t\tduration: this._duration,\n\t\t\t\ttargetFieldName: this._target,\n\t\t\t\tsubject: \"\",\n\t\t\t\tdescription: description,\n\t\t\t\tcompleted: 0,\n\t\t\t\townerType: BX.CrmEntityType.resolveName(this._ownerTypeId),\n\t\t\t\townerID: this._ownerId\n\t\t\t};\n\n\t\tBX.ajax(\n\t\t\t{\n\t\t\t\turl: this._serviceUrl,\n\t\t\t\tmethod: \"POST\",\n\t\t\t\tdataType: \"json\",\n\t\t\t\tdata:\n\t\t\t\t\t{\n\t\t\t\t\t\t\"ACTION\": \"SAVE_WAIT\",\n\t\t\t\t\t\t\"DATA\": data\n\t\t\t\t\t},\n\t\t\t\tonsuccess: BX.delegate(this.onSaveSuccess, this),\n\t\t\t\tonfailure: BX.delegate(this.onSaveFailure, this)\n\t\t\t}\n\t\t);\n\t\tthis._isRequestRunning = this._isLocked = true;\n\t}\n\n\tcancel()\n\t{\n\t\tthis._input.value = \"\";\n\t\tthis._input.style.minHeight = \"\";\n\t\tthis.release();\n\t}\n\n\tonSaveSuccess(data)\n\t{\n\t\tthis._isRequestRunning = this._isLocked = false;\n\n\t\tconst error = BX.prop.getString(data, \"ERROR\", \"\");\n\t\tif(error !== \"\")\n\t\t{\n\t\t\talert(error);\n\t\t\treturn;\n\t\t}\n\n\t\tthis._input.value = \"\";\n\t\tthis._input.style.minHeight = \"\";\n\t\tthis._manager.processEditingCompletion(this);\n\t\tthis.release();\n\t}\n\n\tonSaveFailure()\n\t{\n\t\tthis._isRequestRunning = this._isLocked = false;\n\t}\n\n\tgetMessage(name)\n\t{\n\t\tconst m = Wait.messages;\n\t\treturn m.hasOwnProperty(name) ? m[name] : name;\n\t}\n\n\tstatic create(id, settings)\n\t{\n\t\tconst self = new Wait();\n\t\tself.initialize(id, settings);\n\t\tthis.items[self.getId()] = self;\n\t\treturn self;\n\t}\n\n\tstatic WaitingType = {\n\t\tundefined: 0,\n\t\tafter: 1,\n\t\tbefore: 2,\n\n\t\tnames:\n\t\t\t{\n\t\t\t\tafter: \"after\",\n\t\t\t\tbefore: \"before\"\n\t\t\t},\n\t\tresolveTypeId: function(name)\n\t\t{\n\t\t\tif(name === this.names.after)\n\t\t\t{\n\t\t\t\treturn this.after;\n\t\t\t}\n\t\t\telse if(name === this.names.before)\n\t\t\t{\n\t\t\t\treturn this.before;\n\t\t\t}\n\n\t\t\treturn this.undefined;\n\t\t}\n\t};\n\n\tstatic messages = {};\n\tstatic items = {};\n\n\tstatic Helper =\n\t{\n\t\tgetDurationText: function(duration, enableNumber)\n\t\t{\n\t\t\tenableNumber = !!enableNumber;\n\n\t\t\tlet result = \"\";\n\t\t\tlet type = \"D\";\n\t\t\tif(enableNumber)\n\t\t\t{\n\t\t\t\tif((duration % 7) === 0)\n\t\t\t\t{\n\t\t\t\t\tduration = duration / 7;\n\t\t\t\t\ttype = \"W\";\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (type === \"W\")\n\t\t\t{\n\t\t\t\tresult = BX.Loc.getMessagePlural('CRM_TIMELINE_WAIT_WEEK', duration);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresult = BX.Loc.getMessagePlural('CRM_TIMELINE_WAIT_DAY', duration);\n\t\t\t}\n\n\t\t\tif(enableNumber)\n\t\t\t{\n\t\t\t\tresult = duration.toString() + \" \" + result;\n\t\t\t}\n\t\t\treturn result;\n\t\t},\n\t\tgetMessage: function(name)\n\t\t{\n\t\t\treturn Wait.Helper.messages.hasOwnProperty(name) ? Wait.Helper.messages[name] : name;\n\t\t},\n\t\tmessages: {},\n\t}\n}\n","import Editor from \"../editor\";\n\n/** @memberof BX.Crm.Timeline.Editors */\nexport default class Sms extends Editor\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis._history = null;\n\t\tthis._serviceUrl = \"\";\n\n\t\tthis._isRequestRunning = false;\n\t\tthis._isLocked = false;\n\n\t\tthis._senderId = null;\n\t\tthis._from = null;\n\t\tthis._commEntityTypeId = null;\n\t\tthis._commEntityId = null;\n\t\tthis._to = null;\n\n\t\tthis._canUse = null;\n\t\tthis._canSendMessage = null;\n\t\tthis._manageUrl = '';\n\t\tthis._senders = [];\n\t\tthis._fromList = [];\n\t\tthis._toList = [];\n\t\tthis._defaults = {};\n\t\tthis._communications = [];\n\n\t\tthis._menu = null;\n\t\tthis._isMenuShown = false;\n\t\tthis._shownMenuId = null;\n\t\tthis._documentSelector = null;\n\t\tthis._source = null;\n\n\t\tthis._paymentId = null;\n\t\tthis._shipmentId = null;\n\n\t\tthis._templateId = null;\n\t\tthis._templatesContainer = null;\n\t\tthis._templateFieldHintNode = null;\n\t\tthis._templateSelectorNode = null;\n\t\tthis._templateTemplateTitleNode = null;\n\t\tthis._templatePreviewNode = null;\n\t\tthis._templateSelectorMenuId = 'CrmTimelineSmsEditorTemplateSelector';\n\t\tthis._templateFieldHintHandler = BX.delegate(this.onTemplateHintIconClick, this);\n\t\tthis._templateSeletorClickHandler = BX.delegate(this.onTemplateSelectClick, this);\n\t\tthis._selectTemplateHandler = BX.delegate(this.onSelectTemplate, this);\n\t}\n\n\tdoInitialize()\n\t{\n\t\tthis._serviceUrl = BX.util.remove_url_param(\n\t\t\tthis.getSetting(\"serviceUrl\", \"\"),\n\t\t\t['sessid', 'site']\n\t\t);\n\n\t\tconst config = BX.prop.getObject(this._settings, \"config\", {});\n\n\t\tthis._canUse = BX.prop.getBoolean(config, \"canUse\", false);\n\t\tthis._canSendMessage = BX.prop.getBoolean(config, \"canSendMessage\", false);\n\t\tthis._manageUrl = BX.prop.getString(config, \"manageUrl\", '');\n\t\tthis._senders = BX.prop.getArray(config, \"senders\", []);\n\t\tthis._defaults = BX.prop.getObject(config, \"defaults\", {senderId:null,from:null});\n\t\tthis._communications = BX.prop.getArray(config, \"communications\", []);\n\t\tthis._isSalescenterEnabled = BX.prop.getBoolean(config, \"isSalescenterEnabled\", false);\n\t\tthis._isDocumentsEnabled = BX.prop.getBoolean(config, \"isDocumentsEnabled\", false);\n\t\tif(this._isDocumentsEnabled)\n\t\t{\n\t\t\tthis._documentsProvider = BX.prop.getString(config, \"documentsProvider\", '');\n\t\t\tthis._documentsValue = BX.prop.getString(config, \"documentsValue\", '');\n\t\t}\n\t\tthis._isFilesEnabled = BX.prop.getBoolean(config, \"isFilesEnabled\", false);\n\t\tif(this._isFilesEnabled)\n\t\t{\n\t\t\tthis._diskUrls = BX.prop.getObject(config, \"diskUrls\");\n\t\t\tthis._isFilesExternalLinkEnabled = BX.prop.getBoolean(config, \"isFilesExternalLinkEnabled\", true);\n\t\t}\n\n\t\tthis._senderSelectorNode = this._container.querySelector('[data-role=\"sender-selector\"]');\n\t\tthis._fromContainerNode = this._container.querySelector('[data-role=\"from-container\"]');\n\t\tthis._fromSelectorNode = this._container.querySelector('[data-role=\"from-selector\"]');\n\t\tthis._clientContainerNode = this._container.querySelector('[data-role=\"client-container\"]');\n\t\tthis._clientSelectorNode = this._container.querySelector('[data-role=\"client-selector\"]');\n\t\tthis._toSelectorNode = this._container.querySelector('[data-role=\"to-selector\"]');\n\t\tthis._messageLengthCounterWrapperNode = this._container.querySelector('[data-role=\"message-length-counter-wrap\"]');\n\t\tthis._messageLengthCounterNode = this._container.querySelector('[data-role=\"message-length-counter\"]');\n\t\tthis._salescenterStarter = this._container.querySelector('[data-role=\"salescenter-starter\"]');\n\t\tthis._smsDetailSwitcher = this._container.querySelector('[data-role=\"sms-detail-switcher\"]');\n\t\tthis._smsDetail = this._container.querySelector('[data-role=\"sms-detail\"]');\n\t\tthis._documentSelectorButton = this._container.querySelector('[data-role=\"sms-document-selector\"]');\n\t\tthis._fileSelectorButton = this._container.querySelector('[data-role=\"sms-file-selector\"]');\n\t\tthis._fileUploadZone = this._container.querySelector('[data-role=\"sms-file-upload-zone\"]');\n\t\tthis._fileUploadLabel = this._container.querySelector('[data-role=\"sms-file-upload-label\"]');\n\t\tthis._fileSelectorBitrix = this._container.querySelector('[data-role=\"sms-file-selector-bitrix\"]');\n\t\tthis._fileExternalLinkDisabledContent = this._container.querySelector('[data-role=\"sms-file-external-link-disabled\"]');\n\n\t\tthis._templatesContainer = BX(this.getSetting(\"templatesContainer\"));\n\t\tif (this._templatesContainer)\n\t\t{\n\t\t\tthis._templateFieldHintNode = this._templatesContainer.querySelector('[data-role=\"hint\"]');\n\t\t\tthis._templateSelectorNode = this._templatesContainer.querySelector('[data-role=\"template-selector\"]');\n\t\t\tthis._templateTemplateTitleNode = this._templatesContainer.querySelector('[data-role=\"template-title\"]');\n\t\t\tthis._templatePreviewNode = this._templatesContainer.querySelector('[data-role=\"preview\"]');\n\t\t}\n\t\tif (this._templateFieldHintNode)\n\t\t{\n\t\t\tBX.bind(this._templateFieldHintNode, \"click\", this._templateFieldHintHandler);\n\t\t}\n\t\tif (this._templateSelectorNode)\n\t\t{\n\t\t\tBX.bind(this._templateSelectorNode, \"click\", this._templateSeletorClickHandler);\n\t\t}\n\n\t\tif (this._canUse && this._senders.length > 0)\n\t\t{\n\t\t\tthis.initSenderSelector();\n\t\t}\n\t\tif (this._canUse && this._canSendMessage)\n\t\t{\n\t\t\tthis.initDetailSwitcher();\n\t\t\tthis.initFromSelector();\n\t\t\tthis.initClientContainer();\n\t\t\tthis.initClientSelector();\n\t\t\tthis.initToSelector();\n\t\t\tthis.initMessageLengthCounter();\n\t\t\tthis.setMessageLengthCounter();\n\t\t\tif(this._isDocumentsEnabled)\n\t\t\t{\n\t\t\t\tthis.initDocumentSelector();\n\t\t\t}\n\t\t\tif(this._isFilesEnabled)\n\t\t\t{\n\t\t\t\tthis.initFileSelector();\n\t\t\t}\n\t\t}\n\n\t\tif(this._isSalescenterEnabled)\n\t\t{\n\t\t\tthis.initSalescenterApplication();\n\t\t}\n\t}\n\n\tinitDetailSwitcher()\n\t{\n\t\tBX.bind(this._smsDetailSwitcher, 'click', function()\n\t\t{\n\t\t\tif(this._smsDetail.classList.contains('hidden'))\n\t\t\t{\n\t\t\t\tthis._smsDetail.classList.remove('hidden');\n\t\t\t\tthis._smsDetailSwitcher.innerText = BX.message('CRM_TIMELINE_COLLAPSE');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis._smsDetail.classList.add('hidden');\n\t\t\t\tthis._smsDetailSwitcher.innerText = BX.message('CRM_TIMELINE_DETAILS');\n\t\t\t}\n\t\t}.bind(this));\n\t}\n\n\tinitSenderSelector()\n\t{\n\t\tconst defaultSenderId = this._defaults.senderId;\n\t\tlet defaultSender = this._senders[0].canUse ? this._senders[0] : null;\n\t\tlet restSender = null;\n\t\tconst menuItems = [];\n\t\tconst handler = this.onSenderSelectorClick.bind(this);\n\n\t\tfor (let i = 0; i < this._senders.length; ++i)\n\t\t{\n\t\t\tif (this._senders[i].canUse && this._senders[i].fromList.length && (this._senders[i].id === defaultSenderId || !defaultSender))\n\t\t\t{\n\t\t\t\tdefaultSender = this._senders[i];\n\t\t\t}\n\n\t\t\tif (this._senders[i].id === 'rest')\n\t\t\t{\n\t\t\t\trestSender = this._senders[i];\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tmenuItems.push({\n\t\t\t\ttext: this._senders[i].name,\n\t\t\t\tsender: this._senders[i],\n\t\t\t\tonclick: handler,\n\t\t\t\tclassName: (!this._senders[i].canUse || !this._senders[i].fromList.length)\n\t\t\t\t\t? 'crm-timeline-popup-menu-item-disabled menu-popup-no-icon' : ''\n\t\t\t});\n\t\t}\n\n\t\tif (restSender)\n\t\t{\n\t\t\tif (restSender.fromList.length > 0)\n\t\t\t{\n\t\t\t\tmenuItems.push({delimiter: true});\n\t\t\t\tfor (let i = 0; i < restSender.fromList.length; ++i)\n\t\t\t\t{\n\t\t\t\t\tmenuItems.push({\n\t\t\t\t\t\ttext: restSender.fromList[i].name,\n\t\t\t\t\t\tsender: restSender,\n\t\t\t\t\t\tfrom: restSender.fromList[i],\n\t\t\t\t\t\tonclick: handler\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\tmenuItems.push({delimiter: true}, {\n\t\t\t\ttext: BX.message('CRM_TIMELINE_SMS_REST_MARKETPLACE'),\n\t\t\t\thref: '/marketplace/category/crm_robot_sms/',\n\t\t\t\ttarget: '_blank'\n\t\t\t});\n\t\t}\n\n\t\tif (defaultSender)\n\t\t{\n\t\t\tthis.setSender(defaultSender);\n\t\t}\n\n\t\tBX.bind(this._senderSelectorNode, 'click', this.openMenu.bind(this, 'sender', this._senderSelectorNode, menuItems));\n\t}\n\n\tonSenderSelectorClick(e, item)\n\t{\n\t\tif (item.sender)\n\t\t{\n\t\t\tif (!item.sender.canUse || !item.sender.fromList.length)\n\t\t\t{\n\t\t\t\tconst url = BX.Uri.addParam(item.sender.manageUrl, {'IFRAME': 'Y'});\n\t\t\t\tconst slider = BX.SidePanel.Instance.getTopSlider();\n\t\t\t\tconst options = {\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tonClose: function () {\n\t\t\t\t\t\t\tif (slider)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tslider.reload();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonCloseComplete: function () {\n\t\t\t\t\t\t\tif (!slider)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tdocument.location.reload();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tif (item.sender.id === 'ednaru')\n\t\t\t\t{\n\t\t\t\t\toptions.width = 700;\n\t\t\t\t}\n\t\t\t\tBX.SidePanel.Instance.open(url, options);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.setSender(item.sender, true);\n\t\t\tconst from = item.from ? item.from : item.sender.fromList[0];\n\t\t\tthis.setFrom(from, true);\n\t\t}\n\t\tthis._menu.close();\n\t}\n\n\tsetSender(sender, setAsDefault)\n\t{\n\t\tthis._senderId = sender.id;\n\t\tthis._fromList = sender.fromList;\n\t\tthis._senderSelectorNode.textContent = sender.shortName ? sender.shortName : sender.name;\n\n\t\tthis._templateId = null;\n\t\tif (sender.isTemplatesBased)\n\t\t{\n\t\t\tthis.showNode(this._templatesContainer);\n\t\t\tthis.hideNode(this._messageLengthCounterWrapperNode);\n\t\t\tthis.hideNode(this._fileSelectorButton);\n\t\t\tthis.hideNode(this._documentSelectorButton);\n\t\t\tthis.hideNode(this._input);\n\t\t\tthis.toggleTemplateSelectAvailability();\n\t\t\tthis.toggleSaveButton();\n\t\t\tthis._hideButtonsOnBlur = false;\n\t\t\tthis.onFocus();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.hideNode(this._templatesContainer);\n\t\t\tthis.showNode(this._messageLengthCounterWrapperNode);\n\t\t\tthis.showNode(this._fileSelectorButton);\n\t\t\tthis.showNode(this._documentSelectorButton);\n\t\t\tthis.showNode(this._input);\n\t\t\tthis.setMessageLengthCounter();\n\t\t\tthis._hideButtonsOnBlur = true;\n\t\t}\n\n\t\tconst visualFn = sender.id === 'rest' ? 'hide' : 'show';\n\t\tBX[visualFn](this._fromContainerNode);\n\n\t\tif (setAsDefault)\n\t\t{\n\t\t\tBX.userOptions.save(\"crm\", \"sms_manager_editor\", \"senderId\", this._senderId);\n\t\t}\n\t}\n\n\tshowNode(node)\n\t{\n\t\tif (node)\n\t\t{\n\t\t\tnode.style.display = \"\";\n\t\t}\n\t}\n\n\thideNode(node)\n\t{\n\t\tif (node)\n\t\t{\n\t\t\tnode.style.display = \"none\";\n\t\t}\n\t}\n\n\tinitFromSelector()\n\t{\n\t\tif (this._fromList.length > 0)\n\t\t{\n\t\t\tconst defaultFromId = this._defaults.from || this._fromList[0].id;\n\t\t\tlet defaultFrom = null;\n\t\t\tfor (let i = 0; i < this._fromList.length; ++i)\n\t\t\t{\n\t\t\t\tif (this._fromList[i].id === defaultFromId || !defaultFrom)\n\t\t\t\t{\n\t\t\t\t\tdefaultFrom = this._fromList[i];\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (defaultFrom)\n\t\t\t{\n\t\t\t\tthis.setFrom(defaultFrom);\n\t\t\t}\n\t\t}\n\n\t\tBX.bind(this._fromSelectorNode, 'click', this.onFromSelectorClick.bind(this));\n\t}\n\n\tonFromSelectorClick(e)\n\t{\n\t\tconst menuItems = [];\n\t\tconst handler = this.onFromSelectorItemClick.bind(this);\n\n\t\tfor (let i = 0; i < this._fromList.length; ++i)\n\t\t{\n\t\t\tmenuItems.push({\n\t\t\t\ttext: this._fromList[i].name,\n\t\t\t\tfrom: this._fromList[i],\n\t\t\t\tonclick: handler\n\t\t\t});\n\t\t}\n\n\t\tthis.openMenu('from_'+this._senderId, this._fromSelectorNode, menuItems, e);\n\t}\n\n\tonFromSelectorItemClick(e, item)\n\t{\n\t\tif (item.from)\n\t\t{\n\t\t\tthis.setFrom(item.from, true);\n\t\t}\n\t\tthis._menu.close();\n\t}\n\n\tsetFrom(from, setAsDefault)\n\t{\n\t\tthis._from = from.id;\n\n\t\tif (this._senderId === 'rest')\n\t\t{\n\t\t\tthis._senderSelectorNode.textContent = from.name;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis._fromSelectorNode.textContent = from.name;\n\t\t}\n\n\t\tif (setAsDefault)\n\t\t{\n\t\t\tBX.userOptions.save(\"crm\", \"sms_manager_editor\", \"from\", this._from);\n\t\t}\n\t}\n\n\tinitClientContainer()\n\t{\n\t\tif (this._communications.length === 0)\n\t\t{\n\t\t\tBX.hide(this._clientContainerNode);\n\t\t}\n\t}\n\n\tinitClientSelector()\n\t{\n\t\tconst menuItems = [];\n\t\tconst handler = this.onClientSelectorClick.bind(this);\n\n\t\tfor (let i = 0; i < this._communications.length; ++i)\n\t\t{\n\t\t\tmenuItems.push({\n\t\t\t\ttext: this._communications[i].caption,\n\t\t\t\tclient: this._communications[i],\n\t\t\t\tonclick: handler\n\t\t\t});\n\t\t\tif (i === 0)\n\t\t\t{\n\t\t\t\tthis.setClient(this._communications[i]);\n\t\t\t}\n\t\t}\n\n\t\tBX.bind(this._clientSelectorNode, 'click', this.openMenu.bind(this, 'comm', this._clientSelectorNode, menuItems));\n\t}\n\n\tonClientSelectorClick(e, item)\n\t{\n\t\tif (item.client)\n\t\t{\n\t\t\tthis.setClient(item.client);\n\t\t}\n\t\tthis._menu.close();\n\t}\n\n\tsetClient(client)\n\t{\n\t\tthis._commEntityTypeId = client.entityTypeId;\n\t\tthis._commEntityId = client.entityId;\n\t\tthis._clientSelectorNode.textContent = client.caption;\n\t\tthis._toList = client.phones;\n\t\tthis.setTo(client.phones[0]);\n\t}\n\n\tinitToSelector()\n\t{\n\t\tBX.bind(this._toSelectorNode, 'click', this.onToSelectorClick.bind(this));\n\t}\n\n\tonToSelectorClick(e)\n\t{\n\t\tconst menuItems = [];\n\t\tconst handler = this.onToSelectorItemClick.bind(this);\n\n\t\tfor (let i = 0; i < this._toList.length; ++i)\n\t\t{\n\t\t\tmenuItems.push({\n\t\t\t\ttext: this._toList[i].valueFormatted || this._toList[i].value,\n\t\t\t\tto: this._toList[i],\n\t\t\t\tonclick: handler\n\t\t\t});\n\t\t}\n\n\t\tthis.openMenu('to_'+this._commEntityTypeId+'_'+this._commEntityId, this._toSelectorNode, menuItems, e);\n\t}\n\n\tonToSelectorItemClick(e, item)\n\t{\n\t\tif (item.to)\n\t\t{\n\t\t\tthis.setTo(item.to);\n\t\t}\n\t\tthis._menu.close();\n\t}\n\n\tsetTo(to)\n\t{\n\t\tthis._to = to.value;\n\t\tthis._toSelectorNode.textContent = to.valueFormatted || to.value;\n\t}\n\n\topenMenu(menuId, bindElement, menuItems, e)\n\t{\n\t\tif (this._shownMenuId === menuId)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif(this._shownMenuId !== null && this._menu)\n\t\t{\n\t\t\tthis._menu.close();\n\t\t\tthis._shownMenuId = null;\n\t\t}\n\n\t\tBX.PopupMenu.show(\n\t\t\tthis._id + menuId,\n\t\t\tbindElement,\n\t\t\tmenuItems,\n\t\t\t{\n\t\t\t\toffsetTop: 0,\n\t\t\t\toffsetLeft: 36,\n\t\t\t\tangle: { position: \"top\", offset: 0 },\n\t\t\t\tevents:\n\t\t\t\t\t{\n\t\t\t\t\t\tonPopupClose: BX.delegate(this.onMenuClose, this)\n\t\t\t\t\t}\n\t\t\t}\n\t\t);\n\n\t\tthis._menu = BX.PopupMenu.currentItem;\n\t\te.preventDefault();\n\t}\n\n\tonMenuClose()\n\t{\n\t\tthis._shownMenuId = null;\n\t\tthis._menu = null;\n\t}\n\n\tinitMessageLengthCounter()\n\t{\n\t\tthis._messageLengthMax = parseInt(this._messageLengthCounterNode.getAttribute('data-length-max'));\n\t\tBX.bind(this._input, 'keyup', this.setMessageLengthCounter.bind(this));\n\t\tBX.bind(this._input, 'cut', this.setMessageLengthCounterDelayed.bind(this));\n\t\tBX.bind(this._input, 'paste', this.setMessageLengthCounterDelayed.bind(this));\n\t}\n\n\tsetMessageLengthCounterDelayed()\n\t{\n\t\tsetTimeout(this.setMessageLengthCounter.bind(this), 0);\n\t}\n\n\tsetMessageLengthCounter()\n\t{\n\t\tconst length = this._input.value.length;\n\t\tthis._messageLengthCounterNode.textContent = length;\n\n\t\tconst classFn = length >= this._messageLengthMax ? 'addClass' : 'removeClass';\n\t\tBX[classFn](this._messageLengthCounterNode, 'crm-entity-stream-content-sms-symbol-counter-number-overhead');\n\n\t\tthis.toggleSaveButton();\n\t}\n\n\ttoggleSaveButton()\n\t{\n\t\tconst sender = this.getSelectedSender();\n\t\tlet enabled;\n\t\tif (!sender || !sender.isTemplatesBased)\n\t\t{\n\t\t\tenabled = this._input.value.length > 0;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tenabled = !!this._templateId;\n\t\t}\n\t\tif (enabled)\n\t\t{\n\t\t\tBX.removeClass(this._saveButton, 'ui-btn-disabled');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tBX.addClass(this._saveButton, 'ui-btn-disabled');\n\t\t}\n\t}\n\n\tsave()\n\t{\n\t\tconst sender = this.getSelectedSender();\n\n\t\tlet text = '';\n\t\tlet templateId = '';\n\n\t\tif (!sender || !sender.isTemplatesBased)\n\t\t{\n\t\t\ttext = this._input.value;\n\t\t\tif (text === '')\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tconst template = this.getSelectedTemplate();\n\t\t\tif (!template)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\ttext = template.PREVIEW;\n\t\t\ttemplateId = template.ID;\n\t\t}\n\n\t\tif (!this._communications.length)\n\t\t{\n\t\t\talert(BX.message('CRM_TIMELINE_SMS_ERROR_NO_COMMUNICATIONS'));\n\t\t\treturn;\n\t\t}\n\n\t\tif(this._isRequestRunning || this._isLocked)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis._isRequestRunning = this._isLocked = true;\n\t\tBX.ajax(\n\t\t\t{\n\t\t\t\turl: BX.util.add_url_param(this._serviceUrl, {\n\t\t\t\t\t\"action\": \"save_sms_message\",\n\t\t\t\t\t\"sender\": this._senderId\n\t\t\t\t}),\n\t\t\t\tmethod: \"POST\",\n\t\t\t\tdataType: \"json\",\n\t\t\t\tdata:\n\t\t\t\t\t{\n\t\t\t\t\t\t'site': BX.message('SITE_ID'),\n\t\t\t\t\t\t'sessid': BX.bitrix_sessid(),\n\t\t\t\t\t\t'source': this._source,\n\t\t\t\t\t\t\"ACTION\": \"SAVE_SMS_MESSAGE\",\n\t\t\t\t\t\t\"SENDER_ID\": this._senderId,\n\t\t\t\t\t\t\"MESSAGE_FROM\": this._from,\n\t\t\t\t\t\t\"MESSAGE_TO\": this._to,\n\t\t\t\t\t\t\"MESSAGE_BODY\": text,\n\t\t\t\t\t\t\"MESSAGE_TEMPLATE\": templateId,\n\t\t\t\t\t\t\"OWNER_TYPE_ID\": this._ownerTypeId,\n\t\t\t\t\t\t\"OWNER_ID\": this._ownerId,\n\t\t\t\t\t\t\"TO_ENTITY_TYPE_ID\": this._commEntityTypeId,\n\t\t\t\t\t\t\"TO_ENTITY_ID\": this._commEntityId,\n\t\t\t\t\t\t\"PAYMENT_ID\": this._paymentId,\n\t\t\t\t\t\t\"SHIPMENT_ID\": this._shipmentId,\n\t\t\t\t\t},\n\t\t\t\tonsuccess: BX.delegate(this.onSaveSuccess, this),\n\t\t\t\tonfailure: BX.delegate(this.onSaveFailure, this)\n\t\t\t}\n\t\t);\n\t}\n\n\tcancel()\n\t{\n\t\tthis._input.value = \"\";\n\t\tthis.setMessageLengthCounter();\n\t\tthis._input.style.minHeight = \"\";\n\t\tthis.release();\n\t}\n\n\tonSaveSuccess(data)\n\t{\n\t\tthis._isRequestRunning = this._isLocked = false;\n\n\t\tconst error = BX.prop.getString(data, \"ERROR\", \"\");\n\t\tif(error !== \"\")\n\t\t{\n\t\t\talert(error);\n\t\t\treturn;\n\t\t}\n\n\t\tthis._input.value = \"\";\n\t\tthis.setMessageLengthCounter();\n\t\tthis._input.style.minHeight = \"\";\n\t\tthis._manager.processEditingCompletion(this);\n\t\tthis.release();\n\t}\n\n\tonSaveFailure()\n\t{\n\t\tthis._isRequestRunning = this._isLocked = false;\n\t}\n\n\tinitSalescenterApplication()\n\t{\n\t\tBX.bind(this._salescenterStarter, 'click', this.startSalescenterApplication.bind(this));\n\t}\n\n\tstartSalescenterApplication()\n\t{\n\t\tBX.loadExt('salescenter.manager').then(function()\n\t\t{\n\t\t\tBX.Salescenter.Manager.openApplication({\n\t\t\t\tdisableSendButton: this._canSendMessage ? '' : 'y',\n\t\t\t\tcontext: 'sms',\n\t\t\t\townerTypeId: this._ownerTypeId,\n\t\t\t\townerId: this._ownerId,\n\t\t\t\tmode: this._ownerTypeId === BX.CrmEntityType.enumeration.deal ? 'payment_delivery' : 'payment',\n\t\t\t}).then(function(result)\n\t\t\t{\n\t\t\t\tif(result && result.get('action'))\n\t\t\t\t{\n\t\t\t\t\tif(result.get('action') === 'sendPage' && result.get('page') && result.get('page').url)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis._input.focus();\n\t\t\t\t\t\tthis._input.value = this._input.value + result.get('page').name + ' ' + result.get('page').url;\n\t\t\t\t\t\tthis.setMessageLengthCounter();\n\t\t\t\t\t}\n\t\t\t\t\telse if (result.get('action') === 'sendPayment' && result.get('order'))\n\t\t\t\t\t{\n\t\t\t\t\t\tthis._input.focus();\n\t\t\t\t\t\tthis._input.value = this._input.value + result.get('order').title;\n\t\t\t\t\t\tthis.setMessageLengthCounter();\n\t\t\t\t\t\tthis._source = 'order';\n\t\t\t\t\t\tthis._paymentId = result.get('order').paymentId;\n\t\t\t\t\t\tthis._shipmentId = result.get('order').shipmentId;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}.bind(this));\n\t\t}.bind(this));\n\t}\n\n\tinitDocumentSelector()\n\t{\n\t\tBX.bind(this._documentSelectorButton, 'click', this.onDocumentSelectorClick.bind(this));\n\t}\n\n\tonDocumentSelectorClick()\n\t{\n\t\tif(!this._documentSelector)\n\t\t{\n\t\t\tBX.loadExt('documentgenerator.selector').then(function()\n\t\t\t{\n\t\t\t\tthis._documentSelector = new BX.DocumentGenerator.Selector.Menu({\n\t\t\t\t\tnode: this._documentSelectorButton,\n\t\t\t\t\tmoduleId: 'crm',\n\t\t\t\t\tprovider: this._documentsProvider,\n\t\t\t\t\tvalue: this._documentsValue,\n\t\t\t\t\tanalyticsLabelPrefix: 'crmTimelineSmsEditor'\n\t\t\t\t});\n\t\t\t\tthis.selectPublicUrl();\n\t\t\t}.bind(this));\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.selectPublicUrl();\n\t\t}\n\t}\n\n\tselectPublicUrl()\n\t{\n\t\tif(!this._documentSelector)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tthis._documentSelector.show().then(function(object)\n\t\t{\n\t\t\tif(object instanceof BX.DocumentGenerator.Selector.Template)\n\t\t\t{\n\t\t\t\tthis._documentSelector.createDocument(object).then(function(document)\n\t\t\t\t{\n\t\t\t\t\tthis.pasteDocumentUrl(document);\n\t\t\t\t}.bind(this)).catch(function(error)\n\t\t\t\t{\n\t\t\t\t\tconsole.error(error);\n\t\t\t\t}.bind(this));\n\t\t\t}\n\t\t\telse if(object instanceof BX.DocumentGenerator.Selector.Document)\n\t\t\t{\n\t\t\t\tthis.pasteDocumentUrl(object);\n\t\t\t}\n\t\t}.bind(this)).catch(function(error)\n\t\t{\n\t\t\tconsole.error(error);\n\t\t}.bind(this));\n\t}\n\n\tpasteDocumentUrl(document)\n\t{\n\t\tthis._documentSelector.getDocumentPublicUrl(document).then(function(publicUrl)\n\t\t{\n\t\t\tthis._input.focus();\n\t\t\tthis._input.value = this._input.value + ' ' + document.getTitle() + ' ' + publicUrl;\n\t\t\tthis.setMessageLengthCounter();\n\t\t\tthis._source = 'document';\n\t\t}.bind(this)).catch(function(error)\n\t\t{\n\t\t\tconsole.error(error);\n\t\t}.bind(this));\n\t}\n\n\tinitFileSelector()\n\t{\n\t\tBX.bind(this._fileSelectorButton, 'click', this.onFileSelectorClick.bind(this));\n\t}\n\n\tcloseFileSelector()\n\t{\n\t\tBX.PopupMenu.destroy('sms-file-selector');\n\t}\n\n\tonFileSelectorClick()\n\t{\n\t\tBX.PopupMenu.show('sms-file-selector', this._fileSelectorButton, [\n\t\t\t{\n\t\t\t\ttext: BX.message('CRM_TIMELINE_SMS_UPLOAD_FILE'),\n\t\t\t\tonclick: this.uploadFile.bind(this),\n\t\t\t\tclassName: this._isFilesExternalLinkEnabled ? '' : 'crm-entity-stream-content-sms-menu-item-with-lock'\n\t\t\t},\n\t\t\t{\n\t\t\t\ttext: BX.message('CRM_TIMELINE_SMS_FIND_FILE'),\n\t\t\t\tonclick: this.findFile.bind(this),\n\t\t\t\tclassName: this._isFilesExternalLinkEnabled ? '' : 'crm-entity-stream-content-sms-menu-item-with-lock'\n\t\t\t}\n\t\t])\n\t}\n\n\tgetFileUploadInput()\n\t{\n\t\treturn document.getElementById(this._fileUploadLabel.getAttribute('for'));\n\t}\n\n\tuploadFile()\n\t{\n\t\tthis.closeFileSelector();\n\t\tif(this._isFilesExternalLinkEnabled)\n\t\t{\n\t\t\tthis.initDiskUF();\n\t\t\tBX.fireEvent(this.getFileUploadInput(), 'click');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.showFilesExternalLinkFeaturePopup();\n\t\t}\n\t}\n\n\tfindFile()\n\t{\n\t\tthis.closeFileSelector();\n\t\tif(this._isFilesExternalLinkEnabled)\n\t\t{\n\t\t\tthis.initDiskUF();\n\t\t\tBX.fireEvent(this._fileSelectorBitrix, 'click');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.showFilesExternalLinkFeaturePopup();\n\t\t}\n\t}\n\n\tgetLoader()\n\t{\n\t\tif(!this.loader)\n\t\t{\n\t\t\tthis.loader = new BX.Loader(\n\t\t\t\t{\n\t\t\t\t\tsize: 50\n\t\t\t\t});\n\t\t}\n\n\t\treturn this.loader;\n\t}\n\n\tshowLoader(node)\n\t{\n\t\tif(node && !this.getLoader().isShown())\n\t\t{\n\t\t\tthis.getLoader().show(node);\n\t\t}\n\t}\n\n\thideLoader()\n\t{\n\t\tif(this.getLoader().isShown())\n\t\t{\n\t\t\tthis.getLoader().hide();\n\t\t}\n\t}\n\n\tinitDiskUF()\n\t{\n\t\tif(this.isDiskFileUploaderInited || !this._isFilesEnabled)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tthis.isDiskFileUploaderInited = true;\n\t\tBX.addCustomEvent(this._fileUploadZone, 'OnFileUploadSuccess', this.OnFileUploadSuccess.bind(this));\n\t\tBX.addCustomEvent(this._fileUploadZone, 'DiskDLoadFormControllerInit', function(uf)\n\t\t{\n\t\t\tuf._onUploadProgress = function()\n\t\t\t{\n\t\t\t\tthis.showLoader(this._fileSelectorButton.parentNode.parentNode);\n\t\t\t}.bind(this);\n\t\t}.bind(this));\n\n\t\tBX.Disk.UF.add({\n\t\t\tUID: this._fileUploadZone.getAttribute('data-node-id'),\n\t\t\tcontrolName: this._fileUploadLabel.getAttribute('for'),\n\t\t\thideSelectDialog: false,\n\t\t\turlSelect: this._diskUrls.urlSelect,\n\t\t\turlRenameFile: this._diskUrls.urlRenameFile,\n\t\t\turlDeleteFile: this._diskUrls.urlDeleteFile,\n\t\t\turlUpload: this._diskUrls.urlUpload\n\t\t});\n\n\t\tBX.onCustomEvent(\n\t\t\tthis._fileUploadZone,\n\t\t\t'DiskLoadFormController',\n\t\t\t['show']\n\t\t);\n\t}\n\n\tOnFileUploadSuccess(fileResult, uf, file, uploaderFile)\n\t{\n\t\tthis.hideLoader();\n\t\tconst diskFileId = parseInt(fileResult.element_id.replace('n', ''));\n\t\tconst fileName = fileResult.element_name;\n\t\tthis.pasteFileUrl(diskFileId, fileName);\n\t}\n\n\tpasteFileUrl(diskFileId, fileName)\n\t{\n\t\tthis.showLoader(this._fileSelectorButton.parentNode.parentNode);\n\t\tBX.ajax.runAction('disk.file.generateExternalLink', {\n\t\t\tanalyticsLabel: 'crmTimelineSmsEditorGetFilePublicUrl',\n\t\t\tdata: {\n\t\t\t\tfileId: diskFileId\n\t\t\t}\n\t\t}).then(function(response)\n\t\t{\n\t\t\tthis.hideLoader();\n\t\t\tif(response.data.externalLink && response.data.externalLink.link)\n\t\t\t{\n\t\t\t\tthis._input.focus();\n\t\t\t\tthis._input.value = this._input.value + ' ' + fileName + ' ' + response.data.externalLink.link;\n\t\t\t\tthis.setMessageLengthCounter();\n\t\t\t\tthis._source = 'file';\n\t\t\t}\n\t\t}.bind(this)).catch(function(response)\n\t\t{\n\t\t\tconsole.error(response.errors.pop().message);\n\t\t});\n\t}\n\n\tgetFeaturePopup(content)\n\t{\n\t\tif(this.featurePopup != null)\n\t\t{\n\t\t\treturn this.featurePopup;\n\t\t}\n\t\tthis.featurePopup = new BX.PopupWindow('bx-popup-crm-sms-editor-feature-popup', null, {\n\t\t\tzIndex: 200,\n\t\t\tautoHide: true,\n\t\t\tcloseByEsc: true,\n\t\t\tcloseIcon: true,\n\t\t\toverlay : true,\n\t\t\tevents : {\n\t\t\t\tonPopupDestroy : function()\n\t\t\t\t{\n\t\t\t\t\tthis.featurePopup = null;\n\t\t\t\t}.bind(this)\n\t\t\t},\n\t\t\tcontent : content,\n\t\t\tcontentColor: 'white'\n\t\t});\n\n\t\treturn this.featurePopup;\n\t}\n\n\tshowFilesExternalLinkFeaturePopup()\n\t{\n\t\tthis.getFeaturePopup(this._fileExternalLinkDisabledContent).show();\n\t}\n\n\tonTemplateHintIconClick()\n\t{\n\t\tif (this._senderId === 'ednaru')\n\t\t{\n\t\t\ttop.BX.Helper.show(\"redirect=detail&code=14214014\");\n\t\t}\n\t}\n\n\tshowTemplateSelectDropdown(items)\n\t{\n\t\tconst menuItems = [];\n\t\tif (BX.Type.isArray(items))\n\t\t{\n\t\t\tif (items.length)\n\t\t\t{\n\t\t\t\titems.forEach(function(item)\n\t\t\t\t{\n\t\t\t\t\tmenuItems.push({\n\t\t\t\t\t\tvalue: item.ID,\n\t\t\t\t\t\ttext: item.TITLE,\n\t\t\t\t\t\tonclick: this._selectTemplateHandler\n\t\t\t\t\t})\n\t\t\t\t}.bind(this));\n\n\t\t\t\tBX.PopupMenu.show({\n\t\t\t\t\tid: this._templateSelectorMenuId,\n\t\t\t\t\tbindElement: this._templateSelectorNode,\n\t\t\t\t\titems: menuItems,\n\t\t\t\t\tangle: false,\n\t\t\t\t\twidth: this._templateSelectorNode.offsetWidth,\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\telse if (this._senderId)\n\t\t{\n\t\t\tconst loaderMenuId = this._templateSelectorMenuId + 'loader';\n\t\t\tconst loaderMenuLoaderId = this._templateSelectorMenuId + 'loader';\n\n\t\t\tBX.PopupMenu.show({\n\t\t\t\tid: loaderMenuId,\n\t\t\t\tbindElement: this._templateSelectorNode,\n\t\t\t\titems: [{\n\t\t\t\t\thtml: '<div id=\"' + loaderMenuLoaderId + '\"></div>',\n\t\t\t\t}],\n\t\t\t\tangle: false,\n\t\t\t\twidth: this._templateSelectorNode.offsetWidth,\n\t\t\t\theight: 60,\n\t\t\t\tevents: {\n\t\t\t\t\tonDestroy: function() {\n\t\t\t\t\t\tthis.hideLoader();\n\t\t\t\t\t}.bind(this)\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.showLoader(BX(loaderMenuLoaderId));\n\n\t\t\tif (!this._isRequestRunning)\n\t\t\t{\n\t\t\t\tthis._isRequestRunning = true;\n\t\t\t\tconst senderId = this._senderId;\n\t\t\t\tBX.ajax.runAction(\n\t\t\t\t\t'messageservice.Sender.getTemplates',\n\t\t\t\t\t{\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tid: senderId,\n\t\t\t\t\t\t\tcontext: {\n\t\t\t\t\t\t\t\tmodule: 'crm',\n\t\t\t\t\t\t\t\tentityTypeId: this._manager._ownerTypeId,\n\t\t\t\t\t\t\t\tentityId: this._manager._ownerId,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t\t\t\t.then(function(response)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis._isRequestRunning = false;\n\t\t\t\t\t\tconst sender = this._senders.find(function (sender) {\n\t\t\t\t\t\t\treturn (sender.id === senderId);\n\t\t\t\t\t\t}.bind(this));\n\n\t\t\t\t\t\tif (sender)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tsender.templates = response.data.templates;\n\t\t\t\t\t\t\tthis.toggleTemplateSelectAvailability();\n\t\t\t\t\t\t\tif (BX.PopupMenu.getMenuById(loaderMenuId))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tBX.PopupMenu.getMenuById(loaderMenuId).close();\n\t\t\t\t\t\t\t\tthis.showTemplateSelectDropdown(sender.templates);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}.bind(this))\n\t\t\t\t\t.catch(function(response)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis._isRequestRunning = false;\n\t\t\t\t\t\tif (BX.PopupMenu.getMenuById(loaderMenuId))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (response && response.errors && response.errors[0] && response.errors[0].message)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\talert(response.errors[0].message);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tBX.PopupMenu.getMenuById(loaderMenuId).close();\n\t\t\t\t\t\t}\n\t\t\t\t\t}.bind(this))\n\t\t\t\t;\n\t\t\t}\n\t\t}\n\n\t}\n\n\tgetSelectedSender()\n\t{\n\t\treturn this._senders.find(function(sender) {\n\t\t\treturn (sender.id === this._senderId);\n\t\t}.bind(this));\n\t}\n\n\tgetSelectedTemplate()\n\t{\n\t\tconst sender = this.getSelectedSender();\n\t\tif (!this._templateId || !sender || !sender.templates)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tconst template = sender.templates.find(function (template) {\n\t\t\treturn template.ID == this._templateId;\n\t\t}.bind(this));\n\n\t\treturn template ? template : null;\n\t}\n\n\tonTemplateSelectClick()\n\t{\n\t\tconst sender = this.getSelectedSender();\n\n\t\tif (sender)\n\t\t{\n\t\t\tthis.showTemplateSelectDropdown(sender.templates);\n\t\t}\n\t}\n\n\tonSelectTemplate(e, item)\n\t{\n\t\tthis._templateId = item.value;\n\t\tthis.applySelectedTemplate();\n\t\tthis.toggleSaveButton();\n\t\tconst menu = BX.PopupMenu.getMenuById(this._templateSelectorMenuId);\n\t\tif (menu)\n\t\t{\n\t\t\tmenu.close();\n\t\t}\n\t}\n\n\ttoggleTemplateSelectAvailability()\n\t{\n\t\tconst sender = this.getSelectedSender();\n\t\tif (sender && BX.Type.isArray(sender.templates) && !sender.templates.length)\n\t\t{\n\t\t\tBX.addClass(this._templateSelectorNode, 'ui-ctl-disabled');\n\t\t\tthis._templateTemplateTitleNode.textContent = BX.message('CRM_TIMELINE_SMS_TEMPLATES_NOT_FOUND');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tBX.removeClass(this._templateSelectorNode, 'ui-ctl-disabled');\n\t\t\tthis.applySelectedTemplate();\n\t\t}\n\t}\n\n\tapplySelectedTemplate()\n\t{\n\t\tconst sender = this.getSelectedSender();\n\t\tif (!this._templateId || !sender || !sender.templates)\n\t\t{\n\t\t\tthis.hideNode(this._templatePreviewNode);\n\t\t\tthis._templateTemplateTitleNode.textContent = '';\n\t\t}\n\t\telse\n\t\t{\n\t\t\tconst template = this.getSelectedTemplate();\n\t\t\tif (template)\n\t\t\t{\n\t\t\t\tconst preview = BX.Text.encode(template.PREVIEW).replace(/\\n/g, '<br>');\n\n\t\t\t\tthis.showNode(this._templatePreviewNode);\n\t\t\t\tthis._templatePreviewNode.innerHTML = preview;\n\t\t\t\tthis._templateTemplateTitleNode.textContent = template.TITLE;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.hideNode(this._templatePreviewNode);\n\t\t\t\tthis._templateTemplateTitleNode.textContent = '';\n\t\t\t}\n\t\t}\n\t}\n\n\tstatic create(id, settings)\n\t{\n\t\tconst self = new Sms();\n\t\tself.initialize(id, settings);\n\t\tSms.items[self.getId()] = self;\n\t\treturn self;\n\t}\n\n\tstatic items = {};\n}\n","import Editor from \"../editor\";\n\n/** @memberof BX.Crm.Timeline.Editors */\nexport default class Rest extends Editor\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis._interfaceInitialized = false;\n\t}\n\n\taction(action)\n\t{\n\t\tif(!this._interfaceInitialized)\n\t\t{\n\t\t\tthis._interfaceInitialized = true;\n\t\t\tthis.initializeInterface();\n\t\t}\n\n\t\tif(action === 'activity_rest_applist')\n\t\t{\n\t\t\tBX.rest.Marketplace.open({\n\t\t\t\tPLACEMENT: this.getSetting(\"placement\", '')\n\t\t\t});\n\n\t\t\ttop.BX.addCustomEvent(top, 'Rest:AppLayout:ApplicationInstall', BX.proxy(this.fireUpdateEvent, this));\n\t\t}\n\t\telse\n\t\t{\n\t\t\tconst appId = action.replace('activity_rest_', '');\n\t\t\tconst appData = appId.split('_');\n\n\t\t\tBX.rest.AppLayout.openApplication(\n\t\t\t\tappData[0],\n\t\t\t\t{\n\t\t\t\t\tID: this._ownerId\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tPLACEMENT: this.getSetting(\"placement\", ''),\n\t\t\t\t\tPLACEMENT_ID: appData[1]\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t}\n\n\tinitializeInterface()\n\t{\n\t\tif(!!top.BX.rest && !!top.BX.rest.AppLayout)\n\t\t{\n\t\t\tconst entityTypeId = this._manager._ownerTypeId, entityId = this._manager._ownerId;\n\n\t\t\tconst PlacementInterface = top.BX.rest.AppLayout.initializePlacement(this.getSetting(\"placement\", ''));\n\n\t\t\tPlacementInterface.prototype.reloadData = function(params, cb)\n\t\t\t{\n\t\t\t\tBX.Crm.EntityEvent.fireUpdate(entityTypeId, entityId, '');\n\t\t\t\tcb();\n\t\t\t};\n\t\t}\n\t}\n\n\tfireUpdateEvent()\n\t{\n\t\tconst entityTypeId = this._manager._ownerTypeId, entityId = this._manager._ownerId;\n\t\tsetTimeout(function(){\n\t\t\tconsole.log('fireUpdate', entityId, entityTypeId);\n\t\t\tBX.Crm.EntityEvent.fire(BX.Crm.EntityEvent.names.invalidate, entityTypeId, entityId, '');\n\t\t}, 3000);\n\t}\n\n\tstatic create(id, settings)\n\t{\n\t\tconst self = new Rest();\n\t\tself.initialize(id, settings);\n\t\tRest.items[self.getId()] = self;\n\t\treturn self;\n\t}\n\n\tstatic items = {};\n}\n","import Editor from \"../editor\";\n\n/** @memberof BX.Crm.Timeline.Editors */\nexport default class Comment extends Editor\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis._history = null;\n\t\tthis._serviceUrl = \"\";\n\t\tthis._postForm = null;\n\t\tthis._editor = null;\n\t\tthis._isRequestRunning = false;\n\t\tthis._isLocked = false;\n\t}\n\n\tdoInitialize()\n\t{\n\t\tthis._serviceUrl = this.getSetting(\"serviceUrl\", \"\");\n\t\tBX.unbind(this._input, \"blur\", this._blurHandler);\n\t\tBX.unbind(this._input, \"keyup\", this._keyupHandler);\n\t}\n\n\tloadEditor()\n\t{\n\t\tthis._editorName = 'CrmTimeLineComment0';\n\n\t\tif (this._postForm)\n\t\t\treturn;\n\n\t\tBX.ajax.runAction(\n\t\t\t\"crm.api.timeline.loadEditor\",\n\t\t\t{ data: { name: this._editorName } }\n\t\t).then(this.onLoadEditorSuccess.bind(this));\n\t}\n\n\tonLoadEditorSuccess(result)\n\t{\n\t\tconst html = BX.prop.getString(BX.prop.getObject(result, \"data\", {}), \"html\", '');\n\t\tBX.html(this._editorContainer, html)\n\t\t\t.then(BX.delegate(this.showEditor,this))\n\t\t\t.then(BX.delegate(this.addEvents,this));\n\t}\n\n\taddEvents()\n\t{\n\t\tBX.addCustomEvent(\n\t\t\tthis._editorContainer.firstElementChild,\n\t\t\t'onFileIsAppended',\n\t\t\tBX.delegate(function(id, item) {\n\t\t\t\tBX.addClass(this._saveButton, 'ui-btn-disabled');\n\t\t\t\tBX.addClass(this._saveButton, 'ui-btn-clock');\n\t\t\t\tthis._saveButton.removeEventListener(\"click\", this._saveButtonHandler);\n\t\t\t}, this)\n\t\t);\n\n\t\tBX.addCustomEvent(\n\t\t\tthis._editorContainer.firstElementChild,\n\t\t\t'onFileIsAdded',\n\t\t\tBX.delegate(function(file, controller, obj, blob) {\n\t\t\t\tBX.removeClass(this._saveButton, 'ui-btn-clock');\n\t\t\t\tBX.removeClass(this._saveButton, 'ui-btn-disabled');\n\t\t\t\tthis._saveButton.addEventListener(\"click\", this._saveButtonHandler);\n\t\t\t}, this)\n\t\t);\n\t}\n\n\tshowEditor()\n\t{\n\t\tif (LHEPostForm)\n\t\t{\n\t\t\twindow.setTimeout(BX.delegate(function(){\n\t\t\t\tthis._postForm = LHEPostForm.getHandler(this._editorName);\n\t\t\t\tthis._editor = BXHtmlEditor.Get(this._editorName);\n\t\t\t\tBX.onCustomEvent(this._postForm.eventNode, 'OnShowLHE', [true]);\n\t\t\t} ,this), 100);\n\t\t}\n\t}\n\n\tgetHistory()\n\t{\n\t\treturn this._history;\n\t}\n\n\tsetHistory(history)\n\t{\n\t\tthis._history = history;\n\t}\n\n\tonFocus(e)\n\t{\n\t\tthis._input.style.display = 'none';\n\t\tif (this._editor && this._postForm)\n\t\t{\n\t\t\tthis._postForm.eventNode.style.display = 'block';\n\t\t\tthis._editor.Focus();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (!BX.type.isDomNode(this._editorContainer))\n\t\t\t{\n\t\t\t\tthis._editorContainer = BX.create(\"div\", {attrs: {className: \"crm-entity-stream-section-comment-editor\"}});\n\t\t\t\tthis._editorContainer.appendChild(\n\t\t\t\t\tBX.create(\"DIV\",\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tattrs: { className: \"crm-timeline-wait\" }\n\t\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t\tthis._container.appendChild(this._editorContainer);\n\t\t\t}\n\n\t\t\twindow.setTimeout(BX.delegate(function(){\n\t\t\t\tthis.loadEditor();\n\t\t\t} ,this), 100);\n\t\t}\n\n\t\tBX.addClass(this._container, \"focus\");\n\t}\n\n\tsave()\n\t{\n\t\tlet text = \"\";\n\t\tconst attachmentList = [];\n\t\tif (this._postForm)\n\t\t{\n\t\t\ttext = this._postForm.oEditor.GetContent();\n\t\t\tthis._postForm.eventNode\n\t\t\t\t.querySelectorAll('input[name=\"UF_CRM_COMMENT_FILES[]\"]')\n\t\t\t\t.forEach(function(input) {\n\t\t\t\t\tattachmentList.push(input.value)\n\t\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\ttext = this._input.value;\n\t\t}\n\n\t\tif(text === \"\")\n\t\t{\n\t\t\tif (!this.emptyCommentMessage)\n\t\t\t{\n\t\t\t\tthis.emptyCommentMessage = new BX.PopupWindow(\n\t\t\t\t\t'timeline_empty_new_comment_' + this._ownerId,\n\t\t\t\t\tthis._saveButton,\n\t\t\t\t\t{\n\t\t\t\t\t\tcontent: BX.message('CRM_TIMELINE_EMPTY_COMMENT_MESSAGE'),\n\t\t\t\t\t\tdarkMode: true,\n\t\t\t\t\t\tautoHide: true,\n\t\t\t\t\t\tzIndex: 990,\n\t\t\t\t\t\tangle: {position: 'top', offset: 77},\n\t\t\t\t\t\tcloseByEsc: true,\n\t\t\t\t\t\tbindOptions: { forceBindPosition: true}\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tthis.emptyCommentMessage.show();\n\t\t\treturn;\n\t\t}\n\n\t\tif(this._isRequestRunning || this._isLocked)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis._isRequestRunning = this._isLocked = true;\n\t\tBX.ajax(\n\t\t\t{\n\t\t\t\turl: this._serviceUrl,\n\t\t\t\tmethod: \"POST\",\n\t\t\t\tdataType: \"json\",\n\t\t\t\tdata:\n\t\t\t\t\t{\n\t\t\t\t\t\t\"ACTION\": \"SAVE_COMMENT\",\n\t\t\t\t\t\t\"TEXT\": text,\n\t\t\t\t\t\t\"OWNER_TYPE_ID\": this._ownerTypeId,\n\t\t\t\t\t\t\"OWNER_ID\": this._ownerId,\n\t\t\t\t\t\t\"ATTACHMENTS\": attachmentList\n\t\t\t\t\t},\n\t\t\t\tonsuccess: BX.delegate(this.onSaveSuccess, this),\n\t\t\t\tonfailure: BX.delegate(this.onSaveFailure, this)\n\t\t\t}\n\t\t);\n\t}\n\n\tcancel()\n\t{\n\t\tthis._input.value = \"\";\n\t\tthis._input.style.minHeight = \"\";\n\t\tif (BX.type.isDomNode(this._editorContainer))\n\t\t\tthis._postForm.eventNode.style.display = 'none';\n\n\t\tthis._input.style.display = 'block';\n\t\tBX.removeClass(this._container, \"focus\");\n\t\tthis.release();\n\t}\n\n\tonSaveSuccess(data)\n\t{\n\t\tthis._isRequestRunning = false;\n\t\tif (this._postForm)\n\t\t{\n\t\t\tthis._postForm.reinit('', {});\n\t\t}\n\n\t\tthis.cancel();\n\t\tconst itemData = BX.prop.getObject(data, \"HISTORY_ITEM\");\n\t\tconst historyItem = this._history.createItem(itemData);\n\t\tthis._history.addItem(historyItem, 0);\n\n\t\tconst anchor = this._history.createAnchor();\n\t\thistoryItem.layout({ anchor: anchor });\n\n\t\tconst move = BX.CrmCommentAnimation.create(\n\t\t\thistoryItem.getWrapper(),\n\t\t\tanchor,\n\t\t\tBX.pos(this._input),\n\t\t\t{\n\t\t\t\tstart: BX.delegate(this.onAnimationStart, this),\n\t\t\t\tcomplete: BX.delegate(this.onAnimationComplete, this)\n\t\t\t}\n\t\t);\n\t\tmove.run();\n\t}\n\n\tonSaveFailure()\n\t{\n\t\tthis._isRequestRunning = this._isLocked = false;\n\t}\n\n\tonAnimationStart()\n\t{\n\t\tthis._input.value = \"\";\n\t}\n\n\tonAnimationComplete()\n\t{\n\t\tthis._isLocked = false;\n\t\tBX.removeClass(this._container, \"focus\");\n\n\t\tthis._input.style.minHeight = \"\";\n\t\tthis._manager.processEditingCompletion(this);\n\n\t\tthis.release();\n\n\t\tthis._history._anchor = null;\n\t\tthis._history.refreshLayout();\n\t}\n\n\tstatic create(id, settings)\n\t{\n\t\tconst self = new Comment();\n\t\tself.initialize(id, settings);\n\t\tComment.items[self.getId()] = self;\n\t\treturn self;\n\t}\n\n\tstatic items = {};\n}\n","import Item from \"../item\";\nimport History from \"./history\";\nimport {Item as ItemType} from \"../types\";\n\n/** @memberof BX.Crm.Timeline.Items */\nexport default class Scheduled extends Item\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis._schedule = null;\n\t\tthis._deadlineNode = null;\n\t\n\t\tthis._headerClickHandler = BX.delegate(this.onHeaderClick, this);\n\t\tthis._setAsDoneButtonHandler = BX.delegate(this.onSetAsDoneButtonClick, this);\n\t}\n\n\tdoInitialize()\n\t{\n\t\tthis._schedule = this.getSetting(\"schedule\");\n\t\tif(!(this._activityEditor instanceof BX.CrmActivityEditor))\n\t\t{\n\t\t\tthrow \"Scheduled. The field 'activityEditor' is not assigned.\";\n\t\t}\n\t\n\t\tif(this.hasPermissions() && !this.verifyPermissions())\n\t\t{\n\t\t\tthis.loadPermissions();\n\t\t}\n\t}\n\n\tgetTypeId()\n\t{\n\t\treturn ItemType.undefined;\n\t}\n\n\tverifyPermissions()\n\t{\n\t\tconst userId = BX.prop.getInteger(this.getPermissions(), \"USER_ID\", 0);\n\t\treturn userId <= 0 || userId === this._schedule.getUserId();\n\t}\n\n\tloadPermissions()\n\t{\n\t\tBX.ajax(\n\t\t\t{\n\t\t\t\turl: this._schedule.getServiceUrl(),\n\t\t\t\tmethod: \"POST\",\n\t\t\t\tdataType: \"json\",\n\t\t\t\tdata: { \"ACTION\": \"GET_PERMISSIONS\", \"TYPE_ID\": this.getTypeId(), \"ID\": this.getAssociatedEntityId() },\n\t\t\t\tonsuccess: this.onPermissionsLoad.bind(this)\n\t\t\t}\n\t\t);\n\t}\n\n\tonPermissionsLoad(result)\n\t{\n\t\tconst permissions = BX.prop.getObject(result, \"PERMISSIONS\", null);\n\t\tif(!permissions)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\n\t\tthis.setPermissions(permissions);\n\t\twindow.setTimeout(function(){ this.refreshLayout(); }.bind(this), 0);\n\t}\n\n\tgetDeadline()\n\t{\n\t\treturn null;\n\t}\n\n\thasDeadline()\n\t{\n\t\treturn BX.type.isDate(this.getDeadline());\n\t}\n\n\tisCounterEnabled()\n\t{\n\t\tconst deadline = this.getDeadline();\n\t\treturn deadline && History.isCounterEnabled(deadline);\n\t}\n\n\tgetSourceId()\n\t{\n\t\treturn BX.prop.getInteger(this.getAssociatedEntityData(), \"ID\", 0);\n\t}\n\n\tonSetAsDoneCompleted(data)\n\t{\n\t\tif(!BX.prop.getBoolean(data, \"COMPLETED\"))\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\n\t\tthis.markAsDone(true);\n\t\tthis._schedule.onItemMarkedAsDone(\n\t\t\tthis,\n\t\t\t{ 'historyItemData': BX.prop.getObject(data, \"HISTORY_ITEM\") }\n\t\t);\n\t}\n\n\tonPosponeCompleted(data)\n\t{\n\t}\n\n\trefreshDeadline()\n\t{\n\t\tthis._deadlineNode.innerHTML = this.formatDateTime(this.getDeadline());\n\t}\n\n\tformatDateTime(time)\n\t{\n\t\treturn this._schedule.formatDateTime(time);\n\t}\n\n\tgetWrapperClassName()\n\t{\n\t\treturn \"\";\n\t}\n\n\tgetIconClassName()\n\t{\n\t\treturn \"crm-entity-stream-section-icon\";\n\t}\n\n\tisReadOnly()\n\t{\n\t\treturn this._schedule.isReadOnly();\n\t}\n\n\tisEditable()\n\t{\n\t\treturn !this.isReadOnly();\n\t}\n\n\tcanPostpone()\n\t{\n\t\tif(this.isReadOnly())\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tconst perms = BX.prop.getObject(this.getAssociatedEntityData(), \"PERMISSIONS\", {});\n\t\treturn BX.prop.getBoolean(perms, \"POSTPONE\", false);\n\t}\n\n\tisDone()\n\t{\n\t\treturn BX.CrmActivityStatus.isFinal(\n\t\t\tBX.prop.getInteger(this.getAssociatedEntityData(), \"STATUS\", 0)\n\t\t);\n\t}\n\n\tcanComplete()\n\t{\n\t\tif(this.isReadOnly())\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tconst perms = BX.prop.getObject(this.getAssociatedEntityData(), \"PERMISSIONS\", {});\n\t\treturn BX.prop.getBoolean(perms, \"COMPLETE\", false);\n\t}\n\n\tsetAsDone(isDone)\n\t{\n\t}\n\n\tprepareContent(options)\n\t{\n\t\treturn null;\n\t}\n\n\tprepareLayout(options)\n\t{\n\t\tconst vueComponent = this.makeVueComponent(options, 'schedule');\n\t\tthis._wrapper = vueComponent ? vueComponent : this.prepareContent();\n\t\tif(this._wrapper)\n\t\t{\n\t\t\tconst enableAdd = BX.type.isPlainObject(options) ? BX.prop.getBoolean(options, \"add\", true) : true;\n\t\t\tif(enableAdd)\n\t\t\t{\n\t\t\t\tconst anchor = BX.type.isPlainObject(options) && BX.type.isElementNode(options[\"anchor\"]) ? options[\"anchor\"] : null;\n\t\t\t\tif(anchor && anchor.nextSibling)\n\t\t\t\t{\n\t\t\t\t\tthis._container.insertBefore(this._wrapper, anchor.nextSibling);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis._container.appendChild(this._wrapper);\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\tthis.markAsTerminated(this._schedule.checkItemForTermination(this));\n\t\t}\n\t}\n\n\tonHeaderClick(e)\n\t{\n\t\tthis.view();\n\t\te.preventDefault ? e.preventDefault() : (e.returnValue = false);\n\t}\n\n\tonSetAsDoneButtonClick(e)\n\t{\n\t\tif(this.canComplete())\n\t\t{\n\t\t\tthis.setAsDone(!this.isDone());\n\t\t}\n\t}\n\n\tonActivityCreate(activity, data)\n\t{\n\t\tthis._schedule.getManager().onActivityCreated(activity, data);\n\t}\n\n\tstatic isDone(data)\n\t{\n\t\tconst entityData = BX.prop.getObject(data, \"ASSOCIATED_ENTITY\", {});\n\t\treturn BX.CrmActivityStatus.isFinal(BX.prop.getInteger(entityData, \"STATUS\", 0));\n\t}\n\n\tstatic create(id, settings)\n\t{\n\t\tconst self = new Scheduled();\n\t\tself.initialize(id, settings);\n\t\treturn self;\n\t}\n}\n","/** @memberof BX.Crm.Timeline */\nexport default class Action\n{\n\tconstructor()\n\t{\n\t\tthis._id = \"\";\n\t\tthis._settings = {};\n\t\tthis._container = null;\n\t}\n\n\tinitialize(id, settings)\n\t{\n\t\tthis._id = BX.type.isNotEmptyString(id) ? id : BX.util.getRandomString(4);\n\t\tthis._settings = settings ? settings : {};\n\n\t\tthis._container = this.getSetting(\"container\");\n\t\tif(!BX.type.isElementNode(this._container))\n\t\t{\n\t\t\tthrow \"BX.CrmTimelineAction: Could not find container.\";\n\t\t}\n\n\t\tthis.doInitialize();\n\t}\n\n\tdoInitialize()\n\t{\n\t}\n\n\tgetId()\n\t{\n\t\treturn this._id;\n\t}\n\n\tgetSetting(name, defaultval)\n\t{\n\t\treturn this._settings.hasOwnProperty(name) ? this._settings[name] : defaultval;\n\t}\n\n\tlayout()\n\t{\n\t\tthis.doLayout();\n\t}\n\n\tdoLayout()\n\t{\n\t}\n}\n","import Action from \"../action\";\n\n/** @memberof BX.Crm.Timeline.Actions */\nexport default class Activity extends Action\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis._activityEditor = null;\n\t\tthis._entityData = null;\n\t\tthis._item = null;\n\t\tthis._isEnabled = true;\n\t}\n\n\tdoInitialize()\n\t{\n\t\tthis._entityData = this.getSetting(\"entityData\");\n\t\tif(!BX.type.isPlainObject(this._entityData))\n\t\t{\n\t\t\tthrow \"BX.Crm.Timeline.Actions.Activity. A required parameter 'entityData' is missing.\";\n\t\t}\n\n\t\tthis._activityEditor = this.getSetting(\"activityEditor\");\n\t\tif(!(this._activityEditor instanceof BX.CrmActivityEditor))\n\t\t{\n\t\t\tthrow \"BX.Crm.Timeline.Actions.Activity. A required parameter 'activityEditor' is missing.\";\n\t\t}\n\n\t\tthis._item = this.getSetting(\"item\");\n\t\tthis._isEnabled = this.getSetting(\"enabled\", true);\n\t}\n\n\tgetActivityId()\n\t{\n\t\treturn BX.prop.getInteger(this._entityData, \"ID\", 0);\n\t}\n\n\tloadActivityCommunications(callback)\n\t{\n\t\tthis._activityEditor.getActivityCommunications(\n\t\t\tthis.getActivityId(),\n\t\t\tfunction(communications)\n\t\t\t{\n\t\t\t\tif(BX.type.isFunction(callback))\n\t\t\t\t{\n\t\t\t\t\tcallback(communications);\n\t\t\t\t}\n\t\t\t},\n\t\t\ttrue\n\t\t);\n\t}\n\n\tgetItemData()\n\t{\n\t\treturn this._item ?  this._item.getData() : null;\n\t}\n}\n","import Activity from \".//activity\";\n\n/** @memberof BX.Crm.Timeline.Actions */\nexport class Email extends Activity\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis._clickHandler = BX.delegate(this.onClick, this);\n\t\tthis._saveHandler = BX.delegate(this.onSave, this);\n\t}\n\n\tonClick(e)\n\t{\n\t\tconst settings =\n\t\t\t{\n\t\t\t\t\"ownerType\": BX.CrmEntityType.resolveName(BX.prop.getInteger(this._entityData, \"OWNER_TYPE_ID\", 0)),\n\t\t\t\t\"ownerID\": BX.prop.getInteger(this._entityData, \"OWNER_ID\", 0),\n\t\t\t\t\"ownerUrl\": BX.prop.getString(this._entityData, \"OWNER_URL\", \"\"),\n\t\t\t\t\"ownerTitle\": BX.prop.getString(this._entityData, \"OWNER_TITLE\", \"\"),\n\t\t\t\t\"originalMessageID\": BX.prop.getInteger(this._entityData, \"ID\", 0),\n\t\t\t\t\"messageType\": \"RE\"\n\t\t\t};\n\n\t\tif (BX.CrmActivityProvider && top.BX.Bitrix24 && top.BX.Bitrix24.Slider)\n\t\t{\n\t\t\tconst activity = this._activityEditor.addEmail(settings);\n\t\t\tactivity.addOnSave(this._saveHandler);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.loadActivityCommunications(\n\t\t\t\tBX.delegate(\n\t\t\t\t\tfunction(communications)\n\t\t\t\t\t{\n\t\t\t\t\t\tsettings['communications'] = BX.type.isArray(communications) ? communications : [];\n\t\t\t\t\t\tsettings['communicationsLoaded'] = true;\n\n\t\t\t\t\t\tBX.CrmActivityEmail.prepareReply(settings);\n\n\t\t\t\t\t\tconst activity = this._activityEditor.addEmail(settings);\n\t\t\t\t\t\tactivity.addOnSave(this._saveHandler);\n\t\t\t\t\t},\n\t\t\t\t\tthis\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\t\treturn BX.PreventDefault(e);\n\t}\n\n\tonSave(activity, data)\n\t{\n\t\tif(BX.type.isFunction(this._item.onActivityCreate))\n\t\t{\n\t\t\tthis._item.onActivityCreate(activity, data);\n\t\t}\n\t}\n}\n\n/** @memberof BX.Crm.Timeline.Actions */\nexport class HistoryEmail extends Email\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\t}\n\n\tdoLayout()\n\t{\n\t\tthis._container.appendChild(\n\t\t\tBX.create(\"A\",\n\t\t\t\t{\n\t\t\t\t\tattrs: { className: \"crm-entity-stream-content-action-reply-btn\" },\n\t\t\t\t\tevents: { \"click\": this._clickHandler }\n\t\t\t\t})\n\t\t);\n\t}\n\n\tstatic create(id, settings)\n\t{\n\t\tconst self = new HistoryEmail();\n\t\tself.initialize(id, settings);\n\t\treturn self;\n\t}\n}\n\n/** @memberof BX.Crm.Timeline.Actions */\nexport class ScheduleEmail extends Email\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\t}\n\n\tdoLayout()\n\t{\n\t\tthis._container.appendChild(\n\t\t\tBX.create(\"DIV\",\n\t\t\t\t{\n\t\t\t\t\tattrs: { className: \"crm-entity-stream-content-action-reply-btn\" },\n\t\t\t\t\tevents: { \"click\": this._clickHandler }\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\t}\n\n\tstatic create(id, settings)\n\t{\n\t\tconst self = new ScheduleEmail();\n\t\tself.initialize(id, settings);\n\t\treturn self;\n\t}\n}\n","import History from \"./history\";\nimport {Mark} from \"../types\";\nimport {HistoryEmail} from \"../actions/email\";\n\n/** @memberof BX.Crm.Timeline.Items */\nexport default class HistoryActivity extends History\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\t}\n\n\tdoInitialize()\n\t{\n\t\tsuper.doInitialize();\n\t\tif(!(this._activityEditor instanceof BX.CrmActivityEditor))\n\t\t{\n\t\t\tthrow \"HistoryActivity. The field 'activityEditor' is not assigned.\";\n\t\t}\n\t}\n\n\tgetTitle()\n\t{\n\t\treturn BX.prop.getString(this.getAssociatedEntityData(), \"SUBJECT\", \"\");\n\t}\n\n\tgetTypeDescription()\n\t{\n\t\tconst entityData = this.getAssociatedEntityData();\n\t\tconst direction = BX.prop.getInteger(entityData, \"DIRECTION\", 0);\n\n\t\tconst typeCategoryId = this.getTypeCategoryId();\n\t\tif(typeCategoryId === BX.CrmActivityType.email)\n\t\t{\n\t\t\treturn this.getMessage(direction === BX.CrmActivityDirection.incoming ? \"incomingEmail\" : \"outgoingEmail\");\n\t\t}\n\t\telse if(typeCategoryId === BX.CrmActivityType.call)\n\t\t{\n\t\t\treturn this.getMessage(direction === BX.CrmActivityDirection.incoming ? \"incomingCall\" : \"outgoingCall\");\n\t\t}\n\t\telse if(typeCategoryId === BX.CrmActivityType.meeting)\n\t\t{\n\t\t\treturn this.getMessage(\"meeting\");\n\t\t}\n\t\telse if(typeCategoryId === BX.CrmActivityType.task)\n\t\t{\n\t\t\treturn this.getMessage(\"task\");\n\t\t}\n\t\telse if(typeCategoryId === BX.CrmActivityType.provider)\n\t\t{\n\t\t\tconst providerId = BX.prop.getString(entityData, \"PROVIDER_ID\", \"\");\n\n\t\t\tif(providerId === \"CRM_WEBFORM\")\n\t\t\t{\n\t\t\t\treturn this.getMessage(\"webform\");\n\t\t\t}\n\t\t\telse if (providerId === \"CRM_SMS\")\n\t\t\t{\n\t\t\t\treturn this.getMessage(\"sms\");\n\t\t\t}\n\t\t\telse if (providerId === \"CRM_REQUEST\")\n\t\t\t{\n\t\t\t\treturn this.getMessage(\"activityRequest\");\n\t\t\t}\n\t\t\telse if (providerId === \"IMOPENLINES_SESSION\")\n\t\t\t{\n\t\t\t\treturn this.getMessage(\"openLine\");\n\t\t\t}\n\t\t\telse if (providerId === \"REST_APP\")\n\t\t\t{\n\t\t\t\treturn this.getMessage(\"restApplication\");\n\t\t\t}\n\t\t\telse if (providerId === \"VISIT_TRACKER\")\n\t\t\t{\n\t\t\t\treturn this.getMessage(\"visit\");\n\t\t\t}\n\t\t\telse if (providerId === \"ZOOM\")\n\t\t\t{\n\t\t\t\treturn this.getMessage(\"zoom\");\n\t\t\t}\n\t\t}\n\n\t\treturn \"\";\n\t}\n\n\tprepareTitleLayout()\n\t{\n\t\treturn BX.create(\"A\",\n\t\t\t{\n\t\t\t\tattrs: { href: \"#\",  className: \"crm-entity-stream-content-event-title\" },\n\t\t\t\tevents: { \"click\": this._headerClickHandler },\n\t\t\t\ttext: this.getTypeDescription()\n\t\t\t}\n\t\t);\n\t}\n\n\tprepareTimeLayout()\n\t{\n\t\treturn BX.create(\"SPAN\",\n\t\t\t{\n\t\t\t\tattrs: { className: \"crm-entity-stream-content-event-time\" },\n\t\t\t\ttext: this.formatTime(this.getCreatedTime())\n\t\t\t}\n\t\t);\n\t}\n\n\tprepareMarkLayout()\n\t{\n\t\tconst entityData = this.getAssociatedEntityData();\n\t\tconst markTypeId = BX.prop.getInteger(entityData, \"MARK_TYPE_ID\", 0);\n\t\tif(markTypeId <= 0)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tlet messageName = \"\";\n\t\tif(markTypeId === Mark.success)\n\t\t{\n\t\t\tmessageName = \"SuccessMark\";\n\t\t}\n\t\telse if(markTypeId === Mark.renew)\n\t\t{\n\t\t\tmessageName = \"RenewMark\";\n\t\t}\n\n\t\tif(messageName === \"\")\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tlet markText = \"\";\n\t\tconst typeCategoryId = this.getTypeCategoryId();\n\t\tif(typeCategoryId === BX.CrmActivityType.email)\n\t\t{\n\t\t\tmarkText = this.getMessage(\"email\" + messageName);\n\t\t}\n\t\telse if(typeCategoryId === BX.CrmActivityType.call)\n\t\t{\n\t\t\tmarkText = this.getMessage(\"call\" + messageName);\n\t\t}\n\t\telse if(typeCategoryId === BX.CrmActivityType.meeting)\n\t\t{\n\t\t\tmarkText = this.getMessage(\"meeting\" + messageName);\n\t\t}\n\t\telse if(typeCategoryId === BX.CrmActivityType.task)\n\t\t{\n\t\t\tmarkText = this.getMessage(\"task\" + messageName);\n\t\t}\n\n\t\tif(markText === \"\")\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\treturn(\n\t\t\tBX.create(\n\t\t\t\t\"SPAN\",\n\t\t\t\t{\n\t\t\t\t\tprops: { className: \"crm-entity-stream-content-event-skipped\" },\n\t\t\t\t\ttext: markText\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\t}\n\n\tprepareActions()\n\t{\n\t\tif(this.isReadOnly())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst typeCategoryId = this.getTypeCategoryId();\n\t\tif(typeCategoryId === BX.CrmActivityType.email)\n\t\t{\n\t\t\tthis._actions.push(\n\t\t\t\tHistoryEmail.create(\n\t\t\t\t\t\"email\",\n\t\t\t\t\t{\n\t\t\t\t\t\titem: this,\n\t\t\t\t\t\tcontainer: this._actionContainer,\n\t\t\t\t\t\tentityData: this.getAssociatedEntityData(),\n\t\t\t\t\t\tactivityEditor: this._activityEditor\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\t}\n\n\tprepareContextMenuItems()\n\t{\n\t\tif(this._isMenuShown)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst menuItems = [];\n\n\t\tif (!this.isReadOnly())\n\t\t{\n\t\t\tif (this.isEditable())\n\t\t\t{\n\t\t\t\tmenuItems.push({ id: \"edit\", text: this.getMessage(\"menuEdit\"), onclick: BX.delegate(this.edit, this)});\n\t\t\t}\n\t\t\tmenuItems.push({ id: \"remove\", text: this.getMessage(\"menuDelete\"), onclick: BX.delegate(this.processRemoval, this)});\n\n\t\t\tif (this.isFixed() || this._fixedHistory.findItemById(this._id))\n\t\t\t\tmenuItems.push({ id: \"unfasten\", text: this.getMessage(\"menuUnfasten\"), onclick: BX.delegate(this.unfasten, this)});\n\t\t\telse\n\t\t\t\tmenuItems.push({ id: \"fasten\", text: this.getMessage(\"menuFasten\"), onclick: BX.delegate(this.fasten, this)});\n\t\t}\n\t\treturn menuItems;\n\t}\n\n\tview()\n\t{\n\t\tthis.closeContextMenu();\n\t\tconst entityData = this.getAssociatedEntityData();\n\t\tconst id = BX.prop.getInteger(entityData, \"ID\", 0);\n\t\tif(id > 0)\n\t\t{\n\t\t\tthis._activityEditor.viewActivity(id);\n\t\t}\n\t}\n\n\tedit()\n\t{\n\t\tthis.closeContextMenu();\n\t\tconst associatedEntityTypeId = this.getAssociatedEntityTypeId();\n\t\tif(associatedEntityTypeId === BX.CrmEntityType.enumeration.activity)\n\t\t{\n\t\t\tconst entityData = this.getAssociatedEntityData();\n\t\t\tconst id = BX.prop.getInteger(entityData, \"ID\", 0);\n\t\t\tif(id > 0)\n\t\t\t{\n\t\t\t\tthis._activityEditor.editActivity(id);\n\t\t\t}\n\t\t}\n\t}\n\n\tprocessRemoval()\n\t{\n\t\tthis.closeContextMenu();\n\t\tthis._detetionConfirmDlgId = \"entity_timeline_deletion_\" + this.getId() + \"_confirm\";\n\t\tlet dlg = BX.Crm.ConfirmationDialog.get(this._detetionConfirmDlgId);\n\t\tif(!dlg)\n\t\t{\n\t\t\tdlg = BX.Crm.ConfirmationDialog.create(\n\t\t\t\tthis._detetionConfirmDlgId,\n\t\t\t\t{\n\t\t\t\t\ttitle: this.getMessage(\"removeConfirmTitle\"),\n\t\t\t\t\tcontent: this.getRemoveMessage()\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\tdlg.open().then(BX.delegate(this.onRemovalConfirm, this), BX.delegate(this.onRemovalCancel, this));\n\t}\n\n\tgetRemoveMessage()\n\t{\n\t\treturn this.getMessage('removeConfirm');\n\t}\n\n\tonRemovalConfirm(result)\n\t{\n\t\tif(BX.prop.getBoolean(result, \"cancel\", true))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.remove();\n\t}\n\n\tonRemovalCancel()\n\t{\n\t}\n\n\tremove()\n\t{\n\t\tconst associatedEntityTypeId = this.getAssociatedEntityTypeId();\n\n\t\tif(associatedEntityTypeId === BX.CrmEntityType.enumeration.activity)\n\t\t{\n\t\t\tconst entityData = this.getAssociatedEntityData();\n\n\t\t\tconst id = BX.prop.getInteger(entityData, \"ID\", 0);\n\n\t\t\tif(id > 0)\n\t\t\t{\n\t\t\t\tconst activityEditor = this._activityEditor;\n\t\t\t\tconst item = activityEditor.getItemById(id);\n\t\t\t\tif (item)\n\t\t\t\t{\n\t\t\t\t\tactivityEditor.deleteActivity(id, true);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tconst serviceUrl = BX.util.add_url_param(activityEditor.getSetting('serviceUrl', ''),\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tid: id,\n\t\t\t\t\t\t\taction: 'get_activity',\n\t\t\t\t\t\t\townertype: activityEditor.getSetting('ownerType', ''),\n\t\t\t\t\t\t\townerid: activityEditor.getSetting('ownerID', '')\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t\tBX.ajax({\n\t\t\t\t\t\t'url': serviceUrl,\n\t\t\t\t\t\t'method': 'POST',\n\t\t\t\t\t\t'dataType': 'json',\n\t\t\t\t\t\t'data':\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t'ACTION' : 'GET_ACTIVITY',\n\t\t\t\t\t\t\t\t'ID': id,\n\t\t\t\t\t\t\t\t'OWNER_TYPE': activityEditor.getSetting('ownerType', ''),\n\t\t\t\t\t\t\t\t'OWNER_ID': activityEditor.getSetting('ownerID', '')\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\tonsuccess: BX.delegate(\n\t\t\t\t\t\t\tfunction(data)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif(typeof(data['ACTIVITY']) !== 'undefined')\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tactivityEditor._handleActivityChange(data['ACTIVITY']);\n\t\t\t\t\t\t\t\t\twindow.setTimeout(BX.delegate(this.remove ,this), 500);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tthis\n\t\t\t\t\t\t),\n\t\t\t\t\t\tonfailure: function(data){}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tstatic create(id, settings)\n\t{\n\t\tconst self = new HistoryActivity();\n\t\tself.initialize(id, settings);\n\t\treturn self;\n\t}\n\n\tstatic messages = {};\n}\n","import HistoryActivity from \"./history-activity\";\n\n/** @memberof BX.Crm.Timeline.Items */\nexport default class Document extends HistoryActivity\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\t}\n\n\tgetTitle()\n\t{\n\t\tconst typeCategoryId = BX.prop.getInteger(this._data, \"TYPE_CATEGORY_ID\", 0);\n\t\tif(typeCategoryId === 3)\n\t\t{\n\t\t\treturn BX.Loc.getMessage('CRM_TIMELINE_DOCUMENT_VIEWED');\n\t\t}\n\n\t\treturn this.getMessage(\"document\");\n\t}\n\n\tprepareTitleLayout()\n\t{\n\t\treturn BX.create(\"SPAN\", {\n\t\t\tattrs:{ className: \"crm-entity-stream-content-event-title\"},\n\t\t\tchildren: [\n\t\t\t\tBX.create(\"A\", {\n\t\t\t\t\tattrs: { href: \"#\" },\n\t\t\t\t\tevents: { \"click\": BX.delegate(this.editDocument, this) },\n\t\t\t\t\ttext: this.getTitle()\n\t\t\t\t})\n\t\t\t]\n\t\t});\n\t}\n\n\tprepareTitleStatusLayout()\n\t{\n\t\tconst typeCategoryId = BX.prop.getInteger(this._data, \"TYPE_CATEGORY_ID\", 0);\n\t\tif(typeCategoryId === 3)\n\t\t{\n\t\t\treturn BX.create(\"SPAN\",\n\t\t\t\t{\n\t\t\t\t\tattrs: { className: \"crm-entity-stream-content-event-done\" },\n\t\t\t\t\ttext: BX.Loc.getMessage('CRM_TIMELINE_DOCUMENT_VIEWED_STATUS')\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t\tif(typeCategoryId === 2)\n\t\t{\n\t\t\treturn BX.create(\"SPAN\",\n\t\t\t\t{\n\t\t\t\t\tattrs: { className: \"crm-entity-stream-content-event-sent\" },\n\t\t\t\t\ttext: BX.Loc.getMessage('CRM_TIMELINE_DOCUMENT_CREATED_STATUS')\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tprepareTimeLayout()\n\t{\n\t\treturn BX.create(\"SPAN\",\n\t\t\t{\n\t\t\t\tattrs: { className: \"crm-entity-stream-content-event-time\" },\n\t\t\t\ttext: this.formatTime(this.getCreatedTime())\n\t\t\t}\n\t\t);\n\t}\n\n\tisContextMenuEnabled()\n\t{\n\t\tconst typeCategoryId = BX.prop.getInteger(this._data, \"TYPE_CATEGORY_ID\", 0);\n\n\t\treturn typeCategoryId !== 3;\n\t}\n\n\tprepareHeaderLayout()\n\t{\n\t\tconst header = BX.create(\"DIV\", {attrs: {className: \"crm-entity-stream-content-header\"}});\n\t\theader.appendChild(this.prepareTitleLayout());\n\t\tconst statusLayout = this.prepareTitleStatusLayout();\n\t\tif(statusLayout)\n\t\t{\n\t\t\theader.appendChild(statusLayout);\n\t\t}\n\t\theader.appendChild(this.prepareTimeLayout());\n\n\t\treturn header;\n\t}\n\n\tprepareContent()\n\t{\n\t\tconst text = this.getTextDataParam(\"COMMENT\", \"\");\n\n\t\tconst wrapper = BX.create(\"DIV\",\n\t\t\t{\n\t\t\t\tattrs: {className: \"crm-entity-stream-section crm-entity-stream-section-history crm-entity-stream-section-document\"}\n\t\t\t}\n\t\t);\n\n\t\tif(this.isFixed())\n\t\t{\n\t\t\tBX.addClass(wrapper, 'crm-entity-stream-section-top-fixed');\n\t\t}\n\n\t\twrapper.appendChild(\n\t\t\tBX.create(\"DIV\",\n\t\t\t\t{\n\t\t\t\t\tattrs: { className: \"crm-entity-stream-section-icon crm-entity-stream-section-icon-document\" }\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\n\t\tif(this.isContextMenuEnabled())\n\t\t{\n\t\t\twrapper.appendChild(this.prepareContextMenuButton());\n\t\t}\n\n\t\tif(!this.isReadOnly())\n\t\t{\n\t\t\twrapper.appendChild(this.prepareFixedSwitcherLayout());\n\t\t}\n\n\t\tconst contentWrapper = BX.create(\"DIV\", {attrs: {className: \"crm-entity-stream-content-event\"}});\n\t\twrapper.appendChild(\n\t\t\tBX.create(\"DIV\",\n\t\t\t\t{\n\t\t\t\t\tattrs: { className: \"crm-entity-stream-section-content\" },\n\t\t\t\t\tchildren: [contentWrapper]\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\n\t\tconst header = this.prepareHeaderLayout();\n\t\tcontentWrapper.appendChild(header);\n\n\t\tconst detailWrapper = BX.create(\"DIV\",\n\t\t\t{\n\t\t\t\tattrs: {className: \"crm-entity-stream-content-detail\"},\n\t\t\t\thtml: text\n\t\t\t}\n\t\t);\n\t\tconst title = BX.findChildByClassName(detailWrapper, 'document-title-link');\n\t\tif(title)\n\t\t{\n\t\t\tBX.bind(title, 'click', BX.proxy(this.editDocument, this));\n\t\t}\n\t\tcontentWrapper.appendChild(detailWrapper);\n\n\t\t//region Author\n\t\tconst authorNode = this.prepareAuthorLayout();\n\t\tif(authorNode)\n\t\t{\n\t\t\tcontentWrapper.appendChild(authorNode);\n\t\t}\n\t\t//endregion\n\n\t\t//region  Actions\n\t\tthis._actionContainer = BX.create(\"SPAN\", { attrs: { className: \"crm-entity-stream-content-detail-action\" } });\n\t\tcontentWrapper.appendChild(this._actionContainer);\n\t\t//endregion\n\n\t\treturn wrapper;\n\t}\n\n\tprepareActions()\n\t{\n\t}\n\n\tshowActions(show)\n\t{\n\t\tif(this._actionContainer)\n\t\t{\n\t\t\tthis._actionContainer.style.display = show ? \"\" : \"none\";\n\t\t}\n\t}\n\n\tprepareContextMenuItems()\n\t{\n\t\tconst menuItems = [];\n\n\t\tif(!this.isReadOnly())\n\t\t{\n\t\t\tmenuItems.push({ id: \"edit\", text: this.getMessage(\"menuEdit\"), onclick: BX.delegate(this.editDocument, this)});\n\t\t\tmenuItems.push({ id: \"remove\", text: this.getMessage(\"menuDelete\"), onclick: BX.delegate(this.confirmDelete, this)});\n\n\t\t\tif (this.isFixed() || this._fixedHistory.findItemById(this._id))\n\t\t\t{\n\t\t\t\tmenuItems.push({ id: \"unfasten\", text: this.getMessage(\"menuUnfasten\"), onclick: BX.delegate(this.unfasten, this)});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tmenuItems.push({ id: \"fasten\", text: this.getMessage(\"menuFasten\"), onclick: BX.delegate(this.fasten, this)});\n\t\t\t}\n\t\t}\n\n\t\treturn menuItems;\n\t}\n\n\tconfirmDelete()\n\t{\n\t\tthis.closeContextMenu();\n\t\tthis._detetionConfirmDlgId = \"entity_timeline_deletion_\" + this.getId() + \"_confirm\";\n\t\tlet dlg = BX.Crm.ConfirmationDialog.get(this._detetionConfirmDlgId);\n\t\tif(!dlg)\n\t\t{\n\t\t\tdlg = BX.Crm.ConfirmationDialog.create(\n\t\t\t\tthis._detetionConfirmDlgId,\n\t\t\t\t{\n\t\t\t\t\ttitle: this.getMessage(\"removeConfirmTitle\"),\n\t\t\t\t\tcontent: this.getMessage('documentRemove')\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\tdlg.open().then(BX.delegate(this.onConfirmDelete, this), BX.DoNothing);\n\t}\n\n\tonConfirmDelete(result)\n\t{\n\t\tif(BX.prop.getBoolean(result, \"cancel\", true))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.deleteDocument();\n\t}\n\n\tdeleteDocument()\n\t{\n\t\tif(this._isRequestRunning)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tthis._isRequestRunning = true;\n\t\tBX.ajax(\n\t\t\t{\n\t\t\t\turl: this._history._serviceUrl,\n\t\t\t\tmethod: \"POST\",\n\t\t\t\tdataType: \"json\",\n\t\t\t\tdata:\n\t\t\t\t\t{\n\t\t\t\t\t\t\"ACTION\": \"DELETE_DOCUMENT\",\n\t\t\t\t\t\t\"OWNER_TYPE_ID\":  this.getOwnerTypeId(),\n\t\t\t\t\t\t\"OWNER_ID\": this.getOwnerId(),\n\t\t\t\t\t\t\"ID\": this.getId()\n\t\t\t\t\t},\n\t\t\t\tonsuccess: BX.delegate(function(result)\n\t\t\t\t{\n\t\t\t\t\tthis._isRequestRunning = false;\n\t\t\t\t\tif(BX.type.isNotEmptyString(result.ERROR))\n\t\t\t\t\t{\n\t\t\t\t\t\talert(result.ERROR);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tconst deleteItem = this._history.findItemById(this._id);\n\t\t\t\t\t\tif (deleteItem instanceof Document)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tdeleteItem.clearAnimate();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst deleteFixedItem = this._fixedHistory.findItemById(this._id);\n\t\t\t\t\t\tif (deleteFixedItem instanceof Document)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tdeleteFixedItem.clearAnimate();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}, this),\n\t\t\t\tonfailure: BX.delegate(function()\n\t\t\t\t{\n\t\t\t\t\tthis._isRequestRunning = false;\n\t\t\t\t}, this)\n\t\t\t}\n\t\t);\n\t}\n\n\teditDocument()\n\t{\n\t\tconst documentId = this.getData().DOCUMENT_ID || 0;\n\t\tif(documentId > 0)\n\t\t{\n\t\t\tlet url = '/bitrix/components/bitrix/crm.document.view/slider.php';\n\t\t\turl = BX.util.add_url_param(url, {documentId: documentId});\n\t\t\tif(BX.SidePanel)\n\t\t\t{\n\t\t\t\tBX.SidePanel.Instance.open(url, {width: 980});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\ttop.location.href = url;\n\t\t\t}\n\t\t}\n\t}\n\n\tupdateWrapper()\n\t{\n\t\tconst wrapper = this.getWrapper();\n\t\tif(wrapper)\n\t\t{\n\t\t\tconst detailWrapper = BX.findChildByClassName(wrapper, 'crm-entity-stream-content-detail');\n\t\t\tif(detailWrapper)\n\t\t\t{\n\t\t\t\tBX.adjust(detailWrapper, {html: this.getTextDataParam(\"COMMENT\", \"\")});\n\t\t\t\tconst title = BX.findChildByClassName(detailWrapper, 'document-title-link');\n\t\t\t\tif(title)\n\t\t\t\t{\n\t\t\t\t\tBX.bind(title, 'click', BX.proxy(this.editDocument, this));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tstatic create(id, settings)\n\t{\n\t\tconst self = new Document();\n\t\tself.initialize(id, settings);\n\t\treturn self;\n\t}\n}\n","import Manager from \"./manager\";\n\n/** @memberof BX.Crm.Timeline */\nexport default class Steam\n{\n\tconstructor()\n\t{\n\t\tthis._id = \"\";\n\t\tthis._settings = {};\n\t\tthis._container = null;\n\t\tthis._manager = null;\n\t\tthis._activityEditor = null;\n\n\t\tthis._userTimezoneOffset = null;\n\t\tthis._serverTimezoneOffset = null;\n\t\tthis._timeFormat = \"\";\n\t\tthis._year = 0;\n\n\t\tthis._isStubMode = false;\n\t\tthis._userId = 0;\n\t\tthis._readOnly = false;\n\n\t\tthis._serviceUrl = \"\";\n\t}\n\n\tinitialize(id, settings)\n\t{\n\t\tthis._id = BX.type.isNotEmptyString(id) ? id : BX.util.getRandomString(4);\n\t\tthis._settings = settings ? settings : {};\n\n\t\tthis._container = BX(this.getSetting(\"container\"));\n\t\tif (!BX.type.isElementNode(this._container))\n\t\t{\n\t\t\tthrow \"Timeline. Container node is not found.\";\n\t\t}\n\t\tthis._editorContainer = BX(this.getSetting(\"editorContainer\"));\n\t\tthis._manager = this.getSetting(\"manager\");\n\t\tif (!(this._manager instanceof Manager))\n\t\t{\n\t\t\tthrow \"Timeline. Manager instance is not found.\";\n\t\t}\n\n\t\t//\n\t\tconst datetimeFormat = BX.message(\"FORMAT_DATETIME\").replace(/:SS/, \"\");\n\t\tconst dateFormat = BX.message(\"FORMAT_DATE\");\n\t\tthis._timeFormat = BX.date.convertBitrixFormat(BX.util.trim(datetimeFormat.replace(dateFormat, \"\")));\n\t\t//\n\t\tthis._year = (new Date()).getFullYear();\n\n\t\tthis._activityEditor = this.getSetting(\"activityEditor\");\n\n\t\tthis._isStubMode = BX.prop.getBoolean(this._settings, \"isStubMode\", false);\n\t\tthis._readOnly = BX.prop.getBoolean(this._settings, \"readOnly\", false);\n\t\tthis._userId = BX.prop.getInteger(this._settings, \"userId\", 0);\n\t\tthis._serviceUrl = BX.prop.getString(this._settings, \"serviceUrl\", \"\");\n\n\t\tthis.doInitialize();\n\t}\n\n\tgetId()\n\t{\n\t\treturn this._id;\n\t}\n\n\tgetSetting(name, defaultval)\n\t{\n\t\treturn this._settings.hasOwnProperty(name) ? this._settings[name] : defaultval;\n\t}\n\n\tdoInitialize()\n\t{\n\t}\n\n\tlayout()\n\t{\n\t}\n\n\tisStubMode()\n\t{\n\t\treturn this._isStubMode;\n\t}\n\n\tisReadOnly()\n\t{\n\t\treturn this._readOnly;\n\t}\n\n\tgetUserId()\n\t{\n\t\treturn this._userId;\n\t}\n\n\tgetServiceUrl()\n\t{\n\t\treturn this._serviceUrl;\n\t}\n\n\trefreshLayout()\n\t{\n\t}\n\n\tgetManager()\n\t{\n\t\treturn this._manager;\n\t}\n\n\tgetOwnerInfo()\n\t{\n\t\treturn this._manager.getOwnerInfo();\n\t}\n\n\treload()\n\t{\n\t\tconst currentUrl = this.getSetting(\"currentUrl\");\n\t\tconst ajaxId = this.getSetting(\"ajaxId\");\n\t\tif (ajaxId !== \"\")\n\t\t{\n\t\t\tBX.ajax.insertToNode(BX.util.add_url_param(currentUrl, {bxajaxid: ajaxId}), \"comp_\" + ajaxId);\n\t\t}\n\t\telse\n\t\t{\n\t\t\twindow.location = currentUrl;\n\t\t}\n\t}\n\n\tgetUserTimezoneOffset()\n\t{\n\t\tif (!this._userTimezoneOffset)\n\t\t{\n\t\t\tthis._userTimezoneOffset = parseInt(BX.message(\"USER_TZ_OFFSET\"));\n\t\t\tif (isNaN(this._userTimezoneOffset))\n\t\t\t{\n\t\t\t\tthis._userTimezoneOffset = 0;\n\t\t\t}\n\t\t}\n\t\treturn this._userTimezoneOffset;\n\t}\n\n\tgetServerTimezoneOffset()\n\t{\n\t\tif (!this._serverTimezoneOffset)\n\t\t{\n\t\t\tthis._serverTimezoneOffset = parseInt(BX.message(\"SERVER_TZ_OFFSET\"));\n\t\t\tif (isNaN(this._serverTimezoneOffset))\n\t\t\t{\n\t\t\t\tthis._serverTimezoneOffset = 0;\n\t\t\t}\n\t\t}\n\t\treturn this._serverTimezoneOffset;\n\t}\n\n\tformatTime(time, now, utc)\n\t{\n\t\treturn BX.date.format(this._timeFormat, time, now, utc);\n\t}\n\n\tformatDate(date)\n\t{\n\t\treturn (\n\t\t\tBX.date.format(\n\t\t\t\t[\n\t\t\t\t\t[\"today\", \"today\"],\n\t\t\t\t\t[\"tommorow\", \"tommorow\"],\n\t\t\t\t\t[\"yesterday\", \"yesterday\"],\n\t\t\t\t\t[\"\", (date.getFullYear() === this._year) ? \"j F\" : \"j F Y\"]\n\t\t\t\t],\n\t\t\t\tdate\n\t\t\t)\n\t\t);\n\t}\n\n\tcutOffText(text, length)\n\t{\n\t\tif (!BX.type.isNumber(length))\n\t\t{\n\t\t\tlength = 0;\n\t\t}\n\n\t\tif (length <= 0 || text.length <= length)\n\t\t{\n\t\t\treturn text;\n\t\t}\n\n\t\tlet offset = length - 1;\n\t\tconst whitespaceOffset = text.substring(offset).search(/\\s/i);\n\t\tif (whitespaceOffset > 0)\n\t\t{\n\t\t\toffset += whitespaceOffset;\n\t\t}\n\t\treturn text.substring(0, offset) + \"...\";\n\t}\n}\n","import Stream from \"../stream\";\n\n/** @memberof BX.Crm.Timeline.Streams */\nexport default class EntityChat extends Stream\n{\n\tstatic LayoutType = {\n\t\tnone: 0,\n\t\tinvitation:  1,\n\t\tsummary: 2,\n\t}\n\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis._data = null;\n\t\tthis._layoutType = EntityChat.LayoutType.none;\n\n\t\tthis._wrapper = null;\n\t\tthis._contentWrapper = null;\n\t\tthis._messageWrapper = null;\n\t\tthis._messageDateNode = null;\n\t\tthis._messageTexWrapper = null;\n\t\tthis._messageTextNode = null;\n\t\tthis._userWrapper = null;\n\t\tthis._extraUserCounter = null;\n\n\t\tthis._openChatHandler = BX.delegate(this.onOpenChat, this);\n\t}\n\n\tdoInitialize()\n\t{\n\t\tthis._data = BX.prop.getObject(this._settings, \"data\", {});\n\t}\n\n\tgetData()\n\t{\n\t\treturn this._data;\n\t}\n\n\tsetData(data)\n\t{\n\t\tthis._data = BX.type.isPlainObject(data) ? data : {};\n\t}\n\n\tisEnabled()\n\t{\n\t\treturn BX.prop.getBoolean(this._data, \"ENABLED\", true);\n\t}\n\n\t/**\n\t * @private\n\t * @return {boolean}\n\t */\n\tisRestricted()\n\t{\n\t\treturn BX.prop.getBoolean(this._data, \"IS_RESTRICTED\", false);\n\t}\n\n\t/**\n\t * @private\n\t * @return {void}\n\t */\n\tapplyLockScript()\n\t{\n\t\tconst lockScript = BX.prop.getString(this._data, \"LOCK_SCRIPT\", null);\n\t\tif (BX.Type.isString(lockScript) && lockScript !== '')\n\t\t{\n\t\t\teval(lockScript);\n\t\t}\n\t}\n\n\tgetChatId()\n\t{\n\t\treturn BX.prop.getInteger(this._data, \"CHAT_ID\", 0);\n\t}\n\n\tgetUserId()\n\t{\n\t\tconst userId = parseInt(top.BX.message(\"USER_ID\"));\n\t\treturn !isNaN(userId) ? userId : 0;\n\t}\n\n\tgetMessageData()\n\t{\n\t\treturn BX.prop.getObject(this._data, \"MESSAGE\", {});\n\t}\n\n\tsetMessageData(data)\n\t{\n\t\tthis._data[\"MESSAGE\"] = BX.type.isPlainObject(data) ? data : {};\n\t}\n\n\tgetUserInfoData()\n\t{\n\t\treturn BX.prop.getObject(this._data, \"USER_INFOS\", {});\n\t}\n\n\tsetUserInfoData(data)\n\t{\n\t\tthis._data[\"USER_INFOS\"] = BX.type.isPlainObject(data) ? data : {};\n\t}\n\n\thasUserInfo(userId)\n\t{\n\t\treturn userId > 0 && BX.type.isPlainObject(this.getUserInfoData()[userId]);\n\t}\n\n\tgetUserInfo(userId)\n\t{\n\t\tconst userInfos = this.getUserInfoData();\n\t\treturn userId > 0 && BX.type.isPlainObject(userInfos[userId]) ? userInfos[userId] : null;\n\t}\n\n\tremoveUserInfo(userId)\n\t{\n\t\tconst userInfos = this.getUserInfoData();\n\t\tif(userId > 0 && BX.type.isPlainObject(userInfos[userId]))\n\t\t{\n\t\t\tdelete userInfos[userId];\n\t\t}\n\t}\n\n\tsetUnreadMessageCounter(userId, counter)\n\t{\n\t\tconst userInfos = this.getUserInfoData();\n\t\tif(userId > 0 && BX.type.isPlainObject(userInfos[userId]))\n\t\t{\n\t\t\tuserInfos[userId][\"counter\"] = counter;\n\t\t}\n\t}\n\n\tlayout()\n\t{\n\t\tif(!this.isEnabled() || this.isStubMode())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis._wrapper = BX.create(\"div\", { props: { className: \"crm-entity-stream-section crm-entity-stream-section-live-im\" } });\n\t\tthis._container.appendChild(this._wrapper);\n\n\t\tthis._wrapper.appendChild(\n\t\t\tBX.create(\"div\", { props: { className: \"crm-entity-stream-section-icon crm-entity-stream-section-icon-live-im\" } })\n\t\t);\n\n\t\tthis._contentWrapper = BX.create(\"div\", { props: { className: \"crm-entity-stream-content-live-im-detail\" } });\n\n\t\tthis._wrapper.appendChild(\n\t\t\tBX.create(\"div\",\n\t\t\t\t{\n\t\t\t\t\tprops: { className: \"crm-entity-stream-section-content\" },\n\t\t\t\t\tchildren:\n\t\t\t\t\t\t[\n\t\t\t\t\t\t\tBX.create(\"div\",\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tprops: { className: \"crm-entity-stream-content-event\" },\n\t\t\t\t\t\t\t\t\tchildren: [ this._contentWrapper ]\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\n\t\tthis._userWrapper = BX.create(\"div\", { props: { className: \"crm-entity-stream-live-im-user-avatars\" } });\n\t\tthis._contentWrapper.appendChild(\n\t\t\tBX.create(\"div\",\n\t\t\t\t{\n\t\t\t\t\tprops: { className: \"crm-entity-stream-live-im-users\" },\n\t\t\t\t\tchildren: [ this._userWrapper ]\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\n\t\tthis._extraUserCounter = BX.create(\"div\",{ props: { className: \"crm-entity-stream-live-im-user-counter\" } });\n\t\tthis._contentWrapper.appendChild(this._extraUserCounter);\n\n\t\tthis._layoutType = EntityChat.LayoutType.none;\n\t\tif(this.getChatId() > 0)\n\t\t{\n\t\t\tthis.renderSummary();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.renderInvitation();\n\t\t}\n\n\t\tBX.bind(this._contentWrapper, \"click\", this._openChatHandler);\n\t\tBX.addCustomEvent(\"onPullEvent-im\", this.onChatEvent.bind(this));\n\t}\n\n\trefreshLayout()\n\t{\n\t\tBX.cleanNode(this._contentWrapper);\n\t\tthis._userWrapper = BX.create(\"div\", { props: { className: \"crm-entity-stream-live-im-user-avatars\" } });\n\t\tthis._contentWrapper.appendChild(\n\t\t\tBX.create(\"div\",\n\t\t\t\t{\n\t\t\t\t\tprops: { className: \"crm-entity-stream-live-im-users\" },\n\t\t\t\t\tchildren: [ this._userWrapper ]\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\n\t\tthis._extraUserCounter = BX.create(\"div\",{ props: { className: \"crm-entity-stream-live-im-user-counter\" } });\n\t\tthis._contentWrapper.appendChild(this._extraUserCounter);\n\n\t\tthis._layoutType = EntityChat.LayoutType.none;\n\t\tif(this.getChatId() > 0)\n\t\t{\n\t\t\tthis.renderSummary();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.renderInvitation();\n\t\t}\n\t}\n\n\trenderInvitation()\n\t{\n\t\tthis._layoutType = EntityChat.LayoutType.invitation;\n\t\tthis.refreshUsers();\n\n\t\tthis._messageTextNode = BX.create(\"div\", { props: { className: \"crm-entity-stream-live-im-user-invite-text\" } });\n\t\tthis._contentWrapper.appendChild(this._messageTextNode);\n\n\t\tthis._messageTextNode.innerHTML = this.getMessage(\"invite\");\n\t}\n\n\trenderSummary()\n\t{\n\t\tthis._layoutType = EntityChat.LayoutType.summary;\n\t\tthis.refreshUsers();\n\n\t\tthis._contentWrapper.appendChild(\n\t\t\tBX.create(\"div\", { props: { className: \"crm-entity-stream-live-im-separator\" } })\n\t\t);\n\n\t\tthis._messageWrapper = BX.create(\"div\", { props: { className: \"crm-entity-stream-live-im-messanger\" } });\n\t\tthis._contentWrapper.appendChild(this._messageWrapper);\n\n\t\tthis._messageDateNode = BX.create(\"div\", { props: { className: \"crm-entity-stream-live-im-time\" } });\n\t\tthis._messageWrapper.appendChild(this._messageDateNode);\n\n\t\tthis._messageTexWraper = BX.create(\"div\", { props: { className: \"crm-entity-stream-live-im-message\" } });\n\t\tthis._messageWrapper.appendChild(this._messageTexWraper);\n\n\t\tthis._messageTextNode = BX.create(\"div\", { props: { className: \"crm-entity-stream-live-im-message-text\" } });\n\t\tthis._messageTexWraper.appendChild(this._messageTextNode);\n\n\t\tthis._messageCounterNode = BX.create(\"div\", { props: { className: \"crm-entity-stream-live-im-message-counter\" } });\n\t\tthis._messageWrapper.appendChild(this._messageCounterNode);\n\n\t\tthis.refreshSummary();\n\t}\n\n\trefreshUsers()\n\t{\n\t\tBX.cleanNode(this._userWrapper);\n\n\t\tconst infos = this.getUserInfoData();\n\t\tconst list = Object.values(infos);\n\n\t\tif(list.length === 0)\n\t\t{\n\t\t\tthis._userWrapper.appendChild(\n\t\t\t\tBX.create(\"span\",\n\t\t\t\t\t{\n\t\t\t\t\t\tprops: { className: \"crm-entity-stream-live-im-user-avatar ui-icon ui-icon-common-user\" },\n\t\t\t\t\t\tchildren: [ BX.create(\"i\") ]\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tconst count = list.length >= 3 ? 3 : list.length;\n\t\t\tfor(let i = 0; i < count; i++)\n\t\t\t{\n\t\t\t\tconst info = list[i];\n\n\t\t\t\tconst icon = BX.create(\"i\");\n\t\t\t\tconst imageUrl = BX.prop.getString(info, \"avatar\", \"\");\n\t\t\t\tif(imageUrl !== \"\")\n\t\t\t\t{\n\t\t\t\t\ticon.style.backgroundImage = \"url(\" +  imageUrl + \")\";\n\t\t\t\t}\n\n\t\t\t\tthis._userWrapper.appendChild(\n\t\t\t\t\tBX.create(\"span\",\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tprops: { className: \"crm-entity-stream-live-im-user-avatar ui-icon ui-icon-common-user\" },\n\t\t\t\t\t\t\tchildren: [ icon ]\n\t\t\t\t\t\t}\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tif(this._layoutType === EntityChat.LayoutType.summary)\n\t\t{\n\t\t\tif(list.length > 3)\n\t\t\t{\n\t\t\t\tthis._extraUserCounter.display = \"\";\n\t\t\t\tthis._extraUserCounter.innerHTML = \"+\" + (list.length - 3).toString();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif(this._extraUserCounter.innerHTML !== \"\")\n\t\t\t\t{\n\t\t\t\t\tthis._extraUserCounter.innerHTML = \"\";\n\t\t\t\t}\n\t\t\t\tthis._extraUserCounter.display = \"none\";\n\t\t\t}\n\t\t}\n\t\telse //if(this._layoutType === EntityChat.LayoutType.invitation)\n\t\t{\n\t\t\tif(this._extraUserCounter.innerHTML !== \"\")\n\t\t\t{\n\t\t\t\tthis._extraUserCounter.innerHTML = \"\";\n\t\t\t}\n\t\t\tthis._extraUserCounter.display = \"none\";\n\n\t\t\tthis._userWrapper.appendChild(\n\t\t\t\tBX.create(\"span\", { props: { className: \"crm-entity-stream-live-im-user-invite-btn\" } })\n\t\t\t);\n\t\t}\n\t}\n\n\trefreshSummary()\n\t{\n\t\tif(this._layoutType !== EntityChat.LayoutType.summary)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst message = this.getMessageData();\n\n\t\t//region Message Date\n\t\tconst isoDate = BX.prop.getString(message, \"date\", \"\");\n\t\tif(isoDate === \"\")\n\t\t{\n\t\t\tthis._messageDateNode.innerHTML = \"\";\n\t\t}\n\t\telse\n\t\t{\n\t\t\tconst remoteDate = (new Date(isoDate)).getTime() / 1000 + this.getServerTimezoneOffset() + this.getUserTimezoneOffset();\n\t\t\tconst localTime = (new Date).getTime() / 1000 + this.getServerTimezoneOffset() + this.getUserTimezoneOffset();\n\t\t\tthis._messageDateNode.innerHTML = this.formatTime(remoteDate, localTime, true);\n\t\t}\n\t\t//endregion\n\n\t\t//region Message Text\n\t\tlet text = BX.prop.getString(message, \"text\", \"\");\n\t\tconst params = BX.prop.getObject(message, \"params\", {});\n\t\tif(text === \"\")\n\t\t{\n\t\t\tthis._messageTextNode.innerHTML = \"\";\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif(typeof(top.BX.MessengerCommon) !== \"undefined\")\n\t\t\t{\n\t\t\t\ttext = top.BX.MessengerCommon.purifyText(text, params);\n\t\t\t}\n\t\t\tthis._messageTextNode.innerHTML = text;\n\t\t}\n\t\t//endregion\n\n\t\t//region Unread Message Counter\n\t\tlet counter = 0;\n\t\tconst userId = this.getUserId();\n\t\tif(userId > 0)\n\t\t{\n\t\t\tcounter = BX.prop.getInteger(\n\t\t\t\tBX.prop.getObject(\n\t\t\t\t\tBX.prop.getObject(this._data, \"USER_INFOS\", {}),\n\t\t\t\t\tuserId,\n\t\t\t\t\tnull\n\t\t\t\t),\n\t\t\t\t\"counter\",\n\t\t\t\t0\n\t\t\t);\n\t\t}\n\n\t\tthis._messageCounterNode.innerHTML = counter.toString();\n\t\tthis._messageCounterNode.style.display = counter > 0 ? \"\" : \"none\";\n\t\t//endregion\n\t}\n\n\trefreshUsersAnimated()\n\t{\n\t\tBX.removeClass(this._userWrapper, 'crm-entity-stream-live-im-message-show');\n\t\tBX.addClass(this._userWrapper, 'crm-entity-stream-live-im-message-hide');\n\n\t\twindow.setTimeout(\n\t\t\tfunction()\n\t\t\t{\n\t\t\t\tthis.refreshUsers();\n\t\t\t\twindow.setTimeout(\n\t\t\t\t\tfunction()\n\t\t\t\t\t{\n\t\t\t\t\t\tBX.removeClass(this._userWrapper, 'crm-entity-stream-live-im-message-hide');\n\t\t\t\t\t\tBX.addClass(this._userWrapper, 'crm-entity-stream-live-im-message-show');\n\t\t\t\t\t}.bind(this),\n\t\t\t\t\t50\n\t\t\t\t);\n\t\t\t}.bind(this),\n\t\t\t500\n\t\t);\n\t}\n\n\trefreshSummaryAnimated()\n\t{\n\t\tBX.removeClass(this._messageWrapper, 'crm-entity-stream-live-im-message-show');\n\t\tBX.addClass(this._messageWrapper, 'crm-entity-stream-live-im-message-hide');\n\n\t\twindow.setTimeout(\n\t\t\tfunction()\n\t\t\t{\n\t\t\t\tthis.refreshSummary();\n\t\t\t\twindow.setTimeout(\n\t\t\t\t\tfunction()\n\t\t\t\t\t{\n\t\t\t\t\t\tBX.removeClass(this._messageWrapper, 'crm-entity-stream-live-im-message-hide');\n\t\t\t\t\t\tBX.addClass(this._messageWrapper, 'crm-entity-stream-live-im-message-show');\n\t\t\t\t\t}.bind(this),\n\t\t\t\t\t50\n\t\t\t\t);\n\t\t\t}.bind(this),\n\t\t\t500\n\t\t);\n\t}\n\n\tonOpenChat(e)\n\t{\n\t\tif(typeof(top.BXIM) === \"undefined\")\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.isRestricted())\n\t\t{\n\t\t\tthis.applyLockScript();\n\n\t\t\treturn;\n\t\t}\n\n\t\tlet slug = \"\";\n\n\t\tconst chatId = this.getChatId();\n\t\tif(chatId > 0 && this.hasUserInfo(this.getUserId()))\n\t\t{\n\t\t\tslug = \"chat\" + chatId.toString();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tconst ownerInfo = this.getOwnerInfo();\n\t\t\tconst entityId = BX.prop.getInteger(ownerInfo, \"ENTITY_ID\", 0);\n\t\t\tconst entityTypeName = BX.prop.getString(ownerInfo, \"ENTITY_TYPE_NAME\", \"\");\n\n\t\t\tif(entityTypeName !== \"\" && entityId > 0)\n\t\t\t{\n\t\t\t\tslug = \"crm|\" + entityTypeName + \"|\" + entityId.toString();\n\t\t\t}\n\t\t}\n\n\t\tif(slug !== \"\")\n\t\t{\n\t\t\ttop.BXIM.openMessengerSlider(slug, { RECENT: \"N\", MENU: \"N\" });\n\t\t}\n\t}\n\n\tonChatEvent(command, params, extras)\n\t{\n\t\tconst chatId = this.getChatId();\n\t\tif(chatId <= 0 || chatId !== BX.prop.getInteger(params, \"chatId\", 0))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif(command === \"chatUserAdd\")\n\t\t{\n\t\t\tthis.setUserInfoData(BX.mergeEx(this.getUserInfoData(), BX.prop.getObject(params, \"users\", {})));\n\t\t\tthis.refreshUsersAnimated();\n\t\t}\n\t\telse if(command === \"chatUserLeave\")\n\t\t{\n\t\t\tthis.removeUserInfo(BX.prop.getInteger(params, \"userId\", 0));\n\t\t\tthis.refreshUsersAnimated();\n\t\t}\n\t\telse if(command === \"messageChat\")\n\t\t{\n\t\t\t//Message was added.\n\t\t\tthis.setMessageData(BX.prop.getObject(params, \"message\", {}));\n\t\t\tthis.setUnreadMessageCounter(this.getUserId(), BX.prop.getInteger(params, \"counter\", 0));\n\t\t\tthis.refreshSummaryAnimated();\n\t\t}\n\t\telse if(command === \"messageUpdate\" || command === \"messageDelete\")\n\t\t{\n\t\t\t//Message was modified or removed.\n\t\t\tif(command === \"messageDelete\")\n\t\t\t{\n\t\t\t\t//HACK: date is not in ISO format\n\t\t\t\tdelete params[\"date\"];\n\t\t\t}\n\n\t\t\tconst message = this.getMessageData();\n\t\t\tif(BX.prop.getInteger(message, \"id\", 0) === BX.prop.getInteger(params, \"id\", 0))\n\t\t\t{\n\t\t\t\tthis.setMessageData(BX.mergeEx(message, params));\n\t\t\t\tthis.refreshSummaryAnimated();\n\t\t\t}\n\t\t}\n\t\telse if(command === \"readMessageChat\")\n\t\t{\n\t\t\tthis.setUnreadMessageCounter(this.getUserId(), 0);\n\t\t\tthis.refreshSummaryAnimated();\n\t\t}\n\t\telse if(command === \"unreadMessageChat\")\n\t\t{\n\t\t\tthis.setUnreadMessageCounter(this.getUserId(), BX.prop.getInteger(params, \"counter\", 0));\n\t\t\tthis.refreshSummaryAnimated();\n\t\t}\n\t}\n\n\tgetMessage(name)\n\t{\n\t\treturn BX.prop.getString(EntityChat.messages, name, name);\n\t}\n\n\tstatic create(id, settings)\n\t{\n\t\tconst self = new EntityChat();\n\t\tself.initialize(id, settings);\n\t\tEntityChat.items[self.getId()] = self;\n\t\treturn self;\n\t}\n\n\tstatic items = {};\n\tstatic messages = {};\n}\n","import Manager from \"../manager\";\n\n/** @memberof BX.Crm.Timeline.Tools */\nexport default class MenuBar\n{\n\tconstructor()\n\t{\n\t\tthis._id = \"\";\n\t\tthis._ownerInfo = null;\n\t\tthis._container = null;\n\t\tthis._activityEditor = null;\n\t\tthis._commentEditor = null;\n\t\tthis._waitEditor = null;\n\t\tthis._smsEditor = null;\n\t\tthis._zoomEditor = null;\n\t\tthis._readOnly = false;\n\n\t\tthis._menu = null;\n\t\tthis._manager = null;\n\t}\n\n\tstatic create(id, settings)\n\t{\n\t\tconst self = new MenuBar();\n\t\tself.initialize(id, settings);\n\t\treturn self;\n\t}\n\n\tinitialize(id, settings)\n\t{\n\t\tthis._id = BX.type.isNotEmptyString(id) ? id : BX.util.getRandomString(4);\n\t\tthis._settings = settings ? settings : {};\n\n\t\tthis._ownerInfo = BX.prop.getObject(this._settings, \"ownerInfo\");\n\t\tif (!this._ownerInfo)\n\t\t{\n\t\t\tthrow \"MenuBar. A required parameter 'ownerInfo' is missing.\";\n\t\t}\n\n\t\tthis._activityEditor = BX.prop.get(this._settings, \"activityEditor\", null);\n\n\t\tthis._commentEditor = BX.prop.get(this._settings, \"commentEditor\");\n\t\tthis._waitEditor = BX.prop.get(this._settings, \"waitEditor\");\n\t\tthis._smsEditor = BX.prop.get(this._settings, \"smsEditor\");\n\t\tthis._zoomEditor = BX.prop.get(this._settings, \"zoomEditor\");\n\t\tthis._restEditor = BX.prop.get(this._settings, \"restEditor\");\n\t\tthis._manager = BX.prop.get(this._settings, \"manager\");\n\n\t\tif (!(this._manager instanceof Manager))\n\t\t{\n\t\t\tthrow \"BX.CrmTimeline. Manager instance is not found.\";\n\t\t}\n\n\t\tthis._readOnly = BX.prop.getBoolean(this._settings, \"readOnly\", false);\n\t\tthis._menu = BX.Main.interfaceButtonsManager.getById(\n\t\t\tBX.prop.getString(this._settings, \"menuId\", (this._ownerInfo['ENTITY_TYPE_NAME'] + \"_menu\").toLowerCase())\n\t\t);\n\n\t\tBX.addCustomEvent(this._manager.getId() + \"_menu\", function (id) {\n\t\t\tthis.setActiveItemById(id);\n\t\t}.bind(this));\n\t\tthis._activeItem = this._menu.getActive();\n\t}\n\n\treset()\n\t{\n\t\tlet firstId = null;\n\t\tthis._menu.getAllItems().forEach(function (item) {\n\t\t\tif (firstId === null)\n\t\t\t{\n\t\t\t\tconst id = item.dataset.id;\n\t\t\t\tif ([\"comment\", \"wait\", \"sms\", \"zoom\"].indexOf(id) >= 0 && this[(\"_\" + id + \"Editor\")])\n\t\t\t\t{\n\t\t\t\t\tfirstId = id;\n\t\t\t\t}\n\t\t\t}\n\t\t}.bind(this));\n\t\tthis.setActiveItemById(firstId || \"comment\");\n\t}\n\n\tgetId()\n\t{\n\t\treturn this._id;\n\t}\n\n\tsetActiveItemById(id)\n\t{\n\t\tif (this.processItemSelection(id) === true)\n\t\t{\n\t\t\tconst currentDiv = this._menu.getItemById(id);\n\t\t\tif (currentDiv && this._activeItem !== currentDiv)\n\t\t\t{\n\t\t\t\tconst wasActiveInMoreMenu = this._menu.isActiveInMoreMenu();\n\t\t\t\tBX.addClass(currentDiv, this._menu.classes.itemActive);\n\n\t\t\t\tif (this._menu.getItemData)\n\t\t\t\t{\n\t\t\t\t\tconst currentDivData = this._menu.getItemData(currentDiv);\n\t\t\t\t\tcurrentDivData['IS_ACTIVE'] = true;\n\t\t\t\t\tif (BX.type.isDomNode(this._activeItem))\n\t\t\t\t\t{\n\t\t\t\t\t\tBX.removeClass(this._activeItem, this._menu.classes.itemActive);\n\t\t\t\t\t\tconst activeItemData = this._menu.getItemData(this._activeItem);\n\t\t\t\t\t\tactiveItemData['IS_ACTIVE'] = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\t// Old approach\n\t\t\t\t\tlet isActiveData = {};\n\t\t\t\t\ttry\n\t\t\t\t\t{\n\t\t\t\t\t\tisActiveData = JSON.parse(currentDiv.dataset.item);\n\t\t\t\t\t}\n\t\t\t\t\tcatch (err)\n\t\t\t\t\t{\n\t\t\t\t\t\tisActiveData = {};\n\t\t\t\t\t}\n\t\t\t\t\tisActiveData.IS_ACTIVE = true;\n\t\t\t\t\tcurrentDiv.dataset.item = JSON.stringify(isActiveData);\n\t\t\t\t\tlet wasActiveData = {};\n\t\t\t\t\tif (BX.type.isDomNode(this._activeItem))\n\t\t\t\t\t{\n\t\t\t\t\t\tBX.removeClass(this._activeItem, this._menu.classes.itemActive);\n\t\t\t\t\t\ttry\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\twasActiveData = JSON.parse(this._activeItem.dataset.item);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcatch (err)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\twasActiveData = {};\n\t\t\t\t\t\t}\n\t\t\t\t\t\twasActiveData.IS_ACTIVE = false;\n\t\t\t\t\t\tthis._activeItem.dataset.item = JSON.stringify(wasActiveData);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconst isActiveInMoreMenu = this._menu.isActiveInMoreMenu();\n\t\t\t\tif (isActiveInMoreMenu || wasActiveInMoreMenu)\n\t\t\t\t{\n\t\t\t\t\tconst submenu = this._menu[\"getSubmenu\"] ? this._menu.getSubmenu() :\n\t\t\t\t\t\tBX.PopupMenu.getMenuById(\"main_buttons_popup_\" +\n\t\t\t\t\t\t\tString(this._ownerInfo['ENTITY_TYPE_NAME']).toLowerCase() + \"_menu\");\n\t\t\t\t\tif (submenu)\n\t\t\t\t\t{\n\t\t\t\t\t\tsubmenu.getMenuItems().forEach(function (menuItem) {\n\t\t\t\t\t\t\tconst container = menuItem.getContainer();\n\t\t\t\t\t\t\tif (isActiveInMoreMenu && container.title === currentDiv.title)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tBX.addClass(container, this._menu.classes.itemActive);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (wasActiveInMoreMenu && container.title === this._activeItem.title)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tBX.removeClass(container, this._menu.classes.itemActive);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}.bind(this));\n\t\t\t\t\t}\n\n\t\t\t\t\tif (isActiveInMoreMenu)\n\t\t\t\t\t{\n\t\t\t\t\t\tBX.addClass(this._menu.getMoreButton(), this._menu.classes.itemActive);\n\t\t\t\t\t}\n\t\t\t\t\telse if (wasActiveInMoreMenu)\n\t\t\t\t\t{\n\t\t\t\t\t\tBX.removeClass(this._menu.getMoreButton(), this._menu.classes.itemActive);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis._activeItem = currentDiv;\n\t\t\t}\n\t\t}\n\t\tthis._menu.closeSubmenu();\n\t}\n\n\tprocessItemSelection(menuId)\n\t{\n\t\tif (this._readOnly)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tlet planner = null;\n\t\tconst action = menuId;\n\t\tif (action === \"call\")\n\t\t{\n\t\t\tplanner = new BX.Crm.Activity.Planner();\n\t\t\tplanner.showEdit(\n\t\t\t\t{\n\t\t\t\t\t\"TYPE_ID\": BX.CrmActivityType.call,\n\t\t\t\t\t\"OWNER_TYPE_ID\": this._ownerInfo['ENTITY_TYPE_ID'],\n\t\t\t\t\t\"OWNER_ID\": this._ownerInfo['ENTITY_ID']\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t\tif (action === \"meeting\")\n\t\t{\n\t\t\tplanner = new BX.Crm.Activity.Planner();\n\t\t\tplanner.showEdit(\n\t\t\t\t{\n\t\t\t\t\t\"TYPE_ID\": BX.CrmActivityType.meeting,\n\t\t\t\t\t\"OWNER_TYPE_ID\": this._ownerInfo['ENTITY_TYPE_ID'],\n\t\t\t\t\t\"OWNER_ID\": this._ownerInfo['ENTITY_ID']\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t\telse if (action === \"email\")\n\t\t{\n\t\t\tthis._activityEditor.addEmail(\n\t\t\t\t{\n\t\t\t\t\t\"ownerType\": this._ownerInfo['ENTITY_TYPE_NAME'],\n\t\t\t\t\t\"ownerID\": this._ownerInfo['ENTITY_ID'],\n\t\t\t\t\t\"ownerUrl\": this._ownerInfo['SHOW_URL'],\n\t\t\t\t\t\"ownerTitle\": this._ownerInfo['TITLE'],\n\t\t\t\t\t\"subject\": \"\"\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t\telse if (action === \"delivery\")\n\t\t{\n\t\t\tthis._activityEditor.addDelivery(\n\t\t\t\t{\n\t\t\t\t\t\"ownerType\": this._ownerInfo['ENTITY_TYPE_NAME'],\n\t\t\t\t\t\"ownerID\": this._ownerInfo['ENTITY_ID'],\n\t\t\t\t\t\"orderList\": this._ownerInfo['ORDER_LIST']\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t\telse if (action === \"task\")\n\t\t{\n\t\t\tthis._activityEditor.addTask(\n\t\t\t\t{\n\t\t\t\t\t\"ownerType\": this._ownerInfo['ENTITY_TYPE_NAME'],\n\t\t\t\t\t\"ownerID\": this._ownerInfo['ENTITY_ID']\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t\telse if ([\"comment\", \"wait\", \"sms\", \"zoom\"].indexOf(action) >= 0 && this[(\"_\" + action + \"Editor\")])\n\t\t{\n\t\t\tif (this._commentEditor)\n\t\t\t{\n\t\t\t\tthis._commentEditor.setVisible(action === \"comment\");\n\t\t\t}\n\t\t\tif (this._waitEditor)\n\t\t\t{\n\t\t\t\tthis._waitEditor.setVisible(action === \"wait\");\n\t\t\t}\n\t\t\tif (this._smsEditor)\n\t\t\t{\n\t\t\t\tthis._smsEditor.setVisible(action === \"sms\");\n\t\t\t}\n\t\t\tif (this._zoomEditor)\n\t\t\t{\n\t\t\t\tthis._zoomEditor.setVisible(action === \"zoom\");\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t\telse if (action === \"visit\")\n\t\t{\n\t\t\tconst visitParameters = this._manager.getSetting(\"visitParameters\");\n\t\t\tvisitParameters['OWNER_TYPE'] = this._ownerInfo['ENTITY_TYPE_NAME'];\n\t\t\tvisitParameters['OWNER_ID'] = this._ownerInfo['ENTITY_ID'];\n\t\t\tBX.CrmActivityVisit.create(visitParameters).showEdit();\n\t\t}\n\t\telse if (action.match(/^activity_rest_/))\n\t\t{\n\t\t\tif (this._restEditor)\n\t\t\t{\n\t\t\t\tthis._restEditor.action(action);\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n}\n","/** @memberof BX.Crm.Timeline.Tools */\nexport default class AudioPlaybackRateSelector\n{\n\tconstructor(params)\n\t{\n\t\tthis.name = params.name || 'crm-timeline-audio-playback-rate-selector';\n\t\tthis.menuId = this.name + '-menu';\n\t\tif(BX.Type.isArray(params.availableRates))\n\t\t{\n\t\t\tthis.availableRates = params.availableRates;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.availableRates = [1, 1.5, 2, 3];\n\t\t}\n\t\tthis.currentRate = this.normalizeRate(params.currentRate);\n\t\tthis.textMessageCode = params.textMessageCode;\n\t\tthis.renderedItems = [];\n\t\tthis.players = [];\n\t}\n\n\tisRateCurrent(rateDescription, rate)\n\t{\n\t\treturn ((rateDescription.rate && rate === rateDescription.rate) || rate === rateDescription);\n\t}\n\n\tnormalizeRate(rate)\n\t{\n\t\trate = parseFloat(rate);\n\t\tlet i = 0;\n\t\tconst length = this.availableRates.length;\n\t\tfor(; i < length; i++)\n\t\t{\n\t\t\tif(this.isRateCurrent(this.availableRates[i], rate))\n\t\t\t{\n\t\t\t\treturn rate;\n\t\t\t}\n\t\t}\n\n\t\treturn (this.availableRates[0].rate || this.availableRates[0]);\n\t}\n\n\tgetMenuItems()\n\t{\n\t\tconst selectedRate = this.getRate();\n\n\t\treturn this.availableRates.map(function(item) {\n\t\t\treturn {\n\t\t\t\ttext: (item.text || item) + '',\n\t\t\t\thtml: (item.html || item) + '',\n\t\t\t\tclassName: (this.isRateCurrent(item, selectedRate)) ? 'menu-popup-item-text-active' : null,\n\t\t\t\tonclick: function() {\n\t\t\t\t\tthis.setRate(item.rate || item)\n\t\t\t\t}.bind(this)\n\t\t\t}\n\t\t}.bind(this))\n\t}\n\n\tgetPopup(node)\n\t{\n\t\tlet popupMenu = BX.Main.MenuManager.getMenuById(this.menuId);\n\t\tif(popupMenu)\n\t\t{\n\t\t\tconst popupWindow = popupMenu.getPopupWindow();\n\t\t\tif (popupWindow)\n\t\t\t{\n\t\t\t\tpopupWindow.setBindElement(node);\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tpopupMenu = BX.Main.MenuManager.create({\n\t\t\t\tid: this.menuId,\n\t\t\t\tbindElement: node,\n\t\t\t\titems: this.getMenuItems(),\n\t\t\t\tclassName: 'crm-audio-cap-speed-popup'\n\t\t\t});\n\t\t}\n\n\t\treturn popupMenu;\n\t}\n\n\tgetRate()\n\t{\n\t\treturn this.normalizeRate(this.currentRate);\n\t}\n\n\tsetRate(rate)\n\t{\n\t\tthis.getPopup().destroy();\n\n\t\trate = this.normalizeRate(rate);\n\t\tif(this.currentRate === rate)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tthis.currentRate = rate;\n\t\tBX.userOptions.save(\"crm\", this.name, 'rate', rate);\n\n\t\tfor(let i = 0, length = this.renderedItems.length; i < length; i++)\n\t\t{\n\t\t\tconst textNode = this.renderedItems[i].querySelector('.crm-audio-cap-speed-text');\n\t\t\tif(textNode)\n\t\t\t{\n\t\t\t\ttextNode.innerHTML = this.getText();\n\t\t\t}\n\t\t}\n\n\t\tfor(let i = 0, length = this.players.length; i < length; i++)\n\t\t{\n\t\t\tthis.players[i].vjsPlayer.playbackRate(this.getRate());\n\t\t}\n\t}\n\n\tgetText()\n\t{\n\t\tlet text;\n\n\t\tif(this.textMessageCode)\n\t\t{\n\t\t\ttext = BX.Loc.getMessage(this.textMessageCode);\n\t\t}\n\t\tif(!text)\n\t\t{\n\t\t\ttext = '#RATE#';\n\t\t}\n\n\t\treturn text.replace('#RATE#', '<span>' + this.getRate() + 'x</span>');\n\t}\n\n\trender()\n\t{\n\t\tconst item = BX.Dom.create('div', {\n\t\t\tattrs: {\n\t\t\t\tclassName: 'crm-audio-cap-speed-wrapper'\n\t\t\t},\n\t\t\tchildren: [\n\t\t\t\tBX.Dom.create('div', {\n\t\t\t\t\tattrs: {\n\t\t\t\t\t\tclassName: 'crm-audio-cap-speed',\n\t\t\t\t\t},\n\t\t\t\t\tchildren: [\n\t\t\t\t\t\tBX.Dom.create('div', {\n\t\t\t\t\t\t\tattrs: {\n\t\t\t\t\t\t\t\tclassName: 'crm-audio-cap-speed-text'\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\thtml: this.getText()\n\t\t\t\t\t\t})\n\t\t\t\t\t],\n\t\t\t\t})\n\t\t\t],\n\t\t\tevents: {\n\t\t\t\tclick: function (event) {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tthis.getPopup(event.target).show()\n\t\t\t\t}.bind(this)\n\t\t\t}\n\t\t});\n\t\tthis.renderedItems.push(item);\n\n\t\treturn item;\n\t}\n\n\taddPlayer(player)\n\t{\n\t\tif(BX.Fileman.Player && player instanceof BX.Fileman.Player)\n\t\t{\n\t\t\tthis.players.push(player);\n\t\t}\n\t}\n}\n","/** @memberof BX.Crm.Timeline.Tools */\nexport default class SchedulePostponeController\n{\n\tconstructor()\n\t{\n\t\tthis._item = null;\n\t}\n\n\tinitialize(id, settings)\n\t{\n\t\tthis._id = BX.type.isNotEmptyString(id) ? id : BX.util.getRandomString(4);\n\t\tthis._settings = settings ? settings : {};\n\t\tthis._item = BX.prop.get(this._settings, \"item\", null);\n\t}\n\n\tgetTitle()\n\t{\n\t\treturn this.getMessage(\"title\");\n\t}\n\n\tgetCommandList()\n\t{\n\t\treturn(\n\t\t\t[\n\t\t\t\t{ name: \"postpone_hour_1\", title: this.getMessage(\"forOneHour\") },\n\t\t\t\t{ name: \"postpone_hour_2\", title: this.getMessage(\"forTwoHours\") },\n\t\t\t\t{ name: \"postpone_hour_3\", title: this.getMessage(\"forThreeHours\") },\n\t\t\t\t{ name: \"postpone_day_1\", title: this.getMessage(\"forOneDay\") },\n\t\t\t\t{ name: \"postpone_day_2\", title: this.getMessage(\"forTwoDays\") },\n\t\t\t\t{ name: \"postpone_day_3\", title: this.getMessage(\"forThreeDays\") }\n\t\t\t]\n\t\t);\n\t}\n\n\tprocessCommand(command)\n\t{\n\t\tif(command.indexOf(\"postpone\") !== 0)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tlet offset = 0;\n\t\tif(command === \"postpone_hour_1\")\n\t\t{\n\t\t\toffset = 3600;\n\t\t}\n\t\telse if(command === \"postpone_hour_2\")\n\t\t{\n\t\t\toffset = 7200;\n\t\t}\n\t\telse if(command === \"postpone_hour_3\")\n\t\t{\n\t\t\toffset = 10800;\n\t\t}\n\t\telse if(command === \"postpone_day_1\")\n\t\t{\n\t\t\toffset = 86400;\n\t\t}\n\t\telse if(command === \"postpone_day_2\")\n\t\t{\n\t\t\toffset = 172800;\n\t\t}\n\t\telse if(command === \"postpone_day_3\")\n\t\t{\n\t\t\toffset = 259200;\n\t\t}\n\n\t\tif(offset > 0 && this._item)\n\t\t{\n\t\t\tthis._item.postpone(offset);\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tgetMessage(name)\n\t{\n\t\tconst m = SchedulePostponeController.messages;\n\t\treturn m.hasOwnProperty(name) ? m[name] : name;\n\t}\n\n\tstatic create(id, settings)\n\t{\n\t\tconst self = new SchedulePostponeController();\n\t\tself.initialize(id, settings);\n\t\treturn self;\n\t}\n\n\tstatic messages = {};\n}\n","import Scheduled from \"../scheduled\";\nimport {Item as ItemType} from \"../../types\";\nimport Item from \"../../item\";\nimport SchedulePostponeController from \"../../tools/schedule-postpone-controller\";\n\n/** @memberof BX.Crm.Timeline.Items.Scheduled */\nexport default class Activity extends Scheduled\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis._postponeController = null;\n\t}\n\n\tgetTypeId()\n\t{\n\t\treturn ItemType.activity;\n\t}\n\n\tisDone()\n\t{\n\t\tconst status = BX.prop.getInteger(this.getAssociatedEntityData(), \"STATUS\");\n\t\treturn (status ===  BX.CrmActivityStatus.completed || status ===  BX.CrmActivityStatus.autoCompleted);\n\t}\n\n\tsetAsDone(isDone)\n\t{\n\t\tisDone = !!isDone;\n\t\tif(this.isDone() === isDone)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst id = BX.prop.getInteger(this.getAssociatedEntityData(), \"ID\", 0);\n\t\tif(id > 0)\n\t\t{\n\t\t\tthis._activityEditor.setActivityCompleted(\n\t\t\t\tid,\n\t\t\t\tisDone,\n\t\t\t\tBX.delegate(this.onSetAsDoneCompleted, this)\n\t\t\t);\n\t\t}\n\t}\n\n\tpostpone(offset)\n\t{\n\t\tconst id = this.getSourceId();\n\t\tif(id > 0 && offset > 0)\n\t\t{\n\t\t\tthis._activityEditor.postponeActivity(\n\t\t\t\tid,\n\t\t\t\toffset,\n\t\t\t\tBX.delegate(this.onPosponeCompleted, this)\n\t\t\t);\n\t\t}\n\t}\n\n\tview()\n\t{\n\t\tconst id = BX.prop.getInteger(this.getAssociatedEntityData(), \"ID\", 0);\n\t\tif(id > 0)\n\t\t{\n\t\t\tthis._activityEditor.viewActivity(id);\n\t\t}\n\t}\n\n\tedit()\n\t{\n\t\tthis.closeContextMenu();\n\t\tconst associatedEntityTypeId = this.getAssociatedEntityTypeId();\n\t\tif(associatedEntityTypeId === BX.CrmEntityType.enumeration.activity)\n\t\t{\n\t\t\tconst entityData = this.getAssociatedEntityData();\n\t\t\tconst id = BX.prop.getInteger(entityData, \"ID\", 0);\n\t\t\tif(id > 0)\n\t\t\t{\n\t\t\t\tthis._activityEditor.editActivity(id);\n\t\t\t}\n\t\t}\n\t}\n\n\tprocessRemoval()\n\t{\n\t\tthis.closeContextMenu();\n\t\tthis._detetionConfirmDlgId = \"entity_timeline_deletion_\" + this.getId() + \"_confirm\";\n\t\tlet dlg = BX.Crm.ConfirmationDialog.get(this._detetionConfirmDlgId);\n\t\tif(!dlg)\n\t\t{\n\t\t\tdlg = BX.Crm.ConfirmationDialog.create(\n\t\t\t\tthis._detetionConfirmDlgId,\n\t\t\t\t{\n\t\t\t\t\ttitle: this.getMessage(\"removeConfirmTitle\"),\n\t\t\t\t\tcontent: this.getRemoveMessage()\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\tdlg.open().then(BX.delegate(this.onRemovalConfirm, this), BX.delegate(this.onRemovalCancel, this));\n\t}\n\n\tgetRemoveMessage()\n\t{\n\t\treturn this.getMessage('removeConfirm');\n\t}\n\n\tonRemovalConfirm(result)\n\t{\n\t\tif(BX.prop.getBoolean(result, \"cancel\", true))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.remove();\n\t}\n\n\tonRemovalCancel()\n\t{\n\t}\n\n\tremove()\n\t{\n\t\tconst associatedEntityTypeId = this.getAssociatedEntityTypeId();\n\n\t\tif(associatedEntityTypeId === BX.CrmEntityType.enumeration.activity)\n\t\t{\n\t\t\tconst entityData = this.getAssociatedEntityData();\n\n\t\t\tconst id = BX.prop.getInteger(entityData, \"ID\", 0);\n\n\t\t\tif(id > 0)\n\t\t\t{\n\t\t\t\tconst activityEditor = this._activityEditor;\n\t\t\t\tconst item = activityEditor.getItemById(id);\n\t\t\t\tif (item)\n\t\t\t\t{\n\t\t\t\t\tactivityEditor.deleteActivity(id, true);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tconst activityType = activityEditor.getSetting('ownerType', '');\n\t\t\t\t\tconst activityId = activityEditor.getSetting('ownerID', '');\n\n\t\t\t\t\tconst serviceUrl = BX.util.add_url_param(activityEditor.getSetting('serviceUrl', ''),\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tid: id,\n\t\t\t\t\t\t\taction: 'get_activity',\n\t\t\t\t\t\t\townertype: activityType,\n\t\t\t\t\t\t\townerid: activityId\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t\tBX.ajax({\n\t\t\t\t\t\t'url': serviceUrl,\n\t\t\t\t\t\t'method': 'POST',\n\t\t\t\t\t\t'dataType': 'json',\n\t\t\t\t\t\t'data':\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t'ACTION' : 'GET_ACTIVITY',\n\t\t\t\t\t\t\t\t'ID': id,\n\t\t\t\t\t\t\t\t'OWNER_TYPE': activityType,\n\t\t\t\t\t\t\t\t'OWNER_ID': activityId\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\tonsuccess: BX.delegate(\n\t\t\t\t\t\t\tfunction(data)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif(typeof(data['ACTIVITY']) !== 'undefined')\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tactivityEditor._handleActivityChange(data['ACTIVITY']);\n\t\t\t\t\t\t\t\t\twindow.setTimeout(BX.delegate(this.remove ,this), 500);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tthis\n\t\t\t\t\t\t),\n\t\t\t\t\t\tonfailure: function(data){}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tgetDeadline()\n\t{\n\t\tconst entityData = this.getAssociatedEntityData();\n\t\tconst time = BX.parseDate(\n\t\t\tentityData[\"DEADLINE_SERVER\"],\n\t\t\tfalse,\n\t\t\t\"YYYY-MM-DD\",\n\t\t\t\"YYYY-MM-DD HH:MI:SS\"\n\t\t);\n\n\t\tif(!time)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\treturn new Date(time.getTime() + 1000 * Item.getUserTimezoneOffset());\n\t}\n\n\tmarkAsDone(isDone)\n\t{\n\t\tisDone = !!isDone;\n\t\tthis.getAssociatedEntityData()[\"STATUS\"] = isDone ? BX.CrmActivityStatus.completed : BX.CrmActivityStatus.waiting;\n\t}\n\n\tgetPrepositionText(direction)\n\t{\n\t\treturn this.getMessage(direction === BX.CrmActivityDirection.incoming ? \"from\" : \"to\");\n\t}\n\n\tgetTypeDescription(direction)\n\t{\n\t\treturn \"\";\n\t}\n\n\tisContextMenuEnabled()\n\t{\n\t\treturn ((!!this.getDeadline() && this.canPostpone()) || this.canComplete());\n\t}\n\n\tprepareContent(options)\n\t{\n\t\tconst deadline = this.getDeadline();\n\t\tconst timeText = deadline ? this.formatDateTime(deadline) : this.getMessage(\"termless\");\n\n\t\tconst entityData = this.getAssociatedEntityData();\n\t\tconst direction = BX.prop.getInteger(entityData, \"DIRECTION\", 0);\n\t\tconst isDone = this.isDone();\n\t\tconst subject = BX.prop.getString(entityData, \"SUBJECT\", \"\");\n\t\tlet description = BX.prop.getString(entityData, \"DESCRIPTION_RAW\", \"\");\n\n\t\tconst communication = BX.prop.getObject(entityData, \"COMMUNICATION\", {});\n\t\tconst title = BX.prop.getString(communication, \"TITLE\", \"\");\n\t\tconst showUrl = BX.prop.getString(communication, \"SHOW_URL\", \"\");\n\t\tconst communicationValue = BX.prop.getString(communication, \"TYPE\", \"\") !== \"\"\n\t\t\t? BX.prop.getString(communication, \"VALUE\", \"\") : \"\";\n\n\t\tlet wrapperClassName = this.getWrapperClassName();\n\t\tif(wrapperClassName !== \"\")\n\t\t{\n\t\t\twrapperClassName = \"crm-entity-stream-section crm-entity-stream-section-planned\" + \" \" + wrapperClassName;\n\t\t}\n\t\telse\n\t\t{\n\t\t\twrapperClassName = \"crm-entity-stream-section crm-entity-stream-section-planned\";\n\t\t}\n\n\t\tconst wrapper = BX.create(\"DIV\", {attrs: {className: wrapperClassName}});\n\n\t\tlet iconClassName = this.getIconClassName();\n\t\tif(this.isCounterEnabled())\n\t\t{\n\t\t\ticonClassName += \" crm-entity-stream-section-counter\";\n\t\t}\n\t\twrapper.appendChild(BX.create(\"DIV\", { attrs: { className: iconClassName } }));\n\n\t\t//region Context Menu\n\t\tif(this.isContextMenuEnabled())\n\t\t{\n\t\t\twrapper.appendChild(this.prepareContextMenuButton());\n\t\t}\n\t\t//endregion\n\n\t\tconst contentWrapper = BX.create(\"DIV\",\n\t\t\t{attrs: {className: \"crm-entity-stream-section-content\"}}\n\t\t);\n\t\twrapper.appendChild(contentWrapper);\n\n\t\t//region Details\n\t\tif(description !== \"\")\n\t\t{\n\t\t\t//trim leading spaces\n\t\t\tdescription = description.replace(/^\\s+/,'');\n\t\t}\n\n\t\tconst contentInnerWrapper = BX.create(\"DIV\",\n\t\t\t{\n\t\t\t\tattrs: {className: \"crm-entity-stream-content-event\"}\n\t\t\t}\n\t\t);\n\t\tcontentWrapper.appendChild(contentInnerWrapper);\n\n\t\tthis._deadlineNode = BX.create(\"SPAN\",\n\t\t\t{ attrs: { className: \"crm-entity-stream-content-event-time\" }, text: timeText }\n\t\t);\n\n\t\tconst headerWrapper = BX.create(\"DIV\",\n\t\t\t{\n\t\t\t\tattrs: {className: \"crm-entity-stream-content-header\"}\n\t\t\t}\n\t\t);\n\t\theaderWrapper.appendChild(BX.create(\"SPAN\",\n\t\t\t{\n\t\t\t\tattrs:\n\t\t\t\t\t{\n\t\t\t\t\t\tclassName: \"crm-entity-stream-content-event-title\"\n\t\t\t\t\t},\n\t\t\t\ttext: this.getTypeDescription(direction)\n\t\t\t}\n\t\t));\n\n\t\tconst statusNode = this.getStatusNode();\n\t\tif (statusNode)\n\t\t{\n\t\t\theaderWrapper.appendChild(statusNode);\n\t\t}\n\t\theaderWrapper.appendChild(this._deadlineNode);\n\n\t\tcontentInnerWrapper.appendChild(headerWrapper);\n\n\t\tconst detailWrapper = BX.create(\"DIV\",\n\t\t\t{\n\t\t\t\tattrs: {className: \"crm-entity-stream-content-detail\"}\n\t\t\t}\n\t\t);\n\t\tcontentInnerWrapper.appendChild(detailWrapper);\n\n\t\tdetailWrapper.appendChild(\n\t\t\tBX.create(\"DIV\",\n\t\t\t\t{\n\t\t\t\t\tattrs: {className: \"crm-entity-stream-content-detail-title\"},\n\t\t\t\t\tchildren:\n\t\t\t\t\t\t[\n\t\t\t\t\t\t\tBX.create(\"A\",\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tattrs: { href: \"#\" },\n\t\t\t\t\t\t\t\t\tevents: { \"click\": this._headerClickHandler },\n\t\t\t\t\t\t\t\t\ttext: subject\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\n\t\tdetailWrapper.appendChild(\n\t\t\tBX.create(\"DIV\",\n\t\t\t\t{\n\t\t\t\t\tattrs: { className: \"crm-entity-stream-content-detail-description\" },\n\t\t\t\t\ttext: this.cutOffText(description, 128)\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\n\t\tconst additionalDetails = this.prepareDetailNodes();\n\t\tif(BX.type.isArray(additionalDetails))\n\t\t{\n\t\t\tlet i = 0;\n\t\t\tconst length = additionalDetails.length;\n\t\t\tfor(; i < length; i++)\n\t\t\t{\n\t\t\t\tdetailWrapper.appendChild(additionalDetails[i]);\n\t\t\t}\n\t\t}\n\n\t\tconst members = BX.create(\"DIV\",\n\t\t\t{attrs: {className: \"crm-entity-stream-content-detail-contact-info\"}}\n\t\t);\n\n\t\tif(title !== '')\n\t\t{\n\t\t\tmembers.appendChild(\n\t\t\t\tBX.create(\"SPAN\",\n\t\t\t\t\t{ text: this.getPrepositionText(direction) + \": \" }\n\t\t\t\t)\n\t\t\t);\n\n\t\t\tif(showUrl !== '')\n\t\t\t{\n\t\t\t\tmembers.appendChild(\n\t\t\t\t\tBX.create(\"A\",\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tattrs: { href: showUrl },\n\t\t\t\t\t\t\ttext: title\n\t\t\t\t\t\t}\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tmembers.appendChild(BX.create(\"SPAN\", { text: title }));\n\t\t\t}\n\t\t}\n\n\t\tif(communicationValue !== '')\n\t\t{\n\t\t\tconst communicationNode = this.prepareCommunicationNode(communicationValue);\n\t\t\tif(communicationNode)\n\t\t\t{\n\t\t\t\tmembers.appendChild(communicationNode);\n\t\t\t}\n\t\t}\n\n\t\tdetailWrapper.appendChild(members);\n\t\t//endregion\n\t\t//region Set as Done Button\n\t\tconst setAsDoneButton = BX.create(\"INPUT\",\n\t\t\t{\n\t\t\t\tattrs:\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: \"checkbox\",\n\t\t\t\t\t\tclassName: \"crm-entity-stream-planned-apply-btn\",\n\t\t\t\t\t\tchecked: isDone\n\t\t\t\t\t},\n\t\t\t\tevents: {change: this._setAsDoneButtonHandler}\n\t\t\t}\n\t\t);\n\n\t\tif(!this.canComplete())\n\t\t{\n\t\t\tsetAsDoneButton.disabled = true;\n\t\t}\n\n\t\tconst buttonContainer = BX.create(\"DIV\",\n\t\t\t{\n\t\t\t\tattrs: {className: \"crm-entity-stream-content-detail-planned-action\"},\n\t\t\t\tchildren: [setAsDoneButton]\n\t\t\t}\n\t\t);\n\t\tcontentInnerWrapper.appendChild(buttonContainer);\n\t\t//endregion\n\n\t\t//region Author\n\t\tconst authorNode = this.prepareAuthorLayout();\n\t\tif(authorNode)\n\t\t{\n\t\t\tcontentInnerWrapper.appendChild(authorNode);\n\t\t}\n\t\t//endregion\n\n\t\t//region  Actions\n\t\tthis._actionContainer = BX.create(\"DIV\",\n\t\t\t{\n\t\t\t\tattrs: { className: \"crm-entity-stream-content-detail-action\" }\n\t\t\t}\n\t\t);\n\t\tcontentInnerWrapper.appendChild(this._actionContainer);\n\t\t//endregion\n\n\t\treturn wrapper;\n\t}\n\n\tgetStatusNode()\n\t{\n\t\treturn null;\n\t}\n\n\tprepareCommunicationNode(communicationValue)\n\t{\n\t\treturn BX.create(\"SPAN\", { text: \" \" + communicationValue });\n\t}\n\n\tprepareDetailNodes()\n\t{\n\t\treturn [];\n\t}\n\n\tprepareContextMenuItems()\n\t{\n\t\tconst menuItems = [];\n\n\t\tif (!this.isReadOnly())\n\t\t{\n\t\t\tif (this.isEditable())\n\t\t\t{\n\t\t\t\tmenuItems.push({ id: \"edit\", text: this.getMessage(\"menuEdit\"), onclick: BX.delegate(this.edit, this)});\n\t\t\t}\n\n\t\t\tmenuItems.push({ id: \"remove\", text: this.getMessage(\"menuDelete\"), onclick: BX.delegate(this.processRemoval, this)});\n\t\t}\n\n\t\tconst handler = BX.delegate(this.onContextMenuItemSelect, this);\n\n\t\tif(!this._postponeController)\n\t\t{\n\t\t\tthis._postponeController = SchedulePostponeController.create(\"\", { item: this });\n\t\t}\n\n\t\tconst postponeMenu =\n\t\t\t{\n\t\t\t\tid: \"postpone\",\n\t\t\t\ttext: this._postponeController.getTitle(),\n\t\t\t\titems: []\n\t\t\t};\n\n\t\tconst commands = this._postponeController.getCommandList();\n\t\tlet i = 0;\n\t\tconst length = commands.length;\n\t\tfor(; i < length; i++)\n\t\t{\n\t\t\tconst command = commands[i];\n\t\t\tpostponeMenu.items.push(\n\t\t\t\t{\n\t\t\t\t\tid: command[\"name\"],\n\t\t\t\t\ttext: command[\"title\"],\n\t\t\t\t\tonclick: handler\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t\tmenuItems.push(postponeMenu);\n\t\treturn menuItems;\n\t}\n\n\tonContextMenuItemSelect(e, item)\n\t{\n\t\tthis.closeContextMenu();\n\t\tif(this._postponeController)\n\t\t{\n\t\t\tthis._postponeController.processCommand(item.id);\n\t\t}\n\t}\n}\n","import Activity from \"./activity\";\n\n/** @memberof BX.Crm.Timeline.Items.Scheduled */\nexport default class Email extends Activity\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\t}\n\n\tgetWrapperClassName()\n\t{\n\t\treturn \"crm-entity-stream-section-email\";\n\t}\n\n\tgetIconClassName()\n\t{\n\t\treturn \"crm-entity-stream-section-icon crm-entity-stream-section-icon-email\";\n\t}\n\n\tprepareActions()\n\t{\n\t\tif(this.isReadOnly())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis._actions.push(\n\t\t\tBX.CrmScheduleEmailAction.create(\n\t\t\t\t\"email\",\n\t\t\t\t{\n\t\t\t\t\titem: this,\n\t\t\t\t\tcontainer: this._actionContainer,\n\t\t\t\t\tentityData: this.getAssociatedEntityData(),\n\t\t\t\t\tactivityEditor: this._activityEditor\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\t}\n\n\tgetTypeDescription(direction)\n\t{\n\t\treturn this.getMessage(direction === BX.CrmActivityDirection.incoming ? \"incomingEmail\" : \"outgoingEmail\");\n\t}\n\n\tgetRemoveMessage()\n\t{\n\t\tconst entityData = this.getAssociatedEntityData();\n\t\tlet title = BX.prop.getString(entityData, \"SUBJECT\", \"\");\n\t\ttitle = BX.util.htmlspecialchars(title);\n\t\treturn this.getMessage('emailRemove').replace(\"#TITLE#\", title);\n\t}\n\n\tisEditable()\n\t{\n\t\treturn false;\n\t}\n\n\tstatic create(id, settings)\n\t{\n\t\tconst self = new Email();\n\t\tself.initialize(id, settings);\n\t\treturn self;\n\t}\n}\n","import Activity from \"./activity\";\n\n/** @memberof BX.Crm.Timeline.Items.Scheduled */\nexport default class Call extends Activity\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\t}\n\n\tgetWrapperClassName()\n\t{\n\t\treturn 'crm-entity-stream-section-call';\n\t}\n\n\tgetIconClassName()\n\t{\n\t\treturn \"crm-entity-stream-section-icon crm-entity-stream-section-icon-call\";\n\t}\n\n\tprepareActions()\n\t{\n\t\tif(this.isReadOnly())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis._actions.push(\n\t\t\tBX.CrmScheduleCallAction.create(\n\t\t\t\t\"call\",\n\t\t\t\t{\n\t\t\t\t\titem: this,\n\t\t\t\t\tcontainer: this._actionContainer,\n\t\t\t\t\tentityData: this.getAssociatedEntityData(),\n\t\t\t\t\tactivityEditor: this._activityEditor,\n\t\t\t\t\townerInfo: this._schedule.getOwnerInfo()\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\t}\n\n\tgetTypeDescription(direction)\n\t{\n\t\tconst entityData = this.getAssociatedEntityData();\n\t\tconst callInfo = BX.prop.getObject(entityData, \"CALL_INFO\", null);\n\t\tconst callTypeText = callInfo !== null ? BX.prop.getString(callInfo, \"CALL_TYPE_TEXT\", \"\") : \"\";\n\t\tif(callTypeText !== \"\")\n\t\t{\n\t\t\treturn callTypeText;\n\t\t}\n\n\t\treturn this.getMessage(direction === BX.CrmActivityDirection.incoming ? \"incomingCall\" : \"outgoingCall\");\n\t}\n\n\tgetRemoveMessage()\n\t{\n\t\tconst entityData = this.getAssociatedEntityData();\n\t\tconst direction = BX.prop.getInteger(entityData, \"DIRECTION\", 0);\n\t\tlet title = BX.prop.getString(entityData, \"SUBJECT\", \"\");\n\t\tconst messageName = (direction === BX.CrmActivityDirection.incoming) ? 'incomingCallRemove' : 'outgoingCallRemove';\n\t\ttitle = BX.util.htmlspecialchars(title);\n\t\treturn this.getMessage(messageName).replace(\"#TITLE#\", title);\n\t}\n\n\tstatic create(id, settings)\n\t{\n\t\tconst self = new Call();\n\t\tself.initialize(id, settings);\n\t\treturn self;\n\t}\n}\n","import Call from \"./call\";\n\n/** @memberof BX.Crm.Timeline.Items.Scheduled */\nexport default class CallTracker extends Call\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\t}\n\n\tgetStatusNode()\n\t{\n\t\tconst entityData = this.getAssociatedEntityData();\n\t\tconst callInfo = BX.prop.getObject(entityData, \"CALL_INFO\", null);\n\n\t\tif (!callInfo)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\t\tif (!BX.prop.getBoolean(callInfo, \"HAS_STATUS\", false))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tconst isSuccessfull = BX.prop.getBoolean(callInfo, \"SUCCESSFUL\", false);\n\t\tconst statusText = BX.prop.getString(callInfo, \"STATUS_TEXT\", \"\");\n\n\t\treturn BX.create(\"DIV\",\n\t\t\t{\n\t\t\t\tattrs:\n\t\t\t\t\t{\n\t\t\t\t\t\tclassName: isSuccessfull\n\t\t\t\t\t\t\t? \"crm-entity-stream-content-event-successful\"\n\t\t\t\t\t\t\t: \"crm-entity-stream-content-event-missing\"\n\t\t\t\t\t},\n\t\t\t\ttext: statusText\n\t\t\t}\n\t\t)\n\t}\n\n\tstatic create(id, settings)\n\t{\n\t\tconst self = new CallTracker();\n\t\tself.initialize(id, settings);\n\t\treturn self;\n\t}\n}\n","import Activity from \"./activity\";\n\n/** @memberof BX.Crm.Timeline.Items.Scheduled */\nexport default class Meeting extends Activity\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\t}\n\n\tgetWrapperClassName()\n\t{\n\t\treturn \"\";\n\t}\n\n\tgetIconClassName()\n\t{\n\t\treturn \"crm-entity-stream-section-icon crm-entity-stream-section-icon-meeting\";\n\t}\n\n\tprepareActions()\n\t{\n\t}\n\n\tgetPrepositionText()\n\t{\n\t\treturn this.getMessage(\"reciprocal\");\n\t}\n\n\tgetRemoveMessage()\n\t{\n\t\tconst entityData = this.getAssociatedEntityData();\n\t\tlet title = BX.prop.getString(entityData, \"SUBJECT\", \"\");\n\t\ttitle = BX.util.htmlspecialchars(title);\n\t\treturn this.getMessage('meetingRemove').replace(\"#TITLE#\", title);\n\t}\n\n\tgetTypeDescription()\n\t{\n\t\treturn this.getMessage(\"meeting\");\n\t}\n\n\tstatic create(id, settings)\n\t{\n\t\tconst self = new Meeting();\n\t\tself.initialize(id, settings);\n\t\treturn self;\n\t}\n}\n","import Activity from \"./activity\";\n\n/** @memberof BX.Crm.Timeline.Items.Scheduled */\nexport default class Task extends Activity\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\t}\n\n\tgetWrapperClassName()\n\t{\n\t\treturn \"crm-entity-stream-section-planned-task\";\n\t}\n\n\tgetIconClassName()\n\t{\n\t\treturn \"crm-entity-stream-section-icon crm-entity-stream-section-icon-task\";\n\t}\n\n\tgetTypeDescription()\n\t{\n\t\treturn this.getMessage(\"task\");\n\t}\n\n\tgetPrepositionText(direction)\n\t{\n\t\treturn this.getMessage(\"reciprocal\");\n\t}\n\n\tgetRemoveMessage()\n\t{\n\t\tconst entityData = this.getAssociatedEntityData();\n\t\tlet title = BX.prop.getString(entityData, \"SUBJECT\", \"\");\n\t\ttitle = BX.util.htmlspecialchars(title);\n\t\treturn this.getMessage('taskRemove').replace(\"#TITLE#\", title);\n\t}\n\n\tstatic create(id, settings)\n\t{\n\t\tconst self = new Task();\n\t\tself.initialize(id, settings);\n\t\treturn self;\n\t}\n}\n","import Activity from \"./activity\";\n\n/** @memberof BX.Crm.Timeline.Items.Scheduled */\nexport default class StoreDocument extends Activity\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\t}\n\n\tgetWrapperClassName()\n\t{\n\t\treturn \"crm-entity-stream-section-planned-store-document\";\n\t}\n\n\tgetIconClassName()\n\t{\n\t\treturn \"crm-entity-stream-section-icon crm-entity-stream-section-icon-store-document\";\n\t}\n\n\tgetTypeDescription()\n\t{\n\t\treturn this.getMessage(\"storeDocument\");\n\t}\n\n\tgetPrepositionText(direction)\n\t{\n\t\treturn this.getMessage(\"reciprocal\");\n\t}\n\n\tgetRemoveMessage()\n\t{\n\t\tconst entityData = this.getAssociatedEntityData();\n\t\tlet title = BX.prop.getString(entityData, \"SUBJECT\", \"\");\n\t\ttitle = BX.util.htmlspecialchars(title);\n\t\treturn this.getMessage('taskRemove').replace(\"#TITLE#\", title);\n\t}\n\n\tisEditable()\n\t{\n\t\treturn false;\n\t}\n\n\tprepareContent(options)\n\t{\n\t\tconst deadline = this.getDeadline();\n\t\tconst timeText = deadline ? this.formatDateTime(deadline) : this.getMessage(\"termless\");\n\n\t\tconst entityData = this.getAssociatedEntityData();\n\t\tconst direction = BX.prop.getInteger(entityData, \"DIRECTION\", 0);\n\t\tconst isDone = this.isDone();\n\n\t\tlet wrapperClassName = this.getWrapperClassName();\n\t\tif(wrapperClassName !== \"\")\n\t\t{\n\t\t\twrapperClassName = \"crm-entity-stream-section crm-entity-stream-section-planned\" + \" \" + wrapperClassName;\n\t\t}\n\t\telse\n\t\t{\n\t\t\twrapperClassName = \"crm-entity-stream-section crm-entity-stream-section-planned\";\n\t\t}\n\n\t\tconst wrapper = BX.create(\"DIV\", {attrs: {className: wrapperClassName}});\n\n\t\tlet iconClassName = this.getIconClassName();\n\t\tif(this.isCounterEnabled())\n\t\t{\n\t\t\ticonClassName += \" crm-entity-stream-section-counter\";\n\t\t}\n\t\twrapper.appendChild(BX.create(\"DIV\", { attrs: { className: iconClassName } }));\n\n\t\t//region Context Menu\n\t\tif(this.isContextMenuEnabled())\n\t\t{\n\t\t\twrapper.appendChild(this.prepareContextMenuButton());\n\t\t}\n\t\t//endregion\n\n\t\tconst contentWrapper = BX.create(\"DIV\",\n\t\t\t{attrs: {className: \"crm-entity-stream-section-content\"}}\n\t\t);\n\t\twrapper.appendChild(contentWrapper);\n\n\t\t//region Details\n\t\tconst contentInnerWrapper = BX.create(\"DIV\",\n\t\t\t{\n\t\t\t\tattrs: {className: \"crm-entity-stream-content-event\"}\n\t\t\t}\n\t\t);\n\t\tcontentWrapper.appendChild(contentInnerWrapper);\n\n\t\tthis._deadlineNode = BX.create(\"SPAN\",\n\t\t\t{ attrs: { className: \"crm-entity-stream-content-event-time\" }, text: timeText }\n\t\t);\n\n\t\tconst headerWrapper = BX.create(\"DIV\",\n\t\t\t{\n\t\t\t\tattrs: {className: \"crm-entity-stream-content-header\"}\n\t\t\t}\n\t\t);\n\t\theaderWrapper.appendChild(BX.create(\"SPAN\",\n\t\t\t{\n\t\t\t\tattrs:\n\t\t\t\t\t{\n\t\t\t\t\t\tclassName: \"crm-entity-stream-content-event-title\"\n\t\t\t\t\t},\n\t\t\t\ttext: this.getTypeDescription(direction)\n\t\t\t}\n\t\t));\n\n\t\tconst statusNode = this.getStatusNode();\n\t\tif (statusNode)\n\t\t{\n\t\t\theaderWrapper.appendChild(statusNode);\n\t\t}\n\t\theaderWrapper.appendChild(this._deadlineNode);\n\n\t\tcontentInnerWrapper.appendChild(headerWrapper);\n\n\t\tconst detailWrapper = BX.create(\"DIV\",\n\t\t\t{\n\t\t\t\tattrs: {className: \"crm-entity-stream-content-detail\"}\n\t\t\t}\n\t\t);\n\t\tcontentInnerWrapper.appendChild(detailWrapper);\n\n\t\tdetailWrapper.appendChild(\n\t\t\tBX.create(\"DIV\",\n\t\t\t\t{\n\t\t\t\t\tattrs: {className: \"crm-entity-stream-content-detail-description\"},\n\t\t\t\t\tchildren: [\n\t\t\t\t\t\tBX.create(\"SPAN\", { text: this.getMessage(\"storeDocumentDescription\") }),\n\t\t\t\t\t\tBX.create(\"A\", {\n\t\t\t\t\t\t\tattrs: {\n\t\t\t\t\t\t\t\tclassName: \"crm-entity-stream-content-detail-target\",\n\t\t\t\t\t\t\t\thref: \"#\",\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\t\tclick: BX.delegate(function (e) {\n\t\t\t\t\t\t\t\t\ttop.BX.Helper.show('redirect=detail&code=14828480');\n\t\t\t\t\t\t\t\t\te.preventDefault ? e.preventDefault() : (e.returnValue = false);\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\ttext: \" \" + BX.message('CRM_TIMELINE_DETAILS'),\n\t\t\t\t\t\t})\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\n\t\tconst additionalDetails = this.prepareDetailNodes();\n\t\tif(BX.type.isArray(additionalDetails))\n\t\t{\n\t\t\tlet i = 0;\n\t\t\tconst length = additionalDetails.length;\n\t\t\tfor(; i < length; i++)\n\t\t\t{\n\t\t\t\tdetailWrapper.appendChild(additionalDetails[i]);\n\t\t\t}\n\t\t}\n\t\t//endregion\n\t\t//region Set as Done Button\n\t\tconst setAsDoneButton = BX.create(\"INPUT\",\n\t\t\t{\n\t\t\t\tattrs:\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: \"checkbox\",\n\t\t\t\t\t\tclassName: \"crm-entity-stream-planned-apply-btn\",\n\t\t\t\t\t\tchecked: isDone\n\t\t\t\t\t},\n\t\t\t\tevents: {change: this._setAsDoneButtonHandler}\n\t\t\t}\n\t\t);\n\n\t\tif(!this.canComplete())\n\t\t{\n\t\t\tsetAsDoneButton.disabled = true;\n\t\t}\n\n\t\tconst buttonContainer = BX.create(\"DIV\",\n\t\t\t{\n\t\t\t\tattrs: {className: \"crm-entity-stream-content-detail-planned-action\"},\n\t\t\t\tchildren: [setAsDoneButton]\n\t\t\t}\n\t\t);\n\t\tcontentInnerWrapper.appendChild(buttonContainer);\n\t\t//endregion\n\n\t\t//region Author\n\t\tconst authorNode = this.prepareAuthorLayout();\n\t\tif(authorNode)\n\t\t{\n\t\t\tcontentInnerWrapper.appendChild(authorNode);\n\t\t}\n\t\t//endregion\n\n\t\t//region  Actions\n\t\tthis._actionContainer = BX.create(\"DIV\",\n\t\t\t{\n\t\t\t\tattrs: { className: \"crm-entity-stream-content-detail-action\" }\n\t\t\t}\n\t\t);\n\t\tcontentInnerWrapper.appendChild(this._actionContainer);\n\t\t//endregion\n\n\t\treturn wrapper;\n\t}\n\n\tstatic create(id, settings)\n\t{\n\t\tconst self = new StoreDocument();\n\t\tself.initialize(id, settings);\n\t\treturn self;\n\t}\n}\n","import Activity from \"./activity\";\n\n/** @memberof BX.Crm.Timeline.Items.Scheduled */\nexport default class WebForm extends Activity\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\t}\n\n\tgetWrapperClassName()\n\t{\n\t\treturn \"\";\n\t}\n\n\tgetIconClassName()\n\t{\n\t\treturn \"crm-entity-stream-section-icon crm-entity-stream-section-icon-crmForm\";\n\t}\n\n\tprepareActions()\n\t{\n\t}\n\n\tgetPrepositionText()\n\t{\n\t\treturn this.getMessage(\"from\");\n\t}\n\n\tgetTypeDescription()\n\t{\n\t\treturn this.getMessage(\"webform\");\n\t}\n\n\tstatic create(id, settings)\n\t{\n\t\tconst self = new WebForm();\n\t\tself.initialize(id, settings);\n\t\treturn self;\n\t}\n}\n","import Scheduled from \"../scheduled\";\nimport {Item as ItemType} from \"../../types\";\nimport Item from \"../../item\";\nimport SchedulePostponeController from \"../../tools/schedule-postpone-controller\";\n\n/** @memberof BX.Crm.Timeline.Items.Scheduled */\nexport default class Wait extends Scheduled\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis._postponeController = null;\n\t}\n\t\n\tgetTypeId()\n\t{\n\t\treturn ItemType.wait;\n\t}\n\n\tgetWrapperClassName()\n\t{\n\t\treturn \"crm-entity-stream-section-wait\";\n\t}\n\n\tgetIconClassName()\n\t{\n\t\treturn \"crm-entity-stream-section-icon crm-entity-stream-section-icon-wait\";\n\t}\n\n\tprepareActions()\n\t{\n\t}\n\n\tisCounterEnabled()\n\t{\n\t\treturn false;\n\t}\n\n\tgetDeadline()\n\t{\n\t\tconst entityData = this.getAssociatedEntityData();\n\t\tconst time = BX.parseDate(\n\t\t\tentityData[\"DEADLINE_SERVER\"],\n\t\t\tfalse,\n\t\t\t\"YYYY-MM-DD\",\n\t\t\t\"YYYY-MM-DD HH:MI:SS\"\n\t\t);\n\n\t\tif(!time)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\treturn new Date(time.getTime() + 1000 * Item.getUserTimezoneOffset());\n\t}\n\n\tisDone()\n\t{\n\t\treturn (BX.prop.getString(this.getAssociatedEntityData(), \"COMPLETED\", \"N\") ===  \"Y\");\n\t}\n\n\tsetAsDone(isDone)\n\t{\n\t\tisDone = !!isDone;\n\t\tif(this.isDone() === isDone)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst id = this.getAssociatedEntityId();\n\t\tif(id > 0)\n\t\t{\n\t\t\tconst editor = this._schedule.getManager().getWaitEditor();\n\t\t\tif(editor)\n\t\t\t{\n\t\t\t\teditor.complete(\n\t\t\t\t\tid,\n\t\t\t\t\tisDone,\n\t\t\t\t\tBX.delegate(this.onSetAsDoneCompleted, this)\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\tpostpone(offset)\n\t{\n\t\tconst id = this.getAssociatedEntityId();\n\t\tif(id > 0 && offset > 0)\n\t\t{\n\t\t\tconst editor = this._schedule.getManager().getWaitEditor();\n\t\t\tif(editor)\n\t\t\t{\n\t\t\t\teditor.postpone(\n\t\t\t\t\tid,\n\t\t\t\t\toffset,\n\t\t\t\t\tBX.delegate(this.onPosponeCompleted, this)\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\tisContextMenuEnabled()\n\t{\n\t\treturn !!this.getDeadline() && this.canPostpone();\n\t}\n\n\tprepareContent()\n\t{\n\t\tconst deadline = this.getDeadline();\n\t\tconst timeText = deadline ? this.formatDateTime(deadline) : this.getMessage(\"termless\");\n\n\t\tconst entityData = this.getAssociatedEntityData();\n\t\tconst isDone = this.isDone();\n\t\tlet description = BX.prop.getString(entityData, \"DESCRIPTION_RAW\", \"\");\n\n\t\tlet wrapperClassName = this.getWrapperClassName();\n\t\tif(wrapperClassName !== \"\")\n\t\t{\n\t\t\twrapperClassName = \"crm-entity-stream-section crm-entity-stream-section-planned\" + \" \" + wrapperClassName;\n\t\t}\n\t\telse\n\t\t{\n\t\t\twrapperClassName = \"crm-entity-stream-section crm-entity-stream-section-planned\";\n\t\t}\n\n\t\tconst wrapper = BX.create(\"DIV\", {attrs: {className: wrapperClassName}});\n\n\t\tlet iconClassName = this.getIconClassName();\n\t\tif(this.isCounterEnabled())\n\t\t{\n\t\t\ticonClassName += \" crm-entity-stream-section-counter\";\n\t\t}\n\n\t\twrapper.appendChild(BX.create(\"DIV\", { attrs: { className: iconClassName } }));\n\n\t\t//region Context Menu\n\t\tif(this.isContextMenuEnabled())\n\t\t{\n\t\t\twrapper.appendChild(this.prepareContextMenuButton());\n\t\t}\n\t\t//endregion\n\n\t\tconst contentWrapper = BX.create(\"DIV\",\n\t\t\t{attrs: {className: \"crm-entity-stream-section-content\"}}\n\t\t);\n\t\twrapper.appendChild(contentWrapper);\n\n\t\t//region Details\n\t\tif(description !== \"\")\n\t\t{\n\t\t\tdescription = BX.util.trim(description);\n\t\t\tdescription = BX.util.strip_tags(description);\n\t\t\tdescription = this.cutOffText(description, 512);\n\t\t\tdescription = BX.util.nl2br(description);\n\t\t}\n\n\t\tconst contentInnerWrapper = BX.create(\"DIV\",\n\t\t\t{\n\t\t\t\tattrs: {className: \"crm-entity-stream-content-event\"}\n\t\t\t}\n\t\t);\n\t\tcontentWrapper.appendChild(contentInnerWrapper);\n\n\t\tthis._deadlineNode = BX.create(\"SPAN\",\n\t\t\t{ attrs: { className: \"crm-entity-stream-content-event-time\" }, text: timeText }\n\t\t);\n\n\t\tconst headerWrapper = BX.create(\"DIV\",\n\t\t\t{\n\t\t\t\tattrs: {className: \"crm-entity-stream-content-header\"},\n\t\t\t\tchildren:\n\t\t\t\t\t[\n\t\t\t\t\t\tBX.create(\"SPAN\",\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tattrs: {className: \"crm-entity-stream-content-event-title\"},\n\t\t\t\t\t\t\t\ttext: this.getMessage(\"wait\")\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t),\n\t\t\t\t\t\tthis._deadlineNode\n\t\t\t\t\t]\n\t\t\t}\n\t\t);\n\t\tcontentInnerWrapper.appendChild(headerWrapper);\n\n\t\tconst detailWrapper = BX.create(\"DIV\",\n\t\t\t{\n\t\t\t\tattrs: {className: \"crm-entity-stream-content-detail\"}\n\t\t\t}\n\t\t);\n\t\tcontentInnerWrapper.appendChild(detailWrapper);\n\n\t\tdetailWrapper.appendChild(\n\t\t\tBX.create(\"DIV\",\n\t\t\t\t{\n\t\t\t\t\tattrs: { className: \"crm-entity-stream-content-detail-description\" },\n\t\t\t\t\thtml: description\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\n\t\tconst members = BX.create(\"DIV\",\n\t\t\t{attrs: {className: \"crm-entity-stream-content-detail-contact-info\"}}\n\t\t);\n\n\t\tdetailWrapper.appendChild(members);\n\t\t//endregion\n\n\t\t//region Set as Done Button\n\t\tconst setAsDoneButton = BX.create(\"INPUT\",\n\t\t\t{\n\t\t\t\tattrs:\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: \"checkbox\",\n\t\t\t\t\t\tclassName: \"crm-entity-stream-planned-apply-btn\",\n\t\t\t\t\t\tchecked: isDone\n\t\t\t\t\t},\n\t\t\t\tevents: {change: this._setAsDoneButtonHandler}\n\t\t\t}\n\t\t);\n\n\t\tif(!this.canComplete())\n\t\t{\n\t\t\tsetAsDoneButton.disabled = true;\n\t\t}\n\n\t\tconst buttonContainer = BX.create(\"DIV\",\n\t\t\t{\n\t\t\t\tattrs: {className: \"crm-entity-stream-content-detail-planned-action\"},\n\t\t\t\tchildren: [setAsDoneButton]\n\t\t\t}\n\t\t);\n\t\tcontentInnerWrapper.appendChild(buttonContainer);\n\t\t//endregion\n\n\t\t//region Author\n\t\tconst authorNode = this.prepareAuthorLayout();\n\t\tif(authorNode)\n\t\t{\n\t\t\tcontentInnerWrapper.appendChild(authorNode);\n\t\t}\n\t\t//endregion\n\n\t\t//region  Actions\n\t\tthis._actionContainer = BX.create(\"DIV\",\n\t\t\t{\n\t\t\t\tattrs: { className: \"crm-entity-stream-content-detail-action\" }\n\t\t\t}\n\t\t);\n\t\tcontentInnerWrapper.appendChild(this._actionContainer);\n\t\t//endregion\n\n\t\treturn wrapper;\n\t}\n\n\tprepareContextMenuItems()\n\t{\n\t\tconst menuItems = [];\n\t\tconst handler = BX.delegate(this.onContextMenuItemSelect, this);\n\n\t\tif(!this._postponeController)\n\t\t{\n\t\t\tthis._postponeController = SchedulePostponeController.create(\"\", { item: this });\n\t\t}\n\n\t\tconst postponeMenu =\n\t\t\t{\n\t\t\t\tid: \"postpone\",\n\t\t\t\ttext: this._postponeController.getTitle(),\n\t\t\t\titems: []\n\t\t\t};\n\n\t\tconst commands = this._postponeController.getCommandList();\n\t\tlet i = 0;\n\t\tconst length = commands.length;\n\t\tfor(; i < length; i++)\n\t\t{\n\t\t\tconst command = commands[i];\n\t\t\tpostponeMenu.items.push(\n\t\t\t\t{\n\t\t\t\t\tid: command[\"name\"],\n\t\t\t\t\ttext: command[\"title\"],\n\t\t\t\t\tonclick: handler\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t\tmenuItems.push(postponeMenu);\n\t\treturn menuItems;\n\t}\n\n\tonContextMenuItemSelect(e, item)\n\t{\n\t\tthis.closeContextMenu();\n\t\tif(this._postponeController)\n\t\t{\n\t\t\tthis._postponeController.processCommand(item.id);\n\t\t}\n\t}\n\n\tgetTypeDescription()\n\t{\n\t\treturn this.getMessage(\"wait\");\n\t}\n\n\tstatic create(id, settings)\n\t{\n\t\tconst self = new Wait();\n\t\tself.initialize(id, settings);\n\t\treturn self;\n\t}\n}\n","import Activity from \"./activity\";\n\n/** @memberof BX.Crm.Timeline.Items.Scheduled */\nexport default class Request extends Activity\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\t}\n\n\tgetWrapperClassName()\n\t{\n\t\treturn \"\";\n\t}\n\n\tgetIconClassName()\n\t{\n\t\treturn \"crm-entity-stream-section-icon crm-entity-stream-section-icon-robot\";\n\t}\n\n\tgetTypeDescription()\n\t{\n\t\treturn this.getMessage(\"activityRequest\");\n\t}\n\n\tisEditable()\n\t{\n\t\treturn false;\n\t}\n\n\tstatic create(id, settings)\n\t{\n\t\tconst self = new Request();\n\t\tself.initialize(id, settings);\n\t\treturn self;\n\t}\n}\n","import Activity from \"./activity\";\n\n/** @memberof BX.Crm.Timeline.Items.Scheduled */\nexport default class Rest extends Activity\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\t}\n\n\tgetWrapperClassName()\n\t{\n\t\treturn \"\";\n\t}\n\n\tgetIconClassName()\n\t{\n\t\treturn \"crm-entity-stream-section-icon crm-entity-stream-section-icon-rest\";\n\t}\n\n\tprepareContent(options)\n\t{\n\t\tconst wrapper = super.prepareContent(options);\n\t\tconst data = this.getAssociatedEntityData();\n\n\t\tif (data['APP_TYPE'] && data['APP_TYPE']['ICON_SRC'])\n\t\t{\n\t\t\tconst iconNode = wrapper.querySelector('[class=\"' + this.getIconClassName() + '\"]');\n\t\t\tif (iconNode)\n\t\t\t{\n\t\t\t\ticonNode.style.backgroundImage = \"url('\" +  data['APP_TYPE']['ICON_SRC'] + \"')\";\n\t\t\t\ticonNode.style.backgroundPosition = \"center center\";\n\t\t\t}\n\t\t}\n\n\t\treturn wrapper;\n\t}\n\n\tgetTypeDescription()\n\t{\n\t\tconst entityData = this.getAssociatedEntityData();\n\t\tif (entityData['APP_TYPE'] && entityData['APP_TYPE']['NAME'])\n\t\t{\n\t\t\treturn entityData['APP_TYPE']['NAME'];\n\t\t}\n\n\t\treturn this.getMessage(\"restApplication\");\n\t}\n\n\tstatic create(id, settings)\n\t{\n\t\tconst self = new Rest();\n\t\tself.initialize(id, settings);\n\t\treturn self;\n\t}\n}\n","import Activity from \".//activity\";\n\n/** @memberof BX.Crm.Timeline.Actions */\nexport class OpenLine extends Activity\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis._clickHandler = BX.delegate(this.onClick, this);\n\t\tthis._button = null;\n\t}\n\n\tgetButton()\n\t{\n\t\treturn this._button;\n\t}\n\n\tonClick()\n\t{\n\t\tif(typeof(window.top['BXIM']) === 'undefined')\n\t\t{\n\t\t\twindow.alert(this.getMessage(\"openLineNotSupported\"));\n\t\t\treturn;\n\t\t}\n\n\t\tlet slug = \"\";\n\t\tconst communication = BX.prop.getObject(this._entityData, \"COMMUNICATION\", null);\n\t\tif(communication)\n\t\t{\n\t\t\tif(BX.prop.getString(communication, \"TYPE\") === \"IM\")\n\t\t\t{\n\t\t\t\tslug = BX.prop.getString(communication, \"VALUE\");\n\t\t\t}\n\t\t}\n\n\t\tif(slug !== \"\")\n\t\t{\n\t\t\twindow.top['BXIM'].openMessengerSlider(slug, {RECENT: 'N', MENU: 'N'});\n\t\t}\n\t}\n\n\tdoLayout()\n\t{\n\t\tthis._button = BX.create(\"DIV\",\n\t\t\t{\n\t\t\t\tattrs: { className: \"crm-entity-stream-content-action-reply-btn\" },\n\t\t\t\tevents: { \"click\": this._clickHandler }\n\t\t\t}\n\t\t);\n\t\tthis._container.appendChild(this._button);\n\t}\n\n\tgetMessage(name)\n\t{\n\t\tconst m = OpenLine.messages;\n\t\treturn m.hasOwnProperty(name) ? m[name] : name;\n\t}\n\n\tstatic create(id, settings)\n\t{\n\t\tconst self = new OpenLine();\n\t\tself.initialize(id, settings);\n\t\treturn self;\n\t}\n\n\tstatic messages = {};\n}\n","import Activity from \"./activity\";\nimport {OpenLine as OpenLineAction} from \"../../actions/openline\";\n\n/** @memberof BX.Crm.Timeline.Items.Scheduled */\nexport default class OpenLine extends Activity\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\t}\n\n\tgetWrapperClassName()\n\t{\n\t\treturn \"crm-entity-stream-section-IM\";\n\t}\n\n\tgetIconClassName()\n\t{\n\t\treturn \"crm-entity-stream-section-icon crm-entity-stream-section-icon-IM\";\n\t}\n\n\tprepareActions()\n\t{\n\t\tif(this.isReadOnly())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis._actions.push(\n\t\t\tOpenLineAction.create(\n\t\t\t\t\"openline\",\n\t\t\t\t{\n\t\t\t\t\titem: this,\n\t\t\t\t\tcontainer: this._actionContainer,\n\t\t\t\t\tentityData: this.getAssociatedEntityData(),\n\t\t\t\t\tactivityEditor: this._activityEditor,\n\t\t\t\t\townerInfo: this._schedule.getOwnerInfo()\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\t}\n\n\tgetTypeDescription()\n\t{\n\t\treturn this.getMessage(\"openLine\");\n\t}\n\n\tgetPrepositionText(direction)\n\t{\n\t\treturn this.getMessage(\"reciprocal\");\n\t}\n\n\tprepareCommunicationNode(communicationValue)\n\t{\n\t\treturn null;\n\t}\n\n\tprepareDetailNodes()\n\t{\n\t\tconst wrapper = BX.create(\"DIV\",\n\t\t\t{attrs: {className: \"crm-entity-stream-content-detail-IM\"}}\n\t\t);\n\n\t\tconst messageWrapper = BX.create(\"DIV\",\n\t\t\t{attrs: {className: \"crm-entity-stream-content-detail-IM-messages\"}}\n\t\t);\n\t\twrapper.appendChild(messageWrapper);\n\n\t\tconst openLineData = BX.prop.getObject(this.getAssociatedEntityData(), \"OPENLINE_INFO\", null);\n\t\tif(openLineData)\n\t\t{\n\t\t\tconst messages = BX.prop.getArray(openLineData, \"MESSAGES\", []);\n\t\t\tlet i = 0;\n\t\t\tconst length = messages.length;\n\t\t\tfor(; i < length; i++)\n\t\t\t{\n\t\t\t\tconst message = messages[i];\n\t\t\t\tconst isExternal = BX.prop.getBoolean(message, \"IS_EXTERNAL\", true);\n\n\t\t\t\tmessageWrapper.appendChild(\n\t\t\t\t\tBX.create(\"DIV\",\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tattrs:\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tclassName: isExternal\n\t\t\t\t\t\t\t\t\t\t? \"crm-entity-stream-content-detail-IM-message-incoming\"\n\t\t\t\t\t\t\t\t\t\t: \"crm-entity-stream-content-detail-IM-message-outgoing\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\thtml: BX.prop.getString(message, \"MESSAGE\", \"\")\n\t\t\t\t\t\t}\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\treturn [ wrapper ];\n\t}\n\n\tview()\n\t{\n\t\tif(typeof(window.top['BXIM']) === 'undefined')\n\t\t{\n\t\t\twindow.alert(this.getMessage(\"openLineNotSupported\"));\n\t\t\treturn;\n\t\t}\n\n\t\tlet slug = \"\";\n\t\tconst communication = BX.prop.getObject(this.getAssociatedEntityData(), \"COMMUNICATION\", null);\n\t\tif(communication)\n\t\t{\n\t\t\tif(BX.prop.getString(communication, \"TYPE\") === \"IM\")\n\t\t\t{\n\t\t\t\tslug = BX.prop.getString(communication, \"VALUE\");\n\t\t\t}\n\t\t}\n\n\t\tif(slug !== \"\")\n\t\t{\n\t\t\twindow.top['BXIM'].openMessengerSlider(slug, {RECENT: 'N', MENU: 'N'});\n\t\t}\n\t}\n\n\tstatic create(id, settings)\n\t{\n\t\tconst self = new OpenLine();\n\t\tself.initialize(id, settings);\n\t\treturn self;\n\t}\n}\n","import Activity from \"./activity\";\nimport Item from \"../../item\";\n\n/** @memberof BX.Crm.Timeline.Items.Scheduled */\nexport default class Zoom extends Activity\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\t}\n\n\tgetWrapperClassName()\n\t{\n\t\treturn \"crm-entity-stream-section-zoom\";\n\t}\n\n\tgetIconClassName()\n\t{\n\t\treturn \"crm-entity-stream-section-icon crm-entity-stream-section-icon-zoom\";\n\t}\n\n\tgetTypeDescription()\n\t{\n\t\treturn this.getMessage(\"zoom\");\n\t}\n\n\tgetPrepositionText(direction)\n\t{\n\t}\n\n\tprepareCommunicationNode(communicationValue)\n\t{\n\t\treturn null;\n\t}\n\n\tprepareContent(options)\n\t{\n\t\tconst deadline = this.getDeadline();\n\t\tconst timeText = deadline ? this.formatDateTime(deadline) : this.getMessage(\"termless\");\n\n\t\tconst entityData = this.getAssociatedEntityData();\n\t\tconst direction = BX.prop.getInteger(entityData, \"DIRECTION\", 0);\n\t\tconst isDone = this.isDone();\n\t\tconst subject = BX.prop.getString(entityData, \"SUBJECT\", \"\");\n\t\tlet description = BX.prop.getString(entityData, \"DESCRIPTION_RAW\", \"\");\n\n\t\tconst communication = BX.prop.getObject(entityData, \"COMMUNICATION\", {});\n\t\tconst title = BX.prop.getString(communication, \"TITLE\", \"\");\n\t\tconst showUrl = BX.prop.getString(communication, \"SHOW_URL\", \"\");\n\t\tconst communicationValue = BX.prop.getString(communication, \"TYPE\", \"\") !== \"\"\n\t\t\t? BX.prop.getString(communication, \"VALUE\", \"\") : \"\";\n\n\t\tlet wrapperClassName = this.getWrapperClassName();\n\t\tif(wrapperClassName !== \"\")\n\t\t{\n\t\t\twrapperClassName = \"crm-entity-stream-section crm-entity-stream-section-planned\" + \" \" + wrapperClassName;\n\t\t}\n\t\telse\n\t\t{\n\t\t\twrapperClassName = \"crm-entity-stream-section crm-entity-stream-section-planned\";\n\t\t}\n\n\t\tconst wrapper = BX.create(\"DIV\", {attrs: {className: wrapperClassName}});\n\n\t\tlet iconClassName = this.getIconClassName();\n\t\tif(this.isCounterEnabled())\n\t\t{\n\t\t\ticonClassName += \" crm-entity-stream-section-counter\";\n\t\t}\n\t\twrapper.appendChild(BX.create(\"DIV\", { attrs: { className: iconClassName } }));\n\n\t\t//region Context Menu\n\t\tif(this.isContextMenuEnabled())\n\t\t{\n\t\t\twrapper.appendChild(this.prepareContextMenuButton());\n\t\t}\n\t\t//endregion\n\n\t\tconst contentWrapper = BX.create(\"DIV\",\n\t\t\t{attrs: {className: \"crm-entity-stream-section-content\"}}\n\t\t);\n\t\twrapper.appendChild(contentWrapper);\n\n\t\t//region Details\n\t\tif(description !== \"\")\n\t\t{\n\t\t\t//trim leading spaces\n\t\t\tdescription = description.replace(/^\\s+/,'');\n\t\t}\n\n\t\tconst contentInnerWrapper = BX.create(\"DIV\",\n\t\t\t{\n\t\t\t\tattrs: {className: \"crm-entity-stream-content-event\"}\n\t\t\t}\n\t\t);\n\t\tcontentWrapper.appendChild(contentInnerWrapper);\n\n\t\tthis._deadlineNode = BX.create(\"SPAN\",\n\t\t\t{ attrs: { className: \"crm-entity-stream-content-event-time\" }, text: timeText }\n\t\t);\n\n\t\tconst headerWrapper = BX.create(\"DIV\",\n\t\t\t{\n\t\t\t\tattrs: {className: \"crm-entity-stream-content-header\"},\n\t\t\t\tchildren:\n\t\t\t\t\t[\n\t\t\t\t\t\tBX.create(\"SPAN\",\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tattrs:\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tclassName: \"crm-entity-stream-content-event-title\"\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\ttext: this.getTypeDescription(direction)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t),\n\t\t\t\t\t\tthis._deadlineNode\n\t\t\t\t\t]\n\t\t\t}\n\t\t);\n\t\tcontentInnerWrapper.appendChild(headerWrapper);\n\n\t\tconst detailWrapper = BX.create(\"DIV\",\n\t\t\t{\n\t\t\t\tattrs: {className: \"crm-entity-stream-content-detail\"}\n\t\t\t}\n\t\t);\n\t\tcontentInnerWrapper.appendChild(detailWrapper);\n\n\t\tif (entityData['ZOOM_INFO'])\n\t\t{\n\t\t\tconst topic = entityData['ZOOM_INFO']['TOPIC'];\n\t\t\tconst duration = entityData['ZOOM_INFO']['DURATION'];\n\t\t\tconst startTimeStamp = BX.parseDate(\n\t\t\t\tentityData['ZOOM_INFO']['CONF_START_TIME'],\n\t\t\t\tfalse,\n\t\t\t\t\"YYYY-MM-DD\",\n\t\t\t\t\"YYYY-MM-DD HH:MI:SS\"\n\t\t\t);\n\t\t\tconst date = new Date(startTimeStamp.getTime() + 1000 * Item.getUserTimezoneOffset());\n\t\t\tconst detailZoomMessage = BX.create(\"span\",\n\t\t\t\t{\n\t\t\t\t\ttext: this.getMessage(\"zoomCreatedMessage\")\n\t\t\t\t\t\t.replace(\"#CONFERENCE_TITLE#\", topic)\n\t\t\t\t\t\t.replace(\"#DATE_TIME#\", this.formatDateTime(date))\n\t\t\t\t\t\t.replace(\"#DURATION#\", duration)\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tconst detailZoomInfoLink = BX.create(\"A\",\n\t\t\t\t{\n\t\t\t\t\tattrs:\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\thref: entityData['ZOOM_INFO']['CONF_URL'],\n\t\t\t\t\t\t\ttarget: \"_blank\",\n\t\t\t\t\t\t},\n\t\t\t\t\ttext: entityData['ZOOM_INFO']['CONF_URL']\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tconst detailZoomInfo = BX.create(\"DIV\",\n\t\t\t\t{\n\t\t\t\t\tattrs: {className: \"crm-entity-stream-content-detail-zoom-info\"},\n\t\t\t\t\tchildren: [detailZoomMessage, detailZoomInfoLink]\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tdetailWrapper.appendChild(detailZoomInfo);\n\n\t\t\tconst detailZoomCopyInviteLink = BX.create(\"A\",\n\t\t\t\t{\n\t\t\t\t\tattrs: {\n\t\t\t\t\t\tclassName: 'ui-link ui-link-dashed',\n\t\t\t\t\t\t\"data-url\": entityData['ZOOM_INFO']['CONF_URL']\n\t\t\t\t\t},\n\t\t\t\t\ttext: this.getMessage(\"zoomCreatedCopyInviteLink\"),\n\t\t\t\t}\n\t\t\t);\n\t\t\tBX.clipboard.bindCopyClick(detailZoomCopyInviteLink, {\n\t\t\t\ttext: entityData['ZOOM_INFO']['CONF_URL'],\n\t\t\t});\n\n\t\t\tconst detailZoomStartConferenceButton = BX.create(\"BUTTON\",\n\t\t\t\t{\n\t\t\t\t\tattrs: {className: 'ui-btn ui-btn-sm ui-btn-primary'},\n\t\t\t\t\ttext: this.getMessage(\"zoomCreatedStartConference\"),\n\t\t\t\t\tevents: {\n\t\t\t\t\t\t\"click\": function () {\n\t\t\t\t\t\t\twindow.open(entityData['ZOOM_INFO']['CONF_URL']);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tconst detailZoomCopyInviteLinkWrapper = BX.create(\"DIV\",\n\t\t\t\t{\n\t\t\t\t\tattrs: {className: \"crm-entity-stream-content-detail-zoom-link-wrapper\"},\n\t\t\t\t\tchildren: [detailZoomCopyInviteLink]\n\t\t\t\t}\n\t\t\t);\n\t\t\tdetailWrapper.appendChild(detailZoomCopyInviteLinkWrapper);\n\t\t\tdetailWrapper.appendChild(detailZoomStartConferenceButton);\n\t\t}\n\n\t\tconst additionalDetails = this.prepareDetailNodes();\n\t\tif(BX.type.isArray(additionalDetails))\n\t\t{\n\t\t\tlet i = 0;\n\t\t\tconst length = additionalDetails.length;\n\t\t\tfor(; i < length; i++)\n\t\t\t{\n\t\t\t\tdetailWrapper.appendChild(additionalDetails[i]);\n\t\t\t}\n\t\t}\n\n\t\t//endregion\n\t\t//region Set as Done Button\n\t\tconst setAsDoneButton = BX.create(\"INPUT\",\n\t\t\t{\n\t\t\t\tattrs:\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: \"checkbox\",\n\t\t\t\t\t\tclassName: \"crm-entity-stream-planned-apply-btn\",\n\t\t\t\t\t\tchecked: isDone\n\t\t\t\t\t},\n\t\t\t\tevents: {change: this._setAsDoneButtonHandler}\n\t\t\t}\n\t\t);\n\n\t\tif(!this.canComplete())\n\t\t{\n\t\t\tsetAsDoneButton.disabled = true;\n\t\t}\n\n\t\tconst buttonContainer = BX.create(\"DIV\",\n\t\t\t{\n\t\t\t\tattrs: {className: \"crm-entity-stream-content-detail-planned-action\"},\n\t\t\t\tchildren: [setAsDoneButton]\n\t\t\t}\n\t\t);\n\t\tcontentInnerWrapper.appendChild(buttonContainer);\n\t\t//endregion\n\n\t\t//region Author\n\t\tconst authorNode = this.prepareAuthorLayout();\n\t\tif(authorNode)\n\t\t{\n\t\t\tcontentInnerWrapper.appendChild(authorNode);\n\t\t}\n\t\t//endregion\n\n\t\t//region  Actions\n\t\tthis._actionContainer = BX.create(\"DIV\",\n\t\t\t{\n\t\t\t\tattrs: { className: \"crm-entity-stream-content-detail-action\" }\n\t\t\t}\n\t\t);\n\t\tcontentInnerWrapper.appendChild(this._actionContainer);\n\t\t//endregion\n\n\t\treturn wrapper;\n\t}\n\n\tprepareDetailNodes()\n\t{\n\t}\n\n\tstatic create(id, settings)\n\t{\n\t\tconst self = new Zoom();\n\t\tself.initialize(id, settings);\n\t\treturn self;\n\t}\n}\n","/** @memberof BX.Crm.Timeline.Animation */\nexport default class Item\n{\n\tconstructor()\n\t{\n\t\tthis._id = \"\";\n\t\tthis._settings = {};\n\t\tthis._initialItem = null;\n\t\tthis._finalItem = null;\n\t\tthis._events = null;\n\t}\n\n\tinitialize(id, settings)\n\t{\n\t\tthis._id = BX.type.isNotEmptyString(id) ? id : BX.util.getRandomString(4);\n\t\tthis._settings = settings ? settings : {};\n\n\t\tthis._initialItem = this.getSetting(\"initialItem\");\n\t\tthis._finalItem = this.getSetting(\"finalItem\");\n\n\t\tthis._anchor = this.getSetting(\"anchor\");\n\t\tthis._events = this.getSetting(\"events\", {});\n\t}\n\n\tgetId()\n\t{\n\t\treturn this._id;\n\t}\n\n\tgetSetting(name, defaultval)\n\t{\n\t\treturn this._settings.hasOwnProperty(name) ? this._settings[name] : defaultval;\n\t}\n\n\trun()\n\t{\n\t\tthis._node = this._initialItem.getWrapper();\n\t\tconst originalPosition = BX.pos(this._node);\n\t\tthis._initialYPosition = originalPosition.top;\n\t\tthis._initialXPosition = originalPosition.left;\n\t\tthis._initialWidth = this._node.offsetWidth;\n\t\tthis._initialHeight = this._node.offsetHeight;\n\n\t\tthis._anchorYPosition = BX.pos(this._anchor).top;\n\n\t\tthis.createStub();\n\t\tthis.createGhost();\n\t\tthis.moveGhost();\n\t}\n\n\tcreateStub()\n\t{\n\t\tthis._stub = BX.create(\n\t\t\t\"DIV\",\n\t\t\t{\n\t\t\t\tattrs: { className: \"crm-entity-stream-section crm-entity-stream-section-planned crm-entity-stream-section-shadow\" },\n\t\t\t\tchildren :\n\t\t\t\t\t[\n\t\t\t\t\t\tBX.create(\"DIV\", { attrs: { className: \"crm-entity-stream-section-icon\" } }),\n\t\t\t\t\t\tBX.create(\n\t\t\t\t\t\t\t\"DIV\",\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tprops: { className: \"crm-entity-stream-section-content\" },\n\t\t\t\t\t\t\t\tstyle: { height: this._initialHeight + \"px\" }\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t)\n\t\t\t\t\t]\n\t\t\t}\n\t\t);\n\n\t\tthis._node.parentNode.insertBefore(this._stub, this._node);\n\t}\n\n\tcreateGhost()\n\t{\n\t\tthis._ghostNode = this._node;\n\t\tthis._ghostNode.style.position = \"absolute\";\n\t\tthis._ghostNode.style.width = this._initialWidth + \"px\";\n\t\tthis._ghostNode.style.height = this._initialHeight + \"px\";\n\t\tthis._ghostNode.style.top = this._initialYPosition + \"px\";\n\t\tthis._ghostNode.style.left = this._initialXPosition + \"px\";\n\t\tdocument.body.appendChild(this._ghostNode);\n\t\tsetTimeout(BX.proxy(function (){BX.addClass(this._ghostNode, \"crm-entity-stream-section-casper\" )}, this), 20);\n\t}\n\n\tmoveGhost()\n\t{\n\t\tconst node = this._ghostNode;\n\t\tconst movingEvent = new BX.easing({\n\t\t\tduration: 500,\n\t\t\tstart: {top: this._initialYPosition},\n\t\t\tfinish: {top: this._anchorYPosition},\n\t\t\ttransition: BX.easing.makeEaseOut(BX.easing.transitions.quart),\n\t\t\tstep: BX.proxy(function (state) {\n\t\t\t\tnode.style.top = state.top + \"px\";\n\t\t\t}, this)\n\t\t});\n\t\tsetTimeout( BX.proxy(function () {\n\t\t\tmovingEvent.animate();\n\t\t\tnode.style.boxShadow = \"\";\n\t\t}, this), 500);\n\n\t\tconst placeEventAnim = new BX.easing({\n\t\t\tduration: 500,\n\t\t\tstart: {height: 0},\n\t\t\tfinish: {height: this._initialHeight + 20},\n\t\t\ttransition: BX.easing.makeEaseOut(BX.easing.transitions.quart),\n\t\t\tstep: BX.proxy(function (state) {\n\t\t\t\tthis._anchor.style.height = state.height + \"px\";\n\t\t\t}, this),\n\t\t\tcomplete: BX.proxy(function () {\n\t\t\t\tif (BX.type.isFunction(this._events[\"complete\"]))\n\t\t\t\t{\n\t\t\t\t\tthis._events[\"complete\"]();\n\t\t\t\t}\n\n\t\t\t\tthis.addHistoryItem();\n\t\t\t\tthis.removeGhost();\n\t\t\t}, this)\n\t\t});\n\t\tsetTimeout(function (){placeEventAnim.animate()}, 500);\n\t}\n\n\taddHistoryItem()\n\t{\n\t\tconst node = this._finalItem.getWrapper();\n\n\t\tthis._anchor.parentNode.insertBefore(node, this._anchor.nextSibling);\n\n\t\tthis._finalItemHeight = this._anchor.offsetHeight - node.offsetHeight;\n\t\tthis._anchor.style.height = 0;\n\t\tnode.style.marginBottom = this._finalItemHeight + \"px\";\n\t}\n\n\tremoveGhost()\n\t{\n\t\tconst ghostNode = this._ghostNode;\n\t\tconst finalNode = this._finalItem.getWrapper();\n\n\t\tghostNode.style.overflow = \"hidden\";\n\t\tconst hideCasperItem = new BX.easing({\n\t\t\tduration: 70,\n\t\t\tstart: {opacity: 100, height: ghostNode.offsetHeight, marginBottom: this._finalItemHeight},\n\t\t\tfinish: {opacity: 0, height: finalNode.offsetHeight, marginBottom: 20},\n\t\t\t// transition : BX.easing.makeEaseOut(BX.easing.transitions.quart),\n\t\t\tstep: BX.proxy(function (state) {\n\t\t\t\tghostNode.style.opacity = state.opacity / 100;\n\t\t\t\tghostNode.style.height = state.height + \"px\";\n\t\t\t\tfinalNode.style.marginBottom = state.marginBottom + \"px\";\n\t\t\t}, this),\n\t\t\tcomplete: BX.proxy(function () {\n\t\t\t\tghostNode.remove();\n\t\t\t\tfinalNode.style.marginBottom = \"\";\n\t\t\t\tthis.collapseStub();\n\n\t\t\t}, this)\n\t\t});\n\t\thideCasperItem.animate();\n\t}\n\n\tcollapseStub()\n\t{\n\t\tconst removePlannedEvent = new BX.easing({\n\t\t\tduration: 500,\n\t\t\tstart: {opacity: 100, height: this._initialHeight, marginBottom: 15},\n\t\t\tfinish: {opacity: 0, height: 0, marginBottom: 0},\n\t\t\ttransition: BX.easing.makeEaseOut(BX.easing.transitions.quart),\n\t\t\tstep: BX.proxy(function (state) {\n\t\t\t\tthis._stub.style.height = state.height + \"px\";\n\t\t\t\tthis._stub.style.marginBottom = state.marginBottom + \"px\";\n\t\t\t\tthis._stub.style.opacity = state.opacity / 100;\n\t\t\t}, this),\n\t\t\tcomplete: BX.proxy(function () {\n\t\t\t\tthis.inited = false\n\t\t\t}, this)\n\n\t\t});\n\t\tremovePlannedEvent.animate();\n\n\t}\n\n\tstatic create(id, settings)\n\t{\n\t\tconst self = new Item();\n\t\tself.initialize(id, settings);\n\t\treturn self;\n\t}\n}\n","/** @memberof BX.Crm.Timeline.Animation */\nexport default class Shift\n{\n\tconstructor()\n\t{\n\t\tthis._node = null;\n\t\tthis._anchor = null;\n\t\tthis._nodeParent  = null;\n\t\tthis._startPosition = null;\n\t\tthis._events = null;\n\t}\n\n\tinitialize(node, anchor, startPosition, shadowNode, events)\n\t{\n\t\tthis._node = node;\n\t\tthis._shadowNode = shadowNode;\n\t\tthis._anchor = anchor;\n\t\tthis._nodeParent  = node.parentNode;\n\t\tthis._startPosition = startPosition;\n\t\tthis._events = BX.type.isPlainObject(events) ? events : {};\n\n\t}\n\n\trun()\n\t{\n\t\tthis._anchorPosition = BX.pos(this._anchor);\n\n\t\tsetTimeout(\n\t\t\tBX.proxy(\n\t\t\t\tfunction (){\n\t\t\t\t\tBX.addClass(this._node, \"crm-entity-stream-section-casper\" )\n\t\t\t\t},\n\t\t\t\tthis\n\t\t\t),\n\t\t\t0\n\t\t);\n\n\t\tconst movingEvent = new BX.easing({\n\t\t\tduration: 1500,\n\t\t\tstart: {top: this._startPosition.top, height: 0},\n\t\t\tfinish: {top: this._anchorPosition.top, height: this._startPosition.height + 20},\n\t\t\ttransition: BX.easing.makeEaseOut(BX.easing.transitions.quart),\n\t\t\tstep: BX.proxy(function (state) {\n\t\t\t\tthis._node.style.top = state.top + \"px\";\n\t\t\t\tthis._anchor.style.height = state.height + \"px\";\n\t\t\t}, this),\n\t\t\tcomplete: BX.proxy(function () {\n\t\t\t\tthis.finish();\n\t\t\t}, this)\n\t\t});\n\t\tmovingEvent.animate();\n\t}\n\n\tfinish()\n\t{\n\t\tif(BX.type.isFunction(this._events[\"complete\"]))\n\t\t{\n\t\t\tthis._events[\"complete\"]();\n\t\t}\n\t\tif( this._shadowNode !== false )\n\t\t{\n\t\t\t// this._stub.height = 0;\n\t\t}\n\t}\n\n\tstatic create(node, anchor, startPosition, shadowNode, events)\n\t{\n\t\tconst self = new Shift();\n\t\tself.initialize(node, anchor, startPosition, shadowNode, events);\n\t\treturn self;\n\t}\n}\n","import Shift from \"./shift\";\n\n/** @memberof BX.Crm.Timeline.Animation */\nexport default class ItemNew\n{\n\tconstructor()\n\t{\n\t\tthis._id = \"\";\n\t\tthis._settings = {};\n\t\tthis._initialItem = null;\n\t\tthis._finalItem = null;\n\t\tthis._events = null;\n\t}\n\n\tinitialize(id, settings)\n\t{\n\t\tthis._id = BX.type.isNotEmptyString(id) ? id : BX.util.getRandomString(4);\n\t\tthis._settings = settings ? settings : {};\n\n\t\tthis._initialItem = this.getSetting(\"initialItem\");\n\t\tthis._finalItem = this.getSetting(\"finalItem\");\n\n\t\tthis._anchor = this.getSetting(\"anchor\");\n\t\tthis._events = this.getSetting(\"events\", {});\n\t}\n\n\tgetId()\n\t{\n\t\treturn this._id;\n\t}\n\n\tgetSetting(name, defaultval)\n\t{\n\t\treturn this._settings.hasOwnProperty(name) ? this._settings[name] : defaultval;\n\t}\n\n\taddHistoryItem()\n\t{\n\t\tconst node = this._finalItem.getWrapper();\n\n\t\tthis._anchor.parentNode.insertBefore(node, this._anchor.nextSibling);\n\n\t}\n\n\trun()\n\t{\n\t\tthis._node = this._initialItem.getWrapper();\n\t\tthis.createStub();\n\n\t\tBX.addClass(this._node, 'crm-entity-stream-section-animate-start');\n\n\t\tthis._startPosition = BX.pos(this._stub);\n\n\t\tthis._node.style.position = \"absolute\";\n\t\tthis._node.style.width = this._startPosition.width + \"px\";\n\t\tthis._node.style.height = this._startPosition.height + \"px\";\n\t\tthis._node.style.top = this._startPosition.top + \"px\";\n\t\tthis._node.style.left = this._startPosition.left + \"px\";\n\t\tthis._node.style.zIndex = 960;\n\n\n\t\tdocument.body.appendChild(this._node);\n\n\t\tconst shift = Shift.create(\n\t\t\tthis._node,\n\t\t\tthis._anchor,\n\t\t\tthis._startPosition,\n\t\t\tthis._stub,\n\t\t\t{complete: BX.delegate(this.finish, this)}\n\t\t);\n\t\tshift.run();\n\t}\n\n\tcreateStub()\n\t{\n\t\tthis._stub = BX.create(\n\t\t\t\"DIV\",\n\t\t\t{\n\t\t\t\tattrs: { className: \"crm-entity-stream-section crm-entity-stream-section-planned crm-entity-stream-section-shadow\" },\n\t\t\t\tchildren :\n\t\t\t\t\t[\n\t\t\t\t\t\tBX.create(\"DIV\", { attrs: { className: \"crm-entity-stream-section-icon\" } }),\n\t\t\t\t\t\tBX.create(\n\t\t\t\t\t\t\t\"DIV\",\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tprops: { className: \"crm-entity-stream-section-content\" },\n\t\t\t\t\t\t\t\tstyle: { height: this._initialItem._wrapper.clientHeight + \"px\" }\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t)\n\t\t\t\t\t]\n\t\t\t}\n\t\t);\n\n\t\tthis._node.parentNode.insertBefore(this._stub, this._node);\n\t}\n\n\tfinish()\n\t{\n\t\tconst stubContainer = this._stub.querySelector('.crm-entity-stream-section-content');\n\n\t\tthis._anchor.style.height = 0;\n\t\t//this._anchor.parentNode.insertBefore(this._node, this._anchor.nextSibling);\n\n\t\tsetTimeout(\n\t\t\tBX.delegate(function() {\n\t\t\t\tBX.removeClass(this._node, 'crm-entity-stream-section-animate-start');\n\t\t\t}, this),\n\t\t\t0\n\t\t);\n\n\t\tthis._node.style.opacity = 0;\n\n\t\tsetTimeout( BX.delegate(\n\t\t\tfunction() {\n\t\t\t\tstubContainer.style.height = 0;\n\t\t\t\tstubContainer.style.opacity = 0;\n\t\t\t\tstubContainer.style.paddingTop = 0;\n\t\t\t\tstubContainer.style.paddingBottom = 0;\n\t\t\t},\n\t\t\tthis\n\t\t), 120 );\n\n\t\tsetTimeout( BX.delegate(\n\t\t\tfunction() {\n\t\t\t\tBX.remove(this._stub);\n\t\t\t\tBX.remove(this._node);\n\t\t\t\tthis.addHistoryItem();\n\n\t\t\t\tif(BX.type.isFunction(this._events[\"complete\"]))\n\t\t\t\t{\n\t\t\t\t\tthis._events[\"complete\"]();\n\t\t\t\t}\n\t\t\t},\n\t\t\tthis\n\t\t), 420 );\n\n\t}\n\n\tstatic create(id, settings)\n\t{\n\t\tconst self = new ItemNew();\n\t\tself.initialize(id, settings);\n\t\treturn self;\n\t}\n}\n","import Stream from \"../stream\";\nimport Activity from \"../items/scheduled/activity\";\nimport Email from \"../items/scheduled/email\";\nimport Call from \"../items/scheduled/call\";\nimport CallTracker from \"../items/scheduled/call-tracker\";\nimport Meeting from \"../items/scheduled/meeting\";\nimport Task from \"../items/scheduled/task\";\nimport StoreDocument from \"../items/scheduled/store-document\";\nimport WebForm from \"../items/scheduled/webform\";\nimport Wait from \"../items/scheduled/wait\";\nimport Request from \"../items/scheduled/request\";\nimport Rest from \"../items/scheduled/rest\";\nimport OpenLine from \"../items/scheduled/openline\";\nimport Zoom from \"../items/scheduled/zoom\";\nimport Item from \"../animations/item\";\nimport ItemNew from \"../animations/item-new\";\n\n/** @memberof BX.Crm.Timeline.Streams */\nexport default class Schedule extends Stream\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis._items = [];\n\t\tthis._history = null;\n\t\tthis._wrapper = null;\n\t\tthis._anchor = null;\n\t\tthis._stub = null;\n\t\tthis._timeFormat = \"\";\n\t}\n\n\tdoInitialize()\n\t{\n\t\tconst datetimeFormat = BX.message(\"FORMAT_DATETIME\").replace(/:SS/, \"\");\n\t\tconst dateFormat = BX.message(\"FORMAT_DATE\");\n\t\tconst timeFormat = BX.util.trim(datetimeFormat.replace(dateFormat, \"\"));\n\t\tthis._timeFormat = BX.date.convertBitrixFormat(timeFormat);\n\n\t\tif(!this.isStubMode())\n\t\t{\n\t\t\tlet itemData = this.getSetting(\"itemData\");\n\t\t\tif(!BX.type.isArray(itemData))\n\t\t\t{\n\t\t\t\titemData = [];\n\t\t\t}\n\n\t\t\tlet i, length, item;\n\t\t\tfor(i = 0, length = itemData.length; i < length; i++)\n\t\t\t{\n\t\t\t\titem = this.createItem(itemData[i]);\n\t\t\t\tif(item)\n\t\t\t\t{\n\t\t\t\t\tthis._items.push(item);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tlayout()\n\t{\n\t\tthis._wrapper = BX.create(\"DIV\", {});\n\t\tthis._container.appendChild(this._wrapper);\n\n\t\tconst label = BX.create(\"DIV\",\n\t\t\t{\n\t\t\t\tattrs: {className: \"crm-entity-stream-planned-label\"},\n\t\t\t\ttext: this.getMessage(\"planned\")\n\t\t\t}\n\t\t);\n\n\t\tconst wrapperClassName = \"crm-entity-stream-section crm-entity-stream-section-planned-label\";\n\t\tthis._wrapper.appendChild(\n\t\t\tBX.create(\"DIV\",\n\t\t\t\t{\n\t\t\t\t\tattrs: { className: wrapperClassName },\n\t\t\t\t\tchildren:\n\t\t\t\t\t\t[\n\t\t\t\t\t\t\tBX.create(\"DIV\",\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tattrs: { className: \"crm-entity-stream-section-content\" },\n\t\t\t\t\t\t\t\t\tchildren: [ label ]\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\n\t\tif(this.isStubMode())\n\t\t{\n\t\t\tthis.addStub();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tconst length = this._items.length;\n\t\t\tif(length === 0)\n\t\t\t{\n\t\t\t\tthis.addStub();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tfor(let i = 0; i < length; i++)\n\t\t\t\t{\n\t\t\t\t\tconst item = this._items[i];\n\t\t\t\t\titem.setContainer(this._wrapper);\n\t\t\t\t\titem.layout();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.refreshLayout();\n\t\tthis._manager.processSheduleLayoutChange();\n\t}\n\n\trefreshLayout()\n\t{\n\t\tBX.onCustomEvent('Schedule:onBeforeRefreshLayout', [this]);\n\t\tconst length = this._items.length;\n\t\tif(length === 0)\n\t\t{\n\t\t\tthis.addStub();\n\t\t\tif(this._history && this._history.hasContent())\n\t\t\t{\n\t\t\t\tBX.removeClass(this._stub, \"crm-entity-stream-section-last\");\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tBX.addClass(this._stub, \"crm-entity-stream-section-last\");\n\t\t\t}\n\n\t\t\tconst stubIcon = this._stub.querySelector(\".crm-entity-stream-section-icon\");\n\t\t\tif(stubIcon)\n\t\t\t{\n\t\t\t\tif(this._manager.isStubCounterEnabled())\n\t\t\t\t{\n\t\t\t\t\tBX.addClass(stubIcon, \"crm-entity-stream-section-counter\");\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tBX.removeClass(stubIcon, \"crm-entity-stream-section-counter\");\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\tlet i, item;\n\t\tif(this._history && this._history.hasContent())\n\t\t{\n\t\t\tfor(i = 0;  i < length; i++)\n\t\t\t{\n\t\t\t\titem = this._items[i];\n\t\t\t\tif(item.isTerminated())\n\t\t\t\t{\n\t\t\t\t\titem.markAsTerminated(false);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif(length > 1)\n\t\t\t{\n\t\t\t\tfor(i = 0;  i < (length - 1); i++)\n\t\t\t\t{\n\t\t\t\t\titem = this._items[i];\n\t\t\t\t\tif(item.isTerminated())\n\t\t\t\t\t{\n\t\t\t\t\t\titem.markAsTerminated(false);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._items[length - 1].markAsTerminated(true);\n\t\t}\n\t}\n\n\tformatDateTime(time)\n\t{\n\t\tconst now = new Date();\n\t\treturn BX.date.format(\n\t\t\t[\n\t\t\t\t[ \"today\", \"today, \" + this._timeFormat ],\n\t\t\t\t[ \"tommorow\", \"tommorow, \" + this._timeFormat ],\n\t\t\t\t[ \"yesterday\", \"yesterday, \" + this._timeFormat ],\n\t\t\t\t[ \"\" , (time.getFullYear() === now.getFullYear() ? \"j F \" : \"j F Y \") + this._timeFormat ]\n\t\t\t],\n\t\t\ttime,\n\t\t\tnow\n\t\t);\n\t}\n\n\tcheckItemForTermination(item)\n\t{\n\t\tif(this._history && this._history.getItemCount() > 0)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\t\treturn this.getLastItem() === item;\n\t}\n\n\tgetLastItem()\n\t{\n\t\treturn this._items.length > 0 ? this._items[this._items.length - 1] : null;\n\t}\n\n\tcalculateItemIndex(item)\n\t{\n\t\tlet i, length;\n\t\tconst time = item.getDeadline();\n\t\tif(time)\n\t\t{\n\t\t\t//Item has deadline\n\t\t\tfor(i = 0, length = this._items.length; i < length; i++)\n\t\t\t{\n\t\t\t\tconst curTime = this._items[i].getDeadline();\n\t\t\t\tif(!curTime || time <= curTime)\n\t\t\t\t{\n\t\t\t\t\treturn i;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\t//Item has't deadline\n\t\t\tconst sourceId = item.getSourceId();\n\t\t\tfor(i = 0, length = this._items.length; i < length; i++)\n\t\t\t{\n\t\t\t\tif(this._items[i].getDeadline())\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif(sourceId <= this._items[i].getSourceId())\n\t\t\t\t{\n\t\t\t\t\treturn i;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn this._items.length;\n\t}\n\n\tgetItemCount()\n\t{\n\t\treturn this._items.length;\n\t}\n\n\tgetItems()\n\t{\n\t\treturn this._items;\n\t}\n\n\tgetItemByAssociatedEntity($entityTypeId, entityId)\n\t{\n\t\tif(!BX.type.isNumber($entityTypeId))\n\t\t{\n\t\t\t$entityTypeId = parseInt($entityTypeId);\n\t\t}\n\n\t\tif(!BX.type.isNumber(entityId))\n\t\t{\n\t\t\tentityId = parseInt(entityId);\n\t\t}\n\n\t\tif(isNaN($entityTypeId) || $entityTypeId <= 0 || isNaN(entityId) || entityId <= 0)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tfor(let i = 0, length = this._items.length; i < length; i++)\n\t\t{\n\t\t\tconst item = this._items[i];\n\t\t\tif(item.getAssociatedEntityTypeId() === $entityTypeId && item.getAssociatedEntityId() === entityId)\n\t\t\t{\n\t\t\t\treturn item;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tgetItemByData(itemData)\n\t{\n\t\tif(!BX.type.isPlainObject(itemData))\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\treturn this.getItemByAssociatedEntity(\n\t\t\tBX.prop.getInteger(itemData, \"ASSOCIATED_ENTITY_TYPE_ID\", 0),\n\t\t\tBX.prop.getInteger(itemData, \"ASSOCIATED_ENTITY_ID\", 0)\n\t\t);\n\t}\n\n\tgetItemIndex(item)\n\t{\n\t\tfor(let i = 0, l = this._items.length; i < l; i++)\n\t\t{\n\t\t\tif(this._items[i] === item)\n\t\t\t{\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\t\treturn -1;\n\t}\n\n\tgetItemByIndex(index)\n\t{\n\t\treturn index < this._items.length ? this._items[index] : null;\n\t}\n\n\tremoveItemByIndex(index)\n\t{\n\t\tif(index < this._items.length)\n\t\t{\n\t\t\tthis._items.splice(index, 1);\n\t\t}\n\t}\n\n\tcreateItem(data)\n\t{\n\t\tconst entityTypeID = BX.prop.getInteger(data, \"ASSOCIATED_ENTITY_TYPE_ID\", 0);\n\t\tconst entityID = BX.prop.getInteger(data, \"ASSOCIATED_ENTITY_ID\", 0);\n\t\tconst entityData = BX.prop.getObject(data, \"ASSOCIATED_ENTITY\", {});\n\t\tconst itemId = BX.CrmEntityType.resolveName(entityTypeID) + \"_\" + entityID.toString();\n\n\t\tif(entityTypeID === BX.CrmEntityType.enumeration.wait)\n\t\t{\n\t\t\treturn Wait.create(\n\t\t\t\titemId,\n\t\t\t\t{\n\t\t\t\t\tschedule: this,\n\t\t\t\t\tcontainer: this._wrapper,\n\t\t\t\t\tactivityEditor: this._activityEditor,\n\t\t\t\t\tdata: data\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t\telse// if(entityTypeID === BX.CrmEntityType.enumeration.activity)\n\t\t{\n\t\t\tconst typeId = BX.prop.getInteger(entityData, \"TYPE_ID\", 0);\n\t\t\tconst providerId = BX.prop.getString(entityData, \"PROVIDER_ID\", \"\");\n\n\t\t\tif(typeId === BX.CrmActivityType.email)\n\t\t\t{\n\t\t\t\treturn Email.create(\n\t\t\t\t\titemId,\n\t\t\t\t\t{\n\t\t\t\t\t\tschedule: this,\n\t\t\t\t\t\tcontainer: this._wrapper,\n\t\t\t\t\t\tactivityEditor: this._activityEditor,\n\t\t\t\t\t\tdata: data\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t\telse if(typeId === BX.CrmActivityType.call)\n\t\t\t{\n\t\t\t\treturn Call.create(\n\t\t\t\t\titemId,\n\t\t\t\t\t{\n\t\t\t\t\t\tschedule: this,\n\t\t\t\t\t\tcontainer: this._wrapper,\n\t\t\t\t\t\tactivityEditor: this._activityEditor,\n\t\t\t\t\t\tdata: data\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t\telse if(typeId === BX.CrmActivityType.meeting)\n\t\t\t{\n\t\t\t\treturn Meeting.create(\n\t\t\t\t\titemId,\n\t\t\t\t\t{\n\t\t\t\t\t\tschedule: this,\n\t\t\t\t\t\tcontainer: this._wrapper,\n\t\t\t\t\t\tactivityEditor: this._activityEditor,\n\t\t\t\t\t\tdata: data\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t\telse if(typeId === BX.CrmActivityType.task)\n\t\t\t{\n\t\t\t\treturn Task.create(\n\t\t\t\t\titemId,\n\t\t\t\t\t{\n\t\t\t\t\t\tschedule: this,\n\t\t\t\t\t\tcontainer: this._wrapper,\n\t\t\t\t\t\tactivityEditor: this._activityEditor,\n\t\t\t\t\t\tdata: data\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t\telse if(typeId === BX.CrmActivityType.provider)\n\t\t\t{\n\t\t\t\tif(providerId === \"CRM_WEBFORM\")\n\t\t\t\t{\n\t\t\t\t\treturn WebForm.create(\n\t\t\t\t\t\titemId,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tschedule: this,\n\t\t\t\t\t\t\tcontainer: this._wrapper,\n\t\t\t\t\t\t\tactivityEditor: this._activityEditor,\n\t\t\t\t\t\t\tdata: data\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\telse if(providerId === \"CRM_REQUEST\")\n\t\t\t\t{\n\t\t\t\t\treturn Request.create(\n\t\t\t\t\t\titemId,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tschedule: this,\n\t\t\t\t\t\t\tcontainer: this._wrapper,\n\t\t\t\t\t\t\tactivityEditor: this._activityEditor,\n\t\t\t\t\t\t\tdata: data\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\telse if(providerId === \"IMOPENLINES_SESSION\")\n\t\t\t\t{\n\t\t\t\t\treturn OpenLine.create(\n\t\t\t\t\t\titemId,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tschedule: this,\n\t\t\t\t\t\t\tcontainer: this._wrapper,\n\t\t\t\t\t\t\tactivityEditor: this._activityEditor,\n\t\t\t\t\t\t\tdata: data\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\telse if(providerId === \"ZOOM\")\n\t\t\t\t{\n\t\t\t\t\treturn Zoom.create(\n\t\t\t\t\t\titemId,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tschedule: this,\n\t\t\t\t\t\t\tcontainer: this._wrapper,\n\t\t\t\t\t\t\tactivityEditor: this._activityEditor,\n\t\t\t\t\t\t\tdata: data\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\telse if(providerId === \"REST_APP\")\n\t\t\t\t{\n\t\t\t\t\treturn Rest.create(\n\t\t\t\t\t\titemId,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tschedule: this,\n\t\t\t\t\t\t\tcontainer: this._wrapper,\n\t\t\t\t\t\t\tactivityEditor: this._activityEditor,\n\t\t\t\t\t\t\tdata: data\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\telse if(providerId === 'CRM_DELIVERY')\n\t\t\t\t{\n\t\t\t\t\treturn Activity.create(\n\t\t\t\t\t\titemId,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tschedule: this,\n\t\t\t\t\t\t\tcontainer: this._wrapper,\n\t\t\t\t\t\t\tactivityEditor: this._activityEditor,\n\t\t\t\t\t\t\tdata: data,\n\t\t\t\t\t\t\tvueComponent: BX.Crm.Timeline.DeliveryActivity,\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\telse if(providerId === 'CRM_CALL_TRACKER')\n\t\t\t\t{\n\t\t\t\t\treturn CallTracker.create(\n\t\t\t\t\t\titemId,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tschedule: this,\n\t\t\t\t\t\t\tcontainer: this._wrapper,\n\t\t\t\t\t\t\tactivityEditor: this._activityEditor,\n\t\t\t\t\t\t\tdata: data,\n\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\telse if(providerId === 'STORE_DOCUMENT')\n\t\t\t\t{\n\t\t\t\t\treturn StoreDocument.create(\n\t\t\t\t\t\titemId,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tschedule: this,\n\t\t\t\t\t\t\tcontainer: this._wrapper,\n\t\t\t\t\t\t\tactivityEditor: this._activityEditor,\n\t\t\t\t\t\t\tdata: data\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\taddItem(item, index)\n\t{\n\t\tif(!BX.type.isNumber(index) || index < 0)\n\t\t{\n\t\t\tindex = this.calculateItemIndex(item);\n\t\t}\n\n\t\tif(index < this._items.length)\n\t\t{\n\t\t\tthis._items.splice(index, 0, item);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis._items.push(item);\n\t\t}\n\n\t\tthis.removeStub();\n\n\t\tthis.refreshLayout();\n\t\tthis._manager.processSheduleLayoutChange();\n\t}\n\n\tgetHistory()\n\t{\n\t\treturn this._history;\n\t}\n\n\tsetHistory(history)\n\t{\n\t\tthis._history = history;\n\t}\n\n\tcreateAnchor(index)\n\t{\n\t\tthis._anchor = BX.create(\"DIV\", { attrs: { className: \"crm-entity-stream-section crm-entity-stream-section-shadow\" } });\n\t\tif(index >= 0 && index < this._items.length)\n\t\t{\n\t\t\tthis._wrapper.insertBefore(this._anchor, this._items[index].getWrapper());\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis._wrapper.appendChild(this._anchor);\n\t\t}\n\t\treturn this._anchor;\n\t}\n\n\tdeleteItem(item)\n\t{\n\t\tconst index = this.getItemIndex(item);\n\t\tif(index < 0)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\titem.clearLayout();\n\t\tthis.removeItemByIndex(index);\n\n\t\tthis.refreshLayout();\n\t\tthis._manager.processSheduleLayoutChange();\n\t}\n\n\trefreshItem(item)\n\t{\n\t\tconst index = this.getItemIndex(item);\n\t\tif(index < 0)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.removeItemByIndex(index);\n\n\t\tconst newItem = this.createItem(item.getData());\n\t\tconst newIndex = this.calculateItemIndex(newItem);\n\t\tif(newIndex === index)\n\t\t{\n\t\t\tthis.addItem(item, newIndex);\n\t\t\titem.refreshLayout();\n\t\t\titem.addWrapperClass(\"crm-entity-stream-section-updated\", 1000);\n\t\t\treturn;\n\t\t}\n\n\t\tconst anchor = this.createAnchor(newIndex);\n\t\tthis.addItem(newItem, newIndex);\n\t\tnewItem.layout({ add: false });\n\n\t\tconst animation = Item.create(\n\t\t\t\"\",\n\t\t\t{\n\t\t\t\tinitialItem: item,\n\t\t\t\tfinalItem: newItem,\n\t\t\t\tanchor: anchor\n\t\t\t}\n\t\t);\n\t\tanimation.run();\n\t}\n\n\ttransferItemToHistory(item, historyItemData)\n\t{\n\t\tconst index = this.getItemIndex(item);\n\t\tif(index < 0)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.removeItemByIndex(index);\n\n\t\tthis.refreshLayout();\n\t\tthis._manager.processSheduleLayoutChange();\n\n\t\tconst historyItem = this._history.createItem(historyItemData);\n\t\tthis._history.addItem(historyItem, 0);\n\t\thistoryItem.layout({ add: false });\n\n\t\tconst animation = ItemNew.create(\n\t\t\t\"\",\n\t\t\t{\n\t\t\t\tinitialItem: item,\n\t\t\t\tfinalItem: historyItem,\n\t\t\t\tanchor: this._history.createAnchor(),\n\t\t\t\tevents: {complete: BX.delegate(this.onTransferComplete, this)}\n\t\t\t}\n\t\t);\n\t\tanimation.run();\n\t}\n\n\tonTransferComplete()\n\t{\n\t\tthis._history.refreshLayout();\n\n\t\tif(this._items.length === 0)\n\t\t{\n\t\t\tthis.addStub();\n\t\t}\n\t}\n\n\tonItemMarkedAsDone(item, params)\n\t{\n\t}\n\n\taddStub()\n\t{\n\t\tif(!this._stub)\n\t\t{\n\t\t\tconst stubClassName = \"crm-entity-stream-section crm-entity-stream-section-planned crm-entity-stream-section-notTask\";\n\t\t\tlet stubIconClassName = \"crm-entity-stream-section-icon crm-entity-stream-section-icon-info\";\n\n\t\t\tlet stubMessage = this.getMessage(\"stub\");\n\n\t\t\tconst ownerTypeId = this._manager.getOwnerTypeId();\n\t\t\tif(ownerTypeId === BX.CrmEntityType.enumeration.lead)\n\t\t\t{\n\t\t\t\tstubMessage = this.getMessage(\"leadStub\");\n\t\t\t}\n\t\t\telse if(ownerTypeId === BX.CrmEntityType.enumeration.deal)\n\t\t\t{\n\t\t\t\tstubMessage = this.getMessage(\"dealStub\");\n\t\t\t}\n\n\t\t\tif(this._manager.isStubCounterEnabled())\n\t\t\t{\n\t\t\t\tstubIconClassName += \" crm-entity-stream-section-counter\";\n\t\t\t}\n\n\t\t\tthis._stub = BX.create(\"DIV\",\n\t\t\t\t{\n\t\t\t\t\tattrs: { className: stubClassName },\n\t\t\t\t\tchildren:\n\t\t\t\t\t\t[\n\t\t\t\t\t\t\tBX.create(\"DIV\", { attrs: { className: stubIconClassName } }),\n\t\t\t\t\t\t\tBX.create(\"DIV\",\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tattrs: { className: \"crm-entity-stream-section-content\" },\n\t\t\t\t\t\t\t\t\tchildren:\n\t\t\t\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t\t\t\tBX.create(\"DIV\",\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\tattrs: { className: \"crm-entity-stream-content-event\" },\n\t\t\t\t\t\t\t\t\t\t\t\t\tchildren:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tBX.create(\"DIV\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tattrs: { className: \"crm-entity-stream-content-detail\" },\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttext: stubMessage\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t);\n\t\t\tthis._wrapper.appendChild(this._stub);\n\t\t}\n\n\t\tif(this._history && this._history.getItemCount() > 0)\n\t\t{\n\t\t\tBX.removeClass(this._stub, \"crm-entity-stream-section-last\");\n\t\t}\n\t\telse\n\t\t{\n\t\t\tBX.addClass(this._stub, \"crm-entity-stream-section-last\");\n\t\t}\n\t}\n\n\tremoveStub()\n\t{\n\t\tif(this._stub)\n\t\t{\n\t\t\tthis._stub = BX.remove(this._stub);\n\t\t}\n\n\t}\n\n\tgetMessage(name)\n\t{\n\t\tconst m = Schedule.messages;\n\t\treturn m.hasOwnProperty(name) ? m[name] : name;\n\t}\n\n\tstatic create(id, settings)\n\t{\n\t\tconst self = new Schedule();\n\t\tself.initialize(id, settings);\n\t\tSchedule.items[self.getId()] = self;\n\t\treturn self;\n\t}\n\n\tstatic items = {};\n\tstatic messages = {};\n}\n","import History from \"./history\";\n\n/** @memberof BX.Crm.Timeline.Items */\nexport default class Modification extends History\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\t}\n\n\tgetMessage(name)\n\t{\n\t\tconst m = Modification.messages;\n\t\treturn m.hasOwnProperty(name) ? m[name] : name;\n\t}\n\n\tgetTitle()\n\t{\n\t\treturn this.getTextDataParam(\"TITLE\");\n\t}\n\n\tprepareContent()\n\t{\n\t\tconst wrapper = BX.create(\"DIV\", {attrs: {className: \"crm-entity-stream-section crm-entity-stream-section-info\"}});\n\n\t\twrapper.appendChild(\n\t\t\tBX.create(\"DIV\", { attrs: { className: \"crm-entity-stream-section-icon crm-entity-stream-section-icon-info\" } })\n\t\t);\n\n\t\tconst content = BX.create(\"DIV\", {attrs: {className: \"crm-entity-stream-content-event\"}});\n\t\tconst header = this.prepareHeaderLayout();\n\n\t\tconst contentChildren = [];\n\t\tif (BX.type.isNotEmptyString(this.getTextDataParam(\"START_NAME\")))\n\t\t{\n\t\t\tcontentChildren.push(\n\t\t\t\tBX.create(\"SPAN\",\n\t\t\t\t\t{\n\t\t\t\t\t\tattrs: {className: \"crm-entity-stream-content-detain-info-status\"},\n\t\t\t\t\t\ttext: this.getTextDataParam(\"START_NAME\")\n\t\t\t\t\t})\n\t\t\t);\n\t\t\tcontentChildren.push(\n\t\t\t\tBX.create(\"SPAN\",{ attrs: { className: \"crm-entity-stream-content-detail-info-separator-icon\" } })\n\t\t\t);\n\t\t}\n\n\t\tif (BX.type.isNotEmptyString(this.getTextDataParam(\"FINISH_NAME\")))\n\t\t{\n\t\t\tcontentChildren.push(\n\t\t\t\tBX.create(\"SPAN\",\n\t\t\t\t\t{\n\t\t\t\t\t\tattrs: { className: \"crm-entity-stream-content-detain-info-status\" },\n\t\t\t\t\t\ttext: this.getTextDataParam(\"FINISH_NAME\")\n\t\t\t\t\t})\n\t\t\t);\n\t\t}\n\n\n\t\tcontent.appendChild(header);\n\t\tcontent.appendChild(\n\t\t\tBX.create(\"DIV\",\n\t\t\t\t{\n\t\t\t\t\tattrs: { className: \"crm-entity-stream-content-detail\" },\n\t\t\t\t\tchildren:\n\t\t\t\t\t\t[\n\t\t\t\t\t\t\tBX.create(\"DIV\",\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tattrs: { className: \"crm-entity-stream-content-detail-info\" },\n\t\t\t\t\t\t\t\t\tchildren: contentChildren\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t]\n\t\t\t\t})\n\t\t);\n\n\t\t//region Author\n\t\tconst authorNode = this.prepareAuthorLayout();\n\t\tif(authorNode)\n\t\t{\n\t\t\tcontent.appendChild(authorNode);\n\t\t}\n\t\t//endregion\n\n\t\twrapper.appendChild(\n\t\t\tBX.create(\"DIV\", { attrs: { className: \"crm-entity-stream-section-content\" }, children: [ content ] })\n\t\t);\n\n\t\treturn wrapper;\n\t}\n\n\tstatic create(id, settings)\n\t{\n\t\tconst self = new Modification();\n\t\tself.initialize(id, settings);\n\t\treturn self;\n\t}\n\n\tstatic messages = {};\n}\n","import History from \"./history\";\n\n/** @memberof BX.Crm.Timeline.Actions */\nexport default class Conversion extends History\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\t}\n\n\tgetMessage(name)\n\t{\n\t\tconst m = Conversion.messages;\n\t\treturn m.hasOwnProperty(name) ? m[name] : name;\n\t}\n\n\tgetTitle()\n\t{\n\t\treturn this.getTextDataParam(\"TITLE\");\n\t}\n\n\tprepareContent()\n\t{\n\t\tconst wrapper = BX.create(\"DIV\", {attrs: {className: \"crm-entity-stream-section crm-entity-stream-section-convert crm-entity-stream-section-history\"}});\n\n\t\twrapper.appendChild(\n\t\t\tBX.create(\"DIV\", { attrs: { className: \"crm-entity-stream-section-icon crm-entity-stream-section-icon-convert\" } })\n\t\t);\n\n\t\tconst content = BX.create(\"DIV\", {attrs: {className: \"crm-entity-stream-content-event\"}});\n\t\tconst header = this.prepareHeaderLayout();\n\n\t\tcontent.appendChild(header);\n\n\t\tconst entityNodes = [];\n\t\tconst entityInfos = this.getArrayDataParam(\"ENTITIES\");\n\t\tlet i = 0;\n\t\tconst length = entityInfos.length;\n\t\tfor(; i < length; i++)\n\t\t{\n\t\t\tconst entityInfo = entityInfos[i];\n\n\t\t\tlet entityNode;\n\t\t\tif(BX.prop.getString(entityInfo, 'SHOW_URL', \"\") === \"\")\n\t\t\t{\n\t\t\t\tentityNode = BX.create(\"DIV\",\n\t\t\t\t\t{\n\t\t\t\t\t\tattrs: { className: \"crm-entity-stream-content-detail-convert\" },\n\t\t\t\t\t\tchildren:\n\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\tBX.create(\"DIV\",\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tattrs: { className: \"crm-entity-stream-content-detain-convert-status\" },\n\t\t\t\t\t\t\t\t\t\tchildren:\n\t\t\t\t\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t\t\t\t\tBX.create(\"SPAN\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tattrs: { className: \"crm-entity-stream-content-detail-status-text\" },\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttext: BX.CrmEntityType.getNotFoundMessage(entityInfo['ENTITY_TYPE_ID'])\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tentityNode = BX.create(\"DIV\",\n\t\t\t\t\t{\n\t\t\t\t\t\tattrs: { className: \"crm-entity-stream-content-detail-convert\" },\n\t\t\t\t\t\tchildren:\n\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\tBX.create(\"DIV\",\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tattrs: { className: \"crm-entity-stream-content-detain-convert-status\" },\n\t\t\t\t\t\t\t\t\t\tchildren:\n\t\t\t\t\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t\t\t\t\tBX.create(\"SPAN\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tattrs: { className: \"crm-entity-stream-content-detail-status-text\" },\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttext: entityInfo['ENTITY_TYPE_CAPTION']\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\tBX.create(\"SPAN\", { attrs: { className: \"crm-entity-stream-content-detail-convert-separator-icon\" } }),\n\t\t\t\t\t\t\t\tBX.create(\"DIV\",\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tattrs: { className: \"crm-entity-stream-content-detain-convert-status\" },\n\t\t\t\t\t\t\t\t\t\tchildren:\n\t\t\t\t\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t\t\t\t\tBX.create(\"A\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tattrs:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName: \"crm-entity-stream-content-detail-target\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thref: entityInfo['SHOW_URL']\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttext: entityInfo['TITLE']\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t\tentityNodes.push(entityNode);\n\t\t}\n\n\t\tcontent.appendChild(\n\t\t\tBX.create(\"DIV\",\n\t\t\t\t{\n\t\t\t\t\tattrs: { className: \"crm-entity-stream-content-detail\" },\n\t\t\t\t\tchildren: entityNodes\n\t\t\t\t})\n\t\t);\n\n\t\t//region Author\n\t\tconst authorNode = this.prepareAuthorLayout();\n\t\tif(authorNode)\n\t\t{\n\t\t\tcontent.appendChild(authorNode);\n\t\t}\n\t\t//endregion\n\n\t\twrapper.appendChild(\n\t\t\tBX.create(\"DIV\", { attrs: { className: \"crm-entity-stream-section-content\" }, children: [ content ] })\n\t\t);\n\n\t\treturn wrapper;\n\t}\n\n\tstatic create(id, settings)\n\t{\n\t\tconst self = new Conversion();\n\t\tself.initialize(id, settings);\n\t\treturn self;\n\t}\n\n\tstatic messages = {};\n}\n","import HistoryActivity from \"./history-activity\";\nimport {HistoryEmail} from \"../actions/email\";\n\n/** @memberof BX.Crm.Timeline.Items */\nexport default class Email extends HistoryActivity\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\t}\n\n\tprepareHeaderLayout()\n\t{\n\t\tconst header = BX.create(\"DIV\", {attrs: {className: \"crm-entity-stream-content-header\"}});\n\t\theader.appendChild(this.prepareTitleLayout());\n\n\t\tconst entityData = this.getAssociatedEntityData();\n\t\tconst emailInfo = BX.prop.getObject(entityData, \"EMAIL_INFO\", null);\n\t\tconst statusText = emailInfo !== null ? BX.prop.getString(emailInfo, \"STATUS_TEXT\", \"\") : \"\";\n\t\tconst error = emailInfo !== null ? BX.prop.getBoolean(emailInfo, \"STATUS_ERROR\", false) : false;\n\t\tconst className = !error ? \"crm-entity-stream-content-event-skipped\" : \"crm-entity-stream-content-event-missing\";\n\t\tif(statusText !== \"\")\n\t\t{\n\t\t\theader.appendChild(\n\t\t\t\tBX.create(\n\t\t\t\t\t\"SPAN\",\n\t\t\t\t\t{\n\t\t\t\t\t\tprops: { className: className},\n\t\t\t\t\t\ttext: statusText\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\n\t\tconst markNode = this.prepareMarkLayout();\n\t\tif(markNode)\n\t\t{\n\t\t\theader.appendChild(markNode);\n\t\t}\n\n\t\theader.appendChild(this.prepareTimeLayout());\n\t\treturn header;\n\t}\n\n\tprepareContextMenuItems()\n\t{\n\t\tconst menuItems = [];\n\n\t\tif (!this.isReadOnly())\n\t\t{\n\t\t\tmenuItems.push({id: \"view\", text: this.getMessage(\"menuView\"), onclick: BX.delegate(this.view, this)});\n\n\t\t\tmenuItems.push({ id: \"remove\", text: this.getMessage(\"menuDelete\"), onclick: BX.delegate(this.processRemoval, this)});\n\n\t\t\tif (this.isFixed() || this._fixedHistory.findItemById(this._id))\n\t\t\t\tmenuItems.push({ id: \"unfasten\", text: this.getMessage(\"menuUnfasten\"), onclick: BX.delegate(this.unfasten, this)});\n\t\t\telse\n\t\t\t\tmenuItems.push({ id: \"fasten\", text: this.getMessage(\"menuFasten\"), onclick: BX.delegate(this.fasten, this)});\n\t\t}\n\n\t\treturn menuItems;\n\t}\n\n\treply()\n\t{\n\t}\n\n\treplyAll()\n\t{\n\t}\n\n\tforward()\n\t{\n\t}\n\n\tgetRemoveMessage()\n\t{\n\t\tconst title = BX.util.htmlspecialchars(this.getTitle());\n\t\treturn this.getMessage('emailRemove').replace(\"#TITLE#\", title);\n\t}\n\n\tprepareContent()\n\t{\n\t\tconst entityData = this.getAssociatedEntityData();\n\n\t\tlet description = BX.prop.getString(entityData, \"DESCRIPTION_RAW\", \"\");\n\t\tif(description !== \"\")\n\t\t{\n\t\t\t//trim leading spaces\n\t\t\tdescription = description.replace(/^\\s+/,'');\n\t\t}\n\n\t\tconst communication = BX.prop.getObject(entityData, \"COMMUNICATION\", {});\n\t\tconst communicationTitle = BX.prop.getString(communication, \"TITLE\", \"\");\n\t\tconst communicationShowUrl = BX.prop.getString(communication, \"SHOW_URL\", \"\");\n\t\tconst communicationValue = BX.prop.getString(communication, \"VALUE\", \"\");\n\n\t\tconst outerWrapper = BX.create(\"DIV\", {attrs: {className: \"crm-entity-stream-section crm-entity-stream-section-history crm-entity-stream-section-email\"}});\n\t\touterWrapper.appendChild(\n\t\t\tBX.create(\"DIV\",\n\t\t\t\t{\n\t\t\t\t\tattrs: { className: \"crm-entity-stream-section-icon crm-entity-stream-section-icon-email\" }\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\n\t\tif (this.isFixed())\n\t\t\tBX.addClass(outerWrapper, 'crm-entity-stream-section-top-fixed');\n\n\t\tconst wrapper = BX.create(\"DIV\", {attrs: {className: \"crm-entity-stream-content-event\"}});\n\t\touterWrapper.appendChild(\n\t\t\tBX.create(\"DIV\",\n\t\t\t\t{\n\t\t\t\t\tattrs: { className: \"crm-entity-stream-section-content\" },\n\t\t\t\t\tchildren: [ wrapper ]\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\n\t\t//Header\n\t\tconst header = this.prepareHeaderLayout();\n\t\twrapper.appendChild(header);\n\n\t\t//region Context Menu\n\t\tif(this.isContextMenuEnabled())\n\t\t{\n\t\t\twrapper.appendChild(this.prepareContextMenuButton());\n\t\t}\n\t\t//endregion\n\n\t\t//Details\n\t\tconst detailWrapper = BX.create(\"DIV\",\n\t\t\t{\n\t\t\t\tattrs: {className: \"crm-entity-stream-content-detail-email\"}\n\t\t\t}\n\t\t);\n\t\twrapper.appendChild(\n\t\t\tBX.create(\"DIV\",\n\t\t\t\t{\n\t\t\t\t\tattrs: { className: \"crm-entity-stream-content-detail\" },\n\t\t\t\t\tchildren: [ detailWrapper ]\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\n\t\t//TODO: Add status text\n\t\t/*\n\t\tdetailWrapper.appendChild(\n\t\t\tBX.create(\"DIV\", { attrs: { className: \"crm-entity-stream-content-detail-email-read-status\" } })\n\t\t);\n\t\t*/\n\n\t\tdetailWrapper.appendChild(\n\t\t\tBX.create(\"DIV\",\n\t\t\t\t{\n\t\t\t\t\tattrs: { className: \"crm-entity-stream-content-detail-email-title\" },\n\t\t\t\t\tchildren:\n\t\t\t\t\t\t[\n\t\t\t\t\t\t\tBX.create(\"A\",\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tattrs: { href: \"#\" },\n\t\t\t\t\t\t\t\t\tevents: { \"click\": this._headerClickHandler },\n\t\t\t\t\t\t\t\t\ttext: this.getTitle()\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\n\t\tconst communicationWrapper = BX.create(\"DIV\",\n\t\t\t{attrs: {className: \"crm-entity-stream-content-detail-email-to\"}}\n\t\t);\n\t\tdetailWrapper.appendChild(communicationWrapper);\n\n\t\t//Communications\n\t\tif(communicationTitle !== \"\")\n\t\t{\n\t\t\tif(communicationShowUrl !== \"\")\n\t\t\t{\n\t\t\t\tcommunicationWrapper.appendChild(\n\t\t\t\t\tBX.create(\"A\",\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tattrs: { href: communicationShowUrl },\n\t\t\t\t\t\t\ttext: communicationTitle\n\t\t\t\t\t\t}\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tcommunicationWrapper.appendChild(BX.create(\"SPAN\", { text: communicationTitle }));\n\t\t\t}\n\t\t}\n\n\t\tif(communicationValue !== \"\")\n\t\t{\n\t\t\tif(communicationTitle !== \"\")\n\t\t\t{\n\t\t\t\tcommunicationWrapper.appendChild(BX.create(\"SPAN\", { text: \" \" }));\n\t\t\t}\n\t\t\tcommunicationWrapper.appendChild(\n\t\t\t\tBX.create(\n\t\t\t\t\t\"SPAN\",\n\t\t\t\t\t{\n\t\t\t\t\t\tattrs: { className: \"crm-entity-stream-content-detail-email-address\" },\n\t\t\t\t\t\ttext: communicationValue\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\n\t\t//Content\n\t\tdetailWrapper.appendChild(\n\t\t\tBX.create(\"DIV\",\n\t\t\t\t{\n\t\t\t\t\tattrs: { className: \"crm-entity-stream-content-detail-email-fragment\" },\n\t\t\t\t\tchildren: this.prepareCutOffElements(description, 128, this._headerClickHandler)\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\n\t\t//region Author\n\t\tconst authorNode = this.prepareAuthorLayout();\n\t\tif(authorNode)\n\t\t{\n\t\t\twrapper.appendChild(authorNode);\n\t\t}\n\t\t//endregion\n\n\t\t//region  Actions\n\t\tthis._actionContainer = BX.create(\"SPAN\", { attrs: { className: \"crm-entity-stream-content-detail-action\" } });\n\t\twrapper.appendChild(this._actionContainer);\n\t\t//endregion\n\n\t\tif (!this.isReadOnly())\n\t\t\twrapper.appendChild(this.prepareFixedSwitcherLayout());\n\n\t\treturn outerWrapper;\n\t}\n\n\tprepareActions()\n\t{\n\t\tif(this.isReadOnly())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis._actions.push(\n\t\t\tHistoryEmail.create(\n\t\t\t\t\"email\",\n\t\t\t\t{\n\t\t\t\t\titem: this,\n\t\t\t\t\tcontainer: this._actionContainer,\n\t\t\t\t\tentityData: this.getAssociatedEntityData(),\n\t\t\t\t\tactivityEditor: this._activityEditor\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\t}\n\n\tshowActions(show)\n\t{\n\t\tif(this._actionContainer)\n\t\t{\n\t\t\tthis._actionContainer.style.display = show ? \"\" : \"none\";\n\t\t}\n\t}\n\n\tstatic create(id, settings)\n\t{\n\t\tconst self = new Email();\n\t\tself.initialize(id, settings);\n\t\treturn self;\n\t}\n}\n","import Activity from \".//activity\";\n\n/** @memberof BX.Crm.Timeline.Actions */\nexport class Call extends Activity\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis._clickHandler = BX.delegate(this.onClick, this);\n\t\tthis._menu = null;\n\t\tthis._isMenuShown = false;\n\t\tthis._menuItems = null;\n\t}\n\n\tgetButton()\n\t{\n\t\treturn null;\n\t}\n\n\tonClick(e)\n\t{\n\t\tif(typeof(window.top['BXIM']) === 'undefined')\n\t\t{\n\t\t\twindow.alert(this.getMessage(\"telephonyNotSupported\"));\n\t\t\treturn;\n\t\t}\n\n\t\tlet phone = \"\";\n\t\tconst itemData = this.getItemData();\n\t\tconst phones = BX.prop.getArray(itemData, \"PHONE\", []);\n\n\t\tif(phones.length === 1)\n\t\t{\n\t\t\tthis.addCall(phones[0]['VALUE']);\n\t\t}\n\t\telse if(phones.length > 1)\n\t\t{\n\t\t\tthis.showMenu();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tconst communication = BX.prop.getObject(this._entityData, \"COMMUNICATION\", null);\n\t\t\tif(communication)\n\t\t\t{\n\t\t\t\tif(BX.prop.getString(communication, \"TYPE\") === \"PHONE\")\n\t\t\t\t{\n\t\t\t\t\tphone = BX.prop.getString(communication, \"VALUE\");\n\t\t\t\t\tif(phone)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.addCall(phone);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn BX.PreventDefault(e);\n\t}\n\n\tshowMenu()\n\t{\n\t\tif(this._isMenuShown)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.prepareMenuItems();\n\n\t\tif(!this._menuItems || this._menuItems.length === 0)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\n\t\tthis._menu = new BX.PopupMenuWindow(\n\t\t\tthis._id,\n\t\t\tthis._container,\n\t\t\tthis._menuItems,\n\t\t\t{\n\t\t\t\toffsetTop: 0,\n\t\t\t\toffsetLeft: 16,\n\t\t\t\tevents:\n\t\t\t\t\t{\n\t\t\t\t\t\tonPopupShow: BX.delegate(this.onMenuShow, this),\n\t\t\t\t\t\tonPopupClose: BX.delegate(this.onMenuClose, this),\n\t\t\t\t\t\tonPopupDestroy: BX.delegate(this.onMenuDestroy, this)\n\t\t\t\t\t}\n\t\t\t}\n\t\t);\n\n\t\tthis._menu.popupWindow.show();\n\t}\n\n\tcloseMenu()\n\t{\n\t\tif(!this._isMenuShown)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif(this._menu)\n\t\t{\n\t\t\tthis._menu.close();\n\t\t}\n\t}\n\n\tprepareMenuItems()\n\t{\n\t\tif(this._menuItems)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst itemData = this.getItemData();\n\t\tconst phones = BX.prop.getArray(itemData, \"PHONE\", []);\n\t\tconst handler = BX.delegate(this.onMenuItemClick, this);\n\t\tthis._menuItems = [];\n\n\t\tif(phones.length === 0)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tlet i = 0;\n\t\tconst l = phones.length;\n\t\tfor(; i < l; i++)\n\t\t{\n\t\t\tconst value = BX.prop.getString(phones[i], \"VALUE\");\n\t\t\tconst formattedValue = BX.prop.getString(phones[i], \"VALUE_FORMATTED\");\n\t\t\tconst complexName = BX.prop.getString(phones[i], \"COMPLEX_NAME\");\n\t\t\tconst itemText = (complexName ? complexName + ': ' : '') + (formattedValue ? formattedValue : value);\n\n\t\t\tif(value !== \"\")\n\t\t\t{\n\t\t\t\tthis._menuItems.push({ id: value, text:  itemText, onclick: handler});\n\t\t\t}\n\t\t}\n\t}\n\n\tonMenuItemClick(e, item)\n\t{\n\t\tthis.closeMenu();\n\t\tthis.addCall(item.id);\n\t}\n\n\tonMenuShow()\n\t{\n\t\tthis._isMenuShown = true;\n\t}\n\n\tonMenuClose()\n\t{\n\t\tthis._isMenuShown = false;\n\t\tthis._menu.popupWindow.destroy();\n\t}\n\n\tonMenuDestroy()\n\t{\n\t\tthis._menu = null;\n\t}\n\n\taddCall(phone)\n\t{\n\t\tconst communication = BX.prop.getObject(this._entityData, \"COMMUNICATION\", null);\n\t\tlet entityTypeId = parseInt(BX.prop.getString(communication, \"ENTITY_TYPE_ID\", \"0\"));\n\t\tif(isNaN(entityTypeId))\n\t\t{\n\t\t\tentityTypeId = 0;\n\t\t}\n\n\t\tlet entityId = parseInt(BX.prop.getString(communication, \"ENTITY_ID\", \"0\"));\n\t\tif(isNaN(entityId))\n\t\t{\n\t\t\tentityId = 0;\n\t\t}\n\n\t\tlet ownerTypeId = 0;\n\t\tlet ownerId = 0;\n\n\t\tconst ownerInfo = BX.prop.getObject(this._settings, \"ownerInfo\");\n\t\tif(ownerInfo)\n\t\t{\n\t\t\townerTypeId = BX.prop.getInteger(ownerInfo, \"ENTITY_TYPE_ID\", 0);\n\t\t\townerId = BX.prop.getInteger(ownerInfo, \"ENTITY_ID\", 0);\n\t\t}\n\n\t\tif(ownerTypeId <= 0 || ownerId <= 0)\n\t\t{\n\t\t\townerTypeId = BX.prop.getInteger(this._entityData, \"OWNER_TYPE_ID\", 0);\n\t\t\townerId = BX.prop.getInteger(this._entityData, \"OWNER_ID\", \"0\");\n\t\t}\n\n\t\tif(ownerTypeId <= 0 || ownerId <= 0)\n\t\t{\n\t\t\townerTypeId = entityTypeId;\n\t\t\townerId = entityId;\n\t\t}\n\n\t\tlet activityId = parseInt(BX.prop.getString(this._entityData, \"ID\", \"0\"));\n\t\tif(isNaN(activityId))\n\t\t{\n\t\t\tactivityId = 0;\n\t\t}\n\n\t\tconst params =\n\t\t\t{\n\t\t\t\t\"ENTITY_TYPE_NAME\": BX.CrmEntityType.resolveName(entityTypeId),\n\t\t\t\t\"ENTITY_ID\": entityId,\n\t\t\t\t\"AUTO_FOLD\": true\n\t\t\t};\n\t\tif(ownerTypeId !== entityTypeId || ownerId !== entityId)\n\t\t{\n\t\t\tparams[\"BINDINGS\"] = [ { \"OWNER_TYPE_NAME\": BX.CrmEntityType.resolveName(ownerTypeId), \"OWNER_ID\": ownerId } ];\n\t\t}\n\n\t\tif(activityId > 0)\n\t\t{\n\t\t\tparams[\"SRC_ACTIVITY_ID\"] = activityId;\n\t\t}\n\n\t\twindow.top['BXIM'].phoneTo(phone, params);\n\n\t}\n\n\tgetMessage(name)\n\t{\n\t\tconst m = Call.messages;\n\t\treturn m.hasOwnProperty(name) ? m[name] : name;\n\t}\n\n\tstatic messages = {};\n}\n\n/** @memberof BX.Crm.Timeline.Actions */\nexport class HistoryCall extends Call\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis._button = null;\n\t}\n\n\tgetButton()\n\t{\n\t\treturn this._button;\n\t}\n\n\tdoLayout()\n\t{\n\t\tthis._button = BX.create(\"A\",\n\t\t\t{\n\t\t\t\tattrs: { className: \"crm-entity-stream-content-action-reply-btn\" },\n\t\t\t\tevents: { \"click\": this._clickHandler }\n\t\t\t}\n\t\t);\n\t\tthis._container.appendChild(this._button);\n\t}\n\n\tstatic create(id, settings)\n\t{\n\t\tconst self = new HistoryCall();\n\t\tself.initialize(id, settings);\n\t\treturn self;\n\t}\n}\n\nexport class ScheduleCall extends Call\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\t}\n\n\tdoLayout()\n\t{\n\t\tthis._container.appendChild(\n\t\t\tBX.create(\"DIV\",\n\t\t\t\t{\n\t\t\t\t\tattrs: { className: \"crm-entity-stream-content-action-reply-btn\" },\n\t\t\t\t\tevents: { \"click\": this._clickHandler }\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\t}\n\n\tstatic create(id, settings)\n\t{\n\t\tconst self = new ScheduleCall();\n\t\tself.initialize(id, settings);\n\t\treturn self;\n\t}\n}\n","import {HistoryCall} from \"../actions/call\";\nimport HistoryActivity from \"./history-activity\";\n\n/** @memberof BX.Crm.Timeline.Items */\nexport default class Call extends HistoryActivity\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis._playerDummyClickHandler = BX.delegate(this.onPlayerDummyClick, this);\n\t\tthis._playerWrapper = null;\n\t\tthis._transcriptWrapper = null;\n\t\tthis._mediaFileInfo = null;\n\t}\n\n\tgetTypeDescription()\n\t{\n\t\tconst entityData = this.getAssociatedEntityData();\n\t\tconst callInfo = BX.prop.getObject(entityData, \"CALL_INFO\", null);\n\t\tconst callTypeText = callInfo !== null ? BX.prop.getString(callInfo, \"CALL_TYPE_TEXT\", \"\") : \"\";\n\t\tif(callTypeText !== \"\")\n\t\t{\n\t\t\treturn callTypeText;\n\t\t}\n\n\t\tconst direction = BX.prop.getInteger(entityData, \"DIRECTION\", 0);\n\t\treturn this.getMessage(direction === BX.CrmActivityDirection.incoming ? \"incomingCall\" : \"outgoingCall\");\n\t}\n\n\tprepareHeaderLayout()\n\t{\n\t\tconst header = BX.create(\"DIV\", {attrs: {className: \"crm-entity-stream-content-header\"}});\n\t\theader.appendChild(this.prepareTitleLayout());\n\n\t\t//Position is important\n\t\tconst entityData = this.getAssociatedEntityData();\n\t\tconst callInfo = BX.prop.getObject(entityData, \"CALL_INFO\", null);\n\t\tconst hasCallInfo = callInfo !== null;\n\t\tconst isSuccessfull = hasCallInfo ? BX.prop.getBoolean(callInfo, \"SUCCESSFUL\", false) : false;\n\t\tconst statusText = hasCallInfo ? BX.prop.getString(callInfo, \"STATUS_TEXT\", \"\") : \"\";\n\n\t\tif(hasCallInfo && statusText.length)\n\t\t{\n\t\t\theader.appendChild(\n\t\t\t\tBX.create(\"DIV\",\n\t\t\t\t\t{\n\t\t\t\t\t\tattrs:\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tclassName: isSuccessfull\n\t\t\t\t\t\t\t\t\t? \"crm-entity-stream-content-event-successful\"\n\t\t\t\t\t\t\t\t\t: \"crm-entity-stream-content-event-missing\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\ttext: statusText\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\n\t\theader.appendChild(\n\t\t\tBX.create(\"SPAN\",\n\t\t\t\t{\n\t\t\t\t\tattrs: { className: \"crm-entity-stream-content-event-time\" },\n\t\t\t\t\ttext: this.formatTime(this.getCreatedTime())\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\n\t\treturn header;\n\t}\n\n\tprepareContent()\n\t{\n\t\tconst entityData = this.getAssociatedEntityData();\n\n\t\tlet description = BX.prop.getString(entityData, \"DESCRIPTION_RAW\", \"\");\n\t\tif(description !== \"\")\n\t\t{\n\t\t\t//trim leading spaces\n\t\t\tdescription = description.replace(/^\\s+/,'');\n\t\t}\n\n\t\tconst communication = BX.prop.getObject(entityData, \"COMMUNICATION\", {});\n\t\tconst communicationTitle = BX.prop.getString(communication, \"TITLE\", \"\");\n\t\tconst communicationShowUrl = BX.prop.getString(communication, \"SHOW_URL\", \"\");\n\t\tconst communicationValue = BX.prop.getString(communication, \"VALUE\", \"\");\n\t\tconst communicationValueFormatted = BX.prop.getString(communication, \"FORMATTED_VALUE\", communicationValue);\n\n\t\tconst callInfo = BX.prop.getObject(entityData, \"CALL_INFO\", null);\n\t\tconst hasCallInfo = callInfo !== null;\n\t\tconst durationText = hasCallInfo ? BX.prop.getString(callInfo, \"DURATION_TEXT\", \"\") : \"\";\n\t\tconst hasTranscript = hasCallInfo ? BX.prop.getBoolean(callInfo, \"HAS_TRANSCRIPT\", \"\") : \"\";\n\t\tconst isTranscriptPending = hasCallInfo ? BX.prop.getBoolean(callInfo, \"TRANSCRIPT_PENDING\", \"\") : \"\";\n\t\tconst callId = hasCallInfo ? BX.prop.getString(callInfo, \"CALL_ID\", \"\") : \"\";\n\t\tconst callComment = hasCallInfo ? BX.prop.getString(callInfo, \"COMMENT\", \"\") : \"\";\n\n\t\tconst outerWrapper = BX.create(\"DIV\", {attrs: {className: \"crm-entity-stream-section crm-entity-stream-section-history crm-entity-stream-section-call\"}});\n\t\touterWrapper.appendChild(\n\t\t\tBX.create(\"DIV\",\n\t\t\t\t{\n\t\t\t\t\tattrs: { className: \"crm-entity-stream-section-icon crm-entity-stream-section-icon-call\" }\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\n\t\tif (this.isFixed())\n\t\t\tBX.addClass(outerWrapper, 'crm-entity-stream-section-top-fixed');\n\n\t\tconst wrapper = BX.create(\"DIV\", {attrs: {className: \"crm-entity-stream-content-event\"}});\n\t\touterWrapper.appendChild(\n\t\t\tBX.create(\"DIV\",\n\t\t\t\t{\n\t\t\t\t\tattrs: { className: \"crm-entity-stream-section-content\" },\n\t\t\t\t\tchildren: [ wrapper ]\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\n\t\t//Header\n\t\tconst header = this.prepareHeaderLayout();\n\t\twrapper.appendChild(header);\n\n\t\t//region Context Menu\n\t\tif(this.isContextMenuEnabled())\n\t\t{\n\t\t\twrapper.appendChild(this.prepareContextMenuButton());\n\t\t}\n\t\t//endregion\n\n\t\t//Details\n\t\tconst detailWrapper = BX.create(\"DIV\",\n\t\t\t{\n\t\t\t\tattrs: {className: \"crm-entity-stream-content-detail\"}\n\t\t\t}\n\t\t);\n\t\twrapper.appendChild(detailWrapper);\n\n\t\tdetailWrapper.appendChild(\n\t\t\tBX.create(\"DIV\",\n\t\t\t\t{\n\t\t\t\t\tattrs: { className: \"crm-entity-stream-content-detail-title\" },\n\t\t\t\t\tchildren:\n\t\t\t\t\t\t[\n\t\t\t\t\t\t\tBX.create(\"A\",\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tattrs: { href: \"#\" },\n\t\t\t\t\t\t\t\t\tevents: { \"click\": this._headerClickHandler },\n\t\t\t\t\t\t\t\t\ttext: this.getTitle()\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\n\t\t//Content\n\t\tdetailWrapper.appendChild(\n\t\t\tBX.create(\"DIV\",\n\t\t\t\t{\n\t\t\t\t\tattrs: { className: \"crm-entity-stream-content-detail-description\" },\n\t\t\t\t\tchildren: this.prepareMultilineCutOffElements(description, 128, this._headerClickHandler)\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\n\t\tif(hasCallInfo)\n\t\t{\n\t\t\tconst callInfoWrapper = BX.create(\"DIV\",\n\t\t\t\t{\n\t\t\t\t\tattrs: {className: \"crm-entity-stream-content-detail-call crm-entity-stream-content-detail-call-inline\"}\n\t\t\t\t}\n\t\t\t);\n\t\t\tdetailWrapper.appendChild(callInfoWrapper);\n\n\t\t\tthis._mediaFileInfo = BX.prop.getObject(entityData, \"MEDIA_FILE_INFO\", null);\n\t\t\tif(this._mediaFileInfo !== null)\n\t\t\t{\n\t\t\t\tthis._playerWrapper = this._history.getManager().renderAudioDummy(durationText, this._playerDummyClickHandler);\n\t\t\t\tcallInfoWrapper.appendChild(\n\t\t\t\t\tthis._playerWrapper\n\t\t\t\t);\n\t\t\t\tcallInfoWrapper.appendChild(this._history.getManager().getAudioPlaybackRateSelector().render());\n\t\t\t}\n\n\t\t\tif(hasTranscript)\n\t\t\t{\n\t\t\t\tthis._transcriptWrapper = BX.create(\"DIV\",\n\t\t\t\t\t{\n\t\t\t\t\t\tattrs: { className: \"crm-audio-transcript-wrap-container\"},\n\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\tclick: function(e)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif(BX.Voximplant && BX.Voximplant.Transcript)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tBX.Voximplant.Transcript.create({\n\t\t\t\t\t\t\t\t\t\tcallId: callId\n\t\t\t\t\t\t\t\t\t}).show();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tchildren: [\n\t\t\t\t\t\t\tBX.create(\"DIV\", { attrs: { className: \"crm-audio-transcript-icon\"}\t}),\n\t\t\t\t\t\t\tBX.create(\"DIV\", { attrs: { className: \"crm-audio-transcript-conversation\"}, text: BX.message(\"CRM_TIMELINE_CALL_TRANSCRIPT\") } )\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t\tcallInfoWrapper.appendChild(this._transcriptWrapper);\n\t\t\t}\n\t\t\telse if(isTranscriptPending)\n\t\t\t{\n\t\t\t\tthis._transcriptWrapper = BX.create(\"DIV\",\n\t\t\t\t\t{\n\t\t\t\t\t\tattrs: { className: \"crm-audio-transcript-wrap-container-pending\"},\n\t\t\t\t\t\tchildren: [\n\t\t\t\t\t\t\tBX.create(\"DIV\", { attrs: { className: \"crm-audio-transcript-icon-pending\"}, html: '<svg class=\"crm-transcript-loader-circular\" viewBox=\"25 25 50 50\"><circle class=\"crm-transcript-loader-path\" cx=\"50\" cy=\"50\" r=\"20\" fill=\"none\" stroke-miterlimit=\"10\"></circle></svg>'}),\n\t\t\t\t\t\t\tBX.create(\"DIV\", { attrs: { className: \"crm-audio-transcript-conversation\"}, text: BX.message(\"CRM_TIMELINE_CALL_TRANSCRIPT_PENDING\") } )\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t\tcallInfoWrapper.appendChild(this._transcriptWrapper);\n\t\t\t}\n\n\t\t\tif(callComment)\n\t\t\t{\n\t\t\t\tdetailWrapper.appendChild(BX.create(\"DIV\",\n\t\t\t\t\t{\n\t\t\t\t\t\tattrs: { className: \"crm-entity-stream-content-detail-description\"},\n\t\t\t\t\t\ttext: callComment\n\t\t\t\t\t}\n\t\t\t\t));\n\t\t\t}\n\t\t}\n\t\tconst communicationWrapper = BX.create(\"DIV\",\n\t\t\t{\n\t\t\t\tattrs: {className: \"crm-entity-stream-content-detail-contact-info\"}\n\t\t\t}\n\t\t);\n\t\tdetailWrapper.appendChild(communicationWrapper);\n\n\t\t//Communications\n\t\tif(communicationTitle !== \"\")\n\t\t{\n\t\t\tif(communicationShowUrl !== \"\")\n\t\t\t{\n\t\t\t\tcommunicationWrapper.appendChild(\n\t\t\t\t\tBX.create(\"A\",\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tattrs: { href: communicationShowUrl },\n\t\t\t\t\t\t\ttext: communicationTitle\n\t\t\t\t\t\t}\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tcommunicationWrapper.appendChild(BX.create(\"SPAN\", { text: communicationTitle }));\n\t\t\t}\n\t\t}\n\n\t\tif(communicationValueFormatted !== \"\")\n\t\t{\n\t\t\tif(communicationTitle !== \"\")\n\t\t\t{\n\t\t\t\tcommunicationWrapper.appendChild(BX.create(\"SPAN\", { text: \" \" }));\n\t\t\t}\n\t\t\tcommunicationWrapper.appendChild(\n\t\t\t\tBX.create(\n\t\t\t\t\t\"SPAN\",\n\t\t\t\t\t{\n\t\t\t\t\t\tattrs: { className: \"crm-entity-stream-content-detail-email-address\" },\n\t\t\t\t\t\ttext: communicationValueFormatted\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\n\t\t//region Author\n\t\tconst authorNode = this.prepareAuthorLayout();\n\t\tif(authorNode)\n\t\t{\n\t\t\twrapper.appendChild(authorNode);\n\t\t}\n\t\t//endregion\n\n\t\t//region  Actions\n\t\tthis._actionContainer = BX.create(\"SPAN\", { attrs: { className: \"crm-entity-stream-content-detail-action\" } });\n\t\twrapper.appendChild(this._actionContainer);\n\t\t//endregion\n\n\t\tif (!this.isReadOnly())\n\t\t\twrapper.appendChild(this.prepareFixedSwitcherLayout());\n\n\t\treturn outerWrapper;\n\t}\n\n\tprepareActions()\n\t{\n\t\tif(this.isReadOnly())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis._actions.push(\n\t\t\tHistoryCall.create(\n\t\t\t\t\"call\",\n\t\t\t\t{\n\t\t\t\t\titem: this,\n\t\t\t\t\tcontainer: this._actionContainer,\n\t\t\t\t\tentityData: this.getAssociatedEntityData(),\n\t\t\t\t\tactivityEditor: this._activityEditor,\n\t\t\t\t\townerInfo: this._history.getOwnerInfo()\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\t}\n\n\tgetRemoveMessage()\n\t{\n\t\tconst entityData = this.getAssociatedEntityData();\n\t\tconst direction = BX.prop.getInteger(entityData, \"DIRECTION\", 0);\n\t\tconst messageName = (direction === BX.CrmActivityDirection.incoming) ? 'incomingCallRemove' : 'outgoingCallRemove';\n\t\tconst title = BX.util.htmlspecialchars(this.getTitle());\n\t\treturn this.getMessage(messageName).replace(\"#TITLE#\", title);\n\t}\n\n\tonPlayerDummyClick(e)\n\t{\n\t\tconst stubNode = this._playerWrapper.querySelector(\".crm-audio-cap-wrap\");\n\t\tif(stubNode)\n\t\t{\n\t\t\tBX.addClass(stubNode, \"crm-audio-cap-wrap-loader\");\n\t\t}\n\n\t\tthis._history.getManager().getAudioPlaybackRateSelector().addPlayer(this._history.getManager().loadMediaPlayer(\n\t\t\t\"history_\" + this.getId(),\n\t\t\tthis._mediaFileInfo[\"URL\"],\n\t\t\tthis._mediaFileInfo[\"TYPE\"],\n\t\t\tthis._playerWrapper,\n\t\t\tthis._mediaFileInfo[\"DURATION\"],\n\t\t\t{\n\t\t\t\tplaybackRate: this._history.getManager().getAudioPlaybackRateSelector().getRate()\n\t\t\t}\n\t\t));\n\t}\n\n\tstatic create(id, settings)\n\t{\n\t\tconst self = new Call();\n\t\tself.initialize(id, settings);\n\t\treturn self;\n\t}\n}\n","import HistoryActivity from \"./history-activity\";\n\n/** @memberof BX.Crm.Timeline.Items */\nexport default class Meeting extends HistoryActivity\n{\n\tconstructor()\n\t{\n\t\tsuper()\n\t}\n\n\tprepareHeaderLayout()\n\t{\n\t\tconst header = BX.create(\"DIV\", {attrs: {className: \"crm-entity-stream-content-header\"}});\n\t\theader.appendChild(this.prepareTitleLayout());\n\n\t\tconst markNode = this.prepareMarkLayout();\n\t\tif(markNode)\n\t\t{\n\t\t\theader.appendChild(markNode);\n\t\t}\n\n\t\theader.appendChild(this.prepareTimeLayout());\n\n\t\treturn header;\n\t}\n\n\tprepareContent()\n\t{\n\t\tconst entityData = this.getAssociatedEntityData();\n\n\t\tlet description = BX.prop.getString(entityData, \"DESCRIPTION_RAW\", \"\");\n\t\tif(description !== \"\")\n\t\t{\n\t\t\t//trim leading spaces\n\t\t\tdescription = description.replace(/^\\s+/,'');\n\t\t}\n\n\t\tconst communication = BX.prop.getObject(entityData, \"COMMUNICATION\", {});\n\t\tconst communicationTitle = BX.prop.getString(communication, \"TITLE\", \"\");\n\t\tconst communicationShowUrl = BX.prop.getString(communication, \"SHOW_URL\", \"\");\n\t\tconst communicationValue = BX.prop.getString(communication, \"VALUE\", \"\");\n\n\t\tconst wrapper = BX.create(\"DIV\", {attrs: {className: \"crm-entity-stream-section crm-entity-stream-section-history crm-entity-stream-section-meeting\"}});\n\n\t\twrapper.appendChild(\n\t\t\tBX.create(\"DIV\", { attrs: { className: \"crm-entity-stream-section-icon crm-entity-stream-section-icon-meeting\" } })\n\t\t);\n\n\t\tif(this.isContextMenuEnabled())\n\t\t{\n\t\t\twrapper.appendChild(this.prepareContextMenuButton());\n\t\t}\n\n\t\tif (this.isFixed())\n\t\t\tBX.addClass(wrapper, 'crm-entity-stream-section-top-fixed');\n\n\t\tconst contentWrapper = BX.create(\"DIV\", {attrs: {className: \"crm-entity-stream-content-event\"}});\n\t\twrapper.appendChild(\n\t\t\tBX.create(\"DIV\",\n\t\t\t\t{\n\t\t\t\t\tattrs: { className: \"crm-entity-stream-section-content\" },\n\t\t\t\t\tchildren: [contentWrapper]\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\n\t\tconst header = this.prepareHeaderLayout();\n\t\tcontentWrapper.appendChild(header);\n\n\t\tconst detailWrapper = BX.create(\"DIV\", {attrs: {className: \"crm-entity-stream-content-detail\"}});\n\t\tcontentWrapper.appendChild(detailWrapper);\n\n\t\tdetailWrapper.appendChild(\n\t\t\tBX.create(\"DIV\",\n\t\t\t\t{\n\t\t\t\t\tattrs: { className: \"crm-entity-stream-content-detail-title\" },\n\t\t\t\t\tchildren:\n\t\t\t\t\t\t[\n\t\t\t\t\t\t\tBX.create(\"A\",\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tattrs: { href: \"#\" },\n\t\t\t\t\t\t\t\t\tevents: { \"click\": this._headerClickHandler },\n\t\t\t\t\t\t\t\t\ttext: this.getTitle()\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\n\t\t//Content\n\t\tdetailWrapper.appendChild(\n\t\t\tBX.create(\"DIV\",\n\t\t\t\t{\n\t\t\t\t\tattrs: { className: \"crm-entity-stream-content-detail-description\" },\n\t\t\t\t\tchildren: this.prepareCutOffElements(description, 128, this._headerClickHandler)\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\n\t\tconst communicationWrapper = BX.create(\"DIV\", {attrs: {className: \"crm-entity-stream-content-detail-contact-info\"}});\n\t\tdetailWrapper.appendChild(communicationWrapper);\n\n\t\tif(communicationTitle !== '')\n\t\t{\n\t\t\tcommunicationWrapper.appendChild(\n\t\t\t\tBX.create(\"SPAN\",\n\t\t\t\t\t{ text: this.getMessage(\"reciprocal\") + \": \" }\n\t\t\t\t)\n\t\t\t);\n\n\t\t\tif(communicationShowUrl !== '')\n\t\t\t{\n\t\t\t\tcommunicationWrapper.appendChild(BX.create(\"A\", { attrs: { href: communicationShowUrl }, text: communicationTitle }));\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tcommunicationWrapper.appendChild(BX.create(\"SPAN\", { text: communicationTitle }));\n\t\t\t}\n\t\t}\n\n\t\tcommunicationWrapper.appendChild(BX.create(\"SPAN\", { text: \" \" + communicationValue }));\n\n\t\t//region Author\n\t\tconst authorNode = this.prepareAuthorLayout();\n\t\tif(authorNode)\n\t\t{\n\t\t\tcontentWrapper.appendChild(authorNode);\n\t\t}\n\t\t//endregion\n\n\t\t//region  Actions\n\t\tthis._actionContainer = BX.create(\"SPAN\", { attrs: { className: \"crm-entity-stream-content-detail-action\" } });\n\t\tcontentWrapper.appendChild(this._actionContainer);\n\t\t//endregion\n\n\t\tif (!this.isReadOnly())\n\t\t\tcontentWrapper.appendChild(this.prepareFixedSwitcherLayout());\n\n\t\treturn wrapper;\n\t}\n\n\tgetRemoveMessage()\n\t{\n\t\tconst title = BX.util.htmlspecialchars(this.getTitle());\n\t\treturn this.getMessage('meetingRemove').replace(\"#TITLE#\", title);\n\t}\n\n\tprepareActions()\n\t{\n\t}\n\n\tshowActions(show)\n\t{\n\t\tif(this._actionContainer)\n\t\t{\n\t\t\tthis._actionContainer.style.display = show ? \"\" : \"none\";\n\t\t}\n\t}\n\n\tstatic create(id, settings)\n\t{\n\t\tconst self = new Meeting();\n\t\tself.initialize(id, settings);\n\t\treturn self;\n\t}\n}\n","import HistoryActivity from \"./history-activity\";\n\n/** @memberof BX.Crm.Timeline.Items */\nexport default class Task extends HistoryActivity\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\t}\n\n\tprepareHeaderLayout()\n\t{\n\t\tconst header = BX.create(\"DIV\", {attrs: {className: \"crm-entity-stream-content-header\"}});\n\t\theader.appendChild(this.prepareTitleLayout());\n\n\t\tconst markNode = this.prepareMarkLayout();\n\t\tif(markNode)\n\t\t{\n\t\t\theader.appendChild(markNode);\n\t\t}\n\n\t\theader.appendChild(this.prepareTimeLayout());\n\n\t\treturn header;\n\t}\n\n\tprepareContent()\n\t{\n\t\tconst entityData = this.getAssociatedEntityData();\n\n\t\tlet description = BX.prop.getString(entityData, \"DESCRIPTION_RAW\", \"\");\n\t\tif(description !== \"\")\n\t\t{\n\t\t\t//trim leading spaces\n\t\t\tdescription = description.replace(/^\\s+/,'');\n\t\t}\n\n\t\tconst communication = BX.prop.getObject(entityData, \"COMMUNICATION\", {});\n\t\tconst communicationTitle = BX.prop.getString(communication, \"TITLE\", \"\");\n\t\tconst communicationShowUrl = BX.prop.getString(communication, \"SHOW_URL\", \"\");\n\n\t\tconst wrapper = BX.create(\"DIV\", {attrs: {className: \"crm-entity-stream-section crm-entity-stream-section-history crm-entity-stream-section-task\"}});\n\n\t\twrapper.appendChild(\n\t\t\tBX.create(\"DIV\", { attrs: { className: \"crm-entity-stream-section-icon crm-entity-stream-section-icon-task\" } })\n\t\t);\n\n\t\tif(this.isContextMenuEnabled())\n\t\t{\n\t\t\twrapper.appendChild(this.prepareContextMenuButton());\n\t\t}\n\n\t\tif (this.isFixed())\n\t\t\tBX.addClass(wrapper, 'crm-entity-stream-section-top-fixed');\n\n\t\tconst contentWrapper = BX.create(\"DIV\", {attrs: {className: \"crm-entity-stream-content-event\"}});\n\t\twrapper.appendChild(\n\t\t\tBX.create(\"DIV\",\n\t\t\t\t{\n\t\t\t\t\tattrs: { className: \"crm-entity-stream-section-content\" },\n\t\t\t\t\tchildren: [contentWrapper]\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\n\t\tconst header = this.prepareHeaderLayout();\n\t\tcontentWrapper.appendChild(header);\n\n\t\tconst detailWrapper = BX.create(\"DIV\", {attrs: {className: \"crm-entity-stream-content-detail\"}});\n\t\tcontentWrapper.appendChild(detailWrapper);\n\n\t\tdetailWrapper.appendChild(\n\t\t\tBX.create(\"DIV\",\n\t\t\t\t{\n\t\t\t\t\tattrs: { className: \"crm-entity-stream-content-detail-title\" },\n\t\t\t\t\tchildren:\n\t\t\t\t\t\t[\n\t\t\t\t\t\t\tBX.create(\"A\",\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tattrs: { href: \"#\" },\n\t\t\t\t\t\t\t\t\tevents: { \"click\": this._headerClickHandler },\n\t\t\t\t\t\t\t\t\ttext: this.getTitle()\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\n\t\t//Content\n\t\tdetailWrapper.appendChild(\n\t\t\tBX.create(\"DIV\",\n\t\t\t\t{\n\t\t\t\t\tattrs: { className: \"crm-entity-stream-content-detail-description\" },\n\t\t\t\t\tchildren: this.prepareCutOffElements(description, 128, this._headerClickHandler)\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\n\t\tconst communicationWrapper = BX.create(\"DIV\", {attrs: {className: \"crm-entity-stream-content-detail-contact-info\"}});\n\t\tdetailWrapper.appendChild(communicationWrapper);\n\n\t\tif(communicationTitle !== '')\n\t\t{\n\t\t\tcommunicationWrapper.appendChild(\n\t\t\t\tBX.create(\"SPAN\",\n\t\t\t\t\t{ text: this.getMessage(\"reciprocal\") + \": \" }\n\t\t\t\t)\n\t\t\t);\n\n\t\t\tif(communicationShowUrl !== '')\n\t\t\t{\n\t\t\t\tcommunicationWrapper.appendChild(BX.create(\"A\", { attrs: { href: communicationShowUrl }, text: communicationTitle }));\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tcommunicationWrapper.appendChild(BX.create(\"SPAN\", { text: communicationTitle }));\n\t\t\t}\n\t\t}\n\n\t\t//region Author\n\t\tconst authorNode = this.prepareAuthorLayout();\n\t\tif(authorNode)\n\t\t{\n\t\t\tcontentWrapper.appendChild(authorNode);\n\t\t}\n\t\t//endregion\n\n\t\t//region  Actions\n\t\tthis._actionContainer = BX.create(\"SPAN\", { attrs: { className: \"crm-entity-stream-content-detail-action\" } });\n\t\tcontentWrapper.appendChild(this._actionContainer);\n\t\t//endregion\n\n\t\tif (!this.isReadOnly())\n\t\t\tcontentWrapper.appendChild(this.prepareFixedSwitcherLayout());\n\n\t\treturn wrapper;\n\t}\n\n\tprepareActions()\n\t{\n\t}\n\n\tgetRemoveMessage()\n\t{\n\t\tconst title = BX.util.htmlspecialchars(this.getTitle());\n\t\treturn this.getMessage('taskRemove').replace(\"#TITLE#\", title);\n\t}\n\n\tshowActions(show)\n\t{\n\t\tif(this._actionContainer)\n\t\t{\n\t\t\tthis._actionContainer.style.display = show ? \"\" : \"none\";\n\t\t}\n\t}\n\n\tstatic create(id, settings)\n\t{\n\t\tconst self = new Task();\n\t\tself.initialize(id, settings);\n\t\treturn self;\n\t}\n}\n","import HistoryActivity from \"./history-activity\";\n\n/** @memberof BX.Crm.Timeline.Items */\nexport default class WebForm extends HistoryActivity\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\t}\n\n\tprepareHeaderLayout()\n\t{\n\t\tconst header = BX.create(\"DIV\", {attrs: {className: \"crm-entity-stream-content-header\"}});\n\t\theader.appendChild(this.prepareTitleLayout());\n\t\theader.appendChild(this.prepareTimeLayout());\n\n\t\treturn header;\n\t}\n\n\tprepareContent()\n\t{\n\t\tconst wrapper = BX.create(\"DIV\", {attrs: {className: \"crm-entity-stream-section crm-entity-stream-section-history crm-entity-stream-section-crmForm\"}});\n\n\t\twrapper.appendChild(\n\t\t\tBX.create(\"DIV\", { attrs: { className: \"crm-entity-stream-section-icon crm-entity-stream-section-icon-crmForm\" } })\n\t\t);\n\n\t\tconst contentWrapper = BX.create(\"DIV\", {attrs: {className: \"crm-entity-stream-content-event\"}});\n\t\twrapper.appendChild(\n\t\t\tBX.create(\"DIV\",\n\t\t\t\t{\n\t\t\t\t\tattrs: { className: \"crm-entity-stream-section-content\" },\n\t\t\t\t\tchildren: [contentWrapper]\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\n\t\tif (this.isFixed())\n\t\t\tBX.addClass(wrapper, 'crm-entity-stream-section-top-fixed');\n\n\t\tconst header = this.prepareHeaderLayout();\n\t\tcontentWrapper.appendChild(header);\n\n\t\tconst detailWrapper = BX.create(\"DIV\", {attrs: {className: \"crm-entity-stream-content-detail\"}});\n\t\tcontentWrapper.appendChild(detailWrapper);\n\n\t\tdetailWrapper.appendChild(\n\t\t\tBX.create(\"DIV\",\n\t\t\t\t{\n\t\t\t\t\tattrs: { className: \"crm-entity-stream-content-detail-title\" },\n\t\t\t\t\tchildren:\n\t\t\t\t\t\t[\n\t\t\t\t\t\t\tBX.create(\"A\",\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tattrs: { href: \"#\" },\n\t\t\t\t\t\t\t\t\tevents: { \"click\": this._headerClickHandler },\n\t\t\t\t\t\t\t\t\ttext: this.getTitle()\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\n\t\t//region Author\n\t\tconst authorNode = this.prepareAuthorLayout();\n\t\tif(authorNode)\n\t\t{\n\t\t\tcontentWrapper.appendChild(authorNode);\n\t\t}\n\t\t//endregion\n\n\t\t//region  Actions\n\t\tthis._actionContainer = BX.create(\"SPAN\", { attrs: { className: \"crm-entity-stream-content-detail-action\" } });\n\t\tcontentWrapper.appendChild(this._actionContainer);\n\t\t//endregion\n\n\t\tif (!this.isReadOnly())\n\t\t\tcontentWrapper.appendChild(this.prepareFixedSwitcherLayout());\n\n\t\treturn wrapper;\n\t}\n\n\tprepareActions()\n\t{\n\t}\n\n\tshowActions(show)\n\t{\n\t\tif(this._actionContainer)\n\t\t{\n\t\t\tthis._actionContainer.style.display = show ? \"\" : \"none\";\n\t\t}\n\t}\n\n\tstatic create(id, settings)\n\t{\n\t\tconst self = new WebForm();\n\t\tself.initialize(id, settings);\n\t\treturn self;\n\t}\n}\n","import HistoryActivity from \"./history-activity\";\n\n/** @memberof BX.Crm.Timeline.Items */\nexport default class Sms extends HistoryActivity\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\t}\n\n\tprepareHeaderLayout()\n\t{\n\t\tconst header = BX.create(\"DIV\", {attrs: {className: \"crm-entity-stream-content-header\"}});\n\t\theader.appendChild(this.prepareTitleLayout());\n\t\theader.appendChild(this.prepareMessageStatusLayout());\n\t\theader.appendChild(this.prepareTimeLayout());\n\n\t\treturn header;\n\t}\n\n\tprepareMessageStatusLayout()\n\t{\n\t\treturn this._messageStatusNode = BX.create(\"SPAN\");\n\t}\n\n\tprepareContent()\n\t{\n\t\tconst entityData = this.getAssociatedEntityData();\n\n\t\tconst communication = BX.prop.getObject(entityData, \"COMMUNICATION\", {});\n\t\tconst communicationTitle = BX.prop.getString(communication, \"TITLE\", \"\");\n\t\tconst communicationShowUrl = BX.prop.getString(communication, \"SHOW_URL\", \"\");\n\t\tconst communicationValue = BX.prop.getString(communication, \"VALUE\", \"\");\n\t\tconst smsInfo = BX.prop.getObject(entityData, \"SMS_INFO\", {});\n\n\t\tconst wrapperClassName = \"crm-entity-stream-section-sms\";\n\t\tconst wrapper = BX.create(\"DIV\", {attrs: {className: \"crm-entity-stream-section crm-entity-stream-section-history\" + \" \" + wrapperClassName}});\n\n\t\twrapper.appendChild(\n\t\t\tBX.create(\"DIV\", { attrs: { className: \"crm-entity-stream-section-icon crm-entity-stream-section-icon-sms\" } })\n\t\t);\n\n\t\tif (this.isFixed())\n\t\t\tBX.addClass(wrapper, 'crm-entity-stream-section-top-fixed');\n\n\t\tconst contentWrapper = BX.create(\"DIV\", {attrs: {className: \"crm-entity-stream-content-event\"}});\n\t\twrapper.appendChild(\n\t\t\tBX.create(\"DIV\",\n\t\t\t\t{\n\t\t\t\t\tattrs: { className: \"crm-entity-stream-section-content\" },\n\t\t\t\t\tchildren: [contentWrapper]\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\n\t\tconst header = this.prepareHeaderLayout();\n\t\tcontentWrapper.appendChild(header);\n\n\t\tconst detailWrapper = BX.create(\"DIV\", {attrs: {className: \"crm-entity-stream-content-detail\"}});\n\t\tcontentWrapper.appendChild(detailWrapper);\n\n\t\tconst messageWrapper = BX.create(\"DIV\", {attrs: {className: \"crm-entity-stream-content-detail-sms\"}});\n\n\t\tif (smsInfo.senderId)\n\t\t{\n\t\t\tconst senderId = smsInfo.senderId;\n\t\t\tlet senderName = smsInfo.senderShortName;\n\t\t\tif (senderId === 'rest' && smsInfo.fromName)\n\t\t\t{\n\t\t\t\tsenderName = smsInfo.fromName;\n\t\t\t}\n\n\t\t\tconst messageSenderWrapper = BX.create(\"DIV\", {\n\t\t\t\tattrs: {className: \"crm-entity-stream-content-detail-sms-status\"},\n\t\t\t\tchildren: [\n\t\t\t\t\tBX.message('CRM_TIMELINE_SMS_SENDER') + ' ',\n\t\t\t\t\tBX.create('STRONG', {text: senderName})\n\t\t\t\t]\n\t\t\t});\n\t\t\tif (senderId !== 'rest' && smsInfo.fromName)\n\t\t\t{\n\t\t\t\tmessageSenderWrapper.innerHTML += ' '+BX.message('CRM_TIMELINE_SMS_FROM')+' ';\n\t\t\t\tmessageSenderWrapper.appendChild(BX.create('STRONG', {text: smsInfo.fromName}));\n\t\t\t}\n\t\t\tmessageWrapper.appendChild(messageSenderWrapper);\n\t\t}\n\n\t\tif (smsInfo.statusId !== '')\n\t\t{\n\t\t\tthis.setMessageStatus(smsInfo.statusId, smsInfo.errorText);\n\t\t}\n\n\t\tconst bodyText = BX.util.htmlspecialchars(entityData['DESCRIPTION_RAW']).replace(/\\r\\n|\\r|\\n/g, \"<br/>\");\n\t\tconst messageBodyWrapper = BX.create(\"DIV\", {attrs: {className: \"crm-entity-stream-content-detail-sms-fragment\"}});\n\t\tmessageBodyWrapper.appendChild(BX.create('SPAN', {html: bodyText}));\n\n\t\tmessageWrapper.appendChild(messageBodyWrapper);\n\t\tdetailWrapper.appendChild(messageWrapper);\n\n\t\tconst communicationWrapper = BX.create(\"DIV\", {\n\t\t\tattrs: {className: \"crm-entity-stream-content-detail-contact-info\"},\n\t\t\ttext: BX.message('CRM_TIMELINE_SMS_TO') + ' '\n\t\t});\n\t\tdetailWrapper.appendChild(communicationWrapper);\n\n\t\tif(communicationTitle !== '')\n\t\t{\n\t\t\tif(communicationShowUrl !== '')\n\t\t\t{\n\t\t\t\tcommunicationWrapper.appendChild(BX.create(\"A\", { attrs: { href: communicationShowUrl }, text: communicationTitle }));\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tcommunicationWrapper.appendChild(BX.create(\"SPAN\", { text: communicationTitle }));\n\t\t\t}\n\t\t}\n\n\t\tcommunicationWrapper.appendChild(BX.create(\"SPAN\", { text: \" \" + communicationValue }));\n\n\t\t//region Author\n\t\tconst authorNode = this.prepareAuthorLayout();\n\t\tif(authorNode)\n\t\t{\n\t\t\tcontentWrapper.appendChild(authorNode);\n\t\t}\n\t\t//endregion\n\n\t\t//region  Actions\n\t\tthis._actionContainer = BX.create(\"SPAN\", { attrs: { className: \"crm-entity-stream-content-detail-action\" } });\n\t\tcontentWrapper.appendChild(this._actionContainer);\n\t\t//endregion\n\n\t\tif (!this.isReadOnly())\n\t\t\tcontentWrapper.appendChild(this.prepareFixedSwitcherLayout());\n\n\t\treturn wrapper;\n\t}\n\n\tprepareActions()\n\t{\n\t}\n\n\tshowActions(show)\n\t{\n\t\tif(this._actionContainer)\n\t\t{\n\t\t\tthis._actionContainer.style.display = show ? \"\" : \"none\";\n\t\t}\n\t}\n\n\tsetMessageStatus(status, errorText)\n\t{\n\t\tstatus = parseInt(status);\n\t\tif (isNaN(status) || !this._messageStatusNode)\n\t\t\treturn;\n\n\t\tconst statuses = this.getSetting('smsStatusDescriptions', {});\n\t\tif (statuses.hasOwnProperty(status))\n\t\t{\n\t\t\tthis._messageStatusNode.textContent = statuses[status];\n\t\t\tthis.setMessageStatusErrorText(errorText);\n\n\t\t\tconst statusSemantic = this.getMessageStatusSemantic(status);\n\t\t\tthis.setMessageStatusSemantic(statusSemantic);\n\t\t}\n\t}\n\n\tsetMessageStatusSemantic(semantic)\n\t{\n\t\tconst classMap =\n\t\t\t{\n\t\t\t\tprocess: 'crm-entity-stream-content-event-process',\n\t\t\t\tsuccess: 'crm-entity-stream-content-event-successful',\n\t\t\t\tfailure: 'crm-entity-stream-content-event-missing'\n\t\t\t};\n\n\t\tfor (let checkSemantic in classMap)\n\t\t{\n\t\t\tconst fn = (checkSemantic === semantic) ? 'addClass' : 'removeClass';\n\t\t\tBX[fn](this._messageStatusNode, classMap[checkSemantic]);\n\t\t}\n\t}\n\n\tsetMessageStatusErrorText(errorText)\n\t{\n\t\tif (!errorText)\n\t\t{\n\t\t\tthis._messageStatusNode.removeAttribute('title');\n\t\t\tBX.removeClass(this._messageStatusNode,'crm-entity-stream-content-event-error-tip');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis._messageStatusNode.setAttribute('title', errorText);\n\t\t\tBX.addClass(this._messageStatusNode,'crm-entity-stream-content-event-error-tip');\n\t\t}\n\t}\n\n\tgetMessageStatusSemantic(status)\n\t{\n\t\tconst semantics = this.getSetting('smsStatusSemantics', {});\n\t\treturn semantics.hasOwnProperty(status) ? semantics[status] : 'failure';\n\t}\n\n\tsubscribe()\n\t{\n\t\tif (!BX.CrmSmsWatcher)\n\t\t\treturn;\n\n\t\tconst entityData = this.getAssociatedEntityData();\n\t\tconst smsInfo = BX.prop.getObject(entityData, \"SMS_INFO\", {});\n\n\t\tif (smsInfo.id)\n\t\t{\n\t\t\tBX.CrmSmsWatcher.subscribeOnMessageUpdate(\n\t\t\t\tsmsInfo.id,\n\t\t\t\tthis.onMessageUpdate.bind(this)\n\t\t\t);\n\t\t}\n\t}\n\n\tonMessageUpdate(message)\n\t{\n\t\tif (message.STATUS_ID)\n\t\t{\n\t\t\tthis.setMessageStatus(message.STATUS_ID, message.EXEC_ERROR);\n\t\t}\n\t}\n\n\tstatic create(id, settings)\n\t{\n\t\tconst self = new Sms();\n\t\tself.initialize(id, settings);\n\t\tself.subscribe();\n\t\treturn self;\n\t}\n}\n","import HistoryActivity from \"./history-activity\";\n\n/** @memberof BX.Crm.Timeline.Items */\nexport default class Request extends HistoryActivity\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\t}\n\n\tprepareHeaderLayout()\n\t{\n\t\tconst header = BX.create(\"DIV\", {attrs: {className: \"crm-entity-stream-content-header\"}});\n\t\theader.appendChild(this.prepareTitleLayout());\n\t\theader.appendChild(this.prepareTimeLayout());\n\n\t\treturn header;\n\t}\n\n\tprepareContent()\n\t{\n\t\tconst entityData = this.getAssociatedEntityData();\n\n\t\tlet description = BX.prop.getString(entityData, \"DESCRIPTION_RAW\", \"\");\n\t\tif(description !== \"\")\n\t\t{\n\t\t\t//trim leading spaces\n\t\t\tdescription = description.replace(/^\\s+/,'');\n\t\t}\n\n\t\t//var entityData = this.getAssociatedEntityData();\n\t\tconst wrapper = BX.create(\"DIV\", {attrs: {className: \"crm-entity-stream-section crm-entity-stream-section-today crm-entity-stream-section-robot\"}});\n\n\t\twrapper.appendChild(\n\t\t\tBX.create(\"DIV\", { attrs: { className: \"crm-entity-stream-section-icon crm-entity-stream-section-icon-robot\" } })\n\t\t);\n\t\tif(this.isContextMenuEnabled())\n\t\t{\n\t\t\twrapper.appendChild(this.prepareContextMenuButton());\n\t\t}\n\n\t\tif (this.isFixed())\n\t\t\tBX.addClass(wrapper, 'crm-entity-stream-section-top-fixed');\n\n\t\tconst contentWrapper = BX.create(\"DIV\", {attrs: {className: \"crm-entity-stream-content-event\"}});\n\t\twrapper.appendChild(\n\t\t\tBX.create(\"DIV\",\n\t\t\t\t{\n\t\t\t\t\tattrs: { className: \"crm-entity-stream-section-content\" },\n\t\t\t\t\tchildren: [contentWrapper]\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\n\t\tconst header = this.prepareHeaderLayout();\n\t\tcontentWrapper.appendChild(header);\n\n\t\tconst detailWrapper = BX.create(\"DIV\", {attrs: {className: \"crm-entity-stream-content-detail\"}});\n\t\tcontentWrapper.appendChild(detailWrapper);\n\n\t\tdetailWrapper.appendChild(\n\t\t\tBX.create(\"DIV\",\n\t\t\t\t{\n\t\t\t\t\tattrs: { className: \"crm-entity-stream-content-detail-title\" },\n\t\t\t\t\tchildren:\n\t\t\t\t\t\t[\n\t\t\t\t\t\t\tBX.create(\"A\",\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tattrs: { href: \"#\" },\n\t\t\t\t\t\t\t\t\tevents: { \"click\": this._headerClickHandler },\n\t\t\t\t\t\t\t\t\ttext: this.getTitle()\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\n\t\t//Content\n\t\tdetailWrapper.appendChild(\n\t\t\tBX.create(\"DIV\",\n\t\t\t\t{\n\t\t\t\t\tattrs: { className: \"crm-entity-stream-content-detail-description\" },\n\t\t\t\t\tchildren: this.prepareCutOffElements(description, 128, this._headerClickHandler)\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\n\t\t//region Author\n\t\tconst authorNode = this.prepareAuthorLayout();\n\t\tif(authorNode)\n\t\t{\n\t\t\tcontentWrapper.appendChild(authorNode);\n\t\t}\n\t\t//endregion\n\n\t\t//region  Actions\n\t\tthis._actionContainer = BX.create(\"SPAN\", { attrs: { className: \"crm-entity-stream-content-detail-action\" } });\n\t\tcontentWrapper.appendChild(this._actionContainer);\n\t\t//endregion\n\n\t\tif (!this.isReadOnly())\n\t\t\tcontentWrapper.appendChild(this.prepareFixedSwitcherLayout());\n\n\t\treturn wrapper;\n\t}\n\n\tprepareActions()\n\t{\n\t}\n\n\tshowActions(show)\n\t{\n\t\tif(this._actionContainer)\n\t\t{\n\t\t\tthis._actionContainer.style.display = show ? \"\" : \"none\";\n\t\t}\n\t}\n\n\tisEditable()\n\t{\n\t\treturn false;\n\t}\n\n\tstatic create(id, settings)\n\t{\n\t\tconst self = new Request();\n\t\tself.initialize(id, settings);\n\t\treturn self;\n\t}\n}\n","import HistoryActivity from \"./history-activity\";\nimport {OpenLine as OpenLineAction} from \"../actions/openline\";\n\n/** @memberof BX.Crm.Timeline.Items */\nexport default class OpenLine extends HistoryActivity\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\t}\n\n\tprepareHeaderLayout()\n\t{\n\t\tconst header = BX.create(\"DIV\", {attrs: {className: \"crm-entity-stream-content-header\"}});\n\t\theader.appendChild(this.prepareTitleLayout());\n\t\theader.appendChild(this.prepareTimeLayout());\n\n\t\treturn header;\n\t}\n\n\tprepareContent()\n\t{\n\t\tconst entityData = this.getAssociatedEntityData();\n\n\t\tlet description = BX.prop.getString(entityData, \"DESCRIPTION_RAW\", \"\");\n\t\tif(description !== \"\")\n\t\t{\n\t\t\t//trim leading spaces\n\t\t\tdescription = description.replace(/^\\s+/,'');\n\t\t}\n\n\t\tconst communication = BX.prop.getObject(entityData, \"COMMUNICATION\", {});\n\t\tconst communicationTitle = BX.prop.getString(communication, \"TITLE\", \"\");\n\t\tconst communicationShowUrl = BX.prop.getString(communication, \"SHOW_URL\", \"\");\n\n\t\tconst wrapper = BX.create(\"DIV\", {attrs: {className: \"crm-entity-stream-section crm-entity-stream-section-history crm-entity-stream-section-IM\"}});\n\n\t\twrapper.appendChild(\n\t\t\tBX.create(\"DIV\", { attrs: { className: \"crm-entity-stream-section-icon crm-entity-stream-section-icon-IM\" } })\n\t\t);\n\n\t\tif(this.isContextMenuEnabled())\n\t\t{\n\t\t\twrapper.appendChild(this.prepareContextMenuButton());\n\t\t}\n\n\t\tif (this.isFixed())\n\t\t\tBX.addClass(wrapper, 'crm-entity-stream-section-top-fixed');\n\n\t\tconst contentWrapper = BX.create(\"DIV\", {attrs: {className: \"crm-entity-stream-content-event\"}});\n\t\twrapper.appendChild(\n\t\t\tBX.create(\"DIV\",\n\t\t\t\t{\n\t\t\t\t\tattrs: { className: \"crm-entity-stream-section-content\" },\n\t\t\t\t\tchildren: [contentWrapper]\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\n\t\tconst header = this.prepareHeaderLayout();\n\t\tcontentWrapper.appendChild(header);\n\n\t\tconst detailWrapper = BX.create(\"DIV\", {attrs: {className: \"crm-entity-stream-content-detail\"}});\n\t\tcontentWrapper.appendChild(detailWrapper);\n\n\t\tdetailWrapper.appendChild(\n\t\t\tBX.create(\"DIV\",\n\t\t\t\t{\n\t\t\t\t\tattrs: { className: \"crm-entity-stream-content-detail-title\" },\n\t\t\t\t\tchildren:\n\t\t\t\t\t\t[\n\t\t\t\t\t\t\tBX.create(\"A\",\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tattrs: { href: \"#\" },\n\t\t\t\t\t\t\t\t\tevents: { \"click\": this._headerClickHandler },\n\t\t\t\t\t\t\t\t\ttext: this.getTitle()\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\n\t\t//Content\n\t\tconst entityDetailWrapper = BX.create(\"DIV\",\n\t\t\t{attrs: {className: \"crm-entity-stream-content-detail-IM\"}}\n\t\t);\n\t\tdetailWrapper.appendChild(entityDetailWrapper);\n\n\t\tconst messageWrapper = BX.create(\"DIV\",\n\t\t\t{attrs: {className: \"crm-entity-stream-content-detail-IM-messages\"}}\n\t\t);\n\t\tentityDetailWrapper.appendChild(messageWrapper);\n\n\t\tconst openLineData = BX.prop.getObject(this.getAssociatedEntityData(), \"OPENLINE_INFO\", null);\n\t\tif(openLineData)\n\t\t{\n\t\t\tconst messages = BX.prop.getArray(openLineData, \"MESSAGES\", []);\n\t\t\tlet i = 0;\n\t\t\tconst length = messages.length;\n\t\t\tfor(; i < length; i++)\n\t\t\t{\n\t\t\t\tconst message = messages[i];\n\t\t\t\tconst isExternal = BX.prop.getBoolean(message, \"IS_EXTERNAL\", true);\n\n\t\t\t\tmessageWrapper.appendChild(\n\t\t\t\t\tBX.create(\"DIV\",\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tattrs:\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tclassName: isExternal\n\t\t\t\t\t\t\t\t\t\t? \"crm-entity-stream-content-detail-IM-message-incoming\"\n\t\t\t\t\t\t\t\t\t\t: \"crm-entity-stream-content-detail-IM-message-outgoing\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\thtml: BX.prop.getString(message, \"MESSAGE\", \"\")\n\t\t\t\t\t\t}\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\n\t\tconst communicationWrapper = BX.create(\"DIV\", {attrs: {className: \"crm-entity-stream-content-detail-contact-info\"}});\n\t\tdetailWrapper.appendChild(communicationWrapper);\n\n\t\tif(communicationTitle !== '')\n\t\t{\n\t\t\tcommunicationWrapper.appendChild(\n\t\t\t\tBX.create(\"SPAN\",\n\t\t\t\t\t{ text: this.getMessage(\"reciprocal\") + \": \" }\n\t\t\t\t)\n\t\t\t);\n\n\t\t\tif(communicationShowUrl !== '')\n\t\t\t{\n\t\t\t\tcommunicationWrapper.appendChild(BX.create(\"A\", { attrs: { href: communicationShowUrl }, text: communicationTitle }));\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tcommunicationWrapper.appendChild(BX.create(\"SPAN\", { text: communicationTitle }));\n\t\t\t}\n\t\t}\n\n\t\t//region Author\n\t\tconst authorNode = this.prepareAuthorLayout();\n\t\tif(authorNode)\n\t\t{\n\t\t\tcontentWrapper.appendChild(authorNode);\n\t\t}\n\t\t//endregion\n\n\t\t//region  Actions\n\t\tthis._actionContainer = BX.create(\"SPAN\", { attrs: { className: \"crm-entity-stream-content-detail-action\" } });\n\t\tcontentWrapper.appendChild(this._actionContainer);\n\t\t//endregion\n\n\t\tif (!this.isReadOnly())\n\t\t\tcontentWrapper.appendChild(this.prepareFixedSwitcherLayout());\n\n\t\treturn wrapper;\n\t}\n\n\tprepareActions()\n\t{\n\t\tif(this.isReadOnly())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis._actions.push(\n\t\t\tOpenLineAction.create(\n\t\t\t\t\"openline\",\n\t\t\t\t{\n\t\t\t\t\titem: this,\n\t\t\t\t\tcontainer: this._actionContainer,\n\t\t\t\t\tentityData: this.getAssociatedEntityData(),\n\t\t\t\t\tactivityEditor: this._activityEditor,\n\t\t\t\t\townerInfo: this._history.getOwnerInfo()\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\t}\n\n\tview()\n\t{\n\t\tif(typeof(window.top['BXIM']) === 'undefined')\n\t\t{\n\t\t\twindow.alert(this.getMessage(\"openLineNotSupported\"));\n\t\t\treturn;\n\t\t}\n\n\t\tlet slug = \"\";\n\t\tconst communication = BX.prop.getObject(this.getAssociatedEntityData(), \"COMMUNICATION\", null);\n\t\tif(communication)\n\t\t{\n\t\t\tif(BX.prop.getString(communication, \"TYPE\") === \"IM\")\n\t\t\t{\n\t\t\t\tslug = BX.prop.getString(communication, \"VALUE\");\n\t\t\t}\n\t\t}\n\n\t\tif(slug !== \"\")\n\t\t{\n\t\t\twindow.top['BXIM'].openMessengerSlider(slug, {RECENT: 'N', MENU: 'N'});\n\t\t}\n\t}\n\n\tstatic create(id, settings)\n\t{\n\t\tconst self = new OpenLine();\n\t\tself.initialize(id, settings);\n\t\treturn self;\n\t}\n}\n","import HistoryActivity from \"./history-activity\";\n\n/** @memberof BX.Crm.Timeline.Items */\nexport default class Rest extends HistoryActivity\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\t}\n\n\tprepareHeaderLayout()\n\t{\n\t\tconst header = BX.create(\"DIV\", {attrs: {className: \"crm-entity-stream-content-header\"}});\n\t\theader.appendChild(this.prepareTitleLayout());\n\t\theader.appendChild(this.prepareTimeLayout());\n\n\t\treturn header;\n\t}\n\n\tgetTypeDescription()\n\t{\n\t\tconst entityData = this.getAssociatedEntityData();\n\t\tif (entityData['APP_TYPE'] && entityData['APP_TYPE']['NAME'])\n\t\t{\n\t\t\treturn entityData['APP_TYPE']['NAME'];\n\t\t}\n\n\t\treturn super.getTypeDescription();\n\t}\n\n\tprepareContent()\n\t{\n\t\tconst entityData = this.getAssociatedEntityData();\n\n\t\tlet description = BX.prop.getString(entityData, \"DESCRIPTION_RAW\", \"\");\n\t\tif(description !== \"\")\n\t\t{\n\t\t\t//trim leading spaces\n\t\t\tdescription = description.replace(/^\\s+/,'');\n\t\t}\n\n\t\t//var entityData = this.getAssociatedEntityData();\n\t\tconst wrapper = BX.create(\"DIV\", {attrs: {className: \"crm-entity-stream-section crm-entity-stream-section-today crm-entity-stream-section-rest\"}});\n\n\t\tconst iconNode = BX.create(\"DIV\", {attrs: {className: \"crm-entity-stream-section-icon crm-entity-stream-section-icon-rest\"}});\n\n\t\twrapper.appendChild(iconNode);\n\n\t\tif (entityData['APP_TYPE'] && entityData['APP_TYPE']['ICON_SRC'])\n\t\t{\n\t\t\tif (iconNode)\n\t\t\t{\n\t\t\t\ticonNode.style.backgroundImage = \"url('\" +  entityData['APP_TYPE']['ICON_SRC'] + \"')\";\n\t\t\t\ticonNode.style.backgroundPosition = \"center center\";\n\t\t\t}\n\t\t}\n\n\t\tif (this.isFixed())\n\t\t\tBX.addClass(wrapper, 'crm-entity-stream-section-top-fixed');\n\n\t\tconst contentWrapper = BX.create(\"DIV\", {attrs: {className: \"crm-entity-stream-content-event\"}});\n\t\twrapper.appendChild(\n\t\t\tBX.create(\"DIV\",\n\t\t\t\t{\n\t\t\t\t\tattrs: { className: \"crm-entity-stream-section-content\" },\n\t\t\t\t\tchildren: [contentWrapper]\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\n\t\tconst header = this.prepareHeaderLayout();\n\t\tcontentWrapper.appendChild(header);\n\n\t\tconst detailWrapper = BX.create(\"DIV\", {attrs: {className: \"crm-entity-stream-content-detail\"}});\n\t\tcontentWrapper.appendChild(detailWrapper);\n\n\t\tdetailWrapper.appendChild(\n\t\t\tBX.create(\"DIV\",\n\t\t\t\t{\n\t\t\t\t\tattrs: { className: \"crm-entity-stream-content-detail-title\" },\n\t\t\t\t\tchildren:\n\t\t\t\t\t\t[\n\t\t\t\t\t\t\tBX.create(\"A\",\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tattrs: { href: \"#\" },\n\t\t\t\t\t\t\t\t\tevents: { \"click\": this._headerClickHandler },\n\t\t\t\t\t\t\t\t\ttext: this.getTitle()\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\n\t\t//Content\n\t\tdetailWrapper.appendChild(\n\t\t\tBX.create(\"DIV\",\n\t\t\t\t{\n\t\t\t\t\tattrs: { className: \"crm-entity-stream-content-detail-description\" },\n\t\t\t\t\tchildren: this.prepareCutOffElements(description, 128, this._headerClickHandler)\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\n\t\t//region Author\n\t\tconst authorNode = this.prepareAuthorLayout();\n\t\tif(authorNode)\n\t\t{\n\t\t\tcontentWrapper.appendChild(authorNode);\n\t\t}\n\t\t//endregion\n\n\t\t//region  Actions\n\t\tthis._actionContainer = BX.create(\"SPAN\", { attrs: { className: \"crm-entity-stream-content-detail-action\" } });\n\t\tcontentWrapper.appendChild(this._actionContainer);\n\t\t//endregion\n\n\t\tif (!this.isReadOnly())\n\t\t\tcontentWrapper.appendChild(this.prepareFixedSwitcherLayout());\n\n\t\treturn wrapper;\n\t}\n\n\tprepareActions()\n\t{\n\t}\n\n\tshowActions(show)\n\t{\n\t\tif(this._actionContainer)\n\t\t{\n\t\t\tthis._actionContainer.style.display = show ? \"\" : \"none\";\n\t\t}\n\t}\n\n\tstatic create(id, settings)\n\t{\n\t\tconst self = new Rest();\n\t\tself.initialize(id, settings);\n\t\treturn self;\n\t}\n}\n","import HistoryActivity from \"./history-activity\";\n\n/** @memberof BX.Crm.Timeline.Actions */\nexport default class Visit extends HistoryActivity\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis._playerDummyClickHandler = BX.delegate(this.onPlayerDummyClick, this);\n\t\tthis._playerWrapper = null;\n\t\tthis._transcriptWrapper = null;\n\t\tthis._mediaFileInfo = null;\n\t}\n\n\tprepareHeaderLayout()\n\t{\n\t\tconst header = BX.create(\"DIV\", {attrs: {className: \"crm-entity-stream-content-header\"}});\n\t\theader.appendChild(this.prepareTitleLayout());\n\n\t\tconst entityData = this.getAssociatedEntityData();\n\t\tconst visitInfo = BX.prop.getObject(entityData, \"VISIT_INFO\", {});\n\t\tconst recordLength = BX.prop.getInteger(visitInfo, \"RECORD_LENGTH\", 0);\n\t\tconst recordLengthFormatted = BX.prop.getString(visitInfo, \"RECORD_LENGTH_FORMATTED_FULL\", \"\");\n\n\t\theader.appendChild(\n\t\t\tBX.create(\"SPAN\",\n\t\t\t\t{\n\t\t\t\t\tattrs: { className: \"crm-entity-stream-content-event-time\" },\n\t\t\t\t\ttext: (recordLength > 0 ? recordLengthFormatted + ', ' + BX.message('CRM_TIMELINE_VISIT_AT') + ' ' : '') + this.formatTime(this.getCreatedTime())\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\n\t\treturn header;\n\t}\n\n\tprepareContent()\n\t{\n\t\tconst entityData = this.getAssociatedEntityData();\n\n\t\tconst communication = BX.prop.getObject(entityData, \"COMMUNICATION\", {});\n\t\tconst communicationTitle = BX.prop.getString(communication, \"TITLE\", \"\");\n\t\tconst communicationShowUrl = BX.prop.getString(communication, \"SHOW_URL\", \"\");\n\n\t\tconst visitInfo = BX.prop.getObject(entityData, \"VISIT_INFO\", {});\n\t\tconst recordLength = BX.prop.getInteger(visitInfo, \"RECORD_LENGTH\", 0);\n\t\tconst recordLengthFormatted = BX.prop.getString(visitInfo, \"RECORD_LENGTH_FORMATTED_SHORT\", \"\");\n\t\tconst vkProfile = BX.prop.getString(visitInfo, \"VK_PROFILE\", \"\");\n\n\t\tconst outerWrapper = BX.create(\"DIV\", {attrs: {className: \"crm-entity-stream-section crm-entity-stream-section-history crm-entity-stream-section-visit\"}});\n\t\touterWrapper.appendChild(\n\t\t\tBX.create(\"DIV\",\n\t\t\t\t{\n\t\t\t\t\tattrs: { className: \"crm-entity-stream-section-icon crm-entity-stream-section-icon-visit\" }\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\n\t\tconst wrapper = BX.create(\"DIV\", {attrs: {className: \"crm-entity-stream-content-event\"}});\n\t\touterWrapper.appendChild(\n\t\t\tBX.create(\"DIV\",\n\t\t\t\t{\n\t\t\t\t\tattrs: { className: \"crm-entity-stream-section-content\" },\n\t\t\t\t\tchildren: [ wrapper ]\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\n\t\t//Header\n\t\tconst header = this.prepareHeaderLayout();\n\t\twrapper.appendChild(header);\n\n\t\t//region Context Menu\n\t\tif(this.isContextMenuEnabled())\n\t\t{\n\t\t\twrapper.appendChild(this.prepareContextMenuButton());\n\t\t}\n\t\t//endregion\n\n\t\t//Details\n\t\tconst detailWrapper = BX.create(\"DIV\",\n\t\t\t{\n\t\t\t\tattrs: {className: \"crm-entity-stream-content-detail crm-entity-stream-content-detail-call-inline\"}\n\t\t\t}\n\t\t);\n\t\twrapper.appendChild(detailWrapper);\n\n\t\tthis._mediaFileInfo = BX.prop.getObject(entityData, \"MEDIA_FILE_INFO\", null);\n\t\tif(this._mediaFileInfo !== null && recordLength > 0)\n\t\t{\n\t\t\tthis._playerWrapper = this._history.getManager().renderAudioDummy(recordLengthFormatted, this._playerDummyClickHandler);\n\t\t\tdetailWrapper.appendChild(\n\t\t\t\t//crm-entity-stream-content-detail-call\n\t\t\t\tthis._playerWrapper\n\t\t\t);\n\t\t\tdetailWrapper.appendChild(this._history.getManager().getAudioPlaybackRateSelector().render());\n\t\t}\n\n\t\tconst communicationWrapper = BX.create(\"DIV\",\n\t\t\t{\n\t\t\t\tattrs: {className: \"crm-entity-stream-content-detail-contact-info\"}\n\t\t\t}\n\t\t);\n\t\twrapper.appendChild(communicationWrapper);\n\n\t\t//Communications\n\t\tif(communicationTitle !== \"\")\n\t\t{\n\t\t\tcommunicationWrapper.appendChild(document.createTextNode(BX.message(\"CRM_TIMELINE_VISIT_WITH\") + ' '));\n\t\t\tif(communicationShowUrl !== \"\")\n\t\t\t{\n\t\t\t\tcommunicationWrapper.appendChild(\n\t\t\t\t\tBX.create(\"A\",\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tattrs: { href: communicationShowUrl },\n\t\t\t\t\t\t\ttext: communicationTitle\n\t\t\t\t\t\t}\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tcommunicationWrapper.appendChild(BX.create(\"SPAN\", { text: communicationTitle }));\n\t\t\t}\n\t\t}\n\n\t\tif(BX.type.isNotEmptyString(vkProfile))\n\t\t{\n\t\t\tcommunicationWrapper.appendChild(document.createTextNode(\" \"));\n\t\t\tcommunicationWrapper.appendChild(\n\t\t\t\tBX.create(\n\t\t\t\t\t\"a\",\n\t\t\t\t\t{\n\t\t\t\t\t\tattrs:\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tclassName: \"crm-entity-stream-content-detail-additional\",\n\t\t\t\t\t\t\t\ttarget: \"_blank\",\n\t\t\t\t\t\t\t\thref: this.getVkProfileUrl(vkProfile)\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\ttext: BX.message('CRM_TIMELINE_VISIT_VKONTAKTE_PROFILE')\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t\t)\n\n\t\t}\n\n\t\t//region Author\n\t\tconst authorNode = this.prepareAuthorLayout();\n\t\tif(authorNode)\n\t\t{\n\t\t\twrapper.appendChild(authorNode);\n\t\t}\n\t\t//endregion\n\n\t\treturn outerWrapper;\n\t}\n\n\tonPlayerDummyClick(e)\n\t{\n\t\tconst stubNode = this._playerWrapper.querySelector(\".crm-audio-cap-wrap\");\n\t\tif(stubNode)\n\t\t{\n\t\t\tBX.addClass(stubNode, \"crm-audio-cap-wrap-loader\");\n\t\t}\n\n\t\tthis._history.getManager().getAudioPlaybackRateSelector().addPlayer(this._history.getManager().loadMediaPlayer(\n\t\t\t\"history_\" + this.getId(),\n\t\t\tthis._mediaFileInfo[\"URL\"],\n\t\t\tthis._mediaFileInfo[\"TYPE\"],\n\t\t\tthis._playerWrapper,\n\t\t\tthis._mediaFileInfo[\"DURATION\"],\n\t\t\t{\n\t\t\t\tplaybackRate: this._history.getManager().getAudioPlaybackRateSelector().getRate()\n\t\t\t}\n\t\t));\n\t}\n\n\tgetVkProfileUrl(profile)\n\t{\n\t\treturn 'https://vk.com/' + BX.util.htmlspecialchars(profile);\n\t}\n\n\tview()\n\t{\n\t\tif (BX.getClass('BX.Crm.Restriction.Bitrix24') && BX.Crm.Restriction.Bitrix24.isRestricted('visit'))\n\t\t{\n\t\t\treturn BX.Crm.Restriction.Bitrix24.getHandler('visit').call();\n\t\t}\n\t\tsuper.view();\n\t}\n\n\tedit()\n\t{\n\t\tif (BX.getClass('BX.Crm.Restriction.Bitrix24') && BX.Crm.Restriction.Bitrix24.isRestricted('visit'))\n\t\t{\n\t\t\treturn BX.Crm.Restriction.Bitrix24.getHandler('visit').call();\n\t\t}\n\t\tsuper.edit();\n\t}\n\n\tstatic create(id, settings)\n\t{\n\t\tconst self = new Visit();\n\t\tself.initialize(id, settings);\n\t\treturn self;\n\t}\n}\n","import HistoryActivity from \"./history-activity\";\n\n/** @memberof BX.Crm.Timeline.Actions */\nexport default class Zoom extends HistoryActivity\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\n\t\tthis._videoDummy = null;\n\t\tthis._audioDummy = null;\n\t\tthis._videoPlayer = null;\n\t\tthis._audioPlayer = null;\n\t\tthis._audioLengthElement = null;\n\t\tthis._recordings = [];\n\t\tthis._currentRecordingIndex = 0;\n\t\tthis.zoomActivitySubject = null;\n\n\t\tthis._downloadWrapper = null;\n\t\tthis._downloadSubject = null;\n\t\tthis._downloadSubjectDetail = null;\n\t\tthis._downloadVideoLink = null;\n\t\tthis._downloadSeparator = null;\n\t\tthis._downloadAudioLink = null;\n\t\tthis._playVideoLink = null;\n\t\tthis.detailZoomCopyVideoLink = null;\n\t}\n\n\tprepareHeaderLayout()\n\t{\n\t\tconst header = BX.create(\"DIV\", {attrs: {className: \"crm-entity-stream-content-header\"}});\n\t\theader.appendChild(this.prepareTitleLayout());\n\t\tif (!this._data.hasOwnProperty('PROVIDER_DATA') || this._data[\"PROVIDER_DATA\"][\"ZOOM_EVENT_TYPE\"] !== 'ZOOM_CONF_JOINED')\n\t\t{\n\t\t\theader.appendChild(this.prepareSuccessfulLayout());\n\t\t}\n\t\theader.appendChild(this.prepareTimeLayout());\n\n\t\treturn header;\n\t}\n\n\tprepareSuccessfulLayout()\n\t{\n\t\treturn BX.create(\"SPAN\", {\n\t\t\tattrs:{ className: \"crm-entity-stream-content-event-successful\"},\n\t\t\ttext: BX.message('CRM_TIMELINE_ZOOM_SUCCESSFUL_ACTIVITY')\n\t\t});\n\t}\n\n\tprepareTitleLayout()\n\t{\n\t\tif (this._data.hasOwnProperty('PROVIDER_DATA') && this._data[\"PROVIDER_DATA\"][\"ZOOM_EVENT_TYPE\"] === 'ZOOM_CONF_JOINED')\n\t\t{\n\t\t\treturn BX.create(\"SPAN\", {\n\t\t\t\tattrs:{ className: \"crm-entity-stream-content-event-title\"},\n\t\t\t\ttext: BX.message('CRM_TIMELINE_ZOOM_JOINED_CONFERENCE')\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn BX.create(\"SPAN\", {\n\t\t\t\tattrs:{ className: \"crm-entity-stream-content-event-title\"},\n\t\t\t\ttext: BX.message('CRM_TIMELINE_ZOOM_CONFERENCE_END')\n\t\t\t});\n\t\t}\n\t}\n\n\tprepareContent()\n\t{\n\t\tconst wrapper = BX.create(\"DIV\", {attrs: {className: \"crm-entity-stream-section crm-entity-stream-section-history\"}});\n\t\tlet entityDetailWrapper;\n\t\tconst zoomData = BX.prop.getObject(this.getAssociatedEntityData(), \"ZOOM_INFO\", null);\n\t\tconst subject = BX.prop.getString(this.getAssociatedEntityData(), \"SUBJECT\", null);\n\n\t\tthis._recordings = BX.prop.getArray(zoomData, \"RECORDINGS\", []);\n\n\t\twrapper.appendChild(\n\t\t\tBX.create(\"DIV\", { attrs: { className: \"crm-entity-stream-section-icon crm-entity-stream-section-icon-zoom\" } })\n\t\t);\n\n\t\tif (this.isFixed())\n\t\t\tBX.addClass(wrapper, 'crm-entity-stream-section-top-fixed');\n\n\t\tconst contentWrapper = BX.create(\"DIV\", {attrs: {className: \"crm-entity-stream-content-event\"}});\n\t\twrapper.appendChild(\n\t\t\tBX.create(\"DIV\",\n\t\t\t\t{\n\t\t\t\t\tattrs: { className: \"crm-entity-stream-section-content\" },\n\t\t\t\t\tchildren: [contentWrapper]\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\n\t\tconst header = this.prepareHeaderLayout();\n\t\tcontentWrapper.appendChild(header);\n\n\t\tconst detailWrapper = BX.create(\"DIV\", {attrs: {className: \"crm-entity-stream-content-detail\"}});\n\t\tcontentWrapper.appendChild(detailWrapper);\n\n\t\tif (this._data.hasOwnProperty('PROVIDER_DATA') && this._data[\"PROVIDER_DATA\"][\"ZOOM_EVENT_TYPE\"] === 'ZOOM_CONF_JOINED')\n\t\t{\n\t\t\tentityDetailWrapper = BX.create(\"DIV\",\n\t\t\t\t{\n\t\t\t\t\tattrs: { className: \"crm-entity-stream-content-detail-description\" },\n\t\t\t\t\ttext: zoomData['CONF_URL']\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tentityDetailWrapper = BX.create(\"DIV\",\n\t\t\t\t{\n\t\t\t\t\tattrs: { className: \"crm-entity-stream-content-detail-description\" },\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tif (this._recordings.length > 0)\n\t\t\t{\n\t\t\t\tif (this._recordings.length > 1)\n\t\t\t\t{\n\t\t\t\t\t//render video parts header\n\n\t\t\t\t\tconst tabs = this._recordings.map(function (recording, index) {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tid: index,\n\t\t\t\t\t\t\ttitle: BX.message(\"CRM_TIMELINE_ZOOM_MEETING_RECORD_PART\").replace(\"#NUMBER#\", index + 1),\n\t\t\t\t\t\t\ttime: recording[\"AUDIO\"] ? recording[\"AUDIO\"][\"LENGTH_FORMATTED\"] : \"\",\n\t\t\t\t\t\t\tactive: index === 0\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tconst tabsComponent = new Zoom.TabsComponent({\n\t\t\t\t\t\ttabs: tabs,\n\t\t\t\t\t});\n\t\t\t\t\ttabsComponent.eventEmitter.subscribe(\"onTabChange\", this._onTabChange.bind(this));\n\t\t\t\t\tdetailWrapper.appendChild(tabsComponent.render());\n\t\t\t\t}\n\n\t\t\t\tthis._videoDummy = BX.create(\"DIV\",\n\t\t\t\t\t{\n\t\t\t\t\t\tprops: { className: \"crm-entity-stream-content-detail-zoom-video-wrap\"},\n\t\t\t\t\t\tchildren: [\n\t\t\t\t\t\t\tBX.create(\"DIV\",\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tprops: { className: \"crm-entity-stream-content-detail-zoom-video\" },\n\t\t\t\t\t\t\t\t\tevents:\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tclick: this._onVideoDummyClick.bind(this)\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tchildren: [\n\t\t\t\t\t\t\t\t\t\tBX.create(\"DIV\", {\n\t\t\t\t\t\t\t\t\t\t\tprops: {className: \"crm-entity-stream-content-detail-zoom-video-inner\"},\n\t\t\t\t\t\t\t\t\t\t\tchildren: [\n\t\t\t\t\t\t\t\t\t\t\t\tBX.create(\"DIV\", {\n\t\t\t\t\t\t\t\t\t\t\t\t\tprops: {className: \"crm-entity-stream-content-detail-zoom-video-btn\"},\n\t\t\t\t\t\t\t\t\t\t\t\t\tdataset: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\thint: BX.message(\"CRM_TIMELINE_ZOOM_LOGIN_REQUIRED\"),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'hintNoIcon': 'Y'\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\t\t\t\tBX.create(\"SPAN\", {\n\t\t\t\t\t\t\t\t\t\t\t\t\tprops: {className: \"crm-entity-stream-content-detail-zoom-video-text\"},\n\t\t\t\t\t\t\t\t\t\t\t\t\ttext: BX.message(\"CRM_TIMELINE_ZOOM_CLICK_TO_WATCH\")\n\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t]\n\t\t\t\t\t});\n\n\t\t\t\tBX.UI.Hint.init(this._videoDummy);\n\n\t\t\t\tthis._audioDummy = this._history.getManager().renderAudioDummy(\"00:15\", this._onAudioDummyClick.bind(this));\n\t\t\t\tthis._audioLengthElement = this._audioDummy.querySelector('.crm-audio-cap-time');\n\n\t\t\t\tif (zoomData['RECORDINGS'][0]['VIDEO'])\n\t\t\t\t{\n\t\t\t\t\t//video download link with token valid for 24h\n\t\t\t\t\tconst videoLinkExpireTS = (zoomData['RECORDINGS'][0]['VIDEO']['END_DATE_TS'] * 1000) + (60 * 60 * 23 * 1000);\n\t\t\t\t\tif (videoLinkExpireTS < Date.now())\n\t\t\t\t\t{\n\t\t\t\t\t\tconst videoLinkContainer = BX.create(\"DIV\", {\n\t\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\t\tclassName: \"crm-entity-stream-content-detail-zoom-desc\",\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tthis._playVideoLink = BX.create(\"DIV\", {\n\t\t\t\t\t\t\thtml: BX.message(\"CRM_TIMELINE_ZOOM_PLAY_LINK_VIDEO\"),\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tthis._detailZoomCopyVideoLink = BX.create(\"A\",\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tattrs: {\n\t\t\t\t\t\t\t\t\tclassName: 'ui-link ui-link-dashed',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\ttext: BX.message(\"CRM_TIMELINE_ZOOM_COPY_PASSWORD\")\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tvideoLinkContainer.appendChild(this._playVideoLink);\n\t\t\t\t\t\tvideoLinkContainer.appendChild(this._detailZoomCopyVideoLink);\n\t\t\t\t\t\tentityDetailWrapper.appendChild(videoLinkContainer);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tentityDetailWrapper.appendChild(this._videoDummy);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (zoomData['RECORDINGS'][0]['AUDIO'])\n\t\t\t\t{\n\t\t\t\t\tconst zoomAudioDetailWrapper = BX.create(\"DIV\",\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tattrs: {className: \"crm-entity-stream-content-detail-call crm-entity-stream-content-detail-call-inline\"},\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\n\t\t\t\t\tzoomAudioDetailWrapper.appendChild(this._audioDummy);\n\t\t\t\t\tzoomAudioDetailWrapper.appendChild(this._history.getManager().getAudioPlaybackRateSelector().render());\n\t\t\t\t\tentityDetailWrapper.appendChild(zoomAudioDetailWrapper);\n\t\t\t\t}\n\n\t\t\t\tthis._downloadWrapper = BX.create(\"DIV\", {\n\t\t\t\t\tprops: {className: \"crm-entity-stream-content-detail-zoom-desc\"},\n\t\t\t\t});\n\n\t\t\t\tentityDetailWrapper.appendChild(this._downloadWrapper);\n\n\t\t\t\tthis._downloadSubject = BX.create(\"SPAN\", {\n\t\t\t\t\tprops: {className: \"crm-entity-stream-content-detail-zoom-desc-subject\"},\n\t\t\t\t});\n\t\t\t\tthis._downloadSubjectDetail = BX.create(\"SPAN\", {\n\t\t\t\t\tprops: {className: \"crm-entity-stream-content-detail-zoom-desc-detail\"},\n\t\t\t\t});\n\t\t\t\tthis._downloadVideoLink = BX.create(\"A\", {\n\t\t\t\t\tprops: {className: \"crm-entity-stream-content-detail-zoom-desc-link\"},\n\t\t\t\t\ttext: BX.message(\"CRM_TIMELINE_ZOOM_DOWNLOAD_VIDEO\")\n\t\t\t\t});\n\t\t\t\tthis._downloadSeparator = BX.create(\"SPAN\", {\n\t\t\t\t\tprops: {className: \"crm-entity-stream-content-detail-zoom-desc-separate\"},\n\t\t\t\t\thtml: \"&mdash;\"\n\t\t\t\t});\n\t\t\t\tthis._downloadAudioLink = BX.create(\"A\", {\n\t\t\t\t\tprops: {className: \"crm-entity-stream-content-detail-zoom-desc-link\"},\n\t\t\t\t\ttext: BX.message(\"CRM_TIMELINE_ZOOM_DOWNLOAD_AUDIO\")\n\t\t\t\t});\n\t\t\t\tthis.setCurrentRecording(0);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.zoomActivitySubject = BX.create(\"DIV\",\n\t\t\t\t\t{\n\t\t\t\t\t\tattrs: { className: \"crm-entity-stream-content-detail-title\" },\n\t\t\t\t\t\tchildren:\n\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\tBX.create(\"A\",\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tattrs: { href: \"#\" },\n\t\t\t\t\t\t\t\t\t\tevents: { \"click\": this._headerClickHandler },\n\t\t\t\t\t\t\t\t\t\ttext: subject\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t);\n\n\t\t\t\tentityDetailWrapper.appendChild(this.zoomActivitySubject);\n\n\t\t\t\tif (zoomData['HAS_RECORDING'] === 'Y')\n\t\t\t\t{\n\t\t\t\t\tentityDetailWrapper.appendChild(BX.create(\"DIV\", {\n\t\t\t\t\t\tprops: {className: \"crm-entity-stream-content-detail-zoom-video\"},\n\t\t\t\t\t\tchildren: [\n\t\t\t\t\t\t\tBX.create(\"DIV\", {\n\t\t\t\t\t\t\t\tprops: {className: \"crm-entity-stream-content-detail-zoom-video-inner\"},\n\t\t\t\t\t\t\t\tchildren: [\n\t\t\t\t\t\t\t\t\tBX.create(\"DIV\", {\n\t\t\t\t\t\t\t\t\t\tprops: {className: \"crm-entity-stream-content-detail-zoom-video-img\"},\n\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\tBX.create(\"SPAN\", {\n\t\t\t\t\t\t\t\t\t\tprops: {className: \"crm-entity-stream-content-detail-zoom-video-text\"},\n\t\t\t\t\t\t\t\t\t\ttext: BX.message(\"CRM_TIMELINE_ZOOM_MEETING_RECORD_IN_PROCESS\")\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t]\n\t\t\t\t\t}));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t/*else\n\t\t{\n\t\t\tdetailWrapper.appendChild(BX.create(\"span\", {text: \"456\"}));\n\n\t\t\tvar entityDetailWrapper = BX.create(\"DIV\",\n\t\t\t\t{\n\t\t\t\t\tattrs: { className: \"crm-entity-stream-content-detail-description\" },\n\t\t\t\t\ttext: BX.prop.getString(zoomData, \"CONF_URL\", \"\")\n\t\t\t\t}\n\t\t\t);\n\t\t}*/\n\t\t//Content //todo\n\n\n\t\tif(entityDetailWrapper)\n\t\t{\n\t\t\tdetailWrapper.appendChild(entityDetailWrapper);\n\t\t}\n\n\t\t//region Author\n\t\tconst authorNode = this.prepareAuthorLayout();\n\t\tif(authorNode)\n\t\t{\n\t\t\tcontentWrapper.appendChild(authorNode);\n\t\t}\n\t\t//endregion\n\n\t\treturn wrapper;\n\t}\n\n\t_onVideoDummyClick()\n\t{\n\t\tBX.UI.Hint.hide();\n\t\tconst recording = this._recordings[this._currentRecordingIndex][\"VIDEO\"];\n\t\tif(!recording)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tthis._videoPlayer = this._history.getManager().loadMediaPlayer(\n\t\t\t\"zoom_video_\" + this.getId(),\n\t\t\trecording[\"DOWNLOAD_URL\"],\n\t\t\t\"video/mp4\",\n\t\t\tthis._videoDummy,\n\t\t\trecording[\"LENGTH\"],\n\t\t\t{\n\t\t\t\tvideo: true,\n\t\t\t\tskin: \"\",\n\t\t\t\twidth: 480,\n\t\t\t\theight: 270\n\t\t\t}\n\t\t);\n\t}\n\n\t_onAudioDummyClick()\n\t{\n\t\tconst recording = this._recordings[this._currentRecordingIndex][\"AUDIO\"];\n\t\tif(!recording)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tthis._history.getManager().getAudioPlaybackRateSelector().addPlayer(this._audioPlayer = this._history.getManager().loadMediaPlayer(\n\t\t\t\"zoom_audio_\" + this.getId(),\n\t\t\trecording[\"DOWNLOAD_URL\"],\n\t\t\t\"audio/mp4\",\n\t\t\tthis._audioDummy,\n\t\t\trecording[\"LENGTH\"],\n\t\t\t{\n\t\t\t\tplaybackRate: this._history.getManager().getAudioPlaybackRateSelector().getRate()\n\t\t\t}\n\t\t));\n\t}\n\n\t_onTabChange(event)\n\t{\n\t\tthis.setCurrentRecording(event.data.tabId);\n\t}\n\n\tsetCurrentRecording(recordingIndex)\n\t{\n\t\tthis._currentRecordingIndex = recordingIndex;\n\t\tconst videoRecording = this._recordings[this._currentRecordingIndex][\"VIDEO\"];\n\t\tconst audioRecording = this._recordings[this._currentRecordingIndex][\"AUDIO\"];\n\n\t\tif(videoRecording)\n\t\t{\n\t\t\tthis._videoDummy.hidden = false;\n\t\t\tif(this._videoPlayer)\n\t\t\t{\n\t\t\t\tthis._videoPlayer.pause();\n\t\t\t\tthis._videoPlayer.setSource(videoRecording[\"DOWNLOAD_URL\"]);\n\t\t\t\tthis._downloadVideoLink.href = videoRecording[\"DOWNLOAD_URL\"];\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis._videoDummy.hidden = true;\n\t\t}\n\n\t\tif(audioRecording)\n\t\t{\n\t\t\tthis._audioDummy.hidden = false;\n\t\t\tif(this._audioPlayer)\n\t\t\t{\n\t\t\t\tthis._audioPlayer.pause();\n\t\t\t\tthis._audioPlayer.setSource(audioRecording[\"DOWNLOAD_URL\"]);\n\t\t\t}\n\t\t\tthis._downloadAudioLink.href = audioRecording[\"DOWNLOAD_URL\"];\n\t\t\tthis._audioLengthElement.innerText = audioRecording[\"LENGTH_FORMATTED\"];\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis._audioDummy.hidden = true;\n\t\t}\n\n\t\tBX.clean(this._downloadWrapper);\n\t\tif(audioRecording || videoRecording)\n\t\t{\n\t\t\tconst lengthHuman = audioRecording ? audioRecording[\"LENGTH_HUMAN\"] : videoRecording[\"LENGTH_HUMAN\"];\n\t\t\tthis._downloadWrapper.appendChild(this._downloadSubject);\n\t\t\tthis._downloadSubject.innerHTML = BX.util.htmlspecialchars(BX.message(\"CRM_TIMELINE_ZOOM_MEETING_RECORD\").replace(\"#DURATION#\", lengthHuman)) + \" &mdash; \"\n\t\t\tthis._downloadWrapper.appendChild(this._downloadSubjectDetail);\n\t\t}\n\t\tif (videoRecording)\n\t\t{\n\t\t\tthis._downloadSubjectDetail.appendChild(this._downloadVideoLink);\n\t\t\tthis._downloadVideoLink.href = videoRecording['DOWNLOAD_URL'];\n\t\t\tif (audioRecording)\n\t\t\t{\n\t\t\t\tthis._downloadSubjectDetail.appendChild(this._downloadSeparator);\n\t\t\t}\n\n\t\t\tif (this._playVideoLink)\n\t\t\t{\n\t\t\t\tthis._playVideoLink.lastElementChild.href = videoRecording[\"PLAY_URL\"];\n\t\t\t\tthis._downloadVideoLink.href = videoRecording[\"PLAY_URL\"];\n\t\t\t}\n\t\t\tif (this._detailZoomCopyVideoLink)\n\t\t\t{\n\t\t\t\tBX.clipboard.bindCopyClick(this._detailZoomCopyVideoLink, {\n\t\t\t\t\ttext: videoRecording['PASSWORD'],\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\tif (audioRecording)\n\t\t{\n\t\t\tthis._downloadSubjectDetail.appendChild(this._downloadAudioLink);\n\t\t\tthis._downloadAudioLink.href = audioRecording['DOWNLOAD_URL'];\n\t\t}\n\t}\n\n\tprepareActions()\n\t{\n\t}\n\n\tstatic create(id, settings)\n\t{\n\t\tconst self = new Zoom();\n\t\tself.initialize(id, settings);\n\n\t\t//todo: remove debug\n\t\tif(!window['zoom'])\n\t\t{\n\t\t\twindow['zoom'] = [];\n\t\t}\n\t\twindow['zoom'].push(self);\n\t\treturn self;\n\t}\n}\n\nZoom.TabsComponent = class\n{\n\tconstructor(config)\n\t{\n\t\tthis.tabs = BX.prop.getArray(config, \"tabs\", []);\n\t\tthis.elements = {\n\t\t\tcontainer: null,\n\t\t\ttabs: {}\n\t\t};\n\t\tthis.eventEmitter = new BX.Event.EventEmitter(this, 'Zoom.TabsComponent');\n\t}\n\n\trender()\n\t{\n\t\tif(this.elements.container)\n\t\t{\n\t\t\treturn this.elements.container;\n\t\t}\n\n\t\tthis.elements.container = BX.create(\"DIV\", {\n\t\t\tprops: {className: \"crm-entity-stream-content-detail-zoom-section-wrapper\"},\n\t\t\tchildren: [\n\t\t\t\tBX.create(\"DIV\", {\n\t\t\t\t\tprops: {className: \"crm-entity-stream-content-detail-zoom-section-list\"},\n\t\t\t\t\tchildren: this.tabs.map(this._renderTab, this)\n\t\t\t\t})\n\t\t\t]\n\t\t});\n\t\treturn this.elements.container;\n\t}\n\n\t_renderTab(tabDescription)\n\t{\n\t\tconst tabId = tabDescription.id;\n\t\tthis.elements.tabs[tabId] = BX.create(\"DIV\", {\n\t\t\tprops: {className: \"crm-entity-stream-content-detail-zoom-section\" + (tabDescription.active ? \" crm-entity-stream-content-detail-zoom-section-active\": \"\")},\n\t\t\tchildren: [\n\t\t\t\tBX.create(\"DIV\", {\n\t\t\t\t\tprops: {className: \"crm-entity-stream-content-detail-zoom-section-inner\"},\n\t\t\t\t\tchildren: [\n\t\t\t\t\t\tBX.create(\"DIV\", {\n\t\t\t\t\t\t\tprops: {className: \"crm-entity-stream-content-detail-zoom-section-title\"},\n\t\t\t\t\t\t\ttext: tabDescription.title\n\t\t\t\t\t\t}),\n\t\t\t\t\t\tBX.create(\"DIV\", {\n\t\t\t\t\t\t\tprops: {className: \"crm-entity-stream-content-detail-zoom-section-time\"},\n\t\t\t\t\t\t\ttext: tabDescription.time\n\t\t\t\t\t\t})\n\t\t\t\t\t]\n\t\t\t\t})\n\t\t\t],\n\t\t\tevents: {\n\t\t\t\tclick: function()\n\t\t\t\t{\n\t\t\t\t\tthis.setActiveTab(tabDescription.id)\n\t\t\t\t}.bind(this)\n\t\t\t}\n\t\t});\n\t\treturn this.elements.tabs[tabId];\n\t}\n\n\tsetActiveTab(tabId)\n\t{\n\t\tif(!this.elements.tabs[tabId])\n\t\t{\n\t\t\tthrow new Error (\"Tab \" + tabId + \" is not found\");\n\t\t}\n\t\tfor (let id in this.elements.tabs)\n\t\t{\n\t\t\tif(!this.elements.tabs.hasOwnProperty(id))\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tid = Number.parseInt(id, 10);\n\t\t\tif (id === tabId)\n\t\t\t{\n\t\t\t\tthis.elements.tabs[id].classList.add(\"crm-entity-stream-content-detail-zoom-section-active\");\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.elements.tabs[id].classList.remove(\"crm-entity-stream-content-detail-zoom-section-active\");\n\t\t\t}\n\t\t}\n\t\tthis.eventEmitter.emit(\"onTabChange\", {\n\t\t\ttabId: tabId\n\t\t});\n\t}\n};\n","import History from \"./history\";\n\n/** @memberof BX.Crm.Timeline.Actions */\nexport default class OrderCreation extends History\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\t}\n\n\tdoInitialize()\n\t{\n\t\tsuper.doInitialize();\n\t\tif(!(this._activityEditor instanceof BX.CrmActivityEditor))\n\t\t{\n\t\t\tthrow \"OrderCreation. The field 'activityEditor' is not assigned.\";\n\t\t}\n\t}\n\n\tgetTitle()\n\t{\n\t\tlet msg = this.getMessage(BX.CrmEntityType.resolveName(this.getAssociatedEntityTypeId()).toLowerCase());\n\t\tif(!BX.type.isNotEmptyString(msg))\n\t\t{\n\t\t\tmsg = this.getTextDataParam(\"TITLE\");\n\t\t}\n\n\t\treturn msg;\n\t}\n\n\tgetWrapperClassName()\n\t{\n\t\treturn \"crm-entity-stream-section-createOrderEntity\";\n\t}\n\n\tgetHeaderChildren()\n\t{\n\t\tlet statusMessage = '';\n\t\tlet statusClass = '';\n\t\tconst fields = this.getObjectDataParam('FIELDS');\n\n\t\tif (BX.prop.get(fields, 'DONE') === 'Y')\n\t\t{\n\t\t\tstatusMessage = this.getMessage(\"done\");\n\t\t\tstatusClass = \"crm-entity-stream-content-event-done\";\n\t\t}\n\t\telse if (BX.prop.get(fields, 'CANCELED') === 'Y')\n\t\t{\n\t\t\tstatusMessage = this.getMessage(\"canceled\");\n\t\t\tstatusClass = \"crm-entity-stream-content-event-canceled\";\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (BX.prop.get(fields, 'PAID') === 'Y')\n\t\t\t{\n\t\t\t\tstatusMessage = this.getMessage(\"paid\");\n\t\t\t\tstatusClass = \"crm-entity-stream-content-event-paid\";\n\t\t\t}\n\t\t\telse if (BX.prop.get(fields, 'PAID') === 'N')\n\t\t\t{\n\t\t\t\tstatusMessage = this.getMessage(\"unpaid\");\n\t\t\t\tstatusClass = \"crm-entity-stream-content-event-not-paid\";\n\t\t\t}\n\t\t}\n\n\t\treturn [\n\t\t\tBX.create(\"DIV\",\n\t\t\t\t{\n\t\t\t\t\tattrs: { className: \"crm-entity-stream-content-event-title\" },\n\t\t\t\t\tevents: { click: this._headerClickHandler },\n\t\t\t\t\ttext: this.getTitle(),\n\t\t\t\t}\n\t\t\t),\n\t\t\tBX.create(\"SPAN\",\n\t\t\t\t{\n\t\t\t\t\tattrs: { className: statusClass },\n\t\t\t\t\ttext: statusMessage\n\t\t\t\t}\n\t\t\t),\n\t\t\tBX.create(\"SPAN\",\n\t\t\t\t{\n\t\t\t\t\tattrs: { className: \"crm-entity-stream-content-event-time\" },\n\t\t\t\t\ttext: this.formatTime(this.getCreatedTime())\n\t\t\t\t}\n\t\t\t)\n\t\t];\n\t}\n\n\tprepareContentDetails()\n\t{\n\t\tconst entityData = this.getAssociatedEntityData();\n\t\tconst entityTypeId = this.getAssociatedEntityTypeId();\n\t\tconst entityId = this.getAssociatedEntityId();\n\t\tlet title = BX.util.htmlspecialchars(BX.prop.getString(entityData, \"TITLE\", \"\"));\n\t\tconst showUrl = BX.prop.getString(entityData, \"SHOW_URL\", \"\");\n\t\tconst legend = BX.prop.getString(entityData, \"LEGEND\", \"\");\n\t\tif(legend !== \"\")\n\t\t{\n\t\t\ttitle += \" \" + legend;\n\t\t}\n\t\tconst nodes = [];\n\n\t\tif(title !== \"\")\n\t\t{\n\t\t\tif(showUrl === \"\" || (entityTypeId === this.getOwnerTypeId() && entityId === this.getOwnerId()))\n\t\t\t{\n\t\t\t\tnodes.push(BX.create(\"DIV\", {\n\t\t\t\t\tattrs: { className: \"crm-entity-stream-content-detail-description\" },\n\t\t\t\t\thtml: title\n\t\t\t\t}));\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tnodes.push(BX.create(\"DIV\", {\n\t\t\t\t\tattrs: { className: \"crm-entity-stream-content-detail-description\" },\n\t\t\t\t\thtml: title\n\t\t\t\t}));\n\t\t\t\tnodes.push(BX.create(\"A\", { attrs: { href: showUrl }, text: this.getMessage('urlOrderLink') }));\n\t\t\t}\n\t\t}\n\t\treturn nodes;\n\t}\n\n\tgetIconClassName()\n\t{\n\t\treturn \"crm-entity-stream-section-icon crm-entity-stream-section-icon-store\";\n\t}\n\n\tprepareContent()\n\t{\n\t\tconst wrapperClassName = \"crm-entity-stream-section crm-entity-stream-section-history\";\n\t\tconst wrapper = BX.create(\"DIV\", {attrs: {className: wrapperClassName}});\n\t\twrapper.appendChild(BX.create(\"DIV\", { attrs: { className: this.getIconClassName() } }));\n\n\t\tconst contentWrapper = BX.create(\"DIV\", {attrs: {className: \"crm-entity-stream-content-event\"}});\n\t\twrapper.appendChild(\n\t\t\tBX.create(\"DIV\",\n\t\t\t\t{ attrs: { className: \"crm-entity-stream-section-content\" }, children: [ contentWrapper ] }\n\t\t\t)\n\t\t);\n\n\t\tconst header = BX.create(\"DIV\",\n\t\t\t{\n\t\t\t\tattrs: {className: \"crm-entity-stream-content-header\"},\n\t\t\t\tchildren: this.getHeaderChildren()\n\t\t\t}\n\t\t);\n\t\tcontentWrapper.appendChild(header);\n\n\t\tcontentWrapper.appendChild(\n\t\t\tBX.create(\"DIV\",\n\t\t\t\t{\n\t\t\t\t\tattrs: { className: \"crm-entity-stream-content-detail\" },\n\t\t\t\t\tchildren: this.prepareContentDetails()\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\n\t\t//region Author\n\t\tconst authorNode = this.prepareAuthorLayout();\n\t\tif(authorNode)\n\t\t{\n\t\t\tcontentWrapper.appendChild(authorNode);\n\t\t}\n\t\t//endregion\n\n\t\treturn wrapper;\n\t}\n\n\tgetMessage(name)\n\t{\n\t\tconst m = OrderCreation.messages;\n\t\treturn m.hasOwnProperty(name) ? m[name] : name;\n\t}\n\n\tstatic create(id, settings)\n\t{\n\t\tconst self = new OrderCreation();\n\t\tself.initialize(id, settings);\n\t\treturn self;\n\t}\n\n\tstatic messages = {};\n}\n","import History from \"./history\";\n\n/** @memberof BX.Crm.Timeline.Actions */\nexport default class OrderModification extends History\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\t}\n\n\tgetMessage(name)\n\t{\n\t\tconst m = OrderModification.messages;\n\t\treturn m.hasOwnProperty(name) ? m[name] : name;\n\t}\n\n\tgetTitle()\n\t{\n\t\treturn this.getTextDataParam(\"TITLE\");\n\t}\n\n\tgetStatusInfo()\n\t{\n\t\tconst statusInfo = {};\n\t\tlet value = null;\n\t\tlet classCode = null;\n\t\tconst fieldName = this.getTextDataParam(\"CHANGED_ENTITY\");\n\t\tconst fields = this.getObjectDataParam('FIELDS');\n\t\tconst entityData = this.getAssociatedEntityData();\n\n\t\tif (fieldName === BX.CrmEntityType.names.order)\n\t\t{\n\t\t\tif (BX.prop.get(fields, 'ORDER_CANCELED') === 'Y')\n\t\t\t{\n\t\t\t\tvalue = \"canceled\";\n\t\t\t\tclassCode  = \"not-paid\";\n\t\t\t}\n\t\t\telse if (BX.prop.get(fields, 'ORDER_DONE') === 'Y')\n\t\t\t{\n\t\t\t\tvalue = \"done\";\n\t\t\t\tclassCode  = \"done\";\n\t\t\t}\n\t\t\telse if (BX.prop.getString(entityData, \"VIEWED\", '') === 'Y')\n\t\t\t{\n\t\t\t\tvalue = \"viewed\";\n\t\t\t\tclassCode  = \"done\";\n\t\t\t}\n\t\t\telse if (BX.prop.getString(entityData, \"SENT\", '') === 'Y')\n\t\t\t{\n\t\t\t\tvalue = \"sent\";\n\t\t\t\tclassCode  = \"sent\";\n\t\t\t}\n\t\t}\n\t\tif (fieldName === BX.CrmEntityType.names.orderpayment)\n\t\t{\n\t\t\tconst psStatusCode = BX.prop.get(fields, 'STATUS_CODE', false);\n\t\t\tif (psStatusCode)\n\t\t\t{\n\t\t\t\tif (psStatusCode === 'ERROR')\n\t\t\t\t{\n\t\t\t\t\tvalue = \"orderPaymentError\";\n\t\t\t\t\tclassCode = \"payment-error\";\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (BX.prop.getString(entityData, \"VIEWED\", '') === 'Y')\n\t\t\t{\n\t\t\t\tvalue = \"viewed\";\n\t\t\t\tclassCode  = \"done\";\n\t\t\t}\n\t\t\telse if (BX.prop.getString(entityData, \"SENT\", '') === 'Y')\n\t\t\t{\n\t\t\t\tvalue = \"sent\";\n\t\t\t\tclassCode  = \"sent\";\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tvalue = BX.prop.get(fields, 'ORDER_PAID') === 'Y' ? \"paid\" : \"unpaid\";\n\t\t\t\tclassCode  = BX.prop.get(fields, 'ORDER_PAID') === 'Y' ? \"paid\" : \"not-paid\";\n\t\t\t}\n\t\t}\n\t\telse if (fieldName === BX.CrmEntityType.names.ordershipment && BX.prop.get(fields, 'ORDER_DEDUCTED', false))\n\t\t{\n\t\t\tvalue = BX.prop.get(fields, 'ORDER_DEDUCTED') === 'Y' ? \"deducted\" : \"unshipped\";\n\t\t\tclassCode  = BX.prop.get(fields, 'ORDER_DEDUCTED') === 'Y' ? \"shipped\" : \"not-shipped\";\n\t\t}\n\t\telse if (fieldName === BX.CrmEntityType.names.ordershipment && BX.prop.get(fields, 'ORDER_ALLOW_DELIVERY', false))\n\t\t{\n\t\t\tvalue = BX.prop.get(fields, 'ORDER_ALLOW_DELIVERY') === 'Y' ? \"allowedDelivery\" : \"disallowedDelivery\";\n\t\t\tclassCode  = BX.prop.get(fields, 'ORDER_ALLOW_DELIVERY') === 'Y' ? \"allowed-delivery\" : \"disallowed-delivery\";\n\t\t}\n\n\t\tif (value)\n\t\t{\n\t\t\tstatusInfo.className = \"crm-entity-stream-content-event-\" + classCode;\n\t\t\tstatusInfo.message = this.getMessage(value);\n\t\t}\n\n\t\treturn statusInfo;\n\t}\n\n\tgetHeaderChildren()\n\t{\n\t\tconst children = [\n\t\t\tBX.create(\"DIV\",\n\t\t\t\t{\n\t\t\t\t\tattrs: {className: \"crm-entity-stream-content-event-title\"},\n\t\t\t\t\tevents: {click: this._headerClickHandler},\n\t\t\t\t\ttext: this.getTitle(),\n\t\t\t\t}\n\t\t\t)\n\t\t];\n\t\tconst statusInfo = this.getStatusInfo();\n\t\tif (BX.type.isNotEmptyObject(statusInfo))\n\t\t{\n\t\t\tchildren.push(\n\t\t\t\tBX.create(\"SPAN\",\n\t\t\t\t\t{\n\t\t\t\t\t\tattrs: { className: statusInfo.className },\n\t\t\t\t\t\ttext: statusInfo.message\n\t\t\t\t\t}\n\t\t\t\t));\n\t\t}\n\t\tchildren.push(\n\t\t\tBX.create(\"SPAN\",\n\t\t\t\t{\n\t\t\t\t\tattrs: { className: \"crm-entity-stream-content-event-time\" },\n\t\t\t\t\ttext: this.formatTime(this.getCreatedTime())\n\t\t\t\t}\n\t\t\t));\n\t\treturn children;\n\t}\n\n\tprepareContentDetails()\n\t{\n\t\tconst entityData = this.getAssociatedEntityData();\n\t\tconst entityTypeId = this.getAssociatedEntityTypeId();\n\t\tconst entityId = this.getAssociatedEntityId();\n\t\tconst title = BX.prop.getString(entityData, \"TITLE\");\n\t\tconst htmlTitle = BX.prop.getString(entityData, \"HTML_TITLE\", \"\");\n\t\tconst showUrl = BX.prop.getString(entityData, \"SHOW_URL\", \"\");\n\t\tconst nodes = [];\n\t\tif(title !== \"\")\n\t\t{\n\t\t\tconst descriptionNode = BX.create(\"DIV\", {attrs: {className: \"crm-entity-stream-content-detail-description\"}});\n\n\t\t\tif(showUrl === \"\" || (entityTypeId === this.getOwnerTypeId() && entityId === this.getOwnerId()))\n\t\t\t{\n\t\t\t\tdescriptionNode.appendChild(BX.create(\"SPAN\", { text: title + \" \" + htmlTitle}));\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (htmlTitle === \"\")\n\t\t\t\t{\n\t\t\t\t\tdescriptionNode.appendChild(BX.create(\"A\", {attrs: {href: showUrl}, text: title}));\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tdescriptionNode.appendChild(BX.create(\"SPAN\", { text: title + \" \"}));\n\t\t\t\t\tdescriptionNode.appendChild(BX.create(\"A\", {attrs: {href: showUrl}, text: htmlTitle}));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst legend = BX.prop.getString(entityData, \"LEGEND\");\n\t\t\tif(legend !== \"\")\n\t\t\t{\n\t\t\t\tdescriptionNode.appendChild(BX.create(\"SPAN\", { html: \" \" + legend }));\n\t\t\t}\n\n\t\t\tconst sublegend = BX.prop.getString(entityData, \"SUBLEGEND\", '');\n\t\t\tif (sublegend !== '')\n\t\t\t{\n\t\t\t\tdescriptionNode.appendChild(BX.create(\"BR\"));\n\t\t\t\tdescriptionNode.appendChild(BX.create(\"SPAN\", { text: \" \" + sublegend}));\n\t\t\t}\n\t\t\tnodes.push(descriptionNode);\n\t\t}\n\n\t\treturn nodes;\n\t}\n\n\tprepareViewedContentDetails()\n\t{\n\t\tconst entityData = this.getAssociatedEntityData();\n\t\tconst entityTypeId = this.getAssociatedEntityTypeId();\n\t\tconst entityId = this.getAssociatedEntityId();\n\t\tconst title = BX.prop.getString(entityData, \"TITLE\");\n\t\tconst showUrl = BX.prop.getString(entityData, \"SHOW_URL\", \"\");\n\t\tconst nodes = [];\n\n\t\tif (title !== \"\")\n\t\t{\n\t\t\tconst sublegend = BX.prop.getString(entityData, \"SUBLEGEND\", '');\n\t\t\tif (sublegend !== \"\")\n\t\t\t{\n\t\t\t\tconst descriptionNode = BX.create(\"DIV\", {\n\t\t\t\t\tattrs: {className: \"crm-entity-stream-content-detail-description\"},\n\t\t\t\t\ttext: sublegend,\n\t\t\t\t});\n\t\t\t\tnodes.push(descriptionNode);\n\t\t\t}\n\n\n\t\t\tif(entityTypeId === this.getOwnerTypeId() && entityId === this.getOwnerId())\n\t\t\t{\n\t\t\t\tnodes.push(BX.create(\"SPAN\", { text: title }));\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tnodes.push(BX.create(\"A\", { attrs: { href: showUrl }, text: title }));\n\t\t\t}\n\n\t\t\tconst legend = BX.prop.getString(entityData, \"LEGEND\");\n\t\t\tif(legend !== \"\")\n\t\t\t{\n\t\t\t\tnodes.push(BX.create(\"SPAN\", { html: \" \" + legend }));\n\t\t\t}\n\t\t}\n\n\t\treturn nodes;\n\t}\n\n\tprepareSentContentDetails()\n\t{\n\t\tconst entityData = this.getAssociatedEntityData();\n\t\tconst entityTypeId = this.getAssociatedEntityTypeId();\n\t\tconst entityId = this.getAssociatedEntityId();\n\t\tconst title = BX.prop.getString(entityData, \"TITLE\");\n\t\tconst showUrl = BX.prop.getString(entityData, 'SHOW_URL', '');\n\t\tconst destination = BX.prop.getString(entityData, 'DESTINATION_TITLE', '');\n\t\tconst nodes = [];\n\n\t\tif (title !== \"\")\n\t\t{\n\t\t\tconst detailNode = BX.create('DIV', {attrs: {className: 'crm-entity-stream-content-detail-description'}});\n\t\t\tif(showUrl === \"\" || (entityTypeId === this.getOwnerTypeId() && entityId === this.getOwnerId()))\n\t\t\t{\n\t\t\t\tdetailNode.appendChild(BX.create(\"SPAN\", { text: title }));\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tdetailNode.appendChild(BX.create('A', { attrs: { href: showUrl }, text: title }));\n\t\t\t}\n\n\t\t\tconst legend = BX.prop.getString(entityData, \"LEGEND\");\n\t\t\tif(legend !== \"\")\n\t\t\t{\n\t\t\t\tdetailNode.appendChild(BX.create(\"SPAN\", { html: \" \" + legend }));\n\t\t\t}\n\n\t\t\tif (destination)\n\t\t\t{\n\t\t\t\tdetailNode.appendChild(BX.create('SPAN', {\n\t\t\t\t\tattrs: { className: 'crm-entity-stream-content-detail-order-destination' },\n\t\t\t\t\ttext: destination,\n\t\t\t\t}));\n\t\t\t}\n\n\t\t\tnodes.push(detailNode);\n\n\t\t\tconst sliderLinkNode = BX.create('A', {\n\t\t\t\tattrs: {href: \"#\"},\n\t\t\t\ttext: this.getMessage('orderPaymentProcess'),\n\t\t\t\tevents: {\n\t\t\t\t\tclick: BX.proxy(this.startSalescenterApplication, this),\n\t\t\t\t},\n\t\t\t});\n\t\t\tnodes.push(sliderLinkNode);\n\t\t}\n\n\t\treturn nodes;\n\t}\n\n\tstartSalescenterApplication()\n\t{\n\t\tBX.loadExt('salescenter.manager').then(function()\n\t\t{\n\t\t\tconst fields = this.getObjectDataParam('FIELDS'),\n\t\t\t\townerTypeId = BX.prop.get(fields, 'OWNER_TYPE_ID', BX.CrmEntityType.enumeration.deal);\n\t\t\tlet ownerId = BX.prop.get(fields, 'OWNER_ID', 0);\n\t\t\tconst paymentId = BX.prop.get(fields, 'PAYMENT_ID', 0),\n\t\t\t\tshipmentId = BX.prop.get(fields, 'SHIPMENT_ID', 0),\n\t\t\t\torderId = BX.prop.get(fields, 'ORDER_ID', 0)\n\t\t\t;\n\n\t\t\t// compatibility\n\t\t\tif (!ownerId)\n\t\t\t{\n\t\t\t\townerId = BX.prop.get(fields, 'DEAL_ID', 0);\n\t\t\t}\n\n\t\t\tBX.Salescenter.Manager.openApplication({\n\t\t\t\tdisableSendButton: '',\n\t\t\t\tcontext: 'deal',\n\t\t\t\townerTypeId: ownerTypeId,\n\t\t\t\townerId: ownerId,\n\t\t\t\tmode: ownerTypeId === BX.CrmEntityType.enumeration.deal ? 'payment_delivery' : 'payment',\n\t\t\t\ttemplateMode: 'view',\n\t\t\t\torderId: orderId,\n\t\t\t\tpaymentId: paymentId,\n\t\t\t\tshipmentId: shipmentId,\n\t\t\t});\n\t\t}.bind(this));\n\t}\n\n\tpreparePaidPaymentContentDetails()\n\t{\n\t\tconst entityData = this.getAssociatedEntityData(),\n\t\t\ttitle = BX.prop.getString(entityData, \"TITLE\"),\n\t\t\tdate = BX.prop.getString(entityData, \"DATE\", \"\"),\n\t\t\tpaySystemName = BX.prop.getString(entityData, \"PAY_SYSTEM_NAME\", \"\"),\n\t\t\tsum = BX.prop.getString(entityData, 'SUM', ''),\n\t\t\tcurrency = BX.prop.getString(entityData, 'CURRENCY', ''),\n\t\t\tnodes = [];\n\n\t\tif(title !== \"\")\n\t\t{\n\t\t\tconst paymentDetail = BX.create(\"DIV\", {attrs: {className: \"crm-entity-stream-content-detail-payment\"}});\n\t\t\tpaymentDetail.appendChild(\n\t\t\t\tBX.create(\"DIV\", {\n\t\t\t\t\tattrs: { className: \"crm-entity-stream-content-detail-payment-value\"},\n\t\t\t\t\tchildren: [\n\t\t\t\t\t\tBX.create('SPAN', {\n\t\t\t\t\t\t\tattrs: { className: \"crm-entity-stream-content-detail-payment-text\"},\n\t\t\t\t\t\t\thtml: sum,\n\t\t\t\t\t\t}),\n\t\t\t\t\t\tBX.create('SPAN', {\n\t\t\t\t\t\t\tattrs: { className: \"crm-entity-stream-content-detail-payment-currency\"},\n\t\t\t\t\t\t\thtml: currency,\n\t\t\t\t\t\t}),\n\t\t\t\t\t]\n\t\t\t\t})\n\t\t\t);\n\n\t\t\tconst logotip = BX.prop.getString(entityData, \"LOGOTIP\", null);\n\t\t\tif (logotip)\n\t\t\t{\n\t\t\t\tpaymentDetail.appendChild(\n\t\t\t\t\tBX.create(\"DIV\", {\n\t\t\t\t\t\tattrs: { className: \"crm-entity-stream-content-detail-payment-logo\"},\n\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\tbackgroundImage: \"url(\" + encodeURI(logotip) + \")\",\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t}\n\t\t\tnodes.push(paymentDetail);\n\n\t\t\tconst descriptionNode = BX.create(\"DIV\", {\n\t\t\t\tattrs: {className: \"crm-entity-stream-content-detail-description\"},\n\t\t\t\tchildren: [\n\t\t\t\t\tBX.create('SPAN', {\n\t\t\t\t\t\ttext: date\n\t\t\t\t\t}),\n\t\t\t\t\tBX.create('SPAN', {\n\t\t\t\t\t\tattrs: {className: \"crm-entity-stream-content-detail-description-info\"},\n\t\t\t\t\t\ttext: this.getMessage('orderPaySystemTitle')\n\t\t\t\t\t}),\n\t\t\t\t\tBX.create('SPAN', {\n\t\t\t\t\t\ttext: paySystemName\n\t\t\t\t\t}),\n\t\t\t\t]\n\t\t\t});\n\t\t\tnodes.push(descriptionNode);\n\t\t}\n\n\t\treturn nodes;\n\t}\n\n\tprepareContent()\n\t{\n\t\tconst fields = this.getObjectDataParam('FIELDS'),\n\t\t\tisPaid = BX.prop.get(fields, 'ORDER_PAID') === 'Y',\n\t\t\tisClick = BX.prop.get(fields, 'PAY_SYSTEM_CLICK') === 'Y',\n\t\t\tisManualContinuePay = BX.prop.get(fields, 'MANUAL_CONTINUE_PAY') === 'Y',\n\t\t\tisManualAddCheck = BX.prop.get(fields, 'NEED_MANUAL_ADD_CHECK') === 'Y',\n\t\t\tentityId = this.getAssociatedEntityTypeId();\n\n\t\tif (entityId === BX.CrmEntityType.enumeration.orderpayment && isPaid)\n\t\t{\n\t\t\treturn this.preparePaidPaymentContent();\n\t\t}\n\t\telse if (entityId === BX.CrmEntityType.enumeration.orderpayment && isClick)\n\t\t{\n\t\t\treturn this.prepareClickedPaymentContent();\n\t\t}\n\t\telse if (entityId === BX.CrmEntityType.enumeration.order && isManualContinuePay)\n\t\t{\n\t\t\treturn this.prepareManualContinuePayContent();\n\t\t}\n\t\telse if (entityId === BX.CrmEntityType.enumeration.orderpayment && isManualAddCheck)\n\t\t{\n\t\t\treturn this.prepareManualAddCheck();\n\t\t}\n\n\t\treturn this.prepareItemOrderContent();\n\t}\n\n\tprepareItemOrderContent()\n\t{\n\t\tconst entityData = this.getAssociatedEntityData();\n\t\tconst isViewed = BX.prop.getString(entityData, \"VIEWED\", '') === 'Y';\n\t\tconst isSent = BX.prop.getString(entityData, \"SENT\", '') === 'Y';\n\t\tconst fields = this.getObjectDataParam('FIELDS');\n\t\tconst psStatusCode = BX.prop.get(fields, 'STATUS_CODE', false);\n\n\t\tconst wrapper = BX.create(\"DIV\", {attrs: {className: 'crm-entity-stream-section crm-entity-stream-section-history'}});\n\t\twrapper.appendChild(\n\t\t\tBX.create(\"DIV\", { attrs: { className: 'crm-entity-stream-section-icon ' + this.getIconClassName() } })\n\t\t);\n\n\t\tconst content = BX.create(\"DIV\", {attrs: {className: \"crm-entity-stream-content-event\"}});\n\t\tconst header = BX.create(\"DIV\",\n\t\t\t{\n\t\t\t\tattrs: {className: \"crm-entity-stream-content-header\"},\n\t\t\t\tchildren: this.getHeaderChildren()\n\t\t\t});\n\n\t\tlet contentChildren = null;\n\t\tif (isViewed)\n\t\t{\n\t\t\tcontentChildren = this.prepareViewedContentDetails();\n\t\t}\n\t\telse if (isSent)\n\t\t{\n\t\t\tcontentChildren = this.prepareSentContentDetails();\n\t\t}\n\t\telse if (psStatusCode === 'ERROR')\n\t\t{\n\t\t\tcontentChildren = this.prepareErrorPaymentContentDetails();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tcontentChildren = this.prepareContentDetails();\n\t\t}\n\n\t\tcontent.appendChild(header);\n\t\tcontent.appendChild(\n\t\t\tBX.create(\"DIV\",\n\t\t\t\t{\n\t\t\t\t\tattrs: { className: \"crm-entity-stream-content-detail\" },\n\t\t\t\t\tchildren: contentChildren\n\t\t\t\t})\n\t\t);\n\n\t\t//region Author\n\t\tconst authorNode = this.prepareAuthorLayout();\n\t\tif(authorNode)\n\t\t{\n\t\t\tcontent.appendChild(authorNode);\n\t\t}\n\t\t//endregion\n\n\t\twrapper.appendChild(\n\t\t\tBX.create(\"DIV\", { attrs: { className: \"crm-entity-stream-section-content\" }, children: [ content ] })\n\t\t);\n\n\t\treturn wrapper;\n\t}\n\n\tpreparePaidPaymentContent()\n\t{\n\t\tconst wrapper = BX.create(\"DIV\", {attrs: {className: 'crm-entity-stream-section'}});\n\t\twrapper.appendChild(\n\t\t\tBX.create(\"DIV\", { attrs: { className: 'crm-entity-stream-section-icon crm-entity-stream-section-icon-wallet' } })\n\t\t);\n\n\t\tconst header = [\n\t\t\tBX.create(\"DIV\",\n\t\t\t\t{\n\t\t\t\t\tattrs: {className: \"crm-entity-stream-content-event-title\"},\n\t\t\t\t\tchildren:\n\t\t\t\t\t\t[\n\t\t\t\t\t\t\tBX.create(\"A\",\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tattrs: {href: \"#\"},\n\t\t\t\t\t\t\t\t\tevents: {click: this._headerClickHandler},\n\t\t\t\t\t\t\t\t\ttext: this.getMessage('orderPaymentSuccessTitle')\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t)\n\t\t];\n\t\theader.push(\n\t\t\tBX.create(\"SPAN\",\n\t\t\t\t{\n\t\t\t\t\tattrs: { className: \"crm-entity-stream-content-event-time\" },\n\t\t\t\t\ttext: this.formatTime(this.getCreatedTime())\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\n\t\tconst content = BX.create(\"DIV\", {attrs: {className: \"crm-entity-stream-content-event\"}});\n\t\tconst headerWrap = BX.create(\"DIV\", {\n\t\t\tattrs: {className: \"crm-entity-stream-content-header\"},\n\t\t\tchildren: header\n\t\t});\n\n\t\tconst contentChildren = this.preparePaidPaymentContentDetails();\n\t\tcontent.appendChild(headerWrap);\n\t\tcontent.appendChild(\n\t\t\tBX.create(\"DIV\",\n\t\t\t\t{\n\t\t\t\t\tattrs: { className: \"crm-entity-stream-content-detail\" },\n\t\t\t\t\tchildren: contentChildren\n\t\t\t\t})\n\t\t);\n\n\t\t//region Author\n\t\tconst authorNode = this.prepareAuthorLayout();\n\t\tif(authorNode)\n\t\t{\n\t\t\tcontent.appendChild(authorNode);\n\t\t}\n\t\t//endregion\n\n\t\twrapper.appendChild(\n\t\t\tBX.create(\"DIV\", { attrs: { className: \"crm-entity-stream-section-content\" }, children: [ content ] })\n\t\t);\n\n\t\treturn wrapper;\n\t}\n\n\tprepareErrorPaymentContentDetails()\n\t{\n\t\tconst entityData = this.getAssociatedEntityData(),\n\t\t\tdate = BX.prop.getString(entityData, 'DATE', ''),\n\t\t\tfields = this.getObjectDataParam('FIELDS'),\n\t\t\tpaySystemName = BX.prop.getString(fields, 'PAY_SYSTEM_NAME', ''),\n\t\t\tpaySystemError = BX.prop.getString(fields, 'STATUS_DESCRIPTION', ''),\n\t\t\tnodes = [];\n\n\t\tconst descriptionNode = BX.create('DIV', {\n\t\t\tattrs: {className: 'crm-entity-stream-content-detail-description'},\n\t\t\tchildren: [\n\t\t\t\tBX.create('SPAN', {\n\t\t\t\t\ttext: date\n\t\t\t\t}),\n\t\t\t\tBX.create('SPAN', {\n\t\t\t\t\tattrs: {className: 'crm-entity-stream-content-detail-description-info'},\n\t\t\t\t\ttext: this.getMessage('orderPaySystemTitle')\n\t\t\t\t}),\n\t\t\t\tBX.create('SPAN', {\n\t\t\t\t\ttext: paySystemName\n\t\t\t\t}),\n\t\t\t]\n\t\t});\n\t\tnodes.push(descriptionNode);\n\n\t\tconst errorDetailNode = BX.create('DIV', {\n\t\t\tattrs: {className: 'crm-entity-stream-content-event-payment-initiate-pay-error'},\n\t\t\ttext: this.getMessage('orderPaymentStatusErrorReason').replace(\"#PAYSYSTEM_ERROR#\", paySystemError),\n\t\t});\n\n\t\tnodes.push(errorDetailNode);\n\n\t\treturn nodes;\n\t}\n\n\tprepareClickedPaymentContent()\n\t{\n\t\tconst wrapper = BX.create(\"DIV\", {attrs: {className: 'crm-entity-stream-section crm-entity-stream-section-history'}});\n\t\twrapper.appendChild(\n\t\t\tBX.create(\"DIV\", { attrs: { className: 'crm-entity-stream-section-icon ' + this.getIconClassName() } })\n\t\t);\n\n\t\tconst header = [\n\t\t\tBX.create(\"DIV\",\n\t\t\t\t{\n\t\t\t\t\tattrs: {className: \"crm-entity-stream-content-event-title\"},\n\t\t\t\t\tchildren:\n\t\t\t\t\t\t[\n\t\t\t\t\t\t\tBX.create(\"A\",\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tattrs: {href: \"#\"},\n\t\t\t\t\t\t\t\t\tevents: {click: this._headerClickHandler},\n\t\t\t\t\t\t\t\t\ttext: this.getTitle(),\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t)\n\t\t];\n\t\theader.push(\n\t\t\tBX.create(\"SPAN\",\n\t\t\t\t{\n\t\t\t\t\tattrs: { className: \"crm-entity-stream-content-event-time\" },\n\t\t\t\t\ttext: this.formatTime(this.getCreatedTime())\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\n\t\tconst content = BX.create(\"DIV\", {attrs: {className: \"crm-entity-stream-content-event\"}});\n\t\tconst headerWrap = BX.create(\"DIV\", {\n\t\t\tattrs: {className: \"crm-entity-stream-content-header\"},\n\t\t\tchildren: header\n\t\t});\n\n\t\tconst contentChildren = this.prepareClickedPaymentContentDetails();\n\t\tcontent.appendChild(headerWrap);\n\t\tcontent.appendChild(\n\t\t\tBX.create(\"DIV\",\n\t\t\t\t{\n\t\t\t\t\tattrs: { className: \"crm-entity-stream-content-detail\" },\n\t\t\t\t\tchildren: contentChildren\n\t\t\t\t})\n\t\t);\n\n\t\t//region Author\n\t\tconst authorNode = this.prepareAuthorLayout();\n\t\tif(authorNode)\n\t\t{\n\t\t\tcontent.appendChild(authorNode);\n\t\t}\n\t\t//endregion\n\n\t\twrapper.appendChild(\n\t\t\tBX.create(\"DIV\", { attrs: { className: \"crm-entity-stream-section-content\" }, children: [ content ] })\n\t\t);\n\n\t\treturn wrapper;\n\t}\n\n\tprepareClickedPaymentContentDetails()\n\t{\n\t\tconst fields = this.getObjectDataParam('FIELDS'),\n\t\t\tpaySystemName = BX.prop.getString(fields, 'PAY_SYSTEM_NAME', ''),\n\t\t\tnodes = [];\n\n\t\tif(paySystemName !== '')\n\t\t{\n\t\t\tconst descriptionNode = BX.create(\"DIV\", {attrs: {className: \"crm-entity-stream-content-detail-description\"}});\n\t\t\tdescriptionNode.appendChild(\n\t\t\t\tBX.create('SPAN', {\n\t\t\t\t\tattrs: { className: \"crm-entity-stream-content-clicked-description-info\" },\n\t\t\t\t\ttext: this.getMessage('orderPaymentPaySystemClick')\n\t\t\t\t})\n\t\t\t);\n\t\t\tdescriptionNode.appendChild(\n\t\t\t\tBX.create('SPAN', {\n\t\t\t\t\tattrs: { className: \"crm-entity-stream-content-clicked-description-name\" },\n\t\t\t\t\ttext: paySystemName\n\t\t\t\t})\n\t\t\t);\n\n\t\t\tnodes.push(descriptionNode);\n\t\t}\n\n\t\treturn nodes;\n\t}\n\n\tprepareManualContinuePayContent()\n\t{\n\t\tconst wrapper = BX.create(\"DIV\", {attrs: {className: 'crm-entity-stream-section crm-entity-stream-section-advice'}});\n\t\twrapper.appendChild(\n\t\t\tBX.create(\"DIV\", { attrs: { className: 'crm-entity-stream-section-icon crm-entity-stream-section-icon-advice' } })\n\t\t);\n\n\t\tconst content = BX.create(\"DIV\", {\n\t\t\tattrs: {className: \"crm-entity-stream-advice-info\"},\n\t\t\ttext: this.getMessage('orderManualContinuePay'),\n\t\t});\n\n\t\twrapper.appendChild(\n\t\t\tBX.create(\"DIV\", { attrs: { className: \"crm-entity-stream-advice-content\" }, children: [ content ] })\n\t\t);\n\n\t\treturn wrapper;\n\t}\n\n\tprepareManualAddCheck()\n\t{\n\t\tconst entityData = this.getAssociatedEntityData();\n\t\tconst showUrl = BX.prop.getString(entityData, \"SHOW_URL\", \"\");\n\n\t\tconst wrapper = BX.create(\n\t\t\t\"DIV\",\n\t\t\t{\n\t\t\t\tattrs: {\n\t\t\t\t\tclassName: 'crm-entity-stream-section crm-entity-stream-section-advice'\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t\twrapper.appendChild(\n\t\t\tBX.create(\n\t\t\t\t\"DIV\",\n\t\t\t\t{\n\t\t\t\t\tattrs: {\n\t\t\t\t\t\tclassName: 'crm-entity-stream-section-icon crm-entity-stream-section-icon-advice'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\n\t\tconst htmlTitle = this.getMessage('orderManualAddCheck').replace(\"#HREF#\", showUrl);\n\t\tconst content = BX.create(\n\t\t\t\"DIV\",\n\t\t\t{\n\t\t\t\tattrs: {\n\t\t\t\t\tclassName: \"crm-entity-stream-advice-info\",\n\t\t\t\t},\n\t\t\t\thtml: htmlTitle,\n\t\t\t}\n\t\t);\n\n\t\tconst link = BX.create(\n\t\t\t\"DIV\",\n\t\t\t{\n\t\t\t\tattrs: {\n\t\t\t\t\tclassName: \"crm-entity-stream-advice-info\",\n\t\t\t\t},\n\t\t\t\tchildren: [\n\t\t\t\t\tBX.create(\n\t\t\t\t\t\t\"A\",\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tattrs: {\n\t\t\t\t\t\t\t\tclassName: \"crm-entity-stream-content-detail-target\",\n\t\t\t\t\t\t\t\thref: \"#\",\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\t\tclick: BX.delegate(function (e) {\n\t\t\t\t\t\t\t\t\ttop.BX.Helper.show('redirect=detail&code=13742126');\n\t\t\t\t\t\t\t\t\te.preventDefault ? e.preventDefault() : (e.returnValue = false);\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\thtml: this.getMessage('orderManualAddCheckHelpLink'),\n\t\t\t\t\t\t}\n\t\t\t\t\t)\n\t\t\t\t]\n\t\t\t}\n\t\t);\n\n\t\twrapper.appendChild(\n\t\t\tBX.create(\n\t\t\t\t\"DIV\",\n\t\t\t\t{\n\t\t\t\t\tattrs: {\n\t\t\t\t\t\tclassName: \"crm-entity-stream-advice-content\"\n\t\t\t\t\t},\n\t\t\t\t\tchildren: [ content, link ]\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\n\t\treturn wrapper;\n\t}\n\n\tgetIconClassName()\n\t{\n\t\treturn 'crm-entity-stream-section-icon-store';\n\t}\n\n\tstatic create(id, settings)\n\t{\n\t\tconst self = new OrderModification();\n\t\tself.initialize(id, settings);\n\t\treturn self;\n\t}\n\n\tstatic messages = {};\n}\n","import OrderCreation from \"./order-creation\";\n\n/** @memberof BX.Crm.Timeline.Actions */\nexport default class StoreDocumentCreation extends OrderCreation\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\t}\n\n\tdoInitialize()\n\t{\n\t\tsuper.doInitialize();\n\t\tif(!(this._activityEditor instanceof BX.CrmActivityEditor))\n\t\t{\n\t\t\tthrow \"StoreDocumentCreation. The field 'activityEditor' is not assigned.\";\n\t\t}\n\t}\n\n\tgetIconClassName()\n\t{\n\t\treturn \"crm-entity-stream-section-icon crm-entity-stream-section-icon-info\";\n\t}\n\n\tgetTitle()\n\t{\n\t\tconst entityData = this.getAssociatedEntityData();\n\t\tconst docType = BX.prop.getString(entityData, \"DOC_TYPE\");\n\t\tif (docType === 'A')\n\t\t{\n\t\t\treturn this.getMessage('arrivalDocument');\n\t\t}\n\t\tif (docType === 'S')\n\t\t{\n\t\t\treturn this.getMessage('storeAdjustmentDocument');\n\t\t}\n\t\tif (docType === 'M')\n\t\t{\n\t\t\treturn this.getMessage('movingDocument');\n\t\t}\n\t\tif (docType === 'D')\n\t\t{\n\t\t\treturn this.getMessage('deductDocument');\n\t\t}\n\t\tif (docType === 'W')\n\t\t{\n\t\t\treturn this.getMessage('shipmentDocument');\n\t\t}\n\n\t\treturn '';\n\t}\n\n\tgetWrapperClassName()\n\t{\n\t\treturn \"crm-entity-stream-section-createStoreDocumentEntity\";\n\t}\n\n\tprepareContentDetails()\n\t{\n\t\tconst entityData = this.getAssociatedEntityData();\n\t\tconst title = BX.prop.getString(entityData, \"TITLE\", \"\");\n\t\tconst nodes = [];\n\n\t\tif(title === '')\n\t\t{\n\t\t\treturn nodes;\n\t\t}\n\n\t\tconst titleNode = BX.create('span', {text: title});\n\t\tconst nodeText = title;\n\n\t\tconst titleTemplate = BX.prop.getString(this._data, 'TITLE_TEMPLATE', '');\n\t\tif (titleTemplate)\n\t\t{\n\t\t\tconst docType = BX.prop.getString(entityData, \"DOC_TYPE\");\n\t\t\tif (docType === 'W')\n\t\t\t{\n\t\t\t\tif (this.getOwnerTypeId() === BX.CrmEntityType.enumeration.deal)\n\t\t\t\t{\n\t\t\t\t\tconst documentDetailUrl = BX.prop.getString(this._data, 'DETAIL_LINK', '');\n\t\t\t\t\tconst documentLinkTag = '<a href=\"' + documentDetailUrl + '\">' + title + '</a>';\n\t\t\t\t\ttitleNode.innerHTML = titleTemplate.replace('#TITLE#', documentLinkTag);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\ttitleNode.innerHTML = titleTemplate.replace('#TITLE#', title);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\ttitleNode.innerHTML = titleTemplate.replace('#TITLE#', title);\n\t\t\t}\n\t\t}\n\n\t\tnodes.push(BX.create(\"DIV\", {\n\t\t\tattrs: { className: \"crm-entity-stream-content-detail-description\" },\n\t\t\tchildren: [titleNode],\n\t\t}));\n\n\t\treturn nodes;\n\t}\n\n\tgetMessage(name)\n\t{\n\t\tconst m = StoreDocumentCreation.messages;\n\t\treturn m.hasOwnProperty(name) ? m[name] : name;\n\t}\n\n\tstatic create(id, settings)\n\t{\n\t\tconst self = new StoreDocumentCreation();\n\t\tself.initialize(id, settings);\n\t\treturn self;\n\t}\n\n\tstatic messages = {};\n}\n","import Modification from \"./modification\";\n\n/** @memberof BX.Crm.Timeline.Items */\nexport default class StoreDocumentModification extends Modification\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\t}\n\n\tdoInitialize()\n\t{\n\t\tsuper.doInitialize();\n\t\tif(!(this._activityEditor instanceof BX.CrmActivityEditor))\n\t\t{\n\t\t\tthrow \"StoreDocumentModification. The field 'activityEditor' is not assigned.\";\n\t\t}\n\t}\n\n\tgetIconClassName()\n\t{\n\t\treturn \"crm-entity-stream-section-icon crm-entity-stream-section-icon-info\";\n\t}\n\n\tgetTitle()\n\t{\n\t\tconst error = this.getTextDataParam(\"ERROR\");\n\t\tif (error === 'CONDUCT')\n\t\t{\n\t\t\treturn this.getMessage('conductError');\n\t\t}\n\t\tconst entityData = this.getAssociatedEntityData();\n\t\tconst field = this.getTextDataParam(\"FIELD\");\n\t\tconst docType = BX.prop.getString(entityData, \"DOC_TYPE\");\n\t\tif (docType === 'A')\n\t\t{\n\t\t\tif (field === 'STATUS')\n\t\t\t{\n\t\t\t\treturn this.getMessage('arrivalDocument');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\treturn this.getMessage('arrivalModification');\n\t\t\t}\n\t\t}\n\t\tif (docType === 'S')\n\t\t{\n\t\t\tif (field === 'STATUS')\n\t\t\t{\n\t\t\t\treturn this.getMessage('storeAdjustmentDocument');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\treturn this.getMessage('storeAdjustmentModification');\n\t\t\t}\n\t\t}\n\t\tif (docType === 'M')\n\t\t{\n\t\t\tif (field === 'STATUS')\n\t\t\t{\n\t\t\t\treturn this.getMessage('movingDocument');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\treturn this.getMessage('movingModification');\n\t\t\t}\n\t\t}\n\t\tif (docType === 'D')\n\t\t{\n\t\t\tif (field === 'STATUS')\n\t\t\t{\n\t\t\t\treturn this.getMessage('deductDocument');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\treturn this.getMessage('deductModification');\n\t\t\t}\n\t\t}\n\t\tif (docType === 'W')\n\t\t{\n\t\t\tif (field === 'STATUS')\n\t\t\t{\n\t\t\t\treturn this.getMessage('shipmentDocument');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\treturn this.getMessage('shipmentModification');\n\t\t\t}\n\t\t}\n\n\t\treturn '';\n\t}\n\n\tgetStatusInfo()\n\t{\n\t\tconst statusInfo = {};\n\t\tconst statusName = this.getTextDataParam('STATUS_TITLE');\n\t\tconst classCode = this.getTextDataParam('STATUS_CLASS');\n\t\t{\n\t\t\tstatusInfo.message = statusName;\n\t\t\tstatusInfo.className = \"crm-entity-stream-content-event-\" + classCode;\n\t\t}\n\n\t\treturn statusInfo;\n\t}\n\n\tgetHeaderChildren()\n\t{\n\t\tconst children = [\n\t\t\tBX.create(\"DIV\",\n\t\t\t\t{\n\t\t\t\t\tattrs: {className: \"crm-entity-stream-content-event-title\"},\n\t\t\t\t\tevents: {click: this._headerClickHandler},\n\t\t\t\t\ttext: this.getTitle(),\n\t\t\t\t}\n\t\t\t)\n\t\t];\n\t\tconst statusInfo = this.getStatusInfo();\n\t\tif (BX.type.isNotEmptyObject(statusInfo))\n\t\t{\n\t\t\tchildren.push(\n\t\t\t\tBX.create(\"SPAN\",\n\t\t\t\t\t{\n\t\t\t\t\t\tattrs: { className: statusInfo.className },\n\t\t\t\t\t\ttext: statusInfo.message\n\t\t\t\t\t}\n\t\t\t\t));\n\t\t}\n\t\tchildren.push(\n\t\t\tBX.create(\"SPAN\",\n\t\t\t\t{\n\t\t\t\t\tattrs: { className: \"crm-entity-stream-content-event-time\" },\n\t\t\t\t\ttext: this.formatTime(this.getCreatedTime())\n\t\t\t\t}\n\t\t\t));\n\t\treturn children;\n\t}\n\n\tprepareContent()\n\t{\n\t\tconst wrapper = BX.create(\"DIV\", {attrs: {className: \"crm-entity-stream-section crm-entity-stream-section-history\"}});\n\n\t\twrapper.appendChild(\n\t\t\tBX.create(\"DIV\", { attrs: { className: \"crm-entity-stream-section-icon crm-entity-stream-section-icon-info\" } })\n\t\t);\n\n\t\tconst content = BX.create(\"DIV\", {attrs: {className: \"crm-entity-stream-content-event\"}});\n\t\tconst header = BX.create(\"DIV\",\n\t\t\t{\n\t\t\t\tattrs: {className: \"crm-entity-stream-content-header\"},\n\t\t\t\tchildren: this.getHeaderChildren()\n\t\t\t}\n\t\t);\n\n\t\tconst entityData = this.getAssociatedEntityData();\n\t\tconst title = BX.prop.getString(entityData, \"TITLE\", \"\");\n\t\tconst error = this.getTextDataParam(\"ERROR\");\n\t\tconst contentChildren = [];\n\n\t\tif(error)\n\t\t{\n\t\t\tconst errorMessage = this.getTextDataParam(\"ERROR_MESSAGE\");\n\t\t\tcontentChildren.push(BX.create(\"DIV\", {\n\t\t\t\tattrs: { className: \"crm-entity-stream-content-detail-description\" },\n\t\t\t\tchildren: errorMessage\n\t\t\t}));\n\t\t}\n\t\telse if(title !== \"\")\n\t\t{\n\t\t\tconst titleNode = BX.create('span', {text: title});\n\t\t\tconst nodeText = title;\n\n\t\t\tconst titleTemplate = BX.prop.getString(this._data, 'TITLE_TEMPLATE', '');\n\t\t\tif (titleTemplate)\n\t\t\t{\n\t\t\t\tconst docType = BX.prop.getString(entityData, \"DOC_TYPE\");\n\t\t\t\tif (docType === 'W')\n\t\t\t\t{\n\t\t\t\t\tif (this.getOwnerTypeId() === BX.CrmEntityType.enumeration.deal)\n\t\t\t\t\t{\n\t\t\t\t\t\tconst documentDetailUrl = BX.prop.getString(this._data, 'DETAIL_LINK', '');\n\t\t\t\t\t\tconst documentLinkTag = '<a href=\"' + documentDetailUrl + '\">' + title + '</a>';\n\t\t\t\t\t\ttitleNode.innerHTML = titleTemplate.replace('#TITLE#', documentLinkTag);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\ttitleNode.innerHTML = titleTemplate.replace('#TITLE#', title);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\ttitleNode.innerHTML = titleTemplate.replace('#TITLE#', title);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcontentChildren.push(BX.create(\"DIV\", {\n\t\t\t\tattrs: { className: \"crm-entity-stream-content-detail-description\" },\n\t\t\t\tchildren: [titleNode],\n\t\t\t}));\n\t\t}\n\n\t\tcontent.appendChild(header);\n\t\tcontent.appendChild(\n\t\t\tBX.create(\"DIV\",\n\t\t\t\t{\n\t\t\t\t\tattrs: { className: \"crm-entity-stream-content-detail\" },\n\t\t\t\t\tchildren:\n\t\t\t\t\t\t[\n\t\t\t\t\t\t\tBX.create(\"DIV\",\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tattrs: { className: \"crm-entity-stream-content-detail-info\" },\n\t\t\t\t\t\t\t\t\tchildren: contentChildren\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t]\n\t\t\t\t})\n\t\t);\n\n\t\t//region Author\n\t\tconst authorNode = this.prepareAuthorLayout();\n\t\tif(authorNode)\n\t\t{\n\t\t\tcontent.appendChild(authorNode);\n\t\t}\n\t\t//endregion\n\n\t\twrapper.appendChild(\n\t\t\tBX.create(\"DIV\", { attrs: { className: \"crm-entity-stream-section-content\" }, children: [ content ] })\n\t\t);\n\n\t\treturn wrapper;\n\t}\n\n\tgetMessage(name)\n\t{\n\t\tconst m = StoreDocumentModification.messages;\n\t\treturn m.hasOwnProperty(name) ? m[name] : name;\n\t}\n\n\tstatic create(id, settings)\n\t{\n\t\tconst self = new StoreDocumentModification();\n\t\tself.initialize(id, settings);\n\t\treturn self;\n\t}\n\n\tstatic messages = {};\n}\n","import OrderModification from \"./order-modification\";\n\n/** @memberof BX.Crm.Timeline.Items */\nexport default class ExternalNoticeModification extends OrderModification\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\t}\n\n\tgetIconClassName()\n\t{\n\t\treturn 'crm-entity-stream-section-icon-restApp';\n\t}\n\n\tstatic create(id, settings)\n\t{\n\t\tconst self = new ExternalNoticeModification();\n\t\tself.initialize(id, settings);\n\t\treturn self;\n\t}\n}\n","import ExternalNoticeModification from \"./external-notice-modification\";\n\n/** @memberof BX.Crm.Timeline.Items */\nexport default class ExternalNoticeStatusModification extends ExternalNoticeModification\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\t}\n\n\tprepareContentDetails()\n\t{\n\t\tconst nodes = [];\n\t\tconst contentChildren = [];\n\n\t\tif (BX.type.isNotEmptyString(this.getTextDataParam(\"START_NAME\")))\n\t\t{\n\t\t\tcontentChildren.push(\n\t\t\t\tBX.create(\"SPAN\",\n\t\t\t\t\t{\n\t\t\t\t\t\tattrs: {className: \"crm-entity-stream-content-detain-info-status\"},\n\t\t\t\t\t\ttext: this.getTextDataParam(\"START_NAME\")\n\t\t\t\t\t})\n\t\t\t);\n\t\t\tcontentChildren.push(\n\t\t\t\tBX.create(\"SPAN\",{ attrs: { className: \"crm-entity-stream-content-detail-info-separator-icon\" } })\n\t\t\t);\n\t\t}\n\n\t\tif (BX.type.isNotEmptyString(this.getTextDataParam(\"FINISH_NAME\")))\n\t\t{\n\t\t\tcontentChildren.push(\n\t\t\t\tBX.create(\"SPAN\",\n\t\t\t\t\t{\n\t\t\t\t\t\tattrs: { className: \"crm-entity-stream-content-detain-info-status\" },\n\t\t\t\t\t\ttext: this.getTextDataParam(\"FINISH_NAME\")\n\t\t\t\t\t})\n\t\t\t);\n\t\t}\n\n\t\tnodes.push(BX.create(\"DIV\",\t{\n\t\t\tattrs: { className: \"crm-entity-stream-content-detail-info\" },\n\t\t\tchildren: contentChildren\n\t\t}));\n\n\t\treturn nodes;\n\t}\n\n\tstatic create(id, settings)\n\t{\n\t\tconst self = new ExternalNoticeStatusModification();\n\t\tself.initialize(id, settings);\n\t\treturn self;\n\t}\n}\n","import History from \"./history\";\n\n/** @memberof BX.Crm.Timeline.Items */\nexport default class OrderCheck extends History\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\t}\n\n\tdoInitialize()\n\t{\n\t\tsuper.doInitialize();\n\t\tif(!(this._activityEditor instanceof BX.CrmActivityEditor))\n\t\t{\n\t\t\tthrow \"OrderCheck. The field 'activityEditor' is not assigned.\";\n\t\t}\n\t}\n\n\tgetTitle()\n\t{\n\t\tlet result = this.getMessage('orderCheck');\n\n\t\tconst checkName = this.getTextDataParam('CHECK_NAME');\n\t\tif (checkName !== '')\n\t\t{\n\t\t\tresult += ' \"' + checkName + '\"';\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tgetWrapperClassName()\n\t{\n\t\treturn \"crm-entity-stream-section-createOrderEntity\";\n\t}\n\n\tgetHeaderChildren()\n\t{\n\t\tlet statusMessage = '';\n\t\tlet statusClass = '';\n\t\tlet title = this.getTitle();\n\n\t\tif (this.getTextDataParam(\"SENDED\") !== '')\n\t\t{\n\t\t\ttitle = this.getMessage('sendedTitle');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tstatusMessage = this.getMessage(\"printed\");\n\t\t\tstatusClass = \"crm-entity-stream-content-event-successful\";\n\t\t\tif (this.getTextDataParam(\"PRINTED\") !== 'Y')\n\t\t\t{\n\t\t\t\tstatusMessage = this.getMessage(\"unprinted\");\n\t\t\t\tstatusClass = \"crm-entity-stream-content-event-missing\";\n\t\t\t}\n\t\t}\n\n\t\treturn [\n\t\t\tBX.create(\"DIV\",\n\t\t\t\t{\n\t\t\t\t\tattrs: { className: \"crm-entity-stream-content-event-title\" },\n\t\t\t\t\tchildren:\n\t\t\t\t\t\t[\n\t\t\t\t\t\t\tBX.create(\"A\",\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tattrs: { href: \"#\" },\n\t\t\t\t\t\t\t\t\tevents: { click: this._headerClickHandler },\n\t\t\t\t\t\t\t\t\ttext: title\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t),\n\t\t\tBX.create(\"SPAN\",\n\t\t\t\t{\n\t\t\t\t\tattrs: { className: statusClass },\n\t\t\t\t\ttext: statusMessage\n\t\t\t\t}\n\t\t\t),\n\t\t\tBX.create(\"SPAN\",\n\t\t\t\t{\n\t\t\t\t\tattrs: { className: \"crm-entity-stream-content-event-time\" },\n\t\t\t\t\ttext: this.formatTime(this.getCreatedTime())\n\t\t\t\t}\n\t\t\t)\n\t\t];\n\t}\n\n\tprepareContentDetails()\n\t{\n\t\tconst entityData = this.getAssociatedEntityData();\n\t\tconst title = this.getTextDataParam(\"TITLE\");\n\t\tconst showUrl = BX.prop.getString(entityData, \"SHOW_URL\", '');\n\t\tconst nodes = [];\n\t\tif(title !== \"\")\n\t\t{\n\t\t\tconst isSended = this.getTextDataParam(\"SENDED\") !== '';\n\t\t\tconst className = isSended\n\t\t\t\t? 'crm-entity-stream-content-detail-order'\n\t\t\t\t: 'crm-entity-stream-content-detail-description'\n\t\t\t;\n\n\t\t\tconst descriptionNode = BX.create(\"DIV\", {attrs: {className: className}});\n\t\t\tif (showUrl !== \"\")\n\t\t\t{\n\t\t\t\tdescriptionNode.appendChild(BX.create(\"A\", {\n\t\t\t\t\tattrs: { href: showUrl},\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tclick: BX.delegate(function(e) {\n\t\t\t\t\t\t\tBX.Crm.Page.openSlider(showUrl, { width: 500 });\n\t\t\t\t\t\t\te.preventDefault ? e.preventDefault() : (e.returnValue = false);\n\t\t\t\t\t\t}, this)\n\t\t\t\t\t},\n\t\t\t\t\ttext: title\n\t\t\t\t}));\n\t\t\t}\n\n\t\t\tconst legend = this.getTextDataParam(\"LEGEND\");\n\t\t\tlet legendNode;\n\t\t\tif(legend !== \"\")\n\t\t\t{\n\t\t\t\tlegendNode = BX.create(\"SPAN\", { html: \" \" + legend });\n\t\t\t}\n\n\t\t\tif (isSended)\n\t\t\t{\n\t\t\t\tnodes.push(descriptionNode);\n\t\t\t\tif (legendNode)\n\t\t\t\t{\n\t\t\t\t\tnodes.push(legendNode);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (legendNode)\n\t\t\t\t{\n\t\t\t\t\tdescriptionNode.appendChild(legendNode);\n\t\t\t\t}\n\t\t\t\tnodes.push(descriptionNode);\n\t\t\t}\n\t\t}\n\n\t\tconst checkUrl = this.getTextDataParam(\"CHECK_URL\");\n\t\tif (checkUrl)\n\t\t{\n\t\t\tnodes.push(\n\t\t\t\tBX.create(\"DIV\", {\n\t\t\t\t\tattrs: { className: 'crm-entity-stream-content-detail-payment-info' },\n\t\t\t\t\tchildren: [\n\t\t\t\t\t\tBX.create(\"A\", { attrs: { href: checkUrl, target: '_blank'}, text: this.getMessage('urlLink') })\n\t\t\t\t\t]\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\n\t\treturn nodes;\n\t}\n\n\tprepareContent()\n\t{\n\t\tconst wrapperClassName = \"crm-entity-stream-section crm-entity-stream-section-history crm-entity-stream-section-createOrderEntity\";\n\t\tconst wrapper = BX.create(\"DIV\", {attrs: {className: wrapperClassName}});\n\t\twrapper.appendChild(BX.create(\"DIV\", { attrs: { className: this.getIconClassName() } }));\n\n\t\tconst contentWrapper = BX.create(\"DIV\", {attrs: {className: \"crm-entity-stream-content-event\"}});\n\t\twrapper.appendChild(\n\t\t\tBX.create(\"DIV\",\n\t\t\t\t{ attrs: { className: \"crm-entity-stream-section-content\" }, children: [ contentWrapper ] }\n\t\t\t)\n\t\t);\n\n\t\tconst header = BX.create(\"DIV\",\n\t\t\t{\n\t\t\t\tattrs: {className: \"crm-entity-stream-content-header\"},\n\t\t\t\tchildren: this.getHeaderChildren()\n\t\t\t}\n\t\t);\n\t\tcontentWrapper.appendChild(header);\n\n\t\tcontentWrapper.appendChild(\n\t\t\tBX.create(\"DIV\",\n\t\t\t\t{\n\t\t\t\t\tattrs: { className: \"crm-entity-stream-content-detail\" },\n\t\t\t\t\tchildren: this.prepareContentDetails()\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\n\t\t//region Author\n\t\tconst authorNode = this.prepareAuthorLayout();\n\t\tif(authorNode)\n\t\t{\n\t\t\tcontentWrapper.appendChild(authorNode);\n\t\t}\n\t\t//endregion\n\n\t\treturn wrapper;\n\t}\n\n\tgetMessage(name)\n\t{\n\t\tconst m = OrderCheck.messages;\n\t\treturn m.hasOwnProperty(name) ? m[name] : name;\n\t}\n\n\tstatic create(id, settings)\n\t{\n\t\tconst self = new OrderCheck();\n\t\tself.initialize(id, settings);\n\t\treturn self;\n\t}\n\n\tstatic messages = {};\n}\n","import History from \"./history\";\n\n/** @memberof BX.Crm.Timeline.Items */\nexport default class FinalSummaryDocuments extends History\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\t}\n\n\tgetMessage(name)\n\t{\n\t\tconst m = FinalSummaryDocuments.messages;\n\t\treturn m.hasOwnProperty(name) ? m[name] : name;\n\t}\n\n\tgetTitle()\n\t{\n\t\treturn this.getMessage('title');\n\t}\n\n\tgetHeaderChildren()\n\t{\n\t\tconst children = [\n\t\t\tBX.create(\"DIV\",\n\t\t\t\t{\n\t\t\t\t\tattrs: {className: \"crm-entity-stream-content-event-title\"},\n\t\t\t\t\tchildren:\n\t\t\t\t\t\t[\n\t\t\t\t\t\t\tBX.create(\"A\",\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tattrs: {href: \"#\"},\n\t\t\t\t\t\t\t\t\tevents: {click: this._headerClickHandler},\n\t\t\t\t\t\t\t\t\ttext: this.getTitle()\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t)\n\t\t];\n\t\tchildren.push(\n\t\t\tBX.create(\"SPAN\",\n\t\t\t\t{\n\t\t\t\t\tattrs: { className: \"crm-entity-stream-content-event-time\" },\n\t\t\t\t\ttext: this.formatTime(this.getCreatedTime())\n\t\t\t\t}\n\t\t\t));\n\n\t\treturn children;\n\t}\n\n\tcreateCheckBlock(check)\n\t{\n\t\tconst blockNode = BX.create(\"DIV\", {attrs: {className: \"crm-entity-stream-content-detail-notice\"}});\n\t\tblockNode.appendChild(\n\t\t\tBX.create(\n\t\t\t\t\"a\",\n\t\t\t\t{\n\t\t\t\t\tattrs: { href: check.URL, target: '_blank' },\n\t\t\t\t\ttext: check.TITLE\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\n\t\treturn blockNode;\n\t}\n\n\tprepareContent()\n\t{\n\t\tconst wrapper = BX.create(\"DIV\", {attrs: {className: \"crm-entity-stream-section crm-entity-stream-section-payment\"}});\n\n\t\twrapper.appendChild(\n\t\t\tBX.create(\"DIV\", { attrs: { className: 'crm-entity-stream-section-icon ' + this.getIconClassName() } })\n\t\t);\n\n\t\tconst content = BX.create(\"DIV\", {attrs: {className: \"crm-entity-stream-section-content\"}});\n\n\t\tconst contentItem = BX.create(\"DIV\", {attrs: {className: \"crm-entity-stream-content-event\"}});\n\n\t\tconst header = BX.create(\"DIV\",\n\t\t\t{\n\t\t\t\tattrs: {className: \"crm-entity-stream-content-header\"},\n\t\t\t\tchildren: this.getHeaderChildren()\n\t\t\t});\n\t\tcontentItem.appendChild(header);\n\n\t\tconst data = this.getData();\n\n\t\tif (data.RESULT)\n\t\t{\n\t\t\tconst summaryOptions = {\n\t\t\t\t'OWNER_ID': data.ASSOCIATED_ENTITY_ID,\n\t\t\t\t'OWNER_TYPE_ID': data.ASSOCIATED_ENTITY_TYPE_ID,\n\t\t\t\t'PARENT_CONTEXT': this,\n\t\t\t\t'CONTEXT': BX.CrmEntityType.resolveName(data.ASSOCIATED_ENTITY_TYPE_ID).toLowerCase(),\n\t\t\t\t'IS_WITH_ORDERS_MODE': false,\n\t\t\t};\n\t\t\tconst timelineSummaryDocuments = new BX.Crm.TimelineSummaryDocuments(summaryOptions);\n\n\t\t\tconst options = data.RESULT.TIMELINE_SUMMARY_OPTIONS;\n\t\t\ttimelineSummaryDocuments.setOptions(options);\n\t\t\tconst nodes = [\n\t\t\t\ttimelineSummaryDocuments.render(),\n\t\t\t];\n\n\t\t\tcontentItem.appendChild(\n\t\t\t\tBX.create(\"DIV\",\n\t\t\t\t\t{\n\t\t\t\t\t\tattrs: {className: \"crm-entity-stream-content-detail\"},\n\t\t\t\t\t\tchildren: nodes\n\t\t\t\t\t})\n\t\t\t);\n\n\t\t\tcontent.appendChild(contentItem);\n\t\t}\n\t\t//region Author\n\t\tconst authorNode = this.prepareAuthorLayout();\n\t\tif(authorNode)\n\t\t{\n\t\t\tcontent.appendChild(authorNode);\n\t\t}\n\t\t//endregion\n\n\t\twrapper.appendChild(\n\t\t\tBX.create(\"DIV\", { attrs: { className: \"crm-entity-stream-section-content\" }, children: [ content ] })\n\t\t);\n\n\t\treturn wrapper;\n\t}\n\n\tgetIconClassName()\n\t{\n\t\treturn 'crm-entity-stream-section-icon-complete';\n\t}\n\n\tstartSalescenterApplication(orderId, options)\n\t{\n\t\tif (options === undefined)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tBX.loadExt('salescenter.manager').then(function()\n\t\t{\n\t\t\tBX.Salescenter.Manager.openApplication(options);\n\t\t}.bind(this));\n\t}\n\n\tstatic create(id, settings)\n\t{\n\t\tconst self = new FinalSummaryDocuments();\n\t\tself.initialize(id, settings);\n\t\treturn self;\n\t}\n\n\tstatic messages = {};\n}\n","import FinalSummaryDocuments from \"./final-summary-documents\";\n\n/** @memberof BX.Crm.Timeline.Items */\nexport default class FinalSummary extends FinalSummaryDocuments\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\t}\n\n\tprepareContent()\n\t{\n\t\tconst wrapper = BX.create(\"DIV\", {attrs: {className: \"crm-entity-stream-section crm-entity-stream-section-payment\"}});\n\n\t\twrapper.appendChild(\n\t\t\tBX.create(\"DIV\", { attrs: { className: 'crm-entity-stream-section-icon ' + this.getIconClassName() } })\n\t\t);\n\n\t\tconst content = BX.create(\"DIV\", {attrs: {className: \"crm-entity-stream-section-content\"}});\n\n\t\tconst contentItem = BX.create(\"DIV\", {attrs: {className: \"crm-entity-stream-content-event\"}});\n\n\t\tconst header = BX.create(\"DIV\",\n\t\t\t{\n\t\t\t\tattrs: {className: \"crm-entity-stream-content-header\"},\n\t\t\t\tchildren: this.getHeaderChildren()\n\t\t\t});\n\t\tcontentItem.appendChild(header);\n\n\t\tconst data = this.getData();\n\n\t\tif (data.RESULT)\n\t\t{\n\t\t\tconst summaryOptions = {\n\t\t\t\t'OWNER_ID': data.ASSOCIATED_ENTITY_ID,\n\t\t\t\t'OWNER_TYPE_ID': data.ASSOCIATED_ENTITY_TYPE_ID,\n\t\t\t\t'PARENT_CONTEXT': this,\n\t\t\t\t'CONTEXT': BX.CrmEntityType.resolveName(data.ASSOCIATED_ENTITY_TYPE_ID).toLowerCase(),\n\t\t\t\t'IS_WITH_ORDERS_MODE': true,\n\t\t\t};\n\t\t\tconst timelineSummaryDocuments = new BX.Crm.TimelineSummaryDocuments(summaryOptions);\n\n\t\t\tconst options = data.RESULT.TIMELINE_SUMMARY_OPTIONS;\n\t\t\ttimelineSummaryDocuments.setOptions(options);\n\t\t\tconst nodes = [\n\t\t\t\ttimelineSummaryDocuments.render(),\n\t\t\t];\n\n\t\t\tcontentItem.appendChild(\n\t\t\t\tBX.create(\"DIV\",\n\t\t\t\t\t{\n\t\t\t\t\t\tattrs: {className: \"crm-entity-stream-content-detail\"},\n\t\t\t\t\t\tchildren: nodes\n\t\t\t\t\t})\n\t\t\t);\n\n\t\t\tcontent.appendChild(contentItem);\n\t\t}\n\t\t//region Author\n\t\tconst authorNode = this.prepareAuthorLayout();\n\t\tif(authorNode)\n\t\t{\n\t\t\tcontent.appendChild(authorNode);\n\t\t}\n\t\t//endregion\n\n\t\twrapper.appendChild(\n\t\t\tBX.create(\"DIV\", { attrs: { className: \"crm-entity-stream-section-content\" }, children: [ content ] })\n\t\t);\n\n\t\treturn wrapper;\n\t}\n\n\tstatic create(id, settings)\n\t{\n\t\tconst self = new FinalSummary();\n\t\tself.initialize(id, settings);\n\t\treturn self;\n\t}\n}\n","import HistoryItem from \"./history\";\nimport {Item as ItemType} from \"../types\";\n\n/** @memberof BX.Crm.Timeline.Items */\nexport default class Creation extends HistoryItem\n{\n\tstatic messages = {};\n\n\tconstructor()\n\t{\n\t\tsuper();\n\t}\n\n\tstatic create(id, settings)\n\t{\n\t\tconst self = new Creation();\n\t\tself.initialize(id, settings);\n\t\treturn self;\n\t}\n\n\tdoInitialize()\n\t{\n\t\tsuper.doInitialize();\n\t\tif (!(this._activityEditor instanceof BX.CrmActivityEditor))\n\t\t{\n\t\t\tthrow \"Creation. The field 'activityEditor' is not assigned.\";\n\t\t}\n\t}\n\n\tgetTitle()\n\t{\n\t\tconst entityTypeId = this.getAssociatedEntityTypeId();\n\t\tconst entityData = this.getAssociatedEntityData();\n\t\tif (entityTypeId === BX.CrmEntityType.enumeration.activity)\n\t\t{\n\t\t\tconst typeId = BX.prop.getInteger(entityData, \"TYPE_ID\");\n\t\t\tconst title = this.getMessage(typeId === BX.CrmActivityType.task ? \"task\" : \"activity\");\n\t\t\treturn title.replace(/#TITLE#/gi, this.cutOffText(BX.prop.getString(entityData, \"SUBJECT\")), 64);\n\t\t}\n\n\t\tif (entityTypeId === BX.CrmEntityType.enumeration.storeDocument)\n\t\t{\n\t\t\tconst docType = BX.prop.getString(entityData, \"DOC_TYPE\");\n\t\t\tif (docType === 'A')\n\t\t\t{\n\t\t\t\treturn this.getMessage('arrivalDocument');\n\t\t\t}\n\t\t\tif (docType === 'S')\n\t\t\t{\n\t\t\t\treturn this.getMessage('storeAdjustmentDocument');\n\t\t\t}\n\t\t\tif (docType === 'M')\n\t\t\t{\n\t\t\t\treturn this.getMessage('movingDocument');\n\t\t\t}\n\t\t\tif (docType === 'D')\n\t\t\t{\n\t\t\t\treturn this.getMessage('deductDocument');\n\t\t\t}\n\t\t\tif (docType === 'W')\n\t\t\t{\n\t\t\t\treturn this.getMessage('shipmentDocument');\n\t\t\t}\n\n\t\t\treturn '';\n\t\t}\n\n\t\tconst entityTypeName = BX.CrmEntityType.resolveName(this.getAssociatedEntityTypeId()).toLowerCase();\n\t\tlet msg = this.getMessage(entityTypeName);\n\t\tconst isMessageNotFound = (msg === entityTypeName);\n\t\tif (!BX.type.isNotEmptyString(msg) || isMessageNotFound)\n\t\t{\n\t\t\tmsg = this.getTextDataParam(\"TITLE\");\n\t\t}\n\n\t\treturn msg;\n\t}\n\n\tgetWrapperClassName()\n\t{\n\t\treturn \"crm-entity-stream-section-createEntity\";\n\t}\n\n\tprepareContent()\n\t{\n\t\tconst entityTypeId = this.getAssociatedEntityTypeId();\n\n\t\tif (\n\t\t\tentityTypeId === BX.CrmEntityType.enumeration.ordershipment\n\t\t\t|| entityTypeId === BX.CrmEntityType.enumeration.orderpayment\n\t\t)\n\t\t{\n\t\t\tconst data = this.getData();\n\t\t\tdata.TYPE_CATEGORY_ID = ItemType.modification;\n\t\t\tif (data.hasOwnProperty('ASSOCIATED_ENTITY'))\n\t\t\t{\n\t\t\t\tdata.ASSOCIATED_ENTITY.HTML_TITLE = '';\n\t\t\t}\n\n\t\t\tconst createOrderEntityItem = this._history.createOrderEntityItem(data);\n\t\t\treturn createOrderEntityItem.prepareContent();\n\t\t}\n\n\t\treturn super.prepareContent();\n\t}\n\n\tprepareContentDetails()\n\t{\n\t\tconst entityTypeId = this.getAssociatedEntityTypeId();\n\t\tconst entityId = this.getAssociatedEntityId();\n\t\tconst entityData = this.getAssociatedEntityData();\n\n\t\tif (entityTypeId === BX.CrmEntityType.enumeration.activity)\n\t\t{\n\t\t\tconst link = BX.create(\"A\",\n\t\t\t\t{\n\t\t\t\t\tattrs: {href: \"#\"},\n\t\t\t\t\thtml: this.cutOffText(BX.prop.getString(entityData, \"DESCRIPTION_RAW\"), 128)\n\t\t\t\t}\n\t\t\t);\n\t\t\tBX.bind(link, \"click\", this._headerClickHandler);\n\n\t\t\treturn [link];\n\t\t}\n\n\t\tconst title = BX.prop.getString(entityData, \"TITLE\", \"\");\n\t\tlet htmlTitle = BX.prop.getString(entityData, \"HTML_TITLE\", \"\");\n\t\tconst showUrl = BX.prop.getString(entityData, \"SHOW_URL\", \"\");\n\n\t\tif (\n\t\t\tentityTypeId === BX.CrmEntityType.enumeration.deal\n\t\t\t&& BX.prop.getObject(entityData, \"ORDER\", null)\n\t\t)\n\t\t{\n\t\t\tconst orderData = BX.prop.getObject(entityData, \"ORDER\", null);\n\t\t\thtmlTitle = this.getMessage('dealOrderTitle')\n\t\t\t\t.replace(\"#ORDER_ID#\", orderData.ID)\n\t\t\t\t.replace(\"#DATE_TIME#\", orderData.ORDER_DATE)\n\t\t\t\t.replace(\"#HREF#\", orderData.SHOW_URL)\n\t\t\t\t.replace(\"#PRICE_WITH_CURRENCY#\", orderData.SUM)\n\t\t\t;\n\t\t}\n\n\t\tif (title !== \"\" || htmlTitle !== \"\")\n\t\t{\n\t\t\tconst nodes = [];\n\t\t\tif (showUrl === \"\" || (entityTypeId === this.getOwnerTypeId() && entityId === this.getOwnerId()))\n\t\t\t{\n\t\t\t\tconst spanAttrs = (htmlTitle !== \"\") ? {html: htmlTitle} : {text: title};\n\t\t\t\tnodes.push(BX.create(\"SPAN\", spanAttrs));\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tlet linkAttrs = {attrs: {href: showUrl}, text: title};\n\t\t\t\tif (htmlTitle !== \"\")\n\t\t\t\t{\n\t\t\t\t\tlinkAttrs = {attrs: {href: showUrl}, html: htmlTitle};\n\t\t\t\t}\n\t\t\t\tnodes.push(BX.create(\"A\", linkAttrs));\n\t\t\t}\n\n\t\t\tconst legend = this.getTextDataParam(\"LEGEND\");\n\t\t\tif (legend !== \"\")\n\t\t\t{\n\t\t\t\tnodes.push(BX.create(\"BR\"));\n\t\t\t\tnodes.push(BX.create(\"SPAN\", {text: legend}));\n\t\t\t}\n\n\t\t\tconst baseEntityData = this.getObjectDataParam(\"BASE\");\n\t\t\tconst baseEntityInfo = BX.prop.getObject(baseEntityData, \"ENTITY_INFO\");\n\t\t\tif (baseEntityInfo)\n\t\t\t{\n\t\t\t\tnodes.push(BX.create(\"BR\"));\n\t\t\t\tnodes.push(BX.create(\"SPAN\", {text: BX.prop.getString(baseEntityData, \"CAPTION\") + \": \"}));\n\t\t\t\tnodes.push(\n\t\t\t\t\tBX.create(\"A\",\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tattrs: {href: BX.prop.getString(baseEntityInfo, \"SHOW_URL\", \"#\")},\n\t\t\t\t\t\t\ttext: BX.prop.getString(baseEntityInfo, \"TITLE\", \"\")\n\t\t\t\t\t\t}\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t}\n\t\t\treturn nodes;\n\t\t}\n\t\treturn [];\n\t}\n\n\tview()\n\t{\n\t\tconst entityTypeId = this.getAssociatedEntityTypeId();\n\t\tif (entityTypeId === BX.CrmEntityType.enumeration.activity)\n\t\t{\n\t\t\tconst entityData = this.getAssociatedEntityData();\n\t\t\tconst id = BX.prop.getInteger(entityData, \"ID\", 0);\n\t\t\tif (id > 0)\n\t\t\t{\n\t\t\t\tthis._activityEditor.viewActivity(id);\n\t\t\t}\n\t\t}\n\t}\n\n\tgetMessage(name)\n\t{\n\t\tconst m = Creation.messages;\n\n\t\treturn m.hasOwnProperty(name) ? m[name] : name;\n\t}\n}\n","import History from \"./history\";\n\n/** @memberof BX.Crm.Timeline.Items */\nexport default class Restoration extends History\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\t}\n\n\tgetTitle()\n\t{\n\t\treturn this.getTextDataParam(\"TITLE\");\n\t}\n\n\tgetWrapperClassName()\n\t{\n\t\treturn \"crm-entity-stream-section-restoreEntity\";\n\t}\n\n\tprepareContentDetails()\n\t{\n\t\tconst entityData = this.getAssociatedEntityData();\n\t\tconst title = BX.prop.getString(entityData, \"TITLE\");\n\t\treturn title !== \"\" ?  [ BX.create(\"SPAN\", { text: title }) ] : [];\n\t}\n\n\tgetMessage(name)\n\t{\n\t\tconst m = Restoration.messages;\n\t\treturn m.hasOwnProperty(name) ? m[name] : name;\n\t}\n\n\tstatic create(id, settings)\n\t{\n\t\tconst self = new Restoration();\n\t\tself.initialize(id, settings);\n\t\treturn self;\n\t}\n\n\tstatic messages = {};\n}\n","import History from \"./history\";\n\n/** @memberof BX.Crm.Timeline.Items */\nexport default class Relation extends History\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\t}\n\n\tgetTitle()\n\t{\n\t\treturn this.getMessage('title');\n\t}\n\n\tgetWrapperClassName()\n\t{\n\t\treturn \"crm-entity-stream-section-createEntity\";\n\t}\n\n\tprepareContentDetails()\n\t{\n\t\tconst entityData = this.getAssociatedEntityData();\n\n\t\tlet link = BX.prop.getString(entityData, \"SHOW_URL\", \"\");\n\t\tif (link.indexOf('/') !== 0)\n\t\t{\n\t\t\tlink = '#';\n\t\t}\n\n\t\tconst content =\n\t\t\tthis.getMessage('contentTemplate')\n\t\t\t\t.replace('#ENTITY_TYPE_CAPTION#', BX.Text.encode(BX.prop.getString(entityData, 'ENTITY_TYPE_CAPTION', '')))\n\t\t\t\t.replace('#LEGEND#', '')\n\t\t\t\t.replace('#LINK#', BX.Text.encode(link))\n\t\t\t\t.replace('#LINK_TITLE#', BX.Text.encode(BX.prop.getString(entityData, \"TITLE\", '')))\n\t\t;\n\n\t\tconst nodes = [];\n\t\tnodes.push(\n\t\t\tBX.create('SPAN', { html: content })\n\t\t);\n\n\t\treturn nodes;\n\t}\n}\n","import Relation from \"./relation\"\n\n/** @memberof BX.Crm.Timeline.Items */\nexport default class Link extends Relation\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\t}\n\n\tgetIconClassName()\n\t{\n\t\treturn \"crm-entity-stream-section-icon crm-entity-stream-section-icon-link\";\n\t}\n\n\tgetMessage(name)\n\t{\n\t\tconst m = Link.messages;\n\t\treturn m.hasOwnProperty(name) ? m[name] : name;\n\t}\n\n\tstatic create(id, settings)\n\t{\n\t\tconst self = new Link();\n\t\tself.initialize(id, settings);\n\t\treturn self;\n\t}\n\n\tstatic messages = {};\n}\n","import Relation from \"./relation\";\n\n/** @memberof BX.Crm.Timeline.Items */\nexport default class Unlink extends Relation\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\t}\n\n\tgetIconClassName()\n\t{\n\t\treturn \"crm-entity-stream-section-icon crm-entity-stream-section-icon-unlink\";\n\t}\n\n\tgetMessage(name)\n\t{\n\t\tconst m = Unlink.messages;\n\t\treturn m.hasOwnProperty(name) ? m[name] : name;\n\t}\n\n\tstatic create(id, settings)\n\t{\n\t\tconst self = new Unlink();\n\t\tself.initialize(id, settings);\n\t\treturn self;\n\t}\n\n\tstatic messages = {};\n}\n","import History from \"./history\";\nimport {Mark as MarkType} from \"../types\";\n\n/** @memberof BX.Crm.Timeline.Items */\nexport default class Mark extends History\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\t}\n\n\tdoInitialize()\n\t{\n\t\tsuper.doInitialize();\n\t\tif(!(this._activityEditor instanceof BX.CrmActivityEditor))\n\t\t{\n\t\t\tthrow \"Mark. The field 'activityEditor' is not assigned.\";\n\t\t}\n\t}\n\n\tgetMessage(name)\n\t{\n\t\tconst m = Mark.messages;\n\t\tif (m.hasOwnProperty(name))\n\t\t{\n\t\t\treturn m[name];\n\t\t}\n\n\t\treturn super.getMessage(name);\n\t}\n\n\tgetTitle()\n\t{\n\t\tlet title = \"\";\n\t\tconst entityData = this.getAssociatedEntityData();\n\t\tconst associatedEntityTypeId = this.getAssociatedEntityTypeId();\n\t\tconst typeCategoryId = this.getTypeCategoryId();\n\t\tif(associatedEntityTypeId === BX.CrmEntityType.enumeration.activity)\n\t\t{\n\t\t\tconst entityTypeId = BX.prop.getInteger(entityData, \"TYPE_ID\", 0);\n\t\t\tconst direction = BX.prop.getInteger(entityData, \"DIRECTION\", 0);\n\t\t\tconst activityProviderId = BX.prop.getString(entityData, \"PROVIDER_ID\", '');\n\n\t\t\tif(entityTypeId === BX.CrmActivityType.email)\n\t\t\t{\n\t\t\t\tif(typeCategoryId === MarkType.success)\n\t\t\t\t{\n\t\t\t\t\ttitle = this.getMessage(\n\t\t\t\t\t\t(direction === BX.CrmActivityDirection.incoming ? \"incomingEmail\" : \"outgoingEmail\") +\n\t\t\t\t\t\t\"SuccessMark\"\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\telse if(typeCategoryId === MarkType.renew)\n\t\t\t\t{\n\t\t\t\t\ttitle = this.getMessage(\n\t\t\t\t\t\t(direction === BX.CrmActivityDirection.incoming ? \"incomingEmail\" : \"outgoingEmail\") +\n\t\t\t\t\t\t\"RenewMark\"\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if(entityTypeId === BX.CrmActivityType.call)\n\t\t\t{\n\t\t\t\tif(typeCategoryId === MarkType.success)\n\t\t\t\t{\n\t\t\t\t\ttitle = this.getMessage(\n\t\t\t\t\t\t(direction === BX.CrmActivityDirection.incoming ? \"incomingCall\" : \"outgoingCall\") +\n\t\t\t\t\t\t\"SuccessMark\"\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\telse if(typeCategoryId === MarkType.renew)\n\t\t\t\t{\n\t\t\t\t\ttitle = this.getMessage(\n\t\t\t\t\t\t(direction === BX.CrmActivityDirection.incoming ? \"incomingCall\" : \"outgoingCall\") +\n\t\t\t\t\t\t\"RenewMark\"\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if(entityTypeId === BX.CrmActivityType.meeting)\n\t\t\t{\n\t\t\t\tif(typeCategoryId === MarkType.success)\n\t\t\t\t{\n\t\t\t\t\ttitle = this.getMessage(\"meetingSuccessMark\");\n\t\t\t\t}\n\t\t\t\telse if(typeCategoryId === MarkType.renew)\n\t\t\t\t{\n\t\t\t\t\ttitle = this.getMessage(\"meetingRenewMark\");\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if(entityTypeId === BX.CrmActivityType.task)\n\t\t\t{\n\t\t\t\tif(typeCategoryId === MarkType.success)\n\t\t\t\t{\n\t\t\t\t\ttitle = this.getMessage(\"taskSuccessMark\");\n\t\t\t\t}\n\t\t\t\telse if(typeCategoryId === MarkType.renew)\n\t\t\t\t{\n\t\t\t\t\ttitle = this.getMessage(\"taskRenewMark\");\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if(entityTypeId === BX.CrmActivityType.provider)\n\t\t\t{\n\t\t\t\tif (activityProviderId === 'CRM_REQUEST')\n\t\t\t\t{\n\t\t\t\t\tif(typeCategoryId === MarkType.success)\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle = this.getMessage(\"requestSuccessMark\");\n\t\t\t\t\t}\n\t\t\t\t\telse if(typeCategoryId === MarkType.renew)\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle = this.getMessage(\"requestRenewMark\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if(typeCategoryId === MarkType.success)\n\t\t\t\t{\n\t\t\t\t\ttitle = this.getMessage(\"webformSuccessMark\");\n\t\t\t\t}\n\t\t\t\telse if(typeCategoryId === MarkType.renew)\n\t\t\t\t{\n\t\t\t\t\ttitle = this.getMessage(\"webformRenewMark\");\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse if(associatedEntityTypeId === BX.CrmEntityType.enumeration.deal)\n\t\t{\n\t\t\tif(typeCategoryId === MarkType.success)\n\t\t\t{\n\t\t\t\ttitle = this.getMessage(\"dealSuccessMark\");\n\t\t\t}\n\t\t\telse if(typeCategoryId === MarkType.failed)\n\t\t\t{\n\t\t\t\ttitle = this.getMessage(\"dealFailedMark\");\n\t\t\t}\n\t\t}\n\t\telse if(associatedEntityTypeId === BX.CrmEntityType.enumeration.order)\n\t\t{\n\t\t\tif(typeCategoryId === MarkType.success)\n\t\t\t{\n\t\t\t\ttitle = this.getMessage(\"orderSuccessMark\");\n\t\t\t}\n\t\t\telse if(typeCategoryId === MarkType.failed)\n\t\t\t{\n\t\t\t\ttitle = this.getMessage(\"orderFailedMark\");\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (BX.CrmEntityType.isDefined(associatedEntityTypeId))\n\t\t\t{\n\t\t\t\tif (typeCategoryId === MarkType.success)\n\t\t\t\t{\n\t\t\t\t\ttitle = this.getMessage('entitySuccessMark');\n\t\t\t\t}\n\t\t\t\telse if (typeCategoryId === MarkType.failed)\n\t\t\t\t{\n\t\t\t\t\ttitle = this.getMessage('entityFailedMark');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn title;\n\t}\n\n\tprepareTitleLayout()\n\t{\n\t\tconst associatedEntityTypeId = this.getAssociatedEntityTypeId();\n\n\t\tif(associatedEntityTypeId === BX.CrmEntityType.enumeration.order)\n\t\t{\n\t\t\treturn BX.create(\"SPAN\",\n\t\t\t\t{\n\t\t\t\t\tattrs: { className: \"crm-entity-stream-content-event-title\" },\n\t\t\t\t\ttext: this.getTitle()\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn BX.create(\"A\",\n\t\t\t\t{\n\t\t\t\t\tattrs: { href: \"#\", className: \"crm-entity-stream-content-event-title\" },\n\t\t\t\t\tevents: { \"click\": this._headerClickHandler },\n\t\t\t\t\ttext: this.getTitle()\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t}\n\n\tprepareContent()\n\t{\n\t\tconst entityData = this.getAssociatedEntityData();\n\t\tconst associatedEntityTypeId = this.getAssociatedEntityTypeId();\n\n\t\tconst wrapper = BX.create(\n\t\t\t\"DIV\",\n\t\t\t{attrs: {className: \"crm-entity-stream-section crm-entity-stream-section-completed\"}}\n\t\t);\n\n\t\tif (this.isFixed())\n\t\t\tBX.addClass(wrapper, 'crm-entity-stream-section-top-fixed');\n\n\t\t//region Context Menu\n\t\tif(this.isContextMenuEnabled())\n\t\t{\n\t\t\twrapper.appendChild(this.prepareContextMenuButton());\n\t\t}\n\t\t//endregion\n\n\t\tconst content = BX.create(\"DIV\", {attrs: {className: \"crm-entity-stream-content-event\"}});\n\t\tconst header = this.prepareHeaderLayout();\n\t\tif(associatedEntityTypeId === BX.CrmEntityType.enumeration.activity)\n\t\t{\n\t\t\tconst entityTypeId = BX.prop.getInteger(entityData, \"TYPE_ID\", 0);\n\t\t\tlet iconClassName = \"crm-entity-stream-section-icon\";\n\t\t\tif(entityTypeId === BX.CrmActivityType.email)\n\t\t\t{\n\t\t\t\ticonClassName += \" crm-entity-stream-section-icon-email\";\n\t\t\t}\n\t\t\telse if(entityTypeId === BX.CrmActivityType.call)\n\t\t\t{\n\t\t\t\ticonClassName += \" crm-entity-stream-section-icon-call\";\n\t\t\t}\n\t\t\telse if(entityTypeId === BX.CrmActivityType.meeting)\n\t\t\t{\n\t\t\t\ticonClassName += \" crm-entity-stream-section-icon-meeting\";\n\t\t\t}\n\t\t\telse if(entityTypeId === BX.CrmActivityType.task)\n\t\t\t{\n\t\t\t\ticonClassName += \" crm-entity-stream-section-icon-task\";\n\t\t\t}\n\t\t\telse if(entityTypeId === BX.CrmActivityType.provider)\n\t\t\t{\n\t\t\t\tconst providerId = BX.prop.getString(entityData, \"PROVIDER_ID\", \"\");\n\t\t\t\tif(providerId === \"CRM_WEBFORM\")\n\t\t\t\t{\n\t\t\t\t\ticonClassName += \" crm-entity-stream-section-icon-crmForm\";\n\t\t\t\t}\n\t\t\t}\n\n\t\t\twrapper.appendChild(BX.create(\"DIV\", { attrs: { className: iconClassName } }));\n\t\t\tcontent.appendChild(header);\n\n\n\t\t\tconst detailWrapper = BX.create(\"DIV\",\n\t\t\t\t{attrs: {className: \"crm-entity-stream-content-detail\"}}\n\t\t\t);\n\t\t\tcontent.appendChild(detailWrapper);\n\n\t\t\tdetailWrapper.appendChild(\n\t\t\t\tBX.create(\"DIV\",\n\t\t\t\t\t{\n\t\t\t\t\t\tattrs: { className: \"crm-entity-stream-content-detail-title\" },\n\t\t\t\t\t\tchildren:\n\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\tBX.create(\"A\",\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tattrs: { href: \"#\" },\n\t\t\t\t\t\t\t\t\t\tevents: { \"click\": this._headerClickHandler },\n\t\t\t\t\t\t\t\t\t\ttext: this.cutOffText(BX.prop.getString(entityData, \"SUBJECT\", \"\"), 128)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t\t);\n\n\t\t\tconst summary = this.getTextDataParam(\"SUMMARY\");\n\t\t\tif(summary !== \"\")\n\t\t\t{\n\t\t\t\tdetailWrapper.appendChild(\n\t\t\t\t\tBX.create(\"DIV\",\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tattrs: { className: \"crm-entity-stream-content-detail-description\" },\n\t\t\t\t\t\t\ttext: summary\n\t\t\t\t\t\t}\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\telse if(associatedEntityTypeId === BX.CrmEntityType.enumeration.order)\n\t\t{\n\t\t\twrapper.appendChild(BX.create(\"DIV\", { attrs: { className: \"crm-entity-stream-section-icon crm-entity-stream-section-icon-info\" } }));\n\t\t\tcontent.appendChild(header);\n\t\t\tcontent.appendChild(\n\t\t\t\tBX.create(\"DIV\",\n\t\t\t\t\t{\n\t\t\t\t\t\tattrs: { className: \"crm-entity-stream-content-detail\" },\n\t\t\t\t\t\ttext: this.cutOffText(this.getTextDataParam(\"MESSAGE\"), 128)\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\t\telse\n\t\t{\n\t\t\twrapper.appendChild(BX.create(\"DIV\", { attrs: { className: \"crm-entity-stream-section-icon crm-entity-stream-section-icon-info\" } }));\n\t\t\tcontent.appendChild(header);\n\n\t\t\tconst innerWrapper = BX.create(\n\t\t\t\t\"DIV\",\n\t\t\t\t{\n\t\t\t\t\tattrs: {className: \"crm-entity-stream-content-detail\"}\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tconst associatedEntityTitle = this.cutOffText(BX.prop.getString(entityData, \"TITLE\", \"\"), 128);\n\n\t\t\tif (BX.CrmEntityType.isDefined(associatedEntityTypeId))\n\t\t\t{\n\t\t\t\tlet link = BX.prop.getString(entityData, 'SHOW_URL', '');\n\t\t\t\tif (link.indexOf('/') !== 0)\n\t\t\t\t{\n\t\t\t\t\tlink = '#';\n\t\t\t\t}\n\n\t\t\t\tconst contentTemplate =\n\t\t\t\t\tthis.getMessage('entityContentTemplate')\n\t\t\t\t\t\t.replace('#ENTITY_TYPE_CAPTION#', BX.Text.encode(BX.prop.getString(entityData, 'ENTITY_TYPE_CAPTION', '')))\n\t\t\t\t\t\t.replace('#LINK#', BX.Text.encode(link))\n\t\t\t\t\t\t.replace('#LINK_TITLE#', BX.Text.encode(associatedEntityTitle))\n\t\t\t\t;\n\n\t\t\t\tinnerWrapper.appendChild(\n\t\t\t\t\tBX.create(\n\t\t\t\t\t\t'SPAN',\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\thtml: contentTemplate\n\t\t\t\t\t\t}\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tinnerWrapper.innerText = associatedEntityTitle;\n\t\t\t}\n\n\t\t\tcontent.appendChild(innerWrapper);\n\t\t}\n\n\t\t//region Author\n\t\tconst authorNode = this.prepareAuthorLayout();\n\t\tif(authorNode)\n\t\t{\n\t\t\tcontent.appendChild(authorNode);\n\t\t}\n\t\t//endregion\n\n\t\twrapper.appendChild(\n\t\t\tBX.create(\"DIV\", { attrs: { className: \"crm-entity-stream-section-content\" }, children: [ content ] })\n\t\t);\n\n\t\tif (!this.isReadOnly())\n\t\t\twrapper.appendChild(this.prepareFixedSwitcherLayout());\n\n\t\treturn wrapper;\n\t}\n\n\tprepareContextMenuItems()\n\t{\n\t\tconst menuItems = [];\n\n\t\tif (!this.isReadOnly())\n\t\t{\n\t\t\tif (this.isFixed() || this._fixedHistory.findItemById(this._id))\n\t\t\t\tmenuItems.push({ id: \"unfasten\", text: this.getMessage(\"menuUnfasten\"), onclick: BX.delegate(this.unfasten, this)});\n\t\t\telse\n\t\t\t\tmenuItems.push({ id: \"fasten\", text: this.getMessage(\"menuFasten\"), onclick: BX.delegate(this.fasten, this)});\n\t\t}\n\n\t\treturn menuItems;\n\t}\n\n\tview()\n\t{\n\t\tconst entityData = this.getAssociatedEntityData();\n\t\tconst associatedEntityTypeId = this.getAssociatedEntityTypeId();\n\t\tif(associatedEntityTypeId === BX.CrmEntityType.enumeration.activity)\n\t\t{\n\t\t\tconst id = BX.prop.getInteger(entityData, \"ID\", 0);\n\t\t\tif(id > 0)\n\t\t\t{\n\t\t\t\tthis._activityEditor.viewActivity(id);\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tconst showUrl = BX.prop.getString(entityData, \"SHOW_URL\", \"\");\n\t\t\tif(showUrl !== \"\")\n\t\t\t{\n\t\t\t\tBX.Crm.Page.open(showUrl);\n\t\t\t}\n\t\t}\n\t}\n\n\tstatic create(id, settings)\n\t{\n\t\tconst self = new Mark();\n\t\tself.initialize(id, settings);\n\t\treturn self;\n\t}\n\n\tstatic messages = {};\n}\n","import History from \"./history\";\nimport {EditorMode} from \"../types\";\n\n/** @memberof BX.Crm.Timeline.Items */\nexport default class Comment extends History\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis._isCollapsed = false;\n\t\tthis._isMenuShown = false;\n\t\tthis._isFixed = false;\n\t\tthis._hasFiles = false;\n\t\tthis._postForm = null;\n\t\tthis._editor = null;\n\t\tthis._commentMessage = '';\n\t\tthis._mode = EditorMode.view;\n\t\tthis._streamContentEventBlock = '';\n\t\tthis._playerWrappers = {};\n\t\tBX.Event.EventEmitter.subscribe(\n\t\t\t\"BX.Disk.Files:onShowFiles\",\n\t\t\tBX.delegate(this.addPlayer, this)\n\t\t);\n\t}\n\n\tdoInitialize()\n\t{\n\t\tsuper.doInitialize();\n\t\tthis._hasFiles = (this.getTextDataParam(\"HAS_FILES\") === 'Y');\n\t}\n\n\tgetTitle()\n\t{\n\t\treturn this.getMessage(\"comment\");\n\t}\n\n\tonPlayerDummyClick(file)\n\t{\n\t\tconst playerWrapper = this._playerWrappers[file.id];\n\t\tconst stubNode = playerWrapper.querySelector(\".crm-audio-cap-wrap\");\n\t\tif (stubNode)\n\t\t{\n\t\t\tBX.addClass(stubNode, \"crm-audio-cap-wrap-loader\");\n\t\t}\n\t\tthis._history.getManager().getAudioPlaybackRateSelector().addPlayer(\n\t\t\tthis._history.getManager().loadMediaPlayer(\n\t\t\t\t\"history_\" + this.getId() + '_' + file.id,\n\t\t\t\tfile.url,\n\t\t\t\t'audio/mp3',\n\t\t\t\tplayerWrapper,\n\t\t\t\tnull,\n\t\t\t\t{\n\t\t\t\t\tplaybackRate: this._history.getManager().getAudioPlaybackRateSelector().getRate()\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\t}\n\n\taddPlayer(event)\n\t{\n\t\tif (event.data.entityValueId === parseInt(this.getId(), 10))\n\t\t{\n\t\t\tthis.files = event.data.files;\n\t\t\tevent.data.files.forEach(function(file){\n\t\t\t\tif (file.extension === 'mp3')\n\t\t\t\t{\n\t\t\t\t\tif (this._playerWrappers[file.id])\n\t\t\t\t\t{\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tconst callInfoWrapper = BX.create(\"DIV\",\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tattrs: {\n\t\t\t\t\t\t\t\tclassName: \"crm-entity-stream-content-detail-call crm-entity-stream-content-detail-call-inline\"\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t\tthis._streamContentEventBlock.appendChild(callInfoWrapper);\n\t\t\t\t\tthis._playerWrappers[file.id] = this._history.getManager().renderAudioDummy(\n\t\t\t\t\t\tnull,\n\t\t\t\t\t\tthis.onPlayerDummyClick.bind(this, file)\n\t\t\t\t\t);\n\n\t\t\t\t\tthis._playerWrappers[file.id].firstElementChild.classList.add(\"crm-audio-cap-wrap-without-duration-text\");\n\n\t\t\t\t\tcallInfoWrapper.appendChild(\n\t\t\t\t\t\tthis._playerWrappers[file.id]\n\t\t\t\t\t);\n\t\t\t\t\tcallInfoWrapper.appendChild(\n\t\t\t\t\t\tthis._history.getManager().getAudioPlaybackRateSelector().render()\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}.bind(this));\n\t\t}\n\t}\n\n\tprepareContent()\n\t{\n\t\tconst wrapper = BX.create(\"DIV\",\n\t\t\t{\n\t\t\t\tattrs: {className: \"crm-entity-stream-section crm-entity-stream-section-comment\"}\n\t\t\t}\n\t\t);\n\n\t\tif (this.isReadOnly())\n\t\t{\n\t\t\tBX.addClass(wrapper, \"crm-entity-stream-section-comment-read-only\");\n\t\t}\n\n\t\tif (this.isFixed())\n\t\t\tBX.addClass(wrapper, 'crm-entity-stream-section-top-fixed');\n\n\t\twrapper.appendChild(\n\t\t\tBX.create(\"DIV\",\n\t\t\t\t{ attrs: { className: \"crm-entity-stream-section-icon crm-entity-stream-section-icon-comment\" } }\n\t\t\t)\n\t\t);\n\n\t\t//region Context Menu\n\t\tif(this.isContextMenuEnabled())\n\t\t{\n\t\t\twrapper.appendChild(this.prepareContextMenuButton());\n\t\t}\n\t\t//endregion\n\n\t\tthis._streamContentEventBlock = BX.create(\"DIV\", { attrs: { className: \"crm-entity-stream-content-event\" } });\n\t\tconst header = this.prepareHeaderLayout();\n\n\t\tthis._streamContentEventBlock.appendChild(header);\n\n\t\tif (!this.isReadOnly())\n\t\t\twrapper.appendChild(this.prepareFixedSwitcherLayout());\n\n\t\tconst detailChildren = [];\n\t\tif (this._mode !== EditorMode.edit)\n\t\t{\n\t\t\tthis._commentWrapper = BX.create(\"DIV\", {\n\t\t\t\t\tattrs: { className: \"crm-entity-stream-content-detail-description\" }\n\t\t\t\t}\n\t\t\t);\n\t\t\tBX.html(this._commentWrapper, this.getTextDataParam(\"COMMENT\", \"\"));\n\t\t\tdetailChildren.push(this._commentWrapper);\n\n\t\t\tif (!this.isReadOnly())\n\t\t\t{\n\t\t\t\tBX.bind(this._commentWrapper, \"click\", BX.delegate(this.switchToEditMode, this));\n\t\t\t\tBX.bind(header, \"click\", BX.delegate(this.switchToEditMode, this));\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (!BX.type.isDomNode(this._editorContainer))\n\t\t\t\tthis._editorContainer = BX.create(\"div\", {attrs: {className: \"crm-entity-stream-section-comment-editor\"}});\n\n\t\t\tdetailChildren.push(this._editorContainer);\n\n\t\t\tconst buttons = BX.create(\"DIV\",\n\t\t\t\t{\n\t\t\t\t\tattrs: {className: \"crm-entity-stream-content-detail-comment-edit-btn-container\"},\n\t\t\t\t\tchildren:\n\t\t\t\t\t\t[\n\t\t\t\t\t\t\tBX.create(\"button\",\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tattrs: {className: \"ui-btn ui-btn-xs ui-btn-primary\"},\n\t\t\t\t\t\t\t\t\thtml: this.getMessage(\"send\"),\n\t\t\t\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\t\t\t\tclick: BX.delegate(this.save, this)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\tBX.create(\"a\",\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tattrs: {className: \"ui-btn ui-btn-xs ui-btn-link\"},\n\t\t\t\t\t\t\t\t\thtml: this.getMessage(\"cancel\"),\n\t\t\t\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\t\t\t\tclick: BX.delegate(this.switchToViewMode, this)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tdetailChildren.push(buttons);\n\t\t}\n\n\t\tthis._streamContentEventBlock.appendChild(\n\t\t\tBX.create(\"DIV\",\n\t\t\t\t{\n\t\t\t\t\tattrs: { className: \"crm-entity-stream-content-detail\" },\n\t\t\t\t\tchildren: detailChildren\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\n\t\t//region Author\n\t\tconst authorNode = this.prepareAuthorLayout();\n\t\tif(authorNode)\n\t\t{\n\t\t\tthis._streamContentEventBlock.appendChild(authorNode);\n\t\t}\n\t\t//endregion\n\t\tconst cleanText = this.getTextDataParam(\"TEXT\", \"\");\n\t\tconst _hasInlineAttachment = (this.getTextDataParam(\"HAS_INLINE_ATTACHMENT\", \"\") === 'Y');\n\t\tif ((cleanText.length <= 128 && !_hasInlineAttachment) || this._mode === EditorMode.edit)\n\t\t{\n\t\t\tthis._isCollapsed = false;\n\n\t\t\twrapper.appendChild(\n\t\t\t\tBX.create(\"DIV\", {\n\t\t\t\t\tattrs: {\n\t\t\t\t\t\tclassName: \"crm-entity-stream-section-content\"\n\t\t\t\t\t},\n\t\t\t\t\tchildren: [\n\t\t\t\t\t\tthis._streamContentEventBlock\n\t\t\t\t\t]\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis._isCollapsed = true;\n\n\t\t\twrapper.appendChild(\n\t\t\t\tBX.create(\"DIV\",\n\t\t\t\t\t{\n\t\t\t\t\t\tattrs: { className: \"crm-entity-stream-section-content crm-entity-stream-section-content-collapsed\" },\n\t\t\t\t\t\tchildren:\n\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\tthis._streamContentEventBlock\n\t\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t\t);\n\n\t\t\twrapper.querySelector(\".crm-entity-stream-content-event\").appendChild(\n\t\t\t\tBX.create(\"DIV\",\n\t\t\t\t\t{\n\t\t\t\t\t\tattrs: { className: \"crm-entity-stream-section-content-expand-btn-container\" },\n\t\t\t\t\t\tchildren:\n\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\tBX.create(\"A\",\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tattrs:\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tclassName: \"crm-entity-stream-section-content-expand-btn\",\n\t\t\t\t\t\t\t\t\t\t\t\thref: \"#\"\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tevents:\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tclick: BX.delegate(this.onExpandButtonClick, this)\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\ttext: this.getMessage(\"expand\")\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\n\t\tif (this._mode === EditorMode.view && this._hasFiles)\n\t\t{\n\t\t\tthis._textLoaded = false;\n\t\t\tthis._fileBlock = BX.create(\"DIV\",\n\t\t\t\t{\n\t\t\t\t\tattrs: { className: \"crm-entity-stream-section-files-inner\" },\n\t\t\t\t\tchildren: [BX.create(\"DIV\", { attrs: { className: \"crm-timeline-wait\" }})]\n\t\t\t\t});\n\t\t\twrapper.querySelector(\".crm-entity-stream-section-content\").appendChild(\n\t\t\t\tBX.create(\"DIV\",\n\t\t\t\t\t{\n\t\t\t\t\t\tattrs: { className: \"crm-entity-stream-section-files\" },\n\t\t\t\t\t\tchildren: [this._fileBlock]\n\t\t\t\t\t})\n\t\t\t);\n\t\t\tBX.ready(BX.delegate(function() {\n\t\t\t\twindow.setTimeout(BX.delegate(function(){\n\t\t\t\t\tthis.loadContent(this._fileBlock, \"GET_FILE_BLOCK\")\n\t\t\t\t} ,this), 100);\n\t\t\t},this));\n\t\t}\n\n\t\treturn wrapper;\n\t}\n\n\tprepareActions()\n\t{\n\t\tif (this._mode === EditorMode.view && BX.type.isDomNode(this._commentWrapper))\n\t\t{\n\t\t\tthis.registerImages(this._commentWrapper);\n\t\t\tif (!BX.getClass('BX.Disk.apiVersion'))\n\t\t\t{\n\t\t\t\tBX.viewElementBind(\n\t\t\t\t\tthis._commentWrapper,\n\t\t\t\t\t{showTitle: true},\n\t\t\t\t\tfunction(node){\n\t\t\t\t\t\treturn BX.type.isElementNode(node) && (node.getAttribute('data-bx-viewer') || node.getAttribute('data-bx-image'));\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\tloadContent(node, type)\n\t{\n\t\tif (!BX.type.isDomNode(node))\n\t\t\treturn;\n\n\t\tBX.ajax(\n\t\t\t{\n\t\t\t\turl: this._history._serviceUrl,\n\t\t\t\tmethod: \"POST\",\n\t\t\t\tdataType: \"json\",\n\t\t\t\tdata:\n\t\t\t\t\t{\n\t\t\t\t\t\t\"ACTION\": \"GET_COMMENT_CONTENT\",\n\t\t\t\t\t\t\"ID\": this.getId(),\n\t\t\t\t\t\t\"ENTITY_TYPE_ID\": this.getOwnerTypeId(),\n\t\t\t\t\t\t\"ENTITY_ID\": this.getOwnerId(),\n\t\t\t\t\t\t\"TYPE\": type\n\t\t\t\t\t},\n\t\t\t\tonsuccess: BX.delegate(function(result)\n\t\t\t\t{\n\t\t\t\t\tif (BX.type.isNotEmptyString(result.ERROR) && type === 'GET_FILE_BLOCK')\n\t\t\t\t\t{\n\t\t\t\t\t\tBX.remove(node);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (BX.type.isNotEmptyString(result.BLOCK))\n\t\t\t\t\t{\n\t\t\t\t\t\tconst promise = BX.html(node, result.BLOCK);\n\t\t\t\t\t\tpromise.then(\n\t\t\t\t\t\t\tBX.delegate(function(){\n\t\t\t\t\t\t\t\tthis.registerImages(node);\n\t\t\t\t\t\t\t\tBX.LazyLoad.showImages();\n\t\t\t\t\t\t\t}, this)\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}, this)\n\t\t\t}\n\t\t);\n\t}\n\n\tloadEditor()\n\t{\n\t\tthis._editorName = 'CrmTimeLineComment'+this._id + BX.util.getRandomString(4);\n\t\tif (this._postForm)\n\t\t{\n\t\t\tthis._postForm.oEditor.SetContent(this._commentMessage);\n\t\t\tthis._editor.ReInitIframe();\n\t\t\treturn;\n\t\t}\n\n\t\tconst actionData = {\n\t\t\tdata: {\n\t\t\t\tid: this._id,\n\t\t\t\tname: this._editorName\n\t\t\t}\n\t\t};\n\t\tBX.ajax.runAction(\"crm.api.timeline.loadEditor\", actionData)\n\t\t\t.then(this.onLoadEditorSuccess.bind(this))\n\t\t\t.catch(\tthis.switchToViewMode.bind(this));\n\t}\n\n\tonLoadEditorSuccess(result)\n\t{\n\t\tif (!BX.type.isDomNode(this._editorContainer))\n\t\t\tthis._editorContainer = BX.create(\"div\", {attrs: {className: \"crm-entity-stream-section-comment-editor\"}});\n\n\t\tconst html = BX.prop.getString(BX.prop.getObject(result, \"data\", {}), \"html\", '');\n\t\tBX.html(this._editorContainer, html).then(BX.delegate(this.showEditor,this));\n\t}\n\n\tshowEditor()\n\t{\n\t\tif (LHEPostForm)\n\t\t{\n\t\t\twindow.setTimeout(BX.delegate(function(){\n\t\t\t\tthis._postForm = LHEPostForm.getHandler(this._editorName);\n\t\t\t\tthis._editor = BXHtmlEditor.Get(this._editorName);\n\t\t\t\tBX.onCustomEvent(this._postForm.eventNode, 'OnShowLHE', [true]);\n\t\t\t\tthis._commentMessage = this._postForm.oEditor.GetContent();\n\t\t\t} ,this), 0);\n\t\t}\n\t}\n\n\tonFinishFasten()\n\t{\n\t\tthis.registerImages(this._commentWrapper);\n\t\tif (BX.type.isDomNode(this._fileBlock))\n\t\t\tthis.registerImages(this._fileBlock);\n\t\tBX.LazyLoad.showImages();\n\t}\n\n\tregisterImages(node)\n\t{\n\t\tconst commentImages = node.querySelectorAll('[data-bx-viewer=\"image\"]');\n\t\tconst commentImagesLength = commentImages.length;\n\t\tconst idsList = [];\n\t\tif (commentImagesLength > 0)\n\t\t{\n\t\t\tfor (let i = 0; i < commentImagesLength; ++i)\n\t\t\t{\n\t\t\t\tif (BX.type.isDomNode(commentImages[i]))\n\t\t\t\t{\n\t\t\t\t\tcommentImages[i].id += BX.util.getRandomString(4);\n\t\t\t\t\tidsList.push(commentImages[i].id);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (idsList.length > 0)\n\t\t\t{\n\t\t\t\tBX.LazyLoad.registerImages(idsList);\n\t\t\t}\n\t\t}\n\t\tBX.LazyLoad.registerImages(idsList);\n\t}\n\n\ttoggleMode(type)\n\t{\n\t\tthis._mode = parseInt(type);\n\t\tthis._hasFiles = (this.getTextDataParam(\"HAS_FILES\") === 'Y');\n\t\tthis.refreshLayout();\n\t\tthis.closeContextMenu();\n\t}\n\n\tswitchToViewMode(e)\n\t{\n\t\t// if (LHEPostForm)\n\t\t// \tLHEPostForm.unsetHandler(this._editorName);\n\t\tthis.toggleMode(EditorMode.view);\n\t}\n\n\tswitchToEditMode(e)\n\t{\n\t\tconst tagName = e.target.tagName.toLowerCase();\n\t\tif (tagName === 'a'\n\t\t\t|| tagName === 'img'\n\t\t\t|| BX.hasClass(e.target, \"feed-con-file-changes-link-more\")\n\t\t\t|| BX.hasClass(e.target, \"feed-com-file-inline\")\n\t\t\t|| BX.type.isNotEmptyString(document.getSelection().toString())\n\t\t)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.toggleMode(EditorMode.edit);\n\t\twindow.setTimeout(BX.delegate(function(){\n\t\t\tthis.loadEditor();\n\t\t} ,this), 100);\n\t}\n\n\tprepareContextMenuItems()\n\t{\n\t\tif(this._isMenuShown)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst menuItems = [];\n\n\t\tif (!this.isReadOnly())\n\t\t{\n\t\t\tif (this._mode !== EditorMode.edit)\n\t\t\t{\n\t\t\t\tmenuItems.push({ id: \"edit\", text: this.getMessage(\"menuEdit\"), onclick: BX.delegate(this.switchToEditMode, this)});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tmenuItems.push({ id: \"cancel\", text: this.getMessage(\"menuCancel\"), onclick: BX.delegate(this.switchToViewMode, this)});\n\t\t\t}\n\n\t\t\tmenuItems.push({ id: \"remove\", text: this.getMessage(\"menuDelete\"), onclick: BX.delegate(this.processRemoval, this)});\n\n\t\t\tif (this.isFixed() || this._fixedHistory.findItemById(this._id))\n\t\t\t\tmenuItems.push({ id: \"unfasten\", text: this.getMessage(\"menuUnfasten\"), onclick: BX.delegate(this.unfasten, this)});\n\t\t\telse\n\t\t\t\tmenuItems.push({ id: \"fasten\", text: this.getMessage(\"menuFasten\"), onclick: BX.delegate(this.fasten, this)});\n\t\t}\n\n\t\treturn menuItems;\n\t}\n\n\tsave(e)\n\t{\n\t\tconst attachmentList = [];\n\t\tlet text = \"\";\n\t\tif (this._postForm)\n\t\t{\n\t\t\ttext = this._postForm.oEditor.GetContent();\n\t\t\tthis._commentMessage = text;\n\t\t\tthis._postForm.eventNode\n\t\t\t\t.querySelectorAll('input[name=\"UF_CRM_COMMENT_FILES[]\"]')\n\t\t\t\t.forEach(function(input) {\n\t\t\t\t\tattachmentList.push(input.value)\n\t\t\t\t});\n\t\t}\n\n\t\tif (!BX.type.isNotEmptyString(text))\n\t\t{\n\t\t\tif (!this.emptyCommentMessage)\n\t\t\t{\n\t\t\t\tthis.emptyCommentMessage = new BX.PopupWindow(\n\t\t\t\t\t'timeline_empty_comment_' + this._id,\n\t\t\t\t\te.target,\n\t\t\t\t\t{\n\t\t\t\t\t\tcontent: BX.message('CRM_TIMELINE_EMPTY_COMMENT_MESSAGE'),\n\t\t\t\t\t\tdarkMode: true,\n\t\t\t\t\t\tautoHide: true,\n\t\t\t\t\t\tzIndex: 990,\n\t\t\t\t\t\tangle: {position: 'top', offset: 77},\n\t\t\t\t\t\tcloseByEsc: true,\n\t\t\t\t\t\tbindOptions: { forceBindPosition: true}\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tthis.emptyCommentMessage.show();\n\t\t\treturn;\n\t\t}\n\n\t\tif(this._isRequestRunning && BX.type.isNotEmptyString(text))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis._isRequestRunning = true;\n\t\tBX.ajax(\n\t\t\t{\n\t\t\t\turl: this._history._serviceUrl,\n\t\t\t\tmethod: \"POST\",\n\t\t\t\tdataType: \"json\",\n\t\t\t\tdata:\n\t\t\t\t\t{\n\t\t\t\t\t\t\"ACTION\": \"UPDATE_COMMENT\",\n\t\t\t\t\t\t\"ID\": this.getId(),\n\t\t\t\t\t\t\"TEXT\": text,\n\t\t\t\t\t\t\"OWNER_TYPE_ID\":  this.getOwnerTypeId(),\n\t\t\t\t\t\t\"OWNER_ID\": this.getOwnerId(),\n\t\t\t\t\t\t\"ATTACHMENTS\": attachmentList\n\t\t\t\t\t},\n\t\t\t\tonsuccess: BX.delegate(this.onSaveSuccess, this),\n\t\t\t\tonfailure: BX.delegate(this.onRequestFailure, this)\n\t\t\t}\n\t\t);\n\t}\n\n\tprocessRemoval()\n\t{\n\t\tthis.closeContextMenu();\n\t\tthis._detetionConfirmDlgId = \"entity_timeline_deletion_\" + this.getId() + \"_confirm\";\n\t\tlet dlg = BX.Crm.ConfirmationDialog.get(this._detetionConfirmDlgId);\n\t\tif(!dlg)\n\t\t{\n\t\t\tdlg = BX.Crm.ConfirmationDialog.create(\n\t\t\t\tthis._detetionConfirmDlgId,\n\t\t\t\t{\n\t\t\t\t\ttitle: this.getMessage(\"removeConfirmTitle\"),\n\t\t\t\t\tcontent: this.getMessage('commentRemove')\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\tdlg.open().then(BX.delegate(this.onRemovalConfirm, this), BX.delegate(this.onRemovalCancel, this));\n\t}\n\n\tonRemovalConfirm(result)\n\t{\n\t\tif(BX.prop.getBoolean(result, \"cancel\", true))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.remove();\n\t}\n\n\tonRemovalCancel()\n\t{\n\t}\n\n\tremove(e)\n\t{\n\t\tif(this._isRequestRunning)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst history = this._history._manager.getHistory();\n\t\tconst deleteItem = history.findItemById(this._id);\n\t\tif (deleteItem instanceof Comment)\n\t\t\tdeleteItem.clearAnimate();\n\n\t\tconst fixedHistory = this._history._manager.getFixedHistory();\n\t\tconst deleteFixedItem = fixedHistory.findItemById(this._id);\n\t\tif (deleteFixedItem instanceof Comment)\n\t\t\tdeleteFixedItem.clearAnimate();\n\n\t\tthis._isRequestRunning = true;\n\t\tBX.ajax(\n\t\t\t{\n\t\t\t\turl: this._history._serviceUrl,\n\t\t\t\tmethod: \"POST\",\n\t\t\t\tdataType: \"json\",\n\t\t\t\tdata:\n\t\t\t\t\t{\n\t\t\t\t\t\t\"ACTION\": \"DELETE_COMMENT\",\n\t\t\t\t\t\t\"OWNER_TYPE_ID\":  this.getOwnerTypeId(),\n\t\t\t\t\t\t\"OWNER_ID\": this.getOwnerId(),\n\t\t\t\t\t\t\"ID\": this.getId()\n\t\t\t\t\t},\n\t\t\t\tonsuccess: BX.delegate(this.onRemoveSuccess, this),\n\t\t\t\tonfailure: BX.delegate(this.onRequestFailure, this)\n\t\t\t}\n\t\t);\n\t}\n\n\tonSaveSuccess(data)\n\t{\n\t\tthis._isRequestRunning = false;\n\t\tconst itemData = BX.prop.getObject(data, \"HISTORY_ITEM\");\n\n\t\tconst updateFixedItem = this._fixedHistory.findItemById(this._id);\n\t\tif (updateFixedItem instanceof Comment)\n\t\t{\n\t\t\tif (!BX.type.isNotEmptyString(itemData['IS_FIXED']))\n\t\t\t\titemData['IS_FIXED'] = 'Y';\n\n\t\t\tupdateFixedItem.setData(itemData);\n\t\t\tupdateFixedItem._id = BX.prop.getString(itemData, \"ID\");\n\t\t\tupdateFixedItem.switchToViewMode();\n\t\t}\n\n\t\tconst updateItem = this._history.findItemById(this._id);\n\t\tif (updateItem instanceof Comment)\n\t\t{\n\t\t\tupdateItem.setData(itemData);\n\t\t\tupdateItem._id = BX.prop.getString(itemData, \"ID\");\n\t\t\tupdateItem.switchToViewMode();\n\t\t}\n\n\t\tthis._postForm = null;\n\t}\n\n\tonRemoveSuccess(data)\n\t{\n\t}\n\n\tonRequestFailure(data)\n\t{\n\t\tthis._isRequestRunning = this._isLocked = false;\n\t}\n\n\tonExpandButtonClick(e)\n\t{\n\t\tif(!this._wrapper)\n\t\t{\n\t\t\treturn BX.PreventDefault(e);\n\t\t}\n\n\t\tconst contentWrapper = this._wrapper.querySelector(\"div.crm-entity-stream-section-content\");\n\t\tif(!contentWrapper)\n\t\t{\n\t\t\treturn BX.PreventDefault(e);\n\t\t}\n\n\t\tif (this._hasFiles && BX.type.isDomNode(this._commentWrapper) && !this._textLoaded)\n\t\t{\n\t\t\tthis._textLoaded = true;\n\t\t\tthis.loadContent(this._commentWrapper, \"GET_TEXT\")\n\t\t}\n\t\tconst eventWrapper = contentWrapper.querySelector(\".crm-entity-stream-content-event\");\n\t\tif(this._isCollapsed)\n\t\t{\n\t\t\teventWrapper.style.maxHeight = eventWrapper.scrollHeight + 130 + \"px\";\n\t\t\tBX.removeClass(contentWrapper, \"crm-entity-stream-section-content-collapsed\");\n\t\t\tBX.addClass(contentWrapper, \"crm-entity-stream-section-content-expand\");\n\t\t\tsetTimeout(\n\t\t\t\tBX.delegate(function() {\n\t\t\t\t\teventWrapper.style.maxHeight = \"\";\n\t\t\t\t}, this),\n\t\t\t\t300\n\t\t\t);\n\t\t}\n\t\telse\n\t\t{\n\t\t\teventWrapper.style.maxHeight = eventWrapper.clientHeight + \"px\";\n\t\t\tBX.removeClass(contentWrapper, \"crm-entity-stream-section-content-expand\");\n\t\t\tBX.addClass(contentWrapper, \"crm-entity-stream-section-content-collapsed\");\n\t\t\tsetTimeout(\n\t\t\t\tBX.delegate(function() {\n\t\t\t\t\teventWrapper.style.maxHeight = \"\";\n\t\t\t\t}, this),\n\t\t\t\t0\n\t\t\t);\n\t\t}\n\n\t\tthis._isCollapsed = !this._isCollapsed;\n\n\t\tconst button = contentWrapper.querySelector(\"a.crm-entity-stream-section-content-expand-btn\");\n\t\tif(button)\n\t\t{\n\t\t\tbutton.innerHTML = this.getMessage(this._isCollapsed ? \"expand\" : \"collapse\");\n\t\t}\n\t\treturn BX.PreventDefault(e);\n\t}\n\n\tstatic create(id, settings)\n\t{\n\t\tconst self = new Comment();\n\t\tself.initialize(id, settings);\n\t\treturn self;\n\t}\n}\n","import HistoryActivity from \"./history-activity\";\n\n/** @memberof BX.Crm.Timeline.Items */\nexport default class Wait extends HistoryActivity\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\t}\n\n\tgetTitle()\n\t{\n\t\treturn this.getMessage(\"wait\");\n\t}\n\n\tprepareTitleLayout()\n\t{\n\t\treturn BX.create(\"SPAN\", {\n\t\t\tattrs:{ className: \"crm-entity-stream-content-event-title\"},\n\t\t\tchildren: [\n\t\t\t\tBX.create(\"A\", {\n\t\t\t\t\tattrs: { href: \"#\" },\n\t\t\t\t\tevents: { \"click\": this._headerClickHandler },\n\t\t\t\t\ttext: this.getTitle()\n\t\t\t\t})\n\t\t\t]\n\t\t});\n\n\n\t}\n\n\tprepareTimeLayout()\n\t{\n\t\treturn BX.create(\"SPAN\",\n\t\t\t{\n\t\t\t\tattrs: { className: \"crm-entity-stream-content-event-time\" },\n\t\t\t\ttext: this.formatTime(this.getCreatedTime())\n\t\t\t}\n\t\t);\n\t}\n\n\tprepareHeaderLayout()\n\t{\n\t\tconst header = BX.create(\"DIV\", {attrs: {className: \"crm-entity-stream-content-header\"}});\n\t\theader.appendChild(this.prepareTitleLayout());\n\t\theader.appendChild(this.prepareTimeLayout());\n\n\t\treturn header;\n\t}\n\n\tprepareContent()\n\t{\n\t\tconst entityData = this.getAssociatedEntityData();\n\t\tlet description = BX.prop.getString(entityData, \"DESCRIPTION_RAW\", \"\");\n\t\tif(description !== \"\")\n\t\t{\n\t\t\tdescription = BX.util.trim(description);\n\t\t\tdescription = BX.util.strip_tags(description);\n\t\t\tdescription = BX.util.nl2br(description);\n\t\t}\n\n\t\tconst wrapper = BX.create(\"DIV\",\n\t\t\t{\n\t\t\t\tattrs: {className: \"crm-entity-stream-section crm-entity-stream-section-history crm-entity-stream-section-wait\"}\n\t\t\t}\n\t\t);\n\n\t\twrapper.appendChild(\n\t\t\tBX.create(\"DIV\",\n\t\t\t\t{\n\t\t\t\t\tattrs: { className: \"crm-entity-stream-section-icon crm-entity-stream-section-icon-complete\" }\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\n\t\tconst contentWrapper = BX.create(\"DIV\", {attrs: {className: \"crm-entity-stream-content-event\"}});\n\t\twrapper.appendChild(\n\t\t\tBX.create(\"DIV\",\n\t\t\t\t{\n\t\t\t\t\tattrs: { className: \"crm-entity-stream-section-content\" },\n\t\t\t\t\tchildren: [contentWrapper]\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\n\t\tconst header = this.prepareHeaderLayout();\n\t\tcontentWrapper.appendChild(header);\n\n\t\tconst detailWrapper = BX.create(\"DIV\",\n\t\t\t{\n\t\t\t\tattrs: {className: \"crm-entity-stream-content-detail\"},\n\t\t\t\thtml: description\n\t\t\t}\n\t\t);\n\t\tcontentWrapper.appendChild(detailWrapper);\n\n\t\t//region Author\n\t\tconst authorNode = this.prepareAuthorLayout();\n\t\tif(authorNode)\n\t\t{\n\t\t\tcontentWrapper.appendChild(authorNode);\n\t\t}\n\t\t//endregion\n\n\t\t//region  Actions\n\t\tthis._actionContainer = BX.create(\"SPAN\", { attrs: { className: \"crm-entity-stream-content-detail-action\" } });\n\t\tcontentWrapper.appendChild(this._actionContainer);\n\t\t//endregion\n\n\t\treturn wrapper;\n\t}\n\n\tprepareActions()\n\t{\n\t}\n\n\tshowActions(show)\n\t{\n\t\tif(this._actionContainer)\n\t\t{\n\t\t\tthis._actionContainer.style.display = show ? \"\" : \"none\";\n\t\t}\n\t}\n\n\tstatic create(id, settings)\n\t{\n\t\tconst self = new Wait();\n\t\tself.initialize(id, settings);\n\t\treturn self;\n\t}\n}\n","import HistoryActivity from \"./history-activity\";\n\n/** @memberof BX.Crm.Timeline.Items */\nexport default class Sender extends HistoryActivity\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\t}\n\n\tgetDataSetting(name)\n\t{\n\t\tconst settings = this.getObjectDataParam('SETTINGS') || {};\n\t\treturn settings[name] || null;\n\t}\n\n\tgetMessage(name)\n\t{\n\t\tconst m = Sender.messages;\n\t\treturn m.hasOwnProperty(name) ? m[name] : name;\n\t}\n\n\tgetTitle()\n\t{\n\t\treturn this.getDataSetting('messageName');\n\t}\n\n\tprepareTitleLayout()\n\t{\n\t\tconst self = this;\n\t\treturn BX.create(\"SPAN\", {\n\t\t\tattrs:{ className: \"crm-entity-stream-content-event-title\"},\n\t\t\tchildren: [\n\t\t\t\tthis.isRemoved()\n\t\t\t\t\t?\n\t\t\t\t\tBX.create(\"SPAN\", {text: this.getTitle()})\n\t\t\t\t\t:\n\t\t\t\t\tBX.create(\"A\", {\n\t\t\t\t\t\tattrs: {\n\t\t\t\t\t\t\thref: \"\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\t\"click\": function (e)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif (BX.SidePanel)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tBX.SidePanel.Instance.open(self.getDataSetting('path'));\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttop.location.href = self.getDataSetting('path');\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\ttext: this.getTitle()\n\t\t\t\t\t})\n\t\t\t]\n\t\t});\n\n\n\t}\n\n\tprepareTimeLayout()\n\t{\n\t\treturn BX.create(\"SPAN\",\n\t\t\t{\n\t\t\t\tattrs: { className: \"crm-entity-stream-content-event-time\" },\n\t\t\t\ttext: this.formatTime(this.getCreatedTime())\n\t\t\t}\n\t\t);\n\t}\n\n\tprepareStatusLayout()\n\t{\n\t\tlet layoutClassName, textCaption;\n\t\tif (this.getDataSetting('isError'))\n\t\t{\n\t\t\ttextCaption = this.getMessage('error');\n\t\t\tlayoutClassName = \"crm-entity-stream-content-event-missing\";\n\t\t}\n\t\telse if (this.getDataSetting('isUnsub'))\n\t\t{\n\t\t\ttextCaption = this.getMessage('unsub');\n\t\t\tlayoutClassName = \"crm-entity-stream-content-event-missing\";\n\t\t}\n\t\telse if (this.getDataSetting('isClick'))\n\t\t{\n\t\t\ttextCaption = this.getMessage('click');\n\t\t\tlayoutClassName = \"crm-entity-stream-content-event-successful\";\n\t\t}\n\t\telse\n\t\t{\n\t\t\ttextCaption = this.getMessage('read');\n\t\t\tlayoutClassName = \"crm-entity-stream-content-event-skipped\";\n\t\t}\n\n\t\treturn BX.create(\"SPAN\", {attrs: {className: layoutClassName}, text: textCaption});\n\t}\n\n\tprepareHeaderLayout()\n\t{\n\t\tconst header = BX.create(\"DIV\", {attrs: {className: \"crm-entity-stream-content-header\"}});\n\t\theader.appendChild(this.prepareTitleLayout());\n\t\tif (this.getDataSetting('isError') || this.getDataSetting('isRead') || this.getDataSetting('isUnsub'))\n\t\t{\n\t\t\theader.appendChild(this.prepareStatusLayout());\n\t\t}\n\t\theader.appendChild(this.prepareTimeLayout());\n\n\t\treturn header;\n\t}\n\n\tisRemoved()\n\t{\n\t\treturn !this.getDataSetting('letterTitle');\n\t}\n\n\tprepareContent()\n\t{\n\t\tconst description = this.isRemoved() ? this.getMessage('removed') : this.getMessage('title') + ': ' + this.getDataSetting('letterTitle');\n\n\t\tconst wrapper = BX.create(\"DIV\",\n\t\t\t{\n\t\t\t\tattrs: {className: \"crm-entity-stream-section crm-entity-stream-section-history crm-entity-stream-section-wait\"}\n\t\t\t}\n\t\t);\n\n\t\twrapper.appendChild(\n\t\t\tBX.create(\"DIV\",\n\t\t\t\t{\n\t\t\t\t\tattrs: { className: \"crm-entity-stream-section-icon crm-entity-stream-section-icon-complete\" }\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\n\t\tconst contentWrapper = BX.create(\"DIV\", {attrs: {className: \"crm-entity-stream-content-event\"}});\n\t\twrapper.appendChild(\n\t\t\tBX.create(\"DIV\",\n\t\t\t\t{\n\t\t\t\t\tattrs: { className: \"crm-entity-stream-section-content\" },\n\t\t\t\t\tchildren: [contentWrapper]\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\n\t\tconst header = this.prepareHeaderLayout();\n\t\tcontentWrapper.appendChild(header);\n\n\t\tconst detailWrapper = BX.create(\"DIV\",\n\t\t\t{\n\t\t\t\tattrs: {className: \"crm-entity-stream-content-detail\"},\n\t\t\t\thtml: description\n\t\t\t}\n\t\t);\n\t\tcontentWrapper.appendChild(detailWrapper);\n\n\t\t//region Author\n\t\tconst authorNode = this.prepareAuthorLayout();\n\t\tif(authorNode)\n\t\t{\n\t\t\tcontentWrapper.appendChild(authorNode);\n\t\t}\n\t\t//endregion\n\n\t\treturn wrapper;\n\t}\n\n\tstatic create(id, settings)\n\t{\n\t\tconst self = new Sender();\n\t\tself.initialize(id, settings);\n\t\treturn self;\n\t}\n}\n","import History from \"./history\";\n\n/** @memberof BX.Crm.Timeline.Items */\nexport default class Bizproc extends History\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\t}\n\n\tgetTitle()\n\t{\n\t\treturn this.getMessage(\"bizproc\");\n\t}\n\n\tprepareContent()\n\t{\n\t\tconst wrapper = BX.create(\"DIV\",\n\t\t\t{\n\t\t\t\tattrs: {className: \"crm-entity-stream-section crm-entity-stream-section-history crm-entity-stream-section-bp\"}\n\t\t\t}\n\t\t);\n\n\t\twrapper.appendChild(\n\t\t\tBX.create(\"DIV\",\n\t\t\t\t{ attrs: { className: \"crm-entity-stream-section-icon crm-entity-stream-section-icon-bp\" } }\n\t\t\t)\n\t\t);\n\n\t\tconst content = BX.create(\"DIV\", {attrs: {className: \"crm-entity-stream-content-event\"}});\n\t\tconst header = this.prepareHeaderLayout();\n\n\t\tcontent.appendChild(header);\n\t\tcontent.appendChild(\n\t\t\tBX.create(\"DIV\",\n\t\t\t\t{\n\t\t\t\t\tattrs: { className: \"crm-entity-stream-content-detail\" },\n\t\t\t\t\tchildren:\n\t\t\t\t\t\t[\n\t\t\t\t\t\t\tBX.create(\"DIV\",\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tattrs: { className: \"crm-entity-stream-content-detail-description\" },\n\t\t\t\t\t\t\t\t\thtml: this.prepareContentTextHtml()\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\n\t\t//region Author\n\t\tconst authorNode = this.prepareAuthorLayout();\n\t\tif(authorNode)\n\t\t{\n\t\t\tcontent.appendChild(authorNode);\n\t\t}\n\t\t//endregion\n\n\t\twrapper.appendChild(\n\t\t\tBX.create(\"DIV\", { attrs: { className: \"crm-entity-stream-section-content\" }, children: [ content ] })\n\t\t);\n\n\t\treturn wrapper;\n\t}\n\n\tprepareContentTextHtml()\n\t{\n\t\tconst type = this.getTextDataParam(\"TYPE\");\n\t\tif (type === 'ACTIVITY_ERROR')\n\t\t{\n\t\t\treturn '<strong>#TITLE#</strong>: #ERROR_TEXT#'\n\t\t\t\t.replace('#TITLE#', BX.util.htmlspecialchars(this.getTextDataParam(\"ACTIVITY_TITLE\")))\n\t\t\t\t.replace('#ERROR_TEXT#', BX.util.htmlspecialchars(this.getTextDataParam(\"ERROR_TEXT\")))\n\t\t}\n\n\t\tconst workflowName = this.getTextDataParam(\"WORKFLOW_TEMPLATE_NAME\");\n\t\tconst workflowStatus = this.getTextDataParam(\"WORKFLOW_STATUS_NAME\");\n\t\tif (!workflowName\n\t\t\t|| workflowStatus !== 'Created' && workflowStatus !== 'Completed' && workflowStatus !== 'Terminated'\n\t\t)\n\t\t{\n\t\t\treturn BX.util.htmlspecialchars(this.getTextDataParam(\"COMMENT\"));\n\t\t}\n\n\t\tlet label = BX.message('CRM_TIMELINE_BIZPROC_CREATED');\n\t\tif (workflowStatus === 'Completed')\n\t\t{\n\t\t\tlabel = BX.message('CRM_TIMELINE_BIZPROC_COMPLETED');\n\t\t}\n\t\telse if (workflowStatus === 'Terminated')\n\t\t{\n\t\t\tlabel = BX.message('CRM_TIMELINE_BIZPROC_TERMINATED');\n\t\t}\n\n\t\treturn BX.util.htmlspecialchars(label)\n\t\t\t.replace('#NAME#', '<strong>' + BX.util.htmlspecialchars(workflowName) + '</strong>');\n\t}\n\n\tstatic create(id, settings)\n\t{\n\t\tconst self = new Bizproc();\n\t\tself.initialize(id, settings);\n\t\treturn self;\n\t}\n}\n","import History from \"./history\";\n\n/** @memberof BX.Crm.Timeline.Actions */\nexport default class Scoring extends History\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\t}\n\n\tprepareContent()\n\t{\n\t\tconst outerWrapper = BX.create(\"DIV\", {\n\t\t\tattrs: {\n\t\t\t\tclassName: \"crm-entity-stream-section crm-entity-stream-section-history crm-entity-stream-section-scoring\"\n\t\t\t},\n\t\t\tevents: {\n\t\t\t\tclick: function () {\n\t\t\t\t\tlet url = \"/crm/ml/#entity#/#id#/detail\";\n\t\t\t\t\tconst ownerTypeId = this.getOwnerTypeId();\n\t\t\t\t\tconst ownerId = this.getOwnerId();\n\n\t\t\t\t\tlet ownerType;\n\t\t\t\t\tif (ownerTypeId === 1)\n\t\t\t\t\t{\n\t\t\t\t\t\townerType = \"lead\";\n\t\t\t\t\t}\n\t\t\t\t\telse if (ownerTypeId === 2)\n\t\t\t\t\t{\n\t\t\t\t\t\townerType = \"deal\";\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\turl = url.replace(\"#entity#\", ownerType);\n\t\t\t\t\turl = url.replace(\"#id#\", ownerId);\n\n\t\t\t\t\tif (BX.SidePanel)\n\t\t\t\t\t{\n\t\t\t\t\t\tBX.SidePanel.Instance.open(url, {width: 840});\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\ttop.location.href = url;\n\t\t\t\t\t}\n\t\t\t\t}.bind(this)\n\t\t\t}\n\t\t});\n\n\t\tconst scoringInfo = BX.prop.getObject(this._data, \"SCORING_INFO\", null);\n\t\tif(!scoringInfo)\n\t\t{\n\t\t\treturn outerWrapper;\n\t\t}\n\n\t\tlet score = BX.prop.getNumber(scoringInfo, \"SCORE\", 0);\n\t\tlet scoreDelta = BX.prop.getNumber(scoringInfo, \"SCORE_DELTA\", 0);\n\t\tscore = Math.round(score * 100);\n\t\tscoreDelta = Math.round(scoreDelta * 100);\n\n\t\tconst result = BX.create(\"DIV\",\n\t\t\t{\n\t\t\t\tattrs: {className: \"crm-entity-stream-content-scoring-total-result\"},\n\t\t\t\ttext: score + \"%\"\n\t\t\t});\n\n\t\tlet iconClass = \"crm-entity-stream-content-scoring-total-icon\";\n\t\tif (score < 50)\n\t\t{\n\t\t\ticonClass += \" crm-entity-stream-content-scoring-total-icon-fail\";\n\t\t}\n\t\telse if (score < 75)\n\t\t{\n\t\t\ticonClass += \" crm-entity-stream-content-scoring-total-icon-middle\";\n\t\t}\n\t\telse\n\t\t{\n\t\t\ticonClass += \" crm-entity-stream-content-scoring-total-icon-success\";\n\t\t}\n\n\t\tconst icon = BX.create(\"DIV\",\n\t\t\t{\n\t\t\t\tattrs: {className: iconClass}\n\t\t\t}\n\t\t);\n\n\t\touterWrapper.appendChild(\n\t\t\tBX.create(\"DIV\",\n\t\t\t\t{\n\t\t\t\t\tattrs: { className: \"crm-entity-stream-section-content\" },\n\t\t\t\t\tchildren: [\n\t\t\t\t\t\tBX.create(\"DIV\",\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tattrs: { className: \"crm-entity-stream-content-scoring-total\" },\n\t\t\t\t\t\t\t\tchildren: [\n\t\t\t\t\t\t\t\t\tBX.create(\"DIV\",\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tattrs: { className: \"crm-entity-stream-content-scoring-total-text\" },\n\t\t\t\t\t\t\t\t\t\t\ttext: BX.message(\"CRM_TIMELINE_SCORING_TITLE_2\")\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\tresult,\n\t\t\t\t\t\t\t\t\ticon\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t),\n\t\t\t\t\t\tBX.create(\"DIV\",\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tattrs: { className: \"crm-entity-stream-content-scoring-event\" },\n\t\t\t\t\t\t\t\tchildren: [\n\t\t\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\t\t\tscoreDelta !== 0 ?\n\t\t\t\t\t\t\t\t\t\t\tBX.create(\"DIV\",\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\tattrs: { className: \"crm-entity-stream-content-scoring-event-offset\" },\n\t\t\t\t\t\t\t\t\t\t\t\t\ttext: (scoreDelta > 0 ? \"+\" : \"\") + scoreDelta + \"%\"\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t\tnull\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t/*BX.create(\"DIV\",\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tattrs: { className: \"crm-entity-stream-content-scoring-event-detail\" },\n\t\t\t\t\t\t\t\t\t\t\ttext: \"<activity subject>\"\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t)*/\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t)\n\t\t\t\t\t]\n\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\n\t\treturn outerWrapper;\n\t}\n\n\tstatic create(id, settings)\n\t{\n\t\tconst self = new Scoring();\n\t\tself.initialize(id, settings);\n\t\treturn self;\n\t}\n}\n","import Stream from \"../stream\";\nimport {Item as ItemType, Order as OrderType, Delivery as DeliveryType} from \"../types\";\nimport HistoryItem from \"../items/history\";\nimport Modification from \"../items/modification\";\nimport Conversion from \"../items/conversion\";\nimport HistoryActivity from \"../items/history-activity\";\nimport Email from \"../items/email\";\nimport Call from \"../items/call\";\nimport Meeting from \"../items/meeting\";\nimport Task from \"../items/task\";\nimport WebForm from \"../items/webform\";\nimport Sms from \"../items/sms\";\nimport Request from \"../items/request\";\nimport OpenLine from \"../items/openline\";\nimport Rest from \"../items/rest\";\nimport Visit from \"../items/visit\";\nimport Zoom from \"../items/zoom\";\nimport OrderCreation from \"../items/order-creation\";\nimport OrderModification from \"../items/order-modification\";\nimport StoreDocumentCreation from \"../items/store-document-creation\";\nimport StoreDocumentModification from \"../items/store-document-modification\";\nimport ExternalNoticeStatusModification from \"../items/external-notice-status-modification\";\nimport ExternalNoticeModification from \"../items/external-notice-modification\";\nimport OrderCheck from \"../items/order-check\";\nimport FinalSummary from \"../items/final-summary\";\nimport FinalSummaryDocuments from \"../items/final-summary-documents\";\nimport Creation from \"../items/creation\";\nimport Restoration from \"../items/restoration\";\nimport Link from \"../items/link\";\nimport Unlink from \"../items/unlink\";\nimport Mark from \"../items/mark\";\nimport Comment from \"../items/comment\";\nimport Wait from \"../items/wait\";\nimport Document from \"../items/document\";\nimport Sender from \"../items/sender\";\nimport Bizproc from \"../items/bizproc\";\nimport Scoring from \"../items/scoring\";\n\n/** @memberof BX.Crm.Timeline.Streams */\nexport default class History extends Stream\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis._items = [];\n\t\tthis._wrapper = null;\n\t\tthis._fixedHistory = null;\n\t\tthis._emptySection = null;\n\t\tthis._currentDaySection = null;\n\t\tthis._lastDaySection = null;\n\t\tthis._lastDate = null;\n\t\tthis._anchor = null;\n\t\tthis._history = this;\n\t\tthis._enableLoading = false;\n\t\tthis._navigation = null;\n\t\tthis._scrollHandler = null;\n\t\tthis._loadingWaiter = null;\n\n\t\tthis._filterId = \"\";\n\t\tthis._isFilterApplied = false;\n\t\tthis._isFilterShown = false;\n\n\t\tthis._isRequestRunning = false;\n\n\t\tthis._filterButton = null;\n\t\tthis._filterWrapper = null;\n\t\tthis._filterResultStub = null;\n\t}\n\n\tdoInitialize()\n\t{\n\t\tthis._fixedHistory = this.getSetting(\"fixedHistory\");\n\t\tthis._ownerTypeId = this.getSetting(\"ownerTypeId\");\n\t\tthis._ownerId = this.getSetting(\"ownerId\");\n\t\tthis._serviceUrl = this.getSetting(\"serviceUrl\", \"\");\n\t\tif (!this.isStubMode())\n\t\t{\n\t\t\tlet itemData = this.getSetting(\"itemData\");\n\t\t\tif (!BX.type.isArray(itemData))\n\t\t\t{\n\t\t\t\titemData = [];\n\t\t\t}\n\n\t\t\tlet i, length, item;\n\t\t\tfor (i = 0, length = itemData.length; i < length; i++)\n\t\t\t{\n\t\t\t\titem = this.createItem(itemData[i]);\n\t\t\t\tif (item)\n\t\t\t\t{\n\t\t\t\t\tthis._items.push(item);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis._navigation = this.getSetting(\"navigation\", {});\n\n\t\t\tthis._filterWrapper = BX(\"timeline-filter\");\n\t\t\tthis._filterId = BX.prop.getString(this._settings, \"filterId\", this._id);\n\t\t\tthis._isFilterShown = this._filterWrapper\n\t\t\t\t&& BX.hasClass(this._filterWrapper, \"crm-entity-stream-section-filter-show\");\n\t\t\tthis._isFilterApplied = BX.prop.getBoolean(this._settings, \"isFilterApplied\", false);\n\n\t\t\tBX.addCustomEvent(\"BX.Main.Filter:apply\", this.onFilterApply.bind(this));\n\t\t}\n\t}\n\n\tlayout()\n\t{\n\t\tthis._wrapper = BX.create(\"DIV\", {});\n\t\tthis._container.appendChild(this._wrapper);\n\n\t\tconst now = BX.prop.extractDate(new Date());\n\t\tlet i, length, item;\n\n\t\tif (!this.isStubMode())\n\t\t{\n\t\t\tif (this._filterWrapper)\n\t\t\t{\n\t\t\t\tconst closeFilterButton = this._filterWrapper.querySelector(\".crm-entity-stream-filter-close\");\n\t\t\t\tif (closeFilterButton)\n\t\t\t\t{\n\t\t\t\t\tBX.bind(closeFilterButton, \"click\", this.onFilterClose.bind(this));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (i = 0, length = this._items.length; i < length; i++)\n\t\t\t{\n\t\t\t\titem = this._items[i];\n\t\t\t\titem.setContainer(this._wrapper);\n\n\t\t\t\tconst created = item.getCreatedDate();\n\t\t\t\tif (this._lastDate === null || this._lastDate.getTime() !== created.getTime())\n\t\t\t\t{\n\t\t\t\t\tthis._lastDate = created;\n\t\t\t\t\tif (now.getTime() === created.getTime())\n\t\t\t\t\t{\n\t\t\t\t\t\tthis._currentDaySection = this._lastDaySection = this.createCurrentDaySection();\n\t\t\t\t\t\tthis._wrapper.appendChild(this._currentDaySection);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tthis._lastDaySection = this.createDaySection(this._lastDate);\n\t\t\t\t\t\tthis._wrapper.appendChild(this._lastDaySection);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\titem._lastDate = this._lastDate;\n\n\t\t\t\titem.layout();\n\t\t\t}\n\n\t\t\tthis.enableLoading(this._items.length > 0);\n\t\t\tthis.refreshLayout();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis._currentDaySection = this._lastDaySection = this.createCurrentDaySection();\n\t\t\tthis._wrapper.appendChild(this._currentDaySection);\n\n\t\t\tthis._wrapper.appendChild(\n\t\t\t\tBX.create(\n\t\t\t\t\t\"DIV\",\n\t\t\t\t\t{\n\t\t\t\t\t\tattrs: {className: \"crm-entity-stream-section crm-entity-stream-section-createEntity crm-entity-stream-section-last\"},\n\t\t\t\t\t\tchildren:\n\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\tBX.create(\"DIV\", {attrs: {className: \"crm-entity-stream-section-icon crm-entity-stream-section-icon-info\"}}),\n\t\t\t\t\t\t\t\tBX.create(\n\t\t\t\t\t\t\t\t\t\"DIV\",\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tattrs: {className: \"crm-entity-stream-section-content\"},\n\t\t\t\t\t\t\t\t\t\tchildren:\n\t\t\t\t\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t\t\t\t\tBX.create(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"DIV\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tattrs: {className: \"crm-entity-stream-content-event\"},\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tchildren:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tBX.create(\"DIV\", {attrs: {className: \"crm-entity-stream-content-header\"}}),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tBX.create(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"DIV\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tattrs: {className: \"crm-entity-stream-content-detail\"},\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttext: BX.message(\"CRM_TIMELINE_HISTORY_STUB\")\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\n\t\tthis._manager.processHistoryLayoutChange();\n\t}\n\n\trefreshLayout()\n\t{\n\t\tif (this._filterWrapper)\n\t\t{\n\t\t\tif (this._wrapper.firstChild && this._filterWrapper !== this._wrapper.firstChild)\n\t\t\t{\n\t\t\t\tthis._wrapper.insertBefore(this._filterWrapper, this._wrapper.firstChild);\n\t\t\t}\n\t\t\telse if (!this._wrapper.firstChild && this._filterWrapper.parentNode !== this._wrapper)\n\t\t\t{\n\t\t\t\tthis._wrapper.appendChild(this._filterWrapper);\n\t\t\t}\n\t\t}\n\n\t\tthis.adjustFilterButton();\n\n\t\tconst length = this._items.length;\n\t\tif (length === 0 && this._isFilterApplied)\n\t\t{\n\t\t\tif (!this._filterEmptyResultSection)\n\t\t\t{\n\t\t\t\tthis._filterEmptyResultSection = this.createFilterEmptyResultSection();\n\t\t\t}\n\t\t\tthis._wrapper.appendChild(this._filterEmptyResultSection);\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._filterEmptyResultSection)\n\t\t{\n\t\t\tthis._filterEmptyResultSection = BX.remove(this._filterEmptyResultSection);\n\t\t}\n\n\t\tif (length === 0)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tfor (let i = 0; i < (length - 1); i++)\n\t\t{\n\t\t\tconst item = this._items[i];\n\t\t\tif (item.isTerminated())\n\t\t\t{\n\t\t\t\titem.markAsTerminated(false);\n\t\t\t}\n\t\t}\n\n\t\tthis._items[length - 1].markAsTerminated(true);\n\t}\n\n\tcalculateItemIndex(item)\n\t{\n\t\treturn 0;\n\t}\n\n\tcheckItemForTermination(item)\n\t{\n\t\treturn this.getLastItem() === item;\n\t}\n\n\thasContent()\n\t{\n\t\treturn (this._items.length > 0 || this._isFilterApplied || this._isStubMode);\n\t}\n\n\tgetLastItem()\n\t{\n\t\treturn this._items.length > 0 ? this._items[this._items.length - 1] : null;\n\t}\n\n\tgetItemByIndex(index)\n\t{\n\t\treturn index < this._items.length ? this._items[index] : null;\n\t}\n\n\tgetItemCount()\n\t{\n\t\treturn this._items.length;\n\t}\n\n\tremoveItemByIndex(index)\n\t{\n\t\tif (index < this._items.length)\n\t\t{\n\t\t\tthis._items.splice(index, 1);\n\t\t}\n\t}\n\n\tgetItemIndex(item)\n\t{\n\t\tfor (let i = 0, length = this._items.length; i < length; i++)\n\t\t{\n\t\t\tif (this._items[i] === item)\n\t\t\t{\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\n\t\treturn -1;\n\t}\n\n\tgetItemsByAssociatedEntity($entityTypeId, entityId)\n\t{\n\t\tif (!BX.type.isNumber($entityTypeId))\n\t\t{\n\t\t\t$entityTypeId = parseInt($entityTypeId);\n\t\t}\n\n\t\tif (!BX.type.isNumber(entityId))\n\t\t{\n\t\t\tentityId = parseInt(entityId);\n\t\t}\n\n\t\tif (isNaN($entityTypeId) || $entityTypeId <= 0 || isNaN(entityId) || entityId <= 0)\n\t\t{\n\t\t\treturn [];\n\t\t}\n\n\t\tconst results = [];\n\t\tfor (let i = 0, l = this._items.length; i < l; i++)\n\t\t{\n\t\t\tconst item = this._items[i];\n\t\t\tif (item.getAssociatedEntityTypeId() === $entityTypeId && item.getAssociatedEntityId() === entityId)\n\t\t\t{\n\t\t\t\tresults.push(item);\n\t\t\t}\n\t\t}\n\t\treturn results;\n\t}\n\n\tfindItemById(id)\n\t{\n\t\tid = id.toString();\n\t\tfor (let i = 0, l = this._items.length; i < l; i++)\n\t\t{\n\t\t\tif (this._items[i].getId() === id)\n\t\t\t{\n\t\t\t\treturn this._items[i];\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tcreateFilterEmptyResultSection()\n\t{\n\t\treturn BX.create(\"DIV\",\n\t\t\t{\n\t\t\t\tattrs: {className: \"crm-entity-stream-section crm-entity-stream-section-filter-empty\"},\n\t\t\t\tchildren:\n\t\t\t\t\t[\n\t\t\t\t\t\tBX.create(\"DIV\",\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tattrs: {className: \"crm-entity-stream-section-content\"},\n\t\t\t\t\t\t\t\tchildren:\n\t\t\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t\t\tBX.create(\"DIV\",\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tattrs: {className: \"crm-entity-stream-filter-empty\"},\n\t\t\t\t\t\t\t\t\t\t\t\tchildren:\n\t\t\t\t\t\t\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tBX.create(\"DIV\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tattrs: {className: \"crm-entity-stream-filter-empty-img\"}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tBX.create(\"DIV\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tattrs: {className: \"crm-entity-stream-filter-empty-text\"},\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttext: this.getMessage(\"filterEmptyResultStub\")\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t)\n\t\t\t\t\t]\n\t\t\t}\n\t\t);\n\t}\n\n\tadjustFilterButton()\n\t{\n\t\tif (!this._filterWrapper)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this._isFilterShown && this._items.length === 0)\n\t\t{\n\t\t\tif (!this._emptySection)\n\t\t\t{\n\t\t\t\tthis._emptySection = this.createEmptySection();\n\t\t\t}\n\t\t\tthis._wrapper.insertBefore(this._emptySection, this._filterWrapper);\n\t\t}\n\t\telse if (this._emptySection)\n\t\t{\n\t\t\tthis._emptySection = BX.remove(this._emptySection);\n\t\t}\n\n\t\tif (!this._filterButton)\n\t\t{\n\t\t\tthis._filterButton = BX.create(\"BUTTON\",\n\t\t\t\t{\n\t\t\t\t\tattrs: {className: \"crm-entity-stream-filter-label\"},\n\t\t\t\t\ttext: this.getMessage(\"filterButtonCaption\")\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tBX.bind(this._filterButton, \"click\", function (e) {\n\t\t\t\tthis.showFilter();\n\t\t\t}.bind(this));\n\t\t}\n\n\t\tconst section = this._wrapper.querySelector(\".crm-entity-stream-section-today-label, .crm-entity-stream-section-planned-label, .crm-entity-stream-section-history-label\");\n\t\tif (section)\n\t\t{\n\t\t\tconst sectionWrapper = section.querySelector(\".crm-entity-stream-section-content\");\n\t\t\tif (sectionWrapper)\n\t\t\t{\n\t\t\t\tif (this._filterButton.parentNode !== sectionWrapper)\n\t\t\t\t{\n\t\t\t\t\tsectionWrapper.appendChild(this._filterButton);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (this._isFilterApplied)\n\t\t{\n\t\t\tBX.addClass(this._filterButton, \"crm-entity-stream-filter-label-active\");\n\t\t}\n\t\telse\n\t\t{\n\t\t\tBX.removeClass(this._filterButton, \"crm-entity-stream-filter-label-active\");\n\t\t}\n\t}\n\n\tshowFilter(params)\n\t{\n\t\tif (!this._filterWrapper)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tBX.removeClass(this._filterWrapper, \"crm-entity-stream-section-filter-hide\");\n\t\tBX.addClass(this._filterWrapper, \"crm-entity-stream-section-filter-show\");\n\n\t\tthis._isFilterShown = true;\n\n\t\tif (BX.prop.getBoolean(params, \"enableAdjust\", true))\n\t\t{\n\t\t\tthis.adjustFilterButton();\n\t\t}\n\t}\n\n\thideFilter(params)\n\t{\n\t\tif (!this._filterWrapper)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tBX.removeClass(this._filterWrapper, \"crm-entity-stream-section-filter-show\");\n\t\tBX.addClass(this._filterWrapper, \"crm-entity-stream-section-filter-hide\");\n\n\t\tthis._isFilterShown = false;\n\n\t\tif (BX.prop.getBoolean(params, \"enableAdjust\", true))\n\t\t{\n\t\t\tthis.adjustFilterButton();\n\t\t}\n\t}\n\n\tonFilterClose(e)\n\t{\n\t\tthis.hideFilter();\n\n\t\twindow.setTimeout(\n\t\t\tfunction () {\n\t\t\t\tconst filter = BX.Main.filterManager.getById(this._filterId);\n\t\t\t\tif (filter)\n\t\t\t\t{\n\t\t\t\t\tfilter.resetFilter();\n\t\t\t\t}\n\t\t\t}.bind(this),\n\t\t\t500\n\t\t);\n\t}\n\n\tcreateEmptySection()\n\t{\n\t\treturn BX.create(\"DIV\",\n\t\t\t{\n\t\t\t\tattrs: {className: \"crm-entity-stream-section crm-entity-stream-section-planned-label\"},\n\t\t\t\tchildren: [BX.create(\"DIV\", {attrs: {className: \"crm-entity-stream-section-content\"}})]\n\t\t\t}\n\t\t);\n\t}\n\n\tcreateCurrentDaySection()\n\t{\n\t\treturn BX.create(\"DIV\",\n\t\t\t{\n\t\t\t\tattrs: {className: \"crm-entity-stream-section crm-entity-stream-section-today-label\"},\n\t\t\t\tchildren:\n\t\t\t\t\t[\n\t\t\t\t\t\tBX.create(\"DIV\",\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tattrs: {className: \"crm-entity-stream-section-content\"},\n\t\t\t\t\t\t\t\tchildren:\n\t\t\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t\t\tBX.create(\"DIV\",\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tattrs: {className: \"crm-entity-stream-today-label\"},\n\t\t\t\t\t\t\t\t\t\t\t\ttext: this.formatDate(BX.prop.extractDate(new Date()))\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t)\n\t\t\t\t\t]\n\t\t\t}\n\t\t);\n\t}\n\n\tcreateDaySection(date)\n\t{\n\t\treturn BX.create(\"DIV\",\n\t\t\t{\n\t\t\t\tattrs: {className: \"crm-entity-stream-section crm-entity-stream-section-history-label\"},\n\t\t\t\tchildren:\n\t\t\t\t\t[\n\t\t\t\t\t\tBX.create(\"DIV\",\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tattrs: {className: \"crm-entity-stream-section-content\"},\n\t\t\t\t\t\t\t\tchildren:\n\t\t\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t\t\tBX.create(\"DIV\",\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tattrs: {className: \"crm-entity-stream-history-label\"},\n\t\t\t\t\t\t\t\t\t\t\t\ttext: this.formatDate(date)\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t)\n\t\t\t\t\t]\n\t\t\t}\n\t\t);\n\t}\n\n\tcreateAnchor(index)\n\t{\n\t\tif (this._emptySection)\n\t\t{\n\t\t\tthis._emptySection = BX.remove(this._emptySection);\n\t\t}\n\n\t\tif (this._currentDaySection === null)\n\t\t{\n\t\t\tthis._currentDaySection = this.createCurrentDaySection();\n\t\t\tif (this._wrapper.firstChild)\n\t\t\t{\n\t\t\t\tthis._wrapper.insertBefore(this._currentDaySection, this._wrapper.firstChild);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis._wrapper.appendChild(this._currentDaySection);\n\t\t\t}\n\t\t}\n\n\t\tif (this._anchor === null)\n\t\t{\n\t\t\tthis._anchor = BX.create(\"DIV\", {attrs: {className: \"crm-entity-stream-section crm-entity-stream-section-shadow\"}});\n\t\t\tif (this._currentDaySection.nextSibling)\n\t\t\t{\n\t\t\t\tthis._wrapper.insertBefore(this._anchor, this._currentDaySection.nextSibling);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis._wrapper.appendChild(this._anchor);\n\t\t\t}\n\t\t}\n\t\treturn this._anchor;\n\t}\n\n\tcreateActivityItem(data)\n\t{\n\t\tconst typeId = BX.prop.getInteger(data, \"TYPE_ID\", ItemType.undefined);\n\t\tconst typeCategoryId = BX.prop.getInteger(data, \"TYPE_CATEGORY_ID\", 0);\n\t\tconst providerId = BX.prop.getString(\n\t\t\tBX.prop.getObject(data, \"ASSOCIATED_ENTITY\", {}),\n\t\t\t\"PROVIDER_ID\",\n\t\t\t\"\"\n\t\t);\n\t\tconst vueComponentId = 'TYPE_' + typeCategoryId + (providerId ? '_' + providerId : '');\n\t\tconst vueComponentsMap = new Map([\n\t\t\t['TYPE_' + BX.CrmActivityType.provider + '_CRM_NOTIFICATION', BX.Crm.Timeline.Notification],\n\t\t\t['TYPE_' + BX.CrmActivityType.provider + '_CRM_DELIVERY', BX.Crm.Timeline.DeliveryActivity],\n\t\t]);\n\t\tconst vueComponent = vueComponentsMap.has(vueComponentId) ? vueComponentsMap.get(vueComponentId) : null;\n\n\t\tif (typeId !== ItemType.activity)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tif (typeCategoryId === BX.CrmActivityType.email)\n\t\t{\n\t\t\treturn Email.create(\n\t\t\t\tdata[\"ID\"],\n\t\t\t\t{\n\t\t\t\t\thistory: this._history,\n\t\t\t\t\tfixedHistory: this._fixedHistory,\n\t\t\t\t\tcontainer: this._wrapper,\n\t\t\t\t\tactivityEditor: this._activityEditor,\n\t\t\t\t\tdata: data\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t\tif (typeCategoryId === BX.CrmActivityType.call)\n\t\t{\n\t\t\treturn Call.create(\n\t\t\t\tdata[\"ID\"],\n\t\t\t\t{\n\t\t\t\t\thistory: this._history,\n\t\t\t\t\tfixedHistory: this._fixedHistory,\n\t\t\t\t\tcontainer: this._wrapper,\n\t\t\t\t\tactivityEditor: this._activityEditor,\n\t\t\t\t\tdata: data\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t\telse if (typeCategoryId === BX.CrmActivityType.meeting)\n\t\t{\n\t\t\treturn Meeting.create(\n\t\t\t\tdata[\"ID\"],\n\t\t\t\t{\n\t\t\t\t\thistory: this._history,\n\t\t\t\t\tfixedHistory: this._fixedHistory,\n\t\t\t\t\tcontainer: this._wrapper,\n\t\t\t\t\tactivityEditor: this._activityEditor,\n\t\t\t\t\tdata: data\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t\telse if (typeCategoryId === BX.CrmActivityType.task)\n\t\t{\n\t\t\treturn Task.create(\n\t\t\t\tdata[\"ID\"],\n\t\t\t\t{\n\t\t\t\t\thistory: this._history,\n\t\t\t\t\tfixedHistory: this._fixedHistory,\n\t\t\t\t\tcontainer: this._wrapper,\n\t\t\t\t\tactivityEditor: this._activityEditor,\n\t\t\t\t\tdata: data\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t\telse if (typeCategoryId === BX.CrmActivityType.provider)\n\t\t{\n\t\t\tif (providerId === \"CRM_WEBFORM\")\n\t\t\t{\n\t\t\t\treturn WebForm.create(\n\t\t\t\t\tdata[\"ID\"],\n\t\t\t\t\t{\n\t\t\t\t\t\thistory: this._history,\n\t\t\t\t\t\tfixedHistory: this._fixedHistory,\n\t\t\t\t\t\tcontainer: this._wrapper,\n\t\t\t\t\t\tactivityEditor: this._activityEditor,\n\t\t\t\t\t\tdata: data\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t\telse if (providerId === 'CRM_SMS')\n\t\t\t{\n\t\t\t\treturn Sms.create(\n\t\t\t\t\tdata[\"ID\"],\n\t\t\t\t\t{\n\t\t\t\t\t\thistory: this._history,\n\t\t\t\t\t\tfixedHistory: this._fixedHistory,\n\t\t\t\t\t\tcontainer: this._wrapper,\n\t\t\t\t\t\tactivityEditor: this._activityEditor,\n\t\t\t\t\t\tdata: data,\n\t\t\t\t\t\tsmsStatusDescriptions: this._manager.getSetting('smsStatusDescriptions', {}),\n\t\t\t\t\t\tsmsStatusSemantics: this._manager.getSetting('smsStatusSemantics', {}),\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t\telse if (providerId === 'CRM_REQUEST')\n\t\t\t{\n\t\t\t\treturn Request.create(\n\t\t\t\t\tdata[\"ID\"],\n\t\t\t\t\t{\n\t\t\t\t\t\thistory: this._history,\n\t\t\t\t\t\tfixedHistory: this._fixedHistory,\n\t\t\t\t\t\tcontainer: this._wrapper,\n\t\t\t\t\t\tactivityEditor: this._activityEditor,\n\t\t\t\t\t\tdata: data\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t\telse if (providerId === \"IMOPENLINES_SESSION\")\n\t\t\t{\n\t\t\t\treturn OpenLine.create(\n\t\t\t\t\tdata[\"ID\"],\n\t\t\t\t\t{\n\t\t\t\t\t\thistory: this._history,\n\t\t\t\t\t\tfixedHistory: this._fixedHistory,\n\t\t\t\t\t\tcontainer: this._wrapper,\n\t\t\t\t\t\tactivityEditor: this._activityEditor,\n\t\t\t\t\t\tdata: data\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t\telse if (providerId === 'REST_APP')\n\t\t\t{\n\t\t\t\treturn Rest.create(\n\t\t\t\t\tdata[\"ID\"],\n\t\t\t\t\t{\n\t\t\t\t\t\thistory: this._history,\n\t\t\t\t\t\tfixedHistory: this._fixedHistory,\n\t\t\t\t\t\tcontainer: this._wrapper,\n\t\t\t\t\t\tactivityEditor: this._activityEditor,\n\t\t\t\t\t\tdata: data\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t\telse if (providerId === 'VISIT_TRACKER')\n\t\t\t{\n\t\t\t\treturn Visit.create(\n\t\t\t\t\tdata[\"ID\"],\n\t\t\t\t\t{\n\t\t\t\t\t\thistory: this,\n\t\t\t\t\t\tfixedHistory: this._fixedHistory,\n\t\t\t\t\t\tcontainer: this._wrapper,\n\t\t\t\t\t\tactivityEditor: this._activityEditor,\n\t\t\t\t\t\tdata: data\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t\telse if (providerId === 'CRM_DELIVERY')\n\t\t\t{\n\t\t\t\treturn HistoryActivity.create(\n\t\t\t\t\tdata[\"ID\"],\n\t\t\t\t\t{\n\t\t\t\t\t\thistory: this._history,\n\t\t\t\t\t\tfixedHistory: this._fixedHistory,\n\t\t\t\t\t\tcontainer: this._wrapper,\n\t\t\t\t\t\tactivityEditor: this._activityEditor,\n\t\t\t\t\t\tdata: data,\n\t\t\t\t\t\tvueComponent: vueComponent,\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t\telse if (providerId === 'ZOOM')\n\t\t\t{\n\t\t\t\treturn Zoom.create(\n\t\t\t\t\tdata[\"ID\"],\n\t\t\t\t\t{\n\t\t\t\t\t\thistory: this,\n\t\t\t\t\t\tfixedHistory: this._fixedHistory,\n\t\t\t\t\t\tcontainer: this._wrapper,\n\t\t\t\t\t\tactivityEditor: this._activityEditor,\n\t\t\t\t\t\tdata: data\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t\telse if (providerId === 'CRM_CALL_TRACKER')\n\t\t\t{\n\t\t\t\treturn Call.create(\n\t\t\t\t\tdata[\"ID\"],\n\t\t\t\t\t{\n\t\t\t\t\t\thistory: this,\n\t\t\t\t\t\tfixedHistory: this._fixedHistory,\n\t\t\t\t\t\tcontainer: this._wrapper,\n\t\t\t\t\t\tactivityEditor: this._activityEditor,\n\t\t\t\t\t\tdata: data\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\treturn HistoryActivity.create(\n\t\t\tdata[\"ID\"],\n\t\t\t{\n\t\t\t\thistory: this._history,\n\t\t\t\tfixedHistory: this._fixedHistory,\n\t\t\t\tcontainer: this._wrapper,\n\t\t\t\tactivityEditor: this._activityEditor,\n\t\t\t\tdata: data,\n\t\t\t\tvueComponent: vueComponent,\n\t\t\t}\n\t\t);\n\t}\n\n\tcreateOrderEntityItem(data)\n\t{\n\t\tconst entityId = BX.prop.getInteger(data, \"ASSOCIATED_ENTITY_TYPE_ID\", 0);\n\t\tconst typeId = BX.prop.getInteger(data, \"TYPE_CATEGORY_ID\", 0);\n\t\tif (entityId !== BX.CrmEntityType.enumeration.order\n\t\t\t&& entityId !== BX.CrmEntityType.enumeration.orderpayment\n\t\t\t&& entityId !== BX.CrmEntityType.enumeration.ordershipment)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tconst settings = {\n\t\t\thistory: this._history,\n\t\t\tfixedHistory: this._fixedHistory,\n\t\t\tcontainer: this._wrapper,\n\t\t\tactivityEditor: this._activityEditor,\n\t\t\tdata: data\n\t\t};\n\n\t\tif (typeId === ItemType.creation)\n\t\t{\n\t\t\treturn OrderCreation.create(data[\"ID\"], settings);\n\t\t}\n\t\telse if (typeId === ItemType.modification)\n\t\t{\n\t\t\treturn OrderModification.create(data[\"ID\"], settings);\n\t\t}\n\t\telse if (typeId === OrderType.encourageBuyProducts)\n\t\t{\n\t\t\tsettings.vueComponent = BX.Crm.Timeline.EncourageBuyProducts;\n\t\t\treturn HistoryItem.create(data[\"ID\"], settings);\n\t\t}\n\t}\n\n\tcreateStoreDocumentItem(data)\n\t{\n\t\tconst entityId = BX.prop.getInteger(data, \"ASSOCIATED_ENTITY_TYPE_ID\", 0);\n\t\tconst typeId = BX.prop.getInteger(data, \"TYPE_CATEGORY_ID\", 0);\n\t\tif (entityId !== BX.CrmEntityType.enumeration.storeDocument && entityId !== BX.CrmEntityType.enumeration.shipmentDocument)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tconst settings = {\n\t\t\thistory: this._history,\n\t\t\tfixedHistory: this._fixedHistory,\n\t\t\tcontainer: this._wrapper,\n\t\t\tactivityEditor: this._activityEditor,\n\t\t\tdata: data\n\t\t};\n\n\t\tif (typeId === ItemType.creation)\n\t\t{\n\t\t\treturn StoreDocumentCreation.create(data[\"ID\"], settings);\n\t\t}\n\t\telse if (typeId === ItemType.modification)\n\t\t{\n\t\t\treturn StoreDocumentModification.create(data[\"ID\"], settings);\n\t\t}\n\t}\n\n\tcreateExternalNotificationItem(data)\n\t{\n\t\tconst typeId = BX.prop.getInteger(data, \"TYPE_CATEGORY_ID\", 0);\n\t\tconst changedFieldName = BX.prop.getString(data, 'CHANGED_FIELD_NAME', '');\n\n\t\tif (typeId === ItemType.modification && changedFieldName === 'STATUS_ID')\n\t\t{\n\t\t\treturn ExternalNoticeStatusModification.create(\n\t\t\t\tdata[\"ID\"],\n\t\t\t\t{\n\t\t\t\t\thistory: this._history,\n\t\t\t\t\tcontainer: this._wrapper,\n\t\t\t\t\tactivityEditor: this._activityEditor,\n\t\t\t\t\tdata: data\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\treturn ExternalNoticeModification.create(\n\t\t\tdata[\"ID\"],\n\t\t\t{\n\t\t\t\thistory: this._history,\n\t\t\t\tcontainer: this._wrapper,\n\t\t\t\tactivityEditor: this._activityEditor,\n\t\t\t\tdata: data\n\t\t\t}\n\t\t);\n\t}\n\n\tcreateDeliveryItem(data)\n\t{\n\t\tconst typeId = BX.prop.getInteger(data, \"TYPE_ID\", ItemType.undefined);\n\t\tconst typeCategoryId = BX.prop.getInteger(data, \"TYPE_CATEGORY_ID\", 0);\n\n\t\tif (typeId !== ItemType.delivery)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tconst vueComponentsMap = new Map([\n\t\t\t[DeliveryType.taxiEstimationRequest, BX.Crm.Delivery.Taxi.EstimationRequest],\n\t\t\t[DeliveryType.taxiCallRequest, BX.Crm.Delivery.Taxi.CallRequest],\n\t\t\t[DeliveryType.taxiCancelledByManager, BX.Crm.Delivery.Taxi.CancelledByManager],\n\t\t\t[DeliveryType.taxiCancelledByDriver, BX.Crm.Delivery.Taxi.CancelledByDriver],\n\t\t\t[DeliveryType.taxiPerformerNotFound, BX.Crm.Delivery.Taxi.PerformerNotFound],\n\t\t\t[DeliveryType.taxiSmsProviderIssue, BX.Crm.Delivery.Taxi.SmsProviderIssue],\n\t\t\t[DeliveryType.taxiReturnedFinish, BX.Crm.Delivery.Taxi.ReturnedFinish],\n\t\t\t[DeliveryType.deliveryMessage, BX.Crm.Timeline.DeliveryMessage],\n\t\t\t[DeliveryType.deliveryCalculation, BX.Crm.Timeline.DeliveryCalculation]\n\t\t]);\n\n\t\tif (vueComponentsMap.has(typeCategoryId))\n\t\t{\n\t\t\treturn HistoryItem.create(\n\t\t\t\tdata[\"ID\"],\n\t\t\t\t{\n\t\t\t\t\thistory: this._history,\n\t\t\t\t\tfixedHistory: this._fixedHistory,\n\t\t\t\t\tcontainer: this._wrapper,\n\t\t\t\t\tactivityEditor: this._activityEditor,\n\t\t\t\t\tdata: data,\n\t\t\t\t\tvueComponent: vueComponentsMap.get(typeCategoryId),\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t}\n\n\tcreateItem(data)\n\t{\n\t\tconst typeId = BX.prop.getInteger(data, \"TYPE_ID\", ItemType.undefined);\n\t\tconst typeCategoryId = BX.prop.getInteger(data, \"TYPE_CATEGORY_ID\", 0);\n\n\t\tif (typeId === ItemType.activity)\n\t\t{\n\t\t\treturn this.createActivityItem(data);\n\t\t}\n\t\telse if (typeId === ItemType.order)\n\t\t{\n\t\t\treturn this.createOrderEntityItem(data);\n\t\t}\n\t\telse if (typeId === ItemType.storeDocument)\n\t\t{\n\t\t\treturn this.createStoreDocumentItem(data);\n\t\t}\n\t\telse if (typeId === ItemType.externalNotification)\n\t\t{\n\t\t\treturn this.createExternalNotificationItem(data);\n\t\t}\n\t\telse if (typeId === ItemType.orderCheck)\n\t\t{\n\t\t\treturn OrderCheck.create(\n\t\t\t\tdata[\"ID\"],\n\t\t\t\t{\n\t\t\t\t\thistory: this._history,\n\t\t\t\t\tcontainer: this._wrapper,\n\t\t\t\t\tactivityEditor: this._activityEditor,\n\t\t\t\t\tdata: data\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t\telse if (typeId === ItemType.finalSummary)\n\t\t{\n\t\t\treturn FinalSummary.create(\n\t\t\t\tdata[\"ID\"],\n\t\t\t\t{\n\t\t\t\t\thistory: this._history,\n\t\t\t\t\tcontainer: this._wrapper,\n\t\t\t\t\tactivityEditor: this._activityEditor,\n\t\t\t\t\tdata: data\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t\telse if (typeId === ItemType.finalSummaryDocuments)\n\t\t{\n\t\t\treturn FinalSummaryDocuments.create(\n\t\t\t\tdata[\"ID\"],\n\t\t\t\t{\n\t\t\t\t\thistory: this._history,\n\t\t\t\t\tcontainer: this._wrapper,\n\t\t\t\t\tactivityEditor: this._activityEditor,\n\t\t\t\t\tdata: data\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t\telse if (typeId === ItemType.creation)\n\t\t{\n\t\t\treturn Creation.create(\n\t\t\t\tdata[\"ID\"],\n\t\t\t\t{\n\t\t\t\t\thistory: this._history,\n\t\t\t\t\tcontainer: this._wrapper,\n\t\t\t\t\tactivityEditor: this._activityEditor,\n\t\t\t\t\tdata: data\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t\telse if (typeId === ItemType.restoration)\n\t\t{\n\t\t\treturn Restoration.create(\n\t\t\t\tdata[\"ID\"],\n\t\t\t\t{\n\t\t\t\t\thistory: this._history,\n\t\t\t\t\tcontainer: this._wrapper,\n\t\t\t\t\tdata: data\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t\telse if (typeId === ItemType.link)\n\t\t{\n\t\t\treturn Link.create(\n\t\t\t\tdata[\"ID\"],\n\t\t\t\t{\n\t\t\t\t\thistory: this,\n\t\t\t\t\tcontainer: this._wrapper,\n\t\t\t\t\tactivityEditor: this._activityEditor,\n\t\t\t\t\tdata: data\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t\telse if (typeId === ItemType.unlink)\n\t\t{\n\t\t\treturn Unlink.create(\n\t\t\t\tdata[\"ID\"],\n\t\t\t\t{\n\t\t\t\t\thistory: this,\n\t\t\t\t\tcontainer: this._wrapper,\n\t\t\t\t\tactivityEditor: this._activityEditor,\n\t\t\t\t\tdata: data\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t\telse if (typeId === ItemType.mark)\n\t\t{\n\t\t\treturn Mark.create(\n\t\t\t\tdata[\"ID\"],\n\t\t\t\t{\n\t\t\t\t\thistory: this._history,\n\t\t\t\t\tcontainer: this._wrapper,\n\t\t\t\t\tactivityEditor: this._activityEditor,\n\t\t\t\t\tfixedHistory: this._fixedHistory,\n\t\t\t\t\tdata: data\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t\telse if (typeId === ItemType.comment)\n\t\t{\n\t\t\treturn Comment.create(\n\t\t\t\tdata[\"ID\"],\n\t\t\t\t{\n\t\t\t\t\thistory: this._history,\n\t\t\t\t\tfixedHistory: this._fixedHistory,\n\t\t\t\t\tcontainer: this._wrapper,\n\t\t\t\t\tactivityEditor: this._activityEditor,\n\t\t\t\t\tdata: data\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t\telse if (typeId === ItemType.wait)\n\t\t{\n\t\t\treturn Wait.create(\n\t\t\t\tdata[\"ID\"],\n\t\t\t\t{\n\t\t\t\t\thistory: this._history,\n\t\t\t\t\tfixedHistory: this._fixedHistory,\n\t\t\t\t\tcontainer: this._wrapper,\n\t\t\t\t\tactivityEditor: this._activityEditor,\n\t\t\t\t\tdata: data\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t\telse if (typeId === ItemType.document)\n\t\t{\n\t\t\treturn Document.create(\n\t\t\t\tdata[\"ID\"],\n\t\t\t\t{\n\t\t\t\t\thistory: this._history,\n\t\t\t\t\tfixedHistory: this._fixedHistory,\n\t\t\t\t\tcontainer: this._wrapper,\n\t\t\t\t\tactivityEditor: this._activityEditor,\n\t\t\t\t\tdata: data\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t\telse if (typeId === ItemType.sender)\n\t\t{\n\t\t\treturn Sender.create(\n\t\t\t\tdata[\"ID\"],\n\t\t\t\t{\n\t\t\t\t\thistory: this,\n\t\t\t\t\tcontainer: this._wrapper,\n\t\t\t\t\tactivityEditor: this._activityEditor,\n\t\t\t\t\tdata: data\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t\telse if (typeId === ItemType.modification)\n\t\t{\n\t\t\treturn Modification.create(\n\t\t\t\tdata[\"ID\"],\n\t\t\t\t{\n\t\t\t\t\thistory: this._history,\n\t\t\t\t\tcontainer: this._wrapper,\n\t\t\t\t\tactivityEditor: this._activityEditor,\n\t\t\t\t\tdata: data\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t\telse if (typeId === ItemType.conversion)\n\t\t{\n\t\t\treturn Conversion.create(\n\t\t\t\tdata[\"ID\"],\n\t\t\t\t{\n\t\t\t\t\thistory: this._history,\n\t\t\t\t\tcontainer: this._wrapper,\n\t\t\t\t\tactivityEditor: this._activityEditor,\n\t\t\t\t\tdata: data\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t\telse if (typeId === ItemType.bizproc)\n\t\t{\n\t\t\treturn Bizproc.create(\n\t\t\t\tdata[\"ID\"],\n\t\t\t\t{\n\t\t\t\t\thistory: this._history,\n\t\t\t\t\tfixedHistory: this._fixedHistory,\n\t\t\t\t\tcontainer: this._wrapper,\n\t\t\t\t\tactivityEditor: this._activityEditor,\n\t\t\t\t\tdata: data\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t\telse if (typeId === ItemType.scoring)\n\t\t{\n\t\t\treturn Scoring.create(\n\t\t\t\tdata[\"ID\"],\n\t\t\t\t{\n\t\t\t\t\thistory: this._history,\n\t\t\t\t\tfixedHistory: this._fixedHistory,\n\t\t\t\t\tcontainer: this._wrapper,\n\t\t\t\t\tactivityEditor: this._activityEditor,\n\t\t\t\t\tdata: data\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t\telse if (typeId === ItemType.delivery)\n\t\t{\n\t\t\treturn this.createDeliveryItem(data);\n\t\t}\n\n\t\treturn HistoryItem.create(\n\t\t\tdata[\"ID\"],\n\t\t\t{\n\t\t\t\thistory: this._history,\n\t\t\t\tfixedHistory: this._fixedHistory,\n\t\t\t\tcontainer: this._wrapper,\n\t\t\t\tactivityEditor: this._activityEditor,\n\t\t\t\tdata: data\n\t\t\t}\n\t\t);\n\t}\n\n\taddItem(item, index)\n\t{\n\t\tif (!BX.type.isNumber(index) || index < 0)\n\t\t{\n\t\t\tindex = this.calculateItemIndex(item);\n\t\t}\n\n\t\tif (index < this._items.length)\n\t\t{\n\t\t\tthis._items.splice(index, 0, item);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis._items.push(item);\n\t\t}\n\n\t\tthis.refreshLayout();\n\t\tthis._manager.processHistoryLayoutChange();\n\t}\n\n\tdeleteItem(item)\n\t{\n\t\tconst index = this.getItemIndex(item);\n\t\tif (index < 0)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\titem.clearLayout();\n\t\tthis.removeItemByIndex(index);\n\n\t\tthis.refreshLayout();\n\t\tthis._manager.processHistoryLayoutChange();\n\t}\n\n\tresetLayout()\n\t{\n\t\tlet i;\n\n\t\tfor (i = (this._items.length - 1); i >= 0; i--)\n\t\t{\n\t\t\tthis._items[i].clearLayout();\n\t\t}\n\n\t\tthis._items = [];\n\n\t\tthis._currentDaySection = this._lastDaySection = this._emptySection = this._filterEmptyResultSection = null;\n\t\tthis._anchor = null;\n\t\tthis._lastDate = null;\n\n\t\t//Clean wrapper. Skip filter for prevent trembling.\n\t\tconst children = [];\n\t\tlet child;\n\t\tfor (i = 0; child = this._wrapper.children[i]; i++)\n\t\t{\n\t\t\tif (child !== this._filterWrapper)\n\t\t\t{\n\t\t\t\tchildren.push(child);\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0; child = children[i]; i++)\n\t\t{\n\t\t\tthis._wrapper.removeChild(child);\n\t\t}\n\t}\n\n\tonWindowScroll(e)\n\t{\n\t\tif (!this._loadingWaiter || !this._enableLoading || this._isRequestRunning)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst pos = this._loadingWaiter.getBoundingClientRect();\n\t\tif (pos.top <= document.documentElement.clientHeight)\n\t\t{\n\t\t\tthis.loadItems();\n\t\t}\n\t}\n\n\tonFilterApply(id, data, ctx, promise, params)\n\t{\n\t\tif (id !== this._filterId)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tparams.autoResolve = false;\n\t\tthis._isFilterApplied = BX.prop.getString(data, \"action\", \"\") === \"apply\";\n\t\tthis._isRequestRunning = true;\n\n\t\tBX.CrmDataLoader.create(\n\t\t\tthis._id,\n\t\t\t{\n\t\t\t\tserviceUrl: this.getSetting(\"serviceUrl\", \"\"),\n\t\t\t\taction: \"GET_HISTORY_ITEMS\",\n\t\t\t\tparams:\n\t\t\t\t\t{\n\t\t\t\t\t\t\"GUID\": this._id,\n\t\t\t\t\t\t\"OWNER_TYPE_ID\": this._manager.getOwnerTypeId(),\n\t\t\t\t\t\t\"OWNER_ID\": this._manager.getOwnerId()\n\t\t\t\t\t}\n\t\t\t}\n\t\t).load(\n\t\t\tfunction (sender, result) {\n\t\t\t\tthis.resetLayout();\n\t\t\t\tthis.bulkCreateItems(BX.prop.getArray(result, \"HISTORY_ITEMS\", []));\n\t\t\t\tthis.setNavigation(BX.prop.getObject(result, \"HISTORY_NAVIGATION\", {}));\n\n\t\t\t\tthis.refreshLayout();\n\t\t\t\tif (this._items.length > 0)\n\t\t\t\t{\n\t\t\t\t\tthis._manager.processHistoryLayoutChange();\n\t\t\t\t}\n\n\t\t\t\tpromise.fulfill();\n\t\t\t\tthis._isRequestRunning = false;\n\t\t\t}.bind(this)\n\t\t);\n\t}\n\n\tbulkCreateItems(itemData)\n\t{\n\t\tconst length = itemData.length;\n\t\tif (length === 0)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._filterEmptyResultSection)\n\t\t{\n\t\t\tthis._filterEmptyResultSection = BX.remove(this._filterEmptyResultSection);\n\t\t}\n\n\t\tconst now = BX.prop.extractDate(new Date());\n\t\tlet i, item;\n\t\tlet lastItemTime = \"\";\n\t\tfor (i = 0; i < length; i++)\n\t\t{\n\t\t\tconst itemId = BX.prop.getInteger(itemData[i], \"ID\", 0);\n\t\t\tif (itemId <= 0)\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tlastItemTime = BX.prop.getString(itemData[i], \"CREATED_SERVER\", \"\");\n\t\t\tif (this.findItemById(itemId) !== null)\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\titem = this.createItem(itemData[i]);\n\t\t\tthis._items.push(item);\n\n\t\t\tconst created = item.getCreatedDate();\n\t\t\tif (this._lastDate === null || this._lastDate.getTime() !== created.getTime())\n\t\t\t{\n\t\t\t\tthis._lastDate = created;\n\t\t\t\tif (now.getTime() === created.getTime())\n\t\t\t\t{\n\t\t\t\t\tthis._currentDaySection = this._lastDaySection = this.createCurrentDaySection();\n\t\t\t\t\tthis._wrapper.appendChild(this._currentDaySection);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis._lastDaySection = this.createDaySection(this._lastDate);\n\t\t\t\t\tthis._wrapper.appendChild(this._lastDaySection);\n\t\t\t\t}\n\t\t\t}\n\t\t\titem.layout();\n\t\t}\n\t}\n\n\tloadItems()\n\t{\n\t\tthis._isRequestRunning = true;\n\t\tBX.CrmDataLoader.create(\n\t\t\tthis._id,\n\t\t\t{\n\t\t\t\tserviceUrl: this.getSetting(\"serviceUrl\", \"\"),\n\t\t\t\taction: \"GET_HISTORY_ITEMS\",\n\t\t\t\tparams:\n\t\t\t\t\t{\n\t\t\t\t\t\t\"GUID\": this._id,\n\t\t\t\t\t\t\"OWNER_TYPE_ID\": this._manager.getOwnerTypeId(),\n\t\t\t\t\t\t\"OWNER_ID\": this._manager.getOwnerId(),\n\t\t\t\t\t\t\"NAVIGATION\": this._navigation\n\t\t\t\t\t}\n\t\t\t}\n\t\t).load(\n\t\t\tfunction (sender, result) {\n\t\t\t\tthis.bulkCreateItems(BX.prop.getArray(result, \"HISTORY_ITEMS\", []));\n\t\t\t\tthis.setNavigation(BX.prop.getObject(result, \"HISTORY_NAVIGATION\", {}));\n\n\t\t\t\tthis.refreshLayout();\n\t\t\t\tif (this._items.length > 0)\n\t\t\t\t{\n\t\t\t\t\tthis._manager.processHistoryLayoutChange();\n\t\t\t\t}\n\n\t\t\t\tthis._isRequestRunning = false;\n\t\t\t}.bind(this)\n\t\t);\n\t}\n\n\tgetNavigation()\n\t{\n\t\treturn this._navigation;\n\t}\n\n\tsetNavigation(navigation)\n\t{\n\t\tif (!BX.type.isPlainObject(navigation))\n\t\t{\n\t\t\tnavigation = {};\n\t\t}\n\n\t\tthis._navigation = navigation;\n\t\tthis.enableLoading(\n\t\t\tBX.prop.getString(this._navigation, \"OFFSET_TIMESTAMP\", \"\") !== \"\"\n\t\t);\n\t}\n\n\tisLoadingEnabled()\n\t{\n\t\treturn this._enableLoading;\n\t}\n\n\tenableLoading(enable)\n\t{\n\t\tenable = !!enable;\n\n\t\tif (this._enableLoading === enable)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis._enableLoading = enable;\n\n\t\tif (this._enableLoading)\n\t\t{\n\t\t\tif (this._items.length > 0)\n\t\t\t{\n\t\t\t\tthis._loadingWaiter = this._items[this._items.length - 1].getWrapper();\n\t\t\t}\n\n\t\t\tif (!this._scrollHandler)\n\t\t\t{\n\t\t\t\tthis._scrollHandler = BX.delegate(this.onWindowScroll, this);\n\t\t\t\tBX.bind(window, \"scroll\", this._scrollHandler);\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis._loadingWaiter = null;\n\n\t\t\tif (this._scrollHandler)\n\t\t\t{\n\t\t\t\tBX.unbind(window, \"scroll\", this._scrollHandler);\n\t\t\t\tthis._scrollHandler = null;\n\t\t\t}\n\t\t}\n\t}\n\n\tgetMessage(name)\n\t{\n\t\tconst m = History.messages;\n\t\treturn m.hasOwnProperty(name) ? m[name] : name;\n\t}\n\n\tstatic create(id, settings)\n\t{\n\t\tconst self = new History();\n\t\tself.initialize(id, settings);\n\t\tHistory.instances[self.getId()] = self;\n\t\treturn self;\n\t}\n\n\tstatic messages = {};\n\tstatic instances = {};\n}\n","import History from \"./history\";\n\n/** @memberof BX.Crm.Timeline.Streams */\nexport default class FixedHistory extends History\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis._items = [];\n\t\tthis._wrapper = null;\n\t\tthis._fixedHistory = this;\n\t\tthis._history = this;\n\t\tthis._isRequestRunning = false;\n\t}\n\n\tdoInitialize()\n\t{\n\t\tconst datetimeFormat = BX.message(\"FORMAT_DATETIME\").replace(/:SS/, \"\");\n\t\tthis._timeFormat = BX.date.convertBitrixFormat(datetimeFormat);\n\n\t\tlet itemData = this.getSetting(\"itemData\");\n\t\tif(!BX.type.isArray(itemData))\n\t\t{\n\t\t\titemData = [];\n\t\t}\n\n\t\tlet i, length, item;\n\t\tfor(i = 0, length = itemData.length; i < length; i++)\n\t\t{\n\t\t\titem = this.createItem(itemData[i]);\n\t\t\titem._isFixed = true;\n\t\t\tthis._items.push(item);\n\t\t}\n\t}\n\n\tsetHistory(history)\n\t{\n\t\tthis._history = history;\n\t}\n\n\tcheckItemForTermination(item)\n\t{\n\t\treturn false;\n\t}\n\n\tlayout()\n\t{\n\t\tthis._wrapper = BX.create(\"DIV\", {});\n\t\tthis.createAnchor();\n\t\tthis._container.insertBefore(this._wrapper,  this._editorContainer.nextElementSibling);\n\n\t\tfor (let i = 0; i < this._items.length; i++)\n\t\t{\n\t\t\tthis._items[i].setContainer(this._wrapper);\n\t\t\tthis._items[i].layout();\n\t\t}\n\n\t\tthis.refreshLayout();\n\n\t\tthis._manager.processHistoryLayoutChange();\n\t}\n\n\trefreshLayout()\n\t{\n\t}\n\n\tformatDate(date)\n\t{\n\t}\n\n\tcreateCurrentDaySection()\n\t{\n\t}\n\n\tcreateDaySection(date)\n\t{\n\t}\n\n\tcreateAnchor(index)\n\t{\n\t\tthis._anchor = BX.create(\"DIV\", { attrs:{className: \"crm-entity-stream-section-fixed-anchor\"} });\n\t\tthis._wrapper.appendChild(this._anchor);\n\t}\n\n\tonWindowScroll(e)\n\t{\n\t}\n\n\tonItemsLoad(sender, result)\n\t{\n\t}\n\n\tloadItems()\n\t{\n\t\tthis._isRequestRunning = true;\n\n\t\tBX.CrmDataLoader.create(\n\t\t\tthis._id,\n\t\t\t{\n\t\t\t\tserviceUrl: this.getSetting(\"serviceUrl\", \"\"),\n\t\t\t\taction: \"GET_FIXED_HISTORY_ITEMS\",\n\t\t\t\tparams:\n\t\t\t\t\t{\n\t\t\t\t\t\t\"OWNER_TYPE_ID\" : this._manager.getOwnerTypeId(),\n\t\t\t\t\t\t\"OWNER_ID\": this._manager.getOwnerId(),\n\t\t\t\t\t}\n\t\t\t}\n\t\t).load(BX.delegate(this.onItemsLoad, this));\n\t}\n\n\tstatic create(id, settings)\n\t{\n\t\tlet self = new FixedHistory();\n\t\tself.initialize(id, settings);\n\t\tthis.instances[self.getId()] = self;\n\t\treturn self;\n\t}\n}\n\nFixedHistory.instances = {};\n","/** @memberof BX.Crm.Timeline.Animation */\nexport default class Expand\n{\n\tconstructor()\n\t{\n\t\tthis._node = null;\n\t\tthis._callback = null;\n\t}\n\n\tinitialize(node, callback)\n\t{\n\t\tthis._node = node;\n\t\tthis._callback = BX.type.isFunction(callback) ? callback : null;\n\t}\n\n\trun()\n\t{\n\t\tconst position = BX.pos(this._node);\n\n\t\tthis._node.style.height = 0;\n\t\tthis._node.style.opacity = 0;\n\t\tthis._node.style.overflow = \"hidden\";\n\n\t\t(new BX.easing(\n\t\t\t\t{\n\t\t\t\t\tduration : 150,\n\t\t\t\t\tstart : { height: 0 },\n\t\t\t\t\tfinish: { height: position.height },\n\t\t\t\t\ttransition : BX.easing.makeEaseOut(BX.easing.transitions.quart),\n\t\t\t\t\tstep: BX.delegate(this.onNodeHeightStep, this),\n\t\t\t\t\tcomplete: BX.delegate(this.onNodeHeightComplete, this)\n\t\t\t\t}\n\t\t\t)\n\t\t).animate();\n\t}\n\n\tonNodeHeightStep(state)\n\t{\n\t\tthis._node.style.height = state.height + \"px\";\n\t}\n\n\tonNodeHeightComplete()\n\t{\n\t\tthis._node.style.overflow = \"\";\n\t\t(new BX.easing(\n\t\t\t\t{\n\t\t\t\t\tduration : 150,\n\t\t\t\t\tstart : { opacity: 0 },\n\t\t\t\t\tfinish: { opacity: 100 },\n\t\t\t\t\ttransition : BX.easing.makeEaseOut(BX.easing.transitions.quart),\n\t\t\t\t\tstep: BX.delegate(this.onNodeOpacityStep, this),\n\t\t\t\t\tcomplete: BX.delegate(this.onNodeOpacityComplete, this)\n\t\t\t\t}\n\t\t\t)\n\t\t).animate();\n\t}\n\n\tonNodeOpacityStep(state)\n\t{\n\t\tthis._node.style.opacity = state.opacity / 100;\n\t}\n\n\tonNodeOpacityComplete()\n\t{\n\t\tthis._node.style.height = \"\";\n\t\tthis._node.style.opacity = \"\";\n\t\tif(this._callback)\n\t\t{\n\t\t\tthis._callback();\n\t\t}\n\t}\n\n\tstatic create(node, callback)\n\t{\n\t\tconst self = new Expand();\n\t\tself.initialize(node, callback);\n\t\treturn self;\n\t}\n}\n","import Wait from \"./editors/wait\";\nimport Sms from \"./editors/sms\";\nimport Rest from \"./editors/rest\";\nimport Comment from \"./editors/comment\";\nimport Scheduled from \"./items/scheduled\";\nimport Item from \"./item\";\nimport Document from \"./items/document\";\nimport EntityChat from \"./streams/entitychat\";\nimport MenuBar from \"./tools/menubar\";\nimport AudioPlaybackRateSelector from \"./tools/audio-playback-rate-selector\";\nimport Schedule from \"./streams/schedule\";\nimport FixedHistory from \"./streams/fixedhistory\";\nimport History from \"./streams/history\";\nimport Expand from \"./animations/expand\";\n\n/** @memberof BX.Crm.Timeline */\nexport default class Manager\n{\n\tconstructor()\n\t{\n\t\tthis._id = \"\";\n\t\tthis._settings = {};\n\t\tthis._container = null;\n\t\tthis._ownerTypeId = 0;\n\t\tthis._ownerId = 0;\n\t\tthis._ownerInfo = null;\n\t\tthis._progressSemantics = \"\";\n\n\t\tthis._commentEditor = null;\n\t\tthis._waitEditor = null;\n\t\tthis._smsEditor = null;\n\t\tthis._zoomEditor = null;\n\t\tthis._chat = null;\n\t\tthis._schedule = null;\n\t\tthis._history = null;\n\t\tthis._fixedHistory = null;\n\t\tthis._activityEditor = null;\n\t\tthis._menuBar = null;\n\n\t\tthis._userId = 0;\n\t\tthis._readOnly = false;\n\t\tthis._pullTagName = \"\";\n\t}\n\n\tinitialize(id, settings)\n\t{\n\t\tthis._id = BX.type.isNotEmptyString(id) ? id : BX.util.getRandomString(4);\n\t\tthis._settings = settings ? settings : {};\n\n\t\tthis._ownerTypeId = parseInt(this.getSetting(\"ownerTypeId\"));\n\t\tthis._ownerId = parseInt(this.getSetting(\"ownerId\"));\n\t\tthis._ownerInfo = this.getSetting(\"ownerInfo\");\n\t\tthis._progressSemantics = BX.prop.getString(this._settings, \"progressSemantics\", \"\");\n\t\tthis._spotlightFastenShowed = this.getSetting(\"spotlightFastenShowed\", true);\n\t\tthis._audioPlaybackRate = parseFloat(this.getSetting(\"audioPlaybackRate\", 1));\n\t\tconst containerId = this.getSetting(\"containerId\");\n\t\tif (!BX.type.isNotEmptyString(containerId))\n\t\t{\n\t\t\tthrow \"Manager. A required parameter 'containerId' is missing.\";\n\t\t}\n\n\t\tthis._container = BX(containerId);\n\t\tif (!BX.type.isElementNode(this._container))\n\t\t{\n\t\t\tthrow \"Manager. Container node is not found.\";\n\t\t}\n\t\tthis._editorContainer = BX(this.getSetting(\"editorContainer\"));\n\n\t\tthis._userId = BX.prop.getInteger(this._settings, \"userId\", 0);\n\t\tthis._readOnly = BX.prop.getBoolean(this._settings, \"readOnly\", false);\n\n\t\tconst activityEditorId = this.getSetting(\"activityEditorId\");\n\t\tif (BX.type.isNotEmptyString(activityEditorId))\n\t\t{\n\t\t\tthis._activityEditor = BX.CrmActivityEditor.items[activityEditorId];\n\t\t\tif (!(this._activityEditor instanceof BX.CrmActivityEditor))\n\t\t\t{\n\t\t\t\tthrow \"BX.CrmTimeline. Activity editor instance is not found.\";\n\t\t\t}\n\t\t}\n\n\t\tconst ajaxId = this.getSetting(\"ajaxId\");\n\t\tconst currentUrl = this.getSetting(\"currentUrl\");\n\t\tconst serviceUrl = this.getSetting(\"serviceUrl\");\n\n\t\tthis._chat = EntityChat.create(\n\t\t\tthis._id,\n\t\t\t{\n\t\t\t\tmanager: this,\n\t\t\t\tcontainer: this._container,\n\t\t\t\tdata: this.getSetting(\"chatData\"),\n\t\t\t\tisStubMode: this._ownerId <= 0,\n\t\t\t\treadOnly: this._readOnly\n\t\t\t}\n\t\t);\n\n\t\tthis._schedule = Schedule.create(\n\t\t\tthis._id,\n\t\t\t{\n\t\t\t\tmanager: this,\n\t\t\t\tcontainer: this._container,\n\t\t\t\tactivityEditor: this._activityEditor,\n\t\t\t\titemData: this.getSetting(\"scheduleData\"),\n\t\t\t\tisStubMode: this._ownerId <= 0,\n\t\t\t\tajaxId: ajaxId,\n\t\t\t\tserviceUrl: serviceUrl,\n\t\t\t\tcurrentUrl: currentUrl,\n\t\t\t\tuserId: this._userId,\n\t\t\t\treadOnly: this._readOnly\n\t\t\t}\n\t\t);\n\n\t\tthis._fixedHistory = FixedHistory.create(\n\t\t\tthis._id,\n\t\t\t{\n\t\t\t\tmanager: this,\n\t\t\t\tcontainer: this._container,\n\t\t\t\teditorContainer: this._editorContainer,\n\t\t\t\tactivityEditor: this._activityEditor,\n\t\t\t\titemData: this.getSetting(\"fixedData\"),\n\t\t\t\tisStubMode: this._ownerId <= 0,\n\t\t\t\tajaxId: ajaxId,\n\t\t\t\tserviceUrl: serviceUrl,\n\t\t\t\tcurrentUrl: currentUrl,\n\t\t\t\tuserId: this._userId,\n\t\t\t\treadOnly: this._readOnly\n\t\t\t}\n\t\t);\n\n\t\tthis._history = History.create(\n\t\t\tthis._id,\n\t\t\t{\n\t\t\t\tmanager: this,\n\t\t\t\tcontainer: this._container,\n\t\t\t\tfixedHistory: this._fixedHistory,\n\t\t\t\tactivityEditor: this._activityEditor,\n\t\t\t\titemData: this.getSetting(\"historyData\"),\n\t\t\t\tnavigation: this.getSetting(\"historyNavigation\", {}),\n\t\t\t\tfilterId: BX.prop.getString(this._settings, \"historyFilterId\", this._id),\n\t\t\t\tisFilterApplied: BX.prop.getBoolean(this._settings, \"isHistoryFilterApplied\", false),\n\t\t\t\tisStubMode: this._ownerId <= 0,\n\t\t\t\tajaxId: ajaxId,\n\t\t\t\tserviceUrl: serviceUrl,\n\t\t\t\tcurrentUrl: currentUrl,\n\t\t\t\tuserId: this._userId,\n\t\t\t\treadOnly: this._readOnly\n\t\t\t}\n\t\t);\n\t\tthis._schedule.setHistory(this._history);\n\t\tthis._fixedHistory.setHistory(this._history);\n\n\t\tthis._commentEditor = Comment.create(\n\t\t\tthis._id,\n\t\t\t{\n\t\t\t\tmanager: this,\n\t\t\t\townerTypeId: this._ownerTypeId,\n\t\t\t\townerId: this._ownerId,\n\t\t\t\tserviceUrl: this.getSetting(\"serviceUrl\"),\n\t\t\t\tcontainer: this.getSetting(\"editorCommentContainer\"),\n\t\t\t\tinput: this.getSetting(\"editorCommentInput\"),\n\t\t\t\teditorName: this.getSetting(\"editorCommentEditorName\"),\n\t\t\t\tbutton: this.getSetting(\"editorCommentButton\"),\n\t\t\t\tcancelButton: this.getSetting(\"editorCommentCancelButton\")\n\t\t\t}\n\t\t);\n\t\tthis._commentEditor.setVisible(true);\n\t\tthis._commentEditor.setHistory(this._history);\n\n\t\tif (this._readOnly)\n\t\t{\n\t\t\tthis._commentEditor.setVisible(false);\n\t\t}\n\n\t\tif (BX.prop.getBoolean(this._settings, \"enableWait\", false))\n\t\t{\n\t\t\tthis._waitEditor = Wait.create(\n\t\t\t\tthis._id,\n\t\t\t\t{\n\t\t\t\t\tmanager: this,\n\t\t\t\t\townerTypeId: this._ownerTypeId,\n\t\t\t\t\townerId: this._ownerId,\n\t\t\t\t\tserviceUrl: this.getSetting(\"serviceUrl\"),\n\t\t\t\t\tconfig: this.getSetting(\"editorWaitConfig\", {}),\n\t\t\t\t\ttargetDates: this.getSetting(\"editorWaitTargetDates\", []),\n\t\t\t\t\tcontainer: this.getSetting(\"editorWaitContainer\"),\n\t\t\t\t\tconfigContainer: this.getSetting(\"editorWaitConfigContainer\"),\n\t\t\t\t\tinput: this.getSetting(\"editorWaitInput\"),\n\t\t\t\t\tbutton: this.getSetting(\"editorWaitButton\"),\n\t\t\t\t\tcancelButton: this.getSetting(\"editorWaitCancelButton\")\n\t\t\t\t}\n\t\t\t);\n\t\t\tthis._waitEditor.setVisible(false);\n\t\t}\n\n\t\tif (BX.prop.getBoolean(this._settings, \"enableSms\", false))\n\t\t{\n\t\t\tthis._smsEditor = Sms.create(\n\t\t\t\tthis._id,\n\t\t\t\t{\n\t\t\t\t\tmanager: this,\n\t\t\t\t\townerTypeId: this._ownerTypeId,\n\t\t\t\t\townerId: this._ownerId,\n\t\t\t\t\tserviceUrl: this.getSetting(\"serviceUrl\"),\n\t\t\t\t\tconfig: this.getSetting(\"editorSmsConfig\", {}),\n\t\t\t\t\tcontainer: this.getSetting(\"editorSmsContainer\"),\n\t\t\t\t\tinput: this.getSetting(\"editorSmsInput\"),\n\t\t\t\t\ttemplatesContainer: this.getSetting(\"editorSmsTemplatesContainer\"),\n\t\t\t\t\tbutton: this.getSetting(\"editorSmsButton\"),\n\t\t\t\t\tcancelButton: this.getSetting(\"editorSmsCancelButton\")\n\t\t\t\t}\n\t\t\t);\n\t\t\tthis._smsEditor.setVisible(false);\n\t\t}\n\n\t\tif (BX.prop.getBoolean(this._settings, \"enableZoom\", false) && BX.prop.getBoolean(this._settings, \"statusZoom\", false))\n\t\t{\n\t\t\tthis._zoomEditor = new BX.Crm.Zoom(\n\t\t\t\t{\n\t\t\t\t\tid: this._id,\n\t\t\t\t\tmanager: this,\n\t\t\t\t\townerTypeId: this._ownerTypeId,\n\t\t\t\t\townerId: this._ownerId,\n\t\t\t\t\tcontainer: this.getSetting(\"editorZoomContainer\"),\n\t\t\t\t\tuserId: this._userId\n\t\t\t\t}\n\t\t\t);\n\t\t\tthis._zoomEditor.setVisible(false);\n\t\t}\n\n\t\tif (BX.prop.getBoolean(this._settings, \"enableRest\", false))\n\t\t{\n\t\t\tthis._restEditor = Rest.create(\n\t\t\t\tthis._id,\n\t\t\t\t{\n\t\t\t\t\tmanager: this,\n\t\t\t\t\townerTypeId: this._ownerTypeId,\n\t\t\t\t\townerId: this._ownerId,\n\t\t\t\t\tplacement: BX.prop.getString(this._settings, \"restPlacement\", '')\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\tthis._chat.layout();\n\t\tthis._schedule.layout();\n\t\tthis._fixedHistory.layout();\n\t\tthis._history.layout();\n\n\t\tthis._pullTagName = BX.prop.getString(this._settings, \"pullTagName\", \"\");\n\t\tif (this._pullTagName !== \"\")\n\t\t{\n\t\t\tBX.addCustomEvent(\"onPullEvent-crm\", BX.delegate(this.onPullEvent, this));\n\t\t\tthis.extendWatch();\n\t\t}\n\t\tthis._menuBar = MenuBar.create(\n\t\t\tthis._id,\n\t\t\t{\n\t\t\t\tcontainer: BX(this.getSetting(\"menuBarContainer\")),\n\t\t\t\tmenuId: this.getSetting(\"menuBarObjectId\"),\n\t\t\t\townerInfo: this._ownerInfo,\n\t\t\t\tactivityEditor: this._activityEditor,\n\t\t\t\tcommentEditor: this._commentEditor,\n\t\t\t\twaitEditor: this._waitEditor,\n\t\t\t\tsmsEditor: this._smsEditor,\n\t\t\t\tzoomEditor: this._zoomEditor,\n\t\t\t\trestEditor: this._restEditor,\n\t\t\t\treadOnly: this._readOnly,\n\t\t\t\tmanager: this\n\t\t\t}\n\t\t);\n\n\t\tif (!this._readOnly)\n\t\t{\n\t\t\tthis._menuBar.reset();\n\t\t}\n\n\t\tBX.addCustomEvent(window, \"Crm.EntityProgress.Change\", BX.delegate(this.onEntityProgressChange, this));\n\t\tBX.ready(function () {\n\t\t\twindow.addEventListener(\"scroll\", BX.throttle(function () {\n\t\t\t\tBX.LazyLoad.onScroll();\n\t\t\t}, 80));\n\t\t});\n\t}\n\n\textendWatch()\n\t{\n\t\tif (BX.type.isFunction(BX.PULL) && this._pullTagName !== \"\")\n\t\t{\n\t\t\tBX.PULL.extendWatch(this._pullTagName);\n\t\t\twindow.setTimeout(BX.delegate(this.extendWatch, this), 60000);\n\t\t}\n\t}\n\n\tonPullEvent(command, params)\n\t{\n\t\tif (this._pullTagName !== BX.prop.getString(params, \"TAG\", \"\"))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (command === \"timeline_chat_create\")\n\t\t{\n\t\t\tthis.processChatCreate(params);\n\t\t}\n\t\telse if (command === \"timeline_activity_add\")\n\t\t{\n\t\t\tthis.processActivityExternalAdd(params);\n\t\t}\n\t\telse if (command === \"timeline_activity_update\")\n\t\t{\n\t\t\tthis.processActivityExternalUpdate(params);\n\t\t}\n\t\telse if (command === \"timeline_activity_delete\")\n\t\t{\n\t\t\tthis.processActivityExternalDelete(params);\n\t\t}\n\t\telse if (command === \"timeline_comment_add\")\n\t\t{\n\t\t\tthis.processCommentExternalAdd(params);\n\t\t}\n\t\telse if (command === \"timeline_link_add\")\n\t\t{\n\t\t\tthis.processLinkExternalAdd(params);\n\t\t}\n\t\telse if (command === \"timeline_link_delete\")\n\t\t{\n\t\t\tthis.processLinkExternalDelete(params);\n\t\t}\n\t\telse if (command === \"timeline_document_add\")\n\t\t{\n\t\t\tthis.processLinkExternalAdd(params);\n\t\t}\n\t\telse if (command === \"timeline_document_update\")\n\t\t{\n\t\t\tthis.processDocumentExternalUpdate(params);\n\t\t}\n\t\telse if (command === \"timeline_document_delete\")\n\t\t{\n\t\t\tthis.processDocumentExternalDelete(params);\n\t\t}\n\t\telse if (command === \"timeline_comment_update\")\n\t\t{\n\t\t\tthis.processCommentExternalUpdate(params);\n\t\t}\n\t\telse if (command === \"timeline_comment_delete\")\n\t\t{\n\t\t\tthis.processCommentExternalDelete(params);\n\t\t}\n\t\telse if (command === \"timeline_changed_binding\")\n\t\t{\n\t\t\tthis.processChangeBinding(params);\n\t\t}\n\t\telse if (command === \"timeline_item_change_fasten\")\n\t\t{\n\t\t\tthis.processItemChangeFasten(params);\n\t\t}\n\t\telse if (command === \"timeline_item_update\")\n\t\t{\n\t\t\tthis.processItemExternalUpdate(params);\n\t\t}\n\t\telse if (command === \"timeline_wait_add\")\n\t\t{\n\t\t\tthis.processWaitExternalAdd(params);\n\t\t}\n\t\telse if (command === \"timeline_wait_update\")\n\t\t{\n\t\t\tthis.processWaitExternalUpdate(params);\n\t\t}\n\t\telse if (command === \"timeline_wait_delete\")\n\t\t{\n\t\t\tthis.processWaitExternalDelete(params);\n\t\t}\n\t\telse if (command === \"timeline_bizproc_status\")\n\t\t{\n\t\t\tthis.processBizprocStatus(params);\n\t\t}\n\t\telse if (command === \"timeline_scoring_add\")\n\t\t{\n\t\t\tthis.processScoringExternalAdd(params);\n\t\t}\n\t}\n\n\tprocessChatCreate(params)\n\t{\n\t\tif (this._chat)\n\t\t{\n\t\t\tthis._chat.setData(BX.prop.getObject(params, \"CHAT_DATA\", {}));\n\t\t\tthis._chat.refreshLayout();\n\t\t}\n\t}\n\n\tprocessActivityExternalAdd(params)\n\t{\n\t\tlet entityData, scheduleItemData, historyItemData, scheduleItem, historyItem;\n\n\t\tentityData = BX.prop.getObject(params, \"ENTITY\", null);\n\t\tscheduleItemData = BX.prop.getObject(params, \"SCHEDULE_ITEM\", null);\n\t\thistoryItemData = BX.prop.getObject(params, \"HISTORY_ITEM\", null);\n\n\n\t\tif (entityData && historyItemData && !BX.type.isPlainObject(historyItemData[\"ASSOCIATED_ENTITY\"]))\n\t\t{\n\t\t\thistoryItemData[\"ASSOCIATED_ENTITY\"] = entityData;\n\t\t}\n\n\t\tif (scheduleItemData !== null && this._schedule.getItemByData(scheduleItemData) === null)\n\t\t{\n\t\t\tscheduleItem = this.addScheduleItem(scheduleItemData);\n\t\t\tscheduleItem.addWrapperClass(\"crm-entity-stream-section-updated\", 1000);\n\t\t}\n\n\t\tif (historyItemData !== null)\n\t\t{\n\t\t\thistoryItem = this._history.findItemById(BX.prop.getString(historyItemData, \"ID\"));\n\t\t\tif (!historyItem)\n\t\t\t{\n\t\t\t\thistoryItem = this.addHistoryItem(historyItemData);\n\t\t\t\tExpand.create(historyItem.getWrapper(), null).run();\n\t\t\t}\n\t\t}\n\t}\n\n\tprocessActivityExternalUpdate(params)\n\t{\n\t\tlet entityData, scheduleItemData, scheduleItem, historyItemData, historyItem, fixedHistoryItem;\n\n\t\tentityData = BX.prop.getObject(params, \"ENTITY\", null);\n\t\tscheduleItemData = BX.prop.getObject(params, \"SCHEDULE_ITEM\", null);\n\t\thistoryItemData = BX.prop.getObject(params, \"HISTORY_ITEM\", null);\n\n\t\tif (entityData)\n\t\t{\n\t\t\tif (historyItemData && !BX.type.isPlainObject(historyItemData[\"ASSOCIATED_ENTITY\"]))\n\t\t\t{\n\t\t\t\thistoryItemData[\"ASSOCIATED_ENTITY\"] = entityData;\n\t\t\t}\n\n\t\t\tconst entityId = BX.prop.getInteger(entityData, \"ID\", 0);\n\t\t\tconst historyItems = this._history.getItemsByAssociatedEntity(BX.CrmEntityType.enumeration.activity, entityId);\n\t\t\tfor (let i = 0, length = historyItems.length; i < length; i++)\n\t\t\t{\n\t\t\t\thistoryItem = historyItems[i];\n\t\t\t\thistoryItem.setAssociatedEntityData(entityData);\n\t\t\t\thistoryItem.refreshLayout();\n\t\t\t}\n\t\t\tconst fixedHistoryItems = this._fixedHistory.getItemsByAssociatedEntity(BX.CrmEntityType.enumeration.activity, entityId);\n\t\t\tfor (let i = 0, length = fixedHistoryItems.length; i < length; i++)\n\t\t\t{\n\t\t\t\tfixedHistoryItem = fixedHistoryItems[i];\n\t\t\t\tfixedHistoryItem.setAssociatedEntityData(entityData);\n\t\t\t\tfixedHistoryItem.refreshLayout();\n\t\t\t}\n\t\t}\n\n\t\tif (scheduleItemData !== null)\n\t\t{\n\t\t\tscheduleItem = this._schedule.getItemByAssociatedEntity(\n\t\t\t\tBX.CrmEntityType.enumeration.activity,\n\t\t\t\tBX.prop.getInteger(scheduleItemData, \"ASSOCIATED_ENTITY_ID\")\n\t\t\t);\n\n\t\t\tif (scheduleItem)\n\t\t\t{\n\t\t\t\tscheduleItem.setData(scheduleItemData);\n\t\t\t\tif (!scheduleItem.isDone())\n\t\t\t\t{\n\t\t\t\t\tthis._schedule.refreshItem(scheduleItem);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tif (historyItemData)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis._schedule.transferItemToHistory(\n\t\t\t\t\t\t\tscheduleItem,\n\t\t\t\t\t\t\thistoryItemData\n\t\t\t\t\t\t);\n\t\t\t\t\t\t//History data are already processed\n\t\t\t\t\t\thistoryItemData = null;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tthis._schedule.deleteItem(scheduleItem);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (!Scheduled.isDone(scheduleItemData))\n\t\t\t{\n\t\t\t\tscheduleItem = this.addScheduleItem(scheduleItemData);\n\t\t\t\tscheduleItem.addWrapperClass(\"crm-entity-stream-section-updated\", 1000);\n\t\t\t}\n\t\t}\n\n\t\tif (historyItemData !== null)\n\t\t{\n\t\t\thistoryItem = this._history.findItemById(BX.prop.getString(historyItemData, \"ID\"));\n\t\t\tif (!historyItem)\n\t\t\t{\n\t\t\t\thistoryItem = this.addHistoryItem(historyItemData);\n\t\t\t\tExpand.create(historyItem.getWrapper(), null).run();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\thistoryItem.setData(historyItemData);\n\t\t\t\thistoryItem.refreshLayout();\n\t\t\t\tfixedHistoryItem = this._fixedHistory.findItemById(BX.prop.getString(historyItemData, \"ID\"));\n\t\t\t\tif (fixedHistoryItem)\n\t\t\t\t{\n\t\t\t\t\tfixedHistoryItem.setData(historyItemData);\n\t\t\t\t\tfixedHistoryItem.refreshLayout()\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprocessActivityExternalDelete(params)\n\t{\n\t\tconst entityId = BX.prop.getInteger(params, \"ENTITY_ID\", 0);\n\t\tconst historyItems = this._history.getItemsByAssociatedEntity(BX.CrmEntityType.enumeration.activity, entityId);\n\t\tfor (let i = 0, length = historyItems.length; i < length; i++)\n\t\t{\n\t\t\tthis._history.deleteItem(historyItems[i]);\n\t\t}\n\n\t\tconst fixedHistoryItems = this._fixedHistory.getItemsByAssociatedEntity(BX.CrmEntityType.enumeration.activity, entityId);\n\t\tfor (let i = 0, length = fixedHistoryItems.length; i < length; i++)\n\t\t{\n\t\t\tthis._fixedHistory.deleteItem(fixedHistoryItems[i]);\n\t\t}\n\n\t\tconst scheduleItem = this._schedule.getItemByAssociatedEntity(BX.CrmEntityType.enumeration.activity, entityId);\n\t\tif (scheduleItem)\n\t\t{\n\t\t\tthis._schedule.deleteItem(scheduleItem);\n\t\t}\n\t}\n\n\tprocessCommentExternalAdd(params)\n\t{\n\t\tlet historyItemData, historyItem;\n\t\thistoryItemData = BX.prop.getObject(params, \"HISTORY_ITEM\", null);\n\t\tif (historyItemData !== null)\n\t\t{\n\t\t\twindow.setTimeout(\n\t\t\t\tBX.delegate(function () {\n\t\t\t\t\tif (!this._history.findItemById(historyItemData['ID']))\n\t\t\t\t\t{\n\t\t\t\t\t\thistoryItem = this.addHistoryItem(historyItemData);\n\t\t\t\t\t\tExpand.create(historyItem.getWrapper(), null).run();\n\t\t\t\t\t}\n\t\t\t\t}, this),\n\t\t\t\t1500\n\t\t\t);\n\t\t}\n\t}\n\n\tprocessLinkExternalAdd(params)\n\t{\n\t\tlet historyItemData, historyItem;\n\t\thistoryItemData = BX.prop.getObject(params, \"HISTORY_ITEM\", null);\n\t\tif (historyItemData !== null)\n\t\t{\n\t\t\thistoryItem = this.addHistoryItem(historyItemData);\n\t\t\tExpand.create(historyItem.getWrapper(), null).run();\n\t\t}\n\t}\n\n\tprocessLinkExternalDelete(params)\n\t{\n\t\tthis.processLinkExternalAdd(params);\n\t}\n\n\tprocessCommentExternalUpdate(params)\n\t{\n\t\tconst entityId = BX.prop.getInteger(params, \"ENTITY_ID\", 0);\n\t\tconst historyItemData = BX.prop.getObject(params, \"HISTORY_ITEM\", null);\n\t\tconst updateItem = this._history.findItemById(entityId);\n\t\tif (updateItem instanceof Comment && historyItemData !== null)\n\t\t{\n\t\t\tupdateItem.setData(historyItemData);\n\t\t\tupdateItem.switchToViewMode();\n\t\t}\n\t\tconst updateFixedItem = this._fixedHistory.findItemById(entityId);\n\t\tif (updateFixedItem instanceof Comment && historyItemData !== null)\n\t\t{\n\t\t\tupdateFixedItem.setData(historyItemData);\n\t\t\tupdateFixedItem.switchToViewMode();\n\t\t}\n\t}\n\n\tprocessCommentExternalDelete(params)\n\t{\n\t\tconst entityId = BX.prop.getInteger(params, \"ENTITY_ID\", 0);\n\t\twindow.setTimeout(\n\t\t\tBX.delegate(function () {\n\t\t\t\tconst deleteItem = this._history.findItemById(entityId);\n\t\t\t\tif (deleteItem instanceof Comment)\n\t\t\t\t{\n\t\t\t\t\tthis._history.deleteItem(deleteItem);\n\t\t\t\t}\n\t\t\t\tconst deleteFixedItem = this._fixedHistory.findItemById(entityId);\n\t\t\t\tif (deleteFixedItem instanceof Comment)\n\t\t\t\t{\n\t\t\t\t\tthis._fixedHistory.deleteItem(deleteFixedItem);\n\t\t\t\t}\n\t\t\t}, this),\n\t\t\t1200\n\t\t);\n\t}\n\n\tprocessDocumentExternalDelete(params)\n\t{\n\t\twindow.setTimeout(\n\t\t\tBX.delegate(function () {\n\t\t\t\tconst historyItemData = BX.prop.getObject(params, \"HISTORY_ITEM\", null);\n\t\t\t\tlet i, length;\n\t\t\t\tconst associatedEntityId = BX.prop.getInteger(historyItemData, \"ASSOCIATED_ENTITY_ID\", 0);\n\t\t\t\tlet historyItems = this._history.getItemsByAssociatedEntity(\n\t\t\t\t\tBX.CrmEntityType.enumeration.document,\n\t\t\t\t\tassociatedEntityId\n\t\t\t\t);\n\t\t\t\tfor (i = 0, length = historyItems.length; i < length; i++)\n\t\t\t\t{\n\t\t\t\t\tif (historyItems[i] instanceof Document)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis._history.deleteItem(historyItems[i]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\thistoryItems = this._fixedHistory.getItemsByAssociatedEntity(\n\t\t\t\t\tBX.CrmEntityType.enumeration.document,\n\t\t\t\t\tassociatedEntityId\n\t\t\t\t);\n\t\t\t\tfor (i = 0, length = historyItems.length; i < length; i++)\n\t\t\t\t{\n\t\t\t\t\tif (historyItems[i] instanceof Document)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis._fixedHistory.deleteItem(historyItems[i]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, this),\n\t\t\t100\n\t\t);\n\t}\n\n\tprocessDocumentExternalUpdate(params)\n\t{\n\t\tconst historyItemData = BX.prop.getObject(params, \"HISTORY_ITEM\", null);\n\t\tconst id = BX.prop.getInteger(historyItemData, \"ID\", 0);\n\t\tconst updateItem = this._history.findItemById(id);\n\t\tif (updateItem instanceof Document && historyItemData !== null)\n\t\t{\n\t\t\tupdateItem.setData(historyItemData);\n\t\t\tupdateItem.updateWrapper();\n\t\t}\n\t\tconst updateFixedItem = this._fixedHistory.findItemById(id);\n\t\tif (updateFixedItem instanceof Document && historyItemData !== null)\n\t\t{\n\t\t\tupdateFixedItem.setData(historyItemData);\n\t\t\tupdateFixedItem.updateWrapper();\n\t\t}\n\t}\n\n\tprocessChangeBinding(params)\n\t{\n\t\tconst entityId = BX.prop.getString(params, \"OLD_ID\", 0);\n\t\tconst entityNewId = BX.prop.getString(params, \"NEW_ID\", 0);\n\t\tconst item = this._history.findItemById(entityId);\n\t\tif (item instanceof Item)\n\t\t{\n\t\t\titem._id = entityNewId;\n\t\t\tconst itemData = item.getData();\n\t\t\titemData.ID = entityNewId;\n\t\t\titem.setData(itemData);\n\t\t}\n\n\t\tconst fixedItem = this._fixedHistory.findItemById(entityId);\n\t\tif (fixedItem instanceof Item)\n\t\t{\n\t\t\tfixedItem._id = entityNewId;\n\t\t\tconst fixedItemData = fixedItem.getData();\n\t\t\tfixedItemData.ID = entityNewId;\n\t\t\tfixedItem.setData(fixedItemData);\n\t\t}\n\t}\n\n\tprocessItemChangeFasten(params)\n\t{\n\t\tconst entityId = BX.prop.getInteger(params, \"ENTITY_ID\", 0);\n\t\tconst historyItemData = BX.prop.getObject(params, \"HISTORY_ITEM\", null);\n\t\twindow.setTimeout(\n\t\t\tBX.delegate(function () {\n\t\t\t\tconst fixedItem = this._fixedHistory.findItemById(entityId);\n\t\t\t\tif (historyItemData['IS_FIXED'] === 'N' && fixedItem)\n\t\t\t\t{\n\t\t\t\t\tfixedItem.onSuccessUnfasten();\n\t\t\t\t}\n\t\t\t\telse if (historyItemData['IS_FIXED'] === 'Y' && !fixedItem)\n\t\t\t\t{\n\t\t\t\t\tconst historyItem = this._history.findItemById(entityId);\n\t\t\t\t\tif (historyItem)\n\t\t\t\t\t{\n\t\t\t\t\t\thistoryItem.onSuccessFasten();\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tconst newFixedItem = this._fixedHistory.createItem(this._data);\n\t\t\t\t\t\tnewFixedItem._isFixed = true;\n\t\t\t\t\t\tthis._fixedHistory.addItem(newFixedItem, 0);\n\t\t\t\t\t\tnewFixedItem.layout();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, this),\n\t\t\t1200\n\t\t);\n\t}\n\n\tprocessItemExternalUpdate(params)\n\t{\n\t\tconst entityId = BX.prop.getInteger(params, \"ENTITY_ID\", 0);\n\t\tconst historyItemData = BX.prop.getObject(params, \"HISTORY_ITEM\", null);\n\t\tconst historyItem = this._history.findItemById(entityId);\n\t\tif (historyItem && historyItemData !== null)\n\t\t{\n\t\t\thistoryItem.setData(historyItemData);\n\t\t\thistoryItem.markAsTerminated(this._history.checkItemForTermination(historyItem));\n\t\t\thistoryItem.refreshLayout();\n\t\t\tif (historyItem.isTerminated())\n\t\t\t{\n\t\t\t\tBX.addClass(historyItem._wrapper, \"crm-entity-stream-section-last\");\n\t\t\t}\n\t\t}\n\t}\n\n\tprocessWaitExternalAdd(params)\n\t{\n\t\tconst scheduleItemData = BX.prop.getObject(params, \"SCHEDULE_ITEM\", null);\n\t\tif (scheduleItemData !== null)\n\t\t{\n\t\t\tthis.addScheduleItem(scheduleItemData);\n\t\t}\n\t}\n\n\tprocessWaitExternalUpdate(params)\n\t{\n\t\tlet entityData, scheduleItemData, scheduleItem, historyItemData, historyItem;\n\n\t\tentityData = BX.prop.getObject(params, \"ENTITY\", null);\n\t\tscheduleItemData = BX.prop.getObject(params, \"SCHEDULE_ITEM\", null);\n\t\thistoryItemData = BX.prop.getObject(params, \"HISTORY_ITEM\", null);\n\n\t\tif (entityData)\n\t\t{\n\t\t\tif (historyItemData && !BX.type.isPlainObject(historyItemData[\"ASSOCIATED_ENTITY\"]))\n\t\t\t{\n\t\t\t\thistoryItemData[\"ASSOCIATED_ENTITY\"] = entityData;\n\t\t\t}\n\n\t\t\tconst entityId = BX.prop.getInteger(entityData, \"ID\", 0);\n\t\t\tconst historyItems = this._history.getItemsByAssociatedEntity(BX.CrmEntityType.enumeration.wait, entityId);\n\t\t\tlet i = 0;\n\t\t\tconst length = historyItems.length;\n\t\t\tfor (; i < length; i++)\n\t\t\t{\n\t\t\t\thistoryItem = historyItems[i];\n\t\t\t\thistoryItem.setAssociatedEntityData(entityData);\n\t\t\t\thistoryItem.refreshLayout();\n\t\t\t}\n\t\t}\n\n\t\tif (scheduleItemData !== null)\n\t\t{\n\t\t\tscheduleItem = this._schedule.getItemByAssociatedEntity(\n\t\t\t\tBX.CrmEntityType.enumeration.wait,\n\t\t\t\tBX.prop.getInteger(scheduleItemData, \"ASSOCIATED_ENTITY_ID\")\n\t\t\t);\n\t\t\tif (!scheduleItem)\n\t\t\t{\n\t\t\t\tthis.addScheduleItem(scheduleItemData);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tscheduleItem.setData(scheduleItemData);\n\t\t\t\tif (!scheduleItem.isDone())\n\t\t\t\t{\n\t\t\t\t\tthis._schedule.refreshItem(scheduleItem);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tif (historyItemData)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis._schedule.transferItemToHistory(\n\t\t\t\t\t\t\tscheduleItem,\n\t\t\t\t\t\t\thistoryItemData\n\t\t\t\t\t\t);\n\t\t\t\t\t\t//History data are already processed\n\t\t\t\t\t\thistoryItemData = null;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tthis._schedule.deleteItem(scheduleItem);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (historyItemData !== null)\n\t\t{\n\t\t\thistoryItem = this._history.findItemById(BX.prop.getString(historyItemData, \"ID\"));\n\t\t\tif (!historyItem)\n\t\t\t{\n\t\t\t\thistoryItem = this.addHistoryItem(historyItemData);\n\t\t\t\tExpand.create(historyItem.getWrapper(), null).run();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\thistoryItem.setData(historyItemData);\n\t\t\t\thistoryItem.refreshLayout();\n\t\t\t}\n\t\t}\n\t}\n\n\tprocessWaitExternalDelete(params)\n\t{\n\t\tconst entityId = BX.prop.getInteger(params, \"ENTITY_ID\", 0);\n\t\tconst historyItems = this._history.getItemsByAssociatedEntity(BX.CrmEntityType.enumeration.wait, entityId);\n\t\tlet i = 0;\n\t\tconst length = historyItems.length;\n\t\tfor (; i < length; i++)\n\t\t{\n\t\t\tthis._history.deleteItem(historyItems[i]);\n\t\t}\n\n\t\tconst scheduleItem = this._schedule.getItemByAssociatedEntity(BX.CrmEntityType.enumeration.wait, entityId);\n\t\tif (scheduleItem)\n\t\t{\n\t\t\tthis._schedule.deleteItem(scheduleItem);\n\t\t}\n\t}\n\n\tprocessBizprocStatus(params)\n\t{\n\t\tlet historyItemData, historyItem;\n\n\t\thistoryItemData = BX.prop.getObject(params, \"HISTORY_ITEM\", null);\n\n\t\tif (historyItemData !== null)\n\t\t{\n\t\t\thistoryItem = this.addHistoryItem(historyItemData);\n\t\t\tExpand.create(historyItem.getWrapper(), null).run();\n\t\t}\n\t}\n\n\tprocessScoringExternalAdd(params)\n\t{\n\t\tlet historyItemData, historyItem;\n\t\thistoryItemData = BX.prop.getObject(params, \"HISTORY_ITEM\", null);\n\t\tif (historyItemData !== null)\n\t\t{\n\t\t\thistoryItem = this.addHistoryItem(historyItemData);\n\t\t\tExpand.create(historyItem.getWrapper(), null).run();\n\t\t}\n\t}\n\n\tonEntityProgressChange(sender, eventArgs)\n\t{\n\t\tif (BX.prop.getInteger(eventArgs, \"entityTypeId\", 0) !== this._ownerTypeId\n\t\t\t|| BX.prop.getInteger(eventArgs, \"entityId\", 0) !== this._ownerId\n\t\t)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst semantics = BX.prop.getString(eventArgs, \"semantics\", \"\");\n\t\tif (semantics === this._progressSemantics)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis._progressSemantics = semantics;\n\t\tthis._schedule.refreshLayout();\n\t}\n\n\tgetId()\n\t{\n\t\treturn this._id;\n\t}\n\n\tgetSetting(name, defaultval)\n\t{\n\t\treturn this._settings.hasOwnProperty(name) ? this._settings[name] : defaultval;\n\t}\n\n\tgetOwnerTypeId()\n\t{\n\t\treturn this._ownerTypeId;\n\t}\n\n\tgetOwnerId()\n\t{\n\t\treturn this._ownerId;\n\t}\n\n\tgetOwnerInfo()\n\t{\n\t\treturn this._ownerInfo;\n\t}\n\n\tisStubCounterEnabled()\n\t{\n\t\tif (this._ownerId <= 0)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\treturn (\n\t\t\t(this._ownerTypeId === BX.CrmEntityType.enumeration.deal || this._ownerTypeId === BX.CrmEntityType.enumeration.lead)\n\t\t\t&& this._progressSemantics === \"process\"\n\t\t);\n\t}\n\n\tgetSchedule()\n\t{\n\t\treturn this._schedule;\n\t}\n\n\tgetHistory()\n\t{\n\t\treturn this._history;\n\t}\n\n\tgetFixedHistory()\n\t{\n\t\treturn this._fixedHistory;\n\t}\n\n\tgetWaitEditor()\n\t{\n\t\treturn this._waitEditor;\n\t}\n\n\tgetSmsEditor()\n\t{\n\t\treturn this._smsEditor;\n\t}\n\n\tprocessSheduleLayoutChange()\n\t{\n\t}\n\n\tprocessHistoryLayoutChange()\n\t{\n\t\tthis._schedule.refreshLayout();\n\t}\n\n\tprocessEditingCompletion(editor)\n\t{\n\t\tif (this._waitEditor && editor === this._waitEditor)\n\t\t{\n\t\t\tthis._waitEditor.setVisible(false);\n\t\t\tthis._commentEditor.setVisible(true);\n\t\t\tthis._menuBar.setActiveItemById(\"comment\");\n\t\t}\n\t\tif (this._smsEditor && editor === this._smsEditor)\n\t\t{\n\t\t\tthis._smsEditor.setVisible(false);\n\t\t\tthis._commentEditor.setVisible(true);\n\t\t\tthis._menuBar.setActiveItemById(\"comment\");\n\t\t}\n\t}\n\n\tprocessEditingCancellation(editor)\n\t{\n\t\tif (this._waitEditor && editor === this._waitEditor)\n\t\t{\n\t\t\tthis._waitEditor.setVisible(false);\n\t\t\tthis._commentEditor.setVisible(true);\n\t\t\tthis._menuBar.setActiveItemById(\"comment\");\n\t\t}\n\t\tif (this._smsEditor && editor === this._smsEditor)\n\t\t{\n\t\t\tthis._smsEditor.setVisible(false);\n\t\t\tthis._commentEditor.setVisible(true);\n\t\t\tthis._menuBar.setActiveItemById(\"comment\");\n\t\t}\n\t}\n\n\taddScheduleItem(data)\n\t{\n\t\tconst item = this._schedule.createItem(data);\n\t\tconst index = this._schedule.calculateItemIndex(item);\n\t\tconst anchor = this._schedule.createAnchor(index);\n\t\tthis._schedule.addItem(item, index);\n\t\titem.layout({anchor: anchor});\n\n\t\treturn item;\n\t}\n\n\taddHistoryItem(data)\n\t{\n\t\tconst item = this._history.createItem(data);\n\t\tconst index = this._history.calculateItemIndex(item);\n\t\tconst historyAnchor = this._history.createAnchor(index);\n\t\tthis._history.addItem(item, index);\n\t\titem.layout({anchor: historyAnchor});\n\n\t\treturn item;\n\t}\n\n\trenderAudioDummy(durationText, onClick)\n\t{\n\t\treturn BX.create(\"DIV\", {\n\t\t\tattrs: {className: \"crm-audio-cap-wrap-container\"},\n\t\t\tchildren: [\n\t\t\t\tBX.create(\"DIV\", {\n\t\t\t\t\tattrs: {className: \"crm-audio-cap-wrap\"},\n\t\t\t\t\tchildren:\n\t\t\t\t\t\t[\n\t\t\t\t\t\t\tBX.create(\"DIV\", {\n\t\t\t\t\t\t\t\tattrs: {className: \"crm-audio-cap-time\"},\n\t\t\t\t\t\t\t\ttext: durationText\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t],\n\t\t\t\t\tevents: {click: onClick}\n\t\t\t\t})\n\t\t\t]\n\t\t});\n\t}\n\n\tloadMediaPlayer(id, filePath, mediaType, node, duration, options)\n\t{\n\t\tif (!duration)\n\t\t{\n\t\t\tduration = 0;\n\t\t}\n\t\tif (!options)\n\t\t{\n\t\t\toptions = {};\n\t\t}\n\t\tconst player = new BX.Fileman.Player(id, {\n\t\t\tsources: [\n\t\t\t\t{\n\t\t\t\t\tsrc: filePath,\n\t\t\t\t\ttype: mediaType\n\t\t\t\t}\n\t\t\t],\n\t\t\tisAudio: !options.video,\n\t\t\tskin: options.hasOwnProperty('skin') ? options.skin : 'vjs-timeline_player-skin',\n\t\t\twidth: options.width || 350,\n\t\t\theight: options.height || 30,\n\t\t\tduration: duration,\n\t\t\tplaybackRate: options.playbackRate || null,\n\t\t\tonInit: function (player) {\n\t\t\t\tplayer.vjsPlayer.controlBar.removeChild('timeDivider');\n\t\t\t\tplayer.vjsPlayer.controlBar.removeChild('durationDisplay');\n\t\t\t\tplayer.vjsPlayer.controlBar.removeChild('fullscreenToggle');\n\t\t\t\tplayer.vjsPlayer.controlBar.addChild('timeDivider');\n\t\t\t\tplayer.vjsPlayer.controlBar.addChild('durationDisplay');\n\t\t\t\tif (!player.isPlaying())\n\t\t\t\t{\n\t\t\t\t\tplayer.play();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tBX.cleanNode(node, false);\n\t\tnode.appendChild(player.createElement());\n\t\tplayer.init();\n\t\t// todo remove this after player will be able to get float playbackRate\n\t\tif (options.playbackRate > 1)\n\t\t{\n\t\t\tplayer.vjsPlayer.playbackRate(options.playbackRate);\n\t\t}\n\t\treturn player;\n\t}\n\n\tonActivityCreated(activity, data)\n\t{\n\t\t//Already processed in onPullEvent\n\t}\n\n\tisSpotlightShowed()\n\t{\n\t\treturn this._spotlightFastenShowed;\n\t}\n\n\tsetSpotlightShowed()\n\t{\n\t\tthis._spotlightFastenShowed = true;\n\t}\n\n\tgetAudioPlaybackRateSelector()\n\t{\n\t\tif (!this.audioPlaybackRateSelector)\n\t\t{\n\t\t\tthis.audioPlaybackRateSelector = new AudioPlaybackRateSelector({\n\t\t\t\tname: 'timeline_audio_playback',\n\t\t\t\tcurrentRate: this._audioPlaybackRate,\n\t\t\t\tavailableRates: [\n\t\t\t\t\t{\n\t\t\t\t\t\trate: 1,\n\t\t\t\t\t\thtml: BX.Loc.getMessage('CRM_TIMELINE_PLAYBACK_RATE_SELECTOR_RATE_1')\n\t\t\t\t\t\t\t.replace('#RATE#', '<span class=\"crm-audio-cap-speed-param\">1x</span>')\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\trate: 1.5,\n\t\t\t\t\t\thtml: BX.Loc.getMessage('CRM_TIMELINE_PLAYBACK_RATE_SELECTOR_RATE_1.5')\n\t\t\t\t\t\t\t.replace('#RATE#', '<span class=\"crm-audio-cap-speed-param\">1.5x</span>')\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\trate: 2,\n\t\t\t\t\t\thtml: BX.Loc.getMessage('CRM_TIMELINE_PLAYBACK_RATE_SELECTOR_RATE_2')\n\t\t\t\t\t\t\t.replace('#RATE#', '<span class=\"crm-audio-cap-speed-param\">2x</span>')\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\trate: 3,\n\t\t\t\t\t\thtml: BX.Loc.getMessage('CRM_TIMELINE_PLAYBACK_RATE_SELECTOR_RATE_3')\n\t\t\t\t\t\t\t.replace('#RATE#', '<span class=\"crm-audio-cap-speed-param\">3x</span>')\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\ttextMessageCode: 'CRM_TIMELINE_PLAYBACK_RATE_SELECTOR_TEXT'\n\t\t\t});\n\t\t}\n\n\t\treturn this.audioPlaybackRateSelector;\n\t}\n\n\tstatic create(id, settings)\n\t{\n\t\tconst self = new Manager();\n\t\tself.initialize(id, settings);\n\t\tManager.instances[self.getId()] = self;\n\t\treturn self;\n\t}\n\n\tstatic instances = {};\n}\n","/** @memberof BX.Crm.Timeline.Tools */\nexport const SmsWatcher =\n{\n\t_pullTagName: 'MESSAGESERVICE',\n\t_pullInited: false,\n\t_listeners: {},\n\tinitPull: function()\n\t{\n\t\tif (this._pullInited)\n\t\t\treturn;\n\n\t\tBX.addCustomEvent(\"onPullEvent-messageservice\", this.onPullEvent.bind(this));\n\t\tthis.extendWatch();\n\n\t\tthis._pullInited = true;\n\t},\n\tsubscribeOnMessageUpdate: function(messageId, callback)\n\t{\n\t\tthis.initPull();\n\t\tthis._listeners[messageId] = callback;\n\t},\n\tfireExternalStatusUpdate: function(messageId, message)\n\t{\n\t\tconst listener = this._listeners[messageId];\n\t\tif (listener)\n\t\t{\n\t\t\tlistener(message);\n\t\t}\n\t},\n\tonPullEvent: function(command, params)\n\t{\n\t\t// console.log(command, params);\n\t\tif (command === 'message_update')\n\t\t{\n\t\t\tfor (let i = 0; i < params.messages.length; ++i)\n\t\t\t{\n\t\t\t\tconst message = params.messages[i];\n\t\t\t\tthis.fireExternalStatusUpdate(message['ID'], message);\n\t\t\t}\n\t\t}\n\t},\n\textendWatch: function()\n\t{\n\t\tif(BX.type.isFunction(BX.PULL))\n\t\t{\n\t\t\tBX.PULL.extendWatch(this._pullTagName);\n\t\t\twindow.setTimeout(this.extendWatch.bind(this), 60000);\n\t\t}\n\t}\n};","import Activity from \"./activity\";\n\n/** @memberof BX.Crm.Timeline.Actions */\nexport default class SchedulePostpone extends Activity\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis._button = null;\n\t\tthis._clickHandler = BX.delegate(this.onClick, this);\n\t\tthis._isMenuShown = false;\n\n\t\tthis._menu = false;\n\t}\n\n\tdoLayout()\n\t{\n\t\tthis._button = BX.create(\"DIV\",\n\t\t\t{\n\t\t\t\tattrs:\n\t\t\t\t\t{\n\t\t\t\t\t\tclassName: this._isEnabled\n\t\t\t\t\t\t\t? \"crm-entity-stream-planned-action-aside\"\n\t\t\t\t\t\t\t: \"crm-entity-stream-planned-action-aside-disabled\"\n\t\t\t\t\t},\n\t\t\t\ttext: this.getMessage(\"postpone\")\n\t\t\t}\n\t\t);\n\n\t\tif(this._isEnabled)\n\t\t{\n\t\t\tBX.bind(this._button, \"click\", this._clickHandler)\n\t\t}\n\n\t\tthis._container.appendChild(this._button);\n\t}\n\n\topenMenu()\n\t{\n\t\tif(this._isMenuShown)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst handler = BX.delegate(this.onMenuItemClick, this);\n\t\tconst menuItems =\n\t\t\t[\n\t\t\t\t{id: \"hour_1\", text: this.getMessage(\"forOneHour\"), onclick: handler},\n\t\t\t\t{id: \"hour_2\", text: this.getMessage(\"forTwoHours\"), onclick: handler},\n\t\t\t\t{id: \"hour_3\", text: this.getMessage(\"forThreeHours\"), onclick: handler},\n\t\t\t\t{id: \"day_1\", text: this.getMessage(\"forOneDay\"), onclick: handler},\n\t\t\t\t{id: \"day_2\", text: this.getMessage(\"forTwoDays\"), onclick: handler},\n\t\t\t\t{id: \"day_3\", text: this.getMessage(\"forThreeDays\"), onclick: handler}\n\t\t\t];\n\n\t\tBX.PopupMenu.show(\n\t\t\tthis._id,\n\t\t\tthis._button,\n\t\t\tmenuItems,\n\t\t\t{\n\t\t\t\toffsetTop: 0,\n\t\t\t\toffsetLeft: 16,\n\t\t\t\tevents:\n\t\t\t\t\t{\n\t\t\t\t\t\tonPopupShow: BX.delegate(this.onMenuShow, this),\n\t\t\t\t\t\tonPopupClose: BX.delegate(this.onMenuClose, this),\n\t\t\t\t\t\tonPopupDestroy: BX.delegate(this.onMenuDestroy, this)\n\t\t\t\t\t}\n\t\t\t}\n\t\t);\n\n\t\tthis._menu = BX.PopupMenu.currentItem;\n\t}\n\n\tcloseMenu()\n\t{\n\t\tif(!this._isMenuShown)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif(this._menu)\n\t\t{\n\t\t\tthis._menu.close();\n\t\t}\n\t}\n\n\tonClick()\n\t{\n\t\tif(!this._isEnabled)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif(this._isMenuShown)\n\t\t{\n\t\t\tthis.closeMenu();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.openMenu();\n\t\t}\n\t}\n\n\tonMenuItemClick(e, item)\n\t{\n\t\tthis.closeMenu();\n\n\t\tlet offset = 0;\n\t\tif(item.id === \"hour_1\")\n\t\t{\n\t\t\toffset = 3600;\n\t\t}\n\t\telse if(item.id === \"hour_2\")\n\t\t{\n\t\t\toffset = 7200;\n\t\t}\n\t\telse if(item.id === \"hour_3\")\n\t\t{\n\t\t\toffset = 10800;\n\t\t}\n\t\telse if(item.id === \"day_1\")\n\t\t{\n\t\t\toffset = 86400;\n\t\t}\n\t\telse if(item.id === \"day_2\")\n\t\t{\n\t\t\toffset = 172800;\n\t\t}\n\t\telse if(item.id === \"day_3\")\n\t\t{\n\t\t\toffset = 259200;\n\t\t}\n\n\t\tif(offset > 0 && this._item)\n\t\t{\n\t\t\tthis._item.postpone(offset);\n\t\t}\n\t}\n\n\tonMenuShow()\n\t{\n\t\tthis._isMenuShown = true;\n\t}\n\n\tonMenuClose()\n\t{\n\t\tif(this._menu && this._menu.popupWindow)\n\t\t{\n\t\t\tthis._menu.popupWindow.destroy();\n\t\t}\n\t}\n\n\tonMenuDestroy()\n\t{\n\t\tthis._isMenuShown = false;\n\t\tthis._menu = null;\n\n\t\tif(typeof(BX.PopupMenu.Data[this._id]) !== \"undefined\")\n\t\t{\n\t\t\tdelete(BX.PopupMenu.Data[this._id]);\n\t\t}\n\t}\n\n\tgetMessage(name)\n\t{\n\t\tconst m = SchedulePostpone.messages;\n\t\treturn m.hasOwnProperty(name) ? m[name] : name;\n\t}\n\n\tstatic create(id, settings)\n\t{\n\t\tconst self = new SchedulePostpone();\n\t\tself.initialize(id, settings);\n\t\treturn self;\n\t}\n\n\tstatic messages = {};\n}\n","import Shift from \"./shift\";\n\n/** @memberof BX.Crm.Timeline.Animation */\nexport default class Comment\n{\n\tconstructor()\n\t{\n\t\tthis._node = null;\n\t\tthis._anchor = null;\n\t\tthis._nodeParent  = null;\n\t\tthis._startPosition = null;\n\t\tthis._events = null;\n\t}\n\n\tinitialize(node, anchor, startPosition, events)\n\t{\n\t\tthis._node = node;\n\t\tthis._anchor = anchor;\n\t\tthis._nodeParent  = node.parentNode;\n\t\tthis._startPosition = startPosition;\n\t\tthis._events = BX.type.isPlainObject(events) ? events : {};\n\n\t}\n\n\trun()\n\t{\n\t\tBX.addClass(this._node, 'crm-entity-stream-section-animate-start');\n\n\t\tthis._node.style.position = \"absolute\";\n\t\tthis._node.style.width = this._startPosition.width + \"px\";\n\t\tthis._node.style.height = this._startPosition.height + \"px\";\n\t\tthis._node.style.top = this._startPosition.top - 30 + \"px\";\n\t\tthis._node.style.left = this._startPosition.left + \"px\";\n\t\tthis._node.style.opacity = 0;\n\t\tthis._node.style.zIndex = 960;\n\n\t\tdocument.body.appendChild(this._node);\n\n\t\tconst nodeOpacityAnim = new BX.easing({\n\t\t\tduration: 350,\n\t\t\tstart: {opacity: 0},\n\t\t\tfinish: {opacity: 100},\n\t\t\ttransition: BX.easing.makeEaseOut(BX.easing.transitions.quart),\n\t\t\tstep: BX.proxy(function (state) {\n\t\t\t\tthis._node.style.opacity = state.opacity / 100;\n\t\t\t}, this),\n\t\t\tcomplete: BX.proxy(function () {\n\t\t\t\tif (BX.type.isFunction(this._events[\"start\"]))\n\t\t\t\t{\n\t\t\t\t\tthis._events[\"start\"]();\n\t\t\t\t}\n\t\t\t\tconst shift = Shift.create(\n\t\t\t\t\tthis._node,\n\t\t\t\t\tthis._anchor,\n\t\t\t\t\tthis._startPosition,\n\t\t\t\t\tfalse,\n\t\t\t\t\t{complete: BX.delegate(this.finish, this)}\n\t\t\t\t);\n\t\t\t\tshift.run();\n\t\t\t}, this)\n\t\t});\n\t\tnodeOpacityAnim.animate();\n\n\n\t\tif(BX.type.isFunction(this._events[\"complete\"]))\n\t\t{\n\t\t\tthis._events[\"complete\"]();\n\t\t}\n\t}\n\n\tfinish()\n\t{\n\t\tthis._node.style.position = \"\";\n\t\tthis._node.style.width = \"\";\n\t\tthis._node.style.height = \"\";\n\t\tthis._node.style.top = \"\";\n\t\tthis._node.style.left = \"\";\n\t\tthis._node.style.opacity = \"\";\n\t\tthis._node.style.zIndex = \"\";\n\t\tthis._anchor.style.height = \"\";\n\t\tthis._anchor.parentNode.insertBefore(this._node, this._anchor.nextSibling);\n\t\tsetTimeout(\n\t\t\tBX.delegate(function() {\n\t\t\t\tBX.removeClass(this._node, 'crm-entity-stream-section-animate-start');\n\t\t\t\tBX.remove(this._anchor);\n\t\t\t}, this),\n\t\t\t0\n\t\t);\n\t}\n\n\tstatic create(node, anchor, startPosition, events)\n\t{\n\t\tconst self = new Comment();\n\t\tself.initialize(node, anchor, startPosition, events);\n\t\treturn self;\n\t}\n}\n","import EncourageBuyProducts from './encourage-buy-products/component';\nimport Notification from './notification/component';\nimport DeliveryActivity from './delivery-activity/component';\nimport DeliveryMessage from './delivery-message/component';\nimport DeliveryCalculation from './delivery-calculation/component';\nimport Manager from \"./manager\";\nimport Stream from \"./stream\";\nimport Editor from \"./editor\";\nimport History from \"./streams/history\";\nimport FixedHistory from \"./streams/fixedhistory\";\nimport EntityChat from \"./streams/entitychat\";\nimport Schedule from \"./streams/schedule\";\nimport Comment from \"./editors/comment\";\nimport Wait from \"./editors/wait\";\nimport Rest from \"./editors/rest\";\nimport Sms from \"./editors/sms\";\nimport WaitConfigurationDialog from \"./tools/wait-configuration-dialog\";\nimport SchedulePostponeController from \"./tools/schedule-postpone-controller\";\nimport MenuBar from \"./tools/menubar\";\nimport {SmsWatcher} from \"./tools/sms-watcher\";\nimport AudioPlaybackRateSelector from \"./tools/audio-playback-rate-selector\";\nimport * as Types from \"./types\";\nimport Action from \"./action\";\nimport Activity from \"./actions/activity\";\nimport {Call, HistoryCall, ScheduleCall} from \"./actions/call\";\nimport {Email, HistoryEmail, ScheduleEmail} from \"./actions/email\";\nimport {OpenLine} from \"./actions/openline\";\nimport SchedulePostpone from \"./actions/schedule-postpone\";\nimport Item from \"./item\";\nimport HistoryItem from \"./items/history\";\nimport HistoryActivity from \"./items/history-activity\";\nimport CommentItem from \"./items/comment\";\nimport Modification from \"./items/modification\";\nimport Mark from \"./items/mark\";\nimport Creation from \"./items/creation\";\nimport Restoration from \"./items/restoration\";\nimport Relation from \"./items/relation\";\nimport Link from \"./items/link\";\nimport Unlink from \"./items/unlink\";\nimport EmailItem from \"./items/email\";\nimport CallItem from \"./items/call\";\nimport Meeting from \"./items/meeting\";\nimport Task from \"./items/task\";\nimport WebForm from \"./items/webform\";\nimport WaitItem from \"./items/wait\";\nimport Document from \"./items/document\";\nimport Sender from \"./items/sender\";\nimport Bizproc from \"./items/bizproc\";\nimport SmsItem from \"./items/sms\";\nimport Request from \"./items/request\";\nimport RestItem from \"./items/rest\";\nimport OpenLineItem from \"./items/openline\";\nimport Zoom from \"./items/zoom\";\nimport Conversion from \"./items/conversion\";\nimport Visit from \"./items/visit\";\nimport Scoring from \"./items/scoring\";\nimport OrderCreation from \"./items/order-creation\";\nimport OrderModification from \"./items/order-modification\";\nimport StoreDocumentCreation from \"./items/store-document-creation\";\nimport StoreDocumentModification from \"./items/store-document-modification\";\nimport FinalSummaryDocuments from \"./items/final-summary-documents\";\nimport FinalSummary from \"./items/final-summary\";\nimport ExternalNoticeModification from \"./items/external-notice-modification\";\nimport ExternalNoticeStatusModification from \"./items/external-notice-status-modification\";\nimport OrderCheck from \"./items/order-check\";\nimport Scheduled from \"./items/scheduled\";\nimport ScheduledActivity from \"./items/scheduled/activity\";\nimport ScheduledEmail from \"./items/scheduled/email\";\nimport ScheduledCall from \"./items/scheduled/call\";\nimport CallTracker from \"./items/scheduled/call-tracker\";\nimport ScheduledMeeting from \"./items/scheduled/meeting\";\nimport ScheduledTask from \"./items/scheduled/task\";\nimport ScheduledStoreDocument from \"./items/scheduled/store-document\";\nimport ScheduledWebForm from \"./items/scheduled/webform\";\nimport ScheduledWait from \"./items/scheduled/wait\";\nimport ScheduledRequest from \"./items/scheduled/request\";\nimport ScheduledRest from \"./items/scheduled/rest\";\nimport ScheduledOpenLine from \"./items/scheduled/openline\";\nimport ScheduledZoom from \"./items/scheduled/zoom\";\nimport AnimationItem from \"./animations/item\";\nimport ItemNew from \"./animations/item-new\";\nimport Expand from \"./animations/expand\";\nimport Shift from \"./animations/shift\";\nimport AnimationComment from \"./animations/comment\";\nimport Fasten from \"./animations/fasten\";\n\nconst Streams = {\n\tHistory,\n\tFixedHistory,\n\tEntityChat,\n\tSchedule,\n}\n\nconst Editors = {\n\tComment,\n\tWait,\n\tRest,\n\tSms\n}\n\nconst Tools = {\n\tWaitConfigurationDialog,\n\tSchedulePostponeController,\n\tMenuBar,\n\tSmsWatcher,\n\tAudioPlaybackRateSelector,\n}\n\nconst Actions = {\n\tActivity,\n\tCall,\n\tHistoryCall,\n\tScheduleCall,\n\tEmail,\n\tHistoryEmail,\n\tScheduleEmail,\n\tOpenLine,\n\tSchedulePostpone,\n}\n\nconst ScheduledItems = {\n\tActivity: ScheduledActivity,\n\tEmail: ScheduledEmail,\n\tCall: ScheduledCall,\n\tCallTracker,\n\tMeeting: ScheduledMeeting,\n\tTask: ScheduledTask,\n\tStoreDocument: ScheduledStoreDocument,\n\tWebForm: ScheduledWebForm,\n\tWait: ScheduledWait,\n\tRequest: ScheduledRequest,\n\tRest: ScheduledRest,\n\tOpenLine: ScheduledOpenLine,\n\tZoom: ScheduledZoom,\n}\n\nconst Items = {\n\tHistory: HistoryItem,\n\tHistoryActivity,\n\tComment: CommentItem,\n\tModification,\n\tMark,\n\tCreation,\n\tRestoration,\n\tRelation,\n\tLink,\n\tUnlink,\n\tEmail: EmailItem,\n\tCall: CallItem,\n\tMeeting,\n\tTask,\n\tWebForm,\n\tWait: WaitItem,\n\tDocument,\n\tSender,\n\tBizproc,\n\tSms: SmsItem,\n\tRequest,\n\tRest: RestItem,\n\tOpenLine: OpenLineItem,\n\tZoom,\n\tConversion,\n\tVisit,\n\tScoring,\n\tOrderCreation,\n\tOrderModification,\n\tStoreDocumentCreation,\n\tStoreDocumentModification,\n\tFinalSummaryDocuments,\n\tFinalSummary,\n\tExternalNoticeModification,\n\tExternalNoticeStatusModification,\n\tOrderCheck,\n\tScheduledBase: Scheduled,\n\tScheduled: ScheduledItems,\n}\n\nconst Animations = {\n\tItem: AnimationItem,\n\tItemNew,\n\tExpand,\n\tShift,\n\tComment: AnimationComment,\n\tFasten,\n};\n\nexport {\n\tEncourageBuyProducts,\n\tNotification,\n\tDeliveryActivity,\n\tDeliveryMessage,\n\tDeliveryCalculation,\n\tManager,\n\tStream,\n\tStreams,\n\tEditor,\n\tEditors,\n\tTools,\n\tTypes,\n\tAction,\n\tActions,\n\tItem,\n\tItems,\n\tAnimations,\n};\n"],"names":["Item","undefined","activity","creation","modification","link","unlink","mark","comment","wait","bizproc","conversion","sender","document","restoration","order","orderCheck","scoring","externalNotification","finalSummary","delivery","finalSummaryDocuments","storeDocument","Mark","waiting","success","renew","ignored","failed","Delivery","taxiEstimationRequest","taxiCallRequest","taxiCancelledByManager","taxiCancelledByDriver","taxiPerformerNotFound","taxiSmsProviderIssue","taxiReturnedFinish","deliveryMessage","deliveryCalculation","Order","encourageBuyProducts","EditorMode","view","edit","_id","_settings","_data","_container","_wrapper","_typeCategoryId","_associatedEntityData","_associatedEntityTypeId","_associatedEntityId","_isContextMenuShown","_contextMenuButton","_activityEditor","_actions","_actionContainer","_isTerminated","_vueComponent","_vueComponentMountedNode","id","settings","BX","type","isNotEmptyString","util","getRandomString","getSetting","isPlainObject","doInitialize","name","defaultval","hasOwnProperty","data","clearCachedData","prop","getInteger","associatedEntityData","entityData","getAssociatedEntityData","getObject","permissions","getString","getArray","ItemType","container","isElementNode","className","timeout","addClass","isNumber","window","setTimeout","delegate","removeWrapperClass","removeClass","addWrapperClass","options","prepareLayout","prepareActions","actionQty","length","i","layout","showActions","mode","app","propsData","self","langMessages","messages","$mount","$el","show","remove","anchor","previousSibling","_playerWrappers","isDone","terminated","text","offset","whilespaceOffset","substring","search","clickHandler","htmlspecialchars","replace","create","attrs","href","events","click","getMessage","authorInfo","getObjectDataParam","showUrl","target","title","children","imageUrl","style","backgroundImage","backgroundSize","onContextMenuButtonClick","e","openContextMenu","closeContextMenu","menuItems","prepareContextMenuItems","IntranetExtensions","push","PopupMenu","offsetTop","offsetLeft","angle","position","onPopupShow","onContextMenuShow","onPopupClose","onContextMenuClose","onPopupDestroy","onContextMenuDestroy","_contextMenu","currentItem","close","popupWindow","destroy","Data","m","userTimezoneOffset","parseInt","message","isNaN","Fasten","_initialItem","_finalItem","_events","_anchor","defaultValue","node","getWrapper","parentNode","insertBefore","nextSibling","onFinishFasten","_clone","cloneNode","_startPosition","pos","width","_cloneHeight","height","_minHeight","_sumPaddingContent","top","left","zIndex","body","appendChild","proxy","_anchorPosition","finish","opacity","_difference","bottom","_deepHistoryLimit","clientHeight","_duration","Math","abs","movingEvent","easing","duration","start","transition","makeEaseOut","transitions","quart","step","state","complete","animate","addFixedHistoryItem","isFunction","initialize","History","_history","_fixedHistory","_typeId","_createdTime","_isFixed","_headerClickHandler","onHeaderClick","isReadOnly","getTextDataParam","time","parseDate","getCreatedTimestamp","Date","getTime","getUserTimezoneOffset","extractDate","getCreatedTime","getOwnerInfo","CrmEntityType","enumeration","typeId","getTypeId","CrmActivityStatus","isFinal","_items","fastenLimitPopup","PopupWindow","_switcher","content","darkMode","autoHide","closeByEsc","bindOptions","forceBindPosition","ajax","url","_serviceUrl","method","dataType","getOwnerTypeId","getOwnerId","onsuccess","onSuccessFasten","result","ERROR","isFixed","IS_FIXED","fixedItem","createItem","addItem","add","refreshLayout","animation","initialItem","finalItem","run","onSuccessUnfasten","item","historyItem","findItemById","index","getItemIndex","clearAnimate","removeItemByIndex","LazyLoad","showImages","isDomNode","wrapperPosition","hideEvent","marginBottom","clearLayout","wrapperClassName","getWrapperClassName","wrapper","getIconClassName","contentWrapper","header","getTitle","formatTime","prepareContentDetails","authorNode","prepareAuthorLayout","vueComponent","makeVueComponent","prepareContent","enableAdd","getBoolean","markAsTerminated","checkItemForTermination","preventDefault","returnValue","unfasten","fasten","manager","getManager","isSpotlightShowed","setSpotlightShowed","spotlight","SpotLight","targetElement","targetVertex","lightMode","autoSave","prepareTitleLayout","onActivityCreated","deadline","isDate","setHours","setMinutes","setSeconds","setMilliseconds","end","props","required","Object","computed","fields","FIELDS","author","AUTHOR","createdAt","HistoryItem","methods","getLangMessage","key","product","dealId","Number","isAddToDealVisible","Boolean","addProductToDeal","isInDeal","$emit","runAction","productId","offerId","price","then","catch","openDetailPage","adminLink","slider","open","SidePanel","Instance","isBottomAreaVisible","isVariationInfoVisible","isPriceVisible","variationInfo","currency","Currency","currencyFormat","imageStyle","image","buttonText","Loc","template","Vue","extend","mixins","HistoryItemMixin","components","Product","isShortList","shortListProductsCnt","isNotificationShown","activeRequestsCnt","products","isProductsGridAvailable","created","VIEWED_PRODUCTS","DEAL_ID","_productsGrid","subscribeCustomEvents","Crm","EntityEditor","getDefault","tapController","controller","setProductsGrid","getProductList","productsGrid","onProductsGridChanged","showMore","listWrap","querySelector","maxHeight","handleProductAddingToDeal","handleProductAddedToDeal","reload","reloadGrid","UI","Notification","Center","notify","onClose","event","actions","balloon","action","onCustomEvent","EventEmitter","subscribe","onProductsGridCreated","unsubscribeCustomEvents","unsubscribe","getData","dealOfferIds","map","OFFER_ID","entries","some","set","assign","beforeDestroy","visibleProducts","isShowMoreVisible","iStyle","IMAGE_URL","Author","messageId","status","semantics","description","provider","isRefreshing","setMessageInfo","PULL","moduleId","command","callback","params","ID","refresh","extendWatch","messageInfo","Array","isArray","capitalizeFirstLetter","viewActivity","str","locale","navigator","language","char","toLocaleUpperCase","communication","statusClass","isStatusError","statusErrorDescription","deliveryService","isDeliveryServiceProfile","IS_PROFILE","deliveryServiceName","PARENT_NAME","NAME","deliveryProfileServiceName","deliveryServiceLogoBackgroundUrl","PARENT_LOGO","LOGO","logo","DeliveryServiceInfo","String","deliveryInfo","isCreatingRequest","isCancellingRequest","completeActivity","canComplete","setAsDone","showContextMenu","popup","getId","onclick","deletionDlgId","dlg","ConfirmationDialog","get","cancel","createDeliveryRequest","isLocked","analyticsLabel","shipmentIds","additional","ACTIVITY_ID","activityId","showError","errors","join","cancelDeliveryRequest","deliveryRequest","requestId","actionType","checkRequestStatus","startCheckingRequestStatus","clearTimeout","_checkRequestStatusTimeoutId","setInterval","stopCheckingRequestStatus","setDeliveryInfo","finallyCallback","subscribePullEvents","_isPullSubscribed","deliveryServiceIds","deliveryRequestId","callPhone","phone","canUseTelephony","BXIM","phoneTo","location","isPhone","property","includes","loadExt","needCheckRequestStatus","ASSOCIATED_ENTITY","shipments","shipment","expectedDeliveryPriceFormatted","IDS","deliveryRequestProperties","deliveryRequestStatus","deliveryRequestStatusSemantic","isConnectedWithDeliveryRequest","isSendRequestButtonVisible","miscellaneous","cancelRequestButtonStyle","wrapperContainerClass","innerWrapperContainerClass","watch","value","DELIVERY_SERVICE","messageData","MESSAGE_DATA","messageTitle","messageDescription","messageStatus","messageStatusSemantics","messageStatusSemanticsClass","addressFrom","ADDRESS_FROM_FORMATTED","addressTo","ADDRESS_TO_FORMATTED","Editor","_manager","_ownerTypeId","_ownerId","_input","_saveButton","_cancelButton","_ghostInput","_saveButtonHandler","onSaveButtonClick","_cancelButtonHandler","onCancelButtonClick","_focusHandler","onFocus","_blurHandler","onBlur","_keyupHandler","resizeForm","_delayedKeyupHandler","bind","_isVisible","_hideButtonsOnBlur","Manager","visible","display","minHeight","save","processEditingCancellation","offsetWidth","ghost","ensureGhostCreated","computedStyle","getComputedStyle","diff","paddingBottom","paddingTop","borderTopWidth","borderBottomWidth","innerHTML","scrollHeight","WaitConfigurationDialog","_type","Wait","WaitingType","_target","_targetDates","_durationMeasureNode","_durationInput","_targetDateNode","_popup","after","_menuId","enableNumber","Helper","getDurationText","info","draggable","prepareDialogContent","buttons","PopupWindowButton","PopupWindowButtonLink","keyup","onDurationChange","getTargetDateCaption","toggleTargetMenu","isTargetMenuOpened","closeTargetMenu","openTargetMenu","getMenuById","onTargetSelect","getFunction","before","fieldName","_isRequestRunning","_isLocked","_configContainer","_configSelector","_isMenuShown","_menu","_configDialog","config","resolveTypeId","names","layoutConfigurationSummary","openMenu","closeMenu","handler","onMenuItemClick","customMenu","items","onMenuShow","onMenuClose","onMenuDestroy","openConfigDialog","saveConfiguration","targetDates","onSave","onConfigDialogSave","onCancel","onConfigDialogCancel","setType","setDuration","setTarget","optionName","toLowerCase","userOptions","strip_tags","getSummaryHtml","onSelectorClick","completed","getSummaryText","trim","targetFieldName","subject","ownerType","resolveName","ownerID","onSaveSuccess","onfailure","onSaveFailure","release","error","alert","processEditingCompletion","getMessagePlural","toString","Sms","_senderId","_from","_commEntityTypeId","_commEntityId","_to","_canUse","_canSendMessage","_manageUrl","_senders","_fromList","_toList","_defaults","_communications","_shownMenuId","_documentSelector","_source","_paymentId","_shipmentId","_templateId","_templatesContainer","_templateFieldHintNode","_templateSelectorNode","_templateTemplateTitleNode","_templatePreviewNode","_templateSelectorMenuId","_templateFieldHintHandler","onTemplateHintIconClick","_templateSeletorClickHandler","onTemplateSelectClick","_selectTemplateHandler","onSelectTemplate","remove_url_param","senderId","from","_isSalescenterEnabled","_isDocumentsEnabled","_documentsProvider","_documentsValue","_isFilesEnabled","_diskUrls","_isFilesExternalLinkEnabled","_senderSelectorNode","_fromContainerNode","_fromSelectorNode","_clientContainerNode","_clientSelectorNode","_toSelectorNode","_messageLengthCounterWrapperNode","_messageLengthCounterNode","_salescenterStarter","_smsDetailSwitcher","_smsDetail","_documentSelectorButton","_fileSelectorButton","_fileUploadZone","_fileUploadLabel","_fileSelectorBitrix","_fileExternalLinkDisabledContent","initSenderSelector","initDetailSwitcher","initFromSelector","initClientContainer","initClientSelector","initToSelector","initMessageLengthCounter","setMessageLengthCounter","initDocumentSelector","initFileSelector","initSalescenterApplication","classList","contains","innerText","defaultSenderId","defaultSender","canUse","restSender","onSenderSelectorClick","fromList","delimiter","setSender","Uri","addParam","manageUrl","getTopSlider","onCloseComplete","setFrom","setAsDefault","textContent","shortName","isTemplatesBased","showNode","hideNode","toggleTemplateSelectAvailability","toggleSaveButton","visualFn","defaultFromId","defaultFrom","onFromSelectorClick","onFromSelectorItemClick","hide","onClientSelectorClick","caption","client","setClient","entityTypeId","entityId","phones","setTo","onToSelectorClick","onToSelectorItemClick","valueFormatted","to","menuId","bindElement","_messageLengthMax","getAttribute","setMessageLengthCounterDelayed","classFn","getSelectedSender","enabled","templateId","getSelectedTemplate","PREVIEW","add_url_param","bitrix_sessid","startSalescenterApplication","Salescenter","openApplication","disableSendButton","context","ownerTypeId","ownerId","deal","focus","paymentId","shipmentId","onDocumentSelectorClick","DocumentGenerator","Selector","Menu","analyticsLabelPrefix","selectPublicUrl","object","Template","createDocument","pasteDocumentUrl","console","Document","getDocumentPublicUrl","publicUrl","onFileSelectorClick","uploadFile","findFile","getElementById","closeFileSelector","initDiskUF","fireEvent","getFileUploadInput","showFilesExternalLinkFeaturePopup","loader","Loader","size","getLoader","isShown","isDiskFileUploaderInited","addCustomEvent","OnFileUploadSuccess","uf","_onUploadProgress","showLoader","Disk","UF","UID","controlName","hideSelectDialog","urlSelect","urlRenameFile","urlDeleteFile","urlUpload","fileResult","file","uploaderFile","hideLoader","diskFileId","element_id","fileName","element_name","pasteFileUrl","fileId","response","externalLink","pop","featurePopup","closeIcon","overlay","contentColor","getFeaturePopup","Type","forEach","TITLE","loaderMenuId","loaderMenuLoaderId","html","onDestroy","module","find","templates","showTemplateSelectDropdown","applySelectedTemplate","menu","preview","Text","encode","Rest","_interfaceInitialized","initializeInterface","rest","Marketplace","PLACEMENT","fireUpdateEvent","appId","appData","split","AppLayout","PLACEMENT_ID","PlacementInterface","initializePlacement","prototype","reloadData","cb","EntityEvent","fireUpdate","log","fire","invalidate","Comment","_postForm","_editor","unbind","_editorName","onLoadEditorSuccess","_editorContainer","showEditor","addEvents","firstElementChild","removeEventListener","obj","blob","addEventListener","LHEPostForm","getHandler","BXHtmlEditor","Get","eventNode","history","Focus","loadEditor","attachmentList","oEditor","GetContent","querySelectorAll","input","emptyCommentMessage","reinit","itemData","createAnchor","move","CrmCommentAnimation","onAnimationStart","onAnimationComplete","Scheduled","_schedule","_deadlineNode","_setAsDoneButtonHandler","onSetAsDoneButtonClick","CrmActivityEditor","hasPermissions","verifyPermissions","loadPermissions","userId","getPermissions","getUserId","getServiceUrl","getAssociatedEntityId","onPermissionsLoad","setPermissions","getDeadline","isCounterEnabled","markAsDone","onItemMarkedAsDone","formatDateTime","perms","Action","doLayout","Activity","_entityData","_item","_isEnabled","getActivityCommunications","getActivityId","communications","Email","_clickHandler","onClick","_saveHandler","CrmActivityProvider","Bitrix24","Slider","addEmail","addOnSave","loadActivityCommunications","CrmActivityEmail","prepareReply","PreventDefault","onActivityCreate","HistoryEmail","ScheduleEmail","HistoryActivity","direction","typeCategoryId","getTypeCategoryId","CrmActivityType","email","CrmActivityDirection","incoming","call","meeting","task","providerId","getTypeDescription","markTypeId","messageName","markText","activityEditor","isEditable","processRemoval","associatedEntityTypeId","getAssociatedEntityTypeId","editActivity","_detetionConfirmDlgId","getRemoveMessage","onRemovalConfirm","onRemovalCancel","getItemById","deleteActivity","serviceUrl","ownertype","ownerid","_handleActivityChange","editDocument","statusLayout","prepareTitleStatusLayout","prepareTimeLayout","isContextMenuEnabled","prepareContextMenuButton","prepareFixedSwitcherLayout","prepareHeaderLayout","detailWrapper","findChildByClassName","confirmDelete","onConfirmDelete","DoNothing","deleteDocument","deleteItem","deleteFixedItem","documentId","DOCUMENT_ID","adjust","Steam","_userTimezoneOffset","_serverTimezoneOffset","_timeFormat","_year","_isStubMode","_userId","_readOnly","datetimeFormat","dateFormat","date","convertBitrixFormat","getFullYear","currentUrl","ajaxId","insertToNode","bxajaxid","now","utc","format","whitespaceOffset","EntityChat","_layoutType","LayoutType","none","_contentWrapper","_messageWrapper","_messageDateNode","_messageTexWrapper","_messageTextNode","_userWrapper","_extraUserCounter","_openChatHandler","onOpenChat","lockScript","isString","eval","getUserInfoData","userInfos","counter","isEnabled","isStubMode","getChatId","renderSummary","renderInvitation","onChatEvent","cleanNode","invitation","refreshUsers","summary","_messageTexWraper","_messageCounterNode","refreshSummary","infos","list","values","count","icon","getMessageData","isoDate","remoteDate","getServerTimezoneOffset","localTime","MessengerCommon","purifyText","isRestricted","applyLockScript","slug","chatId","hasUserInfo","ownerInfo","entityTypeName","openMessengerSlider","RECENT","MENU","extras","setUserInfoData","mergeEx","refreshUsersAnimated","removeUserInfo","setMessageData","setUnreadMessageCounter","refreshSummaryAnimated","Stream","MenuBar","_ownerInfo","_commentEditor","_waitEditor","_smsEditor","_zoomEditor","_restEditor","Main","interfaceButtonsManager","getById","setActiveItemById","_activeItem","getActive","firstId","getAllItems","dataset","indexOf","processItemSelection","currentDiv","wasActiveInMoreMenu","isActiveInMoreMenu","classes","itemActive","getItemData","currentDivData","activeItemData","isActiveData","JSON","parse","err","IS_ACTIVE","stringify","wasActiveData","submenu","getSubmenu","getMenuItems","menuItem","getContainer","getMoreButton","closeSubmenu","planner","Planner","showEdit","addDelivery","addTask","setVisible","visitParameters","CrmActivityVisit","match","AudioPlaybackRateSelector","availableRates","currentRate","normalizeRate","textMessageCode","renderedItems","players","rateDescription","rate","parseFloat","isRateCurrent","selectedRate","getRate","setRate","popupMenu","MenuManager","getPopupWindow","setBindElement","getPopup","textNode","getText","vjsPlayer","playbackRate","Dom","player","Fileman","Player","SchedulePostponeController","postpone","_postponeController","autoCompleted","setActivityCompleted","onSetAsDoneCompleted","getSourceId","postponeActivity","onPosponeCompleted","activityType","canPostpone","timeText","communicationValue","iconClassName","contentInnerWrapper","headerWrapper","statusNode","getStatusNode","cutOffText","additionalDetails","prepareDetailNodes","members","getPrepositionText","communicationNode","prepareCommunicationNode","setAsDoneButton","checked","change","disabled","buttonContainer","onContextMenuItemSelect","postponeMenu","commands","getCommandList","processCommand","CrmScheduleEmailAction","Call","CrmScheduleCallAction","callInfo","callTypeText","CallTracker","isSuccessfull","statusText","Meeting","Task","StoreDocument","WebForm","editor","getWaitEditor","nl2br","Request","iconNode","backgroundPosition","OpenLine","_button","OpenLineAction","messageWrapper","openLineData","isExternal","Zoom","topic","startTimeStamp","detailZoomMessage","detailZoomInfoLink","detailZoomInfo","detailZoomCopyInviteLink","clipboard","bindCopyClick","detailZoomStartConferenceButton","detailZoomCopyInviteLinkWrapper","_node","originalPosition","_initialYPosition","_initialXPosition","_initialWidth","_initialHeight","offsetHeight","_anchorYPosition","createStub","createGhost","moveGhost","_stub","_ghostNode","boxShadow","placeEventAnim","addHistoryItem","removeGhost","_finalItemHeight","ghostNode","finalNode","overflow","hideCasperItem","collapseStub","removePlannedEvent","inited","Shift","_nodeParent","startPosition","shadowNode","_shadowNode","ItemNew","shift","stubContainer","Schedule","timeFormat","label","addStub","setContainer","processSheduleLayoutChange","hasContent","stubIcon","isStubCounterEnabled","isTerminated","getItemCount","getLastItem","curTime","sourceId","$entityTypeId","getItemByAssociatedEntity","l","splice","entityTypeID","entityID","itemId","schedule","Timeline","DeliveryActivity","calculateItemIndex","removeStub","newItem","newIndex","historyItemData","onTransferComplete","stubClassName","stubIconClassName","stubMessage","lead","Modification","contentChildren","Conversion","entityNodes","entityInfos","getArrayDataParam","entityInfo","entityNode","getNotFoundMessage","emailInfo","markNode","prepareMarkLayout","communicationTitle","communicationShowUrl","outerWrapper","communicationWrapper","prepareCutOffElements","_menuItems","addCall","showMenu","prepareMenuItems","PopupMenuWindow","formattedValue","complexName","itemText","HistoryCall","ScheduleCall","_playerDummyClickHandler","onPlayerDummyClick","_playerWrapper","_transcriptWrapper","_mediaFileInfo","hasCallInfo","communicationValueFormatted","durationText","hasTranscript","isTranscriptPending","callId","callComment","prepareMultilineCutOffElements","callInfoWrapper","renderAudioDummy","getAudioPlaybackRateSelector","render","Voximplant","Transcript","stubNode","addPlayer","loadMediaPlayer","prepareMessageStatusLayout","_messageStatusNode","smsInfo","senderName","senderShortName","fromName","messageSenderWrapper","statusId","setMessageStatus","errorText","bodyText","messageBodyWrapper","statuses","setMessageStatusErrorText","statusSemantic","getMessageStatusSemantic","setMessageStatusSemantic","semantic","classMap","process","failure","checkSemantic","fn","removeAttribute","setAttribute","CrmSmsWatcher","subscribeOnMessageUpdate","onMessageUpdate","STATUS_ID","EXEC_ERROR","entityDetailWrapper","Visit","visitInfo","recordLength","recordLengthFormatted","vkProfile","createTextNode","getVkProfileUrl","profile","getClass","Restriction","_videoDummy","_audioDummy","_videoPlayer","_audioPlayer","_audioLengthElement","_recordings","_currentRecordingIndex","zoomActivitySubject","_downloadWrapper","_downloadSubject","_downloadSubjectDetail","_downloadVideoLink","_downloadSeparator","_downloadAudioLink","_playVideoLink","detailZoomCopyVideoLink","prepareSuccessfulLayout","zoomData","tabs","recording","active","tabsComponent","TabsComponent","eventEmitter","_onTabChange","_onVideoDummyClick","hint","Hint","init","_onAudioDummyClick","videoLinkExpireTS","videoLinkContainer","_detailZoomCopyVideoLink","zoomAudioDetailWrapper","setCurrentRecording","video","skin","tabId","recordingIndex","videoRecording","audioRecording","hidden","pause","setSource","clean","lengthHuman","lastElementChild","elements","Event","_renderTab","tabDescription","setActiveTab","Error","emit","OrderCreation","msg","statusMessage","legend","nodes","getHeaderChildren","OrderModification","statusInfo","classCode","orderpayment","psStatusCode","ordershipment","getStatusInfo","isNotEmptyObject","htmlTitle","descriptionNode","sublegend","destination","detailNode","sliderLinkNode","orderId","templateMode","paySystemName","sum","paymentDetail","logotip","encodeURI","isPaid","isClick","isManualContinuePay","isManualAddCheck","preparePaidPaymentContent","prepareClickedPaymentContent","prepareManualContinuePayContent","prepareManualAddCheck","prepareItemOrderContent","isViewed","isSent","prepareViewedContentDetails","prepareSentContentDetails","prepareErrorPaymentContentDetails","headerWrap","preparePaidPaymentContentDetails","paySystemError","errorDetailNode","prepareClickedPaymentContentDetails","StoreDocumentCreation","docType","titleNode","titleTemplate","documentDetailUrl","documentLinkTag","StoreDocumentModification","field","statusName","errorMessage","ExternalNoticeModification","ExternalNoticeStatusModification","OrderCheck","checkName","isSended","Page","openSlider","legendNode","checkUrl","FinalSummaryDocuments","check","blockNode","URL","contentItem","RESULT","summaryOptions","ASSOCIATED_ENTITY_ID","ASSOCIATED_ENTITY_TYPE_ID","timelineSummaryDocuments","TimelineSummaryDocuments","TIMELINE_SUMMARY_OPTIONS","setOptions","FinalSummary","Creation","isMessageNotFound","TYPE_CATEGORY_ID","HTML_TITLE","createOrderEntityItem","orderData","ORDER_DATE","SHOW_URL","SUM","spanAttrs","linkAttrs","baseEntityData","baseEntityInfo","Restoration","Relation","Link","Unlink","activityProviderId","MarkType","isDefined","innerWrapper","associatedEntityTitle","contentTemplate","_isCollapsed","_hasFiles","_commentMessage","_mode","_streamContentEventBlock","playerWrapper","entityValueId","files","extension","detailChildren","_commentWrapper","switchToEditMode","switchToViewMode","cleanText","_hasInlineAttachment","onExpandButtonClick","_textLoaded","_fileBlock","ready","loadContent","registerImages","viewElementBind","showTitle","BLOCK","promise","SetContent","ReInitIframe","actionData","commentImages","commentImagesLength","idsList","toggleMode","tagName","hasClass","getSelection","onRequestFailure","getHistory","fixedHistory","getFixedHistory","onRemoveSuccess","updateFixedItem","setData","updateItem","eventWrapper","button","Sender","getDataSetting","isRemoved","stopPropagation","layoutClassName","textCaption","prepareStatusLayout","Bizproc","prepareContentTextHtml","workflowName","workflowStatus","Scoring","scoringInfo","score","getNumber","scoreDelta","round","iconClass","_emptySection","_currentDaySection","_lastDaySection","_lastDate","_enableLoading","_navigation","_scrollHandler","_loadingWaiter","_filterId","_isFilterApplied","_isFilterShown","_filterButton","_filterWrapper","_filterResultStub","onFilterApply","closeFilterButton","onFilterClose","getCreatedDate","createCurrentDaySection","createDaySection","enableLoading","processHistoryLayoutChange","firstChild","adjustFilterButton","_filterEmptyResultSection","createFilterEmptyResultSection","results","createEmptySection","showFilter","section","sectionWrapper","hideFilter","filter","filterManager","resetFilter","formatDate","vueComponentId","vueComponentsMap","Map","has","smsStatusDescriptions","smsStatusSemantics","OrderType","EncourageBuyProducts","shipmentDocument","changedFieldName","DeliveryType","Taxi","EstimationRequest","CallRequest","CancelledByManager","CancelledByDriver","PerformerNotFound","SmsProviderIssue","ReturnedFinish","DeliveryMessage","DeliveryCalculation","createActivityItem","createStoreDocumentItem","createExternalNotificationItem","createDeliveryItem","child","removeChild","getBoundingClientRect","documentElement","loadItems","ctx","autoResolve","CrmDataLoader","load","resetLayout","bulkCreateItems","setNavigation","fulfill","lastItemTime","navigation","enable","onWindowScroll","instances","FixedHistory","nextElementSibling","onItemsLoad","Expand","_callback","onNodeHeightStep","onNodeHeightComplete","onNodeOpacityStep","onNodeOpacityComplete","_progressSemantics","_chat","_menuBar","_pullTagName","_spotlightFastenShowed","_audioPlaybackRate","containerId","activityEditorId","readOnly","editorContainer","filterId","isFilterApplied","setHistory","editorName","cancelButton","configContainer","templatesContainer","placement","onPullEvent","commentEditor","waitEditor","smsEditor","zoomEditor","restEditor","reset","onEntityProgressChange","throttle","onScroll","processChatCreate","processActivityExternalAdd","processActivityExternalUpdate","processActivityExternalDelete","processCommentExternalAdd","processLinkExternalAdd","processLinkExternalDelete","processDocumentExternalUpdate","processDocumentExternalDelete","processCommentExternalUpdate","processCommentExternalDelete","processChangeBinding","processItemChangeFasten","processItemExternalUpdate","processWaitExternalAdd","processWaitExternalUpdate","processWaitExternalDelete","processBizprocStatus","processScoringExternalAdd","scheduleItemData","scheduleItem","getItemByData","addScheduleItem","fixedHistoryItem","historyItems","getItemsByAssociatedEntity","setAssociatedEntityData","fixedHistoryItems","refreshItem","transferItemToHistory","associatedEntityId","updateWrapper","entityNewId","fixedItemData","newFixedItem","eventArgs","historyAnchor","filePath","mediaType","sources","src","isAudio","onInit","controlBar","addChild","isPlaying","play","createElement","audioPlaybackRateSelector","SmsWatcher","_pullInited","_listeners","initPull","fireExternalStatusUpdate","listener","SchedulePostpone","nodeOpacityAnim","Streams","Editors","Tools","Actions","ScheduledItems","ScheduledActivity","ScheduledEmail","ScheduledCall","ScheduledMeeting","ScheduledTask","ScheduledStoreDocument","ScheduledWebForm","ScheduledWait","ScheduledRequest","ScheduledRest","ScheduledOpenLine","ScheduledZoom","Items","CommentItem","EmailItem","CallItem","WaitItem","SmsItem","RestItem","OpenLineItem","ScheduledBase","Animations","AnimationItem","AnimationComment"],"mappings":"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"}