{"version":3,"file":"timeline.bundle.js","sources":["../src/mixins/history-item.js","../src/encourage-buy-products/product.js","../src/encourage-buy-products/component.js","../src/components/author.js","../src/notification/component.js"],"sourcesContent":["export default {\n\tprops: {\n\t\tself: {\n\t\t\trequired: true,\n\t\t\ttype: Object\n\t\t},\n\t\tlangMessages: {\n\t\t\trequired: false,\n\t\t\ttype: Object\n\t\t},\n\t},\n\tcomputed: {\n\t\tdata()\n\t\t{\n\t\t\treturn this.self._data;\n\t\t},\n\t\tfields()\n\t\t{\n\t\t\treturn this.data.FIELDS ? this.data.FIELDS : null;\n\t\t},\n\t\tauthor()\n\t\t{\n\t\t\treturn this.data.AUTHOR ? this.data.AUTHOR : null;\n\t\t},\n\t\tcreatedAt()\n\t\t{\n\t\t\treturn (this.self instanceof BX.CrmHistoryItem) ? this.self.formatTime(this.self.getCreatedTime()) : '';\n\t\t},\n\t},\n\tmethods: {\n\t\tgetLangMessage(key)\n\t\t{\n\t\t\treturn this.langMessages.hasOwnProperty(key) ? this.langMessages[key] : key;\n\t\t}\n\t}\n};\n","import {ajax, Loc} from 'main.core';\nimport 'currency';\n\nexport default {\n\tprops: {\n\t\tproduct: {\n\t\t\trequired: true,\n\t\t\ttype: Object\n\t\t},\n\t\tdealId: {\n\t\t\trequired: true,\n\t\t\ttype: Number\n\t\t},\n\t\tisAddToDealVisible: {\n\t\t\trequired: true,\n\t\t\ttype: Boolean\n\t\t},\n\t},\n\tmethods: {\n\t\taddProductToDeal()\n\t\t{\n\t\t\tif (this.product.isInDeal)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.$emit('product-adding-to-deal');\n\t\t\tthis.product.isInDeal = true;\n\n\t\t\tajax.runAction(\n\t\t\t\t'crm.timeline.encouragebuyproducts.addproducttodeal',\n\t\t\t\t{\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tdealId: this.dealId,\n\t\t\t\t\t\tproductId: this.product.offerId,\n\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\tprice: this.product.price\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t).then((result) => {\n\t\t\t\tthis.$emit('product-added-to-deal');\n\t\t\t\tthis.product.isInDeal = true;\n\t\t\t}).catch((result) => {\n\t\t\t\tthis.product.isInDeal = false;\n\t\t\t});\n\t\t},\n\t\topenDetailPage()\n\t\t{\n\t\t\tif (BX.type.isNotEmptyString(this.product.adminLink))\n\t\t\t{\n\t\t\t\tif (this.product?.slider === 'N')\n\t\t\t\t{\n\t\t\t\t\twindow.open(this.product.adminLink, '_blank');\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tBX.SidePanel.Instance.open(this.product.adminLink);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\tcomputed: {\n\t\tisBottomAreaVisible()\n\t\t{\n\t\t\treturn this.isVariationInfoVisible || this.isPriceVisible;\n\t\t},\n\t\tisVariationInfoVisible()\n\t\t{\n\t\t\treturn (\n\t\t\t\tthis.product.hasOwnProperty('variationInfo')\n\t\t\t\t&& this.product.variationInfo\n\t\t\t);\n\t\t},\n\t\tisPriceVisible()\n\t\t{\n\t\t\treturn (\n\t\t\t\tthis.product.hasOwnProperty('price')\n\t\t\t\t&& this.product.hasOwnProperty('currency')\n\t\t\t\t&& this.product.price\n\t\t\t\t&& this.product.currency\n\t\t\t);\n\t\t},\n\t\tprice()\n\t\t{\n\t\t\treturn BX.Currency.currencyFormat(this.product.price, this.product.currency, true);\n\t\t},\n\t\timageStyle()\n\t\t{\n\t\t\tif (!this.product.image)\n\t\t\t{\n\t\t\t\treturn {};\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tbackgroundImage: 'url(' + this.product.image + ')'\n\t\t\t};\n\t\t},\n\t\tbuttonText()\n\t\t{\n\t\t\treturn Loc.getMessage(\n\t\t\t\tthis.product.isInDeal\n\t\t\t\t\t? 'CRM_TIMELINE_ENCOURAGE_BUY_PRODUCTS_PRODUCT_IN_DEAL'\n\t\t\t\t\t: 'CRM_TIMELINE_ENCOURAGE_BUY_PRODUCTS_ADD_PRODUCT_TO_DEAL'\n\t\t\t);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<li\n\t\t\t:class=\"{'crm-entity-stream-advice-list-item--active': product.isInDeal}\"\n\t\t\tclass=\"crm-entity-stream-advice-list-item\"\n\t\t>\t\n\t\t\t<div class=\"crm-entity-stream-advice-list-content\">\n\t\t\t\t<div\t\n\t\t\t\t\t:style=\"imageStyle\"\n\t\t\t\t\tclass=\"crm-entity-stream-advice-list-icon\"\n\t\t\t\t>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"crm-entity-stream-advice-list-inner\">\n\t\t\t\t\t<a\n\t\t\t\t\t\t@click.prevent=\"openDetailPage\"\n\t\t\t\t\t\thref=\"#\"\n\t\t\t\t\t\tclass=\"crm-entity-stream-advice-list-name\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{product.name}}\n\t\t\t\t\t</a>\n\t\t\t\t\t<div\n\t\t\t\t\t\tv-if=\"isBottomAreaVisible\"\n\t\t\t\t\t\tclass=\"crm-entity-stream-advice-list-desc-box\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tv-if=\"isVariationInfoVisible\"\n\t\t\t\t\t\t\tclass=\"crm-entity-stream-advice-list-desc-name\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{product.variationInfo}}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tv-if=\"isPriceVisible\"\n\t\t\t\t\t\t\tv-html=\"price\"\n\t\t\t\t\t\t\tclass=\"crm-entity-stream-advice-list-desc-value\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div v-if=\"isAddToDealVisible\" class=\"crm-entity-stream-advice-list-btn-box\">\t\t\t\t\n\t\t\t\t<button\n\t\t\t\t\t@click=\"addProductToDeal\"\n\t\t\t\t\tclass=\"ui-btn ui-btn-round ui-btn-xs crm-entity-stream-advice-list-btn\"\n\t\t\t\t>\n\t\t\t\t\t{{buttonText}}\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</li>\n\t`\n}\n","import {Vue} from 'ui.vue';\nimport {BaseEvent, EventEmitter, Dom} from 'main.core.events';\nimport HistoryItemMixin from '../mixins/history-item';\nimport Product from './product';\nimport {Loc} from 'main.core';\nimport {UI} from 'ui.notification';\nimport './styles.css';\n\nexport default Vue.extend({\n\tmixins: [HistoryItemMixin],\n\tcomponents: {\n\t\t'product': Product,\n\t},\n\tdata()\n\t{\n\t\treturn {\n\t\t\tisShortList: true,\n\t\t\tshortListProductsCnt: 3,\n\t\t\tisNotificationShown: false,\n\t\t\tactiveRequestsCnt: 0,\n\t\t\tdealId: null,\n\t\t\tproducts: [],\n\t\t\tisProductsGridAvailable: false,\n\t\t};\n\t},\n\tcreated() {\n\t\tthis.products = this.data.VIEWED_PRODUCTS;\n\t\tthis.dealId = this.data.DEAL_ID;\n\t\tthis._productsGrid = null;\n\t\tthis.subscribeCustomEvents();\n\t\tBX.Crm.EntityEditor.getDefault().tapController('PRODUCT_LIST', (controller) => {\n\t\t\tthis.setProductsGrid(controller.getProductList());\n\t\t});\n\t},\n\tmethods: {\n\t\tsetProductsGrid(productsGrid)\n\t\t{\n\t\t\tthis._productsGrid = productsGrid;\n\t\t\tif (this._productsGrid)\n\t\t\t{\n\t\t\t\tthis.onProductsGridChanged();\n\t\t\t\tthis.isProductsGridAvailable = true;\n\t\t\t}\n\t\t},\n\t\tshowMore()\n\t\t{\n\t\t\tthis.isShortList = false;\n\t\t\tconst listWrap = document.querySelector('.crm-entity-stream-advice-list');\n\t\t\tlistWrap.style.maxHeight = 950 + 'px';\n\t\t},\n\t\t// region event handlers\n\t\thandleProductAddingToDeal()\n\t\t{\n\t\t\tthis.activeRequestsCnt++;\n\t\t},\n\t\thandleProductAddedToDeal()\n\t\t{\n\t\t\tif (this.activeRequestsCnt > 0)\n\t\t\t{\n\t\t\t\tthis.activeRequestsCnt--;\n\t\t\t}\n\n\t\t\tif (!(this.activeRequestsCnt === 0 && this._productsGrid))\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tBX.Crm.EntityEditor.getDefault().reload();\n\t\t\tthis._productsGrid.reloadGrid(false);\n\n\t\t\tif (!this.isNotificationShown)\n\t\t\t{\n\t\t\t\tUI.Notification.Center.notify({\n\t\t\t\t\tcontent: Loc.getMessage('CRM_TIMELINE_ENCOURAGE_BUY_PRODUCTS_PRODUCTS_ADDED_TO_DEAL'),\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tonClose: (event) => {\n\t\t\t\t\t\t\tthis.isNotificationShown = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tactions: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: Loc.getMessage('CRM_TIMELINE_ENCOURAGE_BUY_PRODUCTS_EDIT_PRODUCTS'),\n\t\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\t\tclick: (event, balloon, action) => {\n\t\t\t\t\t\t\t\t\tBX.onCustomEvent(window, 'OpenEntityDetailTab', ['tab_products']);\n\t\t\t\t\t\t\t\t\tballoon.close();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t});\n\n\t\t\t\tthis.isNotificationShown = true;\n\t\t\t}\n\t\t},\n\t\t// endregion\n\t\t// region custom events\n\t\tsubscribeCustomEvents()\n\t\t{\n\t\t\tEventEmitter.subscribe('EntityProductListController', this.onProductsGridCreated);\n\t\t\tEventEmitter.subscribe('BX.Crm.EntityEditor:onSave', this.onProductsGridChanged);\n\t\t},\n\t\tunsubscribeCustomEvents()\n\t\t{\n\t\t\tEventEmitter.unsubscribe('EntityProductListController', this.onProductsGridCreated);\n\t\t\tEventEmitter.unsubscribe('BX.Crm.EntityEditor:onSave', this.onProductsGridChanged);\n\t\t},\n\t\tonProductsGridCreated(event: BaseEvent)\n\t\t{\n\t\t\tthis.setProductsGrid(event.getData()[0]);\n\t\t},\n\t\tonProductsGridChanged(event: BaseEvent)\n\t\t{\n\t\t\tif (!this._productsGrid)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet dealOfferIds = this._productsGrid.products.map((product, index) => {\n\t\t\t\tif (!(product.hasOwnProperty('fields') && product.fields.hasOwnProperty('OFFER_ID')))\n\t\t\t\t{\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\treturn product.fields.OFFER_ID;\n\t\t\t});\n\n\t\t\tfor (const [i, product] of this.products.entries())\n\t\t\t{\n\t\t\t\tlet isInDeal = dealOfferIds.some(id => id == product.offerId);\n\n\t\t\t\tif (product.isInDeal === isInDeal)\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tVue.set(this.products, i, Object.assign({}, product, {isInDeal}));\n\t\t\t}\n\t\t},\n\t\t// endregion\n\t\tbeforeDestroy()\n\t\t{\n\t\t\tthis.unsubscribeCustomEvents();\n\t\t}\n\t},\n\tcomputed: {\n\t\tvisibleProducts()\n\t\t{\n\t\t\tlet result = [];\n\n\t\t\tlet i = 1;\n\t\t\tfor (const product of this.products)\n\t\t\t{\n\t\t\t\tif (this.isShortList && i > this.shortListProductsCnt)\n\t\t\t\t{\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tresult.push(product);\n\n\t\t\t\ti++;\n\t\t\t}\n\n\t\t\treturn result;\n\t\t},\n\t\tisShowMoreVisible()\n\t\t{\n\t\t\treturn this.isShortList && this.products.length > this.shortListProductsCnt;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"crm-entity-stream-section crm-entity-stream-section-advice\">\n\t\t\t<div class=\"crm-entity-stream-section-icon crm-entity-stream-section-icon-advice\"></div>\n\t\t\t<div class=\"crm-entity-stream-advice-content\">\n\t\t\t\t<div class=\"crm-entity-stream-advice-info\">\n\t\t\t\t\t${Loc.getMessage('CRM_TIMELINE_ENCOURAGE_BUY_PRODUCTS_LOOK_AT_CLIENT_PRODUCTS')}\n\t\t\t\t\t${Loc.getMessage('CRM_TIMELINE_ENCOURAGE_BUY_PRODUCTS_ENCOURAGE_CLIENT_BUY_PRODUCTS')}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"crm-entity-stream-advice-inner\">\n\t\t\t\t\t<h3 class=\"crm-entity-stream-advice-subtitle\">\n\t\t\t\t\t\t${Loc.getMessage('CRM_TIMELINE_ENCOURAGE_BUY_PRODUCTS_VIEWED_PRODUCTS')}\n\t\t\t\t\t</h3>\n\t\t\t\t\t<!--<ul class=\"crm-entity-stream-advice-list\">-->\n\t\t\t\t\t<transition-group class=\"crm-entity-stream-advice-list\" name=\"list\" tag=\"ul\">\t\t\t\t\t\t\n\t\t\t\t\t\t<product\n\t\t\t\t\t\t\tv-for=\"product in visibleProducts\"\n\t\t\t\t\t\t\tv-bind:key=\"product\"\n\t\t\t\t\t\t\t:product=\"product\"\n\t\t\t\t\t\t\t:dealId=\"dealId\"\n\t\t\t\t\t\t\t:isAddToDealVisible=\"isProductsGridAvailable\"\n\t\t\t\t\t\t\t@product-added-to-deal=\"handleProductAddedToDeal\"\n\t\t\t\t\t\t\t@product-adding-to-deal=\"handleProductAddingToDeal\"\n\t\t\t\t\t\t></product>\n\t\t\t\t\t</transition-group>\n\t\t\t\t\t<!--</ul>-->\n\t\t\t\t\t<a\n\t\t\t\t\t\tv-if=\"isShowMoreVisible\"\n\t\t\t\t\t\t@click.prevent=\"showMore\"\n\t\t\t\t\t\tclass=\"crm-entity-stream-advice-link\"\n\t\t\t\t\t\thref=\"#\"\n\t\t\t\t\t>\n\t\t\t\t\t\t${Loc.getMessage('CRM_TIMELINE_ENCOURAGE_BUY_PRODUCTS_SHOW_MORE')}\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`\n});\n","export default {\n\tprops: {\n\t\tauthor: {\n\t\t\trequired: true,\n\t\t\ttype: Object\n\t\t},\n\t},\n\tcomputed: {\n\t\tiStyle()\n\t\t{\n\t\t\tif (!this.author.IMAGE_URL)\n\t\t\t{\n\t\t\t\treturn {};\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\t'background-image': 'url(' + this.author.IMAGE_URL + ')',\n\t\t\t\t'background-size': '21px',\n\t\t\t};\n\t\t},\n\t},\n\ttemplate: `\n\t\t<a\n\t\t\tv-if=\"author.SHOW_URL\"\n\t\t\t:href=\"author.SHOW_URL\"\n\t\t\ttarget=\"_blank\"\n\t\t\t:title=\"author.FORMATTED_NAME\"\n\t\t\tclass=\"ui-icon ui-icon-common-user crm-entity-stream-content-detail-employee\"\n\t\t>\n\t\t\t<i :style=\"iStyle\"></i>\t\n\t\t</a>\n\t`\n};\n","import {Vue} from 'ui.vue';\nimport HistoryItemMixin from '../mixins/history-item';\nimport Author from '../components/author';\nimport {ajax, Loc} from 'main.core';\nimport {PULL} from 'pull.client';\n\nexport default Vue.extend({\n\tmixins: [HistoryItemMixin],\n\tcomponents: {\n\t\t'author': Author,\n\t},\n\tdata()\n\t{\n\t\treturn {\n\t\t\tentityData: null,\n\t\t\tmessageId: null,\n\t\t\ttext: null,\n\t\t\ttitle: null,\n\t\t\tstatus: {\n\t\t\t\tname: null,\n\t\t\t\tsemantics: null,\n\t\t\t\tdescription: null,\n\t\t\t},\n\t\t\tprovider: null,\n\t\t\tisRefreshing: false,\n\t\t};\n\t},\n\tcreated()\n\t{\n\t\tthis.entityData = this.self.getAssociatedEntityData();\n\n\t\tif (this.entityData['MESSAGE_INFO'])\n\t\t{\n\t\t\tthis.setMessageInfo(this.entityData['MESSAGE_INFO']);\n\t\t}\n\n\t\tPULL.subscribe({\n\t\t\tmoduleId: 'notifications',\n\t\t\tcommand: 'message_update',\n\t\t\tcallback: (params) => {\n\t\t\t\tif (params.message.ID == this.messageId)\n\t\t\t\t{\n\t\t\t\t\tthis.refresh();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tif (this.entityData['PULL_TAG_NAME'])\n\t\t{\n\t\t\tPULL.extendWatch(this.entityData['PULL_TAG_NAME']);\n\t\t}\n\t},\n\tmethods: {\n\t\tsetMessageInfo(messageInfo)\n\t\t{\n\t\t\tthis.messageId = messageInfo['MESSAGE']['ID'];\n\n\t\t\tif (\n\t\t\t\tmessageInfo['HISTORY_ITEMS']\n\t\t\t\t&& Array.isArray(messageInfo['HISTORY_ITEMS'])\n\t\t\t\t&& messageInfo['HISTORY_ITEMS'].length > 0\n\t\t\t\t&& messageInfo['HISTORY_ITEMS'][0]\n\t\t\t\t&& messageInfo['HISTORY_ITEMS'][0]['PROVIDER_DATA']\n\t\t\t\t&& messageInfo['HISTORY_ITEMS'][0]['PROVIDER_DATA']['DESCRIPTION']\n\t\t\t)\n\t\t\t{\n\t\t\t\tthis.provider = messageInfo['HISTORY_ITEMS'][0]['PROVIDER_DATA']['DESCRIPTION'];\n\t\t\t\tthis.title = this.provider + ' ' + Loc.getMessage('CRM_TIMELINE_NOTIFICATION_MESSAGE');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.title = this.capitalizeFirstLetter(Loc.getMessage('CRM_TIMELINE_NOTIFICATION_MESSAGE'));\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\tmessageInfo['HISTORY_ITEMS']\n\t\t\t\t&& Array.isArray(messageInfo['HISTORY_ITEMS'])\n\t\t\t\t&& messageInfo['HISTORY_ITEMS'].length > 0\n\t\t\t\t&& messageInfo['HISTORY_ITEMS'][0]\n\t\t\t\t&& messageInfo['HISTORY_ITEMS'][0]['STATUS_DATA']\n\t\t\t\t&& messageInfo['HISTORY_ITEMS'][0]['STATUS_DATA']['DESCRIPTION']\n\t\t\t)\n\t\t\t{\n\t\t\t\tthis.status.name = messageInfo['HISTORY_ITEMS'][0]['STATUS_DATA']['DESCRIPTION'];\n\t\t\t\tthis.status.semantics = messageInfo['HISTORY_ITEMS'][0]['STATUS_DATA']['SEMANTICS'];\n\t\t\t\tthis.status.description = messageInfo['HISTORY_ITEMS'][0]['ERROR_MESSAGE'];\n\t\t\t}\n\n\t\t\tthis.text = messageInfo['MESSAGE']['TEXT']\n\t\t\t\t? messageInfo['MESSAGE']['TEXT']\n\t\t\t\t: Loc.getMessage('CRM_TIMELINE_NOTIFICATION_NO_MESSAGE_TEXT_2');\n\t\t},\n\t\trefresh()\n\t\t{\n\t\t\tif (this.isRefreshing)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.isRefreshing = true;\n\n\t\t\tajax.runAction(\n\t\t\t\t'crm.timeline.notification.getmessageinfo',\n\t\t\t\t{\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tmessageId: this.messageId\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t).then((result) => {\n\t\t\t\tthis.setMessageInfo(result.data);\n\t\t\t\tthis.isRefreshing = false;\n\t\t\t}).catch((result) => {\n\t\t\t\tthis.isRefreshing = false;\n\t\t\t});\n\t\t},\n\t\tviewActivity()\n\t\t{\n\t\t\tthis.self.view();\n\t\t},\n\t\tcapitalizeFirstLetter(str, locale= navigator.language)\n\t\t{\n\t\t\treturn str.replace(/^\\p{CWU}/u, char => char.toLocaleUpperCase(locale));\n\t\t}\n\t},\n\tcomputed: {\n\t\tcommunication()\n\t\t{\n\t\t\treturn this.entityData['COMMUNICATION'] ? this.entityData['COMMUNICATION'] : null;\n\t\t},\n\t\tstatusClass()\n\t\t{\n\t\t\treturn {\n\t\t\t\t'crm-entity-stream-content-event-process': this.status.semantics === 'process',\n\t\t\t\t'crm-entity-stream-content-event-successful': this.status.semantics === 'success',\n\t\t\t\t'crm-entity-stream-content-event-missing': this.status.semantics === 'failure',\n\t\t\t\t'crm-entity-stream-content-event-error-tip': this.isStatusError,\n\t\t\t};\n\t\t},\n\t\tisStatusError()\n\t\t{\n\t\t\treturn (this.status.semantics === 'failure' && !!this.status.description);\n\t\t},\n\t\tstatusErrorDescription()\n\t\t{\n\t\t\treturn this.isStatusError ? this.status.description : '';\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"crm-entity-stream-section crm-entity-stream-section-history crm-entity-stream-section-sms\">\n\t\t\t<div class=\"crm-entity-stream-section-icon crm-entity-stream-section-icon-sms\"></div>\n\t\t\t<div class=\"crm-entity-stream-section-content\">\n\t\t\t\t<div class=\"crm-entity-stream-content-event\">\n\t\t\t\t\t<div class=\"crm-entity-stream-content-header\">\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t@click.prevent=\"viewActivity\"\n\t\t\t\t\t\t\thref=\"#\"\n\t\t\t\t\t\t\tclass=\"crm-entity-stream-content-event-title\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{title}}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tv-if=\"status\"\n\t\t\t\t\t\t\t:class=\"statusClass\"\n\t\t\t\t\t\t\t:title=\"statusErrorDescription\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{status.name}}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span class=\"crm-entity-stream-content-event-time\">{{createdAt}}</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"crm-entity-stream-content-detail\">\n\t\t\t\t\t\t<div class=\"crm-entity-stream-content-detail-sms\">\n\t\t\t\t\t\t\t<div class=\"crm-entity-stream-content-detail-sms-status\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('CRM_TIMELINE_NOTIFICATION_VIA')} \n\t\t\t\t\t\t\t\t<strong>\n\t\t\t\t\t\t\t\t\t${Loc.getMessage('CRM_TIMELINE_NOTIFICATION_BITRIX24')}\n\t\t\t\t\t\t\t\t</strong>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"crm-entity-stream-content-detail-sms-fragment\">\n\t\t\t\t\t\t\t\t<span>{{text}}</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tv-if=\"communication\"\n\t\t\t\t\t\t\tclass=\"crm-entity-stream-content-detail-contact-info\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{BX.message('CRM_TIMELINE_SMS_TO')}}\n\t\t\t\t\t\t\t<a v-if=\"communication.SHOW_URL\" :href=\"communication.SHOW_URL\">\n\t\t\t\t\t\t\t\t{{communication.TITLE}}\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t\t\t{{communication.TITLE}}\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t<span v-if=\"communication.VALUE\">{{communication.VALUE}}</span>\n\t\t\t\t\t\t\t<template v-if=\"provider\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('CRM_TIMELINE_NOTIFICATION_IN_MESSENGER')} {{provider}}\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<author v-if=\"author\" :author=\"author\"></author>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\t\n\t`\n});\n"],"names":["props","self","required","type","Object","langMessages","computed","data","_data","fields","FIELDS","author","AUTHOR","createdAt","BX","CrmHistoryItem","formatTime","getCreatedTime","methods","getLangMessage","key","hasOwnProperty","product","dealId","Number","isAddToDealVisible","Boolean","addProductToDeal","isInDeal","$emit","ajax","runAction","productId","offerId","options","price","then","result","catch","openDetailPage","isNotEmptyString","adminLink","slider","window","open","SidePanel","Instance","isBottomAreaVisible","isVariationInfoVisible","isPriceVisible","variationInfo","currency","Currency","currencyFormat","imageStyle","image","backgroundImage","buttonText","Loc","getMessage","template","Vue","extend","mixins","HistoryItemMixin","components","Product","isShortList","shortListProductsCnt","isNotificationShown","activeRequestsCnt","products","isProductsGridAvailable","created","VIEWED_PRODUCTS","DEAL_ID","_productsGrid","subscribeCustomEvents","Crm","EntityEditor","getDefault","tapController","controller","setProductsGrid","getProductList","productsGrid","onProductsGridChanged","showMore","listWrap","document","querySelector","style","maxHeight","handleProductAddingToDeal","handleProductAddedToDeal","reload","reloadGrid","UI","Notification","Center","notify","content","events","onClose","event","actions","title","click","balloon","action","onCustomEvent","close","EventEmitter","subscribe","onProductsGridCreated","unsubscribeCustomEvents","unsubscribe","getData","dealOfferIds","map","index","OFFER_ID","entries","i","some","id","set","assign","beforeDestroy","visibleProducts","push","isShowMoreVisible","length","iStyle","IMAGE_URL","Author","entityData","messageId","text","status","name","semantics","description","provider","isRefreshing","getAssociatedEntityData","setMessageInfo","PULL","moduleId","command","callback","params","message","ID","refresh","extendWatch","messageInfo","Array","isArray","capitalizeFirstLetter","viewActivity","view","str","locale","navigator","language","replace","char","toLocaleUpperCase","communication","statusClass","isStatusError","statusErrorDescription"],"mappings":";;;;;AAAA,wBAAe;CACdA,EAAAA,KAAK,EAAE;CACNC,IAAAA,IAAI,EAAE;CACLC,MAAAA,QAAQ,EAAE,IADL;CAELC,MAAAA,IAAI,EAAEC;CAFD,KADA;CAKNC,IAAAA,YAAY,EAAE;CACbH,MAAAA,QAAQ,EAAE,KADG;CAEbC,MAAAA,IAAI,EAAEC;CAFO;CALR,GADO;CAWdE,EAAAA,QAAQ,EAAE;CACTC,IAAAA,IADS,kBAET;CACC,aAAO,KAAKN,IAAL,CAAUO,KAAjB;CACA,KAJQ;CAKTC,IAAAA,MALS,oBAMT;CACC,aAAO,KAAKF,IAAL,CAAUG,MAAV,GAAmB,KAAKH,IAAL,CAAUG,MAA7B,GAAsC,IAA7C;CACA,KARQ;CASTC,IAAAA,MATS,oBAUT;CACC,aAAO,KAAKJ,IAAL,CAAUK,MAAV,GAAmB,KAAKL,IAAL,CAAUK,MAA7B,GAAsC,IAA7C;CACA,KAZQ;CAaTC,IAAAA,SAbS,uBAcT;CACC,aAAQ,KAAKZ,IAAL,YAAqBa,EAAE,CAACC,cAAzB,GAA2C,KAAKd,IAAL,CAAUe,UAAV,CAAqB,KAAKf,IAAL,CAAUgB,cAAV,EAArB,CAA3C,GAA8F,EAArG;CACA;CAhBQ,GAXI;CA6BdC,EAAAA,OAAO,EAAE;CACRC,IAAAA,cADQ,0BACOC,GADP,EAER;CACC,aAAO,KAAKf,YAAL,CAAkBgB,cAAlB,CAAiCD,GAAjC,IAAwC,KAAKf,YAAL,CAAkBe,GAAlB,CAAxC,GAAiEA,GAAxE;CACA;CAJO;CA7BK,CAAf;;ACGA,eAAe;CACdpB,EAAAA,KAAK,EAAE;CACNsB,IAAAA,OAAO,EAAE;CACRpB,MAAAA,QAAQ,EAAE,IADF;CAERC,MAAAA,IAAI,EAAEC;CAFE,KADH;CAKNmB,IAAAA,MAAM,EAAE;CACPrB,MAAAA,QAAQ,EAAE,IADH;CAEPC,MAAAA,IAAI,EAAEqB;CAFC,KALF;CASNC,IAAAA,kBAAkB,EAAE;CACnBvB,MAAAA,QAAQ,EAAE,IADS;CAEnBC,MAAAA,IAAI,EAAEuB;CAFa;CATd,GADO;CAedR,EAAAA,OAAO,EAAE;CACRS,IAAAA,gBADQ,8BAER;CAAA;;CACC,UAAI,KAAKL,OAAL,CAAaM,QAAjB,EACA;CACC;CACA;;CAED,WAAKC,KAAL,CAAW,wBAAX;CACA,WAAKP,OAAL,CAAaM,QAAb,GAAwB,IAAxB;CAEAE,MAAAA,cAAI,CAACC,SAAL,CACC,oDADD,EAEC;CACCxB,QAAAA,IAAI,EAAE;CACLgB,UAAAA,MAAM,EAAE,KAAKA,MADR;CAELS,UAAAA,SAAS,EAAE,KAAKV,OAAL,CAAaW,OAFnB;CAGLC,UAAAA,OAAO,EAAE;CACRC,YAAAA,KAAK,EAAE,KAAKb,OAAL,CAAaa;CADZ;CAHJ;CADP,OAFD,EAWEC,IAXF,CAWO,UAACC,MAAD,EAAY;CAClB,QAAA,KAAI,CAACR,KAAL,CAAW,uBAAX;;CACA,QAAA,KAAI,CAACP,OAAL,CAAaM,QAAb,GAAwB,IAAxB;CACA,OAdD,EAcGU,KAdH,CAcS,UAACD,MAAD,EAAY;CACpB,QAAA,KAAI,CAACf,OAAL,CAAaM,QAAb,GAAwB,KAAxB;CACA,OAhBD;CAiBA,KA5BO;CA6BRW,IAAAA,cA7BQ,4BA8BR;CACC,UAAIzB,EAAE,CAACX,IAAH,CAAQqC,gBAAR,CAAyB,KAAKlB,OAAL,CAAamB,SAAtC,CAAJ,EACA;CAAA;;CACC,YAAI,uBAAKnB,OAAL,gEAAcoB,MAAd,MAAyB,GAA7B,EACA;CACCC,UAAAA,MAAM,CAACC,IAAP,CAAY,KAAKtB,OAAL,CAAamB,SAAzB,EAAoC,QAApC;CACA,SAHD,MAKA;CACC3B,UAAAA,EAAE,CAAC+B,SAAH,CAAaC,QAAb,CAAsBF,IAAtB,CAA2B,KAAKtB,OAAL,CAAamB,SAAxC;CACA;CACD;CACD;CA1CO,GAfK;CA2DdnC,EAAAA,QAAQ,EAAE;CACTyC,IAAAA,mBADS,iCAET;CACC,aAAO,KAAKC,sBAAL,IAA+B,KAAKC,cAA3C;CACA,KAJQ;CAKTD,IAAAA,sBALS,oCAMT;CACC,aACC,KAAK1B,OAAL,CAAaD,cAAb,CAA4B,eAA5B,KACG,KAAKC,OAAL,CAAa4B,aAFjB;CAIA,KAXQ;CAYTD,IAAAA,cAZS,4BAaT;CACC,aACC,KAAK3B,OAAL,CAAaD,cAAb,CAA4B,OAA5B,KACG,KAAKC,OAAL,CAAaD,cAAb,CAA4B,UAA5B,CADH,IAEG,KAAKC,OAAL,CAAaa,KAFhB,IAGG,KAAKb,OAAL,CAAa6B,QAJjB;CAMA,KApBQ;CAqBThB,IAAAA,KArBS,mBAsBT;CACC,aAAOrB,EAAE,CAACsC,QAAH,CAAYC,cAAZ,CAA2B,KAAK/B,OAAL,CAAaa,KAAxC,EAA+C,KAAKb,OAAL,CAAa6B,QAA5D,EAAsE,IAAtE,CAAP;CACA,KAxBQ;CAyBTG,IAAAA,UAzBS,wBA0BT;CACC,UAAI,CAAC,KAAKhC,OAAL,CAAaiC,KAAlB,EACA;CACC,eAAO,EAAP;CACA;;CAED,aAAO;CACNC,QAAAA,eAAe,EAAE,SAAS,KAAKlC,OAAL,CAAaiC,KAAtB,GAA8B;CADzC,OAAP;CAGA,KAnCQ;CAoCTE,IAAAA,UApCS,wBAqCT;CACC,aAAOC,aAAG,CAACC,UAAJ,CACN,KAAKrC,OAAL,CAAaM,QAAb,GACG,qDADH,GAEG,yDAHG,CAAP;CAKA;CA3CQ,GA3DI;CAwGdgC,EAAAA,QAAQ;CAxGM,CAAf;;;;;;;ACKA,iBAAeC,UAAG,CAACC,MAAJ,CAAW;CACzBC,EAAAA,MAAM,EAAE,CAACC,gBAAD,CADiB;CAEzBC,EAAAA,UAAU,EAAE;CACX,eAAWC;CADA,GAFa;CAKzB3D,EAAAA,IALyB,kBAMzB;CACC,WAAO;CACN4D,MAAAA,WAAW,EAAE,IADP;CAENC,MAAAA,oBAAoB,EAAE,CAFhB;CAGNC,MAAAA,mBAAmB,EAAE,KAHf;CAINC,MAAAA,iBAAiB,EAAE,CAJb;CAKN/C,MAAAA,MAAM,EAAE,IALF;CAMNgD,MAAAA,QAAQ,EAAE,EANJ;CAONC,MAAAA,uBAAuB,EAAE;CAPnB,KAAP;CASA,GAhBwB;CAiBzBC,EAAAA,OAjByB,qBAiBf;CAAA;;CACT,SAAKF,QAAL,GAAgB,KAAKhE,IAAL,CAAUmE,eAA1B;CACA,SAAKnD,MAAL,GAAc,KAAKhB,IAAL,CAAUoE,OAAxB;CACA,SAAKC,aAAL,GAAqB,IAArB;CACA,SAAKC,qBAAL;CACA/D,IAAAA,EAAE,CAACgE,GAAH,CAAOC,YAAP,CAAoBC,UAApB,GAAiCC,aAAjC,CAA+C,cAA/C,EAA+D,UAACC,UAAD,EAAgB;CAC9E,MAAA,KAAI,CAACC,eAAL,CAAqBD,UAAU,CAACE,cAAX,EAArB;CACA,KAFD;CAGA,GAzBwB;CA0BzBlE,EAAAA,OAAO,EAAE;CACRiE,IAAAA,eADQ,2BACQE,YADR,EAER;CACC,WAAKT,aAAL,GAAqBS,YAArB;;CACA,UAAI,KAAKT,aAAT,EACA;CACC,aAAKU,qBAAL;CACA,aAAKd,uBAAL,GAA+B,IAA/B;CACA;CACD,KATO;CAURe,IAAAA,QAVQ,sBAWR;CACC,WAAKpB,WAAL,GAAmB,KAAnB;CACA,UAAMqB,QAAQ,GAAGC,QAAQ,CAACC,aAAT,CAAuB,gCAAvB,CAAjB;CACAF,MAAAA,QAAQ,CAACG,KAAT,CAAeC,SAAf,GAA2B,MAAM,IAAjC;CACA,KAfO;CAgBR;CACAC,IAAAA,yBAjBQ,uCAkBR;CACC,WAAKvB,iBAAL;CACA,KApBO;CAqBRwB,IAAAA,wBArBQ,sCAsBR;CAAA;;CACC,UAAI,KAAKxB,iBAAL,GAAyB,CAA7B,EACA;CACC,aAAKA,iBAAL;CACA;;CAED,UAAI,EAAE,KAAKA,iBAAL,KAA2B,CAA3B,IAAgC,KAAKM,aAAvC,CAAJ,EACA;CACC;CACA;;CAED9D,MAAAA,EAAE,CAACgE,GAAH,CAAOC,YAAP,CAAoBC,UAApB,GAAiCe,MAAjC;;CACA,WAAKnB,aAAL,CAAmBoB,UAAnB,CAA8B,KAA9B;;CAEA,UAAI,CAAC,KAAK3B,mBAAV,EACA;CACC4B,QAAAA,kBAAE,CAACC,YAAH,CAAgBC,MAAhB,CAAuBC,MAAvB,CAA8B;CAC7BC,UAAAA,OAAO,EAAE3C,aAAG,CAACC,UAAJ,CAAe,4DAAf,CADoB;CAE7B2C,UAAAA,MAAM,EAAE;CACPC,YAAAA,OAAO,EAAE,iBAACC,KAAD,EAAW;CACnB,cAAA,MAAI,CAACnC,mBAAL,GAA2B,KAA3B;CACA;CAHM,WAFqB;CAO7BoC,UAAAA,OAAO,EAAE,CACR;CACCC,YAAAA,KAAK,EAAEhD,aAAG,CAACC,UAAJ,CAAe,mDAAf,CADR;CAEC2C,YAAAA,MAAM,EAAE;CACPK,cAAAA,KAAK,EAAE,eAACH,KAAD,EAAQI,OAAR,EAAiBC,MAAjB,EAA4B;CAClC/F,gBAAAA,EAAE,CAACgG,aAAH,CAAiBnE,MAAjB,EAAyB,qBAAzB,EAAgD,CAAC,cAAD,CAAhD;CACAiE,gBAAAA,OAAO,CAACG,KAAR;CACA;CAJM;CAFT,WADQ;CAPoB,SAA9B;CAoBA,aAAK1C,mBAAL,GAA2B,IAA3B;CACA;CACD,KA5DO;CA6DR;CACA;CACAQ,IAAAA,qBA/DQ,mCAgER;CACCmC,MAAAA,6BAAY,CAACC,SAAb,CAAuB,6BAAvB,EAAsD,KAAKC,qBAA3D;CACAF,MAAAA,6BAAY,CAACC,SAAb,CAAuB,4BAAvB,EAAqD,KAAK3B,qBAA1D;CACA,KAnEO;CAoER6B,IAAAA,uBApEQ,qCAqER;CACCH,MAAAA,6BAAY,CAACI,WAAb,CAAyB,6BAAzB,EAAwD,KAAKF,qBAA7D;CACAF,MAAAA,6BAAY,CAACI,WAAb,CAAyB,4BAAzB,EAAuD,KAAK9B,qBAA5D;CACA,KAxEO;CAyER4B,IAAAA,qBAzEQ,iCAyEcV,KAzEd,EA0ER;CACC,WAAKrB,eAAL,CAAqBqB,KAAK,CAACa,OAAN,GAAgB,CAAhB,CAArB;CACA,KA5EO;CA6ER/B,IAAAA,qBA7EQ,iCA6EckB,KA7Ed,EA8ER;CAAA;;CACC,UAAI,CAAC,KAAK5B,aAAV,EACA;CACC;CACA;;CAED,UAAI0C,YAAY,GAAG,KAAK1C,aAAL,CAAmBL,QAAnB,CAA4BgD,GAA5B,CAAgC,UAACjG,OAAD,EAAUkG,KAAV,EAAoB;CACtE,YAAI,EAAElG,OAAO,CAACD,cAAR,CAAuB,QAAvB,KAAoCC,OAAO,CAACb,MAAR,CAAeY,cAAf,CAA8B,UAA9B,CAAtC,CAAJ,EACA;CACC,iBAAO,IAAP;CACA;;CAED,eAAOC,OAAO,CAACb,MAAR,CAAegH,QAAtB;CACA,OAPkB,CAAnB;;CAND,iDAe4B,KAAKlD,QAAL,CAAcmD,OAAd,EAf5B;CAAA;;CAAA;CAAA;CAAA;CAAA,cAeaC,CAfb;CAAA,cAegBrG,OAfhB;;CAiBE,cAAIM,QAAQ,GAAG0F,YAAY,CAACM,IAAb,CAAkB,UAAAC,EAAE;CAAA,mBAAIA,EAAE,IAAIvG,OAAO,CAACW,OAAlB;CAAA,WAApB,CAAf;;CAEA,cAAIX,OAAO,CAACM,QAAR,KAAqBA,QAAzB,EACA;CACC;CACA;;CAEDiC,UAAAA,UAAG,CAACiE,GAAJ,CAAQ,MAAI,CAACvD,QAAb,EAAuBoD,CAAvB,EAA0BvH,MAAM,CAAC2H,MAAP,CAAc,EAAd,EAAkBzG,OAAlB,EAA2B;CAACM,YAAAA,QAAQ,EAARA;CAAD,WAA3B,CAA1B;CAxBF;;CAeC,4DACA;CAAA;;CAAA,mCAKE;CAID;CAzBF;CAAA;CAAA;CAAA;CAAA;CA0BC,KAxGO;CAyGR;CACAoG,IAAAA,aA1GQ,2BA2GR;CACC,WAAKb,uBAAL;CACA;CA7GO,GA1BgB;CAyIzB7G,EAAAA,QAAQ,EAAE;CACT2H,IAAAA,eADS,6BAET;CACC,UAAI5F,MAAM,GAAG,EAAb;CAEA,UAAIsF,CAAC,GAAG,CAAR;;CAHD,kDAIuB,KAAKpD,QAJ5B;CAAA;;CAAA;CAIC,+DACA;CAAA,cADWjD,OACX;;CACC,cAAI,KAAK6C,WAAL,IAAoBwD,CAAC,GAAG,KAAKvD,oBAAjC,EACA;CACC;CACA;;CAED/B,UAAAA,MAAM,CAAC6F,IAAP,CAAY5G,OAAZ;CAEAqG,UAAAA,CAAC;CACD;CAdF;CAAA;CAAA;CAAA;CAAA;;CAgBC,aAAOtF,MAAP;CACA,KAnBQ;CAoBT8F,IAAAA,iBApBS,+BAqBT;CACC,aAAO,KAAKhE,WAAL,IAAoB,KAAKI,QAAL,CAAc6D,MAAd,GAAuB,KAAKhE,oBAAvD;CACA;CAvBQ,GAzIe;CAkKzBR,EAAAA,QAAQ,yTAKFF,aAAG,CAACC,UAAJ,CAAe,6DAAf,CALE,yBAMFD,aAAG,CAACC,UAAJ,CAAe,mEAAf,CANE,+JAUDD,aAAG,CAACC,UAAJ,CAAe,qDAAf,CAVC,41BA+BDD,aAAG,CAACC,UAAJ,CAAe,+CAAf,CA/BC;CAlKiB,CAAX,CAAf;;ACRA,cAAe;CACd3D,EAAAA,KAAK,EAAE;CACNW,IAAAA,MAAM,EAAE;CACPT,MAAAA,QAAQ,EAAE,IADH;CAEPC,MAAAA,IAAI,EAAEC;CAFC;CADF,GADO;CAOdE,EAAAA,QAAQ,EAAE;CACT+H,IAAAA,MADS,oBAET;CACC,UAAI,CAAC,KAAK1H,MAAL,CAAY2H,SAAjB,EACA;CACC,eAAO,EAAP;CACA;;CAED,aAAO;CACN,4BAAoB,SAAS,KAAK3H,MAAL,CAAY2H,SAArB,GAAiC,GAD/C;CAEN,2BAAmB;CAFb,OAAP;CAIA;CAZQ,GAPI;CAqBd1E,EAAAA,QAAQ;CArBM,CAAf;;ACMA,mBAAeC,UAAG,CAACC,MAAJ,CAAW;CACzBC,EAAAA,MAAM,EAAE,CAACC,gBAAD,CADiB;CAEzBC,EAAAA,UAAU,EAAE;CACX,cAAUsE;CADC,GAFa;CAKzBhI,EAAAA,IALyB,kBAMzB;CACC,WAAO;CACNiI,MAAAA,UAAU,EAAE,IADN;CAENC,MAAAA,SAAS,EAAE,IAFL;CAGNC,MAAAA,IAAI,EAAE,IAHA;CAINhC,MAAAA,KAAK,EAAE,IAJD;CAKNiC,MAAAA,MAAM,EAAE;CACPC,QAAAA,IAAI,EAAE,IADC;CAEPC,QAAAA,SAAS,EAAE,IAFJ;CAGPC,QAAAA,WAAW,EAAE;CAHN,OALF;CAUNC,MAAAA,QAAQ,EAAE,IAVJ;CAWNC,MAAAA,YAAY,EAAE;CAXR,KAAP;CAaA,GApBwB;CAqBzBvE,EAAAA,OArByB,qBAsBzB;CAAA;;CACC,SAAK+D,UAAL,GAAkB,KAAKvI,IAAL,CAAUgJ,uBAAV,EAAlB;;CAEA,QAAI,KAAKT,UAAL,CAAgB,cAAhB,CAAJ,EACA;CACC,WAAKU,cAAL,CAAoB,KAAKV,UAAL,CAAgB,cAAhB,CAApB;CACA;;CAEDW,IAAAA,gBAAI,CAAClC,SAAL,CAAe;CACdmC,MAAAA,QAAQ,EAAE,eADI;CAEdC,MAAAA,OAAO,EAAE,gBAFK;CAGdC,MAAAA,QAAQ,EAAE,kBAACC,MAAD,EAAY;CACrB,YAAIA,MAAM,CAACC,OAAP,CAAeC,EAAf,IAAqB,KAAI,CAAChB,SAA9B,EACA;CACC,UAAA,KAAI,CAACiB,OAAL;CACA;CACD;CARa,KAAf;;CAUA,QAAI,KAAKlB,UAAL,CAAgB,eAAhB,CAAJ,EACA;CACCW,MAAAA,gBAAI,CAACQ,WAAL,CAAiB,KAAKnB,UAAL,CAAgB,eAAhB,CAAjB;CACA;CACD,GA5CwB;CA6CzBtH,EAAAA,OAAO,EAAE;CACRgI,IAAAA,cADQ,0BACOU,WADP,EAER;CACC,WAAKnB,SAAL,GAAiBmB,WAAW,CAAC,SAAD,CAAX,CAAuB,IAAvB,CAAjB;;CAEA,UACCA,WAAW,CAAC,eAAD,CAAX,IACGC,KAAK,CAACC,OAAN,CAAcF,WAAW,CAAC,eAAD,CAAzB,CADH,IAEGA,WAAW,CAAC,eAAD,CAAX,CAA6BxB,MAA7B,GAAsC,CAFzC,IAGGwB,WAAW,CAAC,eAAD,CAAX,CAA6B,CAA7B,CAHH,IAIGA,WAAW,CAAC,eAAD,CAAX,CAA6B,CAA7B,EAAgC,eAAhC,CAJH,IAKGA,WAAW,CAAC,eAAD,CAAX,CAA6B,CAA7B,EAAgC,eAAhC,EAAiD,aAAjD,CANJ,EAQA;CACC,aAAKb,QAAL,GAAgBa,WAAW,CAAC,eAAD,CAAX,CAA6B,CAA7B,EAAgC,eAAhC,EAAiD,aAAjD,CAAhB;CACA,aAAKlD,KAAL,GAAa,KAAKqC,QAAL,GAAgB,GAAhB,GAAsBrF,aAAG,CAACC,UAAJ,CAAe,mCAAf,CAAnC;CACA,OAXD,MAaA;CACC,aAAK+C,KAAL,GAAa,KAAKqD,qBAAL,CAA2BrG,aAAG,CAACC,UAAJ,CAAe,mCAAf,CAA3B,CAAb;CACA;;CAED,UACCiG,WAAW,CAAC,eAAD,CAAX,IACGC,KAAK,CAACC,OAAN,CAAcF,WAAW,CAAC,eAAD,CAAzB,CADH,IAEGA,WAAW,CAAC,eAAD,CAAX,CAA6BxB,MAA7B,GAAsC,CAFzC,IAGGwB,WAAW,CAAC,eAAD,CAAX,CAA6B,CAA7B,CAHH,IAIGA,WAAW,CAAC,eAAD,CAAX,CAA6B,CAA7B,EAAgC,aAAhC,CAJH,IAKGA,WAAW,CAAC,eAAD,CAAX,CAA6B,CAA7B,EAAgC,aAAhC,EAA+C,aAA/C,CANJ,EAQA;CACC,aAAKjB,MAAL,CAAYC,IAAZ,GAAmBgB,WAAW,CAAC,eAAD,CAAX,CAA6B,CAA7B,EAAgC,aAAhC,EAA+C,aAA/C,CAAnB;CACA,aAAKjB,MAAL,CAAYE,SAAZ,GAAwBe,WAAW,CAAC,eAAD,CAAX,CAA6B,CAA7B,EAAgC,aAAhC,EAA+C,WAA/C,CAAxB;CACA,aAAKjB,MAAL,CAAYG,WAAZ,GAA0Bc,WAAW,CAAC,eAAD,CAAX,CAA6B,CAA7B,EAAgC,eAAhC,CAA1B;CACA;;CAED,WAAKlB,IAAL,GAAYkB,WAAW,CAAC,SAAD,CAAX,CAAuB,MAAvB,IACTA,WAAW,CAAC,SAAD,CAAX,CAAuB,MAAvB,CADS,GAETlG,aAAG,CAACC,UAAJ,CAAe,6CAAf,CAFH;CAGA,KAvCO;CAwCR+F,IAAAA,OAxCQ,qBAyCR;CAAA;;CACC,UAAI,KAAKV,YAAT,EACA;CACC;CACA;;CAED,WAAKA,YAAL,GAAoB,IAApB;CAEAlH,MAAAA,cAAI,CAACC,SAAL,CACC,0CADD,EAEC;CACCxB,QAAAA,IAAI,EAAE;CACLkI,UAAAA,SAAS,EAAE,KAAKA;CADX;CADP,OAFD,EAOErG,IAPF,CAOO,UAACC,MAAD,EAAY;CAClB,QAAA,MAAI,CAAC6G,cAAL,CAAoB7G,MAAM,CAAC9B,IAA3B;;CACA,QAAA,MAAI,CAACyI,YAAL,GAAoB,KAApB;CACA,OAVD,EAUG1G,KAVH,CAUS,UAACD,MAAD,EAAY;CACpB,QAAA,MAAI,CAAC2G,YAAL,GAAoB,KAApB;CACA,OAZD;CAaA,KA9DO;CA+DRgB,IAAAA,YA/DQ,0BAgER;CACC,WAAK/J,IAAL,CAAUgK,IAAV;CACA,KAlEO;CAmERF,IAAAA,qBAnEQ,iCAmEcG,GAnEd,EAoER;CAAA,UAD2BC,MAC3B,uEADmCC,SAAS,CAACC,QAC7C;CACC,aAAOH,GAAG,CAACI,OAAJ,CAAY,+mIAAZ,EAAyB,UAAAC,IAAI;CAAA,eAAIA,IAAI,CAACC,iBAAL,CAAuBL,MAAvB,CAAJ;CAAA,OAA7B,CAAP;CACA;CAtEO,GA7CgB;CAqHzB7J,EAAAA,QAAQ,EAAE;CACTmK,IAAAA,aADS,2BAET;CACC,aAAO,KAAKjC,UAAL,CAAgB,eAAhB,IAAmC,KAAKA,UAAL,CAAgB,eAAhB,CAAnC,GAAsE,IAA7E;CACA,KAJQ;CAKTkC,IAAAA,WALS,yBAMT;CACC,aAAO;CACN,mDAA2C,KAAK/B,MAAL,CAAYE,SAAZ,KAA0B,SAD/D;CAEN,sDAA8C,KAAKF,MAAL,CAAYE,SAAZ,KAA0B,SAFlE;CAGN,mDAA2C,KAAKF,MAAL,CAAYE,SAAZ,KAA0B,SAH/D;CAIN,qDAA6C,KAAK8B;CAJ5C,OAAP;CAMA,KAbQ;CAcTA,IAAAA,aAdS,2BAeT;CACC,aAAQ,KAAKhC,MAAL,CAAYE,SAAZ,KAA0B,SAA1B,IAAuC,CAAC,CAAC,KAAKF,MAAL,CAAYG,WAA7D;CACA,KAjBQ;CAkBT8B,IAAAA,sBAlBS,oCAmBT;CACC,aAAO,KAAKD,aAAL,GAAqB,KAAKhC,MAAL,CAAYG,WAAjC,GAA+C,EAAtD;CACA;CArBQ,GArHe;CA4IzBlF,EAAAA,QAAQ,0mCAyBCF,aAAG,CAACC,UAAJ,CAAe,+BAAf,CAzBD,4DA2BED,aAAG,CAACC,UAAJ,CAAe,oCAAf,CA3BF,oyBA+CCD,aAAG,CAACC,UAAJ,CAAe,wCAAf,CA/CD;CA5IiB,CAAX,CAAf;;;;;;;;;"}