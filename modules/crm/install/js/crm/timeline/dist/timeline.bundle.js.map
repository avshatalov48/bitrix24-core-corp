{"version":3,"file":"timeline.bundle.js","sources":["../src/mixins/history-item.js","../src/encourage-buy-products/product.js","../src/encourage-buy-products/component.js","../src/components/author.js","../src/notification/component.js","../src/components/delivery/delivery-service-info.js","../src/delivery-activity/component.js","../src/delivery-message/component.js","../src/delivery-calculation/component.js"],"sourcesContent":["export default {\n\tprops: {\n\t\tself: {\n\t\t\trequired: true,\n\t\t\ttype: Object\n\t\t},\n\t\tlangMessages: {\n\t\t\trequired: false,\n\t\t\ttype: Object\n\t\t},\n\t},\n\tcomputed: {\n\t\tdata()\n\t\t{\n\t\t\treturn this.self._data;\n\t\t},\n\t\tfields()\n\t\t{\n\t\t\treturn this.data.FIELDS ? this.data.FIELDS : null;\n\t\t},\n\t\tauthor()\n\t\t{\n\t\t\treturn this.data.AUTHOR ? this.data.AUTHOR : null;\n\t\t},\n\t\tcreatedAt()\n\t\t{\n\t\t\treturn (this.self instanceof BX.CrmHistoryItem) ? this.self.formatTime(this.self.getCreatedTime()) : '';\n\t\t},\n\t},\n\tmethods: {\n\t\tgetLangMessage(key)\n\t\t{\n\t\t\treturn this.langMessages.hasOwnProperty(key) ? this.langMessages[key] : key;\n\t\t}\n\t}\n};\n","import {ajax, Loc} from 'main.core';\nimport 'currency';\n\nexport default {\n\tprops: {\n\t\tproduct: {\n\t\t\trequired: true,\n\t\t\ttype: Object\n\t\t},\n\t\tdealId: {\n\t\t\trequired: true,\n\t\t\ttype: Number\n\t\t},\n\t\tisAddToDealVisible: {\n\t\t\trequired: true,\n\t\t\ttype: Boolean\n\t\t},\n\t},\n\tmethods: {\n\t\taddProductToDeal()\n\t\t{\n\t\t\tif (this.product.isInDeal)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.$emit('product-adding-to-deal');\n\t\t\tthis.product.isInDeal = true;\n\n\t\t\tajax.runAction(\n\t\t\t\t'crm.timeline.encouragebuyproducts.addproducttodeal',\n\t\t\t\t{\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tdealId: this.dealId,\n\t\t\t\t\t\tproductId: this.product.offerId,\n\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\tprice: this.product.price\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t).then((result) => {\n\t\t\t\tthis.$emit('product-added-to-deal');\n\t\t\t\tthis.product.isInDeal = true;\n\t\t\t}).catch((result) => {\n\t\t\t\tthis.product.isInDeal = false;\n\t\t\t});\n\t\t},\n\t\topenDetailPage()\n\t\t{\n\t\t\tif (BX.type.isNotEmptyString(this.product.adminLink))\n\t\t\t{\n\t\t\t\tif (this.product?.slider === 'N')\n\t\t\t\t{\n\t\t\t\t\twindow.open(this.product.adminLink, '_blank');\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tBX.SidePanel.Instance.open(this.product.adminLink);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\tcomputed: {\n\t\tisBottomAreaVisible()\n\t\t{\n\t\t\treturn this.isVariationInfoVisible || this.isPriceVisible;\n\t\t},\n\t\tisVariationInfoVisible()\n\t\t{\n\t\t\treturn (\n\t\t\t\tthis.product.hasOwnProperty('variationInfo')\n\t\t\t\t&& this.product.variationInfo\n\t\t\t);\n\t\t},\n\t\tisPriceVisible()\n\t\t{\n\t\t\treturn (\n\t\t\t\tthis.product.hasOwnProperty('price')\n\t\t\t\t&& this.product.hasOwnProperty('currency')\n\t\t\t\t&& this.product.price\n\t\t\t\t&& this.product.currency\n\t\t\t);\n\t\t},\n\t\tprice()\n\t\t{\n\t\t\treturn BX.Currency.currencyFormat(this.product.price, this.product.currency, true);\n\t\t},\n\t\timageStyle()\n\t\t{\n\t\t\tif (!this.product.image)\n\t\t\t{\n\t\t\t\treturn {};\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tbackgroundImage: 'url(' + this.product.image + ')'\n\t\t\t};\n\t\t},\n\t\tbuttonText()\n\t\t{\n\t\t\treturn Loc.getMessage(\n\t\t\t\tthis.product.isInDeal\n\t\t\t\t\t? 'CRM_TIMELINE_ENCOURAGE_BUY_PRODUCTS_PRODUCT_IN_DEAL'\n\t\t\t\t\t: 'CRM_TIMELINE_ENCOURAGE_BUY_PRODUCTS_ADD_PRODUCT_TO_DEAL'\n\t\t\t);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<li\n\t\t\t:class=\"{'crm-entity-stream-advice-list-item--active': product.isInDeal}\"\n\t\t\tclass=\"crm-entity-stream-advice-list-item\"\n\t\t>\t\n\t\t\t<div class=\"crm-entity-stream-advice-list-content\">\n\t\t\t\t<div\t\n\t\t\t\t\t:style=\"imageStyle\"\n\t\t\t\t\tclass=\"crm-entity-stream-advice-list-icon\"\n\t\t\t\t>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"crm-entity-stream-advice-list-inner\">\n\t\t\t\t\t<a\n\t\t\t\t\t\t@click.prevent=\"openDetailPage\"\n\t\t\t\t\t\thref=\"#\"\n\t\t\t\t\t\tclass=\"crm-entity-stream-advice-list-name\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{product.name}}\n\t\t\t\t\t</a>\n\t\t\t\t\t<div\n\t\t\t\t\t\tv-if=\"isBottomAreaVisible\"\n\t\t\t\t\t\tclass=\"crm-entity-stream-advice-list-desc-box\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tv-if=\"isVariationInfoVisible\"\n\t\t\t\t\t\t\tclass=\"crm-entity-stream-advice-list-desc-name\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{product.variationInfo}}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tv-if=\"isPriceVisible\"\n\t\t\t\t\t\t\tv-html=\"price\"\n\t\t\t\t\t\t\tclass=\"crm-entity-stream-advice-list-desc-value\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div v-if=\"isAddToDealVisible\" class=\"crm-entity-stream-advice-list-btn-box\">\t\t\t\t\n\t\t\t\t<button\n\t\t\t\t\t@click=\"addProductToDeal\"\n\t\t\t\t\tclass=\"ui-btn ui-btn-round ui-btn-xs crm-entity-stream-advice-list-btn\"\n\t\t\t\t>\n\t\t\t\t\t{{buttonText}}\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</li>\n\t`\n}\n","import {Vue} from 'ui.vue';\nimport {BaseEvent, EventEmitter, Dom} from 'main.core.events';\nimport HistoryItemMixin from '../mixins/history-item';\nimport Product from './product';\nimport {Loc} from 'main.core';\nimport {UI} from 'ui.notification';\nimport './styles.css';\n\nexport default Vue.extend({\n\tmixins: [HistoryItemMixin],\n\tcomponents: {\n\t\t'product': Product,\n\t},\n\tdata()\n\t{\n\t\treturn {\n\t\t\tisShortList: true,\n\t\t\tshortListProductsCnt: 3,\n\t\t\tisNotificationShown: false,\n\t\t\tactiveRequestsCnt: 0,\n\t\t\tdealId: null,\n\t\t\tproducts: [],\n\t\t\tisProductsGridAvailable: false,\n\t\t};\n\t},\n\tcreated() {\n\t\tthis.products = this.data.VIEWED_PRODUCTS;\n\t\tthis.dealId = this.data.DEAL_ID;\n\t\tthis._productsGrid = null;\n\t\tthis.subscribeCustomEvents();\n\t\tBX.Crm.EntityEditor.getDefault().tapController('PRODUCT_LIST', (controller) => {\n\t\t\tthis.setProductsGrid(controller.getProductList());\n\t\t});\n\t},\n\tmethods: {\n\t\tsetProductsGrid(productsGrid)\n\t\t{\n\t\t\tthis._productsGrid = productsGrid;\n\t\t\tif (this._productsGrid)\n\t\t\t{\n\t\t\t\tthis.onProductsGridChanged();\n\t\t\t\tthis.isProductsGridAvailable = true;\n\t\t\t}\n\t\t},\n\t\tshowMore()\n\t\t{\n\t\t\tthis.isShortList = false;\n\t\t\tconst listWrap = document.querySelector('.crm-entity-stream-advice-list');\n\t\t\tlistWrap.style.maxHeight = 950 + 'px';\n\t\t},\n\t\t// region event handlers\n\t\thandleProductAddingToDeal()\n\t\t{\n\t\t\tthis.activeRequestsCnt++;\n\t\t},\n\t\thandleProductAddedToDeal()\n\t\t{\n\t\t\tif (this.activeRequestsCnt > 0)\n\t\t\t{\n\t\t\t\tthis.activeRequestsCnt--;\n\t\t\t}\n\n\t\t\tif (!(this.activeRequestsCnt === 0 && this._productsGrid))\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tBX.Crm.EntityEditor.getDefault().reload();\n\t\t\tthis._productsGrid.reloadGrid(false);\n\n\t\t\tif (!this.isNotificationShown)\n\t\t\t{\n\t\t\t\tUI.Notification.Center.notify({\n\t\t\t\t\tcontent: Loc.getMessage('CRM_TIMELINE_ENCOURAGE_BUY_PRODUCTS_PRODUCTS_ADDED_TO_DEAL'),\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tonClose: (event) => {\n\t\t\t\t\t\t\tthis.isNotificationShown = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tactions: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: Loc.getMessage('CRM_TIMELINE_ENCOURAGE_BUY_PRODUCTS_EDIT_PRODUCTS'),\n\t\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\t\tclick: (event, balloon, action) => {\n\t\t\t\t\t\t\t\t\tBX.onCustomEvent(window, 'OpenEntityDetailTab', ['tab_products']);\n\t\t\t\t\t\t\t\t\tballoon.close();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t});\n\n\t\t\t\tthis.isNotificationShown = true;\n\t\t\t}\n\t\t},\n\t\t// endregion\n\t\t// region custom events\n\t\tsubscribeCustomEvents()\n\t\t{\n\t\t\tEventEmitter.subscribe('EntityProductListController', this.onProductsGridCreated);\n\t\t\tEventEmitter.subscribe('BX.Crm.EntityEditor:onSave', this.onProductsGridChanged);\n\t\t},\n\t\tunsubscribeCustomEvents()\n\t\t{\n\t\t\tEventEmitter.unsubscribe('EntityProductListController', this.onProductsGridCreated);\n\t\t\tEventEmitter.unsubscribe('BX.Crm.EntityEditor:onSave', this.onProductsGridChanged);\n\t\t},\n\t\tonProductsGridCreated(event: BaseEvent)\n\t\t{\n\t\t\tthis.setProductsGrid(event.getData()[0]);\n\t\t},\n\t\tonProductsGridChanged(event: BaseEvent)\n\t\t{\n\t\t\tif (!this._productsGrid)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet dealOfferIds = this._productsGrid.products.map((product, index) => {\n\t\t\t\tif (!(product.hasOwnProperty('fields') && product.fields.hasOwnProperty('OFFER_ID')))\n\t\t\t\t{\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\treturn product.fields.OFFER_ID;\n\t\t\t});\n\n\t\t\tfor (const [i, product] of this.products.entries())\n\t\t\t{\n\t\t\t\tlet isInDeal = dealOfferIds.some(id => id == product.offerId);\n\n\t\t\t\tif (product.isInDeal === isInDeal)\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tVue.set(this.products, i, Object.assign({}, product, {isInDeal}));\n\t\t\t}\n\t\t},\n\t\t// endregion\n\t\tbeforeDestroy()\n\t\t{\n\t\t\tthis.unsubscribeCustomEvents();\n\t\t}\n\t},\n\tcomputed: {\n\t\tvisibleProducts()\n\t\t{\n\t\t\tlet result = [];\n\n\t\t\tlet i = 1;\n\t\t\tfor (const product of this.products)\n\t\t\t{\n\t\t\t\tif (this.isShortList && i > this.shortListProductsCnt)\n\t\t\t\t{\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tresult.push(product);\n\n\t\t\t\ti++;\n\t\t\t}\n\n\t\t\treturn result;\n\t\t},\n\t\tisShowMoreVisible()\n\t\t{\n\t\t\treturn this.isShortList && this.products.length > this.shortListProductsCnt;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"crm-entity-stream-section crm-entity-stream-section-advice\">\n\t\t\t<div class=\"crm-entity-stream-section-icon crm-entity-stream-section-icon-advice\"></div>\n\t\t\t<div class=\"crm-entity-stream-advice-content\">\n\t\t\t\t<div class=\"crm-entity-stream-advice-info\">\n\t\t\t\t\t${Loc.getMessage('CRM_TIMELINE_ENCOURAGE_BUY_PRODUCTS_LOOK_AT_CLIENT_PRODUCTS')}\n\t\t\t\t\t${Loc.getMessage('CRM_TIMELINE_ENCOURAGE_BUY_PRODUCTS_ENCOURAGE_CLIENT_BUY_PRODUCTS')}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"crm-entity-stream-advice-inner\">\n\t\t\t\t\t<h3 class=\"crm-entity-stream-advice-subtitle\">\n\t\t\t\t\t\t${Loc.getMessage('CRM_TIMELINE_ENCOURAGE_BUY_PRODUCTS_VIEWED_PRODUCTS')}\n\t\t\t\t\t</h3>\n\t\t\t\t\t<!--<ul class=\"crm-entity-stream-advice-list\">-->\n\t\t\t\t\t<transition-group class=\"crm-entity-stream-advice-list\" name=\"list\" tag=\"ul\">\t\t\t\t\t\t\n\t\t\t\t\t\t<product\n\t\t\t\t\t\t\tv-for=\"product in visibleProducts\"\n\t\t\t\t\t\t\tv-bind:key=\"product\"\n\t\t\t\t\t\t\t:product=\"product\"\n\t\t\t\t\t\t\t:dealId=\"dealId\"\n\t\t\t\t\t\t\t:isAddToDealVisible=\"isProductsGridAvailable\"\n\t\t\t\t\t\t\t@product-added-to-deal=\"handleProductAddedToDeal\"\n\t\t\t\t\t\t\t@product-adding-to-deal=\"handleProductAddingToDeal\"\n\t\t\t\t\t\t></product>\n\t\t\t\t\t</transition-group>\n\t\t\t\t\t<!--</ul>-->\n\t\t\t\t\t<a\n\t\t\t\t\t\tv-if=\"isShowMoreVisible\"\n\t\t\t\t\t\t@click.prevent=\"showMore\"\n\t\t\t\t\t\tclass=\"crm-entity-stream-advice-link\"\n\t\t\t\t\t\thref=\"#\"\n\t\t\t\t\t>\n\t\t\t\t\t\t${Loc.getMessage('CRM_TIMELINE_ENCOURAGE_BUY_PRODUCTS_SHOW_MORE')}\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`\n});\n","export default {\n\tprops: {\n\t\tauthor: {\n\t\t\trequired: true,\n\t\t\ttype: Object\n\t\t},\n\t},\n\tcomputed: {\n\t\tiStyle()\n\t\t{\n\t\t\tif (!this.author.IMAGE_URL)\n\t\t\t{\n\t\t\t\treturn {};\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\t'background-image': 'url(' + this.author.IMAGE_URL + ')',\n\t\t\t\t'background-size': '21px',\n\t\t\t};\n\t\t},\n\t},\n\ttemplate: `\n\t\t<a\n\t\t\tv-if=\"author.SHOW_URL\"\n\t\t\t:href=\"author.SHOW_URL\"\n\t\t\ttarget=\"_blank\"\n\t\t\t:title=\"author.FORMATTED_NAME\"\n\t\t\tclass=\"ui-icon ui-icon-common-user crm-entity-stream-content-detail-employee\"\n\t\t>\n\t\t\t<i :style=\"iStyle\"></i>\t\n\t\t</a>\n\t`\n};\n","import {Vue} from 'ui.vue';\nimport HistoryItemMixin from '../mixins/history-item';\nimport Author from '../components/author';\nimport {ajax, Loc} from 'main.core';\nimport {PULL} from 'pull.client';\n\nexport default Vue.extend({\n\tmixins: [HistoryItemMixin],\n\tcomponents: {\n\t\t'author': Author,\n\t},\n\tdata()\n\t{\n\t\treturn {\n\t\t\tentityData: null,\n\t\t\tmessageId: null,\n\t\t\ttext: null,\n\t\t\ttitle: null,\n\t\t\tstatus: {\n\t\t\t\tname: null,\n\t\t\t\tsemantics: null,\n\t\t\t\tdescription: null,\n\t\t\t},\n\t\t\tprovider: null,\n\t\t\tisRefreshing: false,\n\t\t};\n\t},\n\tcreated()\n\t{\n\t\tthis.entityData = this.self.getAssociatedEntityData();\n\n\t\tif (this.entityData['MESSAGE_INFO'])\n\t\t{\n\t\t\tthis.setMessageInfo(this.entityData['MESSAGE_INFO']);\n\t\t}\n\n\t\tPULL.subscribe({\n\t\t\tmoduleId: 'notifications',\n\t\t\tcommand: 'message_update',\n\t\t\tcallback: (params) => {\n\t\t\t\tif (params.message.ID == this.messageId)\n\t\t\t\t{\n\t\t\t\t\tthis.refresh();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tif (this.entityData['PULL_TAG_NAME'])\n\t\t{\n\t\t\tPULL.extendWatch(this.entityData['PULL_TAG_NAME']);\n\t\t}\n\t},\n\tmethods: {\n\t\tsetMessageInfo(messageInfo)\n\t\t{\n\t\t\tthis.messageId = messageInfo['MESSAGE']['ID'];\n\n\t\t\tif (\n\t\t\t\tmessageInfo['HISTORY_ITEMS']\n\t\t\t\t&& Array.isArray(messageInfo['HISTORY_ITEMS'])\n\t\t\t\t&& messageInfo['HISTORY_ITEMS'].length > 0\n\t\t\t\t&& messageInfo['HISTORY_ITEMS'][0]\n\t\t\t\t&& messageInfo['HISTORY_ITEMS'][0]['PROVIDER_DATA']\n\t\t\t\t&& messageInfo['HISTORY_ITEMS'][0]['PROVIDER_DATA']['DESCRIPTION']\n\t\t\t)\n\t\t\t{\n\t\t\t\tthis.provider = messageInfo['HISTORY_ITEMS'][0]['PROVIDER_DATA']['DESCRIPTION'];\n\t\t\t\tthis.title = this.provider + ' ' + Loc.getMessage('CRM_TIMELINE_NOTIFICATION_MESSAGE');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.title = this.capitalizeFirstLetter(Loc.getMessage('CRM_TIMELINE_NOTIFICATION_MESSAGE'));\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\tmessageInfo['HISTORY_ITEMS']\n\t\t\t\t&& Array.isArray(messageInfo['HISTORY_ITEMS'])\n\t\t\t\t&& messageInfo['HISTORY_ITEMS'].length > 0\n\t\t\t\t&& messageInfo['HISTORY_ITEMS'][0]\n\t\t\t\t&& messageInfo['HISTORY_ITEMS'][0]['STATUS_DATA']\n\t\t\t\t&& messageInfo['HISTORY_ITEMS'][0]['STATUS_DATA']['DESCRIPTION']\n\t\t\t)\n\t\t\t{\n\t\t\t\tthis.status.name = messageInfo['HISTORY_ITEMS'][0]['STATUS_DATA']['DESCRIPTION'];\n\t\t\t\tthis.status.semantics = messageInfo['HISTORY_ITEMS'][0]['STATUS_DATA']['SEMANTICS'];\n\t\t\t\tthis.status.description = messageInfo['HISTORY_ITEMS'][0]['ERROR_MESSAGE'];\n\t\t\t}\n\n\t\t\tthis.text = messageInfo['MESSAGE']['TEXT']\n\t\t\t\t? messageInfo['MESSAGE']['TEXT']\n\t\t\t\t: Loc.getMessage('CRM_TIMELINE_NOTIFICATION_NO_MESSAGE_TEXT_2');\n\t\t},\n\t\trefresh()\n\t\t{\n\t\t\tif (this.isRefreshing)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.isRefreshing = true;\n\n\t\t\tajax.runAction(\n\t\t\t\t'crm.timeline.notification.getmessageinfo',\n\t\t\t\t{\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tmessageId: this.messageId\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t).then((result) => {\n\t\t\t\tthis.setMessageInfo(result.data);\n\t\t\t\tthis.isRefreshing = false;\n\t\t\t}).catch((result) => {\n\t\t\t\tthis.isRefreshing = false;\n\t\t\t});\n\t\t},\n\t\tviewActivity()\n\t\t{\n\t\t\tthis.self.view();\n\t\t},\n\t\tcapitalizeFirstLetter(str, locale= navigator.language)\n\t\t{\n\t\t\treturn str.replace(/^\\p{CWU}/u, char => char.toLocaleUpperCase(locale));\n\t\t}\n\t},\n\tcomputed: {\n\t\tcommunication()\n\t\t{\n\t\t\treturn this.entityData['COMMUNICATION'] ? this.entityData['COMMUNICATION'] : null;\n\t\t},\n\t\tstatusClass()\n\t\t{\n\t\t\treturn {\n\t\t\t\t'crm-entity-stream-content-event-process': this.status.semantics === 'process',\n\t\t\t\t'crm-entity-stream-content-event-successful': this.status.semantics === 'success',\n\t\t\t\t'crm-entity-stream-content-event-missing': this.status.semantics === 'failure',\n\t\t\t\t'crm-entity-stream-content-event-error-tip': this.isStatusError,\n\t\t\t};\n\t\t},\n\t\tisStatusError()\n\t\t{\n\t\t\treturn (this.status.semantics === 'failure' && !!this.status.description);\n\t\t},\n\t\tstatusErrorDescription()\n\t\t{\n\t\t\treturn this.isStatusError ? this.status.description : '';\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"crm-entity-stream-section crm-entity-stream-section-history crm-entity-stream-section-sms\">\n\t\t\t<div class=\"crm-entity-stream-section-icon crm-entity-stream-section-icon-sms\"></div>\n\t\t\t<div class=\"crm-entity-stream-section-content\">\n\t\t\t\t<div class=\"crm-entity-stream-content-event\">\n\t\t\t\t\t<div class=\"crm-entity-stream-content-header\">\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t@click.prevent=\"viewActivity\"\n\t\t\t\t\t\t\thref=\"#\"\n\t\t\t\t\t\t\tclass=\"crm-entity-stream-content-event-title\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{title}}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tv-if=\"status\"\n\t\t\t\t\t\t\t:class=\"statusClass\"\n\t\t\t\t\t\t\t:title=\"statusErrorDescription\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{status.name}}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span class=\"crm-entity-stream-content-event-time\">{{createdAt}}</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"crm-entity-stream-content-detail\">\n\t\t\t\t\t\t<div class=\"crm-entity-stream-content-detail-sms\">\n\t\t\t\t\t\t\t<div class=\"crm-entity-stream-content-detail-sms-status\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('CRM_TIMELINE_NOTIFICATION_VIA')} \n\t\t\t\t\t\t\t\t<strong>\n\t\t\t\t\t\t\t\t\t${Loc.getMessage('CRM_TIMELINE_NOTIFICATION_BITRIX24')}\n\t\t\t\t\t\t\t\t</strong>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"crm-entity-stream-content-detail-sms-fragment\">\n\t\t\t\t\t\t\t\t<span>{{text}}</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tv-if=\"communication\"\n\t\t\t\t\t\t\tclass=\"crm-entity-stream-content-detail-contact-info\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{BX.message('CRM_TIMELINE_SMS_TO')}}\n\t\t\t\t\t\t\t<a v-if=\"communication.SHOW_URL\" :href=\"communication.SHOW_URL\">\n\t\t\t\t\t\t\t\t{{communication.TITLE}}\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t\t\t{{communication.TITLE}}\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t<span v-if=\"communication.VALUE\">{{communication.VALUE}}</span>\n\t\t\t\t\t\t\t<template v-if=\"provider\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('CRM_TIMELINE_NOTIFICATION_IN_MESSENGER')} {{provider}}\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<author v-if=\"author\" :author=\"author\"></author>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\t\n\t`\n});\n","export default {\n\tprops: {\n\t\tdeliveryService: {\n\t\t\trequired: true,\n\t\t\ttype: Object\n\t\t},\n\t},\n\tcomputed: {\n\t\tisDeliveryServiceProfile()\n\t\t{\n\t\t\treturn this.deliveryService.IS_PROFILE;\n\t\t},\n\t\tdeliveryServiceName()\n\t\t{\n\t\t\treturn this.isDeliveryServiceProfile ? this.deliveryService.PARENT_NAME : this.deliveryService.NAME;\n\t\t},\n\t\tdeliveryProfileServiceName()\n\t\t{\n\t\t\treturn this.deliveryService.NAME;\n\t\t},\n\t\tdeliveryServiceLogoBackgroundUrl()\n\t\t{\n\t\t\treturn this.isDeliveryServiceProfile ? this.deliveryService.PARENT_LOGO : this.deliveryService.LOGO;\n\n\t\t\treturn logo\n\t\t\t\t? {\n\t\t\t\t\t'background-image': 'url(' + logo + ')'\n\t\t\t\t}\n\t\t\t\t: {};\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"crm-entity-stream-content-delivery-title\">\n\t\t\t<div\n\t\t\t\tv-if=\"isDeliveryServiceProfile && deliveryService.LOGO\"\n\t\t\t\tclass=\"crm-entity-stream-content-delivery-icon\"\n\t\t\t\t:style=\"{'background-image': 'url(' + deliveryService.LOGO + ')'}\"\n\t\t\t>\n\t\t\t</div>\n\t\t\t<div class=\"crm-entity-stream-content-delivery-title-contnet\">\n\t\t\t\t<div\n\t\t\t\t\tv-if=\"deliveryServiceLogoBackgroundUrl\"\n\t\t\t\t\tclass=\"crm-entity-stream-content-delivery-title-logo\"\n\t\t\t\t\t:style=\"{'background-image': 'url(' + deliveryServiceLogoBackgroundUrl + ')'}\"\n\t\t\t\t></div>\n\t\t\t\t<div class=\"crm-entity-stream-content-delivery-title-info\">\n\t\t\t\t\t<div class=\"crm-entity-stream-content-delivery-title-name\">\n\t\t\t\t\t\t{{deliveryServiceName}}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tv-if=\"isDeliveryServiceProfile\"\n\t\t\t\t\t\tclass=\"crm-entity-stream-content-delivery-title-param\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{deliveryProfileServiceName}}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`\n};\n","import {Vue} from 'ui.vue';\nimport {ajax, Loc} from 'main.core';\nimport Author from '../components/author';\nimport DeliveryServiceInfo from '../components/delivery/delivery-service-info';\nimport {PULL} from 'pull.client';\nimport HistoryItemMixin from '../mixins/history-item';\n\nexport default Vue.extend({\n\tmixins: [HistoryItemMixin],\n\tcomponents: {\n\t\t'author': Author,\n\t\t'delivery-service-info': DeliveryServiceInfo,\n\t},\n\tprops: {\n\t\tmode: {\n\t\t\trequired: true,\n\t\t\ttype: String\n\t\t},\n\t},\n\tdata()\n\t{\n\t\treturn {\n\t\t\tentityData: null,\n\t\t\tdeliveryInfo: null,\n\t\t\tisRefreshing: false,\n\t\t\tisCreatingRequest: false,\n\t\t\tisCancellingRequest: false,\n\t\t};\n\t},\n\tmethods: {\n\t\t// region common activity methods\n\t\tcompleteActivity()\n\t\t{\n\t\t\tif(this.self.canComplete())\n\t\t\t{\n\t\t\t\tthis.self.setAsDone(!this.self.isDone());\n\t\t\t}\n\t\t},\n\t\tshowContextMenu(event)\n\t\t{\n\t\t\tlet popup = BX.PopupMenu.create(\n\t\t\t\t'taxi_activity_context_menu_' + this.self.getId(),\n\t\t\t\tevent.target,\n\t\t\t\t[\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'delete',\n\t\t\t\t\t\ttext: this.getLangMessage('menuDelete'),\n\t\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\t\tpopup.close();\n\n\t\t\t\t\t\t\tlet deletionDlgId = 'entity_timeline_deletion_' + this.self.getId() + '_confirm';\n\t\t\t\t\t\t\tlet dlg = BX.Crm.ConfirmationDialog.get(deletionDlgId);\n\n\t\t\t\t\t\t\tif (!dlg)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tdlg = BX.Crm.ConfirmationDialog.create(\n\t\t\t\t\t\t\t\t\tdeletionDlgId,\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\ttitle: this.getLangMessage('removeConfirmTitle'),\n\t\t\t\t\t\t\t\t\t\tcontent: this.getLangMessage('deliveryRemove')\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tdlg.open().then(\n\t\t\t\t\t\t\t\t(result) => {\n\t\t\t\t\t\t\t\t\tif (result.cancel)\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tthis.self.remove();\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t(result) => {},\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\t{\n\t\t\t\t\tautoHide: true,\n\t\t\t\t\toffsetTop: 0,\n\t\t\t\t\toffsetLeft: 16,\n\t\t\t\t\tangle: { position: \"top\", offset: 0 },\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tonPopupShow: () =>  BX.addClass(event.target, 'active'),\n\t\t\t\t\t\tonPopupClose: () => BX.removeClass(event.target, 'active'),\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tpopup.show();\n\t\t},\n\t\t// endregion\n\t\t// region delivery request methods\n\t\tcreateDeliveryRequest()\n\t\t{\n\t\t\tif (this.isLocked)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.isCreatingRequest = true;\n\t\t\tBX.ajax.runAction(\n\t\t\t\t'sale.deliveryrequest.create',\n\t\t\t\t{\n\t\t\t\t\tanalyticsLabel: 'saleDeliveryTaxiCall',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tshipmentIds: this.shipmentIds,\n\t\t\t\t\t\tadditional: {\n\t\t\t\t\t\t\tACTIVITY_ID: this.activityId,\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t).then((result) => {\n\t\t\t\tthis.refresh(() => {\n\t\t\t\t\tthis.isCreatingRequest = false;\n\t\t\t\t});\n\t\t\t}).catch((result) => {\n\t\t\t\tthis.isCreatingRequest = false;\n\t\t\t\tthis.showError(result.errors.map((item) => item.message).join());\n\t\t\t});\n\t\t},\n\t\tcancelDeliveryRequest()\n\t\t{\n\t\t\tif (this.isLocked || !this.deliveryRequest)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.isCancellingRequest = true;\n\t\t\tBX.ajax.runAction(\n\t\t\t\t'sale.deliveryrequest.execute',\n\t\t\t\t{\n\t\t\t\t\tdata: {\n\t\t\t\t\t\trequestId: this.deliveryRequest['ID'],\n\t\t\t\t\t\tactionType: this.deliveryService['CANCEL_ACTION_CODE'],\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.then((result) => {\n\t\t\t\t\tconst data = result.data;\n\n\t\t\t\t\tBX.ajax.runAction(\n\t\t\t\t\t\t'crm.timeline.deliveryactivity.createcanceldeliveryrequestmessage',\n\t\t\t\t\t\t{data: {\n\t\t\t\t\t\t\trequestId: this.deliveryRequest['ID'],\n\t\t\t\t\t\t\tmessage: data.message\n\t\t\t\t\t\t}}\n\t\t\t\t\t).then((result) => {\n\t\t\t\t\t\tBX.ajax.runAction(\n\t\t\t\t\t\t\t'sale.deliveryrequest.delete',\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\trequestId: this.deliveryRequest['ID'],\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.then((result) => {\n\t\t\t\t\t\t\t\tthis.refresh(() => {\n\t\t\t\t\t\t\t\t\tthis.isCancellingRequest = false;\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}).catch((result) => {\n\t\t\t\t\t\t\tthis.isCancellingRequest = false;\n\t\t\t\t\t\t\tthis.showError(result.errors.map((item) => item.message).join());\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}).catch((result) => {\n\t\t\t\t\tthis.isCancellingRequest = false;\n\t\t\t\t\tthis.showError(result.errors.map((item) => item.message).join());\n\t\t\t\t});\n\t\t},\n\t\tcheckRequestStatus()\n\t\t{\n\t\t\tBX.ajax.runAction('crm.timeline.deliveryactivity.checkrequeststatus');\n\t\t},\n\t\tstartCheckingRequestStatus()\n\t\t{\n\t\t\tclearTimeout(this._checkRequestStatusTimeoutId);\n\t\t\tthis._checkRequestStatusTimeoutId = setInterval(\n\t\t\t\t() => this.checkRequestStatus(), 30 * 1000\n\t\t\t);\n\t\t},\n\t\tstopCheckingRequestStatus()\n\t\t{\n\t\t\tclearTimeout(this._checkRequestStatusTimeoutId);\n\t\t},\n\t\t// endregion\n\t\t// region refresh methods\n\t\tsetDeliveryInfo(deliveryInfo)\n\t\t{\n\t\t\tthis.deliveryInfo = deliveryInfo;\n\t\t},\n\t\trefresh(callback = null)\n\t\t{\n\t\t\tif (this.isRefreshing)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.isRefreshing = true;\n\n\t\t\tconst finallyCallback = () => {\n\t\t\t\tthis.isRefreshing = false;\n\t\t\t\tif (callback)\n\t\t\t\t{\n\t\t\t\t\tcallback();\n\t\t\t\t}\n\t\t\t};\n\t\t\tajax.runAction(\n\t\t\t\t'crm.timeline.deliveryactivity.getdeliveryinfo',\n\t\t\t\t{\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tactivityId: this.activityId\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t).then((result) => {\n\t\t\t\tthis.setDeliveryInfo(result.data);\n\t\t\t\tfinallyCallback();\n\t\t\t}).catch((result) => {\n\t\t\t\tfinallyCallback();\n\t\t\t});\n\t\t},\n\t\tsubscribePullEvents()\n\t\t{\n\t\t\tif (this._isPullSubscribed)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tPULL.subscribe({\n\t\t\t\tmoduleId: 'crm',\n\t\t\t\tcommand: 'onOrderShipmentSave',\n\t\t\t\tcallback: (params) => {\n\t\t\t\t\tif (this.shipmentIds.some(id => id == params.FIELDS.ID))\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.refresh();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tPULL.subscribe({\n\t\t\t\tmoduleId: 'sale',\n\t\t\t\tcommand: 'onDeliveryServiceSave',\n\t\t\t\tcallback: (params) => {\n\t\t\t\t\tif (this.deliveryServiceIds.some(id => id == params.ID))\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.refresh();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tPULL.subscribe({\n\t\t\t\tmoduleId: 'sale',\n\t\t\t\tcommand: 'onDeliveryRequestUpdate',\n\t\t\t\tcallback: (params) => {\n\t\t\t\t\tif (this.deliveryRequestId == params.ID)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.refresh();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tPULL.subscribe({\n\t\t\t\tmoduleId: 'sale',\n\t\t\t\tcommand: 'onDeliveryRequestDelete',\n\t\t\t\tcallback: (params) => {\n\t\t\t\t\tif (this.deliveryRequestId == params.ID)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.refresh();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tPULL.extendWatch('SALE_DELIVERY_SERVICE');\n\t\t\tPULL.extendWatch('CRM_ENTITY_ORDER_SHIPMENT');\n\t\t\tPULL.extendWatch('SALE_DELIVERY_REQUEST');\n\n\t\t\tthis._isPullSubscribed = true;\n\t\t},\n\t\t//endregion\n\t\t// region miscellaneous\n\t\tcallPhone(phone)\n\t\t{\n\t\t\tif (this.canUseTelephony && typeof(top.BXIM)!=='undefined')\n\t\t\t{\n\t\t\t\ttop.BXIM.phoneTo(phone);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\twindow.location.href='tel:' + phone;\n\t\t\t}\n\t\t},\n\t\tisPhone(property)\n\t\t{\n\t\t\treturn (\n\t\t\t\tproperty.hasOwnProperty('TAGS')\n\t\t\t\t&& Array.isArray(property['TAGS'])\n\t\t\t\t&& property['TAGS'].includes('phone')\n\t\t\t);\n\t\t},\n\t\tshowError(message)\n\t\t{\n\t\t\tBX.loadExt('ui.notification').then(() => { BX.UI.Notification.Center.notify({content: message}); });\n\t\t},\n\t\t// endregion\n\t},\n\tcreated()\n\t{\n\t\tthis.entityData = this.self.getAssociatedEntityData();\n\t\tif (this.entityData['DELIVERY_INFO'])\n\t\t{\n\t\t\tthis.setDeliveryInfo(this.entityData['DELIVERY_INFO']);\n\t\t}\n\t\t\n\t\tthis.subscribePullEvents();\n\n\t\tthis._checkRequestStatusTimeoutId = null;\n\t\tif (this.needCheckRequestStatus)\n\t\t{\n\t\t\tthis.startCheckingRequestStatus();\n\t\t}\n\t},\n\tcomputed: {\n\t\tactivityId()\n\t\t{\n\t\t\treturn this.data.ASSOCIATED_ENTITY.ID;\n\t\t},\n\t\t// region shipments\n\t\tshipments()\n\t\t{\n\t\t\tif (\n\t\t\t\tthis.deliveryInfo\n\t\t\t\t&& this.deliveryInfo.hasOwnProperty('SHIPMENTS')\n\t\t\t\t&& Array.isArray(this.deliveryInfo['SHIPMENTS'])\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn this.deliveryInfo['SHIPMENTS'];\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\t\tshipmentIds()\n\t\t{\n\t\t\treturn this.shipments ? this.shipments.map((shipment) => shipment['ID']) : [];\n\t\t},\n\t\tshipment()\n\t\t{\n\t\t\tif (\n\t\t\t\tthis.shipments\n\t\t\t\t&& Array.isArray(this.shipments)\n\t\t\t\t&& this.shipments.length > 0\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn this.shipments[0];\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\t\texpectedDeliveryPriceFormatted()\n\t\t{\n\t\t\treturn (this.shipment && this.shipment.hasOwnProperty('BASE_PRICE_DELIVERY'))\n\t\t\t\t? this.shipment['BASE_PRICE_DELIVERY_FORMATTED']\n\t\t\t\t: this.shipment['PRICE_DELIVERY_FORMATTED'];\n\t\t},\n\t\t// endregion\n\t\t// region delivery service\n\t\tdeliveryService()\n\t\t{\n\t\t\tif (\n\t\t\t\tthis.deliveryInfo\n\t\t\t\t&& this.deliveryInfo.hasOwnProperty('DELIVERY_SERVICE')\n\t\t\t\t&& typeof this.deliveryInfo['DELIVERY_SERVICE'] === 'object'\n\t\t\t\t&& this.deliveryInfo['DELIVERY_SERVICE'] !== null\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn this.deliveryInfo['DELIVERY_SERVICE'];\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\t\tdeliveryServiceIds()\n\t\t{\n\t\t\t// @TODO\n\t\t\tif (!this.deliveryService)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn this.deliveryService.IDS;\n\t\t},\n\t\t// endregion\n\t\t// region delivery request\n\t\tdeliveryRequest()\n\t\t{\n\t\t\tif (\n\t\t\t\tthis.deliveryInfo\n\t\t\t\t&& this.deliveryInfo.hasOwnProperty('DELIVERY_REQUEST')\n\t\t\t\t&& typeof this.deliveryInfo['DELIVERY_REQUEST'] === 'object'\n\t\t\t\t&& this.deliveryInfo['DELIVERY_REQUEST'] !== null\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn this.deliveryInfo['DELIVERY_REQUEST'];\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\t\tdeliveryRequestId()\n\t\t{\n\t\t\tif (this.deliveryRequest && this.deliveryRequest.hasOwnProperty('ID'))\n\t\t\t{\n\t\t\t\treturn this.deliveryRequest['ID'];\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\t\tdeliveryRequestProperties()\n\t\t{\n\t\t\tif (\n\t\t\t\tthis.deliveryRequest\n\t\t\t\t&& this.deliveryRequest.hasOwnProperty('EXTERNAL_PROPERTIES')\n\t\t\t\t&& typeof this.deliveryRequest['EXTERNAL_PROPERTIES'] === 'object'\n\t\t\t\t&& this.deliveryRequest['EXTERNAL_PROPERTIES'] !== null\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn this.deliveryRequest['EXTERNAL_PROPERTIES'];\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\t\tdeliveryRequestStatus()\n\t\t{\n\t\t\tif (!this.deliveryRequest)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn this.deliveryRequest['EXTERNAL_STATUS'];\n\t\t},\n\t\tdeliveryRequestStatusSemantic()\n\t\t{\n\t\t\tif (!this.deliveryRequest)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn this.deliveryRequest['EXTERNAL_STATUS_SEMANTIC'];\n\t\t},\n\t\tisConnectedWithDeliveryRequest()\n\t\t{\n\t\t\treturn !!this.deliveryRequest;\n\t\t},\n\t\tneedCheckRequestStatus()\n\t\t{\n\t\t\treturn this.isConnectedWithDeliveryRequest && this.mode === 'schedule';\n\t\t},\n\t\tisSendRequestButtonVisible()\n\t\t{\n\t\t\treturn (!this.isCreatingRequest && !this.isConnectedWithDeliveryRequest);\n\t\t},\n\t\t// endregion\n\t\t//region miscellaneous\n\t\tmiscellaneous()\n\t\t{\n\t\t\tif (\n\t\t\t\tthis.deliveryInfo\n\t\t\t\t&& this.deliveryInfo.hasOwnProperty('MISCELLANEOUS')\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn this.deliveryInfo['MISCELLANEOUS'];\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\t\tcanUseTelephony()\n\t\t{\n\t\t\treturn (\n\t\t\t\tthis.miscellaneous\n\t\t\t\t&& this.miscellaneous.hasOwnProperty('CAN_USE_TELEPHONY')\n\t\t\t\t&& this.miscellaneous['CAN_USE_TELEPHONY']\n\t\t\t);\n\t\t},\n\t\ttemplate()\n\t\t{\n\t\t\tif (!this.miscellaneous || !this.miscellaneous.hasOwnProperty('TEMPLATE'))\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn this.miscellaneous['TEMPLATE'];\n\t\t},\n\t\t// endregion\n\t\t// region classes\n\t\tcancelRequestButtonStyle()\n\t\t{\n\t\t\treturn {\n\t\t\t\t'ui-btn': true,\n\t\t\t\t'ui-btn-sm': true,\n\t\t\t\t'ui-btn-light-border': true,\n\t\t\t\t'ui-btn-wait': this.isCancellingRequest\n\t\t\t};\n\t\t},\n\t\tstatusClass()\n\t\t{\n\t\t\treturn {\n\t\t\t\t'crm-entity-stream-content-event-process': this.deliveryRequestStatusSemantic === 'process',\n\t\t\t\t'crm-entity-stream-content-event-missing': this.deliveryRequestStatusSemantic === 'error',\n\t\t\t\t'crm-entity-stream-content-event-done': this.deliveryRequestStatusSemantic === 'success',\n\t\t\t};\n\t\t},\n\t\twrapperContainerClass()\n\t\t{\n\t\t\treturn {\n\t\t\t\t'crm-entity-stream-section-planned': this.mode === 'schedule'\n\t\t\t};\n\t\t},\n\t\tinnerWrapperContainerClass()\n\t\t{\n\t\t\treturn {\n\t\t\t\t'crm-entity-stream-content-event--delivery': this.mode !== 'schedule'\n\t\t\t};\n\t\t},\n\t\t// endregion\n\t\tisLocked()\n\t\t{\n\t\t\treturn this.isRefreshing || this.isCreatingRequest || this.isCancellingRequest;\n\t\t},\n\t},\n\twatch: {\n\t\tneedCheckRequestStatus: function (value)\n\t\t{\n\t\t\tif (value)\n\t\t\t{\n\t\t\t\tthis.startCheckingRequestStatus();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.stopCheckingRequestStatus();\n\t\t\t}\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div\n\t\t\tclass=\"crm-entity-stream-section crm-entity-stream-section-new\"\n\t\t\t:class=\"wrapperContainerClass\"\n\t\t>\n\t\t\t<div class=\"crm-entity-stream-section-icon crm-entity-stream-section-icon-new crm-entity-stream-section-icon-taxi\"></div>\n\t\t\t<div\n\t\t\t\tv-if=\"mode === 'schedule'\"\n\t\t\t\t@click=\"showContextMenu\"\n\t\t\t\tclass=\"crm-entity-stream-section-context-menu\"\n\t\t\t></div>\n\t\t\t<div class=\"crm-entity-stream-section-content\">\n\t\t\t\t<div\n\t\t\t\t\tclass=\"crm-entity-stream-content-event\"\n\t\t\t\t\t:class=\"innerWrapperContainerClass\"\n\t\t\t\t>\n\t\t\t\t\t<div class=\"crm-entity-stream-content-header\">\n\t\t\t\t\t\t<span class=\"crm-entity-stream-content-event-title\">\n\t\t\t\t\t\t\t${Loc.getMessage('TIMELINE_DELIVERY_TAXI_SERVICE')}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tv-if=\"deliveryRequestStatus && deliveryRequestStatusSemantic\"\n\t\t\t\t\t\t\t:class=\"statusClass\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{deliveryRequestStatus}}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span class=\"crm-entity-stream-content-event-time\">{{createdAt}}</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"crm-entity-stream-content-detail crm-entity-stream-content-delivery\">\n\t\t\t\t\t\t<div class=\"crm-entity-stream-content-delivery-row crm-entity-stream-content-delivery-row--flex\">\n\t\t\t\t\t\t\t<template v-if=\"mode === 'schedule'\">\n\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\tv-if=\"isSendRequestButtonVisible\"\n\t\t\t\t\t\t\t\t\t@click=\"createDeliveryRequest\"\n\t\t\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-sm ui-btn-primary\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t${Loc.getMessage('TIMELINE_DELIVERY_CREATE_DELIVERY_REQUEST')}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<span v-if=\"isCreatingRequest\" class=\"crm-entity-stream-content-delivery-status\">\n\t\t\t\t\t\t\t\t\t${Loc.getMessage('TIMELINE_DELIVERY_CREATING_REQUEST')}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\tv-if=\"isConnectedWithDeliveryRequest && deliveryService && deliveryService.IS_CANCELLABLE\"\n\t\t\t\t\t\t\t\t\t@click=\"cancelDeliveryRequest\"\n\t\t\t\t\t\t\t\t\t:class=\"cancelRequestButtonStyle\"\n\t\t\t\t\t\t\t\t>\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t{{deliveryService.CANCEL_ACTION_NAME}}\n\t\t\t\t\t\t\t\t</span>\t\t\t\t\t\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t<delivery-service-info\n\t\t\t\t\t\t\t\tv-if=\"deliveryService\"\n\t\t\t\t\t\t\t\t:deliveryService=\"deliveryService\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t</delivery-service-info>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"crm-entity-stream-content-delivery-row\">\n\t\t\t\t\t\t\t<table class=\"crm-entity-stream-content-delivery-order\">\n\t\t\t\t\t\t\t\t<tr v-if=\"shipment && shipment.ADDRESS_FROM_FORMATTED && shipment.ADDRESS_TO_FORMATTED\">\n\t\t\t\t\t\t\t\t\t<td colspan=\"2\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"crm-entity-stream-content-delivery-order-item\">\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"crm-entity-stream-content-delivery-order-value crm-entity-stream-content-delivery-order-value--sm\">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"crm-entity-stream-content-delivery-order-box\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"crm-entity-stream-content-delivery-order-box-label\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t${Loc.getMessage('TIMELINE_DELIVERY_TAXI_ADDRESS_FROM')}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span v-html=\"shipment.ADDRESS_FROM_FORMATTED\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"crm-entity-stream-content-delivery-order-box\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"crm-entity-stream-content-delivery-order-box-label\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t${Loc.getMessage('TIMELINE_DELIVERY_TAXI_ADDRESS_TO')}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span v-html=\"shipment.ADDRESS_TO_FORMATTED\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t<tr v-if=\"shipment\">\n\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t<div class=\"crm-entity-stream-content-delivery-order-item\">\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"crm-entity-stream-content-delivery-order-label\">\n\t\t\t\t\t\t\t\t\t\t\t\t${Loc.getMessage('TIMELINE_DELIVERY_TAXI_CLIENT_DELIVERY_PRICE')}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"crm-entity-stream-content-delivery-order-value crm-entity-stream-content-delivery-order-value--sm\">\n\t\t\t\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\t\t\t\tv-html=\"shipment.PRICE_DELIVERY_FORMATTED\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t style=\"font-size: 14px; color: #333;\"\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t<div class=\"crm-entity-stream-content-delivery-order-item\">\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"crm-entity-stream-content-delivery-order-label\">\n\t\t\t\t\t\t\t\t\t\t\t\t${Loc.getMessage('TIMELINE_DELIVERY_TAXI_EXPECTED_DELIVERY_PRICE')}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"crm-entity-stream-content-delivery-order-value crm-entity-stream-content-delivery-order-value--sm\">\n\t\t\t\t\t\t\t\t\t\t\t\t<span style=\"font-size: 14px; color: #333; opacity: .5;\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tv-html=\"expectedDeliveryPriceFormatted\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t<span v-else>\n\t\t\t\t\t\t\t\t\t\t\t\t\t${Loc.getMessage('TIMELINE_DELIVERY_TAXI_EXPECTED_PRICE_NOT_RECEIVED')}\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t<!-- Properties --->\n\t\t\t\t\t\t\t\t<tr v-for=\"property in deliveryRequestProperties\">\n\t\t\t\t\t\t\t\t\t<td colspan=\"2\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"crm-entity-stream-content-delivery-order-item\">\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"crm-entity-stream-content-delivery-order-label\">\n\t\t\t\t\t\t\t\t\t\t\t\t{{property.NAME}}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"crm-entity-stream-content-delivery-order-value crm-entity-stream-content-delivery-order-value--sm\">\n\t\t\t\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\t\t\t\tv-if=\"isPhone(property)\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t@click=\"callPhone(property.VALUE)\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"crm-entity-stream-content-delivery-link\"\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{{property.VALUE}}\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t<span v-else>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{{property.VALUE}}\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t<!-- end Properties --->\n\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div v-if=\"mode === 'schedule'\" class=\"crm-entity-stream-content-detail-planned-action\">\n\t\t\t\t\t\t<input @click=\"completeActivity\" type=\"checkbox\" class=\"crm-entity-stream-planned-apply-btn\">\n\t\t\t\t\t</div>\n\t\t\t\t\t<author v-if=\"author\" :author=\"author\">\n\t\t\t\t\t</author>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`\n});\n","import {Vue} from 'ui.vue';\nimport HistoryItemMixin from '../mixins/history-item';\nimport Author from '../components/author';\nimport DeliveryServiceInfo from '../components/delivery/delivery-service-info';\n\nexport default Vue.extend({\n\tmixins: [HistoryItemMixin],\n\tcomponents: {\n\t\t'author': Author,\n\t\t'delivery-service-info': DeliveryServiceInfo,\n\t},\n\tcomputed: {\n\t\tdeliveryService()\n\t\t{\n\t\t\tif (!this.data.FIELDS.hasOwnProperty('DELIVERY_SERVICE'))\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn this.data.FIELDS.DELIVERY_SERVICE;\n\t\t},\n\t\tmessageData()\n\t\t{\n\t\t\tif (!this.data.FIELDS.hasOwnProperty('MESSAGE_DATA'))\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn this.data.FIELDS.MESSAGE_DATA;\n\t\t},\n\t\tmessageTitle()\n\t\t{\n\t\t\tif (!this.messageData)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn this.messageData['TITLE'];\n\t\t},\n\t\tmessageDescription()\n\t\t{\n\t\t\tif (!this.messageData)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn this.messageData['DESCRIPTION'];\n\t\t},\n\t\tmessageStatus()\n\t\t{\n\t\t\tif (!this.messageData)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn this.messageData['STATUS'];\n\t\t},\n\t\tmessageStatusSemantics()\n\t\t{\n\t\t\tif (!this.messageData)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn this.messageData['STATUS_SEMANTIC'];\n\t\t},\n\t\tmessageStatusSemanticsClass()\n\t\t{\n\t\t\treturn {\n\t\t\t\t'crm-entity-stream-content-event-process': this.messageStatusSemantics === 'process',\n\t\t\t\t'crm-entity-stream-content-event-missing': this.messageStatusSemantics === 'error',\n\t\t\t\t'crm-entity-stream-content-event-done': this.messageStatusSemantics === 'success',\n\t\t\t};\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"crm-entity-stream-section crm-entity-stream-section-new\">\n\t\t\t<div class=\"crm-entity-stream-section-icon crm-entity-stream-section-icon-new crm-entity-stream-section-icon-taxi\"></div>\n\t\t\t<div class=\"crm-entity-stream-section-content\">\n\t\t\t\t<div class=\"crm-entity-stream-content-event\">\n\t\t\t\t\t<div class=\"crm-entity-stream-content-header\">\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tv-if=\"messageTitle\"\n\t\t\t\t\t\t\tclass=\"crm-entity-stream-content-event-title\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{messageTitle}}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tv-if=\"messageStatus && messageStatusSemantics\"\n\t\t\t\t\t\t\t:class=\"messageStatusSemanticsClass\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{messageStatus}}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span class=\"crm-entity-stream-content-event-time\">\n\t\t\t\t\t\t\t<span v-html=\"createdAt\">\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"crm-entity-stream-content-detail\">\n\t\t\t\t\t\t<div class=\"crm-entity-stream-content-delivery-row crm-entity-stream-content-delivery-row--flex\">\n\t\t\t\t\t\t\t<delivery-service-info\n\t\t\t\t\t\t\t\tv-if=\"deliveryService\"\n\t\t\t\t\t\t\t\t:deliveryService=\"deliveryService\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t</delivery-service-info>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tv-if=\"messageDescription\"\n\t\t\t\t\t\t\tclass=\"crm-entity-stream-content-delivery-description\"\n\t\t\t\t\t\t\tv-html=\"messageDescription\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<author v-if=\"author\" :author=\"author\">\n\t\t\t\t\t</author>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`\n});\n","import {Vue} from 'ui.vue';\nimport {Loc} from 'main.core';\nimport HistoryItemMixin from '../mixins/history-item';\nimport Author from '../components/author';\nimport DeliveryServiceInfo from '../components/delivery/delivery-service-info';\n\nexport default Vue.extend({\n\tmixins: [HistoryItemMixin],\n\tcomponents: {\n\t\t'author': Author,\n\t\t'delivery-service-info': DeliveryServiceInfo,\n\t},\n\tcomputed: {\n\t\tdeliveryService()\n\t\t{\n\t\t\tif (!this.data.FIELDS.hasOwnProperty('DELIVERY_SERVICE'))\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn this.data.FIELDS.DELIVERY_SERVICE;\n\t\t},\n\t\tmessageData()\n\t\t{\n\t\t\tif (!this.data.FIELDS.hasOwnProperty('MESSAGE_DATA'))\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn this.data.FIELDS.MESSAGE_DATA;\n\t\t},\n\t\tmessageTitle()\n\t\t{\n\t\t\tif (!this.messageData)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn this.messageData['TITLE'];\n\t\t},\n\t\tmessageDescription()\n\t\t{\n\t\t\tif (!this.messageData)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn this.messageData['DESCRIPTION'];\n\t\t},\n\t\tmessageStatus()\n\t\t{\n\t\t\tif (!this.messageData)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn this.messageData['STATUS'];\n\t\t},\n\t\tmessageStatusSemantics()\n\t\t{\n\t\t\tif (!this.messageData)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn this.messageData['STATUS_SEMANTIC'];\n\t\t},\n\t\tmessageStatusSemanticsClass()\n\t\t{\n\t\t\treturn {\n\t\t\t\t'crm-entity-stream-content-event-process': this.messageStatusSemantics === 'process',\n\t\t\t\t'crm-entity-stream-content-event-missing': this.messageStatusSemantics === 'error',\n\t\t\t\t'crm-entity-stream-content-event-done': this.messageStatusSemantics === 'success',\n\t\t\t};\n\t\t},\n\t\taddressFrom()\n\t\t{\n\t\t\tif (!this.data.FIELDS.hasOwnProperty('ADDRESS_FROM_FORMATTED'))\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn this.data.FIELDS.ADDRESS_FROM_FORMATTED;\n\t\t},\n\t\taddressTo()\n\t\t{\n\t\t\tif (!this.data.FIELDS.hasOwnProperty('ADDRESS_TO_FORMATTED'))\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn this.data.FIELDS.ADDRESS_TO_FORMATTED;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"crm-entity-stream-section crm-entity-stream-section-new\">\n\t\t\t<div class=\"crm-entity-stream-section-icon crm-entity-stream-section-icon-new crm-entity-stream-section-icon-taxi\"></div>\n\t\t\t\n\t\t\t<div class=\"crm-entity-stream-section-content\">\n\t\t\t\t<div class=\"crm-entity-stream-content-event\">\n\t\t\t\t\t<div class=\"crm-entity-stream-content-header\">\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tv-if=\"messageTitle\"\n\t\t\t\t\t\t\tclass=\"crm-entity-stream-content-event-title\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{messageTitle}}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tv-if=\"messageStatus && messageStatusSemantics\"\n\t\t\t\t\t\t\t:class=\"messageStatusSemanticsClass\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{messageStatus}}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span class=\"crm-entity-stream-content-event-time\">\n\t\t\t\t\t\t\t<span v-html=\"createdAt\">\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"crm-entity-stream-content-detail\">\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tv-html=\"messageDescription\"\n\t\t\t\t\t\t\tclass=\"crm-entity-stream-content-detail-description crm-delivery-taxi-caption\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"crm-entity-stream-content-detail-description\">\n\t\t\t\t\t\t\t<div v-if=\"addressFrom\" class=\"crm-entity-stream-content-delivery-order-box\">\n\t\t\t\t\t\t\t\t<div class=\"crm-entity-stream-content-delivery-order-box-label\">\n\t\t\t\t\t\t\t\t\t${Loc.getMessage('TIMELINE_DELIVERY_TAXI_ADDRESS_FROM')}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<span>{{addressFrom}}</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div v-if=\"addressTo\" class=\"crm-entity-stream-content-delivery-order-box\">\n\t\t\t\t\t\t\t\t<div class=\"crm-entity-stream-content-delivery-order-box-label\">\n\t\t\t\t\t\t\t\t\t${Loc.getMessage('TIMELINE_DELIVERY_TAXI_ADDRESS_TO')}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<span>{{addressTo}}</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<author v-if=\"author\" :author=\"author\">\n\t\t\t\t\t</author>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`\n});\n"],"names":["props","self","required","type","Object","langMessages","computed","data","_data","fields","FIELDS","author","AUTHOR","createdAt","BX","CrmHistoryItem","formatTime","getCreatedTime","methods","getLangMessage","key","hasOwnProperty","product","dealId","Number","isAddToDealVisible","Boolean","addProductToDeal","isInDeal","$emit","ajax","runAction","productId","offerId","options","price","then","result","catch","openDetailPage","isNotEmptyString","adminLink","slider","window","open","SidePanel","Instance","isBottomAreaVisible","isVariationInfoVisible","isPriceVisible","variationInfo","currency","Currency","currencyFormat","imageStyle","image","backgroundImage","buttonText","Loc","getMessage","template","Vue","extend","mixins","HistoryItemMixin","components","Product","isShortList","shortListProductsCnt","isNotificationShown","activeRequestsCnt","products","isProductsGridAvailable","created","VIEWED_PRODUCTS","DEAL_ID","_productsGrid","subscribeCustomEvents","Crm","EntityEditor","getDefault","tapController","controller","setProductsGrid","getProductList","productsGrid","onProductsGridChanged","showMore","listWrap","document","querySelector","style","maxHeight","handleProductAddingToDeal","handleProductAddedToDeal","reload","reloadGrid","UI","Notification","Center","notify","content","events","onClose","event","actions","title","click","balloon","action","onCustomEvent","close","EventEmitter","subscribe","onProductsGridCreated","unsubscribeCustomEvents","unsubscribe","getData","dealOfferIds","map","index","OFFER_ID","entries","i","some","id","set","assign","beforeDestroy","visibleProducts","push","isShowMoreVisible","length","iStyle","IMAGE_URL","Author","entityData","messageId","text","status","name","semantics","description","provider","isRefreshing","getAssociatedEntityData","setMessageInfo","PULL","moduleId","command","callback","params","message","ID","refresh","extendWatch","messageInfo","Array","isArray","capitalizeFirstLetter","viewActivity","view","str","locale","navigator","language","replace","char","toLocaleUpperCase","communication","statusClass","isStatusError","statusErrorDescription","deliveryService","isDeliveryServiceProfile","IS_PROFILE","deliveryServiceName","PARENT_NAME","NAME","deliveryProfileServiceName","deliveryServiceLogoBackgroundUrl","PARENT_LOGO","LOGO","logo","DeliveryServiceInfo","mode","String","deliveryInfo","isCreatingRequest","isCancellingRequest","completeActivity","canComplete","setAsDone","isDone","showContextMenu","popup","PopupMenu","create","getId","target","onclick","deletionDlgId","dlg","ConfirmationDialog","get","cancel","remove","autoHide","offsetTop","offsetLeft","angle","position","offset","onPopupShow","addClass","onPopupClose","removeClass","show","createDeliveryRequest","isLocked","analyticsLabel","shipmentIds","additional","ACTIVITY_ID","activityId","showError","errors","item","join","cancelDeliveryRequest","deliveryRequest","requestId","actionType","checkRequestStatus","startCheckingRequestStatus","clearTimeout","_checkRequestStatusTimeoutId","setInterval","stopCheckingRequestStatus","setDeliveryInfo","finallyCallback","subscribePullEvents","_isPullSubscribed","deliveryServiceIds","deliveryRequestId","callPhone","phone","canUseTelephony","top","BXIM","phoneTo","location","href","isPhone","property","includes","loadExt","needCheckRequestStatus","ASSOCIATED_ENTITY","shipments","shipment","expectedDeliveryPriceFormatted","IDS","deliveryRequestProperties","deliveryRequestStatus","deliveryRequestStatusSemantic","isConnectedWithDeliveryRequest","isSendRequestButtonVisible","miscellaneous","cancelRequestButtonStyle","wrapperContainerClass","innerWrapperContainerClass","watch","value","DELIVERY_SERVICE","messageData","MESSAGE_DATA","messageTitle","messageDescription","messageStatus","messageStatusSemantics","messageStatusSemanticsClass","addressFrom","ADDRESS_FROM_FORMATTED","addressTo","ADDRESS_TO_FORMATTED"],"mappings":"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"}