{"version":3,"file":"index.bundle.js","sources":["../src/item.js","../src/components/enums/icon-background-color.js","../src/components/layout/icon.js","../src/components/layout/menu.js","../src/action.js","../src/components/layout/header/change-stream-button.js","../src/components/layout/header/title.js","../src/components/enums/tag-type.js","../src/components/layout/header/tag.js","../src/components/layout/header/user.js","../src/components/layout/header/format-date.js","../src/components/layout/header/hint.js","../src/components/layout/header.js","../src/components/layout/body/logo.js","../src/components/layout/body/calendar-icon.js","../src/components/layout/body/logo-calendar.js","../src/components/layout/body.js","../src/components/enums/button-state.js","../src/components/layout/baseButton.js","../src/components/layout/footer/add-button.js","../src/components/layout/footer/menu.js","../src/components/enums/button-type.js","../src/components/layout/button.js","../src/components/layout/footer/buttons.js","../src/components/enums/button-scope.js","../src/components/layout/footer.js","../src/components/layout/marketPanel.js","../src/components/layout/userPick.js","../src/stream-type.js","../src/components/item.js","../src/layout.js","../src/controllers/base.js","../src/controller-manager.js","../src/configurable-item.js","../src/controllers/activity.js","../src/components/enums/text-color.js","../src/components/enums/text-weight.js","../src/components/enums/text-size.js","../src/components/content-blocks/text.js","../src/components/content-blocks/link.js","../src/components/content-blocks/date.js","../src/components/content-blocks/with-title.js","../src/components/content-blocks/line-of-text-blocks.js","../src/components/enums/logo-type.js","../src/components/content-blocks/timeline-audio.js","../src/components/enums/client-mark.js","../src/components/content-blocks/client-mark.js","../src/components/content-blocks/money.js","../src/components/content-blocks/editable-text.js","../src/components/enums/editable-description-height.js","../src/components/enums/editable-description-background-color.js","../src/components/content-blocks/editable-description.js","../src/components/content-blocks/editable-date.js","../src/components/content-blocks/player-alert.js","../src/components/content-blocks/note.js","../src/components/content-blocks/date-pill.js","../src/components/content-blocks/money-pill.js","../src/components/content-blocks/info-group.js","../src/components/content-blocks/file.js","../src/components/content-blocks/file-list.js","../src/components/content-blocks/sms-message.js","../src/components/content-blocks/comment-content.js","../src/controllers/common-content-blocks.js","../src/components/content-blocks/chat-message.js","../src/controllers/openlines.js","../src/components/content-blocks/value-change.js","../src/components/content-blocks/value-change-item.js","../src/controllers/modification.js","../src/controllers/sign-document.js","../src/controllers/document.js","../src/controllers/call.js","../src/controllers/todo.js","../src/controllers/helpdesk.js","../src/controllers/payment.js","../src/components/content-blocks/expandable-list/list-item-button.js","../src/components/content-blocks/expandable-list/list-item.js","../src/components/content-blocks/expandable-list/list.js","../src/controllers/deal-product-list.js","../src/components/content-blocks/mail/contact-list.js","../src/controllers/email.js","../src/controllers/order-check.js","../src/components/content-blocks/ecommerce-documents-list.js","../src/controllers/finalsummary.js","../src/controllers/salescenter-app.js","../src/controllers/delivery.js","../src/controllers/rest-app.js","../src/controllers/comment.js","../src/components/content-blocks/calendar/sharing-slots-list-item.js","../src/components/content-blocks/calendar/sharing-slots-list.js","../src/controllers/calendar/sharing.js","../src/controllers/task.js","../src/controller-registry.js"],"sourcesContent":["import {Dom, Type} from 'main.core'\n\nexport default class Item\n{\n\tconstructor()\n\t{\n\t\tthis._id = '';\n\t\tthis._isTerminated = false;\n\t\tthis._wrapper = null;\n\t}\n\n\tgetId(): string\n\t{\n\t\treturn this._id;\n\t}\n\n\t_setId(id): void\n\t{\n\t\tthis._id = BX.type.isNotEmptyString(id) ? id : BX.util.getRandomString(4);\n\t}\n\n\t/**\n\t * @abstract\n\t */\n\tsetData(data): void\n\t{\n\t\tthrow new Error('Item.setData() must be overridden');\n\t}\n\n\t/**\n\t * @abstract\n\t */\n\tlayout(options): void\n\t{\n\t\tthrow new Error('Item.layout() must be overridden');\n\t}\n\n\trefreshLayout()\n\t{\n\t\tconst anchor = this._wrapper.previousSibling;\n\t\tthis.clearLayout();\n\n\t\tthis.layout({ anchor: anchor });\n\t}\n\n\tclearLayout()\n\t{\n\t\tDom.remove(this._wrapper);\n\t\tthis._wrapper = undefined;\n\t}\n\n\tdestroy()\n\t{\n\t\tthis.clearLayout();\n\t}\n\n\tgetWrapper(): ?HTMLElement\n\t{\n\t\treturn this._wrapper;\n\t}\n\n\tsetWrapper(wrapper: HTMLElement): void\n\t{\n\t\tthis._wrapper = wrapper;\n\t}\n\n\taddWrapperClass(className, timeout): void\n\t{\n\t\tif(!this._wrapper)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tDom.addClass(this._wrapper, className);\n\n\t\tif(Type.isNumber(timeout) && timeout >= 0)\n\t\t{\n\t\t\twindow.setTimeout(this.removeWrapperClass.bind(this, className), timeout);\n\t\t}\n\t}\n\n\tremoveWrapperClass(className, timeout): void\n\t{\n\t\tif(!this._wrapper)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tDom.removeClass(this._wrapper, className);\n\t\tif(Type.isNumber(timeout) && timeout >= 0)\n\t\t{\n\t\t\twindow.setTimeout(this.addWrapperClass.bind(this, className), timeout);\n\t\t}\n\t}\n\n\tisTerminated(): boolean\n\t{\n\t\treturn this._isTerminated;\n\t}\n\n\tmarkAsTerminated(terminated): void\n\t{\n\t\tterminated = !!terminated;\n\n\t\tif (this._isTerminated === terminated)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis._isTerminated = terminated;\n\t\tif (!this._wrapper)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (terminated)\n\t\t{\n\t\t\tDom.addClass(this._wrapper, 'crm-entity-stream-section-last');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.removeClass(this._wrapper, 'crm-entity-stream-section-last');\n\t\t}\n\t}\n\n\tgetAssociatedEntityTypeId(): ?Number\n\t{\n\t\treturn null;\n\t}\n\n\tgetAssociatedEntityId(): ?Number\n\t{\n\t\treturn null;\n\t}\n\n}\n","export class IconBackgroundColor {\n\tstatic PRIMARY = 'primary';\n\tstatic PRIMARY_ALT = 'primary_alt';\n\tstatic FAILURE = 'failure';\n}","\nimport { IconBackgroundColor } from '../enums/icon-background-color';\nimport { Counter } from 'ui.cnt';\nimport {Dom, Text} from 'main.core';\n\nexport const Icon = {\n\tprops: {\n\t\tcode: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: 'none',\n\t\t},\n\t\tcounterType: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t},\n\t\tbackgroundColorToken: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: IconBackgroundColor.PRIMARY,\n\t\t},\n\t\tbackgroundUri: String,\n\t},\n\tinject: ['isLogMessage'],\n\tcomputed: {\n\t\tclassName() {\n\t\t\treturn {\n\t\t\t\t'crm-timeline__card_icon': true,\n\t\t\t\t[`--bg-${this.backgroundColorToken}`]: !!this.backgroundColorToken,\n\t\t\t\t[`--code-${this.code}`]: !!this.code && !this.backgroundUri,\n\t\t\t\t[`--custom-bg`]: !!this.backgroundUri,\n\t\t\t\t['--muted']: this.isLogMessage,\n\t\t\t}\n\t\t},\n\n\t\tcounterNodeContainer() {\n\t\t\treturn this.$refs.counter;\n\t\t},\n\n\t\tstyles() {\n\t\t\tif (!this.backgroundUri)\n\t\t\t{\n\t\t\t\treturn {};\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tbackgroundImage: \"url('\" + encodeURI(Text.encode(this.backgroundUri)) + \"')\",\n\t\t\t}\n\t\t}\n\t},\n\n\tmethods: {\n\t\trenderCounter() {\n\t\t\tif (!this.counterType) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tDom.clean(this.counterNodeContainer);\n\t\t\tconst counter = new Counter({\n\t\t\t\tvalue: 1,\n\t\t\t\tborder: true,\n\t\t\t\tcolor: Counter.Color[this.counterType.toUpperCase()],\n\t\t\t});\n\t\t\tcounter.renderTo(this.counterNodeContainer);\n\t\t},\n\t},\n\tmounted() {\n\t\tthis.renderCounter();\n\t},\n\twatch: {\n\t\tcounterType(newCounterType): void // update if counter state changed\n\t\t{\n\t\t\tthis.$nextTick(() => {\n\t\t\t\tthis.renderCounter();\n\t\t\t});\n\t\t}\n\t},\n\ttemplate: `\n\t\t<div :class=\"className\">\n\t\t\t<i :style=\"styles\"></i>\n\t\t\t<div ref=\"counter\" v-show=\"!!counterType\" class=\"crm-timeline__card_icon_counter\"></div>\n\t\t</div>\n\t`\n};\n","import {MenuManager} from \"main.popup\";\nimport {Action} from \"../../action\";\n\nexport class Menu\n{\n\t#menuOptions = {};\n\t#vueComponent = {};\n\n\tconstructor(vueComponent: Object, menuItems: Array, menuOptions: ?Object)\n\t{\n\t\tthis.#vueComponent = vueComponent;\n\t\tthis.#menuOptions = menuOptions || {};\n\t\tthis.#menuOptions = {\n\t\t\tangle: false,\n\t\t\tcacheable: false,\n\t\t\t...this.#menuOptions\n\t\t};\n\n\t\tthis.#menuOptions.items = [];\n\t\tfor (const item of menuItems)\n\t\t{\n\t\t\tthis.#menuOptions.items.push(this.createMenuItem(item));\n\t\t}\n\t}\n\n\tshow(): void\n\t{\n\t\tMenuManager.show(this.#menuOptions);\n\t}\n\n\n\tcreateMenuItem(item): Object\n\t{\n\t\tif (item.hasOwnProperty('delimiter') && item.delimiter)\n\t\t{\n\t\t\treturn {\n\t\t\t\ttext: item.title || '',\n\t\t\t\tdelimiter: true\n\t\t\t};\n\t\t}\n\n\t\tconst result = {\n\t\t\ttext: item.title,\n\t\t\tvalue: item.title,\n\t\t};\n\n\t\tif (item.icon)\n\t\t{\n\t\t\tresult.className = 'menu-popup-item-' + item.icon;\n\t\t}\n\t\tif (item.menu)\n\t\t{\n\t\t\tresult.items = [];\n\t\t\tfor (const subItem of Object.values(item.menu.items || {}))\n\t\t\t{\n\t\t\t\tresult.items.push(this.createMenuItem(subItem));\n\t\t\t}\n\t\t}\n\t\telse if (item.action)\n\t\t{\n\t\t\tif (item.action.type === 'redirect')\n\t\t\t{\n\t\t\t\tresult.href = item.action.value;\n\t\t\t}\n\t\t\telse if (item.action.type === 'jsCode')\n\t\t\t{\n\t\t\t\tresult.onclick = item.action.value;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresult.onclick = () =>\n\t\t\t\t{\n\t\t\t\t\tthis.onMenuItemClick(item);\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tonMenuItemClick(item): void\n\t{\n\t\tconst menu = MenuManager.getCurrentMenu();\n\t\tif (menu)\n\t\t{\n\t\t\tmenu.close();\n\t\t}\n\n\t\t(new Action(item.action)).execute(this.#vueComponent);\n\t}\n\n\tstatic showMenu(vueComponent: Object, menuItems: Array, menuOptions: ?Object)\n\t{\n\t\tconst menu = new Menu(vueComponent, menuItems, menuOptions);\n\t\tmenu.show();\n\t}\n}","import { ajax, Type, Dom } from 'main.core';\nimport {rest as Rest} from 'rest.client';\nimport { UI } from 'ui.notification';\nimport { Menu } from \"./components/layout/menu\";\nimport { DateTimeFormat } from \"main.date\";\nimport { DatetimeConverter } from \"crm.timeline.tools\";\n\ndeclare type AnimationParams = {\n\ttarget: string,\n\ttype: string,\n\tforever: boolean,\n}\n\nconst AnimationTarget = {\n\tblock: 'block',\n\titem: 'item',\n};\n\nconst AnimationType = {\n\tdisable: 'disable',\n\tloader: 'loader',\n};\n\nconst ActionType = {\n\tJS_EVENT: 'jsEvent',\n\tAJAX_ACTION: {\n\t\tSTARTED: 'ajaxActionStarted',\n\t\tFINISHED: 'ajaxActionFinished',\n\t\tFAILED: 'ajaxActionFailed',\n\t},\n\n\tisJsEvent(type: string): boolean\n\t{\n\t\treturn (type === this.JS_EVENT);\n\t},\n\n\tisAjaxAction(type: string): boolean\n\t{\n\t\treturn (\n\t\t\ttype === this.AJAX_ACTION.STARTED\n\t\t\t|| type === this.AJAX_ACTION.FINISHED\n\t\t\t|| type === this.AJAX_ACTION.FAILED\n\t\t);\n\t}\n};\n\nObject.freeze(ActionType.AJAX_ACTION);\nObject.freeze(ActionType);\n\nexport { ActionType };\n\nexport class Action\n{\n\t#type: string = null;\n\t#value: string | Object  = null;\n\t#actionParams: ?Object = null;\n\t#animation: ?AnimationParams = null;\n\t#analytics: ?Object = null;\n\n\tconstructor(params)\n\t{\n\t\tthis.#type = params.type;\n\t\tthis.#value = params.value;\n\t\tthis.#actionParams = params.actionParams;\n\t\tthis.#animation = Type.isPlainObject(params.animation) ? params.animation : null;\n\t\tthis.#analytics = Type.isPlainObject(params.analytics) ? params.analytics : null;\n\t}\n\n\texecute(vueComponent): Promise\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tif (this.isJsEvent())\n\t\t\t{\n\t\t\t\tvueComponent.$Bitrix.eventEmitter.emit('crm:timeline:item:action', {\n\t\t\t\t\taction: this.#value,\n\t\t\t\t\tactionType: ActionType.JS_EVENT,\n\t\t\t\t\tactionData: this.#actionParams,\n\t\t\t\t\tanimationCallbacks: {\n\t\t\t\t\t\tonStart: this.#startAnimation.bind(this, vueComponent),\n\t\t\t\t\t\tonStop: this.#stopAnimation.bind(this, vueComponent),\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tthis.#sendAnalytics();\n\n\t\t\t\tresolve(true);\n\t\t\t}\n\t\t\telse if (this.isJsCode())\n\t\t\t{\n\t\t\t\tthis.#startAnimation(vueComponent);\n\t\t\t\teval(this.#value);\n\t\t\t\tthis.#stopAnimation(vueComponent);\n\t\t\t\tthis.#sendAnalytics();\n\t\t\t\tresolve(true);\n\t\t\t}\n\t\t\telse if (this.isAjaxAction())\n\t\t\t{\n\t\t\t\tthis.#startAnimation(vueComponent);\n\t\t\t\tvueComponent.$Bitrix.eventEmitter.emit('crm:timeline:item:action', {\n\t\t\t\t\taction: this.#value,\n\t\t\t\t\tactionType: ActionType.AJAX_ACTION.STARTED,\n\t\t\t\t\tactionData: this.#actionParams,\n\t\t\t\t});\n\n\t\t\t\tajax.runAction(\n\t\t\t\t\tthis.#value,\n\t\t\t\t\t{\n\t\t\t\t\t\tdata: this.#prepareRunActionParams(this.#actionParams),\n\t\t\t\t\t\tanalyticsLabel: this.#analytics,\n\t\t\t\t\t},\n\t\t\t\t).then(\n\t\t\t\t\t(response) =>\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.#stopAnimation(vueComponent);\n\t\t\t\t\t\tvueComponent.$Bitrix.eventEmitter.emit('crm:timeline:item:action', {\n\t\t\t\t\t\t\taction: this.#value,\n\t\t\t\t\t\t\tactionType: ActionType.AJAX_ACTION.FINISHED,\n\t\t\t\t\t\t\tactionData: this.#actionParams,\n\t\t\t\t\t\t\tresponse,\n\t\t\t\t\t\t});\n\t\t\t\t\t\tresolve(response);\n\t\t\t\t\t},\n\t\t\t\t\t(response) =>\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.#stopAnimation(vueComponent, true);\n\t\t\t\t\t\tUI.Notification.Center.notify({\n\t\t\t\t\t\t\tcontent: response.errors[0].message,\n\t\t\t\t\t\t\tautoHideDelay: 5000,\n\t\t\t\t\t\t});\n\t\t\t\t\t\tvueComponent.$Bitrix.eventEmitter.emit('crm:timeline:item:action', {\n\t\t\t\t\t\t\taction: this.#value,\n\t\t\t\t\t\t\tactionType: ActionType.AJAX_ACTION.FAILED,\n\t\t\t\t\t\t\tactionParams: this.#actionParams,\n\t\t\t\t\t\t\tresponse,\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\treject(response);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t\telse if (this.isCallRestBatch())\n\t\t\t{\n\t\t\t\tthis.#startAnimation(vueComponent);\n\t\t\t\tvueComponent.$Bitrix.eventEmitter.emit('crm:timeline:item:action', {\n\t\t\t\t\taction: this.#value,\n\t\t\t\t\tactionType: 'ajaxActionStarted',\n\t\t\t\t\tactionData: this.#actionParams,\n\t\t\t\t});\n\t\t\t\tRest.callBatch(\n\t\t\t\t\tthis.#prepareCallBatchParams(this.#actionParams),\n\t\t\t\t\t(restResult) => {\n\t\t\t\t\t\tfor (const result in restResult)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconst response = restResult[result].answer;\n\t\t\t\t\t\t\tif (response.error)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.#stopAnimation(vueComponent);\n\t\t\t\t\t\t\t\tUI.Notification.Center.notify({\n\t\t\t\t\t\t\t\t\tcontent: response.error.error_description,\n\t\t\t\t\t\t\t\t\tautoHideDelay: 5000,\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tvueComponent.$Bitrix.eventEmitter.emit('crm:timeline:item:action', {\n\t\t\t\t\t\t\t\t\taction: this.#value,\n\t\t\t\t\t\t\t\t\tactionType: 'ajaxActionFailed',\n\t\t\t\t\t\t\t\t\tactionParams: this.#actionParams,\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\treject(restResult);\n\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.#stopAnimation(vueComponent);\n\t\t\t\t\t\tvueComponent.$Bitrix.eventEmitter.emit('crm:timeline:item:action', {\n\t\t\t\t\t\t\taction: this.#value,\n\t\t\t\t\t\t\tactionType: 'ajaxActionFinished',\n\t\t\t\t\t\t\tactionData: this.#actionParams,\n\t\t\t\t\t\t});\n\t\t\t\t\t\tresolve(restResult);\n\t\t\t\t\t},\n\t\t\t\t\ttrue\n\t\t\t\t);\n\t\t\t}\n\t\t\telse if (this.isRedirect())\n\t\t\t{\n\t\t\t\tthis.#startAnimation(vueComponent);\n\n\t\t\t\tconst linkAttrs = {\n\t\t\t\t\thref: this.#value,\n\t\t\t\t};\n\t\t\t\tif (this.#actionParams && this.#actionParams.target)\n\t\t\t\t{\n\t\t\t\t\tlinkAttrs.target = this.#actionParams.target;\n\t\t\t\t}\n\t\t\t\t// this magic allows auto opening internal links in slider if possible:\n\t\t\t\tconst link = Dom.create('a', {\n\t\t\t\t\tattrs: linkAttrs,\n\t\t\t\t\ttext: '',\n\t\t\t\t\tstyle: {\n\t\t\t\t\t\tdisplay: 'none',\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t\tDom.append(link, document.body);\n\t\t\t\tlink.click();\n\t\t\t\tsetTimeout(() => Dom.remove(link), 10);\n\n\t\t\t\tthis.#sendAnalytics();\n\n\t\t\t\tresolve(this.#value);\n\t\t\t}\n\t\t\telse if (this.isShowMenu())\n\t\t\t{\n\t\t\t\tMenu.showMenu(\n\t\t\t\t\tvueComponent,\n\t\t\t\t\tthis.#prepareMenuItems(this.#value.items, vueComponent),\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'actionMenu',\n\t\t\t\t\t\tbindElement: vueComponent.$el,\n\t\t\t\t\t\tminWidth: vueComponent.$el.offsetWidth,\n\t\t\t\t\t}\n\t\t\t\t);\n\n\t\t\t\tthis.#sendAnalytics();\n\n\t\t\t\tresolve(true);\n\t\t\t}\n\t\t\telse {\n\t\t\t\treject(false);\n\t\t\t}\n\t\t});\n\t}\n\n\tisJsEvent(): boolean\n\t{\n\t\treturn (this.#type === 'jsEvent');\n\t}\n\n\tisJsCode(): boolean\n\t{\n\t\treturn (this.#type === 'jsCode');\n\t}\n\n\tisAjaxAction(): boolean\n\t{\n\t\treturn (this.#type === 'runAjaxAction');\n\t}\n\n\tisCallRestBatch(): boolean\n\t{\n\t\treturn (this.#type === 'callRestBatch');\n\t}\n\n\tisRedirect(): boolean\n\t{\n\t\treturn (this.#type === 'redirect');\n\t}\n\n\tisShowMenu(): boolean\n\t{\n\t\treturn (this.#type === 'showMenu');\n\t}\n\n\tgetValue(): string | Object\n\t{\n\t\treturn this.#value;\n\t}\n\n\tgetActionParam(param: string)\n\t{\n\t\treturn this.#actionParams && this.#actionParams.hasOwnProperty(param)\n\t\t\t? this.#actionParams[param]\n\t\t\t: null\n\t\t;\n\t}\n\n\t#prepareRunActionParams(params): Object\n\t{\n\t\tconst result = {};\n\n\t\tif (Type.isUndefined(params))\n\t\t{\n\t\t\treturn result;\n\t\t}\n\t\tfor (const paramName in params)\n\t\t{\n\t\t\tconst paramValue = params[paramName];\n\t\t\tif (Type.isDate(paramValue))\n\t\t\t{\n\t\t\t\tresult[paramName] = DateTimeFormat.format(DatetimeConverter.getSiteDateTimeFormat(), paramValue);\n\t\t\t}\n\t\t\telse if (Type.isPlainObject(paramValue))\n\t\t\t{\n\t\t\t\tresult[paramName] = this.#prepareRunActionParams(paramValue);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresult[paramName] = paramValue;\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t#prepareCallBatchParams(params): Object\n\t{\n\t\tconst result = {};\n\n\t\tif (Type.isUndefined(params))\n\t\t{\n\t\t\treturn result;\n\t\t}\n\n\t\tfor (const paramName in params)\n\t\t{\n\t\t\tresult[paramName] = {\n\t\t\t\tmethod: params[paramName].method,\n\t\t\t\tparams: this.#prepareRunActionParams(params[paramName].params)\n\t\t\t};\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t#prepareMenuItems(items: Object, vueComponent: Object): Array\n\t{\n\t\treturn Object.values(items)\n\t\t\t.filter((item) => (item.state !== 'hidden' && item.scope !== 'mobile' && (!vueComponent.isReadOnly || !item.hideIfReadonly)))\n\t\t\t.sort((a, b) => (a.sort - b.sort))\n\t\t;\n\t}\n\n\t#startAnimation(vueComponent)\n\t{\n\t\tif (!this.#isAnimationValid())\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tif (this.#animation.target === AnimationTarget.item)\n\t\t{\n\t\t\tif (this.#animation.type === AnimationType.disable)\n\t\t\t{\n\t\t\t\tvueComponent.$root.setFaded(true);\n\t\t\t}\n\t\t\tif (this.#animation.type === AnimationType.loader)\n\t\t\t{\n\t\t\t\tvueComponent.$root.showLoader(true);\n\t\t\t}\n\t\t}\n\t\tif (this.#animation.target === AnimationTarget.block)\n\t\t{\n\t\t\tif (this.#animation.type === AnimationType.disable)\n\t\t\t{\n\t\t\t\tif (Type.isFunction(vueComponent.setDisabled))\n\t\t\t\t{\n\t\t\t\t\tvueComponent.setDisabled(true);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (this.#animation.type === AnimationType.loader)\n\t\t\t{\n\t\t\t\tif (Type.isFunction(vueComponent.setLoading))\n\t\t\t\t{\n\t\t\t\t\tvueComponent.setLoading(true);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t#stopAnimation(vueComponent, force = false)\n\t{\n\t\tif (!this.#isAnimationValid())\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tif (this.#animation.forever && !force)\n\t\t{\n\t\t\treturn; // should not be stopped\n\t\t}\n\n\t\tif (this.#animation.target === AnimationTarget.item)\n\t\t{\n\t\t\tif (this.#animation.type === AnimationType.disable)\n\t\t\t{\n\t\t\t\tvueComponent.$root.setFaded(false);\n\t\t\t}\n\t\t\tif (this.#animation.type === AnimationType.loader)\n\t\t\t{\n\t\t\t\tvueComponent.$root.showLoader(false);\n\t\t\t}\n\t\t}\n\t\tif (this.#animation.target === AnimationTarget.block)\n\t\t{\n\t\t\tif (this.#animation.type === AnimationType.disable)\n\t\t\t{\n\t\t\t\tif (Type.isFunction(vueComponent.setDisabled))\n\t\t\t\t{\n\t\t\t\t\tvueComponent.setDisabled(false);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (this.#animation.type === AnimationType.loader)\n\t\t\t{\n\t\t\t\tif (Type.isFunction(vueComponent.setLoading))\n\t\t\t\t{\n\t\t\t\t\tvueComponent.setLoading(false);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t#isAnimationValid(): boolean\n\t{\n\t\tif (!this.#animation)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\t\tif (!AnimationTarget.hasOwnProperty(this.#animation.target))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\t\tif (!AnimationType.hasOwnProperty(this.#animation.type))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t}\n\n\t#sendAnalytics()\n\t{\n\t\tif (this.#analytics && this.#analytics.hit)\n\t\t{\n\t\t\tajax.runAction(\n\t\t\t\tthis.#analytics.hit,\n\t\t\t\t{\n\t\t\t\t\tdata: {},\n\t\t\t\t\tanalyticsLabel: this.#analytics,\n\t\t\t\t},\n\t\t\t);\n\t\t}\n\t}\n}","import { Action } from \"../../../action\";\n\nexport const ChangeStreamButton = {\n\tprops: {\n\t\tdisableIfReadonly: Boolean,\n\t\ttype: String,\n\t\ttitle: String,\n\t\taction: Object,\n\t},\n\tdata(): Object {\n\t\treturn {\n\t\t\tisReadonlyMode: false,\n\t\t\tisComplete: false,\n\t\t}\n\t},\n\tinject: [\n\t\t'isReadOnly',\n\t],\n\tmounted()\n\t{\n\t\tthis.isReadonlyMode = this.isReadOnly;\n\t},\n\tcomputed: {\n\t\tisShowPinButton() {\n\t\t\treturn this.type === 'pin' && !this.isReadonlyMode;\n\t\t},\n\n\t\tisShowUnpinButton() {\n\t\t\treturn this.type==='unpin' && !this.isReadonlyMode;\n\t\t},\n\t},\n\tmethods: {\n\t\texecuteAction() {\n\t\t\tif (!this.action)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.isComplete = true;\n\n\t\t\tconst action = new Action(this.action);\n\t\t\taction.execute(this);\n\t\t},\n\t\tonClick(): void\n\t\t{\n\t\t\tif (this.action)\n\t\t\t{\n\t\t\t\tconst action = new Action(this.action);\n\t\t\t\taction.execute(this);\n\t\t\t}\n\t\t},\n\t\tsetDisabled(disabled: boolean)\n\t\t{\n\t\t\tif (!this.isReadonly && !disabled)\n\t\t\t{\n\t\t\t\tthis.isReadonlyMode = false;\n\t\t\t}\n\t\t\tif (disabled)\n\t\t\t{\n\t\t\t\tthis.isReadonlyMode = true;\n\t\t\t}\n\t\t},\n\t\tmarkCheckboxUnchecked(): void\n\t\t{\n\t\t\tthis.isComplete = false;\n\t\t}\n\t},\n\n\ttemplate: `\n\t\t<div class=\"crm-timeline__card-top_controller\">\n\t\t\t<input\n\t\t\t\tv-if=\"type === 'complete'\"\n\t\t\t\t@click=\"executeAction\"\n\t\t\t\ttype=\"checkbox\"\n\t\t\t\t:disabled=\"isReadonlyMode\"\n\t\t\t\t:checked=\"isComplete\"\n\t\t\t\tclass=\"crm-timeline__card-top_checkbox\"\n\t\t\t/>\n\t\t\t<div\n\t\t\t\tv-else-if=\"isShowPinButton\"\n\t\t\t\t:title=\"title\"\n\t\t\t\t@click=\"executeAction\"\n\t\t\t\tclass=\"crm-timeline__card-top_icon --pin\"\n\t\t\t></div>\n\t\t\t<div\n\t\t\t\tv-else-if=\"isShowUnpinButton\"\n\t\t\t\t:title=\"title\"\n\t\t\t\t@click=\"executeAction\"\n\t\t\t\tclass=\"crm-timeline__card-top_icon --unpin\"\n\t\t\t></div>\n\t\t</div>\n\t`,\n};\n","import {Action} from \"../../../action\";\n\nexport const Title = {\n\tprops: {\n\t\ttitle: String,\n\t\taction: Object,\n\t},\n\tinject: ['isLogMessage'],\n\tcomputed: {\n\t\tclassName(): Array {\n\t\t\treturn [\n\t\t\t\t'crm-timeline__card-title', {\n\t\t\t\t'--light': this.isLogMessage,\n\t\t\t\t'--action': !!this.action,\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\n\t\thref(): ?string {\n\t\t\tif (!this.action)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tconst action = new Action(this.action);\n\t\t\tif (action.isRedirect())\n\t\t\t{\n\t\t\t\treturn action.getValue();\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\n\t},\n\tmethods: {\n\t\texecuteAction(): void\n\t\t{\n\t\t\tif (!this.action)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst action = new Action(this.action);\n\t\t\taction.execute(this);\n\t\t}\n\t},\n\ttemplate: `\n\t\t<a\n\t\t\tv-if=\"href\"\n\t\t\t:href=\"href\"\n\t\t\t:class=\"className\"\n\t\t\ttabindex=\"0\"\n\t\t\t:title=\"title\"\n\t\t>\n\t\t\t{{title}}\n\t\t</a>\n\t\t<span\n\t\t\tv-else\n\t\t\t@click=\"executeAction\"\n\t\t\t:class=\"className\"\n\t\t\ttabindex=\"0\"\n\t\t\t:title=\"title\"\n\t\t>\n\t\t\t{{title}}\n\t\t</span>`\n};\n","export class TagType {\n\tstatic PRIMARY = 'primary';\n\tstatic SECONDARY = 'secondary';\n\tstatic SUCCESS = 'success';\n\tstatic WARNING = 'warning';\n\tstatic FAILURE = 'failure';\n}","import {Action} from \"../../../action\";\nimport {Label} from 'ui.label';\nimport {TagType} from '../../enums/tag-type';\nimport {Dom, Type} from 'main.core';\n\nexport const Tag = {\n\tprops: {\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t},\n\t\thint: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t},\n\t\taction: {\n\t\t\ttype: Object,\n\t\t\trequired: false,\n\t\t\tdefault: null,\n\t\t},\n\t\ttype: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: TagType.SECONDARY,\n\t\t},\n\t\tstate: String,\n\t},\n\tcomputed: {\n\t\tclassName(): Object {\n\t\t\treturn {\n\t\t\t\t'crm-timeline__card-status': true,\n\t\t\t\t'--clickable': !!this.action,\n\t\t\t\t'--hint': !!this.hint,\n\t\t\t}\n\t\t},\n\n\t\ttagTypeToLabelColorDict() {\n\t\t\treturn {\n\t\t\t\t[TagType.PRIMARY]: Label.Color.LIGHT_BLUE,\n\t\t\t\t[TagType.SECONDARY]: Label.Color.LIGHT,\n\t\t\t\t[TagType.SUCCESS]: Label.Color.LIGHT_GREEN,\n\t\t\t\t[TagType.WARNING]: Label.Color.LIGHT_YELLOW,\n\t\t\t\t[TagType.FAILURE]: Label.Color.LIGHT_RED,\n\t\t\t};\n\t\t},\n\n\t\ttagContainerRef() {\n\t\t\treturn this.$refs.tag;\n\t\t}\n\t},\n\tmethods: {\n\n\t\tgetLabelColorFromTagType(tagType) {\n\t\t\tconst lowerCaseTagType = tagType ? tagType.toLowerCase() : '';\n\t\t\tconst labelColor = this.tagTypeToLabelColorDict[lowerCaseTagType];\n\t\t\treturn labelColor ? labelColor : Label.Color.LIGHT;\n\t\t},\n\n\t\trenderTag(tagOptions): HTMLElement | null {\n\t\t\tif (!tagOptions || !this.tagContainerRef) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\n\t\t\tconst {title, type} = tagOptions;\n\n\t\t\tconst uppercaseTitle = title && Type.isString(title) ? title.toUpperCase() : '';\n\t\t\tconst label = new Label({\n\t\t\t\ttext: uppercaseTitle,\n\t\t\t\tcolor: this.getLabelColorFromTagType(type),\n\t\t\t\tfill: true,\n\t\t\t});\n\n\t\t\tDom.clean(this.tagContainerRef);\n\t\t\tDom.append(label.render(), this.tagContainerRef);\n\t\t},\n\n\t\texecuteAction() {\n\t\t\tif (!this.action) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst action = new Action(this.action);\n\t\t\taction.execute(this);\n\t\t},\n\t},\n\tmounted() {\n\t\tthis.renderTag({title: this.title, type: this.type});\n\t},\n\n\tupdated() {\n\t\tthis.renderTag({title: this.title, type: this.type})\n\t},\n\ttemplate: `\n\t\t<div ref=\"tag\" :title=\"hint\" :class=\"className\" @click=\"executeAction\"></div>\n\t`\n};\n","import {Text} from \"main.core\"\n\nexport const User = {\n\tprops: {\n\t\ttitle: String,\n\t\tdetailUrl: String,\n\t\timageUrl: String,\n\t},\n\tinject: ['isLogMessage'],\n\tcomputed: {\n\t\tstyles()\n\t\t{\n\t\t\tif (!this.imageUrl)\n\t\t\t{\n\t\t\t\treturn {};\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tbackgroundImage: \"url('\" + encodeURI(Text.encode(this.imageUrl)) + \"')\",\n\t\t\t\tbackgroundSize: '21px'\n\t\t\t};\n\t\t},\n\n\t\tclassName() {\n\t\t\treturn [\n\t\t\t\t'ui-icon',\n\t\t\t\t'ui-icon-common-user',\n\t\t\t\t'crm-timeline__user-icon', {\n\t\t\t\t'--muted': this.isLogMessage,\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t},\n\t// language=Vue\n\ttemplate: `<a :class=\"className\" :href=\"detailUrl\"\n\t\t\t\t  target=\"_blank\" :title=\"title\"><i :style=\"styles\"></i></a>`\n};\n","import { DatetimeConverter } from 'crm.timeline.tools';\n\nexport const FormatDate = {\n\tname: 'FormatDate',\n\tprops: {\n\t\ttimestamp: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t\tdefault: 0,\n\t\t},\n\n\t\tdatePlaceholder: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t},\n\n\t\tuseShortTimeFormat: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: false,\n\t\t},\n\n\t\tclass: {\n\t\t\ttype: [Array, Object, String],\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t}\n\t},\n\tcomputed: {\n\t\tformattedDate() {\n\t\t\tif (!this.timestamp)\n\t\t\t{\n\t\t\t\treturn this.datePlaceholder;\n\t\t\t}\n\t\t\tconst converter = DatetimeConverter.createFromServerTimestamp(this.timestamp).toUserTime();\n\n\t\t\treturn this.useShortTimeFormat ? converter.toTimeString() : converter.toDatetimeString({delimiter: ', '});\n\t\t},\n\t},\n\n\ttemplate: `\n\t\t<div :class=\"$props.class\">{{ formattedDate }}</div>\n\t`\n}","import { Popup, PopupOptions } from 'main.popup';\nimport {Event, Runtime, Dom} from 'main.core';\nimport { Action } from '../../../action';\n\nexport const Hint = {\n\tdata(): Object {\n\t\treturn {\n\t\t\tisMouseOnHintArea: false,\n\t\t\thintPopup: null,\n\t\t}\n\t},\n\tprops: {\n\t\ticon: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t},\n\t\ttextBlocks: {\n\t\t\ttype: Array,\n\t\t\trequired: false,\n\t\t\tdefault: [],\n\t\t},\n\t},\n\tcomputed: {\n\t\thintContentIcon(): ?HTMLElement {\n\t\t\tif (this.icon === '')\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tconst iconElement = Dom.create('i');\n\n\t\t\treturn Dom.create('div', {\n\t\t\t\tattrs: {\n\t\t\t\t\tclassname: this.hintContentIconClassname,\n\t\t\t\t},\n\t\t\t\tchildren: [iconElement],\n\t\t\t});\n\t\t},\n\n\t\thintContentText(): HTMLElement {\n\t\t\treturn Dom.create('div', {\n\t\t\t\tattrs: {\n\t\t\t\t\tclassname: 'crm-timeline__hint_popup-content-text',\n\t\t\t\t},\n\t\t\t\tchildren: this.hintContentTextBlocks,\n\t\t\t});\n\t\t},\n\n\t\thintContentTextBlocks(): HTMLElement[] {\n\t\t\treturn this.textBlocks.map(this.getContentBlockNode);\n\t\t},\n\n\t\thintContentIconClassname(): string {\n\t\t\tconst baseClassname = 'crm-timeline__hint_popup-content-icon';\n\t\t\treturn `${baseClassname} --${this.icon}`;\n\t\t},\n\n\t\thintIconClassname(): Array {\n\t\t\treturn [\n\t\t\t\t'ui-hint',\n\t\t\t\t'crm-timeline__header-hint', {\n\t\t\t\t'--active': this.hintPopup,\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\n\t\thasContent(): boolean {\n\t\t\treturn this.textBlocks.length > 0;\n\t\t},\n\t},\n\tmethods: {\n\t\tgetHintContent(): HTMLElement {\n\t\t\treturn Dom.create('div', {\n\t\t\t\tattrs: {\n\t\t\t\t\tclassname: 'crm-timeline__hint_popup-content'\n\t\t\t\t},\n\t\t\t\tstyle: {\n\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t},\n\t\t\t\tchildren: [this.hintContentIcon, this.hintContentText],\n\t\t\t});\n\t\t},\n\n\t\tgetPopupOptions(): PopupOptions {\n\t\t\treturn {\n\t\t\t\tdarkMode: true,\n\t\t\t\tautoHide: false,\n\t\t\t\tcontent: this.getHintContent(),\n\t\t\t\tmaxWidth: 400,\n\t\t\t\tbindOptions: {\n\t\t\t\t\tposition: 'top',\n\t\t\t\t},\n\t\t\t\tanimation: 'fading-slide',\n\t\t\t}\n\t\t},\n\n\t\tgetPopupPosition(): {left: number, right: number} {\n\t\t\tconst hintElem = this.$refs.hint;\n\t\t\tconst defaultAngleLeftOffset = Popup.getOption('angleLeftOffset');\n\t\t\tconst { width: hintWidth, left: hintLeftOffset, top: hintTopOffset } = Dom.getPosition(hintElem);\n\t\t\tconst { width: popupWidth } = Dom.getPosition(this.hintPopup?.getPopupContainer());\n\t\t\treturn {\n\t\t\t\tleft: hintLeftOffset + defaultAngleLeftOffset - (popupWidth - hintWidth) / 2,\n\t\t\t\ttop: hintTopOffset + 15,\n\t\t\t}\n\t\t},\n\n\t\tgetPopupAngleOffset(popupContainer: HTMLElement): number {\n\t\t\tconst angleWidth = 33;\n\t\t\tconst { width: popupWidth } = Dom.getPosition(popupContainer);\n\t\t\treturn (popupWidth - angleWidth) / 2;\n\t\t},\n\n\t\tonMouseEnterToPopup(): void {\n\t\t\tthis.isMouseOnHintArea = true;\n\t\t},\n\n\t\tonHintAreaMouseLeave(): void {\n\t\t\tthis.isMouseOnHintArea = false;\n\t\t\tsetTimeout(() => {\n\t\t\t\tif (!this.isMouseOnHintArea)\n\t\t\t\t{\n\t\t\t\t\tthis.hideHintPopup();\n\t\t\t\t}\n\t\t\t}, 400);\n\t\t},\n\n\t\tonMouseEnterToHint(): void {\n\t\t\tthis.isMouseOnHintArea = true;\n\t\t\tthis.showHintPopupWithDebounce();\n\t\t},\n\n\t\tshowHintPopup(): void {\n\t\t\tif (!this.isMouseOnHintArea || this.hintPopup && this.hintPopup.isShown())\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.hintPopup = new Popup(this.getPopupOptions());\n\t\t\tconst popupContainer = this.hintPopup.getPopupContainer();\n\t\t\tEvent.bind(popupContainer, 'mouseenter', this.onMouseEnterToPopup);\n\t\t\tEvent.bind(popupContainer, 'mouseleave', this.onHintAreaMouseLeave);\n\t\t\tthis.hintPopup.show();\n\t\t\tthis.hintPopup.setBindElement(this.getPopupPosition());\n\t\t\tthis.hintPopup.setAngle(false);\n\t\t\tthis.hintPopup.setAngle({offset: this.getPopupAngleOffset(popupContainer, this.$refs.hint)});\n\t\t\tthis.hintPopup.adjustPosition();\n\t\t\tthis.hintPopup.show();\n\t\t},\n\n\t\tshowHintPopupWithDebounce() {\n\t\t\tRuntime.debounce(this.showHintPopup, 300, this)();\n\t\t},\n\n\t\thideHintPopup(): void {\n\t\t\tif (!this.hintPopup)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.hintPopup.close();\n\t\t\tconst popupContainer = this.hintPopup.getPopupContainer();\n\t\t\tEvent.unbind(popupContainer, 'mouseenter', this.onMouseEnterToPopup);\n\t\t\tEvent.unbind(popupContainer, 'mouseleave', this.onHintAreaMouseLeave);\n\t\t\tthis.hintPopup.destroy();\n\t\t\tthis.hintPopup = null;\n\t\t},\n\n\t\thideHintPopupWithDebounce(): void {\n\t\t\treturn Runtime.debounce(this.hideHintPopup, 300, this);\n\t\t},\n\n\t\tgetContentBlockNode(contentBlock): HTMLElement | null {\n\t\t\tif (contentBlock.type === 'text')\n\t\t\t{\n\t\t\t\treturn this.getTextNode(contentBlock.options);\n\t\t\t}\n\t\t\telse if (contentBlock.type === 'link')\n\t\t\t{\n\t\t\t\treturn this.getLinkNode(contentBlock.options);\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\n\t\tgetTextNode(textOptions = {}): HTMLElement {\n\t\t\treturn Dom.create('span', {text: textOptions.text});\n\t\t},\n\n\t\tgetLinkNode(linkOptions = {}): HTMLElement {\n\t\t\tconst link = Dom.create('span', {text: linkOptions.text});\n\t\t\tDom.addClass(link, 'crm-timeline__hint_popup-content-link');\n\t\t\tlink.onclick = () => {\n\t\t\t\tthis.executeAction(linkOptions.action);\n\t\t\t}\n\n\t\t\treturn link;\n\t\t},\n\n\t\texecuteAction(actionObj): void {\n\t\t\tif (actionObj)\n\t\t\t{\n\t\t\t\tconst action = new Action(actionObj);\n\t\t\t\taction.execute(this);\n\t\t\t}\n\t\t},\n\t},\n\n\ttemplate: `\n\t\t<span\n\t\t\tref=\"hint\"\n\t\t\t@click.stop.prevent\n\t\t\t@mouseenter=\"onMouseEnterToHint\"\n\t\t\t@mouseleave=\"onHintAreaMouseLeave\"\n\t\t\tv-if=\"hasContent\"\n\t\t\t:class=\"hintIconClassname\"\n\t\t>\n\t\t\t<span class=\"ui-hint-icon\" />\n\t\t</span>\n\t`\n}\n","import {ChangeStreamButton} from './header/change-stream-button'\nimport {Title} from './header/title'\nimport {Tag} from './header/tag'\nimport {User} from './header/user'\nimport {FormatDate} from './header/format-date';\nimport {Runtime, Type} from 'main.core';\nimport {Hint} from './header/hint';\n\nexport const Header = {\n\tcomponents: {\n\t\tChangeStreamButton,\n\t\tTitle,\n\t\tTag,\n\t\tUser,\n\t\tFormatDate,\n\t\tHint,\n\t},\n\tprops: {\n\t\ttitle: String,\n\t\ttitleAction: Object,\n\t\tdate: Number,\n\t\tdatePlaceholder: String,\n\t\tuseShortTimeFormat: Boolean,\n\t\tchangeStreamButton: Object|null,\n\t\ttags: Object,\n\t\tuser: Object,\n\t\tinfoHelper: Object,\n\t},\n\tinject: [\n\t\t'isReadOnly',\n\t\t'isLogMessage',\n\t],\n\tcomputed: {\n\t\tvisibleTags(): Array\n\t\t{\n\t\t\tif (!Type.isPlainObject(this.tags))\n\t\t\t{\n\t\t\t\treturn [];\n\t\t\t}\n\n\t\t\treturn this.tags\n\t\t\t\t? Object.values(this.tags).filter(this.isVisibleTagFilter)\n\t\t\t\t: []\n\t\t\t;\n\t\t},\n\n\t\tvisibleAndAscSortedTags(): Array\n\t\t{\n\t\t\tconst tagsCopy = Runtime.clone(this.visibleTags);\n\t\t\treturn tagsCopy.sort(this.tagsAscSorter);\n\t\t},\n\n\t\tisShowDate(): boolean\n\t\t{\n\t\t\treturn this.date || this.datePlaceholder;\n\t\t},\n\n\t\tclassName(): Object {\n\t\t\treturn [\n\t\t\t\t'crm-timeline__card-top', {\n\t\t\t\t'--log-message': this.isReadOnly || this.isLogMessage,\n\t\t\t\t}\n\t\t\t]\n\t\t}\n\t},\n\tmethods: {\n\t\tisVisibleTagFilter(tag): Boolean {\n\t\t\treturn tag.state !== 'hidden' && tag.scope !== 'mobile' && (!this.isReadOnly || !tag.hideIfReadonly);\n\t\t},\n\n\t\ttagsAscSorter(tagA, tagB): Number {\n\t\t\treturn tagA.sort - tagB.sort;\n\t\t},\n\n\t\tgetChangeStreamButton(): ?Object\n\t\t{\n\t\t\treturn this.$refs.changeStreamButton;\n\t\t}\n\t},\n\ttemplate: `\n\t\t<div :class=\"className\">\n\t\t\t<div class=\"crm-timeline__card-top_info\">\n\t\t\t\t<div class=\"crm-timeline__card-top_info_left\">\n\t\t\t\t\t<ChangeStreamButton v-if=\"changeStreamButton\" v-bind=\"changeStreamButton\" ref=\"changeStreamButton\"></ChangeStreamButton>\n\t\t\t\t\t<Title :title=\"title\" :action=\"titleAction\"></Title>\n\t\t\t\t\t<Hint v-if=\"infoHelper\" v-bind=\"infoHelper\"></Hint>\n\t\t\t\t</div>\n\t\t\t\t<div ref=\"tags\" class=\"crm-timeline__card-top_info_right\">\n\t\t\t\t\t<Tag\n\t\t\t\t\t\tv-for=\"(tag, index) in visibleAndAscSortedTags\"\n\t\t\t\t\t\t:key=\"index\"\n\t\t\t\t\t\tv-bind=\"tag\"\n\t\t\t\t\t/>\n\t\t\t\t\t<FormatDate\n\t\t\t\t\t\tv-if=\"isShowDate\"\n\t\t\t\t\t\t:timestamp=\"date\"\n\t\t\t\t\t\t:use-short-time-format=\"useShortTimeFormat\"\n\t\t\t\t\t\t:date-placeholder=\"datePlaceholder\"\n\t\t\t\t\t\tclass=\"crm-timeline__card-time\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"crm-timeline__card-top_user\">\n\t\t\t\t<User v-bind=\"user\"></User>\n\t\t\t</div>\n\t\t</div>\n\t`\n};\n","import {Action} from \"../../../action\";\nimport {Text} from \"main.core\";\n\nexport const Logo = {\n\tprops: {\n\t\ttype: String,\n\t\taddIcon: String,\n\t\taddIconType: String,\n\t\ticon: String,\n\t\ticonType: String,\n\t\tbackgroundUrl: String,\n\t\tbackgroundSize: Number,\n\t\tinCircle: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: false,\n\t\t},\n\t\taction: Object,\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tcurrentIcon: this.icon,\n\t\t}\n\t},\n\tcomputed: {\n\t\tclassName(): string\n\t\t{\n\t\t\treturn [\n\t\t\t\t'crm-timeline__card-logo',\n\t\t\t\t`--${this.type}`, {\n\t\t\t\t'--clickable': this.action,\n\t\t\t\t}\n\t\t\t];\n\t\t},\n\n\t\ticonClassname() {\n\t\t\treturn [\n\t\t\t\t'crm-timeline__card-logo_icon',\n\t\t\t\t`--${this.currentIcon}`,\n\t\t\t\t`--type-${this.iconType}`, {\n\t\t\t\t\t'--in-circle': this.inCircle,\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\n\t\taddIconClassname() {\n\t\t\treturn [\n\t\t\t\t'crm-timeline__card-logo_add-icon',\n\t\t\t\t`--type-${this.addIconType}`,\n\t\t\t\t`--icon-${this.addIcon}`\n\t\t\t]\n\t\t},\n\n\t\ticonInteriorStyle()\n\t\t{\n\t\t\tconst result = {};\n\n\t\t\tif (this.backgroundUrl)\n\t\t\t{\n\t\t\t\tresult.backgroundImage = 'url(' + encodeURI(Text.encode(this.backgroundUrl)) + ')';\n\t\t\t}\n\n\t\t\tif (this.backgroundSize)\n\t\t\t{\n\t\t\t\tresult.backgroundSize = parseInt(this.backgroundSize) + 'px';\n\t\t\t}\n\n\t\t\treturn result;\n\t\t}\n\t},\n\twatch: {\n\t\ticon(newIcon): void\n\t\t{\n\t\t\tthis.currentIcon = newIcon;\n\t\t}\n\t},\n\tmethods: {\n\t\texecuteAction() {\n\t\t\tif (!this.action)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst action = new Action(this.action);\n\t\t\taction.execute(this);\n\t\t},\n\t\tsetIcon(icon: String) {\n\t\t\tthis.currentIcon = icon;\n\t\t}\n\t},\n\ttemplate: `\n\t\t<div :class=\"className\" @click=\"executeAction\">\n\t\t\t<div class=\"crm-timeline__card-logo_content\">\n\t\t\t\t<div :class=\"iconClassname\">\n\t\t\t\t\t<i :style=\"iconInteriorStyle\"></i>\n\t\t\t\t</div>\n\t\t\t\t<div :class=\"addIconClassname\" v-if=\"addIcon\">\n\t\t\t\t\t<i></i>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`\n};\n","import {DateTimeFormat} from 'main.date';\nimport { DatetimeConverter } from 'crm.timeline.tools';\n\nexport const CalendarIcon = {\n\tprops: {\n\t\ttimestamp: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t\tdefault: 0,\n\t\t}\n\t},\n\n\tcomputed: {\n\t\tuserTime() {\n\t\t\treturn DatetimeConverter.createFromServerTimestamp(this.timestamp).toUserTime().getValue();\n\t\t},\n\t\tdate() {\n\t\t\treturn DateTimeFormat.format('d', this.userTime);\n\t\t},\n\t\tmonth() {\n\t\t\treturn DateTimeFormat.format('F', this.userTime);\n\t\t},\n\t\tdayWeek() {\n\t\t\treturn DateTimeFormat.format('D', this.userTime);\n\t\t},\n\n\t\ttime() {\n\t\t\treturn DatetimeConverter.createFromServerTimestamp(this.timestamp).toUserTime().toTimeString();\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"crm-timeline__calendar-icon\">\n\t\t\t<header class=\"crm-timeline__calendar-icon_top\">\n\t\t\t\t<div class=\"crm-timeline__calendar-icon_bullets\">\n\t\t\t\t\t<div class=\"crm-timeline__calendar-icon_bullet\"></div>\n\t\t\t\t\t<div class=\"crm-timeline__calendar-icon_bullet\"></div>\n\t\t\t\t</div>\n\t\t\t</header>\n\t\t\t<main class=\"crm-timeline__calendar-icon_content\">\n\t\t\t\t<div class=\"crm-timeline__calendar-icon_day\">{{ date }}</div>\n\t\t\t\t<div class=\"crm-timeline__calendar-icon_month\">{{ month }}</div>\n\t\t\t\t<div class=\"crm-timeline__calendar-icon_date\">\n\t\t\t\t\t<span class=\"crm-timeline__calendar-icon_day-week\">{{ dayWeek }}</span>\n\t\t\t\t\t<span class=\"crm-timeline__calendar-icon_time\">{{ time }}</span>\n\t\t\t\t</div>\n\t\t\t</main>\n\t\t</div>\n\t`\n}","import {BitrixVue} from 'ui.vue3';\n\nimport {Logo} from './logo';\nimport {CalendarIcon} from './calendar-icon';\n\nexport const LogoCalendar = BitrixVue.cloneComponent(Logo, {\n\tcomponents: {\n\t\tCalendarIcon,\n\t},\n\tprops: {\n\t\ttimestamp: {\n\t\t\ttype: Number,\n\t\t\trequired: false,\n\t\t\tdefault: 0,\n\t\t},\n\t\taddIcon: String,\n\t\taddIconType: String,\n\t},\n\tcomputed: {\n\t\taddIconClassname() {\n\t\t\treturn [\n\t\t\t\t'crm-timeline__card-logo_add-icon',\n\t\t\t\t`--type-${this.addIconType}`,\n\t\t\t\t`--icon-${this.addIcon}`\n\t\t\t]\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div :class=\"className\" @click=\"executeAction\">\n\t\t\t<div class=\"crm-timeline__card-logo_content\">\n\t\t\t\t<CalendarIcon :timestamp=\"timestamp\" />\n\t\t\t\t<div :class=\"addIconClassname\" v-if=\"addIcon\">\n\t\t\t\t\t<i></i>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`\n});","import { Logo } from './body/logo';\nimport { LogoCalendar } from './body/logo-calendar';\nimport { Type } from 'main.core';\n\nexport const Body = {\n\tcomponents: {\n\t\tLogo,\n\t\tLogoCalendar,\n\t},\n\tprops: {\n\t\tlogo: Object,\n\t\tblocks: Object,\n\t},\n\tdata()\n\t{\n\t\treturn {\n\t\t\tblockRefs: {},\n\t\t}\n\t},\n\tmounted() {\n\t\tconst blocks = this.$refs.blocks;\n\t\tif (!blocks || !this.visibleBlocks)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tthis.visibleBlocks.forEach((block, index) => {\n\t\t\tif (Type.isDomNode(blocks[index].$el))\n\t\t\t{\n\t\t\t\tblocks[index].$el.setAttribute('data-id', block.id);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthrow new Error('Vue component \"' + block.rendererName + '\" was not found');\n\t\t\t}\n\t\t});\n\t},\n\tbeforeUpdate() {\n\t\tthis.blockRefs = {};\n\t},\n\tcomputed: {\n\t\tvisibleBlocks(): Array\n\t\t{\n\t\t\tif (!Type.isPlainObject(this.blocks))\n\t\t\t{\n\t\t\t\treturn [];\n\t\t\t}\n\n\t\t\treturn Object.keys(this.blocks)\n\t\t\t\t.map((id) => ({id, ...this.blocks[id]}))\n\t\t\t\t.filter((item) => (item.scope !== 'mobile'))\n\t\t\t\t.sort((a, b) => {\n\t\t\t\t\tlet aSort = a.sort === undefined ? 0 : a.sort\n\t\t\t\t\tlet bSort = b.sort === undefined ? 0 : b.sort\n\n\t\t\t\t\tif (aSort < bSort) {\n\t\t\t\t\t\treturn -1;\n\t\t\t\t\t}\n\t\t\t\t\tif (aSort > bSort) {\n\t\t\t\t\t\treturn  1;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn 0\n\t\t\t\t})\n\t\t\t;\n\t\t},\n\t\tcontentContainerClassname(): Array {\n\t\t\treturn [\n\t\t\t\t'crm-timeline__card-container', {\n\t\t\t\t'--without-logo': !this.logo,\n\t\t\t\t}\n\t\t\t];\n\t\t}\n\t},\n\tmethods: {\n\t\tgetContentBlockById(blockId: string): ?Object\n\t\t{\n\t\t\treturn this.blockRefs[blockId] ?? null;\n\t\t},\n\t\tgetLogo(): ?Object\n\t\t{\n\t\t\treturn this.$refs.logo;\n\t\t},\n\t\tsaveRef(ref: Object, id: string): void\n\t\t{\n\t\t\tthis.blockRefs[id] = ref;\n\t\t}\n\t},\n\ttemplate: `\n\t\t<div class=\"crm-timeline__card-body\">\n\t\t\t<div v-if=\"logo\" class=\"crm-timeline__card-logo_container\">\n\t\t\t\t<LogoCalendar v-if=\"logo.icon === 'calendar'\" v-bind=\"logo\"></LogoCalendar>\n\t\t\t\t<Logo v-else v-bind=\"logo\" ref=\"logo\"></Logo>\n\t\t\t</div>\n\t\t\t<div :class=\"contentContainerClassname\">\n\t\t\t\t<div\n\t\t\t\t\tv-for=\"block in visibleBlocks\"\n\t\t\t\t\t:key=\"block.id\"\n\t\t\t\t\tclass=\"crm-timeline__card-container_block\"\n\t\t\t\t>\n\t\t\t\t\t<component\n\t\t\t\t\t\t:is=\"block.rendererName\"\n\t\t\t\t\t\tv-bind=\"block.properties\"\n\t\t\t\t\t\t:ref=\"(el) => this.saveRef(el, block.id)\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`\n};\n","export class ButtonState {\n\tstatic DEFAULT = '';\n\tstatic LOADING = 'loading';\n\tstatic DISABLED = 'disabled';\n\tstatic HIDDEN = 'hidden';\n}","import { ButtonState } from '../enums/button-state';\nimport { Button as UIButton } from 'ui.buttons';\nimport { Action } from '../../action';\n\nexport const BaseButton = {\n\tprops: {\n\t\tid: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t},\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t},\n\t\tstate: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: ButtonState.DEFAULT,\n\t\t},\n\t\taction: Object,\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tcurrentState: this.state,\n\t\t}\n\t},\n\n\tcomputed: {\n\t\titemStateToButtonStateDict() {\n\t\t\treturn {\n\t\t\t\t[ButtonState.LOADING]: UIButton.State.WAITING,\n\t\t\t\t[ButtonState.DISABLED]: UIButton.State.DISABLED,\n\t\t\t}\n\t\t},\n\t},\n\n\tmethods: {\n\t\tsetDisabled(disabled: boolean): void\n\t\t{\n\t\t\tif (disabled)\n\t\t\t{\n\t\t\t\tthis.setButtonState(ButtonState.DISABLED);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.setButtonState(ButtonState.DEFAULT);\n\t\t\t}\n\t\t},\n\n\t\tsetLoading(loading: boolean): void\n\t\t{\n\t\t\tif (loading)\n\t\t\t{\n\t\t\t\tthis.setButtonState(ButtonState.LOADING);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.setButtonState(ButtonState.DEFAULT);\n\t\t\t}\n\t\t},\n\n\t\tsetButtonState(state): void\n\t\t{\n\t\t\tif (this.currentState !== state)\n\t\t\t{\n\t\t\t\tthis.currentState = state;\n\t\t\t}\n\t\t},\n\n\t\tonLayoutUpdated(): void\n\t\t{\n\t\t\tthis.setButtonState(this.state);\n\t\t},\n\n\t\texecuteAction(): void\n\t\t{\n\t\t\tif (this.action && this.currentState !== ButtonState.DISABLED && this.currentState !== ButtonState.LOADING)\n\t\t\t{\n\t\t\t\tconst action = new Action(this.action);\n\t\t\t\taction.execute(this);\n\t\t\t}\n\t\t},\n\n\n\t},\n\n\tcreated() {\n\t\tthis.$Bitrix.eventEmitter.subscribe('layout:updated', this.onLayoutUpdated);\n\t},\n\tbeforeDestroy(): void\n\t{\n\t\tthis.$Bitrix.eventEmitter.unsubscribe('layout:updated', this.onLayoutUpdated);\n\t},\n\n\ttemplate: `<button></button>`\n}","import {ButtonState} from \"../../enums/button-state\";\nimport {BitrixVue} from 'ui.vue3';\nimport {BaseButton} from '../baseButton';\nimport {Loader} from 'main.loader';\n\nexport const AdditionalButtonIcon = Object.freeze({\n\tNOTE: 'note',\n\tSCRIPT: 'script',\n\tPRINT: 'print',\n\tDOTS: 'dots',\n});\n\nexport const AdditionalButtonColor = Object.freeze({\n\tDEFAULT: 'default',\n\tPRIMARY: 'primary',\n});\n\nexport const AdditionalButton = BitrixVue.cloneComponent(BaseButton, {\n\tprops: {\n\t\ticonName: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t\tvalidator(value: string): boolean {\n\t\t\t\treturn Object.values(AdditionalButtonIcon).indexOf(value) > -1;\n\t\t\t},\n\t\t},\n\t\tcolor: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: AdditionalButtonColor.DEFAULT,\n\t\t\tvalidator(value: string)\n\t\t\t{\n\t\t\t\treturn Object.values(AdditionalButtonColor).indexOf(value) > -1;\n\t\t\t},\n\t\t},\n\t},\n\n\tcomputed: {\n\t\tclassName(): Array {\n\t\t\treturn [\n\t\t\t\t'crm-timeline__card_add-button', {\n\t\t\t\t\t[`--icon-${this.iconName}`]: this.iconName,\n\t\t\t\t\t[`--color-${this.color}`]: this.color,\n\t\t\t\t\t[`--state-${this.currentState}`]: this.currentState,\n\t\t\t\t},\n\t\t\t]\n\t\t},\n\n\t\tButtonState(): ButtonState {\n\t\t\treturn ButtonState;\n\t\t},\n\n\t\tloaderHtml(): string {\n\t\t\tconst loader = new Loader({\n\t\t\t\tmode: 'inline',\n\t\t\t\tsize: 20,\n\t\t\t});\n\n\t\t\tloader.show();\n\t\t\treturn loader.layout.outerHTML;\n\t\t},\n\t},\n\n\ttemplate: `\n\t\t<transition name=\"crm-timeline__card_add-button-fade\" mode=\"out-in\">\n\t\t\t<div\n\t\t\t\tv-if=\"currentState === ButtonState.LOADING\"\n\t\t\t\tv-html=\"loaderHtml\"\n\t\t\t\tclass=\"crm-timeline__card_add-button\"\n\t\t\t></div>\n\t\t\t<div\n\t\t\t\tv-else\n\t\t\t\t:title=\"title\"\n\t\t\t\t@click=\"executeAction\"\n\t\t\t\t:class=\"className\">\n\t\t\t</div>\n\t\t</transition>\n\t`\n});","import {MenuManager} from \"main.popup\";\nimport {Menu as LayoutMenu} from \"../../layout/menu\";\nconst MenuId = 'timeline-more-button-menu';\nimport {AdditionalButton, AdditionalButtonColor, AdditionalButtonIcon} from './add-button';\n\nexport const Menu = {\n\tcomponents: {\n\t\tAdditionalButton,\n\t},\n\tprops: {\n\t\tbuttons: Array, // buttons that didn't fit into footer\n\t\titems: Object, // real menu items\n\t},\n\tinject: [\n\t\t'isReadOnly',\n\t],\n\tcomputed: {\n\t\tisMenuFilled(): boolean\n\t\t{\n\t\t\tconst menuItems = this.menuItems;\n\n\t\t\treturn menuItems.length > 0;\n\t\t},\n\n\t\titemsArray(): Array\n\t\t{\n\t\t\tif (!this.items)\n\t\t\t{\n\t\t\t\treturn [];\n\t\t\t}\n\n\t\t\treturn Object.values(this.items)\n\t\t\t\t.filter((item) => (item.state !== 'hidden' && item.scope !== 'mobile' && (!this.isReadOnly || !item.hideIfReadonly)))\n\t\t\t\t.sort((a, b) => (a.sort - b.sort))\n\t\t\t;\n\t\t},\n\n\t\tmenuItems(): Array\n\t\t{\n\t\t\tlet result = this.buttons;\n\t\t\tif (this.buttons.length && this.itemsArray.length)\n\t\t\t{\n\t\t\t\tresult.push({delimiter: true});\n\t\t\t}\n\t\t\tresult = [...result, ...this.itemsArray];\n\n\t\t\treturn result;\n\t\t},\n\n\t\tbuttonProps()\n\t\t{\n\t\t\treturn {\n\t\t\t\tcolor: AdditionalButtonColor.DEFAULT,\n\t\t\t\ticon: AdditionalButtonIcon.DOTS,\n\t\t\t}\n\t\t},\n\t},\n\n\tbeforeUnmount(): void\n\t{\n\t\tconst menu = MenuManager.getMenuById(MenuId);\n\t\tif (menu)\n\t\t{\n\t\t\tmenu.destroy();\n\t\t}\n\t},\n\n\tmethods: {\n\t\tshowMenu(): void\n\t\t{\n\t\t\tLayoutMenu.showMenu(\n\t\t\t\tthis,\n\t\t\t\tthis.menuItems,\n\t\t\t\t{\n\t\t\t\t\tid: MenuId,\n\t\t\t\t\tclassName: 'crm-timeline__card_more-menu',\n\t\t\t\t\twidth: 230,\n\t\t\t\t\tangle: false,\n\t\t\t\t\tcacheable: false,\n\t\t\t\t\tbindElement: this.$el,\n\t\t\t\t}\n\t\t\t);\n\t\t},\n\t},\n\n\t// language=Vue\n\ttemplate: `\n\t\t<div v-if=\"isMenuFilled\" class=\"crm-timeline__card-action_menu-item\" @click=\"showMenu\">\n\t\t\t<AdditionalButton iconName=\"dots\" color=\"default\"></AdditionalButton>\n\t\t</div>\n\t`\n};\n","export class ButtonType {\n\tstatic ICON = 'icon';\n\tstatic PRIMARY = 'primary';\n\tstatic SECONDARY = 'secondary';\n\tstatic LIGHT = 'light';\n}","import {BitrixVue} from 'ui.vue3';\nimport {BaseButton} from './baseButton';\nimport { ButtonOptions, Button as UIButton } from 'ui.buttons';\nimport {ButtonType} from '../enums/button-type';\nimport {ButtonState} from '../enums/button-state';\nimport {Type} from 'main.core';\n\nexport const Button  = BitrixVue.cloneComponent(BaseButton, {\n\tprops: {\n\t\ttype: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: ButtonType.SECONDARY,\n\t\t},\n\t\ticonName: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t},\n\t\tsize: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: 'extra_small'\n\t\t},\n\t},\n\n\tdata() {\n\t\treturn {\n\t\t\tpopup: null,\n\t\t\tuiButton: Object.freeze(null),\n\t\t\ttimerSecondsRemaining: 0,\n\t\t}\n\t},\n\n\tcomputed: {\n\t\titemTypeToButtonColorDict(): Object {\n\t\t\treturn {\n\t\t\t\t[ButtonType.PRIMARY]: UIButton.Color.PRIMARY,\n\t\t\t\t[ButtonType.SECONDARY]: UIButton.Color.LIGHT_BORDER,\n\t\t\t\t[ButtonType.LIGHT]: UIButton.Color.LIGHT,\n\t\t\t\t[ButtonType.ICON]: UIButton.Color.LINK,\n\t\t\t}\n\t\t},\n\n\t\tbuttonContainerRef(): HTMLElement | undefined {\n\t\t\treturn this.$refs.buttonContainer;\n\t\t},\n\t},\n\n\tmethods: {\n\t\tgetButtonOptions(): ButtonOptions {\n\t\t\tconst upperCaseIconName = Type.isString(this.iconName) ? this.iconName.toUpperCase() : '';\n\t\t\tconst upperCaseButtonSize = Type.isString(this.size) ? this.size.toUpperCase() : 'extra_small';\n\t\t\tconst color = this.itemTypeToButtonColorDict[this.type] || UIButton.Color.LIGHT_BORDER;\n\t\t\tconst text = this.type === ButtonType.ICON ? '' : this.title;\n\n\t\t\treturn {\n\t\t\t\tid: this.id,\n\t\t\t\tround: true,\n\t\t\t\tdependOnTheme: false,\n\t\t\t\tsize: UIButton.Size[upperCaseButtonSize],\n\t\t\t\ttext: text,\n\t\t\t\tcolor: color,\n\t\t\t\tstate: this.itemStateToButtonStateDict[this.currentState],\n\t\t\t\ticon: UIButton.Icon[upperCaseIconName],\n\t\t\t}\n\t\t},\n\n\t\tgetUiButton(): ?UIButton\n\t\t{\n\t\t\treturn this.uiButton;\n\t\t},\n\n\t\tdisableWithTimer(sec: number)\n\t\t{\n\t\t\tthis.setButtonState(ButtonState.DISABLED);\n\t\t\tconst btn = this.getUiButton();\n\t\t\tlet remainingSeconds = sec;\n\n\t\t\tbtn.setText(this.formatSeconds(remainingSeconds));\n\n\t\t\tconst timer = setInterval(() => {\n\t\t\t\tif (remainingSeconds < 1)\n\t\t\t\t{\n\t\t\t\t\tclearInterval(timer);\n\t\t\t\t\tbtn.setText(this.title);\n\t\t\t\t\tthis.setButtonState(ButtonState.DEFAULT);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tremainingSeconds--;\n\t\t\t\tbtn.setText(this.formatSeconds(remainingSeconds));\n\t\t\t}, 1000);\n\t\t},\n\n\t\tformatSeconds(sec: number): string {\n\t\t\tconst minutes = Math.floor(sec / 60);\n\t\t\tconst seconds = sec % 60;\n\n\t\t\tconst formatMinutes = this.formatNumber(minutes);\n\t\t\tconst formatSeconds = this.formatNumber(seconds);\n\n\t\t\treturn `${formatMinutes}:${formatSeconds}`;\n\t\t},\n\n\t\tformatNumber(num: number): string {\n\t\t\treturn num < 10 ? `0${num}` : num;\n\t\t},\n\n\t\tsetButtonState(state): void\n\t\t{\n\t\t\tthis.parentSetButtonState(state);\n\t\t\tthis.getUiButton()?.setState(this.itemStateToButtonStateDict[this.currentState] ?? null);\n\t\t},\n\n\t\trenderButton(): void {\n\t\t\tif (!this.buttonContainerRef) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.buttonContainerRef.innerHTML = '';\n\t\t\tconst button = new UIButton(this.getButtonOptions());\n\t\t\tbutton.renderTo(this.buttonContainerRef);\n\t\t\tthis.uiButton = button;\n\t\t},\n\t},\n\n\twatch: {\n\t\tstate(newValue): void\n\t\t{\n\t\t\tthis.setButtonState(newValue);\n\t\t},\n\t},\n\n\tmounted() {\n\t\tthis.renderButton();\n\t},\n\tupdated() {\n\t\tthis.renderButton();\n\t},\n\n\ttemplate: `\n\t\t<div\n\t\t\t:class=\"$attrs.class\"\n\t\t\tref=\"buttonContainer\"\n\t\t\t@click=\"executeAction\">\n\t\t</div>\n\t`\n});\n","import {Button} from '../button';\n\nexport const Buttons = {\n\tcomponents: {\n\t\tButton,\n\t},\n\tprops: {\n\t\titems: {\n\t\t\ttype: Array,\n\t\t\trequired: false,\n\t\t\tdefault: () => [],\n\t\t},\n\t},\n\tmethods: {\n\t\tgetButtonById(buttonId: string): ?Object\n\t\t{\n\t\t\tconst buttons = this.$refs.buttons;\n\n\t\t\treturn this.items.reduce((found, button, index) =>\n\t\t\t{\n\t\t\t\tif (found)\n\t\t\t\t{\n\t\t\t\t\treturn found;\n\t\t\t\t}\n\t\t\t\tif (button.id === buttonId)\n\t\t\t\t{\n\t\t\t\t\treturn buttons[index];\n\t\t\t\t}\n\n\t\t\t\treturn null;\n\t\t\t}, null);\n\t\t},\n\t},\n\ttemplate:\n\t\t`\n\t\t\t<div class=\"crm-timeline__card-action_buttons\">\n\t\t\t\t<Button class=\"crm-timeline__card-action-btn\" v-for=\"item in items\" v-bind=\"item\" ref=\"buttons\" />\n\t\t\t</div>\n\t\t`\n};\n","export class ButtonScope {\n\tstatic MOBILE = 'mobile';\n}","import { Menu } from './footer/menu';\nimport { Buttons } from './footer/buttons';\nimport { Type } from 'main.core';\nimport { Button } from './button';\nimport { ButtonState } from '../enums/button-state';\nimport { ButtonScope } from '../enums/button-scope';\nimport { ButtonType } from '../enums/button-type';\nimport { AdditionalButton } from './footer/add-button';\n\nexport const Footer = {\n\tcomponents: {\n\t\tButtons,\n\t\tMenu,\n\t\tButton,\n\t\tAdditionalButton,\n\t},\n\tprops: {\n\t\tbuttons: Object,\n\t\tmenu: Object,\n\t\tadditionalButtons: {\n\t\t\ttype: Object,\n\t\t\trequired: false,\n\t\t\tdefault: () => ({}),\n\t\t},\n\t\tmaxBaseButtonsCount: {\n\t\t\ttype: Number,\n\t\t\trequired: false,\n\t\t\tdefault: 3,\n\t\t},\n\n\t},\n\tinject: [\n\t\t'isReadOnly',\n\t],\n\tcomputed: {\n\t\tcontainerClassname(): Array {\n\t\t\treturn [\n\t\t\t\t'crm-timeline__card-action', {\n\t\t\t\t'--no-margin-top': this.baseButtons.length < 1,\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\tbaseButtons(): Array\n\t\t{\n\t\t\treturn this.visibleAndSortedButtons.slice(0, this.maxBaseButtonsCount);\n\t\t},\n\n\t\tmoreButtons(): Array\n\t\t{\n\t\t\treturn this.visibleAndSortedButtons.slice(this.maxBaseButtonsCount);\n\t\t},\n\n\n\t\tvisibleAndSortedButtons() {\n\t\t\treturn this.visibleButtons.sort(this.buttonsSorter);\n\t\t},\n\n\t\tvisibleAndSortedAdditionalButtons() {\n\t\t\treturn this.visibleAdditionalButtons.sort(this.buttonsSorter);\n\t\t},\n\n\t\tvisibleButtons(): Array\n\t\t{\n\t\t\tif (!Type.isPlainObject(this.buttons))\n\t\t\t{\n\t\t\t\treturn [];\n\t\t\t}\n\n\t\t\treturn this.buttons\n\t\t\t\t?  Object.keys(this.buttons)\n\t\t\t\t\t.map((id) => ({id, ...this.buttons[id]}))\n\t\t\t\t\t.filter(this.visibleButtonsFilter)\n\t\t\t\t: [];\n\t\t},\n\n\t\tvisibleAdditionalButtons(): Array {\n\t\t\treturn this.additionalButtonsArray\n\t\t\t\t? Object.values(this.additionalButtonsArray).filter(this.visibleButtonsFilter)\n\t\t\t\t: [];\n\t\t},\n\n\t\tadditionalButtonsArray() {\n\t\t\treturn Object.entries(this.additionalButtons).map(([id, button]) => {\n\t\t\t\treturn {id, type: ButtonType.ICON, ...button};\n\t\t\t});\n\t\t},\n\n\t\thasMenu(): boolean\n\t\t{\n\t\t\treturn this.moreButtons.length || (Type.isPlainObject(this.menu) && Object.keys(this.menu).length);\n\t\t},\n\t},\n\tmethods: {\n\t\tvisibleButtonsFilter(buttonItem) {\n\t\t\treturn buttonItem.state !== ButtonState.HIDDEN\n\t\t\t\t&& buttonItem.scope !== ButtonScope.MOBILE\n\t\t\t\t&& (!this.isReadOnly || !buttonItem.hideIfReadonly);\n\t\t},\n\n\t\tbuttonsSorter(buttonA, buttonB) {\n\t\t\treturn buttonA?.sort - buttonB?.sort;\n\t\t},\n\n\t\tgetButtonById(buttonId: string): ?Object\n\t\t{\n\t\t\tif (this.$refs.buttons)\n\t\t\t{\n\t\t\t\tconst foundButton = this.$refs.buttons.getButtonById(buttonId);\n\t\t\t\tif (foundButton)\n\t\t\t\t{\n\t\t\t\t\treturn foundButton;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (this.$refs.additionalButtons)\n\t\t\t{\n\t\t\t\treturn this.visibleAndSortedAdditionalButtons.reduce((found, button, index) =>\n\t\t\t\t{\n\t\t\t\t\tif (found)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn found;\n\t\t\t\t\t}\n\t\t\t\t\tif (button.id === buttonId)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn buttons[index];\n\t\t\t\t\t}\n\n\t\t\t\t\treturn null;\n\t\t\t\t}, null);\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\n\t\tgetMenu(): ?Object\n\t\t{\n\t\t\tif (this.$refs.menu)\n\t\t\t{\n\t\t\t\treturn this.$refs.menu;\n\t\t\t}\n\n\t\t\treturn null;\n\t\t}\n\t},\n\ttemplate: `\n\t\t<div :class=\"containerClassname\">\n\t\t\t<Buttons ref=\"buttons\" :items=\"baseButtons\" />\n\t\t\t<div class=\"crm-timeline__card-action_menu\">\n\t\t\t\t<div\n\t\t\t\t\tv-for=\"button in visibleAndSortedAdditionalButtons\"\n\t\t\t\t\t:key=\"button.id\"\n\t\t\t\t\tclass=\"crm-timeline__card-action_menu-item\"\n\t\t\t\t>\n\t\t\t\t\t<additional-button\n\t\t\t\t\t\tv-bind=\"button\"\n\t\t\t\t\t>\n\t\t\t\t\t</additional-button>\n\t\t\t\t</div>\n\t\t\t\t<Menu v-if=\"hasMenu\" :buttons=\"moreButtons\" v-bind=\"menu\" ref=\"menu\"/>\n\t\t\t</div>\n\t\t</div>\n\t`\n};\n","import {Type} from \"main.core\";\nimport {Action} from \"../../action\";\n\nexport const MarketPanel = {\n\tprops: {\n\t\ttext: String,\n\t\tdetailsText: String,\n\t\tdetailsTextAction: Object,\n\n\t},\n\tcomputed: {\n\t\tneedShowDetailsText(): boolean\n\t\t{\n\t\t\treturn Type.isStringFilled(this.detailsText);\n\t\t},\n\t\thref(): ?string\n\t\t{\n\t\t\tif (!this.detailsTextAction)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tconst action = new Action(this.detailsTextAction);\n\t\t\tif (action.isRedirect())\n\t\t\t{\n\t\t\t\treturn action.getValue();\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\t},\n\tmethods: {\n\t\texecuteAction(): void\n\t\t{\n\t\t\tif (this.detailsTextAction)\n\t\t\t{\n\t\t\t\tconst action = new Action(this.detailsTextAction);\n\t\t\t\taction.execute(this);\n\t\t\t}\n\t\t}\n\t},\n\ttemplate: `\n\t\t<div class=\"crm-timeline__card-bottom\">\n\t\t<div class=\"crm-timeline__card-market\">\n\t\t\t<div class=\"crm-timeline__card-market_container\">\n\t\t\t\t<span class=\"crm-timeline__card-market_logo\"></span>\n\t\t\t\t<span class=\"crm-timeline__card-market_text\">{{ text }}</span>\n\t\t\t\t<a\n\t\t\t\t\tv-if=\"href && needShowDetailsText\"\n\t\t\t\t\t:href=\"href\"\n\t\t\t\t\tclass=\"crm-timeline__card-market_more\"\n\t\t\t\t>\n\t\t\t\t\t{{detailsText}}\n\t\t\t\t</a>\n\t\t\t\t<span\n\t\t\t\t\tv-if=\"!href && needShowDetailsText\"\n\t\t\t\t\t@click=\"executeAction\"\n\t\t\t\t\tclass=\"crm-timeline__card-market_more\"\n\t\t\t\t>\n\t\t\t\t{{detailsText}}\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t\t<div class=\"crm-timeline__card-market_cross\"><i></i></div>\n\t\t</div>\n\t\t</div>\n\t`\n};\n","export const UserPick = {\n\ttemplate: `\n\t\t<div class=\"ui-icon ui-icon-common-user crm-timeline__card-top_user-icon\">\n\t\t\t<i></i>\n\t\t</div>\n\t`\n}","export const StreamType = {\n\thistory: 0,\n\tscheduled: 1,\n\tpinned: 2,\n}","import { Icon } from './layout/icon';\nimport { Header } from './layout/header';\nimport { Body } from './layout/body';\nimport { Footer } from './layout/footer';\nimport { MarketPanel } from './layout/marketPanel';\nimport { UserPick } from './layout/userPick';\nimport { Dom, Runtime } from \"main.core\";\nimport { BaseEvent } from \"main.core.events\";\nimport { Loader } from \"main.loader\";\nimport { StreamType } from '../stream-type';\n\nexport const Item = {\n\tcomponents: {\n\t\tIcon,\n\t\tHeader,\n\t\tBody,\n\t\tFooter,\n\t\tMarketPanel,\n\t\tUserPick\n\t},\n\tprops: {\n\t\tinitialLayout: Object,\n\t\tid: String,\n\t\tuseShortTimeFormat: Boolean,\n\t\tisLogMessage: Boolean,\n\t\tisReadOnly: Boolean,\n\t\tcurrentUser: Object | null,\n\t\tonAction: Function,\n\t\tstreamType: {\n\t\t\ttype: Number,\n\t\t\trequired: false,\n\t\t\tdefault: StreamType.history,\n\t\t}\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tlayout: this.initialLayout,\n\t\t\tisFaded: false,\n\t\t\tloader: Object.freeze(null),\n\t\t}\n\t},\n\tprovide() {\n\t\treturn {\n\t\t\tisLogMessage: !!this.initialLayout?.isLogMessage,\n\t\t\tisReadOnly: this.isReadOnly,\n\t\t\tcurrentUser: this.currentUser,\n\t\t};\n\t},\n\tcreated(): void\n\t{\n\t\tthis.$Bitrix.eventEmitter.subscribe('crm:timeline:item:action', this.onActionEvent);\n\t},\n\tbeforeDestroy(): void\n\t{\n\t\tthis.$Bitrix.eventEmitter.unsubscribe('crm:timeline:item:action', this.onActionEvent);\n\t},\n\tmethods: {\n\t\tonActionEvent(event: BaseEvent): void\n\t\t{\n\t\t\tconst eventData = event.getData();\n\t\t\tthis.onAction(Runtime.clone(eventData));\n\t\t},\n\t\tsetLayout(newLayout: Object): void\n\t\t{\n\t\t\tthis.layout = newLayout;\n\t\t\tthis.isFaded = false;\n\t\t\tthis.$Bitrix.eventEmitter.emit('layout:updated');\n\t\t},\n\n\t\tsetFaded(faded: boolean)\n\t\t{\n\t\t\tthis.isFaded = faded;\n\t\t},\n\n\t\tshowLoader(showLoader: boolean)\n\t\t{\n\t\t\tif (showLoader)\n\t\t\t{\n\t\t\t\tthis.setFaded(true);\n\t\t\t\tif (!this.loader)\n\t\t\t\t{\n\t\t\t\t\tthis.loader = new Loader();\n\t\t\t\t}\n\t\t\t\tthis.loader.show(this.$el.parentNode);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (this.loader)\n\t\t\t\t{\n\t\t\t\t\tthis.loader.hide();\n\t\t\t\t}\n\t\t\t\tthis.setFaded(false);\n\t\t\t}\n\t\t},\n\n\t\tgetContentBlockById(blockId: string): ?Object\n\t\t{\n\t\t\tif (!this.$refs.body)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn this.$refs.body.getContentBlockById(blockId);\n\t\t},\n\n\t\tgetLogo(): ?Object\n\t\t{\n\t\t\tif (!this.$refs.body)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn this.$refs.body.getLogo();\n\t\t},\n\n\t\tgetHeaderChangeStreamButton(): ?Object\n\t\t{\n\t\t\tif (!this.$refs.header)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn this.$refs.header.getChangeStreamButton();\n\t\t},\n\n\t\tgetFooterButtonById(buttonId: string): ?Object\n\t\t{\n\t\t\tif (!this.$refs.footer)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn this.$refs.footer.getButtonById(buttonId);\n\t\t},\n\n\t\tgetFooterMenu(): ?Object\n\t\t{\n\t\t\tif (!this.$refs.footer)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn this.$refs.footer.getMenu();\n\t\t},\n\n\t\thighlightContentBlockById(blockId: string, isHighlighted: boolean): void\n\t\t{\n\t\t\tif (!isHighlighted)\n\t\t\t{\n\t\t\t\tthis.isFaded = false;\n\t\t\t}\n\t\t\tconst block = this. getContentBlockById(blockId);\n\t\t\tif (!block)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (isHighlighted)\n\t\t\t{\n\t\t\t\tthis.isFaded = true;\n\t\t\t\tDom.addClass(block.$el, '--highlighted');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.isFaded = false;\n\t\t\t\tDom.removeClass(block.$el, '--highlighted');\n\t\t\t}\n\t\t}\n\t},\n\tcomputed: {\n\t\ttimelineCardClassname() {\n\t\t\treturn {\n\t\t\t\t'crm-timeline__card': true,\n\t\t\t\t'crm-timeline__card-scope': true,\n\t\t\t\t'--stream-type-history': this.streamType === StreamType.history,\n\t\t\t\t'--stream-type-scheduled': this.streamType === StreamType.scheduled,\n\t\t\t\t'--stream-type-pinned': this.streamType === StreamType.pinned,\n\t\t\t\t'--log-message': !!this.layout.isLogMessage,\n\t\t\t}\n\t\t}\n\t},\n\ttemplate: `\n\t\t<div :data-id=\"id\" :class=\"timelineCardClassname\">\n\t\t\t<div class=\"crm-timeline__card_fade\" v-if=\"isFaded\"></div>\n\t\t\t<div class=\"crm-timeline__card_icon_container\">\n\t\t\t\t<Icon v-bind=\"layout.icon\"></Icon>\n\t\t\t</div>\n\t\t\t<Header v-if=\"layout.header\" v-bind=\"layout.header\" :use-short-time-format=\"useShortTimeFormat\" ref=\"header\"></Header>\n\t\t\t<Body v-if=\"layout.body\" v-bind=\"layout.body\" ref=\"body\"></Body>\n\t\t\t<Footer v-if=\"layout.footer\" v-bind=\"layout.footer\" ref=\"footer\"></Footer>\n\t\t\t<MarketPanel v-if=\"layout.marketPanel\" v-bind=\"layout.marketPanel\"></MarketPanel>\n\t\t</div>\n\t`\n};\n","import {Runtime} from 'main.core';\n\nexport default class Layout {\n\t#layout: Object = null;\n\n\tconstructor (layout: Object) {\n\t\tthis.#layout = layout;\n\t}\n\n\tasPlainObject (): Object {\n\t\treturn Runtime.clone(this.#layout);\n\t}\n\n\tgetFooterMenuItemById (id: string): ?Object {\n\t\tconst items = this.#layout?.footer?.menu?.items ?? {};\n\n\t\treturn items.hasOwnProperty(id) ? items.id : null;\n\t}\n\n\taddFooterMenuItem (menuItem: Object): void {\n\t\tthis.#layout.footer = this.#layout.footer || {};\n\t\tthis.#layout.footer.menu = this.#layout.footer.menu || {};\n\t\tthis.#layout.footer.menu.items = this.#layout.footer.menu.items || {};\n\t\tthis.#layout.footer.menu.items[menuItem.id] = menuItem;\n\t}\n}\n","import ConfigurableItem from '../configurable-item';\nimport { ajax as Ajax } from \"main.core\";\nimport { UI } from \"ui.notification\";\n\nexport type ActionParams =\n{\n\taction: String,\n\tactionType: String,\n\tactionData: ?Object,\n\tresponse: ?Object,\n\tanimationCallbacks: ?ActionAnimationCallbacks,\n};\n\nexport type ActionAnimationCallbacks =\n{\n\tonStart: ?function,\n\tonStop: ?function,\n};\n\nexport class Base\n{\n\tgetDeleteActionMethod(): string\n\t{\n\t\treturn '';\n\t}\n\n\tgetDeleteActionCfg(recordId: Number, ownerTypeId: Number, ownerId: Number): Object\n\t{\n\t\treturn {\n\t\t\tdata: {\n\t\t\t\trecordId,\n\t\t\t\townerTypeId,\n\t\t\t\townerId,\n\t\t\t}\n\t\t};\n\t}\n\n\tonInitialize(item: ConfigurableItem): void\n\t{\n\n\t}\n\n\tonItemAction(item: ConfigurableItem, actionParams: ActionParams): void\n\t{\n\n\t}\n\n\tgetContentBlockComponents(item: ConfigurableItem): Object\n\t{\n\t\treturn {};\n\t}\n\n\tonAfterItemRefreshLayout(item: ConfigurableItem): void\n\t{\n\t}\n\n\tonAfterItemLayout(item: ConfigurableItem, options): void\n\t{\n\t}\n\n\t/**\n\t * Will be executed before item node deleted from DOM\n\t * @param item\n\t */\n\tonBeforeItemClearLayout(item: ConfigurableItem): void\n\t{\n\n\t}\n\n\t/**\n\t * Delete timeline record action\n\t *\n\t * @param recordId Timeline record ID\n\t * @param ownerTypeId Owner type ID\n\t * @param ownerId Owner type ID\n\t * @param animationCallbacks\n\t *\n\t * @returns {Promise}\n\t *\n\t * @protected\n\t */\n\trunDeleteAction(recordId: Number, ownerTypeId: Number, ownerId: Number, animationCallbacks: ?Object): Promise\n\t{\n\t\tif (animationCallbacks.onStart)\n\t\t{\n\t\t\tanimationCallbacks.onStart();\n\t\t}\n\n\t\treturn Ajax.runAction(\n\t\t\tthis.getDeleteActionMethod(),\n\t\t\tthis.getDeleteActionCfg(recordId, ownerTypeId, ownerId)\n\t\t).then(() => {\n\t\t\tif (animationCallbacks.onStop)\n\t\t\t{\n\t\t\t\tanimationCallbacks.onStop();\n\t\t\t}\n\t\t\treturn true;\n\t\t}, (response) =>\n\t\t{\n\t\t\tUI.Notification.Center.notify({\n\t\t\t\tcontent: response.errors[0].message,\n\t\t\t\tautoHideDelay: 5000,\n\t\t\t});\n\n\t\t\tif (animationCallbacks.onStop)\n\t\t\t{\n\t\t\t\tanimationCallbacks.onStop();\n\t\t\t}\n\n\t\t\treturn true;\n\t\t});\n\t}\n\n\tstatic isItemSupported(item: ConfigurableItem): boolean\n\t{\n\t\treturn false;\n\t}\n}\n","import ConfigurableItem from \"./configurable-item\";\n\nexport default class ControllerManager\n{\n\t#id: ?string = null;\n\n\tconstructor(id)\n\t{\n\t\tthis.#id = id;\n\t}\n\n\tgetItemControllers(item: ConfigurableItem): Array\n\t{\n\t\tconst foundControllers = [];\n\t\tfor (const controller of ControllerManager.getRegisteredControllers())\n\t\t{\n\t\t\tif (controller.isItemSupported(item))\n\t\t\t{\n\t\t\t\tconst controllerInstance = new controller();\n\t\t\t\tcontrollerInstance.onInitialize(item);\n\t\t\t\tfoundControllers.push(controllerInstance);\n\t\t\t}\n\t\t}\n\n\t\treturn foundControllers;\n\t}\n\n\tstatic getInstance(timelineId): ControllerManager\n\t{\n\t\tif (!this.#instances.hasOwnProperty(timelineId))\n\t\t{\n\t\t\tthis.#instances[timelineId] = new ControllerManager(timelineId);\n\t\t}\n\n\t\treturn this.#instances[timelineId];\n\t}\n\n\tstatic registerController(controller): void\n\t{\n\t\tthis.#availableControllers.push(controller);\n\t}\n\n\tstatic getRegisteredControllers(): Array\n\t{\n\t\treturn this.#availableControllers;\n\t}\n\n\tstatic #instances = {};\n\tstatic #availableControllers = [];\n}\n","import { ajax, Dom, Text, Type } from 'main.core';\nimport TimelineItem from './item';\nimport { Item } from './components/item';\nimport Layout from './layout';\nimport { BitrixVue } from 'ui.vue3';\nimport { Base } from \"./controllers/base\";\nimport ControllerManager from './controller-manager';\nimport { DatetimeConverter } from 'crm.timeline.tools';\nimport { StreamType } from 'crm.timeline.item';\n\ndeclare type ConfigurableItemParams = {\n\ttimelineId: string,\n\tcontainer: HTMLElement,\n\titemClassName: string,\n\tuseShortTimeFormat: boolean,\n\tisReadOnly: boolean,\n\tcurrentUser: ?Object,\n\townerTypeId: number,\n\townerId: number,\n\tdata: ConfigurableItemData,\n\tstreamType: number;\n};\n\ndeclare type ConfigurableItemData = {\n\ttype: string,\n\ttimestamp: ?Number,\n\tsort: ?Array,\n\tlayout: ?Object,\n\tpayload: ?Object,\n}\n\nexport default class ConfigurableItem extends TimelineItem\n{\n\t#container: HTMLElement = null;\n\t#itemClassName: string = null;\n\t#type: string = null;\n\t#dataPayload: ?Object = null;\n\t#timelineId: string = null;\n\t#timestamp: number = null;\n\t#sort: Array = null;\n\t#useShortTimeFormat: boolean = false;\n\t#isReadOnly: boolean = false;\n\t#currentUser: ?Object = null;\n\t#ownerTypeId: number = null;\n\t#ownerId: number = null;\n\t#controllers: Base[] = null;\n\t#layoutComponent: ?Object = null;\n\t#layoutApp: ?Object = null;\n\t#layout: ?Layout = null;\n\t#streamType: number = null;\n\n\tinitialize(id, settings: ConfigurableItemParams): void\n\t{\n\t\tthis._setId(id);\n\t\tsettings = settings || {};\n\t\tthis.#timelineId = settings.timelineId || '';\n\t\tthis.setContainer(settings.container || null);\n\t\tthis.#itemClassName = settings.itemClassName || '';\n\n\t\tif (Type.isPlainObject(settings.data))\n\t\t{\n\t\t\tthis.setData(settings.data);\n\n\t\t\tthis.#useShortTimeFormat = settings.useShortTimeFormat || false;\n\t\t\tthis.#isReadOnly = settings.isReadOnly || false;\n\t\t\tthis.#currentUser = settings.currentUser || null;\n\t\t\tthis.#ownerTypeId = settings.ownerTypeId;\n\t\t\tthis.#ownerId = settings.ownerId;\n\t\t\tthis.#streamType = settings.streamType || StreamType.history;\n\t\t}\n\n\t\tthis.#controllers = ControllerManager.getInstance(this.#timelineId).getItemControllers(this);\n\t}\n\n\tsetData(data: ConfigurableItemData): void\n\t{\n\t\tthis.#type = data.type || null;\n\t\tthis.#timestamp = data.timestamp || null;\n\t\tthis.#sort = data.sort || [];\n\t\tthis.#layout = new Layout(data.layout || {});\n\t\tthis.#dataPayload = data.payload || {};\n\t}\n\n\tgetLayout(): Layout\n\t{\n\t\treturn this.#layout;\n\t}\n\n\tgetType(): string\n\t{\n\t\treturn this.#type;\n\t}\n\n\tgetDataPayload(): ?Object\n\t{\n\t\treturn this.#dataPayload;\n\t}\n\n\tlayout(options): void\n\t{\n\t\tthis.setWrapper(Dom.create({tag: 'div', attrs: {className: this.#itemClassName}}));\n\t\tthis.initLayoutApp(options);\n\t}\n\n\tinitWrapper(): HTMLElement\n\t{\n\t\tthis.setWrapper(Dom.create({tag: 'div', attrs: {className: this.#itemClassName}}));\n\n\t\treturn this._wrapper;\n\t}\n\n\tinitLayoutApp(options): void\n\t{\n\t\tthis.#initLayoutApp();\n\n\t\tif (this.needBindToContainer(options))\n\t\t{\n\t\t\tconst bindTo = this.getBindToNode(options);\n\t\t\tif (bindTo && !this.#useAnchorNextSibling(options))\n\t\t\t{\n\t\t\t\tDom.insertBefore(this.getWrapper(), bindTo);\n\t\t\t}\n\t\t\telse if (bindTo && bindTo.nextSibling)\n\t\t\t{\n\t\t\t\tDom.insertBefore(this.getWrapper(), bindTo.nextSibling);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tDom.append(this.getWrapper(), this.#container);\n\t\t\t}\n\t\t}\n\n\t\tfor (const controller of this.#controllers)\n\t\t{\n\t\t\tcontroller.onAfterItemLayout(this, options);\n\t\t}\n\t}\n\n\tneedBindToContainer(options): Boolean\n\t{\n\t\tif (Type.isPlainObject(options))\n\t\t{\n\t\t\treturn BX.prop.getBoolean(options, 'add', true);\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tgetBindToNode(options): ?HTMLElement\n\t{\n\t\tif (Type.isPlainObject(options))\n\t\t{\n\t\t\treturn Type.isElementNode(options['anchor']) ? options['anchor'] : null;\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t#useAnchorNextSibling(options): ?HTMLElement\n\t{\n\t\tif (Type.isPlainObject(options))\n\t\t{\n\t\t\treturn Type.isBoolean(options['useAnchorNextSibling']) ? options['useAnchorNextSibling'] : true;\n\t\t}\n\n\t\treturn true;\n\t}\n\n\trefreshLayout(): void\n\t{\n\t\t// try to refresh layout via vue reactivity, if possible:\n\t\tif (this.#layoutComponent)\n\t\t{\n\t\t\tthis.#layoutComponent.setLayout(this.getLayout().asPlainObject());\n\t\t\tfor (const controller of this.#controllers)\n\t\t\t{\n\t\t\t\tcontroller.onAfterItemRefreshLayout(this);\n\t\t\t}\n\t\t\tthis.#layoutComponent.showLoader(false);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tsuper.refreshLayout();\n\t\t}\n\t}\n\n\tforceRefreshLayout(): void\n\t{\n\t\tconst bindTo = this.getWrapper()?.nextSibling;\n\t\tthis.clearLayout();\n\t\tthis.layout({anchor: bindTo, useAnchorNextSibling: false});\n\t}\n\n\tgetLayoutContentBlockById(id: string): ?Object\n\t{\n\t\treturn this.#layoutComponent.getContentBlockById(id);\n\t}\n\n\tgetLogo(): ?Object\n\t{\n\t\treturn this.#layoutComponent.getLogo();\n\t}\n\n\tgetLayoutFooterButtonById(id: string): ?Object\n\t{\n\t\treturn this.#layoutComponent.getFooterButtonById(id);\n\t}\n\n\tgetLayoutFooterMenu(): ?Object\n\t{\n\t\treturn this.#layoutComponent.getFooterMenu();\n\t}\n\n\tgetLayoutHeaderChangeStreamButton(): ?Object\n\t{\n\t\treturn this.#layoutComponent.getHeaderChangeStreamButton();\n\t}\n\n\thighlightContentBlockById(blockId: string, isHighlighted: boolean): void\n\t{\n\t\tthis.#layoutComponent.highlightContentBlockById(blockId, isHighlighted);\n\t}\n\n\tclearLayout(): void\n\t{\n\t\tfor (const controller of this.#controllers)\n\t\t{\n\t\t\tcontroller.onBeforeItemClearLayout(this);\n\t\t}\n\t\tthis.#layoutApp.unmount();\n\t\tthis.#layoutApp = null;\n\t\tthis.#layoutComponent = null;\n\t\tsuper.clearLayout();\n\t}\n\n\tgetCreatedDate(): Date\n\t{\n\t\tconst timestamp = this.#timestamp ? this.#timestamp : Date.now() / 1000;\n\n\t\treturn BX.prop.extractDate(DatetimeConverter.createFromServerTimestamp(timestamp).toUserTime().getValue());\n\t}\n\n\tgetSourceId(): number\n\t{\n\t\tlet id = this.getId();\n\t\tif (!Type.isInteger(id))\n\t\t{\n\t\t\t// id is like ACTIVITY_12\n\t\t\tid = Text.toInteger(id.replace(/^\\D+/g, ''));\n\t\t}\n\n\t\treturn id;\n\t}\n\n\t#initLayoutApp(): void\n\t{\n\t\tif (!this.#layoutApp)\n\t\t{\n\t\t\tthis.#layoutApp = BitrixVue.createApp(Item, this.#getLayoutAppProps());\n\n\t\t\tconst contentBlockComponents = this.#getContentBlockComponents();\n\t\t\tfor (const componentName in contentBlockComponents)\n\t\t\t{\n\t\t\t\tthis.#layoutApp.component(componentName, contentBlockComponents[componentName]);\n\t\t\t}\n\n\t\t\tthis.#layoutComponent = this.#layoutApp.mount(this.getWrapper());\n\t\t}\n\t}\n\n\t#getLayoutAppProps(): Object\n\t{\n\t\treturn {\n\t\t\tinitialLayout: this.getLayout().asPlainObject(),\n\t\t\tid: String(this.getId()),\n\t\t\tuseShortTimeFormat: this.#useShortTimeFormat,\n\t\t\tisReadOnly: this.isReadOnly(),\n\t\t\tcurrentUser: this.getCurrentUser(),\n\t\t\tstreamType: this.#streamType,\n\t\t\tonAction: this.#onLayoutAppAction.bind(this),\n\t\t};\n\t}\n\n\t#onLayoutAppAction(eventData: ?Object)\n\t{\n\t\tfor (const controller of this.#controllers)\n\t\t{\n\t\t\tcontroller.onItemAction(this, eventData);\n\t\t}\n\t}\n\n\t#getContentBlockComponents(): Object\n\t{\n\t\tlet components = {};\n\t\tfor (const controller of this.#controllers)\n\t\t{\n\t\t\tcomponents = Object.assign(components, controller.getContentBlockComponents(this));\n\t\t}\n\n\t\treturn components;\n\t}\n\n\tsetContainer(container): void\n\t{\n\t\tthis.#container = container;\n\t}\n\n\tgetContainer(): HTMLElement\n\t{\n\t\treturn this.#container;\n\t}\n\n\tgetDeadline(): ?Date\n\t{\n\t\tif (!this.#timestamp)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\treturn DatetimeConverter.createFromServerTimestamp(this.#timestamp).toUserTime().getValue();\n\t}\n\n\tgetSort(): Array\n\t{\n\t\treturn this.#sort;\n\t}\n\n\tisReadOnly(): boolean\n\t{\n\t\treturn this.#isReadOnly;\n\t}\n\n\tgetCurrentUser(): ?Object\n\t{\n\t\treturn this.#currentUser;\n\t}\n\n\tclone(): ConfigurableItem\n\t{\n\t\treturn ConfigurableItem.create(this.getId(), {\n\t\t\ttimelineId: this.#timelineId,\n\t\t\tcontainer: this.getContainer(),\n\t\t\titemClassName: this.#itemClassName,\n\t\t\tuseShortTimeFormat: this.#useShortTimeFormat,\n\t\t\tisReadOnly: this.#isReadOnly,\n\t\t\tcurrentUser: this.#currentUser,\n\t\t\tstreamType: this.#streamType,\n\t\t\tdata: {\n\t\t\t\ttype: this.#type,\n\t\t\t\ttimestamp: this.#timestamp,\n\t\t\t\tsort: this.#sort,\n\t\t\t\tlayout: this.getLayout().asPlainObject(),\n\t\t\t},\n\t\t});\n\t}\n\n\treloadFromServer(forceRefreshLayout: boolean = false): Promise\n\t{\n\t\tconst data = {\n\t\t\townerTypeId: this.#ownerTypeId,\n\t\t\townerId: this.#ownerId,\n\t\t};\n\t\tif (this.#streamType === StreamType.history || this.#streamType === StreamType.pinned)\n\t\t{\n\t\t\tdata.historyIds = [ this.getId() ];\n\t\t}\n\t\telse if (this.#streamType === StreamType.scheduled)\n\t\t{\n\t\t\tdata.activityIds = [ this.getId() ];\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthrow new Error('Wrong stream type');\n\t\t}\n\n\t\treturn ajax.runAction('crm.timeline.item.load', {data})\n\t\t\t.then(response => {\n\t\t\t\tObject.values(response.data).forEach(item => {\n\t\t\t\t\tif (item.id === this.getId())\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.setData(item);\n\t\t\t\t\t\tif (forceRefreshLayout)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.forceRefreshLayout();\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.refreshLayout();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\treturn true;\n\t\t\t})\n\t\t\t.catch(err => {\n\t\t\t\tconsole.error(err);\n\t\t\t\treturn true;\n\t\t\t});\n\t}\n\n\tstatic create(id, settings): ConfigurableItem\n\t{\n\t\tconst self = new ConfigurableItem();\n\t\tself.initialize(id, settings);\n\t\treturn self;\n\t}\n}\n","import { Base } from './base';\nimport ConfigurableItem from '../configurable-item';\nimport { MessageBox, MessageBoxButtons } from 'ui.dialogs.messagebox';\n\nexport class Activity extends Base\n{\n\tgetDeleteActionMethod(): string\n\t{\n\t\treturn 'crm.timeline.activity.delete';\n\t}\n\n\tgetDeleteActionCfg(recordId: Number, ownerTypeId: Number, ownerId: Number): Object\n\t{\n\t\treturn {\n\t\t\tdata: {\n\t\t\t\tactivityId: recordId,\n\t\t\t\townerTypeId: ownerTypeId,\n\t\t\t\townerId: ownerId,\n\t\t\t}\n\t\t};\n\t}\n\n\tonItemAction(item: ConfigurableItem, actionParams: ActionParams): void\n\t{\n\t\tconst {action, actionType, actionData, animationCallbacks} = actionParams;\n\n\t\tif (actionType !== 'jsEvent')\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tif (action === 'Activity:Edit' && actionData && actionData.activityId)\n\t\t{\n\t\t\tthis.#editActivity(actionData.activityId);\n\t\t}\n\t\tif (action === 'Activity:View' && actionData && actionData.activityId)\n\t\t{\n\t\t\tthis.#viewActivity(actionData.activityId);\n\t\t}\n\t\tif (action === 'Activity:Delete' && actionData && actionData.activityId)\n\t\t{\n\t\t\tconst confirmationText = actionData.confirmationText ?? '';\n\t\t\tif (confirmationText)\n\t\t\t{\n\t\t\t\tMessageBox.show({\n\t\t\t\t\tmessage: confirmationText,\n\t\t\t\t\tmodal: true,\n\t\t\t\t\tbuttons: MessageBoxButtons.YES_NO,\n\t\t\t\t\tonYes: () => {\n\t\t\t\t\t\treturn this.runDeleteAction(actionData.activityId, actionData.ownerTypeId, actionData.ownerId, animationCallbacks);\n\t\t\t\t\t},\n\t\t\t\t\tonNo: (messageBox) => {\n\t\t\t\t\t\tmessageBox.close();\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.runDeleteAction(actionData.activityId, actionData.ownerTypeId, actionData.ownerId);\n\t\t\t}\n\t\t}\n\t}\n\n\t#viewActivity(id): void\n\t{\n\t\tconst editor = this.#getActivityEditor();\n\t\tif (editor && id)\n\t\t{\n\t\t\teditor.viewActivity(id);\n\t\t}\n\t}\n\n\t#editActivity(id): void\n\t{\n\t\tconst editor = this.#getActivityEditor();\n\t\tif (editor && id)\n\t\t{\n\t\t\teditor.editActivity(id);\n\t\t}\n\t}\n\n\t#getActivityEditor(): BX.CrmActivityEditor\n\t{\n\t\treturn BX.CrmActivityEditor.getDefault();\n\t}\n\n\tstatic isItemSupported(item: ConfigurableItem): boolean\n\t{\n\t\tconst itemType = item.getType();\n\n\t\treturn (\n\t\t\titemType.indexOf('Activity:') === 0  // for items with type started from `Activity:`\n\t\t\t|| itemType === 'TodoCreated' // TodoCreated can contain link to activity\n\t\t);\n\t}\n}\n","export class TextColor {\n\tstatic GREEN = 'green';\n\tstatic BASE_50 = 'base-50';\n\tstatic BASE_60 = 'base-60';\n\tstatic BASE_70 = 'base-70';\n\tstatic BASE_90 = 'base-90';\n}","export class TextWeight {\n\tstatic NORMAL = 'normal';\n\tstatic MEDIUM = 'medium';\n\tstatic BOLD = 'bold';\n}","export class TextSize {\n\tstatic XS = 'xs';\n\tstatic SM = 'sm';\n\tstatic MD = 'md';\n}","import { TextColor } from '../enums/text-color';\nimport { TextWeight } from '../enums/text-weight';\nimport { TextSize } from '../enums/text-size';\nimport {Text} from \"main.core\";\n\nexport default {\n\tprops: {\n\t\tvalue: String|Number,\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t},\n\t\tcolor: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t},\n\t\tweight: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: 'normal',\n\t\t},\n\t\tsize: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: 'md',\n\t\t},\n\t\tmultiline: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tcomputed: {\n\t\tclassName(): Array {\n\t\t\treturn [\n\t\t\t\t'crm-timeline__text-block',\n\t\t\t\tthis.colorClassname,\n\t\t\t\tthis.weightClassname,\n\t\t\t\tthis.sizeClassname,\n\t\t\t]\n\t\t},\n\t\tcolorClassname(): string {\n\t\t\tconst upperCaseColorProp = this.color ? this.color.toUpperCase() : '';\n\t\t\tconst color = TextColor[upperCaseColorProp] ? TextColor[upperCaseColorProp] : '';\n\t\t\treturn `--color-${color}`;\n\t\t},\n\n\t\tweightClassname(): string {\n\t\t\tconst upperCaseWeightProp = this.weight ? this.weight.toUpperCase() : '';\n\t\t\tconst weight = TextWeight[upperCaseWeightProp] ? TextWeight[upperCaseWeightProp] : TextWeight.NORMAL;\n\t\t\treturn `--weight-${weight}`\n\t\t},\n\n\t\tsizeClassname(): string {\n\t\t\tconst upperCaseWeightProp = this.size ? this.size.toUpperCase() : '';\n\t\t\tconst size = TextSize[upperCaseWeightProp] ? TextSize[upperCaseWeightProp] : TextSize.SM;\n\t\t\treturn `--size-${size}`;\n\t\t},\n\t\tencodedText(): string {\n\t\t\tlet text = Text.encode(this.value);\n\t\t\tif (this.multiline)\n\t\t\t{\n\t\t\t\ttext = text.replace(/\\n/g, '<br />');\n\t\t\t}\n\n\t\t\treturn text;\n\t\t}\n\t},\n\ttemplate: `\n\t\t<span\n\t\t\t:title=\"title\"\n\t\t\t:class=\"className\"\n\t\t\tv-html=\"encodedText\"\n\t\t></span>`\n};\n","import {Action} from \"../../action\";\n\nexport default {\n\tprops: {\n\t\ttext: String,\n\t\taction: Object,\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t},\n\t\tbold: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: false,\n\t\t}\n\t},\n\tcomputed: {\n\t\thref(): ?string\n\t\t{\n\t\t\tif (!this.action)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tconst action = new Action(this.action);\n\t\t\tif (action.isRedirect())\n\t\t\t{\n\t\t\t\treturn action.getValue();\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\t\tlinkAttrs(): Object\n\t\t{\n\t\t\tif (!this.action)\n\t\t\t{\n\t\t\t\treturn {};\n\t\t\t}\n\t\t\tconst action = new Action(this.action);\n\t\t\tif (!action.isRedirect())\n\t\t\t{\n\t\t\t\treturn {};\n\t\t\t}\n\t\t\tconst attrs = {\n\t\t\t\t'href': action.getValue(),\n\t\t\t};\n\t\t\tconst target = action.getActionParam('target');\n\t\t\tif (target)\n\t\t\t{\n\t\t\t\tattrs.target = target;\n\t\t\t}\n\n\t\t\treturn attrs;\n\t\t},\n\n\t\tclassName() {\n\t\t\treturn {\n\t\t\t\t'crm-timeline__card_link': true,\n\t\t\t\t'--bold': this.bold,\n\t\t\t}\n\t\t},\n\t},\n\tmethods: {\n\t\texecuteAction(): void\n\t\t{\n\t\t\tif (this.action)\n\t\t\t{\n\t\t\t\tconst action = new Action(this.action);\n\t\t\t\taction.execute(this);\n\t\t\t}\n\t\t}\n\t},\n\n\ttemplate:\n\t\t`\n\t\t\t<a\n\t\t\t\tv-if=\"href\"\n\t\t\t\tv-bind=\"linkAttrs\"\n\t\t\t\t:class=\"className\"\n\t\t\t\t:title=\"title\"\n\t\t\t>\n\t\t\t{{text}}\n\t\t\t</a>\n\t\t\t<span\n\t\t\t\tv-else\n\t\t\t\t@click=\"executeAction\"\n\t\t\t\t:class=\"className\"\n\t\t\t\t:title=\"title\"\n\t\t\t>\n\t\t\t\t{{text}}\n\t\t\t</span>\n\t\t`\n};\n","import Text from \"./text\";\nimport { DatetimeConverter } from \"crm.timeline.tools\";\nimport {Text as CoreTextHelper} from \"main.core\";\n\nexport default {\n\tprops: {\n\t\twithTime: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: true,\n\t\t},\n\t\tformat: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: null,\n\t\t},\n\t},\n\textends: Text,\n\tcomputed: {\n\t\tencodedText() {\n\t\t\tconst dateInUserTimezone = (DatetimeConverter.createFromServerTimestamp(this.value)).toUserTime();\n\n\t\t\treturn CoreTextHelper.encode(\n\t\t\t\tthis.format\n\t\t\t\t\t? dateInUserTimezone.toFormatString(this.format)\n\t\t\t\t\t: (\n\t\t\t\t\t\tthis.withTime\n\t\t\t\t\t\t\t? dateInUserTimezone.toDatetimeString({delimiter: ', '})\n\t\t\t\t\t\t\t: dateInUserTimezone.toDateString()\n\t\t\t\t\t)\n\t\t\t);\n\t\t},\n\t},\n\ttemplate: Text.template\n}\n","import {Dom} from \"main.core\";\n\nexport default {\n\tprops: {\n\t\ttitle: String,\n\t\tinline: Boolean,\n\t\twordWrap: Boolean,\n\t\tfixedWidth: Boolean,\n\t\tcontentBlock: Object,\n\t},\n\tcomputed: {\n\t\tclassName(): Object\n\t\t{\n\t\t\treturn {\n\t\t\t\t'crm-timeline__card-container_info': true,\n\t\t\t\t'--inline': this.inline,\n\t\t\t\t'--word-wrap': this.wordWrap,\n\t\t\t\t'--fixed-width': this.fixedWidth,\n\t\t\t}\n\t\t}\n\t},\n\tmethods: {\n\t\tisTitleCropped() {\n\t\t\tconst titleElem: Element = this.$refs.title;\n\n\t\t\treturn titleElem.scrollWidth > titleElem.clientWidth;\n\t\t},\n\t},\n\tmounted() {\n\t\tthis.$nextTick(() => {\n\t\t\tif (this.isTitleCropped())\n\t\t\t{\n\t\t\t\tDom.attr(this.$refs.title, 'title', this.title);\n\t\t\t}\n\t\t});\n\t},\n\ttemplate:\n\t\t`\n\t\t\t<div :class=\"className\">\n\t\t\t\t<div ref=\"title\" class=\"crm-timeline__card-container_info-title\">{{ title }}</div>\n\t\t\t\t<div class=\"crm-timeline__card-container_info-value\">\n\t\t\t\t\t<component :is=\"contentBlock.rendererName\" v-bind=\"contentBlock.properties\"></component>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`\n};\n","import {Type} from 'main.core';\n\nexport default {\n\tprops: {\n\t\tblocks: Object,\n\t},\n\tmounted() {\n\t\tconst blocks = this.$refs.blocks;\n\t\tthis.visibleBlocks.forEach((block, index) => {\n\t\t\tif (Type.isDomNode(blocks[index].$el))\n\t\t\t{\n\t\t\t\tblocks[index].$el.setAttribute('data-id', block.id);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthrow new Error('Vue component \"' + block.rendererName + '\" was not found');\n\t\t\t}\n\t\t});\n\t},\n\tcomputed: {\n\t\tvisibleBlocks(): Array\n\t\t{\n\t\t\treturn Object.keys(this.blocks)\n\t\t\t\t.map((id) => ({id, ...this.blocks[id]}))\n\t\t\t\t.filter((item) => (item.scope !== 'mobile'))\n\t\t\t;\n\t\t},\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<span class=\"crm-timeline-block-line-of-texts\">\n\t\t\t<span\n\t\t\t\tv-for=\"(block) in visibleBlocks\"\n\t\t\t\t:key=\"block.id\"\n\t\t\t>\n\t\t\t\t<component :is=\"block.rendererName\"\n\t\t\t\t\t\t   v-bind=\"block.properties\"\n\t\t\t\t\t\t   ref=\"blocks\"/>\n\t\t\t<span>&nbsp;</span>\n\t\t\t</span>\n\t\t</span>`\n};\n","export class LogoType {\n\tstatic CALL_AUDIO_PLAY = 'call-play-record';\n\tstatic CALL_AUDIO_PAUSE = 'call-pause-record';\n}\n","import {AudioPlayer} from 'ui.vue3.components.audioplayer';\nimport {BitrixVue} from 'ui.vue3';\nimport {Menu} from 'main.popup';\nimport {Dom, bind, unbind} from 'main.core';\nimport { LogoType } from '../enums/logo-type';\n\nconst defaultPlaybackRateValues = [0.5, 0.7, 1.0, 1.2, 1.5, 1.7, 2.0];\n\nexport const TimelineAudio = BitrixVue.cloneComponent(AudioPlayer, {\n\tprops: {\n\t\tplaybackRateValues: {\n\t\t\ttype: Array,\n\t\t\trequired: false,\n\t\t\tdefault: () => defaultPlaybackRateValues,\n\t\t},\n\t\tisShowPlaybackRateMenu: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: true,\n\t\t},\n\t\trecordName: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t},\n\n\t\tmini: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\t...this.parentData(),\n\t\t\tplaybackRate: defaultPlaybackRateValues[2],\n\t\t\tisSeeking: false,\n\t\t}\n\t},\n\tcomputed: {\n\t\tcontainerClassname() {\n\t\t\treturn [\n\t\t\t\t'crm-timeline__audioplayer-contianer',\n\t\t\t\t'ui-vue-audioplayer-container', {\n\t\t\t\t'ui-vue-audioplayer-container-dark': this.isDark,\n\t\t\t\t'ui-vue-audioplayer-container-mobile': this.isMobile,\n\t\t\t\t'--mini': this.mini,\n\t\t\t}];\n\t\t},\n\t\tcontrolClassname() {\n\t\t\treturn [\n\t\t\t\t'ui-vue-audioplayer-control',\n\t\t\t\t'ui-btn-icon-start', {\n\t\t\t\t'ui-vue-audioplayer-control-loader': this.loading,\n\t\t\t\t'ui-vue-audioplayer-control-play': !this.loading && this.state !== this.State.play,\n\t\t\t\t'ui-vue-audioplayer-control-pause': !this.loading && this.state === this.State.play,\n\t\t\t}];\n\t\t},\n\t\ttimeCurrentClassname() {\n\t\t\treturn [\n\t\t\t\t'ui-vue-audioplayer-time',\n\t\t\t\t'ui-vue-audioplayer-time-current',\n\t\t\t\t{\n\t\t\t\t\t'--is-playing': this.state === this.State.play,\n\t\t\t\t},\n\t\t\t];\n\t\t},\n\n\t\ttotalTimeClassname() {\n\t\t\treturn [\n\t\t\t\t'ui-vue-audioplayer-total-time',\n\t\t\t]\n\t\t},\n\n\t\tprogressPosition() {\n\t\t\treturn `width: ${this.progressInPixel}px;`;\n\t\t},\n\n\t\tseekPosition() {\n\t\t\tconst minSeekWidth = 20;\n\t\t\tconst seekWidth = this.$refs.seek?.offsetWidth ? this.$refs.seek.offsetWidth : minSeekWidth;\n\n\t\t\treturn `left: ${this.progressInPixel - (seekWidth / 2)}px;`;\n\t\t},\n\n\t\tformatTimeCurrent() {\n\t\t\treturn this.formatTime(this.timeCurrent);\n\t\t},\n\n\t\tformatTimeTotal() {\n\t\t\treturn this.formatTime(this.timeTotal);\n\t\t},\n\n\t\tplaybackRateMenuItems() {\n\t\t\treturn this.playbackRateValues.map((rate) => {\n\t\t\t\treturn this.createPlaybackRateMenuItem({\n\t\t\t\t\ttext: this.getPlaybackRateOptionText(rate),\n\t\t\t\t\trate,\n\t\t\t\t\tisActive: rate === this.playbackRate,\n\t\t\t\t})\n\t\t\t});\n\t\t},\n\t},\n\tmethods: {\n\t\tchangePlaybackRate(playbackRate: number) {\n\t\t\tthis.playbackRate = playbackRate;\n\t\t\tif (this.$refs?.source?.playbackRate)\n\t\t\t{\n\t\t\t\tthis.$refs.source.playbackRate = playbackRate;\n\t\t\t}\n\t\t},\n\n\t\tcreatePlaybackRateMenuItem(options = {}) {\n\t\t\tconst rate = options.rate || 1;\n\t\t\tconst text = options.text || '';\n\t\t\tconst isActive = options.isActive || false;\n\t\t\tconst className = `playback-speed-menu-item ${isActive ? 'menu-popup-item-accept-sm' : ''}`;\n\n\t\t\treturn {\n\t\t\t\ttext: text,\n\t\t\t\tclassName,\n\t\t\t\tonclick: (event, item) => {\n\t\t\t\t\tthis.changePlaybackRate(rate);\n\t\t\t\t\titem.menuWindow.popupWindow.close();\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tgetPlaybackRateOptionText(rate: number): string {\n\t\t\treturn this.isFloat(rate) ? `${rate}x` : `${rate}.0x`;\n\t\t},\n\n\t\tshowPlaybackRateMenu() {\n\t\t\tconst menu = new Menu({\n\t\t\t\tid: `12xx${this.id}`,\n\t\t\t\tclassName: 'crm-timeline__playback-speed-menu_scope',\n\t\t\t\twidth: 100,\n\t\t\t\tbindElement: this.$refs.playbackRateButtonContainer,\n\t\t\t\tevents: {\n\t\t\t\t\tonPopupShow: ()=> {\n\t\t\t\t\t\tconst {width: btnContainerWidth} = Dom.getPosition(this.$refs.playbackRateButtonContainer);\n\t\t\t\t\t\tconst popupWindow = menu.getPopupWindow();\n\n\t\t\t\t\t\tpopupWindow.setOffset({\n\t\t\t\t\t\t\toffsetLeft: btnContainerWidth / 2,\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tpopupWindow.adjustPosition();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tangle: {\n\t\t\t\t\tposition: 'top',\n\t\t\t\t},\n\t\t\t\toffsetLeft: 0,\n\t\t\t\titems: this.playbackRateMenuItems,\n\t\t\t});\n\n\t\t\tmenu.show();\n\t\t},\n\n\t\tisFloat(n: number) {\n\t\t\treturn n % 1 !== 0;\n\t\t},\n\n\t\tstartSeeking(event) {\n\t\t\tthis.isSeeking = true;\n\t\t\tconst {clientX} = event;\n\t\t\tthis.source().pause();\n\n\t\t\tbind(document, 'mouseup', this.finishSeeking);\n\t\t\tbind(document, 'mousemove', this.seeking);\n\t\t\tthis.setSeekByCursor(clientX);\n\t\t},\n\n\t\tseeking(event) {\n\t\t\tif (!this.isSeeking)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst timeline = this.$refs.track;\n\t\t\tconst {clientX} = event;\n\n\t\t\tconst {left, right, width} = Dom.getPosition(timeline);\n\t\t\tif (clientX < left)\n\t\t\t{\n\t\t\t\tthis.seek = 0;\n\t\t\t}\n\t\t\telse if (clientX > right)\n\t\t\t{\n\t\t\t\tthis.seek = width - 1;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.seek = clientX - left;\n\t\t\t}\n\n\t\t\tthis.setPosition();\n\n\t\t\tevent.preventDefault();\n\t\t},\n\n\t\tfinishSeeking() {\n\t\t\tthis.isSeeking = false;\n\t\t\tthis.setPosition();\n\t\t\tthis.source().play();\n\t\t\tunbind(document, 'mouseup', this.finishSeeking);\n\t\t\tunbind(document, 'mousemove', this.seeking);\n\t\t},\n\n\t\tsetSeekByCursor(x: number) {\n\t\t\tconst timeline = this.$refs.track;\n\t\t\tconst {clientX} = event;\n\n\t\t\tconst {left, right, width} = Dom.getPosition(timeline);\n\t\t\tif (clientX < left)\n\t\t\t{\n\t\t\t\tthis.seek = 0;\n\t\t\t}\n\t\t\telse if (x > right)\n\t\t\t{\n\t\t\t\tthis.seek = width;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.seek = clientX - left;\n\t\t\t}\n\t\t},\n\n\t\tsetPosition(event)\n\t\t{\n\t\t\tif (!this.loaded)\n\t\t\t{\n\t\t\t\tthis.loadFile(true);\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tconst pixelPerPercent = this.$refs.track.offsetWidth / 100;\n\n\t\t\tthis.setProgress(this.seek / pixelPerPercent, this.seek);\n\n\t\t\tthis.source().currentTime = this.timeTotal/100*this.progress;\n\t\t},\n\n\t\tsetProgress(percent, pixel = -1)\n\t\t{\n\t\t\tif (this.mini)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.progress = percent;\n\t\t\tthis.progressInPixel = pixel > 0? pixel: Math.round(this.$refs.track.offsetWidth / 100 * percent);\n\t\t},\n\n\t\tchangeLogoIcon(icon: String)\n\t\t{\n\t\t\tif (!this.$parent || !this.$parent.getLogo)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst logo = this.$parent.getLogo();\n\t\t\tif (!logo)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlogo.setIcon(icon);\n\t\t},\n\n\t\taudioEventRouterWrapper(eventName: String, event)\n\t\t{\n\t\t\tthis.audioEventRouter(eventName, event);\n\n\t\t\tif (eventName === 'play')\n\t\t\t{\n\t\t\t\tthis.changeLogoIcon(LogoType.CALL_AUDIO_PAUSE);\n\t\t\t}\n\n\t\t\tif (eventName === 'pause')\n\t\t\t{\n\t\t\t\tthis.changeLogoIcon(LogoType.CALL_AUDIO_PLAY);\n\t\t\t}\n\t\t}\n\t},\n\n\ttemplate: `\n\t\t<div\n\t\t\t:class=\"containerClassname\"\n\t\t\tref=\"body\"\n\t\t>\n\t\t\t<div class=\"ui-vue-audioplayer-controls-container\">\n\t\t\t\t<button :class=\"controlClassname\" @click=\"clickToButton\">\n\t\t\t\t\t<svg\n\t\t\t\t\t\tv-if=\"state !== State.play\"\n\t\t\t\t\t\tclass=\"ui-vue-audioplayer-control-icon\"\n\t\t\t\t\t\twidth=\"9\"\n\t\t\t\t\t\theight=\"12\"\n\t\t\t\t\t\tviewBox=\"0 0 9 12\"\n\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M8.52196 5.40967L1.77268 0.637568C1.61355 0.523473 1.40621 0.510554 1.23498 0.604066C1.06375 0.697578 0.957151 0.881946 0.958524 1.0822V10.6259C0.956507 10.8265 1.06301 11.0114 1.23449 11.105C1.40597 11.1987 1.61368 11.1854 1.77268 11.0706L8.52196 6.29847C8.66466 6.19871 8.75016 6.0322 8.75016 5.85407C8.75016 5.67593 8.66466 5.50942 8.52196 5.40967Z\"/>\n\t\t\t\t\t</svg>\n\t\t\t\t\t<svg\n\t\t\t\t\t\tv-else\n                        class=\"ui-vue-audioplayer-control-icon\"\n\t\t\t\t\t\twidth=\"8\"\n\t\t\t\t\t\theight=\"10\"\n\t\t\t\t\t\tviewBox=\"0 0 8 10\"\n\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<rect width=\"2\" height=\"9\" x=\"0%\"></rect>\n\t\t\t\t\t\t<rect width=\"2\" height=\"9\" x=\"55%\"></rect>\n\t\t\t\t\t</svg>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t\t<div class=\"ui-vue-audioplayer-timeline-container\">\n\t\t\t\t<div v-if=\"!mini\" class=\"ui-vue-audioplayer-record-name\">{{ recordName }}</div>\n\t\t\t\t<div v-if=\"!mini\" class=\"ui-vue-audioplayer-track-container\" @mousedown=\"startSeeking\" ref=\"track\">\n\t\t\t\t\t<div class=\"ui-vue-audioplayer-track-mask\"></div>\n\t\t\t\t\t<div class=\"ui-vue-audioplayer-track\" :style=\"progressPosition\"></div>\n\t\t\t\t\t<div @mousedown=\"startSeeking\" class=\"ui-vue-audioplayer-track-seek\" :style=\"seekPosition\">\n\t\t\t\t\t\t<div ref=\"seek\" class=\"ui-vue-audioplayer-track-seek-icon\"></div>\n\t\t\t\t\t</div>\n<!--\t\t\t\t\t<div class=\"ui-vue-audioplayer-track-event\" @mousemove=\"seeking\"></div>-->\n\t\t\t\t</div>\n\t\t\t\t<div :class=\"totalTimeClassname\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tv-if=\"(mini && timeCurrent > 0) || !mini\"\n\t\t\t\t\t\tref=\"currentTime\"\n\t\t\t\t\t\t:class=\"timeCurrentClassname\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<span style=\"position: absolute; right: 0; top: 0;\">\n\t\t\t\t\t\t\t{{formatTimeCurrent}}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span style=\"opacity: 0;\">{{formatTimeTotal}}</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<span class=\"ui-vue-audioplayer-time-divider\" v-if=\"mini && timeCurrent > 0\">&nbsp;/&nbsp;</span>\n\t\t\t\t\t<div ref=\"totalTime\" class=\"ui-vue-audioplayer-time\">{{formatTimeTotal}}</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div\n\t\t\t\tv-if=\"!mini\"\n\t\t\t\t@click=\"showPlaybackRateMenu\"\n\t\t\t\tref=\"playbackRateButtonContainer\"\n\t\t\t\tclass=\"ui-vue-audioplayer_playback-speed-menu-container\"\n\t\t\t>\n\t\t\t\t{{ getPlaybackRateOptionText(playbackRate) }}\n\t\t\t</div>\n\t\t\t<audio\n\t\t\t\tv-if=\"src\"\n\t\t\t\t:src=\"src\"\n\t\t\t\tclass=\"ui-vue-audioplayer-source\"\n\t\t\t\tref=\"source\"\n\t\t\t\t:preload=\"preload\"\n\t\t\t\t@abort=\"audioEventRouter('abort', $event)\"\n\t\t\t\t@error=\"audioEventRouter('error', $event)\"\n\t\t\t\t@suspend=\"audioEventRouter('suspend', $event)\"\n\t\t\t\t@canplay=\"audioEventRouter('canplay', $event)\"\n\t\t\t\t@canplaythrough=\"audioEventRouter('canplaythrough', $event)\"\n\t\t\t\t@durationchange=\"audioEventRouter('durationchange', $event)\"\n\t\t\t\t@loadeddata=\"audioEventRouter('loadeddata', $event)\"\n\t\t\t\t@loadedmetadata=\"audioEventRouter('loadedmetadata', $event)\"\n\t\t\t\t@timeupdate=\"audioEventRouter('timeupdate', $event)\"\n\t\t\t\t@play=\"audioEventRouterWrapper('play', $event)\"\n\t\t\t\t@playing=\"audioEventRouter('playing', $event)\"\n\t\t\t\t@pause=\"audioEventRouterWrapper('pause', $event)\"\n\t\t\t></audio>\n\t\t</div>\n\t`\n});\n","export class ClientMark\n{\n\tstatic POSITIVE = 'positive';\n\tstatic NEUTRAL = 'neutral';\n\tstatic NEGATIVE = 'negative';\n}\n","import {ClientMark as ClientMarkType} from '../enums/client-mark';\n\nexport const ClientMark = {\n\tprops: {\n\t\tmark: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: ClientMarkType.POSITIVE,\n\t\t},\n\n\t\ttext: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t},\n\n\t},\n\tcomputed: {\n\t\tclassName(): Object {\n\t\t\treturn {\n\t\t\t\t'crm-timeline__client-mark': true,\n\t\t\t\t'--positive-mark': this.mark === ClientMarkType.POSITIVE,\n\t\t\t\t'--neutral-mark': this.mark === ClientMarkType.NEUTRAL,\n\t\t\t\t'--negative-mark': this.mark === ClientMarkType.NEGATIVE,\n\t\t\t}\n\t\t},\n\n\t\ticonClassname() {\n\t\t\treturn {\n\t\t\t\t'crm-timeline__client-mark_icon': true,\n\t\t\t\t'--flipped': this.mark === ClientMarkType.NEGATIVE,\n\t\t\t}\n\t\t},\n\n\n\t},\n\ttemplate: `\n\t\t<div :class=\"className\">\n\t\t\t<i class=\"crm-timeline__client-mark_icon-wrapper\">\n\t\t\t\t<svg :class=\"iconClassname\" width=\"11.35\" height=\"11.36\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t\t\t<path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M14.8367 6.7166L11.2351 6.71731C11.1314 6.71731 11.0313 6.65735 10.9925 6.56213C10.8303 6.15654 10.8366 5.69947 11.0144 5.29671C11.3127 4.42841 11.3466 3.49029 11.1124 2.60224C10.8676 1.9914 10.8028 0.875521 9.67347 0.82403C9.32009 0.876226 9.01184 1.08854 8.8341 1.39819C8.80235 1.45321 8.78895 1.5181 8.78895 1.58088C8.78895 1.58088 8.84085 2.6644 8.78895 3.41764C8.73706 4.17087 7.29571 6.08954 6.37945 7.30769C6.32161 7.38528 6.24049 7.43607 6.14456 7.45088C5.80104 7.50232 5.14581 7.58943 4.90962 7.62062C4.85434 7.62792 4.82201 7.69735 4.82201 7.72994C4.82201 9.2527 4.82201 11.5306 4.82201 14.5636C4.82201 14.5887 4.85234 14.6435 4.90623 14.6524C5.09126 14.6829 5.55408 14.7676 6.02112 14.9178C6.60798 15.1061 7.0968 15.5519 8.07513 15.882C8.12662 15.8997 8.18375 15.9088 8.23807 15.9088H12.8321C13.4253 15.803 13.8668 15.2959 13.8972 14.6872C13.9056 14.3479 13.8379 14.0121 13.699 13.7039C13.6792 13.6594 13.7053 13.6129 13.7533 13.6037C14.3422 13.4965 15.0786 12.3785 14.1715 11.4778C14.1476 11.4545 14.1518 11.4228 14.1842 11.4143C14.6843 11.2866 15.0674 10.8874 15.1844 10.3894C15.2296 10.199 15.2134 10.0022 15.1569 9.81524C15.0906 9.59235 14.9848 9.38356 14.8445 9.19735C14.8092 9.15079 14.8289 9.09013 14.8854 9.07179C15.3834 8.90321 15.7262 8.4271 15.7226 7.88538C15.7798 7.35424 15.353 6.71731 14.8367 6.7166ZM3.412 7.00439H0.808518C0.673089 7.00439 0.570107 7.1243 0.593384 7.25479L2.10567 15.7508C2.12895 15.8813 2.24392 15.9766 2.37865 15.9766H3.34146C3.49029 15.9766 3.61091 15.8588 3.61091 15.7135L3.63207 7.22023C3.63207 7.10102 3.53403 7.00439 3.412 7.00439Z\"/>\n\t\t\t\t</svg>\n\t\t\t</i>\n\t\t\t<span class=\"crm-timeline__client-mark_text\">{{ text }}</span>\n\t\t</div>\n\t`\n}\n","import Text from './text';\nimport { CurrencyCore } from 'currency.currency-core';\nimport { Type } from 'main.core';\n\nexport default {\n\tprops: {\n\t\topportunity: Number,\n\t\tcurrencyId: String,\n\t},\n\tcomputed: {\n\t\tencodedText(): ?string\n\t\t{\n\t\t\tif (!Type.isNumber(this.opportunity) || !Type.isStringFilled(this.currencyId))\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn CurrencyCore.currencyFormat(this.opportunity, this.currencyId, true);\n\t\t}\n\t},\n\textends: Text,\n\ttemplate: `\n\t\t<span\n\t\t\tv-if=\"encodedText\"\n\t\t\t:class=\"className\"\n\t\t\tv-html=\"encodedText\"\n\t\t></span>`\n};\n","import Text from './text';\nimport { Action } from \"../../action\";\nimport {Runtime} from \"main.core\";\nimport {BitrixVue} from 'ui.vue3';\n\nexport default BitrixVue.cloneComponent(Text, {\n\tcomponents: {\n\t\tText,\n\t},\n\tprops: {\n\t\taction: Object,\n\t},\n\tdata(): Object {\n\t\treturn {\n\t\t\tisEdit: false,\n\t\t\tcurrentValue: this.value,\n\t\t\tinitialValue: this.value,\n\t\t\tactionTimeoutId: null,\n\t\t};\n\t},\n\tcomputed: {\n\t\ttextProps(): Object {\n\t\t\treturn {\n\t\t\t\t...this.$props,\n\t\t\t\tvalue: this.currentValue,\n\t\t\t};\n\t\t},\n\t},\n\tmethods: {\n\t\tenableEdit(): void\n\t\t{\n\t\t\tthis.cancelScheduledActionExecution();\n\n\t\t\tthis.isEdit = true;\n\n\t\t\tthis.$nextTick(() => {\n\t\t\t\tthis.$refs.input.focus();\n\t\t\t});\n\t\t},\n\t\tdisableEdit(): void\n\t\t{\n\t\t\tthis.isEdit = false;\n\n\t\t\tthis.scheduleActionExecution();\n\t\t},\n\n\t\tscheduleActionExecution(): void\n\t\t{\n\t\t\tthis.cancelScheduledActionExecution();\n\n\t\t\tthis.actionTimeoutId = setTimeout(this.executeAction.bind(this), 3 * 1000);\n\t\t},\n\t\tcancelScheduledActionExecution(): void\n\t\t{\n\t\t\tif (this.actionTimeoutId)\n\t\t\t{\n\t\t\t\tclearTimeout(this.actionTimeoutId);\n\t\t\t\tthis.actionTimeoutId = null;\n\t\t\t}\n\t\t},\n\t\texecuteAction(): void\n\t\t{\n\t\t\tif (!this.action || this.currentValue === this.initialValue)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// to avoid unintended props mutation\n\t\t\tconst actionDescription = Runtime.clone(this.action);\n\n\t\t\tactionDescription.actionParams ??= {};\n\t\t\tactionDescription.actionParams.value = this.currentValue;\n\n\t\t\tconst action = new Action(actionDescription);\n\t\t\taction.execute(this);\n\n\t\t\tthis.initialValue = this.currentValue;\n\t\t},\n\t},\n\ttemplate: `\n\t\t\t<input\n\t\t\t\tv-if=\"isEdit\"\n\t\t\t\tref=\"input\"\n\t\t\t\ttype=\"text\"\n\t\t\t\tv-model.trim=\"currentValue\"\n\t\t\t\t@focusout=\"disableEdit\"\n\t\t\t>\n\t\t\t<Text\n\t\t\t\tv-else\n\t\t\t\tv-bind=\"textProps\"\n\t\t\t\t@click=\"enableEdit\"\n\t\t\t/>\n\t\t`\n});\n\n","export class EditableDescriptionHeight {\n\tstatic SHORT = 'short';\n\tstatic LONG = 'long';\n}","export class EditableDescriptionBackgroundColor {\n\tstatic YELLOW = 'yellow';\n\tstatic WHITE = 'white';\n}\n","import { Action } from \"../../action\";\nimport { Browser, Runtime } from \"main.core\";\nimport { Button } from '../layout/button';\nimport { ButtonState } from '../enums/button-state';\nimport { ButtonType } from '../enums/button-type';\nimport { EditableDescriptionHeight } from \"../enums/editable-description-height\";\nimport { EditableDescriptionBackgroundColor } from \"../enums/editable-description-background-color\";\n\nexport const EditableDescription = {\n\tcomponents: {\n\t\tButton,\n\t},\n\tprops: {\n\t\ttext: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t},\n\t\tsaveAction: {\n\t\t\ttype: Object,\n\t\t\trequired: false,\n\t\t\tdefault: null,\n\t\t},\n\t\teditable: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: true,\n\t\t},\n\t\theight: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: EditableDescriptionHeight.SHORT,\n\t\t},\n\t\tbackgroundColor: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t}\n\t},\n\n\tdata() {\n\t\treturn {\n\t\t\tvalue: this.text,\n\t\t\toldValue: this.text,\n\t\t\tisEdit: false,\n\t\t\tisSaving: false,\n\t\t\tisLongText: false,\n\t\t\tisCollapsed: false,\n\t\t};\n\t},\n\n\tinject: ['isReadOnly', 'isLogMessage'],\n\n\tcomputed: {\n\t\tclassName()\n\t\t{\n\t\t\treturn [\n\t\t\t\t'crm-timeline__editable-text',\n\t\t\t\t[`${this.heightClassnameModifier}`, `${this.bgColorClassnameModifier}`],\n\t\t\t\t{\n\t\t\t\t'--is-read-only': this.isLogMessage,\n\t\t\t\t'--is-edit': this.isEdit,\n\t\t\t\t'--is-long': this.isLongText,\n\t\t\t\t'--is-expanded': this.isCollapsed || !this.isLongText,\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\n\t\theightClassnameModifier()\n\t\t{\n\t\t\tswitch (this.height)\n\t\t\t{\n\t\t\t\tcase EditableDescriptionHeight.LONG: return '--height-long';\n\t\t\t\tcase EditableDescriptionHeight.SHORT: return '--height-short';\n\t\t\t\tdefault: return '--height-short';\n\t\t\t}\n\t\t},\n\n\t\tbgColorClassnameModifier()\n\t\t{\n\t\t\tswitch (this.backgroundColor)\n\t\t\t{\n\t\t\t\tcase EditableDescriptionBackgroundColor.YELLOW: return '--bg-color-yellow';\n\t\t\t\tcase EditableDescriptionBackgroundColor.WHITE: return '--bg-color-white';\n\t\t\t\tdefault: return '';\n\t\t\t};\n\t\t},\n\n\t\tisEditable()\n\t\t{\n\t\t\treturn this.editable && this.saveAction && !this.isReadOnly;\n\t\t},\n\n\t\tsaveTextButtonProps()\n\t\t{\n\t\t\treturn {\n\t\t\t\tstate: this.saveTextButtonState,\n\t\t\t\ttype: ButtonType.PRIMARY,\n\t\t\t\ttitle: this.$Bitrix.Loc.getMessage('CRM_TIMELINE_ITEM_EDITABLE_DESCRIPTION_SAVE'),\n\t\t\t}\n\t\t},\n\n\t\tcancelEditingButtonProps()\n\t\t{\n\t\t\treturn {\n\t\t\t\ttype: ButtonType.LIGHT,\n\t\t\t\ttitle: this.$Bitrix.Loc.getMessage('CRM_TIMELINE_ITEM_EDITABLE_DESCRIPTION_CANCEL'),\n\t\t\t\tstate: this.isSaving ? ButtonState.DISABLED : ButtonState.DEFAULT,\n\t\t\t}\n\t\t},\n\n\t\tsaveTextButtonState()\n\t\t{\n\t\t\tconst trimValue = this.value.trim();\n\t\t\tif (trimValue.length === 0) {\n\t\t\t\treturn ButtonState.DISABLED;\n\t\t\t} else if (this.isSaving) {\n\t\t\t\treturn ButtonState.LOADING;\n\t\t\t} else {\n\t\t\t\treturn ButtonState.DEFAULT;\n\t\t\t}\n\n\t\t},\n\n\t\texpandButtonText()\n\t\t{\n\t\t\treturn this.isCollapsed\n\t\t\t\t? this.$Bitrix.Loc.getMessage('CRM_TIMELINE_ITEM_EDITABLE_DESCRIPTION_HIDE')\n\t\t\t\t: this.$Bitrix.Loc.getMessage('CRM_TIMELINE_ITEM_EDITABLE_DESCRIPTION_SHOW');\n\t\t},\n\n\t\tisEditButtonVisible(): Boolean\n\t\t{\n\t\t\treturn !(this.isReadOnly || this.isEdit);\n\t\t},\n\t},\n\n\tmethods: {\n\t\tstartEditing() {\n\t\t\tthis.isEdit = true;\n\t\t\tthis.isCollapsed = true;\n\t\t\tthis.$nextTick(() => {\n\t\t\t\tconst textarea = this.$refs.textarea;\n\t\t\t\tthis.adjustHeight(textarea);\n\t\t\t\ttextarea.focus();\n\t\t\t});\n\n\t\t\tthis.emitEvent('EditableDescription:StartEdit');\n\t\t},\n\n\t\temitEvent(eventName: string)\n\t\t{\n\t\t\tconst action = new Action({\n\t\t\t\ttype: 'jsEvent',\n\t\t\t\tvalue: eventName\n\t\t\t});\n\t\t\taction.execute(this);\n\t\t},\n\n\t\tadjustHeight(elem) {\n\t\t\telem.style.height = 0;\n\t\t\telem.style.height = (elem.scrollHeight)+\"px\";\n\t\t},\n\n\t\tonPressEnter(event) {\n\t\t\tif (\n\t\t\t\tevent.ctrlKey === true ||\n\t\t\t\t( Browser.isMac() && (event.metaKey === true || event.altKey === true) )\n\t\t\t)\n\t\t\t{\n\t\t\t\tthis.saveText();\n\t\t\t}\n\t\t},\n\n\t\tsaveText() {\n\t\t\tif (this.saveTextButtonState === ButtonState.DISABLED || this.saveTextButtonState === ButtonState.LOADING || !this.isEdit)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (this.value.trim() === this.oldValue)\n\t\t\t{\n\t\t\t\tthis.isEdit = false;\n\t\t\t\tthis.emitEvent('EditableDescription:FinishEdit');\n\t\t\t}\n\n\t\t\tthis.isSaving = true;\n\t\t\tconst encodedTrimText = this.value.trim();\n\n\t\t\tthis.executeSaveAction(encodedTrimText).then(() => {\n\t\t\t\tthis.isEdit = false;\n\t\t\t\tthis.oldValue = encodedTrimText;\n\t\t\t\tthis.value = encodedTrimText;\n\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\tthis.isLongText = this.checkIsLongText();\n\t\t\t\t});\n\t\t\t\tthis.emitEvent('EditableDescription:FinishEdit');\n\t\t\t}).finally(() => {\n\t\t\t\tthis.isSaving = false;\n\t\t\t});\n\t\t},\n\n\t\texecuteSaveAction(text: string): void {\n\t\t\tif (!this.saveAction)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!this.value)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// to avoid unintended props mutation\n\t\t\tconst actionDescription = Runtime.clone(this.saveAction);\n\n\t\t\tactionDescription.actionParams ??= {};\n\t\t\tactionDescription.actionParams.value = text;\n\n\t\t\tconst action = new Action(actionDescription);\n\n\t\t\treturn action.execute(this);\n\t\t},\n\n\t\tcancelEditing() {\n\t\t\tif (!this.isEdit || this.isSaving)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.value = this.oldValue;\n\t\t\tthis.isEdit = false;\n\t\t\tthis.emitEvent('EditableDescription:FinishEdit');\n\t\t},\n\n\t\tclearText() {\n\t\t\tif (this.isSaving)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.value = '';\n\t\t\tthis.$refs.textarea.focus();\n\t\t},\n\n\t\ttoggleIsCollapsed() {\n\t\t\tthis.isCollapsed = !this.isCollapsed;\n\t\t},\n\n\t\tcheckIsLongText() {\n\t\t\tconst textBlock = this.$refs.text;\n\t\t\tif (!textBlock) return false;\n\t\t\tconst textBlockMaxHeightStyle = window.getComputedStyle(textBlock).getPropertyValue('--crm-timeline__editable-text_max-height');\n\t\t\tconst textBlockMaxHeight = parseFloat(textBlockMaxHeightStyle.slice(0, -2));\n\t\t\tconst parentComputedStyles = this.$refs.rootElement ? window.getComputedStyle(this.$refs.rootElement) : {};\n\t\t\tconst parentHeight = this.$refs.rootElement?.offsetHeight -  parseFloat(parentComputedStyles.paddingTop) - parseFloat(parentComputedStyles.paddingBottom);\n\n\t\t\treturn parentHeight > textBlockMaxHeight;\n\t\t},\n\t},\n\n\twatch: {\n\t\ttext(newTextValue) {\n\t\t\t// update text from push\n\t\t\tthis.value = newTextValue;\n\t\t\tthis.oldValue = newTextValue;\n\t\t\tthis.$nextTick(() => {\n\t\t\t\tthis.isLongText = this.checkIsLongText();\n\t\t\t});\n\t\t},\n\n\t\tvalue() {\n\t\t\tif (!this.isEdit) return;\n\t\t\tthis.$nextTick(() => {\n\t\t\t\tthis.adjustHeight(this.$refs.textarea);\n\t\t\t});\n\t\t},\n\t},\n\n\tmounted() {\n\t\tthis.$nextTick(() => {\n\t\t\tthis.isLongText = this.checkIsLongText();\n\t\t});\n\t},\n\n\ttemplate: `\n\t\t<div class=\"crm-timeline__editable-text_wrapper\">\n\t\t\t<div ref=\"rootElement\" :class=\"className\">\n\t\t\t\t<button\n\t\t\t\t\tv-if=\"isEdit && isEditable\"\n\t\t\t\t\t:disabled=\"isSaving\"\n\t\t\t\t\t@click=\"clearText\"\n\t\t\t\t\tclass=\"crm-timeline__editable-text_clear-btn\"\n\t\t\t\t>\n\t\t\t\t\t<i class=\"crm-timeline__editable-text_clear-icon\"></i>\n\t\t\t\t</button>\n\t\t\t\t<button\n\t\t\t\t\tv-if=\"isLongText && !isEdit && isEditable && isEditButtonVisible\"\n\t\t\t\t\t:disabled=\"isSaving\"\n\t\t\t\t\t@click=\"startEditing\"\n\t\t\t\t\tclass=\"crm-timeline__editable-text_edit-btn\"\n\t\t\t\t>\n\t\t\t\t\t<i class=\"crm-timeline__editable-text_edit-icon\"></i>\n\t\t\t\t</button>\n\t\t\t\t<div class=\"crm-timeline__editable-text_inner\">\n\t\t\t\t\t<div class=\"crm-timeline__editable-text_content\">\n\t\t\t\t\t\t<textarea\n\t\t\t\t\t\t\tv-if=\"isEdit\"\n\t\t\t\t\t\t\tref=\"textarea\"\n\t\t\t\t\t\t\tv-model=\"value\"\n\t\t\t\t\t\t\t:disabled=\"!isEdit || isSaving\"\n\t\t\t\t\t\t\t:placeholder=\"$Bitrix.Loc.getMessage('CRM_TIMELINE_ITEM_EDITABLE_DESCRIPTION_PLACEHOLDER')\"\n\t\t\t\t\t\t\t@keydown.esc=\"cancelEditing\"\n\t\t\t\t\t\t\t@keydown.enter=\"onPressEnter\"\n\t\t\t\t\t\t\tclass=\"crm-timeline__editable-text_text\"\n\t\t\t\t\t\t></textarea>\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tv-else\n\t\t\t\t\t\t\tref=\"text\"\n\t\t\t\t\t\t\tclass=\"crm-timeline__editable-text_text\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{value}}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tv-if=\"!isEdit && !isLongText && isEditable && isEditButtonVisible\"\n\t\t\t\t\t\t\t@click=\"startEditing\"\n\t\t\t\t\t\t\tclass=\"crm-timeline__editable-text_text-edit-icon\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span class=\"crm-timeline__editable-text_edit-icon\"></span>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tv-if=\"isEdit\"\n\t\t\t\t\t\tclass=\"crm-timeline__editable-text_actions\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div class=\"crm-timeline__editable-text_action\">\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tv-bind=\"saveTextButtonProps\"\n\t\t\t\t\t\t\t\t@click=\"saveText\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"crm-timeline__editable-text_action\">\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tv-bind=\"cancelEditingButtonProps\"\n\t\t\t\t\t\t\t\t@click=\"cancelEditing\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<button\n\t\t\t\t\tv-if=\"isLongText && !isEdit\"\n\t\t\t\t\t@click=\"toggleIsCollapsed\"\n\t\t\t\t\tclass=\"crm-timeline__editable-text_collapse-btn\"\n\t\t\t\t>\n\t\t\t\t\t{{ expandButtonText }}\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t`\n};\n","import { DateTimeFormat } from \"main.date\";\nimport { Runtime } from \"main.core\";\nimport Link from './link';\nimport { Action } from \"../../action\";\nimport { DatetimeConverter } from \"crm.timeline.tools\";\n\nexport default {\n\tcomponents: {\n\t\tLink,\n\t},\n\tprops: {\n\t\tvalue: Number,\n\t\twithTime: Boolean,\n\t\taction: Object,\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tcurrentDate: this.value,\n\t\t\tinitialDate: this.value,\n\t\t\tactionTimeoutId: null,\n\t\t};\n\t},\n\tcomputed: {\n\t\tcurrentDateObject(): ?Date\n\t\t{\n\t\t\treturn this.currentDate ? new Date(this.currentDate * 1000) : null;\n\t\t},\n\t\tcurrentDateInSiteFormat(): ?string\n\t\t{\n\t\t\tif (!this.currentDateObject)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn DateTimeFormat.format(DatetimeConverter.getSiteDateFormat(), this.currentDateObject);\n\t\t},\n\t\ttextProps(): Object\n\t\t{\n\t\t\treturn {\n\t\t\t\ttext: this.currentDateInSiteFormat,\n\t\t\t};\n\t\t},\n\t},\n\tmethods: {\n\t\topenCalendar(event: PointerEvent): void\n\t\t{\n\t\t\tthis.cancelScheduledActionExecution();\n\n\t\t\t// eslint-disable-next-line bitrix-rules/no-bx\n\t\t\tBX.calendar({\n\t\t\t\tnode: event.target,\n\t\t\t\tvalue: this.currentDateInSiteFormat,\n\t\t\t\tbTime: this.withTime,\n\t\t\t\tbHideTime: !this.withTime,\n\t\t\t\tbSetFocus: false,\n\t\t\t\tcallback_after: (newDate: Date) => {\n\t\t\t\t\tthis.currentDate = Math.round(newDate.getTime() / 1000);\n\n\t\t\t\t\tthis.scheduleActionExecution();\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\tscheduleActionExecution(): void\n\t\t{\n\t\t\tthis.cancelScheduledActionExecution();\n\n\t\t\tthis.actionTimeoutId = setTimeout(this.executeAction.bind(this), 3 * 1000);\n\t\t},\n\t\tcancelScheduledActionExecution(): void\n\t\t{\n\t\t\tif (this.actionTimeoutId)\n\t\t\t{\n\t\t\t\tclearTimeout(this.actionTimeoutId);\n\t\t\t\tthis.actionTimeoutId = null;\n\t\t\t}\n\t\t},\n\t\texecuteAction(): void\n\t\t{\n\t\t\tif (!this.action)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.currentDate === this.initialDate)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// to avoid unintended props mutation\n\t\t\tconst actionDescription = Runtime.clone(this.action);\n\n\t\t\tactionDescription.actionParams ??= {};\n\t\t\tactionDescription.actionParams.value = this.currentDateObject;\n\n\t\t\tconst action = new Action(actionDescription);\n\t\t\taction.execute(this);\n\n\t\t\tthis.initialDate = this.currentDate;\n\t\t},\n\t},\n\ttemplate: `<Link @click=\"openCalendar\" v-bind=\"textProps\"></Link>`,\n};\n","import LineOfTextBlocks from './line-of-text-blocks';\nimport { AlertColor, AlertIcon } from 'ui.alerts';\n\nexport const PlayerAlert = {\n\tcomponents: {\n\t\tLineOfTextBlocks,\n\t},\n\tprops: {\n\t\tblocks: {\n\t\t\ttype: Object,\n\t\t\trequired: false,\n\t\t\tdefault: () => ({}),\n\t\t},\n\t\tcolor: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: AlertColor.DEFAULT,\n\t\t},\n\t\ticon: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: AlertIcon.NONE,\n\t\t},\n\t},\n\tcomputed: {\n\t\tcontainerClassname() {\n\t\t\treturn [\n\t\t\t\t'crm-timeline__player-alert',\n\t\t\t\t'ui-alert',\n\t\t\t\t'ui-alert-xs',\n\t\t\t\t'ui-alert-text-center',\n\t\t\t\tthis.color,\n\t\t\t\tthis.icon,\n\t\t\t]\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div :class=\"containerClassname\">\n\t\t\t<div class=\"ui-alert-message\">\n\t\t\t\t<LineOfTextBlocks :blocks=\"blocks\"></LineOfTextBlocks>\n\t\t\t</div>\n\t\t</div>\n\t`\n}","import {User} from '../layout/header/user';\nimport {Action} from '../../action';\nimport {Button} from '../layout/button';\nimport {ButtonState} from '../enums/button-state';\nimport {ButtonType} from '../enums/button-type';\nimport {Browser, Runtime, Event} from 'main.core';\nimport {MessageBox, MessageBoxButtons} from \"ui.dialogs.messagebox\";\nimport {TextCrop} from 'ui.textcrop';\n\nexport const Note = {\n\tcomponents: {\n\t\tUser,\n\t\tButton,\n\t},\n\tprops: {\n\t\tid: {\n\t\t\ttype: Number,\n\t\t\trequired: false,\n\t\t},\n\t\ttext: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t},\n\t\tdeleteConfirmationText: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t},\n\t\tsaveNoteAction: {\n\t\t\ttype: Object,\n\t\t},\n\t\tdeleteNoteAction: {\n\t\t\ttype: Object,\n\t\t},\n\t\tupdatedBy: {\n\t\t\ttype: Object,\n\t\t\trequired: false,\n\t\t},\n\t},\n\tdata()\n\t{\n\t\treturn {\n\t\t\tnote: this.text,\n\t\t\toldNote: this.text,\n\t\t\tisEdit: false,\n\t\t\tisExist: !!this.id,\n\t\t\tisSaving: false,\n\t\t\tisDeleting: false,\n\t\t\tisCollapsed: true,\n\t\t\tshortNoteLength: 113,\n\t\t}\n\t},\n\tinject: ['isReadOnly', 'currentUser'],\n\tcomputed: {\n\t\tnoteText() {\n\t\t\tif (this.isCollapsed)\n\t\t\t{\n\t\t\t\treturn this.shortNote;\n\t\t\t}\n\n\t\t\treturn this.note;\n\t\t},\n\n\t\tshortNote() {\n\t\t\tif (this.note.length > this.shortNoteLength)\n\t\t\t{\n\t\t\t\treturn `${this.note.slice(0, this.shortNoteLength)}...`;\n\t\t\t}\n\t\t\telse if (this.getNoteLineBreaksCount() > 2) {\n\t\t\t\tlet currentLineBreakerCount = 0;\n\t\t\t\tfor (let letterIndex = 0; letterIndex < this.note.length; letterIndex++)\n\t\t\t\t{\n\t\t\t\t\tconst letter = this.note[letterIndex];\n\t\t\t\t\tif (letter !== '\\n')\n\t\t\t\t\t{\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tcurrentLineBreakerCount++;\n\n\t\t\t\t\tif (currentLineBreakerCount === this.maxLineBreakerCount)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn `${this.note.slice(0, letterIndex)}...`;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn this.note;\n\t\t},\n\n\t\tmaxLineBreakerCount()\n\t\t{\n\t\t\treturn 3;\n\t\t},\n\n\t\texpandNoteBtnText() {\n\t\t\tif (this.isCollapsed)\n\t\t\t{\n\t\t\t\treturn this.$Bitrix.Loc.getMessage('CRM_TIMELINE_ITEM_NOTE_SHOW');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\treturn this.$Bitrix.Loc.getMessage('CRM_TIMELINE_ITEM_NOTE_HIDE');\n\t\t\t}\n\t\t},\n\t\tButtonType()\n\t\t{\n\t\t\treturn ButtonType;\n\t\t},\n\n\t\tisDeleteButtonVisible()\n\t\t{\n\t\t\treturn !(this.isReadOnly);\n\t\t},\n\n\t\tisEditButtonVisible()\n\t\t{\n\t\t\treturn !(this.isReadOnly || this.isEdit);\n\t\t},\n\n\t\tsaveButtonState()\n\t\t{\n\t\t\tif (this.isSaving)\n\t\t\t{\n\t\t\t\treturn ButtonState.LOADING;\n\t\t\t}\n\t\t\tif (this.note.trim().length > 0)\n\t\t\t{\n\t\t\t\treturn ButtonState.DEFAULT;\n\t\t\t}\n\n\t\t\treturn ButtonState.DISABLED;\n\t\t},\n\n\t\tcancelButtonState()\n\t\t{\n\t\t\tif (this.isSaving)\n\t\t\t{\n\t\t\t\treturn ButtonState.DISABLED;\n\t\t\t}\n\n\t\t\treturn ButtonState.DEFAULT;\n\t\t},\n\n\t\tisNoteVisible()\n\t\t{\n\t\t\treturn this.isExist || this.isEdit;\n\t\t},\n\n\t\tuser() {\n\t\t\tif (this.updatedBy)\n\t\t\t{\n\t\t\t\treturn this.updatedBy;\n\t\t\t}\n\t\t\tif (this.currentUser)\n\t\t\t{\n\t\t\t\treturn this.currentUser;\n\t\t\t}\n\t\t\treturn {\n\t\t\t\ttitle: '',\n\t\t\t\tdetailUrl: '',\n\t\t\t\timageUrl: '',\n\t\t\t};\n\t\t},\n\n\t\tisShowExpandBtn() {\n\t\t\treturn !this.isEdit && (this.note.length >  this.shortNoteLength || this.getNoteLineBreaksCount() > 2);\n\t\t}\n\t},\n\tmethods: {\n\t\ttoggleNoteLength() {\n\t\t\tthis.isCollapsed = !this.isCollapsed;\n\t\t},\n\n\t\tstartEditing()\n\t\t{\n\t\t\tthis.isEdit = true;\n\t\t\tthis.$nextTick(() => {\n\t\t\t\tthis.isCollapsed = false;\n\t\t\t\tconst textarea = this.$refs.noteText;\n\t\t\t\tthis.adjustHeight(textarea);\n\t\t\t\ttextarea.focus();\n\t\t\t});\n\n\t\t\tthis.executeAction({type: 'jsEvent', value: 'Note:StartEdit'});\n\t\t},\n\n\t\tadjustHeight(elem) {\n\t\t\telem.style.height = 0;\n\t\t\telem.style.height = (elem.scrollHeight)+\"px\";\n\t\t},\n\n\t\tsetEditMode(editMode: boolean)\n\t\t{\n\t\t\tconst isEdit = editMode ? !this.isReadOnly : false;\n\t\t\tif (isEdit !== this.isEdit)\n\t\t\t{\n\t\t\t\tif(isEdit)\n\t\t\t\t{\n\t\t\t\t\tthis.startEditing();\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.isEdit = false;\n\t\t\t\t\tthis.executeAction({type: 'jsEvent', value: 'Note:FinishEdit'})\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tonEnterHandle(event)\n\t\t{\n\t\t\tif (\n\t\t\t\tevent.ctrlKey === true ||\n\t\t\t\t( Browser.isMac() && (event.metaKey === true || event.altKey === true) )\n\t\t\t)\n\t\t\t{\n\t\t\t\tthis.saveNote();\n\t\t\t}\n\t\t},\n\n\t\tcancelEditing()\n\t\t{\n\t\t\tthis.note = this.oldNote;\n\t\t\tthis.isEdit = false;\n\t\t\tthis.executeAction({type: 'jsEvent', value: 'Note:FinishEdit'});\n\t\t},\n\n\t\tdeleteNote()\n\t\t{\n\t\t\tif (this.isSaving)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!this.isExist)\n\t\t\t{\n\t\t\t\tthis.cancelEditing();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.deleteConfirmationText && this.deleteConfirmationText.length)\n\t\t\t{\n\t\t\t\tMessageBox.show({\n\t\t\t\t\tmessage: this.deleteConfirmationText,\n\t\t\t\t\tmodal: true,\n\t\t\t\t\tbuttons: MessageBoxButtons.YES_NO,\n\t\t\t\t\tonYes: (messageBox) => {\n\t\t\t\t\t\tmessageBox.close();\n\t\t\t\t\t\tthis.executeDeleteAction();\n\t\t\t\t\t},\n\t\t\t\t\tonNo: (messageBox) => {\n\t\t\t\t\t\tmessageBox.close();\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.executeDeleteAction();\n\t\t\t}\n\t\t},\n\n\t\tsaveNote()\n\t\t{\n\t\t\tif (this.saveButtonState === ButtonState.DISABLED || this.isSaving || this.isDeleting)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (this.note === this.text)\n\t\t\t{\n\t\t\t\tthis.cancelEditing();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.isSaving = true;\n\t\t\tconst action = Runtime.clone(this.saveNoteAction);\n\t\t\taction.actionParams.text = this.note;\n\n\t\t\tthis.executeAction(action).then(({status}) =>\n\t\t\t{\n\t\t\t\tif (status === 'success')\n\t\t\t\t{\n\t\t\t\t\tthis.oldNote = this.$refs.noteText.value.trim();\n\t\t\t\t\tthis.isExist = true;\n\t\t\t\t\tthis.cancelEditing();\n\t\t\t\t}\n\t\t\t}).finally(() =>\n\t\t\t{\n\t\t\t\tthis.isSaving = false;\n\t\t\t});\n\t\t},\n\n\t\texecuteDeleteAction()\n\t\t{\n\t\t\tif (this.isSaving)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.isDeleting = true;\n\n\t\t\tthis.executeAction(this.deleteNoteAction).then(({status}) =>\n\t\t\t{\n\t\t\t\tif (status === 'success')\n\t\t\t\t{\n\t\t\t\t\tthis.oldNote = '';\n\t\t\t\t\tthis.isExist = false;\n\t\t\t\t\tthis.cancelEditing();\n\t\t\t\t}\n\t\t\t}).finally(() =>\n\t\t\t{\n\t\t\t\tthis.isDeleting = false;\n\t\t\t});\n\t\t},\n\n\t\texecuteAction(actionObject): Promise\n\t\t{\n\t\t\tif (!actionObject)\n\t\t\t{\n\t\t\t\tconsole.error('No action object to execute');\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst action = new Action(actionObject);\n\t\t\treturn action.execute(this);\n\t\t},\n\n\t\thandleWindowResize() {\n\t\t\tconst windowWidth = window.innerWidth;\n\n\t\t\tif (windowWidth > 1400)\n\t\t\t{\n\t\t\t\tthis.shortNoteLength = 250;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.shortNoteLength = 113;\n\t\t\t}\n\t\t},\n\n\t\tgetNoteLineBreaksCount() {\n\t\t\treturn this.note.split('').reduce((counter, elem) => {\n\t\t\t\treturn counter + (elem === '\\n' ? 1 : 0);\n\t\t\t}, 0);\n\t\t}\n\t},\n\twatch: {\n\t\tid(id)\n\t\t{\n\t\t\tthis.isExist = !!id;\n\t\t},\n\n\t\ttext(text)\n\t\t{\n\t\t\tthis.note = text;\n\t\t\tthis.oldNote = text;\n\t\t},\n\n\t\tnote() {\n\t\t\tif (!this.isEdit)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.$nextTick(() => {\n\t\t\t\tthis.adjustHeight(this.$refs.noteText);\n\t\t\t});\n\t\t},\n\n\t\tisEdit(value)\n\t\t{\n\t\t\tif (value)\n\t\t\t{\n\t\t\t\tthis.$nextTick(() => this.$refs.noteText.focus());\n\t\t\t}\n\t\t}\n\t},\n\n\tcreated() {\n\t\tthis.handleWindowResize();\n\t\tEvent.bind(window, 'resize', this.handleWindowResize);\n\t},\n\n\tdestroyed() {\n\t\tEvent.unbind(window, 'resize', this.handleWindowResize);\n\t},\n\n\ttemplate: `\n\t\t<div\n\t\t\tv-show=\"isNoteVisible\"\n\t\t\tclass=\"crm-timeline__card-note\"\n\t\t>\n\t\t\t<div class=\"crm-timeline__card-note_user\">\n\t\t\t\t<User v-bind=\"user\"></User>\n\t\t\t</div>\n\t\t\t<div class=\"crm-timeline__card-note_area\">\n\t\t\t\t<div class=\"crm-timeline__card-note_value\">\n\t\t\t\t\t\t<textarea\n\t\t\t\t\t\t\tv-if=\"isEdit\"\n\t\t\t\t\t\t\tv-model=\"note\"\n\t\t\t\t\t\t\t@keydown.esc.stop=\"cancelEditing\"\n\t\t\t\t\t\t\t@keydown.enter=\"onEnterHandle\"\n\t\t\t\t\t\t\t:disabled=\"!isEdit || isSaving\"\n\t\t\t\t\t\t\t:placeholder=\"$Bitrix.Loc.getMessage('CRM_TIMELINE_USER_NOTE_PLACEHOLDER')\"\n\t\t\t\t\t\t\tref=\"noteText\"\n\t\t\t\t\t\t\tclass=\"crm-timeline__card-note_text\"\n\t\t\t\t\t\t></textarea>\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tv-else\n\t\t\t\t\t\t\tref=\"noteText\"\n\t\t\t\t\t\t\tclass=\"crm-timeline__card-note_text\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{noteText}}\n\t\t\t\t\t\t</span>\n\t\n\t\t\t\t\t<span\n\t\t\t\t\t\tv-if=\"isEditButtonVisible\"\n\t\t\t\t\t\tclass=\"crm-timeline__card-note_edit\"\n\t\t\t\t\t\t@click.prevent.stop=\"startEditing\"\n\t\t\t\t\t>\n\t\t\t\t\t\t\t<i></i>\n\t\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<div v-if=\"isEdit\" class=\"crm-timeline__card-note__controls\">\n\t\t\t\t\t<div class=\"crm-timeline__card-note__control --save\">\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t@click=\"saveNote\"\n\t\t\t\t\t\t\t:state=\"saveButtonState\" :type=\"ButtonType.PRIMARY\"\n\t\t\t\t\t\t\t:title=\"$Bitrix.Loc.getMessage('CRM_TIMELINE_USER_NOTE_SAVE')\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"crm-timeline__card-note__control --cancel\">\n\t\t\t\t\t\t<Button @click=\"cancelEditing\"\n\t\t\t\t\t\t\t\t:type=\"ButtonType.LIGHT\"\n\t\t\t\t\t\t\t\t:state=\"cancelButtonState\"\n\t\t\t\t\t\t\t\t:title=\"$Bitrix.Loc.getMessage('CRM_TIMELINE_USER_NOTE_CANCEL')\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div v-if=\"isDeleteButtonVisible\" class=\"crm-timeline__card-note_cross\" @click=\"deleteNote\">\n\t\t\t\t<i></i>\n\t\t\t</div>\n\t\t\t<div v-if=\"isDeleting\" class=\"crm-timeline__card-note_dimmer\"></div>\n\t\t\t<div\n\t\t\t\tv-show=\"isShowExpandBtn\"\n\t\t\t\t@click=\"toggleNoteLength\"\n\t\t\t\tclass=\"crm-timeline__card-note_expand-note-btn\"\n\t\t\t>\n\t\t\t\t{{ expandNoteBtnText }}\n\t\t\t</div>\n\t\t</div>\n\t`\n};\n","import { Runtime } from \"main.core\";\nimport { Action } from \"../../action\";\nimport { DatetimeConverter } from \"crm.timeline.tools\";\nimport { DateTimeFormat } from \"main.date\";\nimport { TimestampConverter } from \"crm.datetime\";\n\nexport const DatePillColor = Object.freeze({\n\tDEFAULT: 'default',\n\tWARNING: 'warning',\n});\n\n\nexport default {\n\tprops: {\n\t\tvalue: Number,\n\t\twithTime: Boolean,\n\t\tbackgroundColor: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: DatePillColor.DEFAULT,\n\t\t\tvalidator(value: string) {\n\t\t\t\treturn Object.values(DatePillColor).includes(value);\n\t\t\t},\n\t\t},\n\t\taction: Object|null,\n\t},\n\tinject: ['isReadOnly'],\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tcurrentTimestamp: this.value,\n\t\t\tinitialTimestamp: this.value,\n\t\t\tactionTimeoutId: null,\n\t\t};\n\t},\n\tcomputed: {\n\t\tclassName() {\n\t\t\treturn [\n\t\t\t\t'crm-timeline__date-pill',\n\t\t\t\t`--color-${this.backgroundColor}`, {\n\t\t\t\t'--readonly': this.isPillReadonly,\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\tformattedDate(): string {\n\t\t\tif (!this.currentTimestamp)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn DatetimeConverter.createFromServerTimestamp(this.currentTimestamp).toUserTime().toDatetimeString({ withDayOfWeek: true, delimiter:', ' })\n\t\t},\n\t\tcurrentDateInSiteFormat(): ?string\n\t\t{\n\t\t\treturn DateTimeFormat.format(\n\t\t\t\tthis.withTime\n\t\t\t\t\t? DatetimeConverter.getSiteDateTimeFormat()\n\t\t\t\t\t: DatetimeConverter.getSiteDateFormat(),\n\t\t\t\t(DatetimeConverter.createFromServerTimestamp(this.currentTimestamp)).toUserTime().getValue()\n\t\t\t);\n\t\t},\n\n\t\tcalendarParams(): Object {\n\t\t\treturn {\n\t\t\t\tvalue: this.currentDateInSiteFormat,\n\t\t\t\tbTime: this.withTime,\n\t\t\t\tbHideTime: !this.withTime,\n\t\t\t\tbSetFocus: false,\n\t\t\t}\n\t\t},\n\n\t\tisPillReadonly(): boolean {\n\t\t\treturn this.isReadOnly || !this.action;\n\t\t}\n\t},\n\twatch: {\n\t\tvalue(newDate): void // update date from push\n\t\t{\n\t\t\tthis.initialTimestamp = newDate;\n\t\t\tthis.currentTimestamp = newDate;\n\t\t}\n\t},\n\tmethods: {\n\t\topenCalendar(event: PointerEvent): void\n\t\t{\n\t\t\tif (this.isPillReadonly)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.cancelScheduledActionExecution();\n\n\t\t\t// eslint-disable-next-line bitrix-rules/no-bx\n\t\t\tBX.calendar({\n\t\t\t\tnode: event.target,\n\t\t\t\tcallback_after: (newDate: Date) => {\n\t\t\t\t\tthis.currentTimestamp = TimestampConverter.userToBrowser(newDate.getTime() / 1000);\n\n\t\t\t\t\tthis.executeAction();\n\t\t\t\t},\n\t\t\t\t...this.calendarParams,\n\t\t\t});\n\t\t},\n\t\tcancelScheduledActionExecution(): void\n\t\t{\n\t\t\tif (this.actionTimeoutId)\n\t\t\t{\n\t\t\t\tclearTimeout(this.actionTimeoutId);\n\t\t\t\tthis.actionTimeoutId = null;\n\t\t\t}\n\t\t},\n\t\texecuteAction(): void\n\t\t{\n\t\t\tif (!this.action)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.currentTimestamp === this.initialTimestamp)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// to avoid unintended props mutation\n\t\t\tconst actionDescription = Runtime.clone(this.action);\n\n\t\t\tactionDescription.actionParams ??= {};\n\t\t\tactionDescription.actionParams.value = this.currentDateInSiteFormat;\n\t\t\tactionDescription.actionParams.valueTs = this.currentTimestamp;\n\n\t\t\tconst action = new Action(actionDescription);\n\t\t\taction.execute(this);\n\n\t\t\tthis.initialTimestamp = this.currentTimestamp;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<span\n\t\t\t:class=\"className\"\n\t\t\t@click=\"openCalendar\"\n\t\t>\n\t\t\t<span>\n\t\t\t\t{{ formattedDate }}\n\t\t\t</span>\n\t\t\t<span class=\"crm-timeline__date-pill_caret\"></span>\n\t\t</span>`\n};","import { CurrencyCore } from 'currency.currency-core';\nimport { Type } from 'main.core';\n\nexport const MoneyPill = {\n\tprops: {\n\t\topportunity: Number,\n\t\tcurrencyId: String,\n\t},\n\tcomputed: {\n\t\tmoneyHtml(): ?string\n\t\t{\n\t\t\tif (!Type.isNumber(this.opportunity) || !Type.isStringFilled(this.currencyId))\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn CurrencyCore.currencyFormat(this.opportunity, this.currencyId, true);\n\t\t}\n\t},\n\ttemplate: `\n\t\t<div class=\"crm-timeline-card__money-pill\">\n\t\t\t<span class=\"crm-timeline-card__money-pill_amount\">\n\t\t\t\t<span v-if=\"moneyHtml\" v-html=\"moneyHtml\"></span>\n\t\t\t</span>\n\t\t</div>\n\t`\n}\n","\nexport const InfoGroup = {\n\tprops: {\n\t\tblocks: {\n\t\t\ttype: Object,\n\t\t\trequired: false,\n\t\t\tdefault: () => ({}),\n\t\t}\n\t},\n\n\ttemplate: `\n\t\t<table class=\"crm-timeline__info-group\">\n\t\t\t<tbody>\n\t\t\t\t<tr\n\t\t\t\t\tv-for=\"({title, block}, id) in blocks\"\n\t\t\t\t\t:key=\"id\"\n\t\t\t\t\tclass=\"crm-timeline__info-group_block\"\n\t\t\t\t>\n\t\t\t\t\t<td\n\t\t\t\t\t\t:title=\"title\"\n\t\t\t\t\t\tclass=\"crm-timeline__info-group_block-title\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{title}}\n\t\t\t\t\t</td>\n\t\t\t\t\t<td class=\"crm-timeline__info-group_block-content\">\n\t\t\t\t\t\t<component\n\t\t\t\t\t\t\t:is=\"block.rendererName\"\n\t\t\t\t\t\t\tv-bind=\"block.properties\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</tbody>\n\t\t</table>\n\t`\n}","import { FileIcon } from 'ui.icons.generator';\nimport {TimelineAudio} from \"./timeline-audio\";\n\nexport default {\n\tcomponents: {\n\t\tTimelineAudio,\n\t},\n\tprops: {\n\t\tid: Number,\n\t\ttext: String,\n\t\thref: String,\n\t\tsize: Number,\n\t\tattributes: Object,\n\t\thasAudioPlayer: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: false,\n\t\t}\n\t},\n\n\tcomputed: {\n\t\tfileExtension() {\n\t\t\treturn this.text.split('.').slice(-1)[0] || '';\n\t\t},\n\n\t\ttitleFirstPart(): string {\n\t\t\treturn this.text.slice(0, -this.titleLastPartSize);\n\t\t},\n\n\t\ttitleLastPart(): string {\n\t\t\treturn this.text.slice(-this.titleLastPartSize);\n\t\t},\n\n\t\ttitleLastPartSize(): number {\n\t\t\treturn 10;\n\t\t},\n\t},\n\n\tmounted() {\n\t\tconst fileIcon = new FileIcon({\n\t\t\tname: this.fileExtension,\n\t\t});\n\n\t\tfileIcon.renderTo(this.$refs.icon);\n\t},\n\n\ttemplate:\n\t\t`\n\t\t<div class=\"crm-timeline__file\">\n\t\t\t<div ref=\"icon\" class=\"crm-timeline__file_icon\"></div>\n\t\t\t<a\n\t\t\t\ttarget=\"_blank\"\n\t\t\t\tclass=\"crm-timeline__file_title crm-timeline__card_link\"\n\t\t\t\tv-if=\"href\"\n\t\t\t\t:title=\"text\"\n\t\t\t\t:href=\"href\"\n\t\t\t\tv-bind=\"attributes\"\n\t\t\t\tref=\"title\"\n\t\t\t>\n\t\t\t\t<span>{{ titleFirstPart }}</span>\n\t\t\t\t<span>{{ titleLastPart }}</span>\n\t\t\t</a>\n\t\t\t<div class=\"crm-timeline__file_audio-player\" v-if=\"this.hasAudioPlayer\">\n\t\t\t\t<TimelineAudio :id=\"id\" :mini=\"true\" :src=\"href\"></TimelineAudio>\n\t\t\t</div>\n\t\t</div>\n\t\t`\n};\n","import { FileUploaderPopup } from 'crm.activity.file-uploader-popup';\nimport File from './file';\nimport {BIcon, Set} from \"ui.icon-set.api.vue\";\nimport 'ui.icon-set.main';\nimport 'ui.icon-set.actions';\n\nexport const FileList = {\n\tcomponents: {\n\t\tFile,\n\t\tBIcon,\n\t},\n\tprops: {\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t},\n\t\tnumberOfFiles: {\n\t\t\ttype: Number,\n\t\t\trequired: false,\n\t\t\tdefault: 0,\n\t\t},\n\t\tfiles: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t\tdefault: [],\n\t\t},\n\t\tupdateParams: {\n\t\t\ttype: Object,\n\t\t\trequired: false,\n\t\t\tdefault: {},\n\t\t},\n\t\tvisibleFilesNumber: {\n\t\t\ttype: Number,\n\t\t\trequired: false,\n\t\t\tdefault: 5,\n\t\t},\n\t},\n\n\tinject: ['isReadOnly'],\n\n\tdata() {\n\t\treturn {\n\t\t\tvisibleFilesAmount: this.visibleFilesNumber,\n\t\t}\n\t},\n\n\tcomputed: {\n\t\tisEditable(): boolean\n\t\t{\n\t\t\treturn Object.keys(this.updateParams).length > 0 && !this.isReadOnly;\n\t\t},\n\n\t\tvisibleFiles(): Array {\n\t\t\treturn this.files.slice(0, this.visibleFilesAmount);\n\t\t},\n\n\t\teditFilesBtnClassname(): Array {\n\t\t\treturn [\n\t\t\t\t'crm-timeline__file-list-btn', {\n\t\t\t\t'--disabled': !this.isEditable,\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\n\t\texpandFileListBtnTitle() {\n\t\t\treturn this.isAllFilesVisible\n\t\t\t\t?\n\t\t\t\tthis.$Bitrix.Loc.getMessage('CRM_TIMELINE_ITEM_FILE_LIST_COLLAPSE')\n\t\t\t\t:\n\t\t\t\tthis.$Bitrix.Loc.getMessage('CRM_TIMELINE_ITEM_FILE_LIST_EXPAND')\n\t\t\t;\n\t\t},\n\n\t\teditFilesBtnIcon(): string {\n\t\t\treturn Set.PENCIL_40;\n\t\t},\n\n\t\taddVisibleFilesBtnIcon(): string {\n\t\t\treturn Set.CHEVRON_DOWN;\n\t\t},\n\n\t\tisAllFilesVisible(): boolean {\n\t\t\treturn this.visibleFilesAmount === this.numberOfFiles\n\t\t},\n\n\t\tisShowExpandFileListBtn(): boolean {\n\t\t\treturn this.numberOfFiles > this.visibleFilesNumber;\n\t\t},\n\n\t\texpandBtnIconClassname(): string {\n\t\t\treturn [\n\t\t\t\t'crm-timeline__file-list-btn-icon', {\n\t\t\t\t'--upended': this.isAllFilesVisible,\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t},\n\n\tmethods: {\n\t\tfileProps(file: Object): Object\n\t\t{\n\t\t\treturn {\n\t\t\t\tid: file.id,\n\t\t\t\ttext: file.name,\n\t\t\t\thref: file.viewUrl,\n\t\t\t\tsize: file.size,\n\t\t\t\tattributes: file.attributes,\n\t\t\t\thasAudioPlayer: file.hasAudioPlayer,\n\t\t\t};\n\t\t},\n\n\t\tshowFileUploaderPopup(): void\n\t\t{\n\t\t\tif (!this.isEditable)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst popup = new FileUploaderPopup(this.updateParams);\n\t\t\tpopup.show();\n\t\t},\n\n\t\thandleShowFilesBtnClick() {\n\t\t\tif (this.isAllFilesVisible)\n\t\t\t{\n\t\t\t\tthis.collapseFileList();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.expandFileList();\n\t\t\t}\n\t\t},\n\n\t\texpandFileList(): void\n\t\t{\n\t\t\tthis.visibleFilesAmount = this.numberOfFiles;\n\t\t},\n\n\t\tcollapseFileList(): void {\n\t\t\tthis.visibleFilesAmount = this.visibleFilesNumber;\n\t\t}\n\t},\n\n\ttemplate:\n\t\t`\n\t\t\t<div class=\"crm-timeline__file-list-wrapper\">\n\t\t\t\t<div class=\"crm-timeline__file-list-container\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"crm-timeline__file-container\"\n\t\t\t\t\t\tv-for=\"file in visibleFiles\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<File :key=\"file.id\" v-bind=\"fileProps(file)\"></File>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<footer class=\"crm-timeline__file-list-footer\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tv-if=\"isShowExpandFileListBtn\"\n\t\t\t\t\t\tclass=\"crm-timeline__file-list-btn-container\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclass=\"crm-timeline__file-list-btn\"\n\t\t\t\t\t\t\t@click=\"handleShowFilesBtnClick\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span class=\"crm-timeline__file-list-btn-text\">{{expandFileListBtnTitle}}</span>\n\t\t\t\t\t\t\t<i :class=\"expandBtnIconClassname\">\n\t\t\t\t\t\t\t\t<BIcon :name=\"addVisibleFilesBtnIcon\" :size=\"18\"></BIcon>\n\t\t\t\t\t\t\t</i>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tv-if=\"isEditable\"\n\t\t\t\t\t\tclass=\"crm-timeline__file-list-btn-container\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tv-if=\"title !== '' || numberOfFiles > 0\"\n\t\t\t\t\t\t\t@click=\"showFileUploaderPopup\"\n\t\t\t\t\t\t\t:class=\"editFilesBtnClassname\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span class=\"crm-timeline__file-list-btn-text\">{{ title }}</span>\n\t\t\t\t\t\t\t<i class=\"crm-timeline__file-list-btn-icon\">\n\t\t\t\t\t\t\t\t<BIcon :name=\"editFilesBtnIcon\" :size=\"18\"></BIcon>\n\t\t\t\t\t\t\t</i>\n\t\t\t\t\t\t\t<i ref=\"edit-icon\" class=\"crm-timeline__file-list-btn-icon\"></i>\n\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</footer>\n\t\t\t</div>\n\t\t`\n};\n","export const SmsMessage = {\n\tprops: {\n\t\ttext: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t},\n\t},\n\tcomputed: {\n\t\tmessageHtml(): string\n\t\t{\n\t\t\treturn BX.util.htmlspecialchars(this.text).replace(/\\r\\n|\\r|\\n/g, '<br/>');\n\t\t}\n\t},\n\ttemplate: `\n\t\t<div\n\t\t\tclass=\"crm-timeline__item_sms-message\">\n\t\t\t<span v-if=\"messageHtml\" v-html=\"messageHtml\"></span>\n\t\t</div>\n\t`\n}\n","import { Runtime, Type } from 'main.core';\nimport { Loader } from 'main.loader';\nimport { BitrixVue } from 'ui.vue3';\nimport { CommentEditor } from 'crm.timeline.editors.comment-editor';\nimport { Action } from '../../action';\nimport { EditableDescription } from './editable-description';\nimport { ButtonState } from '../enums/button-state';\n\nconst TYPE_LOAD_FILES_BLOCK = 1;\nconst TYPE_LOAD_TEXT_CONTENT = 2;\n\nexport default BitrixVue.cloneComponent(EditableDescription, {\n\tprops: {\n\t\tfilesCount: {\n\t\t\ttype: Number,\n\t\t\trequired: false,\n\t\t\tdefault: 0,\n\t\t},\n\t\thasInlineFiles: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: false,\n\t\t},\n\t\tloadAction: {\n\t\t\ttype: Object,\n\t\t\trequired: false,\n\t\t\tdefault: () => ({}),\n\t\t},\n\t},\n\n\tdata(): Object {\n\t\treturn {\n\t\t\t...this.parentData(),\n\t\t\tisTextLoaded: false,\n\t\t\tisTextChanged: false,\n\t\t\tisMoving: false,\n\t\t\tisFilesBlockDisplayed: this.filesCount > 0,\n\t\t\tfilesHtmlBlock: null,\n\t\t\tloader: Object.freeze(null),\n\t\t\teditor: Object.freeze(null),\n\t\t};\n\t},\n\n\tcomputed: {\n\t\ttextWrapperClassName(): Array\n\t\t{\n\t\t\treturn [\n\t\t\t\t'crm-timeline__editable-text_content',\n\t\t\t\t{\n\t\t\t\t\t'--is-editor-loaded': this.isEdit,\n\t\t\t\t}\n\t\t\t]\n\t\t}\n\t},\n\n\tmethods: {\n\t\tstartEditing(): void\n\t\t{\n\t\t\tthis.isEdit = true;\n\t\t\tthis.isCollapsed = true;\n\n\t\t\tthis.$nextTick(() => {\n\t\t\t\tthis.editor.show(this.$refs.editor);\n\t\t\t});\n\n\t\t\tthis.emitEvent('Comment:StartEdit');\n\t\t},\n\n\t\tcancelEditing(): void\n\t\t{\n\t\t\tif (!this.isEdit || this.isSaving)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.value = this.oldValue;\n\t\t\tthis.isEdit = false;\n\n\t\t\tif (this.filesHtmlBlock)\n\t\t\t{\n\t\t\t\tRuntime.html(this.$refs.files, this.filesHtmlBlock).then(() => {\n\t\t\t\t\tthis.registerImages(this.$refs.files);\n\t\t\t\t\tBX.LazyLoad.showImages();\n\n\t\t\t\t\tthis.emitEvent('Comment:FinishEdit');\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.emitEvent('Comment:FinishEdit');\n\t\t\t}\n\t\t},\n\n\t\ttoggleIsCollapsed(): void\n\t\t{\n\t\t\tthis.parentToggleIsCollapsed();\n\n\t\t\tif (!this.isTextLoaded)\n\t\t\t{\n\t\t\t\tthis.executeLoadAction(TYPE_LOAD_TEXT_CONTENT, this.$refs.text);\n\t\t\t}\n\t\t},\n\n\t\tcheckIsLongText(): boolean\n\t\t{\n\t\t\treturn this.parentCheckIsLongText() || this.hasInlineFiles;\n\t\t},\n\n\t\tsaveContent(): void\n\t\t{\n\t\t\tconst isSaveDisabled = this.saveTextButtonState === ButtonState.LOADING\n\t\t\t\t|| !this.isEdit\n\t\t\t\t|| !this.saveAction\n\t\t\t;\n\n\t\t\tif (isSaveDisabled)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst content = this.editor.getContent();\n\t\t\tif (!Type.isStringFilled(content))\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst htmlContent = this.editor.getHtmlContent();\n\t\t\tconst attachmentList = this.editor.getAttachments();\n\n\t\t\tthis.isSaving = true;\n\n\t\t\tthis.executeSaveAction(content, attachmentList).then(() => {\n\t\t\t\tthis.isEdit = false;\n\n\t\t\t\tif (!this.isTextChanged)\n\t\t\t\t{\n\t\t\t\t\tthis.oldValue = htmlContent;\n\t\t\t\t\tthis.value = htmlContent;\n\t\t\t\t}\n\n\t\t\t\tthis.$nextTick((): void => {\n\t\t\t\t\tthis.isLongText = this.checkIsLongText();\n\t\t\t\t\tthis.executeLoadAction(TYPE_LOAD_FILES_BLOCK, this.$refs.files);\n\t\t\t\t});\n\n\t\t\t\tthis.emitEvent('Comment:FinishEdit');\n\t\t\t}).finally(() => {\n\t\t\t\tthis.isSaving = false;\n\t\t\t});\n\t\t},\n\n\t\texecuteSaveAction(content: String, attachmentList: Array): Promise\n\t\t{\n\t\t\t// to avoid unintended props mutation\n\t\t\tconst actionDescription = Runtime.clone(this.saveAction);\n\n\t\t\tactionDescription.actionParams ??= {};\n\t\t\tactionDescription.actionParams.id = actionDescription.actionParams.commentId;\n\t\t\tactionDescription.actionParams.fields = {\n\t\t\t\t'COMMENT': content,\n\t\t\t\t'ATTACHMENTS': attachmentList\n\t\t\t};\n\n\t\t\tconst action = new Action(actionDescription);\n\n\t\t\treturn action.execute(this);\n\t\t},\n\n\t\texecuteLoadAction(type: Number, node: HTMLElement): void\n\t\t{\n\t\t\tif (this.filesCount === 0)\n\t\t\t{\n\t\t\t\tthis.filesHtmlBlock = null;\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!Type.isDomNode(node) || !this.loadAction)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst actionDescription = Runtime.clone(this.loadAction);\n\t\t\tactionDescription.actionParams ??= {};\n\t\t\tactionDescription.actionParams.options = type;\n\n\t\t\tconst action = new Action(actionDescription);\n\n\t\t\tthis.showLoader(true);\n\n\t\t\taction.execute(this).then(response => {\n\t\t\t\tif (type === TYPE_LOAD_FILES_BLOCK)\n\t\t\t\t{\n\t\t\t\t\tthis.filesHtmlBlock = response.data.html;\n\t\t\t\t}\n\t\t\t\telse if (type === TYPE_LOAD_TEXT_CONTENT)\n\t\t\t\t{\n\t\t\t\t\tthis.isTextLoaded = true;\n\t\t\t\t}\n\n\t\t\t\tRuntime.html(node, response.data.html).then(() => {\n\t\t\t\t\tthis.registerImages(node);\n\t\t\t\t\tBX.LazyLoad.showImages();\n\n\t\t\t\t\tthis.showLoader(false);\n\t\t\t\t});\n\t\t\t}).catch(() => {\n\t\t\t\tif (type === TYPE_LOAD_FILES_BLOCK)\n\t\t\t\t{\n\t\t\t\t\tthis.filesHtmlBlock = null;\n\t\t\t\t}\n\t\t\t\telse if (type === TYPE_LOAD_TEXT_CONTENT)\n\t\t\t\t{\n\t\t\t\t\tthis.isTextLoaded = false;\n\t\t\t\t}\n\n\t\t\t\tthis.showLoader(false);\n\t\t\t});\n\t\t},\n\n\t\tregisterImages(node: HTMLElement): void\n\t\t{\n\t\t\tif (!Type.isDomNode(node) )\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst idsList = [];\n\t\t\tconst commentImages = node.querySelectorAll('[data-viewer-type=\"image\"]');\n\t\t\tconst commentImagesLength = commentImages.length;\n\t\t\tif (commentImagesLength > 0)\n\t\t\t{\n\t\t\t\tfor (let i = 0; i < commentImagesLength; ++i)\n\t\t\t\t{\n\t\t\t\t\tif (Type.isDomNode(commentImages[i]))\n\t\t\t\t\t{\n\t\t\t\t\t\tcommentImages[i].id += BX.util.getRandomString(4);\n\t\t\t\t\t\tidsList.push(commentImages[i].id);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (idsList.length > 0)\n\t\t\t\t{\n\t\t\t\t\tBX.LazyLoad.registerImages(idsList, null, {dataSrcName: \"thumbSrc\"});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tBX.LazyLoad.registerImages(idsList, null, {dataSrcName: \"thumbSrc\"});\n\t\t},\n\n\t\tshowLoader(showLoader: boolean): void\n\t\t{\n\t\t\tif (showLoader)\n\t\t\t{\n\t\t\t\tif (!this.loader)\n\t\t\t\t{\n\t\t\t\t\tthis.loader =  new Loader({size: 20, mode: 'inline'});\n\t\t\t\t}\n\n\t\t\t\tthis.loader.show(this.$refs.files);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (this.loader)\n\t\t\t\t{\n\t\t\t\t\tthis.loader.hide();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tcreateEditor(): void\n\t\t{\n\t\t\tthis.editor = new CommentEditor(this.loadAction.actionParams.commentId,);\n\t\t},\n\n\t\tsetIsMoving(flag: boolean = true): void\n\t\t{\n\t\t\tthis.isMoving = flag;\n\t\t},\n\n\t\tsetIsFilesBlockDisplayed(flag: boolean = true): void\n\t\t{\n\t\t\tthis.isFilesBlockDisplayed = flag;\n\n\t\t\tif (this.filesHtmlBlock)\n\t\t\t{\n\t\t\t\tRuntime.html(this.$refs.files, this.filesHtmlBlock).then(() => {\n\t\t\t\t\tthis.registerImages(this.$refs.files);\n\t\t\t\t\tBX.LazyLoad.showImages();\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t},\n\n\twatch: {\n\t\ttext(newValue: String): void\n\t\t{\n\t\t\tthis.value = newValue;\n\t\t\tthis.oldValue = newValue;\n\t\t\tthis.isTextChanged = true;\n\n\t\t\tthis.$nextTick((): void => {\n\t\t\t\tthis.isLongText = this.checkIsLongText();\n\t\t\t\tthis.executeLoadAction(TYPE_LOAD_FILES_BLOCK, this.$refs.files);\n\t\t\t});\n\t\t},\n\n\t\tvalue(newValue: String): void\n\t\t{\n\t\t\tif (!this.isEdit) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.value = newValue;\n\t\t\tthis.oldValue = newValue;\n\t\t},\n\n\t\tfilesCount(newValue: Number): void\n\t\t{\n\t\t\tif (this.isMoving)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\tthis.isFilesBlockDisplayed = newValue > 0;\n\n\t\t\tthis.$nextTick((): void => {\n\t\t\t\tthis.executeLoadAction(TYPE_LOAD_FILES_BLOCK, this.$refs.files);\n\t\t\t});\n\t\t}\n\t},\n\n\tmounted() {\n\t\tthis.createEditor();\n\n\t\tthis.$nextTick((): void => {\n\t\t\tthis.isLongText = this.checkIsLongText();\n\t\t\tthis.executeLoadAction(TYPE_LOAD_FILES_BLOCK, this.$refs.files);\n\t\t});\n\t},\n\n\tupdated() {\n\t\tthis.createEditor();\n\t},\n\n\ttemplate: `\n\t\t<div class=\"crm-timeline__editable-text_wrapper\">\n\t\t\t<div ref=\"rootElement\" :class=\"className\">\n\t\t\t\t<button\n\t\t\t\t\tv-if=\"isLongText && !isEdit && isEditable && isEditButtonVisible\"\n\t\t\t\t\t:disabled=\"isSaving\"\n\t\t\t\t\t@click=\"startEditing\"\n\t\t\t\t\tclass=\"crm-timeline__editable-text_edit-btn\"\n\t\t\t\t>\n\t\t\t\t\t<i class=\"crm-timeline__editable-text_edit-icon\"></i>\n\t\t\t\t</button>\n\t\t\t\t<div class=\"crm-timeline__editable-text_inner\">\n\t\t\t\t\t<div :class=\"textWrapperClassName\">\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tv-if=\"isEdit\"\n\t\t\t\t\t\t\tref=\"editor\"\n\t\t\t\t\t\t\t:disabled=\"!isEdit || isSaving\"\n\t\t\t\t\t\t\tclass=\"crm-timeline__editable-text_editor\"\n\t\t\t\t\t\t></div>\n\t\t\t\t\t\t<span \n\t\t\t\t\t\t\tv-else\n\t\t\t\t\t\t\tref=\"text\"\n\t\t\t\t\t\t\tclass=\"crm-timeline__editable-text_text\"\n\t\t\t\t\t\t\tv-html=\"value\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tv-if=\"!isEdit && !isLongText && isEditable && isEditButtonVisible\"\n\t\t\t\t\t\t\t@click=\"startEditing\"\n\t\t\t\t\t\t\tclass=\"crm-timeline__editable-text_text-edit-icon\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span class=\"crm-timeline__editable-text_edit-icon\"></span>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tv-if=\"isEdit\"\n\t\t\t\t\t\tclass=\"crm-timeline__editable-text_actions\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div class=\"crm-timeline__editable-text_action\">\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tv-bind=\"saveTextButtonProps\"\n\t\t\t\t\t\t\t\t@click=\"saveContent\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"crm-timeline__editable-text_action\">\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tv-bind=\"cancelEditingButtonProps\"\n\t\t\t\t\t\t\t\t@click=\"cancelEditing\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<button\n\t\t\t\t\tv-if=\"isLongText && !isEdit\"\n\t\t\t\t\t@click=\"toggleIsCollapsed\"\n\t\t\t\t\tclass=\"crm-timeline__editable-text_collapse-btn\"\n\t\t\t\t>\n\t\t\t\t\t{{ expandButtonText }}\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t\t<div\n\t\t\t\tv-if=\"!isEdit && isFilesBlockDisplayed\"\n\t\t\t\tref=\"files\"\n\t\t\t\tclass=\"crm-timeline__comment_files_wrapper\"\n\t\t\t\tv-html=\"filesHtmlBlock\"\n\t\t\t>\n\t\t\t</div>\n\t\t</div>\n\t`\n});\n","import { Base } from './base';\nimport ConfigurableItem from '../configurable-item';\nimport { Type } from \"main.core\";\n\nimport TextBlock from '../components/content-blocks/text';\nimport LinkBlock from '../components/content-blocks/link';\nimport DateBlock from '../components/content-blocks/date';\nimport WithTitle from '../components/content-blocks/with-title';\nimport LineOfTextBlocks from '../components/content-blocks/line-of-text-blocks';\nimport { TimelineAudio } from '../components/content-blocks/timeline-audio';\nimport { ClientMark } from '../components/content-blocks/client-mark';\nimport Money from '../components/content-blocks/money';\nimport EditableText from '../components/content-blocks/editable-text';\nimport { EditableDescription } from '../components/content-blocks/editable-description';\nimport EditableDate from '../components/content-blocks/editable-date';\nimport { PlayerAlert } from '../components/content-blocks/player-alert';\nimport { Note } from '../components/content-blocks/note';\nimport DatePill from '../components/content-blocks/date-pill';\nimport { MoneyPill } from '../components/content-blocks/money-pill';\nimport { InfoGroup } from '../components/content-blocks/info-group';\nimport { FileList } from '../components/content-blocks/file-list';\nimport { SmsMessage } from '../components/content-blocks/sms-message';\nimport CommentContent from '../components/content-blocks/comment-content';\n\nexport class CommonContentBlocks extends Base\n{\n\tgetContentBlockComponents(Item: ConfigurableItem): Object\n\t{\n\t\treturn {\n\t\t\tTextBlock,\n\t\t\tLinkBlock,\n\t\t\tDateBlock,\n\t\t\tWithTitle,\n\t\t\tLineOfTextBlocks,\n\t\t\tTimelineAudio,\n\t\t\tClientMark,\n\t\t\tMoney,\n\t\t\tEditableText,\n\t\t\tEditableDescription,\n\t\t\tEditableDate,\n\t\t\tPlayerAlert,\n\t\t\tDatePill,\n\t\t\tNote,\n\t\t\tFileList,\n\t\t\tInfoGroup,\n\t\t\tMoneyPill,\n\t\t\tSmsMessage,\n\t\t\tCommentContent,\n\t\t};\n\t}\n\n\t/**\n\t * Process common events that aren't bound to specific item type\n\t */\n\tonItemAction(item: ConfigurableItem, actionParams: ActionParams): void\n\t{\n\t\tconst {action, actionType, actionData} = actionParams;\n\t\tif (actionType !== 'jsEvent')\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (action === 'Item:OpenEntityDetailTab' && Type.isStringFilled(actionData?.tabId))\n\t\t{\n\t\t\tthis.#openEntityDetailTab(actionData.tabId);\n\t\t}\n\n\t\tif(action === 'Note:StartEdit') {\n\t\t\tthis.#editNote(item);\n\t\t}\n\n\t\tif(action === 'Note:FinishEdit') {\n\t\t\tthis.#cancelEditNote(item);\n\t\t}\n\t}\n\n\t#openEntityDetailTab(tabId: string): void\n\t{\n\t\t// the event is handled by compatible code, it's a pain to use EventEmitter in this case\n\t\t// eslint-disable-next-line bitrix-rules/no-bx\n\t\tBX.onCustomEvent(window, 'OpenEntityDetailTab', [tabId]);\n\t}\n\n\t#editNote(item: ConfigurableItem) {\n\t\titem.getLayoutContentBlockById('note')?.setEditMode(true);\n\t\titem.highlightContentBlockById('note', true);\n\t}\n\n\t#cancelEditNote(item: ConfigurableItem) {\n\t\titem.getLayoutContentBlockById('note')?.setEditMode(false);\n\t\titem.highlightContentBlockById('note', false);\n\t}\n\n\tstatic isItemSupported(item: ConfigurableItem): boolean\n\t{\n\t\treturn true; // common blocks can be used anywhere\n\t}\n}\n","export default {\n\tprops: {\n\t\tmessageHtml: String,\n\t\tisIncoming: Boolean,\n\t},\n\tcomputed: {\n\t\tclassName(): string\n\t\t{\n\t\t\treturn 'crm-entity-stream-content-detail-IM-message-' + (this.isIncoming ? 'incoming' : 'outgoing');\n\t\t},\n\t},\n\t// language=Vue\n\ttemplate: `<div class=\"crm-entity-stream-content-detail-IM\"><div :class=\"[className]\" v-html=\"messageHtml\"></div></div>`\n};\n","import { Base } from './base';\nimport ConfigurableItem from '../configurable-item';\nimport ChatMessage from '../components/content-blocks/chat-message';\nimport { MessageBox } from \"ui.dialogs.messagebox\";\nimport { MessageBoxButtons } from \"ui.dialogs.messagebox\";\nimport { Loc } from \"main.core\";\nimport { ajax as Ajax } from \"main.core\";\nimport { UI } from \"ui.notification\";\n\nexport class OpenLines extends Base\n{\n\tgetContentBlockComponents(Item: ConfigurableItem): Object\n\t{\n\t\treturn {\n\t\t\tChatMessage,\n\t\t};\n\t}\n\n\tonItemAction(item: ConfigurableItem, actionParams: ActionParams): void\n\t{\n\t\tconst {action, actionType, actionData, animationCallbacks} = actionParams;\n\t\tif (actionType !== 'jsEvent')\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (action === 'Openline:OpenChat' && actionData && actionData.dialogId)\n\t\t{\n\t\t\tthis.#openChat(actionData.dialogId);\n\t\t}\n\n\t\tif (action === 'Openline:Complete' && actionData && actionData.activityId)\n\t\t{\n\t\t\tthis.#onComplete(item, actionData, animationCallbacks);\n\t\t}\n\t}\n\n\t#openChat(dialogId): void\n\t{\n\t\tif (window.top['BXIM'])\n\t\t{\n\t\t\twindow.top['BXIM'].openMessengerSlider(dialogId, {RECENT: 'N', MENU: 'N'});\n\t\t}\n\t}\n\n\t#onComplete(item: ConfigurableItem, actionData: Object, animationCallbacks: ?Object): void\n\t{\n\t\tMessageBox.show({\n\t\t\ttitle: Loc.getMessage('CRM_TIMELINE_ITEM_ACTIVITY_OPENLINE_COMPLETE_CONF_TITLE'),\n\t\t\tmessage: Loc.getMessage('CRM_TIMELINE_ITEM_ACTIVITY_OPENLINE_COMPLETE_CONF'),\n\t\t\tmodal: true,\n\t\t\tokCaption: BX.Loc.getMessage('CRM_TIMELINE_ITEM_ACTIVITY_OPENLINE_COMPLETE_CONF_OK_TEXT'),\n\t\t\tbuttons: MessageBoxButtons.OK_CANCEL,\n\t\t\tonOk: () => {\n\t\t\t\treturn this.#runCompleteAction(actionData.activityId, actionData.ownerTypeId, actionData.ownerId, animationCallbacks);\n\t\t\t},\n\t\t\tonCancel: (messageBox) => {\n\t\t\t\tconst changeStreamButton = item.getLayoutHeaderChangeStreamButton();\n\t\t\t\tif (changeStreamButton)\n\t\t\t\t{\n\t\t\t\t\tchangeStreamButton.markCheckboxUnchecked();\n\t\t\t\t}\n\n\t\t\t\tmessageBox.close();\n\t\t\t},\n\t\t});\n\t}\n\n\t#runCompleteAction(activityId: Number, ownerTypeId: Number, ownerId: Number, animationCallbacks: ?Object): Promise\n\t{\n\t\tif (animationCallbacks.onStart)\n\t\t{\n\t\t\tanimationCallbacks.onStart();\n\t\t}\n\n\t\treturn Ajax.runAction(\n\t\t\t'crm.timeline.activity.complete',\n\t\t\t{\n\t\t\t\tdata: {\n\t\t\t\t\tactivityId,\n\t\t\t\t\townerTypeId,\n\t\t\t\t\townerId,\n\t\t\t\t}\n\t\t\t}\n\t\t).then(() => {\n\t\t\tif (animationCallbacks.onStop)\n\t\t\t{\n\t\t\t\tanimationCallbacks.onStop();\n\t\t\t}\n\n\t\t\treturn true;\n\t\t},\n\t\t(response) => {\n\t\t\tUI.Notification.Center.notify({\n\t\t\t\tcontent: response.errors[0].message,\n\t\t\t\tautoHideDelay: 5000,\n\t\t\t});\n\n\t\t\tif (animationCallbacks.onStop)\n\t\t\t{\n\t\t\t\tanimationCallbacks.onStop();\n\t\t\t}\n\n\t\t\treturn true;\n\t\t});\n\t}\n\n\n\n\tstatic isItemSupported(item: ConfigurableItem): boolean\n\t{\n\t\treturn (item.getType() === 'Activity:OpenLine');\n\t}\n}\n","export default {\n\tprops: {\n\t\tfrom: Object,\n\t\tto: Object,\n\t},\n\t// language=Vue\n\ttemplate: `<div class=\"crm-entity-stream-content-detail-info\">\n\t<component :is=\"from.rendererName\" v-if=\"from\" v-bind=\"from.properties\"></component>\n\t<span class=\"crm-entity-stream-content-detail-info-separator-icon\" v-if=\"from\"></span>\n\t<component :is=\"to.rendererName\" v-if=\"to\" v-bind=\"to.properties\"></component>\n\t</div>`\n};\n","export default {\n\tprops: {\n\t\ticonCode: String,\n\t\ttext: String,\n\t\tpillText: String,\n\t},\n\tcomputed: {\n\t\ticonClassName(): Object\n\t\t{\n\t\t\treturn [\n\t\t\t\t'crm-timeline__value-change-item_icon', {\n\t\t\t\t[`--${this.iconCode}`]: true,\n\t\t\t\t}\n\t\t\t];\n\n\t\t}\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<div class=\"crm-timeline__value-change-item\">\n\t\t\t<span v-if=\"iconCode\" :class=\"iconClassName\"></span>\n\t\t\t<span class=\"crm-timeline__value-change-item_text\" v-if=\"text\">{{ text }}</span>\n\t\t\t<span class=\"crm-entity-stream-content-detain-info-status\" v-if=\"pillText\">{{ pillText }}</span>\n\t\t</div>\n\t`\n};","import {Base} from './base';\nimport ConfigurableItem from '../configurable-item';\nimport ValueChange from '../components/content-blocks/value-change';\nimport ValueChangeItem from '../components/content-blocks/value-change-item';\n\nexport class Modification extends Base\n{\n\tgetContentBlockComponents(Item: ConfigurableItem): Object\n\t{\n\t\treturn {\n\t\t\tValueChange,\n\t\t\tValueChangeItem,\n\t\t};\n\t}\n\n\tstatic isItemSupported(item: ConfigurableItem): boolean\n\t{\n\t\treturn (item.getType() === 'Modification')\n\t\t\t|| (item.getType() === 'TasksTaskModification')\n\t\t\t;\n\t}\n}\n","import {ajax as Ajax, Text, Loc} from 'main.core';\nimport {Router} from 'crm.router';\nimport {Base} from './base';\nimport {ajax} from 'main.core';\nimport {DateTimeFormat} from \"main.date\";\nimport { DatetimeConverter } from \"crm.timeline.tools\";\nimport { MessageBox, MessageBoxButtons } from 'ui.dialogs.messagebox';\n\nimport ConfigurableItem from '../configurable-item';\nimport {UI} from \"ui.notification\";\n\ndeclare type Signer = {\n\ttitle: string,\n}\n\nexport class SignDocument extends Base\n{\n\tonItemAction(item: ConfigurableItem, actionParams: ActionParams): void\n\t{\n\t\tconst {action, actionType, actionData, animationCallbacks} = actionParams;\n\t\tif (actionType !== 'jsEvent')\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst documentId = Text.toInteger(actionData?.documentId);\n\t\tconst documentHash = actionData?.documentHash || '';\n\t\tconst activityId = Text.toInteger(actionData?.activityId);\n\t\tif ((action === 'SignDocument:Open' || action === 'Activity:SignDocument:Open') && documentId > 0)\n\t\t{\n\t\t\tthis.#openDocument(actionData);\n\t\t}\n\t\telse if ((action === 'SignDocument:Modify' || action === 'Activity:SignDocument:Modify') && documentId > 0)\n\t\t{\n\t\t\tthis.#modifyDocument(actionData);\n\t\t}\n\t\telse if ((action === 'SignDocument:UpdateActivityDeadline' || action === 'Activity:SignDocument:UpdateActivityDeadline') && activityId > 0)\n\t\t{\n\t\t\tthis.#updateActivityDeadline(activityId, actionData?.value);\n\t\t}\n\t\telse if (action === 'SignDocument:Resend' && documentId > 0 && actionData?.recipientHash)\n\t\t{\n\t\t\tthis.#resendDocument(actionData, animationCallbacks).then(() => {\n\t\t\t\tif (actionData.buttonId)\n\t\t\t\t{\n\t\t\t\t\tconst btn = item.getLayoutFooterButtonById(actionData.buttonId);\n\t\t\t\t\tbtn.disableWithTimer(60);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\telse if (action === 'SignDocument:TouchSigner' && documentId > 0)\n\t\t{\n\t\t\tthis.#touchSigner(actionData);\n\t\t}\n\t\telse if (action === 'SignDocument:Download' && documentHash)\n\t\t{\n\t\t\tthis.#download(actionData, animationCallbacks);\n\t\t}\n\t\telse if (action === 'SignDocumentEntry:Delete' && actionData?.entryId)\n\t\t{\n\t\t\tMessageBox.show({\n\t\t\t\tmessage: actionData?.confirmationText || '',\n\t\t\t\tmodal: true,\n\t\t\t\tbuttons: MessageBoxButtons.YES_NO,\n\t\t\t\tonYes: () =>\n\t\t\t\t{\n\t\t\t\t\treturn this.#deleteEntry(actionData.entryId);\n\t\t\t\t},\n\t\t\t\tonNo: (messageBox) =>\n\t\t\t\t{\n\t\t\t\t\tmessageBox.close();\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t}\n\n\t#deleteEntry(entryId): Promise\n\t{\n\t\tconsole.log('delete entry' + entryId);\n\t}\n\n\t#openDocument({\n\t\tdocumentId,\n\t\tmemberHash\n\t}): Promise\n\t{\n\t\treturn Router.Instance.openSignDocumentSlider(documentId, memberHash);\n\t}\n\n\t#modifyDocument({documentId}): Promise\n\t{\n\t\treturn Router.Instance.openSignDocumentModifySlider(documentId);\n\t}\n\n\tasync #updateActivityDeadline(activityId: number, value: ?Date): Promise<void>\n\t{\n\t\tconst valueInSiteFormat = DateTimeFormat.format(DatetimeConverter.getSiteDateFormat(), value);\n\n\t\tlet response: {data: {document?: {activityDeadline?: string}, success?: boolean, code?: number}};\n\t\ttry\n\t\t{\n\t\t\tresponse = await Ajax.runAction('crm.timeline.signdocument.updateActivityDeadline', {\n\t\t\t\tdata: {\n\t\t\t\t\tactivityId: activityId,\n\t\t\t\t\tactivityDeadline: valueInSiteFormat,\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t\tcatch (responseWithError)\n\t\t{\n\t\t\tconsole.error(responseWithError);\n\t\t\treturn;\n\t\t}\n\n\t\tconst newCreateDate = response.data.document?.activityDeadline;\n\n\t\tif (valueInSiteFormat !== newCreateDate)\n\t\t{\n\t\t\tconsole.error(\"Updated document create date without errors, but for some reason date from the backend doesn't match sent value\");\n\t\t}\n\t}\n\n\t#resendDocument({documentId, recipientHash}, animationCallbacks): Promise\n\t{\n\t\tif (animationCallbacks.onStart)\n\t\t{\n\t\t\tanimationCallbacks.onStart();\n\t\t}\n\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tajax.runAction(\n\t\t\t\t'sign.internal.document.resendFile',\n\t\t\t\t{\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tmemberHash: recipientHash,\n\t\t\t\t\t\tdocumentId: documentId\n\t\t\t\t\t},\n\t\t\t\t}\n\t\t\t).then(() =>\n\t\t\t{\n\t\t\t\tUI.Notification.Center.notify({\n\t\t\t\t\tcontent: Loc.getMessage('CRM_TIMELINE_ITEM_SIGN_DOCUMENT_RESEND_SUCCESS'),\n\t\t\t\t\tautoHideDelay: 5000,\n\t\t\t\t});\n\t\t\t\tif (animationCallbacks.onStop)\n\t\t\t\t{\n\t\t\t\t\tanimationCallbacks.onStop();\n\n\t\t\t\t}\n\t\t\t\tresolve();\n\t\t\t}, (response) =>\n\t\t\t{\n\t\t\t\tUI.Notification.Center.notify({\n\t\t\t\t\tcontent: response.errors[0].message,\n\t\t\t\t\tautoHideDelay: 5000,\n\t\t\t\t});\n\t\t\t\tif (animationCallbacks.onStop)\n\t\t\t\t{\n\t\t\t\t\tanimationCallbacks.onStop();\n\t\t\t\t}\n\t\t\t\treject();\n\t\t\t});\n\n\t\t\tconsole.log('resend document ' + documentId + ' for ' + recipientHash);\n\t\t})\n\t}\n\n\t#touchSigner({documentId}): void\n\t{\n\t\tconsole.log('touch signer document ' + documentId);\n\t}\n\n\t#download({documentHash, memberHash}, animationCallbacks): void\n\t{\n\t\tif (animationCallbacks.onStart)\n\t\t{\n\t\t\tanimationCallbacks.onStart();\n\t\t}\n\n\t\tconst link = document.createElement('a');\n\t\tlink.href = '/bitrix/services/main/ajax.php?action=sign.document.getFileForSrc' +\n\t\t\t'&memberHash=' + memberHash +\n\t\t\t'&documentHash=' + documentHash;\n\n\t\tlink.setAttribute('download', '');\n\n\t\tdocument.body.appendChild(link);\n\t\tlink.click();\n\t\tdocument.body.removeChild(link);\n\n\t\tif (animationCallbacks.onStop)\n\t\t{\n\t\t\tanimationCallbacks.onStop();\n\t\t}\n\t}\n\n\tstatic isItemSupported(item: ConfigurableItem): boolean\n\t{\n\t\treturn (\n\t\t\titem.getType() === 'SignDocument'\n\t\t\t|| item.getType() === 'Activity:SignDocument'\n\t\t);\n\t}\n}\n","import {ajax as Ajax, Loc, Tag, Text, Type, Uri} from 'main.core';\nimport { DateTimeFormat } from \"main.date\";\nimport { type ActionAnimationCallbacks, type ActionParams, Base } from './base';\nimport ConfigurableItem from '../configurable-item';\nimport { ActionType } from \"../action\";\nimport { Router } from \"crm.router\";\nimport {MessageBox, MessageBoxButtons} from \"ui.dialogs.messagebox\";\nimport { DatetimeConverter } from \"crm.timeline.tools\";\nimport { UI } from 'ui.notification';\n\nimport 'ui.info-helper';\n\nconst ACTION_NAMESPACE = 'Document:';\n\nexport class Document extends Base\n{\n\tstatic #toPrintAfterRefresh: ConfigurableItem[] = [];\n\t#popupConfirm: BX.PopupWindow;\n\n\tstatic isItemSupported(item: ConfigurableItem): boolean\n\t{\n\t\treturn (\n\t\t\titem.getType() === 'Document'\n\t\t\t|| item.getType() === 'DocumentViewed'\n\t\t\t|| item.getType() === 'Activity:Document'\n\t\t);\n\t}\n\n\tonItemAction(item: ConfigurableItem, actionParams: ActionParams): void\n\t{\n\t\tconst {action, actionType, actionData, response, animationCallbacks} = actionParams;\n\n\t\tif (ActionType.isJsEvent(actionType))\n\t\t{\n\t\t\tthis.#onJsEvent(action, actionData, animationCallbacks, item);\n\t\t}\n\t\telse if (ActionType.isAjaxAction(actionType))\n\t\t{\n\t\t\tthis.#onAjaxAction(action, actionType, actionData, response);\n\t\t}\n\t}\n\n\t#onJsEvent(\n\t\taction: string,\n\t\tactionData: Object,\n\t\tanimationCallbacks: ?ActionAnimationCallbacks,\n\t\titem: ConfigurableItem,\n\t): void\n\t{\n\t\tconst documentId = Text.toInteger(actionData?.documentId);\n\t\t// if (documentId <= 0)\n\t\t// {\n\t\t// \treturn;\n\t\t// }\n\t\tif (action === (ACTION_NAMESPACE + 'Open'))\n\t\t{\n\t\t\tthis.#openDocument(documentId);\n\t\t}\n\t\telse if (action === (ACTION_NAMESPACE + 'CopyPublicLink'))\n\t\t{\n\t\t\t// todo block button while loading\n\t\t\tthis.#copyPublicLink(documentId, actionData?.publicUrl);\n\t\t}\n\t\telse if (action === (ACTION_NAMESPACE + 'Print'))\n\t\t{\n\t\t\tthis.#printDocument(actionData?.printUrl, animationCallbacks, item);\n\t\t}\n\t\telse if (action === (ACTION_NAMESPACE + 'DownloadPdf'))\n\t\t{\n\t\t\tthis.#downloadPdf(actionData?.pdfUrl);\n\t\t}\n\t\telse if (action === (ACTION_NAMESPACE + 'DownloadDocx'))\n\t\t{\n\t\t\tthis.#downloadDocx(actionData?.docxUrl);\n\t\t}\n\t\telse if (action === (ACTION_NAMESPACE + 'UpdateTitle'))\n\t\t{\n\t\t\tthis.#updateTitle(documentId, actionData?.value);\n\t\t}\n\t\telse if (action === (ACTION_NAMESPACE + 'UpdateCreateDate'))\n\t\t{\n\t\t\tthis.#updateCreateDate(documentId, actionData?.value);\n\t\t}\n\t\telse if (action === (ACTION_NAMESPACE + 'ConvertDeal'))\n\t\t{\n\t\t\tthis.#convertDeal(documentId, animationCallbacks);\n\t\t}\n\t\telse if (action === (ACTION_NAMESPACE + 'ShowInfoHelperSlider'))\n\t\t{\n\t\t\tthis.#showInfoHelperSlider(actionData?.infoHelperCode);\n\t\t}\n\t\telse if (action === (ACTION_NAMESPACE + 'Delete'))\n\t\t{\n\t\t\tconst confirmationText = actionData.confirmationText ?? '';\n\t\t\tif (confirmationText)\n\t\t\t{\n\t\t\t\tMessageBox.show({\n\t\t\t\t\tmessage: confirmationText,\n\t\t\t\t\tmodal: true,\n\t\t\t\t\tbuttons: MessageBoxButtons.YES_NO,\n\t\t\t\t\tonYes: () => {\n\t\t\t\t\t\treturn this.#deleteDocument(actionData.id, actionData.ownerTypeId, actionData.ownerId, animationCallbacks);\n\t\t\t\t\t},\n\t\t\t\t\tonNo: (messageBox) => {\n\t\t\t\t\t\tmessageBox.close();\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.#deleteDocument(actionData.id, actionData.ownerTypeId, actionData.ownerId, animationCallbacks);\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tconsole.info(`Unknown action ${action} in ${item.getType()}`);\n\t\t}\n\t}\n\n\t#openDocument(documentId: number): void\n\t{\n\t\tRouter.Instance.openDocumentSlider(documentId);\n\t}\n\n\tasync #copyPublicLink(documentId: number, publicUrl: ?string): Promise<void>\n\t{\n\t\tif (!Type.isStringFilled(publicUrl))\n\t\t{\n\t\t\ttry\n\t\t\t{\n\t\t\t\tpublicUrl = await this.#createPublicUrl(documentId);\n\t\t\t}\n\t\t\tcatch (error)\n\t\t\t{\n\t\t\t\tMessageBox.alert(error.message);\n\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tconst isSuccess = BX.clipboard.copy(publicUrl);\n\t\tif (isSuccess)\n\t\t{\n\t\t\tUI.Notification.Center.notify({\n\t\t\t\tcontent: Loc.getMessage('CRM_TIMELINE_ITEM_LINK_IS_COPIED'),\n\t\t\t\tautoHideDelay: 5000,\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tMessageBox.alert(Loc.getMessage('CRM_TIMELINE_ITEM_ACTIVITY_DOCUMENT_COPY_PUBLIC_LINK_ERROR'));\n\t\t}\n\t}\n\n\tasync #createPublicUrl(documentId: number): Promise<string, Error>\n\t{\n\t\tlet response: {data: {publicUrl: string}};\n\t\ttry\n\t\t{\n\t\t\tresponse = await Ajax.runAction(\n\t\t\t\t'crm.documentgenerator.document.enablePublicUrl',\n\t\t\t\t{\n\t\t\t\t\tanalyticsLabel: 'enablePublicUrl',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tstatus: 1,\n\t\t\t\t\t\tid: documentId,\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t\tcatch (responseWithError)\n\t\t{\n\t\t\tconsole.error(responseWithError);\n\n\t\t\tthrow new Error(Loc.getMessage('CRM_TIMELINE_ITEM_ACTIVITY_DOCUMENT_CREATE_PUBLIC_LINK_ERROR'));\n\t\t}\n\n\t\tconst publicUrl = response.data.publicUrl;\n\t\tif (!Type.isStringFilled(publicUrl))\n\t\t{\n\t\t\tthrow new Error(Loc.getMessage('CRM_TIMELINE_ITEM_ACTIVITY_DOCUMENT_CREATE_PUBLIC_LINK_ERROR'));\n\t\t}\n\n\t\treturn publicUrl;\n\t}\n\n\t#printDocument(printUrl: ?string, animationCallbacks: ?ActionAnimationCallbacks, item: ConfigurableItem): void\n\t{\n\t\tif (Type.isStringFilled(printUrl))\n\t\t{\n\t\t\twindow.open(printUrl, '_blank');\n\t\t\treturn;\n\t\t}\n\n\t\t// there is no pdf yet. wait till document is transformed and update push comes in\n\t\tDocument.#toPrintAfterRefresh.push(item);\n\t\tconst onStart = animationCallbacks?.onStart;\n\t\tif (Type.isFunction(onStart))\n\t\t{\n\t\t\tonStart();\n\t\t}\n\t}\n\n\t#downloadPdf(pdfUrl: ?string): void\n\t{\n\t\tif (Type.isStringFilled(pdfUrl))\n\t\t{\n\t\t\twindow.open(pdfUrl, '_blank');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tMessageBox.alert(Loc.getMessage('CRM_TIMELINE_ITEM_ACTIVITY_DOCUMENT_PDF_NOT_READY'));\n\t\t}\n\t}\n\n\t#downloadDocx(docxUrl: ?string): void\n\t{\n\t\tif (Type.isStringFilled(docxUrl))\n\t\t{\n\t\t\twindow.open(docxUrl, '_blank');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tconsole.error('Docx download url is not found. This should be an impossible case, something went wrong');\n\t\t}\n\t}\n\n\tasync #updateTitle(documentId: number, value: ?string): Promise<void>\n\t{\n\t\tlet response: {data: {document?: {values?: {DocumentTitle?: string}}}};\n\t\ttry\n\t\t{\n\t\t\tresponse = await Ajax.runAction('crm.documentgenerator.document.update', {\n\t\t\t\tdata: {\n\t\t\t\t\tid: documentId,\n\t\t\t\t\tvalues: {\n\t\t\t\t\t\tDocumentTitle: value,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t\tcatch (responseWithError)\n\t\t{\n\t\t\tconsole.error(responseWithError);\n\n\t\t\tMessageBox.alert(Loc.getMessage('CRM_TIMELINE_ITEM_ACTIVITY_DOCUMENT_UPDATE_DOCUMENT_ERROR'));\n\n\t\t\treturn;\n\t\t}\n\n\t\tconst newTitle = response.data.document?.values?.DocumentTitle;\n\t\tif (newTitle !== value)\n\t\t{\n\t\t\tconsole.error(\"Updated document title without errors, but for some reason title from the backend doesn't match sent value\");\n\t\t}\n\t}\n\n\tasync #updateCreateDate(documentId: number, value: ?Date): Promise<void>\n\t{\n\t\tconst valueInSiteFormat = DateTimeFormat.format(DatetimeConverter.getSiteDateFormat(), value);\n\n\t\tlet response: {data: {document?: {values?: {DocumentCreateTime?: string}}}};\n\t\ttry\n\t\t{\n\t\t\tresponse = await Ajax.runAction('crm.documentgenerator.document.update', {\n\t\t\t\tdata: {\n\t\t\t\t\tid: documentId,\n\t\t\t\t\tvalues: {\n\t\t\t\t\t\tDocumentCreateTime: valueInSiteFormat,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t\tcatch (responseWithError)\n\t\t{\n\t\t\tconsole.error(responseWithError);\n\n\t\t\tMessageBox.alert(Loc.getMessage('CRM_TIMELINE_ITEM_ACTIVITY_DOCUMENT_UPDATE_DOCUMENT_ERROR'));\n\n\t\t\treturn;\n\t\t}\n\n\t\tconst newCreateDate = response.data.document?.values?.DocumentCreateTime;\n\t\tif (valueInSiteFormat !== newCreateDate)\n\t\t{\n\t\t\tconsole.error(\"Updated document create date without errors, but for some reason date from the backend doesn't match sent value\");\n\t\t}\n\t}\n\n\t#deleteDocument(id: number, ownerTypeId: number, ownerId: number, animationCallbacks: Object): boolean\n\t{\n\t\tif (animationCallbacks.onStart)\n\t\t{\n\t\t\tanimationCallbacks.onStart();\n\t\t}\n\t\treturn Ajax.runAction(\n\t\t\t'crm.timeline.document.delete',\n\t\t\t{\n\t\t\t\tdata: {\n\t\t\t\t\tid,\n\t\t\t\t\townerTypeId,\n\t\t\t\t\townerId,\n\t\t\t\t}\n\t\t\t}\n\t\t).then(() => {\n\t\t\tif (animationCallbacks.onStop)\n\t\t\t{\n\t\t\t\tanimationCallbacks.onStop();\n\t\t\t}\n\t\t\treturn true;\n\t\t}, (response) =>\n\t\t{\n\t\t\tUI.Notification.Center.notify({\n\t\t\t\tcontent: response.errors[0].message,\n\t\t\t\tautoHideDelay: 5000,\n\t\t\t});\n\t\t\tif (animationCallbacks.onStop)\n\t\t\t{\n\t\t\t\tanimationCallbacks.onStop();\n\t\t\t}\n\n\t\t\treturn true;\n\t\t});\n\t}\n\n\t#onAjaxAction(action: string, actionType: string, actionData: Object, response: Object): void\n\t{\n\t\tif (action === 'crm.api.integration.sign.convertDeal')\n\t\t{\n\t\t\tif (actionType === ActionType.AJAX_ACTION.FINISHED && !Type.isNil(response?.data?.SMART_DOCUMENT))\n\t\t\t{\n\t\t\t\t//todo extract it to router?\n\t\t\t\tconst wizardUri = new Uri('/sign/doc/0/');\n\t\t\t\twizardUri.setQueryParams({\n\t\t\t\t\tdocId: response.data.SMART_DOCUMENT,\n\t\t\t\t\tstepId: 'changePartner',\n\t\t\t\t\tnoRedirect: 'Y',\n\t\t\t\t});\n\t\t\t\tBX.SidePanel.Instance.open(wizardUri.toString());\n\t\t\t}\n\t\t}\n\t}\n\n\tonAfterItemRefreshLayout(item: ConfigurableItem)\n\t{\n\t\tconst itemsToPrint = Document.#toPrintAfterRefresh.filter(candidate => candidate.getId() === item.getId());\n\t\tif (itemsToPrint.length <= 0)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst action = item.getLayout().asPlainObject().footer?.additionalButtons?.extra?.action;\n\t\tconst isPrintEvent = (\n\t\t\tType.isPlainObject(action)\n\t\t\t&& ActionType.isJsEvent(action.type)\n\t\t\t&& action.value === (ACTION_NAMESPACE + 'Print')\n\t\t);\n\t\tif (!isPrintEvent)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst printUrl = action.actionParams?.printUrl;\n\t\tif (!Type.isStringFilled(printUrl))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.#printDocument(printUrl, null, item);\n\n\t\tDocument.#toPrintAfterRefresh =\n\t\t\tDocument.#toPrintAfterRefresh.filter(remainingItem => !itemsToPrint.includes(remainingItem))\n\t\t;\n\t}\n\n\t#convertDeal(id: number, animationCallbacks: ?ActionAnimationCallbacks)\n\t{\n\t\tif (animationCallbacks.onStart)\n\t\t{\n\t\t\tanimationCallbacks.onStart();\n\t\t}\n\n\t\tconst convertDealAndStartSign = (\n\t\t\t(usePrevious) =>\n\t\t\t{\n\t\t\t\tAjax.runAction('crm.api.integration.sign.convertDeal', {\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tdocumentId: id,\n\t\t\t\t\t\tusePrevious: !usePrevious ? 0 : 1,\n\t\t\t\t\t}\n\t\t\t}).then(\n\t\t\t\t(response) =>\n\t\t\t\t{\n\t\t\t\t\tif (response?.data?.SMART_DOCUMENT)\n\t\t\t\t\t{\n\t\t\t\t\t\tconst wizardUri = new Uri('/sign/doc/0/');\n\t\t\t\t\t\twizardUri.setQueryParams({\n\t\t\t\t\t\t\tdocId: response.data.SMART_DOCUMENT,\n\t\t\t\t\t\t\tstepId: 'changePartner',\n\t\t\t\t\t\t\tnoRedirect: 'Y',\n\t\t\t\t\t\t});\n\t\t\t\t\t\tBX.SidePanel.Instance.open(wizardUri.toString());\n\t\t\t\t\t}\n\n\t\t\t\t\tif (animationCallbacks.onStop)\n\t\t\t\t\t{\n\t\t\t\t\t\tanimationCallbacks.onStop();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t(response) => {\n\t\t\t\t\tif (response.errors[0].message)\n\t\t\t\t\t{\n\t\t\t\t\t\tUI.Notification.Center.notify({\n\t\t\t\t\t\t\tcontent: response.errors[0].message,\n\t\t\t\t\t\t\tautoHideDelay: 5000,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tif (animationCallbacks.onStop)\n\t\t\t\t\t{\n\t\t\t\t\t\tanimationCallbacks.onStop();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t).catch((response) =>\n\t\t\t\t{\n\t\t\t\t\tif (response.errors[0].message)\n\t\t\t\t\t{\n\t\t\t\t\t\tUI.Notification.Center.notify({\n\t\t\t\t\t\t\tcontent: response.errors[0].message,\n\t\t\t\t\t\t\tautoHideDelay: 5000,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tif (animationCallbacks.onStop)\n\t\t\t\t\t{\n\t\t\t\t\t\tanimationCallbacks.onStop();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t\t});\n\n\t\tAjax.runAction('crm.api.integration.sign.getLinkedBlank', {\n\t\t\tdata: {\n\t\t\t\tdocumentId: id\n\t\t\t}\n\t\t}).then(\n\t\t\t(response) =>\n\t\t\t{\n\t\t\t\tif (response?.data?.ID > 0) {\n\t\t\t\t\tthis.#showMessage(\n\t\t\t\t\t\tLoc.getMessage('CRM_TIMELINE_ITEM_ACTIVITY_DO_USE_PREVIOUS_MSGVER_3',\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t'%TITLE%': '<b>' + (response.data.TITLE || '') + '</b>',\n\t\t\t\t\t\t\t\t'%INITIATOR%': '<b>' + (response.data.INITIATOR || '') + '</b>',\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t[\n\t\t\t\t\t\t\tnew BX.UI.Button({\n\t\t\t\t\t\t\t\ttext: BX.message('CRM_TIMELINE_ITEM_ACTIVITY_OLD_BUTTON_MSGVER_2'),\n\t\t\t\t\t\t\t\tclassName: \"ui-btn ui-btn-md ui-btn-primary\",\n\t\t\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\t\t\tclick: () =>\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tconvertDealAndStartSign(true);\n\t\t\t\t\t\t\t\t\t\tthis.#popupConfirm.destroy();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\tnew BX.UI.Button({\n\t\t\t\t\t\t\t\ttext: Loc.getMessage('CRM_TIMELINE_ITEM_ACTIVITY_NEW_BUTTON_MSGVER_3'),\n\t\t\t\t\t\t\t\tclassName: \"ui-btn ui-btn-md ui-btn-info\",\n\t\t\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\t\t\tclick: () =>\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tconvertDealAndStartSign(false);\n\t\t\t\t\t\t\t\t\t\tthis.#popupConfirm.destroy();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t],\n\t\t\t\t\t\tLoc.getMessage('CRM_TIMELINE_ITEM_ACTIVITY_POPUP_TITLE_MSGVER_2')\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\tconvertDealAndStartSign(false);\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\t#showInfoHelperSlider(code: string)\n\t{\n\t\tBX.UI.InfoHelper.show(code);\n\t}\n\n\t#showMessage(content: string, buttons: [], title: string)\n\t{\n\t\tthis.#popupConfirm = new BX.PopupWindow(\n\t\t\t'bx-popup-document-activity-popup',\n\t\t\tnull,\n\t\t\t{\n\t\t\t\t\t\tzIndex: 200,\n\t\t\t\t\t\tautoHide: true,\n\t\t\t\t\t\tcloseByEsc: true,\n\t\t\t\t\t\tbuttons: buttons,\n\t\t\t\t\t\tcloseIcon: true,\n\t\t\t\t\t\toverlay : true,\n\t\t\t\t\t\tevents : {\n\t\t\t\t\t\t\tonPopupClose : () =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.#popupConfirm.destroy();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcontent: Tag.render`<div class=\"bx-popup-document-activity-popup-content-text\">${content}</div>`,\n\t\t\t\t\t\ttitleBar: title,\n\t\t\t\t\t\tcontentColor: 'white',\n\t\t\t\t\t\tclassName : 'bx-popup-document-activity-popup',\n\t\t\t\t\t\tmaxWidth: 510\n\t\t\t\t\t}\n\t\t);\n\t\tthis.#popupConfirm.show();\n\t};\n}\n","import { Base } from './base';\nimport { Type } from 'main.core';\nimport ConfigurableItem from '../configurable-item';\n\nexport class Call extends Base\n{\n\tonItemAction(item: ConfigurableItem, actionParams: ActionParams): void\n\t{\n\t\tconst {action, actionType, actionData} = actionParams;\n\n\t\tif (actionType !== 'jsEvent')\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (action === 'Call:MakeCall' && actionData)\n\t\t{\n\t\t\tthis.#makeCall(actionData);\n\t\t}\n\n\t\tif (action === 'Call:Schedule' && actionData)\n\t\t{\n\t\t\tthis.#scheduleCall(actionData.activityId, actionData.scheduleDate);\n\t\t}\n\n\t\tif (action === 'Call:OpenTranscript' && actionData && actionData.callId)\n\t\t{\n\t\t\tthis.#openTranscript(actionData.callId);\n\t\t}\n\n\t\tif (action === 'Call:ChangePlayerState' && actionData && actionData.recordId)\n\t\t{\n\t\t\tthis.#changePlayerState(item, actionData.recordId);\n\t\t}\n\n\t\tif (action === 'Call:DownloadRecord' && actionData && actionData.url)\n\t\t{\n\t\t\tthis.#downloadRecord(actionData.url);\n\t\t}\n\t}\n\n\t#makeCall(actionData): void\n\t{\n\t\tif (!Type.isStringFilled(actionData.phone))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst params = {\n\t\t\tENTITY_TYPE_NAME: BX.CrmEntityType.resolveName(actionData.entityTypeId),\n\t\t\tENTITY_ID: actionData.entityId,\n\t\t\tAUTO_FOLD: true\n\t\t};\n\n\t\tif (actionData.ownerTypeId !== actionData.entityTypeId || actionData.ownerId !== actionData.entityId)\n\t\t{\n\t\t\tparams.BINDINGS = {\n\t\t\t\tOWNER_TYPE_NAME: BX.CrmEntityType.resolveName(actionData.ownerTypeId),\n\t\t\t\tOWNER_ID: actionData.ownerId\n\t\t\t}\n\t\t}\n\n\t\tif (actionData.activityId > 0)\n\t\t{\n\t\t\tparams.SRC_ACTIVITY_ID = actionData.activityId;\n\t\t}\n\n\t\twindow.top['BXIM'].phoneTo(actionData.phone, params);\n\t}\n\n\t#scheduleCall(activityId: Number, scheduleDate: String): void\n\t{\n\t\tconst menuBar = BX.Crm?.Timeline?.MenuBar?.getDefault();\n\t\tif (menuBar)\n\t\t{\n\t\t\tmenuBar.setActiveItemById('todo');\n\n\t\t\tconst todoEditor = menuBar.getItemById('todo');\n\t\t\ttodoEditor.focus();\n\t\t\ttodoEditor.setParentActivityId(activityId);\n\t\t\ttodoEditor.setDeadLine(scheduleDate);\n\t\t}\n\t}\n\n\t#openTranscript(callId): void\n\t{\n\t\tif (BX.Voximplant && BX.Voximplant.Transcript)\n\t\t{\n\t\t\tBX.Voximplant.Transcript.create({\n\t\t\t\tcallId: callId\n\t\t\t}).show();\n\t\t}\n\t}\n\n\t#changePlayerState(item: ConfigurableItem, recordId: Number): void\n\t{\n\t\tconst player = item.getLayoutContentBlockById('audio');\n\t\tif (!player)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (recordId !== player.id)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (player.state === 'play')\n\t\t{\n\t\t\tplayer.pause();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tplayer.play();\n\t\t}\n\t}\n\n\t#downloadRecord(url: String): void\n\t{\n\t\tlocation.href = url;\n\t}\n\n\tstatic isItemSupported(item: ConfigurableItem): boolean\n\t{\n\t\treturn (item.getType() === 'Activity:Call');\n\t}\n}\n","import { ajax as Ajax, Type } from 'main.core';\nimport { BaseEvent } from \"main.core.events\";\nimport { Dialog } from 'ui.entity-selector';\nimport { UI } from 'ui.notification';\nimport { FileUploaderPopup } from 'crm.activity.file-uploader-popup';\nimport { SettingsPopup as TodoEditorSettingsPopup } from 'crm.activity.settings-popup';\nimport { Calendar as SettingsPopupCalendar } from 'crm.activity.settings-popup';\nimport { Ping as SettingsPopupPing } from 'crm.activity.settings-popup';\nimport { SectionSettings } from 'crm.activity.todo-editor';\n\nimport { Base } from './base';\nimport ConfigurableItem from '../configurable-item';\n\nexport class ToDo extends Base\n{\n\t#settingsPopup: ?Popup = null;\n\t#responsibleUserSelectorDialog: ?Dialog = null;\n\n\tonItemAction(item: ConfigurableItem, actionParams: ActionParams): void\n\t{\n\t\tconst {action, actionType, actionData} = actionParams;\n\n\t\tif (actionType !== 'jsEvent')\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (action === 'EditableDescription:StartEdit')\n\t\t{\n\t\t\titem.highlightContentBlockById('description', true);\n\t\t}\n\n\t\tif (action === 'EditableDescription:FinishEdit')\n\t\t{\n\t\t\titem.highlightContentBlockById('description', false);\n\t\t}\n\n\t\tif (action === 'Activity:ToDo:AddFile' && actionData)\n\t\t{\n\t\t\tthis.#showFileUploaderPopup(item, actionData);\n\t\t}\n\n\t\tif (action === 'Activity:ToDo:ShowSettings' && actionData)\n\t\t{\n\t\t\tthis.#showSettingsPopup(item, actionData);\n\t\t}\n\n\t\tif (action === 'Activity:ToDo:ChangeResponsible' && actionData)\n\t\t{\n\t\t\tthis.#showResponsibleUserSelector(item, actionData);\n\t\t}\n\t}\n\n\t#showFileUploaderPopup(item, actionData): void\n\t{\n\t\tconst isValidParams = Type.isNumber(actionData.entityId)\n\t\t\t&& Type.isNumber(actionData.entityTypeId)\n\t\t\t&& Type.isNumber(actionData.ownerId)\n\t\t\t&& Type.isNumber(actionData.ownerTypeId);\n\n\t\tif (!isValidParams)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tactionData.files = actionData.files.split(',').filter(id => Type.isNumber(id));\n\n\t\tconst fileList = item.getLayoutContentBlockById('fileList');\n\t\tif (fileList)\n\t\t{\n\t\t\tfileList.showFileUploaderPopup(actionData);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tconst popup = new FileUploaderPopup(actionData);\n\t\t\tpopup.show();\n\t\t}\n\t}\n\n\tstatic isItemSupported(item: ConfigurableItem): boolean\n\t{\n\t\treturn (item.getType() === 'Activity:ToDo');\n\t}\n\n\t#showSettingsPopup(item, actionData): void\n\t{\n\t\tthis.#settingsPopup = new TodoEditorSettingsPopup({\n\t\t\tsections: this.#getSectionSettings(),\n\t\t\tfetchSettingsPath: 'crm.activity.todo.fetchSettings',\n\t\t\townerTypeId: actionData['ownerTypeId'],\n\t\t\townerId: actionData['ownerId'],\n\t\t\tid: actionData['entityId'],\n\t\t\tonSave: this.#onSavePopupSettings.bind(this),\n\t\t});\n\n\t\tthis.#settingsPopup.show();\n\t}\n\n\t#showResponsibleUserSelector(item, actionData): void\n\t{\n\t\tconst isValidParams = Type.isNumber(actionData.id)\n\t\t\t&& Type.isNumber(actionData.ownerId)\n\t\t\t&& Type.isNumber(actionData.ownerTypeId)\n\t\t\t&& Type.isNumber(actionData.responsibleId)\n\t\t;\n\n\t\tif (!isValidParams)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tthis.#responsibleUserSelectorDialog = new Dialog({\n\t\t\tid: 'responsible-user-selector-dialog-' + actionData.id,\n\t\t\ttargetNode: item.getLayoutFooterMenu().$el,\n\t\t\tcontext: 'CRM_ACTIVITY_TODO_RESPONSIBLE_USER',\n\t\t\tmultiple: false,\n\t\t\tdropdownMode: true,\n\t\t\tshowAvatars: true,\n\t\t\tenableSearch: true,\n\t\t\twidth: 450,\n\t\t\tentities: [{\n\t\t\t\tid: 'user',\n\t\t\t}],\n\t\t\tpreselectedItems: [\n\t\t\t\t['user', actionData.responsibleId],\n\t\t\t],\n\t\t\tundeselectedItems: [\n\t\t\t\t['user', actionData.responsibleId],\n\t\t\t],\n\t\t\tevents: {\n\t\t\t\t'Item:onSelect': (event: BaseEvent): void => {\n\t\t\t\t\tconst selectedItem = event.getData().item.getDialog().getSelectedItems()[0];\n\t\t\t\t\tif (selectedItem)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.#runResponsibleUserAction(actionData.id, actionData.ownerId, actionData.ownerTypeId, selectedItem.getId());\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t'Item:onDeselect': (event: BaseEvent): void => {\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tconst selectedItems = this.#responsibleUserSelectorDialog.getSelectedItems();\n\t\t\t\t\t\tif (selectedItems.length === 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.#responsibleUserSelectorDialog.hide();\n\t\t\t\t\t\t\tthis.#runResponsibleUserAction(actionData.id, actionData.ownerId, actionData.ownerTypeId, actionData.responsibleId);\n\t\t\t\t\t\t}\n\t\t\t\t\t}, 100);\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\n\t\tthis.#responsibleUserSelectorDialog.show();\n\t}\n\n\t#onSavePopupSettings(ownerTypeId: Number, ownerId: Number, id: Number, settings: Array[]): void\n\t{\n\t\tconst data = {\n\t\t\townerTypeId,\n\t\t\townerId,\n\t\t\tid,\n\t\t\tsettings\n\t\t};\n\n\t\tAjax\n\t\t\t.runAction('crm.activity.todo.updateSettings', { data })\n\t\t\t.catch(response => {\n\t\t\t\tUI.Notification.Center.notify({\n\t\t\t\t\tcontent: response.errors[0].message,\n\t\t\t\t\tautoHideDelay: 5000,\n\t\t\t\t});\n\n\t\t\t\tthrow response;\n\t\t\t});\n\t}\n\n\t#getSectionSettings(): ReadonlyArray<SectionSettings>\n\t{\n\t\tconst ping = {\n\t\t\tid: SettingsPopupPing.methods.getId(),\n\t\t\tcomponent: SettingsPopupPing,\n\t\t\tactive: true,\n\t\t\tshowToggleSelector: false,\n\t\t};\n\n\t\tconst calendar = {\n\t\t\tid: SettingsPopupCalendar.methods.getId(),\n\t\t\tcomponent: SettingsPopupCalendar,\n\t\t\tactive: false,\n\t\t};\n\n\t\tif (this.#settingsPopup)\n\t\t{\n\t\t\tconst settings = this.#settingsPopup.getSettings();\n\t\t\tif (settings.ping)\n\t\t\t{\n\t\t\t\tconst pingSettings = settings.ping;\n\t\t\t\tping.params = {\n\t\t\t\t\tselectedItems: pingSettings.selectedItems,\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tif (settings.calendar)\n\t\t\t{\n\t\t\t\tconst calendarSettings = settings.calendar;\n\t\t\t\tcalendar.params = {\n\t\t\t\t\tfrom: calendarSettings.from,\n\t\t\t\t\tto: calendarSettings.to,\n\t\t\t\t\tduration: calendarSettings.duration,\n\t\t\t\t}\n\t\t\t\tcalendar.active = true;\n\t\t\t}\n\t\t}\n\n\t\treturn [\n\t\t\tping,\n\t\t\tcalendar,\n\t\t];\n\t}\n\n\t#getDefaultCalendarParams(): Object\n\t{\n\t\tconst fromDate = new Date();\n\t\tconst from = fromDate.getTime() / 1000;\n\t\tconst duration = 3600;\n\t\tconst to = from + duration;\n\n\t\treturn  {\n\t\t\tfrom,\n\t\t\tduration,\n\t\t\tto,\n\t\t}\n\t}\n\n\t#runResponsibleUserAction(id: Number, ownerId: Number, ownerTypeId: Number, responsibleId: Number): void\n\t{\n\t\tconst data = {\n\t\t\townerTypeId,\n\t\t\townerId,\n\t\t\tid,\n\t\t\tresponsibleId\n\t\t};\n\n\t\tAjax\n\t\t\t.runAction('crm.activity.todo.updateResponsibleUser', { data })\n\t\t\t.catch(response => {\n\t\t\t\tUI.Notification.Center.notify({\n\t\t\t\t\tcontent: response.errors[0].message,\n\t\t\t\t\tautoHideDelay: 5000,\n\t\t\t\t});\n\n\t\t\t\tthrow response;\n\t\t\t});\n\t}\n}\n","import {Base} from './base';\nimport ConfigurableItem from '../configurable-item';\n\nexport class Helpdesk extends Base\n{\n\tonItemAction(item: ConfigurableItem, actionParams: Object): void\n\t{\n\t\tconst { action, actionData } = actionParams;\n\n\t\tif (action === 'Helpdesk:Open' && actionData && actionData.articleCode)\n\t\t{\n\t\t\tthis.#openHelpdesk(actionData.articleCode);\n\t\t}\n\t}\n\n\t#openHelpdesk(articleCode): void\n\t{\n\t\tif (top.BX && top.BX.Helper)\n\t\t{\n\t\t\ttop.BX.Helper.show(`redirect=detail&code=${articleCode}`);\n\t\t}\n\t}\n\n\tstatic isItemSupported(item: ConfigurableItem): boolean\n\t{\n\t\treturn true;\n\t}\n}","import {Base} from './base';\nimport ConfigurableItem from '../configurable-item';\n\nexport class Payment extends Base\n{\n\tonItemAction(item: ConfigurableItem, actionParams: ActionParams): void\n\t{\n\t\tconst {action, actionType, actionData, animationCallbacks} = actionParams;\n\n\t\tif (actionType !== 'jsEvent')\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (action === 'Payment:OpenRealization' && actionData?.paymentId)\n\t\t{\n\t\t\tthis.#openRealization(actionData.paymentId);\n\t\t}\n\t}\n\n\t#openRealization(paymentId: number): void\n\t{\n\t\tconst control = BX.Crm.EntityEditor.getDefault().getControlByIdRecursive('OPPORTUNITY_WITH_CURRENCY');\n\t\tif (!control)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst paymentDocumentsControl = control.getPaymentDocumentsControl();\n\t\tif (!paymentDocumentsControl)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tpaymentDocumentsControl._createRealizationSlider({paymentId});\n\t}\n\n\tstatic isItemSupported(item: ConfigurableItem): boolean\n\t{\n\t\treturn (\n\t\t\titem.getType() === 'Payment'\n\t\t\t|| item.getType() === 'Activity:Payment'\n\t\t);\n\t}\n}\n","import 'ui.design-tokens';\nimport {Action} from '../../../action';\n\nexport default {\n\tprops: {\n\t\ttext: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\taction: Object,\n\t},\n\tmethods: {\n\t\texecuteAction(): void\n\t\t{\n\t\t\tif (this.action)\n\t\t\t{\n\t\t\t\tconst action = new Action(this.action);\n\t\t\t\taction.execute(this);\n\t\t\t}\n\t\t}\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<div class=\"crm-entity-stream-advice-list-btn-box\">\n\t\t\t<button\n\t\t\t\t@click=\"executeAction\"\n\t\t\t\tclass=\"crm-entity-stream-advice-list-btn\"\n\t\t\t>\n\t\t\t\t{{text}}\n\t\t\t</button>\n\t\t</div>\n\t`\n}\n","import 'ui.design-tokens';\nimport Link from '../link';\nimport Text from '../text';\nimport ListItemButton from './list-item-button';\n\nexport default {\n\tprops: {\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\ttitleAction: Object,\n\t\tisSelected: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: false,\n\t\t},\n\t\timage: String,\n\t\tshowDummyImage: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: true,\n\t\t},\n\t\tbottomBlock: Object,\n\t\tbutton: Object,\n\t},\n\tcomponents: {\n\t\tText,\n\t\tLink,\n\t\tListItemButton,\n\t},\n\tcomputed: {\n\t\timageStyle()\n\t\t{\n\t\t\tif (!this.image)\n\t\t\t{\n\t\t\t\treturn {};\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tbackgroundImage: 'url(' + this.image + ')'\n\t\t\t};\n\t\t},\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<li\n\t\t\t:class=\"{'crm-entity-stream-advice-list-item--active': isSelected}\"\n\t\t\tclass=\"crm-entity-stream-advice-list-item\"\n\t\t>\n\t\t\t<div class=\"crm-entity-stream-advice-list-content\">\n\t\t\t\t<div\n\t\t\t\t\tv-if=\"image || showDummyImage\"\n\t\t\t\t\t:style=\"imageStyle\"\n\t\t\t\t\tclass=\"crm-entity-stream-advice-list-icon\"\n\t\t\t\t>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"crm-entity-stream-advice-list-inner\">\n\t\t\t\t\t<Link v-if=\"titleAction\" :action=\"titleAction\" :text=\"title\"></Link>\n\t\t\t\t\t<Text v-else :value=\"title\"></Text>\n\t\t\t\t\t<div v-if=\"bottomBlock\" class=\"crm-entity-stream-advice-list-desc-box\">\n\t\t\t\t\t\t<LineOfTextBlocks v-bind=\"bottomBlock.properties\"></LineOfTextBlocks>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<ListItemButton v-if=\"button\" v-bind=\"button.properties\"></ListItemButton>\n\t\t</li>\n\t`\n}\n","import ListItem from './list-item';\n\nexport default {\n\tprops: {\n\t\tlistItems: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t\tdefault: [],\n\t\t},\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t},\n\t\tshowMoreEnabled: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t\tshowMoreCnt: {\n\t\t\ttype: Number,\n\t\t\trequired: false,\n\t\t},\n\t\tshowMoreText: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t},\n\t},\n\n\tdata()\n\t{\n\t\treturn {\n\t\t\tisShortList: this.showMoreEnabled,\n\t\t\tshortListItemsCnt: this.showMoreCnt,\n\t\t};\n\t},\n\tcomponents: {\n\t\tListItem,\n\t},\n\tmethods: {\n\t\tshowMore()\n\t\t{\n\t\t\tthis.isShortList = false;\n\t\t},\n\t\tisItemVisible(index)\n\t\t{\n\t\t\treturn !this.isShortList || index < this.showMoreCnt;\n\t\t},\n\t},\n\tcomputed: {\n\t\tisShowMoreVisible()\n\t\t{\n\t\t\treturn this.isShortList && this.listItems.length > this.shortListItemsCnt;\n\t\t},\n\t\tcnt()\n\t\t{\n\t\t\treturn this.listItems.length;\n\t\t},\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<div>\n\t\t\t<div v-if=\"title\" class=\"crm-entity-stream-advice-title\">\n\t\t\t\t{{title}}\n\t\t\t</div>\n\t\t\t<transition-group class=\"crm-entity-stream-advice-list\" name=\"list\" tag=\"ul\">\n\t\t\t\t<ListItem\n\t\t\t\t\tv-for=\"(item, index) in listItems\"\n\t\t\t\t\tv-show=\"isItemVisible(index)\"\n\t\t\t\t\t:key=\"item.id\"\n\t\t\t\t\tv-bind=\"item.properties\"\n\t\t\t\t></ListItem>\n\t\t\t</transition-group>\n\t\t\t<a\n\t\t\t\tv-if=\"isShowMoreVisible\"\n\t\t\t\t@click.prevent=\"showMore\"\n\t\t\t\tclass=\"crm-entity-stream-advice-link\"\n\t\t\t\thref=\"#\"\n\t\t\t>\n\t\t\t\t{{showMoreText}} ({{cnt}})\n\t\t\t</a>\n\t\t</div>\n\t`\n}\n","import ConfigurableItem from '../configurable-item';\nimport type {ActionParams} from './base';\nimport {BaseEvent, EventEmitter} from 'main.core.events';\nimport {UI} from 'ui.notification';\nimport {ajax as Ajax, Loc} from 'main.core';\nimport {ActionAnimationCallbacks, Base} from './base';\nimport ExpandableList from '../components/content-blocks/expandable-list/list';\n\nexport class DealProductList extends Base\n{\n\t#item: ConfigurableItem = null;\n\t#productsGrid: Object = null;\n\n\tgetContentBlockComponents(Item: ConfigurableItem): Object\n\t{\n\t\treturn {\n\t\t\tExpandableList,\n\t\t};\n\t}\n\n\tonInitialize(item: ConfigurableItem): void\n\t{\n\t\tthis.#item = item;\n\n\t\tEventEmitter.subscribe('onCrmEntityUpdate', () => {\n\t\t\tthis.#item.reloadFromServer();\n\t\t});\n\n\t\t/**\n\t\t * For cases when timeline block controller initialization runs after product grid initialization\n\t\t */\n\t\tBX.Crm.EntityEditor.getDefault().tapController('PRODUCT_LIST', (controller) => {\n\t\t\tthis.#productsGrid = controller.getProductList();\n\t\t});\n\n\t\t/**\n\t\t * For cases when timeline block controller initialization runs before product grid initialization\n\t\t */\n\t\tEventEmitter.subscribe('EntityProductListController', (event) => {\n\t\t\tthis.#productsGrid = event.getData()[0];\n\t\t});\n\t}\n\n\tonItemAction(item: ConfigurableItem, actionParams: ActionParams): void\n\t{\n\t\tconst {action, actionType, actionData, animationCallbacks} = actionParams;\n\t\tif (actionType !== 'jsEvent')\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (action === 'ProductList:AddToDeal')\n\t\t{\n\t\t\tthis.#addProductToDeal(actionData, animationCallbacks);\n\t\t}\n\t}\n\n\tstatic isItemSupported(item: ConfigurableItem): boolean\n\t{\n\t\treturn (\n\t\t\titem.getType() === 'ProductCompilation:SentToClient'\n\t\t\t|| item.getType() === 'Order:EncourageBuyProducts'\n\t\t);\n\t}\n\n\t#addProductToDeal(actionData: ?Object, animationCallbacks: ?ActionAnimationCallbacks): void\n\t{\n\t\tif (\n\t\t\t!(\n\t\t\t\tactionData\n\t\t\t\t&& actionData.dealId\n\t\t\t\t&& actionData.productId\n\t\t\t)\n\t\t) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (animationCallbacks.onStart)\n\t\t{\n\t\t\tanimationCallbacks.onStart();\n\t\t}\n\n\t\tAjax.runAction(\n\t\t\t'crm.timeline.dealproduct.addtodeal',\n\t\t\t{\n\t\t\t\tdata: {\n\t\t\t\t\tdealId: actionData.dealId,\n\t\t\t\t\tproductId: actionData.productId,\n\t\t\t\t\toptions: actionData.options || {},\n\t\t\t\t}\n\t\t\t}\n\t\t).then(() => {\n\t\t\tBX.Crm.EntityEditor.getDefault().reload();\n\t\t\tif (this.#productsGrid)\n\t\t\t{\n\t\t\t\tthis.#productsGrid.reloadGrid(false);\n\t\t\t}\n\n\t\t\tUI.Notification.Center.notify({\n\t\t\t\tcontent: Loc.getMessage('CRM_TIMELINE_ENCOURAGE_BUY_PRODUCTS_PRODUCTS_ADDED_TO_DEAL'),\n\t\t\t\tactions: [\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: Loc.getMessage('CRM_TIMELINE_ENCOURAGE_BUY_PRODUCTS_EDIT_PRODUCTS'),\n\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\tclick: (event, balloon, action) => {\n\t\t\t\t\t\t\t\tBX.onCustomEvent(window, 'OpenEntityDetailTab', ['tab_products']);\n\t\t\t\t\t\t\t\tballoon.close();\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\tautoHideDelay: 5000,\n\t\t\t});\n\n\t\t\tthis.#item.reloadFromServer().then(() => {\n\t\t\t\tif (animationCallbacks.onStop)\n\t\t\t\t{\n\t\t\t\t\tanimationCallbacks.onStop();\n\t\t\t\t}\n\t\t\t});\n\t\t}, response => {\n\t\t\tif (animationCallbacks.onStop)\n\t\t\t{\n\t\t\t\tanimationCallbacks.onStop();\n\t\t\t}\n\n\t\t\treturn true;\n\t\t});\n\t}\n}\n","export default {\r\n\tprops: {\r\n\t\tcontactBlocks: Array,\r\n\t},\r\n\ttemplate: `\r\n\t  \t<div class=\"crm-timeline-block-mail-contacts-wrapper\">\r\n\t\t\t<div class=\"crm-timeline-block-mail-contact\" v-for=\"(block, index) in contactBlocks\">\r\n\t\t\t  <component :is=\"block.rendererName\" v-bind=\"block.properties\"></component>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t`\r\n}","import { Base } from './base';\nimport { Type } from 'main.core';\nimport ConfigurableItem from '../configurable-item';\nimport ContactList from \"../components/content-blocks/mail/contact-list\";\n\nexport class Email extends Base\n{\n\tonItemAction(item: ConfigurableItem, actionParams: ActionParams): void\n\t{\n\t\tconst {action, actionType, actionData} = actionParams;\n\n\t\tif (actionType !== 'jsEvent')\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (action === 'Email::OpenMessage' && actionData)\n\t\t{\n\t\t\tthis.#openMessage(actionData);\n\t\t}\n\n\t\tif (action === 'Email::Schedule' && actionData)\n\t\t{\n\t\t\tthis.#schedule(actionData.activityId, actionData.scheduleDate);\n\t\t}\n\t}\n\n\t#viewActivity(id): void\n\t{\n\t\tconst editor = this.#getActivityEditor();\n\t\tif (editor && id)\n\t\t{\n\t\t\teditor.viewActivity(id);\n\t\t}\n\t}\n\n\t#getActivityEditor(): BX.CrmActivityEditor\n\t{\n\t\treturn BX.CrmActivityEditor.getDefault();\n\t}\n\n\t#schedule(activityId: Number, scheduleDate: String): void\n\t{\n\t\tconst menuBar = BX.Crm?.Timeline?.MenuBar?.getDefault();\n\t\tif (menuBar)\n\t\t{\n\t\t\tmenuBar.setActiveItemById('todo');\n\n\t\t\tconst todoEditor = menuBar.getItemById('todo');\n\t\t\ttodoEditor.focus();\n\t\t\ttodoEditor.setParentActivityId(activityId);\n\t\t\ttodoEditor.setDeadLine(scheduleDate);\n\t\t}\n\t}\n\n\t#openMessage(actionData): void\n\t{\n\t\tif (!Type.isNumber(actionData.threadId))\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tthis.#viewActivity(actionData.threadId);\n\t}\n\n\tgetContentBlockComponents(Item: ConfigurableItem): Object\n\t{\n\t\treturn {\n\t\t\tContactList,\n\t\t};\n\t}\n\n\tstatic isItemSupported(item: ConfigurableItem): boolean\n\t{\n\t\treturn (item.getType() === 'ContactList' || item.getType() === 'Activity:Email' || item.getType() === 'EmailActivitySuccessfullyDelivered');\n\t}\n}\n","import ConfigurableItem from '../configurable-item';\nimport {type ActionParams, Base} from './base';\nimport {Router} from 'crm.router';\n\nexport class OrderCheck extends Base\n{\n\tonItemAction(item: ConfigurableItem, actionParams: ActionParams): void\n\t{\n\t\tconst {action, actionType, actionData} = actionParams;\n\t\tif (actionType !== 'jsEvent')\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (action === 'OrderCheck:OpenCheck' && actionData && actionData.checkUrl)\n\t\t{\n\t\t\tRouter.openSlider(\n\t\t\t\tactionData.checkUrl,\n\t\t\t\t{\n\t\t\t\t\twidth: 500,\n\t\t\t\t\tcacheable : false,\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t}\n\n\tstatic isItemSupported(item: ConfigurableItem): boolean\n\t{\n\t\treturn (\n\t\t\titem.getType() === 'OrderCheckPrinted'\n\t\t\t|| item.getType() === 'OrderCheckNotPrinted'\n\t\t\t|| item.getType() === 'OrderCheckSent'\n\t\t);\n\t}\n}\n","import {TimelineSummaryDocuments} from 'crm.entity-editor.field.payment-documents';\n\nexport const EcommerceDocumentsList = {\n\tprops: {\n\t\townerId: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\townerTypeId: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\tisWithOrdersMode: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t\tsummaryOptions: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t}\n\t},\n\tmounted()\n\t{\n\t\tconst timelineSummaryDocuments = new TimelineSummaryDocuments({\n\t\t\t'OWNER_ID': this.ownerId,\n\t\t\t'OWNER_TYPE_ID': this.ownerTypeId,\n\t\t\t'PARENT_CONTEXT': this,\n\t\t\t'CONTEXT': BX.CrmEntityType.resolveName(this.ownerTypeId).toLowerCase(),\n\t\t\t'IS_WITH_ORDERS_MODE': this.isWithOrdersMode,\n\t\t});\n\t\ttimelineSummaryDocuments.setOptions(this.summaryOptions);\n\n\t\tthis.$el.appendChild(\n\t\t\ttimelineSummaryDocuments.render()\n\t\t);\n\t},\n\tmethods:\n\t{\n\t\tstartSalescenterApplication(orderId, options)\n\t\t{\n\t\t\tif (options === undefined)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tBX.loadExt('salescenter.manager').then(() => {\n\t\t\t\tBX.Salescenter.Manager.openApplication(options);\n\t\t\t});\n\t\t},\n\t},\n\ttemplate: `<div></div>`\n}\n","import {Base} from './base';\nimport ConfigurableItem from '../configurable-item';\nimport {EventEmitter} from 'main.core.events';\nimport {EcommerceDocumentsList} from '../components/content-blocks/ecommerce-documents-list';\n\nexport class FinalSummary extends Base\n{\n\tonAfterItemLayout(item: ConfigurableItem, options): void\n\t{\n\t\tif (item.needBindToContainer())\n\t\t{\n\t\t\tEventEmitter.emit(\n\t\t\t\t'BX.Crm.Timeline.Items.FinalSummaryDocuments:onHistoryNodeAdded',\n\t\t\t\t[item.getWrapper()]\n\t\t\t);\n\t\t}\n\t}\n\n\tgetContentBlockComponents(Item: ConfigurableItem): Object\n\t{\n\t\treturn {\n\t\t\tEcommerceDocumentsList,\n\t\t};\n\t}\n\n\tstatic isItemSupported(item: ConfigurableItem): boolean\n\t{\n\t\treturn item.getType() === 'FinalSummary';\n\t}\n}\n","import {Base} from './base';\nimport ConfigurableItem from '../configurable-item';\nimport {Type} from 'main.core';\n\nexport class SalescenterApp extends Base\n{\n\tstatic isItemSupported(item: ConfigurableItem): boolean\n\t{\n\t\tconst supportedItemTypes = [\n\t\t\t'Activity:Sms',\n\t\t\t'Activity:Notification',\n\t\t\t'Activity:Payment',\n\t\t\t'PaymentViewed',\n\t\t\t'PaymentNotViewed',\n\t\t\t'PaymentSent',\n\t\t\t'PaymentPaid',\n\t\t\t'PaymentNotPaid',\n\t\t\t'PaymentError',\n\t\t\t'Activity:Delivery',\n\t\t];\n\n\t\treturn supportedItemTypes.includes(item.getType());\n\t}\n\n\tonItemAction(item: ConfigurableItem, actionParams: ActionParams): void\n\t{\n\t\tconst {action, actionType, actionData, animationCallbacks} = actionParams;\n\n\t\tif (actionType !== 'jsEvent')\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (action === 'SalescenterApp:Start' && actionData)\n\t\t{\n\t\t\tthis.#startSalescenterApp(actionData);\n\t\t}\n\t}\n\n\t#startSalescenterApp(actionData): void\n\t{\n\t\tif (\n\t\t\t! (\n\t\t\t\tType.isInteger(actionData.ownerTypeId)\n\t\t\t\t&& Type.isInteger(actionData.ownerId)\n\t\t\t\t&& Type.isInteger(actionData.orderId)\n\t\t\t\t&& Type.isStringFilled(actionData.mode)\n\t\t\t)\n\t\t)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tBX.loadExt('salescenter.manager').then(() => {\n\t\t\tconst params = {\n\t\t\t\townerTypeId: actionData.ownerTypeId,\n\t\t\t\townerId: actionData.ownerId,\n\t\t\t\torderId: actionData.orderId,\n\t\t\t\tmode: actionData.mode,\n\t\t\t\tdisableSendButton: '',\n\t\t\t\tcontext: 'deal',\n\t\t\t\ttemplateMode: 'view',\n\t\t\t};\n\n\t\t\tif (Type.isInteger(actionData.paymentId))\n\t\t\t{\n\t\t\t\tparams.paymentId = actionData.paymentId;\n\t\t\t}\n\n\t\t\tif (Type.isInteger(actionData.shipmentId))\n\t\t\t{\n\t\t\t\tparams.shipmentId = actionData.shipmentId;\n\t\t\t}\n\n\t\t\tif (Type.isStringFilled(actionData.analyticsLabel))\n\t\t\t{\n\t\t\t\tparams.analyticsLabel = actionData.analyticsLabel;\n\t\t\t}\n\n\t\t\tBX.Salescenter.Manager.openApplication(params);\n\t\t});\n\t}\n}\n","import {Base} from './base';\nimport ConfigurableItem from '../configurable-item';\nimport {PULL} from 'pull.client';\nimport {ajax, Type} from 'main.core';\n\nexport class Delivery extends Base\n{\n\t#needCheckRequestStatus: boolean = null;\n\t#checkRequestStatusTimeout: number = null;\n\t#isPullSubscribed: boolean = false;\n\n\tstatic isItemSupported(item: ConfigurableItem): boolean\n\t{\n\t\treturn item.getType() === 'Activity:Delivery';\n\t}\n\n\tonInitialize(item: ConfigurableItem): void\n\t{\n\t\tthis.#updateCheckRequestStatus(item);\n\t\tthis.#subscribePullEvents(item);\n\t}\n\n\tonItemAction(item: ConfigurableItem, actionParams: ActionParams): void\n\t{\n\t\tconst {action, actionType, actionData, animationCallbacks} = actionParams;\n\n\t\tif (actionType !== 'jsEvent')\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (action === 'Delivery:MakeCall' && actionData)\n\t\t{\n\t\t\tthis.#makeCall(actionData);\n\t\t}\n\t}\n\n\tonAfterItemRefreshLayout(item: ConfigurableItem): void\n\t{\n\t\tthis.#updateCheckRequestStatus(item);\n\t}\n\n\t#makeCall(actionData): void\n\t{\n\t\tif (\n\t\t\t!Type.isStringFilled(actionData.phoneNumber)\n\t\t\t|| !Type.isBoolean(actionData.canUserPerformCalls)\n\t\t)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (\n\t\t\t!Type.isUndefined(window.top['BXIM'])\n\t\t\t&& actionData.canUserPerformCalls !== false\n\t\t)\n\t\t{\n\t\t\twindow.top['BXIM'].phoneTo(actionData.phoneNumber);\n\t\t}\n\t\telse\n\t\t{\n\t\t\twindow.open('tel:' + actionData.phoneNumber, '_self');\n\t\t}\n\t}\n\n\t#subscribePullEvents(item: ConfigurableItem): void\n\t{\n\t\tif (this.#isPullSubscribed)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.#subscribeShipmentEvents(item);\n\t\tthis.#subscribeDeliveryServiceEvents(item);\n\t\tthis.#subscribeDeliveryRequestEvents(item);\n\n\t\tthis.#isPullSubscribed = true;\n\t}\n\n\t#subscribeShipmentEvents(item: ConfigurableItem): void\n\t{\n\t\tconst shipmentIds = this.#getShipmentIds(item);\n\n\t\tPULL.subscribe({\n\t\t\tmoduleId: 'crm',\n\t\t\tcommand: 'onOrderShipmentSave',\n\t\t\tcallback: (params) => {\n\t\t\t\tif (shipmentIds.some(id => id == params.FIELDS.ID))\n\t\t\t\t{\n\t\t\t\t\titem.reloadFromServer();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tPULL.extendWatch('CRM_ENTITY_ORDER_SHIPMENT');\n\t}\n\n\t#subscribeDeliveryServiceEvents(item: ConfigurableItem): void\n\t{\n\t\tconst deliveryServiceIds = this.#getDeliveryServiceIds(item);\n\n\t\tPULL.subscribe({\n\t\t\tmoduleId: 'sale',\n\t\t\tcommand: 'onDeliveryServiceSave',\n\t\t\tcallback: (params) => {\n\t\t\t\tif (deliveryServiceIds.some(id => id == params.ID))\n\t\t\t\t{\n\t\t\t\t\titem.reloadFromServer();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tPULL.extendWatch('SALE_DELIVERY_SERVICE');\n\t}\n\n\t#subscribeDeliveryRequestEvents(item: ConfigurableItem): void\n\t{\n\t\tconst deliveryRequest = this.#getDeliveryRequest(item);\n\n\t\tPULL.subscribe({\n\t\t\tmoduleId: 'sale',\n\t\t\tcommand: 'onDeliveryRequestUpdate',\n\t\t\tcallback: (params) => {\n\t\t\t\tif (deliveryRequest && deliveryRequest.id == params.ID)\n\t\t\t\t{\n\t\t\t\t\titem.reloadFromServer();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tPULL.subscribe({\n\t\t\tmoduleId: 'sale',\n\t\t\tcommand: 'onDeliveryRequestDelete',\n\t\t\tcallback: (params) => {\n\t\t\t\tif (deliveryRequest && deliveryRequest.id == params.ID)\n\t\t\t\t{\n\t\t\t\t\titem.reloadFromServer();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tPULL.extendWatch('SALE_DELIVERY_REQUEST');\n\t}\n\n\t#checkRequestStatus(): void\n\t{\n\t\tajax.runAction('crm.timeline.deliveryactivity.checkrequeststatus');\n\t}\n\n\t#updateCheckRequestStatus(item: ConfigurableItem): void\n\t{\n\t\tconst deliveryRequest = this.#getDeliveryRequest(item);\n\t\tconst needCheckRequestStatus = (\n\t\t\tdeliveryRequest\n\t\t\t&& deliveryRequest.isProcessed === false\n\t\t);\n\t\tif (needCheckRequestStatus && !this.#needCheckRequestStatus)\n\t\t{\n\t\t\tclearTimeout(this.#checkRequestStatusTimeout);\n\t\t\tthis.#checkRequestStatusTimeout = setInterval(\n\t\t\t\t() => this.#checkRequestStatus(),\n\t\t\t\t30 * 1000\n\t\t\t);\n\t\t}\n\t\telse if (!needCheckRequestStatus && this.#needCheckRequestStatus)\n\t\t{\n\t\t\tclearTimeout(this.#checkRequestStatusTimeout);\n\t\t}\n\n\t\tthis.#needCheckRequestStatus = needCheckRequestStatus;\n\t}\n\n\t#getDeliveryRequest(item: ConfigurableItem): ?Object\n\t{\n\t\tconst dataPayload = item.getDataPayload();\n\n\t\tif (!Type.isObject(dataPayload.deliveryRequest))\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\treturn dataPayload.deliveryRequest;\n\t}\n\n\t#getDeliveryServiceIds(item: ConfigurableItem): Array\n\t{\n\t\tconst dataPayload = item.getDataPayload();\n\n\t\tif (!Type.isArray(dataPayload.deliveryServiceIds))\n\t\t{\n\t\t\treturn [];\n\t\t}\n\n\t\treturn dataPayload.deliveryServiceIds;\n\t}\n\n\t#getShipmentIds(item: ConfigurableItem): Array\n\t{\n\t\tconst dataPayload = item.getDataPayload();\n\n\t\tif (!Type.isArray(dataPayload.shipmentIds))\n\t\t{\n\t\t\treturn [];\n\t\t}\n\n\t\treturn dataPayload.shipmentIds;\n\t}\n}\n","import {Base} from './base';\nimport ConfigurableItem from '../configurable-item';\nimport { ActionType } from \"../action\";\n\nexport class RestApp extends Base\n{\n\tonItemAction(item: ConfigurableItem, actionParams: ActionParams): void\n\t{\n\t\tconst {action, actionType, actionData} = actionParams;\n\t\tif (!ActionType.isJsEvent(actionType))\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tif (action === 'Activity:ConfigurableRestApp:OpenApp')\n\t\t{\n\t\t\tthis.#openRestAppSlider(actionData);\n\t\t}\n\t}\n\n\t#openRestAppSlider(params: Object): void\n\t{\n\t\tconst appId = params.restAppId;\n\t\tdelete params.restAppId;\n\t\tif (BX.rest && BX.rest.AppLayout)\n\t\t{\n\t\t\tBX.rest.AppLayout.openApplication(appId, params);\n\t\t}\n\t}\n\n\tstatic isItemSupported(item: ConfigurableItem): boolean\n\t{\n\t\treturn (item.getType() === 'Activity:ConfigurableRestApp');\n\t}\n}\n","import { Type } from 'main.core';\nimport { MessageBox, MessageBoxButtons } from 'ui.dialogs.messagebox';\nimport { Base } from './base';\nimport ConfigurableItem from '../configurable-item';\n\nexport class Comment extends Base\n{\n\tgetDeleteActionMethod(): string\n\t{\n\t\treturn 'crm.timeline.comment.delete';\n\t}\n\n\tgetDeleteActionCfg(recordId: Number, ownerTypeId: Number, ownerId: Number): Object\n\t{\n\t\treturn {\n\t\t\tdata: {\n\t\t\t\tid: recordId,\n\t\t\t\townerTypeId: ownerTypeId,\n\t\t\t\townerId: ownerId,\n\t\t\t}\n\t\t};\n\t}\n\n\tonItemAction(item: ConfigurableItem, actionParams: ActionParams): void\n\t{\n\t\tconst { action, actionType, actionData, animationCallbacks } = actionParams;\n\t\tif (actionType !== 'jsEvent')\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (action === 'Comment:Edit')\n\t\t{\n\t\t\tthis.#showEditor(item);\n\t\t}\n\n\t\tif (action === 'Comment:Delete' && actionData)\n\t\t{\n\t\t\tthis.#onCommentDelete(actionData, animationCallbacks);\n\t\t}\n\n\t\tif (action === 'Comment:StartEdit')\n\t\t{\n\t\t\titem.highlightContentBlockById('commentContent', true);\n\t\t}\n\n\t\tif (action === 'Comment:FinishEdit')\n\t\t{\n\t\t\titem.highlightContentBlockById('commentContent', false);\n\t\t}\n\t}\n\n\t#showEditor(item: ConfigurableItem): void\n\t{\n\t\tconst commentBlock = item.getLayoutContentBlockById('commentContent');\n\t\tif (commentBlock)\n\t\t{\n\t\t\tcommentBlock.startEditing();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthrow new Error('Vue component \"CommentContent\" was not found');\n\t\t}\n\t}\n\n\t#onCommentDelete(actionData: Object, animationCallbacks: ?Object): void\n\t{\n\t\tif (!this.#isValidParams(actionData))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst confirmationText = Type.isStringFilled(actionData.confirmationText) ? actionData.confirmationText : '';\n\t\tif (confirmationText)\n\t\t{\n\t\t\tMessageBox.show({\n\t\t\t\tmessage: confirmationText,\n\t\t\t\tmodal: true,\n\t\t\t\tbuttons: MessageBoxButtons.YES_NO,\n\t\t\t\tonYes: () => {\n\t\t\t\t\treturn this.runDeleteAction(actionData.commentId, actionData.ownerTypeId, actionData.ownerId, animationCallbacks);\n\t\t\t\t},\n\t\t\t\tonNo: (messageBox) => {\n\t\t\t\t\tmessageBox.close();\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.runDeleteAction(actionData.commentId, actionData.ownerTypeId, actionData.ownerId);\n\t\t}\n\t}\n\n\t#isValidParams(params: Object): boolean\n\t{\n\t\treturn Type.isNumber(params.commentId)\n\t\t\t&& Type.isNumber(params.ownerId)\n\t\t\t&& Type.isNumber(params.ownerTypeId);\n\t}\n\n\tstatic isItemSupported(item: ConfigurableItem): boolean\n\t{\n\t\treturn (item.getType() === 'Comment');\n\t}\n}\n","import Text from '../text';\nimport {Loc} from 'main.core'\n\nexport default {\n\tprops: {\n\t\ttype: {\n\t\t\ttype: String,\n\t\t},\n\t\ttimeStart: {\n\t\t\ttype: Number,\n\t\t},\n\t\ttimeEnd: {\n\t\t\ttype: Number,\n\t\t},\n\t\tslotLength: {\n\t\t\ttype: Number,\n\t\t},\n\t\tisEditable: {\n\t\t\ttype: Boolean,\n\t\t}\n\t},\n\tcomponents: {\n\t\tText,\n\t},\n\tcomputed: {\n\t\titemClassName(): string\n\t\t{\n\t\t\treturn 'crm-timeline-calendar-sharing-item-' + (this.isEditable ? 'editable' : 'non-editable');\n\t\t},\n\t},\n\tmethods: {\n\t\tcreateItemText()\n\t\t{\n\t\t\treturn this.formatType(this.type)\n\t\t\t\t+ ', '\n\t\t\t\t+ this.formatDateToTime(this.timeStart)\n\t\t\t\t+ '-'\n\t\t\t\t+ this.formatDateToTime(this.timeEnd)\n\t\t\t\t+ ', '\n\t\t\t\t+ this.formatSlotLength(this.slotLength)\n\t\t\t;\n\t\t},\n\t\tformatType(type)\n\t\t{\n\t\t\tswitch (type) {\n\t\t\t\tcase 'work_days':\n\t\t\t\t\treturn Loc.getMessage('CRM_TIMELINE_ITEM_CALENDAR_SHARING_SLOTS_WORK_DAYS');\n\t\t\t\tdefault:\n\t\t\t\t\treturn '';\n\t\t\t}\n\t\t},\n\t\tformatDateToTime(date)\n\t\t{\n\t\t\treturn this.formatTimeValue(parseInt(date / 60)) + ':' + this.formatTimeValue(date % 60);\n\t\t},\n\t\tformatTimeValue(value)\n\t\t{\n\t\t\tif (parseInt(value) < 10)\n\t\t\t{\n\t\t\t\tvalue = '0' + value;\n\t\t\t}\n\n\t\t\treturn value;\n\t\t},\n\t\tformatSlotLength(length)\n\t\t{\n\t\t\tconst hours = parseInt(length / 60);\n\t\t\tconst minutes = length % 60;\n\n\t\t\tlet hint = `${minutes} ${Loc.getMessage('CRM_TIMELINE_ITEM_CALENDAR_SHARING_SLOTS_MINUTES')}`;\n\t\t\tif (hours > 0)\n\t\t\t{\n\t\t\t\thint = `${hours} ${Loc.getMessage('CRM_TIMELINE_ITEM_CALENDAR_SHARING_SLOTS_HOUR')}`;\n\t\t\t\tif (minutes > 0)\n\t\t\t\t{\n\t\t\t\t\thint += ` ${minutes} ${Loc.getMessage('CRM_TIMELINE_ITEM_CALENDAR_SHARING_SLOTS_MINUTES')}`;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn Loc.getMessage('CRM_TIMELINE_ITEM_CALENDAR_SHARING_SLOTS_LENGTH', {\n\t\t\t\t'%SLOT_LENGTH%': hint,\n\t\t\t});\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div :class=\"[itemClassName]\">\n\t\t\t<span>{{createItemText()}}</span>\n\t\t</div>\n\t`,\n}","import sharingSlotsListItem from \"./sharing-slots-list-item\";\nimport {Loc} from \"main.core\";\nexport default {\n\tprops: {\n\t\tlistItems: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t\tdefault: [],\n\t\t},\n\t\tisEditable: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tdata()\n\t{\n\n\t},\n\tcomponents: {\n\t\tsharingSlotsListItem,\n\t},\n\ttemplate: `\n\t\t<div>\n\t\t\t<sharingSlotsListItem\n\t\t\t\tv-for=\"item in listItems\"\n\t\t\t\tv-bind=\"item.properties\"\n\t\t\t\t:is-editable=\"isEditable\"\n\t\t\t/>\n\t\t</div>\n\t`,\n};","import {ajax as Ajax} from 'main.core';\nimport {ActionParams, Base} from '../base';\nimport ConfigurableItem from 'crm.timeline.item';\nimport SharingSlotsList from \"../../components/content-blocks/calendar/sharing-slots-list\";\nimport {Router} from 'crm.router';\nimport { DialogQr } from 'calendar.sharing.interface';\n\n\nexport class Sharing extends Base\n{\n\tonItemAction(item: ConfigurableItem, actionParams: ActionParams): void\n\t{\n\t\tconst { action, actionType, actionData } = actionParams;\n\n\t\tif (actionType !== 'jsEvent')\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (action === 'Activity:CalendarSharing:OpenCalendarEvent')\n\t\t{\n\t\t\tthis.#openCalendarEvent(item, actionData);\n\t\t}\n\n\t\tif (action === 'Activity:CalendarSharing:StartVideoconference')\n\t\t{\n\t\t\tthis.#startVideoconference(item, actionData);\n\t\t}\n\n\t\tif (action === 'CalendarSharingLinkCopied:OpenPublicPageInNewTab')\n\t\t{\n\t\t\twindow.open(actionData.url)\n\t\t}\n\n\t\tif (action === 'CalendarSharingInvitationSent:ShowQr')\n\t\t{\n\t\t\tconst dialogQr = new DialogQr({\n\t\t\t\tsharingUrl: actionData.url,\n\t\t\t\tcontext: \"crm\",\n\t\t\t});\n\t\t\tdialogQr.show();\n\t\t}\n\t}\n\n\t#openCalendarEvent(item, actionData): void\n\t{\n\t\treturn Router.Instance.openCalendarEventSlider(actionData.eventId, actionData.isSharing);\n\t}\n\n\tasync #startVideoconference(item ,actionData): Promise<void>\n\t{\n\t\tlet response;\n\n\t\ttry\n\t\t{\n\t\t\tresponse = await Ajax.runAction('crm.timeline.calendar.sharing.getConferenceChatId', {\n\t\t\t\tdata: {\n\t\t\t\t\teventId: actionData.eventId,\n\t\t\t\t\townerId: actionData.ownerId,\n\t\t\t\t\townerTypeId: actionData.ownerTypeId,\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t\tcatch (responseWithError)\n\t\t{\n\t\t\tconsole.error(responseWithError);\n\t\t\treturn;\n\t\t}\n\n\t\tconst chatId = response.data.chatId;\n\t\tif (top.window.BXIM && chatId)\n\t\t{\n\t\t\ttop.window.BXIM.openMessenger('chat' + parseInt(chatId));\n\t\t}\n\t}\n\n\tgetContentBlockComponents(Item: ConfigurableItem): Object\n\t{\n\t\treturn {\n\t\t\tSharingSlotsList,\n\t\t};\n\t}\n\n\tstatic isItemSupported(item: ConfigurableItem): boolean\n\t{\n\t\treturn item.getType() === 'CalendarSharingInvitationSent'\n\t\t\t|| item.getType() === 'CalendarSharing'\n\t\t\t|| item.getType() === 'Activity:CalendarSharing'\n\t\t\t|| item.getType() === 'CalendarSharingLinkCopied'\n\t\t;\n\t}\n}","import { Base } from './base';\nimport ConfigurableItem from '../configurable-item';\nimport type { ActionParams } from './base';\nimport { ajax, Loc } from 'main.core';\nimport { UI } from 'ui.notification';\nimport { MessageBox } from 'ui.dialogs.messagebox';\n\nexport class Task extends Base\n{\n\tstatic isItemSupported(item: ConfigurableItem): boolean\n\t{\n\t\treturn (\n\t\t\titem.getType() === 'Activity:TasksTask'\n\t\t\t|| item.getType() === 'TasksTaskCreation'\n\t\t\t|| item.getType() === 'TasksTaskModification'\n\t\t\t|| item.getType() === 'Activity:TasksTaskComment'\n\t\t);\n\t}\n\n\tonItemAction(item: ConfigurableItem, actionParams: ActionParams): void\n\t{\n\t\tconst { action, actionType, actionData, animationCallbacks } = actionParams;\n\t\tif (!actionData)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst taskId = actionData.taskId ?? null;\n\t\tif (!taskId)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (actionType !== 'jsEvent')\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tswitch (action)\n\t\t{\n\t\t\tcase 'Task:Ping':\n\t\t\t\tthis.ping(actionData);\n\t\t\t\tbreak;\n\n\t\t\tcase 'Task:ChangeDeadline':\n\t\t\t\tthis.changeDeadline(item, actionData);\n\t\t\t\tbreak;\n\n\t\t\tcase 'Task:View':\n\t\t\t\tthis.view(actionData);\n\t\t\t\tbreak;\n\n\t\t\tcase 'Task:Edit':\n\t\t\t\tthis.edit(actionData);\n\t\t\t\tbreak\n\n\t\t\tcase 'Task:Delete':\n\t\t\t\tthis.delete(actionData);\n\t\t\t\tbreak;\n\n\t\t\tcase 'Task:ResultView':\n\t\t\t\tthis.viewResult(actionData);\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tping(actionData): void\n\t{\n\t\tif (!actionData.taskId)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tajax.runAction('tasks.task.ping', {\n\t\t\t\tdata: {\n\t\t\t\t\ttaskId: actionData.taskId,\n\t\t\t\t},\n\t\t\t},\n\t\t).then((response) => {\n\t\t\tif (response.status === 'success')\n\t\t\t{\n\t\t\t\tUI.Notification.Center.notify({\n\t\t\t\t\tcontent: Loc.getMessage('CRM_TIMELINE_ITEM_TASK_PING_SENT'),\n\t\t\t\t\tautoHideDelay: 3000,\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\tchangeDeadline(item: ConfigurableItem, actionData): void\n\t{\n\t\tif (!actionData.taskId || !actionData.value)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tajax.runAction('tasks.task.update', {\n\t\t\t\tdata: {\n\t\t\t\t\ttaskId: actionData.taskId,\n\t\t\t\t\tfields: {\n\t\t\t\t\t\tDEADLINE: (new Date(actionData.valueTs * 1000)).toISOString(),\n\t\t\t\t\t},\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tskipTimeZoneOffset: 'DEADLINE',\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t},\n\t\t).catch(response => {\n\t\t\tconst errors = response.errors ??  null;\n\t\t\tif (errors.length > 0)\n\t\t\t{\n\t\t\t\tUI.Notification.Center.notify({\n\t\t\t\t\tcontent: errors[0].message,\n\t\t\t\t\tautoHideDelay: 3000,\n\t\t\t\t});\n\t\t\t\titem.forceRefreshLayout();\n\t\t\t}\n\t\t});\n\t}\n\n\tview(actionData): void\n\t{\n\t\tif (!actionData.path)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tBX.SidePanel.Instance.open(actionData.path, {\n\t\t\tcacheable: false,\n\t\t})\n\t}\n\n\tedit(actionData): void\n\t{\n\t\tif (!actionData.path)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tBX.SidePanel.Instance.open(actionData.path, {\n\t\t\tcacheable: false,\n\t\t})\n\t}\n\n\tdelete(actionData): void\n\t{\n\t\tif (!actionData.taskId)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst messageBox = new MessageBox(\n\t\t\t{\n\t\t\t\tmessage: Loc.getMessage('CRM_TIMELINE_ITEM_TASK_CONFIRM_DELETE'),\n\t\t\t\tbuttons: BX.UI.Dialogs.MessageBoxButtons.YES_NO,\n\t\t\t\tonYes: () => {\n\t\t\t\t\tajax.runAction('tasks.task.delete', {\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\ttaskId: actionData.taskId,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t)\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\tmessageBox.close();\n\t\t\t\t\t})\n\t\t\t\t\t.catch((error) => {\n\t\t\t\t\t\tUI.Notification.Center.notify({\n\t\t\t\t\t\t\tcontent: error.errors[0].message ?? 'Error',\n\t\t\t\t\t\t\tautoHideDelay: 3000,\n\t\t\t\t\t\t});\n\t\t\t\t\t\tmessageBox.close();\n\t\t\t\t\t})\n\t\t\t\t},\n\t\t\t\tonNo: () => {\n\t\t\t\t\tmessageBox.close();\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\n\t\tmessageBox.show();\n\t}\n\n\tviewResult(actionData): void\n\t{\n\t\tif (!actionData.taskId)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (!actionData.path)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tajax.runAction('tasks.task.result.getLast', {\n\t\t\t\tdata: {\n\t\t\t\t\ttaskId: actionData.taskId,\n\t\t\t\t},\n\t\t\t},\n\t\t).then((response) => {\n\t\t\tif (response.status === 'success')\n\t\t\t{\n\t\t\t\tconst resultId = response.data.result;\n\t\t\t\tBX.SidePanel.Instance.open(actionData.path + '?RID=' + resultId, {\n\t\t\t\t\tcacheable: false,\n\t\t\t\t})\n\t\t\t}\n\t\t});\n\t}\n}","import ControllerManager from './controller-manager';\n\nimport {Activity} from './controllers/activity';\nimport {CommonContentBlocks} from './controllers/common-content-blocks';\nimport {OpenLines} from './controllers/openlines';\nimport {Modification} from './controllers/modification';\nimport {SignDocument} from './controllers/sign-document';\nimport {Document} from './controllers/document';\nimport {Call} from './controllers/call';\nimport {ToDo} from './controllers/todo';\nimport {Helpdesk} from './controllers/helpdesk';\nimport {Payment} from './controllers/payment';\nimport {DealProductList} from './controllers/deal-product-list';\nimport {Email} from './controllers/email';\nimport {OrderCheck} from './controllers/order-check';\nimport {FinalSummary} from './controllers/finalsummary';\nimport {SalescenterApp} from './controllers/salescenter-app';\nimport {Delivery} from './controllers/delivery';\nimport {RestApp} from './controllers/rest-app';\nimport {Comment} from './controllers/comment';\nimport {Sharing} from './controllers/calendar/sharing';\nimport {Task} from './controllers/task';\n\nControllerManager.registerController(Activity);\nControllerManager.registerController(CommonContentBlocks);\nControllerManager.registerController(OpenLines);\nControllerManager.registerController(Modification);\nControllerManager.registerController(SignDocument);\nControllerManager.registerController(Document);\nControllerManager.registerController(Call);\nControllerManager.registerController(ToDo);\nControllerManager.registerController(Helpdesk);\nControllerManager.registerController(Payment);\nControllerManager.registerController(DealProductList);\nControllerManager.registerController(Email);\nControllerManager.registerController(OrderCheck);\nControllerManager.registerController(FinalSummary);\nControllerManager.registerController(SalescenterApp);\nControllerManager.registerController(Delivery);\nControllerManager.registerController(RestApp);\nControllerManager.registerController(Comment);\nControllerManager.registerController(Sharing);\nControllerManager.registerController(Task);"],"names":["Item","_id","_isTerminated","_wrapper","id","BX","type","isNotEmptyString","util","getRandomString","data","Error","options","anchor","previousSibling","clearLayout","layout","Dom","remove","undefined","wrapper","className","timeout","addClass","Type","isNumber","window","setTimeout","removeWrapperClass","bind","removeClass","addWrapperClass","terminated","IconBackgroundColor","Icon","props","code","String","required","default","counterType","backgroundColorToken","PRIMARY","backgroundUri","inject","computed","isLogMessage","counterNodeContainer","$refs","counter","styles","backgroundImage","encodeURI","Text","encode","methods","renderCounter","clean","Counter","value","border","color","Color","toUpperCase","renderTo","mounted","watch","newCounterType","$nextTick","template","Menu","vueComponent","menuItems","menuOptions","angle","cacheable","items","item","push","createMenuItem","MenuManager","show","hasOwnProperty","delimiter","text","title","result","icon","menu","subItem","Object","values","action","href","onclick","onMenuItemClick","getCurrentMenu","close","Action","execute","AnimationTarget","block","AnimationType","disable","loader","ActionType","JS_EVENT","AJAX_ACTION","STARTED","FINISHED","FAILED","isJsEvent","isAjaxAction","freeze","params","_classPrivateFieldInitSpec","actionParams","isPlainObject","animation","analytics","Promise","resolve","reject","$Bitrix","eventEmitter","emit","actionType","actionData","animationCallbacks","onStart","onStop","isJsCode","eval","ajax","runAction","analyticsLabel","then","response","UI","Notification","Center","notify","content","errors","message","autoHideDelay","isCallRestBatch","Rest","callBatch","restResult","answer","error","error_description","isRedirect","linkAttrs","target","link","create","attrs","style","display","append","document","body","click","isShowMenu","showMenu","bindElement","$el","minWidth","offsetWidth","param","isUndefined","paramName","paramValue","isDate","DateTimeFormat","format","DatetimeConverter","getSiteDateTimeFormat","method","filter","state","scope","isReadOnly","hideIfReadonly","sort","a","b","$root","setFaded","showLoader","isFunction","setDisabled","setLoading","force","forever","hit","ChangeStreamButton","disableIfReadonly","Boolean","isReadonlyMode","isComplete","isShowPinButton","isShowUnpinButton","executeAction","onClick","disabled","isReadonly","markCheckboxUnchecked","Title","getValue","TagType","Tag","hint","SECONDARY","tagTypeToLabelColorDict","Label","LIGHT_BLUE","LIGHT","SUCCESS","LIGHT_GREEN","WARNING","LIGHT_YELLOW","FAILURE","LIGHT_RED","tagContainerRef","tag","getLabelColorFromTagType","tagType","lowerCaseTagType","toLowerCase","labelColor","renderTag","tagOptions","uppercaseTitle","isString","label","fill","render","updated","User","detailUrl","imageUrl","backgroundSize","FormatDate","name","timestamp","Number","datePlaceholder","useShortTimeFormat","class","Array","formattedDate","converter","createFromServerTimestamp","toUserTime","toTimeString","toDatetimeString","Hint","isMouseOnHintArea","hintPopup","textBlocks","hintContentIcon","iconElement","classname","hintContentIconClassname","children","hintContentText","hintContentTextBlocks","map","getContentBlockNode","baseClassname","hintIconClassname","hasContent","length","getHintContent","getPopupOptions","darkMode","autoHide","maxWidth","bindOptions","position","getPopupPosition","hintElem","defaultAngleLeftOffset","Popup","getOption","width","hintWidth","left","hintLeftOffset","top","hintTopOffset","getPosition","popupWidth","getPopupContainer","getPopupAngleOffset","popupContainer","angleWidth","onMouseEnterToPopup","onHintAreaMouseLeave","hideHintPopup","onMouseEnterToHint","showHintPopupWithDebounce","showHintPopup","isShown","Event","setBindElement","setAngle","offset","adjustPosition","Runtime","debounce","unbind","destroy","hideHintPopupWithDebounce","contentBlock","getTextNode","getLinkNode","textOptions","linkOptions","actionObj","Header","components","titleAction","date","changeStreamButton","tags","user","infoHelper","visibleTags","isVisibleTagFilter","visibleAndAscSortedTags","tagsCopy","clone","tagsAscSorter","isShowDate","tagA","tagB","getChangeStreamButton","Logo","addIcon","addIconType","iconType","backgroundUrl","inCircle","currentIcon","iconClassname","addIconClassname","iconInteriorStyle","parseInt","newIcon","setIcon","CalendarIcon","userTime","month","dayWeek","time","LogoCalendar","BitrixVue","cloneComponent","Body","logo","blocks","blockRefs","visibleBlocks","forEach","index","isDomNode","setAttribute","rendererName","beforeUpdate","keys","aSort","bSort","contentContainerClassname","getContentBlockById","blockId","getLogo","saveRef","ref","ButtonState","BaseButton","DEFAULT","currentState","itemStateToButtonStateDict","LOADING","UIButton","State","WAITING","DISABLED","setButtonState","loading","onLayoutUpdated","created","subscribe","beforeDestroy","unsubscribe","AdditionalButtonIcon","NOTE","SCRIPT","PRINT","DOTS","AdditionalButtonColor","AdditionalButton","iconName","validator","indexOf","loaderHtml","Loader","mode","size","outerHTML","MenuId","buttons","isMenuFilled","itemsArray","buttonProps","beforeUnmount","getMenuById","LayoutMenu","ButtonType","Button","popup","uiButton","timerSecondsRemaining","itemTypeToButtonColorDict","LIGHT_BORDER","ICON","LINK","buttonContainerRef","buttonContainer","getButtonOptions","upperCaseIconName","upperCaseButtonSize","round","dependOnTheme","Size","getUiButton","disableWithTimer","sec","btn","remainingSeconds","setText","formatSeconds","timer","setInterval","clearInterval","minutes","Math","floor","seconds","formatMinutes","formatNumber","num","parentSetButtonState","setState","renderButton","innerHTML","button","newValue","Buttons","getButtonById","buttonId","reduce","found","ButtonScope","Footer","additionalButtons","maxBaseButtonsCount","containerClassname","baseButtons","visibleAndSortedButtons","slice","moreButtons","visibleButtons","buttonsSorter","visibleAndSortedAdditionalButtons","visibleAdditionalButtons","visibleButtonsFilter","additionalButtonsArray","entries","hasMenu","buttonItem","HIDDEN","MOBILE","buttonA","buttonB","foundButton","getMenu","MarketPanel","detailsText","detailsTextAction","needShowDetailsText","isStringFilled","UserPick","StreamType","history","scheduled","pinned","initialLayout","currentUser","onAction","Function","streamType","isFaded","provide","onActionEvent","event","eventData","getData","setLayout","newLayout","faded","parentNode","hide","getHeaderChangeStreamButton","header","getFooterButtonById","footer","getFooterMenu","highlightContentBlockById","isHighlighted","timelineCardClassname","Layout","menuItem","Base","recordId","ownerTypeId","ownerId","Ajax","getDeleteActionMethod","getDeleteActionCfg","ControllerManager","foundControllers","controller","getRegisteredControllers","isItemSupported","controllerInstance","onInitialize","timelineId","ConfigurableItem","_classPrivateMethodInitSpec","settings","_setId","setContainer","container","itemClassName","setData","getInstance","getItemControllers","payload","setWrapper","initLayoutApp","_classPrivateMethodGet","needBindToContainer","bindTo","getBindToNode","insertBefore","getWrapper","nextSibling","onAfterItemLayout","prop","getBoolean","isElementNode","getLayout","asPlainObject","onAfterItemRefreshLayout","useAnchorNextSibling","onBeforeItemClearLayout","unmount","Date","now","extractDate","getId","isInteger","toInteger","replace","getContainer","forceRefreshLayout","historyIds","activityIds","refreshLayout","catch","err","console","self","initialize","TimelineItem","isBoolean","createApp","contentBlockComponents","componentName","component","mount","getCurrentUser","onItemAction","assign","getContentBlockComponents","Activity","activityId","confirmationText","MessageBox","modal","MessageBoxButtons","YES_NO","onYes","runDeleteAction","onNo","messageBox","itemType","getType","editor","viewActivity","editActivity","CrmActivityEditor","getDefault","TextColor","TextWeight","TextSize","weight","multiline","colorClassname","weightClassname","sizeClassname","upperCaseColorProp","upperCaseWeightProp","NORMAL","SM","encodedText","bold","getActionParam","withTime","extends","dateInUserTimezone","CoreTextHelper","toFormatString","toDateString","inline","wordWrap","fixedWidth","isTitleCropped","titleElem","scrollWidth","clientWidth","attr","LogoType","defaultPlaybackRateValues","TimelineAudio","AudioPlayer","playbackRateValues","isShowPlaybackRateMenu","recordName","mini","parentData","playbackRate","isSeeking","isDark","isMobile","controlClassname","play","timeCurrentClassname","totalTimeClassname","progressPosition","progressInPixel","seekPosition","minSeekWidth","seekWidth","seek","formatTimeCurrent","formatTime","timeCurrent","formatTimeTotal","timeTotal","playbackRateMenuItems","rate","createPlaybackRateMenuItem","getPlaybackRateOptionText","isActive","changePlaybackRate","source","menuWindow","popupWindow","isFloat","showPlaybackRateMenu","playbackRateButtonContainer","events","onPopupShow","btnContainerWidth","getPopupWindow","setOffset","offsetLeft","n","startSeeking","clientX","pause","finishSeeking","seeking","setSeekByCursor","timeline","track","right","setPosition","preventDefault","x","loaded","loadFile","pixelPerPercent","setProgress","currentTime","progress","percent","pixel","changeLogoIcon","$parent","audioEventRouterWrapper","eventName","audioEventRouter","CALL_AUDIO_PAUSE","CALL_AUDIO_PLAY","ClientMark","mark","ClientMarkType","POSITIVE","NEUTRAL","NEGATIVE","opportunity","currencyId","CurrencyCore","currencyFormat","isEdit","currentValue","initialValue","actionTimeoutId","textProps","$props","enableEdit","cancelScheduledActionExecution","input","focus","disableEdit","scheduleActionExecution","clearTimeout","actionDescription","EditableDescriptionHeight","EditableDescriptionBackgroundColor","EditableDescription","saveAction","editable","height","SHORT","backgroundColor","oldValue","isSaving","isLongText","isCollapsed","heightClassnameModifier","bgColorClassnameModifier","LONG","YELLOW","WHITE","isEditable","saveTextButtonProps","saveTextButtonState","Loc","getMessage","cancelEditingButtonProps","trimValue","trim","expandButtonText","isEditButtonVisible","startEditing","textarea","adjustHeight","emitEvent","elem","scrollHeight","onPressEnter","ctrlKey","Browser","isMac","metaKey","altKey","saveText","encodedTrimText","executeSaveAction","checkIsLongText","finally","cancelEditing","clearText","toggleIsCollapsed","textBlock","textBlockMaxHeightStyle","getComputedStyle","getPropertyValue","textBlockMaxHeight","parseFloat","parentComputedStyles","rootElement","parentHeight","offsetHeight","paddingTop","paddingBottom","newTextValue","Link","currentDate","initialDate","currentDateObject","currentDateInSiteFormat","getSiteDateFormat","openCalendar","calendar","node","bTime","bHideTime","bSetFocus","callback_after","newDate","getTime","PlayerAlert","LineOfTextBlocks","AlertColor","AlertIcon","NONE","Note","deleteConfirmationText","saveNoteAction","deleteNoteAction","updatedBy","note","oldNote","isExist","isDeleting","shortNoteLength","noteText","shortNote","getNoteLineBreaksCount","currentLineBreakerCount","letterIndex","letter","maxLineBreakerCount","expandNoteBtnText","isDeleteButtonVisible","saveButtonState","cancelButtonState","isNoteVisible","isShowExpandBtn","toggleNoteLength","setEditMode","editMode","onEnterHandle","saveNote","deleteNote","executeDeleteAction","status","actionObject","handleWindowResize","windowWidth","innerWidth","split","destroyed","DatePillColor","includes","currentTimestamp","initialTimestamp","isPillReadonly","withDayOfWeek","calendarParams","TimestampConverter","userToBrowser","valueTs","MoneyPill","moneyHtml","InfoGroup","attributes","hasAudioPlayer","fileExtension","titleFirstPart","titleLastPartSize","titleLastPart","fileIcon","FileIcon","FileList","File","BIcon","numberOfFiles","files","updateParams","visibleFilesNumber","visibleFilesAmount","visibleFiles","editFilesBtnClassname","expandFileListBtnTitle","isAllFilesVisible","editFilesBtnIcon","Set","PENCIL_40","addVisibleFilesBtnIcon","CHEVRON_DOWN","isShowExpandFileListBtn","expandBtnIconClassname","fileProps","file","viewUrl","showFileUploaderPopup","FileUploaderPopup","handleShowFilesBtnClick","collapseFileList","expandFileList","SmsMessage","messageHtml","htmlspecialchars","TYPE_LOAD_FILES_BLOCK","TYPE_LOAD_TEXT_CONTENT","filesCount","hasInlineFiles","loadAction","isTextLoaded","isTextChanged","isMoving","isFilesBlockDisplayed","filesHtmlBlock","textWrapperClassName","html","registerImages","LazyLoad","showImages","parentToggleIsCollapsed","executeLoadAction","parentCheckIsLongText","saveContent","isSaveDisabled","getContent","htmlContent","getHtmlContent","attachmentList","getAttachments","commentId","fields","idsList","commentImages","querySelectorAll","commentImagesLength","i","dataSrcName","createEditor","CommentEditor","setIsMoving","flag","setIsFilesBlockDisplayed","CommonContentBlocks","TextBlock","LinkBlock","DateBlock","WithTitle","Money","EditableText","EditableDate","DatePill","CommentContent","tabId","onCustomEvent","getLayoutContentBlockById","isIncoming","OpenLines","ChatMessage","dialogId","openMessengerSlider","RECENT","MENU","okCaption","OK_CANCEL","onOk","onCancel","getLayoutHeaderChangeStreamButton","from","to","iconCode","pillText","iconClassName","Modification","ValueChange","ValueChangeItem","SignDocument","documentId","documentHash","recipientHash","getLayoutFooterButtonById","entryId","log","memberHash","Router","Instance","openSignDocumentSlider","openSignDocumentModifySlider","valueInSiteFormat","activityDeadline","responseWithError","newCreateDate","createElement","appendChild","removeChild","ACTION_NAMESPACE","Document","itemsToPrint","_classStaticPrivateFieldSpecGet","candidate","extra","isPrintEvent","printUrl","remainingItem","publicUrl","pdfUrl","docxUrl","infoHelperCode","info","openDocumentSlider","alert","isSuccess","clipboard","copy","open","DocumentTitle","newTitle","DocumentCreateTime","isNil","SMART_DOCUMENT","wizardUri","Uri","setQueryParams","docId","stepId","noRedirect","SidePanel","toString","convertDealAndStartSign","usePrevious","ID","TITLE","INITIATOR","InfoHelper","PopupWindow","zIndex","closeByEsc","closeIcon","overlay","onPopupClose","titleBar","contentColor","Call","scheduleDate","callId","url","phone","ENTITY_TYPE_NAME","CrmEntityType","resolveName","entityTypeId","ENTITY_ID","entityId","AUTO_FOLD","BINDINGS","OWNER_TYPE_NAME","OWNER_ID","SRC_ACTIVITY_ID","phoneTo","menuBar","Crm","Timeline","MenuBar","setActiveItemById","todoEditor","getItemById","setParentActivityId","setDeadLine","Voximplant","Transcript","player","location","ToDo","isValidParams","fileList","TodoEditorSettingsPopup","sections","fetchSettingsPath","onSave","responsibleId","Dialog","targetNode","getLayoutFooterMenu","context","multiple","dropdownMode","showAvatars","enableSearch","entities","preselectedItems","undeselectedItems","selectedItem","getDialog","getSelectedItems","selectedItems","ping","SettingsPopupPing","active","showToggleSelector","SettingsPopupCalendar","getSettings","pingSettings","calendarSettings","duration","Helpdesk","articleCode","Helper","Payment","paymentId","control","EntityEditor","getControlByIdRecursive","paymentDocumentsControl","getPaymentDocumentsControl","_createRealizationSlider","isSelected","image","showDummyImage","bottomBlock","ListItemButton","imageStyle","listItems","showMoreEnabled","showMoreCnt","showMoreText","isShortList","shortListItemsCnt","ListItem","showMore","isItemVisible","isShowMoreVisible","cnt","DealProductList","ExpandableList","EventEmitter","reloadFromServer","tapController","getProductList","dealId","productId","reload","reloadGrid","actions","balloon","contactBlocks","Email","ContactList","threadId","OrderCheck","checkUrl","openSlider","EcommerceDocumentsList","isWithOrdersMode","summaryOptions","timelineSummaryDocuments","TimelineSummaryDocuments","setOptions","startSalescenterApplication","orderId","loadExt","Salescenter","Manager","openApplication","FinalSummary","SalescenterApp","supportedItemTypes","disableSendButton","templateMode","shipmentId","Delivery","phoneNumber","canUserPerformCalls","shipmentIds","PULL","moduleId","command","callback","some","FIELDS","extendWatch","deliveryServiceIds","deliveryRequest","needCheckRequestStatus","isProcessed","dataPayload","getDataPayload","isObject","isArray","RestApp","appId","restAppId","rest","AppLayout","Comment","commentBlock","timeStart","timeEnd","slotLength","createItemText","formatType","formatDateToTime","formatSlotLength","formatTimeValue","hours","sharingSlotsListItem","Sharing","dialogQr","DialogQr","sharingUrl","SharingSlotsList","openCalendarEventSlider","eventId","isSharing","chatId","BXIM","openMessenger","Task","taskId","changeDeadline","view","edit","delete","viewResult","DEADLINE","toISOString","skipTimeZoneOffset","path","Dialogs","resultId","registerController"],"mappings":"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"}