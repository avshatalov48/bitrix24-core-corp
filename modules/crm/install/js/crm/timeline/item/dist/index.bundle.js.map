{"version":3,"file":"index.bundle.js","sources":["../src/item.js","../src/components/enums/icon-background-color.js","../src/components/layout/icon.js","../src/components/layout/menu.js","../src/action.js","../src/components/layout/header/change-stream-button.js","../src/components/layout/header/title.js","../src/components/enums/tag-type.js","../src/components/layout/header/tag.js","../src/components/layout/header/user.js","../src/components/layout/header/format-date.js","../src/components/layout/header/hint.js","../src/components/layout/header.js","../src/components/layout/body/logo.js","../src/components/layout/body/calendar-icon.js","../src/components/layout/body/logo-calendar.js","../src/components/layout/body.js","../src/components/enums/button-state.js","../src/components/layout/baseButton.js","../src/components/layout/footer/add-button.js","../src/components/layout/footer/menu.js","../src/components/enums/button-type.js","../src/components/layout/button.js","../src/components/layout/footer/buttons.js","../src/components/enums/button-scope.js","../src/components/layout/footer.js","../src/components/layout/marketPanel.js","../src/components/layout/userPick.js","../src/stream-type.js","../src/components/item.js","../src/layout.js","../src/controllers/base.js","../src/controller-manager.js","../src/configurable-item.js","../src/controllers/activity.js","../src/components/enums/text-color.js","../src/components/enums/text-weight.js","../src/components/enums/text-size.js","../src/components/content-blocks/text.js","../src/components/content-blocks/link.js","../src/components/content-blocks/date.js","../src/components/content-blocks/with-title.js","../src/components/content-blocks/line-of-text-blocks.js","../src/components/enums/logo-type.js","../src/components/content-blocks/timeline-audio.js","../src/components/enums/client-mark.js","../src/components/content-blocks/client-mark.js","../src/components/content-blocks/money.js","../src/components/content-blocks/editable-text.js","../src/components/content-blocks/editable-description.js","../src/components/content-blocks/editable-date.js","../src/components/content-blocks/player-alert.js","../src/components/content-blocks/note.js","../src/components/content-blocks/date-pill.js","../src/components/content-blocks/money-pill.js","../src/components/content-blocks/info-group.js","../src/components/content-blocks/file.js","../src/components/content-blocks/file-list.js","../src/controllers/common-content-blocks.js","../src/components/content-blocks/value-change.js","../src/components/content-blocks/value-change-item.js","../src/controllers/modification.js","../src/components/content-blocks/chat-message.js","../src/controllers/openlines.js","../src/controllers/sign-document.js","../src/controllers/document.js","../src/controllers/call.js","../src/controllers/todo.js","../src/controllers/helpdesk.js","../src/components/content-blocks/sms-message.js","../src/controllers/sms.js","../src/controllers/payment.js","../src/components/content-blocks/expandable-list/list-item-button.js","../src/components/content-blocks/expandable-list/list-item.js","../src/components/content-blocks/expandable-list/list.js","../src/controllers/deal-product-list.js","../src/controllers/order-check.js","../src/controllers/salescenter-app.js","../src/components/content-blocks/ecommerce-documents-list.js","../src/controllers/finalsummary.js","../src/controller-registry.js"],"sourcesContent":["import {Dom, Type} from 'main.core'\n\nexport default class Item\n{\n\tconstructor()\n\t{\n\t\tthis._id = '';\n\t\tthis._isTerminated = false;\n\t\tthis._wrapper = null;\n\t}\n\n\tgetId(): string\n\t{\n\t\treturn this._id;\n\t}\n\n\t_setId(id): void\n\t{\n\t\tthis._id = BX.type.isNotEmptyString(id) ? id : BX.util.getRandomString(4);\n\t}\n\n\t/**\n\t * @abstract\n\t */\n\tsetData(data): void\n\t{\n\t\tthrow new Error('Item.setData() must be overridden');\n\t}\n\n\t/**\n\t * @abstract\n\t */\n\tlayout(options): void\n\t{\n\t\tthrow new Error('Item.layout() must be overridden');\n\t}\n\n\trefreshLayout()\n\t{\n\t\tconst anchor = this._wrapper.previousSibling;\n\t\tthis.clearLayout();\n\n\t\tthis.layout({ anchor: anchor });\n\t}\n\n\tclearLayout()\n\t{\n\t\tDom.remove(this._wrapper);\n\t\tthis._wrapper = undefined;\n\t}\n\n\tdestroy()\n\t{\n\t\tthis.clearLayout();\n\t}\n\n\tgetWrapper(): ?HTMLElement\n\t{\n\t\treturn this._wrapper;\n\t}\n\n\tsetWrapper(wrapper: HTMLElement): void\n\t{\n\t\tthis._wrapper = wrapper;\n\t}\n\n\taddWrapperClass(className, timeout): void\n\t{\n\t\tif(!this._wrapper)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tDom.addClass(this._wrapper, className);\n\n\t\tif(Type.isNumber(timeout) && timeout >= 0)\n\t\t{\n\t\t\twindow.setTimeout(this.removeWrapperClass.bind(this, className), timeout);\n\t\t}\n\t}\n\n\tremoveWrapperClass(className, timeout): void\n\t{\n\t\tif(!this._wrapper)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tDom.removeClass(this._wrapper, className);\n\t\tif(Type.isNumber(timeout) && timeout >= 0)\n\t\t{\n\t\t\twindow.setTimeout(this.addWrapperClass.bind(this, className), timeout);\n\t\t}\n\t}\n\n\tisTerminated(): boolean\n\t{\n\t\treturn this._isTerminated;\n\t}\n\n\tmarkAsTerminated(terminated): void\n\t{\n\t\tterminated = !!terminated;\n\n\t\tif (this._isTerminated === terminated)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis._isTerminated = terminated;\n\t\tif (!this._wrapper)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (terminated)\n\t\t{\n\t\t\tDom.addClass(this._wrapper, 'crm-entity-stream-section-last');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.removeClass(this._wrapper, 'crm-entity-stream-section-last');\n\t\t}\n\t}\n\n\tgetAssociatedEntityTypeId(): ?Number\n\t{\n\t\treturn null;\n\t}\n\n\tgetAssociatedEntityId(): ?Number\n\t{\n\t\treturn null;\n\t}\n\n}\n","export class IconBackgroundColor {\n\tstatic PRIMARY = 'primary';\n\tstatic PRIMARY_ALT = 'primary_alt';\n\tstatic FAILURE = 'failure';\n}","\nimport { IconBackgroundColor } from '../enums/icon-background-color';\nimport { Counter } from 'ui.cnt';\nimport { Dom } from 'main.core';\n\nexport const Icon = {\n\tprops: {\n\t\tcode: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: 'none',\n\t\t},\n\t\tcounterType: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t},\n\t\tbackgroundColorToken: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: IconBackgroundColor.PRIMARY,\n\t\t},\n\t},\n\tinject: ['isLogMessage'],\n\tcomputed: {\n\t\tclassName() {\n\t\t\treturn {\n\t\t\t\t'crm-timeline__card_icon': true,\n\t\t\t\t[`--bg-${this.backgroundColorToken}`]: !!this.backgroundColorToken,\n\t\t\t\t[`--code-${this.code}`]: !!this.code,\n\t\t\t\t['--muted']: this.isLogMessage,\n\t\t\t}\n\t\t},\n\n\t\tcounterNodeContainer() {\n\t\t\treturn this.$refs.counter;\n\t\t},\n\t},\n\n\tmethods: {\n\t\trenderCounter() {\n\t\t\tif (!this.counterType) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tDom.clean(this.counterNodeContainer);\n\t\t\tconst counter = new Counter({\n\t\t\t\tvalue: 1,\n\t\t\t\tborder: true,\n\t\t\t\tcolor: Counter.Color[this.counterType.toUpperCase()],\n\t\t\t});\n\t\t\tcounter.renderTo(this.counterNodeContainer);\n\t\t},\n\t},\n\tmounted() {\n\t\tthis.renderCounter();\n\t},\n\twatch: {\n\t\tcounterType(newCounterType): void // update if counter state changed\n\t\t{\n\t\t\tthis.$nextTick(() => {\n\t\t\t\tthis.renderCounter();\n\t\t\t});\n\t\t}\n\t},\n\ttemplate: `\n\t\t<div :class=\"className\">\n\t\t\t<i></i>\n\t\t\t<div ref=\"counter\" v-show=\"!!counterType\" class=\"crm-timeline__card_icon_counter\"></div>\n\t\t</div>\n\t`\n};\n","import {MenuManager} from \"main.popup\";\nimport {Action} from \"../../action\";\n\nexport class Menu\n{\n\t#menuOptions = {};\n\t#vueComponent = {};\n\n\tconstructor(vueComponent: Object, menuItems: Array, menuOptions: ?Object)\n\t{\n\t\tthis.#vueComponent = vueComponent;\n\t\tthis.#menuOptions = menuOptions || {};\n\t\tthis.#menuOptions = {\n\t\t\tangle: false,\n\t\t\tcacheable: false,\n\t\t\t...this.#menuOptions\n\t\t};\n\n\t\tthis.#menuOptions.items = [];\n\t\tfor (const item of menuItems)\n\t\t{\n\t\t\tthis.#menuOptions.items.push(this.createMenuItem(item));\n\t\t}\n\t}\n\n\tshow(): void\n\t{\n\t\tMenuManager.show(this.#menuOptions);\n\t}\n\n\n\tcreateMenuItem(item): Object\n\t{\n\t\tif (item.hasOwnProperty('delimiter') && item.delimiter)\n\t\t{\n\t\t\treturn {\n\t\t\t\ttext: item.title || '',\n\t\t\t\tdelimiter: true\n\t\t\t};\n\t\t}\n\n\t\tconst result = {\n\t\t\ttext: item.title,\n\t\t\tvalue: item.title,\n\t\t};\n\n\t\tif (item.icon)\n\t\t{\n\t\t\tresult.className = 'menu-popup-item-' + item.icon;\n\t\t}\n\t\tif (item.menu)\n\t\t{\n\t\t\tresult.items = [];\n\t\t\tfor (const subItem of Object.values(item.menu.items || {}))\n\t\t\t{\n\t\t\t\tresult.items.push(this.createMenuItem(subItem));\n\t\t\t}\n\t\t}\n\t\telse if (item.action)\n\t\t{\n\t\t\tif (item.action.type === 'redirect')\n\t\t\t{\n\t\t\t\tresult.href = item.action.value;\n\t\t\t}\n\t\t\telse if (item.action.type === 'jsCode')\n\t\t\t{\n\t\t\t\tresult.onclick = item.action.value;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresult.onclick = () =>\n\t\t\t\t{\n\t\t\t\t\tthis.onMenuItemClick(item);\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tonMenuItemClick(item): void\n\t{\n\t\tconst menu = MenuManager.getCurrentMenu();\n\t\tif (menu)\n\t\t{\n\t\t\tmenu.close();\n\t\t}\n\n\t\t(new Action(item.action)).execute(this.#vueComponent);\n\t}\n\n\tstatic showMenu(vueComponent: Object, menuItems: Array, menuOptions: ?Object)\n\t{\n\t\tconst menu = new Menu(vueComponent, menuItems, menuOptions);\n\t\tmenu.show();\n\t}\n}","import { ajax, Type } from 'main.core';\nimport {rest as Rest} from 'rest.client';\nimport { UI } from 'ui.notification';\nimport { Menu } from \"./components/layout/menu\";\nimport { DateTimeFormat } from \"main.date\";\nimport { DatetimeConverter } from \"crm.timeline.tools\";\n\ndeclare type AnimationParams = {\n\ttarget: string,\n\ttype: string,\n\tforever: boolean,\n}\n\nconst AnimationTarget = {\n\tblock: 'block',\n\titem: 'item',\n};\n\nconst AnimationType = {\n\tdisable: 'disable',\n\tloader: 'loader',\n};\n\nconst ActionType = {\n\tJS_EVENT: 'jsEvent',\n\tAJAX_ACTION: {\n\t\tSTARTED: 'ajaxActionStarted',\n\t\tFINISHED: 'ajaxActionFinished',\n\t\tFAILED: 'ajaxActionFailed',\n\t},\n\n\tisJsEvent(type: string): boolean\n\t{\n\t\treturn (type === this.JS_EVENT);\n\t},\n\n\tisAjaxAction(type: string): boolean\n\t{\n\t\treturn (\n\t\t\ttype === this.AJAX_ACTION.STARTED\n\t\t\t|| type === this.AJAX_ACTION.FINISHED\n\t\t\t|| type === this.AJAX_ACTION.FAILED\n\t\t);\n\t}\n};\n\nObject.freeze(ActionType.AJAX_ACTION);\nObject.freeze(ActionType);\n\nexport { ActionType };\n\nexport class Action\n{\n\t#type: string = null;\n\t#value: string | Object  = null;\n\t#actionParams: ?Object = null;\n\t#animation: ?AnimationParams = null;\n\n\tconstructor(params)\n\t{\n\t\tthis.#type = params.type;\n\t\tthis.#value = params.value;\n\t\tthis.#actionParams = params.actionParams;\n\t\tthis.#animation = Type.isPlainObject(params.animation) ? params.animation : null;\n\t}\n\n\texecute(vueComponent): void\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tif (this.isJsEvent())\n\t\t\t{\n\t\t\t\tvueComponent.$Bitrix.eventEmitter.emit('crm:timeline:item:action', {\n\t\t\t\t\taction: this.#value,\n\t\t\t\t\tactionType: ActionType.JS_EVENT,\n\t\t\t\t\tactionData: this.#actionParams,\n\t\t\t\t\tanimationCallbacks: {\n\t\t\t\t\t\tonStart: this.#startAnimation.bind(this, vueComponent),\n\t\t\t\t\t\tonStop: this.#stopAnimation.bind(this, vueComponent),\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tresolve(true);\n\t\t\t}\n\t\t\telse if (this.isJsCode())\n\t\t\t{\n\t\t\t\tthis.#startAnimation(vueComponent);\n\t\t\t\teval(this.#value);\n\t\t\t\tthis.#stopAnimation(vueComponent);\n\t\t\t\tresolve(true);\n\t\t\t}\n\t\t\telse if (this.isAjaxAction())\n\t\t\t{\n\t\t\t\tthis.#startAnimation(vueComponent);\n\t\t\t\tvueComponent.$Bitrix.eventEmitter.emit('crm:timeline:item:action', {\n\t\t\t\t\taction: this.#value,\n\t\t\t\t\tactionType: ActionType.AJAX_ACTION.STARTED,\n\t\t\t\t\tactionData: this.#actionParams,\n\t\t\t\t});\n\t\t\t\tajax.runAction(\n\t\t\t\t\tthis.#value,\n\t\t\t\t\t{\n\t\t\t\t\t\tdata: this.#prepareRunActionParams(this.#actionParams),\n\t\t\t\t\t}\n\t\t\t\t).then(\n\t\t\t\t\t(response) =>\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.#stopAnimation(vueComponent);\n\t\t\t\t\t\tvueComponent.$Bitrix.eventEmitter.emit('crm:timeline:item:action', {\n\t\t\t\t\t\t\taction: this.#value,\n\t\t\t\t\t\t\tactionType: ActionType.AJAX_ACTION.FINISHED,\n\t\t\t\t\t\t\tactionData: this.#actionParams,\n\t\t\t\t\t\t\tresponse,\n\t\t\t\t\t\t});\n\t\t\t\t\t\tresolve(response);\n\t\t\t\t\t},\n\t\t\t\t\t(response) =>\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.#stopAnimation(vueComponent);\n\t\t\t\t\t\tUI.Notification.Center.notify({\n\t\t\t\t\t\t\tcontent: response.errors[0].message,\n\t\t\t\t\t\t\tautoHideDelay: 5000,\n\t\t\t\t\t\t});\n\t\t\t\t\t\tvueComponent.$Bitrix.eventEmitter.emit('crm:timeline:item:action', {\n\t\t\t\t\t\t\taction: this.#value,\n\t\t\t\t\t\t\tactionType: ActionType.AJAX_ACTION.FAILED,\n\t\t\t\t\t\t\tactionParams: this.#actionParams,\n\t\t\t\t\t\t\tresponse,\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\treject(response);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t\telse if (this.isCallRestBatch())\n\t\t\t{\n\t\t\t\tthis.#startAnimation(vueComponent);\n\t\t\t\tvueComponent.$Bitrix.eventEmitter.emit('crm:timeline:item:action', {\n\t\t\t\t\taction: this.#value,\n\t\t\t\t\tactionType: 'ajaxActionStarted',\n\t\t\t\t\tactionData: this.#actionParams,\n\t\t\t\t});\n\t\t\t\tRest.callBatch(\n\t\t\t\t\tthis.#prepareCallBatchParams(this.#actionParams),\n\t\t\t\t\t(restResult) => {\n\t\t\t\t\t\tfor (const result in restResult)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconst response = restResult[result].answer;\n\t\t\t\t\t\t\tif (response.error)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.#stopAnimation(vueComponent);\n\t\t\t\t\t\t\t\tUI.Notification.Center.notify({\n\t\t\t\t\t\t\t\t\tcontent: response.error.error_description,\n\t\t\t\t\t\t\t\t\tautoHideDelay: 5000,\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tvueComponent.$Bitrix.eventEmitter.emit('crm:timeline:item:action', {\n\t\t\t\t\t\t\t\t\taction: this.#value,\n\t\t\t\t\t\t\t\t\tactionType: 'ajaxActionFailed',\n\t\t\t\t\t\t\t\t\tactionParams: this.#actionParams,\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\treject(restResult);\n\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.#stopAnimation(vueComponent);\n\t\t\t\t\t\tvueComponent.$Bitrix.eventEmitter.emit('crm:timeline:item:action', {\n\t\t\t\t\t\t\taction: this.#value,\n\t\t\t\t\t\t\tactionType: 'ajaxActionFinished',\n\t\t\t\t\t\t\tactionData: this.#actionParams,\n\t\t\t\t\t\t});\n\t\t\t\t\t\tresolve(restResult);\n\t\t\t\t\t},\n\t\t\t\t\ttrue\n\t\t\t\t);\n\t\t\t}\n\t\t\telse if (this.isRedirect())\n\t\t\t{\n\t\t\t\tthis.#startAnimation(vueComponent);\n\t\t\t\tif (this.#actionParams && this.#actionParams.target)\n\t\t\t\t{\n\t\t\t\t\twindow.open(this.#value, this.#actionParams.target);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tlocation.href = this.#value;\n\t\t\t\t}\n\t\t\t\tresolve(this.#value);\n\t\t\t}\n\t\t\telse if (this.isShowMenu())\n\t\t\t{\n\t\t\t\tMenu.showMenu(\n\t\t\t\t\tvueComponent,\n\t\t\t\t\tthis.#prepareMenuItems(this.#value.items, vueComponent),\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'actionMenu',\n\t\t\t\t\t\tbindElement: vueComponent.$el,\n\t\t\t\t\t\tminWidth: vueComponent.$el.offsetWidth,\n\t\t\t\t\t}\n\t\t\t\t);\n\n\t\t\t\tresolve(true);\n\t\t\t}\n\t\t\telse {\n\t\t\t\treject(false);\n\t\t\t}\n\t\t});\n\t}\n\n\tisJsEvent(): boolean\n\t{\n\t\treturn (this.#type === 'jsEvent');\n\t}\n\n\tisJsCode(): boolean\n\t{\n\t\treturn (this.#type === 'jsCode');\n\t}\n\n\tisAjaxAction(): boolean\n\t{\n\t\treturn (this.#type === 'runAjaxAction');\n\t}\n\n\tisCallRestBatch(): boolean\n\t{\n\t\treturn (this.#type === 'callRestBatch');\n\t}\n\n\tisRedirect(): boolean\n\t{\n\t\treturn (this.#type === 'redirect');\n\t}\n\n\tisShowMenu(): boolean\n\t{\n\t\treturn (this.#type === 'showMenu');\n\t}\n\n\tgetValue(): string | Object\n\t{\n\t\treturn this.#value;\n\t}\n\n\t#prepareRunActionParams(params): Object\n\t{\n\t\tconst result = {};\n\n\t\tif (Type.isUndefined(params))\n\t\t{\n\t\t\treturn result;\n\t\t}\n\t\tfor (const paramName in params)\n\t\t{\n\t\t\tconst paramValue = params[paramName];\n\t\t\tif (Type.isDate(paramValue))\n\t\t\t{\n\t\t\t\tresult[paramName] = DateTimeFormat.format(DatetimeConverter.getSiteDateTimeFormat(), paramValue);\n\t\t\t}\n\t\t\telse if (Type.isPlainObject(paramValue))\n\t\t\t{\n\t\t\t\tresult[paramName] = this.#prepareRunActionParams(paramValue);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresult[paramName] = paramValue;\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t#prepareCallBatchParams(params): Object\n\t{\n\t\tconst result = {};\n\n\t\tif (Type.isUndefined(params))\n\t\t{\n\t\t\treturn result;\n\t\t}\n\n\t\tfor (const paramName in params)\n\t\t{\n\t\t\tresult[paramName] = {\n\t\t\t\tmethod: params[paramName].method,\n\t\t\t\tparams: this.#prepareRunActionParams(params[paramName].params)\n\t\t\t};\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t#prepareMenuItems(items: Object, vueComponent: Object): Array\n\t{\n\t\treturn Object.values(items)\n\t\t\t.filter((item) => (item.state !== 'hidden' && item.scope !== 'mobile' && (!vueComponent.isReadOnly || !item.hideIfReadonly)))\n\t\t\t.sort((a, b) => (a.sort - b.sort))\n\t\t;\n\t}\n\n\t#startAnimation(vueComponent)\n\t{\n\t\tif (!this.#isAnimationValid())\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tif (this.#animation.target === AnimationTarget.item)\n\t\t{\n\t\t\tif (this.#animation.type === AnimationType.disable)\n\t\t\t{\n\t\t\t\tvueComponent.$root.setFaded(true);\n\t\t\t}\n\t\t\tif (this.#animation.type === AnimationType.loader)\n\t\t\t{\n\t\t\t\tvueComponent.$root.showLoader(true);\n\t\t\t}\n\t\t}\n\t\tif (this.#animation.target === AnimationTarget.block)\n\t\t{\n\t\t\tif (this.#animation.type === AnimationType.disable)\n\t\t\t{\n\t\t\t\tif (Type.isFunction(vueComponent.setDisabled))\n\t\t\t\t{\n\t\t\t\t\tvueComponent.setDisabled(true);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (this.#animation.type === AnimationType.loader)\n\t\t\t{\n\t\t\t\tif (Type.isFunction(vueComponent.setLoading))\n\t\t\t\t{\n\t\t\t\t\tvueComponent.setLoading(true);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t#stopAnimation(vueComponent)\n\t{\n\t\tif (!this.#isAnimationValid())\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tif (this.#animation.forever)\n\t\t{\n\t\t\treturn; // should not be stopped\n\t\t}\n\n\t\tif (this.#animation.target === AnimationTarget.item)\n\t\t{\n\t\t\tif (this.#animation.type === AnimationType.disable)\n\t\t\t{\n\t\t\t\tvueComponent.$root.setFaded(false);\n\t\t\t}\n\t\t\tif (this.#animation.type === AnimationType.loader)\n\t\t\t{\n\t\t\t\tvueComponent.$root.showLoader(false);\n\t\t\t}\n\t\t}\n\t\tif (this.#animation.target === AnimationTarget.block)\n\t\t{\n\t\t\tif (this.#animation.type === AnimationType.disable)\n\t\t\t{\n\t\t\t\tif (Type.isFunction(vueComponent.setDisabled))\n\t\t\t\t{\n\t\t\t\t\tvueComponent.setDisabled(false);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (this.#animation.type === AnimationType.loader)\n\t\t\t{\n\t\t\t\tif (Type.isFunction(vueComponent.setLoading))\n\t\t\t\t{\n\t\t\t\t\tvueComponent.setLoading(false);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t#isAnimationValid(): boolean\n\t{\n\t\tif (!this.#animation)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\t\tif (!AnimationTarget.hasOwnProperty(this.#animation.target))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\t\tif (!AnimationType.hasOwnProperty(this.#animation.type))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t}\n}\n","import {Action} from \"../../../action\";\n\nexport const ChangeStreamButton = {\n\tprops: {\n\t\tdisableIfReadonly: Boolean,\n\t\ttype: String,\n\t\ttitle: String,\n\t\taction: Object,\n\t},\n\tdata(): Object {\n\t\treturn {\n\t\t\tisReadonlyMode: false,\n\t\t}\n\t},\n\tinject: [\n\t\t'isReadOnly',\n\t],\n\tmounted()\n\t{\n\t\tthis.isReadonlyMode = this.isReadOnly;\n\t},\n\tcomputed: {\n\t\tisShowPinButton() {\n\t\t\treturn this.type === 'pin' && !this.isReadonlyMode;\n\t\t},\n\n\t\tisShowUnpinButton() {\n\t\t\treturn this.type==='unpin' && !this.isReadonlyMode;\n\t\t},\n\t},\n\tmethods: {\n\t\texecuteAction() {\n\t\t\tif (!this.action)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst action = new Action(this.action);\n\t\t\taction.execute(this);\n\t\t},\n\t\tonClick(): void\n\t\t{\n\t\t\tif (this.action)\n\t\t\t{\n\t\t\t\tconst action = new Action(this.action);\n\t\t\t\taction.execute(this);\n\t\t\t}\n\t\t},\n\t\tsetDisabled(disabled: boolean)\n\t\t{\n\t\t\tif (!this.isReadonly && !disabled)\n\t\t\t{\n\t\t\t\tthis.isReadonlyMode = false;\n\t\t\t}\n\t\t\tif (disabled)\n\t\t\t{\n\t\t\t\tthis.isReadonlyMode = true;\n\t\t\t}\n\t\t}\n\t},\n\n\ttemplate: `\n\t\t<div class=\"crm-timeline__card-top_controller\">\n\t\t\t<input\n\t\t\t\tv-if=\"type === 'complete'\"\n\t\t\t\t@click=\"executeAction\"\n\t\t\t\ttype=\"checkbox\"\n\t\t\t\t:disabled=\"isReadonlyMode\"\n\t\t\t\tclass=\"crm-timeline__card-top_checkbox\"\n\t\t\t/>\n\t\t\t<div\n\t\t\t\tv-else-if=\"isShowPinButton\"\n\t\t\t\t:title=\"title\"\n\t\t\t\t@click=\"executeAction\"\n\t\t\t\tclass=\"crm-timeline__card-top_icon --pin\"\n\t\t\t></div>\n\t\t\t<div\n\t\t\t\tv-else-if=\"isShowUnpinButton\"\n\t\t\t\t:title=\"title\"\n\t\t\t\t@click=\"executeAction\"\n\t\t\t\tclass=\"crm-timeline__card-top_icon --unpin\"\n\t\t\t></div>\n\t\t</div>\n\t`,\n};\n","import {Action} from \"../../../action\";\n\nexport const Title = {\n\tprops: {\n\t\ttitle: String,\n\t\taction: Object,\n\t},\n\tinject: ['isLogMessage'],\n\tcomputed: {\n\t\tclassName(): Array {\n\t\t\treturn [\n\t\t\t\t'crm-timeline__card-title', {\n\t\t\t\t'--light': this.isLogMessage,\n\t\t\t\t'--action': !!this.action,\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\n\t\thref(): ?string {\n\t\t\tif (!this.action)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tconst action = new Action(this.action);\n\t\t\tif (action.isRedirect())\n\t\t\t{\n\t\t\t\treturn action.getValue();\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\n\t},\n\tmethods: {\n\t\texecuteAction(): void\n\t\t{\n\t\t\tif (!this.action)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst action = new Action(this.action);\n\t\t\taction.execute(this);\n\t\t}\n\t},\n\ttemplate: `\n\t\t<a\n\t\t\tv-if=\"href\"\n\t\t\t:href=\"href\"\n\t\t\t:class=\"className\"\n\t\t\ttabindex=\"0\"\n\t\t\t:title=\"title\"\n\t\t>\n\t\t\t{{title}}\n\t\t</a>\n\t\t<span\n\t\t\tv-else\n\t\t\t@click=\"executeAction\"\n\t\t\t:class=\"className\"\n\t\t\ttabindex=\"0\"\n\t\t\t:title=\"title\"\n\t\t>\n\t\t\t{{title}}\n\t\t</span>`\n};\n","export class TagType {\n\tstatic PRIMARY = 'primary';\n\tstatic SECONDARY = 'secondary';\n\tstatic SUCCESS = 'success';\n\tstatic WARNING = 'warning';\n\tstatic FAILURE = 'failure';\n}","import {Action} from \"../../../action\";\nimport {Label} from 'ui.label';\nimport {TagType} from '../../enums/tag-type';\nimport {Dom, Type} from 'main.core';\n\nexport const Tag = {\n\tprops: {\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t},\n\t\thint: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t},\n\t\taction: {\n\t\t\ttype: Object,\n\t\t\trequired: false,\n\t\t\tdefault: null,\n\t\t},\n\t\ttype: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: TagType.SECONDARY,\n\t\t},\n\t\tstate: String,\n\t},\n\tcomputed: {\n\t\tclassName(): Object {\n\t\t\treturn {\n\t\t\t\t'crm-timeline__card-status': true,\n\t\t\t\t'--clickable': !!this.action,\n\t\t\t\t'--hint': !!this.hint,\n\t\t\t}\n\t\t},\n\n\t\ttagTypeToLabelColorDict() {\n\t\t\treturn {\n\t\t\t\t[TagType.PRIMARY]: Label.Color.LIGHT_BLUE,\n\t\t\t\t[TagType.SECONDARY]: Label.Color.LIGHT,\n\t\t\t\t[TagType.SUCCESS]: Label.Color.LIGHT_GREEN,\n\t\t\t\t[TagType.WARNING]: Label.Color.LIGHT_YELLOW,\n\t\t\t\t[TagType.FAILURE]: Label.Color.LIGHT_RED,\n\t\t\t};\n\t\t},\n\n\t\ttagContainerRef() {\n\t\t\treturn this.$refs.tag;\n\t\t}\n\t},\n\tmethods: {\n\n\t\tgetLabelColorFromTagType(tagType) {\n\t\t\tconst lowerCaseTagType = tagType ? tagType.toLowerCase() : '';\n\t\t\tconst labelColor = this.tagTypeToLabelColorDict[lowerCaseTagType];\n\t\t\treturn labelColor ? labelColor : Label.Color.LIGHT;\n\t\t},\n\n\t\trenderTag(tagOptions): HTMLElement | null {\n\t\t\tif (!tagOptions || !this.tagContainerRef) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\n\t\t\tconst {title, type} = tagOptions;\n\n\t\t\tconst uppercaseTitle = title && Type.isString(title) ? title.toUpperCase() : '';\n\t\t\tconst label = new Label({\n\t\t\t\ttext: uppercaseTitle,\n\t\t\t\tcolor: this.getLabelColorFromTagType(type),\n\t\t\t\tfill: true,\n\t\t\t});\n\n\t\t\tDom.clean(this.tagContainerRef);\n\t\t\tDom.append(label.render(), this.tagContainerRef);\n\t\t},\n\n\t\texecuteAction() {\n\t\t\tif (!this.action) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst action = new Action(this.action);\n\t\t\taction.execute(this);\n\t\t},\n\t},\n\tmounted() {\n\t\tthis.renderTag({title: this.title, type: this.type});\n\t},\n\n\tupdated() {\n\t\tthis.renderTag({title: this.title, type: this.type})\n\t},\n\ttemplate: `\n\t\t<div ref=\"tag\" :title=\"hint\" :class=\"className\" @click=\"executeAction\"></div>\n\t`\n};\n","import {Text} from \"main.core\"\n\nexport const User = {\n\tprops: {\n\t\ttitle: String,\n\t\tdetailUrl: String,\n\t\timageUrl: String,\n\t},\n\tinject: ['isLogMessage'],\n\tcomputed: {\n\t\tstyles()\n\t\t{\n\t\t\tif (!this.imageUrl)\n\t\t\t{\n\t\t\t\treturn {};\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tbackgroundImage: \"url('\" + encodeURI(Text.encode(this.imageUrl)) + \"')\",\n\t\t\t\tbackgroundSize: '21px'\n\t\t\t};\n\t\t},\n\n\t\tclassName() {\n\t\t\treturn [\n\t\t\t\t'ui-icon',\n\t\t\t\t'ui-icon-common-user',\n\t\t\t\t'crm-timeline__user-icon', {\n\t\t\t\t'--muted': this.isLogMessage,\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t},\n\t// language=Vue\n\ttemplate: `<a :class=\"className\" :href=\"detailUrl\"\n\t\t\t\t  target=\"_blank\" :title=\"title\"><i :style=\"styles\"></i></a>`\n};\n","import { DatetimeConverter } from 'crm.timeline.tools';\n\nexport const FormatDate = {\n\tname: 'FormatDate',\n\tprops: {\n\t\ttimestamp: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t\tdefault: 0,\n\t\t},\n\n\t\tdatePlaceholder: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t},\n\n\t\tuseShortTimeFormat: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: false,\n\t\t},\n\n\t\tclass: {\n\t\t\ttype: [Array, Object, String],\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t}\n\t},\n\tcomputed: {\n\t\tformattedDate() {\n\t\t\tif (!this.timestamp)\n\t\t\t{\n\t\t\t\treturn this.datePlaceholder;\n\t\t\t}\n\t\t\tconst converter = DatetimeConverter.createFromServerTimestamp(this.timestamp).toUserTime();\n\n\t\t\treturn this.useShortTimeFormat ? converter.toTimeString() : converter.toDatetimeString({delimiter: ', '});\n\t\t},\n\t},\n\n\ttemplate: `\n\t\t<div :class=\"$props.class\">{{ formattedDate }}</div>\n\t`\n}","import { Popup, PopupOptions } from 'main.popup';\nimport {Event, Runtime, Dom} from 'main.core';\nimport { Action } from '../../../action';\n\nexport const Hint = {\n\tdata(): Object {\n\t\treturn {\n\t\t\tisMouseOnHintArea: false,\n\t\t\thintPopup: null,\n\t\t}\n\t},\n\tprops: {\n\t\ticon: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t},\n\t\ttextBlocks: {\n\t\t\ttype: Array,\n\t\t\trequired: false,\n\t\t\tdefault: [],\n\t\t},\n\t},\n\tcomputed: {\n\t\thintContentIcon(): ?HTMLElement {\n\t\t\tif (this.icon === '')\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tconst iconElement = Dom.create('i');\n\n\t\t\treturn Dom.create('div', {\n\t\t\t\tattrs: {\n\t\t\t\t\tclassname: this.hintContentIconClassname,\n\t\t\t\t},\n\t\t\t\tchildren: [iconElement],\n\t\t\t});\n\t\t},\n\n\t\thintContentText(): HTMLElement {\n\t\t\treturn Dom.create('div', {\n\t\t\t\tattrs: {\n\t\t\t\t\tclassname: 'crm-timeline__hint_popup-content-text',\n\t\t\t\t},\n\t\t\t\tchildren: this.hintContentTextBlocks,\n\t\t\t});\n\t\t},\n\n\t\thintContentTextBlocks(): HTMLElement[] {\n\t\t\treturn this.textBlocks.map(this.getContentBlockNode);\n\t\t},\n\n\t\thintContentIconClassname(): string {\n\t\t\tconst baseClassname = 'crm-timeline__hint_popup-content-icon';\n\t\t\treturn `${baseClassname} --${this.icon}`;\n\t\t},\n\n\t\thintIconClassname(): Array {\n\t\t\treturn [\n\t\t\t\t'ui-hint',\n\t\t\t\t'crm-timeline__header-hint', {\n\t\t\t\t'--active': this.hintPopup,\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\n\t\thasContent(): boolean {\n\t\t\treturn this.textBlocks.length > 0;\n\t\t},\n\t},\n\tmethods: {\n\t\tgetHintContent(): HTMLElement {\n\t\t\treturn Dom.create('div', {\n\t\t\t\tattrs: {\n\t\t\t\t\tclassname: 'crm-timeline__hint_popup-content'\n\t\t\t\t},\n\t\t\t\tstyle: {\n\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t},\n\t\t\t\tchildren: [this.hintContentIcon, this.hintContentText],\n\t\t\t});\n\t\t},\n\n\t\tgetPopupOptions(): PopupOptions {\n\t\t\treturn {\n\t\t\t\tdarkMode: true,\n\t\t\t\tautoHide: false,\n\t\t\t\tcontent: this.getHintContent(),\n\t\t\t\tmaxWidth: 400,\n\t\t\t\tbindOptions: {\n\t\t\t\t\tposition: 'top',\n\t\t\t\t},\n\t\t\t\tanimation: 'fading-slide',\n\t\t\t}\n\t\t},\n\n\t\tgetPopupPosition(): {left: number, right: number} {\n\t\t\tconst hintElem = this.$refs.hint;\n\t\t\tconst defaultAngleLeftOffset = Popup.getOption('angleLeftOffset');\n\t\t\tconst { width: hintWidth, left: hintLeftOffset, top: hintTopOffset } = Dom.getPosition(hintElem);\n\t\t\tconst { width: popupWidth } = Dom.getPosition(this.hintPopup?.getPopupContainer());\n\t\t\treturn {\n\t\t\t\tleft: hintLeftOffset + defaultAngleLeftOffset - (popupWidth - hintWidth) / 2,\n\t\t\t\ttop: hintTopOffset + 15,\n\t\t\t}\n\t\t},\n\n\t\tgetPopupAngleOffset(popupContainer: HTMLElement): number {\n\t\t\tconst angleWidth = 33;\n\t\t\tconst { width: popupWidth } = Dom.getPosition(popupContainer);\n\t\t\treturn (popupWidth - angleWidth) / 2;\n\t\t},\n\n\t\tonMouseEnterToPopup(): void {\n\t\t\tthis.isMouseOnHintArea = true;\n\t\t},\n\n\t\tonHintAreaMouseLeave(): void {\n\t\t\tthis.isMouseOnHintArea = false;\n\t\t\tsetTimeout(() => {\n\t\t\t\tif (!this.isMouseOnHintArea)\n\t\t\t\t{\n\t\t\t\t\tthis.hideHintPopup();\n\t\t\t\t}\n\t\t\t}, 400);\n\t\t},\n\n\t\tonMouseEnterToHint(): void {\n\t\t\tthis.isMouseOnHintArea = true;\n\t\t\tthis.showHintPopupWithDebounce();\n\t\t},\n\n\t\tshowHintPopup(): void {\n\t\t\tif (!this.isMouseOnHintArea || this.hintPopup && this.hintPopup.isShown())\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.hintPopup = new Popup(this.getPopupOptions());\n\t\t\tconst popupContainer = this.hintPopup.getPopupContainer();\n\t\t\tEvent.bind(popupContainer, 'mouseenter', this.onMouseEnterToPopup);\n\t\t\tEvent.bind(popupContainer, 'mouseleave', this.onHintAreaMouseLeave);\n\t\t\tthis.hintPopup.show();\n\t\t\tthis.hintPopup.setBindElement(this.getPopupPosition());\n\t\t\tthis.hintPopup.setAngle(false);\n\t\t\tthis.hintPopup.setAngle({offset: this.getPopupAngleOffset(popupContainer, this.$refs.hint)});\n\t\t\tthis.hintPopup.adjustPosition();\n\t\t\tthis.hintPopup.show();\n\t\t},\n\n\t\tshowHintPopupWithDebounce() {\n\t\t\tRuntime.debounce(this.showHintPopup, 300, this)();\n\t\t},\n\n\t\thideHintPopup(): void {\n\t\t\tif (!this.hintPopup)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.hintPopup.close();\n\t\t\tconst popupContainer = this.hintPopup.getPopupContainer();\n\t\t\tEvent.unbind(popupContainer, 'mouseenter', this.onMouseEnterToPopup);\n\t\t\tEvent.unbind(popupContainer, 'mouseleave', this.onHintAreaMouseLeave);\n\t\t\tthis.hintPopup.destroy();\n\t\t\tthis.hintPopup = null;\n\t\t},\n\n\t\thideHintPopupWithDebounce(): void {\n\t\t\treturn Runtime.debounce(this.hideHintPopup, 300, this);\n\t\t},\n\n\t\tgetContentBlockNode(contentBlock): HTMLElement | null {\n\t\t\tif (contentBlock.type === 'text')\n\t\t\t{\n\t\t\t\treturn this.getTextNode(contentBlock.options);\n\t\t\t}\n\t\t\telse if (contentBlock.type === 'link')\n\t\t\t{\n\t\t\t\treturn this.getLinkNode(contentBlock.options);\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\n\t\tgetTextNode(textOptions = {}): HTMLElement {\n\t\t\treturn Dom.create('span', {text: textOptions.text});\n\t\t},\n\n\t\tgetLinkNode(linkOptions = {}): HTMLElement {\n\t\t\tconst link = Dom.create('span', {text: linkOptions.text});\n\t\t\tDom.addClass(link, 'crm-timeline__hint_popup-content-link');\n\t\t\tlink.onclick = () => {\n\t\t\t\tthis.executeAction(linkOptions.action);\n\t\t\t}\n\n\t\t\treturn link;\n\t\t},\n\n\t\texecuteAction(actionObj): void {\n\t\t\tif (actionObj)\n\t\t\t{\n\t\t\t\tconst action = new Action(actionObj);\n\t\t\t\taction.execute(this);\n\t\t\t}\n\t\t},\n\t},\n\n\ttemplate: `\n\t\t<span\n\t\t\tref=\"hint\"\n\t\t\t@click.stop.prevent\n\t\t\t@mouseenter=\"onMouseEnterToHint\"\n\t\t\t@mouseleave=\"onHintAreaMouseLeave\"\n\t\t\tv-if=\"hasContent\"\n\t\t\t:class=\"hintIconClassname\"\n\t\t>\n\t\t\t<span class=\"ui-hint-icon\" />\n\t\t</span>\n\t`\n}\n","import {ChangeStreamButton} from './header/change-stream-button'\nimport {Title} from './header/title'\nimport {Tag} from './header/tag'\nimport {User} from './header/user'\nimport {FormatDate} from './header/format-date';\nimport {Runtime, Type} from 'main.core';\nimport {Hint} from './header/hint';\n\nexport const Header = {\n\tcomponents: {\n\t\tChangeStreamButton,\n\t\tTitle,\n\t\tTag,\n\t\tUser,\n\t\tFormatDate,\n\t\tHint,\n\t},\n\tprops: {\n\t\ttitle: String,\n\t\ttitleAction: Object,\n\t\tdate: Number,\n\t\tdatePlaceholder: String,\n\t\tuseShortTimeFormat: Boolean,\n\t\tchangeStreamButton: Object|null,\n\t\ttags: Object,\n\t\tuser: Object,\n\t\tinfoHelper: Object,\n\t},\n\tinject: [\n\t\t'isReadOnly',\n\t\t'isLogMessage',\n\t],\n\tcomputed: {\n\t\tvisibleTags(): Array\n\t\t{\n\t\t\tif (!Type.isPlainObject(this.tags))\n\t\t\t{\n\t\t\t\treturn [];\n\t\t\t}\n\n\t\t\treturn this.tags\n\t\t\t\t? Object.values(this.tags).filter(this.isVisibleTagFilter)\n\t\t\t\t: []\n\t\t\t;\n\t\t},\n\n\t\tvisibleAndAscSortedTags(): Array\n\t\t{\n\t\t\tconst tagsCopy = Runtime.clone(this.visibleTags);\n\t\t\treturn tagsCopy.sort(this.tagsAscSorter);\n\t\t},\n\n\t\tisShowDate(): boolean\n\t\t{\n\t\t\treturn this.date || this.datePlaceholder;\n\t\t},\n\n\t\tclassName(): Object {\n\t\t\treturn [\n\t\t\t\t'crm-timeline__card-top', {\n\t\t\t\t'--log-message': this.isReadOnly || this.isLogMessage,\n\t\t\t\t}\n\t\t\t]\n\t\t}\n\t},\n\tmethods: {\n\t\tisVisibleTagFilter(tag): Boolean {\n\t\t\treturn tag.state !== 'hidden' && tag.scope !== 'mobile' && (!this.isReadOnly || !tag.hideIfReadonly);\n\t\t},\n\n\t\ttagsAscSorter(tagA, tagB): Number {\n\t\t\treturn tagA.sort - tagB.sort;\n\t\t},\n\n\t\tgetChangeStreamButton(): ?Object\n\t\t{\n\t\t\treturn this.$refs.changeStreamButton;\n\t\t}\n\t},\n\ttemplate: `\n\t\t<div :class=\"className\">\n\t\t\t<div class=\"crm-timeline__card-top_info\">\n\t\t\t\t<div class=\"crm-timeline__card-top_info_left\">\n\t\t\t\t\t<ChangeStreamButton v-if=\"changeStreamButton\" v-bind=\"changeStreamButton\" ref=\"changeStreamButton\"></ChangeStreamButton>\n\t\t\t\t\t<Title :title=\"title\" :action=\"titleAction\"></Title>\n\t\t\t\t\t<Hint v-if=\"infoHelper\" v-bind=\"infoHelper\"></Hint>\n\t\t\t\t</div>\n\t\t\t\t<div ref=\"tags\" class=\"crm-timeline__card-top_info_right\">\n\t\t\t\t\t<Tag\n\t\t\t\t\t\tv-for=\"(tag, index) in visibleAndAscSortedTags\"\n\t\t\t\t\t\t:key=\"index\"\n\t\t\t\t\t\tv-bind=\"tag\"\n\t\t\t\t\t/>\n\t\t\t\t\t<FormatDate\n\t\t\t\t\t\tv-if=\"isShowDate\"\n\t\t\t\t\t\t:timestamp=\"date\"\n\t\t\t\t\t\t:use-short-time-format=\"useShortTimeFormat\"\n\t\t\t\t\t\t:date-placeholder=\"datePlaceholder\"\n\t\t\t\t\t\tclass=\"crm-timeline__card-time\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"crm-timeline__card-top_user\">\n\t\t\t\t<User v-bind=\"user\"></User>\n\t\t\t</div>\n\t\t</div>\n\t`\n};\n","import {Action} from \"../../../action\";\n\nexport const Logo = {\n\tprops: {\n\t\ttype: String,\n\t\taddIcon: String,\n\t\taddIconType: String,\n\t\ticon: String,\n\t\ticonType: String,\n\t\tbackgroundUrl: String,\n\t\tbackgroundSize: Number,\n\t\tinCircle: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: false,\n\t\t},\n\t\taction: Object,\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tcurrentIcon: this.icon,\n\t\t}\n\t},\n\tcomputed: {\n\t\tclassName(): string\n\t\t{\n\t\t\treturn [\n\t\t\t\t'crm-timeline__card-logo',\n\t\t\t\t`--${this.type}`, {\n\t\t\t\t'--clickable': this.action,\n\t\t\t\t}\n\t\t\t];\n\t\t},\n\n\t\ticonClassname() {\n\t\t\treturn [\n\t\t\t\t'crm-timeline__card-logo_icon',\n\t\t\t\t`--${this.currentIcon}`,\n\t\t\t\t`--type-${this.iconType}`, {\n\t\t\t\t\t'--in-circle': this.inCircle,\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\n\t\taddIconClassname() {\n\t\t\treturn [\n\t\t\t\t'crm-timeline__card-logo_add-icon',\n\t\t\t\t`--type-${this.addIconType}`,\n\t\t\t\t`--icon-${this.addIcon}`\n\t\t\t]\n\t\t},\n\n\t\ticonInteriorStyle()\n\t\t{\n\t\t\tconst result = {};\n\n\t\t\tif (this.backgroundUrl)\n\t\t\t{\n\t\t\t\tresult.backgroundImage = 'url(' + this.backgroundUrl + ')';\n\t\t\t}\n\n\t\t\tif (this.backgroundSize)\n\t\t\t{\n\t\t\t\tresult.backgroundSize = this.backgroundSize + 'px';\n\t\t\t}\n\n\t\t\treturn result;\n\t\t}\n\t},\n\twatch: {\n\t\ticon(newIcon): void\n\t\t{\n\t\t\tthis.currentIcon = newIcon;\n\t\t}\n\t},\n\tmethods: {\n\t\texecuteAction() {\n\t\t\tif (!this.action)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst action = new Action(this.action);\n\t\t\taction.execute(this);\n\t\t},\n\t\tsetIcon(icon: String) {\n\t\t\tthis.currentIcon = icon;\n\t\t}\n\t},\n\ttemplate: `\n\t\t<div :class=\"className\" @click=\"executeAction\">\n\t\t\t<div class=\"crm-timeline__card-logo_content\">\n\t\t\t\t<div :class=\"iconClassname\">\n\t\t\t\t\t<i :style=\"iconInteriorStyle\"></i>\n\t\t\t\t</div>\n\t\t\t\t<div :class=\"addIconClassname\" v-if=\"addIcon\">\n\t\t\t\t\t<i></i>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`\n};\n","import {DateTimeFormat} from 'main.date';\nimport { DatetimeConverter } from 'crm.timeline.tools';\n\nexport const CalendarIcon = {\n\tprops: {\n\t\ttimestamp: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t\tdefault: 0,\n\t\t}\n\t},\n\n\tcomputed: {\n\t\tuserTime() {\n\t\t\treturn DatetimeConverter.createFromServerTimestamp(this.timestamp).toUserTime().getValue();\n\t\t},\n\t\tdate() {\n\t\t\treturn DateTimeFormat.format('d', this.userTime);\n\t\t},\n\t\tmonth() {\n\t\t\treturn DateTimeFormat.format('F', this.userTime);\n\t\t},\n\t\tdayWeek() {\n\t\t\treturn DateTimeFormat.format('D', this.userTime);\n\t\t},\n\n\t\ttime() {\n\t\t\treturn DatetimeConverter.createFromServerTimestamp(this.timestamp).toUserTime().toTimeString();\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"crm-timeline__calendar-icon\">\n\t\t\t<header class=\"crm-timeline__calendar-icon_top\">\n\t\t\t\t<div class=\"crm-timeline__calendar-icon_bullets\">\n\t\t\t\t\t<div class=\"crm-timeline__calendar-icon_bullet\"></div>\n\t\t\t\t\t<div class=\"crm-timeline__calendar-icon_bullet\"></div>\n\t\t\t\t</div>\n\t\t\t</header>\n\t\t\t<main class=\"crm-timeline__calendar-icon_content\">\n\t\t\t\t<div class=\"crm-timeline__calendar-icon_day\">{{ date }}</div>\n\t\t\t\t<div class=\"crm-timeline__calendar-icon_month\">{{ month }}</div>\n\t\t\t\t<div class=\"crm-timeline__calendar-icon_date\">\n\t\t\t\t\t<span class=\"crm-timeline__calendar-icon_day-week\">{{ dayWeek }}</span>\n\t\t\t\t\t<span class=\"crm-timeline__calendar-icon_time\">{{ time }}</span>\n\t\t\t\t</div>\n\t\t\t</main>\n\t\t</div>\n\t`\n}","import {BitrixVue} from 'ui.vue3';\n\nimport {Logo} from './logo';\nimport {CalendarIcon} from './calendar-icon';\n\nexport const LogoCalendar = BitrixVue.cloneComponent(Logo, {\n\tcomponents: {\n\t\tCalendarIcon,\n\t},\n\tprops: {\n\t\ttimestamp: {\n\t\t\ttype: Number,\n\t\t\trequired: false,\n\t\t\tdefault: 0,\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div :class=\"className\" @click=\"executeAction\">\n\t\t\t<div class=\"crm-timeline__card-logo_content\">\n\t\t\t\t<CalendarIcon :timestamp=\"timestamp\" />\n\t\t\t</div>\n\t\t</div>\n\t`\n});","import { Logo } from './body/logo';\nimport { LogoCalendar } from './body/logo-calendar';\nimport { Type } from 'main.core';\n\nexport const Body = {\n\tcomponents: {\n\t\tLogo,\n\t\tLogoCalendar,\n\t},\n\tprops: {\n\t\tlogo: Object,\n\t\tblocks: Object,\n\t},\n\tdata()\n\t{\n\t\treturn {\n\t\t\tblockRefs: {},\n\t\t}\n\t},\n\tmounted() {\n\t\tconst blocks = this.$refs.blocks;\n\t\tif (!blocks || !this.visibleBlocks)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tthis.visibleBlocks.forEach((block, index) => {\n\t\t\tif (Type.isDomNode(blocks[index].$el))\n\t\t\t{\n\t\t\t\tblocks[index].$el.setAttribute('data-id', block.id);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthrow new Error('Vue component \"' + block.rendererName + '\" was not found');\n\t\t\t}\n\t\t});\n\t},\n\tbeforeUpdate() {\n\t\tthis.blockRefs = {};\n\t},\n\tcomputed: {\n\t\tvisibleBlocks(): Array\n\t\t{\n\t\t\tif (!Type.isPlainObject(this.blocks))\n\t\t\t{\n\t\t\t\treturn [];\n\t\t\t}\n\n\t\t\treturn Object.keys(this.blocks)\n\t\t\t\t.map((id) => ({id, ...this.blocks[id]}))\n\t\t\t\t.filter((item) => (item.scope !== 'mobile'))\n\t\t\t\t.sort((a, b) => {\n\t\t\t\t\tlet aSort = a.sort === undefined ? 0 : a.sort\n\t\t\t\t\tlet bSort = b.sort === undefined ? 0 : b.sort\n\n\t\t\t\t\tif (aSort < bSort) {\n\t\t\t\t\t\treturn -1;\n\t\t\t\t\t}\n\t\t\t\t\tif (aSort > bSort) {\n\t\t\t\t\t\treturn  1;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn 0\n\t\t\t\t})\n\t\t\t;\n\t\t},\n\t\tcontentContainerClassname(): Array {\n\t\t\treturn [\n\t\t\t\t'crm-timeline__card-container', {\n\t\t\t\t'--without-logo': !this.logo,\n\t\t\t\t}\n\t\t\t];\n\t\t}\n\t},\n\tmethods: {\n\t\tgetContentBlockById(blockId: string): ?Object\n\t\t{\n\t\t\treturn this.blockRefs[blockId] ?? null;\n\t\t},\n\t\tgetLogo(): ?Object\n\t\t{\n\t\t\treturn this.$refs.logo;\n\t\t},\n\t\tsaveRef(ref: Object, id: string): void\n\t\t{\n\t\t\tthis.blockRefs[id] = ref;\n\t\t}\n\t},\n\ttemplate: `\n\t\t<div class=\"crm-timeline__card-body\">\n\t\t\t<div v-if=\"logo\" class=\"crm-timeline__card-logo_container\">\n\t\t\t\t<LogoCalendar v-if=\"logo.icon === 'calendar'\" v-bind=\"logo\"></LogoCalendar>\n\t\t\t\t<Logo v-else v-bind=\"logo\" ref=\"logo\"></Logo>\n\t\t\t</div>\n\t\t\t<div :class=\"contentContainerClassname\">\n\t\t\t\t<div\n\t\t\t\t\tv-for=\"block in visibleBlocks\"\n\t\t\t\t\t:key=\"block.id\"\n\t\t\t\t\tclass=\"crm-timeline__card-container_block\"\n\t\t\t\t>\n\t\t\t\t\t<component\n\t\t\t\t\t\t:is=\"block.rendererName\"\n\t\t\t\t\t\tv-bind=\"block.properties\"\n\t\t\t\t\t\t:ref=\"(el) => this.saveRef(el, block.id)\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`\n};\n","export class ButtonState {\n\tstatic DEFAULT = '';\n\tstatic LOADING = 'loading';\n\tstatic DISABLED = 'disabled';\n\tstatic HIDDEN = 'hidden';\n}","import { ButtonState } from '../enums/button-state';\nimport { Button as UIButton } from 'ui.buttons';\nimport { Action } from '../../action';\n\nexport const BaseButton = {\n\tprops: {\n\t\tid: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t},\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t},\n\t\tstate: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: ButtonState.DEFAULT,\n\t\t},\n\t\taction: Object,\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tcurrentState: this.state,\n\t\t}\n\t},\n\n\tcomputed: {\n\t\titemStateToButtonStateDict() {\n\t\t\treturn {\n\t\t\t\t[ButtonState.LOADING]: UIButton.State.WAITING,\n\t\t\t\t[ButtonState.DISABLED]: UIButton.State.DISABLED,\n\t\t\t}\n\t\t},\n\t},\n\n\tmethods: {\n\t\tsetDisabled(disabled: boolean): void\n\t\t{\n\t\t\tif (disabled)\n\t\t\t{\n\t\t\t\tthis.setButtonState(ButtonState.DISABLED);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.setButtonState(ButtonState.DEFAULT);\n\t\t\t}\n\t\t},\n\n\t\tsetLoading(loading: boolean): void\n\t\t{\n\t\t\tif (loading)\n\t\t\t{\n\t\t\t\tthis.setButtonState(ButtonState.LOADING);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.setButtonState(ButtonState.DEFAULT);\n\t\t\t}\n\t\t},\n\n\t\tsetButtonState(state): void\n\t\t{\n\t\t\tif (this.currentState !== state)\n\t\t\t{\n\t\t\t\tthis.currentState = state;\n\t\t\t}\n\t\t},\n\n\t\tonLayoutUpdated(): void\n\t\t{\n\t\t\tthis.setButtonState(this.state);\n\t\t},\n\n\t\texecuteAction(): void\n\t\t{\n\t\t\tif (this.action && this.currentState !== ButtonState.DISABLED && this.currentState !== ButtonState.LOADING)\n\t\t\t{\n\t\t\t\tconst action = new Action(this.action);\n\t\t\t\taction.execute(this);\n\t\t\t}\n\t\t},\n\n\n\t},\n\n\tcreated() {\n\t\tthis.$Bitrix.eventEmitter.subscribe('layout:updated', this.onLayoutUpdated);\n\t},\n\tbeforeDestroy(): void\n\t{\n\t\tthis.$Bitrix.eventEmitter.unsubscribe('layout:updated', this.onLayoutUpdated);\n\t},\n\n\ttemplate: `<button></button>`\n}","import {ButtonState} from \"../../enums/button-state\";\nimport {BitrixVue} from 'ui.vue3';\nimport {BaseButton} from '../baseButton';\nimport {Loader} from 'main.loader';\n\nexport const AdditionalButtonIcon = Object.freeze({\n\tNOTE: 'note',\n\tSCRIPT: 'script',\n\tPRINT: 'print',\n\tDOTS: 'dots',\n});\n\nexport const AdditionalButtonColor = Object.freeze({\n\tDEFAULT: 'default',\n\tPRIMARY: 'primary',\n});\n\nexport const AdditionalButton = BitrixVue.cloneComponent(BaseButton, {\n\tprops: {\n\t\ticonName: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t\tvalidator(value: string): boolean {\n\t\t\t\treturn Object.values(AdditionalButtonIcon).indexOf(value) > -1;\n\t\t\t},\n\t\t},\n\t\tcolor: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: AdditionalButtonColor.DEFAULT,\n\t\t\tvalidator(value: string)\n\t\t\t{\n\t\t\t\treturn Object.values(AdditionalButtonColor).indexOf(value) > -1;\n\t\t\t},\n\t\t},\n\t},\n\n\tcomputed: {\n\t\tclassName(): Array {\n\t\t\treturn [\n\t\t\t\t'crm-timeline__card_add-button', {\n\t\t\t\t\t[`--icon-${this.iconName}`]: this.iconName,\n\t\t\t\t\t[`--color-${this.color}`]: this.color,\n\t\t\t\t\t[`--state-${this.currentState}`]: this.currentState,\n\t\t\t\t},\n\t\t\t]\n\t\t},\n\n\t\tButtonState(): ButtonState {\n\t\t\treturn ButtonState;\n\t\t},\n\n\t\tloaderHtml(): string {\n\t\t\tconst loader = new Loader({\n\t\t\t\tmode: 'inline',\n\t\t\t\tsize: 20,\n\t\t\t});\n\n\t\t\tloader.show();\n\t\t\treturn loader.layout.outerHTML;\n\t\t},\n\t},\n\n\ttemplate: `\n\t\t<transition name=\"crm-timeline__card_add-button-fade\" mode=\"out-in\">\n\t\t\t<div\n\t\t\t\tv-if=\"currentState === ButtonState.LOADING\"\n\t\t\t\tv-html=\"loaderHtml\"\n\t\t\t\tclass=\"crm-timeline__card_add-button\"\n\t\t\t></div>\n\t\t\t<div\n\t\t\t\tv-else\n\t\t\t\t:title=\"title\"\n\t\t\t\t@click=\"executeAction\"\n\t\t\t\t:class=\"className\">\n\t\t\t</div>\n\t\t</transition>\n\t`\n});","import {MenuManager} from \"main.popup\";\nimport {Menu as LayoutMenu} from \"../../layout/menu\";\nconst MenuId = 'timeline-more-button-menu';\nimport {AdditionalButton, AdditionalButtonColor, AdditionalButtonIcon} from './add-button';\n\nexport const Menu = {\n\tcomponents: {\n\t\tAdditionalButton,\n\t},\n\tprops: {\n\t\tbuttons: Array, // buttons that didn't fit into footer\n\t\titems: Object, // real menu items\n\t},\n\tinject: [\n\t\t'isReadOnly',\n\t],\n\tcomputed: {\n\t\titemsArray(): Array\n\t\t{\n\t\t\tif (!this.items)\n\t\t\t{\n\t\t\t\treturn [];\n\t\t\t}\n\n\t\t\treturn Object.values(this.items)\n\t\t\t\t.filter((item) => (item.state !== 'hidden' && item.scope !== 'mobile' && (!this.isReadOnly || !item.hideIfReadonly)))\n\t\t\t\t.sort((a, b) => (a.sort - b.sort))\n\t\t\t;\n\t\t},\n\t\tmenuItems(): Array\n\t\t{\n\t\t\tlet result = this.buttons;\n\t\t\tif (this.buttons.length && this.itemsArray.length)\n\t\t\t{\n\t\t\t\tresult.push({delimiter: true});\n\t\t\t}\n\t\t\tresult = [...result, ...this.itemsArray];\n\n\t\t\treturn result;\n\t\t},\n\t\tbuttonProps() {\n\t\t\treturn {\n\t\t\t\tcolor: AdditionalButtonColor.DEFAULT,\n\t\t\t\ticon: AdditionalButtonIcon.DOTS,\n\t\t\t}\n\t\t},\n\t},\n\tbeforeUnmount(): void\n\t{\n\t\tconst menu = MenuManager.getMenuById(MenuId);\n\t\tif (menu)\n\t\t{\n\t\t\tmenu.destroy();\n\t\t}\n\t},\n\tmethods: {\n\t\tshowMenu(): void\n\t\t{\n\t\t\tLayoutMenu.showMenu(\n\t\t\t\tthis,\n\t\t\t\tthis.menuItems,\n\t\t\t\t{\n\t\t\t\t\tid: MenuId,\n\t\t\t\t\tclassName: 'crm-timeline__card_more-menu',\n\t\t\t\t\twidth: 230,\n\t\t\t\t\tangle: false,\n\t\t\t\t\tcacheable: false,\n\t\t\t\t\tbindElement: this.$el,\n\t\t\t\t}\n\t\t\t);\n\t\t},\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<div class=\"crm-timeline__card-action_menu-item\" @click=\"showMenu\">\n\t\t<AdditionalButton iconName=\"dots\" color=\"default\"></AdditionalButton>\n\t\t</div>\n\t`\n};\n","export class ButtonType {\n\tstatic ICON = 'icon';\n\tstatic PRIMARY = 'primary';\n\tstatic SECONDARY = 'secondary';\n\tstatic LIGHT = 'light';\n}","import {BitrixVue} from 'ui.vue3';\nimport {BaseButton} from './baseButton';\nimport { ButtonOptions, Button as UIButton } from 'ui.buttons';\nimport {ButtonType} from '../enums/button-type';\nimport {ButtonState} from '../enums/button-state';\nimport {Type} from 'main.core';\n\nexport const Button  = BitrixVue.cloneComponent(BaseButton, {\n\tprops: {\n\t\ttype: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: ButtonType.SECONDARY,\n\t\t},\n\t\ticonName: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t},\n\t\tsize: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: 'extra_small'\n\t\t},\n\t},\n\n\tdata() {\n\t\treturn {\n\t\t\tpopup: null,\n\t\t\tuiButton: Object.freeze(null),\n\t\t\ttimerSecondsRemaining: 0,\n\t\t}\n\t},\n\n\tcomputed: {\n\t\tbuttonOptions(): ButtonOptions {\n\t\t\tconst upperCaseIconName = Type.isString(this.iconName) ? this.iconName.toUpperCase() : '';\n\t\t\tconst upperCaseButtonSize = Type.isString(this.size) ? this.size.toUpperCase() : 'extra_small';\n\t\t\tconst color = this.itemTypeToButtonColorDict[this.type] || UIButton.Color.LIGHT_BORDER;\n\t\t\tconst text = this.type === ButtonType.ICON ? '' : this.title;\n\t\t\treturn {\n\t\t\t\tid: this.id,\n\t\t\t\tround: true,\n\t\t\t\tdependOnTheme: false,\n\t\t\t\tsize: UIButton.Size[upperCaseButtonSize],\n\t\t\t\ttext: text,\n\t\t\t\tcolor: color,\n\t\t\t\tstate: this.itemStateToButtonStateDict[this.currentState],\n\t\t\t\ticon: UIButton.Icon[upperCaseIconName],\n\t\t\t}\n\t\t},\n\n\t\titemTypeToButtonColorDict(): Object {\n\t\t\treturn {\n\t\t\t\t[ButtonType.PRIMARY]: UIButton.Color.PRIMARY,\n\t\t\t\t[ButtonType.SECONDARY]: UIButton.Color.LIGHT_BORDER,\n\t\t\t\t[ButtonType.LIGHT]: UIButton.Color.LIGHT,\n\t\t\t\t[ButtonType.ICON]: UIButton.Color.LINK,\n\t\t\t}\n\t\t},\n\n\t\tbuttonContainerRef(): HTMLElement | undefined {\n\t\t\treturn this.$refs.buttonContainer;\n\t\t},\n\t},\n\n\tmethods: {\n\t\tgetUiButton(): ?UIButton\n\t\t{\n\t\t\treturn this.uiButton;\n\t\t},\n\n\t\tdisableWithTimer(sec: number)\n\t\t{\n\t\t\tthis.setButtonState(ButtonState.DISABLED);\n\t\t\tconst btn = this.getUiButton();\n\t\t\tlet remainingSeconds = sec;\n\n\t\t\tbtn.setText(this.formatSeconds(remainingSeconds));\n\n\t\t\tconst timer = setInterval(() => {\n\t\t\t\tif (remainingSeconds < 1)\n\t\t\t\t{\n\t\t\t\t\tclearInterval(timer);\n\t\t\t\t\tbtn.setText(this.title);\n\t\t\t\t\tthis.setButtonState(ButtonState.DEFAULT);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tremainingSeconds--;\n\t\t\t\tbtn.setText(this.formatSeconds(remainingSeconds));\n\t\t\t}, 1000);\n\t\t},\n\n\t\tformatSeconds(sec: number): string {\n\t\t\tconst minutes = Math.floor(sec / 60);\n\t\t\tconst seconds = sec % 60;\n\n\t\t\tconst formatMinutes = this.formatNumber(minutes);\n\t\t\tconst formatSeconds = this.formatNumber(seconds);\n\n\t\t\treturn `${formatMinutes}:${formatSeconds}`;\n\t\t},\n\n\t\tformatNumber(num: number): string {\n\t\t\treturn num < 10 ? `0${num}` : num;\n\t\t},\n\n\t\tsetButtonState(state): void\n\t\t{\n\t\t\tthis.parentSetButtonState(state);\n\t\t\tthis.getUiButton()?.setState(this.itemStateToButtonStateDict[this.currentState] ?? null);\n\t\t},\n\n\t\trenderButton(): void {\n\t\t\tif (!this.buttonContainerRef) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.buttonContainerRef.innerHTML = '';\n\t\t\tconst button = new UIButton(this.buttonOptions);\n\t\t\tbutton.renderTo(this.buttonContainerRef);\n\t\t\tthis.uiButton = button;\n\t\t},\n\t},\n\n\twatch: {\n\t\tstate(newValue): void\n\t\t{\n\t\t\tthis.setButtonState(newValue);\n\t\t},\n\t},\n\n\tmounted() {\n\t\tthis.renderButton();\n\t},\n\tupdated() {\n\t\tthis.renderButton();\n\t},\n\n\ttemplate: `\n\t\t<div\n\t\t\t:class=\"$attrs.class\"\n\t\t\tref=\"buttonContainer\"\n\t\t\t@click=\"executeAction\">\n\t\t</div>\n\t`\n});\n","import {Button} from '../button';\n\nexport const Buttons = {\n\tcomponents: {\n\t\tButton,\n\t},\n\tprops: {\n\t\titems: {\n\t\t\ttype: Array,\n\t\t\trequired: false,\n\t\t\tdefault: () => [],\n\t\t},\n\t},\n\tmethods: {\n\t\tgetButtonById(buttonId: string): ?Object\n\t\t{\n\t\t\tconst buttons = this.$refs.buttons;\n\n\t\t\treturn this.items.reduce((found, button, index) =>\n\t\t\t{\n\t\t\t\tif (found)\n\t\t\t\t{\n\t\t\t\t\treturn found;\n\t\t\t\t}\n\t\t\t\tif (button.id === buttonId)\n\t\t\t\t{\n\t\t\t\t\treturn buttons[index];\n\t\t\t\t}\n\n\t\t\t\treturn null;\n\t\t\t}, null);\n\t\t},\n\t},\n\ttemplate:\n\t\t`\n\t\t\t<div class=\"crm-timeline__card-action_buttons\">\n\t\t\t\t<Button class=\"crm-timeline__card-action-btn\" v-for=\"item in items\" v-bind=\"item\" ref=\"buttons\" />\n\t\t\t</div>\n\t\t`\n};\n","export class ButtonScope {\n\tstatic MOBILE = 'mobile';\n}","import {Menu} from './footer/menu';\nimport {Buttons} from './footer/buttons';\nimport {Type} from 'main.core';\nimport {Button} from './button';\nimport {ButtonState} from '../enums/button-state';\nimport {ButtonScope} from '../enums/button-scope';\nimport {ButtonType} from '../enums/button-type';\nimport {AdditionalButton} from './footer/add-button';\n\nexport const Footer = {\n\tcomponents: {\n\t\tButtons,\n\t\tMenu,\n\t\tButton,\n\t\tAdditionalButton,\n\t},\n\tprops: {\n\t\tbuttons: Object,\n\t\tmenu: Object,\n\t\tadditionalButtons: {\n\t\t\ttype: Object,\n\t\t\trequired: false,\n\t\t\tdefault: () => ({}),\n\t\t},\n\t\tmaxBaseButtonsCount: {\n\t\t\ttype: Number,\n\t\t\trequired: false,\n\t\t\tdefault: 3,\n\t\t},\n\n\t},\n\tinject: [\n\t\t'isReadOnly',\n\t],\n\tcomputed: {\n\t\tcontainerClassname(): Array {\n\t\t\treturn [\n\t\t\t\t'crm-timeline__card-action', {\n\t\t\t\t'--no-margin-top': this.baseButtons.length < 1,\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\tbaseButtons(): Array\n\t\t{\n\t\t\treturn this.visibleAndSortedButtons.slice(0, this.maxBaseButtonsCount);\n\t\t},\n\n\t\tmoreButtons(): Array\n\t\t{\n\t\t\treturn this.visibleAndSortedButtons.slice(this.maxBaseButtonsCount);\n\t\t},\n\n\n\t\tvisibleAndSortedButtons() {\n\t\t\treturn this.visibleButtons.sort(this.buttonsSorter);\n\t\t},\n\n\t\tvisibleAndSortedAdditionalButtons() {\n\t\t\treturn this.visibleAdditionalButtons.sort(this.buttonsSorter);\n\t\t},\n\n\t\tvisibleButtons(): Array\n\t\t{\n\t\t\tif (!Type.isPlainObject(this.buttons))\n\t\t\t{\n\t\t\t\treturn [];\n\t\t\t}\n\n\t\t\treturn this.buttons\n\t\t\t\t?  Object.keys(this.buttons)\n\t\t\t\t\t.map((id) => ({id, ...this.buttons[id]}))\n\t\t\t\t\t.filter(this.visibleButtonsFilter)\n\t\t\t\t: [];\n\t\t},\n\n\t\tvisibleAdditionalButtons(): Array {\n\t\t\treturn this.additionalButtonsArray\n\t\t\t\t? Object.values(this.additionalButtonsArray).filter(this.visibleButtonsFilter)\n\t\t\t\t: [];\n\t\t},\n\n\t\tadditionalButtonsArray() {\n\t\t\treturn Object.entries(this.additionalButtons).map(([id, button]) => {\n\t\t\t\treturn {id, type: ButtonType.ICON, ...button};\n\t\t\t});\n\t\t},\n\n\t\thasMenu(): boolean\n\t\t{\n\t\t\treturn this.moreButtons.length || (Type.isPlainObject(this.menu) && Object.keys(this.menu).length);\n\t\t},\n\t},\n\tmethods: {\n\t\tvisibleButtonsFilter(buttonItem) {\n\t\t\treturn buttonItem.state !== ButtonState.HIDDEN\n\t\t\t\t&& buttonItem.scope !== ButtonScope.MOBILE\n\t\t\t\t&& (!this.isReadOnly || !buttonItem.hideIfReadonly);\n\t\t},\n\n\t\tbuttonsSorter(buttonA, buttonB) {\n\t\t\treturn buttonA?.sort - buttonB?.sort;\n\t\t},\n\n\t\tgetButtonById(buttonId: string): ?Object\n\t\t{\n\t\t\tif (this.$refs.buttons)\n\t\t\t{\n\t\t\t\tconst foundButton = this.$refs.buttons.getButtonById(buttonId);\n\t\t\t\tif (foundButton)\n\t\t\t\t{\n\t\t\t\t\treturn foundButton;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (this.$refs.additionalButtons)\n\t\t\t{\n\t\t\t\treturn this.visibleAndSortedAdditionalButtons.reduce((found, button, index) =>\n\t\t\t\t{\n\t\t\t\t\tif (found)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn found;\n\t\t\t\t\t}\n\t\t\t\t\tif (button.id === buttonId)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn buttons[index];\n\t\t\t\t\t}\n\n\t\t\t\t\treturn null;\n\t\t\t\t}, null);\n\t\t\t}\n\n\t\t\treturn null;\n\t\t}\n\t},\n\ttemplate: `\n\t\t<div :class=\"containerClassname\">\n\t\t\t<Buttons ref=\"buttons\" :items=\"baseButtons\" />\n\t\t\t<div class=\"crm-timeline__card-action_menu\">\n\t\t\t\t<div\n\t\t\t\t\tv-for=\"button in visibleAndSortedAdditionalButtons\"\n\t\t\t\t\t:key=\"button.id\"\n\t\t\t\t\tclass=\"crm-timeline__card-action_menu-item\"\n\t\t\t\t>\n\t\t\t\t\t<additional-button\n\t\t\t\t\t\tv-bind=\"button\"\n\t\t\t\t\t>\n\t\t\t\t\t</additional-button>\n\t\t\t\t</div>\n\t\t\t\t<Menu v-if=\"hasMenu\" :buttons=\"moreButtons\" v-bind=\"menu\" />\n\t\t\t</div>\n\t\t</div>\n\t`\n};\n","import {Type} from \"main.core\";\nimport {Action} from \"../../action\";\n\nexport const MarketPanel = {\n\tprops: {\n\t\ttext: String,\n\t\tdetailsText: String,\n\t\tdetailsTextAction: Object,\n\n\t},\n\tcomputed: {\n\t\tneedShowDetailsText(): boolean\n\t\t{\n\t\t\treturn Type.isStringFilled(this.detailsText);\n\t\t},\n\t\thref(): ?string\n\t\t{\n\t\t\tif (!this.detailsTextAction)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tconst action = new Action(this.detailsTextAction);\n\t\t\tif (action.isRedirect())\n\t\t\t{\n\t\t\t\treturn action.getValue();\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\t},\n\tmethods: {\n\t\texecuteAction(): void\n\t\t{\n\t\t\tif (this.detailsTextAction)\n\t\t\t{\n\t\t\t\tconst action = new Action(this.detailsTextAction);\n\t\t\t\taction.execute(this);\n\t\t\t}\n\t\t}\n\t},\n\ttemplate: `\n\t\t<div class=\"crm-timeline__card-bottom\">\n\t\t<div class=\"crm-timeline__card-market\">\n\t\t\t<div class=\"crm-timeline__card-market_container\">\n\t\t\t\t<span class=\"crm-timeline__card-market_logo\"></span>\n\t\t\t\t<span class=\"crm-timeline__card-market_text\">{{ text }}</span>\n\t\t\t\t<a\n\t\t\t\t\tv-if=\"href && needShowDetailsText\"\n\t\t\t\t\t:href=\"href\"\n\t\t\t\t\tclass=\"crm-timeline__card-market_more\"\n\t\t\t\t>\n\t\t\t\t\t{{detailsText}}\n\t\t\t\t</a>\n\t\t\t\t<span\n\t\t\t\t\tv-if=\"!href && needShowDetailsText\"\n\t\t\t\t\t@click=\"executeAction\"\n\t\t\t\t\tclass=\"crm-timeline__card-market_more\"\n\t\t\t\t>\n\t\t\t\t{{detailsText}}\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t\t<div class=\"crm-timeline__card-market_cross\"><i></i></div>\n\t\t</div>\n\t\t</div>\n\t`\n};\n","export const UserPick = {\n\ttemplate: `\n\t\t<div class=\"ui-icon ui-icon-common-user crm-timeline__card-top_user-icon\">\n\t\t\t<i></i>\n\t\t</div>\n\t`\n}","export const StreamType = {\n\thistory: 0,\n\tscheduled: 1,\n\tpinned: 2,\n}","import {Icon} from './layout/icon';\nimport {Header} from './layout/header';\nimport {Body} from './layout/body';\nimport {Footer} from './layout/footer';\nimport {MarketPanel} from './layout/marketPanel';\nimport {UserPick} from './layout/userPick';\nimport {Dom, Runtime} from \"main.core\";\nimport {BaseEvent} from \"main.core.events\";\nimport {Loader} from \"main.loader\";\nimport {StreamType} from '../stream-type';\n\nexport const Item = {\n\tcomponents: {\n\t\tIcon,\n\t\tHeader,\n\t\tBody,\n\t\tFooter,\n\t\tMarketPanel,\n\t\tUserPick\n\t},\n\tprops: {\n\t\tinitialLayout: Object,\n\t\tid: String,\n\t\tuseShortTimeFormat: Boolean,\n\t\tisLogMessage: Boolean,\n\t\tisReadOnly: Boolean,\n\t\tcurrentUser: Object | null,\n\t\tonAction: Function,\n\t\tstreamType: {\n\t\t\ttype: Number,\n\t\t\trequired: false,\n\t\t\tdefault: StreamType.history,\n\t\t}\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tlayout: this.initialLayout,\n\t\t\tisFaded: false,\n\t\t\tloader: Object.freeze(null),\n\t\t}\n\t},\n\tprovide() {\n\t\treturn {\n\t\t\tisLogMessage: !!this.initialLayout?.isLogMessage,\n\t\t\tisReadOnly: this.isReadOnly,\n\t\t\tcurrentUser: this.currentUser,\n\t\t};\n\t},\n\tcreated(): void\n\t{\n\t\tthis.$Bitrix.eventEmitter.subscribe('crm:timeline:item:action', this.onActionEvent);\n\t},\n\tbeforeDestroy(): void\n\t{\n\t\tthis.$Bitrix.eventEmitter.unsubscribe('crm:timeline:item:action', this.onActionEvent);\n\t},\n\tmethods: {\n\t\tonActionEvent(event: BaseEvent): void\n\t\t{\n\t\t\tconst eventData = event.getData();\n\t\t\tthis.onAction(Runtime.clone(eventData));\n\t\t},\n\t\tsetLayout(newLayout: Object): void\n\t\t{\n\t\t\tthis.layout = newLayout;\n\t\t\tthis.isFaded = false;\n\t\t\tthis.$Bitrix.eventEmitter.emit('layout:updated');\n\t\t},\n\n\t\tsetFaded(faded: boolean)\n\t\t{\n\t\t\tthis.isFaded = faded;\n\t\t},\n\n\t\tshowLoader(showLoader: boolean)\n\t\t{\n\t\t\tif (showLoader)\n\t\t\t{\n\t\t\t\tthis.setFaded(true);\n\t\t\t\tif (!this.loader)\n\t\t\t\t{\n\t\t\t\t\tthis.loader = new Loader();\n\t\t\t\t}\n\t\t\t\tthis.loader.show(this.$el.parentNode);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (this.loader)\n\t\t\t\t{\n\t\t\t\t\tthis.loader.hide();\n\t\t\t\t}\n\t\t\t\tthis.setFaded(false);\n\t\t\t}\n\t\t},\n\n\t\tgetContentBlockById(blockId: string): ?Object\n\t\t{\n\t\t\tif (!this.$refs.body)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn this.$refs.body.getContentBlockById(blockId);\n\t\t},\n\n\t\tgetLogo(): ?Object\n\t\t{\n\t\t\tif (!this.$refs.body)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn this.$refs.body.getLogo();\n\t\t},\n\n\t\tgetHeaderChangeStreamButton(): ?Object\n\t\t{\n\t\t\tif (!this.$refs.header)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn this.$refs.header.getChangeStreamButton();\n\t\t},\n\n\t\tgetFooterButtonById(buttonId: string): ?Object\n\t\t{\n\t\t\tif (!this.$refs.footer)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn this.$refs.footer.getButtonById(buttonId);\n\t\t},\n\n\t\thighlightContentBlockById(blockId: string, isHighlighted: boolean): void\n\t\t{\n\t\t\tif (!isHighlighted)\n\t\t\t{\n\t\t\t\tthis.isFaded = false;\n\t\t\t}\n\t\t\tconst block = this. getContentBlockById(blockId);\n\t\t\tif (!block)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (isHighlighted)\n\t\t\t{\n\t\t\t\tthis.isFaded = true;\n\t\t\t\tDom.addClass(block.$el, '--highlighted');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.isFaded = false;\n\t\t\t\tDom.removeClass(block.$el, '--highlighted');\n\t\t\t}\n\t\t}\n\t},\n\tcomputed: {\n\t\ttimelineCardClassname() {\n\t\t\treturn {\n\t\t\t\t'crm-timeline__card': true,\n\t\t\t\t'crm-timeline__card-scope': true,\n\t\t\t\t'--stream-type-history': this.streamType === StreamType.history,\n\t\t\t\t'--stream-type-scheduled': this.streamType === StreamType.scheduled,\n\t\t\t\t'--stream-type-pinned': this.streamType === StreamType.pinned,\n\t\t\t\t'--log-message': !!this.layout.isLogMessage,\n\t\t\t}\n\t\t}\n\t},\n\ttemplate: `\n\t\t<div :data-id=\"id\" :class=\"timelineCardClassname\">\n\t\t\t<div class=\"crm-timeline__card_fade\" v-if=\"isFaded\"></div>\n\t\t\t<div class=\"crm-timeline__card_icon_container\">\n\t\t\t\t<Icon v-bind=\"layout.icon\"></Icon>\n\t\t\t</div>\n\t\t\t<Header v-if=\"layout.header\" v-bind=\"layout.header\" :use-short-time-format=\"useShortTimeFormat\" ref=\"header\"></Header>\n\t\t\t<Body v-if=\"layout.body\" v-bind=\"layout.body\" ref=\"body\"></Body>\n\t\t\t<Footer v-if=\"layout.footer\" v-bind=\"layout.footer\" ref=\"footer\"></Footer>\n\t\t\t<MarketPanel v-if=\"layout.marketPanel\" v-bind=\"layout.marketPanel\"></MarketPanel>\n\t\t</div>\n\t`\n};\n","import {Runtime} from 'main.core';\n\nexport default class Layout {\n\t#layout: Object = null;\n\n\tconstructor (layout: Object) {\n\t\tthis.#layout = layout;\n\t}\n\n\tasPlainObject (): Object {\n\t\treturn Runtime.clone(this.#layout);\n\t}\n\n\tgetFooterMenuItemById (id: string): ?Object {\n\t\tconst items = this.#layout?.footer?.menu?.items ?? {};\n\n\t\treturn items.hasOwnProperty(id) ? items.id : null;\n\t}\n\n\taddFooterMenuItem (menuItem: Object): void {\n\t\tthis.#layout.footer = this.#layout.footer || {};\n\t\tthis.#layout.footer.menu = this.#layout.footer.menu || {};\n\t\tthis.#layout.footer.menu.items = this.#layout.footer.menu.items || {};\n\t\tthis.#layout.footer.menu.items[menuItem.id] = menuItem;\n\t}\n}\n","import ConfigurableItem from '../configurable-item';\n\nexport type ActionParams =\n{\n\taction: String,\n\tactionType: String,\n\tactionData: ?Object,\n\tresponse: ?Object,\n\tanimationCallbacks: ?ActionAnimationCallbacks,\n};\n\nexport type ActionAnimationCallbacks =\n{\n\tonStart: ?function,\n\tonStop: ?function,\n};\n\nexport class Base\n{\n\tonInitialize(item: ConfigurableItem): void\n\t{\n\n\t}\n\n\tonItemAction(item: ConfigurableItem, actionParams: ActionParams): void\n\t{\n\n\t}\n\n\tgetContentBlockComponents(item: ConfigurableItem): Object\n\t{\n\t\treturn {};\n\t}\n\n\tonAfterItemRefreshLayout(item: ConfigurableItem): void\n\t{\n\t}\n\n\tonAfterItemLayout(item: ConfigurableItem, options): void\n\t{\n\t}\n\n\t/**\n\t * Will be executed before item node deleted from DOM\n\t * @param item\n\t */\n\tonBeforeItemClearLayout(item: ConfigurableItem): void\n\t{\n\n\t}\n\n\tstatic isItemSupported(item: ConfigurableItem): boolean\n\t{\n\t\treturn false;\n\t}\n}\n","import ConfigurableItem from \"./configurable-item\";\n\nexport default class ControllerManager\n{\n\t#id: ?string = null;\n\n\tconstructor(id)\n\t{\n\t\tthis.#id = id;\n\t}\n\n\tgetItemControllers(item: ConfigurableItem): Array\n\t{\n\t\tconst foundControllers = [];\n\t\tfor (const controller of ControllerManager.getRegisteredControllers())\n\t\t{\n\t\t\tif (controller.isItemSupported(item))\n\t\t\t{\n\t\t\t\tconst controllerInstance = new controller();\n\t\t\t\tcontrollerInstance.onInitialize(item);\n\t\t\t\tfoundControllers.push(controllerInstance);\n\t\t\t}\n\t\t}\n\n\t\treturn foundControllers;\n\t}\n\n\tstatic getInstance(timelineId): ControllerManager\n\t{\n\t\tif (!this.#instances.hasOwnProperty(timelineId))\n\t\t{\n\t\t\tthis.#instances[timelineId] = new ControllerManager(timelineId);\n\t\t}\n\n\t\treturn this.#instances[timelineId];\n\t}\n\n\tstatic registerController(controller): void\n\t{\n\t\tthis.#availableControllers.push(controller);\n\t}\n\n\tstatic getRegisteredControllers(): Array\n\t{\n\t\treturn this.#availableControllers;\n\t}\n\n\tstatic #instances = {};\n\tstatic #availableControllers = [];\n}\n","import {ajax, Dom, Text, Type} from 'main.core';\nimport TimelineItem from './item';\nimport { Item } from './components/item';\nimport Layout from './layout';\nimport { BitrixVue } from 'ui.vue3';\nimport { Base } from \"./controllers/base\";\nimport ControllerManager from './controller-manager';\nimport { DatetimeConverter } from 'crm.timeline.tools';\nimport { StreamType } from 'crm.timeline.item';\n\ndeclare type ConfigurableItemParams = {\n\ttimelineId: string,\n\tcontainer: HTMLElement,\n\titemClassName: string,\n\tuseShortTimeFormat: boolean,\n\tisReadOnly: boolean,\n\tcurrentUser: ?Object,\n\townerTypeId: number,\n\townerId: number,\n\tdata: ConfigurableItemData,\n\tstreamType: number;\n};\n\ndeclare type ConfigurableItemData = {\n\ttype: string,\n\ttimestamp: ?Number,\n\tsort: ?Array,\n\tlayout: ?Object,\n\tpayload: ?Object,\n}\n\nexport default class ConfigurableItem extends TimelineItem\n{\n\t#container: HTMLElement = null;\n\t#itemClassName: string = null;\n\t#type: string = null;\n\t#dataPayload: ?Object = null;\n\t#timelineId: string = null;\n\t#timestamp: number = null;\n\t#sort: Array = null;\n\t#useShortTimeFormat: boolean = false;\n\t#isReadOnly: boolean = false;\n\t#currentUser: ?Object = null;\n\t#ownerTypeId: number = null;\n\t#ownerId: number = null;\n\t#controllers: Base[] = null;\n\t#layoutComponent: ?Object = null;\n\t#layoutApp: ?Object = null;\n\t#layout: ?Layout = null;\n\t#streamType: number = null;\n\n\tinitialize(id, settings: ConfigurableItemParams): void\n\t{\n\t\tthis._setId(id);\n\t\tsettings = settings || {};\n\t\tthis.#timelineId = settings.timelineId || '';\n\t\tthis.setContainer(settings.container || null);\n\t\tthis.#itemClassName = settings.itemClassName || '';\n\n\t\tif (Type.isPlainObject(settings.data))\n\t\t{\n\t\t\tthis.setData(settings.data);\n\n\t\t\tthis.#useShortTimeFormat = settings.useShortTimeFormat || false;\n\t\t\tthis.#isReadOnly = settings.isReadOnly || false;\n\t\t\tthis.#currentUser = settings.currentUser || null;\n\t\t\tthis.#ownerTypeId = settings.ownerTypeId;\n\t\t\tthis.#ownerId = settings.ownerId;\n\t\t\tthis.#streamType = settings.streamType || StreamType.history;\n\t\t}\n\n\t\tthis.#controllers = ControllerManager.getInstance(this.#timelineId).getItemControllers(this);\n\t}\n\n\tsetData(data: ConfigurableItemData): void\n\t{\n\t\tthis.#type = data.type || null;\n\t\tthis.#timestamp = data.timestamp || null;\n\t\tthis.#sort = data.sort || [];\n\t\tthis.#layout = new Layout(data.layout || {});\n\t\tthis.#dataPayload = data.payload || {};\n\t}\n\n\tgetLayout(): Layout\n\t{\n\t\treturn this.#layout;\n\t}\n\n\tgetType(): string\n\t{\n\t\treturn this.#type;\n\t}\n\n\tgetDataPayload(): ?Object\n\t{\n\t\treturn this.#dataPayload;\n\t}\n\n\tlayout(options): void\n\t{\n\t\tthis.setWrapper(Dom.create({tag: 'div', attrs: {className: this.#itemClassName}}));\n\t\tthis.#initLayoutApp();\n\n\t\tif (this.needBindToContainer(options))\n\t\t{\n\t\t\tconst bindTo = this.getBindToNode(options);\n\t\t\tif (bindTo && bindTo.nextSibling)\n\t\t\t{\n\t\t\t\tDom.insertBefore(this.getWrapper(), bindTo.nextSibling);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tDom.append(this.getWrapper(), this.#container);\n\t\t\t}\n\t\t}\n\n\t\tfor (const controller of this.#controllers)\n\t\t{\n\t\t\tcontroller.onAfterItemLayout(this, options);\n\t\t}\n\t}\n\n\tneedBindToContainer(options): Boolean\n\t{\n\t\tif (Type.isPlainObject(options))\n\t\t{\n\t\t\treturn BX.prop.getBoolean(options, 'add', true);\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tgetBindToNode(options): ?HTMLElement\n\t{\n\t\tif (Type.isPlainObject(options))\n\t\t{\n\t\t\treturn Type.isElementNode(options['anchor']) ? options['anchor'] : null;\n\t\t}\n\n\t\treturn null;\n\t}\n\n\trefreshLayout(): void\n\t{\n\t\t// try to refresh layout via vue reactivity, if possible:\n\t\tif (this.#layoutComponent)\n\t\t{\n\t\t\tthis.#layoutComponent.setLayout(this.getLayout().asPlainObject());\n\t\t\tfor (const controller of this.#controllers)\n\t\t\t{\n\t\t\t\tcontroller.onAfterItemRefreshLayout(this);\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tsuper.refreshLayout();\n\t\t}\n\t}\n\n\tgetLayoutContentBlockById(id: string): ?Object\n\t{\n\t\treturn this.#layoutComponent.getContentBlockById(id);\n\t}\n\n\tgetLogo(): ?Object\n\t{\n\t\treturn this.#layoutComponent.getLogo();\n\t}\n\n\tgetLayoutFooterButtonById(id: string): ?Object\n\t{\n\t\treturn this.#layoutComponent.getFooterButtonById(id);\n\t}\n\n\tgetLayoutHeaderChangeStreamButton(): ?Object\n\t{\n\t\treturn this.#layoutComponent.getHeaderChangeStreamButton();\n\t}\n\n\thighlightContentBlockById(blockId: string, isHighlighted: boolean): void\n\t{\n\t\tthis.#layoutComponent.highlightContentBlockById(blockId, isHighlighted);\n\t}\n\n\tclearLayout(): void\n\t{\n\t\tfor (const controller of this.#controllers)\n\t\t{\n\t\t\tcontroller.onBeforeItemClearLayout(this);\n\t\t}\n\t\tthis.#layoutApp.unmount();\n\t\tsuper.clearLayout();\n\t}\n\n\tgetCreatedDate(): Date\n\t{\n\t\tconst timestamp = this.#timestamp ? this.#timestamp : Date.now() / 1000;\n\n\t\treturn BX.prop.extractDate(DatetimeConverter.createFromServerTimestamp(timestamp).toUserTime().getValue());\n\t}\n\n\tgetSourceId(): number\n\t{\n\t\tlet id = this.getId();\n\t\tif (!Type.isInteger(id))\n\t\t{\n\t\t\t// id is like ACTIVITY_12\n\t\t\tid = Text.toInteger(id.replace(/^\\D+/g, ''));\n\t\t}\n\n\t\treturn id;\n\t}\n\n\t#initLayoutApp(): void\n\t{\n\t\tif (!this.#layoutApp)\n\t\t{\n\t\t\tthis.#layoutApp = BitrixVue.createApp(Item, this.#getLayoutAppProps());\n\n\t\t\tconst contentBlockComponents = this.#getContentBlockComponents();\n\t\t\tfor (const componentName in contentBlockComponents)\n\t\t\t{\n\t\t\t\tthis.#layoutApp.component(componentName, contentBlockComponents[componentName]);\n\t\t\t}\n\n\t\t\tthis.#layoutComponent = this.#layoutApp.mount(this.getWrapper());\n\t\t}\n\t}\n\n\t#getLayoutAppProps(): Object\n\t{\n\t\treturn {\n\t\t\tinitialLayout: this.getLayout().asPlainObject(),\n\t\t\tid: String(this.getId()),\n\t\t\tuseShortTimeFormat: this.#useShortTimeFormat,\n\t\t\tisReadOnly: this.isReadOnly(),\n\t\t\tcurrentUser: this.getCurrentUser(),\n\t\t\tstreamType: this.#streamType,\n\t\t\tonAction: this.#onLayoutAppAction.bind(this),\n\t\t};\n\t}\n\n\t#onLayoutAppAction(eventData: ?Object)\n\t{\n\t\tfor (const controller of this.#controllers)\n\t\t{\n\t\t\tcontroller.onItemAction(this, eventData);\n\t\t}\n\t}\n\n\t#getContentBlockComponents(): Object\n\t{\n\t\tlet components = {};\n\t\tfor (const controller of this.#controllers)\n\t\t{\n\t\t\tcomponents = Object.assign(components, controller.getContentBlockComponents(this));\n\t\t}\n\n\t\treturn components;\n\t}\n\n\tsetContainer(container): void\n\t{\n\t\tthis.#container = container;\n\t}\n\n\tgetContainer(): HTMLElement\n\t{\n\t\treturn this.#container;\n\t}\n\n\tgetDeadline(): ?Date\n\t{\n\t\tif (!this.#timestamp)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\treturn DatetimeConverter.createFromServerTimestamp(this.#timestamp).toUserTime().getValue();\n\t}\n\n\tgetSort(): Array\n\t{\n\t\treturn this.#sort;\n\t}\n\n\tisReadOnly(): boolean\n\t{\n\t\treturn this.#isReadOnly;\n\t}\n\n\tgetCurrentUser(): ?Object\n\t{\n\t\treturn this.#currentUser;\n\t}\n\n\tclone(): ConfigurableItem\n\t{\n\t\treturn ConfigurableItem.create(this.getId(), {\n\t\t\ttimelineId: this.#timelineId,\n\t\t\tcontainer: this.getContainer(),\n\t\t\titemClassName: this.#itemClassName,\n\t\t\tuseShortTimeFormat: this.#useShortTimeFormat,\n\t\t\tisReadOnly: this.#isReadOnly,\n\t\t\tcurrentUser: this.#currentUser,\n\t\t\tstreamType: this.#streamType,\n\t\t\tdata: {\n\t\t\t\ttype: this.#type,\n\t\t\t\ttimestamp: this.#timestamp,\n\t\t\t\tsort: this.#sort,\n\t\t\t\tlayout: this.getLayout().asPlainObject(),\n\t\t\t},\n\t\t});\n\t}\n\n\treloadFromServer(): Promise\n\t{\n\t\tconst data = {\n\t\t\townerTypeId: this.#ownerTypeId,\n\t\t\townerId: this.#ownerId,\n\t\t};\n\t\tif (this.#streamType === StreamType.history || this.#streamType === StreamType.pinned)\n\t\t{\n\t\t\tdata.historyIds = [ this.getId() ];\n\t\t}\n\t\telse if (this.#streamType === StreamType.scheduled)\n\t\t{\n\t\t\tdata.activityIds = [ this.getId() ];\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthrow new Error('Wrong stream type');\n\t\t}\n\n\t\treturn ajax.runAction('crm.timeline.item.load', {data})\n\t\t\t.then(response => {\n\t\t\t\tObject.values(response.data).forEach(item => {\n\t\t\t\t\tif (item.id === this.getId())\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.setData(item);\n\t\t\t\t\t\tthis.refreshLayout();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\treturn true;\n\t\t\t})\n\t\t\t.catch(err => {\n\t\t\t\tconsole.error(err);\n\t\t\t\treturn true;\n\t\t\t});\n\t}\n\n\tstatic create(id, settings): ConfigurableItem\n\t{\n\t\tconst self = new ConfigurableItem();\n\t\tself.initialize(id, settings);\n\t\treturn self;\n\t}\n}\n","import {Base} from './base';\nimport ConfigurableItem from '../configurable-item';\nimport {ajax as Ajax} from 'main.core';\nimport { MessageBox, MessageBoxButtons } from 'ui.dialogs.messagebox';\nimport {UI} from 'ui.notification';\n\nexport class Activity extends Base\n{\n\tonItemAction(item: ConfigurableItem, actionParams: ActionParams): void\n\t{\n\t\tconst {action, actionType, actionData, animationCallbacks} = actionParams;\n\n\t\tif (actionType !== 'jsEvent')\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tif (action === 'Activity:Edit' && actionData && actionData.activityId)\n\t\t{\n\t\t\tthis.#editActivity(actionData.activityId);\n\t\t}\n\t\tif (action === 'Activity:View' && actionData && actionData.activityId)\n\t\t{\n\t\t\tthis.#viewActivity(actionData.activityId);\n\t\t}\n\t\tif (action === 'Activity:Delete' && actionData && actionData.activityId)\n\t\t{\n\t\t\tconst confirmationText = actionData.confirmationText ?? '';\n\t\t\tif (confirmationText)\n\t\t\t{\n\t\t\t\tMessageBox.show({\n\t\t\t\t\tmessage: confirmationText,\n\t\t\t\t\tmodal: true,\n\t\t\t\t\tbuttons: MessageBoxButtons.YES_NO,\n\t\t\t\t\tonYes: () => {\n\t\t\t\t\t\treturn this.#deleteActivity(actionData.activityId, actionData.ownerTypeId, actionData.ownerId, animationCallbacks);\n\t\t\t\t\t},\n\t\t\t\t\tonNo: (messageBox) => {\n\t\t\t\t\t\tmessageBox.close();\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.#deleteActivity(actionData.activityId, actionData.ownerTypeId, actionData.ownerId);\n\t\t\t}\n\t\t}\n\t}\n\n\t#viewActivity(id): void\n\t{\n\t\tconst editor = this.#getActivityEditor();\n\t\tif (editor && id)\n\t\t{\n\t\t\teditor.viewActivity(id);\n\t\t}\n\t}\n\n\t#editActivity(id): void\n\t{\n\t\tconst editor = this.#getActivityEditor();\n\t\tif (editor && id)\n\t\t{\n\t\t\teditor.editActivity(id);\n\t\t}\n\t}\n\n\t#deleteActivity(activityId: Number, ownerTypeId: Number, ownerId: Number, animationCallbacks: ?Object)\n\t{\n\t\tif (animationCallbacks.onStart)\n\t\t{\n\t\t\tanimationCallbacks.onStart();\n\t\t}\n\t\treturn Ajax.runAction(\n\t\t\t'crm.timeline.activity.delete',\n\t\t\t{\n\t\t\t\tdata: {\n\t\t\t\t\tactivityId,\n\t\t\t\t\townerTypeId,\n\t\t\t\t\townerId,\n\t\t\t\t}\n\t\t\t}\n\t\t).then(() => {\n\t\t\tif (animationCallbacks.onStop)\n\t\t\t{\n\t\t\t\tanimationCallbacks.onStop();\n\t\t\t}\n\t\t\treturn true;\n\t\t}, (response) =>\n\t\t{\n\t\t\tUI.Notification.Center.notify({\n\t\t\t\tcontent: response.errors[0].message,\n\t\t\t\tautoHideDelay: 5000,\n\t\t\t});\n\t\t\tif (animationCallbacks.onStop)\n\t\t\t{\n\t\t\t\tanimationCallbacks.onStop();\n\t\t\t}\n\n\t\t\treturn true;\n\t\t});\n\t}\n\n\t#getActivityEditor(): BX.CrmActivityEditor\n\t{\n\t\treturn BX.CrmActivityEditor.getDefault();\n\t}\n\n\tstatic isItemSupported(item: ConfigurableItem): boolean\n\t{\n\t\tconst itemType = item.getType();\n\n\t\treturn (\n\t\t\titemType.indexOf('Activity:') === 0  // for items with type started from `Activity:`\n\t\t\t|| itemType === 'TodoCreated' // TodoCreated can contain link to activity\n\t\t);\n\t}\n}\n\n","export class TextColor {\n\tstatic GREEN = 'green';\n\tstatic BASE_50 = 'base-50';\n\tstatic BASE_60 = 'base-60';\n\tstatic BASE_70 = 'base-70';\n\tstatic BASE_90 = 'base-90';\n}","export class TextWeight {\n\tstatic NORMAL = 'normal';\n\tstatic MEDIUM = 'medium';\n\tstatic BOLD = 'bold';\n}","export class TextSize {\n\tstatic XS = 'xs';\n\tstatic SM = 'sm';\n\tstatic MD = 'md';\n}","import { TextColor } from '../enums/text-color';\nimport { TextWeight } from '../enums/text-weight';\nimport { TextSize } from '../enums/text-size';\nimport {Text} from \"main.core\";\n\nexport default {\n\tprops: {\n\t\tvalue: String|Number,\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t},\n\t\tcolor: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t},\n\t\tweight: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: 'normal',\n\t\t},\n\t\tsize: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: 'md',\n\t\t},\n\t\tmultiline: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tcomputed: {\n\t\tclassName(): Array {\n\t\t\treturn [\n\t\t\t\t'crm-timeline__text-block',\n\t\t\t\tthis.colorClassname,\n\t\t\t\tthis.weightClassname,\n\t\t\t\tthis.sizeClassname,\n\t\t\t]\n\t\t},\n\t\tcolorClassname(): string {\n\t\t\tconst upperCaseColorProp = this.color ? this.color.toUpperCase() : '';\n\t\t\tconst color = TextColor[upperCaseColorProp] ? TextColor[upperCaseColorProp] : '';\n\t\t\treturn `--color-${color}`;\n\t\t},\n\n\t\tweightClassname(): string {\n\t\t\tconst upperCaseWeightProp = this.weight ? this.weight.toUpperCase() : '';\n\t\t\tconst weight = TextWeight[upperCaseWeightProp] ? TextWeight[upperCaseWeightProp] : TextWeight.NORMAL;\n\t\t\treturn `--weight-${weight}`\n\t\t},\n\n\t\tsizeClassname(): string {\n\t\t\tconst upperCaseWeightProp = this.size ? this.size.toUpperCase() : '';\n\t\t\tconst size = TextSize[upperCaseWeightProp] ? TextSize[upperCaseWeightProp] : TextSize.SM;\n\t\t\treturn `--size-${size}`;\n\t\t},\n\t\tencodedText(): string {\n\t\t\tlet text = Text.encode(this.value);\n\t\t\tif (this.multiline)\n\t\t\t{\n\t\t\t\ttext = text.replace(/\\n/g, '<br />');\n\t\t\t}\n\n\t\t\treturn text;\n\t\t}\n\t},\n\ttemplate: `\n\t\t<span\n\t\t\t:title=\"title\"\n\t\t\t:class=\"className\"\n\t\t\tv-html=\"encodedText\"\n\t\t></span>`\n};\n","import {Action} from \"../../action\";\n\nexport default {\n\tprops: {\n\t\ttext: String,\n\t\taction: Object,\n\t\tbold: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: false,\n\t\t}\n\t},\n\tcomputed: {\n\t\thref(): ?string\n\t\t{\n\t\t\tif (!this.action)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tconst action = new Action(this.action);\n\t\t\tif (action.isRedirect())\n\t\t\t{\n\t\t\t\treturn action.getValue();\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\n\t\tclassName() {\n\t\t\treturn {\n\t\t\t\t'crm-timeline__card_link': true,\n\t\t\t\t'--bold': this.bold,\n\t\t\t}\n\t\t},\n\t},\n\tmethods: {\n\t\texecuteAction(): void\n\t\t{\n\t\t\tif (this.action)\n\t\t\t{\n\t\t\t\tconst action = new Action(this.action);\n\t\t\t\taction.execute(this);\n\t\t\t}\n\t\t}\n\t},\n\n\ttemplate:\n\t\t`\n\t\t\t<a\n\t\t\t\tv-if=\"href\"\n\t\t\t\t:href=\"href\"\n\t\t\t\t:class=\"className\"\n\t\t\t>\n\t\t\t{{text}}\n\t\t\t</a>\n\t\t\t<span\n\t\t\t\tv-else\n\t\t\t\t@click=\"executeAction\"\n\t\t\t\t:class=\"className\"\n\t\t\t>\n\t\t\t\t{{text}}\n\t\t\t</span>\n\t\t`\n};\n","import Text from \"./text\";\nimport { DatetimeConverter } from \"crm.timeline.tools\";\nimport {Text as CoreTextHelper} from \"main.core\";\n\nexport default {\n\tprops: {\n\t\twithTime: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: true,\n\t\t},\n\t\tformat: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: null,\n\t\t},\n\t},\n\textends: Text,\n\tcomputed: {\n\t\tencodedText() {\n\t\t\tconst dateInUserTimezone = (DatetimeConverter.createFromServerTimestamp(this.value)).toUserTime();\n\n\t\t\treturn CoreTextHelper.encode(\n\t\t\t\tthis.format\n\t\t\t\t\t? dateInUserTimezone.toFormatString(this.format)\n\t\t\t\t\t: (\n\t\t\t\t\t\tthis.withTime\n\t\t\t\t\t\t\t? dateInUserTimezone.toDatetimeString({delimiter: ', '})\n\t\t\t\t\t\t\t: dateInUserTimezone.toDateString()\n\t\t\t\t\t)\n\t\t\t);\n\t\t},\n\t},\n\ttemplate: Text.template\n}\n","import {Dom} from \"main.core\";\n\nexport default {\n\tprops: {\n\t\ttitle: String,\n\t\tinline: Boolean,\n\t\tcontentBlock: Object,\n\t},\n\tcomputed: {\n\t\tclassName(): Object\n\t\t{\n\t\t\treturn {\n\t\t\t\t'crm-timeline__card-container_info': true,\n\t\t\t\t'--inline': this.inline,\n\t\t\t}\n\t\t}\n\t},\n\tmethods: {\n\t\tisTitleCropped() {\n\t\t\tconst titleElem: Element = this.$refs.title;\n\n\t\t\treturn titleElem.scrollWidth > titleElem.clientWidth;\n\t\t},\n\t},\n\tmounted() {\n\t\tthis.$nextTick(() => {\n\t\t\tif (this.isTitleCropped())\n\t\t\t{\n\t\t\t\tDom.attr(this.$refs.title, 'title', this.title);\n\t\t\t}\n\t\t});\n\t},\n\ttemplate:\n\t\t`\n\t\t\t<div :class=\"className\">\n\t\t\t\t<div ref=\"title\" class=\"crm-timeline__card-container_info-title\">{{ title }}</div>\n\t\t\t\t<div class=\"crm-timeline__card-container_info-value\">\n\t\t\t\t\t<component :is=\"contentBlock.rendererName\" v-bind=\"contentBlock.properties\"></component>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`\n};\n","import {Type} from 'main.core';\n\nexport default {\n\tprops: {\n\t\tblocks: Object,\n\t},\n\tmounted() {\n\t\tconst blocks = this.$refs.blocks;\n\t\tthis.visibleBlocks.forEach((block, index) => {\n\t\t\tif (Type.isDomNode(blocks[index].$el))\n\t\t\t{\n\t\t\t\tblocks[index].$el.setAttribute('data-id', block.id);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthrow new Error('Vue component \"' + block.rendererName + '\" was not found');\n\t\t\t}\n\t\t});\n\t},\n\tcomputed: {\n\t\tvisibleBlocks(): Array\n\t\t{\n\t\t\treturn Object.keys(this.blocks)\n\t\t\t\t.map((id) => ({id, ...this.blocks[id]}))\n\t\t\t\t.filter((item) => (item.scope !== 'mobile'))\n\t\t\t;\n\t\t},\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<span class=\"crm-timeline-block-line-of-texts\">\n\t\t\t<span\n\t\t\t\tv-for=\"(block) in visibleBlocks\"\n\t\t\t\t:key=\"block.id\"\n\t\t\t>\n\t\t\t\t<component :is=\"block.rendererName\"\n\t\t\t\t\t\t   v-bind=\"block.properties\"\n\t\t\t\t\t\t   ref=\"blocks\"/>\n\t\t\t<span>&nbsp;</span>\n\t\t\t</span>\n\t\t</span>`\n};\n","export class LogoType {\n\tstatic CALL_AUDIO_PLAY = 'call-play-record';\n\tstatic CALL_AUDIO_PAUSE = 'call-pause-record';\n}\n","import {AudioPlayer, AudioPlayerState} from 'ui.vue3.components.audioplayer';\nimport {BitrixVue} from 'ui.vue3';\nimport {Menu} from 'main.popup';\nimport {Dom, bind, unbind} from 'main.core';\nimport { LogoType } from '../enums/logo-type';\n\nconst defaultPlaybackRateValues = [0.5, 0.7, 1.0, 1.2, 1.5, 1.7, 2.0];\n\nexport const TimelineAudio = BitrixVue.cloneComponent(AudioPlayer, {\n\tprops: {\n\t\tplaybackRateValues: {\n\t\t\ttype: Array,\n\t\t\trequired: false,\n\t\t\tdefault: () => defaultPlaybackRateValues,\n\t\t},\n\t\tisShowPlaybackRateMenu: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: true,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\t...this.parentData(),\n\t\t\tplaybackRate: defaultPlaybackRateValues[2],\n\t\t\tisSeeking: false,\n\t\t}\n\t},\n\tcomputed: {\n\t\tcontainerClassname() {\n\t\t\treturn [\n\t\t\t\t'crm-timeline__audioplayer-contianer',\n\t\t\t\t'ui-vue-audioplayer-container', {\n\t\t\t\t'ui-vue-audioplayer-container-dark': this.isDark,\n\t\t\t\t'ui-vue-audioplayer-container-mobile': this.isMobile,\n\t\t\t}];\n\t\t},\n\t\tcontrolClassname() {\n\t\t\treturn [\n\t\t\t\t'ui-vue-audioplayer-control',\n\t\t\t\t'ui-btn-icon-start', {\n\t\t\t\t'ui-vue-audioplayer-control-loader': this.loading,\n\t\t\t\t'ui-vue-audioplayer-control-play': !this.loading && this.state !== this.State.play,\n\t\t\t\t'ui-vue-audioplayer-control-pause': !this.loading && this.state === this.State.play,\n\t\t\t}];\n\t\t},\n\t\ttimeCurrentClassname() {\n\t\t\treturn [\n\t\t\t\t'ui-vue-audioplayer-time',\n\t\t\t\t'ui-vue-audioplayer-time-current',\n\t\t\t\t{\n\t\t\t\t\t'--is-playing': this.state === this.State.play,\n\t\t\t\t},\n\t\t\t];\n\t\t},\n\n\t\ttotalTimeClassname() {\n\t\t\treturn [\n\t\t\t\t'ui-vue-audioplayer-total-time',\n\t\t\t]\n\t\t},\n\n\t\tprogressPosition() {\n\t\t\treturn `width: ${this.progressInPixel}px;`;\n\t\t},\n\n\t\tseekPosition() {\n\t\t\tconst minSeekWidth = 20;\n\t\t\tconst seekWidth = this.$refs.seek?.offsetWidth ? this.$refs.seek.offsetWidth : minSeekWidth;\n\n\t\t\treturn `left: ${this.progressInPixel - (seekWidth / 2)}px;`;\n\t\t},\n\n\t\tformatTimeCurrent() {\n\t\t\treturn this.formatTime(this.timeCurrent);\n\t\t},\n\n\t\tformatTimeTotal() {\n\t\t\treturn this.formatTime(this.timeTotal);\n\t\t},\n\n\t\tplaybackRateMenuItems() {\n\t\t\treturn this.playbackRateValues.map((rate) => {\n\t\t\t\treturn this.createPlaybackRateMenuItem({\n\t\t\t\t\ttext: this.getPlaybackRateOptionText(rate),\n\t\t\t\t\trate,\n\t\t\t\t\tisActive: rate === this.playbackRate,\n\t\t\t\t})\n\t\t\t});\n\t\t},\n\t},\n\tmethods: {\n\t\tchangePlaybackRate(playbackRate: number) {\n\t\t\tthis.playbackRate = playbackRate;\n\t\t\tif (this.$refs?.source?.playbackRate)\n\t\t\t{\n\t\t\t\tthis.$refs.source.playbackRate = playbackRate;\n\t\t\t}\n\t\t},\n\n\t\tcreatePlaybackRateMenuItem(options = {}) {\n\t\t\tconst rate = options.rate || 1;\n\t\t\tconst text = options.text || '';\n\t\t\tconst isActive = options.isActive || false;\n\t\t\tconst className = `playback-speed-menu-item ${isActive ? 'menu-popup-item-accept-sm' : ''}`;\n\n\t\t\treturn {\n\t\t\t\ttext: text,\n\t\t\t\tclassName,\n\t\t\t\tonclick: (event, item) => {\n\t\t\t\t\tthis.changePlaybackRate(rate);\n\t\t\t\t\titem.menuWindow.popupWindow.close();\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tgetPlaybackRateOptionText(rate: number): string {\n\t\t\treturn this.isFloat(rate) ? `${rate}x` : `${rate}.0x`;\n\t\t},\n\n\t\tshowPlaybackRateMenu() {\n\t\t\tconst menu = new Menu({\n\t\t\t\tid: `12xx${this.id}`,\n\t\t\t\tclassName: 'crm-timeline__playback-speed-menu_scope',\n\t\t\t\twidth: 100,\n\t\t\t\tbindElement: this.$refs.playbackRateButtonContainer,\n\t\t\t\tevents: {\n\t\t\t\t\tonPopupShow: ()=> {\n\t\t\t\t\t\tconst {width: btnContainerWidth} = Dom.getPosition(this.$refs.playbackRateButtonContainer);\n\t\t\t\t\t\tconst popupWindow = menu.getPopupWindow();\n\n\t\t\t\t\t\tpopupWindow.setOffset({\n\t\t\t\t\t\t\toffsetLeft: btnContainerWidth / 2,\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tpopupWindow.adjustPosition();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tangle: {\n\t\t\t\t\tposition: 'top',\n\t\t\t\t},\n\t\t\t\toffsetLeft: 0,\n\t\t\t\titems: this.playbackRateMenuItems,\n\t\t\t});\n\n\t\t\tmenu.show();\n\t\t},\n\n\t\tisFloat(n: number) {\n\t\t\treturn n % 1 !== 0;\n\t\t},\n\n\t\tstartSeeking(event) {\n\t\t\tthis.isSeeking = true;\n\t\t\tconst {clientX} = event;\n\t\t\tthis.source().pause();\n\n\t\t\tbind(document, 'mouseup', this.finishSeeking);\n\t\t\tbind(document, 'mousemove', this.seeking);\n\t\t\tthis.setSeekByCursor(clientX);\n\t\t},\n\n\t\tseeking(event) {\n\t\t\tif (!this.isSeeking)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst timeline = this.$refs.track;\n\t\t\tconst {clientX} = event;\n\n\t\t\tconst {left, right, width} = Dom.getPosition(timeline);\n\t\t\tif (clientX < left)\n\t\t\t{\n\t\t\t\tthis.seek = 0;\n\t\t\t}\n\t\t\telse if (clientX > right)\n\t\t\t{\n\t\t\t\tthis.seek = width - 1;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.seek = clientX - left;\n\t\t\t}\n\n\t\t\tthis.setPosition();\n\n\t\t\tevent.preventDefault();\n\t\t},\n\n\t\tfinishSeeking() {\n\t\t\tthis.isSeeking = false;\n\t\t\tthis.setPosition();\n\t\t\tthis.source().play();\n\t\t\tunbind(document, 'mouseup', this.finishSeeking);\n\t\t\tunbind(document, 'mousemove', this.seeking);\n\t\t},\n\n\t\tsetSeekByCursor(x: number) {\n\t\t\tconst timeline = this.$refs.track;\n\t\t\tconst {clientX} = event;\n\n\t\t\tconst {left, right, width} = Dom.getPosition(timeline);\n\t\t\tif (clientX < left)\n\t\t\t{\n\t\t\t\tthis.seek = 0;\n\t\t\t}\n\t\t\telse if (x > right)\n\t\t\t{\n\t\t\t\tthis.seek = width;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.seek = clientX - left;\n\t\t\t}\n\t\t},\n\n\t\tsetPosition(event)\n\t\t{\n\t\t\tif (!this.loaded)\n\t\t\t{\n\t\t\t\tthis.loadFile(true);\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tconst pixelPerPercent = this.$refs.track.offsetWidth / 100;\n\n\t\t\tthis.setProgress(this.seek / pixelPerPercent, this.seek);\n\n\t\t\tthis.source().currentTime = this.timeTotal/100*this.progress;\n\t\t},\n\n\n\t\tchangeLogoIcon(icon: String)\n\t\t{\n\t\t\tif (!this.$parent)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst logo = this.$parent.getLogo();\n\t\t\tif (!logo)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlogo.setIcon(icon);\n\t\t},\n\n\t\taudioEventRouterWrapper(eventName: String, event)\n\t\t{\n\t\t\tthis.audioEventRouter(eventName, event);\n\n\t\t\tif (eventName === 'play')\n\t\t\t{\n\t\t\t\tthis.changeLogoIcon(LogoType.CALL_AUDIO_PAUSE);\n\t\t\t}\n\n\t\t\tif (eventName === 'pause')\n\t\t\t{\n\t\t\t\tthis.changeLogoIcon(LogoType.CALL_AUDIO_PLAY);\n\t\t\t}\n\t\t}\n\t},\n\ttemplate: `\n\t\t<div\n\t\t\t:class=\"containerClassname\"\n\t\t\tref=\"body\"\n\t\t>\n\t\t\t<div class=\"ui-vue-audioplayer-controls-container\">\n\t\t\t\t<button :class=\"controlClassname\" @click=\"clickToButton\">\n\t\t\t\t\t<svg v-if=\"state !== State.play\" class=\"ui-vue-audioplayer-control-icon\" width=\"9\" height=\"12\" viewBox=\"0 0 9 12\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t\t\t\t<path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M8.52196 5.40967L1.77268 0.637568C1.61355 0.523473 1.40621 0.510554 1.23498 0.604066C1.06375 0.697578 0.957151 0.881946 0.958524 1.0822V10.6259C0.956507 10.8265 1.06301 11.0114 1.23449 11.105C1.40597 11.1987 1.61368 11.1854 1.77268 11.0706L8.52196 6.29847C8.66466 6.19871 8.75016 6.0322 8.75016 5.85407C8.75016 5.67593 8.66466 5.50942 8.52196 5.40967Z\"/>\n\t\t\t\t\t</svg>\n\t\t\t\t\t<svg v-else width=\"8\" height=\"10\" viewBox=\"0 0 8 10\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t\t\t\t<path d=\"M2.5625 0.333008H0.375V9.66634H2.5625V0.333008Z\" fill=\"inherit\" />\n\t\t\t\t\t\t<path d=\"M7.25 0.333008H5.0625V9.66634H7.25V0.333008Z\" fill=\"inherit\" />\n\t\t\t\t\t</svg>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t\t<div class=\"ui-vue-audioplayer-timeline-container\">\n\t\t\t\t<div class=\"ui-vue-audioplayer-track-container\" @mousedown=\"startSeeking\" ref=\"track\">\n\t\t\t\t\t<div class=\"ui-vue-audioplayer-track-mask\"></div>\n\t\t\t\t\t<div class=\"ui-vue-audioplayer-track\" :style=\"progressPosition\"></div>\n\t\t\t\t\t<div @mousedown=\"startSeeking\" class=\"ui-vue-audioplayer-track-seek\" :style=\"seekPosition\">\n\t\t\t\t\t\t<div ref=\"seek\" class=\"ui-vue-audioplayer-track-seek-icon\"></div>\n\t\t\t\t\t</div>\n<!--\t\t\t\t\t<div class=\"ui-vue-audioplayer-track-event\" @mousemove=\"seeking\"></div>-->\n\t\t\t\t</div>\n\t\t\t\t<div :class=\"totalTimeClassname\">\n\t\t\t\t\t<div :class=\"timeCurrentClassname\">{{formatTimeCurrent}}</div>\n\t\t\t\t\t<div ref=\"totalTime\" class=\"ui-vue-audioplayer-time\">{{formatTimeTotal}}</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div\n\t\t\t\t@click=\"showPlaybackRateMenu\"\n\t\t\t\tref=\"playbackRateButtonContainer\"\n\t\t\t\tclass=\"ui-vue-audioplayer_playback-speed-menu-container\"\n\t\t\t>\n\t\t\t\t{{ getPlaybackRateOptionText(playbackRate) }}\n\t\t\t</div>\n\t\t\t<audio\n\t\t\t\tv-if=\"src\"\n\t\t\t\t:src=\"src\"\n\t\t\t\tclass=\"ui-vue-audioplayer-source\"\n\t\t\t\tref=\"source\"\n\t\t\t\t:preload=\"preload\"\n\t\t\t\t@abort=\"audioEventRouter('abort', $event)\"\n\t\t\t\t@error=\"audioEventRouter('error', $event)\"\n\t\t\t\t@suspend=\"audioEventRouter('suspend', $event)\"\n\t\t\t\t@canplay=\"audioEventRouter('canplay', $event)\"\n\t\t\t\t@canplaythrough=\"audioEventRouter('canplaythrough', $event)\"\n\t\t\t\t@durationchange=\"audioEventRouter('durationchange', $event)\"\n\t\t\t\t@loadeddata=\"audioEventRouter('loadeddata', $event)\"\n\t\t\t\t@loadedmetadata=\"audioEventRouter('loadedmetadata', $event)\"\n\t\t\t\t@timeupdate=\"audioEventRouter('timeupdate', $event)\"\n\t\t\t\t@play=\"audioEventRouterWrapper('play', $event)\"\n\t\t\t\t@playing=\"audioEventRouter('playing', $event)\"\n\t\t\t\t@pause=\"audioEventRouterWrapper('pause', $event)\"\n\t\t\t></audio>\n\t\t</div>\n\t`\n});\n","export class ClientMark\n{\n\tstatic POSITIVE = 'positive';\n\tstatic NEUTRAL = 'neutral';\n\tstatic NEGATIVE = 'negative';\n}\n","import {ClientMark as ClientMarkType} from '../enums/client-mark';\n\nexport const ClientMark = {\n\tprops: {\n\t\tmark: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: ClientMarkType.POSITIVE,\n\t\t},\n\n\t\ttext: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t},\n\n\t},\n\tcomputed: {\n\t\tclassName(): Object {\n\t\t\treturn {\n\t\t\t\t'crm-timeline__client-mark': true,\n\t\t\t\t'--positive-mark': this.mark === ClientMarkType.POSITIVE,\n\t\t\t\t'--neutral-mark': this.mark === ClientMarkType.NEUTRAL,\n\t\t\t\t'--negative-mark': this.mark === ClientMarkType.NEGATIVE,\n\t\t\t}\n\t\t},\n\n\t\ticonClassname() {\n\t\t\treturn {\n\t\t\t\t'crm-timeline__client-mark_icon': true,\n\t\t\t\t'--flipped': this.mark === ClientMarkType.NEGATIVE,\n\t\t\t}\n\t\t},\n\n\n\t},\n\ttemplate: `\n\t\t<div :class=\"className\">\n\t\t\t<i class=\"crm-timeline__client-mark_icon-wrapper\">\n\t\t\t\t<svg :class=\"iconClassname\" width=\"11.35\" height=\"11.36\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t\t\t<path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M14.8367 6.7166L11.2351 6.71731C11.1314 6.71731 11.0313 6.65735 10.9925 6.56213C10.8303 6.15654 10.8366 5.69947 11.0144 5.29671C11.3127 4.42841 11.3466 3.49029 11.1124 2.60224C10.8676 1.9914 10.8028 0.875521 9.67347 0.82403C9.32009 0.876226 9.01184 1.08854 8.8341 1.39819C8.80235 1.45321 8.78895 1.5181 8.78895 1.58088C8.78895 1.58088 8.84085 2.6644 8.78895 3.41764C8.73706 4.17087 7.29571 6.08954 6.37945 7.30769C6.32161 7.38528 6.24049 7.43607 6.14456 7.45088C5.80104 7.50232 5.14581 7.58943 4.90962 7.62062C4.85434 7.62792 4.82201 7.69735 4.82201 7.72994C4.82201 9.2527 4.82201 11.5306 4.82201 14.5636C4.82201 14.5887 4.85234 14.6435 4.90623 14.6524C5.09126 14.6829 5.55408 14.7676 6.02112 14.9178C6.60798 15.1061 7.0968 15.5519 8.07513 15.882C8.12662 15.8997 8.18375 15.9088 8.23807 15.9088H12.8321C13.4253 15.803 13.8668 15.2959 13.8972 14.6872C13.9056 14.3479 13.8379 14.0121 13.699 13.7039C13.6792 13.6594 13.7053 13.6129 13.7533 13.6037C14.3422 13.4965 15.0786 12.3785 14.1715 11.4778C14.1476 11.4545 14.1518 11.4228 14.1842 11.4143C14.6843 11.2866 15.0674 10.8874 15.1844 10.3894C15.2296 10.199 15.2134 10.0022 15.1569 9.81524C15.0906 9.59235 14.9848 9.38356 14.8445 9.19735C14.8092 9.15079 14.8289 9.09013 14.8854 9.07179C15.3834 8.90321 15.7262 8.4271 15.7226 7.88538C15.7798 7.35424 15.353 6.71731 14.8367 6.7166ZM3.412 7.00439H0.808518C0.673089 7.00439 0.570107 7.1243 0.593384 7.25479L2.10567 15.7508C2.12895 15.8813 2.24392 15.9766 2.37865 15.9766H3.34146C3.49029 15.9766 3.61091 15.8588 3.61091 15.7135L3.63207 7.22023C3.63207 7.10102 3.53403 7.00439 3.412 7.00439Z\"/>\n\t\t\t\t</svg>\n\t\t\t</i>\n\t\t\t<span class=\"crm-timeline__client-mark_text\">{{ text }}</span>\n\t\t</div>\n\t`\n}\n","import Text from './text';\nimport { CurrencyCore } from 'currency.currency-core';\nimport { Type } from 'main.core';\n\nexport default {\n\tprops: {\n\t\topportunity: Number,\n\t\tcurrencyId: String,\n\t},\n\tcomputed: {\n\t\tencodedText(): ?string\n\t\t{\n\t\t\tif (!Type.isNumber(this.opportunity) || !Type.isStringFilled(this.currencyId))\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn CurrencyCore.currencyFormat(this.opportunity, this.currencyId, true);\n\t\t}\n\t},\n\textends: Text,\n\ttemplate: `\n\t\t<span\n\t\t\tv-if=\"encodedText\"\n\t\t\t:class=\"className\"\n\t\t\tv-html=\"encodedText\"\n\t\t></span>`\n};\n","import Text from './text';\nimport { Action } from \"../../action\";\nimport {Runtime} from \"main.core\";\nimport {BitrixVue} from 'ui.vue3';\n\nexport default BitrixVue.cloneComponent(Text, {\n\tcomponents: {\n\t\tText,\n\t},\n\tprops: {\n\t\taction: Object,\n\t},\n\tdata(): Object {\n\t\treturn {\n\t\t\tisEdit: false,\n\t\t\tcurrentValue: this.value,\n\t\t\tinitialValue: this.value,\n\t\t\tactionTimeoutId: null,\n\t\t};\n\t},\n\tcomputed: {\n\t\ttextProps(): Object {\n\t\t\treturn {\n\t\t\t\t...this.$props,\n\t\t\t\tvalue: this.currentValue,\n\t\t\t};\n\t\t},\n\t},\n\tmethods: {\n\t\tenableEdit(): void\n\t\t{\n\t\t\tthis.cancelScheduledActionExecution();\n\n\t\t\tthis.isEdit = true;\n\n\t\t\tthis.$nextTick(() => {\n\t\t\t\tthis.$refs.input.focus();\n\t\t\t});\n\t\t},\n\t\tdisableEdit(): void\n\t\t{\n\t\t\tthis.isEdit = false;\n\n\t\t\tthis.scheduleActionExecution();\n\t\t},\n\n\t\tscheduleActionExecution(): void\n\t\t{\n\t\t\tthis.cancelScheduledActionExecution();\n\n\t\t\tthis.actionTimeoutId = setTimeout(this.executeAction.bind(this), 3 * 1000);\n\t\t},\n\t\tcancelScheduledActionExecution(): void\n\t\t{\n\t\t\tif (this.actionTimeoutId)\n\t\t\t{\n\t\t\t\tclearTimeout(this.actionTimeoutId);\n\t\t\t\tthis.actionTimeoutId = null;\n\t\t\t}\n\t\t},\n\t\texecuteAction(): void\n\t\t{\n\t\t\tif (!this.action || this.currentValue === this.initialValue)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// to avoid unintended props mutation\n\t\t\tconst actionDescription = Runtime.clone(this.action);\n\n\t\t\tactionDescription.actionParams ??= {};\n\t\t\tactionDescription.actionParams.value = this.currentValue;\n\n\t\t\tconst action = new Action(actionDescription);\n\t\t\taction.execute(this);\n\n\t\t\tthis.initialValue = this.currentValue;\n\t\t},\n\t},\n\ttemplate: `\n\t\t\t<input\n\t\t\t\tv-if=\"isEdit\"\n\t\t\t\tref=\"input\"\n\t\t\t\ttype=\"text\"\n\t\t\t\tv-model.trim=\"currentValue\"\n\t\t\t\t@focusout=\"disableEdit\"\n\t\t\t>\n\t\t\t<Text\n\t\t\t\tv-else\n\t\t\t\tv-bind=\"textProps\"\n\t\t\t\t@click=\"enableEdit\"\n\t\t\t/>\n\t\t`\n});\n\n","import { Action } from \"../../action\";\nimport {Runtime, Browser} from \"main.core\";\nimport {Button} from '../layout/button';\nimport {ButtonState} from '../enums/button-state';\nimport {ButtonType} from '../enums/button-type';\n\nexport const EditableDescription = {\n\tcomponents: {\n\t\tButton,\n\t},\n\tprops: {\n\t\ttext: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t},\n\t\tsaveAction: {\n\t\t\ttype: Object,\n\t\t\trequired: false,\n\t\t\tdefault: () => ({}),\n\t\t},\n\t},\n\n\tdata() {\n\t\treturn {\n\t\t\tvalue: this.text,\n\t\t\toldValue: this.text,\n\t\t\tisEdit: false,\n\t\t\tisSaving: false,\n\t\t\tisLongText: false,\n\t\t\tisCollapsed: false,\n\t\t};\n\t},\n\n\tinject: ['isReadOnly'],\n\n\tcomputed: {\n\t\tclassName() {\n\t\t\treturn [\n\t\t\t\t'crm-timeline__editable-text', {\n\t\t\t\t'--is-edit': this.isEdit,\n\t\t\t\t'--is-long': this.isLongText,\n\t\t\t\t'--is-expanded': this.isCollapsed || !this.isLongText,\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\n\t\tsaveTextButtonProps() {\n\t\t\treturn {\n\t\t\t\tstate: this.saveTextButtonState,\n\t\t\t\ttype: ButtonType.PRIMARY,\n\t\t\t\ttitle: this.$Bitrix.Loc.getMessage('CRM_TIMELINE_ITEM_EDITABLE_DESCRIPTION_SAVE'),\n\t\t\t}\n\t\t},\n\n\t\tcancelEditingButtonProps() {\n\t\t\treturn {\n\t\t\t\ttype: ButtonType.LIGHT,\n\t\t\t\ttitle: this.$Bitrix.Loc.getMessage('CRM_TIMELINE_ITEM_EDITABLE_DESCRIPTION_CANCEL'),\n\t\t\t\tstate: this.isSaving ? ButtonState.DISABLED : ButtonState.DEFAULT,\n\t\t\t}\n\t\t},\n\n\t\tsaveTextButtonState() {\n\t\t\tconst trimValue = this.value.trim();\n\t\t\tif (trimValue.length === 0) {\n\t\t\t\treturn ButtonState.DISABLED;\n\t\t\t} else if (this.isSaving) {\n\t\t\t\treturn ButtonState.LOADING;\n\t\t\t} else {\n\t\t\t\treturn ButtonState.DEFAULT;\n\t\t\t}\n\n\t\t},\n\n\t\texpandButtonText() {\n\t\t\treturn this.isCollapsed\n\t\t\t\t? this.$Bitrix.Loc.getMessage('CRM_TIMELINE_ITEM_EDITABLE_DESCRIPTION_HIDE')\n\t\t\t\t: this.$Bitrix.Loc.getMessage('CRM_TIMELINE_ITEM_EDITABLE_DESCRIPTION_SHOW');\n\t\t},\n\t},\n\n\tmethods: {\n\t\tstartEditing() {\n\t\t\tthis.isEdit = true;\n\t\t\tthis.isCollapsed = true;\n\t\t\tthis.$nextTick(() => {\n\t\t\t\tconst textarea = this.$refs.textarea;\n\t\t\t\tthis.adjustHeight(textarea);\n\t\t\t\ttextarea.focus();\n\t\t\t});\n\n\t\t\tthis.emitEvent('EditableDescription:StartEdit');\n\t\t},\n\n\t\temitEvent(eventName: string)\n\t\t{\n\t\t\tconst action = new Action({\n\t\t\t\ttype: 'jsEvent',\n\t\t\t\tvalue: eventName\n\t\t\t});\n\t\t\taction.execute(this);\n\t\t},\n\n\t\tadjustHeight(elem) {\n\t\t\telem.style.height = 0;\n\t\t\telem.style.height = (elem.scrollHeight)+\"px\";\n\t\t},\n\n\t\tonPressEnter(event) {\n\t\t\tif (\n\t\t\t\tevent.ctrlKey === true ||\n\t\t\t\t( Browser.isMac() && (event.metaKey === true || event.altKey === true) )\n\t\t\t)\n\t\t\t{\n\t\t\t\tthis.saveText();\n\t\t\t}\n\t\t},\n\n\t\tsaveText() {\n\t\t\tif (this.saveTextButtonState === ButtonState.DISABLED || this.saveTextButtonState === ButtonState.LOADING || !this.isEdit)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (this.value.trim() === this.oldValue)\n\t\t\t{\n\t\t\t\tthis.isEdit = false;\n\t\t\t\tthis.emitEvent('EditableDescription:FinishEdit');\n\t\t\t}\n\n\t\t\tthis.isSaving = true;\n\t\t\tconst encodedTrimText = this.value.trim();\n\n\t\t\tthis.executeSaveAction(encodedTrimText).then(() => {\n\t\t\t\tthis.isEdit = false;\n\t\t\t\tthis.oldValue = encodedTrimText;\n\t\t\t\tthis.value = encodedTrimText;\n\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\tthis.isLongText = this.checkIsLongText();\n\t\t\t\t});\n\t\t\t\tthis.emitEvent('EditableDescription:FinishEdit');\n\t\t\t}).finally(() => {\n\t\t\t\tthis.isSaving = false;\n\t\t\t});\n\t\t},\n\n\t\texecuteSaveAction(text: string): void {\n\t\t\tif (!this.saveAction)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!this.value)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// to avoid unintended props mutation\n\t\t\tconst actionDescription = Runtime.clone(this.saveAction);\n\n\t\t\tactionDescription.actionParams ??= {};\n\t\t\tactionDescription.actionParams.value = text;\n\n\t\t\tconst action = new Action(actionDescription);\n\n\t\t\treturn action.execute(this);\n\t\t},\n\n\t\tcancelEditing() {\n\t\t\tif (!this.isEdit || this.isSaving)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.value = this.oldValue;\n\t\t\tthis.isEdit = false;\n\t\t\tthis.emitEvent('EditableDescription:FinishEdit');\n\t\t},\n\n\t\tclearText() {\n\t\t\tif (this.isSaving)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.value = '';\n\t\t\tthis.$refs.textarea.focus();\n\t\t},\n\n\t\ttoggleIsCollapsed() {\n\t\t\tthis.isCollapsed = !this.isCollapsed;\n\t\t},\n\n\t\tcheckIsLongText() {\n\t\t\tconst textBlock = this.$refs.text;\n\t\t\tif (!textBlock) return false;\n\t\t\tconst textBlockMaxHeightStyle = window.getComputedStyle(textBlock).getPropertyValue('--crm-timeline__editable-text_max-height');\n\t\t\tconst textBlockMaxHeight = parseFloat(textBlockMaxHeightStyle.slice(0, -2));\n\t\t\treturn this.$refs.rootElement?.offsetHeight > textBlockMaxHeight;\n\t\t},\n\t},\n\n\twatch: {\n\t\ttext(newTextValue) {\n\t\t\t// update text from push\n\t\t\tthis.value = newTextValue;\n\t\t\tthis.oldValue = newTextValue;\n\t\t\tthis.$nextTick(() => {\n\t\t\t\tthis.isLongText = this.checkIsLongText();\n\t\t\t});\n\t\t},\n\n\t\tvalue() {\n\t\t\tif (!this.isEdit) return;\n\t\t\tthis.$nextTick(() => {\n\t\t\t\tthis.adjustHeight(this.$refs.textarea);\n\t\t\t});\n\t\t},\n\t},\n\n\tmounted() {\n\t\tthis.$nextTick(() => {\n\t\t\tthis.isLongText = this.checkIsLongText();\n\t\t});\n\t},\n\n\ttemplate: `\n\t\t<div class=\"crm-timeline__editable-text_wrapper\">\n\t\t\t<div ref=\"rootElement\" :class=\"className\">\n\t\t\t\t<button\n\t\t\t\t\tv-if=\"isEdit\"\n\t\t\t\t\t:disabled=\"isSaving\"\n\t\t\t\t\t@click=\"clearText\"\n\t\t\t\t\tclass=\"crm-timeline__editable-text_clear-btn\"\n\t\t\t\t>\n\t\t\t\t\t<i class=\"crm-timeline__editable-text_clear-icon\"></i>\n\t\t\t\t</button>\n\t\t\t\t<button\n\t\t\t\t\tv-if=\"isLongText && !isEdit && !isReadOnly\"\n\t\t\t\t\t:disabled=\"isSaving\"\n\t\t\t\t\t@click=\"startEditing\"\n\t\t\t\t\tclass=\"crm-timeline__editable-text_edit-btn\"\n\t\t\t\t>\n\t\t\t\t\t<i class=\"crm-timeline__editable-text_edit-icon\"></i>\n\t\t\t\t</button>\n\t\t\t\t<div class=\"crm-timeline__editable-text_inner\">\n\t\t\t\t\t<div class=\"crm-timeline__editable-text_content\">\n\t\t\t\t\t\t<textarea\n\t\t\t\t\t\t\tv-if=\"isEdit\"\n\t\t\t\t\t\t\tref=\"textarea\"\n\t\t\t\t\t\t\tv-model=\"value\"\n\t\t\t\t\t\t\t:disabled=\"!isEdit || isSaving\"\n\t\t\t\t\t\t\t:placeholder=\"$Bitrix.Loc.getMessage('CRM_TIMELINE_ITEM_EDITABLE_DESCRIPTION_PLACEHOLDER')\"\n\t\t\t\t\t\t\t@keydown.esc=\"cancelEditing\"\n\t\t\t\t\t\t\t@keydown.enter=\"onPressEnter\"\n\t\t\t\t\t\t\tclass=\"crm-timeline__editable-text_text\"\n\t\t\t\t\t\t></textarea>\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tv-else\n\t\t\t\t\t\t\tref=\"text\"\n\t\t\t\t\t\t\tclass=\"crm-timeline__editable-text_text\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{value}}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tv-if=\"!isEdit && !isLongText && !isReadOnly\"\n\t\t\t\t\t\t\t@click=\"startEditing\"\n\t\t\t\t\t\t\tclass=\"crm-timeline__editable-text_text-edit-icon\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span class=\"crm-timeline__editable-text_edit-icon\"></span>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tv-if=\"isEdit\"\n\t\t\t\t\t\tclass=\"crm-timeline__editable-text_actions\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div class=\"crm-timeline__editable-text_action\">\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tv-bind=\"saveTextButtonProps\"\n\t\t\t\t\t\t\t\t@click=\"saveText\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"crm-timeline__editable-text_action\">\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tv-bind=\"cancelEditingButtonProps\"\n\t\t\t\t\t\t\t\t@click=\"cancelEditing\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<button\n\t\t\t\t\tv-if=\"isLongText && !isEdit\"\n\t\t\t\t\t@click=\"toggleIsCollapsed\"\n\t\t\t\t\tclass=\"crm-timeline__editable-text_collapse-btn\"\n\t\t\t\t>\n\t\t\t\t\t{{ expandButtonText }}\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t`\n};\n","import { DateTimeFormat } from \"main.date\";\nimport { Runtime } from \"main.core\";\nimport Link from './link';\nimport { Action } from \"../../action\";\nimport { DatetimeConverter } from \"crm.timeline.tools\";\n\nexport default {\n\tcomponents: {\n\t\tLink,\n\t},\n\tprops: {\n\t\tvalue: Number,\n\t\twithTime: Boolean,\n\t\taction: Object,\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tcurrentDate: this.value,\n\t\t\tinitialDate: this.value,\n\t\t\tactionTimeoutId: null,\n\t\t};\n\t},\n\tcomputed: {\n\t\tcurrentDateObject(): ?Date\n\t\t{\n\t\t\treturn this.currentDate ? new Date(this.currentDate * 1000) : null;\n\t\t},\n\t\tcurrentDateInSiteFormat(): ?string\n\t\t{\n\t\t\tif (!this.currentDateObject)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn DateTimeFormat.format(DatetimeConverter.getSiteDateFormat(), this.currentDateObject);\n\t\t},\n\t\ttextProps(): Object\n\t\t{\n\t\t\treturn {\n\t\t\t\ttext: this.currentDateInSiteFormat,\n\t\t\t};\n\t\t},\n\t},\n\tmethods: {\n\t\topenCalendar(event: PointerEvent): void\n\t\t{\n\t\t\tthis.cancelScheduledActionExecution();\n\n\t\t\t// eslint-disable-next-line bitrix-rules/no-bx\n\t\t\tBX.calendar({\n\t\t\t\tnode: event.target,\n\t\t\t\tvalue: this.currentDateInSiteFormat,\n\t\t\t\tbTime: this.withTime,\n\t\t\t\tbHideTime: !this.withTime,\n\t\t\t\tbSetFocus: false,\n\t\t\t\tcallback_after: (newDate: Date) => {\n\t\t\t\t\tthis.currentDate = Math.round(newDate.getTime() / 1000);\n\n\t\t\t\t\tthis.scheduleActionExecution();\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\tscheduleActionExecution(): void\n\t\t{\n\t\t\tthis.cancelScheduledActionExecution();\n\n\t\t\tthis.actionTimeoutId = setTimeout(this.executeAction.bind(this), 3 * 1000);\n\t\t},\n\t\tcancelScheduledActionExecution(): void\n\t\t{\n\t\t\tif (this.actionTimeoutId)\n\t\t\t{\n\t\t\t\tclearTimeout(this.actionTimeoutId);\n\t\t\t\tthis.actionTimeoutId = null;\n\t\t\t}\n\t\t},\n\t\texecuteAction(): void\n\t\t{\n\t\t\tif (!this.action)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.currentDate === this.initialDate)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// to avoid unintended props mutation\n\t\t\tconst actionDescription = Runtime.clone(this.action);\n\n\t\t\tactionDescription.actionParams ??= {};\n\t\t\tactionDescription.actionParams.value = this.currentDateObject;\n\n\t\t\tconst action = new Action(actionDescription);\n\t\t\taction.execute(this);\n\n\t\t\tthis.initialDate = this.currentDate;\n\t\t},\n\t},\n\ttemplate: `<Link @click=\"openCalendar\" v-bind=\"textProps\"></Link>`,\n};\n","import LineOfTextBlocks from './line-of-text-blocks';\nimport { AlertColor, AlertIcon } from 'ui.alerts';\n\nexport const PlayerAlert = {\n\tcomponents: {\n\t\tLineOfTextBlocks,\n\t},\n\tprops: {\n\t\tblocks: {\n\t\t\ttype: Object,\n\t\t\trequired: false,\n\t\t\tdefault: () => ({}),\n\t\t},\n\t\tcolor: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: AlertColor.DEFAULT,\n\t\t},\n\t\ticon: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: AlertIcon.NONE,\n\t\t},\n\t},\n\tcomputed: {\n\t\tcontainerClassname() {\n\t\t\treturn [\n\t\t\t\t'crm-timeline__player-alert',\n\t\t\t\t'ui-alert',\n\t\t\t\t'ui-alert-xs',\n\t\t\t\t'ui-alert-text-center',\n\t\t\t\tthis.color,\n\t\t\t\tthis.icon,\n\t\t\t]\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div :class=\"containerClassname\">\n\t\t\t<div class=\"ui-alert-message\">\n\t\t\t\t<LineOfTextBlocks :blocks=\"blocks\"></LineOfTextBlocks>\n\t\t\t</div>\n\t\t</div>\n\t`\n}","import {User} from '../layout/header/user';\nimport {Action} from '../../action';\nimport {Button} from '../layout/button';\nimport {ButtonState} from '../enums/button-state';\nimport {ButtonType} from '../enums/button-type';\nimport {Browser, Runtime} from 'main.core';\nimport {MessageBox, MessageBoxButtons} from \"ui.dialogs.messagebox\";\n\nexport const Note = {\n\tcomponents: {\n\t\tUser,\n\t\tButton,\n\t},\n\tprops: {\n\t\tid: {\n\t\t\ttype: Number,\n\t\t\trequired: false,\n\t\t},\n\t\ttext: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t},\n\t\tdeleteConfirmationText: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t},\n\t\tsaveNoteAction: {\n\t\t\ttype: Object,\n\t\t},\n\t\tdeleteNoteAction: {\n\t\t\ttype: Object,\n\t\t},\n\t\tupdatedBy: {\n\t\t\ttype: Object,\n\t\t\trequired: false,\n\t\t},\n\t},\n\tdata()\n\t{\n\t\treturn {\n\t\t\tnote: this.text,\n\t\t\toldNote: this.text,\n\t\t\tisEdit: false,\n\t\t\tisExist: !!this.id,\n\t\t\tisSaving: false,\n\t\t\tisDeleting: false,\n\t\t}\n\t},\n\tinject: ['isReadOnly', 'currentUser'],\n\tcomputed: {\n\t\tButtonType()\n\t\t{\n\t\t\treturn ButtonType;\n\t\t},\n\n\t\tisDeleteButtonVisible()\n\t\t{\n\t\t\treturn this.isEdit && !(this.isReadOnly || this.isSaving)\n\t\t},\n\n\t\tisEditButtonVisible()\n\t\t{\n\t\t\treturn !(this.isReadOnly || this.isEdit);\n\t\t},\n\n\t\tsaveButtonState()\n\t\t{\n\t\t\tif (this.isSaving)\n\t\t\t{\n\t\t\t\treturn ButtonState.LOADING;\n\t\t\t}\n\t\t\tif (this.note.trim().length > 0)\n\t\t\t{\n\t\t\t\treturn ButtonState.DEFAULT;\n\t\t\t}\n\n\t\t\treturn ButtonState.DISABLED;\n\t\t},\n\n\t\tcancelButtonState()\n\t\t{\n\t\t\tif (this.isSaving)\n\t\t\t{\n\t\t\t\treturn ButtonState.DISABLED;\n\t\t\t}\n\n\t\t\treturn ButtonState.DEFAULT;\n\t\t},\n\n\t\tisNoteVisible()\n\t\t{\n\t\t\treturn this.isExist || this.isEdit;\n\t\t},\n\n\t\tuser()\n\t\t{\n\t\t\tif (this.updatedBy)\n\t\t\t{\n\t\t\t\treturn this.updatedBy;\n\t\t\t}\n\t\t\tif (this.currentUser)\n\t\t\t{\n\t\t\t\treturn this.currentUser;\n\t\t\t}\n\t\t\treturn {\n\t\t\t\ttitle: '',\n\t\t\t\tdetailUrl: '',\n\t\t\t\timageUrl: '',\n\t\t\t};\n\t\t}\n\t},\n\tmethods: {\n\t\tstartEditing()\n\t\t{\n\t\t\tthis.isEdit = true;\n\t\t\tthis.$nextTick(() => {\n\t\t\t\tconst textarea = this.$refs.noteText;\n\t\t\t\tthis.adjustHeight(textarea);\n\t\t\t\ttextarea.focus();\n\t\t\t});\n\n\t\t\tthis.executeAction({type: 'jsEvent', value: 'Note:StartEdit'});\n\t\t},\n\n\t\tadjustHeight(elem) {\n\t\t\telem.style.height = 0;\n\t\t\telem.style.height = (elem.scrollHeight)+\"px\";\n\t\t},\n\n\t\tsetEditMode(editMode: boolean)\n\t\t{\n\t\t\tconst isEdit = editMode ? !this.isReadOnly : false;\n\t\t\tif (isEdit !== this.isEdit)\n\t\t\t{\n\t\t\t\tif(isEdit)\n\t\t\t\t{\n\t\t\t\t\tthis.startEditing();\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.isEdit = false;\n\t\t\t\t\tthis.executeAction({type: 'jsEvent', value: 'Note:FinishEdit'})\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tonEnterHandle(event)\n\t\t{\n\t\t\tif (\n\t\t\t\tevent.ctrlKey === true ||\n\t\t\t\t( Browser.isMac() && (event.metaKey === true || event.altKey === true) )\n\t\t\t)\n\t\t\t{\n\t\t\t\tthis.saveNote();\n\t\t\t}\n\t\t},\n\n\t\tcancelEditing()\n\t\t{\n\t\t\tthis.note = this.oldNote;\n\t\t\tthis.isEdit = false;\n\t\t\tthis.executeAction({type: 'jsEvent', value: 'Note:FinishEdit'});\n\t\t},\n\n\t\tdeleteNote()\n\t\t{\n\t\t\tif (this.isSaving)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!this.isExist)\n\t\t\t{\n\t\t\t\tthis.cancelEditing();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.deleteConfirmationText && this.deleteConfirmationText.length)\n\t\t\t{\n\t\t\t\tMessageBox.show({\n\t\t\t\t\tmessage: this.deleteConfirmationText,\n\t\t\t\t\tmodal: true,\n\t\t\t\t\tbuttons: MessageBoxButtons.YES_NO,\n\t\t\t\t\tonYes: (messageBox) => {\n\t\t\t\t\t\tmessageBox.close();\n\t\t\t\t\t\tthis.executeDeleteAction();\n\t\t\t\t\t},\n\t\t\t\t\tonNo: (messageBox) => {\n\t\t\t\t\t\tmessageBox.close();\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.executeDeleteAction();\n\t\t\t}\n\t\t},\n\n\t\tsaveNote()\n\t\t{\n\t\t\tif (this.saveButtonState === ButtonState.DISABLED || this.isSaving || this.isDeleting)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (this.note === this.text)\n\t\t\t{\n\t\t\t\tthis.cancelEditing();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.isSaving = true;\n\t\t\tconst action = Runtime.clone(this.saveNoteAction);\n\t\t\taction.actionParams.text = this.note;\n\n\t\t\tthis.executeAction(action).then(({status}) =>\n\t\t\t{\n\t\t\t\tif (status === 'success')\n\t\t\t\t{\n\t\t\t\t\tthis.oldNote = this.$refs.noteText.value.trim();\n\t\t\t\t\tthis.isExist = true;\n\t\t\t\t\tthis.cancelEditing();\n\t\t\t\t}\n\t\t\t}).finally(() =>\n\t\t\t{\n\t\t\t\tthis.isSaving = false;\n\t\t\t});\n\t\t},\n\n\t\texecuteDeleteAction()\n\t\t{\n\t\t\tthis.isDeleting = true;\n\n\t\t\tthis.executeAction(this.deleteNoteAction).then(({status}) =>\n\t\t\t{\n\t\t\t\tif (status === 'success')\n\t\t\t\t{\n\t\t\t\t\tthis.oldNote = '';\n\t\t\t\t\tthis.isExist = false;\n\t\t\t\t\tthis.cancelEditing();\n\t\t\t\t}\n\t\t\t}).finally(() =>\n\t\t\t{\n\t\t\t\tthis.isDeleting = false;\n\t\t\t});\n\t\t},\n\n\t\texecuteAction(actionObject): Promise\n\t\t{\n\t\t\tif (!actionObject)\n\t\t\t{\n\t\t\t\tconsole.error('No action object to execute');\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst action = new Action(actionObject);\n\t\t\treturn action.execute(this);\n\t\t},\n\t},\n\twatch: {\n\t\tid(id)\n\t\t{\n\t\t\tthis.isExist = !!id;\n\t\t},\n\n\t\ttext(text)\n\t\t{\n\t\t\tthis.note = text;\n\t\t\tthis.oldNote = text;\n\t\t},\n\n\t\tnote() {\n\t\t\tif (!this.isEdit)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.$nextTick(() => {\n\t\t\t\tthis.adjustHeight(this.$refs.noteText);\n\t\t\t});\n\t\t},\n\n\t\tisEdit(value)\n\t\t{\n\t\t\tif (value)\n\t\t\t{\n\t\t\t\tthis.$nextTick(() => this.$refs.noteText.focus());\n\t\t\t}\n\t\t}\n\t},\n\ttemplate: `\n\t\t<div class=\"crm-timeline__card-note\" v-show=\"isNoteVisible\">\n\t\t<div class=\"crm-timeline__card-note_user\">\n\t\t\t<User v-bind=\"user\"></User>\n\t\t</div>\n\t\t<div class=\"crm-timeline__card-note_area\">\n\t\t\t<div class=\"crm-timeline__card-note_value\">\n\t\t\t\t\t<textarea\n\t\t\t\t\t\tv-if=\"isEdit\"\n\t\t\t\t\t\tv-model=\"note\"\n\t\t\t\t\t\t@keydown.esc=\"cancelEditing\"\n\t\t\t\t\t\t@keydown.enter=\"onEnterHandle\"\n\t\t\t\t\t\t:disabled=\"!isEdit || isSaving\"\n\t\t\t\t\t\t:placeholder=\"$Bitrix.Loc.getMessage('CRM_TIMELINE_USER_NOTE_PLACEHOLDER')\"\n\t\t\t\t\t\tref=\"noteText\"\n\t\t\t\t\t\tclass=\"crm-timeline__card-note_text\"\n\t\t\t\t\t></textarea>\n\t\t\t\t\t<span\n\t\t\t\t\t\tv-else\n\t\t\t\t\t\tclass=\"crm-timeline__card-note_text\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{note}}\n\t\t\t\t\t</span>\n\n\t\t\t\t<span\n\t\t\t\t\tv-if=\"isEditButtonVisible\"\n\t\t\t\t\tclass=\"crm-timeline__card-note_edit\"\n\t\t\t\t\t@click.prevent.stop=\"startEditing\"\n\t\t\t\t>\n\t\t\t\t\t\t<i></i>\n\t\t\t\t\t</span>\n\t\t\t</div>\n\t\t\t<div v-if=\"isEdit\" class=\"crm-timeline__card-note__controls\">\n\t\t\t\t<div class=\"crm-timeline__card-note__control --save\">\n\t\t\t\t\t<Button\n\t\t\t\t\t\t@click=\"saveNote\"\n\t\t\t\t\t\t:state=\"saveButtonState\" :type=\"ButtonType.PRIMARY\"\n\t\t\t\t\t\t:title=\"$Bitrix.Loc.getMessage('CRM_TIMELINE_USER_NOTE_SAVE')\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"crm-timeline__card-note__control --cancel\">\n\t\t\t\t\t<Button @click=\"cancelEditing\"\n\t\t\t\t\t\t\t:type=\"ButtonType.LIGHT\"\n\t\t\t\t\t\t\t:state=\"cancelButtonState\"\n\t\t\t\t\t\t\t:title=\"$Bitrix.Loc.getMessage('CRM_TIMELINE_USER_NOTE_CANCEL')\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div v-if=\"isDeleteButtonVisible\" class=\"crm-timeline__card-note_cross\" @click=\"deleteNote\">\n\t\t\t<i></i>\n\t\t</div>\n\t\t<div v-if=\"isDeleting\" class=\"crm-timeline__card-note_dimmer\"></div>\n\t\t</div>\n\t`\n};\n","import { Runtime } from \"main.core\";\nimport { Action } from \"../../action\";\nimport { DatetimeConverter } from \"crm.timeline.tools\";\nimport { DateTimeFormat } from \"main.date\";\nimport { TimestampConverter } from \"crm.datetime\";\n\nexport const DatePillColor = Object.freeze({\n\tDEFAULT: 'default',\n\tWARNING: 'warning',\n});\n\n\nexport default {\n\tprops: {\n\t\tvalue: Number,\n\t\twithTime: Boolean,\n\t\tbackgroundColor: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: DatePillColor.DEFAULT,\n\t\t\tvalidator(value: string) {\n\t\t\t\treturn Object.values(DatePillColor).includes(value);\n\t\t\t},\n\t\t},\n\t\taction: Object|null,\n\t},\n\tinject: ['isReadOnly'],\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tcurrentTimestamp: this.value,\n\t\t\tinitialTimestamp: this.value,\n\t\t\tactionTimeoutId: null,\n\t\t};\n\t},\n\tcomputed: {\n\t\tclassName() {\n\t\t\treturn [\n\t\t\t\t'crm-timeline__date-pill',\n\t\t\t\t`--color-${this.backgroundColor}`, {\n\t\t\t\t'--readonly': this.isPillReadonly,\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\tformattedDate(): string {\n\t\t\tif (!this.currentTimestamp)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn DatetimeConverter.createFromServerTimestamp(this.currentTimestamp).toUserTime().toDatetimeString({ withDayOfWeek: true, delimiter:', ' })\n\t\t},\n\t\tcurrentDateInSiteFormat(): ?string\n\t\t{\n\t\t\treturn DateTimeFormat.format(\n\t\t\t\tthis.withTime\n\t\t\t\t\t? DatetimeConverter.getSiteDateTimeFormat()\n\t\t\t\t\t: DatetimeConverter.getSiteDateFormat(),\n\t\t\t\t(DatetimeConverter.createFromServerTimestamp(this.currentTimestamp)).toUserTime().getValue()\n\t\t\t);\n\t\t},\n\n\t\tcalendarParams(): Object {\n\t\t\treturn {\n\t\t\t\tvalue: this.currentDateInSiteFormat,\n\t\t\t\tbTime: this.withTime,\n\t\t\t\tbHideTime: !this.withTime,\n\t\t\t\tbSetFocus: false,\n\t\t\t}\n\t\t},\n\n\t\tisPillReadonly(): boolean {\n\t\t\treturn this.isReadOnly || !this.action;\n\t\t}\n\t},\n\twatch: {\n\t\tvalue(newDate): void // update date from push\n\t\t{\n\t\t\tthis.initialTimestamp = newDate;\n\t\t\tthis.currentTimestamp = newDate;\n\t\t}\n\t},\n\tmethods: {\n\t\topenCalendar(event: PointerEvent): void\n\t\t{\n\t\t\tif (this.isPillReadonly)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.cancelScheduledActionExecution();\n\n\t\t\t// eslint-disable-next-line bitrix-rules/no-bx\n\t\t\tBX.calendar({\n\t\t\t\tnode: event.target,\n\t\t\t\tcallback_after: (newDate: Date) => {\n\t\t\t\t\tthis.currentTimestamp = TimestampConverter.userToBrowser(newDate.getTime() / 1000);\n\n\t\t\t\t\tthis.executeAction();\n\t\t\t\t},\n\t\t\t\t...this.calendarParams,\n\t\t\t});\n\t\t},\n\t\tcancelScheduledActionExecution(): void\n\t\t{\n\t\t\tif (this.actionTimeoutId)\n\t\t\t{\n\t\t\t\tclearTimeout(this.actionTimeoutId);\n\t\t\t\tthis.actionTimeoutId = null;\n\t\t\t}\n\t\t},\n\t\texecuteAction(): void\n\t\t{\n\t\t\tif (!this.action)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.currentTimestamp === this.initialTimestamp)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// to avoid unintended props mutation\n\t\t\tconst actionDescription = Runtime.clone(this.action);\n\n\t\t\tactionDescription.actionParams ??= {};\n\t\t\tactionDescription.actionParams.value = this.currentDateInSiteFormat;\n\n\t\t\tconst action = new Action(actionDescription);\n\t\t\taction.execute(this);\n\n\t\t\tthis.initialTimestamp = this.currentTimestamp;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<span\n\t\t\t:class=\"className\"\n\t\t\t@click=\"openCalendar\"\n\t\t>\n\t\t\t<span>\n\t\t\t\t{{ formattedDate }}\n\t\t\t</span>\n\t\t\t<span class=\"crm-timeline__date-pill_caret\"></span>\n\t\t</span>`\n};","import { CurrencyCore } from 'currency.currency-core';\nimport { Type } from 'main.core';\n\nexport const MoneyPill = {\n\tprops: {\n\t\topportunity: Number,\n\t\tcurrencyId: String,\n\t},\n\tcomputed: {\n\t\tmoneyHtml(): ?string\n\t\t{\n\t\t\tif (!Type.isNumber(this.opportunity) || !Type.isStringFilled(this.currencyId))\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn CurrencyCore.currencyFormat(this.opportunity, this.currencyId, true);\n\t\t}\n\t},\n\ttemplate: `\n\t\t<div class=\"crm-timeline-card__money-pill\">\n\t\t\t<span class=\"crm-timeline-card__money-pill_amount\">\n\t\t\t\t<span v-if=\"moneyHtml\" v-html=\"moneyHtml\"></span>\n\t\t\t</span>\n\t\t</div>\n\t`\n}\n","\nexport const InfoGroup = {\n\tprops: {\n\t\tblocks: {\n\t\t\ttype: Object,\n\t\t\trequired: false,\n\t\t\tdefault: () => ({}),\n\t\t}\n\t},\n\n\ttemplate: `\n\t\t<table class=\"crm-timeline__info-group\">\n\t\t\t<tbody>\n\t\t\t\t<tr\n\t\t\t\t\tv-for=\"({title, block}, id) in blocks\"\n\t\t\t\t\t:key=\"id\"\n\t\t\t\t\tclass=\"crm-timeline__info-group_block\"\n\t\t\t\t>\n\t\t\t\t\t<td\n\t\t\t\t\t\t:title=\"title\"\n\t\t\t\t\t\tclass=\"crm-timeline__info-group_block-title\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{title}}\n\t\t\t\t\t</td>\n\t\t\t\t\t<td class=\"crm-timeline__info-group_block-content\">\n\t\t\t\t\t\t<component\n\t\t\t\t\t\t\t:is=\"block.rendererName\"\n\t\t\t\t\t\t\tv-bind=\"block.properties\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</tbody>\n\t\t</table>\n\t`\n}","import { FileIcon } from 'ui.icons.generator';\n\nexport default {\n\tprops: {\n\t\ttext: String,\n\t\thref: String,\n\t\tsize: Number,\n\t\tattributes: Object\n\t},\n\n\tcomputed: {\n\t\tfileExtension() {\n\t\t\treturn this.text.split('.').slice(-1)[0] || '';\n\t\t},\n\t},\n\n\tmounted() {\n\t\tconst fileIcon = new FileIcon({\n\t\t\tname: this.fileExtension,\n\t\t});\n\n\t\tfileIcon.renderTo(this.$refs.icon);\n\t},\n\ttemplate:\n\t\t`\n\t\t\t<div class=\"crm-timeline__file\">\n\t\t\t\t<div ref=\"icon\" class=\"crm-timeline__file_icon\"></div>\n\t\t\t\t<a\n\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\tclass=\"crm-timeline__card_link\"\n\t\t\t\t\tv-if=\"href\"\n\t\t\t\t\t:title=\"text\"\n\t\t\t\t\t:href=\"href\"\n\t\t\t\t\tv-bind=\"attributes\"\n\t\t\t\t>\n\t\t\t\t\t{{text}}\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t`\n};\n","import { FileUploaderPopup } from 'crm.activity.file-uploader-popup';\nimport File from './file';\n\nexport const FileList = {\n\tcomponents: {\n\t\tFile,\n\t},\n\tprops: {\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t},\n\t\tnumberOfFiles: {\n\t\t\ttype: Number,\n\t\t\trequired: false,\n\t\t\tdefault: 0,\n\t\t},\n\t\tfiles: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t\tdefault: [],\n\t\t},\n\t\tupdateParams: {\n\t\t\ttype: Object,\n\t\t\trequired: false,\n\t\t\tdefault: {},\n\t\t},\n\t},\n\n\tinject: ['isReadOnly'],\n\n\tcomputed: {\n\t\ttitleClassName(): Object\n\t\t{\n\t\t\treturn {\n\t\t\t\t'crm-timeline__file-list-title': true,\n\t\t\t\t'--editable': this.isEditable,\n\t\t\t}\n\t\t},\n\n\t\tfileListTitleText(): string\n\t\t{\n\t\t\tconst numberOfFiles = this.numberOfFiles > 0 ? `(${this.numberOfFiles})` : '';\n\t\t\tconst title = this.title !== '' ? this.title : '';\n\n\t\t\treturn `${title} ${numberOfFiles}`;\n\t\t},\n\n\t\tisEditable(): boolean\n\t\t{\n\t\t\treturn Object.keys(this.updateParams).length > 0 && !this.isReadOnly;\n\t\t}\n\t},\n\n\tmethods: {\n\t\tfileProps(file: Object): Object\n\t\t{\n\t\t\treturn {\n\t\t\t\ttext: file.name,\n\t\t\t\thref: file.viewUrl,\n\t\t\t\tsize: file.size,\n\t\t\t\tattributes: file.attributes,\n\t\t\t};\n\t\t},\n\n\t\tshowFileUploaderPopup(): void\n\t\t{\n\t\t\tif (!this.isEditable)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst popup = new FileUploaderPopup(this.updateParams);\n\t\t\tpopup.show();\n\t\t},\n\t},\n\n\ttemplate:\n\t\t`\n\t\t\t<div class=\"crm-timeline__file-list-wrapper\">\n\t\t\t\t<div class=\"crm-timeline__file-list-title-container\">\n\t\t\t\t\t<span\n\t\t\t\t\t\tv-if=\"title !== '' || numberOfFiles > 0\"\n\t\t\t\t\t\t@click=\"showFileUploaderPopup\"\n\t\t\t\t\t\t:class=\"titleClassName\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{ fileListTitleText }}\n\t\t\t\t\t</span>\n\t\t\t\t\t<button\n\t\t\t\t\t\tv-if=\"isEditable\"\n\t\t\t\t\t\t@click=\"showFileUploaderPopup\"\n\t\t\t\t\t\tclass=\"crm-timeline__file-list-edit-btn\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<i class=\"crm-timeline__editable-text_edit-icon\"></i>\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"crm-timeline__file-list-container\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"crm-timeline__file-container\"\n\t\t\t\t\t\tv-for=\"file in files\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<File :key=\"file.id\" v-bind=\"fileProps(file)\"></File>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`\n};\n","import { Base } from './base';\nimport ConfigurableItem from '../configurable-item';\nimport { Type } from \"main.core\";\n\nimport TextBlock from '../components/content-blocks/text';\nimport LinkBlock from '../components/content-blocks/link';\nimport DateBlock from '../components/content-blocks/date';\nimport WithTitle from '../components/content-blocks/with-title';\nimport LineOfTextBlocks from '../components/content-blocks/line-of-text-blocks';\nimport { TimelineAudio } from '../components/content-blocks/timeline-audio';\nimport { ClientMark } from '../components/content-blocks/client-mark';\nimport Money from '../components/content-blocks/money';\nimport EditableText from '../components/content-blocks/editable-text';\nimport { EditableDescription } from '../components/content-blocks/editable-description';\nimport EditableDate from '../components/content-blocks/editable-date';\nimport { PlayerAlert } from '../components/content-blocks/player-alert';\nimport { Note } from '../components/content-blocks/note';\nimport DatePill from '../components/content-blocks/date-pill';\nimport {MoneyPill} from '../components/content-blocks/money-pill';\nimport {InfoGroup} from '../components/content-blocks/info-group';\nimport { FileList } from '../components/content-blocks/file-list';\n\nexport class CommonContentBlocks extends Base\n{\n\tgetContentBlockComponents(Item: ConfigurableItem): Object\n\t{\n\t\treturn {\n\t\t\tTextBlock,\n\t\t\tLinkBlock,\n\t\t\tDateBlock,\n\t\t\tWithTitle,\n\t\t\tLineOfTextBlocks,\n\t\t\tTimelineAudio,\n\t\t\tClientMark,\n\t\t\tMoney,\n\t\t\tEditableText,\n\t\t\tEditableDescription,\n\t\t\tEditableDate,\n\t\t\tPlayerAlert,\n\t\t\tDatePill,\n\t\t\tNote,\n\t\t\tFileList,\n\t\t\tInfoGroup,\n\t\t\tMoneyPill,\n\t\t};\n\t}\n\n\t/**\n\t * Process common events that aren't bound to specific item type\n\t */\n\tonItemAction(item: ConfigurableItem, actionParams: ActionParams): void\n\t{\n\t\tconst {action, actionType, actionData} = actionParams;\n\t\tif (actionType !== 'jsEvent')\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (action === 'Item:OpenEntityDetailTab' && Type.isStringFilled(actionData?.tabId))\n\t\t{\n\t\t\tthis.#openEntityDetailTab(actionData.tabId);\n\t\t}\n\n\t\tif(action === 'Note:StartEdit') {\n\t\t\tthis.#editNote(item);\n\t\t}\n\n\t\tif(action === 'Note:FinishEdit') {\n\t\t\tthis.#cancelEditNote(item);\n\t\t}\n\t}\n\n\t#openEntityDetailTab(tabId: string): void\n\t{\n\t\t// the event is handled by compatible code, it's a pain to use EventEmitter in this case\n\t\t// eslint-disable-next-line bitrix-rules/no-bx\n\t\tBX.onCustomEvent(window, 'OpenEntityDetailTab', [tabId]);\n\t}\n\n\t#editNote(item: ConfigurableItem) {\n\t\titem.getLayoutContentBlockById('note')?.setEditMode(true);\n\t\titem.highlightContentBlockById('note', true);\n\t}\n\n\t#cancelEditNote(item: ConfigurableItem) {\n\t\titem.getLayoutContentBlockById('note')?.setEditMode(false);\n\t\titem.highlightContentBlockById('note', false);\n\t}\n\n\tstatic isItemSupported(item: ConfigurableItem): boolean\n\t{\n\t\treturn true; // common blocks can be used anywhere\n\t}\n}\n","export default {\n\tprops: {\n\t\tfrom: Object,\n\t\tto: Object,\n\t},\n\t// language=Vue\n\ttemplate: `<div class=\"crm-entity-stream-content-detail-info\">\n\t<component :is=\"from.rendererName\" v-if=\"from\" v-bind=\"from.properties\"></component>\n\t<span class=\"crm-entity-stream-content-detail-info-separator-icon\" v-if=\"from\"></span>\n\t<component :is=\"to.rendererName\" v-if=\"to\" v-bind=\"to.properties\"></component>\n\t</div>`\n};\n","export default {\n\tprops: {\n\t\ticonCode: String,\n\t\ttext: String,\n\t\tpillText: String,\n\t},\n\tcomputed: {\n\t\ticonClassName(): Object\n\t\t{\n\t\t\treturn [\n\t\t\t\t'crm-timeline__value-change-item_icon', {\n\t\t\t\t[`--${this.iconCode}`]: true,\n\t\t\t\t}\n\t\t\t];\n\n\t\t}\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<div class=\"crm-timeline__value-change-item\">\n\t\t\t<span v-if=\"iconCode\" :class=\"iconClassName\"></span>\n\t\t\t<span class=\"crm-timeline__value-change-item_text\" v-if=\"text\">{{ text }}</span>\n\t\t\t<span class=\"crm-entity-stream-content-detain-info-status\" v-if=\"pillText\">{{ pillText }}</span>\n\t\t</div>\n\t`\n};","import {Base} from './base';\nimport ConfigurableItem from '../configurable-item';\nimport ValueChange from '../components/content-blocks/value-change';\nimport ValueChangeItem from '../components/content-blocks/value-change-item';\n\nexport class Modification extends Base\n{\n\tgetContentBlockComponents(Item: ConfigurableItem): Object\n\t{\n\t\treturn {\n\t\t\tValueChange,\n\t\t\tValueChangeItem,\n\t\t};\n\t}\n\n\tstatic isItemSupported(item: ConfigurableItem): boolean\n\t{\n\t\treturn (item.getType() === 'Modification');\n\t}\n}\n","export default {\n\tprops: {\n\t\tmessageHtml: String,\n\t\tisIncoming: Boolean,\n\t},\n\tcomputed: {\n\t\tclassName(): string\n\t\t{\n\t\t\treturn 'crm-entity-stream-content-detail-IM-message-' + (this.isIncoming ? 'incoming' : 'outgoing');\n\t\t},\n\t},\n\t// language=Vue\n\ttemplate: `<div class=\"crm-entity-stream-content-detail-IM\"><div :class=\"[className]\" v-html=\"messageHtml\"></div></div>`\n};\n","import {Base} from './base';\nimport ConfigurableItem from '../configurable-item';\nimport ChatMessage from '../components/content-blocks/chat-message';\n\nexport class OpenLines extends Base\n{\n\tgetContentBlockComponents(Item: ConfigurableItem): Object\n\t{\n\t\treturn {\n\t\t\tChatMessage,\n\t\t};\n\t}\n\n\tonItemAction(item: ConfigurableItem, actionParams: ActionParams): void\n\t{\n\t\tconst {action, actionType, actionData} = actionParams;\n\t\tif (actionType !== 'jsEvent')\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tif (action === 'Openline:OpenChat' && actionData && actionData.dialogId)\n\t\t{\n\t\t\tthis.#openChat(actionData.dialogId);\n\t\t}\n\t}\n\n\t#openChat(dialogId): void\n\t{\n\t\tif (window.top['BXIM'])\n\t\t{\n\t\t\twindow.top['BXIM'].openMessengerSlider(dialogId, {RECENT: 'N', MENU: 'N'});\n\t\t}\n\t}\n\n\tstatic isItemSupported(item: ConfigurableItem): boolean\n\t{\n\t\treturn (item.getType() === 'Activity:OpenLine');\n\t}\n}\n\n","import {ajax as Ajax, Text, Loc} from 'main.core';\nimport {Router} from 'crm.router';\nimport {Base} from './base';\nimport {ajax} from 'main.core';\nimport {DateTimeFormat} from \"main.date\";\nimport { DatetimeConverter } from \"crm.timeline.tools\";\nimport { MessageBox, MessageBoxButtons } from 'ui.dialogs.messagebox';\n\nimport ConfigurableItem from '../configurable-item';\nimport {UI} from \"ui.notification\";\n\ndeclare type Signer = {\n\ttitle: string,\n}\n\nexport class SignDocument extends Base\n{\n\tonItemAction(item: ConfigurableItem, actionParams: ActionParams): void\n\t{\n\t\tconst {action, actionType, actionData, animationCallbacks} = actionParams;\n\t\tif (actionType !== 'jsEvent')\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst documentId = Text.toInteger(actionData?.documentId);\n\t\tconst documentHash = actionData?.documentHash || '';\n\t\tconst activityId = Text.toInteger(actionData?.activityId);\n\t\tif ((action === 'SignDocument:Open' || action === 'Activity:SignDocument:Open') && documentId > 0)\n\t\t{\n\t\t\tthis.#openDocument(actionData);\n\t\t}\n\t\telse if ((action === 'SignDocument:Modify' || action === 'Activity:SignDocument:Modify') && documentId > 0)\n\t\t{\n\t\t\tthis.#modifyDocument(actionData);\n\t\t}\n\t\telse if ((action === 'SignDocument:UpdateActivityDeadline' || action === 'Activity:SignDocument:UpdateActivityDeadline') && activityId > 0)\n\t\t{\n\t\t\tthis.#updateActivityDeadline(activityId, actionData?.value);\n\t\t}\n\t\telse if (action === 'SignDocument:Resend' && documentId > 0 && actionData?.recipientHash)\n\t\t{\n\t\t\tthis.#resendDocument(actionData, animationCallbacks).then(() => {\n\t\t\t\tif (actionData.buttonId)\n\t\t\t\t{\n\t\t\t\t\tconst btn = item.getLayoutFooterButtonById(actionData.buttonId);\n\t\t\t\t\tbtn.disableWithTimer(60);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\telse if (action === 'SignDocument:TouchSigner' && documentId > 0)\n\t\t{\n\t\t\tthis.#touchSigner(actionData);\n\t\t}\n\t\telse if (action === 'SignDocument:Download' && documentHash)\n\t\t{\n\t\t\tthis.#download(actionData, animationCallbacks);\n\t\t}\n\t\telse if (action === 'SignDocumentEntry:Delete' && actionData?.entryId)\n\t\t{\n\t\t\tMessageBox.show({\n\t\t\t\tmessage: actionData?.confirmationText || '',\n\t\t\t\tmodal: true,\n\t\t\t\tbuttons: MessageBoxButtons.YES_NO,\n\t\t\t\tonYes: () =>\n\t\t\t\t{\n\t\t\t\t\treturn this.#deleteEntry(actionData.entryId);\n\t\t\t\t},\n\t\t\t\tonNo: (messageBox) =>\n\t\t\t\t{\n\t\t\t\t\tmessageBox.close();\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t}\n\n\t#deleteEntry(entryId): Promise\n\t{\n\t\tconsole.log('delete entry' + entryId);\n\t}\n\n\t#openDocument({\n\t\tdocumentId,\n\t\tmemberHash\n\t}): Promise\n\t{\n\t\treturn Router.Instance.openSignDocumentSlider(documentId, memberHash);\n\t}\n\n\t#modifyDocument({documentId}): Promise\n\t{\n\t\treturn Router.Instance.openSignDocumentModifySlider(documentId);\n\t}\n\n\tasync #updateActivityDeadline(activityId: number, value: ?Date): Promise<void>\n\t{\n\t\tconst valueInSiteFormat = DateTimeFormat.format(DatetimeConverter.getSiteDateFormat(), value);\n\n\t\tlet response: {data: {document?: {activityDeadline?: string}, success?: boolean, code?: number}};\n\t\ttry\n\t\t{\n\t\t\tresponse = await Ajax.runAction('crm.timeline.signdocument.updateActivityDeadline', {\n\t\t\t\tdata: {\n\t\t\t\t\tactivityId: activityId,\n\t\t\t\t\tactivityDeadline: valueInSiteFormat,\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t\tcatch (responseWithError)\n\t\t{\n\t\t\tconsole.error(responseWithError);\n\t\t\treturn;\n\t\t}\n\n\t\tconst newCreateDate = response.data.document?.activityDeadline;\n\n\t\tif (valueInSiteFormat !== newCreateDate)\n\t\t{\n\t\t\tconsole.error(\"Updated document create date without errors, but for some reason date from the backend doesn't match sent value\");\n\t\t}\n\t}\n\n\t#resendDocument({documentId, recipientHash}, animationCallbacks): Promise\n\t{\n\t\tif (animationCallbacks.onStart)\n\t\t{\n\t\t\tanimationCallbacks.onStart();\n\t\t}\n\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tajax.runAction(\n\t\t\t\t'sign.internal.document.resendFile',\n\t\t\t\t{\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tmemberHash: recipientHash,\n\t\t\t\t\t\tdocumentId: documentId\n\t\t\t\t\t},\n\t\t\t\t}\n\t\t\t).then(() =>\n\t\t\t{\n\t\t\t\tUI.Notification.Center.notify({\n\t\t\t\t\tcontent: Loc.getMessage('CRM_TIMELINE_ITEM_SIGN_DOCUMENT_RESEND_SUCCESS'),\n\t\t\t\t\tautoHideDelay: 5000,\n\t\t\t\t});\n\t\t\t\tif (animationCallbacks.onStop)\n\t\t\t\t{\n\t\t\t\t\tanimationCallbacks.onStop();\n\n\t\t\t\t}\n\t\t\t\tresolve();\n\t\t\t}, (response) =>\n\t\t\t{\n\t\t\t\tUI.Notification.Center.notify({\n\t\t\t\t\tcontent: response.errors[0].message,\n\t\t\t\t\tautoHideDelay: 5000,\n\t\t\t\t});\n\t\t\t\tif (animationCallbacks.onStop)\n\t\t\t\t{\n\t\t\t\t\tanimationCallbacks.onStop();\n\t\t\t\t}\n\t\t\t\treject();\n\t\t\t});\n\n\t\t\tconsole.log('resend document ' + documentId + ' for ' + recipientHash);\n\t\t})\n\t}\n\n\t#touchSigner({documentId}): void\n\t{\n\t\tconsole.log('touch signer document ' + documentId);\n\t}\n\n\t#download({documentHash, memberHash}, animationCallbacks): void\n\t{\n\t\tif (animationCallbacks.onStart)\n\t\t{\n\t\t\tanimationCallbacks.onStart();\n\t\t}\n\n\t\tconst link = document.createElement('a');\n\t\tlink.href = '/bitrix/services/main/ajax.php?action=sign.document.getFileForSrc' +\n\t\t\t'&memberHash=' + memberHash +\n\t\t\t'&documentHash=' + documentHash;\n\n\t\tlink.setAttribute('download', '');\n\n\t\tdocument.body.appendChild(link);\n\t\tlink.click();\n\t\tdocument.body.removeChild(link);\n\n\t\tif (animationCallbacks.onStop)\n\t\t{\n\t\t\tanimationCallbacks.onStop();\n\t\t}\n\t}\n\n\tstatic isItemSupported(item: ConfigurableItem): boolean\n\t{\n\t\treturn (\n\t\t\titem.getType() === 'SignDocument'\n\t\t\t|| item.getType() === 'Activity:SignDocument'\n\t\t);\n\t}\n}\n","import {ajax as Ajax, Loc, Tag, Text, Type, Uri} from 'main.core';\nimport { DateTimeFormat } from \"main.date\";\nimport { type ActionAnimationCallbacks, type ActionParams, Base } from './base';\nimport ConfigurableItem from '../configurable-item';\nimport { ActionType } from \"../action\";\nimport { Router } from \"crm.router\";\nimport {MessageBox, MessageBoxButtons} from \"ui.dialogs.messagebox\";\nimport { DatetimeConverter } from \"crm.timeline.tools\";\nimport { UI } from 'ui.notification';\n\nimport 'ui.info-helper';\n\nconst ACTION_NAMESPACE = 'Document:';\n\nexport class Document extends Base\n{\n\tstatic #toPrintAfterRefresh: ConfigurableItem[] = [];\n\t#popupConfirm: BX.PopupWindow;\n\n\tstatic isItemSupported(item: ConfigurableItem): boolean\n\t{\n\t\treturn (\n\t\t\titem.getType() === 'Document'\n\t\t\t|| item.getType() === 'DocumentViewed'\n\t\t\t|| item.getType() === 'Activity:Document'\n\t\t);\n\t}\n\n\tonItemAction(item: ConfigurableItem, actionParams: ActionParams): void\n\t{\n\t\tconst {action, actionType, actionData, response, animationCallbacks} = actionParams;\n\n\t\tif (ActionType.isJsEvent(actionType))\n\t\t{\n\t\t\tthis.#onJsEvent(action, actionData, animationCallbacks, item);\n\t\t}\n\t\telse if (ActionType.isAjaxAction(actionType))\n\t\t{\n\t\t\tthis.#onAjaxAction(action, actionType, actionData, response);\n\t\t}\n\t}\n\n\t#onJsEvent(\n\t\taction: string,\n\t\tactionData: Object,\n\t\tanimationCallbacks: ?ActionAnimationCallbacks,\n\t\titem: ConfigurableItem,\n\t): void\n\t{\n\t\tconst documentId = Text.toInteger(actionData?.documentId);\n\t\t// if (documentId <= 0)\n\t\t// {\n\t\t// \treturn;\n\t\t// }\n\t\tif (action === (ACTION_NAMESPACE + 'Open'))\n\t\t{\n\t\t\tthis.#openDocument(documentId);\n\t\t}\n\t\telse if (action === (ACTION_NAMESPACE + 'CopyPublicLink'))\n\t\t{\n\t\t\t// todo block button while loading\n\t\t\tthis.#copyPublicLink(documentId, actionData?.publicUrl);\n\t\t}\n\t\telse if (action === (ACTION_NAMESPACE + 'Print'))\n\t\t{\n\t\t\tthis.#printDocument(actionData?.printUrl, animationCallbacks, item);\n\t\t}\n\t\telse if (action === (ACTION_NAMESPACE + 'DownloadPdf'))\n\t\t{\n\t\t\tthis.#downloadPdf(actionData?.pdfUrl);\n\t\t}\n\t\telse if (action === (ACTION_NAMESPACE + 'DownloadDocx'))\n\t\t{\n\t\t\tthis.#downloadDocx(actionData?.docxUrl);\n\t\t}\n\t\telse if (action === (ACTION_NAMESPACE + 'UpdateTitle'))\n\t\t{\n\t\t\tthis.#updateTitle(documentId, actionData?.value);\n\t\t}\n\t\telse if (action === (ACTION_NAMESPACE + 'UpdateCreateDate'))\n\t\t{\n\t\t\tthis.#updateCreateDate(documentId, actionData?.value);\n\t\t}\n\t\telse if (action === (ACTION_NAMESPACE + 'ConvertDeal'))\n\t\t{\n\t\t\tthis.#convertDeal(documentId, animationCallbacks);\n\t\t}\n\t\telse if (action === (ACTION_NAMESPACE + 'ShowInfoHelperSlider'))\n\t\t{\n\t\t\tthis.#showInfoHelperSlider(actionData?.infoHelperCode);\n\t\t}\n\t\telse if (action === (ACTION_NAMESPACE + 'Delete'))\n\t\t{\n\t\t\tconst confirmationText = actionData.confirmationText ?? '';\n\t\t\tif (confirmationText)\n\t\t\t{\n\t\t\t\tMessageBox.show({\n\t\t\t\t\tmessage: confirmationText,\n\t\t\t\t\tmodal: true,\n\t\t\t\t\tbuttons: MessageBoxButtons.YES_NO,\n\t\t\t\t\tonYes: () => {\n\t\t\t\t\t\treturn this.#deleteDocument(actionData.id, actionData.ownerTypeId, actionData.ownerId, animationCallbacks);\n\t\t\t\t\t},\n\t\t\t\t\tonNo: (messageBox) => {\n\t\t\t\t\t\tmessageBox.close();\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.#deleteDocument(actionData.id, actionData.ownerTypeId, actionData.ownerId, animationCallbacks);\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tconsole.info(`Unknown action ${action} in ${item.getType()}`);\n\t\t}\n\t}\n\n\t#openDocument(documentId: number): void\n\t{\n\t\tRouter.Instance.openDocumentSlider(documentId);\n\t}\n\n\tasync #copyPublicLink(documentId: number, publicUrl: ?string): Promise<void>\n\t{\n\t\tif (!Type.isStringFilled(publicUrl))\n\t\t{\n\t\t\ttry\n\t\t\t{\n\t\t\t\tpublicUrl = await this.#createPublicUrl(documentId);\n\t\t\t}\n\t\t\tcatch (error)\n\t\t\t{\n\t\t\t\tMessageBox.alert(error.message);\n\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tconst isSuccess = BX.clipboard.copy(publicUrl);\n\t\tif (isSuccess)\n\t\t{\n\t\t\tUI.Notification.Center.notify({\n\t\t\t\tcontent: Loc.getMessage('CRM_TIMELINE_ITEM_LINK_IS_COPIED'),\n\t\t\t\tautoHideDelay: 5000,\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tMessageBox.alert(Loc.getMessage('CRM_TIMELINE_ITEM_ACTIVITY_DOCUMENT_COPY_PUBLIC_LINK_ERROR'));\n\t\t}\n\t}\n\n\tasync #createPublicUrl(documentId: number): Promise<string, Error>\n\t{\n\t\tlet response: {data: {publicUrl: string}};\n\t\ttry\n\t\t{\n\t\t\tresponse = await Ajax.runAction(\n\t\t\t\t'crm.documentgenerator.document.enablePublicUrl',\n\t\t\t\t{\n\t\t\t\t\tanalyticsLabel: 'enablePublicUrl',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tstatus: 1,\n\t\t\t\t\t\tid: documentId,\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t\tcatch (responseWithError)\n\t\t{\n\t\t\tconsole.error(responseWithError);\n\n\t\t\tthrow new Error(Loc.getMessage('CRM_TIMELINE_ITEM_ACTIVITY_DOCUMENT_CREATE_PUBLIC_LINK_ERROR'));\n\t\t}\n\n\t\tconst publicUrl = response.data.publicUrl;\n\t\tif (!Type.isStringFilled(publicUrl))\n\t\t{\n\t\t\tthrow new Error(Loc.getMessage('CRM_TIMELINE_ITEM_ACTIVITY_DOCUMENT_CREATE_PUBLIC_LINK_ERROR'));\n\t\t}\n\n\t\treturn publicUrl;\n\t}\n\n\t#printDocument(printUrl: ?string, animationCallbacks: ?ActionAnimationCallbacks, item: ConfigurableItem): void\n\t{\n\t\tif (Type.isStringFilled(printUrl))\n\t\t{\n\t\t\twindow.open(printUrl, '_blank');\n\t\t\treturn;\n\t\t}\n\n\t\t// there is no pdf yet. wait till document is transformed and update push comes in\n\t\tDocument.#toPrintAfterRefresh.push(item);\n\t\tconst onStart = animationCallbacks?.onStart;\n\t\tif (Type.isFunction(onStart))\n\t\t{\n\t\t\tonStart();\n\t\t}\n\t}\n\n\t#downloadPdf(pdfUrl: ?string): void\n\t{\n\t\tif (Type.isStringFilled(pdfUrl))\n\t\t{\n\t\t\twindow.open(pdfUrl, '_blank');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tMessageBox.alert(Loc.getMessage('CRM_TIMELINE_ITEM_ACTIVITY_DOCUMENT_PDF_NOT_READY'));\n\t\t}\n\t}\n\n\t#downloadDocx(docxUrl: ?string): void\n\t{\n\t\tif (Type.isStringFilled(docxUrl))\n\t\t{\n\t\t\twindow.open(docxUrl, '_blank');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tconsole.error('Docx download url is not found. This should be an impossible case, something went wrong');\n\t\t}\n\t}\n\n\tasync #updateTitle(documentId: number, value: ?string): Promise<void>\n\t{\n\t\tlet response: {data: {document?: {values?: {DocumentTitle?: string}}}};\n\t\ttry\n\t\t{\n\t\t\tresponse = await Ajax.runAction('crm.documentgenerator.document.update', {\n\t\t\t\tdata: {\n\t\t\t\t\tid: documentId,\n\t\t\t\t\tvalues: {\n\t\t\t\t\t\tDocumentTitle: value,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t\tcatch (responseWithError)\n\t\t{\n\t\t\tconsole.error(responseWithError);\n\n\t\t\tMessageBox.alert(Loc.getMessage('CRM_TIMELINE_ITEM_ACTIVITY_DOCUMENT_UPDATE_DOCUMENT_ERROR'));\n\n\t\t\treturn;\n\t\t}\n\n\t\tconst newTitle = response.data.document?.values?.DocumentTitle;\n\t\tif (newTitle !== value)\n\t\t{\n\t\t\tconsole.error(\"Updated document title without errors, but for some reason title from the backend doesn't match sent value\");\n\t\t}\n\t}\n\n\tasync #updateCreateDate(documentId: number, value: ?Date): Promise<void>\n\t{\n\t\tconst valueInSiteFormat = DateTimeFormat.format(DatetimeConverter.getSiteDateFormat(), value);\n\n\t\tlet response: {data: {document?: {values?: {DocumentCreateTime?: string}}}};\n\t\ttry\n\t\t{\n\t\t\tresponse = await Ajax.runAction('crm.documentgenerator.document.update', {\n\t\t\t\tdata: {\n\t\t\t\t\tid: documentId,\n\t\t\t\t\tvalues: {\n\t\t\t\t\t\tDocumentCreateTime: valueInSiteFormat,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t\tcatch (responseWithError)\n\t\t{\n\t\t\tconsole.error(responseWithError);\n\n\t\t\tMessageBox.alert(Loc.getMessage('CRM_TIMELINE_ITEM_ACTIVITY_DOCUMENT_UPDATE_DOCUMENT_ERROR'));\n\n\t\t\treturn;\n\t\t}\n\n\t\tconst newCreateDate = response.data.document?.values?.DocumentCreateTime;\n\t\tif (valueInSiteFormat !== newCreateDate)\n\t\t{\n\t\t\tconsole.error(\"Updated document create date without errors, but for some reason date from the backend doesn't match sent value\");\n\t\t}\n\t}\n\n\t#deleteDocument(id: number, ownerTypeId: number, ownerId: number, animationCallbacks: Object): boolean\n\t{\n\t\tif (animationCallbacks.onStart)\n\t\t{\n\t\t\tanimationCallbacks.onStart();\n\t\t}\n\t\treturn Ajax.runAction(\n\t\t\t'crm.timeline.document.delete',\n\t\t\t{\n\t\t\t\tdata: {\n\t\t\t\t\tid,\n\t\t\t\t\townerTypeId,\n\t\t\t\t\townerId,\n\t\t\t\t}\n\t\t\t}\n\t\t).then(() => {\n\t\t\tif (animationCallbacks.onStop)\n\t\t\t{\n\t\t\t\tanimationCallbacks.onStop();\n\t\t\t}\n\t\t\treturn true;\n\t\t}, (response) =>\n\t\t{\n\t\t\tUI.Notification.Center.notify({\n\t\t\t\tcontent: response.errors[0].message,\n\t\t\t\tautoHideDelay: 5000,\n\t\t\t});\n\t\t\tif (animationCallbacks.onStop)\n\t\t\t{\n\t\t\t\tanimationCallbacks.onStop();\n\t\t\t}\n\n\t\t\treturn true;\n\t\t});\n\t}\n\n\t#onAjaxAction(action: string, actionType: string, actionData: Object, response: Object): void\n\t{\n\t\tif (action === 'crm.api.integration.sign.convertDeal')\n\t\t{\n\t\t\tif (actionType === ActionType.AJAX_ACTION.FINISHED && !Type.isNil(response?.data?.SMART_DOCUMENT))\n\t\t\t{\n\t\t\t\t//todo extract it to router?\n\t\t\t\tconst wizardUri = new Uri('/sign/doc/0/');\n\t\t\t\twizardUri.setQueryParams({\n\t\t\t\t\tdocId: response.data.SMART_DOCUMENT,\n\t\t\t\t\tstepId: 'changePartner',\n\t\t\t\t\tnoRedirect: 'Y',\n\t\t\t\t});\n\t\t\t\tBX.SidePanel.Instance.open(wizardUri.toString());\n\t\t\t}\n\t\t}\n\t}\n\n\tonAfterItemRefreshLayout(item: ConfigurableItem)\n\t{\n\t\tconst itemsToPrint = Document.#toPrintAfterRefresh.filter(candidate => candidate.getId() === item.getId());\n\t\tif (itemsToPrint.length <= 0)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst action = item.getLayout().asPlainObject().footer?.additionalButtons?.extra?.action;\n\t\tconst isPrintEvent = (\n\t\t\tType.isPlainObject(action)\n\t\t\t&& ActionType.isJsEvent(action.type)\n\t\t\t&& action.value === (ACTION_NAMESPACE + 'Print')\n\t\t);\n\t\tif (!isPrintEvent)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst printUrl = action.actionParams?.printUrl;\n\t\tif (!Type.isStringFilled(printUrl))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.#printDocument(printUrl, null, item);\n\n\t\tDocument.#toPrintAfterRefresh =\n\t\t\tDocument.#toPrintAfterRefresh.filter(remainingItem => !itemsToPrint.includes(remainingItem))\n\t\t;\n\t}\n\n\t#convertDeal(id: number, animationCallbacks: ?ActionAnimationCallbacks)\n\t{\n\t\tif (animationCallbacks.onStart)\n\t\t{\n\t\t\tanimationCallbacks.onStart();\n\t\t}\n\n\t\tconst convertDealAndStartSign = (\n\t\t\t(usePrevious) =>\n\t\t\t{\n\t\t\t\tAjax.runAction('crm.api.integration.sign.convertDeal', {\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tdocumentId: id,\n\t\t\t\t\t\tusePrevious: !usePrevious ? 0 : 1,\n\t\t\t\t\t}\n\t\t\t}).then(\n\t\t\t\t(response) =>\n\t\t\t\t{\n\t\t\t\t\tif (response?.data?.SMART_DOCUMENT)\n\t\t\t\t\t{\n\t\t\t\t\t\tconst wizardUri = new Uri('/sign/doc/0/');\n\t\t\t\t\t\twizardUri.setQueryParams({\n\t\t\t\t\t\t\tdocId: response.data.SMART_DOCUMENT,\n\t\t\t\t\t\t\tstepId: 'changePartner',\n\t\t\t\t\t\t\tnoRedirect: 'Y',\n\t\t\t\t\t\t});\n\t\t\t\t\t\tBX.SidePanel.Instance.open(wizardUri.toString());\n\t\t\t\t\t}\n\n\t\t\t\t\tif (animationCallbacks.onStop)\n\t\t\t\t\t{\n\t\t\t\t\t\tanimationCallbacks.onStop();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t(response) => {\n\t\t\t\t\tif (response.errors[0].message)\n\t\t\t\t\t{\n\t\t\t\t\t\tUI.Notification.Center.notify({\n\t\t\t\t\t\t\tcontent: response.errors[0].message,\n\t\t\t\t\t\t\tautoHideDelay: 5000,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tif (animationCallbacks.onStop)\n\t\t\t\t\t{\n\t\t\t\t\t\tanimationCallbacks.onStop();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t).catch((response) =>\n\t\t\t\t{\n\t\t\t\t\tif (response.errors[0].message)\n\t\t\t\t\t{\n\t\t\t\t\t\tUI.Notification.Center.notify({\n\t\t\t\t\t\t\tcontent: response.errors[0].message,\n\t\t\t\t\t\t\tautoHideDelay: 5000,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tif (animationCallbacks.onStop)\n\t\t\t\t\t{\n\t\t\t\t\t\tanimationCallbacks.onStop();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t\t});\n\n\t\tAjax.runAction('crm.api.integration.sign.getLinkedBlank', {\n\t\t\tdata: {\n\t\t\t\tdocumentId: id\n\t\t\t}\n\t\t}).then(\n\t\t\t(response) =>\n\t\t\t{\n\t\t\t\tif (response?.data?.ID > 0) {\n\t\t\t\t\tthis.#showMessage(\n\t\t\t\t\t\tLoc.getMessage('CRM_TIMELINE_ITEM_ACTIVITY_DO_USE_PREVIOUS',\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t'%TITLE%': '<b>' + (response.data.TITLE || '') + '</b>',\n\t\t\t\t\t\t\t\t'%CREATED_AT%': '<b>' + (response.data.CREATED_AT || '') + '</b>',\n\t\t\t\t\t\t\t\t'%INITIATOR%': '<b>' + (response.data.INITIATOR || '') + '</b>',\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t[\n\t\t\t\t\t\t\tnew BX.UI.Button({\n\t\t\t\t\t\t\t\ttext: Loc.getMessage('CRM_TIMELINE_ITEM_ACTIVITY_NEW_BUTTON'),\n\t\t\t\t\t\t\t\tclassName: \"ui-btn ui-btn-md ui-btn-primary\",\n\t\t\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\t\t\tclick: () =>\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tconvertDealAndStartSign(false);\n\t\t\t\t\t\t\t\t\t\tthis.#popupConfirm.destroy();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\tnew BX.UI.Button({\n\t\t\t\t\t\t\t\ttext: BX.message('CRM_TIMELINE_ITEM_ACTIVITY_OLD_BUTTON'),\n\t\t\t\t\t\t\t\tclassName: \"ui-btn ui-btn-md ui-btn-primary\",\n\t\t\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\t\t\tclick: () =>\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tconvertDealAndStartSign(true);\n\t\t\t\t\t\t\t\t\t\tthis.#popupConfirm.destroy();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t],\n\t\t\t\t\t\tLoc.getMessage('CRM_TIMELINE_ITEM_ACTIVITY_POPUP_TITLE')\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\tconvertDealAndStartSign(false);\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\t#showInfoHelperSlider(code: string)\n\t{\n\t\tBX.UI.InfoHelper.show(code);\n\t}\n\n\t#showMessage(content: string, buttons: [], title: string)\n\t{\n\t\tthis.#popupConfirm = new BX.PopupWindow(\n\t\t\t'bx-popup-document-activity-popup',\n\t\t\tnull,\n\t\t\t{\n\t\t\t\t\t\tzIndex: 200,\n\t\t\t\t\t\tautoHide: true,\n\t\t\t\t\t\tcloseByEsc: true,\n\t\t\t\t\t\tbuttons: buttons,\n\t\t\t\t\t\tcloseIcon: true,\n\t\t\t\t\t\toverlay : true,\n\t\t\t\t\t\tevents : {\n\t\t\t\t\t\t\tonPopupClose : () =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.#popupConfirm.destroy();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcontent: Tag.render`<div class=\"bx-popup-document-activity-popup-content-text\">${content}</div>`,\n\t\t\t\t\t\ttitleBar: title,\n\t\t\t\t\t\tcontentColor: 'white',\n\t\t\t\t\t\tclassName : 'bx-popup-document-activity-popup',\n\t\t\t\t\t\tmaxWidth: 470\n\t\t\t\t\t}\n\t\t);\n\t\tthis.#popupConfirm.show();\n\t};\n}\n","import { Base } from './base';\nimport { Type } from 'main.core';\nimport ConfigurableItem from '../configurable-item';\n\nexport class Call extends Base\n{\n\tonItemAction(item: ConfigurableItem, actionParams: ActionParams): void\n\t{\n\t\tconst {action, actionType, actionData} = actionParams;\n\n\t\tif (actionType !== 'jsEvent')\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (action === 'Call:MakeCall' && actionData)\n\t\t{\n\t\t\tthis.#makeCall(actionData);\n\t\t}\n\n\t\tif (action === 'Call:Schedule' && actionData)\n\t\t{\n\t\t\tthis.#scheduleCall(actionData.activityId, actionData.scheduleDate);\n\t\t}\n\n\t\tif (action === 'Call:OpenTranscript' && actionData && actionData.callId)\n\t\t{\n\t\t\tthis.#openTranscript(actionData.callId);\n\t\t}\n\n\t\tif (action === 'Call:ChangePlayerState' && actionData && actionData.recordId)\n\t\t{\n\t\t\tthis.#changePlayerState(item, actionData.recordId);\n\t\t}\n\n\t\tif (action === 'Call:DownloadRecord' && actionData && actionData.url)\n\t\t{\n\t\t\tthis.#downloadRecord(actionData.url);\n\t\t}\n\t}\n\n\t#makeCall(actionData): void\n\t{\n\t\tif (!Type.isStringFilled(actionData.phone))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst params = {\n\t\t\tENTITY_TYPE_NAME: BX.CrmEntityType.resolveName(actionData.entityTypeId),\n\t\t\tENTITY_ID: actionData.entityId,\n\t\t\tAUTO_FOLD: true\n\t\t};\n\n\t\tif (actionData.ownerTypeId !== actionData.entityTypeId || actionData.ownerId !== actionData.entityId)\n\t\t{\n\t\t\tparams.BINDINGS = {\n\t\t\t\tOWNER_TYPE_NAME: BX.CrmEntityType.resolveName(actionData.ownerTypeId),\n\t\t\t\tOWNER_ID: actionData.ownerId\n\t\t\t}\n\t\t}\n\n\t\tif (actionData.activityId > 0)\n\t\t{\n\t\t\tparams.SRC_ACTIVITY_ID = actionData.activityId;\n\t\t}\n\n\t\twindow.top['BXIM'].phoneTo(actionData.phone, params);\n\t}\n\n\t#scheduleCall(activityId: Number, scheduleDate: String): void\n\t{\n\t\tif (BX.CrmTimelineManager)\n\t\t{\n\t\t\tconst timeline = BX.CrmTimelineManager.getDefault();\n\t\t\tif (timeline)\n\t\t\t{\n\t\t\t\tconst menuBar = timeline.getMenuBar();\n\t\t\t\tBX(menuBar.getActiveItem()).scrollIntoView({block: 'start', inline: 'nearest', behavior: 'smooth'});\n\t\t\t\tmenuBar.setActiveItemById('todo');\n\n\t\t\t\tconst todoEditor = menuBar.getTodoEditor();\n\t\t\t\ttodoEditor.setFocused();\n\t\t\t\ttodoEditor.setParentActivityId(activityId);\n\t\t\t\ttodoEditor.setDeadLine(scheduleDate);\n\t\t\t}\n\t\t}\n\t}\n\n\t#openTranscript(callId): void\n\t{\n\t\tif (BX.Voximplant && BX.Voximplant.Transcript)\n\t\t{\n\t\t\tBX.Voximplant.Transcript.create({\n\t\t\t\tcallId: callId\n\t\t\t}).show();\n\t\t}\n\t}\n\n\t#changePlayerState(item: ConfigurableItem, recordId: Number): void\n\t{\n\t\tconst player = item.getLayoutContentBlockById('audio');\n\t\tif (!player)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (recordId !== player.id)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (player.state === 'play')\n\t\t{\n\t\t\tplayer.pause();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tplayer.play();\n\t\t}\n\t}\n\n\t#downloadRecord(url: String): void\n\t{\n\t\tlocation.href = url;\n\t}\n\n\tstatic isItemSupported(item: ConfigurableItem): boolean\n\t{\n\t\treturn (item.getType() === 'Activity:Call');\n\t}\n}\n","import { Type } from 'main.core';\nimport { FileUploaderPopup } from 'crm.activity.file-uploader-popup';\nimport { Base } from './base';\nimport ConfigurableItem from '../configurable-item';\n\nexport class ToDo extends Base\n{\n\tonItemAction(item: ConfigurableItem, actionParams: ActionParams): void\n\t{\n\t\tconst {action, actionType, actionData} = actionParams;\n\n\t\tif (actionType !== 'jsEvent')\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (action === 'EditableDescription:StartEdit')\n\t\t{\n\t\t\titem.highlightContentBlockById('description', true);\n\t\t}\n\n\t\tif (action === 'EditableDescription:FinishEdit')\n\t\t{\n\t\t\titem.highlightContentBlockById('description', false);\n\t\t}\n\n\t\tif (action === 'Activity:ToDo:AddFile' && actionData)\n\t\t{\n\t\t\tthis.#showFileUploaderPopup(item, actionData);\n\t\t}\n\t}\n\n\t#showFileUploaderPopup(item, actionData): void\n\t{\n\t\tconst isValidParams = Type.isNumber(actionData.entityId)\n\t\t\t&& Type.isNumber(actionData.entityTypeId)\n\t\t\t&& Type.isNumber(actionData.ownerId)\n\t\t\t&& Type.isNumber(actionData.ownerTypeId);\n\n\t\tif (!isValidParams)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tactionData.files = actionData.files.split(',').filter(id => Type.isNumber(id));\n\n\t\tconst fileList = item.getLayoutContentBlockById('fileList');\n\t\tif (fileList)\n\t\t{\n\t\t\tfileList.showFileUploaderPopup(actionData);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tconst popup = new FileUploaderPopup(actionData);\n\t\t\tpopup.show();\n\t\t}\n\t}\n\n\tstatic isItemSupported(item: ConfigurableItem): boolean\n\t{\n\t\treturn (item.getType() === 'Activity:ToDo');\n\t}\n}\n","import {Base} from './base';\nimport ConfigurableItem from '../configurable-item';\n\nexport class Helpdesk extends Base\n{\n\tonItemAction(item: ConfigurableItem, actionParams: Object): void\n\t{\n\t\tconst { action, actionData } = actionParams;\n\n\t\tif (action === 'Helpdesk:Open' && actionData && actionData.articleCode)\n\t\t{\n\t\t\tthis.#openHelpdesk(actionData.articleCode);\n\t\t}\n\t}\n\n\t#openHelpdesk(articleCode): void\n\t{\n\t\tif (top.BX && top.BX.Helper)\n\t\t{\n\t\t\ttop.BX.Helper.show(`redirect=detail&code=${articleCode}`);\n\t\t}\n\t}\n\n\tstatic isItemSupported(item: ConfigurableItem): boolean\n\t{\n\t\treturn true;\n\t}\n}","export const SmsMessage = {\n\tprops: {\n\t\ttext: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t},\n\t},\n\tcomputed: {\n\t\tmessageHtml(): string\n\t\t{\n\t\t\treturn BX.util.htmlspecialchars(this.text).replace(/\\r\\n|\\r|\\n/g, '<br/>');\n\t\t}\n\t},\n\ttemplate: `\n\t\t<div\n\t\t\tclass=\"crm-timeline__item_sms-message\">\n\t\t\t<span v-if=\"messageHtml\" v-html=\"messageHtml\"></span>\n\t\t</div>\n\t`\n}\n","import {Activity} from './activity';\nimport ConfigurableItem from '../configurable-item';\nimport {PULL} from 'pull.client';\nimport {ajax, Text, Type} from 'main.core';\nimport {SmsMessage} from '../components/content-blocks/sms-message';\n\nexport class Sms extends Activity\n{\n\t#isPullSubscribed: boolean = false;\n\n\tstatic isItemSupported(item: ConfigurableItem): boolean\n\t{\n\t\treturn (\n\t\t\titem.getType() === 'Activity:Sms'\n\t\t\t|| item.getType() === 'Activity:Notification'\n\t\t);\n\t}\n\tonItemAction(item: ConfigurableItem, actionParams: ActionParams): void\n\t{\n\n\t}\n\tgetContentBlockComponents(Item: ConfigurableItem): Object\n\t{\n\t\treturn {\n\t\t\tSmsMessage\n\t\t};\n\t}\n\n\tonInitialize(item: ConfigurableItem): void\n\t{\n\t\tthis.#subscribePullEvents(item);\n\t}\n\n\t#subscribePullEvents(item: ConfigurableItem)\n\t{\n\t\tif (this.#isPullSubscribed)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst dataPayload = item.getDataPayload();\n\t\tif (dataPayload.pull && dataPayload.message)\n\t\t{\n\t\t\tPULL.subscribe({\n\t\t\t\tmoduleId: dataPayload.pull.moduleId,\n\t\t\t\tcommand: dataPayload.pull.command,\n\t\t\t\tcallback: (params) => {\n\t\t\t\t\tconst messages = this.#getEventMessages(params);\n\t\t\t\t\tfor (const message of messages)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tmessage\n\t\t\t\t\t\t\t&& message.ID == dataPayload.message.id\n\t\t\t\t\t\t)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\titem.reloadFromServer();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tPULL.extendWatch(dataPayload.pull.tagName);\n\n\t\t\t/**\n\t\t\t * For cases when a push event happened on the current hit before the subcription\n\t\t\t */\n\t\t\tsetTimeout(() => {\n\t\t\t\titem.reloadFromServer();\n\t\t\t}, 0);\n\n\t\t\tthis.#isPullSubscribed = true;\n\t\t}\n\t}\n\n\t#getEventMessages(params)\n\t{\n\t\tif (Type.isArray(params.messages))\n\t\t{\n\t\t\treturn params.messages;\n\t\t}\n\n\t\tif (params.message)\n\t\t{\n\t\t\treturn [\n\t\t\t\tparams.message\n\t\t\t];\n\t\t}\n\n\t\treturn [];\n\t}\n}\n","import {Base} from './base';\nimport ConfigurableItem from '../configurable-item';\n\nexport class Payment extends Base\n{\n\tonItemAction(item: ConfigurableItem, actionParams: ActionParams): void\n\t{\n\t\tconst {action, actionType, actionData, animationCallbacks} = actionParams;\n\n\t\tif (actionType !== 'jsEvent')\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (action === 'Payment:OpenRealization' && actionData?.paymentId)\n\t\t{\n\t\t\tthis.#openRealization(actionData.paymentId);\n\t\t}\n\t}\n\n\t#openRealization(paymentId: number): void\n\t{\n\t\tconst control = BX.Crm.EntityEditor.getDefault().getControlByIdRecursive('OPPORTUNITY_WITH_CURRENCY');\n\t\tif (!control)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst paymentDocumentsControl = control.getPaymentDocumentsControl();\n\t\tif (!paymentDocumentsControl)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tpaymentDocumentsControl._createRealizationSlider({paymentId});\n\t}\n\n\tstatic isItemSupported(item: ConfigurableItem): boolean\n\t{\n\t\treturn (\n\t\t\titem.getType() === 'Payment'\n\t\t\t|| item.getType() === 'Activity:Payment'\n\t\t);\n\t}\n}\n","import 'ui.design-tokens';\nimport {Action} from '../../../action';\n\nexport default {\n\tprops: {\n\t\ttext: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\taction: Object,\n\t},\n\tmethods: {\n\t\texecuteAction(): void\n\t\t{\n\t\t\tif (this.action)\n\t\t\t{\n\t\t\t\tconst action = new Action(this.action);\n\t\t\t\taction.execute(this);\n\t\t\t}\n\t\t}\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<div class=\"crm-entity-stream-advice-list-btn-box\">\n\t\t\t<button\n\t\t\t\t@click=\"executeAction\"\n\t\t\t\tclass=\"crm-entity-stream-advice-list-btn\"\n\t\t\t>\n\t\t\t\t{{text}}\n\t\t\t</button>\n\t\t</div>\n\t`\n}\n","import 'ui.design-tokens';\nimport Link from '../link';\nimport Text from '../text';\nimport ListItemButton from './list-item-button';\n\nexport default {\n\tprops: {\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\ttitleAction: Object,\n\t\tisSelected: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: false,\n\t\t},\n\t\timage: String,\n\t\tshowDummyImage: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: true,\n\t\t},\n\t\tbottomBlock: Object,\n\t\tbutton: Object,\n\t},\n\tcomponents: {\n\t\tText,\n\t\tLink,\n\t\tListItemButton,\n\t},\n\tcomputed: {\n\t\timageStyle()\n\t\t{\n\t\t\tif (!this.image)\n\t\t\t{\n\t\t\t\treturn {};\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tbackgroundImage: 'url(' + this.image + ')'\n\t\t\t};\n\t\t},\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<li\n\t\t\t:class=\"{'crm-entity-stream-advice-list-item--active': isSelected}\"\n\t\t\tclass=\"crm-entity-stream-advice-list-item\"\n\t\t>\n\t\t\t<div class=\"crm-entity-stream-advice-list-content\">\n\t\t\t\t<div\n\t\t\t\t\tv-if=\"image || showDummyImage\"\n\t\t\t\t\t:style=\"imageStyle\"\n\t\t\t\t\tclass=\"crm-entity-stream-advice-list-icon\"\n\t\t\t\t>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"crm-entity-stream-advice-list-inner\">\n\t\t\t\t\t<Link v-if=\"titleAction\" :action=\"titleAction\" :text=\"title\"></Link>\n\t\t\t\t\t<Text v-else :value=\"title\"></Text>\n\t\t\t\t\t<div v-if=\"bottomBlock\" class=\"crm-entity-stream-advice-list-desc-box\">\n\t\t\t\t\t\t<LineOfTextBlocks v-bind=\"bottomBlock.properties\"></LineOfTextBlocks>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<ListItemButton v-if=\"button\" v-bind=\"button.properties\"></ListItemButton>\n\t\t</li>\n\t`\n}\n","import ListItem from './list-item';\n\nexport default {\n\tprops: {\n\t\tlistItems: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t\tdefault: [],\n\t\t},\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t},\n\t\tshowMoreEnabled: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t\tshowMoreCnt: {\n\t\t\ttype: Number,\n\t\t\trequired: false,\n\t\t},\n\t\tshowMoreText: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t},\n\t},\n\n\tdata()\n\t{\n\t\treturn {\n\t\t\tisShortList: this.showMoreEnabled,\n\t\t\tshortListItemsCnt: this.showMoreCnt,\n\t\t};\n\t},\n\tcomponents: {\n\t\tListItem,\n\t},\n\tmethods: {\n\t\tshowMore()\n\t\t{\n\t\t\tthis.isShortList = false;\n\t\t},\n\t\tisItemVisible(index)\n\t\t{\n\t\t\treturn !this.isShortList || index < this.showMoreCnt;\n\t\t},\n\t},\n\tcomputed: {\n\t\tisShowMoreVisible()\n\t\t{\n\t\t\treturn this.isShortList && this.listItems.length > this.shortListItemsCnt;\n\t\t},\n\t\tcnt()\n\t\t{\n\t\t\treturn this.listItems.length;\n\t\t},\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<div>\n\t\t\t<div v-if=\"title\" class=\"crm-entity-stream-advice-title\">\n\t\t\t\t{{title}}\n\t\t\t</div>\n\t\t\t<transition-group class=\"crm-entity-stream-advice-list\" name=\"list\" tag=\"ul\">\n\t\t\t\t<ListItem\n\t\t\t\t\tv-for=\"(item, index) in listItems\"\n\t\t\t\t\tv-show=\"isItemVisible(index)\"\n\t\t\t\t\t:key=\"item.id\"\n\t\t\t\t\tv-bind=\"item.properties\"\n\t\t\t\t></ListItem>\n\t\t\t</transition-group>\n\t\t\t<a\n\t\t\t\tv-if=\"isShowMoreVisible\"\n\t\t\t\t@click.prevent=\"showMore\"\n\t\t\t\tclass=\"crm-entity-stream-advice-link\"\n\t\t\t\thref=\"#\"\n\t\t\t>\n\t\t\t\t{{showMoreText}} ({{cnt}})\n\t\t\t</a>\n\t\t</div>\n\t`\n}\n","import ConfigurableItem from '../configurable-item';\nimport type {ActionParams} from './base';\nimport {BaseEvent, EventEmitter} from 'main.core.events';\nimport {UI} from 'ui.notification';\nimport {ajax as Ajax, Loc} from 'main.core';\nimport {ActionAnimationCallbacks, Base} from './base';\nimport ExpandableList from '../components/content-blocks/expandable-list/list';\n\nexport class DealProductList extends Base\n{\n\t#item: ConfigurableItem = null;\n\t#productsGrid: Object = null;\n\n\tgetContentBlockComponents(Item: ConfigurableItem): Object\n\t{\n\t\treturn {\n\t\t\tExpandableList,\n\t\t};\n\t}\n\n\tonInitialize(item: ConfigurableItem): void\n\t{\n\t\tthis.#item = item;\n\n\t\tEventEmitter.subscribe('onCrmEntityUpdate', () => {\n\t\t\tthis.#item.reloadFromServer();\n\t\t});\n\n\t\t/**\n\t\t * For cases when timeline block controller initialization runs after product grid initialization\n\t\t */\n\t\tBX.Crm.EntityEditor.getDefault().tapController('PRODUCT_LIST', (controller) => {\n\t\t\tthis.#productsGrid = controller.getProductList();\n\t\t});\n\n\t\t/**\n\t\t * For cases when timeline block controller initialization runs before product grid initialization\n\t\t */\n\t\tEventEmitter.subscribe('EntityProductListController', (event) => {\n\t\t\tthis.#productsGrid = event.getData()[0];\n\t\t});\n\t}\n\n\tonItemAction(item: ConfigurableItem, actionParams: ActionParams): void\n\t{\n\t\tconst {action, actionType, actionData, animationCallbacks} = actionParams;\n\t\tif (actionType !== 'jsEvent')\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (action === 'ProductList:AddToDeal')\n\t\t{\n\t\t\tthis.#addProductToDeal(actionData, animationCallbacks);\n\t\t}\n\t}\n\n\tstatic isItemSupported(item: ConfigurableItem): boolean\n\t{\n\t\treturn (\n\t\t\titem.getType() === 'ProductCompilation:SentToClient'\n\t\t\t|| item.getType() === 'Order:EncourageBuyProducts'\n\t\t);\n\t}\n\n\t#addProductToDeal(actionData: ?Object, animationCallbacks: ?ActionAnimationCallbacks): void\n\t{\n\t\tif (\n\t\t\t!(\n\t\t\t\tactionData\n\t\t\t\t&& actionData.dealId\n\t\t\t\t&& actionData.productId\n\t\t\t)\n\t\t) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (animationCallbacks.onStart)\n\t\t{\n\t\t\tanimationCallbacks.onStart();\n\t\t}\n\n\t\tAjax.runAction(\n\t\t\t'crm.timeline.dealproduct.addtodeal',\n\t\t\t{\n\t\t\t\tdata: {\n\t\t\t\t\tdealId: actionData.dealId,\n\t\t\t\t\tproductId: actionData.productId,\n\t\t\t\t\toptions: actionData.options || {},\n\t\t\t\t}\n\t\t\t}\n\t\t).then(() => {\n\t\t\tBX.Crm.EntityEditor.getDefault().reload();\n\t\t\tif (this.#productsGrid)\n\t\t\t{\n\t\t\t\tthis.#productsGrid.reloadGrid(false);\n\t\t\t}\n\n\t\t\tUI.Notification.Center.notify({\n\t\t\t\tcontent: Loc.getMessage('CRM_TIMELINE_ENCOURAGE_BUY_PRODUCTS_PRODUCTS_ADDED_TO_DEAL'),\n\t\t\t\tactions: [\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: Loc.getMessage('CRM_TIMELINE_ENCOURAGE_BUY_PRODUCTS_EDIT_PRODUCTS'),\n\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\tclick: (event, balloon, action) => {\n\t\t\t\t\t\t\t\tBX.onCustomEvent(window, 'OpenEntityDetailTab', ['tab_products']);\n\t\t\t\t\t\t\t\tballoon.close();\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\tautoHideDelay: 5000,\n\t\t\t});\n\n\t\t\tthis.#item.reloadFromServer().then(() => {\n\t\t\t\tif (animationCallbacks.onStop)\n\t\t\t\t{\n\t\t\t\t\tanimationCallbacks.onStop();\n\t\t\t\t}\n\t\t\t});\n\t\t}, response => {\n\t\t\tif (animationCallbacks.onStop)\n\t\t\t{\n\t\t\t\tanimationCallbacks.onStop();\n\t\t\t}\n\n\t\t\treturn true;\n\t\t});\n\t}\n}\n","import ConfigurableItem from '../configurable-item';\nimport {type ActionParams, Base} from './base';\nimport {Router} from 'crm.router';\n\nexport class OrderCheck extends Base\n{\n\tonItemAction(item: ConfigurableItem, actionParams: ActionParams): void\n\t{\n\t\tconst {action, actionType, actionData} = actionParams;\n\t\tif (actionType !== 'jsEvent')\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (action === 'OrderCheck:OpenCheck' && actionData && actionData.checkUrl)\n\t\t{\n\t\t\tRouter.openSlider(\n\t\t\t\tactionData.checkUrl,\n\t\t\t\t{\n\t\t\t\t\twidth: 500,\n\t\t\t\t\tcacheable : false,\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t}\n\n\tstatic isItemSupported(item: ConfigurableItem): boolean\n\t{\n\t\treturn (\n\t\t\titem.getType() === 'OrderCheckPrinted'\n\t\t\t|| item.getType() === 'OrderCheckNotPrinted'\n\t\t\t|| item.getType() === 'OrderCheckSent'\n\t\t);\n\t}\n}\n","import {Base} from './base';\nimport ConfigurableItem from '../configurable-item';\nimport {Type} from 'main.core';\n\nexport class SalescenterApp extends Base\n{\n\tstatic isItemSupported(item: ConfigurableItem): boolean\n\t{\n\t\tconst supportedItemTypes = [\n\t\t\t'Activity:Sms',\n\t\t\t'Activity:Notification',\n\t\t\t'Activity:Payment',\n\t\t\t'PaymentViewed',\n\t\t\t'PaymentNotViewed',\n\t\t\t'PaymentSent',\n\t\t\t'PaymentPaid',\n\t\t\t'PaymentNotPaid',\n\t\t\t'PaymentError',\n\t\t\t'Activity:Delivery',\n\t\t];\n\n\t\treturn supportedItemTypes.includes(item.getType());\n\t}\n\n\tonItemAction(item: ConfigurableItem, actionParams: ActionParams): void\n\t{\n\t\tconst {action, actionType, actionData, animationCallbacks} = actionParams;\n\n\t\tif (actionType !== 'jsEvent')\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (action === 'SalescenterApp:Start' && actionData)\n\t\t{\n\t\t\tthis.#startSalescenterApp(actionData);\n\t\t}\n\t}\n\n\t#startSalescenterApp(actionData): void\n\t{\n\t\tif (\n\t\t\t! (\n\t\t\t\tType.isInteger(actionData.ownerTypeId)\n\t\t\t\t&& Type.isInteger(actionData.ownerId)\n\t\t\t\t&& Type.isInteger(actionData.orderId)\n\t\t\t\t&& Type.isStringFilled(actionData.mode)\n\t\t\t)\n\t\t)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tBX.loadExt('salescenter.manager').then(() => {\n\t\t\tconst params = {\n\t\t\t\townerTypeId: actionData.ownerTypeId,\n\t\t\t\townerId: actionData.ownerId,\n\t\t\t\torderId: actionData.orderId,\n\t\t\t\tmode: actionData.mode,\n\t\t\t\tdisableSendButton: '',\n\t\t\t\tcontext: 'deal',\n\t\t\t\ttemplateMode: 'view',\n\t\t\t};\n\n\t\t\tif (Type.isInteger(actionData.paymentId))\n\t\t\t{\n\t\t\t\tparams.paymentId = actionData.paymentId;\n\t\t\t}\n\n\t\t\tif (Type.isInteger(actionData.shipmentId))\n\t\t\t{\n\t\t\t\tparams.shipmentId = actionData.shipmentId;\n\t\t\t}\n\n\t\t\tif (Type.isStringFilled(actionData.analyticsLabel))\n\t\t\t{\n\t\t\t\tparams.analyticsLabel = actionData.analyticsLabel;\n\t\t\t}\n\n\t\t\tBX.Salescenter.Manager.openApplication(params);\n\t\t});\n\t}\n}\n","import {TimelineSummaryDocuments} from 'crm.entity-editor.field.payment-documents';\n\nexport const EcommerceDocumentsList = {\n\tprops: {\n\t\townerId: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\townerTypeId: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\tisWithOrdersMode: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t\tsummaryOptions: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t}\n\t},\n\tmounted()\n\t{\n\t\tconst timelineSummaryDocuments = new TimelineSummaryDocuments({\n\t\t\t'OWNER_ID': this.ownerId,\n\t\t\t'OWNER_TYPE_ID': this.ownerTypeId,\n\t\t\t'PARENT_CONTEXT': this,\n\t\t\t'CONTEXT': BX.CrmEntityType.resolveName(this.ownerTypeId).toLowerCase(),\n\t\t\t'IS_WITH_ORDERS_MODE': this.isWithOrdersMode,\n\t\t});\n\t\ttimelineSummaryDocuments.setOptions(this.summaryOptions);\n\n\t\tthis.$el.appendChild(\n\t\t\ttimelineSummaryDocuments.render()\n\t\t);\n\t},\n\tmethods:\n\t{\n\t\tstartSalescenterApplication(orderId, options)\n\t\t{\n\t\t\tif (options === undefined)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tBX.loadExt('salescenter.manager').then(() => {\n\t\t\t\tBX.Salescenter.Manager.openApplication(options);\n\t\t\t});\n\t\t},\n\t},\n\ttemplate: `<div></div>`\n}\n","import {Base} from './base';\nimport ConfigurableItem from '../configurable-item';\nimport {EventEmitter} from 'main.core.events';\nimport {EcommerceDocumentsList} from '../components/content-blocks/ecommerce-documents-list';\n\nexport class FinalSummary extends Base\n{\n\tonAfterItemLayout(item: ConfigurableItem, options): void\n\t{\n\t\tif (item.needBindToContainer())\n\t\t{\n\t\t\tEventEmitter.emit(\n\t\t\t\t'BX.Crm.Timeline.Items.FinalSummaryDocuments:onHistoryNodeAdded',\n\t\t\t\t[item.getWrapper()]\n\t\t\t);\n\t\t}\n\t}\n\n\tgetContentBlockComponents(Item: ConfigurableItem): Object\n\t{\n\t\treturn {\n\t\t\tEcommerceDocumentsList,\n\t\t};\n\t}\n\n\tstatic isItemSupported(item: ConfigurableItem): boolean\n\t{\n\t\treturn item.getType() === 'FinalSummary';\n\t}\n}\n","import ControllerManager from './controller-manager';\n\nimport {Activity} from './controllers/activity';\nimport {CommonContentBlocks} from './controllers/common-content-blocks';\nimport {Modification} from './controllers/modification';\nimport {OpenLines} from './controllers/openlines';\nimport {SignDocument} from './controllers/sign-document';\nimport {Document} from './controllers/document';\nimport {Call} from './controllers/call';\nimport {ToDo} from './controllers/todo';\nimport {Helpdesk} from './controllers/helpdesk';\nimport {Sms} from './controllers/sms';\nimport {Payment} from './controllers/payment';\nimport {DealProductList} from './controllers/deal-product-list';\nimport {OrderCheck} from './controllers/order-check';\nimport {SalescenterApp} from './controllers/salescenter-app';\nimport {FinalSummary} from './controllers/finalsummary';\n\nControllerManager.registerController(Activity);\nControllerManager.registerController(CommonContentBlocks);\nControllerManager.registerController(OpenLines);\nControllerManager.registerController(Modification);\nControllerManager.registerController(SignDocument);\nControllerManager.registerController(Document);\nControllerManager.registerController(Call);\nControllerManager.registerController(ToDo);\nControllerManager.registerController(Helpdesk);\nControllerManager.registerController(Sms);\nControllerManager.registerController(Payment);\nControllerManager.registerController(DealProductList);\nControllerManager.registerController(OrderCheck);\nControllerManager.registerController(FinalSummary);\nControllerManager.registerController(SalescenterApp);\n"],"names":["Item","_id","_isTerminated","_wrapper","id","BX","type","isNotEmptyString","util","getRandomString","data","Error","options","anchor","previousSibling","clearLayout","layout","Dom","remove","undefined","wrapper","className","timeout","addClass","Type","isNumber","window","setTimeout","removeWrapperClass","bind","removeClass","addWrapperClass","terminated","IconBackgroundColor","Icon","props","code","String","required","default","counterType","backgroundColorToken","PRIMARY","inject","computed","isLogMessage","counterNodeContainer","$refs","counter","methods","renderCounter","clean","Counter","value","border","color","Color","toUpperCase","renderTo","mounted","watch","newCounterType","$nextTick","template","Menu","vueComponent","menuItems","menuOptions","angle","cacheable","items","item","push","createMenuItem","MenuManager","show","hasOwnProperty","delimiter","text","title","result","icon","menu","subItem","Object","values","action","href","onclick","onMenuItemClick","getCurrentMenu","close","Action","execute","AnimationTarget","block","AnimationType","disable","loader","ActionType","JS_EVENT","AJAX_ACTION","STARTED","FINISHED","FAILED","isJsEvent","isAjaxAction","freeze","params","actionParams","isPlainObject","animation","Promise","resolve","reject","$Bitrix","eventEmitter","emit","actionType","actionData","animationCallbacks","onStart","onStop","isJsCode","eval","ajax","runAction","then","response","UI","Notification","Center","notify","content","errors","message","autoHideDelay","isCallRestBatch","Rest","callBatch","restResult","answer","error","error_description","isRedirect","target","open","location","isShowMenu","showMenu","bindElement","$el","minWidth","offsetWidth","isUndefined","paramName","paramValue","isDate","DateTimeFormat","format","DatetimeConverter","getSiteDateTimeFormat","method","filter","state","scope","isReadOnly","hideIfReadonly","sort","a","b","$root","setFaded","showLoader","isFunction","setDisabled","setLoading","forever","ChangeStreamButton","disableIfReadonly","Boolean","isReadonlyMode","isShowPinButton","isShowUnpinButton","executeAction","onClick","disabled","isReadonly","Title","getValue","TagType","Tag","hint","SECONDARY","tagTypeToLabelColorDict","Label","LIGHT_BLUE","LIGHT","SUCCESS","LIGHT_GREEN","WARNING","LIGHT_YELLOW","FAILURE","LIGHT_RED","tagContainerRef","tag","getLabelColorFromTagType","tagType","lowerCaseTagType","toLowerCase","labelColor","renderTag","tagOptions","uppercaseTitle","isString","label","fill","append","render","updated","User","detailUrl","imageUrl","styles","backgroundImage","encodeURI","Text","encode","backgroundSize","FormatDate","name","timestamp","Number","datePlaceholder","useShortTimeFormat","class","Array","formattedDate","converter","createFromServerTimestamp","toUserTime","toTimeString","toDatetimeString","Hint","isMouseOnHintArea","hintPopup","textBlocks","hintContentIcon","iconElement","create","attrs","classname","hintContentIconClassname","children","hintContentText","hintContentTextBlocks","map","getContentBlockNode","baseClassname","hintIconClassname","hasContent","length","getHintContent","style","display","getPopupOptions","darkMode","autoHide","maxWidth","bindOptions","position","getPopupPosition","hintElem","defaultAngleLeftOffset","Popup","getOption","width","hintWidth","left","hintLeftOffset","top","hintTopOffset","getPosition","popupWidth","getPopupContainer","getPopupAngleOffset","popupContainer","angleWidth","onMouseEnterToPopup","onHintAreaMouseLeave","hideHintPopup","onMouseEnterToHint","showHintPopupWithDebounce","showHintPopup","isShown","Event","setBindElement","setAngle","offset","adjustPosition","Runtime","debounce","unbind","destroy","hideHintPopupWithDebounce","contentBlock","getTextNode","getLinkNode","textOptions","linkOptions","link","actionObj","Header","components","titleAction","date","changeStreamButton","tags","user","infoHelper","visibleTags","isVisibleTagFilter","visibleAndAscSortedTags","tagsCopy","clone","tagsAscSorter","isShowDate","tagA","tagB","getChangeStreamButton","Logo","addIcon","addIconType","iconType","backgroundUrl","inCircle","currentIcon","iconClassname","addIconClassname","iconInteriorStyle","newIcon","setIcon","CalendarIcon","userTime","month","dayWeek","time","LogoCalendar","BitrixVue","cloneComponent","Body","logo","blocks","blockRefs","visibleBlocks","forEach","index","isDomNode","setAttribute","rendererName","beforeUpdate","keys","aSort","bSort","contentContainerClassname","getContentBlockById","blockId","getLogo","saveRef","ref","ButtonState","BaseButton","DEFAULT","currentState","itemStateToButtonStateDict","LOADING","UIButton","State","WAITING","DISABLED","setButtonState","loading","onLayoutUpdated","created","subscribe","beforeDestroy","unsubscribe","AdditionalButtonIcon","NOTE","SCRIPT","PRINT","DOTS","AdditionalButtonColor","AdditionalButton","iconName","validator","indexOf","loaderHtml","Loader","mode","size","outerHTML","MenuId","buttons","itemsArray","buttonProps","beforeUnmount","getMenuById","LayoutMenu","ButtonType","Button","popup","uiButton","timerSecondsRemaining","buttonOptions","upperCaseIconName","upperCaseButtonSize","itemTypeToButtonColorDict","LIGHT_BORDER","ICON","round","dependOnTheme","Size","LINK","buttonContainerRef","buttonContainer","getUiButton","disableWithTimer","sec","btn","remainingSeconds","setText","formatSeconds","timer","setInterval","clearInterval","minutes","Math","floor","seconds","formatMinutes","formatNumber","num","parentSetButtonState","setState","renderButton","innerHTML","button","newValue","Buttons","getButtonById","buttonId","reduce","found","ButtonScope","Footer","additionalButtons","maxBaseButtonsCount","containerClassname","baseButtons","visibleAndSortedButtons","slice","moreButtons","visibleButtons","buttonsSorter","visibleAndSortedAdditionalButtons","visibleAdditionalButtons","visibleButtonsFilter","additionalButtonsArray","entries","hasMenu","buttonItem","HIDDEN","MOBILE","buttonA","buttonB","foundButton","MarketPanel","detailsText","detailsTextAction","needShowDetailsText","isStringFilled","UserPick","StreamType","history","scheduled","pinned","initialLayout","currentUser","onAction","Function","streamType","isFaded","provide","onActionEvent","event","eventData","getData","setLayout","newLayout","faded","parentNode","hide","body","getHeaderChangeStreamButton","header","getFooterButtonById","footer","highlightContentBlockById","isHighlighted","timelineCardClassname","Layout","menuItem","Base","ControllerManager","foundControllers","controller","getRegisteredControllers","isItemSupported","controllerInstance","onInitialize","timelineId","ConfigurableItem","settings","_setId","setContainer","container","itemClassName","setData","ownerTypeId","ownerId","getInstance","getItemControllers","payload","setWrapper","needBindToContainer","bindTo","getBindToNode","nextSibling","insertBefore","getWrapper","onAfterItemLayout","prop","getBoolean","isElementNode","getLayout","asPlainObject","onAfterItemRefreshLayout","onBeforeItemClearLayout","unmount","Date","now","extractDate","getId","isInteger","toInteger","replace","getContainer","historyIds","activityIds","refreshLayout","catch","err","console","self","initialize","TimelineItem","createApp","contentBlockComponents","componentName","component","mount","getCurrentUser","_classPrivateMethodGet","onItemAction","assign","getContentBlockComponents","Activity","activityId","confirmationText","MessageBox","modal","MessageBoxButtons","YES_NO","onYes","onNo","messageBox","itemType","getType","editor","viewActivity","editActivity","Ajax","CrmActivityEditor","getDefault","TextColor","TextWeight","TextSize","weight","multiline","colorClassname","weightClassname","sizeClassname","upperCaseColorProp","upperCaseWeightProp","NORMAL","SM","encodedText","bold","withTime","extends","dateInUserTimezone","CoreTextHelper","toFormatString","toDateString","inline","isTitleCropped","titleElem","scrollWidth","clientWidth","attr","LogoType","defaultPlaybackRateValues","TimelineAudio","AudioPlayer","playbackRateValues","isShowPlaybackRateMenu","parentData","playbackRate","isSeeking","isDark","isMobile","controlClassname","play","timeCurrentClassname","totalTimeClassname","progressPosition","progressInPixel","seekPosition","minSeekWidth","seekWidth","seek","formatTimeCurrent","formatTime","timeCurrent","formatTimeTotal","timeTotal","playbackRateMenuItems","rate","createPlaybackRateMenuItem","getPlaybackRateOptionText","isActive","changePlaybackRate","source","menuWindow","popupWindow","isFloat","showPlaybackRateMenu","playbackRateButtonContainer","events","onPopupShow","btnContainerWidth","getPopupWindow","setOffset","offsetLeft","n","startSeeking","clientX","pause","document","finishSeeking","seeking","setSeekByCursor","timeline","track","right","setPosition","preventDefault","x","loaded","loadFile","pixelPerPercent","setProgress","currentTime","progress","changeLogoIcon","$parent","audioEventRouterWrapper","eventName","audioEventRouter","CALL_AUDIO_PAUSE","CALL_AUDIO_PLAY","ClientMark","mark","ClientMarkType","POSITIVE","NEUTRAL","NEGATIVE","opportunity","currencyId","CurrencyCore","currencyFormat","isEdit","currentValue","initialValue","actionTimeoutId","textProps","$props","enableEdit","cancelScheduledActionExecution","input","focus","disableEdit","scheduleActionExecution","clearTimeout","actionDescription","EditableDescription","saveAction","oldValue","isSaving","isLongText","isCollapsed","saveTextButtonProps","saveTextButtonState","Loc","getMessage","cancelEditingButtonProps","trimValue","trim","expandButtonText","startEditing","textarea","adjustHeight","emitEvent","elem","height","scrollHeight","onPressEnter","ctrlKey","Browser","isMac","metaKey","altKey","saveText","encodedTrimText","executeSaveAction","checkIsLongText","finally","cancelEditing","clearText","toggleIsCollapsed","textBlock","textBlockMaxHeightStyle","getComputedStyle","getPropertyValue","textBlockMaxHeight","parseFloat","rootElement","offsetHeight","newTextValue","Link","currentDate","initialDate","currentDateObject","currentDateInSiteFormat","getSiteDateFormat","openCalendar","calendar","node","bTime","bHideTime","bSetFocus","callback_after","newDate","getTime","PlayerAlert","LineOfTextBlocks","AlertColor","AlertIcon","NONE","Note","deleteConfirmationText","saveNoteAction","deleteNoteAction","updatedBy","note","oldNote","isExist","isDeleting","isDeleteButtonVisible","isEditButtonVisible","saveButtonState","cancelButtonState","isNoteVisible","noteText","setEditMode","editMode","onEnterHandle","saveNote","deleteNote","executeDeleteAction","status","actionObject","DatePillColor","backgroundColor","includes","currentTimestamp","initialTimestamp","isPillReadonly","withDayOfWeek","calendarParams","TimestampConverter","userToBrowser","MoneyPill","moneyHtml","InfoGroup","attributes","fileExtension","split","fileIcon","FileIcon","FileList","File","numberOfFiles","files","updateParams","titleClassName","isEditable","fileListTitleText","fileProps","file","viewUrl","showFileUploaderPopup","FileUploaderPopup","CommonContentBlocks","TextBlock","LinkBlock","DateBlock","WithTitle","Money","EditableText","EditableDate","DatePill","tabId","onCustomEvent","getLayoutContentBlockById","from","to","iconCode","pillText","iconClassName","Modification","ValueChange","ValueChangeItem","messageHtml","isIncoming","OpenLines","ChatMessage","dialogId","openMessengerSlider","RECENT","MENU","SignDocument","documentId","documentHash","recipientHash","getLayoutFooterButtonById","entryId","log","memberHash","Router","Instance","openSignDocumentSlider","openSignDocumentModifySlider","valueInSiteFormat","activityDeadline","responseWithError","newCreateDate","createElement","appendChild","click","removeChild","ACTION_NAMESPACE","Document","itemsToPrint","_classStaticPrivateFieldSpecGet","candidate","extra","isPrintEvent","printUrl","remainingItem","publicUrl","pdfUrl","docxUrl","infoHelperCode","info","openDocumentSlider","alert","isSuccess","clipboard","copy","analyticsLabel","DocumentTitle","newTitle","DocumentCreateTime","isNil","SMART_DOCUMENT","wizardUri","Uri","setQueryParams","docId","stepId","noRedirect","SidePanel","toString","convertDealAndStartSign","usePrevious","ID","TITLE","CREATED_AT","INITIATOR","InfoHelper","PopupWindow","zIndex","closeByEsc","closeIcon","overlay","onPopupClose","titleBar","contentColor","Call","scheduleDate","callId","recordId","url","phone","ENTITY_TYPE_NAME","CrmEntityType","resolveName","entityTypeId","ENTITY_ID","entityId","AUTO_FOLD","BINDINGS","OWNER_TYPE_NAME","OWNER_ID","SRC_ACTIVITY_ID","phoneTo","CrmTimelineManager","menuBar","getMenuBar","getActiveItem","scrollIntoView","behavior","setActiveItemById","todoEditor","getTodoEditor","setFocused","setParentActivityId","setDeadLine","Voximplant","Transcript","player","ToDo","isValidParams","fileList","Helpdesk","articleCode","Helper","SmsMessage","htmlspecialchars","Sms","dataPayload","getDataPayload","pull","PULL","moduleId","command","callback","messages","reloadFromServer","extendWatch","tagName","isArray","Payment","paymentId","control","Crm","EntityEditor","getControlByIdRecursive","paymentDocumentsControl","getPaymentDocumentsControl","_createRealizationSlider","isSelected","image","showDummyImage","bottomBlock","ListItemButton","imageStyle","listItems","showMoreEnabled","showMoreCnt","showMoreText","isShortList","shortListItemsCnt","ListItem","showMore","isItemVisible","isShowMoreVisible","cnt","DealProductList","ExpandableList","EventEmitter","tapController","getProductList","dealId","productId","reload","reloadGrid","actions","balloon","OrderCheck","checkUrl","openSlider","SalescenterApp","supportedItemTypes","orderId","loadExt","disableSendButton","context","templateMode","shipmentId","Salescenter","Manager","openApplication","EcommerceDocumentsList","isWithOrdersMode","summaryOptions","timelineSummaryDocuments","TimelineSummaryDocuments","setOptions","startSalescenterApplication","FinalSummary","registerController"],"mappings":"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"}