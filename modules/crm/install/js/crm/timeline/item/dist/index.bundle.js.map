{"version":3,"file":"index.bundle.js","sources":["../src/item.js","../src/components/enums/icon-background-color.js","../src/components/layout/icon.js","../src/components/layout/menu.js","../src/action.js","../src/components/layout/header/change-stream-button.js","../src/components/layout/header/title.js","../src/components/enums/tag-type.js","../src/components/layout/header/tag.js","../src/components/layout/header/user.js","../src/components/layout/header/format-date.js","../src/components/layout/header.js","../src/components/layout/body/logo.js","../src/components/layout/body/calendar-icon.js","../src/components/layout/body/logo-calendar.js","../src/components/layout/body.js","../src/components/layout/footer/menu.js","../src/components/enums/button-type.js","../src/components/enums/button-state.js","../src/components/layout/button.js","../src/components/layout/footer/buttons.js","../src/components/enums/button-scope.js","../src/components/layout/footer.js","../src/components/layout/marketPanel.js","../src/components/layout/note.js","../src/components/layout/userPick.js","../src/stream-type.js","../src/components/item.js","../src/layout.js","../src/controller-manager.js","../src/configurable-item.js","../src/controllers/base.js","../src/controllers/activity.js","../src/components/enums/text-color.js","../src/components/enums/text-weight.js","../src/components/enums/text-size.js","../src/components/content-blocks/text.js","../src/components/content-blocks/link.js","../src/components/content-blocks/with-title.js","../src/components/content-blocks/line-of-text-blocks.js","../src/components/content-blocks/timeline-audio.js","../src/components/enums/client-mark.js","../src/components/content-blocks/client-mark.js","../src/components/content-blocks/money.js","../src/components/content-blocks/editable-text.js","../src/components/content-blocks/editable-date.js","../src/components/content-blocks/player-alert.js","../src/components/content-blocks/date-pill.js","../src/controllers/common-content-blocks.js","../src/components/content-blocks/value-change.js","../src/controllers/modification.js","../src/components/content-blocks/chat-message.js","../src/controllers/openlines.js","../src/controllers/sign-document.js","../src/controllers/document.js","../src/controllers/call.js","../src/controller-registry.js"],"sourcesContent":["import {Dom, Type} from 'main.core'\n\nexport default class Item\n{\n\tconstructor()\n\t{\n\t\tthis._id = '';\n\t\tthis._isTerminated = false;\n\t\tthis._wrapper = null;\n\t}\n\n\tgetId(): string\n\t{\n\t\treturn this._id;\n\t}\n\n\t_setId(id): void\n\t{\n\t\tthis._id = BX.type.isNotEmptyString(id) ? id : BX.util.getRandomString(4);\n\t}\n\n\t/**\n\t * @abstract\n\t */\n\tsetData(data): void\n\t{\n\t\tthrow new Error('Item.setData() must be overridden');\n\t}\n\n\t/**\n\t * @abstract\n\t */\n\tlayout(options): void\n\t{\n\t\tthrow new Error('Item.layout() must be overridden');\n\t}\n\n\trefreshLayout()\n\t{\n\t\tconst anchor = this._wrapper.previousSibling;\n\t\tthis.clearLayout();\n\n\t\tthis.layout({ anchor: anchor });\n\t}\n\n\tclearLayout()\n\t{\n\t\tDom.remove(this._wrapper);\n\t\tthis._wrapper = undefined;\n\t}\n\n\tdestroy()\n\t{\n\t\tthis.clearLayout();\n\t}\n\n\tgetWrapper(): ?HTMLElement\n\t{\n\t\treturn this._wrapper;\n\t}\n\n\tsetWrapper(wrapper: HTMLElement): void\n\t{\n\t\tthis._wrapper = wrapper;\n\t}\n\n\taddWrapperClass(className, timeout): void\n\t{\n\t\tif(!this._wrapper)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tDom.addClass(this._wrapper, className);\n\n\t\tif(Type.isNumber(timeout) && timeout >= 0)\n\t\t{\n\t\t\twindow.setTimeout(this.removeWrapperClass.bind(this, className), timeout);\n\t\t}\n\t}\n\n\tremoveWrapperClass(className, timeout): void\n\t{\n\t\tif(!this._wrapper)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tDom.removeClass(this._wrapper, className);\n\t\tif(Type.isNumber(timeout) && timeout >= 0)\n\t\t{\n\t\t\twindow.setTimeout(this.addWrapperClass.bind(this, className), timeout);\n\t\t}\n\t}\n\n\tisTerminated(): boolean\n\t{\n\t\treturn this._isTerminated;\n\t}\n\n\tmarkAsTerminated(terminated): void\n\t{\n\t\tterminated = !!terminated;\n\n\t\tif (this._isTerminated === terminated)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis._isTerminated = terminated;\n\t\tif (!this._wrapper)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (terminated)\n\t\t{\n\t\t\tDom.addClass(this._wrapper, 'crm-entity-stream-section-last');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.removeClass(this._wrapper, 'crm-entity-stream-section-last');\n\t\t}\n\t}\n\n\tgetAssociatedEntityTypeId(): ?Number\n\t{\n\t\treturn null;\n\t}\n\n\tgetAssociatedEntityId(): ?Number\n\t{\n\t\treturn null;\n\t}\n\n}\n","export class IconBackgroundColor {\n\tstatic PRIMARY = 'primary';\n\tstatic PRIMARY_ALT = 'primary_alt';\n\tstatic FAILURE = 'failure';\n}","\nimport { IconBackgroundColor } from '../enums/icon-background-color';\nimport { Counter } from 'ui.cnt';\n\nexport const Icon = {\n\tprops: {\n\t\tcode: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: 'none',\n\t\t},\n\t\tcounterType: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t},\n\t\tbackgroundColorToken: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: IconBackgroundColor.PRIMARY,\n\t\t},\n\t},\n\tinject: ['isLogMessage'],\n\tcomputed: {\n\t\tclassName() {\n\t\t\treturn {\n\t\t\t\t'crm-timeline__card_icon': true,\n\t\t\t\t[`--bg-${this.backgroundColorToken}`]: !!this.backgroundColorToken,\n\t\t\t\t[`--code-${this.code}`]: !!this.code,\n\t\t\t\t['--muted']: this.isLogMessage,\n\t\t\t}\n\t\t},\n\n\t\tcounterNodeContainer() {\n\t\t\treturn this.$refs.counter;\n\t\t},\n\t},\n\n\tmethods: {\n\t\trenderCounter() {\n\t\t\tif (!this.counterType) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst counter = new Counter({\n\t\t\t\tvalue: 1,\n\t\t\t\tborder: true,\n\t\t\t\tcolor: Counter.Color[this.counterType.toUpperCase()],\n\t\t\t});\n\t\t\tcounter.renderTo(this.counterNodeContainer);\n\t\t},\n\t},\n\tmounted() {\n\t\tthis.renderCounter();\n\t},\n\ttemplate: `\n\t\t<div :class=\"className\">\n\t\t\t<i></i>\n\t\t\t<div ref=\"counter\" v-show=\"!!counterType\" class=\"crm-timeline__card_icon_counter\"></div>\n\t\t</div>\n\t`\n};\n","import {MenuManager} from \"main.popup\";\nimport {Action} from \"../../action\";\n\nexport class Menu\n{\n\t#menuOptions = {};\n\t#vueComponent = {};\n\n\tconstructor(vueComponent: Object, menuItems: Array, menuOptions: ?Object)\n\t{\n\t\tthis.#vueComponent = vueComponent;\n\t\tthis.#menuOptions = menuOptions || {};\n\t\tthis.#menuOptions = {\n\t\t\tangle: false,\n\t\t\tcacheable: false,\n\t\t\t...this.#menuOptions\n\t\t};\n\n\t\tthis.#menuOptions.items = [];\n\t\tfor (const item of menuItems)\n\t\t{\n\t\t\tthis.#menuOptions.items.push(this.createMenuItem(item));\n\t\t}\n\t}\n\n\tshow(): void\n\t{\n\t\tMenuManager.show(this.#menuOptions);\n\t}\n\n\n\tcreateMenuItem(item): Object\n\t{\n\t\tif (item.hasOwnProperty('delimiter') && item.delimiter)\n\t\t{\n\t\t\treturn {\n\t\t\t\ttext: item.title || '',\n\t\t\t\tdelimiter: true\n\t\t\t};\n\t\t}\n\n\t\tconst result = {\n\t\t\ttext: item.title,\n\t\t\tvalue: item.title,\n\t\t};\n\n\t\tif (item.icon)\n\t\t{\n\t\t\tresult.className = 'menu-popup-item-' + item.icon;\n\t\t}\n\t\tif (item.menu)\n\t\t{\n\t\t\tresult.items = [];\n\t\t\tfor (const subItem of Object.values(item.menu.items || {}))\n\t\t\t{\n\t\t\t\tresult.items.push(this.createMenuItem(subItem));\n\t\t\t}\n\t\t}\n\t\telse if (item.action)\n\t\t{\n\t\t\tif (item.action.type === 'redirect')\n\t\t\t{\n\t\t\t\tresult.href = item.action.value;\n\t\t\t}\n\t\t\telse if (item.action.type === 'jsCode')\n\t\t\t{\n\t\t\t\tresult.onclick = item.action.value;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresult.onclick = () =>\n\t\t\t\t{\n\t\t\t\t\tthis.onMenuItemClick(item);\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tonMenuItemClick(item): void\n\t{\n\t\tconst menu = MenuManager.getCurrentMenu();\n\t\tif (menu)\n\t\t{\n\t\t\tmenu.close();\n\t\t}\n\n\t\t(new Action(item.action)).execute(this.#vueComponent);\n\t}\n\n\tstatic showMenu(vueComponent: Object, menuItems: Array, menuOptions: ?Object)\n\t{\n\t\tconst menu = new Menu(vueComponent, menuItems, menuOptions);\n\t\tmenu.show();\n\t}\n}","import {ajax} from 'main.core';\nimport {UI} from 'ui.notification';\nimport {Menu} from \"./components/layout/menu\";\n\nexport class Action\n{\n\t#type: string = null;\n\t#value: string | Object  = null;\n\t#actionParams: ?Object = null;\n\n\tconstructor(params)\n\t{\n\t\tthis.#type = params.type;\n\t\tthis.#value = params.value;\n\t\tthis.#actionParams = params.actionParams;\n\t}\n\n\texecute(vueComponent): void\n\t{\n\t\tif (this.isJsEvent())\n\t\t{\n\t\t\tvueComponent.$Bitrix.eventEmitter.emit('crm:timeline:item:action:' + this.#value, this.#actionParams);\n\t\t\tvueComponent.$Bitrix.eventEmitter.emit('crm:timeline:item:action', {\n\t\t\t\taction: this.#value,\n\t\t\t\tactionParams: this.#actionParams,\n\t\t\t});\n\t\t}\n\t\tif (this.isJsCode())\n\t\t{\n\t\t\teval(this.#value);\n\t\t}\n\t\tif (this.isAjaxAction())\n\t\t{\n\t\t\tajax.runAction(\n\t\t\t\tthis.#value,\n\t\t\t\t{\n\t\t\t\t\tdata: this.#actionParams,\n\t\t\t\t}\n\t\t\t).then(() =>\n\t\t\t{\n\t\t\t\t// do something\n\t\t\t}, (response) =>\n\t\t\t{\n\t\t\t\tUI.Notification.Center.notify({\n\t\t\t\t\tcontent: response.errors[0].message,\n\t\t\t\t\tautoHideDelay: 5000,\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t\tif (this.isRedirect())\n\t\t{\n\t\t\tlocation.href = this.#value;\n\t\t}\n\t\tif (this.isShowMenu())\n\t\t{\n\t\t\tMenu.showMenu(\n\t\t\t\tvueComponent,\n\t\t\t\tthis.#prepareMenuItems(this.#value.items, vueComponent),\n\t\t\t\t{\n\t\t\t\t\tid: 'actionMenu',\n\t\t\t\t\tbindElement: vueComponent.$el,\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t}\n\n\tisJsEvent(): boolean\n\t{\n\t\treturn (this.#type === 'jsEvent');\n\t}\n\n\tisJsCode(): boolean\n\t{\n\t\treturn (this.#type === 'jsCode');\n\t}\n\n\tisAjaxAction(): boolean\n\t{\n\t\treturn (this.#type === 'runAjaxAction');\n\t}\n\n\tisRedirect(): boolean\n\t{\n\t\treturn (this.#type === 'redirect');\n\t}\n\n\tisShowMenu(): boolean\n\t{\n\t\treturn (this.#type === 'showMenu');\n\t}\n\n\tgetValue(): string | Object\n\t{\n\t\treturn this.#value;\n\t}\n\n\t#prepareMenuItems(items: Object, vueComponent: Object): Array\n\t{\n\t\treturn Object.values(items)\n\t\t\t.filter((item) => (item.state !== 'hidden' && item.scope !== 'mobile' && (!vueComponent.isReadOnly || !item.hideIfReadonly)))\n\t\t\t.sort((a, b) => (a.sort - b.sort))\n\t\t;\n\t}\n}\n","import {Action} from \"../../../action\";\n\nexport const ChangeStreamButton = {\n\tprops: {\n\t\tdisableIfReadonly: Boolean,\n\t\ttype: String,\n\t\ttitle: String,\n\t\taction: Object,\n\t},\n\tinject: [\n\t\t'isReadOnly',\n\t],\n\n\tcomputed: {\n\t\tisShowPinButton() {\n\t\t\treturn this.type === 'pin' && !this.isReadOnly;\n\t\t},\n\n\t\tisShowUnpinButton() {\n\t\t\treturn this.type==='unpin' && !this.isReadOnly;\n\t\t},\n\t},\n\tmethods: {\n\t\texecuteAction() {\n\t\t\tif (!this.action)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst action = new Action(this.action);\n\t\t\taction.execute(this);\n\t\t},\n\t\tonClick(): void\n\t\t{\n\n\t\t\tif (this.action)\n\t\t\t{\n\t\t\t\tconst action = new Action(this.action);\n\t\t\t\taction.execute(this);\n\t\t\t}\n\t\t}\n\t},\n\n\ttemplate: `\n\t\t<div class=\"crm-timeline__card-top_controller\">\n\t\t\t<input\n\t\t\t\tv-if=\"type === 'complete'\"\n\t\t\t\t@click=\"executeAction\"\n\t\t\t\ttype=\"checkbox\"\n\t\t\t\tclass=\"crm-timeline__card-top_checkbox\"\n\t\t\t/>\n\t\t\t<div\n\t\t\t\tv-else-if=\"isShowPinButton\"\n\t\t\t\t:title=\"title\"\n\t\t\t\t@click=\"executeAction\"\n\t\t\t\tclass=\"crm-timeline__card-top_icon --pin\"\n\t\t\t></div>\n\t\t\t<div\n\t\t\t\tv-else-if=\"isShowUnpinButton\"\n\t\t\t\t:title=\"title\"\n\t\t\t\t@click=\"executeAction\"\n\t\t\t\tclass=\"crm-timeline__card-top_icon --unpin\"\n\t\t\t></div>\n\t\t</div>\n\t`,\n};\n","import {Action} from \"../../../action\";\n\nexport const Title = {\n\tprops: {\n\t\ttitle: String,\n\t\taction: Object,\n\t},\n\tinject: ['isLogMessage'],\n\tcomputed: {\n\t\tclassName(): Array {\n\t\t\treturn [\n\t\t\t\t'crm-timeline__card-title', {\n\t\t\t\t'--light': this.isLogMessage,\n\t\t\t\t'--action': !!this.action,\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\n\t\thref(): ?string {\n\t\t\tif (!this.action)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tconst action = new Action(this.action);\n\t\t\tif (action.isRedirect())\n\t\t\t{\n\t\t\t\treturn action.getValue();\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\n\t},\n\tmethods: {\n\t\texecuteAction(): void\n\t\t{\n\t\t\tif (!this.action)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst action = new Action(this.action);\n\t\t\taction.execute(this);\n\t\t}\n\t},\n\ttemplate: `\n\t\t<a\n\t\t\tv-if=\"href\"\n\t\t\t:href=\"href\"\n\t\t\t:class=\"className\"\n\t\t\ttabindex=\"0\"\n\t\t\t:title=\"title\"\n\t\t>\n\t\t\t{{title}}\n\t\t</a>\n\t\t<span\n\t\t\tv-else\n\t\t\t@click=\"executeAction\"\n\t\t\t:class=\"className\"\n\t\t\ttabindex=\"0\"\n\t\t\t:title=\"title\"\n\t\t>\n\t\t\t{{title}}\n\t\t</span>`\n};\n","export class TagType {\n\tstatic PRIMARY = 'primary';\n\tstatic SECONDARY = 'secondary';\n\tstatic SUCCESS = 'success';\n\tstatic WARNING = 'warning';\n\tstatic FAILURE = 'failure';\n}","import {Action} from \"../../../action\";\nimport {Label} from 'ui.label';\nimport {TagType} from '../../enums/tag-type';\n\nexport const Tag = {\n\tprops: {\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t},\n\t\taction: {\n\t\t\ttype: Object,\n\t\t\trequired: false,\n\t\t\tdefault: null,\n\t\t},\n\t\ttype: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: TagType.SECONDARY,\n\t\t},\n\t\tstate: String,\n\t},\n\tcomputed: {\n\t\tclassName(): Object {\n\t\t\treturn {\n\t\t\t\t'crm-timeline__card-status': true,\n\t\t\t\t'--clickable': !!this.action,\n\t\t\t}\n\t\t},\n\n\t\ttagTypeToLabelColorDict() {\n\t\t\treturn {\n\t\t\t\t[TagType.PRIMARY]: Label.Color.LIGHT_BLUE,\n\t\t\t\t[TagType.SECONDARY]: Label.Color.LIGHT,\n\t\t\t\t[TagType.SUCCESS]: Label.Color.LIGHT_GREEN,\n\t\t\t\t[TagType.WARNING]: Label.Color.LIGHT_YELLOW,\n\t\t\t\t[TagType.FAILURE]: Label.Color.LIGHT_RED,\n\t\t\t};\n\t\t},\n\n\t\ttagContainerRef() {\n\t\t\treturn this.$refs.tag;\n\t\t}\n\t},\n\tmethods: {\n\n\t\tgetLabelColorFromTagType(tagType) {\n\t\t\tconst lowerCaseTagType = tagType ? tagType.toLowerCase() : '';\n\t\t\tconst labelColor = this.tagTypeToLabelColorDict[lowerCaseTagType];\n\t\t\treturn labelColor ? labelColor : Label.Color.LIGHT;\n\t\t},\n\n\t\trenderTag(tagOptions): HTMLElement | null {\n\t\t\tif (!tagOptions || !this.tagContainerRef) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\n\t\t\tconst {title, type} = tagOptions;\n\n\t\t\tconst uppercaseTitle = title && typeof title === 'string' ? title.toUpperCase() : '';\n\t\t\tconst label = new Label({\n\t\t\t\ttext: uppercaseTitle,\n\t\t\t\tcolor: this.getLabelColorFromTagType(type),\n\t\t\t\tfill: true,\n\t\t\t});\n\n\t\t\tthis.tagContainerRef.appendChild(label.render());\n\t\t},\n\n\t\texecuteAction() {\n\t\t\tif (!this.action) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst action = new Action(this.action);\n\t\t\taction.execute(this);\n\t\t},\n\t},\n\tmounted() {\n\t\tthis.renderTag({title: this.title, type: this.type});\n\t},\n\ttemplate: `\n\t\t<div ref=\"tag\" :class=\"className\" @click=\"executeAction\"></div>\n\t`\n};\n","import {Text} from \"main.core\"\n\nexport const User = {\n\tprops: {\n\t\ttitle: String,\n\t\tdetailUrl: String,\n\t\timageUrl: String,\n\t},\n\tinject: ['isLogMessage'],\n\tcomputed: {\n\t\tstyles()\n\t\t{\n\t\t\tif (!this.imageUrl)\n\t\t\t{\n\t\t\t\treturn {};\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tbackgroundImage: \"url('\" + Text.encode(this.imageUrl) + \"')\",\n\t\t\t\tbackgroundSize: '21px'\n\t\t\t};\n\t\t},\n\n\t\tclassName() {\n\t\t\treturn [\n\t\t\t\t'ui-icon',\n\t\t\t\t'ui-icon-common-user',\n\t\t\t\t'crm-timeline__user-icon', {\n\t\t\t\t'--muted': this.isLogMessage,\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t},\n\t// language=Vue\n\ttemplate: `<a :class=\"className\" :href=\"detailUrl\"\n\t\t\t\t  target=\"_blank\" :title=\"title\"><i :style=\"styles\"></i></a>`\n};\n","import { DatetimeConverter } from 'crm.timeline.tools';\n\nexport const FormatDate = {\n\tname: 'FormatDate',\n\tprops: {\n\t\ttimestamp: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t\tdefault: 0,\n\t\t},\n\n\t\tdatePlaceholder: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t},\n\n\t\tuseShortTimeFormat: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: false,\n\t\t},\n\n\t\tclass: {\n\t\t\ttype: [Array, Object, String],\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t}\n\t},\n\tcomputed: {\n\t\tformattedDate() {\n\t\t\tif (!this.timestamp)\n\t\t\t{\n\t\t\t\treturn this.datePlaceholder;\n\t\t\t}\n\t\t\tconst converter = DatetimeConverter.createFromServerTimestamp(this.timestamp).toUserTime();\n\n\t\t\treturn this.useShortTimeFormat ? converter.toTimeString() : converter.toDatetimeString({delimiter: ', '});\n\t\t},\n\t},\n\n\ttemplate: `\n\t\t<div :class=\"$props.class\">{{ formattedDate }}</div>\n\t`\n}","import {ChangeStreamButton} from './header/change-stream-button'\nimport {Title} from './header/title'\nimport {Tag} from './header/tag'\nimport {User} from './header/user'\nimport {FormatDate} from './header/format-date';\nimport {Runtime} from 'main.core';\n\nexport const Header = {\n\tcomponents: {\n\t\tChangeStreamButton,\n\t\tTitle,\n\t\tTag,\n\t\tUser,\n\t\tFormatDate,\n\t},\n\tprops: {\n\t\ttitle: String,\n\t\ttitleAction: Object,\n\t\tdate: Number,\n\t\tdatePlaceholder: String,\n\t\tuseShortTimeFormat: Boolean,\n\t\tchangeStreamButton: Object|null,\n\t\ttags: Object,\n\t\tuser: Object,\n\t},\n\tinject: [\n\t\t'isReadOnly',\n\t],\n\tcomputed: {\n\t\tvisibleTags(): Array\n\t\t{\n\t\t\treturn this.tags\n\t\t\t\t? Object.values(this.tags).filter(this.isVisibleTagFilter)\n\t\t\t\t: []\n\t\t\t;\n\t\t},\n\n\t\tvisibleAndAscSortedTags(): Array\n\t\t{\n\t\t\tconst tagsCopy = Runtime.clone(this.visibleTags);\n\t\t\treturn tagsCopy.sort(this.tagsAscSorter);\n\t\t},\n\n\t\tisShowDate(): boolean\n\t\t{\n\t\t\treturn this.date || this.datePlaceholder;\n\t\t},\n\t},\n\tmethods: {\n\t\tisVisibleTagFilter(tag): Boolean {\n\t\t\treturn tag.state !== 'hidden' && tag.scope !== 'mobile' && (!this.isReadOnly || !tag.hideIfReadonly);\n\t\t},\n\n\t\ttagsAscSorter(tagA, tagB): Number {\n\t\t\treturn tagA.sort - tagB.sort;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"crm-timeline__card-top\">\n\t\t\t<div class=\"crm-timeline__card-top_info\">\n\t\t\t\t<div class=\"crm-timeline__card-top_info_left\">\n\t\t\t\t\t<ChangeStreamButton v-if=\"changeStreamButton\" v-bind=\"changeStreamButton\"></ChangeStreamButton>\n\t\t\t\t\t<Title :title=\"title\" :action=\"titleAction\"></Title>\n\t\t\t\t</div>\n\t\t\t\t<div ref=\"tags\" class=\"crm-timeline__card-top_info_right\">\n\t\t\t\t\t<Tag\n\t\t\t\t\t\tv-for=\"(tag, index) in visibleAndAscSortedTags\"\n\t\t\t\t\t\t:key=\"index\"\n\t\t\t\t\t\tv-bind=\"tag\"\n\t\t\t\t\t/>\n\t\t\t\t\t<FormatDate\n\t\t\t\t\t\tv-if=\"isShowDate\"\n\t\t\t\t\t\t:timestamp=\"date\"\n\t\t\t\t\t\t:use-short-time-format=\"useShortTimeFormat\"\n\t\t\t\t\t\t:date-placeholder=\"datePlaceholder\"\n\t\t\t\t\t\tclass=\"crm-timeline__card-time\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"crm-timeline__card-top_user\">\n\t\t\t\t<User v-bind=\"user\"></User>\n\t\t\t</div>\n\t\t</div>\n\t`\n};\n","import {Action} from \"../../../action\";\n\nexport const Logo = {\n\tprops: {\n\t\ttype: String,\n\t\taddIcon: String,\n\t\taddIconType: String,\n\t\ticon: String,\n\t\ticonType: String,\n\t\tinCircle: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: false,\n\t\t},\n\t\taction: Object,\n\t},\n\tcomputed: {\n\t\tclassName(): string\n\t\t{\n\t\t\treturn [\n\t\t\t\t'crm-timeline__card-logo',\n\t\t\t\t`--${this.type}`, {\n\t\t\t\t'--clickable': this.action,\n\t\t\t\t}\n\t\t\t];\n\t\t},\n\n\t\ticonClassname() {\n\t\t\treturn [\n\t\t\t\t'crm-timeline__card-logo_icon',\n\t\t\t\t`--${this.type||this.icon}`, {\n\t\t\t\t\t'--in-circle': this.inCircle,\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\n\t\taddIconClassname() {\n\t\t\treturn [\n\t\t\t\t'crm-timeline__card-logo_add-icon',\n\t\t\t\t`--type-${this.addIconType}`,\n\t\t\t\t`--icon-${this.addIcon}`\n\t\t\t]\n\t\t},\n\t},\n\tmethods: {\n\t\texecuteAction() {\n\t\t\tif (!this.action)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst action = new Action(this.action);\n\t\t\taction.execute(this);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div :class=\"className\" @click=\"executeAction\">\n\t\t\t<div class=\"crm-timeline__card-logo_content\">\n\t\t\t\t<div :class=\"iconClassname\">\n\t\t\t\t\t<i></i>\n\t\t\t\t</div>\n\t\t\t\t<div :class=\"addIconClassname\" v-if=\"addIcon\">\n\t\t\t\t\t<i></i>\n\t\t\t\t</div>\n\t\t\t</div>\n<!--\t\t\t<div v-if=\"action\" @click=\"executeAction\" class=\"crm-timeline__card-icon_action-btn\"></div>-->\n\t\t</div>\n\t`\n};\n","import {DateTimeFormat} from 'main.date';\n\nexport const CalendarIcon = {\n\tprops: {\n\t\ttimestamp: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t\tdefault: 0,\n\t\t}\n\t},\n\n\tcomputed: {\n\n\t\tdate() {\n\t\t\treturn DateTimeFormat.format('d', this.timestamp);\n\t\t},\n\t\tmonth() {\n\t\t\treturn DateTimeFormat.format('F', this.timestamp);\n\t\t},\n\t\tdayWeek() {\n\t\t\treturn DateTimeFormat.format('D', this.timestamp);\n\t\t},\n\n\t\ttime() {\n\t\t\treturn DateTimeFormat.format('H:i', this.timestamp);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"crm-timeline__calendar-icon\">\n\t\t\t<header class=\"crm-timeline__calendar-icon_top\">\n\t\t\t\t<div class=\"crm-timeline__calendar-icon_bullets\">\n\t\t\t\t\t<div class=\"crm-timeline__calendar-icon_bullet\"></div>\n\t\t\t\t\t<div class=\"crm-timeline__calendar-icon_bullet\"></div>\n\t\t\t\t</div>\n\t\t\t</header>\n\t\t\t<main class=\"crm-timeline__calendar-icon_content\">\n\t\t\t\t<div class=\"crm-timeline__calendar-icon_day\">{{ date }}</div>\n\t\t\t\t<div class=\"crm-timeline__calendar-icon_month\">{{ month }}</div>\n\t\t\t\t<div class=\"crm-timeline__calendar-icon_date\">\n\t\t\t\t\t<span class=\"crm-timeline__calendar-icon_day-week\">{{ dayWeek }}</span>\n\t\t\t\t\t<span class=\"crm-timeline__calendar-icon_time\">{{ time }}</span>\n\t\t\t\t</div>\n\t\t\t</main>\n\t\t</div>\n\t`\n}","import {BitrixVue} from 'ui.vue3';\n\nimport {Logo} from './logo';\nimport {CalendarIcon} from './calendar-icon';\n\nexport const LogoCalendar = BitrixVue.cloneComponent(Logo, {\n\tcomponents: {\n\t\tCalendarIcon,\n\t},\n\tprops: {\n\t\ttimestamp: {\n\t\t\ttype: Number,\n\t\t\trequired: false,\n\t\t\tdefault: 0,\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div :class=\"className\" @click=\"executeAction\">\n\t\t\t<div class=\"crm-timeline__card-logo_content\">\n\t\t\t\t<CalendarIcon :timestamp=\"timestamp\" />\n\t\t\t</div>\n\t\t</div>\n\t`\n});","import {Logo} from './body/logo';\nimport {LogoCalendar} from './body/logo-calendar';\nimport {Type} from 'main.core';\n\nexport const Body = {\n\tcomponents: {\n\t\tLogo,\n\t\tLogoCalendar,\n\t},\n\tprops: {\n\t\tlogo: Object,\n\t\tblocks: Object,\n\t},\n\tmounted() {\n\t\tconst blocks = this.$refs.blocks;\n\t\tif (!blocks || !this.visibleBlocks)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tthis.visibleBlocks.forEach((block, index) => {\n\t\t\tif (Type.isDomNode(blocks[index].$el))\n\t\t\t{\n\t\t\t\tblocks[index].$el.setAttribute('data-id', block.id);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthrow new Error('Vue component \"' + block.rendererName + '\" was not found');\n\t\t\t}\n\t\t});\n\t},\n\tcomputed: {\n\t\tvisibleBlocks(): Array\n\t\t{\n\t\t\treturn Object.keys(this.blocks)\n\t\t\t\t.map((id) => ({id, ...this.blocks[id]}))\n\t\t\t\t.filter((item) => (item.scope !== 'mobile'))\n\t\t\t;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"crm-timeline__card-body\">\n\t\t\t<div v-if=\"logo\" class=\"crm-timeline__card-logo_container\">\n\t\t\t\t<LogoCalendar v-if=\"logo.icon === 'calendar'\" v-bind=\"logo\"></LogoCalendar>\n\t\t\t\t<Logo v-else v-bind=\"logo\"></Logo>\n\t\t\t</div>\n\t\t\t<div class=\"crm-timeline__card-container\">\n\t\t\t\t<div\n\t\t\t\t\tv-for=\"block in visibleBlocks\"\n\t\t\t\t\t:key=\"block.id\"\n\t\t\t\t\tclass=\"crm-timeline__card-container_block\"\n\t\t\t\t>\n\t\t\t\t\t<component\n\t\t\t\t\t\t:is=\"block.rendererName\"\n\t\t\t\t\t\tv-bind=\"block.properties\"\n\t\t\t\t\t\tref=\"blocks\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`\n};\n","import {MenuManager} from \"main.popup\";\nimport {Menu as LayoutMenu} from \"../../layout/menu\";\nconst MenuId = 'timeline-more-button-menu';\n\nexport const Menu = {\n\tprops: {\n\t\tbuttons: Array, // buttons that didn't fit into footer\n\t\titems: Object, // real menu items\n\t},\n\tinject: [\n\t\t'isReadOnly',\n\t],\n\tcomputed: {\n\t\titemsArray(): Array\n\t\t{\n\t\t\tif (!this.items)\n\t\t\t{\n\t\t\t\treturn [];\n\t\t\t}\n\n\t\t\treturn Object.values(this.items)\n\t\t\t\t.filter((item) => (item.state !== 'hidden' && item.scope !== 'mobile' && (!this.isReadOnly || !item.hideIfReadonly)))\n\t\t\t\t.sort((a, b) => (a.sort - b.sort))\n\t\t\t;\n\t\t},\n\t\tmenuItems(): Array\n\t\t{\n\t\t\tlet result = this.buttons;\n\t\t\tif (this.buttons.length && this.itemsArray.length)\n\t\t\t{\n\t\t\t\tresult.push({delimiter: true});\n\t\t\t}\n\t\t\tresult = [...result, ...this.itemsArray];\n\n\t\t\treturn result;\n\t\t}\n\t},\n\tbeforeUnmount(): void\n\t{\n\t\tconst menu = MenuManager.getMenuById(MenuId);\n\t\tif (menu)\n\t\t{\n\t\t\tmenu.destroy();\n\t\t}\n\t},\n\tmethods: {\n\t\tshowMenu(): void\n\t\t{\n\t\t\tLayoutMenu.showMenu(\n\t\t\t\tthis,\n\t\t\t\tthis.menuItems,\n\t\t\t\t{\n\t\t\t\t\tid: MenuId,\n\t\t\t\t\tclassName: 'crm-timeline__card_more-menu',\n\t\t\t\t\twidth: 230,\n\t\t\t\t\tangle: false,\n\t\t\t\t\tcacheable: false,\n\t\t\t\t\tbindElement: this.$el,\n\t\t\t\t}\n\t\t\t);\n\t\t},\n\t},\n\t// language=Vue\n\ttemplate: `<div class=\"crm-timeline__card-action_menu-item --dotted\" @click=\"showMenu\"><i></i></div>`\n};\n","export class ButtonType {\n\tstatic ICON = 'icon';\n\tstatic PRIMARY = 'primary';\n\tstatic SECONDARY = 'secondary';\n\tstatic LIGHT = 'light';\n}","export class ButtonState {\n\tstatic DEFAULT = '';\n\tstatic LOADING = 'loading';\n\tstatic DISABLED = 'disabled';\n\tstatic HIDDEN = 'hidden';\n}","import {Action} from \"../../action\";\nimport { ButtonOptions, Button as UIButton } from 'ui.buttons';\nimport {ButtonType} from '../enums/button-type';\nimport {ButtonState} from '../enums/button-state';\nimport {Type} from 'main.core';\n\nexport const Button = {\n\tprops: {\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t},\n\t\ttype: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: ButtonType.SECONDARY,\n\t\t},\n\t\tstate: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: ButtonState.DEFAULT,\n\t\t},\n\t\ticonName: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t},\n\t\tsize: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: 'extra_small'\n\t\t},\n\t\tdataset: Object,\n\t\taction: Object,\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tpopup: null,\n\t\t}\n\t},\n\tcomputed: {\n\t\tbuttonOptions(): ButtonOptions {\n\t\t\tconst upperCaseIconName = Type.isString(this.iconName) ? this.iconName.toUpperCase() : '';\n\t\t\tconst upperCaseButtonSize = Type.isString(this.size) ? this.size.toUpperCase() : 'extra_small';\n\t\t\tconst color = this.itemTypeToButtonColorDict[this.type] || UIButton.Color.LIGHT_BORDER;\n\t\t\tconst text = this.type === ButtonType.ICON ? '' : this.title;\n\t\t\tconst dataset = this.dataset || {};\n\t\t\treturn {\n\t\t\t\tround: true,\n\t\t\t\tdependOnTheme: false,\n\t\t\t\tsize: UIButton.Size[upperCaseButtonSize],\n\t\t\t\ttext: text,\n\t\t\t\tcolor: color,\n\t\t\t\tstate: this.itemStateToButtonStateDict[this.state],\n\t\t\t\ticon: UIButton.Icon[upperCaseIconName],\n\t\t\t\tdataset: dataset,\n\t\t\t}\n\t\t},\n\n\t\titemTypeToButtonColorDict() {\n\t\t\treturn {\n\t\t\t\t[ButtonType.PRIMARY]: UIButton.Color.PRIMARY,\n\t\t\t\t[ButtonType.SECONDARY]: UIButton.Color.LIGHT_BORDER,\n\t\t\t\t[ButtonType.LIGHT]: UIButton.Color.LIGHT,\n\t\t\t\t[ButtonType.ICON]: UIButton.Color.LINK,\n\t\t\t}\n\t\t},\n\n\t\titemStateToButtonStateDict() {\n\t\t\treturn {\n\t\t\t\t[ButtonState.LOADING]: UIButton.State.WAITING,\n\t\t\t\t[ButtonState.DISABLED]: UIButton.State.DISABLED,\n\t\t\t}\n\t\t},\n\n\t\tbuttonContainerRef(): HTMLElement | undefined {\n\t\t\treturn this.$refs.buttonContainer;\n\t\t},\n\n\t},\n\tmethods: {\n\t\trenderButton(): void {\n\t\t\tif (!this.buttonContainerRef) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.buttonContainerRef.innerHTML = '';\n\t\t\tconst button = new UIButton(this.buttonOptions);\n\t\t\tbutton.renderTo(this.buttonContainerRef);\n\t\t},\n\n\t\texecuteAction(): void\n\t\t{\n\t\t\tif (this.action && this.state !== ButtonState.DISABLED && this.state !== ButtonState.LOADING)\n\t\t\t{\n\t\t\t\tconst action = new Action(this.action);\n\t\t\t\taction.execute(this);\n\t\t\t}\n\t\t},\n\t},\n\tmounted() {\n\t\tthis.renderButton();\n\t},\n\tupdated() {\n\t\tthis.renderButton();\n\t},\n\ttemplate: `\n\t\t<div\n\t\t\t:class=\"$attrs.class\"\n\t\t\tref=\"buttonContainer\"\n\t\t\t@click=\"executeAction\">\n\t\t</div>\n\t`\n};\n","import {Button} from '../button';\n\nexport const Buttons = {\n\tcomponents: {\n\t\tButton,\n\t},\n\tprops: {\n\t\titems: {\n\t\t\ttype: Array,\n\t\t\trequired: false,\n\t\t\tdefault: () => [],\n\t\t},\n\t},\n\ttemplate:\n\t\t`\n\t\t\t<div class=\"crm-timeline__card-action_buttons\">\n\t\t\t\t<Button class=\"crm-timeline__card-action-btn\" v-for=\"item in items\" v-bind=\"item\" />\n\t\t\t</div>\n\t\t`\n};\n","export class ButtonScope {\n\tstatic MOBILE = 'mobile';\n}","import {Menu} from './footer/menu';\nimport {Buttons} from './footer/buttons';\nimport {Type} from 'main.core';\nimport {Button} from './button';\nimport {ButtonState} from '../enums/button-state';\nimport {ButtonScope} from '../enums/button-scope';\nimport {ButtonType} from '../enums/button-type';\n\nexport const Footer = {\n\tcomponents: {\n\t\tButtons,\n\t\tMenu,\n\t\tButton,\n\t},\n\tprops: {\n\t\tbuttons: Object,\n\t\tmenu: Object,\n\t\tadditionalButtons: {\n\t\t\ttype: Object,\n\t\t\trequired: false,\n\t\t\tdefault: () => ({}),\n\t\t},\n\t\tmaxBaseButtonsCount: {\n\t\t\ttype: Number,\n\t\t\trequired: false,\n\t\t\tdefault: 3,\n\t\t},\n\n\t},\n\tinject: [\n\t\t'isReadOnly',\n\t],\n\tcomputed: {\n\t\tbaseButtons(): Array\n\t\t{\n\t\t\treturn this.visibleAndSortedButtons.slice(0, this.maxBaseButtonsCount);\n\t\t},\n\n\t\tmoreButtons(): Array\n\t\t{\n\t\t\treturn this.visibleAndSortedButtons.slice(this.maxBaseButtonsCount);\n\t\t},\n\n\n\t\tvisibleAndSortedButtons() {\n\t\t\treturn this.visibleButtons.sort(this.buttonsSorter);\n\t\t},\n\n\t\tvisibleAndSortedAdditionalButtons() {\n\t\t\treturn this.visibleAdditionalButtons.sort(this.buttonsSorter);\n\t\t},\n\n\t\tvisibleButtons(): Array\n\t\t{\n\t\t\treturn this.buttons\n\t\t\t\t? Object.values(this.buttons).filter(this.visibleButtonsFilter)\n\t\t\t\t: [];\n\t\t},\n\n\t\tvisibleAdditionalButtons(): Array {\n\t\t\treturn this.additionalButtonsArray\n\t\t\t\t? Object.values(this.additionalButtonsArray).filter(this.visibleButtonsFilter)\n\t\t\t\t: [];\n\t\t},\n\n\t\tadditionalButtonsArray() {\n\t\t\treturn Object.entries(this.additionalButtons).map(([id, button]) => {\n\t\t\t\treturn {id, type: ButtonType.ICON, ...button};\n\t\t\t});\n\t\t},\n\n\t\thasMenu(): boolean\n\t\t{\n\t\t\treturn this.moreButtons.length || (Type.isPlainObject(this.menu) && Object.keys(this.menu).length);\n\t\t},\n\t},\n\tmethods: {\n\t\tvisibleButtonsFilter(buttonItem) {\n\t\t\treturn buttonItem.state !== ButtonState.HIDDEN\n\t\t\t\t&& buttonItem.scope !== ButtonScope.MOBILE\n\t\t\t\t&& (!this.isReadOnly || !buttonItem.hideIfReadonly);\n\t\t},\n\n\t\tbuttonsSorter(buttonA, buttonB) {\n\t\t\treturn buttonA?.sort - buttonB?.sort;\n\t\t}\n\t},\n\ttemplate: `\n\t\t<div class=\"crm-timeline__card-action\">\n\t\t\t<Buttons :items=\"baseButtons\" />\n\t\t\t<div class=\"crm-timeline__card-action_menu\">\n\t\t\t\t<Button\n\t\t\t\t\tv-for=\"button in visibleAndSortedAdditionalButtons\"\n\t\t\t\t\t:key=\"button.id\"\n\t\t\t\t\tv-bind=\"button\"\n\t\t\t\t\tclass=\"crm-timeline__card-action_menu-item\"\n\t\t\t\t/>\n\t\t\t\t<Menu v-if=\"hasMenu\" :buttons=\"moreButtons\" v-bind=\"menu\" />\n\t\t\t</div>\n\t\t</div>\n\t`\n};\n","import {Type} from \"main.core\";\nimport {Action} from \"../../action\";\n\nexport const MarketPanel = {\n\tprops: {\n\t\ttext: String,\n\t\tdetailsText: String,\n\t\tdetailsTextAction: Object,\n\n\t},\n\tcomputed: {\n\t\tneedShowDetailsText(): boolean\n\t\t{\n\t\t\treturn Type.isStringFilled(this.detailsText);\n\t\t},\n\t\thref(): ?string\n\t\t{\n\t\t\tif (!this.detailsTextAction)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tconst action = new Action(this.detailsTextAction);\n\t\t\tif (action.isRedirect())\n\t\t\t{\n\t\t\t\treturn action.getValue();\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\t},\n\tmethods: {\n\t\texecuteAction(): void\n\t\t{\n\t\t\tif (this.detailsTextAction)\n\t\t\t{\n\t\t\t\tconst action = new Action(this.detailsTextAction);\n\t\t\t\taction.execute(this);\n\t\t\t}\n\t\t}\n\t},\n\ttemplate: `\n\t\t<div class=\"crm-timeline__card-bottom\">\n\t\t<div class=\"crm-timeline__card-market\">\n\t\t\t<div class=\"crm-timeline__card-market_container\">\n\t\t\t\t<span class=\"crm-timeline__card-market_logo\"></span>\n\t\t\t\t<span class=\"crm-timeline__card-market_text\">{{ text }}</span>\n\t\t\t\t<a\n\t\t\t\t\tv-if=\"href && needShowDetailsText\"\n\t\t\t\t\t:href=\"href\"\n\t\t\t\t\tclass=\"crm-timeline__card-market_more\"\n\t\t\t\t>\n\t\t\t\t\t{{detailsText}}\n\t\t\t\t</a>\n\t\t\t\t<span\n\t\t\t\t\tv-if=\"!href && needShowDetailsText\"\n\t\t\t\t\t@click=\"executeAction\"\n\t\t\t\t\tclass=\"crm-timeline__card-market_more\"\n\t\t\t\t>\n\t\t\t\t{{detailsText}}\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t\t<div class=\"crm-timeline__card-market_cross\"><i></i></div>\n\t\t</div>\n\t\t</div>\n\t`\n};\n","import {User} from './header/user';\nimport {Action} from '../../action';\nimport {Button} from './button';\nimport {ButtonType} from '../enums/button-type';\nimport {ButtonState} from '../enums/button-state';\nimport {Text} from 'main.core';\n\nexport const Note = {\n\tcomponents: {\n\t\tUser,\n\t\tButton,\n\t},\n\tprops: {\n\t\ttext: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t},\n\t\tsaveNoteAction: Object,\n\t\tdeleteNoteAction: Object,\n\t\tuser: Object,\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tisEdit: false,\n\t\t\tnote: this.text,\n\t\t\toldNote: this.text,\n\t\t}\n\t},\n\tcomputed: {\n\t\tButtonType() {\n\t\t\treturn ButtonType;\n\t\t},\n\t\tsaveButtonState() {\n\t\t\treturn this.note.trim().length ? ButtonState.DEFAULT : ButtonState.DISABLED;\n\t\t},\n\t\tencodedText() {\n\t\t\treturn Text.encode(this.text);\n\t\t},\n\t},\n\tmethods: {\n\t\tstartEditing() {\n\t\t\tthis.isEdit = true;\n\t\t\tthis.setCaretToEnd();\n\t\t},\n\n\t\tsetCaretToEnd() {\n\t\t\tconst el = this.$refs.noteText;\n\t\t\tconst selection = window.getSelection();\n\t\t\tconst range = document.createRange();\n\t\t\tselection.removeAllRanges();\n\t\t\trange.selectNodeContents(el);\n\t\t\trange.collapse(false);\n\t\t\tselection.addRange(range);\n\t\t\tel.focus();\n\t\t},\n\n\t\tonEdit(e) {\n\t\t\tthis.note =  e.target.innerText;\n\t\t},\n\n\t\tonEnterHandle(e) {\n\t\t\tif (e.ctrlKey) {\n\t\t\t\tthis.finishEditing();\n\t\t\t}\n\t\t},\n\n\t\tfinishEditing() {\n\t\t\tif (this.saveButtonState === ButtonState.DISABLED || this.state === ButtonState.LOADING) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst note = this.$refs.noteText.innerText.trim();\n\t\t\tthis.$refs.noteText.innerText = note;\n\t\t\tthis.note = note;\n\t\t\tthis.oldNote = note;\n\t\t\tthis.isEdit = false;\n\t\t\tthis.saveNote();\n\t\t},\n\n\t\tcancelEditing() {\n\t\t\tthis.note = this.oldNote;\n\t\t\tthis.$refs.noteText.innerText = this.oldNote;\n\t\t\tthis.isEdit = false;\n\t\t},\n\n\t\tdeleteNote() {\n\t\t\tthis.executeAction(this.deleteNoteAction);\n\t\t},\n\n\t\tsaveNote() {\n\t\t\tthis.executeAction({...this.saveNoteAction, value: this.note});\n\t\t},\n\n\t\texecuteAction(actionObject) {\n\t\t\tif (!actionObject) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst action = new Action(actionObject);\n\t\t\taction.execute(this);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"crm-timeline__card-note\">\n\t\t\t<div class=\"crm-timeline__card-note_user\">\n\t\t\t\t<User v-bind=\"user\"></User>\n\t\t\t</div>\n\t\t\t<div class=\"crm-timeline__card-note_area\">\n\t\t\t\t<div class=\"crm-timeline__card-note_value\">\n\t\t\t\t\t<span\n\t\t\t\t\t\tref=\"noteText\"\n\t\t\t\t\t\t@input=\"onEdit\"\n\t\t\t\t\t\t@keydown.esc=\"cancelEditing\"\n\t\t\t\t\t\t@keydown.enter=\"onEnterHandle\"\n\t\t\t\t\t\tv-html=\"encodedText\"\n\t\t\t\t\t\t:contenteditable=\"isEdit\"\n\t\t\t\t\t\ttabindex=\"0\"\n\t\t\t\t\t\tclass=\"crm-timeline__card-note_text\"\n\t\t\t\t\t></span>\n\t\t\t\t\t<span\n\t\t\t\t\t\tv-if=\"!note\"\n\t\t\t\t\t\t@click.prevent=\"setCaretToEnd\"\n\t\t\t\t\t\tclass=\"crm-timeline__card-note_placeholder\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('CRM_TIMELINE_USER_NOTE_PLACEHOLDER') }}\n\t\t\t\t\t</span>\n\t\t\t\t\t<span\n\t\t\t\t\t\tv-if=\"!isEdit\"\n\t\t\t\t\t\tclass=\"crm-timeline__card-note_edit\"\n\t\t\t\t\t\t@click.prevent.stop=\"startEditing\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<i></i>\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<div v-if=\"isEdit\" class=\"crm-timeline__card-note__controls\">\n\t\t\t\t\t<div class=\"crm-timeline__card-note__control --save\">\n\t\t\t\t\t\t<Button @click=\"finishEditing\" :state=\"saveButtonState\" :type=\"ButtonType.PRIMARY\" :title=\"$Bitrix.Loc.getMessage('CRM_TIMELINE_USER_NOTE_SAVE')\" />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"crm-timeline__card-note__control --cancel\">\n\t\t\t\t\t\t<Button @click=\"cancelEditing\" :type=\"ButtonType.LIGHT\" :title=\"$Bitrix.Loc.getMessage('CRM_TIMELINE_USER_NOTE_CANCEL')\" />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"crm-timeline__card-note_cross\" @click=\"deleteNote\">\n\t\t\t\t<i></i>\n\t\t\t</div>\n\t\t</div>\n\t\t`\n};\n","export const UserPick = {\n\ttemplate: `\n\t\t<div class=\"ui-icon ui-icon-common-user crm-timeline__card-top_user-icon\">\n\t\t\t<i></i>\n\t\t</div>\n\t`\n}","export const StreamType = {\n\thistory: 0,\n\tscheduled: 1,\n\tpinned: 2,\n}","import {Icon} from './layout/icon';\nimport {Header} from './layout/header';\nimport {Body} from './layout/body';\nimport {Footer} from './layout/footer';\nimport {MarketPanel} from './layout/marketPanel';\nimport {Note} from './layout/note';\nimport {UserPick} from './layout/userPick';\nimport {BaseEvent} from \"main.core.events\";\nimport {StreamType} from '../stream-type';\n\nexport const Item = {\n\tcomponents: {\n\t\tIcon,\n\t\tHeader,\n\t\tBody,\n\t\tFooter,\n\t\tMarketPanel,\n\t\tNote,\n\t\tUserPick\n\t},\n\tprops: {\n\t\tinitialLayout: Object,\n\t\tid: String,\n\t\tuseShortTimeFormat: Boolean,\n\t\tisLogMessage: Boolean,\n\t\tisReadOnly: Boolean,\n\t\tonAction: Function,\n\t\tstreamType: {\n\t\t\ttype: Number,\n\t\t\trequired: false,\n\t\t\tdefault: StreamType.history,\n\t\t}\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tlayout: this.initialLayout,\n\t\t}\n\t},\n\tprovide() {\n\t\treturn {\n\t\t\tisLogMessage: !!this.initialLayout?.isLogMessage,\n\t\t\tisReadOnly: this.isReadOnly,\n\t\t};\n\t},\n\tcreated(): void\n\t{\n\t\tthis.$Bitrix.eventEmitter.subscribe('crm:timeline:item:action', this.onActionEvent);\n\t},\n\tbeforeDestroy(): void\n\t{\n\t\tthis.$Bitrix.eventEmitter.unsubscribe('crm:timeline:item:action', this.onActionEvent);\n\t},\n\tmethods: {\n\t\tonActionEvent(event: BaseEvent): void\n\t\t{\n\t\t\tconst eventData = event.getData();\n\t\t\tthis.onAction(eventData.action, eventData.actionParams);\n\t\t},\n\t\tsetLayout(newLayout: Object): void\n\t\t{\n\t\t\tthis.layout = newLayout;\n\t\t},\n\t},\n\tcomputed: {\n\t\ttimelineCardClassname() {\n\t\t\treturn {\n\t\t\t\t'crm-timeline__card': true,\n\t\t\t\t'crm-timeline__card-scope': true,\n\t\t\t\t'--stream-type-history': this.streamType === StreamType.history,\n\t\t\t\t'--stream-type-scheduled': this.streamType === StreamType.scheduled,\n\t\t\t\t'--stream-type-pinned': this.streamType === StreamType.pinned,\n\t\t\t\t'--log-message': !!this.layout.isLogMessage,\n\t\t\t}\n\t\t}\n\t},\n\ttemplate: `\n\t\t<div :data-id=\"id\" :class=\"timelineCardClassname\">\n\t\t\t<div class=\"crm-timeline__card_icon_container\">\n\t\t\t\t<Icon v-bind=\"layout.icon\"></Icon>\n\t\t\t</div>\n\t\t\t<Header v-if=\"layout.header\" v-bind=\"layout.header\" :use-short-time-format=\"useShortTimeFormat\"></Header>\n\t\t\t<Body v-if=\"layout.body\" v-bind=\"layout.body\"></Body>\n\t\t\t<Footer v-if=\"layout.footer\" v-bind=\"layout.footer\"></Footer>\n\t\t\t<MarketPanel v-if=\"layout.marketPanel\" v-bind=\"layout.marketPanel\"></MarketPanel>\n\t\t</div>\n\t`\n};\n","export default class Layout\n{\n\t#layout: Object = null;\n\n\tconstructor(layout: Object)\n\t{\n\t\tthis.#layout = layout;\n\t}\n\n\tasPlainObject(): Object\n\t{\n\t\treturn Object.assign({}, this.#layout);\n\t}\n\n\tgetFooterMenuItemById(id: string): ?Object\n\t{\n\t\tconst items = this.#layout?.footer?.menu?.items ?? {};\n\n\t\treturn items.hasOwnProperty(id) ? items.id : null;\n\t}\n\n\taddFooterMenuItem(menuItem: Object): void\n\t{\n\t\tthis.#layout.footer = this.#layout.footer || {};\n\t\tthis.#layout.footer.menu = this.#layout.footer.menu || {};\n\t\tthis.#layout.footer.menu.items = this.#layout.footer.menu.items || {};\n\t\tthis.#layout.footer.menu.items[menuItem.id] = menuItem;\n\t}\n}\n","import ConfigurableItem from \"./configurable-item\";\n\nexport default class ControllerManager\n{\n\t#id: ?string = null;\n\n\tconstructor(id)\n\t{\n\t\tthis.#id = id;\n\t}\n\n\tgetItemControllers(item: ConfigurableItem): Array\n\t{\n\t\tconst foundControllers = [];\n\t\tfor (const controller of ControllerManager.getRegisteredControllers())\n\t\t{\n\t\t\tif (controller.isItemSupported(item))\n\t\t\t{\n\t\t\t\tfoundControllers.push(new controller());\n\t\t\t}\n\t\t}\n\n\t\treturn foundControllers;\n\t}\n\n\tstatic getInstance(timelineId): ControllerManager\n\t{\n\t\tif (!this.#instances.hasOwnProperty(timelineId))\n\t\t{\n\t\t\tthis.#instances[timelineId] = new ControllerManager(timelineId);\n\t\t}\n\n\t\treturn this.#instances[timelineId];\n\t}\n\n\tstatic registerController(controller): void\n\t{\n\t\tthis.#availableControllers.push(controller);\n\t}\n\n\tstatic getRegisteredControllers(): Array\n\t{\n\t\treturn this.#availableControllers;\n\t}\n\n\tstatic #instances = {};\n\tstatic #availableControllers = [];\n}\n","import { Dom, Text, Type } from 'main.core';\nimport TimelineItem from './item';\nimport { Item } from './components/item';\nimport Layout from './layout';\nimport { BitrixVue } from 'ui.vue3';\nimport ControllerManager from './controller-manager';\nimport { DatetimeConverter } from 'crm.timeline.tools';\nimport {StreamType} from 'crm.timeline.item';\n\ndeclare type ConfigurableItemParams = {\n\ttimelineId: string,\n\tcontainer: HTMLElement,\n\titemClassName: string,\n\tuseShortTimeFormat: boolean,\n\tisReadOnly: boolean,\n\tdata: ConfigurableItemData,\n\tstreamType: number;\n};\n\ndeclare type ConfigurableItemData = {\n\ttype: string,\n\ttimestamp: ?Number,\n\tlayout: ?Object,\n}\n\nexport default class ConfigurableItem extends TimelineItem\n{\n\t#container: HTMLElement = null;\n\t#itemClassName: string = null;\n\t#type: string = null;\n\t#timelineId: string = null;\n\t#timestamp: number = null;\n\t#useShortTimeFormat: boolean = false;\n\t#isReadOnly: boolean = false;\n\t#controllers: Array = null;\n\t#layoutComponent: ?Object = null;\n\t#layoutApp: ?Object = null;\n\t#layout: ?Layout = null;\n\t#streamType: number = null;\n\n\tinitialize(id, settings: ConfigurableItemParams): void\n\t{\n\t\tthis._setId(id);\n\t\tsettings = settings || {};\n\t\tthis.#timelineId = settings.timelineId || '';\n\t\tthis.setContainer(settings.container || null);\n\t\tthis.#itemClassName = settings.itemClassName || '';\n\n\t\tif (Type.isPlainObject(settings.data))\n\t\t{\n\t\t\tthis.setData(settings.data);\n\n\t\t\tthis.#useShortTimeFormat = settings.useShortTimeFormat || false;\n\t\t\tthis.#isReadOnly = settings.isReadOnly || false;\n\t\t\tthis.#streamType = settings.streamType || StreamType.history;\n\t\t}\n\n\t\tthis.#controllers = ControllerManager.getInstance(this.#timelineId).getItemControllers(this);\n\t}\n\n\tsetData(data: ConfigurableItemData): void\n\t{\n\t\tthis.#type = data.type || null;\n\t\tthis.#timestamp = data.timestamp || null;\n\t\tthis.#layout = new Layout(data.layout || {});\n\t}\n\n\tgetLayout(): Layout\n\t{\n\t\treturn this.#layout;\n\t}\n\n\tgetType(): string\n\t{\n\t\treturn this.#type;\n\t}\n\n\tlayout(options): void\n\t{\n\t\tlet needBindToContainer = true;\n\t\tlet bindTo = null;\n\t\tif (Type.isPlainObject(options))\n\t\t{\n\t\t\tneedBindToContainer = BX.prop.getBoolean(options, 'add', true);\n\t\t\tbindTo = Type.isElementNode(options['anchor']) ? options['anchor'] : null;\n\t\t}\n\t\tthis.setWrapper(Dom.create({tag: 'div', attrs: {className: this.#itemClassName}}));\n\t\tthis.#initLayoutApp();\n\n\t\tif (needBindToContainer)\n\t\t{\n\t\t\tif (bindTo && bindTo.nextSibling)\n\t\t\t{\n\t\t\t\tDom.insertBefore(this.getWrapper(), bindTo.nextSibling);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tDom.append(this.getWrapper(), this.#container);\n\t\t\t}\n\t\t}\n\t}\n\n\trefreshLayout(): void\n\t{\n\t\t// try to refresh layout via vue reactivity, if possible:\n\t\tif (this.#layoutComponent)\n\t\t{\n\t\t\tthis.#layoutComponent.setLayout(this.getLayout().asPlainObject());\n\t\t}\n\t\telse\n\t\t{\n\t\t\tsuper.refreshLayout();\n\t\t}\n\t}\n\n\tclearLayout(): void\n\t{\n\t\tfor (const controller of this.#controllers)\n\t\t{\n\t\t\tcontroller.onBeforeItemClearLayout(this);\n\t\t}\n\t\tthis.#layoutApp.unmount();\n\t\tsuper.clearLayout();\n\t}\n\n\tgetCreatedDate(): Date\n\t{\n\t\tconst serverTimezoneDate = (this.#timestamp ? new Date(this.#timestamp * 1000) : new Date());\n\n\t\treturn BX.prop.extractDate((new DatetimeConverter(serverTimezoneDate)).toUserTime().getValue());\n\t}\n\n\tgetSourceId(): number\n\t{\n\t\tlet id = this.getId();\n\t\tif (!Type.isInteger(id))\n\t\t{\n\t\t\t// id is like ACTIVITY_12\n\t\t\tid = Text.toInteger(id.replace(/^\\D+/g, ''));\n\t\t}\n\n\t\treturn id;\n\t}\n\n\t#initLayoutApp(): void\n\t{\n\t\tif (!this.#layoutApp)\n\t\t{\n\t\t\tthis.#layoutApp = BitrixVue.createApp(Item, this.#getLayoutAppProps());\n\n\t\t\tconst contentBlockComponents = this.#getContentBlockComponents();\n\t\t\tfor (const componentName in contentBlockComponents)\n\t\t\t{\n\t\t\t\tthis.#layoutApp.component(componentName, contentBlockComponents[componentName]);\n\t\t\t}\n\n\t\t\tthis.#layoutComponent = this.#layoutApp.mount(this.getWrapper());\n\t\t}\n\t}\n\n\t#getLayoutAppProps(): Object\n\t{\n\t\treturn {\n\t\t\tinitialLayout: this.getLayout().asPlainObject(),\n\t\t\tid: String(this.getId()),\n\t\t\tuseShortTimeFormat: this.#useShortTimeFormat,\n\t\t\tisReadOnly: this.#isReadOnly,\n\t\t\tstreamType: this.#streamType,\n\t\t\tonAction: this.#onLayoutAppAction.bind(this),\n\t\t};\n\t}\n\n\t#onLayoutAppAction(action: string, actionParams: ?Object)\n\t{\n\t\tfor (const controller of this.#controllers)\n\t\t{\n\t\t\tcontroller.onItemAction(this, action, actionParams);\n\t\t}\n\t}\n\n\t#getContentBlockComponents(): Object\n\t{\n\t\tlet components = {};\n\t\tfor (const controller of this.#controllers)\n\t\t{\n\t\t\tcomponents = Object.assign(components, controller.getContentBlockComponents(this));\n\t\t}\n\n\t\treturn components;\n\t}\n\n\tsetContainer(container): void\n\t{\n\t\tthis.#container = container;\n\t}\n\n\tgetContainer(): HTMLElement\n\t{\n\t\treturn this.#container;\n\t}\n\n\tgetDeadline(): ?Date\n\t{\n\t\tif (!this.#timestamp)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\treturn (new DatetimeConverter(new Date(this.#timestamp * 1000))).toUserTime().getValue();\n\t}\n\n\tisReadOnly(): boolean\n\t{\n\t\treturn this.#isReadOnly;\n\t}\n\n\tclone(): ConfigurableItem\n\t{\n\t\treturn ConfigurableItem.create(this.getId(), {\n\t\t\ttimelineId: this.#timelineId,\n\t\t\tcontainer: this.getContainer(),\n\t\t\titemClassName: this.#itemClassName,\n\t\t\tuseShortTimeFormat: this.#useShortTimeFormat,\n\t\t\tisReadOnly: this.#isReadOnly,\n\t\t\tstreamType: this.#streamType,\n\t\t\tdata: {\n\t\t\t\ttype: this.#type,\n\t\t\t\ttimestamp: this.#timestamp,\n\t\t\t\tlayout: this.getLayout().asPlainObject(),\n\t\t\t},\n\t\t});\n\t}\n\n\tstatic create(id, settings): ConfigurableItem\n\t{\n\t\tconst self = new ConfigurableItem();\n\t\tself.initialize(id, settings);\n\t\treturn self;\n\t}\n}\n","import ConfigurableItem from '../configurable-item';\n\nexport class Base\n{\n\tonItemAction(item: ConfigurableItem, action: String, actionData: ?Object): void\n\t{\n\n\t}\n\n\tgetContentBlockComponents(item: ConfigurableItem): Object\n\t{\n\t\treturn {};\n\t}\n\n\t/**\n\t * Will be executed before item node deleted from DOM\n\t * @param item\n\t */\n\tonBeforeItemClearLayout(item: ConfigurableItem): void\n\t{\n\n\t}\n\n\tstatic isItemSupported(item: ConfigurableItem): boolean\n\t{\n\t\treturn false;\n\t}\n}\n","import {Base} from './base';\nimport ConfigurableItem from '../configurable-item';\nimport {ajax as Ajax} from 'main.core';\nimport { MessageBox, MessageBoxButtons } from 'ui.dialogs.messagebox';\nimport {UI} from 'ui.notification';\n\nexport class Activity extends Base\n{\n\tonItemAction(item: ConfigurableItem, action: String, actionData: ?Object): void\n\t{\n\t\tif (action === 'Activity:Edit' && actionData && actionData.activityId)\n\t\t{\n\t\t\tthis.#editActivity(actionData.activityId);\n\t\t}\n\t\tif (action === 'Activity:View' && actionData && actionData.activityId)\n\t\t{\n\t\t\tthis.#viewActivity(actionData.activityId);\n\t\t}\n\t\tif (action === 'Activity:Delete' && actionData && actionData.activityId)\n\t\t{\n\t\t\tconst confirmationText = actionData.confirmationText ?? '';\n\t\t\tif (confirmationText)\n\t\t\t{\n\t\t\t\tMessageBox.show({\n\t\t\t\t\tmessage: confirmationText,\n\t\t\t\t\tmodal: true,\n\t\t\t\t\tbuttons: MessageBoxButtons.YES_NO,\n\t\t\t\t\tonYes: () => {\n\t\t\t\t\t\treturn this.#deleteActivity(actionData.activityId, actionData.ownerTypeId, actionData.ownerId);\n\t\t\t\t\t},\n\t\t\t\t\tonNo: (messageBox) => {\n\t\t\t\t\t\tmessageBox.close();\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.#deleteActivity(actionData.activityId, actionData.ownerTypeId, actionData.ownerId);\n\t\t\t}\n\t\t}\n\t}\n\n\t#viewActivity(id): void\n\t{\n\t\tconst editor = this.#getActivityEditor();\n\t\tif (editor && id)\n\t\t{\n\t\t\teditor.viewActivity(id);\n\t\t}\n\t}\n\n\t#editActivity(id): void\n\t{\n\t\tconst editor = this.#getActivityEditor();\n\t\tif (editor && id)\n\t\t{\n\t\t\teditor.editActivity(id);\n\t\t}\n\t}\n\n\t#deleteActivity(activityId: Number, ownerTypeId: Number, ownerId: Number)\n\t{\n\t\treturn Ajax.runAction(\n\t\t\t'crm.timeline.activity.delete',\n\t\t\t{\n\t\t\t\tdata: {\n\t\t\t\t\tactivityId,\n\t\t\t\t\townerTypeId,\n\t\t\t\t\townerId,\n\t\t\t\t}\n\t\t\t}\n\t\t).then(() => {\n\t\t\treturn true;\n\t\t}, (response) =>\n\t\t{\n\t\t\tUI.Notification.Center.notify({\n\t\t\t\tcontent: response.errors[0].message,\n\t\t\t\tautoHideDelay: 5000,\n\t\t\t});\n\n\t\t\treturn true;\n\t\t});\n\t}\n\n\t#getActivityEditor(): BX.CrmActivityEditor\n\t{\n\t\treturn BX.CrmActivityEditor.getDefault();\n\t}\n\n\tstatic isItemSupported(item: ConfigurableItem): boolean\n\t{\n\t\tconst itemType = item.getType();\n\n\t\treturn (itemType.indexOf('Activity:') === 0); // for items with type started from `Activity:`\n\t}\n}\n\n","export class TextColor {\n\tstatic GREEN = 'green';\n\tstatic BASE_50 = 'base-50';\n\tstatic BASE_70 = 'base-70';\n\tstatic BASE_90 = 'base-90';\n}","export class TextWeight {\n\tstatic NORMAL = 'normal';\n\tstatic MEDIUM = 'medium';\n\tstatic BOLD = 'bold';\n}","export class TextSize {\n\tstatic XS = 'xs';\n\tstatic SM = 'sm';\n\tstatic MD = 'md';\n}","import { TextColor } from '../enums/text-color';\nimport { TextWeight } from '../enums/text-weight';\nimport { TextSize } from '../enums/text-size';\n\nexport default {\n\tprops: {\n\t\tvalue: String,\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t},\n\t\tcolor: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t},\n\t\tweight: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: 'normal',\n\t\t},\n\t\tsize: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: 'md',\n\t\t}\n\t},\n\tcomputed: {\n\t\tclassName() {\n\t\t\treturn [\n\t\t\t\t'crm-timeline__text-block',\n\t\t\t\tthis.colorClassname,\n\t\t\t\tthis.weightClassname,\n\t\t\t\tthis.sizeClassname,\n\t\t\t]\n\t\t},\n\t\tcolorClassname() {\n\t\t\tconst upperCaseColorProp = this.color ? this.color.toUpperCase() : '';\n\t\t\tconst color = TextColor[upperCaseColorProp] ? TextColor[upperCaseColorProp] : '';\n\t\t\treturn `--color-${color}`;\n\t\t},\n\n\t\tweightClassname() {\n\t\t\tconst upperCaseWeightProp = this.weight ? this.weight.toUpperCase() : '';\n\t\t\tconst weight = TextWeight[upperCaseWeightProp] ? TextWeight[upperCaseWeightProp] : TextWeight.NORMAL;\n\t\t\treturn `--weight-${weight}`\n\t\t},\n\n\t\tsizeClassname() {\n\t\t\tconst upperCaseWeightProp = this.size ? this.size.toUpperCase() : '';\n\t\t\tconst size = TextSize[upperCaseWeightProp] ? TextSize[upperCaseWeightProp] : TextSize.SM;\n\t\t\treturn `--size-${size}`;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<span\n\t\t\t:title=\"title\"\n\t\t\t:class=\"className\"\n\t\t>\n\t\t\t{{value}}\n\t\t</span>`\n};\n","import {Action} from \"../../action\";\n\nexport default {\n\tprops: {\n\t\ttext: String,\n\t\taction: Object,\n\t\tbold: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: false,\n\t\t}\n\t},\n\tcomputed: {\n\t\thref(): ?string\n\t\t{\n\t\t\tif (!this.action)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tconst action = new Action(this.action);\n\t\t\tif (action.isRedirect())\n\t\t\t{\n\t\t\t\treturn action.getValue();\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\n\t\tclassName() {\n\t\t\treturn {\n\t\t\t\t'crm-timeline__card_link': true,\n\t\t\t\t'--bold': this.bold,\n\t\t\t}\n\t\t},\n\t},\n\tmethods: {\n\t\texecuteAction(): void\n\t\t{\n\t\t\tif (this.action)\n\t\t\t{\n\t\t\t\tconst action = new Action(this.action);\n\t\t\t\taction.execute(this);\n\t\t\t}\n\t\t}\n\t},\n\n\ttemplate:\n\t\t`\n\t\t\t<a\n\t\t\t\tv-if=\"href\"\n\t\t\t\t:href=\"href\"\n\t\t\t\t:class=\"className\"\n\t\t\t>\n\t\t\t{{text}}\n\t\t\t</a>\n\t\t\t<span\n\t\t\t\tv-else\n\t\t\t\t@click=\"executeAction\"\n\t\t\t\t:class=\"className\"\n\t\t\t>\n\t\t\t\t{{text}}\n\t\t\t</span>\n\t\t`\n};\n","export default {\n\tprops: {\n\t\ttitle: String,\n\t\tinline: Boolean,\n\t\tcontentBlock: Object,\n\t},\n\tcomputed: {\n\t\tclassName(): Object\n\t\t{\n\t\t\treturn {\n\t\t\t\t'crm-timeline__card-container_info': true,\n\t\t\t\t'--inline': this.inline,\n\t\t\t}\n\t\t}\n\t},\n\n\ttemplate:\n\t\t`\n\t\t\t<div :class=\"className\">\n\t\t\t\t<div class=\"crm-timeline__card-container_info-title\">{{ title }}</div>\n\t\t\t\t<div class=\"crm-timeline__card-container_info-value\">\n\t\t\t\t\t<component :is=\"contentBlock.rendererName\" v-bind=\"contentBlock.properties\"></component>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`\n};\n","import {Type} from 'main.core';\n\nexport default {\n\tprops: {\n\t\tblocks: Object,\n\t},\n\tmounted() {\n\t\tconst blocks = this.$refs.blocks;\n\t\tthis.visibleBlocks.forEach((block, index) => {\n\t\t\tif (Type.isDomNode(blocks[index].$el))\n\t\t\t{\n\t\t\t\tblocks[index].$el.setAttribute('data-id', block.id);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthrow new Error('Vue component \"' + block.rendererName + '\" was not found');\n\t\t\t}\n\t\t});\n\t},\n\tcomputed: {\n\t\tvisibleBlocks(): Array\n\t\t{\n\t\t\treturn Object.keys(this.blocks)\n\t\t\t\t.map((id) => ({id, ...this.blocks[id]}))\n\t\t\t\t.filter((item) => (item.scope !== 'mobile'))\n\t\t\t;\n\t\t},\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<span class=\"crm-timeline-block-line-of-texts\">\n\t\t\t<span\n\t\t\t\tv-for=\"(block) in visibleBlocks\"\n\t\t\t\t:key=\"block.id\"\n\t\t\t>\n\t\t\t\t<component :is=\"block.rendererName\"\n\t\t\t\t\t\t   v-bind=\"block.properties\"\n\t\t\t\t\t\t   ref=\"blocks\"/>\n\t\t\t<span>&nbsp;</span>\n\t\t\t</span>\n\t\t</span>`\n};\n","import {AudioPlayer} from 'ui.vue3.components.audioplayer';\nimport {BitrixVue} from 'ui.vue3';\nimport {Button} from 'ui.buttons';\n\nconst defaultPlaybackRateValues = [0.5, 1, 1.25, 1.5, 1.75, 2];\n\nexport const TimelineAudio = BitrixVue.cloneComponent(AudioPlayer, {\n\tprops: {\n\t\tplaybackRateValues: {\n\t\t\ttype: Array,\n\t\t\trequired: false,\n\t\t\tdefault: () => defaultPlaybackRateValues,\n\t\t},\n\t\tisShowPlaybackRateMenu: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: true,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\t...this.parentData(),\n\t\t\tplaybackRate: 1,\n\t\t}\n\t},\n\tcomputed: {\n\t\tcontainerClassname() {\n\t\t\treturn [\n\t\t\t\t'crm-timeline__audioplayer-contianer',\n\t\t\t\t'ui-vue-audioplayer-container', {\n\t\t\t\t'ui-vue-audioplayer-container-dark': this.isDark,\n\t\t\t\t'ui-vue-audioplayer-container-mobile': this.isMobile,\n\t\t\t}];\n\t\t},\n\t\tcontrolClassname() {\n\t\t\treturn [\n\t\t\t\t'ui-vue-audioplayer-control',\n\t\t\t\t'ui-btn-icon-start', {\n\t\t\t\t'ui-vue-audioplayer-control-loader': this.loading,\n\t\t\t\t'ui-vue-audioplayer-control-play': !this.loading && this.state !== this.State.play,\n\t\t\t\t'ui-vue-audioplayer-control-pause': !this.loading && this.state === this.State.play,\n\t\t\t}];\n\t\t},\n\t\ttimeCurrentClassname() {\n\t\t\treturn [\n\t\t\t\t'ui-vue-audioplayer-time',\n\t\t\t\t'ui-vue-audioplayer-time-current',\n\t\t\t\t{\n\t\t\t\t\t'--is-playing': this.state === this.State.play,\n\t\t\t\t},\n\t\t\t];\n\t\t},\n\t\ttotalTimeClassname() {\n\t\t\treturn [\n\t\t\t\t'ui-vue-audioplayer-total-time',\n\t\t\t\t{\n\t\t\t\t\t'--hidden': this.isTotalTimeHidden,\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\n\t\tprogressPosition() {\n\t\t\treturn `width: ${this.progressInPixel}px;`;\n\t\t},\n\t\tseekPosition() {\n\t\t\tconst minSeekWidth = 20;\n\t\t\tconst seekWidth = this.$refs.seek?.offsetWidth ? this.$refs.seek.offsetWidth : minSeekWidth;\n\t\t\treturn `left: ${this.progressInPixel - (seekWidth / 2)}px;`;\n\t\t},\n\n\t\tformatTimeCurrent() {\n\t\t\treturn this.formatTime(this.timeCurrent);\n\t\t},\n\t\tformatTimeTotal() {\n\t\t\treturn this.formatTime(this.timeTotal);\n\t\t},\n\n\t\tisTotalTimeHidden() {\n\t\t\tconst totalTimeRef = this.$refs.totalTime;\n\t\t\tconst seekRef = this.$refs.seek;\n\t\t\tif (!this.loaded || !totalTimeRef || !seekRef) return true;\n\t\t\tconst seekWidth = seekRef.offsetWidth;\n\t\t\treturn (this.progressInPixel + seekWidth / 2) >= totalTimeRef.offsetLeft;\n\t\t},\n\n\t\tplaybackRateMenuItems() {\n\t\t\treturn this.playbackRateValues.map((rate) => {\n\t\t\t\treturn this.createPlaybackRateMenuItem({\n\t\t\t\t\ttext: this.getPlaybackRateOptionText(rate),\n\t\t\t\t\trate,\n\t\t\t\t\tisActive: rate === this.playbackRate,\n\t\t\t\t})\n\t\t\t});\n\t\t},\n\t},\n\tmethods: {\n\t\tchangePlaybackRate(playbackRate: number) {\n\t\t\tconst audio = this.$refs.source;\n\n\t\t\tthis.playbackRate = playbackRate;\n\t\t\taudio.playbackRate = playbackRate;\n\t\t},\n\t\tcreatePlaybackRateMenuItem(options = {}) {\n\t\t\tconst rate = options.rate || 1;\n\t\t\tconst text = options.text || '';\n\t\t\tconst isActive = options.isActive || false;\n\t\t\tconst className = `playback-speed-menu-item ${isActive ? 'menu-popup-item-accept-sm' : ''}`;\n\t\t\treturn {\n\t\t\t\ttext: text,\n\t\t\t\tclassName,\n\t\t\t\tonclick: (event, item) => {\n\t\t\t\t\tthis.changePlaybackRate(rate);\n\t\t\t\t\titem.menuWindow.popupWindow.close();\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tgetPlaybackRateOptionText(rate: number): string {\n\t\t\treturn `${rate}x`;\n\t\t},\n\t\trenderPlaybackRateButton() {\n\t\t\tconst playbackRateButtonContainer = this.$refs.playbackRateButtonContainer;\n\t\t\tplaybackRateButtonContainer.innerHTML = '';\n\t\t\tconst btn = new Button({\n\t\t\t\ttext: this.getPlaybackRateOptionText(this.playbackRate),\n\t\t\t\tround: true,\n\t\t\t\tdropdown: true,\n\t\t\t\tcolor: Button.Color.LIGHT_BORDER,\n\t\t\t\tsize: Button.Size.EXTRA_SMALL,\n\t\t\t\tnoCaps: true,\n\t\t\t\tclassName: 'playback-speed-button crm-timeline__playback-speed-menu_scope',\n\t\t\t\tmenu: {\n\t\t\t\t\tclassName: 'crm-timeline__playback-speed-menu_scope',\n\t\t\t\t\twidth: 100,\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tonPopupShow: ()=> {\n\t\t\t\t\t\t\tconst btnContainerWidth = btn.getContainer().offsetWidth;\n\t\t\t\t\t\t\tconst popupWindow = btn.getMenuWindow().getPopupWindow();\n\n\t\t\t\t\t\t\tpopupWindow.setWidth(btnContainerWidth * 1.8);\n\t\t\t\t\t\t\tpopupWindow.setOffset({\n\t\t\t\t\t\t\t\toffsetLeft: btnContainerWidth - 8,\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tpopupWindow.adjustPosition();\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tangle: {\n\t\t\t\t\t\tposition: 'top',\n\t\t\t\t\t},\n\t\t\t\t\toffsetLeft: 0,\n\t\t\t\t\titems: this.playbackRateMenuItems,\n\t\t\t\t},\n\t\t\t});\n\n\t\t\tbtn.renderTo(playbackRateButtonContainer);\n\t\t},\n\t},\n\twatch: {\n\t\tplaybackRate() {\n\t\t\tthis.renderPlaybackRateButton();\n\t\t},\n\t},\n\tmounted() {\n\t\tthis.renderPlaybackRateButton();\n\t},\n\ttemplate: `\n\t\t<div\n\t\t\t:class=\"containerClassname\"\n\t\t\tref=\"body\"\n\t\t>\n\t\t\t<div class=\"ui-vue-audioplayer-controls-container\">\n\t\t\t\t<button :class=\"controlClassname\" @click=\"clickToButton\">\n\t\t\t\t\t<svg v-if=\"state !== State.play\" class=\"ui-vue-audioplayer-control-icon\" width=\"9\" height=\"12\" viewBox=\"0 0 9 12\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t\t\t\t<path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M8.52196 5.40967L1.77268 0.637568C1.61355 0.523473 1.40621 0.510554 1.23498 0.604066C1.06375 0.697578 0.957151 0.881946 0.958524 1.0822V10.6259C0.956507 10.8265 1.06301 11.0114 1.23449 11.105C1.40597 11.1987 1.61368 11.1854 1.77268 11.0706L8.52196 6.29847C8.66466 6.19871 8.75016 6.0322 8.75016 5.85407C8.75016 5.67593 8.66466 5.50942 8.52196 5.40967Z\"/>\n\t\t\t\t\t</svg>\n\t\t\t\t\t<svg v-else width=\"8\" height=\"10\" viewBox=\"0 0 8 10\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t\t\t\t<path d=\"M2.5625 0.333008H0.375V9.66634H2.5625V0.333008Z\" fill=\"inherit\" />\n\t\t\t\t\t\t<path d=\"M7.25 0.333008H5.0625V9.66634H7.25V0.333008Z\" fill=\"inherit\" />\n\t\t\t\t\t</svg>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t\t<div class=\"ui-vue-audioplayer-timeline-container\">\n\t\t\t\t<div class=\"ui-vue-audioplayer-track-container\" @mousemove=\"seeking\" @click=\"setPosition\" ref=\"track\">\n\t\t\t\t\t<div class=\"ui-vue-audioplayer-track-mask\"></div>\n\t\t\t\t\t<div class=\"ui-vue-audioplayer-track\" :style=\"progressPosition\"></div>\n\t\t\t\t\t<div @click.stop class=\"ui-vue-audioplayer-track-seek\" :style=\"seekPosition\">\n\t\t\t\t\t\t<div ref=\"seek\" class=\"ui-vue-audioplayer-track-seek-icon\"></div>\n\t\t\t\t\t\t<div :class=\"timeCurrentClassname\">{{formatTimeCurrent}}</div>\n\t\t\t\t\t</div>\n<!--\t\t\t\t\t<div class=\"ui-vue-audioplayer-track-event\" @mousemove=\"seeking\"></div>-->\n\t\t\t\t</div>\n\t\t\t\t<div :class=\"totalTimeClassname\">\n\t\t\t\t\t<div ref=\"totalTime\" class=\"ui-vue-audioplayer-time\">{{formatTimeTotal}}</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div\n\t\t\t\tv-if=\"isShowPlaybackRateMenu\"\n\t\t\t\tref=\"playbackRateButtonContainer\"\n\t\t\t\tclass=\"ui-vue-audioplayer_playback-speed-menu-container\">\n\t\t\t</div>\n\t\t\t<audio\n\t\t\t\tv-if=\"src\" \n\t\t\t\t:src=\"src\"\n\t\t\t\tclass=\"ui-vue-audioplayer-source\"\n\t\t\t\tref=\"source\"\n\t\t\t\t:preload=\"preload\"\n\t\t\t\t@abort=\"audioEventRouter('abort', $event)\"\n\t\t\t\t@error=\"audioEventRouter('error', $event)\"\n\t\t\t\t@suspend=\"audioEventRouter('suspend', $event)\"\n\t\t\t\t@canplay=\"audioEventRouter('canplay', $event)\"\n\t\t\t\t@canplaythrough=\"audioEventRouter('canplaythrough', $event)\"\n\t\t\t\t@durationchange=\"audioEventRouter('durationchange', $event)\"\n\t\t\t\t@loadeddata=\"audioEventRouter('loadeddata', $event)\"\n\t\t\t\t@loadedmetadata=\"audioEventRouter('loadedmetadata', $event)\"\n\t\t\t\t@timeupdate=\"audioEventRouter('timeupdate', $event)\"\n\t\t\t\t@play=\"audioEventRouter('play', $event)\"\n\t\t\t\t@playing=\"audioEventRouter('playing', $event)\"\n\t\t\t\t@pause=\"audioEventRouter('pause', $event)\"\n\t\t\t></audio>\n\t\t</div>\n\t`\n});","export class ClientMark\n{\n\tstatic POSITIVE = 'positive';\n\tstatic NEUTRAL = 'neutral';\n\tstatic NEGATIVE = 'negative';\n}\n","import {ClientMark as ClientMarkType} from '../enums/client-mark';\n\nexport const ClientMark = {\n\tprops: {\n\t\tmark: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: ClientMarkType.POSITIVE,\n\t\t},\n\n\t\ttext: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t},\n\n\t},\n\tcomputed: {\n\t\tclassName(): Object {\n\t\t\treturn {\n\t\t\t\t'crm-timeline__client-mark': true,\n\t\t\t\t'--positive-mark': this.mark === ClientMarkType.POSITIVE,\n\t\t\t\t'--neutral-mark': this.mark === ClientMarkType.NEUTRAL,\n\t\t\t\t'--negative-mark': this.mark === ClientMarkType.NEGATIVE,\n\t\t\t}\n\t\t},\n\n\t\ticonClassname() {\n\t\t\treturn {\n\t\t\t\t'crm-timeline__client-mark_icon': true,\n\t\t\t\t'--flipped': this.mark === ClientMarkType.NEGATIVE,\n\t\t\t}\n\t\t},\n\n\n\t},\n\ttemplate: `\n\t\t<div :class=\"className\">\n\t\t\t<i class=\"crm-timeline__client-mark_icon-wrapper\">\n\t\t\t\t<svg :class=\"iconClassname\" width=\"11.35\" height=\"11.36\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t\t\t<path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M14.8367 6.7166L11.2351 6.71731C11.1314 6.71731 11.0313 6.65735 10.9925 6.56213C10.8303 6.15654 10.8366 5.69947 11.0144 5.29671C11.3127 4.42841 11.3466 3.49029 11.1124 2.60224C10.8676 1.9914 10.8028 0.875521 9.67347 0.82403C9.32009 0.876226 9.01184 1.08854 8.8341 1.39819C8.80235 1.45321 8.78895 1.5181 8.78895 1.58088C8.78895 1.58088 8.84085 2.6644 8.78895 3.41764C8.73706 4.17087 7.29571 6.08954 6.37945 7.30769C6.32161 7.38528 6.24049 7.43607 6.14456 7.45088C5.80104 7.50232 5.14581 7.58943 4.90962 7.62062C4.85434 7.62792 4.82201 7.69735 4.82201 7.72994C4.82201 9.2527 4.82201 11.5306 4.82201 14.5636C4.82201 14.5887 4.85234 14.6435 4.90623 14.6524C5.09126 14.6829 5.55408 14.7676 6.02112 14.9178C6.60798 15.1061 7.0968 15.5519 8.07513 15.882C8.12662 15.8997 8.18375 15.9088 8.23807 15.9088H12.8321C13.4253 15.803 13.8668 15.2959 13.8972 14.6872C13.9056 14.3479 13.8379 14.0121 13.699 13.7039C13.6792 13.6594 13.7053 13.6129 13.7533 13.6037C14.3422 13.4965 15.0786 12.3785 14.1715 11.4778C14.1476 11.4545 14.1518 11.4228 14.1842 11.4143C14.6843 11.2866 15.0674 10.8874 15.1844 10.3894C15.2296 10.199 15.2134 10.0022 15.1569 9.81524C15.0906 9.59235 14.9848 9.38356 14.8445 9.19735C14.8092 9.15079 14.8289 9.09013 14.8854 9.07179C15.3834 8.90321 15.7262 8.4271 15.7226 7.88538C15.7798 7.35424 15.353 6.71731 14.8367 6.7166ZM3.412 7.00439H0.808518C0.673089 7.00439 0.570107 7.1243 0.593384 7.25479L2.10567 15.7508C2.12895 15.8813 2.24392 15.9766 2.37865 15.9766H3.34146C3.49029 15.9766 3.61091 15.8588 3.61091 15.7135L3.63207 7.22023C3.63207 7.10102 3.53403 7.00439 3.412 7.00439Z\"/>\n\t\t\t\t</svg>\n\t\t\t</i>\n\t\t\t<span class=\"crm-timeline__client-mark_text\">{{ text }}</span>\n\t\t</div>\n\t`\n}\n","import { CurrencyCore } from \"currency.currency-core\";\nimport { Type } from \"main.core\";\n\nexport default {\n\tprops: {\n\t\topportunity: Number,\n\t\tcurrencyId: String,\n\t},\n\tcomputed: {\n\t\tmoneyHtml(): ?string\n\t\t{\n\t\t\tif (!Type.isNumber(this.opportunity) || !Type.isStringFilled(this.currencyId))\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn CurrencyCore.currencyFormat(this.opportunity, this.currencyId, true);\n\t\t}\n\t},\n\ttemplate: `<span v-if=\"moneyHtml\" v-html=\"moneyHtml\"></span>`\n};\n","import Text from './text';\nimport { Action } from \"../../action\";\nimport {Runtime} from \"main.core\";\nimport {BitrixVue} from 'ui.vue3';\n\nexport default BitrixVue.cloneComponent(Text, {\n\tcomponents: {\n\t\tText,\n\t},\n\tprops: {\n\t\taction: Object,\n\t},\n\tdata(): Object {\n\t\treturn {\n\t\t\tisEdit: false,\n\t\t\tcurrentValue: this.value,\n\t\t\tinitialValue: this.value,\n\t\t\tactionTimeoutId: null,\n\t\t};\n\t},\n\tcomputed: {\n\t\ttextProps(): Object {\n\t\t\treturn {\n\t\t\t\t...this.$props,\n\t\t\t\tvalue: this.currentValue,\n\t\t\t};\n\t\t},\n\t},\n\tmethods: {\n\t\tenableEdit(): void\n\t\t{\n\t\t\tthis.cancelScheduledActionExecution();\n\n\t\t\tthis.isEdit = true;\n\n\t\t\tthis.$nextTick(() => {\n\t\t\t\tthis.$refs.input.focus();\n\t\t\t});\n\t\t},\n\t\tdisableEdit(): void\n\t\t{\n\t\t\tthis.isEdit = false;\n\n\t\t\tthis.scheduleActionExecution();\n\t\t},\n\n\t\tscheduleActionExecution(): void\n\t\t{\n\t\t\tthis.cancelScheduledActionExecution();\n\n\t\t\tthis.actionTimeoutId = setTimeout(this.executeAction.bind(this), 3 * 1000);\n\t\t},\n\t\tcancelScheduledActionExecution(): void\n\t\t{\n\t\t\tif (this.actionTimeoutId)\n\t\t\t{\n\t\t\t\tclearTimeout(this.actionTimeoutId);\n\t\t\t\tthis.actionTimeoutId = null;\n\t\t\t}\n\t\t},\n\t\texecuteAction(): void\n\t\t{\n\t\t\tif (!this.action || this.currentValue === this.initialValue)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// to avoid unintended props mutation\n\t\t\tconst actionDescription = Runtime.clone(this.action);\n\n\t\t\tactionDescription.actionParams ??= {};\n\t\t\tactionDescription.actionParams.value = this.currentValue;\n\n\t\t\tconst action = new Action(actionDescription);\n\t\t\taction.execute(this);\n\n\t\t\tthis.initialValue = this.currentValue;\n\t\t},\n\t},\n\ttemplate: `\n\t\t\t<input\n\t\t\t\tv-if=\"isEdit\"\n\t\t\t\tref=\"input\"\n\t\t\t\ttype=\"text\"\n\t\t\t\tv-model.trim=\"currentValue\"\n\t\t\t\t@focusout=\"disableEdit\"\n\t\t\t>\n\t\t\t<Text\n\t\t\t\tv-else\n\t\t\t\tv-bind=\"textProps\"\n\t\t\t\t@click=\"enableEdit\"\n\t\t\t/>\n\t\t`\n});\n\n","import { DateTimeFormat } from \"main.date\";\nimport { Runtime } from \"main.core\";\nimport Link from './link';\nimport { Action } from \"../../action\";\nimport { DatetimeConverter } from \"crm.timeline.tools\";\n\nexport default {\n\tcomponents: {\n\t\tLink,\n\t},\n\tprops: {\n\t\tdate: Number,\n\t\taction: Object,\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tcurrentDate: this.date,\n\t\t\tinitialDate: this.date,\n\t\t\tactionTimeoutId: null,\n\t\t};\n\t},\n\tcomputed: {\n\t\tcurrentDateObject(): ?Date\n\t\t{\n\t\t\treturn this.currentDate ? new Date(this.currentDate * 1000) : null;\n\t\t},\n\t\tcurrentDateInSiteFormat(): ?string\n\t\t{\n\t\t\tif (!this.currentDateObject)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn DateTimeFormat.format(DatetimeConverter.getSiteDateFormat(), this.currentDateObject);\n\t\t},\n\t\ttextProps(): Object\n\t\t{\n\t\t\treturn {\n\t\t\t\ttext: this.currentDateInSiteFormat,\n\t\t\t};\n\t\t},\n\t},\n\tmethods: {\n\t\topenCalendar(event: PointerEvent): void\n\t\t{\n\t\t\tthis.cancelScheduledActionExecution();\n\n\t\t\t// eslint-disable-next-line bitrix-rules/no-bx\n\t\t\tBX.calendar({\n\t\t\t\tnode: event.target,\n\t\t\t\tvalue: this.currentDateInSiteFormat,\n\t\t\t\tbTime: false,\n\t\t\t\tbHideTime: true,\n\t\t\t\tbSetFocus: false,\n\t\t\t\tcallback_after: (newDate: Date) => {\n\t\t\t\t\tthis.currentDate = Math.round(newDate.getTime() / 1000);\n\n\t\t\t\t\tthis.scheduleActionExecution();\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\tscheduleActionExecution(): void\n\t\t{\n\t\t\tthis.cancelScheduledActionExecution();\n\n\t\t\tthis.actionTimeoutId = setTimeout(this.executeAction.bind(this), 3 * 1000);\n\t\t},\n\t\tcancelScheduledActionExecution(): void\n\t\t{\n\t\t\tif (this.actionTimeoutId)\n\t\t\t{\n\t\t\t\tclearTimeout(this.actionTimeoutId);\n\t\t\t\tthis.actionTimeoutId = null;\n\t\t\t}\n\t\t},\n\t\texecuteAction(): void\n\t\t{\n\t\t\tif (!this.action)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.currentDate === this.initialDate)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// to avoid unintended props mutation\n\t\t\tconst actionDescription = Runtime.clone(this.action);\n\n\t\t\tactionDescription.actionParams ??= {};\n\t\t\tactionDescription.actionParams.value = this.currentDateObject;\n\n\t\t\tconst action = new Action(actionDescription);\n\t\t\taction.execute(this);\n\n\t\t\tthis.initialDate = this.currentDate;\n\t\t},\n\t},\n\ttemplate: `<Link @click=\"openCalendar\" v-bind=\"textProps\"></Link>`,\n};\n","import LineOfTextBlocks from './line-of-text-blocks';\nimport { AlertColor, AlertIcon } from 'ui.alerts';\n\nexport const PlayerAlert = {\n\tcomponents: {\n\t\tLineOfTextBlocks,\n\t},\n\tprops: {\n\t\tblocks: {\n\t\t\ttype: Object,\n\t\t\trequired: false,\n\t\t\tdefault: () => ({}),\n\t\t},\n\t\tcolor: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: AlertColor.DEFAULT,\n\t\t},\n\t\ticon: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: AlertIcon.NONE,\n\t\t},\n\t},\n\tcomputed: {\n\t\tcontainerClassname() {\n\t\t\treturn [\n\t\t\t\t'crm-timeline__player-alert',\n\t\t\t\t'ui-alert',\n\t\t\t\t'ui-alert-xs',\n\t\t\t\t'ui-alert-text-center',\n\t\t\t\tthis.color,\n\t\t\t\tthis.icon,\n\t\t\t]\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div :class=\"containerClassname\">\n\t\t\t<div class=\"ui-alert-message\">\n\t\t\t\t<LineOfTextBlocks :blocks=\"blocks\"></LineOfTextBlocks>\n\t\t\t</div>\n\t\t</div>\n\t`\n}","import { DateTimeFormat } from \"main.date\";\nimport { Runtime } from \"main.core\";\nimport { Action } from \"../../action\";\n\nexport default {\n\tprops: {\n\t\tdate: Number,\n\t\taction: Object,\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tcurrentDate: this.date,\n\t\t\tinitialDate: this.date,\n\t\t\tactionTimeoutId: null,\n\t\t};\n\t},\n\tcomputed: {\n\t\tcurrentFormatDate() {\n\t\t\tif (!this.currentDateObject)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn DateTimeFormat.format(this.dateFormat, this.currentDateObject);\n\t\t},\n\n\t\tdateFormat() {\n\t\t\treturn 'D, j M, H:i';\n\t\t},\n\n\t\tcurrentDateObject(): ?Date {\n\t\t\treturn this.currentDate ? new Date(this.currentDate * 1000) : null;\n\t\t},\n\n\t\tcalendarParams() {\n\t\t\treturn {\n\t\t\t\tvalue: this.currentFormatDate,\n\t\t\t\tbTime: true,\n\t\t\t\tbHideTime: false,\n\t\t\t\tbSetFocus: false,\n\t\t\t}\n\t\t},\n\t},\n\tmethods: {\n\t\topenCalendar(event: PointerEvent): void\n\t\t{\n\t\t\tthis.cancelScheduledActionExecution();\n\n\t\t\t// eslint-disable-next-line bitrix-rules/no-bx\n\t\t\tBX.calendar({\n\t\t\t\tnode: event.target,\n\t\t\t\tcallback_after: (newDate: Date) => {\n\t\t\t\t\tthis.currentDate = Math.round(newDate.getTime() / 1000);\n\n\t\t\t\t\tthis.scheduleActionExecution();\n\t\t\t\t},\n\t\t\t\t...this.calendarParams,\n\t\t\t});\n\t\t},\n\n\t\tscheduleActionExecution(): void\n\t\t{\n\t\t\tthis.cancelScheduledActionExecution();\n\n\t\t\tthis.actionTimeoutId = setTimeout(this.executeAction.bind(this), 3 * 1000);\n\t\t},\n\t\tcancelScheduledActionExecution(): void\n\t\t{\n\t\t\tif (this.actionTimeoutId)\n\t\t\t{\n\t\t\t\tclearTimeout(this.actionTimeoutId);\n\t\t\t\tthis.actionTimeoutId = null;\n\t\t\t}\n\t\t},\n\t\texecuteAction(): void\n\t\t{\n\t\t\tif (!this.action)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.currentDate === this.initialDate)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// to avoid unintended props mutation\n\t\t\tconst actionDescription = Runtime.clone(this.action);\n\n\t\t\tactionDescription.actionParams ??= {};\n\t\t\tactionDescription.actionParams.value = this.currentDateObject;\n\n\t\t\tconst action = new Action(actionDescription);\n\t\t\taction.execute(this);\n\n\t\t\tthis.initialDate = this.currentDate;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<span class=\"crm-timeline__date-pill\" @click=\"openCalendar\">\n\t\t\t<span>\n\t\t\t\t{{ currentFormatDate }}\n\t\t\t</span>\n\t\t\t<span class=\"crm-timeline__date-pill_caret\"></span>\n\t\t</span>`\n};","import {Base} from './base';\nimport ConfigurableItem from '../configurable-item';\nimport { Type } from \"main.core\";\n\nimport TextBlock from '../components/content-blocks/text';\nimport LinkBlock from '../components/content-blocks/link';\nimport WithTitle from '../components/content-blocks/with-title';\nimport LineOfTextBlocks from '../components/content-blocks/line-of-text-blocks';\nimport {TimelineAudio} from '../components/content-blocks/timeline-audio';\nimport {ClientMark} from '../components/content-blocks/client-mark';\nimport Money from '../components/content-blocks/money';\nimport EditableText from '../components/content-blocks/editable-text';\nimport EditableDate from '../components/content-blocks/editable-date';\nimport {PlayerAlert} from '../components/content-blocks/player-alert';\nimport {Note} from '../components/layout/note';\nimport DatePill from '../components/content-blocks/date-pill';\n\nexport class CommonContentBlocks extends Base\n{\n\tgetContentBlockComponents(Item: ConfigurableItem): Object\n\t{\n\t\treturn {\n\t\t\tTextBlock,\n\t\t\tLinkBlock,\n\t\t\tWithTitle,\n\t\t\tLineOfTextBlocks,\n\t\t\tTimelineAudio,\n\t\t\tClientMark,\n\t\t\tMoney,\n\t\t\tEditableText,\n\t\t\tEditableDate,\n\t\t\tPlayerAlert,\n\t\t\tDatePill,\n\t\t\tNote,\n\t\t};\n\t}\n\n\t/**\n\t * Process common events that aren't bound to specific item type\n\t */\n\tonItemAction(item: ConfigurableItem, action: String, actionData: ?Object)\n\t{\n\t\tif (action === 'Item:OpenEntityDetailTab' && Type.isStringFilled(actionData?.tabId))\n\t\t{\n\t\t\tthis.#openEntityDetailTab(actionData.tabId);\n\t\t}\n\t}\n\n\t#openEntityDetailTab(tabId: string): void\n\t{\n\t\t// the event is handled by compatible code, it's a pain to use EventEmitter in this case\n\t\t// eslint-disable-next-line bitrix-rules/no-bx\n\t\tBX.onCustomEvent(window, 'OpenEntityDetailTab', [tabId]);\n\t}\n\n\tstatic isItemSupported(item: ConfigurableItem): boolean\n\t{\n\t\treturn true; // common blocks can be used anywhere\n\t}\n}\n\n","export default {\n\tprops: {\n\t\tfrom: String,\n\t\tto: String,\n\t},\n\t// language=Vue\n\ttemplate: `<div class=\"crm-entity-stream-content-detail-info\">\n\t<span class=\"crm-entity-stream-content-detain-info-status\" v-if=\"from\">{{from}}</span>\n\t<span class=\"crm-entity-stream-content-detail-info-separator-icon\" v-if=\"from\"></span>\n\t<span class=\"crm-entity-stream-content-detain-info-status\" v-if=\"to\">{{to}}</span>\n\t</div>`\n};\n","import {Base} from './base';\nimport ConfigurableItem from '../configurable-item';\nimport ValueChange from '../components/content-blocks/value-change';\n\nexport class Modification extends Base\n{\n\tgetContentBlockComponents(Item: ConfigurableItem): Object\n\t{\n\t\treturn {\n\t\t\tValueChange,\n\t\t};\n\t}\n\n\tstatic isItemSupported(item: ConfigurableItem): boolean\n\t{\n\t\treturn (item.getType() === 'Modification');\n\t}\n}\n","export default {\n\tprops: {\n\t\tmessageHtml: String,\n\t\tisIncoming: Boolean,\n\t},\n\tcomputed: {\n\t\tclassName(): string\n\t\t{\n\t\t\treturn 'crm-entity-stream-content-detail-IM-message-' + (this.isIncoming ? 'incoming' : 'outgoing');\n\t\t},\n\t},\n\t// language=Vue\n\ttemplate: `<div class=\"crm-entity-stream-content-detail-IM\"><div :class=\"[className]\" v-html=\"messageHtml\"></div></div>`\n};\n","import {Base} from './base';\nimport ConfigurableItem from '../configurable-item';\nimport ChatMessage from '../components/content-blocks/chat-message';\n\nexport class OpenLines extends Base\n{\n\tgetContentBlockComponents(Item: ConfigurableItem): Object\n\t{\n\t\treturn {\n\t\t\tChatMessage,\n\t\t};\n\t}\n\n\tonItemAction(item: ConfigurableItem, action: String, actionData: ?Object): void\n\t{\n\t\tif (action === 'Openline:OpenChat' && actionData && actionData.dialogId)\n\t\t{\n\t\t\tthis.#openChat(actionData.dialogId);\n\t\t}\n\t}\n\n\t#openChat(dialogId): void\n\t{\n\t\tif (window.top['BXIM'])\n\t\t{\n\t\t\twindow.top['BXIM'].openMessengerSlider(dialogId, {RECENT: 'N', MENU: 'N'});\n\t\t}\n\t}\n\n\tstatic isItemSupported(item: ConfigurableItem): boolean\n\t{\n\t\treturn (item.getType() === 'Activity:OpenLine');\n\t}\n}\n\n","import {ajax as Ajax, Text, Loc} from 'main.core';\nimport {Router} from 'crm.router';\nimport {Base} from './base';\nimport {ajax} from 'main.core';\nimport {DateTimeFormat} from \"main.date\";\nimport { DatetimeConverter } from \"crm.timeline.tools\";\nimport { MessageBox, MessageBoxButtons } from 'ui.dialogs.messagebox';\n\nimport ConfigurableItem from '../configurable-item';\nimport {UI} from \"ui.notification\";\n\ndeclare type Signer = {\n\ttitle: string,\n}\n\nexport class SignDocument extends Base\n{\n\tonItemAction(item: ConfigurableItem, action: String, actionData: ?Object): void\n\t{\n\t\tconst documentId = Text.toInteger(actionData?.documentId);\n\t\tconst documentHash = actionData?.documentHash || '';\n\t\tconst activityId = Text.toInteger(actionData?.activityId);\n\t\tif ((action === 'SignDocument:Open' || action === 'Activity:SignDocument:Open') && documentId > 0)\n\t\t{\n\t\t\tthis.#openDocument(actionData);\n\t\t}\n\t\telse if ((action === 'SignDocument:Modify' || action === 'Activity:SignDocument:Modify') && documentId > 0)\n\t\t{\n\t\t\tthis.#modifyDocument(actionData);\n\t\t}\n\t\telse if ((action === 'SignDocument:UpdateActivityDeadline' || action === 'Activity:SignDocument:UpdateActivityDeadline') && activityId > 0)\n\t\t{\n\t\t\tthis.#updateActivityDeadline(activityId, actionData?.value);\n\t\t}\n\t\telse if (action === 'SignDocument:Resend' && documentId > 0 && actionData?.recipientHash)\n\t\t{\n\t\t\tthis.#resendDocument(actionData);\n\t\t}\n\t\telse if (action === 'SignDocument:TouchSigner' && documentId > 0)\n\t\t{\n\t\t\tthis.#touchSigner(actionData);\n\t\t}\n\t\telse if (action === 'SignDocument:Download' && documentHash)\n\t\t{\n\t\t\tthis.#download(actionData);\n\t\t}\n\t\telse if (action === 'SignDocumentEntry:Delete' && actionData?.entryId)\n\t\t{\n\t\t\tMessageBox.show({\n\t\t\t\tmessage: actionData?.confirmationText || '',\n\t\t\t\tmodal: true,\n\t\t\t\tbuttons: MessageBoxButtons.YES_NO,\n\t\t\t\tonYes: () =>\n\t\t\t\t{\n\t\t\t\t\treturn this.#deleteEntry(actionData.entryId);\n\t\t\t\t},\n\t\t\t\tonNo: (messageBox) =>\n\t\t\t\t{\n\t\t\t\t\tmessageBox.close();\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t}\n\n\t#deleteEntry(entryId): Promise\n\t{\n\t\tconsole.log('delete entry' + entryId);\n\t}\n\n\t#openDocument({\n\t\tdocumentId,\n\t\tmemberHash\n\t}): Promise\n\t{\n\t\treturn Router.Instance.openSignDocumentSlider(documentId, memberHash);\n\t}\n\n\t#modifyDocument({documentId}): Promise\n\t{\n\t\treturn Router.Instance.openSignDocumentModifySlider(documentId);\n\t}\n\n\tasync #updateActivityDeadline(activityId: number, value: ?Date): Promise<void>\n\t{\n\t\tconst valueInSiteFormat = DateTimeFormat.format(DatetimeConverter.getSiteDateFormat(), value);\n\n\t\tlet response: {data: {document?: {activityDeadline?: string}, success?: boolean, code?: number}};\n\t\ttry\n\t\t{\n\t\t\tresponse = await Ajax.runAction('crm.timeline.signdocument.updateActivityDeadline', {\n\t\t\t\tdata: {\n\t\t\t\t\tactivityId: activityId,\n\t\t\t\t\tactivityDeadline: valueInSiteFormat,\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t\tcatch (responseWithError)\n\t\t{\n\t\t\tconsole.error(responseWithError);\n\t\t\treturn;\n\t\t}\n\n\t\tconst newCreateDate = response.data.document?.activityDeadline;\n\n\t\tif (valueInSiteFormat !== newCreateDate)\n\t\t{\n\t\t\tconsole.error(\"Updated document create date without errors, but for some reason date from the backend doesn't match sent value\");\n\t\t}\n\t}\n\n\t#resendDocument({documentId, recipientHash, buttonId}): void\n\t{\n\t\tconst button = document.querySelector('[data-button-id=\"'+buttonId+'\"]');\n\t\tbutton.classList.add('ui-btn-wait');\n\t\tbutton.classList.add('ui-btn-disabled');\n\n\t\tajax.runAction(\n\t\t\t'sign.document.resendFile',\n\t\t\t{\n\t\t\t\tdata: {\n\t\t\t\t\tmemberHash: recipientHash,\n\t\t\t\t\tdocumentId: documentId\n\t\t\t\t},\n\t\t\t}\n\t\t).then(() =>\n\t\t{\n\t\t\tUI.Notification.Center.notify({\n\t\t\t\tcontent: Loc.getMessage('CRM_TIMELINE_ITEM_SIGN_DOCUMENT_RESEND_SUCCESS'),\n\t\t\t\tautoHideDelay: 5000,\n\t\t\t});\n\t\t\tbutton.classList.remove('ui-btn-wait');\n\t\t\tbutton.classList.remove('ui-btn-disabled');\n\t\t}, (response) =>\n\t\t{\n\t\t\tUI.Notification.Center.notify({\n\t\t\t\tcontent: response.errors[0].message,\n\t\t\t\tautoHideDelay: 5000,\n\t\t\t});\n\t\t\tbutton.classList.remove('ui-btn-wait');\n\t\t\tbutton.classList.remove('ui-btn-disabled');\n\t\t});\n\n\t\tconsole.log('resend document ' + documentId + ' for ' + recipientHash);\n\t}\n\n\t#touchSigner({documentId}): void\n\t{\n\t\tconsole.log('touch signer document ' + documentId);\n\t}\n\n\t#download({documentHash, memberHash, buttonId}): void\n\t{\n\t\tconst button = document.querySelector('[data-button-id=\"'+buttonId+'\"]');\n\t\tbutton.classList.add('ui-btn-wait');\n\t\tbutton.classList.add('ui-btn-disabled');\n\n\t\tconst req = ajax.xhr();\n\t\treq.open(\"GET\", '/bitrix/services/main/ajax.php?action=sign.document.getFileForSrc' +\n\t\t\t'&memberHash=' + memberHash +\n\t\t\t'&documentHash=' + documentHash, true);\n\t\treq.responseType = \"blob\";\n\n\t\treq.onload = () => {\n\t\t\tconst blob = req.response;\n\t\t\tconst url = window.URL.createObjectURL(new Blob([blob]));\n\t\t\tconst link = document.createElement('a');\n\t\t\tlink.href = url;\n\t\t\tlink.setAttribute('download', 'doc.pdf');\n\t\t\tdocument.body.appendChild(link);\n\t\t\tlink.click();\n\t\t\tdocument.body.removeChild(link);\n\n\t\t\tbutton.classList.remove('ui-btn-wait');\n\t\t\tbutton.classList.remove('ui-btn-disabled');\n\t\t};\n\n\t\treq.send()\n\t}\n\n\tstatic isItemSupported(item: ConfigurableItem): boolean\n\t{\n\t\treturn (\n\t\t\titem.getType() === 'SignDocument'\n\t\t\t|| item.getType() === 'Activity:SignDocument'\n\t\t);\n\t}\n}\n","import { ajax as Ajax, Text, Type, Loc } from 'main.core';\nimport {DateTimeFormat} from \"main.date\";\nimport { Base } from './base';\nimport ConfigurableItem from '../configurable-item';\nimport { Router } from \"crm.router\";\nimport { MessageBox } from \"ui.dialogs.messagebox\";\nimport { DatetimeConverter } from \"crm.timeline.tools\";\nimport {UI} from 'ui.notification';\n\nconst ITEM_TYPE = 'Activity:Document';\nconst ACTION_NAMESPACE = ITEM_TYPE + ':';\n\nexport class Document extends Base\n{\n\tonItemAction(item: ConfigurableItem, action: String, actionData: ?Object): void\n\t{\n\t\tconst documentId = Text.toInteger(actionData?.documentId);\n\t\tif (documentId <= 0)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (action === (ACTION_NAMESPACE + 'Open'))\n\t\t{\n\t\t\tthis.#openDocument(documentId);\n\t\t}\n\t\telse if (action === (ACTION_NAMESPACE + 'CopyPublicLink'))\n\t\t{\n\t\t\t// todo block button while loading\n\t\t\tthis.#copyPublicLink(documentId, actionData?.publicUrl);\n\t\t}\n\t\telse if (action === (ACTION_NAMESPACE + 'Print'))\n\t\t{\n\t\t\tthis.#printDocument(actionData?.printUrl);\n\t\t}\n\t\telse if (action === (ACTION_NAMESPACE + 'DownloadPdf'))\n\t\t{\n\t\t\tthis.#downloadPdf(actionData?.pdfUrl);\n\t\t}\n\t\telse if (action === (ACTION_NAMESPACE + 'DownloadDocx'))\n\t\t{\n\t\t\tthis.#downloadDocx(actionData?.docxUrl);\n\t\t}\n\t\telse if (action === (ACTION_NAMESPACE + 'UpdateTitle'))\n\t\t{\n\t\t\tthis.#updateTitle(documentId, actionData?.value);\n\t\t}\n\t\telse if (action === (ACTION_NAMESPACE + 'UpdateCreateDate'))\n\t\t{\n\t\t\tthis.#updateCreateDate(documentId, actionData?.value);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tconsole.info(`Unknown action ${action} in ${ITEM_TYPE}`);\n\t\t}\n\t}\n\n\t#openDocument(documentId: number): void\n\t{\n\t\tRouter.Instance.openDocumentSlider(documentId);\n\t}\n\n\tasync #copyPublicLink(documentId: number, publicUrl: ?string): Promise<void>\n\t{\n\t\tif (!Type.isStringFilled(publicUrl))\n\t\t{\n\t\t\ttry\n\t\t\t{\n\t\t\t\tpublicUrl = await this.#createPublicUrl(documentId);\n\t\t\t}\n\t\t\tcatch (error)\n\t\t\t{\n\t\t\t\tMessageBox.alert(error.message);\n\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tconst isSuccess = BX.clipboard.copy(publicUrl);\n\t\tif (isSuccess)\n\t\t{\n\t\t\tUI.Notification.Center.notify({\n\t\t\t\tcontent: Loc.getMessage('CRM_TIMELINE_ITEM_LINK_IS_COPIED'),\n\t\t\t\tautoHideDelay: 5000,\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tMessageBox.alert(Loc.getMessage('CRM_TIMELINE_ITEM_ACTIVITY_DOCUMENT_COPY_PUBLIC_LINK_ERROR'));\n\t\t}\n\t}\n\n\tasync #createPublicUrl(documentId: number): Promise<string, Error>\n\t{\n\t\tlet response: {data: {publicUrl: string}};\n\t\ttry\n\t\t{\n\t\t\tresponse = await Ajax.runAction(\n\t\t\t\t'crm.documentgenerator.document.enablePublicUrl',\n\t\t\t\t{\n\t\t\t\t\tanalyticsLabel: 'enablePublicUrl',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tstatus: 1,\n\t\t\t\t\t\tid: documentId,\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t\tcatch (responseWithError)\n\t\t{\n\t\t\tconsole.error(responseWithError);\n\n\t\t\tthrow new Error(Loc.getMessage('CRM_TIMELINE_ITEM_ACTIVITY_DOCUMENT_CREATE_PUBLIC_LINK_ERROR'));\n\t\t}\n\n\t\tconst publicUrl = response.data.publicUrl;\n\t\tif (!Type.isStringFilled(publicUrl))\n\t\t{\n\t\t\tthrow new Error(Loc.getMessage('CRM_TIMELINE_ITEM_ACTIVITY_DOCUMENT_CREATE_PUBLIC_LINK_ERROR'));\n\t\t}\n\n\t\treturn publicUrl;\n\t}\n\n\t#printDocument(printUrl: ?string): void\n\t{\n\t\tif (Type.isStringFilled(printUrl))\n\t\t{\n\t\t\twindow.open(printUrl, '_blank');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tMessageBox.alert(Loc.getMessage('CRM_TIMELINE_ITEM_ACTIVITY_DOCUMENT_PRINT_NOT_READY'));\n\t\t}\n\t}\n\n\t#downloadPdf(pdfUrl: ?string): void\n\t{\n\t\tif (Type.isStringFilled(pdfUrl))\n\t\t{\n\t\t\twindow.open(pdfUrl, '_blank');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tMessageBox.alert(Loc.getMessage('CRM_TIMELINE_ITEM_ACTIVITY_DOCUMENT_PDF_NOT_READY'));\n\t\t}\n\t}\n\n\t#downloadDocx(docxUrl: ?string): void\n\t{\n\t\tif (Type.isStringFilled(docxUrl))\n\t\t{\n\t\t\twindow.open(docxUrl, '_blank');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tconsole.error('Docx download url is not found. This should be an impossible case, something went wrong');\n\t\t}\n\t}\n\n\tasync #updateTitle(documentId: number, value: ?string): Promise<void>\n\t{\n\t\tlet response: {data: {document?: {values?: {DocumentTitle?: string}}}};\n\t\ttry\n\t\t{\n\t\t\tresponse = await Ajax.runAction('crm.documentgenerator.document.update', {\n\t\t\t\tdata: {\n\t\t\t\t\tid: documentId,\n\t\t\t\t\tvalues: {\n\t\t\t\t\t\tDocumentTitle: value,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t\tcatch (responseWithError)\n\t\t{\n\t\t\tconsole.error(responseWithError);\n\n\t\t\tMessageBox.alert(Loc.getMessage('CRM_TIMELINE_ITEM_ACTIVITY_DOCUMENT_UPDATE_DOCUMENT_ERROR'));\n\n\t\t\treturn;\n\t\t}\n\n\t\tconst newTitle = response.data.document?.values?.DocumentTitle;\n\t\tif (newTitle !== value)\n\t\t{\n\t\t\tconsole.error(\"Updated document title without errors, but for some reason title from the backend doesn't match sent value\");\n\t\t}\n\t}\n\n\tasync #updateCreateDate(documentId: number, value: ?Date): Promise<void>\n\t{\n\t\tconst valueInSiteFormat = DateTimeFormat.format(DatetimeConverter.getSiteDateFormat(), value);\n\n\t\tlet response: {data: {document?: {values?: {DocumentCreateTime?: string}}}};\n\t\ttry\n\t\t{\n\t\t\tresponse = await Ajax.runAction('crm.documentgenerator.document.update', {\n\t\t\t\tdata: {\n\t\t\t\t\tid: documentId,\n\t\t\t\t\tvalues: {\n\t\t\t\t\t\tDocumentCreateTime: valueInSiteFormat,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t\tcatch (responseWithError)\n\t\t{\n\t\t\tconsole.error(responseWithError);\n\n\t\t\tMessageBox.alert(Loc.getMessage('CRM_TIMELINE_ITEM_ACTIVITY_DOCUMENT_UPDATE_DOCUMENT_ERROR'));\n\n\t\t\treturn;\n\t\t}\n\n\t\tconst newCreateDate = response.data.document?.values?.DocumentCreateTime;\n\t\tif (valueInSiteFormat !== newCreateDate)\n\t\t{\n\t\t\tconsole.error(\"Updated document create date without errors, but for some reason date from the backend doesn't match sent value\");\n\t\t}\n\t}\n\n\tstatic isItemSupported(item: ConfigurableItem): boolean\n\t{\n\t\treturn item.getType() === ITEM_TYPE;\n\t}\n}\n","import {Base} from './base';\nimport {Type} from 'main.core';\nimport ConfigurableItem from '../configurable-item';\n\nexport class Call extends Base\n{\n\tonItemAction(item: ConfigurableItem, action: String, actionData: ?Object): void\n\t{\n\t\tif (action === 'Call:MakeCall' && actionData)\n\t\t{\n\t\t\tthis.#makeCall(actionData);\n\t\t}\n\n\t\tif (action === 'Call:Schedule' && actionData && actionData.activityId)\n\t\t{\n\t\t\tthis.#scheduleCall(actionData.activityId);\n\t\t}\n\n\t\tif (action === 'Call:OpenTranscript' && actionData && actionData.callId)\n\t\t{\n\t\t\tthis.#openTranscript(actionData.callId);\n\t\t}\n\t}\n\n\t#makeCall(actionData): void\n\t{\n\t\tif (!Type.isStringFilled(actionData.phone))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst params = {\n\t\t\tENTITY_TYPE_NAME: BX.CrmEntityType.resolveName(actionData.entityTypeId),\n\t\t\tENTITY_ID: actionData.entityId,\n\t\t\tAUTO_FOLD: true\n\t\t};\n\n\t\tif (actionData.ownerTypeId !== actionData.entityTypeId || actionData.ownerId !== actionData.entityId)\n\t\t{\n\t\t\tparams.BINDINGS = {\n\t\t\t\tOWNER_TYPE_NAME: BX.CrmEntityType.resolveName(actionData.ownerTypeId),\n\t\t\t\tOWNER_ID: actionData.ownerId\n\t\t\t}\n\t\t}\n\n\t\tif (actionData.activityId > 0)\n\t\t{\n\t\t\tparams.SRC_ACTIVITY_ID = actionData.activityId;\n\t\t}\n\n\t\twindow.top['BXIM'].phoneTo(actionData.phone, params);\n\t}\n\n\t#scheduleCall(activityId): void\n\t{\n\t\tconsole.warn('Not implemented yet')\n\t}\n\n\t#openTranscript(callId): void\n\t{\n\t\tif (BX.Voximplant && BX.Voximplant.Transcript)\n\t\t{\n\t\t\tBX.Voximplant.Transcript.create({\n\t\t\t\tcallId: callId\n\t\t\t}).show();\n\t\t}\n\t}\n\n\tstatic isItemSupported(item: ConfigurableItem): boolean\n\t{\n\t\treturn (item.getType() === 'Activity:Call');\n\t}\n}\n","import ControllerManager from \"./controller-manager\";\n\nimport {Activity} from \"./controllers/activity\";\nimport {CommonContentBlocks} from \"./controllers/common-content-blocks\";\nimport {Modification} from \"./controllers/modification\";\nimport {OpenLines} from \"./controllers/openlines\";\nimport {SignDocument} from \"./controllers/sign-document\";\nimport {Document} from \"./controllers/document\";\nimport {Call} from \"./controllers/call\";\n\nControllerManager.registerController(Activity);\nControllerManager.registerController(CommonContentBlocks);\nControllerManager.registerController(OpenLines);\nControllerManager.registerController(Modification);\nControllerManager.registerController(SignDocument);\nControllerManager.registerController(Document);\nControllerManager.registerController(Call);\n"],"names":["Item","_id","_isTerminated","_wrapper","id","BX","type","isNotEmptyString","util","getRandomString","data","Error","options","anchor","previousSibling","clearLayout","layout","Dom","remove","undefined","wrapper","className","timeout","addClass","Type","isNumber","window","setTimeout","removeWrapperClass","bind","removeClass","addWrapperClass","terminated","IconBackgroundColor","Icon","props","code","String","required","default","counterType","backgroundColorToken","PRIMARY","inject","computed","isLogMessage","counterNodeContainer","$refs","counter","methods","renderCounter","Counter","value","border","color","Color","toUpperCase","renderTo","mounted","template","Menu","vueComponent","menuItems","menuOptions","angle","cacheable","items","item","push","createMenuItem","MenuManager","show","hasOwnProperty","delimiter","text","title","result","icon","menu","subItem","Object","values","action","href","onclick","onMenuItemClick","getCurrentMenu","close","Action","execute","params","_classPrivateFieldInitSpec","actionParams","isJsEvent","$Bitrix","eventEmitter","emit","isJsCode","eval","isAjaxAction","ajax","runAction","then","response","UI","Notification","Center","notify","content","errors","message","autoHideDelay","isRedirect","location","isShowMenu","showMenu","bindElement","$el","filter","state","scope","isReadOnly","hideIfReadonly","sort","a","b","ChangeStreamButton","disableIfReadonly","Boolean","isShowPinButton","isShowUnpinButton","executeAction","onClick","Title","getValue","TagType","Tag","SECONDARY","tagTypeToLabelColorDict","Label","LIGHT_BLUE","LIGHT","SUCCESS","LIGHT_GREEN","WARNING","LIGHT_YELLOW","FAILURE","LIGHT_RED","tagContainerRef","tag","getLabelColorFromTagType","tagType","lowerCaseTagType","toLowerCase","labelColor","renderTag","tagOptions","uppercaseTitle","label","fill","appendChild","render","User","detailUrl","imageUrl","styles","backgroundImage","Text","encode","backgroundSize","FormatDate","name","timestamp","Number","datePlaceholder","useShortTimeFormat","class","Array","formattedDate","converter","DatetimeConverter","createFromServerTimestamp","toUserTime","toTimeString","toDatetimeString","Header","components","titleAction","date","changeStreamButton","tags","user","visibleTags","isVisibleTagFilter","visibleAndAscSortedTags","tagsCopy","Runtime","clone","tagsAscSorter","isShowDate","tagA","tagB","Logo","addIcon","addIconType","iconType","inCircle","iconClassname","addIconClassname","CalendarIcon","DateTimeFormat","format","month","dayWeek","time","LogoCalendar","BitrixVue","cloneComponent","Body","logo","blocks","visibleBlocks","forEach","block","index","isDomNode","setAttribute","rendererName","keys","map","MenuId","buttons","itemsArray","length","beforeUnmount","getMenuById","destroy","LayoutMenu","width","ButtonType","ButtonState","Button","DEFAULT","iconName","size","dataset","popup","buttonOptions","upperCaseIconName","isString","upperCaseButtonSize","itemTypeToButtonColorDict","UIButton","LIGHT_BORDER","ICON","round","dependOnTheme","Size","itemStateToButtonStateDict","LINK","LOADING","State","WAITING","DISABLED","buttonContainerRef","buttonContainer","renderButton","innerHTML","button","updated","Buttons","ButtonScope","Footer","additionalButtons","maxBaseButtonsCount","baseButtons","visibleAndSortedButtons","slice","moreButtons","visibleButtons","buttonsSorter","visibleAndSortedAdditionalButtons","visibleAdditionalButtons","visibleButtonsFilter","additionalButtonsArray","entries","hasMenu","isPlainObject","buttonItem","HIDDEN","MOBILE","buttonA","buttonB","MarketPanel","detailsText","detailsTextAction","needShowDetailsText","isStringFilled","Note","saveNoteAction","deleteNoteAction","isEdit","note","oldNote","saveButtonState","trim","encodedText","startEditing","setCaretToEnd","el","noteText","selection","getSelection","range","document","createRange","removeAllRanges","selectNodeContents","collapse","addRange","focus","onEdit","e","target","innerText","onEnterHandle","ctrlKey","finishEditing","saveNote","cancelEditing","deleteNote","actionObject","UserPick","StreamType","history","scheduled","pinned","initialLayout","onAction","Function","streamType","provide","created","subscribe","onActionEvent","beforeDestroy","unsubscribe","event","eventData","getData","setLayout","newLayout","timelineCardClassname","Layout","assign","footer","menuItem","ControllerManager","foundControllers","controller","getRegisteredControllers","isItemSupported","timelineId","ConfigurableItem","settings","_setId","setContainer","container","itemClassName","setData","getInstance","getItemControllers","needBindToContainer","bindTo","prop","getBoolean","isElementNode","setWrapper","create","attrs","_classPrivateMethodGet","nextSibling","insertBefore","getWrapper","append","getLayout","asPlainObject","onBeforeItemClearLayout","unmount","serverTimezoneDate","Date","extractDate","getId","isInteger","toInteger","replace","getContainer","self","initialize","TimelineItem","createApp","contentBlockComponents","componentName","component","mount","onItemAction","getContentBlockComponents","Base","actionData","Activity","_classPrivateMethodInitSpec","activityId","confirmationText","MessageBox","modal","MessageBoxButtons","YES_NO","onYes","ownerTypeId","ownerId","onNo","messageBox","itemType","getType","indexOf","editor","viewActivity","editActivity","Ajax","CrmActivityEditor","getDefault","TextColor","TextWeight","TextSize","weight","colorClassname","weightClassname","sizeClassname","upperCaseColorProp","upperCaseWeightProp","NORMAL","SM","bold","inline","contentBlock","defaultPlaybackRateValues","TimelineAudio","AudioPlayer","playbackRateValues","isShowPlaybackRateMenu","parentData","playbackRate","containerClassname","isDark","isMobile","controlClassname","loading","play","timeCurrentClassname","totalTimeClassname","isTotalTimeHidden","progressPosition","progressInPixel","seekPosition","minSeekWidth","seekWidth","seek","offsetWidth","formatTimeCurrent","formatTime","timeCurrent","formatTimeTotal","timeTotal","totalTimeRef","totalTime","seekRef","loaded","offsetLeft","playbackRateMenuItems","rate","createPlaybackRateMenuItem","getPlaybackRateOptionText","isActive","changePlaybackRate","audio","source","menuWindow","popupWindow","renderPlaybackRateButton","playbackRateButtonContainer","btn","dropdown","EXTRA_SMALL","noCaps","events","onPopupShow","btnContainerWidth","getMenuWindow","getPopupWindow","setWidth","setOffset","adjustPosition","position","watch","ClientMark","mark","ClientMarkType","POSITIVE","NEUTRAL","NEGATIVE","opportunity","currencyId","moneyHtml","CurrencyCore","currencyFormat","currentValue","initialValue","actionTimeoutId","textProps","$props","enableEdit","cancelScheduledActionExecution","$nextTick","input","disableEdit","scheduleActionExecution","clearTimeout","actionDescription","Link","currentDate","initialDate","currentDateObject","currentDateInSiteFormat","getSiteDateFormat","openCalendar","calendar","node","bTime","bHideTime","bSetFocus","callback_after","newDate","Math","getTime","PlayerAlert","LineOfTextBlocks","AlertColor","AlertIcon","NONE","currentFormatDate","dateFormat","calendarParams","CommonContentBlocks","TextBlock","LinkBlock","WithTitle","Money","EditableText","EditableDate","DatePill","tabId","onCustomEvent","from","to","Modification","ValueChange","messageHtml","isIncoming","OpenLines","ChatMessage","dialogId","top","openMessengerSlider","RECENT","MENU","SignDocument","documentId","documentHash","recipientHash","entryId","console","log","memberHash","Router","Instance","openSignDocumentSlider","openSignDocumentModifySlider","valueInSiteFormat","activityDeadline","responseWithError","error","newCreateDate","buttonId","querySelector","classList","add","Loc","getMessage","req","xhr","open","responseType","onload","blob","url","URL","createObjectURL","Blob","link","createElement","body","click","removeChild","send","ITEM_TYPE","ACTION_NAMESPACE","Document","publicUrl","printUrl","pdfUrl","docxUrl","info","openDocumentSlider","alert","isSuccess","clipboard","copy","analyticsLabel","status","DocumentTitle","newTitle","DocumentCreateTime","Call","callId","phone","ENTITY_TYPE_NAME","CrmEntityType","resolveName","entityTypeId","ENTITY_ID","entityId","AUTO_FOLD","BINDINGS","OWNER_TYPE_NAME","OWNER_ID","SRC_ACTIVITY_ID","phoneTo","warn","Voximplant","Transcript","registerController"],"mappings":"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"}