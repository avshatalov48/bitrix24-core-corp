this.BX=this.BX||{};this.BX.Crm=this.BX.Crm||{};(function(e,t,a){"use strict";function s(e,t,a){i(e,t);t.set(e,a)}function i(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}var r=new WeakMap;var l=new WeakMap;var n=new WeakMap;var o=new WeakMap;let c=function(){babelHelpers.createClass(e,null,[{key:"createFromServerTimestamp",value:function a(s){let i=parseInt(t.Loc.getMessage("CRM_TIMELINE_SERVER_TZ_OFFSET"));if(isNaN(i)){i=0}const r=-(new Date).getTimezoneOffset()*60;const l=s+i-r;const n=new Date(l*1e3);return new e(n)}}]);function e(a){babelHelpers.classCallCheck(this,e);s(this,r,{writable:true,value:void 0});s(this,l,{writable:true,value:void 0});s(this,n,{writable:true,value:void 0});s(this,o,{writable:true,value:null});babelHelpers.classPrivateFieldSet(this,r,t.Loc.getMessage("CRM_TIMELINE_TIME_FORMAT"));babelHelpers.classPrivateFieldSet(this,l,t.Loc.getMessage("CRM_TIMELINE_SHORT_DATE_FORMAT"));babelHelpers.classPrivateFieldSet(this,n,t.Loc.getMessage("CRM_TIMELINE_FULL_DATE_FORMAT"));babelHelpers.classPrivateFieldSet(this,o,a)}babelHelpers.createClass(e,[{key:"getValue",value:function e(){return babelHelpers.classPrivateFieldGet(this,o)}},{key:"toUserTime",value:function t(){babelHelpers.classPrivateFieldSet(this,o,new Date(babelHelpers.classPrivateFieldGet(this,o).getTime()+1e3*e.getUserTimezoneOffset()));return this}},{key:"toDatetimeString",value:function e(t){t=t||{};const s=new Date;const i=!!t.withDayOfWeek;const c=t.delimiter||" ";return a.DateTimeFormat.format([["today","today"+c+babelHelpers.classPrivateFieldGet(this,r)],["tommorow","tommorow"+c+babelHelpers.classPrivateFieldGet(this,r)],["yesterday","yesterday"+c+babelHelpers.classPrivateFieldGet(this,r)],["",(i?"D"+c:"")+(babelHelpers.classPrivateFieldGet(this,o).getFullYear()===s.getFullYear()?babelHelpers.classPrivateFieldGet(this,l):babelHelpers.classPrivateFieldGet(this,n))+c+babelHelpers.classPrivateFieldGet(this,r)]],babelHelpers.classPrivateFieldGet(this,o),s)}},{key:"toTimeString",value:function e(t,s){return a.DateTimeFormat.format(babelHelpers.classPrivateFieldGet(this,r),babelHelpers.classPrivateFieldGet(this,o),t,s)}},{key:"toDateString",value:function e(){return a.DateTimeFormat.format([["today","today"],["tommorow","tommorow"],["yesterday","yesterday"],["",babelHelpers.classPrivateFieldGet(this,o).getFullYear()===(new Date).getFullYear()?babelHelpers.classPrivateFieldGet(this,l):babelHelpers.classPrivateFieldGet(this,n)]],babelHelpers.classPrivateFieldGet(this,o))}}],[{key:"getUserTimezoneOffset",value:function e(){if(!this.userTimezoneOffset){this.userTimezoneOffset=parseInt(t.Loc.getMessage("USER_TZ_OFFSET"));if(isNaN(this.userTimezoneOffset)){this.userTimezoneOffset=0}}return this.userTimezoneOffset}},{key:"getSiteDateFormat",value:function e(){return a.DateTimeFormat.convertBitrixFormat(t.Loc.getMessage("FORMAT_DATE"))}},{key:"getSiteDateTimeFormat",value:function e(){return a.DateTimeFormat.convertBitrixFormat(t.Loc.getMessage("FORMAT_DATETIME"))}}]);return e}();e.DatetimeConverter=c})(this.BX.Crm.Timeline=this.BX.Crm.Timeline||{},BX,BX.Main);
//# sourceMappingURL=tools.bundle.map.js