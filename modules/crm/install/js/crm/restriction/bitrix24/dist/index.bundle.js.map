{"version":3,"file":"index.bundle.js","sources":["../src/index.js"],"sourcesContent":["import {Type, Extension, SettingsCollection} from 'main.core';\n\nconst Bitrix24 = {\n\tsettings: null,\n\n\tgetSettings(entityId: ?string): SettingsCollection|Object\n\t{\n\t\tif (this.settings === null)\n\t\t{\n\t\t\tthis.settings = Extension.getSettings('crm.restriction.bitrix24');\n\t\t}\n\t\tif (Type.isStringFilled(entityId))\n\t\t{\n\t\t\treturn this.settings.get(entityId);\n\t\t}\n\t\treturn this.settings;\n\t},\n\n\tisRestricted(entityId)\n\t{\n\t\treturn !!this.getSettings(entityId);\n\t},\n\n\tgetHandler(entityId)\n\t{\n\t\tconst restrictions = this.getSettings(entityId);\n\n\t\tif (restrictions)\n\t\t{\n\t\t\treturn function(e) {\n\t\t\t\tif (e)\n\t\t\t\t{\n\t\t\t\t\tBX.PreventDefault(e);\n\t\t\t\t}\n\n\t\t\t\tif (BX.Type.isStringFilled(restrictions['infoHelperScript']))\n\t\t\t\t{\n\t\t\t\t\teval(restrictions['infoHelperScript']);\n\t\t\t\t}\n\t\t\t\telse if (restrictions['id'])\n\t\t\t\t{\n\t\t\t\t\ttop.BX.UI.InfoHelper.show(restrictions['id']);\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t}.bind(this);\n\t\t}\n\t\treturn null;\n\t}\n}\nexport {Bitrix24};\n"],"names":["Bitrix24","settings","getSettings","entityId","Extension","Type","isStringFilled","get","isRestricted","getHandler","restrictions","e","BX","PreventDefault","eval","top","UI","InfoHelper","show","bind"],"mappings":";;;;;KAEMA,QAAQ,GAAG;CAChBC,EAAAA,QAAQ,EAAE,IADM;CAGhBC,EAAAA,WAHgB,uBAGJC,QAHI,EAIhB;CACC,QAAI,KAAKF,QAAL,KAAkB,IAAtB,EACA;CACC,WAAKA,QAAL,GAAgBG,mBAAS,CAACF,WAAV,CAAsB,0BAAtB,CAAhB;CACA;;CACD,QAAIG,cAAI,CAACC,cAAL,CAAoBH,QAApB,CAAJ,EACA;CACC,aAAO,KAAKF,QAAL,CAAcM,GAAd,CAAkBJ,QAAlB,CAAP;CACA;;CACD,WAAO,KAAKF,QAAZ;CACA,GAde;CAgBhBO,EAAAA,YAhBgB,wBAgBHL,QAhBG,EAiBhB;CACC,WAAO,CAAC,CAAC,KAAKD,WAAL,CAAiBC,QAAjB,CAAT;CACA,GAnBe;CAqBhBM,EAAAA,UArBgB,sBAqBLN,QArBK,EAsBhB;CACC,QAAMO,YAAY,GAAG,KAAKR,WAAL,CAAiBC,QAAjB,CAArB;;CAEA,QAAIO,YAAJ,EACA;CACC,aAAO,UAASC,CAAT,EAAY;CAClB,YAAIA,CAAJ,EACA;CACCC,UAAAA,EAAE,CAACC,cAAH,CAAkBF,CAAlB;CACA;;CAED,YAAIC,EAAE,CAACP,IAAH,CAAQC,cAAR,CAAuBI,YAAY,CAAC,kBAAD,CAAnC,CAAJ,EACA;CACCI,UAAAA,IAAI,CAACJ,YAAY,CAAC,kBAAD,CAAb,CAAJ;CACA,SAHD,MAIK,IAAIA,YAAY,CAAC,IAAD,CAAhB,EACL;CACCK,UAAAA,GAAG,CAACH,EAAJ,CAAOI,EAAP,CAAUC,UAAV,CAAqBC,IAArB,CAA0BR,YAAY,CAAC,IAAD,CAAtC;CACA;;CACD,eAAO,KAAP;CACA,OAfM,CAeLS,IAfK,CAeA,IAfA,CAAP;CAgBA;;CACD,WAAO,IAAP;CACA;CA7Ce,CAAjB;;;;;;;;"}