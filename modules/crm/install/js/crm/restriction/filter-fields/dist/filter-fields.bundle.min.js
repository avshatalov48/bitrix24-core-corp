this.BX=this.BX||{};this.BX.Crm=this.BX.Crm||{};(function(exports,main_core){"use strict";var FilterFieldsRestriction=function(){function FilterFieldsRestriction(i){babelHelpers.classCallCheck(this,FilterFieldsRestriction);this.options=i;this.bindAddFilterItemEvent();this.bindGridSortEvent()}babelHelpers.createClass(FilterFieldsRestriction,[{key:"bindAddFilterItemEvent",value:function i(){var e,t=this;var r=(e=this.options.filterId)!==null&&e!==void 0?e:null;if(r&&BX.Main.filterManager){var l=BX.Main.filterManager.getById(r);if(l){l.getEmitter().subscribe("onBeforeChangeFilterItems",(function(i){var e=i.getData();var r=e.fields,l=e.oldFields;var n=r.filter((function(i){return!l.includes(i)}));var s=n.some((function(i){return t.isRestrictedFilterField(i)}));if(s){i.preventDefault();t.callRestrictionCallback()}}));l.getEmitter().subscribe("onBeforeAddFilterItem",(function(i){var e=i.getData();if(e.hasOwnProperty("NAME")&&t.isRestrictedFilterField(e.NAME)){i.preventDefault();t.callRestrictionCallback()}}))}}}},{key:"bindGridSortEvent",value:function i(){var e,t=this;var r=(e=this.options.gridId)!==null&&e!==void 0?e:null;if(r&&BX.Main.gridManager){main_core.Event.EventEmitter.subscribe("BX.Main.grid:onBeforeSort",(function(i){var e=i.getData(),l=e.grid,n=e.columnName;if(l.getId()===r&&t.isRestrictedGridField(n)){i.preventDefault();t.callRestrictionCallback()}}))}}},{key:"isRestrictedFilterField",value:function i(e){var t;var r=(t=this.options.filterFields)!==null&&t!==void 0?t:[];return main_core.Type.isArray(r)&&r.includes(e)}},{key:"isRestrictedGridField",value:function i(e){var t;var r=(t=this.options.gridFields)!==null&&t!==void 0?t:[];return main_core.Type.isArray(r)&&r.includes(e)}},{key:"callRestrictionCallback",value:function callRestrictionCallback(){if(main_core.Type.isStringFilled(this.options.callback)){eval(this.options.callback)}}}]);return FilterFieldsRestriction}();exports.FilterFieldsRestriction=FilterFieldsRestriction})(this.BX.Crm.Restriction=this.BX.Crm.Restriction||{},BX);
//# sourceMappingURL=filter-fields.bundle.map.js