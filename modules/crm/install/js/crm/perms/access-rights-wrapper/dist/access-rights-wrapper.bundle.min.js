this.BX=this.BX||{};this.BX.Crm=this.BX.Crm||{};(function(e,t){"use strict";var s=babelHelpers.classPrivateFieldLooseKey("dialogOptions");var r=babelHelpers.classPrivateFieldLooseKey("entitiesIdsEncoder");var i=babelHelpers.classPrivateFieldLooseKey("entitiesIdsDecoder");var a=babelHelpers.classPrivateFieldLooseKey("normalizeType");class n{constructor(){Object.defineProperty(this,a,{value:d});Object.defineProperty(this,i,{value:l});Object.defineProperty(this,r,{value:c});Object.defineProperty(this,s,{value:o})}draw(e){var n,o;this.accessRightsInstance=new t.AccessRights({component:"bitrix:crm.config.perms.v2",actionSave:"save",actionDelete:"delete",renderTo:e.renderTo,userGroups:e.userGroups,accessRights:e.accessRights,additionalSaveParams:(n=e.additionalSaveParams)!=null?n:{},loadParams:(o=e.loadParams)!=null?o:{},isSaveOnlyChangedRights:true,useEntitySelectorDialogAsPopup:true,entitySelectorDialogOptions:{options:babelHelpers.classPrivateFieldLooseBase(this,s)[s](),entitiesIdsEncoder:babelHelpers.classPrivateFieldLooseBase(this,r)[r](),entitiesIdsDecoder:babelHelpers.classPrivateFieldLooseBase(this,i)[i](),normalizeType:babelHelpers.classPrivateFieldLooseBase(this,a)[a]()}});this.accessRightsInstance.draw()}sendActionRequest(){if(this.accessRightsInstance){this.accessRightsInstance.sendActionRequest()}}fireEventReset(){if(this.accessRightsInstance){this.accessRightsInstance.fireEventReset()}}}function o(){return{enableSearch:true,context:"CRM_PERMS",entities:[{id:"user",options:{intranetUsersOnly:true,emailUsers:false,inviteEmployeeLink:false,inviteGuestLink:false}},{id:"department",options:{selectMode:"usersAndDepartments",allowSelectRootDepartment:true,allowFlatDepartments:true}},{id:"meta-user",options:{"all-users":true}},{id:"projectmembers",dynamicLoad:true,options:{addProjectMembersCategories:true},itemOptions:{default:{link:"",linkTitle:""}}},{id:"site_groups",dynamicLoad:true,dynamicSearch:true}]}}function c(){return e=>{if(/^U(\d+)$/.test(e)){const t=e.match(/^U(\d+)$/)||null;const s=t?t[1]:null;return{entityName:"user",id:s}}else if(/^DR(\d+)$/.test(e)){const t=e.match(/^DR(\d+)$/)||null;const s=t?t[1]:null;return{entityName:"department",id:`${s}:F`}}else if(/^D(\d+)$/.test(e)){const t=e.match(/^D(\d+)$/)||null;const s=t?t[1]:null;return{entityName:"department",id:s}}else if(/^G(\d+)$/.test(e)){return{entityName:"site_groups",id:e}}else if(/^SG(\d+)_([AEK])$/.test(e)){const t=e.match(/^SG(\d+)_([AEK])$/)||null;const s=t?t[1]:null;const r=t?t[2]:null;return{entityName:"project",id:`${s}:${r}`}}return{entityName:"unknown",id:e}}}function l(){return e=>{const t=e.entityId;let s="";switch(t){case"user":s=`U${e.id}`;break;case"department":if(/:F$/.test(e.id)){const t=e.id.match(/^(\d+):F$/);const r=t?t[1]:null;s=`DR${r}`}else{s=`D${e.id}`}break;case"site_groups":if(/^(\d+)$/.test(e.id)){s=`G${e.id}`}else{s=e.id}break;case"projectmembers":const t=e.customData.get("memberCategory");const r=e.customData.get("parentId");switch(t){case"owner":s=`SG${r}_A`;break;case"moderator":s=`SG${r}_E`;break;case"all":s=`SG${r}_K`;break}break}return s}}function d(){return e=>{switch(e){case"user":return"users";case"intranet":return"departments";case"socnetgroup":return"sonetgroups";case"group":return"groups";default:return""}}}e.AccessRightsWrapper=n})(this.BX.Crm.Perms=this.BX.Crm.Perms||{},BX.UI);
//# sourceMappingURL=access-rights-wrapper.bundle.map.js