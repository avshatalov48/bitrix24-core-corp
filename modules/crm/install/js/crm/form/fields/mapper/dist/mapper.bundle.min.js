this.BX=this.BX||{};this.BX.Crm=this.BX.Crm||{};this.BX.Crm.Form=this.BX.Crm.Form||{};(function(t,e,a,i,l,r,s){"use strict";var n,d,o,p,b;function c(t,e){v(t,e);e.add(t)}function u(t,e,a){v(t,e);e.set(t,a)}function v(t,e){if(e.has(t)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function h(t,e,a){if(!e.has(t)){throw new TypeError("attempted to get private field on non-instance")}return a}var f=new WeakMap;var m=new WeakMap;var g=new WeakMap;var H=new WeakMap;var F=new WeakSet;var T=new WeakSet;var w=new WeakSet;var C=new WeakSet;var P=function(t){babelHelpers.inherits(e,t);function e(t){var a;babelHelpers.classCallCheck(this,e);a=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(e).call(this));c(babelHelpers.assertThisInitialized(a),C);c(babelHelpers.assertThisInitialized(a),w);c(babelHelpers.assertThisInitialized(a),T);c(babelHelpers.assertThisInitialized(a),F);u(babelHelpers.assertThisInitialized(a),f,{writable:true,value:{}});u(babelHelpers.assertThisInitialized(a),m,{writable:true,value:[]});u(babelHelpers.assertThisInitialized(a),g,{writable:true,value:{}});u(babelHelpers.assertThisInitialized(a),H,{writable:true,value:void 0});babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(a),f,t.fields);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(a),g,t.from);a.setMap(t.map);return a}babelHelpers.createClass(e,[{key:"setMap",value:function t(e){var a=this;babelHelpers.classPrivateFieldSet(this,m,e);babelHelpers.classPrivateFieldGet(this,m).forEach((function(t){return h(a,C,y).call(a,t,t.outputCode)}));this.render();return this}},{key:"getMap",value:function t(){return babelHelpers.classPrivateFieldGet(this,m)}},{key:"render",value:function t(){var e=this;if(!babelHelpers.classPrivateFieldGet(this,H)){babelHelpers.classPrivateFieldSet(this,H,a.Tag.render(n||(n=babelHelpers.taggedTemplateLiteral(["<div></div>"]))))}babelHelpers.classPrivateFieldGet(this,H).innerHTML="";this.getMap().forEach((function(t){var i=function a(){return h(e,w,E).call(e,t)};var l=a.Tag.render(d||(d=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t\t<div class="ui-form-row" style="background: #F5F7F8; border-radius: 12px;">\n\t\t\t\t\t\t<div class="ui-form" style="width: 100%; padding: 20px;">\n\t\t\t\t\t\t\t<div class="ui-form-label">\n\t\t\t\t\t\t\t\t<div class="ui-ctl-label-text">'," - ",'</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="ui-form-content">\n\t\t\t\t\t\t\t\t<div class="crm-form-fields-mapper-row">\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tclass="crm-form-fields-mapper-row-label ','"\n\t\t\t\t\t\t\t\t\t\tdata-role="caption"\n\t\t\t\t\t\t\t\t\t>','</div>\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t<a class="ui-btn ui-btn-xs ui-btn-light-border ui-btn-round"\n\t\t\t\t\t\t\t\t\t\t\tonclick="','"\n\t\t\t\t\t\t\t\t\t\t>',"</a>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t"])),a.Tag.safe(o||(o=babelHelpers.taggedTemplateLiteral(["",""])),t.inputName),a.Tag.safe(p||(p=babelHelpers.taggedTemplateLiteral(["",""])),babelHelpers.classPrivateFieldGet(e,g).caption),t.outputName?"":"crm-form-fields-mapper-row-label-error",a.Tag.safe(b||(b=babelHelpers.taggedTemplateLiteral(["",""])),t.outputName)||a.Loc.getMessage("CRM_FORM_FIELDS_MAPPER_NOT_SELECTED"),i,a.Loc.getMessage("CRM_FORM_FIELDS_MAPPER_CHOOSE_FIELD"));t.element=l;babelHelpers.classPrivateFieldGet(e,H).appendChild(l)}));return babelHelpers.classPrivateFieldGet(this,H)}}]);return e}(i.EventEmitter);function M(t){var e=t.split("_");var a=e[0];if(a==="DYNAMIC"){a=e[0]+"_"+e[1]}return a}function I(t){var e=h(this,F,M).call(this,t);var a=babelHelpers.classPrivateFieldGet(this,f)[e];return a.FIELDS.filter((function(e){return e.name===t}))[0]||null}function E(t){var e=this;var a={multiple:false,allowedTypes:[],allowedCategories:[]};if(["email","phone"].includes(t.inputType)){a.allowedTypes=[{type:"typed_string",entityFieldName:"PHONE"},{type:"typed_string",entityFieldName:"EMAIL"}];a.allowedCategories=["LEAD","CONTACT","COMPANY"]}else{a.allowedTypes=["string","text"]}a.disabledFields=this.getMap().map((function(t){return t.outputCode}));s.FieldsPanel.getInstance().show(a).then((function(a){h(e,C,y).call(e,t,a[0]);e.render();e.emit("change")}))}function y(t,e){if(!e){return}var a=h(this,F,M).call(this,e);var i=babelHelpers.classPrivateFieldGet(this,f)[a];var l=h(this,T,I).call(this,e);if(!l){return}t.outputCode=e;t.outputName="".concat(l.caption," - ").concat(i.CAPTION)}t.Mapper=P})(this.BX.Crm.Form.Fields=this.BX.Crm.Form.Fields||{},BX,BX,BX.Event,BX.Landing.UI.Collection,BX.Landing.UI.Collection,BX.Landing.UI.Panel);
//# sourceMappingURL=mapper.bundle.map.js