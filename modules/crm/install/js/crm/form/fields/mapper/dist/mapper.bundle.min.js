this.BX=this.BX||{};this.BX.Crm=this.BX.Crm||{};this.BX.Crm.Form=this.BX.Crm.Form||{};(function(t,e,a,i,r,l,s){"use strict";function n(){var t=babelHelpers.taggedTemplateLiteral(["",""]);n=function e(){return t};return t}function d(){var t=babelHelpers.taggedTemplateLiteral(["",""]);d=function e(){return t};return t}function o(){var t=babelHelpers.taggedTemplateLiteral(["",""]);o=function e(){return t};return t}function u(){var t=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t\t<div class="ui-form-row" style="background: #eef2f4;">\n\t\t\t\t\t\t<div class="ui-form" style="width: 100%; padding: 20px;">\n\t\t\t\t\t\t\t<div class="ui-form-label">\n\t\t\t\t\t\t\t\t<div class="ui-ctl-label-text">'," - ",'</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="ui-form-content">\n\t\t\t\t\t\t\t\t<div class="crm-form-fields-mapper-row">\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tclass="crm-form-fields-mapper-row-label ','"\n\t\t\t\t\t\t\t\t\t\tdata-role="caption"\n\t\t\t\t\t\t\t\t\t>','</div>\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t<a class="ui-btn ui-btn-xs ui-btn-light-border"\n\t\t\t\t\t\t\t\t\t\t\tonclick="','"\n\t\t\t\t\t\t\t\t\t\t>',"</a>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t"]);u=function e(){return t};return t}function p(){var t=babelHelpers.taggedTemplateLiteral(["<div></div>"]);p=function e(){return t};return t}function c(t,e,a){if(!e.has(t)){throw new TypeError("attempted to get private field on non-instance")}return a}var b=new WeakMap;var v=new WeakMap;var f=new WeakMap;var h=new WeakMap;var m=new WeakSet;var g=new WeakSet;var H=new WeakSet;var T=new WeakSet;var F=function(t){babelHelpers.inherits(e,t);function e(t){var a;babelHelpers.classCallCheck(this,e);a=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(e).call(this));T.add(babelHelpers.assertThisInitialized(a));H.add(babelHelpers.assertThisInitialized(a));g.add(babelHelpers.assertThisInitialized(a));m.add(babelHelpers.assertThisInitialized(a));b.set(babelHelpers.assertThisInitialized(a),{writable:true,value:{}});v.set(babelHelpers.assertThisInitialized(a),{writable:true,value:[]});f.set(babelHelpers.assertThisInitialized(a),{writable:true,value:{}});h.set(babelHelpers.assertThisInitialized(a),{writable:true,value:void 0});babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(a),b,t.fields);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(a),f,t.from);a.setMap(t.map);return a}babelHelpers.createClass(e,[{key:"setMap",value:function t(e){var a=this;babelHelpers.classPrivateFieldSet(this,v,e);babelHelpers.classPrivateFieldGet(this,v).forEach(function(t){return c(a,T,M).call(a,t,t.outputCode)});this.render();return this}},{key:"getMap",value:function t(){return babelHelpers.classPrivateFieldGet(this,v)}},{key:"render",value:function t(){var e=this;if(!babelHelpers.classPrivateFieldGet(this,h)){babelHelpers.classPrivateFieldSet(this,h,a.Tag.render(p()))}babelHelpers.classPrivateFieldGet(this,h).innerHTML="";this.getMap().forEach(function(t){var i=function a(){return c(e,H,P).call(e,t)};var r=a.Tag.render(u(),a.Tag.safe(o(),t.inputName),a.Tag.safe(d(),babelHelpers.classPrivateFieldGet(e,f).caption),t.outputName?"":"crm-form-fields-mapper-row-label-error",a.Tag.safe(n(),t.outputName)||a.Loc.getMessage("CRM_FORM_FIELDS_MAPPER_NOT_SELECTED"),i,a.Loc.getMessage("CRM_FORM_FIELDS_MAPPER_CHOOSE_FIELD"));t.element=r;babelHelpers.classPrivateFieldGet(e,h).appendChild(r)});return babelHelpers.classPrivateFieldGet(this,h)}}]);return e}(i.EventEmitter);var C=function t(e){var a=e.split("_");var i=a[0];if(i==="DYNAMIC"){i=a[0]+"_"+a[1]}return i};var w=function t(e){var a=c(this,m,C).call(this,e);var i=babelHelpers.classPrivateFieldGet(this,b)[a];return i.FIELDS.filter(function(t){return t.name===e})[0]||null};var P=function t(e){var a=this;var i={multiple:false,allowedTypes:[],allowedCategories:[]};if(["email","phone"].includes(e.inputType)){i.allowedTypes=[{type:"typed_string",entityFieldName:"PHONE"},{type:"typed_string",entityFieldName:"EMAIL"}];i.allowedCategories=["LEAD","CONTACT","COMPANY"]}else{i.allowedTypes=["string","text"]}i.disabledFields=this.getMap().map(function(t){return t.outputCode});s.FieldsPanel.getInstance().show(i).then(function(t){c(a,T,M).call(a,e,t[0]);a.render();a.emit("change")})};var M=function t(e,a){if(!a){return}var i=c(this,m,C).call(this,a);var r=babelHelpers.classPrivateFieldGet(this,b)[i];var l=c(this,g,w).call(this,a);if(!l){return}e.outputCode=a;e.outputName="".concat(l.caption," - ").concat(r.CAPTION)};t.Mapper=F})(this.BX.Crm.Form.Fields=this.BX.Crm.Form.Fields||{},BX,BX,BX.Event,BX.Landing.UI.Collection,BX.Landing.UI.Collection,BX.Landing.UI.Panel);
//# sourceMappingURL=mapper.bundle.map.js