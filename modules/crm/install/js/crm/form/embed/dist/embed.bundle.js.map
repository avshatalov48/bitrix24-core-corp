{"version":3,"file":"embed.bundle.js","sources":["../src/data_provider.js","../src/tab.js","../src/errors.js","../src/handler.js","../src/tab/widget.js","../src/tab/openlines.js","../src/tab/form/form.js","../src/tab/form/inline.js","../src/wizard/svg.js","../../../site/form/src/util/scroll-lock/tools.js","../../../site/form/src/util/scroll-lock/scroll-lock.js","../../../site/form/src/util/registry.js","../src/util.js","../src/wizard/controls.js","../src/wizard/handler.js","../src/wizard/wizard.js","../src/tab/form/auto.js","../src/tab/form/click.js","../src/tab/form/publink.js","../src/tab/form/index.js","../src/index.js"],"sourcesContent":["import {Type} from 'main.core';\nimport {EmbedDataValues, EmbedDataOptions, EmbedDict} from \"./types\";\n\n/**\n * @package\n */\nexport class DataProvider\n{\n\t#data: Object = {\n\t\tloaded: false,\n\t\tdata: {},\n\t\terrors: {},\n\t};\n\n\tupdateValues(type: string, values: Object): undefined\n\t{\n\t\tif (type === 'click')\n\t\t{\n\t\t\tif (values.button.plain === '1' && Type.isStringFilled(values?.link?.align))\n\t\t\t{\n\t\t\t\tvalues.button.align = values.link.align;\n\t\t\t}\n\t\t\tdelete values.link;\n\t\t}\n\n\t\tthis.data.embed.viewValues[type] = values;\n\t}\n\n\tgetValues(type: string): EmbedDataValues\n\t{\n\t\tconst values = this.data.embed.viewValues[type];\n\n\t\tif (type === 'click' && Type.isStringFilled(values?.button?.align))\n\t\t{\n\t\t\tvalues.link = {align: values?.button?.align};\n\t\t}\n\t\t\n\t\treturn BX.mergeEx(this.#getDefaultValues(type), values);\n\t}\n\n\tgetOptions(type: string): EmbedDataOptions\n\t{\n\t\treturn this.data.embed.viewOptions[type];\n\t}\n\n\tgetDict(): EmbedDict\n\t{\n\t\tconst dict = this.data.dict;\n\t\tdict.viewOptions.link = {aligns: dict?.viewOptions?.button?.aligns};\n\t\treturn dict;\n\t}\n\n\t/**\n\t * @package\n\t */\n\tget data(): Object\n\t{\n\t\treturn this.#data.data;\n\t}\n\n\t/**\n\t * @package\n\t */\n\tset data(data: Object)\n\t{\n\t\tthis.#data.data = data;\n\t}\n\n\t/**\n\t * @package\n\t */\n\tget errors(): Object\n\t{\n\t\treturn this.#data.errors;\n\t}\n\n\t/**\n\t * @package\n\t */\n\tset errors(errors: Object)\n\t{\n\t\tthis.#data.errors = errors;\n\t}\n\n\t/**\n\t * @package\n\t */\n\tget loaded(): boolean\n\t{\n\t\treturn this.#data.loaded || false;\n\t}\n\n\t/**\n\t * @package\n\t */\n\tset loaded(value: boolean)\n\t{\n\t\tthis.#data.loaded = value;\n\t}\n\n\t#getDefaultValues(type: string): EmbedDataValues\n\t{\n\t\tconst defaults = {\n\t\t\tinline: {},\n\t\t\tauto: {}, // 'type', 'position', 'vertical', 'delay'\n\t\t\tclick: {\n\t\t\t\t// 'type', 'position', 'vertical',\n\t\t\t\tbutton: {\n\t\t\t\t\tuse: \"0\", // 1|0\n\t\t\t\t\ttext: BX.Loc.getMessage('EMBED_SLIDER_OPTION_BUTTONSTYLE_LABEL'),\n\t\t\t\t\tfont: \"modern\", // modern|classic|elegant\n\t\t\t\t\talign: \"center\", // left|right|center|inline\n\t\t\t\t\tplain: \"0\",\n\t\t\t\t\trounded: \"0\",\n\t\t\t\t\toutlined: \"0\",\n\t\t\t\t\tdecoration: \"\", // \"\"|dotted|solid\n\t\t\t\t\tcolor: {\n\t\t\t\t\t\ttext: \"#ffffffff\",\n\t\t\t\t\t\ttextHover: \"#ffffffff\",\n\t\t\t\t\t\tbackground: \"#3eddffff\",\n\t\t\t\t\t\tbackgroundHover: \"#3eddffa6\",\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\n\t\treturn !Type.isUndefined(defaults[type])\n\t\t\t? defaults[type]\n\t\t\t: {}\n\t\t;\n\t}\n}","import {Tag, Dom, Text, Type} from 'main.core';\nimport \"main.qrcode\";\nimport {StepByStep} from 'ui.stepbystep';\nimport 'ui.switcher';\nimport 'main.loader';\n\n// fallback values\nexport const HELP_CENTER_ID = 13003062;\nexport const HELP_CENTER_URL = 'https://helpdesk.bitrix24.ru/open/' + HELP_CENTER_ID;\n\nexport class Tab {\n\n\t#loader;\n\n\tconstructor()\n\t{\n\t\tthis.#loader = new BX.Loader();\n\t}\n\n\tget loader(): Loader\n\t{\n\t\treturn this.#loader;\n\t}\n\n\trenderBubble(text: string, withoutFrame: boolean = false): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"crm-form-embed__customization-info\">\n\t\t\t\t<div class=\"crm-form-embed__customization-info--avatar\">\n\t\t\t\t\t<img src=\"/bitrix/js/crm/images/crm-form-info-avatar.svg\" alt=\"avatar\">\n\t\t\t\t</div>\n\t\t\t\t<div class=\"crm-form-embed__customization-info--text ${withoutFrame ? '--without-frame' : ''}\">${text}</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\trenderCopySection(\n\t\ttitle: string = null,\n\t\tbtnText: string = null,\n\t\tcopyText: string = null,\n\t\tinnerContent: HTMLElement = null,\n\t\ticonClass: string = null\n\t): HTMLElement\n\t{\n\t\tconst section = this.renderSection();\n\n\t\tif (!Type.isNull(title))\n\t\t{\n\t\t\tDom.append(Tag.render`\n\t\t\t\t\t<div class=\"crm-form-embed__title-block\">\n\t\t\t\t\t\t<div class=\"ui-slider-heading-4 --no-border-bottom\">${Text.encode(title)}</div>\n\t\t\t\t\t</div>\n\t\t\t`, section);\n\t\t}\n\n\t\tconst inner = Tag.render`<div class=\"crm-form-embed__copy-block\"></div>`;\n\n\t\tif (Type.isDomNode(innerContent))\n\t\t{\n\t\t\tDom.append(innerContent, inner);\n\t\t}\n\n\t\tif (!Type.isNull(btnText) && !Type.isNull(copyText))\n\t\t{\n\t\t\tDom.append(Tag.render`\n\t\t\t\t<div class=\"crm-form-embed__btn-box --center\">\n\t\t\t\t\t<button\n\t\t\t\t\t\tclass=\"crm-form-embed-btn-copy-publink ui-btn ui-btn-lg ui-btn-primary ui-btn-round ${iconClass ? iconClass : ''}\">\n\t\t\t\t\t\t\t${Text.encode(btnText)}\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t`, inner);\n\n\t\t\ttop.BX.clipboard.bindCopyClick(\n\t\t\t\tinner.querySelector('.crm-form-embed-btn-copy-publink'),\n\t\t\t\t{\n\t\t\t\t\ttext: copyText,\n\t\t\t\t\tpopup: {\n\t\t\t\t\t\toffsetLeft: 60,\n\t\t\t\t\t},\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\tDom.append(inner, section);\n\n\t\treturn section;\n\t}\n\n\trenderPreviewSection(title: string, desc: string, btn: string, url: string): HTMLElement\n\t{\n\t\tconst qr = Tag.render`<div class=\"crm-form-embed__qr-block--qr\"></div>`;\n\t\tnew QRCode(qr, {\n\t\t\ttext: url,\n\t\t\twidth: 147,\n\t\t\theight: 147,\n\t\t});\n\n\t\tconst section = this.renderSection();\n\t\tDom.addClass(section, '--crm-qr-bg');\n\t\tDom.append(\n\t\t\tTag.render`\n\t\t\t\t<div class=\"crm-form-embed__qr-block\">\n\t\t\t\t\t<div class=\"crm-form-embed__qr-block--info\">\n\t\t\t\t\t\t<div class=\"crm-form-embed__qr-block--info-name\">${Text.encode(title)}</div>\n\t\t\t\t\t\t<div class=\"crm-form-embed__qr-block--info-text\">\n\t\t\t\t\t\t\t<div class=\"ui-icon ui-icon-service-light-messenger ui-icon-md\" style=\"float: left; margin-right: 10px;\"><i></i></div>\n\t\t\t\t\t\t\t${Text.encode(desc)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-light-border ui-btn-round crm-form-embed__qr-block--btn\"\n\t\t\t\t\t\t\tonclick=\"window.open('${Text.encode(url)}');\">\n\t\t\t\t\t\t\t\t${Text.encode(btn)}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"crm-form-embed__qr-block\">\n\t\t\t\t\t\t${qr}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`,\n\t\t\tsection\n\t\t);\n\t\treturn section;\n\t}\n\n\t/**\n\t * @protected\n\t */\n\trenderHeaderSection(icon: string, title: string, text: string, helpCenterId: number, helpCenterUrl: string): HTMLElement\n\t{\n\t\tconst section = this.renderSection(null, true, true);\n\t\tDom.append(Tag.render`\n\t\t\t<span class=\"ui-icon ui-slider-icon ui-icon-service-${Text.encode(icon)}\">\n\t\t\t\t<i></i>\n\t\t\t</span>\n\t\t`, section);\n\t\tDom.append(Tag.render`\n\t\t\t<div class=\"ui-slider-content-box\">\n\t\t\t\t<div class=\"ui-slider-heading-2\">${Text.encode(title)}</div>\n\t\t\t\t<div class=\"ui-slider-inner-box\">\n\t\t\t\t\t<p class=\"ui-slider-paragraph-2 crm-form-embed-header-section\">${Text.encode(text)}</p>\n\t\t\t\t\t${this.renderHelp(helpCenterId, helpCenterUrl)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`, section);\n\t\treturn section;\n\t}\n\n\trenderStepperSection(content: Array): HTMLElement\n\t{\n\t\tconst section = this.renderSection();\n\n\t\tconst step = new StepByStep({\n\t\t\ttarget: section,\n\t\t\tcontent: content,\n\t\t});\n\t\tstep.init();\n\n\t\treturn section;\n\t}\n\n\t/**\n\t * @protected\n\t * @param elem HTMLElement\n\t * @param rounding boolean\n\t * @param withIcon boolean\n\t */\n\trenderSection(elem, rounding: boolean = true, withIcon: boolean = false): HTMLElement\n\t{\n\t\tconst section = Tag.render`\n\t\t\t<div \n\t\t\t\tclass=\"\n\t\t\t\t\tui-slider-section\n\t\t\t\t\t${rounding ? '--rounding' : ''}\n\t\t\t\t\t${withIcon ? 'ui-slider-section-icon --icon-sm' : ''}\n\t\t\t\t\"\n\t\t\t></div>\n\t\t`;\n\n\t\tif (Type.isDomNode(elem))\n\t\t{\n\t\t\tDom.append(elem, section);\n\t\t}\n\n\t\treturn section;\n\t}\n\n\t/**\n\t * @protected\n\t * @param elem HTMLElement\n\t */\n\trenderContainer(elem): HTMLElement\n\t{\n\t\tconst container = Tag.render`<div class=\"crm-form-embed__wrapper crm-form-embed__scope\"></div>`;\n\t\tif (Type.isDomNode(elem))\n\t\t{\n\t\t\tDom.append(elem, container);\n\t\t}\n\t\treturn container;\n\t}\n\n\trenderHelp(\n\t\thelpCenterId: number,\n\t\thelpCenterUrl: string,\n\t\tcaption: string = BX.Loc.getMessage('EMBED_SLIDER_MORE_INFO')\n\t): HTMLElement\n\t{\n\t\tconst showHelp = function (event): false\n\t\t{\n\t\t\tif(top.BX.Helper)\n\t\t\t{\n\t\t\t\ttop.BX.Helper.show(\"redirect=detail&code=\" + this.dataset.helpId);\n\t\t\t\tevent.preventDefault();\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\n\t\treturn Tag.render`\n\t\t\t<a\n\t\t\t\tdata-help-id=\"${Text.encode(helpCenterId)}\"\n\t\t\t\tonclick=\"${showHelp}\"\n\t\t\t\thref=\"${Text.encode(helpCenterUrl)}\"\n\t\t\t\tclass=\"ui-slider-link\" target=\"_blank\"\n\t\t\t>\n\t\t\t\t${Text.encode(caption)}\n\t\t\t</a>\n\t\t`;\n\t}\n}","export const ERROR_CODE_FORM_READ_ACCESS_DENIED = 1;\nexport const ERROR_CODE_FORM_WRITE_ACCESS_DENIED = 2;\nexport const ERROR_CODE_WIDGET_READ_ACCESS_DENIED = 3;\nexport const ERROR_CODE_WIDGET_WRITE_ACCESS_DENIED = 4;\nexport const ERROR_CODE_OPENLINES_READ_ACCESS_DENIED = 5;\nexport const ERROR_CODE_OPENLINES_WRITE_ACCESS_DENIED = 6;","import {Dom, Text, Event} from 'main.core';\n\nexport function handlerToggleSwitcher()\n{\n\tconst selection = window.getSelection().toString();\n\tif (selection === \"\")\n\t{\n\t\tthis.parentElement.querySelector('.crm-form-embed-widgets-control > .ui-switcher').click();\n\t}\n}\n\nexport function handlerToggleCodeBlock(event)\n{\n\tconst section = event.currentTarget.closest('.ui-slider-section');\n\tconst toggleBtn = section.querySelector('[data-roll=\"data-show-code\"]');\n\tconst blockCode = section.querySelector('[data-roll=\"crm-form-embed__code\"]');\n\n\tif (Dom.style(blockCode, 'height') === \"0px\")\n\t{\n\t\tDom.addClass(toggleBtn, \"--up\");\n\t\tDom.addClass(blockCode, \"--open\");\n\t\tDom.style(blockCode, \"height\", Text.encode(blockCode.scrollHeight) + \"px\");\n\t}\n\telse\n\t{\n\t\tDom.removeClass(toggleBtn, \"--up\");\n\t\tDom.removeClass(blockCode, \"--open\");\n\t\tDom.style(blockCode, \"height\", Text.encode(blockCode.scrollHeight) + \"px\");\n\t\t// blockCode.clientHeight;\n\t\tDom.style(blockCode, \"height\", \"0\");\n\t}\n\n\tEvent.unbind(blockCode, 'transitionend', transitionHandlerForCodeBlock);\n\tEvent.bind(blockCode, 'transitionend', transitionHandlerForCodeBlock);\n}\n\nfunction transitionHandlerForCodeBlock(event)\n{\n\tconst section = event.currentTarget.closest('.ui-slider-section');\n\tconst blockCode = section.querySelector('[data-roll=\"crm-form-embed__code\"]');\n\tif (Dom.style(blockCode, \"height\") !== \"0px\") {\n\t\tDom.style(blockCode, \"height\", \"auto\");\n\t}\n}","import {Tag, Type, Text, Dom} from 'main.core';\nimport {Tab, HELP_CENTER_ID, HELP_CENTER_URL} from \"../tab\";\nimport type {WidgetOptions, WidgetsData, WidgetsList, Widget as Button} from \"../types\";\nimport {\n\tERROR_CODE_FORM_READ_ACCESS_DENIED,\n\tERROR_CODE_WIDGET_READ_ACCESS_DENIED,\n\tERROR_CODE_WIDGET_WRITE_ACCESS_DENIED\n} from \"../errors\";\nimport \"ui.switcher\";\nimport {handlerToggleSwitcher} from '../handler';\n\nexport class Widget extends Tab\n{\n\t#formId: number;\n\t#options: WidgetOptions;\n\t#loaded: boolean = false;\n\t#data: WidgetsData;\n\t#errors: Object;\n\t#container: HTMLElement;\n\n\tconstructor(formId: number, options: WidgetOptions = {})\n\t{\n\t\tsuper();\n\t\tthis.#formId = formId;\n\t\tthis.#options = options;\n\t\tWidget.prototype.actionGet = 'crm.form.getWidgetsForEmbed';\n\t\tthis.#container = this.renderContainer();\n\t}\n\n\tget formId(): number\n\t{\n\t\treturn this.#formId;\n\t}\n\n\tload(): Promise\n\t{\n\t\tif (this.#loaded)\n\t\t{\n\t\t\treturn Promise.resolve();\n\t\t}\n\n\t\treturn BX.ajax.runAction(this.actionGet, {\n\t\t\tjson: {\n\t\t\t\tformId: this.#formId,\n\t\t\t\tcount: this.#options.widgetsCount,\n\t\t\t}\n\t\t}).then(response => {\n\t\t\tthis.#data = response.data;\n\t\t\tthis.#loaded = true;\n\t\t\tthis.render();\n\t\t}).catch(response => {\n\t\t\tthis.#data = response.data;\n\t\t\tthis.#errors = response.errors;\n\t\t\tthis.#loaded = false;\n\t\t\tthis.renderError(response.data);\n\t\t});\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tthis.#container.innerHTML = '';\n\t\tconst headerSection = this.renderHeader(HELP_CENTER_ID, HELP_CENTER_URL);\n\t\tDom.append(headerSection, this.#container);\n\n\t\tif (!this.#loaded)\n\t\t{\n\t\t\tthis.loader.show(this.#container);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.replace(headerSection, this.renderHeader(\n\t\t\t\tthis.#data.helpCenterId,\n\t\t\t\tthis.#data.helpCenterUrl\n\t\t\t));\n\t\t\tthis.renderPreview(this.#container, this.#data);\n\t\t\tDom.append(this.renderWidgets(this.#data), this.#container);\n\t\t\tthis.renderFinalBlock(this.#container);\n\t\t}\n\n\t\treturn this.#container;\n\t}\n\n\trenderTo(node: HTMLElement): undefined\n\t{\n\t\tif (!Type.isDomNode(node))\n\t\t{\n\t\t\tthrow new Error('Parameter `node` not an element.');\n\t\t}\n\n\t\tDom.append(this.render(), node);\n\t}\n\n\trenderError(responseData: Object): HTMLElement\n\t{\n\t\tthis.#container.innerHTML = '';\n\n\t\tlet errorMessage = BX.Loc.getMessage('EMBED_SLIDER_GENERAL_ERROR');\n\n\t\tif (Type.isObject(responseData) && Type.isObject(responseData.error) && responseData.error.status === 'access denied')\n\t\t{\n\t\t\tif (responseData.error.code === ERROR_CODE_FORM_READ_ACCESS_DENIED) {\n\t\t\t\terrorMessage = BX.Loc.getMessage('EMBED_SLIDER_FORM_ACCESS_DENIED');\n\t\t\t}\n\n\t\t\tif (responseData.error.code === ERROR_CODE_WIDGET_READ_ACCESS_DENIED) {\n\t\t\t\terrorMessage = BX.Loc.getMessage('EMBED_SLIDER_WIDGET_ACCESS_DENIED');\n\t\t\t}\n\t\t}\n\n\t\tDom.append(Tag.render`\n\t\t\t<div class=\"ui-alert ui-alert-warning\">\n\t\t\t\t<span class=\"ui-alert-message\">${errorMessage}</span>\n\t\t\t</div>\n\t\t`, this.#container);\n\t}\n\t\n\trenderPreview(container: HTMLElement, data: WidgetsData): undefined\n\t{\n\t\tif (!Type.isNull(data.previewLink))\n\t\t{\n\t\t\tDom.append(\n\t\t\t\tthis.renderPreviewSection(\n\t\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_QR_TITLE'),\n\t\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_QR_DESC'),\n\t\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_OPEN_IN_NEW_TAB'),\n\t\t\t\t\tdata.previewLink\n\t\t\t\t),\n\t\t\t\tcontainer\n\t\t\t);\n\t\t}\n\t}\n\n\trenderFinalBlock(container: HTMLElement): undefined\n\t{\n\t\tDom.append(\n\t\t\tthis.renderCopySection(\n\t\t\t\tnull,\n\t\t\t\tnull,\n\t\t\t\tnull,\n\t\t\t\tthis.renderBubble(BX.Loc.getMessage('EMBED_SLIDER_WIDGET_COPY_BUBBLE'), true),\n\t\t\t),\n\t\t\tcontainer\n\t\t);\n\t}\n\n\trenderHeader(helpCenterId: number, helpCenterUrl: string): HTMLElement\n\t{\n\t\treturn this.renderHeaderSection(\n\t\t\t'message-widget',\n\t\t\tBX.Loc.getMessage('EMBED_SLIDER_WIDGET_TITLE'),\n\t\t\tBX.Loc.getMessage('EMBED_SLIDER_WIDGET_DESC'),\n\t\t\thelpCenterId,\n\t\t\thelpCenterUrl\n\t\t);\n\t}\n\n\trenderWidgets(data: WidgetsData): HTMLElement\n\t{\n\t\tconst section = this.renderSection();\n\t\tDom.append(Tag.render`\n\t\t\t<div class=\"crm-form-embed__title-block\">\n\t\t\t\t<div class=\"ui-slider-heading-4\">${BX.Loc.getMessage('EMBED_SLIDER_WIDGET_SETTINGS_TITLE')}</div>\n\t\t\t</div>\n\t\t`, section);\n\t\t// Dom.append(\n\t\t// \tthis.renderBubble(\"text\", false),\n\t\t// \tsection\n\t\t// );\n\n\t\tconst allIds = Object.keys(data.widgets);\n\t\tconst contentInner = allIds.length === 0\n\t\t\t? this.renderEmptyInner()\n\t\t\t: this.renderWidgetRows(data.widgets, data.formName, data.formType);\n\n\t\t// FIXME ${showMoreLink}\n\t\t// let showMoreLink = '';\n\t\t// if (data.showMoreLink)\n\t\t// {\n\t\t// \tconst allWidgetsUrl = Type.isStringFilled(data.url.allWidgets) ? data.url.allWidgets : '/crm/button/';\n\t\t// \tshowMoreLink = Tag.render`\n\t\t// \t\t<p class=\"crm-form-embed-widgets-all-buttons\">\n\t\t// \t\t\t<a href=\"${Text.encode(allWidgetsUrl)}\" target=\"_blank\" onclick=\"BX.SidePanel.Instance.open('${Text.encode(allWidgetsUrl)}'); return false;\">\n\t\t// \t\t\t\t${BX.Loc.getMessage('EMBED_SLIDER_WIDGET_FORM_ALL_WIDGETS')}\n\t\t// \t\t\t</a>\n\t\t// \t\t</p>\n\t\t// \t`;\n\t\t// }\n\n\t\tDom.append(\n\t\t\tTag.render`\n\t\t\t\t<div class=\"crm-form-embed__customization-settings\">\n\t\t\t\t\t${contentInner}\n\n\t\t\t\t\t<button\n\t\t\t\t\t\tclass=\"ui-btn ui-btn-sm ui-btn-light-border ui-btn-round ui-btn-no-caps ui-btn-icon-add crm-form-embed__customization-settings--btn crm-form-embed__customization-settings--btn-add\"\n\t\t\t\t\t\tonclick=\"window.open('/crm/button/edit/0/')\"\n\t\t\t\t\t>\n\t\t\t\t\t\t${BX.Loc.getMessage('EMBED_SLIDER_WIDGET_SETTINGS_BUTTON')}\n\t\t\t\t\t</button>\n\n\t\t\t\t\t<button\n\t\t\t\t\t\tclass=\"ui-btn ui-btn-sm ui-btn-light-border ui-btn-round ui-btn-no-caps crm-form-embed__customization-settings--btn\"\n\t\t\t\t\t\tonclick=\"window.open('/crm/button/')\"\n\t\t\t\t\t\tstyle=\"float: right\"\n\t\t\t\t\t>\n\t\t\t\t\t\t${BX.Loc.getMessage('EMBED_SLIDER_WIDGET_SETTINGS_BUTTON_ALL')}\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t`,\n\t\t\tsection\n\t\t);\n\t\treturn section;\n\t}\n\n\trenderEmptyInner(): string\n\t{\n\t\treturn BX.Loc.getMessage('EMBED_SLIDER_WIDGET_EMPTY');\n\t}\n\n\trenderWidgetRows(widgets: WidgetsList, currentFormName: string, currentFormType: string): HTMLElement\n\t{\n\t\t// TODO remove data-attr and div\n\t\tconst widgetsList = Tag.render`<div class=\"crm-form-embed-widgets\" data-form-name=\"${Text.encode(currentFormName)}\" data-form-type=\"${Text.encode(currentFormType)}\"></div>`;\n\t\tconst widgetIds = Widget.getOrderedWidgetIds(widgets);\n\t\twidgetIds.forEach(id => {\n\t\t\tconst widget = widgets[id];\n\t\t\twidgetsList.append(Widget.#renderWidgetRow(widget, this.#formId, currentFormType));\n\t\t});\n\t\treturn widgetsList;\n\t}\n\n\tstatic #renderWidgetRow(widget: Button, formId: number, currentFormType: string): HTMLElement\n\t{\n\t\tconst switcher = Widget.createSwitcher(widget.checked, 'crm-form-embed-widget-input-' + widget.id);\n\t\tswitcher.handlers = {\n\t\t\ttoggled: Widget.#handleSwitcher.bind(switcher, formId, widget.id),\n\t\t};\n\n\t\tconst formNames = Object.values(widget.relatedFormNames);\n\t\tconst sFormType = Widget.#getFormTypeMessage(currentFormType);\n\t\tconst sFormNames = Type.isArray(formNames) && formNames.length > 0\n\t\t\t? formNames.join(', ')\n\t\t\t: ''\n\t\t;\n\t\tconst sFormNamesField = sFormNames.length > 0 ? sFormType + ': ' + sFormNames : '';\n\t\tconst row = Tag.render`\n\t\t\t<div class=\"crm-form-embed__customization-settings--row crm-form-embed-widgets-block\">\n\t\t\t\t<div class=\"crm-form-embed__customization-settings--switcher crm-form-embed-widgets-control\"></div>\n\t\t\t\t<div class=\"crm-form-embed__customization-settings--row-label\" onclick=\"${handlerToggleSwitcher}\">\n\t\t\t\t\t${Text.encode(widget.name)}\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tclass=\"crm-form-embed-widgets-detail crm-form-embed__customization-settings--row-label-secondary\"\n\t\t\t\t\ttitle=\"${Text.encode(sFormNamesField)}\"\n\t\t\t\t\tdata-form-name=\"${Text.encode(sFormNames)}\"\n\t\t\t\t\tdata-form-type=\"${Text.encode(sFormType)}\"\n\t\t\t\t>\n\t\t\t\t\t${Text.encode(sFormNamesField)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t\trow.querySelector('.crm-form-embed-widgets-control').append(switcher.getNode());\n\t\treturn row;\n\t}\n\n\tstatic getOrderedWidgetIds(widgets: WidgetsList): Array\n\t{\n\t\tconst widgetIds = Object.keys(widgets);\n\t\twidgetIds.sort((a, b) => {\n\t\t\tconst aData = widgets[a];\n\t\t\tconst bData = widgets[b];\n\t\t\tswitch (true)\n\t\t\t{\n\t\t\t\tcase (aData.checked && bData.checked) || (! aData.checked && ! bData.checked):\n\t\t\t\t\treturn 0;\n\t\t\t\tcase aData.checked && ! bData.checked:\n\t\t\t\t\treturn -1;\n\t\t\t\tcase ! aData.checked && bData.checked:\n\t\t\t\t\treturn 1;\n\t\t\t}\n\t\t});\n\t\treturn widgetIds;\n\t}\n\n\tstatic #getFormTypeMessage(formType: string): string\n\t{\n\t\tconst formTypeLangKey = 'EMBED_SLIDER_WIDGET_FORM_TYPE_MESSAGE_' + formType.toUpperCase();\n\t\treturn BX.Loc.hasMessage(formTypeLangKey) ? BX.Loc.getMessage(formTypeLangKey) : formType;\n\t}\n\n\t/**\n\t * @this Switcher\n\t * @param formId number\n\t * @param widgetId number\n\t */\n\tstatic #handleSwitcher(formId: number, widgetId: number): undefined\n\t{\n\t\tthis.setLoading(true);\n\n\t\t// save old widget values for rollback on error\n\t\tconst dataSetOld = this.getNode().closest('.crm-form-embed-widgets-block').querySelector('.crm-form-embed-widgets-detail').dataset;\n\t\tconst formNameOld = dataSetOld.formName;\n\t\tconst formTypeOld = dataSetOld.formType;\n\n\t\t// get values for current form\n\t\tconst dataSetCurrent = this.getNode().closest('.crm-form-embed-widgets').dataset;\n\t\tconst formName = dataSetCurrent.formName;\n\t\tconst formType = dataSetCurrent.formType;\n\n\t\t// set related forms field to new values\n\t\tWidget.#updateRelatedForms(this.isChecked(), formName, formType, this);\n\n\t\treturn BX.ajax.runAction('crm.form.assignWidgetToForm', {\n\t\t\tjson: {\n\t\t\t\tformId: formId,\n\t\t\t\tbuttonId: widgetId,\n\t\t\t\tassigned: this.isChecked() ? 'Y' : 'N',\n\t\t\t}\n\t\t}).then((response) => {\n\t\t\tthis.setLoading(false);\n\n\t\t\t// set to returned values (must match current)\n\t\t\tthis.check(response.data.assigned, false);\n\t\t\tWidget.#updateRelatedForms(this.isChecked(), response.data.formName, response.data.formType, this);\n\n\t\t\ttop.BX.UI.Notification.Center.notify({\n\t\t\t\tcontent: BX.Loc.getMessage('EMBED_SLIDER_OPENLINES_FORM_ALERT_SETTINGS_SAVED'),\n\t\t\t});\n\t\t}).catch((response) => {\n\t\t\tthis.setLoading(false);\n\n\t\t\t// rollback on error\n\t\t\tthis.check(! this.isChecked(), false);\n\t\t\tWidget.#updateRelatedForms(formNameOld.length > 0, formNameOld, formTypeOld, this);\n\n\t\t\tlet messageId = 'EMBED_SLIDER_WIDGET_FORM_ALERT_ERROR';\n\t\t\tif (!Type.isUndefined(response.data.error) && !Type.isUndefined(response.data.error.status) && response.data.error.status === 'access denied')\n\t\t\t{\n\t\t\t\tmessageId = response.data.error.code === ERROR_CODE_WIDGET_WRITE_ACCESS_DENIED\n\t\t\t\t\t? 'EMBED_SLIDER_WIDGET_FORM_ALERT_ERROR_ACCESS_DENIED_WIDGET'\n\t\t\t\t\t: 'EMBED_SLIDER_WIDGET_FORM_ALERT_ERROR_ACCESS_DENIED_FORM';\n\t\t\t}\n\n\t\t\ttop.BX.UI.Notification.Center.notify({\n\t\t\t\tcontent: BX.Loc.getMessage(messageId),\n\t\t\t});\n\t\t});\n\t}\n\n\tstatic #updateRelatedForms(assign: boolean, formName: string, formType: string, switcher: Switcher)\n\t{\n\t\tif (assign)\n\t\t{\n\t\t\tWidget.#setRelatedForms(switcher, formName, formType);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tWidget.#clearRelatedForms(switcher);\n\t\t}\n\t}\n\n\tstatic #setRelatedForms(switcher: Switcher, formName: string, formType: string)\n\t{\n\t\tconst formTypeMessage = Widget.#getFormTypeMessage(formType);\n\t\tconst elem = switcher.getNode().closest('.crm-form-embed-widgets-block').querySelector('.crm-form-embed-widgets-detail');\n\t\telem.textContent = formTypeMessage + ': ' + formName;\n\t\telem.setAttribute('data-form-name', formName);\n\t\telem.setAttribute('data-form-type', formTypeMessage);\n\t}\n\n\tstatic #clearRelatedForms(switcher: Switcher)\n\t{\n\t\tconst elem = switcher.getNode().closest('.crm-form-embed-widgets-block').querySelector('.crm-form-embed-widgets-detail');\n\t\telem.textContent = '';\n\t\telem.setAttribute('data-form-name', '');\n\t\telem.setAttribute('data-form-type', '');\n\t}\n\n\t/**\n\t * @protected\n\t */\n\tstatic createSwitcher(checked: boolean, inputName: string): Switcher\n\t{\n\t\tconst switcherNode = document.createElement('span');\n\t\tswitcherNode.className = 'ui-switcher';\n\t\treturn new top.BX.UI.Switcher({\n\t\t\tnode: switcherNode,\n\t\t\tchecked: checked,\n\t\t\tinputName: inputName,\n\t\t});\n\t}\n}","import {Tag, Text, Type, Dom} from 'main.core';\nimport {Widget} from './widget';\nimport type {OpenlinesData, LinesList, WidgetOptions} from \"../types\";\nimport \"ui.switcher\";\nimport {ERROR_CODE_OPENLINES_WRITE_ACCESS_DENIED} from \"../errors\";\nimport {handlerToggleSwitcher} from '../handler';\n\nexport class Openlines extends Widget\n{\n\tconstructor(formId: number, options: WidgetOptions = {})\n\t{\n\t\tsuper(formId, options);\n\t\tOpenlines.prototype.actionGet = 'crm.form.getOpenlinesForEmbed';\n\t}\n\n\trenderHeader(helpCenterId: number, helpCenterUrl: string): HTMLElement\n\t{\n\t\treturn this.renderHeaderSection(\n\t\t\t'message-widget',\n\t\t\tBX.Loc.getMessage('EMBED_SLIDER_OL_TITLE'),\n\t\t\tBX.Loc.getMessage('EMBED_SLIDER_OL_DESC'),\n\t\t\thelpCenterId,\n\t\t\thelpCenterUrl\n\t\t);\n\t}\n\n\trenderPreview(container: HTMLElement, data: OpenlinesData): undefined\n\t{\n\t\tif (!Type.isNull(data.previewLink))\n\t\t{\n\t\t\tDom.append(\n\t\t\t\tthis.renderPreviewSection(\n\t\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_QR_TITLE'),\n\t\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_QR_DESC'),\n\t\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_OPEN_IN_NEW_TAB'),\n\t\t\t\t\tdata.previewLink\n\t\t\t\t),\n\t\t\t\tcontainer\n\t\t\t);\n\t\t}\n\t}\n\n\trenderFinalBlock(container: HTMLElement): undefined {\n\t}\n\n\trenderWidgets(data: OpenlinesData): HTMLElement\n\t{\n\t\t// FIXME test, moved to error handler in widgets\n\t\t// if (Type.isNull(data))\n\t\t// {\n\t\t// \treturn this.renderAccessDeniedAlert();\n\t\t// }\n\n\t\tconst section = this.renderSection();\n\t\tDom.append(Tag.render`\n\t\t\t<div class=\"crm-form-embed__title-block\">\n\t\t\t\t<div class=\"ui-slider-heading-4\">${BX.Loc.getMessage('EMBED_SLIDER_OL_SETTINGS_TITLE')}</div>\n\t\t\t</div>\n\t\t`, section);\n\t\t// Dom.append(\n\t\t// \tthis.renderBubble(\"text\", false),\n\t\t// \tsection\n\t\t// );\n\n\t\tconst allIds = Object.keys(data.lines);\n\t\tconst contentInner = allIds.length === 0\n\t\t\t? this.renderEmptyInner()\n\t\t\t: this.renderLineRows(data.lines, data.formName);\n\n\t\t// FIXME ${showMoreLink}\n\t\t// let showMoreLink = '';\n\t\t// if (data.showMoreLink)\n\t\t// {\n\t\t// \tconst allLinesUrl = Type.isStringFilled(data.url.allLines) ? data.url.allLines : '/services/contact_center/openlines';\n\t\t// \tshowMoreLink = Tag.render`\n\t\t// \t\t<p class=\"crm-form-embed-widgets-all-buttons\">\n\t\t// \t\t\t<a href=\"${Text.encode(allLinesUrl)}\" target=\"_blank\" onclick=\"BX.SidePanel.Instance.open('${Text.encode(allLinesUrl)}'); return false;\">\n\t\t// \t\t\t\t${BX.Loc.getMessage('EMBED_SLIDER_OPENLINES_FORM_ALL_LINES')}\n\t\t// \t\t\t</a>\n\t\t// \t\t</p>\n\t\t// \t`;\n\t\t// }\n\n\t\tDom.append(Tag.render`\n\t\t\t<div class=\"crm-form-embed__customization-settings --without-btn\">\n\t\t\t\t${contentInner}\n\t\t\t</div>\n\t\t`, section);\n\t\treturn section;\n\t}\n\n\trenderEmptyInner(): string\n\t{\n\t\treturn BX.Loc.getMessage('EMBED_SLIDER_OPENLINES_EMPTY');\n\t}\n\n\trenderAccessDeniedAlert(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"ui-alert ui-alert-warning\">\n\t\t\t\t<span class=\"ui-alert-message\">${BX.Loc.getMessage('EMBED_SLIDER_OPENLINES_ACCESS_DENIED')}</span>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\trenderLineRows(lines: LinesList, currentFormName: string): HTMLElement\n\t{\n\t\tconst linesList = Tag.render`<div class=\"crm-form-embed-widgets\" data-form-name=\"${Text.encode(currentFormName)}\"></div>`;\n\t\tconst lineIds = Openlines.getOrderedWidgetIds(lines);\n\t\tlineIds.forEach(id => {\n\t\t\tconst data = lines[id];\n\t\t\tconst checked = data.formEnabled && data.checked;\n\t\t\tconst formName = data.formEnabled ? data.formName : '';\n\t\t\tlinesList.append(Openlines.#renderLineRow(data.id, data.name, formName, checked, this.formId));\n\t\t});\n\t\treturn linesList;\n\t}\n\n\tstatic #renderLineRow(lineId: number, lineName: string, formName: string, checked: boolean, formId: number): HTMLElement\n\t{\n\t\tconst switcher = Openlines.createSwitcher(checked, 'crm-form-embed-line-input-' + lineId);\n\t\tswitcher.handlers = {\n\t\t\ttoggled: Openlines.#handleSwitcher.bind(switcher, formId, lineId),\n\t\t};\n\n\t\tconst row = Tag.render`\n\t\t\t<div class=\"crm-form-embed__customization-settings--row crm-form-embed-widgets-block\">\n\t\t\t\t<div class=\"crm-form-embed__customization-settings--switcher crm-form-embed-widgets-control\"></div>\n\t\t\t\t<div class=\"crm-form-embed__customization-settings--row-label\" onclick=\"${handlerToggleSwitcher}\">\n\t\t\t\t\t${Text.encode(lineName)}\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tclass=\"crm-form-embed-widgets-detail crm-form-embed__customization-settings--row-label-secondary\"\n\t\t\t\t\ttitle=\"${Text.encode(formName)}\"\n\t\t\t\t\tdata-form-name=\"${Text.encode(formName)}\"\n\t\t\t\t>\n\t\t\t\t\t${Text.encode(formName)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t\trow.querySelector('.crm-form-embed-widgets-control').append(switcher.getNode());\n\t\treturn row;\n\t}\n\n\t/**\n\t * @this Switcher\n\t * @param formId number\n\t * @param lineId number\n\t */\n\tstatic #handleSwitcher(formId: number, lineId: number): undefined\n\t{\n\t\tthis.setLoading(true);\n\n\t\t// save old widget values for rollback on error\n\t\tconst formNameOld = this.getNode().closest('.crm-form-embed-widgets-block').querySelector('.crm-form-embed-widgets-detail').dataset.formName;\n\t\t// get values for current form\n\t\tconst formName = this.getNode().closest('.crm-form-embed-widgets').dataset.formName;\n\t\t// set related forms field to new values\n\t\tOpenlines.#updateRelatedOpenlineForms(this.isChecked() ? formName : '', this);\n\n\t\treturn BX.ajax.runAction('crm.form.assignOpenlinesToForm', {\n\t\t\tjson: {\n\t\t\t\tformId: formId,\n\t\t\t\tlineId: lineId,\n\t\t\t\tassigned: this.isChecked() ? 'Y' : 'N',\n\t\t\t\t// afterMessage: 'N',\n\t\t\t}\n\t\t}).then((response) => {\n\t\t\tthis.setLoading(false);\n\n\t\t\t// set to returned values (must match current)\n\t\t\tthis.check(response.data.assigned, false);\n\t\t\tOpenlines.#updateRelatedOpenlineForms(this.isChecked() ? response.data.formName : '', this);\n\n\t\t\ttop.BX.UI.Notification.Center.notify({\n\t\t\t\tcontent: BX.Loc.getMessage('EMBED_SLIDER_OPENLINES_FORM_ALERT_SETTINGS_SAVED'),\n\t\t\t});\n\t\t}).catch((response) => {\n\t\t\tthis.setLoading(false);\n\n\t\t\t// rollback on error\n\t\t\tthis.check(! this.isChecked(), false);\n\t\t\tOpenlines.#updateRelatedOpenlineForms(formNameOld.length > 0 ? formNameOld : '', this);\n\n\t\t\tlet messageId = 'EMBED_SLIDER_OPENLINES_FORM_ALERT_ERROR';\n\t\t\tif (!Type.isUndefined(response.data.error) && !Type.isUndefined(response.data.error.status) && response.data.error.status === 'access denied')\n\t\t\t{\n\t\t\t\tmessageId = response.data.error.code === ERROR_CODE_OPENLINES_WRITE_ACCESS_DENIED\n\t\t\t\t\t? 'EMBED_SLIDER_WIDGET_FORM_ALERT_ERROR_ACCESS_DENIED' // 'EMBED_SLIDER_WIDGET_FORM_ALERT_ERROR_ACCESS_DENIED_OPENLINES'\n\t\t\t\t\t: 'EMBED_SLIDER_WIDGET_FORM_ALERT_ERROR_ACCESS_DENIED_FORM';\n\t\t\t}\n\n\t\t\ttop.BX.UI.Notification.Center.notify({\n\t\t\t\tcontent: BX.Loc.getMessage(messageId),\n\t\t\t});\n\t\t});\n\t}\n\n\tstatic #updateRelatedOpenlineForms(formName: string, switcher: Switcher) {\n\t\tconst elem = switcher.getNode().closest('.crm-form-embed-widgets-block').querySelector('.crm-form-embed-widgets-detail');\n\t\telem.textContent = formName;\n\t\telem.setAttribute('data-form-name', formName);\n\t}\n}","import {Tag, Type, Text, Dom, Event} from 'main.core';\nimport {DataProvider} from \"../../data_provider\";\nimport {Tab} from \"../../tab\";\nimport {ERROR_CODE_FORM_READ_ACCESS_DENIED} from \"../../errors\";\nimport type {EmbedData} from \"../../types\";\nimport {handlerToggleCodeBlock} from '../../handler';\nimport \"ui.switcher\";\nimport \"ui.notification\";\n\nexport class Form extends Tab\n{\n\t#formId: number;\n\t#dataProvider: DataProvider;\n\n\tconstructor(formId: number, dataProvider: DataProvider)\n\t{\n\t\tsuper();\n\t\tthis.#formId = formId;\n\t\tthis.#dataProvider = dataProvider;\n\t}\n\n\tget dataProvider(): DataProvider\n\t{\n\t\treturn this.#dataProvider;\n\t}\n\n\tget loaded(): boolean\n\t{\n\t\treturn this.dataProvider.loaded;\n\t}\n\n\t/**\n\t * @protected\n\t * @deprecated this.dataProvider.data\n\t */\n\tget data(): EmbedData\n\t{\n\t\treturn this.dataProvider.data;\n\t}\n\n\t/**\n\t * @deprecated this.dataProvider.data\n\t */\n\tset data(data: EmbedData)\n\t{\n\t\tthis.dataProvider.data = data;\n\t}\n\n\tget formId(): number\n\t{\n\t\treturn this.#formId;\n\t}\n\n\tload(force: boolean = false): Promise\n\t{\n\t\tif (!force && this.dataProvider.loaded)\n\t\t{\n\t\t\treturn Promise.resolve();\n\t\t}\n\n\t\tif (Type.isObject(this.dataProvider.errors) && Object.keys(this.dataProvider.errors).length > 0)\n\t\t{\n\t\t\treturn Promise.reject();\n\t\t}\n\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tBX.ajax.runAction('crm.form.getEmbed', {\n\t\t\t\tjson: {\n\t\t\t\t\tformId: this.#formId\n\t\t\t\t}\n\t\t\t}).then(response => {\n\t\t\t\tthis.dataProvider.data = response.data;\n\t\t\t\tthis.dataProvider.loaded = true;\n\t\t\t\tresolve(response);\n\t\t\t}).catch(response => {\n\t\t\t\tthis.dataProvider.data = response.data;\n\t\t\t\tthis.dataProvider.errors = response.errors;\n\t\t\t\tthis.dataProvider.loaded = false;\n\t\t\t\treject(response);\n\t\t\t});\n\t\t});\n\t}\n\n\tsave(): Promise\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\treturn BX.ajax.runAction('crm.form.saveEmbed', {\n\t\t\t\tjson: {\n\t\t\t\t\tformId: this.formId,\n\t\t\t\t\tdata: this.dataProvider.data.embed.viewValues,\n\t\t\t\t}\n\t\t\t}).then((response) => {\n\t\t\t\t// TODO move to controls\n\t\t\t\t// const elem = renderedOptions.querySelector(`#crm-form-embed-wrapper-${formId}-${type}-vertical`);\n\t\t\t\t// if (key === \"type\")\n\t\t\t\t// {\n\t\t\t\t// \titem.value === \"popup\" && Dom.hide(elem);\n\t\t\t\t// \titem.value === \"panel\" && Dom.show(elem);\n\t\t\t\t// }\n\n\t\t\t\ttop.BX.UI.Notification.Center.notify({\n\t\t\t\t\tcontent: BX.Loc.getMessage('EMBED_SLIDER_OPENLINES_FORM_ALERT_SETTINGS_SAVED'),\n\t\t\t\t});\n\n\t\t\t\tresolve(response);\n\t\t\t}).catch((response) => {\n\t\t\t\t// FIXME move to controls\n\t\t\t\t// if (key === \"type\")\n\t\t\t\t// {\n\t\t\t\t// \titem.value === \"popup\" && Dom.show(elem);\n\t\t\t\t// \titem.value === \"panel\" && Dom.hide(elem);\n\t\t\t\t// }\n\n\t\t\t\tlet messageId = 'EMBED_SLIDER_FORM_SETTINGS_ALERT_ERROR';\n\t\t\t\tif (! Type.isUndefined(response.data.error.status) && response.data.error.status === 'access denied')\n\t\t\t\t{\n\t\t\t\t\tmessageId = 'EMBED_SLIDER_WIDGET_FORM_ALERT_ERROR_ACCESS_DENIED_FORM';\n\t\t\t\t}\n\n\t\t\t\ttop.BX.UI.Notification.Center.notify({\n\t\t\t\t\tcontent: BX.Loc.getMessage(messageId),\n\t\t\t\t});\n\n\t\t\t\treject(response);\n\t\t\t});\n\t\t});\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\treturn this.renderContainer();\n\t}\n\n\trenderTo(node: HTMLElement): undefined\n\t{\n\t\tif (!Type.isDomNode(node))\n\t\t{\n\t\t\tthrow new Error('Parameter `node` not an element.');\n\t\t}\n\n\t\tDom.append(this.render(), node);\n\t}\n\n\trenderError(responseData: Object): HTMLElement\n\t{\n\t\tlet errorMessage = BX.Loc.getMessage('EMBED_SLIDER_GENERAL_ERROR');\n\n\t\tif (Type.isObject(responseData) && Type.isObject(responseData.error) && responseData.error.status === 'access denied')\n\t\t{\n\t\t\tif (responseData.error.code === ERROR_CODE_FORM_READ_ACCESS_DENIED) {\n\t\t\t\terrorMessage = BX.Loc.getMessage('EMBED_SLIDER_FORM_ACCESS_DENIED');\n\t\t\t}\n\t\t}\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"ui-alert ui-alert-warning\">\n\t\t\t\t<span class=\"ui-alert-message\">${errorMessage}</span>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\trenderSettingsHeader(title: string, switcher: boolean = false, expertMode: function = null): HTMLElement\n\t{\n\t\tconst switcherNode = switcher ? Tag.render`<div class=\"crm-form-embed__customization-settings--switcher\"></div>` : '';\n\t\tconst headingBox = Tag.render`\n\t\t\t<div class=\"ui-slider-heading-box ${switcher ? '--toggle' : ''}\" data-roll=\"heading-block\">\n\t\t\t\t<div class=\"ui-slider-heading-main\">\n\t\t\t\t\t${switcherNode}\n\t\t\t\t\t<div class=\"ui-slider-heading-4\">${title ? title : BX.Loc.getMessage('EMBED_SLIDER_SETTINGS_HEADING')}</div>\n\t\t\t\t</div>\n\t\t\t\t${expertMode ? Tag.render`\n\t\t\t\t\t<div class=\"ui-slider-heading-rest\">\n\t\t\t\t\t\t<a href=\"#\"\n\t\t\t\t\t\t\tclass=\"ui-slider-link crm-form-embed__link --expert-mode --visible\"\n\t\t\t\t\t\t\tdata-roll=\"data-more-settings\"\n\t\t\t\t\t\t\tonclick=\"${expertMode.bind(this)}\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t${BX.Loc.getMessage('EMBED_SLIDER_EXPERT_MODE')}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t` : ''}\n\t\t\t</div>\n\t\t`;\n\n\t\tif (switcher)\n\t\t{\n\t\t\tconst heading = headingBox.querySelector('.ui-slider-heading-4');\n\t\t\tEvent.bind(heading, 'click', (event) => {\n\t\t\t\t// event.preventDefault();\n\t\t\t\t// const switcherId = event.currentTarget\n\t\t\t\t// \t.closest('.ui-slider-heading-main')\n\t\t\t\t// \t.querySelector('.ui-switcher[data-switcher-init=\"y\"][data-switcher-id]')\n\t\t\t\t// \t.dataset.switcherId\n\t\t\t\t// ;\n\t\t\t\t// const innerSwitcher = top.BX.UI.Switcher.getById(switcherId);\n\t\t\t\t// innerSwitcher.toggle();\n\n\t\t\t\tevent.currentTarget\n\t\t\t\t\t.closest('.ui-slider-heading-main')\n\t\t\t\t\t.querySelector('.ui-switcher[data-switcher-init=\"y\"]')\n\t\t\t\t\t.click();\n\t\t\t});\n\t\t}\n\n\t\treturn headingBox;\n\t}\n\n\t/**\n\t * @protected\n\t */\n\trenderCodeBlock(code: string): HTMLElement\n\t{\n\t\tconst section = this.renderSection();\n\t\tDom.append(Tag.render`\n\t\t\t<div class=\"crm-form-embed__customization--show-code\">\n\t\t\t\t<div class=\"ui-icon ui-icon-service-code crm-form-embed__customization--show-code-icon\"><i></i></div>\n\t\t\t\t<a class=\"ui-slider-link crm-form-embed__link --with-arrow\" data-roll=\"data-show-code\">${BX.Loc.getMessage('EMBED_SLIDER_SHOW_CODE')}</a>\n\t\t\t</div>\n\t\t`, section);\n\t\tDom.append(Tag.render`\n\t\t\t<div class=\"crm-form-embed__code\" data-roll=\"crm-form-embed__code\" style=\"height: 0px;\">\n\t\t\t\t<pre class=\"crm-form-embed__code-block\"><span>${Text.encode(code)}</span></pre>\n\t\t\t</div>\n\t\t`, section);\n\n\t\tconst toggleBtn = section.querySelector('[data-roll=\"data-show-code\"]');\n\t\tEvent.unbind(toggleBtn, 'click', handlerToggleCodeBlock);\n\t\tEvent.bind(toggleBtn, 'click', handlerToggleCodeBlock);\n\n\t\treturn section;\n\t}\n\n\tupdateDependentFields(container: Element, name: string, value: string)\n\t{\n\t\tswitch (name)\n\t\t{\n\t\t\tcase 'type':\n\t\t\t\tconst containerVertical = container.querySelector('[data-option=\"vertical\"]');\n\t\t\t\tif (value === 'panel')\n\t\t\t\t{\n\t\t\t\t\tDom.show(containerVertical)\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tDom.hide(containerVertical);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'button.plain':\n\t\t\t\tconst containerButtonStyle = container.querySelector('[data-option=\"buttonStyle\"]');\n\t\t\t\tconst containerLinkStyle = container.querySelector('[data-option=\"button.decoration\"]');\n\t\t\t\t// const containerFont = container.querySelector('[data-option=\"button.font\"]');\n\t\t\t\tconst containerButtonPosition = container.querySelector('[data-option=\"button.align\"]');\n\t\t\t\tconst containerLinkPosition = container.querySelector('[data-option=\"link.align\"]');\n\t\t\t\tif (value === '1')\n\t\t\t\t{\n\t\t\t\t\tDom.hide(containerButtonStyle);\n\t\t\t\t\tDom.show(containerLinkStyle);\n\n\t\t\t\t\tDom.hide(containerButtonPosition);\n\t\t\t\t\tDom.show(containerLinkPosition);\n\n\t\t\t\t\t// // Dom.hide(containerFont);\n\t\t\t\t\t// containerFont?.querySelectorAll('.crm-form-embed__settings-main--option').forEach((node) => {\n\t\t\t\t\t// \tDom.attr(node, 'disabled', true);\n\t\t\t\t\t// })\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tDom.hide(containerLinkStyle);\n\t\t\t\t\tDom.show(containerButtonStyle);\n\n\t\t\t\t\tDom.hide(containerLinkPosition);\n\t\t\t\t\tDom.show(containerButtonPosition);\n\n\t\t\t\t\t// // Dom.show(containerFont);\n\t\t\t\t\t// containerFont?.querySelectorAll('.crm-form-embed__settings-main--option').forEach((node) => {\n\t\t\t\t\t// \tDom.attr(node, 'disabled', false);\n\t\t\t\t\t// })\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t}\n}","import {Dom} from 'main.core';\nimport {Form} from './form';\nimport {DataProvider} from \"../../data_provider\";\nimport {HELP_CENTER_ID, HELP_CENTER_URL} from \"../../tab\";\n\nexport class Inline extends Form\n{\n\t#container: HTMLElement;\n\t#rendered: boolean = false;\n\n\tconstructor(formId: number, dataProvider: DataProvider)\n\t{\n\t\tsuper(formId, dataProvider);\n\t\tthis.#container = super.render();\n\t}\n\n\tload(force: boolean = false): Promise\n\t{\n\t\treturn super.load(force).then(() => {\n\t\t\tif (!this.#rendered)\n\t\t\t{\n\t\t\t\tthis.render();\n\t\t\t}\n\t\t}).catch((error) => {\n\t\t\tconsole.error(error);\n\t\t\tif (!this.#rendered)\n\t\t\t{\n\t\t\t\tthis.#renderError();\n\t\t\t}\n\t\t});\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tthis.#container.innerHTML = '';\n\n\t\tconst headerSection = this.renderHeaderSection(\n\t\t\t'code',\n\t\t\tBX.Loc.getMessage('EMBED_SLIDER_INLINE_TITLE'),\n\t\t\tBX.Loc.getMessage('EMBED_SLIDER_INLINE_DESC'),\n\t\t\tHELP_CENTER_ID,\n\t\t\tHELP_CENTER_URL\n\t\t);\n\t\tDom.append(headerSection, this.#container);\n\n\t\tif (!super.loaded)\n\t\t{\n\t\t\tthis.loader.show(this.#container);\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// update with actual help-center link\n\t\t\tDom.replace(headerSection, this.renderHeaderSection(\n\t\t\t\t'code',\n\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_INLINE_TITLE'),\n\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_INLINE_DESC'),\n\t\t\t\tthis.dataProvider.data.embed.helpCenterId,\n\t\t\t\tthis.dataProvider.data.embed.helpCenterUrl\n\t\t\t));\n\n\t\t\tDom.append(this.renderPreviewSection(\n\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_QR_TITLE'),\n\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_QR_DESC'),\n\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_OPEN_IN_NEW_TAB'),\n\t\t\t\tthis.dataProvider.data.embed.previewLink.replace('#preview#', 'inline') // this.dataProvider.data.embed.pubLink\n\t\t\t), this.#container);\n\n\t\t\tconst code = this.dataProvider.data.embed.scripts['inline'].text;\n\t\t\tDom.append(this.renderCodeBlock(code), this.#container);\n\t\t\tDom.append(this.renderCopySection(\n\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_COPY_CODE'),\n\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_COPY_CODE2'),\n\t\t\t\tcode,\n\t\t\t\tthis.renderBubble(BX.Loc.getMessage('EMBED_SLIDER_COPY_CODE_BUBBLE_INLINE'), true)\n\t\t\t), this.#container);\n\n\t\t\tthis.#rendered = true;\n\t\t}\n\n\t\treturn this.#container;\n\t}\n\n\t#renderError(): HTMLElement\n\t{\n\t\tthis.#container.innerHTML = '';\n\t\tDom.append(super.renderError(this.dataProvider.data), this.#container);\n\t\tthis.#rendered = true;\n\t\treturn this.#container;\n\t}\n}","export function getSvg(option: string, value: string): string\n{\n\tswitch (option)\n\t{\n\t\tcase 'position':\n\t\t\tswitch (value)\n\t\t\t{\n\t\t\t\tcase 'left':\n\t\t\t\t\treturn `\n\t\t\t\t\t\t\t<svg width=\"100\" height=\"66\" viewBox=\"0 0 100 66\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t\t\t\t\t\t<path class=\"crm-form-embed__settings--svg-arrow\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M42.1597 39.1886C42.5214 38.7916 42.5214 38.1845 42.1598 37.7874L38.8098 34.1094L51.9669 34.1094C52.5703 34.1094 53.0595 33.6202 53.0595 33.0167C53.0595 32.4132 52.5703 31.924 51.9669 31.924L38.8098 31.924L42.1598 28.2459C42.5214 27.8489 42.5214 27.2418 42.1598 26.8448C41.7471 26.3917 41.0341 26.3917 40.6214 26.8448L35.9947 31.9245C35.431 32.5435 35.431 33.4898 35.9947 34.1088L40.6215 39.1886C41.0341 39.6416 41.7471 39.6417 42.1597 39.1886Z\" />\n\t\t\t\t\t\t\t\t<path class=\"crm-form-embed__settings--svg-block\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M9 26.0002C9 24.8957 9.89543 24.0002 11 24.0002H25C26.1046 24.0002 27 24.8957 27 26.0002V40.0002C27 41.1048 26.1046 42.0002 25 42.0002H11C9.89543 42.0002 9 41.1048 9 40.0002V26.0002ZM14 33.0002C14 32.448 14.4477 32.0002 15 32.0002H21C21.5523 32.0002 22 32.448 22 33.0002C22 33.5525 21.5523 34.0002 21 34.0002H15C14.4477 34.0002 14 33.5525 14 33.0002ZM14 28.0002C13.4477 28.0002 13 28.448 13 29.0002C13 29.5525 13.4477 30.0002 14 30.0002H22C22.5523 30.0002 23 29.5525 23 29.0002C23 28.448 22.5523 28.0002 22 28.0002H14Z\"/>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t`;\n\t\t\t\tcase 'center':\n\t\t\t\t\treturn `\n\t\t\t\t\t\t\t<svg width=\"100\" height=\"66\" viewBox=\"0 0 100 66\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t\t\t\t\t\t<path class=\"crm-form-embed__settings--svg-arrow\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M26.4471 26.7989C26.006 27.24 26.006 27.9552 26.4471 28.3963L30.1754 32.1246H21.1297C20.5058 32.1246 20 32.6304 20 33.2543C20 33.8783 20.5058 34.384 21.1297 34.384H30.1754L26.4471 38.1124C26.006 38.5535 26.006 39.2687 26.4471 39.7098C26.8882 40.151 27.6034 40.151 28.0446 39.7098L33.1811 34.5733C33.9095 33.8449 33.9095 32.6639 33.1811 31.9355L28.0445 26.7989C27.6034 26.3578 26.8883 26.3578 26.4471 26.7989Z\"/>\n\t\t\t\t\t\t\t\t<path class=\"crm-form-embed__settings--svg-arrow\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M71.8799 39.6907C72.3031 39.2572 72.3031 38.5652 71.8799 38.1317L68.2216 34.3842L76.8822 34.3842C77.5061 34.3842 78.0119 33.8784 78.0119 33.2545C78.0119 32.6306 77.5061 32.1248 76.8822 32.1248L68.2216 32.1248L71.8799 28.3772C72.3031 27.9437 72.3031 27.2517 71.8799 26.8182C71.4421 26.3697 70.7208 26.3697 70.2829 26.8182L65.2375 31.9867C64.5493 32.6917 64.5493 33.8171 65.2375 34.5221L70.283 39.6907C70.7208 40.1392 71.4421 40.1392 71.8799 39.6907Z\"/>\n\t\t\t\t\t\t\t\t<path class=\"crm-form-embed__settings--svg-block\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M41 26.0002C41 24.8957 41.8954 24.0002 43 24.0002H57C58.1046 24.0002 59 24.8957 59 26.0002V40.0002C59 41.1048 58.1046 42.0002 57 42.0002H43C41.8954 42.0002 41 41.1048 41 40.0002V26.0002ZM46 33.0002C46 32.448 46.4477 32.0002 47 32.0002H53C53.5523 32.0002 54 32.448 54 33.0002C54 33.5525 53.5523 34.0002 53 34.0002H47C46.4477 34.0002 46 33.5525 46 33.0002ZM46 28.0002C45.4477 28.0002 45 28.448 45 29.0002C45 29.5525 45.4477 30.0002 46 30.0002H54C54.5523 30.0002 55 29.5525 55 29.0002C55 28.448 54.5523 28.0002 54 28.0002H46Z\"/>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t`;\n\t\t\t\tcase 'right':\n\t\t\t\t\treturn `\n\t\t\t\t\t\t\t<svg width=\"100\" height=\"66\" viewBox=\"0 0 100 66\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t\t\t\t\t\t<path class=\"crm-form-embed__settings--svg-arrow\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M59.4471 26.7989C59.006 27.24 59.006 27.9552 59.4471 28.3963L63.1754 32.1246H48.1297C47.5058 32.1246 47 32.6304 47 33.2543C47 33.8783 47.5058 34.384 48.1297 34.384H63.1754L59.4471 38.1124C59.006 38.5535 59.006 39.2687 59.4471 39.7098C59.8882 40.151 60.6034 40.151 61.0446 39.7098L66.1811 34.5733C66.9095 33.8449 66.9095 32.6639 66.1811 31.9355L61.0445 26.7989C60.6034 26.3578 59.8883 26.3578 59.4471 26.7989Z\"/>\n\t\t\t\t\t\t\t\t<path class=\"crm-form-embed__settings--svg-block\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M75 26.0002C75 24.8957 75.8954 24.0002 77 24.0002H91C92.1046 24.0002 93 24.8957 93 26.0002V40.0002C93 41.1048 92.1046 42.0002 91 42.0002H77C75.8954 42.0002 75 41.1048 75 40.0002V26.0002ZM80 33.0002C80 32.448 80.4477 32.0002 81 32.0002H87C87.5523 32.0002 88 32.448 88 33.0002C88 33.5525 87.5523 34.0002 87 34.0002H81C80.4477 34.0002 80 33.5525 80 33.0002ZM80 28.0002C79.4477 28.0002 79 28.448 79 29.0002C79 29.5525 79.4477 30.0002 80 30.0002H88C88.5523 30.0002 89 29.5525 89 29.0002C89 28.448 88.5523 28.0002 88 28.0002H80Z\"/>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t`;\n\t\t\t}\n\t\t\tbreak;\n\t\tcase 'button.align':\n\t\t\tswitch (value)\n\t\t\t{\n\t\t\t\tcase 'left':\n\t\t\t\t\treturn `\n\t\t\t\t\t\t\t<svg width=\"100\" height=\"66\" viewBox=\"0 0 100 66\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t\t\t\t\t\t<path class=\"crm-form-embed__settings--svg-arrow\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M42.1597 39.1883C42.5214 38.7913 42.5214 38.1842 42.1598 37.7872L38.8098 34.1091L51.9669 34.1091C52.5703 34.1091 53.0595 33.6199 53.0595 33.0164C53.0595 32.413 52.5703 31.9238 51.9669 31.9238L38.8098 31.9238L42.1598 28.2457C42.5214 27.8486 42.5214 27.2416 42.1598 26.8445C41.7471 26.3914 41.0341 26.3914 40.6214 26.8445L35.9947 31.9243C35.431 32.5432 35.431 33.4896 35.9947 34.1085L40.6215 39.1883C41.0341 39.6414 41.7471 39.6414 42.1597 39.1883Z\" />\n\t\t\t\t\t\t\t\t<path class=\"crm-form-embed__settings--svg-block\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M7 27C5.89543 27 5 27.8954 5 29V37C5 38.1046 5.89543 39 7 39H27C28.1046 39 29 38.1046 29 37V29C29 27.8954 28.1046 27 27 27H7ZM13 32C12.4477 32 12 32.4477 12 33C12 33.5523 12.4477 34 13 34H21C21.5523 34 22 33.5523 22 33C22 32.4477 21.5523 32 21 32H13Z\" />\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t`;\n\t\t\t\tcase 'center':\n\t\t\t\t\treturn `\n\t\t\t\t\t\t\t<svg width=\"100\" height=\"66\" viewBox=\"0 0 100 66\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t\t\t\t\t\t<path class=\"crm-form-embed__settings--svg-arrow\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M26.4471 26.7986C26.006 27.2397 26.006 27.9549 26.4471 28.3961L30.1754 32.1244H21.1297C20.5058 32.1244 20 32.6302 20 33.2541C20 33.878 20.5058 34.3838 21.1297 34.3838H30.1754L26.4471 38.1121C26.006 38.5532 26.006 39.2685 26.4471 39.7096C26.8882 40.1507 27.6034 40.1507 28.0446 39.7096L33.1811 34.5731C33.9095 33.8447 33.9095 32.6637 33.1811 31.9352L28.0445 26.7987C27.6034 26.3576 26.8883 26.3576 26.4471 26.7986Z\"/>\n\t\t\t\t\t\t\t\t<path class=\"crm-form-embed__settings--svg-arrow\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M71.8799 39.6905C72.3031 39.257 72.3031 38.565 71.8799 38.1315L68.2216 34.3839L76.8822 34.3839C77.5061 34.3839 78.0119 33.8782 78.0119 33.2542C78.0119 32.6303 77.5061 32.1245 76.8822 32.1245L68.2216 32.1245L71.8799 28.377C72.3031 27.9435 72.3031 27.2515 71.8799 26.818C71.4421 26.3694 70.7208 26.3694 70.2829 26.818L65.2375 31.9864C64.5493 32.6915 64.5493 33.8169 65.2375 34.5219L70.283 39.6904C70.7208 40.1389 71.4421 40.1389 71.8799 39.6905Z\"/>\n\t\t\t\t\t\t\t\t<path class=\"crm-form-embed__settings--svg-block\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M39 27C37.8954 27 37 27.8954 37 29V37C37 38.1046 37.8954 39 39 39H59C60.1046 39 61 38.1046 61 37V29C61 27.8954 60.1046 27 59 27H39ZM45 32C44.4477 32 44 32.4477 44 33C44 33.5523 44.4477 34 45 34H53C53.5523 34 54 33.5523 54 33C54 32.4477 53.5523 32 53 32H45Z\"/>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t`;\n\t\t\t\tcase 'right':\n\t\t\t\t\treturn `\n\t\t\t\t\t\t\t<svg width=\"100\" height=\"66\" viewBox=\"0 0 100 66\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t\t\t\t\t\t<path class=\"crm-form-embed__settings--svg-arrow\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M59.4471 26.7986C59.006 27.2397 59.006 27.9549 59.4471 28.3961L63.1754 32.1244H48.1297C47.5058 32.1244 47 32.6302 47 33.2541C47 33.878 47.5058 34.3838 48.1297 34.3838H63.1754L59.4471 38.1121C59.006 38.5532 59.006 39.2685 59.4471 39.7096C59.8882 40.1507 60.6034 40.1507 61.0446 39.7096L66.1811 34.5731C66.9095 33.8447 66.9095 32.6637 66.1811 31.9352L61.0445 26.7987C60.6034 26.3576 59.8883 26.3576 59.4471 26.7986Z\"/>\n\t\t\t\t\t\t\t\t<path class=\"crm-form-embed__settings--svg-block\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M73 27C71.8954 27 71 27.8954 71 29V37C71 38.1046 71.8954 39 73 39H93C94.1046 39 95 38.1046 95 37V29C95 27.8954 94.1046 27 93 27H73ZM79 32C78.4477 32 78 32.4477 78 33C78 33.5523 78.4477 34 79 34H87C87.5523 34 88 33.5523 88 33C88 32.4477 87.5523 32 87 32H79Z\"/>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t`;\n\t\t\t}\n\t\t\tbreak;\n\t\tcase 'link.align':\n\t\t\tswitch (value)\n\t\t\t{\n\t\t\t\tcase 'inline':\n\t\t\t\t\treturn `\n\t\t\t\t\t<svg width=\"100\" height=\"66\" viewBox=\"0 0 100 66\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t\t\t\t<path class=\"crm-form-embed__settings--svg-block\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M27 27C27 25.8954 27.8954 25 29 25H45C46.1046 25 47 25.8954 47 27V39C47 40.1046 46.1046 41 45 41H29C27.8954 41 27 40.1046 27 39V27ZM35.3454 35L34.8202 33.3406H32.1798L31.6546 35H30L32.5563 28H34.4338L37 35H35.3454ZM34.4536 32.1008C33.9682 30.5972 33.694 29.7468 33.6313 29.5497C33.5718 29.3526 33.5289 29.1969 33.5025 29.0824C33.3935 29.4893 33.0814 30.4955 32.5662 32.1008H34.4536ZM30.75 37C30.3358 37 30 37.3358 30 37.75C30 38.1642 30.3358 38.5 30.75 38.5H43.25C43.6642 38.5 44 38.1642 44 37.75C44 37.3358 43.6642 37 43.25 37H30.75Z\"/>\n\t\t\t\t\t\t<path class=\"crm-form-embed__settings--svg-block\" d=\"M56.5684 36.9998H55.168V29.6345H52.6484V28.4333H59.0879V29.6345H56.5684V36.9998ZM63.0898 37.1169C62.082 37.1169 61.293 36.824 60.7227 36.238C60.1562 35.6482 59.873 34.8376 59.873 33.8064C59.873 32.7478 60.1367 31.9158 60.6641 31.3103C61.1914 30.7048 61.916 30.4021 62.8379 30.4021C63.6934 30.4021 64.3691 30.6619 64.8652 31.1814C65.3613 31.7009 65.6094 32.4158 65.6094 33.3259V34.0701H61.291C61.3105 34.699 61.4805 35.1833 61.8008 35.5232C62.1211 35.8591 62.5723 36.0271 63.1543 36.0271C63.5371 36.0271 63.8926 35.9919 64.2207 35.9216C64.5527 35.8474 64.9082 35.7263 65.2871 35.5583V36.6775C64.9512 36.8376 64.6113 36.9509 64.2676 37.0173C63.9238 37.0837 63.5312 37.1169 63.0898 37.1169ZM62.8379 31.4451C62.4004 31.4451 62.0488 31.5837 61.7832 31.8611C61.5215 32.1384 61.3652 32.5427 61.3145 33.074H64.2559C64.248 32.5388 64.1191 32.1345 63.8691 31.8611C63.6191 31.5837 63.2754 31.4451 62.8379 31.4451ZM68.6152 33.6892L66.4414 30.5193H68.0117L69.4883 32.7869L70.9766 30.5193H72.5352L70.3555 33.6892L72.6465 36.9998H71.0879L69.4883 34.574L67.8945 36.9998H66.3359L68.6152 33.6892ZM76.1973 36.0037C76.5332 36.0037 76.8691 35.9509 77.2051 35.8455V36.8826C77.0527 36.949 76.8555 37.0037 76.6133 37.0466C76.375 37.0935 76.127 37.1169 75.8691 37.1169C74.5645 37.1169 73.9121 36.4294 73.9121 35.0544V31.5623H73.0273V30.9529L73.9766 30.449L74.4453 29.0779H75.2949V30.5193H77.1406V31.5623H75.2949V35.031C75.2949 35.363 75.377 35.6091 75.541 35.7693C75.709 35.9255 75.9277 36.0037 76.1973 36.0037Z\"/>\n\t\t\t\t\t</svg>\n\t\t\t\t\t`;\n\t\t\t\tcase 'left':\n\t\t\t\t\treturn `\n\t\t\t\t\t\t\t<svg width=\"100\" height=\"66\" viewBox=\"0 0 100 66\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t\t\t\t\t\t<path class=\"crm-form-embed__settings--svg-arrow\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M42.1598 39.1883C42.5214 38.7913 42.5214 38.1842 42.1598 37.7872L38.8098 34.1091L51.9669 34.1091C52.5704 34.1091 53.0596 33.6199 53.0596 33.0164V33.0164C53.0596 32.413 52.5704 31.9238 51.9669 31.9238L38.8098 31.9238L42.1598 28.2457C42.5214 27.8486 42.5214 27.2416 42.1598 26.8445V26.8445C41.7471 26.3914 41.0341 26.3914 40.6214 26.8445L35.9948 31.9242C35.431 32.5432 35.431 33.4895 35.9948 34.1085L40.6215 39.1883C41.0342 39.6414 41.7471 39.6414 42.1598 39.1883V39.1883Z\"/>\n\t\t\t\t\t\t\t\t<path class=\"crm-form-embed__settings--svg-block\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M8 27C8 25.8954 8.89543 25 10 25H26C27.1046 25 28 25.8954 28 27V39C28 40.1046 27.1046 41 26 41H10C8.89543 41 8 40.1046 8 39V27ZM16.3454 35L15.8202 33.3406H13.1798L12.6546 35H11L13.5563 28H15.4338L18 35H16.3454ZM15.4536 32.1008C14.9682 30.5972 14.694 29.7468 14.6313 29.5497C14.5718 29.3526 14.5289 29.1969 14.5025 29.0824C14.3935 29.4893 14.0814 30.4955 13.5662 32.1008H15.4536ZM11.75 37C11.3358 37 11 37.3358 11 37.75C11 38.1642 11.3358 38.5 11.75 38.5H24.25C24.6642 38.5 25 38.1642 25 37.75C25 37.3358 24.6642 37 24.25 37H11.75Z\"/>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t`;\n\t\t\t\tcase 'center':\n\t\t\t\t\treturn `\n\t\t\t\t\t\t\t<svg width=\"100\" height=\"66\" viewBox=\"0 0 100 66\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t\t\t\t\t\t<path class=\"crm-form-embed__settings--svg-arrow\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M26.4471 26.7986C26.006 27.2397 26.006 27.9549 26.4471 28.3961L30.1754 32.1244H21.1297C20.5058 32.1244 20 32.6302 20 33.2541V33.2541C20 33.878 20.5058 34.3838 21.1297 34.3838H30.1754L26.4471 38.1121C26.006 38.5532 26.006 39.2685 26.4471 39.7096V39.7096C26.8882 40.1507 27.6034 40.1507 28.0446 39.7096L33.1811 34.5731C33.9095 33.8447 33.9095 32.6636 33.1811 31.9352L28.0445 26.7987C27.6034 26.3576 26.8883 26.3576 26.4471 26.7986V26.7986Z\"/>\n\t\t\t\t\t\t\t\t<path class=\"crm-form-embed__settings--svg-arrow\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M71.88 39.6904C72.3032 39.257 72.3032 38.565 71.88 38.1315L68.2217 34.3839L76.8823 34.3839C77.5062 34.3839 78.012 33.8781 78.012 33.2542V33.2542C78.012 32.6303 77.5062 32.1245 76.8823 32.1245L68.2217 32.1245L71.88 28.377C72.3032 27.9434 72.3032 27.2515 71.88 26.818V26.818C71.4421 26.3694 70.7208 26.3694 70.283 26.818L65.2376 31.9864C64.5493 32.6915 64.5493 33.8169 65.2376 34.5219L70.2831 39.6904C70.7209 40.1389 71.4421 40.1389 71.88 39.6904V39.6904Z\"/>\n\t\t\t\t\t\t\t\t<path class=\"crm-form-embed__settings--svg-block\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M40 27C40 25.8954 40.8954 25 42 25H58C59.1046 25 60 25.8954 60 27V39C60 40.1046 59.1046 41 58 41H42C40.8954 41 40 40.1046 40 39V27ZM48.3454 35L47.8202 33.3406H45.1798L44.6546 35H43L45.5563 28H47.4338L50 35H48.3454ZM47.4536 32.1008C46.9682 30.5972 46.694 29.7468 46.6313 29.5497C46.5718 29.3526 46.5289 29.1969 46.5025 29.0824C46.3935 29.4893 46.0814 30.4955 45.5662 32.1008H47.4536ZM43.75 37C43.3358 37 43 37.3358 43 37.75C43 38.1642 43.3358 38.5 43.75 38.5H56.25C56.6642 38.5 57 38.1642 57 37.75C57 37.3358 56.6642 37 56.25 37H43.75Z\"/>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t`;\n\t\t\t\tcase 'right':\n\t\t\t\t\treturn `\n\t\t\t\t\t\t\t<svg width=\"100\" height=\"66\" viewBox=\"0 0 100 66\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t\t\t\t\t\t<path class=\"crm-form-embed__settings--svg-arrow\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M59.4471 26.7986C59.006 27.2397 59.006 27.9549 59.4471 28.3961L63.1754 32.1244H48.1297C47.5058 32.1244 47 32.6302 47 33.2541V33.2541C47 33.878 47.5058 34.3838 48.1297 34.3838H63.1754L59.4471 38.1121C59.006 38.5532 59.006 39.2685 59.4471 39.7096V39.7096C59.8882 40.1507 60.6034 40.1507 61.0446 39.7096L66.1811 34.5731C66.9095 33.8447 66.9095 32.6636 66.1811 31.9352L61.0445 26.7987C60.6034 26.3576 59.8883 26.3576 59.4471 26.7986V26.7986Z\"/>\n\t\t\t\t\t\t\t\t<path class=\"crm-form-embed__settings--svg-block\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M74 27C74 25.8954 74.8954 25 76 25H92C93.1046 25 94 25.8954 94 27V39C94 40.1046 93.1046 41 92 41H76C74.8954 41 74 40.1046 74 39V27ZM82.3454 35L81.8202 33.3406H79.1798L78.6546 35H77L79.5563 28H81.4338L84 35H82.3454ZM81.4536 32.1008C80.9682 30.5972 80.694 29.7468 80.6313 29.5497C80.5718 29.3526 80.5289 29.1969 80.5025 29.0824C80.3935 29.4893 80.0814 30.4955 79.5662 32.1008H81.4536ZM77.75 37C77.3358 37 77 37.3358 77 37.75C77 38.1642 77.3358 38.5 77.75 38.5H90.25C90.6642 38.5 91 38.1642 91 37.75C91 37.3358 90.6642 37 90.25 37H77.75Z\"/>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t`;\n\t\t\t}\n\t\t\tbreak;\n\t\tcase 'vertical':\n\t\t\tswitch (value)\n\t\t\t{\n\t\t\t\tcase 'bottom':\n\t\t\t\t\treturn `\n\t\t\t\t\t\t\t<svg width=\"100\" height=\"66\" viewBox=\"0 0 100 66\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t\t\t\t\t\t<path class=\"crm-form-embed__settings--svg-block\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M66 60.0002C66 61.1048 65.1046 62.0002 64 62.0002L36 62.0002C34.8954 62.0002 34 61.1048 34 60.0002L34 50.0002C34 48.3434 35.3431 47.0002 37 47.0002L63 47.0002C64.6569 47.0002 66 48.3434 66 50.0002L66 60.0002ZM63 58.0002C63 58.5525 62.5523 59.0002 62 59.0002L38 59.0002C37.4477 59.0002 37 58.5525 37 58.0002C37 57.448 37.4477 57.0002 38 57.0002L62 57.0002C62.5523 57.0002 63 57.448 63 58.0002ZM58 55.0002C58.5523 55.0002 59 54.5525 59 54.0002C59 53.448 58.5523 53.0002 58 53.0002L42 53.0002C41.4477 53.0002 41 53.448 41 54.0002C41 54.5525 41.4477 55.0002 42 55.0002L58 55.0002Z\"/>\n\t\t\t\t\t\t\t\t<path class=\"crm-form-embed__settings--svg-arrow\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M43.7986 29.0531C44.2397 29.4942 44.9549 29.4943 45.3961 29.0531L49.1244 25.3248L49.1244 40.3705C49.1244 40.9945 49.6302 41.5002 50.2541 41.5002C50.878 41.5002 51.3838 40.9945 51.3838 40.3705L51.3838 25.3248L55.1121 29.0531C55.5532 29.4943 56.2685 29.4943 56.7096 29.0531C57.1507 28.612 57.1507 27.8968 56.7096 27.4557L51.5731 22.3192C50.8447 21.5907 49.6636 21.5908 48.9352 22.3192L43.7987 27.4557C43.3576 27.8968 43.3576 28.612 43.7986 29.0531Z\"/>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t`;\n\t\t\t\tcase 'top':\n\t\t\t\t\treturn `\n\t\t\t\t\t\t\t<svg width=\"100\" height=\"66\" viewBox=\"0 0 100 66\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t\t\t\t\t\t<path class=\"crm-form-embed__settings--svg-block\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M34 6.00024C34 4.89567 34.8954 4.00024 36 4.00024L64 4.00024C65.1046 4.00024 66 4.89567 66 6.00024L66 16.0002C66 17.6571 64.6569 19.0002 63 19.0002L37 19.0002C35.3431 19.0002 34 17.6571 34 16.0002L34 6.00024ZM63 8.00024C63 8.55253 62.5523 9.00024 62 9.00024L38 9.00024C37.4477 9.00024 37 8.55253 37 8.00024C37 7.44796 37.4477 7.00024 38 7.00024L62 7.00025C62.5523 7.00025 63 7.44796 63 8.00024ZM58 13.0002C58.5523 13.0002 59 12.5525 59 12.0002C59 11.448 58.5523 11.0002 58 11.0002L42 11.0002C41.4477 11.0002 41 11.448 41 12.0002C41 12.5525 41.4477 13.0002 42 13.0002L58 13.0002Z\"/>\n\t\t\t\t\t\t\t\t<path class=\"crm-form-embed__settings--svg-arrow\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M56.7097 37.4474C56.2686 37.0062 55.5534 37.0062 55.1122 37.4474L51.3839 41.1757L51.3839 26.1299C51.3839 25.506 50.8781 25.0002 50.2542 25.0002C49.6303 25.0002 49.1245 25.506 49.1245 26.1299L49.1245 41.1757L45.3962 37.4474C44.9551 37.0062 44.2398 37.0062 43.7987 37.4474C43.3576 37.8885 43.3576 38.6037 43.7987 39.0448L48.9352 44.1813C49.6636 44.9097 50.8446 44.9097 51.5731 44.1813L56.7096 39.0448C57.1507 38.6037 57.1507 37.8885 56.7097 37.4474Z\"/>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t`;\n\t\t\t}\n\t\t\tbreak;\n\t}\n}","export const argumentAsArray = (argument) => (Array.isArray(argument) ? argument : [argument]);\nexport const isElement = (target) => target instanceof Node;\nexport const isElementList = (nodeList) => nodeList instanceof NodeList;\nexport const eachNode = (nodeList, callback) => {\n    if (nodeList && callback) {\n        nodeList = isElementList(nodeList) ? nodeList : [nodeList];\n        for (let i = 0; i < nodeList.length; i++) {\n            if (callback(nodeList[i], i, nodeList.length) === true) {\n                break;\n            }\n        }\n    }\n};\nexport const throwError = (message) => console.error(`[scroll-lock] ${message}`);\nexport const arrayAsSelector = (array) => {\n    if (Array.isArray(array)) {\n        const selector = array.join(', ');\n        return selector;\n    }\n};\nexport const nodeListAsArray = (nodeList) => {\n    const nodes = [];\n    eachNode(nodeList, (node) => nodes.push(node));\n\n    return nodes;\n};\nexport const findParentBySelector = ($el, selector, self = true, $root = document) => {\n    if (self && nodeListAsArray($root.querySelectorAll(selector)).indexOf($el) !== -1) {\n        return $el;\n    }\n\n    while (($el = $el.parentElement) && nodeListAsArray($root.querySelectorAll(selector)).indexOf($el) === -1);\n    return $el;\n};\nexport const elementHasSelector = ($el, selector, $root = document) => {\n    const has = nodeListAsArray($root.querySelectorAll(selector)).indexOf($el) !== -1;\n    return has;\n};\nexport const elementHasOverflowHidden = ($el) => {\n    if ($el) {\n        const computedStyle = getComputedStyle($el);\n        const overflowIsHidden = computedStyle.overflow === 'hidden';\n        return overflowIsHidden;\n    }\n};\nexport const elementScrollTopOnStart = ($el) => {\n    if ($el) {\n        if (elementHasOverflowHidden($el)) {\n            return true;\n        }\n\n        const scrollTop = $el.scrollTop;\n        return scrollTop <= 0;\n    }\n};\nexport const elementScrollTopOnEnd = ($el) => {\n    if ($el) {\n        if (elementHasOverflowHidden($el)) {\n            return true;\n        }\n\n        const scrollTop = $el.scrollTop;\n        const scrollHeight = $el.scrollHeight;\n        const scrollTopWithHeight = scrollTop + $el.offsetHeight;\n        return scrollTopWithHeight >= scrollHeight;\n    }\n};\nexport const elementScrollLeftOnStart = ($el) => {\n    if ($el) {\n        if (elementHasOverflowHidden($el)) {\n            return true;\n        }\n\n        const scrollLeft = $el.scrollLeft;\n        return scrollLeft <= 0;\n    }\n};\nexport const elementScrollLeftOnEnd = ($el) => {\n    if ($el) {\n        if (elementHasOverflowHidden($el)) {\n            return true;\n        }\n\n        const scrollLeft = $el.scrollLeft;\n        const scrollWidth = $el.scrollWidth;\n        const scrollLeftWithWidth = scrollLeft + $el.offsetWidth;\n        return scrollLeftWithWidth >= scrollWidth;\n    }\n};\nexport const elementIsScrollableField = ($el) => {\n    const selector = 'textarea, [contenteditable=\"true\"]';\n    return elementHasSelector($el, selector);\n};\nexport const elementIsInputRange = ($el) => {\n    const selector = 'input[type=\"range\"]';\n    return elementHasSelector($el, selector);\n};\n","import {\n    eachNode,\n    argumentAsArray,\n    isElement,\n    throwError,\n    arrayAsSelector,\n    findParentBySelector,\n    elementScrollTopOnStart,\n    elementScrollTopOnEnd,\n    elementScrollLeftOnStart,\n    elementScrollLeftOnEnd,\n    elementIsScrollableField,\n    elementHasSelector,\n    elementIsInputRange\n} from './tools';\n\nconst FILL_GAP_AVAILABLE_METHODS = ['padding', 'margin', 'width', 'max-width', 'none'];\nconst TOUCH_DIRECTION_DETECT_OFFSET = 3;\n\nconst state = {\n    scroll: true,\n    queue: 0,\n    scrollableSelectors: ['[data-scroll-lock-scrollable]'],\n    lockableSelectors: ['body', '[data-scroll-lock-lockable]'],\n    fillGapSelectors: ['body', '[data-scroll-lock-fill-gap]', '[data-scroll-lock-lockable]'],\n    fillGapMethod: FILL_GAP_AVAILABLE_METHODS[0],\n    //\n    startTouchY: 0,\n    startTouchX: 0\n};\n\nexport const disablePageScroll = (target) => {\n    if (state.queue <= 0) {\n        state.scroll = false;\n        hideLockableOverflow();\n        fillGaps();\n    }\n\n    addScrollableTarget(target);\n    state.queue++;\n};\nexport const enablePageScroll = (target) => {\n    state.queue > 0 && state.queue--;\n    if (state.queue <= 0) {\n        state.scroll = true;\n        showLockableOverflow();\n        unfillGaps();\n    }\n\n    removeScrollableTarget(target);\n};\nexport const getScrollState = () => {\n    return state.scroll;\n};\nexport const clearQueueScrollLocks = () => {\n    state.queue = 0;\n};\nexport const getTargetScrollBarWidth = ($target, onlyExists = false) => {\n    if (isElement($target)) {\n        const currentOverflowYProperty = $target.style.overflowY;\n        if (onlyExists) {\n            if (!getScrollState()) {\n                $target.style.overflowY = $target.dataset.scrollLockSavedOverflowYProperty;\n            }\n        } else {\n            $target.style.overflowY = 'scroll';\n        }\n        const width = getCurrentTargetScrollBarWidth($target);\n        $target.style.overflowY = currentOverflowYProperty;\n\n        return width;\n    } else {\n        return 0;\n    }\n};\nexport const getCurrentTargetScrollBarWidth = ($target) => {\n    if (isElement($target)) {\n        if ($target === document.body) {\n            const documentWidth = document.documentElement.clientWidth;\n            const windowWidth = window.innerWidth;\n            const currentWidth = windowWidth - documentWidth;\n\n            return currentWidth;\n        } else {\n            const borderLeftWidthCurrentProperty = $target.style.borderLeftWidth;\n            const borderRightWidthCurrentProperty = $target.style.borderRightWidth;\n            $target.style.borderLeftWidth = '0px';\n            $target.style.borderRightWidth = '0px';\n            const currentWidth = $target.offsetWidth - $target.clientWidth;\n            $target.style.borderLeftWidth = borderLeftWidthCurrentProperty;\n            $target.style.borderRightWidth = borderRightWidthCurrentProperty;\n\n            return currentWidth;\n        }\n    } else {\n        return 0;\n    }\n};\nexport const getPageScrollBarWidth = (onlyExists = false) => {\n    return getTargetScrollBarWidth(document.body, onlyExists);\n};\nexport const getCurrentPageScrollBarWidth = () => {\n    return getCurrentTargetScrollBarWidth(document.body);\n};\nexport const addScrollableTarget = (target) => {\n    if (target) {\n        const targets = argumentAsArray(target);\n        targets.map(($targets) => {\n            eachNode($targets, ($target) => {\n                if (isElement($target)) {\n                    $target.dataset.scrollLockScrollable = '';\n                } else {\n                    throwError(`\"${$target}\" is not a Element.`);\n                }\n            });\n        });\n    }\n};\nexport const removeScrollableTarget = (target) => {\n    if (target) {\n        const targets = argumentAsArray(target);\n        targets.map(($targets) => {\n            eachNode($targets, ($target) => {\n                if (isElement($target)) {\n                    delete $target.dataset.scrollLockScrollable;\n                } else {\n                    throwError(`\"${$target}\" is not a Element.`);\n                }\n            });\n        });\n    }\n};\nexport const addScrollableSelector = (selector) => {\n    if (selector) {\n        const selectors = argumentAsArray(selector);\n        selectors.map((selector) => {\n            state.scrollableSelectors.push(selector);\n        });\n    }\n};\nexport const removeScrollableSelector = (selector) => {\n    if (selector) {\n        const selectors = argumentAsArray(selector);\n        selectors.map((selector) => {\n            state.scrollableSelectors = state.scrollableSelectors.filter((sSelector) => sSelector !== selector);\n        });\n    }\n};\nexport const addLockableTarget = (target) => {\n    if (target) {\n        const targets = argumentAsArray(target);\n        targets.map(($targets) => {\n            eachNode($targets, ($target) => {\n                if (isElement($target)) {\n                    $target.dataset.scrollLockLockable = '';\n                } else {\n                    throwError(`\"${$target}\" is not a Element.`);\n                }\n            });\n        });\n        if (!getScrollState()) {\n            hideLockableOverflow();\n        }\n    }\n};\nexport const removeLockableTarget = (target) => {\n    if (target) {\n        const targets = argumentAsArray(target);\n        targets.map(($targets) => {\n            eachNode($targets, ($target) => {\n                if (isElement($target)) {\n                    delete $target.dataset.scrollLockLockable;\n                    showLockableOverflowTarget($target);\n                } else {\n                    throwError(`\"${$target}\" is not a Element.`);\n                }\n            });\n        });\n    }\n};\nexport const addLockableSelector = (selector) => {\n    if (selector) {\n        const selectors = argumentAsArray(selector);\n        selectors.map((selector) => {\n            state.lockableSelectors.push(selector);\n        });\n        if (!getScrollState()) {\n            hideLockableOverflow();\n        }\n        addFillGapSelector(selector);\n    }\n};\nexport const setFillGapMethod = (method) => {\n    if (method) {\n        if (FILL_GAP_AVAILABLE_METHODS.indexOf(method) !== -1) {\n            state.fillGapMethod = method;\n            refillGaps();\n        } else {\n            const methods = FILL_GAP_AVAILABLE_METHODS.join(', ');\n            throwError(`\"${method}\" method is not available!\\nAvailable fill gap methods: ${methods}.`);\n        }\n    }\n};\nexport const addFillGapTarget = (target) => {\n    if (target) {\n        const targets = argumentAsArray(target);\n        targets.map(($targets) => {\n            eachNode($targets, ($target) => {\n                if (isElement($target)) {\n                    $target.dataset.scrollLockFillGap = '';\n                    if (!state.scroll) {\n                        fillGapTarget($target);\n                    }\n                } else {\n                    throwError(`\"${$target}\" is not a Element.`);\n                }\n            });\n        });\n    }\n};\nexport const removeFillGapTarget = (target) => {\n    if (target) {\n        const targets = argumentAsArray(target);\n        targets.map(($targets) => {\n            eachNode($targets, ($target) => {\n                if (isElement($target)) {\n                    delete $target.dataset.scrollLockFillGap;\n                    if (!state.scroll) {\n                        unfillGapTarget($target);\n                    }\n                } else {\n                    throwError(`\"${$target}\" is not a Element.`);\n                }\n            });\n        });\n    }\n};\nexport const addFillGapSelector = (selector) => {\n    if (selector) {\n        const selectors = argumentAsArray(selector);\n        selectors.map((selector) => {\n            state.fillGapSelectors.push(selector);\n            if (!state.scroll) {\n                fillGapSelector(selector);\n            }\n        });\n    }\n};\nexport const removeFillGapSelector = (selector) => {\n    if (selector) {\n        const selectors = argumentAsArray(selector);\n        selectors.map((selector) => {\n            state.fillGapSelectors = state.fillGapSelectors.filter((fSelector) => fSelector !== selector);\n            if (!state.scroll) {\n                unfillGapSelector(selector);\n            }\n        });\n    }\n};\n\nexport const refillGaps = () => {\n    if (!state.scroll) {\n        fillGaps();\n    }\n};\n\nconst hideLockableOverflow = () => {\n    const selector = arrayAsSelector(state.lockableSelectors);\n    hideLockableOverflowSelector(selector);\n};\nconst showLockableOverflow = () => {\n    const selector = arrayAsSelector(state.lockableSelectors);\n    showLockableOverflowSelector(selector);\n};\nconst hideLockableOverflowSelector = (selector) => {\n    const $targets = document.querySelectorAll(selector);\n    eachNode($targets, ($target) => {\n        hideLockableOverflowTarget($target);\n    });\n};\nconst showLockableOverflowSelector = (selector) => {\n    const $targets = document.querySelectorAll(selector);\n    eachNode($targets, ($target) => {\n        showLockableOverflowTarget($target);\n    });\n};\nconst hideLockableOverflowTarget = ($target) => {\n    if (isElement($target) && $target.dataset.scrollLockLocked !== 'true') {\n        const computedStyle = window.getComputedStyle($target);\n        $target.dataset.scrollLockSavedOverflowYProperty = computedStyle.overflowY;\n        $target.dataset.scrollLockSavedInlineOverflowProperty = $target.style.overflow;\n        $target.dataset.scrollLockSavedInlineOverflowYProperty = $target.style.overflowY;\n        $target.style.overflow = 'hidden';\n        $target.dataset.scrollLockLocked = 'true';\n    }\n};\nconst showLockableOverflowTarget = ($target) => {\n    if (isElement($target) && $target.dataset.scrollLockLocked === 'true') {\n        $target.style.overflow = $target.dataset.scrollLockSavedInlineOverflowProperty;\n        $target.style.overflowY = $target.dataset.scrollLockSavedInlineOverflowYProperty;\n        delete $target.dataset.scrollLockSavedOverflowYProperty;\n        delete $target.dataset.scrollLockSavedInlineOverflowProperty;\n        delete $target.dataset.scrollLockSavedInlineOverflowYProperty;\n        delete $target.dataset.scrollLockLocked;\n    }\n};\n\nconst fillGaps = () => {\n    state.fillGapSelectors.map((selector) => {\n        fillGapSelector(selector);\n    });\n};\nconst unfillGaps = () => {\n    state.fillGapSelectors.map((selector) => {\n        unfillGapSelector(selector);\n    });\n};\nconst fillGapSelector = (selector) => {\n    const $targets = document.querySelectorAll(selector);\n    const isLockable = state.lockableSelectors.indexOf(selector) !== -1;\n    eachNode($targets, ($target) => {\n        fillGapTarget($target, isLockable);\n    });\n};\nconst fillGapTarget = ($target, isLockable = false) => {\n    if (isElement($target)) {\n        let scrollBarWidth;\n        if ($target.dataset.scrollLockLockable === '' || isLockable) {\n            scrollBarWidth = getTargetScrollBarWidth($target, true);\n        } else {\n            const $lockableParent = findParentBySelector($target, arrayAsSelector(state.lockableSelectors));\n            scrollBarWidth = getTargetScrollBarWidth($lockableParent, true);\n        }\n\n        if ($target.dataset.scrollLockFilledGap === 'true') {\n            unfillGapTarget($target);\n        }\n\n        const computedStyle = window.getComputedStyle($target);\n        $target.dataset.scrollLockFilledGap = 'true';\n        $target.dataset.scrollLockCurrentFillGapMethod = state.fillGapMethod;\n\n        if (state.fillGapMethod === 'margin') {\n            const currentMargin = parseFloat(computedStyle.marginRight);\n            $target.style.marginRight = `${currentMargin + scrollBarWidth}px`;\n        } else if (state.fillGapMethod === 'width') {\n            $target.style.width = `calc(100% - ${scrollBarWidth}px)`;\n        } else if (state.fillGapMethod === 'max-width') {\n            $target.style.maxWidth = `calc(100% - ${scrollBarWidth}px)`;\n        } else if (state.fillGapMethod === 'padding') {\n            const currentPadding = parseFloat(computedStyle.paddingRight);\n            $target.style.paddingRight = `${currentPadding + scrollBarWidth}px`;\n        }\n    }\n};\nconst unfillGapSelector = (selector) => {\n    const $targets = document.querySelectorAll(selector);\n    eachNode($targets, ($target) => {\n        unfillGapTarget($target);\n    });\n};\nconst unfillGapTarget = ($target) => {\n    if (isElement($target)) {\n        if ($target.dataset.scrollLockFilledGap === 'true') {\n            const currentFillGapMethod = $target.dataset.scrollLockCurrentFillGapMethod;\n            delete $target.dataset.scrollLockFilledGap;\n            delete $target.dataset.scrollLockCurrentFillGapMethod;\n\n            if (currentFillGapMethod === 'margin') {\n                $target.style.marginRight = ``;\n            } else if (currentFillGapMethod === 'width') {\n                $target.style.width = ``;\n            } else if (currentFillGapMethod === 'max-width') {\n                $target.style.maxWidth = ``;\n            } else if (currentFillGapMethod === 'padding') {\n                $target.style.paddingRight = ``;\n            }\n        }\n    }\n};\n\nconst onResize = (e) => {\n    refillGaps();\n};\n\nconst onTouchStart = (e) => {\n    if (!state.scroll) {\n        state.startTouchY = e.touches[0].clientY;\n        state.startTouchX = e.touches[0].clientX;\n    }\n};\nconst onTouchMove = (e) => {\n    if (!state.scroll) {\n        const { startTouchY, startTouchX } = state;\n        const currentClientY = e.touches[0].clientY;\n        const currentClientX = e.touches[0].clientX;\n\n        if (e.touches.length < 2) {\n            const selector = arrayAsSelector(state.scrollableSelectors);\n            const direction = {\n                up: startTouchY < currentClientY,\n                down: startTouchY > currentClientY,\n                left: startTouchX < currentClientX,\n                right: startTouchX > currentClientX\n            };\n            const directionWithOffset = {\n                up: startTouchY + TOUCH_DIRECTION_DETECT_OFFSET < currentClientY,\n                down: startTouchY - TOUCH_DIRECTION_DETECT_OFFSET > currentClientY,\n                left: startTouchX + TOUCH_DIRECTION_DETECT_OFFSET < currentClientX,\n                right: startTouchX - TOUCH_DIRECTION_DETECT_OFFSET > currentClientX\n            };\n            const handle = ($el, skip = false) => {\n                if ($el) {\n                    const parentScrollableEl = findParentBySelector($el, selector, false);\n                    if (elementIsInputRange($el)) {\n                        return false;\n                    }\n\n                    if (\n                        skip ||\n                        ((elementIsScrollableField($el) && findParentBySelector($el, selector)) ||\n                            elementHasSelector($el, selector))\n                    ) {\n                        let prevent = false;\n                        if (elementScrollLeftOnStart($el) && elementScrollLeftOnEnd($el)) {\n                            if (\n                                (direction.up && elementScrollTopOnStart($el)) ||\n                                (direction.down && elementScrollTopOnEnd($el))\n                            ) {\n                                prevent = true;\n                            }\n                        } else if (elementScrollTopOnStart($el) && elementScrollTopOnEnd($el)) {\n                            if (\n                                (direction.left && elementScrollLeftOnStart($el)) ||\n                                (direction.right && elementScrollLeftOnEnd($el))\n                            ) {\n                                prevent = true;\n                            }\n                        } else if (\n                            (directionWithOffset.up && elementScrollTopOnStart($el)) ||\n                            (directionWithOffset.down && elementScrollTopOnEnd($el)) ||\n                            (directionWithOffset.left && elementScrollLeftOnStart($el)) ||\n                            (directionWithOffset.right && elementScrollLeftOnEnd($el))\n                        ) {\n                            prevent = true;\n                        }\n                        if (prevent) {\n                            if (parentScrollableEl) {\n                                handle(parentScrollableEl, true);\n                            } else {\n                                e.preventDefault();\n                            }\n                        }\n                    } else {\n                        handle(parentScrollableEl);\n                    }\n                } else {\n                    e.preventDefault();\n                }\n            };\n\n            handle(e.target);\n        }\n    }\n};\nconst onTouchEnd = (e) => {\n    if (!state.scroll) {\n        state.startTouchY = 0;\n        state.startTouchX = 0;\n    }\n};\n\nif (typeof window !== 'undefined') {\n    window.addEventListener('resize', onResize);\n}\nif (typeof document !== 'undefined') {\n    document.addEventListener('touchstart', onTouchStart);\n    document.addEventListener('touchmove', onTouchMove, {\n        passive: false\n    });\n    document.addEventListener('touchend', onTouchEnd);\n}\n\nconst deprecatedMethods = {\n    hide(target) {\n        throwError(\n            '\"hide\" is deprecated! Use \"disablePageScroll\" instead. \\n https://github.com/FL3NKEY/scroll-lock#disablepagescrollscrollabletarget'\n        );\n\n        disablePageScroll(target);\n    },\n    show(target) {\n        throwError(\n            '\"show\" is deprecated! Use \"enablePageScroll\" instead. \\n https://github.com/FL3NKEY/scroll-lock#enablepagescrollscrollabletarget'\n        );\n\n        enablePageScroll(target);\n    },\n    toggle(target) {\n        throwError('\"toggle\" is deprecated! Do not use it.');\n\n        if (getScrollState()) {\n            disablePageScroll();\n        } else {\n            enablePageScroll(target);\n        }\n    },\n    getState() {\n        throwError(\n            '\"getState\" is deprecated! Use \"getScrollState\" instead. \\n https://github.com/FL3NKEY/scroll-lock#getscrollstate'\n        );\n\n        return getScrollState();\n    },\n    getWidth() {\n        throwError(\n            '\"getWidth\" is deprecated! Use \"getPageScrollBarWidth\" instead. \\n https://github.com/FL3NKEY/scroll-lock#getpagescrollbarwidth'\n        );\n\n        return getPageScrollBarWidth();\n    },\n    getCurrentWidth() {\n        throwError(\n            '\"getCurrentWidth\" is deprecated! Use \"getCurrentPageScrollBarWidth\" instead. \\n https://github.com/FL3NKEY/scroll-lock#getcurrentpagescrollbarwidth'\n        );\n\n        return getCurrentPageScrollBarWidth();\n    },\n    setScrollableTargets(target) {\n        throwError(\n            '\"setScrollableTargets\" is deprecated! Use \"addScrollableTarget\" instead. \\n https://github.com/FL3NKEY/scroll-lock#addscrollabletargetscrollabletarget'\n        );\n\n        addScrollableTarget(target);\n    },\n    setFillGapSelectors(selector) {\n        throwError(\n            '\"setFillGapSelectors\" is deprecated! Use \"addFillGapSelector\" instead. \\n https://github.com/FL3NKEY/scroll-lock#addfillgapselectorfillgapselector'\n        );\n\n        addFillGapSelector(selector);\n    },\n    setFillGapTargets(target) {\n        throwError(\n            '\"setFillGapTargets\" is deprecated! Use \"addFillGapTarget\" instead. \\n https://github.com/FL3NKEY/scroll-lock#addfillgaptargetfillgaptarget'\n        );\n\n        addFillGapTarget(target);\n    },\n    clearQueue() {\n        throwError(\n            '\"clearQueue\" is deprecated! Use \"clearQueueScrollLocks\" instead. \\n https://github.com/FL3NKEY/scroll-lock#clearqueuescrolllocks'\n        );\n\n        clearQueueScrollLocks();\n    }\n};\n\nconst scrollLock = {\n    disablePageScroll,\n    enablePageScroll,\n\n    getScrollState,\n    clearQueueScrollLocks,\n    getTargetScrollBarWidth,\n    getCurrentTargetScrollBarWidth,\n    getPageScrollBarWidth,\n    getCurrentPageScrollBarWidth,\n\n    addScrollableSelector,\n    removeScrollableSelector,\n\n    addScrollableTarget,\n    removeScrollableTarget,\n\n    addLockableSelector,\n\n    addLockableTarget,\n    removeLockableTarget,\n\n    addFillGapSelector,\n    removeFillGapSelector,\n\n    addFillGapTarget,\n    removeFillGapTarget,\n\n    setFillGapMethod,\n    refillGaps,\n\n    _state: state,\n\n    ...deprecatedMethods\n};\n\nexport default scrollLock;\n","import * as ScrollLock from './scroll-lock/scroll-lock';\nimport {MoveObserver} from './moveobserver';\n\nconst Scroll = {\n\titems: [],\n\ttoggle (element, mode)\n\t{\n\t\tmode ? this.enable(element) : this.disable(element);\n\t},\n\tgetLastItem ()\n\t{\n\t\treturn this.items.length > 0 ? this.items[this.items.length - 1] : null;\n\t},\n\tdisable (element)\n\t{\n\t\tlet prevElement = this.getLastItem();\n\t\tif (prevElement)\n\t\t{\n\t\t\tScrollLock.addLockableTarget(prevElement);\n\t\t\tScrollLock.addFillGapTarget(prevElement);\n\t\t}\n\t\tScrollLock.disablePageScroll(element);\n\t\tthis.items.push(element);\n\t},\n\tenable ()\n\t{\n\t\tsetTimeout(() => {\n\t\t\tlet element = this.items.pop();\n\t\t\tScrollLock.enablePageScroll(element);\n\t\t\tlet prevElement = this.getLastItem();\n\t\t\tif (prevElement)\n\t\t\t{\n\t\t\t\tScrollLock.removeFillGapTarget(prevElement);\n\t\t\t\tScrollLock.removeLockableTarget(prevElement);\n\t\t\t}\n\t\t}, 300);\n\t},\n};\n\nconst Type = {\n\tdefined(val): Boolean\n\t{\n\t\treturn typeof val !== 'undefined';\n\t},\n\tobject(val): Boolean\n\t{\n\t\tif (!val || typeof val !== 'object' || Object.prototype.toString.call(val) !== '[object Object]')\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tconst proto = Object.getPrototypeOf(val);\n\t\tif (proto === null)\n\t\t{\n\t\t\treturn true;\n\t\t}\n\n\t\tconst objectCtorString = Function.prototype.toString.call(Object);\n\t\tconst ctor = proto.hasOwnProperty('constructor') && proto.constructor;\n\n\t\treturn (\n\t\t\ttypeof ctor === 'function' &&\n\t\t\tFunction.prototype.toString.call(ctor) === objectCtorString\n\t\t);\n\t},\n\tstring(val): Boolean\n\t{\n\t\treturn typeof val === 'string';\n\t},\n};\n\nconst Conv = {\n\tnumber (value): Number\n\t{\n\t\tvalue = parseFloat(value);\n\t\treturn isNaN(value) ? 0 : value;\n\t},\n\tstring (): String\n\t{\n\n\t},\n\tformatMoney(val: Number, format): String\n\t{\n\t\tval = this.number(val).toFixed(2) || 0;\n\t\treturn (format || '#')\n\t\t\t.replace('&#', '|||||')\n\t\t\t.replace('&amp;#', '|-|||-|')\n\t\t\t.replace('#', val)\n\t\t\t.replace('|-|||-|', '&amp;#')\n\t\t\t.replace('|||||', '&#')\n\t\t;\n\t},\n\treplaceText (text, fields)\n\t{\n\t\ttext = text + '';\n\t\tfields = fields || {};\n\t\tlet holders = text.match(/{{[ -.a-zA-Z]+}}/g);\n\t\tif (!holders || holders.length === 0)\n\t\t{\n\t\t\treturn text;\n\t\t}\n\t\tlet result = holders.reduce(function (s, item){\n\t\t\tlet value = item.replace(/^{+/, '').replace(/}+$/, '').trim();\n\t\t\tvalue = fields[value] ? fields[value] : '';\n\n\t\t\tlet parts = s.split(item);\n\t\t\tfor (let i = 0; i < parts.length; i = i + 1)\n\t\t\t{\n\t\t\t\tif (i === parts.length - 1 && parts.length > 1)\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tlet left = parts[i].replace(/[ \\t]+$/, '');\n\t\t\t\tif (!value)\n\t\t\t\t{\n\t\t\t\t\tleft = left.replace(/[,]+$/, '');\n\t\t\t\t}\n\n\t\t\t\tleft += (value ? ' ' : '') + value;\n\t\t\t\tparts[i] = left;\n\n\t\t\t\tif ((i + 1 >= parts.length))\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tlet right = parts[i+1].replace(/^[ \\t]+/, '');\n\t\t\t\tif (!/^[<!?.\\n]+/.test(right))\n\t\t\t\t{\n\t\t\t\t\tlet isLeftClosed = !left || /[<!?.\\n]+$/.test(left);\n\t\t\t\t\tif(isLeftClosed)\n\t\t\t\t\t{\n\t\t\t\t\t\tright = right.replace(/^[ \\t,]+/, '');\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!/^[,]+/.test(right))\n\t\t\t\t\t{\n\t\t\t\t\t\tif (isLeftClosed)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tright = right.charAt(0).toUpperCase() + right.slice(1)\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tright = ' ' + right;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tparts[i+1] = right;\n\t\t\t}\n\n\t\t\treturn parts.join('').trim();\n\t\t}, text);\n\n\t\treturn result ? result : text ;\n\t},\n\tcloneDeep (object: Object): Object\n\t{\n\t\treturn JSON.parse(JSON.stringify(object));\n\t}\n};\n\nconst Color = {\n\tparseHex (hex)\n\t{\n\t\thex = this.fillHex(hex);\n\t\tlet parts = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})?$/i.exec(hex);\n\t\tif (!parts)\n\t\t{\n\t\t\tparts = [0,0,0,1];\n\t\t}\n\t\telse\n\t\t{\n\t\t\tparts = [\n\t\t\t\tparseInt(parts[1], 16),\n\t\t\t\tparseInt(parts[2], 16),\n\t\t\t\tparseInt(parts[3], 16),\n\t\t\t\tparseInt(100 * (parseInt(parts[4] || 'ff', 16) / 255)) / 100,\n\t\t\t];\n\t\t}\n\n\t\treturn parts;\n\t},\n\thexToRgba (hex)\n\t{\n\t\treturn 'rgba(' + this.parseHex(hex).join(', ') + ')';\n\t},\n\ttoRgba (numbers)\n\t{\n\t\treturn 'rgba(' + numbers.join(', ') + ')';\n\t},\n\tfillHex (hex: string, fillAlpha: boolean = false, alpha: string = null)\n\t{\n\t\tif (hex.length === 4 || (fillAlpha && hex.length === 5))\n\t\t{\n\t\t\thex = hex.replace(/([a-f0-9])/gi, \"$1$1\");\n\t\t}\n\n\t\tif (fillAlpha && hex.length === 7)\n\t\t{\n\t\t\thex += 'ff';\n\t\t}\n\n\t\tif (alpha)\n\t\t{\n\t\t\thex = hex.substr(0, 7) + (alpha.toLowerCase() + 'ff').substr(0, 2);\n\t\t}\n\n\t\treturn hex;\n\t},\n\tisHexDark (hex)\n\t{\n\t\thex = this.parseHex(hex);\n\t\tconst r = hex[0]; const g = hex[1]; const b = hex[2];\n\t\tconst brightness = ((r * 299) + (g * 587) + (b * 114)) / 1000;\n\t\treturn brightness < 155;\n\t},\n};\n\nconst Browser = {\n\tisMobile()\n\t{\n\t\treturn window.innerWidth <= 530;\n\t}\n};\n\nconst Render = {\n\tcomponent()\n\t{\n\n\t}\n};\n\nconst fontsLoaded = [];\n\nconst Font = {\n\tload(font)\n\t{\n\t\tif (fontsLoaded.includes(font)) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet fontUrl = null;\n\t\tswitch (font)\n\t\t{\n\t\t\tcase 'lobster':\n\t\t\t\tfontUrl = 'https://fonts.googleapis.com/css2?family=Lobster:wght@100;200;300;400;500;600;700;800;900&subset=cyrillic-ext,latin-ext';\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\tcase 'opensans':\n\t\t\t\tfontUrl = 'https://fonts.googleapis.com/css2?family=Open+Sans:wght@100;200;300;400;500;600;700;800;900&subset=cyrillic';\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif (fontUrl)\n\t\t{\n\t\t\tconst link = document.createElement('link');\n\t\t\tlink.rel = 'stylesheet';\n\t\t\tlink.href = fontUrl;\n\t\t\tdocument.getElementsByTagName('head')[0].appendChild(link);\n\t\t\tfontsLoaded.push(font);\n\t\t}\n\t}\n}\n\nexport {\n\tType,\n\tConv,\n\tColor,\n\tRender,\n\tScroll,\n\tBrowser,\n\tMoveObserver,\n\tFont,\n}","import {Type} from 'main.core';\nimport {Color} from \"../../../site/form/src/util/registry\";\nimport \"ui.feedback.form\";\n\nexport function isHexDark(hex): boolean\n{\n\treturn Color.isHexDark(hex);\n}\n\nexport function hexToRgba(hex): boolean\n{\n\treturn Color.hexToRgba(hex);\n}\n\nexport function getHexFromOpacity(opacity: number): string\n{\n\tif (Type.isString(opacity) && opacity.includes('%'))\n\t{\n\t\topacity = Number.parseInt(opacity) / 100;\n\t}\n\n\tconst hex = Math.round(opacity * 255).toString(16);\n\treturn hex.length === 1 ? '0'+hex : hex;\n}\n\nexport function getOpacityFromHex(hexA: string): number\n{\n\treturn Math.round((Number.parseInt(hexA, 16) / 255) * 100) / 100;\n}\n\nexport function openFeedbackForm()\n{\n\tBX.UI.Feedback.Form.open(\n\t\t{\n\t\t\tid: 'crm.webform.embed.feedback',\n\t\t\tforms: [\n\t\t\t\t{zones: ['en', 'eu', 'in', 'uk'], id: 372, lang: 'en', sec: 'qxzl3o'},\n\t\t\t\t{zones: ['by'], id: 362, lang: 'by', sec: 'gha9ge'},\n\t\t\t\t{zones: ['kz'], id: 362, lang: 'kz', sec: 'gha9ge'},\n\t\t\t\t{zones: ['ru'], id: 362, lang: 'ru', sec: 'gha9ge'},\n\t\t\t\t{zones: ['com.br'], id: 364, lang: 'br', sec: 'g649rj'},\n\t\t\t\t{zones: ['la', 'co', 'mx'], id: 366, lang: 'es', sec: 's80g9o'},\n\t\t\t\t{zones: ['de'], id: 368, lang: 'de', sec: 'bcmkrl'},\n\t\t\t\t{zones: ['ua'], id: 370, lang: 'ua', sec: 'ue05ne'},\n\t\t\t\t// {zones: ['pl'], id: 994, lang: 'pl', sec: 'qtxmku'},\n\t\t\t],\n\t\t}\n\t);\n}","import {Text, Tag, Dom, Type, Event} from 'main.core';\nimport {ColorField} from \"landing.ui.field.color\";\nimport {getSvg} from \"./svg\";\nimport 'ui.switcher';\nimport {getHexFromOpacity, getOpacityFromHex, hexToRgba} from \"../util\";\nimport 'main.loader';\n\ntype ControlOptions = {\n\tcallback: Function;\n\tnode: Element;\n\toptions: Object | DropdownOptions,\n\tkey: String,\n\tkeyName: String,\n\tvalue: String,\n\tformId: number,\n};\n\ntype DropdownOptions = {\n\t[key: string]: string,\n}\n\nconst loader = new BX.Loader({mode: 'inline'});\n\nexport class Controls\n{\n\tstatic renderDropdown(options: ControlOptions)\n\t{\n\t\tconst handler = (event) => {\n\t\t\tDom.attr(event.currentTarget, 'disabled', true);\n\t\t\tloader.setOptions({size: 40});\n\t\t\tloader.show(options.node.querySelector('.ui-ctl-after.ui-ctl-icon-angle'));\n\t\t\toptions.callback(event.currentTarget.value);\n\t\t}\n\n\t\tDom.append(this.renderLabel(options.keyName), options.node);\n\n\t\tconst select = Tag.render`<select class=\"ui-ctl-element embed-control-node\" onchange=\"${Text.encode(handler)}\"></select>`;\n\n\t\tObject.entries(options.options).forEach(([option, name]) => {\n\t\t\tDom.append(\n\t\t\t\tTag.render`\n\t\t\t\t\t<option\n\t\t\t\t\t\tvalue=\"${Text.encode(option)}\"\n\t\t\t\t\t\t${(!Type.isUndefined(options.value) && (options.value.toString() === option.toString())) ? 'selected' : ''}\n\t\t\t\t\t>\n\t\t\t\t\t\t${Text.encode(name)}\n\t\t\t\t\t</option>\n\t\t\t\t`,\n\t\t\t\tselect\n\t\t\t);\n\t\t});\n\n\t\tDom.append(Tag.render`\n\t\t\t<div class=\"ui-ctl ui-ctl-after-icon ui-ctl-dropdown\">\n\t\t\t\t<div class=\"ui-ctl-after ui-ctl-icon-angle\"></div>\n\t\t\t\t${select}\n\t\t\t</div>\n\t\t`, options.node);\n\t}\n\n\tstatic renderText(options: ControlOptions, advanced: boolean)\n\t{\n\t\tconst handler = (event) => {\n\t\t\tDom.attr(event.currentTarget, 'disabled', true);\n\t\t\tloader.setOptions({size: 40});\n\t\t\tloader.show(options.node.querySelector('.ui-ctl-after'));\n\t\t\toptions.callback(event.currentTarget.value);\n\t\t}\n\n\t\tconst handlerShowSaveBtn = (event) => {\n\t\t\tDom.show(options.node.querySelector('.ui-ctl-after'));\n\t\t}\n\n\t\tconst afterIcon = advanced ? '' : '<button class=\"ui-ctl-after\" hidden><svg width=\"20\" height=\"15\" viewBox=\"0 0 20 15\" xmlns=\"http://www.w3.org/2000/svg\"><path fill=\"#535C69\" d=\"M7.34223 14.351L0.865356 8.03879L3.13226 5.82951L7.34223 9.93246L16.8678 0.648987L19.1348 2.85827L7.34223 14.351Z\"/></svg></button>';\n\n\t\tDom.append(this.renderLabel(options.keyName), options.node);\n\n\t\tconst input = Tag.render`\n\t\t\t<input\n\t\t\t\ttype=\"text\"\n\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\tvalue=\"${!Type.isUndefined(options.value) ? Text.encode(options.value) : ''}\"\n\t\t\t\tdata-onfocus=\"${Text.encode(handlerShowSaveBtn)}\"\n\t\t\t\tdata-onblur=\"${Text.encode(handler)}\"\n\t\t\t>\n\t\t`;\n\n\t\tEvent.bindOnce(input, 'blur', handler);\n\t\tif (!advanced)\n\t\t{\n\t\t\tEvent.bindOnce(input, 'focus', handlerShowSaveBtn);\n\t\t}\n\n\t\tDom.append(Tag.render`\n\t\t\t<div class=\"ui-ctl ui-ctl-textbox ui-ctl-after-icon\">\n\t\t\t\t${afterIcon}\n\t\t\t\t${input}\n\t\t\t</div>\n\t\t`, options.node);\n\t}\n\n\tstatic renderTypeface(forValue, extended: boolean, options: ControlOptions)\n\t{\n\t\tconst handler = (event) => {\n\t\t\tif (event.currentTarget.getAttribute('disabled') === 'true') { return; }\n\n\t\t\tconst nodeList = event.currentTarget.closest('.crm-form-embed__settings').querySelectorAll('.crm-form-embed__settings--hide-button');\n\t\t\tnodeList.forEach((node) => {\n\t\t\t\t// node.disabled = true;\n\t\t\t\tDom.attr(node, 'disabled', true);\n\t\t\t});\n\n\t\t\tif (!extended)\n\t\t\t{\n\t\t\t\tanimateSwitching(\n\t\t\t\t\tevent.currentTarget.closest('.crm-form-embed__settings--option.--typeface'),\n\t\t\t\t\t0,\n\t\t\t\t\t0,\n\t\t\t\t\ttrue\n\t\t\t\t);\n\t\t\t}\n\n\t\t\toptions.callback(forValue);\n\t\t}\n\n\t\tconst className = extended ? 'crm-form-embed__settings-main--option --option-big' : 'crm-form-embed__settings--option --typeface';\n\n\t\tDom.append(Tag.render`\n\t\t\t<div class=\"crm-form-embed__settings--hide-button ${className} ${forValue === options.value ? '--active' : ''}\" onclick=\"${Text.encode(handler)}\">\n\t\t\t\t<span class=\"crm-form-embed__settings--option-font --${Text.encode(forValue)}\">${Text.encode(options.keyName)}</span>\n\t\t\t</div>\n\t\t`, options.node);\n\t}\n\n\tstatic renderSquareButton(forValue, options: ControlOptions)\n\t{\n\t\tconst handler = (event) => {\n\t\t\tif (event.currentTarget.getAttribute('disabled') === 'true') { return; }\n\n\t\t\tconst nodeList = event.currentTarget.closest('.crm-form-embed__settings').querySelectorAll('.crm-form-embed__settings--option-layout');\n\t\t\tnodeList.forEach((node) => {\n\t\t\t\t// node.disabled = true;\n\t\t\t\tDom.attr(node, 'disabled', true);\n\t\t\t});\n\n\t\t\tanimateSwitching(\n\t\t\t\tevent.currentTarget.closest('.crm-form-embed__settings--option-layout').querySelector('.crm-form-embed__settings-main--option-svg'),\n\t\t\t\t100,\n\t\t\t\t66,\n\t\t\t\tfalse\n\t\t\t);\n\n\t\t\toptions.callback(forValue);\n\t\t}\n\n\t\tDom.append(Tag.render`\n\t\t\t<div class=\"crm-form-embed__settings--option-layout ${forValue === options.value ? '--active' : ''}\" onclick=\"${Text.encode(handler)}\">\n\t\t\t\t<div class=\"crm-form-embed__settings-main--option-svg\">\n\t\t\t\t\t${getSvg(options.key, forValue)}\n\t\t\t\t</div>\n\t\t\t\t<span class=\"crm-form-embed__settings--option-layout-text\">${Text.encode(options.keyName)}</span>\n\t\t\t</div>\n\t\t`, options.node);\n\t}\n\n\tstatic renderButton(forValue, type: string, advanced: boolean, options: ControlOptions)\n\t{\n\t\tconst handler = (event) => {\n\t\t\tif (event.currentTarget.getAttribute('disabled') === 'true') { return; }\n\n\t\t\tconst nodeList = event.currentTarget.closest('.crm-form-embed__settings').querySelectorAll('.crm-form-embed__settings--hide-button');\n\t\t\tnodeList.forEach((node) => {\n\t\t\t\t// node.disabled = true;\n\t\t\t\tDom.attr(node, 'disabled', true);\n\t\t\t});\n\n\t\t\tif (!advanced)\n\t\t\t{\n\t\t\t\tanimateSwitching(\n\t\t\t\t\tevent.currentTarget.closest('.crm-form-embed__settings--option'),\n\t\t\t\t\t0,\n\t\t\t\t\t0,\n\t\t\t\t\ttrue\n\t\t\t\t);\n\t\t\t}\n\n\t\t\toptions.callback(forValue);\n\t\t}\n\n\t\tconst className = advanced ? 'crm-form-embed__settings-main--option --option-big' : 'crm-form-embed__settings--option';\n\n\t\tDom.append(Tag.render`\n\t\t\t<div\n\t\t\t\tclass=\"crm-form-embed__settings--hide-button ${className} ${forValue === options.value ? '--active' : ''}\"\n\t\t\t\tonclick=\"${Text.encode(handler)}\"\n\t\t\t\tdata-embed-key=\"${Text.encode(options.key)}\"\n\t\t\t\tdata-embed-value=\"${Text.encode(forValue)}\"\n\t\t\t\ttitle=\"${Text.encode(BX.Loc.getMessage('EMBED_SLIDER_OPTION_BUTTONSTYLE_LABEL'))}\"\n\t\t\t>\n\t\t\t\t<button class=\"ui-btn ui-btn-md ${Text.encode(type)}\">${Text.encode(BX.Loc.getMessage('EMBED_SLIDER_OPTION_BUTTONSTYLE_LABEL'))}</button>\n\t\t\t</div>\n\t\t`, options.node);\n\t}\n\n\tstatic renderLink(forValue, type: string, advanced: boolean, options: ControlOptions)\n\t{\n\t\tconst handler = (event) => {\n\t\t\tif (event.currentTarget.getAttribute('disabled') === 'true') { return; }\n\n\t\t\tconst nodeList = event.currentTarget.closest('.crm-form-embed__settings').querySelectorAll('.crm-form-embed__settings--hide-link');\n\t\t\tnodeList.forEach((node) => {\n\t\t\t\t// node.disabled = true;\n\t\t\t\tDom.attr(node, 'disabled', true);\n\t\t\t});\n\n\t\t\tif (!advanced)\n\t\t\t{\n\t\t\t\tanimateSwitching(\n\t\t\t\t\tevent.currentTarget.closest('.crm-form-embed__settings--option'),\n\t\t\t\t\t0,\n\t\t\t\t\t0,\n\t\t\t\t\ttrue\n\t\t\t\t);\n\t\t\t}\n\n\t\t\toptions.callback(forValue);\n\t\t}\n\n\t\tconst className = advanced ? 'crm-form-embed__settings-main--option --option-big' : 'crm-form-embed__settings--option';\n\n\t\tDom.append(Tag.render`\n\t\t\t<div\n\t\t\t\tclass=\"crm-form-embed__settings--hide-link ${className} ${forValue === options.value ? '--active' : ''}\"\n\t\t\t\tonclick=\"${Text.encode(handler)}\"\n\t\t\t\tdata-embed-key=\"${Text.encode(options.key)}\"\n\t\t\t\tdata-embed-value=\"${Text.encode(forValue)}\"\n\t\t\t>\n\t\t\t\t<a href =\"#\" class=\"crm-form-embed__option-link ${Text.encode(type)}\">${Text.encode(BX.Loc.getMessage('EMBED_SLIDER_OPTION_LINKSTYLE_LABEL'))}</a>\n\t\t\t</div>\n\t\t`, options.node);\n\t}\n\n\tstatic renderSwitcher(options: ControlOptions)\n\t{\n\t\t/**\n\t\t * @this Switcher\n\t\t */\n\t\tconst handler = function(event) {\n\t\t\tthis.setLoading(true);\n\t\t\toptions.callback(this.isChecked() ? '1' : '0').then(() => {\n\t\t\t\tthis.setLoading(false);\n\t\t\t});\n\t\t}\n\n\t\tconst switcherNode = document.createElement('span');\n\t\tconst switcherId = options.formId + '-' + options.key;\n\t\tswitcherNode.className = 'ui-switcher';\n\t\tswitcherNode.dataset.switcherId = switcherId;\n\t\tconst switcher = new top.BX.UI.Switcher({\n\t\t\tid: switcherId,\n\t\t\tnode: switcherNode,\n\t\t\tchecked: options.value === '1',\n\t\t\thandlers: {\n\t\t\t\ttoggled: handler,\n\t\t\t}\n\t\t});\n\n\t\tDom.append(switcher.getNode(), options.node);\n\t}\n\n\tstatic renderColorPicker(subtype: string, options: ControlOptions): ColorField\n\t{\n\t\t/**\n\t\t * @this ColorField\n\t\t */\n\t\tconst handler = function(event) {\n\t\t\tif (this instanceof ColorField) // double events with different context\n\t\t\t{\n\t\t\t\t/** @var IColorValue|ColorValue value */\n\t\t\t\tconst value = this.getValue();\n\t\t\t\tconst hexA = value.getHex() + getHexFromOpacity(value.getOpacity());\n\t\t\t\toptions.callback(hexA);\n\t\t\t}\n\t\t}\n\n\t\tconst colorPicker = createColorPicker(subtype, handler, handler);\n\t\tcolorPicker.setValue({'--color': hexToRgba(options.value)});\n\t\t// colorPicker.processor.setValue(options.value.substring(0,6));\n\t\t// colorPicker.processor.setOpacity(getOpacityFromHex(options.value.substring(6)));\n\t\tDom.append(colorPicker.getLayout(), options.node);\n\t}\n\n\tstatic renderOptionTitle(text: string): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"crm-form-embed__settings--option-title\">${text ? Text.encode(text) : ''}</div>\n\t\t`;\n\t}\n\n\tstatic renderLabel(text: string, buttonSetting: boolean = false): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"crm-form-embed__label-text ${buttonSetting ? '--button-setting' : ''}\">${text ? Text.encode(text) : ''}</div>\n\t\t`;\n\t}\n}\n\nfunction createColorPicker(subtype: string, onChange: function, onReset: function): ColorField\n{\n\treturn new ColorField({\n\t\tsubtype: subtype,\n\t\tonChange: onChange,\n\t\tonReset: onReset,\n\t});\n}\n\nfunction animateSwitching(loaderTarget: HTMLElement, targetWidth: number, targetHeight: number, resetPadding: false)\n{\n\tloaderTarget.innerHTML = '';\n\tif (targetWidth)\n\t{\n\t\tDom.style(loaderTarget, 'width', targetWidth+'px');\n\t}\n\tif (targetHeight)\n\t{\n\t\tDom.style(loaderTarget, 'height', targetHeight+'px');\n\t}\n\tif (resetPadding)\n\t{\n\t\tDom.style(loaderTarget, 'padding', '0');\n\t}\n\tloader.setOptions({size: 40});\n\tloader.show(loaderTarget);\n}","import {Dom, Event} from 'main.core';\n\nexport function handlerToggleClickMode(container: Element, checked: boolean)\n{\n\tconst section = container.closest('.ui-slider-section');\n\tconst headerBlock = section.querySelector('[data-roll=\"heading-block\"]');\n\tconst moreSettingsBtn = section.querySelector('[data-roll=\"data-more-settings\"]');\n\tconst blockCode = section.querySelector('[data-roll=\"crm-form-embed__settings\"]');\n\n\tif (checked)\n\t{\n\t\tif (moreSettingsBtn)\n\t\t{\n\t\t\tDom.addClass(moreSettingsBtn, \"--visible\");\n\t\t}\n\t\tDom.removeClass(headerBlock, \"--collapse\");\n\t\tDom.style(blockCode, 'height', blockCode.scrollHeight + \"px\");\n\t}\n\telse\n\t{\n\t\tif (moreSettingsBtn)\n\t\t{\n\t\t\tDom.removeClass(moreSettingsBtn, \"--visible\");\n\t\t}\n\t\tDom.addClass(headerBlock, \"--collapse\");\n\t\tDom.style(blockCode, 'height', blockCode.scrollHeight + \"px\");\n\t\t// blockCode.clientHeight;\n\t\tDom.style(blockCode, 'height', \"0\");\n\t}\n\n\tEvent.unbind(blockCode, \"transitionend\", transitionHandlerForSettingsSection);\n\tEvent.bind(blockCode, \"transitionend\", transitionHandlerForSettingsSection);\n}\n\nfunction transitionHandlerForSettingsSection(event)\n{\n\tconst section = event.currentTarget.closest('.ui-slider-section');\n\tconst blockCode = section.querySelector('[data-roll=\"crm-form-embed__settings\"]');\n\tif (Dom.style(blockCode, 'height') !== \"0px\") {\n\t\tDom.style(blockCode, 'height', 'auto');\n\t}\n}","import {Type, Text, Tag, Dom, Event} from 'main.core';\nimport type {EmbedDataOptions, EmbedDataValues, EmbedDict} from \"../types\";\nimport {Controls} from \"./controls\";\nimport \"popup\";\nimport {isHexDark} from \"../util\";\nimport {handlerToggleClickMode} from \"./handler\";\nimport { EventEmitter, BaseEvent } from 'main.core.events'\n\ntype RenderOptions = {\n\toptions: Array,\n\tdict: EmbedDict,\n\tcallback: function,\n\tformId: number,\n\tdata: Object,\n\tvalues: Object,\n};\n\nexport class Wizard extends EventEmitter\n{\n\t#type: string;\n\t#options: Object;\n\t#values: Object;\n\t#dict: EmbedDict;\n\t#formId: number;\n\n\tconstructor(type: string, formId: number, values: EmbedDataValues, options: EmbedDataOptions, dict: EmbedDict)\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace(\"BX:Crm:Form:Embed\")\n\t\tthis.#type = type;\n\t\tthis.#options = options;\n\t\tthis.#values = values;\n\t\tthis.#dict = dict;\n\t\tthis.#formId = formId;\n\t}\n\n\tgetValues(): Object\n\t{\n\t\treturn this.#values;\n\t}\n\n\t#updateValues(data: Array, instantSave: boolean): Promise\n\t{\n\t\tconst promises = [];\n\t\tdata.forEach((field) => {\n\t\t\tpromises.push(this.#updateValue(field.name, field.value));\n\t\t});\n\n\t\treturn Promise.all(promises).then(() => {\n\t\t\tif (instantSave) {\n\t\t\t\tconst event = new BaseEvent({data: {type: this.#type}});\n\t\t\t\treturn this.emitAsync('BX:Crm:Form:Embed:needToSave', event);\n\t\t\t}\n\t\t\treturn Promise.resolve;\n\t\t});\n\t}\n\n\t#updateValue(name: string, value): Promise\n\t{\n\t\tconst aNames = name.split('.');\n\t\tconst updatedValues = this.#values;\n\t\tconst buildOption = function(values, names) {\n\t\t\tconst nextName = names.shift();\n\t\t\tif (names.length > 0)\n\t\t\t{\n\t\t\t\tvalues[nextName] = Type.isUndefined(values[nextName]) ? {} : values[nextName];\n\t\t\t\tbuildOption(values[nextName], names);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tvalues[nextName] = value;\n\t\t\t}\n\t\t};\n\t\tbuildOption(updatedValues, aNames);\n\n\t\tthis.#values = updatedValues;\n\n\t\tconst event = new BaseEvent({data: {type: this.#type, name: name, value: value}});\n\n\t\tthis.emit('BX:Crm:Form:Embed:valueChanged', event);\n\n\t\treturn Promise.resolve();\n\t}\n\n\trenderControlContainer(elem: Element | Array = null): HTMLElement\n\t{\n\t\tif (Type.isDomNode(elem))\n\t\t{\n\t\t\telem = [elem];\n\t\t}\n\t\tconst container = Tag.render`\n\t\t\t<div class=\"crm-form-embed__settings\"></div>\n\t\t`;\n\t\tif (Type.isArray(elem))\n\t\t{\n\t\t\telem.forEach((item) => Dom.append(item, container))\n\t\t}\n\t\treturn container;\n\t}\n\n\trenderRow(elem: Element | Array = null, last: boolean = false): HTMLElement\n\t{\n\t\tif (Type.isDomNode(elem))\n\t\t{\n\t\t\telem = [elem];\n\t\t}\n\t\tconst row = Tag.render`\n\t\t\t<div class=\"crm-form-embed__settings-row ${last ? '--last' : ''}\"></div>\n\t\t`;\n\t\tif (Type.isArray(elem))\n\t\t{\n\t\t\telem.forEach((item) => Dom.append(item, row))\n\t\t}\n\t\treturn row;\n\t}\n\n\trenderBlock(elem: Element | Array = null): HTMLElement\n\t{\n\t\tif (Type.isDomNode(elem))\n\t\t{\n\t\t\telem = [elem];\n\t\t}\n\t\tconst block = Tag.render`\n\t\t\t<div class=\"crm-form-embed__settings--block\"></div>\n\t\t`;\n\t\tif (Type.isArray(elem))\n\t\t{\n\t\t\telem.forEach((item) => Dom.append(item, block))\n\t\t}\n\t\treturn block;\n\t}\n\n\trenderCol(elem: Element | Array = null, first: boolean = false): HTMLElement\n\t{\n\t\tif (Type.isDomNode(elem))\n\t\t{\n\t\t\telem = [elem];\n\t\t}\n\t\tconst col = Tag.render`\n\t\t\t<div class=\"crm-form-embed__settings--block-col ${first ? '--first' : ''}\"></div>\n\t\t`;\n\t\tif (Type.isArray(elem))\n\t\t{\n\t\t\telem.forEach((item) => Dom.append(item, col))\n\t\t}\n\t\treturn col;\n\t}\n\n\trenderTitle(text: string, line: boolean = false): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"crm-form-embed__subtitle ${line ? '--line' : ''}\">${text ? text : ''}</div>\n\t\t`;\n\t}\n\n\trenderLabel(text: string, buttonSetting: boolean = false): HTMLElement\n\t{\n\t\treturn Renderer.renderLabel(text, buttonSetting);\n\t}\n\n\trenderOptionTo(container: HTMLElement, name: string, instantSave: boolean = true)\n\t{\n\t\tconst funcName = this.#getFuncName(name),\n\t\t\tfieldOptions = this.#getOptions(name),\n\t\t\tfieldValue = this.#getValue(name);\n\n\t\tif (Type.isFunction(Renderer[\"renderField\" + funcName]))\n\t\t{\n\t\t\tRenderer[\"renderField\" + funcName](\n\t\t\t\tcontainer,\n\t\t\t\tfieldValue,\n\t\t\t\t{\n\t\t\t\t\toptions: fieldOptions,\n\t\t\t\t\tdict: this.#dict,\n\t\t\t\t\tcallback: (data) => this.#updateValues(data, instantSave),\n\t\t\t\t\tformId: this.#formId,\n\t\t\t\t\tdata: this.#options,\n\t\t\t\t\tvalues: this.#values,\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tconsole.error('embed: ' + name + ' is not valid type');\n\t\t}\n\t}\n\n\trenderOption(name: string, instantSave: boolean = true): HTMLElement\n\t{\n\t\tconst container = this.renderControlContainer();\n\t\tthis.renderOptionTo(container, name, instantSave);\n\t\treturn container;\n\t}\n\n\trenderColorInline(container: HTMLElement, name: string, instantSave: boolean = true)\n\t{\n\t\tthis.renderOptionTo(container, name, instantSave);\n\t}\n\n\trenderColorPopup(container: HTMLElement, name: string, instantSave: boolean = true)\n\t{\n\t\tconst value = this.#getValue(name, '#FFFFFF');\n\t\tconst picker = this.renderOption(name, instantSave);\n\t\tconst popup = new BX.PopupWindow({\n\t\t\tcontent: picker,\n\t\t\tbindElement: container,\n\t\t\tautoHide: true,\n\t\t\tcloseByEsc: true,\n\t\t});\n\n\t\t// hack: hide color picker elements, embed.css\n\t\tDom.addClass(picker, 'crm-form-embed__color_popup');\n\n\t\tconst getStyle = function(valueHex: string): string {\n\t\t\tconst fgColor = isHexDark(valueHex) ? 'white' : 'black';\n\t\t\treturn `background-color: ${Text.encode(valueHex)}; color: ${fgColor}`;\n\t\t}\n\n\t\tconst getThemeClass = function(valueHex: string): string {\n\t\t\treturn isHexDark(valueHex) ? 'bitrix24-light-theme' : 'bitrix24-dark-theme';\n\t\t}\n\n\t\tconst button = Tag.render`\n\t\t\t<button class=\"ui-btn ui-btn-xs ui-btn-link ui-btn-hover ui-btn-icon-edit ui-btn-themes\"></button>\n\t\t`;\n\t\tEvent.bind(button, \"click\", (event) => popup.show());\n\n\t\tconst text = Tag.render`\n\t\t\t<span class=\"crm-form-embed__settings--color-text\">${Text.encode(value)}</span>\n\t\t`;\n\n\t\tDom.append(Controls.renderLabel(Renderer.getOptionKeyName(name), true), container);\n\t\tconst colorBox = Tag.render`\n\t\t\t<div class=\"crm-form-embed__settings--color ${getThemeClass(value)}\" style=\"${getStyle(value)}\">\n\t\t\t\t${text}\n\t\t\t\t${button}\n\t\t\t</div>\n\t\t`;\n\t\tDom.append(colorBox, container);\n\n\t\tthis.subscribe('BX:Crm:Form:Embed:valueChanged', (event) => {\n\t\t\tif (event.data.name === name)\n\t\t\t{\n\t\t\t\ttext.innerText = Text.encode(event.data.value);\n\t\t\t\tcolorBox.style = getStyle(event.data.value);\n\t\t\t\tDom.removeClass(\n\t\t\t\t\tcolorBox,\n\t\t\t\t\tgetThemeClass(event.data.value) === 'bitrix24-dark-theme'\n\t\t\t\t\t\t? 'bitrix24-light-theme'\n\t\t\t\t\t\t: 'bitrix24-dark-theme'\n\t\t\t\t);\n\t\t\t\tDom.addClass(colorBox, getThemeClass(event.data.value));\n\t\t\t}\n\t\t});\n\t}\n\n\t#getValue(name: string, defaultValue = ''): string | number\n\t{\n\t\tconst aName = name.split('.');\n\t\tlet fieldValue = this.#values;\n\t\taName.forEach((part) => {\n\t\t\tfieldValue = !Type.isUndefined(fieldValue[part]) ? fieldValue[part] : defaultValue;\n\t\t});\n\t\treturn fieldValue;\n\t}\n\n\t#getOptions(name: string): Array\n\t{\n\t\tconst aName = name.split('.');\n\n\t\tlet fieldOptions = this.#options;\n\t\taName.forEach((part) => {\n\t\t\tfieldOptions = !Type.isUndefined(fieldOptions[part]) ? fieldOptions[part] : [];\n\t\t});\n\t\treturn fieldOptions;\n\t}\n\n\t#getFuncName(name: string): string\n\t{\n\t\tconst aName = name.split('.');\n\t\tlet funcName = '';\n\t\taName.forEach((part) => {\n\t\t\tfuncName = funcName.concat(part.charAt(0).toUpperCase() + part.slice(1));\n\t\t});\n\t\treturn funcName;\n\t}\n}\n\nconst Renderer = {\n\trenderFieldDelay: function(container: HTMLElement, value: string, options: RenderOptions)\n\t{\n\t\tcontainer.innerHTML = '';\n\n\t\tconst handler = (val) => {\n\t\t\toptions.callback([{name: 'delay', value: val}]).then(() => {\n\t\t\t\tRenderer.renderFieldDelay(container, val, options);\n\t\t\t});\n\t\t};\n\n\t\tconst block = Tag.render`<div class=\"crm-form-embed__settings--block-input\"></div>`;\n\n\t\tControls.renderDropdown({\n\t\t\tcallback: handler,\n\t\t\tnode: block,\n\t\t\toptions: this.getOptions(options.options, 'delay', options.dict),\n\t\t\tvalue: value,\n\t\t\tkey: 'delay',\n\t\t\tkeyName: Renderer.getOptionKeyName('delay'),\n\t\t\tformId: options.formId,\n\t\t});\n\n\t\tDom.append(block, container);\n\t},\n\n\trenderFieldType: function(container: HTMLElement, value: string, options: RenderOptions)\n\t{\n\t\tcontainer.innerHTML = '';\n\n\t\tconst handler = (val) => {\n\t\t\toptions.callback([{name: 'type', value: val}]).then(() => {\n\t\t\t\tRenderer.renderFieldType(container, val, options);\n\t\t\t});\n\t\t};\n\n\t\tconst block = Tag.render`<div class=\"crm-form-embed__settings--block-input\"></div>`;\n\n\t\tControls.renderDropdown({\n\t\t\tcallback: handler,\n\t\t\tnode: block,\n\t\t\toptions: this.getOptions(options.options, 'type', options.dict),\n\t\t\tvalue: value,\n\t\t\tkey: 'type',\n\t\t\tkeyName: Renderer.getOptionKeyName('type'),\n\t\t\tformId: options.formId,\n\t\t});\n\n\t\tDom.append(block, container);\n\t},\n\n\trenderFieldPosition: function(container: HTMLElement, value: string, options: RenderOptions)\n\t{\n\t\tcontainer.innerHTML = '';\n\n\t\tconst controlOptions = this.getOptions(options.options, 'position', options.dict);\n\n\t\tconst handler = (val) => {\n\t\t\toptions.callback([{name: 'position', value: val}]).then(() => {\n\t\t\t\tRenderer.renderFieldPosition(container, val, options);\n\t\t\t});\n\t\t};\n\n\t\tconst handlerLeft = () => handler('left');\n\t\tconst handlerCenter = () => handler('center');\n\t\tconst handlerRight = () => handler('right');\n\n\t\tDom.append(Controls.renderOptionTitle(Renderer.getOptionKeyName('position')), container);\n\n\t\tconst row = Tag.render`<div class=\"crm-form-embed__settings\"></div>`;\n\n\t\tControls.renderSquareButton('left', {\n\t\t\tcallback: handlerLeft,\n\t\t\tnode: row,\n\t\t\toptions: controlOptions,\n\t\t\tvalue: value,\n\t\t\tkey: 'position',\n\t\t\tkeyName: Renderer.getOptionValueName('position', 'left', options.dict),\n\t\t\tformId: options.formId,\n\t\t});\n\n\t\tControls.renderSquareButton('center', {\n\t\t\tcallback: handlerCenter,\n\t\t\tnode: row,\n\t\t\toptions: controlOptions,\n\t\t\tvalue: value,\n\t\t\tkey: 'position',\n\t\t\tkeyName: Renderer.getOptionValueName('position', 'center', options.dict),\n\t\t\tformId: options.formId,\n\t\t});\n\n\t\tControls.renderSquareButton('right', {\n\t\t\tcallback: handlerRight,\n\t\t\tnode: row,\n\t\t\toptions: controlOptions,\n\t\t\tvalue: value,\n\t\t\tkey: 'position',\n\t\t\tkeyName: Renderer.getOptionValueName('position', 'right', options.dict),\n\t\t\tformId: options.formId,\n\t\t});\n\n\t\tDom.append(row, container);\n\t},\n\n\trenderFieldVertical: function(container: HTMLElement, value: string, options: RenderOptions)\n\t{\n\t\tcontainer.innerHTML = '';\n\n\t\tconst controlOptions = this.getOptions(options.options, 'vertical', options.dict);\n\n\t\tconst handler = (val) => {\n\t\t\toptions.callback([{name: 'vertical', value: val}]).then(() => {\n\t\t\t\tRenderer.renderFieldVertical(container, val, options);\n\t\t\t});\n\t\t};\n\n\t\tconst handlerBottom = () => handler('bottom');\n\t\tconst handlerTop = () => handler('top');\n\n\t\tDom.append(Controls.renderOptionTitle(Renderer.getOptionKeyName('vertical')), container);\n\n\t\tconst row = Tag.render`<div class=\"crm-form-embed__settings\"></div>`;\n\n\t\tControls.renderSquareButton('bottom', {\n\t\t\tcallback: handlerBottom,\n\t\t\tnode: row,\n\t\t\toptions: controlOptions,\n\t\t\tvalue: value,\n\t\t\tkey: 'vertical',\n\t\t\tkeyName: Renderer.getOptionValueName('vertical', 'bottom', options.dict),\n\t\t\tformId: options.formId,\n\t\t});\n\n\t\tControls.renderSquareButton('top', {\n\t\t\tcallback: handlerTop,\n\t\t\tnode: row,\n\t\t\toptions: controlOptions,\n\t\t\tvalue: value,\n\t\t\tkey: 'vertical',\n\t\t\tkeyName: Renderer.getOptionValueName('vertical', 'top', options.dict),\n\t\t\tformId: options.formId,\n\t\t});\n\n\t\tDom.append(row, container);\n\t},\n\n\trenderFieldButtonStyle: function(container: HTMLElement, value: string, options: RenderOptions)\n\t{\n\t\tif (Type.isStringFilled(options?.values?.button?.rounded) && Type.isStringFilled(options?.values?.button?.outlined))\n\t\t{\n\t\t\tvalue = options.values.button.rounded + ':' + options.values.button.outlined;\n\t\t}\n\n\t\tcontainer.innerHTML = '';\n\n\t\tconst controlOptions = this.getOptions(options.options, 'buttonStyle', options.dict);\n\n\t\tconst handler = (val) => {\n\t\t\tconst values = val.split(':');\n\t\t\toptions.callback([\n\t\t\t\t{name: 'button.rounded', value: values[0]},\n\t\t\t\t{name: 'button.outlined', value: values[1]},\n\t\t\t]).then(() => {\n\t\t\t\tRenderer.renderFieldButtonStyle(container, val, options);\n\t\t\t});\n\t\t};\n\n\t\tconst handlerPm = () => handler('0:0');\n\t\tconst handlerPmr = () => handler('1:0');\n\t\tconst handlerLb = () => handler('0:1');\n\t\tconst handlerLbr = () => handler('1:1');\n\n\t\tconst advanced = container.dataset.controlMode === 'advanced';\n\n\t\tControls.renderButton('0:0', 'ui-btn-primary', advanced, {\n\t\t\tcallback: handlerPm,\n\t\t\tnode: container,\n\t\t\toptions: controlOptions,\n\t\t\tvalue: value,\n\t\t\tkey: 'buttonStyle',\n\t\t\tkeyName: Renderer.getOptionValueName('buttonStyle', '0:0', options.dict),\n\t\t\tformId: options.formId,\n\t\t});\n\n\t\tControls.renderButton('1:0', 'ui-btn-primary ui-btn-round', advanced, {\n\t\t\tcallback: handlerPmr,\n\t\t\tnode: container,\n\t\t\toptions: controlOptions,\n\t\t\tvalue: value,\n\t\t\tkey: 'buttonStyle',\n\t\t\tkeyName: Renderer.getOptionValueName('buttonStyle', '1:0', options.dict),\n\t\t\tformId: options.formId,\n\t\t});\n\n\t\tControls.renderButton('0:1', 'ui-btn-light-border', advanced, {\n\t\t\tcallback: handlerLb,\n\t\t\tnode: container,\n\t\t\toptions: controlOptions,\n\t\t\tvalue: value,\n\t\t\tkey: 'buttonStyle',\n\t\t\tkeyName: Renderer.getOptionValueName('buttonStyle', '0:1', options.dict),\n\t\t\tformId: options.formId,\n\t\t});\n\n\t\tControls.renderButton('1:1', 'ui-btn-light-border ui-btn-round', advanced, {\n\t\t\tcallback: handlerLbr,\n\t\t\tnode: container,\n\t\t\toptions: controlOptions,\n\t\t\tvalue: value,\n\t\t\tkey: 'buttonStyle',\n\t\t\tkeyName: Renderer.getOptionValueName('buttonStyle', '1:1', options.dict),\n\t\t\tformId: options.formId,\n\t\t});\n\t},\n\n\trenderFieldButtonDecoration: function(container: HTMLElement, value: string, options: RenderOptions)\n\t{\n\t\tcontainer.innerHTML = '';\n\n\t\tconst controlOptions = this.getOptions(options.options, 'button.decoration', options.dict);\n\n\t\tconst handler = (val) => {\n\t\t\toptions.callback([{name: 'button.decoration', value: val}]).then(() => {\n\t\t\t\tRenderer.renderFieldButtonDecoration(container, val, options);\n\t\t\t});\n\t\t};\n\n\t\tconst handlerNoBorder = () => handler('');\n\t\tconst handlerDotted = () => handler('dotted');\n\t\tconst handlerLine = () => handler('solid');\n\n\t\tconst advanced = container.dataset.controlMode === 'advanced';\n\n\t\tControls.renderLink('', '--border-no', advanced, {\n\t\t\tcallback: handlerNoBorder,\n\t\t\tnode: container,\n\t\t\toptions: controlOptions,\n\t\t\tvalue: value,\n\t\t\tkey: 'button.decoration',\n\t\t\tkeyName: Renderer.getOptionValueName('button.decoration', '', options.dict),\n\t\t\tformId: options.formId,\n\t\t});\n\n\t\tControls.renderLink('dotted', '--border-dotted', advanced, {\n\t\t\tcallback: handlerDotted,\n\t\t\tnode: container,\n\t\t\toptions: controlOptions,\n\t\t\tvalue: value,\n\t\t\tkey: 'button.decoration',\n\t\t\tkeyName: Renderer.getOptionValueName('button.decoration', 'dotted', options.dict),\n\t\t\tformId: options.formId,\n\t\t});\n\n\t\tControls.renderLink('solid', '--border-line', advanced, {\n\t\t\tcallback: handlerLine,\n\t\t\tnode: container,\n\t\t\toptions: controlOptions,\n\t\t\tvalue: value,\n\t\t\tkey: 'button.decoration',\n\t\t\tkeyName: Renderer.getOptionValueName('button.decoration', 'solid', options.dict),\n\t\t\tformId: options.formId,\n\t\t});\n\t},\n\n\trenderFieldButtonFont: function(container: HTMLElement, value: string, options: RenderOptions)\n\t{\n\t\tcontainer.innerHTML = '';\n\n\t\tconst controlOptions = this.getOptions(options.options, 'button.font', options.dict);\n\n\t\tconst handler = (val) => {\n\t\t\toptions.callback([{name: 'button.font', value: val}]).then(() => {\n\t\t\t\tRenderer.renderFieldButtonFont(container, val, options);\n\t\t\t});\n\t\t};\n\n\t\tconst handlerModern = () => handler('modern');\n\t\tconst handlerClassic = () => handler('classic');\n\t\tconst handlerElegant = () => handler('elegant');\n\n\t\tconst advanced = container.dataset.controlMode === 'advanced';\n\n\t\tControls.renderTypeface('modern', advanced, {\n\t\t\tcallback: handlerModern,\n\t\t\tnode: container,\n\t\t\toptions: controlOptions,\n\t\t\tvalue: value,\n\t\t\tkey: 'button.font',\n\t\t\tkeyName: Renderer.getOptionValueName('button.font', 'modern', options.dict),\n\t\t\tformId: options.formId,\n\t\t});\n\n\t\tControls.renderTypeface('classic', advanced, {\n\t\t\tcallback: handlerClassic,\n\t\t\tnode: container,\n\t\t\toptions: controlOptions,\n\t\t\tvalue: value,\n\t\t\tkey: 'button.font',\n\t\t\tkeyName: Renderer.getOptionValueName('button.font', 'classic', options.dict),\n\t\t\tformId: options.formId,\n\t\t});\n\n\t\tControls.renderTypeface('elegant', advanced, {\n\t\t\tcallback: handlerElegant,\n\t\t\tnode: container,\n\t\t\toptions: controlOptions,\n\t\t\tvalue: value,\n\t\t\tkey: 'button.font',\n\t\t\tkeyName: Renderer.getOptionValueName('button.font', 'elegant', options.dict),\n\t\t\tformId: options.formId,\n\t\t});\n\t},\n\n\trenderFieldButtonAlign: function(container: HTMLElement, value: string, options: RenderOptions)\n\t{\n\t\tcontainer.innerHTML = '';\n\n\t\tconst controlOptions = this.getOptions(options.options, 'button.align', options.dict);\n\n\t\tconst handler = (val) => {\n\t\t\toptions.callback([{name: 'button.align', value: val}]).then(() => {\n\t\t\t\tRenderer.renderFieldButtonAlign(container, val, options);\n\t\t\t});\n\t\t};\n\n\t\tconst handlerLeft = () => handler('left');\n\t\tconst handlerCenter = () => handler('center');\n\t\tconst handlerRight = () => handler('right');\n\n\t\t// container.appendChild(Controls.renderOptionTitle(Renderer.getOptionKeyName('button.align')));\n\n\t\tconst row = Tag.render`<div class=\"crm-form-embed__settings\"></div>`;\n\n\t\tControls.renderSquareButton('left', {\n\t\t\tcallback: handlerLeft,\n\t\t\tnode: row,\n\t\t\toptions: controlOptions,\n\t\t\tvalue: value,\n\t\t\tkey: 'button.align',\n\t\t\tkeyName: Renderer.getOptionValueName('button.align', 'left', options.dict),\n\t\t\tformId: options.formId,\n\t\t});\n\n\t\tControls.renderSquareButton('center', {\n\t\t\tcallback: handlerCenter,\n\t\t\tnode: row,\n\t\t\toptions: controlOptions,\n\t\t\tvalue: value,\n\t\t\tkey: 'button.align',\n\t\t\tkeyName: Renderer.getOptionValueName('button.align', 'center', options.dict),\n\t\t\tformId: options.formId,\n\t\t});\n\n\t\tControls.renderSquareButton('right', {\n\t\t\tcallback: handlerRight,\n\t\t\tnode: row,\n\t\t\toptions: controlOptions,\n\t\t\tvalue: value,\n\t\t\tkey: 'button.align',\n\t\t\tkeyName: Renderer.getOptionValueName('button.align', 'right', options.dict),\n\t\t\tformId: options.formId,\n\t\t});\n\n\t\tDom.append(row, container);\n\t},\n\n\trenderFieldLinkAlign: function(container: HTMLElement, value: string, options: RenderOptions)\n\t{\n\t\tcontainer.innerHTML = '';\n\n\t\tconst controlOptions = this.getOptions(options.options, 'link.align', options.dict);\n\n\t\tconst handler = (val) => {\n\t\t\toptions.callback([{name: 'link.align', value: val}]).then(() => {\n\t\t\t\tRenderer.renderFieldLinkAlign(container, val, options);\n\t\t\t});\n\t\t};\n\n\t\tconst handlerInline = () => handler('inline');\n\t\tconst handlerLeft = () => handler('left');\n\t\tconst handlerCenter = () => handler('center');\n\t\tconst handlerRight = () => handler('right');\n\n\t\t// container.appendChild(Controls.renderOptionTitle(Renderer.getOptionKeyName('button.align')));\n\n\t\tconst row = Tag.render`<div class=\"crm-form-embed__settings\"></div>`;\n\n\t\tControls.renderSquareButton('inline', {\n\t\t\tcallback: handlerInline,\n\t\t\tnode: row,\n\t\t\toptions: controlOptions,\n\t\t\tvalue: value,\n\t\t\tkey: 'link.align',\n\t\t\tkeyName: Renderer.getOptionValueName('link.align', 'inline', options.dict),\n\t\t\tformId: options.formId,\n\t\t});\n\n\t\tControls.renderSquareButton('left', {\n\t\t\tcallback: handlerLeft,\n\t\t\tnode: row,\n\t\t\toptions: controlOptions,\n\t\t\tvalue: value,\n\t\t\tkey: 'link.align',\n\t\t\tkeyName: Renderer.getOptionValueName('link.align', 'left', options.dict),\n\t\t\tformId: options.formId,\n\t\t});\n\n\t\tControls.renderSquareButton('center', {\n\t\t\tcallback: handlerCenter,\n\t\t\tnode: row,\n\t\t\toptions: controlOptions,\n\t\t\tvalue: value,\n\t\t\tkey: 'link.align',\n\t\t\tkeyName: Renderer.getOptionValueName('link.align', 'center', options.dict),\n\t\t\tformId: options.formId,\n\t\t});\n\n\t\tControls.renderSquareButton('right', {\n\t\t\tcallback: handlerRight,\n\t\t\tnode: row,\n\t\t\toptions: controlOptions,\n\t\t\tvalue: value,\n\t\t\tkey: 'link.align',\n\t\t\tkeyName: Renderer.getOptionValueName('link.align', 'right', options.dict),\n\t\t\tformId: options.formId,\n\t\t});\n\n\t\tDom.append(row, container);\n\t},\n\n\trenderFieldButtonPlain: function(container: HTMLElement, value: string, options: RenderOptions)\n\t{\n\t\tcontainer.innerHTML = '';\n\n\t\tconst handler = (val) => {\n\t\t\toptions.callback([{name: 'button.plain', value: val}]).then(() => {\n\t\t\t\tRenderer.renderFieldButtonPlain(container, val, options);\n\t\t\t});\n\t\t};\n\n\t\tconst block = Tag.render`<div class=\"crm-form-embed__settings--block-input\"></div>`;\n\n\t\tControls.renderDropdown({\n\t\t\tcallback: handler,\n\t\t\tnode: block,\n\t\t\toptions: this.getOptions(options.options, 'button.plain', options.dict),\n\t\t\tvalue: value,\n\t\t\tkey: 'button.plain',\n\t\t\tkeyName: Renderer.getOptionKeyName('button.plain'),\n\t\t\tformId: options.formId,\n\t\t});\n\n\t\tDom.append(block, container);\n\t},\n\n\trenderFieldButtonText: function(container: HTMLElement, value: string, options: RenderOptions)\n\t{\n\t\tcontainer.innerHTML = '';\n\n\t\tconst handler = (val) => {\n\t\t\tif (!Type.isStringFilled(val))\n\t\t\t{\n\t\t\t\tval = BX.Loc.getMessage('EMBED_SLIDER_BUTTONTEXT_PLACEHOLDER');\n\t\t\t}\n\t\t\toptions.callback([{name: 'button.text', value: val}]).then(() => {\n\t\t\t\tRenderer.renderFieldButtonText(container, val, options);\n\t\t\t});\n\t\t};\n\n\t\tconst block = Tag.render`<div class=\"crm-form-embed__settings--block-input\"></div>`;\n\n\t\tconst advanced = container.dataset.controlMode === 'advanced';\n\n\t\tControls.renderText({\n\t\t\tcallback: handler,\n\t\t\tnode: block,\n\t\t\toptions: null,\n\t\t\tvalue: value ? value : BX.Loc.getMessage('EMBED_SLIDER_BUTTONTEXT_PLACEHOLDER'),\n\t\t\tkey: 'button.text',\n\t\t\tkeyName: Renderer.getOptionKeyName('button.text'),\n\t\t\tformId: options.formId,\n\t\t}, advanced);\n\n\t\tDom.append(block, container);\n\t},\n\n\trenderFieldButtonColorBackground: function(container: HTMLElement, value: string, options: RenderOptions)\n\t{\n\t\tcontainer.innerHTML = '';\n\n\t\tconst advanced = container.dataset.controlMode === 'advanced';\n\n\t\tconst handler = (val) => {\n\t\t\tconst fields = [\n\t\t\t\t{name: 'button.color.background', value: val}\n\t\t\t];\n\t\t\tif (!advanced)\n\t\t\t{\n\t\t\t\tfields.push({name: 'button.color.backgroundHover', value: val});\n\t\t\t}\n\n\t\t\toptions.callback(fields).then(() => {\n\t\t\t\t// Renderer.renderFieldButtonColorBackground(container, val, options);\n\t\t\t});\n\t\t};\n\n\t\tControls.renderColorPicker('color', {\n\t\t\tcallback: handler,\n\t\t\tnode: container,\n\t\t\toptions: null,\n\t\t\tvalue: value,\n\t\t\tkey: 'button.color.background',\n\t\t\tkeyName: Renderer.getOptionKeyName('button.color.background'),\n\t\t\tformId: options.formId,\n\t\t});\n\t},\n\n\trenderFieldButtonColorBackgroundHover: function(container: HTMLElement, value: string, options: RenderOptions)\n\t{\n\t\tcontainer.innerHTML = '';\n\n\t\tconst advanced = container.dataset.controlMode === 'advanced';\n\n\t\tconst handler = (val) => {\n\t\t\toptions.callback([{name: 'button.color.backgroundHover', value: val}]).then(() => {\n\t\t\t\t// Renderer.renderFieldButtonColorBackgroundHover(container, val, options);\n\t\t\t});\n\t\t};\n\n\t\tControls.renderColorPicker('color', {\n\t\t\tcallback: handler,\n\t\t\tnode: container,\n\t\t\toptions: null,\n\t\t\tvalue: value,\n\t\t\tkey: 'button.color.backgroundHover',\n\t\t\tkeyName: Renderer.getOptionKeyName('button.color.backgroundHover'),\n\t\t\tformId: options.formId,\n\t\t});\n\t},\n\n\trenderFieldButtonColorText: function(container: HTMLElement, value: string, options: RenderOptions)\n\t{\n\t\tcontainer.innerHTML = '';\n\n\t\tconst advanced = container.dataset.controlMode === 'advanced';\n\n\t\tconst handler = (val) => {\n\t\t\tconst fields = [\n\t\t\t\t{name: 'button.color.text', value: val}\n\t\t\t];\n\t\t\tif (!advanced)\n\t\t\t{\n\t\t\t\tfields.push({name: 'button.color.textHover', value: val});\n\t\t\t}\n\n\t\t\toptions.callback(fields).then(() => {\n\t\t\t\t// Renderer.renderFieldButtonColorText(container, val, options);\n\t\t\t});\n\t\t};\n\n\t\tControls.renderColorPicker('color', {\n\t\t\tcallback: handler,\n\t\t\tnode: container,\n\t\t\toptions: null,\n\t\t\tvalue: value,\n\t\t\tkey: 'button.color.text',\n\t\t\tkeyName: Renderer.getOptionKeyName('button.color.text'),\n\t\t\tformId: options.formId,\n\t\t});\n\t},\n\n\trenderFieldButtonColorTextHover: function(container: HTMLElement, value: string, options: RenderOptions)\n\t{\n\t\tcontainer.innerHTML = '';\n\n\t\tconst advanced = container.dataset.controlMode === 'advanced';\n\n\t\tconst handler = (val) => {\n\t\t\toptions.callback([{name: 'button.color.textHover', value: val}]).then(() => {\n\t\t\t\t// Renderer.renderFieldButtonColorTextHover(container, val, options);\n\t\t\t});\n\t\t};\n\n\t\tControls.renderColorPicker('color', {\n\t\t\tcallback: handler,\n\t\t\tnode: container,\n\t\t\toptions: null,\n\t\t\tvalue: value,\n\t\t\tkey: 'button.color.textHover',\n\t\t\tkeyName: Renderer.getOptionKeyName('button.color.textHover'),\n\t\t\tformId: options.formId,\n\t\t});\n\t},\n\n\trenderFieldButtonUse: function(container: HTMLElement, value: string, options: RenderOptions)\n\t{\n\t\tcontainer.innerHTML = '';\n\n\t\tconst handler = (val) => {\n\t\t\treturn options.callback([{name: 'button.use', value: val}]).then(() => {\n\t\t\t\tRenderer.renderFieldButtonUse(container, val, options);\n\t\t\t\thandlerToggleClickMode(container, val === '1');\n\t\t\t});\n\t\t};\n\n\t\tControls.renderSwitcher({\n\t\t\tcallback: handler,\n\t\t\tnode: container,\n\t\t\toptions: null,\n\t\t\tvalue: value,\n\t\t\tkey: 'button.use',\n\t\t\tkeyName: Renderer.getOptionKeyName('button.use'),\n\t\t\tformId: options.formId,\n\t\t});\n\t},\n\n\trenderLabel: function(text: string, buttonSetting: boolean = false): HTMLElement\n\t{\n\t\treturn Controls.renderLabel(text, buttonSetting);\n\t},\n\n\tgetOptions: function(options, optionName: string, dict: EmbedDict): Object\n\t{\n\t\tconst result = {};\n\t\toptions.forEach((value) => {\n\t\t\tresult[value] = Renderer.getOptionValueName(optionName, value, dict);\n\t\t});\n\t\treturn result;\n\t},\n\n\tgetOptionKeyName: function(key: string): string\n\t{\n\t\tconst msgKey = 'EMBED_SLIDER_OPTION_' + key.toUpperCase();\n\t\treturn BX.Loc.hasMessage(msgKey) ? BX.Loc.getMessage(msgKey) : Text.encode(key);\n\t},\n\n\tgetOptionValueName: function(key: string, value: string, dict: EmbedDict): Object\n\t{\n\t\tconst keySplit = key.split('.');\n\t\tconst getDictValues = (parts: Array, dict: Object) => {\n\t\t\tconst nextKey = parts.shift();\n\t\t\tif (parts.length > 0)\n\t\t\t{\n\t\t\t\treturn getDictValues(parts, !Type.isUndefined(dict[nextKey]) ? dict[nextKey] : {});\n\t\t\t}\n\t\t\treturn !Type.isUndefined(dict[nextKey + 's']) ? dict[nextKey + 's'] : [];\n\t\t}\n\t\tconst dictValues = getDictValues(keySplit, dict['viewOptions']);\n\n\t\tlet result = value;\n\t\tif (Type.isArray(dictValues)) {\n\t\t\tdictValues.forEach(elem => {\n\t\t\t\tif (elem.id.toString() === value.toString()) {\n\t\t\t\t\tresult = elem.name;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\treturn Text.encode(result);\n\t},\n}","import {Tag, Dom, Type} from 'main.core';\nimport {Form} from './form';\nimport {DataProvider} from \"../../data_provider\";\nimport {Wizard} from \"../../wizard/wizard\";\nimport {openFeedbackForm} from '../../util';\nimport {Layout} from 'ui.sidepanel.layout';\nimport {HELP_CENTER_ID, HELP_CENTER_URL} from \"../../tab\";\n\nexport class Auto extends Form\n{\n\t#container: HTMLElement;\n\t#wizard: Wizard;\n\t#rendered: boolean = false;\n\n\tconstructor(formId: number, dataProvider: DataProvider)\n\t{\n\t\tsuper(formId, dataProvider);\n\t\tthis.#container = super.render();\n\t}\n\n\tload(force: boolean = false): Promise\n\t{\n\t\treturn super.load(force).then(() => {\n\t\t\tthis.#wizard = new Wizard(\n\t\t\t\t'auto',\n\t\t\t\tthis.formId,\n\t\t\t\tthis.dataProvider.getValues('auto'),\n\t\t\t\tthis.dataProvider.getOptions('auto'),\n\t\t\t\tthis.dataProvider.getDict()\n\t\t\t);\n\t\t\tthis.#wizard.subscribe('BX:Crm:Form:Embed:needToSave', (event) => {\n\t\t\t\treturn this.save();\n\t\t\t});\n\t\t\tthis.#wizard.subscribe('BX:Crm:Form:Embed:valueChanged', (event) => {\n\t\t\t\tthis.updateDependentFields(this.#container, event.data.name, event.data.value);\n\t\t\t});\n\t\t\tif (!this.#rendered)\n\t\t\t{\n\t\t\t\tthis.render()\n\t\t\t}\n\t\t}).catch((error) => {\n\t\t\tconsole.error(error);\n\t\t\tif (!this.#rendered)\n\t\t\t{\n\t\t\t\tthis.#renderError();\n\t\t\t}\n\t\t});\n\t}\n\n\tsave(): Promise\n\t{\n\t\tthis.data.embed.viewValues['auto'] = this.#wizard.getValues();\n\t\treturn super.save();\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tthis.#container.innerHTML = '';\n\n\t\tconst headerSection = this.renderHeaderSection(\n\t\t\t'clock',\n\t\t\tBX.Loc.getMessage('EMBED_SLIDER_AUTO_TITLE'),\n\t\t\tBX.Loc.getMessage('EMBED_SLIDER_AUTO_DESC'),\n\t\t\tHELP_CENTER_ID,\n\t\t\tHELP_CENTER_URL\n\t\t);\n\t\tDom.append(headerSection, this.#container);\n\n\t\tif (!super.loaded)\n\t\t{\n\t\t\tthis.loader.show(this.#container);\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// update with actual help-center link\n\t\t\tDom.replace(headerSection, this.renderHeaderSection(\n\t\t\t\t'clock',\n\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_AUTO_TITLE'),\n\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_AUTO_DESC'),\n\t\t\t\tthis.dataProvider.data.embed.helpCenterId,\n\t\t\t\tthis.dataProvider.data.embed.helpCenterUrl\n\t\t\t));\n\n\t\t\tDom.append(this.renderPreviewSection(\n\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_QR_TITLE'),\n\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_QR_DESC'),\n\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_OPEN_IN_NEW_TAB'),\n\t\t\t\tthis.dataProvider.data.embed.previewLink.replace('#preview#', 'auto')\n\t\t\t), this.#container);\n\n\t\t\tDom.append(this.renderBaseSettings(), this.#container);\n\n\t\t\tconst code = this.data.embed.scripts['auto'].text;\n\t\t\tDom.append(this.renderCodeBlock(code), this.#container);\n\t\t\tDom.append(this.renderCopySection(\n\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_COPY_CODE'),\n\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_COPY_CODE2'),\n\t\t\t\tcode,\n\t\t\t\tthis.renderBubble(BX.Loc.getMessage('EMBED_SLIDER_COPY_CODE_BUBBLE_AUTO'), true)\n\t\t\t), this.#container);\n\n\t\t\tthis.#rendered = true;\n\t\t}\n\n\t\treturn this.#container;\n\t}\n\n\t#renderError(): HTMLElement\n\t{\n\t\tthis.#container.innerHTML = '';\n\t\tDom.append(super.renderError(super.data), this.#container);\n\t\tthis.#rendered = true;\n\t}\n\n\trenderBaseSettings(): HTMLElement\n\t{\n\t\tconst section = this.renderSection(\n\t\t\tthis.renderSettingsHeader(BX.Loc.getMessage('EMBED_SLIDER_SETTINGS_HEADING'), false, () => {\n\t\t\t\tBX.SidePanel.Instance.open(\"crm.webform:embed:\" + this.formId + \":auto:expert\", {\n\t\t\t\t\twidth: 920,\n\t\t\t\t\tcacheable: false,\n\t\t\t\t\tcontentCallback: () => this.#createAdvancedSettingsLayout(),\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tonCloseComplete: (event) => {\n\t\t\t\t\t\t\tthis.load(true).then(() => {\n\t\t\t\t\t\t\t\tthis.render();\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t})\n\t\t);\n\n\t\tconst wrapper = Tag.render`<div class=\"crm-form-embed__basic\"></div>`;\n\n\t\tthis.#wizard.renderOptionTo(wrapper, 'delay', true);\n\t\tDom.addClass(wrapper.querySelector('.ui-ctl-dropdown'), 'crm-form-embed__select--time');\n\n\t\tDom.append(wrapper, section);\n\t\treturn section;\n\t}\n\n\t#createAdvancedSettingsLayout(): HTMLElement\n\t{\n\t\tconst layoutContent = this.#renderAdvancedSettingsLayoutContent()\n\n\t\tthis.#wizard.subscribe('BX:Crm:Form:Embed:valueChanged', (event) => {\n\t\t\tthis.updateDependentFields(layoutContent, event.data.name, event.data.value);\n\t\t});\n\n\t\treturn Layout.createContent({\n\t\t\textensions: ['crm.form.embed', 'ui.sidepanel-content', 'ui.forms', 'landing.ui.field.color', 'ui.switcher'],\n\t\t\ttitle: BX.Loc.getMessage('EMBED_SLIDER_EXPERT_MODE_TITLE'),\n\t\t\tdesign: {\n\t\t\t\tsection: false,\n\t\t\t},\n\t\t\ttoolbar ({Button}): Array\n\t\t\t{\n\t\t\t\treturn [\n\t\t\t\t\tnew Button({\n\t\t\t\t\t\t// icon: Button.Icon.SETTING,\n\t\t\t\t\t\tcolor: Button.Color.LIGHT_BORDER,\n\t\t\t\t\t\ttext: BX.Loc.getMessage('EMBED_SLIDER_TOOLBAR_BTN_FEEDBACK'),\n\t\t\t\t\t\tonclick: openFeedbackForm,\n\t\t\t\t\t}),\n\t\t\t\t];\n\t\t\t},\n\t\t\tcontent: () => layoutContent,\n\t\t\tbuttons: ({SaveButton, ApplyButton, cancelButton}) => {\n\t\t\t\treturn [\n\t\t\t\t\tnew SaveButton({\n\t\t\t\t\t\tonclick: btn => {\n\t\t\t\t\t\t\tbtn.setWaiting(true);\n\t\t\t\t\t\t\tthis.save().then(() => {\n\t\t\t\t\t\t\t\tbtn.setWaiting(false);\n\t\t\t\t\t\t\t\tthis.render();\n\t\t\t\t\t\t\t\tBX.SidePanel.Instance.close();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}),\n\t\t\t\t\tnew ApplyButton({\n\t\t\t\t\t\tonclick: btn => {\n\t\t\t\t\t\t\tbtn.setWaiting(true);\n\t\t\t\t\t\t\tthis.save().then(() => {\n\t\t\t\t\t\t\t\tbtn.setWaiting(false);\n\t\t\t\t\t\t\t\tthis.render();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}),\n\t\t\t\t\tcancelButton,\n\t\t\t\t];\n\t\t\t},\n\t\t});\n\t}\n\n\t#renderAdvancedSettingsLayoutContent(): HTMLElement\n\t{\n\t\tconst container = this.renderContainer();\n\n\t\tDom.append(this.renderHeaderSection(\n\t\t\t'clock',\n\t\t\tBX.Loc.getMessage('EMBED_SLIDER_AUTO_TITLE2'),\n\t\t\tBX.Loc.getMessage('EMBED_SLIDER_AUTO_DESC2'),\n\t\t\tthis.dataProvider.data.embed.helpCenterId,\n\t\t\tthis.dataProvider.data.embed.helpCenterUrl\n\t\t), container);\n\n\t\tconst stepperInner = Tag.render`<div></div>`;\n\n\t\tDom.append(this.#wizard.renderControlContainer([\n\t\t\tthis.#wizard.renderOption('delay', false),\n\t\t\tthis.#wizard.renderOption('type', false),\n\t\t]), stepperInner);\n\n\t\tconst containerPosition = Tag.render`<div class=\"crm-form-embed__settings--side-block\"></div>`;\n\t\tconst containerVertical = Tag.render`<div data-option=\"vertical\"></div>`;\n\t\tthis.#wizard.renderOptionTo(containerPosition, 'position', false);\n\t\tthis.#wizard.renderOptionTo(containerVertical, 'vertical', false);\n\t\tconst containerPositionVertical = this.#wizard.renderControlContainer([\n\t\t\tcontainerPosition,\n\t\t\tcontainerVertical,\n\t\t]);\n\t\tDom.append(containerPositionVertical, stepperInner);\n\n\t\tconst stepperContent = [\n\t\t\t{\n\t\t\t\thtml: [\n\t\t\t\t\t{\n\t\t\t\t\t\theader: BX.Loc.getMessage('EMBED_SLIDER_AUTO_WIZARD_TITLE'),\n\t\t\t\t\t\tnode: stepperInner,\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t}\n\t\t];\n\n\t\tDom.append(this.renderStepperSection(stepperContent), container);\n\n\t\t// TODO field dependency\n\t\tthis.updateDependentFields(container, 'type', this.data.embed.viewValues['auto']['type']);\n\n\t\treturn container;\n\t}\n}","import {Tag, Type, Dom, Event} from 'main.core';\nimport {Form} from './form';\nimport {DataProvider} from \"../../data_provider\";\nimport {Wizard} from \"../../wizard/wizard\";\nimport {openFeedbackForm} from '../../util';\nimport {Layout} from 'ui.sidepanel.layout';\nimport {HELP_CENTER_ID, HELP_CENTER_URL} from \"../../tab\";\nimport { EventEmitter } from 'main.core.events'\nimport \"ui.alerts\";\n\nexport class Click extends Form\n{\n\t#container: HTMLElement;\n\t#wizard: Wizard;\n\t#rendered: boolean = false;\n\n\tconstructor(formId: number, dataProvider: DataProvider)\n\t{\n\t\tsuper(formId, dataProvider);\n\t\tthis.#container = super.render();\n\t}\n\n\tload(force: boolean = false): Promise\n\t{\n\t\treturn super.load(force).then(() => {\n\t\t\tthis.#wizard = new Wizard(\n\t\t\t\t'click',\n\t\t\t\tthis.formId,\n\t\t\t\tthis.dataProvider.getValues('click'),\n\t\t\t\tthis.dataProvider.getOptions('click'),\n\t\t\t\tthis.dataProvider.getDict()\n\t\t\t);\n\t\t\tthis.#wizard.subscribe('BX:Crm:Form:Embed:needToSave', (event) => {\n\t\t\t\treturn this.save();\n\t\t\t});\n\t\t\tthis.#wizard.subscribe('BX:Crm:Form:Embed:valueChanged', (event) => {\n\t\t\t\tthis.updateDependentFields(this.#container, event.data.name, event.data.value);\n\t\t\t});\n\t\t\tif (!this.#rendered)\n\t\t\t{\n\t\t\t\tthis.render();\n\t\t\t}\n\t\t}).catch((error) => {\n\t\t\tconsole.error(error);\n\t\t\tif (!this.#rendered)\n\t\t\t{\n\t\t\t\tthis.#renderError();\n\t\t\t}\n\t\t});\n\t}\n\n\tsave(): Promise\n\t{\n\t\tthis.dataProvider.updateValues('click', {...this.#wizard.getValues()});\n\t\treturn super.save();\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tthis.#container.innerHTML = '';\n\n\t\tconst headerSection = this.renderHeaderSection(\n\t\t\t'click',\n\t\t\tBX.Loc.getMessage('EMBED_SLIDER_CLICK_TITLE'),\n\t\t\tBX.Loc.getMessage('EMBED_SLIDER_CLICK_DESC'),\n\t\t\tHELP_CENTER_ID,\n\t\t\tHELP_CENTER_URL\n\t\t);\n\t\tDom.append(headerSection, this.#container);\n\n\t\tif (!super.loaded)\n\t\t{\n\t\t\tthis.loader.show(this.#container);\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// update with actual help-center link\n\t\t\tDom.replace(headerSection, this.renderHeaderSection(\n\t\t\t\t'click',\n\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_CLICK_TITLE'),\n\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_CLICK_DESC'),\n\t\t\t\tthis.dataProvider.data.embed.helpCenterId,\n\t\t\t\tthis.dataProvider.data.embed.helpCenterUrl\n\t\t\t));\n\n\t\t\tDom.append(this.renderPreviewSection(\n\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_QR_TITLE'),\n\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_QR_DESC'),\n\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_OPEN_IN_NEW_TAB'),\n\t\t\t\tthis.dataProvider.data.embed.previewLink.replace('#preview#', 'click')\n\t\t\t), this.#container);\n\n\t\t\tDom.append(this.renderFormSettings(), this.#container);\n\t\t\tDom.append(this.renderButtonSettings(), this.#container);\n\n\t\t\tconst code = this.dataProvider.data.embed.scripts['click'].text;\n\t\t\tDom.append(this.renderCodeBlock(code), this.#container);\n\t\t\tDom.append(this.renderCopySection(\n\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_COPY_CODE'),\n\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_COPY_CODE2'),\n\t\t\t\tcode,\n\t\t\t\tthis.renderBubble(BX.Loc.getMessage('EMBED_SLIDER_COPY_CODE_BUBBLE_CLICK'), true)\n\t\t\t), this.#container);\n\n\t\t\tthis.#rendered = true;\n\t\t}\n\n\t\treturn this.#container;\n\t}\n\n\t#renderError(): HTMLElement\n\t{\n\t\tthis.#container.innerHTML = '';\n\t\tDom.append(super.renderError(super.dataProvider.data), this.#container);\n\t\tthis.#rendered = true;\n\t}\n\n\trenderFormSettings(): HTMLElement\n\t{\n\t\tconst section = this.renderSection(\n\t\t\tthis.renderSettingsHeader(BX.Loc.getMessage('EMBED_SLIDER_SETTINGS_HEADING'), false)\n\t\t);\n\n\t\tconst formSettings = Tag.render`<div></div>`;\n\t\tDom.append(this.#wizard.renderOption('type', true), formSettings);\n\n\t\tconst containerPosition = Tag.render`<div class=\"crm-form-embed__settings--side-block --compact\"></div>`;\n\t\tthis.#wizard.renderOptionTo(containerPosition, 'position', true);\n\n\t\tconst containerVertical = Tag.render`<div data-option=\"vertical\"></div>`;\n\t\tthis.#wizard.renderOptionTo(containerVertical, 'vertical', true);\n\n\t\tconst containerPositionVertical = this.#wizard.renderControlContainer([\n\t\t\tcontainerPosition,\n\t\t\tcontainerVertical,\n\t\t]);\n\t\tDom.append(containerPositionVertical, formSettings);\n\n\t\tthis.updateDependentFields(formSettings, 'type', this.dataProvider.getValues('click')['type']);\n\n\t\tDom.append(formSettings, section);\n\t\treturn section;\n\t}\n\n\trenderButtonSettings(): HTMLElement\n\t{\n\t\tconst enhancedMode =\n\t\t\t!Type.isUndefined(this.dataProvider.getValues('click')['button'])\n\t\t\t&& !Type.isUndefined(this.dataProvider.getValues('click')['button']['use'])\n\t\t\t&& this.dataProvider.getValues('click')['button']['use'] === '1'\n\t\t;\n\t\t// const linkMode =\n\t\t// \t!Type.isUndefined(this.dataProvider.getValues('click')?.button?.plain)\n\t\t// \t&& this.dataProvider.getValues('click')['button']['plain'] === '1'\n\t\t// ;\n\n\t\tconst section = this.renderSection(\n\t\t\tTag.render`\n\t\t\t\t<div class=\"ui-alert ui-alert-primary crm-form-embed-click-button-alert\" id ='crm-form-embed-click-button-alert-${this.formId}'>\n\t\t\t\t\t<span class=\"ui-alert-message\">${BX.Loc.getMessage('EMBED_SLIDER_CLICK_BUTTON_ALERT')}</span>\n\t\t\t\t\t<span class=\"ui-alert-close-btn\" onclick=\"BX.hide(BX('crm-form-embed-click-button-alert-${this.formId}'));\"></span>\n\t\t\t\t</div>\n\t\t\t`\n\t\t);\n\n\t\tDom.append(\n\t\t\tthis.renderSettingsHeader(BX.Loc.getMessage('EMBED_SLIDER_SETTINGS_HEADING_CLICK'), true,() => {\n\t\t\t\tBX.SidePanel.Instance.open(\"crm.webform:embed:\" + this.formId + \":click:expert\", {\n\t\t\t\t\twidth: 920,\n\t\t\t\t\tcacheable: false,\n\t\t\t\t\tcontentCallback: () => this.#createAdvancedSettingsLayout(),\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tonCloseComplete: (event) => {\n\t\t\t\t\t\t\tthis.load(true).then(() => {\n\t\t\t\t\t\t\t\tthis.render();\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}),\n\t\t\tsection\n\t\t);\n\n\t\tDom.append(\n\t\t\tthis.#wizard.renderOption('button.use', true),\n\t\t\tsection.querySelector('.crm-form-embed__customization-settings--switcher')\n\t\t);\n\n\t\tif (enhancedMode)\n\t\t{\n\t\t\tDom.addClass(section.querySelector('.crm-form-embed__link.--expert-mode'), '--visible');\n\t\t\tDom.removeClass(section.querySelector('[data-roll=\"heading-block\"]'), '--collapse');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.removeClass(section.querySelector('.crm-form-embed__link.--expert-mode'), '--visible');\n\t\t\tDom.addClass(section.querySelector('[data-roll=\"heading-block\"]'), '--collapse');\n\t\t}\n\n\t\tconst containerPlainAndText = this.#wizard.renderControlContainer([\n\t\t\tthis.#wizard.renderOption('button.plain', true),\n\t\t\tthis.#wizard.renderOption('button.text', true)\n\t\t]);\n\n\t\t// const optionStyle = (linkMode)\n\t\t// \t? this.#wizard.renderOption('button.decoration', true)\n\t\t// \t: this.#wizard.renderOption('buttonStyle', true)\n\t\t// ;\n\t\tconst optionLinkStyle = this.#wizard.renderOption('button.decoration', true);\n\t\toptionLinkStyle.dataset.option = 'button.decoration';\n\t\tconst optionButtonStyle = this.#wizard.renderOption('buttonStyle', true);\n\t\toptionButtonStyle.dataset.option = 'buttonStyle';\n\n\t\tconst rowButtonSettings = this.#wizard.renderRow([\n\t\t\t// this.#wizard.renderTitle(BX.Loc.getMessage('EMBED_SLIDER_SUBTITLE_BUTTON_SETTINGS'), true),\n\t\t\tcontainerPlainAndText,\n\t\t\t// this.#wizard.renderTitle(BX.Loc.getMessage('EMBED_SLIDER_SUBTITLE_STYLE')),\n\t\t\t// optionStyle,\n\t\t\toptionButtonStyle,\n\t\t\toptionLinkStyle,\n\t\t]);\n\n\t\tconst colBtnColor = this.#wizard.renderCol();\n\t\tconst colTxtColor = this.#wizard.renderCol();\n\t\tthis.#wizard.renderColorPopup(colBtnColor, 'button.color.background', true);\n\t\tthis.#wizard.renderColorPopup(colTxtColor, 'button.color.text', true);\n\n\t\tconst rowDesign = this.#wizard.renderRow(\n\t\t\t[\n\t\t\t\t// this.#wizard.renderTitle(\n\t\t\t\t// \tBX.Loc.getMessage('EMBED_SLIDER_SUBTITLE_DESIGN'),\n\t\t\t\t// \ttrue\n\t\t\t\t// ),\n\t\t\t\tthis.#wizard.renderBlock([\n\t\t\t\t\tthis.#wizard.renderCol([\n\t\t\t\t\t\tthis.#wizard.renderLabel(BX.Loc.getMessage('EMBED_SLIDER_OPTION_BUTTON.FONT'), true),\n\t\t\t\t\t\tthis.#wizard.renderOption('button.font', true),\n\t\t\t\t\t], true),\n\t\t\t\t\tcolBtnColor,\n\t\t\t\t\tcolTxtColor,\n\t\t\t\t]),\n\t\t\t],\n\t\t\ttrue\n\t\t);\n\n\t\tconst wrapper = Tag.render`\n\t\t\t<div class=\"crm-form-embed__basic\" data-roll=\"crm-form-embed__settings\" ${enhancedMode ? '' : 'style=\"height: 0px;\"'}></div>\n\t\t`;\n\n\t\tDom.append(rowButtonSettings, wrapper);\n\t\tDom.append(rowDesign, wrapper);\n\t\tDom.append(wrapper, section);\n\n\t\tthis.updateDependentFields(section, 'button.plain', this.dataProvider.getValues('click')['button']['plain']);\n\n\t\treturn section;\n\t}\n\n\t#createAdvancedSettingsLayout(): Promise\n\t{\n\t\treturn Layout.createContent({\n\t\t\textensions: ['crm.form.embed', 'ui.sidepanel-content', 'ui.forms', 'landing.ui.field.color', 'ui.switcher'],\n\t\t\ttitle: BX.Loc.getMessage('EMBED_SLIDER_EXPERT_MODE_TITLE'),\n\t\t\tdesign: {\n\t\t\t\tsection: false,\n\t\t\t},\n\t\t\ttoolbar ({Button}): Array\n\t\t\t{\n\t\t\t\treturn [\n\t\t\t\t\tnew Button({\n\t\t\t\t\t\t// icon: Button.Icon.SETTING,\n\t\t\t\t\t\tcolor: Button.Color.LIGHT_BORDER,\n\t\t\t\t\t\ttext: BX.Loc.getMessage('EMBED_SLIDER_TOOLBAR_BTN_FEEDBACK'),\n\t\t\t\t\t\tonclick: openFeedbackForm,\n\t\t\t\t\t}),\n\t\t\t\t];\n\t\t\t},\n\t\t\tcontent: () => this.#renderAdvancedSettingsLayoutContent(),\n\t\t\tbuttons: ({cancelButton, ApplyButton, SaveButton}) => {\n\t\t\t\treturn [\n\t\t\t\t\tnew SaveButton({\n\t\t\t\t\t\tonclick: btn => {\n\t\t\t\t\t\t\tbtn.setWaiting(true);\n\t\t\t\t\t\t\tthis.save().then(() => {\n\t\t\t\t\t\t\t\tbtn.setWaiting(false);\n\t\t\t\t\t\t\t\tthis.render();\n\t\t\t\t\t\t\t\tBX.SidePanel.Instance.close();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}),\n\t\t\t\t\tnew ApplyButton({\n\t\t\t\t\t\tonclick: btn => {\n\t\t\t\t\t\t\tbtn.setWaiting(true);\n\t\t\t\t\t\t\tthis.save().then(() => {\n\t\t\t\t\t\t\t\tbtn.setWaiting(false);\n\t\t\t\t\t\t\t\tthis.render();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}),\n\t\t\t\t\tcancelButton,\n\t\t\t\t];\n\t\t\t},\n\t\t});\n\t}\n\n\t#renderAdvancedSettingsLayoutContent(): Promise\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst container = this.renderContainer();\n\n\t\t\tDom.append(this.renderHeaderSection(\n\t\t\t\t'click',\n\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_CLICK_TITLE_ADVANCED'),\n\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_CLICK_DESC_ADVANCED'),\n\t\t\t\tthis.dataProvider.data.embed.helpCenterId,\n\t\t\t\tthis.dataProvider.data.embed.helpCenterUrl\n\t\t\t), container);\n\n\t\t\tthis.loader.show(container);\n\n\t\t\tEventEmitter.subscribeOnce('SidePanel.Slider:onOpenComplete', (event) => {\n\t\t\t\tif (event.target.getUrl() === \"crm.webform:embed:\" + this.formId + \":click:expert\")\n\t\t\t\t{\n\t\t\t\t\tthis.loader.hide();\n\n\t\t\t\t\tconst containerButtonStyle = this.#wizard.renderControlContainer();\n\t\t\t\t\tcontainerButtonStyle.dataset.controlMode = 'advanced';\n\t\t\t\t\tcontainerButtonStyle.dataset.option = 'buttonStyle';\n\t\t\t\t\tthis.#wizard.renderOptionTo(containerButtonStyle, 'buttonStyle', false);\n\t\t\t\t\tconst containerLinkStyle = this.#wizard.renderControlContainer();\n\t\t\t\t\tcontainerLinkStyle.dataset.controlMode = 'advanced';\n\t\t\t\t\tcontainerLinkStyle.dataset.option = 'button.decoration';\n\t\t\t\t\tthis.#wizard.renderOptionTo(containerLinkStyle, 'button.decoration', false);\n\n\n\t\t\t\t\tconst containerText = this.#wizard.renderControlContainer();\n\t\t\t\t\tcontainerText.dataset.controlMode = 'advanced';\n\t\t\t\t\tthis.#wizard.renderOptionTo(containerText, 'button.text', false);\n\t\t\t\t\tconst containerTypeAndText = this.#wizard.renderControlContainer([\n\t\t\t\t\t\tthis.#wizard.renderOption('button.plain', false),\n\t\t\t\t\t\tcontainerText,\n\t\t\t\t\t]);\n\n\t\t\t\t\tconst step1 = Tag.render`<div></div>`;\n\t\t\t\t\tDom.append(containerTypeAndText, step1);\n\t\t\t\t\tDom.append(containerButtonStyle, step1);\n\t\t\t\t\tDom.append(containerLinkStyle, step1);\n\n\t\t\t\t\tconst rowFont = this.#wizard.renderControlContainer();\n\t\t\t\t\trowFont.dataset.controlMode = 'advanced';\n\t\t\t\t\trowFont.dataset.option = 'button.font';\n\t\t\t\t\tthis.#wizard.renderOptionTo(rowFont, 'button.font', false);\n\t\t\t\t\tconst stepButtonFont = Tag.render`\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t${rowFont}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t`;\n\n\t\t\t\t\t// TODO white container\n\t\t\t\t\tconst stepColor = this.renderSection();\n\t\t\t\t\tconst containerColorBg = this.#wizard.renderControlContainer();\n\t\t\t\t\tconst containerColorBgHover = this.#wizard.renderControlContainer();\n\t\t\t\t\tconst containerColorText = this.#wizard.renderControlContainer();\n\t\t\t\t\tconst containerColorTextHover = this.#wizard.renderControlContainer();\n\t\t\t\t\tcontainerColorBg.dataset.controlMode = 'advanced';\n\t\t\t\t\tcontainerColorBgHover.dataset.controlMode = 'advanced';\n\t\t\t\t\tcontainerColorText.dataset.controlMode = 'advanced';\n\t\t\t\t\tcontainerColorTextHover.dataset.controlMode = 'advanced';\n\t\t\t\t\tthis.#wizard.renderColorInline(containerColorBg, 'button.color.background', false);\n\t\t\t\t\tthis.#wizard.renderColorInline(containerColorText, 'button.color.text', false);\n\t\t\t\t\tthis.#wizard.renderColorInline(containerColorBgHover, 'button.color.backgroundHover', false);\n\t\t\t\t\tthis.#wizard.renderColorInline(containerColorTextHover, 'button.color.textHover', false);\n\t\t\t\t\tconst getColorLabel = (messageId: string) => {\n\t\t\t\t\t\tconst label = this.#wizard.renderLabel(BX.Loc.getMessage(messageId));\n\t\t\t\t\t\tDom.addClass(label, 'crm-form-embed__label-text-color');\n\t\t\t\t\t\treturn label;\n\t\t\t\t\t}\n\t\t\t\t\tDom.append(Tag.render`<div>\n\t\t\t\t\t\t${this.#wizard.renderBlock([\n\t\t\t\t\t\t\tthis.#wizard.renderCol([\n\t\t\t\t\t\t\t\tgetColorLabel('EMBED_SLIDER_OPTION_BUTTON.COLOR.BACKGROUND'),\n\t\t\t\t\t\t\t\tcontainerColorBg,\n\t\t\t\t\t\t\t]),\n\t\t\t\t\t\t\tthis.#wizard.renderCol([\n\t\t\t\t\t\t\t\tgetColorLabel('EMBED_SLIDER_OPTION_BUTTON.COLOR.TEXT'),\n\t\t\t\t\t\t\t\tcontainerColorText,\n\t\t\t\t\t\t\t]),\n\t\t\t\t\t\t\tthis.#wizard.renderCol([\n\t\t\t\t\t\t\t\tgetColorLabel('EMBED_SLIDER_OPTION_BUTTON.COLOR.BACKGROUNDHOVER'),\n\t\t\t\t\t\t\t\tcontainerColorBgHover,\n\t\t\t\t\t\t\t]),\n\t\t\t\t\t\t\tthis.#wizard.renderCol([\n\t\t\t\t\t\t\t\tgetColorLabel('EMBED_SLIDER_OPTION_BUTTON.COLOR.TEXTHOVER'),\n\t\t\t\t\t\t\t\tcontainerColorTextHover,\n\t\t\t\t\t\t\t]),\n\t\t\t\t\t\t])}\n\t\t\t\t\t</div>`, stepColor);\n\n\t\t\t\t\tconst step4 = Tag.render`<div></div>`;\n\t\t\t\t\tconst containerButtonPosition = Tag.render`<div class=\"crm-form-embed__settings--side-block\" data-option=\"button.align\"></div>`;\n\t\t\t\t\tthis.#wizard.renderOptionTo(containerButtonPosition, 'button.align', false);\n\t\t\t\t\tconst containerLinkPosition = Tag.render`<div class=\"crm-form-embed__settings--side-block\" data-option=\"link.align\"></div>`;\n\t\t\t\t\tthis.#wizard.renderOptionTo(containerLinkPosition, 'link.align', false);\n\t\t\t\t\tDom.append(this.#wizard.renderControlContainer([\n\t\t\t\t\t\tcontainerButtonPosition,\n\t\t\t\t\t\tcontainerLinkPosition,\n\t\t\t\t\t]), step4);\n\n\t\t\t\t\tconst step4Message = (\n\t\t\t\t\t\t!Type.isUndefined(this.dataProvider.getValues('click')?.button?.plain)\n\t\t\t\t\t\t&& this.dataProvider.getValues('click')['button']['plain'] === '1'\n\t\t\t\t\t)\n\t\t\t\t\t\t? 'EMBED_SLIDER_CLICK_STEP_4_TITLE_2'\n\t\t\t\t\t\t: 'EMBED_SLIDER_CLICK_STEP_4_TITLE'\n\t\t\t\t\t;\n\n\t\t\t\t\tconst stepperContent = [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\thtml: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\theader: {\n\t\t\t\t\t\t\t\t\t\ttitle: BX.Loc.getMessage('EMBED_SLIDER_CLICK_STEP_1_TITLE'),\n\t\t\t\t\t\t\t\t\t\t// hint: 'hint text',\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tnode: step1,\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\thtml: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\theader: BX.Loc.getMessage('EMBED_SLIDER_CLICK_STEP_2_TITLE'),\n\t\t\t\t\t\t\t\t\tnode: stepButtonFont,\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\thtml: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\theader: BX.Loc.getMessage('EMBED_SLIDER_CLICK_STEP_3_TITLE'),\n\t\t\t\t\t\t\t\t\tnode: stepColor,\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\thtml: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\theader: BX.Loc.getMessage(step4Message),\n\t\t\t\t\t\t\t\t\tnode: step4,\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t},\n\t\t\t\t\t];\n\n\t\t\t\t\tDom.append(this.renderStepperSection(stepperContent), container);\n\n\t\t\t\t\t// TODO field dependency\n\t\t\t\t\tthis.updateDependentFields(container, 'type', this.dataProvider.getValues('click')['type']);\n\t\t\t\t\tthis.updateDependentFields(container, 'button.plain', this.dataProvider.getValues('click')['button']['plain']);\n\n\t\t\t\t\tthis.#wizard.subscribe('BX:Crm:Form:Embed:valueChanged', (event) => {\n\t\t\t\t\t\tthis.updateDependentFields(container, event.data.name, event.data.value);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tresolve(container);\n\t\t});\n\t}\n}","import {Dom} from 'main.core';\nimport {Form} from './form';\nimport {DataProvider} from \"../../data_provider\";\nimport {HELP_CENTER_ID, HELP_CENTER_URL} from \"../../tab\";\n\nexport class Publink extends Form\n{\n\t#container: HTMLElement;\n\t#rendered: boolean = false;\n\n\tconstructor(formId: number, dataProvider: DataProvider): undefined\n\t{\n\t\tsuper(formId, dataProvider);\n\t\tthis.#container = super.render();\n\t}\n\n\tload(force: boolean = false): Promise\n\t{\n\t\treturn super.load(force).then(() => {\n\t\t\tif (!this.#rendered)\n\t\t\t{\n\t\t\t\tthis.render();\n\t\t\t}\n\t\t}).catch((error) => {\n\t\t\tconsole.error(error);\n\t\t\tif (!this.#rendered)\n\t\t\t{\n\t\t\t\tthis.#renderError();\n\t\t\t}\n\t\t});\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tthis.#container.innerHTML = '';\n\n\t\tconst headerSection = this.renderHeaderSection(\n\t\t\t'linked-link',\n\t\t\tBX.Loc.getMessage('EMBED_SLIDER_PUBLIC_LINK_TITLE'),\n\t\t\tBX.Loc.getMessage('EMBED_SLIDER_PUBLIC_LINK_DESCRIPTION'),\n\t\t\tHELP_CENTER_ID,\n\t\t\tHELP_CENTER_URL\n\t\t);\n\t\tDom.append(headerSection, this.#container);\n\n\t\tif (!super.loaded)\n\t\t{\n\t\t\tthis.loader.show(this.#container);\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// update with actual help-center link\n\t\t\tDom.replace(headerSection, this.renderHeaderSection(\n\t\t\t\t'linked-link',\n\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_PUBLIC_LINK_TITLE'),\n\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_PUBLIC_LINK_DESCRIPTION'),\n\t\t\t\tthis.dataProvider.data.embed.helpCenterId,\n\t\t\t\tthis.dataProvider.data.embed.helpCenterUrl\n\t\t\t));\n\n\t\t\tDom.append(this.renderPreviewSection(\n\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_PUBLIC_LINK_QR_TITLE'),\n\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_PUBLIC_LINK_QR_DESC'),\n\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_PUBLIC_LINK_OPEN_IN_NEW_TAB'),\n\t\t\t\tthis.dataProvider.data.embed.pubLink\n\t\t\t), this.#container);\n\t\t\tDom.append(this.renderCopySection(\n\t\t\t\tnull, // BX.Loc.getMessage('EMBED_SLIDER_COPY_LINK'),\n\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_COPY_LINK2'),\n\t\t\t\tthis.dataProvider.data.embed.pubLink,\n\t\t\t\tnull,\n\t\t\t\t'ui-btn-icon-follow crm-form-embed__btn-icon--link'\n\t\t\t), this.#container);\n\n\t\t\tthis.#rendered = true;\n\t\t}\n\n\t\treturn this.#container;\n\t}\n\n\t#renderError(): HTMLElement\n\t{\n\t\tthis.#container.innerHTML = '';\n\t\tDom.append(super.renderError(this.dataProvider.data), this.#container);\n\t\tthis.#rendered = true;\n\t\treturn this.#container;\n\t}\n}","// export * from './inline';\n// export * from './auto';\n// export * from './click';\n// export * from './publink';\n\nimport {Inline} from \"./inline\";\nimport {Auto} from \"./auto\";\nimport {Click} from \"./click\";\nimport {Publink} from \"./publink\";\n\nexport {\n\tInline,\n\tAuto,\n\tClick,\n\tPublink,\n}","import {Loc, Tag, Type, Dom} from 'main.core';\nimport {Layout} from 'ui.sidepanel.layout';\nimport './embed.css';\nimport {EmbedOptions} from './types';\nimport {DataProvider} from \"./data_provider\";\nimport {Widget} from './tab/widget';\nimport {Openlines} from './tab/openlines';\nimport * as Form from './tab/form/index';\nimport {openFeedbackForm} from \"./util\";\n\nconst DEFAULT_WIDGETS_COUNT = 10;\n\nexport class Embed\n{\n\t#options: Object;\n\n\t#publink: Form.Publink;\n\t#inline: Form.Inline;\n\t#auto: Form.Auto;\n\t#click: Form.Click;\n\n\t#widget: Widget;\n\t#openlines: Openlines;\n\n\tconstructor(formId: number, options: EmbedOptions = {})\n\t{\n\t\tthis.#options = options;\n\n\t\tconst dataProvider = new DataProvider();\n\n\t\tthis.#publink = new Form.Publink(formId, dataProvider);\n\t\tthis.#inline = new Form.Inline(formId, dataProvider);\n\t\tthis.#click = new Form.Click(formId, dataProvider);\n\t\tthis.#auto = new Form.Auto(formId, dataProvider);\n\n\t\tconst widgetsCount = options.widgetsCount ? options.widgetsCount : DEFAULT_WIDGETS_COUNT;\n\t\tthis.#widget = new Widget(formId, {widgetsCount: widgetsCount});\n\t\tthis.#openlines = new Openlines(formId, {widgetsCount: widgetsCount});\n\t}\n\n\tstatic openSlider(formId: number,  options: EmbedOptions = {activeMenuItemId: 'link'})\n\t{\n\t\tconst instance = (new Embed(formId, {...options}));\n\t\tBX.SidePanel.Instance.open(\"crm.webform:embed:\" + formId, {\n\t\t\twidth: 1046,\n\t\t\tcacheable: false,\n\t\t\t...options.sliderOptions,\n\t\t\tcontentCallback: () => instance.#render(options),\n\t\t\tevents: {\n\t\t\t\tonCloseComplete: (event) => {\n\t\t\t\t\tif (Type.isFunction(options.onCloseComplete))\n\t\t\t\t\t{\n\t\t\t\t\t\toptions.onCloseComplete();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tonLoad: (event) => {\n\t\t\t\t\t// const sliderContainer = event.getSlider().getContainer();\n\t\t\t\t\t// Dom.remove(sliderContainer.querySelector('.ui-sidepanel-layout-footer-anchor'));\n\t\t\t\t\t// sliderContainer.style.overflowX = 'auto';\n\t\t\t\t\t// sliderContainer.querySelector('.side-panel-content-container').style.overflowX = 'initial';\n\t\t\t\t\t// sliderContainer.querySelector('.side-panel-content-container').style.overflowY = 'auto';\n\t\t\t\t\t// sliderContainer.querySelector('.side-panel-content-container').style.minWidth = '800px';\n\t\t\t\t\t// sliderContainer.querySelector('.ui-sidepanel-layout-footer').style.position = 'sticky';\n\n\t\t\t\t\t// BX.UI.Switcher.initByClassName();\n\t\t\t\t\tinstance.#loadTab(options.activeMenuItemId);\n\t\t\t\t}\n\t\t\t},\n\t\t});\n\t}\n\n\t/**\n\t * @deprecated open => openSlider\n\t * @see Embed.openSlider\n\t */\n\tstatic open(formId: number, options: EmbedOptions = {widgetsCount: DEFAULT_WIDGETS_COUNT, activeMenuItemId: 'inline'})\n\t{\n\t\tEmbed.openSlider(formId, options);\n\t}\n\n\t#render(options: EmbedOptions): Promise\n\t{\n\t\treturn Layout.createContent({\n\t\t\textensions: ['crm.form.embed', 'ui.sidepanel-content', 'ui.forms', 'landing.ui.field.color', 'ui.switcher'],\n\t\t\ttitle: BX.Loc.getMessage('EMBED_SLIDER_MAIN_TITLE'),\n\t\t\tdesign: {\n\t\t\t\tsection: false,\n\t\t\t},\n\t\t\ttoolbar ({Button}): Array\n\t\t\t{\n\t\t\t\treturn [\n\t\t\t\t\tnew Button({\n\t\t\t\t\t\t// icon: Button.Icon.SETTING,\n\t\t\t\t\t\tcolor: Button.Color.LIGHT_BORDER,\n\t\t\t\t\t\ttext: BX.Loc.getMessage('EMBED_SLIDER_TOOLBAR_BTN_FEEDBACK'),\n\t\t\t\t\t\tonclick: openFeedbackForm,\n\t\t\t\t\t}),\n\t\t\t\t];\n\t\t\t},\n\t\t\tcontent: () => {\n\t\t\t\treturn Tag.render`\n\t\t\t\t\t<div class=\"crm-form-embed-slider-wrapper\">\n\t\t\t\t\t\t<div data-menu-item-id=\"widgets\">${this.#widget.render()}</div>\n\t\t\t\t\t\t<div data-menu-item-id=\"openlines\">${this.#openlines.render()}</div>\n\t\t\t\t\t\t<div data-menu-item-id=\"inline\">${this.#inline.render()}</div>\n\t\t\t\t\t\t<div data-menu-item-id=\"click\">${this.#click.render()}</div>\n\t\t\t\t\t\t<div data-menu-item-id=\"auto\">${this.#auto.render()}</div>\n\t\t\t\t\t\t<div data-menu-item-id=\"link\">${this.#publink.render()}</div>\n\t\t\t\t\t</div>\n\t\t\t\t`;\n\t\t\t},\n\t\t\tmenu: {\n\t\t\t\titems: [\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: Loc.getMessage('EMBED_SLIDER_PUBLIC_LINK_MENU'),\n\t\t\t\t\t\tid: 'link',\n\t\t\t\t\t\tonclick: () => this.#loadTab('link'),\n\t\t\t\t\t\tactive: options.activeMenuItemId === 'link',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: Loc.getMessage('EMBED_SLIDER_WIDGET_MENU'),\n\t\t\t\t\t\tid: 'widgets',\n\t\t\t\t\t\tonclick: () => this.#loadTab('widgets'),\n\t\t\t\t\t\tactive: options.activeMenuItemId === 'widgets',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: Loc.getMessage('EMBED_SLIDER_OPENLINES_MENU'),\n\t\t\t\t\t\tid: 'openlines',\n\t\t\t\t\t\tonclick: () => this.#loadTab('openlines'),\n\t\t\t\t\t\tactive: options.activeMenuItemId === 'openlines',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: Loc.getMessage('EMBED_SLIDER_INLINE_MENU'),\n\t\t\t\t\t\tid: 'inline',\n\t\t\t\t\t\tonclick: () => this.#loadTab('inline'),\n\t\t\t\t\t\tactive: options.activeMenuItemId === 'inline',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: Loc.getMessage('EMBED_SLIDER_CLICK_MENU'),\n\t\t\t\t\t\tid: 'click',\n\t\t\t\t\t\tonclick: () => this.#loadTab('click'),\n\t\t\t\t\t\tactive: options.activeMenuItemId === 'click',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: Loc.getMessage('EMBED_SLIDER_AUTO_MENU'),\n\t\t\t\t\t\tid: 'auto',\n\t\t\t\t\t\tonclick: () => this.#loadTab('auto'),\n\t\t\t\t\t\tactive: options.activeMenuItemId === 'auto',\n\t\t\t\t\t},\n\t\t\t\t]\n\t\t\t},\n\t\t\tbuttons: ({closeButton}) => {\n\t\t\t\treturn [closeButton];\n\t\t\t},\n\t\t});\n\t}\n\n\t#loadTab(tabName: string)\n\t{\n\t\tswitch (tabName)\n\t\t{\n\t\t\tcase 'widgets':\n\t\t\t\tthis.#widget.load();\n\t\t\t\tbreak;\n\t\t\tcase 'openlines':\n\t\t\t\tthis.#openlines.load();\n\t\t\t\tbreak;\n\t\t\tcase 'inline':\n\t\t\t\tthis.#inline.load();\n\t\t\t\tbreak;\n\t\t\tcase 'click':\n\t\t\t\tthis.#click.load();\n\t\t\t\tbreak;\n\t\t\tcase 'auto':\n\t\t\t\tthis.#auto.load();\n\t\t\t\tbreak;\n\t\t\tcase 'link':\n\t\t\t\tthis.#publink.load();\n\t\t\t\tbreak;\n\t\t}\n\t}\n}"],"names":["DataProvider","loaded","data","errors","updateValues","type","values","button","plain","Type","isStringFilled","link","align","embed","viewValues","getValues","BX","mergeEx","getOptions","viewOptions","getDict","dict","aligns","value","defaults","inline","auto","click","use","text","Loc","getMessage","font","rounded","outlined","decoration","color","textHover","background","backgroundHover","isUndefined","HELP_CENTER_ID","HELP_CENTER_URL","Tab","constructor","Loader","loader","renderBubble","withoutFrame","Tag","render","renderCopySection","title","btnText","copyText","innerContent","iconClass","section","renderSection","isNull","Dom","append","Text","encode","inner","isDomNode","top","clipboard","bindCopyClick","querySelector","popup","offsetLeft","renderPreviewSection","desc","btn","url","qr","QRCode","width","height","addClass","renderHeaderSection","icon","helpCenterId","helpCenterUrl","renderHelp","renderStepperSection","content","step","StepByStep","target","init","elem","rounding","withIcon","renderContainer","container","caption","showHelp","event","Helper","show","dataset","helpId","preventDefault","ERROR_CODE_FORM_READ_ACCESS_DENIED","ERROR_CODE_WIDGET_READ_ACCESS_DENIED","ERROR_CODE_WIDGET_WRITE_ACCESS_DENIED","ERROR_CODE_OPENLINES_WRITE_ACCESS_DENIED","handlerToggleSwitcher","selection","window","getSelection","toString","parentElement","handlerToggleCodeBlock","currentTarget","closest","toggleBtn","blockCode","style","scrollHeight","removeClass","Event","unbind","transitionHandlerForCodeBlock","bind","Widget","formId","options","prototype","actionGet","load","Promise","resolve","ajax","runAction","json","count","widgetsCount","then","response","catch","renderError","innerHTML","headerSection","renderHeader","replace","renderPreview","renderWidgets","renderFinalBlock","renderTo","node","Error","responseData","errorMessage","isObject","error","status","code","previewLink","allIds","Object","keys","widgets","contentInner","length","renderEmptyInner","renderWidgetRows","formName","formType","currentFormName","currentFormType","widgetsList","widgetIds","getOrderedWidgetIds","forEach","id","widget","sort","a","b","aData","bData","checked","createSwitcher","inputName","switcherNode","document","createElement","className","UI","Switcher","switcher","handlers","toggled","formNames","relatedFormNames","sFormType","sFormNames","isArray","join","sFormNamesField","row","name","getNode","formTypeLangKey","toUpperCase","hasMessage","widgetId","setLoading","dataSetOld","formNameOld","formTypeOld","dataSetCurrent","isChecked","buttonId","assigned","check","Notification","Center","notify","messageId","assign","formTypeMessage","textContent","setAttribute","Openlines","lines","renderLineRows","renderAccessDeniedAlert","linesList","lineIds","formEnabled","lineId","lineName","Form","dataProvider","force","reject","save","renderSettingsHeader","expertMode","headingBox","heading","renderCodeBlock","updateDependentFields","containerVertical","hide","containerButtonStyle","containerLinkStyle","containerButtonPosition","containerLinkPosition","Inline","console","scripts","getSvg","option","isElement","Node","isElementList","nodeList","NodeList","eachNode","callback","i","arrayAsSelector","array","Array","selector","nodeListAsArray","nodes","push","findParentBySelector","$el","self","$root","querySelectorAll","indexOf","elementHasSelector","has","elementHasOverflowHidden","computedStyle","getComputedStyle","overflowIsHidden","overflow","elementScrollTopOnStart","scrollTop","elementScrollTopOnEnd","scrollTopWithHeight","offsetHeight","elementScrollLeftOnStart","scrollLeft","elementScrollLeftOnEnd","scrollWidth","scrollLeftWithWidth","offsetWidth","elementIsScrollableField","elementIsInputRange","FILL_GAP_AVAILABLE_METHODS","TOUCH_DIRECTION_DETECT_OFFSET","state","scroll","queue","scrollableSelectors","lockableSelectors","fillGapSelectors","fillGapMethod","startTouchY","startTouchX","getScrollState","getTargetScrollBarWidth","$target","onlyExists","currentOverflowYProperty","overflowY","scrollLockSavedOverflowYProperty","getCurrentTargetScrollBarWidth","body","documentWidth","documentElement","clientWidth","windowWidth","innerWidth","currentWidth","borderLeftWidthCurrentProperty","borderLeftWidth","borderRightWidthCurrentProperty","borderRightWidth","refillGaps","fillGaps","map","fillGapSelector","$targets","isLockable","fillGapTarget","scrollBarWidth","scrollLockLockable","$lockableParent","scrollLockFilledGap","unfillGapTarget","scrollLockCurrentFillGapMethod","currentMargin","parseFloat","marginRight","maxWidth","currentPadding","paddingRight","currentFillGapMethod","onResize","e","onTouchStart","touches","clientY","clientX","onTouchMove","currentClientY","currentClientX","direction","up","down","left","right","directionWithOffset","handle","skip","parentScrollableEl","prevent","onTouchEnd","addEventListener","passive","Color","parseHex","hex","fillHex","parts","exec","parseInt","hexToRgba","toRgba","numbers","fillAlpha","alpha","substr","toLowerCase","isHexDark","r","g","brightness","getHexFromOpacity","opacity","isString","includes","Number","Math","round","openFeedbackForm","Feedback","open","forms","zones","lang","sec","mode","Controls","renderDropdown","handler","attr","setOptions","size","renderLabel","keyName","select","entries","renderText","advanced","handlerShowSaveBtn","afterIcon","input","bindOnce","renderTypeface","forValue","extended","getAttribute","animateSwitching","renderSquareButton","key","renderButton","renderLink","renderSwitcher","switcherId","renderColorPicker","subtype","ColorField","getValue","hexA","getHex","getOpacity","colorPicker","createColorPicker","setValue","getLayout","renderOptionTitle","buttonSetting","onChange","onReset","loaderTarget","targetWidth","targetHeight","resetPadding","handlerToggleClickMode","headerBlock","moreSettingsBtn","transitionHandlerForSettingsSection","Wizard","EventEmitter","setEventNamespace","renderControlContainer","item","renderRow","last","renderBlock","block","renderCol","first","col","renderTitle","line","Renderer","renderOptionTo","instantSave","funcName","fieldOptions","fieldValue","isFunction","renderOption","renderColorInline","renderColorPopup","picker","PopupWindow","bindElement","autoHide","closeByEsc","getStyle","valueHex","fgColor","getThemeClass","getOptionKeyName","colorBox","subscribe","innerText","promises","field","all","BaseEvent","emitAsync","aNames","split","updatedValues","buildOption","names","nextName","shift","emit","defaultValue","aName","part","concat","charAt","slice","renderFieldDelay","val","renderFieldType","renderFieldPosition","controlOptions","handlerLeft","handlerCenter","handlerRight","getOptionValueName","renderFieldVertical","handlerBottom","handlerTop","renderFieldButtonStyle","handlerPm","handlerPmr","handlerLb","handlerLbr","controlMode","renderFieldButtonDecoration","handlerNoBorder","handlerDotted","handlerLine","renderFieldButtonFont","handlerModern","handlerClassic","handlerElegant","renderFieldButtonAlign","renderFieldLinkAlign","handlerInline","renderFieldButtonPlain","renderFieldButtonText","renderFieldButtonColorBackground","fields","renderFieldButtonColorBackgroundHover","renderFieldButtonColorText","renderFieldButtonColorTextHover","renderFieldButtonUse","optionName","result","msgKey","keySplit","getDictValues","nextKey","dictValues","Auto","renderBaseSettings","SidePanel","Instance","cacheable","contentCallback","events","onCloseComplete","wrapper","layoutContent","Layout","createContent","extensions","design","toolbar","Button","LIGHT_BORDER","onclick","buttons","SaveButton","ApplyButton","cancelButton","setWaiting","close","stepperInner","containerPosition","containerPositionVertical","stepperContent","html","header","Click","renderFormSettings","renderButtonSettings","formSettings","enhancedMode","containerPlainAndText","optionLinkStyle","optionButtonStyle","rowButtonSettings","colBtnColor","colTxtColor","rowDesign","subscribeOnce","getUrl","containerText","containerTypeAndText","step1","rowFont","stepButtonFont","stepColor","containerColorBg","containerColorBgHover","containerColorText","containerColorTextHover","getColorLabel","label","step4","step4Message","Publink","pubLink","DEFAULT_WIDGETS_COUNT","Embed","openSlider","activeMenuItemId","instance","sliderOptions","onLoad","menu","items","active","closeButton","tabName"],"mappings":"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"}