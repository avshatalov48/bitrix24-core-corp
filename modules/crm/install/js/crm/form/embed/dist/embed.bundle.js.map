{"version":3,"file":"embed.bundle.js","sources":["../src/data_provider.js","../src/tab.js","../src/errors.js","../src/handler.js","../src/tab/widget.js","../src/tab/openlines.js","../src/tab/form/form.js","../src/tab/form/inline.js","../src/wizard/svg.js","../src/util.js","../src/wizard/controls.js","../src/wizard/handler.js","../src/wizard/wizard.js","../src/tab/form/auto.js","../src/tab/form/click.js","../src/tab/form/publink.js","../src/tab/form/index.js","../src/index.js"],"sourcesContent":["import {Type} from 'main.core';\nimport {EmbedDataValues, EmbedDataOptions, EmbedDict} from \"./types\";\n\n/**\n * @package\n */\nexport class DataProvider\n{\n\t#data: Object = {\n\t\tloaded: false,\n\t\tdata: {},\n\t\terrors: {},\n\t};\n\n\tupdateValues(type: string, values: Object): undefined\n\t{\n\t\tif (type === 'click')\n\t\t{\n\t\t\tif (values.button.plain === '1' && Type.isStringFilled(values?.link?.align))\n\t\t\t{\n\t\t\t\tvalues.button.align = values.link.align;\n\t\t\t}\n\t\t\tdelete values.link;\n\t\t}\n\n\t\tthis.data.embed.viewValues[type] = values;\n\t}\n\n\tgetValues(type: string): EmbedDataValues\n\t{\n\t\tconst values = this.data.embed.viewValues[type];\n\n\t\tif (type === 'click' && Type.isStringFilled(values?.button?.align))\n\t\t{\n\t\t\tvalues.link = {align: values?.button?.align};\n\t\t}\n\t\t\n\t\treturn BX.mergeEx(this.#getDefaultValues(type), values);\n\t}\n\n\tgetOptions(type: string): EmbedDataOptions\n\t{\n\t\treturn this.data.embed.viewOptions[type];\n\t}\n\n\tgetDict(): EmbedDict\n\t{\n\t\tconst dict = this.data.dict;\n\t\tdict.viewOptions.link = {aligns: dict?.viewOptions?.button?.aligns};\n\t\treturn dict;\n\t}\n\n\t/**\n\t * @package\n\t */\n\tget data(): Object\n\t{\n\t\treturn this.#data.data;\n\t}\n\n\t/**\n\t * @package\n\t */\n\tset data(data: Object)\n\t{\n\t\tthis.#data.data = data;\n\t}\n\n\t/**\n\t * @package\n\t */\n\tget errors(): Object\n\t{\n\t\treturn this.#data.errors;\n\t}\n\n\t/**\n\t * @package\n\t */\n\tset errors(errors: Object)\n\t{\n\t\tthis.#data.errors = errors;\n\t}\n\n\t/**\n\t * @package\n\t */\n\tget loaded(): boolean\n\t{\n\t\treturn this.#data.loaded || false;\n\t}\n\n\t/**\n\t * @package\n\t */\n\tset loaded(value: boolean)\n\t{\n\t\tthis.#data.loaded = value;\n\t}\n\n\t#getDefaultValues(type: string): EmbedDataValues\n\t{\n\t\tconst defaults = {\n\t\t\tinline: {},\n\t\t\tauto: {}, // 'type', 'position', 'vertical', 'delay'\n\t\t\tclick: {\n\t\t\t\t// 'type', 'position', 'vertical',\n\t\t\t\tbutton: {\n\t\t\t\t\tuse: \"0\", // 1|0\n\t\t\t\t\ttext: BX.Loc.getMessage('EMBED_SLIDER_OPTION_BUTTONSTYLE_LABEL'),\n\t\t\t\t\tfont: \"modern\", // modern|classic|elegant\n\t\t\t\t\talign: \"center\", // left|right|center|inline\n\t\t\t\t\tplain: \"0\",\n\t\t\t\t\trounded: \"0\",\n\t\t\t\t\toutlined: \"0\",\n\t\t\t\t\tdecoration: \"\", // \"\"|dotted|solid\n\t\t\t\t\tcolor: {\n\t\t\t\t\t\ttext: \"#ffffffff\",\n\t\t\t\t\t\ttextHover: \"#ffffffff\",\n\t\t\t\t\t\tbackground: \"#3eddffff\",\n\t\t\t\t\t\tbackgroundHover: \"#3eddffa6\",\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\n\t\treturn !Type.isUndefined(defaults[type])\n\t\t\t? defaults[type]\n\t\t\t: {}\n\t\t;\n\t}\n}","import {Tag, Dom, Text, Type} from 'main.core';\nimport \"main.qrcode\";\nimport {StepByStep} from 'ui.stepbystep';\nimport 'ui.switcher';\nimport 'main.loader';\n\n// fallback values\nexport const HELP_CENTER_ID = 13003062;\nexport const HELP_CENTER_URL = 'https://helpdesk.bitrix24.ru/open/' + HELP_CENTER_ID;\n\nexport class Tab {\n\n\t#loader;\n\n\tconstructor()\n\t{\n\t\tthis.#loader = new BX.Loader();\n\t}\n\n\tget loader(): Loader\n\t{\n\t\treturn this.#loader;\n\t}\n\n\trenderBubble(text: string, withoutFrame: boolean = false): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"crm-form-embed__customization-info\">\n\t\t\t\t<div class=\"crm-form-embed__customization-info--avatar\">\n\t\t\t\t\t<img src=\"/bitrix/js/crm/images/crm-form-info-avatar.svg\" alt=\"avatar\">\n\t\t\t\t</div>\n\t\t\t\t<div class=\"crm-form-embed__customization-info--text ${withoutFrame ? '--without-frame' : ''}\">${text}</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\trenderCopySection(\n\t\ttitle: string = null,\n\t\tbtnText: string = null,\n\t\tcopyText: string = null,\n\t\tinnerContent: HTMLElement = null,\n\t\ticonClass: string = null\n\t): HTMLElement\n\t{\n\t\tconst section = this.renderSection();\n\n\t\tif (!Type.isNull(title))\n\t\t{\n\t\t\tDom.append(Tag.render`\n\t\t\t\t\t<div class=\"crm-form-embed__title-block\">\n\t\t\t\t\t\t<div class=\"ui-slider-heading-4 --no-border-bottom\">${Text.encode(title)}</div>\n\t\t\t\t\t</div>\n\t\t\t`, section);\n\t\t}\n\n\t\tconst inner = Tag.render`<div class=\"crm-form-embed__copy-block\"></div>`;\n\n\t\tif (Type.isDomNode(innerContent))\n\t\t{\n\t\t\tDom.append(innerContent, inner);\n\t\t}\n\n\t\tif (!Type.isNull(btnText) && !Type.isNull(copyText))\n\t\t{\n\t\t\tDom.append(Tag.render`\n\t\t\t\t<div class=\"crm-form-embed__btn-box --center\">\n\t\t\t\t\t<button\n\t\t\t\t\t\tclass=\"crm-form-embed-btn-copy-publink ui-btn ui-btn-lg ui-btn-primary ui-btn-round ${iconClass ? iconClass : ''}\">\n\t\t\t\t\t\t\t${Text.encode(btnText)}\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t`, inner);\n\n\t\t\ttop.BX.clipboard.bindCopyClick(\n\t\t\t\tinner.querySelector('.crm-form-embed-btn-copy-publink'),\n\t\t\t\t{\n\t\t\t\t\ttext: copyText,\n\t\t\t\t\tpopup: {\n\t\t\t\t\t\toffsetLeft: 60,\n\t\t\t\t\t},\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\tDom.append(inner, section);\n\n\t\treturn section;\n\t}\n\n\trenderPreviewSection(title: string, desc: string, btn: string, url: string): HTMLElement\n\t{\n\t\tconst qr = Tag.render`<div class=\"crm-form-embed__qr-block--qr\"></div>`;\n\t\tnew QRCode(qr, {\n\t\t\ttext: url,\n\t\t\twidth: 147,\n\t\t\theight: 147,\n\t\t});\n\n\t\tconst section = this.renderSection();\n\t\tDom.addClass(section, '--crm-qr-bg');\n\t\tDom.append(\n\t\t\tTag.render`\n\t\t\t\t<div class=\"crm-form-embed__qr-block\">\n\t\t\t\t\t<div class=\"crm-form-embed__qr-block--info\">\n\t\t\t\t\t\t<div class=\"crm-form-embed__qr-block--info-name\">${Text.encode(title)}</div>\n\t\t\t\t\t\t<div class=\"crm-form-embed__qr-block--info-text\">\n\t\t\t\t\t\t\t<div class=\"ui-icon ui-icon-service-light-messenger ui-icon-md\" style=\"float: left; margin-right: 10px;\"><i></i></div>\n\t\t\t\t\t\t\t${Text.encode(desc)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-light-border ui-btn-round crm-form-embed__qr-block--btn\"\n\t\t\t\t\t\t\tonclick=\"window.open('${Text.encode(url)}');\">\n\t\t\t\t\t\t\t\t${Text.encode(btn)}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"crm-form-embed__qr-block\">\n\t\t\t\t\t\t${qr}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`,\n\t\t\tsection\n\t\t);\n\t\treturn section;\n\t}\n\n\t/**\n\t * @protected\n\t */\n\trenderHeaderSection(icon: string, title: string, text: string, helpCenterId: number, helpCenterUrl: string): HTMLElement\n\t{\n\t\tconst section = this.renderSection(null, true, true);\n\t\tDom.append(Tag.render`\n\t\t\t<span class=\"ui-icon ui-slider-icon ui-icon-service-${Text.encode(icon)}\">\n\t\t\t\t<i></i>\n\t\t\t</span>\n\t\t`, section);\n\t\tDom.append(Tag.render`\n\t\t\t<div class=\"ui-slider-content-box\">\n\t\t\t\t<div class=\"ui-slider-heading-2\">${Text.encode(title)}</div>\n\t\t\t\t<div class=\"ui-slider-inner-box\">\n\t\t\t\t\t<p class=\"ui-slider-paragraph-2 crm-form-embed-header-section\">${Text.encode(text)}</p>\n\t\t\t\t\t${this.renderHelp(helpCenterId, helpCenterUrl)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`, section);\n\t\treturn section;\n\t}\n\n\trenderStepperSection(content: Array): HTMLElement\n\t{\n\t\tconst section = this.renderSection();\n\n\t\tconst step = new StepByStep({\n\t\t\ttarget: section,\n\t\t\tcontent: content,\n\t\t});\n\t\tstep.init();\n\n\t\treturn section;\n\t}\n\n\t/**\n\t * @protected\n\t * @param elem HTMLElement\n\t * @param rounding boolean\n\t * @param withIcon boolean\n\t */\n\trenderSection(elem, rounding: boolean = true, withIcon: boolean = false): HTMLElement\n\t{\n\t\tconst section = Tag.render`\n\t\t\t<div \n\t\t\t\tclass=\"\n\t\t\t\t\tui-slider-section\n\t\t\t\t\t${rounding ? '--rounding' : ''}\n\t\t\t\t\t${withIcon ? 'ui-slider-section-icon --icon-sm' : ''}\n\t\t\t\t\"\n\t\t\t></div>\n\t\t`;\n\n\t\tif (Type.isDomNode(elem))\n\t\t{\n\t\t\tDom.append(elem, section);\n\t\t}\n\n\t\treturn section;\n\t}\n\n\t/**\n\t * @protected\n\t * @param elem HTMLElement\n\t */\n\trenderContainer(elem): HTMLElement\n\t{\n\t\tconst container = Tag.render`<div class=\"crm-form-embed__wrapper crm-form-embed__scope\"></div>`;\n\t\tif (Type.isDomNode(elem))\n\t\t{\n\t\t\tDom.append(elem, container);\n\t\t}\n\t\treturn container;\n\t}\n\n\trenderHelp(\n\t\thelpCenterId: number,\n\t\thelpCenterUrl: string,\n\t\tcaption: string = BX.Loc.getMessage('EMBED_SLIDER_MORE_INFO')\n\t): HTMLElement\n\t{\n\t\tconst showHelp = function (event): false\n\t\t{\n\t\t\tif(top.BX.Helper)\n\t\t\t{\n\t\t\t\ttop.BX.Helper.show(\"redirect=detail&code=\" + this.dataset.helpId);\n\t\t\t\tevent.preventDefault();\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\n\t\treturn Tag.render`\n\t\t\t<a\n\t\t\t\tdata-help-id=\"${Text.encode(helpCenterId)}\"\n\t\t\t\tonclick=\"${showHelp}\"\n\t\t\t\thref=\"${Text.encode(helpCenterUrl)}\"\n\t\t\t\tclass=\"ui-slider-link\" target=\"_blank\"\n\t\t\t>\n\t\t\t\t${Text.encode(caption)}\n\t\t\t</a>\n\t\t`;\n\t}\n}","export const ERROR_CODE_FORM_READ_ACCESS_DENIED = 1;\nexport const ERROR_CODE_FORM_WRITE_ACCESS_DENIED = 2;\nexport const ERROR_CODE_WIDGET_READ_ACCESS_DENIED = 3;\nexport const ERROR_CODE_WIDGET_WRITE_ACCESS_DENIED = 4;\nexport const ERROR_CODE_OPENLINES_READ_ACCESS_DENIED = 5;\nexport const ERROR_CODE_OPENLINES_WRITE_ACCESS_DENIED = 6;","import {Dom, Text, Event} from 'main.core';\n\nexport function handlerToggleSwitcher()\n{\n\tconst selection = window.getSelection().toString();\n\tif (selection === \"\")\n\t{\n\t\tthis.parentElement.querySelector('.crm-form-embed-widgets-control > .ui-switcher').click();\n\t}\n}\n\nexport function handlerToggleCodeBlock(event)\n{\n\tconst section = event.currentTarget.closest('.ui-slider-section');\n\tconst toggleBtn = section.querySelector('[data-roll=\"data-show-code\"]');\n\tconst blockCode = section.querySelector('[data-roll=\"crm-form-embed__code\"]');\n\n\tif (Dom.style(blockCode, 'height') === \"0px\")\n\t{\n\t\tDom.addClass(toggleBtn, \"--up\");\n\t\tDom.addClass(blockCode, \"--open\");\n\t\tDom.style(blockCode, \"height\", Text.encode(blockCode.scrollHeight) + \"px\");\n\t}\n\telse\n\t{\n\t\tDom.removeClass(toggleBtn, \"--up\");\n\t\tDom.removeClass(blockCode, \"--open\");\n\t\tDom.style(blockCode, \"height\", Text.encode(blockCode.scrollHeight) + \"px\");\n\t\t// blockCode.clientHeight;\n\t\tDom.style(blockCode, \"height\", \"0\");\n\t}\n\n\tEvent.unbind(blockCode, 'transitionend', transitionHandlerForCodeBlock);\n\tEvent.bind(blockCode, 'transitionend', transitionHandlerForCodeBlock);\n}\n\nfunction transitionHandlerForCodeBlock(event)\n{\n\tconst section = event.currentTarget.closest('.ui-slider-section');\n\tconst blockCode = section.querySelector('[data-roll=\"crm-form-embed__code\"]');\n\tif (Dom.style(blockCode, \"height\") !== \"0px\") {\n\t\tDom.style(blockCode, \"height\", \"auto\");\n\t}\n}","import {Tag, Type, Text, Dom} from 'main.core';\nimport {Tab, HELP_CENTER_ID, HELP_CENTER_URL} from \"../tab\";\nimport type {WidgetOptions, WidgetsData, WidgetsList, Widget as Button} from \"../types\";\nimport {\n\tERROR_CODE_FORM_READ_ACCESS_DENIED,\n\tERROR_CODE_WIDGET_READ_ACCESS_DENIED,\n\tERROR_CODE_WIDGET_WRITE_ACCESS_DENIED\n} from \"../errors\";\nimport \"ui.switcher\";\nimport {handlerToggleSwitcher} from '../handler';\n\nexport class Widget extends Tab\n{\n\t#formId: number;\n\t#options: WidgetOptions;\n\t#loaded: boolean = false;\n\t#data: WidgetsData;\n\t#errors: Object;\n\t#container: HTMLElement;\n\n\tconstructor(formId: number, options: WidgetOptions = {})\n\t{\n\t\tsuper();\n\t\tthis.#formId = formId;\n\t\tthis.#options = options;\n\t\tWidget.prototype.actionGet = 'crm.form.getWidgetsForEmbed';\n\t\tthis.#container = this.renderContainer();\n\t}\n\n\tget formId(): number\n\t{\n\t\treturn this.#formId;\n\t}\n\n\tload(): Promise\n\t{\n\t\tif (this.#loaded)\n\t\t{\n\t\t\treturn Promise.resolve();\n\t\t}\n\n\t\treturn BX.ajax.runAction(this.actionGet, {\n\t\t\tjson: {\n\t\t\t\tformId: this.#formId,\n\t\t\t\tcount: this.#options.widgetsCount,\n\t\t\t}\n\t\t}).then(response => {\n\t\t\tthis.#data = response.data;\n\t\t\tthis.#loaded = true;\n\t\t\tthis.render();\n\t\t}).catch(response => {\n\t\t\tthis.#data = response.data;\n\t\t\tthis.#errors = response.errors;\n\t\t\tthis.#loaded = false;\n\t\t\tthis.renderError(response.data);\n\t\t});\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tthis.#container.innerHTML = '';\n\t\tconst headerSection = this.renderHeader(HELP_CENTER_ID, HELP_CENTER_URL);\n\t\tDom.append(headerSection, this.#container);\n\n\t\tif (!this.#loaded)\n\t\t{\n\t\t\tthis.loader.show(this.#container);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.replace(headerSection, this.renderHeader(\n\t\t\t\tthis.#data.helpCenterId,\n\t\t\t\tthis.#data.helpCenterUrl\n\t\t\t));\n\t\t\tthis.renderPreview(this.#container, this.#data);\n\t\t\tDom.append(this.renderWidgets(this.#data), this.#container);\n\t\t\tthis.renderFinalBlock(this.#container);\n\t\t}\n\n\t\treturn this.#container;\n\t}\n\n\trenderTo(node: HTMLElement): undefined\n\t{\n\t\tif (!Type.isDomNode(node))\n\t\t{\n\t\t\tthrow new Error('Parameter `node` not an element.');\n\t\t}\n\n\t\tDom.append(this.render(), node);\n\t}\n\n\trenderError(responseData: Object): HTMLElement\n\t{\n\t\tthis.#container.innerHTML = '';\n\n\t\tlet errorMessage = BX.Loc.getMessage('EMBED_SLIDER_GENERAL_ERROR');\n\n\t\tif (Type.isObject(responseData) && Type.isObject(responseData.error) && responseData.error.status === 'access denied')\n\t\t{\n\t\t\tif (responseData.error.code === ERROR_CODE_FORM_READ_ACCESS_DENIED) {\n\t\t\t\terrorMessage = BX.Loc.getMessage('EMBED_SLIDER_FORM_ACCESS_DENIED');\n\t\t\t}\n\n\t\t\tif (responseData.error.code === ERROR_CODE_WIDGET_READ_ACCESS_DENIED) {\n\t\t\t\terrorMessage = BX.Loc.getMessage('EMBED_SLIDER_WIDGET_ACCESS_DENIED');\n\t\t\t}\n\t\t}\n\n\t\tDom.append(Tag.render`\n\t\t\t<div class=\"ui-alert ui-alert-warning\">\n\t\t\t\t<span class=\"ui-alert-message\">${errorMessage}</span>\n\t\t\t</div>\n\t\t`, this.#container);\n\t}\n\t\n\trenderPreview(container: HTMLElement, data: WidgetsData): undefined\n\t{\n\t\tif (!Type.isNull(data.previewLink))\n\t\t{\n\t\t\tDom.append(\n\t\t\t\tthis.renderPreviewSection(\n\t\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_QR_TITLE'),\n\t\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_QR_DESC'),\n\t\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_OPEN_IN_NEW_TAB'),\n\t\t\t\t\tdata.previewLink\n\t\t\t\t),\n\t\t\t\tcontainer\n\t\t\t);\n\t\t}\n\t}\n\n\trenderFinalBlock(container: HTMLElement): undefined\n\t{\n\t\tDom.append(\n\t\t\tthis.renderCopySection(\n\t\t\t\tnull,\n\t\t\t\tnull,\n\t\t\t\tnull,\n\t\t\t\tthis.renderBubble(BX.Loc.getMessage('EMBED_SLIDER_WIDGET_COPY_BUBBLE'), true),\n\t\t\t),\n\t\t\tcontainer\n\t\t);\n\t}\n\n\trenderHeader(helpCenterId: number, helpCenterUrl: string): HTMLElement\n\t{\n\t\treturn this.renderHeaderSection(\n\t\t\t'message-widget',\n\t\t\tBX.Loc.getMessage('EMBED_SLIDER_WIDGET_TITLE'),\n\t\t\tBX.Loc.getMessage('EMBED_SLIDER_WIDGET_DESC'),\n\t\t\thelpCenterId,\n\t\t\thelpCenterUrl\n\t\t);\n\t}\n\n\trenderWidgets(data: WidgetsData): HTMLElement\n\t{\n\t\tconst section = this.renderSection();\n\t\tDom.append(Tag.render`\n\t\t\t<div class=\"crm-form-embed__title-block\">\n\t\t\t\t<div class=\"ui-slider-heading-4\">${BX.Loc.getMessage('EMBED_SLIDER_WIDGET_SETTINGS_TITLE')}</div>\n\t\t\t</div>\n\t\t`, section);\n\t\t// Dom.append(\n\t\t// \tthis.renderBubble(\"text\", false),\n\t\t// \tsection\n\t\t// );\n\n\t\tconst allIds = Object.keys(data.widgets);\n\t\tconst contentInner = allIds.length === 0\n\t\t\t? this.renderEmptyInner()\n\t\t\t: this.renderWidgetRows(data.widgets, data.formName, data.formType);\n\n\t\t// let showMoreLink = '';\n\t\t// if (data.showMoreLink)\n\t\t// {\n\t\t// \tconst allWidgetsUrl = Type.isStringFilled(data.url.allWidgets) ? data.url.allWidgets : '/crm/button/';\n\t\t// \tshowMoreLink = Tag.render`\n\t\t// \t\t<p class=\"crm-form-embed-widgets-all-buttons\">\n\t\t// \t\t\t<a href=\"${Text.encode(allWidgetsUrl)}\" target=\"_blank\" onclick=\"BX.SidePanel.Instance.open('${Text.encode(allWidgetsUrl)}'); return false;\">\n\t\t// \t\t\t\t${BX.Loc.getMessage('EMBED_SLIDER_WIDGET_FORM_ALL_WIDGETS')}\n\t\t// \t\t\t</a>\n\t\t// \t\t</p>\n\t\t// \t`;\n\t\t// }\n\n\t\tDom.append(\n\t\t\tTag.render`\n\t\t\t\t<div class=\"crm-form-embed__customization-settings\">\n\t\t\t\t\t${contentInner}\n\n\t\t\t\t\t<button\n\t\t\t\t\t\tclass=\"ui-btn ui-btn-sm ui-btn-light-border ui-btn-round ui-btn-no-caps ui-btn-icon-add crm-form-embed__customization-settings--btn crm-form-embed__customization-settings--btn-add\"\n\t\t\t\t\t\tonclick=\"window.open('/crm/button/edit/0/')\"\n\t\t\t\t\t>\n\t\t\t\t\t\t${BX.Loc.getMessage('EMBED_SLIDER_WIDGET_SETTINGS_BUTTON')}\n\t\t\t\t\t</button>\n\n\t\t\t\t\t<a\n\t\t\t\t\t\tclass=\"ui-btn ui-btn-sm ui-btn-light-border ui-btn-round ui-btn-no-caps crm-form-embed__customization-settings--btn\"\n\t\t\t\t\t\thref=\"${Text.encode(data.url.allWidgets)}\"\n\t\t\t\t\t\tstyle=\"float: right\"\n\t\t\t\t\t>\n\t\t\t\t\t\t${BX.Loc.getMessage('EMBED_SLIDER_WIDGET_FORM_ALL_WIDGETS')}\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t`,\n\t\t\tsection\n\t\t);\n\t\treturn section;\n\t}\n\n\trenderEmptyInner(): string\n\t{\n\t\treturn BX.Loc.getMessage('EMBED_SLIDER_WIDGET_EMPTY');\n\t}\n\n\trenderWidgetRows(widgets: WidgetsList, currentFormName: string, currentFormType: string): HTMLElement\n\t{\n\t\t// TODO remove data-attr and div\n\t\tconst widgetsList = Tag.render`<div class=\"crm-form-embed-widgets\" data-form-name=\"${Text.encode(currentFormName)}\" data-form-type=\"${Text.encode(currentFormType)}\"></div>`;\n\t\tconst widgetIds = Widget.getOrderedWidgetIds(widgets);\n\t\twidgetIds.forEach(id => {\n\t\t\tconst widget = widgets[id];\n\t\t\twidgetsList.append(Widget.#renderWidgetRow(widget, this.#formId, currentFormType));\n\t\t});\n\t\treturn widgetsList;\n\t}\n\n\tstatic #renderWidgetRow(widget: Button, formId: number, currentFormType: string): HTMLElement\n\t{\n\t\tconst switcher = Widget.createSwitcher(widget.checked, 'crm-form-embed-widget-input-' + widget.id);\n\t\tswitcher.handlers = {\n\t\t\ttoggled: Widget.#handleSwitcher.bind(switcher, formId, widget.id),\n\t\t};\n\n\t\tconst formNames = Object.values(widget.relatedFormNames);\n\t\tconst sFormType = Widget.#getFormTypeMessage(currentFormType);\n\t\tconst sFormNames = Type.isArray(formNames) && formNames.length > 0\n\t\t\t? formNames.join(', ')\n\t\t\t: ''\n\t\t;\n\t\tconst sFormNamesField = sFormNames.length > 0 ? sFormType + ': ' + sFormNames : '';\n\t\tconst row = Tag.render`\n\t\t\t<div class=\"crm-form-embed__customization-settings--row crm-form-embed-widgets-block\">\n\t\t\t\t<div class=\"crm-form-embed__customization-settings--switcher crm-form-embed-widgets-control\"></div>\n\t\t\t\t<div class=\"crm-form-embed__customization-settings--row-label\" onclick=\"${handlerToggleSwitcher}\">\n\t\t\t\t\t${Text.encode(widget.name)}\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tclass=\"crm-form-embed-widgets-detail crm-form-embed__customization-settings--row-label-secondary\"\n\t\t\t\t\ttitle=\"${Text.encode(sFormNamesField)}\"\n\t\t\t\t\tdata-form-name=\"${Text.encode(sFormNames)}\"\n\t\t\t\t\tdata-form-type=\"${Text.encode(sFormType)}\"\n\t\t\t\t>\n\t\t\t\t\t${Text.encode(sFormNamesField)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t\trow.querySelector('.crm-form-embed-widgets-control').append(switcher.getNode());\n\t\treturn row;\n\t}\n\n\tstatic getOrderedWidgetIds(widgets: WidgetsList): Array\n\t{\n\t\tconst widgetIds = Object.keys(widgets);\n\t\twidgetIds.sort((a, b) => {\n\t\t\tconst aData = widgets[a];\n\t\t\tconst bData = widgets[b];\n\t\t\tswitch (true)\n\t\t\t{\n\t\t\t\tcase (aData.checked && bData.checked) || (! aData.checked && ! bData.checked):\n\t\t\t\t\treturn 0;\n\t\t\t\tcase aData.checked && ! bData.checked:\n\t\t\t\t\treturn -1;\n\t\t\t\tcase ! aData.checked && bData.checked:\n\t\t\t\t\treturn 1;\n\t\t\t}\n\t\t});\n\t\treturn widgetIds;\n\t}\n\n\tstatic #getFormTypeMessage(formType: string): string\n\t{\n\t\tconst formTypeLangKey = 'EMBED_SLIDER_WIDGET_FORM_TYPE_MESSAGE_' + formType.toUpperCase();\n\t\treturn BX.Loc.hasMessage(formTypeLangKey) ? BX.Loc.getMessage(formTypeLangKey) : formType;\n\t}\n\n\t/**\n\t * @this Switcher\n\t * @param formId number\n\t * @param widgetId number\n\t */\n\tstatic #handleSwitcher(formId: number, widgetId: number): undefined\n\t{\n\t\tthis.setLoading(true);\n\n\t\t// save old widget values for rollback on error\n\t\tconst dataSetOld = this.getNode().closest('.crm-form-embed-widgets-block').querySelector('.crm-form-embed-widgets-detail').dataset;\n\t\tconst formNameOld = dataSetOld.formName;\n\t\tconst formTypeOld = dataSetOld.formType;\n\n\t\t// get values for current form\n\t\tconst dataSetCurrent = this.getNode().closest('.crm-form-embed-widgets').dataset;\n\t\tconst formName = dataSetCurrent.formName;\n\t\tconst formType = dataSetCurrent.formType;\n\n\t\t// set related forms field to new values\n\t\tWidget.#updateRelatedForms(this.isChecked(), formName, formType, this);\n\n\t\treturn BX.ajax.runAction('crm.form.assignWidgetToForm', {\n\t\t\tjson: {\n\t\t\t\tformId: formId,\n\t\t\t\tbuttonId: widgetId,\n\t\t\t\tassigned: this.isChecked() ? 'Y' : 'N',\n\t\t\t}\n\t\t}).then((response) => {\n\t\t\tthis.setLoading(false);\n\n\t\t\t// set to returned values (must match current)\n\t\t\tthis.check(response.data.assigned, false);\n\t\t\tWidget.#updateRelatedForms(this.isChecked(), response.data.formName, response.data.formType, this);\n\n\t\t\ttop.BX.UI.Notification.Center.notify({\n\t\t\t\tcontent: BX.Loc.getMessage('EMBED_SLIDER_OPENLINES_FORM_ALERT_SETTINGS_SAVED'),\n\t\t\t});\n\t\t}).catch((response) => {\n\t\t\tthis.setLoading(false);\n\n\t\t\t// rollback on error\n\t\t\tthis.check(! this.isChecked(), false);\n\t\t\tWidget.#updateRelatedForms(formNameOld.length > 0, formNameOld, formTypeOld, this);\n\n\t\t\tlet messageId = 'EMBED_SLIDER_WIDGET_FORM_ALERT_ERROR';\n\t\t\tif (!Type.isUndefined(response.data.error) && !Type.isUndefined(response.data.error.status) && response.data.error.status === 'access denied')\n\t\t\t{\n\t\t\t\tmessageId = response.data.error.code === ERROR_CODE_WIDGET_WRITE_ACCESS_DENIED\n\t\t\t\t\t? 'EMBED_SLIDER_WIDGET_FORM_ALERT_ERROR_ACCESS_DENIED_WIDGET'\n\t\t\t\t\t: 'EMBED_SLIDER_WIDGET_FORM_ALERT_ERROR_ACCESS_DENIED_FORM';\n\t\t\t}\n\n\t\t\ttop.BX.UI.Notification.Center.notify({\n\t\t\t\tcontent: BX.Loc.getMessage(messageId),\n\t\t\t});\n\t\t});\n\t}\n\n\tstatic #updateRelatedForms(assign: boolean, formName: string, formType: string, switcher: Switcher)\n\t{\n\t\tif (assign)\n\t\t{\n\t\t\tWidget.#setRelatedForms(switcher, formName, formType);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tWidget.#clearRelatedForms(switcher);\n\t\t}\n\t}\n\n\tstatic #setRelatedForms(switcher: Switcher, formName: string, formType: string)\n\t{\n\t\tconst formTypeMessage = Widget.#getFormTypeMessage(formType);\n\t\tconst elem = switcher.getNode().closest('.crm-form-embed-widgets-block').querySelector('.crm-form-embed-widgets-detail');\n\t\telem.textContent = formTypeMessage + ': ' + formName;\n\t\telem.setAttribute('data-form-name', formName);\n\t\telem.setAttribute('data-form-type', formTypeMessage);\n\t}\n\n\tstatic #clearRelatedForms(switcher: Switcher)\n\t{\n\t\tconst elem = switcher.getNode().closest('.crm-form-embed-widgets-block').querySelector('.crm-form-embed-widgets-detail');\n\t\telem.textContent = '';\n\t\telem.setAttribute('data-form-name', '');\n\t\telem.setAttribute('data-form-type', '');\n\t}\n\n\t/**\n\t * @protected\n\t */\n\tstatic createSwitcher(checked: boolean, inputName: string): Switcher\n\t{\n\t\tconst switcherNode = document.createElement('span');\n\t\tswitcherNode.className = 'ui-switcher';\n\t\treturn new top.BX.UI.Switcher({\n\t\t\tnode: switcherNode,\n\t\t\tchecked: checked,\n\t\t\tinputName: inputName,\n\t\t});\n\t}\n}","import {Tag, Text, Type, Dom} from 'main.core';\nimport {Widget} from './widget';\nimport type {OpenlinesData, LinesList, WidgetOptions} from \"../types\";\nimport \"ui.switcher\";\nimport {ERROR_CODE_OPENLINES_WRITE_ACCESS_DENIED} from \"../errors\";\nimport {handlerToggleSwitcher} from '../handler';\n\nexport class Openlines extends Widget\n{\n\tconstructor(formId: number, options: WidgetOptions = {})\n\t{\n\t\tsuper(formId, options);\n\t\tOpenlines.prototype.actionGet = 'crm.form.getOpenlinesForEmbed';\n\t}\n\n\trenderHeader(helpCenterId: number, helpCenterUrl: string): HTMLElement\n\t{\n\t\treturn this.renderHeaderSection(\n\t\t\t'message-widget',\n\t\t\tBX.Loc.getMessage('EMBED_SLIDER_OL_TITLE'),\n\t\t\tBX.Loc.getMessage('EMBED_SLIDER_OL_DESC'),\n\t\t\thelpCenterId,\n\t\t\thelpCenterUrl\n\t\t);\n\t}\n\n\trenderPreview(container: HTMLElement, data: OpenlinesData): undefined\n\t{\n\t\tif (!Type.isNull(data.previewLink))\n\t\t{\n\t\t\tDom.append(\n\t\t\t\tthis.renderPreviewSection(\n\t\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_QR_TITLE'),\n\t\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_QR_DESC'),\n\t\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_OPEN_IN_NEW_TAB'),\n\t\t\t\t\tdata.previewLink\n\t\t\t\t),\n\t\t\t\tcontainer\n\t\t\t);\n\t\t}\n\t}\n\n\trenderFinalBlock(container: HTMLElement): undefined {\n\t}\n\n\trenderWidgets(data: OpenlinesData): HTMLElement\n\t{\n\t\t// FIXME test, moved to error handler in widgets\n\t\t// if (Type.isNull(data))\n\t\t// {\n\t\t// \treturn this.renderAccessDeniedAlert();\n\t\t// }\n\n\t\tconst section = this.renderSection();\n\t\tDom.append(Tag.render`\n\t\t\t<div class=\"crm-form-embed__title-block\">\n\t\t\t\t<div class=\"ui-slider-heading-4\">${BX.Loc.getMessage('EMBED_SLIDER_OL_SETTINGS_TITLE')}</div>\n\t\t\t</div>\n\t\t`, section);\n\t\t// Dom.append(\n\t\t// \tthis.renderBubble(\"text\", false),\n\t\t// \tsection\n\t\t// );\n\n\t\tconst allIds = Object.keys(data.lines);\n\t\tconst contentInner = allIds.length === 0\n\t\t\t? this.renderEmptyInner()\n\t\t\t: this.renderLineRows(data.lines, data.formName);\n\n\t\t// let showMoreLink = '';\n\t\t// if (data.showMoreLink)\n\t\t// {\n\t\t// \tconst allLinesUrl = Type.isStringFilled(data.url.allLines) ? data.url.allLines : '/services/contact_center/openlines';\n\t\t// \tshowMoreLink = Tag.render`\n\t\t// \t\t<p class=\"crm-form-embed-widgets-all-buttons\">\n\t\t// \t\t\t<a href=\"${Text.encode(allLinesUrl)}\" target=\"_blank\" onclick=\"BX.SidePanel.Instance.open('${Text.encode(allLinesUrl)}'); return false;\">\n\t\t// \t\t\t\t${BX.Loc.getMessage('EMBED_SLIDER_OPENLINES_FORM_ALL_LINES')}\n\t\t// \t\t\t</a>\n\t\t// \t\t</p>\n\t\t// \t`;\n\t\t// }\n\n\t\tDom.append(Tag.render`\n\t\t\t<div class=\"crm-form-embed__customization-settings\"> <!-- --without-btn -->\n\t\t\t\t${contentInner}\n\t\t\t\t\n\t\t\t\t<a\n\t\t\t\t\tclass=\"ui-btn ui-btn-sm ui-btn-light-border ui-btn-round ui-btn-no-caps crm-form-embed__customization-settings--btn\"\n\t\t\t\t\thref=\"${Text.encode(data.url.allLines)}\"\n\t\t\t\t\tstyle=\"float: right;\"\n\t\t\t\t>\n\t\t\t\t\t${BX.Loc.getMessage('EMBED_SLIDER_OPENLINES_FORM_ALL_LINES')}\n\t\t\t\t</a>\n\t\t\t\t<div style=\"clear: both\"></div>\n\t\t\t</div>\n\t\t`, section);\n\t\treturn section;\n\t}\n\n\trenderEmptyInner(): string\n\t{\n\t\treturn BX.Loc.getMessage('EMBED_SLIDER_OPENLINES_EMPTY');\n\t}\n\n\trenderAccessDeniedAlert(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"ui-alert ui-alert-warning\">\n\t\t\t\t<span class=\"ui-alert-message\">${BX.Loc.getMessage('EMBED_SLIDER_OPENLINES_ACCESS_DENIED')}</span>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\trenderLineRows(lines: LinesList, currentFormName: string): HTMLElement\n\t{\n\t\tconst linesList = Tag.render`<div class=\"crm-form-embed-widgets\" data-form-name=\"${Text.encode(currentFormName)}\"></div>`;\n\t\tconst lineIds = Openlines.getOrderedWidgetIds(lines);\n\t\tlineIds.forEach(id => {\n\t\t\tconst data = lines[id];\n\t\t\tconst checked = data.formEnabled && data.checked;\n\t\t\tconst formName = data.formEnabled ? data.formName : '';\n\t\t\tlinesList.append(Openlines.#renderLineRow(data.id, data.name, formName, checked, this.formId));\n\t\t});\n\t\treturn linesList;\n\t}\n\n\tstatic #renderLineRow(lineId: number, lineName: string, formName: string, checked: boolean, formId: number): HTMLElement\n\t{\n\t\tconst switcher = Openlines.createSwitcher(checked, 'crm-form-embed-line-input-' + lineId);\n\t\tswitcher.handlers = {\n\t\t\ttoggled: Openlines.#handleSwitcher.bind(switcher, formId, lineId),\n\t\t};\n\n\t\tconst row = Tag.render`\n\t\t\t<div class=\"crm-form-embed__customization-settings--row crm-form-embed-widgets-block\">\n\t\t\t\t<div class=\"crm-form-embed__customization-settings--switcher crm-form-embed-widgets-control\"></div>\n\t\t\t\t<div class=\"crm-form-embed__customization-settings--row-label\" onclick=\"${handlerToggleSwitcher}\">\n\t\t\t\t\t${Text.encode(lineName)}\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tclass=\"crm-form-embed-widgets-detail crm-form-embed__customization-settings--row-label-secondary\"\n\t\t\t\t\ttitle=\"${Text.encode(formName)}\"\n\t\t\t\t\tdata-form-name=\"${Text.encode(formName)}\"\n\t\t\t\t>\n\t\t\t\t\t${Text.encode(formName)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t\trow.querySelector('.crm-form-embed-widgets-control').append(switcher.getNode());\n\t\treturn row;\n\t}\n\n\t/**\n\t * @this Switcher\n\t * @param formId number\n\t * @param lineId number\n\t */\n\tstatic #handleSwitcher(formId: number, lineId: number): undefined\n\t{\n\t\tthis.setLoading(true);\n\n\t\t// save old widget values for rollback on error\n\t\tconst formNameOld = this.getNode().closest('.crm-form-embed-widgets-block').querySelector('.crm-form-embed-widgets-detail').dataset.formName;\n\t\t// get values for current form\n\t\tconst formName = this.getNode().closest('.crm-form-embed-widgets').dataset.formName;\n\t\t// set related forms field to new values\n\t\tOpenlines.#updateRelatedOpenlineForms(this.isChecked() ? formName : '', this);\n\n\t\treturn BX.ajax.runAction('crm.form.assignOpenlinesToForm', {\n\t\t\tjson: {\n\t\t\t\tformId: formId,\n\t\t\t\tlineId: lineId,\n\t\t\t\tassigned: this.isChecked() ? 'Y' : 'N',\n\t\t\t\t// afterMessage: 'N',\n\t\t\t}\n\t\t}).then((response) => {\n\t\t\tthis.setLoading(false);\n\n\t\t\t// set to returned values (must match current)\n\t\t\tthis.check(response.data.assigned, false);\n\t\t\tOpenlines.#updateRelatedOpenlineForms(this.isChecked() ? response.data.formName : '', this);\n\n\t\t\ttop.BX.UI.Notification.Center.notify({\n\t\t\t\tcontent: BX.Loc.getMessage('EMBED_SLIDER_OPENLINES_FORM_ALERT_SETTINGS_SAVED'),\n\t\t\t});\n\t\t}).catch((response) => {\n\t\t\tthis.setLoading(false);\n\n\t\t\t// rollback on error\n\t\t\tthis.check(! this.isChecked(), false);\n\t\t\tOpenlines.#updateRelatedOpenlineForms(formNameOld.length > 0 ? formNameOld : '', this);\n\n\t\t\tlet messageId = 'EMBED_SLIDER_OPENLINES_FORM_ALERT_ERROR';\n\t\t\tif (!Type.isUndefined(response.data.error) && !Type.isUndefined(response.data.error.status) && response.data.error.status === 'access denied')\n\t\t\t{\n\t\t\t\tmessageId = response.data.error.code === ERROR_CODE_OPENLINES_WRITE_ACCESS_DENIED\n\t\t\t\t\t? 'EMBED_SLIDER_WIDGET_FORM_ALERT_ERROR_ACCESS_DENIED' // 'EMBED_SLIDER_WIDGET_FORM_ALERT_ERROR_ACCESS_DENIED_OPENLINES'\n\t\t\t\t\t: 'EMBED_SLIDER_WIDGET_FORM_ALERT_ERROR_ACCESS_DENIED_FORM';\n\t\t\t}\n\n\t\t\ttop.BX.UI.Notification.Center.notify({\n\t\t\t\tcontent: BX.Loc.getMessage(messageId),\n\t\t\t});\n\t\t});\n\t}\n\n\tstatic #updateRelatedOpenlineForms(formName: string, switcher: Switcher) {\n\t\tconst elem = switcher.getNode().closest('.crm-form-embed-widgets-block').querySelector('.crm-form-embed-widgets-detail');\n\t\telem.textContent = formName;\n\t\telem.setAttribute('data-form-name', formName);\n\t}\n}","import {Tag, Type, Text, Dom, Event} from 'main.core';\nimport {DataProvider} from \"../../data_provider\";\nimport {Tab} from \"../../tab\";\nimport {ERROR_CODE_FORM_READ_ACCESS_DENIED} from \"../../errors\";\nimport type {EmbedData} from \"../../types\";\nimport {handlerToggleCodeBlock} from '../../handler';\nimport \"ui.switcher\";\nimport \"ui.notification\";\n\nexport class Form extends Tab\n{\n\t#formId: number;\n\t#dataProvider: DataProvider;\n\n\tconstructor(formId: number, dataProvider: DataProvider)\n\t{\n\t\tsuper();\n\t\tthis.#formId = formId;\n\t\tthis.#dataProvider = dataProvider;\n\t}\n\n\tget dataProvider(): DataProvider\n\t{\n\t\treturn this.#dataProvider;\n\t}\n\n\tget loaded(): boolean\n\t{\n\t\treturn this.dataProvider.loaded;\n\t}\n\n\t/**\n\t * @protected\n\t * @deprecated this.dataProvider.data\n\t */\n\tget data(): EmbedData\n\t{\n\t\treturn this.dataProvider.data;\n\t}\n\n\t/**\n\t * @deprecated this.dataProvider.data\n\t */\n\tset data(data: EmbedData)\n\t{\n\t\tthis.dataProvider.data = data;\n\t}\n\n\tget formId(): number\n\t{\n\t\treturn this.#formId;\n\t}\n\n\tload(force: boolean = false): Promise\n\t{\n\t\tif (!force && this.dataProvider.loaded)\n\t\t{\n\t\t\treturn Promise.resolve();\n\t\t}\n\n\t\tif (Type.isObject(this.dataProvider.errors) && Object.keys(this.dataProvider.errors).length > 0)\n\t\t{\n\t\t\treturn Promise.reject();\n\t\t}\n\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tBX.ajax.runAction('crm.form.getEmbed', {\n\t\t\t\tjson: {\n\t\t\t\t\tformId: this.#formId\n\t\t\t\t}\n\t\t\t}).then(response => {\n\t\t\t\tthis.dataProvider.data = response.data;\n\t\t\t\tthis.dataProvider.loaded = true;\n\t\t\t\tresolve(response);\n\t\t\t}).catch(response => {\n\t\t\t\tthis.dataProvider.data = response.data;\n\t\t\t\tthis.dataProvider.errors = response.errors;\n\t\t\t\tthis.dataProvider.loaded = false;\n\t\t\t\treject(response);\n\t\t\t});\n\t\t});\n\t}\n\n\tsave(): Promise\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\treturn BX.ajax.runAction('crm.form.saveEmbed', {\n\t\t\t\tjson: {\n\t\t\t\t\tformId: this.formId,\n\t\t\t\t\tdata: this.dataProvider.data.embed.viewValues,\n\t\t\t\t}\n\t\t\t}).then((response) => {\n\t\t\t\t// TODO move to controls\n\t\t\t\t// const elem = renderedOptions.querySelector(`#crm-form-embed-wrapper-${formId}-${type}-vertical`);\n\t\t\t\t// if (key === \"type\")\n\t\t\t\t// {\n\t\t\t\t// \titem.value === \"popup\" && Dom.hide(elem);\n\t\t\t\t// \titem.value === \"panel\" && Dom.show(elem);\n\t\t\t\t// }\n\n\t\t\t\ttop.BX.UI.Notification.Center.notify({\n\t\t\t\t\tcontent: BX.Loc.getMessage('EMBED_SLIDER_OPENLINES_FORM_ALERT_SETTINGS_SAVED'),\n\t\t\t\t});\n\n\t\t\t\tresolve(response);\n\t\t\t}).catch((response) => {\n\t\t\t\t// FIXME move to controls\n\t\t\t\t// if (key === \"type\")\n\t\t\t\t// {\n\t\t\t\t// \titem.value === \"popup\" && Dom.show(elem);\n\t\t\t\t// \titem.value === \"panel\" && Dom.hide(elem);\n\t\t\t\t// }\n\n\t\t\t\tlet messageId = 'EMBED_SLIDER_FORM_SETTINGS_ALERT_ERROR';\n\t\t\t\tif (! Type.isUndefined(response.data.error.status) && response.data.error.status === 'access denied')\n\t\t\t\t{\n\t\t\t\t\tmessageId = 'EMBED_SLIDER_WIDGET_FORM_ALERT_ERROR_ACCESS_DENIED_FORM';\n\t\t\t\t}\n\n\t\t\t\ttop.BX.UI.Notification.Center.notify({\n\t\t\t\t\tcontent: BX.Loc.getMessage(messageId),\n\t\t\t\t});\n\n\t\t\t\treject(response);\n\t\t\t});\n\t\t});\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\treturn this.renderContainer();\n\t}\n\n\trenderTo(node: HTMLElement): undefined\n\t{\n\t\tif (!Type.isDomNode(node))\n\t\t{\n\t\t\tthrow new Error('Parameter `node` not an element.');\n\t\t}\n\n\t\tDom.append(this.render(), node);\n\t}\n\n\trenderError(responseData: Object): HTMLElement\n\t{\n\t\tlet errorMessage = BX.Loc.getMessage('EMBED_SLIDER_GENERAL_ERROR');\n\n\t\tif (Type.isObject(responseData) && Type.isObject(responseData.error) && responseData.error.status === 'access denied')\n\t\t{\n\t\t\tif (responseData.error.code === ERROR_CODE_FORM_READ_ACCESS_DENIED) {\n\t\t\t\terrorMessage = BX.Loc.getMessage('EMBED_SLIDER_FORM_ACCESS_DENIED');\n\t\t\t}\n\t\t}\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"ui-alert ui-alert-warning\">\n\t\t\t\t<span class=\"ui-alert-message\">${errorMessage}</span>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\trenderSettingsHeader(title: string, switcher: boolean = false, expertMode: function = null): HTMLElement\n\t{\n\t\tconst switcherNode = switcher ? Tag.render`<div class=\"crm-form-embed__customization-settings--switcher\"></div>` : '';\n\t\tconst headingBox = Tag.render`\n\t\t\t<div class=\"ui-slider-heading-box ${switcher ? '--toggle' : ''}\" data-roll=\"heading-block\">\n\t\t\t\t<div class=\"ui-slider-heading-main\">\n\t\t\t\t\t${switcherNode}\n\t\t\t\t\t<div class=\"ui-slider-heading-4\">${title ? title : BX.Loc.getMessage('EMBED_SLIDER_SETTINGS_HEADING')}</div>\n\t\t\t\t</div>\n\t\t\t\t${expertMode ? Tag.render`\n\t\t\t\t\t<div class=\"ui-slider-heading-rest\">\n\t\t\t\t\t\t<a href=\"#\"\n\t\t\t\t\t\t\tclass=\"ui-slider-link crm-form-embed__link --expert-mode --visible\"\n\t\t\t\t\t\t\tdata-roll=\"data-more-settings\"\n\t\t\t\t\t\t\tonclick=\"${expertMode.bind(this)}\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t${BX.Loc.getMessage('EMBED_SLIDER_EXPERT_MODE')}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t` : ''}\n\t\t\t</div>\n\t\t`;\n\n\t\tif (switcher)\n\t\t{\n\t\t\tconst heading = headingBox.querySelector('.ui-slider-heading-4');\n\t\t\tEvent.bind(heading, 'click', (event) => {\n\t\t\t\t// event.preventDefault();\n\t\t\t\t// const switcherId = event.currentTarget\n\t\t\t\t// \t.closest('.ui-slider-heading-main')\n\t\t\t\t// \t.querySelector('.ui-switcher[data-switcher-init=\"y\"][data-switcher-id]')\n\t\t\t\t// \t.dataset.switcherId\n\t\t\t\t// ;\n\t\t\t\t// const innerSwitcher = top.BX.UI.Switcher.getById(switcherId);\n\t\t\t\t// innerSwitcher.toggle();\n\n\t\t\t\tevent.currentTarget\n\t\t\t\t\t.closest('.ui-slider-heading-main')\n\t\t\t\t\t.querySelector('.ui-switcher[data-switcher-init=\"y\"]')\n\t\t\t\t\t.click();\n\t\t\t});\n\t\t}\n\n\t\treturn headingBox;\n\t}\n\n\t/**\n\t * @protected\n\t */\n\trenderCodeBlock(code: string): HTMLElement\n\t{\n\t\tconst section = this.renderSection();\n\t\tDom.append(Tag.render`\n\t\t\t<div class=\"crm-form-embed__customization--show-code\">\n\t\t\t\t<div class=\"ui-icon ui-icon-service-code crm-form-embed__customization--show-code-icon\"><i></i></div>\n\t\t\t\t<a class=\"ui-slider-link crm-form-embed__link --with-arrow\" data-roll=\"data-show-code\">${BX.Loc.getMessage('EMBED_SLIDER_SHOW_CODE')}</a>\n\t\t\t</div>\n\t\t`, section);\n\t\tDom.append(Tag.render`\n\t\t\t<div class=\"crm-form-embed__code\" data-roll=\"crm-form-embed__code\" style=\"height: 0px;\">\n\t\t\t\t<pre class=\"crm-form-embed__code-block\"><span>${Text.encode(code)}</span></pre>\n\t\t\t</div>\n\t\t`, section);\n\n\t\tconst toggleBtn = section.querySelector('[data-roll=\"data-show-code\"]');\n\t\tEvent.unbind(toggleBtn, 'click', handlerToggleCodeBlock);\n\t\tEvent.bind(toggleBtn, 'click', handlerToggleCodeBlock);\n\n\t\treturn section;\n\t}\n\n\tupdateDependentFields(container: Element, name: string, value: string)\n\t{\n\t\tswitch (name)\n\t\t{\n\t\t\tcase 'type':\n\t\t\t\tconst containerVertical = container.querySelector('[data-option=\"vertical\"]');\n\t\t\t\tif (value === 'panel')\n\t\t\t\t{\n\t\t\t\t\tDom.show(containerVertical)\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tDom.hide(containerVertical);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'button.plain':\n\t\t\t\tconst containerButtonStyle = container.querySelector('[data-option=\"buttonStyle\"]');\n\t\t\t\tconst containerLinkStyle = container.querySelector('[data-option=\"button.decoration\"]');\n\t\t\t\t// const containerFont = container.querySelector('[data-option=\"button.font\"]');\n\t\t\t\tconst containerButtonPosition = container.querySelector('[data-option=\"button.align\"]');\n\t\t\t\tconst containerLinkPosition = container.querySelector('[data-option=\"link.align\"]');\n\t\t\t\tif (value === '1')\n\t\t\t\t{\n\t\t\t\t\tDom.hide(containerButtonStyle);\n\t\t\t\t\tDom.show(containerLinkStyle);\n\n\t\t\t\t\tDom.hide(containerButtonPosition);\n\t\t\t\t\tDom.show(containerLinkPosition);\n\n\t\t\t\t\t// // Dom.hide(containerFont);\n\t\t\t\t\t// containerFont?.querySelectorAll('.crm-form-embed__settings-main--option').forEach((node) => {\n\t\t\t\t\t// \tDom.attr(node, 'disabled', true);\n\t\t\t\t\t// })\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tDom.hide(containerLinkStyle);\n\t\t\t\t\tDom.show(containerButtonStyle);\n\n\t\t\t\t\tDom.hide(containerLinkPosition);\n\t\t\t\t\tDom.show(containerButtonPosition);\n\n\t\t\t\t\t// // Dom.show(containerFont);\n\t\t\t\t\t// containerFont?.querySelectorAll('.crm-form-embed__settings-main--option').forEach((node) => {\n\t\t\t\t\t// \tDom.attr(node, 'disabled', false);\n\t\t\t\t\t// })\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t}\n}","import {Dom} from 'main.core';\nimport {Form} from './form';\nimport {DataProvider} from \"../../data_provider\";\nimport {HELP_CENTER_ID, HELP_CENTER_URL} from \"../../tab\";\n\nexport class Inline extends Form\n{\n\t#container: HTMLElement;\n\t#rendered: boolean = false;\n\n\tconstructor(formId: number, dataProvider: DataProvider)\n\t{\n\t\tsuper(formId, dataProvider);\n\t\tthis.#container = super.render();\n\t}\n\n\tload(force: boolean = false): Promise\n\t{\n\t\treturn super.load(force).then(() => {\n\t\t\tif (!this.#rendered)\n\t\t\t{\n\t\t\t\tthis.render();\n\t\t\t}\n\t\t}).catch((error) => {\n\t\t\tconsole.error(error);\n\t\t\tif (!this.#rendered)\n\t\t\t{\n\t\t\t\tthis.#renderError();\n\t\t\t}\n\t\t});\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tthis.#container.innerHTML = '';\n\n\t\tconst headerSection = this.renderHeaderSection(\n\t\t\t'code',\n\t\t\tBX.Loc.getMessage('EMBED_SLIDER_INLINE_TITLE'),\n\t\t\tBX.Loc.getMessage('EMBED_SLIDER_INLINE_DESC'),\n\t\t\tHELP_CENTER_ID,\n\t\t\tHELP_CENTER_URL\n\t\t);\n\t\tDom.append(headerSection, this.#container);\n\n\t\tif (!super.loaded)\n\t\t{\n\t\t\tthis.loader.show(this.#container);\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// update with actual help-center link\n\t\t\tDom.replace(headerSection, this.renderHeaderSection(\n\t\t\t\t'code',\n\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_INLINE_TITLE'),\n\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_INLINE_DESC'),\n\t\t\t\tthis.dataProvider.data.embed.helpCenterId,\n\t\t\t\tthis.dataProvider.data.embed.helpCenterUrl\n\t\t\t));\n\n\t\t\tDom.append(this.renderPreviewSection(\n\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_QR_TITLE'),\n\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_QR_DESC'),\n\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_OPEN_IN_NEW_TAB'),\n\t\t\t\tthis.dataProvider.data.embed.previewLink.replace('#preview#', 'inline') // this.dataProvider.data.embed.pubLink\n\t\t\t), this.#container);\n\n\t\t\tconst code = this.dataProvider.data.embed.scripts['inline'].text;\n\t\t\tDom.append(this.renderCodeBlock(code), this.#container);\n\t\t\tDom.append(this.renderCopySection(\n\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_COPY_CODE'),\n\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_COPY_CODE2'),\n\t\t\t\tcode,\n\t\t\t\tthis.renderBubble(BX.Loc.getMessage('EMBED_SLIDER_COPY_CODE_BUBBLE_INLINE'), true)\n\t\t\t), this.#container);\n\n\t\t\tthis.#rendered = true;\n\t\t}\n\n\t\treturn this.#container;\n\t}\n\n\t#renderError(): HTMLElement\n\t{\n\t\tthis.#container.innerHTML = '';\n\t\tDom.append(super.renderError(this.dataProvider.data), this.#container);\n\t\tthis.#rendered = true;\n\t\treturn this.#container;\n\t}\n}","export function getSvg(option: string, value: string): string\n{\n\tswitch (option)\n\t{\n\t\tcase 'position':\n\t\t\tswitch (value)\n\t\t\t{\n\t\t\t\tcase 'left':\n\t\t\t\t\treturn `\n\t\t\t\t\t\t\t<svg width=\"100\" height=\"66\" viewBox=\"0 0 100 66\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t\t\t\t\t\t<path class=\"crm-form-embed__settings--svg-arrow\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M42.1597 39.1886C42.5214 38.7916 42.5214 38.1845 42.1598 37.7874L38.8098 34.1094L51.9669 34.1094C52.5703 34.1094 53.0595 33.6202 53.0595 33.0167C53.0595 32.4132 52.5703 31.924 51.9669 31.924L38.8098 31.924L42.1598 28.2459C42.5214 27.8489 42.5214 27.2418 42.1598 26.8448C41.7471 26.3917 41.0341 26.3917 40.6214 26.8448L35.9947 31.9245C35.431 32.5435 35.431 33.4898 35.9947 34.1088L40.6215 39.1886C41.0341 39.6416 41.7471 39.6417 42.1597 39.1886Z\" />\n\t\t\t\t\t\t\t\t<path class=\"crm-form-embed__settings--svg-block\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M9 26.0002C9 24.8957 9.89543 24.0002 11 24.0002H25C26.1046 24.0002 27 24.8957 27 26.0002V40.0002C27 41.1048 26.1046 42.0002 25 42.0002H11C9.89543 42.0002 9 41.1048 9 40.0002V26.0002ZM14 33.0002C14 32.448 14.4477 32.0002 15 32.0002H21C21.5523 32.0002 22 32.448 22 33.0002C22 33.5525 21.5523 34.0002 21 34.0002H15C14.4477 34.0002 14 33.5525 14 33.0002ZM14 28.0002C13.4477 28.0002 13 28.448 13 29.0002C13 29.5525 13.4477 30.0002 14 30.0002H22C22.5523 30.0002 23 29.5525 23 29.0002C23 28.448 22.5523 28.0002 22 28.0002H14Z\"/>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t`;\n\t\t\t\tcase 'center':\n\t\t\t\t\treturn `\n\t\t\t\t\t\t\t<svg width=\"100\" height=\"66\" viewBox=\"0 0 100 66\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t\t\t\t\t\t<path class=\"crm-form-embed__settings--svg-arrow\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M26.4471 26.7989C26.006 27.24 26.006 27.9552 26.4471 28.3963L30.1754 32.1246H21.1297C20.5058 32.1246 20 32.6304 20 33.2543C20 33.8783 20.5058 34.384 21.1297 34.384H30.1754L26.4471 38.1124C26.006 38.5535 26.006 39.2687 26.4471 39.7098C26.8882 40.151 27.6034 40.151 28.0446 39.7098L33.1811 34.5733C33.9095 33.8449 33.9095 32.6639 33.1811 31.9355L28.0445 26.7989C27.6034 26.3578 26.8883 26.3578 26.4471 26.7989Z\"/>\n\t\t\t\t\t\t\t\t<path class=\"crm-form-embed__settings--svg-arrow\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M71.8799 39.6907C72.3031 39.2572 72.3031 38.5652 71.8799 38.1317L68.2216 34.3842L76.8822 34.3842C77.5061 34.3842 78.0119 33.8784 78.0119 33.2545C78.0119 32.6306 77.5061 32.1248 76.8822 32.1248L68.2216 32.1248L71.8799 28.3772C72.3031 27.9437 72.3031 27.2517 71.8799 26.8182C71.4421 26.3697 70.7208 26.3697 70.2829 26.8182L65.2375 31.9867C64.5493 32.6917 64.5493 33.8171 65.2375 34.5221L70.283 39.6907C70.7208 40.1392 71.4421 40.1392 71.8799 39.6907Z\"/>\n\t\t\t\t\t\t\t\t<path class=\"crm-form-embed__settings--svg-block\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M41 26.0002C41 24.8957 41.8954 24.0002 43 24.0002H57C58.1046 24.0002 59 24.8957 59 26.0002V40.0002C59 41.1048 58.1046 42.0002 57 42.0002H43C41.8954 42.0002 41 41.1048 41 40.0002V26.0002ZM46 33.0002C46 32.448 46.4477 32.0002 47 32.0002H53C53.5523 32.0002 54 32.448 54 33.0002C54 33.5525 53.5523 34.0002 53 34.0002H47C46.4477 34.0002 46 33.5525 46 33.0002ZM46 28.0002C45.4477 28.0002 45 28.448 45 29.0002C45 29.5525 45.4477 30.0002 46 30.0002H54C54.5523 30.0002 55 29.5525 55 29.0002C55 28.448 54.5523 28.0002 54 28.0002H46Z\"/>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t`;\n\t\t\t\tcase 'right':\n\t\t\t\t\treturn `\n\t\t\t\t\t\t\t<svg width=\"100\" height=\"66\" viewBox=\"0 0 100 66\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t\t\t\t\t\t<path class=\"crm-form-embed__settings--svg-arrow\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M59.4471 26.7989C59.006 27.24 59.006 27.9552 59.4471 28.3963L63.1754 32.1246H48.1297C47.5058 32.1246 47 32.6304 47 33.2543C47 33.8783 47.5058 34.384 48.1297 34.384H63.1754L59.4471 38.1124C59.006 38.5535 59.006 39.2687 59.4471 39.7098C59.8882 40.151 60.6034 40.151 61.0446 39.7098L66.1811 34.5733C66.9095 33.8449 66.9095 32.6639 66.1811 31.9355L61.0445 26.7989C60.6034 26.3578 59.8883 26.3578 59.4471 26.7989Z\"/>\n\t\t\t\t\t\t\t\t<path class=\"crm-form-embed__settings--svg-block\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M75 26.0002C75 24.8957 75.8954 24.0002 77 24.0002H91C92.1046 24.0002 93 24.8957 93 26.0002V40.0002C93 41.1048 92.1046 42.0002 91 42.0002H77C75.8954 42.0002 75 41.1048 75 40.0002V26.0002ZM80 33.0002C80 32.448 80.4477 32.0002 81 32.0002H87C87.5523 32.0002 88 32.448 88 33.0002C88 33.5525 87.5523 34.0002 87 34.0002H81C80.4477 34.0002 80 33.5525 80 33.0002ZM80 28.0002C79.4477 28.0002 79 28.448 79 29.0002C79 29.5525 79.4477 30.0002 80 30.0002H88C88.5523 30.0002 89 29.5525 89 29.0002C89 28.448 88.5523 28.0002 88 28.0002H80Z\"/>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t`;\n\t\t\t}\n\t\t\tbreak;\n\t\tcase 'button.align':\n\t\t\tswitch (value)\n\t\t\t{\n\t\t\t\tcase 'left':\n\t\t\t\t\treturn `\n\t\t\t\t\t\t\t<svg width=\"100\" height=\"66\" viewBox=\"0 0 100 66\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t\t\t\t\t\t<path class=\"crm-form-embed__settings--svg-arrow\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M42.1597 39.1883C42.5214 38.7913 42.5214 38.1842 42.1598 37.7872L38.8098 34.1091L51.9669 34.1091C52.5703 34.1091 53.0595 33.6199 53.0595 33.0164C53.0595 32.413 52.5703 31.9238 51.9669 31.9238L38.8098 31.9238L42.1598 28.2457C42.5214 27.8486 42.5214 27.2416 42.1598 26.8445C41.7471 26.3914 41.0341 26.3914 40.6214 26.8445L35.9947 31.9243C35.431 32.5432 35.431 33.4896 35.9947 34.1085L40.6215 39.1883C41.0341 39.6414 41.7471 39.6414 42.1597 39.1883Z\" />\n\t\t\t\t\t\t\t\t<path class=\"crm-form-embed__settings--svg-block\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M7 27C5.89543 27 5 27.8954 5 29V37C5 38.1046 5.89543 39 7 39H27C28.1046 39 29 38.1046 29 37V29C29 27.8954 28.1046 27 27 27H7ZM13 32C12.4477 32 12 32.4477 12 33C12 33.5523 12.4477 34 13 34H21C21.5523 34 22 33.5523 22 33C22 32.4477 21.5523 32 21 32H13Z\" />\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t`;\n\t\t\t\tcase 'center':\n\t\t\t\t\treturn `\n\t\t\t\t\t\t\t<svg width=\"100\" height=\"66\" viewBox=\"0 0 100 66\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t\t\t\t\t\t<path class=\"crm-form-embed__settings--svg-arrow\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M26.4471 26.7986C26.006 27.2397 26.006 27.9549 26.4471 28.3961L30.1754 32.1244H21.1297C20.5058 32.1244 20 32.6302 20 33.2541C20 33.878 20.5058 34.3838 21.1297 34.3838H30.1754L26.4471 38.1121C26.006 38.5532 26.006 39.2685 26.4471 39.7096C26.8882 40.1507 27.6034 40.1507 28.0446 39.7096L33.1811 34.5731C33.9095 33.8447 33.9095 32.6637 33.1811 31.9352L28.0445 26.7987C27.6034 26.3576 26.8883 26.3576 26.4471 26.7986Z\"/>\n\t\t\t\t\t\t\t\t<path class=\"crm-form-embed__settings--svg-arrow\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M71.8799 39.6905C72.3031 39.257 72.3031 38.565 71.8799 38.1315L68.2216 34.3839L76.8822 34.3839C77.5061 34.3839 78.0119 33.8782 78.0119 33.2542C78.0119 32.6303 77.5061 32.1245 76.8822 32.1245L68.2216 32.1245L71.8799 28.377C72.3031 27.9435 72.3031 27.2515 71.8799 26.818C71.4421 26.3694 70.7208 26.3694 70.2829 26.818L65.2375 31.9864C64.5493 32.6915 64.5493 33.8169 65.2375 34.5219L70.283 39.6904C70.7208 40.1389 71.4421 40.1389 71.8799 39.6905Z\"/>\n\t\t\t\t\t\t\t\t<path class=\"crm-form-embed__settings--svg-block\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M39 27C37.8954 27 37 27.8954 37 29V37C37 38.1046 37.8954 39 39 39H59C60.1046 39 61 38.1046 61 37V29C61 27.8954 60.1046 27 59 27H39ZM45 32C44.4477 32 44 32.4477 44 33C44 33.5523 44.4477 34 45 34H53C53.5523 34 54 33.5523 54 33C54 32.4477 53.5523 32 53 32H45Z\"/>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t`;\n\t\t\t\tcase 'right':\n\t\t\t\t\treturn `\n\t\t\t\t\t\t\t<svg width=\"100\" height=\"66\" viewBox=\"0 0 100 66\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t\t\t\t\t\t<path class=\"crm-form-embed__settings--svg-arrow\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M59.4471 26.7986C59.006 27.2397 59.006 27.9549 59.4471 28.3961L63.1754 32.1244H48.1297C47.5058 32.1244 47 32.6302 47 33.2541C47 33.878 47.5058 34.3838 48.1297 34.3838H63.1754L59.4471 38.1121C59.006 38.5532 59.006 39.2685 59.4471 39.7096C59.8882 40.1507 60.6034 40.1507 61.0446 39.7096L66.1811 34.5731C66.9095 33.8447 66.9095 32.6637 66.1811 31.9352L61.0445 26.7987C60.6034 26.3576 59.8883 26.3576 59.4471 26.7986Z\"/>\n\t\t\t\t\t\t\t\t<path class=\"crm-form-embed__settings--svg-block\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M73 27C71.8954 27 71 27.8954 71 29V37C71 38.1046 71.8954 39 73 39H93C94.1046 39 95 38.1046 95 37V29C95 27.8954 94.1046 27 93 27H73ZM79 32C78.4477 32 78 32.4477 78 33C78 33.5523 78.4477 34 79 34H87C87.5523 34 88 33.5523 88 33C88 32.4477 87.5523 32 87 32H79Z\"/>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t`;\n\t\t\t}\n\t\t\tbreak;\n\t\tcase 'link.align':\n\t\t\tswitch (value)\n\t\t\t{\n\t\t\t\tcase 'inline':\n\t\t\t\t\treturn `\n\t\t\t\t\t<svg width=\"100\" height=\"66\" viewBox=\"0 0 100 66\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t\t\t\t<path class=\"crm-form-embed__settings--svg-block\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M27 27C27 25.8954 27.8954 25 29 25H45C46.1046 25 47 25.8954 47 27V39C47 40.1046 46.1046 41 45 41H29C27.8954 41 27 40.1046 27 39V27ZM35.3454 35L34.8202 33.3406H32.1798L31.6546 35H30L32.5563 28H34.4338L37 35H35.3454ZM34.4536 32.1008C33.9682 30.5972 33.694 29.7468 33.6313 29.5497C33.5718 29.3526 33.5289 29.1969 33.5025 29.0824C33.3935 29.4893 33.0814 30.4955 32.5662 32.1008H34.4536ZM30.75 37C30.3358 37 30 37.3358 30 37.75C30 38.1642 30.3358 38.5 30.75 38.5H43.25C43.6642 38.5 44 38.1642 44 37.75C44 37.3358 43.6642 37 43.25 37H30.75Z\"/>\n\t\t\t\t\t\t<path class=\"crm-form-embed__settings--svg-block\" d=\"M56.5684 36.9998H55.168V29.6345H52.6484V28.4333H59.0879V29.6345H56.5684V36.9998ZM63.0898 37.1169C62.082 37.1169 61.293 36.824 60.7227 36.238C60.1562 35.6482 59.873 34.8376 59.873 33.8064C59.873 32.7478 60.1367 31.9158 60.6641 31.3103C61.1914 30.7048 61.916 30.4021 62.8379 30.4021C63.6934 30.4021 64.3691 30.6619 64.8652 31.1814C65.3613 31.7009 65.6094 32.4158 65.6094 33.3259V34.0701H61.291C61.3105 34.699 61.4805 35.1833 61.8008 35.5232C62.1211 35.8591 62.5723 36.0271 63.1543 36.0271C63.5371 36.0271 63.8926 35.9919 64.2207 35.9216C64.5527 35.8474 64.9082 35.7263 65.2871 35.5583V36.6775C64.9512 36.8376 64.6113 36.9509 64.2676 37.0173C63.9238 37.0837 63.5312 37.1169 63.0898 37.1169ZM62.8379 31.4451C62.4004 31.4451 62.0488 31.5837 61.7832 31.8611C61.5215 32.1384 61.3652 32.5427 61.3145 33.074H64.2559C64.248 32.5388 64.1191 32.1345 63.8691 31.8611C63.6191 31.5837 63.2754 31.4451 62.8379 31.4451ZM68.6152 33.6892L66.4414 30.5193H68.0117L69.4883 32.7869L70.9766 30.5193H72.5352L70.3555 33.6892L72.6465 36.9998H71.0879L69.4883 34.574L67.8945 36.9998H66.3359L68.6152 33.6892ZM76.1973 36.0037C76.5332 36.0037 76.8691 35.9509 77.2051 35.8455V36.8826C77.0527 36.949 76.8555 37.0037 76.6133 37.0466C76.375 37.0935 76.127 37.1169 75.8691 37.1169C74.5645 37.1169 73.9121 36.4294 73.9121 35.0544V31.5623H73.0273V30.9529L73.9766 30.449L74.4453 29.0779H75.2949V30.5193H77.1406V31.5623H75.2949V35.031C75.2949 35.363 75.377 35.6091 75.541 35.7693C75.709 35.9255 75.9277 36.0037 76.1973 36.0037Z\"/>\n\t\t\t\t\t</svg>\n\t\t\t\t\t`;\n\t\t\t\tcase 'left':\n\t\t\t\t\treturn `\n\t\t\t\t\t\t\t<svg width=\"100\" height=\"66\" viewBox=\"0 0 100 66\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t\t\t\t\t\t<path class=\"crm-form-embed__settings--svg-arrow\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M42.1598 39.1883C42.5214 38.7913 42.5214 38.1842 42.1598 37.7872L38.8098 34.1091L51.9669 34.1091C52.5704 34.1091 53.0596 33.6199 53.0596 33.0164V33.0164C53.0596 32.413 52.5704 31.9238 51.9669 31.9238L38.8098 31.9238L42.1598 28.2457C42.5214 27.8486 42.5214 27.2416 42.1598 26.8445V26.8445C41.7471 26.3914 41.0341 26.3914 40.6214 26.8445L35.9948 31.9242C35.431 32.5432 35.431 33.4895 35.9948 34.1085L40.6215 39.1883C41.0342 39.6414 41.7471 39.6414 42.1598 39.1883V39.1883Z\"/>\n\t\t\t\t\t\t\t\t<path class=\"crm-form-embed__settings--svg-block\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M8 27C8 25.8954 8.89543 25 10 25H26C27.1046 25 28 25.8954 28 27V39C28 40.1046 27.1046 41 26 41H10C8.89543 41 8 40.1046 8 39V27ZM16.3454 35L15.8202 33.3406H13.1798L12.6546 35H11L13.5563 28H15.4338L18 35H16.3454ZM15.4536 32.1008C14.9682 30.5972 14.694 29.7468 14.6313 29.5497C14.5718 29.3526 14.5289 29.1969 14.5025 29.0824C14.3935 29.4893 14.0814 30.4955 13.5662 32.1008H15.4536ZM11.75 37C11.3358 37 11 37.3358 11 37.75C11 38.1642 11.3358 38.5 11.75 38.5H24.25C24.6642 38.5 25 38.1642 25 37.75C25 37.3358 24.6642 37 24.25 37H11.75Z\"/>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t`;\n\t\t\t\tcase 'center':\n\t\t\t\t\treturn `\n\t\t\t\t\t\t\t<svg width=\"100\" height=\"66\" viewBox=\"0 0 100 66\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t\t\t\t\t\t<path class=\"crm-form-embed__settings--svg-arrow\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M26.4471 26.7986C26.006 27.2397 26.006 27.9549 26.4471 28.3961L30.1754 32.1244H21.1297C20.5058 32.1244 20 32.6302 20 33.2541V33.2541C20 33.878 20.5058 34.3838 21.1297 34.3838H30.1754L26.4471 38.1121C26.006 38.5532 26.006 39.2685 26.4471 39.7096V39.7096C26.8882 40.1507 27.6034 40.1507 28.0446 39.7096L33.1811 34.5731C33.9095 33.8447 33.9095 32.6636 33.1811 31.9352L28.0445 26.7987C27.6034 26.3576 26.8883 26.3576 26.4471 26.7986V26.7986Z\"/>\n\t\t\t\t\t\t\t\t<path class=\"crm-form-embed__settings--svg-arrow\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M71.88 39.6904C72.3032 39.257 72.3032 38.565 71.88 38.1315L68.2217 34.3839L76.8823 34.3839C77.5062 34.3839 78.012 33.8781 78.012 33.2542V33.2542C78.012 32.6303 77.5062 32.1245 76.8823 32.1245L68.2217 32.1245L71.88 28.377C72.3032 27.9434 72.3032 27.2515 71.88 26.818V26.818C71.4421 26.3694 70.7208 26.3694 70.283 26.818L65.2376 31.9864C64.5493 32.6915 64.5493 33.8169 65.2376 34.5219L70.2831 39.6904C70.7209 40.1389 71.4421 40.1389 71.88 39.6904V39.6904Z\"/>\n\t\t\t\t\t\t\t\t<path class=\"crm-form-embed__settings--svg-block\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M40 27C40 25.8954 40.8954 25 42 25H58C59.1046 25 60 25.8954 60 27V39C60 40.1046 59.1046 41 58 41H42C40.8954 41 40 40.1046 40 39V27ZM48.3454 35L47.8202 33.3406H45.1798L44.6546 35H43L45.5563 28H47.4338L50 35H48.3454ZM47.4536 32.1008C46.9682 30.5972 46.694 29.7468 46.6313 29.5497C46.5718 29.3526 46.5289 29.1969 46.5025 29.0824C46.3935 29.4893 46.0814 30.4955 45.5662 32.1008H47.4536ZM43.75 37C43.3358 37 43 37.3358 43 37.75C43 38.1642 43.3358 38.5 43.75 38.5H56.25C56.6642 38.5 57 38.1642 57 37.75C57 37.3358 56.6642 37 56.25 37H43.75Z\"/>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t`;\n\t\t\t\tcase 'right':\n\t\t\t\t\treturn `\n\t\t\t\t\t\t\t<svg width=\"100\" height=\"66\" viewBox=\"0 0 100 66\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t\t\t\t\t\t<path class=\"crm-form-embed__settings--svg-arrow\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M59.4471 26.7986C59.006 27.2397 59.006 27.9549 59.4471 28.3961L63.1754 32.1244H48.1297C47.5058 32.1244 47 32.6302 47 33.2541V33.2541C47 33.878 47.5058 34.3838 48.1297 34.3838H63.1754L59.4471 38.1121C59.006 38.5532 59.006 39.2685 59.4471 39.7096V39.7096C59.8882 40.1507 60.6034 40.1507 61.0446 39.7096L66.1811 34.5731C66.9095 33.8447 66.9095 32.6636 66.1811 31.9352L61.0445 26.7987C60.6034 26.3576 59.8883 26.3576 59.4471 26.7986V26.7986Z\"/>\n\t\t\t\t\t\t\t\t<path class=\"crm-form-embed__settings--svg-block\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M74 27C74 25.8954 74.8954 25 76 25H92C93.1046 25 94 25.8954 94 27V39C94 40.1046 93.1046 41 92 41H76C74.8954 41 74 40.1046 74 39V27ZM82.3454 35L81.8202 33.3406H79.1798L78.6546 35H77L79.5563 28H81.4338L84 35H82.3454ZM81.4536 32.1008C80.9682 30.5972 80.694 29.7468 80.6313 29.5497C80.5718 29.3526 80.5289 29.1969 80.5025 29.0824C80.3935 29.4893 80.0814 30.4955 79.5662 32.1008H81.4536ZM77.75 37C77.3358 37 77 37.3358 77 37.75C77 38.1642 77.3358 38.5 77.75 38.5H90.25C90.6642 38.5 91 38.1642 91 37.75C91 37.3358 90.6642 37 90.25 37H77.75Z\"/>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t`;\n\t\t\t}\n\t\t\tbreak;\n\t\tcase 'vertical':\n\t\t\tswitch (value)\n\t\t\t{\n\t\t\t\tcase 'bottom':\n\t\t\t\t\treturn `\n\t\t\t\t\t\t\t<svg width=\"100\" height=\"66\" viewBox=\"0 0 100 66\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t\t\t\t\t\t<path class=\"crm-form-embed__settings--svg-block\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M66 60.0002C66 61.1048 65.1046 62.0002 64 62.0002L36 62.0002C34.8954 62.0002 34 61.1048 34 60.0002L34 50.0002C34 48.3434 35.3431 47.0002 37 47.0002L63 47.0002C64.6569 47.0002 66 48.3434 66 50.0002L66 60.0002ZM63 58.0002C63 58.5525 62.5523 59.0002 62 59.0002L38 59.0002C37.4477 59.0002 37 58.5525 37 58.0002C37 57.448 37.4477 57.0002 38 57.0002L62 57.0002C62.5523 57.0002 63 57.448 63 58.0002ZM58 55.0002C58.5523 55.0002 59 54.5525 59 54.0002C59 53.448 58.5523 53.0002 58 53.0002L42 53.0002C41.4477 53.0002 41 53.448 41 54.0002C41 54.5525 41.4477 55.0002 42 55.0002L58 55.0002Z\"/>\n\t\t\t\t\t\t\t\t<path class=\"crm-form-embed__settings--svg-arrow\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M43.7986 29.0531C44.2397 29.4942 44.9549 29.4943 45.3961 29.0531L49.1244 25.3248L49.1244 40.3705C49.1244 40.9945 49.6302 41.5002 50.2541 41.5002C50.878 41.5002 51.3838 40.9945 51.3838 40.3705L51.3838 25.3248L55.1121 29.0531C55.5532 29.4943 56.2685 29.4943 56.7096 29.0531C57.1507 28.612 57.1507 27.8968 56.7096 27.4557L51.5731 22.3192C50.8447 21.5907 49.6636 21.5908 48.9352 22.3192L43.7987 27.4557C43.3576 27.8968 43.3576 28.612 43.7986 29.0531Z\"/>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t`;\n\t\t\t\tcase 'top':\n\t\t\t\t\treturn `\n\t\t\t\t\t\t\t<svg width=\"100\" height=\"66\" viewBox=\"0 0 100 66\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t\t\t\t\t\t<path class=\"crm-form-embed__settings--svg-block\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M34 6.00024C34 4.89567 34.8954 4.00024 36 4.00024L64 4.00024C65.1046 4.00024 66 4.89567 66 6.00024L66 16.0002C66 17.6571 64.6569 19.0002 63 19.0002L37 19.0002C35.3431 19.0002 34 17.6571 34 16.0002L34 6.00024ZM63 8.00024C63 8.55253 62.5523 9.00024 62 9.00024L38 9.00024C37.4477 9.00024 37 8.55253 37 8.00024C37 7.44796 37.4477 7.00024 38 7.00024L62 7.00025C62.5523 7.00025 63 7.44796 63 8.00024ZM58 13.0002C58.5523 13.0002 59 12.5525 59 12.0002C59 11.448 58.5523 11.0002 58 11.0002L42 11.0002C41.4477 11.0002 41 11.448 41 12.0002C41 12.5525 41.4477 13.0002 42 13.0002L58 13.0002Z\"/>\n\t\t\t\t\t\t\t\t<path class=\"crm-form-embed__settings--svg-arrow\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M56.7097 37.4474C56.2686 37.0062 55.5534 37.0062 55.1122 37.4474L51.3839 41.1757L51.3839 26.1299C51.3839 25.506 50.8781 25.0002 50.2542 25.0002C49.6303 25.0002 49.1245 25.506 49.1245 26.1299L49.1245 41.1757L45.3962 37.4474C44.9551 37.0062 44.2398 37.0062 43.7987 37.4474C43.3576 37.8885 43.3576 38.6037 43.7987 39.0448L48.9352 44.1813C49.6636 44.9097 50.8446 44.9097 51.5731 44.1813L56.7096 39.0448C57.1507 38.6037 57.1507 37.8885 56.7097 37.4474Z\"/>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t`;\n\t\t\t}\n\t\t\tbreak;\n\t}\n}","import {Type} from 'main.core';\nimport \"ui.feedback.form\";\n\nexport function isHexDark(hex): boolean\n{\n\treturn Color.isHexDark(hex);\n}\n\nexport function hexToRgba(hex): boolean\n{\n\treturn Color.hexToRgba(hex);\n}\n\nexport function getHexFromOpacity(opacity: number): string\n{\n\tif (Type.isString(opacity) && opacity.includes('%'))\n\t{\n\t\topacity = Number.parseInt(opacity) / 100;\n\t}\n\n\tconst hex = Math.round(opacity * 255).toString(16);\n\treturn hex.length === 1 ? '0'+hex : hex;\n}\n\nexport function getOpacityFromHex(hexA: string): number\n{\n\treturn Math.round((Number.parseInt(hexA, 16) / 255) * 100) / 100;\n}\n\nexport function openFeedbackForm()\n{\n\tBX.UI.Feedback.Form.open(\n\t\t{\n\t\t\tid: 'crm.webform.embed.feedback',\n\t\t\tforms: [\n\t\t\t\t{zones: ['en', 'eu', 'in', 'uk'], id: 372, lang: 'en', sec: 'qxzl3o'},\n\t\t\t\t{zones: ['by'], id: 362, lang: 'by', sec: 'gha9ge'},\n\t\t\t\t{zones: ['kz'], id: 362, lang: 'kz', sec: 'gha9ge'},\n\t\t\t\t{zones: ['ru'], id: 362, lang: 'ru', sec: 'gha9ge'},\n\t\t\t\t{zones: ['com.br'], id: 364, lang: 'br', sec: 'g649rj'},\n\t\t\t\t{zones: ['la', 'co', 'mx'], id: 366, lang: 'es', sec: 's80g9o'},\n\t\t\t\t{zones: ['de'], id: 368, lang: 'de', sec: 'bcmkrl'},\n\t\t\t\t{zones: ['ua'], id: 370, lang: 'ua', sec: 'ue05ne'},\n\t\t\t\t// {zones: ['pl'], id: 994, lang: 'pl', sec: 'qtxmku'},\n\t\t\t],\n\t\t}\n\t);\n}\n\n// copy from crm.site.form\nconst Color = {\n\tparseHex (hex)\n\t{\n\t\thex = this.fillHex(hex);\n\t\tlet parts = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})?$/i.exec(hex);\n\t\tif (!parts)\n\t\t{\n\t\t\tparts = [0,0,0,1];\n\t\t}\n\t\telse\n\t\t{\n\t\t\tparts = [\n\t\t\t\tparseInt(parts[1], 16),\n\t\t\t\tparseInt(parts[2], 16),\n\t\t\t\tparseInt(parts[3], 16),\n\t\t\t\tparseInt(100 * (parseInt(parts[4] || 'ff', 16) / 255)) / 100,\n\t\t\t];\n\t\t}\n\n\t\treturn parts;\n\t},\n\thexToRgba (hex)\n\t{\n\t\treturn 'rgba(' + this.parseHex(hex).join(', ') + ')';\n\t},\n\ttoRgba (numbers)\n\t{\n\t\treturn 'rgba(' + numbers.join(', ') + ')';\n\t},\n\tfillHex (hex: string, fillAlpha: boolean = false, alpha: string = null)\n\t{\n\t\tif (hex.length === 4 || (fillAlpha && hex.length === 5))\n\t\t{\n\t\t\thex = hex.replace(/([a-f0-9])/gi, \"$1$1\");\n\t\t}\n\n\t\tif (fillAlpha && hex.length === 7)\n\t\t{\n\t\t\thex += 'ff';\n\t\t}\n\n\t\tif (alpha)\n\t\t{\n\t\t\thex = hex.substr(0, 7) + (alpha.toLowerCase() + 'ff').substr(0, 2);\n\t\t}\n\n\t\treturn hex;\n\t},\n\tisHexDark (hex)\n\t{\n\t\thex = this.parseHex(hex);\n\t\tconst r = hex[0]; const g = hex[1]; const b = hex[2];\n\t\tconst brightness = ((r * 299) + (g * 587) + (b * 114)) / 1000;\n\t\treturn brightness < 155;\n\t},\n};\n\n","import {Text, Tag, Dom, Type, Event} from 'main.core';\nimport {ColorField} from \"landing.ui.field.color\";\nimport {getSvg} from \"./svg\";\nimport 'ui.switcher';\nimport {getHexFromOpacity, getOpacityFromHex, hexToRgba} from \"../util\";\nimport 'main.loader';\n\ntype ControlOptions = {\n\tcallback: Function;\n\tnode: Element;\n\toptions: Object | DropdownOptions,\n\tkey: String,\n\tkeyName: String,\n\tvalue: String,\n\tformId: number,\n};\n\ntype DropdownOptions = {\n\t[key: string]: string,\n}\n\nconst loader = new BX.Loader({mode: 'inline'});\n\nexport class Controls\n{\n\tstatic renderDropdown(options: ControlOptions)\n\t{\n\t\tconst handler = (event) => {\n\t\t\tDom.attr(event.currentTarget, 'disabled', true);\n\t\t\tloader.setOptions({size: 40});\n\t\t\tloader.show(options.node.querySelector('.ui-ctl-after.ui-ctl-icon-angle'));\n\t\t\toptions.callback(event.currentTarget.value);\n\t\t}\n\n\t\tDom.append(this.renderLabel(options.keyName), options.node);\n\n\t\tconst select = Tag.render`<select class=\"ui-ctl-element embed-control-node\" onchange=\"${Text.encode(handler)}\"></select>`;\n\n\t\tObject.entries(options.options).forEach(([option, name]) => {\n\t\t\tDom.append(\n\t\t\t\tTag.render`\n\t\t\t\t\t<option\n\t\t\t\t\t\tvalue=\"${Text.encode(option)}\"\n\t\t\t\t\t\t${(!Type.isUndefined(options.value) && (options.value.toString() === option.toString())) ? 'selected' : ''}\n\t\t\t\t\t>\n\t\t\t\t\t\t${Text.encode(name)}\n\t\t\t\t\t</option>\n\t\t\t\t`,\n\t\t\t\tselect\n\t\t\t);\n\t\t});\n\n\t\tDom.append(Tag.render`\n\t\t\t<div class=\"ui-ctl ui-ctl-after-icon ui-ctl-dropdown\">\n\t\t\t\t<div class=\"ui-ctl-after ui-ctl-icon-angle\"></div>\n\t\t\t\t${select}\n\t\t\t</div>\n\t\t`, options.node);\n\t}\n\n\tstatic renderText(options: ControlOptions, advanced: boolean)\n\t{\n\t\tconst handler = (event) => {\n\t\t\tDom.attr(event.currentTarget, 'disabled', true);\n\t\t\tloader.setOptions({size: 40});\n\t\t\tloader.show(options.node.querySelector('.ui-ctl-after'));\n\t\t\toptions.callback(event.currentTarget.value);\n\t\t}\n\n\t\tconst handlerShowSaveBtn = (event) => {\n\t\t\tDom.show(options.node.querySelector('.ui-ctl-after'));\n\t\t}\n\n\t\tconst afterIcon = advanced ? '' : '<button class=\"ui-ctl-after\" hidden><svg width=\"20\" height=\"15\" viewBox=\"0 0 20 15\" xmlns=\"http://www.w3.org/2000/svg\"><path fill=\"#535C69\" d=\"M7.34223 14.351L0.865356 8.03879L3.13226 5.82951L7.34223 9.93246L16.8678 0.648987L19.1348 2.85827L7.34223 14.351Z\"/></svg></button>';\n\n\t\tDom.append(this.renderLabel(options.keyName), options.node);\n\n\t\tconst input = Tag.render`\n\t\t\t<input\n\t\t\t\ttype=\"text\"\n\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\tvalue=\"${!Type.isUndefined(options.value) ? Text.encode(options.value) : ''}\"\n\t\t\t\tdata-onfocus=\"${Text.encode(handlerShowSaveBtn)}\"\n\t\t\t\tdata-onblur=\"${Text.encode(handler)}\"\n\t\t\t>\n\t\t`;\n\n\t\tEvent.bindOnce(input, 'blur', handler);\n\t\tif (!advanced)\n\t\t{\n\t\t\tEvent.bindOnce(input, 'focus', handlerShowSaveBtn);\n\t\t}\n\n\t\tDom.append(Tag.render`\n\t\t\t<div class=\"ui-ctl ui-ctl-textbox ui-ctl-after-icon\">\n\t\t\t\t${afterIcon}\n\t\t\t\t${input}\n\t\t\t</div>\n\t\t`, options.node);\n\t}\n\n\tstatic renderTypeface(forValue, extended: boolean, options: ControlOptions)\n\t{\n\t\tconst handler = (event) => {\n\t\t\tif (event.currentTarget.getAttribute('disabled') === 'true') { return; }\n\n\t\t\tconst nodeList = event.currentTarget.closest('.crm-form-embed__settings').querySelectorAll('.crm-form-embed__settings--hide-button');\n\t\t\tnodeList.forEach((node) => {\n\t\t\t\t// node.disabled = true;\n\t\t\t\tDom.attr(node, 'disabled', true);\n\t\t\t});\n\n\t\t\tif (!extended)\n\t\t\t{\n\t\t\t\tanimateSwitching(\n\t\t\t\t\tevent.currentTarget.closest('.crm-form-embed__settings--option.--typeface'),\n\t\t\t\t\t0,\n\t\t\t\t\t0,\n\t\t\t\t\ttrue\n\t\t\t\t);\n\t\t\t}\n\n\t\t\toptions.callback(forValue);\n\t\t}\n\n\t\tconst className = extended ? 'crm-form-embed__settings-main--option --option-big' : 'crm-form-embed__settings--option --typeface';\n\n\t\tDom.append(Tag.render`\n\t\t\t<div class=\"crm-form-embed__settings--hide-button ${className} ${forValue === options.value ? '--active' : ''}\" onclick=\"${Text.encode(handler)}\">\n\t\t\t\t<span class=\"crm-form-embed__settings--option-font --${Text.encode(forValue)}\">${Text.encode(options.keyName)}</span>\n\t\t\t</div>\n\t\t`, options.node);\n\t}\n\n\tstatic renderSquareButton(forValue, options: ControlOptions)\n\t{\n\t\tconst handler = (event) => {\n\t\t\tif (event.currentTarget.getAttribute('disabled') === 'true') { return; }\n\n\t\t\tconst nodeList = event.currentTarget.closest('.crm-form-embed__settings').querySelectorAll('.crm-form-embed__settings--option-layout');\n\t\t\tnodeList.forEach((node) => {\n\t\t\t\t// node.disabled = true;\n\t\t\t\tDom.attr(node, 'disabled', true);\n\t\t\t});\n\n\t\t\tanimateSwitching(\n\t\t\t\tevent.currentTarget.closest('.crm-form-embed__settings--option-layout').querySelector('.crm-form-embed__settings-main--option-svg'),\n\t\t\t\t100,\n\t\t\t\t66,\n\t\t\t\tfalse\n\t\t\t);\n\n\t\t\toptions.callback(forValue);\n\t\t}\n\n\t\tDom.append(Tag.render`\n\t\t\t<div class=\"crm-form-embed__settings--option-layout ${forValue === options.value ? '--active' : ''}\" onclick=\"${Text.encode(handler)}\">\n\t\t\t\t<div class=\"crm-form-embed__settings-main--option-svg\">\n\t\t\t\t\t${getSvg(options.key, forValue)}\n\t\t\t\t</div>\n\t\t\t\t<span class=\"crm-form-embed__settings--option-layout-text\">${Text.encode(options.keyName)}</span>\n\t\t\t</div>\n\t\t`, options.node);\n\t}\n\n\tstatic renderButton(forValue, type: string, advanced: boolean, options: ControlOptions)\n\t{\n\t\tconst handler = (event) => {\n\t\t\tif (event.currentTarget.getAttribute('disabled') === 'true') { return; }\n\n\t\t\tconst nodeList = event.currentTarget.closest('.crm-form-embed__settings').querySelectorAll('.crm-form-embed__settings--hide-button');\n\t\t\tnodeList.forEach((node) => {\n\t\t\t\t// node.disabled = true;\n\t\t\t\tDom.attr(node, 'disabled', true);\n\t\t\t});\n\n\t\t\tif (!advanced)\n\t\t\t{\n\t\t\t\tanimateSwitching(\n\t\t\t\t\tevent.currentTarget.closest('.crm-form-embed__settings--option'),\n\t\t\t\t\t0,\n\t\t\t\t\t0,\n\t\t\t\t\ttrue\n\t\t\t\t);\n\t\t\t}\n\n\t\t\toptions.callback(forValue);\n\t\t}\n\n\t\tconst className = advanced ? 'crm-form-embed__settings-main--option --option-big' : 'crm-form-embed__settings--option';\n\n\t\tDom.append(Tag.render`\n\t\t\t<div\n\t\t\t\tclass=\"crm-form-embed__settings--hide-button ${className} ${forValue === options.value ? '--active' : ''}\"\n\t\t\t\tonclick=\"${Text.encode(handler)}\"\n\t\t\t\tdata-embed-key=\"${Text.encode(options.key)}\"\n\t\t\t\tdata-embed-value=\"${Text.encode(forValue)}\"\n\t\t\t\ttitle=\"${Text.encode(BX.Loc.getMessage('EMBED_SLIDER_OPTION_BUTTONSTYLE_LABEL'))}\"\n\t\t\t>\n\t\t\t\t<button class=\"ui-btn ui-btn-md ${Text.encode(type)}\">${Text.encode(BX.Loc.getMessage('EMBED_SLIDER_OPTION_BUTTONSTYLE_LABEL'))}</button>\n\t\t\t</div>\n\t\t`, options.node);\n\t}\n\n\tstatic renderLink(forValue, type: string, advanced: boolean, options: ControlOptions)\n\t{\n\t\tconst handler = (event) => {\n\t\t\tif (event.currentTarget.getAttribute('disabled') === 'true') { return; }\n\n\t\t\tconst nodeList = event.currentTarget.closest('.crm-form-embed__settings').querySelectorAll('.crm-form-embed__settings--hide-link');\n\t\t\tnodeList.forEach((node) => {\n\t\t\t\t// node.disabled = true;\n\t\t\t\tDom.attr(node, 'disabled', true);\n\t\t\t});\n\n\t\t\tif (!advanced)\n\t\t\t{\n\t\t\t\tanimateSwitching(\n\t\t\t\t\tevent.currentTarget.closest('.crm-form-embed__settings--option'),\n\t\t\t\t\t0,\n\t\t\t\t\t0,\n\t\t\t\t\ttrue\n\t\t\t\t);\n\t\t\t}\n\n\t\t\toptions.callback(forValue);\n\t\t}\n\n\t\tconst className = advanced ? 'crm-form-embed__settings-main--option --option-big' : 'crm-form-embed__settings--option';\n\n\t\tDom.append(Tag.render`\n\t\t\t<div\n\t\t\t\tclass=\"crm-form-embed__settings--hide-link ${className} ${forValue === options.value ? '--active' : ''}\"\n\t\t\t\tonclick=\"${Text.encode(handler)}\"\n\t\t\t\tdata-embed-key=\"${Text.encode(options.key)}\"\n\t\t\t\tdata-embed-value=\"${Text.encode(forValue)}\"\n\t\t\t>\n\t\t\t\t<a href =\"#\" class=\"crm-form-embed__option-link ${Text.encode(type)}\">${Text.encode(BX.Loc.getMessage('EMBED_SLIDER_OPTION_LINKSTYLE_LABEL'))}</a>\n\t\t\t</div>\n\t\t`, options.node);\n\t}\n\n\tstatic renderSwitcher(options: ControlOptions)\n\t{\n\t\t/**\n\t\t * @this Switcher\n\t\t */\n\t\tconst handler = function(event) {\n\t\t\tthis.setLoading(true);\n\t\t\toptions.callback(this.isChecked() ? '1' : '0').then(() => {\n\t\t\t\tthis.setLoading(false);\n\t\t\t});\n\t\t}\n\n\t\tconst switcherNode = document.createElement('span');\n\t\tconst switcherId = options.formId + '-' + options.key;\n\t\tswitcherNode.className = 'ui-switcher';\n\t\tswitcherNode.dataset.switcherId = switcherId;\n\t\tconst switcher = new top.BX.UI.Switcher({\n\t\t\tid: switcherId,\n\t\t\tnode: switcherNode,\n\t\t\tchecked: options.value === '1',\n\t\t\thandlers: {\n\t\t\t\ttoggled: handler,\n\t\t\t}\n\t\t});\n\n\t\tDom.append(switcher.getNode(), options.node);\n\t}\n\n\tstatic renderColorPicker(subtype: string, options: ControlOptions): ColorField\n\t{\n\t\t/**\n\t\t * @this ColorField\n\t\t */\n\t\tconst handler = function(event) {\n\t\t\tif (this instanceof ColorField) // double events with different context\n\t\t\t{\n\t\t\t\t/** @var IColorValue|ColorValue value */\n\t\t\t\tconst value = this.getValue();\n\t\t\t\tconst hexA = value.getHex() + getHexFromOpacity(value.getOpacity());\n\t\t\t\toptions.callback(hexA);\n\t\t\t}\n\t\t}\n\n\t\tconst colorPicker = createColorPicker(subtype, handler, handler);\n\t\tcolorPicker.setValue({'--color': hexToRgba(options.value)});\n\t\t// colorPicker.processor.setValue(options.value.substring(0,6));\n\t\t// colorPicker.processor.setOpacity(getOpacityFromHex(options.value.substring(6)));\n\t\tDom.append(colorPicker.getLayout(), options.node);\n\t}\n\n\tstatic renderOptionTitle(text: string): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"crm-form-embed__settings--option-title\">${text ? Text.encode(text) : ''}</div>\n\t\t`;\n\t}\n\n\tstatic renderLabel(text: string, buttonSetting: boolean = false): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"crm-form-embed__label-text ${buttonSetting ? '--button-setting' : ''}\">${text ? Text.encode(text) : ''}</div>\n\t\t`;\n\t}\n}\n\nfunction createColorPicker(subtype: string, onChange: function, onReset: function): ColorField\n{\n\treturn new ColorField({\n\t\tsubtype: subtype,\n\t\tonChange: onChange,\n\t\tonReset: onReset,\n\t});\n}\n\nfunction animateSwitching(loaderTarget: HTMLElement, targetWidth: number, targetHeight: number, resetPadding: false)\n{\n\tloaderTarget.innerHTML = '';\n\tif (targetWidth)\n\t{\n\t\tDom.style(loaderTarget, 'width', targetWidth+'px');\n\t}\n\tif (targetHeight)\n\t{\n\t\tDom.style(loaderTarget, 'height', targetHeight+'px');\n\t}\n\tif (resetPadding)\n\t{\n\t\tDom.style(loaderTarget, 'padding', '0');\n\t}\n\tloader.setOptions({size: 40});\n\tloader.show(loaderTarget);\n}","import {Dom, Event} from 'main.core';\n\nexport function handlerToggleClickMode(container: Element, checked: boolean)\n{\n\tconst section = container.closest('.ui-slider-section');\n\tconst headerBlock = section.querySelector('[data-roll=\"heading-block\"]');\n\tconst moreSettingsBtn = section.querySelector('[data-roll=\"data-more-settings\"]');\n\tconst blockCode = section.querySelector('[data-roll=\"crm-form-embed__settings\"]');\n\n\tif (checked)\n\t{\n\t\tif (moreSettingsBtn)\n\t\t{\n\t\t\tDom.addClass(moreSettingsBtn, \"--visible\");\n\t\t}\n\t\tDom.removeClass(headerBlock, \"--collapse\");\n\t\tDom.style(blockCode, 'height', blockCode.scrollHeight + \"px\");\n\t}\n\telse\n\t{\n\t\tif (moreSettingsBtn)\n\t\t{\n\t\t\tDom.removeClass(moreSettingsBtn, \"--visible\");\n\t\t}\n\t\tDom.addClass(headerBlock, \"--collapse\");\n\t\tDom.style(blockCode, 'height', blockCode.scrollHeight + \"px\");\n\t\t// blockCode.clientHeight;\n\t\tDom.style(blockCode, 'height', \"0\");\n\t}\n\n\tEvent.unbind(blockCode, \"transitionend\", transitionHandlerForSettingsSection);\n\tEvent.bind(blockCode, \"transitionend\", transitionHandlerForSettingsSection);\n}\n\nfunction transitionHandlerForSettingsSection(event)\n{\n\tconst section = event.currentTarget.closest('.ui-slider-section');\n\tconst blockCode = section.querySelector('[data-roll=\"crm-form-embed__settings\"]');\n\tif (Dom.style(blockCode, 'height') !== \"0px\") {\n\t\tDom.style(blockCode, 'height', 'auto');\n\t}\n}","import {Type, Text, Tag, Dom, Event} from 'main.core';\nimport type {EmbedDataOptions, EmbedDataValues, EmbedDict} from \"../types\";\nimport {Controls} from \"./controls\";\nimport \"popup\";\nimport {isHexDark} from \"../util\";\nimport {handlerToggleClickMode} from \"./handler\";\nimport { EventEmitter, BaseEvent } from 'main.core.events'\n\ntype RenderOptions = {\n\toptions: Array,\n\tdict: EmbedDict,\n\tcallback: function,\n\tformId: number,\n\tdata: Object,\n\tvalues: Object,\n};\n\nexport class Wizard extends EventEmitter\n{\n\t#type: string;\n\t#options: Object;\n\t#values: Object;\n\t#dict: EmbedDict;\n\t#formId: number;\n\n\tconstructor(type: string, formId: number, values: EmbedDataValues, options: EmbedDataOptions, dict: EmbedDict)\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace(\"BX:Crm:Form:Embed\")\n\t\tthis.#type = type;\n\t\tthis.#options = options;\n\t\tthis.#values = values;\n\t\tthis.#dict = dict;\n\t\tthis.#formId = formId;\n\t}\n\n\tgetValues(): Object\n\t{\n\t\treturn this.#values;\n\t}\n\n\t#updateValues(data: Array, instantSave: boolean): Promise\n\t{\n\t\tconst promises = [];\n\t\tdata.forEach((field) => {\n\t\t\tpromises.push(this.#updateValue(field.name, field.value));\n\t\t});\n\n\t\treturn Promise.all(promises).then(() => {\n\t\t\tif (instantSave) {\n\t\t\t\tconst event = new BaseEvent({data: {type: this.#type}});\n\t\t\t\treturn this.emitAsync('BX:Crm:Form:Embed:needToSave', event);\n\t\t\t}\n\t\t\treturn Promise.resolve;\n\t\t});\n\t}\n\n\t#updateValue(name: string, value): Promise\n\t{\n\t\tconst aNames = name.split('.');\n\t\tconst updatedValues = this.#values;\n\t\tconst buildOption = function(values, names) {\n\t\t\tconst nextName = names.shift();\n\t\t\tif (names.length > 0)\n\t\t\t{\n\t\t\t\tvalues[nextName] = Type.isUndefined(values[nextName]) ? {} : values[nextName];\n\t\t\t\tbuildOption(values[nextName], names);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tvalues[nextName] = value;\n\t\t\t}\n\t\t};\n\t\tbuildOption(updatedValues, aNames);\n\n\t\tthis.#values = updatedValues;\n\n\t\tconst event = new BaseEvent({data: {type: this.#type, name: name, value: value}});\n\n\t\tthis.emit('BX:Crm:Form:Embed:valueChanged', event);\n\n\t\treturn Promise.resolve();\n\t}\n\n\trenderControlContainer(elem: Element | Array = null): HTMLElement\n\t{\n\t\tif (Type.isDomNode(elem))\n\t\t{\n\t\t\telem = [elem];\n\t\t}\n\t\tconst container = Tag.render`\n\t\t\t<div class=\"crm-form-embed__settings\"></div>\n\t\t`;\n\t\tif (Type.isArray(elem))\n\t\t{\n\t\t\telem.forEach((item) => Dom.append(item, container))\n\t\t}\n\t\treturn container;\n\t}\n\n\trenderRow(elem: Element | Array = null, last: boolean = false): HTMLElement\n\t{\n\t\tif (Type.isDomNode(elem))\n\t\t{\n\t\t\telem = [elem];\n\t\t}\n\t\tconst row = Tag.render`\n\t\t\t<div class=\"crm-form-embed__settings-row ${last ? '--last' : ''}\"></div>\n\t\t`;\n\t\tif (Type.isArray(elem))\n\t\t{\n\t\t\telem.forEach((item) => Dom.append(item, row))\n\t\t}\n\t\treturn row;\n\t}\n\n\trenderBlock(elem: Element | Array = null): HTMLElement\n\t{\n\t\tif (Type.isDomNode(elem))\n\t\t{\n\t\t\telem = [elem];\n\t\t}\n\t\tconst block = Tag.render`\n\t\t\t<div class=\"crm-form-embed__settings--block\"></div>\n\t\t`;\n\t\tif (Type.isArray(elem))\n\t\t{\n\t\t\telem.forEach((item) => Dom.append(item, block))\n\t\t}\n\t\treturn block;\n\t}\n\n\trenderCol(elem: Element | Array = null, first: boolean = false): HTMLElement\n\t{\n\t\tif (Type.isDomNode(elem))\n\t\t{\n\t\t\telem = [elem];\n\t\t}\n\t\tconst col = Tag.render`\n\t\t\t<div class=\"crm-form-embed__settings--block-col ${first ? '--first' : ''}\"></div>\n\t\t`;\n\t\tif (Type.isArray(elem))\n\t\t{\n\t\t\telem.forEach((item) => Dom.append(item, col))\n\t\t}\n\t\treturn col;\n\t}\n\n\trenderTitle(text: string, line: boolean = false): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"crm-form-embed__subtitle ${line ? '--line' : ''}\">${text ? text : ''}</div>\n\t\t`;\n\t}\n\n\trenderLabel(text: string, buttonSetting: boolean = false): HTMLElement\n\t{\n\t\treturn Renderer.renderLabel(text, buttonSetting);\n\t}\n\n\trenderOptionTo(container: HTMLElement, name: string, instantSave: boolean = true)\n\t{\n\t\tconst funcName = this.#getFuncName(name),\n\t\t\tfieldOptions = this.#getOptions(name),\n\t\t\tfieldValue = this.#getValue(name);\n\n\t\tif (Type.isFunction(Renderer[\"renderField\" + funcName]))\n\t\t{\n\t\t\tRenderer[\"renderField\" + funcName](\n\t\t\t\tcontainer,\n\t\t\t\tfieldValue,\n\t\t\t\t{\n\t\t\t\t\toptions: fieldOptions,\n\t\t\t\t\tdict: this.#dict,\n\t\t\t\t\tcallback: (data) => this.#updateValues(data, instantSave),\n\t\t\t\t\tformId: this.#formId,\n\t\t\t\t\tdata: this.#options,\n\t\t\t\t\tvalues: this.#values,\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tconsole.error('embed: ' + name + ' is not valid type');\n\t\t}\n\t}\n\n\trenderOption(name: string, instantSave: boolean = true): HTMLElement\n\t{\n\t\tconst container = this.renderControlContainer();\n\t\tthis.renderOptionTo(container, name, instantSave);\n\t\treturn container;\n\t}\n\n\trenderColorInline(container: HTMLElement, name: string, instantSave: boolean = true)\n\t{\n\t\tthis.renderOptionTo(container, name, instantSave);\n\t}\n\n\trenderColorPopup(container: HTMLElement, name: string, instantSave: boolean = true)\n\t{\n\t\tconst value = this.#getValue(name, '#FFFFFF');\n\t\tconst picker = this.renderOption(name, instantSave);\n\t\tconst popup = new BX.PopupWindow({\n\t\t\tcontent: picker,\n\t\t\tbindElement: container,\n\t\t\tautoHide: true,\n\t\t\tcloseByEsc: true,\n\t\t});\n\n\t\t// hack: hide color picker elements, embed.css\n\t\tDom.addClass(picker, 'crm-form-embed__color_popup');\n\n\t\tconst getStyle = function(valueHex: string): string {\n\t\t\tconst fgColor = isHexDark(valueHex) ? 'white' : 'black';\n\t\t\treturn `background-color: ${Text.encode(valueHex)}; color: ${fgColor}`;\n\t\t}\n\n\t\tconst getThemeClass = function(valueHex: string): string {\n\t\t\treturn isHexDark(valueHex) ? 'bitrix24-light-theme' : 'bitrix24-dark-theme';\n\t\t}\n\n\t\tconst button = Tag.render`\n\t\t\t<button class=\"ui-btn ui-btn-xs ui-btn-link ui-btn-hover ui-btn-icon-edit ui-btn-themes\"></button>\n\t\t`;\n\t\tEvent.bind(button, \"click\", (event) => popup.show());\n\n\t\tconst text = Tag.render`\n\t\t\t<span class=\"crm-form-embed__settings--color-text\">${Text.encode(value)}</span>\n\t\t`;\n\n\t\tDom.append(Controls.renderLabel(Renderer.getOptionKeyName(name), true), container);\n\t\tconst colorBox = Tag.render`\n\t\t\t<div class=\"crm-form-embed__settings--color ${getThemeClass(value)}\" style=\"${getStyle(value)}\">\n\t\t\t\t${text}\n\t\t\t\t${button}\n\t\t\t</div>\n\t\t`;\n\t\tDom.append(colorBox, container);\n\n\t\tthis.subscribe('BX:Crm:Form:Embed:valueChanged', (event) => {\n\t\t\tif (event.data.name === name)\n\t\t\t{\n\t\t\t\ttext.innerText = Text.encode(event.data.value);\n\t\t\t\tcolorBox.style = getStyle(event.data.value);\n\t\t\t\tDom.removeClass(\n\t\t\t\t\tcolorBox,\n\t\t\t\t\tgetThemeClass(event.data.value) === 'bitrix24-dark-theme'\n\t\t\t\t\t\t? 'bitrix24-light-theme'\n\t\t\t\t\t\t: 'bitrix24-dark-theme'\n\t\t\t\t);\n\t\t\t\tDom.addClass(colorBox, getThemeClass(event.data.value));\n\t\t\t}\n\t\t});\n\t}\n\n\t#getValue(name: string, defaultValue = ''): string | number\n\t{\n\t\tconst aName = name.split('.');\n\t\tlet fieldValue = this.#values;\n\t\taName.forEach((part) => {\n\t\t\tfieldValue = !Type.isUndefined(fieldValue[part]) ? fieldValue[part] : defaultValue;\n\t\t});\n\t\treturn fieldValue;\n\t}\n\n\t#getOptions(name: string): Array\n\t{\n\t\tconst aName = name.split('.');\n\n\t\tlet fieldOptions = this.#options;\n\t\taName.forEach((part) => {\n\t\t\tfieldOptions = !Type.isUndefined(fieldOptions[part]) ? fieldOptions[part] : [];\n\t\t});\n\t\treturn fieldOptions;\n\t}\n\n\t#getFuncName(name: string): string\n\t{\n\t\tconst aName = name.split('.');\n\t\tlet funcName = '';\n\t\taName.forEach((part) => {\n\t\t\tfuncName = funcName.concat(part.charAt(0).toUpperCase() + part.slice(1));\n\t\t});\n\t\treturn funcName;\n\t}\n}\n\nconst Renderer = {\n\trenderFieldDelay: function(container: HTMLElement, value: string, options: RenderOptions)\n\t{\n\t\tcontainer.innerHTML = '';\n\n\t\tconst handler = (val) => {\n\t\t\toptions.callback([{name: 'delay', value: val}]).then(() => {\n\t\t\t\tRenderer.renderFieldDelay(container, val, options);\n\t\t\t});\n\t\t};\n\n\t\tconst block = Tag.render`<div class=\"crm-form-embed__settings--block-input\"></div>`;\n\n\t\tControls.renderDropdown({\n\t\t\tcallback: handler,\n\t\t\tnode: block,\n\t\t\toptions: this.getOptions(options.options, 'delay', options.dict),\n\t\t\tvalue: value,\n\t\t\tkey: 'delay',\n\t\t\tkeyName: Renderer.getOptionKeyName('delay'),\n\t\t\tformId: options.formId,\n\t\t});\n\n\t\tDom.append(block, container);\n\t},\n\n\trenderFieldType: function(container: HTMLElement, value: string, options: RenderOptions)\n\t{\n\t\tcontainer.innerHTML = '';\n\n\t\tconst handler = (val) => {\n\t\t\toptions.callback([{name: 'type', value: val}]).then(() => {\n\t\t\t\tRenderer.renderFieldType(container, val, options);\n\t\t\t});\n\t\t};\n\n\t\tconst block = Tag.render`<div class=\"crm-form-embed__settings--block-input\"></div>`;\n\n\t\tControls.renderDropdown({\n\t\t\tcallback: handler,\n\t\t\tnode: block,\n\t\t\toptions: this.getOptions(options.options, 'type', options.dict),\n\t\t\tvalue: value,\n\t\t\tkey: 'type',\n\t\t\tkeyName: Renderer.getOptionKeyName('type'),\n\t\t\tformId: options.formId,\n\t\t});\n\n\t\tDom.append(block, container);\n\t},\n\n\trenderFieldPosition: function(container: HTMLElement, value: string, options: RenderOptions)\n\t{\n\t\tcontainer.innerHTML = '';\n\n\t\tconst controlOptions = this.getOptions(options.options, 'position', options.dict);\n\n\t\tconst handler = (val) => {\n\t\t\toptions.callback([{name: 'position', value: val}]).then(() => {\n\t\t\t\tRenderer.renderFieldPosition(container, val, options);\n\t\t\t});\n\t\t};\n\n\t\tconst handlerLeft = () => handler('left');\n\t\tconst handlerCenter = () => handler('center');\n\t\tconst handlerRight = () => handler('right');\n\n\t\tDom.append(Controls.renderOptionTitle(Renderer.getOptionKeyName('position')), container);\n\n\t\tconst row = Tag.render`<div class=\"crm-form-embed__settings\"></div>`;\n\n\t\tControls.renderSquareButton('left', {\n\t\t\tcallback: handlerLeft,\n\t\t\tnode: row,\n\t\t\toptions: controlOptions,\n\t\t\tvalue: value,\n\t\t\tkey: 'position',\n\t\t\tkeyName: Renderer.getOptionValueName('position', 'left', options.dict),\n\t\t\tformId: options.formId,\n\t\t});\n\n\t\tControls.renderSquareButton('center', {\n\t\t\tcallback: handlerCenter,\n\t\t\tnode: row,\n\t\t\toptions: controlOptions,\n\t\t\tvalue: value,\n\t\t\tkey: 'position',\n\t\t\tkeyName: Renderer.getOptionValueName('position', 'center', options.dict),\n\t\t\tformId: options.formId,\n\t\t});\n\n\t\tControls.renderSquareButton('right', {\n\t\t\tcallback: handlerRight,\n\t\t\tnode: row,\n\t\t\toptions: controlOptions,\n\t\t\tvalue: value,\n\t\t\tkey: 'position',\n\t\t\tkeyName: Renderer.getOptionValueName('position', 'right', options.dict),\n\t\t\tformId: options.formId,\n\t\t});\n\n\t\tDom.append(row, container);\n\t},\n\n\trenderFieldVertical: function(container: HTMLElement, value: string, options: RenderOptions)\n\t{\n\t\tcontainer.innerHTML = '';\n\n\t\tconst controlOptions = this.getOptions(options.options, 'vertical', options.dict);\n\n\t\tconst handler = (val) => {\n\t\t\toptions.callback([{name: 'vertical', value: val}]).then(() => {\n\t\t\t\tRenderer.renderFieldVertical(container, val, options);\n\t\t\t});\n\t\t};\n\n\t\tconst handlerBottom = () => handler('bottom');\n\t\tconst handlerTop = () => handler('top');\n\n\t\tDom.append(Controls.renderOptionTitle(Renderer.getOptionKeyName('vertical')), container);\n\n\t\tconst row = Tag.render`<div class=\"crm-form-embed__settings\"></div>`;\n\n\t\tControls.renderSquareButton('bottom', {\n\t\t\tcallback: handlerBottom,\n\t\t\tnode: row,\n\t\t\toptions: controlOptions,\n\t\t\tvalue: value,\n\t\t\tkey: 'vertical',\n\t\t\tkeyName: Renderer.getOptionValueName('vertical', 'bottom', options.dict),\n\t\t\tformId: options.formId,\n\t\t});\n\n\t\tControls.renderSquareButton('top', {\n\t\t\tcallback: handlerTop,\n\t\t\tnode: row,\n\t\t\toptions: controlOptions,\n\t\t\tvalue: value,\n\t\t\tkey: 'vertical',\n\t\t\tkeyName: Renderer.getOptionValueName('vertical', 'top', options.dict),\n\t\t\tformId: options.formId,\n\t\t});\n\n\t\tDom.append(row, container);\n\t},\n\n\trenderFieldButtonStyle: function(container: HTMLElement, value: string, options: RenderOptions)\n\t{\n\t\tif (Type.isStringFilled(options?.values?.button?.rounded) && Type.isStringFilled(options?.values?.button?.outlined))\n\t\t{\n\t\t\tvalue = options.values.button.rounded + ':' + options.values.button.outlined;\n\t\t}\n\n\t\tcontainer.innerHTML = '';\n\n\t\tconst controlOptions = this.getOptions(options.options, 'buttonStyle', options.dict);\n\n\t\tconst handler = (val) => {\n\t\t\tconst values = val.split(':');\n\t\t\toptions.callback([\n\t\t\t\t{name: 'button.rounded', value: values[0]},\n\t\t\t\t{name: 'button.outlined', value: values[1]},\n\t\t\t]).then(() => {\n\t\t\t\tRenderer.renderFieldButtonStyle(container, val, options);\n\t\t\t});\n\t\t};\n\n\t\tconst handlerPm = () => handler('0:0');\n\t\tconst handlerPmr = () => handler('1:0');\n\t\tconst handlerLb = () => handler('0:1');\n\t\tconst handlerLbr = () => handler('1:1');\n\n\t\tconst advanced = container.dataset.controlMode === 'advanced';\n\n\t\tControls.renderButton('0:0', 'ui-btn-primary', advanced, {\n\t\t\tcallback: handlerPm,\n\t\t\tnode: container,\n\t\t\toptions: controlOptions,\n\t\t\tvalue: value,\n\t\t\tkey: 'buttonStyle',\n\t\t\tkeyName: Renderer.getOptionValueName('buttonStyle', '0:0', options.dict),\n\t\t\tformId: options.formId,\n\t\t});\n\n\t\tControls.renderButton('1:0', 'ui-btn-primary ui-btn-round', advanced, {\n\t\t\tcallback: handlerPmr,\n\t\t\tnode: container,\n\t\t\toptions: controlOptions,\n\t\t\tvalue: value,\n\t\t\tkey: 'buttonStyle',\n\t\t\tkeyName: Renderer.getOptionValueName('buttonStyle', '1:0', options.dict),\n\t\t\tformId: options.formId,\n\t\t});\n\n\t\tControls.renderButton('0:1', 'ui-btn-light-border', advanced, {\n\t\t\tcallback: handlerLb,\n\t\t\tnode: container,\n\t\t\toptions: controlOptions,\n\t\t\tvalue: value,\n\t\t\tkey: 'buttonStyle',\n\t\t\tkeyName: Renderer.getOptionValueName('buttonStyle', '0:1', options.dict),\n\t\t\tformId: options.formId,\n\t\t});\n\n\t\tControls.renderButton('1:1', 'ui-btn-light-border ui-btn-round', advanced, {\n\t\t\tcallback: handlerLbr,\n\t\t\tnode: container,\n\t\t\toptions: controlOptions,\n\t\t\tvalue: value,\n\t\t\tkey: 'buttonStyle',\n\t\t\tkeyName: Renderer.getOptionValueName('buttonStyle', '1:1', options.dict),\n\t\t\tformId: options.formId,\n\t\t});\n\t},\n\n\trenderFieldButtonDecoration: function(container: HTMLElement, value: string, options: RenderOptions)\n\t{\n\t\tcontainer.innerHTML = '';\n\n\t\tconst controlOptions = this.getOptions(options.options, 'button.decoration', options.dict);\n\n\t\tconst handler = (val) => {\n\t\t\toptions.callback([{name: 'button.decoration', value: val}]).then(() => {\n\t\t\t\tRenderer.renderFieldButtonDecoration(container, val, options);\n\t\t\t});\n\t\t};\n\n\t\tconst handlerNoBorder = () => handler('');\n\t\tconst handlerDotted = () => handler('dotted');\n\t\tconst handlerLine = () => handler('solid');\n\n\t\tconst advanced = container.dataset.controlMode === 'advanced';\n\n\t\tControls.renderLink('', '--border-no', advanced, {\n\t\t\tcallback: handlerNoBorder,\n\t\t\tnode: container,\n\t\t\toptions: controlOptions,\n\t\t\tvalue: value,\n\t\t\tkey: 'button.decoration',\n\t\t\tkeyName: Renderer.getOptionValueName('button.decoration', '', options.dict),\n\t\t\tformId: options.formId,\n\t\t});\n\n\t\tControls.renderLink('dotted', '--border-dotted', advanced, {\n\t\t\tcallback: handlerDotted,\n\t\t\tnode: container,\n\t\t\toptions: controlOptions,\n\t\t\tvalue: value,\n\t\t\tkey: 'button.decoration',\n\t\t\tkeyName: Renderer.getOptionValueName('button.decoration', 'dotted', options.dict),\n\t\t\tformId: options.formId,\n\t\t});\n\n\t\tControls.renderLink('solid', '--border-line', advanced, {\n\t\t\tcallback: handlerLine,\n\t\t\tnode: container,\n\t\t\toptions: controlOptions,\n\t\t\tvalue: value,\n\t\t\tkey: 'button.decoration',\n\t\t\tkeyName: Renderer.getOptionValueName('button.decoration', 'solid', options.dict),\n\t\t\tformId: options.formId,\n\t\t});\n\t},\n\n\trenderFieldButtonFont: function(container: HTMLElement, value: string, options: RenderOptions)\n\t{\n\t\tcontainer.innerHTML = '';\n\n\t\tconst controlOptions = this.getOptions(options.options, 'button.font', options.dict);\n\n\t\tconst handler = (val) => {\n\t\t\toptions.callback([{name: 'button.font', value: val}]).then(() => {\n\t\t\t\tRenderer.renderFieldButtonFont(container, val, options);\n\t\t\t});\n\t\t};\n\n\t\tconst handlerModern = () => handler('modern');\n\t\tconst handlerClassic = () => handler('classic');\n\t\tconst handlerElegant = () => handler('elegant');\n\n\t\tconst advanced = container.dataset.controlMode === 'advanced';\n\n\t\tControls.renderTypeface('modern', advanced, {\n\t\t\tcallback: handlerModern,\n\t\t\tnode: container,\n\t\t\toptions: controlOptions,\n\t\t\tvalue: value,\n\t\t\tkey: 'button.font',\n\t\t\tkeyName: Renderer.getOptionValueName('button.font', 'modern', options.dict),\n\t\t\tformId: options.formId,\n\t\t});\n\n\t\tControls.renderTypeface('classic', advanced, {\n\t\t\tcallback: handlerClassic,\n\t\t\tnode: container,\n\t\t\toptions: controlOptions,\n\t\t\tvalue: value,\n\t\t\tkey: 'button.font',\n\t\t\tkeyName: Renderer.getOptionValueName('button.font', 'classic', options.dict),\n\t\t\tformId: options.formId,\n\t\t});\n\n\t\tControls.renderTypeface('elegant', advanced, {\n\t\t\tcallback: handlerElegant,\n\t\t\tnode: container,\n\t\t\toptions: controlOptions,\n\t\t\tvalue: value,\n\t\t\tkey: 'button.font',\n\t\t\tkeyName: Renderer.getOptionValueName('button.font', 'elegant', options.dict),\n\t\t\tformId: options.formId,\n\t\t});\n\t},\n\n\trenderFieldButtonAlign: function(container: HTMLElement, value: string, options: RenderOptions)\n\t{\n\t\tcontainer.innerHTML = '';\n\n\t\tconst controlOptions = this.getOptions(options.options, 'button.align', options.dict);\n\n\t\tconst handler = (val) => {\n\t\t\toptions.callback([{name: 'button.align', value: val}]).then(() => {\n\t\t\t\tRenderer.renderFieldButtonAlign(container, val, options);\n\t\t\t});\n\t\t};\n\n\t\tconst handlerLeft = () => handler('left');\n\t\tconst handlerCenter = () => handler('center');\n\t\tconst handlerRight = () => handler('right');\n\n\t\t// container.appendChild(Controls.renderOptionTitle(Renderer.getOptionKeyName('button.align')));\n\n\t\tconst row = Tag.render`<div class=\"crm-form-embed__settings\"></div>`;\n\n\t\tControls.renderSquareButton('left', {\n\t\t\tcallback: handlerLeft,\n\t\t\tnode: row,\n\t\t\toptions: controlOptions,\n\t\t\tvalue: value,\n\t\t\tkey: 'button.align',\n\t\t\tkeyName: Renderer.getOptionValueName('button.align', 'left', options.dict),\n\t\t\tformId: options.formId,\n\t\t});\n\n\t\tControls.renderSquareButton('center', {\n\t\t\tcallback: handlerCenter,\n\t\t\tnode: row,\n\t\t\toptions: controlOptions,\n\t\t\tvalue: value,\n\t\t\tkey: 'button.align',\n\t\t\tkeyName: Renderer.getOptionValueName('button.align', 'center', options.dict),\n\t\t\tformId: options.formId,\n\t\t});\n\n\t\tControls.renderSquareButton('right', {\n\t\t\tcallback: handlerRight,\n\t\t\tnode: row,\n\t\t\toptions: controlOptions,\n\t\t\tvalue: value,\n\t\t\tkey: 'button.align',\n\t\t\tkeyName: Renderer.getOptionValueName('button.align', 'right', options.dict),\n\t\t\tformId: options.formId,\n\t\t});\n\n\t\tDom.append(row, container);\n\t},\n\n\trenderFieldLinkAlign: function(container: HTMLElement, value: string, options: RenderOptions)\n\t{\n\t\tcontainer.innerHTML = '';\n\n\t\tconst controlOptions = this.getOptions(options.options, 'link.align', options.dict);\n\n\t\tconst handler = (val) => {\n\t\t\toptions.callback([{name: 'link.align', value: val}]).then(() => {\n\t\t\t\tRenderer.renderFieldLinkAlign(container, val, options);\n\t\t\t});\n\t\t};\n\n\t\tconst handlerInline = () => handler('inline');\n\t\tconst handlerLeft = () => handler('left');\n\t\tconst handlerCenter = () => handler('center');\n\t\tconst handlerRight = () => handler('right');\n\n\t\t// container.appendChild(Controls.renderOptionTitle(Renderer.getOptionKeyName('button.align')));\n\n\t\tconst row = Tag.render`<div class=\"crm-form-embed__settings\"></div>`;\n\n\t\tControls.renderSquareButton('inline', {\n\t\t\tcallback: handlerInline,\n\t\t\tnode: row,\n\t\t\toptions: controlOptions,\n\t\t\tvalue: value,\n\t\t\tkey: 'link.align',\n\t\t\tkeyName: Renderer.getOptionValueName('link.align', 'inline', options.dict),\n\t\t\tformId: options.formId,\n\t\t});\n\n\t\tControls.renderSquareButton('left', {\n\t\t\tcallback: handlerLeft,\n\t\t\tnode: row,\n\t\t\toptions: controlOptions,\n\t\t\tvalue: value,\n\t\t\tkey: 'link.align',\n\t\t\tkeyName: Renderer.getOptionValueName('link.align', 'left', options.dict),\n\t\t\tformId: options.formId,\n\t\t});\n\n\t\tControls.renderSquareButton('center', {\n\t\t\tcallback: handlerCenter,\n\t\t\tnode: row,\n\t\t\toptions: controlOptions,\n\t\t\tvalue: value,\n\t\t\tkey: 'link.align',\n\t\t\tkeyName: Renderer.getOptionValueName('link.align', 'center', options.dict),\n\t\t\tformId: options.formId,\n\t\t});\n\n\t\tControls.renderSquareButton('right', {\n\t\t\tcallback: handlerRight,\n\t\t\tnode: row,\n\t\t\toptions: controlOptions,\n\t\t\tvalue: value,\n\t\t\tkey: 'link.align',\n\t\t\tkeyName: Renderer.getOptionValueName('link.align', 'right', options.dict),\n\t\t\tformId: options.formId,\n\t\t});\n\n\t\tDom.append(row, container);\n\t},\n\n\trenderFieldButtonPlain: function(container: HTMLElement, value: string, options: RenderOptions)\n\t{\n\t\tcontainer.innerHTML = '';\n\n\t\tconst handler = (val) => {\n\t\t\toptions.callback([{name: 'button.plain', value: val}]).then(() => {\n\t\t\t\tRenderer.renderFieldButtonPlain(container, val, options);\n\t\t\t});\n\t\t};\n\n\t\tconst block = Tag.render`<div class=\"crm-form-embed__settings--block-input\"></div>`;\n\n\t\tControls.renderDropdown({\n\t\t\tcallback: handler,\n\t\t\tnode: block,\n\t\t\toptions: this.getOptions(options.options, 'button.plain', options.dict),\n\t\t\tvalue: value,\n\t\t\tkey: 'button.plain',\n\t\t\tkeyName: Renderer.getOptionKeyName('button.plain'),\n\t\t\tformId: options.formId,\n\t\t});\n\n\t\tDom.append(block, container);\n\t},\n\n\trenderFieldButtonText: function(container: HTMLElement, value: string, options: RenderOptions)\n\t{\n\t\tcontainer.innerHTML = '';\n\n\t\tconst handler = (val) => {\n\t\t\tif (!Type.isStringFilled(val))\n\t\t\t{\n\t\t\t\tval = BX.Loc.getMessage('EMBED_SLIDER_BUTTONTEXT_PLACEHOLDER');\n\t\t\t}\n\t\t\toptions.callback([{name: 'button.text', value: val}]).then(() => {\n\t\t\t\tRenderer.renderFieldButtonText(container, val, options);\n\t\t\t});\n\t\t};\n\n\t\tconst block = Tag.render`<div class=\"crm-form-embed__settings--block-input\"></div>`;\n\n\t\tconst advanced = container.dataset.controlMode === 'advanced';\n\n\t\tControls.renderText({\n\t\t\tcallback: handler,\n\t\t\tnode: block,\n\t\t\toptions: null,\n\t\t\tvalue: value ? value : BX.Loc.getMessage('EMBED_SLIDER_BUTTONTEXT_PLACEHOLDER'),\n\t\t\tkey: 'button.text',\n\t\t\tkeyName: Renderer.getOptionKeyName('button.text'),\n\t\t\tformId: options.formId,\n\t\t}, advanced);\n\n\t\tDom.append(block, container);\n\t},\n\n\trenderFieldButtonColorBackground: function(container: HTMLElement, value: string, options: RenderOptions)\n\t{\n\t\tcontainer.innerHTML = '';\n\n\t\tconst advanced = container.dataset.controlMode === 'advanced';\n\n\t\tconst handler = (val) => {\n\t\t\tconst fields = [\n\t\t\t\t{name: 'button.color.background', value: val}\n\t\t\t];\n\t\t\tif (!advanced)\n\t\t\t{\n\t\t\t\tfields.push({name: 'button.color.backgroundHover', value: val});\n\t\t\t}\n\n\t\t\toptions.callback(fields).then(() => {\n\t\t\t\t// Renderer.renderFieldButtonColorBackground(container, val, options);\n\t\t\t});\n\t\t};\n\n\t\tControls.renderColorPicker('color', {\n\t\t\tcallback: handler,\n\t\t\tnode: container,\n\t\t\toptions: null,\n\t\t\tvalue: value,\n\t\t\tkey: 'button.color.background',\n\t\t\tkeyName: Renderer.getOptionKeyName('button.color.background'),\n\t\t\tformId: options.formId,\n\t\t});\n\t},\n\n\trenderFieldButtonColorBackgroundHover: function(container: HTMLElement, value: string, options: RenderOptions)\n\t{\n\t\tcontainer.innerHTML = '';\n\n\t\tconst advanced = container.dataset.controlMode === 'advanced';\n\n\t\tconst handler = (val) => {\n\t\t\toptions.callback([{name: 'button.color.backgroundHover', value: val}]).then(() => {\n\t\t\t\t// Renderer.renderFieldButtonColorBackgroundHover(container, val, options);\n\t\t\t});\n\t\t};\n\n\t\tControls.renderColorPicker('color', {\n\t\t\tcallback: handler,\n\t\t\tnode: container,\n\t\t\toptions: null,\n\t\t\tvalue: value,\n\t\t\tkey: 'button.color.backgroundHover',\n\t\t\tkeyName: Renderer.getOptionKeyName('button.color.backgroundHover'),\n\t\t\tformId: options.formId,\n\t\t});\n\t},\n\n\trenderFieldButtonColorText: function(container: HTMLElement, value: string, options: RenderOptions)\n\t{\n\t\tcontainer.innerHTML = '';\n\n\t\tconst advanced = container.dataset.controlMode === 'advanced';\n\n\t\tconst handler = (val) => {\n\t\t\tconst fields = [\n\t\t\t\t{name: 'button.color.text', value: val}\n\t\t\t];\n\t\t\tif (!advanced)\n\t\t\t{\n\t\t\t\tfields.push({name: 'button.color.textHover', value: val});\n\t\t\t}\n\n\t\t\toptions.callback(fields).then(() => {\n\t\t\t\t// Renderer.renderFieldButtonColorText(container, val, options);\n\t\t\t});\n\t\t};\n\n\t\tControls.renderColorPicker('color', {\n\t\t\tcallback: handler,\n\t\t\tnode: container,\n\t\t\toptions: null,\n\t\t\tvalue: value,\n\t\t\tkey: 'button.color.text',\n\t\t\tkeyName: Renderer.getOptionKeyName('button.color.text'),\n\t\t\tformId: options.formId,\n\t\t});\n\t},\n\n\trenderFieldButtonColorTextHover: function(container: HTMLElement, value: string, options: RenderOptions)\n\t{\n\t\tcontainer.innerHTML = '';\n\n\t\tconst advanced = container.dataset.controlMode === 'advanced';\n\n\t\tconst handler = (val) => {\n\t\t\toptions.callback([{name: 'button.color.textHover', value: val}]).then(() => {\n\t\t\t\t// Renderer.renderFieldButtonColorTextHover(container, val, options);\n\t\t\t});\n\t\t};\n\n\t\tControls.renderColorPicker('color', {\n\t\t\tcallback: handler,\n\t\t\tnode: container,\n\t\t\toptions: null,\n\t\t\tvalue: value,\n\t\t\tkey: 'button.color.textHover',\n\t\t\tkeyName: Renderer.getOptionKeyName('button.color.textHover'),\n\t\t\tformId: options.formId,\n\t\t});\n\t},\n\n\trenderFieldButtonUse: function(container: HTMLElement, value: string, options: RenderOptions)\n\t{\n\t\tcontainer.innerHTML = '';\n\n\t\tconst handler = (val) => {\n\t\t\treturn options.callback([{name: 'button.use', value: val}]).then(() => {\n\t\t\t\tRenderer.renderFieldButtonUse(container, val, options);\n\t\t\t\thandlerToggleClickMode(container, val === '1');\n\t\t\t});\n\t\t};\n\n\t\tControls.renderSwitcher({\n\t\t\tcallback: handler,\n\t\t\tnode: container,\n\t\t\toptions: null,\n\t\t\tvalue: value,\n\t\t\tkey: 'button.use',\n\t\t\tkeyName: Renderer.getOptionKeyName('button.use'),\n\t\t\tformId: options.formId,\n\t\t});\n\t},\n\n\trenderLabel: function(text: string, buttonSetting: boolean = false): HTMLElement\n\t{\n\t\treturn Controls.renderLabel(text, buttonSetting);\n\t},\n\n\tgetOptions: function(options, optionName: string, dict: EmbedDict): Object\n\t{\n\t\tconst result = {};\n\t\toptions.forEach((value) => {\n\t\t\tresult[value] = Renderer.getOptionValueName(optionName, value, dict);\n\t\t});\n\t\treturn result;\n\t},\n\n\tgetOptionKeyName: function(key: string): string\n\t{\n\t\tconst msgKey = 'EMBED_SLIDER_OPTION_' + key.toUpperCase();\n\t\treturn BX.Loc.hasMessage(msgKey) ? BX.Loc.getMessage(msgKey) : Text.encode(key);\n\t},\n\n\tgetOptionValueName: function(key: string, value: string, dict: EmbedDict): Object\n\t{\n\t\tconst keySplit = key.split('.');\n\t\tconst getDictValues = (parts: Array, dict: Object) => {\n\t\t\tconst nextKey = parts.shift();\n\t\t\tif (parts.length > 0)\n\t\t\t{\n\t\t\t\treturn getDictValues(parts, !Type.isUndefined(dict[nextKey]) ? dict[nextKey] : {});\n\t\t\t}\n\t\t\treturn !Type.isUndefined(dict[nextKey + 's']) ? dict[nextKey + 's'] : [];\n\t\t}\n\t\tconst dictValues = getDictValues(keySplit, dict['viewOptions']);\n\n\t\tlet result = value;\n\t\tif (Type.isArray(dictValues)) {\n\t\t\tdictValues.forEach(elem => {\n\t\t\t\tif (elem.id.toString() === value.toString()) {\n\t\t\t\t\tresult = elem.name;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\treturn Text.encode(result);\n\t},\n}","import {Tag, Dom, Type} from 'main.core';\nimport {Form} from './form';\nimport {DataProvider} from \"../../data_provider\";\nimport {Wizard} from \"../../wizard/wizard\";\nimport {openFeedbackForm} from '../../util';\nimport {Layout} from 'ui.sidepanel.layout';\nimport {HELP_CENTER_ID, HELP_CENTER_URL} from \"../../tab\";\n\nexport class Auto extends Form\n{\n\t#container: HTMLElement;\n\t#wizard: Wizard;\n\t#rendered: boolean = false;\n\n\tconstructor(formId: number, dataProvider: DataProvider)\n\t{\n\t\tsuper(formId, dataProvider);\n\t\tthis.#container = super.render();\n\t}\n\n\tload(force: boolean = false): Promise\n\t{\n\t\treturn super.load(force).then(() => {\n\t\t\tthis.#wizard = new Wizard(\n\t\t\t\t'auto',\n\t\t\t\tthis.formId,\n\t\t\t\tthis.dataProvider.getValues('auto'),\n\t\t\t\tthis.dataProvider.getOptions('auto'),\n\t\t\t\tthis.dataProvider.getDict()\n\t\t\t);\n\t\t\tthis.#wizard.subscribe('BX:Crm:Form:Embed:needToSave', (event) => {\n\t\t\t\treturn this.save();\n\t\t\t});\n\t\t\tthis.#wizard.subscribe('BX:Crm:Form:Embed:valueChanged', (event) => {\n\t\t\t\tthis.updateDependentFields(this.#container, event.data.name, event.data.value);\n\t\t\t});\n\t\t\tif (!this.#rendered)\n\t\t\t{\n\t\t\t\tthis.render()\n\t\t\t}\n\t\t}).catch((error) => {\n\t\t\tconsole.error(error);\n\t\t\tif (!this.#rendered)\n\t\t\t{\n\t\t\t\tthis.#renderError();\n\t\t\t}\n\t\t});\n\t}\n\n\tsave(): Promise\n\t{\n\t\tthis.data.embed.viewValues['auto'] = this.#wizard.getValues();\n\t\treturn super.save();\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tthis.#container.innerHTML = '';\n\n\t\tconst headerSection = this.renderHeaderSection(\n\t\t\t'clock',\n\t\t\tBX.Loc.getMessage('EMBED_SLIDER_AUTO_TITLE'),\n\t\t\tBX.Loc.getMessage('EMBED_SLIDER_AUTO_DESC'),\n\t\t\tHELP_CENTER_ID,\n\t\t\tHELP_CENTER_URL\n\t\t);\n\t\tDom.append(headerSection, this.#container);\n\n\t\tif (!super.loaded)\n\t\t{\n\t\t\tthis.loader.show(this.#container);\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// update with actual help-center link\n\t\t\tDom.replace(headerSection, this.renderHeaderSection(\n\t\t\t\t'clock',\n\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_AUTO_TITLE'),\n\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_AUTO_DESC'),\n\t\t\t\tthis.dataProvider.data.embed.helpCenterId,\n\t\t\t\tthis.dataProvider.data.embed.helpCenterUrl\n\t\t\t));\n\n\t\t\tDom.append(this.renderPreviewSection(\n\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_QR_TITLE'),\n\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_QR_DESC'),\n\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_OPEN_IN_NEW_TAB'),\n\t\t\t\tthis.dataProvider.data.embed.previewLink.replace('#preview#', 'auto')\n\t\t\t), this.#container);\n\n\t\t\tDom.append(this.renderBaseSettings(), this.#container);\n\n\t\t\tconst code = this.data.embed.scripts['auto'].text;\n\t\t\tDom.append(this.renderCodeBlock(code), this.#container);\n\t\t\tDom.append(this.renderCopySection(\n\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_COPY_CODE'),\n\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_COPY_CODE2'),\n\t\t\t\tcode,\n\t\t\t\tthis.renderBubble(BX.Loc.getMessage('EMBED_SLIDER_COPY_CODE_BUBBLE_AUTO'), true)\n\t\t\t), this.#container);\n\n\t\t\tthis.#rendered = true;\n\t\t}\n\n\t\treturn this.#container;\n\t}\n\n\t#renderError(): HTMLElement\n\t{\n\t\tthis.#container.innerHTML = '';\n\t\tDom.append(super.renderError(super.data), this.#container);\n\t\tthis.#rendered = true;\n\t}\n\n\trenderBaseSettings(): HTMLElement\n\t{\n\t\tconst section = this.renderSection(\n\t\t\tthis.renderSettingsHeader(BX.Loc.getMessage('EMBED_SLIDER_SETTINGS_HEADING'), false, () => {\n\t\t\t\tBX.SidePanel.Instance.open(\"crm.webform:embed:\" + this.formId + \":auto:expert\", {\n\t\t\t\t\twidth: 920,\n\t\t\t\t\tcacheable: false,\n\t\t\t\t\tcontentCallback: () => this.#createAdvancedSettingsLayout(),\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tonCloseComplete: (event) => {\n\t\t\t\t\t\t\tthis.load(true).then(() => {\n\t\t\t\t\t\t\t\tthis.render();\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t})\n\t\t);\n\n\t\tconst wrapper = Tag.render`<div class=\"crm-form-embed__basic\"></div>`;\n\n\t\tthis.#wizard.renderOptionTo(wrapper, 'delay', true);\n\t\tDom.addClass(wrapper.querySelector('.ui-ctl-dropdown'), 'crm-form-embed__select--time');\n\n\t\tDom.append(wrapper, section);\n\t\treturn section;\n\t}\n\n\t#createAdvancedSettingsLayout(): HTMLElement\n\t{\n\t\tconst layoutContent = this.#renderAdvancedSettingsLayoutContent()\n\n\t\tthis.#wizard.subscribe('BX:Crm:Form:Embed:valueChanged', (event) => {\n\t\t\tthis.updateDependentFields(layoutContent, event.data.name, event.data.value);\n\t\t});\n\n\t\treturn Layout.createContent({\n\t\t\textensions: ['crm.form.embed', 'ui.sidepanel-content', 'ui.forms', 'landing.ui.field.color', 'ui.switcher'],\n\t\t\ttitle: BX.Loc.getMessage('EMBED_SLIDER_EXPERT_MODE_TITLE'),\n\t\t\tdesign: {\n\t\t\t\tsection: false,\n\t\t\t},\n\t\t\ttoolbar ({Button}): Array\n\t\t\t{\n\t\t\t\treturn [\n\t\t\t\t\tnew Button({\n\t\t\t\t\t\t// icon: Button.Icon.SETTING,\n\t\t\t\t\t\tcolor: Button.Color.LIGHT_BORDER,\n\t\t\t\t\t\ttext: BX.Loc.getMessage('EMBED_SLIDER_TOOLBAR_BTN_FEEDBACK'),\n\t\t\t\t\t\tonclick: openFeedbackForm,\n\t\t\t\t\t}),\n\t\t\t\t];\n\t\t\t},\n\t\t\tcontent: () => layoutContent,\n\t\t\tbuttons: ({SaveButton, ApplyButton, cancelButton}) => {\n\t\t\t\treturn [\n\t\t\t\t\tnew SaveButton({\n\t\t\t\t\t\tonclick: btn => {\n\t\t\t\t\t\t\tbtn.setWaiting(true);\n\t\t\t\t\t\t\tthis.save().then(() => {\n\t\t\t\t\t\t\t\tbtn.setWaiting(false);\n\t\t\t\t\t\t\t\tthis.render();\n\t\t\t\t\t\t\t\tBX.SidePanel.Instance.close();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}),\n\t\t\t\t\tnew ApplyButton({\n\t\t\t\t\t\tonclick: btn => {\n\t\t\t\t\t\t\tbtn.setWaiting(true);\n\t\t\t\t\t\t\tthis.save().then(() => {\n\t\t\t\t\t\t\t\tbtn.setWaiting(false);\n\t\t\t\t\t\t\t\tthis.render();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}),\n\t\t\t\t\tcancelButton,\n\t\t\t\t];\n\t\t\t},\n\t\t});\n\t}\n\n\t#renderAdvancedSettingsLayoutContent(): HTMLElement\n\t{\n\t\tconst container = this.renderContainer();\n\n\t\tDom.append(this.renderHeaderSection(\n\t\t\t'clock',\n\t\t\tBX.Loc.getMessage('EMBED_SLIDER_AUTO_TITLE2'),\n\t\t\tBX.Loc.getMessage('EMBED_SLIDER_AUTO_DESC2'),\n\t\t\tthis.dataProvider.data.embed.helpCenterId,\n\t\t\tthis.dataProvider.data.embed.helpCenterUrl\n\t\t), container);\n\n\t\tconst stepperInner = Tag.render`<div></div>`;\n\n\t\tDom.append(this.#wizard.renderControlContainer([\n\t\t\tthis.#wizard.renderOption('delay', false),\n\t\t\tthis.#wizard.renderOption('type', false),\n\t\t]), stepperInner);\n\n\t\tconst containerPosition = Tag.render`<div class=\"crm-form-embed__settings--side-block\"></div>`;\n\t\tconst containerVertical = Tag.render`<div data-option=\"vertical\"></div>`;\n\t\tthis.#wizard.renderOptionTo(containerPosition, 'position', false);\n\t\tthis.#wizard.renderOptionTo(containerVertical, 'vertical', false);\n\t\tconst containerPositionVertical = this.#wizard.renderControlContainer([\n\t\t\tcontainerPosition,\n\t\t\tcontainerVertical,\n\t\t]);\n\t\tDom.append(containerPositionVertical, stepperInner);\n\n\t\tconst stepperContent = [\n\t\t\t{\n\t\t\t\thtml: [\n\t\t\t\t\t{\n\t\t\t\t\t\theader: BX.Loc.getMessage('EMBED_SLIDER_AUTO_WIZARD_TITLE'),\n\t\t\t\t\t\tnode: stepperInner,\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t}\n\t\t];\n\n\t\tDom.append(this.renderStepperSection(stepperContent), container);\n\n\t\t// TODO field dependency\n\t\tthis.updateDependentFields(container, 'type', this.data.embed.viewValues['auto']['type']);\n\n\t\treturn container;\n\t}\n}","import {Tag, Type, Dom, Event} from 'main.core';\nimport {Form} from './form';\nimport {DataProvider} from \"../../data_provider\";\nimport {Wizard} from \"../../wizard/wizard\";\nimport {openFeedbackForm} from '../../util';\nimport {Layout} from 'ui.sidepanel.layout';\nimport {HELP_CENTER_ID, HELP_CENTER_URL} from \"../../tab\";\nimport { EventEmitter } from 'main.core.events'\nimport \"ui.alerts\";\n\nexport class Click extends Form\n{\n\t#container: HTMLElement;\n\t#wizard: Wizard;\n\t#rendered: boolean = false;\n\n\tconstructor(formId: number, dataProvider: DataProvider)\n\t{\n\t\tsuper(formId, dataProvider);\n\t\tthis.#container = super.render();\n\t}\n\n\tload(force: boolean = false): Promise\n\t{\n\t\treturn super.load(force).then(() => {\n\t\t\tthis.#wizard = new Wizard(\n\t\t\t\t'click',\n\t\t\t\tthis.formId,\n\t\t\t\tthis.dataProvider.getValues('click'),\n\t\t\t\tthis.dataProvider.getOptions('click'),\n\t\t\t\tthis.dataProvider.getDict()\n\t\t\t);\n\t\t\tthis.#wizard.subscribe('BX:Crm:Form:Embed:needToSave', (event) => {\n\t\t\t\treturn this.save();\n\t\t\t});\n\t\t\tthis.#wizard.subscribe('BX:Crm:Form:Embed:valueChanged', (event) => {\n\t\t\t\tthis.updateDependentFields(this.#container, event.data.name, event.data.value);\n\t\t\t});\n\t\t\tif (!this.#rendered)\n\t\t\t{\n\t\t\t\tthis.render();\n\t\t\t}\n\t\t}).catch((error) => {\n\t\t\tconsole.error(error);\n\t\t\tif (!this.#rendered)\n\t\t\t{\n\t\t\t\tthis.#renderError();\n\t\t\t}\n\t\t});\n\t}\n\n\tsave(): Promise\n\t{\n\t\tthis.dataProvider.updateValues('click', {...this.#wizard.getValues()});\n\t\treturn super.save();\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tthis.#container.innerHTML = '';\n\n\t\tconst headerSection = this.renderHeaderSection(\n\t\t\t'click',\n\t\t\tBX.Loc.getMessage('EMBED_SLIDER_CLICK_TITLE'),\n\t\t\tBX.Loc.getMessage('EMBED_SLIDER_CLICK_DESC'),\n\t\t\tHELP_CENTER_ID,\n\t\t\tHELP_CENTER_URL\n\t\t);\n\t\tDom.append(headerSection, this.#container);\n\n\t\tif (!super.loaded)\n\t\t{\n\t\t\tthis.loader.show(this.#container);\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// update with actual help-center link\n\t\t\tDom.replace(headerSection, this.renderHeaderSection(\n\t\t\t\t'click',\n\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_CLICK_TITLE'),\n\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_CLICK_DESC'),\n\t\t\t\tthis.dataProvider.data.embed.helpCenterId,\n\t\t\t\tthis.dataProvider.data.embed.helpCenterUrl\n\t\t\t));\n\n\t\t\tDom.append(this.renderPreviewSection(\n\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_QR_TITLE'),\n\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_QR_DESC'),\n\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_OPEN_IN_NEW_TAB'),\n\t\t\t\tthis.dataProvider.data.embed.previewLink.replace('#preview#', 'click')\n\t\t\t), this.#container);\n\n\t\t\tDom.append(this.renderFormSettings(), this.#container);\n\t\t\tDom.append(this.renderButtonSettings(), this.#container);\n\n\t\t\tconst code = this.dataProvider.data.embed.scripts['click'].text;\n\t\t\tDom.append(this.renderCodeBlock(code), this.#container);\n\t\t\tDom.append(this.renderCopySection(\n\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_COPY_CODE'),\n\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_COPY_CODE2'),\n\t\t\t\tcode,\n\t\t\t\tthis.renderBubble(BX.Loc.getMessage('EMBED_SLIDER_COPY_CODE_BUBBLE_CLICK'), true)\n\t\t\t), this.#container);\n\n\t\t\tthis.#rendered = true;\n\t\t}\n\n\t\treturn this.#container;\n\t}\n\n\t#renderError(): HTMLElement\n\t{\n\t\tthis.#container.innerHTML = '';\n\t\tDom.append(super.renderError(super.dataProvider.data), this.#container);\n\t\tthis.#rendered = true;\n\t}\n\n\trenderFormSettings(): HTMLElement\n\t{\n\t\tconst section = this.renderSection(\n\t\t\tthis.renderSettingsHeader(BX.Loc.getMessage('EMBED_SLIDER_SETTINGS_HEADING'), false)\n\t\t);\n\n\t\tconst formSettings = Tag.render`<div></div>`;\n\t\tDom.append(this.#wizard.renderOption('type', true), formSettings);\n\n\t\tconst containerPosition = Tag.render`<div class=\"crm-form-embed__settings--side-block --compact\"></div>`;\n\t\tthis.#wizard.renderOptionTo(containerPosition, 'position', true);\n\n\t\tconst containerVertical = Tag.render`<div data-option=\"vertical\"></div>`;\n\t\tthis.#wizard.renderOptionTo(containerVertical, 'vertical', true);\n\n\t\tconst containerPositionVertical = this.#wizard.renderControlContainer([\n\t\t\tcontainerPosition,\n\t\t\tcontainerVertical,\n\t\t]);\n\t\tDom.append(containerPositionVertical, formSettings);\n\n\t\tthis.updateDependentFields(formSettings, 'type', this.dataProvider.getValues('click')['type']);\n\n\t\tDom.append(formSettings, section);\n\t\treturn section;\n\t}\n\n\trenderButtonSettings(): HTMLElement\n\t{\n\t\tconst enhancedMode =\n\t\t\t!Type.isUndefined(this.dataProvider.getValues('click')['button'])\n\t\t\t&& !Type.isUndefined(this.dataProvider.getValues('click')['button']['use'])\n\t\t\t&& this.dataProvider.getValues('click')['button']['use'] === '1'\n\t\t;\n\t\t// const linkMode =\n\t\t// \t!Type.isUndefined(this.dataProvider.getValues('click')?.button?.plain)\n\t\t// \t&& this.dataProvider.getValues('click')['button']['plain'] === '1'\n\t\t// ;\n\n\t\tconst section = this.renderSection(\n\t\t\tTag.render`\n\t\t\t\t<div class=\"ui-alert ui-alert-primary crm-form-embed-click-button-alert\" id ='crm-form-embed-click-button-alert-${this.formId}'>\n\t\t\t\t\t<span class=\"ui-alert-message\">${BX.Loc.getMessage('EMBED_SLIDER_CLICK_BUTTON_ALERT')}</span>\n\t\t\t\t\t<span class=\"ui-alert-close-btn\" onclick=\"BX.hide(BX('crm-form-embed-click-button-alert-${this.formId}'));\"></span>\n\t\t\t\t</div>\n\t\t\t`\n\t\t);\n\n\t\tDom.append(\n\t\t\tthis.renderSettingsHeader(BX.Loc.getMessage('EMBED_SLIDER_SETTINGS_HEADING_CLICK'), true,() => {\n\t\t\t\tBX.SidePanel.Instance.open(\"crm.webform:embed:\" + this.formId + \":click:expert\", {\n\t\t\t\t\twidth: 920,\n\t\t\t\t\tcacheable: false,\n\t\t\t\t\tcontentCallback: () => this.#createAdvancedSettingsLayout(),\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tonCloseComplete: (event) => {\n\t\t\t\t\t\t\tthis.load(true).then(() => {\n\t\t\t\t\t\t\t\tthis.render();\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}),\n\t\t\tsection\n\t\t);\n\n\t\tDom.append(\n\t\t\tthis.#wizard.renderOption('button.use', true),\n\t\t\tsection.querySelector('.crm-form-embed__customization-settings--switcher')\n\t\t);\n\n\t\tif (enhancedMode)\n\t\t{\n\t\t\tDom.addClass(section.querySelector('.crm-form-embed__link.--expert-mode'), '--visible');\n\t\t\tDom.removeClass(section.querySelector('[data-roll=\"heading-block\"]'), '--collapse');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.removeClass(section.querySelector('.crm-form-embed__link.--expert-mode'), '--visible');\n\t\t\tDom.addClass(section.querySelector('[data-roll=\"heading-block\"]'), '--collapse');\n\t\t}\n\n\t\tconst containerPlainAndText = this.#wizard.renderControlContainer([\n\t\t\tthis.#wizard.renderOption('button.plain', true),\n\t\t\tthis.#wizard.renderOption('button.text', true)\n\t\t]);\n\n\t\t// const optionStyle = (linkMode)\n\t\t// \t? this.#wizard.renderOption('button.decoration', true)\n\t\t// \t: this.#wizard.renderOption('buttonStyle', true)\n\t\t// ;\n\t\tconst optionLinkStyle = this.#wizard.renderOption('button.decoration', true);\n\t\toptionLinkStyle.dataset.option = 'button.decoration';\n\t\tconst optionButtonStyle = this.#wizard.renderOption('buttonStyle', true);\n\t\toptionButtonStyle.dataset.option = 'buttonStyle';\n\n\t\tconst rowButtonSettings = this.#wizard.renderRow([\n\t\t\t// this.#wizard.renderTitle(BX.Loc.getMessage('EMBED_SLIDER_SUBTITLE_BUTTON_SETTINGS'), true),\n\t\t\tcontainerPlainAndText,\n\t\t\t// this.#wizard.renderTitle(BX.Loc.getMessage('EMBED_SLIDER_SUBTITLE_STYLE')),\n\t\t\t// optionStyle,\n\t\t\toptionButtonStyle,\n\t\t\toptionLinkStyle,\n\t\t]);\n\n\t\tconst colBtnColor = this.#wizard.renderCol();\n\t\tconst colTxtColor = this.#wizard.renderCol();\n\t\tthis.#wizard.renderColorPopup(colBtnColor, 'button.color.background', true);\n\t\tthis.#wizard.renderColorPopup(colTxtColor, 'button.color.text', true);\n\n\t\tconst rowDesign = this.#wizard.renderRow(\n\t\t\t[\n\t\t\t\t// this.#wizard.renderTitle(\n\t\t\t\t// \tBX.Loc.getMessage('EMBED_SLIDER_SUBTITLE_DESIGN'),\n\t\t\t\t// \ttrue\n\t\t\t\t// ),\n\t\t\t\tthis.#wizard.renderBlock([\n\t\t\t\t\tthis.#wizard.renderCol([\n\t\t\t\t\t\tthis.#wizard.renderLabel(BX.Loc.getMessage('EMBED_SLIDER_OPTION_BUTTON.FONT'), true),\n\t\t\t\t\t\tthis.#wizard.renderOption('button.font', true),\n\t\t\t\t\t], true),\n\t\t\t\t\tcolBtnColor,\n\t\t\t\t\tcolTxtColor,\n\t\t\t\t]),\n\t\t\t],\n\t\t\ttrue\n\t\t);\n\n\t\tconst wrapper = Tag.render`\n\t\t\t<div class=\"crm-form-embed__basic\" data-roll=\"crm-form-embed__settings\" ${enhancedMode ? '' : 'style=\"height: 0px;\"'}></div>\n\t\t`;\n\n\t\tDom.append(rowButtonSettings, wrapper);\n\t\tDom.append(rowDesign, wrapper);\n\t\tDom.append(wrapper, section);\n\n\t\tthis.updateDependentFields(section, 'button.plain', this.dataProvider.getValues('click')['button']['plain']);\n\n\t\treturn section;\n\t}\n\n\t#createAdvancedSettingsLayout(): Promise\n\t{\n\t\treturn Layout.createContent({\n\t\t\textensions: ['crm.form.embed', 'ui.sidepanel-content', 'ui.forms', 'landing.ui.field.color', 'ui.switcher'],\n\t\t\ttitle: BX.Loc.getMessage('EMBED_SLIDER_EXPERT_MODE_TITLE'),\n\t\t\tdesign: {\n\t\t\t\tsection: false,\n\t\t\t},\n\t\t\ttoolbar ({Button}): Array\n\t\t\t{\n\t\t\t\treturn [\n\t\t\t\t\tnew Button({\n\t\t\t\t\t\t// icon: Button.Icon.SETTING,\n\t\t\t\t\t\tcolor: Button.Color.LIGHT_BORDER,\n\t\t\t\t\t\ttext: BX.Loc.getMessage('EMBED_SLIDER_TOOLBAR_BTN_FEEDBACK'),\n\t\t\t\t\t\tonclick: openFeedbackForm,\n\t\t\t\t\t}),\n\t\t\t\t];\n\t\t\t},\n\t\t\tcontent: () => this.#renderAdvancedSettingsLayoutContent(),\n\t\t\tbuttons: ({cancelButton, ApplyButton, SaveButton}) => {\n\t\t\t\treturn [\n\t\t\t\t\tnew SaveButton({\n\t\t\t\t\t\tonclick: btn => {\n\t\t\t\t\t\t\tbtn.setWaiting(true);\n\t\t\t\t\t\t\tthis.save().then(() => {\n\t\t\t\t\t\t\t\tbtn.setWaiting(false);\n\t\t\t\t\t\t\t\tthis.render();\n\t\t\t\t\t\t\t\tBX.SidePanel.Instance.close();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}),\n\t\t\t\t\tnew ApplyButton({\n\t\t\t\t\t\tonclick: btn => {\n\t\t\t\t\t\t\tbtn.setWaiting(true);\n\t\t\t\t\t\t\tthis.save().then(() => {\n\t\t\t\t\t\t\t\tbtn.setWaiting(false);\n\t\t\t\t\t\t\t\tthis.render();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}),\n\t\t\t\t\tcancelButton,\n\t\t\t\t];\n\t\t\t},\n\t\t});\n\t}\n\n\t#renderAdvancedSettingsLayoutContent(): Promise\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst container = this.renderContainer();\n\n\t\t\tDom.append(this.renderHeaderSection(\n\t\t\t\t'click',\n\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_CLICK_TITLE_ADVANCED'),\n\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_CLICK_DESC_ADVANCED'),\n\t\t\t\tthis.dataProvider.data.embed.helpCenterId,\n\t\t\t\tthis.dataProvider.data.embed.helpCenterUrl\n\t\t\t), container);\n\n\t\t\tthis.loader.show(container);\n\n\t\t\tEventEmitter.subscribeOnce('SidePanel.Slider:onOpenComplete', (event) => {\n\t\t\t\tif (event.target.getUrl() === \"crm.webform:embed:\" + this.formId + \":click:expert\")\n\t\t\t\t{\n\t\t\t\t\tthis.loader.hide();\n\n\t\t\t\t\tconst containerButtonStyle = this.#wizard.renderControlContainer();\n\t\t\t\t\tcontainerButtonStyle.dataset.controlMode = 'advanced';\n\t\t\t\t\tcontainerButtonStyle.dataset.option = 'buttonStyle';\n\t\t\t\t\tthis.#wizard.renderOptionTo(containerButtonStyle, 'buttonStyle', false);\n\t\t\t\t\tconst containerLinkStyle = this.#wizard.renderControlContainer();\n\t\t\t\t\tcontainerLinkStyle.dataset.controlMode = 'advanced';\n\t\t\t\t\tcontainerLinkStyle.dataset.option = 'button.decoration';\n\t\t\t\t\tthis.#wizard.renderOptionTo(containerLinkStyle, 'button.decoration', false);\n\n\n\t\t\t\t\tconst containerText = this.#wizard.renderControlContainer();\n\t\t\t\t\tcontainerText.dataset.controlMode = 'advanced';\n\t\t\t\t\tthis.#wizard.renderOptionTo(containerText, 'button.text', false);\n\t\t\t\t\tconst containerTypeAndText = this.#wizard.renderControlContainer([\n\t\t\t\t\t\tthis.#wizard.renderOption('button.plain', false),\n\t\t\t\t\t\tcontainerText,\n\t\t\t\t\t]);\n\n\t\t\t\t\tconst step1 = Tag.render`<div></div>`;\n\t\t\t\t\tDom.append(containerTypeAndText, step1);\n\t\t\t\t\tDom.append(containerButtonStyle, step1);\n\t\t\t\t\tDom.append(containerLinkStyle, step1);\n\n\t\t\t\t\tconst rowFont = this.#wizard.renderControlContainer();\n\t\t\t\t\trowFont.dataset.controlMode = 'advanced';\n\t\t\t\t\trowFont.dataset.option = 'button.font';\n\t\t\t\t\tthis.#wizard.renderOptionTo(rowFont, 'button.font', false);\n\t\t\t\t\tconst stepButtonFont = Tag.render`\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t${rowFont}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t`;\n\n\t\t\t\t\t// TODO white container\n\t\t\t\t\tconst stepColor = this.renderSection();\n\t\t\t\t\tconst containerColorBg = this.#wizard.renderControlContainer();\n\t\t\t\t\tconst containerColorBgHover = this.#wizard.renderControlContainer();\n\t\t\t\t\tconst containerColorText = this.#wizard.renderControlContainer();\n\t\t\t\t\tconst containerColorTextHover = this.#wizard.renderControlContainer();\n\t\t\t\t\tcontainerColorBg.dataset.controlMode = 'advanced';\n\t\t\t\t\tcontainerColorBgHover.dataset.controlMode = 'advanced';\n\t\t\t\t\tcontainerColorText.dataset.controlMode = 'advanced';\n\t\t\t\t\tcontainerColorTextHover.dataset.controlMode = 'advanced';\n\t\t\t\t\tthis.#wizard.renderColorInline(containerColorBg, 'button.color.background', false);\n\t\t\t\t\tthis.#wizard.renderColorInline(containerColorText, 'button.color.text', false);\n\t\t\t\t\tthis.#wizard.renderColorInline(containerColorBgHover, 'button.color.backgroundHover', false);\n\t\t\t\t\tthis.#wizard.renderColorInline(containerColorTextHover, 'button.color.textHover', false);\n\t\t\t\t\tconst getColorLabel = (messageId: string) => {\n\t\t\t\t\t\tconst label = this.#wizard.renderLabel(BX.Loc.getMessage(messageId));\n\t\t\t\t\t\tDom.addClass(label, 'crm-form-embed__label-text-color');\n\t\t\t\t\t\treturn label;\n\t\t\t\t\t}\n\t\t\t\t\tDom.append(Tag.render`<div>\n\t\t\t\t\t\t${this.#wizard.renderBlock([\n\t\t\t\t\t\t\tthis.#wizard.renderCol([\n\t\t\t\t\t\t\t\tgetColorLabel('EMBED_SLIDER_OPTION_BUTTON.COLOR.BACKGROUND'),\n\t\t\t\t\t\t\t\tcontainerColorBg,\n\t\t\t\t\t\t\t]),\n\t\t\t\t\t\t\tthis.#wizard.renderCol([\n\t\t\t\t\t\t\t\tgetColorLabel('EMBED_SLIDER_OPTION_BUTTON.COLOR.TEXT'),\n\t\t\t\t\t\t\t\tcontainerColorText,\n\t\t\t\t\t\t\t]),\n\t\t\t\t\t\t\tthis.#wizard.renderCol([\n\t\t\t\t\t\t\t\tgetColorLabel('EMBED_SLIDER_OPTION_BUTTON.COLOR.BACKGROUNDHOVER'),\n\t\t\t\t\t\t\t\tcontainerColorBgHover,\n\t\t\t\t\t\t\t]),\n\t\t\t\t\t\t\tthis.#wizard.renderCol([\n\t\t\t\t\t\t\t\tgetColorLabel('EMBED_SLIDER_OPTION_BUTTON.COLOR.TEXTHOVER'),\n\t\t\t\t\t\t\t\tcontainerColorTextHover,\n\t\t\t\t\t\t\t]),\n\t\t\t\t\t\t])}\n\t\t\t\t\t</div>`, stepColor);\n\n\t\t\t\t\tconst step4 = Tag.render`<div></div>`;\n\t\t\t\t\tconst containerButtonPosition = Tag.render`<div class=\"crm-form-embed__settings--side-block\" data-option=\"button.align\"></div>`;\n\t\t\t\t\tthis.#wizard.renderOptionTo(containerButtonPosition, 'button.align', false);\n\t\t\t\t\tconst containerLinkPosition = Tag.render`<div class=\"crm-form-embed__settings--side-block\" data-option=\"link.align\"></div>`;\n\t\t\t\t\tthis.#wizard.renderOptionTo(containerLinkPosition, 'link.align', false);\n\t\t\t\t\tDom.append(this.#wizard.renderControlContainer([\n\t\t\t\t\t\tcontainerButtonPosition,\n\t\t\t\t\t\tcontainerLinkPosition,\n\t\t\t\t\t]), step4);\n\n\t\t\t\t\tconst step4Message = (\n\t\t\t\t\t\t!Type.isUndefined(this.dataProvider.getValues('click')?.button?.plain)\n\t\t\t\t\t\t&& this.dataProvider.getValues('click')['button']['plain'] === '1'\n\t\t\t\t\t)\n\t\t\t\t\t\t? 'EMBED_SLIDER_CLICK_STEP_4_TITLE_2'\n\t\t\t\t\t\t: 'EMBED_SLIDER_CLICK_STEP_4_TITLE'\n\t\t\t\t\t;\n\n\t\t\t\t\tconst stepperContent = [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\thtml: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\theader: {\n\t\t\t\t\t\t\t\t\t\ttitle: BX.Loc.getMessage('EMBED_SLIDER_CLICK_STEP_1_TITLE'),\n\t\t\t\t\t\t\t\t\t\t// hint: 'hint text',\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tnode: step1,\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\thtml: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\theader: BX.Loc.getMessage('EMBED_SLIDER_CLICK_STEP_2_TITLE'),\n\t\t\t\t\t\t\t\t\tnode: stepButtonFont,\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\thtml: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\theader: BX.Loc.getMessage('EMBED_SLIDER_CLICK_STEP_3_TITLE'),\n\t\t\t\t\t\t\t\t\tnode: stepColor,\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\thtml: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\theader: BX.Loc.getMessage(step4Message),\n\t\t\t\t\t\t\t\t\tnode: step4,\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t},\n\t\t\t\t\t];\n\n\t\t\t\t\tDom.append(this.renderStepperSection(stepperContent), container);\n\n\t\t\t\t\t// TODO field dependency\n\t\t\t\t\tthis.updateDependentFields(container, 'type', this.dataProvider.getValues('click')['type']);\n\t\t\t\t\tthis.updateDependentFields(container, 'button.plain', this.dataProvider.getValues('click')['button']['plain']);\n\n\t\t\t\t\tthis.#wizard.subscribe('BX:Crm:Form:Embed:valueChanged', (event) => {\n\t\t\t\t\t\tthis.updateDependentFields(container, event.data.name, event.data.value);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tresolve(container);\n\t\t});\n\t}\n}","import {Dom} from 'main.core';\nimport {Form} from './form';\nimport {DataProvider} from \"../../data_provider\";\nimport {HELP_CENTER_ID, HELP_CENTER_URL} from \"../../tab\";\n\nexport class Publink extends Form\n{\n\t#container: HTMLElement;\n\t#rendered: boolean = false;\n\n\tconstructor(formId: number, dataProvider: DataProvider): undefined\n\t{\n\t\tsuper(formId, dataProvider);\n\t\tthis.#container = super.render();\n\t}\n\n\tload(force: boolean = false): Promise\n\t{\n\t\treturn super.load(force).then(() => {\n\t\t\tif (!this.#rendered)\n\t\t\t{\n\t\t\t\tthis.render();\n\t\t\t}\n\t\t}).catch((error) => {\n\t\t\tconsole.error(error);\n\t\t\tif (!this.#rendered)\n\t\t\t{\n\t\t\t\tthis.#renderError();\n\t\t\t}\n\t\t});\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tthis.#container.innerHTML = '';\n\n\t\tconst headerSection = this.renderHeaderSection(\n\t\t\t'linked-link',\n\t\t\tBX.Loc.getMessage('EMBED_SLIDER_PUBLIC_LINK_TITLE'),\n\t\t\tBX.Loc.getMessage('EMBED_SLIDER_PUBLIC_LINK_DESCRIPTION'),\n\t\t\tHELP_CENTER_ID,\n\t\t\tHELP_CENTER_URL\n\t\t);\n\t\tDom.append(headerSection, this.#container);\n\n\t\tif (!super.loaded)\n\t\t{\n\t\t\tthis.loader.show(this.#container);\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// update with actual help-center link\n\t\t\tDom.replace(headerSection, this.renderHeaderSection(\n\t\t\t\t'linked-link',\n\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_PUBLIC_LINK_TITLE'),\n\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_PUBLIC_LINK_DESCRIPTION'),\n\t\t\t\tthis.dataProvider.data.embed.helpCenterId,\n\t\t\t\tthis.dataProvider.data.embed.helpCenterUrl\n\t\t\t));\n\n\t\t\tDom.append(this.renderPreviewSection(\n\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_PUBLIC_LINK_QR_TITLE'),\n\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_PUBLIC_LINK_QR_DESC'),\n\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_PUBLIC_LINK_OPEN_IN_NEW_TAB'),\n\t\t\t\tthis.dataProvider.data.embed.pubLink\n\t\t\t), this.#container);\n\t\t\tDom.append(this.renderCopySection(\n\t\t\t\tnull, // BX.Loc.getMessage('EMBED_SLIDER_COPY_LINK'),\n\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_COPY_LINK2'),\n\t\t\t\tthis.dataProvider.data.embed.pubLink,\n\t\t\t\tnull,\n\t\t\t\t'ui-btn-icon-follow crm-form-embed__btn-icon--link'\n\t\t\t), this.#container);\n\n\t\t\tthis.#rendered = true;\n\t\t}\n\n\t\treturn this.#container;\n\t}\n\n\t#renderError(): HTMLElement\n\t{\n\t\tthis.#container.innerHTML = '';\n\t\tDom.append(super.renderError(this.dataProvider.data), this.#container);\n\t\tthis.#rendered = true;\n\t\treturn this.#container;\n\t}\n}","// export * from './inline';\n// export * from './auto';\n// export * from './click';\n// export * from './publink';\n\nimport {Inline} from \"./inline\";\nimport {Auto} from \"./auto\";\nimport {Click} from \"./click\";\nimport {Publink} from \"./publink\";\n\nexport {\n\tInline,\n\tAuto,\n\tClick,\n\tPublink,\n}","import {Loc, Tag, Type} from 'main.core';\nimport {Layout} from 'ui.sidepanel.layout';\nimport {EmbedOptions} from './types';\nimport {DataProvider} from \"./data_provider\";\nimport {Widget} from './tab/widget';\nimport {Openlines} from './tab/openlines';\nimport * as Form from './tab/form/index';\nimport {openFeedbackForm} from \"./util\";\n\nimport 'ui.design-tokens';\nimport 'ui.fonts.opensans';\nimport './embed.css';\n\nconst DEFAULT_WIDGETS_COUNT = 10;\n\nexport class Embed\n{\n\t#options: Object;\n\n\t#publink: Form.Publink;\n\t#inline: Form.Inline;\n\t#auto: Form.Auto;\n\t#click: Form.Click;\n\n\t#widget: Widget;\n\t#openlines: Openlines;\n\n\tconstructor(formId: number, options: EmbedOptions = {})\n\t{\n\t\tthis.#options = options;\n\n\t\tconst dataProvider = new DataProvider();\n\n\t\tthis.#publink = new Form.Publink(formId, dataProvider);\n\t\tthis.#inline = new Form.Inline(formId, dataProvider);\n\t\tthis.#click = new Form.Click(formId, dataProvider);\n\t\tthis.#auto = new Form.Auto(formId, dataProvider);\n\n\t\tconst widgetsCount = options.widgetsCount ? options.widgetsCount : DEFAULT_WIDGETS_COUNT;\n\t\tthis.#widget = new Widget(formId, {widgetsCount: widgetsCount});\n\t\tthis.#openlines = new Openlines(formId, {widgetsCount: widgetsCount});\n\t}\n\n\tstatic openSlider(formId: number,  options: EmbedOptions = {activeMenuItemId: 'link'})\n\t{\n\t\tconst instance = (new Embed(formId, {...options}));\n\t\tBX.SidePanel.Instance.open(\"crm.webform:embed:\" + formId, {\n\t\t\twidth: 1046,\n\t\t\tcacheable: false,\n\t\t\t...options.sliderOptions,\n\t\t\tcontentCallback: () => instance.#render(options),\n\t\t\tevents: {\n\t\t\t\tonCloseComplete: (event) => {\n\t\t\t\t\tif (Type.isFunction(options.onCloseComplete))\n\t\t\t\t\t{\n\t\t\t\t\t\toptions.onCloseComplete();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tonLoad: (event) => {\n\t\t\t\t\t// BX.UI.Switcher.initByClassName();\n\t\t\t\t\tinstance.#loadTab(options.activeMenuItemId);\n\t\t\t\t}\n\t\t\t},\n\t\t});\n\t}\n\n\t/**\n\t * @deprecated open => openSlider\n\t * @see Embed.openSlider\n\t */\n\tstatic open(formId: number, options: EmbedOptions = {widgetsCount: DEFAULT_WIDGETS_COUNT, activeMenuItemId: 'inline'})\n\t{\n\t\tEmbed.openSlider(formId, options);\n\t}\n\n\t#render(options: EmbedOptions): Promise\n\t{\n\t\treturn Layout.createContent({\n\t\t\textensions: ['crm.form.embed', 'ui.sidepanel-content', 'ui.forms', 'landing.ui.field.color', 'ui.switcher'],\n\t\t\ttitle: BX.Loc.getMessage('EMBED_SLIDER_MAIN_TITLE'),\n\t\t\tdesign: {\n\t\t\t\tsection: false,\n\t\t\t},\n\t\t\ttoolbar ({Button}): Array\n\t\t\t{\n\t\t\t\treturn [\n\t\t\t\t\tnew Button({\n\t\t\t\t\t\t// icon: Button.Icon.SETTING,\n\t\t\t\t\t\tcolor: Button.Color.LIGHT_BORDER,\n\t\t\t\t\t\ttext: BX.Loc.getMessage('EMBED_SLIDER_TOOLBAR_BTN_FEEDBACK'),\n\t\t\t\t\t\tonclick: openFeedbackForm,\n\t\t\t\t\t}),\n\t\t\t\t];\n\t\t\t},\n\t\t\tcontent: () => {\n\t\t\t\treturn Tag.render`\n\t\t\t\t\t<div class=\"crm-form-embed-slider-wrapper\">\n\t\t\t\t\t\t<div data-menu-item-id=\"widgets\">${this.#widget.render()}</div>\n\t\t\t\t\t\t<div data-menu-item-id=\"openlines\">${this.#openlines.render()}</div>\n\t\t\t\t\t\t<div data-menu-item-id=\"inline\">${this.#inline.render()}</div>\n\t\t\t\t\t\t<div data-menu-item-id=\"click\">${this.#click.render()}</div>\n\t\t\t\t\t\t<div data-menu-item-id=\"auto\">${this.#auto.render()}</div>\n\t\t\t\t\t\t<div data-menu-item-id=\"link\">${this.#publink.render()}</div>\n\t\t\t\t\t</div>\n\t\t\t\t`;\n\t\t\t},\n\t\t\tmenu: {\n\t\t\t\titems: [\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: Loc.getMessage('EMBED_SLIDER_PUBLIC_LINK_MENU'),\n\t\t\t\t\t\tid: 'link',\n\t\t\t\t\t\tonclick: () => this.#loadTab('link'),\n\t\t\t\t\t\tactive: options.activeMenuItemId === 'link',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: Loc.getMessage('EMBED_SLIDER_WIDGET_MENU'),\n\t\t\t\t\t\tid: 'widgets',\n\t\t\t\t\t\tonclick: () => this.#loadTab('widgets'),\n\t\t\t\t\t\tactive: options.activeMenuItemId === 'widgets',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: Loc.getMessage('EMBED_SLIDER_OPENLINES_MENU'),\n\t\t\t\t\t\tid: 'openlines',\n\t\t\t\t\t\tonclick: () => this.#loadTab('openlines'),\n\t\t\t\t\t\tactive: options.activeMenuItemId === 'openlines',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: Loc.getMessage('EMBED_SLIDER_INLINE_MENU'),\n\t\t\t\t\t\tid: 'inline',\n\t\t\t\t\t\tonclick: () => this.#loadTab('inline'),\n\t\t\t\t\t\tactive: options.activeMenuItemId === 'inline',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: Loc.getMessage('EMBED_SLIDER_CLICK_MENU'),\n\t\t\t\t\t\tid: 'click',\n\t\t\t\t\t\tonclick: () => this.#loadTab('click'),\n\t\t\t\t\t\tactive: options.activeMenuItemId === 'click',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: Loc.getMessage('EMBED_SLIDER_AUTO_MENU'),\n\t\t\t\t\t\tid: 'auto',\n\t\t\t\t\t\tonclick: () => this.#loadTab('auto'),\n\t\t\t\t\t\tactive: options.activeMenuItemId === 'auto',\n\t\t\t\t\t},\n\t\t\t\t]\n\t\t\t},\n\t\t\tbuttons: ({closeButton}) => {\n\t\t\t\treturn [closeButton];\n\t\t\t},\n\t\t});\n\t}\n\n\t#loadTab(tabName: string)\n\t{\n\t\tswitch (tabName)\n\t\t{\n\t\t\tcase 'widgets':\n\t\t\t\tthis.#widget.load();\n\t\t\t\tbreak;\n\t\t\tcase 'openlines':\n\t\t\t\tthis.#openlines.load();\n\t\t\t\tbreak;\n\t\t\tcase 'inline':\n\t\t\t\tthis.#inline.load();\n\t\t\t\tbreak;\n\t\t\tcase 'click':\n\t\t\t\tthis.#click.load();\n\t\t\t\tbreak;\n\t\t\tcase 'auto':\n\t\t\t\tthis.#auto.load();\n\t\t\t\tbreak;\n\t\t\tcase 'link':\n\t\t\tdefault:\n\t\t\t\tthis.#publink.load();\n\t\t\t\tbreak;\n\t\t}\n\t}\n}"],"names":["DataProvider","loaded","data","errors","updateValues","type","values","button","plain","Type","isStringFilled","link","align","embed","viewValues","getValues","BX","mergeEx","getOptions","viewOptions","getDict","dict","aligns","value","defaults","inline","auto","click","use","text","Loc","getMessage","font","rounded","outlined","decoration","color","textHover","background","backgroundHover","isUndefined","HELP_CENTER_ID","HELP_CENTER_URL","Tab","constructor","Loader","loader","renderBubble","withoutFrame","Tag","render","renderCopySection","title","btnText","copyText","innerContent","iconClass","section","renderSection","isNull","Dom","append","Text","encode","inner","isDomNode","top","clipboard","bindCopyClick","querySelector","popup","offsetLeft","renderPreviewSection","desc","btn","url","qr","QRCode","width","height","addClass","renderHeaderSection","icon","helpCenterId","helpCenterUrl","renderHelp","renderStepperSection","content","step","StepByStep","target","init","elem","rounding","withIcon","renderContainer","container","caption","showHelp","event","Helper","show","dataset","helpId","preventDefault","ERROR_CODE_FORM_READ_ACCESS_DENIED","ERROR_CODE_WIDGET_READ_ACCESS_DENIED","ERROR_CODE_WIDGET_WRITE_ACCESS_DENIED","ERROR_CODE_OPENLINES_WRITE_ACCESS_DENIED","handlerToggleSwitcher","selection","window","getSelection","toString","parentElement","handlerToggleCodeBlock","currentTarget","closest","toggleBtn","blockCode","style","scrollHeight","removeClass","Event","unbind","transitionHandlerForCodeBlock","bind","Widget","formId","options","prototype","actionGet","load","Promise","resolve","ajax","runAction","json","count","widgetsCount","then","response","catch","renderError","innerHTML","headerSection","renderHeader","replace","renderPreview","renderWidgets","renderFinalBlock","renderTo","node","Error","responseData","errorMessage","isObject","error","status","code","previewLink","allIds","Object","keys","widgets","contentInner","length","renderEmptyInner","renderWidgetRows","formName","formType","allWidgets","currentFormName","currentFormType","widgetsList","widgetIds","getOrderedWidgetIds","forEach","id","widget","sort","a","b","aData","bData","checked","createSwitcher","inputName","switcherNode","document","createElement","className","UI","Switcher","switcher","handlers","toggled","formNames","relatedFormNames","sFormType","sFormNames","isArray","join","sFormNamesField","row","name","getNode","formTypeLangKey","toUpperCase","hasMessage","widgetId","setLoading","dataSetOld","formNameOld","formTypeOld","dataSetCurrent","isChecked","buttonId","assigned","check","Notification","Center","notify","messageId","assign","formTypeMessage","textContent","setAttribute","Openlines","lines","renderLineRows","allLines","renderAccessDeniedAlert","linesList","lineIds","formEnabled","lineId","lineName","Form","dataProvider","force","reject","save","renderSettingsHeader","expertMode","headingBox","heading","renderCodeBlock","updateDependentFields","containerVertical","hide","containerButtonStyle","containerLinkStyle","containerButtonPosition","containerLinkPosition","Inline","console","scripts","getSvg","option","isHexDark","hex","Color","hexToRgba","getHexFromOpacity","opacity","isString","includes","Number","parseInt","Math","round","openFeedbackForm","Feedback","open","forms","zones","lang","sec","parseHex","fillHex","parts","exec","toRgba","numbers","fillAlpha","alpha","substr","toLowerCase","r","g","brightness","mode","Controls","renderDropdown","handler","attr","setOptions","size","callback","renderLabel","keyName","select","entries","renderText","advanced","handlerShowSaveBtn","afterIcon","input","bindOnce","renderTypeface","forValue","extended","getAttribute","nodeList","querySelectorAll","animateSwitching","renderSquareButton","key","renderButton","renderLink","renderSwitcher","switcherId","renderColorPicker","subtype","ColorField","getValue","hexA","getHex","getOpacity","colorPicker","createColorPicker","setValue","getLayout","renderOptionTitle","buttonSetting","onChange","onReset","loaderTarget","targetWidth","targetHeight","resetPadding","handlerToggleClickMode","headerBlock","moreSettingsBtn","transitionHandlerForSettingsSection","Wizard","EventEmitter","setEventNamespace","renderControlContainer","item","renderRow","last","renderBlock","block","renderCol","first","col","renderTitle","line","Renderer","renderOptionTo","instantSave","funcName","fieldOptions","fieldValue","isFunction","renderOption","renderColorInline","renderColorPopup","picker","PopupWindow","bindElement","autoHide","closeByEsc","getStyle","valueHex","fgColor","getThemeClass","getOptionKeyName","colorBox","subscribe","innerText","promises","field","push","all","BaseEvent","emitAsync","aNames","split","updatedValues","buildOption","names","nextName","shift","emit","defaultValue","aName","part","concat","charAt","slice","renderFieldDelay","val","renderFieldType","renderFieldPosition","controlOptions","handlerLeft","handlerCenter","handlerRight","getOptionValueName","renderFieldVertical","handlerBottom","handlerTop","renderFieldButtonStyle","handlerPm","handlerPmr","handlerLb","handlerLbr","controlMode","renderFieldButtonDecoration","handlerNoBorder","handlerDotted","handlerLine","renderFieldButtonFont","handlerModern","handlerClassic","handlerElegant","renderFieldButtonAlign","renderFieldLinkAlign","handlerInline","renderFieldButtonPlain","renderFieldButtonText","renderFieldButtonColorBackground","fields","renderFieldButtonColorBackgroundHover","renderFieldButtonColorText","renderFieldButtonColorTextHover","renderFieldButtonUse","optionName","result","msgKey","keySplit","getDictValues","nextKey","dictValues","Auto","renderBaseSettings","SidePanel","Instance","cacheable","contentCallback","events","onCloseComplete","wrapper","layoutContent","Layout","createContent","extensions","design","toolbar","Button","LIGHT_BORDER","onclick","buttons","SaveButton","ApplyButton","cancelButton","setWaiting","close","stepperInner","containerPosition","containerPositionVertical","stepperContent","html","header","Click","renderFormSettings","renderButtonSettings","formSettings","enhancedMode","containerPlainAndText","optionLinkStyle","optionButtonStyle","rowButtonSettings","colBtnColor","colTxtColor","rowDesign","subscribeOnce","getUrl","containerText","containerTypeAndText","step1","rowFont","stepButtonFont","stepColor","containerColorBg","containerColorBgHover","containerColorText","containerColorTextHover","getColorLabel","label","step4","step4Message","Publink","pubLink","DEFAULT_WIDGETS_COUNT","Embed","openSlider","activeMenuItemId","instance","sliderOptions","onLoad","menu","items","active","closeButton","tabName"],"mappings":"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"}