{"version":3,"file":"embed.bundle.js","sources":["../src/data_provider.js","../src/tab.js","../src/errors.js","../src/handler.js","../src/tab/widget.js","../src/tab/openlines.js","../src/tab/form/form.js","../src/tab/form/inline.js","../src/wizard/svg.js","../src/util.js","../src/wizard/controls.js","../src/wizard/handler.js","../src/wizard/wizard.js","../src/tab/form/auto.js","../src/tab/form/click.js","../src/tab/form/publink.js","../src/tab/form/index.js","../src/index.js"],"sourcesContent":["import {Type} from 'main.core';\nimport {EmbedDataValues, EmbedDataOptions, EmbedDict} from \"./types\";\n\n/**\n * @package\n */\nexport class DataProvider\n{\n\t#data: Object = {\n\t\tloaded: false,\n\t\tdata: {},\n\t\terrors: {},\n\t};\n\n\tupdateValues(type: string, values: Object): undefined\n\t{\n\t\tif (type === 'click')\n\t\t{\n\t\t\tif (values.button.plain === '1' && Type.isStringFilled(values?.link?.align))\n\t\t\t{\n\t\t\t\tvalues.button.align = values.link.align;\n\t\t\t}\n\t\t\tdelete values.link;\n\t\t}\n\n\t\tthis.data.embed.viewValues[type] = values;\n\t}\n\n\tgetValues(type: string): EmbedDataValues\n\t{\n\t\tconst values = this.data.embed.viewValues[type];\n\n\t\tif (type === 'click' && Type.isStringFilled(values?.button?.align))\n\t\t{\n\t\t\tvalues.link = {align: values?.button?.align};\n\t\t}\n\t\t\n\t\treturn BX.mergeEx(this.#getDefaultValues(type), values);\n\t}\n\n\tgetOptions(type: string): EmbedDataOptions\n\t{\n\t\treturn this.data.embed.viewOptions[type];\n\t}\n\n\tgetDict(): EmbedDict\n\t{\n\t\tconst dict = this.data.dict;\n\t\tdict.viewOptions.link = {aligns: dict?.viewOptions?.button?.aligns};\n\t\treturn dict;\n\t}\n\n\t/**\n\t * @package\n\t */\n\tget data(): Object\n\t{\n\t\treturn this.#data.data;\n\t}\n\n\t/**\n\t * @package\n\t */\n\tset data(data: Object)\n\t{\n\t\tthis.#data.data = data;\n\t}\n\n\t/**\n\t * @package\n\t */\n\tget errors(): Object\n\t{\n\t\treturn this.#data.errors;\n\t}\n\n\t/**\n\t * @package\n\t */\n\tset errors(errors: Object)\n\t{\n\t\tthis.#data.errors = errors;\n\t}\n\n\t/**\n\t * @package\n\t */\n\tget loaded(): boolean\n\t{\n\t\treturn this.#data.loaded || false;\n\t}\n\n\t/**\n\t * @package\n\t */\n\tset loaded(value: boolean)\n\t{\n\t\tthis.#data.loaded = value;\n\t}\n\n\t#getDefaultValues(type: string): EmbedDataValues\n\t{\n\t\tconst defaults = {\n\t\t\tinline: {},\n\t\t\tauto: {}, // 'type', 'position', 'vertical', 'delay'\n\t\t\tclick: {\n\t\t\t\t// 'type', 'position', 'vertical',\n\t\t\t\tbutton: {\n\t\t\t\t\tuse: \"0\", // 1|0\n\t\t\t\t\ttext: BX.Loc.getMessage('EMBED_SLIDER_OPTION_BUTTONSTYLE_LABEL'),\n\t\t\t\t\tfont: \"modern\", // modern|classic|elegant\n\t\t\t\t\talign: \"center\", // left|right|center|inline\n\t\t\t\t\tplain: \"0\",\n\t\t\t\t\trounded: \"0\",\n\t\t\t\t\toutlined: \"0\",\n\t\t\t\t\tdecoration: \"\", // \"\"|dotted|solid\n\t\t\t\t\tcolor: {\n\t\t\t\t\t\ttext: \"#ffffffff\",\n\t\t\t\t\t\ttextHover: \"#ffffffff\",\n\t\t\t\t\t\tbackground: \"#3eddffff\",\n\t\t\t\t\t\tbackgroundHover: \"#3eddffa6\",\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\n\t\treturn !Type.isUndefined(defaults[type])\n\t\t\t? defaults[type]\n\t\t\t: {}\n\t\t;\n\t}\n}","import {Tag, Dom, Text, Type} from 'main.core';\nimport \"main.qrcode\";\nimport {StepByStep} from 'ui.stepbystep';\nimport 'ui.switcher';\nimport 'main.loader';\n\n// fallback values\nexport const HELP_CENTER_ID = 13003062;\nexport const HELP_CENTER_URL = 'https://helpdesk.bitrix24.ru/open/' + HELP_CENTER_ID;\n\nexport class Tab {\n\n\t#loader;\n\n\tconstructor()\n\t{\n\t\tthis.#loader = new BX.Loader();\n\t}\n\n\tget loader(): Loader\n\t{\n\t\treturn this.#loader;\n\t}\n\n\trenderBubble(text: string, withoutFrame: boolean = false): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"crm-form-embed__customization-info\">\n\t\t\t\t<div class=\"crm-form-embed__customization-info--avatar\">\n\t\t\t\t\t<img src=\"/bitrix/js/crm/images/crm-form-info-avatar.svg\" alt=\"avatar\">\n\t\t\t\t</div>\n\t\t\t\t<div class=\"crm-form-embed__customization-info--text ${withoutFrame ? '--without-frame' : ''}\">${text}</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\trenderCopySection(\n\t\ttitle: string = null,\n\t\tbtnText: string = null,\n\t\tcopyText: string = null,\n\t\tinnerContent: HTMLElement = null,\n\t\ticonClass: string = null\n\t): HTMLElement\n\t{\n\t\tconst section = this.renderSection();\n\n\t\tif (!Type.isNull(title))\n\t\t{\n\t\t\tDom.append(Tag.render`\n\t\t\t\t\t<div class=\"crm-form-embed__title-block\">\n\t\t\t\t\t\t<div class=\"ui-slider-heading-4 --no-border-bottom\">${Text.encode(title)}</div>\n\t\t\t\t\t</div>\n\t\t\t`, section);\n\t\t}\n\n\t\tconst inner = Tag.render`<div class=\"crm-form-embed__copy-block\"></div>`;\n\n\t\tif (Type.isDomNode(innerContent))\n\t\t{\n\t\t\tDom.append(innerContent, inner);\n\t\t}\n\n\t\tif (!Type.isNull(btnText) && !Type.isNull(copyText))\n\t\t{\n\t\t\tDom.append(Tag.render`\n\t\t\t\t<div class=\"crm-form-embed__btn-box --center\">\n\t\t\t\t\t<button\n\t\t\t\t\t\tclass=\"crm-form-embed-btn-copy-publink ui-btn ui-btn-lg ui-btn-primary ui-btn-round ${iconClass ? iconClass : ''}\">\n\t\t\t\t\t\t\t${Text.encode(btnText)}\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t`, inner);\n\n\t\t\ttop.BX.clipboard.bindCopyClick(\n\t\t\t\tinner.querySelector('.crm-form-embed-btn-copy-publink'),\n\t\t\t\t{\n\t\t\t\t\ttext: copyText,\n\t\t\t\t\tpopup: {\n\t\t\t\t\t\toffsetLeft: 60,\n\t\t\t\t\t},\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\tDom.append(inner, section);\n\n\t\treturn section;\n\t}\n\n\trenderPreviewSection(title: string, desc: string, btn: string, url: string): HTMLElement\n\t{\n\t\tconst qr = Tag.render`<div class=\"crm-form-embed__qr-block--qr\"></div>`;\n\t\tnew QRCode(qr, {\n\t\t\ttext: url,\n\t\t\twidth: 147,\n\t\t\theight: 147,\n\t\t});\n\n\t\tconst section = this.renderSection();\n\t\tDom.addClass(section, '--crm-qr-bg');\n\t\tDom.append(\n\t\t\tTag.render`\n\t\t\t\t<div class=\"crm-form-embed__qr-block\">\n\t\t\t\t\t<div class=\"crm-form-embed__qr-block--info\">\n\t\t\t\t\t\t<div class=\"crm-form-embed__qr-block--info-name\">${Text.encode(title)}</div>\n\t\t\t\t\t\t<div class=\"crm-form-embed__qr-block--info-text\">\n\t\t\t\t\t\t\t<div class=\"ui-icon ui-icon-service-light-messenger ui-icon-md\" style=\"float: left; margin-right: 10px;\"><i></i></div>\n\t\t\t\t\t\t\t${Text.encode(desc)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-light-border ui-btn-round crm-form-embed__qr-block--btn\"\n\t\t\t\t\t\t\tonclick=\"window.open('${Text.encode(url)}');\">\n\t\t\t\t\t\t\t\t${Text.encode(btn)}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"crm-form-embed__qr-block\">\n\t\t\t\t\t\t${qr}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`,\n\t\t\tsection\n\t\t);\n\t\treturn section;\n\t}\n\n\t/**\n\t * @protected\n\t */\n\trenderHeaderSection(icon: string, title: string, text: string, helpCenterId: number, helpCenterUrl: string): HTMLElement\n\t{\n\t\tconst section = this.renderSection(null, true, true);\n\t\tDom.append(Tag.render`\n\t\t\t<span class=\"ui-icon ui-slider-icon ui-icon-service-${Text.encode(icon)}\">\n\t\t\t\t<i></i>\n\t\t\t</span>\n\t\t`, section);\n\t\tDom.append(Tag.render`\n\t\t\t<div class=\"ui-slider-content-box\">\n\t\t\t\t<div class=\"ui-slider-heading-2\">${Text.encode(title)}</div>\n\t\t\t\t<div class=\"ui-slider-inner-box\">\n\t\t\t\t\t<p class=\"ui-slider-paragraph-2 crm-form-embed-header-section\">${Text.encode(text)}</p>\n\t\t\t\t\t${this.renderHelp(helpCenterId, helpCenterUrl)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`, section);\n\t\treturn section;\n\t}\n\n\trenderStepperSection(content: Array): HTMLElement\n\t{\n\t\tconst section = this.renderSection();\n\n\t\tconst step = new StepByStep({\n\t\t\ttarget: section,\n\t\t\tcontent: content,\n\t\t});\n\t\tstep.init();\n\n\t\treturn section;\n\t}\n\n\t/**\n\t * @protected\n\t * @param elem HTMLElement\n\t * @param rounding boolean\n\t * @param withIcon boolean\n\t */\n\trenderSection(elem, rounding: boolean = true, withIcon: boolean = false): HTMLElement\n\t{\n\t\tconst section = Tag.render`\n\t\t\t<div \n\t\t\t\tclass=\"\n\t\t\t\t\tui-slider-section\n\t\t\t\t\t${rounding ? '--rounding' : ''}\n\t\t\t\t\t${withIcon ? 'ui-slider-section-icon --icon-sm' : ''}\n\t\t\t\t\"\n\t\t\t></div>\n\t\t`;\n\n\t\tif (Type.isDomNode(elem))\n\t\t{\n\t\t\tDom.append(elem, section);\n\t\t}\n\n\t\treturn section;\n\t}\n\n\t/**\n\t * @protected\n\t * @param elem HTMLElement\n\t */\n\trenderContainer(elem): HTMLElement\n\t{\n\t\tconst container = Tag.render`<div class=\"crm-form-embed__wrapper crm-form-embed__scope\"></div>`;\n\t\tif (Type.isDomNode(elem))\n\t\t{\n\t\t\tDom.append(elem, container);\n\t\t}\n\t\treturn container;\n\t}\n\n\trenderHelp(\n\t\thelpCenterId: number,\n\t\thelpCenterUrl: string,\n\t\tcaption: string = BX.Loc.getMessage('EMBED_SLIDER_MORE_INFO')\n\t): HTMLElement\n\t{\n\t\tconst showHelp = function (event): false\n\t\t{\n\t\t\tif(top.BX.Helper)\n\t\t\t{\n\t\t\t\ttop.BX.Helper.show(\"redirect=detail&code=\" + this.dataset.helpId);\n\t\t\t\tevent.preventDefault();\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\n\t\treturn Tag.render`\n\t\t\t<a\n\t\t\t\tdata-help-id=\"${Text.encode(helpCenterId)}\"\n\t\t\t\tonclick=\"${showHelp}\"\n\t\t\t\thref=\"${Text.encode(helpCenterUrl)}\"\n\t\t\t\tclass=\"ui-slider-link\" target=\"_blank\"\n\t\t\t>\n\t\t\t\t${Text.encode(caption)}\n\t\t\t</a>\n\t\t`;\n\t}\n}","export const ERROR_CODE_FORM_READ_ACCESS_DENIED = 1;\nexport const ERROR_CODE_FORM_WRITE_ACCESS_DENIED = 2;\nexport const ERROR_CODE_WIDGET_READ_ACCESS_DENIED = 3;\nexport const ERROR_CODE_WIDGET_WRITE_ACCESS_DENIED = 4;\nexport const ERROR_CODE_OPENLINES_READ_ACCESS_DENIED = 5;\nexport const ERROR_CODE_OPENLINES_WRITE_ACCESS_DENIED = 6;","import {Dom, Text, Event} from 'main.core';\n\nexport function handlerToggleSwitcher()\n{\n\tconst selection = window.getSelection().toString();\n\tif (selection === \"\")\n\t{\n\t\tthis.parentElement.querySelector('.crm-form-embed-widgets-control > .ui-switcher').click();\n\t}\n}\n\nexport function handlerToggleCodeBlock(event)\n{\n\tconst section = event.currentTarget.closest('.ui-slider-section');\n\tconst toggleBtn = section.querySelector('[data-roll=\"data-show-code\"]');\n\tconst blockCode = section.querySelector('[data-roll=\"crm-form-embed__code\"]');\n\n\tif (Dom.style(blockCode, 'height') === \"0px\")\n\t{\n\t\tDom.addClass(toggleBtn, \"--up\");\n\t\tDom.addClass(blockCode, \"--open\");\n\t\tDom.style(blockCode, \"height\", Text.encode(blockCode.scrollHeight) + \"px\");\n\t}\n\telse\n\t{\n\t\tDom.removeClass(toggleBtn, \"--up\");\n\t\tDom.removeClass(blockCode, \"--open\");\n\t\tDom.style(blockCode, \"height\", Text.encode(blockCode.scrollHeight) + \"px\");\n\t\t// blockCode.clientHeight;\n\t\tDom.style(blockCode, \"height\", \"0\");\n\t}\n\n\tEvent.unbind(blockCode, 'transitionend', transitionHandlerForCodeBlock);\n\tEvent.bind(blockCode, 'transitionend', transitionHandlerForCodeBlock);\n}\n\nfunction transitionHandlerForCodeBlock(event)\n{\n\tconst section = event.currentTarget.closest('.ui-slider-section');\n\tconst blockCode = section.querySelector('[data-roll=\"crm-form-embed__code\"]');\n\tif (Dom.style(blockCode, \"height\") !== \"0px\") {\n\t\tDom.style(blockCode, \"height\", \"auto\");\n\t}\n}","import {Tag, Type, Text, Dom} from 'main.core';\nimport {Tab, HELP_CENTER_ID, HELP_CENTER_URL} from \"../tab\";\nimport type {WidgetOptions, WidgetsData, WidgetsList, Widget as Button} from \"../types\";\nimport {\n\tERROR_CODE_FORM_READ_ACCESS_DENIED,\n\tERROR_CODE_WIDGET_READ_ACCESS_DENIED,\n\tERROR_CODE_WIDGET_WRITE_ACCESS_DENIED\n} from \"../errors\";\nimport \"ui.switcher\";\nimport {handlerToggleSwitcher} from '../handler';\n\nexport class Widget extends Tab\n{\n\t#formId: number;\n\t#options: WidgetOptions;\n\t#loaded: boolean = false;\n\t#data: WidgetsData;\n\t#errors: Object;\n\t#container: HTMLElement;\n\n\tconstructor(formId: number, options: WidgetOptions = {})\n\t{\n\t\tsuper();\n\t\tthis.#formId = formId;\n\t\tthis.#options = options;\n\t\tWidget.prototype.actionGet = 'crm.form.getWidgetsForEmbed';\n\t\tthis.#container = this.renderContainer();\n\t}\n\n\tget formId(): number\n\t{\n\t\treturn this.#formId;\n\t}\n\n\tload(): Promise\n\t{\n\t\tif (this.#loaded)\n\t\t{\n\t\t\treturn Promise.resolve();\n\t\t}\n\n\t\treturn BX.ajax.runAction(this.actionGet, {\n\t\t\tjson: {\n\t\t\t\tformId: this.#formId,\n\t\t\t\tcount: this.#options.widgetsCount,\n\t\t\t}\n\t\t}).then(response => {\n\t\t\tthis.#data = response.data;\n\t\t\tthis.#loaded = true;\n\t\t\tthis.render();\n\t\t}).catch(response => {\n\t\t\tthis.#data = response.data;\n\t\t\tthis.#errors = response.errors;\n\t\t\tthis.#loaded = false;\n\t\t\tthis.renderError(response.data);\n\t\t});\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tthis.#container.innerHTML = '';\n\t\tconst headerSection = this.renderHeader(HELP_CENTER_ID, HELP_CENTER_URL);\n\t\tDom.append(headerSection, this.#container);\n\n\t\tif (!this.#loaded)\n\t\t{\n\t\t\tthis.loader.show(this.#container);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.replace(headerSection, this.renderHeader(\n\t\t\t\tthis.#data.helpCenterId,\n\t\t\t\tthis.#data.helpCenterUrl\n\t\t\t));\n\t\t\tthis.renderPreview(this.#container, this.#data);\n\t\t\tDom.append(this.renderWidgets(this.#data), this.#container);\n\t\t\tthis.renderFinalBlock(this.#container);\n\t\t}\n\n\t\treturn this.#container;\n\t}\n\n\trenderTo(node: HTMLElement): undefined\n\t{\n\t\tif (!Type.isDomNode(node))\n\t\t{\n\t\t\tthrow new Error('Parameter `node` not an element.');\n\t\t}\n\n\t\tDom.append(this.render(), node);\n\t}\n\n\trenderError(responseData: Object): HTMLElement\n\t{\n\t\tthis.#container.innerHTML = '';\n\n\t\tlet errorMessage = BX.Loc.getMessage('EMBED_SLIDER_GENERAL_ERROR');\n\n\t\tif (Type.isObject(responseData) && Type.isObject(responseData.error) && responseData.error.status === 'access denied')\n\t\t{\n\t\t\tif (responseData.error.code === ERROR_CODE_FORM_READ_ACCESS_DENIED) {\n\t\t\t\terrorMessage = BX.Loc.getMessage('EMBED_SLIDER_FORM_ACCESS_DENIED');\n\t\t\t}\n\n\t\t\tif (responseData.error.code === ERROR_CODE_WIDGET_READ_ACCESS_DENIED) {\n\t\t\t\terrorMessage = BX.Loc.getMessage('EMBED_SLIDER_WIDGET_ACCESS_DENIED');\n\t\t\t}\n\t\t}\n\n\t\tDom.append(Tag.render`\n\t\t\t<div class=\"ui-alert ui-alert-warning\">\n\t\t\t\t<span class=\"ui-alert-message\">${errorMessage}</span>\n\t\t\t</div>\n\t\t`, this.#container);\n\t}\n\t\n\trenderPreview(container: HTMLElement, data: WidgetsData): undefined\n\t{\n\t\tif (!Type.isNull(data.previewLink))\n\t\t{\n\t\t\tDom.append(\n\t\t\t\tthis.renderPreviewSection(\n\t\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_QR_TITLE'),\n\t\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_QR_DESC'),\n\t\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_OPEN_IN_NEW_TAB'),\n\t\t\t\t\tdata.previewLink\n\t\t\t\t),\n\t\t\t\tcontainer\n\t\t\t);\n\t\t}\n\t}\n\n\trenderFinalBlock(container: HTMLElement): undefined\n\t{\n\t\tDom.append(\n\t\t\tthis.renderCopySection(\n\t\t\t\tnull,\n\t\t\t\tnull,\n\t\t\t\tnull,\n\t\t\t\tthis.renderBubble(BX.Loc.getMessage('EMBED_SLIDER_WIDGET_COPY_BUBBLE'), true),\n\t\t\t),\n\t\t\tcontainer\n\t\t);\n\t}\n\n\trenderHeader(helpCenterId: number, helpCenterUrl: string): HTMLElement\n\t{\n\t\treturn this.renderHeaderSection(\n\t\t\t'message-widget',\n\t\t\tBX.Loc.getMessage('EMBED_SLIDER_WIDGET_TITLE'),\n\t\t\tBX.Loc.getMessage('EMBED_SLIDER_WIDGET_DESC'),\n\t\t\thelpCenterId,\n\t\t\thelpCenterUrl\n\t\t);\n\t}\n\n\trenderWidgets(data: WidgetsData): HTMLElement\n\t{\n\t\tconst section = this.renderSection();\n\t\tDom.append(Tag.render`\n\t\t\t<div class=\"crm-form-embed__title-block\">\n\t\t\t\t<div class=\"ui-slider-heading-4\">${BX.Loc.getMessage('EMBED_SLIDER_WIDGET_SETTINGS_TITLE')}</div>\n\t\t\t</div>\n\t\t`, section);\n\t\t// Dom.append(\n\t\t// \tthis.renderBubble(\"text\", false),\n\t\t// \tsection\n\t\t// );\n\n\t\tconst allIds = Object.keys(data.widgets);\n\t\tconst contentInner = allIds.length === 0\n\t\t\t? this.renderEmptyInner()\n\t\t\t: this.renderWidgetRows(data.widgets, data.formName, data.formType);\n\n\t\t// let showMoreLink = '';\n\t\t// if (data.showMoreLink)\n\t\t// {\n\t\t// \tconst allWidgetsUrl = Type.isStringFilled(data.url.allWidgets) ? data.url.allWidgets : '/crm/button/';\n\t\t// \tshowMoreLink = Tag.render`\n\t\t// \t\t<p class=\"crm-form-embed-widgets-all-buttons\">\n\t\t// \t\t\t<a href=\"${Text.encode(allWidgetsUrl)}\" target=\"_blank\" onclick=\"BX.SidePanel.Instance.open('${Text.encode(allWidgetsUrl)}'); return false;\">\n\t\t// \t\t\t\t${BX.Loc.getMessage('EMBED_SLIDER_WIDGET_FORM_ALL_WIDGETS')}\n\t\t// \t\t\t</a>\n\t\t// \t\t</p>\n\t\t// \t`;\n\t\t// }\n\n\t\tDom.append(\n\t\t\tTag.render`\n\t\t\t\t<div class=\"crm-form-embed__customization-settings\">\n\t\t\t\t\t${contentInner}\n\n\t\t\t\t\t<button\n\t\t\t\t\t\tclass=\"ui-btn ui-btn-sm ui-btn-light-border ui-btn-round ui-btn-no-caps ui-btn-icon-add crm-form-embed__customization-settings--btn crm-form-embed__customization-settings--btn-add\"\n\t\t\t\t\t\tonclick=\"window.open('/crm/button/edit/0/')\"\n\t\t\t\t\t>\n\t\t\t\t\t\t${BX.Loc.getMessage('EMBED_SLIDER_WIDGET_SETTINGS_BUTTON')}\n\t\t\t\t\t</button>\n\n\t\t\t\t\t<a\n\t\t\t\t\t\tclass=\"ui-btn ui-btn-sm ui-btn-light-border ui-btn-round ui-btn-no-caps crm-form-embed__customization-settings--btn\"\n\t\t\t\t\t\thref=\"${Text.encode(data.url.allWidgets)}\"\n\t\t\t\t\t\tstyle=\"float: right\"\n\t\t\t\t\t>\n\t\t\t\t\t\t${BX.Loc.getMessage('EMBED_SLIDER_WIDGET_FORM_ALL_WIDGETS')}\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t`,\n\t\t\tsection\n\t\t);\n\t\treturn section;\n\t}\n\n\trenderEmptyInner(): string\n\t{\n\t\treturn BX.Loc.getMessage('EMBED_SLIDER_WIDGET_EMPTY');\n\t}\n\n\trenderWidgetRows(widgets: WidgetsList, currentFormName: string, currentFormType: string): HTMLElement\n\t{\n\t\t// TODO remove data-attr and div\n\t\tconst widgetsList = Tag.render`<div class=\"crm-form-embed-widgets\" data-form-name=\"${Text.encode(currentFormName)}\" data-form-type=\"${Text.encode(currentFormType)}\"></div>`;\n\t\tconst widgetIds = Widget.getOrderedWidgetIds(widgets);\n\t\twidgetIds.forEach(id => {\n\t\t\tconst widget = widgets[id];\n\t\t\twidgetsList.append(Widget.#renderWidgetRow(widget, this.#formId, currentFormType));\n\t\t});\n\t\treturn widgetsList;\n\t}\n\n\tstatic #renderWidgetRow(widget: Button, formId: number, currentFormType: string): HTMLElement\n\t{\n\t\tconst switcher = Widget.createSwitcher(widget.checked, 'crm-form-embed-widget-input-' + widget.id);\n\t\tswitcher.handlers = {\n\t\t\ttoggled: Widget.#handleSwitcher.bind(switcher, formId, widget.id),\n\t\t};\n\n\t\tconst formNames = Object.values(widget.relatedFormNames);\n\t\tconst sFormType = Widget.#getFormTypeMessage(currentFormType);\n\t\tconst sFormNames = Type.isArray(formNames) && formNames.length > 0\n\t\t\t? formNames.join(', ')\n\t\t\t: ''\n\t\t;\n\t\tconst sFormNamesField = sFormNames.length > 0 ? sFormType + ': ' + sFormNames : '';\n\t\tconst row = Tag.render`\n\t\t\t<div class=\"crm-form-embed__customization-settings--row crm-form-embed-widgets-block\">\n\t\t\t\t<div class=\"crm-form-embed__customization-settings--switcher crm-form-embed-widgets-control\"></div>\n\t\t\t\t<div class=\"crm-form-embed__customization-settings--row-label\" onclick=\"${handlerToggleSwitcher}\">\n\t\t\t\t\t${Text.encode(widget.name)}\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tclass=\"crm-form-embed-widgets-detail crm-form-embed__customization-settings--row-label-secondary\"\n\t\t\t\t\ttitle=\"${Text.encode(sFormNamesField)}\"\n\t\t\t\t\tdata-form-name=\"${Text.encode(sFormNames)}\"\n\t\t\t\t\tdata-form-type=\"${Text.encode(sFormType)}\"\n\t\t\t\t>\n\t\t\t\t\t${Text.encode(sFormNamesField)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t\trow.querySelector('.crm-form-embed-widgets-control').append(switcher.getNode());\n\t\treturn row;\n\t}\n\n\tstatic getOrderedWidgetIds(widgets: WidgetsList): Array\n\t{\n\t\tconst widgetIds = Object.keys(widgets);\n\t\twidgetIds.sort((a, b) => {\n\t\t\tconst aData = widgets[a];\n\t\t\tconst bData = widgets[b];\n\t\t\tswitch (true)\n\t\t\t{\n\t\t\t\tcase (aData.checked && bData.checked) || (! aData.checked && ! bData.checked):\n\t\t\t\t\treturn 0;\n\t\t\t\tcase aData.checked && ! bData.checked:\n\t\t\t\t\treturn -1;\n\t\t\t\tcase ! aData.checked && bData.checked:\n\t\t\t\t\treturn 1;\n\t\t\t}\n\t\t});\n\t\treturn widgetIds;\n\t}\n\n\tstatic #getFormTypeMessage(formType: string): string\n\t{\n\t\tconst formTypeLangKey = 'EMBED_SLIDER_WIDGET_FORM_TYPE_MESSAGE_' + formType.toUpperCase();\n\t\treturn BX.Loc.hasMessage(formTypeLangKey) ? BX.Loc.getMessage(formTypeLangKey) : formType;\n\t}\n\n\t/**\n\t * @this Switcher\n\t * @param formId number\n\t * @param widgetId number\n\t */\n\tstatic #handleSwitcher(formId: number, widgetId: number): undefined\n\t{\n\t\tthis.setLoading(true);\n\n\t\t// save old widget values for rollback on error\n\t\tconst dataSetOld = this.getNode().closest('.crm-form-embed-widgets-block').querySelector('.crm-form-embed-widgets-detail').dataset;\n\t\tconst formNameOld = dataSetOld.formName;\n\t\tconst formTypeOld = dataSetOld.formType;\n\n\t\t// get values for current form\n\t\tconst dataSetCurrent = this.getNode().closest('.crm-form-embed-widgets').dataset;\n\t\tconst formName = dataSetCurrent.formName;\n\t\tconst formType = dataSetCurrent.formType;\n\n\t\t// set related forms field to new values\n\t\tWidget.#updateRelatedForms(this.isChecked(), formName, formType, this);\n\n\t\treturn BX.ajax.runAction('crm.form.assignWidgetToForm', {\n\t\t\tjson: {\n\t\t\t\tformId: formId,\n\t\t\t\tbuttonId: widgetId,\n\t\t\t\tassigned: this.isChecked() ? 'Y' : 'N',\n\t\t\t}\n\t\t}).then((response) => {\n\t\t\tthis.setLoading(false);\n\n\t\t\t// set to returned values (must match current)\n\t\t\tthis.check(response.data.assigned, false);\n\t\t\tWidget.#updateRelatedForms(this.isChecked(), response.data.formName, response.data.formType, this);\n\n\t\t\ttop.BX.UI.Notification.Center.notify({\n\t\t\t\tcontent: BX.Loc.getMessage('EMBED_SLIDER_OPENLINES_FORM_ALERT_SETTINGS_SAVED'),\n\t\t\t});\n\t\t}).catch((response) => {\n\t\t\tthis.setLoading(false);\n\n\t\t\t// rollback on error\n\t\t\tthis.check(! this.isChecked(), false);\n\t\t\tWidget.#updateRelatedForms(formNameOld.length > 0, formNameOld, formTypeOld, this);\n\n\t\t\tlet messageId = 'EMBED_SLIDER_WIDGET_FORM_ALERT_ERROR';\n\t\t\tif (!Type.isUndefined(response.data.error) && !Type.isUndefined(response.data.error.status) && response.data.error.status === 'access denied')\n\t\t\t{\n\t\t\t\tmessageId = response.data.error.code === ERROR_CODE_WIDGET_WRITE_ACCESS_DENIED\n\t\t\t\t\t? 'EMBED_SLIDER_WIDGET_FORM_ALERT_ERROR_ACCESS_DENIED_WIDGET'\n\t\t\t\t\t: 'EMBED_SLIDER_WIDGET_FORM_ALERT_ERROR_ACCESS_DENIED_FORM';\n\t\t\t}\n\n\t\t\ttop.BX.UI.Notification.Center.notify({\n\t\t\t\tcontent: BX.Loc.getMessage(messageId),\n\t\t\t});\n\t\t});\n\t}\n\n\tstatic #updateRelatedForms(assign: boolean, formName: string, formType: string, switcher: Switcher)\n\t{\n\t\tif (assign)\n\t\t{\n\t\t\tWidget.#setRelatedForms(switcher, formName, formType);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tWidget.#clearRelatedForms(switcher);\n\t\t}\n\t}\n\n\tstatic #setRelatedForms(switcher: Switcher, formName: string, formType: string)\n\t{\n\t\tconst formTypeMessage = Widget.#getFormTypeMessage(formType);\n\t\tconst elem = switcher.getNode().closest('.crm-form-embed-widgets-block').querySelector('.crm-form-embed-widgets-detail');\n\t\telem.textContent = formTypeMessage + ': ' + formName;\n\t\telem.setAttribute('data-form-name', formName);\n\t\telem.setAttribute('data-form-type', formTypeMessage);\n\t}\n\n\tstatic #clearRelatedForms(switcher: Switcher)\n\t{\n\t\tconst elem = switcher.getNode().closest('.crm-form-embed-widgets-block').querySelector('.crm-form-embed-widgets-detail');\n\t\telem.textContent = '';\n\t\telem.setAttribute('data-form-name', '');\n\t\telem.setAttribute('data-form-type', '');\n\t}\n\n\t/**\n\t * @protected\n\t */\n\tstatic createSwitcher(checked: boolean, inputName: string): Switcher\n\t{\n\t\tconst switcherNode = document.createElement('span');\n\t\tswitcherNode.className = 'ui-switcher';\n\t\treturn new top.BX.UI.Switcher({\n\t\t\tnode: switcherNode,\n\t\t\tchecked: checked,\n\t\t\tinputName: inputName,\n\t\t});\n\t}\n}","import {Tag, Text, Type, Dom} from 'main.core';\nimport {Widget} from './widget';\nimport type {OpenlinesData, LinesList, WidgetOptions} from \"../types\";\nimport \"ui.switcher\";\nimport {ERROR_CODE_OPENLINES_WRITE_ACCESS_DENIED} from \"../errors\";\nimport {handlerToggleSwitcher} from '../handler';\n\nexport class Openlines extends Widget\n{\n\tconstructor(formId: number, options: WidgetOptions = {})\n\t{\n\t\tsuper(formId, options);\n\t\tOpenlines.prototype.actionGet = 'crm.form.getOpenlinesForEmbed';\n\t}\n\n\trenderHeader(helpCenterId: number, helpCenterUrl: string): HTMLElement\n\t{\n\t\treturn this.renderHeaderSection(\n\t\t\t'message-widget',\n\t\t\tBX.Loc.getMessage('EMBED_SLIDER_OL_TITLE'),\n\t\t\tBX.Loc.getMessage('EMBED_SLIDER_OL_DESC'),\n\t\t\thelpCenterId,\n\t\t\thelpCenterUrl\n\t\t);\n\t}\n\n\trenderPreview(container: HTMLElement, data: OpenlinesData): undefined\n\t{\n\t\tif (!Type.isNull(data.previewLink))\n\t\t{\n\t\t\tDom.append(\n\t\t\t\tthis.renderPreviewSection(\n\t\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_QR_TITLE'),\n\t\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_QR_DESC'),\n\t\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_OPEN_IN_NEW_TAB'),\n\t\t\t\t\tdata.previewLink\n\t\t\t\t),\n\t\t\t\tcontainer\n\t\t\t);\n\t\t}\n\t}\n\n\trenderFinalBlock(container: HTMLElement): undefined {\n\t}\n\n\trenderWidgets(data: OpenlinesData): HTMLElement\n\t{\n\t\t// FIXME test, moved to error handler in widgets\n\t\t// if (Type.isNull(data))\n\t\t// {\n\t\t// \treturn this.renderAccessDeniedAlert();\n\t\t// }\n\n\t\tconst section = this.renderSection();\n\t\tDom.append(Tag.render`\n\t\t\t<div class=\"crm-form-embed__title-block\">\n\t\t\t\t<div class=\"ui-slider-heading-4\">${BX.Loc.getMessage('EMBED_SLIDER_OL_SETTINGS_TITLE')}</div>\n\t\t\t</div>\n\t\t`, section);\n\t\t// Dom.append(\n\t\t// \tthis.renderBubble(\"text\", false),\n\t\t// \tsection\n\t\t// );\n\n\t\tconst allIds = Object.keys(data.lines);\n\t\tconst contentInner = allIds.length === 0\n\t\t\t? this.renderEmptyInner()\n\t\t\t: this.renderLineRows(data.lines, data.formName);\n\n\t\t// let showMoreLink = '';\n\t\t// if (data.showMoreLink)\n\t\t// {\n\t\t// \tconst allLinesUrl = Type.isStringFilled(data.url.allLines) ? data.url.allLines : '/services/contact_center/openlines';\n\t\t// \tshowMoreLink = Tag.render`\n\t\t// \t\t<p class=\"crm-form-embed-widgets-all-buttons\">\n\t\t// \t\t\t<a href=\"${Text.encode(allLinesUrl)}\" target=\"_blank\" onclick=\"BX.SidePanel.Instance.open('${Text.encode(allLinesUrl)}'); return false;\">\n\t\t// \t\t\t\t${BX.Loc.getMessage('EMBED_SLIDER_OPENLINES_FORM_ALL_LINES')}\n\t\t// \t\t\t</a>\n\t\t// \t\t</p>\n\t\t// \t`;\n\t\t// }\n\n\t\tDom.append(Tag.render`\n\t\t\t<div class=\"crm-form-embed__customization-settings\"> <!-- --without-btn -->\n\t\t\t\t${contentInner}\n\t\t\t\t\n\t\t\t\t<a\n\t\t\t\t\tclass=\"ui-btn ui-btn-sm ui-btn-light-border ui-btn-round ui-btn-no-caps crm-form-embed__customization-settings--btn\"\n\t\t\t\t\thref=\"${Text.encode(data.url.allLines)}\"\n\t\t\t\t\tstyle=\"float: right;\"\n\t\t\t\t>\n\t\t\t\t\t${BX.Loc.getMessage('EMBED_SLIDER_OPENLINES_FORM_ALL_LINES')}\n\t\t\t\t</a>\n\t\t\t\t<div style=\"clear: both\"></div>\n\t\t\t</div>\n\t\t`, section);\n\t\treturn section;\n\t}\n\n\trenderEmptyInner(): string\n\t{\n\t\treturn BX.Loc.getMessage('EMBED_SLIDER_OPENLINES_EMPTY');\n\t}\n\n\trenderAccessDeniedAlert(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"ui-alert ui-alert-warning\">\n\t\t\t\t<span class=\"ui-alert-message\">${BX.Loc.getMessage('EMBED_SLIDER_OPENLINES_ACCESS_DENIED')}</span>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\trenderLineRows(lines: LinesList, currentFormName: string): HTMLElement\n\t{\n\t\tconst linesList = Tag.render`<div class=\"crm-form-embed-widgets\" data-form-name=\"${Text.encode(currentFormName)}\"></div>`;\n\t\tconst lineIds = Openlines.getOrderedWidgetIds(lines);\n\t\tlineIds.forEach(id => {\n\t\t\tconst data = lines[id];\n\t\t\tconst checked = data.formEnabled && data.checked;\n\t\t\tconst formName = data.formEnabled ? data.formName : '';\n\t\t\tlinesList.append(Openlines.#renderLineRow(data.id, data.name, formName, checked, this.formId));\n\t\t});\n\t\treturn linesList;\n\t}\n\n\tstatic #renderLineRow(lineId: number, lineName: string, formName: string, checked: boolean, formId: number): HTMLElement\n\t{\n\t\tconst switcher = Openlines.createSwitcher(checked, 'crm-form-embed-line-input-' + lineId);\n\t\tswitcher.handlers = {\n\t\t\ttoggled: Openlines.#handleSwitcher.bind(switcher, formId, lineId),\n\t\t};\n\n\t\tconst row = Tag.render`\n\t\t\t<div class=\"crm-form-embed__customization-settings--row crm-form-embed-widgets-block\">\n\t\t\t\t<div class=\"crm-form-embed__customization-settings--switcher crm-form-embed-widgets-control\"></div>\n\t\t\t\t<div class=\"crm-form-embed__customization-settings--row-label\" onclick=\"${handlerToggleSwitcher}\">\n\t\t\t\t\t${Text.encode(lineName)}\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tclass=\"crm-form-embed-widgets-detail crm-form-embed__customization-settings--row-label-secondary\"\n\t\t\t\t\ttitle=\"${Text.encode(formName)}\"\n\t\t\t\t\tdata-form-name=\"${Text.encode(formName)}\"\n\t\t\t\t>\n\t\t\t\t\t${Text.encode(formName)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t\trow.querySelector('.crm-form-embed-widgets-control').append(switcher.getNode());\n\t\treturn row;\n\t}\n\n\t/**\n\t * @this Switcher\n\t * @param formId number\n\t * @param lineId number\n\t */\n\tstatic #handleSwitcher(formId: number, lineId: number): undefined\n\t{\n\t\tthis.setLoading(true);\n\n\t\t// save old widget values for rollback on error\n\t\tconst formNameOld = this.getNode().closest('.crm-form-embed-widgets-block').querySelector('.crm-form-embed-widgets-detail').dataset.formName;\n\t\t// get values for current form\n\t\tconst formName = this.getNode().closest('.crm-form-embed-widgets').dataset.formName;\n\t\t// set related forms field to new values\n\t\tOpenlines.#updateRelatedOpenlineForms(this.isChecked() ? formName : '', this);\n\n\t\treturn BX.ajax.runAction('crm.form.assignOpenlinesToForm', {\n\t\t\tjson: {\n\t\t\t\tformId: formId,\n\t\t\t\tlineId: lineId,\n\t\t\t\tassigned: this.isChecked() ? 'Y' : 'N',\n\t\t\t\t// afterMessage: 'N',\n\t\t\t}\n\t\t}).then((response) => {\n\t\t\tthis.setLoading(false);\n\n\t\t\t// set to returned values (must match current)\n\t\t\tthis.check(response.data.assigned, false);\n\t\t\tOpenlines.#updateRelatedOpenlineForms(this.isChecked() ? response.data.formName : '', this);\n\n\t\t\ttop.BX.UI.Notification.Center.notify({\n\t\t\t\tcontent: BX.Loc.getMessage('EMBED_SLIDER_OPENLINES_FORM_ALERT_SETTINGS_SAVED'),\n\t\t\t});\n\t\t}).catch((response) => {\n\t\t\tthis.setLoading(false);\n\n\t\t\t// rollback on error\n\t\t\tthis.check(! this.isChecked(), false);\n\t\t\tOpenlines.#updateRelatedOpenlineForms(formNameOld.length > 0 ? formNameOld : '', this);\n\n\t\t\tlet messageId = 'EMBED_SLIDER_OPENLINES_FORM_ALERT_ERROR';\n\t\t\tif (!Type.isUndefined(response.data.error) && !Type.isUndefined(response.data.error.status) && response.data.error.status === 'access denied')\n\t\t\t{\n\t\t\t\tmessageId = response.data.error.code === ERROR_CODE_OPENLINES_WRITE_ACCESS_DENIED\n\t\t\t\t\t? 'EMBED_SLIDER_WIDGET_FORM_ALERT_ERROR_ACCESS_DENIED' // 'EMBED_SLIDER_WIDGET_FORM_ALERT_ERROR_ACCESS_DENIED_OPENLINES'\n\t\t\t\t\t: 'EMBED_SLIDER_WIDGET_FORM_ALERT_ERROR_ACCESS_DENIED_FORM';\n\t\t\t}\n\n\t\t\ttop.BX.UI.Notification.Center.notify({\n\t\t\t\tcontent: BX.Loc.getMessage(messageId),\n\t\t\t});\n\t\t});\n\t}\n\n\tstatic #updateRelatedOpenlineForms(formName: string, switcher: Switcher) {\n\t\tconst elem = switcher.getNode().closest('.crm-form-embed-widgets-block').querySelector('.crm-form-embed-widgets-detail');\n\t\telem.textContent = formName;\n\t\telem.setAttribute('data-form-name', formName);\n\t}\n}","import {Tag, Type, Text, Dom, Event} from 'main.core';\nimport {DataProvider} from \"../../data_provider\";\nimport {Tab} from \"../../tab\";\nimport {ERROR_CODE_FORM_READ_ACCESS_DENIED} from \"../../errors\";\nimport type {EmbedData} from \"../../types\";\nimport {handlerToggleCodeBlock} from '../../handler';\nimport \"ui.switcher\";\nimport \"ui.notification\";\n\nexport class Form extends Tab\n{\n\t#formId: number;\n\t#dataProvider: DataProvider;\n\n\tconstructor(formId: number, dataProvider: DataProvider)\n\t{\n\t\tsuper();\n\t\tthis.#formId = formId;\n\t\tthis.#dataProvider = dataProvider;\n\t}\n\n\tget dataProvider(): DataProvider\n\t{\n\t\treturn this.#dataProvider;\n\t}\n\n\tget loaded(): boolean\n\t{\n\t\treturn this.dataProvider.loaded;\n\t}\n\n\t/**\n\t * @protected\n\t * @deprecated this.dataProvider.data\n\t */\n\tget data(): EmbedData\n\t{\n\t\treturn this.dataProvider.data;\n\t}\n\n\t/**\n\t * @deprecated this.dataProvider.data\n\t */\n\tset data(data: EmbedData)\n\t{\n\t\tthis.dataProvider.data = data;\n\t}\n\n\tget formId(): number\n\t{\n\t\treturn this.#formId;\n\t}\n\n\tload(force: boolean = false): Promise\n\t{\n\t\tif (!force && this.dataProvider.loaded)\n\t\t{\n\t\t\treturn Promise.resolve();\n\t\t}\n\n\t\tif (Type.isObject(this.dataProvider.errors) && Object.keys(this.dataProvider.errors).length > 0)\n\t\t{\n\t\t\treturn Promise.reject();\n\t\t}\n\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tBX.ajax.runAction('crm.form.getEmbed', {\n\t\t\t\tjson: {\n\t\t\t\t\tformId: this.#formId\n\t\t\t\t}\n\t\t\t}).then(response => {\n\t\t\t\tthis.dataProvider.data = response.data;\n\t\t\t\tthis.dataProvider.loaded = true;\n\t\t\t\tresolve(response);\n\t\t\t}).catch(response => {\n\t\t\t\tthis.dataProvider.data = response.data;\n\t\t\t\tthis.dataProvider.errors = response.errors;\n\t\t\t\tthis.dataProvider.loaded = false;\n\t\t\t\treject(response);\n\t\t\t});\n\t\t});\n\t}\n\n\tsave(): Promise\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\treturn BX.ajax.runAction('crm.form.saveEmbed', {\n\t\t\t\tjson: {\n\t\t\t\t\tformId: this.formId,\n\t\t\t\t\tdata: this.dataProvider.data.embed.viewValues,\n\t\t\t\t}\n\t\t\t}).then((response) => {\n\t\t\t\t// TODO move to controls\n\t\t\t\t// const elem = renderedOptions.querySelector(`#crm-form-embed-wrapper-${formId}-${type}-vertical`);\n\t\t\t\t// if (key === \"type\")\n\t\t\t\t// {\n\t\t\t\t// \titem.value === \"popup\" && Dom.hide(elem);\n\t\t\t\t// \titem.value === \"panel\" && Dom.show(elem);\n\t\t\t\t// }\n\n\t\t\t\ttop.BX.UI.Notification.Center.notify({\n\t\t\t\t\tcontent: BX.Loc.getMessage('EMBED_SLIDER_OPENLINES_FORM_ALERT_SETTINGS_SAVED'),\n\t\t\t\t});\n\n\t\t\t\tresolve(response);\n\t\t\t}).catch((response) => {\n\t\t\t\t// FIXME move to controls\n\t\t\t\t// if (key === \"type\")\n\t\t\t\t// {\n\t\t\t\t// \titem.value === \"popup\" && Dom.show(elem);\n\t\t\t\t// \titem.value === \"panel\" && Dom.hide(elem);\n\t\t\t\t// }\n\n\t\t\t\tlet messageId = 'EMBED_SLIDER_FORM_SETTINGS_ALERT_ERROR';\n\t\t\t\tif (! Type.isUndefined(response.data.error.status) && response.data.error.status === 'access denied')\n\t\t\t\t{\n\t\t\t\t\tmessageId = 'EMBED_SLIDER_WIDGET_FORM_ALERT_ERROR_ACCESS_DENIED_FORM';\n\t\t\t\t}\n\n\t\t\t\ttop.BX.UI.Notification.Center.notify({\n\t\t\t\t\tcontent: BX.Loc.getMessage(messageId),\n\t\t\t\t});\n\n\t\t\t\treject(response);\n\t\t\t});\n\t\t});\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\treturn this.renderContainer();\n\t}\n\n\trenderTo(node: HTMLElement): undefined\n\t{\n\t\tif (!Type.isDomNode(node))\n\t\t{\n\t\t\tthrow new Error('Parameter `node` not an element.');\n\t\t}\n\n\t\tDom.append(this.render(), node);\n\t}\n\n\trenderError(responseData: Object): HTMLElement\n\t{\n\t\tlet errorMessage = BX.Loc.getMessage('EMBED_SLIDER_GENERAL_ERROR');\n\n\t\tif (Type.isObject(responseData) && Type.isObject(responseData.error) && responseData.error.status === 'access denied')\n\t\t{\n\t\t\tif (responseData.error.code === ERROR_CODE_FORM_READ_ACCESS_DENIED) {\n\t\t\t\terrorMessage = BX.Loc.getMessage('EMBED_SLIDER_FORM_ACCESS_DENIED');\n\t\t\t}\n\t\t}\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"ui-alert ui-alert-warning\">\n\t\t\t\t<span class=\"ui-alert-message\">${errorMessage}</span>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\trenderSettingsHeader(title: string, switcher: boolean = false, expertMode: function = null): HTMLElement\n\t{\n\t\tconst switcherNode = switcher ? Tag.render`<div class=\"crm-form-embed__customization-settings--switcher\"></div>` : '';\n\t\tconst headingBox = Tag.render`\n\t\t\t<div class=\"ui-slider-heading-box ${switcher ? '--toggle' : ''}\" data-roll=\"heading-block\">\n\t\t\t\t<div class=\"ui-slider-heading-main\">\n\t\t\t\t\t${switcherNode}\n\t\t\t\t\t<div class=\"ui-slider-heading-4\">${title ? title : BX.Loc.getMessage('EMBED_SLIDER_SETTINGS_HEADING')}</div>\n\t\t\t\t</div>\n\t\t\t\t${expertMode ? Tag.render`\n\t\t\t\t\t<div class=\"ui-slider-heading-rest\">\n\t\t\t\t\t\t<a \n\t\t\t\t\t\t\tclass=\"ui-slider-link crm-form-embed__link --expert-mode --visible\"\n\t\t\t\t\t\t\tdata-roll=\"data-more-settings\"\n\t\t\t\t\t\t\tonclick=\"${expertMode.bind(this)}\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t${BX.Loc.getMessage('EMBED_SLIDER_EXPERT_MODE')}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t` : ''}\n\t\t\t</div>\n\t\t`;\n\n\t\tif (switcher)\n\t\t{\n\t\t\tconst heading = headingBox.querySelector('.ui-slider-heading-4');\n\t\t\tEvent.bind(heading, 'click', (event) => {\n\t\t\t\t// event.preventDefault();\n\t\t\t\t// const switcherId = event.currentTarget\n\t\t\t\t// \t.closest('.ui-slider-heading-main')\n\t\t\t\t// \t.querySelector('.ui-switcher[data-switcher-init=\"y\"][data-switcher-id]')\n\t\t\t\t// \t.dataset.switcherId\n\t\t\t\t// ;\n\t\t\t\t// const innerSwitcher = top.BX.UI.Switcher.getById(switcherId);\n\t\t\t\t// innerSwitcher.toggle();\n\n\t\t\t\tevent.currentTarget\n\t\t\t\t\t.closest('.ui-slider-heading-main')\n\t\t\t\t\t.querySelector('.ui-switcher[data-switcher-init=\"y\"]')\n\t\t\t\t\t.click();\n\t\t\t});\n\t\t}\n\n\t\treturn headingBox;\n\t}\n\n\t/**\n\t * @protected\n\t */\n\trenderCodeBlock(code: string): HTMLElement\n\t{\n\t\tconst section = this.renderSection();\n\t\tDom.append(Tag.render`\n\t\t\t<div class=\"crm-form-embed__customization--show-code\">\n\t\t\t\t<div class=\"ui-icon ui-icon-service-code crm-form-embed__customization--show-code-icon\"><i></i></div>\n\t\t\t\t<a class=\"ui-slider-link crm-form-embed__link --with-arrow\" data-roll=\"data-show-code\">${BX.Loc.getMessage('EMBED_SLIDER_SHOW_CODE')}</a>\n\t\t\t</div>\n\t\t`, section);\n\t\tDom.append(Tag.render`\n\t\t\t<div class=\"crm-form-embed__code\" data-roll=\"crm-form-embed__code\" style=\"height: 0px;\">\n\t\t\t\t<pre class=\"crm-form-embed__code-block\"><span>${Text.encode(code)}</span></pre>\n\t\t\t</div>\n\t\t`, section);\n\n\t\tconst toggleBtn = section.querySelector('[data-roll=\"data-show-code\"]');\n\t\tEvent.unbind(toggleBtn, 'click', handlerToggleCodeBlock);\n\t\tEvent.bind(toggleBtn, 'click', handlerToggleCodeBlock);\n\n\t\treturn section;\n\t}\n\n\tupdateDependentFields(container: Element, name: string, value: string)\n\t{\n\t\tswitch (name)\n\t\t{\n\t\t\tcase 'type':\n\t\t\t\tconst containerVertical = container.querySelector('[data-option=\"vertical\"]');\n\t\t\t\tif (value === 'panel')\n\t\t\t\t{\n\t\t\t\t\tDom.show(containerVertical)\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tDom.hide(containerVertical);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'button.plain':\n\t\t\t\tconst containerButtonStyle = container.querySelector('[data-option=\"buttonStyle\"]');\n\t\t\t\tconst containerLinkStyle = container.querySelector('[data-option=\"button.decoration\"]');\n\t\t\t\t// const containerFont = container.querySelector('[data-option=\"button.font\"]');\n\t\t\t\tconst containerButtonPosition = container.querySelector('[data-option=\"button.align\"]');\n\t\t\t\tconst containerLinkPosition = container.querySelector('[data-option=\"link.align\"]');\n\t\t\t\tif (value === '1')\n\t\t\t\t{\n\t\t\t\t\tDom.hide(containerButtonStyle);\n\t\t\t\t\tDom.show(containerLinkStyle);\n\n\t\t\t\t\tDom.hide(containerButtonPosition);\n\t\t\t\t\tDom.show(containerLinkPosition);\n\n\t\t\t\t\t// // Dom.hide(containerFont);\n\t\t\t\t\t// containerFont?.querySelectorAll('.crm-form-embed__settings-main--option').forEach((node) => {\n\t\t\t\t\t// \tDom.attr(node, 'disabled', true);\n\t\t\t\t\t// })\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tDom.hide(containerLinkStyle);\n\t\t\t\t\tDom.show(containerButtonStyle);\n\n\t\t\t\t\tDom.hide(containerLinkPosition);\n\t\t\t\t\tDom.show(containerButtonPosition);\n\n\t\t\t\t\t// // Dom.show(containerFont);\n\t\t\t\t\t// containerFont?.querySelectorAll('.crm-form-embed__settings-main--option').forEach((node) => {\n\t\t\t\t\t// \tDom.attr(node, 'disabled', false);\n\t\t\t\t\t// })\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t}\n}","import {Dom} from 'main.core';\nimport {Form} from './form';\nimport {DataProvider} from \"../../data_provider\";\nimport {HELP_CENTER_ID, HELP_CENTER_URL} from \"../../tab\";\n\nexport class Inline extends Form\n{\n\t#container: HTMLElement;\n\t#rendered: boolean = false;\n\n\tconstructor(formId: number, dataProvider: DataProvider)\n\t{\n\t\tsuper(formId, dataProvider);\n\t\tthis.#container = super.render();\n\t}\n\n\tload(force: boolean = false): Promise\n\t{\n\t\treturn super.load(force).then(() => {\n\t\t\tif (!this.#rendered)\n\t\t\t{\n\t\t\t\tthis.render();\n\t\t\t}\n\t\t}).catch((error) => {\n\t\t\tconsole.error(error);\n\t\t\tif (!this.#rendered)\n\t\t\t{\n\t\t\t\tthis.#renderError();\n\t\t\t}\n\t\t});\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tthis.#container.innerHTML = '';\n\n\t\tconst headerSection = this.renderHeaderSection(\n\t\t\t'code',\n\t\t\tBX.Loc.getMessage('EMBED_SLIDER_INLINE_TITLE'),\n\t\t\tBX.Loc.getMessage('EMBED_SLIDER_INLINE_DESC'),\n\t\t\tHELP_CENTER_ID,\n\t\t\tHELP_CENTER_URL\n\t\t);\n\t\tDom.append(headerSection, this.#container);\n\n\t\tif (!super.loaded)\n\t\t{\n\t\t\tthis.loader.show(this.#container);\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// update with actual help-center link\n\t\t\tDom.replace(headerSection, this.renderHeaderSection(\n\t\t\t\t'code',\n\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_INLINE_TITLE'),\n\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_INLINE_DESC'),\n\t\t\t\tthis.dataProvider.data.embed.helpCenterId,\n\t\t\t\tthis.dataProvider.data.embed.helpCenterUrl\n\t\t\t));\n\n\t\t\tDom.append(this.renderPreviewSection(\n\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_QR_TITLE'),\n\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_QR_DESC'),\n\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_OPEN_IN_NEW_TAB'),\n\t\t\t\tthis.dataProvider.data.embed.previewLink.replace('#preview#', 'inline') // this.dataProvider.data.embed.pubLink\n\t\t\t), this.#container);\n\n\t\t\tconst code = this.dataProvider.data.embed.scripts['inline'].text;\n\t\t\tDom.append(this.renderCodeBlock(code), this.#container);\n\t\t\tDom.append(this.renderCopySection(\n\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_COPY_CODE'),\n\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_COPY_CODE2'),\n\t\t\t\tcode,\n\t\t\t\tthis.renderBubble(BX.Loc.getMessage('EMBED_SLIDER_COPY_CODE_BUBBLE_INLINE'), true)\n\t\t\t), this.#container);\n\n\t\t\tthis.#rendered = true;\n\t\t}\n\n\t\treturn this.#container;\n\t}\n\n\t#renderError(): HTMLElement\n\t{\n\t\tthis.#container.innerHTML = '';\n\t\tDom.append(super.renderError(this.dataProvider.data), this.#container);\n\t\tthis.#rendered = true;\n\t\treturn this.#container;\n\t}\n}","export function getSvg(option: string, value: string): string\n{\n\tswitch (option)\n\t{\n\t\tcase 'position':\n\t\t\tswitch (value)\n\t\t\t{\n\t\t\t\tcase 'left':\n\t\t\t\t\treturn `\n\t\t\t\t\t\t\t<svg width=\"100\" height=\"66\" viewBox=\"0 0 100 66\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t\t\t\t\t\t<path class=\"crm-form-embed__settings--svg-arrow\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M42.1597 39.1886C42.5214 38.7916 42.5214 38.1845 42.1598 37.7874L38.8098 34.1094L51.9669 34.1094C52.5703 34.1094 53.0595 33.6202 53.0595 33.0167C53.0595 32.4132 52.5703 31.924 51.9669 31.924L38.8098 31.924L42.1598 28.2459C42.5214 27.8489 42.5214 27.2418 42.1598 26.8448C41.7471 26.3917 41.0341 26.3917 40.6214 26.8448L35.9947 31.9245C35.431 32.5435 35.431 33.4898 35.9947 34.1088L40.6215 39.1886C41.0341 39.6416 41.7471 39.6417 42.1597 39.1886Z\" />\n\t\t\t\t\t\t\t\t<path class=\"crm-form-embed__settings--svg-block\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M9 26.0002C9 24.8957 9.89543 24.0002 11 24.0002H25C26.1046 24.0002 27 24.8957 27 26.0002V40.0002C27 41.1048 26.1046 42.0002 25 42.0002H11C9.89543 42.0002 9 41.1048 9 40.0002V26.0002ZM14 33.0002C14 32.448 14.4477 32.0002 15 32.0002H21C21.5523 32.0002 22 32.448 22 33.0002C22 33.5525 21.5523 34.0002 21 34.0002H15C14.4477 34.0002 14 33.5525 14 33.0002ZM14 28.0002C13.4477 28.0002 13 28.448 13 29.0002C13 29.5525 13.4477 30.0002 14 30.0002H22C22.5523 30.0002 23 29.5525 23 29.0002C23 28.448 22.5523 28.0002 22 28.0002H14Z\"/>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t`;\n\t\t\t\tcase 'center':\n\t\t\t\t\treturn `\n\t\t\t\t\t\t\t<svg width=\"100\" height=\"66\" viewBox=\"0 0 100 66\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t\t\t\t\t\t<path class=\"crm-form-embed__settings--svg-arrow\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M26.4471 26.7989C26.006 27.24 26.006 27.9552 26.4471 28.3963L30.1754 32.1246H21.1297C20.5058 32.1246 20 32.6304 20 33.2543C20 33.8783 20.5058 34.384 21.1297 34.384H30.1754L26.4471 38.1124C26.006 38.5535 26.006 39.2687 26.4471 39.7098C26.8882 40.151 27.6034 40.151 28.0446 39.7098L33.1811 34.5733C33.9095 33.8449 33.9095 32.6639 33.1811 31.9355L28.0445 26.7989C27.6034 26.3578 26.8883 26.3578 26.4471 26.7989Z\"/>\n\t\t\t\t\t\t\t\t<path class=\"crm-form-embed__settings--svg-arrow\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M71.8799 39.6907C72.3031 39.2572 72.3031 38.5652 71.8799 38.1317L68.2216 34.3842L76.8822 34.3842C77.5061 34.3842 78.0119 33.8784 78.0119 33.2545C78.0119 32.6306 77.5061 32.1248 76.8822 32.1248L68.2216 32.1248L71.8799 28.3772C72.3031 27.9437 72.3031 27.2517 71.8799 26.8182C71.4421 26.3697 70.7208 26.3697 70.2829 26.8182L65.2375 31.9867C64.5493 32.6917 64.5493 33.8171 65.2375 34.5221L70.283 39.6907C70.7208 40.1392 71.4421 40.1392 71.8799 39.6907Z\"/>\n\t\t\t\t\t\t\t\t<path class=\"crm-form-embed__settings--svg-block\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M41 26.0002C41 24.8957 41.8954 24.0002 43 24.0002H57C58.1046 24.0002 59 24.8957 59 26.0002V40.0002C59 41.1048 58.1046 42.0002 57 42.0002H43C41.8954 42.0002 41 41.1048 41 40.0002V26.0002ZM46 33.0002C46 32.448 46.4477 32.0002 47 32.0002H53C53.5523 32.0002 54 32.448 54 33.0002C54 33.5525 53.5523 34.0002 53 34.0002H47C46.4477 34.0002 46 33.5525 46 33.0002ZM46 28.0002C45.4477 28.0002 45 28.448 45 29.0002C45 29.5525 45.4477 30.0002 46 30.0002H54C54.5523 30.0002 55 29.5525 55 29.0002C55 28.448 54.5523 28.0002 54 28.0002H46Z\"/>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t`;\n\t\t\t\tcase 'right':\n\t\t\t\t\treturn `\n\t\t\t\t\t\t\t<svg width=\"100\" height=\"66\" viewBox=\"0 0 100 66\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t\t\t\t\t\t<path class=\"crm-form-embed__settings--svg-arrow\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M59.4471 26.7989C59.006 27.24 59.006 27.9552 59.4471 28.3963L63.1754 32.1246H48.1297C47.5058 32.1246 47 32.6304 47 33.2543C47 33.8783 47.5058 34.384 48.1297 34.384H63.1754L59.4471 38.1124C59.006 38.5535 59.006 39.2687 59.4471 39.7098C59.8882 40.151 60.6034 40.151 61.0446 39.7098L66.1811 34.5733C66.9095 33.8449 66.9095 32.6639 66.1811 31.9355L61.0445 26.7989C60.6034 26.3578 59.8883 26.3578 59.4471 26.7989Z\"/>\n\t\t\t\t\t\t\t\t<path class=\"crm-form-embed__settings--svg-block\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M75 26.0002C75 24.8957 75.8954 24.0002 77 24.0002H91C92.1046 24.0002 93 24.8957 93 26.0002V40.0002C93 41.1048 92.1046 42.0002 91 42.0002H77C75.8954 42.0002 75 41.1048 75 40.0002V26.0002ZM80 33.0002C80 32.448 80.4477 32.0002 81 32.0002H87C87.5523 32.0002 88 32.448 88 33.0002C88 33.5525 87.5523 34.0002 87 34.0002H81C80.4477 34.0002 80 33.5525 80 33.0002ZM80 28.0002C79.4477 28.0002 79 28.448 79 29.0002C79 29.5525 79.4477 30.0002 80 30.0002H88C88.5523 30.0002 89 29.5525 89 29.0002C89 28.448 88.5523 28.0002 88 28.0002H80Z\"/>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t`;\n\t\t\t}\n\t\t\tbreak;\n\t\tcase 'button.align':\n\t\t\tswitch (value)\n\t\t\t{\n\t\t\t\tcase 'left':\n\t\t\t\t\treturn `\n\t\t\t\t\t\t\t<svg width=\"100\" height=\"66\" viewBox=\"0 0 100 66\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t\t\t\t\t\t<path class=\"crm-form-embed__settings--svg-arrow\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M42.1597 39.1883C42.5214 38.7913 42.5214 38.1842 42.1598 37.7872L38.8098 34.1091L51.9669 34.1091C52.5703 34.1091 53.0595 33.6199 53.0595 33.0164C53.0595 32.413 52.5703 31.9238 51.9669 31.9238L38.8098 31.9238L42.1598 28.2457C42.5214 27.8486 42.5214 27.2416 42.1598 26.8445C41.7471 26.3914 41.0341 26.3914 40.6214 26.8445L35.9947 31.9243C35.431 32.5432 35.431 33.4896 35.9947 34.1085L40.6215 39.1883C41.0341 39.6414 41.7471 39.6414 42.1597 39.1883Z\" />\n\t\t\t\t\t\t\t\t<path class=\"crm-form-embed__settings--svg-block\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M7 27C5.89543 27 5 27.8954 5 29V37C5 38.1046 5.89543 39 7 39H27C28.1046 39 29 38.1046 29 37V29C29 27.8954 28.1046 27 27 27H7ZM13 32C12.4477 32 12 32.4477 12 33C12 33.5523 12.4477 34 13 34H21C21.5523 34 22 33.5523 22 33C22 32.4477 21.5523 32 21 32H13Z\" />\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t`;\n\t\t\t\tcase 'center':\n\t\t\t\t\treturn `\n\t\t\t\t\t\t\t<svg width=\"100\" height=\"66\" viewBox=\"0 0 100 66\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t\t\t\t\t\t<path class=\"crm-form-embed__settings--svg-arrow\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M26.4471 26.7986C26.006 27.2397 26.006 27.9549 26.4471 28.3961L30.1754 32.1244H21.1297C20.5058 32.1244 20 32.6302 20 33.2541C20 33.878 20.5058 34.3838 21.1297 34.3838H30.1754L26.4471 38.1121C26.006 38.5532 26.006 39.2685 26.4471 39.7096C26.8882 40.1507 27.6034 40.1507 28.0446 39.7096L33.1811 34.5731C33.9095 33.8447 33.9095 32.6637 33.1811 31.9352L28.0445 26.7987C27.6034 26.3576 26.8883 26.3576 26.4471 26.7986Z\"/>\n\t\t\t\t\t\t\t\t<path class=\"crm-form-embed__settings--svg-arrow\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M71.8799 39.6905C72.3031 39.257 72.3031 38.565 71.8799 38.1315L68.2216 34.3839L76.8822 34.3839C77.5061 34.3839 78.0119 33.8782 78.0119 33.2542C78.0119 32.6303 77.5061 32.1245 76.8822 32.1245L68.2216 32.1245L71.8799 28.377C72.3031 27.9435 72.3031 27.2515 71.8799 26.818C71.4421 26.3694 70.7208 26.3694 70.2829 26.818L65.2375 31.9864C64.5493 32.6915 64.5493 33.8169 65.2375 34.5219L70.283 39.6904C70.7208 40.1389 71.4421 40.1389 71.8799 39.6905Z\"/>\n\t\t\t\t\t\t\t\t<path class=\"crm-form-embed__settings--svg-block\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M39 27C37.8954 27 37 27.8954 37 29V37C37 38.1046 37.8954 39 39 39H59C60.1046 39 61 38.1046 61 37V29C61 27.8954 60.1046 27 59 27H39ZM45 32C44.4477 32 44 32.4477 44 33C44 33.5523 44.4477 34 45 34H53C53.5523 34 54 33.5523 54 33C54 32.4477 53.5523 32 53 32H45Z\"/>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t`;\n\t\t\t\tcase 'right':\n\t\t\t\t\treturn `\n\t\t\t\t\t\t\t<svg width=\"100\" height=\"66\" viewBox=\"0 0 100 66\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t\t\t\t\t\t<path class=\"crm-form-embed__settings--svg-arrow\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M59.4471 26.7986C59.006 27.2397 59.006 27.9549 59.4471 28.3961L63.1754 32.1244H48.1297C47.5058 32.1244 47 32.6302 47 33.2541C47 33.878 47.5058 34.3838 48.1297 34.3838H63.1754L59.4471 38.1121C59.006 38.5532 59.006 39.2685 59.4471 39.7096C59.8882 40.1507 60.6034 40.1507 61.0446 39.7096L66.1811 34.5731C66.9095 33.8447 66.9095 32.6637 66.1811 31.9352L61.0445 26.7987C60.6034 26.3576 59.8883 26.3576 59.4471 26.7986Z\"/>\n\t\t\t\t\t\t\t\t<path class=\"crm-form-embed__settings--svg-block\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M73 27C71.8954 27 71 27.8954 71 29V37C71 38.1046 71.8954 39 73 39H93C94.1046 39 95 38.1046 95 37V29C95 27.8954 94.1046 27 93 27H73ZM79 32C78.4477 32 78 32.4477 78 33C78 33.5523 78.4477 34 79 34H87C87.5523 34 88 33.5523 88 33C88 32.4477 87.5523 32 87 32H79Z\"/>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t`;\n\t\t\t}\n\t\t\tbreak;\n\t\tcase 'link.align':\n\t\t\tswitch (value)\n\t\t\t{\n\t\t\t\tcase 'inline':\n\t\t\t\t\treturn `\n\t\t\t\t\t<svg width=\"100\" height=\"66\" viewBox=\"0 0 100 66\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t\t\t\t<path class=\"crm-form-embed__settings--svg-block\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M27 27C27 25.8954 27.8954 25 29 25H45C46.1046 25 47 25.8954 47 27V39C47 40.1046 46.1046 41 45 41H29C27.8954 41 27 40.1046 27 39V27ZM35.3454 35L34.8202 33.3406H32.1798L31.6546 35H30L32.5563 28H34.4338L37 35H35.3454ZM34.4536 32.1008C33.9682 30.5972 33.694 29.7468 33.6313 29.5497C33.5718 29.3526 33.5289 29.1969 33.5025 29.0824C33.3935 29.4893 33.0814 30.4955 32.5662 32.1008H34.4536ZM30.75 37C30.3358 37 30 37.3358 30 37.75C30 38.1642 30.3358 38.5 30.75 38.5H43.25C43.6642 38.5 44 38.1642 44 37.75C44 37.3358 43.6642 37 43.25 37H30.75Z\"/>\n\t\t\t\t\t\t<path class=\"crm-form-embed__settings--svg-block\" d=\"M56.5684 36.9998H55.168V29.6345H52.6484V28.4333H59.0879V29.6345H56.5684V36.9998ZM63.0898 37.1169C62.082 37.1169 61.293 36.824 60.7227 36.238C60.1562 35.6482 59.873 34.8376 59.873 33.8064C59.873 32.7478 60.1367 31.9158 60.6641 31.3103C61.1914 30.7048 61.916 30.4021 62.8379 30.4021C63.6934 30.4021 64.3691 30.6619 64.8652 31.1814C65.3613 31.7009 65.6094 32.4158 65.6094 33.3259V34.0701H61.291C61.3105 34.699 61.4805 35.1833 61.8008 35.5232C62.1211 35.8591 62.5723 36.0271 63.1543 36.0271C63.5371 36.0271 63.8926 35.9919 64.2207 35.9216C64.5527 35.8474 64.9082 35.7263 65.2871 35.5583V36.6775C64.9512 36.8376 64.6113 36.9509 64.2676 37.0173C63.9238 37.0837 63.5312 37.1169 63.0898 37.1169ZM62.8379 31.4451C62.4004 31.4451 62.0488 31.5837 61.7832 31.8611C61.5215 32.1384 61.3652 32.5427 61.3145 33.074H64.2559C64.248 32.5388 64.1191 32.1345 63.8691 31.8611C63.6191 31.5837 63.2754 31.4451 62.8379 31.4451ZM68.6152 33.6892L66.4414 30.5193H68.0117L69.4883 32.7869L70.9766 30.5193H72.5352L70.3555 33.6892L72.6465 36.9998H71.0879L69.4883 34.574L67.8945 36.9998H66.3359L68.6152 33.6892ZM76.1973 36.0037C76.5332 36.0037 76.8691 35.9509 77.2051 35.8455V36.8826C77.0527 36.949 76.8555 37.0037 76.6133 37.0466C76.375 37.0935 76.127 37.1169 75.8691 37.1169C74.5645 37.1169 73.9121 36.4294 73.9121 35.0544V31.5623H73.0273V30.9529L73.9766 30.449L74.4453 29.0779H75.2949V30.5193H77.1406V31.5623H75.2949V35.031C75.2949 35.363 75.377 35.6091 75.541 35.7693C75.709 35.9255 75.9277 36.0037 76.1973 36.0037Z\"/>\n\t\t\t\t\t</svg>\n\t\t\t\t\t`;\n\t\t\t\tcase 'left':\n\t\t\t\t\treturn `\n\t\t\t\t\t\t\t<svg width=\"100\" height=\"66\" viewBox=\"0 0 100 66\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t\t\t\t\t\t<path class=\"crm-form-embed__settings--svg-arrow\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M42.1598 39.1883C42.5214 38.7913 42.5214 38.1842 42.1598 37.7872L38.8098 34.1091L51.9669 34.1091C52.5704 34.1091 53.0596 33.6199 53.0596 33.0164V33.0164C53.0596 32.413 52.5704 31.9238 51.9669 31.9238L38.8098 31.9238L42.1598 28.2457C42.5214 27.8486 42.5214 27.2416 42.1598 26.8445V26.8445C41.7471 26.3914 41.0341 26.3914 40.6214 26.8445L35.9948 31.9242C35.431 32.5432 35.431 33.4895 35.9948 34.1085L40.6215 39.1883C41.0342 39.6414 41.7471 39.6414 42.1598 39.1883V39.1883Z\"/>\n\t\t\t\t\t\t\t\t<path class=\"crm-form-embed__settings--svg-block\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M8 27C8 25.8954 8.89543 25 10 25H26C27.1046 25 28 25.8954 28 27V39C28 40.1046 27.1046 41 26 41H10C8.89543 41 8 40.1046 8 39V27ZM16.3454 35L15.8202 33.3406H13.1798L12.6546 35H11L13.5563 28H15.4338L18 35H16.3454ZM15.4536 32.1008C14.9682 30.5972 14.694 29.7468 14.6313 29.5497C14.5718 29.3526 14.5289 29.1969 14.5025 29.0824C14.3935 29.4893 14.0814 30.4955 13.5662 32.1008H15.4536ZM11.75 37C11.3358 37 11 37.3358 11 37.75C11 38.1642 11.3358 38.5 11.75 38.5H24.25C24.6642 38.5 25 38.1642 25 37.75C25 37.3358 24.6642 37 24.25 37H11.75Z\"/>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t`;\n\t\t\t\tcase 'center':\n\t\t\t\t\treturn `\n\t\t\t\t\t\t\t<svg width=\"100\" height=\"66\" viewBox=\"0 0 100 66\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t\t\t\t\t\t<path class=\"crm-form-embed__settings--svg-arrow\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M26.4471 26.7986C26.006 27.2397 26.006 27.9549 26.4471 28.3961L30.1754 32.1244H21.1297C20.5058 32.1244 20 32.6302 20 33.2541V33.2541C20 33.878 20.5058 34.3838 21.1297 34.3838H30.1754L26.4471 38.1121C26.006 38.5532 26.006 39.2685 26.4471 39.7096V39.7096C26.8882 40.1507 27.6034 40.1507 28.0446 39.7096L33.1811 34.5731C33.9095 33.8447 33.9095 32.6636 33.1811 31.9352L28.0445 26.7987C27.6034 26.3576 26.8883 26.3576 26.4471 26.7986V26.7986Z\"/>\n\t\t\t\t\t\t\t\t<path class=\"crm-form-embed__settings--svg-arrow\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M71.88 39.6904C72.3032 39.257 72.3032 38.565 71.88 38.1315L68.2217 34.3839L76.8823 34.3839C77.5062 34.3839 78.012 33.8781 78.012 33.2542V33.2542C78.012 32.6303 77.5062 32.1245 76.8823 32.1245L68.2217 32.1245L71.88 28.377C72.3032 27.9434 72.3032 27.2515 71.88 26.818V26.818C71.4421 26.3694 70.7208 26.3694 70.283 26.818L65.2376 31.9864C64.5493 32.6915 64.5493 33.8169 65.2376 34.5219L70.2831 39.6904C70.7209 40.1389 71.4421 40.1389 71.88 39.6904V39.6904Z\"/>\n\t\t\t\t\t\t\t\t<path class=\"crm-form-embed__settings--svg-block\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M40 27C40 25.8954 40.8954 25 42 25H58C59.1046 25 60 25.8954 60 27V39C60 40.1046 59.1046 41 58 41H42C40.8954 41 40 40.1046 40 39V27ZM48.3454 35L47.8202 33.3406H45.1798L44.6546 35H43L45.5563 28H47.4338L50 35H48.3454ZM47.4536 32.1008C46.9682 30.5972 46.694 29.7468 46.6313 29.5497C46.5718 29.3526 46.5289 29.1969 46.5025 29.0824C46.3935 29.4893 46.0814 30.4955 45.5662 32.1008H47.4536ZM43.75 37C43.3358 37 43 37.3358 43 37.75C43 38.1642 43.3358 38.5 43.75 38.5H56.25C56.6642 38.5 57 38.1642 57 37.75C57 37.3358 56.6642 37 56.25 37H43.75Z\"/>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t`;\n\t\t\t\tcase 'right':\n\t\t\t\t\treturn `\n\t\t\t\t\t\t\t<svg width=\"100\" height=\"66\" viewBox=\"0 0 100 66\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t\t\t\t\t\t<path class=\"crm-form-embed__settings--svg-arrow\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M59.4471 26.7986C59.006 27.2397 59.006 27.9549 59.4471 28.3961L63.1754 32.1244H48.1297C47.5058 32.1244 47 32.6302 47 33.2541V33.2541C47 33.878 47.5058 34.3838 48.1297 34.3838H63.1754L59.4471 38.1121C59.006 38.5532 59.006 39.2685 59.4471 39.7096V39.7096C59.8882 40.1507 60.6034 40.1507 61.0446 39.7096L66.1811 34.5731C66.9095 33.8447 66.9095 32.6636 66.1811 31.9352L61.0445 26.7987C60.6034 26.3576 59.8883 26.3576 59.4471 26.7986V26.7986Z\"/>\n\t\t\t\t\t\t\t\t<path class=\"crm-form-embed__settings--svg-block\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M74 27C74 25.8954 74.8954 25 76 25H92C93.1046 25 94 25.8954 94 27V39C94 40.1046 93.1046 41 92 41H76C74.8954 41 74 40.1046 74 39V27ZM82.3454 35L81.8202 33.3406H79.1798L78.6546 35H77L79.5563 28H81.4338L84 35H82.3454ZM81.4536 32.1008C80.9682 30.5972 80.694 29.7468 80.6313 29.5497C80.5718 29.3526 80.5289 29.1969 80.5025 29.0824C80.3935 29.4893 80.0814 30.4955 79.5662 32.1008H81.4536ZM77.75 37C77.3358 37 77 37.3358 77 37.75C77 38.1642 77.3358 38.5 77.75 38.5H90.25C90.6642 38.5 91 38.1642 91 37.75C91 37.3358 90.6642 37 90.25 37H77.75Z\"/>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t`;\n\t\t\t}\n\t\t\tbreak;\n\t\tcase 'vertical':\n\t\t\tswitch (value)\n\t\t\t{\n\t\t\t\tcase 'bottom':\n\t\t\t\t\treturn `\n\t\t\t\t\t\t\t<svg width=\"100\" height=\"66\" viewBox=\"0 0 100 66\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t\t\t\t\t\t<path class=\"crm-form-embed__settings--svg-block\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M66 60.0002C66 61.1048 65.1046 62.0002 64 62.0002L36 62.0002C34.8954 62.0002 34 61.1048 34 60.0002L34 50.0002C34 48.3434 35.3431 47.0002 37 47.0002L63 47.0002C64.6569 47.0002 66 48.3434 66 50.0002L66 60.0002ZM63 58.0002C63 58.5525 62.5523 59.0002 62 59.0002L38 59.0002C37.4477 59.0002 37 58.5525 37 58.0002C37 57.448 37.4477 57.0002 38 57.0002L62 57.0002C62.5523 57.0002 63 57.448 63 58.0002ZM58 55.0002C58.5523 55.0002 59 54.5525 59 54.0002C59 53.448 58.5523 53.0002 58 53.0002L42 53.0002C41.4477 53.0002 41 53.448 41 54.0002C41 54.5525 41.4477 55.0002 42 55.0002L58 55.0002Z\"/>\n\t\t\t\t\t\t\t\t<path class=\"crm-form-embed__settings--svg-arrow\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M43.7986 29.0531C44.2397 29.4942 44.9549 29.4943 45.3961 29.0531L49.1244 25.3248L49.1244 40.3705C49.1244 40.9945 49.6302 41.5002 50.2541 41.5002C50.878 41.5002 51.3838 40.9945 51.3838 40.3705L51.3838 25.3248L55.1121 29.0531C55.5532 29.4943 56.2685 29.4943 56.7096 29.0531C57.1507 28.612 57.1507 27.8968 56.7096 27.4557L51.5731 22.3192C50.8447 21.5907 49.6636 21.5908 48.9352 22.3192L43.7987 27.4557C43.3576 27.8968 43.3576 28.612 43.7986 29.0531Z\"/>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t`;\n\t\t\t\tcase 'top':\n\t\t\t\t\treturn `\n\t\t\t\t\t\t\t<svg width=\"100\" height=\"66\" viewBox=\"0 0 100 66\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t\t\t\t\t\t<path class=\"crm-form-embed__settings--svg-block\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M34 6.00024C34 4.89567 34.8954 4.00024 36 4.00024L64 4.00024C65.1046 4.00024 66 4.89567 66 6.00024L66 16.0002C66 17.6571 64.6569 19.0002 63 19.0002L37 19.0002C35.3431 19.0002 34 17.6571 34 16.0002L34 6.00024ZM63 8.00024C63 8.55253 62.5523 9.00024 62 9.00024L38 9.00024C37.4477 9.00024 37 8.55253 37 8.00024C37 7.44796 37.4477 7.00024 38 7.00024L62 7.00025C62.5523 7.00025 63 7.44796 63 8.00024ZM58 13.0002C58.5523 13.0002 59 12.5525 59 12.0002C59 11.448 58.5523 11.0002 58 11.0002L42 11.0002C41.4477 11.0002 41 11.448 41 12.0002C41 12.5525 41.4477 13.0002 42 13.0002L58 13.0002Z\"/>\n\t\t\t\t\t\t\t\t<path class=\"crm-form-embed__settings--svg-arrow\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M56.7097 37.4474C56.2686 37.0062 55.5534 37.0062 55.1122 37.4474L51.3839 41.1757L51.3839 26.1299C51.3839 25.506 50.8781 25.0002 50.2542 25.0002C49.6303 25.0002 49.1245 25.506 49.1245 26.1299L49.1245 41.1757L45.3962 37.4474C44.9551 37.0062 44.2398 37.0062 43.7987 37.4474C43.3576 37.8885 43.3576 38.6037 43.7987 39.0448L48.9352 44.1813C49.6636 44.9097 50.8446 44.9097 51.5731 44.1813L56.7096 39.0448C57.1507 38.6037 57.1507 37.8885 56.7097 37.4474Z\"/>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t`;\n\t\t\t}\n\t\t\tbreak;\n\t}\n}","import {Type} from 'main.core';\nimport \"ui.feedback.form\";\n\nexport function isHexDark(hex): boolean\n{\n\treturn Color.isHexDark(hex);\n}\n\nexport function hexToRgba(hex): boolean\n{\n\treturn Color.hexToRgba(hex);\n}\n\nexport function getHexFromOpacity(opacity: number): string\n{\n\tif (Type.isString(opacity) && opacity.includes('%'))\n\t{\n\t\topacity = Number.parseInt(opacity) / 100;\n\t}\n\n\tconst hex = Math.round(opacity * 255).toString(16);\n\treturn hex.length === 1 ? '0'+hex : hex;\n}\n\nexport function getOpacityFromHex(hexA: string): number\n{\n\treturn Math.round((Number.parseInt(hexA, 16) / 255) * 100) / 100;\n}\n\nexport function openFeedbackForm()\n{\n\tBX.UI.Feedback.Form.open(\n\t\t{\n\t\t\tid: 'crm.webform.embed.feedback',\n\t\t\tforms: [\n\t\t\t\t{zones: ['en', 'eu', 'in', 'uk'], id: 372, lang: 'en', sec: 'qxzl3o'},\n\t\t\t\t{zones: ['by'], id: 362, lang: 'by', sec: 'gha9ge'},\n\t\t\t\t{zones: ['kz'], id: 362, lang: 'kz', sec: 'gha9ge'},\n\t\t\t\t{zones: ['ru'], id: 362, lang: 'ru', sec: 'gha9ge'},\n\t\t\t\t{zones: ['com.br'], id: 364, lang: 'br', sec: 'g649rj'},\n\t\t\t\t{zones: ['la', 'co', 'mx'], id: 366, lang: 'es', sec: 's80g9o'},\n\t\t\t\t{zones: ['de'], id: 368, lang: 'de', sec: 'bcmkrl'},\n\t\t\t\t{zones: ['ua'], id: 370, lang: 'ua', sec: 'ue05ne'},\n\t\t\t\t// {zones: ['pl'], id: 994, lang: 'pl', sec: 'qtxmku'},\n\t\t\t],\n\t\t}\n\t);\n}\n\n// copy from crm.site.form\nconst Color = {\n\tparseHex (hex)\n\t{\n\t\thex = this.fillHex(hex);\n\t\tlet parts = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})?$/i.exec(hex);\n\t\tif (!parts)\n\t\t{\n\t\t\tparts = [0,0,0,1];\n\t\t}\n\t\telse\n\t\t{\n\t\t\tparts = [\n\t\t\t\tparseInt(parts[1], 16),\n\t\t\t\tparseInt(parts[2], 16),\n\t\t\t\tparseInt(parts[3], 16),\n\t\t\t\tparseInt(100 * (parseInt(parts[4] || 'ff', 16) / 255)) / 100,\n\t\t\t];\n\t\t}\n\n\t\treturn parts;\n\t},\n\thexToRgba (hex)\n\t{\n\t\treturn 'rgba(' + this.parseHex(hex).join(', ') + ')';\n\t},\n\ttoRgba (numbers)\n\t{\n\t\treturn 'rgba(' + numbers.join(', ') + ')';\n\t},\n\tfillHex (hex: string, fillAlpha: boolean = false, alpha: string = null)\n\t{\n\t\tif (hex.length === 4 || (fillAlpha && hex.length === 5))\n\t\t{\n\t\t\thex = hex.replace(/([a-f0-9])/gi, \"$1$1\");\n\t\t}\n\n\t\tif (fillAlpha && hex.length === 7)\n\t\t{\n\t\t\thex += 'ff';\n\t\t}\n\n\t\tif (alpha)\n\t\t{\n\t\t\thex = hex.substr(0, 7) + (alpha.toLowerCase() + 'ff').substr(0, 2);\n\t\t}\n\n\t\treturn hex;\n\t},\n\tisHexDark (hex)\n\t{\n\t\thex = this.parseHex(hex);\n\t\tconst r = hex[0]; const g = hex[1]; const b = hex[2];\n\t\tconst brightness = ((r * 299) + (g * 587) + (b * 114)) / 1000;\n\t\treturn brightness < 155;\n\t},\n};\n\n","import {Text, Tag, Dom, Type, Event} from 'main.core';\nimport {ColorField} from \"landing.ui.field.color\";\nimport {getSvg} from \"./svg\";\nimport 'ui.switcher';\nimport {getHexFromOpacity, getOpacityFromHex, hexToRgba} from \"../util\";\nimport 'main.loader';\n\ntype ControlOptions = {\n\tcallback: Function;\n\tnode: Element;\n\toptions: Object | DropdownOptions,\n\tkey: String,\n\tkeyName: String,\n\tvalue: String,\n\tformId: number,\n};\n\ntype DropdownOptions = {\n\t[key: string]: string,\n}\n\nconst loader = new BX.Loader({mode: 'inline'});\n\nexport class Controls\n{\n\tstatic renderDropdown(options: ControlOptions)\n\t{\n\t\tconst handler = (event) => {\n\t\t\tDom.attr(event.currentTarget, 'disabled', true);\n\t\t\tloader.setOptions({size: 40});\n\t\t\tloader.show(options.node.querySelector('.ui-ctl-after.ui-ctl-icon-angle'));\n\t\t\toptions.callback(event.currentTarget.value);\n\t\t}\n\n\t\tDom.append(this.renderLabel(options.keyName), options.node);\n\n\t\tconst select = Tag.render`<select class=\"ui-ctl-element embed-control-node\" onchange=\"${Text.encode(handler)}\"></select>`;\n\n\t\tObject.entries(options.options).forEach(([option, name]) => {\n\t\t\tDom.append(\n\t\t\t\tTag.render`\n\t\t\t\t\t<option\n\t\t\t\t\t\tvalue=\"${Text.encode(option)}\"\n\t\t\t\t\t\t${(!Type.isUndefined(options.value) && (options.value.toString() === option.toString())) ? 'selected' : ''}\n\t\t\t\t\t>\n\t\t\t\t\t\t${Text.encode(name)}\n\t\t\t\t\t</option>\n\t\t\t\t`,\n\t\t\t\tselect\n\t\t\t);\n\t\t});\n\n\t\tDom.append(Tag.render`\n\t\t\t<div class=\"ui-ctl ui-ctl-after-icon ui-ctl-dropdown\">\n\t\t\t\t<div class=\"ui-ctl-after ui-ctl-icon-angle\"></div>\n\t\t\t\t${select}\n\t\t\t</div>\n\t\t`, options.node);\n\t}\n\n\tstatic renderText(options: ControlOptions, advanced: boolean)\n\t{\n\t\tconst handler = (event) => {\n\t\t\tDom.attr(event.currentTarget, 'disabled', true);\n\t\t\tloader.setOptions({size: 40});\n\t\t\tloader.show(options.node.querySelector('.ui-ctl-after'));\n\t\t\toptions.callback(event.currentTarget.value);\n\t\t}\n\n\t\tconst handlerShowSaveBtn = (event) => {\n\t\t\tDom.show(options.node.querySelector('.ui-ctl-after'));\n\t\t}\n\n\t\tconst afterIcon = advanced ? '' : '<button class=\"ui-ctl-after\" hidden><svg width=\"20\" height=\"15\" viewBox=\"0 0 20 15\" xmlns=\"http://www.w3.org/2000/svg\"><path fill=\"#535C69\" d=\"M7.34223 14.351L0.865356 8.03879L3.13226 5.82951L7.34223 9.93246L16.8678 0.648987L19.1348 2.85827L7.34223 14.351Z\"/></svg></button>';\n\n\t\tDom.append(this.renderLabel(options.keyName), options.node);\n\n\t\tconst input = Tag.render`\n\t\t\t<input\n\t\t\t\ttype=\"text\"\n\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\tvalue=\"${!Type.isUndefined(options.value) ? Text.encode(options.value) : ''}\"\n\t\t\t\tdata-onfocus=\"${Text.encode(handlerShowSaveBtn)}\"\n\t\t\t\tdata-onblur=\"${Text.encode(handler)}\"\n\t\t\t>\n\t\t`;\n\n\t\tEvent.bindOnce(input, 'blur', handler);\n\t\tif (!advanced)\n\t\t{\n\t\t\tEvent.bindOnce(input, 'focus', handlerShowSaveBtn);\n\t\t}\n\n\t\tDom.append(Tag.render`\n\t\t\t<div class=\"ui-ctl ui-ctl-textbox ui-ctl-after-icon\">\n\t\t\t\t${afterIcon}\n\t\t\t\t${input}\n\t\t\t</div>\n\t\t`, options.node);\n\t}\n\n\tstatic renderTypeface(forValue, extended: boolean, options: ControlOptions)\n\t{\n\t\tconst handler = (event) => {\n\t\t\tif (event.currentTarget.getAttribute('disabled') === 'true') { return; }\n\n\t\t\tconst nodeList = event.currentTarget.closest('.crm-form-embed__settings').querySelectorAll('.crm-form-embed__settings--hide-button');\n\t\t\tnodeList.forEach((node) => {\n\t\t\t\t// node.disabled = true;\n\t\t\t\tDom.attr(node, 'disabled', true);\n\t\t\t});\n\n\t\t\tif (!extended)\n\t\t\t{\n\t\t\t\tanimateSwitching(\n\t\t\t\t\tevent.currentTarget.closest('.crm-form-embed__settings--option.--typeface'),\n\t\t\t\t\t0,\n\t\t\t\t\t0,\n\t\t\t\t\ttrue\n\t\t\t\t);\n\t\t\t}\n\n\t\t\toptions.callback(forValue);\n\t\t}\n\n\t\tconst className = extended ? 'crm-form-embed__settings-main--option --option-big' : 'crm-form-embed__settings--option --typeface';\n\n\t\tDom.append(Tag.render`\n\t\t\t<div class=\"crm-form-embed__settings--hide-button ${className} ${forValue === options.value ? '--active' : ''}\" onclick=\"${Text.encode(handler)}\">\n\t\t\t\t<span class=\"crm-form-embed__settings--option-font --${Text.encode(forValue)}\">${Text.encode(options.keyName)}</span>\n\t\t\t</div>\n\t\t`, options.node);\n\t}\n\n\tstatic renderSquareButton(forValue, options: ControlOptions)\n\t{\n\t\tconst handler = (event) => {\n\t\t\tif (event.currentTarget.getAttribute('disabled') === 'true') { return; }\n\n\t\t\tconst nodeList = event.currentTarget.closest('.crm-form-embed__settings').querySelectorAll('.crm-form-embed__settings--option-layout');\n\t\t\tnodeList.forEach((node) => {\n\t\t\t\t// node.disabled = true;\n\t\t\t\tDom.attr(node, 'disabled', true);\n\t\t\t});\n\n\t\t\tanimateSwitching(\n\t\t\t\tevent.currentTarget.closest('.crm-form-embed__settings--option-layout').querySelector('.crm-form-embed__settings-main--option-svg'),\n\t\t\t\t100,\n\t\t\t\t66,\n\t\t\t\tfalse\n\t\t\t);\n\n\t\t\toptions.callback(forValue);\n\t\t}\n\n\t\tDom.append(Tag.render`\n\t\t\t<div class=\"crm-form-embed__settings--option-layout ${forValue === options.value ? '--active' : ''}\" onclick=\"${Text.encode(handler)}\">\n\t\t\t\t<div class=\"crm-form-embed__settings-main--option-svg\">\n\t\t\t\t\t${getSvg(options.key, forValue)}\n\t\t\t\t</div>\n\t\t\t\t<span class=\"crm-form-embed__settings--option-layout-text\">${Text.encode(options.keyName)}</span>\n\t\t\t</div>\n\t\t`, options.node);\n\t}\n\n\tstatic renderButton(forValue, type: string, advanced: boolean, options: ControlOptions)\n\t{\n\t\tconst handler = (event) => {\n\t\t\tif (event.currentTarget.getAttribute('disabled') === 'true') { return; }\n\n\t\t\tconst nodeList = event.currentTarget.closest('.crm-form-embed__settings').querySelectorAll('.crm-form-embed__settings--hide-button');\n\t\t\tnodeList.forEach((node) => {\n\t\t\t\t// node.disabled = true;\n\t\t\t\tDom.attr(node, 'disabled', true);\n\t\t\t});\n\n\t\t\tif (!advanced)\n\t\t\t{\n\t\t\t\tanimateSwitching(\n\t\t\t\t\tevent.currentTarget.closest('.crm-form-embed__settings--option'),\n\t\t\t\t\t0,\n\t\t\t\t\t0,\n\t\t\t\t\ttrue\n\t\t\t\t);\n\t\t\t}\n\n\t\t\toptions.callback(forValue);\n\t\t}\n\n\t\tconst className = advanced ? 'crm-form-embed__settings-main--option --option-big' : 'crm-form-embed__settings--option';\n\n\t\tDom.append(Tag.render`\n\t\t\t<div\n\t\t\t\tclass=\"crm-form-embed__settings--hide-button ${className} ${forValue === options.value ? '--active' : ''}\"\n\t\t\t\tonclick=\"${Text.encode(handler)}\"\n\t\t\t\tdata-embed-key=\"${Text.encode(options.key)}\"\n\t\t\t\tdata-embed-value=\"${Text.encode(forValue)}\"\n\t\t\t\ttitle=\"${Text.encode(BX.Loc.getMessage('EMBED_SLIDER_OPTION_BUTTONSTYLE_LABEL'))}\"\n\t\t\t>\n\t\t\t\t<button class=\"ui-btn ui-btn-md ${Text.encode(type)}\">${Text.encode(BX.Loc.getMessage('EMBED_SLIDER_OPTION_BUTTONSTYLE_LABEL'))}</button>\n\t\t\t</div>\n\t\t`, options.node);\n\t}\n\n\tstatic renderLink(forValue, type: string, advanced: boolean, options: ControlOptions)\n\t{\n\t\tconst handler = (event) => {\n\t\t\tif (event.currentTarget.getAttribute('disabled') === 'true') { return; }\n\n\t\t\tconst nodeList = event.currentTarget.closest('.crm-form-embed__settings').querySelectorAll('.crm-form-embed__settings--hide-link');\n\t\t\tnodeList.forEach((node) => {\n\t\t\t\t// node.disabled = true;\n\t\t\t\tDom.attr(node, 'disabled', true);\n\t\t\t});\n\n\t\t\tif (!advanced)\n\t\t\t{\n\t\t\t\tanimateSwitching(\n\t\t\t\t\tevent.currentTarget.closest('.crm-form-embed__settings--option'),\n\t\t\t\t\t0,\n\t\t\t\t\t0,\n\t\t\t\t\ttrue\n\t\t\t\t);\n\t\t\t}\n\n\t\t\toptions.callback(forValue);\n\t\t}\n\n\t\tconst className = advanced ? 'crm-form-embed__settings-main--option --option-big' : 'crm-form-embed__settings--option';\n\n\t\tDom.append(Tag.render`\n\t\t\t<div\n\t\t\t\tclass=\"crm-form-embed__settings--hide-link ${className} ${forValue === options.value ? '--active' : ''}\"\n\t\t\t\tonclick=\"${Text.encode(handler)}\"\n\t\t\t\tdata-embed-key=\"${Text.encode(options.key)}\"\n\t\t\t\tdata-embed-value=\"${Text.encode(forValue)}\"\n\t\t\t>\n\t\t\t\t<a href =\"#\" class=\"crm-form-embed__option-link ${Text.encode(type)}\">${Text.encode(BX.Loc.getMessage('EMBED_SLIDER_OPTION_LINKSTYLE_LABEL'))}</a>\n\t\t\t</div>\n\t\t`, options.node);\n\t}\n\n\tstatic renderSwitcher(options: ControlOptions)\n\t{\n\t\t/**\n\t\t * @this Switcher\n\t\t */\n\t\tconst handler = function(event) {\n\t\t\tthis.setLoading(true);\n\t\t\toptions.callback(this.isChecked() ? '1' : '0').then(() => {\n\t\t\t\tthis.setLoading(false);\n\t\t\t});\n\t\t}\n\n\t\tconst switcherNode = document.createElement('span');\n\t\tconst switcherId = options.formId + '-' + options.key;\n\t\tswitcherNode.className = 'ui-switcher';\n\t\tswitcherNode.dataset.switcherId = switcherId;\n\t\tconst switcher = new top.BX.UI.Switcher({\n\t\t\tid: switcherId,\n\t\t\tnode: switcherNode,\n\t\t\tchecked: options.value === '1',\n\t\t\thandlers: {\n\t\t\t\ttoggled: handler,\n\t\t\t}\n\t\t});\n\n\t\tDom.append(switcher.getNode(), options.node);\n\t}\n\n\tstatic renderColorPicker(subtype: string, options: ControlOptions): ColorField\n\t{\n\t\t/**\n\t\t * @this ColorField\n\t\t */\n\t\tconst handler = function(event) {\n\t\t\tif (this instanceof ColorField) // double events with different context\n\t\t\t{\n\t\t\t\t/** @var IColorValue|ColorValue value */\n\t\t\t\tconst value = this.getValue();\n\t\t\t\tconst hexA = value.getHex() + getHexFromOpacity(value.getOpacity());\n\t\t\t\toptions.callback(hexA);\n\t\t\t}\n\t\t}\n\n\t\tconst colorPicker = createColorPicker(subtype, handler, handler);\n\t\tcolorPicker.setValue({'--color': hexToRgba(options.value)});\n\t\t// colorPicker.processor.setValue(options.value.substring(0,6));\n\t\t// colorPicker.processor.setOpacity(getOpacityFromHex(options.value.substring(6)));\n\t\tDom.append(colorPicker.getLayout(), options.node);\n\t}\n\n\tstatic renderOptionTitle(text: string): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"crm-form-embed__settings--option-title\">${text ? Text.encode(text) : ''}</div>\n\t\t`;\n\t}\n\n\tstatic renderLabel(text: string, buttonSetting: boolean = false): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"crm-form-embed__label-text ${buttonSetting ? '--button-setting' : ''}\">${text ? Text.encode(text) : ''}</div>\n\t\t`;\n\t}\n}\n\nfunction createColorPicker(subtype: string, onChange: function, onReset: function): ColorField\n{\n\treturn new ColorField({\n\t\tsubtype: subtype,\n\t\tonChange: onChange,\n\t\tonReset: onReset,\n\t});\n}\n\nfunction animateSwitching(loaderTarget: HTMLElement, targetWidth: number, targetHeight: number, resetPadding: false)\n{\n\tloaderTarget.innerHTML = '';\n\tif (targetWidth)\n\t{\n\t\tDom.style(loaderTarget, 'width', targetWidth+'px');\n\t}\n\tif (targetHeight)\n\t{\n\t\tDom.style(loaderTarget, 'height', targetHeight+'px');\n\t}\n\tif (resetPadding)\n\t{\n\t\tDom.style(loaderTarget, 'padding', '0');\n\t}\n\tloader.setOptions({size: 40});\n\tloader.show(loaderTarget);\n}","import {Dom, Event} from 'main.core';\n\nexport function handlerToggleClickMode(container: Element, checked: boolean)\n{\n\tconst section = container.closest('.ui-slider-section');\n\tconst headerBlock = section.querySelector('[data-roll=\"heading-block\"]');\n\tconst moreSettingsBtn = section.querySelector('[data-roll=\"data-more-settings\"]');\n\tconst blockCode = section.querySelector('[data-roll=\"crm-form-embed__settings\"]');\n\n\tif (checked)\n\t{\n\t\tif (moreSettingsBtn)\n\t\t{\n\t\t\tDom.addClass(moreSettingsBtn, \"--visible\");\n\t\t}\n\t\tDom.removeClass(headerBlock, \"--collapse\");\n\t\tDom.style(blockCode, 'height', blockCode.scrollHeight + \"px\");\n\t}\n\telse\n\t{\n\t\tif (moreSettingsBtn)\n\t\t{\n\t\t\tDom.removeClass(moreSettingsBtn, \"--visible\");\n\t\t}\n\t\tDom.addClass(headerBlock, \"--collapse\");\n\t\tDom.style(blockCode, 'height', blockCode.scrollHeight + \"px\");\n\t\t// blockCode.clientHeight;\n\t\tDom.style(blockCode, 'height', \"0\");\n\t}\n\n\tEvent.unbind(blockCode, \"transitionend\", transitionHandlerForSettingsSection);\n\tEvent.bind(blockCode, \"transitionend\", transitionHandlerForSettingsSection);\n}\n\nfunction transitionHandlerForSettingsSection(event)\n{\n\tconst section = event.currentTarget.closest('.ui-slider-section');\n\tconst blockCode = section.querySelector('[data-roll=\"crm-form-embed__settings\"]');\n\tif (Dom.style(blockCode, 'height') !== \"0px\") {\n\t\tDom.style(blockCode, 'height', 'auto');\n\t}\n}","import {Type, Text, Tag, Dom, Event} from 'main.core';\nimport type {EmbedDataOptions, EmbedDataValues, EmbedDict} from \"../types\";\nimport {Controls} from \"./controls\";\nimport \"popup\";\nimport {isHexDark} from \"../util\";\nimport {handlerToggleClickMode} from \"./handler\";\nimport { EventEmitter, BaseEvent } from 'main.core.events'\n\ntype RenderOptions = {\n\toptions: Array,\n\tdict: EmbedDict,\n\tcallback: function,\n\tformId: number,\n\tdata: Object,\n\tvalues: Object,\n};\n\nexport class Wizard extends EventEmitter\n{\n\t#type: string;\n\t#options: Object;\n\t#values: Object;\n\t#dict: EmbedDict;\n\t#formId: number;\n\n\tconstructor(type: string, formId: number, values: EmbedDataValues, options: EmbedDataOptions, dict: EmbedDict)\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace(\"BX:Crm:Form:Embed\")\n\t\tthis.#type = type;\n\t\tthis.#options = options;\n\t\tthis.#values = values;\n\t\tthis.#dict = dict;\n\t\tthis.#formId = formId;\n\t}\n\n\tgetValues(): Object\n\t{\n\t\treturn this.#values;\n\t}\n\n\t#updateValues(data: Array, instantSave: boolean): Promise\n\t{\n\t\tconst promises = [];\n\t\tdata.forEach((field) => {\n\t\t\tpromises.push(this.#updateValue(field.name, field.value));\n\t\t});\n\n\t\treturn Promise.all(promises).then(() => {\n\t\t\tif (instantSave) {\n\t\t\t\tconst event = new BaseEvent({data: {type: this.#type}});\n\t\t\t\treturn this.emitAsync('BX:Crm:Form:Embed:needToSave', event);\n\t\t\t}\n\t\t\treturn Promise.resolve;\n\t\t});\n\t}\n\n\t#updateValue(name: string, value): Promise\n\t{\n\t\tconst aNames = name.split('.');\n\t\tconst updatedValues = this.#values;\n\t\tconst buildOption = function(values, names) {\n\t\t\tconst nextName = names.shift();\n\t\t\tif (names.length > 0)\n\t\t\t{\n\t\t\t\tvalues[nextName] = Type.isUndefined(values[nextName]) ? {} : values[nextName];\n\t\t\t\tbuildOption(values[nextName], names);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tvalues[nextName] = value;\n\t\t\t}\n\t\t};\n\t\tbuildOption(updatedValues, aNames);\n\n\t\tthis.#values = updatedValues;\n\n\t\tconst event = new BaseEvent({data: {type: this.#type, name: name, value: value}});\n\n\t\tthis.emit('BX:Crm:Form:Embed:valueChanged', event);\n\n\t\treturn Promise.resolve();\n\t}\n\n\trenderControlContainer(elem: Element | Array = null): HTMLElement\n\t{\n\t\tif (Type.isDomNode(elem))\n\t\t{\n\t\t\telem = [elem];\n\t\t}\n\t\tconst container = Tag.render`\n\t\t\t<div class=\"crm-form-embed__settings\"></div>\n\t\t`;\n\t\tif (Type.isArray(elem))\n\t\t{\n\t\t\telem.forEach((item) => Dom.append(item, container))\n\t\t}\n\t\treturn container;\n\t}\n\n\trenderRow(elem: Element | Array = null, last: boolean = false): HTMLElement\n\t{\n\t\tif (Type.isDomNode(elem))\n\t\t{\n\t\t\telem = [elem];\n\t\t}\n\t\tconst row = Tag.render`\n\t\t\t<div class=\"crm-form-embed__settings-row ${last ? '--last' : ''}\"></div>\n\t\t`;\n\t\tif (Type.isArray(elem))\n\t\t{\n\t\t\telem.forEach((item) => Dom.append(item, row))\n\t\t}\n\t\treturn row;\n\t}\n\n\trenderBlock(elem: Element | Array = null): HTMLElement\n\t{\n\t\tif (Type.isDomNode(elem))\n\t\t{\n\t\t\telem = [elem];\n\t\t}\n\t\tconst block = Tag.render`\n\t\t\t<div class=\"crm-form-embed__settings--block\"></div>\n\t\t`;\n\t\tif (Type.isArray(elem))\n\t\t{\n\t\t\telem.forEach((item) => Dom.append(item, block))\n\t\t}\n\t\treturn block;\n\t}\n\n\trenderCol(elem: Element | Array = null, first: boolean = false): HTMLElement\n\t{\n\t\tif (Type.isDomNode(elem))\n\t\t{\n\t\t\telem = [elem];\n\t\t}\n\t\tconst col = Tag.render`\n\t\t\t<div class=\"crm-form-embed__settings--block-col ${first ? '--first' : ''}\"></div>\n\t\t`;\n\t\tif (Type.isArray(elem))\n\t\t{\n\t\t\telem.forEach((item) => Dom.append(item, col))\n\t\t}\n\t\treturn col;\n\t}\n\n\trenderTitle(text: string, line: boolean = false): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"crm-form-embed__subtitle ${line ? '--line' : ''}\">${text ? text : ''}</div>\n\t\t`;\n\t}\n\n\trenderLabel(text: string, buttonSetting: boolean = false): HTMLElement\n\t{\n\t\treturn Renderer.renderLabel(text, buttonSetting);\n\t}\n\n\trenderOptionTo(container: HTMLElement, name: string, instantSave: boolean = true)\n\t{\n\t\tconst funcName = this.#getFuncName(name),\n\t\t\tfieldOptions = this.#getOptions(name),\n\t\t\tfieldValue = this.#getValue(name);\n\n\t\tif (Type.isFunction(Renderer[\"renderField\" + funcName]))\n\t\t{\n\t\t\tRenderer[\"renderField\" + funcName](\n\t\t\t\tcontainer,\n\t\t\t\tfieldValue,\n\t\t\t\t{\n\t\t\t\t\toptions: fieldOptions,\n\t\t\t\t\tdict: this.#dict,\n\t\t\t\t\tcallback: (data) => this.#updateValues(data, instantSave),\n\t\t\t\t\tformId: this.#formId,\n\t\t\t\t\tdata: this.#options,\n\t\t\t\t\tvalues: this.#values,\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tconsole.error('embed: ' + name + ' is not valid type');\n\t\t}\n\t}\n\n\trenderOption(name: string, instantSave: boolean = true): HTMLElement\n\t{\n\t\tconst container = this.renderControlContainer();\n\t\tthis.renderOptionTo(container, name, instantSave);\n\t\treturn container;\n\t}\n\n\trenderColorInline(container: HTMLElement, name: string, instantSave: boolean = true)\n\t{\n\t\tthis.renderOptionTo(container, name, instantSave);\n\t}\n\n\trenderColorPopup(container: HTMLElement, name: string, instantSave: boolean = true)\n\t{\n\t\tconst value = this.#getValue(name, '#FFFFFF');\n\t\tconst picker = this.renderOption(name, instantSave);\n\t\tconst popup = new BX.PopupWindow({\n\t\t\tcontent: picker,\n\t\t\tbindElement: container,\n\t\t\tautoHide: true,\n\t\t\tcloseByEsc: true,\n\t\t});\n\n\t\t// hack: hide color picker elements, embed.css\n\t\tDom.addClass(picker, 'crm-form-embed__color_popup');\n\n\t\tconst getStyle = function(valueHex: string): string {\n\t\t\tconst fgColor = isHexDark(valueHex) ? 'white' : 'black';\n\t\t\treturn `background-color: ${Text.encode(valueHex)}; color: ${fgColor}`;\n\t\t}\n\n\t\tconst getThemeClass = function(valueHex: string): string {\n\t\t\treturn isHexDark(valueHex) ? 'bitrix24-light-theme' : 'bitrix24-dark-theme';\n\t\t}\n\n\t\tconst button = Tag.render`\n\t\t\t<button class=\"ui-btn ui-btn-xs ui-btn-link ui-btn-hover ui-btn-icon-edit ui-btn-themes\"></button>\n\t\t`;\n\t\tEvent.bind(button, \"click\", (event) => popup.show());\n\n\t\tconst text = Tag.render`\n\t\t\t<span class=\"crm-form-embed__settings--color-text\">${Text.encode(value)}</span>\n\t\t`;\n\n\t\tDom.append(Controls.renderLabel(Renderer.getOptionKeyName(name), true), container);\n\t\tconst colorBox = Tag.render`\n\t\t\t<div class=\"crm-form-embed__settings--color ${getThemeClass(value)}\" style=\"${getStyle(value)}\">\n\t\t\t\t${text}\n\t\t\t\t${button}\n\t\t\t</div>\n\t\t`;\n\t\tDom.append(colorBox, container);\n\n\t\tthis.subscribe('BX:Crm:Form:Embed:valueChanged', (event) => {\n\t\t\tif (event.data.name === name)\n\t\t\t{\n\t\t\t\ttext.innerText = Text.encode(event.data.value);\n\t\t\t\tcolorBox.style = getStyle(event.data.value);\n\t\t\t\tDom.removeClass(\n\t\t\t\t\tcolorBox,\n\t\t\t\t\tgetThemeClass(event.data.value) === 'bitrix24-dark-theme'\n\t\t\t\t\t\t? 'bitrix24-light-theme'\n\t\t\t\t\t\t: 'bitrix24-dark-theme'\n\t\t\t\t);\n\t\t\t\tDom.addClass(colorBox, getThemeClass(event.data.value));\n\t\t\t}\n\t\t});\n\t}\n\n\t#getValue(name: string, defaultValue = ''): string | number\n\t{\n\t\tconst aName = name.split('.');\n\t\tlet fieldValue = this.#values;\n\t\taName.forEach((part) => {\n\t\t\tfieldValue = !Type.isUndefined(fieldValue[part]) ? fieldValue[part] : defaultValue;\n\t\t});\n\t\treturn fieldValue;\n\t}\n\n\t#getOptions(name: string): Array\n\t{\n\t\tconst aName = name.split('.');\n\n\t\tlet fieldOptions = this.#options;\n\t\taName.forEach((part) => {\n\t\t\tfieldOptions = !Type.isUndefined(fieldOptions[part]) ? fieldOptions[part] : [];\n\t\t});\n\t\treturn fieldOptions;\n\t}\n\n\t#getFuncName(name: string): string\n\t{\n\t\tconst aName = name.split('.');\n\t\tlet funcName = '';\n\t\taName.forEach((part) => {\n\t\t\tfuncName = funcName.concat(part.charAt(0).toUpperCase() + part.slice(1));\n\t\t});\n\t\treturn funcName;\n\t}\n}\n\nconst Renderer = {\n\trenderFieldDelay: function(container: HTMLElement, value: string, options: RenderOptions)\n\t{\n\t\tcontainer.innerHTML = '';\n\n\t\tconst handler = (val) => {\n\t\t\toptions.callback([{name: 'delay', value: val}]).then(() => {\n\t\t\t\tRenderer.renderFieldDelay(container, val, options);\n\t\t\t});\n\t\t};\n\n\t\tconst block = Tag.render`<div class=\"crm-form-embed__settings--block-input\"></div>`;\n\n\t\tControls.renderDropdown({\n\t\t\tcallback: handler,\n\t\t\tnode: block,\n\t\t\toptions: this.getOptions(options.options, 'delay', options.dict),\n\t\t\tvalue: value,\n\t\t\tkey: 'delay',\n\t\t\tkeyName: Renderer.getOptionKeyName('delay'),\n\t\t\tformId: options.formId,\n\t\t});\n\n\t\tDom.append(block, container);\n\t},\n\n\trenderFieldType: function(container: HTMLElement, value: string, options: RenderOptions)\n\t{\n\t\tcontainer.innerHTML = '';\n\n\t\tconst handler = (val) => {\n\t\t\toptions.callback([{name: 'type', value: val}]).then(() => {\n\t\t\t\tRenderer.renderFieldType(container, val, options);\n\t\t\t});\n\t\t};\n\n\t\tconst block = Tag.render`<div class=\"crm-form-embed__settings--block-input\"></div>`;\n\n\t\tControls.renderDropdown({\n\t\t\tcallback: handler,\n\t\t\tnode: block,\n\t\t\toptions: this.getOptions(options.options, 'type', options.dict),\n\t\t\tvalue: value,\n\t\t\tkey: 'type',\n\t\t\tkeyName: Renderer.getOptionKeyName('type'),\n\t\t\tformId: options.formId,\n\t\t});\n\n\t\tDom.append(block, container);\n\t},\n\n\trenderFieldPosition: function(container: HTMLElement, value: string, options: RenderOptions)\n\t{\n\t\tcontainer.innerHTML = '';\n\n\t\tconst controlOptions = this.getOptions(options.options, 'position', options.dict);\n\n\t\tconst handler = (val) => {\n\t\t\toptions.callback([{name: 'position', value: val}]).then(() => {\n\t\t\t\tRenderer.renderFieldPosition(container, val, options);\n\t\t\t});\n\t\t};\n\n\t\tconst handlerLeft = () => handler('left');\n\t\tconst handlerCenter = () => handler('center');\n\t\tconst handlerRight = () => handler('right');\n\n\t\tDom.append(Controls.renderOptionTitle(Renderer.getOptionKeyName('position')), container);\n\n\t\tconst row = Tag.render`<div class=\"crm-form-embed__settings\"></div>`;\n\n\t\tControls.renderSquareButton('left', {\n\t\t\tcallback: handlerLeft,\n\t\t\tnode: row,\n\t\t\toptions: controlOptions,\n\t\t\tvalue: value,\n\t\t\tkey: 'position',\n\t\t\tkeyName: Renderer.getOptionValueName('position', 'left', options.dict),\n\t\t\tformId: options.formId,\n\t\t});\n\n\t\tControls.renderSquareButton('center', {\n\t\t\tcallback: handlerCenter,\n\t\t\tnode: row,\n\t\t\toptions: controlOptions,\n\t\t\tvalue: value,\n\t\t\tkey: 'position',\n\t\t\tkeyName: Renderer.getOptionValueName('position', 'center', options.dict),\n\t\t\tformId: options.formId,\n\t\t});\n\n\t\tControls.renderSquareButton('right', {\n\t\t\tcallback: handlerRight,\n\t\t\tnode: row,\n\t\t\toptions: controlOptions,\n\t\t\tvalue: value,\n\t\t\tkey: 'position',\n\t\t\tkeyName: Renderer.getOptionValueName('position', 'right', options.dict),\n\t\t\tformId: options.formId,\n\t\t});\n\n\t\tDom.append(row, container);\n\t},\n\n\trenderFieldVertical: function(container: HTMLElement, value: string, options: RenderOptions)\n\t{\n\t\tcontainer.innerHTML = '';\n\n\t\tconst controlOptions = this.getOptions(options.options, 'vertical', options.dict);\n\n\t\tconst handler = (val) => {\n\t\t\toptions.callback([{name: 'vertical', value: val}]).then(() => {\n\t\t\t\tRenderer.renderFieldVertical(container, val, options);\n\t\t\t});\n\t\t};\n\n\t\tconst handlerBottom = () => handler('bottom');\n\t\tconst handlerTop = () => handler('top');\n\n\t\tDom.append(Controls.renderOptionTitle(Renderer.getOptionKeyName('vertical')), container);\n\n\t\tconst row = Tag.render`<div class=\"crm-form-embed__settings\"></div>`;\n\n\t\tControls.renderSquareButton('bottom', {\n\t\t\tcallback: handlerBottom,\n\t\t\tnode: row,\n\t\t\toptions: controlOptions,\n\t\t\tvalue: value,\n\t\t\tkey: 'vertical',\n\t\t\tkeyName: Renderer.getOptionValueName('vertical', 'bottom', options.dict),\n\t\t\tformId: options.formId,\n\t\t});\n\n\t\tControls.renderSquareButton('top', {\n\t\t\tcallback: handlerTop,\n\t\t\tnode: row,\n\t\t\toptions: controlOptions,\n\t\t\tvalue: value,\n\t\t\tkey: 'vertical',\n\t\t\tkeyName: Renderer.getOptionValueName('vertical', 'top', options.dict),\n\t\t\tformId: options.formId,\n\t\t});\n\n\t\tDom.append(row, container);\n\t},\n\n\trenderFieldButtonStyle: function(container: HTMLElement, value: string, options: RenderOptions)\n\t{\n\t\tif (Type.isStringFilled(options?.values?.button?.rounded) && Type.isStringFilled(options?.values?.button?.outlined))\n\t\t{\n\t\t\tvalue = options.values.button.rounded + ':' + options.values.button.outlined;\n\t\t}\n\n\t\tcontainer.innerHTML = '';\n\n\t\tconst controlOptions = this.getOptions(options.options, 'buttonStyle', options.dict);\n\n\t\tconst handler = (val) => {\n\t\t\tconst values = val.split(':');\n\t\t\toptions.callback([\n\t\t\t\t{name: 'button.rounded', value: values[0]},\n\t\t\t\t{name: 'button.outlined', value: values[1]},\n\t\t\t]).then(() => {\n\t\t\t\tRenderer.renderFieldButtonStyle(container, val, options);\n\t\t\t});\n\t\t};\n\n\t\tconst handlerPm = () => handler('0:0');\n\t\tconst handlerPmr = () => handler('1:0');\n\t\tconst handlerLb = () => handler('0:1');\n\t\tconst handlerLbr = () => handler('1:1');\n\n\t\tconst advanced = container.dataset.controlMode === 'advanced';\n\n\t\tControls.renderButton('0:0', 'ui-btn-primary', advanced, {\n\t\t\tcallback: handlerPm,\n\t\t\tnode: container,\n\t\t\toptions: controlOptions,\n\t\t\tvalue: value,\n\t\t\tkey: 'buttonStyle',\n\t\t\tkeyName: Renderer.getOptionValueName('buttonStyle', '0:0', options.dict),\n\t\t\tformId: options.formId,\n\t\t});\n\n\t\tControls.renderButton('1:0', 'ui-btn-primary ui-btn-round', advanced, {\n\t\t\tcallback: handlerPmr,\n\t\t\tnode: container,\n\t\t\toptions: controlOptions,\n\t\t\tvalue: value,\n\t\t\tkey: 'buttonStyle',\n\t\t\tkeyName: Renderer.getOptionValueName('buttonStyle', '1:0', options.dict),\n\t\t\tformId: options.formId,\n\t\t});\n\n\t\tControls.renderButton('0:1', 'ui-btn-light-border', advanced, {\n\t\t\tcallback: handlerLb,\n\t\t\tnode: container,\n\t\t\toptions: controlOptions,\n\t\t\tvalue: value,\n\t\t\tkey: 'buttonStyle',\n\t\t\tkeyName: Renderer.getOptionValueName('buttonStyle', '0:1', options.dict),\n\t\t\tformId: options.formId,\n\t\t});\n\n\t\tControls.renderButton('1:1', 'ui-btn-light-border ui-btn-round', advanced, {\n\t\t\tcallback: handlerLbr,\n\t\t\tnode: container,\n\t\t\toptions: controlOptions,\n\t\t\tvalue: value,\n\t\t\tkey: 'buttonStyle',\n\t\t\tkeyName: Renderer.getOptionValueName('buttonStyle', '1:1', options.dict),\n\t\t\tformId: options.formId,\n\t\t});\n\t},\n\n\trenderFieldButtonDecoration: function(container: HTMLElement, value: string, options: RenderOptions)\n\t{\n\t\tcontainer.innerHTML = '';\n\n\t\tconst controlOptions = this.getOptions(options.options, 'button.decoration', options.dict);\n\n\t\tconst handler = (val) => {\n\t\t\toptions.callback([{name: 'button.decoration', value: val}]).then(() => {\n\t\t\t\tRenderer.renderFieldButtonDecoration(container, val, options);\n\t\t\t});\n\t\t};\n\n\t\tconst handlerNoBorder = () => handler('');\n\t\tconst handlerDotted = () => handler('dotted');\n\t\tconst handlerLine = () => handler('solid');\n\n\t\tconst advanced = container.dataset.controlMode === 'advanced';\n\n\t\tControls.renderLink('', '--border-no', advanced, {\n\t\t\tcallback: handlerNoBorder,\n\t\t\tnode: container,\n\t\t\toptions: controlOptions,\n\t\t\tvalue: value,\n\t\t\tkey: 'button.decoration',\n\t\t\tkeyName: Renderer.getOptionValueName('button.decoration', '', options.dict),\n\t\t\tformId: options.formId,\n\t\t});\n\n\t\tControls.renderLink('dotted', '--border-dotted', advanced, {\n\t\t\tcallback: handlerDotted,\n\t\t\tnode: container,\n\t\t\toptions: controlOptions,\n\t\t\tvalue: value,\n\t\t\tkey: 'button.decoration',\n\t\t\tkeyName: Renderer.getOptionValueName('button.decoration', 'dotted', options.dict),\n\t\t\tformId: options.formId,\n\t\t});\n\n\t\tControls.renderLink('solid', '--border-line', advanced, {\n\t\t\tcallback: handlerLine,\n\t\t\tnode: container,\n\t\t\toptions: controlOptions,\n\t\t\tvalue: value,\n\t\t\tkey: 'button.decoration',\n\t\t\tkeyName: Renderer.getOptionValueName('button.decoration', 'solid', options.dict),\n\t\t\tformId: options.formId,\n\t\t});\n\t},\n\n\trenderFieldButtonFont: function(container: HTMLElement, value: string, options: RenderOptions)\n\t{\n\t\tcontainer.innerHTML = '';\n\n\t\tconst controlOptions = this.getOptions(options.options, 'button.font', options.dict);\n\n\t\tconst handler = (val) => {\n\t\t\toptions.callback([{name: 'button.font', value: val}]).then(() => {\n\t\t\t\tRenderer.renderFieldButtonFont(container, val, options);\n\t\t\t});\n\t\t};\n\n\t\tconst handlerModern = () => handler('modern');\n\t\tconst handlerClassic = () => handler('classic');\n\t\tconst handlerElegant = () => handler('elegant');\n\n\t\tconst advanced = container.dataset.controlMode === 'advanced';\n\n\t\tControls.renderTypeface('modern', advanced, {\n\t\t\tcallback: handlerModern,\n\t\t\tnode: container,\n\t\t\toptions: controlOptions,\n\t\t\tvalue: value,\n\t\t\tkey: 'button.font',\n\t\t\tkeyName: Renderer.getOptionValueName('button.font', 'modern', options.dict),\n\t\t\tformId: options.formId,\n\t\t});\n\n\t\tControls.renderTypeface('classic', advanced, {\n\t\t\tcallback: handlerClassic,\n\t\t\tnode: container,\n\t\t\toptions: controlOptions,\n\t\t\tvalue: value,\n\t\t\tkey: 'button.font',\n\t\t\tkeyName: Renderer.getOptionValueName('button.font', 'classic', options.dict),\n\t\t\tformId: options.formId,\n\t\t});\n\n\t\tControls.renderTypeface('elegant', advanced, {\n\t\t\tcallback: handlerElegant,\n\t\t\tnode: container,\n\t\t\toptions: controlOptions,\n\t\t\tvalue: value,\n\t\t\tkey: 'button.font',\n\t\t\tkeyName: Renderer.getOptionValueName('button.font', 'elegant', options.dict),\n\t\t\tformId: options.formId,\n\t\t});\n\t},\n\n\trenderFieldButtonAlign: function(container: HTMLElement, value: string, options: RenderOptions)\n\t{\n\t\tcontainer.innerHTML = '';\n\n\t\tconst controlOptions = this.getOptions(options.options, 'button.align', options.dict);\n\n\t\tconst handler = (val) => {\n\t\t\toptions.callback([{name: 'button.align', value: val}]).then(() => {\n\t\t\t\tRenderer.renderFieldButtonAlign(container, val, options);\n\t\t\t});\n\t\t};\n\n\t\tconst handlerLeft = () => handler('left');\n\t\tconst handlerCenter = () => handler('center');\n\t\tconst handlerRight = () => handler('right');\n\n\t\t// container.appendChild(Controls.renderOptionTitle(Renderer.getOptionKeyName('button.align')));\n\n\t\tconst row = Tag.render`<div class=\"crm-form-embed__settings\"></div>`;\n\n\t\tControls.renderSquareButton('left', {\n\t\t\tcallback: handlerLeft,\n\t\t\tnode: row,\n\t\t\toptions: controlOptions,\n\t\t\tvalue: value,\n\t\t\tkey: 'button.align',\n\t\t\tkeyName: Renderer.getOptionValueName('button.align', 'left', options.dict),\n\t\t\tformId: options.formId,\n\t\t});\n\n\t\tControls.renderSquareButton('center', {\n\t\t\tcallback: handlerCenter,\n\t\t\tnode: row,\n\t\t\toptions: controlOptions,\n\t\t\tvalue: value,\n\t\t\tkey: 'button.align',\n\t\t\tkeyName: Renderer.getOptionValueName('button.align', 'center', options.dict),\n\t\t\tformId: options.formId,\n\t\t});\n\n\t\tControls.renderSquareButton('right', {\n\t\t\tcallback: handlerRight,\n\t\t\tnode: row,\n\t\t\toptions: controlOptions,\n\t\t\tvalue: value,\n\t\t\tkey: 'button.align',\n\t\t\tkeyName: Renderer.getOptionValueName('button.align', 'right', options.dict),\n\t\t\tformId: options.formId,\n\t\t});\n\n\t\tDom.append(row, container);\n\t},\n\n\trenderFieldLinkAlign: function(container: HTMLElement, value: string, options: RenderOptions)\n\t{\n\t\tcontainer.innerHTML = '';\n\n\t\tconst controlOptions = this.getOptions(options.options, 'link.align', options.dict);\n\n\t\tconst handler = (val) => {\n\t\t\toptions.callback([{name: 'link.align', value: val}]).then(() => {\n\t\t\t\tRenderer.renderFieldLinkAlign(container, val, options);\n\t\t\t});\n\t\t};\n\n\t\tconst handlerInline = () => handler('inline');\n\t\tconst handlerLeft = () => handler('left');\n\t\tconst handlerCenter = () => handler('center');\n\t\tconst handlerRight = () => handler('right');\n\n\t\t// container.appendChild(Controls.renderOptionTitle(Renderer.getOptionKeyName('button.align')));\n\n\t\tconst row = Tag.render`<div class=\"crm-form-embed__settings\"></div>`;\n\n\t\tControls.renderSquareButton('inline', {\n\t\t\tcallback: handlerInline,\n\t\t\tnode: row,\n\t\t\toptions: controlOptions,\n\t\t\tvalue: value,\n\t\t\tkey: 'link.align',\n\t\t\tkeyName: Renderer.getOptionValueName('link.align', 'inline', options.dict),\n\t\t\tformId: options.formId,\n\t\t});\n\n\t\tControls.renderSquareButton('left', {\n\t\t\tcallback: handlerLeft,\n\t\t\tnode: row,\n\t\t\toptions: controlOptions,\n\t\t\tvalue: value,\n\t\t\tkey: 'link.align',\n\t\t\tkeyName: Renderer.getOptionValueName('link.align', 'left', options.dict),\n\t\t\tformId: options.formId,\n\t\t});\n\n\t\tControls.renderSquareButton('center', {\n\t\t\tcallback: handlerCenter,\n\t\t\tnode: row,\n\t\t\toptions: controlOptions,\n\t\t\tvalue: value,\n\t\t\tkey: 'link.align',\n\t\t\tkeyName: Renderer.getOptionValueName('link.align', 'center', options.dict),\n\t\t\tformId: options.formId,\n\t\t});\n\n\t\tControls.renderSquareButton('right', {\n\t\t\tcallback: handlerRight,\n\t\t\tnode: row,\n\t\t\toptions: controlOptions,\n\t\t\tvalue: value,\n\t\t\tkey: 'link.align',\n\t\t\tkeyName: Renderer.getOptionValueName('link.align', 'right', options.dict),\n\t\t\tformId: options.formId,\n\t\t});\n\n\t\tDom.append(row, container);\n\t},\n\n\trenderFieldButtonPlain: function(container: HTMLElement, value: string, options: RenderOptions)\n\t{\n\t\tcontainer.innerHTML = '';\n\n\t\tconst handler = (val) => {\n\t\t\toptions.callback([{name: 'button.plain', value: val}]).then(() => {\n\t\t\t\tRenderer.renderFieldButtonPlain(container, val, options);\n\t\t\t});\n\t\t};\n\n\t\tconst block = Tag.render`<div class=\"crm-form-embed__settings--block-input\"></div>`;\n\n\t\tControls.renderDropdown({\n\t\t\tcallback: handler,\n\t\t\tnode: block,\n\t\t\toptions: this.getOptions(options.options, 'button.plain', options.dict),\n\t\t\tvalue: value,\n\t\t\tkey: 'button.plain',\n\t\t\tkeyName: Renderer.getOptionKeyName('button.plain'),\n\t\t\tformId: options.formId,\n\t\t});\n\n\t\tDom.append(block, container);\n\t},\n\n\trenderFieldButtonText: function(container: HTMLElement, value: string, options: RenderOptions)\n\t{\n\t\tcontainer.innerHTML = '';\n\n\t\tconst handler = (val) => {\n\t\t\tif (!Type.isStringFilled(val))\n\t\t\t{\n\t\t\t\tval = BX.Loc.getMessage('EMBED_SLIDER_BUTTONTEXT_PLACEHOLDER');\n\t\t\t}\n\t\t\toptions.callback([{name: 'button.text', value: val}]).then(() => {\n\t\t\t\tRenderer.renderFieldButtonText(container, val, options);\n\t\t\t});\n\t\t};\n\n\t\tconst block = Tag.render`<div class=\"crm-form-embed__settings--block-input\"></div>`;\n\n\t\tconst advanced = container.dataset.controlMode === 'advanced';\n\n\t\tControls.renderText({\n\t\t\tcallback: handler,\n\t\t\tnode: block,\n\t\t\toptions: null,\n\t\t\tvalue: value ? value : BX.Loc.getMessage('EMBED_SLIDER_BUTTONTEXT_PLACEHOLDER'),\n\t\t\tkey: 'button.text',\n\t\t\tkeyName: Renderer.getOptionKeyName('button.text'),\n\t\t\tformId: options.formId,\n\t\t}, advanced);\n\n\t\tDom.append(block, container);\n\t},\n\n\trenderFieldButtonColorBackground: function(container: HTMLElement, value: string, options: RenderOptions)\n\t{\n\t\tcontainer.innerHTML = '';\n\n\t\tconst advanced = container.dataset.controlMode === 'advanced';\n\n\t\tconst handler = (val) => {\n\t\t\tconst fields = [\n\t\t\t\t{name: 'button.color.background', value: val}\n\t\t\t];\n\t\t\tif (!advanced)\n\t\t\t{\n\t\t\t\tfields.push({name: 'button.color.backgroundHover', value: val});\n\t\t\t}\n\n\t\t\toptions.callback(fields).then(() => {\n\t\t\t\t// Renderer.renderFieldButtonColorBackground(container, val, options);\n\t\t\t});\n\t\t};\n\n\t\tControls.renderColorPicker('color', {\n\t\t\tcallback: handler,\n\t\t\tnode: container,\n\t\t\toptions: null,\n\t\t\tvalue: value,\n\t\t\tkey: 'button.color.background',\n\t\t\tkeyName: Renderer.getOptionKeyName('button.color.background'),\n\t\t\tformId: options.formId,\n\t\t});\n\t},\n\n\trenderFieldButtonColorBackgroundHover: function(container: HTMLElement, value: string, options: RenderOptions)\n\t{\n\t\tcontainer.innerHTML = '';\n\n\t\tconst advanced = container.dataset.controlMode === 'advanced';\n\n\t\tconst handler = (val) => {\n\t\t\toptions.callback([{name: 'button.color.backgroundHover', value: val}]).then(() => {\n\t\t\t\t// Renderer.renderFieldButtonColorBackgroundHover(container, val, options);\n\t\t\t});\n\t\t};\n\n\t\tControls.renderColorPicker('color', {\n\t\t\tcallback: handler,\n\t\t\tnode: container,\n\t\t\toptions: null,\n\t\t\tvalue: value,\n\t\t\tkey: 'button.color.backgroundHover',\n\t\t\tkeyName: Renderer.getOptionKeyName('button.color.backgroundHover'),\n\t\t\tformId: options.formId,\n\t\t});\n\t},\n\n\trenderFieldButtonColorText: function(container: HTMLElement, value: string, options: RenderOptions)\n\t{\n\t\tcontainer.innerHTML = '';\n\n\t\tconst advanced = container.dataset.controlMode === 'advanced';\n\n\t\tconst handler = (val) => {\n\t\t\tconst fields = [\n\t\t\t\t{name: 'button.color.text', value: val}\n\t\t\t];\n\t\t\tif (!advanced)\n\t\t\t{\n\t\t\t\tfields.push({name: 'button.color.textHover', value: val});\n\t\t\t}\n\n\t\t\toptions.callback(fields).then(() => {\n\t\t\t\t// Renderer.renderFieldButtonColorText(container, val, options);\n\t\t\t});\n\t\t};\n\n\t\tControls.renderColorPicker('color', {\n\t\t\tcallback: handler,\n\t\t\tnode: container,\n\t\t\toptions: null,\n\t\t\tvalue: value,\n\t\t\tkey: 'button.color.text',\n\t\t\tkeyName: Renderer.getOptionKeyName('button.color.text'),\n\t\t\tformId: options.formId,\n\t\t});\n\t},\n\n\trenderFieldButtonColorTextHover: function(container: HTMLElement, value: string, options: RenderOptions)\n\t{\n\t\tcontainer.innerHTML = '';\n\n\t\tconst advanced = container.dataset.controlMode === 'advanced';\n\n\t\tconst handler = (val) => {\n\t\t\toptions.callback([{name: 'button.color.textHover', value: val}]).then(() => {\n\t\t\t\t// Renderer.renderFieldButtonColorTextHover(container, val, options);\n\t\t\t});\n\t\t};\n\n\t\tControls.renderColorPicker('color', {\n\t\t\tcallback: handler,\n\t\t\tnode: container,\n\t\t\toptions: null,\n\t\t\tvalue: value,\n\t\t\tkey: 'button.color.textHover',\n\t\t\tkeyName: Renderer.getOptionKeyName('button.color.textHover'),\n\t\t\tformId: options.formId,\n\t\t});\n\t},\n\n\trenderFieldButtonUse: function(container: HTMLElement, value: string, options: RenderOptions)\n\t{\n\t\tcontainer.innerHTML = '';\n\n\t\tconst handler = (val) => {\n\t\t\treturn options.callback([{name: 'button.use', value: val}]).then(() => {\n\t\t\t\tRenderer.renderFieldButtonUse(container, val, options);\n\t\t\t\thandlerToggleClickMode(container, val === '1');\n\t\t\t});\n\t\t};\n\n\t\tControls.renderSwitcher({\n\t\t\tcallback: handler,\n\t\t\tnode: container,\n\t\t\toptions: null,\n\t\t\tvalue: value,\n\t\t\tkey: 'button.use',\n\t\t\tkeyName: Renderer.getOptionKeyName('button.use'),\n\t\t\tformId: options.formId,\n\t\t});\n\t},\n\n\trenderLabel: function(text: string, buttonSetting: boolean = false): HTMLElement\n\t{\n\t\treturn Controls.renderLabel(text, buttonSetting);\n\t},\n\n\tgetOptions: function(options, optionName: string, dict: EmbedDict): Object\n\t{\n\t\tconst result = {};\n\t\toptions.forEach((value) => {\n\t\t\tresult[value] = Renderer.getOptionValueName(optionName, value, dict);\n\t\t});\n\t\treturn result;\n\t},\n\n\tgetOptionKeyName: function(key: string): string\n\t{\n\t\tconst msgKey = 'EMBED_SLIDER_OPTION_' + key.toUpperCase();\n\t\treturn BX.Loc.hasMessage(msgKey) ? BX.Loc.getMessage(msgKey) : Text.encode(key);\n\t},\n\n\tgetOptionValueName: function(key: string, value: string, dict: EmbedDict): Object\n\t{\n\t\tconst keySplit = key.split('.');\n\t\tconst getDictValues = (parts: Array, dict: Object) => {\n\t\t\tconst nextKey = parts.shift();\n\t\t\tif (parts.length > 0)\n\t\t\t{\n\t\t\t\treturn getDictValues(parts, !Type.isUndefined(dict[nextKey]) ? dict[nextKey] : {});\n\t\t\t}\n\t\t\treturn !Type.isUndefined(dict[nextKey + 's']) ? dict[nextKey + 's'] : [];\n\t\t}\n\t\tconst dictValues = getDictValues(keySplit, dict['viewOptions']);\n\n\t\tlet result = value;\n\t\tif (Type.isArray(dictValues)) {\n\t\t\tdictValues.forEach(elem => {\n\t\t\t\tif (elem.id.toString() === value.toString()) {\n\t\t\t\t\tresult = elem.name;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\treturn Text.encode(result);\n\t},\n}","import {Tag, Dom, Type} from 'main.core';\nimport {Form} from './form';\nimport {DataProvider} from \"../../data_provider\";\nimport {Wizard} from \"../../wizard/wizard\";\nimport {openFeedbackForm} from '../../util';\nimport {Layout} from 'ui.sidepanel.layout';\nimport {HELP_CENTER_ID, HELP_CENTER_URL} from \"../../tab\";\n\nexport class Auto extends Form\n{\n\t#container: HTMLElement;\n\t#wizard: Wizard;\n\t#rendered: boolean = false;\n\n\tconstructor(formId: number, dataProvider: DataProvider)\n\t{\n\t\tsuper(formId, dataProvider);\n\t\tthis.#container = super.render();\n\t}\n\n\tload(force: boolean = false): Promise\n\t{\n\t\treturn super.load(force).then(() => {\n\t\t\tthis.#wizard = new Wizard(\n\t\t\t\t'auto',\n\t\t\t\tthis.formId,\n\t\t\t\tthis.dataProvider.getValues('auto'),\n\t\t\t\tthis.dataProvider.getOptions('auto'),\n\t\t\t\tthis.dataProvider.getDict()\n\t\t\t);\n\t\t\tthis.#wizard.subscribe('BX:Crm:Form:Embed:needToSave', (event) => {\n\t\t\t\treturn this.save();\n\t\t\t});\n\t\t\tthis.#wizard.subscribe('BX:Crm:Form:Embed:valueChanged', (event) => {\n\t\t\t\tthis.updateDependentFields(this.#container, event.data.name, event.data.value);\n\t\t\t});\n\t\t\tif (!this.#rendered)\n\t\t\t{\n\t\t\t\tthis.render()\n\t\t\t}\n\t\t}).catch((error) => {\n\t\t\tconsole.error(error);\n\t\t\tif (!this.#rendered)\n\t\t\t{\n\t\t\t\tthis.#renderError();\n\t\t\t}\n\t\t});\n\t}\n\n\tsave(): Promise\n\t{\n\t\tthis.data.embed.viewValues['auto'] = this.#wizard.getValues();\n\t\treturn super.save();\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tthis.#container.innerHTML = '';\n\n\t\tconst headerSection = this.renderHeaderSection(\n\t\t\t'clock',\n\t\t\tBX.Loc.getMessage('EMBED_SLIDER_AUTO_TITLE'),\n\t\t\tBX.Loc.getMessage('EMBED_SLIDER_AUTO_DESC'),\n\t\t\tHELP_CENTER_ID,\n\t\t\tHELP_CENTER_URL\n\t\t);\n\t\tDom.append(headerSection, this.#container);\n\n\t\tif (!super.loaded)\n\t\t{\n\t\t\tthis.loader.show(this.#container);\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// update with actual help-center link\n\t\t\tDom.replace(headerSection, this.renderHeaderSection(\n\t\t\t\t'clock',\n\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_AUTO_TITLE'),\n\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_AUTO_DESC'),\n\t\t\t\tthis.dataProvider.data.embed.helpCenterId,\n\t\t\t\tthis.dataProvider.data.embed.helpCenterUrl\n\t\t\t));\n\n\t\t\tDom.append(this.renderPreviewSection(\n\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_QR_TITLE'),\n\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_QR_DESC'),\n\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_OPEN_IN_NEW_TAB'),\n\t\t\t\tthis.dataProvider.data.embed.previewLink.replace('#preview#', 'auto')\n\t\t\t), this.#container);\n\n\t\t\tDom.append(this.renderBaseSettings(), this.#container);\n\n\t\t\tconst code = this.data.embed.scripts['auto'].text;\n\t\t\tDom.append(this.renderCodeBlock(code), this.#container);\n\t\t\tDom.append(this.renderCopySection(\n\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_COPY_CODE'),\n\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_COPY_CODE2'),\n\t\t\t\tcode,\n\t\t\t\tthis.renderBubble(BX.Loc.getMessage('EMBED_SLIDER_COPY_CODE_BUBBLE_AUTO'), true)\n\t\t\t), this.#container);\n\n\t\t\tthis.#rendered = true;\n\t\t}\n\n\t\treturn this.#container;\n\t}\n\n\t#renderError(): HTMLElement\n\t{\n\t\tthis.#container.innerHTML = '';\n\t\tDom.append(super.renderError(super.data), this.#container);\n\t\tthis.#rendered = true;\n\t}\n\n\trenderBaseSettings(): HTMLElement\n\t{\n\t\tconst section = this.renderSection(\n\t\t\tthis.renderSettingsHeader(BX.Loc.getMessage('EMBED_SLIDER_SETTINGS_HEADING'), false, () => {\n\t\t\t\tBX.SidePanel.Instance.open(\"crm.webform:embed:\" + this.formId + \":auto:expert\", {\n\t\t\t\t\twidth: 920,\n\t\t\t\t\tcacheable: false,\n\t\t\t\t\tcontentCallback: () => this.#createAdvancedSettingsLayout(),\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tonCloseComplete: (event) => {\n\t\t\t\t\t\t\tthis.load(true).then(() => {\n\t\t\t\t\t\t\t\tthis.render();\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t})\n\t\t);\n\n\t\tconst wrapper = Tag.render`<div class=\"crm-form-embed__basic\"></div>`;\n\n\t\tthis.#wizard.renderOptionTo(wrapper, 'delay', true);\n\t\tDom.addClass(wrapper.querySelector('.ui-ctl-dropdown'), 'crm-form-embed__select--time');\n\n\t\tDom.append(wrapper, section);\n\t\treturn section;\n\t}\n\n\t#createAdvancedSettingsLayout(): HTMLElement\n\t{\n\t\tconst layoutContent = this.#renderAdvancedSettingsLayoutContent()\n\n\t\tthis.#wizard.subscribe('BX:Crm:Form:Embed:valueChanged', (event) => {\n\t\t\tthis.updateDependentFields(layoutContent, event.data.name, event.data.value);\n\t\t});\n\n\t\treturn Layout.createContent({\n\t\t\textensions: ['crm.form.embed', 'ui.sidepanel-content', 'ui.forms', 'landing.ui.field.color', 'ui.switcher'],\n\t\t\ttitle: BX.Loc.getMessage('EMBED_SLIDER_EXPERT_MODE_TITLE'),\n\t\t\tdesign: {\n\t\t\t\tsection: false,\n\t\t\t},\n\t\t\ttoolbar ({Button}): Array\n\t\t\t{\n\t\t\t\treturn [\n\t\t\t\t\tnew Button({\n\t\t\t\t\t\t// icon: Button.Icon.SETTING,\n\t\t\t\t\t\tcolor: Button.Color.LIGHT_BORDER,\n\t\t\t\t\t\ttext: BX.Loc.getMessage('EMBED_SLIDER_TOOLBAR_BTN_FEEDBACK'),\n\t\t\t\t\t\tonclick: openFeedbackForm,\n\t\t\t\t\t}),\n\t\t\t\t];\n\t\t\t},\n\t\t\tcontent: () => layoutContent,\n\t\t\tbuttons: ({SaveButton, ApplyButton, cancelButton}) => {\n\t\t\t\treturn [\n\t\t\t\t\tnew SaveButton({\n\t\t\t\t\t\tonclick: btn => {\n\t\t\t\t\t\t\tbtn.setWaiting(true);\n\t\t\t\t\t\t\tthis.save().then(() => {\n\t\t\t\t\t\t\t\tbtn.setWaiting(false);\n\t\t\t\t\t\t\t\tthis.render();\n\t\t\t\t\t\t\t\tBX.SidePanel.Instance.close();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}),\n\t\t\t\t\tnew ApplyButton({\n\t\t\t\t\t\tonclick: btn => {\n\t\t\t\t\t\t\tbtn.setWaiting(true);\n\t\t\t\t\t\t\tthis.save().then(() => {\n\t\t\t\t\t\t\t\tbtn.setWaiting(false);\n\t\t\t\t\t\t\t\tthis.render();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}),\n\t\t\t\t\tcancelButton,\n\t\t\t\t];\n\t\t\t},\n\t\t});\n\t}\n\n\t#renderAdvancedSettingsLayoutContent(): HTMLElement\n\t{\n\t\tconst container = this.renderContainer();\n\n\t\tDom.append(this.renderHeaderSection(\n\t\t\t'clock',\n\t\t\tBX.Loc.getMessage('EMBED_SLIDER_AUTO_TITLE2'),\n\t\t\tBX.Loc.getMessage('EMBED_SLIDER_AUTO_DESC2'),\n\t\t\tthis.dataProvider.data.embed.helpCenterId,\n\t\t\tthis.dataProvider.data.embed.helpCenterUrl\n\t\t), container);\n\n\t\tconst stepperInner = Tag.render`<div></div>`;\n\n\t\tDom.append(this.#wizard.renderControlContainer([\n\t\t\tthis.#wizard.renderOption('delay', false),\n\t\t\tthis.#wizard.renderOption('type', false),\n\t\t]), stepperInner);\n\n\t\tconst containerPosition = Tag.render`<div class=\"crm-form-embed__settings--side-block\"></div>`;\n\t\tconst containerVertical = Tag.render`<div data-option=\"vertical\"></div>`;\n\t\tthis.#wizard.renderOptionTo(containerPosition, 'position', false);\n\t\tthis.#wizard.renderOptionTo(containerVertical, 'vertical', false);\n\t\tconst containerPositionVertical = this.#wizard.renderControlContainer([\n\t\t\tcontainerPosition,\n\t\t\tcontainerVertical,\n\t\t]);\n\t\tDom.append(containerPositionVertical, stepperInner);\n\n\t\tconst stepperContent = [\n\t\t\t{\n\t\t\t\thtml: [\n\t\t\t\t\t{\n\t\t\t\t\t\theader: BX.Loc.getMessage('EMBED_SLIDER_AUTO_WIZARD_TITLE'),\n\t\t\t\t\t\tnode: stepperInner,\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t}\n\t\t];\n\n\t\tDom.append(this.renderStepperSection(stepperContent), container);\n\n\t\t// TODO field dependency\n\t\tthis.updateDependentFields(container, 'type', this.data.embed.viewValues['auto']['type']);\n\n\t\treturn container;\n\t}\n}","import {Tag, Type, Dom, Event} from 'main.core';\nimport {Form} from './form';\nimport {DataProvider} from \"../../data_provider\";\nimport {Wizard} from \"../../wizard/wizard\";\nimport {openFeedbackForm} from '../../util';\nimport {Layout} from 'ui.sidepanel.layout';\nimport {HELP_CENTER_ID, HELP_CENTER_URL} from \"../../tab\";\nimport { EventEmitter } from 'main.core.events'\nimport \"ui.alerts\";\n\nexport class Click extends Form\n{\n\t#container: HTMLElement;\n\t#wizard: Wizard;\n\t#rendered: boolean = false;\n\n\tconstructor(formId: number, dataProvider: DataProvider)\n\t{\n\t\tsuper(formId, dataProvider);\n\t\tthis.#container = super.render();\n\t}\n\n\tload(force: boolean = false): Promise\n\t{\n\t\treturn super.load(force).then(() => {\n\t\t\tthis.#wizard = new Wizard(\n\t\t\t\t'click',\n\t\t\t\tthis.formId,\n\t\t\t\tthis.dataProvider.getValues('click'),\n\t\t\t\tthis.dataProvider.getOptions('click'),\n\t\t\t\tthis.dataProvider.getDict()\n\t\t\t);\n\t\t\tthis.#wizard.subscribe('BX:Crm:Form:Embed:needToSave', (event) => {\n\t\t\t\treturn this.save();\n\t\t\t});\n\t\t\tthis.#wizard.subscribe('BX:Crm:Form:Embed:valueChanged', (event) => {\n\t\t\t\tthis.updateDependentFields(this.#container, event.data.name, event.data.value);\n\t\t\t});\n\t\t\tif (!this.#rendered)\n\t\t\t{\n\t\t\t\tthis.render();\n\t\t\t}\n\t\t}).catch((error) => {\n\t\t\tconsole.error(error);\n\t\t\tif (!this.#rendered)\n\t\t\t{\n\t\t\t\tthis.#renderError();\n\t\t\t}\n\t\t});\n\t}\n\n\tsave(): Promise\n\t{\n\t\tthis.dataProvider.updateValues('click', {...this.#wizard.getValues()});\n\t\treturn super.save();\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tthis.#container.innerHTML = '';\n\n\t\tconst headerSection = this.renderHeaderSection(\n\t\t\t'click',\n\t\t\tBX.Loc.getMessage('EMBED_SLIDER_CLICK_TITLE'),\n\t\t\tBX.Loc.getMessage('EMBED_SLIDER_CLICK_DESC'),\n\t\t\tHELP_CENTER_ID,\n\t\t\tHELP_CENTER_URL\n\t\t);\n\t\tDom.append(headerSection, this.#container);\n\n\t\tif (!super.loaded)\n\t\t{\n\t\t\tthis.loader.show(this.#container);\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// update with actual help-center link\n\t\t\tDom.replace(headerSection, this.renderHeaderSection(\n\t\t\t\t'click',\n\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_CLICK_TITLE'),\n\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_CLICK_DESC'),\n\t\t\t\tthis.dataProvider.data.embed.helpCenterId,\n\t\t\t\tthis.dataProvider.data.embed.helpCenterUrl\n\t\t\t));\n\n\t\t\tDom.append(this.renderPreviewSection(\n\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_QR_TITLE'),\n\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_QR_DESC'),\n\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_OPEN_IN_NEW_TAB'),\n\t\t\t\tthis.dataProvider.data.embed.previewLink.replace('#preview#', 'click')\n\t\t\t), this.#container);\n\n\t\t\tDom.append(this.renderFormSettings(), this.#container);\n\t\t\tDom.append(this.renderButtonSettings(), this.#container);\n\n\t\t\tconst code = this.dataProvider.data.embed.scripts['click'].text;\n\t\t\tDom.append(this.renderCodeBlock(code), this.#container);\n\t\t\tDom.append(this.renderCopySection(\n\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_COPY_CODE'),\n\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_COPY_CODE2'),\n\t\t\t\tcode,\n\t\t\t\tthis.renderBubble(BX.Loc.getMessage('EMBED_SLIDER_COPY_CODE_BUBBLE_CLICK'), true)\n\t\t\t), this.#container);\n\n\t\t\tthis.#rendered = true;\n\t\t}\n\n\t\treturn this.#container;\n\t}\n\n\t#renderError(): HTMLElement\n\t{\n\t\tthis.#container.innerHTML = '';\n\t\tDom.append(super.renderError(super.dataProvider.data), this.#container);\n\t\tthis.#rendered = true;\n\t}\n\n\trenderFormSettings(): HTMLElement\n\t{\n\t\tconst section = this.renderSection(\n\t\t\tthis.renderSettingsHeader(BX.Loc.getMessage('EMBED_SLIDER_SETTINGS_HEADING'), false)\n\t\t);\n\n\t\tconst formSettings = Tag.render`<div></div>`;\n\t\tDom.append(this.#wizard.renderOption('type', true), formSettings);\n\n\t\tconst containerPosition = Tag.render`<div class=\"crm-form-embed__settings--side-block --compact\"></div>`;\n\t\tthis.#wizard.renderOptionTo(containerPosition, 'position', true);\n\n\t\tconst containerVertical = Tag.render`<div data-option=\"vertical\"></div>`;\n\t\tthis.#wizard.renderOptionTo(containerVertical, 'vertical', true);\n\n\t\tconst containerPositionVertical = this.#wizard.renderControlContainer([\n\t\t\tcontainerPosition,\n\t\t\tcontainerVertical,\n\t\t]);\n\t\tDom.append(containerPositionVertical, formSettings);\n\n\t\tthis.updateDependentFields(formSettings, 'type', this.dataProvider.getValues('click')['type']);\n\n\t\tDom.append(formSettings, section);\n\t\treturn section;\n\t}\n\n\trenderButtonSettings(): HTMLElement\n\t{\n\t\tconst enhancedMode =\n\t\t\t!Type.isUndefined(this.dataProvider.getValues('click')['button'])\n\t\t\t&& !Type.isUndefined(this.dataProvider.getValues('click')['button']['use'])\n\t\t\t&& this.dataProvider.getValues('click')['button']['use'] === '1'\n\t\t;\n\t\t// const linkMode =\n\t\t// \t!Type.isUndefined(this.dataProvider.getValues('click')?.button?.plain)\n\t\t// \t&& this.dataProvider.getValues('click')['button']['plain'] === '1'\n\t\t// ;\n\n\t\tconst section = this.renderSection(\n\t\t\tTag.render`\n\t\t\t\t<div class=\"ui-alert ui-alert-primary crm-form-embed-click-button-alert\" id ='crm-form-embed-click-button-alert-${this.formId}'>\n\t\t\t\t\t<span class=\"ui-alert-message\">${BX.Loc.getMessage('EMBED_SLIDER_CLICK_BUTTON_ALERT')}</span>\n\t\t\t\t\t<span class=\"ui-alert-close-btn\" onclick=\"BX.hide(BX('crm-form-embed-click-button-alert-${this.formId}'));\"></span>\n\t\t\t\t</div>\n\t\t\t`\n\t\t);\n\n\t\tDom.append(\n\t\t\tthis.renderSettingsHeader(BX.Loc.getMessage('EMBED_SLIDER_SETTINGS_HEADING_CLICK'), true,() => {\n\t\t\t\tBX.SidePanel.Instance.open(\"crm.webform:embed:\" + this.formId + \":click:expert\", {\n\t\t\t\t\twidth: 920,\n\t\t\t\t\tcacheable: false,\n\t\t\t\t\tcontentCallback: () => this.#createAdvancedSettingsLayout(),\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tonCloseComplete: (event) => {\n\t\t\t\t\t\t\tthis.load(true).then(() => {\n\t\t\t\t\t\t\t\tthis.render();\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}),\n\t\t\tsection\n\t\t);\n\n\t\tDom.append(\n\t\t\tthis.#wizard.renderOption('button.use', true),\n\t\t\tsection.querySelector('.crm-form-embed__customization-settings--switcher')\n\t\t);\n\n\t\tif (enhancedMode)\n\t\t{\n\t\t\tDom.addClass(section.querySelector('.crm-form-embed__link.--expert-mode'), '--visible');\n\t\t\tDom.removeClass(section.querySelector('[data-roll=\"heading-block\"]'), '--collapse');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.removeClass(section.querySelector('.crm-form-embed__link.--expert-mode'), '--visible');\n\t\t\tDom.addClass(section.querySelector('[data-roll=\"heading-block\"]'), '--collapse');\n\t\t}\n\n\t\tconst containerPlainAndText = this.#wizard.renderControlContainer([\n\t\t\tthis.#wizard.renderOption('button.plain', true),\n\t\t\tthis.#wizard.renderOption('button.text', true)\n\t\t]);\n\n\t\t// const optionStyle = (linkMode)\n\t\t// \t? this.#wizard.renderOption('button.decoration', true)\n\t\t// \t: this.#wizard.renderOption('buttonStyle', true)\n\t\t// ;\n\t\tconst optionLinkStyle = this.#wizard.renderOption('button.decoration', true);\n\t\toptionLinkStyle.dataset.option = 'button.decoration';\n\t\tconst optionButtonStyle = this.#wizard.renderOption('buttonStyle', true);\n\t\toptionButtonStyle.dataset.option = 'buttonStyle';\n\n\t\tconst rowButtonSettings = this.#wizard.renderRow([\n\t\t\t// this.#wizard.renderTitle(BX.Loc.getMessage('EMBED_SLIDER_SUBTITLE_BUTTON_SETTINGS'), true),\n\t\t\tcontainerPlainAndText,\n\t\t\t// this.#wizard.renderTitle(BX.Loc.getMessage('EMBED_SLIDER_SUBTITLE_STYLE')),\n\t\t\t// optionStyle,\n\t\t\toptionButtonStyle,\n\t\t\toptionLinkStyle,\n\t\t]);\n\n\t\tconst colBtnColor = this.#wizard.renderCol();\n\t\tconst colTxtColor = this.#wizard.renderCol();\n\t\tthis.#wizard.renderColorPopup(colBtnColor, 'button.color.background', true);\n\t\tthis.#wizard.renderColorPopup(colTxtColor, 'button.color.text', true);\n\n\t\tconst rowDesign = this.#wizard.renderRow(\n\t\t\t[\n\t\t\t\t// this.#wizard.renderTitle(\n\t\t\t\t// \tBX.Loc.getMessage('EMBED_SLIDER_SUBTITLE_DESIGN'),\n\t\t\t\t// \ttrue\n\t\t\t\t// ),\n\t\t\t\tthis.#wizard.renderBlock([\n\t\t\t\t\tthis.#wizard.renderCol([\n\t\t\t\t\t\tthis.#wizard.renderLabel(BX.Loc.getMessage('EMBED_SLIDER_OPTION_BUTTON.FONT'), true),\n\t\t\t\t\t\tthis.#wizard.renderOption('button.font', true),\n\t\t\t\t\t], true),\n\t\t\t\t\tcolBtnColor,\n\t\t\t\t\tcolTxtColor,\n\t\t\t\t]),\n\t\t\t],\n\t\t\ttrue\n\t\t);\n\n\t\tconst wrapper = Tag.render`\n\t\t\t<div class=\"crm-form-embed__basic\" data-roll=\"crm-form-embed__settings\" ${enhancedMode ? '' : 'style=\"height: 0px;\"'}></div>\n\t\t`;\n\n\t\tDom.append(rowButtonSettings, wrapper);\n\t\tDom.append(rowDesign, wrapper);\n\t\tDom.append(wrapper, section);\n\n\t\tthis.updateDependentFields(section, 'button.plain', this.dataProvider.getValues('click')['button']['plain']);\n\n\t\treturn section;\n\t}\n\n\t#createAdvancedSettingsLayout(): Promise\n\t{\n\t\treturn Layout.createContent({\n\t\t\textensions: ['crm.form.embed', 'ui.sidepanel-content', 'ui.forms', 'landing.ui.field.color', 'ui.switcher'],\n\t\t\ttitle: BX.Loc.getMessage('EMBED_SLIDER_EXPERT_MODE_TITLE'),\n\t\t\tdesign: {\n\t\t\t\tsection: false,\n\t\t\t},\n\t\t\ttoolbar ({Button}): Array\n\t\t\t{\n\t\t\t\treturn [\n\t\t\t\t\tnew Button({\n\t\t\t\t\t\t// icon: Button.Icon.SETTING,\n\t\t\t\t\t\tcolor: Button.Color.LIGHT_BORDER,\n\t\t\t\t\t\ttext: BX.Loc.getMessage('EMBED_SLIDER_TOOLBAR_BTN_FEEDBACK'),\n\t\t\t\t\t\tonclick: openFeedbackForm,\n\t\t\t\t\t}),\n\t\t\t\t];\n\t\t\t},\n\t\t\tcontent: () => this.#renderAdvancedSettingsLayoutContent(),\n\t\t\tbuttons: ({cancelButton, ApplyButton, SaveButton}) => {\n\t\t\t\treturn [\n\t\t\t\t\tnew SaveButton({\n\t\t\t\t\t\tonclick: btn => {\n\t\t\t\t\t\t\tbtn.setWaiting(true);\n\t\t\t\t\t\t\tthis.save().then(() => {\n\t\t\t\t\t\t\t\tbtn.setWaiting(false);\n\t\t\t\t\t\t\t\tthis.render();\n\t\t\t\t\t\t\t\tBX.SidePanel.Instance.close();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}),\n\t\t\t\t\tnew ApplyButton({\n\t\t\t\t\t\tonclick: btn => {\n\t\t\t\t\t\t\tbtn.setWaiting(true);\n\t\t\t\t\t\t\tthis.save().then(() => {\n\t\t\t\t\t\t\t\tbtn.setWaiting(false);\n\t\t\t\t\t\t\t\tthis.render();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}),\n\t\t\t\t\tcancelButton,\n\t\t\t\t];\n\t\t\t},\n\t\t});\n\t}\n\n\t#renderAdvancedSettingsLayoutContent(): Promise\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst container = this.renderContainer();\n\n\t\t\tDom.append(this.renderHeaderSection(\n\t\t\t\t'click',\n\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_CLICK_TITLE_ADVANCED'),\n\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_CLICK_DESC_ADVANCED'),\n\t\t\t\tthis.dataProvider.data.embed.helpCenterId,\n\t\t\t\tthis.dataProvider.data.embed.helpCenterUrl\n\t\t\t), container);\n\n\t\t\tthis.loader.show(container);\n\n\t\t\tEventEmitter.subscribeOnce('SidePanel.Slider:onOpenComplete', (event) => {\n\t\t\t\tif (event.target.getUrl() === \"crm.webform:embed:\" + this.formId + \":click:expert\")\n\t\t\t\t{\n\t\t\t\t\tthis.loader.hide();\n\n\t\t\t\t\tconst containerButtonStyle = this.#wizard.renderControlContainer();\n\t\t\t\t\tcontainerButtonStyle.dataset.controlMode = 'advanced';\n\t\t\t\t\tcontainerButtonStyle.dataset.option = 'buttonStyle';\n\t\t\t\t\tthis.#wizard.renderOptionTo(containerButtonStyle, 'buttonStyle', false);\n\t\t\t\t\tconst containerLinkStyle = this.#wizard.renderControlContainer();\n\t\t\t\t\tcontainerLinkStyle.dataset.controlMode = 'advanced';\n\t\t\t\t\tcontainerLinkStyle.dataset.option = 'button.decoration';\n\t\t\t\t\tthis.#wizard.renderOptionTo(containerLinkStyle, 'button.decoration', false);\n\n\n\t\t\t\t\tconst containerText = this.#wizard.renderControlContainer();\n\t\t\t\t\tcontainerText.dataset.controlMode = 'advanced';\n\t\t\t\t\tthis.#wizard.renderOptionTo(containerText, 'button.text', false);\n\t\t\t\t\tconst containerTypeAndText = this.#wizard.renderControlContainer([\n\t\t\t\t\t\tthis.#wizard.renderOption('button.plain', false),\n\t\t\t\t\t\tcontainerText,\n\t\t\t\t\t]);\n\n\t\t\t\t\tconst step1 = Tag.render`<div></div>`;\n\t\t\t\t\tDom.append(containerTypeAndText, step1);\n\t\t\t\t\tDom.append(containerButtonStyle, step1);\n\t\t\t\t\tDom.append(containerLinkStyle, step1);\n\n\t\t\t\t\tconst rowFont = this.#wizard.renderControlContainer();\n\t\t\t\t\trowFont.dataset.controlMode = 'advanced';\n\t\t\t\t\trowFont.dataset.option = 'button.font';\n\t\t\t\t\tthis.#wizard.renderOptionTo(rowFont, 'button.font', false);\n\t\t\t\t\tconst stepButtonFont = Tag.render`\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t${rowFont}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t`;\n\n\t\t\t\t\t// TODO white container\n\t\t\t\t\tconst stepColor = this.renderSection();\n\t\t\t\t\tconst containerColorBg = this.#wizard.renderControlContainer();\n\t\t\t\t\tconst containerColorBgHover = this.#wizard.renderControlContainer();\n\t\t\t\t\tconst containerColorText = this.#wizard.renderControlContainer();\n\t\t\t\t\tconst containerColorTextHover = this.#wizard.renderControlContainer();\n\t\t\t\t\tcontainerColorBg.dataset.controlMode = 'advanced';\n\t\t\t\t\tcontainerColorBgHover.dataset.controlMode = 'advanced';\n\t\t\t\t\tcontainerColorText.dataset.controlMode = 'advanced';\n\t\t\t\t\tcontainerColorTextHover.dataset.controlMode = 'advanced';\n\t\t\t\t\tthis.#wizard.renderColorInline(containerColorBg, 'button.color.background', false);\n\t\t\t\t\tthis.#wizard.renderColorInline(containerColorText, 'button.color.text', false);\n\t\t\t\t\tthis.#wizard.renderColorInline(containerColorBgHover, 'button.color.backgroundHover', false);\n\t\t\t\t\tthis.#wizard.renderColorInline(containerColorTextHover, 'button.color.textHover', false);\n\t\t\t\t\tconst getColorLabel = (messageId: string) => {\n\t\t\t\t\t\tconst label = this.#wizard.renderLabel(BX.Loc.getMessage(messageId));\n\t\t\t\t\t\tDom.addClass(label, 'crm-form-embed__label-text-color');\n\t\t\t\t\t\treturn label;\n\t\t\t\t\t}\n\t\t\t\t\tDom.append(Tag.render`<div>\n\t\t\t\t\t\t${this.#wizard.renderBlock([\n\t\t\t\t\t\t\tthis.#wizard.renderCol([\n\t\t\t\t\t\t\t\tgetColorLabel('EMBED_SLIDER_OPTION_BUTTON.COLOR.BACKGROUND'),\n\t\t\t\t\t\t\t\tcontainerColorBg,\n\t\t\t\t\t\t\t]),\n\t\t\t\t\t\t\tthis.#wizard.renderCol([\n\t\t\t\t\t\t\t\tgetColorLabel('EMBED_SLIDER_OPTION_BUTTON.COLOR.TEXT'),\n\t\t\t\t\t\t\t\tcontainerColorText,\n\t\t\t\t\t\t\t]),\n\t\t\t\t\t\t\tthis.#wizard.renderCol([\n\t\t\t\t\t\t\t\tgetColorLabel('EMBED_SLIDER_OPTION_BUTTON.COLOR.BACKGROUNDHOVER'),\n\t\t\t\t\t\t\t\tcontainerColorBgHover,\n\t\t\t\t\t\t\t]),\n\t\t\t\t\t\t\tthis.#wizard.renderCol([\n\t\t\t\t\t\t\t\tgetColorLabel('EMBED_SLIDER_OPTION_BUTTON.COLOR.TEXTHOVER'),\n\t\t\t\t\t\t\t\tcontainerColorTextHover,\n\t\t\t\t\t\t\t]),\n\t\t\t\t\t\t])}\n\t\t\t\t\t</div>`, stepColor);\n\n\t\t\t\t\tconst step4 = Tag.render`<div></div>`;\n\t\t\t\t\tconst containerButtonPosition = Tag.render`<div class=\"crm-form-embed__settings--side-block\" data-option=\"button.align\"></div>`;\n\t\t\t\t\tthis.#wizard.renderOptionTo(containerButtonPosition, 'button.align', false);\n\t\t\t\t\tconst containerLinkPosition = Tag.render`<div class=\"crm-form-embed__settings--side-block\" data-option=\"link.align\"></div>`;\n\t\t\t\t\tthis.#wizard.renderOptionTo(containerLinkPosition, 'link.align', false);\n\t\t\t\t\tDom.append(this.#wizard.renderControlContainer([\n\t\t\t\t\t\tcontainerButtonPosition,\n\t\t\t\t\t\tcontainerLinkPosition,\n\t\t\t\t\t]), step4);\n\n\t\t\t\t\tconst step4Message = (\n\t\t\t\t\t\t!Type.isUndefined(this.dataProvider.getValues('click')?.button?.plain)\n\t\t\t\t\t\t&& this.dataProvider.getValues('click')['button']['plain'] === '1'\n\t\t\t\t\t)\n\t\t\t\t\t\t? 'EMBED_SLIDER_CLICK_STEP_4_TITLE_2'\n\t\t\t\t\t\t: 'EMBED_SLIDER_CLICK_STEP_4_TITLE'\n\t\t\t\t\t;\n\n\t\t\t\t\tconst stepperContent = [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\thtml: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\theader: {\n\t\t\t\t\t\t\t\t\t\ttitle: BX.Loc.getMessage('EMBED_SLIDER_CLICK_STEP_1_TITLE'),\n\t\t\t\t\t\t\t\t\t\t// hint: 'hint text',\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tnode: step1,\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\thtml: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\theader: BX.Loc.getMessage('EMBED_SLIDER_CLICK_STEP_2_TITLE'),\n\t\t\t\t\t\t\t\t\tnode: stepButtonFont,\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\thtml: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\theader: BX.Loc.getMessage('EMBED_SLIDER_CLICK_STEP_3_TITLE'),\n\t\t\t\t\t\t\t\t\tnode: stepColor,\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\thtml: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\theader: BX.Loc.getMessage(step4Message),\n\t\t\t\t\t\t\t\t\tnode: step4,\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t},\n\t\t\t\t\t];\n\n\t\t\t\t\tDom.append(this.renderStepperSection(stepperContent), container);\n\n\t\t\t\t\t// TODO field dependency\n\t\t\t\t\tthis.updateDependentFields(container, 'type', this.dataProvider.getValues('click')['type']);\n\t\t\t\t\tthis.updateDependentFields(container, 'button.plain', this.dataProvider.getValues('click')['button']['plain']);\n\n\t\t\t\t\tthis.#wizard.subscribe('BX:Crm:Form:Embed:valueChanged', (event) => {\n\t\t\t\t\t\tthis.updateDependentFields(container, event.data.name, event.data.value);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tresolve(container);\n\t\t});\n\t}\n}","import {Dom} from 'main.core';\nimport {Form} from './form';\nimport {DataProvider} from \"../../data_provider\";\nimport {HELP_CENTER_ID, HELP_CENTER_URL} from \"../../tab\";\n\nexport class Publink extends Form\n{\n\t#container: HTMLElement;\n\t#rendered: boolean = false;\n\n\tconstructor(formId: number, dataProvider: DataProvider): undefined\n\t{\n\t\tsuper(formId, dataProvider);\n\t\tthis.#container = super.render();\n\t}\n\n\tload(force: boolean = false): Promise\n\t{\n\t\treturn super.load(force).then(() => {\n\t\t\tif (!this.#rendered)\n\t\t\t{\n\t\t\t\tthis.render();\n\t\t\t}\n\t\t}).catch((error) => {\n\t\t\tconsole.error(error);\n\t\t\tif (!this.#rendered)\n\t\t\t{\n\t\t\t\tthis.#renderError();\n\t\t\t}\n\t\t});\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tthis.#container.innerHTML = '';\n\n\t\tconst headerSection = this.renderHeaderSection(\n\t\t\t'linked-link',\n\t\t\tBX.Loc.getMessage('EMBED_SLIDER_PUBLIC_LINK_TITLE'),\n\t\t\tBX.Loc.getMessage('EMBED_SLIDER_PUBLIC_LINK_DESCRIPTION'),\n\t\t\tHELP_CENTER_ID,\n\t\t\tHELP_CENTER_URL\n\t\t);\n\t\tDom.append(headerSection, this.#container);\n\n\t\tif (!super.loaded)\n\t\t{\n\t\t\tthis.loader.show(this.#container);\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// update with actual help-center link\n\t\t\tDom.replace(headerSection, this.renderHeaderSection(\n\t\t\t\t'linked-link',\n\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_PUBLIC_LINK_TITLE'),\n\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_PUBLIC_LINK_DESCRIPTION'),\n\t\t\t\tthis.dataProvider.data.embed.helpCenterId,\n\t\t\t\tthis.dataProvider.data.embed.helpCenterUrl\n\t\t\t));\n\n\t\t\tDom.append(this.renderPreviewSection(\n\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_PUBLIC_LINK_QR_TITLE'),\n\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_PUBLIC_LINK_QR_DESC'),\n\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_PUBLIC_LINK_OPEN_IN_NEW_TAB'),\n\t\t\t\tthis.dataProvider.data.embed.pubLink\n\t\t\t), this.#container);\n\t\t\tDom.append(this.renderCopySection(\n\t\t\t\tnull, // BX.Loc.getMessage('EMBED_SLIDER_COPY_LINK'),\n\t\t\t\tBX.Loc.getMessage('EMBED_SLIDER_COPY_LINK2'),\n\t\t\t\tthis.dataProvider.data.embed.pubLink,\n\t\t\t\tnull,\n\t\t\t\t'ui-btn-icon-follow crm-form-embed__btn-icon--link'\n\t\t\t), this.#container);\n\n\t\t\tthis.#rendered = true;\n\t\t}\n\n\t\treturn this.#container;\n\t}\n\n\t#renderError(): HTMLElement\n\t{\n\t\tthis.#container.innerHTML = '';\n\t\tDom.append(super.renderError(this.dataProvider.data), this.#container);\n\t\tthis.#rendered = true;\n\t\treturn this.#container;\n\t}\n}","// export * from './inline';\n// export * from './auto';\n// export * from './click';\n// export * from './publink';\n\nimport {Inline} from \"./inline\";\nimport {Auto} from \"./auto\";\nimport {Click} from \"./click\";\nimport {Publink} from \"./publink\";\n\nexport {\n\tInline,\n\tAuto,\n\tClick,\n\tPublink,\n}","import {Loc, Tag, Type} from 'main.core';\nimport {Layout} from 'ui.sidepanel.layout';\nimport {EmbedOptions} from './types';\nimport {DataProvider} from \"./data_provider\";\nimport {Widget} from './tab/widget';\nimport {Openlines} from './tab/openlines';\nimport * as Form from './tab/form/index';\nimport {openFeedbackForm} from \"./util\";\n\nimport 'ui.design-tokens';\nimport 'ui.fonts.opensans';\nimport './embed.css';\n\nconst DEFAULT_WIDGETS_COUNT = 10;\n\nexport class Embed\n{\n\t#options: Object;\n\n\t#publink: Form.Publink;\n\t#inline: Form.Inline;\n\t#auto: Form.Auto;\n\t#click: Form.Click;\n\n\t#widget: Widget;\n\t#openlines: Openlines;\n\n\tconstructor(formId: number, options: EmbedOptions = {})\n\t{\n\t\tthis.#options = options;\n\n\t\tconst dataProvider = new DataProvider();\n\n\t\tthis.#publink = new Form.Publink(formId, dataProvider);\n\t\tthis.#inline = new Form.Inline(formId, dataProvider);\n\t\tthis.#click = new Form.Click(formId, dataProvider);\n\t\tthis.#auto = new Form.Auto(formId, dataProvider);\n\n\t\tconst widgetsCount = options.widgetsCount ? options.widgetsCount : DEFAULT_WIDGETS_COUNT;\n\t\tthis.#widget = new Widget(formId, {widgetsCount: widgetsCount});\n\t\tthis.#openlines = new Openlines(formId, {widgetsCount: widgetsCount});\n\t}\n\n\tstatic openSlider(formId: number,  options: EmbedOptions = {activeMenuItemId: 'link'})\n\t{\n\t\tconst instance = (new Embed(formId, {...options}));\n\t\tBX.SidePanel.Instance.open(\"crm.webform:embed:\" + formId, {\n\t\t\twidth: 1046,\n\t\t\tcacheable: false,\n\t\t\t...options.sliderOptions,\n\t\t\tcontentCallback: () => instance.#render(options),\n\t\t\tevents: {\n\t\t\t\tonCloseComplete: (event) => {\n\t\t\t\t\tif (Type.isFunction(options.onCloseComplete))\n\t\t\t\t\t{\n\t\t\t\t\t\toptions.onCloseComplete();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tonLoad: (event) => {\n\t\t\t\t\t// BX.UI.Switcher.initByClassName();\n\t\t\t\t\tinstance.#loadTab(options.activeMenuItemId);\n\t\t\t\t}\n\t\t\t},\n\t\t});\n\t}\n\n\t/**\n\t * @deprecated open => openSlider\n\t * @see Embed.openSlider\n\t */\n\tstatic open(formId: number, options: EmbedOptions = {widgetsCount: DEFAULT_WIDGETS_COUNT, activeMenuItemId: 'inline'})\n\t{\n\t\tEmbed.openSlider(formId, options);\n\t}\n\n\t#render(options: EmbedOptions): Promise\n\t{\n\t\treturn Layout.createContent({\n\t\t\textensions: ['crm.form.embed', 'ui.sidepanel-content', 'ui.forms', 'landing.ui.field.color', 'ui.switcher'],\n\t\t\ttitle: BX.Loc.getMessage('EMBED_SLIDER_MAIN_TITLE'),\n\t\t\tdesign: {\n\t\t\t\tsection: false,\n\t\t\t},\n\t\t\ttoolbar ({Button}): Array\n\t\t\t{\n\t\t\t\treturn [\n\t\t\t\t\tnew Button({\n\t\t\t\t\t\t// icon: Button.Icon.SETTING,\n\t\t\t\t\t\tcolor: Button.Color.LIGHT_BORDER,\n\t\t\t\t\t\ttext: BX.Loc.getMessage('EMBED_SLIDER_TOOLBAR_BTN_FEEDBACK'),\n\t\t\t\t\t\tonclick: openFeedbackForm,\n\t\t\t\t\t}),\n\t\t\t\t];\n\t\t\t},\n\t\t\tcontent: () => {\n\t\t\t\treturn Tag.render`\n\t\t\t\t\t<div class=\"crm-form-embed-slider-wrapper\">\n\t\t\t\t\t\t<div data-menu-item-id=\"widgets\">${this.#widget.render()}</div>\n\t\t\t\t\t\t<div data-menu-item-id=\"openlines\">${this.#openlines.render()}</div>\n\t\t\t\t\t\t<div data-menu-item-id=\"inline\">${this.#inline.render()}</div>\n\t\t\t\t\t\t<div data-menu-item-id=\"click\">${this.#click.render()}</div>\n\t\t\t\t\t\t<div data-menu-item-id=\"auto\">${this.#auto.render()}</div>\n\t\t\t\t\t\t<div data-menu-item-id=\"link\">${this.#publink.render()}</div>\n\t\t\t\t\t</div>\n\t\t\t\t`;\n\t\t\t},\n\t\t\tmenu: {\n\t\t\t\titems: [\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: Loc.getMessage('EMBED_SLIDER_PUBLIC_LINK_MENU'),\n\t\t\t\t\t\tid: 'link',\n\t\t\t\t\t\tonclick: () => this.#loadTab('link'),\n\t\t\t\t\t\tactive: options.activeMenuItemId === 'link',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: Loc.getMessage('EMBED_SLIDER_WIDGET_MENU'),\n\t\t\t\t\t\tid: 'widgets',\n\t\t\t\t\t\tonclick: () => this.#loadTab('widgets'),\n\t\t\t\t\t\tactive: options.activeMenuItemId === 'widgets',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: Loc.getMessage('EMBED_SLIDER_OPENLINES_MENU'),\n\t\t\t\t\t\tid: 'openlines',\n\t\t\t\t\t\tonclick: () => this.#loadTab('openlines'),\n\t\t\t\t\t\tactive: options.activeMenuItemId === 'openlines',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: Loc.getMessage('EMBED_SLIDER_INLINE_MENU'),\n\t\t\t\t\t\tid: 'inline',\n\t\t\t\t\t\tonclick: () => this.#loadTab('inline'),\n\t\t\t\t\t\tactive: options.activeMenuItemId === 'inline',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: Loc.getMessage('EMBED_SLIDER_CLICK_MENU'),\n\t\t\t\t\t\tid: 'click',\n\t\t\t\t\t\tonclick: () => this.#loadTab('click'),\n\t\t\t\t\t\tactive: options.activeMenuItemId === 'click',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: Loc.getMessage('EMBED_SLIDER_AUTO_MENU'),\n\t\t\t\t\t\tid: 'auto',\n\t\t\t\t\t\tonclick: () => this.#loadTab('auto'),\n\t\t\t\t\t\tactive: options.activeMenuItemId === 'auto',\n\t\t\t\t\t},\n\t\t\t\t]\n\t\t\t},\n\t\t\tbuttons: ({closeButton}) => {\n\t\t\t\treturn [closeButton];\n\t\t\t},\n\t\t});\n\t}\n\n\t#loadTab(tabName: string)\n\t{\n\t\tswitch (tabName)\n\t\t{\n\t\t\tcase 'widgets':\n\t\t\t\tthis.#widget.load();\n\t\t\t\tbreak;\n\t\t\tcase 'openlines':\n\t\t\t\tthis.#openlines.load();\n\t\t\t\tbreak;\n\t\t\tcase 'inline':\n\t\t\t\tthis.#inline.load();\n\t\t\t\tbreak;\n\t\t\tcase 'click':\n\t\t\t\tthis.#click.load();\n\t\t\t\tbreak;\n\t\t\tcase 'auto':\n\t\t\t\tthis.#auto.load();\n\t\t\t\tbreak;\n\t\t\tcase 'link':\n\t\t\tdefault:\n\t\t\t\tthis.#publink.load();\n\t\t\t\tbreak;\n\t\t}\n\t}\n}"],"names":["DataProvider","loaded","data","errors","updateValues","type","values","button","plain","Type","isStringFilled","link","align","embed","viewValues","getValues","BX","mergeEx","getOptions","viewOptions","getDict","dict","aligns","value","defaults","inline","auto","click","use","text","Loc","getMessage","font","rounded","outlined","decoration","color","textHover","background","backgroundHover","isUndefined","HELP_CENTER_ID","HELP_CENTER_URL","Tab","constructor","Loader","loader","renderBubble","withoutFrame","Tag","render","renderCopySection","title","btnText","copyText","innerContent","iconClass","section","renderSection","isNull","Dom","append","Text","encode","inner","isDomNode","top","clipboard","bindCopyClick","querySelector","popup","offsetLeft","renderPreviewSection","desc","btn","url","qr","QRCode","width","height","addClass","renderHeaderSection","icon","helpCenterId","helpCenterUrl","renderHelp","renderStepperSection","content","step","StepByStep","target","init","elem","rounding","withIcon","renderContainer","container","caption","showHelp","event","Helper","show","dataset","helpId","preventDefault","ERROR_CODE_FORM_READ_ACCESS_DENIED","ERROR_CODE_WIDGET_READ_ACCESS_DENIED","ERROR_CODE_WIDGET_WRITE_ACCESS_DENIED","ERROR_CODE_OPENLINES_WRITE_ACCESS_DENIED","handlerToggleSwitcher","selection","window","getSelection","toString","parentElement","handlerToggleCodeBlock","currentTarget","closest","toggleBtn","blockCode","style","scrollHeight","removeClass","Event","unbind","transitionHandlerForCodeBlock","bind","Widget","formId","options","prototype","actionGet","load","Promise","resolve","ajax","runAction","json","count","widgetsCount","then","response","catch","renderError","innerHTML","headerSection","renderHeader","replace","renderPreview","renderWidgets","renderFinalBlock","renderTo","node","Error","responseData","errorMessage","isObject","error","status","code","previewLink","allIds","Object","keys","widgets","contentInner","length","renderEmptyInner","renderWidgetRows","formName","formType","allWidgets","currentFormName","currentFormType","widgetsList","widgetIds","getOrderedWidgetIds","forEach","id","widget","sort","a","b","aData","bData","checked","createSwitcher","inputName","switcherNode","document","createElement","className","UI","Switcher","switcher","handlers","toggled","formNames","relatedFormNames","sFormType","sFormNames","isArray","join","sFormNamesField","row","name","getNode","formTypeLangKey","toUpperCase","hasMessage","widgetId","setLoading","dataSetOld","formNameOld","formTypeOld","dataSetCurrent","isChecked","buttonId","assigned","check","Notification","Center","notify","messageId","assign","formTypeMessage","textContent","setAttribute","Openlines","lines","renderLineRows","allLines","renderAccessDeniedAlert","linesList","lineIds","formEnabled","lineId","lineName","Form","dataProvider","force","reject","save","renderSettingsHeader","expertMode","headingBox","heading","renderCodeBlock","updateDependentFields","containerVertical","hide","containerButtonStyle","containerLinkStyle","containerButtonPosition","containerLinkPosition","Inline","console","scripts","getSvg","option","isHexDark","hex","Color","hexToRgba","getHexFromOpacity","opacity","isString","includes","Number","parseInt","Math","round","openFeedbackForm","Feedback","open","forms","zones","lang","sec","parseHex","fillHex","parts","exec","toRgba","numbers","fillAlpha","alpha","substr","toLowerCase","r","g","brightness","mode","Controls","renderDropdown","handler","attr","setOptions","size","callback","renderLabel","keyName","select","entries","renderText","advanced","handlerShowSaveBtn","afterIcon","input","bindOnce","renderTypeface","forValue","extended","getAttribute","nodeList","querySelectorAll","animateSwitching","renderSquareButton","key","renderButton","renderLink","renderSwitcher","switcherId","renderColorPicker","subtype","ColorField","getValue","hexA","getHex","getOpacity","colorPicker","createColorPicker","setValue","getLayout","renderOptionTitle","buttonSetting","onChange","onReset","loaderTarget","targetWidth","targetHeight","resetPadding","handlerToggleClickMode","headerBlock","moreSettingsBtn","transitionHandlerForSettingsSection","Wizard","EventEmitter","setEventNamespace","renderControlContainer","item","renderRow","last","renderBlock","block","renderCol","first","col","renderTitle","line","Renderer","renderOptionTo","instantSave","funcName","fieldOptions","fieldValue","isFunction","renderOption","renderColorInline","renderColorPopup","picker","PopupWindow","bindElement","autoHide","closeByEsc","getStyle","valueHex","fgColor","getThemeClass","getOptionKeyName","colorBox","subscribe","innerText","promises","field","push","all","BaseEvent","emitAsync","aNames","split","updatedValues","buildOption","names","nextName","shift","emit","defaultValue","aName","part","concat","charAt","slice","renderFieldDelay","val","renderFieldType","renderFieldPosition","controlOptions","handlerLeft","handlerCenter","handlerRight","getOptionValueName","renderFieldVertical","handlerBottom","handlerTop","renderFieldButtonStyle","handlerPm","handlerPmr","handlerLb","handlerLbr","controlMode","renderFieldButtonDecoration","handlerNoBorder","handlerDotted","handlerLine","renderFieldButtonFont","handlerModern","handlerClassic","handlerElegant","renderFieldButtonAlign","renderFieldLinkAlign","handlerInline","renderFieldButtonPlain","renderFieldButtonText","renderFieldButtonColorBackground","fields","renderFieldButtonColorBackgroundHover","renderFieldButtonColorText","renderFieldButtonColorTextHover","renderFieldButtonUse","optionName","result","msgKey","keySplit","getDictValues","nextKey","dictValues","Auto","renderBaseSettings","SidePanel","Instance","cacheable","contentCallback","events","onCloseComplete","wrapper","layoutContent","Layout","createContent","extensions","design","toolbar","Button","LIGHT_BORDER","onclick","buttons","SaveButton","ApplyButton","cancelButton","setWaiting","close","stepperInner","containerPosition","containerPositionVertical","stepperContent","html","header","Click","renderFormSettings","renderButtonSettings","formSettings","enhancedMode","containerPlainAndText","optionLinkStyle","optionButtonStyle","rowButtonSettings","colBtnColor","colTxtColor","rowDesign","subscribeOnce","getUrl","containerText","containerTypeAndText","step1","rowFont","stepButtonFont","stepColor","containerColorBg","containerColorBgHover","containerColorText","containerColorTextHover","getColorLabel","label","step4","step4Message","Publink","pubLink","DEFAULT_WIDGETS_COUNT","Embed","openSlider","activeMenuItemId","instance","sliderOptions","onLoad","menu","items","active","closeButton","tabName"],"mappings":"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"}