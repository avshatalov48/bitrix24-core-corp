this.BX=this.BX||{};this.BX.Crm=this.BX.Crm||{};this.BX.Crm.AI=this.BX.Crm.AI||{};(function(e,o,t,i,s,a,r,l){"use strict";let n=e=>e,c,d,p,b;var v=babelHelpers.classPrivateFieldLooseKey("popup");var u=babelHelpers.classPrivateFieldLooseKey("events");var h=babelHelpers.classPrivateFieldLooseKey("initPopup");var m=babelHelpers.classPrivateFieldLooseKey("renderPopupContent");var P=babelHelpers.classPrivateFieldLooseKey("renderHeaderCopilotIcon");var _=babelHelpers.classPrivateFieldLooseKey("renderHidePopupButton");var L=babelHelpers.classPrivateFieldLooseKey("renderLottieAnimation");var B=babelHelpers.classPrivateFieldLooseKey("renderContentText");var f=babelHelpers.classPrivateFieldLooseKey("renderConnectTelephonyButton");var g=babelHelpers.classPrivateFieldLooseKey("renderRemindLaterButton");var H=babelHelpers.classPrivateFieldLooseKey("preloadMainLottieAnimation");var y=babelHelpers.classPrivateFieldLooseKey("getMainAnimationPath");class O{constructor(e){var o;Object.defineProperty(this,y,{value:j});Object.defineProperty(this,H,{value:R});Object.defineProperty(this,g,{value:A});Object.defineProperty(this,f,{value:T});Object.defineProperty(this,B,{value:k});Object.defineProperty(this,L,{value:N});Object.defineProperty(this,_,{value:w});Object.defineProperty(this,P,{value:I});Object.defineProperty(this,m,{value:C});Object.defineProperty(this,h,{value:F});Object.defineProperty(this,v,{writable:true,value:null});Object.defineProperty(this,u,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,u)[u]=(o=e==null?void 0:e.events)!=null?o:{};babelHelpers.classPrivateFieldLooseBase(this,H)[H]()}show(){if(babelHelpers.classPrivateFieldLooseBase(this,v)[v]===null){babelHelpers.classPrivateFieldLooseBase(this,v)[v]=babelHelpers.classPrivateFieldLooseBase(this,h)[h]()}babelHelpers.classPrivateFieldLooseBase(this,v)[v].show()}hide(){var e;(e=babelHelpers.classPrivateFieldLooseBase(this,v)[v])==null?void 0:e.close()}subscribe(e,o){if(babelHelpers.classPrivateFieldLooseBase(this,v)[v]===null){babelHelpers.classPrivateFieldLooseBase(this,v)[v]=babelHelpers.classPrivateFieldLooseBase(this,h)[h]()}babelHelpers.classPrivateFieldLooseBase(this,v)[v].subscribe(e,o)}shouldShowAgain(){const e=document.getElementById("crm__ai-recognition-promo_checkbox_dont_show_again");return e?!e.checked:true}}function F(){return new t.Popup({content:babelHelpers.classPrivateFieldLooseBase(this,m)[m](),padding:0,width:528,noAllPaddings:true,overlay:{backgroundColor:"#000",opacity:40},cacheable:false,borderRadius:16,background:"transparent",contentBackground:"transparent",animation:"fading-slide",events:{onPopupShow:()=>{if(babelHelpers.classPrivateFieldLooseBase(this,u)[u].onShow){babelHelpers.classPrivateFieldLooseBase(this,u)[u].onShow()}},onPopupClose:()=>{if(babelHelpers.classPrivateFieldLooseBase(this,u)[u].onHide){babelHelpers.classPrivateFieldLooseBase(this,u)[u].onHide()}babelHelpers.classPrivateFieldLooseBase(this,v)[v]=null}}})}function C(){return o.Tag.render(c||(c=n`
			<div class="crm__ai-recognition-promo">
				<header class="crm__ai-recognition-promo_header">
					<div class="crm__ai-recognition-promo_header-left">
						<div class="crm__ai-recognition-promo_header-icon">
							${0}
						</div>
						<h4 class="crm__ai-recognition-promo_header-title">
							${0}
						</h4>
					</div>
					<div class="crm__ai-recognition-promo_header-close-button">
						${0}
					</div>
				</header>
				<main class="crm__ai-recognition-promo_content">
					${0}
					${0}
				</main>
				<footer class="crm__ai-recognition-promo_footer">
					${0}
					${0}
				</footer>
				<div class="crm__ai-recognition-promo_checkbox_dont_show_again">
					<input type="checkbox" id="crm__ai-recognition-promo_checkbox_dont_show_again">
					<label>${0}</label>
				</div>
			</div>
		`),babelHelpers.classPrivateFieldLooseBase(this,P)[P](),o.Loc.getMessage("RECOGNITION_PROMO_TITLE"),babelHelpers.classPrivateFieldLooseBase(this,_)[_](),babelHelpers.classPrivateFieldLooseBase(this,L)[L](),babelHelpers.classPrivateFieldLooseBase(this,B)[B](),babelHelpers.classPrivateFieldLooseBase(this,f)[f](),babelHelpers.classPrivateFieldLooseBase(this,g)[g](),o.Loc.getMessage("RECOGNITION_PROMO_DONT_SHOW_AGAIN"))}function I(){var e;const o=new s.Icon({icon:s.Main.COPILOT_AI,size:40,color:(e=getComputedStyle(document.body).getPropertyValue("--ui-color-copilot-primary"))!=null?e:"#8E52EC"});return o.render()}function w(){const e=new s.Icon({icon:s.Actions.CROSS_40,size:24});const t=o.Tag.render(d||(d=n`
			<button class="crm__ai-recognition-promo_close-popup-button">
				${0}
			</button>
		`),e.render());o.bind(t,"click",(()=>{var e;if((e=babelHelpers.classPrivateFieldLooseBase(this,u)[u])!=null&&e.onClickOnClosePopup){babelHelpers.classPrivateFieldLooseBase(this,u)[u].onClickOnClosePopup()}{this.hide()}}));return t}function N(){const e=o.Tag.render(p||(p=n`
			<div class="crm__ai-recognition-promo_video-container">
				<canvas ref="canvas"></canvas>
				<div ref="lottie" class="crm__ai-recognition-promo_content-lottie"></div>
				<div ref="confetti" class="crm__ai-recognition-promo_content-confetti"></div>
			</div>
		`));const t=l.Lottie.loadAnimation({path:babelHelpers.classPrivateFieldLooseBase(this,y)[y](),container:e.lottie,renderer:"svg",loop:true,autoplay:true});t.setSpeed(.75);const i=l.Lottie.loadAnimation({path:"/bitrix/js/crm/ai/whatsnew/recognition-promo/lottie/confetti-animation.json",container:e.confetti,renderer:"svg",loop:true,autoplay:false});i.setSpeed(1.3);o.Dom.style(e.confetti,"opacity",0);o.bind(i,"loopComplete",(()=>{i.pause();o.Dom.style(e.confetti,"opacity",0)}));let s=false;o.bind(t,"loopComplete",(()=>{s=false;o.Dom.style(e.confetti,"opacity",0)}));o.bind(t,"enterFrame",(t=>{if(s===false&&t.currentTime>350){i.play();o.Dom.style(e.confetti,"opacity",1);s=true}}));o.bind(t,"enterFrame",(t=>{if(t.currentTime>350&&s===false){i.play();o.Dom.style(e.confetti,"opacity",1);s=true}}));return e.root}function k(){const e=o.Loc.getMessage("RECOGNITION_PROMO_CONTENT",{"[P]":"<p>","[/P]":"</p>","[LINK1]":'<a ref="link1">',"[/LINK1]":"</a>","[LINK2]":'<a ref="link2">',"[/LINK2]":"</a>"});const t=o.Tag.render(b||(b=n`
			<div class="crm__ai-recognition-promo_content-description">
				${0}
			</div>
		`),e);const i=o.Reflection.getClass("top.BX.Helper");o.bind(t.link1,"click",(()=>{const e="19092894";i==null?void 0:i.show(`redirect=detail&code=${e}`)}));o.bind(t.link2,"click",(()=>{const e="6450911";i==null?void 0:i.show(`redirect=detail&code=${e}`)}));return t.root}function T(){const e=new i.Button({color:i.ButtonColor.SUCCESS,text:o.Loc.getMessage("RECOGNITION_PROMO_CONNECT_TELEPHONY"),round:true,onclick:e=>{var o;if((o=babelHelpers.classPrivateFieldLooseBase(this,u)[u])!=null&&o.onClickOnConnectButton){babelHelpers.classPrivateFieldLooseBase(this,u)[u].onClickOnConnectButton(e)}}});return e.render()}function A(){const e=new i.Button({color:i.ButtonColor.LINK,text:o.Loc.getMessage("RECOGNITION_PROMO_REMIND_LATER"),round:true,onclick:e=>{var o;if((o=babelHelpers.classPrivateFieldLooseBase(this,u)[u])!=null&&o.onClickOnRemindLaterButton){babelHelpers.classPrivateFieldLooseBase(this,u)[u].onClickOnRemindLaterButton(e)}}});return e.render()}function R(){l.Lottie.loadAnimation({path:babelHelpers.classPrivateFieldLooseBase(this,y)[y](),renderer:"svg"})}function j(){return o.Loc.getMessage("LANGUAGE_ID")==="ru"?"/bitrix/js/crm/ai/whatsnew/recognition-promo/lottie/animation-ru.json":"/bitrix/js/crm/ai/whatsnew/recognition-promo/lottie/animation-en.json"}e.RecognitionPromo=O})(this.BX.Crm.AI.Whatsnew=this.BX.Crm.AI.Whatsnew||{},BX,BX.Main,BX.UI,BX.UI.IconSet,BX,BX,BX.UI);
//# sourceMappingURL=recognition-promo.bundle.map.js