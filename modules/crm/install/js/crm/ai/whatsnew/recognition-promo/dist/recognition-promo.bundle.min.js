this.BX=this.BX||{};this.BX.Crm=this.BX.Crm||{};this.BX.Crm.AI=this.BX.Crm.AI||{};(function(e,o,t,i,s,r,a,n){"use strict";let l=e=>e,c,d,p,b;var v=babelHelpers.classPrivateFieldLooseKey("popup");var u=babelHelpers.classPrivateFieldLooseKey("events");var h=babelHelpers.classPrivateFieldLooseKey("initPopup");var m=babelHelpers.classPrivateFieldLooseKey("renderPopupContent");var P=babelHelpers.classPrivateFieldLooseKey("renderHeaderCopilotIcon");var L=babelHelpers.classPrivateFieldLooseKey("renderHidePopupButton");var f=babelHelpers.classPrivateFieldLooseKey("renderLottieAnimation");var B=babelHelpers.classPrivateFieldLooseKey("renderContentText");var _=babelHelpers.classPrivateFieldLooseKey("renderConnectTelephonyButton");var y=babelHelpers.classPrivateFieldLooseKey("renderRemindLaterButton");var g=babelHelpers.classPrivateFieldLooseKey("preloadMainLottieAnimation");var H=babelHelpers.classPrivateFieldLooseKey("getMainAnimationPath");class F{constructor(e){var o;Object.defineProperty(this,H,{value:k});Object.defineProperty(this,g,{value:R});Object.defineProperty(this,y,{value:K});Object.defineProperty(this,_,{value:j});Object.defineProperty(this,B,{value:T});Object.defineProperty(this,f,{value:N});Object.defineProperty(this,L,{value:w});Object.defineProperty(this,P,{value:I});Object.defineProperty(this,m,{value:C});Object.defineProperty(this,h,{value:O});Object.defineProperty(this,v,{writable:true,value:null});Object.defineProperty(this,u,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,u)[u]=(o=e==null?void 0:e.events)!=null?o:{};babelHelpers.classPrivateFieldLooseBase(this,g)[g]()}show(){if(babelHelpers.classPrivateFieldLooseBase(this,v)[v]===null){babelHelpers.classPrivateFieldLooseBase(this,v)[v]=babelHelpers.classPrivateFieldLooseBase(this,h)[h]()}babelHelpers.classPrivateFieldLooseBase(this,v)[v].show()}hide(){var e;(e=babelHelpers.classPrivateFieldLooseBase(this,v)[v])==null?void 0:e.close()}}function O(){return new t.Popup({content:babelHelpers.classPrivateFieldLooseBase(this,m)[m](),padding:0,width:556,noAllPaddings:true,overlay:{backgroundColor:"#000",opacity:40},cacheable:false,borderRadius:16,background:"transparent",contentBackground:"transparent",animation:"fading-slide",events:{onPopupShow:()=>{if(babelHelpers.classPrivateFieldLooseBase(this,u)[u].onShow){babelHelpers.classPrivateFieldLooseBase(this,u)[u].onShow()}},onPopupClose:()=>{if(babelHelpers.classPrivateFieldLooseBase(this,u)[u].onHide){babelHelpers.classPrivateFieldLooseBase(this,u)[u].onHide()}babelHelpers.classPrivateFieldLooseBase(this,v)[v]=null}}})}function C(){return o.Tag.render(c||(c=l`
			<div class="crm__ai-recognition-promo">
				<div class="crm__ai-recognition-promo_inner">
					<header class="crm__ai-recognition-promo_header">
						<div class="crm__ai-recognition-promo_header-left">
							<div class="crm__ai-recognition-promo_header-icon">
								${0}
							</div>
							<h4 class="crm__ai-recognition-promo_header-title">
								${0}
							</h4>
						</div>
						${0}
					</header>
					<main class="crm__ai-recognition-promo_content">
						${0}
						${0}
					</main>
					<footer class="crm__ai-recognition-promo_footer">
						${0}
						${0}
					</footer>
				</div>
			</div>
		`),babelHelpers.classPrivateFieldLooseBase(this,P)[P](),o.Loc.getMessage("RECOGNITION_PROMO_TITLE"),babelHelpers.classPrivateFieldLooseBase(this,L)[L](),babelHelpers.classPrivateFieldLooseBase(this,f)[f](),babelHelpers.classPrivateFieldLooseBase(this,B)[B](),babelHelpers.classPrivateFieldLooseBase(this,_)[_](),babelHelpers.classPrivateFieldLooseBase(this,y)[y]())}function I(){var e;const o=new s.Icon({icon:s.Main.COPILOT_AI,size:40,color:(e=getComputedStyle(document.body).getPropertyValue("--ui-color-copilot-primary"))!=null?e:"#8E52EC"});return o.render()}function w(){const e=new s.Icon({icon:s.Actions.CROSS_40,size:24});const t=o.Tag.render(d||(d=l`
			<button class="crm__ai-recognition-promo_close-popup-button">
				${0}
			</button>
		`),e.render());o.bind(t,"click",(()=>{this.hide()}));return t}function N(){const e=o.Tag.render(p||(p=l`
			<div class="crm__ai-recognition-promo_video-container">
				<canvas ref="canvas"></canvas>
				<div ref="lottie" class="crm__ai-recognition-promo_content-lottie"></div>
				<div ref="confetti" class="crm__ai-recognition-promo_content-confetti"></div>
			</div>
		`));const t=n.Lottie.loadAnimation({path:babelHelpers.classPrivateFieldLooseBase(this,H)[H](),container:e.lottie,renderer:"svg",loop:true,autoplay:true});t.setSpeed(.75);const i=n.Lottie.loadAnimation({path:"/bitrix/js/crm/ai/whatsnew/recognition-promo/lottie/confetti-animation.json",container:e.confetti,renderer:"svg",loop:true,autoplay:false});i.setSpeed(1.3);o.Dom.style(e.confetti,"opacity",0);o.bind(i,"loopComplete",(()=>{i.pause();o.Dom.style(e.confetti,"opacity",0)}));let s=false;o.bind(t,"loopComplete",(()=>{s=false;o.Dom.style(e.confetti,"opacity",0)}));o.bind(t,"enterFrame",(t=>{if(s===false&&t.currentTime>200){i.play();o.Dom.style(e.confetti,"opacity",1);s=true}}));o.bind(t,"enterFrame",(t=>{if(t.currentTime>250&&s===false){i.play();o.Dom.style(e.confetti,"opacity",1);s=true}}));return e.root}function T(){const e=o.Loc.getMessage("RECOGNITION_PROMO_CONTENT",{"[P]":"<p>","[/P]":"</p>","[LINK1]":'<a ref="link1" href="#">',"[/LINK1]":"</a>","[LINK2]":'<a ref="link2" href="#">',"[/LINK2]":"</a>"});const t=o.Tag.render(b||(b=l`
			<div class="crm__ai-recognition-promo_content-description">
				${0}
			</div>
		`),e);const i=o.Reflection.getClass("top.BX.Helper");o.bind(t.link1,"click",(()=>{const e="19092894";i==null?void 0:i.show(`redirect=detail&code=${e}`)}));o.bind(t.link2,"click",(()=>{const e="19092894";i==null?void 0:i.show(`redirect=detail&code=${e}`)}));return t.root}function j(){const e=new i.Button({color:i.ButtonColor.SUCCESS,text:o.Loc.getMessage("RECOGNITION_PROMO_CONNECT_TELEPHONY"),round:true,onclick:e=>{var o;if((o=babelHelpers.classPrivateFieldLooseBase(this,u)[u])!=null&&o.onClickOnConnectButton){babelHelpers.classPrivateFieldLooseBase(this,u)[u].onClickOnConnectButton(e)}}});return e.render()}function K(){const e=new i.Button({color:i.ButtonColor.LINK,text:o.Loc.getMessage("RECOGNITION_PROMO_REMIND_LATER"),round:true,onclick:e=>{var o;if((o=babelHelpers.classPrivateFieldLooseBase(this,u)[u])!=null&&o.onClickOnRemindLaterButton){babelHelpers.classPrivateFieldLooseBase(this,u)[u].onClickOnRemindLaterButton(e)}}});return e.render()}function R(){n.Lottie.loadAnimation({path:babelHelpers.classPrivateFieldLooseBase(this,H)[H](),renderer:"svg"})}function k(){return o.Loc.getMessage("LANGUAGE_ID")==="ru"?"/bitrix/js/crm/ai/whatsnew/recognition-promo/lottie/animation-ru.json":"/bitrix/js/crm/ai/whatsnew/recognition-promo/lottie/animation-en.json"}e.RecognitionPromo=F})(this.BX.Crm.AI.Whatsnew=this.BX.Crm.AI.Whatsnew||{},BX,BX.Main,BX.UI,BX.UI.IconSet,BX,BX,BX.UI);
//# sourceMappingURL=recognition-promo.bundle.map.js