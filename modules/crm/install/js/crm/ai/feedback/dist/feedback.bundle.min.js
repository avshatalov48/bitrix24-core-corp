this.BX=this.BX||{};this.BX.Crm=this.BX.Crm||{};this.BX.Crm.AI=this.BX.Crm.AI||{};(function(e,t,n,a,s){"use strict";function i(e,t,n){return c(e).then((a=>{if(!a){return r(e,t,n)}return Promise.resolve()}))}function c(e){return new Promise(((t,a)=>{n.ajax.runAction("crm.timeline.ai.wasFeedbackSent",{data:{mergeUuid:e}}).then((({data:e})=>{if(n.Type.isBoolean(e)){t(e)}else{t(false)}})).catch(((...e)=>a(...e)))}))}function o(e,s,i){n.ajax.runAction("crm.timeline.ai.sendFeedback",{data:{mergeUuid:e}}).then((()=>{a.sendData(t.Builder.AI.CallParsingEvent.createDefault(s,i,t.Dictionary.STATUS_SUCCESS).setElement(t.Dictionary.ELEMENT_FEEDBACK_SEND).buildData())})).catch((({errors:e})=>console.error("Error sending feedback",e)))}function r(e,n,s){return new Promise((i=>{const c=d({onOk:()=>{o(e,n,s);c.close();i()},onCancel:()=>{c.close();a.sendData(t.Builder.AI.CallParsingEvent.createDefault(n,s,t.Dictionary.STATUS_SUCCESS).setElement(t.Dictionary.ELEMENT_FEEDBACK_REFUSED).buildData());i()}});c.show()}))}function d(e){const t=`\n\t\t<div class="bx-crm-ai-feedback-popup-content">\n\t\t\t<div class="bx-crm-ai-feedback-popup-content__icon"></div>\n\t\t\t<div class="bx-crm-ai-feedback-popup-content__text">\n\t\t\t\t${n.Loc.getMessage("CRM_AI_FEEDBACK_POPUP_TEXT")}\n\t\t\t</div>\n\t\t</div>\n\t`;return s.MessageBox.create({title:n.Loc.getMessage("CRM_AI_FEEDBACK_POPUP_TITLE"),message:t,okCaption:n.Loc.getMessage("CRM_AI_FEEDBACK_POPUP_BUTTON_SHARE"),cancelCaption:n.Loc.getMessage("CRM_AI_FEEDBACK_POPUP_BUTTON_ANOTHER_TIME"),buttons:BX.UI.Dialogs.MessageBoxButtons.OK_CANCEL,...e})}e.showSendFeedbackPopupIfFeedbackWasNeverSent=i;e.wasFeedbackSent=c;e.sendFeedback=o;e.showSendFeedbackPopup=r;e.createFeedbackMessageBox=d})(this.BX.Crm.AI.Feedback=this.BX.Crm.AI.Feedback||{},BX.Crm.Integration.Analytics,BX,BX.UI.Analytics,BX.UI.Dialogs);
//# sourceMappingURL=feedback.bundle.map.js