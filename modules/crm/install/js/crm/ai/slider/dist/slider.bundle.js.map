{"version":3,"file":"slider.bundle.js","sources":["../src/slider.js"],"sourcesContent":["import { Loc, Type } from 'main.core';\nimport { SidePanel } from 'ui.sidepanel';\nimport { Layout } from 'ui.sidepanel.layout';\nimport { Button } from 'ui.buttons';\n\nimport './style.css';\n\nexport class Slider\n{\n\tDEFAULT_OPTIONS = {\n\t\ttitle: Loc.getMessage('CRM_COMMON_COPILOT'),\n\t\tallowChangeTitle: false,\n\t\tallowChangeHistory: false,\n\t\tcacheable: false,\n\t\ttoolbar: this.getDefaultToolbarButtons,\n\t\tbuttons: [],\n\t\twidth: 795,\n\t\textensions: [],\n\t\tevents: {},\n\t\tlabel: {},\n\t};\n\n\tisOpen = false;\n\n\tconstructor(options): void\n\t{\n\t\tthis.initOptions(options);\n\t}\n\n\tinitOptions(options): void\n\t{\n\t\tthis.title = (Type.isString(options.title)) ? options.title : this.DEFAULT_OPTIONS.title;\n\t\tthis.sliderTitle = (Type.isString(options.sliderTitle)) ? options.sliderTitle : this.DEFAULT_OPTIONS.title;\n\t\tthis.toolbar = (Type.isFunction(options.toolbar)) ? options.toolbar : this.DEFAULT_OPTIONS.toolbar;\n\t\tthis.buttons = Type.isFunction(options.buttons) ? options.buttons : this.DEFAULT_OPTIONS.buttons;\n\t\tthis.cacheable = (Type.isBoolean(options.cacheable)) ? options.cacheable : this.DEFAULT_OPTIONS.cacheable;\n\t\tthis.width = Type.isInteger(options.width) ? options.width : this.DEFAULT_OPTIONS.width;\n\t\tthis.label = Type.isPlainObject(options.label) ? options.label : this.DEFAULT_OPTIONS.label;\n\t\tthis.extensions = Type.isArray(options.extensions) ? options.extensions : this.DEFAULT_OPTIONS.extensions;\n\t\tthis.events = Type.isPlainObject(options.events) ? options.events : this.DEFAULT_OPTIONS.events;\n\n\t\t// Need to buttons to always be transparent-white when enable DependOnTheme in Button\n\t\tthis.enableLightThemeIntoSlider = Type.isBoolean(options.enableLightThemeIntoSlider)\n\t\t\t? options.enableLightThemeIntoSlider\n\t\t\t: true\n\t\t;\n\n\t\tthis.allowChangeTitle = (Type.isBoolean(options.allowChangeTitle))\n\t\t\t? options.allowChangeTitle\n\t\t\t: this.DEFAULT_OPTIONS.allowChangeTitle\n\t\t;\n\t\tthis.allowChangeHistory = (Type.isBoolean(options.allowChangeHistory))\n\t\t\t? options.allowChangeHistory\n\t\t\t: this.DEFAULT_OPTIONS.allowChangeHistory\n\t\t;\n\n\t\tthis.setContent(options.content);\n\t\tthis.url = Type.isString(options.url) ? options.url : this.getDefaultUrl();\n\t}\n\n\tsetContent(content): void\n\t{\n\t\tif (!Type.isFunction(content))\n\t\t{\n\t\t\tthis.content = () => {\n\t\t\t\treturn content;\n\t\t\t};\n\n\t\t\treturn;\n\t\t}\n\n\t\tthis.content = content;\n\t}\n\n\topen(): Boolean\n\t{\n\t\tthis.isOpen = SidePanel.Instance.open(this.url, this.getSliderOptions());\n\n\t\treturn this.isOpen;\n\t}\n\n\tclose(): void\n\t{\n\t\tif (!this.isOpen)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tSidePanel.Instance.close();\n\t}\n\n\tdestroy(): void\n\t{\n\t\tSidePanel.Instance.destroy(this.url);\n\t}\n\n\tgetDefaultUrl(): String\n\t{\n\t\treturn 'crm.copilot-wrapper';\n\t}\n\n\tgetSliderOptions(): Object\n\t{\n\t\treturn {\n\t\t\tcontentClassName: this.getSliderContentClassName(),\n\t\t\ttitle: this.title,\n\t\t\tallowChangeTitle: this.allowChangeTitle,\n\t\t\twidth: this.width,\n\t\t\tcacheable: this.cacheable,\n\t\t\tallowChangeHistory: this.allowChangeHistory,\n\t\t\tlabel: this.label,\n\t\t\tcontentCallback: (slider) => {\n\t\t\t\treturn Layout.createContent({\n\t\t\t\t\ttitle: this.sliderTitle,\n\t\t\t\t\ttoolbar: this.toolbar,\n\t\t\t\t\tcontent: this.content,\n\t\t\t\t\tbuttons: this.buttons,\n\t\t\t\t\tdesign: { section: false },\n\t\t\t\t\textensions: ['crm.ai.slider', ...this.extensions],\n\t\t\t\t});\n\t\t\t},\n\t\t\tevents: this.events,\n\t\t};\n\t}\n\n\tgetSliderContentClassName(): String\n\t{\n\t\tlet className = 'crm-copilot-wrapper';\n\n\t\tif (this.enableLightThemeIntoSlider)\n\t\t{\n\t\t\tclassName += ' bitrix24-light-theme';\n\t\t}\n\n\t\treturn className;\n\t}\n\n\tgetDefaultToolbarButtons(): Array\n\t{\n\t\treturn Slider.makeDefaultToolbarButtons();\n\t}\n\n\tstatic makeDefaultToolbarButtons(): Array\n\t{\n\t\tconst helpdeskCode = '18799442';\n\t\tconst helpButton = new Button({\n\t\t\ttext: Loc.getMessage('CRM_COPILOT_WRAPPER_HELP_BUTTON_TITLE'),\n\t\t\tsize: Button.Size.MEDIUM,\n\t\t\tcolor: Button.Color.LIGHT_BORDER,\n\t\t\tdependOnTheme: true,\n\t\t\tonclick: () => {\n\t\t\t\tif (top.BX.Helper)\n\t\t\t\t{\n\t\t\t\t\ttop.BX.Helper.show(`redirect=detail&code=${helpdeskCode}`);\n\t\t\t\t}\n\t\t\t},\n\t\t});\n\n\t\treturn [helpButton];\n\t}\n}\n"],"names":["Slider","options","title","Loc","getMessage","allowChangeTitle","allowChangeHistory","cacheable","toolbar","getDefaultToolbarButtons","buttons","width","extensions","events","label","initOptions","Type","isString","DEFAULT_OPTIONS","sliderTitle","isFunction","isBoolean","isInteger","isPlainObject","isArray","enableLightThemeIntoSlider","setContent","content","url","getDefaultUrl","isOpen","SidePanel","Instance","open","getSliderOptions","close","destroy","contentClassName","getSliderContentClassName","contentCallback","slider","Layout","createContent","design","section","className","makeDefaultToolbarButtons","helpdeskCode","helpButton","Button","text","size","Size","MEDIUM","color","Color","LIGHT_BORDER","dependOnTheme","onclick","top","BX","Helper","show"],"mappings":"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"}