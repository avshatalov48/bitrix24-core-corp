this.BX=this.BX||{};this.BX.Crm=this.BX.Crm||{};(function(e,t,a){"use strict";var i,l,r,n;function s(e,t){o(e,t);t.add(e)}function o(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function c(e,t,a){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return a}var p={DEFAULT:{className:"--crm-textbox-attention-default",iconOptions:{icon:a.Set.INFO_1,color:"#BDC1C6",size:16}},COPILOT:{className:"--crm-textbox-attention-copilot",iconOptions:{icon:a.Set.EARTH,color:"#B6AAC8",size:16}}};var d=new WeakSet;var b=new WeakSet;var v=function(){function e(t){var a;babelHelpers.classCallCheck(this,e);s(this,b);s(this,d);this.setContent(t.content);this.setPreset((a=t.preset)!==null&&a!==void 0?a:p.DEFAULT)}babelHelpers.createClass(e,[{key:"setContent",value:function e(a){if(t.Type.isElementNode(a)){this.content=a;return}this.content=t.Tag.render(i||(i=babelHelpers.taggedTemplateLiteral(["<span>","</span>"])),a)}},{key:"setPreset",value:function e(t){this.preset=t}},{key:"render",value:function e(){this.getContainer().innerHTML="";t.Dom.append(c(this,d,h).call(this),this.getContainer());t.Dom.append(c(this,b,u).call(this),this.getContainer());return this.getContainer()}},{key:"getContainer",value:function e(){if(!this.container){this.container=t.Tag.render(l||(l=babelHelpers.taggedTemplateLiteral(['<div class="crm-textbox-attention ','"></div>'])),this.preset.className)}return this.container}}]);return e}();function h(){var e=t.Tag.render(r||(r=babelHelpers.taggedTemplateLiteral(['<span class="crm-textbox-attention__icon"></span>'])));var i=new a.Icon(this.preset.iconOptions);t.Dom.append(i.render(),e);return e}function u(){var e=t.Tag.render(n||(n=babelHelpers.taggedTemplateLiteral(['<span class="crm-textbox-attention__content"></span>'])));t.Dom.append(this.content,e);return e}var m,g,x,T,f,H,w,C,_,P,D,F,y,k,S;function L(e,t){E(e,t);t.add(e)}function G(e,t,a){E(e,t);t.set(e,a)}function E(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function W(e,t,a){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return a}var I="crm-copilot-text-container";var M="ui-ctl-icon-search";var B="ui-ctl-icon-clear";var A="28px";var O=new WeakMap;var X=new WeakMap;var N=new WeakMap;var R=new WeakMap;var q=new WeakMap;var z=new WeakMap;var U=new WeakMap;var j=new WeakMap;var $=new WeakMap;var J=new WeakSet;var K=new WeakSet;var Q=new WeakSet;var V=new WeakSet;var Y=new WeakSet;var Z=new WeakSet;var ee=new WeakSet;var te=new WeakSet;var ae=new WeakSet;var ie=new WeakSet;var le=function(){function e(){var a;var i=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};babelHelpers.classCallCheck(this,e);L(this,ie);L(this,ae);L(this,te);L(this,ee);L(this,Z);L(this,Y);L(this,V);L(this,Q);L(this,K);L(this,J);G(this,O,{writable:true,value:void 0});G(this,X,{writable:true,value:void 0});G(this,N,{writable:true,value:void 0});G(this,R,{writable:true,value:void 0});G(this,q,{writable:true,value:void 0});G(this,z,{writable:true,value:void 0});G(this,U,{writable:true,value:null});G(this,j,{writable:true,value:null});G(this,$,{writable:true,value:{searchIcon:"--search-1",clearIcon:"--cross-30",arrowTopIcon:"--chevron-up",arrowDownIcon:"--chevron-down",bodyExpanded:"--body-expanded",nodeHidden:"--hidden"}});this.setText(i.text);babelHelpers.classPrivateFieldSet(this,O,"crm-copilot-textbox-container-".concat(t.Text.getRandom(8)));babelHelpers.classPrivateFieldSet(this,N,t.Type.isString(i.title)?i.title:"");babelHelpers.classPrivateFieldSet(this,R,t.Type.isBoolean(i.enableSearch)?i.enableSearch:true);babelHelpers.classPrivateFieldSet(this,q,t.Type.isBoolean(i.enableCollapse)?i.enableCollapse:false);babelHelpers.classPrivateFieldSet(this,z,t.Type.isBoolean(i.isCollapsed)?i.isCollapsed:false);babelHelpers.classPrivateFieldSet(this,U,t.Type.isElementNode(i.previousTextContent)?i.previousTextContent:null);babelHelpers.classPrivateFieldSet(this,j,(a=i.attentions)!==null&&a!==void 0?a:[])}babelHelpers.createClass(e,[{key:"setText",value:function e(a){babelHelpers.classPrivateFieldSet(this,X,t.Type.isString(a)?W(this,J,re).call(this,a):"")}},{key:"render",value:function e(){this.rootContainer=t.Tag.render(m||(m=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div \n\t\t\t\tid="','" \n\t\t\t\tclass="crm-copilot-textbox"\n\t\t\t></div>\n\t\t'])),babelHelpers.classPrivateFieldGet(this,O));if(babelHelpers.classPrivateFieldGet(this,z)){t.Dom.style(this.rootContainer,"padding-bottom",0)}else{t.Dom.style(this.rootContainer,"padding-bottom",A)}var a=t.Tag.render(g||(g=babelHelpers.taggedTemplateLiteral(['<div class="crm-copilot-textbox__wrapper '," ",'"></div>'])),babelHelpers.classPrivateFieldGet(this,z)?"":babelHelpers.classPrivateFieldGet(this,$).bodyExpanded,babelHelpers.classPrivateFieldGet(this,q)?"clickable":"");t.Dom.append(W(this,K,ne).call(this),a);t.Dom.append(W(this,Q,se).call(this),a);t.Dom.append(a,this.rootContainer)}},{key:"get",value:function e(){return this.rootContainer}}]);return e}();function re(e){return e.replaceAll(/\r?\n/g,"<br>")}function ne(){var e=this;var a=babelHelpers.classPrivateFieldGet(this,q)?t.Tag.render(x||(x=babelHelpers.taggedTemplateLiteral(['<div class="crm-copilot-textbox__collapse-icon clickable ui-icon-set ','"></div>'])),babelHelpers.classPrivateFieldGet(this,z)?babelHelpers.classPrivateFieldGet(this,$).arrowDownIcon:babelHelpers.classPrivateFieldGet(this,$).arrowTopIcon):"";t.Event.bind(a,"click",(function(){return W(e,ie,he).call(e)}));return t.Tag.render(T||(T=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="crm-copilot-textbox__header">\n\t\t\t\t<div class="crm-copilot-textbox__title">','</div>\n\t\t\t\t<div class="crm-copilot-textbox__title-icon-container">\n\t\t\t\t\t',"\n\t\t\t\t\t","\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t"])),t.Text.encode(babelHelpers.classPrivateFieldGet(this,N)),W(this,Z,pe).call(this),a)}function se(){var e=t.Tag.render(f||(f=babelHelpers.taggedTemplateLiteral(['<div class="crm-copilot-textbox__body-container"></div>'])));t.Dom.append(t.Tag.render(H||(H=babelHelpers.taggedTemplateLiteral(['<div class="crm-copilot-textbox__previous-text">',"</div>"])),babelHelpers.classPrivateFieldGet(this,U)),e);t.Dom.append(W(this,V,oe).call(this),e);t.Dom.append(W(this,ee,de).call(this),e);return t.Tag.render(w||(w=babelHelpers.taggedTemplateLiteral(['<div class="crm-copilot-textbox__body">',"</div>"])),e)}function oe(){var e=t.Tag.render(C||(C=babelHelpers.taggedTemplateLiteral(['<div class="crm-copilot-textbox__content"></div>'])));var a=W(this,Y,ce).call(this);t.Event.bind(a,"beforeinput",(function(e){e.preventDefault()}));t.Dom.append(a,e);return e}function ce(){if(this.textContainer){return this.textContainer}this.textContainer=t.Tag.render(_||(_=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div \n\t\t\t\tid="','" \n\t\t\t\tclass="crm-copilot-textbox__text-container" \n\t\t\t\tcontenteditable="true" \n\t\t\t\tspellcheck="false"\n\t\t\t>\n\t\t\t\t',"\n\t\t\t</div>\n\t\t"])),I,babelHelpers.classPrivateFieldGet(this,X));return this.textContainer}function pe(){var e=this;if(!babelHelpers.classPrivateFieldGet(this,R)){return t.Tag.render(P||(P=babelHelpers.taggedTemplateLiteral([""])))}var a=t.Tag.render(D||(D=babelHelpers.taggedTemplateLiteral(['<div class="ui-ctl ui-ctl-after-icon ui-ctl-no-border crm-copilot-textbox__search ','"></div>'])),babelHelpers.classPrivateFieldGet(this,z)?"--hidden":"");var i=t.Tag.render(F||(F=babelHelpers.taggedTemplateLiteral(['<a class="ui-ctl-after ',' crm-copilot-textbox__search-btn"></a>'])),M);var l=t.Tag.render(y||(y=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<input \n\t\t\t\ttype="text" \n\t\t\t\tplaceholder="','" \n\t\t\t\tclass="ui-ctl-element ui-ctl-textbox crm-copilot-textbox__search-input"\n\t\t\t>\n\t\t'])),t.Text.encode(t.Loc.getMessage("CRM_COPILOT_TEXTBOX_SEARCH_PLACEHOLDER")));l.oninput=function(){W(e,te,be).call(e);var t=l.value;if(!t){W(e,ae,ve).call(e,i,B,M);return}W(e,ae,ve).call(e,i,M,B);var a=new RegExp("((?<!<[^>]*?)(".concat(t,")(?![^<]*?>))"),"gi");var r=W(e,Y,ce).call(e);r.innerHTML=r.innerHTML.replace(a,'<span class="search-item">$&</span>')};var r=false;l.onblur=function(){if(l.value.length===0){t.Dom.removeClass(a,"with-input-node");t.Dom.remove(l);r=false}};i.onclick=function(){if(a.contains(l)){if(l.value.length>0){l.value="";W(e,ae,ve).call(e,i,B,M);W(e,te,be).call(e)}r=true;l.focus();return}t.Dom.append(l,a);t.Dom.addClass(a,["with-input-node"]);r=true;l.focus()};i.onmousedown=function(e){if(r){e.preventDefault()}};t.Dom.append(i,a);return a}function de(){if(!t.Type.isArrayFilled(babelHelpers.classPrivateFieldGet(this,j))){return t.Tag.render(k||(k=babelHelpers.taggedTemplateLiteral([""])))}var e=t.Tag.render(S||(S=babelHelpers.taggedTemplateLiteral(['<div class="crm-copilot-textbox__attentions"></div>'])));babelHelpers.classPrivateFieldGet(this,j).forEach((function(a){return t.Dom.append(a.render(),e)}));return e}function be(){W(this,Y,ce).call(this).innerHTML=babelHelpers.classPrivateFieldGet(this,X)}function ve(e,a,i){if(t.Dom.hasClass(e,a)&&!t.Dom.hasClass(e,i)){t.Dom.addClass(e,i);t.Dom.removeClass(e,a)}}function he(){babelHelpers.classPrivateFieldSet(this,z,!babelHelpers.classPrivateFieldGet(this,z));var e=this.get();var a=e.querySelector(".crm-copilot-textbox__wrapper");var i=e.querySelector(".crm-copilot-textbox__collapse-icon");var l=e.querySelector(".crm-copilot-textbox__body");var r=e.querySelector(".crm-copilot-textbox__search");t.Dom.removeClass(l,"body-toggle-animation");t.Dom.addClass(l,"body-toggle-animation");if(babelHelpers.classPrivateFieldGet(this,z)){t.Dom.style(e,"padding-bottom",0);t.Dom.removeClass(a,babelHelpers.classPrivateFieldGet(this,$).bodyExpanded);t.Dom.addClass(r,babelHelpers.classPrivateFieldGet(this,$).nodeHidden);W(this,ae,ve).call(this,i,babelHelpers.classPrivateFieldGet(this,$).arrowTopIcon,babelHelpers.classPrivateFieldGet(this,$).arrowDownIcon)}else{t.Dom.style(e,"padding-bottom",A);t.Dom.addClass(a,babelHelpers.classPrivateFieldGet(this,$).bodyExpanded);t.Dom.removeClass(r,babelHelpers.classPrivateFieldGet(this,$).nodeHidden);W(this,ae,ve).call(this,i,babelHelpers.classPrivateFieldGet(this,$).arrowDownIcon,babelHelpers.classPrivateFieldGet(this,$).arrowTopIcon)}}e.Textbox=le;e.Attention=v;e.AttentionPresets=p})(this.BX.Crm.AI=this.BX.Crm.AI||{},BX,BX.UI.IconSet);
//# sourceMappingURL=textbox.bundle.map.js