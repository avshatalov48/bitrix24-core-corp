{"version":3,"file":"textbox.bundle.js","sources":["../src/attention.js","../src/textbox.js"],"sourcesContent":["import { Tag, Type, Dom } from 'main.core';\nimport { Icon, Set } from 'ui.icon-set.api.core';\n\ndeclare type AttentionPreset = {\n\tclassName: string,\n\ticonOptions: {\n\t\ticon: string,\n\t\tcolor ?: string,\n\t\tsize ?: number,\n\t},\n};\n\nexport const AttentionPresets = {\n\tDEFAULT: {\n\t\tclassName: '--crm-textbox-attention-default',\n\t\ticonOptions: {\n\t\t\ticon: Set.INFO_1,\n\t\t\tcolor: '#BDC1C6',\n\t\t\tsize: 16,\n\t\t},\n\t},\n\tCOPILOT: {\n\t\tclassName: '--crm-textbox-attention-copilot',\n\t\ticonOptions: {\n\t\t\ticon: Set.EARTH,\n\t\t\tcolor: '#B6AAC8',\n\t\t\tsize: 16,\n\t\t},\n\t},\n};\n\ndeclare type AttentionOptions = {\n\tcontent: HTMLElement | string,\n\tpreset ?: AttentionPreset,\n};\n\nexport class Attention\n{\n\tcontent: HTMLElement | string;\n\tpreset: AttentionPreset;\n\n\tconstructor(options: AttentionOptions)\n\t{\n\t\tthis.setContent(options.content);\n\t\tthis.setPreset(options.preset ?? AttentionPresets.DEFAULT);\n\t}\n\n\tsetContent(content: HTMLElement | string): void\n\t{\n\t\tif (Type.isElementNode(content))\n\t\t{\n\t\t\tthis.content = content;\n\n\t\t\treturn;\n\t\t}\n\n\t\tthis.content = Tag.render`<span>${content}</span>`;\n\t}\n\n\tsetPreset(preset: AttentionPreset): void\n\t{\n\t\tthis.preset = preset;\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tthis.getContainer().innerHTML = '';\n\n\t\tDom.append(this.#getIconNode(), this.getContainer());\n\t\tDom.append(this.#getContentNode(), this.getContainer());\n\n\t\treturn this.getContainer();\n\t}\n\n\tgetContainer(): HTMLElement\n\t{\n\t\tif (!this.container)\n\t\t{\n\t\t\tthis.container = Tag.render`<div class=\"crm-textbox-attention ${this.preset.className}\"></div>`;\n\t\t}\n\n\t\treturn this.container;\n\t}\n\n\t#getIconNode(): HTMLElement\n\t{\n\t\tconst iconNode = Tag.render`<span class=\"crm-textbox-attention__icon\"></span>`;\n\t\tconst icon = new Icon(this.preset.iconOptions);\n\n\t\tDom.append(icon.render(), iconNode);\n\n\t\treturn iconNode;\n\t}\n\n\t#getContentNode(): HTMLElement\n\t{\n\t\tconst contentNode = Tag.render`<span class=\"crm-textbox-attention__content\"></span>`;\n\t\tDom.append(this.content, contentNode);\n\n\t\treturn contentNode;\n\t}\n}\n","import { Dom, Event, Loc, Tag, Text, Type } from 'main.core';\n\nimport type { TextboxOptions } from './textbox-options';\nimport { Attention, AttentionPresets } from './attention';\n\nimport 'ui.design-tokens';\nimport 'ui.fonts.opensans';\n\nimport './style.css';\n\nconst ID_TEXT_CONTAINER = 'crm-copilot-text-container';\n\nconst CLASS_SEARCH_ICON = 'ui-ctl-icon-search';\nconst CLASS_CLEAR_ICON = 'ui-ctl-icon-clear';\nconst ROOT_CONTAINER_BOTTOM_PADDING = '28px';\n\nexport class Textbox\n{\n\t#id: string;\n\t#text: string;\n\t#title: string;\n\t#enableSearch: boolean;\n\t#enableCollapse: boolean;\n\t#isCollapsed: boolean;\n\t#previousTextContent: HTMLElement = null;\n\t#attentions: Object = null;\n\n\t#className = {\n\t\tsearchIcon: '--search-1',\n\t\tclearIcon: '--cross-30',\n\t\tarrowTopIcon: '--chevron-up',\n\t\tarrowDownIcon: '--chevron-down',\n\t\tbodyExpanded: '--body-expanded',\n\t\tnodeHidden: '--hidden',\n\t};\n\n\tconstructor(options: TextboxOptions = {}): void\n\t{\n\t\tthis.setText(options.text);\n\n\t\tthis.#id = `crm-copilot-textbox-container-${Text.getRandom(8)}`;\n\t\tthis.#title = (Type.isString(options.title)) ? options.title : '';\n\t\tthis.#enableSearch = Type.isBoolean(options.enableSearch) ? options.enableSearch : true;\n\t\tthis.#enableCollapse = Type.isBoolean(options.enableCollapse) ? options.enableCollapse : false;\n\t\tthis.#isCollapsed = Type.isBoolean(options.isCollapsed) ? options.isCollapsed : false;\n\t\tthis.#previousTextContent = Type.isElementNode(options.previousTextContent) ? options.previousTextContent : null;\n\t\tthis.#attentions = options.attentions ?? [];\n\t}\n\n\tsetText(text): void\n\t{\n\t\tthis.#text = (Type.isString(text)) ? this.#prepareText(text) : '';\n\t}\n\n\trender(): void\n\t{\n\t\tthis.rootContainer = Tag.render`\n\t\t\t<div \n\t\t\t\tid=\"${this.#id}\" \n\t\t\t\tclass=\"crm-copilot-textbox\"\n\t\t\t></div>\n\t\t`;\n\n\t\tif (this.#isCollapsed)\n\t\t{\n\t\t\tDom.style(this.rootContainer, 'padding-bottom', 0);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.style(this.rootContainer, 'padding-bottom', ROOT_CONTAINER_BOTTOM_PADDING);\n\t\t}\n\n\t\tconst sectionWrapper = Tag.render`<div class=\"crm-copilot-textbox__wrapper ${this.#isCollapsed ? '' : this.#className.bodyExpanded} ${this.#enableCollapse ? 'clickable' : ''}\"></div>`;\n\n\t\tDom.append(this.#getHeaderContainer(), sectionWrapper);\n\t\tDom.append(this.#getBodyContainer(), sectionWrapper);\n\t\tDom.append(sectionWrapper, this.rootContainer);\n\t}\n\n\tget(): HTMLElement\n\t{\n\t\treturn this.rootContainer;\n\t}\n\n\t#prepareText(text): string\n\t{\n\t\treturn text.replaceAll(/\\r?\\n/g, '<br>');\n\t}\n\n\t#getHeaderContainer(): HTMLElement\n\t{\n\t\tconst collapseIconElement = this.#enableCollapse\n\t\t\t? Tag.render`<div class=\"crm-copilot-textbox__collapse-icon clickable ui-icon-set ${this.#isCollapsed ? this.#className.arrowDownIcon : this.#className.arrowTopIcon}\"></div>`\n\t\t\t: ''\n\t\t;\n\n\t\tEvent.bind(collapseIconElement, 'click', () => this.#handleCollapse());\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"crm-copilot-textbox__header\">\n\t\t\t\t<div class=\"crm-copilot-textbox__title\">${Text.encode(this.#title)}</div>\n\t\t\t\t<div class=\"crm-copilot-textbox__title-icon-container\">\n\t\t\t\t\t${this.#getSearchContainer()}\n\t\t\t\t\t${collapseIconElement}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\t#getBodyContainer(): HTMLElement\n\t{\n\t\tconst bodyContainer = Tag.render`<div class=\"crm-copilot-textbox__body-container\"></div>`;\n\n\t\tDom.append(\n\t\t\tTag.render`<div class=\"crm-copilot-textbox__previous-text\">${this.#previousTextContent}</div>`,\n\t\t\tbodyContainer,\n\t\t);\n\t\tDom.append(this.#getContentContainer(), bodyContainer);\n\t\tDom.append(this.#getAttentionsContainer(), bodyContainer);\n\n\t\treturn Tag.render`<div class=\"crm-copilot-textbox__body\">${bodyContainer}</div>`;\n\t}\n\n\t#getContentContainer(): HTMLElement\n\t{\n\t\tconst contentContainer = Tag.render`<div class=\"crm-copilot-textbox__content\"></div>`;\n\t\tconst textContainer = this.#getTextContainer();\n\n\t\tEvent.bind(textContainer, 'beforeinput', (e) => {\n\t\t\te.preventDefault();\n\t\t});\n\n\t\tDom.append(textContainer, contentContainer);\n\n\t\treturn contentContainer;\n\t}\n\n\t#getTextContainer(): HTMLElement\n\t{\n\t\tif (this.textContainer)\n\t\t{\n\t\t\treturn this.textContainer;\n\t\t}\n\n\t\tthis.textContainer = Tag.render`\n\t\t\t<div \n\t\t\t\tid=\"${ID_TEXT_CONTAINER}\" \n\t\t\t\tclass=\"crm-copilot-textbox__text-container\" \n\t\t\t\tcontenteditable=\"true\" \n\t\t\t\tspellcheck=\"false\"\n\t\t\t>\n\t\t\t\t${this.#text}\n\t\t\t</div>\n\t\t`;\n\n\t\treturn this.textContainer;\n\t}\n\n\t#getSearchContainer(): HTMLElement\n\t{\n\t\tif (!this.#enableSearch)\n\t\t{\n\t\t\treturn Tag.render``;\n\t\t}\n\n\t\tconst searchNode = Tag.render`<div class=\"ui-ctl ui-ctl-after-icon ui-ctl-no-border crm-copilot-textbox__search ${this.#isCollapsed ? '--hidden' : ''}\"></div>`;\n\t\tconst searchBtn = Tag.render`<a class=\"ui-ctl-after ${CLASS_SEARCH_ICON} crm-copilot-textbox__search-btn\"></a>`;\n\t\tconst searchInput = Tag.render`\n\t\t\t<input \n\t\t\t\ttype=\"text\" \n\t\t\t\tplaceholder=\"${Text.encode(Loc.getMessage('CRM_COPILOT_TEXTBOX_SEARCH_PLACEHOLDER'))}\" \n\t\t\t\tclass=\"ui-ctl-element ui-ctl-textbox crm-copilot-textbox__search-input\"\n\t\t\t>\n\t\t`;\n\n\t\tsearchInput.oninput = () => {\n\t\t\tthis.#resetTextContainer();\n\n\t\t\tconst value = searchInput.value;\n\t\t\tif (!value)\n\t\t\t{\n\t\t\t\tthis.#switchStyle(searchBtn, CLASS_CLEAR_ICON, CLASS_SEARCH_ICON);\n\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.#switchStyle(searchBtn, CLASS_SEARCH_ICON, CLASS_CLEAR_ICON);\n\n\t\t\t// Highlights pieces of text that are not part of a tag\n\t\t\tconst regexp = new RegExp(`((?<!<[^>]*?)(${value})(?![^<]*?>))`, 'gi');\n\t\t\tconst textContainer = this.#getTextContainer();\n\n\t\t\ttextContainer.innerHTML = textContainer.innerHTML.replace(regexp, '<span class=\"search-item\">$&</span>');\n\t\t};\n\n\t\tlet searchInputFocused = false;\n\t\tsearchInput.onblur = () => {\n\t\t\tif (searchInput.value.length === 0)\n\t\t\t{\n\t\t\t\tDom.removeClass(searchNode, 'with-input-node');\n\t\t\t\tDom.remove(searchInput);\n\t\t\t\tsearchInputFocused = false;\n\t\t\t}\n\t\t};\n\n\t\tsearchBtn.onclick = () => {\n\t\t\tif (searchNode.contains(searchInput))\n\t\t\t{\n\t\t\t\tif (searchInput.value.length > 0)\n\t\t\t\t{\n\t\t\t\t\tsearchInput.value = '';\n\t\t\t\t\tthis.#switchStyle(searchBtn, CLASS_CLEAR_ICON, CLASS_SEARCH_ICON);\n\t\t\t\t\tthis.#resetTextContainer();\n\t\t\t\t}\n\n\t\t\t\tsearchInputFocused = true;\n\t\t\t\tsearchInput.focus();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tDom.append(searchInput, searchNode);\n\t\t\tDom.addClass(searchNode, ['with-input-node']);\n\n\t\t\tsearchInputFocused = true;\n\t\t\tsearchInput.focus();\n\t\t};\n\n\t\tsearchBtn.onmousedown = (event) => {\n\t\t\tif (searchInputFocused)\n\t\t\t{\n\t\t\t\tevent.preventDefault();\n\t\t\t}\n\t\t};\n\n\t\tDom.append(searchBtn, searchNode);\n\n\t\treturn searchNode;\n\t}\n\n\t#getAttentionsContainer(): HTMLElement\n\t{\n\t\tif (!Type.isArrayFilled(this.#attentions))\n\t\t{\n\t\t\treturn Tag.render``;\n\t\t}\n\n\t\tconst attentionsContainer = Tag.render`<div class=\"crm-copilot-textbox__attentions\"></div>`;\n\n\t\tthis.#attentions.forEach((attention) => Dom.append(attention.render(), attentionsContainer));\n\n\t\treturn attentionsContainer;\n\t}\n\n\t#resetTextContainer(): void\n\t{\n\t\tthis.#getTextContainer().innerHTML = this.#text;\n\t}\n\n\t#switchStyle(node: HTMLElement, fromStyle: string, toStyle: string): void\n\t{\n\t\tif (Dom.hasClass(node, fromStyle) && !Dom.hasClass(node, toStyle))\n\t\t{\n\t\t\tDom.addClass(node, toStyle);\n\t\t\tDom.removeClass(node, fromStyle);\n\t\t}\n\t}\n\n\t#handleCollapse(): void\n\t{\n\t\tthis.#isCollapsed = !this.#isCollapsed;\n\n\t\tconst rootNode = this.get();\n\t\tconst wrapperNode = rootNode.querySelector('.crm-copilot-textbox__wrapper');\n\t\tconst iconNode = rootNode.querySelector('.crm-copilot-textbox__collapse-icon');\n\t\tconst bodyNode = rootNode.querySelector('.crm-copilot-textbox__body');\n\t\tconst searchNode = rootNode.querySelector('.crm-copilot-textbox__search');\n\n\t\t// some animation\n\t\tDom.removeClass(bodyNode, 'body-toggle-animation');\n\t\tDom.addClass(bodyNode, 'body-toggle-animation');\n\n\t\tif (this.#isCollapsed)\n\t\t{\n\t\t\tDom.style(rootNode, 'padding-bottom', 0);\n\t\t\tDom.removeClass(wrapperNode, this.#className.bodyExpanded);\n\t\t\tDom.addClass(searchNode, this.#className.nodeHidden);\n\n\t\t\tthis.#switchStyle(iconNode, this.#className.arrowTopIcon, this.#className.arrowDownIcon);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.style(rootNode, 'padding-bottom', ROOT_CONTAINER_BOTTOM_PADDING);\n\t\t\tDom.addClass(wrapperNode, this.#className.bodyExpanded);\n\t\t\tDom.removeClass(searchNode, this.#className.nodeHidden);\n\n\t\t\tthis.#switchStyle(iconNode, this.#className.arrowDownIcon, this.#className.arrowTopIcon);\n\t\t}\n\t}\n}\n\nexport {\n\tAttention,\n\tAttentionPresets,\n};\n"],"names":["AttentionPresets","DEFAULT","className","iconOptions","icon","Set","INFO_1","color","size","COPILOT","EARTH","Attention","options","setContent","content","setPreset","preset","Type","isElementNode","Tag","render","getContainer","innerHTML","Dom","append","container","iconNode","Icon","contentNode","ID_TEXT_CONTAINER","CLASS_SEARCH_ICON","CLASS_CLEAR_ICON","ROOT_CONTAINER_BOTTOM_PADDING","Textbox","_classPrivateMethodInitSpec","searchIcon","clearIcon","arrowTopIcon","arrowDownIcon","bodyExpanded","nodeHidden","setText","text","Text","getRandom","isString","title","isBoolean","enableSearch","enableCollapse","isCollapsed","previousTextContent","attentions","rootContainer","style","sectionWrapper","replaceAll","collapseIconElement","Event","bind","encode","bodyContainer","contentContainer","textContainer","e","preventDefault","searchNode","searchBtn","searchInput","Loc","getMessage","oninput","_classPrivateMethodGet","value","regexp","RegExp","replace","searchInputFocused","onblur","length","removeClass","remove","onclick","contains","focus","addClass","onmousedown","event","isArrayFilled","attentionsContainer","forEach","attention","node","fromStyle","toStyle","hasClass","rootNode","get","wrapperNode","querySelector","bodyNode"],"mappings":"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"}