{"version":3,"file":"fieldset-viewer.bundle.js","sources":["../src/fieldset-viewer.js"],"sourcesContent":["import {Cache, Type, Event, Tag, Loc, Text, Dom} from 'main.core';\nimport {EventEmitter, BaseEvent} from 'main.core.events';\nimport {Popup} from 'main.popup';\nimport {Loader} from 'main.loader';\nimport {Button} from 'ui.buttons';\nimport {ListEditor} from 'crm.field.list-editor';\n\nimport './css/style.css';\n\ntype FieldsetViewerOptions = {\n\tentityTypeId: number,\n\tentityId: number,\n\tbindElement: HTMLElement,\n\tpopupOptions?: {[key: string]: any},\n\tfieldListEditorOptions?: {[key: string]: any},\n\tfieldsPanelOptions?: {[key: string]: any},\n\tevents: {\n\t\tonClose?: (BaseEvent) => void,\n\t},\n};\n\n\n/**\n * @namespace BX.Crm.Requisite\n */\nexport class FieldsetViewer extends EventEmitter\n{\n\tcache = new Cache.MemoryCache();\n\n\tconstructor(options: FieldsetViewerOptions = {})\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Crm.Requisite.FieldsetViewer');\n\t\tthis.subscribeFromOptions(options?.events || {});\n\t\tthis.setOptions(options);\n\t\tEvent.bind(options.bindElement, 'click', this.onBindElementClick.bind(this));\n\t}\n\n\tsetData(data: {[key: string]: any})\n\t{\n\t\tthis.cache.set('data', data);\n\t}\n\n\tgetData(): {[key: string]: any}\n\t{\n\t\treturn this.cache.get('data', {});\n\t}\n\n\tload(): Promise<any>\n\t{\n\t\treturn new Promise((resolve) => {\n\t\t\tconst {entityTypeId, entityId, fieldListEditorOptions} = this.getOptions();\n\t\t\tconst presetId = fieldListEditorOptions\n\t\t\t\t? (fieldListEditorOptions.fieldsPanelOptions ? fieldListEditorOptions.fieldsPanelOptions.presetId : null)\n\t\t\t\t: null;\n\n\t\t\tBX.ajax\n\t\t\t\t.runAction('crm.api.fieldset.load', {json: {entityTypeId, entityId, presetId}})\n\t\t\t\t.then((result) => {\n\t\t\t\t\tresolve(result.data);\n\t\t\t\t});\n\t\t});\n\t}\n\n\tsetOptions(options: FieldsetViewerOptions)\n\t{\n\t\tthis.cache.set('options', {...options});\n\t}\n\n\tgetOptions(): FieldsetViewerOptions\n\t{\n\t\treturn this.cache.get('options');\n\t}\n\n\tgetPopup(): Popup\n\t{\n\t\treturn this.cache.remember('popup', () => {\n\t\t\tconst options = this.getOptions();\n\t\t\treturn new Popup({\n\t\t\t\tbindElement: options.bindElement,\n\t\t\t\tautoHide: false,\n\t\t\t\twidth: 570,\n\t\t\t\theight: 478,\n\t\t\t\tclassName: 'crm-requisite-fieldset-viewer',\n\t\t\t\tnoAllPaddings: true,\n\t\t\t\t...(Type.isPlainObject(options?.popupOptions) ? options?.popupOptions : {}),\n\t\t\t\tevents: {\n\t\t\t\t\tonClose: () => {\n\t\t\t\t\t\tthis.emit('onClose', {changed: this.getIsChanged()});\n\t\t\t\t\t\tthis.setIsChanged(false);\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t});\n\t\t});\n\t}\n\n\tsetIsChanged(value: boolean)\n\t{\n\t\tthis.cache.set('isChanged', Text.toBoolean(value));\n\t}\n\n\tgetIsChanged(): boolean\n\t{\n\t\treturn this.cache.get('isChanged', false);\n\t}\n\n\tgetLoader(): Loader\n\t{\n\t\treturn this.cache.remember('loader', () => {\n\t\t\treturn new Loader();\n\t\t});\n\t}\n\n\tshow()\n\t{\n\t\tconst popup: Popup = this.getPopup();\n\t\tDom.clean(popup.getContentContainer());\n\t\tvoid this.getLoader().show(popup.getContentContainer());\n\n\t\tthis.load().then((result) => {\n\t\t\tthis.setData({...result});\n\t\t\tpopup.setContent(\n\t\t\t\tthis.createPopupContent(result),\n\t\t\t);\n\t\t});\n\n\t\tpopup.show();\n\t}\n\n\thide()\n\t{\n\t\tthis.getPopup().close();\n\t}\n\n\tonBindElementClick(event: MouseEvent)\n\t{\n\t\tevent.preventDefault();\n\t\tthis.show();\n\t}\n\n\tcreatePopupContent(data): HTMLDivElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"crm-requisite-fieldset-viewer-content\">\n\t\t\t\t${this.createBannerLayout(data)}\n\t\t\t\t${this.createListLayout(data)}\n\t\t\t\t${this.getFooterLayout()}\n\t\t\t\t${this.createCloseButton()}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tcreateBannerLayout(data): HTMLDivElement\n\t{\n\t\tconst title = (\n\t\t\tLoc\n\t\t\t\t.getMessage('CRM_REQUISITE_FIELDSET_VIEWER_BANNER_TITLE')\n\t\t\t\t.replace('{{requisite}}', ` <strong>${Text.encode(data?.title)}</strong>`)\n\t\t);\n\n\t\tconst description = (() => {\n\t\t\tlet text = Loc.getMessage('CRM_REQUISITE_FIELDSET_VIEWER_BANNER_DESCRIPTION');\n\t\t\tif (Type.isStringFilled(data?.more))\n\t\t\t{\n\t\t\t\ttext += ` <a class=\"ui-link\" href=\"${Text.encode(data?.more)}\">\n\t\t\t\t\t\t${Loc.getMessage('CRM_REQUISITE_FIELDSET_VIEWER_BANNER_MORE_LINK_LABEL')}\n\t\t\t\t\t</a>`;\n\t\t\t}\n\n\t\t\treturn text;\n\t\t})();\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"crm-requisite-fieldset-viewer-banner\">\n\t\t\t\t<div class=\"crm-requisite-fieldset-viewer-banner-text\">\n\t\t\t\t\t<div class=\"crm-requisite-fieldset-viewer-banner-text-title\">\n\t\t\t\t\t\t${title}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"crm-requisite-fieldset-viewer-banner-text-description\">\n\t\t\t\t\t\t${description}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tcreateListLayout(data): HTMLDivElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"crm-requisite-fieldset-viewer-list\">\n\t\t\t\t${this.createListContainer(data.fields)}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tcreateListContainer(fields): HTMLDivElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"crm-requisite-fieldset-viewer-list-container\">\n\t\t\t\t${fields.map((options) => {\n\t\t\t\t\treturn this.createListItem(options);\t\n\t\t\t\t})}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tcreateListItem(options: {[key: string]: any}): HTMLDivElement\n\t{\n\t\tconst editButton = (() => {\n\t\t\tif (Type.isStringFilled(options?.editing?.url))\n\t\t\t{\n\t\t\t\tconst onEditButtonClick = () => {\n\t\t\t\t\tBX.SidePanel.Instance.open(\n\t\t\t\t\t\toptions?.editing?.url,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcacheable: false,\n\t\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\t\tonClose: () => {\n\t\t\t\t\t\t\t\t\tthis.show();\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t);\n\n\t\t\t\t\tthis.setIsChanged(true);\n\t\t\t\t};\n\n\t\t\t\treturn Tag.render`\n\t\t\t\t\t<span \n\t\t\t\t\t\tclass=\"ui-btn ui-btn-link\" \n\t\t\t\t\t\tonclick=\"${onEditButtonClick}\">\n\t\t\t\t\t\t\t${Loc.getMessage('CRM_REQUISITE_FIELDSET_VIEWER_LIST_ITEM_VALUE_LINK_LABEL')}\n\t\t\t\t\t</span>\n\t\t\t\t`;\n\t\t\t}\n\n\t\t\treturn '';\n\t\t})();\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"crm-requisite-fieldset-viewer-list-item\">\n\t\t\t\t<div class=\"crm-requisite-fieldset-viewer-list-item-left\">\n\t\t\t\t\t<div class=\"crm-requisite-fieldset-viewer-list-item-label\">${Text.encode(options?.label)}</div>\n\t\t\t\t\t<div class=\"crm-requisite-fieldset-viewer-list-item-value\">${Text.encode(options?.value)}</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"crm-requisite-fieldset-viewer-list-item-right\">\n\t\t\t\t\t${editButton}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tcreateCloseButton(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('closeButton', () => {\n\t\t\tconst onCloseClick = () => {\n\t\t\t\tthis.hide();\n\t\t\t};\n\n\t\t\treturn Tag.render`\n\t\t\t\t<div \n\t\t\t\t\tclass=\"crm-requisite-fieldset-viewer-close-button\"\n\t\t\t\t\tonclick=\"${onCloseClick}\"\n\t\t\t\t></div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetFieldListEditor(): ListEditor\n\t{\n\t\treturn this.cache.remember('fieldListEditor', () => {\n\t\t\tconst options: FieldsetViewerOptions = this.getOptions();\n\t\t\treturn new ListEditor({\n\t\t\t\tsetId: this.getData().id,\n\t\t\t\ttitle: Loc.getMessage('CRM_REQUISITE_FIELDSET_VIEWER__SET_EDITOR_TITLE'),\n\t\t\t\teditable: {\n\t\t\t\t\tlabel: {\n\t\t\t\t\t\tlabel: Loc.getMessage('CRM_REQUISITE_FIELDSET_VIEWER__SET_EDITOR_NAME_LABEL'),\n\t\t\t\t\t\ttype: 'string',\n\t\t\t\t\t},\n\t\t\t\t\trequired: {\n\t\t\t\t\t\tlabel: Loc.getMessage('CRM_REQUISITE_FIELDSET_VIEWER__SET_EDITOR_REQUIRED_LABEL'),\n\t\t\t\t\t\ttype: 'checkbox',\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tautoSave: false,\n\t\t\t\tcacheable: false,\n\t\t\t\tevents: {\n\t\t\t\t\tonSave: () => this.show(),\n\t\t\t\t},\n\t\t\t\tfieldsPanelOptions: {\n\t\t\t\t\thideVirtual: 1,\n\t\t\t\t\t...(Type.isPlainObject(options.fieldsPanelOptions) ? options.fieldsPanelOptions : {}),\n\t\t\t\t},\n\t\t\t\t...(Type.isPlainObject(options.fieldListEditorOptions) ? options.fieldListEditorOptions : {}),\n\t\t\t});\n\t\t});\n\t}\n\n\tgetEditButton(): Button\n\t{\n\t\treturn this.cache.remember('editButton', () => {\n\t\t\treturn new Button({\n\t\t\t\ttext: Loc.getMessage('CRM_REQUISITE_FIELDSET_VIEWER_EDIT_BUTTON_LABEL'),\n\t\t\t\tcolor: Button.Color.LIGHT_BORDER,\n\t\t\t\ticon: Button.Icon.EDIT,\n\t\t\t\tsize: Button.Size.SMALL,\n\t\t\t\tround: true,\n\t\t\t\tevents: {\n\t\t\t\t\tclick: this.onEditButtonClick.bind(this),\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\tonEditButtonClick()\n\t{\n\t\tthis.getFieldListEditor().showSlider();\n\t\tthis.setIsChanged(true);\n\t}\n\n\tgetFooterLayout(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('footerLayout', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"crm-requisite-fieldset-viewer-footer\">\n\t\t\t\t\t${this.getEditButton().render()}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n}"],"names":["FieldsetViewer","EventEmitter","constructor","options","cache","Cache","MemoryCache","setEventNamespace","subscribeFromOptions","events","setOptions","Event","bind","bindElement","onBindElementClick","setData","data","set","getData","get","load","Promise","resolve","entityTypeId","entityId","fieldListEditorOptions","getOptions","presetId","fieldsPanelOptions","BX","ajax","runAction","json","then","result","getPopup","remember","Popup","autoHide","width","height","className","noAllPaddings","Type","isPlainObject","popupOptions","onClose","emit","changed","getIsChanged","setIsChanged","value","Text","toBoolean","getLoader","Loader","show","popup","Dom","clean","getContentContainer","setContent","createPopupContent","hide","close","event","preventDefault","Tag","render","createBannerLayout","createListLayout","getFooterLayout","createCloseButton","title","Loc","getMessage","replace","encode","description","text","isStringFilled","more","createListContainer","fields","map","createListItem","editButton","editing","url","onEditButtonClick","SidePanel","Instance","open","cacheable","label","onCloseClick","getFieldListEditor","ListEditor","setId","id","editable","type","required","autoSave","onSave","hideVirtual","getEditButton","Button","color","Color","LIGHT_BORDER","icon","Icon","EDIT","size","Size","SMALL","round","click","showSlider"],"mappings":"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"}