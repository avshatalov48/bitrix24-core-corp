{"version":3,"file":"messagesender.bundle.map.js","names":["this","BX","Crm","exports","main_core_events","main_core","crm_dataStructures","ensureIsItemIdentifier","candidate","ItemIdentifier","Error","ensureIsReceiver","Receiver","ensureIsValidMultifieldValue","isValidValue","Type","isPlainObject","isNil","id","isInteger","isStringFilled","typeId","valueType","value","ensureIsValidSourceData","isValid","title","_rootSource","babelHelpers","classPrivateFieldLooseKey","_addressSource","_addressSourceData","_address","constructor","rootSource","addressSource","address","addressSourceData","Object","defineProperty","writable","classPrivateFieldLooseBase","freeze","valueFormatted","static","data","fromJSON","e","isEqualTo","another","String","extractReceivers","item","entityData","receivers","hasOwnProperty","push","extractReceiversFromMultifieldData","extractReceiversFromClientInfo","CLIENT_INFO","unique","multifields","MULTIFIELD_DATA","multifieldTypeId","itemSlug","isArrayFilled","entityTypeId","entityId","split","Text","toInteger","addressSourceTitle","getAddressSourceTitle","singleMultifield","ID","stringOrUndefined","VALUE_TYPE","VALUE","VALUE_FORMATTED","_entityData$CLIENT_IN","_ref","_entityData$TITLE","TITLE","FORMATTED_NAME","clientDataKey","CrmEntityType","resolveName","client","find","clientInfo","isString","clientsOfSameType","values","singleClient","_singleClient$advance","resolveId","typeName","advancedInfo","multiFields","TYPE_ID","undefined","filter","receiver","index","anotherIndex","findIndex","anotherReceiver","OBSERVED_EVENTS","Set","_instance","_onDetailsTabChangeEventHandler","_storage","_observedItems","_init","_destroy","_onCrmEntityChange","_addReceivers","_startObservingItem","ReceiverRepository","Instance","window","top","Reflection","getClass","MessageSender","_startObservingItem2","_addReceivers2","_onCrmEntityChange2","_destroy2","_init2","receiversJSONString","instance","receiversJSON","JSON","parse","singleReceiverJSON","getReceivers","getReceiversByIdentifier","_babelHelpers$classPr","hash","_BX$SidePanel","_BX$SidePanel$Instanc","EventEmitter","makeObservable","event","BaseEvent","console","error","getData","getType","bind","eventName","subscribe","SidePanel","isOpen","unsubscribe","eventType","_babelHelpers$classPr2","has","toLowerCase","_babelHelpers$classPr3","oldReceivers","newReceivers","added","newReceiver","oldReceiver","deleted","length","emit","previous","current","delete","_babelHelpers$classPr4","observedItemsOfThisType","add","Event","DataStructures"],"sources":["messagesender.bundle.js"],"mappings":"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"}