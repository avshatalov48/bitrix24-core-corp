{"version":3,"file":"script.js","sources":["script.es6.js"],"sourcesContent":["import {Loc, Reflection} from 'main.core';\n\nconst namespace = Reflection.namespace('BX.Crm.Component');\n\ndeclare type ProviderData = {\n\tid: string,\n\tname: string,\n\tcanUse: boolean,\n\tfromList: SenderData[],\n}\n\ndeclare type ReceiverData = {\n\tvalueFormatted: ?string,\n\tvalue: string,\n}\n\ndeclare type SenderData = {\n\tid: string,\n\tname: string,\n}\n\n/**\n * @memberof BX.Crm.Component.CrmSmsSend\n */\nclass CrmSmsSend\n{\n\t_senders: ProviderData[];\n\t_fromList: SenderData[];\n\t_toList: ReceiverData[];\n\n\tconstructor(container)\n\t{\n\t\tthis._senderId = null;\n\t\tthis._from = null;\n\t\tthis._commEntityTypeId = null;\n\t\tthis._commEntityId = null;\n\t\tthis._to = null;\n\n\t\tthis._fromList = [];\n\t\tthis._toList = [];\n\n\t\tthis._input = null;\n\t\tthis._menu = null;\n\t\tthis._isMenuShown = false;\n\t\tthis._shownMenuId = null;\n\n\t\tthis._canUse = null;\n\t\tthis._canSendMessage = null;\n\t\tthis._manageUrl = null;\n\t\tthis._senders = null;\n\t\tthis._defaults = null;\n\t\tthis._communications = null;\n\t\tthis._container = container;\n\t\tthis._isRequestRunning = false;\n\t\tthis._isSenderFixed = false;\n\n\t\tthis.saveButton = null;\n\t\tthis.cancelButton = null;\n\t\tthis._serviceUrl = '';\n\n\t\tthis._ownerTypeId = '';\n\t\tthis._ownerId = '';\n\t}\n\n\tinit(settings)\n\t{\n\t\tthis._canUse = BX.prop.getBoolean(settings, \"canUse\", false);\n\t\tthis._canSendMessage = BX.prop.getBoolean(settings, \"canSendMessage\", false);\n\t\tthis._manageUrl = BX.prop.getString(settings, \"manageUrl\", '');\n\t\tthis._senders = BX.prop.getArray(settings, \"senders\", []);\n\t\tthis._defaults = BX.prop.getObject(settings, \"defaults\", {\n\t\t\tsenderId: null,\n\t\t\tfrom:null\n\t\t});\n\t\tthis._communications = BX.prop.getArray(settings, \"communications\", []);\n\t\tthis._serviceUrl = BX.prop.getString(settings, 'serviceUrl', '');\n\t\tthis._ownerTypeId = BX.prop.getInteger(settings, 'ownerTypeId', 0);\n\t\tthis._ownerId = BX.prop.getInteger(settings, 'ownerId', 0);\n\t\tthis._senderId = BX.prop.getString(settings, 'providerId');\n\t\tthis._isSenderFixed = BX.prop.getBoolean(settings, 'isProviderFixed', false);\n\n\t\tthis._title = this._container.querySelector('[data-role=\"sender-title\"]');\n\t\tthis._senderContainerNode = this._container.querySelector('[data-role=\"sender-container\"]');\n\t\tthis._senderSelectorNode = this._container.querySelector('[data-role=\"sender-selector\"]');\n\t\tthis._senderSelectorBlockNode = this._container.querySelector('[data-role=\"sender-selector-block\"]');\n\t\tthis._fromContainerNode = this._container.querySelector('[data-role=\"from-container\"]');\n\t\tthis._fromSelectorNode = this._container.querySelector('[data-role=\"from-selector\"]');\n\t\tthis._clientContainerNode = this._container.querySelector('[data-role=\"client-container\"]');\n\t\tthis._clientSelectorNode = this._container.querySelector('[data-role=\"client-selector\"]');\n\t\tthis._toSelectorNode = this._container.querySelector('[data-role=\"to-selector\"]');\n\t\tthis._messageLengthCounterNode = this._container.querySelector('[data-role=\"message-length-counter\"]');\n\t\tthis._input = this._container.querySelector('[data-role=\"input\"]');\n\t\tthis.saveButton = this._container.querySelector('[data-role=\"button-save\"]');\n\t\tthis.cancelButton = this._container.querySelector('[data-role=\"button-cancel\"]');\n\n\t\tif(this._canUse && this._canSendMessage)\n\t\t{\n\t\t\tthis.initSenderSelector();\n\t\t\tthis.initFromSelector();\n\t\t\tthis.initClientContainer();\n\t\t\tthis.initClientSelector();\n\t\t\tthis.initToSelector();\n\t\t\tthis.initMessageLengthCounter();\n\t\t\tthis.initButtons();\n\t\t\tthis.setMessageLengthCounter();\n\t\t}\n\t}\n\n\tswitchToFixedSenderAppearance(sender): void\n\t{\n\t\tthis.setSender(sender);\n\t\tconst subtitleNode = document.querySelector('.ui-side-panel-wrap-below');\n\t\tif (subtitleNode)\n\t\t{\n\t\t\tsubtitleNode.classList.add('crm-sms-send-subtitle');\n\t\t\tsubtitleNode.innerHTML = Loc.getMessage('CRM_SMS_SEND_SENDER_SUBTITLE', {\n\t\t\t\t'#SENDER#': '<span class=\"crm-sms-send-subtitle-sender\">' + sender.name + '</span>',\n\t\t\t});\n\t\t}\n\t\tthis._senderSelectorBlockNode.style.display = 'none';\n\t\tthis._senderContainerNode.style.display = 'inline';\n\t\tthis._clientContainerNode.style.display = 'inline';\n\t}\n\n\tinitSenderSelector()\n\t{\n\t\tconst defaultSenderId = this._senderId ?? this._defaults.senderId;\n\t\tlet defaultSender = this._senders[0].canUse ? this._senders[0] : null;\n\t\tlet restSender = null;\n\t\tconst menuItems = [];\n\t\tconst handler = this.onSenderSelectorClick.bind(this);\n\n\t\tfor (let i = 0; i < this._senders.length; ++i)\n\t\t{\n\t\t\tif (this._senders[i].canUse && this._senders[i].fromList.length && (this._senders[i].id === defaultSenderId || !defaultSender))\n\t\t\t{\n\t\t\t\tdefaultSender = this._senders[i];\n\t\t\t}\n\n\t\t\tif (this._senders[i].id === 'rest')\n\t\t\t{\n\t\t\t\trestSender = this._senders[i];\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tmenuItems.push({\n\t\t\t\ttext: this._senders[i].name,\n\t\t\t\tsender: this._senders[i],\n\t\t\t\tonclick: handler,\n\t\t\t\tclassName: (!this._senders[i].canUse || !this._senders[i].fromList.length)\n\t\t\t\t\t? 'crm-sms-send-popup-menu-item-disabled menu-popup-no-icon' : ''\n\t\t\t});\n\t\t}\n\n\t\tif (defaultSender && this._isSenderFixed)\n\t\t{\n\t\t\tthis.switchToFixedSenderAppearance(defaultSender);\n\t\t\treturn;\n\t\t}\n\n\t\tif (restSender)\n\t\t{\n\t\t\tif (restSender.fromList.length > 0)\n\t\t\t{\n\t\t\t\tmenuItems.push({delimiter: true});\n\t\t\t\tfor (let i = 0; i < restSender.fromList.length; ++i)\n\t\t\t\t{\n\t\t\t\t\tmenuItems.push({\n\t\t\t\t\t\ttext: restSender.fromList[i].name,\n\t\t\t\t\t\tsender: restSender,\n\t\t\t\t\t\tfrom: restSender.fromList[i],\n\t\t\t\t\t\tonclick: handler\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\tmenuItems.push({delimiter: true}, {\n\t\t\t\ttext: Loc.getMessage('CRM_SMS_REST_MARKETPLACE'),\n\t\t\t\thref: '/marketplace/category/crm_robot_sms/',\n\t\t\t\ttarget: '_blank'\n\t\t\t});\n\t\t}\n\n\t\tif (defaultSender)\n\t\t{\n\t\t\tthis.setSender(defaultSender);\n\t\t}\n\n\t\tBX.bind(this._senderSelectorNode, 'click', this.openMenu.bind(this, 'sender', this._senderSelectorNode, menuItems));\n\t}\n\n\tonSenderSelectorClick(e, item)\n\t{\n\t\tif (item.sender)\n\t\t{\n\t\t\tif (!item.sender.canUse || !item.sender.fromList.length)\n\t\t\t{\n\t\t\t\twindow.open(item.sender.manageUrl);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.setSender(item.sender, true);\n\t\t\tconst from = item.from ? item.from : item.sender.fromList[0];\n\t\t\tthis.setFrom(from, true);\n\t\t}\n\t\tthis._menu.close();\n\t}\n\n\tsetSender(sender, setAsDefault)\n\t{\n\t\tthis._senderId = sender.id;\n\t\tthis._fromList = sender.fromList;\n\t\tthis._senderSelectorNode.textContent = sender.shortName ? sender.shortName : sender.name;\n\n\t\tconst visualFn = sender.id === 'rest' ? 'hide' : 'show';\n\t\tBX[visualFn](this._fromContainerNode);\n\n\t\tif (setAsDefault)\n\t\t{\n\t\t\tBX.userOptions.save(\"crm\", \"sms_manager_editor\", \"senderId\", this._senderId);\n\t\t}\n\t}\n\n\tinitFromSelector()\n\t{\n\t\tif (this._fromList.length > 0)\n\t\t{\n\t\t\tconst defaultFromId = this._defaults.from || this._fromList[0].id;\n\t\t\tlet defaultFrom = null;\n\t\t\tfor (let i = 0; i < this._fromList.length; ++i)\n\t\t\t{\n\t\t\t\tif (this._fromList[i].id === defaultFromId || !defaultFrom)\n\t\t\t\t{\n\t\t\t\t\tdefaultFrom = this._fromList[i];\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (defaultFrom)\n\t\t\t{\n\t\t\t\tthis.setFrom(defaultFrom);\n\t\t\t}\n\t\t}\n\n\t\tBX.bind(this._fromSelectorNode, 'click', this.onFromSelectorClick.bind(this));\n\t}\n\n\tonFromSelectorClick(e)\n\t{\n\t\tconst menuItems = [];\n\t\tconst handler = this.onFromSelectorItemClick.bind(this);\n\n\t\tfor (let i = 0; i < this._fromList.length; ++i)\n\t\t{\n\t\t\tmenuItems.push({\n\t\t\t\ttext: this._fromList[i].name,\n\t\t\t\tfrom: this._fromList[i],\n\t\t\t\tonclick: handler\n\t\t\t});\n\t\t}\n\n\t\tthis.openMenu('from_'+this._senderId, this._fromSelectorNode, menuItems, e);\n\t}\n\n\tonFromSelectorItemClick(e, item)\n\t{\n\t\tif (item.from)\n\t\t{\n\t\t\tthis.setFrom(item.from, true);\n\t\t}\n\t\tthis._menu.close();\n\t}\n\n\tsetFrom(from: SenderData, setAsDefault: ?boolean): void\n\t{\n\t\tthis._from = from.id;\n\n\t\tif (this._senderId === 'rest')\n\t\t{\n\t\t\tthis._senderSelectorNode.textContent = from.name;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis._fromSelectorNode.textContent = from.name;\n\t\t}\n\n\t\tif (setAsDefault)\n\t\t{\n\t\t\tBX.userOptions.save(\"crm\", \"sms_manager_editor\", \"from\", this._from);\n\t\t}\n\t}\n\n\tinitClientContainer()\n\t{\n\t\tif (this._communications.length === 0)\n\t\t{\n\t\t\tBX.hide(this._clientContainerNode);\n\t\t}\n\t}\n\n\tinitClientSelector()\n\t{\n\t\tconst menuItems = [];\n\t\tconst handler = this.onClientSelectorClick.bind(this);\n\n\t\tfor (let i = 0; i < this._communications.length; ++i)\n\t\t{\n\t\t\tmenuItems.push({\n\t\t\t\ttext: this._communications[i].caption,\n\t\t\t\tclient: this._communications[i],\n\t\t\t\tonclick: handler\n\t\t\t});\n\t\t\tif (i === 0)\n\t\t\t{\n\t\t\t\tthis.setClient(this._communications[i]);\n\t\t\t}\n\t\t}\n\n\t\tBX.bind(this._clientSelectorNode, 'click', this.openMenu.bind(this, 'comm', this._clientSelectorNode, menuItems));\n\t}\n\n\tonClientSelectorClick(e, item)\n\t{\n\t\tif (item.client)\n\t\t{\n\t\t\tthis.setClient(item.client);\n\t\t}\n\t\tthis._menu.close();\n\t}\n\n\tsetClient(client)\n\t{\n\t\tthis._commEntityTypeId = client.entityTypeId;\n\t\tthis._commEntityId = client.entityId;\n\t\tthis._clientSelectorNode.textContent = client.caption;\n\t\tthis._toList = client.phones;\n\t\tthis.setTo(client.phones[0]);\n\t}\n\n\tinitToSelector()\n\t{\n\t\tBX.bind(this._toSelectorNode, 'click', this.onToSelectorClick.bind(this));\n\t}\n\n\tonToSelectorClick(e)\n\t{\n\t\tconst menuItems = [];\n\t\tconst handler = this.onToSelectorItemClick.bind(this);\n\n\t\tfor (let i = 0; i < this._toList.length; ++i)\n\t\t{\n\t\t\tmenuItems.push({\n\t\t\t\ttext: this._toList[i].valueFormatted || this._toList[i].value,\n\t\t\t\tto: this._toList[i],\n\t\t\t\tonclick: handler\n\t\t\t});\n\t\t}\n\n\t\tthis.openMenu('to_'+this._commEntityTypeId+'_'+this._commEntityId, this._toSelectorNode, menuItems, e);\n\t}\n\n\tonToSelectorItemClick(e, item)\n\t{\n\t\tif (item.to)\n\t\t{\n\t\t\tthis.setTo(item.to);\n\t\t}\n\t\tthis._menu.close();\n\t}\n\n\tsetTo(to)\n\t{\n\t\tthis._to = to.value;\n\t\tthis._toSelectorNode.textContent = to.valueFormatted || to.value;\n\t}\n\n\topenMenu(menuId, bindElement, menuItems, e)\n\t{\n\t\tif (this._shownMenuId === menuId)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif(this._shownMenuId !== null && this._menu)\n\t\t{\n\t\t\tthis._menu.close();\n\t\t\tthis._shownMenuId = null;\n\t\t}\n\n\t\tBX.PopupMenu.show(\n\t\t\tthis._id + menuId,\n\t\t\tbindElement,\n\t\t\tmenuItems,\n\t\t\t{\n\t\t\t\toffsetTop: 0,\n\t\t\t\toffsetLeft: 36,\n\t\t\t\tangle: { position: \"top\", offset: 0 },\n\t\t\t\tevents:\n\t\t\t\t\t{\n\t\t\t\t\t\tonPopupClose: this.onMenuClose.bind(this)\n\t\t\t\t\t}\n\t\t\t}\n\t\t);\n\n\t\tthis._menu = BX.PopupMenu.currentItem;\n\t\te.preventDefault();\n\t}\n\n\tonMenuClose()\n\t{\n\t\tthis._shownMenuId = null;\n\t\tthis._menu = null;\n\t}\n\n\tinitMessageLengthCounter()\n\t{\n\t\tthis._messageLengthMax = parseInt(this._messageLengthCounterNode.getAttribute('data-length-max'));\n\t\tBX.bind(this._input, 'keyup', this.setMessageLengthCounter.bind(this));\n\t}\n\n\tsetMessageLengthCounter()\n\t{\n\t\tconst length = this._input.value.length;\n\t\tthis._messageLengthCounterNode.textContent = length;\n\n\t\tconst classFn = length >= this._messageLengthMax ? 'addClass' : 'removeClass';\n\t\tBX[classFn](this._messageLengthCounterNode, 'sms-symbol-counter-number-overhead');\n\t}\n\n\tinitButtons()\n\t{\n\t\tBX.bind(this.saveButton, 'click', this.save.bind(this));\n\t\tBX.bind(this.cancelButton, 'click', this.cancel.bind(this));\n\t}\n\n\tsave()\n\t{\n\t\tconst text = this._input.value;\n\t\tif(text === \"\")\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this._communications.length)\n\t\t{\n\t\t\talert(Loc.getMessage('CRM_SMS_ERROR_NO_COMMUNICATIONS'));\n\t\t\treturn;\n\t\t}\n\n\t\tif(this._isRequestRunning)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis._isRequestRunning = true;\n\t\tBX.ajax(\n\t\t\t{\n\t\t\t\turl: BX.util.add_url_param(this._serviceUrl, {\n\t\t\t\t\t\"action\": \"save_sms_message\",\n\t\t\t\t\t\"sender\": this._senderId\n\t\t\t\t}),\n\t\t\t\tmethod: \"POST\",\n\t\t\t\tdataType: \"json\",\n\t\t\t\tdata:\n\t\t\t\t\t{\n\t\t\t\t\t\t'site': Loc.getMessage('SITE_ID'),\n\t\t\t\t\t\t'sessid': BX.bitrix_sessid(),\n\t\t\t\t\t\t\"ACTION\": \"SAVE_SMS_MESSAGE\",\n\t\t\t\t\t\t\"SENDER_ID\": this._senderId,\n\t\t\t\t\t\t\"MESSAGE_FROM\": this._from,\n\t\t\t\t\t\t\"MESSAGE_TO\": this._to,\n\t\t\t\t\t\t\"MESSAGE_BODY\": text,\n\t\t\t\t\t\t\"OWNER_TYPE_ID\": this._ownerTypeId,\n\t\t\t\t\t\t\"OWNER_ID\": this._ownerId,\n\t\t\t\t\t\t\"TO_ENTITY_TYPE_ID\": this._commEntityTypeId,\n\t\t\t\t\t\t\"TO_ENTITY_ID\": this._commEntityId\n\t\t\t\t\t},\n\t\t\t\tonsuccess: this.onSaveSuccess.bind(this),\n\t\t\t\tonfailure: this.onSaveFailure.bind(this),\n\t\t\t}\n\t\t);\n\t}\n\n\tcancel()\n\t{\n\t\tif(BX.SidePanel)\n\t\t{\n\t\t\tconst curSlider = BX.SidePanel.Instance.getSliderByWindow(window);\n\t\t\tif(curSlider)\n\t\t\t{\n\t\t\t\tcurSlider.close();\n\t\t\t}\n\t\t}\n\t}\n\n\tonSaveSuccess(data)\n\t{\n\t\tthis._isRequestRunning = false;\n\n\t\tconst error = BX.prop.getString(data, \"ERROR\", \"\");\n\t\tif(error !== \"\")\n\t\t{\n\t\t\talert(error);\n\t\t\treturn;\n\t\t}\n\n\t\tthis.cancel();\n\t}\n\n\tonSaveFailure(data)\n\t{\n\t\tthis._isRequestRunning = false;\n\t}\n}\n\nnamespace.CrmSmsSend = CrmSmsSend;"],"names":["namespace","Reflection","CrmSmsSend","container","_senderId","_from","_commEntityTypeId","_commEntityId","_to","_fromList","_toList","_input","_menu","_isMenuShown","_shownMenuId","_canUse","_canSendMessage","_manageUrl","_senders","_defaults","_communications","_container","_isRequestRunning","_isSenderFixed","saveButton","cancelButton","_serviceUrl","_ownerTypeId","_ownerId","settings","BX","prop","getBoolean","getString","getArray","getObject","senderId","from","getInteger","_title","querySelector","_senderContainerNode","_senderSelectorNode","_senderSelectorBlockNode","_fromContainerNode","_fromSelectorNode","_clientContainerNode","_clientSelectorNode","_toSelectorNode","_messageLengthCounterNode","initSenderSelector","initFromSelector","initClientContainer","initClientSelector","initToSelector","initMessageLengthCounter","initButtons","setMessageLengthCounter","sender","setSender","subtitleNode","document","classList","add","innerHTML","Loc","getMessage","name","style","display","defaultSenderId","defaultSender","canUse","restSender","menuItems","handler","onSenderSelectorClick","bind","i","length","fromList","id","push","text","onclick","className","switchToFixedSenderAppearance","delimiter","href","target","openMenu","e","item","window","open","manageUrl","setFrom","close","setAsDefault","textContent","shortName","visualFn","userOptions","save","defaultFromId","defaultFrom","onFromSelectorClick","onFromSelectorItemClick","hide","onClientSelectorClick","caption","client","setClient","entityTypeId","entityId","phones","setTo","onToSelectorClick","onToSelectorItemClick","valueFormatted","value","to","menuId","bindElement","PopupMenu","show","_id","offsetTop","offsetLeft","angle","position","offset","events","onPopupClose","onMenuClose","currentItem","preventDefault","_messageLengthMax","parseInt","getAttribute","classFn","cancel","alert","ajax","url","util","add_url_param","method","dataType","data","bitrix_sessid","onsuccess","onSaveSuccess","onfailure","onSaveFailure","SidePanel","curSlider","Instance","getSliderByWindow","error"],"mappings":"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"}