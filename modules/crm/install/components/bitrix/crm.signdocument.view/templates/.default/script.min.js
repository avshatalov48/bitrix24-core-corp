(function(e,t,n){"use strict";var i=function e(){babelHelpers.classCallCheck(this,e)};babelHelpers.defineProperty(i,"DEFAULT","");babelHelpers.defineProperty(i,"LOADING","loading");babelHelpers.defineProperty(i,"DISABLED","disabled");babelHelpers.defineProperty(i,"HIDDEN","hidden");babelHelpers.defineProperty(i,"AI_LOADING","ai-loading");var a,s;function r(e,t,n){o(e,t);t.set(e,n)}function l(e,t){o(e,t);t.add(e)}function o(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function d(e,t,n){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return n}var c=t.Reflection.namespace("BX.Crm.Component");var u=t.Reflection.namespace("BX.UI.Viewer");var v=null;var b=new WeakSet;var h=new WeakSet;var p=function(){function e(t){babelHelpers.classCallCheck(this,e);l(this,h);l(this,b);this.pdfNode=t.pdfNode;this.pdfSource=t.pdfSource;this.printButton=n.ButtonManager.createByUniqId("crm-document-print");this.downloadButton=n.ButtonManager.createByUniqId("crm-document-download");d(this,b,f).call(this);d(this,h,m).call(this);v=this}babelHelpers.createClass(e,[{key:"getViewer",value:function e(){var t;if(!this.viewer&&this.pdfNode){this.viewer=new u.SingleDocumentController({baseContainer:this.pdfNode,stretch:true})}return(t=this.viewer)!==null&&t!==void 0?t:null}}],[{key:"getDefaultComponent",value:function e(){return v}}]);return e}();function f(){var e=this.getViewer();if(!e){return}e.setItems([u.buildItemByNode(this.pdfNode)]);e.setPdfSource(this.pdfSource);e.setScale(1.2);e.open()}function m(){var e=this;if(this.printButton&&this.getViewer()){this.printButton.bindEvent("click",(function(){e.getViewer().print()}))}if(this.downloadButton){this.downloadButton.bindEvent("click",(function(){window.open(e.pdfSource,"_blank")}))}}var w=new WeakMap;var _=new WeakMap;var g=new WeakMap;var S=new WeakMap;var D=new WeakSet;var C=new WeakSet;var N=new WeakSet;var H=new WeakSet;var E=new WeakSet;var k=new WeakSet;var B=function(){function e(){var n,i,a,s,o=this;var c=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};babelHelpers.classCallCheck(this,e);l(this,k);l(this,E);l(this,H);l(this,N);l(this,C);l(this,D);r(this,w,{writable:true,value:null});r(this,_,{writable:true,value:null});r(this,g,{writable:true,value:undefined});r(this,S,{writable:true,value:[]});babelHelpers.classPrivateFieldSet(this,S,(n=c===null||c===void 0?void 0:c.memberIds)!==null&&n!==void 0?n:[]);babelHelpers.classPrivateFieldSet(this,_,d(this,C,y).call(this));if(!t.Type.isUndefined((i=BX)===null||i===void 0?void 0:(a=i.Sign)===null||a===void 0?void 0:(s=a.V2)===null||s===void 0?void 0:s.DocumentSend)){babelHelpers.classPrivateFieldSet(this,g,new BX.Sign.V2.DocumentSend);babelHelpers.classPrivateFieldGet(this,g).subscribeOnce("ready",(function(e){var t,n;if((t=e.getData())!==null&&t!==void 0&&(n=t.readyMembers)!==null&&n!==void 0&&n.length){o.enableButton()}}));babelHelpers.classPrivateFieldGet(this,g).loadStatus(babelHelpers.classPrivateFieldGet(this,S))}}babelHelpers.createClass(e,[{key:"enableButton",value:function e(){t.Dom.removeClass(babelHelpers.classPrivateFieldGet(this,_),"crm__sign-document-view-resend--button-disabled")}},{key:"disableButton",value:function e(){t.Dom.addClass(babelHelpers.classPrivateFieldGet(this,_),"crm__sign-document-view-resend--button-disabled")}},{key:"isButtonDisabled",value:function e(){return t.Dom.hasClass(babelHelpers.classPrivateFieldGet(this,_),"crm__sign-document-view-resend--button-disabled")}},{key:"renderTo",value:function e(n){t.Dom.append(this.render(),n)}},{key:"render",value:function e(){if(!babelHelpers.classPrivateFieldGet(this,w)){babelHelpers.classPrivateFieldSet(this,w,t.Tag.render(a||(a=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="crm__sign-document-view-resend--container">\n\t\t\t\t\t<div class="crm__sign-document-view-resend--list">\n\t\t\t\t\t\t',"\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t"])),babelHelpers.classPrivateFieldGet(this,_)))}return babelHelpers.classPrivateFieldGet(this,w)}},{key:"send",value:function e(t){return babelHelpers.classPrivateFieldGet(this,g).send(t)}},{key:"disableWithTimer",value:function e(t){var n=this;this.disableButton();var i=t;d(this,H,P).call(this,d(this,N,I).call(this,i));var a=setInterval((function(){if(i<1){clearInterval(a);d(n,H,P).call(n,d(n,N,I).call(n,0));n.enableButton();return}i--;d(n,H,P).call(n,d(n,N,I).call(n,i))}),1e3)}}]);return e}();function M(e){return babelHelpers.classPrivateFieldGet(this,g).loadStatus(e)}function y(){var e=this;var n=function n(i){if(e.isButtonDisabled()){return}d(e,D,M).call(e,babelHelpers.classPrivateFieldGet(e,S)).then((function(n){if(n.length>0){return e.send(n).then((function(){e.disableWithTimer(60);BX.UI.Notification.Center.notify({content:t.Loc.getMessage("CRM_DOCUMENT_VIEW_DOCUMENT_SEND_NOTIFY_SUCCESS")})}))}throw new Error("no members in appropriate status")}))};return t.Tag.render(s||(s=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div\n\t\t\t\tclass="crm__sign-document-view-resend--button crm__sign-document-view-resend--button-disabled"\n\t\t\t\tonclick="','"\n\t\t\t>\n\t\t\t\t<div class="crm__sign-document-view-resend--button-icon --service-sms"></div>\n\t\t\t\t<div class="crm__sign-document-view-resend--button-main-title">\n\t\t\t\t\t','\n\t\t\t\t</div>\n\t\t\t\t<div class="crm__sign-document-view-resend--button-helper"></div>\n\t\t\t</div>\n\t\t'])),n.bind(this),t.Loc.getMessage("CRM_DOCUMENT_VIEW_DOCUMENT_SEND_SEND_AGAIN"))}function I(e){return e>0?t.Loc.getMessage("CRM_DOCUMENT_VIEW_DOCUMENT_SEND_SEND_AGAIN_TIMER",{"#COUNTDOWN#":d(this,E,T).call(this,e)}):t.Loc.getMessage("CRM_DOCUMENT_VIEW_DOCUMENT_SEND_SEND_AGAIN")}function P(e){babelHelpers.classPrivateFieldGet(this,_).querySelector(".crm__sign-document-view-resend--button-main-title").textContent=e}function T(e){var t=Math.floor(e/60);var n=e%60;var i=d(this,k,W).call(this,t);var a=d(this,k,W).call(this,n);return"".concat(i,":").concat(a)}function W(e){return e<10?"0".concat(e):e}c.SignDocumentView=p;c.SignDocumentViewSendWidget=B})(this.window=this.window||{},BX,BX.UI);
//# sourceMappingURL=script.map.js