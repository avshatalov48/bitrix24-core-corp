{"version":3,"file":"script.map.js","names":["window","BXCrmActivityEmailController","init","options","ctrl","this","__inited","BX","type","isPlainObject","templates","__dummyNode","document","createElement","FROM","SUBJECT","BODY","pageSize","__log","a","b","details","activityId","moreA","findChildByClassName","parentNode","bind","handleLogClick","moreB","items","findChildrenByClassName","i","log","getAttribute","toLowerCase","handleLogItemClick","Event","EventEmitter","subscribe","event","mailMessageId","getData","messageId","slider","top","SidePanel","Instance","getSliderByWindow","setCacheable","close","initScrollable","__scrollable","scrollingElement","documentElement","scrollTop","scrollLeft","body","scrollBy","scrollWrapper","pos","__animation","clearInterval","start","delta","step","setInterval","scrollTo","node1","node2","pos0","bottom","pos1","pos2","Math","min","PreventDefault","button","loadLog","separator","ajax","method","url","ajaxUrl","data","act","id","size","template","dataType","onsuccess","json","result","innerHTML","html","marker","findNextSibling","tag","childNodes","length","item","insertBefore","nodeType","hasClass","addClass","count","style","display","scrollHeight","onfailure","target","tagName","toUpperCase","getSelection","toString","trim","selection","createRange","htmlText","toggleLogItem","wrapper","logItem","opened","toggleClass","removeClass","error","response","processHTML","setTimeout","textAlign","HTML","offsetHeight","processScripts","SCRIPT","removeAttribute","removeLogItem","removeChild","maxHeight","transition","applyTemplate","ownerType","ownerId","callback","key","join","sessid","bitrix_sessid","ACTION","TEMPLATE_ID","OWNER_TYPE","OWNER_ID","CONTENT_TYPE","DATA","BXCrmActivityEmail","self","hasOwnProperty","htmlForm","formId","__wrapper","addCustomEvent","source","hideReplyForm","emailContainerId","emailLinks","querySelectorAll","findChildren","setAttribute","quotesList","rcptMore","command","params","ID","adjust","text","message","replyButton","replyLink","replyAllLink","forwardLink","skipLink","spamLink","deleteLink","showReplyForm","typeId","CrmActivityType","email","location","href","delete","mailForm","BXMainMailForm","getForm","handleFooterButtonClick","handleFormSubmit","handleFormSubmitSuccess","form","fields","elements","emptyRcpt","name","value","showError","uploads","totalSize","postForm","controllers","storage","handler","agent","upload","filesCount","err","queue","Object","keys","reduce","sum","k","file","parseInt","sizeInt","ceil","hiddenWrapper","clone","indexOf","cloneNode","substr","appendChild","ERROR","ERROR_HTML","isArray","errorNode","createTextNode","j","onCustomEvent","action","source_id","target_id","ACTIVITY","prototype","getField","setValue","rcptSelected","rcptAllSelected","rcptCcSelected","warnId","confirm","IS_SKIP","IS_SPAM","ITEM_ID","batch","templateMenu","selector","__id","fromField","folded","unfold","htmlFields","forwardedId","repliedId","subjectField","filesInfo","FILES_INFO","quote","signature","menuWindow","concat","onclick","delimiter","push","util","htmlspecialchars","title","PopupMenu","show","offsetLeft","angle","closeByEsc"],"sources":["script.js"],"mappings":"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"}