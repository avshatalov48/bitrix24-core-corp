{"version":3,"sources":["script.js"],"names":["BX","CrmNewEntityCounterPanel","this","_id","_settings","_userId","_pullTagName","_pullCommands","_entityTypeId","_categoryId","_lastEntityId","_gridId","_counter","_wrapper","_container","_counterContainer","_counterWrapper","_previousNode","_currentNode","_nextNode","_refreshHandle","_refreshCallback","delegate","doRefresh","_refreshSuccessCallback","onRefreshSuccess","_resetCallback","reset","_resetSuccessCallback","onResetSuccess","_clickCallback","onClick","_gridReloadCallback","onGridReload","_pullCallback","onPullEvent","_isShown","_hasLayout","prototype","initialize","id","settings","type","isNotEmptyString","util","getRandomString","prop","getInteger","getString","isElementNode","style","display","Dom","clean","_serviceUrl","getObject","addCustomEvent","extendWatch","window","layout","release","removeCustomEvent","getId","resolveEntityCommand","pullCommand","key","hasOwnProperty","sender","args","cancelRefresh","setTimeout","command","params","entityCommand","refresh","isFunction","PULL","clearTimeout","ajax","url","add_url_param","action","method","dataType","data","ACTION","LAST_ENTITY_ID","ENTITY_TYPE_ID","CATEGORY_ID","Type","isNumber","onsuccess","setupCounter","create","attrs","className","appendChild","innerHTML","toString","bind","clearLayout","unbind","remove","value","diff","addClass","removeClass","marginTop","show","hide","reloadGrid","Main","gridManager","reload","e","items","getItem","removeItemById","self"],"mappings":"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","file":"script.map.js"}