{"version":3,"sources":["script.js"],"names":["BX","CrmNewEntityCounterPanel","this","_id","_settings","_userId","_pullTagName","_pullCommands","_entityTypeId","_lastEntityId","_gridId","_counter","_wrapper","_container","_counterContainer","_counterWrapper","_previousNode","_currentNode","_nextNode","_refreshHandle","_refreshCallback","delegate","doRefresh","_refreshSuccessCallback","onRefreshSuccess","_resetCallback","reset","_resetSuccessCallback","onResetSuccess","_clickCallback","onClick","_isShown","_hasLayout","prototype","initialize","id","settings","type","isNotEmptyString","util","getRandomString","prop","getInteger","getString","isElementNode","style","display","_serviceUrl","getObject","addCustomEvent","onPullEvent","extendWatch","window","onGridReload","layout","resolveEntityCommand","pullCommand","key","hasOwnProperty","sender","args","cancelRefresh","setTimeout","command","params","entityCommand","refresh","isFunction","PULL","clearTimeout","ajax","url","add_url_param","action","method","dataType","data","ACTION","LAST_ENTITY_ID","ENTITY_TYPE_ID","onsuccess","setupCounter","create","attrs","className","appendChild","innerHTML","toString","bind","clearLayout","unbind","remove","value","diff","addClass","removeClass","marginTop","show","hide","reloadGrid","Main","gridManager","reload","e","self"],"mappings":"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","file":""}