function CrmWebFormEditScript(t){t=t||{};this.context=t.context;this.init()}CrmWebFormEditScript.prototype={init:function(){this.initTabs();this.initCopy();BX.onCustomEvent(window,"crm-web-form-edit-script",[this])},initTabs:function(){this.tabAttribute="data-bx-webform-script-tab-cont";this.buttonTabAttribute="data-bx-webform-script-tab-btn";this.buttonAttribute="data-bx-webform-script-copy-btn";this.copyTextAttribute="data-bx-webform-script-copy-text";this.selectorAttribute="data-bx-webform-script-selector";this.kindAttribute="data-bx-webform-script-kind";this.selectorButton=this.context.querySelector("["+this.selectorAttribute+"]");if(this.selectorButton){BX.bind(this.selectorButton,"change",this.changeScriptKind.bind(this))}this.tabNodeList=this.context.querySelectorAll("["+this.tabAttribute+"]");this.tabNodeList=BX.convert.nodeListToArray(this.tabNodeList);this.currentTabNode=this.tabNodeList[0];this.tabBtnNodeList=this.context.querySelectorAll("["+this.buttonTabAttribute+"]");this.tabBtnNodeList=BX.convert.nodeListToArray(this.tabBtnNodeList);this.tabBtnNodeList.forEach(this.bindTabButtonClick,this);this.copyButtonList=this.context.querySelectorAll("["+this.buttonAttribute+"]");this.copyButtonList=BX.convert.nodeListToArray(this.copyButtonList);this.copyButtonScriptList=[]},changeScriptKind:function(){var t=!this.selectorButton||this.selectorButton.checked;var i=this.context.querySelectorAll("["+this.kindAttribute+"]");i=BX.convert.nodeListToArray(i);i.forEach(function(i){var e=i.getAttribute(this.kindAttribute)==="old";var o=e&&t||!e&&!t;i.style.display=o?"":"none"},this)},bindTabButtonClick:function(t){var i=this;BX.bind(t,"click",function(){var t=this.getAttribute(i.buttonTabAttribute);i.showTab(t)})},showTab:function(t){this.tabBtnNodeList.forEach(function(i){var e=i.getAttribute(this.buttonTabAttribute);if(t==e){BX.addClass(i,"crm-webform-script-tab-item-active")}else{BX.removeClass(i,"crm-webform-script-tab-item-active")}},this);this.tabNodeList.forEach(function(i){var e=i.getAttribute(this.tabAttribute);i.style.display=t==e?"block":"none";if(t==e){this.currentTabNode=i}},this);this.copyButtonScriptList.forEach(function(i){var e=i.getAttribute(this.buttonAttribute);var o="SCRIPT_"+t;i.style.display=o==e?"":"none"},this)},getCurrentCopyText:function(){var t="["+this.kindAttribute+"]";var i=this.currentTabNode.querySelector(t);var e=i.querySelector("["+this.copyTextAttribute+"]");if(e){return e.innerText}else{return""}},hideCopyTextButtons:function(t){this.copyButtonScriptList[0].parentNode.style.display="none"},initCopy:function(){this.copyButtonList.forEach(function(t){if(!BX.clipboard.isCopySupported()){t.style.display="none";return}var i=t.getAttribute(this.buttonAttribute);if(i.substr(0,6)==="SCRIPT"){this.copyButtonScriptList.push(t)}BX.bind(t,"click",function(){var e="["+this.kindAttribute+"]";var o=this.context.querySelector(e+" ["+this.copyTextAttribute+'="'+i+'"]');if(!o){return}BX.clipboard._onCopyClick(BX.util.getRandomString(5),t,o,{offsetLeft:30})}.bind(this))},this)}};
//# sourceMappingURL=script.map.js