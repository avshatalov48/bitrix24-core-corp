{"version":3,"file":"script.js","sources":["script.es6.js"],"sourcesContent":["import {Dom, Event, Loc, Reflection, Tag, Type, ajax} from \"main.core\";\nimport {QrAuth} from 'crm.terminal';\n\nconst namespace = Reflection.namespace('BX.Crm.Component');\n\nclass TerminalEmptyState {\n\tzone;\n\ttemplateFolder;\n\tsberbankPaySystemPath;\n\tspbPaySystemPath;\n\n\tconstructor(options = {})\n\t{\n\t\tthis.emptyState = null;\n\n\t\tthis.renderNode = options.renderNode || null;\n\t\tthis.zone = options.zone || null;\n\t\tthis.templateFolder = options.templateFolder || '';\n\n\t\tthis.sberbankPaySystemPath = options.sberbankPaySystemPath || null;\n\t\tthis.spbPaySystemPath = options.spbPaySystemPath || null;\n\t}\n\n\tgetEmptyState(): HTMLElement\n\t{\n\t\tconst phrase4 = Tag.render`<span>${Loc.getMessage('CRM_TERMINAL_EMPTY_STATE_COMPONENT_TEMPLATE_ITEM_4')}</span>`;\n\n\t\tconst yookassaSbp = phrase4.querySelector('yookassa_sbp');\n\t\tif (this.spbPaySystemPath && Type.isDomNode(yookassaSbp))\n\t\t{\n\t\t\tconst yookassaSbpLink = Tag.render`<a href=\"javascript:void(0)\">${yookassaSbp.innerHTML}</a>`;\n\t\t\tEvent.bind(yookassaSbpLink, 'click', () => {\n\t\t\t\tthis.#openPaySystemSlider(this.spbPaySystemPath);\n\t\t\t});\n\n\t\t\tphrase4.replaceChild(yookassaSbpLink, yookassaSbp);\n\t\t}\n\n\t\tconst yookassaSberbank = phrase4.querySelector('yookassa_sberbank');\n\t\tif (this.sberbankPaySystemPath && Type.isDomNode(yookassaSberbank))\n\t\t{\n\t\t\tconst yookassaSberbankLink = Tag.render`<a href=\"javascript:void(0)\">${yookassaSberbank.innerHTML}</a>`;\n\t\t\tEvent.bind(yookassaSberbankLink, 'click', () => {\n\t\t\t\tthis.#openPaySystemSlider(this.sberbankPaySystemPath);\n\t\t\t});\n\n\t\t\tphrase4.replaceChild(yookassaSberbankLink, yookassaSberbank);\n\t\t}\n\n\t\tif (!this.emptyState)\n\t\t{\n\t\t\tconst container = Tag.render `\n\t\t\t\t<div class=\"crm-terminal-payment-list__empty--all-info\">\n\t\t\t\t\t<div class=\"crm-terminal-payment-list__empty--info-text-container\">\n\t\t\t\t\t\t<div class=\"crm-terminal-payment-list__empty--info-block-title\">\n\t\t\t\t\t\t\t<div class=\"crm-terminal-payment-list__empty--title-quickly\">${Loc.getMessage('CRM_TERMINAL_EMPTY_STATE_COMPONENT_TEMPLATE_TITLE')}</div>\n\t\t\t\t\t\t\t<div class=\"crm-terminal-payment-list__empty--title\">${Loc.getMessage('CRM_TERMINAL_EMPTY_STATE_COMPONENT_TEMPLATE_SUB_TITLE')}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"crm-terminal-payment-list__empty--info-block-content\">\n\t\t\t\t\t\t\t<ul class=\"crm-terminal-payment-list__empty--list-items\">\n\t\t\t\t\t\t\t\t<li class=\"crm-terminal-payment-list__empty--list-item\">${Loc.getMessage('CRM_TERMINAL_EMPTY_STATE_COMPONENT_TEMPLATE_ITEM_1')}</li>\n\t\t\t\t\t\t\t\t<li class=\"crm-terminal-payment-list__empty--list-item\">${Loc.getMessage('CRM_TERMINAL_EMPTY_STATE_COMPONENT_TEMPLATE_ITEM_2')}</li>\n\t\t\t\t\t\t\t\t<li class=\"crm-terminal-payment-list__empty--list-item\">${Loc.getMessage('CRM_TERMINAL_EMPTY_STATE_COMPONENT_TEMPLATE_ITEM_3')}</li>\n\t\t\t\t\t\t\t\t<li class=\"crm-terminal-payment-list__empty--list-item\">${phrase4}</li>\n\t\t\t\t\t\t\t\t<li class=\"crm-terminal-payment-list__empty--list-item\">${Loc.getMessage('CRM_TERMINAL_EMPTY_STATE_COMPONENT_TEMPLATE_ITEM_5')}</li>\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t<div class=\"crm-terminal-payment-list__empty--bth-container\">\n\t\t\t\t\t\t\t\t<a href=\"javascript:void(0)\" class=\"ui-btn ui-btn-lg ui-btn-success crm-terminal-payment-list__empty--bth-radiance\">\n\t\t\t\t\t\t\t\t\t<span class=\"crm-terminal-payment-list__empty--bth-radiance-left\"></span>\n\t\t\t\t\t\t\t\t\t${Loc.getMessage('CRM_TERMINAL_EMPTY_STATE_COMPONENT_TEMPLATE_BUTTON')}\n\t\t\t\t\t\t\t\t\t<span class=\"crm-terminal-payment-list__empty--bth-radiance-right\"></span>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"crm-terminal-payment-list__empty--info-image-block\">\n\t\t\t\t\t\t<img src=\"${this.getImageSrc()}\" alt=\"\" class=\"crm-terminal-payment-list__empty--info-image\"/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>`;\n\n\t\t\tthis.emptyState = container;\n\t\t}\n\n\t\treturn this.emptyState;\n\t}\n\n\tgetImageSrc(): string\n\t{\n\t\tif (this.zone === 'ru')\n\t\t{\n\t\t\treturn this.templateFolder + '/images/terminal_ru.svg';\n\t\t}\n\n\t\treturn this.templateFolder + '/images/terminal_en.svg';\n\t}\n\n\t#openPaySystemSlider(path: string)\n\t{\n\t\tconst sliderOptions = {\n\t\t\tcacheable: false,\n\t\t\tallowChangeHistory: false,\n\t\t\twidth: 1000,\n\t\t\tevents: {\n\t\t\t\tonClose: () => {\n\t\t\t\t\tthis.emptyState = null;\n\n\t\t\t\t\tajax.runComponentAction('bitrix:crm.terminal.emptystate', 'prepareResult', {\n\t\t\t\t\t\tmode: 'class',\n\t\t\t\t\t\tdata: {},\n\t\t\t\t\t}).then(\n\t\t\t\t\t\t(response) => {\n\t\t\t\t\t\t\tthis.sberbankPaySystemPath = response.data.sberbankPaySystemPath;\n\t\t\t\t\t\t\tthis.spbPaySystemPath = response.data.spbPaySystemPath;\n\n\t\t\t\t\t\t\tthis.renderNode.innerHTML = '';\n\t\t\t\t\t\t\tthis.render();\n\t\t\t\t\t\t},\n\t\t\t\t\t\t() => window.location.reload()\n\t\t\t\t\t);\n\t\t\t\t},\n\t\t\t}\n\t\t};\n\n\t\tBX.SidePanel.Instance.open(path, sliderOptions);\n\t}\n\n\tshow()\n\t{\n\t\tDom.append(this.getEmptyState(), this.renderNode);\n\t}\n\n\trender()\n\t{\n\t\tthis.show();\n\n\t\tconst buttonCreate = this.emptyState.querySelector('.crm-terminal-payment-list__empty--bth-radiance');\n\t\tbuttonCreate.addEventListener('click', () => {\n\t\t\t(new QrAuth).show();\n\t\t})\n\t}\n}\n\nnamespace.TerminalEmptyState = TerminalEmptyState;"],"names":["namespace","Reflection","TerminalEmptyState","options","emptyState","renderNode","zone","templateFolder","sberbankPaySystemPath","spbPaySystemPath","phrase4","Tag","render","Loc","getMessage","yookassaSbp","querySelector","Type","isDomNode","yookassaSbpLink","innerHTML","Event","bind","replaceChild","yookassaSberbank","yookassaSberbankLink","container","getImageSrc","Dom","append","getEmptyState","show","buttonCreate","addEventListener","QrAuth","path","sliderOptions","cacheable","allowChangeHistory","width","events","onClose","ajax","runComponentAction","mode","data","then","response","window","location","reload","BX","SidePanel","Instance","open"],"mappings":";;;;;;;AAAA,CAGA,IAAMA,SAAS,GAAGC,oBAAU,CAACD,SAAS,CAAC,kBAAkB,CAAC;CAAC;CAAA,IAErDE,kBAAkB;GAMvB,8BACA;KAAA,IADYC,OAAO,uEAAG,EAAE;KAAA;KAAA;KAEvB,IAAI,CAACC,UAAU,GAAG,IAAI;KAEtB,IAAI,CAACC,UAAU,GAAGF,OAAO,CAACE,UAAU,IAAI,IAAI;KAC5C,IAAI,CAACC,IAAI,GAAGH,OAAO,CAACG,IAAI,IAAI,IAAI;KAChC,IAAI,CAACC,cAAc,GAAGJ,OAAO,CAACI,cAAc,IAAI,EAAE;KAElD,IAAI,CAACC,qBAAqB,GAAGL,OAAO,CAACK,qBAAqB,IAAI,IAAI;KAClE,IAAI,CAACC,gBAAgB,GAAGN,OAAO,CAACM,gBAAgB,IAAI,IAAI;;GACxD;KAAA;KAAA,gCAGD;OAAA;OACC,IAAMC,OAAO,GAAGC,aAAG,CAACC,MAAM,mGAASC,aAAG,CAACC,UAAU,CAAC,oDAAoD,CAAC,CAAS;OAEhH,IAAMC,WAAW,GAAGL,OAAO,CAACM,aAAa,CAAC,cAAc,CAAC;OACzD,IAAI,IAAI,CAACP,gBAAgB,IAAIQ,cAAI,CAACC,SAAS,CAACH,WAAW,CAAC,EACxD;SACC,IAAMI,eAAe,GAAGR,aAAG,CAACC,MAAM,2HAAgCG,WAAW,CAACK,SAAS,CAAM;SAC7FC,eAAK,CAACC,IAAI,CAACH,eAAe,EAAE,OAAO,EAAE,YAAM;WAC1C,4BAAI,oDAAJ,KAAI,EAAsB,KAAI,CAACV,gBAAgB;UAC/C,CAAC;SAEFC,OAAO,CAACa,YAAY,CAACJ,eAAe,EAAEJ,WAAW,CAAC;;OAGnD,IAAMS,gBAAgB,GAAGd,OAAO,CAACM,aAAa,CAAC,mBAAmB,CAAC;OACnE,IAAI,IAAI,CAACR,qBAAqB,IAAIS,cAAI,CAACC,SAAS,CAACM,gBAAgB,CAAC,EAClE;SACC,IAAMC,oBAAoB,GAAGd,aAAG,CAACC,MAAM,2HAAgCY,gBAAgB,CAACJ,SAAS,CAAM;SACvGC,eAAK,CAACC,IAAI,CAACG,oBAAoB,EAAE,OAAO,EAAE,YAAM;WAC/C,4BAAI,oDAAJ,KAAI,EAAsB,KAAI,CAACjB,qBAAqB;UACpD,CAAC;SAEFE,OAAO,CAACa,YAAY,CAACE,oBAAoB,EAAED,gBAAgB,CAAC;;OAG7D,IAAI,CAAC,IAAI,CAACpB,UAAU,EACpB;SACC,IAAMsB,SAAS,GAAGf,aAAG,CAACC,MAAM,qyDAIuCC,aAAG,CAACC,UAAU,CAAC,mDAAmD,CAAC,EAC3ED,aAAG,CAACC,UAAU,CAAC,uDAAuD,CAAC,EAInED,aAAG,CAACC,UAAU,CAAC,oDAAoD,CAAC,EACpED,aAAG,CAACC,UAAU,CAAC,oDAAoD,CAAC,EACpED,aAAG,CAACC,UAAU,CAAC,oDAAoD,CAAC,EACpEJ,OAAO,EACPG,aAAG,CAACC,UAAU,CAAC,oDAAoD,CAAC,EAK3HD,aAAG,CAACC,UAAU,CAAC,oDAAoD,CAAC,EAO7D,IAAI,CAACa,WAAW,EAAE,CAEzB;SAER,IAAI,CAACvB,UAAU,GAAGsB,SAAS;;OAG5B,OAAO,IAAI,CAACtB,UAAU;;;KACtB;KAAA,8BAGD;OACC,IAAI,IAAI,CAACE,IAAI,KAAK,IAAI,EACtB;SACC,OAAO,IAAI,CAACC,cAAc,GAAG,yBAAyB;;OAGvD,OAAO,IAAI,CAACA,cAAc,GAAG,yBAAyB;;;KACtD;KAAA,uBAiCD;OACCqB,aAAG,CAACC,MAAM,CAAC,IAAI,CAACC,aAAa,EAAE,EAAE,IAAI,CAACzB,UAAU,CAAC;;;KACjD;KAAA,yBAGD;OACC,IAAI,CAAC0B,IAAI,EAAE;OAEX,IAAMC,YAAY,GAAG,IAAI,CAAC5B,UAAU,CAACY,aAAa,CAAC,iDAAiD,CAAC;OACrGgB,YAAY,CAACC,gBAAgB,CAAC,OAAO,EAAE,YAAM;SAC3C,IAAIC,mBAAM,GAAEH,IAAI,EAAE;QACnB,CAAC;;;GACF;CAAA;CAAA,+BA3CoBI,IAAY,EACjC;GAAA;GACC,IAAMC,aAAa,GAAG;KACrBC,SAAS,EAAE,KAAK;KAChBC,kBAAkB,EAAE,KAAK;KACzBC,KAAK,EAAE,IAAI;KACXC,MAAM,EAAE;OACPC,OAAO,EAAE,mBAAM;SACd,MAAI,CAACrC,UAAU,GAAG,IAAI;SAEtBsC,cAAI,CAACC,kBAAkB,CAAC,gCAAgC,EAAE,eAAe,EAAE;WAC1EC,IAAI,EAAE,OAAO;WACbC,IAAI,EAAE;UACN,CAAC,CAACC,IAAI,CACN,UAACC,QAAQ,EAAK;WACb,MAAI,CAACvC,qBAAqB,GAAGuC,QAAQ,CAACF,IAAI,CAACrC,qBAAqB;WAChE,MAAI,CAACC,gBAAgB,GAAGsC,QAAQ,CAACF,IAAI,CAACpC,gBAAgB;WAEtD,MAAI,CAACJ,UAAU,CAACe,SAAS,GAAG,EAAE;WAC9B,MAAI,CAACR,MAAM,EAAE;UACb,EACD;WAAA,OAAMoC,MAAM,CAACC,QAAQ,CAACC,MAAM,EAAE;WAC9B;;;IAGH;GAEDC,EAAE,CAACC,SAAS,CAACC,QAAQ,CAACC,IAAI,CAACnB,IAAI,EAAEC,aAAa,CAAC;CAChD;CAkBDpC,SAAS,CAACE,kBAAkB,GAAGA,kBAAkB;;;;"}