if(typeof BX.CrmFieldMultiEditor==="undefined"){BX.CrmFieldMultiEditor=function(){this.id="";this.mnemonic="";this.typeName="";this.defaultTypeValue="";this.referenceNames={};this.referenceSelectorNames={};this.container=null};BX.CrmFieldMultiEditor.prototype={initialize:function(e,t,i,r,n,a){this.id=e?e:"";this.mnemonic=t?t:"";this.typeName=i?i:"";this.referenceNames=n?n:{};this.referenceSelectorNames=n?BX.util.array_keys(n):{};this.defaultTypeValue=a?a:"";if(!r){throw"CrmFieldMultiEditor: Container is not defined!"}this.container=r},getId:function(){return this.id},getItemCount:function(){var e=this.container.querySelectorAll("[data-role='bx-crm-edit-fm-item']");return e?e.length:0},createItem:function(){var e=this.getItemCount();var t=this.mnemonic+"["+this.typeName+"]"+"[n"+(e+1)+"][VALUE_TYPE]";this.container.insertBefore(BX.create("DIV",{attrs:{className:"mobile-grid-field-contact-info","data-role":"bx-crm-edit-fm-item"},children:[BX.create("DIV",{attrs:{className:"mobile-grid-field-select"},children:[BX.create("INPUT",{props:{type:"hidden",name:t,id:t,value:this.defaultTypeValue}}),BX.create("a",{attrs:{href:"javascript:void(0)",className:"mobile-grid-field-contact-info-title"},html:this.referenceSelectorNames[0],events:{click:BX.proxy(function(){this.self.showTypeSelector(this.itemId)},{self:this,itemId:t})}})]}),BX.create("DIV",{attrs:{className:"mobile-grid-field-text",style:"padding-right: 50px"},children:[BX.create("INPUT",{props:{type:"text",name:this.mnemonic+"["+this.typeName+"]"+"[n"+(e+1)+"][VALUE]"}})]}),BX.create("del",{events:{click:BX.delegate(this.onItemDelete,this)}})]}),BX.findChild(this.container,{className:"mobile-grid-button"},true,false).parentNode);BX.onCustomEvent(window,"CrmFieldMultiEditorItemCreated",[this,this.id])},deleteItem:function(e){var t=e.querySelector("[data-role='entity-input-value']");if(t){t.value=""}if(e){e.style.display="none"}},onItemDelete:function(e){if(!e){e=window.event}this.deleteItem(e.target.parentNode)},showTypeSelector:function(e){if(!BX(e))return;BXMobileApp.UI.SelectPicker.show({callback:BX.proxy(function(t){for(var i in this.referenceNames){if(i==t.values[0]){BX(e).nextSibling.innerHTML=t.values[0];BX(e).value=this.referenceNames[i];break}}},this),values:this.referenceSelectorNames,default_value:this.referenceSelectorNames[0]})}};BX.CrmFieldMultiEditor.items={};BX.CrmFieldMultiEditor.create=function(e,t,i,r,n,a){var l=new BX.CrmFieldMultiEditor;l.initialize(e,t,i,r,n,a);this.items[e]=l;return l}}
//# sourceMappingURL=script.map.js