function crm_event_desc(t){BX("event_desc_short_"+t).style.display="none";BX("event_desc_full_"+t).style.display="block"}if(typeof BX.CrmEventListManager==="undefined"){BX.CrmEventListManager=function(){this._id="";this._settings={};this._entityTypeName="";this._entityId="";this._gridId="";this._tabId="";this._formId="";this._form=null;this._grid=null;this._deletionConfirmationDlg=null;this._currentItemId="";this._formTabShowHandler=BX.delegate(this._onFormTabShow,this);this._pageReloadHandler=BX.delegate(this._onBeforeEventPageReload,this)};BX.CrmEventListManager.prototype={initialize:function(t,e){this._id=t;this._settings=e?e:{};this._entityTypeName=this.getSetting("entityTypeName");this._entityId=this.getSetting("entityId");this._gridId=this.getSetting("gridId");this._tabId=this.getSetting("tabId");this._formId=this.getSetting("formId");var i="bxForm_"+this._formId;if(typeof window[i]!=="undefined"){this._form=window[i]}if(this._form){this.adjustGridFilter(this._form.GetActiveTabId());BX.addCustomEvent(this._form,"OnTabShow",this._formTabShowHandler);BX.addCustomEvent(window,"CrmBeforeEventPageReload",this._pageReloadHandler)}var n="bxGrid_"+this._gridId;if(typeof window[n]!=="undefined"){this._grid=window[n]}},release:function(){if(this._form){BX.removeCustomEvent(this._form,"OnTabShow",this._formTabShowHandler);BX.removeCustomEvent(window,"CrmBeforeEventPageReload",this._pageReloadHandler);this._form=null}if(this._grid){this._grid=null}},getSetting:function(t,e){return this._settings.hasOwnProperty(t)?this._settings[t]:e},getId:function(){return this._id},getMessage:function(t){var e=BX.CrmEventListManager.messages;return e.hasOwnProperty(t)?e[t]:t},adjustGridFilter:function(t){if(t!==this._tabId&&BX.InterfaceGridFilterPopup&&BX.InterfaceGridFilterPopup.items[this._gridId]){BX.InterfaceGridFilterPopup.items[this._gridId].close()}},addItem:function(){var t=this.getSetting("addItemUrl","");if(t===""){return}t=BX.util.add_url_param(t,{FORM_ID:this._formId.toUpperCase(),ENTITY_TYPE:this._entityTypeName,ENTITY_ID:this._entityId});var e=new BX.CDialog({content_url:t,width:"498",height:"275",resizable:false});e.Show()},_onFormTabShow:function(t){this.adjustGridFilter(t)},_onBeforeEventPageReload:function(t){var e=this._form.GetActiveTabId();if(e!==this._tabId){this._form.SelectTab(this._tabId)}BX.Main.gridManager.reload(this._gridId);t.cancel=true}};if(typeof BX.CrmEventListManager.messages==="undefined"){BX.CrmEventListManager.messages={}}BX.CrmEventListManager.items={};BX.CrmEventListManager.remove=function(t){if(!this.items.hasOwnProperty(t)){return}this.items[t].release();delete this.items[t]};BX.CrmEventListManager.create=function(t,e){if(this.items.hasOwnProperty(t)){this.items[t].release();delete this.items[t]}var i=new BX.CrmEventListManager;i.initialize(t,e);this.items[t]=i;return i}}
//# sourceMappingURL=script.map.js