BX.CrmProductSectionManager=function(){this._id="";this._settings={};this._dialogs={}};BX.CrmProductSectionManager.prototype={initialize:function(e,t){this._id=e;this._settings=t?t:{}},getSetting:function(e,t){return typeof this._settings[e]!="undefined"?this._settings[e]:t},getMessage:function(e){return typeof BX.CrmProductSectionManager.messages[e]!="undefined"?BX.CrmProductSectionManager.messages[e]:""},addSection:function(){this._dialogs["ADD"]={};var e=this._dialogs["ADD"]["POPUP"]=new BX.PopupWindow(this._id+"SectionAdd",null,{autoHide:false,draggable:true,offsetLeft:0,offsetTop:0,bindOptions:{forceBindPosition:false},closeByEsc:true,closeIcon:{top:"10px",right:"15px"},titleBar:this.getMessage("addDialogTitle"),events:{onPopupShow:function(){},onPopupClose:BX.delegate(function(){this._dialogs["ADD"]["POPUP"].destroy()},this),onPopupDestroy:BX.delegate(function(){delete this._dialogs["ADD"]},this)},content:this._prepareSectionAddDialogContent()});e.show();var t=this._dialogs["ADD"]["ELEMENTS"]["NAME"];BX.focus(t);t.select()},_prepareSectionAddDialogContent:function(){var e=BX.create("TABLE");var t=e.insertRow(-1);var i=t.insertCell(-1);t=e.insertRow(-1);i=t.insertCell(-1);var a=BX.create("DIV",{attrs:{"class":"bx-crm-popup-content"}});i.appendChild(a);a.appendChild(BX.create("LABEL",{attrs:{"class":"bx-crm-popup-label"},html:this.getMessage("nameFieldTitle")+":"}));if(!this._dialogs["ADD"]){this._dialogs["ADD"]={}}this._dialogs["ADD"]["ELEMENTS"]={};a.appendChild(this._dialogs["ADD"]["ELEMENTS"]["NAME"]=BX.create("INPUT",{attrs:{"class":"bx-crm-popup-input"},props:{type:"text",value:this.getMessage("defaultName")},style:{fontSize:"16px",marginTop:"10px"}}));a=BX.create("DIV",{attrs:{"class":"bx-crm-popup-buttons"},children:[BX.create("A",{attrs:{"class":"bx-crm-btn bx-crm-btn-big bx-crm-btn-green"},text:this.getMessage("addBtnText"),events:{click:BX.delegate(this._hanleSectionAddDialogSave,this)}}),BX.create("A",{attrs:{"class":"bx-crm-btn bx-crm-btn-big bx-crm-btn-transparent"},text:this.getMessage("cancelBtnText"),events:{click:BX.delegate(this._hanleSectionAddDialogCancel,this)}})]});i.appendChild(a);return e},_hanleSectionAddDialogSave:function(){var e=BX(this.getSetting("formID"));var t=BX(this.getSetting("actionField"));var i=BX(this.getSetting("nameField"));var a=this._dialogs["ADD"]["ELEMENTS"]["NAME"];if(e&&t&&i&&a){var s=a.value;if(!BX.type.isNotEmptyString(s)){alert(this.getMessage("emptyNameError"));return}if(a.value.length>0){t.value="ADD_SECTION";i.value=a.value;BX.showWait();e.submit()}}},_hanleSectionAddDialogCancel:function(){this._dialogs["ADD"]["POPUP"].close()},renameSection:function(e,t){this._dialogs["RENAME"]={};this._dialogs["RENAME"]["DATA"]={};this._dialogs["RENAME"]["DATA"]["ID"]=e;this._dialogs["RENAME"]["DATA"]["NAME"]=t;var i=this._dialogs["RENAME"]["POPUP"]=new BX.PopupWindow(this._id+"SectionRename",null,{autoHide:false,draggable:true,offsetLeft:0,offsetTop:0,bindOptions:{forceBindPosition:false},closeByEsc:true,closeIcon:{top:"10px",right:"15px"},titleBar:this.getMessage("renameDialogTitle"),events:{onPopupShow:function(){},onPopupClose:BX.delegate(function(){this._dialogs["RENAME"]["POPUP"].destroy()},this),onPopupDestroy:BX.delegate(function(){delete this._dialogs["RENAME"]},this)},content:this._prepareSectionRenameDialogContent()});i.show();var a=this._dialogs["RENAME"]["ELEMENTS"]["NAME"];BX.focus(a);a.select()},_prepareSectionRenameDialogContent:function(){var e=BX.create("TABLE");var t=e.insertRow(-1);var i=t.insertCell(-1);t=e.insertRow(-1);i=t.insertCell(-1);var a=BX.create("DIV",{attrs:{"class":"bx-crm-popup-content"}});i.appendChild(a);a.appendChild(BX.create("LABEL",{attrs:{"class":"bx-crm-popup-label"},html:this.getMessage("nameFieldTitle")+":"}));if(!this._dialogs["RENAME"]){this._dialogs["RENAME"]={}}this._dialogs["RENAME"]["ELEMENTS"]={};a.appendChild(this._dialogs["RENAME"]["ELEMENTS"]["NAME"]=BX.create("INPUT",{attrs:{"class":"bx-crm-popup-input"},props:{type:"text",value:this._dialogs["RENAME"]["DATA"]["NAME"]},style:{fontSize:"16px",marginTop:"10px"}}));a=BX.create("DIV",{attrs:{"class":"bx-crm-popup-buttons"},children:[BX.create("A",{attrs:{"class":"bx-crm-btn bx-crm-btn-big bx-crm-btn-green"},text:this.getMessage("renameBtnText"),events:{click:BX.delegate(this._hanleSectionRenameDialogSave,this)}}),BX.create("A",{attrs:{"class":"bx-crm-btn bx-crm-btn-big bx-crm-btn-transparent"},text:this.getMessage("cancelBtnText"),events:{click:BX.delegate(this._hanleSectionRenameDialogCancel,this)}})]});i.appendChild(a);return e},_hanleSectionRenameDialogSave:function(){BX.showWait();var e=BX(this.getSetting("formID"));var t=BX(this.getSetting("actionField"));var i=BX(this.getSetting("nameField"));var a=BX(this.getSetting("IDField"));var s=this._dialogs["RENAME"]["ELEMENTS"]["NAME"];var n=this._dialogs["RENAME"]["DATA"]["ID"];if(e&&t&&i&&s&&a&&n>0){if(s.value.length>0){t.value="RENAME_SECTION";i.value=s.value;a.value=n;e.submit()}}},_hanleSectionRenameDialogCancel:function(){this._dialogs["RENAME"]["POPUP"].close()}};BX.CrmProductSectionManager.getDefault=function(){return this._default};BX.CrmProductSectionManager.items={};BX.CrmProductSectionManager._default=null;BX.CrmProductSectionManager.create=function(e,t){var i=new BX.CrmProductSectionManager;i.initialize(e,t);this.items[e]=i;if(!this._default){this._default=i}return i};if(typeof BX.CrmProductSectionManager.messages=="undefined"){BX.CrmProductSectionManager.messages={}}
//# sourceMappingURL=script.map.js