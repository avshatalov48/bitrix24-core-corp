function CrmPermRemoveRow(e){var t=e.getAttribute("data-roleId");if(BX.type.isNotEmptyString(t)){BX.Access.DeleteSelected(t,"crmPerms")}BX.remove(e)}function CrmSelectEntityInit(){BX.Access.Init({other:{disabled:true}});BX.addCustomEvent(BX.Access,"onSelectProvider",CrmPermAccessSelectProvider)}function CrmSelectEntity(){BX.Access.SetSelected(arCrmSelected,"crmPerms");BX.Access.ShowForm({bind:"crmPerms",callback:CrmPermAddRow})}function CrmPermAddRow(e){for(var t in e){for(var r in e[t]){var n=BX("crmPermTableInsertTd");var s=BX.clone(n,true);s.setAttribute("data-roleId",r);s.style.display="";s.id="";var i=BX.findChild(s,{tag:"td"},false,false);i.id="";if(BX.Access.GetProviderName(t)!="")i.innerHTML="<b>"+BX.Access.GetProviderName(t)+":</b> "+e[t][r].name;else i.innerHTML=e[t][r].name;var o=BX.findChild(s,{tag:"select"},true,false);o.name="PERMS["+r+"][]";n.parentNode.insertBefore(s,n)}}}function CrmRoleDelete(e,t,r,n){var s=new BX.PopupWindow("CRM_ROLE_DELETE_"+Math.random().toString().substring(2),null,{autoHide:false,draggable:true,offsetLeft:0,offsetTop:0,bindOptions:{forceBindPosition:false},closeByEsc:true,closeIcon:{top:"10px",right:"15px"},titleBar:e,events:{onPopupClose:function(){if(s)s.destroy()}},content:BX.create("SPAN",{style:{marginLeft:"12px",marginTop:"12px"},text:t}),buttons:[new BX.PopupWindowButton({text:r,className:"popup-window-button-accept",events:{click:function(){s.close();window.location.href=n}}}),new BX.PopupWindowButton({text:BX.message("JS_CORE_WINDOW_CANCEL"),className:"popup-window-button-cancel",events:{click:function(){s.close()}}})]});s.show()}function _CrmPermDisableProvider(e){var t=BX("access_btn_"+e);if(t&&t.style.display!=="none"){t.style.display="none";var r=BX.findNextSibling(t,{"class":"access-buttons-delimiter"});if(r){r.style.display="none"}}}function CrmPermAccessSelectProvider(e){if(!(BX.Access&&arCrmPermSettings&&BX.type.isArray(arCrmPermSettings["DISABLED_PROVIDERS"])&&arCrmPermSettings["DISABLED_PROVIDERS"].length>0)){return}var t=BX.type.isNotEmptyString(e["provider"])?e["provider"]:BX.Access.selectedProvider;for(var r=0;r<arCrmPermSettings["DISABLED_PROVIDERS"].length;r++){var n=arCrmPermSettings["DISABLED_PROVIDERS"][r];if(n===t){BX.Access.SelectProvider("user")}_CrmPermDisableProvider(n)}}
//# sourceMappingURL=script.map.js