function crmImportStep(step,form_id){selectTab="tab_"+step;arDisable=new Array("tab_1","tab_2","tab_3","tab_4");arDisable.splice(step-1,1);var bxForm=eval("bxForm_"+form_id);bxForm.SelectTab(selectTab,true);for(var elDisable in arDisable){bxForm.ShowDisabledTab(arDisable[elDisable],true);BX("tab_cont_"+arDisable[elDisable]).className="bx-tab-container-disabled"}}function crmImportAjax(t){BX.ajax({url:BX.util.add_url_param(t,{import:"Y"}),method:"POST",dataType:"json",data:{},onsuccess:function(e){e["search"]=parseInt(e["search"]);e["import"]=parseInt(e["import"]);e["duplicate"]=parseInt(e["duplicate"]);e["error"]=parseInt(e["error"]);if(e["error"]>0){BX("crm_import_error").style.display="block";BX("crm_import_errata").style.display="block";BX("crm_import_example").style.display="block";if(parseInt(BX("crm_import_example").style.height)<399)BX("crm_import_example").style.height=parseInt(BX("crm_import_example").style.height)+68*e["error"]+"px";for(var r in e["error_data"]){tableRow=BX.create("tr");tableRowColumn=BX.create("td",{props:{colSpan:e["column"],className:"crm_import_example_table_td_error"}});tableRowColumn.innerHTML=e["error_data"][r]["message"];tableRow.appendChild(tableRowColumn);BX("crm_import_example_table_body").appendChild(tableRow);tableRow=BX.create("tr");for(var i in e["error_data"][r]["data"]){if(BX.type.isArray(e["error_data"][r]["data"][i])){if(tableRow===null){tableRow=BX.create("tr")}for(var a in e["error_data"][r]["data"][i]){tableRowColumn=BX.create("td",{text:e["error_data"][r]["data"][i][a]});tableRow.appendChild(tableRowColumn)}BX("crm_import_example_table_body").appendChild(tableRow);tableRow=null}else{tableRowColumn=BX.create("td",{text:e["error_data"][r]["data"][i]});tableRow.appendChild(tableRowColumn)}}if(tableRow!==null)BX("crm_import_example_table_body").appendChild(tableRow)}BX("crm_import_entity_error").innerHTML=parseInt(BX("crm_import_entity_error").innerHTML)+e["error"];BX("crm_import_entity_errata").href=e["errata_url"]}if(e["duplicate"]>0){BX("crm_import_entity_duplicate").innerHTML=parseInt(BX("crm_import_entity_duplicate").innerHTML)+e["duplicate"];if(BX.type.isNotEmptyString(e["duplicate_url"])){BX("crm_import_duplicate_file_url").href=e["duplicate_url"];BX("crm_import_duplicate_file_wrapper").style.display="block"}}if(e["search"]>0||e["import"]>0||e["error"]>0||e["duplicate"]>0){if(e["import"]>0){BX("crm_import_entity").innerHTML=parseInt(BX("crm_import_entity").innerHTML)+e["import"]}crmImportAjax(t)}else{BX("crm_import_entity_progress").innerHTML="";BX("crm_import_done").disabled=false;BX("crm_import_again").hidden=false;BX.ajax({url:BX.util.add_url_param(t,{complete_import:"Y"}),method:"POST",dataType:"json",data:{}})}},onfailure:function(t){BX("crm_import_entity_progress").innerHTML="";BX("crm_import_done").disabled=false;BX("crm_import_again").hidden=false}});return false}if(typeof BX.CrmFileImportConfig==="undefined"){BX.CrmFileImportConfig=function(){this._id="";this._settings={};this._dupControlTypeDescr=null;this._dupControlTypes=null};BX.CrmFileImportConfig.prototype={initialize:function(t,e){this._id=BX.type.isNotEmptyString(t)?t:"crm_file_import_config";this._settings=e?e:{};var r=this.getSetting("dupControlPrefix");this._dupControlTypes=this.getSetting("dupControlTypes",{});for(var i in this._dupControlTypes){if(!this._dupControlTypes.hasOwnProperty(i)){continue}var a=BX(r+i.toLowerCase());if(a){BX.bind(a,"change",BX.delegate(this._onDupControlTypeChange,this))}}this._dupControlTypeDescr=BX(this.getSetting("dupControlTypeDescrId"))},getSetting:function(t,e){return this._settings.hasOwnProperty(t)?this._settings[t]:e},_onDupControlTypeChange:function(t){if(!t){t=window.event}var e=BX.getEventTarget(t);if(e&&BX.type.isNotEmptyString(this._dupControlTypes[e.value])&&this._dupControlTypeDescr){this._dupControlTypeDescr.innerHTML=BX.util.htmlspecialchars(this._dupControlTypes[e.value])}}};BX.CrmFileImportConfig.create=function(t,e){var r=new BX.CrmFileImportConfig;r.initialize(t,e);return r}}BX.namespace("BX.Crm");if(typeof BX.Crm.CompanyImportSampleLink==="undefined"){BX.Crm.CompanyImportSampleLink=function(){this._id="";this._settings={}};BX.Crm.CompanyImportSampleLink.prototype={initialize:function(t,e){this._id=BX.type.isNotEmptyString(t)?t:"crm_imp_sample_link_"+Math.random().toString().substring(2);this._settings=e?e:{}},getSample:function(t){var e=t;var r=BX(this._settings["formId"]);if(r&&BX.type.isNotEmptyString(this._settings["rqImportOptionName"])){var i=r.querySelector("input[type=checkbox][name="+this._settings["rqImportOptionName"]+"]");if(i&&i.checked)e=BX.util.add_url_param(e,{impRq:"Y"})}window.location.href=e}};BX.Crm.CompanyImportSampleLink.items={};BX.Crm.CompanyImportSampleLink.create=function(t,e){var r=new BX.Crm.CompanyImportSampleLink;r.initialize(t,e);BX.Crm.CompanyImportSampleLink.items[t]=r;return r};BX.Crm.CompanyImportSampleLink.delete=function(t){if(BX.Crm.CompanyImportSampleLink.items.hasOwnProperty(t)){BX.Crm.CompanyImportSampleLink.items[t].destroy();delete BX.Crm.CompanyImportSampleLink.items[t]}}}
//# sourceMappingURL=script.map.js