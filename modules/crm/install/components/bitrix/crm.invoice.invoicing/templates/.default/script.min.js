BX.Invoicing={init:function(e){this.ajaxUrl=e.ajaxUrl},getMovementList:function(e){var i={};i.sessid=BX.bitrix_sessid();var a=BX("PAY_SYSTEM");if(a)i.PAY_SYSTEM_ID=a.value;var t=BX("INVOICING_TYPE");if(t)i.MODE=t.value;if(typeof e==="undefined"){BX.showWait();var s=BX("DATE_START");var r=BX("DATE_END");if(s)i.DATE_START=s.value;if(r)i.DATE_END=r.value}else{i.requestId=e}BX.ajax({method:"POST",dataType:"json",url:this.ajaxUrl,data:i,onsuccess:BX.proxy(function(e){if(e.hasOwnProperty("ERRORS")){BX.closeWait();alert(e.ERRORS)}else{if(e.hasOwnProperty("TIME")){var i=parseInt(e.TIME)*1e3;setTimeout(BX.proxy(this.getMovementList(e.REQUEST_ID),this),i)}else if(e.hasOwnProperty("GRID")){BX.closeWait();var a=BX("bx-crm-edit-form-wrapper");if(a){var t=BX.processHTML(e.GRID);a.innerHTML=t["HTML"];for(var s in t["SCRIPT"]){if(t["SCRIPT"].hasOwnProperty(s))BX.evalGlobal(t["SCRIPT"][s]["JS"])}}}else{alert(BX.message("CRM_RESULT_NO_FOUND"));BX.closeWait()}}},this),onfailure:function(){BX.closeWait();console.log("BX.Invoicing.getMovementList")}},this)}};
//# sourceMappingURL=script.map.js