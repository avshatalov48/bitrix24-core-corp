BX.namespace("BX.Crm");if(typeof BX.Crm.OrderProductDetails==="undefined"){BX.Crm.OrderProductDetails=function(){this._id="";this._settings={}};BX.Crm.OrderProductDetails.prototype={initialize:function(e,t){this._id=BX.type.isNotEmptyString(e)?e:BX.util.getRandomString(4);this._settings=t?t:{};if(BX.Crm.EntityEditor!=="undefined"){this._editor=BX.Crm.EntityEditor.getDefault();this.setEditorSaveSuccess();this.setEditorInnerCancel()}},setEditorSaveSuccess:function(){var e=this._settings;this._editor.saveChanged=function(){if(!this.hasChangedControls()&&!this.hasChangedControllers()){return}for(var t=0,i=this._activeControls.length;t<i;t++){var n=this._activeControls[t];n.save()}var o={field:this._model.getData(),basketId:e.basketId,orderId:this.getEntityId()};var r=BX.prop.getBoolean(e,"isNew",true)?"CrmOrderBasketItem::Create":"CrmOrderBasketItem::Update";window.top.BX.SidePanel.Instance.postMessage(window,r,o);if(typeof top.BX.SidePanel!=="undefined"){this._enableCloseConfirmation=false;window.setTimeout(function(){var e=top.BX.SidePanel.Instance.getSliderByWindow(window);if(e&&e.isOpen()){e.close(false);setTimeout(function(){e.destroy()},500)}},250)}}},setEditorInnerCancel:function(){this._editor.innerCancel=function(){if(typeof top.BX.SidePanel!=="undefined"){this._enableCloseConfirmation=false;window.setTimeout(function(){var e=top.BX.SidePanel.Instance.getSliderByWindow(window);if(e&&e.isOpen()){e.close(false);setTimeout(function(){e.destroy()},500)}},250)}}}};BX.Crm.OrderProductDetails.create=function(e,t){var i=new BX.Crm.OrderProductDetails;i.initialize(e,t);return i}}