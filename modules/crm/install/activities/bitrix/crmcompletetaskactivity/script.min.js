(function(e,t){"use strict";function a(e,t){var a=typeof Symbol!=="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=r(e))||t&&e&&typeof e.length==="number"){if(a)e=a;var i=0;var s=function e(){};return{s:s,n:function t(){if(i>=e.length)return{done:true};return{done:false,value:e[i++]}},e:function e(t){throw t},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l=true,n=false,o;return{s:function t(){a=a.call(e)},n:function e(){var t=a.next();l=t.done;return t},e:function e(t){n=true;o=t},f:function e(){try{if(!l&&a["return"]!=null)a["return"]()}finally{if(n)throw o}}}}function r(e,t){if(!e)return;if(typeof e==="string")return i(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor)a=e.constructor.name;if(a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return i(e,t)}function i(e,t){if(t==null||t>e.length)t=e.length;for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function s(e,t,a){l(e,t);t.set(e,a)}function l(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}var n=t.Reflection.namespace("BX.Crm.Automation.Activity");var o=new WeakMap;var c=new WeakMap;var v=new WeakMap;var b=new WeakMap;var u=new WeakMap;var p=new WeakMap;var f=function(){function e(a){var r=this;babelHelpers.classCallCheck(this,e);s(this,o,{writable:true,value:void 0});s(this,c,{writable:true,value:void 0});s(this,v,{writable:true,value:void 0});s(this,b,{writable:true,value:void 0});s(this,u,{writable:true,value:void 0});s(this,p,{writable:true,value:void 0});babelHelpers.classPrivateFieldSet(this,o,document.forms.namedItem(a.formName));if(!t.Type.isArray(a.chosenStages)){a.chosenStages=[]}babelHelpers.classPrivateFieldSet(this,b,babelHelpers.classPrivateFieldGet(this,o)["target_category"]);babelHelpers.classPrivateFieldSet(this,u,babelHelpers.classPrivateFieldGet(this,o)["target_status[]"]);babelHelpers.classPrivateFieldSet(this,c,new Set(a.chosenStages.map((function(e){return String(e)}))));babelHelpers.classPrivateFieldSet(this,p,a.isRobot);babelHelpers.classPrivateFieldSet(this,v,{});if(t.Type.isPlainObject(a.stages)){for(var i=0,l=Object.entries(a.stages);i<l.length;i++){var n=babelHelpers.slicedToArray(l[i],2),f=n[0],d=n[1];babelHelpers.classPrivateFieldGet(this,v)[f]=d.map((function(e){return{id:String(e.id),name:String(e.name)}}))}}else if(t.Type.isArray(a.stages)){a.stages.forEach((function(e,t){babelHelpers.classPrivateFieldGet(r,v)[t]=e.map((function(e){return{id:String(e.id),name:String(e.name)}}))}))}}babelHelpers.createClass(e,[{key:"init",value:function e(){if(babelHelpers.classPrivateFieldGet(this,b).options.length<=1){if(babelHelpers.classPrivateFieldGet(this,p)){t.Dom.remove(babelHelpers.classPrivateFieldGet(this,b).parentElement)}else{t.Dom.remove(babelHelpers.classPrivateFieldGet(this,b).parentElement.parentElement)}}else{this.updateStages()}}},{key:"updateStages",value:function e(){t.Dom.clean(babelHelpers.classPrivateFieldGet(this,u));this.renderStages()}},{key:"render",value:function e(){if(babelHelpers.classPrivateFieldGet(this,b)){babelHelpers.classPrivateFieldGet(this,b).onchange=this.updateStages.bind(this)}}},{key:"renderStages",value:function e(){var r=this;if(babelHelpers.classPrivateFieldGet(this,v).hasOwnProperty(babelHelpers.classPrivateFieldGet(this,b).value)){var i=babelHelpers.classPrivateFieldGet(this,v)[babelHelpers.classPrivateFieldGet(this,b).value];i.forEach((function(e){var t=e.id,a=e.name;var i=new Option(a,t,false,babelHelpers.classPrivateFieldGet(r,c).has(t));babelHelpers.classPrivateFieldGet(r,u).append(i)}))}else{var s=a(babelHelpers.classPrivateFieldGet(this,b).options),l;try{var n=function e(){var a=l.value;var i=a.value;var s=a.text;if(babelHelpers.classPrivateFieldGet(r,v).hasOwnProperty(i)){babelHelpers.classPrivateFieldGet(r,v)[i].forEach((function(e){var a=e.id,i=e.name;var l=t.Text.encode("".concat(s," / ").concat(i));var n=new Option(l,a,false,babelHelpers.classPrivateFieldGet(r,c).has(a));babelHelpers.classPrivateFieldGet(r,u).append(n)}))}};for(s.s();!(l=s.n()).done;){n()}}catch(e){s.e(e)}finally{s.f()}}}}]);return e}();n.CompleteTaskActivity=f;e.CompleteTaskActivity=f})(this.window=this.window||{},BX);
//# sourceMappingURL=script.map.js