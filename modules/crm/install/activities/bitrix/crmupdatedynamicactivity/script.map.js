{"version":3,"file":"script.map.js","names":["exports","main_core","main_popup","bizproc_automation","namespace","Reflection","CrmUpdateDynamicActivity","options","_this","this","babelHelpers","classCallCheck","Type","isPlainObject","documentType","isRobot","form","document","forms","formName","isNil","entityTypeIdSelect","dynamic_type_id","currentEntityTypeId","value","entityTypeDependentElements","querySelectorAll","Document","rawDocumentType","documentFields","title","documentName","fieldsListSelect","querySelector","addConditionButton","entitiesFieldsContainers","conditinIdPrefix","fieldsMap","Map","Object","entries","filterFieldsContainer","filteringFieldsPrefix","filterFieldsMap","BX","Bizproc","Automation","API","conditionGroup","ConditionGroup","conditions","currentValues","Array","from","keys","forEach","entityTypeId","set","isObject","createClass","key","init","Event","bind","onEntityTypeIdChange","onFieldsListSelectClick","onAddConditionButtonClick","initAutomationContext","_this2","getGlobalContext","onOpenFilterFieldsMenu","event","dialog","Designer","getInstance","getRobotSettingsDialog","template","robot","onOpenMenu","error","setGlobalContext","Context","addBPFields","getData","selector","getSelectorProperties","_ref","properties","objectName","expressionPrefix","map","_ref2","_ref3","slicedToArray","id","property","Name","customData","field","Id","ObjectName","SystemExpression","concat","Expression","getGlobalSelectorProperties","_ref4","visibilityNames","_ref5","_ref6","Visibility","supertitle","addGroup","Loc","getMessage","children","window","arWorkflowParameters","arWorkflowVariables","arWorkflowConstants","arWorkflowGlobalVariables","wfGVarVisibilityNames","arWorkflowGlobalConstants","wfGConstVisibilityNames","Dom","clean","elem","remove","render","element","hide","show","renderFilterFields","renderEntityFields","ConditionGroupSelector","fields","values","get","fieldPrefix","caption","head","collapsed","modern","parentNode","firstElementChild","append","createNode","_this3","fieldId","addCondition","preventDefault","activity","menuItems","_ref7","_ref8","text","onclick","_","item","popupWindow","close","menuManagerOptions","Math","random","toString","bindElement","items","autoHide","offsetLeft","getPosition","width","angle","position","offset","zIndex","className","events","onPopupClose","destroy","MenuManager","defaultFieldId","addRobotCondition","addBizprocCondition","conditionId","titleNode","create","attrs","deleteButton","props","href","click","deleteCondition","fieldNode","renderField","appendChild","getElementById","newConditionRow","insertRow","substr","entityFieldSelect","getCurrentFieldsOptions","change","fieldValueNode","newFieldId","srcElement","replaceChild","equalSignNode","entityFieldValueNode","deleteConditionButton","node","insertCell","selectedFieldId","_ref9","_ref10","FieldName","selected","undefined","FieldType","renderControl","Main"],"sources":["script.js"],"mappings":"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"}