{"version":3,"file":"script.js","sources":["script.es6.js"],"sourcesContent":["import {Reflection, Type, Event, Dom, Loc} from 'main.core';\nimport {MenuManager} from 'main.popup';\nimport {\n\tContext,\n\tConditionGroup,\n\tConditionGroupSelector,\n\tDocument,\n\tgetGlobalContext,\n\tsetGlobalContext,\n\tDesigner,\n\tInlineSelector,\n} from 'bizproc.automation';\n\nconst namespace = Reflection.namespace('BX.Crm.Activity');\n\nclass CrmUpdateDynamicActivity\n{\n\tdocumentType: Array<string>;\n\tdocument: Document;\n\tisRobot: boolean;\n\tentityTypeIdSelect: HTMLSelectElement;\n\tfieldsListSelect: HTMLSelectElement;\n\tentitiesFieldsContainers: HTMLDivElement | HTMLTableElement;\n\n\tfilterFieldsContainer: HTMLDivElement | null;\n\tfilteringFieldsPrefix: string;\n\tfilterFieldsMap: Map<string, object>;\n\tconditionGroup: ConditionGroup | undefined;\n\n\tcurrentEntityTypeId: number;\n\tfieldsMap: Map<string, object>;\n\tcurrentValues: Map<string, object>;\n\n\tonOpenFilterFieldsMenu: ?Function;\n\n\tconstructor(options)\n\t{\n\t\tif (Type.isPlainObject(options))\n\t\t{\n\t\t\tthis.documentType = options.documentType;\n\t\t\tthis.isRobot = options.isRobot;\n\t\t\tconst form = document.forms[options.formName];\n\n\t\t\tif (!Type.isNil(form))\n\t\t\t{\n\t\t\t\tthis.entityTypeIdSelect = form.dynamic_type_id;\n\t\t\t\tthis.currentEntityTypeId = this.entityTypeIdSelect.value;\n\t\t\t\tthis.entityTypeDependentElements = document.querySelectorAll(\n\t\t\t\t\t'[data-role=\"bca-cuda-entity-type-id-dependent\"]',\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tthis.document = new Document({\n\t\t\t\trawDocumentType: this.documentType,\n\t\t\t\tdocumentFields: options.documentFields,\n\t\t\t\ttitle: options.documentName,\n\t\t\t});\n\t\t\tif (this.isRobot)\n\t\t\t{\n\t\t\t\tthis.fieldsListSelect = document.querySelector('[data-role=\"bca-cuda-fields-list\"]');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.addConditionButton = document.querySelector('[data-role=\"bca_cuda_add_condition\"]');\n\t\t\t}\n\t\t\tthis.entitiesFieldsContainers = document.querySelector('[data-role=\"bca-cuda-fields-container\"]');\n\t\t\tthis.conditinIdPrefix = 'id_bca_cuda_field_';\n\n\t\t\tthis.fieldsMap = new Map(Object.entries(options.fieldsMap));\n\n\t\t\tthis.filterFieldsContainer = document.querySelector('[data-role=\"bca-cuda-filter-fields-container\"]');\n\t\t\tthis.filteringFieldsPrefix = options.filteringFieldsPrefix;\n\t\t\tthis.filterFieldsMap = new Map(Object.entries(options.filterFieldsMap));\n\n\t\t\t// issue 0158608\n\t\t\tif (!Type.isNil(options.documentType) && !this.isRobot)\n\t\t\t{\n\t\t\t\tBX.Bizproc.Automation.API.documentType = options.documentType;\n\t\t\t}\n\t\t\tthis.conditionGroup = new ConditionGroup(options.conditions);\n\n\t\t\tthis.currentValues = new Map();\n\t\t\tArray\n\t\t\t\t.from(this.fieldsMap.keys())\n\t\t\t\t.forEach((entityTypeId) => this.currentValues.set(entityTypeId, {}));\n\n\t\t\tif (!Type.isNil(this.currentEntityTypeId) && Type.isObject(options.currentValues))\n\t\t\t{\n\t\t\t\tthis.currentValues.set(this.currentEntityTypeId, options.currentValues);\n\t\t\t}\n\t\t}\n\t}\n\n\tinit(): void\n\t{\n\t\tif (\n\t\t\tthis.entityTypeIdSelect\n\t\t\t&& this.fieldsMap\n\t\t\t&& this.entitiesFieldsContainers\n\t\t)\n\t\t{\n\t\t\tEvent.bind(this.entityTypeIdSelect, 'change', this.onEntityTypeIdChange.bind(this));\n\t\t}\n\n\t\tif (this.isRobot && this.fieldsListSelect)\n\t\t{\n\t\t\tEvent.bind(this.fieldsListSelect, 'click', this.onFieldsListSelectClick.bind(this));\n\t\t}\n\t\telse if (!this.isRobot && this.addConditionButton)\n\t\t{\n\t\t\tEvent.bind(this.addConditionButton, 'click', this.onAddConditionButtonClick.bind(this));\n\t\t}\n\n\t\tthis.initAutomationContext();\n\t}\n\n\tinitAutomationContext()\n\t{\n\t\ttry\n\t\t{\n\t\t\tgetGlobalContext();\n\t\t\tif (this.isRobot)\n\t\t\t{\n\t\t\t\tthis.onOpenFilterFieldsMenu = (event) => {\n\t\t\t\t\tconst dialog = Designer.getInstance().getRobotSettingsDialog();\n\t\t\t\t\tconst template = dialog.template;\n\t\t\t\t\tconst robot = dialog.robot;\n\t\t\t\t\tif (template && robot)\n\t\t\t\t\t{\n\t\t\t\t\t\ttemplate.onOpenMenu(event, robot);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t\tcatch(error)\n\t\t{\n\t\t\tsetGlobalContext(new Context({document: this.document}));\n\t\t\tthis.onOpenFilterFieldsMenu = (event) => this.addBPFields(event.getData().selector);\n\t\t}\n\t}\n\n\taddBPFields(selector: InlineSelector): void\n\t{\n\t\tconst getSelectorProperties = ({properties, objectName, expressionPrefix}) => {\n\t\t\tif (Type.isObject(properties))\n\t\t\t{\n\t\t\t\treturn Object.entries(properties).map(([id, property]) => ({\n\t\t\t\t\tid,\n\t\t\t\t\ttitle: property.Name,\n\t\t\t\t\tcustomData: {\n\t\t\t\t\t\tfield: {\n\t\t\t\t\t\t\tId: id,\n\t\t\t\t\t\t\tType: property.Type,\n\t\t\t\t\t\t\tName: property.Name,\n\t\t\t\t\t\t\tObjectName: objectName,\n\t\t\t\t\t\t\tSystemExpression: `{=${objectName}:${id}}`,\n\t\t\t\t\t\t\tExpression: expressionPrefix ? `{{${expressionPrefix}:${id}}}` : `{=${objectName}:${id}}`,\n\t\t\t\t\t\t},\n\t\t\t\t\t}\n\t\t\t\t}));\n\t\t\t}\n\n\t\t\treturn [];\n\t\t}\n\t\tconst getGlobalSelectorProperties = ({properties, visibilityNames, objectName}) => {\n\t\t\tif (Type.isObject(properties))\n\t\t\t{\n\t\t\t\treturn Object.entries(properties).map(([id, property]) => {\n\t\t\t\t\tconst field = {\n\t\t\t\t\t\tid,\n\t\t\t\t\t\tType: property.Type,\n\t\t\t\t\t\ttitle: property.Name,\n\t\t\t\t\t\tObjectName: objectName,\n\t\t\t\t\t\tSystemExpression: `{=${objectName}:${id}}`,\n\t\t\t\t\t\tExpression: `{=${objectName}:${id}}`,\n\t\t\t\t\t}\n\n\t\t\t\t\tif (property.Visibility && visibilityNames[property.Visibility])\n\t\t\t\t\t{\n\t\t\t\t\t\tfield.Expression = `{{${visibilityNames[property.Visibility]}:${property.Name}}}`;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\tid,\n\t\t\t\t\t\ttitle: property.Name,\n\t\t\t\t\t\tsupertitle: visibilityNames[property.Visibility],\n\t\t\t\t\t\tcustomData: { field },\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\n\t\t\treturn [];\n\t\t}\n\n\t\tselector.addGroup('workflowParameters', {\n\t\t\tid: 'workflowParameters',\n\t\t\ttitle: Loc.getMessage('BIZPROC_WFEDIT_MENU_PARAMS'),\n\t\t\tchildren: [\n\t\t\t\t{\n\t\t\t\t\tid: 'parameters',\n\t\t\t\t\ttitle: Loc.getMessage('BIZPROC_AUTOMATION_CMP_PARAMETERS_LIST'),\n\t\t\t\t\tchildren: getSelectorProperties({\n\t\t\t\t\t\tproperties: window.arWorkflowParameters || {},\n\t\t\t\t\t\tobjectName: 'Template',\n\t\t\t\t\t\texpressionPrefix: '~*',\n\t\t\t\t\t}),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: 'variables',\n\t\t\t\t\ttitle: Loc.getMessage('BIZPROC_AUTOMATION_CMP_GLOB_VARIABLES_LIST_1'),\n\t\t\t\t\tchildren: getSelectorProperties({\n\t\t\t\t\t\tproperties: window.arWorkflowVariables || {},\n\t\t\t\t\t\tobjectName: 'Variable',\n\t\t\t\t\t}),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: 'constants',\n\t\t\t\t\ttitle: Loc.getMessage('BIZPROC_AUTOMATION_CMP_CONSTANTS_LIST'),\n\t\t\t\t\tchildren: getSelectorProperties({\n\t\t\t\t\t\tproperties: window.arWorkflowConstants || {},\n\t\t\t\t\t\tobjectName: 'Constant',\n\t\t\t\t\t\texpressionPrefix: '~&',\n\t\t\t\t\t}),\n\t\t\t\t},\n\t\t\t],\n\t\t});\n\t\tif (window.arWorkflowGlobalVariables && window.wfGVarVisibilityNames)\n\t\t{\n\t\t\tselector.addGroup('globalVariables', {\n\t\t\t\tid: 'globalVariables',\n\t\t\t\ttitle: Loc.getMessage('BIZPROC_AUTOMATION_CMP_GLOB_VARIABLES_LIST'),\n\t\t\t\tchildren: getGlobalSelectorProperties({\n\t\t\t\t\tproperties: window.arWorkflowGlobalVariables || {},\n\t\t\t\t\tvisibilityNames: window.wfGVarVisibilityNames || {},\n\t\t\t\t\tobjectName: 'GlobalVar',\n\t\t\t\t}),\n\t\t\t});\n\t\t}\n\t\tselector.addGroup('globalConstants', {\n\t\t\tid: 'globalConstants',\n\t\t\ttitle: Loc.getMessage('BIZPROC_AUTOMATION_CMP_GLOB_CONSTANTS_LIST'),\n\t\t\tchildren: getGlobalSelectorProperties({\n\t\t\t\tproperties: window.arWorkflowGlobalConstants || {},\n\t\t\t\tvisibilityNames: window.wfGConstVisibilityNames || {},\n\t\t\t\tobjectName: 'GlobalConst',\n\t\t\t}),\n\t\t});\n\t}\n\n\tonEntityTypeIdChange(): void\n\t{\n\t\tthis.currentEntityTypeId = this.entityTypeIdSelect.value;\n\n\t\tDom.clean(this.filterFieldsContainer);\n\t\tthis.conditionGroup = new ConditionGroup();\n\n\t\tArray\n\t\t\t.from(this.entitiesFieldsContainers.children)\n\t\t\t.forEach((elem) => Dom.remove(elem));\n\n\t\tthis.render();\n\t}\n\n\trender(): void\n\t{\n\t\tif (Type.isNil(this.currentEntityTypeId) || this.currentEntityTypeId === '')\n\t\t{\n\t\t\tthis.entityTypeDependentElements.forEach((element) => Dom.hide(element));\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.entityTypeDependentElements.forEach((element) => Dom.show(element));\n\t\t\tthis.renderFilterFields();\n\t\t\tthis.renderEntityFields();\n\t\t}\n\t}\n\n\trenderFilterFields(): void\n\t{\n\t\tif (\n\t\t\t!Type.isNil(this.conditionGroup)\n\t\t\t&& !Type.isNil(this.currentEntityTypeId)\n\t\t)\n\t\t{\n\t\t\tconst selector = new ConditionGroupSelector(this.conditionGroup, {\n\t\t\t\tfields: Object.values(this.filterFieldsMap.get(this.currentEntityTypeId)),\n\t\t\t\tfieldPrefix: this.filteringFieldsPrefix,\n\t\t\t\tonOpenMenu: this.onOpenFilterFieldsMenu,\n\t\t\t});\n\n\t\t\tthis.filterFieldsContainer.appendChild(selector.createNode());\n\t\t}\n\t}\n\n\trenderEntityFields(): void\n\t{\n\t\tObject\n\t\t\t.keys(this.currentValues.get(this.currentEntityTypeId))\n\t\t\t.forEach((fieldId) => this.addCondition(fieldId));\n\t}\n\n\tonFieldsListSelectClick(event)\n\t{\n\t\tconst fields = this.fieldsMap.get(this.currentEntityTypeId);\n\t\tif (Type.isNil(fields))\n\t\t{\n\t\t\treturn event.preventDefault();\n\t\t}\n\n\t\tconst activity = this;\n\t\tconst menuItems = Object.entries(fields).map(([fieldId, field]) => ({\n\t\t\tfieldId,\n\t\t\ttext: field.Name,\n\t\t\tonclick(_, item)\n\t\t\t{\n\t\t\t\tthis.popupWindow.close();\n\t\t\t\tactivity.addCondition(item.fieldId);\n\t\t\t},\n\t\t}));\n\n\t\tconst menuManagerOptions = {\n\t\t\tid: Math.random().toString(),\n\t\t\tbindElement: this.fieldsListSelect,\n\t\t\titems: Array.from(menuItems),\n\t\t\tautoHide: true,\n\t\t\toffsetLeft: Dom.getPosition(this.fieldsListSelect).width / 2,\n\t\t\tangle: {\n\t\t\t\tposition: 'top',\n\t\t\t\toffset: 0,\n\t\t\t},\n\t\t\tzIndex: 200,\n\t\t\tclassName: 'bizproc-automation-inline-selector-menu',\n\t\t\tevents: {\n\t\t\t\tonPopupClose()\n\t\t\t\t{\n\t\t\t\t\tthis.destroy();\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\t\tMenuManager.show(menuManagerOptions);\n\n\t\treturn event.preventDefault();\n\t}\n\n\tonAddConditionButtonClick(event): void\n\t{\n\t\tconst defaultFieldId = Object.keys(this.fieldsMap.get(this.currentEntityTypeId))[0];\n\t\tthis.addCondition(defaultFieldId);\n\n\t\treturn event.preventDefault();\n\t}\n\n\taddCondition(fieldId: string): void\n\t{\n\t\tif (this.isRobot)\n\t\t{\n\t\t\tthis.addRobotCondition(fieldId);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.addBizprocCondition(fieldId);\n\t\t}\n\t}\n\n\taddRobotCondition(fieldId: string): void\n\t{\n\t\tconst conditionId = this.conditinIdPrefix + fieldId;\n\n\t\tconst titleNode = Dom.create('span', {\n\t\t\tattrs: {\n\t\t\t\tclassName: 'bizproc-automation-popup-settings-title bizproc-automation-popup-settings-title-autocomplete',\n\t\t\t},\n\t\t\ttext: this.fieldsMap.get(this.currentEntityTypeId)[fieldId].Name,\n\t\t});\n\n\t\tconst deleteButton = Dom.create('a', {\n\t\t\tattrs: {\n\t\t\t\tclassName: 'bizproc-automation-popup-settings-delete bizproc-automation-popup-settings-link bizproc-automation-popup-settings-link-light',\n\t\t\t},\n\t\t\tprops: {href: '#'},\n\t\t\ttext: Loc.getMessage('CRM_UDA_DELETE_CONDITION'),\n\t\t\tevents: {\n\t\t\t\t// eslint-disable-next-line func-names\n\t\t\t\tclick: function(event) {\n\t\t\t\t\tthis.deleteCondition(fieldId);\n\t\t\t\t\treturn event.preventDefault();\n\t\t\t\t}.bind(this),\n\t\t\t},\n\t\t});\n\n\t\tconst fieldNode = Dom.create('div', {\n\t\t\tattrs: {\n\t\t\t\tclassName: 'bizproc-automation-popup-settings',\n\t\t\t},\n\t\t\tprops: {id: conditionId},\n\t\t\tchildren: [\n\t\t\t\ttitleNode,\n\t\t\t\tthis.renderField(fieldId),\n\t\t\t\tdeleteButton,\n\t\t\t],\n\t\t});\n\n\t\tthis.entitiesFieldsContainers.appendChild(fieldNode);\n\t}\n\n\tdeleteCondition(fieldId: string): void\n\t{\n\t\tconst conditionId = this.conditinIdPrefix + fieldId;\n\t\tDom.remove(document.getElementById(conditionId));\n\t}\n\n\taddBizprocCondition(fieldId: string): void\n\t{\n\t\tconst newConditionRow = this.entitiesFieldsContainers.insertRow(-1);\n\t\tnewConditionRow.id = this.conditinIdPrefix + Math.random().toString().substr(1, 5);\n\n\t\tconst activity = this;\n\n\t\tconst entityFieldSelect = Dom.create('select', {\n\t\t\tchildren: this.getCurrentFieldsOptions(fieldId),\n\t\t\tevents: {\n\t\t\t\tchange(event) {\n\t\t\t\t\tconst fieldValueNode = newConditionRow.children[2];\n\t\t\t\t\tconst newFieldId = event.srcElement.value;\n\t\t\t\t\tnewConditionRow.replaceChild(activity.renderField(newFieldId), fieldValueNode);\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\n\t\tconst equalSignNode = Dom.create('span', {text: '='});\n\n\t\tconst entityFieldValueNode = this.renderField(fieldId);\n\n\t\tconst deleteConditionButton = Dom.create('a', {\n\t\t\tprops: {href: '#'},\n\t\t\ttext: Loc.getMessage('CRM_UDA_DELETE_CONDITION'),\n\t\t\tevents: {\n\t\t\t\tclick(event) {\n\t\t\t\t\tDom.remove(document.getElementById(newConditionRow.id));\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\n\t\t[entityFieldSelect, equalSignNode, entityFieldValueNode, deleteConditionButton].forEach(\n\t\t\t(node) => {\n\t\t\t\tnewConditionRow.insertCell(-1).appendChild(node);\n\t\t\t},\n\t\t);\n\t}\n\n\tgetCurrentFieldsOptions(selectedFieldId)\n\t{\n\t\treturn Object\n\t\t\t.entries(this.fieldsMap.get(this.currentEntityTypeId))\n\t\t\t.map(\n\t\t\t\t([fieldId, field]) => {\n\t\t\t\t\treturn Dom.create('option', {\n\t\t\t\t\t\tprops: {value: field.FieldName},\n\t\t\t\t\t\tattrs: selectedFieldId === fieldId ? {selected: 'selected'} : undefined,\n\t\t\t\t\t\ttext: field.Name,\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t);\n\t}\n\n\trenderField(fieldId: string): HTMLElement\n\t{\n\t\tlet value = this.currentValues.get(this.currentEntityTypeId)[fieldId];\n\t\tif (Type.isNil(value))\n\t\t{\n\t\t\tvalue = '';\n\t\t}\n\n\t\treturn BX.Bizproc.FieldType.renderControl(\n\t\t\tthis.documentType,\n\t\t\tthis.fieldsMap.get(this.currentEntityTypeId)[fieldId],\n\t\t\tfieldId,\n\t\t\tvalue,\n\t\t\tthis.isRobot ? 'public' : 'designer',\n\t\t);\n\t}\n}\n\nnamespace.CrmUpdateDynamicActivity = CrmUpdateDynamicActivity;"],"names":["namespace","Reflection","CrmUpdateDynamicActivity","options","Type","isPlainObject","documentType","isRobot","form","document","forms","formName","isNil","entityTypeIdSelect","dynamic_type_id","currentEntityTypeId","value","entityTypeDependentElements","querySelectorAll","Document","rawDocumentType","documentFields","title","documentName","fieldsListSelect","querySelector","addConditionButton","entitiesFieldsContainers","conditinIdPrefix","fieldsMap","Map","Object","entries","filterFieldsContainer","filteringFieldsPrefix","filterFieldsMap","BX","Bizproc","Automation","API","conditionGroup","ConditionGroup","conditions","currentValues","Array","from","keys","forEach","entityTypeId","set","isObject","Event","bind","onEntityTypeIdChange","onFieldsListSelectClick","onAddConditionButtonClick","initAutomationContext","getGlobalContext","onOpenFilterFieldsMenu","event","dialog","Designer","getInstance","getRobotSettingsDialog","template","robot","onOpenMenu","error","setGlobalContext","Context","addBPFields","getData","selector","getSelectorProperties","properties","objectName","expressionPrefix","map","id","property","Name","customData","field","Id","ObjectName","SystemExpression","Expression","getGlobalSelectorProperties","visibilityNames","Visibility","supertitle","addGroup","Loc","getMessage","children","window","arWorkflowParameters","arWorkflowVariables","arWorkflowConstants","arWorkflowGlobalVariables","wfGVarVisibilityNames","arWorkflowGlobalConstants","wfGConstVisibilityNames","Dom","clean","elem","remove","render","element","hide","show","renderFilterFields","renderEntityFields","ConditionGroupSelector","fields","values","get","fieldPrefix","appendChild","createNode","fieldId","addCondition","preventDefault","activity","menuItems","text","onclick","_","item","popupWindow","close","menuManagerOptions","Math","random","toString","bindElement","items","autoHide","offsetLeft","getPosition","width","angle","position","offset","zIndex","className","events","onPopupClose","destroy","MenuManager","defaultFieldId","addRobotCondition","addBizprocCondition","conditionId","titleNode","create","attrs","deleteButton","props","href","click","deleteCondition","fieldNode","renderField","getElementById","newConditionRow","insertRow","substr","entityFieldSelect","getCurrentFieldsOptions","change","fieldValueNode","newFieldId","srcElement","replaceChild","equalSignNode","entityFieldValueNode","deleteConditionButton","node","insertCell","selectedFieldId","FieldName","selected","undefined","FieldType","renderControl"],"mappings":"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"}