{"version":3,"file":"script.js","sources":["script.es6.js"],"sourcesContent":["import {Reflection, Type, Event, Dom, Loc} from 'main.core';\nimport {MenuManager} from 'main.popup';\nimport {EventEmitter} from 'main.core.events';\nimport {\n\tContext,\n\tConditionGroup,\n\tConditionGroupSelector,\n\tDocument,\n\tgetGlobalContext,\n\tsetGlobalContext,\n} from 'bizproc.automation';\n\nconst namespace = Reflection.namespace('BX.Crm.Activity');\n\nclass CrmUpdateDynamicActivity\n{\n\tdocumentType: Array<string>;\n\tdocument: Document;\n\tisRobot: boolean;\n\tentityTypeIdSelect: HTMLSelectElement;\n\tfieldsListSelect: HTMLSelectElement;\n\tentitiesFieldsContainers: HTMLDivElement | HTMLTableElement;\n\n\tfilterFieldsContainer: HTMLDivElement | null;\n\tfilteringFieldsPrefix: string;\n\tfilterFieldsMap: Map<string, object>;\n\tconditionGroup: ConditionGroup | undefined;\n\n\tcurrentEntityTypeId: number;\n\tfieldsMap: Map<string, object>;\n\tcurrentValues: Map<string, object>;\n\n\tconstructor(options)\n\t{\n\t\tif (Type.isPlainObject(options))\n\t\t{\n\t\t\tthis.documentType = options.documentType;\n\t\t\tthis.isRobot = options.isRobot;\n\t\t\tconst form = document.forms[options.formName];\n\n\t\t\tif (!Type.isNil(form))\n\t\t\t{\n\t\t\t\tthis.entityTypeIdSelect = form.dynamic_type_id;\n\t\t\t\tthis.currentEntityTypeId = this.entityTypeIdSelect.value;\n\t\t\t\tthis.entityTypeDependentElements = document.querySelectorAll(\n\t\t\t\t\t'[data-role=\"bca-cuda-entity-type-id-dependent\"]',\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tthis.document = new Document({\n\t\t\t\trawDocumentType: this.documentType,\n\t\t\t\tdocumentFields: options.documentFields,\n\t\t\t\ttitle: options.documentName,\n\t\t\t});\n\t\t\tif (this.isRobot)\n\t\t\t{\n\t\t\t\tthis.fieldsListSelect = document.querySelector('[data-role=\"bca-cuda-fields-list\"]');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.addConditionButton = document.querySelector('[data-role=\"bca_cuda_add_condition\"]');\n\t\t\t}\n\t\t\tthis.entitiesFieldsContainers = document.querySelector('[data-role=\"bca-cuda-fields-container\"]');\n\t\t\tthis.conditinIdPrefix = 'id_bca_cuda_field_';\n\n\t\t\tthis.fieldsMap = new Map(Object.entries(options.fieldsMap));\n\n\t\t\tthis.filterFieldsContainer = document.querySelector('[data-role=\"bca-cuda-filter-fields-container\"]');\n\t\t\tthis.filteringFieldsPrefix = options.filteringFieldsPrefix;\n\t\t\tthis.filterFieldsMap = new Map(Object.entries(options.filterFieldsMap));\n\n\t\t\t// issue 0158608\n\t\t\tif (!Type.isNil(options.documentType) && !this.isRobot)\n\t\t\t{\n\t\t\t\tBX.Bizproc.Automation.API.documentType = options.documentType;\n\t\t\t}\n\t\t\tthis.conditionGroup = new ConditionGroup(options.conditions);\n\n\t\t\tthis.currentValues = new Map();\n\t\t\tArray\n\t\t\t\t.from(this.fieldsMap.keys())\n\t\t\t\t.forEach((entityTypeId) => this.currentValues.set(entityTypeId, {}));\n\n\t\t\tif (!Type.isNil(this.currentEntityTypeId) && Type.isObject(options.currentValues))\n\t\t\t{\n\t\t\t\tthis.currentValues.set(this.currentEntityTypeId, options.currentValues);\n\t\t\t}\n\t\t\tthis.render();\n\t\t}\n\t}\n\n\tinit(): void\n\t{\n\t\tif (\n\t\t\tthis.entityTypeIdSelect\n\t\t\t&& this.fieldsMap\n\t\t\t&& this.entitiesFieldsContainers\n\t\t)\n\t\t{\n\t\t\tEvent.bind(this.entityTypeIdSelect, 'change', this.onEntityTypeIdChange.bind(this));\n\t\t}\n\n\t\tif (this.isRobot && this.fieldsListSelect)\n\t\t{\n\t\t\tEvent.bind(this.fieldsListSelect, 'click', this.onFieldsListSelectClick.bind(this));\n\t\t}\n\t\telse if (!this.isRobot && this.addConditionButton)\n\t\t{\n\t\t\tEvent.bind(this.addConditionButton, 'click', this.onAddConditionButtonClick.bind(this));\n\t\t}\n\n\t\tthis.initAutomationContext();\n\t}\n\n\tinitAutomationContext()\n\t{\n\t\ttry\n\t\t{\n\t\t\tgetGlobalContext();\n\t\t}\n\t\tcatch(error)\n\t\t{\n\t\t\tsetGlobalContext(new Context({document: this.document}));\n\t\t\tthis.initSelectors();\n\t\t}\n\t}\n\n\tinitSelectors(): void\n\t{\n\t\tconst getSelectorProperties = ({properties, objectName, expressionPrefix}) => {\n\t\t\tif (Type.isObject(properties))\n\t\t\t{\n\t\t\t\treturn Object.entries(properties).map(([id, property]) => ({\n\t\t\t\t\tid,\n\t\t\t\t\ttitle: property.Name,\n\t\t\t\t\tcustomData: {\n\t\t\t\t\t\tfield: {\n\t\t\t\t\t\t\tId: id,\n\t\t\t\t\t\t\tType: property.Type,\n\t\t\t\t\t\t\tName: property.Name,\n\t\t\t\t\t\t\tObjectName: objectName,\n\t\t\t\t\t\t\tSystemExpression: `{=${objectName}:${id}}`,\n\t\t\t\t\t\t\tExpression: expressionPrefix ? `{{${expressionPrefix}:${id}}}` : `{=${objectName}:${id}}`,\n\t\t\t\t\t\t},\n\t\t\t\t\t}\n\t\t\t\t}));\n\t\t\t}\n\n\t\t\treturn [];\n\t\t}\n\t\tconst getGlobalSelectorProperties = ({properties, visibilityNames, objectName}) => {\n\t\t\tif (Type.isObject(properties))\n\t\t\t{\n\t\t\t\treturn Object.entries(properties).map(([id, property]) => {\n\t\t\t\t\tconst field = {\n\t\t\t\t\t\tid,\n\t\t\t\t\t\tType: property.Type,\n\t\t\t\t\t\ttitle: property.Name,\n\t\t\t\t\t\tObjectName: objectName,\n\t\t\t\t\t\tSystemExpression: `{=${objectName}:${id}}`,\n\t\t\t\t\t\tExpression: `{=${objectName}:${id}}`,\n\t\t\t\t\t}\n\n\t\t\t\t\tif (property.Visibility && visibilityNames[property.Visibility])\n\t\t\t\t\t{\n\t\t\t\t\t\tfield.Expression = `{{${visibilityNames[property.Visibility]}:${property.Name}}}`;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\tid,\n\t\t\t\t\t\ttitle: property.Name,\n\t\t\t\t\t\tsupertitle: visibilityNames[property.Visibility],\n\t\t\t\t\t\tcustomData: { field },\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\n\t\t\treturn [];\n\t\t}\n\n\t\tEventEmitter.subscribe(\n\t\t\t'BX.Bizproc.Automation.Selector:onOpenMenu',\n\t\t\t(event) => {\n\t\t\t\tconst selector = event.getData().selector;\n\t\t\t\tselector.addGroup('workflowParameters', {\n\t\t\t\t\tid: 'workflowParameters',\n\t\t\t\t\ttitle: Loc.getMessage('BIZPROC_WFEDIT_MENU_PARAMS'),\n\t\t\t\t\tchildren: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tid: 'parameters',\n\t\t\t\t\t\t\ttitle: Loc.getMessage('BIZPROC_AUTOMATION_CMP_PARAMETERS_LIST'),\n\t\t\t\t\t\t\tchildren: getSelectorProperties({\n\t\t\t\t\t\t\t\tproperties: window.arWorkflowParameters || {},\n\t\t\t\t\t\t\t\tobjectName: 'Template',\n\t\t\t\t\t\t\t\texpressionPrefix: '~*',\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tid: 'variables',\n\t\t\t\t\t\t\ttitle: Loc.getMessage('BIZPROC_AUTOMATION_CMP_GLOB_VARIABLES_LIST_1'),\n\t\t\t\t\t\t\tchildren: getSelectorProperties({\n\t\t\t\t\t\t\t\tproperties: window.arWorkflowVariables || {},\n\t\t\t\t\t\t\t\tobjectName: 'Variable',\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tid: 'constants',\n\t\t\t\t\t\t\ttitle: Loc.getMessage('BIZPROC_AUTOMATION_CMP_CONSTANTS_LIST'),\n\t\t\t\t\t\t\tchildren: getSelectorProperties({\n\t\t\t\t\t\t\t\tproperties: window.arWorkflowConstants || {},\n\t\t\t\t\t\t\t\tobjectName: 'Constant',\n\t\t\t\t\t\t\t\texpressionPrefix: '~&',\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t});\n\t\t\t\tif (window.arWorkflowGlobalVariables && window.wfGVarVisibilityNames)\n\t\t\t\t{\n\t\t\t\t\tselector.addGroup('globalVariables', {\n\t\t\t\t\t\tid: 'globalVariables',\n\t\t\t\t\t\ttitle: Loc.getMessage('BIZPROC_AUTOMATION_CMP_GLOB_VARIABLES_LIST'),\n\t\t\t\t\t\tchildren: getGlobalSelectorProperties({\n\t\t\t\t\t\t\tproperties: window.arWorkflowGlobalVariables || {},\n\t\t\t\t\t\t\tvisibilityNames: window.wfGVarVisibilityNames || {},\n\t\t\t\t\t\t\tobjectName: 'GlobalVar',\n\t\t\t\t\t\t}),\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif (window.arWorkflowGlobalConstants && window.wfGConstVisibilityNames)\n\t\t\t\t{\n\t\t\t\t\tselector.addGroup('globalConstants', {\n\t\t\t\t\t\tid: 'globalConstants',\n\t\t\t\t\t\ttitle: Loc.getMessage('BIZPROC_AUTOMATION_CMP_GLOB_CONSTANTS_LIST'),\n\t\t\t\t\t\tchildren: getGlobalSelectorProperties({\n\t\t\t\t\t\t\tproperties: window.arWorkflowGlobalConstants || {},\n\t\t\t\t\t\t\tvisibilityNames: window.wfGConstVisibilityNames || {},\n\t\t\t\t\t\t\tobjectName: 'GlobalConst',\n\t\t\t\t\t\t}),\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t}\n\n\tonEntityTypeIdChange(): void\n\t{\n\t\tthis.currentEntityTypeId = this.entityTypeIdSelect.value;\n\n\t\tDom.clean(this.filterFieldsContainer);\n\t\tthis.conditionGroup = new ConditionGroup();\n\n\t\tArray\n\t\t\t.from(this.entitiesFieldsContainers.children)\n\t\t\t.forEach((elem) => Dom.remove(elem));\n\n\t\tthis.render();\n\t}\n\n\trender(): void\n\t{\n\t\tif (Type.isNil(this.currentEntityTypeId) || this.currentEntityTypeId === '')\n\t\t{\n\t\t\tthis.entityTypeDependentElements.forEach((element) => Dom.hide(element));\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.entityTypeDependentElements.forEach((element) => Dom.show(element));\n\t\t\tthis.renderFilterFields();\n\t\t\tthis.renderEntityFields();\n\t\t}\n\t}\n\n\trenderFilterFields(): void\n\t{\n\t\tif (\n\t\t\t!Type.isNil(this.conditionGroup)\n\t\t\t&& !Type.isNil(this.currentEntityTypeId)\n\t\t)\n\t\t{\n\t\t\tconst selector = new ConditionGroupSelector(this.conditionGroup, {\n\t\t\t\tfields: Object.values(this.filterFieldsMap.get(this.currentEntityTypeId)),\n\t\t\t\tfieldPrefix: this.filteringFieldsPrefix,\n\t\t\t});\n\n\t\t\tthis.filterFieldsContainer.appendChild(selector.createNode());\n\t\t}\n\t}\n\n\trenderEntityFields(): void\n\t{\n\t\tObject\n\t\t\t.keys(this.currentValues.get(this.currentEntityTypeId))\n\t\t\t.forEach((fieldId) => this.addCondition(fieldId));\n\t}\n\n\tonFieldsListSelectClick(event)\n\t{\n\t\tconst fields = this.fieldsMap.get(this.currentEntityTypeId);\n\t\tif (Type.isNil(fields))\n\t\t{\n\t\t\treturn event.preventDefault();\n\t\t}\n\n\t\tconst activity = this;\n\t\tconst menuItems = Object.entries(fields).map(([fieldId, field]) => ({\n\t\t\tfieldId,\n\t\t\ttext: field.Name,\n\t\t\tonclick(_, item)\n\t\t\t{\n\t\t\t\tthis.popupWindow.close();\n\t\t\t\tactivity.addCondition(item.fieldId);\n\t\t\t},\n\t\t}));\n\n\t\tconst menuManagerOptions = {\n\t\t\tid: Math.random().toString(),\n\t\t\tbindElement: this.fieldsListSelect,\n\t\t\titems: Array.from(menuItems),\n\t\t\tautoHide: true,\n\t\t\toffsetLeft: Dom.getPosition(this.fieldsListSelect).width / 2,\n\t\t\tangle: {\n\t\t\t\tposition: 'top',\n\t\t\t\toffset: 0,\n\t\t\t},\n\t\t\tzIndex: 200,\n\t\t\tclassName: 'bizproc-automation-inline-selector-menu',\n\t\t\tevents: {\n\t\t\t\tonPopupClose()\n\t\t\t\t{\n\t\t\t\t\tthis.destroy();\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\t\tMenuManager.show(menuManagerOptions);\n\n\t\treturn event.preventDefault();\n\t}\n\n\tonAddConditionButtonClick(event): void\n\t{\n\t\tconst defaultFieldId = Object.keys(this.fieldsMap.get(this.currentEntityTypeId))[0];\n\t\tthis.addCondition(defaultFieldId);\n\n\t\treturn event.preventDefault();\n\t}\n\n\taddCondition(fieldId: string): void\n\t{\n\t\tif (this.isRobot)\n\t\t{\n\t\t\tthis.addRobotCondition(fieldId);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.addBizprocCondition(fieldId);\n\t\t}\n\t}\n\n\taddRobotCondition(fieldId: string): void\n\t{\n\t\tconst conditionId = this.conditinIdPrefix + fieldId;\n\n\t\tconst titleNode = Dom.create('span', {\n\t\t\tattrs: {\n\t\t\t\tclassName: 'bizproc-automation-popup-settings-title bizproc-automation-popup-settings-title-autocomplete',\n\t\t\t},\n\t\t\ttext: this.fieldsMap.get(this.currentEntityTypeId)[fieldId].Name,\n\t\t});\n\n\t\tconst deleteButton = Dom.create('a', {\n\t\t\tattrs: {\n\t\t\t\tclassName: 'bizproc-automation-popup-settings-delete bizproc-automation-popup-settings-link bizproc-automation-popup-settings-link-light',\n\t\t\t},\n\t\t\tprops: {href: '#'},\n\t\t\ttext: Loc.getMessage('CRM_UDA_DELETE_CONDITION'),\n\t\t\tevents: {\n\t\t\t\t// eslint-disable-next-line func-names\n\t\t\t\tclick: function(event) {\n\t\t\t\t\tthis.deleteCondition(fieldId);\n\t\t\t\t\treturn event.preventDefault();\n\t\t\t\t}.bind(this),\n\t\t\t},\n\t\t});\n\n\t\tconst fieldNode = Dom.create('div', {\n\t\t\tattrs: {\n\t\t\t\tclassName: 'bizproc-automation-popup-settings',\n\t\t\t},\n\t\t\tprops: {id: conditionId},\n\t\t\tchildren: [\n\t\t\t\ttitleNode,\n\t\t\t\tthis.renderField(fieldId),\n\t\t\t\tdeleteButton,\n\t\t\t],\n\t\t});\n\n\t\tthis.entitiesFieldsContainers.appendChild(fieldNode);\n\t}\n\n\tdeleteCondition(fieldId: string): void\n\t{\n\t\tconst conditionId = this.conditinIdPrefix + fieldId;\n\t\tDom.remove(document.getElementById(conditionId));\n\t}\n\n\taddBizprocCondition(fieldId: string): void\n\t{\n\t\tconst newConditionRow = this.entitiesFieldsContainers.insertRow(-1);\n\t\tnewConditionRow.id = this.conditinIdPrefix + Math.random().toString().substr(1, 5);\n\n\t\tconst activity = this;\n\n\t\tconst entityFieldSelect = Dom.create('select', {\n\t\t\tchildren: this.getCurrentFieldsOptions(fieldId),\n\t\t\tevents: {\n\t\t\t\tchange(event) {\n\t\t\t\t\tconst fieldValueNode = newConditionRow.children[2];\n\t\t\t\t\tconst newFieldId = event.srcElement.value;\n\t\t\t\t\tnewConditionRow.replaceChild(activity.renderField(newFieldId), fieldValueNode);\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\n\t\tconst equalSignNode = Dom.create('span', {text: '='});\n\n\t\tconst entityFieldValueNode = this.renderField(fieldId);\n\n\t\tconst deleteConditionButton = Dom.create('a', {\n\t\t\tprops: {href: '#'},\n\t\t\ttext: Loc.getMessage('CRM_UDA_DELETE_CONDITION'),\n\t\t\tevents: {\n\t\t\t\tclick(event) {\n\t\t\t\t\tDom.remove(document.getElementById(newConditionRow.id));\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\n\t\t[entityFieldSelect, equalSignNode, entityFieldValueNode, deleteConditionButton].forEach(\n\t\t\t(node) => {\n\t\t\t\tnewConditionRow.insertCell(-1).appendChild(node);\n\t\t\t},\n\t\t);\n\t}\n\n\tgetCurrentFieldsOptions(selectedFieldId)\n\t{\n\t\treturn Object\n\t\t\t.entries(this.fieldsMap.get(this.currentEntityTypeId))\n\t\t\t.map(\n\t\t\t\t([fieldId, field]) => {\n\t\t\t\t\treturn Dom.create('option', {\n\t\t\t\t\t\tprops: {value: field.FieldName},\n\t\t\t\t\t\tattrs: selectedFieldId === fieldId ? {selected: 'selected'} : undefined,\n\t\t\t\t\t\ttext: field.Name,\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t);\n\t}\n\n\trenderField(fieldId: string): HTMLElement\n\t{\n\t\tlet value = this.currentValues.get(this.currentEntityTypeId)[fieldId];\n\t\tif (Type.isNil(value))\n\t\t{\n\t\t\tvalue = '';\n\t\t}\n\n\t\treturn BX.Bizproc.FieldType.renderControl(\n\t\t\tthis.documentType,\n\t\t\tthis.fieldsMap.get(this.currentEntityTypeId)[fieldId],\n\t\t\tfieldId,\n\t\t\tvalue,\n\t\t\tthis.isRobot ? 'public' : 'designer',\n\t\t);\n\t}\n}\n\nnamespace.CrmUpdateDynamicActivity = CrmUpdateDynamicActivity;"],"names":["namespace","Reflection","CrmUpdateDynamicActivity","options","Type","isPlainObject","documentType","isRobot","form","document","forms","formName","isNil","entityTypeIdSelect","dynamic_type_id","currentEntityTypeId","value","entityTypeDependentElements","querySelectorAll","Document","rawDocumentType","documentFields","title","documentName","fieldsListSelect","querySelector","addConditionButton","entitiesFieldsContainers","conditinIdPrefix","fieldsMap","Map","Object","entries","filterFieldsContainer","filteringFieldsPrefix","filterFieldsMap","BX","Bizproc","Automation","API","conditionGroup","ConditionGroup","conditions","currentValues","Array","from","keys","forEach","entityTypeId","set","isObject","render","Event","bind","onEntityTypeIdChange","onFieldsListSelectClick","onAddConditionButtonClick","initAutomationContext","getGlobalContext","error","setGlobalContext","Context","initSelectors","getSelectorProperties","properties","objectName","expressionPrefix","map","id","property","Name","customData","field","Id","ObjectName","SystemExpression","Expression","getGlobalSelectorProperties","visibilityNames","Visibility","supertitle","EventEmitter","subscribe","event","selector","getData","addGroup","Loc","getMessage","children","window","arWorkflowParameters","arWorkflowVariables","arWorkflowConstants","arWorkflowGlobalVariables","wfGVarVisibilityNames","arWorkflowGlobalConstants","wfGConstVisibilityNames","Dom","clean","elem","remove","element","hide","show","renderFilterFields","renderEntityFields","ConditionGroupSelector","fields","values","get","fieldPrefix","appendChild","createNode","fieldId","addCondition","preventDefault","activity","menuItems","text","onclick","_","item","popupWindow","close","menuManagerOptions","Math","random","toString","bindElement","items","autoHide","offsetLeft","getPosition","width","angle","position","offset","zIndex","className","events","onPopupClose","destroy","MenuManager","defaultFieldId","addRobotCondition","addBizprocCondition","conditionId","titleNode","create","attrs","deleteButton","props","href","click","deleteCondition","fieldNode","renderField","getElementById","newConditionRow","insertRow","substr","entityFieldSelect","getCurrentFieldsOptions","change","fieldValueNode","newFieldId","srcElement","replaceChild","equalSignNode","entityFieldValueNode","deleteConditionButton","node","insertCell","selectedFieldId","FieldName","selected","undefined","FieldType","renderControl"],"mappings":"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"}