{"version":3,"file":"script.js","sources":["script.es6.js"],"sourcesContent":["import {Reflection, Type, Event, Dom} from 'main.core';\n\nconst namespace = Reflection.namespace('BX.Crm.Activity');\n\nclass CrmCreateDynamicActivity\n{\n\tentityTypeIdSelect;\n\tcurrentEntityTypeId;\n\tfieldsContainerIdPrefix;\n\tentitiesFieldsContainers = new Map();\n\n\tconstructor(options)\n\t{\n\t\tif (Type.isPlainObject(options))\n\t\t{\n\t\t\tconst form = document.forms[options.formName];\n\n\t\t\tif (!Type.isNil(form))\n\t\t\t{\n\t\t\t\tthis.entityTypeIdSelect = form['dynamic_type_id'];\n\t\t\t\tthis.currentEntityTypeId = this.entityTypeIdSelect.value;\n\t\t\t}\n\t\t\tif (Type.isString(options.fieldsContainerIdPrefix))\n\t\t\t{\n\t\t\t\tthis.fieldsContainerIdPrefix = options.fieldsContainerIdPrefix;\n\t\t\t}\n\t\t}\n\t}\n\n\tinit(): boolean\n\t{\n\t\tif (this.entityTypeIdSelect && this.fieldsContainerIdPrefix)\n\t\t{\n\t\t\tEvent.bind(this.entityTypeIdSelect, 'change', this.onEntityTypeIdChange.bind(this));\n\t\t}\n\t}\n\n\tonEntityTypeIdChange(): void\n\t{\n\t\tDom.hide(this.getEntityFieldsContainer(this.currentEntityTypeId));\n\n\t\tthis.currentEntityTypeId = this.entityTypeIdSelect.value;\n\t\tDom.show(this.getEntityFieldsContainer(this.currentEntityTypeId));\n\t}\n\n\tgetEntityFieldsContainer(entityTypeId: string): HTMLElement\n\t{\n\t\tif (!this.entitiesFieldsContainers.has(entityTypeId))\n\t\t{\n\t\t\tthis.entitiesFieldsContainers.set(\n\t\t\t\tentityTypeId,\n\t\t\t\tdocument.getElementById(this.fieldsContainerIdPrefix + entityTypeId),\n\t\t\t);\n\t\t}\n\n\t\treturn this.entitiesFieldsContainers.get(entityTypeId);\n\t}\n}\n\nnamespace.CrmCreateDynamicActivity = CrmCreateDynamicActivity;"],"names":["namespace","Reflection","CrmCreateDynamicActivity","options","Map","Type","isPlainObject","form","document","forms","formName","isNil","entityTypeIdSelect","currentEntityTypeId","value","isString","fieldsContainerIdPrefix","Event","bind","onEntityTypeIdChange","Dom","hide","getEntityFieldsContainer","show","entityTypeId","entitiesFieldsContainers","has","set","getElementById","get"],"mappings":";;;CAEA,IAAMA,SAAS,GAAGC,oBAAU,CAACD,SAAS,CAAC,iBAAiB,CAAC;CAAC,IAEpDE,wBAAwB;GAO7B,kCAAYC,OAAO,EACnB;KAAA;KAAA,8DAH2B,IAAIC,GAAG,EAAE;KAInC,IAAIC,cAAI,CAACC,aAAa,CAACH,OAAO,CAAC,EAC/B;OACC,IAAMI,IAAI,GAAGC,QAAQ,CAACC,KAAK,CAACN,OAAO,CAACO,QAAQ,CAAC;OAE7C,IAAI,CAACL,cAAI,CAACM,KAAK,CAACJ,IAAI,CAAC,EACrB;SACC,IAAI,CAACK,kBAAkB,GAAGL,IAAI,CAAC,iBAAiB,CAAC;SACjD,IAAI,CAACM,mBAAmB,GAAG,IAAI,CAACD,kBAAkB,CAACE,KAAK;;OAEzD,IAAIT,cAAI,CAACU,QAAQ,CAACZ,OAAO,CAACa,uBAAuB,CAAC,EAClD;SACC,IAAI,CAACA,uBAAuB,GAAGb,OAAO,CAACa,uBAAuB;;;;GAGhE;KAAA;KAAA,uBAGD;OACC,IAAI,IAAI,CAACJ,kBAAkB,IAAI,IAAI,CAACI,uBAAuB,EAC3D;SACCC,eAAK,CAACC,IAAI,CAAC,IAAI,CAACN,kBAAkB,EAAE,QAAQ,EAAE,IAAI,CAACO,oBAAoB,CAACD,IAAI,CAAC,IAAI,CAAC,CAAC;;;;KAEpF;KAAA,uCAGD;OACCE,aAAG,CAACC,IAAI,CAAC,IAAI,CAACC,wBAAwB,CAAC,IAAI,CAACT,mBAAmB,CAAC,CAAC;OAEjE,IAAI,CAACA,mBAAmB,GAAG,IAAI,CAACD,kBAAkB,CAACE,KAAK;OACxDM,aAAG,CAACG,IAAI,CAAC,IAAI,CAACD,wBAAwB,CAAC,IAAI,CAACT,mBAAmB,CAAC,CAAC;;;KACjE;KAAA,yCAEwBW,YAAoB,EAC7C;OACC,IAAI,CAAC,IAAI,CAACC,wBAAwB,CAACC,GAAG,CAACF,YAAY,CAAC,EACpD;SACC,IAAI,CAACC,wBAAwB,CAACE,GAAG,CAChCH,YAAY,EACZhB,QAAQ,CAACoB,cAAc,CAAC,IAAI,CAACZ,uBAAuB,GAAGQ,YAAY,CAAC,CACpE;;OAGF,OAAO,IAAI,CAACC,wBAAwB,CAACI,GAAG,CAACL,YAAY,CAAC;;;GACtD;CAAA;CAGFxB,SAAS,CAACE,wBAAwB,GAAGA,wBAAwB;;;;"}