{"version":3,"file":"script.js","sources":["script.es6.js"],"sourcesContent":["import {Reflection, Type, Event, Dom} from 'main.core';\n\nconst namespace = Reflection.namespace('BX.Crm.Activity');\n\nclass CrmCreateDynamicActivity\n{\n\tentityTypeIdSelect;\n\tcurrentEntityTypeId;\n\tfieldsContainerIdPrefix;\n\tentitiesFieldsContainers = new Map();\n\n\tconstructor(options)\n\t{\n\t\tif (Type.isPlainObject(options))\n\t\t{\n\t\t\tconst form = document.forms[options.formName];\n\n\t\t\tif (!Type.isNil(form))\n\t\t\t{\n\t\t\t\tthis.entityTypeIdSelect = form['dynamic_type_id'];\n\t\t\t\tthis.currentEntityTypeId = this.entityTypeIdSelect.value;\n\t\t\t}\n\t\t\tif (Type.isString(options.fieldsContainerIdPrefix))\n\t\t\t{\n\t\t\t\tthis.fieldsContainerIdPrefix = options.fieldsContainerIdPrefix;\n\t\t\t}\n\t\t}\n\t}\n\n\tinit(): boolean\n\t{\n\t\tif (this.entityTypeIdSelect && this.fieldsContainerIdPrefix)\n\t\t{\n\t\t\tEvent.bind(this.entityTypeIdSelect, 'change', this.onEntityTypeIdChange.bind(this));\n\t\t}\n\t}\n\n\tonEntityTypeIdChange(): void\n\t{\n\t\tDom.hide(this.getEntityFieldsContainer(this.currentEntityTypeId));\n\n\t\tthis.currentEntityTypeId = this.entityTypeIdSelect.value;\n\t\tDom.show(this.getEntityFieldsContainer(this.currentEntityTypeId));\n\t}\n\n\tgetEntityFieldsContainer(entityTypeId: string): HTMLElement\n\t{\n\t\tif (!this.entitiesFieldsContainers.has(entityTypeId))\n\t\t{\n\t\t\tthis.entitiesFieldsContainers.set(\n\t\t\t\tentityTypeId,\n\t\t\t\tdocument.getElementById(this.fieldsContainerIdPrefix + entityTypeId),\n\t\t\t);\n\t\t}\n\n\t\treturn this.entitiesFieldsContainers.get(entityTypeId);\n\t}\n}\n\nnamespace.CrmCreateDynamicActivity = CrmCreateDynamicActivity;"],"names":["namespace","Reflection","CrmCreateDynamicActivity","options","Map","Type","isPlainObject","form","document","forms","formName","isNil","entityTypeIdSelect","currentEntityTypeId","value","isString","fieldsContainerIdPrefix","Event","bind","onEntityTypeIdChange","Dom","hide","getEntityFieldsContainer","show","entityTypeId","entitiesFieldsContainers","has","set","getElementById","get"],"mappings":";;;CAEA,IAAMA,SAAS,GAAGC,oBAAU,CAACD,SAAX,CAAqB,iBAArB,CAAlB;;KAEME;CAOL,oCAAYC,OAAZ,EACA;CAAA;CAAA,kEAH2B,IAAIC,GAAJ,EAG3B;;CACC,QAAIC,cAAI,CAACC,aAAL,CAAmBH,OAAnB,CAAJ,EACA;CACC,UAAMI,IAAI,GAAGC,QAAQ,CAACC,KAAT,CAAeN,OAAO,CAACO,QAAvB,CAAb;;CAEA,UAAI,CAACL,cAAI,CAACM,KAAL,CAAWJ,IAAX,CAAL,EACA;CACC,aAAKK,kBAAL,GAA0BL,IAAI,CAAC,iBAAD,CAA9B;CACA,aAAKM,mBAAL,GAA2B,KAAKD,kBAAL,CAAwBE,KAAnD;CACA;;CACD,UAAIT,cAAI,CAACU,QAAL,CAAcZ,OAAO,CAACa,uBAAtB,CAAJ,EACA;CACC,aAAKA,uBAAL,GAA+Bb,OAAO,CAACa,uBAAvC;CACA;CACD;CACD;;;;4BAGD;CACC,UAAI,KAAKJ,kBAAL,IAA2B,KAAKI,uBAApC,EACA;CACCC,QAAAA,eAAK,CAACC,IAAN,CAAW,KAAKN,kBAAhB,EAAoC,QAApC,EAA8C,KAAKO,oBAAL,CAA0BD,IAA1B,CAA+B,IAA/B,CAA9C;CACA;CACD;;;4CAGD;CACCE,MAAAA,aAAG,CAACC,IAAJ,CAAS,KAAKC,wBAAL,CAA8B,KAAKT,mBAAnC,CAAT;CAEA,WAAKA,mBAAL,GAA2B,KAAKD,kBAAL,CAAwBE,KAAnD;CACAM,MAAAA,aAAG,CAACG,IAAJ,CAAS,KAAKD,wBAAL,CAA8B,KAAKT,mBAAnC,CAAT;CACA;;;8CAEwBW,cACzB;CACC,UAAI,CAAC,KAAKC,wBAAL,CAA8BC,GAA9B,CAAkCF,YAAlC,CAAL,EACA;CACC,aAAKC,wBAAL,CAA8BE,GAA9B,CACCH,YADD,EAEChB,QAAQ,CAACoB,cAAT,CAAwB,KAAKZ,uBAAL,GAA+BQ,YAAvD,CAFD;CAIA;;CAED,aAAO,KAAKC,wBAAL,CAA8BI,GAA9B,CAAkCL,YAAlC,CAAP;CACA;;;;;CAGFxB,SAAS,CAACE,wBAAV,GAAqCA,wBAArC;;;;"}