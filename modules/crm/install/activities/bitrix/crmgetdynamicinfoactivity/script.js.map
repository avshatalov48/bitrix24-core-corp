{"version":3,"file":"script.js","sources":["script.es6.js"],"sourcesContent":["import { Reflection, Type, Event, Dom, Loc } from 'main.core';\nimport {\n\tContext,\n\tConditionGroup,\n\tConditionGroupSelector,\n\tDocument,\n\tgetGlobalContext,\n\tsetGlobalContext,\n} from 'bizproc.automation';\nimport { EventEmitter } from 'main.core.events';\n\nconst namespace = Reflection.namespace('BX.Crm.Activity');\n\nclass CrmGetDynamicInfoActivity\n{\n\tdocumentType: Array<string>;\n\tdocument: Document;\n\tisRobot: boolean;\n\tentityTypeIdSelect: HTMLSelectElement;\n\n\treturnFieldsProperty: object;\n\treturnFieldsMapContainer: HTMLDivElement;\n\treturnFieldsMap: Map<number, Map<string, object>>;\n\treturnFieldsIds: Array<string>;\n\n\tfilterFieldsContainer: HTMLDivElement | null;\n\tfilteringFieldsPrefix: string;\n\tfilterFieldsMap: Map<number, object>;\n\tconditionGroup: ConditionGroup | undefined;\n\n\tcurrentEntityTypeId: number;\n\n\tconstructor(options)\n\t{\n\t\tif (Type.isPlainObject(options))\n\t\t{\n\t\t\tthis.documentType = options.documentType;\n\t\t\tthis.isRobot = options.isRobot;\n\t\t\tconst form = document.forms[options.formName];\n\n\t\t\tif (!Type.isNil(form))\n\t\t\t{\n\t\t\t\tthis.entityTypeIdSelect = form.dynamic_type_id;\n\t\t\t\tthis.currentEntityTypeId = Number(this.entityTypeIdSelect.value);\n\t\t\t\tthis.entityTypeDependentElements = document.querySelectorAll(\n\t\t\t\t\t'[data-role=\"bca-cuda-entity-type-id-dependent\"]',\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tthis.document = new Document({\n\t\t\t\trawDocumentType: this.documentType,\n\t\t\t\tdocumentFields: options.documentFields,\n\t\t\t\ttitle: options.documentName,\n\t\t\t});\n\n\t\t\tthis.initAutomationContext();\n\t\t\tthis.initFilterFields(options);\n\t\t\tthis.initReturnFields(options);\n\n\t\t\tthis.render();\n\t\t}\n\t}\n\n\tinitFilterFields(options)\n\t{\n\t\tthis.conditinIdPrefix = 'id_bca_cuda_field_';\n\t\tthis.filterFieldsContainer = document.querySelector('[data-role=\"bca-cuda-filter-fields-container\"]');\n\t\tthis.filteringFieldsPrefix = options.filteringFieldsPrefix;\n\t\tthis.filterFieldsMap = new Map(\n\t\t\tObject.entries(options.filterFieldsMap)\n\t\t\t\t.map(([entityTypeId, fieldsMap]) => [Number(entityTypeId), fieldsMap]),\n\t\t);\n\n\t\t// issue 0158608\n\t\tif (!Type.isNil(options.documentType) && !this.isRobot)\n\t\t{\n\t\t\tBX.Bizproc.Automation.API.documentType = options.documentType;\n\t\t}\n\t\tthis.conditionGroup = new ConditionGroup(options.conditions);\n\t}\n\n\tinitReturnFields(options)\n\t{\n\t\tthis.returnFieldsProperty = options.returnFieldsProperty;\n\t\tthis.returnFieldsIds = Type.isArray(options.returnFieldsIds) ? options.returnFieldsIds : [];\n\n\t\tthis.returnFieldsMapContainer = document.querySelector('[data-role=\"bca-cuda-return-fields-container\"]');\n\t\tthis.returnFieldsMap = new Map();\n\t\tObject.entries(options.returnFieldsMap).forEach(([entityTypeId, fieldsMap]) => {\n\t\t\tthis.returnFieldsMap.set(Number(entityTypeId), new Map(Object.entries(fieldsMap)));\n\t\t});\n\t}\n\n\tinitAutomationContext()\n\t{\n\t\ttry\n\t\t{\n\t\t\tgetGlobalContext();\n\t\t}\n\t\tcatch(error)\n\t\t{\n\t\t\tsetGlobalContext(new Context({document: this.document}));\n\t\t\tthis.initSelectors();\n\t\t}\n\t}\n\n\tinitSelectors(): void\n\t{\n\t\tconst getSelectorProperties = ({properties, objectName, expressionPrefix}) => {\n\t\t\tif (Type.isObject(properties))\n\t\t\t{\n\t\t\t\treturn Object.entries(properties).map(([id, property]) => ({\n\t\t\t\t\tid,\n\t\t\t\t\ttitle: property.Name,\n\t\t\t\t\tcustomData: {\n\t\t\t\t\t\tfield: {\n\t\t\t\t\t\t\tId: id,\n\t\t\t\t\t\t\tType: property.Type,\n\t\t\t\t\t\t\tName: property.Name,\n\t\t\t\t\t\t\tObjectName: objectName,\n\t\t\t\t\t\t\tSystemExpression: `{=${objectName}:${id}}`,\n\t\t\t\t\t\t\tExpression: expressionPrefix ? `{{${expressionPrefix}:${id}}}` : `{=${objectName}:${id}}`,\n\t\t\t\t\t\t},\n\t\t\t\t\t}\n\t\t\t\t}));\n\t\t\t}\n\n\t\t\treturn [];\n\t\t}\n\t\tconst getGlobalSelectorProperties = ({properties, visibilityNames, objectName}) => {\n\t\t\tif (Type.isObject(properties))\n\t\t\t{\n\t\t\t\treturn Object.entries(properties).map(([id, property]) => {\n\t\t\t\t\tconst field = {\n\t\t\t\t\t\tid,\n\t\t\t\t\t\tType: property.Type,\n\t\t\t\t\t\ttitle: property.Name,\n\t\t\t\t\t\tObjectName: objectName,\n\t\t\t\t\t\tSystemExpression: `{=${objectName}:${id}}`,\n\t\t\t\t\t\tExpression: `{=${objectName}:${id}}`,\n\t\t\t\t\t}\n\n\t\t\t\t\tif (property.Visibility && visibilityNames[property.Visibility])\n\t\t\t\t\t{\n\t\t\t\t\t\tfield.Expression = `{{${visibilityNames[property.Visibility]}:${property.Name}}}`;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\tid,\n\t\t\t\t\t\ttitle: property.Name,\n\t\t\t\t\t\tsupertitle: visibilityNames[property.Visibility],\n\t\t\t\t\t\tcustomData: { field },\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\n\t\t\treturn [];\n\t\t}\n\n\t\tEventEmitter.subscribe(\n\t\t\t'BX.Bizproc.Automation.Selector:onOpenMenu',\n\t\t\t(event) => {\n\t\t\t\tconst selector = event.getData().selector;\n\t\t\t\tselector.addGroup('workflowParameters', {\n\t\t\t\t\tid: 'workflowParameters',\n\t\t\t\t\ttitle: Loc.getMessage('BIZPROC_WFEDIT_MENU_PARAMS'),\n\t\t\t\t\tchildren: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tid: 'parameters',\n\t\t\t\t\t\t\ttitle: Loc.getMessage('BIZPROC_AUTOMATION_CMP_PARAMETERS_LIST'),\n\t\t\t\t\t\t\tchildren: getSelectorProperties({\n\t\t\t\t\t\t\t\tproperties: window.arWorkflowParameters || {},\n\t\t\t\t\t\t\t\tobjectName: 'Template',\n\t\t\t\t\t\t\t\texpressionPrefix: '~*',\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tid: 'variables',\n\t\t\t\t\t\t\ttitle: Loc.getMessage('BIZPROC_AUTOMATION_CMP_GLOB_VARIABLES_LIST_1'),\n\t\t\t\t\t\t\tchildren: getSelectorProperties({\n\t\t\t\t\t\t\t\tproperties: window.arWorkflowVariables || {},\n\t\t\t\t\t\t\t\tobjectName: 'Variable',\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tid: 'constants',\n\t\t\t\t\t\t\ttitle: Loc.getMessage('BIZPROC_AUTOMATION_CMP_CONSTANTS_LIST'),\n\t\t\t\t\t\t\tchildren: getSelectorProperties({\n\t\t\t\t\t\t\t\tproperties: window.arWorkflowConstants || {},\n\t\t\t\t\t\t\t\tobjectName: 'Constant',\n\t\t\t\t\t\t\t\texpressionPrefix: '~&',\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t});\n\t\t\t\tif (window.arWorkflowGlobalVariables && window.wfGVarVisibilityNames)\n\t\t\t\t{\n\t\t\t\t\tselector.addGroup('globalVariables', {\n\t\t\t\t\t\tid: 'globalVariables',\n\t\t\t\t\t\ttitle: Loc.getMessage('BIZPROC_AUTOMATION_CMP_GLOB_VARIABLES_LIST'),\n\t\t\t\t\t\tchildren: getGlobalSelectorProperties({\n\t\t\t\t\t\t\tproperties: window.arWorkflowGlobalVariables || {},\n\t\t\t\t\t\t\tvisibilityNames: window.wfGVarVisibilityNames || {},\n\t\t\t\t\t\t\tobjectName: 'GlobalVar',\n\t\t\t\t\t\t}),\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tselector.addGroup('globalConstants', {\n\t\t\t\t\tid: 'globalConstants',\n\t\t\t\t\ttitle: Loc.getMessage('BIZPROC_AUTOMATION_CMP_GLOB_CONSTANTS_LIST'),\n\t\t\t\t\tchildren: getGlobalSelectorProperties({\n\t\t\t\t\t\tproperties: window.arWorkflowGlobalConstants || {},\n\t\t\t\t\t\tvisibilityNames: window.wfGConstVisibilityNames || {},\n\t\t\t\t\t\tobjectName: 'GlobalConst',\n\t\t\t\t\t}),\n\t\t\t\t});\n\t\t\t}\n\t\t);\n\t}\n\n\tinit(): void\n\t{\n\t\tif (this.entityTypeIdSelect)\n\t\t{\n\t\t\tEvent.bind(this.entityTypeIdSelect, 'change', this.onEntityTypeIdChange.bind(this));\n\t\t}\n\t}\n\n\tonEntityTypeIdChange(): void\n\t{\n\t\tthis.currentEntityTypeId = Number(this.entityTypeIdSelect.value);\n\n\t\tthis.conditionGroup = new ConditionGroup();\n\n\t\tthis.returnFieldsIds = [];\n\n\t\tthis.render();\n\t}\n\n\trender(): void\n\t{\n\t\tif (Type.isNil(this.currentEntityTypeId) || this.currentEntityTypeId === 0)\n\t\t{\n\t\t\tthis.entityTypeDependentElements.forEach((element) => Dom.hide(element));\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.entityTypeDependentElements.forEach((element) => Dom.show(element));\n\t\t\tthis.renderFilterFields();\n\t\t\tthis.renderReturnFields();\n\t\t}\n\t}\n\n\trenderFilterFields(): void\n\t{\n\t\tif (\n\t\t\t!Type.isNil(this.conditionGroup)\n\t\t\t&& this.currentEntityTypeId !== 0\n\t\t)\n\t\t{\n\t\t\tconst selector = new ConditionGroupSelector(this.conditionGroup, {\n\t\t\t\tfields: Object.values(this.filterFieldsMap.get(this.currentEntityTypeId)),\n\t\t\t\tfieldPrefix: this.filteringFieldsPrefix,\n\t\t\t});\n\n\t\t\tDom.clean(this.filterFieldsContainer);\n\t\t\tthis.filterFieldsContainer.appendChild(selector.createNode());\n\t\t}\n\t}\n\n\trenderReturnFields(): void\n\t{\n\t\tconst entityTypeId = this.currentEntityTypeId;\n\t\tconst fieldsMap = this.returnFieldsMap.get(entityTypeId);\n\n\t\tif (!Type.isNil(fieldsMap))\n\t\t{\n\t\t\tconst fieldOptions = {};\n\t\t\tfieldsMap.forEach((field, fieldId) => {\n\t\t\t\tfieldOptions[fieldId] = field.Name;\n\t\t\t});\n\t\t\tthis.returnFieldsProperty.Options = fieldOptions;\n\n\t\t\tDom.clean(this.returnFieldsMapContainer);\n\t\t\tthis.returnFieldsMapContainer.appendChild(\n\t\t\t\tBX.Bizproc.FieldType.renderControl(\n\t\t\t\t\tthis.documentType,\n\t\t\t\t\tthis.returnFieldsProperty,\n\t\t\t\t\tthis.returnFieldsProperty.FieldName,\n\t\t\t\t\tthis.returnFieldsIds,\n\t\t\t\t\tthis.isRobot ? 'public' : 'designer',\n\t\t\t\t),\n\t\t\t);\n\t\t}\n\t}\n}\n\nnamespace.CrmGetDynamicInfoActivity = CrmGetDynamicInfoActivity;"],"names":["namespace","Reflection","CrmGetDynamicInfoActivity","options","Type","isPlainObject","documentType","isRobot","form","document","forms","formName","isNil","entityTypeIdSelect","dynamic_type_id","currentEntityTypeId","Number","value","entityTypeDependentElements","querySelectorAll","Document","rawDocumentType","documentFields","title","documentName","initAutomationContext","initFilterFields","initReturnFields","render","conditinIdPrefix","filterFieldsContainer","querySelector","filteringFieldsPrefix","filterFieldsMap","Map","Object","entries","map","entityTypeId","fieldsMap","BX","Bizproc","Automation","API","conditionGroup","ConditionGroup","conditions","returnFieldsProperty","returnFieldsIds","isArray","returnFieldsMapContainer","returnFieldsMap","forEach","set","getGlobalContext","error","setGlobalContext","Context","initSelectors","getSelectorProperties","properties","objectName","expressionPrefix","isObject","id","property","Name","customData","field","Id","ObjectName","SystemExpression","Expression","getGlobalSelectorProperties","visibilityNames","Visibility","supertitle","EventEmitter","subscribe","event","selector","getData","addGroup","Loc","getMessage","children","window","arWorkflowParameters","arWorkflowVariables","arWorkflowConstants","arWorkflowGlobalVariables","wfGVarVisibilityNames","arWorkflowGlobalConstants","wfGConstVisibilityNames","Event","bind","onEntityTypeIdChange","element","Dom","hide","show","renderFilterFields","renderReturnFields","ConditionGroupSelector","fields","values","get","fieldPrefix","clean","appendChild","createNode","fieldOptions","fieldId","Options","FieldType","renderControl","FieldName"],"mappings":"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"}