{"version":3,"file":"script.js","sources":["src/index.js"],"sourcesContent":["import { Designer, FileSelector, getGlobalContext, SelectorContext } from 'bizproc.automation';\nimport { ColorSelector, ColorSelectorEvents } from 'crm.field.color-selector';\nimport { ajax, Dom, Event, Loc, Reflection, Type, Tag } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { PopupMenu } from 'main.popup';\nimport { TagSelector } from 'ui.entity-selector';\nimport { CreateTodoActivityOptions } from './create-todo-activity-options';\nimport { Icon, Main } from 'ui.icon-set.api.core';\nimport 'ui.icon-set.main';\n\nconst namespace = Reflection.namespace('BX.Crm.Activity');\n\nclass CrmCreateTodoActivity\n{\n\t#isRobot: boolean;\n\t#colorSelector;\n\t#colorId;\n\t#locationSelectorWrapper: HTMLElement;\n\t#additionalSettingsButton: HTMLElement;\n\t#documentFields: Object;\n\t#additionalSettingsWrapper: HTMLElement;\n\t#documentType: [];\n\t#additionalSettingsFields: {};\n\t#dataConfig: string;\n\t#fileSelector: FileSelector;\n\t#fileControl: Element;\n\t#diskControl: Element;\n\t#diskControlItems: Element;\n\t#attachmentType: ?string;\n\n\tconstructor(options: CreateTodoActivityOptions)\n\t{\n\t\tthis.#documentFields = options.documentFields;\n\t\tthis.#isRobot = options.isRobot === true;\n\t\tthis.#documentType = options.documentType;\n\n\t\tif (this.#isRobot)\n\t\t{\n\t\t\tthis.#assertValidOptions(options);\n\n\t\t\tthis.#additionalSettingsWrapper = options.additionalSettingsWrapper;\n\t\t\tthis.#additionalSettingsButton = options.additionalSettingsButton;\n\t\t\tEvent.bind(this.#additionalSettingsButton, 'click', this.#onAdditionalSettingsButtonClick.bind(this));\n\n\t\t\tthis.#dataConfig = options.dataConfig;\n\n\t\t\tthis.#colorSelector = this.#getColorSelector(\n\t\t\t\toptions.colorSelectorWrapper,\n\t\t\t\toptions.colorSettings,\n\t\t\t\toptions.isAvailableColor,\n\t\t\t);\n\t\t\tthis.#colorId = options.colorSettings.selectedValueId;\n\t\t\tEventEmitter.subscribe(\n\t\t\t\tthis.#colorSelector,\n\t\t\t\tColorSelectorEvents.EVENT_COLORSELECTOR_VALUE_CHANGE,\n\t\t\t\tthis.#onColorChanged.bind(this),\n\t\t\t);\n\n\t\t\tthis.#setOnBeforeSaveSettingsCallback();\n\t\t\tthis.#additionalSettingsFields = {};\n\t\t}\n\t\telse\n\t\t\tif (options.attachmentType)\n\t\t\t{\n\t\t\t\tthis.#fileControl = options.fileControl;\n\t\t\t\tthis.#diskControl = options.diskControl;\n\t\t\t\tthis.#diskControlItems = options.diskControlItems;\n\t\t\t\tthis.#attachmentType = options.attachmentType.value;\n\t\t\t\tEvent.bind(options.attachmentType, 'change', (event) => this.#onChangeAttachmentTypeHandler(event.target.value));\n\t\t\t\tEvent.bind(options.showDiskFileDialogButton, 'click', this.#openDiskFileDialog.bind(this));\n\t\t\t}\n\t}\n\n\t#setOnBeforeSaveSettingsCallback(): void\n\t{\n\t\tif (!this.#isRobot)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst dialog = Designer.getInstance()?.getRobotSettingsDialog();\n\t\tif (dialog?.robot)\n\t\t{\n\t\t\tdialog.robot.setOnBeforeSaveRobotSettings(this.#onBeforeSaveRobotSettings.bind(this));\n\t\t}\n\t}\n\n\t#onBeforeSaveRobotSettings(): Object\n\t{\n\t\tconst data = {\n\t\t\tcolor_id: this.#colorId,\n\t\t};\n\t\tif (this.#additionalSettingsFields.LocationId)\n\t\t{\n\t\t\tdata.location_id = this.locationSelectorDialog.getTags()[0]?.id;\n\t\t}\n\n\t\treturn data;\n\t}\n\n\t#onColorChanged({ data }): void\n\t{\n\t\tthis.#colorId = data.value;\n\t}\n\n\t#getLocationSelectorDialog(locationId: ?number): ?TagSelector\n\t{\n\t\tif (this.locations === null)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tif (Type.isNil(this.locationSelectorDialog))\n\t\t{\n\t\t\tconst tabs = [\n\t\t\t\t{\n\t\t\t\t\tid: 'location',\n\t\t\t\t\ttitle: Loc.getMessage('CRM_BP_CREATE_TODO_LOCATION_SELECTOR_ROOMS_ENTITY_TITLE'),\n\t\t\t\t},\n\t\t\t];\n\n\t\t\tconst items = [];\n\n\t\t\tthis.locations.rooms?.forEach((room) => {\n\t\t\t\titems.push({\n\t\t\t\t\tid: room.ID,\n\t\t\t\t\ttitle: room.NAME,\n\t\t\t\t\tsubtitle: this.#getCapacityTitle(room.CAPACITY ?? null),\n\t\t\t\t\tentityId: 'location',\n\t\t\t\t\ttabs: 'location',\n\t\t\t\t\tavatarOptions: {\n\t\t\t\t\t\tbgColor: room.COLOR,\n\t\t\t\t\t\tbgSize: '22px',\n\t\t\t\t\t\tbgImage: 'none',\n\t\t\t\t\t},\n\t\t\t\t\tcustomData: {\n\t\t\t\t\t\tlocationId: room.LOCATION_ID,\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t});\n\t\t\tthis.locationSelectorDialog = new TagSelector({\n\t\t\t\tmultiple: false,\n\t\t\t\ttextBoxAutoHide: true,\n\t\t\t\tdialogOptions: {\n\t\t\t\t\tid: 'todo-robot-calendar-room-selector-dialog',\n\t\t\t\t\ttargetNode: this.#locationSelectorWrapper,\n\t\t\t\t\tcontext: 'CRM_ACTIVITY_TODO_ROBOT_CALENDAR_ROOM',\n\t\t\t\t\tmultiple: false,\n\t\t\t\t\tdropdownMode: true,\n\t\t\t\t\tshowAvatars: true,\n\t\t\t\t\tenableSearch: true,\n\t\t\t\t\twidth: 450,\n\t\t\t\t\theight: 300,\n\t\t\t\t\tzIndex: 2500,\n\t\t\t\t\titems,\n\t\t\t\t\ttabs,\n\t\t\t\t},\n\t\t\t});\n\t\t\tif (locationId)\n\t\t\t{\n\t\t\t\tconst locationTag = (\n\t\t\t\t\titems.find((location) => location.id === locationId)\n\t\t\t\t\t?? this.#getLocationExpressionTag(locationId)\n\t\t\t\t);\n\n\t\t\t\tthis.locationSelectorDialog.addTag(locationTag);\n\t\t\t}\n\t\t}\n\n\t\treturn this.locationSelectorDialog;\n\t}\n\n\t#getLocationExpressionTag(expression: string): Object\n\t{\n\t\treturn {\n\t\t\tid: expression,\n\t\t\ttitle: expression,\n\t\t\tentityId: 'location',\n\t\t};\n\t}\n\n\tasync #renderLocation(value: ?number): HTMLDivElement\n\t{\n\t\tthis.renderControl('Duration');\n\n\t\tthis.locations = await this.#fetchRoomsManagerData();\n\t\tconst wrapper = Tag.render`<div id=\"id_location\"></div>`;\n\t\tthis.#getLocationSelectorDialog(value).renderTo(wrapper);\n\n\t\treturn wrapper;\n\t}\n\n\tasync #fetchRoomsManagerData(): Object\n\t{\n\t\treturn new Promise((resolve) => {\n\t\t\tajax\n\t\t\t\t.runAction('calendar.api.locationajax.getRoomsManagerData')\n\t\t\t\t.then((response) => {\n\t\t\t\t\tresolve(response.data);\n\t\t\t\t})\n\t\t\t\t.catch((errors) => {\n\t\t\t\t\tconsole.log(errors);\n\t\t\t\t})\n\t\t\t;\n\t\t});\n\t}\n\n\t#prepareMenuItems(): Array\n\t{\n\t\tconst menuItems = [];\n\t\t// eslint-disable-next-line unicorn/no-this-assignment\n\t\tconst createTodo = this;\n\t\tmenuItems.push(\n\t\t\t{\n\t\t\t\thtml: this.#getActionItemHtml(\n\t\t\t\t\t'CALENDAR_1',\n\t\t\t\t\tLoc.getMessage('CRM_BP_CREATE_TODO_ACTIONS_CALENDAR'),\n\t\t\t\t),\n\t\t\t\tonclick()\n\t\t\t\t{\n\t\t\t\t\tthis.popupWindow.close();\n\t\t\t\t\tcreateTodo.renderControl('Duration');\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\thtml: this.#getActionItemHtml(\n\t\t\t\t\t'PERSON',\n\t\t\t\t\tLoc.getMessage('CRM_BP_CREATE_TODO_ACTIONS_CLIENT'),\n\t\t\t\t),\n\t\t\t\tonclick()\n\t\t\t\t{\n\t\t\t\t\tthis.popupWindow.close();\n\t\t\t\t\tcreateTodo.renderControl('Client', 'Y');\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\thtml: this.#getActionItemHtml(\n\t\t\t\t\t'PERSONS_2',\n\t\t\t\t\tLoc.getMessage('CRM_BP_CREATE_TODO_ACTIONS_COLLEAGUE'),\n\t\t\t\t),\n\t\t\t\tfieldName: 'Colleagues',\n\t\t\t\tonclick()\n\t\t\t\t{\n\t\t\t\t\tthis.popupWindow.close();\n\t\t\t\t\tcreateTodo.renderControl('Colleagues');\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\thtml: this.#getActionItemHtml(\n\t\t\t\t\t'LOCATION_1',\n\t\t\t\t\tLoc.getMessage('CRM_BP_CREATE_TODO_ACTIONS_ADDRESS'),\n\t\t\t\t),\n\t\t\t\tonclick()\n\t\t\t\t{\n\t\t\t\t\tthis.popupWindow.close();\n\t\t\t\t\tcreateTodo.renderControl('Address');\n\t\t\t\t},\n\t\t\t},\n\t\t);\n\t\tif ('LocationId' in this.#documentFields)\n\t\t{\n\t\t\tmenuItems.push({\n\t\t\t\thtml: this.#getActionItemHtml(\n\t\t\t\t\t'CHATS_PERSONS',\n\t\t\t\t\tLoc.getMessage('CRM_BP_CREATE_TODO_ACTIONS_ROOM'),\n\t\t\t\t),\n\t\t\t\tonclick()\n\t\t\t\t{\n\t\t\t\t\tthis.popupWindow.close();\n\t\t\t\t\tcreateTodo.renderControl('LocationId');\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\tmenuItems.push({\n\t\t\thtml: this.#getActionItemHtml(\n\t\t\t\t'INSERT_HYPERLINK',\n\t\t\t\tLoc.getMessage('CRM_BP_CREATE_TODO_ACTIONS_LINK'),\n\t\t\t),\n\t\t\tonclick()\n\t\t\t{\n\t\t\t\tthis.popupWindow.close();\n\t\t\t\tcreateTodo.renderControl('Link');\n\t\t\t},\n\t\t});\n\n\t\tif ('Attachment' in this.#documentFields)\n\t\t{\n\t\t\tmenuItems.push({\n\t\t\t\thtml: this.#getActionItemHtml(\n\t\t\t\t\t'ATTACH',\n\t\t\t\t\tLoc.getMessage('CRM_BP_CREATE_TODO_ACTIONS_FILE'),\n\t\t\t\t),\n\t\t\t\ttext: this.#documentFields.Attachment.Name,\n\t\t\t\tonclick()\n\t\t\t\t{\n\t\t\t\t\tthis.popupWindow.close();\n\t\t\t\t\tcreateTodo.renderControl('Attachment');\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\treturn menuItems;\n\t}\n\n\t#onAdditionalSettingsButtonClick()\n\t{\n\t\tconst menuId = `bp-create-todo-activity-${Math.random()}`;\n\t\tPopupMenu.show(\n\t\t\tmenuId,\n\t\t\tthis.#additionalSettingsButton,\n\t\t\tthis.#prepareMenuItems(),\n\t\t\t{\n\t\t\t\tautoHide: true,\n\t\t\t\toffsetLeft: (Dom.getPosition(this).width / 2),\n\t\t\t\tangle: { position: 'top', offset: 0 },\n\t\t\t\tclassName: 'bizproc-automation-inline-selector-menu',\n\t\t\t\toverlay: { backgroundColor: 'transparent' },\n\t\t\t},\n\t\t);\n\t}\n\n\tasync renderControl(fieldName: string, value = null)\n\t{\n\t\tif (this.#additionalSettingsFields[fieldName] || !(fieldName in this.#documentFields))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (fieldName === 'Colleagues')\n\t\t{\n\t\t\tthis.renderControl('Duration');\n\t\t}\n\n\t\tconst newRow = Dom.create('div', { attrs: { className: 'bizproc-automation-popup-settings' } });\n\n\t\tDom.append(\n\t\t\tDom.create(\n\t\t\t\t'span',\n\t\t\t\t{\n\t\t\t\t\ttext: this.#documentFields[fieldName].Name,\n\t\t\t\t\tattrs: {\n\t\t\t\t\t\tclassName: 'bizproc-automation-popup-settings-title bizproc-automation-popup-settings-title-autocomplete',\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t),\n\t\t\tnewRow,\n\t\t);\n\n\t\tconst deleteButton = Dom.create('a', {\n\t\t\tattrs: {\n\t\t\t\tclassName: 'bizproc-automation-popup-settings-delete bizproc-automation-popup-settings-link bizproc-automation-popup-settings-link-light',\n\t\t\t},\n\t\t\tprops: { href: '#' },\n\t\t\tevents: {\n\t\t\t\tclick: (e) => this.#removeControl(fieldName, e),\n\t\t\t},\n\t\t\ttext: Loc.getMessage('CRM_BP_CREATE_TODO_ADDITIONAL_FIELD_DELETE'),\n\t\t});\n\t\tDom.append(deleteButton, newRow);\n\n\t\t// eslint-disable-next-line init-declarations\n\t\tlet node;\n\t\tif (fieldName === 'LocationId')\n\t\t{\n\t\t\tnode = await this.#renderLocation(value);\n\t\t}\n\t\telse if (fieldName === 'Attachment')\n\t\t{\n\t\t\tnode = this.#renderFile();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tnode = this.#renderBaseControl(fieldName, value);\n\t\t}\n\n\t\tDom.append(node, newRow);\n\t\tthis.#additionalSettingsFields[fieldName] = newRow;\n\t\tDom.append(this.#additionalSettingsFields[fieldName], this.#additionalSettingsWrapper);\n\t}\n\n\t#renderBaseControl(fieldName, value = null): HTMLElement\n\t{\n\t\treturn BX.Bizproc.FieldType.renderControl(\n\t\t\tthis.#documentType,\n\t\t\tthis.#documentFields[fieldName],\n\t\t\tthis.#documentFields[fieldName].FieldName,\n\t\t\tvalue,\n\t\t);\n\t}\n\n\t#renderFile(): HTMLElement\n\t{\n\t\tconst wrapper = Dom.create('div', {\n\t\t\tattrs: {\n\t\t\t\t'data-role': 'file-selector',\n\t\t\t\t'data-config': this.#dataConfig,\n\t\t\t},\n\t\t});\n\n\t\tthis.#fileSelector = new FileSelector({\n\t\t\tcontext:\n\t\t\t\tnew SelectorContext({\n\t\t\t\t\tfields: getGlobalContext().document.getFields(),\n\t\t\t\t\trootGroupTitle: getGlobalContext().document.title,\n\t\t\t\t}),\n\t\t});\n\n\t\tthis.#fileSelector.renderTo(wrapper);\n\n\t\tconst template = Designer.getInstance().getRobotSettingsDialog()?.template;\n\t\tif (template)\n\t\t{\n\t\t\ttemplate.robotSettingsControls.push(this.#fileSelector);\n\t\t}\n\n\t\treturn wrapper;\n\t}\n\n\t#removeControl(fieldName: string, e = null)\n\t{\n\t\tif (!this.#additionalSettingsFields[fieldName])\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (fieldName === 'Attachment')\n\t\t{\n\t\t\tthis.#fileSelector.destroy();\n\t\t}\n\n\t\tif (fieldName === 'Duration')\n\t\t{\n\t\t\tthis.#removeControl('Colleagues');\n\t\t\tthis.#removeControl('LocationId');\n\t\t}\n\n\t\te?.preventDefault();\n\t\tDom.remove(this.#additionalSettingsFields[fieldName]);\n\t\tdelete this.#additionalSettingsFields[fieldName];\n\t}\n\n\t#getCapacityTitle(value: ?number): string\n\t{\n\t\tif (Type.isNil(value) || value <= 0)\n\t\t{\n\t\t\treturn '';\n\t\t}\n\n\t\treturn Loc.getMessage(\n\t\t\t'CRM_BP_CREATE_TODO_LOCATION_SELECTOR_ROOMS_CAPACITY',\n\t\t\t{ '#CAPACITY_VALUE#': value },\n\t\t);\n\t}\n\n\t#getActionItemHtml(iconKey: string, message: string): string\n\t{\n\t\tconst icon = new Icon({\n\t\t\ticon: Main[iconKey],\n\t\t\tcolor: getComputedStyle(document.body).getPropertyValue('--ui-color-palette-gray-50'),\n\t\t\tsize: 25,\n\t\t});\n\n\t\treturn Tag.render`\n\t\t\t<span class=\"bizproc_automation-todo-activity-actions-menu-item\">\n\t\t\t\t<span class=\"bizproc_automation-todo-activity-actions-menu-item-icon\">${icon.render()}</span>\n\t\t\t\t${message}\n\t\t\t</span>\n\t\t`;\n\t}\n\n\t#getColorSelector(wrapper, settings, isAvailableColor): ColorSelector\n\t{\n\t\treturn new ColorSelector(\n\t\t\t{\n\t\t\t\ttarget: wrapper,\n\t\t\t\tcolorList: settings.valuesList,\n\t\t\t\tselectedColorId: isAvailableColor ? settings.selectedValueId : 'default',\n\t\t\t\treadOnlyMode: settings.readOnlyMode,\n\t\t\t},\n\t\t);\n\t}\n\n\t#onChangeAttachmentTypeHandler(value)\n\t{\n\t\tthis.#fileControl.hidden = value === 'disk';\n\t\tthis.#diskControl.hidden = value === 'file';\n\n\t\tconst disableInputs = BX(`BPMA-${this.#attachmentType}-control`).querySelectorAll('input');\n\t\tfor (const disableInput of disableInputs)\n\t\t{\n\t\t\tdisableInput.disable = true;\n\t\t}\n\t\tconst enableInputs = BX(`BPMA-${value}-control`).querySelectorAll('input');\n\t\tfor (const enableInput of enableInputs)\n\t\t{\n\t\t\tenableInput.disabled = false;\n\t\t}\n\t}\n\n\t#openDiskFileDialog()\n\t{\n\t\tconst urlSelect = `/bitrix/tools/disk/uf.php?action=selectFile&dialog2=Y&SITE_ID=${Loc.getMessage('SITE_ID')}`;\n\t\tconst dialogName = 'BPMA';\n\t\tBX.ajax.get(\n\t\t\turlSelect,\n\t\t\t`multiselect=Y&dialogName=${dialogName}`,\n\t\t\t() => {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tBX.DiskFileDialog.obCallback[dialogName] = {\n\t\t\t\t\t\tsaveButton: (tab, path, selected) => this.#onSaveButtonClickHandler(tab, path, selected),\n\t\t\t\t\t};\n\t\t\t\t\tBX.DiskFileDialog.openDialog(dialogName);\n\t\t\t\t}, 10);\n\t\t\t},\n\t\t);\n\t}\n\n\t#onSaveButtonClickHandler(tab, path, selected)\n\t{\n\t\tfor (const file of Object.values(selected))\n\t\t{\n\t\t\tif (file.type === 'file')\n\t\t\t{\n\t\t\t\tDom.append(this.#renderAttachmentFile(file), this.#diskControlItems);\n\t\t\t}\n\t\t}\n\t}\n\n\t#renderAttachmentFile(file): Element\n\t{\n\t\tconst fileWrapper = Tag.render`\n\t\t\t<div>\n\t\t\t\t<input type=\"hidden\" name=\"attachment[]\" value=\"${(file.id).toString().slice(1)}\"/>\n\t\t\t\t<span style=\"color: grey\">${BX.util.htmlspecialchars(file.name)}</span>\n\t\t\t</div>\n\t\t`;\n\t\tconst deleteButton = Tag.render`\n\t\t\t<a style=\"color: red; text-decoration: none; border-bottom: 1px dotted\">x</a>\n\t\t`;\n\t\tEvent.bind(deleteButton, 'click', () => Dom.remove(fileWrapper));\n\t\tDom.append(deleteButton, fileWrapper);\n\n\t\treturn fileWrapper;\n\t}\n\n\t#assertValidOptions(options: CreateTodoActivityOptions)\n\t{\n\t\tif (!Type.isObject(options.documentFields))\n\t\t{\n\t\t\tthrow new TypeError('documentFields must be a object');\n\t\t}\n\n\t\tif (!Type.isElementNode(options.additionalSettingsWrapper))\n\t\t{\n\t\t\tthrow new Error('additionalSettingsWrapper must be HTMLElement');\n\t\t}\n\n\t\tif (!Type.isElementNode(options.additionalSettingsButton))\n\t\t{\n\t\t\tthrow new Error('additionalSettingsButton must be HTMLElement');\n\t\t}\n\n\t\tif (!Type.isArrayFilled(options.documentType))\n\t\t{\n\t\t\tthrow new Error('documentType must be filled array');\n\t\t}\n\n\t\tif (!Type.isElementNode(options.colorSelectorWrapper))\n\t\t{\n\t\t\tthrow new Error('colorSelectorWrapper must be HTMLElement');\n\t\t}\n\n\t\tif (!Type.isStringFilled(options.formName))\n\t\t{\n\t\t\tthrow new Error('formName must be filled string');\n\t\t}\n\n\t\tif (!Type.isStringFilled(options.dataConfig))\n\t\t{\n\t\t\tthrow new Error('dataConfig must be a filled string');\n\t\t}\n\n\t\tif (!Type.isObject(options.colorSettings))\n\t\t{\n\t\t\tthrow new TypeError('colorSettings must be a object');\n\t\t}\n\t}\n}\n\nnamespace.CrmCreateTodoActivity = CrmCreateTodoActivity;\n"],"names":["namespace","Reflection","CrmCreateTodoActivity","constructor","options","documentFields","isRobot","documentType","additionalSettingsWrapper","additionalSettingsButton","Event","bind","dataConfig","colorSelectorWrapper","colorSettings","isAvailableColor","selectedValueId","EventEmitter","subscribe","ColorSelectorEvents","EVENT_COLORSELECTOR_VALUE_CHANGE","attachmentType","fileControl","diskControl","diskControlItems","value","event","target","showDiskFileDialogButton","renderControl","fieldName","newRow","Dom","create","attrs","className","append","text","Name","deleteButton","props","href","events","click","e","Loc","getMessage","node","dialog","Designer","getInstance","getRobotSettingsDialog","robot","setOnBeforeSaveRobotSettings","data","color_id","LocationId","location_id","locationSelectorDialog","getTags","id","locationId","locations","Type","isNil","tabs","title","items","rooms","forEach","room","push","ID","NAME","subtitle","CAPACITY","entityId","avatarOptions","bgColor","COLOR","bgSize","bgImage","customData","LOCATION_ID","TagSelector","multiple","textBoxAutoHide","dialogOptions","targetNode","context","dropdownMode","showAvatars","enableSearch","width","height","zIndex","locationTag","find","location","addTag","expression","wrapper","Tag","render","renderTo","Promise","resolve","ajax","runAction","then","response","catch","errors","console","log","menuItems","createTodo","html","onclick","popupWindow","close","Attachment","menuId","Math","random","PopupMenu","show","autoHide","offsetLeft","getPosition","angle","position","offset","overlay","backgroundColor","BX","Bizproc","FieldType","FieldName","FileSelector","SelectorContext","fields","getGlobalContext","document","getFields","rootGroupTitle","template","robotSettingsControls","destroy","preventDefault","remove","iconKey","message","icon","Icon","Main","color","getComputedStyle","body","getPropertyValue","size","settings","ColorSelector","colorList","valuesList","selectedColorId","readOnlyMode","hidden","disableInputs","querySelectorAll","disableInput","disable","enableInputs","enableInput","disabled","urlSelect","dialogName","get","setTimeout","DiskFileDialog","obCallback","saveButton","tab","path","selected","openDialog","file","Object","values","type","fileWrapper","toString","slice","util","htmlspecialchars","name","isObject","TypeError","isElementNode","Error","isArrayFilled","isStringFilled","formName"],"mappings":"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"}