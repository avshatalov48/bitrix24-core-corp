jn.define("disk/uploader",((e,t,i)=>{const{Color:o}=e("tokens");const{Loc:s}=e("loc");const{BottomSheet:n}=e("bottom-sheet");const{Uuid:a}=e("utils/uuid");const{Defaults:r}=e("disk/uploader/src/config");const{DiskUploaderView:d}=e("disk/uploader/src/view");const l=Boolean(jnExtensionData?.get("disk:uploader")?.isAirUploaderEnabled);class c{static open(e){if(l){new c(e).run()}else{bitrix24Disk.show({listener:e.onCommit,folderId:String(e.folderId),storageId:String(e.storageId),multipleUpload:true})}}constructor(e){this.options=e}run(){this.#e((e=>{const t=this.#t(e);const i=new n({component:e=>new d({tasks:t,layoutWidget:e,onCommit:this.options.onCommit})});i.setParentWidget(this.#i()).setBackgroundColor(o.bgSecondary.toHex()).setNavigationBarColor(o.bgContentPrimary.toHex()).enableForceDismissOnSwipeDown().disableHorizontalSwipe().enableSwipe().enableResizeContent().disableOnlyMediumPosition().setTitleParams({text:s.getMessage("M_DISK_UPLOADER_TITLE"),type:"dialog"});if(t.length>6){i.showOnTop()}void i.open()}))}#i(){return this.options.layoutWidget??PageManager}#e(e){const t=[{id:"mediateka"},{id:"camera"}];const i={resize:{targetWidth:-1,targetHeight:-1,sourceType:1,encodingType:0,mediaType:2,allowsEdit:true,saveToPhotoAlbum:true,cameraDirection:0},maxAttachedFilesCount:r.MAX_ATTACHED_FILES_COUNT,previewMaxWidth:r.PREVIEW_MAX_WIDTH,previewMaxHeight:r.PREVIEW_MAX_HEIGHT,attachButton:{items:t}};dialogs.showImagePicker({settings:i},e)}#t(e=[]){return e.map((e=>{const t={...e,taskId:a.getV4(),folderId:this.options.folderId,chunk:r.CHUNK_SIZE,params:{disableAutoCommit:true}};const i=(e.type?String(e.type):"").toLowerCase();if(i==="heic"){t.resize={width:e.width?e.width*2:undefined,height:e.height?e.height*2:undefined,quality:60}}return t}))}}i.exports={DiskUploader:c,isAirUploaderEnabled:l}}));
//# sourceMappingURL=extension.map.js