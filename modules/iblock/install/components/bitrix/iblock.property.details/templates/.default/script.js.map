{"version":3,"file":"script.js","sources":["src/buttons.js","src/errors.js","src/progress.js","src/sliders.js","src/property-details.js"],"sourcesContent":["import { Loc, Dom } from 'main.core';\nimport { ButtonManager, Button } from 'ui.buttons';\nimport { MessageBox } from 'ui.dialogs.messagebox';\n\nexport class Buttons\n{\n\tcontainer: HTMLElement;\n\tcallbacks: Object;\n\tsaveButton: Button;\n\tremoveButton: Button;\n\n\tconstructor(container: HTMLElement, callbacks: Object)\n\t{\n\t\tthis.callbacks = callbacks;\n\t\tthis.container = container;\n\n\t\tconst saveButtonNode = container.querySelector('#ui-button-panel-save');\n\t\tif (saveButtonNode)\n\t\t{\n\t\t\tsaveButtonNode.addEventListener('click', this.handleSaveButtonClick.bind(this));\n\t\t\tthis.saveButton = ButtonManager.createFromNode(saveButtonNode);\n\t\t}\n\n\t\tconst removeButtonNode = container.querySelector('#ui-button-panel-remove');\n\t\tif (removeButtonNode)\n\t\t{\n\t\t\tremoveButtonNode.addEventListener('click', this.handleRemoveButtonClick.bind(this));\n\t\t\tthis.removeButton = ButtonManager.createFromNode(removeButtonNode);\n\t\t}\n\t}\n\n\thandleSaveButtonClick(e): void\n\t{\n\t\tconst clearState = () => {\n\t\t\tthis.saveButton.setWaiting(false);\n\t\t\tDom.removeClass(this.saveButton.getContainer(), 'ui-btn-wait');\n\t\t};\n\n\t\tthis.callbacks.onSave().then(clearState).catch(clearState);\n\t}\n\n\thandleRemoveButtonClick(e): void\n\t{\n\t\tconst clearState = () => {\n\t\t\tthis.removeButton.setWaiting(false);\n\t\t\tDom.removeClass(this.removeButton.getContainer(), 'ui-btn-wait');\n\t\t};\n\n\t\tMessageBox.confirm(\n\t\t\tLoc.getMessage('IBLOCK_PROPERTY_DETAILS_REMOVE_POPUP_MESSAGE'),\n\t\t\t() => {\n\t\t\t\tthis.callbacks.onRemove().then(clearState).catch(clearState);\n\n\t\t\t\treturn true;\n\t\t\t},\n\t\t\tnull,\n\t\t\t() => {\n\t\t\t\tclearState();\n\n\t\t\t\treturn true;\n\t\t\t}\n\t\t);\n\t}\n};\n","export class Errors\n{\n\terrorsMessage: HTMLElement;\n\terrorsWrapper: HTMLElement;\n\n\tconstructor(container)\n\t{\n\t\tthis.errorsWrapper = container.querySelector('#iblock-property-details-errors');\n\t\tthis.errorsMessage = this.errorsWrapper.querySelector('.ui-alert-message');\n\t}\n\n\tshow(errors: Array): void\n\t{\n\t\tthis.errorsMessage.innerHTML = errors.map((i) => i.message).join(\"\\n\");\n\t\tthis.errorsWrapper.style.display = 'block';\n\t}\n\n\thide(): void\n\t{\n\t\tthis.errorsMessage.innerHTML = '';\n\t\tthis.errorsWrapper.style.display = 'none';\n\t}\n};\n","import { Loader } from 'main.core';\n\nexport class Progress\n{\n\tloader: Loader;\n\tcontainer: HTMLElement;\n\tisProgress: Boolean = false;\n\n\tconstructor(container)\n\t{\n\t\tthis.container = container;\n\t}\n\n\tgetLoader()\n\t{\n\t\tif (!this.loader)\n\t\t{\n\t\t\tthis.loader = new Loader({\n\t\t\t\tsize: 150,\n\t\t\t});\n\t\t}\n\n\t\treturn this.loader;\n\t}\n\n\tstart()\n\t{\n\t\tthis.isProgress = true;\n\t\tif (!this.getLoader().isShown())\n\t\t{\n\t\t\tthis.getLoader().show(this.container);\n\t\t}\n\t}\n\n\tstop()\n\t{\n\t\tthis.isProgress = false;\n\t\tthis.getLoader().hide();\n\t}\n};\n","const storageKey = 'iblockPropertyDetails:deferredSlider'\n\nexport class Sliders\n{\n\tstatic getDeferredSlider(): ?String\n\t{\n\t\tconst sliderName = top[storageKey];\n\n\t\ttop[storageKey] = null;\n\n\t\treturn sliderName;\n\t}\n\n\tstatic setDeferredSlider(sliderName: String)\n\t{\n\t\ttop[storageKey] = sliderName;\n\t}\n}\n","import { Runtime, ajax, Uri, Loc, Type } from 'main.core';\nimport { MessageBox } from 'ui.dialogs.messagebox';\nimport { Buttons } from './buttons';\nimport { Errors } from './errors';\nimport { Progress } from './progress';\nimport { Sliders } from './sliders';\n\nexport class PropertyDetails\n{\n\tpropertyId: Number;\n\tiblockId: Number;\n\tcontainer: HTMLElement;\n\tslidersOptions: Object;\n\tsignedParameters: String;\n\tdetailPageUrlTemplate: String;\n\n\terrors: Errors;\n\tbuttons: Buttons;\n\tprogress: Progress;\n\n\tconstructor(options)\n\t{\n\t\tthis.iblockId = options.iblockId;\n\t\tthis.propertyId = options.propertyId;\n\t\tthis.slidersOptions = options.sliders;\n\t\tthis.signedParameters = options.signedParameters;\n\t\tthis.detailPageUrlTemplate = options.detailPageUrlTemplate || '';\n\n\t\tthis.container = document.querySelector(options.containerSelector);\n\n\t\tthis.errors = new Errors(this.container);\n\t\tthis.progress = new Progress(this.container);\n\t\tthis.buttons = new Buttons(this.container, {\n\t\t\tonSave: this.handlerSaveButtonClick.bind(this),\n\t\t\tonRemove: this.handlerRemoveButtonClick.bind(this),\n\t\t});\n\n\t\tthis.initEvents();\n\t\tthis.adjustVisibilityLeftMenu();\n\t\tthis.stylizationSettingsControls();\n\n\t\tBX.UI.Hint.init(this.container);\n\n\t\tconst deferredSliderName = Sliders.getDeferredSlider();\n\t\tif (deferredSliderName)\n\t\t{\n\t\t\tthis.openSlider(deferredSliderName);\n\t\t}\n\t}\n\n\t#runAction(action, data): Promise\n\t{\n\t\treturn ajax.runComponentAction('bitrix:iblock.property.details', action, {\n\t\t\tmode: 'class',\n\t\t\tsignedParameters: this.signedParameters,\n\t\t\tdata,\n\t\t});\n\t}\n\n\tinitEvents(): void\n\t{\n\t\tthis.getPropertyTypeInput().addEventListener('change', this.handlePropertyTypeChange.bind(this));\n\t}\n\n\tgetTabs(): NodeList\n\t{\n\t\treturn this.container.querySelectorAll('.iblock-property-details-tab');\n\t}\n\n\tgetAdditionalTab(): HTMLElement\n\t{\n\t\treturn Array.prototype.find.call(\n\t\t\tthis.getTabs(),\n\t\t\t(node: HTMLElement) => node.dataset.tab === 'additional'\n\t\t);\n\t}\n\n\tgetPropertyTypeInput(): HTMLInputElement\n\t{\n\t\treturn this.container.querySelector('[name=\"PROPERTY_TYPE\"]');\n\t}\n\n\topenTab(tabName): void\n\t{\n\t\tconst activeClassName = 'iblock-property-details-tab_current';\n\n\t\tthis.getTabs().forEach((tab: HTMLElement) => {\n\t\t\tif (tab.dataset.tab === tabName)\n\t\t\t{\n\t\t\t\ttab.classList.add(activeClassName);\n\t\t\t}\n\t\t\telse if (tab.classList.contains(activeClassName))\n\t\t\t{\n\t\t\t\ttab.classList.remove(activeClassName);\n\t\t\t}\n\t\t});\n\t}\n\n\topenSlider(sliderName): void\n\t{\n\t\tconst sliderOptions = this.slidersOptions[sliderName];\n\t\tif (!sliderOptions)\n\t\t{\n\t\t\tthrow new Error(`Cannot find config for slider '${sliderName}'`);\n\t\t}\n\n\t\tif (this.isNewProperty() && sliderOptions.newPropertyConfirmMessage)\n\t\t{\n\t\t\tMessageBox.confirm(\n\t\t\t\tsliderOptions.newPropertyConfirmMessage,\n\t\t\t\t() => {\n\t\t\t\t\tSliders.setDeferredSlider(sliderName);\n\n\t\t\t\t\tthis.handlerSaveButtonClick();\n\n\t\t\t\t\treturn true;\n\t\t\t\t},\n\t\t\t\tLoc.getMessage('IBLOCK_PROPERTY_DETAILS_POPUP_OPEN_SLIDER_CONFIRM_SAVE_BUTTON')\n\t\t\t);\n\t\t}\n\t\telse\n\t\t{\n\t\t\ttop.BX.SidePanel.Instance.open(sliderOptions.url, sliderOptions);\n\t\t}\n\t}\n\n\thandlePropertyTypeChange(e)\n\t{\n\t\tif (this.progress.isProgress)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.progress.start();\n\t\tthis.errors.hide();\n\n\t\tthis\n\t\t\t.#runAction('getSettings', {\n\t\t\t\tpropertyFullType: this.getPropertyTypeInput().value,\n\t\t\t})\n\t\t\t.then((response) => {\n\t\t\t\tconst showedFields = response.data.info?.showedFields;\n\t\t\t\tif (Type.isArray(showedFields))\n\t\t\t\t{\n\t\t\t\t\tthis.adjustVisibilityCommonFields(showedFields);\n\t\t\t\t}\n\n\t\t\t\tlet html = '';\n\t\t\t\tif (response.data.html && response.data.html.length > 0)\n\t\t\t\t{\n\t\t\t\t\thtml = response.data.html;\n\t\t\t\t}\n\n\t\t\t\tthis.progress.stop();\n\n\t\t\t\tRuntime.html(this.getAdditionalTab(), html).then(() => {\n\t\t\t\t\tthis.adjustVisibilityLeftMenu();\n\t\t\t\t\tthis.stylizationSettingsControls();\n\t\t\t\t});\n\t\t\t})\n\t\t\t.catch((response) => {\n\t\t\t\tthis.progress.stop();\n\n\t\t\t\tthis.errors.show(\n\t\t\t\t\tresponse.errors\n\t\t\t\t);\n\t\t\t})\n\t\t;\n\t}\n\n\tadjustVisibilityCommonFields(fields: Array): void\n\t{\n\t\tconst commonTab = this.container.querySelector('[data-tab=\"common\"]');\n\t\tif (!commonTab)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tcommonTab.querySelectorAll('input, select, textarea').forEach((input) => {\n\t\t\tif (!input.name || input.name === 'PROPERTY_TYPE')\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst inputContainer = input.closest('.iblock-property-details-input');\n\t\t\tif (fields.includes(input.name))\n\t\t\t{\n\t\t\t\tinput.disabled = false;\n\t\t\t\tif (inputContainer)\n\t\t\t\t{\n\t\t\t\t\tinputContainer.style.display = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tinput.disabled = true;\n\t\t\t\tif (inputContainer)\n\t\t\t\t{\n\t\t\t\t\tinputContainer.style.display = 'none';\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tadjustVisibilityLeftMenu(): void\n\t{\n\t\tconst propertyType = this.container.querySelector('[name=\"PROPERTY_TYPE\"]')?.value;\n\n\t\tconst listMenuItem = document.querySelector('#iblock-property-details-sidepanel-menu [data-slider=\"list-values\"]');\n\t\tif (propertyType === 'L')\n\t\t{\n\t\t\tlistMenuItem.style.display = 'flex';\n\t\t}\n\t\telse\n\t\t{\n\t\t\tlistMenuItem.style.display = 'none';\n\t\t}\n\n\t\tconst directoryMenuItem = document.querySelector('#iblock-property-details-sidepanel-menu [data-slider=\"directory-items\"]');\n\t\tif (propertyType === 'S:directory')\n\t\t{\n\t\t\tdirectoryMenuItem.style.display = 'flex';\n\t\t}\n\t\telse\n\t\t{\n\t\t\tdirectoryMenuItem.style.display = 'none';\n\t\t}\n\t}\n\n\tstylizationSettingsControls(): void\n\t{\n\t\tconst buttonInputTypes = [\n\t\t\t'button',\n\t\t\t'submit',\n\t\t\t'reset',\n\t\t];\n\t\tconst flagInputTypes = [\n\t\t\t'checkbox',\n\t\t\t'radio',\n\t\t];\n\n\t\tconst isOnlyChild = function(control) {\n\t\t\tlet childs = control.parentNode.childNodes;\n\n\t\t\tchilds = Array.prototype.filter.call(childs, (item) => {\n\t\t\t\tif (item instanceof Text)\n\t\t\t\t{\n\t\t\t\t\treturn item.nodeValue.trim() !== '';\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t});\n\n\t\t\treturn childs.length === 1;\n\t\t};\n\t\tconst prepareControl = function(control) {\n\t\t\t// skip `ui.forms` controls\n\t\t\tif (control.classList.contains('ui-ctl-element'))\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (control.nodeName === 'INPUT')\n\t\t\t{\n\t\t\t\tconst type = control.type || 'text';\n\t\t\t\tif (buttonInputTypes.includes(type))\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\telse if (flagInputTypes.includes(type))\n\t\t\t\t{\n\t\t\t\t\t// pass\n\t\t\t\t}\n\t\t\t\telse if (type === 'hidden')\n\t\t\t\t{\n\t\t\t\t\t// pass\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tcontrol.classList.add('ui-ctl-element');\n\t\t\t\t\tif (!isOnlyChild(control))\n\t\t\t\t\t{\n\t\t\t\t\t\tcontrol.classList.add('ui-ctl-inline');\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tcontrol.classList.add('ui-ctl-w100');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (control.nodeName === 'SELECT')\n\t\t\t{\n\t\t\t\tcontrol.classList.add('ui-ctl-element');\n\t\t\t\tif (!isOnlyChild(control))\n\t\t\t\t{\n\t\t\t\t\tcontrol.classList.add('ui-ctl-inline');\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (control.nodeName === 'TEXTAREA')\n\t\t\t{\n\t\t\t\tcontrol.classList.add('ui-ctl-element');\n\t\t\t\tcontrol.classList.add('ui-ctl-textarea');\n\t\t\t}\n\t\t};\n\n\t\tconst settingsContainer = this.getAdditionalTab().querySelector('.iblock-property-details-settings-table');\n\t\tif (settingsContainer)\n\t\t{\n\t\t\tsettingsContainer\n\t\t\t\t.querySelectorAll('input, select, textarea')\n\t\t\t\t.forEach(prepareControl)\n\t\t\t;\n\t\t}\n\n\t\tconst defaultValueControl = this.getAdditionalTab().querySelector('[name=\"DEFAULT_VALUE\"]');\n\t\tif (defaultValueControl)\n\t\t{\n\t\t\tdefaultValueControl\n\t\t\t\t.closest('.iblock-property-details-input')\n\t\t\t\t.querySelectorAll('input, select, textarea')\n\t\t\t\t.forEach(prepareControl)\n\t\t\t;\n\t\t}\n\t}\n\n\tgetFields(): FormData\n\t{\n\t\tconst result = new FormData();\n\n\t\tlet m;\n\t\tconst regex = /^(.+?)(\\[.+)$/;\n\t\tconst formData = new FormData(\n\t\t\tthis.container.querySelector('form')\n\t\t);\n\t\tfor (const pair of formData.entries())\n\t\t{\n\t\t\tlet name = pair[0];\n\t\t\tif (m = regex.exec(name))\n\t\t\t{\n\t\t\t\tname = `fields[${m[1]}]${m[2]}`;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tname = `fields[${name}]`;\n\t\t\t}\n\n\t\t\tresult.append(name, pair[1]);\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t#getSlider()\n\t{\n\t\treturn top.BX.SidePanel.Instance.getTopSlider();\n\t}\n\n\tisNewProperty(): Boolean\n\t{\n\t\treturn parseInt(this.propertyId) === 0;\n\t}\n\n\thandlerSaveButtonClick(): Promise\n\t{\n\t\tthis.progress.start();\n\t\tthis.errors.hide();\n\n\t\tconst data = this.getFields();\n\t\tdata.append('propertyId', this.propertyId);\n\t\tdata.append('iblockId', this.iblockId);\n\t\tdata.append('sessid', BX.bitrix_sessid());\n\n\t\treturn this\n\t\t\t.#runAction('save', data)\n\t\t\t.then((response) => {\n\t\t\t\tthis.progress.stop();\n\n\t\t\t\tif (response.errors.length > 0)\n\t\t\t\t{\n\t\t\t\t\tthis.errors.show(\n\t\t\t\t\t\tresponse.errors\n\t\t\t\t\t);\n\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tthis.#getSlider().close();\n\n\t\t\t\treturn true;\n\t\t\t})\n\t\t\t.catch((response) => {\n\t\t\t\tthis.progress.stop();\n\n\t\t\t\tthis.errors.show(\n\t\t\t\t\tresponse.errors\n\t\t\t\t);\n\n\t\t\t\treturn false;\n\t\t\t})\n\t\t;\n\t}\n\n\thandlerRemoveButtonClick(): Promise\n\t{\n\t\tthis.progress.start();\n\t\tthis.errors.hide();\n\n\t\treturn this\n\t\t\t.#runAction('delete', {\n\t\t\t\tid: this.propertyId,\n\t\t\t})\n\t\t\t.then((response) => {\n\t\t\t\tthis.progress.stop();\n\n\t\t\t\tthis.#getSlider().close();\n\n\t\t\t\treturn true;\n\t\t\t})\n\t\t\t.catch((response) => {\n\t\t\t\tthis.progress.stop();\n\n\t\t\t\tthis.errors.show(\n\t\t\t\t\tresponse.errors\n\t\t\t\t);\n\n\t\t\t\treturn false;\n\t\t\t})\n\t\t;\n\t}\n}\n"],"names":["Buttons","container","callbacks","babelHelpers","classCallCheck","saveButtonNode","querySelector","addEventListener","handleSaveButtonClick","bind","saveButton","ButtonManager","createFromNode","removeButtonNode","handleRemoveButtonClick","removeButton","createClass","key","value","e","_this","clearState","setWaiting","Dom","removeClass","getContainer","onSave","then","_this2","MessageBox","confirm","Loc","getMessage","onRemove","Errors","errorsWrapper","errorsMessage","show","errors","innerHTML","map","i","message","join","style","display","hide","Progress","defineProperty","getLoader","loader","Loader","size","start","isProgress","isShown","stop","storageKey","Sliders","getDeferredSlider","sliderName","top","setDeferredSlider","_runAction","WeakSet","_getSlider","PropertyDetails","options","_classPrivateMethodInitSpec","iblockId","propertyId","slidersOptions","sliders","signedParameters","detailPageUrlTemplate","document","containerSelector","progress","buttons","handlerSaveButtonClick","handlerRemoveButtonClick","initEvents","adjustVisibilityLeftMenu","stylizationSettingsControls","BX","UI","Hint","init","deferredSliderName","openSlider","getPropertyTypeInput","handlePropertyTypeChange","getTabs","querySelectorAll","getAdditionalTab","Array","prototype","find","call","node","dataset","tab","openTab","tabName","activeClassName","forEach","classList","add","contains","remove","sliderOptions","Error","concat","isNewProperty","newPropertyConfirmMessage","SidePanel","Instance","open","url","_classPrivateMethodGet","_runAction2","propertyFullType","response","_response$data$info","showedFields","data","info","Type","isArray","adjustVisibilityCommonFields","html","length","Runtime","fields","commonTab","input","name","inputContainer","closest","includes","disabled","_this$container$query","propertyType","listMenuItem","directoryMenuItem","buttonInputTypes","flagInputTypes","isOnlyChild","control","childs","parentNode","childNodes","filter","item","Text","nodeValue","trim","prepareControl","nodeName","type","settingsContainer","defaultValueControl","getFields","result","FormData","m","regex","formData","_iterator","_createForOfIteratorHelper","entries","_step","s","n","done","pair","exec","append","err","f","parseInt","_this3","bitrix_sessid","_getSlider2","close","_this4","id","action","ajax","runComponentAction","mode","getTopSlider"],"mappings":"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"}