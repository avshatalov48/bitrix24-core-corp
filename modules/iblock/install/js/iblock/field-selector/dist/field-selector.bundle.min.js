this.BX=this.BX||{},function(e,t,i){"use strict";var s,n,r,l,a=function(){function e(i){babelHelpers.classCallCheck(this,e),babelHelpers.defineProperty(this,"state",!0),babelHelpers.defineProperty(this,"containerId",""),babelHelpers.defineProperty(this,"fieldName",""),babelHelpers.defineProperty(this,"multiple",!1),babelHelpers.defineProperty(this,"selectedItems",[]),babelHelpers.defineProperty(this,"iblockId",0),babelHelpers.defineProperty(this,"userType",""),babelHelpers.defineProperty(this,"entityId",""),babelHelpers.defineProperty(this,"searchMessages",{});var s=t.Type.isPlainObject(i)?i:{};this.resetState(),this.setContainerId(s.containerId),this.setFieldName(s.fieldName),this.setMultiple(s.multiple),this.setSelectedItems(s.selectedItems),this.setIblockId(s.iblockId),this.setUserType(s.userType),this.setEntityId(s.entityId),this.setSearchMessages(s.searchMessages)}return babelHelpers.createClass(e,[{key:"resetState",value:function(){this.state=!0}},{key:"isStateSuccess",value:function(){return this.state}},{key:"showError",value:function(e){this.state=!1,t.Type.isStringFilled(e)&&console.error(e)}},{key:"showWarning",value:function(e){this.state=!1,t.Type.isStringFilled(e)&&console.warn(e)}},{key:"setContainerId",value:function(e){this.containerId=t.Type.isStringFilled(e)?e:"",""===this.containerId&&this.showError("BX.Iblock.FieldSelector: containerId is empty. Selector is can't be used")}},{key:"getContainerId",value:function(){return this.containerId}},{key:"setFieldName",value:function(e){this.fieldName=t.Type.isStringFilled(e)?e:"",""===this.fieldName&&this.showError("BX.Iblock.FieldSelector: fieldName is empty. Selector is can't be used")}},{key:"getFieldName",value:function(){return this.fieldName}},{key:"setMultiple",value:function(e){this.multiple=!!t.Type.isBoolean(e)&&e}},{key:"getMultiple",value:function(){return this.multiple}},{key:"getTagSelectorContainerId",value:function(){return this.getContainerId()+"_selector"}},{key:"getTagResultContainerId",value:function(){return this.getContainerId()+"_results"}},{key:"getTagSelectorControlId",value:function(){return this.getContainerId()+"Control"}},{key:"setSelectedItems",value:function(e){var i=this;this.selectedItems=[],t.Type.isArray(e)?e.forEach((function(e){t.Type.isInteger(e)&&i.selectedItems.push(e)})):t.Type.isInteger(e)&&this.selectedItems.push(e)}},{key:"getSelectedItems",value:function(){return this.selectedItems}},{key:"getTagSelectorItems",value:function(){var e=this.getEntityId(),t=[];return this.getSelectedItems().forEach((function(i){var s=[e,i];t.push(s)})),t}},{key:"setIblockId",value:function(e){this.iblockId=0,t.Type.isInteger(e)&&e>0&&(this.iblockId=e)}},{key:"getIblockId",value:function(){return this.iblockId}},{key:"setUserType",value:function(e){this.userType="",t.Type.isStringFilled(e)&&(this.userType=e)}},{key:"getUserType",value:function(){return this.userType}},{key:"setEntityId",value:function(e){this.entityId=t.Type.isStringFilled(e)?e:"",""===this.entityId&&this.showError("BX.Iblock.FieldSelector: entityI id is empty. Selector is can't be used")}},{key:"getEntityId",value:function(){return this.entityId}},{key:"setSearchMessages",value:function(e){t.Type.isPlainObject(e)?(this.searchMessages.title=t.Type.isStringFilled(e.title)?e.title:"",this.searchMessages.subtitle=t.Type.isStringFilled(e.subtitle)?e.subtitle:""):(this.searchMessages.title="",this.searchMessages.subtitle="")}},{key:"getSearchTabTitle",value:function(){return this.searchMessages.title}},{key:"getSearchSubtitle",value:function(){return this.searchMessages.subtitle}},{key:"render",value:function(){if(this.isStateSuccess()){var e=this.getContainerId(),r=document.getElementById(e);t.Type.isElementNode(r)||this.showError("BX.Iblock.FieldSelector: dom-container "+e+" is absent. Selector is can't be used");var l=t.Tag.render(s||(s=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div id="','"></div>\n\t\t'])),this.getTagSelectorContainerId());t.Dom.append(l,r);var a=t.Tag.render(n||(n=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div id="','"></div>\n\t\t'])),this.getTagResultContainerId());t.Dom.append(a,r),this.renderSelectedItems(this.getSelectedItems());var o={id:this.getTagSelectorControlId(),multiple:this.getMultiple(),dialogOptions:{id:this.getTagSelectorControlId(),multiple:this.getMultiple(),preselectedItems:this.getTagSelectorItems(),entities:[{id:this.getEntityId(),dynamicLoad:!0,dynamicSearch:!0,options:{iblockId:this.getIblockId(),propertyType:this.getUserType()}}],searchOptions:{allowCreateItem:!1},searchTabOptions:{stub:!0,stubOptions:{title:t.Text.encode(this.getSearchTabTitle()),subtitle:t.Text.encode(this.getSearchSubtitle()),arrow:!1}},events:{"Item:onSelect":this.updateSelectedItems.bind(this),"Item:onDeselect":this.updateSelectedItems.bind(this)}}};new i.TagSelector(o).renderTo(l)}}},{key:"renderSelectedItems",value:function(e){var i=document.getElementById(this.getTagResultContainerId());if(t.Type.isDomNode(i)){var s=this.getFieldName();if(i.innerHTML="",e.length>0)e.forEach((function(e){var n=t.Tag.render(r||(r=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t\t<input type="hidden" name="','" value="','">\n\t\t\t\t'])),s,e.toString());t.Dom.append(n,i)}));else{var n=t.Tag.render(l||(l=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<input type="hidden" name="','" value="">\n\t\t\t'])),s);t.Dom.append(n,i)}}}},{key:"updateSelectedItems",value:function(e){var i=e.getTarget();i.isMultiple()||i.hide();var s=i.getSelectedItems();if(t.Type.isArray(s)){var n=[];s.forEach((function(e){n.push(e.getId())})),this.renderSelectedItems(n)}}}]),e}();e.FieldSelector=a}(this.BX.Iblock=this.BX.Iblock||{},BX,BX.UI.EntitySelector);
//# sourceMappingURL=field-selector.bundle.map.js