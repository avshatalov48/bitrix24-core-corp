{"version":3,"file":"script.js","sources":["script.es6.js"],"sourcesContent":["import {Reflection, Event, Type, Loc, Dom, Tag, Text} from 'main.core';\nimport {Component} from 'rpa.component';\nimport {Manager} from 'rpa.manager';\n\nconst namespace = Reflection.namespace('BX.Rpa');\n\nclass StagesComponent extends Component\n{\n\tstatic defaultCommonStageColor = '39A8EF';\n\tstatic defaultFailStageColor = 'FF5752';\n\n\tconstructor(...args)\n\t{\n\t\tsuper(...args);\n\n\t\tthis.stages = new Set();\n\t\tif(Type.isArray(this.params.stages))\n\t\t{\n\t\t\tthis.params.stages.forEach((data) =>\n\t\t\t{\n\t\t\t\tif(this.stages.size <= 0)\n\t\t\t\t{\n\t\t\t\t\tdata.first = true;\n\t\t\t\t}\n\t\t\t\tconst stage = this.createStage(data);\n\t\t\t\tif(stage)\n\t\t\t\t{\n\t\t\t\t\tthis.addStage(stage);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tthis.typeId = this.params.typeId;\n\n\t\tthis.firstStageContainer = this.form.querySelector('[data-role=\"rpa-stages-first\"]');\n\t\tthis.commonStagesContainer = this.form.querySelector('[data-role=\"rpa-stages-common\"]');\n\t\tthis.successStageContainer = this.form.querySelector('[data-role=\"rpa-stages-success\"]');\n\t\tthis.failStageContainer = this.form.querySelector('[data-role=\"rpa-stages-fail\"]');\n\n\t\tthis.addCommonStageButton = this.form.querySelector('[data-role=\"rpa-stage-common-add\"]');\n\t\tthis.addFailStageButton = this.form.querySelector('[data-role=\"rpa-stage-fail-add\"]');\n\t}\n\n\tinit()\n\t{\n\t\tsuper.init();\n\n\t\tthis.renderStages();\n\t}\n\n\trenderStages()\n\t{\n\t\tthis.stages.forEach((stage) =>\n\t\t{\n\t\t\tif(stage.isFirst() && this.firstStageContainer)\n\t\t\t{\n\t\t\t\tDom.append(stage.render(), this.firstStageContainer);\n\t\t\t}\n\t\t\telse if(stage.isSuccess() && this.successStageContainer)\n\t\t\t{\n\t\t\t\tDom.append(stage.render(), this.successStageContainer);\n\t\t\t}\n\t\t\telse if(stage.isFail() && this.failStageContainer)\n\t\t\t{\n\t\t\t\tDom.append(stage.render(), this.failStageContainer);\n\t\t\t}\n\t\t\telse if(this.commonStagesContainer)\n\t\t\t{\n\t\t\t\tDom.append(stage.render(), this.commonStagesContainer);\n\t\t\t}\n\t\t});\n\t}\n\n\tbindEvents()\n\t{\n\t\tsuper.bindEvents();\n\n\t\tif(this.addCommonStageButton && this.commonStagesContainer)\n\t\t{\n\t\t\tEvent.bind(this.addCommonStageButton, 'click', () =>\n\t\t\t{\n\t\t\t\tvar data = {\n\t\t\t\t\tname: Loc.getMessage('RPA_STAGES_NEW_STAGE_NAME'),\n\t\t\t\t\tcolor: this.constructor.defaultCommonStageColor,\n\t\t\t\t};\n\t\t\t\tvar stage = this.createStage(data);\n\t\t\t\tif(stage)\n\t\t\t\t{\n\t\t\t\t\tthis.addStage(stage);\n\t\t\t\t\tDom.append(stage.render(), this.commonStagesContainer);\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\n\t\tif(this.addFailStageButton && this.failStageContainer)\n\t\t{\n\t\t\tEvent.bind(this.addFailStageButton, 'click', () =>\n\t\t\t{\n\t\t\t\tvar data = {\n\t\t\t\t\tname: Loc.getMessage('RPA_STAGES_NEW_STAGE_NAME'),\n\t\t\t\t\tcolor: this.constructor.defaultFailStageColor,\n\t\t\t\t\tsemantic: 'FAIL',\n\t\t\t\t};\n\t\t\t\tvar stage = this.createStage(data);\n\t\t\t\tif(stage)\n\t\t\t\t{\n\t\t\t\t\tthis.addStage(stage);\n\t\t\t\t\tDom.append(stage.render(), this.failStageContainer);\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t}\n\n\tcreateStage(data): ?Stage\n\t{\n\t\tlet stage = null;\n\t\tif(\n\t\t\tType.isPlainObject(data) &&\n\t\t\tType.isString(data.name)\n\t\t)\n\t\t{\n\t\t\tdata.typeId = this.typeId;\n\t\t\tstage = new Stage(data);\n\t\t\tstage.setComponent(this);\n\t\t}\n\n\t\treturn stage;\n\t}\n\n\taddStage(stage: Stage): StagesComponent\n\t{\n\t\tif(stage instanceof Stage)\n\t\t{\n\t\t\tthis.stages.add(stage);\n\t\t}\n\t}\n\n\tremoveStage(stage: Stage): StagesComponent\n\t{\n\t\tthis.stages.delete(stage);\n\t\treturn this;\n\t}\n\n\tonMoveStage(movedStage: Stage)\n\t{\n\t\tconst groupContainer = movedStage.getContainer().parentElement;\n\t\tif(!groupContainer)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tconst groupStages = new Set();\n\t\tthis.stages.forEach((stage: Stage) =>\n\t\t{\n\t\t\tif((stage.isFail() && movedStage.isFail()) || (!stage.isFinal() && !movedStage.isFinal() && !stage.isFirst() && !movedStage.isFirst()))\n\t\t\t{\n\t\t\t\tgroupStages.add(stage);\n\t\t\t\tthis.removeStage(stage);\n\t\t\t}\n\t\t});\n\t\tgroupContainer.childNodes.forEach((container) =>\n\t\t{\n\t\t\tconst stage = this.getStageByElement(container, groupStages);\n\t\t\tif(stage)\n\t\t\t{\n\t\t\t\tgroupStages.delete(stage);\n\t\t\t\tthis.stages.add(stage);\n\t\t\t}\n\t\t});\n\t}\n\n\tgetStageByElement(container: Element, stages: Set): ?Stage\n\t{\n\t\tlet result = null;\n\t\tstages.forEach((stage) =>\n\t\t{\n\t\t\tif(stage.getContainer() === container)\n\t\t\t{\n\t\t\t\tresult = stage;\n\t\t\t}\n\t\t});\n\n\t\treturn result;\n\t}\n\n\tprepareData()\n\t{\n\t\tconst data = {\n\t\t\tstages: [],\n\t\t\ttypeId: this.typeId,\n\t\t};\n\t\tlet sort = 1000;\n\t\tconst pushStage = function(stage: Stage, stages: Array, sort: number)\n\t\t{\n\t\t\tstages.push({\n\t\t\t\tid: stage.getId(),\n\t\t\t\tname: stage.getName(),\n\t\t\t\tcolor: stage.getColor(),\n\t\t\t\tsemantic: stage.getSemantic(),\n\t\t\t\ttypeId: stage.getTypeId(),\n\t\t\t\tsort: sort,\n\t\t\t});\n\t\t};\n\n\t\tthis.stages.forEach((stage) =>\n\t\t{\n\t\t\tif(stage.isFirst())\n\t\t\t{\n\t\t\t\tpushStage(stage, data.stages, sort);\n\t\t\t\tsort += 1000;\n\t\t\t}\n\t\t});\n\n\t\tthis.stages.forEach((stage) =>\n\t\t{\n\t\t\tif(!stage.isFirst() && !stage.isFinal())\n\t\t\t{\n\t\t\t\tpushStage(stage, data.stages, sort);\n\t\t\t\tsort += 1000;\n\t\t\t}\n\t\t});\n\n\t\tthis.stages.forEach((stage) =>\n\t\t{\n\t\t\tif(stage.isSuccess())\n\t\t\t{\n\t\t\t\tpushStage(stage, data.stages, sort);\n\t\t\t\tsort += 1000;\n\t\t\t}\n\t\t});\n\n\t\tthis.stages.forEach((stage) =>\n\t\t{\n\t\t\tif(stage.isFail())\n\t\t\t{\n\t\t\t\tpushStage(stage, data.stages, sort);\n\t\t\t\tsort += 1000;\n\t\t\t}\n\t\t});\n\n\t\treturn data;\n\t}\n\n\tafterSave(response)\n\t{\n\t\tsuper.afterSave(response);\n\n\t\tconst slider = this.getSlider();\n\t\tif(slider)\n\t\t{\n\t\t\tslider.close();\n\t\t}\n\t}\n\n\tshowErrors(errors)\n\t{\n\t\tsuper.showErrors(errors);\n\t\tthis.errorsContainer.parentNode.style.display = 'block';\n\t}\n\n\thideErrors()\n\t{\n\t\tsuper.hideErrors();\n\t\tthis.errorsContainer.parentNode.style.display = 'none';\n\t}\n}\n\nclass Stage\n{\n\tconstructor(data: {\n\t\tid: ?number,\n\t\tname: string,\n\t\tcolor: string,\n\t\tsort: number,\n\t\tsemantic: string,\n\t\tfirst: ?boolean,\n\t\ttypeId: number,\n\t})\n\t{\n\t\tthis.id = data.id;\n\t\tthis.name = data.name;\n\t\tthis.color = data.color;\n\t\tthis.sort = data.sort;\n\t\tthis.semantic = data.semantic;\n\t\tthis.first = data.first;\n\t\tthis.typeId = data.typeId;\n\t\tthis.initialData = data;\n\t\tthis.layout = {};\n\t}\n\n\tsetComponent(component: StagesComponent): Stage\n\t{\n\t\tthis.stagesComponent = component;\n\n\t\treturn this;\n\t}\n\n\tgetComponent(): ?StagesComponent\n\t{\n\t\treturn this.stagesComponent;\n\t}\n\n\tgetId(): number\n\t{\n\t\tif(this.id > 0)\n\t\t{\n\t\t\treturn this.id;\n\t\t}\n\n\t\treturn 0;\n\t}\n\n\tgetTypeId(): number\n\t{\n\t\treturn this.typeId;\n\t}\n\n\tgetName(): string\n\t{\n\t\tif(Type.isString(this.name))\n\t\t{\n\t\t\treturn this.name;\n\t\t}\n\n\t\treturn '';\n\t}\n\n\tgetColor(): string\n\t{\n\t\tif(Type.isString(this.color))\n\t\t{\n\t\t\treturn this.color;\n\t\t}\n\n\t\treturn '39A8EF';\n\t}\n\n\tsetName(name: string): Stage\n\t{\n\t\tthis.name = name;\n\t\treturn this;\n\t}\n\n\tsetColor(color: string): Stage\n\t{\n\t\tthis.color = color;\n\t\treturn this;\n\t}\n\n\tgetSemantic(): ?string\n\t{\n\t\tif(Type.isString(this.semantic))\n\t\t{\n\t\t\treturn this.semantic;\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tisFirst(): boolean\n\t{\n\t\treturn (this.first === true);\n\t}\n\n\tisFinal(): boolean\n\t{\n\t\treturn (this.isSuccess() || this.isFail());\n\t}\n\n\tisSuccess(): boolean\n\t{\n\t\treturn (this.semantic === 'SUCCESS');\n\t}\n\n\tisFail(): boolean\n\t{\n\t\treturn (this.semantic === 'FAIL');\n\t}\n\n\tgetContainer(): Element\n\t{\n\t\tif(!this.layout.container)\n\t\t{\n\t\t\tthis.layout.container = Tag.render`<div class=\"rpa-stage-phase\"></div>`;\n\t\t}\n\n\t\treturn this.layout.container;\n\t}\n\n\tgetInnerContainer(): Element\n\t{\n\t\tif(!this.layout.innerContainer)\n\t\t{\n\t\t\tthis.layout.innerContainer = Tag.render`<div class=\"rpa-stage-phase-inner\"></div>`;\n\t\t}\n\n\t\treturn this.layout.innerContainer;\n\t}\n\n\trender(): Element\n\t{\n\t\tconst innerContainer = this.getInnerContainer();\n\t\tconst container = this.getContainer();\n\t\tDom.clean(innerContainer);\n\n\t\tDom.append(this.renderPanel(), innerContainer);\n\t\tDom.append(this.renderIcon(), innerContainer);\n\t\tDom.append(this.renderTitle(), innerContainer);\n\t\tDom.append(innerContainer, container);\n\n\t\tif (!this.isFirst() && !this.isSuccess())\n\t\t{\n\t\t\tlet item = new DragDropItem({stage: this});\n\t\t\titem.init();\n\t\t}\n\n\t\tthis.adjustColors();\n\n\t\treturn container;\n\t}\n\n\trenderPanel(): Element\n\t{\n\t\tthis.layout.panel = Tag.render`<div class=\"rpa-stage-phase-panel\">\n\t\t\t<div title=\"${Loc.getMessage('RPA_STAGES_STAGE_PANEL_RELOAD')}\" class=\"rpa-stage-phase-panel-button rpa-stage-phase-panel-button-refresh\" onclick=\"${this.restoreInitialData.bind(this)}\"></div>\n\t\t\t${this.getColorButton()}\n\t\t\t${this.getDeleteButton() ? this.getDeleteButton() : ''}\n\t\t</div>`;\n\n\t\treturn this.layout.panel;\n\t}\n\n\tgetDeleteButton(): ?Element\n\t{\n\t\tif(!this.isSuccess() && !this.isFirst())\n\t\t{\n\t\t\tif(!this.layout.deleteButton)\n\t\t\t{\n\t\t\t\tthis.layout.deleteButton = Tag.render`<div title=\"${Loc.getMessage('RPA_COMMON_ACTION_DELETE')}\" class=\"rpa-stage-phase-panel-button rpa-stage-phase-panel-button-close\" onclick=\"${this.destroy.bind(this)}\"></div>`;\n\t\t\t}\n\t\t}\n\t\telse if(this.layout.deleteButton)\n\t\t{\n\t\t\tDom.remove(this.layout.deleteButton);\n\t\t\tthis.layout.deleteButton = null;\n\t\t}\n\n\t\treturn this.layout.deleteButton;\n\t}\n\n\tgetColorButton(): Element\n\t{\n\t\tif(!this.layout.colorButton)\n\t\t{\n\t\t\tthis.layout.colorButton = Tag.render`<div class=\"rpa-stage-phase-panel-button\" title=\"${Loc.getMessage('RPA_STAGES_STAGE_PANEL_COLOR')}\" onclick=\"${this.showColorPicker.bind(this)}\"></div>`;\n\t\t}\n\n\t\treturn this.layout.colorButton;\n\t}\n\n\trenderIcon(): Element\n\t{\n\t\tthis.layout.icon = Tag.render`<span class=\"rpa-stage-phase-icon\">\n\t\t\t<span class=\"${(this.isFirst() || this.isSuccess() ? 'rpa-stage-phase-icon-arrow' : 'rpa-stage-phase-icon-burger')}\"></span>\n\t\t</span>`;\n\n\t\treturn this.layout.icon;\n\t}\n\n\trenderTitle(): Element\n\t{\n\t\tthis.layout.title = Tag.render`<span class=\"rpa-stage-phase-title\">\n\t\t\t<span class=\"rpa-stage-phase-title-inner\">\n\t\t\t\t<span class=\"rpa-stage-phase-name\">${Text.encode(this.getName())}</span>\n\t\t\t\t<span class=\"rpa-stage-phase-icon-edit\" onclick=\"${this.switchToEditMode.bind(this)}\" title=\"${Loc.getMessage('RPA_STAGES_STAGE_CHANGE_TITLE')}\"></span>\n\t\t\t</span>\n\t\t\t<span class=\"rpa-stage-phase-title-form\">\n\t\t\t\t${this.getNameInput()}\n\t\t\t</span>\n\t\t</span>`;\n\n\t\treturn this.layout.title;\n\t}\n\n\tgetNameInput(): Element\n\t{\n\t\tif(!this.layout.nameInput)\n\t\t{\n\t\t\tthis.layout.nameInput = Tag.render`<input class=\"rpa-stage-phase-title-input\" value=\"${Text.encode(this.getName())}\" onblur=\"${this.switchToViewMode.bind(this)}\" />`;\n\t\t}\n\n\t\treturn this.layout.nameInput;\n\t}\n\n\tswitchToEditMode()\n\t{\n\t\tthis.getContainer().classList.add(\"rpa-stage-edit-mode\");\n\t\tthis.getNameInput().value = this.getName();\n\t\tthis.focusNameInput();\n\t}\n\n\tswitchToViewMode()\n\t{\n\t\tthis.name = this.getNameInput().value;\n\t\tthis.getContainer().classList.remove(\"rpa-stage-edit-mode\");\n\t\tthis.render();\n\t}\n\n\tfocusNameInput()\n\t{\n\t\tthis.getNameInput().focus();\n\t\tthis.getNameInput().selectionStart = this.getNameInput().value.length;\n\t}\n\n\tadjustColors()\n\t{\n\t\tconst backgroundColor = '#' + this.getColor();\n\t\tconst textColor = Manager.calculateTextColor(backgroundColor);\n\t\tthis.layout.innerContainer.style.backgroundColor = backgroundColor;\n\t\tthis.layout.innerContainer.style.color = textColor;\n\t}\n\n\tgetColorPicker()\n\t{\n\t\tif (this.colorPicker)\n\t\t{\n\t\t\treturn this.colorPicker;\n\t\t}\n\n\t\tthis.colorPicker = new BX.ColorPicker({\n\t\t\tbindElement: this.getColorButton(),\n\t\t\tonColorSelected: (color: string) =>\n\t\t\t{\n\t\t\t\tthis.setColor(color.substr(1));\n\t\t\t\tthis.adjustColors();\n\t\t\t},\n\t\t\t// popupOptions: {\n\t\t\t// \tevents: {\n\t\t\t// \t\tonPopupClose: this.focusTextBox.bind(this)\n\t\t\t// \t}\n\t\t\t// }\n\t\t});\n\n\t\treturn this.colorPicker;\n\t}\n\n\tshowColorPicker()\n\t{\n\t\tthis.getColorPicker().open();\n\t}\n\n\trestoreInitialData()\n\t{\n\t\tthis.name = this.initialData.name;\n\t\tthis.color = this.initialData.color;\n\n\t\tthis.render();\n\t}\n\n\tdestroy()\n\t{\n\t\tDom.remove(this.getContainer());\n\t\tif(this.getComponent())\n\t\t{\n\t\t\tthis.getComponent().removeStage(this);\n\t\t}\n\t}\n}\n\nclass DragDropItem\n{\n\tconstructor(options: {\n\t\tstage: Stage\n\t}) {\n\t\tthis.stage = options.stage;\n\t\tthis.itemContainer = this.stage.getContainer();\n\t\tthis.draggableItemContainer = null;\n\t\tthis.dragElement = null;\n\t}\n\n\tinit()\n\t{\n\t\tconst dragButton = this.itemContainer.querySelector('.rpa-stage-phase-icon');\n\n\t\tif(jsDD)\n\t\t{\n\t\t\tdragButton.onbxdragstart = this.onDragStart.bind(this);\n\t\t\tdragButton.onbxdrag = this.onDrag.bind(this);\n\t\t\tdragButton.onbxdragstop = this.onDragStop.bind(this);\n\n\t\t\tjsDD.registerObject(dragButton);\n\n\t\t\tthis.itemContainer.onbxdestdraghover = this.onDragEnter.bind(this);\n\t\t\tthis.itemContainer.onbxdestdraghout = this.onDragLeave.bind(this);\n\t\t\tthis.itemContainer.onbxdestdragfinish = this.onDragDrop.bind(this);\n\n\t\t\tjsDD.registerDest(this.itemContainer, 30);\n\t\t}\n\t}\n\n\tonDragStart()\n\t{\n\t\tDom.addClass(this.itemContainer, \"rpa-edit-robot-btn-item-disabled\");\n\n\t\tif (!this.dragElement)\n\t\t{\n\t\t\tthis.dragElement = this.itemContainer.cloneNode(true);\n\n\t\t\tthis.dragElement.style.position = \"absolute\";\n\t\t\tthis.dragElement.style.width = this.itemContainer.offsetWidth + \"px\";\n\t\t\tthis.dragElement.className = \"rpa-edit-robot-btn-item rpa-edit-robot-btn-item-drag\";\n\n\t\t\tDom.append(this.dragElement, document.body);\n\t\t}\n\t}\n\n\tonDrag(x, y)\n\t{\n\t\tif (this.dragElement)\n\t\t{\n\t\t\tthis.dragElement.style.left = x + \"px\";\n\t\t\tthis.dragElement.style.top = y + \"px\";\n\t\t}\n\t}\n\n\tonDragStop()\n\t{\n\t\tDom.removeClass(this.itemContainer, \"rpa-edit-robot-btn-item-disabled\");\n\t\tDom.remove(this.dragElement);\n\t\tthis.dragElement = null;\n\t}\n\n\tonDragEnter(draggableItem)\n\t{\n\t\tthis.draggableItemContainer = draggableItem.closest('.rpa-stage-phase');\n\t\tif (this.draggableItemContainer !== this.itemContainer)\n\t\t{\n\t\t\tthis.showDragTarget();\n\t\t}\n\t}\n\n\tonDragLeave()\n\t{\n\t\tthis.hideDragTarget();\n\t}\n\n\tonDragDrop()\n\t{\n\t\tif (this.draggableItemContainer !== this.itemContainer)\n\t\t{\n\t\t\tthis.hideDragTarget();\n\t\t\tDom.remove(this.draggableItemContainer);\n\t\t\tDom.insertBefore(this.draggableItemContainer, this.itemContainer);\n\t\t\tthis.stage.getComponent().onMoveStage(this.stage);\n\t\t}\n\t}\n\n\tshowDragTarget()\n\t{\n\t\tDom.addClass(this.getDragTarget(), 'rpa-edit-robot-btn-item-drag-target-shown');\n\t\tthis.getDragTarget().style.height = this.itemContainer.offsetHeight + \"px\";\n\t}\n\n\thideDragTarget()\n\t{\n\t\tDom.removeClass(this.getDragTarget(), \"rpa-edit-robot-btn-item-drag-target-shown\");\n\t\tthis.getDragTarget().style.height = 0;\n\t}\n\n\tgetDragTarget()\n\t{\n\t\tif (!this.dragTarget)\n\t\t{\n\t\t\tthis.dragTarget = Tag.render`<div class=\"rpa-edit-robot-btn-item-drag-target\"></div>`;\n\t\t\tDom.prepend(this.dragTarget, this.itemContainer);\n\t\t}\n\n\t\treturn this.dragTarget;\n\t}\n}\n\nclass DragDropItemContainer\n{\n\tconstructor(options) {\n\t\tthis.container = options;\n\t\tthis.items = [];\n\t\tthis.height = null;\n\t}\n\n\tinit()\n\t{\n\t\tif(jsDD)\n\t\t{\n\t\t\tthis.container.onbxdestdraghover = BX.delegate(this.onDragEnter, this);\n\t\t\tthis.container.onbxdestdraghout = BX.delegate(this.onDragLeave, this);\n\t\t\tthis.container.onbxdestdragfinish = BX.delegate(this.onDragDrop, this);\n\n\t\t\tjsDD.registerDest(this.container, 40);\n\t\t}\n\t}\n\n\tonDragEnter(draggableItem)\n\t{\n\t\tthis.draggableItemContainer = draggableItem.closest('.rpa-stage-phase');\n\t\tthis.height = this.draggableItemContainer.offsetHeight;\n\n\t\tthis.showDragTarget();\n\t}\n\n\tonDragLeave()\n\t{\n\t\tthis.hideDragTarget();\n\t}\n\n\tonDragDrop()\n\t{\n\t\tthis.hideDragTarget();\n\t\tDom.remove(this.draggableItemContainer);\n\t\tDom.insertBefore(this.draggableItemContainer, this.dragTarget);\n\t}\n\n\tshowDragTarget()\n\t{\n\t\tDom.addClass(this.container, 'rpa-edit-robot-btn-list-target-shown');\n\t\tthis.getDragTarget().style.height = this.height + \"px\";\n\t}\n\n\thideDragTarget()\n\t{\n\t\tDom.removeClass(this.container, \"rpa-edit-robot-btn-list-target-shown\");\n\t\tthis.getDragTarget().style.height = 0;\n\t}\n\n\tgetDragTarget()\n\t{\n\t\tif (!this.dragTarget)\n\t\t{\n\t\t\tthis.dragTarget = Tag.render`<div class=\"rpa-edit-robot-btn-list-target-target\"></div>`;\n\t\t\tDom.append(this.dragTarget, this.container);\n\t\t}\n\n\t\treturn this.dragTarget;\n\t}\n}\n\nnamespace.DragDropItem = DragDropItem;\nnamespace.DragDropItemContainer = DragDropItemContainer;\nnamespace.StagesComponent = StagesComponent;\n"],"names":["namespace","Reflection","StagesComponent","args","stages","Set","Type","isArray","params","forEach","data","size","first","stage","createStage","addStage","typeId","firstStageContainer","form","querySelector","commonStagesContainer","successStageContainer","failStageContainer","addCommonStageButton","addFailStageButton","renderStages","isFirst","Dom","append","render","isSuccess","isFail","Event","bind","name","Loc","getMessage","color","constructor","defaultCommonStageColor","defaultFailStageColor","semantic","isPlainObject","isString","Stage","setComponent","add","delete","movedStage","groupContainer","getContainer","parentElement","groupStages","isFinal","removeStage","childNodes","container","getStageByElement","result","sort","pushStage","push","id","getId","getName","getColor","getSemantic","getTypeId","response","slider","getSlider","close","errors","errorsContainer","parentNode","style","display","Component","initialData","layout","component","stagesComponent","Tag","innerContainer","getInnerContainer","clean","renderPanel","renderIcon","renderTitle","item","DragDropItem","init","adjustColors","panel","restoreInitialData","getColorButton","getDeleteButton","deleteButton","destroy","remove","colorButton","showColorPicker","icon","title","Text","encode","switchToEditMode","getNameInput","nameInput","switchToViewMode","classList","value","focusNameInput","focus","selectionStart","length","backgroundColor","textColor","Manager","calculateTextColor","colorPicker","BX","ColorPicker","bindElement","onColorSelected","setColor","substr","getColorPicker","open","getComponent","options","itemContainer","draggableItemContainer","dragElement","dragButton","jsDD","onbxdragstart","onDragStart","onbxdrag","onDrag","onbxdragstop","onDragStop","registerObject","onbxdestdraghover","onDragEnter","onbxdestdraghout","onDragLeave","onbxdestdragfinish","onDragDrop","registerDest","addClass","cloneNode","position","width","offsetWidth","className","document","body","x","y","left","top","removeClass","draggableItem","closest","showDragTarget","hideDragTarget","insertBefore","onMoveStage","getDragTarget","height","offsetHeight","dragTarget","prepend","DragDropItemContainer","items","delegate"],"mappings":"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"}