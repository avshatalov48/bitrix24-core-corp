(function(e,t,r,i,o){"use strict";var s=t.Reflection.namespace("BX.Rpa");var a=function(e){babelHelpers.inherits(r,e);function r(){babelHelpers.classCallCheck(this,r);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(r).apply(this,arguments))}babelHelpers.createClass(r,[{key:"setFieldsController",value:function e(t){if(t instanceof i.FieldsController){this.fieldsController=t}return this}},{key:"init",value:function e(){babelHelpers.get(babelHelpers.getPrototypeOf(r.prototype),"init",this).call(this);if(t.Type.isPlainObject(this.params.type)){this.addDataToSlider("type",this.params.type)}}},{key:"prepareData",value:function e(){var i={fields:{}};var o=Array.from(this.form.querySelectorAll('[data-type="field"]'));o.forEach(function(e){if(e.name==="id"){if(t.Text.toInteger(e.value)>0){i.id=e.value}}else{i.fields[e.name]=e.value}});i.fields.permissions=this.getPermissions();i.fields.settings=this.getSettings();var s=r.getSelectedIcon();if(s){i.fields.image=s.dataset.icon}return i}},{key:"getSettings",value:function e(){var t={scenarios:[]};var r=Array.from(this.form.querySelectorAll('[data-type="scenario"]'));r.forEach(function(e){if(e.checked){t.scenarios.push(e.value)}});return t}},{key:"getPermissionSelectors",value:function e(){return[{action:"ITEMS_CREATE",selector:'[data-role="permission-setting-items_create"]'},{action:"MODIFY",selector:'[data-role="permission-setting-modify"]'},{action:"VIEW",selector:'[data-role="permission-setting-view"]'}]}},{key:"afterSave",value:function e(i){var o=this;babelHelpers.get(babelHelpers.getPrototypeOf(r.prototype),"afterSave",this).call(this,i);var s=function e(){if(!o.getSlider()){Manager.Instance.openKanban(i.type.id)}else{var t=o.getSlider();if(t){t.close()}}};if(this.fieldsController){var a=[];this.fieldsController.getFields().forEach(function(e){a.push(e.getName())});t.ajax.runAction("rpa.fields.setVisibilitySettings",{data:{typeId:this.params.type.typeId,fields:a,visibility:"create"}}).then(s).catch(s)}else{s()}}},{key:"showErrors",value:function e(t){babelHelpers.get(babelHelpers.getPrototypeOf(r.prototype),"showErrors",this).call(this,t);this.errorsContainer.parentNode.style.display="block"}},{key:"hideErrors",value:function e(){babelHelpers.get(babelHelpers.getPrototypeOf(r.prototype),"hideErrors",this).call(this);this.errorsContainer.parentNode.style.display="none"}}],[{key:"getIconsNode",value:function e(){return document.querySelector('[data-role="icon-selector"]')}},{key:"getIcons",value:function e(){var t=r.getIconsNode();if(!t){return null}var i=t.querySelectorAll(".rpa-automation-options-item");if(i.length>0){return Array.from(i)}return null}},{key:"onIconClick",value:function e(t){var i=r.getIcons();if(!i){return}i.forEach(function(e){e.classList.remove("rpa-automation-options-item-selected")});t.classList.add("rpa-automation-options-item-selected")}},{key:"getSelectedIcon",value:function e(){var t=r.getIconsNode();if(!t){return null}return t.querySelector(".rpa-automation-options-item-selected")}}]);return r}(r.Component);s.TypeComponent=a})(this.window=this.window||{},BX,BX.Rpa,BX.Rpa,BX.UI.UserFieldFactory);
//# sourceMappingURL=script.map.js