this.BX=this.BX||{};(function(e,t,n){"use strict";function i(){var e=babelHelpers.taggedTemplateLiteral(['<div \n\t\t\t\t\tclass="rpa-stageflow-stage" \n\t\t\t\t\tdata-stage-id="','" \n\t\t\t\t\tonmouseenter="','" \n\t\t\t\t\tonmouseleave="','"\n\t\t\t\t\tonclick="','"\n\t\t\t\t>\n\t\t\t\t<div class="rpa-stageflow-stage-item">\n\t\t\t\t\t',"\n\t\t\t\t</div>\n\t\t\t</div>"]);i=function t(){return e};return e}function r(){var e=babelHelpers.taggedTemplateLiteral(['<div style="border-image: ',';" class="rpa-stageflow-stage-item-text">',"</div>"]);r=function t(){return e};return e}var a=function(){function e(t){var n=t.id,i=t.name,r=t.color,a=t.backgroundColor,o=t.isFilled,s=t.events;babelHelpers.classCallCheck(this,e);babelHelpers.defineProperty(this,"backgroundImage","url(data:image/svg+xml;charset=US-ASCII,%3Csvg%20width%3D%2216px%22%20height%3D%2232px%22%20viewBox%3D%220%200%2016%2032%22%20version%3D%221.1%22%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%3E%3Cdefs%3E%3Cpath%20d%3D%22M0%2C2.99610022%20C0%2C1.34139976%201.3355407%2C0%202.99805158%2C0%20L6.90478569%2C0%20C8.56056385%2C0%2010.3661199%2C1.25756457%2010.9371378%2C2.80757311%20L16%2C16.5505376%20L11.0069874%2C29.2022189%20C10.3971821%2C30.7473907%208.56729657%2C32%206.90478569%2C32%20L2.99805158%2C32%20C1.34227341%2C32%200%2C30.6657405%200%2C29.0038998%20L0%2C2.99610022%20Z%22%20id%3D%22Bg%22/%3E%3C/defs%3E%3Cg%20id%3D%22Bar%22%20stroke%3D%22none%22%20fill-rule%3D%22evenodd%22%3E%3Cmask%20fill%3D%22white%22%20id%3D%22mask%22%3E%3Cuse%20xlink%3Ahref%3D%22%23Bg%22/%3E%3C/mask%3E%3Cuse%20fill%3D%22#COLOR2#%22%20xlink%3Ahref%3D%22%23Bg%22/%3E%3Cpolygon%20id%3D%22Ln%22%20fill%3D%22#COLOR1#%22%20mask%3D%22url%28%23mask%29%22%20points%3D%220%2030%2016%2030%2016%2032%200%2032%22/%3E%3C/g%3E%3C/svg%3E) 3 10 3 3 fill repeat");this.id=n;this.name=i;this.color=r;this.backgroundColor=a;this.isFilled=o;this.events=s}babelHelpers.createClass(e,[{key:"getId",value:function e(){return this.id}},{key:"getName",value:function e(){return this.name}},{key:"getColor",value:function e(){return this.color}},{key:"render",value:function e(){if(this.node){this.textNode.style.backgroundImage=this.getBackgroundImage()}else{this.textNode=t.Tag.render(r(),this.getBackgroundImage(),this.getName());this.node=t.Tag.render(i(),this.getId(),this.onMouseEnter.bind(this),this.onMouseLeave.bind(this),this.onClick.bind(this),this.textNode)}this.textNode.style.color=n.Manager.calculateTextColor("#"+this.color);return this.node}},{key:"getBackgroundImage",value:function e(){var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(!n){n=this.getColor()}if(t.Type.isNull(i)){i=this.isFilled}var r=this.backgroundImage.replace("#COLOR1#",encodeURIComponent("#"+n));if(i){r=r.replace("#COLOR2#",encodeURIComponent("#"+n))}else{r=r.replace("#COLOR2#",encodeURIComponent("#"+this.backgroundColor))}return r}},{key:"onMouseEnter",value:function e(){if(t.Type.isFunction(this.events.onMouseEnter)){this.events.onMouseEnter(this)}}},{key:"onMouseLeave",value:function e(){if(t.Type.isFunction(this.events.onMouseLeave)){this.events.onMouseLeave(this)}}},{key:"onClick",value:function e(){if(t.Type.isFunction(this.events.onClick)){this.events.onClick(this)}}},{key:"addBackLight",value:function e(t){if(this.textNode){this.textNode.style.borderImage=this.getBackgroundImage(t,true);this.textNode.style.color=n.Manager.calculateTextColor("#"+t)}}},{key:"removeBackLight",value:function e(){if(this.textNode){this.textNode.style.borderImage=this.getBackgroundImage();this.textNode.style.color=n.Manager.calculateTextColor("#"+this.color)}}}],[{key:"create",value:function n(i){if(t.Type.isPlainObject(i)&&i.id&&i.name&&i.color&&i.backgroundColor){i.id=t.Text.toInteger(i.id);i.name=i.name.toString();i.color=i.color.toString();i.backgroundColor=i.backgroundColor.toString();if(!t.Type.isPlainObject(i.events)){i.events={}}if(!t.Type.isBoolean(i.isFilled)){i.isFilled=false}if(i.id>0){return new e(i)}}return null}}]);return e}();function o(){var e=babelHelpers.taggedTemplateLiteral(['<div class="rpa-stageflow-container"></div>']);o=function t(){return e};return e}var s=function(){function e(n){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];babelHelpers.classCallCheck(this,e);babelHelpers.defineProperty(this,"currentStage",0);babelHelpers.defineProperty(this,"isActive",false);if(t.Type.isPlainObject(n)){if(t.Type.isString(n.backgroundColor)&&n.backgroundColor.length===6){this.backgroundColor=n.backgroundColor}if(n.currentStage){this.currentStage=t.Text.toInteger(n.currentStage)}if(t.Type.isBoolean(n.isActive)){this.isActive=n.isActive}if(t.Type.isFunction(n.onStageChange)){this.onStageChange=n.onStageChange}}if(t.Type.isArray(i)){this.fillStages(i)}if(!this.currentStage&&this.stages.length>0){this.currentStage=this.stages.keys().next().value}}babelHelpers.createClass(e,[{key:"setCurrentStageId",value:function e(n){var i=this;this.currentStage=t.Text.toInteger(n);var r=this.currentStage>0;this.stages.forEach(function(e){e.isFilled=r;if(!r){e.removeBackLight()}else{e.addBackLight(e.getColor())}if(r&&e.getId()===i.currentStage){r=false}e.render()});return this}},{key:"fillStages",value:function e(t){var n=this;var i=this.currentStage>0;this.stages=new Map;t.forEach(function(e){e.isFilled=i;e.backgroundColor=n.backgroundColor;e.events={onMouseEnter:n.onStageMouseHover.bind(n),onMouseLeave:n.onStageMouseLeave.bind(n),onClick:n.onStageClick.bind(n)};var t=a.create(e);if(t){n.stages.set(t.getId(),t)}if(i&&t.getId()===n.currentStage){i=false}})}},{key:"getStages",value:function e(){return this.stages}},{key:"getStageById",value:function e(t){return this.stages.get(t)}},{key:"render",value:function e(){var t=this.renderContainer();this.getStages().forEach(function(e){t.appendChild(e.render())});return t}},{key:"renderContainer",value:function e(){if(this.container){t.Dom.clean(this.container);return this.container}this.container=t.Tag.render(o());return this.container}},{key:"onStageMouseHover",value:function e(t){if(!this.isActive){return}var n=true;var i=false;var r=undefined;try{for(var a=this.stages[Symbol.iterator](),o;!(n=(o=a.next()).done);n=true){var s=babelHelpers.slicedToArray(o.value,2),l=s[0],u=s[1];u.addBackLight(t.getColor());if(l===t.getId()){break}}}catch(e){i=true;r=e}finally{try{if(!n&&a.return!=null){a.return()}}finally{if(i){throw r}}}}},{key:"onStageMouseLeave",value:function e(t){if(!this.isActive){return}var n=true;var i=false;var r=undefined;try{for(var a=this.stages[Symbol.iterator](),o;!(n=(o=a.next()).done);n=true){var s=babelHelpers.slicedToArray(o.value,2),l=s[0],u=s[1];u.removeBackLight();if(l===t.getId()){break}}}catch(e){i=true;r=e}finally{try{if(!n&&a.return!=null){a.return()}}finally{if(i){throw r}}}}},{key:"onStageClick",value:function e(n){if(!this.isActive){return}if(n.getId()!==this.currentStage&&t.Type.isFunction(this.onStageChange)){this.onStageChange(n)}}}]);return e}();var l={Chart:s,Stage:a};e.StageFlow=l})(this.BX.Rpa=this.BX.Rpa||{},BX,BX.Rpa);
//# sourceMappingURL=stageflow.bundle.map.js