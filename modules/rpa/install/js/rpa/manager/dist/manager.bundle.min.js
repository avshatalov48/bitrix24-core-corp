this.BX=this.BX||{};(function(e,t){"use strict";var i=null;var n=function(){function e(){babelHelpers.classCallCheck(this,e);babelHelpers.defineProperty(this,"urlTemplates",{})}babelHelpers.createClass(e,[{key:"setUrlTemplates",value:function e(i){if(t.Type.isPlainObject(i)){this.urlTemplates=i}return this}},{key:"openTasks",value:function t(i,n){var r=this;return new Promise(function(t){e.openSlider(r.getTasksUrl(i,n).toString(),{width:580,cacheable:false,allowChangeHistory:false}).then(function(e){var i=false;var n=null;if(e.isLoaded()){i=e.getData().get("isCompleted")||false;n=e.getData().get("item")||null}t({isCompleted:i,item:n})})})}},{key:"getTasksUrl",value:function e(i,n){var r=this.urlTemplates["bitrix:rpa.task"];if(r){return new t.Uri(r.replace("#typeId#",i).replace("#elementId#",n))}return null}},{key:"openKanban",value:function e(i){var n=this.urlTemplates["bitrix:rpa.kanban"];if(n){location.href=new t.Uri(n.replace("#typeId#",i)).toString();return true}return false}},{key:"openTypeDetail",value:function i(n,r){if(!t.Type.isPlainObject(r)){r={}}r.width=702;var l=this.urlTemplates["bitrix:rpa.type.detail"];if(l){return e.openSlider(l.replace("#id#",n),r)}return null}},{key:"getItemDetailUrl",value:function e(i){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var r=this.urlTemplates["bitrix:rpa.item.detail"];if(r){return new t.Uri(r.replace("#typeId#",i).replace("#id#",n))}return null}},{key:"openItemDetail",value:function t(i){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var l=this.getItemDetailUrl(i,n);if(l){return e.openSlider(l.toString(),r)}return null}},{key:"getStageListUrl",value:function e(i){var n=this.urlTemplates["bitrix:rpa.stage.list"];if(n){return new t.Uri(n.replace("#typeId#",i))}return null}},{key:"openStageList",value:function t(i){var n=this.getStageListUrl(i);if(n){return e.openSlider(n.toString())}return null}},{key:"getFieldsListUrl",value:function e(i){var n=this.urlTemplates["fieldsList"];if(n){return new t.Uri(n.replace("#typeId#",i))}return null}},{key:"openFieldsList",value:function t(i){var n=this.getFieldsListUrl(i);if(n){return e.openSlider(n.toString())}return null}},{key:"getFieldDetailUrl",value:function e(i,n){var r=this.urlTemplates["fieldDetail"];if(r){return new t.Uri(r.replace("#typeId#",i).replace("#fieldId#",n))}return null}},{key:"openFieldDetail",value:function t(i,n,r){var l=this.getFieldDetailUrl(i,n);if(l){return e.openSlider(l.toString(),r)}return null}},{key:"closeSettingsMenu",value:function e(i,n){if(n&&t.Type.isFunction(n.getMenuWindow)){var r=n.getMenuWindow();if(r){r.close();return}}var l=this;if(l&&t.Type.isFunction(l.close)){l.close()}}},{key:"showFeatureSlider",value:function t(i,n){e.Instance.closeSettingsMenu(i,n);BX.UI.InfoHelper.show("limit_robotic_process_automation")}}],[{key:"addEditor",value:function i(n,r,l){var a=t.Reflection.getClass("BX.UI.EntityEditor");if(!a){return}if(t.Type.isInteger(n)&&t.Type.isInteger(r)&&l instanceof BX.UI.EntityEditor){if(!e.editors[n]){e.editors[n]={}}e.editors[n][r]=l}}},{key:"getEditor",value:function i(n,r){if(t.Type.isInteger(n)&&t.Type.isInteger(r)&&e.editors[n]&&e.editors[n][r]){return e.editors[n][r]}return null}},{key:"openSlider",value:function e(i,n){if(!t.Type.isPlainObject(n)){n={}}n=babelHelpers.objectSpread({},{cacheable:false,allowChangeHistory:true,events:{}},n);return new Promise(function(e){if(t.Type.isString(i)&&i.length>1){n.events.onClose=function(t){e(t.getSlider())};BX.SidePanel.Instance.open(i,n)}else{e()}})}},{key:"calculateTextColor",value:function e(t){var i,n,r;if(t.length>7){var l=t.split("(")[1].split(")")[0];l=l.split(",");i=parseInt(l[0]);n=parseInt(l[1]);r=parseInt(l[2])}else{if(/^#([A-Fa-f0-9]{3}){1,2}$/.test(t)){var a=t.substring(1).split("");if(a.length===3){a=[a[0],a[0],a[1],a[1],a[2],a[2]]}a="0x"+a.join("");i=a>>16&255;n=a>>8&255;r=a&255}}var s=.21*i+.72*n+.07*r;return s<145?"#fff":"#333"}},{key:"Instance",get:function t(){if(window.top!==window){return window.top.BX.Rpa.Manager.Instance}if(i===null){i=new e}return i}}]);return e}();babelHelpers.defineProperty(n,"editors",{});e.Manager=n})(this.BX.Rpa=this.BX.Rpa||{},BX);
//# sourceMappingURL=manager.bundle.map.js