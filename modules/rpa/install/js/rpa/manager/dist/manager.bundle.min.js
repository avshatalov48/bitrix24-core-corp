this.BX=this.BX||{};(function(e,t){"use strict";function r(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function n(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){babelHelpers.defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var i=null;var l=function(){function e(){babelHelpers.classCallCheck(this,e);babelHelpers.defineProperty(this,"urlTemplates",{})}babelHelpers.createClass(e,[{key:"setUrlTemplates",value:function e(r){if(t.Type.isPlainObject(r)){this.urlTemplates=r}return this}},{key:"openTasks",value:function t(r,n){var i=this;return new Promise((function(t){e.openSlider(i.getTasksUrl(r,n).toString(),{width:580,cacheable:false,allowChangeHistory:false}).then((function(e){var r=false;var n=null;if(e.isLoaded()){r=e.getData().get("isCompleted")||false;n=e.getData().get("item")||null}t({isCompleted:r,item:n})}))}))}},{key:"getTasksUrl",value:function e(r,n){var i=this.urlTemplates["bitrix:rpa.task"];if(i){return new t.Uri(i.replace("#typeId#",r).replace("#elementId#",n))}return null}},{key:"openKanban",value:function e(r){var n=this.urlTemplates["bitrix:rpa.kanban"];if(n){location.href=new t.Uri(n.replace("#typeId#",r)).toString();return true}return false}},{key:"openTypeDetail",value:function r(n,i){if(!t.Type.isPlainObject(i)){i={}}i.width=702;var l=this.urlTemplates["bitrix:rpa.type.detail"];if(l){return e.openSlider(l.replace("#id#",n),i)}return null}},{key:"getItemDetailUrl",value:function e(r){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var i=this.urlTemplates["bitrix:rpa.item.detail"];if(i){return new t.Uri(i.replace("#typeId#",r).replace("#id#",n))}return null}},{key:"openItemDetail",value:function t(r){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var l=this.getItemDetailUrl(r,n);if(l){return e.openSlider(l.toString(),i)}return null}},{key:"getStageListUrl",value:function e(r){var n=this.urlTemplates["bitrix:rpa.stage.list"];if(n){return new t.Uri(n.replace("#typeId#",r))}return null}},{key:"openStageList",value:function t(r){var n=this.getStageListUrl(r);if(n){return e.openSlider(n.toString())}return null}},{key:"getFieldsListUrl",value:function e(r){var n=this.urlTemplates["fieldsList"];if(n){return new t.Uri(n.replace("#typeId#",r))}return null}},{key:"openFieldsList",value:function t(r){var n=this.getFieldsListUrl(r);if(n){return e.openSlider(n.toString())}return null}},{key:"getFieldDetailUrl",value:function e(r,n){var i=this.urlTemplates["fieldDetail"];if(i){return new t.Uri(i.replace("#typeId#",r).replace("#fieldId#",n))}return null}},{key:"openFieldDetail",value:function t(r,n,i){var l=this.getFieldDetailUrl(r,n);if(l){return e.openSlider(l.toString(),i)}return null}},{key:"closeSettingsMenu",value:function e(r,n){if(n&&t.Type.isFunction(n.getMenuWindow)){var i=n.getMenuWindow();if(i){i.close();return}}var l=this;if(l&&t.Type.isFunction(l.close)){l.close()}}},{key:"showFeatureSlider",value:function t(r,n){e.Instance.closeSettingsMenu(r,n);BX.UI.InfoHelper.show("limit_robotic_process_automation")}}],[{key:"addEditor",value:function r(n,i,l){var a=t.Reflection.getClass("BX.UI.EntityEditor");if(!a){return}if(t.Type.isInteger(n)&&t.Type.isInteger(i)&&l instanceof BX.UI.EntityEditor){if(!e.editors[n]){e.editors[n]={}}e.editors[n][i]=l}}},{key:"getEditor",value:function r(n,i){if(t.Type.isInteger(n)&&t.Type.isInteger(i)&&e.editors[n]&&e.editors[n][i]){return e.editors[n][i]}return null}},{key:"openSlider",value:function e(r,i){if(!t.Type.isPlainObject(i)){i={}}i=n(n({},{cacheable:false,allowChangeHistory:true,events:{}}),i);return new Promise((function(e){if(t.Type.isString(r)&&r.length>1){i.events.onClose=function(t){e(t.getSlider())};BX.SidePanel.Instance.open(r,i)}else{e()}}))}},{key:"calculateTextColor",value:function e(t){var r,n,i;if(t.length>7){var l=t.split("(")[1].split(")")[0];l=l.split(",");r=parseInt(l[0]);n=parseInt(l[1]);i=parseInt(l[2])}else{if(/^#([A-Fa-f0-9]{3}){1,2}$/.test(t)){var a=t.substring(1).split("");if(a.length===3){a=[a[0],a[0],a[1],a[1],a[2],a[2]]}a="0x"+a.join("");r=a>>16&255;n=a>>8&255;i=a&255}}var s=.21*r+.72*n+.07*i;return s<145?"#fff":"#333"}},{key:"Instance",get:function t(){if(window.top!==window){return window.top.BX.Rpa.Manager.Instance}if(i===null){i=new e}return i}}]);return e}();babelHelpers.defineProperty(l,"editors",{});e.Manager=l})(this.BX.Rpa=this.BX.Rpa||{},BX);
//# sourceMappingURL=manager.bundle.map.js