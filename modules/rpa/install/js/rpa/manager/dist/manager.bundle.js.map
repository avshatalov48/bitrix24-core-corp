{"version":3,"file":"manager.bundle.js","sources":["../src/manager.js"],"sourcesContent":["import {Reflection, Type, Uri} from 'main.core';\n\nimport 'ui.design-tokens';\nimport 'ui.fonts.opensans';\nimport 'sidepanel';\n\n\nlet instance = null;\n\nclass Manager\n{\n\turlTemplates = {};\n\n\tstatic editors = {};\n\n\tstatic get Instance(): Manager\n\t{\n\t\tif (window.top !== window)\n\t\t{\n\t\t\treturn window.top.BX.Rpa.Manager.Instance;\n\t\t}\n\n\t\tif(instance === null)\n\t\t{\n\t\t\tinstance = new Manager();\n\t\t}\n\n\t\treturn instance;\n\t}\n\n\tsetUrlTemplates(urlTemplates: Object): Manager\n\t{\n\t\tif(Type.isPlainObject(urlTemplates))\n\t\t{\n\t\t\tthis.urlTemplates = urlTemplates;\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tstatic addEditor(typeId: number, itemId: number, editor)\n\t{\n\t\tconst editorClass = Reflection.getClass('BX.UI.EntityEditor');\n\t\tif(!editorClass)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tif(Type.isInteger(typeId) && Type.isInteger(itemId) && editor instanceof BX.UI.EntityEditor)\n\t\t{\n\t\t\tif(!Manager.editors[typeId])\n\t\t\t{\n\t\t\t\tManager.editors[typeId] = {};\n\t\t\t}\n\t\t\tManager.editors[typeId][itemId] = editor;\n\t\t}\n\t}\n\n\t/**\n\t * @param typeId\n\t * @param itemId\n\t * @returns {null|BX.UI.EntityEditor}\n\t */\n\tstatic getEditor(typeId: number, itemId: number): ?Object\n\t{\n\t\tif(Type.isInteger(typeId) && Type.isInteger(itemId) && Manager.editors[typeId] && Manager.editors[typeId][itemId])\n\t\t{\n\t\t\treturn Manager.editors[typeId][itemId];\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tstatic openSlider(url, options): Promise<?BX.SidePanel.Slider>\n\t{\n\t\tif(!Type.isPlainObject(options))\n\t\t{\n\t\t\toptions = {};\n\t\t}\n\t\toptions = {...{cacheable: false, allowChangeHistory: true, events: {}}, ...options};\n\t\treturn new Promise((resolve) =>\n\t\t{\n\t\t\tif(Type.isString(url) && url.length > 1)\n\t\t\t{\n\t\t\t\toptions.events.onClose = function(event)\n\t\t\t\t{\n\t\t\t\t\tresolve(event.getSlider());\n\t\t\t\t};\n\t\t\t\tBX.SidePanel.Instance.open(url, options);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresolve();\n\t\t\t}\n\t\t});\n\t}\n\n\topenTasks(typeId: number, itemId: number): Promise<{isCompleted: boolean}>\n\t{\n\t\treturn new Promise((resolve) =>\n\t\t{\n\t\t\tManager.openSlider(\n\t\t\t\tthis.getTasksUrl(typeId, itemId).toString(),\n\t\t\t\t{width: 580, cacheable: false, allowChangeHistory: false}\n\t\t\t).then((slider) =>\n\t\t\t{\n\t\t\t\tlet isCompleted = false;\n\t\t\t\tlet item = null;\n\t\t\t\tif(slider.isLoaded())\n\t\t\t\t{\n\t\t\t\t\tisCompleted = slider.getData().get('isCompleted') || false;\n\t\t\t\t\titem = slider.getData().get('item') || null;\n\t\t\t\t}\n\n\t\t\t\tresolve({\n\t\t\t\t\tisCompleted,\n\t\t\t\t\titem,\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t}\n\n\tgetTasksUrl(typeId: number, itemId: number): ?Uri\n\t{\n\t\tconst template = this.urlTemplates['bitrix:rpa.task'];\n\t\tif(template)\n\t\t{\n\t\t\treturn new Uri(template.replace('#typeId#', typeId).replace('#elementId#', itemId));\n\t\t}\n\n\t\treturn null;\n\t}\n\n\topenKanban(typeId: number): boolean\n\t{\n\t\tconst template = this.urlTemplates['bitrix:rpa.kanban'];\n\t\tif(template)\n\t\t{\n\t\t\tlocation.href = (new Uri(template.replace('#typeId#', typeId))).toString();\n\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\topenTypeDetail(typeId: number, options: ?{}): ?Promise<?BX.SidePanel.Slider>\n\t{\n\t\tif(!Type.isPlainObject(options))\n\t\t{\n\t\t\toptions = {};\n\t\t}\n\t\toptions.width = 702;\n\t\tconst template = this.urlTemplates['bitrix:rpa.type.detail'];\n\t\tif(template)\n\t\t{\n\t\t\treturn Manager.openSlider(template.replace('#id#', typeId), options);\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tgetItemDetailUrl(typeId: number, itemId: number = 0): ?Uri\n\t{\n\t\tconst template = this.urlTemplates['bitrix:rpa.item.detail'];\n\t\tif(template)\n\t\t{\n\t\t\treturn new Uri(template.replace('#typeId#', typeId).replace('#id#', itemId));\n\t\t}\n\n\t\treturn null;\n\t}\n\n\topenItemDetail(typeId: number, itemId: number = 0, options: ?{} = {}): ?Promise<?BX.SidePanel.Slider>\n\t{\n\t\tconst uri = this.getItemDetailUrl(typeId, itemId);\n\t\tif(uri)\n\t\t{\n\t\t\treturn Manager.openSlider(uri.toString(), options);\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tgetStageListUrl(typeId: number): ?Uri\n\t{\n\t\tconst template = this.urlTemplates['bitrix:rpa.stage.list'];\n\t\tif(template)\n\t\t{\n\t\t\treturn new Uri(template.replace('#typeId#', typeId));\n\t\t}\n\n\t\treturn null;\n\t}\n\n\topenStageList(typeId: number): ?Promise<?BX.SidePanel.Slider>\n\t{\n\t\tconst url = this.getStageListUrl(typeId);\n\t\tif(url)\n\t\t{\n\t\t\treturn Manager.openSlider(url.toString());\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tgetFieldsListUrl(typeId: number): ?Uri\n\t{\n\t\tconst template = this.urlTemplates['fieldsList'];\n\t\tif(template)\n\t\t{\n\t\t\treturn new Uri(template.replace('#typeId#', typeId));\n\t\t}\n\n\t\treturn null;\n\t}\n\n\topenFieldsList(typeId: number): ?Promise<?BX.SidePanel.Slider>\n\t{\n\t\tconst url = this.getFieldsListUrl(typeId);\n\t\tif(url)\n\t\t{\n\t\t\treturn Manager.openSlider(url.toString());\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tgetFieldDetailUrl(typeId: number, fieldId: number): ?Uri\n\t{\n\t\tconst template = this.urlTemplates['fieldDetail'];\n\t\tif(template)\n\t\t{\n\t\t\treturn new Uri(template.replace('#typeId#', typeId).replace('#fieldId#', fieldId));\n\t\t}\n\n\t\treturn null;\n\t}\n\n\topenFieldDetail(typeId: number, fieldId: number, options: {}): ?Promise<?BX.SidePanel.Slider>\n\t{\n\t\tconst url = this.getFieldDetailUrl(typeId, fieldId);\n\t\tif(url)\n\t\t{\n\t\t\treturn Manager.openSlider(url.toString(), options);\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tstatic calculateTextColor(baseColor)\n\t{\n\t\tvar r, g, b;\n\t\tif ( baseColor.length > 7 )\n\t\t{\n\t\t\tvar hexComponent = baseColor.split(\"(\")[1].split(\")\")[0];\n\t\t\thexComponent = hexComponent.split(\",\");\n\t\t\tr = parseInt(hexComponent[0]);\n\t\t\tg = parseInt(hexComponent[1]);\n\t\t\tb = parseInt(hexComponent[2]);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif(/^#([A-Fa-f0-9]{3}){1,2}$/.test(baseColor))\n\t\t\t{\n\t\t\t\tvar c = baseColor.substring(1).split('');\n\t\t\t\tif(c.length === 3)\n\t\t\t\t{\n\t\t\t\t\tc= [c[0], c[0], c[1], c[1], c[2], c[2]];\n\t\t\t\t}\n\t\t\t\tc = '0x'+c.join('');\n\t\t\t\tr = ( c >> 16 ) & 255;\n\t\t\t\tg = ( c >> 8 ) & 255;\n\t\t\t\tb =  c & 255;\n\t\t\t}\n\t\t}\n\n\t\tvar y = 0.21 * r + 0.72 * g + 0.07 * b;\n\t\treturn ( y < 145 ) ? \"#fff\" : \"#333\";\n\t}\n\n\tcloseSettingsMenu(event, item)\n\t{\n\t\tif(item && Type.isFunction(item.getMenuWindow))\n\t\t{\n\t\t\tconst window = item.getMenuWindow();\n\t\t\tif(window)\n\t\t\t{\n\t\t\t\twindow.close();\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tconst menu = this;\n\t\tif(menu && Type.isFunction(menu.close))\n\t\t{\n\t\t\tmenu.close();\n\t\t}\n\t}\n\n\tshowFeatureSlider(event, item)\n\t{\n\t\tManager.Instance.closeSettingsMenu(event, item);\n\t\tBX.UI.InfoHelper.show('limit_robotic_process_automation');\n\t}\n}\n\nexport {\n\tManager\n};"],"names":["instance","Manager","urlTemplates","Type","isPlainObject","typeId","itemId","Promise","resolve","openSlider","getTasksUrl","toString","width","cacheable","allowChangeHistory","then","slider","isCompleted","item","isLoaded","getData","get","template","Uri","replace","location","href","options","uri","getItemDetailUrl","url","getStageListUrl","getFieldsListUrl","fieldId","getFieldDetailUrl","event","isFunction","getMenuWindow","window","close","menu","Instance","closeSettingsMenu","BX","UI","InfoHelper","show","editor","editorClass","Reflection","getClass","isInteger","EntityEditor","editors","events","isString","length","onClose","getSlider","SidePanel","open","baseColor","r","g","b","hexComponent","split","parseInt","test","c","substring","join","y","top","Rpa"],"mappings":"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"}