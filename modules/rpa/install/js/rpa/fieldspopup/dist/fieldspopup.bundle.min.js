this.BX=this.BX||{};(function(e,t,i){"use strict";var n;var s=function(){function e(i,n,s){var a=this;babelHelpers.classCallCheck(this,e);this.selectedFields=new Set;this.fields=new Map;if(t.Type.isString(i)){this.title=s;this.id=i;if(t.Type.isArray(n)){n.forEach((function(e){a.fields.set(e.name,e)}));this.save()}}}babelHelpers.createClass(e,[{key:"getPopup",value:function e(n){var s=i.PopupWindowManager.getPopupById(this.id);if(!s){s=new BX.PopupWindow(this.id,null,{titleBar:this.title,zIndex:200,className:"rpa-fields-popup",autoHide:false,closeByEsc:false,closeIcon:false,content:this.getContent(),width:500,overlay:true,lightShadow:false,buttons:this.getButtons(),cacheable:false})}if(t.Type.isFunction(n)){s.setButtons(this.getButtons(n))}return s}},{key:"getButtons",value:function e(n){var s=this;return[new i.PopupWindowButton({text:t.Loc.getMessage("RPA_POPUP_SAVE_BUTTON"),className:"ui-btn ui-btn-md ui-btn-primary",events:{click:function e(){s.save();if(t.Type.isFunction(n)){n(s.getSelectedFields())}s.getPopup().close()}}}),new i.PopupWindowButton({text:t.Loc.getMessage("RPA_POPUP_CANCEL_BUTTON"),className:"ui-btn ui-btn-md",events:{click:function e(){if(t.Type.isFunction(n)){n(false)}s.getPopup().close()}}})]}},{key:"getContent",value:function e(){var i=this;var s="";this.fields.forEach((function(e){s+=i.renderField(e)}));return t.Tag.render(n||(n=babelHelpers.taggedTemplateLiteral(['<div class="rpa-fields-popup-wrapper">\n\t\t\t\t\t\t\t<div class="rpa-fields-popup-inner">',"</div>\n\t\t\t\t\t\t</div>"])),s)}},{key:"renderField",value:function e(i){var n=i.title,s=i.name,a=i.checked;var l=a===true?'checked="checked"':"";return'\n\t\t<label class="ui-ctl ui-ctl-checkbox">\n\t\t\t<input data-role="field-checkbox" type="checkbox" class="ui-ctl-element" name="'.concat(t.Text.encode(s),'" value="y" ').concat(l,'>\n\t\t\t<div class="ui-ctl-label-text">').concat(t.Text.encode(n),"</div>\n\t\t</label>")}},{key:"show",value:function e(){var t=this;return new Promise((function(e){t.getPopup(e).show()}))}},{key:"getSelectedFields",value:function e(){return this.selectedFields}},{key:"save",value:function e(){var t=this;this.selectedFields.clear();var i=this.getPopup().getContentContainer();if(i){var n=Array.from(i.querySelectorAll('[data-role="field-checkbox"]'));n.forEach((function(e){if(e.checked){t.selectedFields.add(e.name)}}))}}},{key:"close",value:function e(){this.getPopup().close()}}]);return e}();e.FieldsPopup=s})(this.BX.Rpa=this.BX.Rpa||{},BX,BX.Main);
//# sourceMappingURL=fieldspopup.bundle.map.js