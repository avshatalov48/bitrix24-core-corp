this.BX=this.BX||{};(function(e,t,i){"use strict";var r=function(){function e(i,r){babelHelpers.classCallCheck(this,e);babelHelpers.defineProperty(this,"analyticsLabel","");this.params=r;this.form=i;this.saveButton=document.getElementById("ui-button-panel-save");this.cancelButton=document.getElementById("ui-button-panel-cancel");this.deleteButton=document.getElementById("ui-button-panel-remove");if(t.Type.isString(r.analyticsLabel)){this.analyticsLabel=r.analyticsLabel}if(t.Type.isString(r.method)){this.method=r.method}if(t.Type.isDomNode(r.errorsContainer)){this.errorsContainer=r.errorsContainer}}babelHelpers.createClass(e,[{key:"init",value:function e(){this.bindEvents()}},{key:"bindEvents",value:function e(){var i=this;t.Event.bind(this.saveButton,"click",(function(e){i.save(e)}),{passive:false});if(this.deleteButton){t.Event.bind(this.deleteButton,"click",(function(e){i["delete"](e)}))}}},{key:"getLoader",value:function e(){if(!this.loader){this.loader=new i.Loader({size:150})}return this.loader}},{key:"startProgress",value:function e(){this.isProgress=true;if(!this.getLoader().isShown()){this.getLoader().show(this.form)}this.hideErrors()}},{key:"stopProgress",value:function e(){var i=this;this.isProgress=false;this.getLoader().hide();setTimeout((function(){t.Dom.removeClass(i.saveButton,"ui-btn-wait");t.Dom.removeClass(i.closeButton,"ui-btn-wait");if(i.deleteButton){t.Dom.removeClass(i.deleteButton,"ui-btn-wait")}}),200)}},{key:"prepareData",value:function e(){}},{key:"save",value:function e(i){var r=this;i.preventDefault();if(!this.form){return}if(this.isProgress){return}if(!this.method){return}this.startProgress();var s=this.prepareData();t.ajax.runAction(this.method,{analyticsLabel:this.analyticsLabel,data:s}).then((function(e){r.afterSave(e);r.stopProgress()}))["catch"]((function(e){r.showErrors(e.errors);r.stopProgress()}))}},{key:"afterSave",value:function e(t){this.addDataToSlider("response",t)}},{key:"getSlider",value:function e(){if(t.Reflection.getClass("BX.SidePanel")){return BX.SidePanel.Instance.getSliderByWindow(window)}return null}},{key:"addDataToSlider",value:function e(i,r){if(t.Type.isString(i)&&t.Type.isPlainObject(r)){var s=this.getSlider();if(s){s.data.set(i,r)}}}},{key:"showErrors",value:function e(i){var r="";i.forEach((function(e){var t=e.message;r+=t}));if(t.Type.isDomNode(this.errorsContainer)){this.errorsContainer.innerText=r}else{console.error(r)}}},{key:"hideErrors",value:function e(){if(t.Type.isDomNode(this.errorsContainer)){this.errorsContainer.innerText=""}}},{key:"delete",value:function e(t){t.preventDefault()}},{key:"getPermissionSelectors",value:function e(){return[]}},{key:"getPermissions",value:function e(){var t=this;var i=[];this.getPermissionSelectors().forEach((function(e){var r=t.form.querySelector(e.selector);if(r){i=[].concat(babelHelpers.toConsumableArray(i),babelHelpers.toConsumableArray(t.getPermission(r,e.action)))}}));if(i.length<=0){i=false}return i}},{key:"getPermission",value:function e(i,r){var s=[];var n=Array.from(i.querySelectorAll('input[type="hidden"]'));var a=i.querySelector("select");n.forEach((function(e){if(e.value&&t.Type.isString(e.value)&&e.value.length>0){s.push({accessCode:e.value,permission:a.value,action:r})}}));return s}}]);return e}();e.Component=r})(this.BX.Rpa=this.BX.Rpa||{},BX,BX);
//# sourceMappingURL=component.bundle.map.js