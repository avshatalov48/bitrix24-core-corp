(function(){if(BX.MSL)return;BX.MobileSonetLog=function(){};BX.MobileSonetLog.prototype.DBCheck=function(e){if(app.db!=undefined){app.db.createTable({tableName:"b_default",fields:[{name:"KEY",unique:true},"VALUE"],success:function(t){e.success()},fail:function(t){e.fail()}})}else return false};BX.MobileSonetLog.prototype.DBDelete=function(e){if(parseInt(e)<=0){e=false}if(app.db!=undefined){var t=false;this.DBCheck({success:function(){app.db.deleteRows({tableName:"b_default",filter:{KEY:"post_unsent"+(e?"_"+e:"")},success:function(e){},fail:function(e){}})},fail:function(){}})}else return false};BX.MobileSonetLog.prototype.DBSave=function(e,t){if(parseInt(t)<=0){t=false}for(x in e){if(x==="sessid"){delete e[x];break}}if(app.db!=undefined){this.DBCheck({success:function(){app.db.getRows({tableName:"b_default",filter:{KEY:"post_unsent"+(t?"_"+t:"")},success:function(n){text=JSON.stringify(e);if(n.items.length>0){app.db.updateRows({tableName:"b_default",updateFields:{VALUE:text},filter:{KEY:"post_unsent"+(t?"_"+t:"")},success:function(e){},fail:function(e){}})}else{app.db.addRow({tableName:"b_default",insertFields:{KEY:"post_unsent"+(t?"_"+t:""),VALUE:text},success:function(e){},fail:function(e){}})}},fail:function(e){}})},fail:function(){}})}else return false};BX.MobileSonetLog.prototype.DBLoad=function(e,t){if(parseInt(t)<=0){t=false}if(app.db!=undefined){this.DBCheck({success:function(){app.db.getRows({tableName:"b_default",filter:{KEY:"post_unsent"+(t?"_"+t:"")},success:function(t){if(t.items.length>0&&t.items[0].VALUE.length>0){var n=JSON.parse(t.items[0].VALUE);if(typeof n=="object")e.onLoad(n);else e.onEmpty()}else e.onEmpty()},fail:function(t){e.onEmpty()}})},fail:function(){e.onEmpty()}})}else{e.onEmpty();return null}};BX.MobileSonetLog.prototype.viewImageBind=function(e,t){if(app.enableInVersion(6)){e=BX(e);if(!!e){BX.bindDelegate(e,"click",t,function(n){var i=BX.findChildren(e,t,true),o=[],a=false,f=false;var s=[];for(var l=0;l<i.length;l++){a=i[l].getAttribute("data-bx-image");if(!BX.util.in_array(a,o)){f=i[l].getAttribute("data-bx-preview");o[o.length]=i[l].getAttribute("data-bx-image");s[s.length]={url:a,preview:typeof f!="undefined"&&f!==null&&f.length>0?f:"",description:""}}}var u={photos:s};if(this.tagName.toUpperCase()=="IMG"){a=this.getAttribute("data-bx-image");if(typeof a!="undefined"&&a.length>0){u.default_photo=a}f=this.getAttribute("data-bx-preview");if(typeof f!="undefined"&&f!==null&&f.length>0){u.default_preview=f}}BXMobileApp.UI.Photo.show(u);return BX.PreventDefault(n)})}}};BX.MSL=new BX.MobileSonetLog;window.BX.MSL=BX.MSL})();
//# sourceMappingURL=log_mobile.map.js