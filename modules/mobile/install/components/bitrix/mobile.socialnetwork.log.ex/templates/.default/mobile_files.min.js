(function(){"use strict";var n=function n(e,r){return new Promise(function(n,t){window.resolveLocalFileSystemURL(e,function(e){return r(e,n,t)},function(n){return t(n)})})};BX.FileUtils={getFileEntry:function e(r){if(r.indexOf("file://")<0){r="file://"+r}return n(r,function(n,e,r){if(n.isFile){e(n)}else{r(new FileError(100))}})},getFile:function n(e){return new Promise(function(n,r){return BX.FileUtils.getFileEntry(e).then(function(e){return e.file(function(e){return n(e)})}).catch(function(n){return r(n)})})},readFile:function n(e,r){return new Promise(function(n,t){if(e instanceof File){var i=new FileReader;var u=r?r:"readAsText";i.onloadend=function(e){return n(i.result)};i.onerror=function(n){return t({"Error reading":i})};i[u](e)}else{t(new BX.FileError(102,"Parameter 'file' is not instance of 'File'"))}})},readFileEntry:function n(e,r){return new Promise(function(n,t){if(e instanceof FileEntry){e.file(function(e){BX.FileUtils.readFile(e,r).then(function(e){return n(e)}).catch(function(n){return t(n)})})}else{t(new BX.FileError(102,"Parameter 'file' is not instance of 'File'"))}})},readFileByPath:function n(e,r){return new Promise(function(n,t){BX.FileUtils.getFileEntry(e).then(function(e){return BX.FileUtils.readFileEntry(e,r).then(function(e){return n(e)}).catch(function(n){return t(n)})}).catch(function(n){return t(n)})})},readDir:function e(r){return n(r,function(n,e,r){n.createReader().readEntries(function(n){return e(n)},function(n){return r(n)})})},fileForReading:function n(e){return new Promise(function(n,r){BX.FileUtils.getFile(e).then(function(r){var t=new BX.File(r);t.originalPath=e;n(t)}).catch(function(n){return r(n)})})}}})();