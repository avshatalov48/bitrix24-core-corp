{"version":3,"file":"livefeed.bundle.js","sources":["../src/balloonnotifier.js","../src/nextpageloader.js","../src/notificationbar.js","../src/database.js","../src/publicationqueue.js","../src/post.js","../src/blogpost.js","../src/menu/postmenu.js","../src/menu/pagemenu.js","../src/postform.js","../src/postformold.js","../src/pinned.js","../src/rating.js","../src/important.js","../src/searchbar.js","../src/pagescroll.js","../src/followmanager.js","../src/comments.js","../src/page.js","../src/feed.js"],"sourcesContent":["import {Loc} from 'main.core';\nimport {Instance, PageInstance} from \"./feed\";\nimport {EventEmitter} from \"main.core.events\";\n\nclass BalloonNotifier\n{\n\tconstructor()\n\t{\n\t\tthis.initialized = false;\n\t\tthis.classes = {\n\t\t\tshow: 'lenta-notifier-shown'\n\t\t};\n\t\tthis.nodeIdList = {\n\t\t\tnotifier: 'lenta_notifier',\n\t\t\tnotifierCounter: 'lenta_notifier_cnt',\n\t\t\tnotifierCounterTitle: 'lenta_notifier_cnt_title',\n\t\t\trefreshNeeded: 'lenta_notifier_2',\n\t\t\trefreshError: 'lenta_refresh_error',\n\t\t\tnextPageError: 'lenta_nextpage_error',\n\t\t};\n\n\t\tthis.init();\n\t\tEventEmitter.subscribe('onFrameDataProcessed', () => {\n\t\t\tthis.init();\n\t\t});\n\t}\n\n\tinit()\n\t{\n\t\tconst notifierNode = this.getNotifierNode();\n\t\tif (\n\t\t\t!notifierNode\n\t\t\t|| this.initialized\n\t\t)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.initialized = true;\n\t\tthis.initEvents();\n\t}\n\n\tinitEvents()\n\t{\n\t\tconst notifierNode = this.getNotifierNode();\n\n\t\tnotifierNode.addEventListener('click', () => {\n\t\t\tPageInstance.refresh(true);\n\t\t\treturn false;\n\t\t});\n\n\t\tconst refreshNeededNode = this.getRefreshNeededNode();\n\t\tif (refreshNeededNode)\n\t\t{\n\t\t\trefreshNeededNode.addEventListener('click', () => {\n\t\t\t\tapp.exec('pullDownLoadingStart');\n\t\t\t\tPageInstance.refresh(true);\n\t\t\t\treturn false;\n\t\t\t})\n\t\t}\n\n\t\tconst refreshErrorNode = this.getRefreshErrorNode();\n\t\tif (refreshErrorNode)\n\t\t{\n\t\t\trefreshErrorNode.addEventListener('click', () => {\n\t\t\t\tPageInstance.requestError('refresh', false);\n\t\t\t})\n\t\t}\n\n\t\tconst nextPageErrorNode = this.getNextPageErrorNode();\n\t\tif (nextPageErrorNode)\n\t\t{\n\t\t\tnextPageErrorNode.addEventListener('click', () => {\n\t\t\t\tPageInstance.requestError('nextPage', false);\n\t\t\t})\n\t\t}\n\t}\n\n\tgetNotifierNode()\n\t{\n\t\treturn document.getElementById(this.nodeIdList.notifier);\n\t}\n\tgetNotifierCounterNode()\n\t{\n\t\treturn document.getElementById(this.nodeIdList.notifierCounter);\n\t}\n\tgetNotifierCounterTitleNode()\n\t{\n\t\treturn document.getElementById(this.nodeIdList.notifierCounterTitle);\n\t}\n\tgetRefreshNeededNode()\n\t{\n\t\treturn document.getElementById(this.nodeIdList.refreshNeeded);\n\t}\n\tgetRefreshErrorNode()\n\t{\n\t\treturn document.getElementById(this.nodeIdList.refreshError);\n\t}\n\tgetNextPageErrorNode()\n\t{\n\t\treturn document.getElementById(this.nodeIdList.nextPageError);\n\t}\n\n\tshowRefreshNeededNotifier()\n\t{\n\t\tconst refreshNeededBlock = this.getRefreshNeededNode();\n\t\tif (refreshNeededBlock)\n\t\t{\n\t\t\trefreshNeededBlock.classList.add(this.classes.show);\n\t\t}\n\t}\n\n\thideRefreshNeededNotifier()\n\t{\n\t\tconst refreshNeededNode = this.getRefreshNeededNode();\n\t\tif (refreshNeededNode)\n\t\t{\n\t\t\trefreshNeededNode.classList.remove(this.classes.show);\n\t\t}\n\t}\n\n\tshowNotifier(params)\n\t{\n\t\tlet cnt = parseInt(params.counterValue);\n\n\t\tconst\n\t\t\tcnt_cent = cnt % 100,\n\t\t\treminder = cnt % 10;\n\n\t\tlet suffix = '';\n\n\t\tif (\n\t\t\tcnt_cent >= 10\n\t\t\t&& cnt_cent < 15\n\t\t)\n\t\t{\n\t\t\tsuffix = 3;\n\t\t}\n\t\telse if (reminder == 0)\n\t\t{\n\t\t\tsuffix = 3;\n\t\t}\n\t\telse if (reminder == 1)\n\t\t{\n\t\t\tsuffix = 1;\n\t\t}\n\t\telse if (\n\t\t\treminder == 2\n\t\t\t|| reminder == 3\n\t\t\t|| reminder == 4\n\t\t)\n\t\t{\n\t\t\tsuffix = 2;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tsuffix = 3;\n\t\t}\n\n\t\tif (Instance.getRefreshNeeded())\n\t\t{\n\t\t\tthis.getNotifierCounterNode().innerHTML = (cnt ? cnt + '+' : '');\n\t\t\tthis.hideRefreshNeededNotifier();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.getNotifierCounterNode().innerHTML = cnt || '';\n\t\t}\n\n\t\tthis.getNotifierCounterTitleNode().innerHTML = Loc.getMessage('MOBILE_EXT_LIVEFEED_COUNTER_TITLE_' + suffix);\n\t\tthis.getNotifierNode().classList.add(this.classes.show);\n\t}\n\n\thideNotifier()\n\t{\n\t\tconst notifierNode = this.getNotifierNode();\n\t\tif (notifierNode)\n\t\t{\n\t\t\tnotifierNode.classList.remove(this.classes.show);\n\t\t}\n\t};\n}\n\nexport {\n\tBalloonNotifier\n}","import {PageInstance} from './feed';\nimport {EventEmitter} from \"main.core.events\";\n\nclass NextPageLoader\n{\n\tconstructor()\n\t{\n\t\tthis.initialized = false;\n\n\t\tthis.init();\n\t\tEventEmitter.subscribe('onFrameDataProcessed', () => {\n\t\t\tthis.init();\n\t\t});\n\t}\n\n\tinit()\n\t{\n\t\tconst buttonNode = this.getButtonNode();\n\n\t\tif (\n\t\t\t!buttonNode\n\t\t\t|| this.initialized\n\t\t)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.initialized = true;\n\t\tthis.initEvents();\n\t}\n\n\tinitEvents()\n\t{\n\t\tconst buttonNode = this.getButtonNode();\n\n\t\tbuttonNode.addEventListener('click', (e) => {\n\t\t\tPageInstance.refresh(true);\n\t\t\treturn false;\n\t\t});\n\t}\n\n\tgetButtonNode()\n\t{\n\t\treturn document.getElementById('next_page_refresh_needed_button');\n\t}\n\n\tstartWaiter()\n\t{\n\t\tconst button = this.getButtonNode();\n\t\tif (button)\n\t\t{\n\t\t\tbutton.classList.add('--loading');\n\t\t}\n\t}\n\n\tstopWaiter()\n\t{\n\t\tconst button = this.getButtonNode();\n\t\tif (button)\n\t\t{\n\t\t\tbutton.classList.remove('--loading');\n\t\t}\n\t}\n}\n\nexport {\n\tNextPageLoader,\n}","class NotificationBar\n{\n\tconstructor()\n\t{\n\t\tthis.repo = [];\n\t\tthis.color = {\n\t\t\tbackground: {\n\t\t\t\terror: '#affb0000',\n\t\t\t\tinfo: '#3a3735'\n\t\t\t},\n\t\t\ttext: {\n\t\t\t\terror: '#ffffff',\n\t\t\t\tinfo: '#ffffff'\n\t\t\t}\n\t\t}\n\t}\n\n\thideAll()\n\t{\n\t\tthis.repo = this.repo.filter(notifyBar => {\n\t\t\treturn notifyBar;\n\t\t});\n\t\tthis.repo.forEach(notifyBar => {\n\t\t\tnotifyBar.hide();\n\t\t});\n\t}\n\n\tshowError(params)\n\t{\n\t\tconst bar = new BXMobileApp.UI.NotificationBar({\n\t\t\t\tmessage: params.text ? params.text : '',\n\t\t\t\tcolor: this.color.background.error,\n\t\t\t\ttextColor: this.color.text.error,\n\t\t\t\tuseLoader: (params.useLoader ? !!params.useLoader : false),\n\t\t\t\tgroupId: (params.groupId ? params.groupId : ''),\n\t\t\t\talign: (params.textAlign ? params.textAlign : 'center'),\n\t\t\t\tautoHideTimeout: (params.autoHideTimeout ? params.autoHideTimeout : 30000),\n\t\t\t\thideOnTap: (params.hideOnTap ? !!params.hideOnTap : true),\n\t\t\t\tonTap: params.onTap ? params.onTap : () => {},\n\t\t\t}, (params.id ? params.id : parseInt(Math.random() * 100000)));\n\n\t\tthis.repo.push(bar);\n\t\tbar.show();\n\t}\n\n\tshowInfo(params)\n\t{\n\t\tconst bar = new BXMobileApp.UI.NotificationBar({\n\t\t\t\tmessage: params.text ? params.text : '',\n\t\t\t\tcolor: this.color.background.info,\n\t\t\t\ttextColor: this.color.text.info,\n\t\t\t\tuseLoader: (params.useLoader ? !!params.useLoader : false),\n\t\t\t\tgroupId: (params.groupId ? params.groupId : ''),\n\t\t\t\tmaxLines: (params.maxLines ? params.maxLines : false),\n\t\t\t\talign: (params.textAlign ? params.textAlign : 'center'),\n\t\t\t\tisGlobal: (params.isGlobal ? !!params.isGlobal : true),\n\t\t\t\tuseCloseButton: (params.useCloseButton ? !!params.useCloseButton : true),\n\t\t\t\tautoHideTimeout: (params.autoHideTimeout ? params.autoHideTimeout : 1000),\n\t\t\t\thideOnTap: (params.hideOnTap ? !!params.hideOnTap : true)\n\t\t\t}, (params.id ? params.id : parseInt(Math.random() * 100000)));\n\n\t\tthis.repo.push(bar);\n\t\tbar.show();\n\t}\n}\n\nexport {\n\tNotificationBar\n}","import {Type} from \"main.core\";\n\nclass Database\n{\n\tconstructor(params)\n\t{\n\t\tthis.tableName = null;\n\t\tthis.keyName = null;\n\n\t\tthis.setTableName(Type.isPlainObject(params) && Type.isStringFilled(params.tableName) ? params.tableName : 'livefeed');\n\t\tthis.setKeyName(Type.isPlainObject(params) && Type.isStringFilled(params.keyName) ? params.keyName : 'postUnsent');\n\n\t\tthis.init();\n\t}\n\n\tinit()\n\t{\n\t\tBXMobileApp.addCustomEvent('Livefeed.Database::clear', this.onClear.bind(this));\n\t}\n\n\tsetTableName(value)\n\t{\n\t\tthis.tableName = value;\n\t}\n\tgetTableName()\n\t{\n\t\treturn this.tableName;\n\t}\n\n\tsetKeyName(value)\n\t{\n\t\tthis.keyName = value;\n\t}\n\tgetKeyName()\n\t{\n\t\treturn this.keyName;\n\t}\n\n\tonClear(params)\n\t{\n\t\tthis.delete(params.groupId);\n\t}\n\n\tdelete(groupId)\n\t{\n\t\tif (parseInt(groupId) <= 0)\n\t\t{\n\t\t\tgroupId = false;\n\t\t}\n\n\t\tapp.exec('setStorageValue', {\n\t\t\tstorageId: this.getTableName(),\n\t\t\tkey: this.getKeyName() + (groupId ? '_' + groupId : ''),\n\t\t\tvalue: {},\n\t\t\tcallback: (res) => {\n\t\t\t}\n\t\t});\n\t}\n\n\tsave(data, groupId)\n\t{\n\t\tif (parseInt(groupId) <= 0)\n\t\t{\n\t\t\tgroupId = false;\n\t\t}\n\n\t\tfor (let x in data)\n\t\t{\n\t\t\tif (!data.hasOwnProperty(x))\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (x === 'sessid')\n\t\t\t{\n\t\t\t\tdelete data[x];\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tapp.exec('setStorageValue', {\n\t\t\tstorageId: this.getTableName(),\n\t\t\tkey: this.getKeyName() + (groupId ? '_' + groupId : ''),\n\t\t\tvalue: data,\n\t\t\tcallback: (res) => {\n\t\t\t}\n\t\t});\n\t}\n\n\tload(callback, groupId)\n\t{\n\t\tif (parseInt(groupId) <= 0)\n\t\t{\n\t\t\tgroupId = false;\n\t\t}\n\n\t\tapp.exec('getStorageValue', {\n\t\t\tstorageId: this.getTableName(),\n\t\t\tkey: this.getKeyName() + (groupId ? '_' + groupId : ''),\n\t\t\tcallback: (value) =>\n\t\t\t{\n\t\t\t\tvalue = (Type.isPlainObject(value) ? value : (Type.isStringFilled(value) ? JSON.parse(value) : {}));\n\t\t\t\tif (\n\t\t\t\t\tType.isPlainObject(value)\n\t\t\t\t\t&& Object.keys(value).length > 0\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tcallback.onLoad(value);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tcallback.onEmpty();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t}\n}\n\nexport {\n\tDatabase\n}","import {Tag, Dom, Loc, Type, Event} from \"main.core\";\nimport {Instance} from \"./feed\";\nimport {EventEmitter} from 'main.core.events';\n\nclass PublicationQueue extends EventEmitter\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\n\t\tthis.repo = {};\n\n\t\tthis.nodeId = {\n\t\t\tcontainer: 'post-balloon-container'\n\t\t};\n\n\t\tthis.class = {\n\t\t\tballoonHidden: 'post-balloon-hidden',\n\t\t\tballoonFixed: 'post-balloon-box-fixed',\n\t\t\tballoonPublished: 'post-balloon-done',\n\t\t\tballoonShow: 'post-balloon-show',\n\t\t\tballoonHide: 'post-balloon-hide'\n\t\t};\n\n\t\tthis.timeout = {\n\t\t\tshow: 750\n\t\t};\n\n\t\tthis.init();\n\t}\n\n\tinit()\n\t{\n\t\tBXMobileApp.addCustomEvent('Livefeed.PublicationQueue::afterSetItem', this.afterSetItem.bind(this));\n\t\tBXMobileApp.addCustomEvent('Livefeed.PublicationQueue::afterPostAdd', this.afterPostAdd.bind(this));\n\t\tBXMobileApp.addCustomEvent('Livefeed.PublicationQueue::afterPostAddError', this.afterPostAddError.bind(this));\n\t\tBXMobileApp.addCustomEvent('Livefeed.PublicationQueue::afterPostUpdate', this.afterPostUpdate.bind(this));\n\t\tBXMobileApp.addCustomEvent('Livefeed.PublicationQueue::afterPostUpdateError', this.afterPostUpdateError.bind(this));\n\n\t\tthis.setEventNamespace('BX.Mobile.Livefeed');\n\t\tthis.subscribe('onFeedReady', this.onFeedLoaded.bind(this));\n\t\tthis.subscribe('onPostInserted', this.onPostInserted.bind(this));\n\n\t\tEvent.bind(document, 'scroll', this.onScroll.bind(this));\n\t}\n\n\tonScroll()\n\t{\n\t\tconst\n\t\t\tcontainerNode = document.getElementById(this.nodeId.container);\n\n\t\tif (!Type.isDomNode(containerNode))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (window.pageYOffset > 0)\n\t\t{\n\t\t\tcontainerNode.classList.add(this.class.balloonFixed);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tcontainerNode.classList.remove(this.class.balloonFixed);\n\t\t}\n\t}\n\n\tonFeedLoaded()\n\t{\n\t\tapp.exec('getStorageValue', {\n\t\t\tstorageId: 'livefeed',\n\t\t\tkey: 'publicationQueue',\n\t\t\tcallback: (queue) =>\n\t\t\t{\n\t\t\t\tqueue = (Type.isPlainObject(queue) ? queue : (Type.isStringFilled(queue) ? JSON.parse(queue) : {}));\n\n\t\t\t\tif (!Type.isPlainObject(queue))\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tfor (let key in queue)\n\t\t\t\t{\n\t\t\t\t\tif (!queue.hasOwnProperty(key))\n\t\t\t\t\t{\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.addToTray(key, {});\n\t\t\t\t}\n\n\t\t\t\tthis.drawList();\n\t\t\t}\n\t\t});\n\t}\n\n\tonPostInserted(event)\n\t{\n\t\tthis.removeFromTray(event.data.key);\n\t}\n\n\taddToTray(key, params)\n\t{\n\t\tthis.repo[key] = params;\n\t\tthis.repo[key].node = this.drawItem();\n\t\tthis.repo[key].node.classList.add(this.class.balloonShow);\n\t}\n\tremoveFromTray(key, params)\n\t{\n\t\tthis.hideItem(key);\n\n\t\tsetTimeout(() => {\n\t\t\tif (this.repo[key])\n\t\t\t{\n\t\t\t\tdelete this.repo[key];\n\t\t\t}\n\t\t}, 3000);\n\t}\n\n\taddSuccess(key, warningText)\n\t{\n\t\tif (\n\t\t\tthis.repo[key]\n\t\t\t&& this.repo[key].node\n\t\t)\n\t\t{\n\t\t\tthis.repo[key].node.classList.remove(this.class.balloonHidden);\n\t\t\tthis.repo[key].node.classList.remove(this.class.balloonShow);\n\t\t\tthis.repo[key].node.classList.add(this.class.balloonPublished);\n\t\t\tthis.repo[key].node.lastElementChild.innerHTML = (Type.isStringFilled(warningText) ? warningText : Loc.getMessage('MOBILE_EXT_LIVEFEED_PUBLICATION_QUEUE_SUCCESS_TITLE'));\n\t\t}\n\n\t\tsetTimeout(() => {\n\t\t\tthis.removeFromTray(key);\n\t\t}, 5000);\n\t}\n\n\tdrawItem()\n\t{\n\t\tconst\n\t\t\ttitle = Loc.getMessage('MOBILE_EXT_LIVEFEED_PUBLICATION_QUEUE_ITEM_TITLE');\n\n\t\treturn Tag.render`\n\t\t\t\t<div class=\"post-balloon-hidden post-balloon post-balloon-active\"><span class=\"post-balloon-icon\"></span><span class=\"post-balloon-text\">${title}</span></div>\n\t\t\t`;\n\t}\n\n\thideItem(key, params)\n\t{\n\t\tif (this.repo[key])\n\t\t{\n\t\t\tthis.repo[key].node.classList.add(this.class.balloonHide);\n\t\t}\n\t}\n\n\tdrawList()\n\t{\n\t\tconst\n\t\t\tcontainerNode = document.getElementById(this.nodeId.container);\n\n\t\tif (!Type.isDomNode(containerNode))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tDom.clean(containerNode);\n\n\t\tfor (let key in this.repo)\n\t\t{\n\t\t\tif (\n\t\t\t\t!this.repo.hasOwnProperty(key)\n\t\t\t\t|| !Type.isDomNode(this.repo[key].node)\n\t\t\t)\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tDom.append(this.repo[key].node, containerNode);\n\t\t}\n\t}\n\n\tafterSetItem(params)\n\t{\n\t\tconst\n\t\t\tkey = params.key ? params.key : '',\n\t\t\tpageId = params.pageId ? params.pageId : '',\n\t\t\tcontentType = params.contentType ? params.contentType : '';\n\n\t\tif (\n\t\t\tpageId != Instance.getPageId()\n\t\t\t|| !key\n\t\t\t|| !Type.isStringFilled(contentType)\n\t\t)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (contentType == 'post')\n\t\t{\n\t\t\tthis.addToTray(key, {\n\t\t\t\tkey: key\n\t\t\t});\n\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.drawList();\n\t\t\t}, this.timeout.show);\n\t\t}\n\t}\n\n\tafterPostAdd(params)\n\t{\n\t\tif (!Type.isPlainObject(params))\n\t\t{\n\t\t\tparams = {};\n\t\t}\n\n\t\tthis.addSuccess((params.key ? params.key : ''), params.warningText);\n\t\tthis.drawList();\n\t}\n\n\tafterPostUpdate(params)\n\t{\n\t\tif (!Type.isPlainObject(params))\n\t\t{\n\t\t\tparams = {};\n\t\t}\n\n\t\tthis.addSuccess(params.key ? params.key : '');\n\t\tthis.drawList();\n\t}\n\n\tafterPostAddError(params)\n\t{\n\t\tif (!Type.isPlainObject(params))\n\t\t{\n\t\t\tparams = {};\n\t\t}\n\n\t\tconst\n\t\t\tkey = params.key ? params.key : '';\n\n\t\tthis.removeFromTray(key, {\n\t\t\tkey: key\n\t\t});\n\t\tthis.drawList();\n\t}\n\n\tafterPostUpdateError(params)\n\t{\n\t\tif (!Type.isPlainObject(params))\n\t\t{\n\t\t\tparams = {};\n\t\t}\n\n\t\tconst\n\t\t\tkey = params.key ? params.key : '';\n\n\t\tthis.removeFromTray(key, {\n\t\t\tkey: key\n\t\t});\n\t\tthis.drawList();\n\t}\n}\n\nexport {\n\tPublicationQueue\n}","import {FollowManagerInstance} from \"./feed\";\nimport {Loc, Type} from 'main.core';\nimport {Ajax} from 'mobile.ajax';\n\nclass Post\n{\n\tstatic moveBottom()\n\t{\n\t\twindow.scrollTo(0, document.body.scrollHeight);\n\t}\n\n\tstatic moveTop()\n\t{\n\t\twindow.scrollTo(0, 0);\n\t}\n\n\tconstructor(data)\n\t{\n\t\tthis.logId = 0;\n\t\tthis.entryType = '';\n\t\tthis.useFollow = false;\n\t\tthis.useTasks = false;\n\t\tthis.perm = '';\n\t\tthis.destinations = {};\n\t\tthis.postId = 0;\n\t\tthis.url = '';\n\t\tthis.entityXmlId = '';\n\t\tthis.readOnly = false;\n\t\tthis.contentTypeId = '';\n\t\tthis.contentId = 0;\n\t\tthis.showFull = false;\n\n\t\tthis.taskId = 0;\n\t\tthis.taskData = null;\n\n\t\tthis.calendarEventId = 0;\n\n\t\tthis.init(data);\n\t}\n\n\tinit(data)\n\t{\n\t\tlet {\n\t\t\tlogId,\n\t\t\tentryType,\n\t\t\tuseFollow,\n\t\t\tuseTasks,\n\t\t\tperm,\n\t\t\tdestinations,\n\t\t\tpostId,\n\t\t\turl,\n\t\t\tentityXmlId,\n\t\t\treadOnly,\n\t\t\tcontentTypeId,\n\t\t\tcontentId,\n\t\t\tshowFull,\n\n\t\t\ttaskId,\n\t\t\ttaskData,\n\n\t\t\tcalendarEventId\n\t\t} = data;\n\n\t\tlogId = parseInt(logId);\n\n\t\tif (logId <= 0)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.logId = logId;\n\n\t\tthis.postId = parseInt(postId);\n\t\tthis.contentId = parseInt(contentId);\n\t\tthis.taskId = parseInt(taskId);\n\t\tthis.calendarEventId = parseInt(calendarEventId);\n\n\t\tthis.useFollow = !!useFollow;\n\t\tthis.useTasks = !!useTasks;\n\t\tthis.readOnly = !!readOnly;\n\t\tthis.showFull = !!showFull;\n\n\t\tif (Type.isStringFilled(entryType))\n\t\t{\n\t\t\tthis.entryType = entryType;\n\t\t}\n\t\tif (Type.isStringFilled(perm))\n\t\t{\n\t\t\tthis.perm = perm;\n\t\t}\n\t\tif (Type.isStringFilled(url))\n\t\t{\n\t\t\tthis.url = url;\n\t\t}\n\t\tif (Type.isStringFilled(entityXmlId))\n\t\t{\n\t\t\tthis.entityXmlId = entityXmlId;\n\t\t}\n\t\tif (Type.isStringFilled(contentTypeId))\n\t\t{\n\t\t\tthis.contentTypeId = contentTypeId;\n\t\t}\n\t\tif (Type.isStringFilled(taskData))\n\t\t{\n\t\t\ttry\n\t\t\t{\n\t\t\t\tthis.taskData = JSON.parse(taskData);\n\t\t\t}\n\t\t\tcatch(e)\n\t\t\t{\n\t\t\t\tthis.taskData = null;\n\t\t\t}\n\t\t}\n\n\t\tif (Type.isPlainObject(destinations))\n\t\t{\n\t\t\tthis.destinations = destinations;\n\t\t}\n\t}\n\n\tsetFavorites(data):void\n\t{\n\t\tif (this.logId <= 0)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tlet {node, event} = data;\n\n\t\t// for old versions without post menu in the feed\n\t\tif (!Type.isDomNode(node))\n\t\t{\n\t\t\tnode = document.getElementById('log_entry_favorites_' + this.logId);\n\t\t}\n\n\t\tif (Type.isDomNode(node))\n\t\t{\n\t\t\tconst oldValue = (node.getAttribute('data-favorites') === 'Y' ? 'Y' : 'N');\n\t\t\tconst newValue = (oldValue === 'Y' ? 'N' : 'Y');\n\n\t\t\t// for old versions without post menu in the feed\n\t\t\tif (node.classList.contains('lenta-item-fav'))\n\t\t\t{\n\t\t\t\tif (oldValue === 'Y')\n\t\t\t\t{\n\t\t\t\t\tnode.classList.remove('lenta-item-fav-active');\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tnode.classList.add('lenta-item-fav-active');\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tnode.setAttribute('data-favorites', newValue);\n\n\t\t\tAjax.runAction('socialnetwork.api.livefeed.changeFavorites', {\n\t\t\t\tdata: {\n\t\t\t\t\tlogId: this.logId,\n\t\t\t\t\tvalue: newValue\n\t\t\t\t},\n\t\t\t\tanalyticsLabel: {\n\t\t\t\t\tb24statAction: (newValue === 'Y' ? 'addFavorites' : 'removeFavorites'),\n\t\t\t\t\tb24statContext: 'mobile'\n\t\t\t\t}\n\t\t\t}).then((response) => {\n\t\t\t\tif (response.data.success)\n\t\t\t\t{\n\t\t\t\t\tif (newValue === 'Y')\n\t\t\t\t\t{\n\t\t\t\t\t\tFollowManagerInstance.setFollow({\n\t\t\t\t\t\t\tlogId: this.logId,\n\t\t\t\t\t\t\tbOnlyOn: true,\n\t\t\t\t\t\t\tbRunEvent: true,\n\t\t\t\t\t\t\tbAjax: false\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tBXMobileApp.onCustomEvent('onLogEntryFavorites', {\n\t\t\t\t\t\tlog_id: this.logId,\n\t\t\t\t\t\tpage_id: Loc.getMessage('MSLPageId')\n\t\t\t\t\t}, true);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tnode.setAttribute('data-favorites', oldValue);\n\t\t\t\t}\n\t\t\t}, () => {\n\t\t\t\tnode.setAttribute('data-favorites', oldValue);\n\t\t\t});\n\t\t}\n\n\t\tif (event instanceof Event)\n\t\t{\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\t\t}\n\t}\n\n\tsetPinned(data):void\n\t{\n\t\tif (this.logId <= 0)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst {\n\t\t\tmenuNode,\n\t\t\tcontext\n\t\t} = data;\n\n\t\tif (Type.isDomNode(menuNode))\n\t\t{\n\t\t\tconst oldValue = (menuNode.getAttribute('data-pinned') === 'Y' ? 'Y' : 'N');\n\t\t\tconst newValue = (oldValue === 'Y' ? 'N' : 'Y');\n\n\t\t\tmenuNode.setAttribute('data-pinned', newValue);\n\n\t\t\tBXMobileApp.onCustomEvent('Livefeed::showLoader', {}, true, true);\n\n\t\t\tAjax.runAction('socialnetwork.api.livefeed.logentry.' + (newValue === 'Y' ? 'pin' : 'unpin'), {\n\t\t\t\tdata: {\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tlogId: this.logId\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tanalyticsLabel: {\n\t\t\t\t\tb24statAction: (newValue === 'Y' ? 'pinLivefeedEntry' : 'unpinLivefeedEntry'),\n\t\t\t\t\tb24statContext: 'mobile'\n\t\t\t\t}\n\t\t\t}).then((response) => {\n\t\t\t\tBXMobileApp.onCustomEvent('Livefeed::hideLoader', {}, true, true);\n\t\t\t\tif (response.data.success)\n\t\t\t\t{\n\t\t\t\t\tBXMobileApp.onCustomEvent('Livefeed.PinnedPanel::change', {\n\t\t\t\t\t\tlogId: this.logId,\n\t\t\t\t\t\tvalue: newValue,\n\t\t\t\t\t\tpostNode: menuNode.closest('.lenta-item'),\n\t\t\t\t\t\tpinActionContext: context\n\t\t\t\t\t}, true, true);\n\t\t\t\t\tBXMobileApp.onCustomEvent('Livefeed.PostDetail::pinChanged', {\n\t\t\t\t\t\tlogId: this.logId,\n\t\t\t\t\t\tvalue: newValue\n\t\t\t\t\t}, true, true);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tmenuNode.setAttribute('data-pinned', oldValue);\n\t\t\t\t}\n\t\t\t}, () => {\n\t\t\t\tBXMobileApp.onCustomEvent('Livefeed::hideLoader', {}, true, true);\n\t\t\t\tmenuNode.setAttribute('data-pinned', oldValue);\n\t\t\t});\n\t\t}\n\t}\n\n\topenDetail(params)\n\t{\n\t\tconst {\n\t\t\tpathToEmptyPage,\n\t\t\tpathToCalendarEvent,\n\t\t\tpathToTasksRouter,\n\t\t\tevent,\n\t\t\tfocusComments,\n\t\t\tshowFull\n\t\t} = params;\n\n\t\tif (!Type.isStringFilled(pathToEmptyPage))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (\n\t\t\tthis.taskId > 0\n\t\t\t&& BXMobileAppContext.getApiVersion() >= 31\n\t\t\t&& this.taskData\n\t\t)\n\t\t{\n\t\t\tBXMobileApp.Events.postToComponent('taskbackground::task::action', [\n\t\t\t\t{\n\t\t\t\t\tid: this.taskId,\n\t\t\t\t\ttitle: 'TASK',\n\t\t\t\t\ttaskInfo: {\n\t\t\t\t\t\ttitle: this.taskData.title,\n\t\t\t\t\t\tcreatorIcon: this.taskData.creatorIcon,\n\t\t\t\t\t\tresponsibleIcon: this.taskData.responsibleIcon\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tthis.taskId,\n\t\t\t\t{\n\t\t\t\t\ttaskId: this.taskId,\n\t\t\t\t\tgetTaskInfo: true\n\t\t\t\t}\n\t\t\t]);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tlet path = pathToEmptyPage;\n\n\t\t\tif (\n\t\t\t\tthis.calendarEventId > 0\n\t\t\t\t&& !focusComments\n\t\t\t\t&& pathToCalendarEvent.length > 0\n\t\t\t)\n\t\t\t{\n\t\t\t\tpath = pathToCalendarEvent.replace('#EVENT_ID#', this.calendarEventId);\n\t\t\t}\n\t\t\telse if (\n\t\t\t\tthis.taskId > 0\n\t\t\t\t&& this.taskData\n\t\t\t\t&& pathToTasksRouter.length > 0\n\t\t\t) // API version <= 31\n\t\t\t{\n\t\t\t\tpath = pathToTasksRouter\n\t\t\t\t\t.replace('__ROUTE_PAGE__', 'view')\n\t\t\t\t\t.replace('#USER_ID#', Loc.getMessage('MOBILE_EXT_LIVEFEED_CURRENT_USER_ID')) + '&TASK_ID=' + this.taskId;\n\t\t\t}\n\n\t\t\t__MSLOpenLogEntryNew({\n\t\t\t\tpath: path,\n\t\t\t\tlog_id: this.logId,\n\t\t\t\tentry_type: this.entryType,\n\t\t\t\tuse_follow: (this.useFollow ? 'Y' : 'N'),\n\t\t\t\tuse_tasks: (this.useTasks ? 'Y' : 'N'),\n\t\t\t\tpost_perm: this.perm,\n\t\t\t\tdestinations: this.destinations,\n\t\t\t\tpost_id: this.postId,\n\t\t\t\tpost_url: this.url,\n\t\t\t\tentity_xml_id: this.entityXmlId,\n\t\t\t\tfocus_comments: focusComments,\n\t\t\t\tfocus_form: false,\n\t\t\t\tshow_full: (this.showFull || showFull),\n\t\t\t\tread_only: (this.readOnly ? 'Y' : 'N'),\n\t\t\t\tpost_content_type_id: this.contentTypeId,\n\t\t\t\tpost_content_id: this.contentId,\n\t\t\t}, event);\n\t\t}\n\t}\n\n\tinitDetailPin()\n\t{\n\t\tconst menuNode = document.getElementById('log-entry-menu-' + this.logId);\n\t\tif (!menuNode)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst postNode = menuNode.closest('.post-wrap');\n\t\tif (!postNode)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst pinnedValue = menuNode.getAttribute('data-pinned');\n\t\tif (pinnedValue === 'Y')\n\t\t{\n\t\t\tpostNode.classList.add('lenta-item-pin-active');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tpostNode.classList.remove('lenta-item-pin-active');\n\t\t}\n\t}\n\n\texpandText()\n\t{\n\t\toMSL.expandText(this.logId);\n\t}\n}\n\nexport {\n\tPost\n}","import {Loc, Type, Uri, Text} from 'main.core';\nimport {Ajax} from 'mobile.ajax';\n\nimport {Instance, PostFormManagerInstance, PostFormOldManagerInstance} from './feed';\n\nclass BlogPost\n{\n\tstatic delete(params)\n\t{\n\t\tconst context = (Type.isStringFilled(params.context) ? params.context : 'list');\n\t\tconst postId = (!Type.isUndefined(params.postId) ? parseInt(params.postId) : 0);\n\t\tif (postId <= 0)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tapp.confirm({\n\t\t\ttitle: Loc.getMessage('MOBILE_EXT_LIVEFEED_DELETE_CONFIRM_TITLE'),\n\t\t\ttext : Loc.getMessage('MOBILE_EXT_LIVEFEED_DELETE_CONFIRM_DESCRIPTION'),\n\t\t\tbuttons : [\n\t\t\t\tLoc.getMessage('MOBILE_EXT_LIVEFEED_DELETE_CONFIRM_BUTTON_OK'),\n\t\t\t\tLoc.getMessage('MOBILE_EXT_LIVEFEED_DELETE_CONFIRM_BUTTON_CANCEL'),\n\t\t\t],\n\t\t\tcallback : (btnNum) => {\n\t\t\t\tif (parseInt(btnNum) !== 1)\n\t\t\t\t{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tapp.showPopupLoader({\n\t\t\t\t\ttext: '',\n\t\t\t\t});\n\n\t\t\t\tconst actionUrl = Uri.addParam(`${Loc.getMessage('MOBILE_EXT_LIVEFEED_SITE_DIR')}mobile/ajax.php`, {\n\t\t\t\t\tb24statAction: 'deleteBlogPost',\n\t\t\t\t\tb24statContext: 'mobile',\n\t\t\t\t});\n\n\t\t\t\tAjax.wrap({\n\t\t\t\t\ttype: 'json',\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\turl: actionUrl,\n\t\t\t\t\tdata: {\n\t\t\t\t\t\taction: 'delete_post',\n\t\t\t\t\t\tmobile_action: 'delete_post',\n\t\t\t\t\t\tsessid: Loc.getMessage('bitrix_sessid'),\n\t\t\t\t\t\tsite: Loc.getMessage('SITE_ID'),\n\t\t\t\t\t\tlang: Loc.getMessage('LANGUAGE_ID'),\n\t\t\t\t\t\tpost_id: postId,\n\t\t\t\t\t},\n\t\t\t\t\tprocessData: true,\n\t\t\t\t\tcallback: (response) => {\n\t\t\t\t\t\tapp.hidePopupLoader();\n\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t!Type.isStringFilled(response.SUCCESS)\n\t\t\t\t\t\t\t|| response.SUCCESS !== 'Y'\n\t\t\t\t\t\t)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tBXMobileApp.onCustomEvent('onBlogPostDelete', {}, true, true);\n\t\t\t\t\t\tif (context === 'detail')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tapp.closeController({\n\t\t\t\t\t\t\t\tdrop: true,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tcallback_failure: () => {\n\t\t\t\t\t\tapp.hidePopupLoader();\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\treturn false;\n\t\t\t}\n\t\t});\n\t}\n\n\tstatic edit(params)\n\t{\n\t\tconst postId = (!Type.isUndefined(params.postId) ? parseInt(params.postId) : 0);\n\t\tif (postId <= 0)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst pinnedContext = (!Type.isUndefined(params.pinnedContext) ? !!params.pinnedContext : false);\n\n\t\tif (Application.getApiVersion() >= Instance.getApiVersion('layoutPostForm'))\n\t\t{\n\t\t\tPostFormManagerInstance.show({\n\t\t\t\tpageId: Instance.getPageId(),\n\t\t\t\tpostId: postId,\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.getData({\n\t\t\t\tpostId: postId,\n\t\t\t\tcallback: (postData) => {\n\t\t\t\t\tPostFormOldManagerInstance.formParams = {};\n\n\t\t\t\t\tif (\n\t\t\t\t\t\t!Type.isUndefined(postData.PostPerm)\n\t\t\t\t\t\t&& postData.PostPerm >= 'W'\n\t\t\t\t\t)\n\t\t\t\t\t{\n\t\t\t\t\t\tconst selectedDestinations = {\n\t\t\t\t\t\t\ta_users: [],\n\t\t\t\t\t\t\tb_groups: [],\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tPostFormOldManagerInstance.setExtraDataArray({\n\t\t\t\t\t\t\tpostId: postId,\n\t\t\t\t\t\t\tpostAuthorId: postData.post_user_id,\n\t\t\t\t\t\t\tlogId: postData.log_id,\n\t\t\t\t\t\t\tpinnedContext: pinnedContext,\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif (!Type.isUndefined(postData.PostDetailText))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tPostFormOldManagerInstance.setParams({\n\t\t\t\t\t\t\t\tmessageText: postData.PostDetailText,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (Type.isPlainObject(postData.PostDestination))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfor (const [key, value] of Object.entries(postData.PostDestination))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\tType.isStringFilled(postData.PostDestination[key].STYLE)\n\t\t\t\t\t\t\t\t\t&& postData.PostDestination[key].STYLE === 'all-users'\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tPostFormOldManagerInstance.addDestination(\n\t\t\t\t\t\t\t\t\t\tselectedDestinations,\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\ttype: 'UA'\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse if (\n\t\t\t\t\t\t\t\t\tType.isStringFilled(postData.PostDestination[key].TYPE)\n\t\t\t\t\t\t\t\t\t&& [ 'U', 'SG' ].includes(postData.PostDestination[key].TYPE)\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tPostFormOldManagerInstance.addDestination(\n\t\t\t\t\t\t\t\t\t\tselectedDestinations,\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\ttype: postData.PostDestination[key].TYPE,\n\t\t\t\t\t\t\t\t\t\t\tid: postData.PostDestination[key].ID,\n\t\t\t\t\t\t\t\t\t\t\tname: Text.decode(postData.PostDestination[key].TITLE)\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (!Type.isUndefined(postData.PostDestinationHidden))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tPostFormOldManagerInstance.setExtraData({\n\t\t\t\t\t\t\t\thiddenRecipients: postData.PostDestinationHidden,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tPostFormOldManagerInstance.setParams({\n\t\t\t\t\t\t\tselectedRecipients: selectedDestinations,\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif (!Type.isUndefined(postData.PostFiles))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tPostFormOldManagerInstance.setParams({\n\t\t\t\t\t\t\t\tmessageFiles: postData.PostFiles,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (!Type.isUndefined(postData.PostUFCode))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tPostFormOldManagerInstance.setExtraData({\n\t\t\t\t\t\t\t\tmessageUFCode: postData.PostUFCode,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tapp.exec('showPostForm', PostFormOldManagerInstance.show());\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t});\n\t\t}\n\t}\n\n\tstatic getData(params)\n\t{\n\t\tconst postId = (!Type.isUndefined(params.postId) ? parseInt(params.postId) : 0);\n\t\tif (postId <= 0)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst callbackFunction = (Type.isFunction(params.callback) ? params.callback : null);\n\t\tif (Type.isNull(callbackFunction))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst result = {};\n\n\t\tif (postId > 0)\n\t\t{\n\t\t\tapp.showPopupLoader();\n\n\t\t\tAjax.wrap({\n\t\t\t\ttype: 'json',\n\t\t\t\tmethod: 'POST',\n\t\t\t\turl: `${Loc.getMessage('MOBILE_EXT_LIVEFEED_SITE_DIR')}mobile/ajax.php`,\n\t\t\t\tprocessData: true,\n\t\t\t\tdata: {\n\t\t\t\t\taction: 'get_blog_post_data',\n\t\t\t\t\tmobile_action: 'get_blog_post_data',\n\t\t\t\t\tsessid: Loc.getMessage('bitrix_sessid'),\n\t\t\t\t\tsite: Loc.getMessage('SITE_ID'),\n\t\t\t\t\tlang: Loc.getMessage('LANGUAGE_ID'),\n\t\t\t\t\tpost_id: postId,\n\t\t\t\t\tnt: Loc.getMessage('MSLNameTemplate'),\n\t\t\t\t\tsl: Loc.getMessage('MSLShowLogin')\n\t\t\t\t},\n\t\t\t\tcallback: (data) => {\n\t\t\t\t\tapp.hidePopupLoader();\n\n\t\t\t\t\tresult.id = postId;\n\n\t\t\t\t\tif (\n\t\t\t\t\t\t!Type.isUndefined(data.log_id)\n\t\t\t\t\t\t&& parseInt(data.log_id) > 0\n\t\t\t\t\t)\n\t\t\t\t\t{\n\t\t\t\t\t\tresult.log_id = data.log_id;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (\n\t\t\t\t\t\t!Type.isUndefined(data.post_user_id)\n\t\t\t\t\t\t&& parseInt(data.post_user_id) > 0\n\t\t\t\t\t)\n\t\t\t\t\t{\n\t\t\t\t\t\tresult.post_user_id = data.post_user_id;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!Type.isUndefined(data.PostPerm))\n\t\t\t\t\t{\n\t\t\t\t\t\tresult.PostPerm = data.PostPerm;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!Type.isUndefined(data.PostDestination))\n\t\t\t\t\t{\n\t\t\t\t\t\tresult.PostDestination = data.PostDestination;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!Type.isUndefined(data.PostDestinationHidden))\n\t\t\t\t\t{\n\t\t\t\t\t\tresult.PostDestinationHidden = data.PostDestinationHidden;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!Type.isUndefined(data.PostDetailText))\n\t\t\t\t\t{\n\t\t\t\t\t\tresult.PostDetailText = data.PostDetailText;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (Type.isUndefined(data.PostFiles))\n\t\t\t\t\t{\n\t\t\t\t\t\tresult.PostFiles = data.PostFiles;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!Type.isUndefined(data.PostBackgroundCode))\n\t\t\t\t\t{\n\t\t\t\t\t\tresult.PostBackgroundCode = data.PostBackgroundCode;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!Type.isUndefined(data.PostUFCode))\n\t\t\t\t\t{\n\t\t\t\t\t\tresult.PostUFCode = data.PostUFCode;\n\t\t\t\t\t}\n\n\t\t\t\t\tcallbackFunction(result);\n\t\t\t\t},\n\t\t\t\tcallback_failure: () => {\n\t\t\t\t\tapp.hidePopupLoader();\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t}\n}\n\nexport {\n\tBlogPost\n}","import {Loc, Type} from \"main.core\";\nimport {Post} from '../post';\nimport {BlogPost} from '../blogpost';\nimport {FollowManagerInstance, CommentsInstance} from '../feed';\n\nclass PostMenu\n{\n\tinit(data)\n\t{\n\t\tthis.iconUrlFolderPath = '/bitrix/templates/mobile_app/images/lenta/menu/';\n\t\tthis.sectionCode = 'defaultSection';\n\n\t\tthis.logId = parseInt(data.logId);\n\t\tthis.postId = parseInt(data.postId);\n\t\tthis.postPerms = (Type.isStringFilled(data.postPerms) ? data.postPerms : 'R');\n\t\tthis.pageId = data.pageId;\n\t\tthis.contentTypeId = (Type.isStringFilled(data.contentTypeId) ? data.contentTypeId : null);\n\t\tthis.contentId = (Type.isInteger(data.contentId) ? data.contentId : 0);\n\n\t\tthis.useShare = !!data.useShare && (this.postId > 0);\n\t\tthis.useFavorites = !!data.useFavorites && (this.logId > 0);\n\t\tthis.useFollow = !!data.useFollow && (this.logId > 0);\n\t\tthis.usePinned = !!data.usePinned && (this.logId > 0);\n\t\tthis.useTasks = (Loc.getMessage('MOBILE_EXT_LIVEFEED_USE_TASKS') === 'Y');\n\t\tthis.useRefreshComments = !!data.useRefreshComments;\n\n\t\tthis.favoritesValue = !!data.favoritesValue;\n\t\tthis.followValue = !!data.followValue;\n\t\tthis.pinnedValue = !!data.pinnedValue;\n\n\t\tthis.target = (Type.isDomNode(data.target) ? data.target : null);\n\t\tthis.context = (Type.isStringFilled(data.context) ? data.context : 'list');\n\t}\n\n\tgetMenuItems()\n\t{\n\t\tconst result = [];\n\n\t\tif (this.usePinned)\n\t\t{\n\t\t\tresult.push({\n\t\t\t\tid: 'pinned',\n\t\t\t\ttitle: Loc.getMessage('MOBILE_EXT_LIVEFEED_POST_MENU_PINNED_' + (!!this.pinnedValue ? 'Y' : 'N')),\n\t\t\t\ticonUrl: this.iconUrlFolderPath + (!!this.pinnedValue ? 'unpin.png' : 'pin.png'),\n\t\t\t\tsectionCode: this.sectionCode,\n\t\t\t\taction: () =>\n\t\t\t\t{\n\t\t\t\t\tconst postInstance = new Post({\n\t\t\t\t\t\tlogId: this.logId\n\t\t\t\t\t});\n\t\t\t\t\treturn postInstance.setPinned({\n\t\t\t\t\t\tmenuNode: this.target,\n\t\t\t\t\t\tcontext: this.context\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (this.useShare)\n\t\t{\n\t\t\tvar selectedDestinations = {\n\t\t\t\ta_users: [],\n\t\t\t\tb_groups: []\n\t\t\t};\n\n\t\t\tif (\n\t\t\t\tselectedDestinations.a_users.length > 0\n\t\t\t\t|| selectedDestinations.b_groups.length > 0\n\t\t\t)\n\t\t\t{\n\t\t\t\tresult.push({\n\t\t\t\t\tid: 'sharePost',\n\t\t\t\t\ttitle: Loc.getMessage('MOBILE_EXT_LIVEFEED_POST_MENU_SHARE'),\n\t\t\t\t\ticonName: 'add',\n\t\t\t\t\ticonUrl: this.iconUrlFolderPath + 'n_plus.png',\n\t\t\t\t\tsectionCode: this.sectionCode,\n\t\t\t\t\taction: () =>\n\t\t\t\t\t{\n\t\t\t\t\t\tapp.openTable({\n\t\t\t\t\t\t\tcallback: () => {\n\t\t\t\t\t\t\t\toMSL.shareBlogPost();\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\turl: Loc.getMessage('MOBILE_EXT_LIVEFEED_SITE_DIR') + 'mobile/index.php?mobile_action=' + (Loc.getMessage('MOBILE_EXT_LIVEFEED_CURRENT_EXTRANET_SITE') === 'Y' ? 'get_group_list' : 'get_usergroup_list') + '&feature=blog',\n\t\t\t\t\t\t\tmarkmode: true,\n\t\t\t\t\t\t\tmultiple: true,\n\t\t\t\t\t\t\treturn_full_mode: true,\n\t\t\t\t\t\t\tuser_all: true,\n\t\t\t\t\t\t\tshowtitle: true,\n\t\t\t\t\t\t\tmodal: true,\n\t\t\t\t\t\t\tselected: selectedDestinations,\n\t\t\t\t\t\t\talphabet_index: true,\n\t\t\t\t\t\t\tokname: Loc.getMessage('MOBILE_EXT_LIVEFEED_SHARE_TABLE_BUTTON_OK'),\n\t\t\t\t\t\t\tcancelname: Loc.getMessage('MOBILE_EXT_LIVEFEED_SHARE_TABLE_BUTTON_CANCEL'),\n\t\t\t\t\t\t\toutsection: (Loc.getMessage('MOBILE_EXT_LIVEFEED_DEST_TO_ALL_DENIED') !== 'Y')\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\tarrowFlag: false\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tif (\n\t\t\tthis.postId > 0\n\t\t\t&& this.postPerms === 'W'\n\t\t)\n\t\t{\n\t\t\tresult.push({\n\t\t\t\tid: 'edit',\n\t\t\t\ttitle: Loc.getMessage('MOBILE_EXT_LIVEFEED_POST_MENU_EDIT'),\n\t\t\t\ticonUrl: this.iconUrlFolderPath + 'pencil.png',\n\t\t\t\tsectionCode: this.sectionCode,\n\t\t\t\taction: () =>\n\t\t\t\t{\n\t\t\t\t\tBlogPost.edit({\n\t\t\t\t\t\tfeedId: window.LiveFeedID,\n\t\t\t\t\t\tpostId: this.postId,\n\t\t\t\t\t\tpinnedContext: !!this.pinnedValue,\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tarrowFlag: false,\n\t\t\t\tfeature: 'edit'\n\t\t\t});\n\n\t\t\tresult.push({\n\t\t\t\tid: 'delete',\n\t\t\t\ttitle: Loc.getMessage('MOBILE_EXT_LIVEFEED_POST_MENU_DELETE'),\n\t\t\t\ticonName: 'delete',\n\t\t\t\tsectionCode: this.sectionCode,\n\t\t\t\taction: () =>\n\t\t\t\t{\n\t\t\t\t\tBlogPost.delete({\n\t\t\t\t\t\tpostId: this.postId,\n\t\t\t\t\t\tcontext: this.context,\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tarrowFlag: false\n\t\t\t});\n\t\t}\n\n\t\tif (this.useFavorites)\n\t\t{\n\t\t\tresult.push({\n\t\t\t\tid: 'favorites',\n\t\t\t\ttitle: Loc.getMessage('MOBILE_EXT_LIVEFEED_POST_MENU_FAVORITES_' + (!!this.favoritesValue ? 'Y' : 'N')),\n\t\t\t\ticonUrl: this.iconUrlFolderPath + 'favorite.png',\n\t\t\t\tsectionCode: this.sectionCode,\n\t\t\t\taction: () =>\n\t\t\t\t{\n\t\t\t\t\tconst postInstance = new Post({\n\t\t\t\t\t\tlogId: this.logId\n\t\t\t\t\t});\n\n\t\t\t\t\treturn postInstance.setFavorites({\n\t\t\t\t\t\tnode: this.target\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tarrowFlag: false,\n\t\t\t\tfeature: 'favorites'\n\t\t\t});\n\t\t}\n\n\t\tif (this.useFollow)\n\t\t{\n\t\t\tresult.push({\n\t\t\t\tid: 'follow',\n\t\t\t\ttitle: Loc.getMessage('MOBILE_EXT_LIVEFEED_POST_MENU_FOLLOW_' + (!!this.followValue ? 'Y' : 'N')),\n\t\t\t\ticonUrl: this.iconUrlFolderPath + 'eye.png',\n\t\t\t\tsectionCode: this.sectionCode,\n\t\t\t\taction: () =>\n\t\t\t\t{\n\t\t\t\t\tFollowManagerInstance.setFollow({\n\t\t\t\t\t\tlogId: this.logId,\n\t\t\t\t\t\tmenuNode: this.target,\n\t\t\t\t\t\tpageId: this.pageId,\n\t\t\t\t\t\tbOnlyOn: false,\n\t\t\t\t\t\tbAjax: true,\n\t\t\t\t\t\tbRunEvent: true\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tarrowFlag: false\n\t\t\t});\n\t\t}\n\n\t\tif (this.useRefreshComments)\n\t\t{\n\t\t\tresult.push({\n\t\t\t\tid: 'refreshPostComments',\n\t\t\t\ttitle: Loc.getMessage('MOBILE_EXT_LIVEFEED_POST_MENU_REFRESH_COMMENTS'),\n\t\t\t\ticonUrl: this.iconUrlFolderPath + 'n_refresh.png',\n\t\t\t\taction: () => {\n\t\t\t\t\tif (oMSL.bDetailEmptyPage)\n\t\t\t\t\t{\n\t\t\t\t\t\t// get comments on refresh from detail page menu\n\t\t\t\t\t\tCommentsInstance.getComments({\n\t\t\t\t\t\t\tts: oMSL.iDetailTs,\n\t\t\t\t\t\t\tbPullDown: true,\n\t\t\t\t\t\t\tobFocus: {\n\t\t\t\t\t\t\t\tform: false,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tdocument.location.reload(true);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tarrowFlag: false\n\t\t\t});\n\t\t}\n\n\t\tif (\n\t\t\tType.isStringFilled(this.contentTypeId)\n\t\t\t&& this.contentId > 0\n\t\t)\n\t\t{\n\t\t\tresult.push({\n\t\t\t\tid: 'getPostLink',\n\t\t\t\ttitle: Loc.getMessage('MOBILE_EXT_LIVEFEED_POST_MENU_GET_LINK'),\n\t\t\t\ticonUrl: this.iconUrlFolderPath + 'link.png',\n\t\t\t\tsectionCode: this.sectionCode,\n\t\t\t\taction: () =>\n\t\t\t\t{\n\t\t\t\t\toMSL.copyPostLink({\n\t\t\t\t\t\tcontentTypeId: this.contentTypeId,\n\t\t\t\t\t\tcontentId: this.contentId\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tarrowFlag: false\n\t\t\t});\n\n\t\t\tif (\n\t\t\t\tthis.useTasks\n\t\t\t\t&& this.logId > 0\n\t\t\t)\n\t\t\t{\n\t\t\t\tresult.push({\n\t\t\t\t\tid: 'createTask',\n\t\t\t\t\ttitle: Loc.getMessage('MOBILE_EXT_LIVEFEED_POST_MENU_CREATE_TASK'),\n\t\t\t\t\ticonUrl: this.iconUrlFolderPath + 'n_check.png',\n\t\t\t\t\tsectionCode: this.sectionCode,\n\t\t\t\t\taction: () =>\n\t\t\t\t\t{\n\t\t\t\t\t\toMSL.createTask({\n\t\t\t\t\t\t\tentityType: this.contentTypeId,\n\t\t\t\t\t\t\tentityId: this.contentId,\n\t\t\t\t\t\t\tlogId: this.logId\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t},\n\t\t\t\t\tarrowFlag: false\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n}\n\nexport {\n\tPostMenu\n}","import {Loc, Type} from 'main.core';\nimport {Instance,PostMenuInstance,FollowManagerInstance} from '../feed';\n\nclass PageMenu\n{\n\tconstructor()\n\t{\n\t\tthis.type = 'list';\n\t\tthis.listPageMenuItems = [];\n\t\tthis.detailPageMenuItems = [];\n\t}\n\n\tinit(data)\n\t{\n\t\tthis.type = (data.type === 'detail' ? 'detail' : 'list');\n\n\t\tconst menuItems = this.getPageMenuItems();\n\t\tconst title = (\n\t\t\tthis.type === 'detail'\n\t\t\t\t? (Type.isStringFilled(Loc.getMessage('MSLLogEntryTitle')) ? Loc.getMessage('MSLLogEntryTitle') : '')\n\t\t\t\t: (Type.isStringFilled(Loc.getMessage('MSLLogTitle')) ? Loc.getMessage('MSLLogTitle') : '')\n\t\t);\n\n\t\tif (menuItems.length > 0)\n\t\t{\n\t\t\tif (BXMobileAppContext.getApiVersion() >= Instance.getApiVersion('pageMenu'))\n\t\t\t{\n\t\t\t\tthis.initPagePopupMenu();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tapp.menuCreate({\n\t\t\t\t\titems: menuItems\n\t\t\t\t});\n\t\t\t\tBXMobileApp.UI.Page.TopBar.title.setCallback(() => { app.menuShow(); });\n\t\t\t}\n\t\t}\n\t\telse if (BXMobileAppContext.getApiVersion() < Instance.getApiVersion('pageMenu'))\n\t\t{\n\t\t\tBXMobileApp.UI.Page.TopBar.title.setCallback(\"\");\n\t\t}\n\n\t\tBXMobileApp.UI.Page.TopBar.title.setText(title);\n\t\tBXMobileApp.UI.Page.TopBar.title.show();\n\t}\n\n\tinitPagePopupMenu()\n\t{\n\t\tif (BXMobileAppContext.getApiVersion() < Instance.getApiVersion('pageMenu'))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst buttons = [];\n\n\t\tif(!oMSL.logId)\n\t\t{\n\t\t\tbuttons.push({\n\t\t\t\ttype: 'search',\n\t\t\t\tcallback: function ()\n\t\t\t\t{\n\t\t\t\t\tapp.exec(\"showSearchBar\");\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tvar menuItems = this.getPageMenuItems(this.type);\n\n\t\tif (\n\t\t\tBX.type.isArray(menuItems)\n\t\t\t&& menuItems.length > 0\n\t\t)\n\t\t{\n\t\t\tbuttons.push({\n\t\t\t\ttype: 'more',\n\t\t\t\tcallback: () => {\n\t\t\t\t\tthis.showPageMenu(this.type);\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\tapp.exec('setRightButtons', {\n\t\t\titems: buttons,\n\t\t});\n\t}\n\n\tshowPageMenu()\n\t{\n\t\tif (this.type === 'detail')\n\t\t{\n\t\t\tthis.detailPageMenuItems = this.buildDetailPageMenu(oMSL.menuData);\n\t\t}\n\n\t\tconst menuItems = this.getPageMenuItems();\n\t\tif (menuItems.length <= 0)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst popupMenuItems = [];\n\t\tconst popupMenuActions = {};\n\n\t\tmenuItems.forEach(menuItem => {\n\t\t\tpopupMenuItems.push({\n\t\t\t\tid: menuItem.id,\n\t\t\t\ttitle: menuItem.name,\n\t\t\t\ticonUrl: (Type.isStringFilled(menuItem.image) ? menuItem.image : ''),\n\t\t\t\ticonName: (Type.isStringFilled(menuItem.iconName) ? menuItem.iconName : ''),\n\t\t\t\tsectionCode: 'defaultSection',\n\t\t\t});\n\n\t\t\tpopupMenuActions[menuItem.id] = menuItem.action;\n\t\t});\n\n\t\tapp.exec('setPopupMenuData', {\n\t\t\titems: popupMenuItems,\n\t\t\tsections: [\n\t\t\t\t{\n\t\t\t\t\tid: 'defaultSection',\n\t\t\t\t}\n\t\t\t],\n\t\t\tcallback: (event) => {\n\t\t\t\tif (event.eventName === 'onDataSet')\n\t\t\t\t{\n\t\t\t\t\tapp.exec('showPopupMenu');\n\t\t\t\t}\n\t\t\t\telse if (\n\t\t\t\t\tevent.eventName === 'onItemSelected'\n\t\t\t\t\t&& Type.isPlainObject(event.item)\n\t\t\t\t\t&& Type.isStringFilled(event.item.id)\n\t\t\t\t\t&& Type.isFunction(popupMenuActions[event.item.id])\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tpopupMenuActions[event.item.id]();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tgetPageMenuItems()\n\t{\n\t\treturn (this.type === 'detail' ? this.detailPageMenuItems : this.listPageMenuItems);\n\t}\n\n\tbuildDetailPageMenu(data)\n\t{\n\t\tvar menuNode = null;\n\n\t\tif (BXMobileAppContext.getApiVersion() >= Instance.getApiVersion('pageMenu'))\n\t\t{\n\t\t\tmenuNode = document.getElementById(`log-entry-menu-${Instance.getLogId()}`);\n\t\t}\n\n\t\tPostMenuInstance.init({\n\t\t\tlogId: Instance.getLogId(),\n\t\t\tpostId: parseInt(data.post_id),\n\t\t\tpostPerms: data.post_perm,\n\t\t\tuseShare: (data.entry_type === 'blog'),\n\t\t\tuseFavorites: (menuNode && menuNode.getAttribute('data-use-favorites') === 'Y'),\n\t\t\tuseFollow: (data.read_only !== 'Y'),\n\t\t\tusePinned: (Instance.getLogId() > 0),\n\t\t\tuseRefreshComments: true,\n\t\t\tfavoritesValue: (menuNode && menuNode.getAttribute('data-favorites') === 'Y'),\n\t\t\tfollowValue: (FollowManagerInstance.getFollowValue()),\n\t\t\tpinnedValue: (menuNode && menuNode.getAttribute('data-pinned') === 'Y'),\n\t\t\tcontentTypeId: data.post_content_type_id,\n\t\t\tcontentId: parseInt(data.post_content_id),\n\t\t\ttarget: menuNode,\n\t\t\tcontext: 'detail',\n\t\t});\n\n\t\treturn PostMenuInstance.getMenuItems().map((item) => {\n\t\t\titem.name = item.title;\n\t\t\titem.image = item.iconUrl;\n\n\t\t\tdelete item.title;\n\t\t\tdelete item.iconUrl;\n\n\t\t\treturn item;\n\t\t});\n\t};\n}\n\nexport {\n\tPageMenu\n}","import {Instance, DatabaseUnsentPostInstance} from \"./feed\";\nimport {Type} from 'main.core';\n\nclass PostFormManager\n{\n\tconstructor()\n\t{\n\n\t}\n\n\tshow(params)\n\t{\n\t\tlet postData = {\n\t\t\ttype: (params.type ? params.type : 'post'),\n\t\t\tgroupId: (params.groupId ? parseInt(params.groupId) : 0),\n\t\t\tpostId: (params.postId ? parseInt(params.postId) : 0),\n\t\t\tpageId: (Type.isStringFilled(params.pageId) ? params.pageId : '')\n\t\t};\n\t\tthis.getDatabaseData(postData).then((postData) => {\n\t\t\treturn this.getWorkgroupData(postData);\n\t\t}).then((postData) => {\n\t\t\treturn this.getPostData(postData);\n\t\t}).then((postData) => {\n\t\t\treturn this.processPostData(postData);\n\t\t}).then((postData) => {\n\t\t\tapp.exec(\"openComponent\", {\n\t\t\t\tname: \"JSStackComponent\",\n\t\t\t\tcomponentCode: \"livefeed.postform\",\n\t\t\t\tscriptPath: BX.message('MOBILE_EXT_LIVEFEED_COMPONENT_URL'),\n\t\t\t\tparams: {\n\t\t\t\t\t'SERVER_NAME': BX.message('MOBILE_EXT_LIVEFEED_SERVER_NAME'),\n\t\t\t\t\t'DESTINATION_LIST': Instance.getOption('destinationList', {}),\n\t\t\t\t\t'DESTINATION_TO_ALL_DENY': Instance.getOption('destinationToAllDeny', false),\n\t\t\t\t\t'DESTINATION_TO_ALL_DEFAULT': Instance.getOption('destinationToAllDefault', true),\n\t\t\t\t\t'MODULE_DISK_INSTALLED': (BX.message('MOBILE_EXT_LIVEFEED_DISK_INSTALLED') == 'Y' ? 'Y' : 'N'),\n\t\t\t\t\t'MODULE_WEBDAV_INSTALLED': (BX.message('MOBILE_EXT_LIVEFEED_WEBDAV_INSTALLED') == 'Y' ? 'Y' : 'N'),\n\t\t\t\t\t'MODULE_VOTE_INSTALLED': (BX.message('MOBILE_EXT_LIVEFEED_VOTE_INSTALLED') == 'Y' ? 'Y' : 'N'),\n\t\t\t\t\t'USE_IMPORTANT': (BX.message('MOBILE_EXT_LIVEFEED_USE_IMPORTANT') === 'N' ? 'N' : 'Y'),\n\t\t\t\t\t'FILE_ATTACH_PATH': BX.message('MOBILE_EXT_LIVEFEED_FILE_ATTACH_PATH'),\n\t\t\t\t\t'BACKGROUND_IMAGES_DATA': Instance.getOption('backgroundImagesData', {}),\n\t\t\t\t\t'BACKGROUND_COMMON': Instance.getOption('backgroundCommon', {}),\n\t\t\t\t\t'MEDALS_LIST': Instance.getOption('medalsList', {}),\n\t\t\t\t\t'IMPORTANT_DATA': Instance.getOption('importantData', {}),\n\t\t\t\t\t'USER_FOLDER_FOR_SAVED_FILES': BX.message('MOBILE_EXT_UTILS_USER_FOLDER_FOR_SAVED_FILES'),\n\t\t\t\t\t'MAX_UPLOAD_CHUNK_SIZE': BX.message('MOBILE_EXT_UTILS_MAX_UPLOAD_CHUNK_SIZE'),\n\t\t\t\t\t'POST_FILE_UF_CODE': BX.message('MOBILE_EXT_LIVEFEED_POST_FILE_UF_CODE'),\n\t\t\t\t\t'POST_FORM_DATA': Instance.getOption('postFormData', {}),\n\t\t\t\t\t'POST_DATA': postData,\n\t\t\t\t\t'DEVICE_WIDTH': BX.message('MOBILE_EXT_LIVEFEED_DEVICE_WIDTH'),\n\t\t\t\t\t'DEVICE_HEIGHT': BX.message('MOBILE_EXT_LIVEFEED_DEVICE_HEIGHT'),\n\t\t\t\t\t'DEVICE_RATIO': BX.message('MOBILE_EXT_LIVEFEED_DEVICE_RATIO'),\n\t\t\t\t},\n\t\t\t\trootWidget: {\n\t\t\t\t\tname: \"layout\",\n\t\t\t\t\tsettings: {\n\t\t\t\t\t\tobjectName: \"postFormLayoutWidget\",\n\t\t\t\t\t\tmodal: true\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, false);\n\t\t});\n\t}\n\n\tgetDatabaseData(postData)\n\t{\n\t\tconst promise = new Promise((resolve, reject) =>\n\t\t{\n\t\t\tconst postId = parseInt(postData.postId);\n\t\t\tif (postId > 0)\n\t\t\t{\n\t\t\t\tresolve(postData);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tDatabaseUnsentPostInstance.load(\n\t\t\t\t{\n\t\t\t\t\tonLoad: (data) => {\n\n\t\t\t\t\t\tif (data.contentType !== postData.type)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tresolve(postData);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tpostData.groupId = 0;\n\n\t\t\t\t\t\tif (!Type.isPlainObject(postData.post))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tpostData.post = {};\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (Type.isStringFilled(data.POST_TITLE))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tpostData.post.PostTitle = data.POST_TITLE;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (Type.isStringFilled(data.POST_MESSAGE))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tpostData.post.PostDetailText = data.POST_MESSAGE;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tType.isArrayFilled(data.DEST)\n\t\t\t\t\t\t\t&& Type.isPlainObject(data.DEST_DATA)\n\t\t\t\t\t\t)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tpostData.post.PostDestination = [];\n\n\t\t\t\t\t\t\tconst patterns = [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tpattern: /^SG(\\d+)$/i,\n\t\t\t\t\t\t\t\t\tstyle: 'sonetgroups'\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tpattern: /^U(\\d+|A)$/i,\n\t\t\t\t\t\t\t\t\tstyle: 'users'\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tpattern: /^DR(\\d+)$/i,\n\t\t\t\t\t\t\t\t\tstyle: 'department'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t];\n\n\t\t\t\t\t\t\tdata.DEST.forEach((item) => {\n\n\t\t\t\t\t\t\t\tlet id = null;\n\t\t\t\t\t\t\t\tlet style = null;\n\n\t\t\t\t\t\t\t\tfor (let i = 0; i < patterns.length; i++)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tconst matches = item.match(patterns[i].pattern);\n\t\t\t\t\t\t\t\t\tif (matches)\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tid = matches[1];\n\t\t\t\t\t\t\t\t\t\tstyle = ((item === 'UA') ? 'all-users' : patterns[i].style);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif (!Type.isNull(id))\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tpostData.post.PostDestination.push({\n\t\t\t\t\t\t\t\t\t\tSTYLE: style,\n\t\t\t\t\t\t\t\t\t\tID: id,\n\t\t\t\t\t\t\t\t\t\tTITLE: (Type.isPlainObject(data.DEST_DATA[item]) && Type.isStringFilled(data.DEST_DATA[item].title) ? data.DEST_DATA[item].title : '')\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (Type.isStringFilled(data.BACKGROUND_CODE))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tpostData.post.PostBackgroundCode = data.BACKGROUND_CODE;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (data.IMPORTANT === 'Y')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tpostData.post.PostImportantData = {\n\t\t\t\t\t\t\t\tvalue: 'Y'\n\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\tif (Type.isStringFilled(data.IMPORTANT_DATE_END))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tpostData.post.PostImportantData.endDate = Date.parse(data.IMPORTANT_DATE_END) / 1000;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (Type.isStringFilled(data.GRATITUDE_MEDAL))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tpostData.post.PostGratitudeData = {\n\t\t\t\t\t\t\t\tgratitude: data.GRATITUDE_MEDAL,\n\t\t\t\t\t\t\t\temployees: []\n\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\tArray.isArray(data.GRATITUDE_EMPLOYEES)\n\t\t\t\t\t\t\t\t&& Type.isPlainObject(data.GRATITUDE_EMPLOYEES_DATA)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tdata.GRATITUDE_EMPLOYEES.forEach((userId) => {\n\n\t\t\t\t\t\t\t\t\tconst userData = data.GRATITUDE_EMPLOYEES_DATA[userId];\n\t\t\t\t\t\t\t\t\tif (!Type.isPlainObject(userData))\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tpostData.post.PostGratitudeData.employees.push({\n\t\t\t\t\t\t\t\t\t\tid: userData.id,\n\t\t\t\t\t\t\t\t\t\timageUrl: (Type.isStringFilled(userData.imageUrl) ? userData.imageUrl : ''),\n\t\t\t\t\t\t\t\t\t\ttitle: (Type.isStringFilled(userData.title) ? userData.title : ''),\n\t\t\t\t\t\t\t\t\t\tsubtitle: (Type.isStringFilled(userData.subtitle) ? userData.subtitle : '')\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst voteId = 'n0';\n\t\t\t\t\t\tconst dataKey = 'UF_BLOG_POST_VOTE_' + voteId + '_DATA';\n\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tdata.UF_BLOG_POST_VOTE === voteId\n\t\t\t\t\t\t\t&& Type.isPlainObject(data[dataKey])\n\t\t\t\t\t\t\t&& Array.isArray(data[dataKey].QUESTIONS)\n\t\t\t\t\t\t)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tpostData.post.PostVoteData = {\n\t\t\t\t\t\t\t\tquestions: data[dataKey].QUESTIONS.map((question) => {\n\t\t\t\t\t\t\t\t\tconst result = {\n\t\t\t\t\t\t\t\t\t\tvalue: question.QUESTION,\n\t\t\t\t\t\t\t\t\t\tallowMultiSelect: question.FIELD_TYPE == 1 ? 'Y' : 'N',\n\t\t\t\t\t\t\t\t\t\tanswers: []\n\t\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\t\tif (Array.isArray(question.ANSWERS))\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tresult.answers = question.ANSWERS.map((answer) => {\n\t\t\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\t\t\tvalue: answer.MESSAGE\n\t\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\treturn result;\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tresolve(postData);\n\t\t\t\t\t},\n\t\t\t\t\tonEmpty: () => {\n\t\t\t\t\t\tresolve(postData);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tpostData.groupId\n\t\t\t);\n\t\t});\n\n\t\tpromise.catch((error) => {console.error(error)});\n\n\t\treturn promise;\n\t}\n\n\tgetWorkgroupData(postData)\n\t{\n\t\tconst groupId = parseInt(postData.groupId);\n\n\t\tconst promise = new Promise((resolve, reject) =>\n\t\t{\n\t\t\tif (groupId <= 0)\n\t\t\t{\n\t\t\t\tresolve(postData);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet promiseData = {\n\t\t\t\tresolve: resolve,\n\t\t\t\treject: reject\n\t\t\t};\n\n\t\t\tconst currentDateTime = new Date();\n\t\t\tconst returnEventName = 'Livefeed::returnWorkgroupData_' + currentDateTime.getTime();\n\n\t\t\tBXMobileApp.addCustomEvent(returnEventName, (function (result) {\n\t\t\t\tif (result.success)\n\t\t\t\t{\n\t\t\t\t\tthis.resolve(Object.assign(postData, {\n\t\t\t\t\t\tgroup: {\n\t\t\t\t\t\t\tID: parseInt(result.groupData.ID),\n\t\t\t\t\t\t\tNAME: result.groupData.NAME,\n//\t\t\t\t\t\t\tDESCRIPTION: result.groupData.DESCRIPTION\n\t\t\t\t\t\t}\n\t\t\t\t\t}));\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.reject();\n\t\t\t\t}\n\t\t\t}).bind(promiseData));\n\n\t\t\tBXMobileApp.onCustomEvent('Livefeed::getWorkgroupData', {\n\t\t\t\tgroupId: groupId,\n\t\t\t\treturnEventName: returnEventName\n\t\t\t}, true);\n\t\t});\n\n\t\tpromise.catch((error) => {console.error(error)});\n\n\t\treturn promise;\n\t}\n\n\tgetPostData(postData)\n\t{\n\t\tconst postId = parseInt(postData.postId);\n\n\t\tconst promise = new Promise((resolve, reject) =>\n\t\t{\n\t\t\tif (postId <= 0)\n\t\t\t{\n\t\t\t\tresolve(postData);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet promiseData = {\n\t\t\t\tresolve: resolve,\n\t\t\t\treject: reject\n\t\t\t};\n\n\t\t\tconst currentDateTime = new Date();\n\t\t\tconst returnEventName = 'Livefeed::returnPostFullData_' + currentDateTime.getTime();\n\n\t\t\tBXMobileApp.addCustomEvent(returnEventName, (function (result) {\n\t\t\t\tif (result.success)\n\t\t\t\t{\n\t\t\t\t\tthis.resolve(Object.assign(postData, {\n\t\t\t\t\t\tpost: result.postData\n\t\t\t\t\t}));\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.reject();\n\t\t\t\t}\n\t\t\t}).bind(promiseData));\n\n\t\t\tBXMobileApp.onCustomEvent('Livefeed::getPostFullData', {\n\t\t\t\tpostId: postId,\n\t\t\t\treturnEventName: returnEventName\n\t\t\t}, true);\n\t\t});\n\n\t\tpromise.catch((error) => {console.error(error)});\n\n\t\treturn promise;\n\t}\n\n\tprocessPostData(postData)\n\t{\n\t\tconst postId = parseInt(postData.postId);\n\n\t\tconst promise = new Promise((resolve, reject) =>\n\t\t{\n\t\t\tif (Type.isPlainObject(postData.post))\n\t\t\t{\n\t\t\t\tif (Type.isArray(postData.post.PostDestination))\n\t\t\t\t{\n\t\t\t\t\tpostData.recipients = {};\n\n\t\t\t\t\tpostData.post.PostDestination.forEach((item) => {\n\n\t\t\t\t\t\tlet key = null;\n\t\t\t\t\t\tlet code = null;\n\n\t\t\t\t\t\tswitch (item.STYLE)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcase 'users':\n\t\t\t\t\t\t\t\tkey = 'users';\n\t\t\t\t\t\t\t\tcode = item.ID;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 'all-users':\n\t\t\t\t\t\t\t\tkey = 'users';\n\t\t\t\t\t\t\t\tcode = 'A';\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 'sonetgroups':\n\t\t\t\t\t\t\t\tkey = 'groups';\n\t\t\t\t\t\t\t\tcode = item.ID;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 'department':\n\t\t\t\t\t\t\t\tkey = 'departments';\n\t\t\t\t\t\t\t\tcode = item.ID;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (key)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (!Type.isArray(postData.recipients[key]))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tpostData.recipients[key] = [];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tpostData.recipients[key].push({\n\t\t\t\t\t\t\t\tid: code,\n\t\t\t\t\t\t\t\ttitle: item.TITLE,\n\t\t\t\t\t\t\t\tshortTitle: (Type.isStringFilled(item.SHORT_TITLE) ? item.SHORT_TITLE : item.TITLE),\n\t\t\t\t\t\t\t\tavatar: (Type.isStringFilled(item.AVATAR) ? item.AVATAR : ''),\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\n\t\t\t\tif (Type.isArray(postData.post.PostDestinationHidden))\n\t\t\t\t{\n\t\t\t\t\tpostData.hiddenRecipients = [];\n\n\t\t\t\t\tpostData.post.PostDestinationHidden.forEach((item) => {\n\t\t\t\t\t\tpostData.hiddenRecipients.push(item.TYPE + item.ID);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (Type.isPlainObject(postData.group))\n\t\t\t{\n\t\t\t\tpostData.recipients = {\n\t\t\t\t\tgroups: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tid: postData.group.ID,\n\t\t\t\t\t\t\ttitle: postData.group.NAME\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tresolve(postData);\n\t\t});\n\n\t\tpromise.catch((error) => {console.error(error)});\n\n\t\treturn promise;\n\t}\n}\n\nexport {\n\tPostFormManager\n}\n","import {Loc, Type} from 'main.core';\nimport {MobileUtils} from 'mobile.utils';\n\nimport {Instance} from './feed';\n\nclass PostFormOldManager\n{\n\tconstructor()\n\t{\n\t\tthis.postFormParams = {};\n\t\tthis.postFormExtraData = {};\n\t}\n\n\tsetExtraDataArray(extraData)\n\t{\n\t\tlet ob = null;\n\n\t\tfor (const [key, value] of Object.entries(extraData))\n\t\t{\n\t\t\tif (extraData.hasOwnProperty(key))\n\t\t\t{\n\t\t\t\tob = {};\n\t\t\t\tob[key] = value;\n\t\t\t\tthis.setExtraData(ob);\n\t\t\t}\n\t\t}\n\t}\n\n\tsetExtraData(params)\n\t{\n\t\tif (!Type.isPlainObject(params))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tfor (const [key, value] of Object.entries(params))\n\t\t{\n\t\t\tif (\n\t\t\t\t(\n\t\t\t\t\tkey == 'hiddenRecipients'\n\t\t\t\t\t|| key == 'logId'\n\t\t\t\t\t|| key == 'postId'\n\t\t\t\t\t|| key == 'postAuthorId'\n\t\t\t\t\t|| key == 'messageUFCode'\n\t\t\t\t\t|| key == 'commentId'\n\t\t\t\t\t|| key == 'commentType'\n\t\t\t\t\t|| key == 'nodeId'\n\t\t\t\t\t|| key == 'pinnedContext'\n\t\t\t\t)\n\t\t\t)\n\t\t\t{\n\t\t\t\tthis.postFormExtraData[key] = value;\n\t\t\t}\n\t\t}\n\t}\n\n\tgetExtraData()\n\t{\n\t\treturn this.postFormExtraData;\n\t}\n\n\tsetParams(params)\n\t{\n\t\tif (!Type.isPlainObject(params))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tfor (const [key, value] of Object.entries(params))\n\t\t{\n\t\t\tif ([ 'selectedRecipients', 'messageText', 'messageFiles' ].indexOf(key) !== -1)\n\t\t\t{\n\t\t\t\tthis.postFormParams[key] = value;\n\t\t\t}\n\t\t}\n\t}\n\n\taddDestination(selectedDestinations, params)\n\t{\n\t\tif (\n\t\t\t!Type.isPlainObject(params)\n\t\t\t|| !Type.isStringFilled(params.type)\n\t\t)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tlet searchRes = null;\n\n\t\tif (params.type === 'UA')\n\t\t{\n\t\t\tsearchRes = selectedDestinations.a_users.some(this.findDestinationCallBack, { value: 0 });\n\t\t\tif (!searchRes)\n\t\t\t{\n\t\t\t\tselectedDestinations.a_users.push({\n\t\t\t\t\tid: 0,\n\t\t\t\t\tname: Loc.getMessage('MSLPostDestUA'),\n\t\t\t\t\tbubble_background_color: '#A7F264',\n\t\t\t\t\tbubble_text_color: '#54901E',\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\telse if (params.type === 'U')\n\t\t{\n\t\t\tsearchRes = selectedDestinations.a_users.some(this.findDestinationCallBack, { value: params.id });\n\t\t\tif (!searchRes)\n\t\t\t{\n\t\t\t\tselectedDestinations.a_users.push({\n\t\t\t\t\tid: params.id,\n\t\t\t\t\tname: params.name,\n\t\t\t\t\tbubble_background_color: '#BCEDFC',\n\t\t\t\t\tbubble_text_color: '#1F6AB5',\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\telse if (params.type === 'SG')\n\t\t{\n\t\t\tsearchRes = selectedDestinations.b_groups.some(this.findDestinationCallBack, { value: params.id });\n\t\t\tif (!searchRes)\n\t\t\t{\n\t\t\t\tselectedDestinations.b_groups.push({\n\t\t\t\t\tid: params.id,\n\t\t\t\t\tname: params.name,\n\t\t\t\t\tbubble_background_color: '#FFD5D5',\n\t\t\t\t\tbubble_text_color: '#B54827',\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\tfindDestinationCallBack(element, index, array)\n\t{\n\t\treturn (element.id == this.value);\n\t}\n\n\tshow(params)\n\t{\n\t\tif (!Type.isPlainObject(params))\n\t\t{\n\t\t\tparams = {};\n\t\t}\n\n\t\tconst entityType = (\n\t\t\tType.isStringFilled(params.entityType)\n\t\t\t\t? params.entityType\n\t\t\t\t: 'post'\n\t\t);\n\n\t\tconst extraData = this.getExtraData();\n\n\t\tconst postFormParams = {\n\t\t\tattachButton: this.getAttachButton(),\n\t\t\tmentionButton: this.getMentionButton(),\n\t\t\tattachFileSettings: this.getAttachFileSettings(),\n\t\t\textraData: (extraData ? extraData : {}),\n\t\t\tsmileButton: {},\n\t\t\tsupportLocalFilesInText: (entityType === 'post'),\n\t\t\tokButton: {\n\t\t\t\tcallback: (data) => {\n\t\t\t\t\tif (!Type.isStringFilled(data.text))\n\t\t\t\t\t{\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst postData = this.buildRequestStub({\n\t\t\t\t\t\ttype: entityType,\n\t\t\t\t\t\textraData: data.extraData,\n\t\t\t\t\t\ttext: this.parseMentions(data.text),\n\t\t\t\t\t\tpinnedContext: (\n\t\t\t\t\t\t\tType.isStringFilled(data.extraData.pinnedContext)\n\t\t\t\t\t\t\t&&  data.extraData.pinnedContext === 'YES'\n\t\t\t\t\t\t)\n\t\t\t\t\t});\n\n\t\t\t\t\tconst ufCode = data.extraData.messageUFCode;\n\n\t\t\t\t\tthis.buildFiles(\n\t\t\t\t\t\tpostData,\n\t\t\t\t\t\tdata.attachedFiles,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tufCode: ufCode,\n\t\t\t\t\t\t}\n\t\t\t\t\t).then(() => {\n\t\t\t\t\t\tif (entityType !== 'post')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.buildDestinations(\n\t\t\t\t\t\t\tpostData,\n\t\t\t\t\t\t\tdata.selectedRecipients,\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\tType.isPlainObject(data.extraData)\n\t\t\t\t\t\t\t\t&& !Type.isUndefined(data.extraData.hiddenRecipients)\n\t\t\t\t\t\t\t\t\t? data.extraData.hiddenRecipients\n\t\t\t\t\t\t\t\t\t: []\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t{}\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tif (!postData.postVirtualId)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tpostData.ufCode = ufCode;\n\t\t\t\t\t\tpostData.contentType = 'post';\n\n\t\t\t\t\t\toMSL.initPostForm({\n\t\t\t\t\t\t\tgroupId: (params.groupId ? params.groupId : null),\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tBXMobileApp.onCustomEvent('Livefeed.PublicationQueue::setItem', {\n\t\t\t\t\t\t\tkey: postData.postVirtualId,\n\t\t\t\t\t\t\tpinnedContext: !!postData.pinnedContext,\n\t\t\t\t\t\t\titem: postData,\n\t\t\t\t\t\t\tpageId: Instance.getPageId(),\n\t\t\t\t\t\t\tgroupId: (params.groupId ? params.groupId : null)\n\t\t\t\t\t\t}, true);\n\n\t\t\t\t\t}, () => {});\n\t\t\t\t},\n\t\t\t\tname: Loc.getMessage('MSLPostFormSend'),\n\t\t\t},\n\t\t\tcancelButton: {\n\t\t\t\tcallback: () => {\n\t\t\t\t\toMSL.initPostForm({\n\t\t\t\t\t\tgroupId: (params.groupId ? params.groupId : null),\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tname: Loc.getMessage('MSLPostFormCancel'),\n\t\t\t}\n\t\t};\n\n\t\tif (!Type.isUndefined(this.postFormParams.messageText))\n\t\t{\n\t\t\tpostFormParams.message = {\n\t\t\t\ttext: this.postFormParams.messageText,\n\t\t\t};\n\t\t}\n\n\t\tif (!Type.isUndefined(this.postFormParams.messageFiles))\n\t\t{\n\t\t\tpostFormParams.attachedFiles = this.postFormParams.messageFiles;\n\t\t}\n\n\t\tif (entityType === 'post')\n\t\t{\n\t\t\tpostFormParams.recipients = {\n\t\t\t\tdataSource: this.getRecipientsDataSource(),\n\t\t\t};\n\n\t\t\tif (!Type.isUndefined(this.postFormParams.selectedRecipients))\n\t\t\t{\n\t\t\t\tpostFormParams.recipients.selectedRecipients = this.postFormParams.selectedRecipients;\n\t\t\t}\n\n\t\t\tif (!Type.isUndefined(this.postFormParams.backgroundCode))\n\t\t\t{\n\t\t\t\tpostFormParams.backgroundCode = this.postFormParams.backgroundCode;\n\t\t\t}\n\t\t}\n\n\t\treturn postFormParams;\n\t}\n\n\tgetAttachButton()\n\t{\n\t\tconst attachButtonItems = [];\n\n\t\tif (\n\t\t\tLoc.getMessage('MOBILE_EXT_LIVEFEED_DISK_INSTALLED') === 'Y'\n\t\t\t|| Loc.getMessage('MOBILE_EXT_LIVEFEED_WEBDAV_INSTALLED') === 'Y'\n\t\t)\n\t\t{\n\t\t\tconst diskAttachParams = {\n\t\t\t\tid: 'disk',\n\t\t\t\tname: Loc.getMessage('MSLPostFormDisk'),\n\t\t\t\tdataSource: {\n\t\t\t\t\tmultiple: 'NO',\n\t\t\t\t\turl: (\n\t\t\t\t\t\tLoc.getMessage('MOBILE_EXT_LIVEFEED_DISK_INSTALLED') === 'Y'\n\t\t\t\t\t\t\t? `${Loc.getMessage('MOBILE_EXT_LIVEFEED_SITE_DIR')}mobile/?mobile_action=disk_folder_list&type=user&path=%2F&entityId=${Loc.getMessage('USER_ID')}`\n\t\t\t\t\t\t\t: `${Loc.getMessage('MOBILE_EXT_LIVEFEED_SITE_DIR')}mobile/webdav/user/${Loc.getMessage('USER_ID')}/`\n\t\t\t\t\t),\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tconst tableSettings = {\n\t\t\t\tsearchField: 'YES',\n\t\t\t\tshowtitle: 'YES',\n\t\t\t\tmodal: 'YES',\n\t\t\t\tname: Loc.getMessage('MSLPostFormDiskTitle'),\n\t\t\t};\n\n\t\t\t//FIXME temporary workaround\n\t\t\tif (window.platform === 'ios')\n\t\t\t{\n\t\t\t\tdiskAttachParams.dataSource.table_settings = tableSettings;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tdiskAttachParams.dataSource.TABLE_SETTINGS = tableSettings;\n\t\t\t}\n\n\t\t\tattachButtonItems.push(diskAttachParams);\n\t\t}\n\n\t\tattachButtonItems.push({\n\t\t\tid: 'mediateka',\n\t\t\tname: Loc.getMessage('MSLPostFormPhotoGallery'),\n\t\t});\n\n\t\tattachButtonItems.push({\n\t\t\tid: 'camera',\n\t\t\tname: Loc.getMessage('MSLPostFormPhotoCamera'),\n\t\t});\n\n\t\treturn {\n\t\t\titems: attachButtonItems,\n\t\t};\n\t}\n\n\tgetMentionButton()\n\t{\n\t\treturn {\n\t\t\tdataSource: {\n\t\t\t\treturn_full_mode: 'YES',\n\t\t\t\toutsection: 'NO',\n\t\t\t\tokname: Loc.getMessage('MSLPostFormTableOk'),\n\t\t\t\tcancelname: Loc.getMessage('MSLPostFormTableCancel'),\n\t\t\t\tmultiple: 'NO',\n\t\t\t\talphabet_index: 'YES',\n\t\t\t\turl: `${Loc.getMessage('MOBILE_EXT_LIVEFEED_SITE_DIR')}mobile/index.php?mobile_action=get_user_list&use_name_format=Y`,\n\t\t\t}\n\t\t};\n\t}\n\n\tgetAttachFileSettings()\n\t{\n\t\treturn {\n\t\t\tresize: [\n\t\t\t\t40,\n\t\t\t\t1,\n\t\t\t\t1,\n\t\t\t\t1000,\n\t\t\t\t1000,\n\t\t\t\t0,\n\t\t\t\t2,\n\t\t\t\tfalse,\n\t\t\t\ttrue,\n\t\t\t\tfalse,\n\t\t\t\tnull,\n\t\t\t\t0\n\t\t\t],\n\t\t\tsaveToPhotoAlbum: true,\n\t\t};\n\t}\n\n\tbuildRequestStub(params)\n\t{\n\t\tlet request = null;\n\n\t\tif (params.type === 'post')\n\t\t{\n\t\t\trequest = {\n\t\t\t\tACTION: 'ADD_POST',\n\t\t\t\tAJAX_CALL: 'Y',\n\t\t\t\tPUBLISH_STATUS: 'P',\n\t\t\t\tis_sent: 'Y',\n\t\t\t\tapply: 'Y',\n\t\t\t\tsessid: Loc.getMessage('bitrix_sessid'),\n\t\t\t\tPOST_MESSAGE: params.text,\n\t\t\t\tdecode: 'Y',\n\t\t\t\tSPERM: {},\n\t\t\t\tSPERM_NAME: {},\n\t\t\t\tMOBILE: 'Y',\n\t\t\t\tPARSE_PREVIEW: 'Y',\n\t\t\t};\n\n\t\t\tif (\n\t\t\t\t!Type.isUndefined(params.extraData.postId)\n\t\t\t\t&& parseInt(params.extraData.postId) > 0\n\t\t\t)\n\t\t\t{\n\t\t\t\trequest.post_id = parseInt(params.extraData.postId);\n\t\t\t\trequest.post_user_id = parseInt(params.extraData.postAuthorId);\n\t\t\t\trequest.pinnedContext = !!params.pinnedContext;\n\n\t\t\t\trequest.ACTION = 'EDIT_POST';\n\n\t\t\t\tif (\n\t\t\t\t\t!Type.isUndefined(params.extraData.logId)\n\t\t\t\t\t&& parseInt(params.extraData.logId) > 0\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\trequest.log_id = parseInt(params.extraData.logId);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse if (\n\t\t\tparams.type === 'comment'\n\t\t\t&& !Type.isUndefined(params.extraData.commentId)\n\t\t\t&& parseInt(params.extraData.commentId) > 0\n\t\t\t&& Type.isStringFilled(params.extraData.commentType)\n\t\t)\n\t\t{\n\t\t\trequest = {\n\t\t\t\taction: 'EDIT_COMMENT',\n\t\t\t\ttext: this.parseMentions(params.text),\n\t\t\t\tcommentId: parseInt(params.extraData.commentId),\n\t\t\t\tnodeId: params.extraData.nodeId,\n\t\t\t\tsessid: Loc.getMessage('bitrix_sessid'),\n\t\t\t};\n\n\t\t\tif (params.extraData.commentType === 'blog')\n\t\t\t{\n\t\t\t\trequest.comment_post_id = null;\n\t\t\t}\n\t\t}\n\n\t\treturn request;\n\t}\n\n\tparseMentions(text)\n\t{\n\t\tlet parsedText = text;\n\n\t\tif (typeof oMSL.arMention != 'undefined')\n\t\t{\n\t\t\tfor (const [key, value] of Object.entries(oMSL.arMention))\n\t\t\t{\n\t\t\t\tparsedText = parsedText.replace(new RegExp(key, 'g'), value);\n\t\t\t}\n\n\t\t\toMSL.arMention = {};\n\t\t\toMSL.commentTextCurrent = '';\n\t\t}\n\n\t\treturn parsedText;\n\t}\n\n\tbuildFiles(postData, attachedFiles, params)\n\t{\n\t\tconst promise = new Promise((resolve, reject) => {\n\t\t\tconst ufCode = params.ufCode;\n\n\t\t\tpostData.postVirtualId = parseInt(Math.random() * 100000);\n\t\t\tpostData.tasksList = [];\n\n\t\t\tif (\n\t\t\t\tType.isArray(attachedFiles)\n\t\t\t\t&& attachedFiles.length > 0\n\t\t\t)\n\t\t\t{\n\t\t\t\tlet readedFileCount = 0;\n\t\t\t\tconst fileTotal = attachedFiles.length;\n\t\t\t\tconst fileCountIncrement = () => {\n\t\t\t\t\treadedFileCount++;\n\t\t\t\t\tif(readedFileCount >= fileTotal)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.postProgressingFiles(postData, attachedFiles, params);\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tconst uploadTasks = [];\n\n\t\t\t\tattachedFiles.forEach((fileData) => {\n\t\t\t\t\tconst isFileFromBitrix24Disk = (\n\t\t\t\t\t\t!Type.isUndefined(fileData.VALUE) // Android\n\t\t\t\t\t\t|| (\n\t\t\t\t\t\t\t!Type.isUndefined(fileData.id)\n\t\t\t\t\t\t\t&& parseInt(fileData.id) > 0\n\t\t\t\t\t\t) // disk object\n\t\t\t\t\t\t|| (\n\t\t\t\t\t\t\tType.isPlainObject(fileData.dataAttributes)\n\t\t\t\t\t\t\t&& !Type.isUndefined(fileData.dataAttributes.VALUE)\n\t\t\t\t\t\t) // iOS and modern Android too\n\t\t\t\t\t\t|| (\n\t\t\t\t\t\t\tType.isStringFilled(fileData.ufCode)\n\t\t\t\t\t\t\t&& fileData.ufCode === ufCode\n\t\t\t\t\t\t)\n\t\t\t\t\t);\n\n\t\t\t\t\tconst isNewFileOnDevice = (\n\t\t\t\t\t\tType.isUndefined(fileData.url)\n\t\t\t\t\t\t|| !Type.isNumber(fileData.id)\n\t\t\t\t\t);\n\n\t\t\t\t\tif (\n\t\t\t\t\t\tType.isStringFilled(fileData.url)\n\t\t\t\t\t\t&& isNewFileOnDevice\n\t\t\t\t\t\t&& !isFileFromBitrix24Disk\n\t\t\t\t\t)\n\t\t\t\t\t{\n\t\t\t\t\t\tconst taskId = `postTask_${parseInt(Math.random() * 100000)}`;\n\t\t\t\t\t\tconst mimeType = MobileUtils.getFileMimeType(fileData.type);\n\n\t\t\t\t\t\tuploadTasks.push({\n\t\t\t\t\t\t\ttaskId: taskId,\n\t\t\t\t\t\t\ttype: fileData.type,\n\t\t\t\t\t\t\tmimeType: mimeType,\n\t\t\t\t\t\t\tfolderId: parseInt(Loc.getMessage('MOBILE_EXT_UTILS_USER_FOLDER_FOR_SAVED_FILES')),\n//\t\t\t\t\t\t\tchunk: parseInt(Loc.getMessage('MOBILE_EXT_UTILS_MAX_UPLOAD_CHUNK_SIZE')),\n\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\tpostVirtualId: postData.postVirtualId,\n\t\t\t\t\t\t\t\tpinnedContext: !!postData.pinnedContext\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tname: (MobileUtils.getUploadFilename(fileData.name, fileData.type)),\n\t\t\t\t\t\t\turl: fileData.url,\n\t\t\t\t\t\t\tpreviewUrl: (fileData.previewUrl ? fileData.previewUrl : null),\n\t\t\t\t\t\t\tresize: MobileUtils.getResizeOptions(fileData.type)\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tpostData.tasksList.push(taskId);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tif (isFileFromBitrix24Disk)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (Type.isUndefined(postData[ufCode]))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tpostData[ufCode] = [];\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (!Type.isUndefined(fileData.VALUE))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tpostData[ufCode].push(fileData.VALUE);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (parseInt(fileData.id) > 0)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tpostData[ufCode].push(parseInt(fileData.id));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tpostData[ufCode].push(fileData.dataAttributes.VALUE);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfileCountIncrement();\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tif (uploadTasks.length > 0)\n\t\t\t\t{\n\t\t\t\t\tBXMobileApp.onCustomEvent('onFileUploadTaskReceived', {\n\t\t\t\t\t\tfiles: uploadTasks,\n\t\t\t\t\t}, true);\n\t\t\t\t}\n\t\t\t\tresolve();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.postProgressingFiles(postData, attachedFiles, params);\n\t\t\t\tresolve();\n\t\t\t}\n\t\t});\n\n\t\tpromise.catch((error) => {console.error(error)});\n\n\t\treturn promise;\n\t}\n\n\tbuildDestinations(postData, selectedRecipients, hiddenRecipients, params)\n\t{\n\t\tpostData['DEST'] = [];\n\n\t\tif (Type.isPlainObject(selectedRecipients.a_users))\n\t\t{\n\t\t\tfor (const [key, userData] of Object.entries(selectedRecipients.a_users))\n\t\t\t{\n\t\t\t\tconst prefix = 'U';\n\n\t\t\t\tif (Type.isUndefined(postData.SPERM[prefix]))\n\t\t\t\t{\n\t\t\t\t\tpostData.SPERM[prefix] = [];\n\t\t\t\t}\n\n\t\t\t\tif (Type.isUndefined(postData.SPERM_NAME[prefix]))\n\t\t\t\t{\n\t\t\t\t\tpostData.SPERM_NAME[prefix] = [];\n\t\t\t\t}\n\n\t\t\t\tconst id = (\n\t\t\t\t\t!Type.isUndefined(userData.ID)\n\t\t\t\t\t\t? userData.ID\n\t\t\t\t\t\t: userData.id\n\t\t\t\t);\n\n\t\t\t\tconst name = (\n\t\t\t\t\t!Type.isUndefined(userData.NAME)\n\t\t\t\t\t\t? userData.NAME\n\t\t\t\t\t\t: userData.name\n\t\t\t\t);\n\n\t\t\t\tconst value = (\n\t\t\t\t\tparseInt(id) === 0\n\t\t\t\t\t\t? 'UA'\n\t\t\t\t\t\t: `U${id}`\n\t\t\t\t);\n\n\t\t\t\tpostData.SPERM[prefix].push(value);\n\t\t\t\tpostData.DEST.push(value);\n\t\t\t\tpostData.SPERM_NAME[prefix].push(name);\n\t\t\t}\n\t\t}\n\n\t\tif (Type.isPlainObject(selectedRecipients.b_groups))\n\t\t{\n\t\t\tfor (const [key, groupData] of Object.entries(selectedRecipients.b_groups))\n\t\t\t{\n\t\t\t\tconst prefix = 'SG';\n\n\t\t\t\tif (Type.isUndefined(postData.SPERM[prefix]))\n\t\t\t\t{\n\t\t\t\t\tpostData.SPERM[prefix] = [];\n\t\t\t\t}\n\n\t\t\t\tif (Type.isUndefined(postData.SPERM_NAME[prefix]))\n\t\t\t\t{\n\t\t\t\t\tpostData.SPERM_NAME[prefix] = [];\n\t\t\t\t}\n\n\t\t\t\tconst id = (\n\t\t\t\t\t!Type.isUndefined(groupData.ID)\n\t\t\t\t\t\t? groupData.ID\n\t\t\t\t\t\t: groupData.id\n\t\t\t\t);\n\n\t\t\t\tconst name = (\n\t\t\t\t\t!Type.isUndefined(groupData.NAME)\n\t\t\t\t\t\t? groupData.NAME\n\t\t\t\t\t\t: groupData.name\n\t\t\t\t);\n\n\t\t\t\tconst value = `SG${id}`;\n\n\t\t\t\tpostData.SPERM[prefix].push(value);\n\t\t\t\tpostData.DEST.push(value);\n\t\t\t\tpostData.SPERM_NAME[prefix].push(name);\n\t\t\t}\n\t\t}\n\n\t\tfor (const key in hiddenRecipients)\n\t\t{\n\t\t\tif (!hiddenRecipients.hasOwnProperty(key))\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst prefix = hiddenRecipients[key].TYPE;\n\t\t\tif (Type.isUndefined(postData.SPERM[prefix]))\n\t\t\t{\n\t\t\t\tpostData.SPERM[prefix] = [];\n\t\t\t}\n\n\t\t\tconst value = `${hiddenRecipients[key].TYPE}${hiddenRecipients[key].ID}`;\n\n\t\t\tpostData.SPERM[prefix].push(value);\n\t\t\tpostData.DEST.push(value);\n\t\t}\n\t}\n\n\tgetRecipientsDataSource()\n\t{\n\t\treturn {\n\t\t\treturn_full_mode: 'YES',\n\t\t\toutsection: (Loc.getMessage('MOBILE_EXT_LIVEFEED_DEST_TO_ALL_DENIED') !== 'Y' ? 'YES' : 'NO'),\n\t\t\tokname: Loc.getMessage('MSLPostFormTableOk'),\n\t\t\tcancelname: Loc.getMessage('MSLPostFormTableCancel'),\n\t\t\tmultiple: 'YES',\n\t\t\talphabet_index: 'YES',\n\t\t\tshowtitle: 'YES',\n\t\t\tuser_all: 'YES',\n\t\t\turl: `${Loc.getMessage('MOBILE_EXT_LIVEFEED_SITE_DIR')}mobile/index.php?mobile_action=${(Loc.getmessage('MOBILE_EXT_LIVEFEED_CURRENT_EXTRANET_SITE') === 'Y' ? 'get_group_list' : 'get_usergroup_list')}&feature=blog`,\n\t\t};\n\t}\n\n\tpostProgressingFiles(postData, attachedFiles, params)\n\t{\n\t\tconst ufCode = params.ufCode;\n\t\tif (Type.isUndefined(postData[ufCode]))\n\t\t{\n\t\t\tpostData[ufCode] = [];\n\t\t}\n\n\t\tif (Type.isUndefined(attachedFiles))\n\t\t{\n\t\t\tattachedFiles = [];\n\t\t}\n\n\t\tfor (const keyOld in this.postFormParams.messageFiles) /* existing */\n\t\t{\n\t\t\tif (!this.postFormParams.messageFiles.hasOwnProperty(keyOld))\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tfor (const keyNew in attachedFiles)\n\t\t\t{\n\t\t\t\tif (!attachedFiles.hasOwnProperty(keyNew))\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\tthis.postFormParams.messageFiles[keyOld].id == attachedFiles[keyNew].id\n\t\t\t\t\t|| this.postFormParams.messageFiles[keyOld].id == attachedFiles[keyNew].ID\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tpostData[ufCode].push(this.postFormParams.messageFiles[keyOld].id);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (postData[ufCode].length <= 0)\n\t\t{\n\t\t\tpostData[ufCode].push('empty');\n\t\t}\n\t}\n}\n\nexport {\n\tPostFormOldManager,\n}","import {Dom, Type, Tag, Loc} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\nimport {Post} from \"./post\";\nimport {Ajax} from 'mobile.ajax';\nimport {PageInstance} from './feed';\n\nclass PinnedPanel\n{\n\tconstructor()\n\t{\n\t\tthis.panelInitialized = false;\n\n\t\tthis.class = {\n\n\t\t\tpanel: 'lenta-pinned-panel',\n\t\t\tpanelCollapsed: 'lenta-pinned-panel-collapsed',\n\t\t\tpanelActive: 'lenta-pinned-panel-active',\n\n\t\t\tcollapsedPanel: 'lenta-pinned-collapsed-posts',\n\t\t\tcollapsedPanelPostsValue: 'lenta-pinned-collapsed-count-posts',\n\t\t\tcollapsedPanelComments: 'lenta-pinned-collapsed-posts-comments',\n\t\t\tcollapsedPanelCommentsShown: 'lenta-pinned-collapsed-posts-comments-active',\n\t\t\tcollapsedPanelCommentsValue: 'lenta-pinned-collapsed-count-comments',\n\t\t\tcollapsedPanelCommentsValueNew: 'post-item-inform-right-new-value',\n\n\t\t\tcollapsedPanelExpandButton: 'lenta-pinned-collapsed-posts-btn',\n\n\t\t\tpost: 'lenta-item',\n\n\t\t\tpostItemPinned: 'lenta-item-pinned',\n\t\t\tpostItemPinActive: 'lenta-item-pin-active',\n\n\t\t\tpostItemPinnedBlock: 'post-item-pinned-block',\n\t\t\tpostItemPinnedTitle: 'post-item-pinned-title',\n\t\t\tpostItemPinnedTextBox: 'post-item-pinned-text-box',\n\t\t\tpostItemPinnedDesc: 'post-item-pinned-desc',\n\n\t\t\tcancelPanel: 'post-pinned-cancel-panel',\n\t\t\tcancelPanelButton: 'post-pinned-cancel-panel-btn'\n\t\t};\n\n\t\tthis.init();\n\t\tEventEmitter.subscribe('onFrameDataProcessed', () => {\n\t\t\tthis.init();\n\t\t});\n\t}\n\n\tinit()\n\t{\n\t\tconst panel = document.querySelector(`.${this.class.panel}`);\n\t\tif (\n\t\t\t!panel\n\t\t\t|| this.panelInitialized\n\t\t)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.panelInitialized = true;\n\n\t\tthis.adjustCollapsedPostsPanel();\n\t\tconst collapsedPanel = document.querySelector(`.${this.class.collapsedPanel}`);\n\t\tif (collapsedPanel)\n\t\t{\n\t\t\tcollapsedPanel.addEventListener('touchend', (e) => {\n\t\t\t\tthis.expandCollapsedPostsPanel();\n\n\t\t\t\te.stopPropagation();\n\t\t\t\treturn e.preventDefault();\n\t\t\t});\n\t\t}\n\t}\n\n\tresetFlags()\n\t{\n\t\tthis.panelInitialized = false;\n\t}\n\n\tgetPinnedPanelNode()\n\t{\n\t\treturn document.querySelector('[data-livefeed-pinned-panel]');\n\t}\n\n\trecalcPanel({type})\n\t{\n\t\tif (this.getPostsCount() > 0)\n\t\t{\n\t\t\tthis.getPinnedPanelNode().classList.add(`${this.class.panelActive}`);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.getPinnedPanelNode().classList.remove(`${this.class.panelActive}`);\n\t\t}\n\n\t\tthis.recalcCollapsedPostsPanel({type})\n\t}\n\n\trecalcCollapsedPostsPanel({type})\n\t{\n\t\tif (this.getPostsCount() >= Loc.getMessage('MOBILE_EXT_LIVEFEED_COLLAPSED_PINNED_PANEL_ITEMS_LIMIT'))\n\t\t{\n\t\t\tif (\n\t\t\t\ttype === 'insert'\n\t\t\t\t|| this.getPinnedPanelNode().classList.contains(`${this.class.panelCollapsed}`)\n\t\t\t)\n\t\t\t{\n\t\t\t\tthis.getPinnedPanelNode().classList.add(`${this.class.panelCollapsed}`);\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.getPinnedPanelNode().classList.remove(`${this.class.panelCollapsed}`);\n\t\t}\n\n\t\tthis.adjustCollapsedPostsPanel();\n\t}\n\n\texpandCollapsedPostsPanel()\n\t{\n\t\tthis.getPinnedPanelNode().classList.remove(`${this.class.panelCollapsed}`);\n\t}\n\n\tgetPostsCount()\n\t{\n\t\treturn Array.from(this.getPinnedPanelNode().getElementsByClassName(`${this.class.post}`)).length;\n\t}\n\n\tadjustCollapsedPostsPanel()\n\t{\n\t\tconst postsCounter = this.getPostsCount();\n\t\tconst postsCounterNode = this.getPinnedPanelNode().querySelector(`.${this.class.collapsedPanelPostsValue}`);\n\n\t\tif (postsCounterNode)\n\t\t{\n\t\t\tpostsCounterNode.innerHTML = parseInt(postsCounter);\n\t\t}\n\n\t\tconst commentsCounterNode = this.getPinnedPanelNode().querySelector(`.${this.class.collapsedPanelComments}`);\n\t\tconst commentsCounterValueNode = this.getPinnedPanelNode().querySelector(`.${this.class.collapsedPanelCommentsValue}`);\n\n\t\tif (\n\t\t\tcommentsCounterNode\n\t\t\t&& commentsCounterValueNode\n\t\t)\n\t\t{\n\t\t\tconst newCommentCounter = Array.from(this.getPinnedPanelNode().querySelectorAll(`.${this.class.collapsedPanelCommentsValueNew}`)).reduce((acc, node) => {\n\t\t\t\treturn acc + parseInt(node.innerHTML);\n\t\t\t}, 0);\n\n\t\t\tcommentsCounterValueNode.innerHTML = '+' + newCommentCounter;\n\t\t\tif (newCommentCounter > 0)\n\t\t\t{\n\t\t\t\tcommentsCounterNode.classList.add(`${this.class.collapsedPanelCommentsShown}`);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tcommentsCounterNode.classList.remove(`${this.class.collapsedPanelCommentsShown}`);\n\t\t\t}\n\t\t}\n\t}\n\n\tgetPinnedData(params)\n\t{\n\t\tconst logId = (params.logId ? parseInt(params.logId) : 0);\n\n\t\tif (logId <= 0)\n\t\t{\n\t\t\treturn Promise.reject();\n\t\t}\n\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tAjax.runAction('socialnetwork.api.livefeed.logentry.getPinData', {\n\t\t\t\tdata: {\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tlogId: logId\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}).then((response) => {\n\t\t\t\tif (response.status === 'success')\n\t\t\t\t{\n\t\t\t\t\tresolve(response.data);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\treject(response.errors);\n\t\t\t\t}\n\t\t\t}, (response) => {\n\t\t\t\treject();\n\t\t\t});\n\t\t})\n\t}\n\n\tinsertEntry({\n\t\tlogId,\n\t\tpostNode,\n\t\tpinnedContent\n\t})\n\t{\n\t\tconst pinnedPanelNode = this.getPinnedPanelNode();\n\n\t\tif (\n\t\t\t!Type.isDomNode(postNode)\n\t\t\t|| !Type.isDomNode(pinnedPanelNode)\n\t\t)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst postItemPinnedBlock = postNode.querySelector(`.${this.class.postItemPinnedBlock}`);\n\n\t\tif (!Type.isDomNode(postItemPinnedBlock))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tpostNode.classList.add(this.class.postItemPinned);\n\t\tpostNode.classList.add(this.class.postItemPinActive);\n\n\t\tpostItemPinnedBlock.innerHTML = `${(Type.isStringFilled(pinnedContent.TITLE) ? `<div class=\"${this.class.postItemPinnedTitle}\">${pinnedContent.TITLE}</div>` : '')}<div class=\"${this.class.postItemPinnedTextBox}\"><div class=\"${this.class.postItemPinnedDesc}\">${pinnedContent.DESCRIPTION}</div></div>`;\n\n\t\tconst cancelPinnedPanel = Tag.render`<div class=\"${this.class.cancelPanel}\" data-livefeed-id=\"${logId}\">\n\t\t\t<div class=\"post-pinned-cancel-panel-content\">\n\t\t\t\t<div class=\"post-pinned-cancel-panel-label\">${Loc.getMessage('MOBILE_EXT_LIVEFEED_POST_PINNED_CANCEL_TITLE')}</div>\n\t\t\t\t\t<div class=\"post-pinned-cancel-panel-text\">${Loc.getMessage('MOBILE_EXT_LIVEFEED_POST_PINNED_CANCEL_DESCRIPTION')}</div>\n\t\t\t\t</div>\n\t\t\t<div class=\"ui-btn ui-btn-light-border ui-btn-round ui-btn-sm ${this.class.cancelPanelButton}\">${Loc.getMessage('MOBILE_EXT_LIVEFEED_POST_PINNED_CANCEL_BUTTON')}</div>\n\t\t</div>`;\n\n\t\tconst cancelButton = cancelPinnedPanel.querySelector(`.${this.class.cancelPanelButton}`);\n\t\tcancelButton.addEventListener('touchend', (event) => {\n\n\t\t\tconst cancelPanel = event.currentTarget.closest(`.${this.class.cancelPanel}`);\n\t\t\tif (!cancelPanel)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst logId = parseInt(cancelPanel.getAttribute('data-livefeed-id'));\n\t\t\tif (logId <= 0)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst postNode = document.querySelector(`.${this.class.post}[data-livefeed-id=\"${logId}\"]`);\n\t\t\tif (!postNode)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst menuNode = postNode.querySelector('[data-menu-type=\"post\"]');\n\t\t\tif (!menuNode)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst postInstance = new Post({\n\t\t\t\tlogId\n\t\t\t});\n\n\t\t\treturn postInstance.setPinned({\n\t\t\t\tmenuNode: menuNode,\n\t\t\t\tcontext: 'list'\n\t\t\t});\n\t\t});\n\n\t\tpostNode.parentNode.insertBefore(cancelPinnedPanel, postNode);\n\t\tDom.prepend(postNode, pinnedPanelNode);\n\n\t\tthis.recalcPanel({\n\t\t\ttype: 'insert'\n\t\t});\n\t\tPageInstance.onScroll();\n\t}\n\n\textractEntry({\n\t\tlogId,\n\t\tpostNode,\n\t\tcontainerNode\n\t})\n\t{\n\t\tconst pinnedPanelNode = this.getPinnedPanelNode();\n\n\t\tif (\n\t\t\t!Type.isDomNode(postNode)\n\t\t\t|| !Type.isDomNode(containerNode)\n\t\t\t|| !Type.isDomNode(pinnedPanelNode)\n\t\t\t|| postNode.parentNode !== pinnedPanelNode\n\t\t\t|| parseInt(logId) <= 0\n\t\t)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tpostNode.classList.remove(this.class.postItemPinned);\n\t\tpostNode.classList.remove(this.class.postItemPinActive);\n\n\t\tconst cancelPanel = document.querySelector(`.${this.class.cancelPanel}[data-livefeed-id=\"${parseInt(logId)}\"]`);\n\t\tif (cancelPanel)\n\t\t{\n\t\t\tcancelPanel.parentNode.insertBefore(postNode, cancelPanel);\n\t\t\tDom.remove(cancelPanel);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.prepend(postNode, containerNode);\n\t\t}\n\n\t\tthis.recalcPanel({\n\t\t\ttype: 'extract'\n\t\t});\n\t}\n}\n\nexport {\n\tPinnedPanel\n}","import {EventEmitter} from 'main.core.events';\n\nclass Rating extends EventEmitter\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis.init();\n\t}\n\n\tinit()\n\t{\n\t\tthis.setEventNamespace('BX.Mobile.Livefeed');\n\t\tthis.subscribe('onFeedInit', this.onFeedInit.bind(this));\n\t}\n\n\tonFeedInit()\n\t{\n\t\tif (!window.BXRL)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tObject.keys(window.BXRL).forEach((key) => {\n\t\t\tif (\n\t\t\t\tkey !== 'manager'\n\t\t\t\t&& key !== 'render'\n\t\t\t)\n\t\t\t{\n\t\t\t\tdelete window.BXRL[key];\n\t\t\t}\n\t\t});\n\t}\n}\n\nexport {\n\tRating\n}","import {Event, Type} from 'main.core';\nimport {Ajax} from 'mobile.ajax';\n\nclass ImportantManager\n{\n\tconstructor()\n\t{\n\n\t}\n\n\tsetPostRead(node)\n\t{\n\t\tif (\n\t\t\t!Type.isDomNode(node)\n\t\t\t|| node.hasAttribute('done')\n\t\t)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tconst postId = parseInt(node.getAttribute('bx-data-post-id'));\n\t\tif (postId <= 0)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.renderRead({\n\t\t\tnode: node,\n\t\t\tvalue: true,\n\t\t});\n\n\t\tAjax.runAction('socialnetwork.api.livefeed.blogpost.important.vote', {\n\t\t\tdata: {\n\t\t\t\tparams: {\n\t\t\t\t\tPOST_ID : postId,\n\t\t\t\t}\n\t\t\t},\n\t\t}).then((response) => {\n\t\t\tif (\n\t\t\t\t!Type.isStringFilled(response.data.success)\n\t\t\t\t|| response.data.success !== 'Y'\n\t\t\t)\n\t\t\t{\n\t\t\t\tthis.renderRead({\n\t\t\t\t\tnode: node,\n\t\t\t\t\tvalue: false,\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tBXMobileApp.onCustomEvent('onLogEntryImpPostRead', {\n\t\t\t\t\tpostId: postId,\n\t\t\t\t}, true);\n\t\t\t}\n\t\t}, (response) => {\n\t\t\tthis.renderRead({\n\t\t\t\tnode: node,\n\t\t\t\tvalue: false,\n\t\t\t});\n\t\t});\n\n\t\treturn true;\n\t}\n\n\trenderRead(params)\n\t{\n\t\tif (\n\t\t\t!Type.isObject(params)\n\t\t\t|| !Type.isDomNode(params.node)\n\t\t)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst node = params.node;\n\t\tconst value = !!params.value;\n\n\t\tif (value)\n\t\t{\n\t\t\tnode.checked = true;\n\t\t\tnode.setAttribute('done', 'Y');\n\t\t\tEvent.unbindAll(node);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tnode.checked = false;\n\t\t\tdelete node.checked;\n\t\t\tnode.removeAttribute('done');\n\t\t}\n\n\t\tconst container = node.closest('.post-item-important');\n\t\tif (!container)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst listNode = container.querySelector('.post-item-important-list');\n\t\tif (!listNode)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tlistNode.classList.add('post-item-important-list-read');\n\t}\n}\n\nexport {\n\tImportantManager,\n}","import {Instance, PageInstance} from './feed';\nimport {Post} from './post';\nimport {Type, Runtime} from 'main.core';\nimport {BaseEvent, EventEmitter} from 'main.core.events';\n\nclass SearchBar extends EventEmitter\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis.findTextMode = false;\n\t\tthis.ftMinTokenSize = 3;\n\t\tthis.hideByRefresh = false;\n\t}\n\n\tinit(params)\n\t{\n\t\tif (BXMobileAppContext.getApiVersion() < Instance.getApiVersion('pageMenu'))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (Type.isPlainObject(params) && parseInt(params.ftMinTokenSize) > 0)\n\t\t{\n\t\t\tthis.ftMinTokenSize = parseInt(params.ftMinTokenSize);\n\t\t}\n\n\t\tthis.subscribe('onSearchBarCancelButtonClicked', this.searchBarEventCallback.bind(this));\n\t\tthis.subscribe('onSearchBarSearchButtonClicked', this.searchBarEventCallback.bind(this));\n\t\tEventEmitter.subscribe('BX.MobileLivefeed.SearchBar::setHideByRefresh', this.setHideByRefresh.bind(this));\n\t\tEventEmitter.subscribe('BX.MobileLivefeed.SearchBar::unsetHideByRefresh', this.unsetHideByRefresh.bind(this));\n\n\t\tBXMobileApp.UI.Page.params.set({\n\t\t\tuseSearchBar: true,\n\t\t});\n\n\t\tapp.exec('setParamsSearchBar', {\n\t\t\tparams: {\n\t\t\t\tcallback: (event) => {\n\t\t\t\t\tif (\n\t\t\t\t\t\tevent.eventName === 'onSearchButtonClicked'\n\t\t\t\t\t\t&& Type.isPlainObject(event.data)\n\t\t\t\t\t\t&& Type.isStringFilled(event.data.text)\n\t\t\t\t\t)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (event.data.text.length >= this.ftMinTokenSize)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.findTextMode = true;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.emit('onSearchBarSearchButtonClicked', new BaseEvent({\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\ttext: event.data.text,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t}));\n\t\t\t\t\t}\n\t\t\t\t\telse if ([ 'onCancelButtonClicked', 'onSearchHide' ].includes(event.eventName))\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.emit('onSearchBarCancelButtonClicked', new BaseEvent({\n\t\t\t\t\t\t\tdata: {},\n\t\t\t\t\t\t}));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tsearchBarEventCallback(event)\n\t{\n\t\tconst eventData = event.getData();\n\t\tconst text = (Type.isPlainObject(eventData) && Type.isStringFilled(eventData.text) ? eventData.text : '');\n\n\t\tif (text.length >= this.ftMinTokenSize)\n\t\t{\n\t\t\tapp.exec('showSearchBarProgress');\n\t\t\tthis.emitRefreshEvent(text);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (this.findTextMode)\n\t\t\t{\n\t\t\t\tif (!this.hideByRefresh)\n\t\t\t\t{\n\t\t\t\t\tEventEmitter.emit('BX.MobileLF:onSearchBarRefreshAbort');\n\t\t\t\t}\n\n\t\t\t\tif (BX.frameCache)\n\t\t\t\t{\n\t\t\t\t\tapp.exec('hideSearchBarProgress');\n\n\t\t\t\t\tBX.frameCache.readCacheWithID('framecache-block-feed', (params) => {\n\n\t\t\t\t\t\tconst container = document.getElementById('bxdynamic_feed_refresh');\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t!Type.isArray(params.items)\n\t\t\t\t\t\t\t|| !container\n\t\t\t\t\t\t)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.emitRefreshEvent();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst block = params.items.find(item => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\tType.isStringFilled(item.ID)\n\t\t\t\t\t\t\t\t&& item.ID === 'framecache-block-feed'\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif (Type.isUndefined(block))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tRuntime.html(container, block.CONTENT).then(() => {\n\t\t\t\t\t\t\tBX.processHTML(block.CONTENT, true);\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tPost.moveTop();\n\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tBitrixMobile.LazyLoad.showImages();\n\t\t\t\t\t\t}, 1000);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.emitRefreshEvent();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.findTextMode = false;\n\t\t}\n\t}\n\n\tsetHideByRefresh()\n\t{\n\t\tthis.hideByRefresh = true;\n\t}\n\n\tunsetHideByRefresh()\n\t{\n\t\tthis.hideByRefresh = false;\n\t}\n\n\n\temitRefreshEvent(text)\n\t{\n\t\tif (PageInstance.refreshXhr)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\ttext = text || '';\n\n\t\tconst event = new BaseEvent({\n\t\t\tcompatData: [{\n\t\t\t\ttext: text,\n\t\t\t}],\n\t\t});\n\t\tEventEmitter.emit('BX.MobileLF:onSearchBarRefreshStart', event);\n\t}\n}\n\nexport {\n\tSearchBar\n}","import {Instance} from './feed';\n\nclass PageScroll\n{\n\tconstructor()\n\t{\n\t\tthis.canCheckScrollButton = true;\n\t\tthis.showScrollButtonTimeout = null;\n\t\tthis.showScrollButtonBottom = false;\n\t\tthis.showScrollButtonTop = false;\n\n\t\tthis.class = {\n\t\t\tscrollButton: 'post-comment-block-scroll',\n\t\t\tscrollButtonTop: 'post-comment-block-scroll-top',\n\t\t\tscrollButtonBottom: 'post-comment-block-scroll-bottom',\n\t\t\tscrollButtonTopActive: 'post-comment-block-scroll-top-active',\n\t\t\tscrollButtonBottomActive: 'post-comment-block-scroll-bottom-active',\n\t\t};\n\n\t\tthis.init();\n\t}\n\n\tinit()\n\t{\n\t\tif (window.platform === 'ios')\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tdocument.addEventListener('scroll', this.onScrollDetail.bind(this));\n\t}\n\n\tonScrollDetail()\n\t{\n\t\tif (!this.canCheckScrollButton)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tclearTimeout(this.showScrollButtonTimeout);\n\t\tthis.showScrollButtonTimeout = setTimeout(() => {\n\t\t\tInstance.setLastActivityDate();\n\t\t\tthis.checkScrollButton();\n\t\t}, 200);\n\t}\n\n\tcheckScrollButton()\n\t{\n\t\tconst scrollTop = window.scrollY; // document.body.scrollTop\n\t\tconst maxScroll = (document.documentElement.scrollHeight - window.innerHeight - 100); // (this.keyboardShown ? 500 : 300)\n\n\t\tthis.showScrollButtonBottom = !(\n\t\t\t((document.documentElement.scrollHeight - window.innerHeight) <= 0) // short page\n\t\t\t|| (\n\t\t\t\tscrollTop >= maxScroll // too much low\n\t\t\t\t&& (\n\t\t\t\t\tscrollTop > 0 // refresh patch\n\t\t\t\t\t|| maxScroll > 0\n\t\t\t\t)\n\t\t\t)\n\t\t);\n\n\t\tthis.showScrollButtonTop = (scrollTop > 200);\n\t\tthis.showHideScrollButton();\n\t}\n\n\tshowHideScrollButton()\n\t{\n\t\tconst postScrollButtonBottom = document.querySelector(`.${this.class.scrollButtonBottom}`);\n\t\tconst postScrollButtonTop = document.querySelector(`.${this.class.scrollButtonTop}`);\n\n\t\tif (postScrollButtonBottom)\n\t\t{\n\t\t\tif (this.showScrollButtonBottom)\n\t\t\t{\n\t\t\t\tif (!postScrollButtonBottom.classList.contains(`${this.class.scrollButtonBottomActive}`))\n\t\t\t\t{\n\t\t\t\t\tpostScrollButtonBottom.classList.add(`${this.class.scrollButtonBottomActive}`);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (postScrollButtonBottom.classList.contains(`${this.class.scrollButtonBottomActive}`))\n\t\t\t\t{\n\t\t\t\t\tpostScrollButtonBottom.classList.remove(`${this.class.scrollButtonBottomActive}`);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (postScrollButtonTop)\n\t\t{\n\t\t\tif (this.showScrollButtonTop)\n\t\t\t{\n\t\t\t\tif (!postScrollButtonTop.classList.contains(`${this.class.scrollButtonTopActive}`))\n\t\t\t\t{\n\t\t\t\t\tpostScrollButtonTop.classList.add(`${this.class.scrollButtonTopActive}`);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (postScrollButtonTop.classList.contains(`${this.class.scrollButtonTopActive}`))\n\t\t\t\t{\n\t\t\t\t\tpostScrollButtonTop.classList.remove(`${this.class.scrollButtonTopActive}`);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tscrollTo(type)\n\t{\n\t\tif (type !== 'top')\n\t\t{\n\t\t\ttype = 'bottom';\n\t\t}\n\n\t\tthis.canCheckScrollButton = false;\n\t\tthis.showScrollButtonBottom = false;\n\t\tthis.showScrollButtonTop = false;\n\n\t\tthis.showHideScrollButton();\n\n\t\tconst startValue = window.scrollY; // document.body.scrollTop\n\t\tconst finishValue = (type == 'bottom' ? document.documentElement.scrollHeight : 0);\n\n\t\tBitrixAnimation.animate({\n\t\t\tduration : 500,\n\t\t\tstart : { scroll : startValue },\n\t\t\tfinish : { scroll : finishValue },\n\t\t\ttransition : BitrixAnimation.makeEaseOut(BitrixAnimation.transitions.quart),\n\t\t\tstep : function(state)\n\t\t\t{\n\t\t\t\twindow.scrollTo(0, state.scroll);\n\t\t\t},\n\t\t\tcomplete : () => {\n\t\t\t\tthis.canCheckScrollButton = true;\n\t\t\t\tthis.checkScrollButton();\n\t\t\t}\n\t\t});\n\t}\n}\n\nexport {\n\tPageScroll,\n}","import {Type,Loc} from 'main.core';\nimport {Ajax} from 'mobile.ajax';\nimport {Instance,PageMenuInstance} from './feed';\n\nclass FollowManager\n{\n\tconstructor()\n\t{\n\t\tthis.defaultValue = true;\n\t\tthis.value = true;\n\n\t\tthis.class = {\n\t\t\tpostItemFollow: 'post-item-follow',\n\t\t\tpostItemFollowActive: 'post-item-follow-active',\n\t\t};\n\t}\n\n\tinit()\n\t{\n\t}\n\n\tsetFollow(params)\n\t{\n\t\tconst logId = (!Type.isUndefined(params.logId) ? parseInt(params.logId) : 0);\n\t\tconst pageId = (!Type.isUndefined(params.pageId) ? params.pageId : false);\n\t\tconst runEvent = (!Type.isUndefined(params.bRunEvent) ? params.bRunEvent : true);\n\t\tconst useAjax = (!Type.isUndefined(params.bAjax) ? params.bAjax : false);\n\n\t\tlet turnOnOnly = (typeof params.bOnlyOn != 'undefined' ? params.bOnlyOn : false);\n\t\tif (turnOnOnly == 'NO')\n\t\t{\n\t\t\tturnOnOnly = false;\n\t\t}\n\n\t\tlet menuNode = null;\n\t\tif (Type.isDomNode(params.menuNode))\n\t\t{\n\t\t\tmenuNode = params.menuNode;\n\t\t}\n\t\telse if (Type.isStringFilled(params.menuNode))\n\t\t{\n\t\t\tmenuNode = document.getElementById(params.menuNode);\n\t\t}\n\n\t\tif (!menuNode)\n\t\t{\n\t\t\tmenuNode = document.getElementById(`log-entry-menu-${logId}`);\n\t\t}\n\n\t\tlet followBlock = document.getElementById(`log_entry_follow_${logId}`);\n\t\tif (!followBlock)\n\t\t{\n\t\t\tfollowBlock = document.getElementById(`log_entry_follow`);\n\t\t}\n\n\t\tlet followWrap = document.getElementById(`post_item_top_wrap_${logId}`);\n\t\tif (!followWrap)\n\t\t{\n\t\t\tfollowWrap = document.getElementById(`post_item_top_wrap`);\n\t\t}\n\n\t\tlet oldValue = null;\n\t\tif (menuNode)\n\t\t{\n\t\t\toldValue = (menuNode.getAttribute('data-follow') === 'Y' ? 'Y' : 'N');\n\t\t}\n\t\telse if (followBlock)\n\t\t{\n\t\t\toldValue = (followBlock.getAttribute('data-follow') == 'Y' ? 'Y' : 'N');\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tconst newValue = (oldValue === 'Y' ? 'N' : 'Y');\n\n\t\tif (\n\t\t\t(\n\t\t\t\t!Type.isStringFilled(Instance.getOption('detailPageId'))\n\t\t\t\t|| Instance.getOption('detailPageId') !== pageId\n\t\t\t)\n\t\t\t&& (\n\t\t\t\t!turnOnOnly\n\t\t\t\t|| oldValue === 'N'\n\t\t\t)\n\t\t)\n\t\t{\n\t\t\tthis.drawFollow({\n\t\t\t\tvalue: (oldValue !== 'Y'),\n\t\t\t\tfollowBlock: followBlock,\n\t\t\t\tfollowWrap: followWrap,\n\t\t\t\tmenuNode: menuNode,\n\t\t\t\trunEvent: runEvent,\n\t\t\t\tturnOnOnly: turnOnOnly,\n\t\t\t\tlogId: logId,\n\t\t\t});\n\t\t}\n\n\t\tif (useAjax)\n\t\t{\n\t\t\tAjax.runAction('socialnetwork.api.livefeed.changeFollow', {\n\t\t\t\tdata: {\n\t\t\t\t\tlogId: logId,\n\t\t\t\t\tvalue: newValue,\n\t\t\t\t},\n\t\t\t\tanalyticsLabel: {\n\t\t\t\t\tb24statAction: (newValue === 'Y' ? 'setFollow' : 'setUnfollow'),\n\t\t\t\t}\n\t\t\t}).then((response) => {\n\t\t\t\tif (response.data.success)\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.drawFollow({\n\t\t\t\t\tvalue: (oldValue === 'Y'),\n\t\t\t\t\tfollowBlock: followBlock,\n\t\t\t\t\tfollowWrap: followWrap,\n\t\t\t\t\tmenuNode: menuNode,\n\t\t\t\t\trunEvent: true,\n\t\t\t\t\tturnOnOnly: turnOnOnly,\n\t\t\t\t\tlogId: logId,\n\t\t\t\t});\n\t\t\t}, (response) => {\n\t\t\t\tthis.drawFollow({\n\t\t\t\t\tvalue: (oldValue === 'Y'),\n\t\t\t\t\tfollowBlock: followBlock,\n\t\t\t\t\tfollowWrap: followWrap,\n\t\t\t\t\tmenuNode: menuNode,\n\t\t\t\t\trunEvent: false,\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tdrawFollow(params)\n\t{\n\t\tconst value = (Type.isBoolean(params.value) ? params.value : null);\n\t\tif (Type.isNull(value))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst followBlock = (Type.isDomNode(params.followBlock) ? params.followBlock : null);\n\t\tif (followBlock)\n\t\t{\n\t\t\tfollowBlock.classList.remove(value ? this.class.postItemFollow : this.class.postItemFollowActive);\n\t\t\tfollowBlock.classList.add(value ? this.class.postItemFollowActive : this.class.postItemFollow);\n\t\t\tfollowBlock.setAttribute('data-follow', (value ? 'Y' : 'N'));\n\t\t}\n\n\t\tconst followWrap = (Type.isDomNode(params.followWrap) ? params.followWrap : null);\n\t\tif (\n\t\t\tfollowWrap\n\t\t\t&& !this.getFollowDefaultValue()\n\t\t)\n\t\t{\n\t\t\tif (value)\n\t\t\t{\n\t\t\t\tfollowWrap.classList.add(this.class.postItemFollow);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tfollowWrap.classList.remove(this.class.postItemFollow);\n\t\t\t}\n\t\t}\n\n\t\tconst menuNode = (Type.isDomNode(params.menuNode) ? params.menuNode : null);\n\t\tif (menuNode)\n\t\t{\n\t\t\tmenuNode.setAttribute('data-follow', (value ? 'Y' : 'N'));\n\t\t}\n\n\t\tconst detailPageId = Instance.getOption('detailPageId');\n\n\t\tif (Type.isStringFilled(detailPageId))\n\t\t{\n\t\t\tthis.setFollowValue(value);\n\t\t\tthis.setFollowMenuItemName();\n\t\t}\n\n\t\tconst runEvent = (Type.isBoolean(params.runEvent) ? params.runEvent : false);\n\t\tconst logId = (!Type.isUndefined(params.logId) ? parseInt(params.logId) : 0);\n\t\tconst turnOnOnly = (Type.isBoolean(params.turnOnOnly) ? params.turnOnOnly : false);\n\n\t\tif (\n\t\t\trunEvent\n\t\t\t&& logId > 0\n\t\t)\n\t\t{\n\t\t\tBXMobileApp.onCustomEvent('onLogEntryFollow', {\n\t\t\t\tlogId: logId,\n\t\t\t\tpageId: (Type.isStringFilled(detailPageId) ? detailPageId : ''),\n\t\t\t\tbOnlyOn: (turnOnOnly ? 'Y' : 'N')\n\t\t\t}, true);\n\t\t}\n\t}\n\n\tsetFollowDefault(params)\n\t{\n\t\tif (Type.isUndefined(params.value))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst value = !!params.value;\n\n\t\tif (!Type.isStringFilled(Instance.getOption('detailPageId')))\n\t\t{\n\t\t\tthis.setFollowDefaultValue(value);\n\t\t\tthis.setDefaultFollowMenuItemName();\n\t\t}\n\n\t\tvar postData = {\n\t\t\tsessid: BX.bitrix_sessid(),\n\t\t\tsite: Loc.getMessage('SITE_ID'),\n\t\t\tlang: Loc.getMessage('LANGUAGE_ID'),\n\t\t\tvalue: (value ? 'Y' : 'N'),\n\t\t\taction: 'change_follow_default',\n\t\t\tmobile_action: 'change_follow_default',\n\t\t};\n\n\t\toMSL.changeListMode(\n\t\t\tpostData,\n\t\t\t() => {\n\t\t\t\toMSL.pullDownAndRefresh();\n\t\t\t},\n\t\t\t(response) => {\n\t\t\t\tthis.setFollowDefaultValue(response.value !== 'Y');\n\t\t\t\tthis.setDefaultFollowMenuItemName();\n\t\t\t}\n\t\t);\n\t}\n\n\tsetFollowValue(value)\n\t{\n\t\tthis.value = !!value;\n\t}\n\n\tgetFollowValue()\n\t{\n\t\treturn this.value;\n\t}\n\n\tsetFollowDefaultValue(value)\n\t{\n\t\tthis.defaultValue = !!value;\n\t}\n\n\tgetFollowDefaultValue()\n\t{\n\t\treturn this.defaultValue;\n\t}\n\n\tsetFollowMenuItemName()\n\t{\n\t\tconst menuItemIndex = PageMenuInstance.detailPageMenuItems.findIndex(item => {\n\t\t\treturn (\n\t\t\t\tType.isStringFilled(item.feature)\n\t\t\t\t&& item.feature === 'follow'\n\t\t\t);\n\t\t});\n\n\t\tif (menuItemIndex < 0)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst menuItem = PageMenuInstance.detailPageMenuItems[menuItemIndex];\n\n\t\tmenuItem.name = (\n\t\t\tthis.getFollowValue()\n\t\t\t\t? Loc.getMessage('MOBILE_EXT_LIVEFEED_POST_MENU_FOLLOW_Y')\n\t\t\t\t: Loc.getMessage('MOBILE_EXT_LIVEFEED_POST_MENU_FOLLOW_N')\n\t\t);\n\t\tPageMenuInstance.detailPageMenuItems[menuItemIndex] = menuItem;\n\t\tPageMenuInstance.init({\n\t\t\ttype: 'detail',\n\t\t});\n\t}\n\n\tsetDefaultFollowMenuItemName ()\n\t{\n\t\tconst menuItemIndex = PageMenuInstance.listPageMenuItems.findIndex(item => {\n\t\t\treturn (\n\t\t\t\tType.isStringFilled(item.feature)\n\t\t\t\t&& item.feature === 'follow'\n\t\t\t);\n\t\t});\n\n\t\tif (menuItemIndex < 0)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst menuItem = PageMenuInstance.listPageMenuItems[menuItemIndex];\n\n\t\tmenuItem.name = (\n\t\t\tthis.getFollowDefaultValue()\n\t\t\t\t? Loc.getMessage('MSLMenuItemFollowDefaultY')\n\t\t\t\t: Loc.getMessage('MSLMenuItemFollowDefaultN')\n\t\t);\n\t\tPageMenuInstance.listPageMenuItems[menuItemIndex] = menuItem;\n\t\tPageMenuInstance.init({\n\t\t\ttype: 'list',\n\t\t});\n\t}\n}\n\nexport {\n\tFollowManager\n}","import {Instance, PageMenuInstance, PageScrollInstance} from './feed';\nimport {Post} from './post';\n\nimport {Loc, Type, Dom, Tag, Runtime} from 'main.core';\nimport {Ajax} from 'mobile.ajax';\nimport {BaseEvent, EventEmitter} from 'main.core.events';\n\nclass Comments\n{\n\tconstructor()\n\t{\n\t\tthis.emptyCommentsXhr = null;\n\t\tthis.repoLog = {};\n\t\tthis.mid = {};\n\n\t\tthis.init();\n\t}\n\n\tinit()\n\t{\n\t\tEventEmitter.subscribe('OnUCommentWasDeleted', this.deleteHandler.bind(this));\n\t\tEventEmitter.subscribe('OnUCommentWasHidden', this.deleteHandler.bind(this));\n\t\tEventEmitter.subscribe('OnUCRecordHasDrawn', this.drawHandler.bind(this));\n\t\tEventEmitter.subscribe('OnUCFormSubmit', this.submitHandler.bind(this));\n\t}\n\n\tdeleteHandler(event)\n\t{\n\t\tconst [ ENTITY_XML_ID, id ] = event.getData();\n\t\tconst logId = Instance.getLogId();\n\n\t\tif (this.mid[id.join('-')] !== 'hidden')\n\t\t{\n\t\t\tthis.mid[id.join('-')] = 'hidden';\n\n\t\t\tif (this.repoLog[logId])\n\t\t\t{\n\t\t\t\tthis.repoLog[logId]['POST_NUM_COMMENTS']--;\n\t\t\t\tBXMobileApp.onCustomEvent('onLogEntryCommentsNumRefresh', {\n\t\t\t\t\tlog_id: logId,\n\t\t\t\t\tnum: this.repoLog[logId]['POST_NUM_COMMENTS']\n\t\t\t\t}, true);\n\t\t\t}\n\t\t}\n\t}\n\n\tdrawHandler(event)\n\t{\n\t\tconst [ ENTITY_XML_ID, id ] = event.getData();\n\t\tconst logId = Instance.getLogId();\n\n\t\tthis.mid[ENTITY_XML_ID] = (this.mid[ENTITY_XML_ID] || {});\n\t\tif (this.mid[id.join('-')] !== 'drawn')\n\t\t{\n\t\t\tthis.mid[id.join('-')] = 'drawn';\n\t\t\tlet node = false;\n\n\t\t\tif (\n\t\t\t\tthis.repoLog[logId]\n\t\t\t\t&& (node = document.getElementById(`record-${id.join('-')}-cover`))\n\t\t\t\t&& node\n\t\t\t\t&& node.parentNode == document.getElementById(`record-${ENTITY_XML_ID}-new`)\n\t\t\t)\n\t\t\t{\n\t\t\t\tthis.repoLog[logId]['POST_NUM_COMMENTS']++;\n\t\t\t\tBXMobileApp.onCustomEvent('onLogEntryCommentsNumRefresh', {\n\t\t\t\t\tlog_id: logId,\n\t\t\t\t\tnum: this.repoLog[logId]['POST_NUM_COMMENTS']\n\t\t\t\t}, true);\n\t\t\t}\n\t\t}\n\t}\n\n\tsubmitHandler(event)\n\t{\n\t\tconst [ entity_xml_id, id, obj, post_data ] = event.getData();\n\n\t\tif (\n\t\t\tpost_data\n\t\t\t&& post_data.mobile_action\n\t\t\t&& post_data.mobile_action === 'add_comment'\n\t\t\t&& id > 0\n\t\t)\n\t\t{\n\t\t\tpost_data.mobile_action = post_data.action = 'edit_comment';\n\t\t\tpost_data.edit_id = id;\n\t\t}\n\t}\n\n\tsetRepoItem(id, data)\n\t{\n\t\tthis.repoLog[id] = data;\n\t}\n\n\tgetList(params)\n\t{\n\t\tconst timestampValue = params.ts;\n\t\tconst pullDown = !!params.bPullDown;\n\t\tconst pullDownTop = (Type.isUndefined(params.bPullDownTop) || params.bPullDownTop);\n\n\t\tconst moveBottom = (\n\t\t\tType.isUndefined(params.obFocus.form)\n\t\t\t|| params.obFocus.form === 'NO'\n\t\t\t\t? 'NO'\n\t\t\t\t: 'YES'\n\t\t);\n\t\tconst moveTop = (\n\t\t\tType.isUndefined(params.obFocus.comments)\n\t\t\t|| params.obFocus.comments === 'NO'\n\t\t\t\t? 'NO'\n\t\t\t\t: 'YES'\n\t\t);\n\t\tconst logId = oMSL.logId;\n\t\tconst container = document.getElementById('post-comments-wrap');\n\n\t\tif (!pullDown)\n\t\t{\n\t\t\tif (pullDownTop)\n\t\t\t{\n\t\t\t\tBXMobileApp.UI.Page.Refresh.start();\n\t\t\t}\n\n\t\t\tDom.clean(container);\n\t\t\tcontainer.appendChild(Tag.render`<span id=\"post-comment-last-after\"></span>`);\n\t\t}\n\n\t\tthis.showEmptyListWaiter({\n\t\t\tcontainer: container,\n\t\t\tenable: true,\n\t\t});\n\n\t\tEventEmitter.emit('BX.MobileLF:onCommentsGet');\n\t\tBXMobileApp.UI.Page.TextPanel.hide();\n\n\t\tthis.emptyCommentsXhr = Ajax.wrap({\n\t\t\ttype: 'json',\n\t\t\tmethod: 'GET',\n\t\t\turl: `${Loc.getMessage('MSLPathToLogEntry').replace(\"#log_id#\", logId)}&empty_get_comments=Y${(!Type.isNil(timestampValue) ? `&LAST_LOG_TS=${timestampValue}` : '')}`,\n\t\t\tdata: {},\n\t\t\tprocessData: true,\n\t\t\tcallback: (response) => {\n\n\t\t\t\tconst formWrap = document.getElementById('post-comments-form-wrap');\n\n\t\t\t\tif (pullDown)\n\t\t\t\t{\n\t\t\t\t\tapp.exec('pullDownLoadingStop');\n\t\t\t\t}\n\t\t\t\telse if (pullDownTop)\n\t\t\t\t{\n\t\t\t\t\tBXMobileApp.UI.Page.Refresh.stop();\n\t\t\t\t}\n\n\t\t\t\tthis.showEmptyListWaiter({\n\t\t\t\t\tcontainer: container,\n\t\t\t\t\tenable: false,\n\t\t\t\t});\n\n\t\t\t\tif (Type.isStringFilled(response.POST_PERM))\n\t\t\t\t{\n\t\t\t\t\toMSL.menuData.post_perm = response.POST_PERM;\n\t\t\t\t\tPageMenuInstance.detailPageMenuItems = PageMenuInstance.buildDetailPageMenu(oMSL.menuData);\n\t\t\t\t\tPageMenuInstance.init({\n\t\t\t\t\t\ttype: 'detail',\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tif (Type.isStringFilled(response.TEXT))\n\t\t\t\t{\n\t\t\t\t\tif (pullDown)\n\t\t\t\t\t{\n\t\t\t\t\t\tDom.clean(container);\n\t\t\t\t\t\tif (!Type.isUndefined(response.POST_NUM_COMMENTS))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tBXMobileApp.onCustomEvent('onLogEntryCommentsNumRefresh', {\n\t\t\t\t\t\t\t\tlog_id: logId,\n\t\t\t\t\t\t\t\tnum: parseInt(response.POST_NUM_COMMENTS)\n\t\t\t\t\t\t\t}, true);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.setRepoItem(logId, {\n\t\t\t\t\t\tPOST_NUM_COMMENTS: response.POST_NUM_COMMENTS\n\t\t\t\t\t});\n\n\t\t\t\t\tconst contentData = BX.processHTML(response.TEXT, true);\n\n\t\t\t\t\tRuntime.html(container, contentData.HTML).then(() => {\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tBitrixMobile.LazyLoad.showImages();\n\t\t\t\t\t\t}, 1000);\n\t\t\t\t\t});\n\t\t\t\t\tcontainer.appendChild(Tag.render`<span id=\"post-comment-last-after\"></span>`);\n\n\t\t\t\t\tlet cnt = 0;\n\t\t\t\t\tconst func = () => {\n\t\t\t\t\t\tcnt++;\n\t\t\t\t\t\tif (cnt < 100)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (container.childNodes.length > 0)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tBX.ajax.processScripts(contentData.SCRIPT);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tBX.defer(func, this)();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\tBX.defer(func, this)();\n\n\t\t\t\t\tconst event = new BaseEvent({\n\t\t\t\t\t\tcompatData: [{\n\t\t\t\t\t\t\tmobile: true,\n\t\t\t\t\t\t\tajaxUrl: `${Loc.getMessage('MOBILE_EXT_LIVEFEED_SITE_DIR')}mobile/ajax.php`,\n\t\t\t\t\t\t\tcommentsContainerId: 'post-comments-wrap',\n\t\t\t\t\t\t\tcommentsClassName: 'post-comment-wrap',\n\t\t\t\t\t\t}],\n\t\t\t\t\t});\n\t\t\t\t\tEventEmitter.emit('BX.UserContentView.onInitCall', event);\n\t\t\t\t\tEventEmitter.emit('BX.UserContentView.onClearCall', event);\n\n\t\t\t\t\tif (!pullDown) // redraw form\n\t\t\t\t\t{\n\t\t\t\t\t\tif (formWrap)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tformWrap.innerHTML = '';\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t__MSLDetailPullDownInit(true);\n\n\t\t\t\t\t\tif (moveBottom === 'YES')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.setFocusOnComments('form');\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (moveTop == 'YES')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.setFocusOnComments('list');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tInstance.setLastActivityDate();\n\t\t\t\t\tPageScrollInstance.checkScrollButton();\n\n\t\t\t\t\tconst logIdContainer = document.getElementById('post_log_id');\n\t\t\t\t\tif (\n\t\t\t\t\t\t!Type.isUndefined(response.TS)\n\t\t\t\t\t\t&& logIdContainer\n\t\t\t\t\t)\n\t\t\t\t\t{\n\t\t\t\t\t\tlogIdContainer.setAttribute('data-ts', response.TS);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tif (!pullDown)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.showEmptyListWaiter({\n\t\t\t\t\t\t\tcontainer: container,\n\t\t\t\t\t\t\tenable: false,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tapp.alert({\n\t\t\t\t\t\ttitle: Loc.getMessage('MOBILE_EXT_LIVEFEED_ALERT_ERROR_TITLE'),\n\t\t\t\t\t\ttext: Loc.getMessage('MOBILE_EXT_LIVEFEED_ALERT_ERROR_POST_NOT_FOUND_TEXT'),\n\t\t\t\t\t\tbutton: Loc.getMessage('MOBILE_EXT_LIVEFEED_ALERT_ERROR_BUTTON'),\n\t\t\t\t\t\tcallback: () => {\n\t\t\t\t\t\t\tBXMobileApp.onCustomEvent('Livefeed::onLogEntryDetailNotFound', {\n\t\t\t\t\t\t\t\tlogId: logId,\n\t\t\t\t\t\t\t}, true);\n\t\t\t\t\t\t\tBXMPage.close();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t\tcallback_failure: () => {\n\t\t\t\tif (pullDown)\n\t\t\t\t{\n\t\t\t\t\tapp.exec('pullDownLoadingStop');\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tBXMobileApp.UI.Page.Refresh.stop();\n\t\t\t\t}\n\t\t\t\tthis.showEmptyListWaiter({\n\t\t\t\t\tcontainer: container,\n\t\t\t\t\tenable: false,\n\t\t\t\t});\n\t\t\t\tthis.showEmptyListFailed({\n\t\t\t\t\tcontainer,\n\t\t\t\t\ttimestampValue,\n\t\t\t\t\tpullDown,\n\t\t\t\t\tmoveBottom\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\tshowEmptyListWaiter(params)\n\t{\n\t\tconst container = params.container;\n\t\tconst enable = !!params.enable;\n\n\t\tif (!Type.isDomNode(container))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst waiterNode = container.querySelector('.post-comments-load-btn-wrap');\n\t\tif (waiterNode)\n\t\t{\n\t\t\tDom.clean(waiterNode);\n\t\t\tDom.remove(waiterNode);\n\t\t}\n\n\t\tif (!enable)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tcontainer.appendChild(Tag.render`<div class=\"post-comments-load-btn-wrap\"><div class=\"post-comments-loader\"></div><div class=\"post-comments-load-text\">${Loc.getMessage('MSLDetailCommentsLoading')}</div></div>`);\n\t}\n\n\tshowEmptyListFailed(params)\n\t{\n\t\tconst {\n\t\t\tcontainer,\n\t\t\ttimestampValue,\n\t\t\tpullDown,\n\t\t\tmoveBottom,\n\t\t\tdata,\n\t\t} = params;\n\n\n\t\tif (!Type.isDomNode(container))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst errorMessage = (\n\t\t\tType.isObject(data)\n\t\t\t&& Type.isStringFilled(data.ERROR_MESSAGE)\n\t\t\t\t? data.ERROR_MESSAGE\n\t\t\t\t: Loc.getMessage('MSLDetailCommentsFailed')\n\t\t);\n\n\t\tcontainer.appendChild(Tag.render`<div class=\"post-comments-load-btn-wrap\"><div class=\"post-comments-load-text\">${errorMessage}</div><a class=\"post-comments-load-btn\">${Loc.getMessage('MSLDetailCommentsReload')}</a></div>`);\n\t\tconst button = container.querySelector('.post-comments-load-btn');\n\t\tif (!button)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tbutton.addEventListener('click', (event) => {\n\t\t\tif (Type.isDomNode(event.target.parent))\n\t\t\t{\n\t\t\t\tDom.clean(event.target.parent);\n\t\t\t\tDom.remove(event.target.parent);\n\t\t\t}\n\n\t\t\t// repeat get comments request (after error shown)\n\t\t\tthis.getList({\n\t\t\t\tts: timestampValue,\n\t\t\t\tbPullDown: pullDown,\n\t\t\t\tobFocus: {\n\t\t\t\t\tform: false,\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\tbutton.addEventListener('touchstart', (event) => { event.target.classList.add('post-comments-load-btn-active'); });\n\t\tbutton.addEventListener('touchend', (event) => { event.target.classList.remove('post-comments-load-btn-active'); });\n\t}\n\n\tabortXhr()\n\t{\n\t\tif (this.emptyCommentsXhr)\n\t\t{\n\t\t\tthis.emptyCommentsXhr.abort();\n\t\t}\n\t}\n\n\tsetFocusOnComments(type)\n\t{\n\t\ttype = (type === 'list' ? 'list' : 'form');\n\n\t\tif (type === 'form')\n\t\t{\n\t\t\tthis.setFocusOnCommentForm();\n\t\t\tPost.moveBottom();\n\t\t}\n\t\telse if (type === 'list')\n\t\t{\n\t\t\tconst container = document.getElementById('post-comments-wrap');\n\t\t\tif (!container)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tconst firstNewComment = container.querySelector('.post-comment-block-new');\n\t\t\tif (firstNewComment)\n\t\t\t{\n\t\t\t\twindow.scrollTo(0, firstNewComment.offsetTop);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tvar firstComment = BX.findChild(container, { className : 'post-comment-block' }, true);\n\t\t\t\twindow.scrollTo(0, (firstComment ? firstComment.offsetTop : 0));\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tsetFocusOnCommentForm()\n\t{\n\t\tBXMobileApp.UI.Page.TextPanel.focus();\n\t\treturn false;\n\t}\n\n\tonLogEntryCommentAdd(logId, value) // for the feed\n\t{\n\t\tlet newValue;\n\n\t\tconst valuePassed = (!Type.isUndefined(value));\n\n\t\tvalue = (!Type.isUndefined(value) ? parseInt(value) : 0);\n\n\t\tconst container = document.getElementById(`informer_comments_${logId}`);\n\t\tconst containerNew = document.getElementById(`informer_comments_new_${logId}`);\n\n\t\tif (\n\t\t\tcontainer\n\t\t\t&& !containerNew\n\t\t) // detail page\n\t\t{\n\t\t\tif (value > 0)\n\t\t\t{\n\t\t\t\tnewValue = value;\n\t\t\t}\n\t\t\telse if (!valuePassed)\n\t\t\t{\n\t\t\t\tnewValue = (container.innerHTML.length > 0 ? parseInt(container.innerHTML) : 0) + 1;\n\t\t\t}\n\n\t\t\tif (parseInt(newValue) > 0)\n\t\t\t{\n\t\t\t\tcontainer.innerHTML = newValue;\n\t\t\t\tcontainer.style.display = 'inline-block';\n\n\t\t\t\tif (document.getElementById(`informer_comments_text2_${logId}`))\n\t\t\t\t{\n\t\t\t\t\tdocument.getElementById(`informer_comments_text2_${logId}`).style.display = 'inline-block';\n\t\t\t\t}\n\t\t\t\tif (document.getElementById(`informer_comments_text_${logId}`))\n\t\t\t\t{\n\t\t\t\t\tdocument.getElementById(`informer_comments_text_${logId}`).style.display = 'none';\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst containerAll = document.getElementById('comcntleave-all');\n\t\tif (containerAll) // more comments\n\t\t{\n\t\t\tif (value > 0)\n\t\t\t{\n\t\t\t\tnewValue = value;\n\t\t\t}\n\t\t\telse if (!valuePassed)\n\t\t\t{\n\t\t\t\tnewValue = (containerAll.innerHTML.length > 0 ? parseInt(containerAll.innerHTML) : 0) + 1;\n\t\t\t}\n\t\t\tcontainerAll.innerHTML = newValue;\n\t\t}\n\t}\n}\n\nexport {\n\tComments\n}","import {Type, Dom, Loc, Uri, ajax} from 'main.core';\nimport {EventEmitter, BaseEvent} from 'main.core.events';\nimport {Ajax} from 'mobile.ajax';\n\nimport {\n\tInstance,\n\tBalloonNotifierInstance,\n\tNextPageLoaderInstance,\n\tNotificationBarInstance,\n\tPinnedPanelInstance,\n} from './feed';\n\nclass Page\n{\n\tconstructor()\n\t{\n\t\tthis.isBusyGettingNextPage = false;\n\t\tthis.isBusyRefreshing = false;\n\n\t\tthis.pageNumber = 1;\n\t\tthis.nextPageXhr = null;\n\t\tthis.refreshXhr = null;\n\n\t\tthis.nextUrl = '';\n\n\t\tthis.requestErrorTimeout = {\n\t\t\trefresh: null,\n\t\t\tnextPage: null,\n\t\t};\n\n\t\tthis.class = {\n\t\t\tnotifier: 'lenta-notifier-waiter',\n\t\t\tnotifierActive: 'lenta-notifier-shown',\n\t\t};\n\n\t\tthis.onScroll = this.onScroll.bind(this);\n\t\tthis.refreshErrorScroll = this.refreshErrorScroll.bind(this);\n\t\tthis.nextPageErrorScroll = this.nextPageErrorScroll.bind(this);\n\n\t\tthis.init();\n\t}\n\n\tinit()\n\t{\n\t\tthis.setPageNumber(1);\n\t}\n\n\tinitScroll(enable, process_waiter)\n\t{\n\t\tenable = !!enable;\n\t\tprocess_waiter = !!process_waiter;\n\n\t\tif (enable)\n\t\t{\n\t\t\tdocument.removeEventListener('scroll', this.onScroll);\n\t\t\tdocument.addEventListener('scroll', this.onScroll);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tdocument.removeEventListener('scroll', this.onScroll);\n\t\t}\n\n\t\tif (\n\t\t\tprocess_waiter\n\t\t\t&& document.getElementById('next_post_more')\n\t\t)\n\t\t{\n\t\t\tdocument.getElementById('next_post_more').style.display = (enable ? 'block' : 'none');\n\t\t}\n\t};\n\n\tonScroll()\n\t{\n\t\tconst deviceMaxScroll = Instance.getMaxScroll();\n\n\t\tif (!(\n\t\t\t(\n\t\t\t\twindow.pageYOffset >= deviceMaxScroll\n\t\t\t\t|| document.documentElement.scrollHeight <= window.innerHeight // when small workarea\n\t\t\t)\n\t\t\t&& (\n\t\t\t\twindow.pageYOffset > 0 // refresh patch\n\t\t\t\t|| deviceMaxScroll > 0\n\t\t\t)\n\t\t\t&& !this.isBusyRefreshing\n\t\t\t&& !this.isBusyGettingNextPage\n\t\t))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (Instance.getOption('preventNextPage', false) === true)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tdocument.removeEventListener('scroll', this.onScroll);\n\n\t\tthis.isBusyGettingNextPage = true;\n\n\t\tthis.nextPageXhr = Ajax.wrap({\n\t\t\ttype: 'json',\n\t\t\tmethod: 'GET',\n\t\t\turl: this.getNextPageUrl(),\n\t\t\tdata: '',\n\t\t\tcallback: (data) => {\n\t\t\t\tthis.nextPageXhr = null;\n\n\t\t\t\tif (\n\t\t\t\t\tType.isPlainObject(data)\n\t\t\t\t\t&& Type.isPlainObject(data.PROPS)\n\t\t\t\t\t&& Type.isStringFilled(data.PROPS.CONTENT)\n\t\t\t\t\t&& (\n\t\t\t\t\t\tType.isUndefined(data.LAST_TS)\n\t\t\t\t\t\t|| parseInt(data.LAST_TS) <= 0\n\t\t\t\t\t\t|| parseInt(Loc.getMessage('MSLFirstPageLastTS')) <= 0\n\t\t\t\t\t\t|| parseInt(data.LAST_TS) < parseInt(Loc.getMessage('MSLFirstPageLastTS'))\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tthis.processAjaxBlock(data.PROPS, {\n\t\t\t\t\t\ttype: 'next',\n\t\t\t\t\t\tcallback: () => {\n\t\t\t\t\t\t\tInstance.recalcMaxScroll();\n\n\t\t\t\t\t\t\toMSL.registerBlocksToCheck();\n\t\t\t\t\t\t\tsetTimeout(oMSL.checkNodesHeight.bind(oMSL), 100);\n\n\t\t\t\t\t\t\tEventEmitter.emit('BX.UserContentView.onRegisterViewAreaListCall', new BaseEvent({\n\t\t\t\t\t\t\t\tcompatData: [{\n\t\t\t\t\t\t\t\t\tcontainerId: 'lenta_wrapper',\n\t\t\t\t\t\t\t\t\tclassName: 'post-item-contentview',\n\t\t\t\t\t\t\t\t\tfullContentClassName: 'post-item-full-content',\n\t\t\t\t\t\t\t\t}],\n\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tlet pageNumber = this.getPageNumber();\n\n\t\t\t\t\tif (\n\t\t\t\t\t\tparseInt(Loc.getMessage('MSLPageNavNum')) > 0\n\t\t\t\t\t\t&& pageNumber > 0\n\t\t\t\t\t)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.setPageNumber(pageNumber + 1);\n\t\t\t\t\t\tlet nextUrl = Uri.removeParam(this.getNextPageUrl(), ['PAGEN_' + Loc.getMessage('MSLPageNavNum')]);\n\t\t\t\t\t\tnextUrl = Uri.addParam(nextUrl, {\n\t\t\t\t\t\t\t[`PAGEN_${parseInt(Loc.getMessage('MSLPageNavNum'))}`]: (this.getPageNumber() + 1),\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tthis.setNextPageUrl(nextUrl);\n\t\t\t\t\t}\n\n\t\t\t\t\tdocument.addEventListener('scroll', this.onScroll);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.requestError('nextPage', true);\n\t\t\t\t}\n\n\t\t\t\tthis.isBusyGettingNextPage = false;\n\t\t\t},\n\t\t\tcallback_failure: () => {\n\t\t\t\tthis.requestError('nextPage', true);\n\t\t\t\tthis.nextPageXhr = null;\n\t\t\t\tthis.isBusyGettingNextPage = false;\n\t\t\t}\n\t\t});\n\t}\n\n\trefresh(bScroll, params)\n\t{\n\t\tbScroll = !!bScroll;\n\n\t\tif (\n\t\t\tthis.isBusyGettingNextPage\n\t\t\t&& !Type.isNull(this.nextPageXhr)\n\t\t)\n\t\t{\n\t\t\tthis.nextPageXhr.abort();\n\t\t}\n\n\t\tconst notifier = document.getElementById('lenta_notifier');\n\t\tif (notifier)\n\t\t{\n\t\t\tnotifier.classList.add(this.class.notifier);\n\t\t}\n\n\t\tInstance.setRefreshNeeded(false);\n\t\tInstance.setRefreshStarted(true);\n\t\tBalloonNotifierInstance.hideRefreshNeededNotifier();\n\t\tNextPageLoaderInstance.startWaiter();\n\t\tNotificationBarInstance.hideAll();\n\n\t\tthis.isBusyRefreshing = true;\n\n\t\tlet reloadUrl = Uri.removeParam(document.location.href, [ 'RELOAD', 'RELOAD_JSON', 'FIND' ]);\n\t\treloadUrl = Uri.addParam(reloadUrl, {\n\t\t\tRELOAD: 'Y',\n\t\t\tRELOAD_JSON: 'Y',\n\t\t});\n\n\t\tif (\n\t\t\tType.isPlainObject(params)\n\t\t\t&& Type.isStringFilled(params.find)\n\t\t)\n\t\t{\n\t\t\treloadUrl = Uri.addParam(reloadUrl, {\n\t\t\t\tFIND: params.find,\n\t\t\t});\n\t\t}\n\n\t\tconst headers = [\n\t\t\t{ name: 'BX-ACTION-TYPE', value: 'get_dynamic' },\n\t\t\t{ name: 'BX-REF', value: document.referrer },\n\t\t\t{ name: 'BX-CACHE-MODE', value: 'APPCACHE' },\n\t\t\t{ name: 'BX-APPCACHE-PARAMS', value: JSON.stringify(window.appCacheVars) },\n\t\t\t{ name: 'BX-APPCACHE-URL', value: (\n\t\t\t\t!Type.isUndefined(BX.frameCache)\n\t\t\t\t&& Type.isPlainObject(BX.frameCache.vars)\n\t\t\t\t&& Type.isStringFilled(BX.frameCache.vars.PAGE_URL)\n\t\t\t\t\t? BX.frameCache.vars.PAGE_URL\n\t\t\t\t\t: oMSL.curUrl\n\t\t\t\t) }\n\t\t];\n\n\t\tthis.refreshXhr = Ajax.wrap({\n\t\t\ttype: 'json',\n\t\t\tmethod: 'GET',\n\t\t\turl: reloadUrl,\n\t\t\tdata: '',\n\t\t\theaders: headers,\n\t\t\tcallback: (data) => {\n\t\t\t\tthis.refreshXhr = null;\n\t\t\t\tthis.setPageNumber(1);\n\t\t\t\tInstance.setRefreshStarted(false);\n\t\t\t\tInstance.setRefreshNeeded(false);\n\t\t\t\tNextPageLoaderInstance.stopWaiter();\n\n\t\t\t\tif (document.getElementById('lenta_notifier'))\n\t\t\t\t{\n\t\t\t\t\tdocument.getElementById('lenta_notifier').classList.remove(this.class.notifier);\n\t\t\t\t}\n\n\t\t\t\tapp.exec('pullDownLoadingStop');\n\t\t\t\tapp.exec('hideSearchBarProgress');\n\n\t\t\t\tif (\n\t\t\t\t\tType.isPlainObject(data)\n\t\t\t\t\t&& Type.isPlainObject(data.PROPS)\n\t\t\t\t\t&& Type.isStringFilled(data.PROPS.CONTENT)\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tthis.setPreventNextPage(false);\n\n\t\t\t\t\tBitrixMobile.LazyLoad.clearImages();\n\t\t\t\t\tapp.hidePopupLoader();\n\n\t\t\t\t\tBalloonNotifierInstance.hideNotifier();\n\t\t\t\t\tBalloonNotifierInstance.hideRefreshNeededNotifier();\n\n\t\t\t\t\tif (!Type.isUndefined(data.COUNTER_TO_CLEAR))\n\t\t\t\t\t{\n\t\t\t\t\t\tBXMobileApp.onCustomEvent('onClearLFCounter', [ data.COUNTER_TO_CLEAR ], true);\n\n\t\t\t\t\t\tBXMobileApp.Events.postToComponent('onClearLiveFeedCounter', {\n\t\t\t\t\t\t\tcounterCode: data.COUNTER_TO_CLEAR,\n\t\t\t\t\t\t\tserverTime: data.COUNTER_SERVER_TIME,\n\t\t\t\t\t\t\tserverTimeUnix: data.COUNTER_SERVER_TIME_UNIX,\n\t\t\t\t\t\t}, 'communication');\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.processAjaxBlock(data.PROPS, {\n\t\t\t\t\t\ttype: 'refresh',\n\t\t\t\t\t\tcallback: () => {\n\t\t\t\t\t\t\tPinnedPanelInstance.resetFlags();\n\t\t\t\t\t\t\tPinnedPanelInstance.init();\n\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t!Type.isUndefined(BX.frameCache)\n\t\t\t\t\t\t\t\t&& document.getElementById('bxdynamic_feed_refresh')\n\t\t\t\t\t\t\t\t&& (\n\t\t\t\t\t\t\t\t\tType.isUndefined(data.REWRITE_FRAMECACHE)\n\t\t\t\t\t\t\t\t\t|| data.REWRITE_FRAMECACHE !== 'N'\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tconst serverTimestamp = (\n\t\t\t\t\t\t\t\t\t!Type.isUndefined(data.TS)\n\t\t\t\t\t\t\t\t\t&& parseInt(data.TS) > 0\n\t\t\t\t\t\t\t\t\t\t? parseInt(data.TS)\n\t\t\t\t\t\t\t\t\t\t: 0\n\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t\tif (serverTimestamp > 0)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tInstance.setOptions({\n\t\t\t\t\t\t\t\t\t\tframeCacheTs: serverTimestamp,\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tInstance.updateFrameCache({\n\t\t\t\t\t\t\t\t\ttimestamp: serverTimestamp,\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\toMSL.registerBlocksToCheck();\n\n\t\t\t\t\t\t\t//Android hack.\n\t\t\t\t\t\t\t//The processing of javascript and insertion of html works not so fast as expected\n\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\tBitrixMobile.LazyLoad.showImages(); // when refresh\n\t\t\t\t\t\t\t}, 1000);\n\n\t\t\t\t\t\t\tBalloonNotifierInstance.initEvents();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tif (bScroll)\n\t\t\t\t\t{\n\t\t\t\t\t\tBitrixAnimation.animate({\n\t\t\t\t\t\t\tduration: 1000,\n\t\t\t\t\t\t\tstart: {\n\t\t\t\t\t\t\t\tscroll: window.pageYOffset,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tfinish: {\n\t\t\t\t\t\t\t\tscroll: 0\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\ttransition: BitrixAnimation.makeEaseOut(BitrixAnimation.transitions.quart),\n\t\t\t\t\t\t\tstep: (state) => {\n\t\t\t\t\t\t\t\twindow.scrollTo(0, state.scroll);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tcomplete: () => {}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tif (\n\t\t\t\t\t\twindow.applicationCache\n\t\t\t\t\t\t&& data.isManifestUpdated == '1'\n\t\t\t\t\t\t&& !oMSL.appCacheDebug\n\t\t\t\t\t\t&& (\n\t\t\t\t\t\t\twindow.applicationCache.status == window.applicationCache.IDLE\n\t\t\t\t\t\t\t|| window.applicationCache.status == window.applicationCache.UPDATEREADY\n\t\t\t\t\t\t)\n\t\t\t\t\t)//the manifest has been changed\n\t\t\t\t\t{\n\t\t\t\t\t\twindow.applicationCache.update();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.requestError('refresh', true);\n\t\t\t\t}\n\n\t\t\t\tthis.isBusyRefreshing = false;\n\t\t\t},\n\t\t\tcallback_failure: () => {\n\t\t\t\tthis.refreshXhr = null;\n\n\t\t\t\tInstance.setRefreshStarted(false);\n\t\t\t\tInstance.setRefreshNeeded(false);\n\t\t\t\tNextPageLoaderInstance.stopWaiter();\n\n\t\t\t\tif (document.getElementById('lenta_notifier'))\n\t\t\t\t{\n\t\t\t\t\tdocument.getElementById('lenta_notifier').classList.remove(this.class.notifier);\n\t\t\t\t}\n\n\t\t\t\tapp.exec('pullDownLoadingStop');\n\t\t\t\tapp.exec('hideSearchBarProgress');\n\n\t\t\t\tthis.requestError('refresh', true);\n\t\t\t\tthis.isBusyRefreshing = false;\n\t\t\t}\n\t\t});\n\t}\n\n\tprocessAjaxBlock(block, params)\n\t{\n\t\tif (\n\t\t\t!Type.isPlainObject(params)\n\t\t\t|| !Type.isStringFilled(params.type)\n\t\t\t|| ['refresh', 'next'].indexOf(params.type) < 0\n\t\t)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tlet htmlWasInserted = false;\n\t\tlet scriptsLoaded = false;\n\n\t\tprocessCSS(insertHTML);\n\t\tprocessExternalJS(processInlineJS);\n\n\t\tfunction processCSS(callback)\n\t\t{\n\t\t\tif (\n\t\t\t\tType.isArray(block.CSS)\n\t\t\t\t&& block.CSS.length > 0\n\t\t\t)\n\t\t\t{\n\t\t\t\tBX.load(block.CSS, callback);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tcallback();\n\t\t\t}\n\t\t}\n\n\t\tfunction insertHTML()\n\t\t{\n\t\t\tif (params.type === 'refresh')\n\t\t\t{\n\t\t\t\tdocument.getElementById('lenta_wrapper_global').innerHTML = block.CONTENT;\n\t\t\t}\n\t\t\telse // next\n\t\t\t{\n\t\t\t\tdocument.getElementById('lenta_wrapper').insertBefore(\n\t\t\t\t\tDom.create('div', {\n\t\t\t\t\t\thtml: block.CONTENT\n\t\t\t\t\t}),\n\t\t\t\t\tdocument.getElementById('next_post_more')\n\t\t\t\t);\n\t\t\t}\n\n\t\t\thtmlWasInserted = true;\n\t\t\tif (scriptsLoaded)\n\t\t\t{\n\t\t\t\tprocessInlineJS();\n\t\t\t}\n\t\t}\n\n\t\tfunction processExternalJS(callback)\n\t\t{\n\t\t\tif (\n\t\t\t\tType.isArray(block.JS)\n\t\t\t\t&& block.JS.length > 0\n\t\t\t)\n\t\t\t{\n\t\t\t\tBX.load(block.JS, callback); // to initialize\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tcallback();\n\t\t\t}\n\t\t}\n\n\t\tfunction processInlineJS()\n\t\t{\n\t\t\tscriptsLoaded = true;\n\n\t\t\tif (htmlWasInserted)\n\t\t\t{\n\t\t\t\tajax.processRequestData(block.CONTENT, {\n\t\t\t\t\tscriptsRunFirst: false,\n\t\t\t\t\tdataType: 'HTML',\n\t\t\t\t\tonsuccess: () => {\n\t\t\t\t\t\tif (Type.isFunction(params.callback))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tparams.callback();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\trequestError(type, show)\n\t{\n\t\tif (!['refresh', 'nextPage'].includes(type))\n\t\t{\n\t\t\ttype = 'refresh';\n\t\t}\n\n\t\tshow = !!show;\n\n\t\tconst errorBlock = document.getElementById(`lenta_${type.toLowerCase()}_error`);\n\n\t\tif (this.requestErrorTimeout[type])\n\t\t{\n\t\t\tclearTimeout(this.requestErrorTimeout[type]);\n\t\t}\n\n\t\tif (errorBlock)\n\t\t{\n\t\t\tif (show)\n\t\t\t{\n\t\t\t\terrorBlock.classList.add(this.class.notifierActive);\n\t\t\t\tif (type === 'refresh')\n\t\t\t\t{\n\t\t\t\t\tdocument.addEventListener('scroll', this.refreshErrorScroll);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (type === 'refresh')\n\t\t\t\t{\n\t\t\t\t\tdocument.removeEventListener('scroll', this.refreshErrorScroll);\n\t\t\t\t}\n\t\t\t\terrorBlock.classList.remove(this.class.notifierActive);\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.requestErrorTimeout[type] = setTimeout(() => {\n\t\t\t\tthis.requestError(type, show);\n\t\t\t}, 500);\n\t\t}\n\n\t\tif (type === 'nextPage')\n\t\t{\n\t\t\tthis.initScroll(!show, true);\n\t\t}\n\t}\n\n\trefreshErrorScroll()\n\t{\n\t\tthis.requestError('refresh', false);\n\t}\n\n\tnextPageErrorScroll()\n\t{\n\t\tthis.requestError('nextPage', false);\n\t}\n\n\tsetPageNumber(value)\n\t{\n\t\tthis.pageNumber = parseInt(value);\n\t}\n\n\tgetPageNumber()\n\t{\n\t\treturn this.pageNumber;\n\t}\n\n\tsetNextPageUrl(value)\n\t{\n\t\tthis.nextUrl = value;\n\t}\n\n\tgetNextPageUrl()\n\t{\n\t\treturn this.nextUrl;\n\t}\n\n\tsetPreventNextPage(status)\n\t{\n\t\tInstance.setOptions({\n\t\t\tpreventNextPage: !!status\n\t\t});\n\n\t\tconst refreshNeededNode = document.getElementById('next_page_refresh_needed');\n\t\tconst nextPageCurtainNode = document.getElementById('next_post_more');\n\n\t\tif (\n\t\t\trefreshNeededNode\n\t\t\t&& nextPageCurtainNode\n\t\t)\n\t\t{\n\t\t\trefreshNeededNode.style.display = (!!status ? 'block' : 'none');\n\t\t\tnextPageCurtainNode.style.display = (!!status ? 'none' : 'block');\n\t\t}\n\t}\n}\n\nexport {\n\tPage\n}","import {BalloonNotifier} from \"./balloonnotifier\";\nimport {NextPageLoader} from './nextpageloader';\nimport {NotificationBar} from \"./notificationbar\";\nimport {Database} from \"./database\";\nimport {PublicationQueue} from \"./publicationqueue\";\nimport {PostMenu} from \"./menu/postmenu\";\nimport {PageMenu} from \"./menu/pagemenu\";\nimport {PostFormManager} from \"./postform\";\nimport {PostFormOldManager} from \"./postformold\";\nimport {PinnedPanel} from \"./pinned\";\nimport {Rating} from \"./rating\";\nimport {ImportantManager} from \"./important\";\nimport {SearchBar} from \"./searchbar\";\nimport {PageScroll} from \"./pagescroll\";\nimport {FollowManager} from './followmanager';\nimport {Comments} from './comments';\nimport {Post} from './post';\nimport {BlogPost} from './blogpost';\nimport {Page} from \"./page\";\n\nimport {Dom, Tag, Loc, Type, Runtime} from 'main.core';\nimport {BaseEvent, EventEmitter} from \"main.core.events\";\nimport {Utils} from \"mobile.utils\";\nimport {Ajax} from 'mobile.ajax';\n\nimport 'mobile.imageviewer';\n\nclass Feed\n{\n\tconstructor()\n\t{\n\t\tthis.pageId = null;\n\t\tthis.logId = false;\n\t\tthis.refreshNeeded = false;\n\t\tthis.refreshStarted = false;\n\t\tthis.options = {};\n\t\tthis.nodeId = {\n\t\t\tfeedContainer: 'lenta_wrapper'\n\t\t};\n\t\tthis.class = {\n\t\t\tlistWrapper: 'lenta-list-wrap',\n\t\t\tpostWrapper: 'post-wrap',\n\t\t\tpinnedPanel: 'lenta-pinned-panel',\n\t\t\tpin: 'lenta-item-pin',\n\n\t\t\tpostNewContainerTransformNew: 'lenta-item-new-cont',\n\t\t\tpostNewContainerTransform: 'lenta-item-transform-cont',\n\t\t\tpostLazyLoadCheck: 'lenta-item-lazyload-check',\n\t\t\tlistPost: 'lenta-item',\n\t\t\tdetailPost: 'post-wrap',\n\t\t\tpostItemTopWrap: 'post-item-top-wrap',\n\t\t\tpostItemTop: 'post-item-top',\n\t\t\tpostItemPostBlock: 'post-item-post-block',\n\t\t\tpostItemPostContentView: 'post-item-contentview',\n\t\t\tpostItemDescriptionBlock: 'post-item-description',\n\t\t\tpostItemAttachedFileWrap: 'post-item-attached-disk-file-wrap',\n\t\t\tpostItemInformWrap: 'post-item-inform-wrap',\n\t\t\tpostItemInformWrapTree: 'post-item-inform-wrap-tree',\n\t\t\tpostItemInformComments: 'post-item-inform-comments',\n\t\t\tpostItemInformMore: 'post-item-more',\n\t\t\tpostItemMore: 'post-more-block',\n\t\t\tpostItemPinnedBlock: 'post-item-pinned-block',\n\t\t\tpostItemPinActive: 'lenta-item-pin-active',\n\t\t\tpostItemGratitudeUsersSmallContainer: 'lenta-block-grat-users-small-cont',\n\t\t\tpostItemGratitudeUsersSmallHidden: 'lenta-block-grat-users-small-hidden',\n\t\t\tpostItemImportantUserList: 'post-item-important-list',\n\n\t\t\taddPostButton: 'feed-add-post-button'\n\t\t};\n\n\t\tthis.newPostContainer = null;\n\t\tthis.maxScroll = 0;\n\n\t\tthis.lastActivityDate = 0;\n\t\tthis.availableGroupList = {};\n\n\t\tthis.isPullDownEnabled = false;\n\t\tthis.isPullDownLocked = false;\n\t\tthis.isFrameDataReceived = false;\n\n\t\tthis.init();\n\t}\n\n\tinit()\n\t{\n\t\tBXMobileApp.addCustomEvent('Livefeed.PublicationQueue::afterPostAdd', this.afterPostAdd.bind(this));\n\t\tBXMobileApp.addCustomEvent('Livefeed.PublicationQueue::afterPostAddError', this.afterPostAddError.bind(this));\n\t\tBXMobileApp.addCustomEvent('Livefeed.PublicationQueue::afterPostUpdate', this.afterPostUpdate.bind(this));\n\t\tBXMobileApp.addCustomEvent('Livefeed.PublicationQueue::afterPostUpdateError', this.afterPostUpdateError.bind(this));\n\t\tBXMobileApp.addCustomEvent('Livefeed::showLoader', this.showLoader.bind(this));\n\t\tBXMobileApp.addCustomEvent('Livefeed::hideLoader', this.hideLoader.bind(this));\n\t\tBXMobileApp.addCustomEvent('Livefeed::scrollTop', this.scrollTop.bind(this));\n\t\tBXMobileApp.addCustomEvent('Livefeed::onLogEntryDetailNotFound', this.removePost.bind(this)); // from detail page\n\t\tBXMobileApp.addCustomEvent('Livefeed.PinnedPanel::change', this.onPinnedPanelChange.bind(this));\n\t\tBXMobileApp.addCustomEvent('Livefeed.PostDetail::pinChanged', this.onPostPinChanged.bind(this));\n\n\t\tEventEmitter.subscribe('BX.LazyLoad:ImageLoaded', this.onLazyLoadImageLoaded.bind(this));\n\t\tEventEmitter.subscribe('MobileBizProc:onRenderLogMessages', this.onMobileBizProcRenderLogMessages.bind(this));\n\t\tEventEmitter.subscribe('MobilePlayer:onError', this.onMobilePlayerError);\n\n\t\tdocument.addEventListener('DOMContentLoaded', () =>\n\t\t{\n\t\t\tdocument.addEventListener('click', this.handleClick.bind(this));\n\t\t});\n\t}\n\n\tinitListOnce(params)\n\t{\n\t\tif (!Type.isPlainObject(params))\n\t\t{\n\t\t\tparams = {};\n\t\t}\n\n\t\tif (!Type.isUndefined(params.arAvailableGroup))\n\t\t{\n\t\t\tthis.availableGroupList = params.arAvailableGroup;\n\t\t}\n\n\t\tEventEmitter.subscribe('onFrameDataReceivedBefore', BitrixMobile.LazyLoad.clearImages);\n\n\t\tEventEmitter.subscribe('BX.LazyLoad:ImageLoaded', () => {\n\t\t\tthis.recalcMaxScroll();\n\t\t});\n\n\t\tEventEmitter.subscribe('onFrameDataReceived', () => {\n\t\t\tthis.isPullDownEnabled = false;\n\t\t\tthis.isPullDownLocked = false;\n\t\t\tthis.isFrameDataReceived = true;\n\t\t\tapp.exec('pullDownLoadingStop');\n\t\t\tBitrixMobile.LazyLoad.showImages(true);\n\t\t});\n\n\t\tEventEmitter.subscribe('onFrameDataProcessed', (event: BaseEvent) => {\n\t\t\tconst [ blocks, bFromCache ] = event.getCompatData();\n\n\t\t\tif (\n\t\t\t\t!Type.isUndefined(blocks)\n\t\t\t\t&& !Type.isUndefined(blocks[0])\n\t\t\t\t&& !Type.isUndefined(bFromCache)\n\t\t\t\t&& !!bFromCache\n\t\t\t)\n\t\t\t{\n\t\t\t\tif (\n\t\t\t\t\t!Type.isUndefined(blocks[0].PROPS)\n\t\t\t\t\t&& !Type.isUndefined(blocks[0].PROPS.TS)\n\t\t\t\t\t&& parseInt(blocks[0].PROPS.TS) > 0\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tthis.setOptions({\n\t\t\t\t\t\tframeCacheTs: parseInt(blocks[0].PROPS.TS),\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tBitrixMobile.LazyLoad.showImages(true);\n\n\t\t\tif (!!bFromCache)\n\t\t\t{\n\t\t\t\tPageInstance.setPreventNextPage(true);\n\t\t\t}\n\t\t});\n\n\t\tEventEmitter.subscribe('onCacheDataRequestStart', () => {\n\t\t\tsetTimeout(() => {\n\t\t\t\tif (!this.isFrameDataReceived)\n\t\t\t\t{\n\t\t\t\t\tthis.isPullDownLocked = true;\n\t\t\t\t\tapp.exec('pullDownLoadingStart');\n\t\t\t\t}\n\t\t\t}, 1000);\n\t\t});\n\n\t\tEventEmitter.subscribe('onFrameDataReceivedError', () => {\n\t\t\tapp.BasicAuth({\n\t\t\t\tsuccess: () => {\n\t\t\t\t\tBX.frameCache.update(true);\n\t\t\t\t},\n\t\t\t\tfailture: () => {\n\t\t\t\t\tthis.isPullDownLocked = false;\n\t\t\t\t\tapp.exec('pullDownLoadingStop');\n\t\t\t\t\tPageInstance.requestError('refresh', true);\n\t\t\t\t},\n\t\t\t});\n\t\t});\n\n\t\tEventEmitter.subscribe('onFrameDataRequestFail', (event: BaseEvent) => {\n\t\t\tconst [ response ] = event.getCompatData();\n\n\t\t\tif (\n\t\t\t\t!Type.isUndefined(response)\n\t\t\t\t&& Type.isStringFilled(response.reason)\n\t\t\t\t&& response.reason === 'bad_eval'\n\t\t\t)\n\t\t\t{\n\t\t\t\tthis.isPullDownLocked = false;\n\t\t\t\tapp.exec('pullDownLoadingStop');\n\t\t\t\tPageInstance.requestError('refresh', true);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tapp.BasicAuth({\n\t\t\t\t\tsuccess: () => {\n\t\t\t\t\t\tBX.frameCache.update(true);\n\t\t\t\t\t},\n\t\t\t\t\tfailture: () => {\n\t\t\t\t\t\tthis.isPullDownLocked = false;\n\t\t\t\t\t\tapp.exec('pullDownLoadingStop');\n\t\t\t\t\t\tPageInstance.requestError('refresh', true)\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\tEventEmitter.subscribe('onCacheInvokeAfter', (event: BaseEvent) => {\n\t\t\tconst [ storageBlocks, resultSet ] = event.getCompatData();\n\n\t\t\tif (resultSet.items.length <= 0)\n\t\t\t{\n\t\t\t\tBX.frameCache.update(true, true);\n\t\t\t}\n\t\t});\n\n\t\tBXMobileApp.addCustomEvent('onAfterEdit', (params) => {\n\t\t\tthis.afterEdit({\n\t\t\t\tresponseData: params.postResponseData,\n\t\t\t\tlogId: params.postData.data.log_id,\n\t\t\t});\n\t\t});\n\n\t\tEventEmitter.subscribe('onPullDownDisable', () => {\n\t\t\tBXMobileApp.UI.Page.Refresh.setEnabled(false);\n\t\t});\n\t\tEventEmitter.subscribe('onPullDownEnable', () => {\n\t\t\tBXMobileApp.UI.Page.Refresh.setEnabled(true);\n\t\t});\n\n\t\tBXMobileApp.UI.Page.Refresh.setParams({\n\t\t\tcallback: () => {\n\t\t\t\tif (!this.isPullDownLocked)\n\t\t\t\t{\n\t\t\t\t\tPageInstance.refresh(true);\n\t\t\t\t}\n\t\t\t},\n\t\t\tbackgroundColor: '#E7E9EB',\n\t\t});\n\n\t\tBXMobileApp.UI.Page.Refresh.setEnabled(true);\n\t}\n\n\tsetPageId(value)\n\t{\n\t\tthis.pageId = value;\n\t}\n\n\tgetPageId()\n\t{\n\t\treturn this.pageId;\n\t};\n\n\tsetLogId(value)\n\t{\n\t\tthis.logId = parseInt(value);\n\t}\n\n\tgetLogId()\n\t{\n\t\treturn parseInt(this.logId);\n\t}\n\n\tsetOptions(optionsList)\n\t{\n\t\tfor (let key in optionsList)\n\t\t{\n\t\t\tif (!optionsList.hasOwnProperty(key))\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tthis.options[key] = optionsList[key];\n\t\t}\n\t}\n\n\tgetOption(key, defaultValue)\n\t{\n\t\tif (Type.isUndefined(defaultValue))\n\t\t{\n\t\t\tdefaultValue = null;\n\t\t}\n\n\t\tif (!Type.isStringFilled(key))\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\treturn (!Type.isUndefined(this.options[key]) ? this.options[key] : defaultValue);\n\t}\n\n\tsetRefreshNeeded(value)\n\t{\n\t\tthis.refreshNeeded = value;\n\t}\n\n\tgetRefreshNeeded()\n\t{\n\t\treturn this.refreshNeeded;\n\t};\n\n\tsetRefreshStarted(value)\n\t{\n\t\tthis.refreshStarted = value;\n\t}\n\n\tgetRefreshStarted()\n\t{\n\t\treturn this.refreshStarted;\n\t};\n\n\tsetNewPostContainer(value)\n\t{\n\t\tthis.newPostContainer = value;\n\t};\n\n\tgetNewPostContainer()\n\t{\n\t\treturn this.newPostContainer;\n\t};\n\n\tsetMaxScroll(value)\n\t{\n\t\tthis.maxScroll = value;\n\t};\n\n\tgetMaxScroll()\n\t{\n\t\treturn this.maxScroll;\n\t};\n\n\tafterPostAdd(params)\n\t{\n\t\tif (!Type.isPlainObject(params))\n\t\t{\n\t\t\tparams = {};\n\t\t}\n\n\t\tconst postId = (typeof params.postId != 'undefined' ? parseInt(params.postId) : 0);\n\t\tconst context = (typeof params.context != 'undefined' ? params.context : '');\n\t\tconst pageId = (typeof params.pageId != 'undefined' ? params.pageId : '');\n\t\tconst groupId = (typeof params.groupId != 'undefined' ? params.groupId : null);\n\n\t\tif (pageId !== this.pageId)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tDatabaseUnsentPostInstance.delete(groupId);\n\n\t\tif (\n\t\t\tpostId <= 0\n\t\t\t|| Type.isStringFilled(params.warningText)\n\t\t)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.getEntryContent({\n\t\t\tentityType: 'BLOG_POST',\n\t\t\tentityId: postId,\n\t\t\tqueueKey: params.key,\n\t\t\taction: 'add'\n\t\t});\n\t}\n\n\tafterPostUpdate(params)\n\t{\n\t\tif (!Type.isPlainObject(params))\n\t\t{\n\t\t\tparams = {};\n\t\t}\n\n\t\tconst context = (typeof params.context != 'undefined' ? params.context : '');\n\t\tconst pageId = (typeof params.pageId != 'undefined' ? params.pageId : '');\n\t\tconst postId = (typeof params.postId != 'undefined' ? parseInt(params.postId) : 0);\n\t\tconst pinned = (typeof params.pinned != 'undefined' && !!params.pinned);\n\n\t\tthis.getEntryContent({\n\t\t\tentityType: 'BLOG_POST',\n\t\t\tentityId: postId,\n\t\t\tqueueKey: params.key,\n\t\t\taction: 'update',\n\t\t\tpinned: pinned\n\t\t});\n\t}\n\n\tafterPostAddError(params)\n\t{\n\t\tif (!Type.isPlainObject(params))\n\t\t{\n\t\t\tparams = {};\n\t\t}\n\n\t\tconst context = (Type.isStringFilled(params.context) ? params.context : '');\n\t\tconst groupId = (params.groupId ? params.groupId : '');\n\t\tconst selectedDestinations = {\n\t\t\ta_users: [],\n\t\t\tb_groups: []\n\t\t};\n\n\t\toMSL.buildSelectedDestinations(\n\t\t\tparams.postData,\n\t\t\tselectedDestinations\n\t\t);\n\n\t\tPostFormOldManagerInstance.setParams({\n\t\t\tselectedRecipients: selectedDestinations,\n\t\t});\n\n\t\tPostFormOldManagerInstance.setParams({\n\t\t\tmessageText: params.postData.POST_MESSAGE\n\t\t});\n\n\t\tDatabaseUnsentPostInstance.save(params.postData, groupId);\n\n\t\tparams.callback = () =>\n\t\t{\n\t\t\tif (BXMobileAppContext.getApiVersion() >= this.getApiVersion('layoutPostForm'))\n\t\t\t{\n\t\t\t\tPostFormManagerInstance.show({\n\t\t\t\t\tpageId: this.getPageId(),\n\t\t\t\t\tpostId: 0\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tapp.exec('showPostForm', PostFormOldManagerInstance.show());\n\t\t\t}\n\t\t};\n\t\tthis.showPostError(params);\n\t}\n\n\tafterPostUpdateError(params)\n\t{\n\t\tif (!Type.isPlainObject(params))\n\t\t{\n\t\t\tparams = {};\n\t\t}\n\n\t\tconst context = (Type.isStringFilled(params.context) ? params.context : '');\n\n\t\tparams.callback = () =>\n\t\t{\n\t\t\tBlogPost.edit({\n\t\t\t\tpostId: parseInt(params.postId),\n\t\t\t});\n\t\t};\n\t\tthis.showPostError(params);\n\t}\n\n\tshowPostError(params)\n\t{\n\t\tif (!Type.isPlainObject(params))\n\t\t{\n\t\t\tparams = {};\n\t\t}\n\n\t\tparams.callback = (Type.isFunction(params.callback) ? params.callback : () =>\n\t\t{\n\t\t});\n\n\t\tconst errorText = (Type.isStringFilled(params.errorText) ? params.errorText : false);\n\n\t\tNotificationBarInstance.showError({\n\t\t\ttext: (errorText ? errorText : Loc.getMessage('MOBILE_EXT_LIVEFEED_PUBLICATION_ERROR')),\n\t\t\tonTap: (notificationParams) =>\n\t\t\t{\n\t\t\t\tparams.callback(notificationParams);\n\t\t\t}\n\t\t});\n\t}\n\n\tshowLoader(params)\n\t{\n\t\tif (!Type.isPlainObject(params))\n\t\t{\n\t\t\tparams = {};\n\t\t}\n\n\t\tif (\n\t\t\tparams.pageId\n\t\t\t&& this.pageId !== null\n\t\t\t&& params.pageId != this.pageId\n\t\t)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tapp.showPopupLoader({\n\t\t\ttext: (\n\t\t\t\tType.isStringFilled(params.text)\n\t\t\t\t\t? params.text\n\t\t\t\t\t: ''\n\t\t\t)\n\t\t});\n\t}\n\n\thideLoader()\n\t{\n\t\tapp.hidePopupLoader();\n\t}\n\n\tscrollTop(params)\n\t{\n\t\tif (!Type.isPlainObject(params))\n\t\t{\n\t\t\tparams = {};\n\t\t}\n\n\t\tif (\n\t\t\tparams.pageId\n\t\t\t&& this.pageId !== null\n\t\t\t&& params.pageId != this.pageId\n\t\t)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\twindow.scrollTo(0, 0);\n\t};\n\n\tgetEntryContent(params)\n\t{\n\t\tif (!Type.isPlainObject(params))\n\t\t{\n\t\t\tparams = {};\n\t\t}\n\n\t\tconst logId = (params.logId ? parseInt(params.logId) : 0);\n\n\t\tif (\n\t\t\tlogId <= 0\n\t\t\t&& !(\n\t\t\t\tType.isStringFilled(params.entityType)\n\t\t\t\t&& parseInt(params.entityId) > 0\n\t\t\t)\n\t\t)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tAjax.runComponentAction('bitrix:mobile.socialnetwork.log.ex', 'getEntryContent', {\n\t\t\tmode: 'class',\n\t\t\tsignedParameters: this.getOption('signedParameters', {}),\n\t\t\tdata: {\n\t\t\t\tparams: {\n\t\t\t\t\tlogId: (parseInt(params.logId) > 0 ? parseInt(params.logId) : 0),\n\t\t\t\t\tpinned: (!!params.pinned ? 'Y' : 'N'),\n\t\t\t\t\tentityType: (Type.isStringFilled(params.entityType) ? params.entityType : ''),\n\t\t\t\t\tentityId: (parseInt(params.entityId) > 0 ? parseInt(params.entityId) : 0),\n\t\t\t\t\tsiteTemplateId: Loc.getMessage('MOBILE_EXT_LIVEFEED_SITE_TEMPLATE_ID')\n\t\t\t\t}\n\t\t\t}\n\t\t}).then((response) =>\n\t\t{\n\t\t\tif (logId <= 0)\n\t\t\t{\n\t\t\t\tAjax.runComponentAction('bitrix:mobile.socialnetwork.log.ex', 'getEntryLogId', {\n\t\t\t\t\tmode: 'class',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\tentityType: (Type.isStringFilled(params.entityType) ? params.entityType : ''),\n\t\t\t\t\t\t\tentityId: (parseInt(params.entityId) > 0 ? parseInt(params.entityId) : 0)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}).then((responseLogId) =>\n\t\t\t\t{\n\t\t\t\t\tif (responseLogId.data.logId)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.insertPost({\n\t\t\t\t\t\t\tlogId: responseLogId.data.logId,\n\t\t\t\t\t\t\tcontent: response.data.html,\n\t\t\t\t\t\t\tpostId: params.postId,\n\t\t\t\t\t\t\tqueueKey: params.queueKey,\n\t\t\t\t\t\t\taction: params.action,\n\t\t\t\t\t\t\tserverTimestamp: parseInt(response.data.componentResult.serverTimestamp)\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.insertPost({\n\t\t\t\t\tlogId: logId,\n\t\t\t\t\tcontent: response.data.html,\n\t\t\t\t\tpostId: params.postId,\n\t\t\t\t\tqueueKey: params.queueKey,\n\t\t\t\t\taction: params.action,\n\t\t\t\t\tserverTimestamp: parseInt(response.data.componentResult.serverTimestamp)\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t};\n\n\tprocessDetailBlock(postContainer, contentWrapper, selector)\n\t{\n\t\tif (\n\t\t\t!postContainer\n\t\t\t|| !contentWrapper\n\t\t)\n\t\t{\n\t\t\treturn Promise.reject();\n\t\t}\n\n\t\tconst content = contentWrapper.querySelector(selector);\n\t\tconst container = postContainer.querySelector(selector);\n\n\t\tif (container && content)\n\t\t{\n\t\t\treturn Runtime.html(container, content.innerHTML);\n\t\t}\n\n\t\treturn Promise.reject();\n\t}\n\n\tinsertPost(params)\n\t{\n\t\tconst containerNode = document.getElementById(this.nodeId.feedContainer);\n\t\tconst content = params.content;\n\t\tconst logId = params.logId;\n\t\tconst queueKey = params.queueKey;\n\t\tconst action = params.action;\n\n\t\tif (\n\t\t\t!Type.isDomNode(containerNode)\n\t\t\t|| !Type.isStringFilled(content)\n\t\t)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst serverTimestamp = (\n\t\t\ttypeof (params.serverTimestamp) != 'undefined'\n\t\t\t&& parseInt(params.serverTimestamp) > 0\n\t\t\t\t? parseInt(params.serverTimestamp)\n\t\t\t\t: 0\n\t\t);\n\n\t\tif (action === 'update')\n\t\t{\n\t\t\tlet postContainer = document.getElementById('lenta_item_' + logId);\n\t\t\tif (!postContainer)\n\t\t\t{\n\t\t\t\tpostContainer = document.getElementById('lenta_item');\n\t\t\t}\n\n\t\t\tif (!postContainer)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst matches = this.pageId.match(/^detail_(\\d+)/i);\n\t\t\tif (\n\t\t\t\tmatches\n\t\t\t\t&& logId != matches[1]\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst contentWrapper = postContainer.appendChild(document.createElement('div'));\n\t\t\tcontentWrapper.style.display = 'none';\n\t\t\tRuntime.html(contentWrapper, content);\n\n\t\t\tif (postContainer.id === 'lenta_item') // empty detail\n\t\t\t{\n\t\t\t\tthis.processDetailBlock(postContainer, contentWrapper, `.${this.class.postItemTop}`);\n\t\t\t\tthis.processDetailBlock(postContainer, contentWrapper, `.${this.class.postItemPostBlock}`).then(() =>\n\t\t\t\t{\n\t\t\t\t\tconst pageBlockNode = postContainer.querySelector(`.${this.class.postItemPostBlock}`);\n\t\t\t\t\tconst resultBlockNode = contentWrapper.querySelector(`.${this.class.postItemPostBlock}`);\n\n\t\t\t\t\tif (pageBlockNode || resultBlockNode)\n\t\t\t\t\t{\n\t\t\t\t\t\tconst pageClassList = this.filterPostBlockClassList(pageBlockNode.classList);\n\t\t\t\t\t\tconst resultClassList = this.filterPostBlockClassList(resultBlockNode.classList);\n\n\t\t\t\t\t\tpageClassList.forEach((className) => {\n\t\t\t\t\t\t\tpageBlockNode.classList.remove(className);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tresultClassList.forEach((className) => {\n\t\t\t\t\t\t\tpageBlockNode.classList.add(className);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tBitrixMobile.LazyLoad.showImages();\n\t\t\t\t});\n\t\t\t\tthis.processDetailBlock(postContainer, contentWrapper, `.${this.class.postItemAttachedFileWrap}`).then(() =>\n\t\t\t\t{\n\t\t\t\t\tBitrixMobile.LazyLoad.showImages();\n\t\t\t\t});\n\t\t\t\tthis.processDetailBlock(postContainer, contentWrapper, `.${this.class.postItemInformWrap}`);\n\t\t\t\tthis.processDetailBlock(postContainer, contentWrapper, `.${this.class.postItemInformWrapTree}`);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tpostContainer = postContainer.querySelector(`div.${this.class.postItemTopWrap}`);\n\n\t\t\t\tconst contentPostItemTopWrap = contentWrapper.querySelector(`div.${this.class.postItemTopWrap}`);\n\n\t\t\t\tRuntime.html(postContainer, contentPostItemTopWrap.innerHTML).then(() => {\n\t\t\t\t\toMSL.checkNodesHeight();\n\t\t\t\t\tBitrixMobile.LazyLoad.showImages();\n\n\t\t\t\t\tif (document.getElementById('framecache-block-feed'))\n\t\t\t\t\t{\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tthis.updateFrameCache({\n\t\t\t\t\t\t\t\ttimestamp: serverTimestamp\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}, 750);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tcontentWrapper.remove();\n\t\t}\n\t\telse if (action === 'add')\n\t\t{\n\t\t\tthis.setNewPostContainer(Tag.render`<div class=\"${this.class.postNewContainerTransformNew} ${this.class.postLazyLoadCheck}\" ontransitionend=\"${this.handleInsertPostTransitionEnd.bind(this)}\"></div>`);\n\t\t\tDom.prepend(this.getNewPostContainer(), containerNode);\n\t\t\tUtils.htmlWithInlineJS(this.getNewPostContainer(), content).then(() =>\n\t\t\t{\n\t\t\t\tconst postNode = this.getNewPostContainer().querySelector(`div.${this.class.listPost}`);\n\t\t\t\tDom.style(this.getNewPostContainer(), 'height', `${postNode.scrollHeight + 12/*margin-bottom*/}px`);\n\n\t\t\t\tif (serverTimestamp > 0)\n\t\t\t\t{\n\t\t\t\t\tthis.setOptions({\n\t\t\t\t\t\tframeCacheTs: serverTimestamp\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\toMSL.registerBlocksToCheck();\n\t\t\t\tsetTimeout(() => { oMSL.checkNodesHeight(); }, 100);\n\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.updateFrameCache({\n\t\t\t\t\t\ttimestamp: serverTimestamp\n\t\t\t\t\t});\n\t\t\t\t}, 750);\n\t\t\t});\n\t\t}\n\n\t\tPublicationQueueInstance.emit('onPostInserted', new BaseEvent({\n\t\t\tdata: {\n\t\t\t\tkey: queueKey\n\t\t\t}\n\t\t}));\n\t}\n\n\tremovePost(params)\n\t{\n\t\tconst logId = parseInt(params.logId);\n\n\t\tif (logId <= 0)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst itemNode = document.getElementById('lenta_item_' + logId);\n\n\t\tif (!itemNode)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\titemNode.remove();\n\t}\n\n\tfilterPostBlockClassList(classList)\n\t{\n\t\tconst result = [];\n\n\t\tArray.from(classList).forEach((className) => {\n\t\t\tif (\n\t\t\t\tclassName === 'info-block-background'\n\t\t\t\t|| className === 'info-block-background-with-title'\n\t\t\t\t|| className === 'info-block-gratitude'\n\t\t\t\t|| className === 'info-block-important'\n\t\t\t\t|| className === 'ui-livefeed-background'\n\t\t\t\t|| className.match(/info-block-gratitude-(.+)/i)\n\t\t\t\t|| className.match(/ui-livefeed-background-(.+)/i)\n\t\t\t)\n\t\t\t{\n\t\t\t\tresult.push(className);\n\t\t\t}\n\t\t});\n\n\t\treturn result;\n\t}\n\n\thandleInsertPostTransitionEnd(event)\n\t{\n\t\tif (event.propertyName === 'height')\n\t\t{\n\t\t\tthis.getNewPostContainer().classList.remove(this.class.postNewContainerTransformNew);\n\t\t\tthis.getNewPostContainer().classList.remove(this.class.postNewContainerTransform);\n\t\t\tDom.style(this.getNewPostContainer(), 'height', null);\n\n\t\t\tthis.recalcMaxScroll();\n\t\t\tBitrixMobile.LazyLoad.showImages();\n\t\t}\n\t}\n\n\tonLazyLoadImageLoaded(event)\n\t{\n\t\tthis.recalcMaxScroll();\n\n\t\tconst [imageNode] = event.getData();\n\t\tif (imageNode)\n\t\t{\n\t\t\tconst postCheckNode = imageNode.closest(`.${this.class.postLazyLoadCheck}`);\n\t\t\tif (postCheckNode)\n\t\t\t{\n\t\t\t\tconst postNode = postCheckNode.querySelector(`div.${this.class.listPost}`);\n\n\t\t\t\tif (postNode)\n\t\t\t\t{\n\t\t\t\t\tpostCheckNode.classList.add(this.class.postNewContainerTransform);\n\t\t\t\t\tDom.style(postCheckNode, 'height', `${postNode.scrollHeight}px`);\n\t\t\t\t\tsetTimeout(() =>\n\t\t\t\t\t{\n\t\t\t\t\t\tpostCheckNode.classList.remove(this.class.postNewContainerTransform);\n\t\t\t\t\t\tDom.style(postCheckNode, 'height', null);\n\t\t\t\t\t}, 500);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\trecalcMaxScroll()\n\t{\n\t\tthis.setMaxScroll(document.documentElement.scrollHeight - (2 * window.innerHeight));\n\t}\n\n\tonMobileBizProcRenderLogMessages()\n\t{\n\t\tthis.recalcMaxScroll();\n\t}\n\n\tonPinnedPanelChange(params)\n\t{\n\t\tconst logId = (params.logId ? parseInt(params.logId) : 0);\n\t\tconst value = (['Y', 'N'].indexOf(params.value) !== -1 ? params.value : null);\n\t\tconst pinActionContext = (Type.isStringFilled(params.pinActionContext) ? params.pinActionContext : 'list');\n\n\t\tif (\n\t\t\t!logId\n\t\t\t|| !value\n\t\t\t|| !PinnedPanelInstance.getPinnedPanelNode()\n\t\t)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tlet postNode = (Type.isDomNode(params.postNode) ? params.postNode: null);\n\t\tif (!Type.isDomNode(params.postNode)) // from detail in list\n\t\t{\n\t\t\tpostNode = document.getElementById(`lenta_item_${logId}`);\n\t\t}\n\n\t\tif (!Type.isDomNode(postNode))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (value === 'N')\n\t\t{\n\t\t\tPinnedPanelInstance.extractEntry({\n\t\t\t\tlogId: logId,\n\t\t\t\tpostNode: postNode,\n\t\t\t\tcontainerNode: document.getElementById(this.nodeId.feedContainer)\n\t\t\t});\n\t\t}\n\t\telse if (value === 'Y')\n\t\t{\n\t\t\tif (Type.isDomNode(params.postNode))\n\t\t\t{\n\t\t\t\tapp.showPopupLoader({text:\"\"});\n\n\t\t\t\tPinnedPanelInstance.getPinnedData({\n\t\t\t\t\tlogId: logId\n\t\t\t\t}).then((pinnedData) => {\n\t\t\t\t\tapp.hidePopupLoader();\n\n\t\t\t\t\tPinnedPanelInstance.insertEntry({\n\t\t\t\t\t\tlogId: logId,\n\t\t\t\t\t\tpostNode: params.postNode,\n\t\t\t\t\t\tpinnedContent: pinnedData\n\t\t\t\t\t});\n\n\t\t\t\t}, (response) => {\n\t\t\t\t\tapp.hidePopupLoader();\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t}\n\n\tonPostPinChanged(params)\n\t{\n\t\tconst logId = (params.logId ? parseInt(params.logId) : 0);\n\t\tconst value = (['Y', 'N'].indexOf(params.value) !== -1 ? params.value : null);\n\n\t\tif (\n\t\t\t!logId\n\t\t\t|| !value\n\t\t)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst menuNode = document.getElementById('log-entry-menu-' + logId);\n\t\tif (!menuNode)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tlet postNode = menuNode.closest(`.${this.class.detailPost}`);\n\t\tif (!postNode)\n\t\t{\n\t\t\tpostNode = menuNode.closest(`.${this.class.listPost}`);\n\t\t}\n\t\tif (!postNode)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (value === 'Y')\n\t\t{\n\t\t\tpostNode.classList.add(this.class.postItemPinActive);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tpostNode.classList.remove(this.class.postItemPinActive);\n\t\t}\n\t}\n\n\thandleClick(e)\n\t{\n\t\tif (e.target.classList.contains(this.class.pin))\n\t\t{\n\t\t\tlet post = null;\n\t\t\tlet menuNode = null;\n\t\t\tlet context = 'list';\n\n\t\t\tlet postNode = e.target.closest(`.${this.class.listPost}`);\n\t\t\tif (postNode) // list\n\t\t\t{\n\t\t\t\tmenuNode = postNode.querySelector('[data-menu-type=\"post\"]');\n\t\t\t\tpost = this.getPostFromNode(postNode);\n\t\t\t}\n\t\t\telse // detail\n\t\t\t{\n\t\t\t\tcontext = 'detail';\n\t\t\t\tpostNode = e.target.closest(`.${this.class.detailPost}`);\n\t\t\t\tif (postNode)\n\t\t\t\t{\n\t\t\t\t\tmenuNode = postNode.querySelector('[data-menu-type=\"post\"]');\n\t\t\t\t\tif (menuNode)\n\t\t\t\t\t{\n\t\t\t\t\t\tpost = this.getPostFromLogId(menuNode.getAttribute('data-log-id'));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\tpost\n\t\t\t\t&& menuNode\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn post.setPinned({\n\t\t\t\t\tmenuNode,\n\t\t\t\t\tcontext\n\t\t\t\t});\n\t\t\t}\n\n\t\t\te.stopPropagation();\n\t\t\treturn e.preventDefault();\n\t\t}\n\t\telse if (e.target.classList.contains(this.class.addPostButton))\n\t\t{\n\t\t\tif (BXMobileAppContext.getApiVersion() >= this.getApiVersion('layoutPostForm'))\n\t\t\t{\n\t\t\t\tconst formManager = new PostFormManager();\n\t\t\t\tformManager.show({\n\t\t\t\t\tpageId: this.getPageId(),\n\t\t\t\t\tgroupId: this.getOption('groupId', 0),\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tapp.exec('showPostForm', PostFormOldManagerInstance.show());\n\t\t\t}\n\t\t}\n\t\telse if (\n\t\t\te.target.classList.contains(`.${PageScrollInstance.class.scrollButton}`)\n\t\t\t|| e.target.closest(`.${PageScrollInstance.class.scrollButton}`)\n\t\t)\n\t\t{\n\t\t\tif (\n\t\t\t\te.target.classList.contains(`.${PageScrollInstance.class.scrollButtonTop}`)\n\t\t\t\t|| e.target.closest(`.${PageScrollInstance.class.scrollButtonTop}`)\n\t\t\t)\n\t\t\t{\n\t\t\t\tPageScrollInstance.scrollTo('top');\n\t\t\t}\n\t\t\telse if (\n\t\t\t\te.target.classList.contains(`.${PageScrollInstance.class.scrollButtonBottom}`)\n\t\t\t\t|| e.target.closest(`.${PageScrollInstance.class.scrollButtonBottom}`)\n\t\t\t)\n\t\t\t{\n\t\t\t\tPageScrollInstance.scrollTo('bottom');\n\t\t\t}\n\t\t}\n\t\telse if (\n\t\t\t(\n\t\t\t\te.target.closest(`.${this.class.listWrapper}`)\n\t\t\t\t|| e.target.closest(`.${this.class.pinnedPanel}`)\n\t\t\t)\n\t\t\t&& !(\n\t\t\t\te.target.tagName.toLowerCase() === 'a'\n\t\t\t\t&& Type.isStringFilled(e.target.getAttribute('target'))\n\t\t\t\t&& e.target.getAttribute('target').toLowerCase() === '_blank'\n\t\t\t)\n\t\t)\n\t\t{\n\t\t\tconst detailFromPinned = !!(\n\t\t\t\te.target.classList.contains(this.class.postItemPinnedBlock)\n\t\t\t\t|| e.target.closest(`.${this.class.postItemPinnedBlock}`)\n\t\t\t);\n\t\t\tconst detailFromNormal = !!(!detailFromPinned && (\n\t\t\t\te.target.classList.contains(this.class.postItemPostContentView)\n\t\t\t\t|| e.target.closest(`.${this.class.postItemPostContentView}`)\n\t\t\t\t|| e.target.classList.contains(this.class.postItemDescriptionBlock) // tasks\n\t\t\t\t|| e.target.closest(`.${this.class.postItemDescriptionBlock}`)\n\t\t\t));\n\t\t\tconst detailToComments = !!(!detailFromPinned && !detailFromNormal && (\n\t\t\t\te.target.classList.contains(this.class.postItemInformComments)\n\t\t\t\t|| e.target.closest(`.${this.class.postItemInformComments}`)\n\t\t\t));\n\t\t\tconst detailToExpanded = !!(!detailFromPinned && !detailFromNormal && !detailToComments && (\n\t\t\t\te.target.classList.contains(this.class.postItemInformMore)\n\t\t\t\t|| e.target.closest(`.${this.class.postItemInformMore}`)\n\t\t\t));\n\n\t\t\tif (\n\t\t\t\tdetailFromPinned\n\t\t\t\t|| detailFromNormal\n\t\t\t\t|| detailToComments\n\t\t\t\t|| detailToExpanded\n\t\t\t)\n\t\t\t{\n\t\t\t\tconst postNode = e.target.closest(`.${this.class.listPost}`);\n\t\t\t\tif (postNode)\n\t\t\t\t{\n\t\t\t\t\tconst post = this.getPostFromNode(postNode);\n\t\t\t\t\tif (post)\n\t\t\t\t\t{\n\t\t\t\t\t\tpost.openDetail({\n\t\t\t\t\t\t\tpathToEmptyPage: this.getOption('pathToEmptyPage', ''),\n\t\t\t\t\t\t\tpathToCalendarEvent: this.getOption('pathToCalendarEvent', ''),\n\t\t\t\t\t\t\tpathToTasksRouter: this.getOption('pathToTasksRouter', ''),\n\t\t\t\t\t\t\tevent: e,\n\t\t\t\t\t\t\tfocusComments: detailToComments,\n\t\t\t\t\t\t\tshowFull: detailToExpanded,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\te.stopPropagation();\n\t\t\t\treturn e.preventDefault();\n\t\t\t}\n\t\t}\n\t\telse if (e.target.closest(`.${this.class.postWrapper}`))\n\t\t{\n\t\t\tconst expand = !!(\n\t\t\t\te.target.classList.contains(this.class.postItemInformMore)\n\t\t\t\t|| e.target.closest(`.${this.class.postItemInformMore}`)\n\t\t\t\t|| e.target.classList.contains(this.class.postItemMore)\n\t\t\t\t|| e.target.closest(`.${this.class.postItemMore}`)\n\t\t\t);\n\n\t\t\tlet postItemGratitudeUsersSmallContainer = null;\n\t\t\tif (e.target.classList.contains(this.class.postItemGratitudeUsersSmallContainer))\n\t\t\t{\n\t\t\t\tpostItemGratitudeUsersSmallContainer = e.target;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tpostItemGratitudeUsersSmallContainer = e.target.closest(`.${this.class.postItemGratitudeUsersSmallContainer}`);\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\texpand\n\t\t\t\t|| Type.isDomNode(postItemGratitudeUsersSmallContainer)\n\t\t\t)\n\t\t\t{\n\t\t\t\tif (Type.isDomNode(postItemGratitudeUsersSmallContainer))\n\t\t\t\t{\n\t\t\t\t\tpostItemGratitudeUsersSmallContainer.style.display = 'none';\n\t\t\t\t\tconst postItemGratitudeUsersSmallHidden = postItemGratitudeUsersSmallContainer.parentNode.querySelector(`.${this.class.postItemGratitudeUsersSmallHidden}`);\n\t\t\t\t\tif (postItemGratitudeUsersSmallHidden)\n\t\t\t\t\t{\n\t\t\t\t\t\tpostItemGratitudeUsersSmallHidden.style.display = 'block';\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconst logId = this.getOption('logId', 0);\n\t\t\t\tconst post = new Post({\n\t\t\t\t\tlogId: logId\n\t\t\t\t});\n\n\t\t\t\tpost.expandText();\n\n\t\t\t\te.stopPropagation();\n\t\t\t\treturn e.preventDefault();\n\t\t\t}\n\n\t\t\tlet importantUserListNode = null;\n\t\t\tif (e.target.classList.contains(this.class.postItemImportantUserList))\n\t\t\t{\n\t\t\t\timportantUserListNode = e.target;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\timportantUserListNode = e.target.closest(`.${this.class.postItemImportantUserList}`)\n\t\t\t}\n\n\t\t\tif (importantUserListNode)\n\t\t\t{\n\t\t\t\tconst inputNode = importantUserListNode.parentNode.querySelector('input');\n\t\t\t\tlet postId = 0;\n\t\t\t\tif (Type.isDomNode(inputNode))\n\t\t\t\t{\n\t\t\t\t\tpostId = parseInt(inputNode.getAttribute('bx-data-post-id'));\n\t\t\t\t}\n\n\t\t\t\tif (postId > 0)\n\t\t\t\t{\n\t\t\t\t\tapp.exec(\"openComponent\", {\n\t\t\t\t\t\tname: \"JSStackComponent\",\n\t\t\t\t\t\tcomponentCode: \"livefeed.important.list\",\n\t\t\t\t\t\tscriptPath: \"/mobileapp/jn/livefeed.important.list/?version=1.0.0\",\n\n\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\tPOST_ID: postId,\n\t\t\t\t\t\t\tSETTINGS: this.getOption('importantData', {}),\n\t\t\t\t\t\t},\n\t\t\t\t\t\trootWidget: {\n\t\t\t\t\t\t\tname: 'list',\n\t\t\t\t\t\t\tsettings: {\n\t\t\t\t\t\t\t\tobjectName: \"livefeedImportantListWidget\",\n\t\t\t\t\t\t\t\ttitle: BX.message('MOBILE_EXT_LIVEFEED_USERS_LIST_TITLE'),\n\t\t\t\t\t\t\t\tmodal: false,\n\t\t\t\t\t\t\t\tbackdrop: {\n\t\t\t\t\t\t\t\t\tmediumPositionPercent: 75\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}, false);\n\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tgetPostFromNode(node)\n\t{\n\t\tif (!Type.isDomNode(node))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst logId = parseInt(node.getAttribute('data-livefeed-id'));\n\n\t\tif (logId <= 0)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\treturn new Post({\n\t\t\tlogId: logId,\n\t\t\tentryType: node.getAttribute('data-livefeed-post-entry-type'),\n\t\t\tuseFollow: (node.getAttribute('data-livefeed-post-use-follow') === 'Y'),\n\t\t\tuseTasks: (node.getAttribute('data-livefeed-post-use-tasks') === 'Y'),\n\t\t\tperm: node.getAttribute('data-livefeed-post-perm'),\n\t\t\tdestinations: node.getAttribute('data-livefeed-post-destinations'),\n\t\t\tpostId: parseInt(node.getAttribute('data-livefeed-post-id')),\n\t\t\turl: node.getAttribute('data-livefeed-post-url'),\n\t\t\tentityXmlId: node.getAttribute('data-livefeed-post-entity-xml-id'),\n\t\t\treadOnly: (node.getAttribute('data-livefeed-post-read-only') === 'Y'),\n\t\t\tcontentTypeId: node.getAttribute('data-livefeed-post-content-type-id'),\n\t\t\tcontentId: node.getAttribute('data-livefeed-post-content-id'),\n\t\t\tshowFull: (node.getAttribute('data-livefeed-post-show-full') === 'Y'),\n\n\t\t\ttaskId: parseInt(node.getAttribute('data-livefeed-task-id')),\n\t\t\ttaskData: node.getAttribute('data-livefeed-task-data'),\n\n\t\t\tcalendarEventId: parseInt(node.getAttribute('data-livefeed-calendar-event-id'))\n\t\t});\n\t}\n\n\tgetPostFromLogId(logId)\n\t{\n\t\tlet result = null;\n\n\t\tlogId = parseInt(logId);\n\t\tif (logId <= 0)\n\t\t{\n\t\t\treturn result;\n\t\t}\n\n\t\tresult = new Post({\n\t\t\tlogId\n\t\t});\n\n\t\treturn result;\n\t}\n\n\tupdateFrameCache(params)\n\t{\n\t\tlet contentNode = document.getElementById('framecache-block-feed');\n\t\tif (!Type.isDomNode(contentNode))\n\t\t{\n\t\t\tcontentNode = document.getElementById('bxdynamic_feed_refresh');\n\t\t}\n\t\tif (!Type.isDomNode(contentNode))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst props = {\n\t\t\tUSE_BROWSER_STORAGE: true,\n\t\t\tAUTO_UPDATE: true,\n\t\t\tUSE_ANIMATION: false\n\t\t};\n\n\t\tconst timestamp = (typeof params.timestamp != 'undefined' ? parseInt(params.timestamp) : 0);\n\t\tif (timestamp > 0)\n\t\t{\n\t\t\tprops.TS = timestamp;\n\t\t}\n\n\t\tBX.frameCache.writeCacheWithID(\n\t\t\t'framecache-block-feed',\n\t\t\tcontentNode.innerHTML,\n\t\t\tparseInt(Math.random() * 100000),\n\t\t\tJSON.stringify(props)\n\t\t);\n\t}\n\n\tonMobilePlayerError(event)\n\t{\n\t\tconst [player, src] = event.getData();\n\n\t\tif (!Type.isDomNode(player))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (!Type.isStringFilled(src))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst container = player.parentNode;\n\t\tif (container)\n\t\t{\n\t\t\tif (container.querySelector('.disk-mobile-player-error-container'))\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (player.querySelector('.disk-mobile-player-error-container'))\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tconst sources = player.getElementsByTagName('source');\n\t\tlet sourcesLeft = sources.length;\n\n\t\tArray.from(sources).forEach((source) => {\n\t\t\tif (\n\t\t\t\tType.isStringFilled(source.src)\n\t\t\t\t&& source.src === src\n\t\t\t)\n\t\t\t{\n\t\t\t\tDom.remove(source);\n\t\t\t\tsourcesLeft--;\n\t\t\t}\n\t\t});\n\n\t\tif (sourcesLeft > 0)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst errorContainer = Dom.create('div', {\n\t\t\tprops: {\n\t\t\t\tclassName: 'disk-mobile-player-error-container'\n\t\t\t},\n\t\t\tchildren: [\n\t\t\t\tDom.create('div', {\n\t\t\t\t\tprops: {\n\t\t\t\t\t\tclassName: 'disk-mobile-player-error-icon'\n\t\t\t\t\t},\n\t\t\t\t\thtml: ''\n\t\t\t\t}),\n\t\t\t\tDom.create('div', {\n\t\t\t\t\tprops: {\n\t\t\t\t\t\tclassName: 'disk-mobile-player-error-message'\n\t\t\t\t\t},\n\t\t\t\t\thtml: Loc.getMessage('MOBILE_EXT_LIVEFEED_PLAYER_ERROR_MESSAGE')\n\t\t\t\t})\n\t\t\t]\n\t\t});\n\n\t\tconst downloadLink = errorContainer.querySelector('.disk-mobile-player-download');\n\t\tif (downloadLink)\n\t\t{\n\t\t\tDom.adjust(downloadLink, {\n\t\t\t\tevents: {\n\t\t\t\t\tclick: () => {\n\t\t\t\t\t\tapp.openDocument({\n\t\t\t\t\t\t\turl: src\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (container)\n\t\t{\n\t\t\tplayer.style.display = 'none';\n\t\t\tcontainer.appendChild(errorContainer);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.adjust(player, {\n\t\t\t\tchildren: [ errorContainer ]\n\t\t\t});\n\t\t}\n\t}\n\n\tgetApiVersion(feature)\n\t{\n\t\tlet result = 0;\n\t\tswitch (feature)\n\t\t{\n\t\t\tcase 'layoutPostForm':\n\t\t\t\tresult = 37;\n\t\t\t\tbreak;\n\t\t\tcase 'pageMenu':\n\t\t\t\tresult = 34;\n\t\t\t\tbreak;\n\t\t\tcase 'tabs':\n\t\t\t\tresult = 41;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tsendErrorEval(script)\n\t{\n\t\tBX.evalGlobal('try { ' + script + ' } catch (e) { this.sendError(e.message, e.name, e.number); }');\n\t};\n\n\tsendError(message, url, linenumber)\n\t{\n\t\tAjax.runAction('socialnetwork.api.livefeed.mobileLogError', {\n\t\t\tdata: {\n\t\t\t\tmessage: message,\n\t\t\t\turl: url,\n\t\t\t\tlineNumber: linenumber,\n\t\t\t}\n\t\t}).then((response) => {\n\t\t}, (response) => {\n\t\t});\n\t}\n\n\tsetLastActivityDate()\n\t{\n\t\tthis.lastActivityDate = Math.round(new Date().getTime() / 1000);\n\t}\n\n\tgetLastActivityDate()\n\t{\n\t\treturn this.lastActivityDate;\n\t}\n\n\tafterEdit({\n\t\tresponseData,\n\t\tlogId\n\t})\n\t{\n\t\tlogId = (!Type.isUndefined(logId) ? parseInt(logId) : 0);\n\n\t\tconst newPostNode = Tag.render`<div>${responseData.text}</div>`;\n\n\t\tconst container = document.getElementById('blog-post-first-after');\n\t\tif (container)\n\t\t{\n\t\t\tcontainer.parentNode.insertBefore(newPostNode, container.nextSibling);\n\t\t}\n\n\t\tconst detailTextNode = newPostNode.querySelector(`.post-item-post-block`);\n\t\tconst topNode = newPostNode.querySelector(`.post-item-top`);\n\t\tconst filesNode = newPostNode.querySelector(`.post-item-attached-file-wrap`);\n\n\t\tif (\n\t\t\tlogId > 0\n\t\t\t&& detailTextNode\n\t\t\t&& topNode\n\t\t)\n\t\t{\n\t\t\tconst postData = {\n\t\t\t\tdetailText: detailTextNode.innerHTML,\n\t\t\t\ttopText: topNode.innerHTML,\n\t\t\t\tlogID: logId\n\t\t\t};\n\n\t\t\tif (filesNode)\n\t\t\t{\n\t\t\t\tpostData.filesBlockText = filesNode.innerHTML;\n\t\t\t}\n\n\t\t\tBXMobileApp.onCustomEvent('onEditedPostInserted', postData, true, true);\n\t\t}\n\n\t\tBitrixMobile.LazyLoad.showImages();\n\t}\n}\n\nconst Instance = new Feed();\nconst BalloonNotifierInstance = new BalloonNotifier();\nconst NextPageLoaderInstance = new NextPageLoader();\nconst NotificationBarInstance = new NotificationBar();\nconst DatabaseUnsentPostInstance = new Database();\nconst PublicationQueueInstance = new PublicationQueue();\nconst PostMenuInstance = new PostMenu();\nconst PageMenuInstance = new PageMenu();\nconst PostFormManagerInstance = new PostFormManager();\nconst PostFormOldManagerInstance = new PostFormOldManager();\nconst PinnedPanelInstance = new PinnedPanel();\nconst RatingInstance = new Rating();\nconst ImportantManagerInstance = new ImportantManager();\nconst SearchBarInstance = new SearchBar();\nconst PageScrollInstance = new PageScroll();\nconst FollowManagerInstance = new FollowManager();\nconst CommentsInstance = new Comments();\nconst PageInstance = new Page();\n\nexport {\n\tPost,\n\tBlogPost,\n\n\tInstance,\n\tBalloonNotifierInstance,\n\tNextPageLoaderInstance,\n\tNotificationBarInstance,\n\tDatabaseUnsentPostInstance,\n\tPublicationQueueInstance,\n\tPostMenuInstance,\n\tPageMenuInstance,\n\tPostFormManagerInstance,\n\tPostFormOldManagerInstance,\n\tPinnedPanelInstance,\n\tRatingInstance,\n\tImportantManagerInstance,\n\tSearchBarInstance,\n\tPageScrollInstance,\n\tFollowManagerInstance,\n\tCommentsInstance,\n\tPageInstance,\n};\n"],"names":["BalloonNotifier","initialized","classes","show","nodeIdList","notifier","notifierCounter","notifierCounterTitle","refreshNeeded","refreshError","nextPageError","init","EventEmitter","subscribe","notifierNode","getNotifierNode","initEvents","addEventListener","PageInstance","refresh","refreshNeededNode","getRefreshNeededNode","app","exec","refreshErrorNode","getRefreshErrorNode","requestError","nextPageErrorNode","getNextPageErrorNode","document","getElementById","refreshNeededBlock","classList","add","remove","params","cnt","parseInt","counterValue","cnt_cent","reminder","suffix","Instance","getRefreshNeeded","getNotifierCounterNode","innerHTML","hideRefreshNeededNotifier","getNotifierCounterTitleNode","Loc","getMessage","NextPageLoader","buttonNode","getButtonNode","e","button","NotificationBar","repo","color","background","error","info","text","filter","notifyBar","forEach","hide","bar","BXMobileApp","UI","message","textColor","useLoader","groupId","align","textAlign","autoHideTimeout","hideOnTap","onTap","id","Math","random","push","maxLines","isGlobal","useCloseButton","Database","tableName","keyName","setTableName","Type","isPlainObject","isStringFilled","setKeyName","addCustomEvent","onClear","bind","value","delete","storageId","getTableName","key","getKeyName","callback","res","data","x","hasOwnProperty","JSON","parse","Object","keys","length","onLoad","onEmpty","PublicationQueue","nodeId","container","class","balloonHidden","balloonFixed","balloonPublished","balloonShow","balloonHide","timeout","afterSetItem","afterPostAdd","afterPostAddError","afterPostUpdate","afterPostUpdateError","setEventNamespace","onFeedLoaded","onPostInserted","Event","onScroll","containerNode","isDomNode","window","pageYOffset","queue","addToTray","drawList","event","removeFromTray","node","drawItem","hideItem","setTimeout","warningText","lastElementChild","title","Tag","render","Dom","clean","append","pageId","contentType","getPageId","addSuccess","Post","scrollTo","body","scrollHeight","logId","entryType","useFollow","useTasks","perm","destinations","postId","url","entityXmlId","readOnly","contentTypeId","contentId","showFull","taskId","taskData","calendarEventId","oldValue","getAttribute","newValue","contains","setAttribute","Ajax","runAction","analyticsLabel","b24statAction","b24statContext","then","response","success","FollowManagerInstance","setFollow","bOnlyOn","bRunEvent","bAjax","onCustomEvent","log_id","page_id","preventDefault","stopPropagation","menuNode","context","postNode","closest","pinActionContext","pathToEmptyPage","pathToCalendarEvent","pathToTasksRouter","focusComments","BXMobileAppContext","getApiVersion","Events","postToComponent","taskInfo","creatorIcon","responsibleIcon","getTaskInfo","path","replace","__MSLOpenLogEntryNew","entry_type","use_follow","use_tasks","post_perm","post_id","post_url","entity_xml_id","focus_comments","focus_form","show_full","read_only","post_content_type_id","post_content_id","pinnedValue","oMSL","expandText","BlogPost","isUndefined","confirm","buttons","btnNum","showPopupLoader","actionUrl","Uri","addParam","wrap","type","method","action","mobile_action","sessid","site","lang","processData","hidePopupLoader","SUCCESS","closeController","drop","callback_failure","pinnedContext","Application","PostFormManagerInstance","getData","postData","PostFormOldManagerInstance","formParams","PostPerm","selectedDestinations","a_users","b_groups","setExtraDataArray","postAuthorId","post_user_id","PostDetailText","setParams","messageText","PostDestination","entries","STYLE","addDestination","TYPE","includes","ID","name","Text","decode","TITLE","PostDestinationHidden","setExtraData","hiddenRecipients","selectedRecipients","PostFiles","messageFiles","PostUFCode","messageUFCode","callbackFunction","isFunction","isNull","result","nt","sl","PostBackgroundCode","PostMenu","iconUrlFolderPath","sectionCode","postPerms","isInteger","useShare","useFavorites","usePinned","useRefreshComments","favoritesValue","followValue","target","iconUrl","postInstance","setPinned","iconName","openTable","shareBlogPost","markmode","multiple","return_full_mode","user_all","showtitle","modal","selected","alphabet_index","okname","cancelname","outsection","arrowFlag","edit","feedId","LiveFeedID","feature","setFavorites","bDetailEmptyPage","CommentsInstance","getComments","ts","iDetailTs","bPullDown","obFocus","form","location","reload","copyPostLink","createTask","entityType","entityId","PageMenu","listPageMenuItems","detailPageMenuItems","menuItems","getPageMenuItems","initPagePopupMenu","menuCreate","items","Page","TopBar","setCallback","menuShow","setText","BX","isArray","showPageMenu","buildDetailPageMenu","menuData","popupMenuItems","popupMenuActions","menuItem","image","sections","eventName","item","getLogId","PostMenuInstance","getFollowValue","getMenuItems","map","PostFormManager","getDatabaseData","getWorkgroupData","getPostData","processPostData","componentCode","scriptPath","getOption","rootWidget","settings","objectName","promise","Promise","resolve","reject","DatabaseUnsentPostInstance","load","post","POST_TITLE","PostTitle","POST_MESSAGE","isArrayFilled","DEST","DEST_DATA","patterns","pattern","style","i","matches","match","BACKGROUND_CODE","IMPORTANT","PostImportantData","IMPORTANT_DATE_END","endDate","Date","GRATITUDE_MEDAL","PostGratitudeData","gratitude","employees","Array","GRATITUDE_EMPLOYEES","GRATITUDE_EMPLOYEES_DATA","userId","userData","imageUrl","subtitle","voteId","dataKey","UF_BLOG_POST_VOTE","QUESTIONS","PostVoteData","questions","question","QUESTION","allowMultiSelect","FIELD_TYPE","answers","ANSWERS","answer","MESSAGE","catch","console","promiseData","currentDateTime","returnEventName","getTime","assign","group","groupData","NAME","recipients","code","shortTitle","SHORT_TITLE","avatar","AVATAR","groups","PostFormOldManager","postFormParams","postFormExtraData","extraData","ob","indexOf","searchRes","some","findDestinationCallBack","bubble_background_color","bubble_text_color","element","index","array","getExtraData","attachButton","getAttachButton","mentionButton","getMentionButton","attachFileSettings","getAttachFileSettings","smileButton","supportLocalFilesInText","okButton","buildRequestStub","parseMentions","ufCode","buildFiles","attachedFiles","buildDestinations","postVirtualId","initPostForm","cancelButton","dataSource","getRecipientsDataSource","backgroundCode","attachButtonItems","diskAttachParams","tableSettings","searchField","platform","table_settings","TABLE_SETTINGS","resize","saveToPhotoAlbum","request","ACTION","AJAX_CALL","PUBLISH_STATUS","is_sent","apply","SPERM","SPERM_NAME","MOBILE","PARSE_PREVIEW","commentId","commentType","comment_post_id","parsedText","arMention","RegExp","commentTextCurrent","tasksList","readedFileCount","fileTotal","fileCountIncrement","postProgressingFiles","uploadTasks","fileData","isFileFromBitrix24Disk","VALUE","dataAttributes","isNewFileOnDevice","isNumber","mimeType","MobileUtils","getFileMimeType","folderId","getUploadFilename","previewUrl","getResizeOptions","files","prefix","getmessage","keyOld","keyNew","PinnedPanel","panelInitialized","panel","panelCollapsed","panelActive","collapsedPanel","collapsedPanelPostsValue","collapsedPanelComments","collapsedPanelCommentsShown","collapsedPanelCommentsValue","collapsedPanelCommentsValueNew","collapsedPanelExpandButton","postItemPinned","postItemPinActive","postItemPinnedBlock","postItemPinnedTitle","postItemPinnedTextBox","postItemPinnedDesc","cancelPanel","cancelPanelButton","querySelector","adjustCollapsedPostsPanel","expandCollapsedPostsPanel","getPostsCount","getPinnedPanelNode","recalcCollapsedPostsPanel","from","getElementsByClassName","postsCounter","postsCounterNode","commentsCounterNode","commentsCounterValueNode","newCommentCounter","querySelectorAll","reduce","acc","status","errors","pinnedContent","pinnedPanelNode","DESCRIPTION","cancelPinnedPanel","currentTarget","parentNode","insertBefore","prepend","recalcPanel","Rating","onFeedInit","BXRL","ImportantManager","hasAttribute","renderRead","POST_ID","isObject","checked","unbindAll","removeAttribute","listNode","SearchBar","findTextMode","ftMinTokenSize","hideByRefresh","searchBarEventCallback","setHideByRefresh","unsetHideByRefresh","set","useSearchBar","emit","BaseEvent","eventData","emitRefreshEvent","frameCache","readCacheWithID","block","find","Runtime","html","CONTENT","processHTML","moveTop","BitrixMobile","LazyLoad","showImages","refreshXhr","compatData","PageScroll","canCheckScrollButton","showScrollButtonTimeout","showScrollButtonBottom","showScrollButtonTop","scrollButton","scrollButtonTop","scrollButtonBottom","scrollButtonTopActive","scrollButtonBottomActive","onScrollDetail","clearTimeout","setLastActivityDate","checkScrollButton","scrollTop","scrollY","maxScroll","documentElement","innerHeight","showHideScrollButton","postScrollButtonBottom","postScrollButtonTop","startValue","finishValue","BitrixAnimation","animate","duration","start","scroll","finish","transition","makeEaseOut","transitions","quart","step","state","complete","FollowManager","defaultValue","postItemFollow","postItemFollowActive","runEvent","useAjax","turnOnOnly","followBlock","followWrap","drawFollow","isBoolean","getFollowDefaultValue","detailPageId","setFollowValue","setFollowMenuItemName","setFollowDefaultValue","setDefaultFollowMenuItemName","bitrix_sessid","changeListMode","pullDownAndRefresh","menuItemIndex","PageMenuInstance","findIndex","Comments","emptyCommentsXhr","repoLog","mid","deleteHandler","drawHandler","submitHandler","ENTITY_XML_ID","join","num","obj","post_data","edit_id","timestampValue","pullDown","pullDownTop","bPullDownTop","moveBottom","comments","Refresh","appendChild","showEmptyListWaiter","enable","TextPanel","isNil","formWrap","stop","POST_PERM","TEXT","POST_NUM_COMMENTS","setRepoItem","contentData","HTML","func","childNodes","ajax","processScripts","SCRIPT","defer","mobile","ajaxUrl","commentsContainerId","commentsClassName","__MSLDetailPullDownInit","setFocusOnComments","PageScrollInstance","logIdContainer","TS","alert","BXMPage","close","showEmptyListFailed","waiterNode","errorMessage","ERROR_MESSAGE","parent","getList","abort","setFocusOnCommentForm","firstNewComment","offsetTop","firstComment","findChild","className","focus","valuePassed","containerNew","display","containerAll","isBusyGettingNextPage","isBusyRefreshing","pageNumber","nextPageXhr","nextUrl","requestErrorTimeout","nextPage","notifierActive","refreshErrorScroll","nextPageErrorScroll","setPageNumber","process_waiter","removeEventListener","deviceMaxScroll","getMaxScroll","getNextPageUrl","PROPS","LAST_TS","processAjaxBlock","recalcMaxScroll","registerBlocksToCheck","checkNodesHeight","containerId","fullContentClassName","getPageNumber","removeParam","setNextPageUrl","bScroll","setRefreshNeeded","setRefreshStarted","BalloonNotifierInstance","NextPageLoaderInstance","startWaiter","NotificationBarInstance","hideAll","reloadUrl","href","RELOAD","RELOAD_JSON","FIND","headers","referrer","stringify","appCacheVars","vars","PAGE_URL","curUrl","stopWaiter","setPreventNextPage","clearImages","hideNotifier","COUNTER_TO_CLEAR","counterCode","serverTime","COUNTER_SERVER_TIME","serverTimeUnix","COUNTER_SERVER_TIME_UNIX","PinnedPanelInstance","resetFlags","REWRITE_FRAMECACHE","serverTimestamp","setOptions","frameCacheTs","updateFrameCache","timestamp","applicationCache","isManifestUpdated","appCacheDebug","IDLE","UPDATEREADY","update","htmlWasInserted","scriptsLoaded","processCSS","insertHTML","processExternalJS","processInlineJS","CSS","create","JS","processRequestData","scriptsRunFirst","dataType","onsuccess","errorBlock","toLowerCase","initScroll","preventNextPage","nextPageCurtainNode","Feed","refreshStarted","options","feedContainer","listWrapper","postWrapper","pinnedPanel","pin","postNewContainerTransformNew","postNewContainerTransform","postLazyLoadCheck","listPost","detailPost","postItemTopWrap","postItemTop","postItemPostBlock","postItemPostContentView","postItemDescriptionBlock","postItemAttachedFileWrap","postItemInformWrap","postItemInformWrapTree","postItemInformComments","postItemInformMore","postItemMore","postItemGratitudeUsersSmallContainer","postItemGratitudeUsersSmallHidden","postItemImportantUserList","addPostButton","newPostContainer","lastActivityDate","availableGroupList","isPullDownEnabled","isPullDownLocked","isFrameDataReceived","showLoader","hideLoader","removePost","onPinnedPanelChange","onPostPinChanged","onLazyLoadImageLoaded","onMobileBizProcRenderLogMessages","onMobilePlayerError","handleClick","arAvailableGroup","getCompatData","blocks","bFromCache","BasicAuth","failture","reason","storageBlocks","resultSet","afterEdit","responseData","postResponseData","setEnabled","backgroundColor","optionsList","getEntryContent","queueKey","pinned","buildSelectedDestinations","save","showPostError","errorText","showError","notificationParams","runComponentAction","mode","signedParameters","siteTemplateId","responseLogId","insertPost","content","componentResult","postContainer","contentWrapper","selector","createElement","processDetailBlock","pageBlockNode","resultBlockNode","pageClassList","filterPostBlockClassList","resultClassList","contentPostItemTopWrap","setNewPostContainer","handleInsertPostTransitionEnd","getNewPostContainer","Utils","htmlWithInlineJS","PublicationQueueInstance","itemNode","propertyName","imageNode","postCheckNode","setMaxScroll","extractEntry","getPinnedData","pinnedData","insertEntry","getPostFromNode","getPostFromLogId","formManager","tagName","detailFromPinned","detailFromNormal","detailToComments","detailToExpanded","openDetail","expand","importantUserListNode","inputNode","SETTINGS","backdrop","mediumPositionPercent","contentNode","props","USE_BROWSER_STORAGE","AUTO_UPDATE","USE_ANIMATION","writeCacheWithID","player","src","sources","getElementsByTagName","sourcesLeft","source","errorContainer","children","downloadLink","adjust","events","click","openDocument","script","evalGlobal","linenumber","lineNumber","round","newPostNode","nextSibling","detailTextNode","topNode","filesNode","detailText","topText","logID","filesBlockText","RatingInstance","ImportantManagerInstance","SearchBarInstance"],"mappings":"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"}