{"version":3,"file":"livefeed.bundle.js","sources":["../src/balloonnotifier.js","../src/notificationbar.js","../src/database.js","../src/publicationqueue.js","../src/post.js","../src/menu/postmenu.js","../src/pinned.js","../src/feed.js"],"sourcesContent":["import {Loc} from \"main.core\";\nimport {Instance} from \"./feed\";\n\nclass BalloonNotifier\n{\n\tconstructor()\n\t{\n\t\tthis.classes = {\n\t\t\tshow: 'lenta-notifier-shown'\n\t\t};\n\t\tthis.nodeIdList = {\n\t\t\tnotifier: 'lenta_notifier',\n\t\t\tnotifierCounter: 'lenta_notifier_cnt',\n\t\t\tnotifierCounterTitle: 'lenta_notifier_cnt_title',\n\t\t\trefreshNeeded: 'lenta_notifier_2'\n\t\t};\n\t}\n\n\tgetNotifierNode()\n\t{\n\t\treturn document.getElementById(this.nodeIdList.notifier);\n\t}\n\tgetNotifierCounterNode()\n\t{\n\t\treturn document.getElementById(this.nodeIdList.notifierCounter);\n\t}\n\tgetNotifierCounterTitleNode()\n\t{\n\t\treturn document.getElementById(this.nodeIdList.notifierCounterTitle);\n\t}\n\tgetRefreshNeededNode()\n\t{\n\t\treturn document.getElementById(this.nodeIdList.refreshNeeded);\n\t}\n\n\tshowRefreshNeededNotifier()\n\t{\n\t\tconst refreshNeededBlock = this.getRefreshNeededNode();\n\t\tif (refreshNeededBlock)\n\t\t{\n\t\t\trefreshNeededBlock.classList.add(this.classes.show);\n\t\t}\n\t}\n\n\thideRefreshNeededNotifier()\n\t{\n\t\tconst refreshNeededNode = this.getRefreshNeededNode();\n\t\tif (refreshNeededNode)\n\t\t{\n\t\t\trefreshNeededNode.classList.remove(this.classes.show);\n\t\t}\n\t}\n\n\tshowNotifier(params)\n\t{\n\t\tlet cnt = parseInt(params.counterValue);\n\n\t\tconst\n\t\t\tcnt_cent = cnt % 100,\n\t\t\treminder = cnt % 10;\n\n\t\tlet suffix = '';\n\n\t\tif (\n\t\t\tcnt_cent >= 10\n\t\t\t&& cnt_cent < 15\n\t\t)\n\t\t{\n\t\t\tsuffix = 3;\n\t\t}\n\t\telse if (reminder == 0)\n\t\t{\n\t\t\tsuffix = 3;\n\t\t}\n\t\telse if (reminder == 1)\n\t\t{\n\t\t\tsuffix = 1;\n\t\t}\n\t\telse if (\n\t\t\treminder == 2\n\t\t\t|| reminder == 3\n\t\t\t|| reminder == 4\n\t\t)\n\t\t{\n\t\t\tsuffix = 2;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tsuffix = 3;\n\t\t}\n\n\t\tif (Instance.getRefreshNeeded())\n\t\t{\n\t\t\tthis.getNotifierCounterNode().innerHTML = (cnt ? cnt + '+' : '');\n\t\t\tthis.hideRefreshNeededNotifier();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.getNotifierCounterNode().innerHTML = cnt || '';\n\t\t}\n\n\t\tthis.getNotifierCounterTitleNode().innerHTML = Loc.getMessage('MOBILE_EXT_LIVEFEED_COUNTER_TITLE_' + suffix);\n\t\tthis.getNotifierNode().classList.add(this.classes.show);\n\t}\n\n\thideNotifier()\n\t{\n\t\tconst notifierNode = this.getNotifierNode();\n\t\tif (notifierNode)\n\t\t{\n\t\t\tnotifierNode.classList.remove(this.classes.show);\n\t\t}\n\t};\n}\n\nexport {\n\tBalloonNotifier\n}","import {Loc} from \"main.core\";\n\nclass NotificationBar\n{\n\tconstructor()\n\t{\n\t\tthis.repo = [];\n\t\tthis.color = {\n\t\t\tbackground: {\n\t\t\t\terror: '#affb0000',\n\t\t\t\tinfo: '#3a3735'\n\t\t\t},\n\t\t\ttext: {\n\t\t\t\terror: '#ffffff',\n\t\t\t\tinfo: '#ffffff'\n\t\t\t}\n\t\t}\n\t}\n\n\thideAll()\n\t{\n\t\tthis.repo = this.repo.filter(notifyBar => {\n\t\t\treturn notifyBar;\n\t\t});\n\t\tthis.repo.forEach(notifyBar => {\n\t\t\tnotifyBar.hide();\n\t\t});\n\t}\n\n\tshowError(params)\n\t{\n\t\tconst bar = new BXMobileApp.UI.NotificationBar({\n\t\t\t\tmessage: params.text ? params.text : '',\n\t\t\t\tcolor: this.color.background.error,\n\t\t\t\ttextColor: this.color.text.error,\n\t\t\t\tuseLoader: (params.useLoader ? !!params.useLoader : false),\n\t\t\t\tgroupId: (params.groupId ? params.groupId : ''),\n\t\t\t\talign: (params.textAlign ? params.textAlign : 'center'),\n\t\t\t\tautoHideTimeout: (params.autoHideTimeout ? params.autoHideTimeout : 30000),\n\t\t\t\thideOnTap: (params.hideOnTap ? !!params.hideOnTap : true),\n\t\t\t\tonTap: params.onTap ? params.onTap : () => {},\n\t\t\t}, (params.id ? params.id : parseInt(Math.random() * 100000)));\n\n\t\tthis.repo.push(bar);\n\t\tbar.show();\n\t}\n\n\tshowInfo(params)\n\t{\n\t\tconst bar = new BXMobileApp.UI.NotificationBar({\n\t\t\t\tmessage: params.text ? params.text : '',\n\t\t\t\tcolor: this.color.background.info,\n\t\t\t\ttextColor: this.color.text.info,\n\t\t\t\tuseLoader: (params.useLoader ? !!params.useLoader : false),\n\t\t\t\tgroupId: (params.groupId ? params.groupId : ''),\n\t\t\t\tmaxLines: (params.maxLines ? params.maxLines : false),\n\t\t\t\talign: (params.textAlign ? params.textAlign : 'center'),\n\t\t\t\tisGlobal: (params.isGlobal ? !!params.isGlobal : true),\n\t\t\t\tuseCloseButton: (params.useCloseButton ? !!params.useCloseButton : true),\n\t\t\t\tautoHideTimeout: (params.autoHideTimeout ? params.autoHideTimeout : 1000),\n\t\t\t\thideOnTap: (params.hideOnTap ? !!params.hideOnTap : true)\n\t\t\t}, (params.id ? params.id : parseInt(Math.random() * 100000)));\n\n\t\tthis.repo.push(bar);\n\t\tbar.show();\n\t}\n}\n\nexport {\n\tNotificationBar\n}","import {Type} from \"main.core\";\n\nclass Database\n{\n\tconstructor(params)\n\t{\n\t\tthis.tableName = null;\n\t\tthis.keyName = null;\n\n\t\tthis.setTableName(Type.isPlainObject(params) && Type.isStringFilled(params.tableName) ? params.tableName : 'b_default');\n\t\tthis.setKeyName(Type.isPlainObject(params) && Type.isStringFilled(params.keyName) ? params.keyName : 'post_unsent');\n\t}\n\n\tsetTableName(value)\n\t{\n\t\tthis.tableName = value;\n\t}\n\tgetTableName()\n\t{\n\t\treturn this.tableName;\n\t}\n\n\tsetKeyName(value)\n\t{\n\t\tthis.keyName = value;\n\t}\n\tgetKeyName()\n\t{\n\t\treturn this.keyName;\n\t}\n\n\tcheck(callback)\n\t{\n\t\tif (!Type.isObject(app.db))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tapp.db.createTable({\n\t\t\ttableName: this.getTableName(),\n\t\t\tfields: [\n\t\t\t\t{\n\t\t\t\t\tname: 'KEY',\n\t\t\t\t\tunique: true\n\t\t\t\t},\n\t\t\t\t'VALUE'\n\t\t\t],\n\t\t\tsuccess: (res) => { callback.success(); },\n\t\t\tfail: (e) => { callback.fail() }\n\t\t});\n\t}\n\n\tdelete(groupId)\n\t{\n\t\tif (parseInt(groupId) <= 0)\n\t\t{\n\t\t\tgroupId = false;\n\t\t}\n\n\t\tif (!Type.isObject(app.db))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.check({\n\t\t\tsuccess: () => {\n\t\t\t\tapp.db.deleteRows({\n\t\t\t\t\ttableName: this.getTableName(),\n\t\t\t\t\tfilter: {\n\t\t\t\t\t\tKEY: this.getKeyName() + (groupId ? '_' + groupId : '')\n\t\t\t\t\t},\n\t\t\t\t\tsuccess: (res) => {},\n\t\t\t\t\tfail: (e) => {}\n\t\t\t\t});\n\t\t\t},\n\t\t\tfail: () => {}\n\t\t});\n\t}\n\n\tsave(data, groupId)\n\t{\n\t\tif (parseInt(groupId) <= 0)\n\t\t{\n\t\t\tgroupId = false;\n\t\t}\n\n\t\tfor (let x in data)\n\t\t{\n\t\t\tif (!data.hasOwnProperty(x))\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (x === 'sessid')\n\t\t\t{\n\t\t\t\tdelete data[x];\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif (!Type.isObject(app.db))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.check({\n\t\t\tsuccess: () => {\n\t\t\t\tapp.db.getRows({\n\t\t\t\t\ttableName: this.getTableName(),\n\t\t\t\t\tfilter: {\n\t\t\t\t\t\tKEY: this.getKeyName() + (groupId ? '_' + groupId : '')\n\t\t\t\t\t},\n\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\tlet text = JSON.stringify(data);\n\n\t\t\t\t\t\tif (res.items.length > 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tapp.db.updateRows({\n\t\t\t\t\t\t\t\ttableName: this.getTableName(),\n\t\t\t\t\t\t\t\tupdateFields: {\n\t\t\t\t\t\t\t\t\tVALUE: text\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tfilter: {\n\t\t\t\t\t\t\t\t\tKEY: this.getKeyName() + (groupId ? '_' + groupId : '')\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tfail: (e) => {\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tapp.db.addRow({\n\t\t\t\t\t\t\t\ttableName: this.getTableName(),\n\t\t\t\t\t\t\t\tinsertFields: {\n\t\t\t\t\t\t\t\t\tKEY: this.getKeyName() + (groupId ? '_' + groupId : ''),\n\t\t\t\t\t\t\t\t\tVALUE: text\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tfail: (e) => {\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tfail: (e) => {}\n\t\t\t\t});\n\t\t\t},\n\t\t\tfail: () => {\n\t\t\t}\n\t\t});\n\t}\n\n\tload(callback, groupId)\n\t{\n\t\tif (parseInt(groupId) <= 0)\n\t\t{\n\t\t\tgroupId = false;\n\t\t}\n\n\t\tif (!Type.isObject(app.db))\n\t\t{\n\t\t\tcallback.onEmpty();\n\t\t\treturn null;\n\t\t}\n\n\t\tthis.check({\n\t\t\tsuccess: () => {\n\t\t\t\tapp.db.getRows({\n\t\t\t\t\ttableName: this.getTableName(),\n\t\t\t\t\tfilter: {\n\t\t\t\t\t\tKEY: this.getKeyName() + (groupId ? '_' + groupId : '')\n\t\t\t\t\t},\n\t\t\t\t\tsuccess: (res) =>\n\t\t\t\t\t{\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tres.items.length > 0\n\t\t\t\t\t\t\t&& res.items[0].VALUE.length > 0\n\t\t\t\t\t\t)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvar result = JSON.parse(res.items[0].VALUE);\n\t\t\t\t\t\t\tif (Type.isPlainObject(result))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tcallback.onLoad(result);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tcallback.onEmpty();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcallback.onEmpty();\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tfail: (e) => { callback.onEmpty(); }\n\t\t\t\t});\n\t\t\t},\n\t\t\tfail: () => { callback.onEmpty(); }\n\t\t});\n\t}\n}\n\nexport {\n\tDatabase\n}","import {Tag, Dom, Loc, Type, Event} from \"main.core\";\nimport {Instance} from \"./feed\";\n\nclass PublicationQueue extends Event.EventEmitter\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\n\t\tthis.repo = {};\n\n\t\tthis.nodeId = {\n\t\t\tcontainer: 'post-balloon-container'\n\t\t};\n\n\t\tthis.class = {\n\t\t\tballoonHidden: 'post-balloon-hidden',\n\t\t\tballoonFixed: 'post-balloon-box-fixed',\n\t\t\tballoonPublished: 'post-balloon-done',\n\t\t\tballoonShow: 'post-balloon-show',\n\t\t\tballoonHide: 'post-balloon-hide'\n\t\t};\n\n\t\tthis.timeout = {\n\t\t\tshow: 750\n\t\t};\n\n\t\tthis.init();\n\t}\n\n\tinit()\n\t{\n\t\tBXMobileApp.addCustomEvent('Livefeed.PublicationQueue::afterSetItem', this.afterSetItem.bind(this));\n\t\tBXMobileApp.addCustomEvent('Livefeed.PublicationQueue::afterPostAdd', this.afterPostAdd.bind(this));\n\t\tBXMobileApp.addCustomEvent('Livefeed.PublicationQueue::afterPostAddError', this.afterPostAddError.bind(this));\n\t\tBXMobileApp.addCustomEvent('Livefeed.PublicationQueue::afterPostUpdate', this.afterPostUpdate.bind(this));\n\t\tBXMobileApp.addCustomEvent('Livefeed.PublicationQueue::afterPostUpdateError', this.afterPostUpdateError.bind(this));\n\n\t\tthis.setEventNamespace('BX.Mobile.Livefeed');\n\t\tthis.subscribe('onFeedReady', this.onFeedLoaded.bind(this));\n\t\tthis.subscribe('onPostInserted', this.onPostInserted.bind(this));\n\n\t\tEvent.bind(document, 'scroll', this.onScroll.bind(this));\n\t}\n\n\tonScroll()\n\t{\n\t\tconst\n\t\t\tcontainerNode = document.getElementById(this.nodeId.container);\n\n\t\tif (!Type.isDomNode(containerNode))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (window.pageYOffset > 0)\n\t\t{\n\t\t\tcontainerNode.classList.add(this.class.balloonFixed);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tcontainerNode.classList.remove(this.class.balloonFixed);\n\t\t}\n\t}\n\n\tonFeedLoaded()\n\t{\n\t\tapp.exec('getStorageValue', {\n\t\t\tstorageId: 'livefeed',\n\t\t\tkey: 'publicationQueue',\n\t\t\tcallback: (queue) =>\n\t\t\t{\n\t\t\t\tqueue = (Type.isPlainObject(queue) ? queue : (Type.isStringFilled(queue) ? JSON.parse(queue) : {}));\n\n\t\t\t\tif (!Type.isPlainObject(queue))\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tfor (let key in queue)\n\t\t\t\t{\n\t\t\t\t\tif (!queue.hasOwnProperty(key))\n\t\t\t\t\t{\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.addToTray(key, {});\n\t\t\t\t}\n\n\t\t\t\tthis.drawList();\n\t\t\t}\n\t\t});\n\t}\n\n\tonPostInserted(event)\n\t{\n\t\tthis.removeFromTray(event.data.key);\n\t}\n\n\taddToTray(key, params)\n\t{\n\t\tthis.repo[key] = params;\n\t\tthis.repo[key].node = this.drawItem();\n\t\tthis.repo[key].node.classList.add(this.class.balloonShow);\n\t}\n\tremoveFromTray(key, params)\n\t{\n\t\tthis.hideItem(key);\n\n\t\tsetTimeout(() => {\n\t\t\tif (this.repo[key])\n\t\t\t{\n\t\t\t\tdelete this.repo[key];\n\t\t\t}\n\t\t}, 3000);\n\t}\n\n\taddSuccess(key)\n\t{\n\t\tif (\n\t\t\tthis.repo[key]\n\t\t\t&& this.repo[key].node\n\t\t)\n\t\t{\n\t\t\tthis.repo[key].node.classList.remove(this.class.balloonHidden);\n\t\t\tthis.repo[key].node.classList.remove(this.class.balloonShow);\n\t\t\tthis.repo[key].node.classList.add(this.class.balloonPublished);\n\t\t\tthis.repo[key].node.lastElementChild.innerHTML = Loc.getMessage('MOBILE_EXT_LIVEFEED_PUBLICATION_QUEUE_SUCCESS_TITLE');\n\t\t}\n\n\t\tsetTimeout(() => {\n\t\t\tthis.removeFromTray(key);\n\t\t}, 5000);\n\t}\n\n\tdrawItem()\n\t{\n\t\tconst\n\t\t\ttitle = Loc.getMessage('MOBILE_EXT_LIVEFEED_PUBLICATION_QUEUE_ITEM_TITLE');\n\n\t\treturn Tag.render`\n\t\t\t\t<div class=\"post-balloon-hidden post-balloon post-balloon-active\"><span class=\"post-balloon-icon\"></span><span class=\"post-balloon-text\">${title}</span></div>\n\t\t\t`;\n\t}\n\n\thideItem(key, params)\n\t{\n\t\tif (this.repo[key])\n\t\t{\n\t\t\tthis.repo[key].node.classList.add(this.class.balloonHide);\n\t\t}\n\t}\n\n\tdrawList()\n\t{\n\t\tconst\n\t\t\tcontainerNode = document.getElementById(this.nodeId.container);\n\n\t\tif (!Type.isDomNode(containerNode))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tDom.clean(containerNode);\n\n\t\tfor (let key in this.repo)\n\t\t{\n\t\t\tif (\n\t\t\t\t!this.repo.hasOwnProperty(key)\n\t\t\t\t|| !Type.isDomNode(this.repo[key].node)\n\t\t\t)\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tDom.append(this.repo[key].node, containerNode);\n\t\t}\n\t}\n\n\tafterSetItem(params)\n\t{\n\t\tconst\n\t\t\tkey = params.key ? params.key : '',\n\t\t\tpageId = params.pageId ? params.pageId : '',\n\t\t\tcontentType = params.contentType ? params.contentType : '';\n\n\t\tif (\n\t\t\tpageId != Instance.getPageId()\n\t\t\t|| !key\n\t\t\t|| !Type.isStringFilled(contentType)\n\t\t)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (contentType == 'post')\n\t\t{\n\t\t\tthis.addToTray(key, {\n\t\t\t\tkey: key\n\t\t\t});\n\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.drawList();\n\t\t\t}, this.timeout.show);\n\t\t}\n\t}\n\n\tafterPostAdd(params)\n\t{\n\t\tif (!Type.isPlainObject(params))\n\t\t{\n\t\t\tparams = {};\n\t\t}\n\n\t\tconst\n\t\t\tkey = params.key ? params.key : '';\n\n\t\tthis.addSuccess(key);\n\t\tthis.drawList();\n\t}\n\n\tafterPostUpdate(params)\n\t{\n\t\tif (!Type.isPlainObject(params))\n\t\t{\n\t\t\tparams = {};\n\t\t}\n\n\t\tconst\n\t\t\tkey = params.key ? params.key : '';\n\n\t\tthis.addSuccess(key);\n\t\tthis.drawList();\n\t}\n\n\tafterPostAddError(params)\n\t{\n\t\tif (!Type.isPlainObject(params))\n\t\t{\n\t\t\tparams = {};\n\t\t}\n\n\t\tconst\n\t\t\tkey = params.key ? params.key : '';\n\n\t\tthis.removeFromTray(key, {\n\t\t\tkey: key\n\t\t});\n\t\tthis.drawList();\n\t}\n\n\tafterPostUpdateError(params)\n\t{\n\t\tif (!Type.isPlainObject(params))\n\t\t{\n\t\t\tparams = {};\n\t\t}\n\n\t\tconst\n\t\t\tkey = params.key ? params.key : '';\n\n\t\tthis.removeFromTray(key, {\n\t\t\tkey: key\n\t\t});\n\t\tthis.drawList();\n\t}\n}\n\nexport {\n\tPublicationQueue\n}","import {Loc, Type} from \"main.core\";\n\nclass Post\n{\n\tconstructor(data)\n\t{\n\t\tthis.logId = 0;\n\t\tthis.entryType = '';\n\t\tthis.useFollow = false;\n\t\tthis.useTasks = false;\n\t\tthis.perm = '';\n\t\tthis.destinations = {};\n\t\tthis.postId = 0;\n\t\tthis.url = '';\n\t\tthis.entityXmlId = '';\n\t\tthis.readOnly = false;\n\t\tthis.contentTypeId = '';\n\t\tthis.contentId = 0;\n\t\tthis.showFull = false;\n\n\t\tthis.taskId = 0;\n\t\tthis.taskData = null;\n\n\t\tthis.calendarEventId = 0;\n\n\t\tthis.init(data);\n\t}\n\n\tinit(data)\n\t{\n\t\tlet {\n\t\t\tlogId,\n\t\t\tentryType,\n\t\t\tuseFollow,\n\t\t\tuseTasks,\n\t\t\tperm,\n\t\t\tdestinations,\n\t\t\tpostId,\n\t\t\turl,\n\t\t\tentityXmlId,\n\t\t\treadOnly,\n\t\t\tcontentTypeId,\n\t\t\tcontentId,\n\t\t\tshowFull,\n\n\t\t\ttaskId,\n\t\t\ttaskData,\n\n\t\t\tcalendarEventId\n\t\t} = data;\n\n\t\tlogId = parseInt(logId);\n\n\t\tif (logId <= 0)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.logId = logId;\n\n\t\tthis.postId = parseInt(postId);\n\t\tthis.contentId = parseInt(contentId);\n\t\tthis.taskId = parseInt(taskId);\n\t\tthis.calendarEventId = parseInt(calendarEventId);\n\n\t\tthis.useFollow = !!useFollow;\n\t\tthis.useTasks = !!useTasks;\n\t\tthis.readOnly = !!readOnly;\n\t\tthis.showFull = !!showFull;\n\n\t\tif (Type.isStringFilled(entryType))\n\t\t{\n\t\t\tthis.entryType = entryType;\n\t\t}\n\t\tif (Type.isStringFilled(perm))\n\t\t{\n\t\t\tthis.perm = perm;\n\t\t}\n\t\tif (Type.isStringFilled(url))\n\t\t{\n\t\t\tthis.url = url;\n\t\t}\n\t\tif (Type.isStringFilled(entityXmlId))\n\t\t{\n\t\t\tthis.entityXmlId = entityXmlId;\n\t\t}\n\t\tif (Type.isStringFilled(contentTypeId))\n\t\t{\n\t\t\tthis.contentTypeId = contentTypeId;\n\t\t}\n\t\tif (Type.isStringFilled(taskData))\n\t\t{\n\t\t\ttry\n\t\t\t{\n\t\t\t\tthis.taskData = JSON.parse(taskData);\n\t\t\t}\n\t\t\tcatch(e)\n\t\t\t{\n\t\t\t\tthis.taskData = null;\n\t\t\t}\n\t\t}\n\n\t\tif (Type.isPlainObject(destinations))\n\t\t{\n\t\t\tthis.destinations = destinations;\n\t\t}\n\t}\n\n\tsetFavorites(data):void\n\t{\n\t\tif (this.logId <= 0)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tlet {node, event} = data;\n\n\t\t// for old versions without post menu in the feed\n\t\tif (!Type.isDomNode(node))\n\t\t{\n\t\t\tnode = document.getElementById('log_entry_favorites_' + this.logId);\n\t\t}\n\n\t\tif (Type.isDomNode(node))\n\t\t{\n\t\t\tconst oldValue = (node.getAttribute('data-favorites') === 'Y' ? 'Y' : 'N');\n\t\t\tconst newValue = (oldValue === 'Y' ? 'N' : 'Y');\n\n\t\t\t// for old versions without post menu in the feed\n\t\t\tif (node.classList.contains('lenta-item-fav'))\n\t\t\t{\n\t\t\t\tif (oldValue === 'Y')\n\t\t\t\t{\n\t\t\t\t\tnode.classList.remove('lenta-item-fav-active');\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tnode.classList.add('lenta-item-fav-active');\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tnode.setAttribute('data-favorites', newValue);\n\n\t\t\tconst BMAjaxWrapper = new MobileAjaxWrapper;\n\t\t\tBMAjaxWrapper.runAction('socialnetwork.api.livefeed.changeFavorites', {\n\t\t\t\tdata: {\n\t\t\t\t\tlogId: this.logId,\n\t\t\t\t\tvalue: newValue\n\t\t\t\t},\n\t\t\t\tanalyticsLabel: {\n\t\t\t\t\tb24statAction: (newValue === 'Y' ? 'addFavorites' : 'removeFavorites'),\n\t\t\t\t\tb24statContext: 'mobile'\n\t\t\t\t}\n\t\t\t}).then((response) => {\n\t\t\t\tif (response.data.success)\n\t\t\t\t{\n\t\t\t\t\tif (newValue === 'Y')\n\t\t\t\t\t{\n\t\t\t\t\t\toMSL.setFollow({\n\t\t\t\t\t\t\tlogId: this.logId,\n\t\t\t\t\t\t\tbOnlyOn: true,\n\t\t\t\t\t\t\tbRunEvent: true,\n\t\t\t\t\t\t\tbAjax: false\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tBXMobileApp.onCustomEvent('onLogEntryFavorites', {\n\t\t\t\t\t\tlog_id: this.logId,\n\t\t\t\t\t\tpage_id: Loc.getMessage('MSLPageId')\n\t\t\t\t\t}, true);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tnode.setAttribute('data-favorites', oldValue);\n\t\t\t\t}\n\t\t\t}, () => {\n\t\t\t\tnode.setAttribute('data-favorites', oldValue);\n\t\t\t});\n\t\t}\n\n\t\tif (event instanceof Event)\n\t\t{\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\t\t}\n\t}\n\n\tsetPinned(data):void\n\t{\n\t\tif (this.logId <= 0)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst {\n\t\t\tmenuNode,\n\t\t\tcontext\n\t\t} = data;\n\n\t\tif (Type.isDomNode(menuNode))\n\t\t{\n\t\t\tconst oldValue = (menuNode.getAttribute('data-pinned') === 'Y' ? 'Y' : 'N');\n\t\t\tconst newValue = (oldValue === 'Y' ? 'N' : 'Y');\n\n\t\t\tmenuNode.setAttribute('data-pinned', newValue);\n\n\t\t\tif (context === 'detail')\n\t\t\t{\n\t\t\t\tBXMobileApp.onCustomEvent('Livefeed::showLoader', {}, true, true);\n\t\t\t}\n\n\t\t\tconst BMAjaxWrapper = new MobileAjaxWrapper;\n\t\t\tBMAjaxWrapper.runAction('socialnetwork.api.livefeed.logentry.' + (newValue === 'Y' ? 'pin' : 'unpin'), {\n\t\t\t\tdata: {\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tlogId: this.logId\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tanalyticsLabel: {\n\t\t\t\t\tb24statAction: (newValue === 'Y' ? 'pinLivefeedEntry' : 'unpinLivefeedEntry'),\n\t\t\t\t\tb24statContext: 'mobile'\n\t\t\t\t}\n\t\t\t}).then((response) => {\n\t\t\t\tBXMobileApp.onCustomEvent('Livefeed::hideLoader', {}, true, true);\n\t\t\t\tif (response.data.success)\n\t\t\t\t{\n\t\t\t\t\tBXMobileApp.onCustomEvent('Livefeed.PinnedPanel::change', {\n\t\t\t\t\t\tlogId: this.logId,\n\t\t\t\t\t\tvalue: newValue,\n\t\t\t\t\t\tpostNode: menuNode.closest('.lenta-item'),\n\t\t\t\t\t\tpinActionContext: context\n\t\t\t\t\t}, true, true);\n\t\t\t\t\tBXMobileApp.onCustomEvent('Livefeed.PostDetail::pinChanged', {\n\t\t\t\t\t\tlogId: this.logId,\n\t\t\t\t\t\tvalue: newValue\n\t\t\t\t\t}, true, true);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tmenuNode.setAttribute('data-pinned', oldValue);\n\t\t\t\t}\n\t\t\t}, () => {\n\t\t\t\tBXMobileApp.onCustomEvent('Livefeed::hideLoader', {}, true, true);\n\t\t\t\tmenuNode.setAttribute('data-pinned', oldValue);\n\t\t\t});\n\t\t}\n\t}\n\n\topenDetail(params)\n\t{\n\t\tconst {\n\t\t\tpathToEmptyPage,\n\t\t\tpathToCalendarEvent,\n\t\t\tpathToTasksRouter,\n\t\t\tevent,\n\t\t\tfocusComments,\n\t\t\tshowFull\n\t\t} = params;\n\n\t\tif (!Type.isStringFilled(pathToEmptyPage))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (\n\t\t\tthis.taskId > 0\n\t\t\t&& BXMobileAppContext.getApiVersion() >= 31\n\t\t\t&& this.taskData\n\t\t)\n\t\t{\n\t\t\tBXMobileApp.Events.postToComponent('taskbackground::task::action', [\n\t\t\t\t{\n\t\t\t\t\tid: this.taskId,\n\t\t\t\t\ttitle: 'TASK',\n\t\t\t\t\ttaskInfo: {\n\t\t\t\t\t\ttitle: this.taskData.title,\n\t\t\t\t\t\tcreatorIcon: this.taskData.creatorIcon,\n\t\t\t\t\t\tresponsibleIcon: this.taskData.responsibleIcon\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tthis.taskId,\n\t\t\t\t{\n\t\t\t\t\ttaskId: this.taskId,\n\t\t\t\t\tgetTaskInfo: true\n\t\t\t\t}\n\t\t\t]);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tlet path = pathToEmptyPage;\n\n\t\t\tif (\n\t\t\t\tthis.calendarEventId > 0\n\t\t\t\t&& !focusComments\n\t\t\t\t&& pathToCalendarEvent.length > 0\n\t\t\t)\n\t\t\t{\n\t\t\t\tpath = pathToCalendarEvent.replace('#EVENT_ID#', this.calendarEventId);\n\t\t\t}\n\t\t\telse if (\n\t\t\t\tthis.taskId > 0\n\t\t\t\t&& this.taskData\n\t\t\t\t&& pathToTasksRouter.length > 0\n\t\t\t) // API version <= 31\n\t\t\t{\n\t\t\t\tpath = pathToTasksRouter\n\t\t\t\t\t.replace('__ROUTE_PAGE__', 'view')\n\t\t\t\t\t.replace('#USER_ID#', Loc.getMessage('MOBILE_EXT_LIVEFEED_CURRENT_USER_ID')) + '&TASK_ID=' + this.taskId;\n\t\t\t}\n\n\t\t\t__MSLOpenLogEntryNew({\n\t\t\t\tpath: path,\n\t\t\t\tlog_id: this.logId,\n\t\t\t\tentry_type: this.entryType,\n\t\t\t\tuse_follow: (this.useFollow ? 'Y' : 'N'),\n\t\t\t\tuse_tasks: (this.useTasks ? 'Y' : 'N'),\n\t\t\t\tpost_perm: this.perm,\n\t\t\t\tdestinations: this.destinations,\n\t\t\t\tpost_id: this.postId,\n\t\t\t\tpost_url: this.url,\n\t\t\t\tentity_xml_id: this.entityXmlId,\n\t\t\t\tfocus_comments: focusComments,\n\t\t\t\tfocus_form: false,\n\t\t\t\tshow_full: (this.showFull || showFull),\n\t\t\t\tread_only: (this.readOnly ? 'Y' : 'N'),\n\t\t\t\tpost_content_type_id: this.contentTypeId,\n\t\t\t\tpost_content_id: this.contentId,\n\t\t\t}, event);\n\t\t}\n\t}\n\n\tinitDetailPin()\n\t{\n\t\tconst menuNode = document.getElementById('log-entry-menu-' + this.logId);\n\t\tif (!menuNode)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tvar postNode = BX.findParent(menuNode, { className: 'post-wrap' });\n\t\tif (!postNode)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tvar pinnedValue = menuNode.getAttribute('data-pinned');\n\t\tif (pinnedValue === 'Y')\n\t\t{\n\t\t\tpostNode.classList.add('lenta-item-pin-active');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tpostNode.classList.remove('lenta-item-pin-active');\n\t\t}\n\t}\n\n\texpandText()\n\t{\n\t\toMSL.expandText(this.logId);\n\t}\n}\n\nexport {\n\tPost\n}","import {Loc, Type} from \"main.core\";\nimport {Post} from \"./../post\";\n\nclass PostMenu\n{\n\tinit(data)\n\t{\n\t\tthis.iconUrlFolderPath = '/bitrix/templates/mobile_app/images/lenta/menu/';\n\t\tthis.sectionCode = 'defaultSection';\n\n\t\tthis.logId = parseInt(data.logId);\n\t\tthis.postId = parseInt(data.postId);\n\t\tthis.postPerms = (Type.isStringFilled(data.postPerms) ? data.postPerms : 'R');\n\t\tthis.pageId = data.pageId;\n\t\tthis.contentTypeId = (Type.isStringFilled(data.contentTypeId) ? data.contentTypeId : null);\n\t\tthis.contentId = (Type.isInteger(data.contentId) ? data.contentId : 0);\n\n\t\tthis.useShare = !!data.useShare && (this.postId > 0);\n\t\tthis.useFavorites = !!data.useFavorites && (this.logId > 0);\n\t\tthis.useFollow = !!data.useFollow && (this.logId > 0);\n\t\tthis.usePinned = !!data.usePinned && (this.logId > 0);\n\t\tthis.useTasks = (Loc.getMessage('MOBILE_EXT_LIVEFEED_USE_TASKS') === 'Y');\n\t\tthis.useRefreshComments = !!data.useRefreshComments;\n\n\t\tthis.favoritesValue = !!data.favoritesValue;\n\t\tthis.followValue = !!data.followValue;\n\t\tthis.pinnedValue = !!data.pinnedValue;\n\n\t\tthis.target = (Type.isDomNode(data.target) ? data.target : null);\n\t\tthis.context = (Type.isStringFilled(data.context) ? data.context : 'list');\n\t}\n\n\tgetMenuItems()\n\t{\n\t\tconst result = [];\n\n\t\tif (this.usePinned)\n\t\t{\n\t\t\tresult.push({\n\t\t\t\tid: 'pinned',\n\t\t\t\ttitle: Loc.getMessage('MOBILE_EXT_LIVEFEED_POST_MENU_PINNED_' + (!!this.pinnedValue ? 'Y' : 'N')),\n\t\t\t\ticonUrl: this.iconUrlFolderPath + (!!this.pinnedValue ? 'unpin.png' : 'pin.png'),\n\t\t\t\tsectionCode: this.sectionCode,\n\t\t\t\taction: () =>\n\t\t\t\t{\n\t\t\t\t\tconst postInstance = new Post({\n\t\t\t\t\t\tlogId: this.logId\n\t\t\t\t\t});\n\t\t\t\t\treturn postInstance.setPinned({\n\t\t\t\t\t\tmenuNode: this.target,\n\t\t\t\t\t\tcontext: this.context\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (this.useShare)\n\t\t{\n\t\t\tvar selectedDestinations = {\n\t\t\t\ta_users: [],\n\t\t\t\tb_groups: []\n\t\t\t};\n\n\t\t\tif (\n\t\t\t\tselectedDestinations.a_users.length > 0\n\t\t\t\t|| selectedDestinations.b_groups.length > 0\n\t\t\t)\n\t\t\t{\n\t\t\t\tresult.push({\n\t\t\t\t\tid: 'sharePost',\n\t\t\t\t\ttitle: Loc.getMessage('MOBILE_EXT_LIVEFEED_POST_MENU_SHARE'),\n\t\t\t\t\ticonName: 'add',\n\t\t\t\t\ticonUrl: this.iconUrlFolderPath + 'n_plus.png',\n\t\t\t\t\tsectionCode: this.sectionCode,\n\t\t\t\t\taction: () =>\n\t\t\t\t\t{\n\t\t\t\t\t\tapp.openTable({\n\t\t\t\t\t\t\tcallback: () => {\n\t\t\t\t\t\t\t\toMSL.shareBlogPost();\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\turl: Loc.getMessage('MOBILE_EXT_LIVEFEED_SITE_DIR') + 'mobile/index.php?mobile_action=' + (Loc.getMessage('MOBILE_EXT_LIVEFEED_CURRENT_EXTRANET_SITE') === 'Y' ? 'get_group_list' : 'get_usergroup_list') + '&feature=blog',\n\t\t\t\t\t\t\tmarkmode: true,\n\t\t\t\t\t\t\tmultiple: true,\n\t\t\t\t\t\t\treturn_full_mode: true,\n\t\t\t\t\t\t\tuser_all: true,\n\t\t\t\t\t\t\tshowtitle: true,\n\t\t\t\t\t\t\tmodal: true,\n\t\t\t\t\t\t\tselected: selectedDestinations,\n\t\t\t\t\t\t\talphabet_index: true,\n\t\t\t\t\t\t\tokname: Loc.getMessage('MOBILE_EXT_LIVEFEED_SHARE_TABLE_BUTTON_OK'),\n\t\t\t\t\t\t\tcancelname: Loc.getMessage('MOBILE_EXT_LIVEFEED_SHARE_TABLE_BUTTON_CANCEL'),\n\t\t\t\t\t\t\toutsection: (Loc.getMessage('MOBILE_EXT_LIVEFEED_DEST_TO_ALL_DENIED') !== 'Y')\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\tarrowFlag: false\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tif (\n\t\t\tthis.postId > 0\n\t\t\t&& this.postPerms === 'W'\n\t\t)\n\t\t{\n\t\t\tresult.push({\n\t\t\t\tid: 'edit',\n\t\t\t\ttitle: Loc.getMessage('MOBILE_EXT_LIVEFEED_POST_MENU_EDIT'),\n\t\t\t\ticonUrl: this.iconUrlFolderPath + 'pencil.png',\n\t\t\t\tsectionCode: this.sectionCode,\n\t\t\t\taction: () =>\n\t\t\t\t{\n\t\t\t\t\toMSL.editBlogPost({\n\t\t\t\t\t\tfeed_id: window.LiveFeedID,\n\t\t\t\t\t\tpost_id: this.postId,\n\t\t\t\t\t\tpinnedContext: !!this.pinnedValue,\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tarrowFlag: false,\n\t\t\t\tfeature: 'edit'\n\t\t\t});\n\n\t\t\tresult.push({\n\t\t\t\tid: 'delete',\n\t\t\t\ttitle: Loc.getMessage('MOBILE_EXT_LIVEFEED_POST_MENU_DELETE'),\n\t\t\t\ticonName: 'delete',\n\t\t\t\tsectionCode: this.sectionCode,\n\t\t\t\taction: () =>\n\t\t\t\t{\n\t\t\t\t\toMSL.deleteBlogPost({\n\t\t\t\t\t\tpost_id: this.postId\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tarrowFlag: false\n\t\t\t});\n\t\t}\n\n\t\tif (this.useFavorites)\n\t\t{\n\t\t\tresult.push({\n\t\t\t\tid: 'favorites',\n\t\t\t\ttitle: Loc.getMessage('MOBILE_EXT_LIVEFEED_POST_MENU_FAVORITES_' + (!!this.favoritesValue ? 'Y' : 'N')),\n\t\t\t\ticonUrl: this.iconUrlFolderPath + 'favorite.png',\n\t\t\t\tsectionCode: this.sectionCode,\n\t\t\t\taction: () =>\n\t\t\t\t{\n\t\t\t\t\tconst postInstance = new Post({\n\t\t\t\t\t\tlogId: this.logId\n\t\t\t\t\t});\n\n\t\t\t\t\treturn postInstance.setFavorites({\n\t\t\t\t\t\tnode: this.target\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tarrowFlag: false,\n\t\t\t\tfeature: 'favorites'\n\t\t\t});\n\t\t}\n\n\t\tif (this.useFollow)\n\t\t{\n\t\t\tresult.push({\n\t\t\t\tid: 'follow',\n\t\t\t\ttitle: Loc.getMessage('MOBILE_EXT_LIVEFEED_POST_MENU_FOLLOW_' + (!!this.followValue ? 'Y' : 'N')),\n\t\t\t\ticonUrl: this.iconUrlFolderPath + 'eye.png',\n\t\t\t\tsectionCode: this.sectionCode,\n\t\t\t\taction: () =>\n\t\t\t\t{\n\t\t\t\t\toMSL.setFollow({\n\t\t\t\t\t\tlogId: this.logId,\n\t\t\t\t\t\tmenuNode: this.target,\n\t\t\t\t\t\tpageId: this.pageId,\n\t\t\t\t\t\tbOnlyOn: false,\n\t\t\t\t\t\tbAjax: true,\n\t\t\t\t\t\tbRunEvent: true\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tarrowFlag: false\n\t\t\t});\n\t\t}\n\n\t\tif (this.useRefreshComments)\n\t\t{\n\t\t\tresult.push({\n\t\t\t\tid: 'refreshPostComments',\n\t\t\t\ttitle: Loc.getMessage('MOBILE_EXT_LIVEFEED_POST_MENU_REFRESH_COMMENTS'),\n\t\t\t\ticonUrl: this.iconUrlFolderPath + 'n_refresh.png',\n\t\t\t\taction: () => {\n\t\t\t\t\tif (oMSL.bDetailEmptyPage)\n\t\t\t\t\t{\n\t\t\t\t\t\t// get comments on refresh from detail page menu\n\t\t\t\t\t\toMSL.getComments({\n\t\t\t\t\t\t\tts: oMSL.iDetailTs,\n\t\t\t\t\t\t\tbPullDown: true,\n\t\t\t\t\t\t\tobFocus: {\n\t\t\t\t\t\t\t\tform: false\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tdocument.location.reload(true);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tarrowFlag: false\n\t\t\t});\n\t\t}\n\n\t\tif (\n\t\t\tType.isStringFilled(this.contentTypeId)\n\t\t\t&& this.contentId > 0\n\t\t)\n\t\t{\n\t\t\tresult.push({\n\t\t\t\tid: 'getPostLink',\n\t\t\t\ttitle: Loc.getMessage('MOBILE_EXT_LIVEFEED_POST_MENU_GET_LINK'),\n\t\t\t\ticonUrl: this.iconUrlFolderPath + 'link.png',\n\t\t\t\tsectionCode: this.sectionCode,\n\t\t\t\taction: () =>\n\t\t\t\t{\n\t\t\t\t\toMSL.copyPostLink({\n\t\t\t\t\t\tcontentTypeId: this.contentTypeId,\n\t\t\t\t\t\tcontentId: this.contentId\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tarrowFlag: false\n\t\t\t});\n\n\t\t\tif (\n\t\t\t\tthis.useTasks\n\t\t\t\t&& this.logId > 0\n\t\t\t)\n\t\t\t{\n\t\t\t\tresult.push({\n\t\t\t\t\tid: 'createTask',\n\t\t\t\t\ttitle: Loc.getMessage('MOBILE_EXT_LIVEFEED_POST_MENU_CREATE_TASK'),\n\t\t\t\t\ticonUrl: this.iconUrlFolderPath + 'n_check.png',\n\t\t\t\t\tsectionCode: this.sectionCode,\n\t\t\t\t\taction: () =>\n\t\t\t\t\t{\n\t\t\t\t\t\toMSL.createTask({\n\t\t\t\t\t\t\tentityType: this.contentTypeId,\n\t\t\t\t\t\t\tentityId: this.contentId,\n\t\t\t\t\t\t\tlogId: this.logId\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t},\n\t\t\t\t\tarrowFlag: false\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n}\n\nexport {\n\tPostMenu\n}","import {Dom, Type} from \"main.core\";\n\nclass PinnedPanel\n{\n\tconstructor(data)\n\t{\n\t\tthis.class = {\n\t\t\tpostItemPinned: 'lenta-item-pinned',\n\t\t\tpostItemPinActive: 'lenta-item-pin-active',\n\n\t\t\tpostItemPinnedBlock: 'post-item-pinned-block',\n\t\t\tpostItemPinnedTitle: 'post-item-pinned-title',\n\t\t\tpostItemPinnedTextBox: 'post-item-pinned-text-box',\n\t\t\tpostItemPinnedDesc: 'post-item-pinned-desc'\n\t\t};\n\t}\n\n\tgetPinnedData(params)\n\t{\n\t\tconst logId = (params.logId ? parseInt(params.logId) : 0);\n\t\tconst BMAjaxWrapper = new MobileAjaxWrapper;\n\n\t\tif (logId <= 0)\n\t\t{\n\t\t\treturn Promise.reject();\n\t\t}\n\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tBMAjaxWrapper.runAction('socialnetwork.api.livefeed.logentry.getPinData', {\n\t\t\t\tdata: {\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tlogId: logId\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}).then((response) => {\n\t\t\t\tif (response.status === 'success')\n\t\t\t\t{\n\t\t\t\t\tresolve(response.data);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\treject(response.errors);\n\t\t\t\t}\n\t\t\t}, (response) => {\n\t\t\t\treject();\n\t\t\t});\n\t\t})\n\t}\n\n\tinsertEntry({\n\t\tlogId,\n\t\tpostNode,\n\t\tpinnedPanelNode,\n\t\tpinnedContent\n\t})\n\t{\n\t\tif (\n\t\t\t!Type.isDomNode(postNode)\n\t\t\t|| !Type.isDomNode(pinnedPanelNode)\n\t\t)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst postItemPinnedBlock = postNode.querySelector(`.${this.class.postItemPinnedBlock}`);\n\n\t\tif (!Type.isDomNode(postItemPinnedBlock))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tpostNode.classList.add(this.class.postItemPinned);\n\t\tpostNode.classList.add(this.class.postItemPinActive);\n\n\t\tpostItemPinnedBlock.innerHTML = `${(Type.isStringFilled(pinnedContent.TITLE) ? `<div class=\"${this.class.postItemPinnedTitle}\">${pinnedContent.TITLE}</div>` : '')}<div class=\"${this.class.postItemPinnedTextBox}\"><div class=\"${this.class.postItemPinnedDesc}\">${pinnedContent.DESCRIPTION}</div></div>`;\n\n\t\tDom.prepend(postNode, pinnedPanelNode);\n\t}\n\n\textractEntry({\n\t\tpostNode,\n\t\tcontainerNode\n\t})\n\t{\n\t\tif (\n\t\t\t!Type.isDomNode(postNode)\n\t\t\t|| !Type.isDomNode(containerNode)\n\t\t)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tpostNode.classList.remove(this.class.postItemPinned);\n\t\tpostNode.classList.remove(this.class.postItemPinActive);\n\n\t\tDom.prepend(postNode, containerNode);\n\t}\n}\n\nexport {\n\tPinnedPanel\n}","import {BalloonNotifier} from \"./balloonnotifier\";\nimport {NotificationBar} from \"./notificationbar\";\nimport {Database} from \"./database\";\nimport {PublicationQueue} from \"./publicationqueue\";\nimport {PostMenu} from \"./menu/postmenu\";\nimport {Post} from \"./post\";\nimport {PinnedPanel} from \"./pinned\";\nimport {Dom, Tag, Loc, Type, ajax, Runtime, Event} from \"main.core\";\n\nimport \"mobile.imageviewer\";\nimport {Utils} from \"mobile.utils\";\n\nclass Feed\n{\n\tconstructor()\n\t{\n\t\tthis.pageId = null;\n\t\tthis.refreshNeeded = false;\n\t\tthis.refreshStarted = false;\n\t\tthis.options = {};\n\t\tthis.nodeId = {\n\t\t\tfeedContainer: 'lenta_wrapper'\n\t\t};\n\t\tthis.class = {\n\t\t\tlistWrapper: 'lenta-list-wrap',\n\t\t\tpostWrapper: 'post-wrap',\n\t\t\tpinnedPanel: 'lenta-pinned-panel',\n\t\t\tpin: 'lenta-item-pin',\n\n\t\t\tpostNewContainerTransformNew: 'lenta-item-new-cont',\n\t\t\tpostNewContainerTransform: 'lenta-item-transform-cont',\n\t\t\tpostLazyLoadCheck: 'lenta-item-lazyload-check',\n\t\t\tlistPost: 'lenta-item',\n\t\t\tdetailPost: 'post-wrap',\n\t\t\tpostItemTopWrap: 'post-item-top-wrap',\n\t\t\tpostItemTop: 'post-item-top',\n\t\t\tpostItemPostBlock: 'post-item-contentview',\n\t\t\tpostItemDescriptionBlock: 'post-item-description',\n\t\t\tpostItemAttachedFileWrap: 'post-item-attached-disk-file-wrap',\n\t\t\tpostItemInformWrap: 'post-item-inform-wrap',\n\t\t\tpostItemInformWrapTree: 'post-item-inform-wrap-tree',\n\t\t\tpostItemInformComments: 'post-item-inform-comments',\n\t\t\tpostItemInformMore: 'post-item-more',\n\t\t\tpostItemMore: 'post-more-block',\n\t\t\tpostItemPinnedBlock: 'post-item-pinned-block',\n\t\t\tpostItemPinActive: 'lenta-item-pin-active'\n\t\t};\n\n\t\tthis.newPostContainer = null;\n\t\tthis.maxScroll = 0;\n\n\t\tthis.init();\n\t}\n\n\tinit()\n\t{\n\t\tBXMobileApp.addCustomEvent('Livefeed.PublicationQueue::afterPostAdd', this.afterPostAdd.bind(this));\n\t\tBXMobileApp.addCustomEvent('Livefeed.PublicationQueue::afterPostAddError', this.afterPostAddError.bind(this));\n\t\tBXMobileApp.addCustomEvent('Livefeed.PublicationQueue::afterPostUpdate', this.afterPostUpdate.bind(this));\n\t\tBXMobileApp.addCustomEvent('Livefeed.PublicationQueue::afterPostUpdateError', this.afterPostUpdateError.bind(this));\n\t\tBXMobileApp.addCustomEvent('Livefeed::showLoader', this.showLoader.bind(this));\n\t\tBXMobileApp.addCustomEvent('Livefeed::hideLoader', this.hideLoader.bind(this));\n\t\tBXMobileApp.addCustomEvent('Livefeed::scrollTop', this.scrollTop.bind(this));\n\t\tBXMobileApp.addCustomEvent(\"Livefeed::onLogEntryDetailNotFound\", this.removePost.bind(this)); // from detail page\n\t\tBXMobileApp.addCustomEvent('Livefeed.PinnedPanel::change', this.onPinnedPanelChange.bind(this));\n\t\tBXMobileApp.addCustomEvent('Livefeed.PostDetail::pinChanged', this.onPostPinChanged.bind(this));\n\n\t\tEvent.EventEmitter.subscribe('BX.LazyLoad:ImageLoaded', this.onLazyLoadImageLoaded.bind(this));\n\n\t\tdocument.addEventListener('DOMContentLoaded', () =>\n\t\t{\n\t\t\tdocument.addEventListener('click', this.handleClick.bind(this));\n\t\t});\n\n\t}\n\n\tsetPageId(value)\n\t{\n\t\tthis.pageId = value;\n\t}\n\n\tgetPageId()\n\t{\n\t\treturn this.pageId;\n\t};\n\n\tsetOptions(optionsList)\n\t{\n\t\tfor (let key in optionsList)\n\t\t{\n\t\t\tif (!optionsList.hasOwnProperty(key))\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tthis.options[key] = optionsList[key];\n\t\t}\n\t}\n\n\tgetOption(key, defaultValue)\n\t{\n\t\tif (Type.isUndefined(defaultValue))\n\t\t{\n\t\t\tdefaultValue = null;\n\t\t}\n\n\t\tif (!Type.isStringFilled(key))\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\treturn (!Type.isUndefined(this.options[key]) ? this.options[key] : defaultValue);\n\t}\n\n\tsetRefreshNeeded(value)\n\t{\n\t\tthis.refreshNeeded = value;\n\t}\n\n\tgetRefreshNeeded()\n\t{\n\t\treturn this.refreshNeeded;\n\t};\n\n\tsetRefreshStarted(value)\n\t{\n\t\tthis.refreshStarted = value;\n\t}\n\n\tgetRefreshStarted()\n\t{\n\t\treturn this.refreshStarted;\n\t};\n\n\tsetNewPostContainer(value)\n\t{\n\t\tthis.newPostContainer = value;\n\t};\n\n\tgetNewPostContainer()\n\t{\n\t\treturn this.newPostContainer;\n\t};\n\n\tsetMaxScroll(value)\n\t{\n\t\tthis.maxScroll = value;\n\t};\n\n\tgetMaxScroll()\n\t{\n\t\treturn this.maxScroll;\n\t};\n\n\tafterPostAdd(params)\n\t{\n\t\tif (!Type.isPlainObject(params))\n\t\t{\n\t\t\tparams = {};\n\t\t}\n\n\t\tconst postId = (typeof params.postId != 'undefined' ? parseInt(params.postId) : 0);\n\t\tconst context = (typeof params.context != 'undefined' ? params.context : '');\n\t\tconst pageId = (typeof params.pageId != 'undefined' ? params.pageId : '');\n\t\tconst groupId = (typeof params.groupId != 'undefined' ? params.groupId : null);\n\n\t\tif (pageId !== this.pageId)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tDatabaseUnsentPostInstance.delete(groupId);\n\n\t\tif (postId <= 0)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.getEntryContent({\n\t\t\tentityType: 'BLOG_POST',\n\t\t\tentityId: postId,\n\t\t\tqueueKey: params.key,\n\t\t\taction: 'add'\n\t\t});\n\t}\n\n\tafterPostUpdate(params)\n\t{\n\t\tif (!Type.isPlainObject(params))\n\t\t{\n\t\t\tparams = {};\n\t\t}\n\n\t\tconst context = (typeof params.context != 'undefined' ? params.context : '');\n\t\tconst pageId = (typeof params.pageId != 'undefined' ? params.pageId : '');\n\t\tconst postId = (typeof params.postId != 'undefined' ? parseInt(params.postId) : 0);\n\t\tconst pinned = (typeof params.pinned != 'undefined' && !!params.pinned);\n\n\t\tthis.getEntryContent({\n\t\t\tentityType: 'BLOG_POST',\n\t\t\tentityId: postId,\n\t\t\tqueueKey: params.key,\n\t\t\taction: 'update',\n\t\t\tpinned: pinned\n\t\t});\n\t}\n\n\tafterPostAddError(params)\n\t{\n\t\tif (!Type.isPlainObject(params))\n\t\t{\n\t\t\tparams = {};\n\t\t}\n\n\t\tconst context = (Type.isStringFilled(params.context) ? params.context : '');\n\t\tconst groupId = (params.groupId ? params.groupId : '');\n\n\t\tvar selectedDestinations = {\n\t\t\ta_users: [],\n\t\t\tb_groups: []\n\t\t};\n\n\t\toMSL.buildSelectedDestinations(\n\t\t\tparams.postData,\n\t\t\tselectedDestinations\n\t\t);\n\n\t\toMSL.setPostFormParams({\n\t\t\tselectedRecipients: selectedDestinations\n\t\t});\n\n\t\toMSL.setPostFormParams({\n\t\t\tmessageText: params.postData.POST_MESSAGE\n\t\t});\n\n\t\tDatabaseUnsentPostInstance.save(params.postData, groupId);\n\n\t\tparams.callback = () =>\n\t\t{\n\t\t\tapp.exec('showPostForm', oMSL.showNewPostForm());\n\t\t};\n\t\tthis.showPostError(params);\n\t}\n\n\tafterPostUpdateError(params)\n\t{\n\t\tif (!Type.isPlainObject(params))\n\t\t{\n\t\t\tparams = {};\n\t\t}\n\n\t\tconst context = (Type.isStringFilled(params.context) ? params.context : '');\n\n\t\tparams.callback = () =>\n\t\t{\n\t\t\toMSL.editBlogPost({\n\t\t\t\tpost_id: parseInt(params.postId)\n\t\t\t});\n\t\t};\n\t\tthis.showPostError(params);\n\t}\n\n\tshowPostError(params)\n\t{\n\t\tif (!Type.isPlainObject(params))\n\t\t{\n\t\t\tparams = {};\n\t\t}\n\n\t\tparams.callback = (Type.isFunction(params.callback) ? params.callback : () =>\n\t\t{\n\t\t});\n\n\t\tconst errorText = (Type.isStringFilled(params.errorText) ? params.errorText : false);\n\n\t\tNotificationBarInstance.showError({\n\t\t\ttext: (errorText ? errorText : Loc.getMessage('MOBILE_EXT_LIVEFEED_PUBLICATION_ERROR')),\n\t\t\tonTap: (notificationParams) =>\n\t\t\t{\n\t\t\t\tparams.callback(notificationParams);\n\t\t\t}\n\t\t});\n\t}\n\n\tshowLoader(params)\n\t{\n\t\tif (!Type.isPlainObject(params))\n\t\t{\n\t\t\tparams = {};\n\t\t}\n\n\t\tif (\n\t\t\tparams.pageId\n\t\t\t&& this.pageId !== null\n\t\t\t&& params.pageId != this.pageId\n\t\t)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tapp.showPopupLoader({\n\t\t\ttext: (\n\t\t\t\tType.isStringFilled(params.text)\n\t\t\t\t\t? params.text\n\t\t\t\t\t: ''\n\t\t\t)\n\t\t});\n\t}\n\n\thideLoader()\n\t{\n\t\tapp.hidePopupLoader();\n\t}\n\n\tscrollTop(params)\n\t{\n\t\tif (!Type.isPlainObject(params))\n\t\t{\n\t\t\tparams = {};\n\t\t}\n\n\t\tif (\n\t\t\tparams.pageId\n\t\t\t&& this.pageId !== null\n\t\t\t&& params.pageId != this.pageId\n\t\t)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\twindow.scrollTo(0, 0);\n\t};\n\n\tgetEntryContent(params)\n\t{\n\t\tif (!Type.isPlainObject(params))\n\t\t{\n\t\t\tparams = {};\n\t\t}\n\n\t\tconst logId = (params.logId ? parseInt(params.logId) : 0);\n\t\tconst BMAjaxWrapper = new MobileAjaxWrapper;\n\n\t\tif (\n\t\t\tlogId <= 0\n\t\t\t&& !(\n\t\t\t\tType.isStringFilled(params.entityType)\n\t\t\t\t&& parseInt(params.entityId) > 0\n\t\t\t)\n\t\t)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tBMAjaxWrapper.runComponentAction('bitrix:mobile.socialnetwork.log.ex', 'getEntryContent', {\n\t\t\tmode: 'class',\n\t\t\tsignedParameters: this.getOption('signedParameters', {}),\n\t\t\tdata: {\n\t\t\t\tparams: {\n\t\t\t\t\tlogId: (parseInt(params.logId) > 0 ? parseInt(params.logId) : 0),\n\t\t\t\t\tpinned: (!!params.pinned ? 'Y' : 'N'),\n\t\t\t\t\tentityType: (Type.isStringFilled(params.entityType) ? params.entityType : ''),\n\t\t\t\t\tentityId: (parseInt(params.entityId) > 0 ? parseInt(params.entityId) : 0),\n\t\t\t\t\tsiteTemplateId: BX.message('MOBILE_EXT_LIVEFEED_SITE_TEMPLATE_ID')\n\t\t\t\t}\n\t\t\t}\n\t\t}).then((response) =>\n\t\t{\n\t\t\tif (logId <= 0)\n\t\t\t{\n\t\t\t\tBMAjaxWrapper.runComponentAction('bitrix:mobile.socialnetwork.log.ex', 'getEntryLogId', {\n\t\t\t\t\tmode: 'class',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\tentityType: (Type.isStringFilled(params.entityType) ? params.entityType : ''),\n\t\t\t\t\t\t\tentityId: (parseInt(params.entityId) > 0 ? parseInt(params.entityId) : 0)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}).then((responseLogId) =>\n\t\t\t\t{\n\t\t\t\t\tif (responseLogId.data.logId)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.insertPost({\n\t\t\t\t\t\t\tlogId: responseLogId.data.logId,\n\t\t\t\t\t\t\tcontent: response.data.html,\n\t\t\t\t\t\t\tpostId: params.postId,\n\t\t\t\t\t\t\tqueueKey: params.queueKey,\n\t\t\t\t\t\t\taction: params.action\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else\n\t\t\t{\n\t\t\t\tthis.insertPost({\n\t\t\t\t\tlogId: logId,\n\t\t\t\t\tcontent: response.data.html,\n\t\t\t\t\tpostId: params.postId,\n\t\t\t\t\tqueueKey: params.queueKey,\n\t\t\t\t\taction: params.action\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t};\n\n\tprocessDetailBlock(postContainer, contentWrapper, selector)\n\t{\n\t\tif (\n\t\t\t!postContainer\n\t\t\t|| !contentWrapper\n\t\t)\n\t\t{\n\t\t\treturn Promise.reject();\n\t\t}\n\n\t\tconst content = contentWrapper.querySelector(selector);\n\t\tconst container = postContainer.querySelector(selector);\n\n\t\tif (container && content)\n\t\t{\n\t\t\treturn Runtime.html(container, content.innerHTML);\n\t\t}\n\n\t\treturn Promise.reject();\n\t}\n\n\tinsertPost(params)\n\t{\n\t\tconst containerNode = document.getElementById(this.nodeId.feedContainer);\n\t\tconst content = params.content;\n\t\tconst logId = params.logId;\n\t\tconst queueKey = params.queueKey;\n\t\tconst action = params.action;\n\n\t\tif (\n\t\t\t!Type.isDomNode(containerNode)\n\t\t\t|| !Type.isStringFilled(content)\n\t\t)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (action === 'update')\n\t\t{\n\t\t\tlet postContainer = document.getElementById('lenta_item_' + logId);\n\t\t\tif (!postContainer)\n\t\t\t{\n\t\t\t\tpostContainer = document.getElementById('lenta_item');\n\t\t\t}\n\n\t\t\tif (!postContainer)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst matches = this.pageId.match(/^detail_(\\d+)/i);\n\t\t\tif (\n\t\t\t\tmatches\n\t\t\t\t&& logId != matches[1]\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst contentWrapper = postContainer.appendChild(document.createElement('div'));\n\t\t\tcontentWrapper.style.display = 'none';\n\t\t\tRuntime.html(contentWrapper, content);\n\n\t\t\tif (postContainer.id === 'lenta_item') // empty detail\n\t\t\t{\n\t\t\t\tthis.processDetailBlock(postContainer, contentWrapper, `.${this.class.postItemTop}`);\n\t\t\t\tthis.processDetailBlock(postContainer, contentWrapper, `.${this.class.postItemPostBlock}`).then(() =>\n\t\t\t\t{\n\t\t\t\t\tBitrixMobile.LazyLoad.showImages();\n\t\t\t\t});\n\t\t\t\tthis.processDetailBlock(postContainer, contentWrapper, `.${this.class.postItemAttachedFileWrap}`).then(() =>\n\t\t\t\t{\n\t\t\t\t\tBitrixMobile.LazyLoad.showImages();\n\t\t\t\t});\n\t\t\t\tthis.processDetailBlock(postContainer, contentWrapper, `.${this.class.postItemInformWrap}`);\n\t\t\t\tthis.processDetailBlock(postContainer, contentWrapper, `.${this.class.postItemInformWrapTree}`);\n\t\t\t} else\n\t\t\t{\n\t\t\t\tpostContainer = postContainer.querySelector(`div.${this.class.postItemTopWrap}`);\n\n\t\t\t\tconst contentPostItemTopWrap = contentWrapper.querySelector(`div.${this.class.postItemTopWrap}`);\n\n\t\t\t\tRuntime.html(postContainer, contentPostItemTopWrap.innerHTML).then(() =>\n\t\t\t\t{\n\t\t\t\t\tBitrixMobile.LazyLoad.showImages();\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tcontentWrapper.remove();\n\t\t} else if (action === 'add')\n\t\t{\n\t\t\tthis.setNewPostContainer(Tag.render`<div class=\"${this.class.postNewContainerTransformNew} ${this.class.postLazyLoadCheck}\" ontransitionend=\"${this.handleInsertPostTransitionEnd.bind(this)}\"></div>`);\n\t\t\tDom.prepend(this.getNewPostContainer(), containerNode);\n\t\t\tUtils.htmlWithInlineJS(this.getNewPostContainer(), content).then(() =>\n\t\t\t{\n\t\t\t\tconst postNode = this.getNewPostContainer().querySelector(`div.${this.class.listPost}`);\n\t\t\t\tDom.style(this.getNewPostContainer(), 'height', `${postNode.scrollHeight + 15/*margin-bottom*/}px`);\n\t\t\t});\n\t\t}\n\n\t\tPublicationQueueInstance.emit('onPostInserted', new Event.BaseEvent({\n\t\t\tdata: {\n\t\t\t\tkey: queueKey\n\t\t\t}\n\t\t}));\n\t}\n\n\tremovePost(params)\n\t{\n\t\tconst logId = parseInt(params.logId);\n\n\t\tif (logId <= 0)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst itemNode = document.getElementById('lenta_item_' + logId);\n\n\t\tif (!itemNode)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\titemNode.remove();\n\t}\n\n\thandleInsertPostTransitionEnd(event)\n\t{\n\t\tif (event.propertyName === 'height')\n\t\t{\n\t\t\tthis.getNewPostContainer().classList.remove(this.class.postNewContainerTransformNew);\n\t\t\tthis.getNewPostContainer().classList.remove(this.class.postNewContainerTransform);\n\t\t\tDom.style(this.getNewPostContainer(), 'height', null);\n\n\t\t\tthis.recalcMaxScroll();\n\t\t\tBitrixMobile.LazyLoad.showImages();\n\t\t}\n\t}\n\n\tonLazyLoadImageLoaded(event)\n\t{\n\t\tthis.recalcMaxScroll();\n\n\t\tconst [imageNode] = event.getData();\n\t\tif (imageNode)\n\t\t{\n\t\t\tconst postCheckNode = imageNode.closest(`.${this.class.postLazyLoadCheck}`);\n\t\t\tif (postCheckNode)\n\t\t\t{\n\t\t\t\tconst postNode = postCheckNode.querySelector(`div.${this.class.listPost}`);\n\n\t\t\t\tif (postNode)\n\t\t\t\t{\n\t\t\t\t\tpostCheckNode.classList.add(this.class.postNewContainerTransform);\n\t\t\t\t\tDom.style(postCheckNode, 'height', `${postNode.scrollHeight}px`);\n\t\t\t\t\tsetTimeout(() =>\n\t\t\t\t\t{\n\t\t\t\t\t\tpostCheckNode.classList.remove(this.class.postNewContainerTransform);\n\t\t\t\t\t\tDom.style(postCheckNode, 'height', null);\n\t\t\t\t\t}, 500);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\trecalcMaxScroll()\n\t{\n\t\tthis.setMaxScroll(document.documentElement.scrollHeight - window.innerHeight - 190);\n\t}\n\n\tsetPreventNextPage(status)\n\t{\n\t\tthis.setOptions({\n\t\t\tpreventNextPage: !!status\n\t\t});\n\n\t\tconst refreshNeededNode = document.getElementById('next_page_refresh_needed');\n\t\tconst nextPageCurtainNode = document.getElementById('next_post_more');\n\n\t\tif (\n\t\t\trefreshNeededNode\n\t\t\t&& nextPageCurtainNode\n\t\t)\n\t\t{\n\t\t\trefreshNeededNode.style.display = (!!status ? 'block' : 'none');\n\t\t\tnextPageCurtainNode.style.display = (!!status ? 'none' : 'block');\n\t\t}\n\t}\n\n\tgetPinnedPanelNode()\n\t{\n\t\treturn document.querySelector('[data-livefeed-pinned-panel]');\n\t}\n\n\tonPinnedPanelChange(params)\n\t{\n\t\tconst logId = (params.logId ? parseInt(params.logId) : 0);\n\t\tconst value = (['Y', 'N'].indexOf(params.value) !== -1 ? params.value : null);\n\t\tconst pinActionContext = (Type.isStringFilled(params.pinActionContext) ? params.pinActionContext : 'list');\n\n\t\tif (\n\t\t\t!logId\n\t\t\t|| !value\n\t\t\t|| !this.getPinnedPanelNode()\n\t\t)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst pinnedPanel = new PinnedPanel({});\n\n\t\tlet postNode = (Type.isDomNode(params.postNode) ? params.postNode: null);\n\t\tif (!Type.isDomNode(params.postNode)) // from detail in list\n\t\t{\n\t\t\tpostNode = document.getElementById(`lenta_item_${logId}`);\n\t\t}\n\n\t\tif (!Type.isDomNode(postNode))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (value === 'N')\n\t\t{\n\t\t\tpinnedPanel.extractEntry({\n\t\t\t\tpostNode: postNode,\n\t\t\t\tcontainerNode: document.getElementById(this.nodeId.feedContainer)\n\t\t\t});\n\t\t}\n\t\telse if (value === 'Y')\n\t\t{\n\t\t\tif (pinActionContext === 'list')\n\t\t\t{\n\t\t\t\tapp.showPopupLoader({text: \"\"});\n\t\t\t}\n\n\t\t\tpinnedPanel.getPinnedData({\n\t\t\t\tlogId: logId\n\t\t\t}).then((pinnedData) =>\n\t\t\t{\n\t\t\t\tapp.hidePopupLoader();\n\t\t\t\tpinnedPanel.insertEntry({\n\t\t\t\t\tlogId: logId,\n\t\t\t\t\tpostNode: postNode,\n\t\t\t\t\tpinnedPanelNode: this.getPinnedPanelNode(),\n\t\t\t\t\tpinnedContent: pinnedData\n\t\t\t\t});\n\t\t\t}, (response) =>\n\t\t\t{\n\t\t\t\tapp.hidePopupLoader();\n\t\t\t})\n\t\t}\n\t}\n\n\tonPostPinChanged(params)\n\t{\n\t\tconst logId = (params.logId ? parseInt(params.logId) : 0);\n\t\tconst value = (['Y', 'N'].indexOf(params.value) !== -1 ? params.value : null);\n\n\t\tif (\n\t\t\t!logId\n\t\t\t|| !value\n\t\t)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst menuNode = document.getElementById('log-entry-menu-' + logId);\n\t\tif (!menuNode)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tlet postNode = menuNode.closest(`.${this.class.detailPost}`);\n\t\tif (!postNode)\n\t\t{\n\t\t\tpostNode = menuNode.closest(`.${this.class.listPost}`);\n\t\t}\n\t\tif (!postNode)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (value === 'Y')\n\t\t{\n\t\t\tpostNode.classList.add(this.class.postItemPinActive);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tpostNode.classList.remove(this.class.postItemPinActive);\n\t\t}\n\t}\n\n\thandleClick(e)\n\t{\n\t\tif (e.target.classList.contains(this.class.pin))\n\t\t{\n\t\t\tlet post = null;\n\t\t\tlet menuNode = null;\n\t\t\tlet context = 'list';\n\n\t\t\tlet postNode = e.target.closest(`.${this.class.listPost}`);\n\t\t\tif (postNode) // lest\n\t\t\t{\n\t\t\t\tmenuNode = postNode.querySelector('[data-menu-type=\"post\"]');\n\t\t\t\tpost = this.getPostFromNode(postNode);\n\t\t\t}\n\t\t\telse // detail\n\t\t\t{\n\t\t\t\tcontext = 'detail';\n\t\t\t\tpostNode = e.target.closest(`.${this.class.detailPost}`);\n\t\t\t\tif (postNode)\n\t\t\t\t{\n\t\t\t\t\tmenuNode = postNode.querySelector('[data-menu-type=\"post\"]');\n\t\t\t\t\tif (menuNode)\n\t\t\t\t\t{\n\t\t\t\t\t\tpost = this.getPostFromLogId(menuNode.getAttribute('data-log-id'));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\tpost\n\t\t\t\t&& menuNode\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn post.setPinned({\n\t\t\t\t\tmenuNode,\n\t\t\t\t\tcontext\n\t\t\t\t});\n\t\t\t}\n\n\t\t\te.stopPropagation();\n\t\t\treturn e.preventDefault();\n\t\t}\n\t\telse if (\n\t\t\t(\n\t\t\t\te.target.closest(`.${this.class.listWrapper}`)\n\t\t\t\t|| e.target.closest(`.${this.class.pinnedPanel}`)\n\t\t\t)\n\t\t\t&& !(\n\t\t\t\te.target.tagName.toLowerCase() === 'a'\n\t\t\t\t&& Type.isStringFilled(e.target.getAttribute('target'))\n\t\t\t\t&& e.target.getAttribute('target').toLowerCase() === '_blank'\n\t\t\t)\n\t\t)\n\t\t{\n\t\t\tconst detailFromPinned = !!(\n\t\t\t\te.target.classList.contains(this.class.postItemPinnedBlock)\n\t\t\t\t|| e.target.closest(`.${this.class.postItemPinnedBlock}`)\n\t\t\t);\n\t\t\tconst detailFromNormal = !!(!detailFromPinned && (\n\t\t\t\te.target.classList.contains(this.class.postItemPostBlock)\n\t\t\t\t|| e.target.closest(`.${this.class.postItemPostBlock}`)\n\t\t\t\t|| e.target.classList.contains(this.class.postItemDescriptionBlock) // tasks\n\t\t\t\t|| e.target.closest(`.${this.class.postItemDescriptionBlock}`)\n\n\t\t\t));\n\t\t\tconst detailToComments = !!(!detailFromPinned && !detailFromNormal && (\n\t\t\t\te.target.classList.contains(this.class.postItemInformComments)\n\t\t\t\t|| e.target.closest(`.${this.class.postItemInformComments}`)\n\t\t\t));\n\t\t\tconst detailToExpanded = !!(!detailFromPinned && !detailFromNormal && !detailToComments && (\n\t\t\t\te.target.classList.contains(this.class.postItemInformMore)\n\t\t\t\t|| e.target.closest(`.${this.class.postItemInformMore}`)\n\t\t\t));\n\n\t\t\tif (\n\t\t\t\tdetailFromPinned\n\t\t\t\t|| detailFromNormal\n\t\t\t\t|| detailToComments\n\t\t\t\t|| detailToExpanded\n\t\t\t)\n\t\t\t{\n\t\t\t\tconst postNode = e.target.closest(`.${this.class.listPost}`);\n\t\t\t\tif (postNode)\n\t\t\t\t{\n\t\t\t\t\tconst post = this.getPostFromNode(postNode);\n\t\t\t\t\tif (post)\n\t\t\t\t\t{\n\t\t\t\t\t\tpost.openDetail({\n\t\t\t\t\t\t\tpathToEmptyPage: this.getOption('pathToEmptyPage', ''),\n\t\t\t\t\t\t\tpathToCalendarEvent: this.getOption('pathToCalendarEvent', ''),\n\t\t\t\t\t\t\tpathToTasksRouter: this.getOption('pathToTasksRouter', ''),\n\t\t\t\t\t\t\tevent: e,\n\t\t\t\t\t\t\tfocusComments: detailToComments,\n\t\t\t\t\t\t\tshowFull: detailToExpanded,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\te.stopPropagation();\n\t\t\t\treturn e.preventDefault();\n\t\t\t}\n\t\t}\n\t\telse if (e.target.closest(`.${this.class.postWrapper}`))\n\t\t{\n\t\t\tconst expand = !!(\n\t\t\t\te.target.classList.contains(this.class.postItemInformMore)\n\t\t\t\t|| e.target.closest(`.${this.class.postItemInformMore}`)\n\t\t\t\t|| e.target.classList.contains(this.class.postItemMore)\n\t\t\t\t|| e.target.closest(`.${this.class.postItemMore}`)\n\t\t\t);\n\n\t\t\tif (expand)\n\t\t\t{\n\t\t\t\tconst logId = this.getOption('logId', 0);\n\t\t\t\tconst post = new Post({\n\t\t\t\t\tlogId: logId\n\t\t\t\t});\n\n\t\t\t\tpost.expandText();\n\n\t\t\t\te.stopPropagation();\n\t\t\t\treturn e.preventDefault();\n\t\t\t}\n\t\t}\n\t}\n\n\tgetPostFromNode(node)\n\t{\n\t\tif (!Type.isDomNode(node))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst logId = parseInt(node.getAttribute('data-livefeed-id'));\n\n\t\tif (logId <= 0)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\treturn new Post({\n\t\t\tlogId: logId,\n\t\t\tentryType: node.getAttribute('data-livefeed-post-entry-type'),\n\t\t\tuseFollow: (node.getAttribute('data-livefeed-post-use-follow') === 'Y'),\n\t\t\tuseTasks: (node.getAttribute('data-livefeed-post-use-tasks') === 'Y'),\n\t\t\tperm: node.getAttribute('data-livefeed-post-perm'),\n\t\t\tdestinations: node.getAttribute('data-livefeed-post-destinations'),\n\t\t\tpostId: parseInt(node.getAttribute('data-livefeed-post-id')),\n\t\t\turl: node.getAttribute('data-livefeed-post-url'),\n\t\t\tentityXmlId: node.getAttribute('data-livefeed-post-entity-xml-id'),\n\t\t\treadOnly: (node.getAttribute('data-livefeed-post-read-only') === 'Y'),\n\t\t\tcontentTypeId: node.getAttribute('data-livefeed-post-content-type-id'),\n\t\t\tcontentId: node.getAttribute('data-livefeed-post-content-id'),\n\t\t\tshowFull: (node.getAttribute('data-livefeed-post-show-full') === 'Y'),\n\n\t\t\ttaskId: parseInt(node.getAttribute('data-livefeed-task-id')),\n\t\t\ttaskData: node.getAttribute('data-livefeed-task-data'),\n\n\t\t\tcalendarEventId: parseInt(node.getAttribute('data-livefeed-calendar-event-id'))\n\t\t});\n\t}\n\n\tgetPostFromLogId(logId)\n\t{\n\t\tlet result = null;\n\n\t\tlogId = parseInt(logId);\n\t\tif (logId <= 0)\n\t\t{\n\t\t\treturn result;\n\t\t}\n\n\t\tresult = new Post({\n\t\t\tlogId\n\t\t});\n\n\t\treturn result;\n\t}\n}\n\nconst Instance = new Feed();\nconst BalloonNotifierInstance = new BalloonNotifier();\nconst NotificationBarInstance = new NotificationBar();\nconst DatabaseUnsentPostInstance = new Database();\nconst PublicationQueueInstance = new PublicationQueue();\nconst PostMenuInstance = new PostMenu();\n\nexport {\n\tInstance,\n\tBalloonNotifierInstance,\n\tNotificationBarInstance,\n\tDatabaseUnsentPostInstance,\n\tPublicationQueueInstance,\n\tPostMenuInstance\n};"],"names":["BalloonNotifier","classes","show","nodeIdList","notifier","notifierCounter","notifierCounterTitle","refreshNeeded","document","getElementById","refreshNeededBlock","getRefreshNeededNode","classList","add","refreshNeededNode","remove","params","cnt","parseInt","counterValue","cnt_cent","reminder","suffix","Instance","getRefreshNeeded","getNotifierCounterNode","innerHTML","hideRefreshNeededNotifier","getNotifierCounterTitleNode","Loc","getMessage","getNotifierNode","notifierNode","NotificationBar","repo","color","background","error","info","text","filter","notifyBar","forEach","hide","bar","BXMobileApp","UI","message","textColor","useLoader","groupId","align","textAlign","autoHideTimeout","hideOnTap","onTap","id","Math","random","push","maxLines","isGlobal","useCloseButton","Database","tableName","keyName","setTableName","Type","isPlainObject","isStringFilled","setKeyName","value","callback","isObject","app","db","createTable","getTableName","fields","name","unique","success","res","fail","e","check","deleteRows","KEY","getKeyName","data","x","hasOwnProperty","getRows","JSON","stringify","items","length","updateRows","updateFields","VALUE","addRow","insertFields","onEmpty","result","parse","onLoad","PublicationQueue","nodeId","container","class","balloonHidden","balloonFixed","balloonPublished","balloonShow","balloonHide","timeout","init","addCustomEvent","afterSetItem","bind","afterPostAdd","afterPostAddError","afterPostUpdate","afterPostUpdateError","setEventNamespace","subscribe","onFeedLoaded","onPostInserted","Event","onScroll","containerNode","isDomNode","window","pageYOffset","exec","storageId","key","queue","addToTray","drawList","event","removeFromTray","node","drawItem","hideItem","setTimeout","lastElementChild","title","Tag","render","Dom","clean","append","pageId","contentType","getPageId","addSuccess","EventEmitter","Post","logId","entryType","useFollow","useTasks","perm","destinations","postId","url","entityXmlId","readOnly","contentTypeId","contentId","showFull","taskId","taskData","calendarEventId","oldValue","getAttribute","newValue","contains","setAttribute","BMAjaxWrapper","MobileAjaxWrapper","runAction","analyticsLabel","b24statAction","b24statContext","then","response","oMSL","setFollow","bOnlyOn","bRunEvent","bAjax","onCustomEvent","log_id","page_id","preventDefault","stopPropagation","menuNode","context","postNode","closest","pinActionContext","pathToEmptyPage","pathToCalendarEvent","pathToTasksRouter","focusComments","BXMobileAppContext","getApiVersion","Events","postToComponent","taskInfo","creatorIcon","responsibleIcon","getTaskInfo","path","replace","__MSLOpenLogEntryNew","entry_type","use_follow","use_tasks","post_perm","post_id","post_url","entity_xml_id","focus_comments","focus_form","show_full","read_only","post_content_type_id","post_content_id","BX","findParent","className","pinnedValue","expandText","PostMenu","iconUrlFolderPath","sectionCode","postPerms","isInteger","useShare","useFavorites","usePinned","useRefreshComments","favoritesValue","followValue","target","iconUrl","action","postInstance","setPinned","selectedDestinations","a_users","b_groups","iconName","openTable","shareBlogPost","markmode","multiple","return_full_mode","user_all","showtitle","modal","selected","alphabet_index","okname","cancelname","outsection","arrowFlag","editBlogPost","feed_id","LiveFeedID","pinnedContext","feature","deleteBlogPost","setFavorites","bDetailEmptyPage","getComments","ts","iDetailTs","bPullDown","obFocus","form","location","reload","copyPostLink","createTask","entityType","entityId","PinnedPanel","postItemPinned","postItemPinActive","postItemPinnedBlock","postItemPinnedTitle","postItemPinnedTextBox","postItemPinnedDesc","Promise","reject","resolve","status","errors","pinnedPanelNode","pinnedContent","querySelector","TITLE","DESCRIPTION","prepend","Feed","refreshStarted","options","feedContainer","listWrapper","postWrapper","pinnedPanel","pin","postNewContainerTransformNew","postNewContainerTransform","postLazyLoadCheck","listPost","detailPost","postItemTopWrap","postItemTop","postItemPostBlock","postItemDescriptionBlock","postItemAttachedFileWrap","postItemInformWrap","postItemInformWrapTree","postItemInformComments","postItemInformMore","postItemMore","newPostContainer","maxScroll","showLoader","hideLoader","scrollTop","removePost","onPinnedPanelChange","onPostPinChanged","onLazyLoadImageLoaded","addEventListener","handleClick","optionsList","defaultValue","isUndefined","DatabaseUnsentPostInstance","delete","getEntryContent","queueKey","pinned","buildSelectedDestinations","postData","setPostFormParams","selectedRecipients","messageText","POST_MESSAGE","save","showNewPostForm","showPostError","isFunction","errorText","NotificationBarInstance","showError","notificationParams","showPopupLoader","hidePopupLoader","scrollTo","runComponentAction","mode","signedParameters","getOption","siteTemplateId","responseLogId","insertPost","content","html","postContainer","contentWrapper","selector","Runtime","matches","match","appendChild","createElement","style","display","processDetailBlock","BitrixMobile","LazyLoad","showImages","contentPostItemTopWrap","setNewPostContainer","handleInsertPostTransitionEnd","getNewPostContainer","Utils","htmlWithInlineJS","scrollHeight","PublicationQueueInstance","emit","BaseEvent","itemNode","propertyName","recalcMaxScroll","getData","imageNode","postCheckNode","setMaxScroll","documentElement","innerHeight","setOptions","preventNextPage","nextPageCurtainNode","indexOf","getPinnedPanelNode","extractEntry","getPinnedData","pinnedData","insertEntry","post","getPostFromNode","getPostFromLogId","tagName","toLowerCase","detailFromPinned","detailFromNormal","detailToComments","detailToExpanded","openDetail","expand","BalloonNotifierInstance","PostMenuInstance"],"mappings":"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"}