{"version":3,"file":"livefeed.bundle.js","sources":["../src/balloonnotifier.js","../src/notificationbar.js","../src/database.js","../src/publicationqueue.js","../src/post.js","../src/menu/postmenu.js","../src/postform.js","../src/pinned.js","../src/rating.js","../src/important.js","../src/feed.js"],"sourcesContent":["import {Loc} from \"main.core\";\nimport {Instance} from \"./feed\";\n\nclass BalloonNotifier\n{\n\tconstructor()\n\t{\n\t\tthis.classes = {\n\t\t\tshow: 'lenta-notifier-shown'\n\t\t};\n\t\tthis.nodeIdList = {\n\t\t\tnotifier: 'lenta_notifier',\n\t\t\tnotifierCounter: 'lenta_notifier_cnt',\n\t\t\tnotifierCounterTitle: 'lenta_notifier_cnt_title',\n\t\t\trefreshNeeded: 'lenta_notifier_2'\n\t\t};\n\t}\n\n\tgetNotifierNode()\n\t{\n\t\treturn document.getElementById(this.nodeIdList.notifier);\n\t}\n\tgetNotifierCounterNode()\n\t{\n\t\treturn document.getElementById(this.nodeIdList.notifierCounter);\n\t}\n\tgetNotifierCounterTitleNode()\n\t{\n\t\treturn document.getElementById(this.nodeIdList.notifierCounterTitle);\n\t}\n\tgetRefreshNeededNode()\n\t{\n\t\treturn document.getElementById(this.nodeIdList.refreshNeeded);\n\t}\n\n\tshowRefreshNeededNotifier()\n\t{\n\t\tconst refreshNeededBlock = this.getRefreshNeededNode();\n\t\tif (refreshNeededBlock)\n\t\t{\n\t\t\trefreshNeededBlock.classList.add(this.classes.show);\n\t\t}\n\t}\n\n\thideRefreshNeededNotifier()\n\t{\n\t\tconst refreshNeededNode = this.getRefreshNeededNode();\n\t\tif (refreshNeededNode)\n\t\t{\n\t\t\trefreshNeededNode.classList.remove(this.classes.show);\n\t\t}\n\t}\n\n\tshowNotifier(params)\n\t{\n\t\tlet cnt = parseInt(params.counterValue);\n\n\t\tconst\n\t\t\tcnt_cent = cnt % 100,\n\t\t\treminder = cnt % 10;\n\n\t\tlet suffix = '';\n\n\t\tif (\n\t\t\tcnt_cent >= 10\n\t\t\t&& cnt_cent < 15\n\t\t)\n\t\t{\n\t\t\tsuffix = 3;\n\t\t}\n\t\telse if (reminder == 0)\n\t\t{\n\t\t\tsuffix = 3;\n\t\t}\n\t\telse if (reminder == 1)\n\t\t{\n\t\t\tsuffix = 1;\n\t\t}\n\t\telse if (\n\t\t\treminder == 2\n\t\t\t|| reminder == 3\n\t\t\t|| reminder == 4\n\t\t)\n\t\t{\n\t\t\tsuffix = 2;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tsuffix = 3;\n\t\t}\n\n\t\tif (Instance.getRefreshNeeded())\n\t\t{\n\t\t\tthis.getNotifierCounterNode().innerHTML = (cnt ? cnt + '+' : '');\n\t\t\tthis.hideRefreshNeededNotifier();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.getNotifierCounterNode().innerHTML = cnt || '';\n\t\t}\n\n\t\tthis.getNotifierCounterTitleNode().innerHTML = Loc.getMessage('MOBILE_EXT_LIVEFEED_COUNTER_TITLE_' + suffix);\n\t\tthis.getNotifierNode().classList.add(this.classes.show);\n\t}\n\n\thideNotifier()\n\t{\n\t\tconst notifierNode = this.getNotifierNode();\n\t\tif (notifierNode)\n\t\t{\n\t\t\tnotifierNode.classList.remove(this.classes.show);\n\t\t}\n\t};\n}\n\nexport {\n\tBalloonNotifier\n}","import {Loc} from \"main.core\";\n\nclass NotificationBar\n{\n\tconstructor()\n\t{\n\t\tthis.repo = [];\n\t\tthis.color = {\n\t\t\tbackground: {\n\t\t\t\terror: '#affb0000',\n\t\t\t\tinfo: '#3a3735'\n\t\t\t},\n\t\t\ttext: {\n\t\t\t\terror: '#ffffff',\n\t\t\t\tinfo: '#ffffff'\n\t\t\t}\n\t\t}\n\t}\n\n\thideAll()\n\t{\n\t\tthis.repo = this.repo.filter(notifyBar => {\n\t\t\treturn notifyBar;\n\t\t});\n\t\tthis.repo.forEach(notifyBar => {\n\t\t\tnotifyBar.hide();\n\t\t});\n\t}\n\n\tshowError(params)\n\t{\n\t\tconst bar = new BXMobileApp.UI.NotificationBar({\n\t\t\t\tmessage: params.text ? params.text : '',\n\t\t\t\tcolor: this.color.background.error,\n\t\t\t\ttextColor: this.color.text.error,\n\t\t\t\tuseLoader: (params.useLoader ? !!params.useLoader : false),\n\t\t\t\tgroupId: (params.groupId ? params.groupId : ''),\n\t\t\t\talign: (params.textAlign ? params.textAlign : 'center'),\n\t\t\t\tautoHideTimeout: (params.autoHideTimeout ? params.autoHideTimeout : 30000),\n\t\t\t\thideOnTap: (params.hideOnTap ? !!params.hideOnTap : true),\n\t\t\t\tonTap: params.onTap ? params.onTap : () => {},\n\t\t\t}, (params.id ? params.id : parseInt(Math.random() * 100000)));\n\n\t\tthis.repo.push(bar);\n\t\tbar.show();\n\t}\n\n\tshowInfo(params)\n\t{\n\t\tconst bar = new BXMobileApp.UI.NotificationBar({\n\t\t\t\tmessage: params.text ? params.text : '',\n\t\t\t\tcolor: this.color.background.info,\n\t\t\t\ttextColor: this.color.text.info,\n\t\t\t\tuseLoader: (params.useLoader ? !!params.useLoader : false),\n\t\t\t\tgroupId: (params.groupId ? params.groupId : ''),\n\t\t\t\tmaxLines: (params.maxLines ? params.maxLines : false),\n\t\t\t\talign: (params.textAlign ? params.textAlign : 'center'),\n\t\t\t\tisGlobal: (params.isGlobal ? !!params.isGlobal : true),\n\t\t\t\tuseCloseButton: (params.useCloseButton ? !!params.useCloseButton : true),\n\t\t\t\tautoHideTimeout: (params.autoHideTimeout ? params.autoHideTimeout : 1000),\n\t\t\t\thideOnTap: (params.hideOnTap ? !!params.hideOnTap : true)\n\t\t\t}, (params.id ? params.id : parseInt(Math.random() * 100000)));\n\n\t\tthis.repo.push(bar);\n\t\tbar.show();\n\t}\n}\n\nexport {\n\tNotificationBar\n}","import {Type} from \"main.core\";\n\nclass Database\n{\n\tconstructor(params)\n\t{\n\t\tthis.tableName = null;\n\t\tthis.keyName = null;\n\n\t\tthis.setTableName(Type.isPlainObject(params) && Type.isStringFilled(params.tableName) ? params.tableName : 'livefeed');\n\t\tthis.setKeyName(Type.isPlainObject(params) && Type.isStringFilled(params.keyName) ? params.keyName : 'postUnsent');\n\n\t\tthis.init();\n\t}\n\n\tinit()\n\t{\n\t\tBXMobileApp.addCustomEvent('Livefeed.Database::clear', this.onClear.bind(this));\n\t}\n\n\tsetTableName(value)\n\t{\n\t\tthis.tableName = value;\n\t}\n\tgetTableName()\n\t{\n\t\treturn this.tableName;\n\t}\n\n\tsetKeyName(value)\n\t{\n\t\tthis.keyName = value;\n\t}\n\tgetKeyName()\n\t{\n\t\treturn this.keyName;\n\t}\n\n\tonClear(params)\n\t{\n\t\tthis.delete(params.groupId);\n\t}\n\n\tdelete(groupId)\n\t{\n\t\tif (parseInt(groupId) <= 0)\n\t\t{\n\t\t\tgroupId = false;\n\t\t}\n\n\t\tapp.exec('setStorageValue', {\n\t\t\tstorageId: this.getTableName(),\n\t\t\tkey: this.getKeyName() + (groupId ? '_' + groupId : ''),\n\t\t\tvalue: {},\n\t\t\tcallback: (res) => {\n\t\t\t}\n\t\t});\n\t}\n\n\tsave(data, groupId)\n\t{\n\t\tif (parseInt(groupId) <= 0)\n\t\t{\n\t\t\tgroupId = false;\n\t\t}\n\n\t\tfor (let x in data)\n\t\t{\n\t\t\tif (!data.hasOwnProperty(x))\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (x === 'sessid')\n\t\t\t{\n\t\t\t\tdelete data[x];\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tapp.exec('setStorageValue', {\n\t\t\tstorageId: this.getTableName(),\n\t\t\tkey: this.getKeyName() + (groupId ? '_' + groupId : ''),\n\t\t\tvalue: data,\n\t\t\tcallback: (res) => {\n\t\t\t}\n\t\t});\n\t}\n\n\tload(callback, groupId)\n\t{\n\t\tif (parseInt(groupId) <= 0)\n\t\t{\n\t\t\tgroupId = false;\n\t\t}\n\n\t\tapp.exec('getStorageValue', {\n\t\t\tstorageId: this.getTableName(),\n\t\t\tkey: this.getKeyName() + (groupId ? '_' + groupId : ''),\n\t\t\tcallback: (value) =>\n\t\t\t{\n\t\t\t\tvalue = (Type.isPlainObject(value) ? value : (Type.isStringFilled(value) ? JSON.parse(value) : {}));\n\t\t\t\tif (\n\t\t\t\t\tType.isPlainObject(value)\n\t\t\t\t\t&& Object.keys(value).length > 0\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tcallback.onLoad(value);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tcallback.onEmpty();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t}\n}\n\nexport {\n\tDatabase\n}","import {Tag, Dom, Loc, Type, Event} from \"main.core\";\nimport {Instance} from \"./feed\";\nimport {EventEmitter} from 'main.core.events';\n\nclass PublicationQueue extends EventEmitter\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\n\t\tthis.repo = {};\n\n\t\tthis.nodeId = {\n\t\t\tcontainer: 'post-balloon-container'\n\t\t};\n\n\t\tthis.class = {\n\t\t\tballoonHidden: 'post-balloon-hidden',\n\t\t\tballoonFixed: 'post-balloon-box-fixed',\n\t\t\tballoonPublished: 'post-balloon-done',\n\t\t\tballoonShow: 'post-balloon-show',\n\t\t\tballoonHide: 'post-balloon-hide'\n\t\t};\n\n\t\tthis.timeout = {\n\t\t\tshow: 750\n\t\t};\n\n\t\tthis.init();\n\t}\n\n\tinit()\n\t{\n\t\tBXMobileApp.addCustomEvent('Livefeed.PublicationQueue::afterSetItem', this.afterSetItem.bind(this));\n\t\tBXMobileApp.addCustomEvent('Livefeed.PublicationQueue::afterPostAdd', this.afterPostAdd.bind(this));\n\t\tBXMobileApp.addCustomEvent('Livefeed.PublicationQueue::afterPostAddError', this.afterPostAddError.bind(this));\n\t\tBXMobileApp.addCustomEvent('Livefeed.PublicationQueue::afterPostUpdate', this.afterPostUpdate.bind(this));\n\t\tBXMobileApp.addCustomEvent('Livefeed.PublicationQueue::afterPostUpdateError', this.afterPostUpdateError.bind(this));\n\n\t\tthis.setEventNamespace('BX.Mobile.Livefeed');\n\t\tthis.subscribe('onFeedReady', this.onFeedLoaded.bind(this));\n\t\tthis.subscribe('onPostInserted', this.onPostInserted.bind(this));\n\n\t\tEvent.bind(document, 'scroll', this.onScroll.bind(this));\n\t}\n\n\tonScroll()\n\t{\n\t\tconst\n\t\t\tcontainerNode = document.getElementById(this.nodeId.container);\n\n\t\tif (!Type.isDomNode(containerNode))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (window.pageYOffset > 0)\n\t\t{\n\t\t\tcontainerNode.classList.add(this.class.balloonFixed);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tcontainerNode.classList.remove(this.class.balloonFixed);\n\t\t}\n\t}\n\n\tonFeedLoaded()\n\t{\n\t\tapp.exec('getStorageValue', {\n\t\t\tstorageId: 'livefeed',\n\t\t\tkey: 'publicationQueue',\n\t\t\tcallback: (queue) =>\n\t\t\t{\n\t\t\t\tqueue = (Type.isPlainObject(queue) ? queue : (Type.isStringFilled(queue) ? JSON.parse(queue) : {}));\n\n\t\t\t\tif (!Type.isPlainObject(queue))\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tfor (let key in queue)\n\t\t\t\t{\n\t\t\t\t\tif (!queue.hasOwnProperty(key))\n\t\t\t\t\t{\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.addToTray(key, {});\n\t\t\t\t}\n\n\t\t\t\tthis.drawList();\n\t\t\t}\n\t\t});\n\t}\n\n\tonPostInserted(event)\n\t{\n\t\tthis.removeFromTray(event.data.key);\n\t}\n\n\taddToTray(key, params)\n\t{\n\t\tthis.repo[key] = params;\n\t\tthis.repo[key].node = this.drawItem();\n\t\tthis.repo[key].node.classList.add(this.class.balloonShow);\n\t}\n\tremoveFromTray(key, params)\n\t{\n\t\tthis.hideItem(key);\n\n\t\tsetTimeout(() => {\n\t\t\tif (this.repo[key])\n\t\t\t{\n\t\t\t\tdelete this.repo[key];\n\t\t\t}\n\t\t}, 3000);\n\t}\n\n\taddSuccess(key, warningText)\n\t{\n\t\tif (\n\t\t\tthis.repo[key]\n\t\t\t&& this.repo[key].node\n\t\t)\n\t\t{\n\t\t\tthis.repo[key].node.classList.remove(this.class.balloonHidden);\n\t\t\tthis.repo[key].node.classList.remove(this.class.balloonShow);\n\t\t\tthis.repo[key].node.classList.add(this.class.balloonPublished);\n\t\t\tthis.repo[key].node.lastElementChild.innerHTML = (Type.isStringFilled(warningText) ? warningText : Loc.getMessage('MOBILE_EXT_LIVEFEED_PUBLICATION_QUEUE_SUCCESS_TITLE'));\n\t\t}\n\n\t\tsetTimeout(() => {\n\t\t\tthis.removeFromTray(key);\n\t\t}, 5000);\n\t}\n\n\tdrawItem()\n\t{\n\t\tconst\n\t\t\ttitle = Loc.getMessage('MOBILE_EXT_LIVEFEED_PUBLICATION_QUEUE_ITEM_TITLE');\n\n\t\treturn Tag.render`\n\t\t\t\t<div class=\"post-balloon-hidden post-balloon post-balloon-active\"><span class=\"post-balloon-icon\"></span><span class=\"post-balloon-text\">${title}</span></div>\n\t\t\t`;\n\t}\n\n\thideItem(key, params)\n\t{\n\t\tif (this.repo[key])\n\t\t{\n\t\t\tthis.repo[key].node.classList.add(this.class.balloonHide);\n\t\t}\n\t}\n\n\tdrawList()\n\t{\n\t\tconst\n\t\t\tcontainerNode = document.getElementById(this.nodeId.container);\n\n\t\tif (!Type.isDomNode(containerNode))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tDom.clean(containerNode);\n\n\t\tfor (let key in this.repo)\n\t\t{\n\t\t\tif (\n\t\t\t\t!this.repo.hasOwnProperty(key)\n\t\t\t\t|| !Type.isDomNode(this.repo[key].node)\n\t\t\t)\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tDom.append(this.repo[key].node, containerNode);\n\t\t}\n\t}\n\n\tafterSetItem(params)\n\t{\n\t\tconst\n\t\t\tkey = params.key ? params.key : '',\n\t\t\tpageId = params.pageId ? params.pageId : '',\n\t\t\tcontentType = params.contentType ? params.contentType : '';\n\n\t\tif (\n\t\t\tpageId != Instance.getPageId()\n\t\t\t|| !key\n\t\t\t|| !Type.isStringFilled(contentType)\n\t\t)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (contentType == 'post')\n\t\t{\n\t\t\tthis.addToTray(key, {\n\t\t\t\tkey: key\n\t\t\t});\n\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.drawList();\n\t\t\t}, this.timeout.show);\n\t\t}\n\t}\n\n\tafterPostAdd(params)\n\t{\n\t\tif (!Type.isPlainObject(params))\n\t\t{\n\t\t\tparams = {};\n\t\t}\n\n\t\tthis.addSuccess((params.key ? params.key : ''), params.warningText);\n\t\tthis.drawList();\n\t}\n\n\tafterPostUpdate(params)\n\t{\n\t\tif (!Type.isPlainObject(params))\n\t\t{\n\t\t\tparams = {};\n\t\t}\n\n\t\tthis.addSuccess(params.key ? params.key : '');\n\t\tthis.drawList();\n\t}\n\n\tafterPostAddError(params)\n\t{\n\t\tif (!Type.isPlainObject(params))\n\t\t{\n\t\t\tparams = {};\n\t\t}\n\n\t\tconst\n\t\t\tkey = params.key ? params.key : '';\n\n\t\tthis.removeFromTray(key, {\n\t\t\tkey: key\n\t\t});\n\t\tthis.drawList();\n\t}\n\n\tafterPostUpdateError(params)\n\t{\n\t\tif (!Type.isPlainObject(params))\n\t\t{\n\t\t\tparams = {};\n\t\t}\n\n\t\tconst\n\t\t\tkey = params.key ? params.key : '';\n\n\t\tthis.removeFromTray(key, {\n\t\t\tkey: key\n\t\t});\n\t\tthis.drawList();\n\t}\n}\n\nexport {\n\tPublicationQueue\n}","import {Loc, Type} from 'main.core';\nimport {Ajax} from 'mobile.ajax';\n\nclass Post\n{\n\tconstructor(data)\n\t{\n\t\tthis.logId = 0;\n\t\tthis.entryType = '';\n\t\tthis.useFollow = false;\n\t\tthis.useTasks = false;\n\t\tthis.perm = '';\n\t\tthis.destinations = {};\n\t\tthis.postId = 0;\n\t\tthis.url = '';\n\t\tthis.entityXmlId = '';\n\t\tthis.readOnly = false;\n\t\tthis.contentTypeId = '';\n\t\tthis.contentId = 0;\n\t\tthis.showFull = false;\n\n\t\tthis.taskId = 0;\n\t\tthis.taskData = null;\n\n\t\tthis.calendarEventId = 0;\n\n\t\tthis.init(data);\n\t}\n\n\tinit(data)\n\t{\n\t\tlet {\n\t\t\tlogId,\n\t\t\tentryType,\n\t\t\tuseFollow,\n\t\t\tuseTasks,\n\t\t\tperm,\n\t\t\tdestinations,\n\t\t\tpostId,\n\t\t\turl,\n\t\t\tentityXmlId,\n\t\t\treadOnly,\n\t\t\tcontentTypeId,\n\t\t\tcontentId,\n\t\t\tshowFull,\n\n\t\t\ttaskId,\n\t\t\ttaskData,\n\n\t\t\tcalendarEventId\n\t\t} = data;\n\n\t\tlogId = parseInt(logId);\n\n\t\tif (logId <= 0)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.logId = logId;\n\n\t\tthis.postId = parseInt(postId);\n\t\tthis.contentId = parseInt(contentId);\n\t\tthis.taskId = parseInt(taskId);\n\t\tthis.calendarEventId = parseInt(calendarEventId);\n\n\t\tthis.useFollow = !!useFollow;\n\t\tthis.useTasks = !!useTasks;\n\t\tthis.readOnly = !!readOnly;\n\t\tthis.showFull = !!showFull;\n\n\t\tif (Type.isStringFilled(entryType))\n\t\t{\n\t\t\tthis.entryType = entryType;\n\t\t}\n\t\tif (Type.isStringFilled(perm))\n\t\t{\n\t\t\tthis.perm = perm;\n\t\t}\n\t\tif (Type.isStringFilled(url))\n\t\t{\n\t\t\tthis.url = url;\n\t\t}\n\t\tif (Type.isStringFilled(entityXmlId))\n\t\t{\n\t\t\tthis.entityXmlId = entityXmlId;\n\t\t}\n\t\tif (Type.isStringFilled(contentTypeId))\n\t\t{\n\t\t\tthis.contentTypeId = contentTypeId;\n\t\t}\n\t\tif (Type.isStringFilled(taskData))\n\t\t{\n\t\t\ttry\n\t\t\t{\n\t\t\t\tthis.taskData = JSON.parse(taskData);\n\t\t\t}\n\t\t\tcatch(e)\n\t\t\t{\n\t\t\t\tthis.taskData = null;\n\t\t\t}\n\t\t}\n\n\t\tif (Type.isPlainObject(destinations))\n\t\t{\n\t\t\tthis.destinations = destinations;\n\t\t}\n\t}\n\n\tsetFavorites(data):void\n\t{\n\t\tif (this.logId <= 0)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tlet {node, event} = data;\n\n\t\t// for old versions without post menu in the feed\n\t\tif (!Type.isDomNode(node))\n\t\t{\n\t\t\tnode = document.getElementById('log_entry_favorites_' + this.logId);\n\t\t}\n\n\t\tif (Type.isDomNode(node))\n\t\t{\n\t\t\tconst oldValue = (node.getAttribute('data-favorites') === 'Y' ? 'Y' : 'N');\n\t\t\tconst newValue = (oldValue === 'Y' ? 'N' : 'Y');\n\n\t\t\t// for old versions without post menu in the feed\n\t\t\tif (node.classList.contains('lenta-item-fav'))\n\t\t\t{\n\t\t\t\tif (oldValue === 'Y')\n\t\t\t\t{\n\t\t\t\t\tnode.classList.remove('lenta-item-fav-active');\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tnode.classList.add('lenta-item-fav-active');\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tnode.setAttribute('data-favorites', newValue);\n\n\t\t\tAjax.runAction('socialnetwork.api.livefeed.changeFavorites', {\n\t\t\t\tdata: {\n\t\t\t\t\tlogId: this.logId,\n\t\t\t\t\tvalue: newValue\n\t\t\t\t},\n\t\t\t\tanalyticsLabel: {\n\t\t\t\t\tb24statAction: (newValue === 'Y' ? 'addFavorites' : 'removeFavorites'),\n\t\t\t\t\tb24statContext: 'mobile'\n\t\t\t\t}\n\t\t\t}).then((response) => {\n\t\t\t\tif (response.data.success)\n\t\t\t\t{\n\t\t\t\t\tif (newValue === 'Y')\n\t\t\t\t\t{\n\t\t\t\t\t\toMSL.setFollow({\n\t\t\t\t\t\t\tlogId: this.logId,\n\t\t\t\t\t\t\tbOnlyOn: true,\n\t\t\t\t\t\t\tbRunEvent: true,\n\t\t\t\t\t\t\tbAjax: false\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tBXMobileApp.onCustomEvent('onLogEntryFavorites', {\n\t\t\t\t\t\tlog_id: this.logId,\n\t\t\t\t\t\tpage_id: Loc.getMessage('MSLPageId')\n\t\t\t\t\t}, true);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tnode.setAttribute('data-favorites', oldValue);\n\t\t\t\t}\n\t\t\t}, () => {\n\t\t\t\tnode.setAttribute('data-favorites', oldValue);\n\t\t\t});\n\t\t}\n\n\t\tif (event instanceof Event)\n\t\t{\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\t\t}\n\t}\n\n\tsetPinned(data):void\n\t{\n\t\tif (this.logId <= 0)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst {\n\t\t\tmenuNode,\n\t\t\tcontext\n\t\t} = data;\n\n\t\tif (Type.isDomNode(menuNode))\n\t\t{\n\t\t\tconst oldValue = (menuNode.getAttribute('data-pinned') === 'Y' ? 'Y' : 'N');\n\t\t\tconst newValue = (oldValue === 'Y' ? 'N' : 'Y');\n\n\t\t\tmenuNode.setAttribute('data-pinned', newValue);\n\n\t\t\tBXMobileApp.onCustomEvent('Livefeed::showLoader', {}, true, true);\n\n\t\t\tAjax.runAction('socialnetwork.api.livefeed.logentry.' + (newValue === 'Y' ? 'pin' : 'unpin'), {\n\t\t\t\tdata: {\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tlogId: this.logId\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tanalyticsLabel: {\n\t\t\t\t\tb24statAction: (newValue === 'Y' ? 'pinLivefeedEntry' : 'unpinLivefeedEntry'),\n\t\t\t\t\tb24statContext: 'mobile'\n\t\t\t\t}\n\t\t\t}).then((response) => {\n\t\t\t\tBXMobileApp.onCustomEvent('Livefeed::hideLoader', {}, true, true);\n\t\t\t\tif (response.data.success)\n\t\t\t\t{\n\t\t\t\t\tBXMobileApp.onCustomEvent('Livefeed.PinnedPanel::change', {\n\t\t\t\t\t\tlogId: this.logId,\n\t\t\t\t\t\tvalue: newValue,\n\t\t\t\t\t\tpostNode: menuNode.closest('.lenta-item'),\n\t\t\t\t\t\tpinActionContext: context\n\t\t\t\t\t}, true, true);\n\t\t\t\t\tBXMobileApp.onCustomEvent('Livefeed.PostDetail::pinChanged', {\n\t\t\t\t\t\tlogId: this.logId,\n\t\t\t\t\t\tvalue: newValue\n\t\t\t\t\t}, true, true);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tmenuNode.setAttribute('data-pinned', oldValue);\n\t\t\t\t}\n\t\t\t}, () => {\n\t\t\t\tBXMobileApp.onCustomEvent('Livefeed::hideLoader', {}, true, true);\n\t\t\t\tmenuNode.setAttribute('data-pinned', oldValue);\n\t\t\t});\n\t\t}\n\t}\n\n\topenDetail(params)\n\t{\n\t\tconst {\n\t\t\tpathToEmptyPage,\n\t\t\tpathToCalendarEvent,\n\t\t\tpathToTasksRouter,\n\t\t\tevent,\n\t\t\tfocusComments,\n\t\t\tshowFull\n\t\t} = params;\n\n\t\tif (!Type.isStringFilled(pathToEmptyPage))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (\n\t\t\tthis.taskId > 0\n\t\t\t&& BXMobileAppContext.getApiVersion() >= 31\n\t\t\t&& this.taskData\n\t\t)\n\t\t{\n\t\t\tBXMobileApp.Events.postToComponent('taskbackground::task::action', [\n\t\t\t\t{\n\t\t\t\t\tid: this.taskId,\n\t\t\t\t\ttitle: 'TASK',\n\t\t\t\t\ttaskInfo: {\n\t\t\t\t\t\ttitle: this.taskData.title,\n\t\t\t\t\t\tcreatorIcon: this.taskData.creatorIcon,\n\t\t\t\t\t\tresponsibleIcon: this.taskData.responsibleIcon\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tthis.taskId,\n\t\t\t\t{\n\t\t\t\t\ttaskId: this.taskId,\n\t\t\t\t\tgetTaskInfo: true\n\t\t\t\t}\n\t\t\t]);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tlet path = pathToEmptyPage;\n\n\t\t\tif (\n\t\t\t\tthis.calendarEventId > 0\n\t\t\t\t&& !focusComments\n\t\t\t\t&& pathToCalendarEvent.length > 0\n\t\t\t)\n\t\t\t{\n\t\t\t\tpath = pathToCalendarEvent.replace('#EVENT_ID#', this.calendarEventId);\n\t\t\t}\n\t\t\telse if (\n\t\t\t\tthis.taskId > 0\n\t\t\t\t&& this.taskData\n\t\t\t\t&& pathToTasksRouter.length > 0\n\t\t\t) // API version <= 31\n\t\t\t{\n\t\t\t\tpath = pathToTasksRouter\n\t\t\t\t\t.replace('__ROUTE_PAGE__', 'view')\n\t\t\t\t\t.replace('#USER_ID#', Loc.getMessage('MOBILE_EXT_LIVEFEED_CURRENT_USER_ID')) + '&TASK_ID=' + this.taskId;\n\t\t\t}\n\n\t\t\t__MSLOpenLogEntryNew({\n\t\t\t\tpath: path,\n\t\t\t\tlog_id: this.logId,\n\t\t\t\tentry_type: this.entryType,\n\t\t\t\tuse_follow: (this.useFollow ? 'Y' : 'N'),\n\t\t\t\tuse_tasks: (this.useTasks ? 'Y' : 'N'),\n\t\t\t\tpost_perm: this.perm,\n\t\t\t\tdestinations: this.destinations,\n\t\t\t\tpost_id: this.postId,\n\t\t\t\tpost_url: this.url,\n\t\t\t\tentity_xml_id: this.entityXmlId,\n\t\t\t\tfocus_comments: focusComments,\n\t\t\t\tfocus_form: false,\n\t\t\t\tshow_full: (this.showFull || showFull),\n\t\t\t\tread_only: (this.readOnly ? 'Y' : 'N'),\n\t\t\t\tpost_content_type_id: this.contentTypeId,\n\t\t\t\tpost_content_id: this.contentId,\n\t\t\t}, event);\n\t\t}\n\t}\n\n\tinitDetailPin()\n\t{\n\t\tconst menuNode = document.getElementById('log-entry-menu-' + this.logId);\n\t\tif (!menuNode)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst postNode = menuNode.closest('.post-wrap');\n\t\tif (!postNode)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst pinnedValue = menuNode.getAttribute('data-pinned');\n\t\tif (pinnedValue === 'Y')\n\t\t{\n\t\t\tpostNode.classList.add('lenta-item-pin-active');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tpostNode.classList.remove('lenta-item-pin-active');\n\t\t}\n\t}\n\n\texpandText()\n\t{\n\t\toMSL.expandText(this.logId);\n\t}\n}\n\nexport {\n\tPost\n}","import {Loc, Type} from \"main.core\";\nimport {Post} from \"./../post\";\n\nclass PostMenu\n{\n\tinit(data)\n\t{\n\t\tthis.iconUrlFolderPath = '/bitrix/templates/mobile_app/images/lenta/menu/';\n\t\tthis.sectionCode = 'defaultSection';\n\n\t\tthis.logId = parseInt(data.logId);\n\t\tthis.postId = parseInt(data.postId);\n\t\tthis.postPerms = (Type.isStringFilled(data.postPerms) ? data.postPerms : 'R');\n\t\tthis.pageId = data.pageId;\n\t\tthis.contentTypeId = (Type.isStringFilled(data.contentTypeId) ? data.contentTypeId : null);\n\t\tthis.contentId = (Type.isInteger(data.contentId) ? data.contentId : 0);\n\n\t\tthis.useShare = !!data.useShare && (this.postId > 0);\n\t\tthis.useFavorites = !!data.useFavorites && (this.logId > 0);\n\t\tthis.useFollow = !!data.useFollow && (this.logId > 0);\n\t\tthis.usePinned = !!data.usePinned && (this.logId > 0);\n\t\tthis.useTasks = (Loc.getMessage('MOBILE_EXT_LIVEFEED_USE_TASKS') === 'Y');\n\t\tthis.useRefreshComments = !!data.useRefreshComments;\n\n\t\tthis.favoritesValue = !!data.favoritesValue;\n\t\tthis.followValue = !!data.followValue;\n\t\tthis.pinnedValue = !!data.pinnedValue;\n\n\t\tthis.target = (Type.isDomNode(data.target) ? data.target : null);\n\t\tthis.context = (Type.isStringFilled(data.context) ? data.context : 'list');\n\t}\n\n\tgetMenuItems()\n\t{\n\t\tconst result = [];\n\n\t\tif (this.usePinned)\n\t\t{\n\t\t\tresult.push({\n\t\t\t\tid: 'pinned',\n\t\t\t\ttitle: Loc.getMessage('MOBILE_EXT_LIVEFEED_POST_MENU_PINNED_' + (!!this.pinnedValue ? 'Y' : 'N')),\n\t\t\t\ticonUrl: this.iconUrlFolderPath + (!!this.pinnedValue ? 'unpin.png' : 'pin.png'),\n\t\t\t\tsectionCode: this.sectionCode,\n\t\t\t\taction: () =>\n\t\t\t\t{\n\t\t\t\t\tconst postInstance = new Post({\n\t\t\t\t\t\tlogId: this.logId\n\t\t\t\t\t});\n\t\t\t\t\treturn postInstance.setPinned({\n\t\t\t\t\t\tmenuNode: this.target,\n\t\t\t\t\t\tcontext: this.context\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (this.useShare)\n\t\t{\n\t\t\tvar selectedDestinations = {\n\t\t\t\ta_users: [],\n\t\t\t\tb_groups: []\n\t\t\t};\n\n\t\t\tif (\n\t\t\t\tselectedDestinations.a_users.length > 0\n\t\t\t\t|| selectedDestinations.b_groups.length > 0\n\t\t\t)\n\t\t\t{\n\t\t\t\tresult.push({\n\t\t\t\t\tid: 'sharePost',\n\t\t\t\t\ttitle: Loc.getMessage('MOBILE_EXT_LIVEFEED_POST_MENU_SHARE'),\n\t\t\t\t\ticonName: 'add',\n\t\t\t\t\ticonUrl: this.iconUrlFolderPath + 'n_plus.png',\n\t\t\t\t\tsectionCode: this.sectionCode,\n\t\t\t\t\taction: () =>\n\t\t\t\t\t{\n\t\t\t\t\t\tapp.openTable({\n\t\t\t\t\t\t\tcallback: () => {\n\t\t\t\t\t\t\t\toMSL.shareBlogPost();\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\turl: Loc.getMessage('MOBILE_EXT_LIVEFEED_SITE_DIR') + 'mobile/index.php?mobile_action=' + (Loc.getMessage('MOBILE_EXT_LIVEFEED_CURRENT_EXTRANET_SITE') === 'Y' ? 'get_group_list' : 'get_usergroup_list') + '&feature=blog',\n\t\t\t\t\t\t\tmarkmode: true,\n\t\t\t\t\t\t\tmultiple: true,\n\t\t\t\t\t\t\treturn_full_mode: true,\n\t\t\t\t\t\t\tuser_all: true,\n\t\t\t\t\t\t\tshowtitle: true,\n\t\t\t\t\t\t\tmodal: true,\n\t\t\t\t\t\t\tselected: selectedDestinations,\n\t\t\t\t\t\t\talphabet_index: true,\n\t\t\t\t\t\t\tokname: Loc.getMessage('MOBILE_EXT_LIVEFEED_SHARE_TABLE_BUTTON_OK'),\n\t\t\t\t\t\t\tcancelname: Loc.getMessage('MOBILE_EXT_LIVEFEED_SHARE_TABLE_BUTTON_CANCEL'),\n\t\t\t\t\t\t\toutsection: (Loc.getMessage('MOBILE_EXT_LIVEFEED_DEST_TO_ALL_DENIED') !== 'Y')\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\tarrowFlag: false\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tif (\n\t\t\tthis.postId > 0\n\t\t\t&& this.postPerms === 'W'\n\t\t)\n\t\t{\n\t\t\tresult.push({\n\t\t\t\tid: 'edit',\n\t\t\t\ttitle: Loc.getMessage('MOBILE_EXT_LIVEFEED_POST_MENU_EDIT'),\n\t\t\t\ticonUrl: this.iconUrlFolderPath + 'pencil.png',\n\t\t\t\tsectionCode: this.sectionCode,\n\t\t\t\taction: () =>\n\t\t\t\t{\n\t\t\t\t\toMSL.editBlogPost({\n\t\t\t\t\t\tfeed_id: window.LiveFeedID,\n\t\t\t\t\t\tpost_id: this.postId,\n\t\t\t\t\t\tpinnedContext: !!this.pinnedValue,\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tarrowFlag: false,\n\t\t\t\tfeature: 'edit'\n\t\t\t});\n\n\t\t\tresult.push({\n\t\t\t\tid: 'delete',\n\t\t\t\ttitle: Loc.getMessage('MOBILE_EXT_LIVEFEED_POST_MENU_DELETE'),\n\t\t\t\ticonName: 'delete',\n\t\t\t\tsectionCode: this.sectionCode,\n\t\t\t\taction: () =>\n\t\t\t\t{\n\t\t\t\t\toMSL.deleteBlogPost({\n\t\t\t\t\t\tpost_id: this.postId\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tarrowFlag: false\n\t\t\t});\n\t\t}\n\n\t\tif (this.useFavorites)\n\t\t{\n\t\t\tresult.push({\n\t\t\t\tid: 'favorites',\n\t\t\t\ttitle: Loc.getMessage('MOBILE_EXT_LIVEFEED_POST_MENU_FAVORITES_' + (!!this.favoritesValue ? 'Y' : 'N')),\n\t\t\t\ticonUrl: this.iconUrlFolderPath + 'favorite.png',\n\t\t\t\tsectionCode: this.sectionCode,\n\t\t\t\taction: () =>\n\t\t\t\t{\n\t\t\t\t\tconst postInstance = new Post({\n\t\t\t\t\t\tlogId: this.logId\n\t\t\t\t\t});\n\n\t\t\t\t\treturn postInstance.setFavorites({\n\t\t\t\t\t\tnode: this.target\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tarrowFlag: false,\n\t\t\t\tfeature: 'favorites'\n\t\t\t});\n\t\t}\n\n\t\tif (this.useFollow)\n\t\t{\n\t\t\tresult.push({\n\t\t\t\tid: 'follow',\n\t\t\t\ttitle: Loc.getMessage('MOBILE_EXT_LIVEFEED_POST_MENU_FOLLOW_' + (!!this.followValue ? 'Y' : 'N')),\n\t\t\t\ticonUrl: this.iconUrlFolderPath + 'eye.png',\n\t\t\t\tsectionCode: this.sectionCode,\n\t\t\t\taction: () =>\n\t\t\t\t{\n\t\t\t\t\toMSL.setFollow({\n\t\t\t\t\t\tlogId: this.logId,\n\t\t\t\t\t\tmenuNode: this.target,\n\t\t\t\t\t\tpageId: this.pageId,\n\t\t\t\t\t\tbOnlyOn: false,\n\t\t\t\t\t\tbAjax: true,\n\t\t\t\t\t\tbRunEvent: true\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tarrowFlag: false\n\t\t\t});\n\t\t}\n\n\t\tif (this.useRefreshComments)\n\t\t{\n\t\t\tresult.push({\n\t\t\t\tid: 'refreshPostComments',\n\t\t\t\ttitle: Loc.getMessage('MOBILE_EXT_LIVEFEED_POST_MENU_REFRESH_COMMENTS'),\n\t\t\t\ticonUrl: this.iconUrlFolderPath + 'n_refresh.png',\n\t\t\t\taction: () => {\n\t\t\t\t\tif (oMSL.bDetailEmptyPage)\n\t\t\t\t\t{\n\t\t\t\t\t\t// get comments on refresh from detail page menu\n\t\t\t\t\t\toMSL.getComments({\n\t\t\t\t\t\t\tts: oMSL.iDetailTs,\n\t\t\t\t\t\t\tbPullDown: true,\n\t\t\t\t\t\t\tobFocus: {\n\t\t\t\t\t\t\t\tform: false\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tdocument.location.reload(true);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tarrowFlag: false\n\t\t\t});\n\t\t}\n\n\t\tif (\n\t\t\tType.isStringFilled(this.contentTypeId)\n\t\t\t&& this.contentId > 0\n\t\t)\n\t\t{\n\t\t\tresult.push({\n\t\t\t\tid: 'getPostLink',\n\t\t\t\ttitle: Loc.getMessage('MOBILE_EXT_LIVEFEED_POST_MENU_GET_LINK'),\n\t\t\t\ticonUrl: this.iconUrlFolderPath + 'link.png',\n\t\t\t\tsectionCode: this.sectionCode,\n\t\t\t\taction: () =>\n\t\t\t\t{\n\t\t\t\t\toMSL.copyPostLink({\n\t\t\t\t\t\tcontentTypeId: this.contentTypeId,\n\t\t\t\t\t\tcontentId: this.contentId\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tarrowFlag: false\n\t\t\t});\n\n\t\t\tif (\n\t\t\t\tthis.useTasks\n\t\t\t\t&& this.logId > 0\n\t\t\t)\n\t\t\t{\n\t\t\t\tresult.push({\n\t\t\t\t\tid: 'createTask',\n\t\t\t\t\ttitle: Loc.getMessage('MOBILE_EXT_LIVEFEED_POST_MENU_CREATE_TASK'),\n\t\t\t\t\ticonUrl: this.iconUrlFolderPath + 'n_check.png',\n\t\t\t\t\tsectionCode: this.sectionCode,\n\t\t\t\t\taction: () =>\n\t\t\t\t\t{\n\t\t\t\t\t\toMSL.createTask({\n\t\t\t\t\t\t\tentityType: this.contentTypeId,\n\t\t\t\t\t\t\tentityId: this.contentId,\n\t\t\t\t\t\t\tlogId: this.logId\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t},\n\t\t\t\t\tarrowFlag: false\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n}\n\nexport {\n\tPostMenu\n}","import {Instance, DatabaseUnsentPostInstance} from \"./feed\";\nimport {Type} from 'main.core';\n\nclass PostFormManager\n{\n\tconstructor()\n\t{\n\n\t}\n\n\tshow(params)\n\t{\n\t\tlet postData = {\n\t\t\ttype: (params.type ? params.type : 'post'),\n\t\t\tgroupId: (params.groupId ? parseInt(params.groupId) : 0),\n\t\t\tpostId: (params.postId ? parseInt(params.postId) : 0),\n\t\t\tpageId: (Type.isStringFilled(params.pageId) ? params.pageId : '')\n\t\t};\n\t\tthis.getDatabaseData(postData).then((postData) => {\n\t\t\treturn this.getWorkgroupData(postData);\n\t\t}).then((postData) => {\n\t\t\treturn this.getPostData(postData);\n\t\t}).then((postData) => {\n\t\t\treturn this.processPostData(postData);\n\t\t}).then((postData) => {\n\t\t\tapp.exec(\"openComponent\", {\n\t\t\t\tname: \"JSStackComponent\",\n\t\t\t\tcomponentCode: \"livefeed.postform\",\n\t\t\t\tscriptPath: BX.message('MOBILE_EXT_LIVEFEED_COMPONENT_URL'),\n\t\t\t\tparams: {\n\t\t\t\t\t'SERVER_NAME': BX.message('MOBILE_EXT_LIVEFEED_SERVER_NAME'),\n\t\t\t\t\t'DESTINATION_LIST': Instance.getOption('destinationList', {}),\n\t\t\t\t\t'DESTINATION_TO_ALL_DENY': Instance.getOption('destinationToAllDeny', false),\n\t\t\t\t\t'DESTINATION_TO_ALL_DEFAULT': Instance.getOption('destinationToAllDefault', true),\n\t\t\t\t\t'MODULE_DISK_INSTALLED': (BX.message('MOBILE_EXT_LIVEFEED_DISK_INSTALLED') == 'Y' ? 'Y' : 'N'),\n\t\t\t\t\t'MODULE_WEBDAV_INSTALLED': (BX.message('MOBILE_EXT_LIVEFEED_WEBDAV_INSTALLED') == 'Y' ? 'Y' : 'N'),\n\t\t\t\t\t'MODULE_VOTE_INSTALLED': (BX.message('MOBILE_EXT_LIVEFEED_VOTE_INSTALLED') == 'Y' ? 'Y' : 'N'),\n\t\t\t\t\t'FILE_ATTACH_PATH': BX.message('MOBILE_EXT_LIVEFEED_FILE_ATTACH_PATH'),\n\t\t\t\t\t'BACKGROUND_IMAGES_DATA': Instance.getOption('backgroundImagesData', {}),\n\t\t\t\t\t'BACKGROUND_COMMON': Instance.getOption('backgroundCommon', {}),\n\t\t\t\t\t'MEDALS_LIST': Instance.getOption('medalsList', {}),\n\t\t\t\t\t'IMPORTANT_DATA': Instance.getOption('importantData', {}),\n\t\t\t\t\t'USER_FOLDER_FOR_SAVED_FILES': BX.message('MOBILE_EXT_UTILS_USER_FOLDER_FOR_SAVED_FILES'),\n\t\t\t\t\t'MAX_UPLOAD_CHUNK_SIZE': BX.message('MOBILE_EXT_UTILS_MAX_UPLOAD_CHUNK_SIZE'),\n\t\t\t\t\t'POST_FILE_UF_CODE': BX.message('MOBILE_EXT_LIVEFEED_POST_FILE_UF_CODE'),\n\t\t\t\t\t'POST_FORM_DATA': Instance.getOption('postFormData', {}),\n\t\t\t\t\t'POST_DATA': postData,\n\t\t\t\t\t'DEVICE_WIDTH': BX.message('MOBILE_EXT_LIVEFEED_DEVICE_WIDTH'),\n\t\t\t\t\t'DEVICE_HEIGHT': BX.message('MOBILE_EXT_LIVEFEED_DEVICE_HEIGHT'),\n\t\t\t\t\t'DEVICE_RATIO': BX.message('MOBILE_EXT_LIVEFEED_DEVICE_RATIO'),\n\t\t\t\t},\n\t\t\t\trootWidget: {\n\t\t\t\t\tname: \"layout\",\n\t\t\t\t\tsettings: {\n\t\t\t\t\t\tobjectName: \"postFormLayoutWidget\",\n\t\t\t\t\t\tmodal: true\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, false);\n\t\t});\n\t}\n\n\tgetDatabaseData(postData)\n\t{\n\t\tconst promise = new Promise((resolve, reject) =>\n\t\t{\n\t\t\tconst postId = parseInt(postData.postId);\n\t\t\tif (postId > 0)\n\t\t\t{\n\t\t\t\tresolve(postData);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tDatabaseUnsentPostInstance.load(\n\t\t\t\t{\n\t\t\t\t\tonLoad: (data) => {\n\n\t\t\t\t\t\tif (data.contentType !== postData.type)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tresolve(postData);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tpostData.groupId = 0;\n\n\t\t\t\t\t\tif (!Type.isPlainObject(postData.post))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tpostData.post = {};\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (Type.isStringFilled(data.POST_TITLE))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tpostData.post.PostTitle = data.POST_TITLE;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (Type.isStringFilled(data.POST_MESSAGE))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tpostData.post.PostDetailText = data.POST_MESSAGE;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tType.isArrayFilled(data.DEST)\n\t\t\t\t\t\t\t&& Type.isPlainObject(data.DEST_DATA)\n\t\t\t\t\t\t)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tpostData.post.PostDestination = [];\n\n\t\t\t\t\t\t\tconst patterns = [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tpattern: /^SG(\\d+)$/i,\n\t\t\t\t\t\t\t\t\tstyle: 'sonetgroups'\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tpattern: /^U(\\d+|A)$/i,\n\t\t\t\t\t\t\t\t\tstyle: 'users'\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tpattern: /^DR(\\d+)$/i,\n\t\t\t\t\t\t\t\t\tstyle: 'department'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t];\n\n\t\t\t\t\t\t\tdata.DEST.forEach((item) => {\n\n\t\t\t\t\t\t\t\tlet id = null;\n\t\t\t\t\t\t\t\tlet style = null;\n\n\t\t\t\t\t\t\t\tfor (let i = 0; i < patterns.length; i++)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tconst matches = item.match(patterns[i].pattern);\n\t\t\t\t\t\t\t\t\tif (matches)\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tid = matches[1];\n\t\t\t\t\t\t\t\t\t\tstyle = ((item === 'UA') ? 'all-users' : patterns[i].style);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif (!Type.isNull(id))\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tpostData.post.PostDestination.push({\n\t\t\t\t\t\t\t\t\t\tSTYLE: style,\n\t\t\t\t\t\t\t\t\t\tID: id,\n\t\t\t\t\t\t\t\t\t\tTITLE: (Type.isPlainObject(data.DEST_DATA[item]) && Type.isStringFilled(data.DEST_DATA[item].title) ? data.DEST_DATA[item].title : '')\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (Type.isStringFilled(data.BACKGROUND_CODE))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tpostData.post.PostBackgroundCode = data.BACKGROUND_CODE;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (data.IMPORTANT === 'Y')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tpostData.post.PostImportantData = {\n\t\t\t\t\t\t\t\tvalue: 'Y'\n\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\tif (Type.isStringFilled(data.IMPORTANT_DATE_END))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tpostData.post.PostImportantData.endDate = Date.parse(data.IMPORTANT_DATE_END) / 1000;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (Type.isStringFilled(data.GRATITUDE_MEDAL))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tpostData.post.PostGratitudeData = {\n\t\t\t\t\t\t\t\tgratitude: data.GRATITUDE_MEDAL,\n\t\t\t\t\t\t\t\temployees: []\n\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\tArray.isArray(data.GRATITUDE_EMPLOYEES)\n\t\t\t\t\t\t\t\t&& Type.isPlainObject(data.GRATITUDE_EMPLOYEES_DATA)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tdata.GRATITUDE_EMPLOYEES.forEach((userId) => {\n\n\t\t\t\t\t\t\t\t\tconst userData = data.GRATITUDE_EMPLOYEES_DATA[userId];\n\t\t\t\t\t\t\t\t\tif (!Type.isPlainObject(userData))\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tpostData.post.PostGratitudeData.employees.push({\n\t\t\t\t\t\t\t\t\t\tid: userData.id,\n\t\t\t\t\t\t\t\t\t\timageUrl: (Type.isStringFilled(userData.imageUrl) ? userData.imageUrl : ''),\n\t\t\t\t\t\t\t\t\t\ttitle: (Type.isStringFilled(userData.title) ? userData.title : ''),\n\t\t\t\t\t\t\t\t\t\tsubtitle: (Type.isStringFilled(userData.subtitle) ? userData.subtitle : '')\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst voteId = 'n0';\n\t\t\t\t\t\tconst dataKey = 'UF_BLOG_POST_VOTE_' + voteId + '_DATA';\n\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tdata.UF_BLOG_POST_VOTE === voteId\n\t\t\t\t\t\t\t&& Type.isPlainObject(data[dataKey])\n\t\t\t\t\t\t\t&& Array.isArray(data[dataKey].QUESTIONS)\n\t\t\t\t\t\t)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tpostData.post.PostVoteData = {\n\t\t\t\t\t\t\t\tquestions: data[dataKey].QUESTIONS.map((question) => {\n\t\t\t\t\t\t\t\t\tconst result = {\n\t\t\t\t\t\t\t\t\t\tvalue: question.QUESTION,\n\t\t\t\t\t\t\t\t\t\tallowMultiSelect: question.FIELD_TYPE == 1 ? 'Y' : 'N',\n\t\t\t\t\t\t\t\t\t\tanswers: []\n\t\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\t\tif (Array.isArray(question.ANSWERS))\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tresult.answers = question.ANSWERS.map((answer) => {\n\t\t\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\t\t\tvalue: answer.MESSAGE\n\t\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\treturn result;\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tresolve(postData);\n\t\t\t\t\t},\n\t\t\t\t\tonEmpty: () => {\n\t\t\t\t\t\tresolve(postData);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tpostData.groupId\n\t\t\t);\n\t\t});\n\n\t\tpromise.catch((error) => {console.error(error)});\n\n\t\treturn promise;\n\t}\n\n\tgetWorkgroupData(postData)\n\t{\n\t\tconst groupId = parseInt(postData.groupId);\n\n\t\tconst promise = new Promise((resolve, reject) =>\n\t\t{\n\t\t\tif (groupId <= 0)\n\t\t\t{\n\t\t\t\tresolve(postData);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet promiseData = {\n\t\t\t\tresolve: resolve,\n\t\t\t\treject: reject\n\t\t\t};\n\n\t\t\tconst currentDateTime = new Date();\n\t\t\tconst returnEventName = 'Livefeed::returnWorkgroupData_' + currentDateTime.getTime();\n\n\t\t\tBXMobileApp.addCustomEvent(returnEventName, (function (result) {\n\t\t\t\tif (result.success)\n\t\t\t\t{\n\t\t\t\t\tthis.resolve(Object.assign(postData, {\n\t\t\t\t\t\tgroup: {\n\t\t\t\t\t\t\tID: parseInt(result.groupData.ID),\n\t\t\t\t\t\t\tNAME: result.groupData.NAME,\n//\t\t\t\t\t\t\tDESCRIPTION: result.groupData.DESCRIPTION\n\t\t\t\t\t\t}\n\t\t\t\t\t}));\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.reject();\n\t\t\t\t}\n\t\t\t}).bind(promiseData));\n\n\t\t\tBXMobileApp.onCustomEvent('Livefeed::getWorkgroupData', {\n\t\t\t\tgroupId: groupId,\n\t\t\t\treturnEventName: returnEventName\n\t\t\t}, true);\n\t\t});\n\n\t\tpromise.catch((error) => {console.error(error)});\n\n\t\treturn promise;\n\t}\n\n\tgetPostData(postData)\n\t{\n\t\tconst postId = parseInt(postData.postId);\n\n\t\tconst promise = new Promise((resolve, reject) =>\n\t\t{\n\t\t\tif (postId <= 0)\n\t\t\t{\n\t\t\t\tresolve(postData);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet promiseData = {\n\t\t\t\tresolve: resolve,\n\t\t\t\treject: reject\n\t\t\t};\n\n\t\t\tconst currentDateTime = new Date();\n\t\t\tconst returnEventName = 'Livefeed::returnPostFullData_' + currentDateTime.getTime();\n\n\t\t\tBXMobileApp.addCustomEvent(returnEventName, (function (result) {\n\t\t\t\tif (result.success)\n\t\t\t\t{\n\t\t\t\t\tthis.resolve(Object.assign(postData, {\n\t\t\t\t\t\tpost: result.postData\n\t\t\t\t\t}));\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.reject();\n\t\t\t\t}\n\t\t\t}).bind(promiseData));\n\n\t\t\tBXMobileApp.onCustomEvent('Livefeed::getPostFullData', {\n\t\t\t\tpostId: postId,\n\t\t\t\treturnEventName: returnEventName\n\t\t\t}, true);\n\t\t});\n\n\t\tpromise.catch((error) => {console.error(error)});\n\n\t\treturn promise;\n\t}\n\n\tprocessPostData(postData)\n\t{\n\t\tconst postId = parseInt(postData.postId);\n\n\t\tconst promise = new Promise((resolve, reject) =>\n\t\t{\n\t\t\tif (Type.isPlainObject(postData.post))\n\t\t\t{\n\t\t\t\tif (Type.isArray(postData.post.PostDestination))\n\t\t\t\t{\n\t\t\t\t\tpostData.recipients = {};\n\n\t\t\t\t\tpostData.post.PostDestination.forEach((item) => {\n\n\t\t\t\t\t\tlet key = null;\n\t\t\t\t\t\tlet code = null;\n\n\t\t\t\t\t\tswitch (item.STYLE)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcase 'users':\n\t\t\t\t\t\t\t\tkey = 'users';\n\t\t\t\t\t\t\t\tcode = item.ID;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 'all-users':\n\t\t\t\t\t\t\t\tkey = 'users';\n\t\t\t\t\t\t\t\tcode = 'A';\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 'sonetgroups':\n\t\t\t\t\t\t\t\tkey = 'groups';\n\t\t\t\t\t\t\t\tcode = item.ID;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 'department':\n\t\t\t\t\t\t\t\tkey = 'departments';\n\t\t\t\t\t\t\t\tcode = item.ID;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (key)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (!Type.isArray(postData.recipients[key]))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tpostData.recipients[key] = [];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tpostData.recipients[key].push({\n\t\t\t\t\t\t\t\tid: code,\n\t\t\t\t\t\t\t\ttitle: item.TITLE,\n\t\t\t\t\t\t\t\tshortTitle: (Type.isStringFilled(item.SHORT_TITLE) ? item.SHORT_TITLE : item.TITLE),\n\t\t\t\t\t\t\t\tavatar: (Type.isStringFilled(item.AVATAR) ? item.AVATAR : ''),\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\n\t\t\t\tif (Type.isArray(postData.post.PostDestinationHidden))\n\t\t\t\t{\n\t\t\t\t\tpostData.hiddenRecipients = [];\n\n\t\t\t\t\tpostData.post.PostDestinationHidden.forEach((item) => {\n\t\t\t\t\t\tpostData.hiddenRecipients.push(item.TYPE + item.ID);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (Type.isPlainObject(postData.group))\n\t\t\t{\n\t\t\t\tpostData.recipients = {\n\t\t\t\t\tgroups: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tid: postData.group.ID,\n\t\t\t\t\t\t\ttitle: postData.group.NAME\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tresolve(postData);\n\t\t});\n\n\t\tpromise.catch((error) => {console.error(error)});\n\n\t\treturn promise;\n\t}\n}\n\nexport {\n\tPostFormManager\n}","import {Dom, Type, Tag, Loc} from \"main.core\";\nimport {EventEmitter} from 'main.core.events';\nimport {Post} from \"./post\";\nimport {Ajax} from 'mobile.ajax';\n\nclass PinnedPanel\n{\n\tconstructor()\n\t{\n\t\tthis.panelInitialized = false;\n\n\t\tthis.class = {\n\n\t\t\tpanel: 'lenta-pinned-panel',\n\t\t\tpanelCollapsed: 'lenta-pinned-panel-collapsed',\n\t\t\tpanelActive: 'lenta-pinned-panel-active',\n\n\t\t\tcollapsedPanel: 'lenta-pinned-collapsed-posts',\n\t\t\tcollapsedPanelPostsValue: 'lenta-pinned-collapsed-count-posts',\n\t\t\tcollapsedPanelComments: 'lenta-pinned-collapsed-posts-comments',\n\t\t\tcollapsedPanelCommentsShown: 'lenta-pinned-collapsed-posts-comments-active',\n\t\t\tcollapsedPanelCommentsValue: 'lenta-pinned-collapsed-count-comments',\n\t\t\tcollapsedPanelCommentsValueNew: 'post-item-inform-right-new-value',\n\n\t\t\tcollapsedPanelExpandButton: 'lenta-pinned-collapsed-posts-btn',\n\n\t\t\tpost: 'lenta-item',\n\n\t\t\tpostItemPinned: 'lenta-item-pinned',\n\t\t\tpostItemPinActive: 'lenta-item-pin-active',\n\n\t\t\tpostItemPinnedBlock: 'post-item-pinned-block',\n\t\t\tpostItemPinnedTitle: 'post-item-pinned-title',\n\t\t\tpostItemPinnedTextBox: 'post-item-pinned-text-box',\n\t\t\tpostItemPinnedDesc: 'post-item-pinned-desc',\n\n\t\t\tcancelPanel: 'post-pinned-cancel-panel',\n\t\t\tcancelPanelButton: 'post-pinned-cancel-panel-btn'\n\t\t};\n\n\t\tthis.init();\n\t\tEventEmitter.subscribe('onFrameDataProcessed', () => {\n\t\t\tthis.init();\n\t\t});\n\t}\n\n\tinit()\n\t{\n\t\tconst panel = document.querySelector(`.${this.class.panel}`);\n\t\tif (\n\t\t\t!panel\n\t\t\t|| this.panelInitialized\n\t\t)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.panelInitialized = true;\n\n\t\tthis.adjustCollapsedPostsPanel();\n\t\tconst collapsedPanel = document.querySelector(`.${this.class.collapsedPanel}`);\n\t\tif (collapsedPanel)\n\t\t{\n\t\t\tcollapsedPanel.addEventListener('touchend', (e) => {\n\t\t\t\tthis.expandCollapsedPostsPanel();\n\n\t\t\t\te.stopPropagation();\n\t\t\t\treturn e.preventDefault();\n\t\t\t});\n\t\t}\n\t}\n\n\tresetFlags()\n\t{\n\t\tthis.panelInitialized = false;\n\t}\n\n\tgetPinnedPanelNode()\n\t{\n\t\treturn document.querySelector('[data-livefeed-pinned-panel]');\n\t}\n\n\trecalcPanel({type})\n\t{\n\t\tif (this.getPostsCount() > 0)\n\t\t{\n\t\t\tthis.getPinnedPanelNode().classList.add(`${this.class.panelActive}`);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.getPinnedPanelNode().classList.remove(`${this.class.panelActive}`);\n\t\t}\n\n\t\tthis.recalcCollapsedPostsPanel({type})\n\t}\n\n\trecalcCollapsedPostsPanel({type})\n\t{\n\t\tif (this.getPostsCount() >= Loc.getMessage('MOBILE_EXT_LIVEFEED_COLLAPSED_PINNED_PANEL_ITEMS_LIMIT'))\n\t\t{\n\t\t\tif (\n\t\t\t\ttype === 'insert'\n\t\t\t\t|| this.getPinnedPanelNode().classList.contains(`${this.class.panelCollapsed}`)\n\t\t\t)\n\t\t\t{\n\t\t\t\tthis.getPinnedPanelNode().classList.add(`${this.class.panelCollapsed}`);\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.getPinnedPanelNode().classList.remove(`${this.class.panelCollapsed}`);\n\t\t}\n\n\t\tthis.adjustCollapsedPostsPanel();\n\t}\n\n\texpandCollapsedPostsPanel()\n\t{\n\t\tthis.getPinnedPanelNode().classList.remove(`${this.class.panelCollapsed}`);\n\t}\n\n\tgetPostsCount()\n\t{\n\t\treturn Array.from(this.getPinnedPanelNode().getElementsByClassName(`${this.class.post}`)).length;\n\t}\n\n\tadjustCollapsedPostsPanel()\n\t{\n\t\tconst postsCounter = this.getPostsCount();\n\t\tconst postsCounterNode = this.getPinnedPanelNode().querySelector(`.${this.class.collapsedPanelPostsValue}`);\n\n\t\tif (postsCounterNode)\n\t\t{\n\t\t\tpostsCounterNode.innerHTML = parseInt(postsCounter);\n\t\t}\n\n\t\tconst commentsCounterNode = this.getPinnedPanelNode().querySelector(`.${this.class.collapsedPanelComments}`);\n\t\tconst commentsCounterValueNode = this.getPinnedPanelNode().querySelector(`.${this.class.collapsedPanelCommentsValue}`);\n\n\t\tif (\n\t\t\tcommentsCounterNode\n\t\t\t&& commentsCounterValueNode\n\t\t)\n\t\t{\n\t\t\tconst newCommentCounter = Array.from(this.getPinnedPanelNode().querySelectorAll(`.${this.class.collapsedPanelCommentsValueNew}`)).reduce((acc, node) => {\n\t\t\t\treturn acc + parseInt(node.innerHTML);\n\t\t\t}, 0);\n\n\t\t\tcommentsCounterValueNode.innerHTML = '+' + newCommentCounter;\n\t\t\tif (newCommentCounter > 0)\n\t\t\t{\n\t\t\t\tcommentsCounterNode.classList.add(`${this.class.collapsedPanelCommentsShown}`);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tcommentsCounterNode.classList.remove(`${this.class.collapsedPanelCommentsShown}`);\n\t\t\t}\n\t\t}\n\t}\n\n\tgetPinnedData(params)\n\t{\n\t\tconst logId = (params.logId ? parseInt(params.logId) : 0);\n\n\t\tif (logId <= 0)\n\t\t{\n\t\t\treturn Promise.reject();\n\t\t}\n\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tAjax.runAction('socialnetwork.api.livefeed.logentry.getPinData', {\n\t\t\t\tdata: {\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tlogId: logId\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}).then((response) => {\n\t\t\t\tif (response.status === 'success')\n\t\t\t\t{\n\t\t\t\t\tresolve(response.data);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\treject(response.errors);\n\t\t\t\t}\n\t\t\t}, (response) => {\n\t\t\t\treject();\n\t\t\t});\n\t\t})\n\t}\n\n\tinsertEntry({\n\t\tlogId,\n\t\tpostNode,\n\t\tpinnedContent\n\t})\n\t{\n\t\tconst pinnedPanelNode = this.getPinnedPanelNode();\n\n\t\tif (\n\t\t\t!Type.isDomNode(postNode)\n\t\t\t|| !Type.isDomNode(pinnedPanelNode)\n\t\t)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst postItemPinnedBlock = postNode.querySelector(`.${this.class.postItemPinnedBlock}`);\n\n\t\tif (!Type.isDomNode(postItemPinnedBlock))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tpostNode.classList.add(this.class.postItemPinned);\n\t\tpostNode.classList.add(this.class.postItemPinActive);\n\n\t\tpostItemPinnedBlock.innerHTML = `${(Type.isStringFilled(pinnedContent.TITLE) ? `<div class=\"${this.class.postItemPinnedTitle}\">${pinnedContent.TITLE}</div>` : '')}<div class=\"${this.class.postItemPinnedTextBox}\"><div class=\"${this.class.postItemPinnedDesc}\">${pinnedContent.DESCRIPTION}</div></div>`;\n\n\t\tconst cancelPinnedPanel = Tag.render`<div class=\"${this.class.cancelPanel}\" data-livefeed-id=\"${logId}\">\n\t\t\t<div class=\"post-pinned-cancel-panel-content\">\n\t\t\t\t<div class=\"post-pinned-cancel-panel-label\">${Loc.getMessage('MOBILE_EXT_LIVEFEED_POST_PINNED_CANCEL_TITLE')}</div>\n\t\t\t\t\t<div class=\"post-pinned-cancel-panel-text\">${Loc.getMessage('MOBILE_EXT_LIVEFEED_POST_PINNED_CANCEL_DESCRIPTION')}</div>\n\t\t\t\t</div>\n\t\t\t<div class=\"ui-btn ui-btn-light-border ui-btn-round ui-btn-sm ${this.class.cancelPanelButton}\">${Loc.getMessage('MOBILE_EXT_LIVEFEED_POST_PINNED_CANCEL_BUTTON')}</div>\n\t\t</div>`;\n\n\t\tconst cancelButton = cancelPinnedPanel.querySelector(`.${this.class.cancelPanelButton}`);\n\t\tcancelButton.addEventListener('touchend', (event) => {\n\n\t\t\tconst cancelPanel = event.currentTarget.closest(`.${this.class.cancelPanel}`);\n\t\t\tif (!cancelPanel)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst logId = parseInt(cancelPanel.getAttribute('data-livefeed-id'));\n\t\t\tif (logId <= 0)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst postNode = document.querySelector(`.${this.class.post}[data-livefeed-id=\"${logId}\"]`);\n\t\t\tif (!postNode)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst menuNode = postNode.querySelector('[data-menu-type=\"post\"]');\n\t\t\tif (!menuNode)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst postInstance = new Post({\n\t\t\t\tlogId\n\t\t\t});\n\n\t\t\treturn postInstance.setPinned({\n\t\t\t\tmenuNode: menuNode,\n\t\t\t\tcontext: 'list'\n\t\t\t});\n\t\t});\n\n\t\tpostNode.parentNode.insertBefore(cancelPinnedPanel, postNode);\n\t\tDom.prepend(postNode, pinnedPanelNode);\n\n\t\tthis.recalcPanel({\n\t\t\ttype: 'insert'\n\t\t});\n\t\t__MSLOnFeedScroll();\n\t}\n\n\textractEntry({\n\t\tlogId,\n\t\tpostNode,\n\t\tcontainerNode\n\t})\n\t{\n\t\tconst pinnedPanelNode = this.getPinnedPanelNode();\n\n\t\tif (\n\t\t\t!Type.isDomNode(postNode)\n\t\t\t|| !Type.isDomNode(containerNode)\n\t\t\t|| !Type.isDomNode(pinnedPanelNode)\n\t\t\t|| postNode.parentNode !== pinnedPanelNode\n\t\t\t|| parseInt(logId) <= 0\n\t\t)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tpostNode.classList.remove(this.class.postItemPinned);\n\t\tpostNode.classList.remove(this.class.postItemPinActive);\n\n\t\tconst cancelPanel = document.querySelector(`.${this.class.cancelPanel}[data-livefeed-id=\"${parseInt(logId)}\"]`);\n\t\tif (cancelPanel)\n\t\t{\n\t\t\tcancelPanel.parentNode.insertBefore(postNode, cancelPanel);\n\t\t\tDom.remove(cancelPanel);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.prepend(postNode, containerNode);\n\t\t}\n\n\t\tthis.recalcPanel({\n\t\t\ttype: 'extract'\n\t\t});\n\t}\n}\n\nexport {\n\tPinnedPanel\n}","import {EventEmitter} from 'main.core.events';\n\nclass Rating extends EventEmitter\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis.init();\n\t}\n\n\tinit()\n\t{\n\t\tthis.setEventNamespace('BX.Mobile.Livefeed');\n\t\tthis.subscribe('onFeedInit', this.onFeedInit.bind(this));\n\t}\n\n\tonFeedInit()\n\t{\n\t\tif (!window.BXRL)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tObject.keys(window.BXRL).forEach((key) => {\n\t\t\tif (\n\t\t\t\tkey !== 'manager'\n\t\t\t\t&& key !== 'render'\n\t\t\t)\n\t\t\t{\n\t\t\t\tdelete window.BXRL[key];\n\t\t\t}\n\t\t});\n\t}\n}\n\nexport {\n\tRating\n}","import {Event, Type} from 'main.core';\nimport {Ajax} from 'mobile.ajax';\n\nclass ImportantManager\n{\n\tconstructor()\n\t{\n\n\t}\n\n\tsetPostRead(node)\n\t{\n\t\tif (\n\t\t\t!Type.isDomNode(node)\n\t\t\t|| node.hasAttribute('done')\n\t\t)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tconst postId = parseInt(node.getAttribute('bx-data-post-id'));\n\t\tif (postId <= 0)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.renderRead({\n\t\t\tnode: node,\n\t\t\tvalue: true,\n\t\t});\n\n\t\tAjax.runAction('socialnetwork.api.livefeed.blogpost.important.vote', {\n\t\t\tdata: {\n\t\t\t\tparams: {\n\t\t\t\t\tPOST_ID : postId,\n\t\t\t\t}\n\t\t\t},\n\t\t}).then((response) => {\n\t\t\tif (\n\t\t\t\t!Type.isStringFilled(response.data.success)\n\t\t\t\t|| response.data.success !== 'Y'\n\t\t\t)\n\t\t\t{\n\t\t\t\tthis.renderRead({\n\t\t\t\t\tnode: node,\n\t\t\t\t\tvalue: false,\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tBXMobileApp.onCustomEvent('onLogEntryImpPostRead', {\n\t\t\t\t\tpostId: postId,\n\t\t\t\t}, true);\n\t\t\t}\n\t\t}, (response) => {\n\t\t\tthis.renderRead({\n\t\t\t\tnode: node,\n\t\t\t\tvalue: false,\n\t\t\t});\n\t\t});\n\n\t\treturn true;\n\t}\n\n\trenderRead(params)\n\t{\n\t\tif (\n\t\t\t!Type.isObject(params)\n\t\t\t|| !Type.isDomNode(params.node)\n\t\t)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst node = params.node;\n\t\tconst value = !!params.value;\n\n\t\tif (value)\n\t\t{\n\t\t\tnode.checked = true;\n\t\t\tnode.setAttribute('done', 'Y');\n\t\t\tEvent.unbindAll(node);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tnode.checked = false;\n\t\t\tdelete node.checked;\n\t\t\tnode.removeAttribute('done');\n\t\t}\n\n\t\tconst container = node.closest('.post-item-important');\n\t\tif (!container)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst listNode = container.querySelector('.post-item-important-list');\n\t\tif (!listNode)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tlistNode.classList.add('post-item-important-list-read');\n\t}\n}\n\nexport {\n\tImportantManager,\n}","import {BalloonNotifier} from \"./balloonnotifier\";\nimport {NotificationBar} from \"./notificationbar\";\nimport {Database} from \"./database\";\nimport {PublicationQueue} from \"./publicationqueue\";\nimport {PostMenu} from \"./menu/postmenu\";\nimport {PostFormManager} from \"./postform\";\nimport {Post} from \"./post\";\nimport {PinnedPanel} from \"./pinned\";\nimport {Rating} from \"./rating\";\nimport {ImportantManager} from \"./important\";\nimport {Dom, Tag, Loc, Type, Runtime} from \"main.core\";\nimport {BaseEvent, EventEmitter} from \"main.core.events\";\nimport {Utils} from \"mobile.utils\";\nimport {Ajax} from 'mobile.ajax';\n\nimport 'mobile.imageviewer';\n\nclass Feed\n{\n\tconstructor()\n\t{\n\t\tthis.pageId = null;\n\t\tthis.refreshNeeded = false;\n\t\tthis.refreshStarted = false;\n\t\tthis.options = {};\n\t\tthis.nodeId = {\n\t\t\tfeedContainer: 'lenta_wrapper'\n\t\t};\n\t\tthis.class = {\n\t\t\tlistWrapper: 'lenta-list-wrap',\n\t\t\tpostWrapper: 'post-wrap',\n\t\t\tpinnedPanel: 'lenta-pinned-panel',\n\t\t\tpin: 'lenta-item-pin',\n\n\t\t\tpostNewContainerTransformNew: 'lenta-item-new-cont',\n\t\t\tpostNewContainerTransform: 'lenta-item-transform-cont',\n\t\t\tpostLazyLoadCheck: 'lenta-item-lazyload-check',\n\t\t\tlistPost: 'lenta-item',\n\t\t\tdetailPost: 'post-wrap',\n\t\t\tpostItemTopWrap: 'post-item-top-wrap',\n\t\t\tpostItemTop: 'post-item-top',\n\t\t\tpostItemPostBlock: 'post-item-post-block',\n\t\t\tpostItemPostContentView: 'post-item-contentview',\n\t\t\tpostItemDescriptionBlock: 'post-item-description',\n\t\t\tpostItemAttachedFileWrap: 'post-item-attached-disk-file-wrap',\n\t\t\tpostItemInformWrap: 'post-item-inform-wrap',\n\t\t\tpostItemInformWrapTree: 'post-item-inform-wrap-tree',\n\t\t\tpostItemInformComments: 'post-item-inform-comments',\n\t\t\tpostItemInformMore: 'post-item-more',\n\t\t\tpostItemMore: 'post-more-block',\n\t\t\tpostItemPinnedBlock: 'post-item-pinned-block',\n\t\t\tpostItemPinActive: 'lenta-item-pin-active',\n\t\t\tpostItemGratitudeUsersSmallContainer: 'lenta-block-grat-users-small-cont',\n\t\t\tpostItemGratitudeUsersSmallHidden: 'lenta-block-grat-users-small-hidden',\n\t\t\tpostItemImportantUserList: 'post-item-important-list',\n\n\t\t\taddPostButton: 'feed-add-post-button'\n\t\t};\n\n\t\tthis.newPostContainer = null;\n\t\tthis.maxScroll = 0;\n\n\t\tthis.init();\n\t}\n\n\tinit()\n\t{\n\t\tBXMobileApp.addCustomEvent('Livefeed.PublicationQueue::afterPostAdd', this.afterPostAdd.bind(this));\n\t\tBXMobileApp.addCustomEvent('Livefeed.PublicationQueue::afterPostAddError', this.afterPostAddError.bind(this));\n\t\tBXMobileApp.addCustomEvent('Livefeed.PublicationQueue::afterPostUpdate', this.afterPostUpdate.bind(this));\n\t\tBXMobileApp.addCustomEvent('Livefeed.PublicationQueue::afterPostUpdateError', this.afterPostUpdateError.bind(this));\n\t\tBXMobileApp.addCustomEvent('Livefeed::showLoader', this.showLoader.bind(this));\n\t\tBXMobileApp.addCustomEvent('Livefeed::hideLoader', this.hideLoader.bind(this));\n\t\tBXMobileApp.addCustomEvent('Livefeed::scrollTop', this.scrollTop.bind(this));\n\t\tBXMobileApp.addCustomEvent(\"Livefeed::onLogEntryDetailNotFound\", this.removePost.bind(this)); // from detail page\n\t\tBXMobileApp.addCustomEvent('Livefeed.PinnedPanel::change', this.onPinnedPanelChange.bind(this));\n\t\tBXMobileApp.addCustomEvent('Livefeed.PostDetail::pinChanged', this.onPostPinChanged.bind(this));\n\n\t\tEventEmitter.subscribe('BX.LazyLoad:ImageLoaded', this.onLazyLoadImageLoaded.bind(this));\n\t\tEventEmitter.subscribe('MobilePlayer:onError', this.onMobilePlayerError);\n\n\t\tdocument.addEventListener('DOMContentLoaded', () =>\n\t\t{\n\t\t\tdocument.addEventListener('click', this.handleClick.bind(this));\n\t\t});\n\t}\n\n\tsetPageId(value)\n\t{\n\t\tthis.pageId = value;\n\t}\n\n\tgetPageId()\n\t{\n\t\treturn this.pageId;\n\t};\n\n\tsetOptions(optionsList)\n\t{\n\t\tfor (let key in optionsList)\n\t\t{\n\t\t\tif (!optionsList.hasOwnProperty(key))\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tthis.options[key] = optionsList[key];\n\t\t}\n\t}\n\n\tgetOption(key, defaultValue)\n\t{\n\t\tif (Type.isUndefined(defaultValue))\n\t\t{\n\t\t\tdefaultValue = null;\n\t\t}\n\n\t\tif (!Type.isStringFilled(key))\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\treturn (!Type.isUndefined(this.options[key]) ? this.options[key] : defaultValue);\n\t}\n\n\tsetRefreshNeeded(value)\n\t{\n\t\tthis.refreshNeeded = value;\n\t}\n\n\tgetRefreshNeeded()\n\t{\n\t\treturn this.refreshNeeded;\n\t};\n\n\tsetRefreshStarted(value)\n\t{\n\t\tthis.refreshStarted = value;\n\t}\n\n\tgetRefreshStarted()\n\t{\n\t\treturn this.refreshStarted;\n\t};\n\n\tsetNewPostContainer(value)\n\t{\n\t\tthis.newPostContainer = value;\n\t};\n\n\tgetNewPostContainer()\n\t{\n\t\treturn this.newPostContainer;\n\t};\n\n\tsetMaxScroll(value)\n\t{\n\t\tthis.maxScroll = value;\n\t};\n\n\tgetMaxScroll()\n\t{\n\t\treturn this.maxScroll;\n\t};\n\n\tafterPostAdd(params)\n\t{\n\t\tif (!Type.isPlainObject(params))\n\t\t{\n\t\t\tparams = {};\n\t\t}\n\n\t\tconst postId = (typeof params.postId != 'undefined' ? parseInt(params.postId) : 0);\n\t\tconst context = (typeof params.context != 'undefined' ? params.context : '');\n\t\tconst pageId = (typeof params.pageId != 'undefined' ? params.pageId : '');\n\t\tconst groupId = (typeof params.groupId != 'undefined' ? params.groupId : null);\n\n\t\tif (pageId !== this.pageId)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tDatabaseUnsentPostInstance.delete(groupId);\n\n\t\tif (\n\t\t\tpostId <= 0\n\t\t\t|| Type.isStringFilled(params.warningText)\n\t\t)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.getEntryContent({\n\t\t\tentityType: 'BLOG_POST',\n\t\t\tentityId: postId,\n\t\t\tqueueKey: params.key,\n\t\t\taction: 'add'\n\t\t});\n\t}\n\n\tafterPostUpdate(params)\n\t{\n\t\tif (!Type.isPlainObject(params))\n\t\t{\n\t\t\tparams = {};\n\t\t}\n\n\t\tconst context = (typeof params.context != 'undefined' ? params.context : '');\n\t\tconst pageId = (typeof params.pageId != 'undefined' ? params.pageId : '');\n\t\tconst postId = (typeof params.postId != 'undefined' ? parseInt(params.postId) : 0);\n\t\tconst pinned = (typeof params.pinned != 'undefined' && !!params.pinned);\n\n\t\tthis.getEntryContent({\n\t\t\tentityType: 'BLOG_POST',\n\t\t\tentityId: postId,\n\t\t\tqueueKey: params.key,\n\t\t\taction: 'update',\n\t\t\tpinned: pinned\n\t\t});\n\t}\n\n\tafterPostAddError(params)\n\t{\n\t\tif (!Type.isPlainObject(params))\n\t\t{\n\t\t\tparams = {};\n\t\t}\n\n\t\tconst context = (Type.isStringFilled(params.context) ? params.context : '');\n\t\tconst groupId = (params.groupId ? params.groupId : '');\n\t\tconst selectedDestinations = {\n\t\t\ta_users: [],\n\t\t\tb_groups: []\n\t\t};\n\n\t\toMSL.buildSelectedDestinations(\n\t\t\tparams.postData,\n\t\t\tselectedDestinations\n\t\t);\n\n\t\toMSL.setPostFormParams({\n\t\t\tselectedRecipients: selectedDestinations\n\t\t});\n\n\t\toMSL.setPostFormParams({\n\t\t\tmessageText: params.postData.POST_MESSAGE\n\t\t});\n\n\t\tDatabaseUnsentPostInstance.save(params.postData, groupId);\n\n\t\tparams.callback = () =>\n\t\t{\n\t\t\tif (BXMobileAppContext.getApiVersion() >= this.getApiVersion('layoutPostForm'))\n\t\t\t{\n\t\t\t\tPostFormManagerInstance.show({\n\t\t\t\t\tpageId: this.getPageId(),\n\t\t\t\t\tpostId: 0\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tapp.exec('showPostForm', oMSL.showNewPostForm());\n\t\t\t}\n\t\t};\n\t\tthis.showPostError(params);\n\t}\n\n\tafterPostUpdateError(params)\n\t{\n\t\tif (!Type.isPlainObject(params))\n\t\t{\n\t\t\tparams = {};\n\t\t}\n\n\t\tconst context = (Type.isStringFilled(params.context) ? params.context : '');\n\n\t\tparams.callback = () =>\n\t\t{\n\t\t\toMSL.editBlogPost({\n\t\t\t\tpost_id: parseInt(params.postId)\n\t\t\t});\n\t\t};\n\t\tthis.showPostError(params);\n\t}\n\n\tshowPostError(params)\n\t{\n\t\tif (!Type.isPlainObject(params))\n\t\t{\n\t\t\tparams = {};\n\t\t}\n\n\t\tparams.callback = (Type.isFunction(params.callback) ? params.callback : () =>\n\t\t{\n\t\t});\n\n\t\tconst errorText = (Type.isStringFilled(params.errorText) ? params.errorText : false);\n\n\t\tNotificationBarInstance.showError({\n\t\t\ttext: (errorText ? errorText : Loc.getMessage('MOBILE_EXT_LIVEFEED_PUBLICATION_ERROR')),\n\t\t\tonTap: (notificationParams) =>\n\t\t\t{\n\t\t\t\tparams.callback(notificationParams);\n\t\t\t}\n\t\t});\n\t}\n\n\tshowLoader(params)\n\t{\n\t\tif (!Type.isPlainObject(params))\n\t\t{\n\t\t\tparams = {};\n\t\t}\n\n\t\tif (\n\t\t\tparams.pageId\n\t\t\t&& this.pageId !== null\n\t\t\t&& params.pageId != this.pageId\n\t\t)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tapp.showPopupLoader({\n\t\t\ttext: (\n\t\t\t\tType.isStringFilled(params.text)\n\t\t\t\t\t? params.text\n\t\t\t\t\t: ''\n\t\t\t)\n\t\t});\n\t}\n\n\thideLoader()\n\t{\n\t\tapp.hidePopupLoader();\n\t}\n\n\tscrollTop(params)\n\t{\n\t\tif (!Type.isPlainObject(params))\n\t\t{\n\t\t\tparams = {};\n\t\t}\n\n\t\tif (\n\t\t\tparams.pageId\n\t\t\t&& this.pageId !== null\n\t\t\t&& params.pageId != this.pageId\n\t\t)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\twindow.scrollTo(0, 0);\n\t};\n\n\tgetEntryContent(params)\n\t{\n\t\tif (!Type.isPlainObject(params))\n\t\t{\n\t\t\tparams = {};\n\t\t}\n\n\t\tconst logId = (params.logId ? parseInt(params.logId) : 0);\n\n\t\tif (\n\t\t\tlogId <= 0\n\t\t\t&& !(\n\t\t\t\tType.isStringFilled(params.entityType)\n\t\t\t\t&& parseInt(params.entityId) > 0\n\t\t\t)\n\t\t)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tAjax.runComponentAction('bitrix:mobile.socialnetwork.log.ex', 'getEntryContent', {\n\t\t\tmode: 'class',\n\t\t\tsignedParameters: this.getOption('signedParameters', {}),\n\t\t\tdata: {\n\t\t\t\tparams: {\n\t\t\t\t\tlogId: (parseInt(params.logId) > 0 ? parseInt(params.logId) : 0),\n\t\t\t\t\tpinned: (!!params.pinned ? 'Y' : 'N'),\n\t\t\t\t\tentityType: (Type.isStringFilled(params.entityType) ? params.entityType : ''),\n\t\t\t\t\tentityId: (parseInt(params.entityId) > 0 ? parseInt(params.entityId) : 0),\n\t\t\t\t\tsiteTemplateId: Loc.getMessage('MOBILE_EXT_LIVEFEED_SITE_TEMPLATE_ID')\n\t\t\t\t}\n\t\t\t}\n\t\t}).then((response) =>\n\t\t{\n\t\t\tif (logId <= 0)\n\t\t\t{\n\t\t\t\tAjax.runComponentAction('bitrix:mobile.socialnetwork.log.ex', 'getEntryLogId', {\n\t\t\t\t\tmode: 'class',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\tentityType: (Type.isStringFilled(params.entityType) ? params.entityType : ''),\n\t\t\t\t\t\t\tentityId: (parseInt(params.entityId) > 0 ? parseInt(params.entityId) : 0)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}).then((responseLogId) =>\n\t\t\t\t{\n\t\t\t\t\tif (responseLogId.data.logId)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.insertPost({\n\t\t\t\t\t\t\tlogId: responseLogId.data.logId,\n\t\t\t\t\t\t\tcontent: response.data.html,\n\t\t\t\t\t\t\tpostId: params.postId,\n\t\t\t\t\t\t\tqueueKey: params.queueKey,\n\t\t\t\t\t\t\taction: params.action,\n\t\t\t\t\t\t\tserverTimestamp: parseInt(response.data.componentResult.serverTimestamp)\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.insertPost({\n\t\t\t\t\tlogId: logId,\n\t\t\t\t\tcontent: response.data.html,\n\t\t\t\t\tpostId: params.postId,\n\t\t\t\t\tqueueKey: params.queueKey,\n\t\t\t\t\taction: params.action,\n\t\t\t\t\tserverTimestamp: parseInt(response.data.componentResult.serverTimestamp)\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t};\n\n\tprocessDetailBlock(postContainer, contentWrapper, selector)\n\t{\n\t\tif (\n\t\t\t!postContainer\n\t\t\t|| !contentWrapper\n\t\t)\n\t\t{\n\t\t\treturn Promise.reject();\n\t\t}\n\n\t\tconst content = contentWrapper.querySelector(selector);\n\t\tconst container = postContainer.querySelector(selector);\n\n\t\tif (container && content)\n\t\t{\n\t\t\treturn Runtime.html(container, content.innerHTML);\n\t\t}\n\n\t\treturn Promise.reject();\n\t}\n\n\tinsertPost(params)\n\t{\n\t\tconst containerNode = document.getElementById(this.nodeId.feedContainer);\n\t\tconst content = params.content;\n\t\tconst logId = params.logId;\n\t\tconst queueKey = params.queueKey;\n\t\tconst action = params.action;\n\n\t\tif (\n\t\t\t!Type.isDomNode(containerNode)\n\t\t\t|| !Type.isStringFilled(content)\n\t\t)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst serverTimestamp = (\n\t\t\ttypeof (params.serverTimestamp) != 'undefined'\n\t\t\t&& parseInt(params.serverTimestamp) > 0\n\t\t\t\t? parseInt(params.serverTimestamp)\n\t\t\t\t: 0\n\t\t);\n\n\t\tif (action === 'update')\n\t\t{\n\t\t\tlet postContainer = document.getElementById('lenta_item_' + logId);\n\t\t\tif (!postContainer)\n\t\t\t{\n\t\t\t\tpostContainer = document.getElementById('lenta_item');\n\t\t\t}\n\n\t\t\tif (!postContainer)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst matches = this.pageId.match(/^detail_(\\d+)/i);\n\t\t\tif (\n\t\t\t\tmatches\n\t\t\t\t&& logId != matches[1]\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst contentWrapper = postContainer.appendChild(document.createElement('div'));\n\t\t\tcontentWrapper.style.display = 'none';\n\t\t\tRuntime.html(contentWrapper, content);\n\n\t\t\tif (postContainer.id === 'lenta_item') // empty detail\n\t\t\t{\n\t\t\t\tthis.processDetailBlock(postContainer, contentWrapper, `.${this.class.postItemTop}`);\n\t\t\t\tthis.processDetailBlock(postContainer, contentWrapper, `.${this.class.postItemPostBlock}`).then(() =>\n\t\t\t\t{\n\t\t\t\t\tconst pageBlockNode = postContainer.querySelector(`.${this.class.postItemPostBlock}`);\n\t\t\t\t\tconst resultBlockNode = contentWrapper.querySelector(`.${this.class.postItemPostBlock}`);\n\n\t\t\t\t\tif (pageBlockNode || resultBlockNode)\n\t\t\t\t\t{\n\t\t\t\t\t\tconst pageClassList = this.filterPostBlockClassList(pageBlockNode.classList);\n\t\t\t\t\t\tconst resultClassList = this.filterPostBlockClassList(resultBlockNode.classList);\n\n\t\t\t\t\t\tpageClassList.forEach((className) => {\n\t\t\t\t\t\t\tpageBlockNode.classList.remove(className);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tresultClassList.forEach((className) => {\n\t\t\t\t\t\t\tpageBlockNode.classList.add(className);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tBitrixMobile.LazyLoad.showImages();\n\t\t\t\t});\n\t\t\t\tthis.processDetailBlock(postContainer, contentWrapper, `.${this.class.postItemAttachedFileWrap}`).then(() =>\n\t\t\t\t{\n\t\t\t\t\tBitrixMobile.LazyLoad.showImages();\n\t\t\t\t});\n\t\t\t\tthis.processDetailBlock(postContainer, contentWrapper, `.${this.class.postItemInformWrap}`);\n\t\t\t\tthis.processDetailBlock(postContainer, contentWrapper, `.${this.class.postItemInformWrapTree}`);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tpostContainer = postContainer.querySelector(`div.${this.class.postItemTopWrap}`);\n\n\t\t\t\tconst contentPostItemTopWrap = contentWrapper.querySelector(`div.${this.class.postItemTopWrap}`);\n\n\t\t\t\tRuntime.html(postContainer, contentPostItemTopWrap.innerHTML).then(() => {\n\t\t\t\t\toMSL.checkNodesHeight();\n\t\t\t\t\tBitrixMobile.LazyLoad.showImages();\n\n\t\t\t\t\tif (document.getElementById('framecache-block-feed'))\n\t\t\t\t\t{\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tthis.updateFrameCache({\n\t\t\t\t\t\t\t\ttimestamp: serverTimestamp\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}, 750);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tcontentWrapper.remove();\n\t\t}\n\t\telse if (action === 'add')\n\t\t{\n\t\t\tthis.setNewPostContainer(Tag.render`<div class=\"${this.class.postNewContainerTransformNew} ${this.class.postLazyLoadCheck}\" ontransitionend=\"${this.handleInsertPostTransitionEnd.bind(this)}\"></div>`);\n\t\t\tDom.prepend(this.getNewPostContainer(), containerNode);\n\t\t\tUtils.htmlWithInlineJS(this.getNewPostContainer(), content).then(() =>\n\t\t\t{\n\t\t\t\tconst postNode = this.getNewPostContainer().querySelector(`div.${this.class.listPost}`);\n\t\t\t\tDom.style(this.getNewPostContainer(), 'height', `${postNode.scrollHeight + 12/*margin-bottom*/}px`);\n\n\t\t\t\tif (serverTimestamp > 0)\n\t\t\t\t{\n\t\t\t\t\tthis.setOptions({\n\t\t\t\t\t\tframeCacheTs: serverTimestamp\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\toMSL.registerBlocksToCheck();\n\t\t\t\tsetTimeout(() => { oMSL.checkNodesHeight(); }, 100);\n\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.updateFrameCache({\n\t\t\t\t\t\ttimestamp: serverTimestamp\n\t\t\t\t\t});\n\t\t\t\t}, 750);\n\t\t\t});\n\t\t}\n\n\t\tPublicationQueueInstance.emit('onPostInserted', new BaseEvent({\n\t\t\tdata: {\n\t\t\t\tkey: queueKey\n\t\t\t}\n\t\t}));\n\t}\n\n\tremovePost(params)\n\t{\n\t\tconst logId = parseInt(params.logId);\n\n\t\tif (logId <= 0)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst itemNode = document.getElementById('lenta_item_' + logId);\n\n\t\tif (!itemNode)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\titemNode.remove();\n\t}\n\n\tfilterPostBlockClassList(classList)\n\t{\n\t\tconst result = [];\n\n\t\tArray.from(classList).forEach((className) => {\n\t\t\tif (\n\t\t\t\tclassName === 'info-block-background'\n\t\t\t\t|| className === 'info-block-background-with-title'\n\t\t\t\t|| className === 'info-block-gratitude'\n\t\t\t\t|| className === 'info-block-important'\n\t\t\t\t|| className === 'ui-livefeed-background'\n\t\t\t\t|| className.match(/info-block-gratitude-(.+)/i)\n\t\t\t\t|| className.match(/ui-livefeed-background-(.+)/i)\n\t\t\t)\n\t\t\t{\n\t\t\t\tresult.push(className);\n\t\t\t}\n\t\t});\n\n\t\treturn result;\n\t}\n\n\thandleInsertPostTransitionEnd(event)\n\t{\n\t\tif (event.propertyName === 'height')\n\t\t{\n\t\t\tthis.getNewPostContainer().classList.remove(this.class.postNewContainerTransformNew);\n\t\t\tthis.getNewPostContainer().classList.remove(this.class.postNewContainerTransform);\n\t\t\tDom.style(this.getNewPostContainer(), 'height', null);\n\n\t\t\tthis.recalcMaxScroll();\n\t\t\tBitrixMobile.LazyLoad.showImages();\n\t\t}\n\t}\n\n\tonLazyLoadImageLoaded(event)\n\t{\n\t\tthis.recalcMaxScroll();\n\n\t\tconst [imageNode] = event.getData();\n\t\tif (imageNode)\n\t\t{\n\t\t\tconst postCheckNode = imageNode.closest(`.${this.class.postLazyLoadCheck}`);\n\t\t\tif (postCheckNode)\n\t\t\t{\n\t\t\t\tconst postNode = postCheckNode.querySelector(`div.${this.class.listPost}`);\n\n\t\t\t\tif (postNode)\n\t\t\t\t{\n\t\t\t\t\tpostCheckNode.classList.add(this.class.postNewContainerTransform);\n\t\t\t\t\tDom.style(postCheckNode, 'height', `${postNode.scrollHeight}px`);\n\t\t\t\t\tsetTimeout(() =>\n\t\t\t\t\t{\n\t\t\t\t\t\tpostCheckNode.classList.remove(this.class.postNewContainerTransform);\n\t\t\t\t\t\tDom.style(postCheckNode, 'height', null);\n\t\t\t\t\t}, 500);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\trecalcMaxScroll()\n\t{\n\t\tthis.setMaxScroll(document.documentElement.scrollHeight - window.innerHeight - 190);\n\t}\n\n\tsetPreventNextPage(status)\n\t{\n\t\tthis.setOptions({\n\t\t\tpreventNextPage: !!status\n\t\t});\n\n\t\tconst refreshNeededNode = document.getElementById('next_page_refresh_needed');\n\t\tconst nextPageCurtainNode = document.getElementById('next_post_more');\n\n\t\tif (\n\t\t\trefreshNeededNode\n\t\t\t&& nextPageCurtainNode\n\t\t)\n\t\t{\n\t\t\trefreshNeededNode.style.display = (!!status ? 'block' : 'none');\n\t\t\tnextPageCurtainNode.style.display = (!!status ? 'none' : 'block');\n\t\t}\n\t}\n\n\tonPinnedPanelChange(params)\n\t{\n\t\tconst logId = (params.logId ? parseInt(params.logId) : 0);\n\t\tconst value = (['Y', 'N'].indexOf(params.value) !== -1 ? params.value : null);\n\t\tconst pinActionContext = (Type.isStringFilled(params.pinActionContext) ? params.pinActionContext : 'list');\n\n\t\tif (\n\t\t\t!logId\n\t\t\t|| !value\n\t\t\t|| !PinnedPanelInstance.getPinnedPanelNode()\n\t\t)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tlet postNode = (Type.isDomNode(params.postNode) ? params.postNode: null);\n\t\tif (!Type.isDomNode(params.postNode)) // from detail in list\n\t\t{\n\t\t\tpostNode = document.getElementById(`lenta_item_${logId}`);\n\t\t}\n\n\t\tif (!Type.isDomNode(postNode))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (value === 'N')\n\t\t{\n\t\t\tPinnedPanelInstance.extractEntry({\n\t\t\t\tlogId: logId,\n\t\t\t\tpostNode: postNode,\n\t\t\t\tcontainerNode: document.getElementById(this.nodeId.feedContainer)\n\t\t\t});\n\t\t}\n\t\telse if (value === 'Y')\n\t\t{\n\t\t\tif (Type.isDomNode(params.postNode))\n\t\t\t{\n\t\t\t\tapp.showPopupLoader({text:\"\"});\n\n\t\t\t\tPinnedPanelInstance.getPinnedData({\n\t\t\t\t\tlogId: logId\n\t\t\t\t}).then((pinnedData) => {\n\t\t\t\t\tapp.hidePopupLoader();\n\n\t\t\t\t\tPinnedPanelInstance.insertEntry({\n\t\t\t\t\t\tlogId: logId,\n\t\t\t\t\t\tpostNode: params.postNode,\n\t\t\t\t\t\tpinnedContent: pinnedData\n\t\t\t\t\t});\n\n\t\t\t\t}, (response) => {\n\t\t\t\t\tapp.hidePopupLoader();\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t}\n\n\tonPostPinChanged(params)\n\t{\n\t\tconst logId = (params.logId ? parseInt(params.logId) : 0);\n\t\tconst value = (['Y', 'N'].indexOf(params.value) !== -1 ? params.value : null);\n\n\t\tif (\n\t\t\t!logId\n\t\t\t|| !value\n\t\t)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst menuNode = document.getElementById('log-entry-menu-' + logId);\n\t\tif (!menuNode)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tlet postNode = menuNode.closest(`.${this.class.detailPost}`);\n\t\tif (!postNode)\n\t\t{\n\t\t\tpostNode = menuNode.closest(`.${this.class.listPost}`);\n\t\t}\n\t\tif (!postNode)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (value === 'Y')\n\t\t{\n\t\t\tpostNode.classList.add(this.class.postItemPinActive);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tpostNode.classList.remove(this.class.postItemPinActive);\n\t\t}\n\t}\n\n\thandleClick(e)\n\t{\n\t\tif (e.target.classList.contains(this.class.pin))\n\t\t{\n\t\t\tlet post = null;\n\t\t\tlet menuNode = null;\n\t\t\tlet context = 'list';\n\n\t\t\tlet postNode = e.target.closest(`.${this.class.listPost}`);\n\t\t\tif (postNode) // lest\n\t\t\t{\n\t\t\t\tmenuNode = postNode.querySelector('[data-menu-type=\"post\"]');\n\t\t\t\tpost = this.getPostFromNode(postNode);\n\t\t\t}\n\t\t\telse // detail\n\t\t\t{\n\t\t\t\tcontext = 'detail';\n\t\t\t\tpostNode = e.target.closest(`.${this.class.detailPost}`);\n\t\t\t\tif (postNode)\n\t\t\t\t{\n\t\t\t\t\tmenuNode = postNode.querySelector('[data-menu-type=\"post\"]');\n\t\t\t\t\tif (menuNode)\n\t\t\t\t\t{\n\t\t\t\t\t\tpost = this.getPostFromLogId(menuNode.getAttribute('data-log-id'));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\tpost\n\t\t\t\t&& menuNode\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn post.setPinned({\n\t\t\t\t\tmenuNode,\n\t\t\t\t\tcontext\n\t\t\t\t});\n\t\t\t}\n\n\t\t\te.stopPropagation();\n\t\t\treturn e.preventDefault();\n\t\t}\n\t\telse if (e.target.classList.contains(this.class.addPostButton))\n\t\t{\n\t\t\tif (BXMobileAppContext.getApiVersion() >= this.getApiVersion('layoutPostForm'))\n\t\t\t{\n\t\t\t\tconst formManager = new PostFormManager();\n\t\t\t\tformManager.show({\n\t\t\t\t\tpageId: this.getPageId(),\n\t\t\t\t\tgroupId: this.getOption('groupId', 0),\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tapp.exec('showPostForm', oMSL.showNewPostForm());\n\t\t\t}\n\t\t}\n\t\telse if (\n\t\t\t(\n\t\t\t\te.target.closest(`.${this.class.listWrapper}`)\n\t\t\t\t|| e.target.closest(`.${this.class.pinnedPanel}`)\n\t\t\t)\n\t\t\t&& !(\n\t\t\t\te.target.tagName.toLowerCase() === 'a'\n\t\t\t\t&& Type.isStringFilled(e.target.getAttribute('target'))\n\t\t\t\t&& e.target.getAttribute('target').toLowerCase() === '_blank'\n\t\t\t)\n\t\t)\n\t\t{\n\t\t\tconst detailFromPinned = !!(\n\t\t\t\te.target.classList.contains(this.class.postItemPinnedBlock)\n\t\t\t\t|| e.target.closest(`.${this.class.postItemPinnedBlock}`)\n\t\t\t);\n\t\t\tconst detailFromNormal = !!(!detailFromPinned && (\n\t\t\t\te.target.classList.contains(this.class.postItemPostContentView)\n\t\t\t\t|| e.target.closest(`.${this.class.postItemPostContentView}`)\n\t\t\t\t|| e.target.classList.contains(this.class.postItemDescriptionBlock) // tasks\n\t\t\t\t|| e.target.closest(`.${this.class.postItemDescriptionBlock}`)\n\t\t\t));\n\t\t\tconst detailToComments = !!(!detailFromPinned && !detailFromNormal && (\n\t\t\t\te.target.classList.contains(this.class.postItemInformComments)\n\t\t\t\t|| e.target.closest(`.${this.class.postItemInformComments}`)\n\t\t\t));\n\t\t\tconst detailToExpanded = !!(!detailFromPinned && !detailFromNormal && !detailToComments && (\n\t\t\t\te.target.classList.contains(this.class.postItemInformMore)\n\t\t\t\t|| e.target.closest(`.${this.class.postItemInformMore}`)\n\t\t\t));\n\n\t\t\tif (\n\t\t\t\tdetailFromPinned\n\t\t\t\t|| detailFromNormal\n\t\t\t\t|| detailToComments\n\t\t\t\t|| detailToExpanded\n\t\t\t)\n\t\t\t{\n\t\t\t\tconst postNode = e.target.closest(`.${this.class.listPost}`);\n\t\t\t\tif (postNode)\n\t\t\t\t{\n\t\t\t\t\tconst post = this.getPostFromNode(postNode);\n\t\t\t\t\tif (post)\n\t\t\t\t\t{\n\t\t\t\t\t\tpost.openDetail({\n\t\t\t\t\t\t\tpathToEmptyPage: this.getOption('pathToEmptyPage', ''),\n\t\t\t\t\t\t\tpathToCalendarEvent: this.getOption('pathToCalendarEvent', ''),\n\t\t\t\t\t\t\tpathToTasksRouter: this.getOption('pathToTasksRouter', ''),\n\t\t\t\t\t\t\tevent: e,\n\t\t\t\t\t\t\tfocusComments: detailToComments,\n\t\t\t\t\t\t\tshowFull: detailToExpanded,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\te.stopPropagation();\n\t\t\t\treturn e.preventDefault();\n\t\t\t}\n\t\t}\n\t\telse if (e.target.closest(`.${this.class.postWrapper}`))\n\t\t{\n\t\t\tconst expand = !!(\n\t\t\t\te.target.classList.contains(this.class.postItemInformMore)\n\t\t\t\t|| e.target.closest(`.${this.class.postItemInformMore}`)\n\t\t\t\t|| e.target.classList.contains(this.class.postItemMore)\n\t\t\t\t|| e.target.closest(`.${this.class.postItemMore}`)\n\t\t\t);\n\n\t\t\tlet postItemGratitudeUsersSmallContainer = null;\n\t\t\tif (e.target.classList.contains(this.class.postItemGratitudeUsersSmallContainer))\n\t\t\t{\n\t\t\t\tpostItemGratitudeUsersSmallContainer = e.target;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tpostItemGratitudeUsersSmallContainer = e.target.closest(`.${this.class.postItemGratitudeUsersSmallContainer}`);\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\texpand\n\t\t\t\t|| Type.isDomNode(postItemGratitudeUsersSmallContainer)\n\t\t\t)\n\t\t\t{\n\t\t\t\tif (Type.isDomNode(postItemGratitudeUsersSmallContainer))\n\t\t\t\t{\n\t\t\t\t\tpostItemGratitudeUsersSmallContainer.style.display = 'none';\n\t\t\t\t\tconst postItemGratitudeUsersSmallHidden = postItemGratitudeUsersSmallContainer.parentNode.querySelector(`.${this.class.postItemGratitudeUsersSmallHidden}`);\n\t\t\t\t\tif (postItemGratitudeUsersSmallHidden)\n\t\t\t\t\t{\n\t\t\t\t\t\tpostItemGratitudeUsersSmallHidden.style.display = 'block';\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconst logId = this.getOption('logId', 0);\n\t\t\t\tconst post = new Post({\n\t\t\t\t\tlogId: logId\n\t\t\t\t});\n\n\t\t\t\tpost.expandText();\n\n\t\t\t\te.stopPropagation();\n\t\t\t\treturn e.preventDefault();\n\t\t\t}\n\n\t\t\tlet importantUserListNode = null;\n\t\t\tif (e.target.classList.contains(this.class.postItemImportantUserList))\n\t\t\t{\n\t\t\t\timportantUserListNode = e.target;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\timportantUserListNode = e.target.closest(`.${this.class.postItemImportantUserList}`)\n\t\t\t}\n\n\t\t\tif (importantUserListNode)\n\t\t\t{\n\t\t\t\tconst inputNode = importantUserListNode.parentNode.querySelector('input');\n\t\t\t\tlet postId = 0;\n\t\t\t\tif (Type.isDomNode(inputNode))\n\t\t\t\t{\n\t\t\t\t\tpostId = parseInt(inputNode.getAttribute('bx-data-post-id'));\n\t\t\t\t}\n\n\t\t\t\tif (postId > 0)\n\t\t\t\t{\n\t\t\t\t\tapp.exec(\"openComponent\", {\n\t\t\t\t\t\tname: \"JSStackComponent\",\n\t\t\t\t\t\tcomponentCode: \"livefeed.important.list\",\n\t\t\t\t\t\tscriptPath: \"/mobileapp/jn/livefeed.important.list/?version=1.0.0\",\n\n\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\tPOST_ID: postId,\n\t\t\t\t\t\t\tSETTINGS: this.getOption('importantData', {}),\n\t\t\t\t\t\t},\n\t\t\t\t\t\trootWidget: {\n\t\t\t\t\t\t\tname: 'list',\n\t\t\t\t\t\t\tsettings: {\n\t\t\t\t\t\t\t\tobjectName: \"livefeedImportantListWidget\",\n\t\t\t\t\t\t\t\ttitle: BX.message('MOBILE_EXT_LIVEFEED_USERS_LIST_TITLE'),\n\t\t\t\t\t\t\t\tmodal: false,\n\t\t\t\t\t\t\t\tbackdrop: {\n\t\t\t\t\t\t\t\t\tmediumPositionPercent: 75\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}, false);\n\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tgetPostFromNode(node)\n\t{\n\t\tif (!Type.isDomNode(node))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst logId = parseInt(node.getAttribute('data-livefeed-id'));\n\n\t\tif (logId <= 0)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\treturn new Post({\n\t\t\tlogId: logId,\n\t\t\tentryType: node.getAttribute('data-livefeed-post-entry-type'),\n\t\t\tuseFollow: (node.getAttribute('data-livefeed-post-use-follow') === 'Y'),\n\t\t\tuseTasks: (node.getAttribute('data-livefeed-post-use-tasks') === 'Y'),\n\t\t\tperm: node.getAttribute('data-livefeed-post-perm'),\n\t\t\tdestinations: node.getAttribute('data-livefeed-post-destinations'),\n\t\t\tpostId: parseInt(node.getAttribute('data-livefeed-post-id')),\n\t\t\turl: node.getAttribute('data-livefeed-post-url'),\n\t\t\tentityXmlId: node.getAttribute('data-livefeed-post-entity-xml-id'),\n\t\t\treadOnly: (node.getAttribute('data-livefeed-post-read-only') === 'Y'),\n\t\t\tcontentTypeId: node.getAttribute('data-livefeed-post-content-type-id'),\n\t\t\tcontentId: node.getAttribute('data-livefeed-post-content-id'),\n\t\t\tshowFull: (node.getAttribute('data-livefeed-post-show-full') === 'Y'),\n\n\t\t\ttaskId: parseInt(node.getAttribute('data-livefeed-task-id')),\n\t\t\ttaskData: node.getAttribute('data-livefeed-task-data'),\n\n\t\t\tcalendarEventId: parseInt(node.getAttribute('data-livefeed-calendar-event-id'))\n\t\t});\n\t}\n\n\tgetPostFromLogId(logId)\n\t{\n\t\tlet result = null;\n\n\t\tlogId = parseInt(logId);\n\t\tif (logId <= 0)\n\t\t{\n\t\t\treturn result;\n\t\t}\n\n\t\tresult = new Post({\n\t\t\tlogId\n\t\t});\n\n\t\treturn result;\n\t}\n\n\tupdateFrameCache(params)\n\t{\n\t\tlet contentNode = document.getElementById('framecache-block-feed');\n\t\tif (!Type.isDomNode(contentNode))\n\t\t{\n\t\t\tcontentNode = document.getElementById('bxdynamic_feed_refresh');\n\t\t}\n\t\tif (!Type.isDomNode(contentNode))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst props = {\n\t\t\tUSE_BROWSER_STORAGE: true,\n\t\t\tAUTO_UPDATE: true,\n\t\t\tUSE_ANIMATION: false\n\t\t};\n\n\t\tconst timestamp = (typeof params.timestamp != 'undefined' ? parseInt(params.timestamp) : 0);\n\t\tif (timestamp > 0)\n\t\t{\n\t\t\tprops.TS = timestamp;\n\t\t}\n\n\t\tBX.frameCache.writeCacheWithID(\n\t\t\t'framecache-block-feed',\n\t\t\tcontentNode.innerHTML,\n\t\t\tparseInt(Math.random() * 100000),\n\t\t\tJSON.stringify(props)\n\t\t);\n\t}\n\n\tonMobilePlayerError(event)\n\t{\n\t\tconst [player, src] = event.getData();\n\n\t\tif (!Type.isDomNode(player))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (!Type.isStringFilled(src))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst container = player.parentNode;\n\t\tif (container)\n\t\t{\n\t\t\tif (container.querySelector('.disk-mobile-player-error-container'))\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (player.querySelector('.disk-mobile-player-error-container'))\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tconst sources = player.getElementsByTagName('source');\n\t\tlet sourcesLeft = sources.length;\n\n\t\tArray.from(sources).forEach((source) => {\n\t\t\tif (\n\t\t\t\tType.isStringFilled(source.src)\n\t\t\t\t&& source.src === src\n\t\t\t)\n\t\t\t{\n\t\t\t\tDom.remove(source);\n\t\t\t\tsourcesLeft--;\n\t\t\t}\n\t\t});\n\n\t\tif (sourcesLeft > 0)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst errorContainer = Dom.create('div', {\n\t\t\tprops: {\n\t\t\t\tclassName: 'disk-mobile-player-error-container'\n\t\t\t},\n\t\t\tchildren: [\n\t\t\t\tDom.create('div', {\n\t\t\t\t\tprops: {\n\t\t\t\t\t\tclassName: 'disk-mobile-player-error-icon'\n\t\t\t\t\t},\n\t\t\t\t\thtml: ''\n\t\t\t\t}),\n\t\t\t\tDom.create('div', {\n\t\t\t\t\tprops: {\n\t\t\t\t\t\tclassName: 'disk-mobile-player-error-message'\n\t\t\t\t\t},\n\t\t\t\t\thtml: Loc.getMessage('MOBILE_EXT_LIVEFEED_PLAYER_ERROR_MESSAGE')\n\t\t\t\t})\n\t\t\t]\n\t\t});\n\n\t\tconst downloadLink = errorContainer.querySelector('.disk-mobile-player-download');\n\t\tif (downloadLink)\n\t\t{\n\t\t\tDom.adjust(downloadLink, {\n\t\t\t\tevents: {\n\t\t\t\t\tclick: () => {\n\t\t\t\t\t\tapp.openDocument({\n\t\t\t\t\t\t\turl: src\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (container)\n\t\t{\n\t\t\tplayer.style.display = 'none';\n\t\t\tcontainer.appendChild(errorContainer);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.adjust(player, {\n\t\t\t\tchildren: [ errorContainer ]\n\t\t\t});\n\t\t}\n\t}\n\n\tgetApiVersion(feature)\n\t{\n\t\tlet result = 0;\n\t\tswitch (feature)\n\t\t{\n\t\t\tcase 'layoutPostForm':\n\t\t\t\tresult = 37;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tsendErrorEval(script)\n\t{\n\t\tBX.evalGlobal('try { ' + script + ' } catch (e) { this.sendError(e.message, e.name, e.number); }');\n\t};\n\n\tsendError(message, url, linenumber)\n\t{\n\t\tAjax.runAction('socialnetwork.api.livefeed.mobileLogError', {\n\t\t\tdata: {\n\t\t\t\tmessage: message,\n\t\t\t\turl: url,\n\t\t\t\tlineNumber: linenumber,\n\t\t\t}\n\t\t}).then((response) => {\n\t\t}, (response) => {\n\t\t});\n\t}\n}\n\nconst Instance = new Feed();\nconst BalloonNotifierInstance = new BalloonNotifier();\nconst NotificationBarInstance = new NotificationBar();\nconst DatabaseUnsentPostInstance = new Database();\nconst PublicationQueueInstance = new PublicationQueue();\nconst PostMenuInstance = new PostMenu();\nconst PostFormManagerInstance = new PostFormManager();\nconst PinnedPanelInstance = new PinnedPanel();\nconst RatingInstance = new Rating();\nconst ImportantManagerInstance = new ImportantManager();\n\nexport {\n\tInstance,\n\tBalloonNotifierInstance,\n\tNotificationBarInstance,\n\tDatabaseUnsentPostInstance,\n\tPublicationQueueInstance,\n\tPostMenuInstance,\n\tPostFormManagerInstance,\n\tPinnedPanelInstance,\n\tRatingInstance,\n\tImportantManagerInstance,\n};"],"names":["BalloonNotifier","classes","show","nodeIdList","notifier","notifierCounter","notifierCounterTitle","refreshNeeded","document","getElementById","refreshNeededBlock","getRefreshNeededNode","classList","add","refreshNeededNode","remove","params","cnt","parseInt","counterValue","cnt_cent","reminder","suffix","Instance","getRefreshNeeded","getNotifierCounterNode","innerHTML","hideRefreshNeededNotifier","getNotifierCounterTitleNode","Loc","getMessage","getNotifierNode","notifierNode","NotificationBar","repo","color","background","error","info","text","filter","notifyBar","forEach","hide","bar","BXMobileApp","UI","message","textColor","useLoader","groupId","align","textAlign","autoHideTimeout","hideOnTap","onTap","id","Math","random","push","maxLines","isGlobal","useCloseButton","Database","tableName","keyName","setTableName","Type","isPlainObject","isStringFilled","setKeyName","init","addCustomEvent","onClear","bind","value","delete","app","exec","storageId","getTableName","key","getKeyName","callback","res","data","x","hasOwnProperty","JSON","parse","Object","keys","length","onLoad","onEmpty","PublicationQueue","nodeId","container","class","balloonHidden","balloonFixed","balloonPublished","balloonShow","balloonHide","timeout","afterSetItem","afterPostAdd","afterPostAddError","afterPostUpdate","afterPostUpdateError","setEventNamespace","subscribe","onFeedLoaded","onPostInserted","Event","onScroll","containerNode","isDomNode","window","pageYOffset","queue","addToTray","drawList","event","removeFromTray","node","drawItem","hideItem","setTimeout","warningText","lastElementChild","title","Tag","render","Dom","clean","append","pageId","contentType","getPageId","addSuccess","EventEmitter","Post","logId","entryType","useFollow","useTasks","perm","destinations","postId","url","entityXmlId","readOnly","contentTypeId","contentId","showFull","taskId","taskData","calendarEventId","e","oldValue","getAttribute","newValue","contains","setAttribute","Ajax","runAction","analyticsLabel","b24statAction","b24statContext","then","response","success","oMSL","setFollow","bOnlyOn","bRunEvent","bAjax","onCustomEvent","log_id","page_id","preventDefault","stopPropagation","menuNode","context","postNode","closest","pinActionContext","pathToEmptyPage","pathToCalendarEvent","pathToTasksRouter","focusComments","BXMobileAppContext","getApiVersion","Events","postToComponent","taskInfo","creatorIcon","responsibleIcon","getTaskInfo","path","replace","__MSLOpenLogEntryNew","entry_type","use_follow","use_tasks","post_perm","post_id","post_url","entity_xml_id","focus_comments","focus_form","show_full","read_only","post_content_type_id","post_content_id","pinnedValue","expandText","PostMenu","iconUrlFolderPath","sectionCode","postPerms","isInteger","useShare","useFavorites","usePinned","useRefreshComments","favoritesValue","followValue","target","result","iconUrl","action","postInstance","setPinned","selectedDestinations","a_users","b_groups","iconName","openTable","shareBlogPost","markmode","multiple","return_full_mode","user_all","showtitle","modal","selected","alphabet_index","okname","cancelname","outsection","arrowFlag","editBlogPost","feed_id","LiveFeedID","pinnedContext","feature","deleteBlogPost","setFavorites","bDetailEmptyPage","getComments","ts","iDetailTs","bPullDown","obFocus","form","location","reload","copyPostLink","createTask","entityType","entityId","PostFormManager","postData","type","getDatabaseData","getWorkgroupData","getPostData","processPostData","name","componentCode","scriptPath","BX","getOption","rootWidget","settings","objectName","promise","Promise","resolve","reject","DatabaseUnsentPostInstance","load","post","POST_TITLE","PostTitle","POST_MESSAGE","PostDetailText","isArrayFilled","DEST","DEST_DATA","PostDestination","patterns","pattern","style","item","i","matches","match","isNull","STYLE","ID","TITLE","BACKGROUND_CODE","PostBackgroundCode","IMPORTANT","PostImportantData","IMPORTANT_DATE_END","endDate","Date","GRATITUDE_MEDAL","PostGratitudeData","gratitude","employees","Array","isArray","GRATITUDE_EMPLOYEES","GRATITUDE_EMPLOYEES_DATA","userId","userData","imageUrl","subtitle","voteId","dataKey","UF_BLOG_POST_VOTE","QUESTIONS","PostVoteData","questions","map","question","QUESTION","allowMultiSelect","FIELD_TYPE","answers","ANSWERS","answer","MESSAGE","catch","console","promiseData","currentDateTime","returnEventName","getTime","assign","group","groupData","NAME","recipients","code","shortTitle","SHORT_TITLE","avatar","AVATAR","PostDestinationHidden","hiddenRecipients","TYPE","groups","PinnedPanel","panelInitialized","panel","panelCollapsed","panelActive","collapsedPanel","collapsedPanelPostsValue","collapsedPanelComments","collapsedPanelCommentsShown","collapsedPanelCommentsValue","collapsedPanelCommentsValueNew","collapsedPanelExpandButton","postItemPinned","postItemPinActive","postItemPinnedBlock","postItemPinnedTitle","postItemPinnedTextBox","postItemPinnedDesc","cancelPanel","cancelPanelButton","querySelector","adjustCollapsedPostsPanel","addEventListener","expandCollapsedPostsPanel","getPostsCount","getPinnedPanelNode","recalcCollapsedPostsPanel","from","getElementsByClassName","postsCounter","postsCounterNode","commentsCounterNode","commentsCounterValueNode","newCommentCounter","querySelectorAll","reduce","acc","status","errors","pinnedContent","pinnedPanelNode","DESCRIPTION","cancelPinnedPanel","cancelButton","currentTarget","parentNode","insertBefore","prepend","recalcPanel","__MSLOnFeedScroll","Rating","onFeedInit","BXRL","ImportantManager","hasAttribute","renderRead","POST_ID","isObject","checked","unbindAll","removeAttribute","listNode","Feed","refreshStarted","options","feedContainer","listWrapper","postWrapper","pinnedPanel","pin","postNewContainerTransformNew","postNewContainerTransform","postLazyLoadCheck","listPost","detailPost","postItemTopWrap","postItemTop","postItemPostBlock","postItemPostContentView","postItemDescriptionBlock","postItemAttachedFileWrap","postItemInformWrap","postItemInformWrapTree","postItemInformComments","postItemInformMore","postItemMore","postItemGratitudeUsersSmallContainer","postItemGratitudeUsersSmallHidden","postItemImportantUserList","addPostButton","newPostContainer","maxScroll","showLoader","hideLoader","scrollTop","removePost","onPinnedPanelChange","onPostPinChanged","onLazyLoadImageLoaded","onMobilePlayerError","handleClick","optionsList","defaultValue","isUndefined","getEntryContent","queueKey","pinned","buildSelectedDestinations","setPostFormParams","selectedRecipients","messageText","save","PostFormManagerInstance","showNewPostForm","showPostError","isFunction","errorText","NotificationBarInstance","showError","notificationParams","showPopupLoader","hidePopupLoader","scrollTo","runComponentAction","mode","signedParameters","siteTemplateId","responseLogId","insertPost","content","html","serverTimestamp","componentResult","postContainer","contentWrapper","selector","Runtime","appendChild","createElement","display","processDetailBlock","pageBlockNode","resultBlockNode","pageClassList","filterPostBlockClassList","resultClassList","className","BitrixMobile","LazyLoad","showImages","contentPostItemTopWrap","checkNodesHeight","updateFrameCache","timestamp","setNewPostContainer","handleInsertPostTransitionEnd","getNewPostContainer","Utils","htmlWithInlineJS","scrollHeight","setOptions","frameCacheTs","registerBlocksToCheck","PublicationQueueInstance","emit","BaseEvent","itemNode","propertyName","recalcMaxScroll","getData","imageNode","postCheckNode","setMaxScroll","documentElement","innerHeight","preventNextPage","nextPageCurtainNode","indexOf","PinnedPanelInstance","extractEntry","getPinnedData","pinnedData","insertEntry","getPostFromNode","getPostFromLogId","formManager","tagName","toLowerCase","detailFromPinned","detailFromNormal","detailToComments","detailToExpanded","openDetail","expand","importantUserListNode","inputNode","SETTINGS","backdrop","mediumPositionPercent","contentNode","props","USE_BROWSER_STORAGE","AUTO_UPDATE","USE_ANIMATION","TS","frameCache","writeCacheWithID","stringify","player","src","sources","getElementsByTagName","sourcesLeft","source","errorContainer","create","children","downloadLink","adjust","events","click","openDocument","script","evalGlobal","linenumber","lineNumber","BalloonNotifierInstance","PostMenuInstance","RatingInstance","ImportantManagerInstance"],"mappings":"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"}